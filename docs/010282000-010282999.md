# StackOverflow 问答 10282000-10282999

# javascript - AngularJS 中的场景测试

> ID：10282005
> 
> 赞同：0
> 
> 时间：2012-04-23T13:58:51.833
> 
> 标签：javascript, angularjs

我正在为我的 Web 应用程序使用 AngularJS。要进行e2e路由场景测试，根据教程，我需要做类似browser().navigateTo('../../app/index.html')的事情。但是，我使用 cshtml 作为我的主视图，它被阻止直接浏览服务器。所以我不能做类似 browser().navigateTo('../../app/index.cshtml') 的事情。

我希望浏览器导航到应用程序根目录而不是特定文件。我做了类似浏览器（）.navigateTo（'../../'）的事情。但是，我收到以下错误“TypeError：无法调用未定义的方法'$browser'”。我认为这是由于 index.cshtml 中的“ng-app”不包括在内。有什么简单的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:05:34.077

您可以导航到任何 url，但它必须在同一个域中，因为域策略相同（场景运行器需要访问 iframe 中的应用程序）。

这可以通过代理解决。或者您可以通过您的应用服务器为场景运行程序 (runner.html) 提供服务，这可能是更简单的解决方案。

您需要`ng-app`，以便场景运行器可以找到 $injector，因此即使您进行手动引导，也将`ng-app`属性放在应用程序的根元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:21:34.183

我会考虑可能将测试运行程序放在您的主要测试站点之外的虚拟目录中。

# android - Android - 通过内置短信应用程序发送短信

> ID：10282011
> 
> 赞同：1
> 
> 时间：2012-04-23T13:59:09.213
> 
> 标签：android, sms, default

首先，我使用模拟器进行测试。我想使用消息文本（作为参数发送）打开默认 SMS 应用程序，并允许用户从那里获得控制权（以及内置应用程序）。我使用这段代码：

```
Button btnSMS = (Button) findViewById(R.id.btnSMS);
    btnSMS.setOnClickListener(new View.OnClickListener() {
        public void onClick(View arg0) {
            Intent it = new Intent(Intent.ACTION_VIEW); 
            it.putExtra("sms_body", "text"); 
            it.setType("vnd.android-dir/mms-sms");
        }
    }); 
```

当我按下按钮时，没有任何反应。我希望 SMS 默认应用程序会打开，其中包含用户必须填写的文本和其他字段，然后发送消息。这是因为模拟器还是我的代码？我还在清单中指定了权限：

*<uses-permission android:name="android.permission.SEND_SMS" />*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T14:04:48.710

您缺少 startActivity::

```
Intent it = new Intent(Intent.ACTION_VIEW); 
it.putExtra("sms_body", "text"); 
it.setType("vnd.android-dir/mms-sms");
startActivity(it); 
```

或者您也可以使用以下代码::

```
String number = "12346556";  // The number on which you want to send SMS  
startActivity(new Intent(Intent.ACTION_VIEW, Uri.fromParts("sms", number, null))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T09:44:47.723

使用内置短信应用发送短信：

```
Intent i = new Intent(android.content.Intent.ACTION_VIEW);

i.putExtra("address", "09090909; 092322424; 123456778");

i.putExtra("sms_body", "SMS Content");

i.setType("vnd.android-dir/mms-sms");

startActivity(i); 
```

# .net - 本机线程异常崩溃.Net应用程序无异常

> ID：10282012
> 
> 赞同：4
> 
> 时间：2012-04-23T13:59:14.500
> 
> 标签：.net, exception, interop

我发现了一种情况，即我的 .Net 应用程序会意外崩溃而不会引发任何异常。我希望至少`AppDomain.UnhandledException`在这种情况下可以工作，以便我至少能够记录错误并向用户提供一些信息。

在这种情况下，我有一个 .Net 程序集（我们称之为**A**），其中包含对本机 DLL（我们称之为**B**）的互操作调用。B 创建一个线程并抛出；如果没有人捕捉到异常，我希望它会一直向上到堆栈，回到我的托管应用程序，然后最终成为未处理的异常。

在这一点上，我希望操作系统将控制权交还给.Net，它会调用`AppDomain.UnhandledException`，然后我的应用程序就会结束。但是，从来没有打过电话。

**下面我提供了足够的信息来重现该问题。可以忽略。**

*程序.cs*

```
internal class Program
{
    public static void Main()
    {
        AppDomain.CurrentDomain.UnhandledException += _currentDomainUnhandledException;
        try
        {
            BugDllInterop.ErrorMethod(0);
        }
        catch (Exception e)
        {
            Console.WriteLine("Exception: " + e.GetType().Name);
        }            

        Console.WriteLine("Clean exit.");
    }

    private static void _currentDomainUnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        Console.WriteLine("Exception trapped.");
    }
} 
```

*BugDllInterop.cs*

```
public static class BugDllInterop
{
    private const string BUG_DLL = "InteropExceptions.BugDll.dll";

    [DllImport(BUG_DLL, CallingConvention = CallingConvention.Cdecl)]
    public extern static void ErrorMethod(int i);
} 
```

*错误DLL.h*

```
// INCLUSION GUARD
#pragma once

#define DllExport __declspec(dllexport) 

extern "C" 
{
    DllExport void ErrorMethod(int i);
} 
```

*错误DLL.cpp*

```
// HEADER /////////////////////////////////////////////////////////////////////
#include "BugDll.h"

// LIBRARIES //////////////////////////////////////////////////////////////////
#include <windows.h>
#include <fstream>
#include <iostream>
#include <time.h>

using namespace std;

// FUNCTIONS //////////////////////////////////////////////////////////////////

DWORD WINAPI threadMethod(LPVOID lpParameter)
{
    throw 0;

    return 0;
}

void ErrorMethod(int i)
{

    DWORD myThreadID;
    HANDLE myHandle = CreateThread(0, 0, threadMethod, 0, 0, &myThreadID);
    WaitForSingleObject(myHandle, 3000);
    CloseHandle(myHandle);

} 
```

同样，我想要的只是`AppDomain.UnhandledException`引发事件。当然，如果有人知道如何正确*处理*异常以使应用程序保持活动状态，那就更好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:28:17.613

您无法捕获和管理从另一个非托管线程抛出的异常。

当方法引发异常时，CLR 将**仅在引发异常的线程中**搜索处理程序。甚至可以理解，因为线程的调用栈是从线程本身开始的。

您有一个*根*异常处理程序，因为 CLR 将一个处理程序放在顶层（该处理程序将调用您的过滤器），但**对于非托管线程而言并非如此，**因此**无法转发它们的异常**。

这种情况的唯一解决方案是在它们产生的线程中捕获异常。如果您的线程函数可以抛出异常，则在此处添加一个 catch。无论如何，不​​在托管方面。托管/非托管边界在这里非常厚。

您可能想阅读这篇关于异常处理的好文章：http: [//www.microsoft.com/msj/0197/exception/exception.aspx](http://www.microsoft.com/msj/0197/exception/exception.aspx)

# android - 活动/意图之间的进度对话

> ID：10282015
> 
> 赞同：2
> 
> 时间：2012-04-23T13:59:18.483
> 
> 标签：android, android-asynctask

我正在尝试将信息从一个活动传递给另一个活动，同时我希望显示一个进度对话框。主要是当第二个活动正在处理信息时。我一直在阅读，正确的做法似乎是异步任务。或者还有其他方法吗？

这是我的代码：活动一

```
 public class SearchActivity extends Activity {

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.search);

    final EditText edittext = (EditText) findViewById(R.id.edittext);
    edittext.setOnKeyListener(new OnKeyListener() {
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            // If the event is a key-down event on the "enter" button
            if ((event.getAction() == KeyEvent.ACTION_DOWN)
                    && (keyCode == KeyEvent.KEYCODE_ENTER)) {
                // Perform action on key press
                String query = edittext.getText().toString();
                // gets the text and makes sure its a string
                Intent intent = new Intent(SearchActivity.this,
                        DissertationActivity.class);
                intent.putExtra("query1", query);
                startActivity(intent);

                return true;
            }
            return false;
        }
    });

    final Button button = (Button) findViewById(R.id.searchButton);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            String query = edittext.getText().toString();
            // gets the text and makes sure its a string

            Intent intent = new Intent(SearchActivity.this,
                    DissertationActivity.class);
            intent.putExtra("query1", query);
            startActivity(intent);

        }
    });

}
   } 
```

这是第二个活动：

```
 public class DissertationActivity extends ListActivity {
/** Called when the activity is first created. */

public ArrayList<String> book_Array = new ArrayList<String>();
ArrayAdapter<String> adapter;

String href = "";
String href1 = "";
String search_Word = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle extras = getIntent().getExtras();
    search_Word = extras.getString("query1");

    adapter = new ArrayAdapter<String>(this, R.layout.list_item_1,
            book_Array);
    setListAdapter(adapter);

    ListView lv = getListView();
    lv.setTextFilterEnabled(true);

    try {
        Document doc = null;
        Document guestLink = null;

        guestLink = Jsoup.connect("https://aulib.abdn.ac.uk:443/F").get();
        Element link = guestLink.select("p > a").first();
        href1 = link.attr("href");
        href = href1.substring(0, href1.length() - 2); // removes -0 from
                                                        // the

        // href_Array.add(href); //adds href to the array because string
        // wont add to the public var.
        doc = Jsoup.connect(
                href + "&request=" + search_Word
                        + "&find_code=WRD&adjacent=N&x=0&y=0").get();
        // System.out.println(doc);
        Elements headings = doc.select("td:eq(3)");
        // System.out.println(headings);
        for (Element heading : headings) {
            // System.out.println(heading.text());
            String j = heading.text();

            book_Array.add(j);

        }

    } catch (IOException e) {
        e.printStackTrace();

    }

    book_Array.remove(0);
    adapter.notifyDataSetChanged();
    book_Array.remove(1);
    adapter.notifyDataSetChanged();
    book_Array.remove(2);
    adapter.notifyDataSetChanged();
    book_Array.remove("Search");
    adapter.notifyDataSetChanged();
    book_Array.remove(" | ");
    adapter.notifyDataSetChanged();
    book_Array.remove(0);
    adapter.notifyDataSetChanged();

    lv.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> a, View v, int position,
                long id) {
            // Context context = getApplicationContext();
            int query = position;
            // String text = book_Array.get(position);
            // int duration = Toast.LENGTH_SHORT;
            // Toast toast = Toast.makeText(context,
            // String.valueOf(position), //shows the postion in the array
            // list
            // duration);
            // toast.show();

            Intent intent = new Intent(DissertationActivity.this,
                    FullDetailsActivity.class);
            intent.putExtra("href", href);
            intent.putExtra("query1", (int) query);
            intent.putExtra("search_Word", search_Word);

            startActivity(intent);
        }
    });

}

 } 
```

我尝试使用：

```
 this.pd = ProgressDialog.show(this, "Working..", "Downloading Data...",
            true, false); 
```

但这没有用。

我将如何进行，以便在活动之间显示进度对话框？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:23:09.790

调用 ProgressDialog.show 将阻塞 UI 线程。因此，在方法返回之前，进度对话框/栏不会显示。所以我们可以创建一个线程让我们的方法在其中运行。这将避免阻塞主 UI 线程。示例代码 -

```
ProgressDialog spinnerDialog = ProgressDialog.show(  
Placeholder.this, "","Your text ", true);
new Thread(new Runnable() {
public void run() {
    //your method code
    return;
}
}).start(); 
```

# html - 如何用haml每隔几个div插入一个块？

> ID：10282026
> 
> 赞同：1
> 
> 时间：2012-04-23T14:00:05.080
> 
> 标签：html, ruby, haml

我想`div.row`每三个块插入一个，以便为下面的 haml 片段**包装**三个块。`span`

但是这段代码插入了一个`<div class="row"></div>`而不是包装了`.span4`.

```
 - data.apps.applications.each_with_index do |app, index|
  - if index%3 == 0
    .row # This is the line I want to insert
    .span4 
```

我怎么能在haml或在这种情况下这样做，`erb`更合适？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T16:01:03.317

我认为你想要的是这样的：

```
-data.apps.applications.each_slice(3) do |apps|
  .row
    -apps.each do |app|
      .span4 
```

这使用[`each_slice`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_slice). `apps`是来自 的三个项目的数组`applications`。

这从 中获取三个元素的组`applications`，并为每个组添加一个`row`div，然后`span4`为每个元素添加一个 div，所以你得到的是这样的：

```
<div class="row">
  <div class="span4"></div>
  <div class="span4"></div>
  <div class="span4"></div>
</div>
<div class="row">
  <div class="span4"></div>
  <div class="span4"></div>
  <div class="span4"></div>
</div> 
```

如果您没有三个元素的倍数，则最后一个组将只有一两个成员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:57:10.713

你的缩进是错误的

```
- data.apps.applications.each_with_index do |app, index|
  - if index%3 == 0
    .row # This is the line I want to insert
  .span4 
```

# gridview - 格式化一个字段的gridview文本以及取决于值的行

> ID：10282040
> 
> 赞同：0
> 
> 时间：2012-04-23T14:00:34.733
> 
> 标签：gridview

我有以下代码来更改网格视图中行的颜色。这很好用，我想要做的是将返回日期值的文本颜色（如果它相同）更改为行的相同颜色，因此无法看到该值。

谁能帮忙？

```
Protected Sub KitNotReturned(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles GridView1.RowDataBound

        If e.Row.RowType = DataControlRowType.DataRow Then

            Dim dateLoaned As String = DataBinder.Eval(e.Row.DataItem, "DateLoaned")
            Dim dateReturend As String = DataBinder.Eval(e.Row.DataItem, "DateReturned")

            If dateLoaned = dateReturend Then

                e.Row.BackColor = Drawing.Color.HotPink

            End If
        End If

    End Sub 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:08:55.117

好的 - 现在我明白了！为 gridview 列设置枚举通常是个好主意 - 例如：

```
Enum GvColumn
  Id = 0
  Name = 1
  ...
  DateReturned = 4
End Enum 
```

然后，您可以将该列称为：

```
e.Row.Cells(GvColumn).ForeColor 
```

这使得您在添加/删除列时不太可能出现错误，前提是您保持枚举是最新的。当然，您可以这样做的另一种方法是将单元格的 text 属性设置为空字符串：

```
e.Row.Cells(GvColumn).Text="" 
```

最后，您可以将该列设置为模板列，然后使用 FindControl 在其中查找文本框。模板列如下所示：

```
<asp:TemplateColumn Header="Something here">
<ItemTemplate>
<asp:textbox id="txtDateReturned" runat="server" text=='<%# Bind("DateReturnedText") %>' />
</ItemTemplate>
</asp:TemplateColumn> 
```

然后，您可以通过以下方式解决此问题：

```
Dim tb as TextBox = CType(e.Row.FindControl("txtDateReturned"),TextBox) 
```

只是一些想法！

# c# - 这是在 C# 中不进行空检查的情况下触发/调用事件的更好方法吗？

> ID：10282043
> 
> 赞同：13
> 
> 时间：2012-04-23T14:00:46.310
> 
> 标签：c#, .net, events, event-handling, resharper

我见过的大多数代码都使用以下方式来声明和调用事件触发：

```
public class MyExample
{
    public event Action MyEvent; // could be an event EventHandler<EventArgs>, too

    private void OnMyEvent()
    {
        var handler = this.MyEvent; // copy before access (to aviod race cond.)
        if (handler != null)
        {
            handler();
        }
    }

    public void DoSomeThingsAndFireEvent() 
    {
        // ... doing some things here
        OnMyEvent();
    }
 } 
```

甚至 ReSharper 也会以上述方式生成调用方法。

为什么不这样做：

```
public class MyExample
{
    public event Action MyEvent = delegate {}; // init here, so it's never null

    public void DoSomeThingsAndFireEvent() 
    {
        // ... doing some things here
        OnMyEvent(); // save to call directly because this can't be null
    }
 } 
```

谁能解释为什么不这样做的原因？（优点与缺点）

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T14:51:20.733

优点和缺点是：

*   空检查非常便宜；我们说的是*十亿分之*一秒。分配一个委托，然后在对象的剩余生命周期内不成功地对其进行垃圾收集可能需要*百万分之*几秒以上的时间。此外，您还消耗*了数十个字节*的内存。另外，每次事件触发时，都会对一个什么都不做的方法进行不必要的调用，从而消耗更多微秒。如果您是那种关心百万分之一秒和几十个字节的人，那么这可能是一个有意义的差异；对于绝大多数情况，它不会。

*   您必须记住始终创建空委托。这真的比记住检查空值更容易吗？

*   这两种模式实际上都没有使事件线程安全。这两种模式仍然完全有可能在一个线程上触发事件处理程序，同时在另一个线程上删除，这意味着它们会竞争。如果您的处理程序删除代码破坏了处理程序所需的状态，则可能一个线程正在破坏该状态，而另一个线程正在运行该处理程序。**不要认为仅仅检查 null 或分配一个空的处理程序就可以神奇地消除竞争条件。**它只会消除导致取消引用 null 的竞争条件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T14:09:13.287

这肯定是一种风格。但是，我认为大多数开发人员在进行空检查时会追求安全而不是风格。 *这个世界上没有任何东西可以保证错误不会蔓延到系统中，并且空值检查将继续是不必要的。*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-23T14:05:30.860

它仍然*可以*为空。考虑：

```
 var x = new MyExample();
    x.MyEvent += SomeHandler;

    // ... later, when the above code is disposed of

    x.MyEvent -= SomeHandler; 
```

**编辑：**实际上，我收回了它。对此进行了测试，如果您使用匿名委托来设置处理程序，看起来您*无法*清除它，因此您可以保存空检查。

我不确定这是否是可靠的行为，或者只是语言实现的产物......

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T14:35:42.670

我见过的简化事件触发的最佳权衡是添加扩展方法。请参阅[使用扩展方法引发 C# 事件 - 这很糟糕吗？](https://stackoverflow.com/questions/231525/raising-c-sharp-events-with-an-extension-method-is-it-bad).

# coronasdk - how to trigger event on stopping a moving ball in corona sdk

> ID：10282046
> 
> 赞同：1
> 
> 时间：2012-04-23T14:01:03.683
> 
> 标签：coronasdk

I am trying to make a game in Corona which involves hitting the ball in a certain direction using the force vector. I am trying to trigger an event when the ball stops. I cannot use the "touch" event as the touch event is called several times when I touch the ball and set the direction for releasing it.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T21:19:17.363

您可以使用 Corona 的自定义事件在发生某些事情时调度您的事件，例如当球停止时。下面的代码将向 Runtime 对象分派一个事件。

```
local event = { name = "ballHasStoppedMoving", target = Runtime }
Runtime:dispatchEvent( event ) 
```

以下代码将用于侦听“ballHasStoppedMoving”事件并在事件触发时调用您的函数“ballStoppedMoving”。

```
local function ballStoppedMoving(event)

    print("The ball has stopped moving")

end

Runtime:addEventListener("ballHasStoppedMoving", ballStoppedMoving) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:17:16.513

使用[touch event](http://developer.anscamobile.com/reference/index/events/touch)`phase`的属性，并且只在“开始”阶段做出反应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T21:41:46.847

在 enterFrame 事件中，使用 ball.getLinearVelocity 检查球的速度。如果它们不等于 (0,0)，则执行方法/事件。如果您此时要执行自定义事件，请按照迈克尔的回答。

# c# - Proper use of "Using" statement for datacontext

> ID：10282050
> 
> 赞同：8
> 
> 时间：2012-04-23T14:01:17.973
> 
> 标签：c#, entity-framework, linq-to-entities

I’m using Linq to Entities and lately, I found that a lot of folks recommending wrapping the datacontext in a using statement like this:

```
Using(DataContext db = new DataContext) {
    var xx = db.customers;
} 
```

This makes sense. However, I’m not sure how to incorporate this practice in my model. For example: I have an interface (let’s call it customer) and it is implemented by a repository like this:

```
namespace Models
{
    public class rCustomer : iCustomer
    {

        readonly DataContext db = new DataContext();

        public customer getCustomer(Guid id)
        {
            return db.customers.SingleOrDefault(por => por.id == id);
        }

        public iQueryable<customer> getTopCustomers()
        {
            return db.customers.Take(10);
        }

        //*******************************************
        //more methods using db, including add, update, delete, etc.
        //*******************************************

    }
} 
```

Then, to take the advantage of using, I will need to change the methods to look like this:

```
namespace Models
{
    public class rCustomer : iCustomer
    {
        public customer getCustomer(Guid id)
        {
            using(DataContext db = new DataContext()) {       
                return db.customers.SingleOrDefault(por => por.id == id);
            } 
        }

        public iQueryable<customer> getTopCustomers()
        {
            using(DataContext db = new DataContext()) {       
                 return db.customers.Take(10);
            } 
        }

        //*******************************************
        //more methods using db
        //*******************************************

    }
} 
```

My question is: **the recommendation of using “Using” is really that good?** Please take in consideration that this change will be a major one, I have about 25 interfaces/repository combos, and each has about 20-25 methods, not to mention the need to re-test everything after finish. Is there other way?

Thanks!

Edgar.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:03:18.730

You can implement a Database factory which will cause your **DbContext is being reused**.

You can achieve this as follows:

DatabaseFactory class:

```
public class DatabaseFactory : Disposable, IDatabaseFactory
{
    private YourEntities _dataContext;
    public YourEntities Get()
    {
        return _dataContext ?? (_dataContext = new YourEntities());
    }
    protected override void DisposeCore()
    {
        if (_dataContext != null)
            _dataContext.Dispose();
    }
} 
```

Excerpt of the Repository base class:

```
 public abstract class Repository<T> : IRepository<T> where T : class
{
    private YourEntities _dataContext;
    private readonly IDbSet<T> _dbset;
    protected Repository(IDatabaseFactory databaseFactory)
    {
        DatabaseFactory = databaseFactory;
        _dbset = DataContext.Set<T>();
    }

    protected IDatabaseFactory DatabaseFactory
    {
        get;
        private set;
    }

    protected YourEntities DataContext
    {
        get { return _dataContext ?? (_dataContext = DatabaseFactory.Get()); }
    } 
```

Your table's repository class:

```
public class ApplicationRepository : Repository<YourTable>, IYourTableRepository
{
    private YourEntities _dataContext;

    protected new IDatabaseFactory DatabaseFactory
    {
        get;
        private set;
    }

    public YourTableRepository(IDatabaseFactory databaseFactory)
        : base(databaseFactory)
    {
        DatabaseFactory = databaseFactory;
    }

    protected new YourEntities DataContext
    {
        get { return _dataContext ?? (_dataContext = DatabaseFactory.Get()); }
    }

   }
    public interface IYourTableRepository : IRepository<YourTable>
   {
   }
} 
```

This works perfectly together with AutoFac constructor injection as well.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:24:49.540

正如其他人所提到的，处理数据上下文很重要。我不会更进一步。

我看到了确保释放上下文的类的三种可能设计：

1.  您提供的第二个解决方案`rCustomer`是在需要它的每个方法的范围内创建数据上下文，以便每个数据上下文都在一个`using`块中。
2.  将数据上下文保留为实例变量并`rCustomer`实现 IDisposable 以便在`rCustomer`处置时可以处置它的数据上下文。这意味着所有`rCustomer`实例都需要包装在`using`块中。
3.  `rCustomer`通过其构造函数传递现有数据上下文的实例。如果您这样做，`rCustomer`则不负责处理它，该类的用户将负责。`rCustomer`这将允许您在 的多个实例或需要访问数据上下文的多个不同类中使用单个数据上下文。这具有优点（创建新数据上下文所涉及的开销更少）和缺点（更大的内存占用，因为数据上下文倾向于通过缓存等保留相当多的内存）。

老实说，我认为选项＃1 是一个非常好的选项，只要您没有注意到它的执行速度太慢（如果您认为它会导致问题，我会对其进行时间/分析）。由于连接池，它不应该那么糟糕。如果是的话，我会选择#3 作为我的下一个选择。#2 并不落后，但对于团队的其他成员（如果有的话）来说可能会有点尴尬和意外。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T14:06:44.500

考虑到我看到的提供的代码，您特别`readonly DataContext db = new DataContext();`像全局变量一样使用，因此您考虑拥有该对象的生命周期以及您的`rCustomer`类实例的生命周期。

如果这是真的，你可以做什么，而不是重写一切，你可以实现`IDisposable`和内部`Dispose()`代码类似

```
private void Dispose()
{
    if(db  != null) 
        db.Dispose();
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T14:06:16.283

DataContext 类包含在 Using 语句中，因为它实现了 IDisposable 接口。

在 DataContext 内部，它使用 SqlConnection 对象和 SqlCommand 对象。为了正确地将这些连接释放回 Sql 连接池，它们需要被处理掉。

垃圾收集器最终会执行此操作，但由于 IDisposable 对象的管理方式，它需要两次传递。

强烈建议调用 Dispose 并且 Using 语句是执行此操作的好方法。

阅读这些链接以获得更深入的解释：

[http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/2625b105-2cff-45ad-ba29-abdd763f74fe/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/2625b105-2cff-45ad-ba29-abdd763f74fe/)

[http://www.c-sharpcorner.com/UploadFile/DipalChoksi/UnderstandingGarbageCollectioninNETFramework11292005051110AM/UnderstandingGarbageCollectioninNETFramework.aspx](http://www.c-sharpcorner.com/UploadFile/DipalChoksi/UnderstandingGarbageCollectioninNETFramework11292005051110AM/UnderstandingGarbageCollectioninNETFramework.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-23T14:08:13.410

另一种方法是让您的 rCustomer 类实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，然后在您的[Dispose](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)方法中，如果它不为空，您可以在 DataContext 上调用 Dispose 。但是，这只是将 Disposable 模式从您的 rCustomer 类中推出到使用 rCustomer 的任何类型中。

# google-plus - iPhone 上的 Google 视频群聊按钮

> ID：10282051
> 
> 赞同：3
> 
> 时间：2012-04-23T14:01:18.427
> 
> 标签：google-plus, hangout

新的 google hangout 按钮可以在网站上嵌入 Hangouts，但 iphone 不支持。

Google + iphone 应用支持与 iphone 设备进行视频群聊。

有没有办法通过环聊按钮在 iPhone 上使用环聊？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:23:02.333

目前，您无法使用环聊按钮在移动设备上发起环聊。

移动设备只能使用来自本机移动应用程序的环聊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:28:40.647

我相信您可以通过加载在用户页面上的 UIWebView 加载它，或者只是加载到您的特定页面设计（包括您的视频群聊按钮）上？

# php - PHP DOM 生成 XML 换行符

> ID：10282057
> 
> 赞同：0
> 
> 时间：2012-04-23T14:01:40.860
> 
> 标签：php, xml, dom

> **可能重复：**
> [PHP XML 如何输出好的格式](https://stackoverflow.com/questions/8615422/php-xml-how-to-output-nice-format)

我有以下以动态方式创建 XML 文档的 PHP DOM 代码：

```
<?php

// create doctype
$dom = new DOMDocument("1.0");
// display document in browser as plain text
// for readability purposes
header("Content-Type: text/plain");

for ($i=1;$i<=5;$i++)
{
// create root element
$root = $dom->createElement("toppings");
$dom->appendChild($root);
// create child element
$item = $dom->createElement("item");
$root->appendChild($item);
// create text node
$text = $dom->createTextNode("pepperoni");
$item->appendChild($text);
}
// save and display tree
echo $dom->saveXML();
?> 
```

PHP 代码生成下一个 XML 代码：

```
<?xml version="1.0"?>
<toppings><item>pepperoni</item></toppings>
<toppings><item>pepperoni</item></toppings>
<toppings><item>pepperoni</item></toppings>
<toppings><item>pepperoni</item></toppings>
<toppings><item>pepperoni</item></toppings> 
```

我想知道要更改什么才能使 XML 看起来像这样：

```
<?xml version="1.0"?>
<toppings>
  <item>pepperoni</item>
</toppings>
<toppings>
  <item>pepperoni</item>
</toppings>
<toppings>
  <item>pepperoni</item>
</toppings>
<toppings>
  <item>pepperoni</item>
</toppings>
<toppings>
  <item>pepperoni</item>
</toppings> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:03:47.313

试试`$dom->formatOutput = true`。

# osgi - 网关如何知道 OSGi 接口？

> ID：10282058
> 
> 赞同：0
> 
> 时间：2012-04-23T14:01:45.283
> 
> 标签：osgi

我有这个问题不断弹出并浏览我的笔记和幻灯片，我似乎找不到答案。

被问到的问题是：

“在 OSGi 中，捆绑包如何使网关知道其接口。网关如何使用此信息”

我了解 OSGi 框架的原理，但我不确定该接口是如何为人所知的。

任何帮助将不胜感激:)谢谢:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:25:17.333

它称为[服务注册表](http://www.osgi.org/About/Technology#Framework)。提供者注册他们的服务，消费者从这个设施获得他们的服务。

它是一种称为[白板模式](http://www.osgi.org/wiki/uploads/Links/whiteboard.pdf)的实现，其要点是提供者和消费者不直接交互或相互依赖。他们的产品和要求由相互的第 3 方通过发布的合同（即接口）来满足。

# shell - shell脚本中的多个顺序作业以有条件的方式被cronned

> ID：10282059
> 
> 赞同：0
> 
> 时间：2012-04-23T14:01:50.683
> 
> 标签：shell, cron

我有 31 个名为 runner1.sh..runner31.sh 的 shell 脚本。我需要创建一个 cron 作业并将所有这些 .sh 脚本按顺序运行，条件是如果它们尚未运行，则它们必须运行，同时如果 runnerX 失败，它应该停止并且不开始运行 runnerX+1。

我编写了一个用于聚合这些任务的 shell 脚本，如下所示，但我不确定这是否是正确的解决方案：

```
ps -ef |grep -i grep | grep runner1.sh && echo "not to start" && sh runner1.sh && sh runner2.sh && sh runner3.sh && sh runner4.sh && sh runner5.sh && sh runner6.sh && sh runner7.sh && sh runner8.sh && sh runner9.sh && sh runner10.sh && sh runner11.sh && sh runner12.sh && sh runner13.sh && sh runner14.sh && sh runner15.sh && sh runner16.sh && sh runner17.sh && sh runner18.sh && sh runner19.sh && sh runner20.sh && sh runner21.sh && sh runner22.sh && sh runner23.sh && sh runner24.sh && sh runner25.sh && sh runner26.sh && sh runner27.sh && sh runner28.sh && sh runner29.sh && sh runner30.sh && sh runner31.sh 
```

请告诉我这种方法是否正确或解决方案是别的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:13:05.650

因此，您有一系列需要按顺序调用的 runnerX.sh 脚本。

```
for i in $(seq 1 31); do
   sh runner$i.sh || break
done 
```

这包括按顺序运行它们，并且不运行前一个中的下一个失败。

要确保基本的 runner1.sh 没有运行，您可以：

```
pid=$(ps -fe | grep '[r]unner1.sh' | awk '{print $2}') 
```

或者

```
pid=$(pgrep runner1.sh) 
```

或用于检测 runner1.sh 的 pid 的多种机制中的任何一种

结合起来，你用一个围绕`for`循环：

```
if [ -z "$pid" ]; then
  # do for here
  :
fi 
```

# racket - find-system-path

> ID：10282060
> 
> 赞同：3
> 
> 时间：2012-04-23T14:02:04.983
> 
> 标签：racket

I am trying to determine the location of `.rackettrc` on Windows using the following command:

```
(find-system-path 'init) 
```

as specified in the Racket documentation. However, I keep getting the error message

```
expects argument of type <system-path-symbol>: given 'init. 
```

Is this a bug in Racket or am I doing something wrong?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:21:14.630

啊。我意识到我正在查看旧文档。 `find-system-path`现在工作如下：

```
(find-system-path 'init-file) 
```

# asp.net-mvc - 如何访问单个 .edmx 文件中的两个数据库？

> ID：10282061
> 
> 赞同：0
> 
> 时间：2012-04-23T14:02:05.240
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, stored-procedures

我已经创建了 mvc3 应用程序。

我`.edmx`已经创建`Db1`了一个基于的视图，但现在我创建了一个基于的视图，`Database2`我需要在我的项目中使用这个视图。

为此，我需要更新我的 EF`.edmx`文件。但是当我右键单击并选择选项时，`Update model from Database` 我只得到`all tables , view ,sps from`Db1 `` its obvious But as i need to use view which is from`Database2 `how can i add it into my model`.edmx` 文件？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:18:57.163

如果两个 edmx 想要合并，则使两个 edmx 文件的部分类相同（将有两个设计器类）。为其他 edmx 文件添加另一个构造函数并使其参数化。用于标识要加载哪个 edmx 的参数。

在业务层中添加另一个类文件，在这个类文件中创建 edmx 部分类的对象，在这个类下，当你想加载谁时，edmx 文件在 edmx 部分类构造函数的构造函数中传递一些参数来识别需要打开哪个连接。

根据决定的页面名称（自定义逻辑或表名；edmx 将被加载）在 edmx 设计器类的构造函数中传递参数。

在 web 配置文件中，多个连接字符串可用于多个 edmx 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:07:43.530

实体框架不支持将多个数据库映射到一个模型/.edmx 文件（请参阅：[使用 Visual Studio 2010 统一两个模型 (edmx)](https://stackoverflow.com/questions/5799554/unify-two-models-edmx-with-visual-studio-2010)）

因此，您需要为另一个数据库创建一个单独的 .edmx 文件/模型，并使用单独的上下文引用每个模型。您的项目中还需要 2 个连接字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T06:22:48.573

一个“黑客”可能是，即 MS SQL[链接](http://msdn.microsoft.com/en-us/library/ms188279.aspx)这两个服务器并在第一个服务器上公开来自其他服务器的数据，即通过视图。但我认为它只适用于少数几张桌子。对于大型模型，这将是痛苦的。其他数据库（Firebird，Oracle，...）以类似的方式支持这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T10:05:32.433

我所做的，在 db A 中创建存储过程并通过该 SP 访问 db B，例如 select * from db2.table.then 为该特定 SP 创建一个函数导入。

如果您在同一台服务器上同时拥有两个数据库，则此方法效果很好。如果它们位于不同的服务器上，您可以在 B 上创建链接服务器以使用相同的存储过程方法访问 A。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-19T22:46:59.770

使用 ctx 作为新实体（）

```
 ctx.Database.Connection.ConnectionString = conString 
```

结束使用

# java - 同时在三个 JTable 上上下移动/滚动。

> ID：10282064
> 
> 赞同：0
> 
> 时间：2012-04-23T14:02:22.880
> 
> 标签：java, swing, listener, jscrollpane, jscrollbar

我在三个不同的 jscrollpane 上有三个不同的 jtable - 一个挨着另一个。
我成功地编写了一些代码，当我滚动鼠标滚轮时，它们会一起滚动。
我继承了 JScrollpane 并重写了它的 processMouseWheelEvent 方法，如下所示：

```
 public void processMouseWheelEvent(MouseWheelEvent e) {
    ...
    if (e.getSource() == this) {
        for (BTSJScrollPane other : effected) {
            other.processMouseWheelEvent(e);
        }
    }
} 
```

我已经使用

```
 final InputMap inputMap =   
             comp.getInputMap(JComponent.WHEN_ANCESTOR_OF_FOCUSED_COMPONENT);
    inputMap.put(KeyStroke.getKeyStroke("PAGE_DOWN"), EMPTY);
    inputMap.put(KeyStroke.getKeyStroke("PAGE_UP"), EMPTY);

    comp.getActionMap().put(EMPTY, emptyAction); 
```

但是，
我现在唯一的问题是，当用户向上和向下单击时，它们不会一起滚动，而是单独滚动。
有什么建议么 ？
到目前为止，我在滚动窗格中写了类似

```
 KeyboardFocusManager.getCurrentKeyboardFocusManager().addKeyEventDispatcher(new KeyEventDispatcher() {
        @Override public boolean dispatchKeyEvent(KeyEvent e) {
            if (thisIsThesourceTable) {
                if (e.getKeyCode() == 38 || e.getKeyCode() == 40) {

                }
            }
            return false;
        }
    }); 
```

但是：
1.有更好的方法吗？
2.也许我应该在actionMap中以某种方式做到这一点？
3\. 如何将按键向上/向下事件传递给另一个滚动窗格？
4\. 我可以知道我是否接近滚动窗格中查看部分的末尾吗？是否需要

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T14:29:44.573

1、2 和 3：您应该在滚动条上使用侦听器，以便它可以与鼠标、键盘和滚动条交互。这样你就不需要按键或鼠标监听器了。这是一种方法：

```
scroll1.getVerticalScrollBar().addAdjustmentListener(new AdjustmentListener() {

    @Override
    public void adjustmentValueChanged(AdjustmentEvent e) {
       scroll2.getVerticalScrollBar().setValue(e.getValue());
    }
}); 
```

4：查看 JScrollPane 的 getVerticalScrollBar().getMaximumSize() 和 getModel() 以确定您是否接近尾声。

# java - 为什么spring-security-oauth oauth 2.0实现中需要范围参数

> ID：10282071
> 
> 赞同：1
> 
> 时间：2012-04-23T14:02:41.510
> 
> 标签：java, security, oauth, spring-security, oauth-2.0

我正在为我公司的 REST API 实现 OAuth 2.0 提供程序，使用`spring security oauth`.
出于某种原因，当使用 Token 端点时`spring security oauth`，客户端要求客户端将其所需范围作为请求参数发送（这发生在`ClientCredentialsChecker.validateScope`方法中）。
据我了解有关[访问令牌范围](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-25#section-3.3)的规范部分，范围参数是可选的，但如果不存在范围，提供者可以决定授权请求失败。
我的问题是：

*   我是否将规范理解为允许提供商强制规定范围？
*   有谁知道为什么`spring security oauth`选择对规范进行更严格的解释而不允许对其进行配置？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:10:15.917

我认为这里的问题实际上归结为范围绑定的概念。您说得对，规范声明范围参数是可选的，但是是否必须在实现 OAuth 2 的服务中定义范围实际上取决于实现者（在本例中为 Spring）。

现在到范围绑定的概念。在实现范围或您希望能够从用户访问的信息时，您有两种基本类型 - 绑定和未绑定范围。使用绑定范围时，需要在创建应用程序并获取 OAuth 密钥和机密时定义范围。如果实现未绑定的范围（如 Spring），则需要在第一次重定向调用期间定义范围以获得用户身份验证。在许多没有定义范围的情况下，实现未绑定范围的服务将使用一组您可以访问的默认用户详细信息。看来，在 Spring 案例中，范围是必需的。

免责声明：我之前没有使用过 Spring 安全 OAuth 实现。

只是为了让您了解绑定和未绑定之间的区别，以下是一些示例：

Facebook 使用未绑定的范围来请求用户数据，因此他们的初始重定向请求可能如下所示：

```
//construct Facebook auth URI
$auth_url = sprintf("%s?redirect_uri=%s&client_id=%s&scope=email,publish_stream", 
            $authorization_endpoint, 
            $callback_url, 
            $key); 
```

在 Gowalla 的情况下（当 Gowalla 仍然可用时），他们使用绑定到 OAuth 密钥的范围，因此当您发出初始请求时，不需要定义范围，给您的请求看起来更像这（注意缺少范围参数）：

```
//construct Gowalla auth URI
$auth_url = sprintf("%s?redirect_uri=%s&client_id=%s", 
            $authorization_endpoint, 
            $callback_url, 
            $key); 
```

我希望这会有所帮助，

乔恩

# javascript - 所有浏览器的 Object.defineProperty？

> ID：10282075
> 
> 赞同：20
> 
> 时间：2012-04-23T14:02:55.357
> 
> 标签：javascript, getter-setter, defineproperty

询问 Object.defineProperty 如下所示：

```
function testComponent(){
    var testProperty;
    Object.defineProperty(this, "testProperty",
    {
        get : function()
        {
           return testProperty;
        },
        set : function(val)
        {
          testProperty = val;
        }
    });
} 
```

像这样使用它的地方：

```
testObject = new testComponent();
testObject.testProperty = "testValue"; 
```

根据我目前所见，似乎没有跨浏览器解决方案，因为我尝试使用**[es5-shim](https://github.com/kriskowal/es5-shim)**没有运气，但我想确认一下。我还找到了对**[这篇文章](http://blogs.msdn.com/b/ie/archive/2010/09/07/transitioning-existing-code-to-the-es5-getter-setter-apis.aspx)**的引用，我的测试在 IE 7 和 8 中仍然失败，任何人都可以对此有所了解吗？

我记得几个月前在 S/O 的某个地方查看了一个相关问题，我想我看到有人在答案中为此写了一个解决方案。getter / setter 的任何一般解决方法也将不胜感激。这个想法是我需要一个对象上的 getter setter 等价物，而无需通过方法传递参数更改。我不需要 IE6，但我想支持 IE7+ ff 3.6+ 等范围内的浏览器

* * *

## 下面的 QUnit 测试：（*jsFiddles*）

（这些在我机器上的所有浏览器中传递，除了 IE 7 和 8

**直接使用defineProperty，没有垫片**：http:
[//jsfiddle.net/uSYFE/](http://jsfiddle.net/uSYFE/)

**小提琴使用 ES5 垫片，我假设我需要做的就是包含它？** ：http:
[//jsfiddle.net/hyperthalamus/ntwDy/](http://jsfiddle.net/hyperthalamus/ntwDy/)

**小提琴使用 IE 推荐的解决方案**：http :
[//jsfiddle.net/hyperthalamus/xfvz3/](http://jsfiddle.net/hyperthalamus/xfvz3/)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T17:20:08.113

根据[ES5-shim](https://github.com/kriskowal/es5-shim)：

> /!\ Object.defineProperty
> 
> 此方法将静默设置“可写”、“可枚举”和“可配置”属性失败。
> 
> 在描述符上提供带有“get”或“set”的 getter 或 setter 将在缺少“defineGetter”和“defineSetter”的引擎上静默失败，其中包括迄今为止版本 8 之前的所有 IE 版本。
> 
> IE 8 提供了此方法的一个版本，但它仅适用于 DOM 对象。因此，不会安装 shim，并且尝试设置“值”属性将在非 DOM 对象上静默失败。
> 
> [https://github.com/kriskowal/es5-shim/issues#issue/5](https://github.com/kriskowal/es5-shim/issues#issue/5)

所以你知道你的答案。它可以在 DOM 元素上完成，仅此而已（仅在 IE8 上）。

如果你想让 IE7 工作，我建议你只使用 get/set 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T15:44:23.717

对于较旧的 IE，您必须确保您的属性是 dom 对象（甚至是假标签）并使用 onPropertyChange 来获得通知。有关更多详细信息，请参阅[John Dyer](http://johndyer.name/native-browser-get-set-properties-in-javascript/)的这篇文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:17:23.103

我自己也有同样的问题。[（请参阅此处。）](https://stackoverflow.com/questions/9106936/cross-browser-getter-and-setter)在 IE8 或更低版本中，它看起来并不完全可行。否则[ES5 Shim](https://github.com/kriskowal/es5-shim)是您最好的选择。

# html - 使用 SmartGWT 分配 HTML ID

> ID：10282080
> 
> 赞同：-1
> 
> 时间：2012-04-23T14:03:11.807
> 
> 标签：html, gwt, maven, selenium, smartgwt

我问了一些关于 scLocators 的问题，但我仍然没有设法得到使用 selenium 的东西。所以有一个想法： **“我怎么能对smartGwt说：在HTML中属性一个ID”**。

我尝试了 ensureDebugId("myId") 但我不知道为什么，在我的 web 应用程序中我什至找不到这个 ID。我试过 setId("myId") 但它是一样的，我在生成的 HTML 代码中看不到它。我完全迷失在这个项目中。有人能帮我吗 ？：/

=> 使用：maven、selenium web 驱动程序（htmlunit）、gwt、smartgwt。

=> 用于：对 Web 应用程序的客户端进行单元测试。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:44:38.583

这种方法是死路一条，行不通。

回到 SmartGWT 的 JavaDoc 中的[自动化测试](http://www.smartclient.com/smartgwtee/javadoc/com/smartgwt/client/docs/AutomatedTesting.html)概述，以及 SDK 中的 Selenium user-guide.html（在“selenium”文件夹中）。

如果您在使用 Selenium 时遇到问题：

1.  考虑从 smartclient.com/builds 获取 3.1d 版本，因为自 3.0 版本以来我们添加了更多文档

2.  询问有关 Selenium 方法的问题，因为您现在尝试的方法再次不起作用

# netbeans - How do I hide menus without a layer file in NetBeans Platform?

> ID：10282081
> 
> 赞同：2
> 
> 时间：2012-04-23T14:03:12.240
> 
> 标签：netbeans, netbeans-7, netbeans-plugins, netbeans-platform

I am having a hard time customizing my menus in the NetBeans Platform. The examples I've seen require you to have a Layer file which I don't believe I have in my NetBeans Platform Project.

To hide a menu via layers you are supposed to do this:

```
<folder name="Menu">
  <folder name="View_hidden"/>
  <folder name="Edit">
    <file name="org-openide-actions-FindAction.shadow_hidden"/>
  </folder>
</folder> 
```

I would like to know the annotation way of hiding menus. However, if this is the only way to do it, where would I put the layer file and what would i name it?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T03:07:06.647

隐藏菜单项的唯一方法是将条目添加到图层文件中。要将图层文件添加到您的模块，您需要

1.  `layer.xml`在模块中的任何包中创建一个新的 xml 文件
2.  使用以下模式在模块清单文件（在重要文件节点下）中注册新层文件，您在其中创建层文件的包`OpenIDE-Module-Layer: com/example/layer.xml`在哪里`com/example`

在 layer.xml 文件中，您需要从以下结构开始：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE filesystem PUBLIC "-//NetBeans//DTD Filesystem 1.2//EN" "http://www.netbeans.org/dtds/filesystem-1_2.dtd">
<filesystem>
</filesystem> 
```

**添加 _hidden 节点的快捷方式**

将层文件添加到模块后，您可以让 NetBeans 通过以下方式添加必要的`_hidden`节点：

1.  展开模块中的**重要文件**节点（任何模块都可以，但如果/当卸载此模块时，层文件也会被卸载）
2.  展开**XML 层**节点（这是在您手动添加上面的 layer.xml 文件后添加的）
3.  展开上下文节点**中的这一层**
4.  展开**菜单栏**节点
5.  右键单击要隐藏的**菜单项，然后选择删除**

# prolog - SWI-Prolog - 无法断言

> ID：10282088
> 
> 赞同：5
> 
> 时间：2012-04-23T14:03:25.217
> 
> 标签：prolog, prolog-assert

我定义一个运算符如下：

```
:- op(500, xfx, =>). 
```

当我尝试类似的事情时：

```
assert(a => b). 
```

Prolog 引发错误，提示“无权修改 static_procedure (=>)/2”。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:15:32.207

作为安全措施，您必须警告 SWI 您将在运行时修改谓词：

```
:- dynamic (=>)/2. 
```

放在文件顶部应该这样做。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T14:55:11.890

您一定是用另一个符号代替`(=>)/2`. 可能`(->)/2`这是一个无法修改的控制结构。

```
欢迎使用 SWI-Prolog（多线程，32 位，版本 6.1.3-116-gf1c7e06）
...
?-断言（（a -> b））。
错误：asserta/1：无权修改静态过程 `(->)/2'
错误：定义在 /opt/gupu/pl-devel/lib/swipl-6.1.3/boot/init.pl:194
?- op(500, xfx, =>)。
真的。

?-断言（a => b）。
真的。

```

# c - 有什么方法可以让 Visual C++ (9.0) 生成有关 printf 格式字符串与 printf 的参数类型不匹配的警告？

> ID：10282090
> 
> 赞同：4
> 
> 时间：2012-04-23T14:03:31.707
> 
> 标签：c, visual-studio, visual-c++, printf, string-formatting

Gcc 很好地提供了[-Wformat](http://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html#index-Wformat-267)来帮助查找与 printf 相关的错误。有没有办法在 MSVC 中获得相同的行为？具体来说，我希望编译器对参数进行某种级别的类型检查。由于各种原因，我明确不想使用 C++ 的 iostream 库。（而且我也不想使用 boost 格式）。

引用上面的源码，-WFormat 基本上提供了以下能力

> 检查对 printf 和 scanf 等的调用，以确保提供的参数具有适合指定格式字符串的类型，并且格式字符串中指定的转换是有意义的。

到目前为止，我能找到的最接近微软的是[这个警告](http://msdn.microsoft.com/en-us/library/wbe05206.aspx)，它与使用`%d`64 位和 32 位版本有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-27T15:20:23.123

不幸的是，没有办法在编译时生成这样的警告，但是 VC++ 代码分析工具会为参数不匹配的类似 printf 的函数生成警告消息。

有关更多详细信息，请参阅`/analyze`VC++ 和[http://msdn.microsoft.com/en-us/library/vstudio/ms173498.aspx中的选项。](http://msdn.microsoft.com/en-us/library/vstudio/ms173498.aspx)

作为旁注，人们一直在抱怨这一点，所以微软将来可能会做点什么： [https ://connect.microsoft.com/VisualStudio/feedback/details/799869/detection-of-format-string-errors-应该是常规 c 编译而不是分析的一部分](https://connect.microsoft.com/VisualStudio/feedback/details/799869/detection-of-format-string-errors-should-be-part-of-the-regular-c-compile-instead-of-analyze)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:31:46.463

我相信这不是 Visual Studio 中支持的功能（我会尝试为此查找引用）。我知道的最接近的是使用`_Printf_format_string_` [SAL 注释](http://msdn.microsoft.com/en-us/library/ms235402%28v=vs.110%29.aspx)。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-23T14:19:25.580

> 具体来说，我希望编译器对参数进行某种级别的类型检查。

默认情况下，编译器喜欢在 C++ 代码中进行类型检查。不幸的是，您正在尝试使用不提供该功能的 C 工具。

只需使用 IO 流，当类型不匹配时，编译器不仅会发出警告：它会发出错误并无法完全编译您的代码！

# c# - 寻找如何实现简单的多态性

> ID：10282094
> 
> 赞同：0
> 
> 时间：2012-04-23T14:03:40.430
> 
> 标签：c#, interface, polymorphism, implementation, open-closed-principle

我有一个非常基本的问题（我不知道为什么我无法思考）。

我正在尝试做一些多态性。

我的界面如下所示：

```
Public interface Iplugin
{

   void doSomthing(string _str);
} 
```

我也有一些实现这个接口的插件类

```
public class plugin1:Iplugin
{
    void doSomthing(string _str)
    {
        if (_str=="1")
        {
           // do somthing 1
        }
     }
 }

 public class plugin2:Iplugin
{
    void doSomthing(string _str)
    {
        if (_str=="2")
        {
           // do somthing 2
        }
     }
 }

public class plugin3:Iplugin
{
    void doSomthing(string _str)
    {
        if (_str=="3")
        {
           // do somthing 3
        }
     }
 } 
```

所以我有主类，我希望它调用所有插件

但我希望它保存 OCP（开闭原则），所以如果我将来添加另一个插件类，主类不会改变。

这是主要课程

```
public class mainApp
{
  Iplugin _context;
  mainApp()
  {
     _context= new //new what??
  }
  bool func(string str)
  {
      _context.doSomthing(str);//I would like it to invoke all the plug in and also a future plugins that I will add
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:07:54.820

当然，要创建一个特定的`Iplugin`你需要知道实现类型。看看[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:09:59.370

对于这种情况，我喜欢使用[工厂模式](http://en.wikipedia.org/wiki/Factory_%28software_concept%29)。您可以轻松地将其与一些属性和反射魔法结合起来，构建可用插件的存储库

```
[PluginAttribute("myPlugin")]
class MyPlugin : IPlugin 
```

现在工厂最初检查所有加载的程序集中的所有类并搜索属性并将类型和插件字符串标识符存储在字典中。

```
class PluginFactory
{
    static Iplugin CreatePlugin(string aName)
    {
        return Activator.CreateInstance( sRegisteredPlugins[aName]);
    }

    private static Dictionary<string, Type> sRegisteredPlugins;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:06:52.513

您可以添加一个集合来存储您的插件。集合可以在一个地方填充，然后传递给另一个方法，该方法只是遍历所有插件并调用它们。这样，它完全独立于集合中的插件类型。

正如@Ian 提到的，您需要声明`doSomthing` `virtual`它才能正常工作。

```
public class mainApp
{
  mainApp()
  {
    List<Iplugin> plugins = new ArrayList<Iplugin>;

    ...

    plugins.add(new plugin1());
    ...
    plugins.add(new plugin3());
    ...
    func(plugins, "1");
    ...
    func(plugins, "7");
  }

  bool func(List<IPlugin> plugins, string str)
  {
    foreach (IPlugin plugin in plugins) {
      plugin.doSomthing(str);
    }
  }
} 
```

这是[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection)的一个简单示例，它是多态性的一个众所周知的应用（好吧，要使其成为真正的 DI，您应该放入`func`不同的类）。为了使您的代码更加灵活，并将插件的创建与它们的使用分离，您还可以使用例如[工厂方法](http://en.wikipedia.org/wiki/Factory_method_pattern)或[构建器](http://en.wikipedia.org/wiki/Builder_pattern)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T19:29:50.813

好的，谢谢大家的帮助。

我接受了您的所有建议，并做了以下事情：

```
 namespace Plugins
{

 public class plugin1 : Iplugin
  {
    void doSomthing(string _str)
    {
        if (_str == "1")
        {
            // do somthing 1
        }
    }

}

public class plugin2 : Iplugin
{
    void doSomthing(string _str)
    {
        if (_str == "2")
        {
            // do somthing 2
        }
    }

}

public class plugin3 : Iplugin
{
    void doSomthing(string _str)
    {
        if (_str == "3")
        {
            // do somthing 3
        }
    }

 }
} 
```

所以这是包含所有插件的名称空间

现在在主应用程序中

```
namespace Factory
{
  public interface Iplugin
  {

    void doSomthing(string _str);
  }

class Program
{
    static void Main(string[] args)
    {
        string @namespace = "Plugins";

        var q = from t in Assembly.GetExecutingAssembly().GetTypes()
                where t.IsClass && t.Namespace == @namespace
                select t;
        q.ToList();

        List<Iplugin> myList = new List<Iplugin>();
        foreach (var item in q)
        {
            Iplugin temp=(Iplugin)Activator.CreateInstance(item);
            myList.Add(temp);// a list with all my plugins

        }

        foreach (var item in myList)
        {
           item.doSomthing("string");

        }

    }
} 
```

}

# iphone - 付费后如何向以前的（当我的应用程序免费时）用户收费？

> ID：10282097
> 
> 赞同：-4
> 
> 时间：2012-04-23T14:03:52.010
> 
> 标签：iphone, ios5

我的 iPhone 应用程序是长期免费的。我已经付钱了。但是如果他们想要更新，我想向已经拥有它的人收费，我不想让他们获得更新，除非他们付费。我见过一些应用程序要求付费升级，但我不知道该怎么做，知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:05:10.153

你真的不能这样做，因为它违背了苹果的支付模式。做到这一点的唯一方法是锁定您的内容并通过应用内购买使其可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:22:58.607

好吧，您在这个其他应用程序中看到的肯定只是**应用程序内购买**。

您所要做的就是将所有功能隐藏在 if 语句后面（if (fullVersionBought) {...}），并实现解锁功能的应用内购买。然后，您可以在用户启动您的应用程序时提示他们进行升级。

对于实现应用内购买，你可以看看这里，这并不难：

[https://github.com/MugunthKumar/MKStoreKit](https://github.com/MugunthKumar/MKStoreKit)

这样，您的应用程序的所有用户都无法再访问该功能，除非他们购买升级到完整版。这是否是一个好主意是另一个问题，它可能会惹恼你的一些用户，因为他们无法再使用任何功能并被迫突然付款。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:06:31.513

称其为免费版本，不再更新（错误修复除外）并创建一个新程序并开始收费。

# signalr - SignalR 可以处理丢失的消息吗？

> ID：10282099
> 
> 赞同：12
> 
> 时间：2012-04-23T14:03:59.173
> 
> 标签：signalr

假设我的网络连接中断了几秒钟，我错过了一些 SignalR 服务器推送的消息。

当我重新连接网络时，我错过的消息会丢失吗？还是 signalR 处理它们并在我重新连接时将它们推出？

如果它不能处理丢失的消息，那么推荐的确保一致性的方法是什么？

*   定期（2-3 分钟）轮询检查服务器数据？
*   以某种方式检测客户端的网络丢失并进行 ajax 调用以获取有关网络恢复的数据？
*   别的东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-26T13:04:28.290

这里有几个想法：

如果您每秒发送的消息不多，请考虑在消息本身中不发送数据。相反，该消息只是对客户端的“ping”，告诉他们尽可能去获取服务器数据。正如您所说，将其与定期民意调查相结合，您可以放心，您不会错过任何消息。他们只是可能会延迟。

如果您要快速发送大量消息，那么为每个消息添加一个顺序 ID 怎么样？想一想 SQL Identity 列。您的客户需要跟踪最近收到的 ID。网络重新连接后，客户端可以请求自 [Last ID] 以来的所有消息。如果收到的消息的 ID 与最近收到的消息不连续，则您知道存在断开连接，可以向服务器询问丢失的信息。

# performance - 为什么浏览器只能并行下载两个或四个组件？

> ID：10282107
> 
> 赞同：1
> 
> 时间：2012-04-23T14:04:23.343
> 
> 标签：performance, http, httprequest, yahoo

我知道减少 HTTP 请求的数量会减少用户的页面加载时间，因为浏览器每个主机名只能并行加载“[两个或四个](http://yuiblog.com/blog/2006/11/28/performance-research-part-1/)”组件。

但是我似乎无法在任何地方找到有关为什么浏览器只能在每个主机名上并行下载“两个或四个”组件的信息！？这是HTTP浏览器的限制吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:50:47.627

它包含在[RFC 2616，“超文本传输​​协议——HTTP/1.1”](http://www.ietf.org/rfc/rfc2616.txt)中：

> 使用持久连接的客户端应该限制他们维护到给定服务器的同时连接的数量。单用户客户端不应与任何服务器或代理保持超过 2 个连接。一个代理应该使用最多 2*N 个连接到另一个服务器或代理，其中 N 是同时活跃的用户数。这些指南旨在改善 HTTP 响应时间并避免拥塞。

您还必须记住，这个 RFC 是在 1999 年编写的，当时我们的服务器、网络工具包等功能远没有那么强大。

大多数浏览器现在支持两个以上的连接，其中六个非常常见。

如果您想要浏览器支持的主机名的并行连接数的最新列表，请参阅[http://www.browserscope.org/?category=network 。](http://www.browserscope.org/?category=network)

您可能还想阅读 Jim Getty 关于“缓冲区膨胀”的一些内容，并行连接会使情况变得更糟。

# c++ - 如果函数在头文件中定义， inline 关键字是否有意义？

> ID：10282108
> 
> 赞同：3
> 
> 时间：2012-04-23T14:04:25.533
> 
> 标签：c++, templates, inline

所有代码根据我的阅读，A1 和 A2 是相同的，但如果 A3 与 A2 相同，我不会。我知道代码会编译，因为所有的 A 类都是 tmemplate。

注意：所有的类和方法声明都在一个 .h 文件中。

```
template <typename _Ty>
class A1 {
public:
    A1();
    void foo() { ... }
};

template <typename _Ty>
class A2 {
public:
    A2();
    void foo();
};

template <typename _Ty>
inline void A2<_Ty>::foo() { ... }

template <typename _Ty>
class A3 {
public:
    A3();
    void foo();
};

template <typename _Ty>
void A3<_Ty>::foo() { ... } // note: No inline keyword here. 
```

* * *

PS我在stackoverflow上看到了这个问题的变体，但不是这个确切的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T14:07:35.060

是的，它是有意义的，但是与模板结合起来并没有太大的效果。

关键字的主要作用`inline`是告诉编译器这个函数可能会在多个编译单元中以相同的定义出现，所以它需要被链接器标记为“select-one”（这样你就不会得到多个定义错误）。模板已经具有此功能。

`inline`也暗示编译器您认为该函数应该被内联，但编译器通常会自行做出内联优化的最终决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:32:35.507

> 如果函数在头文件中定义， inline 关键字是否有意义？

这是。由于省略了 inline 关键字，以下项目将在 msvc 和 g++ 上产生链接器错误：

* * *

**主.cpp**：

```
#include "a.h"

int main(int argc, char** argv){
    A obj;
    obj.f();
    a();
    b();
    return 0;
} 
```

* * *

**啊**：

```
#ifndef A_HEADER
#define A_HEADER

class A{
public:
    void f();
};

void a(){
}

void b();

void A::f(){
}

#endif 
```

* * *

**b.cpp**：

```
#include "a.h"

void b(){
    A obj;
    obj.f();
    a();
} 
```

* * *

*.pro 文件（用于 Qt 4 构建系统）：

```
TEMPLATE = app
TARGET = 
DEPENDPATH += .
INCLUDEPATH += .

HEADERS += a.h
SOURCES += b.cpp main.cpp 
```

* * *

**编译输出**：

cl.exe：

* * *

```
main.obj : error LNK2005: "void __cdecl a(void)" (?a@@YAXXZ) already defined in b.obj
main.obj : error LNK2005: "public: void __thiscall A::f(void)" (?f@A@@QAEXXZ) already defined in b.obj
debug\1234.exe : fatal error LNK1169: one or more multiply defined symbols found 
```

* * *

克++：

* * *

```
debug/main.o: In function `Z1av':
D:\c++\1234/a.h:6: multiple definition of `a()'
debug/b.o:D:\c++\1234/a.h:6: first defined here
debug/main.o:D:\c++\1234/a.h:11: multiple definition of `A::f()'
debug/b.o:D:\c++\1234/a.h:11: first defined here
collect2: ld returned 1 exit status
make[1]: *** [debug/1234.exe] Error 1
make: *** [debug] Error 2 
```

* * *

现在，你认为为什么会发生这种情况？因为编译器在编译时会将头文件的内容**插入到 *.cpp 文件中。**由于函数不是“内联”的，它的名称会被链接器知道，并且每个*.obj/* .o 文件都将获得自己唯一的`A::f()`and副本`a()`。Linker 不会知道你应该使用哪个并且会抱怨。如果你使函数内联，一切都会正常工作。

但是，模板是另一回事。

# javascript - 如何在javascript函数中写入html文件的路径

> ID：10282110
> 
> 赞同：1
> 
> 时间：2012-04-23T14:04:42.170
> 
> 标签：javascript

我想在 Iframe 中动态加载 HTML 文件。

我尝试了以下代码：

```
<script type="text/javascript">
$(document).ready(function () {
    $('a').click(function (e) {
        e.preventDefault();   
        filename = "\"+$(this).text() + ".htm";
        alert(filename);
        $('iframe').attr('src', filename);
    });
}); </script> 
```

目录结构：E:SVN_HobbyHomes\HobbyHomesWebApp\HTML\Dancing.htm

它不会在 iframe 内的路径中加载文件。Howevr 如果我这样写它可以工作，但我不知道如何在 javascript 中使用 @Url.Content

```
<iframe id="iframe" frameborder="0" src=src="@Url.Content("~/HTML/Dancing.htm")" style="width: 100%; height: 700px;"></iframe> 
```

仍然给我错误：找不到资源！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:09:02.903

iframe 的来源必须是绝对或相对的 URL。您的不是 URL，而是本地文件名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:10:22.327

这很可能是浏览器安全限制。出于（显而易见的）原因，不允许浏览器内代码访问工作站上的本地资源（没有插件等明确授予更多权限的东西）。

如果网页可以访问某人本地工作站上的文件，它还能做什么？您可以任意访问哪些其他文件？安全隐患非常明显。

您需要以与尝试访问它的网页相同的方式提供文件。

# c++ - 什么是 C++ 中的桶指针？

> ID：10282114
> 
> 赞同：3
> 
> 时间：2012-04-23T14:05:03.763
> 
> 标签：c++, c, pointers

*   指针和桶指针有什么区别？

*   什么是 C/C++ 中的桶指针？

*   使用它们的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T14:08:50.330

通常术语存储桶是指哈希表或哈希容器中的子容器。具有相同哈希码的元素存储在同一个桶中。存储桶可以实现为指向某些存储的指针，例如原始数组、链表的头部或指向实现类的指针。指针可以是指向任何东西的指针——变量、对象、变量……等等。

# ruby-on-rails - 从 Rails 调用外部 rake 任务：依赖问题

> ID：10282119
> 
> 赞同：3
> 
> 时间：2012-04-23T14:05:11.397
> 
> 标签：ruby-on-rails, ruby, dependencies, rake, bundler

我目前正在开发一个独立的 ruby​​ 应用程序以及作为其前端的 Rails 应用程序。我正在使用 Bundler 管理 Ruby 应用程序的依赖项，因此有两个 gemfile。

我在尝试通过对 rake 任务的系统调用从 Rails 前端执行 Ruby 应用程序时遇到问题。

当我从标准 IRB 调用 rake 任务时，它可以工作；但如果我尝试从 Rails 控制器或 Rails 控制台调用任务，则会出现依赖性问题。

作为一种解决方法，我可以将 Rails 应用程序中不存在的所有 gem 添加到 Rails Gemfile，但我想这种方法是错误的。

我认为这可能是 Bundler 范围的问题。我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:18:51.247

```
fork do
  Dir.chdir("/your/project/dir")
  ENV['BUNDLE_GEMFILE'] = File.expand_path('../Gemfile', __FILE__)
  Bundler.setup
  exec "rake -T"
end 
```

# ruby-on-rails-3 - 如何转换成json值

> ID：10282123
> 
> 赞同：0
> 
> 时间：2012-04-23T14:05:18.013
> 
> 标签：ruby-on-rails-3, json

我正在使用 rails-3

我的表是国家，字段是：

```
Id + name + created_at + updated_at 
```

在我的控制器中，我的查询是

```
@country = Country.all 
```

我想将我的数据转换为 json。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:14:54.547

```
@country.to_json 
```

[http://apidock.com/rails/ActiveRecord/Serialization/to_json](http://apidock.com/rails/ActiveRecord/Serialization/to_json)

然后当您在客户端时，您可以使用 JSON.parse(result) 捕获我们的 ajax 请求

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:10:19.290

JSON（参见[http://www.json.org](http://www.json.org)）是一种表示对象的符号方法。因此，您需要考虑是否要将对象视为您的表格，或者表格中的一条记录。您的表格可能太大而无法表示为对象。大多数人将记录或小型记录集合表示为 JSON 中的对象。

这是一个很好的讨论： http: [//mike.bailey.net.au/2011/02/json-with-ruby-and-rails/](http://mike.bailey.net.au/2011/02/json-with-ruby-and-rails/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:12:32.790

假设您有：-

```
@country = Country.all 
```

并且您将@country 数据转换为 json。

```
 json_converted_data = JSON.parse(@country) 
```

我想这会奏效

# for-loop - 在批处理文件中逐行读取txt

> ID：10282131
> 
> 赞同：16
> 
> 时间：2012-04-23T14:05:44.587
> 
> 标签：for-loop, batch-file

这是我的问题。我有一个包含 100 个不同视频名称的 txt 文件（示例）：

```
abc.mpg
def.mpg
ghi.mpg
xyz.mpg 
```

我想使用一些命令一个一个地处理这些视频，并将结果放入一个同名的文件夹中（不带扩展名）：

```
command1 abc.mpg
command2 abc.mpg
move results .\abc 
```

我的问题是如何在批处理文件中使用 for 循环执行上述迭代。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-23T14:09:25.210

该命令是 FOR 与 /F 参数这样

```
FOR /F %i in (yourFile.txt) DO yourcommand %i 
```

这从文本文件中一次读取一行并将值插入到 %i 参数中然后调用 DO 关键字后指定的命令（该命令可以是另一个需要复制或移动操作的批处理）

# python - 从大文本文件中提取哈希的脚本

> ID：10282132
> 
> 赞同：0
> 
> 时间：2012-04-23T14:05:44.993
> 
> 标签：python, perl, bash, sed, awk

我正在尝试编写一个脚本，该脚本将从包含大约 500,000 行数据的文本文件中提取 NTLM 哈希。并非所有帐户都包含哈希，我只需要包含哈希的帐户。

以下是数据的示例：

> 芒果A（一）：$NT$547e2494658ca345d3847c36cf1fsef8:::

文件中还有成千上万的其他行，但是我需要从文件中取出那一行。大约有 100 行适用于此，我不想手动搜索整个文件。

是否有一个简单的脚本或我可以在 Linux 中运行的东西来从文件中提取遵循该模式的行？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:18:38.937

`grep '\$NT\$'`*文件名*

如果在您要查找的字段之外可能还有其他 $NT$ 出现，您可能会更具体 - 这将只找到在第二个以冒号分隔的字段中包含它的行：

`awk -F: '$2 ~ /\$NT\$/'`*文件名*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:08:13.313

特异性的另一种变化：

```
grep -E ':\$NT\$[[:alnum:]]{32}:' 
```

如有必要，您可以使用范围：

```
grep -E ':\$NT\$[[:alnum:]]{30,34}:' 
```

或更笼统地说：

```
grep -E ':\$NT\$[[:alnum:]]+:' 
```

`[:alnum:]`是一个命名的字符类，包括当前语言环境中的所有字母字符、大写字母和小写字母以及所有数字字符。

其他字符类包括`[:alpha:]`, `[:cntrl:]`, `[:digit:]`, `[:graph:]`, `[:lower:]`, `[:print:]`, `[:punct:]`, `[:space:]`, `[:upper:]`, 和`[:xdigit:]`.

我会使用`[:xdigit:]`，但其中包含一个“s”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:10:27.280

在 Bash 和许多其他 shell 中：

```
grep ":$NT$" your_file.txt 
```

报价将使 $ 不受干扰地进入模式。

# c - x86_64的中断成本是多少

> ID：10282136
> 
> 赞同：2
> 
> 时间：2012-04-23T14:06:02.070
> 
> 标签：c, linux, x86-64

x86_64 中的中断成本是多少。例如由于页面错误导致的中断？内核需要多少周期来服务中断然后返回用户空间？我有兴趣只知道由于中断而产生的成本并将中断的用户级线程调度回来，因此我们可以忽略这里的中断处理程序内部发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:42:17.917

对于普通中断（硬件 IRQ 或普通异常，如除以零），可能可以给出一个上限。

即使不涉及磁盘 IO，处理页面错误的时间也很难评估，因为 CPU 必须遍历页表，这会引入许多变量。页面错误的发生不仅是因为页面不存在，而且还因为访问违规（例如，试图写入只读页面）。在任何情况下，如果 TLB 中还没有页面映射（丢失的映射永远不会被缓存），CPU 将首先必须遍历多个级别的页表，然后才能调用页面错误处理程序。访问页表条目的时间（如果地址尚未缓存在 TLB 中）再次取决于某些条目是否已经在数据缓存中。

因此，从访问线性地址到调用 PF 处理程序的时间可能从 ~200 个周期（最好的情况；存在 TLB 条目，由于访问类型错误导致的异常——只是环切换）到 ~2000 个周期（不存在 TLB 条目，数据缓存中没有页表条目）。这只是 1) 执行出错的用户模式指令和 2) 执行页面错误处理程序的第一条指令之间的时间。

[旁注：鉴于此，我想知道是否可以构建使用分页的硬实时系统。]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:07:42.357

这是一个复杂的问题，不能轻易回答。

您必须保存在中断中使用的所有（已使用）寄存器（标量、sse、fpu-state、avx 等）。

也许您必须更改虚拟地址空间上下文。

完成后，您必须重置已保存的上下文。

并且缓存/RAM 负载效应一直在改变所需的周期数。

（注意：不应分页中断，但不知道 linux 是否支持这一点，或者是否有可能）

# c# - 抑制程序部分的 Console.WriteLine

> ID：10282144
> 
> 赞同：3
> 
> 时间：2012-04-23T14:06:43.950
> 
> 标签：c#, console, console.writeline

出于某种我不知道的原因，我正在使用的库的开发人员决定`Console.WriteLine`在库中调用方法时提供大量信息，基本上解释了正在发生的每一步。

这很好，但是在开发过程中我不需要一直看到这个，所以我的问题是`Console.WriteLine`当我不希望它被使用时，我可以抑制它吗？我仍然希望能够看到我自己`Console.WriteLine`的，但不是图书馆内的。

不用说我没有图书馆的资源。

问候，

AK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:10:38.987

在调用该库之前，您可以使用[`Console.SetOut`](http://msdn.microsoft.com/en-us/library/system.console.setout.aspx)重定向`Console.Out`到您选择的某些内容（例如丢弃所有输入的内容），然后执行相同的操作来设置原始值。不过，一直这样做会很尴尬。

为了使事情更易于管理，您可以创建另一个实现`IDisposable`并使用它的类，如下所示：

```
using(new StandardOutSink()) {
    // call into the third party library
} 
```

（您需要编写）的构造函数`StandardOutSink`会将输出流重定向到特制的`TextWriter`（您还需要编写），然后该`Dispose`方法会将其设置回原始流。

# ssas - 为什么数据在 ssas 维度中重复

> ID：10282146
> 
> 赞同：0
> 
> 时间：2012-04-23T14:06:46.563
> 
> 标签：ssas

我有一个以时间为维度的 SSAS 多维数据集。它包含诸如年-季-月等层次结构。当我将其拖放到 SQL Server Managment Studio 窗口（浏览）上时，看起来数据在重复。例如,年份就像 2002,2002,2003,2003,.. 等等。如果我在 2002 年第一次扩展，我可以看到第一季度。如果我在 2002 年第二次扩展，我可以看到第二季度等等。有人能告诉我是什么原因吗? 如何更改为单个数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:37:41.283

首先，您是否使用自己的日期维度表。如果是这样，请确保您使用正确的日期、月份、季度和年份键。例如，通常日期维度将 YearMonth 列用作 Month 属性的键（例如 2012-04）。如果您没有这样的列，则需要为月（年和月）选择一个复合键。此外，检查的一个好方法是在 BIDS 中的维度设计器中转到维度的浏览器选项卡并确保层次结构显示正常。

# jquery-mobile - jQuery mobile 固定页脚、iOS web 视图和 scrollTop 问题

> ID：10282149
> 
> 赞同：0
> 
> 时间：2012-04-23T14:06:53.433
> 
> 标签：jquery-mobile

我有一个运行 Backbone.js 和 jQuery mobile 的移动应用程序。因为我有 Backbone.js，并且出于性能原因，我禁用了所有 JQM 路由和转换。我知道存储滚动位置是 JQM 中提供的一项功能，但我无法利用它（据我所知）。

我有一个列表视图，其中包含可能很长的项目列表。当用户在移动设备上点击一个时，它会存储当前滚动位置并呈现一个新视图。当用户点击“返回”按钮时，它会返回历史记录。

```
clickLink: ->
    window.lastScroll = $(window).scrollTop()

render: ->
    ...

    if window.lastScroll
        $.mobile.silentScroll window.lastScroll
        window.lastScroll = undefined 
```

这在桌面 Safari 上可以正常工作，但是当我在 iOS Safari（模拟器和真实的东西）上尝试使用它时，固定页脚导航栏存在问题。

如果用户点击返回，列表视图会按预期向下滚动，但是如果他们点击页脚导航栏，就好像他们点击了它，它下面的任何列表项都将被激活。如果用户在点击导航栏之前滚动一点，一切正常。

有没有人有任何想法？也许有更好的方法可以一起避免这个问题。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:03:44.843

会不会和这个bug有关？

[表单元素可能会在位置丢失点击区域：固定容器](https://github.com/scottjehl/Device-Bugs/issues/1)

（从这里链接[JQuery Mobile 1.1.0 文档](http://jquerymobile.com/demos/1.1.0/docs/toolbars/bars-fixed.html)）

我看到第一个链接中有一个解决方法 - 值得一试吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T18:22:55.770

[在以编程方式更改 scrollTop 后，Chad Smith 在固定位置按钮上](https://stackoverflow.com/questions/8752220/mobile-safari-bug-on-fixed-positioned-button-after-scrolltop-programmatically-ch)回答了这个Mobile Safari 错误...？

他的方法最适合我。以下是他的回应：

我通过添加一个 101% 高的 div 然后（几乎）立即删除它来解决它。

尝试：

```
<style>
.iosfix {
  height: 101%;
  overflow: hidden;
}
</style> 
```

当你滚动时：

```
window.scrollTo(0, _NEW_SCROLLTOP_);
$('body').append($('<div></div>').addClass('iosfix'));
setTimeout(function() {
  $('.iosfix').remove();
}, 500); 
```

它也适用于 jQuery.scrollTo。

[请参阅此处](http://mktgdept.com/ios-position-fixed-bug)的示例。

# android - Android - 在不同的设备上绘图

> ID：10282151
> 
> 赞同：2
> 
> 时间：2012-04-23T14:06:53.950
> 
> 标签：android, drawing, android-canvas

在我的应用程序中，我创建了一个画布并在其上添加了一些位图。问题是对象添加了为什么触摸屏幕。所以在一个屏幕上，它们出现在不同的中间，但它们的像素位置不同。

我的意思是我有平板电脑和智能手机。当我触摸一个对象时，对象会出现在两个设备（多人游戏）上，但它不在同一个地方，因为它通过 x 和 y 传递了位置。

如果有人明白我的意思，你能帮助我吗？可能它必须与计算比率有一些共同点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:34:20.257

我猜您遇到的问题是屏幕分辨率不同，并且您正在传递像素数据。您将需要使用 dp 值并在发送它们之前将 dp 转换为像素值。在接收设备上，您需要将发送回给定设备上的像素值转换为 dp。使用以下方法进行转换。

将 DP 转换为像素：

```
 final float scale = getResources().getDisplayMetrics().density;
    int pixelValue = (int) (DESIRED_DP_VALUE * scale + 0.5f); 
```

要将像素转换为 DP：

```
 final float scale = getResources().getDisplayMetrics().density;
    int dpValue = (int) ((DESIRED_PIXEL_VALUE) - 0.5f / scale); 
```

对 getDisplayMetrics().density 的调用将为您提供基于当前设备的比例值。dp 值意味着与密度无关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:29:20.237

您如何定义指标？如果您使用像素，请使用与密度无关的解决方案：

```
public int GetDipsFromPixel(float pixels)
{
   // Get the screen's density scale
   final float scale = getResources().getDisplayMetrics().density;
   // Convert the dps to pixels, based on density scale
   return (int) (pixels * scale + 0.5f);
} 
```

并在你的课堂上像这样使用它：

```
 textView.setHeight(GetDipsFromPixel(50)); 
```

这样，两个设备上的 textview 的高度将是相同的 dps，即使它们的分辨率不同。

# regex - 在正则表达式中获取子组

> ID：10282165
> 
> 赞同：1
> 
> 时间：2012-04-23T14:07:52.203
> 
> 标签：regex, apache, url, rewrite

在我的 .htaccess 中，我做了一些 rewriteURL，但我在获取数据时遇到了一些问题。

我有 ：`RewriteRule ^forum/([0-9]+)-([a-zA-Z]+)/([0-9]+)-([a-zA-Z]+)/?$ index.php?page=forum&category=$1&topic=$3 [NC,L]`

所以我可以得到例如：`index.php?page=forum&category=123&topic=456`有了这个`URL forum/123-cat/456-topic`

但我想要这个正则表达式`^forum/([0-9]+)-([a-zA-Z]+)(/([0-9]+)-([a-zA-Z]+))?/?$`，但 3 美元得到`456-topic`，而不仅仅是`456`.

那么如何获得公正`456`呢？

谢谢>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:10:32.640

3美元就是全部；你想要的那件是 4 美元。

通过打开括号来计数。 `([0-9]+)`是 1 美元，`([a-zA-Z]+)`是 2 美元，`(/([0-9]+)-([a-zA-Z]+))`是 3 美元，`([0-9]+)`里面是 4美元，里面是`([a-zA-Z]+)`5 美元。

# sql - 如何在不解析的情况下将常量列添加到 SQL 查询？

> ID：10282166
> 
> 赞同：1
> 
> 时间：2012-04-23T14:07:54.367
> 
> 标签：sql, sql-server, sql-server-2008, select

我有一个由应用程序的其他部分提供的复杂查询，我需要添加一个常量列并传递查询以进行进一步处理（SSRS ServerReport）。查询可以由多个查询组成，`UNION ALL`并且可以包含`ORDER BY`.

**编辑：**我忘记强调标题中包含的内容**而不进行解析。**我对查询（条件、子查询）一无所知，所以解析和修改它是相当危险的。

例子：

```
declare @t table(id int)
insert into @t values(1)
insert into @t values(2) 
```

查询：

```
(select  id from @t where id=1
union all
select  id from @t where id=2) order by id desc 
```

所需输出：

```
id | Par
----------
2  | Hello   
1  | Hello 
```

尝试（不使用 ORDER BY）：

```
SELECT *, 'Hello' Par from
((select  id from @t where id=1
    union all
    select  id from @t where id=2) order by id desc) tbl 
```

解决方案必须适用于 SQL Server 2008+。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:12:57.423

```
select tbl.id,
    'Hello' Par
from (
    select id
    from @t
    where id = 1

    union all

    select id
    from @t
    where id = 2
 ) tbl
order by tbl.id desc 
```

我假设您正在 UNIONing 与您的示例不同的查询，否则您只需执行以下操作：

```
select id,      
   'Hello' Par
from @t
where id in (1, 2)
order by id desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:03:20.997

如果不注入查询（或创建像@satcat66 的答案这样的详细动态 SQL），您将无法解决此问题。带有联合的子查询需要一个别名来定义它，例如`where id=2) AS alias ORDER BY id DESC)...`，没有任何魔法可以使这种损坏的语法起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:14:07.097

```
declare @t table(id int)
insert into @t values(1)
insert into @t values(2) 

;WITH cte AS(
    SELECT id, 'Hello' Par
     FROM @t t1 WHERE t1.id=1

    UNION ALL

    SELECT id, 'Hello' Par
    FROM @t t2 WHERE t2.id=2
)
SELECT * FROM cte
ORDER BY id DESC 
```

[WITH common_table_expression](http://msdn.microsoft.com/en-us/library/ms175972.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:18:16.110

如何使用 CTE：

```
declare @t table(id int)
insert into @t values(1)
insert into @t values(2) 
;
with my_cte as (
    select  id from @t where id=1
    union all
    select  id from @t where id=2
)
select *, 'Hello'
from my_cte
order by id 
```

编辑：在这种情况下，您可以在临时表中插入主查询的结果。它将尊重排序：

```
create table #temptable(
id int
)

declare @t table(id int)
insert into @t values(1)
insert into @t values(2) 

insert into #temptable
select  id from @t where id=1
union all
select  id from @t where id=2
order by id desc

select *, 'Hello' from #temptable 
```

结果：

```
2   Hello
1   Hello 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T14:22:38.097

你的查询有点问题

```
SELECT *, 'Hello' Par from
(select  id from @t where id=1
    union all
    select  id from @t where id=2) tbl order by id desc 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T15:02:16.220

假设您事先知道列名和类型，

```
DECLARE @query nvarchar(max);
SET @query = '

declare @t table(id int);
insert into @t values(1);
insert into @t values(2); 
(select  id from @t where id=1
    union all
    select  id from @t where id=2) order by id desc';

 CREATE TABLE #T ( ind int IDENTITY(1,1) NOT NULL, id int );
 INSERT INTO #T (id)
 exec sp_executesql @query;

 SELECT ID, 'Hello' AS Par FROM #T ORDER BY ind; 
```

# asp.net - 网站不允许上传大文件

> ID：10282172
> 
> 赞同：1
> 
> 时间：2012-04-23T14:08:01.263
> 
> 标签：asp.net, iis, iis-7

我有一个在 IIS 6 上运行并且运行良好的 ASP.NET 网站。我们允许我们的客户毫无问题地上传大文件 (50MB+)。我们最近搬了家（我的公司），我们的网站也搬到了异地（在我们自己大楼的服务器上之前），我们不得不从 IIS 6 切换到 IIS 7。自从搬家后，我们的网站赢了'不允许我们的客户传输大文件。我已经测试了较小的文件（< 10MB）并且它们上传正常，但是当我尝试超过 10MB 的任何内容时，我得到 404 错误：

`404 - File or directory not found. The resource you are looking for might have been removed, had its name changed, or is temporarily unavailable.`

我们的 web.config 中已经包含以下内容：

```
<httpRuntime maxRequestLength="1321600" /> 
```

IIS 7 中是否有我缺少的设置？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T14:11:08.317

您应该能够从 web.config 更改此设置：

```
<system.webServer>
        <security>
            <requestFiltering>
                <requestLimits maxAllowedContentLength="524288000"/>
            </requestFiltering>
        </security>
</system.webServer> 
```

更多信息在这里：http: [//support.microsoft.com/kb/942074/](http://support.microsoft.com/kb/942074/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:11:38.613

上传限制存储在您的 machine.config 中。

您可以像这样在 web.config 中覆盖它：

```
<system.web>
        <httpRuntime executionTimeout="110" maxRequestLength="20000" />
</system.web> 
```

您可以在[此 MSDN 文档](http://msdn.microsoft.com/en-us/library/e1f13641%28VS.80%29.aspx)中找到有关此的更多信息。

# codeigniter - CodeIgniter 日历类删除周末

> ID：10282173
> 
> 赞同：3
> 
> 时间：2012-04-23T14:08:04.067
> 
> 标签：codeigniter, calendar

我在很多项目中都使用过 CodeIgniter，因此我决定使用日历类而不是 Jquery 日历来显示月度预订。我已经设置并显示数据 FINE。

事实上，我不需要周末，这会占用我网页上的宝贵空间。我在网上研究过，有人解释说你可以使用 $prefs 数组中的模板。

我认为它与模板解析器类有关，但我无法理解它。

如果有人可以给我链接、帮助或示例，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:24:57.620

我希望这是你想要的。

请将 MY_Calendar.php 复制到您的库目录并在您的控制器中粘贴以下代码：

```
//controller
$prefs['start_day'] = 'monday';         
$this->load->library('calendar',$prefs);
echo $this->calendar->generate_weekdays(); 
```

MY_Calendar.php 文件：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class MY_Calendar extends CI_Calendar
{
    public function __construct($config = array())
    {
        parent::__construct($config);
    }

    public function generate_weekdays($year = '', $month = '', $data = array())
    {
        // Set and validate the supplied month/year
        if ($year == '')
            $year  = date("Y", $this->local_time);

        if ($month == '')
            $month = date("m", $this->local_time);

        if (strlen($year) == 1)
            $year = '200'.$year;

        if (strlen($year) == 2)
            $year = '20'.$year;

        if (strlen($month) == 1)
            $month = '0'.$month;

        $adjusted_date = $this->adjust_date($month, $year);

        $month  = $adjusted_date['month'];
        $year   = $adjusted_date['year'];

        // Determine the total days in the month
        $total_days = $this->get_total_days($month, $year);

        // Set the starting day of the week
        $start_days = array('sunday' => 0, 'monday' => 1, 'tuesday' => 2, 'wednesday' => 3, 'thursday' => 4, 'friday' => 5, 'saturday' => 6);
        $start_day = ( ! isset($start_days[$this->start_day])) ? 0 : $start_days[$this->start_day];

        // Set the starting day number
        $local_date = mktime(12, 0, 0, $month, 1, $year);
        $date = getdate($local_date);
        $day  = $start_day + 1 - $date["wday"];

        while ($day > 1)
        {
            $day -= 7;
        }

        // Set the current month/year/day
        // We use this to determine the "today" date
        $cur_year   = date("Y", $this->local_time);
        $cur_month  = date("m", $this->local_time);
        $cur_day    = date("j", $this->local_time);

        $is_current_month = ($cur_year == $year AND $cur_month == $month) ? TRUE : FALSE;

        // Generate the template data array
        $this->parse_template();

        // Begin building the calendar output
        $out = $this->temp['table_open'];
        $out .= "\n";

        $out .= "\n";
        $out .= $this->temp['heading_row_start'];
        $out .= "\n";

        // "previous" month link
        if ($this->show_next_prev == TRUE)
        {
            // Add a trailing slash to the  URL if needed
            $this->next_prev_url = preg_replace("/(.+?)\/*$/", "\\1/",  $this->next_prev_url);

            $adjusted_date = $this->adjust_date($month - 1, $year);
            $out .= str_replace('{previous_url}', $this->next_prev_url.$adjusted_date['year'].'/'.$adjusted_date['month'], $this->temp['heading_previous_cell']);
            $out .= "\n";
        }

        // Heading containing the month/year
        $colspan = ($this->show_next_prev == TRUE) ? 5 : 7;

        $this->temp['heading_title_cell'] = str_replace('{colspan}', $colspan, $this->temp['heading_title_cell']);
        $this->temp['heading_title_cell'] = str_replace('{heading}', $this->get_month_name($month)."&nbsp;".$year, $this->temp['heading_title_cell']);

        $out .= $this->temp['heading_title_cell'];
        $out .= "\n";

        // "next" month link
        if ($this->show_next_prev == TRUE)
        {
            $adjusted_date = $this->adjust_date($month + 1, $year);
            $out .= str_replace('{next_url}', $this->next_prev_url.$adjusted_date['year'].'/'.$adjusted_date['month'], $this->temp['heading_next_cell']);
        }

        $out .= "\n";
        $out .= $this->temp['heading_row_end'];
        $out .= "\n";

        // Write the cells containing the days of the week
        $out .= "\n";
        $out .= $this->temp['week_row_start'];
        $out .= "\n";

        $day_names = $this->get_day_names();

        for ($i = 0; $i < 5; $i ++)
        {
            $out .= str_replace('{week_day}', $day_names[($start_day + $i) %7], $this->temp['week_day_cell']);
        }

        $out .= "\n";
        $out .= $this->temp['week_row_end'];
        $out .= "\n";

        // Build the main body of the calendar
        while ($day <= $total_days)
        {
            $out .= "\n";
            $out .= $this->temp['cal_row_start'];
            $out .= "\n";

            for ($i = 0; $i < 7; $i++)
            {
                if($i!=5 && $i!=6)
                {
                    $out .= ($is_current_month == TRUE AND $day == $cur_day) ? $this->temp['cal_cell_start_today'] : $this->temp['cal_cell_start'];

                    if ($day > 0 AND $day <= $total_days)
                    {
                        if (isset($data[$day]))
                        {
                            // Cells with content
                            $temp = ($is_current_month == TRUE AND $day == $cur_day) ? $this->temp['cal_cell_content_today'] : $this->temp['cal_cell_content'];
                            $out .= str_replace('{day}', $day, str_replace('{content}', $data[$day], $temp));
                        }
                        else
                        {
                            // Cells with no content
                            $temp = ($is_current_month == TRUE AND $day == $cur_day) ? $this->temp['cal_cell_no_content_today'] : $this->temp['cal_cell_no_content'];
                            $out .= str_replace('{day}', $day, $temp);
                        }
                    }
                    else
                    {
                        // Blank cells
                        $out .= $this->temp['cal_cell_blank'];
                    }

                    $out .= ($is_current_month == TRUE AND $day == $cur_day) ? $this->temp['cal_cell_end_today'] : $this->temp['cal_cell_end']; 
                }

                $day++;
            }

            $out .= "\n";
            $out .= $this->temp['cal_row_end'];
            $out .= "\n";
        }

        $out .= "\n";
        $out .= $this->temp['table_close'];

        return $out;
    }
}

/* End of file  MY_Calendar.php */ 
```

谢谢

# python - 攻击 Python 的泡菜

> ID：10282175
> 
> 赞同：33
> 
> 时间：2012-04-23T14:08:06.440
> 
> 标签：python, security, pickle

我正在编写一个将用户输入存储在对象中的网络应用程序。这个对象将被腌制。

用户是否有可能制作恶意输入，当对象未腌制时可能会做一些令人震惊的事情？

这是一个非常基本的代码示例，它忽略了封装等奇妙的原则，但集中体现了我正在查看的内容：

```
import pickle

class X(object):
    some_attribute = None

x = X()
x.some_attribute = 'insert some user input that could possibly be bad'

p = pickle.dumps(x)

# Can bad things happen here if the object, before being picked, contained
# potentially bad data in some_attribute?
x = pickle.loads(p) 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T14:14:51.700

是的和不...

不 - 除非解释器或 pickle 模块存在错误，否则您不能通过 pickle 文本或类似的方式运行任意代码。除非`eval`稍后编辑腌制文本，或者您正在做一些事情，例如创建一个具有此数据中提到的类型的新对象。

是的 - 根据您稍后打算如何处理对象中的信息，用户可以做各种各样的事情。从 SQL 注入尝试到更改凭据、暴力破解密码或在验证用户输入时应考虑的任何事情。但是您可能正在检查所有这些。

* * *

**编辑**：

python文档说明了这一点：

> 警告 pickle 模块并非旨在防止错误或恶意构造的数据。永远不要取消从不受信任或未经身份验证的来源收到的数据。

然而这不是你的情况——你接受输入，通过常规验证，然后腌制它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T14:23:28.400

好吧，根据[文档](http://docs.python.org/library/pickle.html)

> **警告**：该`pickle`模块并非旨在防止错误或恶意构建的数据。永远不要取消从不受信任或未经身份验证的来源收到的数据。

这意味着如果数据结构存在于pickle算法将进入无法保证程序行为的状态的状态下，则可以仅通过调用它来攻击此功能。

根据这个[网站](http://nadiana.com/python-pickle-insecure)

```
import pickle
pickle.loads("cos\nsystem\n(S'ls ~'\ntR.") # This will run: ls ~ 
```

是执行任意代码所需的全部内容。那里还有其他示例以及出于安全目的对酸洗的“改进”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-26T01:29:13.810

我在[多处理模块的文档中](https://docs.python.org/3.6/library/multiprocessing.html#multiprocessing.Connection.recv_bytes_into)发现了这一点，我认为它回答了这个问题：

> 警告
> 
> Connection.recv() 方法会自动取消接收到的数据，这可能会带来安全风险，除非您可以信任发送消息的进程。
> 
> 因此，**除非连接对象是使用 Pipe() 生成的**，否则您应该只在执行某种身份验证后使用 recv() 和 send() 方法。请参阅身份验证密钥。

（强调我的）

结论是，如果连接对象*是*使用受信任的管道（即受信任的pickle）生成的，那么它可以安全地解开。

# java - Java中代码生成器的更好方法？

> ID：10282177
> 
> 赞同：9
> 
> 时间：2012-04-23T14:08:12.673
> 
> 标签：java, code-generation, eclipse-jdt, sun-codemodel

我有一堂课，里面有一个图表。我迭代图形并创建一个构建图形的字符串，然后我将该字符串写入 Java 文件。有没有更好的方法来做到这一点，我读到了 JDT 和 CodeModel，但我真的需要一些关于如何使用它的提示。

**编辑**

我正在做一个正则表达式代码生成器，到目前为止，我已经将正则表达式转换为有向图中表示的 DFA（使用 grail 库）。当我拥有 DFA 时，下一步是生成一个具有三种方法的类，第一种方法构建相同的图 (DFA)，第二种方法从一个节点移动到另一个节点，如果输入字符串被接受，则第三种方法匹配一个。只有第一种方法根据正则表达式输入而变化，其他两种方法是静态的，并且对于每个生成的 java 类都是相同的。

我的基于字符串的方法如下所示：

```
 import grail.interfaces.DirectedEdgeInterface;
 import grail.interfaces.DirectedGraphInterface;
 import grail.interfaces.DirectedNodeInterface;
 import grail.interfaces.EdgeInterface;
 import grail.iterators.EdgeIterator;
 import grail.iterators.NodeIterator;
 import grail.properties.GraphProperties;
 import grail.setbased.SetBasedDirectedGraph;

 public class ClassName {

private SetBasedDirectedGraph graph = new SetBasedDirectedGraph();
private static DirectedNodeInterface state;
private static DirectedNodeInterface currentState;
protected DirectedEdgeInterface edge;

public ClassName() {
    buildGraph();
}

protected void buildGraph() {

    // Creating Graph Nodes (Automaton States)

    state = graph.createNode(3);
    state.setProperty(GraphProperties.LABEL, "3");
    state.setProperty(GraphProperties.DESCRIPTION, "null");
    graph.addNode(state);
    state = graph.createNode(2);
    state.setProperty(GraphProperties.LABEL, "2");
    state.setProperty(GraphProperties.DESCRIPTION, "null");
    graph.addNode(state);
    state = graph.createNode(1);
    state.setProperty(GraphProperties.LABEL, "1");
    state.setProperty(GraphProperties.DESCRIPTION, "Accepted");
    graph.addNode(state);
    state = graph.createNode(0);
    state.setProperty(GraphProperties.LABEL, "0");
    state.setProperty(GraphProperties.DESCRIPTION, "Initial");
    graph.addNode(state);
            .....

    // Creating Graph Edges (Automaton Transitions)

    edge = graph.createEdge(null, (DirectedNodeInterface) graph.getNode(2),
            (DirectedNodeInterface) graph.getNode(1));
    edge.setProperty((GraphProperties.LABEL), "0");
    graph.addEdge(edge);
    edge = graph.createEdge(null, (DirectedNodeInterface) graph.getNode(2),
            (DirectedNodeInterface) graph.getNode(2));
    edge.setProperty((GraphProperties.LABEL), "1");
    graph.addEdge(edge);
    edge = graph.createEdge(null, (DirectedNodeInterface) graph.getNode(1),
            (DirectedNodeInterface) graph.getNode(1));
    edge.setProperty((GraphProperties.LABEL), "0");
    graph.addEdge(edge);
    edge = graph.createEdge(null, (DirectedNodeInterface) graph.getNode(1),
            (DirectedNodeInterface) graph.getNode(3));
    edge.setProperty((GraphProperties.LABEL), "1");
    graph.addEdge(edge);
    edge = graph.createEdge(null, (DirectedNodeInterface) graph.getNode(0),
            (DirectedNodeInterface) graph.getNode(1));
    edge.setProperty((GraphProperties.LABEL), "0");
    graph.addEdge(edge);
    edge = graph.createEdge(null, (DirectedNodeInterface) graph.getNode(0),
            (DirectedNodeInterface) graph.getNode(2));
    edge.setProperty((GraphProperties.LABEL), "1");
    graph.addEdge(edge);
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:29:30.967

另一种解决方案是坚持当前的技术，但提供一个带有[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)的小层。要实现构建器，您需要花费很少的时间，但要获得更好的可读性代码。

我实现了您的代码的第一部分。使用适当的构建器，您可以编写：

```
graph = new GraphBuilder()
    .createNode(3).setLabel("3").setDescription("null").add()
    .createNode(2).setLabel("2").setDescription("null").add()
    .createNode(1).setLabel("1").setDescription("Accepted").add()
    .createNode(0).setLabel("0").setDescription("Initial").add()
    // unimplemented start
    .createEdge(2, 1).setLabel("0").add()
    .createEdge(2, 2).setLabel("1").add()
    .createEdge(1, 1).setLabel("0").add()
    .createEdge(1, 3).setLabel("1").add()
    .createEdge(0, 1).setLabel("0").add()
    .createEdge(0, 2).setLabel("1").add()
    // unimplemented end
    .build(); 
```

更具可读性，不是吗？要做到这一点，您需要两个构建器。首先是 GraphBuilder：

```
package at.corba.test.builder;

import java.util.LinkedHashMap;
import java.util.Map;

/**
 * Builder for generating graphs.
 * @author ChrLipp
 */
public class GraphBuilder {
    /** List of StateBuilder, accesable via nodeNumber. */
    Map<Integer, StateBuilder> stateBuilderMap = new LinkedHashMap<Integer, StateBuilder>();

    /**
     * Delegates node-specific building to NodeBuilder.
     * @param nodeNumber Number of node to create
     * @return NodeBuilder for the node instance to create.
     */
    public StateBuilder createNode(final int nodeNumber) {
        StateBuilder builder = new StateBuilder(this);
        stateBuilderMap.put(nodeNumber, builder);
        return  builder;
    }

    /**
     * Builder function to initialise the graph.
     */
    public SetBasedDirectedGraph build() {
        SetBasedDirectedGraph graph = new SetBasedDirectedGraph();

        for (int key : stateBuilderMap.keySet()) {
            StateBuilder builder = stateBuilderMap.get(key);
            State state = graph.createNode(key);
            state = builder.build(state);
            graph.addNode(state);
        }

        return graph;
    }
} 
```

而不是 StateBuilder：

```
package at.corba.test.builder;

import java.util.HashMap;
import java.util.Map;

/**
 * Builder for generating states.
 * @author ChrLipp
 */
public class StateBuilder {
    /** Parent builder */
    private final GraphBuilder graphBuilder;

    /** Properties for this node */
    Map<GraphProperties, String> propertyMap = new HashMap<GraphProperties, String>();

    /**
     * ctor.
     * @param graphBuilder  Link to parent builder
     * @param nodeNumber    Node to create
     */
    public StateBuilder(final GraphBuilder graphBuilder)  {
        this.graphBuilder = graphBuilder;
    }

    /**
     * Property setter for property Label.
     * @param label value for property label
     * @return current NodeBuilder instance for method chaining
     */
    public StateBuilder setLabel(final String label) {
        propertyMap.put(GraphProperties.LABEL, label);
        return this;
    }

    /**
     * Property setter for description Label.
     * @param description value for description label
     * @return current NodeBuilder instance for method chaining
     */
    public StateBuilder setDescription(final String description) {
        propertyMap.put(GraphProperties.DESCRIPTION, description);
        return this;
    }

    /**
     * DSL function to close the node section and to return control to the parent builder.
     * @return
     */
    public GraphBuilder add() {
        return graphBuilder;
    }

    /**
     * Builder function to initialise the node.
     * @return newly generated node
     */
    public State build(final State state) {
        for (GraphProperties key : propertyMap.keySet()) {
            String value = propertyMap.get(key);
            state.setProperty(key, value);
        }

        return state;
    }
} 
```

你会对边缘做同样的事情，但我没有实现这个:-)。在 Groovy 中，创建构建器更加容易（我的实现是一个用 Java 编写的构建器），例如[Make a builder](http://groovy.codehaus.org/Make+a+builder)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T19:12:34.187

[一种更好的 Java 代码生成器方法... 像ANTLR](http://www.antlr.org/)这样的工具怎么样，它是一种专门为实现具有代码生成支持的词法分析器/解析器而创建的现代工具。它有很好的文档，包括两本书：

*   [权威的 ANTLR 参考](http://pragprog.com/book/tpantlr/the-definitive-antlr-reference)
*   [语言实现模式](http://pragprog.com/book/tpdsl/language-implementation-patterns)

即使不使用 ANTLR，最后一个也很有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T12:10:17.490

以下博客给出了一个非常简单的示例：

[http://namanmehta.blogspot.in/2010/01/use-codemodel-to-generate-java-source.html](http://namanmehta.blogspot.in/2010/01/use-codemodel-to-generate-java-source.html)

你可能想看看它。

jcodemodel 的问题在于它被 JAX-B 等流行的代码生成器在内部使用，并且没有很好的文档记录。它也没有任何教程。但是如果你想使用这个库，你可以看看不同的博客，用户记录了他们的经验/问题描述和解决方案。

祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-25T18:27:16.443

这个问题仍然有点模糊，但这里有一些建议：

*   创建一个包含静态函数的基类，并使您生成的类扩展它。这样您就不必继续重写静态函数。
*   你真的需要每个图一个类吗？通常你会有一个类，它将图形作为构造函数的参数，并且只有同一个类的不同对象实例
*   你能[序列化](http://oreilly.com/catalog/javarmi/chapter/ch10.html)有向图吗？如果是这样，这是存储和恢复它的更好方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T19:38:52.663

我在几个需要代码生成的项目（例如消息的编码/解码类）中使用了一个鲜为人知的产品，称为[FreeMarker 。](http://www.freemarker.org/)它是一个基于 Java 的解决方案，您可以在其中生成内存模型并将其提供给模板。从他们的主页：

> FreeMarker 是一个“模板引擎”；基于模板生成文本输出（从 HTML 到自动生成的源代码）的通用工具。它是一个Java 包，一个Java 程序员的类库。它本身不是最终用户的应用程序，而是程序员可以嵌入到他们的产品中的东西。

要使用 FreeMarker，请创建一个数据模型和一个模板来为您尝试构建的类生成代码。这个解决方案有额外的学习开销，但应该很容易学习，并且对于未来的代码生成需求和未来的其他项目非常有用。

更新：这是问题中指定的类的模板（注意：我没有测试过）：

```
import grail.interfaces.DirectedEdgeInterface;
import grail.interfaces.DirectedGraphInterface;
import grail.interfaces.DirectedNodeInterface;
import grail.interfaces.EdgeInterface;
import grail.iterators.EdgeIterator;
import grail.iterators.NodeIterator;
import grail.properties.GraphProperties;
import grail.setbased.SetBasedDirectedGraph;

public class ClassName {

private SetBasedDirectedGraph graph = new SetBasedDirectedGraph();
private static DirectedNodeInterface state;
private static DirectedNodeInterface currentState;
protected DirectedEdgeInterface edge;

public ClassName() {
    buildGraph();
}

protected void buildGraph() {

    // Creating Graph Nodes (Automaton States)
<#list nodes as node>
    state = graph.createNode(${node.id});
    state.setProperty(GraphProperties.LABEL, "${node.id}");
    state.setProperty(GraphProperties.DESCRIPTION, "null");
    graph.addNode(state);
</#list>

    // Creating Graph Edges (Automaton Transitions)
<#assign edgeCount = 0>
<#list nodes as node1>
<#list nodes as node2>
    edge = graph.createEdge(null, (DirectedNodeInterface) graph.getNode(${node1.id}),
            (DirectedNodeInterface) graph.getNode(${node2.id}));
    edge.setProperty((GraphProperties.LABEL), "${edgeCount}");
    graph.addEdge(edge);
<#assign edgeCount = edgeCount + 1>
</#list>
</#list>
}
} 
```

您的数据模型应该相当简单——一个包含一个键的 Map，其值是一个节点列表。如果您以后发现您的模板需要更多信息，您可以随时更改您的数据模型。只要所需字段是公共的或具有公共 getter，任何 Java 对象都应该在数据模型中工作。

```
Map<String, Object> root = new HashMap<String, Object>();
List<Integer> nodes = new ArrayList<Integer>();
nodes.add(1);
nodes.add(2);
...
root.put("nodes", nodes); 
```

有关使用 Maps 的数据模型的一个很好的示例，请参阅FreeMarker 手册中的[此](http://www.freemarker.org/docs/pgui_quickstart_createdatamodel.html)页面。

下一步是使用 FreeMarker API 结合模板 + 数据模型来创建类。这是我为您的案例修改的 FreeMarker 手册中的一个[示例：](http://www.freemarker.org/docs/pgui_quickstart_all.html)

```
import freemarker.template.*;
import java.util.*;
import java.io.*;

public class Test {

    public static void main(String[] args) throws Exception {

        /* ------------------------------------------------------------------- */    
        /* You should do this ONLY ONCE in the whole application life-cycle:   */    

        /* Create and adjust the configuration */
        Configuration cfg = new Configuration();
        cfg.setDirectoryForTemplateLoading(
                new File("/where/you/store/templates"));
        cfg.setObjectWrapper(new DefaultObjectWrapper());

        /* ------------------------------------------------------------------- */    
        /* You usually do these for many times in the application life-cycle:  */    

        /* Get or create a template */
        Template temp = cfg.getTemplate("test.ftl");

        /* Create a data-model */
        Map<String, Object> root = new HashMap<String, Object>();
        List<Integer> nodes = new ArrayList<Integer>();
        nodes.add(1);
        nodes.add(2);
        ...
        root.put("nodes", nodes);    

        /* Merge data-model with template */
        Writer out = new OutputStreamWriter(System.out);
        temp.process(root, out);
        out.flush();
    }
} 
```

FreeMarker 手册非常有用，包含许多有用的示例。如果您对此方法感兴趣，请参阅[入门指南。](http://www.freemarker.org/docs/pgui_quickstart.html)

# c# - 如何组合来自 ThreadLocal 的所有值 ?

> ID：10282179
> 
> 赞同：7
> 
> 时间：2012-04-23T14:08:15.373
> 
> 标签：c#, .net, multithreading, .net-4.0

我遇到过 .NET 4 `ThreadLocal<T>`，想知道是否有办法`.Value`从所有线程中累积值。

在他们拥有的 Microsoft 的 ppl C++ 库中[`Concurrency::combinable::combine_each`](http://msdn.microsoft.com/en-us/library/dd470699.aspx)，是否有 .NET 的等效方法`ThreadLocal`？

```
ThreadLocal<long> ticks = new ThreadLocal<long>();

void AddTicks(StopWatch sw)
{
    ticks.Value += sw.ElapsedTicks;
}

void ReportTimes()
{
    long totalTicks = /* How do I accumulate all the different values?  */;
    Console.WriteLine(TimeSpan.FromTicks(totalTicks));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-10-23T01:31:30.347

从 .NET 4.5 开始，Microsoft 添加了一个名为该类的属性`Values`，该属性`ThreadLocal`完全符合您的需要。这是它的工作方式：

```
var localResult = new ThreadLocal<int>(() => 0, trackAllValues: true);
Parallel.For(0, 10000, i =>
{
    localResult.Value += Compute(i);
});

int result = localResult.Values.Sum(); 
```

上面的代码取自博文：[.NET 4.5 中的新功能：ThreadLocal.Values](https://devblogs.microsoft.com/pfxteam/new-in-net-4-5-threadlocal-values/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T14:18:32.710

此信息在 .NET 4.0 中不可用。对于 4.5 及更高版本，请参阅 Joao 的回答。

微软正在[考虑添加这样的功能](https://devblogs.microsoft.com/pfxteam/new-feature-threadlocalt-values/)。您将需要编写一个包装器`ThreadLocal<T>`来添加此行为。

[这是一篇博客文章](https://devblogs.microsoft.com/pfxteam/parallelextensionsextras-tour-8-reductionvariablet/)，提供了一些关于如何编写包装器的指导。

# asp.net - 如何检查部署在 IIS 7.5 中的网站是否正在被用户访问？

> ID：10282184
> 
> 赞同：1
> 
> 时间：2012-04-23T14:08:33.693
> 
> 标签：asp.net

上个月我们在 IIS 7.5 中部署了 5 个网站（只读数据），现在我们要删除那些未被用户访问/使用的网站。我们在 IIS 7.5 上共有 10 个网站。

我们不想在已部署的站点上进行任何设置更改，这些设置是在去年部署的，我们希望删除它们在过去 4 个月内没有人可以访问。我们在 Inetpub 中有 onlu 日志文件夹，所以有什么可靠的方法来完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:14:13.870

在网络服务器上打开日志记录，看看你得到了多少流量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:59:52.537

运行 PowerShell 脚本

```
write-host Getting performance counters ...

$perfCounterString = "\asp.net applications(__total__)\sessions active" 
$counter = get-counter -counter $perfCounterString 
$rawValue = $counter.CounterSamples[0].CookedValue 

write-host Session Count is $rawValue 
```

有关详细信息，请参阅以下链接： [从 IIS 获取我托管的 Asp.Net 网站的运行会话计数](https://stackoverflow.com/questions/9734561/get-running-session-count-from-iis-for-my-hosted-asp-net-web-site)

# php - 肥皂响应：http-header 中是否需要 Content-Length？

> ID：10282185
> 
> 赞同：2
> 
> 时间：2012-04-23T14:08:34.497
> 
> 标签：php, soap, lighttpd

我在 w3.org 中没有找到答案。

几乎所有示例都包含了soap-response http-header 中的内容长度。

第一问：但这在技术上是必要的吗？

我正在努力使用一个肥皂服务，其中 php-soap-library (PEAR SOAP_Server) 正在设置响应 xml 的正确内容长度，但之后的 lighttpd 正在压缩内容，所以我得到的响应比内容长度小.

而像soapUI这样的一些应用程序正在等待所有内容（由http-header设置）到达。

第二问：

*   谁在这条链中的行为/配置错误？php-> lighttpd->soapUI
*   是设置解压缩内容长度的php代码吗？
*   是压缩响应但不覆盖或删除内容长度标头的 lighttpd 吗？
*   或者是soapUI，它不应该等待15秒以获得更多内容？

**编辑：** 进一步调查显示，php-script 正在压缩内容本身，并且始终设置 umcompressed Content-length，而不是 lighttpd。

不过[Tom van der Woerdts](https://stackoverflow.com/users/377037/tom-van-der-woerdt) 的回答非常有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:23:48.893

**第一个问题**
不，因为[HTTP 1.1 规范](http://www.ietf.org/rfc/rfc2616.txt)不需要`Content-Length`标头，而 SOAP 是建立在 HTTP 之上的。您的 SOAP 客户端可能需要它，但 SOAP 本身不需要。（[SOAP 规范](http://www.ietf.org/rfc/rfc3288.txt)甚至不包含“长度”这个词）

**第二个问题**
PHP 在那里可能是错误的。它不应该设置`Content-Length`标题。lighttpd 可能也有点错误，因为`Content-Length`如果它更改内容，它应该真正覆盖标题。而且soapUI 可以纠正这个问题，因为SOAP 基于具有非常清晰的EOF（结束标记）的XML。

我建议不要让 PHP 设置`Content-Length`标题。

# java - 用于 Windows 的 Java 中的 GUI 编程？

> ID：10282188
> 
> 赞同：4
> 
> 时间：2012-04-23T14:08:44.040
> 
> 标签：java

使用 Java 为 Windows 制作 GUI 应用程序的最佳方法是什么？

是[AWT](http://en.wikipedia.org/wiki/Abstract_Window_Toolkit)和[Swing](http://en.wikipedia.org/wiki/Swing_%28Java%29)吗？或者它已经过时了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:14:03.040

如果您从头开始并且没有任何经验，我建议您研究[JavaFX](http://javafx.com/)。它是 Oracle 的声明性用户界面，类似于 XAML 和 Flex。我相信它最终会超越 AWT、Swing 和 SWT。

虽然 Swing 在使用 Java 时可能很常见，但它通常会导致缓慢而庞大的用户体验。我不能建议使用 Swing。

### 为什么选择 JavaFX

*   用户界面是声明性的；您不必编写 Java 代码。这允许构建一些非常棒的用户界面构建器，因为它可以处理 UI 而无需编译或处理 Java。
*   用户界面很容易与业务逻辑分离，允许分离关注点和范式，例如 MVVM、MVC 等。
*   硬件加速支持。
*   控件之间的过渡效果。在 Swing 中需要大量代码的东西。

下载页面：

[JavaFX 和 Scene Builder 开发者预览版](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)

我意识到 OS X 和 Linux 仍处于开发预览阶段，但我仍然会选择使用 Swing。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:10:27.897

AWT 很少使用。如今，大多数 GUI 开发都是在 Swing 中完成的。如果您愿意的话，那里有几个不错的用于 Swing 的 GUI-Builders。

编辑：老实说，我应该说“很少使用纯 AWT”。毕竟，它是 Swing 的基础。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T14:15:10.267

Java 最常见的现代 GUI 工具包是[Swing](http://docs.oracle.com/javase/tutorial/uiswing/)和[SWT](http://www.vogella.com/articles/SWT/article.html)。Swing 包含在标准 JDK 中，处理起来比较麻烦。如果您只想快速构建 Java GUI（如 Visual Basic），请尝试使用[Eclipse](http://eclipse.org) IDE 和[WindowBuilder](http://www.eclipse.org/windowbuilder/)或[NetBeans](http://netbeans.org/kb/docs/java/quickstart-gui.html) IDE。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:12:20.733

[Swing](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/package-summary.html)是要走的路，因为它是修复 AWT 弱点的更新版本；还有很多很棒的教程，[比如这里](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CD8QFjAA&url=http://download.oracle.com/javase/tutorial/uiswing&ei=42KVT4TpEoPF6QG_2KG_BA&usg=AFQjCNEtbuJqikUwLj2JRyfcUkFgDrCI8w)。

另请参阅此处 - [Oracle Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/examples/components/index.html)。

# gnuplot - gnuplot，仅绘制图例而不绘制图表

> ID：10282192
> 
> 赞同：2
> 
> 时间：2012-04-23T14:08:58.803
> 
> 标签：gnuplot

我有一个交互式 perl 脚本，它使用来自 mysql 的数据通过 Chart::Gnuplot 包生成许多图。有时图形大小会因过多的图而超载。

我会选择生成仅包含图例（无图形）的 gnuplot 图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T19:31:00.640

我不知道这是否会有所帮助，但是...

```
plot [0:1] [0:1] NaN title "Hello" #Just the label in the legend. 
```

或者...

```
plot sin(x),NaN title "Boo"  #Plots sin(x) (properly labelled) and a second label "Boo" 
```

当然，这还是有边界之类的。您可以取消设置这些...`unset border`和`unset tics`

# iis-7.5 - 在 IIS7.5 上找不到使用 serviceStack 的 PUT 处理程序

> ID：10282193
> 
> 赞同：3
> 
> 时间：2012-04-23T14:09:01.720
> 
> 标签：iis-7.5, servicestack

我目前正在使用 serviceStack 创建托管在 MVC Web 应用程序中的基于 REST 的服务。

到目前为止，ServiceStack 非常棒，我已经完成了大部分我想做的工作。所有这些都在 IISExpress 中工作。

我现在已移至 IIS 7.5，并且在执行 PUT 时收到“未找到请求处理程序”的 400 错误。GET 工作正常，并且在 IISExpress 上 PUT 和 GET 都可以工作。

在 IISExpress 上，这一切都奏效了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T15:37:43.173

有关 IIS + PUT/DELETE 动词的一些信息取自[NancyFx WebFx ASP.NET 文档](https://github.com/NancyFx/Nancy/wiki/Hosting-nancy-with-asp.net)：

默认情况下，IIS 6 不支持 PUT 和 DELETE 动词。要启用此功能，您需要向 Nancy 应用程序的虚拟目录添加通配符映射 - 请阅读本文档中的“IIS6 无扩展 URL”部分：http: [//haacked.com/archive/2008/11/26/ asp.net-mvc-on-iis-6-walkthrough.aspx](http://haacked.com/archive/2008/11/26/asp.net-mvc-on-iis-6-walkthrough.aspx)

尝试在 IIS 7/7.5 上发出 PUT/DELETE 请求时，您可能会收到“405 Not allowed”页面。修复它的一种方法是删除 web.config 中的 WebDAVModule。

```
<system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <remove name="WebDAVModule" />
    </modules>  
</system.webserver> 
```

### Soft PUT / DELETE - 模拟 HTTP 动词

ServiceStack 还支持[X-Http-Method-Override](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/Web/HttpHeaders.cs#L7) HTTP Header，它允许您[使用 POST 模拟 PUT 或 DELETE](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.IntegrationTests/Tests/RestWebServiceTests.cs#L86)（反之亦然）。

# log4j - 如何通过远程 jboss 容器从 Log4J 使用/部署 Logger？

> ID：10282194
> 
> 赞同：0
> 
> 时间：2012-04-23T14:09:02.850
> 
> 标签：log4j, jboss7.x, jboss-arquillian

我正在查看教程[http://arquillian.org/guides/getting_started/](http://arquillian.org/guides/getting_started/)。一切运行良好。但是，如果我尝试使用 log4j.xml（放置在 src/main/resources 中）从 Log4J 添加 Logger，则只有嵌入式容器焊接，glassfish 使用控制台日志附加程序运行良好。在控制台上，我收到了消息：

```
2012-04-23T15:27:21,859 INFO  call greet (ejbtest.Greeter) 
```

远程 jboss 失败。我的部署：

```
 @Deployment
  public static JavaArchive createDeployment()
  {
    final JavaArchive deployment = ShrinkWrap.create(JavaArchive.class)
        .addClasses(Greeter.class, PhraseBuilder.class)
        .addAsManifestResource(EmptyAsset.INSTANCE, "beans.xml").addAsResource("log4j.xml");
    return deployment;
  } 
```

堆栈跟踪片段：

```
 15:33:11,375 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-2) MSC0000
1: Failed to start service jboss.deployment.unit."a680b2b8-2dd6-4b0b-bc87-9082f2
4fc88d.jar".WeldService: org.jboss.msc.service.StartException in service jboss.d
eployment.unit."a680b2b8-2dd6-4b0b-bc87-9082f24fc88d.jar".WeldService: org.jboss
.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for t
ype [Greeter] with qualifiers [@Default] at injection point [[field] 
```

我还尝试将 Logger.class 添加到 JavaArchive，但这也因以下堆栈跟踪片段而失败：

```
15:36:50,031 WARN  [org.jboss.modules] (MSC service thread 1-3) Failed to define
 class org.apache.log4j.Logger in Module "deployment.eb8033fe-29d7-4fa5-986f-303
4a1949020.jar:main" from Service Module Loader: java.lang.LinkageError: Failed t
o link org/apache/log4j/Logger (Module "deployment.eb8033fe-29d7-4fa5-986f-3034a
1949020.jar:main" from Service Module Loader) 
```

我的错误是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T09:52:16.507

JBoss 在 log4j 中内置了它。我猜你有冲突。

# python - from object in Tuple[of Sets()]: - 给了我整个 Tuple 而不是一个 Set

> ID：10282196
> 
> 赞同：-1
> 
> 时间：2012-04-23T14:09:06.943
> 
> 标签：python, artificial-intelligence, python-2.7, pygame

我开始用 Python 为 uni 作品集编写 AI。

AI 用于名为 Planet Wars 的游戏，它是 GalCon（银河混乱）的克隆。

到目前为止，它处于基础阶段。我的目标是编写一个松散地遵循孙子兵法的 AI，正如我为游戏所解释的那样。

我正在拼凑，边走边学，但对于我的一生，我无法弄清楚为什么第 92 行给了我全部的 self._currentTactics 而不是一次只有一种策略......

如果这里可爱的人能帮助我，我会很高兴的。

只是 AI 文件：

[http://pastebin.com/XXYiRzh7](http://pastebin.com/XXYiRzh7)

整个游戏的代码（需要pygame）：

[https://www.dropbox.com/sh/mma5qwd2iv0i81d/mpemB7zlhT](https://www.dropbox.com/sh/mma5qwd2iv0i81d/mpemB7zlhT)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:17:00.387

在我看来，它就像是向`_compare`附加了一个策略列表`_currentTactics`，这将导致循环迭代`_currenTactics`以返回整个策略列表，而不是一次返回一个。我认为您可能正在寻找`self._currentTactics += new_tactics`，因为这会将列表合并在一起。

# java - 查找我的组件是否是其他组件的祖先

> ID：10282205
> 
> 赞同：1
> 
> 时间：2012-04-23T14:09:34.350
> 
> 标签：java, swing

我实施

```
 @Override public boolean dispatchKeyEvent(KeyEvent e) 
```

在我的 jscrollpane 中。
当我评估

```
e.getSource() 
```

我得到了 JScrollPane 下的 jtable。

我怎么知道它在我的层次结构中？
（我调用其他jscrollpane函数，传递keyevent，我不想递归）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:14:13.603

你在找这个吗？：

```
SwingUtilities.getAncestorOfClass(JScrollPane.class, jtable); 
```

或者，如果您想检查给定的实例：

```
SwingUtilities.isDescendingFrom(jtable, aParentOfJTable); 
```

如果不是，那么我不明白你的问题。

# templates - ExpressionEngine->验证模板中的 $_POST 变量

> ID：10282211
> 
> 赞同：0
> 
> 时间：2012-04-23T14:09:47.123
> 
> 标签：templates, post, expressionengine

以下代码用于处理我们网站的忘记密码部分的模板。（请不要因为它的愚蠢而责备我，我没有写它）我需要做的是嵌入 '/inc/forgot_password_form' 如果 $_POST['PID' ] 具有非数字字符。我将如何修改此代码来做到这一点？

我知道我可以使用我的 jQuery 验证器在客户端执行此操作，但我宁愿在这里执行此操作，因为我还可以检查最小值并为其显示特殊消息。

```
{if segment_2 == 'submit'}
<?
  $embed_params = 'EmailAddress="' . $_POST['EmailAddress'] . '" PID="' . $_POST['PID'] . '" ';
?>
{embed='/inc/forgot_password_form' message='{exp:forgot_password:send_email code="{segment_3}" <?=$embed_params?>}' <?=$embed_params?>}
{if:elseif segment_2 == 'reset'}
{embed='/inc/forgot_password_reset' email='{exp:forgot_password:check_code code="{segment_3}" }'  code="{segment_3}"}
{if:elseif segment_2 == 'reset_submit'}
{embed='/inc/forgot_password_reset' message='{exp:forgot_password:update_password code="<?=$_POST['code']?>"  password="<?=$_POST['password']?>" }' }
{if:else}
{embed='/inc/forgot_password_form' }
{/if} 
```

用新代码编辑：

所以你说要这样做吗？

```
{if segment_2 == 'submit'}
<?
  $embed_params = 'EmailAddress="' . $_POST['EmailAddress'] . '" PID="' . $_POST['PID'] . '" ';
  if (!is_int($_POST['PID']) {
      {embed='/inc/forgot_password_form' message='You submitted an invalid Member #.' <?=$embed_params?>}
  } else {
      {embed='/inc/forgot_password_form' message='{exp:forgot_password:send_email code="{segment_3}" <?=$embed_params?>}' <?=$embed_params?>}
  }
?>
{if:elseif segment_2 == 'reset'}
{embed='/inc/forgot_password_reset' email='{exp:forgot_password:check_code code="{segment_3}" }'  code="{segment_3}"}
{if:elseif segment_2 == 'reset_submit'}
{embed='/inc/forgot_password_reset' message='{exp:forgot_password:update_password code="<?=$_POST['code']?>"  password="<?=$_POST['password']?>" }' }
{if:else}
{embed='/inc/forgot_password_form' }
{/if} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:06:21.827

通过 PHP 执行此操作非常简单，只需使用[is_int](http://www.php.net/manual/en/function.is-int.php)函数即可。

```
if (is_int($_POST['PID'])){

// do this code

}
else{

// Do this code

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:17:14.730

Philip 的回答很好，但我想我会分享一段代码，如果您经常使用 GET/POST 变量，它可能会对您有所帮助。它将所有 GET 和 POST 变量存储为 EE 全局变量。我已将其存储在我的引导文件 ( `system/config.php`) 中，但您也可以将其添加到`system/expressionengine/config/config.php`：

```
// Turn $_GET into global variables
foreach ($_GET as $key => $value) {
  $default_global_vars['get:' . $key] = $value;
}

// Turn $_POST into global variables
foreach ($_POST as $key => $value) {
  if(!is_array($value)) {
    $default_global_vars['post:' . $key] = $value;
  }
} 
```

使用此代码，您可以将 PID 字段称为 {post:PID} 而不是 $_POST['PID']。它并不完全适用于您的情况，因为您可能会在模板中使用 PHP 来验证 PID。但是，理想情况下，您应该编写或找到一个 EE 插件来为您执行此操作，并将 PHP 排除在您的模板之外。每当您使用表单时，上面的代码片段都有助于实现该目标。

另外，请原谅没有答案，但它太大了，不能作为评论留下。

# ejb - JCA 资源适配器可以在没有运行 SOA 服务器的情况下在 Weblogic 中工作吗？

> ID：10282212
> 
> 赞同：1
> 
> 时间：2012-04-23T14:09:56.093
> 
> 标签：ejb, weblogic, soa, adapter

我正在尝试将 Oracle JCA 文件适配器部署到 Weblogic 中，以从我的消息驱动 bean 访问本机文件系统。安装 SOA 套件后，我可以在 SOA HOME/soa/connectors 目录中找到适配器的 RAR 文件。

由于我没有安装数据库，我的 SOA 服务器无法启动。但是我仍然可以创建一个支持 SOA 的 Weblogic 域，在启动该域后（有一些错误），我可以看到文件适配器已“正确”部署。

所以我想知道JCA资源适配器是否可以在没有SOA服务器的情况下工作？我问是因为我[在部署过程中遇到了一个非常奇怪的问题](https://stackoverflow.com/questions/10253774/weblogic-could-not-find-resource-adapter-with-correct-jndi-name-for-binding)，我怀疑这可能与缺少 SOA 服务器运行有关。

如果 SOA 服务器不是必须使用资源适配器，那么将文件适配器部署到 Weblogic 中的最小依赖是什么？

任何想法表示赞赏，在此先感谢。

# css - 为什么我的 css 选择器在 IE 中被转换为大写

> ID：10282215
> 
> 赞同：1
> 
> 时间：2012-04-23T14:10:01.437
> 
> 标签：css, internet-explorer, css-selectors

我有如下的css文件

```
/*mycss.css*/
body {
margin: 0px; padding: 0px; 
}
a:link {
color: rgb(255, 255, 255); font-weight: normal; text-decoration: underline;
}
a:visited {
color: rgb(255, 255, 255); font-weight: normal; text-decoration: underline;
}
a:active {
color: rgb(255, 255, 255); text-decoration: none;
}
a:hover {
color: rgb(255, 255, 255); text-decoration: none;
} 
```

我已经在我的 php 文件中正确链接了它并且工作正常`firefox,chrome`但是当我在`Internet explorer`我的 css 中打开它时看起来就像我的所有 css 选择器都转换为大写

```
 /*mycss.css*/
BODY{
margin: 0px; padding: 0px; 
}
A:link {
color: rgb(255, 255, 255); font-weight: normal; text-decoration: underline;
}
A:visited {
color: rgb(255, 255, 255); font-weight: normal; text-decoration: underline;
}
A:active {
color: rgb(255, 255, 255); text-decoration: none;
}
A:hover {
color: rgb(255, 255, 255); text-decoration: none;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:11:46.633

这是 IE 解析 CSS 选择器的方式。

它没有任何区别。

# c# - 在 Windows Installer 项目 c# 中预填充表单字段

> ID：10282216
> 
> 赞同：0
> 
> 时间：2012-04-23T14:10:06.110
> 
> 标签：c#, visual-studio-2010, windows-installer

是否可以在 Visual Studio 2010 Windows Installer 项目中，在安装程序的 UI 文本框中插入动态或配置数据。该数据可能来自注册表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:33:04.250

您可以使用注册表搜索从注册表加载数据。然后可以附加到 UI 字段的搜索属性。

# monitoring - nagios 中连接时间的最佳时间是多少

> ID：10282220
> 
> 赞同：1
> 
> 时间：2012-04-23T14:10:23.130
> 
> 标签：monitoring, nagios

我正在使用 nagios 监控 mysql（使用[check_mysql_health](http://labs.consol.de/lang/en/nagios/check_mysql_health/)）并且我想使用连接时间 - 但我不太清楚我需要询问的时间。所以我的问题是 - 什么是连接时间的最佳时间 - 警告和重要通知？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:54:45.283

我希望一般数据库访问速度很快，可能是几毫秒（<10 毫秒），而 100 毫秒会很慢。另一方面，如果数据库位于连接不良的另一台服务器上，则时间可能会大得多。

一种方法是运行系统一段时间并检查`check_mysql_health`报告的时间。如果您的意图是在发生异常情况时收到通知，您首先必须测量正常情况，然后相应地调整限制。

# apache-flex - 为什么设置为 NULL 的皮肤部件的属性会静默失败？

> ID：10282223
> 
> 赞同：0
> 
> 时间：2012-04-23T14:10:32.403
> 
> 标签：apache-flex, data-binding, flex4.6

我创建了一个自定义组件并声明了一个皮肤部件：

```
[SkinPart (required="true")]
public var label:Label; 
```

在组件初始化期间，我设置`label.text`为`'foo'`：

```
protected function init():void {
    label.text = 'foo'; //This line fails silently
    bar();
} 
```

当 label 为 null 并且发生奇怪的事情时调用该函数：

1.  `label.text = 'foo';`静默失败：没有抛出异常，控制台视图不显示任何内容。
2.  `bar();`永远不会被执行。

我希望该应用程序会产生致命错误并退出，但事实并非如此。**为什么设置空引用的属性会静默失败？**

我在[这里](http://www.adobe.com/devnet/flex/articles/databinding_pitfalls.html)阅读了有关静默数据绑定错误的信息，但`label.text = 'foo';`没有绑定任何内容。SDK 版本为 4.6。

# iphone - 在这种情况下，MVC 最佳实践是什么？

> ID：10282226
> 
> 赞同：1
> 
> 时间：2012-04-23T14:10:38.417
> 
> 标签：iphone, objective-c, ios, ipad, model-view-controller

我有一个没有笔尖的视图控制器。我正在代码中创建视图。我一直在这样做`viewDidLoad`

```
UIView *header = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 475, 50.0)];
self.headerView = header;
self.headerView.backgroundColor = [UIColor yellowColor];
[self.view addSubview:self.headerView];

UIView *footer = [[UIView alloc] initWithFrame:CGRectMake(0, self.view.height - 50.0, 475, 50.0)];
self.footerView = footer;
self.footerView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin;
self.footerView.backgroundColor = [UIColor greenColor];
[self.view addSubview:self.footerView]; 
```

等等。然而，随着我`viewDidLoad`变得越来越长，我觉得这可能不应该在我的控制器中。这真的应该是一个子类 UIView 然后加载到我的`viewDidLoad`. 这种情况的 MVC 最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:21:01.867

如果你觉得你的页眉和页脚可以重复使用，那么是的，我会为它们创建新的类。此处可重用并不意味着您将在应用程序的其他地方重用这些，只是最终可以完成。

如果不是这种情况，您可以简单地添加一个`createHeader`您将从中调用的方法`viewDidLoad`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:26:13.847

> 这真的应该是一个子类 UIView，然后加载到我的 viewDidLoad 中吗？

在我看来：是的。我可能会有一个用于控制器视图的类，它将创建页眉和页脚视图（它们本身可以从 UIView 子类化）。

> 这种情况的 MVC 最佳实践是什么？

这些视图和子视图都是 MVC 的“V”部分的一部分。我想得越多，我就越认为，当你现在有东西时，控制器正在做一些“V”的工作。我并不是说这一定很糟糕，但是随着视图创建代码变得更大，您当然应该考虑更好的分离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:02:09.467

控制器通常是“老板”——它汇集了模型和视图。所以它可以对两个层都有深入的了解。从这个角度来看，让它创建视图层次结构并不一定是坏事，尽管正如@danh 指出的那样，您应该根据具体情况来决定。如果代码开始“闻起来”，那么请继续重构它。如果您的视图层次结构开始变得非常复杂，那么您可能需要引入额外的控制器来划分责任。例如，您可能有一个用于处理页眉的控制器，另一个用于处理页脚等。

# exception - 为什么在 Symfony2 中抛出 TokenNotFoundException 或 AccessDeniedException 会导致登录页面？

> ID：10282228
> 
> 赞同：0
> 
> 时间：2012-04-23T14:10:44.287
> 
> 标签：exception, redirect, symfony

我有两个关于 Symfony2 异常的“简单问题”。以下是问题的描述。我将**TokenNotFoundException**（或**AccessDeniedException**）扔到控制器中。如果抛出该异常，则框架会自动重定向到*登录页面*。

1.  为什么？
2.  抛出异常后如何自定义要调用的页面？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:07:26.310

问题 1 的答案：

查看[Symfony\Component\Security\Http\Firewall\ExceptionListener](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Firewall/ExceptionListener.php)类。onKernelException方法完成了这项工作[......](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/Security/Http/Firewall/ExceptionListener.php#L75)

# sql - MS Access 中的 SQL JOIN 问题

> ID：10282229
> 
> 赞同：2
> 
> 时间：2012-04-23T14:10:46.587
> 
> 标签：sql, ms-access, join

我正在处理的一些 SQL 中的连接语句有点麻烦。想知道是否有任何聪明的人可以帮助我解决我的问题！

我正在尝试加入 3 个表：tblMember、tblResult 和 tblPoint

tblMember - 包含用户信息，例如姓名和电子邮件。tblResult - 包含成员和他们报名参加的比赛的详细信息，只要他们完成比赛的完成位置和时间的详细信息。 tblPoint - 包含与一个人在比赛中完成的位置相关的一组积分，例如第一名得 10 分，第二名得 8 分……如果一个人完成第 6 名或以下，则不得分。

我希望查询返回 tblResult.ResultID、tblMember.MemberName、tblResult.PersonalTime、tblResult.FinishPosition、tblPoint.Points。但我希望它返回所有这些字段，即使 FinishPosition 为空并且没有分配点。

通过使用下面的 SQL，我几乎解决了这个问题：

```
SELECT DISTINCT tblResult.ResultID, tblMember.MemberName, tblResult.PersonalTime, 
tblResult.FinishPosition, tblPoint.Points
FROM (tblMember INNER JOIN tblResult ON tblMember.MemberID = tblResult.MemberID) LEFT   
JOIN tblPoint ON tblResult.FinishPosition = tblPoint.Position; 
```

然而，这并不完全奏效。当我的查询返回结果时，已经被分配了一个位置的人，比如第二名，被多次返回，第一次分配了第一名的分数，然后第二次分配了第二名的分数！

这一定是一个 JOIN 问题......但我不知道如何纠正它！我已经尝试过使用 IIF 和 ISNULL，但我认为这不是正确的使用方法。

我正在使用 MS Access，它似乎不支持 LEFT OUTER JOIN、RIGHT OUTER JOIN 或 FULL JOIN。

任何人都可以帮忙吗？感谢您阅读本文。:)

编辑：[tblPoint] 包含字段（PointID、RaceTypeID、Points、Position）。每种比赛类型有 5 行。PointID 是主键，表可能如下所示：

点 ID - 1，RaceTypeID - 1，点 - 10，位置 - 1

点 ID - 2，RaceTypeID - 1，点 - 6，位置 - 2

点 ID - 3，RaceTypeID - 1，点 - 3，位置 - 3

点 ID - 4，RaceTypeID - 1，点 - 2，位置 - 4

点 ID - 5，RaceTypeID - 1，点 - 1，位置 - 5。

这意味着对于比赛类型 1，第 1 名获得 10 分，第 2 名获得 6 分，依此类推。该表可以支持不同的比赛类型，每种比赛类型都有自己的积分系统。

成员可以在 tblResult 中出现任意次数，一旦成员“注册”参与，他们就会出现在 tblResult 中，没有分配完成位置或个人时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:30:03.540

对于其他有同样问题的人：

正如 REMOU 指出的那样，我错过了 tblRaceType 的另一个连接，谢谢！这是我最后的 SQL 代码。

```
SELECT tblResult.ResultID, tblMember.MemberName, tblResult.PersonalTime, 
tblResult.FinishPosition, tblPoint.Points
FROM tblRaceType RIGHT JOIN ((tblMember INNER JOIN tblResult ON tblMember.MemberID = 
tblResult.MemberID) LEFT JOIN tblPoint ON tblResult.FinishPosition = tblPoint.Position) ON 
tblRaceType.RaceTypeID = tblPoint.RaceTypeID; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T14:18:13.210

MS Access 在混合`JOIN`s 和`LEFT JOIN`s 时总是遇到问题。将查询拆分为两个子查询。这是 MS Access 的最佳策略，无论如何您都不会调整性能。

而且，如果这没有帮助，请尝试在图形界面中创建查询，因为 MS Access 可能无法理解 SQL 源...记住，它是 MS :-) 只需单击即可。表现得像 MS 期望的那样——就像一个简单的用户:-)

尝试这些方法 - 即“尽可能简单”地使用 Access，根据我的经验，您会发现问题所在。此外，通过子查询策略（使用简单步骤构建查询），您可以测试子结果。

# java - 禁用检票口中的输入文本

> ID：10282232
> 
> 赞同：2
> 
> 时间：2012-04-23T14:10:58.510
> 
> 标签：java, wicket

我有带有两个输入文本的 hml 表单

```
<input type="text" wicket:id = "query"/> 
<input type="text" wicket:id= "address"/> 
```

我需要实现选择机制。当有人开始编写查询时，应该禁用地址，反之亦然。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:21:49.340

向侦听 onChange 事件的查询文本字段添加行为。在`onEvent`方法中禁用地址文本字段并将其添加到 ajax 请求目标。

请参阅此示例如何添加行为以及如何禁用其他组件。请记住，如果必须启用或禁用其他组件，您可能会添加一些检查。

```
queryTextField.add(new AjaxEventBehavior("onKeyUp") {
        @Override
        protected void onEvent(AjaxRequestTarget target) {
            addressTextField.setEnabled(false);
            target.add(addressTextField);        
        }
    }
); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T14:20:01.557

您可以使用：

```
myTextField.add(AttributeModifier.replace("readonly", "readonly")); 
```

当然，`"readonly"`应该根据你的代码上的一些标准来确定。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:18:49.407

当通过 JavaScript 触发 onKeyUp 事件时，我会向两个字段添加一个禁用/启用另一个字段的行为。

# wordpress - 如何将一些代码添加到可视化编辑器出现的同一页面？

> ID：10282233
> 
> 赞同：0
> 
> 时间：2012-04-23T14:11:03.620
> 
> 标签：wordpress

对于那些不熟悉 Wordpress 的人（我是）来说，这一定是一个简单的问题。

我想`<script>`在您编辑帖子的页面中添加一些 HTML（实际上是一个标签）。我*不想*将 HTML 代码添加到帖子本身，而是想在编辑器*周围的代码中的某处添加一些东西。*

我认为我需要的是在创建编辑器页面时触发一些动作，但我不确定。

（我猜这可能不是一个好习惯，但我正在尝试做一个快速而肮脏的黑客攻击，以在未来不会被重用的项目中为自己节省大量时间。我想使用 javascript当 DOM 就绪事件触发时，稍微修改编辑器页面。）

另外，我可以从我的主题`functions.php`文件中做到这一点，还是必须是插件？

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:31:44.983

您可以从主题中的 functions.php 文件中执行插件可以执行的任何操作，但它不会是可移植的。您将需要找到正确的操作挂钩，它们在此处列出，然后添加您的操作。

[http://codex.wordpress.org/Plugin_API/Action_Reference](http://codex.wordpress.org/Plugin_API/Action_Reference)

WordPress 管理员使用 jQuery，因此您应该能够通过从 functions.php 注册脚本来包含 jQuery 函数，然后从那里应用您需要的任何内容。

你最好在 WordPress 论坛上问这个问题。

/彼得

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:55:08.800

这是一个简单的函数，您可以将其放入`functions.php`文件并添加脚本代码，它只会显示在新/编辑帖子页面上：

```
add_action('admin_footer','add_my_script');
function add_my_script() {
    global $pagenow;
    if (in_array( $pagenow, array( 'post.php', 'post-new.php' ) )){
        ?>
        <SCRIPT TYPE="text/javascript">
            //your script here
        </SCRIPT>
        <?php
    }
} 
```

# xslt - 如何有条件地更改属性以检查其兄弟的值？

> ID：10282234
> 
> 赞同：3
> 
> 时间：2012-04-23T14:11:04.533
> 
> 标签：xslt, xpath

我只想为某些特定元素更改某些属性值。例如，是否可以仅针对 XML 以下价格为 29.99 的书籍更改 @lang？

```
<book>
  <title lang="fr">Harry Potter</title>
  <price>29.99</price>
</book>

<book>
  <title lang="eng">Learning XML</title>
  <price>39.95</price>
</book> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:28:58.370

**这个简短而简单的转换（根本没有明确的条件）**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="book[price=29.99]/title/@lang">
  <xsl:attribute name="lang">ChangedLang</xsl:attribute>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于提供的 XML**（包装到格式良好的 XML 文档）时：

```
<t>
    <book>
        <title lang="fr">Harry Potter</title>
        <price>29.99</price>
    </book>
    <book>
        <title lang="eng">Learning XML</title>
        <price>39.95</price>
    </book>
</t> 
```

**产生想要的正确结果**：

```
<t>
   <book>
      <title lang="ChangedLang">Harry Potter</title>
      <price>29.99</price>
   </book>
   <book>
      <title lang="eng">Learning XML</title>
      <price>39.95</price>
   </book>
</t> 
```

**解释**：覆盖所需属性的**[标识规则。](http://dpawson.co.uk/xsl/sect2/identity.html)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:24:08.003

尝试这样的事情：

**XML 源**

```
<books>
    <book>
        <title lang="fr">Harry Potter</title>
        <price>29.99</price>
    </book>
    <book>
        <title lang="eng">Learning XML</title>
        <price>39.95</price>
    </book>
</books> 
```

**示例 XSLT**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes"/>
    <xsl:template match="/">
        <books>
            <xsl:for-each select="books/book">
                <xsl:apply-templates select="."/>
            </xsl:for-each>
        </books>
    </xsl:template>
    <xsl:template match="book">
            <book>
                <title>
                    <xsl:if test="price = '29.99'">
                        <xsl:attribute name="lang">eng</xsl:attribute>
                    </xsl:if>
                <xsl:value-of select="title"/></title>
                <price><xsl:value-of select="price"/></price>
            </book>
    </xsl:template>
</xsl:stylesheet> 
```

**替代模板**

或者你真的想在匹配标题节点时使用以下兄弟轴？如果是这样，这可能会更好：

```
<xsl:template match="title">
    <title>
        <xsl:if test="following-sibling::price[1] = '29.99'">
            <xsl:attribute name="lang">eng</xsl:attribute>
        </xsl:if>
        <xsl:value-of select="."/>
    </title>
</xsl:template> 
```

# android - 如何将数据从广播接收器传输到服务

> ID：10282240
> 
> 赞同：1
> 
> 时间：2012-04-23T14:11:13.367
> 
> 标签：android, broadcastreceiver, android-service

我正在制作一个应用程序，用于通过 SMS 进行轮询。我想要的是，如果有人说“是”，我的“是”计数会得到 +1，“否”的情况也是如此，我希望在后台完成，所以我正在使用服务。并在我的`MainActivity`. 我尝试了，并制作了以下代码:: BroadcastReciver

```
/*Bundle bundle = intent.getExtras();
        SmsMessage[]  msg = null;
        String body = "";
        if (bundle != null) {
            Object[] pdus = (Object[]) bundle.get("pdus");
            msg = new SmsMessage[pdus.length];
            for (int i = 0; i < msg.length; i++) {
                body = msg[i].getMessageBody().toString();              
            }
        }*/

        String body = "yes";
        if(body.equals("YES") || body.equals("yes")|| body.equals("y") || body.equals("Y")){
            Intent yes = new Intent(context,PollCounter.class);
            yes.putExtra("yes", true);
            yes.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startService(yes);
            context.stopService(yes);
        }
        else if(body.equals("NO") || body.equals("no")|| body.equals("n") || body.equals("N")){
            Intent no = new Intent(context,PollCounter.class);
            no.putExtra("no", true);
            no.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startService(no);
            context.stopService(no);
        }
        else {
            Intent invalidMsg = new Intent(context,PollCounter.class);
            invalidMsg.putExtra("invalidMsg", true);
            context.startService(invalidMsg);
        }
    }

} 
```

BroadcastReceiver 也有问题，当我取消注释下列的

```
/*Bundle bundle = intent.getExtras();
            SmsMessage[]  msg = null;
            String body = "";
            if (bundle != null) {
                Object[] pdus = (Object[]) bundle.get("pdus");
                msg = new SmsMessage[pdus.length];
                for (int i = 0; i < msg.length; i++) {
                    body = msg[i].getMessageBody().toString();              
                }
            }*/ 
```

不明白原因，我之前使用过这段代码并且它正在工作。

在`Service`::

```
boolean yes = intent.getBooleanExtra("yes", false);
        boolean no = intent.getBooleanExtra("no", false);
        boolean invalidMsg = intent.getBooleanExtra("invalidMsg", false);

        if (yes) {
            yesCount++;
            Intent intentYes = new Intent(this,MainActivity.class);
            intentYes.putExtra("yesCount", yesCount);
            startActivity(intentYes);
            Toast.makeText(getBaseContext(), "yes is recvd", Toast.LENGTH_LONG).show();
        } else if (no) {
            noCount++;
            Intent intentNo = new Intent(this,MainActivity.class);
            intentNo.putExtra("yesCount", noCount);
            startActivity(intentNo);
            Toast.makeText(getBaseContext(), "no is recvd", Toast.LENGTH_LONG).show();
        } else {
            invalidMsgCount++;
            Intent intentInavalidMsg = new Intent(this,MainActivity.class);
            intentInavalidMsg.putExtra("yesCount", invalidMsgCount);
            Toast.makeText(getBaseContext(), "Invalid is recvd", Toast.LENGTH_LONG).show();
        }

    } 
```

我尝试使用`Bundle b = intent.getExtras();`但我不确定如何使用它，以及我应该使用什么进行初始化`intent`。

## 谢谢...

PS：我是安卓新手。对不起，如果我的问题有点奇怪或者我的编码看起来很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:23:13.363

看来你忘了

```
msg[i] = SmsMessage.createFromPdu((byte[])pduArray [i]); 
```

在你的周期。

它应该是

```
for (int i = 0; i < msg.length; i++) {
         msg[i] = SmsMessage.createFromPdu((byte[])pduArray [i]);
         body = msg[i].getMessageBody().toString();              
} 
```

否则`getMessageBody()`确实返回`null`

# php - 固定位置在通过 ajax 加载到 div 的 IE9 内容中不起作用

> ID：10282242
> 
> 赞同：0
> 
> 时间：2012-04-23T14:11:16.243
> 
> 标签：php, javascript, ajax, css

这在 FF、Opera、Chrome 中运行良好。问题仅在 IE 中。我有一个 div，我在其中加载以下内容

```
 <a href="javascript:;" onClick="$('.test').show();">Add</a>

  <div class="test" style="position:fixed;width: 300px;height:200px;display:none;">
     hello friends
  </div>
<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
asadsadsad<br><br><br><br><br><br><br><br><br><br><br>jsjdhahdgasdhg<br><br><br><br><br><br><br><br><br><br>kshdksjdh 
```

当我单击锚标记时，会显示框（不显示以阻止）但 div 没有获得固定位置，它会随着滚动条移动:(

为了使我正在使用的 IE 中的位置固定工作

这是因为内容是通过 ajax 加载的吗？有什么解决办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:17:43.367

添加`<meta http-equiv="x-ua-compatible" content="ie=edge"/>`到您的`<head>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:21:47.343

将测试 div 更改为，`position:absolute`并且您拼错了 height 属性：

```
<a href="javascript:;" onClick="$('.test').show();">Add</a>

<div class="test" style="position:absolute;width:300px;height:200px;display:none;">
   hello friends
</div>

<br/>123<br/>123<br/>123 
```

# performance - jmeter Ant 构建错误。未找到 TestPlan 类

> ID：10282245
> 
> 赞同：0
> 
> 时间：2012-04-23T14:11:21.760
> 
> 标签：performance, testing, ant, jmeter

我正在尝试创建一个 jmeter 测试并按照本教程使用 Ant 运行它：http: [//www.programmerplanet.org/pages/projects/jmeter-ant-task.php](http://www.programmerplanet.org/pages/projects/jmeter-ant-task.php)

我认为我所做的一切都是正确的，但是当我运行 Ant 时出现以下错误：

```
C:\Users\Trendkiller>ant
Buildfile: C:\Users\Trendkiller\build.xml
   [jmeter] Executing test plan: C:\Users\Trendkiller\EuscreenWebTest.jmx ==> C:
\Users\Trendkiller\JMeterResults.jtl
   [jmeter] Created the tree successfully using C:\Users\Trendkiller\EuscreenWeb
Test.jmx
   [jmeter] Error in NonGUIDriver java.lang.RuntimeException: Could not find the
 TestPlan class!

BUILD SUCCESSFUL
Total time: 1 second 
```

我的 build.xml 是：

 ````
<project name="EuscreenWebTest">
<taskdef
name="jmeter"
classname="org.programmerplanet.ant.taskdefs.jmeter.JMeterTask"/>
<jmeter
jmeterhome="apache-jmeter-2.6"
testplan="C:\Users\Trendkiller\EuscreenWebTest.jmx"
resultlog="C:\Users\Trendkiller\JMeterResults.jtl"/>
</project> 
```

有什么想法我可能做错了吗？抱歉，如果我做错了什么，我对 Ant 和 jmeter 有点陌生！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-27T19:29:57.717

JMeter 的一个奇怪之处是 Ctrl+S**只会**保存您的测试计划中当前选择的内容。这意味着您只需 1 个采样器即可节省大量测试计划。有可能发生了这种情况：您仍然会看到一个名称正确的 jmx，但它的内容要小得多，而且根本不是您想要的。

使用 Ctrl+Shift+S 将使用“另存为”保存整个测试计划。我建议专门使用此快捷方式 - 每次执行此操作时，它都会询问您是否确定要保存上次保存的内容，但不要浪费数小时的脚本编写时间是非常值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:12:00.387

在您的情况下，是`jmeterhome="apache-jmeter-2.6"`Jmeter 主目录的相对路径吗？

它应该设置为绝对路径，例如：

```
jmeter.home=c:\jakarta-jmeter-2.6 
```

或相对 - 相对于 build.xml：

```
jmeter.home=../jakarta-jmeter-2.6 
```

检查这个。`

# string - 如何通过 char 与 SSE 4.2 比较表来获取两个字符串？

> ID：10282247
> 
> 赞同：0
> 
> 时间：2012-04-23T14:11:35.837
> 
> 标签：string, sse, string-matching, intrinsics, sse4

如何通过char比较表与C中的SSE 4.2内在函数来获取两个字符串char？

_mm_cmpistrm 返回重要位的掩码，即通过char 比较表处理结果对char 进行聚合函数。

```
__m128i _mm_cmpistrm (
   __m128i a, 
   __m128i b, 
   const int mode
); 
```

如何在不调用任何聚合函数的情况下按字符比较表提取字符？（也许 _SIDD_UNIT_MASK...）

例子：

```
 A T G A
    A 1 0 0 1
    G 0 0 1 0
    T 0 1 0 0
    C 0 0 0 0 
```

这张表我[其实需要](http://piccy.info/view3/2927651/ff1a55e8e4b1997f8ce2ec38d05248cd/)。

_mm_cmpistrm（在某些模式 Equal_each 上）的结果是掩码：

```
 (0 1 1 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:51:01.850

SSE4.2 指令不返回中间表，因为 SSE 寄存器中没有足够的位来保存所有结果。（如果您只搜索几个项目，他们可以，但通常情况并非如此。）如果您想要表格，您需要一次搜索一个垂直列中的每个字母并自己构建表格。（对不起。）

# php - Magento soap从php调用客户自动登录

> ID：10282259
> 
> 赞同：1
> 
> 时间：2012-04-23T14:12:03.060
> 
> 标签：php, magento, soap

我已经创建了一个 magento soap 登录，我需要在完成注册过程后进行客户自动登录....

需要在magento之外登录

谁能帮帮我吗？...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T13:56:22.230

```
define("MAGE_BASE_DIR","/home/seansinn/public_html");
require_once MAGE_BASE_DIR."/app/Mage.php";
Mage::app("default");

Mage::getSingleton("core/session", array("name" => "frontend"));
$session = Mage::getSingleton("customer/session");

try {
    $login = $session->login($username,$password);
    if ($session->isLoggedIn()) {
        echo "Successfully Logged in";
    } else {
        echo "Not Logged in";
    }
} 
```

# javascript - 如何将 Underscore.js 模板与 EJS 结合使用？

> ID：10282260
> 
> 赞同：9
> 
> 时间：2012-04-23T14:12:04.410
> 
> 标签：javascript, node.js, underscore.js, ejs

它们都使用相同的语法来插入变量。例如，如果我想要以下

```
<%= username %> 
```

在我的下划线中，我的主 EJS 中断，因为它试图替换用户名并且主页中不存在这样的变量。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T01:39:08.487

我遇到了这个问题，并认为我会分享我为解决客户端问题而找到的解决方案。这是您更改转义正则表达式的方式（通过 underscore.js[文档](http://underscorejs.org/#escape)）：

```
_.templateSettings = {
    interpolate : /\{\{(.+?)\}\}/g
};
var template = _.template( "{{example_value}}"); 
```

将 <%= %> 更改为 {{ }}。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T14:53:04.653

我认为方括号默认可以在 EJS 中使用：

```
[%= username %] 
```

如果您需要更高级，EJS github 页面描述了如何创建自定义标签：

```
var ejs = require('ejs');
ejs.open = '{{';
ejs.close = '}}'; 
```

*   我认为第二个“更高级”的部分可能特定于服务器端应用程序

[https://github.com/visionmedia/ejs](https://github.com/visionmedia/ejs)

使用客户端 GitHub 示例，您需要在渲染时执行如下语法：

```
var html = require('ejs').render(users, { open: "^%", close: "%^" }); 
```

选项是`render()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T07:57:23.143

当我想在后端（快递）上使用 ejs 模板渲染网页时，我遇到了同样的问题，同时我不得不在前端使用下划线模板。

我尝试了 Marc 的回答，但没有帮助，我认为在较新版本中使用它已经过时了。在较新版本的 ejs(mine is `2.3.3`) 中，您不能再使用`ejs.open`and `ejs.close`，**`ejs.delimiter`**而是使用。

我在 ejs 中将分隔符更改为“$”，因此 ejs 只会处理`<$ $>`标签以插入变量并将`<% %>`标签视为无意义的语法。

```
app.set('view engine', 'ejs');
var ejs = require('ejs');
ejs.delimiter = '$';
app.engine('ejs', ejs.renderFile); 
```

NOTE: I add the code above in `app.js` file in express applications and it worked fine, and if you want to use it on front-end, just pass `{'delimiter': '$'}` in `ejs.render(str, options)` as options argument.

# autoit - 使用 AutoIt 脚本有条件地执行文件

> ID：10282261
> 
> 赞同：0
> 
> 时间：2012-04-23T14:12:05.710
> 
> 标签：autoit

很多时候，我们需要根据文件的扩展名自动执行文件。我想这可以通过AUTOIT来完成。有人可以指导我吗？

[这](http://www.autoitscript.com/forum/topic/22312-return-file-extension/)有助于获得扩展。

```
$parts = StringSplit($file,"\.",0)
$ext = $parts[$parts[0]]
$filename = $parts[$parts[0] - 1] 
```

那么如何设置条件执行呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:24:25.037

## 比较扩展

假设您想与一系列扩展进行比较，最简单的方法是[switch 语句](http://www.autoitscript.com/autoit3/docs/keywords/Switch.htm)：

```
Switch $ext
    Case "txt"
        ; What to do with text files
    Case "htm", "html"
        ; Example of matching more than one extension
    Case Else
        ; Extension wasn't any of the above
EndSwitch 
```

## 让shell执行文件

我认为您真正想要做的是让计算机决定执行文件的最佳程序是什么。此信息与扩展名（在 HKEY_CLASSES_ROOT 中）一起存储在注册表中，但您不需要知道任何这些，因为提供了一个称为[ShellExecute](http://www.autoitscript.com/autoit3/docs/functions/ShellExecute.htm)的特殊函数。这使用扩展来运行文件的默认处理程序（可以选择使用给定的“动词”）。例如：

```
ShellExecute("C:\Test.txt") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T22:10:58.520

ShellExecute 不会比运行一堆 Switch 语句更好吗？如果您为文件扩展名设置了文件关联，那么 ShellExecute 将自动打开该扩展名的默认程序。

除非您尝试运行特定程序，否则该程序未设置为文件类型的默认值，例如在 HTML 文件上运行 Chrome，而 IE 是 HTML 文件的默认程序，那么它不应该需要很多额外的条件语句工作。

# documentation - 软件文档：类图的放置位置：在功能或设计规范中

> ID：10282262
> 
> 赞同：1
> 
> 时间：2012-04-23T14:12:18.260
> 
> 标签：documentation, uml, class-diagram

我正在编写我必须开发的软件的文档。我尊重 V 模型：

[http://sqa.fyicenter.com/FAQ/Software-Development-Models/models_1.JPG](http://sqa.fyicenter.com/FAQ/Software-Development-Models/models_1.JPG)

我的问题是：我应该在哪里使用 UML 类图，在功能规范或设计规范中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:27:58.473

不要不同意其他答案的逻辑。这是另一个可能相关也可能不相关的观点。

如果您的类图对问题域进行建模（例如[Domain-Driven Design](http://domaindrivendesign.org/resources/what_is_ddd)），那么它可以在定义问题域的语言（DDD 术语中的“无处不在的语言”）方面具有更基本的目的。

因此，它实际上更像是一个正式的词汇表，而不是一个（软件）设计工件。因此，它定义了功能规范中使用的术语。

以在线购物系统为例。您的功能需求可能会涉及“购买产品”、“将商品放入购物篮”、“结账”等。这些术语——产品、项目、购物篮——是隐含定义的。但是与它们相关的规则呢？例如，一次可以在一个购物篮中有多少产品？如果您想结帐，是否必须一次性支付所有项目？或者他们可以分开吗？

这些类型的规则可以在类图上形式化——因此它可以成为功能需求的一个非常有用的组件。

它是否适用于您将取决于（a）您的类图的内容，以及（b）您和您的需求利益相关者是否将从它可以带来的规则和术语的清晰性中受益。

正如我所说：另一种观点。

hth。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:16:36.693

类之间的关系以及其中的属性/方法的细节与系统将要做什么无关，而是与系统将如何完成工作无关。出于这个原因，我将 UML 类图放在设计规范中。

此外，我通常不会将整个类图放在设计规范中，但也会将其中的某些部分（如果有的话）集中在特定主题（整个系统的子任务）上。我主要使用类图（当然还有序列图）来设计应用程序以使我的头脑清楚地看到解决方案，但不是为了记录它：类图可能（并且将会）经常从我的第一个改变，主要是由于重构.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:18:43.657

我会说这更多的是设计规范。在功能规范中，您要考虑软件必须做什么，在设计规范中，您可以开始起草一些 UML 以及代码用户界面的模型。

希望它有所帮助

# php - MySQL 列出用户及其组

> ID：10282270
> 
> 赞同：5
> 
> 时间：2012-04-23T14:12:41.730
> 
> 标签：php, mysql, group-concat, concat

在 MySql 数据库中，我有表`user`

```
user_id | user_name
--------+----------
1       | Joe
2       | Anna
3       | Max 
```

桌子`group`

```
group_id | group_name
---------+----------
1        | Red
2        | Blue
3        | Green 
```

桌子`group_member`

```
group_member_id | user_id | group_id
----------------+---------+---------
1               | 1       | 2
2               | 3       | 2
3               | 1       | 3 
3               | 2       | 1 
```

所以... 红色组的成员是 Anna，绿色组的成员是 Joe，蓝色组的成员是 Joe 和 max。

如何获取用户及其组的列表

```
User  | Group
------+------------
Joe   | Green, Blue
Anna  | Red
Max   | Blue 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T14:14:42.870

您可以使用[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)MySQL 的功能完成它。请注意，这会使您的查询不可移植（因为使用 MySQL 扩展）：

```
SELECT user_name, GROUP_CONCAT(group_name)
FROM user
JOIN group_member USING (user_id)
JOIN group USING (group_id)
GROUP BY
       user_id 
```

我假设您在表上有合理的主键/唯一键（例如，给定的用户名不能在同一组中列出两次）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:22:55.233

```
SELECT u.user_name, GROUP_CONCAT(g.group_name)
FROM `user` u
inner JOIN group_member gm on gm.user_id = u.user_id
inner JOIN `group` g on g.group_id = gm.group_id
group by u.user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T05:39:28.193

```
select u.user_name as users, group_concat(g.group_name) as groups
from `user` u 
join group_member gm on gm.user_id = u.user_id
join `group` g on g.group_id = gm.group_id
group by u.user_id; 
```

# android - 通过 id 中断线程

> ID：10282280
> 
> 赞同：0
> 
> 时间：2012-04-23T14:13:31.203
> 
> 标签：android, multithreading, session, interrupt

我遇到了一个关于中断的小问题。在我的 android 登录活动中，我启动了一个线程（它定义了我的会话的持续时间）。我想要的是，当我在不同的活动/课程中并且我按下注销按钮时，我应该停止正在倒计时的线程并能够再次登录。

我知道中断阅读的唯一方法是

```
Thread.currentThread().interrupt(); 
```

但我不想中断当前线程，我想通过它的 id 来中断线程，我可以通过 getId() 获得。

这是我的活动类代码：

```
import java.security.GeneralSecurityException;
import java.security.MessageDigest;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import com.AndroidApp.R;
import com.AndroidApp.domain.Utente;
import com.AndroidApp.pagine.MenuPagina;

public class LoginActivity extends Activity {

    final String TAG = "LogIN";
    ArrayList<HashMap<String, String>> mylist;

    private Button bLogin, bExit;
    private EditText utente, passwd;
    private MediaPlayer mpButtonClick = null;
    private SharedPreferences mPreferences; 
    public Thread sessionTimer;
    public long tId = -1;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);

        mPreferences = getSharedPreferences("CurrentUser", MODE_PRIVATE);

        SharedPreferences.Editor editor = mPreferences.edit();
        editor.clear();
        editor.commit();

        String nome = mPreferences.getString("nome", "Nessuno");
        setTitle("Sessione di : " + nome);
        Log.w("TotThreads", Integer.toString(Thread.activeCount()));
        if (MenuPagina.reset){
            Log.w("LogIn", "trying to interrupt");

            //this is where im trying to interrypt the thread

            MenuPagina.reset = false;
        }

        if (!checkLoginInfo()) {

            mpButtonClick = MediaPlayer.create(this, R.raw.button);

            bLogin = (Button)findViewById(R.id.bLogin);
            bLogin.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {

                    mpButtonClick.start();

                    Log.v(TAG, "Trying to Login");
                    utente = (EditText)findViewById(R.id.etUtente);
                    passwd = (EditText)findViewById(R.id.etPassword);

                    String username = utente.getText().toString();
                    username = ("aaa@ffff.it");
                    String password = md5(passwd.getText().toString());
                    Log.v(TAG, password);

                    XMLFunctionsLogin.getInstance().setNewURL("u=" + username + "&p=" + password);
                    String xml = XMLFunctionsLogin.getXML();
                    Document doc = XMLFunctionsLogin.xmlFromString(xml); 
                    int status = XMLFunctionsLogin.errStatus(doc); 

                    Log.v("status", Integer.toString(status));
                    if ((status == 0)) {
                        NodeList nodes = doc.getElementsByTagName("login"); 
                        Element e = (Element) nodes.item(0);
                        Utente utente = new Utente();
                        utente.setIdUtente(XMLFunctionsLogin.getValue(e, "idUtente"));
                        utente.setNome(XMLFunctionsLogin.getValue(e, "nome"));
                        utente.setCognome(XMLFunctionsLogin.getValue(e, "cognome"));
                        Log.v("utente", utente.getCognome().toString());

                        Log.v(TAG, "5");

                        List<NameValuePair> nvps = new ArrayList<NameValuePair>(2);
                        nvps.add(new BasicNameValuePair("utente", username));
                        nvps.add(new BasicNameValuePair("password", password));
                        Log.v(TAG, nvps.get(0).toString());
                        Log.v(TAG, nvps.get(1).toString());

                        // Store the username and password in SharedPreferences after the successful login
                        SharedPreferences.Editor editor = mPreferences.edit();
                        editor.putString("userName", username);
                        editor.putString("password", password);
                        editor.putString("idUtente", utente.getIdUtente());
                        editor.putString("nome", utente.getNome());
                        editor.putString("cognome", utente.getCognome());
                        editor.commit();

                        Log.v(TAG, "Successo");

                        sessionTimer = new Thread() {
                            @Override
                            public void run() {
                                long tId = Thread.currentThread().getId();
                                Log.w("TTthread Id", Long.toString(tId));
                                for (int i = 30; i >= 0; i -= 1) {
                                    if (i == 0) {
                                        System.out.print("timer finito");
                                        Log.i("Timer", "timer finito");
                                        LoginActivity.this.runOnUiThread(new Runnable() { 
                                            public void run() { 
                                                Toast.makeText(LoginActivity.this, "ti si è scaduta la sessione", Toast.LENGTH_LONG).show(); 
                                            }
                                        });
                                        Intent intent = new Intent(getApplicationContext(), LoginActivity.class);
                                        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                                        startActivity(intent);
                                        //System.exit(0);
                                    } try {
                                        Thread.sleep(1000);
                                        Log.i("Timer", Integer.toString(i));
                                    } catch (InterruptedException e) {
                                        e.printStackTrace();
                                    } finally {
                                        finish();
                                    }
                                }
                            }

                        };
                        sessionTimer.start();

                        Log.v(TAG, "Successo2");

                        /*
                        Counter timer = new Counter();
                        timer.start();

                         */

                        Toast.makeText(LoginActivity.this, "LogIn con successo", Toast.LENGTH_SHORT).show();
                        Intent intent = new Intent(LoginActivity.this, MenuPagina.class);
                        startActivity(intent);

                    } else {
                        final String errorMessage = XMLFunctionsLogin.errStatusDesc(doc);
                        Log.v("fallimento", errorMessage);
                        LoginActivity.this.runOnUiThread(new Runnable() { 
                            public void run() { 
                                Toast.makeText(LoginActivity.this, errorMessage, Toast.LENGTH_LONG).show(); 
                            }
                        });

                        Intent intent = getIntent();
                        finish();
                        startActivity(intent);
                    }
                }

            });

            bExit = (Button)findViewById(R.id.bExit);
            bExit.setOnClickListener(new View.OnClickListener() {

                public void onClick(View view) {
                    mpButtonClick.start();
                    finish();
                }
            });
        }
    }

    //Checking whether the username and password has stored already or not
    private final boolean checkLoginInfo() {
          boolean username_set = mPreferences.contains("UserName");
          boolean password_set = mPreferences.contains("PassWord"); 
          if ( username_set || password_set ) {
                return true;
          } 
          return false;
    }

    //md5 for crypting and hash
    private static String md5(String data) {
        byte[] bdata = new byte[data.length()];
        int i;
        byte[] hash;

        for (i = 0; i < data.length(); i++)
            bdata[i] = (byte) (data.charAt(i) & 0xff);

        try {
            MessageDigest md5er = MessageDigest.getInstance("MD5");
            hash = md5er.digest(bdata);
        } catch (GeneralSecurityException e) {
            throw new RuntimeException(e);
        }

        StringBuffer r = new StringBuffer(32);
        for (i = 0; i < hash.length; i++) {
            String x = Integer.toHexString(hash[i] & 0xff);
            if (x.length() < 2)
                r.append("0");
            r.append(x);
        }
        return r.toString();
    }
} 
```

任何帮助将非常感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:14:52.493

当您启动一个线程时，您应该保存该`Thread`对象，然后对该对象调用中断`Thread`：

```
 Thread thread = new Thread(yourRunnable);
 thread.start();
 ...
 thread.interrupt(); 
```

因此，使用您刚刚添加的代码，您可以：

```
sessionTimer.interrupt(); 
```

另外，请注意，中断线程只会导致`sleep()`并`wait()`调用抛出`InterruptedException`或设置线程中断标志。它*不会*阻止线程执行。这意味着您的线程应该使用如下代码：

```
 // loop until we are interrupted
 while (!Thread.currentThread().isInterrupted()) {
    ...
    // if you use sleep or wait it should do:
    try {
       Thread.sleep(someMillis);
    } catch (InterruptedException e) {
       // if you are not quitting then you need to reset the interrupted flag
       Thread.currentThread.interrupt();
       // otherwise it is typical to quit the thread if interrupted
       return;
    }
 } 
```

因此，使用您刚刚发布的代码，当您进行睡眠时，您应该退出`run()`将停止线程的方法。

```
 try {
                    Thread.sleep(1000);
                    Log.i("Timer", Integer.toString(i));
                } catch (InterruptedException e) {
                    // quit because we were interrupted
                    return;
                } finally {
                    finish();
                } 
```

另外，请记住，如果一个单独的线程正在调用`interrupt()`，`sessionTimer`那么它应该被标记为`volatile`。

# php - php将工作日转换为日期

> ID：10282282
> 
> 赞同：2
> 
> 时间：2012-04-23T14:13:45.320
> 
> 标签：php, date, weekday

```
function dayDate($day) {
    $dayArr = array(
            0 => 'MONDAY',
            1 => 'TUESDAY',
            2 => 'WEDNESDAY',
            3 => 'THURSDAY',
            4 => 'FRIDAY',
            5 => 'SATURDAY',
            6 => 'SUNDAY'
        );

        $sunday = mktime(0, 0, 0, date('m'), date('d')+(1-date('w')), date('Y'));

        $n  = array_search("$day",$dayArr);
        $date   = date('m-d-Y', $sunday+$n*60*60*24);

    return $date;
} 
```

我正在使用上述函数将工作日（例如星期一）转换为当前星期的日期，我在循环中使用此函数并像“SUNDAY”“MONDAY”一样传入$day，它会返回我的日期。但由于某种原因，它错过了第一个星期日。

例如，如果它今天是“2012 年 4 月 22 日星期日”并且我通过了 SUNDAY，它会给我下周日的日期而不是今天。

任何帮助将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:25:50.657

您可以[`strtotime()`](http://us3.php.net/manual/en/function.strtotime.php)为此使用魔法：

```
function dayDate($day) {
    return date('m-d-Y', strtotime('next ' . $day));
} 
```

不过，请考虑使用 PHP 的原生[`DateTime`](http://us3.php.net/manual/en/book.datetime.php)类：

```
function dayDate($day) {
    return new DateTime('next ' . $day);
}

$nextMonday = dayDate('Monday');
echo $nextMonday->format('m-d-Y'); // 04-30-2012 
```

`DateTime`除了允许您从方法/函数中删除硬编码的日期格式外，使用该对象还可以做一些非常简洁的事情，以防您需要即时更改它。

# javascript - Highcharts - 日期时间轴标签重叠

> ID：10282283
> 
> 赞同：5
> 
> 时间：2012-04-23T14:13:47.843
> 
> 标签：javascript, datetime, highcharts

我正在使用 Highcharts，并且我有一个带有日期时间轴的图表。大多数情况下，标签沿轴正确分布，没有重叠。

但有时标签会重叠。在这里您可以看到一个示例： http: [//jsfiddle.net/4ghhf/](http://jsfiddle.net/4ghhf/) 使用 tickInterval 和 tickPixelInterval 并不能解决问题。

我应该怎么做才能避免这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T14:30:22.403

我看到两种解决问题的方法：

*   更改刻度间隔
*   更改标签显示

我在以下代码（xAxis 部分）中应用了两者：

```
$(function () {
 var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container',
        type: 'column'
    },

    xAxis: {
        type: 'datetime',
        tickInterval : 7*24 * 3600 * 1000,
        labels : { y : 20, rotation: -45, align: 'right' }
    },
    series: [{
        data: [
            [Date.UTC(2010, 3, 11), 29.9],
            [Date.UTC(2010, 4, 8), 71.5]
         ]
    }]
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-14T21:22:56.523

另一种解决方案是使用 tickPixelInterval，它定义了刻度之间的像素间距。更高的数字将导致更少的滴答声。

[http://api.highcharts.com/highcharts#xAxis.tickPixelInterval](http://api.highcharts.com/highcharts#xAxis.tickPixelInterval)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T17:15:48.260

也许 staggerLines 是您的解决方案：

```
xAxis: {
    type: 'datetime',
    labels: {
        staggerLines: 2
    }
}, 
```

我用这个设置更新了你的 jsfiddle：http: [//jsfiddle.net/benebun/4ghhf/134/](http://jsfiddle.net/benebun/4ghhf/134/)

来自[API 参考](http://api.highcharts.com/highcharts#xAxis.labels.staggerLines)：

> **staggerLines：**数字（自 2.1 起）
> 
> 仅水平轴。将标签展开以腾出空间或更紧密的标签的行数。.

（通过github上的[此评论找到）](https://github.com/highslide-software/highcharts.com/issues/193#issuecomment-714585)

我用这个设置更新了你的 jsfiddle：http: [//jsfiddle.net/benebun/4ghhf/134/](http://jsfiddle.net/benebun/4ghhf/134/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-10T16:30:15.343

在这里找到我的答案：[Highcharts 重叠类别标签](https://stackoverflow.com/questions/14732154/highcharts-overlapping-category-labels) 我使用 xAxis 标签的类别数组，而不是让 HighCharts 解析 UTC 日期代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-09T10:53:20.427

它还可能取决于您使用的字体。对我来说，这发生在 Arial 上，但适用于 Helvetica 或 Times New Roman。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-01T05:55:49.567

有同样的问题并用[**autoRotation**配置](http://api.highcharts.com/highcharts/xAxis.labels.autoRotation)修复。如果标签不合适，Highcharts 会自动旋转您的标签。如果有太多，即使在旋转时 Highcharts 也会尝试为您自动删除标签。

```
xAxis = {
    "type": 'datetime',
    "tickInterval": 30 * 24 * 3600 * 1000,
    "labels": {
        autoRotation: [45]
    }
} 
```

只要确保您没有指定**步骤**，因为它会覆盖自动旋转。

# java - 将java中的文件上传到ftp服务器时出错

> ID：10282284
> 
> 赞同：2
> 
> 时间：2012-04-23T14:13:48.937
> 
> 标签：java, file-upload, image-upload, java-server

当我尝试将文件上传到 ftp 服务器时，出现错误。该服务器是远程服务器，但它提供 ftp 访问。这是我正在使用的代码

```
/*
* To change this template, choose Tools | Templates
* and open the template in the editor.
*/
package fileuploaddemo;

import org.apache.commons.net.ftp.FTPClient;
import java.io.FileInputStream;
import java.io.IOException;

public class FileUploadDemo {
public static void main(String[] args) {
    FTPClient client = new FTPClient();
    FileInputStream fis = null;

    try {
        client.connect("ftp.adress.comlu.com");
        client.login("username", "mypass");

        //
        // Create an InputStream of the file to be uploaded
        //
        String filename = "D:/xxx/screen0.png";
        fis = new FileInputStream(filename);

        //
        // Store file to server
        //
        client.storeFile(filename, fis);
        client.logout();
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (fis != null) {
                fis.close();
            }
            client.disconnect();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
} 
```

这是程序输出。什么都没有上传，我得到的只是这些行。

```
run:
java.net.SocketException: Software caused connection abort: recv failed
at java.net.SocketInputStream.socketRead0(Native Method)
at java.net.SocketInputStream.read(SocketInputStream.java:150)
at java.net.SocketInputStream.read(SocketInputStream.java:121)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:283)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:325)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:177)
at java.io.InputStreamReader.read(InputStreamReader.java:184)
at java.io.BufferedReader.fill(BufferedReader.java:154)
at java.io.BufferedReader.read(BufferedReader.java:175)
at org.apache.commons.net.io.CRLFLineReader.readLine(CRLFLineReader.java:58)
at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:310)
at org.apache.commons.net.ftp.FTP.__getReply(FTP.java:290)
at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:479)
at org.apache.commons.net.ftp.FTP.sendCommand(FTP.java:552)
at org.apache.commons.net.ftp.FTP.port(FTP.java:877)
at org.apache.commons.net.ftp.FTPClient._openDataConnection_(FTPClient.java:709)
at org.apache.commons.net.ftp.FTPClient._storeFile(FTPClient.java:565)
at org.apache.commons.net.ftp.FTPClient.__storeFile(FTPClient.java:557)
at org.apache.commons.net.ftp.FTPClient.storeFile(FTPClient.java:1795)
at fileuploaddemo.FileUploadDemo.main(FileUploadDemo.java:29)
BUILD SUCCESSFUL (total time: 1 second) 
```

可能是什么问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:31:55.227

尝试，

```
client.enterLocalPassiveMode() 
```

在您开始转移之前。我怀疑您需要进入 PASV 模式才能进行数据传输。如果您位于路由器 (NAT) 或防火墙后面，就会发生这种情况。默认情况下，FTP 服务器会尝试连接到您进行数据连接，这意味着您开始侦听某个端口并邀请服务器连接到它以进行数据传输。但是如果您在防火墙或路由器后面，服务器将无法直接连接到您。PASV 模式指示 FTP 服务器改为在服务器上打开一个端口进行传输，然后客户端连接到该端口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:37:01.220

在堆栈跟踪中，可以看到文件作为 TEXT 传输，而不是 BINARY，这可能会改变文件，并且无法处理 NUL 等。

```
 client.type(FTP.BINARY_FILE_TYPE); 
```

但尤其是@Kal 是对的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-03T20:27:47.567

解决了我不得不添加：netsh advfirewall set global StatefulFTP disable In command promp in admin rights。这是 Windows 机器上的 Java 7 错误。

# c# - 贝宝整合到网站

> ID：10282285
> 
> 赞同：0
> 
> 时间：2012-04-23T14:13:51.230
> 
> 标签：c#, asp.net, .net, paypal

我正在制作一个捐赠网页。我已经使用 PayPal 创建了一个商家帐户，并已成功将 PayPal Checkout 集成到我的网站中。

唯一的问题是我想验证用户是否确实在 PayPal 的网站上进行了交易。请问这怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:19:05.193

打开贝宝 IPN。它会将一些参数发布到您选择的地址，您必须在其中处理 POST 并回复。贝宝开发网站上应该有这样的代码示例。

埃德。

当用户付款完成 PP POST 到 YourSite.com/PaypalIPN.. 在这里您必须处理来自 PP 的 POST 并回复，以便 PP 知道您已收到 POST。如果您不这样做，PP 将继续发送付款信息。

PP POST 包含订单号、交易 ID 等内容。您可以使用它们来处理用户订单。

# java - Apache Camel：控制路由启动

> ID：10282286
> 
> 赞同：1
> 
> 时间：2012-04-23T14:13:53.430
> 
> 标签：java, rest, cxf, apache-camel

我有一个使用 cxf 和骆驼配置的宁静的网络服务。我的配置 xml 是：

```
<jaxrs:server id="restContainer" address="/" staticSubresourceResolution="true"> <jaxrs:serviceBeans>  
<ref bean="FooBar" />
  </jaxrs:serviceBeans> 
 <jaxrs:providers>  
<bean class="org.apache.cxf.jaxrs.provider.JSONProvider">
  <property name="dropRootElement" value="true" /> 
 <property name="supportUnwrapped" value="true" /> 
 </jaxrs:providers>  
<camelcxf:rsServer id="rsServer" address="/" serviceClass="com.camel.example.FooBar" /> <camel:camelContext id="camelContext-1">  
<camel:route> 
 <camel:from uri="cxfrs:bean:rsServer" />  
<camel:to uri="http://localhost:8080/Google/rest/search" />  
</camel:route>  
</camel:camelContext> 
```

现在我有 FooBar 类，它作为服务公开，就像这样：

```
@Service("Demo") @Path("/foo/bar") public class FooBar{

       @POST @Produces(MediaType.APPLICATION_JSON) @Consumes(MediaType.APPLICATION_JSON) public PoiDetailsResponse poiGetDetails(
            PoiDetailsRequest json)
    {
        System.out.println(json.getUname());
        System.out.println(json.getDeviceid());
        //do some validation and some business logic
        //return accordingly;
    } 
```

我担心的是，当我访问我的服务器时 .. camelContext 立即接管并且我的课程中存在的方法根本没有被触及.. 事实上，来自我的“to”部分路由的任何响应都会发送回客户端..现在一种方法是我为每个业务逻辑添加多个处理器。但我真的想先执行我的方法，然后开始路由..我该怎么做？我也可以用我想要的任何参数访问我的服务器，即使它们是错误的（意味着 PoiDetailsRequest 变量的错误数据类型）并获取任何响应参数（它们不是 PoiDetailsResponse 的一部分），这当然不是一件好事..请建议一些东西..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:10:40.633

You dont need to use the Camel cxfrs component if you want to expose a RS service and use the service bean. You can just use plain CXF RS for this.

The Camel cxfrs component is for when you want to let the RS service route directly into the Camel route.

If you want your method executed first, then you can from your method call Camel by using the ProducerTemplate to send a message to a Camel route using the direct endpoint.

# linux - 拆分 tar.bz2 文件并单独提取每个文件

> ID：10282296
> 
> 赞同：3
> 
> 时间：2012-04-23T14:14:45.270
> 
> 标签：linux, ubuntu, tar

我可以将一个大的 tar.bz2 文件拆分为几个较小的文件，然后在 Ubuntu 中单独提取这些小的 tar.bz2 文件吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:26:31.533

我认为这不容易。A`.tar.bz2`是单个流，它没有这样的索引`zip`，可以跳到存档中特定文件的开头。您可以使用`split`实用程序拆分文件，然后拆分`cat`部分并提取它们（您可以通过 stdin 执行此操作以避免在磁盘上重新创建粘贴的文件）。第一个片段可以单独提取（其中的最后一个文件可能会损坏），但如果没有前面的片段，则无法使用更多片段。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:37:16.987

您可以尝试以下`--multi-volume`选项：

```
tar -cf archive.tar --multi-volume --tape-length 1024 folder 
```

不幸的是，它不适用于压缩档案：

```
tar: Cannot use multi-volume compressed archives 
```

您可以单独压缩卷，但卷的大小可能会有很大差异。

希望它能解决您的用例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-06T19:20:51.020

不确定是否仍然需要帮助，但我找到了一种方法，至少可以让您使用 split 命令和 tar (bz2) 压缩。至于单独提取每个文件，此选项将文件视为整体的一部分（就像 Winzip 在跨越多个卷时所做的那样......如果其中一个卷丢失，则整个存档已损坏）。照这样说：

创建拆分文件。请注意，这将按顺序创建带有“aa、ab、ac”名称的文件：

tar -cv(z/j)f - (要归档的文件) | split -b（以字节为单位的大小，例如 4000m）-（输出存档文件的名称）

提取拆分文件：

猫（文件*）| bzcat/gunzip(-d) | 焦油 (t/x)v(j/z)f -

（如果你使用“j”选项，bzcat 会进入管道）或者（如果你使用“z”选项，gunzip 会进入管道）。如果出现错误，您可能还需要在这两个管道中使用“gunzip -d”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-17T22:38:27.613

将文件拆分为多个文件。

它将自动创建大小为 1.1GB 的文件，如果您的 tar 大小更大，您可以增加数量，例如 1000 {2..1000} 或者您可以增加磁带长度参数的输入。

```
tar --tape-length=1048576 -cMv --file=tar_archive.{tar,tar-{2..100}} backup.tar.lzma 
```

但正如@michal 所说，不可能单独提取它们。

```
tar: backup.tar.lzma: Cannot extract -- file is continued from another volume
tar: Unexpected EOF in archive
tar: Error is not recoverable: exiting now 
```

# ruby-on-rails - StatesController 中的 NoMethodError #create 为未定义的方法“update_column”

> ID：10282297
> 
> 赞同：1
> 
> 时间：2012-04-23T14:14:47.987
> 
> 标签：ruby-on-rails, ruby-on-rails-3

使用 Rails 3.1，我有以下内容：

```
# state.rb
class State < ActiveRecord::Base
  belongs_to :country, :touch => true

  after_save :count_total_states

  private

  def count_total_states
    total_states = State.where(:country_id => self.country_id).count
    Country.where(:id => self.country_id).update_column(:state, total_states)
  end
end

# states_controller.rb
class StatesController < ApplicationController
  def create
    @country = Country.find(params[:country_id])
    @state = @country.states.build(params[:state])
    @state.position = State.where(:country_id => @country.id).maximum(:position).to_i + 1
    @state.save
  end
end 
```

当我为 创建新对象时`state`，显示以下错误：

```
NoMethodError in StatesController#create

undefined method `update_column' for #<ActiveRecord::Relation:0x1074b0e58> 
```

返回控制器的方法是什么？请指教。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:19:56.373

这个错误是因为：

```
Country.where(:id => self.country_id) 
```

返回一个`ActiveRecord::Relation`对象，而不是国家。您可能应该做以下两件事之一：

```
Country.find(self.country_id).update_column(:state, total_states) 
```

或者

```
Country.where(:id => self.country_id).first.update_column(:state, total_states) 
```

但是我会推荐第一个选项，因为它可以满足您的需求，通过 ID 查找记录。使用带主键的 Where 有点时髦，您的目标是只返回一个完全匹配并且您知道它的 ID，因此您应该直接获取它。

* * *

注意：我也建议`update_attribute`不要`update_column`，因为`update_column`跳过所有验证。验证是个好主意，除非你真的不能。

更好的是，您使用的行为实际上被封装到称为“计数器缓存”的标准 Rails 实践中。请参阅此[博客文章](http://blog.obiefernandez.com/content/2011/08/adding-a-counter-cache-to-existing-records.html)和此[Railscast](http://railscasts.com/episodes/23-counter-cache-column)，以了解实现目标的更好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-10T06:47:04.227

正如@Andrew 提到的，我必须添加“first”才能正确更新我的记录（使用 where），这是代码片段，以防万一

[红宝石辛纳屈]

我的观点（这样你就可以看到这些表单的值）

```
 ...
    <form action="/device/<%= model.id %>/set-port-value" method="POST">
        <input name="number" type="hidden" value="27"/>
        <input name="value" type="hidden" value="11"/>
        <input type="submit" value="POST" />
    </form>
    ... 
```

我的控制器

```
post '/device/:device_id/set-port-value' do
   # Updating one record:
   Port.where(number: params[:number]).first.update_column(:value, params[:value])

   @models = Port.all
   erb :'port/all'
end 
```

# javascript - 当用户使用 jQuery 提交表单而不刷新页面时填充字段

> ID：10282298
> 
> 赞同：0
> 
> 时间：2012-04-23T14:14:49.033
> 
> 标签：javascript, jquery, form-submit

在我的表单上有几个输入字段，一旦用户在输入字段中输入值并点击提交，我希望这些值填充一些相应的元素。

如何在不刷新页面的情况下使用 jQuery 来做到这一点？

```
<form method="get">
  <label for="yourName">Your name</label>
  <input name="yourName" id="yourName" type="text">
  <button type="submit">Submit</button>
</form>
<div id="result">
  <span class="rName"></span>
</div> 
```

一些失败的JS。

```
$('#hCardForm').submit(function() {
  var rName = $('#yourName').val();
  $('.rName').text(rName);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:32:32.780

您的代码有 2 个问题。1\. 您的表单上没有 id 2\. 您没有停止提交表单。

您可以将按钮类型更改为按钮，而不是通过 jquery 提交和提交表单。

[jsfiddle](http://jsfiddle.net/ryanwfiorini/jWnJx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:19:33.983

```
<form method="get">
  <label for="yourName">Your name</label>
  <input name="yourName" id="yourName" type="text">
  <button type="submit" id="submit">Submit</button>
</form>
<div id="result">
  <span class="rName"></span>
</div>

$('#submit').click(function(event){
    event.preventDefault();
    $('#result .rName').text($('#yourName').val());
});​ 
```

[http://jsfiddle.net/MswhY/](http://jsfiddle.net/MswhY/)

# java - RMI 计算器问题 (JAVA)

> ID：10282305
> 
> 赞同：0
> 
> 时间：2012-04-23T14:15:03.993
> 
> 标签：java, client, rmi, calculator

我正在编写一个 RMI 计算器程序。我创建了以下 .java 文件。按照指导方针，我到了必须运行服务应用程序的地步。为此，我键入

> 启动 rmiregistry

并打开一个新的空白窗口。然后我尝试通过键入以下内容来启动计算器服务：

> java计算器服务

然后什么也没有发生。

我的指导方针说“我必须确保从与存储服务器的目录相同的目录运行注册表”。

你觉得你能帮我解决这个问题吗？这是我的所有代码：

计算器.java

```
import java.rmi.Remote;
import java.rmi.RemoteException;

public interface Calculator extends java.rmi.Remote 
{ 
    /*
     * method for addition
     */ 
    public double add(double x, double y) 
            throws RemoteException;

    /*
     * method for subtraction 
     */ 
    public double subtract(double x, double y) 
            throws RemoteException; 
    /* 
     * method for multiplication
     */ 
    public double multiply(double x, double y) 
            throws RemoteException; 
    /* 
     * method for division 
     */ 
    public double divide(double x, double y) 
            throws RemoteException; 
} 
```

远程计算器.java

```
import java.rmi.server.UnicastRemoteObject; 
import java.rmi.RemoteException;
public class RemoteCalculator extends UnicastRemoteObject implements Calculator
{
    public RemoteCalculator() throws RemoteException
    {

    } 

    /*
     * method for addition
     */ 
    public double add(double x, double y) 
    { 
        return x+y;
    }
    /* 
     * method for subtraction
     */ 
    public double subtract(double x, double y) 
    { 
        return x-y; 
    } 
    /*
     * method for multiplication 
     */ 
    public double multiply(double x, double y) 
    {
        return x*y; 
    }
    /* 
     * method for division 
     */ 
    public double divide(double x, double y)
    { 
        return x/y; 
    } 
} 
```

计算器服务.java

```
import java.rmi.Naming; 
import java.rmi.RemoteException; 
import java.rmi.RMISecurityManager;

public class CalculatorService 
{ 
    public static void main(String[] args) throws RemoteException,java.net.MalformedURLException
    {
        RemoteCalculator remcalc = new RemoteCalculator(); 
        Naming.rebind("CalcService", remcalc); 

    }
} 
```

计算器客户端.java

```
import java.rmi.Naming; 
public class CalculatorClient 
{
    public static void main(String[] args)
    { 
        double x = Double.parseDouble(args[1]);
        double y = Double.parseDouble(args[2]);
        try 
        { 
            //Connect to the calculator service 
            Calculator calc = (Calculator) Naming.lookup("rmi://" + args[0] + "/CalcService"); 
            System.out.println("Client bound: OK"); 
            //Add the numbers 
            System.out.println(x + " + " + y + " = " + calc.add(x, y)); 
            //Subtract the numbers 
            System.out.println(x + " - " + y + " = " + calc.subtract(x, y)); 
            //Multiply the numbers 
            System.out.println(x + " * " + y + " = " + calc.multiply(x, y)); 
            //Divide the numbers 
            System.out.println(x + " / " + y + " = " + calc.divide(x, y));

        } 
        catch (java.rmi.NotBoundException nbe) 
        { 
            System.out.println("Client bound: error: " + nbe); 
        }
        catch (java.net.MalformedURLException mue) 
        { 
            System.out.println("Client bound: error: " + mue); 

        } catch (java.rmi.RemoteException re)
        {

        }

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:37:21.213

以下是步骤。

1.  使用 javac 编译
2.  用 rmic 编译器编译
3.  启动 rmiregistry
4.  启动服务器
5.  启动客户端

你做了第2步吗？

# c# - 这足以签署数据吗？

> ID：10282307
> 
> 赞同：2
> 
> 时间：2012-04-23T14:15:14.053
> 
> 标签：c#, cryptography, rsa, signing

在搜索如何完成签名时，我遇到了一些相当复杂的代码示例。但是下面的代码似乎就足够了。例如，这里是否缺少盐之类的东西，或者只是签名时不需要盐？我没有加密，只是签名。

```
RSACryptoServiceProvider rsa = new RSACryptoServiceProvider();

byte[] data = Encoding.ASCII.GetBytes("hello");
byte[] signature = rsa.SignData(data, "SHA1");

byte[] dataTest = Encoding.ASCII.GetBytes("hello");
bool verified = rsa.VerifyData(dataTest, "SHA1", signature);
if (verified) Text = "True"; else Text = "Untrue"; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T16:15:37.040

> 刚签名时不需要盐吗？

如果您的任务是防止*对已知消息的哈希值进行预计算，*其中哈希值被用作共享秘密，那么加盐是必要的。如果那不是您的应用程序，则无需加盐。

如果您不明白为什么需要盐，请参阅我关于该主题的系列文章：

[http://blogs.msdn.com/b/ericlippert/archive/tags/salt/](http://blogs.msdn.com/b/ericlippert/archive/tags/salt/)

> 这里有什么遗漏吗？

是的，缺少最重要的一步。你将如何传递公钥？**整个系统的安全性依赖于你甚至没有提到的那一步。**

假设爱丽丝希望向鲍勃发送一条消息，而鲍勃希望验证它来自爱丽丝。他们执行以下操作：

*   Alice 创建一个密钥对并安全地存储私钥。
*   Alice 发布公钥。
*   Bob 获得 Alice 的公钥。
*   Alice 发布一条消息。
*   Alice 对消息进行散列处理，并使用她的私钥对散列进行加密。
*   鲍勃阅读了消息。
*   Bob 读取加密的哈希。
*   Bob 使用 Alice 的公钥解密加密的散列。
*   Bob 对消息进行哈希处理。
*   Bob 将解密的散列与消息散列进行比较。如果它们匹配，那么 Bob 就知道该消息是由 Alice 担保的。

这个对吗？

**不**，结论不正确。结论应该是：

*   Bob 将解密的散列与消息散列进行比较。如果它们匹配，则 Bob 知道该消息是由拥有与 Bob 认为是 Alice 的公钥的公钥匹配的私钥的人担保的。

*只有当 Bob 有额外的证据证明他拥有 Alice 的公钥时*，最初的结论才是正确的。因为 Bob 可能处于这种情况：

*   Alice 创建一个密钥对并安全地存储私钥。
*   Mallory 创建密钥对并安全存储私钥。
*   Alice 发布公钥。
*   Mallory 截获 Alice 的发布，并用 Mallory 的公钥替换 Alice 的公钥。
*   Bob 获得了 Mallory 的公钥，但认为它是 Alice 的。

而现在，整个事情已经下地狱了。Mallory 现在可以发布 Bob 认为来自 Alice 的消息，而 Alice 不能！

您必须*说明您将如何安全地发布公钥*。整个系统依赖于两件事：私钥保持私密，并且*有一些机制可以使公钥与其所有者正确关联。*

# actionscript-3 - 从 AS3/OpenLaszlo 中实例化 Flex 应用程序

> ID：10282309
> 
> 赞同：2
> 
> 时间：2012-04-23T14:15:20.413
> 
> 标签：actionscript-3, apache-flex, mxml, openlaszlo

我有一个 OpenLaszlo/AS3 应用程序 (olapp.lzx) 和一个 Flex 应用程序 (flexapp.swc)。我想在 olapp.lzx 中包含 flexapp.swc，如下所示：

```
olapp.lzx (AS3):
===============
...
var flexapp:Sprite = new FlexApp();
flexapp.doSomething();
... 
```

flexapp.swc 是从这个 mxml 编译的：

```
flexapp.mxml:
============
<?xml version="1.0"?>
<!-- intro/FlexApp.mxml -->
<mx:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:mx="library://ns.adobe.com/flex/mx">
    <mx:ComboBox>
        <mx:dataProvider>
            <s:ArrayList>
                <fx:String>AK</fx:String>
                <fx:String>AL</fx:String>
                <!-- Add all other states. -->
            </s:ArrayList>
        </mx:dataProvider>
    </mx:ComboBox>
</mx:Application> 
```

当我将 flexapp.mxml 编译为 swf 时，它运行良好，但从 AS3 实例化失败（TypeError：错误 #2007）。我研究了 mxml->as3 集成不是通常的方法，但对于这种特殊情况，我需要这样做。我不得不承认我对 Flex 还不是很熟悉，只有 OpenLaszlo。flexapp.mxml 中应该改变什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:14:40.537

OpenLaszlo 不正式支持将 Flash SWF 应用程序导入其中。唯一的例外是编码为 SWF 格式的电影。

（如果您的应用程序使用 Flash 9 (SWF9) 或更高版本，则 SWF 影片需要以 AVM2 格式编码，对于 Flash 8 或更低版本，则需要 AVM1 编解码器）。

如果您尝试将不是简单 SWF 影片的 SWF 加载到 OpenLaszlo <view> 中，那么结果将是不可预知的。

# prestashop - 自定义 Cookie 变量 + Prestashop

> ID：10282310
> 
> 赞同：2
> 
> 时间：2012-04-23T14:15:25.383
> 
> 标签：prestashop

Prestashop

我被困在饼干的一个问题上。在 prestashop 1.4.7 中，我使用 setcookie 创建了一个自定义 cookie 变量，但是当我尝试在前端控制器上访问和分配它时，我没有得到 cookie 设置值。这是我的脚本：

**页面：checkpostcode.php**

```
include(dirname(__FILE__).'/config/config.inc.php');
include(dirname(__FILE__).'/init.php');
global $cookie;

setcookie("is_postcode_checked", 1, time()+600, "/", "", 1); // Set the cookie in basepath 
```

**在 frontcontroller.php 页面上：** 我使用它访问它`$_COOKIE`并将其分配到 smarty 数组中。

```
'is_postcode_checked' => $_COOKIE['is_postcode_checked'] // Getting null value for cookie 
```

**页面：checkpostcode.tpl**

```
{$cookie->_get(postcode_checked_msg)}  // here get the is_postcode_checked value but 
```

但我无法获得`is_postcode_checked`变量值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-10-01T08:19:24.410

在 prestashop 1.5 中，不推荐使用 global。

在 cookie 中设置一些东西：

在控制器中：

```
$this->context->cookie->__set($key,$value); 
```

其他文件：

```
$context = Context::getContext();
$context->cookie->__set($finger_print,$result); 
```

您可以通过以下方式访问您的价值：

在控制器中

```
$this->context->cookie->key 
```

其他文件：

```
$context = Context::getContext();
$context->cookie->key; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T15:00:48.797

您应该完全使用 Prestashop 自己的 cookie 类而不是使用 PHP`setcookie()`函数。该类使用“魔术方法” `__get()`, `__set()`，`__unset()`并且`__isset()`应该允许您轻松地做到这一点。

试试你的“页面”代码（不确定你是如何执行的，因为它看起来不像一个额外的页面控制器）：

```
global $cookie;

$cookie->is_postcode_checked = 1;
$cookie->write(); // I think you'll need this as it doesn't automatically save
... 
```

在您的 FrontController 覆盖中：

```
global $cookie;

if (isset($cookie->is_postcode_checked))
    $is_postcode_checked = $cookie->is_postcode_checked;
else
    $is_postcode_checked = 0; 
```

您可以将变量 $is_postcode_checked 分配给相应的 smarty 变量以在模板中使用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-31T15:39:12.270

如果你想从 Prestashop cookie 类中获取 cookie，你也应该将它存储在这个类中。

在你的控制器中使用`die()`函数，找出那个 cookie 集

正如保罗所说，最好只使用全局`$cookie`类来存储和获取数据。

# php - 如何将 heroku 上 php 的上传目录更改为 /tmp？

> ID：10282311
> 
> 赞同：0
> 
> 时间：2012-04-23T14:15:26.923
> 
> 标签：php, heroku

我制作了一个为用户生成动态图像的 facebook 应用程序。该应用程序在 localhost 上运行良好，但是当我上传到 heroku 时，它无法正常工作。

/tmp 文件夹在 heroku 上是可写的，那么如何将 php 文件上传到 /tmp 文件夹？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:21:17.843

您可以尝试设置 tmp 上传文件夹。它是一个[php.ini 选项](http://www.php.net/manual/en/ini.core.php#ini.upload-tmp-dir)。

您可以在您的 apache vhost 配置或 .htaccess 中设置它；

在 Apache 虚拟主机中；

`php_admin_value upload_tmp_dir /path/to/folder`

在.htaccess;

`php_value upload_tmp_dir /path/to/folder`

# web - 用于访问 URL 的域和子域的行为

> ID：10282312
> 
> 赞同：-1
> 
> 时间：2012-04-23T14:15:27.440
> 
> 标签：web, dns

为什么**analytics.google.com**有效，而**www.analytics.google.com**无效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:22:30.823

大卫上面的评论是准确的。我想对此进行一些扩展以澄清您的想法`www.`

`www.`是一个像任何其他的子域。无论您使用`analytics.`or`www.`还是`whateveryouput.`，它们仍然只是为相关域创建的子域。

大卫正确回答原因`www.analytics.`不起作用是因为子域`analytics.`没有 subdomain `www.`。

`www.`我认为重要的是要知道与任何其他子域相比，子域没有什么特别之处。

# javascript - 什么是 \r" 以及为什么要将它与 \n 一起使用？

> ID：10282314
> 
> 赞同：22
> 
> 时间：2012-04-23T14:15:37.907
> 
> 标签：javascript, string

这两个字符串有什么区别？

`"first line \n second line"`,`"first line \r\n second line"`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-23T14:16:20.483

`\r`- 回车
`\n`- 换行

`\r\n`通常优先使用它，`\n`因为它在 unix 和 Windows 上都能正确显示。

回车只是将光标返回到同一行的开头（不前进到下一行），而换行则换行。

**注：（** *将鼠标悬停在下方灰色框上即可查看）*

> 如果你有一台打字机，试着用它。这是一个如此宏伟的工程，如今没有多少人能体验到。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T14:18:55.433

区别在于不同的`EOL`系统（首先是 Unix，其次是 Win/DOS）

见[http://en.wikipedia.org/wiki/Newline](http://en.wikipedia.org/wiki/Newline)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:19:35.520

[它是不同操作系统](http://en.wikipedia.org/wiki/Newline)的换行符表示。在 Windows 中，一个新行是 \r\n，而 Linux 是它的 \n。

# c# - 从 c# 调用 c zlib 解压缩

> ID：10282315
> 
> 赞同：1
> 
> 时间：2012-04-23T14:15:41.887
> 
> 标签：c#, c, marshalling, dllimport, zlib

我有 dllimport

```
[DllImport("../../zlib-1.2.5/zlib1.dll", CallingConvention = CallingConvention.Cdecl)]   
static extern int uncompress(byte[] destBuffer, ref uint destLen, byte[] sourceBuffer, uint sourceLen); 
```

并称它为

```
 uint _dLen = (uint) 8192;
 byte[] data = compressed_data;
 byte[] _d = new byte[_dLen];

 if (uncompress(_d,  ref _dLen, data, (uint)data.Length) != 0)
     return null; 
```

zlib 中的解压缩函数看起来像

```
unsigned int ZEXPORT uncompress (dest, destLen, source, sourceLen)
unsigned char *dest;
Uint32 destLen;
unsigned char *source;
Uint32 sourceLen;
{
z_stream stream;
int err;

stream.next_in = source;
stream.avail_in = sourceLen;
/* Check for source > 64K on 16-bit machine: */
if ((Uint32)stream.avail_in != sourceLen) return Z_BUF_ERROR;

stream.next_out = dest;
stream.avail_out = destLen;
if ((Uint32)stream.avail_out != destLen) return Z_BUF_ERROR;

stream.zalloc = (alloc_func)0;
stream.zfree = (free_func)0;

err = inflateInit(&stream);
if (err != Z_OK) return err;

err = inflate(&stream, Z_FINISH);

if (err != Z_STREAM_END) {
    inflateEnd(&stream);
    if (err == Z_NEED_DICT || (err == Z_BUF_ERROR && stream.avail_in == 0))
        return Z_DATA_ERROR;
    return err;
}

err = inflateEnd(&stream);
return stream.total_out;
} 
```

但我总是在 c# 端收到一个空值。
编辑：错误是 z_data_error。
edit2：如果输入数据损坏，则为 Z_DATA_ERROR。

我需要将 byte[] 数组编组为非托管指针吗？或者可能是什么问题？我的输入数组无效吗？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:47:33.723

经过越来越多的研究，我觉得一切都在这里，错误一定在别处。

# android - 我们如何在 Android 中启用 RS232 通信的事件？

> ID：10282329
> 
> 赞同：1
> 
> 时间：2012-04-23T14:16:50.073
> 
> 标签：android, linux-kernel, linux-device-driver

当在串行通信 (RS 232) 上检测到某些数据流量时，是否可以将事件单独发送给用户空间应用程序？基本上我不希望我的 Android 阻塞线程一直在等待来自串行端口的数据，而是可以简化这以在检测到数据后向用户应用程序触发事件以检查来自串行端口的数据。

请让我知道是否可以使用其他方法来处理 Android/Linux 设备驱动程序中的这种情况。

# c++ - c++ 默认参数值

> ID：10282330
> 
> 赞同：0
> 
> 时间：2012-04-23T14:16:56.200
> 
> 标签：c++, default, default-value

我想确保这个方法调用是正确的。我有三个参数，一个默认为空 QString。

```
double funcApply(double* param, QString expr=NULL); 
```

电话是

```
funcApply(param); 
```

在函数体中，我测试第二个参数 expr 是否为 NULL，然后继续进行。此调用会按预期运行还是行为异常？

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:19:17.403

这取决于您期望它的行为方式。

从技术上讲，`expr`不会，`NULL`因为它不是指针，但它的内容将为空。（假设你的意思是[QString](http://qt-project.org/doc/qt-4.8/qstring.html)）。

当然，如果你有类似的东西`#define QString char*`，那么`expr`将会是`NULL`，但我怀疑你有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:30:58.103

> 我在编译时出现错误“重新定义默认参数”和“对重载函数的模糊调用”

出于某种原因，一旦给出默认参数，就不允许您重复它。如果您的头文件中有默认值，例如：

```
double funcApply(double* param, QString expr=NULL); 
```

实施不得重复，但应类似于

```
double funcApply(double* param, QString expr /*=NULL*/)
{
    // do something
} 
```

如果您实际测试`expr`参数`NULL`并执行两件不同的事情，则最好使用两个单独的函数来执行这些“不同的事情”

```
 double funcApply(double* param);
 double funcApply(double* param, QString expr); 
```

并避免这个问题。

# c++ - 绕过ld查找

> ID：10282331
> 
> 赞同：1
> 
> 时间：2012-04-23T14:16:59.047
> 
> 标签：c++, gcc, shared-libraries, ld, search-path

将我的工具链安装在与其供应商请求不同的目录中后，我一直在运行一些较小的问题，通过适当地设置 COMPILER_PATH、C_INCLUDE_PATH、CPLUS_INCLUDE_PATH 和 LIBRARY_PATH 变量可以轻松解决。

但是，有一个问题我似乎无法轻易回避：

```
beo-it@bsrv01:/tmp/async$ xscale-linux-g++ -fPIC -DBOOST_ASIO_DISABLE_EPOLL -I/var/lib/c++/boost/boost_1_48_0/target/arm-linux-4.4.2/include -oasync main.cpp -L/var/lib/c++/boost/boost_1_48_0/target/arm-linux-4.4.2/lib/static -pthread -lboost_system -lboost_thread
/var/toolchains/arm-linux/4.4.2/arm-linux-4.4.2/arm-linux/bin/ld: cannot find /usr/local/arm-linux-4.4.2/lib/be/libpthread.so.0
collect2: ld returned 1 exit status 
```

我不确定为什么`ld`要通过绝对路径查找库，但这正是这里的情况。有什么办法可以规避这种行为并为其提供共享库的正确路径？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:01:32.157

我唯一能想到的是将符号链接放在它实际看起来的位置，但将其指向正确的文件。

# c# - 为翻译的页面生成本地化 URL

> ID：10282343
> 
> 赞同：1
> 
> 时间：2012-04-23T14:17:42.900
> 
> 标签：c#, asp.net, .net, localization, c1-cms

根据[本地化的工作原理](http://docs.composite.net/HTML/C1-Localization/How-localization-works)，我可以翻译页面并为每种语言提供不同的 URL。

教程中的示例：

*   `http://butterflysite.co.uk/en-GB/Home/contact/Newoffice.aspx`（英语）
*   `http://vlindersite.nl/nl-NL/thuis/contact/NieuwKantoor.aspx`（荷兰语）

我现在的问题是：假设我知道我目前使用的语言，我如何找出我的页面的 URL 标题在 C# 中是什么？

使用 C1 API 创建指向当前语言页面的正确链接的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:53:00.737

变体 1

```
 public string GetPageUrl(Guid pageId, CultureInfo locale)
    {
        using(var conn = new DataConnection(PublicationScope.Published, locale))
        {
            var pageNode = new SitemapNavigator(conn).GetPageNodeById(pageId);
            return pageNode != null ? pageNode.Url : null;
        }
    } 
```

变体 2

```
 public string GetPageUrl(Guid pageId, CultureInfo locale)
    {
        var pageUrlData = new PageUrlData(pageId, PublicationScope.Published, locale);
        return PageUrls.BuildUrl(pageUrlData, UrlKind.Public, new UrlSpace());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:21:09.897

atticae，看看 CurrentPageNode - @CurrentPageNode.MenuTitle

# ios - Objective c - 如何在后退按钮上显示较短的 viewController 名称

> ID：10282345
> 
> 赞同：1
> 
> 时间：2012-04-23T14:17:50.420
> 
> 标签：ios, objective-c, uiviewcontroller, uinavigationcontroller, back-button

我几乎可以肯定有一天我看到有一些属性可以设置一个较短的 viewController 名称，以便在它推动另一个 viewController 并成为后退 viewController 时显示在后退按钮中。有人可以提醒我这是什么属性吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T14:24:02.450

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
    {
    if (self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil]) {
        // Custom initialization
    self.title = @"First View Controller";

    // this defines the back button leading BACK TO THIS controller
    UIBarButtonItem *backBarButtonItem = [[UIBarButtonItem alloc]
      initWithTitle:@"Back"
      style:UIBarButtonItemStyleBordered
      target:nil
      action:nil];
    self.navigationItem.backBarButtonItem = backBarButtonItem;
    [backBarButtonItem release];
    }
    return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:21:34.247

self.navigationItem.title = @"短名称";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:21:46.417

我很想知道“正确”的答案是什么。我个人更改了最后一个控制器的名称（如根），它有效。

```
-(void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
    [super navigationController:navigationController willShowViewController:viewController animated:animated];
    UIViewController *root = [self.navigationController.viewControllers objectAtIndex:0];
    if (something)
        root.title = @"Apply";
    else
        root.title = "Root"
} 
```

这`self.navigationItem.title`在所有方面都相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:23:07.263

您需要`backBarButtonItem`从`navigationItem`您的父视图控制器中自定义。

# python - 在 Python 中使用正则表达式清理数字中的逗号

> ID：10282346
> 
> 赞同：2
> 
> 时间：2012-04-23T14:17:51.247
> 
> 标签：python, regex, csv

我一直在热切地搜索这个，但我无法真正缩小范围。我正在尝试解释一个值的 csv 文件，这是一种足够常见的行为。但我受到超过一千个值的惩罚，即引用和涉及逗号。我已经通过使用 csv 阅读器解决了这个问题，它从行中创建了一个数字列表，但是之后我必须选择逗号。

出于纯粹的学术原因，是否有更好的方法来使用正则表达式编辑字符串？从`08/09/2010,"25,132","2,909",650`到`08/09/2010,25132,2909,650`。

（如果你喜欢 Vim，基本上我想把 Python 放在这上面 `:1,$s/"\([0-9]*\),\([0-9]*\)"/\1\2/g`：:D）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:35:02.417

使用`csv`模块进行第一阶段解析，正则表达式仅用于查看结果是否可以转换为数字。

```
import csv, re
num_re = re.compile('^[0-9]+[0-9,]+$')
for row in csv.reader(open('input_file.csv')):
  for el_num in len(row):
    if num_re.match(row[el_num]):
      row[el_num] = row[el_num].replace(',', '') 
```

...尽管根本不使用正则表达式可能会更快：

```
for row in ([item.replace(',', '') for item in row]
            for row in csv.reader(open('input_file.csv'))):
  do_something_with_your(row) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:28:25.433

我认为您正在寻找的是，假设逗号只会出现在数字中，并且这些条目将始终被引用：

```
import re

def remove_commas(mystring):
    return re.sub(r'"(\d+?),(\d+?)"', r'\1\2', mystring) 
```

更新：在下面添加**cdarke**的评论，以下内容适用于任意长度的数字：

```
import re

def remove_commas_and_quotes(mystring):
    return re.sub(r'","|",|"', ',', re.sub(r'(?:(\d+?),)',r'\1',mystring)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:29:45.947

Python 有一个正则表达式模块“re”：

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)

但是，在这种情况下，您可能需要考虑使用“分区”功能：

```
>>> s = 'some_long_string,"12,345",more_string,"56,6789",and_some_more'
>>> left_part,quote_mark,right_part = s.partition(")
>>> right_part
'12,345",more_string,"56,6789",and_some_more'
>>> number,quote_mark,remainder = right_part.partition(")
'12,345' 
```

string.partition("character") 将字符串分成 3 部分，第一次出现的“字符”左侧的内容、“字符”本身和右侧的内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-05T06:12:27.523

这是一个简单的正则表达式，用于从任意长度的数字中删除逗号：

```
re.sub(r'(\d+),?([\d+]?)',r'\1\2',mystring) 
```

# python - Python 桌面应用程序

> ID：10282347
> 
> 赞同：5
> 
> 时间：2012-04-23T14:17:52.120
> 
> 标签：python, django, desktop-application, web-frameworks

大约 2 年以来，我一直在使用 wxPython 开发几个小型科学程序，这些程序我分发给了许多同事。我喜欢 wxPython，而且我已经非常熟悉它了，但是有几件事让我抓狂（不是因为 wxPython，实际上我还想继续使用它）：

1）我在不同的操作系统上有很多用户。我知道 wxPython 是跨平台的，但我已经没有勇气和时间将我所有的小软件（以后还会有更多）移植到不同的操作系统。特别是我没有使用其中的一些（Windows7、Mac），所以我很难解决问题和用户请求。

2）我们更新了很多软件（因为新的想法总是来自用户和我们自己），这意味着我要再次生成所有独立软件，上传它们并让用户再次卸载和安装。讨厌...

我已经在考虑切换到 Web 框架，但存在一些问题。首先，许多用户喜欢离线使用我的软件，例如当他们旅行或没有互联网时。其次，我们在某些数据库中有一些数据，这些数据永远不会出现在服务器上。这都是关于专利的，并且总是会成为讨论的，所以我更喜欢让我的一些程序成为一个独立的桌面应用程序来简化事情。其他人可以上网，没问题。

所以，总的来说，我喜欢基于浏览器的解决方案，因为每个人都有浏览器。我看到有些人将 Django 项目移植为独立的桌面应用程序，我觉得这不是一个坏主意。我对 Camelot 也很感兴趣，但我认为这更适用于数据库。Camelot 仅对我的一些工具有用，它们是数据库搜索和提取程序。但其他人根本不使用数据库。

谁能建议我，我的工具有什么好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:35:15.447

您可以使用例如烧瓶来提供 UI。

因此，只需像往常一样编写应用程序，但没有 GUI（通常你应该无论如何都应该分离逻辑和 GUI）。之后使用例如[Flask](http://flask.pocoo.org/)（我真的很喜欢这个微框架，但也有其他的像[Bottle](http://bottlepy.org/docs/dev/)）以网站的形式编写 UI。您可以在本地运行这个网站（这是一行代码：`app.run()` 然后在网络服务器中使用 URL 打开它`http://localhost:5000`）或在网络服务器上运行，例如使用 apache 或 nginx。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:36:46.077

在 Python中使用[Flex](http://www.adobe.com/devnet/flex/articles/flex_django.html)怎么样？您的界面是可移植的（因为 Flex 创建 Flash 文件）；你可以使用 Python 来连接接口。

此外，您可以决定（基于您的应用程序）将它们部署在 Web 上或使用 Flex 将它们包装为本机可执行文件。

您唯一的挑战是，如果您决定为 Windows 打包应用程序，以确保正确打包 Python（如果需要的话）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:10:45.060

This might not fit with how your users use your application but one option would be to make a Linux virtual machine (Virtualbox supports most common operating systems as hosts) and distribute that instead.

This would give you a single target to develop against and, as a bonus if you looked into the update mechanism of your chosen distribution (Apt, Yum etc.) you should be able to add your own server as a source and have the VM keep itself updated without your users needing to do anything.

# apache-flex - Flex 4.6 时间选择器组件？

> ID：10282348
> 
> 赞同：2
> 
> 时间：2012-04-23T14:17:53.820
> 
> 标签：apache-flex, air, timer

Adobe flex4.6 或 AIR 中是否有任何组件用作时间选择器。我需要获取时间作为输入。提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T16:31:49.560

您可以将两个数字步进器放在一起。

```
<s:NumericStepper id="dateHour" minimum="0" maximum="23" value="{_someDate.getHours()}" />
<s:NumericStepper id="dateMinute" minimum="0" maximum="59" valueFormatFunction="{leadingZero}" value="{_someDate.getMinutes()}"/> 
```

和前导零函数，

```
public static function leadingZero(value:Number):String
{
    if(value < 10){
        return "0" + value;
    }
    return value.toString();    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-30T05:49:32.920

请查看 Flex3 控件。 [http://joelhooks.com/2008/10/11/flex-date-and-time-datetime-picker-control/](http://joelhooks.com/2008/10/11/flex-date-and-time-datetime-picker-control/)

# javascript - 用于 DOM 查询的 HTML 中的最佳属性顺序

> ID：10282350
> 
> 赞同：6
> 
> 时间：2012-04-23T14:18:00.510
> 
> 标签：javascript, jquery, html, performance, dom

是否存在使 DOM 查询更快的属性顺序？例如在元素的开头\结尾。

当我向上遍历 DOM 时，将属性放在最后会更好，反之，当我向下遍历 DOM 时会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T03:24:02.097

不，浏览器解析 HTML 并构造 DOM。此时页面的文字来源不再重要，因此 DOM 查询不受顺序的影响。

但是我个人喜欢把我的 id 放在第一位，然后是 class，然后是其他任何东西。为了可读性。

# c# - 如何处理空的套接字缓冲区

> ID：10282351
> 
> 赞同：1
> 
> 时间：2012-04-23T14:18:01.893
> 
> 标签：c#, .net, sockets, exception-handling, network-programming

我正在编写一个套接字服务器，我注意到如果它收到一个空的套接字缓冲区，它将导致套接字异常。在接收调用中，如何检测和处理空缓冲区并在套接字关闭之前将 -1 响应发送回客户端？

代码：

```
try
{
    byte[] byteBuffer = new Byte[1024];
    int size = m_clientSocket.Receive(byteBuffer);
    if (size > 0)
    {
        ParseReceiveBuffer(byteBuffer, size);
    }
    else
    {
        m_clientSocket.Send(BitConverter.GetBytes(-1));
    }
}
catch (SocketException ex)
{
    if (ex.SocketErrorCode == SocketError.WouldBlock ||
        ex.SocketErrorCode == SocketError.IOPending ||
        ex.SocketErrorCode == SocketError.NoBufferSpaceAvailable)
    {
        // socket buffer is probably empty, wait and try again
        Thread.Sleep(1000);
    }
    // connection was unexpectively closed
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:41:11.470

假设您正在使用 TCP 层。

像 Send 和 Receive 这样的套接字函数实际上并不是通过网络发送或接收数据。它们与 OS 套接字层通信以从网络层推送或弹出数据。因此，当您从应用程序方法 Send 运行时，它将放入队列数据以发送到 OS 网络层。只有在该操作系统实际发送它并可能会遇到一些问题之后，它才会存储错误并将其直接抛出到您的应用程序的下一个特定套接字方法调用上。

这就是为什么只有在上一个可能失败或在上一个和当前呼叫网络之间出现一些错误（例如连接丢失）时，您才会在下一次呼叫时收到 SocketException。

当将收到异常时，您将始终没有收到任何内容（零字节）。由于连接丢失（在大多数 (99%) 情况下），您无法在异常后发送任何内容。

客户端也将收到异常，该异常将显示有关连接丢失的错误消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:39:46.770

在适当的使用中使用 DataAvailable 子句。我建议您编写完整的类和辅助方法来执行所有这些常规操作。并且 thread.sleep(1000) 不是必需的，因为侦听器将等待您的命令行被执行。另一种方法是使用开发的套接字库，您可以轻松地模拟服务器和客户端角色。我知道超级套接字，您可以自定义和开发自己的协议。

# ip - 使用 traceroute 从我的计算机访问客户端网站时遇到问题

> ID：10282352
> 
> 赞同：0
> 
> 时间：2012-04-23T14:18:02.600
> 
> 标签：ip, wireless, ping, traceroute

我已经在客户网站上工作了几个月，但我突然在访问它时遇到了很多麻烦。

铬告诉我：

此网页不可用 Google Chrome 与 [client] 的连接尝试被拒绝。该网站可能已关闭，或者您的网络可能未正确配置。

该网站可在任何其他计算机上使用，无论是否使用相同的无线连接。

我的 traceroute 显示到 localhost 的一跳，然后它停止了。有趣的是，如果我删除站点加载的“www”，并且没有 www 的跟踪路由正常工作。

我试过重置我的无线适配器。我已经在多个无线网络上对此进行了测试，但它在我的计算机上不起作用。

几天前我遇到了这个问题，它神秘地工作了大约一天，然后今天早上问题又出现了。

我在 Chrome 中没有任何代理设置。我试过循环适配器、更新租约和尝试其他路由器。刚才我也在以太网上试过，问题依旧。该问题在用户和浏览器上也仍然存在。

我没有注意到任何其他网站受到影响。我目前正在使用 Mac。如果我使用 Parallels 使用 Windows，连接到站点或正确跟踪都没有问题。

有没有人有任何故障排除建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:30:46.647

您是否尝试过刷新机器上的路由表？

```
/usr/bin/sudo /sbin/route flush 
```

# c++ - 是否可以调整 unique_ptr 以在纯 c 中使用？

> ID：10282353
> 
> 赞同：1
> 
> 时间：2012-04-23T14:18:04.950
> 
> 标签：c++, c, unique-ptr

是否可以将 unique_ptr 用于普通 c？

也许在调用 malloc/free 时有一种方法可以模拟对自制“构造函数/析构函数”的调用？

可行吗？或者这只是一个愚蠢的想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:21:06.567

“智能指针”的全部意义在于在销毁时自动执行某些任务。由于 C 没有析构函数，因此除了显式调用函数外，没有其他方法可以实现这一点——但这就是您在 C 中释放内存的方式。

您可以创建一个需要释放的指针列表，并通过一个函数调用同时完成所有这些操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:35:28.233

不，不是纯 C。您可以使用`cleanup`GCC 属性执行类似的操作（它不是标准的）：

```
#include <stdio.h>

void scope_leaving(int* p) 
{
    printf("Leaving scope.\n");
    // this is essentially your "destructor"
}

int main(int argc, char* argv[]) 
{
    printf("Before x is declared.\n");
    {
        int x __attribute__((cleanup (scope_leaving)));
        x = 42;
    }
    printf("Scope was left.\n");
} 
```

如您所料，输出是这样的：

```
在 x 被声明之前。
离开范围。
范围被留下。

```

有了这个，你可以实现一个模拟 RAII 语义的指针`unique_ptr`，也许使用一个宏来更容易声明。不仅`unique_ptr`如此，但我不确定您是否想要除 RAII 之外的其他方面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T14:25:53.673

在第二次阅读中，没有什么可以阻止您的 C 结构以`void(*)()`指针开头。如果你有一个`custom_malloc(size_t size, void(*deleter)()`设置指针的，你`custom_free(void*)`可以随后调用那个删除器。这类似于`virtual`C++ 的析构函数。但是，第二部分`std::unique_ptr`是一个`delete`'d 复制构造函数。你不能在 C 中做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:26:09.147

为了实现 unique_ptr，您需要两件事：

1.  转让所有权的转让运营商；
2.  当 unique_ptr 超出范围时的析构函数。

为了实现 (1)，由于 C 不允许您进行函数重载，因此您需要自己“纪律”并始终调用自定义赋值函数或宏。C 不能强迫您始终转移所有权。

至于（2），GCC 提供了一个[扩展](http://gcc.gnu.org/onlinedocs/gcc/Variable-Attributes.html#Variable-Attributes)：您可以分配一个“清理”函数，一旦变量超出范围，就会调用该函数。这可用于为您的 unique_ptr 实现析构函数。

# facebook - Facebook Like 按钮默认文本

> ID：10282354
> 
> 赞同：0
> 
> 时间：2012-04-23T14:18:11.293
> 
> 标签：facebook, facebook-like

我的网站上有一个 FB Like 按钮，但是当它被点击时，您的 FB 供稿上生成的“此链接摘要”文本是错误的。

当站点的当前 URL 上没有任何内容时（我刚刚注册），我生成了类似按钮。现在，当我点击“Like”时，我的 Facebook 提要中显示的文字描述是这样的：

`"Learn about HAIKU.LI from this free business profile provided by Network Solutions"`

该文本显示在我的页面标题下方（正确显示为`"Find Haiku in Your Tweets"`）。

如何清除默认描述文本？我试过重新生成按钮无济于事。该网络解决方案文本肯定不会出现在我的网站上。是否有某种`og`标签用于描述？

# 编辑

该页面的网址是：

[俳句.li](http://www.haiku.li)

按钮的html：

`.fb-like{"data-font" => "arial", "data-href" => "http://www.haiku.li", "data-layout" => "button_count", "data-send" => "false", "data-show-faces" => "false", "data-width" => "100"}`

该`head`部分中的元标记：

`%meta{:content => "Find Haiku In Your Tweets!", :property => "og:title"}/ %meta{:content => "website", :property => "og:type"}/ %meta{:content => "http://www.haiku.li", :property => "og:url"}/ %meta{:content => "http://www.haiku.li/assets/logo.png", :property => "og:image"}/ %meta{:content => "Haiku.li", :property => "og:site_name"}/ %meta{:content => "[my FB id]", :property => "fb:admins"}/`

除了它添加了额外的描述之外，一切似乎都正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:24:02.150

facebook 故事中使用的文本（和图像、标题等）是从页面本身提取的。

Facebook 会删除 URL 并使用返回的数据来获取创建故事所需的信息。当然，您可以通过使用[Open Graph Protocol](http://developers.facebook.com/docs/opengraph/)并定义 og 标签来控制该数据。您可以使用[调试器（AKA Linter）](http://developers.facebook.com/tools/debug)检查从您的站点返回的数据以及 facebook 如何“看到”它。

在[Like Button](http://developers.facebook.com/docs/reference/plugins/like/)文档中是这样说的（这很重要，人们有时会错过它）：

> **Facebook 什么时候抓取我的页面？**
> 
> Facebook 需要抓取您的页面以了解如何在网站周围显示它。
> 
> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。
> 
> 爬虫的用户代理是：“facebookexternalhit/1.1 (+http://www.facebook.com/externalhit_uatext.php)”

* * *

# 编辑

好的，我想我知道问题出在哪里。查看您的代码，您既没有[描述元标记](http://en.wikipedia.org/wiki/Meta_element#The_description_attribute)也没有*og:description*标记，因为 facebook 可能采用“我的域注册商提供的默认描述”。您应该添加两个标签。

这是一个猜测。

# slider - Nivo Slider - 一个网页上的两个滑块

> ID：10282357
> 
> 赞同：0
> 
> 时间：2012-04-23T14:18:17.220
> 
> 标签：slider, nivo-slider

我从 dev7 studio 的示例中复制了如何在一个网页上插入两个 nivo 滑块的代码，但我不确定如何调整每个滑块的单独设置，例如如何让第一个滑块只使用箭头，而第二个滑块仅使用项目符号。另外，我将如何根据箭头和项目符号的位置调整每个滑块的高度和宽度。

这是style.css：

```
/*=================================*/
   /* Nivo Slider Demo
   /* November 2010
   /* By: Gilbert Pellegrom
   /* http://dev7studios.com
   /*=================================*/

   /*====================*/
   /*=== Reset Styles ===*/
   /*====================*/
   html, body, div, span, applet, object, iframe,
  h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, font, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td {
    margin:0;
    padding:0;
    border:0;
    outline:0;
    font-weight:inherit;
    font-style:inherit;
    font-size:100%;
    font-family:inherit;
    vertical-align:baseline;
}
body {
    line-height:1;
    color:black;
    background:white;
}
table {
    border-collapse:separate;
    border-spacing:0;
}
caption, th, td {
    text-align:left;
    font-weight:normal;
}
blockquote:before, blockquote:after,
q:before, q:after {
    content:"";
}
blockquote, q {
    quotes:"" "";
}
/* HTML5 tags */
header, section, footer,
aside, nav, article, figure {
    display: block;
}

/*===================*/
/*=== Main Styles ===*/
/*===================*/
body {
    font:14px/1.6 Georgia, Palatino, Palatino Linotype, Times, Times New Roman, serif;
    color:#333;
    background:#eee;
}

a, a:visited {
    color:blue;
    text-decoration:none;
}
a:hover, a:active {
    color:#000;
    text-decoration:none;
}

#dev7link {
    position:absolute;
    top:0;
    left:50px;
    background:url(images/dev7logo.png) no-repeat;
    width:60px;
    height:67px;
    border:0;
    display:block;
    text-indent:-9999px;
}

.default #slider {
    margin:100px auto 0 auto;
    width:960px; /* Make sure your images are the same size */
    height:310px; /* Make sure your images are the same size */
}
.default #slider2 {
    margin:100px auto 0 auto;
    width:280px; /* Make sure your images are the same size */
    height:65px; /* Make sure your images are the same size */
}
slider-wrapper,
lider-wrapper {
    margin-top:150px;
}

/*====================*/
/*=== Other Styles ===*/
/*====================*/
.clear {
    clear:both;
} 
```

这是默认的.css：

```
/*
Skin Name: Nivo Slider Default Theme
Skin URI: http://nivo.dev7studios.com
Skin Type: flexible
Description: The default skin for the Nivo Slider.
Version: 1.0
Author: Gilbert Pellegrom
Author URI: http://dev7studios.com
*/

.default .nivoSlider {
    position:relative;
    background:#fff url(loading.gif) no-repeat 50% 50%;
    margin-bottom:50px;
    -webkit-box-shadow: 0px 1px 5px 0px #4a4a4a;
    -moz-box-shadow: 0px 1px 5px 0px #4a4a4a;
    box-shadow: 0px 1px 5px 0px #4a4a4a;
}
.default .nivoSlider img {
    position:absolute;
    top:0px;
    left:0px;
    display:none;
}
.default .nivoSlider a {
    border:0;
    display:block;
}

.default .nivo-controlNav {
    position:absolute;
    left:70px;
    bottom:25px;
    margin-left:-40px; /* Tweak this to center bullets */
    z-index:300;

}

.default .nivo-controlNav a {
    display:block;
    width:22px;
    height:22px;
    background:url(bullets.png) no-repeat;
    text-indent:-9999px;
    border:0;
    margin-right:1px;
    float:left;

}

.default .nivo-controlNav a.active {
    background-position:0 -22px;
}

.default .nivo-directionNav a {
    display:block;
    width:30px;
    height:30px;
    background:url(arrows.png) no-repeat;
    text-indent:-9999px;
    border:0;
}
.default a.nivo-nextNav {
    background-position:-30px 0;
    right:15px;
}
.default a.nivo-prevNav {
    left:15px;
}

.default .nivo-caption {
    font-family: Helvetica, Arial, sans-serif;
}
.default .nivo-caption a {
    color:#fff;
    border-bottom:1px dotted #fff;
}
.default .nivo-caption a:hover {
    color:#fff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T14:38:18.713

要在您的网页上使用多个滑块，您首先需要将 HTML 和 CSS 中的`#ID`元素更改为`.CLASSES`，因为我们现在正在创建多个滑块...

如果您正在考虑更改每个滑块的外观，这将与您的`HTML`内联样式以及皮肤（默认、浅色、深色等）的输出方式有关。只需将其更改为`demo.html`文件中所需的皮肤。它应该看起来像这样：

> div class="slider-wrapper 主题-默认"

现在将“theme-default”替换为例如*theme-light*。

要修改默认皮肤滑块中的项目符号，您需要使用：

> .default .nivo-controlNav` 和 .default .nivo-controlNav 一个 {

要修改默认皮肤滑块中的箭头，您需要使用：

> .default .nivo-directionNav a {

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T15:51:53.750

每个滑块的 ID 应该不同，然后可以为每个滑块单独编写初始化和设置。

```
<div id="slider" class="nivoSlider">
    <img src="slide1.jpg" alt="" />
    <img src="slide2.jpg" alt="" />
    <img src="slide3.jpg" alt="" />
    <img src="slide4.jpg" alt="" />
</div>
<script type="text/javascript">
    $('#slider').nivoSlider({
        effect: 'slideInLeft',          // Specify sets like: 'fold,fade,sliceDown'
        slices: 1,                      // For slice animations
        boxCols: 8,                     // For box animations
        boxRows: 4,                     // For box animations
        animSpeed: 500,                 // Slide transition speed
        pauseTime: 3000,                // How long each slide will show
        startSlide: 0,                  // Set starting Slide (0 index)
        directionNav: true,             // Next & Prev navigation
        controlNav: true,               // 1,2,3... navigation
        controlNavThumbs: false,        // Use thumbnails for Control Nav
        pauseOnHover: true,             // Stop animation while hovering
        manualAdvance: false,           // Force manual transitions
        prevText: 'Prev',               // Prev directionNav text
        nextText: 'Next',               // Next directionNav text
        randomStart: false,             // Start on a random slide
        beforeChange: function(){},     // Triggers before a slide transition
        afterChange: function(){},      // Triggers after a slide transition
        slideshowEnd: function(){},     // Triggers after all slides have been shown
        lastSlide: function(){},        // Triggers when last slide is shown
        afterLoad: function(){}         // Triggers when slider has loaded
    });
</script> 
```

每个 jQuery 函数中的 ID 部分应该根据您用于标识 HTML 中每个滑块的两个不同 ID 不同。

```
$('#slider').nivoSlider({ 
```

这意味着您将拥有此代码的两份副本，每个滑块一份。

每个滑块的不同 CSS 样式可以通过 CSS 文件中引用的这些 ID 获得。请注意，滑块容器的 .nivoSlider 类在这两种情况下都很常见，因为它连接到滑块工作所需的一般样式。

# android - 打开应用程序时Android会广播吗？

> ID：10282365
> 
> 赞同：3
> 
> 时间：2012-04-23T14:18:55.350
> 
> 标签：android, broadcast

例如，如果我想知道 Youtube 什么时候打开，有没有与之相关的广播？我当然知道我可以轮询 logcat 消息来检查活动。但是我可以通过广播来做到这一点，因为它不会那么耗电。

此链接似乎表明不可能：< [如何在 Android 中跟踪应用程序使用情况？如何检测活动何时启动？](https://stackoverflow.com/questions/9012361/how-to-track-app-usage-in-android-how-to-detect-when-an-activity-is-launched)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:30:03.387

> 在android中，打开某些应用程序时是否有任何广播？

不，出于明显的隐私原因。

# tfs - Team Foundation Server 是否支持工作项的“打包”？

> ID：10282367
> 
> 赞同：0
> 
> 时间：2012-04-23T14:19:00.660
> 
> 标签：tfs, workitem

考虑这种情况：

*   项目经理向开发团队订购了 10 个错误修复。
*   10 个工作项被添加到`Team Foundation Server`.
*   然后将这些工作项放入订单中。

是否可以自动化最后一步？像创建一袋工作项目然后可以将其拉入`Word`文档之类的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:05:20.217

听起来[WordToTFS](http://msmvps.com/blogs/vstsblog/archive/2011/11/15/publishing-requirements-from-word-to-tfs-via-wordtotfs.aspx)可以帮助您。

它尚未完全自动化，但您可以导入特定的工作项列表并将它们合并到文档中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T19:22:09.673

密切关注即将推出的 ALM Rangers Word4TFS 插件：http: [//blogs.msdn.com/b/willy-peter_schaub/archive/tags/tfswp/](http://blogs.msdn.com/b/willy-peter_schaub/archive/tags/tfswp/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T22:46:05.740

商业产品：[TeamSpec](http://www.teamsystemsolutions.com/teamspec/features/microsoft-word-integration.aspx)

可能值得下载试用版并查看它是否符合您的要求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-05T12:52:04.520

您可以使用以下工具连接 MS Word 和 TFS：

[http://www.smartoffice4tfs.com/pages/smart-word-features](http://www.smartoffice4tfs.com/pages/smart-word-features)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T16:09:17.790

TFS 客户端包括可以在 Excel 中打开工作项的插件 - 您可以将 Excel 表格嵌入 Word 文档中。通过这种方式，您可以将已知工作项查询的结果提取到 Word 文档中。

（虽然不确定这是否真的是一个编程问题......）

# php - Cakephp 设置::sort()

> ID：10282379
> 
> 赞同：1
> 
> 时间：2012-04-23T14:20:00.713
> 
> 标签：php, cakephp, cakephp-1.3

我使用的是 cakephp 1.3。我试图使用 Set::sort() 函数对数组进行排序，但不工作..关于如何做到这一点的任何想法？下面是我使用的数组。

```
Array (
    [0] => Array
        (
            [Group] => Array
                (
                    [name] => Team A
                )

            [Members] => Array
                (
                    [0] => Array
                        (
                            [name] => George
                            [Code] => Array
                                (
                                    [name] => C
                                )

                        )

                    [1] => Array
                        (
                            [name] => Hall
                            [Code] => Array
                                (
                                    [name] => A
                                )

                        )

                    [2] => Array
                        (
                            [name] => Mike
                            [Code] => Array
                                (
                                    [name] => B
                                )

                        )

                )

        ) 
```

我使用这个对数组进行排序：

```
$data = Set::sort($data, '{n}.Members.{n}.Code.name', 'asc'); 
```

我期待这样的输出：

```
Array
(
    [0] => Array
        (
            [Group] => Array
                (
                    [name] => Team A
                )

            [Members] => Array
                (
                    [0] => Array
                        (
                            [name] => Hall
                            [Code] => Array
                                (
                                    [name] => A
                                )

                        )

                    [1] => Array
                        (
                            [name] => Mike
                            [Code] => Array
                                (
                                    [name] => B
                                )

                        )

                    [2] => Array
                        (
                            [name] => George
                            [Code] => Array
                                (
                                    [name] => C
                                )

                        )

                )

        ) 
```

排序不生效。我该怎么做？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:00:59.703

仅使用`Set::sort()`它是不可行的。你可以这样：

```
 $result =  array();
    foreach($a as $arr) {
        $res = Set::sort($arr['Member'], '{n}.Code.name', 'asc');
        $result[] = array(
                    'Group' => $arr['Group'],
                    'Member' => $res
                );            
    }
    pr($result); 
```

# opengl - gluLookAt eyeZ 没有按预期工作

> ID：10282382
> 
> 赞同：1
> 
> 时间：2012-04-23T14:20:07.680
> 
> 标签：opengl, glu

我在使用 gluLookAt 的 eyeZ 值时遇到了一些问题。

我想象它的工作方式就像将相机移得更远，从而缩小视野中的物体。

我有一个简单的设置，在 3d 空间中绘制一个简单的形状，通过`glDrawElements`100x100x100 正交，其中 0、0、0 是宇宙的中心。对象位于 0, 0, 0。

我正在努力做到这一点，因此当您滚动鼠标滚轮时，您会离对象更远/更近。以下是 glulookat 的名称。

```
float eyeX = 0;
float eyeY = 0;
float eyeZ = differenceInMouseWheel();

float centerX = 0;
float centerY = 0;
float centerZ = 0;

float upX = 0;
float upY = 1;
float upZ = 0;

gluLookAt(eyeX, eyeY, eyeZ, centerX, centerY, centerZ, upX, upY, upZ); 
```

这里唯一改变的是eyeZ。

效果很奇怪，我滚动了大约 10 秒，然后突然一半的对象消失了。从那里越来越多的它消失了。这可能是因为相机超出了 50 z 的距离限制，但我不明白为什么物体不像在 3D 空间中那样缩放。

也许我误解了中心值是如何工作的？

我也尝试过申请`differenceInMouseWheel()`，`centerZ`但没有任何改变，我假设中心值只是这样 glu 可以得到一个方向，仅此而已。

也许向上向量应该改变？我现在不知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:59:45.873

您使用的是透视投影矩阵还是正交投影矩阵？如果您不使用透视矩阵，则当您移动相机时，对象的大小不会发生变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:20:19.347

您正在使用[正交投影](http://en.wikipedia.org/wiki/Orthographic_projection)。这意味着无论距离有多远，您的对象总是看起来具有相同的大小。但是，一旦您的对象到达远剪切平面，您的对象就会消失，这是您长时间滚动时所看到的。

您有两个选择：要么使用[透视投影](http://en.wikipedia.org/wiki/3D_projection#Perspective_projection)，要么通过修改正交投影矩阵来实现缩放，如下所示：

让放大为 (0, 1]，并让视口为设置为当前视口的矩形。让 near 为您的近剪裁平面距离，far 为您的远剪裁平面距离。

```
glOrtho(zoom * viewport.width / 2, zoom * viewport.width / 2, zoom * viewport.height / 2, zoom * viewport.height / 2, near, far); 
```

# uml - uml 中的主键/外键

> ID：10282383
> 
> 赞同：7
> 
> 时间：2012-04-23T14:20:10.117
> 
> 标签：uml

我正在根据我用[MySQL 工作台](http://www.mysql.com/products/workbench/)生成的 ERD 做一个 UML 模型。但是现在我对类图中的主键和外键表示有疑问。

在传统的 UML 图中，我们应该包括主键作为每个类的属性吗？例如，`id_user`或`id_list`? 关于外键？这些被忽略为属性但反映为关联？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:14:57.980

首先：为什么要在 UML 中绘制它？如果您已经有一个 ERD，您想用 ERD 没有给您的 UML 类图来说明什么附加/替代属性？

为什么？因为 UML 是一种工具。假设该图仅供人类消费（即您不是从中生成代码），那么您应该使用 UML 来公开您尝试传达的信息。

作为通用标准，UML 没有说明您如何形式化身份（PK/FK）。UML 遵循每个对象都具有隐式标识的 OO 习惯用法 - 因此您不需要显式指定它。因此，在最简单的情况下，您可以：

*   将PK属性列为普通属性；
*   完全忽略 FK 属性。

如果这满足您的建模需求，那么您就完成了。

作为第二个改进，您可以使用 ocl`isUnique()`约束标记 PK 属性，再次忽略 FK。

另一种选择是使用[Executable UML](http://en.wikipedia.org/wiki/Executable_UML)的规则。它直接在类图上表示 PK（'Identifiers'} 和 FK（'reference attributes'}）。因此它最接近捕获 ERD 中的所有内容。

总而言之：没有 UML 强加的正确答案。这一切都取决于您想与图表交流什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T03:48:34.677

您可以使用/创建“数据库配置文件”来使用此信息注释您的 UML 模型。如果没有配置文件，您可以使用 OCL 来指定唯一性约束，而普通关联应该足以表示在数据库级别将转换为外键的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T22:24:05.433

您可以使用 EclipseUML Omondo 试用并反转您的数据库。

您将获得所需的信息，然后可以将其复制到免费或开源工具中。

# ruby-on-rails - Rails 3 + Devise：如何从管理员角色更改其他用户的密码？

> ID：10282385
> 
> 赞同：3
> 
> 时间：2012-04-23T14:20:18.217
> 
> 标签：ruby-on-rails, devise, passwords

我已经使用 Devise 开发了一个 Rails 3 应用程序，用于注册和登录控制。我希望能够将任何用户的密码修改为我提供的密码。我想出的解决方案（我还没有机会测试它）是使用我选择的密码进行虚假的新注册，将密码从表记录复制到有问题的用户记录，然后删除我在数据库中生成的虚假记录。这不是最优雅的事情，但这是我所拥有的。我等待更好的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:23:05.713

我可能会误解这个问题，但它应该很简单；

```
@user = User.find(<some id>)
@user.update_attributes(:password => 'anewpassword', :password_confirmation => 'anewpassword') 
```

那么他们的密码将是'anewpassword'

# java - 从不允许提取页面的安全 pdf 中提取数据

> ID：10282388
> 
> 赞同：0
> 
> 时间：2012-04-23T14:20:28.507
> 
> 标签：java, security, pdf

我正在设计一个实用程序，它可以从 pdf 文件的第一页（作为输入提供）创建图像。该代码使用`jpedal`库来创建 png 图像。

以下是我的代码。

```
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.image.BufferedImage;
import java.io.File;
import javax.imageio.ImageIO;
import org.jpedal.PdfDecoder;

public abstract class PDFUtil 
{
    private static final String IMAGE_FORMAT = "png";

    //My Function
    public static BufferedImage getImageForPdfData(File file, int pageNumber) throws Exception
    {   
        PdfDecoder decoder;

        decoder = new PdfDecoder();
        decoder.openPdfFile(file.getPath());
        return decoder.getPageAsImage(pageNumber);  //Error is here..   
    }

    public static void main(String[] args) throws Exception {

        File f = new File("C:/Documents and Settings/shashank.kadne/Desktop/Test.pdf");
        BufferedImage bi = PDFUtil.getImageForPdfData(f,1);
        System.out.println(bi);
        PDFUtil.getScaledImageWithHeight(bi, new File("output1.png"), 350,240);
    }
} 
```

上述代码适用于任何不安全的标准 pdf 文件。我有一个 pdf，其中安全策略限制用户进行页面提取。当我为此 pdf 运行我的实用程序时，它给了我以下错误。

例外：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException
    at java.lang.System.arraycopy(Native Method)
    at org.jpedal.io.DecryptionFactory.decrypt(Unknown Source)
    at org.jpedal.io.ArrayDecoder.setObjectArrayValue(Unknown Source)
    at org.jpedal.io.ArrayDecoder.setValue(Unknown Source)
    at org.jpedal.io.ArrayDecoder.readArray(Unknown Source)
    at org.jpedal.io.ObjectDecoder.setValue(Unknown Source)
    at org.jpedal.io.ObjectDecoder.readObjectDataValues(Unknown Source)
    at org.jpedal.io.ObjectDecoder.readDictionaryAsObject(Unknown Source)
    at org.jpedal.io.PdfFileReader.readObject(Unknown Source)
    at org.jpedal.io.PdfReader.readObject(Unknown Source)
    at org.jpedal.objects.acroforms.rendering.DefaultAcroRenderer.createDisplayComponentsForPage(Unknown Source)
    at org.jpedal.PDFtoImageConvertor.convert(Unknown Source)
    at org.jpedal.PdfDecoder.getPageAsImage(Unknown Source)
    at org.jpedal.PdfDecoder.getPageAsImage(Unknown Source)
    at jpedaldemo.PDFUtil.getImageForPdfData(PDFUtil.java:54)
    at jpedaldemo.PDFUtil.main(PDFUtil.java:142) 
```

你认为可能是什么问题？安全限制是否会产生问题？

# ms-access - Access 2007 使用选项卡将多个子表单链接到主表单的最佳方式

> ID：10282394
> 
> 赞同：0
> 
> 时间：2012-04-23T14:21:05.723
> 
> 标签：ms-access, subforms

我有一个包含 10 个选项卡的主表单，每个选项卡都有一个子表单控件。从所有 10 个选项卡开始作为子窗体，主窗体只有几个附加控件，其中一个是主键。所有子表单的 Recordsource 都包含此主键。显示 OK 但无法添加新记录，因为主窗体上的记录导航不允许移动到新记录，并且主窗体上的新记录按钮不起作用。尝试更改设计，以便第一个选项卡上的所有控件都是主窗体而不是子窗体的一部分。更改了所有子表单记录集，以便它们在查询中不包含 PK，但仅通过主/子属性链接。现在它可以让我导航到新记录（尽管它会在您尝试输入之前提示输入新的 ID 参数），但不会让我编辑现有记录。

那么正确的方法是什么？子窗体上的记录导航打开但在主窗体上关闭？PK 是否作为对记录源的查询的一部分？所有子表单或将第一个选项卡作为主表单的一部分的好主意？有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:40:16.500

主记录的主键 (PK) 应与子记录的外键 (FK) 匹配。

```
tblCustomer tblOrder
+----------------+ +----------------+
| PK 客户ID |1--+ | PK OrderID |
+----------------+ | +----------------+
| | +--∞| FK 客户 ID |
+----------------+ | |
                         +----------------+

```

`Link Master Fields`在本例中，订单子表单控件的属性必须是`CustomerID`（tblCustomer 中的 PK），`Link Child Fields`属性`CustomerID`也必须是（tblOrder 中的 FK）。

# javascript - 使用 jQuery 检测 div 内的元素

> ID：10282396
> 
> 赞同：2
> 
> 时间：2012-04-23T14:21:13.160
> 
> 标签：javascript, jquery, html, dom

根据您的经验，检测 div 中是否存在元素的最佳方法是什么？

我目前正在使用这个：

```
if (($('.parentDiv').width()) > 0){
    //Do something
} 
```

必须有一个更优雅的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:22:29.650

**如果空意味着甚至没有文本节点：**

```
if ($('.parentDiv').contents().length){
    //Do stuff      
} 
```

或者：

```
$('.parentDiv:not(:empty)') // which is nice... 
```

`.contents` [文档](http://api.jquery.com/contents/)：

> 描述：获取匹配元素集中每个元素的子元素，**包括文本和注释节点。**

如果您只关心元素而不关心文本节点：

```
if ($('.parentDiv').children().length){
    //Do stuff      
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:29:44.527

可能不是您想要的，但考虑到您的要求至少有点混乱，您可以考虑容器内是否有任何东西：元素、文本等等。

假设你有一个空的 div：

```
<div class="parentDiv"></div>​ 
```

则`$(".parentDiv").html().length == 0`表示其空性。

如果 div 不为空：

```
<div class="parentDiv"> </div>​
<div class="parentDiv"><div></div></div>​ 
```

然后`$(".parentDiv").html().length`将指示其占用情况（在这些情况下分别返回 1 和 11。）

如果您只想检查元素或特定元素，那么`$(".parentDiv").children()`将是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T14:23:20.403

假设您只关心元素（而不是文本节点），您可以检查元素是否有[`children`](http://api.jquery.com/children/)：

```
if($('.parentDiv').children().length) {
    //Do stuff
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T14:23:06.033

使用`children()`功能

```
$('.parentDiv').children() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T14:24:21.277

```
if ( $( '.parentDiv' ).children().length > 0 )
{
     // do something
} 
```

# matlab - [~, ...] 上的 Matlab 语法错误

> ID：10282397
> 
> 赞同：3
> 
> 时间：2012-04-23T14:21:14.800
> 
> 标签：matlab, syntax-error

我有一个工作的 MATLAB 代码，它在另一台机器上运行良好，但是当我在自己的计算机上运行它时，它检测到以下语法错误：

```
Expression or statement is incorrect--possibly unbalanced (, {, or [. 
```

这是我的代码：

```
 [~,x] = min(A); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:22:43.987

您使用的是哪个版本的 MATLAB？

`~`丢弃不需要的返回值的语法仅在 R2009b 中引入。

编辑：有 2008a。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T14:23:46.473

您的 MATLAB 版本较旧，无法识别“~”语法。将 ~ 更改为“垃圾”或其他变量名，以提醒自己您不关心结果并且代码应该可以正常运行。

或者将您的 MATLAB 更新到最新版本。

# python - Python：获取文件的数字签名信息

> ID：10282399
> 
> 赞同：0
> 
> 时间：2012-04-23T14:21:17.577
> 
> 标签：python, digital-signature

我希望利用 Python 创建一个脚本，该脚本在安装后检查指定文件的数字签名和版权信息。

有没有人有任何想法？我试过使用 win32file.GetFileAttributes 和其他类似的方法，但我没有得到我正在寻找的信息。

理想情况下，我希望尽可能多地使用数字签名。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:55:10.750

您可以通过 win32com 使用 CAPICOM 接口从二进制可执行文件中获取签名信息。这些库通常不会默认安装，但可以[从 MSDN 免费下载](http://www.microsoft.com/downloads/details.aspx?FamilyID=860EE43A-A843-462F-ABB5-FF88EA5896F6&amp;displaylang=e&displaylang=en)。

以下是如何在 python 中使用 CAPICOM 的示例：

```
import win32com.client
s=win32com.client.gencache.EnsureDispatch('capicom.signedcode',0)
s.FileName=r'J:\Program Files\Adobe\Flash Player\AddIns\airappinstaller\airappinstaller.exe'
signer = s.Signer
print (signer.Certificate.IssuerName, signer.Certificate.SerialNumber) 
```

# postgresql - 如何为 Play 2.0 设置 PostgreSQL？

> ID：10282402
> 
> 赞同：14
> 
> 时间：2012-04-23T14:21:19.590
> 
> 标签：postgresql, scala, playframework-2.0

我想为我的 Play 应用配置 PostgreSQL，但出现以下错误：

```
! Internal server error, for request [GET /] ->

java.util.concurrent.TimeoutException: Futures timed out after [300000] milliseconds    at
akka.dispatch.DefaultPromise.ready(Future.scala:834)
~[akka-actor.jar:2.0]   at
akka.dispatch.DefaultPromise.result(Future.scala:838)
~[akka-actor.jar:2.0]   at akka.dispatch.Await$.result(Future.scala:74)
~[akka-actor.jar:2.0]   at
play.core.ReloadableApplication.get(ApplicationProvider.scala:108)
~[play_2.9.1.jar:2.0]   at
play.core.server.Server$class.sendHandler$1(Server.scala:59)
[play_2.9.1.jar:2.0]    at
play.core.server.Server$$anonfun$getHandlerFor$4.apply(Server.scala:89)
[play_2.9.1.jar:2.0] [error] application - 

! @6a64i2p5o - Internal server error, for request [GET /] ->

play.api.PlayException: Not initialized [?]     at
play.api.PlayException$.apply(Exceptions.scala:122)
~[play_2.9.1.jar:2.0]   at
play.core.ReloadableApplication.<init>(ApplicationProvider.scala:94)
~[play_2.9.1.jar:2.0]   at
play.core.server.NettyServer$$anonfun$mainDev$1.apply(NettyServer.scala:165)
~[play_2.9.1.jar:2.0]   at
play.core.server.NettyServer$$anonfun$mainDev$1.apply(NettyServer.scala:164)
~[play_2.9.1.jar:2.0]   at
play.utils.Threads$.withContextClassLoader(Threads.scala:17)
~[play_2.9.1.jar:2.0]   at
play.core.server.NettyServer$.mainDev(NettyServer.scala:163)
~[play_2.9.1.jar:2.0] 
```

我使用以下配置文件：

**应用程序.conf**

```
db.default.url="postgres://play:play@localhost:9000/Play_Playground_DB"
db.default.user=play
db.default.password=play
db.default.driver=org.postgresql.Driver 
```

**项目/Build.scala**

```
val appDependencies = Seq(
  "postgresql" % "postgresql" % "9.1-901.jdbc4"
) 
```

我设置`Play_Playground_DB`并可以通过终端和命令访问它`psql Play_Playground_DB`。

问题的根本原因可能是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-23T16:19:31.780

很可能这是问题所在：

```
db.default.url="postgres://play:play@localhost:9000/Play_Playground_DB" 
```

[play doku](http://www.playframework.org/documentation/2.0/JavaDatabase)说， “ db.default.url”是一个普通的 JDBC-URL。你的值有两个问题：

*   它不是 PostgreSQL 识别的格式。[在此处](http://jdbc.postgresql.org/documentation/head/connect.html)查找允许的格式。
*   与`...default...`您一起重新定义默认数据源。默认情况下，除非您执行更多步骤，否则这会带来麻烦。

在您的情况下，有效的 PostgreSQL URL 可能如下所示：

```
jdbc:postgresql://localhost:9000/Play_Playground_DB 
```

**但是：_**确定您的数据库在端口 9000 上运行吗？你说`psql Play_Playground_DB`适合你。因此我认为您的端口应该是默认端口 5432。那么这个 URL 是正确的：

```
jdbc:postgresql://localhost/Play_Playground_DB 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-01T21:09:31.993

在我的 OSX 上，我从 homebrew 安装了 PostgreSQL，当前版本是 9.3.4

上面描述的连接字符串对我不起作用，因为它们使用的是*postresql*数据库名称。当且仅当我指定如下时，我的连接才建立：

```
db.default.url="postgres://user:password@localhost/MyDbName" 
```

请注意，它是*postgres*而不是*postgresql*。

# java - 在签名的 jnlp 小程序中创建新文件

> ID：10282403
> 
> 赞同：0
> 
> 时间：2012-04-23T14:21:32.057
> 
> 标签：java, file, upload, jnlp

我需要将用户目录中的一些图像文件保存到服务器上的项目文件夹中，但我找不到有效的解决方案。在用户 pc 中选择文件并将其复制到服务器的最简单方法是什么？我可以使用什么 url 来访问这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:14:55.813

运行 FTP(S) 服务器，并使用 Java [FTP 客户端](http://commons.apache.org/net/ "FTP客户端")连接和上传文件。您可以将 FTP 主目录设为服务器上 wwwroot 的子文件夹，这样您就可以通过“example.com/diagrams/mydiagram”访问上传的文件。

但请注意，客户端必须有 FTP 密码才能连接，因此您的用户可以上传他们想要的任何内容（包括恶意脚本）。如果您不信任您的用户，您将需要每个用户的身份验证和上传文件的验证，这将需要服务器端代码。

# c# - 无法将 System.LinQ.IOrderedEnumerable 类型隐式转换为 MyClassCollection。存在隐式转换（您是否缺少演员表？）

> ID：10282406
> 
> 赞同：2
> 
> 时间：2012-04-23T14:21:38.260
> 
> 标签：c#, c#-4.0

我的项目中有以下课程。

```
[Serializable]
public class BaseEntityCollection<T> : List<T> where T : BaseEntity, new()
{

    protected BaseEntityCollection()
    {
    }

}

[Serializable]
public abstract class BaseEntity
{
    protected BaseEntity()
    {
    }
}

public class MyClassCollection : BaseEntityCollection<MyClass>
{
} 
```

* * *

## 问题领域

```
MyClassCollection objList = 
MyClassName.MyFunctionName().OrderByDescending(i => i.MyPropertyName); 
```

## 此行给出编译错误。

```
Cannot implicitly convert type System.LinQ.IOrderedEnumerable<MyClass>
to MyClassCollection. An implicit conversion exists(are you missing a
cast?) 
```

## 编辑

**我无权更改架构设计。**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:31:23.407

目前尚不清楚为什么您希望它起作用，但您可以使用：

```
MyClassCollection objList = new MyClassCollection();
objList.AddRange(MyClassName.MyFunctionName()
                            .OrderByDescending(i => i.MyPropertyName)); 
```

就我个人而言，我不喜欢一开始就派生新`List<T>`的集合，也不喜欢从泛型类派生非泛型类*只是*为了固定类型参数，但如果这是你必须接受的架构......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:23:50.920

```
var orderedItems = MyClassName.MyFunctionName().OrderByDescending(i => i.MyPropertyName);
MyClassCollection objList = new MyClassCollection(orderedItems); 
```

添加时表达式的结果`OrderByDescending`是实现的框架类，`IOrderedEnumerable<T>`不能隐式转换为`MyClassCollection`. 您可以添加一个隐式转换，或者只是将 any 传递`IEnumerable<T>`给您将从 继承的构造函数`List<T>`，如上所示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:30:47.050

你想创建新的集合，还是对返回的集合进行排序？如果是以后，那么通常忘记`OrderByDescending`和 LINQ 并使用[List.Sort](http://msdn.microsoft.com/en-us/library/3da4abas.aspx)代替。

~~问题是调用 OrderByDescending 将创建新的内部 LINQ 对象，该对象实现`IOrderedEnumerable`. 然后，您将需要创建一些真正的集合，例如`List`or `Array`。~~

要解决您的问题，您应该像这样覆盖 IEnumerable construrcor `BaseEntityCollection<t>`：

```
public BaseEntityCollection(IEnumerable<T> items):base(items)
{
} 
```

并称它为：

```
 MyClassCollection objList = new MyClassCollection(MyClassName.MyFunctionName().OrderByDescending(i => i.MyPropertyName)); 
```

~~但我真的会质疑你的整个设计。在开始使用它之前，您应该阅读更多关于 LINQ 的信息，因为您尝试使用它的方式是错误的。~~

# ruby-on-rails - Rails 路由上的命名空间和资源

> ID：10282414
> 
> 赞同：2
> 
> 时间：2012-04-23T14:22:02.157
> 
> 标签：ruby-on-rails, resources, namespaces, routes

我正在开发一个带有后台（**admin**）的应用程序，该应用程序仅限于某些用户，以便修改内容。另一方面，我有一个可供客户端访问的网络服务（ **api ）。**

所以我在命名空间中分离了这两个部分，并且我意识到，当我将脚手架用于诸如问题之类的资源时，生成的控制器假定资源是*admin::questions*，但这不是我想要的。

我希望有：

```
/admin/questions to handle my questions (controller admin/questions_controller.rb)

/api/questions to serve my questions  (controller api/questions_controller.rb) 
```

但在这两种情况下，它都是相同的模型。

我应该继续使用命名空间还是在我的路线中使用模块？这是否违背了 Rails 资源的理念？

感谢您的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:30:36.543

通过运行，`rails generate scaffold -h`我看到了一个名为`--skip-namespace`. 那是你要找的吗？

从文档中：

```
Usage:
  rails generate scaffold NAME [field[:type][:index] field[:type][:index]] [options]

Options:
    [--skip-namespace]                        # Skip namespace (affects only isolated applications) 
```

# java - 运行项目时出错

> ID：10282417
> 
> 赞同：1
> 
> 时间：2012-04-23T14:22:25.400
> 
> 标签：java, jakarta-ee, playframework

```
An unexpected error occured caused by exception IllegalArgumentException:
Expecting collection type [[Lmodels.Question;] 
```

当我在浏览器上运行整个项目时，这个错误出现在 localhost 中。我不明白这个错误，我检查了以某种方式链接到类 Question 的所有其他类，但没有任何错误，整个代码没有任何编译错误。

这是模型问题的类：

```
 package models;

    import play.*;
    import play.db.jpa.*;

    import javax.persistence.*;

    import java.util.*;

    @Entity
    public class Question extends Model{
    public int ExerciseID;
    public String theQuest;
    public int marks;

    public String [] choices;
    @ManyToOne
    public Exercise myExercise;
    @OneToOne (mappedBy="question")
    public ModelAn modelAnswer;

    public Question (Exercise e, String quest,String [] aofc,int mark){

        if(myExercise.noOfQuest<50){
            int j = 0;
        if (quest != null){
        for(int i = 0;i<myExercise.questions.length;i++){

            String tempquestion = myExercise.questions[i].theQuest;   
        if (quest.equals(tempquestion)){

            j++;
        }}
           if(j == 0){
            myExercise  = new Exercise(e.CreatorID,e.tutID,e.noOfQuest);
            myExercise.setPeopleAnswered(e.getPeopleAnswered());

            theQuest = quest;
            while (aofc.length<=5){
                this.choices[0] = aofc[0];
                this.choices[1] = aofc[1];
                this.choices[2] = aofc[2];
                this.choices[3] = aofc[3];
                this.choices[4] = aofc[4];

            }
            this.marks = mark;
            }

            }

        else{
            System.out.println("no question was entered please enter a       question");
        }}else{
            System.out.println("the max no of questions was exceeded");
        }

    }

    public void addChoices(Question theQuest,String choice1 , String choice2, String   choice3, String choice4, String choice5){

        String [] tempchoices = new String[5];
        tempchoices[0] = choice1;
        tempchoices[1] = choice2;
        tempchoices[2] = choice3;
        tempchoices[3] = choice4;
        tempchoices[4] = choice5;
        int j = 0;
        for(int i = 1; i <= 5;i++){

            if(tempchoices[i] != null){
                j++;
            }
        }
        if(j<2){
            System.out.println("the options entered are less than 2");
        }
        else{

            theQuest.choices[0] = choice1;
            theQuest.choices[1] = choice2;
            theQuest.choices[2] = choice3;
            theQuest.choices[3] = choice4;
            theQuest.choices[4] = choice5;
        }

    }

     public ModelAn getModelAnswer() {
      return modelAnswer;
     }

    public void setModelAnswer(ModelAn modelAnswer) {
                    this.modelAnswer = modelAnswer;
     }

        public String getTheQuest() {
            return theQuest;
        }

        public void setTheQuest(String theQuest) {
            this.theQuest = theQuest;
        }

        public int getMarks() {
            return marks;
        }

        public void setMarks(int marks) {
            this.marks = marks;
        }

        public String[] getChoices() {
            return choices;
        }

        public void setChoices(String[] choices) {
            this.choices = choices;
        }

        public Exercise getMyExercise() {
            return myExercise;
        }

        public void setMyExercise(Exercise myExercise) {
            this.myExercise = myExercise;
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:46:30.733

此错误意味着您将类型字段注释`Question[]`为`@OneToMany`或`@ManyToMany`某处。

您应该使用集合类型，例如`List<Question>`，因为`@OneToMany`and`@ManyToMany`只能放在集合类型的字段上。

# c# - 在没有数据库连接的情况下使用实体框架类

> ID：10282418
> 
> 赞同：4
> 
> 时间：2012-04-23T14:22:27.917
> 
> 标签：c#, asp.net, database, winforms, entity-framework

我有一个奇怪的情况。我已经直观地创建了一个数据模型并从中生成了一个数据库。该项目被两个项目引用：

*   ASP .NET 应用程序。
*   WinForms 应用程序。

ASP .NET 应用程序直接处理数据库，而我需要 WinForms 应用程序通过 Web 应用程序与数据库交互。

我创建了一个名为 API.aspx 的页面，并使用 HTTP POST 发送值并以 XML 格式获取结果。

但是，由于 WinForms 应用程序仍然需要使用数据模型类，所以我在使用它们而不创建数据库对象的情况下遇到了问题。

在这种情况下使用什么好的策略？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:26:03.080

如果您使用松散耦合实现了代码（[请参阅存储库模式）](http://martinfowler.com/eaaCatalog/repository.html)，那么您可以创建一个数据库存根，该存根将返回虚拟数据（或内存数据），直到您准备好插入实际的 EF 框架。

这通常是创建一个干净的关注点分离的好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:55:17.953

这听起来像是 SOA 实现的候选，而不是让 windows 窗体应用程序直接与 Web 应用程序通信：

*   [http://en.wikipedia.org/wiki/Service-oriented_architecture](http://en.wikipedia.org/wiki/Service-oriented_architecture)
*   [http://msdn.microsoft.com/en-us/library/aa480021.aspx](http://msdn.microsoft.com/en-us/library/aa480021.aspx)

# mysql - MySQL - 将一个表的行连接为另一个表的列

> ID：10282431
> 
> 赞同：2
> 
> 时间：2012-04-23T14:23:04.473
> 
> 标签：mysql

真的希望有人可以帮助解决这个问题。我确信有更好的方法来构建我的数据，但由于时间限制，如果可能的话，最好为当前结构提供解决方案。

我有 2 个具有以下结构的表：

表格1

```
id  field1
1   quest1  
2   quest2
3   quest3 
```

表 2

```
id  uid  quest1  quest2  quest3
1   18   yes     no      yes
2   27   yes     no      no 
```

基本上，我需要以以下格式返回表 1 和表 2 的一行（基于 uid）：

```
id  field1  field2
1   quest1  yes
2   quest2  no
3   quest3  yes 
```

这可能吗？在网上看，我不断遇到数据透视表和交叉表查询，但它们似乎无法实现我所追求的……除非我错了？（我可能是大声笑）。

感谢任何人为此提供的任何帮助。

马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:25:13.860

MySQL 不支持数据透视表/交叉表查询。

有时会因此而受到批评，但辩护是它是一个特性，而不是缺陷:-) 透视查询更多地属于表示层，因为它们创建的不是数据库意义上的表。所以它们更多地属于从数据库中提取数据的应用层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:21:53.343

```
SELECT t1.*, CASE t1.field1
  WHEN 'quest1' THEN t2.quest1
  WHEN 'quest2' THEN t2.quest2
  WHEN 'quest3' THEN t2.quest3
END AS field2
FROM t1, t2
WHERE t2.uid = 18; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/ea03b/1/0)上查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:05:20.153

```
select t1.id, t2.field1, t2.field2 
from table1 t1
inner join (
    select id, 'quest1' as field1, quest1 as field2 from table2
    union all
    select id, 'quest2' as field1, quest2 as field2 from table2
    union all
    select id, 'quest3' as field1, quest3 as field2 from table2
) t2u on t1.id = t2.id
where t2.uid = 18 
```

# javascript - 一页上有多个 Google 地图实例

> ID：10282432
> 
> 赞同：5
> 
> 时间：2012-04-23T14:23:05.540
> 
> 标签：javascript, jquery, google-maps-api-3, instances

我有一个表格，可让您通过谷歌地图预览坐标。用户可以向表单动态添加多组坐标。坐标的数量是可变的。

我用这段代码遍历变量，我觉得这与加载谷歌地图的多个实例有关。第一张地图加载得很好，但第二张地图只加载了最左手角的一个图块。如果我更新表格上的坐标，那么所有地图只在最左手角显示一个图块。

```
 while (tempClone != cloneCount) {   
var lat_lng = new google.maps.LatLng(lat, lng);              

                options = {
                    zoom: 14,
                    center: lat_lng,
                    panControl: false,
                    zoomControl: false,
                    mapTypeId: google.maps.MapTypeId.TERRAIN
                };

                map[tempClone] = new google.maps.Map(document.getElementById("map"+tempClone), options);

                var infowindow = new google.maps.InfoWindow({
                    content: inputBL[tempClone][0][1] + 'Entrance'
                }); 

                marker[tempClone] = new google.maps.Marker({
                    position: lat_lng,
                    map: map[tempClone],
                    title: inputBL[tempClone][0][1]
                }); 
} 
```

感谢您的任何帮助！亚伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T00:45:48.317

看起来您在调整地图大小时遇到​​了麻烦。据我回忆，如果地图容器大小发生变化，就会发生这种情况。您可以在显示地图后尝试触发调整大小吗？

```
google.maps.event.trigger(map, "resize"); 
```

# c++ - 我知道 pantheios 是线程安全的，但它是进程间安全的吗？

> ID：10282442
> 
> 赞同：0
> 
> 时间：2012-04-23T14:23:20.417
> 
> 标签：c++, thread-safety, interprocess, pantheios

我知道 pantheios 是线程安全的，我已经很好地使用了它，但它是进程间安全的吗？

这意味着不同的模块（不同的exes）可以同时安全地登录到同一个日志文件吗？

如果是这样，我需要为它设置任何特殊设置吗？

顺便说一句：我没有为 pantheiso 设置任何特别的东西，默认情况下它已经是线程安全的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:33:01.593

接收器写入的并发性不是由库控制，而是由执行写入的后端控制。我怀疑大多数（任何？）库存后端默认情况下是进程间安全的 - 如果您希望您可以实现自己的后端，但它可能会破坏您首先选择 Pantheios 的性能。

# java - Hibernate、Spring 和外键

> ID：10282445
> 
> 赞同：7
> 
> 时间：2012-04-23T14:23:31.233
> 
> 标签：java, spring, hibernate, annotations, foreign-keys

我正在研究一个休眠的春季项目，以帮助我了解这两者的基础知识。我遇到了一个问题，我希望能够将外键添加到我的表中。

我一直在浏览互联网以获取有关此主题的信息，但我无法找到适合我需要的东西。

我有两节课：

```
 Schools
 Classes 
```

现在我想将主键从学校映射到班级。

这是我现在的代码：

```
@ManyToOne
@JoinColumn(name = "SCHOOL_ID", table = "SCHOOL")
private School school; 
```

对于我的 getter 和 setter：

```
public long getSchool() {
    return school.getId();
}

public void setSchool(long schoolId) {
    this.school.setId(schoolId);
} 
```

这是要走的路吗？还是我完全看错了。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T14:27:55.980

您走在正确的轨道上，尽管处理实际对象而不是 id 更好，例如

```
@ManyToOne
@JoinColumn(name = "SCHOOL_ID", table = "SCHOOL")
private School school;

public School getSchool() {
    return school;
}

public void setSchool(School school) {
    this.school=school;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:26:34.890

将其更改为：

```
public long getSchool() {
    return this.school;
}

public void setSchool(School school) {
    this.school = school;
} 
```

# html - 有没有办法限制移动视口的大小？

> ID：10282446
> 
> 赞同：3
> 
> 时间：2012-04-23T14:23:43.487
> 
> 标签：html, css, mobile, viewport

我的网站移动版本的视口存在一些问题。我的所有元素都在页面内显示并正确调整大小，但是页面延伸得比内容结尾更远。

有没有办法限制我的视口高度？或者这可能是我没有看到的另一个问题？

经过进一步测试，此错误仅发生在 Android 移动设备上。Android视口有任何已知问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:49:09.773

`height=device-height,`从中 删除

```
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

<meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0" /> 
```

这是我在你的代码中找到的

如果您`height=device-height,`将网站垂直放置在屏幕上

可能你需要

```
<meta name="viewport" content="width=device-width"> 
```

只要

# css - 为什么 background:url('') 在 IE6 中不起作用？

> ID：10282447
> 
> 赞同：1
> 
> 时间：2012-04-23T14:23:43.897
> 
> 标签：css, internet-explorer

我在我的项目中使用了 url()，但它没有在 IE 6 中显示图片？IE6 不支持 url() 吗？我应该如何解决问题？
代码如下：

```
<img class="avatar" style="background:url('./avatar.jpg') no-repeat scroll 5px 7px transparent;" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:26:05.563

使用`background-image`：

```
<img class="avatar" style="background-image:url('./avatar.jpg')" /> 
```

另请注意，`)`最后你有一个额外的。

还要确保这实际上是背景图像的问题。如果设置背景颜色会发生什么？那你看到了吗？可能是布局问题导致它不出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:26:29.773

整个标签看起来不对。我会做这样的事情：

```
<img class="avatar" style="background-image: url('./avatar.jpg');" alt="" /> 
```

我还会检查路径是否正确。

- 编辑 -

经过测试，我注意到这样的路径`'./avatar.jpg'`永远行不通。它正在寻找`.`与您编写样式的文件位于同一目录中的文件夹。您有名为 的文件夹`.`吗？我不这么认为。这是一个非法的目录名称。

# asp.net - asp.net mvc 3：使用图像管理模型的最佳方法

> ID：10282454
> 
> 赞同：5
> 
> 时间：2012-04-23T14:24:07.943
> 
> 标签：asp.net, asp.net-mvc-3, image, model, upload

我正在尝试找到管理具有关联图像的模型的最佳方法。

我不知道将图像保存在数据存储中是否更好

```
class MyModel {
  ...
  public byte[] ImageData { get; set; }
  ...
} 
```

或保存 URL 并将图像上传到文件系统

```
class MyModel {
  ...
  public string ImageUrl { get; set; }
  ...
} 
```

最重要的是我想在创建或编辑模型记录时管理图像。

我不想要一个专门的模型/视图/控制器来上传/保存图像到服务器。我想管理链接到数据库中特定实体的图像。

问候，贾科莫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:37:17.577

您的第一种方法很好，因为您将图像存储在数据库中。您仍然需要某种辅助函数，它会生成一个指向呈现/显示图像的处理程序的 URL。

您可以选择**同时**存储图像 url，在这种情况下，您不一定需要辅助方法。

*如果您将图像存储在数据库之外*（例如在文件系统上），那么您显然不需要`ImageData`字节字段......

# android - 如何访问 Android 设备上的可移动存储？

> ID：10282457
> 
> 赞同：6
> 
> 时间：2012-04-23T14:24:15.327
> 
> 标签：android, android-sdcard

我正在寻找一种方法来检测和访问各种 Android 设备（三星、摩托罗拉、LG、索尼、HTC）上的可移动 sd 卡。

我还需要与 2.2 兼容，所以`Environment.isExternalStorageRemovable()`对我来说不可用。

摩托罗拉有自己的图书馆，对于三星我可以检测到`/external_sd/`

我对其他人一无所知。例如，我`/_ExternalSD/`在一些 LG 上看到过，但即使删除了 SD，该目录仍然存在。

一个额外的问题：是否会`ACTION_MEDIA_MOUNTED`为他们中的任何一个广播意图

对此的任何提示都会非常有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T20:02:29.577

这是我用来查找设备上所有 SD 卡的类；内置和可拆卸。我一直在冰淇淋三明治上使用它，但它应该在 2 倍的水平上工作。

```
public class GetRemovableDevice {

private final static String TAG = "GetRemoveableDevice";

public GetRemovableDevice() {
}

public static String[] getDirectories() {
    MyLog.d(TAG, "getStorageDirectories");
    File tempFile;
    String[] directories = null;
    String[] splits;
    ArrayList<String> arrayList = new ArrayList<String>();
    BufferedReader bufferedReader = null;
    String lineRead;

    try {
        arrayList.clear(); // redundant, but what the hey
        bufferedReader = new BufferedReader(new FileReader("/proc/mounts"));

        while ((lineRead = bufferedReader.readLine()) != null) {
            MyLog.d(TAG, "lineRead: " + lineRead);
            splits = lineRead.split(" ");

            // System external storage
            if (splits[1].equals(Environment.getExternalStorageDirectory()
                    .getPath())) {
                arrayList.add(splits[1]);
                MyLog.d(TAG, "gesd split 1: " + splits[1]);
                continue;
            }

            // skip if not external storage device
            if (!splits[0].contains("/dev/block/")) {
                continue;
            }

            // skip if mtdblock device

            if (splits[0].contains("/dev/block/mtdblock")) {
                continue;
            }

            // skip if not in /mnt node

            if (!splits[1].contains("/mnt")) {
                continue;
            }

            // skip these names

            if (splits[1].contains("/secure")) {
                continue;
            }

            if (splits[1].contains("/mnt/asec")) {
                continue;
            }

            // Eliminate if not a directory or fully accessible
            tempFile = new File(splits[1]);
            if (!tempFile.exists()) {
                continue;
            }
            if (!tempFile.isDirectory()) {
                continue;
            }
            if (!tempFile.canRead()) {
                continue;
            }
            if (!tempFile.canWrite()) {
                continue;
            }

            // Met all the criteria, assume sdcard
            arrayList.add(splits[1]);
        }

    } catch (FileNotFoundException e) {
    } catch (IOException e) {
    } finally {
        if (bufferedReader != null) {
            try {
                bufferedReader.close();
            } catch (IOException e) {
            }
        }
    }

    // Send list back to caller

    if (arrayList.size() == 0) {
        arrayList.add("sdcard not found");
    }
    directories = new String[arrayList.size()];
    for (int i = 0; i < arrayList.size(); i++) {
        directories[i] = arrayList.get(i);
    }
    return directories;
} 
```

}

MyLog.d 是一个扩展 Log.d 的跟踪类 - 它可以被删除。

该类读取 /proc/mounts/ 并且：

1.  检查路径名是否为内部 sdcard 目录
2.  检查它是否是块设备
3.  跳过 mtdblock 设备
4.  跳过未安装的任何内容
5.  跳过安全目录和 asec 目录
6.  确保它存在，是一个目录，并且可以读/写

如果所有这些都匹配，则假定您有一个 sdcard 并将路径添加到数组列表中。它返回一个路径名的字符串数组。

要调用 getDirectories 函数，请编写类似于以下内容的代码：

```
String[] sdcardDirectories = GetRemoveableDevice.getDirectories(); 
```

返回的路径可用于创建用户选择列表、扫描文件等。

最后，这是来自模拟器测试的两行 MyLog.d（第二行是模拟器 sdcard）：

09-19 15:57:12.511: D/GetRemoveableDevice(651): lineRead: /dev/block/mtdblock2 /cache yaffs2 rw,nosuid,nodev 0 0

09-19 15:57:12.511: D/GetRemoveableDevice(651): lineRead: /dev/block/vold/179:0 /mnt/sdcard vfat rw,dirsync,nosuid,nodev,noexec,uid=1000,gid=1015 ,fmask=0702,dmask=0702,allow_utime=0020,codepage=cp437,iocharset=iso8859-1,shortname=mixed,utf8,errors=remount-ro 0 0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-30T16:59:56.050

基于 Howards 课程，我做了一些修改以使其在 Galaxy S3 上工作。

1.  Environment.getExternalStorageDirectory() 返回 S3 上的内部存储。
2.  可移动存储不一定安装在 /mnt 下
3.  可移动媒体必须有 vfat 文件系统

_

```
public static String getDirectory() {
        Log.d(TAG, "getStorageDirectories");
        File tempFile;
        String[] splits;
        ArrayList<String> arrayList = new ArrayList<String>();
        BufferedReader bufferedReader = null;
        String lineRead;

        try {
            arrayList.clear(); // redundant, but what the hey
            bufferedReader = new BufferedReader(new FileReader("/proc/mounts"));

            while ((lineRead = bufferedReader.readLine()) != null) {
                Log.d(TAG, "lineRead: " + lineRead);
                splits = lineRead.split(" ");

                // skip if not external storage device
                if (!splits[0].contains("/dev/block/")) {
                    continue;
                }

                // skip if mtdblock device
                if (splits[0].contains("/dev/block/mtdblock")) {
                    continue;
                }

                // skip if not in vfat node
                if (!splits[2].contains("vfat")) {
                    continue;
                }

                // skip these names
                if (splits[1].contains("/secure")) {
                    continue;
                }

                if (splits[1].contains("/mnt/asec")) {
                    continue;
                }

                // Eliminate if not a directory or fully accessible
                tempFile = new File(splits[1]);
                if (!tempFile.exists()) {
                    continue;
                }
                if (!tempFile.isDirectory()) {
                    continue;
                }
                if (!tempFile.canRead()) {
                    continue;
                }
                if (!tempFile.canWrite()) {
                    continue;
                }

                // Met all the criteria, assume sdcard
                return splits[1];
            }

        } catch (FileNotFoundException e) {
        } catch (IOException e) {
        } finally {
            if (bufferedReader != null) {
                try {
                    bufferedReader.close();
                } catch (IOException e) {
                }
            }
        }

        return null;
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-04T05:05:38.493

基于 Howards 课程，我进一步修改了课程，注意到我能找到的几部手机和平板电脑上的所有外部可移动存储都是使用卷安装守护程序vold 安装的。

```
 // skip if not external storage device
            if (!splits[0].contains("vold")) {
                continue;
            }

            if (splits[1].contains("/mnt/asec")) {
                continue;
            }

            // Eliminate if not a directory or fully accessible
            tempFile = new File(splits[1]);
            if (!tempFile.exists()) {
                continue;
            }
            if (!tempFile.isDirectory()) {
                continue;
            }
            if (!tempFile.canRead()) {
                continue;
            }
            if (!tempFile.canWrite()) {
                continue;
            }

            // Met all the criteria, assume sdcard
            arrayList.add(splits[1]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T14:27:42.063

这些功能适用于所有 Android 版本：

*   要获取外部存储上的应用程序文件夹，请调用[`Context.getExternalFilesDir`](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)).

*   请记住，您的应用需要明确的权限才能访问外部存储，并且您应该通过以下方式检查它是否可用[`Environment.getExternalStorageState`](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageState())

*   是的，`ACTION_MEDIA_MOUNTED`只要可移动媒体变得可访问，就会广播（您还应该收听`ACTION_MEDIA_EJECT`和`ACTION_MEDIA_REMOVED`）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-06T22:06:40.540

这是我创建并正在使用的方法。这适用于三星 Galaxy S4、三星 Galaxy Note 3 和索尼 Xperia Z2。

```
private static String[] getRemovableStoragePaths() {
    String[] directories;
    String[] splits;
    ArrayList<String> pathList = new ArrayList<String>();
    BufferedReader bufferedReader = null;
    String lineRead;

    try {
        bufferedReader = new BufferedReader(new FileReader("/proc/mounts"));

        while ((lineRead = bufferedReader.readLine()) != null) {
            Log.d(TAG, "lineRead: " + lineRead);
            splits = lineRead.split(" ");
            Log.d(TAG, "Testing path: " + splits[1]);

            if (!splits[1].contains("/storage")) {
                continue;
            }

            if (splits[1].contains("/emulated")) {
                // emulated indicates an internal storage location, so skip it.
                continue;
            }

            // Eliminate if not a directory or fully accessible
            Log.d(TAG, "Path found: " + splits[1]);

            // Met all the criteria, assume sdcard
            pathList.add(splits[1]);
        }

    } catch (FileNotFoundException e) {
    } catch (IOException e) {
    } finally {
        if (bufferedReader != null) {
            try {
                bufferedReader.close();
            } catch (IOException e) {
            }
        }
    }

    // Send list back to caller

    if (pathList.size() == 0) {
        pathList.add("sdcard not found");
    } else {
        Log.d(TAG, "Found potential removable storage locations: " + pathList);
    }
    directories = new String[pathList.size()];
    for (int i = 0; i < pathList.size(); i++) {
        directories[i] = pathList.get(i);
    }
    return directories;
} 
```

# mysql - mysql error.log 一直为空

> ID：10282458
> 
> 赞同：5
> 
> 时间：2012-04-23T14:24:16.193
> 
> 标签：mysql, ubuntu, logging

我正在替换 Ubuntu 10.04.1 LTS 上的以前的服务器管理员。

我对来自 mysql 的错误日志有疑问。他们是空的，他们一直是空的。:(

我已经编辑了 /etc/mysql/my.cnf

```
general_log_file        = /var/log/mysql/mysql.log
general_log             = 1
log_error               = /var/log/mysql/error.log 
```

无论如何都没有记录

```
rw-rw---- 1 mysql adm      0 2012-04-23 01:09 error.log 
```

我错过了什么...

# asp.net - ASP.NET - 如果来自注册页面，则停止重定向到登录页面

> ID：10282464
> 
> 赞同：3
> 
> 时间：2012-04-23T14:24:39.283
> 
> 标签：asp.net

希望这很简单。我有一个相当简单的 ASP.NET（框架版本 2）应用程序，它使用自定义表进行用户验证。反正我有两个页面，登录和注册。你可以猜到目的是什么。用户应该能够通过单击注册链接来请求注册 - 这是一个带有提交按钮的表单，该按钮执行一些数据库调用以查看用户是否存在等等。登录页面使用身份验证 cookie 进行验证。我正在使用表单身份验证 - 这是在我的 web.config 中：

```
 <authentication mode="Forms">
        <forms loginUrl="logon.aspx" name="adAuthCookie" timeout="30" path="/" defaultUrl="~/logon.aspx">
        </forms>
    </authentication> 
```

每次我对注册页面进行 http 调用（即通过输入[http://localhost/registration.aspx](http://localhost/registration.aspx) - 它重定向到登录页面。

global.asax.cs 文件中有这个 - 这是一个身份验证检查。如果请求页面是注册页面，我想禁用此检查 - 因为用户不需要经过身份验证即可访问此页面。任何想法如何做到这一点？

```
void Application_AuthenticateRequest(object sender, EventArgs e)
{
    string cookieName = FormsAuthentication.FormsCookieName;
    HttpCookie authCookie = Context.Request.Cookies[cookieName];

    if (null == authCookie)
    {
        //There is no authentication cookie.
        return; // right here it will return null then redirect to login.aspx
    }
    FormsAuthenticationTicket authTicket = null;
    try
    {
        authTicket = FormsAuthentication.Decrypt(authCookie.Value);
    }
    catch (Exception ex)
    {
        //Write the exception to the Event Log.
        return;
    }
    if (null == authTicket)
    {
        //Cookie failed to decrypt.
        return;
    }
    //When the ticket was created, the UserData property was assigned a
    //pipe-delimited string of group names.
    string[] groups = authTicket.UserData.Split(new char[] { '|' });
    //Create an Identity.
    GenericIdentity id = new GenericIdentity(authTicket.Name, "LdapAuthentication");
    //This principal flows throughout the request.
    GenericPrincipal principal = new GenericPrincipal(id, groups);
    Context.User = principal;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:35:44.183

它可以帮助您使用 web.config 进行设置

```
 <location path="registration.aspx">
            <system.web>
            <authorization>
                <allow users ="*" />
            </authorization>
            </system.web>
            </location> 
```

更多信息 MSDN 链接 [http://support.microsoft.com/kb/316871](http://support.microsoft.com/kb/316871)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:37:09.450

您可以在 web.config 中配置访问权限。这是我会做的一个例子：

```
<location path="register.aspx"> //path here is path to your register.aspx
    <system.web>
        <authorization>
            <allow users="*"/> // this will allow access to everyone to register.aspx
        </authorization>
    </system.web>
</location> 
```

# vba - 将 Excel 中的图表粘贴到特定布局中的特定占位符。简报 2010

> ID：10282466
> 
> 赞同：3
> 
> 时间：2012-04-23T14:24:46.637
> 
> 标签：vba, charts, excel, powerpoint, placeholder

我需要将多个图表从 excel 粘贴到 powerpoint。我发现了一些优秀的 VBA 代码（主要在 Jon Peltier 的网站上）。现在，我的 powerpoint 模板有多种布局（例如，一张图表占据了大部分幻灯片或一张图表和一张幻灯片中的一个文本框等）。

我想要的是图表成为幻灯片布局的一部分，这样如果我重新格式化幻灯片 - 例如，我按照上面给出的示例更改布局 - 图表将相应移动。目前我可以粘贴到占位符所在的位置，尺寸和所有内容都正确，但它不在占位符中，它在占位符上（因此如果我更改布局，它会保留在那里）。

理想情况下，我希望能够选择布局（从 15 个）并在所选布局中选择占位符（通常我有一个标题、一个页脚，然后是 1 到 4 个用于图表、图像、文本或所有的占位符以上）。

我不是 VBA 程序员，我只是使用一点逻辑和抓取代码，这些代码在网上很友好地分享。我不知道如何识别正确的布局（它们有名称，但那是变量吗？）也不知道布局中的正确占位符（这里我什至不知道如何识别它们）。

非常感谢任何帮助。东风

下面是我在这里和那里复制的代码（主要是 Jon Peltier 的网站）。

```
Sub ChartToPresentation()
' Set a VBE reference to Microsoft PowerPoint Object Library

Dim PPApp As PowerPoint.Application
Dim PPPres As PowerPoint.Presentation
Dim PPSlide As PowerPoint.Slide
Dim AddSlidesToEnd As Boolean

AddSlidesToEnd = True

' Make sure a chart is selected
If ActiveChart Is Nothing Then
  MsgBox "Please select a chart and try again.", vbExclamation, _
  "No Chart Selected"
Else
' Reference existing instance of PowerPoint
Set PPApp = GetObject(, "Powerpoint.Application")
' Reference active presentation
Set PPPres = PPApp.ActivePresentation
PPApp.ActiveWindow.ViewType = ppViewSlide
' Reference active slide
Set PPSlide = PPPres.Slides _
(PPApp.ActiveWindow.Selection.SlideRange.SlideIndex)

' Copy chart
ActiveChart.ChartArea.Copy

' Paste chart
PPSlide.Shapes.Paste.Select

' Position pasted chart
' This is the keypoint
' I want to replace this with the selection of appropriate layout 
' and placeholder in that layout
PPApp.ActiveWindow.Selection.ShapeRange.Left = 19.56
PPApp.ActiveWindow.Selection.ShapeRange.Top = 66.33
PPApp.ActiveWindow.Selection.ShapeRange.Width = 366.8
PPApp.ActiveWindow.Selection.ShapeRange.Height = 424.62

If PPApp.ActivePresentation.Slides.Count = 0 Then

' Other key point
' can I add a specific layout, for example one named Two Content Layout + takeout
 Set PPSlide = PPApp.ActivePresentation.Slides.Add(1, ppLayoutBlank)
Else
    If AddSlidesToEnd Then
         'Appends slides to end of presentation and makes last slide active
        PPApp.ActivePresentation.Slides.Add PPApp.ActivePresentation.Slides.Count + 1, ppLayoutBlank
        PPApp.ActiveWindow.View.GotoSlide PPApp.ActivePresentation.Slides.Count
        Set PPSlide = PPApp.ActivePresentation.Slides(PPApp.ActivePresentation.Slides.Count)
    Else
         'Sets current slide to active slide
        Set PPSlide = PPApp.ActiveWindow.View.Slide
    End If
End If

'Clean up
Set PPSlide = Nothing
Set PPPres = Nothing
Set PPApp = Nothing

End If

End Sub 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T15:20:34.463

如果我理解您的问题，那么我认为这就是您想要的。

您当前正在粘贴图表“**开**” `Slide 1`。你必须把它粘贴到“ **In** ”相关`Place Holder`的地方`Slide 1`。

修改您的代码以包含此（**尝试和测试**）

```
Dim nPlcHolder As Long

With PPPres
    nPlcHolder = 2 '<~~ The place holder where you have to paste

    .Slides(1).Shapes.Placeholders(nPlcHolder).Select msoTrue
    .Windows(1).View.PasteSpecial (ppPasteMetafilePicture)
End With 
```

现在，即使您更改布局，图表也会相应移动。

**快照**

![在此处输入图像描述](../Images/2ef8ee5f4cb3475db5b2f6b62b63d3cc.png) 高温高压

# python - Cython安装找不到Python.h文件？

> ID：10282470
> 
> 赞同：8
> 
> 时间：2012-04-23T14:25:03.740
> 
> 标签：python, cython

我想在我的 ubuntu 12.04 上安装 cython，然后我进入了终端

```
sudo easy_install cython 
```

作为回应，我收到以下错误：

```
Searching for cython  
Reading http://pypi.python.org/simple/cython/  
Reading http://www.cython.org  
Reading http://cython.org  
Best match: Cython 0.16  
Downloading http://www.cython.org/release/Cython-0.16.zip  
Processing Cython-0.16.zip  
Running Cython-0.16/setup.py -q bdist_egg --dist-dir /tmp/easy_install-VzJ0lH/Cython-0.16/egg-dist-tmp-BMJs3p  
Compiling module Cython.Plex.Scanners ...  
Compiling module Cython.Plex.Actions ...  
Compiling module Cython.Compiler.Lexicon ...  
Compiling module Cython.Compiler.Scanning ...  
Compiling module Cython.Compiler.Parsing ...  
Compiling module Cython.Compiler.Visitor ...  
Compiling module Cython.Compiler.FlowControl ...  
Compiling module Cython.Compiler.Code ...  
Compiling module Cython.Runtime.refnanny ...  
warning: no files found matching '*.pyx' under directory 'Cython/Debugger/Tests'  
warning: no files found matching '*.pxd' under directory 'Cython/Debugger/Tests'  
warning: no files found matching '*.h' under directory 'Cython/Debugger/Tests'  
warning: no files found matching '*.pxd' under directory 'Cython/Utility'  
warning: no files found matching '*.h' under directory 'Cython/Utility'  
warning: no files found matching '.cpp' under directory 'Cython/Utility'  
/tmp/easy_install-VzJ0lH/Cython-0.16/Cython/Plex/Scanners.c:4:20: fatal error: Python.h: El fitxer o directori no existeix  
compilation terminated.  
error: Setup script exited with error: command 'gcc' failed with exit status 1 
```

对不起这里的加泰罗尼亚语，但 El fitxer o Directori no existeix 表示该文件不存在

我想我可能错过了什么或者我不知道

其他人有同样的问题吗？或者知道如何正确安装？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T14:55:54.130

根据您安装 python 的方式，您可能还需要获取 dev 文件（如果您使用 apt-get 或 Synaptic 安装）。

```
sudo apt-get install python-dev 
```

或许

```
sudo apt-get install python2.6-dev  #substitute your python version here... 
```

请注意，如果您需要将任何 C 扩展安装到 Cpython，则这是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:38:46.110

我记得在安装 Cython 时遇到了这个问题。如果您转到 Python 安装文件夹（假设此示例为 Python2.7），请将 C:\Python27\include 目录及其所有内容复制到您的主目录或运行 easy_install 的目录。“include”目录包含“python.h”，这是编译器的C头文件。

话虽如此，当我这样做时，它消除了那个错误，但仍然没有用。

博纳排序。

# artificial-intelligence - 搜索和规划有什么区别

> ID：10282476
> 
> 赞同：14
> 
> 时间：2012-04-23T14:25:30.480
> 
> 标签：artificial-intelligence, planning

在人工智能方面，我现在正在阅读有关规划的内容。但作为一个对人工智能的天真者，我无法理解他们坚持“计划和搜索之间的区别”的意思。

我有 C/C++ 之类的过程编程知识，并且可以根据数据结构进行搜索。

> 而且我无法理解他们给出的“人工智能：一种现代方法 - Stuart Russell”中给出的 Buy(ISBN0123654789) 和 Have(ISBN0123456789) 的示例，搜索一个十位数的 ISBN 号码将采取 100 亿次行动。

我的问题是关于如何搜索一本书需要 100 亿次操作，但计划不需要。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T15:06:36.387

罗素和诺维格并不是说搜索和计划是不同的事情。事实上，在我认为你正在讨论的部分（在蓝色版的第 10 章中）他们说的恰恰相反：计划问题可以简化为搜索问题。

但是，表示为搜索的计划可能具有非常大的搜索空间。在本书的示例中，有 10^10 种不同的可能动作，并且*使用不知情的搜索技术*，计算机**不会“知道”** buy(x) 的结果是 have(x)，尽管这对人类来说是微不足道的。因此，即使是单一行动计划的搜索空间也是巨大的。这听起来很愚蠢，但这是不知情搜索的定义。

因此，实际*工作*的规划算法需要一些算法和/或启发式的聪明才智，这一章的其余部分将继续描述。*在本书的示例中，改进的搜索原因从 have(x) 的目标向后推，使用 buy(x) 与 have(x) 连接*执行一些一阶逻辑模式列表，并得出正确的操作。

作为旁注，我非常喜欢罗素和诺维格的书，以及他们的一般工作。但我发现计划章节有点薄弱。Lozano-Perez 和 Kaelbling 教授在课堂上使用该书的前一版本在线获取了他们的讲义。他们的笔记非常详细，并附有示例。当我学习这个材料时，我发现它们是一个很好的补充：

[http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-825-techniques-in-artificial-intelligence-sma-5504-fall-2002/index.htm](http://ocw.mit.edu/courses/electrical-engineering-and-computer-science/6-825-techniques-in-artificial-intelligence-sma-5504-fall-2002/index.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T14:49:12.823

我不熟悉您引用的具体示例，但无论如何我都会尝试。

搜索是一个几乎完全通用的结构：有一个可能性空间，你想找到一个，但你必须通过检查一个（不一定是正确的）子集来找到它。关于特定的搜索问题（即空间是什么，你如何查询它等）和特定的搜索算法（最重要的是，你如何组织你在什么地方查询的空间的哪些部分）有各种各样的细节。命令）。几乎任何问题都可以作为搜索问题提出（可能性空间是什么，以及如何判断哪个是所需的），这就是它在人工智能中如此重要的原因。

计划是一种特殊的搜索：它是在行动序列（或更一般地，部分顺序）的空间中搜索满足某些标准的计划。这并不意味着它必须作为搜索来实现（就像一些可以使用搜索解决的问题可以通过其他方式解决一样），但可以这样描述问题。

说通过 ISBN 查找一本书将采取 100 亿次操作表明检查 ISBN 是其中一项操作（因为有很多可能的 ISBN），但以某种方式计划（即找到合适的操作顺序）将导致更少的操作（因为那么你就不需要检查所有的 ISBN 了吗？）。但如果没有问题的细节，我不能说这种说法有多合理。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-03T16:21:34.153

计划可以利用**回归搜索**，即从目标状态开始并*形成计划*以达到初始状态。

对于您的书示例，如果您从 PRECONDITION: buy(B), ISBN(B) 开始，那么您可能有数百万个可能性要注意（因为有一百万个 ISBN 编号），但是*您想“计划”*如何达到目标状态，而不仅仅是“搜索”

计划为您提供了达到目标状态所需的一系列操作。搜索与“动作”无关

资料来源：Udacity AI 课程和 AIMA：Russel，Norvig

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-07-31T06:52:17.497

搜索和规划的主要区别在于状态的表示 在搜索中，状态被表示为单个实体（可能是一个相当复杂的对象，但搜索算法不使用其内部结构） 在规划中，状态具有结构化的表示规划算法使用的（属性集合）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-06T10:57:15.270

为了简短起见，区别在于：

*   搜索是并行完成的，并且是一个非常不知名的操作

*   国家代表：

    *   搜索状态被表示为不使用其内部结构的单个实体
    *   计划状态具有计划算法使用的结构化表示
*   规划可以利用回归搜索

    *   即从目标开始，从初始状态形成计划

# orchardcms - Orchard 1.4 中的多语言站点

> ID：10282479
> 
> 赞同：0
> 
> 时间：2012-04-23T14:25:37.567
> 
> 标签：orchardcms, multilingual

有人可以指点我在 Orchard CMS 1.4 中制作多语言网站吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:57:19.797

当然：[http ://docs.orchardproject.net/Documentation/Creating-global-ready-applications](http://docs.orchardproject.net/Documentation/Creating-global-ready-applications)

# android - android adb通过adb打开wifi

> ID：10282484
> 
> 赞同：27
> 
> 时间：2012-04-23T14:25:57.370
> 
> 标签：android, android-wifi

我的手机已被锁定（模式尝试次数过多）。要解锁，我需要在我的 gmail 帐户上输入用户名和密码。这是我解锁它的唯一方法。我无法启动任何活动，甚至打开 wifi 连接。没有互联网连接，我无法登录以恢复我的手机。

也许adb中有任何命令可以打开我的wifi连接，这样我就可以使用我的手机了？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-30T20:31:41.143

这非常适合并且非常简单

`adb -s $PHONESERIAL shell "svc wifi enable"`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-27T06:35:16.970

可以通过更改 settings.db 来启用 WiFi，如下所示：

```
adb shell
sqlite3 /data/data/com.android.providers.settings/databases/settings.db
update secure set value=1 where name='wifi_on'; 
```

更改此设置后，您可能需要重新启动才能真正打开 WiFi。

该解决方案来自[一篇博客文章](http://develnetwork.blogspot.com/2012/05/turn-on-wifi-from-adb.html)，该文章称它适用于 Android 4.0。我不知道早期版本是否相同。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-04-02T22:35:15.647

你可以打开wifi： - 在电脑上连接usb；- 将显示警报对话框“连接 UMS 模式或 KIES” - 不要单击，不要取消 - 拉通知栏并打开 wifi。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-06-03T09:59:15.810

尝试以下对我有用的方法。

方法一：

1.  打开设备
2.  插入 USB 数据线
3.  您将看到打开 USB 存储的屏幕。
4.  拉下通知抽屉
5.  打开wifi/数据

在 AT&T Fusion 上测试工作正常。

方法二：

使用 shkschneider 给出的方法

```
adb shell am start -a android.intent.action.MAIN -n com.android.settings/.wifi.WifiSettings
adb shell input keyevent 20 & adb shell input keyevent 23 
```

这仅在您打开 USB 调试时才有效。如果您没有在开发下打开 USB 调试，请执行以下操作。

1.  关闭设备。
2.  启动进入恢复模式（电源按钮 + 提高音量）
3.  将设备插入计算机。
4.  使用 ADB 工具执行 shkschneider 给出的相同命令

在 AT&T fusion 上测试工作正常。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-23T14:30:00.473

请参阅以下答案：

[如何通过 ADB 关闭 Wifi？](https://stackoverflow.com/questions/10033757/turn-off-wifi-via-adb)

[使用 adb shell 连接到 wi-fi](https://stackoverflow.com/questions/8708886/connecting-to-wi-fi-using-adb-shell)

但是，我很确定 Google 实际上会在这些时间存储您的电子邮件和密码（在保存到设备时）。因此，当它需要解锁时，它不需要互联网连接。

我可能是错的。无论哪种方式，当我遇到这个问题时，我有互联网连接，并且我知道我的用户名和密码并且它不在乎，一直说它们是错误的（即使我正在登录我的电子邮件）。当时不得不格式化手机！

祝你好运。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-23T14:30:51.443

`adb`您应该从模拟输入开始 WiFi 活动：

```
adb shell am start -a android.intent.action.MAIN -n com.android.settings/.wifi.WifiSettings
adb shell input keyevent 20 && adb shell input keyevent 23 
```

以下是`adb`输入列表：[#7789826](https://stackoverflow.com/questions/7789826/adb-shell-input-events)

我不确定这些关键事件是否适合您的情况，但我认为可以。它模拟了“向下”以选择第一个复选框，然后是“输入”。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-09-08T13:42:45.183

在我的 ROM 中，它存储在“全局”数据库中，而不是“安全”数据库中。所以D__的回答是正确的，但是sql行需要连接不同的数据库：

```
sqlite3 /data/data/com.android.providers.settings/databases/settings.db
update global set value=1 where name='wifi_on'; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-11-18T21:23:01.927

这太容易了，伙计。只需按下电源按钮，直到您看到“电话选项”屏幕并打开移动数据。之后，您可以登录您的帐户或远程解锁您的设备。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-23T18:47:45.187

不幸的是，我可以解决我的问题的唯一方法是根设备。

这是 Nexus S 的一个很好的教程：

[http://nexusshacks.com/nexus-s-root/how-to-root-nexus-s-or-nexus-s-4g-on-ics-or-gingerbread/](http://nexusshacks.com/nexus-s-root/how-to-root-nexus-s-or-nexus-s-4g-on-ics-or-gingerbread/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-10T10:19:50.400

我遇到了同样的问题。我的手机被锁定，无线网络也关闭了，但我登录了我的 gmail 帐户并且它被解锁了。

希望这可以帮助某人:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-03-18T11:46:08.477

如果您被锁定并且您的 Androud 设备中的 WiFi 已关闭，那么一种解决方案是将您的手机连接到 PC（连接到互联网）并尝试使用您的谷歌帐户登录。- 它对我有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-03T22:17:47.147

我在三星 Mini II 上也遇到了同样的情况。我最终通过按住电源按钮直到出现“关机”菜单来解决它。从这个菜单可以启用网络数据连接。

然后使用@googlemail.com（而不是@gmail.com）登录我的谷歌帐户似乎可以解决问题。虽然地址的改变可能只是让手机有时间预热 3g 连接，而不是产生任何真正的改变。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-02-10T21:46:25.773

不确定这个相当简单的解决方案是否已经在此处发布。

问题是没有wifi连接的手机被锁定，没有root和USB调试禁用（见鬼，可能的情况更糟）。无法使用 ADB，因为“Adb 设备”没有检测到禁用 USB 调试的设备。尝试恢复模式（无法进入）。尝试了紧急模式（Adb 仍然没有检测到设备）。当我几乎放弃并且距离硬重置只有一英寸的距离时，发生了一些奇怪的事情。当我像往常一样将手机连接到 USB 时，出现了 USB 输入屏幕。没什么新鲜的。我当时注意到的是，在这个屏幕上实际上可以降低下拉栏和宾果游戏....我能够打开 wifi。然后刚刚输入谷歌帐户，手机被解锁。

希望我帮助了某人。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-10-26T16:14:21.710

无需直接编辑任何数据库，有一个命令:)

svc wifi [启用|禁用]

# wpf - 在 WPF 中渲染数以千计的 Canvas 元素？

> ID：10282485
> 
> 赞同：0
> 
> 时间：2012-04-23T14:25:59.097
> 
> 标签：wpf

我需要在数据网格中呈现图表。我正在考虑在每一行的第一列/单元格中渲染一个画布元素，然后在那里渲染一个点和一条线。现在的问题是数据网格中将有数千行。在我开始实施之前，我希望任何已经有这方面经验的人都能获得洞察力。这种方法会执行缓慢吗？我是否选择了最佳路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:36:44.397

如果您不一次向用户显示所有数据，则可以利用数据虚拟化概念。
这个[PDF](http://bea.stollnitz.com/files/52/DataVirtualization.pdf)帮助我理解了数据虚拟化的关键概念。

也就是说，使用[DataGrid](http://msdn.microsoft.com/fr-fr/library/system.windows.controls.datagrid%28v=vs.95%29.aspx)不是一个好主意。数据量越大，您应该使用的级别越低。在您的情况下，这将是[ItemsControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.aspx)。
我相信快速浏览一下它们的定义是值得所有解释的。

我曾经在 msdn 上看到一个博主，他展示了一个示例，他将加载超过一百万张图纸，并且不会滞后。这是完全可能的，但我再也找不到那个链接了。

高温下，

呸。

# core-data - 从另一个 ViewController 访问“实体”（核心数据）

> ID：10282492
> 
> 赞同：2
> 
> 时间：2012-04-23T14:26:16.153
> 
> 标签：core-data, nsmanagedobject

另一个我已经呆了几个小时了。我在让我的应用程序“看到”我的数据库中的实体时遇到了一个重大问题......

我在我的 appDelegate 中创建了代码来设置核心数据。我启动的第一个视图可以毫无问题地访问此数据（读/写）。如果我然后尝试从另一个 viewController 访问数据库，就好像它不存在一样。

我在 viewController 头文件中设置了所有正确的 @property：

```
@property (strong, nonatomic) NSFetchedResultsController *fetchedResultsController;
@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext; 
```

我还让每个 viewController 成为：

```
 NSFetchedResultsControllerDelegate 
```

*   我已经在要访问实体的 .m 文件中导入了相关的头文件。

这是我得到的错误：

```
'+entityForName: could not locate an NSManagedObjectModel for entity name MyEntityName' 
```

令人困惑的是，如果我从 appDelegate 更改启动视图，在我选择的任何视图控制器中看到实体都没有问题。似乎它正在将其“注入”到第一个中，但仅此而已。

我猜我需要设置/分配初始化一个 NSManagedObject 并将其引用回我的实体，但我不知道该怎么做。

有什么线索吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:26:34.077

所以我想你需要做的是像这样传递 managedObjectContext

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender;
{
    if ([[segue identifier] isEqualToString:@"theIdentifier"]) {
        UINavigationController *navigationController = (id)[segue destinationViewController];

        MySecondViewController *topViewController = [navigationController topViewController];
        topViewController.managedObjectContext = self.managedObjectContext;
    }
} 
```

# javascript - 在javascript中需要

> ID：10282493
> 
> 赞同：1
> 
> 时间：2012-04-23T14:26:18.253
> 
> 标签：javascript, extjs

这在 javascript 中是什么意思？我刚刚开始使用 ext-js。示例头文件中的第一行是

```
Ext.require('Ext.tab.*'); 
```

这是什么意思 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:28:55.703

该调用用于动态加载类/脚本：

[Ext - Sencha Docs - Ext JS 4.0](http://docs.sencha.com/ext-js/4-0/#!/api/Ext-method-require)

因此，您的调用动态加载 Ext.tab 命名空间中的所有类（因为您使用的是通配符表达式）。

# css - 如何使用带有 css 的悬停效果显示回复和转发图标？

> ID：10282498
> 
> 赞同：0
> 
> 时间：2012-04-23T14:26:37.707
> 
> 标签：css, hover

我想在使用 css 将鼠标悬停在我的推文上时显示回复和转发图标。我可以使用代码更改背景颜色：

```
ul.statuses li:hover {
        background-color:#F7F7F7;
        display: inherit;
    } 
```

但无法在同一推文文本上使用悬停效果显示图标。如何显示单个推文的更改背景颜色和图标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T03:14:19.710

我可以使用代码显示具有悬停效果的图标：

```
 ul.statuses .buttons{
            display: none;
    }
    ul.statuses li:hover .buttons {
            display: inline-block;
    } 
```

显示虚拟推文悬停效果的 html 代码是：

```
<ul id="status" class="statuses">
              <li>Sample tweets. Sample tweets. Sample tweets. Sample tweets. Sample tweets.
              <p id="iconlinks" class="buttons">
                <a href="#" id="reply"><i class="icon-share-alt" title="Reply"></i></a>
            <a href="#" id="retweet"><i class="icon-retweet" title="Retweet"></i></a>
            <a href="#" id="favorite"><i class="icon-star" title="Favorite"></i></a>
            <a href="#" id="mail"><i class="icon-envelope" title="Mail"></i></a>
            <a href="#" id="assign"><i class="icon-user" title="assign"></i></a>
               </p>
                  </li>
                  <li>Sample tweets. Sample tweets. Sample tweets. 
                    <p id="iconlinks" class="buttons">
                      <a href="#" id="reply"><i class="icon-share-alt" title="Reply"></i></a>
                      <a href="#" id="retweet"><i class="icon-retweet" title="Retweet"></i></a>
          <a href="#" id="favorite"><i class="icon-star" title="Favorite"></i></a>
                      <a href="#" id="mail"><i class="icon-envelope" title="Mail"></i></a>
                      <a href="#" id="assign"><i class="icon-user" title="assign"></i></a>
                  </p>
                  </li>
                </ul> 
```

我使用 twitter bootstrap 创建了图标并将其放置在“按钮”类中。

感谢您的快速反应家伙！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:05:45.850

```
ul.statuses li:hover {
  background-color:#F7F7F7;
  display: inherit;
  content: url(/img.gif)
} 
```

您可以使用 css 显示具有 content 属性的图像

[https://developer.mozilla.org/en/CSS/content](https://developer.mozilla.org/en/CSS/content)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T08:12:15.033

不要使用 display 属性，它可能会随着 DOM 的变化而改变前端的间距，请尝试：

```
ul.statuses li {opacity:0}

ul.statuses li:hover {opacity:1} 
```

这样，从用户的角度来看，效果是一样的，但你的 DOM 不会弹跳。尝试添加 CSS 过渡以使其更加平滑。

# wpf - 什么可以绑定到不存在的属性（仅限 TreeViewItem？）

> ID：10282504
> 
> 赞同：1
> 
> 时间：2012-04-23T14:27:00.390
> 
> 标签：wpf, xaml, dynamic, treeview, styles

在我的 xaml 中，我有一些看起来像：

```
<TreeView.ItemContainerStyle>
    <Style TargetType="TreeViewItem">
        <Setter Property="IsExpanded" Value="{Binding Path=IsExpandedOverridedInModelView, Mode=TwoWay}"/>
    </Style>
</TreeView.ItemContainerStyle> 
```

此代码完美运行。

我的 TreeView 绑定到包装我的 DataLayer 层次结构的 ModelView 层次结构 (MVVM)。另一个层次结构上的层次结构包装器。我的有界 ModelView 层次结构添加了一些属性，例如（IsSelected 和 IsExpandedOverridedInModelView）。此代码主要确实定义了 TreeView.IsExpanded 属性和我的 ModelView 层次结构属性之间的绑定：“IsExpandedOverridedInModelView”。

但是有一点我一直想不通...

每个人都知道 TreeViewItem 类没有名为“IsExpandedOverridedInModelView”的属性。此属性是我的基础对象的一部分（我的模型视图中的对象在 TreeViewItem 后面）。我有两个相关的问题：

*   什么会使该声明成为可能？促成这种行为的转折点是什么？
*   如何声明以删除〜“警告”说“无法解析符号'IsExpandedOverridedInModelView'”（如何以干净的方式声明）？

我认为 TreeViewItem 将派生自 DynamicObject 但事实并非如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:32:28.547

`TreeViewItem` *[`IsExpanded`有财产](http://msdn.microsoft.com/en-us/library/system.windows.controls.treeviewitem.isexpanded.aspx)。*_* _ 任何告诉您其他情况的警告都是某些 IDE 废话的结果。绑定指的是[`DataContext`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)可能有也可能没有这样的属性，除非您使用设计器，否则仅在运行时评估该属性（同样，来自这些的警告只是 IDE 废话）。*

# tfs - 将 TFS 2010 历史记录导出到 Excel 或文本文档

> ID：10282506
> 
> 赞同：22
> 
> 时间：2012-04-23T14:27:10.723
> 
> 标签：tfs, export

如何从 TFS 2010 中导出包含用户、日期和完整评论（未截断）的历史记录？

例如，在团队资源管理器中：右键单击团队成员名称 > 显示签入历史记录。这将显示用户的签到历史记录，但评论会被截断。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-24T01:45:59.307

您在这里有 3 个选项：

1.  解析 tf.exe 历史命令的输出。
2.  针对 TFS 客户端对象模型编写代码。
3.  直接针对 TFS 数据库编写查询。

1 号可能是最简单的，所以我将从它开始。[您可以在此处](http://msdn.microsoft.com/en-us/library/yxtbh4yh%28v=vs.100%29.aspx)阅读 tf history 命令的文档。为了使注释不被截断，您需要使用 /format:detailed 选项。如果您想要所有历史记录，请尝试以下操作：

tf 历史 $/ /r /format:detailed /noprompt

如果您正在查找给定用户的所有变更集，请尝试以下操作：

tf 历史 $/ /r /format:detailed /user: /noprompt

这将产生大量的文本输出，您需要对其进行解析才能将其放入 excel 中。试一试，如果您对选项 2 或 3 感兴趣，请告诉我，我可以为您提供更多详细信息。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-24T11:01:27.533

最简单的方法是从 excel 连接到 TFSWharehouse，然后从 excel 表中的源代码管理历史记录中提取数据。这真的很简单，也很强大。

你会在这里找到有用的信息：[http ://www.woodwardweb.com/vsts/getting_started.html](http://www.woodwardweb.com/vsts/getting_started.html)

**编辑：**

当您无权访问 SSAS（例如 tfspreview.com）时，使用 TFS API 枚举变更集：

```
TeamProjectPicker tpp = new TeamProjectPicker(TeamProjectPickerMode.SingleProject, true);
tpp.ShowDialog();

var tpc = tpp.SelectedTeamProjectCollection;

VersionControlServer versionControl = tpc.GetService<VersionControlServer>();

var tp = versionControl.GetTeamProject("MyTeamProject");
var path = tp.ServerItem;

var q = versionControl.QueryHistory(path, VersionSpec.Latest, 0, RecursionType.Full, null, new ChangesetVersionSpec(1), VersionSpec.Latest, Int32.MaxValue, false, true, false, false);

foreach (Changeset cs in q)
{
    var user = cs.Owner;
    var comment = cs.Comment;
    var date = cs.CreationDate;

    Debug.WriteLine(string.Format("[{3}] Date: {0}, User: {1}, Comment {2}", date, user, comment, cs.ChangesetId));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-07-16T14:25:31.137

您还可以像这样使用[TFS Rest API](https://docs.microsoft.com/en-us/rest/api/vsts/tfvc/changesets/get%20changesets?view=vsts-rest-4.1)：-

```
https://{accountName}.visualstudio.com/{project}/_apis/tfvc/changesets?
searchCriteria.author={userName}&$top=100 
```

这将生成一个 JSON，您可以将其上传到任何在线站点，例如[https://json-csv.com/](https://json-csv.com/)并获取 CSV。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-29T17:58:30.527

Visualstudio.com 的比上述更简单的再现

https://{accountName}.visualstudio.com/{project}/_apis/tfvc/changesets?$top=10000&maxCommentLength=2000

您需要最大评论长度来阻止它被截断。上述工具不起作用，但这个工具起作用：http: [//www.convertcsv.com/json-to-csv.htm](http://www.convertcsv.com/json-to-csv.htm)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-03T20:29:02.973

但是，考虑到共享，这实际上不是自动导出。

对于 VS2015，我发现更容易关注的是（大约 20 个变更集）

1.  VS2015 开分店
2.  右键单击=>查看历史记录=>所有变更集可见
3.  单击每个变更集==>右键单击=>变更集详细信息
4.  Team Explorer-Changeset 详细信息在右侧打开。
5.  选择其中一个文件。
6.  使用**Shift 和向下箭头**，您可以复制该特定变更集中的整个文件列表。
7.  粘贴到 Excel 工作表（它复制了带有文件名的文件的路径）

对所有变更集进行了上述操作并获得了我的完整列表。

# sql - 无法在结果集中找到指定列索引超出范围索引超出范围异常

> ID：10282508
> 
> 赞同：2
> 
> 时间：2012-04-23T14:27:13.263
> 
> 标签：sql, vb.net

我无法在文本框中输入值。每次售出门票时，我都会在文本框中输入总价，每次售出同一场音乐会的门票时，它会通过将自身添加到总价中而增加。它在第一次销售时起作用，但在那之后它就坏了。这是代码，提前致谢。

```
 Private Function DisplayMoneyTaken() As Integer
    Dim totalMoney As Integer
    'open the database connection
    strSQL = "SELECT MAX(Total_Money) FROM Sales WHERE Concert_Id =" + Mid(cboVenue.Text, 1, 4)

    conn.Open()
    cmd.Connection = conn
    cmd.CommandText = strSQL
    cmd.CommandType = CommandType.Text

    dr = cmd.ExecuteReader()

    'read the record returned
    dr.Read()
    If IsDBNull(dr.Item(0)) Then
        totalMoney = txtPrice.Text
    Else
        DisplayMoneyTaken = dr.Item("Total_Money") + Val(txtPrice.Text)
    End If

    'close the database
    conn.Close()
    Return totalMoney

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:57:15.680

您的查询似乎没有名为“Total_Money”的列。您没有命名查询返回的单列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:09:05.977

迈克尔，

使用聚合函数时，还需要为该列分配别名。例如

```
strSQL = "SELECT MAX(Total_Money) as CaChing FROM Sales WHERE Concert_Id =" + Mid(cboVenue.Text, 1, 4) 
```

如果您不分配别名，服务器有时会分配一个。但你必须知道或猜测它会是什么。最好只选择一个有意义的。

您还可以使用数字索引项目，这是您在检查 NULL 时所做的。访问该值时可以使用相同的语法。

```
 DisplayMoneyTaken = dr.Item(0) + Val(txtPrice.Text) 
```

# c# - 在 Windows 窗体 C# 中创建编辑对话框

> ID：10282510
> 
> 赞同：0
> 
> 时间：2012-04-23T14:27:18.130
> 
> 标签：c#, winforms, visual-studio, visual-studio-2010, architecture

我有 Form1.cs，它有两个按钮，分别是“添加”和“编辑”。

单击“添加”显示对话框 Form2.cs。

Form2 有一个 TextBox 和一个 ComboBox。假设我们在文本框中输入值“A”并从 ComboBox 中选择“A”。然后关闭 Form2。

然后，当在 Form1 上单击 EDIT 按钮时，Form2 应在文本框中显示为“A”，在 ComboBox 中选择“A”。

这是一个简单的解释。我使用的真实表单有大约 10-12 个不同的控件，包括组合框、复选框、文本框等。

我的主要疑问是我们在哪里以及如何保存这些控制值。

我缺少这种类型的对话框是否有特定的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:34:10.320

您是否只想加载用户在此处输入的最后一个值？

例如，他在文本框上写“文本”并选择“A”组合框，下次打开它时应该预先选择它吗？

编辑：然后不要使用 Form.Close 关闭它，而是让它隐藏起来。Form1.隐藏。下次打开时，值仍会保存。除非申请已经关闭。另一方面，用户可能会单击窗口窗体中的关闭按钮。您可以通过属性使其“不可点击”，也可以使用我认为的事件对其进行配置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:36:27.863

您的对话表单应该有一个包含您想要的属性/字段的字段，例如一个业务对象的副本。然后，根据您想要的行为，在对话框构造函数或 Load 中传递或初始化它。从那里您可以创建/初始化您的控件。

如果您想要一个内置系统，您可能想看看 PropertyGrid（您可以将其嵌入对话框中（以适合您的问题））

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:46:17.090

创建类，它将存储您要传递的值（我们称之为`Foo`）。

`Form2`那么应该有一个属性。在属性的 setter 中，设置控件：

```
public partial class Form2 : Form
{
    private Foo _bar;
    public Foo Bar
    {
        set
        {
            _bar = value;
            //set your controls here
        }
    } 
```

在编辑按钮上，设置如下属性：

```
Form2 form2 = new Form2();
form2.Bar = bar; //bar contains values to edit 
```

然后在 上放一个保存按钮`Form2`，这会将值从控件保存回该对象。

For every control I would have a field in `Foo` class, eg. `string` for textboxes, `bool` for checkboxes and `enum` or `int` for comboboxes (where integer value would equal selected index).
Alternatively, you could use `Dictionary` class instead and have key and value pair for every control.

You can also have some `enum`, if your form looks or behaves differently in New and Edit mode.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:29:40.820

在 Form2 上创建一个方法，您将在其中将值设置为 textBox 并在组合框中选择一个项目。在实例化 form2 之后和显示它之前调用此方法。例子：

```
 public Form2()
    {
        InitializeComponent();
        comboBox1.Items.AddRange(new string[] { "a", "b", "c" });//fill comboBox your way on a loading time
    }

    public void UpdatingControls(string a, string b)
    {
        textBox1.Text = a;
        comboBox1.SelectedText = b;
    }
    //on form2;
    Form1 f2;
    private void OpenForm2Button_Click(object sender, EventArgs e)
    {
        f2 = new Form2();
        f2.UpdatingControls("a", "b"); //a will go into textBox, b will be choosen in comboBox
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T14:37:55.840

```
public Form2(string form1Textbox)
{
    InitializeComponent();
    form2Textbox.Text = form1Textbox;
} 
```

# java - JTable将值传递给excel（文本格式）

> ID：10282513
> 
> 赞同：1
> 
> 时间：2012-04-23T14:27:39.813
> 
> 标签：java, swing, jtable, jxl, strikethrough

我使用您可以在下面看到的代码来删除 jtable 中的某些单元格。对我来说效果很好，使用 JTable.print() 方法的外观和打印效果都非常好。

```
public void strikeThrough()
{
   int rows=jTable.getRowCount();
   destroiedDocs=new ArrayList<>();
   for (int i = 0; i < rows; i++)      
     {
       String test=String.valueOf(jTable.getValueAt(i,5));
       if (test.equals("K"))
         {
          for (int j = 1; j < 5; j++)
            {
            String tostrike= String.valueOf(jTable.getValueAt(i, j));
            String striked=("<html><strike>".concat(tostrike).concat("</strike>       </html>"));
            jTable.setValueAt(striked, i, j);
            destroiedDocs.add(i);
            }
         } 
     }
 } 
```

问题是，当我使用 jxl 类将结果导出到 excel 时，我得到了这些带有外观的删除单元格中的值

```
<html><strike>some text</strike></html> 
```

而不是删除线中的~~一些文本~~。有关如何解决此格式化问题的任何建议？我通过循环从jtable中逐个单元格地传递excel单元格中的单元格。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T06:20:11.517

JAVA代码：

```
String striked=("<html><strike>".concat(tostrike).concat("</strike>       </html>"));
jTable.setValueAt(striked, i, j); 
```

仅适用于 JAVA UI。将数据导出到excel后，它将显示原始文本。
**您需要执行以下步骤：**
1\. 在导出之前删除`<html><strike>`和`</strike></html>`。保留原文。
2.使用以下代码删除单元格。

使用以下代码运行`jxl-2.6.10.jar`

```
import java.io.File;
import jxl.Workbook;
import jxl.write.Label;
import jxl.write.WritableCell;
import jxl.write.WritableCellFormat;
import jxl.write.WritableFont;
import jxl.write.WritableSheet;
import jxl.write.WritableWorkbook;

public class ExcelCreate {

  public static void main(String[] args) {
    try {

         WritableWorkbook workbook =
         Workbook.createWorkbook(new File("output.xls"));
         WritableSheet sheet = workbook.createSheet("Page1", 0);

         String Label[] = new String[4];
         Label[0] = "Emp ID";
         Label[1] = "Name";
         Label[2] = "Department";
         Label[3] = "Designation";

         WritableCellFormat cellFormat = new WritableCellFormat();
         WritableFont font = new WritableFont(WritableFont.ARIAL);
         font.setStruckout(true);
         cellFormat.setFont(font);

         for (int i = 0; i < Label.length; i++) {
             Label label = new Label(i, 0, Label[i]);
             sheet.addCell(label);
             WritableCell cell = sheet.getWritableCell(i, 0);
             cell.setCellFormat(cellFormat);
         }

         workbook.write();
         workbook.close();

    } catch (Exception e) {
        /* Write your logic to handle exception. 
         */
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T04:21:41.710

我认为在将每个单元格导出到 Excel 之前，您必须找到并替换或删除标签，例如

```
<html> 
    and
<strike> 
```

具有适当的功能来添加所需的格式..

您使用哪个 API 将其导出为 Excel 格式？我认为这将是特定于您用于导出到 Excel 的那个。

# php - sqlsrv_query 记录计数错误

> ID：10282514
> 
> 赞同：0
> 
> 时间：2012-04-23T14:27:42.177
> 
> 标签：php, sql

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，布尔值在选择中给出](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)
> [警告：mysql_fetch_* 期望参数 1 是资源，布尔值给定错误](https://stackoverflow.com/questions/11674312/warning-mysql-fetch-expects-parameter-1-to-be-resource-boolean-given-error)

有问题`sqlsrv_query`。这是我得到的错误：

> PHP 警告：sqlsrv_num_rows() 期望参数 1 是资源，给定的布尔值

以下是相关代码：

```
$tsql = "SELECT * FROM customers";
$stmt = sqlsrv_query($conn, $tsql, array(), array("Scrollable" => SQLSRV_CURSOR_STATIC));
$recordcount = sqlsrv_num_rows($stmt); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:55:07.250

上的文档[`sqlsrv_query()`](http://php.net/sqlsrv_query)包含您需要知道的一切。

> **返回值**
> 
> 成功时返回语句资源，**如果发生错误则返回 FALSE**。

```
$stmt = sqlsrv_query( $conn, $sql, $params);
if( $stmt === false ) {
     die( print_r( sqlsrv_errors(), true));
} 
```

# jquery - jQuery UI Sortable 与 slideToggle 结合使用时，拖动有时会失败（例如！）

> ID：10282517
> 
> 赞同：3
> 
> 时间：2012-04-23T14:27:56.897
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, slidetoggle

我遇到了一个问题，当使用 slideToggle 折叠其中一个列表时，使用 jQuery UI Sortable 进行排序失败。

这是一个演示：http: [//jsfiddle.net/BNJzB/52/](http://jsfiddle.net/BNJzB/52/)

说明：折叠第二个列表，将第一个列表中的项目拖到第三个列表中，然后尝试将第三个列表中的一个项目拖到第一个列表中。

我注意到一些奇怪的事情：

*   如果所有列表都展开，拖放将起作用
*   拖拽的成功率取决于窗口的滚动位置

我已经在最新的 Chrome 和 Firefox 中看到了这一点，但我还没有测试过 IE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T15:00:00.860

从 3 拖到 1 的元素被转储到 2 中。

这可能不是一个理想的解决方案，但如果您禁用折叠列表的删除，它可以正常工作。像这样更新你的点击处理程序（你也不应该使用`.live`！）

```
$weekday.live('click', function() {
    var $this = $(this), // store the header/trigger
        $list = $this.next('ul'); // store the list

    $this.toggleClass('open').next('ul').slideToggle().toggleClass('closed');

    if ($this.hasClass('open')) { // if the header has the 'open' class, it is being toggled off
        // remove sortable functionality
        $list.sortable('disable');            
    } else {
        $list.sortable('enable');           
    }
});​ 
```

在这里查看：http: [//jsfiddle.net/BNJzB/57/](http://jsfiddle.net/BNJzB/57/)

# c# - 使用 Lambda 表达式遍历 KeyValue 对的通用列表

> ID：10282518
> 
> 赞同：1
> 
> 时间：2012-04-23T14:27:56.960
> 
> 标签：c#, .net, lambda, c#-3.0

我是 Lambda 表达式的新手，所以一直在尝试一个小时。

我有一个通用列表 -**`List<KeyValuePair<int, string>>`** 基本上拿着一把钥匙

和一个值对。我正在寻找使用 lambda 表达式打印列表项。任何人都可以

帮助我使用 Lambda 表达式翻译以下 foreach 语句？

```
foreach(KeyValuePair<int, string> kvp in list)
{
    Console.WriteLine(kvp.Key.ToString() + " ----> " + kvp.Value.ToString());
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:32:02.340

通过通用[Converter(TInput, TOutput)](http://msdn.microsoft.com/en-us/library/kt456a2y.aspx)委托封装 LINQ 表达式：

```
Converter<List<KeyValuePair<int, string>>, string> converter = (input) =>
    {
        return input.Select(i => i.Key + " --> " + i.Value)
                    .Aggregate((a, n) => a + Environment.NewLine + n);
    }; 
```

**用法**：

```
string output = converter(items); 
```

**测试数据集**：

```
var items = new List<KeyValuePair<int, string>>
    {
            new KeyValuePair<int, string>(1, "111"),
            new KeyValuePair<int, string>(2, "222"),
            new KeyValuePair<int, string>(3, "333"),
    }; 
```

**输出**：

```
1 --> 111
2 --> 222
3 --> 333 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:36:30.433

很高兴我能够自己解决这个问题:)

```
list.ForEach(item => Console.WriteLine(item.Key.ToString()  + " ----> " + item.Value.ToString())); 
```

list：是您要遍历的列表的名称

```
list<string> names=new list<string>{"name1","name2","name3"}; 
names.ForEach(name=>Console.WriteLine(name)); // write names to the console
console.Readline(); // wait on console until input 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T18:43:37.627

在列表中使用 Foreach 方法

```
Array.ForEach(list.ToArray(), kvp=> Console.WriteLine(kvp.Key.ToString() 
+ " ----> " + kvp.Value.ToString())); 
```

# java - J2ME alternative for java.io.BufferedReader?

> ID：10282519
> 
> 赞同：2
> 
> 时间：2012-04-23T14:27:58.980
> 
> 标签：java, java-me, bufferedreader

I got a code from net and it uses

```
imports java.io.BufferedReader 
imports java.io.PrintWriter 
```

This code is in JAVA SE. But I need to do the same in J2ME(JAVA ME). But it doesn't have BufferedReader and PrintWriter?

What can be used instead of BufferedReader and PrintWriter?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T11:24:03.673

If [BufferedReader](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html) is there because of readLine method you can replace it by [InputStreamReader](http://java.sun.com/javame/reference/apis/jsr118/java/io/InputStreamReader.html) and use a method like:

```
    public String readLine(Reader reader) throws IOException {
        StringBuffer line = new StringBuffer();
        int c = reader.read();

        while (c != -1 && c != '\n') {
            line.append((char)c);
            c = reader.read();
        }

        if (line.length() == 0 && c == -1) {
            return null;
        }

        return line.toString();
    }

```

If [PrintWriter](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html) is there because of print methods you can replace it by [PrintStream](http://java.sun.com/javame/reference/apis/jsr118/java/io/PrintStream.html).

# validation - “POST”验证失败的示例内容类型？

> ID：10282520
> 
> 赞同：1
> 
> 时间：2012-04-23T14:28:03.017
> 
> 标签：validation, http, rest

假设 HTTP 服务器`POST`使用 400 响应代码响应请求，因为请求验证失败（例如未找到电子邮件地址）。如果服务器希望向客户端提供有关错误性质的更多信息，应该如何返回？对于请求中使用的每种可能的内容类型，理想情况下是否应该存在关联的“错误”内容类型？

例如，给定请求

```
POST /users
Content-Type: application/x-myuser

{
    "email": "foo@example.com",
    "name": "Michael"
} 
```

回应可能是

```
400 Bad Request
Content-Type: application/x-myuser-error

{
    "email": "Email address foo@example.com not found"
} 
```

有没有公​​开可用的“错误”内容类型的好例子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:37:08.413

我没有任何示例，但最好始终牢记这些示例：

*   始终包含机器可读的错误，并尽可能概括。JSON结构，如

    `{"error":"Email address not found!","code":"fielderror","field":"email","reason":"notfound"}`（可以简化为`{"error":"...","code":"emailnotfound"}`）

    允许 API 开发人员正确地向用户显示错误（并对错误采取行动），同时它允许您在不破坏应用程序的情况下更改消息。它也确实有助于翻译错误消息，无论是在您端还是在外部开发者端。

*   另一种方法是不返回任何正文，并使用 HTTP 标头告诉用户代理出了什么问题。例如，您可以使用`X-Error`and`X-Error-Code`来显示人类可读的错误和机器可读的代码。
*   创建过多的内容类型可能是一件坏事。我个人更喜欢始终使用`application/json`并通过查看 HTTP 代码让用户代理知道状态：200、400、403、404、500 等。
*   绝对不要开始组合 HTTP 代码和内容类型。您不希望您的用户必须知道这`application/myapp/error`意味着存在错误，除非它是 200，在这种情况下您在编辑屏幕中，或者当它是 302 时，它实际上不是错误而是重定向。这就是为什么您可能应该坚持使用一种内容类型的原因。

底线：始终保持简单。确保在检测状态时必须查看**一个字段，而不是两个或三个字段。**一旦用户代理确定了状态，它就可以选择查看其他字段以获取额外信息，但前提是它确定出了问题。包括一个单独的内容类型可能无济于事。

# c++ - 调试断言失败：std::vector 下标超出范围

> ID：10282521
> 
> 赞同：2
> 
> 时间：2012-04-23T14:28:05.937
> 
> 标签：c++, stdstring, stdlist

我正在尝试解决这个问题，似乎我正在访问超出范围的索引，但是 VS 无法在错误发生的地方停止，这让我对造成这种情况的原因感到困惑。

**错误：**

> 调试断言失败！程序：.... 文件：c:\program files\microsoft visual studio 10.0\vc\include\vector 行：1440 表达式：字符串下标超出范围

**该程序的作用：**

有两个线程：

**线程 1：**

第一个线程使用 查找（除其他外）当前窗口中的更改`GetForegroundWindow()`，检查不是在循环上发生，而是在`WH_MOUSE_LL`触发事件时发生。数据被分成固定大小的结构，以便可以通过 tcp 发送到服务器。第一个线程将数据（窗口标题）记录到`std::list`当前结构中。

```
if(change_in_window)
{
    GetWindowTextW(hActWin,wTitle,256);
    std::wstring title(wTitle);
    current_struct->titles.push_back(title);
} 
```

**线程 2：**

调用第二个线程查找尚未发送的结构，并将它们的内容放入`char`缓冲区，以便可以通过 tcp 发送它们。虽然我不知道错误的确切位置，但从错误的类型来看，它与字符串或列表有关，这是我整个应用程序中使用列表/字符串的唯一代码（其余是常规数组）。还注释代码注释中提到的 if 块可以阻止错误的发生。

```
 BOOL SendStruct(DATABLOCK data_block,bool sycn)
    {
    [..]

                int _size = 0;
// Important note, when this if block is commented the error ceases to exist, so it has something to do with the following block
                if(!data_block.titles.empty()) //check if std::list is empty
                {

                    for (std::list<std::wstring>::iterator itr  = data_block.titles.begin(); itr != data_block.titles.end() ; itr++) {
                        _size += (((*itr).size()+1) * 2); 
                    } //calculate size required. Note the +1 is for an extra character between every title
                    wchar_t* wnd_wbuffer = new wchar_t[_size/2](); //allocate space
                    int _last = 0;
    //loop through every string and every char of a string and write them down
                    for (std::list<std::wstring>::iterator itr = data_block.titles.begin(); itr != data_block.titles.end(); itr++)
                    {
                        for(unsigned int i = 0; i <= (itr->size()-1); i++)
                        {

                            wnd_wbuffer[i+_last] = (*itr)[i] ;
                        }
                        wnd_wbuffer[_last+itr->size()] = 0x00A6; // separator
                        _last += itr->size()+1;
                    }

                    unsigned char* wnd_buffer = new unsigned char[_size];
                    wnd_buffer = (unsigned char*)wnd_wbuffer;
                    h_io->header_w_size = _size;
                    h_io->header_io_wnd = 1;
                    Connect(mode,*header,conn,buffer_in_bytes,wnd_buffer,_size);
                    delete wnd_wbuffer;
                }
                else
            [..]
                return true;
            } 
```

**我对线程同步的尝试：** 有一个指向创建的第一个数据块的指针（db_main）指向当前数据块的指针（db_cur）

```
//datablock format
    typedef struct _DATABLOCK
        {
            [..]
            int logs[512];
            std::list<std::wstring> titles;
            bool bPrsd; // has this datablock been sent true/false
            bool bFull; // is logs[512] full true/false
            [..]
            struct _DATABLOCK *next;
        } DATABLOCK;    

//This is what thread 1 does when it needs to register a mouse press and it is called like this:
    if(change_in_window)
    {
        GetWindowTextW(hActWin,wTitle,256);
        std::wstring title(wTitle);
        current_struct->titles.push_back(title);
    }
    RegisterMousePress(args);
    [..]
//pseudo-code to simplify things , although original function does the exact same thing. 
    RegisterMousePress()
        {
            if(it_is_full)
            {
                db_cur->bFull= true;
                if(does db_main exist)
                {
                    db_main = new DATABLOCK;
                    db_main = db_cur;
                    db_main->next = NULL;
                }
                else
                {
                    db_cur->next = new DATABLOCK;
                    db_cur = db_cur->next;
                    db_cur->next = NULL;

                }
                SetEvent(eProcessed); //tell thread 2 there is at least one datablock ready
            }
            else
            {
            write_to_it();
            }
        }
//this is actual code and entry point of thread 2 and my attempy at synchronization
    DWORD WINAPI InitQueueThread(void* Param)
    {
        DWORD rc;
        DATABLOCK* k;
        SockWClient writer;
        k = db_main;
        while(true)
        {
            rc=WaitForSingleObject(eProcessed,INFINITE);
            if (rc== WAIT_OBJECT_0)
            {   
                do
                {
                    if(k->bPrsd)
                    {
                        continue;
                    }
                    else
                    {   
                        if(!k)
                        {break;}
                        k->bPrsd = TRUE;
    #ifdef DEBUG_NET
                        SendStruct(...);
    #endif

                    }
                    if(k->next == NULL || k->next->bPrsd ==TRUE || !(k->next->bFull))
                    {
                        ResetEvent(eProcessed);
                        break;
                    }

                } while (k = k->next); // next element after each loop
            }
        }
        return 1;

    } 
```

**细节：**

现在有些事情让我相信错误不存在，因为子字符串错误非常罕见。当按下 Mouse_Down+Wnd+Tab 滚动窗口并按住它一段时间时，我只能以 100% 的机会重现它（虽然它当然也发生在其他情况下）。我避免发布整个代码，因为它有点大并且不可避免地会造成混乱。如果错误不在这里，我将编辑帖子并添加更多代码。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:41:06.437

这里似乎没有任何线程同步。如果一个线程从结构中读取而另一个写入，则可能在初始化期间读取它，其中包含一个空字符串（或介于两者之间的无效字符串）的非空列表。

如果发布的函数之外没有互斥锁或信号量，则可能是问题所在。

尽管我没有尝试运行它，但所有大小计算似乎对 Windows 都是有效的……而`<= … -1`不是`<`in `i <= (itr->size()-1)`和`2`而不是`sizeof (wchar_t)`in `new wchar_t[_size/2]();`有点奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T22:49:36.073

您的代码的问题在于，虽然线程 2 正确地等待数据并且线程 1 正确地通知了它们，但线程 2 并没有阻止线程 1 在它仍在处理数据的同时对其进行任何操作。用于解决此类问题的典型设备是监视器模式。

它由一个互斥锁（用于保护数据，在您访问它们时保存）和一个条件变量（=Windows 术语中的事件）组成，它将向消费者传达有关新数据的信息。

生产者通常会获取互斥体，生成数据，释放互斥体，然后触发事件。

消费者更棘手 - 它必须获取互斥锁，检查是否有新数据可用，然后使用暂时释放互斥锁的 SignalObjectAndWait 函数等待事件，然后处理新获取的数据，然后释放互斥锁。

# c# - 任何现有的字典 > 其中值集合不能包含键

> ID：10282528
> 
> 赞同：1
> 
> 时间：2012-04-23T14:28:36.203
> 
> 标签：c#, dictionary

我需要以下内容（为简洁起见，此处使用字符串作为类型）：

```
MyDictionary : IDictionary<string, List<string>>
{
    private readonly Dictionary<string, List<string>> _collection;
    ...
    // The collection cannot contain the key
    public void Add(string key, List<string> value)
    {
        _collection.Add(key, new List<string>(value.RemoveAll(p => p == key));
    }
} 
```

所以在使用中你可能有：

```
string myName = "Superstringcheese";
List<string> myFriends = new List<string> {"John", "Jane", "Jerry"};

string yourName = "Someone";
List<string> yourFriends = new List<string> {"John", "Bill", "Ted"};

var myDic = new MyDictionary();

// It's okay that each of us (each key) has some friends that are the same. It's not okay for me to have myself as a friend. The add method would check if the key is contained by the value collection and remove it if necessary.
myDic.Add(myName, myFriends);
myDic.Add(yourName, yourFriends); 
```

在我重新发明任何轮子之前，是否有一个本机集合类型可以做到这一点，或者有人知道流行的实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:45:42.987

好吧，我可以帮助解决这一点：

> 是否有执行此操作的本机集合类型？

不。

# javascript - 跨所有客户端同步数据

> ID：10282529
> 
> 赞同：-1
> 
> 时间：2012-04-23T14:28:38.393
> 
> 标签：javascript, node.js, synchronized

几周前，我观看了一个可以在客户端之间同步数据的框架的演示视频。它显示了 2 个显示数据列表的浏览器。当一个新项目插入其中时，它也会出现在第二个中。

我忘了给这个网站添加书签。我不太了解它是用什么语言编写的，但我怀疑 node.js 是什么语言。现在想研究一下这个同步数据的机制，但是再也找不到这个框架了。

谁能回忆起这样的框架或类似的“技术”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:38:37.567

您可能看过 Meteor 的截屏视频：
[http](http://www.meteor.com/screencast)
://www.meteor.com/screencast 只是一个疯狂的猜测 :)

# entity-framework - 实体框架 - 重新开始 - 撤消/回滚所有迁移

> ID：10282532
> 
> 赞同：170
> 
> 时间：2012-04-23T14:28:43.687
> 
> 标签：entity-framework, entity-framework-4.3, entity-framework-migrations

出于某种原因，我的迁移似乎已经混乱/损坏/无论如何。我现在只想重新开始，那么有没有办法完全撤消所有迁移，擦除历史记录并删除迁移代码，所以我又回到了原点？

例如）`PM> Disable-Migrations`或`Rollback-Migrations`

我不想“更新”到原始迁移步骤（即类似`InitialSchema`目标的东西），因为我再也找不到它了。

* * *

## 回答 #1

> 赞同：363
> 
> 时间：2012-04-23T14:35:12.233

您可以使用以下方法回滚到任何迁移：

```
Update-Database -TargetMigration:"MigrationName" 
```

如果要回滚所有迁移，可以使用：

```
Update-Database -TargetMigration:0 
```

或同等学历：

```
Update-Database -TargetMigration:$InitialDatabase 
```

在某些情况下，您还可以删除数据库和所有迁移类。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2017-06-23T09:58:01.517

对于实体框架核心：

```
Update-Database -Migration:0
Remove-Migration 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-16T00:38:55.077

需要明确的是，如果使用 LocalDb，当您想从头开始时，只需通过 Database Explorer 删除数据库，然后`enable-migrations -force`在 Package Manager Console 中键入。不要通过 App_Data 文件夹删除数据库，否则您将遇到以下[问题](https://stackoverflow.com/questions/13001441/delete-mdf-file-from-app-data-causes-exception-cannot-attach-the-file-as-databa)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-09-15T13:54:40.440

```
Update-Database -Migration 0
Remove-Migration 
```

文档在这里：[https ://docs.microsoft.com/en-us/ef/core/miscellaneous/cli/powershell#update-database 在这里：](https://docs.microsoft.com/en-us/ef/core/miscellaneous/cli/powershell#update-database) [https](https://docs.microsoft.com/en-us/ef/core/miscellaneous/cli/powershell#remove-migration) : //docs.microsoft.com/en-us/ef [/core/miscellaneous/cli/powershell#remove-migration](https://docs.microsoft.com/en-us/ef/core/miscellaneous/cli/powershell#remove-migration)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-05-17T09:56:46.320

我猜他们的文档写错了，对我来说我用过

```
Update-Database -Target MigrationName 
```

# php - PHP PDFlib Unicode

> ID：10282537
> 
> 赞同：1
> 
> 时间：2012-04-23T14:29:13.733
> 
> 标签：php, unicode, pdflib, persian

是否可以以 UTF-8 呈现 pdf。波斯语或阿拉伯语字符？我不想使用 tcpdf。它在通过 php 脚本制作 pdf 期间存在性能问题。我将尝试最新版本的 php 5.4 和 pdflib 8.0.4p2 但我看不到有效的波斯语单词。

```
<?php 

try {
    $p = new PDFlib();

    /*  open new PDF file; insert a file name to create the PDF on disk */
    if ($p->begin_document("", "") == 0) {
        die("Error: " . $p->get_errmsg());
    }

    $p->set_info("Creator", "hello.php");
    $p->set_info("Author", "Rainer Schaaf");
    $p->set_info("Title", "Hello world (PHP)!");

    $p->begin_page_ext(595, 842, "");

    $font = $p->load_font("Courier", "unicode", "");

    $p->setfont($font, 24.0);
    $p->set_text_pos(50, 700);
    $p->show("Hello world!");
    $p->continue_text($p->utf8_to_utf16("(says PHP) سلام جهان", 'utf16'));
    $p->end_page_ext("");

    $p->end_document("");

    $buf = $p->get_buffer();
    $len = strlen($buf);

    header("Content-type: application/pdf");
    header("Content-Length: $len");
    header("Content-Disposition: inline; filename=hello.pdf");
    print $buf;
}
catch (PDFlibException $e) {
    die("PDFlib exception occurred in hello sample:\n" .
    "[" . $e->get_errnum() . "] " . $e->get_apiname() . ": " .
    $e->get_errmsg() . "\n");
}
catch (Exception $e) {
    die($e);
}
$p = 0; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T17:09:34.943

主要问题是 Courier 字体没有您要打印的阿拉伯文本的字形。如果您使用像 Arial Unicode 这样的字体，您将看到预期的结果。

另一个提示，使用`$p->set_parameter("textformat", "utf8");` then 你可以直接使用 utf8，如`$p->continue_text("(says PHP) سلام جهان x");`

# java - 将短信/彩信/联系人从安卓传输到网络服务器

> ID：10282539
> 
> 赞同：0
> 
> 时间：2012-04-23T14:29:22.810
> 
> 标签：java, android, android-ksoap2

在投反对票之前，请注意我只征求专家意见，而不是源代码。

我正在开发一个 android 应用程序，它将在网络服务器上同步联系人/短信/彩信。

哪些 Web 服务技术适合这个应用程序并且易于在服务器端解析？

在发送到服务器之前将联系人等转换为文本文件是否正确，因为我可能无法将彩信和图片信息转换为文本文件？我希望用户从服务器恢复他们的数据。将数据下载到手机时，数据格式会不会有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:36:35.447

REST Web 服务通常是移动设备的最佳选择，因为它们重量轻，这意味着它们在解析 JSON 响应时需要较少的处理和电话资源。

这是一个问题的链接，该问题处理通过 Java 中的 REST Web 服务接受附件

[如何编写一个接受二进制文件 (pdf) 的宁静 Web 服务](https://stackoverflow.com/questions/1156429/how-do-i-write-a-restful-web-service-that-accepts-a-binary-file-pdf)

但是 REST 不如 SOAP 安全，因为它是您可能需要考虑的个人数据。此外，根据新闻中发生的这种数据从手机中删除的经验，您可能需要考虑根本不这样做，因为它可能成为数据隐私法的噩梦。

# bash - 使用 tr 删除特定字符串

> ID：10282540
> 
> 赞同：30
> 
> 时间：2012-04-23T14:29:23.307
> 
> 标签：bash, unix, command, tr

`tr`是否可以在 UNIX-Shell 中使用命令删除特定字符串？例如：如果我输入：

```
tr -d "1." 
```

并且输入是`1.1231`，它将显示`23`为输出，但我希望它显示`1231`（注意只有第一个`1`已经消失）。我该怎么做？

如果您知道解决方案或更好的方法，请解释语法，因为我不想只是复制和粘贴，还想学习。

我对 awk 有很大的问题，所以如果你使用它，请进一步解释。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T14:39:24.760

在上面的示例中，**cut**命令就足够了。

示例：`echo '1.1231' | cut -d '.' -f 2`将返回`1231`.

有关**cut**的更多信息，只需键入`man cut`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-23T14:39:31.937

最好使用某种正则表达式（可能是 sed 之类的）。

例如，对于输入 1.1231，您可以使用以下命令来获取 1231 输出：

```
sed 's/1\.//g' 
```

也许看看这里： [http ://tldp.org/LDP/abs/html/string-manipulation.html](http://tldp.org/LDP/abs/html/string-manipulation.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-23T14:33:29.987

您也可以将 sed 用于此类事情：

```
$ echo "1.1231" | sed -e "s/1\.//"
1231 
```

这只是使用 sed 运行正则表达式搜索和替换，替换“1”。（带有适当的转义）与“”。默认情况下它只删除第一个匹配项。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-23T14:34:08.813

如果您正在使用，您可以通过[参数替换](http://tldp.org/LDP/abs/html/parameter-substitution.html)`bash`轻松做到这一点：

```
$ a=1.1231
$ echo ${a#1.}
1231 
```

这将删除*前导* `"1."`字符串。如果要删除直到第一次出现（包括第*一次*出现），请使用`${a#*1.}`，如果要删除直到最后一次出现（包括*最后一次*出现），请使用`${##*1.}`.

[关于字符串操作](http://tldp.org/LDP/abs/html/string-manipulation.html)的 TLDP 页面有更多选项（例如子字符串提取）。

请注意，使用标准`sh`内置字符串操作工具进行此类简单转换总是比使用外部工具（例如 ）要快得多`sed`，`awk`或者`cut`因为 shell 不必创建子进程来执行操作。但是，对于更复杂的事情（例如，您需要使用正则表达式或输入较大时），您最好使用专用工具。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-23T15:36:39.037

既然你专门问了`awk`，这里还有一个。

```
awk '{ gsub(/1\./,"") }1' input.txt 
```

正如任何`awk`教程都会告诉你的那样，程序的一般形式`awk`是一系列“条件{动作}”。如果您没有任何操作，则默认操作是打印。如果您没有条件，则将无条件地采取行动。该程序使用这两种特殊情况。

第一部分是一个没有条件的动作，即所有行都会执行。操作是用任何内容替换所有出现的正则表达式`/1\./`。所以这将修剪任何“1”。（无论上下文如何）从一行。

第二部分是没有动作的条件，即如果条件为真则打印，并且条件始终为真。这是“我们完成了 - 打印我们现在拥有的任何东西”的常见习语。它仅由常数组成`1`（当用作条件时，简单地表示“真”）。

这可以通过多种方式重新表述。例如，您可以将打印因素纳入第一个操作；

```
awk '{ gsub(/1\./,""); print }'  input.txt 
```

也许您想替换整数部分，即句号之前的任何数字。正则表达式将类似于`/[0-9]+\./`.

`gsub`是一个 GNU 扩展，因此如果您需要对遗留语法的可移植性，您可能希望用`sub`某种循环替换它。`awk`

# mercurial - mercurial update hook 给了我权限被拒绝的错误

> ID：10282544
> 
> 赞同：0
> 
> 时间：2012-04-23T14:29:37.630
> 
> 标签：mercurial, permissions, dvcs, mercurial-hook

我正在使用 SSH 推送到远程服务器上的中央 mercurial 存储库。

我挂了一个钩子，这样远程仓库就会更新：

```
[hooks]
changegroup = hg update >&2 
```

当我尝试推送到远程仓库时，推送成功，但我得到了这个输出：

```
remote: added 1 changesets with 1 changes to 1 files
remote: abort: Permission denied: /var/www/sites/businesslicenses/.hgignore
remote: warning: changegroup hook exited with status 255 
```

对我有什么想法吗？？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:57:07.437

如果您使用 SSH 并且未在服务器上设置专用用户帐户，那么您需要确保：

*   必要的用户在一个共同的组中，并且
*   新创建的文件属于该组
*   新创建的文件是组可写的

有关更多信息，请参阅[wiki 中的“文件系统方法”](http://mercurial.selenic.com/wiki/MultipleCommitters)。通常，我发现在服务器上使用专用用户然后通过将 SSH 公钥添加到`.ssh/authorized_keys`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:38:25.363

检查 /var/www/sites/businesslicenses/.hgignore 是否归当前用户所有，不归 root 所有。

# function - Solr中连接字段的函数

> ID：10282553
> 
> 赞同：4
> 
> 时间：2012-04-23T14:30:09.353
> 
> 标签：function, solr, concatenation

有没有办法在 Solr 中连接两个字段值，例如对这些连接的值进行排序或分组，例如`http://localhost:8983/solr/select?q=*:*&sort=concat(field1, field2)`？

更新：连接这些字段的目的是允许对连接的字段进行分组/折叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:22:34.523

对于排序，这将具有相同的结果：`&sort=field1 asc, field2 asc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T13:33:06.117

我希望有这样的功能。已经有 jira 了：[SOLR-3702 :: String concatenation function](https://issues.apache.org/jira/browse/SOLR-3702)。但还没有解决..随时upvote :)

# php - 在php中的字符串中查找主题标签

> ID：10282562
> 
> 赞同：1
> 
> 时间：2012-04-23T14:30:46.840
> 
> 标签：php

我想在我的字符串周围添加一个链接，即

```
 "My new Tweet **#new** this is cool". 
```

我想将#new 标签包含在一个链接中。

之后，我会得到：

```
 "My new Tweet <a href="http://twitter.com/search/%23new">new</a> this is cool. 
```

我怎么能那样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:37:35.720

试试这个：

```
$string = "My new Tweet **#new** this is cool".
$linked_string = preg_replace('/\*\*(\#(.*?))\*\*/', '<a href="http://twitter.com/search/$1">$2</a>', $string); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:35:50.673

假设您的 hastags 仅包含字母和数字，您可以使用以下代码：

```
$string = preg_replace('/\*\*#([a-zA-Z0-9]+)\*\*/', '<a href="http://twitter.com/search/%23$1">$1</a>', $string); 
```

您可以根据需要轻松更改正则表达式的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:37:32.860

这可能会这样做：

```
$yourString = 'My new Tweet **#new** this is cool';

$yourString = preg_replace_callback('/\*\*(#(.+?))\*\*/', function($matches) {
    $html = '<a href="http://twitter.com/search/%s">%s</a>';
    return sprintf($html, urlencode($matches[1]), htmlentities($matches[2]));
}, $yourString); 
```

# vb.net - 为什么赋值运算符在 VB.NET 中不能重载？

> ID：10282565
> 
> 赞同：7
> 
> 时间：2012-04-23T14:30:52.953
> 
> 标签：vb.net, operator-overloading

为什么赋值运算符（+=、-=、*=、/=）在 VB.NET 中不能重载？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T14:39:19.770

也许[这](http://connect.microsoft.com/VisualStudio/feedback/details/90424/need-assignment-operator-to-be-overloadable)是他们的推理：

> 感谢您的建议！我们不允许您为某个类型重载赋值运算符，因为目前无法确保其他语言或 .NET Framework 本身将遵守赋值运算符。唯一的替代方法是限制重载赋值运算符可以执行的类型，但我们认为这太严格而无法普遍使用。
> 
> 谢谢！Paul Vick 技术主管，VB

有一种叫做“Narrowing”和“Widening”的东西，它允许你定义从一种类型到另一种类型的显式和隐式转换器，即

```
Dim y as MyClass1
Dim x as MyClass2 = y 
```

但这并不能改变赋值运算符来分配同一类的实例，而只能转换其他类。

请参阅[如何：定义转换运算符](http://msdn.microsoft.com/en-ca/library/yf7b9sy7%28VS.80%29.aspx)

```
Class MyClass1
    Public Shared Widening Operator CType(ByVal p1 As MyClass1) As MyClass2

    End Operator
End Class 
```

* * *

[在 C# 中相同](http://msdn.microsoft.com/en-us/library/8edha89s.aspx)

> `+=, -=, *=, /=, %=, &=, |=, ^=, <<=, >>=`
> 
> 赋值运算符不能重载，但 +=，例如，使用 + 计算，可以重载。

`=, ., ?:, ??, ->, =>, f(x), as, checked, unchecked, default, delegate, is, new, sizeof, typeof`

> 这些运算符不能重载。

使用相同的[转换运算符](http://msdn.microsoft.com/en-us/library/85w54y0a.aspx)：

```
struct MyType1
{
    ...
    public static explicit operator MyType1(MyType2 src)  //explicit conversion operator
    {
        return new MyType1 { guts = src.guts };
    }
} 
```

# java - 避免在加密和编码的 URL 字符串中出现换行符

> ID：10282566
> 
> 赞同：7
> 
> 时间：2012-04-23T14:30:53.993
> 
> 标签：java, encryption

我正在尝试实现一个简单的字符串编码器来混淆 URL 字符串的某些部分（以防止它们被用户弄乱）。我使用的代码几乎与[JCA 指南](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#SimpleEncrEx)中的示例相同，除了：

*   使用 DES（假设它比 AES 快一点，并且需要更小的密钥）和
*   Base64 编码/解码字符串以确保它对 URL 保持安全。

由于我无法理解的原因，输出字符串以换行符结尾，我认为这不起作用。我无法弄清楚是什么原因造成的。关于更容易阅读的类似内容的建议或指向其他一些阅读资源的指针？我发现所有的密码学参考有点过头了（而且矫枉过正），但是一个简单的 ROT13 实现将不起作用，因为我想处理更大的字符集（并且不想浪费时间实现一些可能有我没有想到的晦涩字符的问题）。

示例输入（无换行符）：

```
http://maps.google.com/maps?q=kansas&hl=en&sll=42.358431,-71.059773&sspn=0.415552,0.718918&hnear=Kansas&t=m&z=7 
```

示例输出（如下所示的换行符）：

```
GstikIiULcJSGEU2NWNTpyucSWUFENptYk4m5lD8RJl8l1CuspiuXiE9a07fUEAGM/tC7h0Vzus+
jAH6cT4Wtz2RUlBdGf8WtQxVDKZVOzKwi84eQh2kZT9T3KomlnPOu2owJ/2RAEvG+QuGem5UGw== 
```

我的编码片段：

```
final Key key = new SecretKeySpec(seed.getBytes(), "DES");
final Cipher c = Cipher.getInstance("DES");
c.init(Cipher.ENCRYPT_MODE, key);
final byte[] encVal = c.doFinal(s.getBytes());
return new BASE64Encoder().encode(encVal); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-14T19:15:23.330

只需`base64Str = base64Str.replaceAll("(?:\\r\\n|\\n\\r|\\n|\\r)", "")` 对编码的字符串执行。

当您尝试将其解码回字节时，它工作正常。我确实使用随机生成的字节数组对其进行了多次测试。显然，解码过程只是忽略换行符，无论它们是否存在。`com.sun.org.apache.xml.internal.security.utils.Base64` 我使用未测试的其他编码器测试了这个“确认工作” 。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T14:41:11.423

Base64 编码器通常会施加一些最大行（*块*）长度，并在必要时添加换行符。您通常可以配置它，但这取决于特定的编码器实现。例如，来自[Apache Commons](http://goo.gl/XZkXD)的类 有一个`linelength`属性，将其设置为零（或负数）会禁用行分隔。

顺便说一句：我同意另一个答案，因为今天几乎不建议使用 DES。此外，您只是“混淆”还是真正加密？谁有钥匙？整件事对我来说闻起来不太好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-08T10:48:53.813

导入 android.util.Base64；

...

返回新的 BASE64.encodeToString(encVal, Base64.NO_WRAP);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T14:42:07.847

虽然它与您的实际问题无关，但 DES 通常比 AES*慢*（至少在软件中），所以除非您*真的*需要保持较小的密钥，否则 AES 几乎肯定是一个更好的选择。

其次，加密（DES 或 AES）会/将在其输出中产生换行符是完全正常的。在没有它们的情况下产生输出将完全取决于 base-64 编码器，所以这显然是您需要查看的地方。

不过，看到 base-64 在其输出中定期插入换行符并不特别令人惊讶。base-64 编码最常见的用途是将原始数据放入电子邮件正文之类的东西中，在那里很长的行会导致问题。为了防止这种情况，数据被分成几部分，通常不超过 80 列（通常会少一些）。但是，在这种情况下，应该忽略换行符，因此如果有记忆的话，您应该可以删除它们。

# git - 确保数据库的 API 密钥和访问详细信息安全

> ID：10282570
> 
> 赞同：2
> 
> 时间：2012-04-23T14:31:11.967
> 
> 标签：git, security, node.js, nodejitsu

保持数据库的 API 密钥和访问详细信息安全的最佳做法是什么？

我们将使用 Nodejitsus 进行部署，`jitsu deploy`所以我的想法是拥有一个不属于 git 的配置文件。

我们当前的配置文件，我将拥有 .gitignore'd

```
module.exports = (app) ->

    app.configure 'development', ->

        global.config = 
            dbUrl: 'mongodb://username:password@host:port/closet'
            foursquare:
                client_id: 'xxx'
                client_secret: 'xxx'
                redirect_uri: 'http://127.0.0.1:3000/account/auth/foursquare/done'

        return

    app.configure 'production', ->

        global.config = 
            dbUrl: 'mongodb://username:password@host:port/closet'
            foursquare:
                client_id: 'yyy'
                client_secret: 'yyy'
                redirect_uri: 'http://example.com/account/auth/foursquare/done'

        return

    return 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T02:24:47.123

通常我所做的是将我的配置存储在 a 中`config.json`，将其添加到 my`.gitignore`中，然后包含 a`.npmignore`以便 npm 不使用`.gitignore`来决定捆绑什么。这样，git 不会添加 config.json，但 jitsu 会在部署时将其捆绑。

正如 booyaa 所建议的，env 变量也可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T08:08:53.190

您可以使用命令将 API 密钥（和其他机密）存储为环境变量`jitsu env`。然后使用 process.env 在你的 node.js 应用程序中获取这些变量。

# php - 如何在 codeigniter 中启用 PHP 本机会话？

> ID：10282572
> 
> 赞同：1
> 
> 时间：2012-04-23T14:31:28.370
> 
> 标签：php, codeigniter

我正在尝试将 Facebook 的 API 集成到 CodeIgniter 项目中，但它似乎无法正常工作，因为在 CodeIgniter 中以某种方式禁用了会话。（尝试在 CodeIgniter 外部集成工作，但在 codeigniter 项目内部它不起作用）。

有没有办法做到这一点？我想要的只是 CodeIgniter 不会清除或破坏本机会话。如果唯一的方法是破解核心以删除一两行，那么我愿意这样做。我认为它在某个地方做`$_SESSION = null`或类似的事情。这个地方在哪里，所以我可以删除那条线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:40:05.993

如果您在全新 CI 安装上关注此博客，它可以正常工作：

[http://www.dannyherran.com/2011/02/facebook-php-sdk-and-codeigniter-for-basic-user-authentication/](http://www.dannyherran.com/2011/02/facebook-php-sdk-and-codeigniter-for-basic-user-authentication/)

从那里，您可以继续构建您的应用程序，或找出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:34:47.883

有一个库可以扩展 CI 会话（它们是 cookie）以使用本机服务器会话。

看看这个[本机会](https://github.com/EllisLab/CodeIgniter/wiki/Native-session)话库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:35:33.323

在 CI 会话中未禁用。它必须在您的手动编码中完成。请再次参考您的编码。

也有可能是一些 jQuery - JS 在项目中发生冲突，这可能会破坏会话。

# android - WidgetID 未在 android 中添加

> ID：10282574
> 
> 赞同：0
> 
> 时间：2012-04-23T14:31:37.527
> 
> 标签：android, android-widget

我有一个扩展类，`AppWidgetProvider`负责显示小部件。在我的`onUpdate`方法中，我初始化了小部件列表，并将所有它的 id 放入链表中。

而且我还有一个方法`updateWidget()`，它遍历这个小部件链接列表并每 10 秒更新一次。因此，当我有一个小部件实例时，一切正常，但是当我尝试添加几个小部件时，我遇到了以下问题：要将第二个小部件添加到该链接列表，我需要先添加它，然后删除它，然后再添加它<并且只有在那之后，这个小部件 id 才会被添加到该链接列表中，所以只有在那之后它才会更新。

可能是什么问题，我怎样才能获得我的小部件的正常工作流程？提前谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:41:07.960

似乎每个小部件都有一个小部件列表 (mAppWidgetList)。您可能应该考虑将其更改为静态或其他东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:41:29.557

我昨天已经回答了类似的问题。请检查

[Android：更新更多小部件的警报](https://stackoverflow.com/questions/10264399/android-alarm-for-update-more-widget/10265232#10265232)

您不必使用小部件 ID 来更新小部件的所有实例。使用[public void updateAppWidget (ComponentName provider, RemoteViews 视图)](http://developer.android.com/reference/android/appwidget/AppWidgetManager.html#updateAppWidget%28android.content.ComponentName,%20android.widget.RemoteViews%29)来更新小部件。

# continuous-integration - Entity Framework 4.3.1 Migrate.exe 非零退出代码

> ID：10282576
> 
> 赞同：4
> 
> 时间：2012-04-23T14:31:45.583
> 
> 标签：continuous-integration, teamcity, entity-framework-4.3

我们正在使用 Entity Framework 4.3.1 的 migrate.exe 工具从我们的 TeamCity 构建服务器运行数据库迁移，作为我们持续集成和部署自动化的一部分。我们遇到的其中一个问题是 migrate.exe 工具在失败时不会发出非零退出代码：

```
C:\<path>\packages\EntityFramework.4.3.1\tools>migrate.exe AppContext /startupdirectory:C:\<path>\bin\Debug /startupconfigurationfile:C:\<path>\Web.config /verbose
<Bunch of successful migrations>
Applying explicit migration: 201202212004585_UpdateTable
VERBOSE: ALTER TABLE [TableA] DROP CONSTRAINT [FK_TableA_TableB]
System.Data.Entity.Migrations.Design.ToolingException: 'FK_TableA_TableB' is not a constraint.
Could not drop constraint. See previous errors.
   at System.Data.Entity.Migrations.Design.ToolingFacade.Run(BaseRunner runner)
   at System.Data.Entity.Migrations.Design.ToolingFacade.Update(String targetMig
ration, Boolean force)
   at System.Data.Entity.Migrations.Console.Program.Run()
   at System.Data.Entity.Migrations.Console.Program.Main(String[] args)
ERROR: 'FK_TableA_TableB' is not a constraint.
Could not drop constraint. See previous errors.

C:\<path>\packages\EntityFramework.4.3.1\tools>echo %errorlevel%
0 
```

当迁移失败并且应该失败时，这导致 Team City 将构建传递为“成功”。

我们的临时解决方法是在构建日志中查找“错误：”并在发生这种情况时使构建失败，但这种解决方案很粗糙，我们无法判断 EF 是否失败或其他具有类似日志条目的进程。

有什么更好的解决方法的建议吗？一种使 migrate.exe 正常运行的方法，或者一种让 Team City 了解失败是特定于 migrate.exe 的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:21:37.040

此错误已在 EF 5 RC 中修复： - 为用户使用具有“dbo”以外的默认架构的登录会导致运行时失败

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T23:47:59.950

[http://blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on-nuget.aspx](http://blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on-nuget.aspx)

此版本还包括对 Beta 2 中发现的以下错误的修复：

*   ...
*   迁移：Migrate.exe 失败后未设置错误代码

# java - Hibernate 不想加载 Oracle 驱动程序

> ID：10282577
> 
> 赞同：2
> 
> 时间：2012-04-23T14:31:46.200
> 
> 标签：java, oracle, hibernate

我下载了 Hibernate 4.1.2 并使用 Oracle Database 10g 第 2 版。我使用的 JDBC 驱动程序是`ojdbc14.jar`.

我将 HibernateUtil 类设置为：

```
public class HibernateUtil {
    private static final SessionFactory sessionFactory = buildSessionFactory();

    private static SessionFactory buildSessionFactory() {
        // Create the SessionFactory from hibernate.cfg.xml
        try{
            Configuration configuration = new Configuration();
            configuration.configure();
            ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();        
            return configuration.buildSessionFactory(serviceRegistry);
        }catch(HibernateException ex){
            ex.printStackTrace();
            throw ex;
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

在`hibernate.properties`我有：

```
hibernate.dialect org.hibernate.dialect.OracleDialect
hibernate.connection.driver_class oracle.jdbc.driver.OracleDriver
hibernate.connection.username HR
hibernate.connection.password HR
hibernate.connection.url jdbc:oracle:thin:@localhost:1521/xe 
```

但是 Hibernate 不想加载驱动程序。它抛出一个异常，说“没有找到合适的驱动程序”。

我试图加载驱动程序，`Class.forName("oracle.jdbc.driver.OracleDriver");`它工作正常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-27T12:39:51.567

问题在于使用了错误的 JDBC Oracle 驱动程序。当我尝试`ojdbc6.jar`一切正常时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:53:26.567

有几件事：

*   尝试通过在键和值之间放置*=*来使属性文件有效
*   检查值后是否没有任何尾随空格
*   使用`oracle.jdbc.OracleDriver`而不是`oracle.jdbc.driver.OracleDriver`. 请参阅[Oracle jdbc 驱动程序类之间的区别？](https://stackoverflow.com/questions/6202653/difference-between-oracle-jdbc-driver-classes)以供进一步参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:07:40.880

您的连接 URL 配置错误，应该是：

```
hibernate.connection.url jdbc:oracle:thin:@localhost:1521:xe 
```

Oracle URL 的更多信息可以参考[这里](http://docs.oracle.com/cd/B14117_01/java.101/b10979/urls.htm)。

正如其他答案指出的那样：

使用`oracle.jdbc.OracleDriver`代替`oracle.jdbc.driver.OracleDriver`

# python - 如何从 memcached 中删除旧的烧杯会话？

> ID：10282581
> 
> 赞同：2
> 
> 时间：2012-04-23T14:31:57.877
> 
> 标签：python, session, memcached, beaker

根据[烧杯文件](http://beaker.readthedocs.org/en/latest/sessions.html#removing-expired-old-sessions)：

> Beaker 不会**在**其任何后端自动删除过期或旧 cookie。此任务由开发人员根据会话的使用方式和后端留给开发人员。

使用[mcinspect](http://pypi.python.org/pypi/memcacheinspector/0.2.0)我发现我的 memcached 实例确实保留会话记录的时间比会话有效/正在使用的时间长得多。

从 memcached 中删除已删除/过期/旧/无效的烧杯会话的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:36:16.213

你在问什么，或者你为什么问这个？您是指逻辑中的无效/旧，还是它们实际上已过期？

如果它们在 memcached 中真的过期了，那么出于所有实际目的，它们将“消失”-> 它们将不会被退回，并且空间可用于新会话。无需做任何事情

如果它们在其他域中是旧的/无效的，并且您无法检查，您可能需要刷新您的 memcached，但这会删除您的所有条目。

# .htaccess - 如何组合多个域？

> ID：10282583
> 
> 赞同：1
> 
> 时间：2012-04-23T14:32:02.263
> 
> 标签：.htaccess, dns

假设我有一个网站的 3 个域。其中之一是主域。例如：

1）abc.com（主域）

2) myabc.com

3) abcmy.com

如果要安排域 2 和 3，当用户进入 myabc.com 或 abcmy.com 时，他/她会重定向到 abc.com（浏览器中的 URL 必须更改为 abc.com）

我可以通过编辑 htaccess 文件来使用吗？（请假设我不能使用插件域）

编程语言：PHP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:38:14.153

是的，您可以使用 mod_rewrite 在您的 .htaccess 中执行此操作。

这应该可以解决问题：

```
RewriteEngine on

RewriteCond %{HTTP_HOST} ^www.myabc.com$ [OR]
RewriteCond %{HTTP_HOST} ^myabc.com$     [OR]
RewriteCond %{HTTP_HOST} ^www.abcmy.com$ [OR]
RewriteCond %{HTTP_HOST} ^abcmy.com$

RewriteRule ^(.*)$ http://www.abc.com/$1 [L,R=301] 
```

# jdbc - 如果没有在 java 代码中关闭，JDBC 连接可以存活多长时间？

> ID：10282585
> 
> 赞同：1
> 
> 时间：2012-04-23T14:32:10.723
> 
> 标签：jdbc

如果我在我的 java 代码中打开一个 JDBC 连接并忘记关闭它，它会永远保持打开状态吗？或者是否有我可以在某处指定的默认超时值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:35:15.447

首先，您确实需要修复代码以关闭它。没有理由。

至于具体问题，这取决于所使用的数据库服务器。数据库服务器将超时并回收它。有关默认值以及如何更改它，请参阅 DB 服务器特定的管理手册。例如 MySQL，它的`wait_timeout`设置默认为 28800 秒（8 小时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T21:42:44.797

这取决于 JDBC 驱动程序实现的细节。有些可能会超时。当连接对象被垃圾收集并调用 finalize 时，有些可能会关闭，但是（1）您不知道停止引用对象后多久会被垃圾收集，以及（2）finalize 没有被可靠地调用。

# sencha-touch-2 - Sencha touch 2.0：商店加载，首次可用

> ID：10282586
> 
> 赞同：0
> 
> 时间：2012-04-23T14:32:11.127
> 
> 标签：sencha-touch-2

我试图弄清楚何时可以在我的应用程序中使用商店。我从文档中发现，如果我想显示商店中的信息，我应该听商店的“刷新”事件，以便在它被更改时得到通知（因此也在它第一次加载时）。

但是，使用以下示例：

```
Ext.define('MyApp.store.Config', {  
extend: 'Ext.data.Store',
config: {
    autoLoad: true,
    autoSync: true,
    model: 'MyApp.model.Config',        
    listeners: {
        refresh: function() {
            console.log(Ext.StoreManager.get('Config').getAt(0))
        }
    }
} }); 
```

'console.log' 在启动时被调用两次，第一次失败（似乎商店尚未加载）。我的模型使用代理（类型 ajax 和 json 阅读器）。

有人可以告诉我应该如何避免这个错误吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T19:26:38.390

我找到了原因...

我在我的 app.js 和我的控制器中都声明了 'stores:['Config']' 属性。

很难发现，但我的错误......

# android - Android：有没有在一组应用程序后面显示图像的方法？

> ID：10282588
> 
> 赞同：0
> 
> 时间：2012-04-23T14:32:24.307
> 
> 标签：android, user-interface

我有一个由几个单独的应用程序组成的整体应用程序。我想在这些应用程序后面显示一个通用图像，但要集中控制背景。

我的问题是：在一组常见应用程序后面是否有显示图像（或任何其他 UI）的模式/技术？我知道墙纸服务；但是我不相信这是正确的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:30:31.430

我可能会：

1.  给我所有的根布局一个 root ( `android:id="@+id/root"`)的 id
2.  如果可能的话，让我的所有活动都从库项目中的单个源继承，该源在创建时设置根背景，否则只需将它们各自设置为从 3 中检索的根背景。
3.  创建一个保留并返回当前背景的系统服务（可能作为一个单独的应用程序），并通过 AIDL 与其对话以在运行时设置您的图像

# yii - Yii 模型从字段中获取文本，而不复制文本

> ID：10282591
> 
> 赞同：0
> 
> 时间：2012-04-23T14:32:30.970
> 
> 标签：yii

我有一个字段-> 标签文本，

我如何输出所有条目标签？没有重复

```
eg:
entry1 -  tags: one, two, three
entry2 -  tags: two, five 
```

我希望能够输出所有（一、二、三、五）而没有重复

那么我如何在模型/控制器中找到它并将其输出以查看？

我用吗，

```
key::model()->findAll()   ?? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:49:53.917

在你的行动控制器中，你需要放这样的东西

```
$data = key::model()->findAll();
$all = array();
foreach ($data as $d) {
    $all = array_merge($all, explode(', ',$d->tags));
}
$all = array_unique($all);
$this->render('index', array(
    'data' => $all,
)); 
```

并鉴于这样的事情

```
echo implode(', ',$data); 
```

阅读： http: [//php.net/manual/en/ref.array.php](http://php.net/manual/en/ref.array.php)

和这个：

[http://www.yiiframework.com/doc/guide/1.1/en/basics.view](http://www.yiiframework.com/doc/guide/1.1/en/basics.view)

[http://www.yiiframework.com/doc/guide/1.1/en/basics.controller](http://www.yiiframework.com/doc/guide/1.1/en/basics.controller)

# java - 从 Java 调用 GnuWin 命令还是有更好的方法？

> ID：10282595
> 
> 赞同：0
> 
> 时间：2012-04-23T14:32:36.710
> 
> 标签：java, runtime

我需要知道文件列表中是否包含特定字符串。文件列表是动态的，我必须检查字符串的动态列表。这必须在 Java 中完成才能处理结果（真或假）。并且 MS Windows 也是一个要求。

我想到了这个问题，我尝试使用 unix 的方式来做到这一点：

```
find C:/temp | xargs grep import -sl 
```

使用 GnuWin，这可以在 cmd 中正常工作。所以我试图把它转换成Java语言。我阅读了许多关于使用 Runtime 类和 ProcessBuilder 类的文章。但是没有一个技巧是有效的。最后我尝试了以下两个代码片段：

```
String binDir = "C:/develop/binaries/";

List<String> command = new ArrayList<String>();
command.add("cmd");
command.add("/c");
command.add(binDir+"find");
command.add("|");
command.add(binDir+"xargs");
command.add(binDir+"grep");
command.add("import");
command.add("-sl");

ProcessBuilder builder = new ProcessBuilder(command);
builder.directory(new File("C:/temp"));
final Process proc = builder.start();

printToConsole(proc.getErrorStream());
printToConsole(proc.getInputStream());

int exitVal = proc.waitFor(); 
```

和

```
String binDir = "C:/develop/binaries/";
String strDir = "C:/temp/";

String[] command = {"cmd.exe ", "/C ", binDir + "find.exe " + strDir + " | " + binDir + "xargs.exe " + binDir + "grep.exe import -sl" };

Runtime runtime = Runtime.getRuntime();
Process proc = runtime.exec(command);

printToConsole(proc.getErrorStream());
printToConsole(proc.getInputStream());

int exitVal = proc.waitFor(); 
```

我还尝试了许多其他方法来连接命令，但要么我收到一条错误消息（例如，找不到文件），要么进程永远不会回来。

我的问题： 1\. 你知道更好的方法来完成这项工作吗？2\. 如果没有：您在代码中看到任何错误吗？3\. 如果没有：您有其他方法我应该尝试运行该命令吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:56:22.320

从我的头顶：

```
File yourDir = new File("c:/temp");
File [] files = yourDir.listFiles();
for(File f: files) {
     FileInputStream fis = new FileInputStream(f);
     try {
         BuffereReaded reader = new BufferedReader(new InputStreamReader(fis,"UTF-8")); // Choose correct encoding
         String s;
         while(((s=reader.readLine())!=null) {
             if (s.contains("import"))
              // Do something (add file to a list, for example). Possibly break out the loop
         }
     } finally {
           if (fis!=null)fis.close();
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:08:30.737

Java 对子进程的支持很弱，尤其是在 Windows 上。如果您真的*不需要*，请避免使用该 API 。

相反，[this SO question](https://stackoverflow.com/q/2056221/301832)讨论了如何替换`find`递归搜索，并且`grep`应该很容易（尤其是[`FileUtil.readLines(…)`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#readLines(java.io.File))帮助）。

# ios - 用“，”分隔？

> ID：10282597
> 
> 赞同：0
> 
> 时间：2012-04-23T14:32:39.243
> 
> 标签：ios, xcode

我遍历这样的数组。

```
NSArray *array = [[currentRaum raumattribute] allObjects];

    NSString *compositeString = [ [ NSString alloc ] init ];
    for( Raumattribute *attr in array ){
        compositeString = [ NSString stringWithFormat:@"%@ %@",compositeString, attr.attributname ];
    [raumAttributLabel setText:compositeString]; 
```

我想要这样的输出----> Cat,Dog,Mouse

但如果我这样做：

```
compositeString = [ NSString stringWithFormat:@"%@ %@,",compositeString, attr.attributname ]; 
```

输出是猫，狗，老鼠，

或者如果我这样做：

```
compositeString = [ NSString stringWithFormat:@"%@ ,%@",compositeString, attr.attributname ]; 
```

输出它的 ,Cat,Dog,Mouse

有解决办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:36:32.120

您可以使用数组`valueForKey:`和`componentsJoinedByString:`方法来做到这一点：

```
NSString * compositeString =  [[array valueForKey:@"attributname"] componentsJoinedByString:@","] 
```

`valueForKey:`将为每个数组元素创建属性名称值数组

`componentsJoinedByString:`将这些值连接成一个用逗号分隔的字符串

# php - GroceryCrud 表关系 set_model（连接表）[已编辑]

> ID：10282598
> 
> 赞同：0
> 
> 时间：2012-04-23T14:32:52.573
> 
> 标签：php, codeigniter-2, grocery-crud

我有两个这样的表：

```
CREATE TABLE `tblFacilityHrs` (
          `id` int(11) NOT NULL AUTO_INCREMENT,
          `uid` varchar(45) DEFAULT NULL,
          `title` varchar(100) DEFAULT NULL,
          `description` text,
          PRIMARY KEY (`id`),
          KEY `key_uid` (`uid`)
        ) ENGINE=InnoDB AUTO_INCREMENT=9 DEFAULT CHARSET=latin1$$

        CREATE TABLE `tblFacilityHrsDateTimes` (
          `id` int(11) NOT NULL AUTO_INCREMENT,
          `owner_uid` varchar(45) DEFAULT NULL,
          `startDate` date DEFAULT NULL,
          `endDate` date DEFAULT NULL,
          `startTime` time DEFAULT NULL,
          `endTime` time DEFAULT NULL,
          `days` int(2),
          `recurrence` int(1) DEFAULT NULL,
          PRIMARY KEY (`id`),
          KEY `fk_fh_owneruid` (`owner_uid`),
          CONSTRAINT `fk_fh_owneruid` FOREIGN KEY (`owner_uid`) REFERENCES `tblFacilityHrs` (`uid`) ON DELETE CASCADE ON UPDATE CASCADE
        ) ENGINE=InnoDB AUTO_INCREMENT=52 DEFAULT CHARSET=latin1$$ 
```

> id uid 标题 描述 位置
> 8ada0ceabd40d509c3fb38f2822a97de11bc6628 Swim Lessons Parent and Child Classes CRC 2 543a6ed0005ff6a0a7fc99cc2f9715d86804ecb0 Swim Lessons Level 1, Session 1 3 7d219b64be6dc706135bdad3e7c2f0d56cb7f353 Swim Lessons Level 2 4 f7c91e2f1daa9c696c22f5aa5736c167d1ba9f94 Swim Lessons Level 3 5 262f06fb75645248162aa983f610ec7959a2011b Swim Lessons Level 4 6 51f9f552ffc5fa4bc8b4e7f914fb22b3b0920c2e Bike 275 Participate in this program and take 4 Fitness Cycling classes and获得免费水瓶！参与者只能注册1次。这是一个免费的程序！在多功能厅注册。7 0cca3515ec8ee990c863e474fee634ae94d382c2 健身护照 参加北欧健身课程，盖上护照并赢取免费 T 恤！在 4 月 10 日至 5 月 1 日期间参加 8 节健身课程并获得免费 T 恤。
> 
> id owner_uid startDate endDate startTime endTime days
> recurrance 8ada0ceabd40d509c3fb38f2822a97de11bc6628 4/13/2012 4/13/2012 0:00:00 NULL NULL None 2 543a6ed0005ff6a0a7fc99cc2f9715d86804ecb0 NULL NULL 12:30:00 2:00:00 2 3 7d219b64be6dc706135bdad3e7c2f0d56cb7f353 NULL NULL NULL NULL NULL NULL 4 f7c91e2f1daa9c696c22f5aa5736c167d1ba9f94 NULL NULL NULL NULL NULL NULL 5 262f06fb75645248162aa983f610ec7959a2011b NULL NULL NULL NULL NULL NULL 6 51f9f552ffc5fa4bc8b4e7f914fb22b3b0920c2e NULL NULL NULL NULL NULL NULL 7 0cca3515ec8ee990c863e474fee634ae94d382c2 NULL NULL NULL NULL NULL NULL

在我的控制器文件夹中，我有一个名为 main.php 的文件，其中包含以下代码：

```
...
function fitnessSchedule()
    {
        $this->config->set_item('url_suffix', '');
        $crud = new grocery_CRUD();

        $crud->set_model('schedule_model');
        $crud->set_table('tblFitnessClasses');
        $crud->join_table('tblFitnessClasses','tblFitnessClassDateTimes');
        $crud->columns('title','description','location','startDate','endDate','startTime', 'endTime', 'days', 'recurrance');
        $crud->display_as('title','Event')
             ->display_as('description','Description')
             ->display_as('location','Location')
             ->display_as('startDate','Start Date')
             ->display_as('endDate','End Date')
             ->display_as('startTime','Start Time')
             ->display_as('endTime','End Time');
        $crud->required_fields('title','location');
        $crud->set_subject('Event');              

        $output = $crud->render();
        $this->_example_output($output);    
    }

    function _example_output($output = null)    
    {
        $this->load->view('main_view', $output);    
    }
... 
```

在我的模型文件夹中，我有这个：

```
<?php
class schedule_model extends grocery_CRUD_Model
{
        function join_table($table1, $table2)
        {
         if($this->$table1 === null)
          return false;

         $select = "{$this->$table1}.*";
         $select .=",$table2.startDate, $table2.endDate, $table2.startTime, $table2.endTime, $table2.days, $table2.recurrence";

         if(!empty($this->relation))
          foreach($this->relation as $relation)
          {
           list($field_name , $related_table , $related_field_title) = $relation;
           $unique_join_name = $this->_unique_join_name($field_name);
           $unique_field_name = $this->_unique_field_name($field_name);

        if(strstr($related_field_title,'{'))
                $select .= ", CONCAT('".str_replace(array('{','}'),array("',COALESCE({$unique_join_name}.",", ''),'"),str_replace("'","\\'",$related_field_title))."') as $unique_field_name";
           else   
                $select .= ", $unique_join_name.$related_field_title as $unique_field_name";

           if($this->field_exists($related_field_title))
                $select .= ", {$this->$table1}.$related_field_title as '{$this->$table1}.$related_field_title'";
          }

         $this->db->select($select, false);

         $this->db->join('uid', '$table2.owner_uid = $table1.uid');

         $results = $this->db->get($this->$table1)->result();

         return $results;
        }

        /* function join_table($table1, $table2)
        {
                $this->db->select('$table1.*');
                $this->db->join('$table2','$table1.uid = $table2.owner_uid','left');
                $this->db->get('$table1');
         }*/
}
?> 
```

我收到此错误：

> 致命错误：在第 234 行调用 C:\xampp\htdocs\codeigniter\application\controllers\main.php 中未定义的方法grocery_CRUD::join_table()

我基本上试图通过 UID（uid 到 owner_uid）将 tblFacilityHrs 与 tblFacilityHrsDateTimes 连接起来。我想一次显示两个表格，这样当用户编辑表格时，他们不仅可以编辑事件的名称/位置，还可以编辑其时间/日期等。

参考：[http ://www.grocerycrud.com/documentation/options_functions/set_model](http://www.grocerycrud.com/documentation/options_functions/set_model)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-18T17:39:21.987

我有同样的问题，以下是我所做的解决方案。

1.  使用 mySQL 连接语句为要连接的表创建视图
2.  查找状态 ($cur_state=$crud->getState();) 并查看它是否为 "list,ajaxlist,read 或 success" 然后我设置 $crud->set_table('VIEW_NAME'); 并设置主键 $crud->set_primary_key('KEY','VIEW_NAME');
3.  对于其他部分，我使用表名本身，以便它有助​​于添加、编辑操作。

这个解决方案工作得很好。

```
$crud = new grocery_CRUD();
$cur_state=$crud->getState();
$crud->set_subject('Patient Notes');        

/* Use the mySQL view to display the data with related tables */
if(($cur_state=="list") || ($cur_state=="ajaxlist") || ($cur_state=="read") ||     ($cur_state=="success"))     
{
   $crud->set_table('patientsnotes_vw');
   $crud->columns('noteID','Clinic_No','note','noteCreated','username');
   $crud->set_primary_key('noteID','patientsnotes_vw');             

   if($cur_state=="read")
   {
    $crud->unset_fields('noteCreatedBy','user_id','patientID');                      
       }
}
else
{
        /* Use the patient_note table itself for add/edit operation */
        $crud->set_table('patient_notes');
    $crud->columns('noteID','Clinic_No','note','noteCreated','username');
    $crud->required_fields('note');
    $crud->field_type('noteCreatedBy', 'hidden', $this->userID);
    $crud->field_type('patientID', 'hidden', 1);
    $crud->unset_add_fields('noteCreated');
    $crud->unset_edit_fields('noteCreated');        
 }

  $crud->display_as('username','Note Created by');
  $crud->display_as('noteCreated','Note Created at');       
  $output = $crud->render(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T13:47:20.890

在[这个论坛帖子](http://www.grocerycrud.com/forums/topic/352-how-to-create-view-for-a-field-from-all-tables-it-is-related-to/)中，web-johnny 声明此功能尚无法实现。

> 这是杂货店 CRUD 还没有此功能的 1-1 关系。这取决于我将来有多少时间来做这件事和/或到那时我是否有任何好的捐赠。
> 
> 这个功能很重要，做起来也很复杂，但我认为当它出现时它会为许多用户节省大量时间。

也许如果你提供 web-johnny 认为是好的捐赠，他可能会实施它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T17:46:03.377

类grocery_CRUD ($crud = new shipping_CRUD(); ) 本地化在文件夹库中，您在模型中实现join_table。

# c# - 绑定如何与 SQL Server 和 Telerik 图表一起使用？

> ID：10282600
> 
> 赞同：0
> 
> 时间：2012-04-23T14:33:01.910
> 
> 标签：c#, silverlight, xaml, mvvm, telerik

如何将 SQL Server 中的数据绑定到 Telerik 折线图？

目前我的设置是我有一个计划任务来检索一些信息（为了简单起见，假设这只是一个整数值）。然后，此信息与运行计划任务的日期时间一起存储在我的数据库中。

我想做的是创建这个整数随时间变化的图表（沿 Y 轴标记值，沿 X 轴标记时间）。

Teleriks 网站上的大多数绑定示例都涉及一个静态类，其中数据被硬编码到 XAML 文件中。

对我来说，按照我的意愿构建和检索数据的最佳方式是什么？

我正在查看[这个](http://www.telerik.com/help/silverlight/radchart-features-datetime-support.html)示例，但是它没有详细说明如何从绑定中实际检索数据以及绑定如何工作。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:43:34.067

最近我参与了这样一个项目，这就是我的做法（虽然我的有点复杂，因为我必须在同一张图表上显示多条线），希望它对你有所帮助。

我的数据表采用以下格式：

```
Tours   dtMonthno   dtMonth               dtYear
115                1    Jan                 2012
102                2    Feb                 2012
105                3    Mar                 2012
78                 4    Apr                 2012 
```

我的代码如下，其中 y 轴是 Tours，x 轴是 dtMonthno（实际月份数）：

```
 DataTable dt = GetGroupChartData(Convert.ToDateTime(txtStartDate.Text), Convert.ToDateTime(txtEndDate.Text + " 23:59"));

            ChartSeries chartSeries = new ChartSeries();
            radGroups.Clear();
            chartSeries.DataYColumn = "Tours";
            radGroups.ChartTitle.TextBlock.Text = "Groups";
            chartSeries.Name = "Tours";

            radGroups.PlotArea.XAxis.LayoutMode = Telerik.Charting.Styles.ChartAxisLayoutMode.Inside;
            chartSeries.Appearance.LineSeriesAppearance.Color = System.Drawing.Color.Blue; 

            //set y axis color
            radGroups.PlotArea.YAxis.AxisLabel.TextBlock.Appearance.TextProperties.Color = System.Drawing.Color.Red;
            radGroups.PlotArea.YAxis.Appearance.Width = 3;
            radGroups.PlotArea.YAxis.Appearance.Color = System.Drawing.Color.Red; 
            chartSeries.Type = ChartSeriesType.Line;

            radGroups.PlotArea.XAxis.DataLabelsColumn = "dtMonth";
            radGroups.PlotArea.XAxis.AxisLabel.TextBlock.Text = "Months";

            //set x axis color
            radGroups.PlotArea.XAxis.AxisLabel.TextBlock.Appearance.TextProperties.Color = System.Drawing.Color.Red; 
            radGroups.PlotArea.XAxis.Appearance.Width = 3;
            radGroups.PlotArea.XAxis.Appearance.Color = System.Drawing.Color.Red;
            radGroups.AddChartSeries(chartSeries);

            // visually enhance the data points
            chartSeries.Appearance.PointMark.Dimensions.Width = 5;
            chartSeries.Appearance.PointMark.Dimensions.Height = 5;
            chartSeries.Appearance.PointMark.FillStyle.MainColor = System.Drawing.Color.Black;
            chartSeries.Appearance.PointMark.Visible = true;

            radGroups.DataSource = dt;
            radGroups.DataBind(); 
```

# asp.net - System.Net.Mail.SmtpFailedRecipientException：不允许邮箱名称

> ID：10282602
> 
> 赞同：5
> 
> 时间：2012-04-23T14:33:07.073
> 
> 标签：asp.net, smtpclient

我编写了 ASP.Net 代码来从 domain1.com 邮件帐户（例如 abc@domain1.com）发送邮件。否则此代码可以正常工作，并且邮件会发送。但是，当在 domain2.com 上执行相同的代码时，即使使用正确的 userid-pwd 也会出现以下错误：

System.Net.Mail.SmtpFailedRecipientException：不允许使用邮箱名称。服务器响应是：抱歉，该域不在我的 System.Net.Mail.SmtpClient.Send(MailMessage message) 允许的 rcpthosts (#5.7.1) 列表中

有没有什么办法解决这一问题？

如果我们必须将此域添加到允许的 rcphosts 列表中，该怎么做？

编写的代码是这样的：

```
MailMessage message;
bool success;
message = new MailMessage(from, to);
Attachment file;
SmtpClient lclient;

lclient = new SmtpClient("mail.domain1.com", 587);
lclient.EnableSsl = false;

message.Body = body;
message.BodyEncoding = System.Text.Encoding.UTF8;
message.IsBodyHtml = true;
message.Subject = subject;
message.SubjectEncoding = System.Text.Encoding.UTF8;

lclient.SendCompleted += new 
SendCompletedEventHandler(SendCompletedCallback);
lclient.UseDefaultCredentials = false;
lclient.Credentials = new NetworkCredential(userID, password);
try
{

  lclient.Send(message);
  success = true;
  if (message != null)
      message.Dispose();
  success = true;
  return (success);
}
catch (Exception ex)
{  
    //...
} 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:35:03.197

代码工作正常。该错误是来自 SMTP 服务器的拒绝。从 Domain1 访问服务器时，似乎允许您通过它转发邮件。从 Domain2 访问时，它不会。更改这将是 SMTP 服务器上的配置。

请注意，这是 SMTP 服务的常见做法。他们通常不允许任何人通过他们向任何地址发送邮件。（这会使它们对垃圾邮件发送者和其他此类不需要的活动敞开大门。）因此，如果您尝试从 Domain1 外部访问 Domain1 的 SMTP 服务，它可能只是拒绝该服务。

# .htaccess - htaccess - 重写 URL 以包含 CSS 和 JS

> ID：10282603
> 
> 赞同：0
> 
> 时间：2012-04-23T14:33:10.233
> 
> 标签：.htaccess

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{REQUEST_URI} !(.*)\.(css|js|htc|pdf|jpg|jpeg|gif|png|ico)$ [NC]
RewriteRule ^(.*)$ index.php?path=$1 [QSA,L] 
```

这个 .htaccess 将所有内容重定向到`index.php?path=SOMETHING`我可以拾取它的位置（某些路径）并显示适当的内容（视图）。

问题在于包含`.css/.js`文件。

如果我使用`www.website.com/something`一切正常（css 路径就像`/css/style.css`它正在搜索`www.website.com/css/style.css`）。但是如果我使用`www.website.com/something/2`一切都会崩溃，因为它正在`www.website.com/something/css/style.css`文件夹中搜索。

如何将根（？）每次设置为`www.website.com`（无论路径是什么）？所以我**仍然应该可以访问我的“路径”变量**`/some/...`，但是在包含我的文件时，一切都应该指向网站根目录而不是路径。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:20:46.857

**问题在于您如何编写指向 css/js/image 文件的链接。**

而不是使用当前页面的相对 URL 包含 css/js/images：

```
href="css/style.css" 
```

您应该使用相对于根目录的 URL（**注意前导斜杠**）：

```
href="/css/style.css" 
```

或使用绝对 URL（将包括域名 - 不太受欢迎的方法）。

当网站使用 Nice URLs/URL Rewritting 时，这是设计网站（html 部分）时的典型错误。这是 - 现在重写引擎会破坏 URL - 是浏览器`/something/css/style.css`首先发送它们（ ）。

# css - 仅对第一级的子元素应用样式

> ID：10282604
> 
> 赞同：17
> 
> 时间：2012-04-23T14:33:13.977
> 
> 标签：css

```
<ul>
  <li> <span> apply </span> </li>
  <li> <span> apply </span> </li>
  <li> 
    <ul>
      <li> <span> ignore </span> </li>
      <li> <span> ignore </span> </li>
    </ul>
  </li>
</ul> 
```

如何将 CSS 规则仅应用于第一级的 span 元素，并使嵌套列表中的 span 元素忽略该规则？

这可以在不专门重置第二级跨度的属性的情况下完成吗？

尝试过`ul > li span`，但似乎不起作用，我也将样式应用于第二级

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-23T14:36:26.290

将您的列表放在带有 ID 的包装 div 中，例如`<div id="ul-wrapper">`，然后尝试：

```
#ul-wrapper > ul > li > span {
    /* my specific CSS */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:36:54.363

```
 #container >  ul > li span { /* - Your CSS Here - */  } 
```

需要指定一个容器，这样只能选择第一级ul。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:37:11.737

只要外部的父级`ul`不是 another `li`，您就可以将其用作选择器的起点（例如假设它是 a `div`）：

```
div > ul > li span {
    /* Whatever */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:37:08.937

```
ul > li > span {border:solid 1px red;}
li > ul > li > span {border:none 1px red;}; 
```

# php - 使用 smarty 和 codeigniter

> ID：10282605
> 
> 赞同：1
> 
> 时间：2012-04-23T14:33:22.203
> 
> 标签：php, codeigniter, smarty

我想同时使用 codeigniter 和 smarty。即我想使用 html 文件而不是 smarty 的 codeigniter 的 .tpl.php 文件。这可能吗？或者我该怎么做？我搜索了很多，找到了一些例子，但没有一个符合我要求的作品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T12:07:02.417

您应该创建一个库`Smarty_tpl.php`：

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed');
//smarty class
require BASEPATH . "../../smarty/libs/Smarty.class.php";

class Smarty_tpl extends Smarty {

function __construct(){
    parent::__construct();

    $smarty_dir = BASEPATH . "../../smarty/libs/";

    $this->setTemplateDir(APPPATH."views/templates");
    $this->setCompileDir(APPPATH."views/templates_c");
    $this->setCacheDir(APPPATH."views/cache");
    $this->setConfigDir(APPPATH."views/config");
    $this->setPluginsDir(array("$smarty_dir/plugins","$smarty_dir/sysplugins/"));
    $this->compile_check=   true;
    $this->force_compile=   true;
    $this->caching=         true;
    $this->cache_lifetime=  86400;
}
} 
```

及其使用：

```
$this->load->library("Smarty_tpl");
$this->smarty_tpl->display("..."); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:56:03.810

在 codeigniter 中有内置的模板库，为什么还要使用 smarty 呢？

# asp.net - 应用程序中的服务器错误找不到资源

> ID：10282607
> 
> 赞同：0
> 
> 时间：2012-04-23T14:33:43.230
> 
> 标签：asp.net, asp.net-mvc-3

我在一个 ASp.net mvc 3 项目中工作，我不断收到这个错误，可以找到任何帮助来解决这个问题

```
Server Error in '/' Application.
The resource cannot be found.
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) 
could have been removed, had its name changed, or is temporarily unavailable.      Please       review  the following URL and make sure that it is spelled correctly.

  Requested URL: /RoomType 
```

但我有 RoomType 控制器，在我的 Global.asax 中有：

```
 public static void RegisterRoutes(RouteCollection routes)
      {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.MapRoute(
     null, // we don't need to specify a name
     "Page{page}",
           new { Controller = "Room", action = "List" } 
```

);

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Room", action = "List", id = UrlParameter.Optional } // Parameter defaults
        );

        routes.MapRoute(
            null, // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Room", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        );
        routes.MapRoute(
           null, // Route name
           "{controller}/{action}/{id}", // URL with parameters
           new { controller = "RoomType", action = "Index", id = UrlParameter.Optional } // Parameter defaults
       ); 
```

这是我的 RoomTypeController ：

```
 using System;
   using System.Collections.Generic;
   using System.Data;
    using System.Data.Entity;
    using System.Data.Entity.Infrastructure;
     using System.Data.Objects;
       using System.Linq;
     using System.Web;
     using System.Web.Mvc;
     using MvcApplication4.Models;

     namespace MvcApplication4.Controllers
    {
    public class RoomTypeController : Controller
    {
    private hotelEntities db = new hotelEntities();

    //
    // GET: /RoomType/

    public ViewResult Index(int start = 0, int itemsPerPage = 20, string orderBy = "RoomType_ID", bool desc = false)
    {
        ViewBag.Count = db.Room_Type.Count();
        ViewBag.Start = start;
        ViewBag.ItemsPerPage = itemsPerPage;
        ViewBag.OrderBy = orderBy;
        ViewBag.Desc = desc;

        return View();
    }

    //
      // GET: /RoomType/GridData/?start=0&itemsPerPage=20&orderBy=RoomType_ID&desc=true

        public ActionResult GridData(int start = 0, int itemsPerPage = 20, string orderBy = "RoomType_ID", bool desc = false)
        {
        Response.AppendHeader("X-Total-Row-Count", db.Room_Type.Count().ToString());
         ObjectQuery<Room_Type> room_type = (db as   IObjectContextAdapter).ObjectContext.CreateObjectSet<Room_Type>();
        room_type = room_type.OrderBy("it." + orderBy + (desc ? " desc" : ""));

        return PartialView(room_type.Skip(start).Take(itemsPerPage));
    }

    //
    // GET: /Default5/RowData/5

    public ActionResult RowData(int id)
    {
        Room_Type room_type = db.Room_Type.Find(id);
        return PartialView("GridData", new Room_Type[] { room_type });
    }

    //
    // GET: /RoomType/Create

    public ActionResult Create()
    {
        return PartialView("Edit");
    }

    //
    // POST: /RoomType/Create

    [HttpPost]
    public ActionResult Create(Room_Type room_type)
    {
        if (ModelState.IsValid)
        {
            db.Room_Type.Add(room_type);
            db.SaveChanges();
            return PartialView("GridData", new Room_Type[] { room_type });
        }

        return PartialView("Edit", room_type);
    }

    //
    // GET: /RoomType/Edit/5

    public ActionResult Edit(int id)
    {
        Room_Type room_type = db.Room_Type.Find(id);
        return PartialView(room_type);
    }

    //
    // POST: /RoomType/Edit/5

    [HttpPost]
    public ActionResult Edit(Room_Type room_type)
    {
        if (ModelState.IsValid)
        {
            db.Entry(room_type).State = EntityState.Modified;
            db.SaveChanges();
            return PartialView("GridData", new Room_Type[] { room_type });
        }

        return PartialView(room_type);
    }

    //
    // POST: /RoomType/Delete/5

    [HttpPost]
    public void Delete(int id)
    {
        Room_Type room_type = db.Room_Type.Find(id);
        db.Room_Type.Remove(room_type);
        db.SaveChanges();
    }

    protected override void Dispose(bool disposing)
    {
        db.Dispose();
        base.Dispose(disposing);
     }
   }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:39:21.530

确保您的控制器类被调用`RoomTypeController`（而不是`RoomType`，而不是`RoomController`）并且它包含一个`Index`动作：

```
public class RoomTypeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }
} 
```

# zend-framework - ZendFramework echo db values if first string = a?

> ID：10282608
> 
> 赞同：-1
> 
> 时间：2012-04-23T14:33:55.530
> 
> 标签：zend-framework, zend-db

我现在有这段代码来回显我的所有数据库条目，我想知道如果 db 条目的第一个值为 a，那么在 ZF 中回显条目是什么样子的。

代码：

```
<table>
    <?php foreach($this->clubs as $clubs) : ?>
    <tr>
        <td><a href="<?php echo $this->url(array('controller' => 'club-description', 'action' => 'index', 'club_id' => $clubs->id));?>">
        <?php echo $this->escape($clubs->club_name);?></a></td>
        <td><?php echo $this->escape($clubs->rating);?></td>
    </tr>
    <?php endforeach; ?>
</table> 
```

谢谢

里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:57:38.543

因此，根据您的评论，您似乎想在页面上按字母对俱乐部进行分组。假设它们在您的数据库查询中按字母顺序排序，最简单的方法是保留一个变量，该变量存储循环中最后一个俱乐部的第一个字母。然后，在每次迭代中，您将当前俱乐部的第一个字母与前一个俱乐部的第一个字母进行比较。如果它们不同，则输出一个新标题。

使用您的代码，这看起来像这样：

```
<?php
$previousLetter = false;
?>
<table>
<?php foreach($this->clubs as $clubs) : ?>
    <?php
    $firstLetter = substr($clubs->_club_name, 0, 1);
    if ($firstLetter != $previousLetter) {
    ?>
    <tr>
        <td><?php echo $firstLetter; ?></td>
    </tr>
    <?php } ?>
    <tr>
        <td><a href="<?php echo $this->url(array('controller' => 'club-description', 'action' => 'index', 'club_id' => $clubs->id));?>">
        <?php echo $this->escape($clubs->club_name);?></a></td>
        <td><?php echo $this->escape($clubs->rating);?></td>
    </tr>
    <?php $previousLetter = $firstLetter; ?>
<?php endforeach; ?>
</table> 
```

# asihttprequest - 带有 ASIHTTPRequest 的 RestKit

> ID：10282617
> 
> 赞同：0
> 
> 时间：2012-04-23T14:34:37.027
> 
> 标签：asihttprequest, restkit

是否可以将 RESTKit 与 ASIHTTPRequest 一起使用？

我一直在使用 ASIHTTPRequest 但它似乎已被弃用，我读到 RESTKit 是较新的库。我只想知道如果以后需要的话，我是否可以回退到 ASIHTTPRequest。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:35:48.803

可以一起使用它们，但通常你应该可以用 RESTKit 替换 ASIHTTPRequest。有关将两者结合起来的方法，您可以在此处查看： [ASIHTTPRequest backed RestKit object mapping](https://stackoverflow.com/questions/10191714/asihttprequest-backed-restkit-object-mapping/10204511#10204511)

# node.js - 我应该如何使用 Meteor 运行 REST API？

> ID：10282623
> 
> 赞同：12
> 
> 时间：2012-04-23T14:35:01.440
> 
> 标签：node.js, express, meteor

我需要 Meteor 服务器来处理不是来自应用程序客户端的非常简单的 POST 请求。使用 Express，我只会做类似`app.post('/something', function...`.

Meteor 中是否有等价物？如果没有，我应该如何设置，在`is_server`上下文中启动 Express 服务器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T18:04:13.793

Meteor 还没有内置的功能来提供一个宁静的 API。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T19:57:14.930

您可以使用 Backbone 在我们的应用程序中构建基本路由，如此处提供的 Meteor 示例：http: [//meteor.com/examples/todos](http://meteor.com/examples/todos)

你可以这样做：

```
var AppRouter = Backbone.Router.extend({
  routes: {
    "": "dashboard",
    "home": "dashboard",
    "profile": "profile",
},

profile: function () {
    Session.set("current_view", "profile")
    this.navigate('profile', {trigger: true});
}, 
```

另请参阅：[如何使用 Meteor 公开 RESTful Web 服务](https://stackoverflow.com/questions/10150538/howto-expose-a-restful-web-service-using-meteor)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-15T13:53:45.803

或者，您可以使用meteor 使用[meteor-collectionapi](https://github.com/crazytoad/meteor-collectionapi) Atmosphere 包提供RESTful API。另请参阅[如果我需要额外的 REST API，是否可以选择 Meteor？](https://stackoverflow.com/a/11167874/396967).

# php - 如何从通用网页获取 favicon 的 URL？

> ID：10282626
> 
> 赞同：2
> 
> 时间：2012-04-23T14:35:03.507
> 
> 标签：php

考虑到 favicon 并不总是位于基本 url，我需要一种从通用网页获取 favicon 的 URL 的方法。

ps 不使用外部服务。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T14:39:47.727

页面的图标始终位于

*   域的根目录，然后是 /favicon.ico ( [http://example.com/favicon.ico](http://example.com/favicon.ico) )
*   或“快捷方式图标” <link> 标签所指向的 URI。

首先尝试对 /favicon.ico 的 HEAD 请求（CURL 应该能够做到这一点），如果这不起作用，请获取页面本身，解析 HTML 并查看是否可以找到匹配的标签。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:43:48.917

您可以使用[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)来获取内容并解析结果：

```
$html = file_get_html('http://www.google.com/');

$icon = '';
foreach($html->find('link') as $element) {
    if($element->rel == "shortcut icon" || $element->rel == "icon")
        $icon = $element->href;
} 
```

`link`注意：上面的代码仅在元素中指定图标时才获取图标

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:39:54.060

您可以使用 HTML 解析器来查找包含网站图标信息的链接标签。type 属性应设置为“image/x-icon”，rel 属性为“shortcut icon”或“icon”。href 属性将是网站图标的地址。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-11T03:30:11.803

使用`S2 service` 谷歌提供的。就这么简单

```
http://www.google.com/s2/favicons?domain=www.yourdomain.com 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-04-23T14:45:49.317

为了将来使用，要使用 jQuery 获取页面的图标，您可以使用

```
jQuery('link[rel*=icon]').attr('href'); 
```

# javascript - 理解 Javascript .replace() 中的正则表达式

> ID：10282627
> 
> 赞同：0
> 
> 时间：2012-04-23T14:35:04.230
> 
> 标签：javascript, regex

我不应该说我实际上有一个“问题”（代码似乎......工作？虽然有一次可能是由于环境原因导致控制台中的错误），但我正在挑选一段代码并我看到这个：

```
key = key.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]"); 
```

“key”被传递到包含这一行的函数中。正如您所料，它是一根绳子，最终被用作大海捞针。

它正在消毒*某些东西*，但我无法弄清楚它在消毒什么（主要是因为我猜我对正则表达式没有任何流利）。JSLint 也在咆哮（意外的']'），但我认为这是误报，因为它没有解析正则表达式。

不确定在 Stack Overflow 或 Code Review 上问这个问题，但它不是真正的“审查”，所以在这里。

您的正则表达式类型的人的任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T14:40:01.580

如果我做对了，它会用 和 替换`[`，`\[`所以`]`基本上`\]`是方括号的转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:30:41.043

这些都做同样的事情（全球）

```
var key = 'a[b] [c] [][]d'.replace(/[\[]/g,"\\\[").replace(/[\]]/g,"\\\]"); 
print(key);
var key = 'a[b] [c] [][]d'.replace(/[\[]/g,'\\[').replace(/[\]]/g,'\\]'); 
print(key);
var key = 'a[b] [c] [][]d'.replace(/([\[\]])/g,"\\$1"); 
print(key); 
```

# iphone - 我尝试翻转（镜像）UIImage 的方式有什么问题？

> ID：10282633
> 
> 赞同：5
> 
> 时间：2012-04-23T14:35:19.050
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我已经尝试了几天了。我正在创建一个精灵表加载器，但是我还必须能够加载面向相反方向的精灵。这涉及翻转我已经加载的图像。

我已经尝试使用 UIImageOrientation / UIImageOrientationUpMirrored 方法来执行此操作，但这绝对没有效果，只是以与以前完全相同的方向绘制框架。

从那以后，我尝试了一种稍微复杂的方法，我将在下面介绍。但是，仍然以与加载到应用程序中完全相同的方式简单地绘制图像。（未镜像）。

我已经包含了下面的方法（连同我的评论，以便您可以遵循我的思维模式），您能看到我做错了什么吗？

```
- (UIImage*) getFlippedFrame:(UIImage*) imageToFlip
{
//create a context to draw that shizz into
UIGraphicsBeginImageContext(imageToFlip.size);
CGContextRef currentContext = UIGraphicsGetCurrentContext();

//WHERE YOU LEFT OFF. you're attempting to find a way to flip the image in imagetoflip. and return it as a new UIimage. But no luck so far.
[imageToFlip drawInRect:CGRectMake(0, 0, imageToFlip.size.width, imageToFlip.size.height)];

//take the current context with the old frame drawn in and flip it.
CGContextScaleCTM(currentContext, -1.0, 1.0);

//create a UIImage made from the flipped context. However will the transformation survive the transition to UIImage? UPDATE: Apparently not.

UIImage* flippedFrame = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return flippedFrame;
} 
```

谢谢你，盖伊。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:42:13.643

我原以为您必须更改上下文的转换然后进行绘制。此外，您需要翻译，因为您正在翻转到负坐标，所以，替换

```
[imageToFlip drawInRect:CGRectMake(0, 0, imageToFlip.size.width, imageToFlip.size.height)];
CGContextScaleCTM(currentContext, -1.0, 1.0); 
```

与（根据评论编辑）

```
CGContextTranslateCTM(currentContext, imageToFlip.size.width, 0);      
CGContextScaleCTM(currentContext, -1.0, 1.0);
[imageToFlip drawInRect:CGRectMake(0, 0, imageToFlip.size.width, imageToFlip.size.height)]; 
```

注意：来自评论，要使用的类别

```
@implementation UIImage (Flip) 
  - (UIImage*)horizontalFlip { 
     UIGraphicsBeginImageContext(self.size); 
     CGContextRef current_context = UIGraphicsGetCurrentContext();                           
     CGContextTranslateCTM(current_context, self.size.width, 0);
     CGContextScaleCTM(current_context, -1.0, 1.0); 
     [self drawInRect:CGRectMake(0, 0, self.size.width, self.size.height)]; 
     UIImage *flipped_img = UIGraphicsGetImageFromCurrentImageContext(); 
     UIGraphicsEndImageContext(); 
     return flipped_img; 
  } 
@end 
```

# iphone - 从 iPhone/iPad 应用程序将图片发布到 Facebook

> ID：10282634
> 
> 赞同：-2
> 
> 时间：2012-04-23T14:35:20.607
> 
> 标签：iphone, objective-c, xcode, ipad

我为 iPad 和 iPhone 开发了一个使用相机拍照的应用程序

有人能告诉我将其发布到用户 Facebook 页面的最简单方法吗？

我需要使用 Facebook api 吗？我不是在写 Facebook 应用，只是想把图片贴在用户墙上。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:38:01.133

不使用 FB API 是没有意义的。可能有一些其他 API 使用 FB API 本身，但不确定..

我发现了一个类似的问题： [问题](https://stackoverflow.com/questions/6951253/how-to-post-image-to-facebook-wall-with-graph-api)

希望有帮助！

# maven - 阻止 Netbeans 打开依赖项项目

> ID：10282635
> 
> 赞同：0
> 
> 时间：2012-04-23T14:35:25.630
> 
> 标签：maven, netbeans

在 Netbeans 中打开我的大部分项目时，Netbeans 将自由打开似乎是大多数（但不是全部）依赖项和传递依赖项项目。虽然一开始这看起来不错，但我不想要这种行为；有些项目可能有 20-50 个依赖项。

我问过其他几个在工作中使用 Netbeans 的人，他们没有同样的问题。所以我假设这是一个我可能在过去某个时候设置的设置，然后很快就忘记了它。我找不到任何可疑的东西，谷歌对我帮助不大。行为就像我右键单击项目并选择“打开所需项目”一样。

我使用 Maven 3，只有当我在本地拥有源并且 Netbeans 已经“了解”该项目时才会打开项目（即，我过去曾打开过该项目）。

谁能让我指出正确的方向？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T02:41:59.480

*我不熟悉 NetBean 的 Maven 集成，所以这可能是一个不完整的答案*

在“打开项目”对话框的右侧，“项目名称”文本框下方有两个复选框。底部显示“打开所需项目”，如果选中，将打开所选项目所需的所有项目。根据您的描述，NetBeans 的行为就像已选中此复选框一样。

# c# - 当列表具有空值时 List.Sort() 失败

> ID：10282636
> 
> 赞同：3
> 
> 时间：2012-04-23T14:35:27.787
> 
> 标签：c#

我有一个用户控件，其中网格使用 ObjectDataSource 获取数据。网格中的所有列都是可排序的。如果用户单击特定列名，则列表将根据该列进行排序 (List.Sort(sortColumn))。

当其中一列在其字段中具有空白/空值时，我面临一个问题。当 strA/strB 为空或两者都为空时，比较行 strA.CompareTo(strB) 失败并显示“对象引用未设置为对象的实例”。

但是，我为 strA 和 strB 包含了 !string.IsNullOrEmpty() 以避免空引用异常。它仍然没有对网格进行排序。

代码片段如下所示。

```
int IComparer<MyWorklistItem>.Compare(MyWorkItem x, MyWorkItem y)
{
        int sortValue = 1;
        if (this.strSortField.Length == 0)
        {
            return 0;
        }
        MyWorkItem item1 = this.blnSortDesc ? y : x;
        MyWorkItem item2 = this.blnSortDesc ? x : y;

        PropertyInfo property1 = item1.GetType().GetProperty(this.strSortField);
        PropertyInfo property2 = item2.GetType().GetProperty(this.strSortField);

        string strA = (string)property1.GetValue(item1, null);
        string strB = (string)property2.GetValue(item2, null);

        if (!string.IsNullOrEmpty(strA) && !string.IsNullOrEmpty(strB))
        {               
            sortValue = strA.CompareTo(strB);
        }           
        return sortValue;
    } 
```

当其中一个值或两者都为空时，如何排序。

**注意：我使用的是 VS 2005，因此无法使用 LINQ。**

请建议。

谢谢，斯里拉姆

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:40:24.913

您可以使用静态`string.Compare`方法而不是实例方法来避免 null 问题，因为您总是在比较字符串属性。

[http://msdn.microsoft.com/en-us/library/system.string.compare.aspx](http://msdn.microsoft.com/en-us/library/system.string.compare.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:38:56.473

您`GetType`在进行空值检查之前调用变量。

如果您在其他任何事情之前进行空检查，则应该处理所有事情。

# macos - Couch DB 安装无法在 Mac OSx Lion 上运行

> ID：10282638
> 
> 赞同：3
> 
> 时间：2012-04-23T14:35:32.313
> 
> 标签：macos, installation, couchdb

我在使用 Homebrew 在 mac OSx Lion 上安装 Couch DB 时遇到问题。我执行命令

```
brew install couchdb 
```

但后来我对文件中的 mmd5 有疑问
`~/Library/Caches/Homebrew/spidermonkey-1.8.5.tar.gz`

我该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T17:59:03.667

**更新**

我发现了如何解决这个问题：

你必须删除文件

```
rm ~/Library/Caches/Homebrew/spidermonkey-1.8.5.tar.gz 
```

并通过运行更新您的 Homebrew

```
brew update 
```

你可能在这里遇到 git 问题（就像我一样）来解决它通过运行重置所有本地自制程序更改

```
git reset --hard
git clean -f -x -d 
```

并运行

```
brew update 
```

现在应该直接安装 couchdb

```
brew install couchdb 
```

（如果您正在运行 LION）：

```
brew install -v couchdb 
```

运行它类型

```
couchdb 
```

# android - Android 在另一个活动中导入意图内容

> ID：10282640
> 
> 赞同：1
> 
> 时间：2012-04-23T14:35:39.757
> 
> 标签：android, android-activity, android-intent

我试图将变量从一个活动发送到另一个我已经设置了发送到第二个活动的意图。我想知道的是在第二个活动中我需要做什么才能在 if 语句中使用该变量？

这是我的代码

```
Intent mainIntent = new Intent(TheLeagueActivity.this,IntroActivity.class);

                                    mainIntent.putExtra("leagueCount", leagueCount);

                                    TheLeagueActivity.this.startActivity(mainIntent);

                                    TheLeagueActivity.this.finish(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:46:31.197

String strExtra = getIntent().getExtras().getString("leagueCount");

...而已！;) （取决于你输入的数据类型，你必须使用“getInt（）”或……）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:57:30.447

取决于你的变量是什么。它似乎是一个int。所以你会这样调用：

```
int myVar = getIntent().getExtras().getInt("leagueCount");

if (myVar == 2) {
    //do the stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:57:57.730

在编写以下代码的`onCreate()`方法中`IntroActivity`

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    Intent intent = getIntent();

    // -1 is default value if no value associated with key "leagueCount"

    int leagueCount = intent.getIntExtra("leagueCount", -1);

   /*
      if leagueCount is not equal to -1
      use leagueCount here

   */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T14:47:59.263

在目标活动中，调用`getIntent`检索意图，然后使用`getStringExtra`,`getIntExtra`等来检索意图参数。

# javascript - 从同一类中的其他属性计算的 Javascript 类的属性

> ID：10282650
> 
> 赞同：21
> 
> 时间：2012-04-23T14:36:11.830
> 
> 标签：javascript, class, properties

这可能是我错过的一些非常愚蠢的事情，但是我如何让一个类的属性根据同一个类中其他属性的值自动重新计算？

例如

```
function Test() {
    this.prop1 = 1;
    this.prop2 = 2;
    this.prop3 = this.prop1 + this.prop2;

}

tester = new Test();

alert (tester.prop1); // expect 1
alert (tester.prop2); // expect 2
alert (tester.prop3); // expect 3

tester.prop1 += 1;

alert (tester.prop1); // expect 2
alert (tester.prop2); // expect 2
alert (tester.prop3); // expect 4 
```

还是我需要将 prop3 设置为 = calcProp3() 然后包含如下函数：

```
this.calcProp3 = function() {
        var calc = this.prop1 + this.prop2;
        return calc;
    } 
```

谢谢大家。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-23T14:38:29.927

> 还是我需要将 prop3 设置为 = calcProp3() 然后包含一个函数

你有两个选择：

1.  创建一个带有*getter*的属性，当你使用它时，它看起来像一个简单的属性访问，但实际上是在调用一个函数，或者

2.  执行您的`calcProp3`功能，这使编码人员可以清楚地`Test`知道他们正在调用一个功能

如果您需要支持像 IE8 这样真正过时的浏览器，选项 2 是您唯一的选择，因为 IE8 不支持 getter。

## 使用吸气剂

在 2017 年，您可能会在 a 中定义它`class`（如果需要，为不支持 ES2015 的 [aka "ES6"] 的浏览器进行转换`class`）：

```
class Test {
  constructor() {
    this.prop1 = 1;
    this.prop2 = 2;
  }
  get prop3() {
    return this.prop1 + this.prop2;
  }
}
const t = new Test();
console.log(t.prop3); // 3
t.prop1 = 2;
console.log(t.prop3); // 4
```

如果您想限制自己使用 ES5 的功能（规范于 2009 年 12 月发布，IE8 不支持），您`Test.prototype`可以使用`Object.defineProperty`（[规范](http://www.ecma-international.org/ecma-262/7.0/index.html#sec-object.defineproperty)、[MDN](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty)）定义一个 getter：

```
function Test() {
  this.prop1 = 1;
  this.prop2 = 2;
}
Object.defineProperty(Test.prototype, "prop3", {
  get: function() {
    return this.prop1 + this.prop2;
  }
});
var t = new Test();
console.log(t.prop3); // 3
t.prop1 = 2;
console.log(t.prop3); // 4
```

...或者通过替换`Test.prototype`和使用 getter 的对象初始化器语法（记住 set `constructor`）：

```
function Test() {
  this.prop1 = 1;
  this.prop2 = 2;
}
Test.prototype = {
  constructor: Test,
  get prop3() {
    return this.prop1 + this.prop2;
  }
};
var t = new Test();
console.log(t.prop3); // 3
t.prop1 = 2;
console.log(t.prop3); // 4
```

## 使用函数

在 2017 年，您可能会将其定义为使用`class`语法的方法（如果需要，对旧浏览器进行转译）：

```
class Test {
  constructor() {
    this.prop1 = 1;
    this.prop2 = 2;
  }
  calcProp3() {
    return this.prop1 + this.prop2;
  }
}
const t = new Test();
console.log(t.calcProp3()); // 3
t.prop1 = 2;
console.log(t.calcProp3()); // 4
```

如果你想坚持使用 ES5（在这种情况下实际上是 ES3）特性来支持过时的浏览器，只需在原型中添加一个函数：

```
function Test() {
  this.prop1 = 1;
  this.prop2 = 2;
}
Test.prototype.calcProp3 = function calcProp3() {
  return this.prop1 + this.prop2;
};
var t = new Test();
console.log(t.calcProp3()); // 3
t.prop1 = 2;
console.log(t.calcProp3()); // 4
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-01T23:47:19.883

Javascript 现在支持通过[`Object.defineProperties()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties).

```
function Test() {
    this.prop1 = 1;
    this.prop2 = 2;
}
Object.defineProperties(Test.prototype, {
    prop3: {
        get: function test_prop3_get(){ return this.prop1 + this.prop2 },
    },
});

tester = new Test();

alert (tester.prop1); //=> 1
alert (tester.prop2); //=> 2
alert (tester.prop3); //=> 3

tester.prop1 += 1;

alert (tester.prop1); //=> 2
alert (tester.prop2); //=> 2
alert (tester.prop3); //=> 4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-09-23T17:16:33.227

在 ES6 之后你可以在构造函数中计算：

```
class Test {
  constructor() {
    this.prop1 = 1;
    this.prop2 = 2;
    this.suma = this.prop1 + this.prop2;
  }
  get prop3() {
    return this.suma;
  }
}
const t = new Test();
console.log(t.suma);
console.log(t.prop3); // 3
```

# winapi - “注册窗口类”是什么意思？为什么需要它？

> ID：10282658
> 
> 赞同：3
> 
> 时间：2012-04-23T14:36:34.337
> 
> 标签：winapi

在win32 API编程中，有“注册一个Window类”这样的概念。

它是使用函数`RegisterClass()`或完成的`RegisterClassEx()`。

“注册”一词的实际含义是什么？

为什么需要它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:46:10.247

当一个窗口被创建（抛出 CreateWindow/Ex）时，它必须与一个特定的类相关联。该类必须首先在系统中注册。MSDN 简单地说：

> 进程必须先注册一个窗口类，然后才能创建该类的窗口。

它是必需的，因为这就是 API 定义它的方式。该文档没有详细说明幕后发生的事情，因为这对程序员来说是不必要的信息（并且确切的实现可以在更新中改变）。您正在针对接口进行编程，而不是针对实现进行编程。

# facebook - 在 Google Analytics 中获取 Facebook 推荐 URL

> ID：10282660
> 
> 赞同：11
> 
> 时间：2012-04-23T14:36:37.427
> 
> 标签：facebook, url, google-analytics

在我的谷歌分析报告中，我得到“facebook.com/referral”作为来源。是否有可能获得确切的网址？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-24T02:06:45.727

我不认为这是可能的。正如@yahelc 在之前的评论中指出的那样，来自 facebook 的大多数流量都通过 facebook.com/l.php 页面上的 facebook 控制重定向。因此，如果您想在 facebook 上进行活动，您可以使用带有活动查询参数的 url 来跟踪它.

例如：链接到

```
http://www.example.com/?utm_campaign=Facebook&utm_medium=social&utm_source=facebook.com 
```

现在它们将作为单独的广告系列出现在 GA 中，您可以知道有多少访问者来自该特定链接。您可能想使用 bit.ly 或 goo.gl 缩小该链接。

在 facebook 上创建多个活动并根据需要更改 utm_campaign 参数。您还可以创建不同的 utm_content 参数来区分您在 facebook 上的营销工作。将 utm_medium 和 utm_source 保持为静态，如上例所示。

这就是社交营销分析如何衡量社交网络上的营销工作。来自 facebook 的任何内容都不会被标记，您知道来自发布到您网站的链接的人，而不是您。

同时，拥有推荐网址确实没有任何意义。如果您大部分时间都在考虑它，它将来自您甚至无法查看的私人帖子，即使您有它的网址也是如此。这不是facebook的工作方式。它没有页面，它有流和帖子。

有关 url 标记的更多信息：

[http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033863](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1033863)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T05:52:14.893

答案是肯定的和否定的。您可以在报告流量来源 -> 来源 -> 引荐中深入了解 facebook 来源的引荐路径，只需在来源列按 facebook.com，就像来自引荐网站的所有其他访问一样。

但这并没有多大用处，因为对于 facebook，您总是会看到`/l.php`. 这就是 facebook 的工作方式，它不允许访问者立即访问链接，而是将用户重定向到`facebook.com/l.php?u=<link-to-your-site.com>`带有重定向的 url 的页面，或者可能带有一些文本，例如“如果你确定要离开”，从技术上讲，引用页面将是`/l.php`GA 显示的这个。

因此，如果您需要跟踪 Facebook 活动的效率 - 使用 utm 标签，例如提到的@Eduardo Cereto。这是一个非常好的关于 GA 链接标记的视频教程：[http](http://services.google.com/analytics/breeze/en/v5/campaigntracking_adwordsintegration-v23_ia5/) ://services.google.com/analytics/breeze/en/v5/campaigntracking_adwordsintegration-v23_ia5/ （从第 17 页开始，您可以跳过之前的所有内容）。

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:39:12.073

我只知道这里的设置：

[http://www.sebastienpage.com/2009/05/06/google-analytics-trick-see-the-full-referring-url/](http://www.sebastienpage.com/2009/05/06/google-analytics-trick-see-the-full-referring-url/)

# python - 什么会导致 Pygame 的 set_display 中的 RESIZABLE 参数在 Windows 7 而不是 XP 上崩溃？

> ID：10282673
> 
> 赞同：0
> 
> 时间：2012-04-23T14:37:23.137
> 
> 标签：python, crash, pygame

在下面的代码中，我设置了一个非常简单的窗口来测试 resizable 标志是如何工作的。在我的 XP 笔记本电脑上运行这个确切的代码不会产生任何错误。屏幕并以任何方式调整大小，所有图纸都会相应更新，然后我可以毫无问题地关闭。

但是，当我尝试调整窗口大小时，在 Windows 7 上运行此程序会出现以下错误：

*

> 此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。

*

```
pygame.init()
screenSize =(640,480)
screen = pygame.display.set_mode(screenSize,RESIZABLE,32)
pygame.display.set_caption('Window Test')

mlogo = pygame.image.load(logo).convert()

screen.fill((255,255,255))

def get_screen_size():
    return (screen.get_size()[0]/2 - 25,
             screen.get_size()[1]/2 - 25, 50,50)

while True:
    for event in pygame.event.get():
        if event.type == QUIT:
            sys.exit()
        if event.type == MOUSEBUTTONDOWN:
            print event.button
        if event.type == VIDEORESIZE:
            screenSize = event.size
            screen = pygame.display.set_mode(screenSize,
                                             RESIZABLE, 32)
            pygame.display.set_caption('Window Test')
            screen.fill((255,255,255))
            pygame.draw.rect(screen, (0,0,0), get_screen_size())

##    screen.blit(mlogo, im_center)s

    pygame.draw.rect(screen, (0,0,0), get_screen_size())

    stime = time.time()
    pygame.display.update() 
```

任何想法为什么它会在一个操作系统上运行而不是另一个？请注意，如果我删除了 resizable 标志，那么即使在两台机器上都可以正常执行。

# python - Python 中用于浮点数的内置 pow() 和 math.pow() 之间的区别？

> ID：10282674
> 
> 赞同：70
> 
> 时间：2012-04-23T14:37:23.870
> 
> 标签：python, math

在两个*浮点*参数的情况下， Python 的内置`pow(x, y)`（无第三个参数）返回的结果与 的返回值是否存在差异。`math.pow()`

 *我问这个问题是因为文档[暗示](http://docs.python.org/library/math.html#math.pow)`math.pow()`（`pow(x, y)`即`x**y`）本质上与`math.pow(x, y)`：

> **数学.pow(x, y)**
> 
> 返回 x 的 y 次幂。例外情况尽可能遵循 C99 标准的附件“F”。特别是，pow(1.0, x) 和 pow(x, 0.0) 始终返回 1.0，即使 x 为零或 NaN 也是如此。如果 x 和 y 都是有限的，x 是负数，并且 y 不是整数，则 pow(x, y) 是未定义的，并引发 ValueError。
> 
> 在 2.6 版更改: 1**nan 和 nan**0 的结果未定义。

请注意最后一行：文档暗示 的行为`math.pow()`是指数运算符的行为`**`（因此是的行为`pow(x, y)`）。这是官方保证的吗？

背景：我的目标是提供一个内置的实现*和*具有不确定性的数字`pow()`的实现*，其行为方式*与常规 Python 浮点数相同（相同的数值结果、相同的异常、极端情况下的相同结果等）。我[已经实现](http://packages.python.org/uncertainties/)了一些效果很好的东西，但是有一些[极端情况](https://stackoverflow.com/questions/10198753/zero-division-error-in-python-uncertainties-package)需要处理。`math.pow()`

 ** * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-23T14:50:00.490

## 快速检查

从签名中，我们可以看出它们是不同的：

> **pow(x, y[, z])**
> 
> **数学.pow(x, y)**

此外，在 shell 中尝试它会给你一个快速的想法：

```
>>> pow is math.pow
False 
```

## 测试差异

了解这两个函数之间行为差异的另一种方法是测试它们：

```
import math
import traceback
import sys

inf = float("inf")
NaN = float("nan")

vals = [inf, NaN, 0.0, 1.0, 2.2, -1.0, -0.0, -2.2, -inf, 1, 0, 2]

tests = set([])

for vala in vals:
  for valb in vals:
    tests.add( (vala, valb) )
    tests.add( (valb, vala) )

for a,b in tests:
  print("math.pow(%f,%f)"%(a,b) )
  try:
    print("    %f "%math.pow(a,b))
  except:
    traceback.print_exc()

  print("__builtins__.pow(%f,%f)"%(a,b) )
  try:
    print("    %f "%__builtins__.pow(a,b))
  except:
    traceback.print_exc() 
```

然后我们可以注意到一些细微的差异。例如：

```
math.pow(0.000000,-2.200000)
    ValueError: math domain error

__builtins__.pow(0.000000,-2.200000)
    ZeroDivisionError: 0.0 cannot be raised to a negative power 
```

还有其他区别，上面的测试列表并不完整（没有长数字，没有复杂等等），但这会给我们一个实用的列表，说明这两个函数的行为方式有何不同。我还建议扩展上述测试以检查每个函数返回的类型。您可能会编写类似的东西来创建两个函数之间差异的报告。

## `math.pow()`

`math.pow()`处理它的参数与内置的`**`或`pow()`. 这是以灵活性为代价的。查看[源代码](http://hg.python.org/cpython/file/c7163a7f7cd2/Modules/mathmodule.c#l1781)，我们可以看到 to 的参数`math.pow()`直接**转换为双精度**：

```
static PyObject *
math_pow(PyObject *self, PyObject *args)
{
    PyObject *ox, *oy;
    double r, x, y;
    int odd_y;

    if (! PyArg_UnpackTuple(args, "pow", 2, 2, &ox, &oy))
        return NULL;
    x = PyFloat_AsDouble(ox);
    y = PyFloat_AsDouble(oy);
/*...*/ 
```

然后对双精度进行有效性检查，然后将结果传递给底层的 C 数学库。

## 内置`pow()`

另一方面，内置`pow()`（与运算符相同）的行为非常不同，它实际上使用对象自己的运算符实现，如果需要，最终用户可以通过替换数字的或方法来覆盖它。`**``**``__pow__()``__rpow__()``__ipow__()`

对于内置类型，研究为两种数字类型（例如[floats](http://hg.python.org/cpython/file/6a60359556f9/Objects/floatobject.c#l807)、[long](http://hg.python.org/cpython/file/c7163a7f7cd2/Objects/longobject.c#l3599)和[complex](http://hg.python.org/cpython/file/c7163a7f7cd2/Objects/complexobject.c#l510) ）实现的幂函数之间的区别是有益的。

## 覆盖默认行为

[此处](http://docs.python.org/reference/datamodel.html#numeric-types)描述了模拟数字类型。本质上，如果您要为不确定的数字创建新类型，您需要做的是为您的类型提供`__pow__()`,`__rpow__()`和可能`__ipow__()`的方法。这将允许您的号码与运营商一起使用：

```
class Uncertain:
  def __init__(self, x, delta=0):
    self.delta = delta
    self.x = x
  def __pow__(self, other):
    return Uncertain(
      self.x**other.x, 
      Uncertain._propagate_power(self, other)
    )
  @staticmethod
  def _propagate_power(A, B):
    return math.sqrt(
      ((B.x*(A.x**(B.x-1)))**2)*A.delta*A.delta +
      (((A.x**B.x)*math.log(B.x))**2)*B.delta*B.delta
    ) 
```

为了覆盖`math.pow()`，您必须对其进行修补以支持您的新类型：

```
def new_pow(a,b):
    _a = Uncertain(a)
    _b = Uncertain(b)
    return _a ** _b

math.pow = new_pow 
```

请注意，要使其正常工作，您必须与`Uncertain`类争吵以处理`Uncertain`实例作为输入`__init__()`

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-04-23T15:01:30.293

`math.pow()`将其参数隐式转换为`float`：

```
>>> from decimal import Decimal
>>> from fractions import Fraction
>>> math.pow(Fraction(1, 3), 2)
0.1111111111111111
>>> math.pow(Decimal(10), -1)
0.1 
```

但内置`pow`没有：

```
>>> pow(Fraction(1, 3), 2)
Fraction(1, 9)
>>> pow(Decimal(10), -1)
Decimal('0.1') 
```

> 我的目标是为不确定的数字提供内置 pow() 和 math.pow() 的实现

您可以通过为您的类定义和方法来重载`pow`和。`**``__pow__``__rpow__`

但是，您不能超载`math.pow`（没有像 hack 这样的技巧`math.pow = pow`）。`math.pow`您可以通过定义转换使类可用`__float__`，但是您将失去与数字相关的不确定性。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-04-23T14:51:17.153

Python 的标准`pow`包括一个简单的 hack，它比它`pow(2, 3, 2)`更快`(2 ** 3) % 2`（当然，你只会注意到大数字）。

另一个很大的区别是这两个函数如何处理不同的输入格式。

```
>>> pow(2, 1+0.5j)
(1.8810842093664877+0.679354250205337j)
>>> math.pow(2, 1+0.5j)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: can't convert complex to float 
```

但是，我不知道为什么有人会更`math.pow`喜欢`pow`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-31T07:29:54.727

只需添加 %timeit 比较

```
In [1]: def pair_generator(): 
    ...:     yield (random.random()*10, random.random()*10) 
    ...:   

In [2]: %timeit [a**b for a, b in pair_generator()]                                                                    
538 ns ± 1.94 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each)

In [3]: %timeit [math.pow(a, b) for a, b in pair_generator()]                                                          
632 ns ± 2.77 ns per loop (mean ± std. dev. of 7 runs, 1000000 loops each) 
```**

# .net - 在 .net 对象的终结器中调用 glDeleteTextures 的正确方法

> ID：10282677
> 
> 赞同：4
> 
> 时间：2012-04-23T14:37:33.380
> 
> 标签：.net, multithreading, opengl, garbage-collection, finalizer

我即将围绕 OpenGL 纹理实现一个托管包装类，我希望对象终结器调用`glDeleteTextures`.

所以，调用终结器的线程（GC线程？）必须通过调用.绑定到纹理所属的OpenGL渲染上下文`wglMakeCurrent`。

但是`wglMakeCurrent`文档明确指出，一个OpenGL渲染上下文不能同时是多个线程的当前渲染上下文。

如果 GC 可以随时触发，我不能保证在它发生时没有其他线程正在使用上下文。

调用`glDeleteTextures`.net 对象的终结器的正确方法是什么？

**编辑**

这个包装类将用于“按需加载”场景图的复杂系统中，缓存策略由`WeakReference`等实现。所以，“手动处理”不是我想要考虑的选项：我真的希望 GC 来处理它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:47:21.817

*你没有。*

使用[`IDisposable`](http://www.codeproject.com/Articles/15360/Implementing-IDisposable-and-the-Dispose-Pattern-P)接口使释放确定性。释放纹理对象时，调用该`dispose`方法。在里面，删除纹理。

这适用于所有分配非托管资源的对象；在这种情况下，OpenGL 处理。

* * *

*编辑：* Dispose 模式似乎不适用于此处。资源需要在其创建线程上完成，并且执行此操作的标准方法无法处理这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:55:56.607

正如*斯特凡汉克*所说，你没有。

什么时候可以打电话`glDeleteTextures`？当已创建底层纹理（或更准确地说，它[共享](https://stackoverflow.com/a/8914950/161554)[对象名称空间](https://stackoverflow.com/a/8126219/161554)）的OpenGL 上下文在调用线程上处于当前状态时。

终结器（类析构函数）正在运行GC线程，但实际上我不知道它是否指定了GC的执行方式（这是.NET JIT的责任）；我认为最明显的实现是一个分离的线程。实际上，调用终结器并不是一个好主意`glDeleteTextures`，因为您不知道 OpenGL 上下文是否在该线程上是当前的。

实现`IDisposable`可能是一个想法，但问题仍然存在，因为*Dispose*实现必须知道 OpenGL 上下文是否真的是最新的。为此，您可以使用平台相关例程，例如[wglGetCurrentContext](http://msdn.microsoft.com/en-us/library/dd374383%28v=vs.85%29.aspx)。

* * *

我遇到了同样的问题，我最终得到了以下解决方案。

上下文抽象（*RenderContext*），将 OpenGL 上下文映射到线程。这是 MakeCurrent 实现：

```
public void MakeCurrent(IDeviceContext deviceContext, bool flag)
{
    if (deviceContext == null)
        throw new ArgumentNullException("deviceContext");
    if (mDeviceContext == null)
        throw new ObjectDisposedException("no context associated with this RenderContext");

    int threadId = System.Threading.Thread.CurrentThread.ManagedThreadId;

    if (flag) {
        // Make this context current on device
        if (Gl.MakeContextCurrent(deviceContext, mRenderContext) == false)
            throw new InvalidOperationException("context cannot be current because error " + Marshal.GetLastWin32Error());

        // Cache current device context
        mCurrentDeviceContext = deviceContext;
        // Set current context on this thread (only on success)
        lock (sRenderThreadsLock) {
            sRenderThreads[threadId] = this;
        }
    } else {
        // Make this context uncurrent on device
        bool res = Gl.MakeContextCurrent(deviceContext, mRenderContext);

        // Reset current context on this thread (even on error)
        lock (sRenderThreadsLock) {
            sRenderThreads[threadId] = null;
        }

        if (res == false)
            throw new InvalidOperationException("context cannot be uncurrent because error " + Marshal.GetLastWin32Error());
    }
}

public static RenderContext GetCurrentContext()
{
    int threadId = System.Threading.Thread.CurrentThread.ManagedThreadId;

    lock (sRenderThreadsLock) {
        RenderContext currentThreadContext;

        if (sRenderThreads.TryGetValue(threadId, out currentThreadContext) == false)
            return (null);

        return (currentThreadContext);
    }
}

private static readonly object sRenderThreadsLock = new object();

private static readonly Dictionary<int, RenderContext> sRenderThreads = new Dictionary<int,RenderContext>(); 
```

如果（且仅当）上下文货币是使用*MakeCurrent*方法执行的，RenderContext 类可以知道它是否是调用线程的当前状态。综上所述，*Dispose*实现可以使用*RenderContext*类来真正删除 OpenGL 对象。

但是，如果调用线程当前没有 OpenGL 上下文怎么办？我通过引入*GraphicGarbageCollector*解决了这个问题，它收集在适当线程中释放的资源列表（纹理名称，...）（当正确的 OpenGL 上下文为当前时）。

本质上，每个资源都有一个对象名称空间（OpenGL 上下文共享列表；我使用 GUID 定义）。使用对象命名空间，资源实例可以获得合适的*GraphicGarbageCollector*，将资源名称（例如纹理 Id）入队；在更合适的时候，*GraphicGarbageCollector*使用底层上下文释放排队的资源。

引用系统也可以使用相同的机制：当引用计数达到 0 时，它会释放资源，将其收集起来进行垃圾回收。这是一个一致的实现：你可以在[这里](http://code.google.com/p/derm/)找到我的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T07:22:20.697

好的，这就是我所做的。

`IDisposable`我在我的资源对象（纹理、顶点数组、着色器等的基类）上实现了接口。

当*释放*（或者如果没有手动释放）时，资源会将其 id 和类型添加到其 OpenGL 上下文包装类拥有的同步列表中，并最终通过设置事件唤醒主线程。

我已经更改了我的应用程序消息泵（我现在使用`MsgWaitForMultipleObjects`而不是`GetMessage`），并且在循环中，一旦获取了 OpenGL 上下文，线程首先“释放”未使用的资源，然后再处理消息（如果有的话）。

到目前为止，它就像一个魅力。

感谢 Stefan Hanke 对此的提示！

# sql - 将字符串日期与日期时间进行比较

> ID：10282678
> 
> 赞同：1
> 
> 时间：2012-04-23T14:37:33.787
> 
> 标签：sql, tsql, datetime, date

我有一个存储过程，它需要一个日期字符串参数。传入的数据看起来像`yyyy-MM-dd`数据库中的表格，日期保存在表格中`2012-02-26 06:00:00.000`（附有时间。当我运行 sql 时，它总是不返回任何内容，因为它找不到比较：

```
'select t_typday from ' + @dbName+ '.dbo.Calendar ' +
' where T_date LIKE ''' + @dateFilter + '%'''; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:46:46.903

您需要使用明确的日期格式 - 不能解释为几个可能的日期。

有关选项，请参阅[此](http://consultingblogs.emc.com/jamiethomson/archive/2005/04/26/Unambiguous-dates-in-SQL-Server.aspx)和[此](http://sqlblog.com/blogs/jamie_thomson/archive/2009/12/08/unambiguous-date-formats-t-sql-tuesday-001.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:48:12.117

您需要将表中的日期转换为`yyyy-mm-dd hh:mi:ss.mmm`日期格式，然后再将其与该格式的字符串参数进行比较`LIKE`：

要以最少的更改修复现有代码，请更改`T_date`为`CONVERT(VARCHAR(50),T_date,121)`，生成：

```
'select t_typday from ' + @dbName+ '.dbo.Calendar ' + 
' where CONVERT(VARCHAR(50),T_date,121) LIKE ''' + @dateFilter + '%'''; 
```

如果您不执行转换，您将比较**本地格式字符串**（基于`@@LANGUAGE`设置），例如`Apr 12 2012 12:00AM`与`@dateFilter`包含`2012-04-12`. 这就是比较不起作用的原因。

当然`DATE`，正如一些评论已经提到的那样，将类型参数传递到您的存储过程中将是一个更好的解决方案。这将允许您使用简单的表达式将日期`T_date`与传入的`DATE`值进行比较，`@dateFilter`例如：

```
CONVERT(DATE,T_date)=@dateFilter 
```

# javascript - 我在我的项目中收到一个不是我创建的 JavaScript 警报，威胁我？

> ID：10282680
> 
> 赞同：9
> 
> 时间：2012-04-23T14:37:39.107
> 
> 标签：javascript, ruby-on-rails-3, security

[今天早上，我在我的一个运行KnockoutJS](http://en.wikipedia.org/wiki/KnockoutJS)、 jQuery 和[Underscore.js](http://documentcloud.github.com/underscore/)的项目中醒来，发现一个 JavaScript 警报。它说“我可以在您用户的浏览器上运行我选择的任何 JavaScript”。我正在下载的唯一第三方 JavaScript 是[Typekit](http://en.wikipedia.org/wiki/Typekit)，删除它并不会让它消失。我搜索了我的 JavaScript 和供应商 JavaScript，但该字符串没有匹配任何内容。

您将如何解决这个问题和/或这是已知发生的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T14:39:42.080

如果您的应用程序有一个数据库，那将是下一个要检查的地方。我猜有人发现并利用了一个注入漏洞（未经过滤的 HTML 输入或 SQL）并通过数据库将脚本注入到页面中。

最后一个地方是查看 ruby​​ 代码，看看是否有恶意用户以某种方式修改了您的源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:43:44.967

显然，您从用户那里获取输入，然后将其作为 HTML 的一部分输出而无需引用或清理。有两个快速检查要做：

1) 输出此警报的页面的开放源代码，并在源内部搜索警报的确切文本 - 这应该让您清楚地表明哪些用户填写的字段受到了损害。2) 可以肯定的是，在数据库中由用户生成的所有其他字段（登录名、评论文本等）中搜索单词“script”和“alert”。

未来：始终在将输入插入 HTML 页面之前对其进行清理（删除 HTML 标记），或者根据标准将符号转义为实体，或者通过将其分配给 DOM 中文本节点的值来明确处理纯文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:41:34.523

这听起来像是对您网站的黑客攻击。检查正在使用的接收用户输入的任何数据库、文本文件等。我猜你好像没有检查发布到你的服务器的内容。

# php - Codeigniter 查询不插入

> ID：10282683
> 
> 赞同：3
> 
> 时间：2012-04-23T14:37:51.517
> 
> 标签：php, mysql, codeigniter, codeigniter-2

数据是这样从前端发送的：

```
var data = {
                'user_id':userid,
                'qid':array[qnum].qid,
                'user_ans':userAnswers[qnum].answer,
                'user_time':userTime,
                'exerciseid':exid,
                'point_scored':points
        };
$.post('<?php echo base_url()?>main/update_user_score',
            { myData : data },
            function(result){} ); 
```

在我的“主”控制器中，我有：

```
$post_data = $_POST['myData'];

$data = array(
            'user_id' => $post_data[user_id] ,
            'qid' => $post_data[qid],
            'user_ans' => $post_data[user_ans],
            'user_time' => $post_data[user_time],
            'exerciseid' => $post_data[exerciseid],
            'point_scored' => $post_data[point_scored]
        );

$this->load->model('Question_model','questions');
$this->questions->update_user_attempt($data); 
```

在我的 Question_model / update_user_attempt 中：

```
error_log("data in model BEFORE INSERT:" . json_encode($data));
$this->db->insert('user_attempt', $data);
error_log("data in model AFTER INSERT: "); 
```

问题是，数据可以很好地到达（至少在我看来）模型。这是日志条目：

```
[23-Apr-2012 16:04:47] data in model BEFORE INSERT:{"user_id":"5","qid":"3","user_ans":"d","user_time":"3","exerciseid":"cr1","point_scored":"35"} 
```

**但是**没有“插入后”日志条目。插入本身不会发生，插入后的日志条目也不会发生。

我可以很好地读取数据库。所以我在 phpmyadmin 中检查了“config/database.php”中用户的用户权限，并且该用户拥有*所有*权限，包括 INSERT。

所以两个问题：

1.  问题是什么？我犯了什么错误？
2.  我什至如何开始找出插入语句发生了什么？（我在日志中找不到任何东西。）
3.  我正在查看 xampp/apache/logs/error.log 和 xampp/php/logs/php_error_log。我应该查看其他日志吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:49:17.353

尝试把 $this->db->_error_message(); 数据库插入后

像这样 ...

```
error_log("data in model BEFORE INSERT:" . json_encode($data));
$this->db->insert('user_attempt', $data);
echo $this->db->_error_message();
error_log("data in model AFTER INSERT: "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T09:29:52.917

你是不是错过了这个

```
$post_data['user_id'] 
```

相反，您使用的是不带引号的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T20:40:03.697

不要忘记在您的插入语句之后使用`$this->db->last_query()`以查看插入语句的样子。将该插入语句复制并粘贴到您的 sql 客户端中，以查看该查询是否真正独立运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T23:15:27.017

尝试添加

```
ini_set("display_errors", "1"); 
```

同样在您插入之前，

```
var_dump($data); die(); 
```

看看你正在传递什么。然后[在此处](http://codeigniter.com/user_guide/database/active_record.html#insert)检查以查看您是否正确形成了插入语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T14:47:14.383

1.  我想到的第一件事是：你不应该使用 json_decode 代替 json_encode 吗？

2.  你定了`error_reporting(E_ALL);`吗？

# iphone - 异步下载对象属性

> ID：10282688
> 
> 赞同：1
> 
> 时间：2012-04-23T14:38:04.030
> 
> 标签：iphone, objective-c, ios, asynchronous

我正在 iOS 平台上编写提要阅读器，在解析 json 结果时，我创建了一个数组，其中包含代表每个提要的对象。这些对象将被连续推送到 NSTableView 或地图（它们具有地理定位信息）。有时会发生feed没有返回位置信息，而是返回地点的foursquare Id，所以我不得不联系foursquare服务器获取信息。最好的方法是这样做吗？（我很想知道数组中的所有提要何时检索到他们的信息，所以我可以将所有内容推送到地图和表格视图中）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:50:25.390

您可以创建一个 NSOperationQueue 并添加操作以从服务器获取信息，然后观察队列的“操作”键路径。当 operations.count == 0 时，然后推送到地图和表格视图。

**编辑**：

本质上，您不是在投票 - 您是在观察属性并接收任何更改的通知。

将自己添加为队列操作属性的观察者。

```
[self.runningQueue addObserver:self forKeyPath:@"operations" options:0 context:NULL]; 
```

然后执行以下操作：

```
- (void) observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object 
                     change:(NSDictionary *)change context:(void *)context
{
    if (object == self.runningQueue && [keyPath isEqualToString:@"operations"]) {
        if ([self.runningQueue.operations count] == 0) {
            // push to table view and map view
        }
    }
    else {
        [super observeValueForKeyPath:keyPath ofObject:object 
                           change:change context:context];
    }
} 
```

看到[这个线程](https://stackoverflow.com/questions/1049001/get-notification-when-nsoperationqueue-finishes-all-tasks)。

# php - PhpStorm 中的静态类 vars 类型定义

> ID：10282690
> 
> 赞同：1
> 
> 时间：2012-04-23T14:38:13.313
> 
> 标签：php, phpstorm

我有一些名为**myClass**的类，其中有以下结构：

```
class myClass
{
    static $foo;

    public static function init()
    {
        self::$foo = new bar();
    }
} 
```

如何让 phpstorm在我的其余代码中将**myClass::$foo**定义为**bar的对象？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:41:03.240

使用**[PHPDoc](https://phpdoc.org/docs/latest/references/phpdoc/tags/var.html)**。

```
class myClass
{
    /**
     * @var bar $foo - Holds a bar object.
     */
    static $foo;
} 
```

# python - 双螺旋生成算法

> ID：10282693
> 
> 赞同：6
> 
> 时间：2012-04-23T14:38:23.677
> 
> 标签：python

我试图想出一个好的算法来创建一个[右手](http://www.fred.net/tds/leftdna/)DNA 字符串的表示，使用破折号字符，用于任意数量的字符。

这是我目前拥有的，使用 776`#`的：

```
 #########                 ##########
    #########                ##########
      #########              ##########
        #########          ##########
          ##########     ##########
            ########## ##########
              ###### ##########
                ## ##########
                 ########## #
               ########## #####
             ########## #########
           ##########    ##########
         ##########        ##########
       ##########           ##########
     ##########             ##########
   ##########               ##########
  ##########               ##########
  ##########             ##########
  ##########           ##########
   ##########        ##########
     ###########   ##########
       ######### ##########
         ##### ##########
           # ##########
           ########## ###
         ########## #######
       ##########  ##########
     ##########      ##########
   ##########          ##########
  ##########             ##########
  ##########               ##########
  ##########                 ##########
   ##########                 ##########
     ##########               ##########
       ##########             ##########
         ##########          ##########
           ##########      ##########
             ##########  ##########
               ####### ##########
                 #### #########
                    ######### #
                  ########## ###
                ########### ####### 
```

但是当我手动尝试通过复制/粘贴重复螺旋时，螺旋并没有完美对齐。

具有与上述示例相同的宽度但也具有碱基对交叉键（如在[此图像](http://www.visualphotos.com/image/1x3747393/dna_double_helix_dna_molecule_illustration_of_a)中或在下面的围巾图案中）的解决方案也是可以接受的。

![围巾图案](../Images/7949f9cfa2fa12923c53db457a0e0bea.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T15:54:17.893

这个问题的关键是要认识到您可以将螺旋上的每条链表示为正弦波的组合 - 一个用于周期性部分，一个用于页面的“深度”。以这种方式参数化问题后，您就可以控制螺旋线的各个方面。下面的示例使用`*`和`#`来显示不同的股线来说明这一点。如果您选择的波长值与整数值不相称，您将获得比最佳结果更少的结果 - 但现在您可以使用输入来找到您认为最美观的表示。

```
from numpy import *

amp = 10
length = 100
wavelength = 20

omega = (2*pi)/wavelength
phi   = wavelength*(0.5)
X = arange(1,length)
Y1 = round_(amp*(sin(omega*X) + 1))
Y2 = round_(amp*(sin(omega*X+phi) + 1))

offset = phi/2
Z1 = sin(omega*X + offset)
Z2 = sin(omega*X + phi + offset)

T1 = " ######### "
T2 = " ********* "
clen = len(T1)

H = zeros((length,amp*2+clen),dtype='str')
H[:,:] = " "

for n,(y1,y2,z1,z2) in enumerate(zip(Y1,Y2,Z1,Z2)):
    H[n,y1:y1+clen] = list(T1)
    H[n,y2:y2+clen] = list(T2)

    # Overwrite if first helix is on top
    if z1>z2: H[n,y1:y1+clen] = list(T1)

for line in H:
    print "".join(line) 
```

这些值给出：

```
 *********  #########        
  *********      #########     
 *********         #########   
 *********           ######### 
   *********         ######### 
     *********       ######### 
       *********   #########   
          ****** #########     
              #########        
           ######### ****      
        #########  *********   
     #########      *********  
   #########         ********* 
 #########           ********* 
 #########         *********   
 #########       *********     
   #########   *********       
     ###### *********          
        *********              
      ********* ####           
   *********  #########        
  *********      #########     
 *********         #########   
 *********           ######### 
   *********         ######### 
     *********       ######### 
       *********   #########   
          ****** #########     
              ######### 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:30:25.447

这应该给你一个体面的开始：

```
from math import sin, cos, pi

class RightHelix(object):
    def __init__(self, maxima, minima, period, offset):
        self.mid = 0.5 * (maxima + minima)
        self.mag = 0.5 * (maxima - minima)
        self.k = 2.0 * pi / period
        self.offs = self.k * offset
    def x(self, t):
        return self.mid + self.mag * sin(self.k*t - self.offs)
    def y(self, t):
        return -self.mag * cos(self.k*t - self.offs)

def main():
    rh = RightHelix(33, 7, 20, -2)

    for t in range(40):
        x,y = rh.x(t), rh.y(t)
        print(' '*int(x-0.5) + ('O','X')[y>0])

if __name__=="__main__":
    main() 
```

如给定的，产生

```
 O
                              O
                               O
                                O
                               X
                              X
                           X
                       X
                   X
               X
           X
        X
       X
      X
       O
        O
           O
               O
                   O
                       O
                           O
                              O
                               O
                                O
                               X
                              X
                           X
                       X
                   X
               X
           X
        X
       X
      X
       O
        O
           O
               O
                   O
                       O 
```

（Xs 和 Os 只是为了表明它确实是一个右手螺旋）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T16:00:03.340

这个怎么样：

```
import math

phaseA = math.pi/1.5
phaseB = 0
step = math.pi/20
width = 30  # screen size
breadth = 8  # breadth of DNA single string

x = 0.0
while True:
  x += step
  if x > 30.0: break
  yA = math.sin(x + phaseA)
  zA = math.cos(x + phaseA)
  yB = math.sin(x + phaseB)
  zB = math.cos(x + phaseB)
  if zA > zB:  # which is in front?
    yTop, yBottom = yA, yB
  else:
    yTop, yBottom = yB, yA
  # screenify values:
  yTop    = 1 + int((1.0 + yTop)    / 2.0 * (width-breadth))
  yBottom = 1 + int((1.0 + yBottom) / 2.0 * (width-breadth))
  line = ' ' * yBottom + '#' * breadth + ' ' * (width-yBottom)
  line = list(line)  # make mutable
  line[yTop-1] = ' '
  line[yTop+breadth+1] = ' '
  for i in range(breadth):
    line[yTop+i] = '#'
  print ''.join(line) 
```

但是，它不使用特定数量的哈希作为输出。也许这是你们的要求之一，不知道...

只要`step`值是 的整数部分，它就应该产生重复模式`math.pi`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T16:11:09.690

这是我的方法。它可能与其他任何人没有本质上的不同，但我写了它，所以它是这样的：

上半部分是配置。下半部分是动作。

```
from math import cos, sin, pi

length = 50
width = 30
thickness = 10
rotation = 0.15
strands = [0, 2 * pi / 3]
strand_char = "#"

radius = width / 2
for line in range(length):
    output = [" "] * (width + thickness + 2)
    total_rotation = -line * rotation
    sorted_strands = sorted(strands, key=lambda s: cos(total_rotation + s))
    for strand_offset in sorted_strands:
        pos = int(radius * sin(total_rotation + strand_offset) + radius)
        output[pos : pos + thickness + 2] = " " + strand_char * thickness + " "
    print("".join(output)) 
```

输出：

```
 ##########  ##########    
             ##########      ##########   
           ##########         ##########  
         ##########           ##########  
       ##########             ##########  
     ##########               ##########  
    ##########               ##########   
  ##########                ##########    
  ##########               ##########     
 ##########               ##########      
 ##########             ##########        
 ##########           ##########          
 ##########         ##########            
  ##########      ##########              
   ##########  ##########                 
    ######## ##########                   
     ##### ##########                     
       # ##########                       
       ########## #                       
     ########## #####                     
    ########## ########                   
  ##########    ##########                
 ##########       ##########              
 ##########         ##########            
 ##########           ##########          
 ##########             ##########        
 ##########               ##########      
  ##########               ##########     
   ##########                ##########   
    ##########                ##########  
     ##########               ##########  
       ##########             ##########  
         ##########           ##########  
           ##########         ##########  
             ##########      ##########   
                ##########  ##########    
                  ######## ##########     
                    ##### ##########      
                      # ##########        
                      ########## #        
                    ########## #####      
                 ########## #########     
               ##########    ##########   
             ##########       ##########  
           ##########         ##########  
         ##########           ##########  
       ##########             ##########  
     ##########               ##########  
    ##########               ##########   
  ##########                ########## 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T14:52:13.457

```
 ########## ####
               ########## ########
             ##########  ###########
           ##########      ##########
         ##########         ##########
       ##########            #########
     ##########              #########
   ##########               ##########
  ##########               ##########
  ##########             ##########
  ##########           ##########
   ##########        ##########
     ###########   ##########
       ######### ##########
         ##### ##########
           # ##########
           ########## ###
         ########## #######
       ##########  ##########
     ##########      ##########
   ##########          ##########
  ##########             ##########
  ##########               ##########
  ##########                 ##########
   ##########                 ##########
     ##########               ##########
       ##########             ##########
         ##########          ##########
           ##########      ##########
             ##########  ##########
               ####### ##########
                 #### #########
                    ######### # 
```

. . .

可悲的是，我希望这是我答案的总和。但我应该解释一下：当你对镶嵌进行更改时，你需要使用基本的重复单元（如果你修改它的镶嵌方式，你必须修改它的其他部分，但你没有这样做）。我把你的图案剪成我认为看起来像重复单元的东西，然后复制粘贴一次；当我对底部进行更改时，我对顶部进行了相同的更改。

<deep thinking>有时候不用想太多就能找到最简单的解决方案。</deep thinking>

不过，您绝对可以对 DNA 图像执行分色算法，将其转换为位图。（您可以对拥有版权的图像执行此操作。）如果您不喜欢使用相同的字符，您还可以使用 ascii 艺术生成器，您可以在网络和开源软件中找到数十个通过一些谷歌搜索。但是，这不在 StackOverflow 常见问题解答的范围内，所以我不会对此进行详细介绍，除了链接这篇关于矢量样式 ascii-art 转换的计算机科学论文：[http://www.cse.cuhk .edu.hk/~ttwong/papers/asciiart/asciiart.pdf](http://www.cse.cuhk.edu.hk/~ttwong/papers/asciiart/asciiart.pdf)

# sql - 有没有办法自动输入 sql 脚本提示？

> ID：10282696
> 
> 赞同：0
> 
> 时间：2012-04-23T14:38:33.020
> 
> 标签：sql, oracle

我有一个包含如下语句的 sqlscript：

```
prompt Enter 'html' for an HTML report, or 'text' for plain text
prompt  Defaults to 'html'

column report_type new_value report_type;
set heading off;
select 'Type Specified: ',lower(nvl('&&report_type','html')) report_type from dual; 
```

因此，当我运行脚本时，它会提示我输入值。我想自动化这个脚本。我将如何传递给然后用于提示的脚本参数？我根本无法通过删除提示来修改脚本。

我正在使用 Windows Server 2008 和 Windows 7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:47:17.567

在 Unix 上，您可以使用此处的文档：

```
#>sqlplus un @script <<EOF
yourpassword
parameter#1
parameter#2
EOF 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:23:10.923

假设您从命令行或批处理文件等传递值，您可以通过 using 传递参数`&1, &2, .. &n`，其中数字是调用时参数的位置

```
column report_type new_value report_type
set heading off

select 'Type Specified: ',lower(nvl('&1','html')) report_type from dual; 
```

这将由

```
[call sqlplus schema/pw@db @] my_script.sql html 
```

顺便说一下，SQL*Plus 命令后不需要分号。

# apache-flex - Adobe AIR试用件制作方法

> ID：10282700
> 
> 赞同：0
> 
> 时间：2012-04-23T14:38:54.160
> 
> 标签：apache-flex, air, registration, activation, trialware

我正在使用 Adob​​e AIR 创建一个窗口应用程序。我想将其作为试用件。但我不知道如何实现这一点。请提出一些理想或链接供我参考。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:15:17.293

在 Flex 中，您有很多许可方案选项：

1.  构建您自己的解决方案。
2.  看看[NitroLM](http://nitrolm.com/)，它为 AIR 提供了许可方案。
3.  看看[Sharify](http://www.sharify.it/)；为 AIR 提供许可方案
4.  看看[Zarquon](http://zarqon.net/)，它为 AIR 提供了一个许可方案

# vector - HDF5：编写字符串、结构和向量（哦，我的）

> ID：10282701
> 
> 赞同：0
> 
> 时间：2012-04-23T14:38:54.873
> 
> 标签：vector, struct, hdf5

我有一个这样定义的结构：

```
 typedef struct {
    string mName;
    vector<int> mParts;
} AGroup; 
```

我将此结构的实例存储在向量中。我需要将其写入 HDF (v5) 文件。我想我可以遍历每个实例以找到最长的 mName 和最长的 mPart，创建一个新的、非可变长度的数组来保存信息，然后将该数组写入文件。

这是最好的方法吗？仅仅写一些数据似乎过于复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T22:05:12.787

可变长度数组和字符串会引入开销。但它们也很有意义，因为它们更准确地反映了您的数据结构。您可以使用由可变长度 C 字符串和可变长度整数数组组成的复合数据类型。

如果您的字符串和向量的大小都接近相同的上限，请为自己节省一些时间和麻烦，并使用固定长度的字符串和数组。

这完全取决于数据集的大小。在磁盘空间方面，在可变长度元素的开销和固定大小元素的浪费空间之间存在权衡，如果不尝试就很难估计。如果您的数据集很小，请执行对您更方便的操作。如果它很大，请选择您最喜欢的：避免浪费空间、数据语义、易于编程等，并根据此标准进行优化。

# jena - 耶拿包不存在

> ID：10282704
> 
> 赞同：1
> 
> 时间：2012-04-23T14:39:03.263
> 
> 标签：jena, mesa

大家好，我里面有一个java程序，我已经导入了这些类。

1.  导入 com.hp.hpl.mesa.rdf.jena.mem.ModelMem；
2.  导入 com.hp.hpl.mesa.rdf.jena.model.*；
3.  导入 com.hp.hpl.mesa.rdf.jena.common.PropertyImpl；

当我尝试编译程序时，它显示 3 个错误，它们是：

1.  包 com.hp.hpl.mesa.rdf.jena.mem 不存在导入 com.hp.hpl.mesa.rdf.jena.mem.ModelMem；
2.  包 com.hp.hpl.mesa.rdf.jena.model 不存在导入 com.hp.hpl.mesa.rdf.jena.model.*；
3.  包 com.hp.hpl.mesa.rdf.jena.common 不存在 import com.hp.hpl.mesa.rdf.jena.common.PropertyImpl;

我试图搜索 jar 文件，但我不能，是否有人有下载这些包的 jar 文件的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:10:16.583

# php - PHP 和 mySQL，使用 num_affected_rows

> ID：10282705
> 
> 赞同：0
> 
> 时间：2012-04-23T14:39:03.837
> 
> 标签：php, mysql, sql, insert

现在，程序在***一定程度上***运行良好，当 mysql_affected_rows 大于 0 时，它确实将数据添加到新表并打印出相关的回显消息。

但是，当 mysql_affected_rows = 0 时，我什么也没得到，没有错误消息，但完全没有输出。

我已经剥离了代码，你们有任何想法吗，我查看了括号和关闭条件等，但无法找出原因！

**代码**

```
$query10 = ("SELECT p.surname, p.passNo, p.activeUntil FROM PASSENGER p WHERE p.activeUntil < DATE_ADD(NOW(),INTERVAL -1 DAY)");
$result = mysql_query($query10);  
while($row = mysql_fetch_array($result))
{       
    $surname =  $row['surname'];
    $passNo = $row['passNo']; 
    mysql_query("INSERT INTO ARCHIVED_PASSENGER (surname, passNo) VALUES ('$surname', '$passNo')  ") 
        or die(mysql_error());  

    if (mysql_affected_rows()>0) {
        echo '<p>';
        echo "The number of rows affected by this update is:  ";
        echo mysql_affected_rows(); 
    }

    if  (mysql_affected_rows()<1) {     
        echo '<p>';
        echo "No records were affected. Taking you back to the control panel.";
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:48:16.203

我建议`if($result != false && mysql_num_rows($result) > 0)`在 while 循环之前添加一个。像这样：

```
$query10 = ("SELECT p.surname, p.passNo, p.activeUntil FROM PASSENGER p WHERE p.activeUntil < DATE_ADD(NOW(),INTERVAL -1 DAY)");

$result = mysql_query($query10);  

if($result != false && mysql_num_rows($result) > 0) 
{
    while($row = mysql_fetch_array($result))
    {
        $surname =  $row['surname'];
        $passNo = $row['passNo']; 

        $query11 = mysql_query("INSERT INTO ARCHIVED_PASSENGER (surname, passNo) VALUES ('$surname', '$passNo')  ") 
            or die(mysql_error());  

        if ($query11 != false && mysql_affected_rows()>0) {
            echo '<p>';
                echo "The number of rows affected by this update is:  ";
                echo mysql_affected_rows();
            echo '</p>';
        }

        if  ($query11 == false || mysql_affected_rows()<1) {     
            echo '<p>';
                echo "No records were affected. Taking you back to the control panel.";
            echo '</p>';
        }
    } else {
        //nothing was retrieved, give some error!
    }
 } 
```

# jquery - jQuery appendTo DIV 然后动画

> ID：10282709
> 
> 赞同：4
> 
> 时间：2012-04-23T14:39:12.850
> 
> 标签：jquery, jquery-animate, appendto

当我单击“新建”按钮时，开始 jQuery 操作：

1.）创建DIV并将Class“块”添加到DIV

2.) 附加到“.container”

3.) 将容器中的此 DIV 从不透明度 0 设置为 1

[JsFiddle 示例](http://jsfiddle.net/ynternet/bckHD/)

HTML

```
<div class="panel">
   <button class='new'> + </button>
</div>
<div class="container">
</div> 
```

CSS

```
.block {
   margin: 0px;
   width: 200px;
   display: inline-block;
   border-right:thin dashed #aaa;
   opacity: 0;
}
.panel {
   position: absolute;
   top: 100px;
   padding: 5px;
   color: #FFF;
   font-size: 15px;
   background: #d30;
   height: 30px;
   cursor:pointer;
}
.container {
   position: absolute;
   top: 145px;
   left: 0px;
}
button{
   font-size: 20px;
   padding: 0px;
} 
```

jQuery

```
function createChatBox(title) {
   $(" <div />" ).attr("id","block_"+title)
    .addClass("block")
    .html('<div class="title">text1 '+title+'</div>')
    .appendTo($( ".container" , {
        css: {
            display: 'inline-block',
            opacity: 0
        }
    }).animate({ opacity: 1  }) );
}

$(".new").click(function(){
     createChatBox('text2');
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:42:56.560

您需要将 appendTo 部分更改为：

```
 .appendTo(".container" , {
        css: {
            display: 'inline-block',
            opacity: 0
        }
    }).animate({ opacity: 1  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:46:55.097

***[这是你想要的：](http://jsfiddle.net/CodeMaverick/bckHD/2/)***

## jQuery：

```
function createChatBox(title) {

    $(" <div />" )
        .attr("id","block_"+title)
        .addClass("block")
        .html('<div class="title">text1 '+title+'</div>')
        .css({
            display: 'inline-block',
            opacity: 0
        })
        .appendTo($( ".container" ))
        .animate({ opacity: 1  });

} 
```

## 输出：

![在此处输入图像描述](../Images/7a526e1fe392c278710ef9118624ac30.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T14:42:50.650

您的代码似乎被破坏了，一些不匹配的括号 / {}。这是一个修复程序，这是您想要的吗？[http://jsfiddle.net/mamadrood/bckHD/1/](http://jsfiddle.net/mamadrood/bckHD/1/)

# iphone - 如果我只想发送 beta 测试，是否必须将 TestFlight SDK 包含到我的应用程序中？

> ID：10282716
> 
> 赞同：5
> 
> 时间：2012-04-23T14:39:27.770
> 
> 标签：iphone, ios, ipad, testflight

我发现[本教程](http://help.testflightapp.com/customer/portal/articles/402782-how-to-create-an-ipa-xcode-4)展示了如何为 TestFlight 构建 AdHoc IPA。但是还有 TestFlight SDK，我不明白我是否需要这个以及为什么我需要它来进行简单的 beta 测试分发。

有人可以解释吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:40:15.813

你不需要。您可以通过此页面在他们的网站上上传任何适当的 ipa：[https ://testflightapp.com/dashboard/builds/add/](https://testflightapp.com/dashboard/builds/add/)

如果您的 ipa 有问题，他们可以在这里提供帮助：http: [//help.testflightapp.com/customer/portal/articles/402782-how-to-create-an-ipa-xcode-4](http://help.testflightapp.com/customer/portal/articles/402782-how-to-create-an-ipa-xcode-4)

SDK 仅用于跟踪崩溃、会话报告等功能。它非常好，但绝不是必需的。

# django - 无法导入 Celery 模块

> ID：10282719
> 
> 赞同：5
> 
> 时间：2012-04-23T14:39:39.497
> 
> 标签：django, celery, django-celery

我有一个奇怪的问题，我成功安装了 celery，但我无法导入它的模块：

```
>>> import celery   # OK

>>> import djcelery

Traceback (most recent call last):
File "<stdin>", line 1, in <module>
File "/Library/Python/2.7/site-packages/django_celery-2.5.5-py2.7.egg/djcelery/__init__.py", line    25, in <module>
from celery import current_app as celery  # noqa
ImportError: cannot import name current_app

>>> from celery.decorators import task

Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: No module named decorators 
```

此错误发生在 celery 2.6.0a3（来自 github）或 2.5.3（来自 pypi）和 django-celery 2.5.5 上。尝试重新安装几次，甚至在 Jython 中尝试过，我得到了同样的错误。

我不知道它是什么，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T15:23:09.703

[老实说，有一个更好的答案，我在这里](http://creaturefeaturecode.blogspot.com/2012/10/celery-djcelery-problem-with-virtualenv.html)写过。

这与您的系统python（特别是python标准库“os”）和预编译的virtualenv python二进制文件之间的不匹配有关。

停用 virtualenv，删除您的 virtualenv python 二进制文件，然后在同一个 virtualenv 文件夹上运行 virtualenv 脚本将为您的 virtualenv 重新编译 python 并解决问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-24T14:12:05.670

从github很好地克隆了项目（芹菜），并`python setup.py install`解决了。奇怪的是，在我的机器上通过 pip 安装时它无法导入其模块（即使 /Library/Python/2.7/site-packages/celery/decorators.py 任务在那里）。

希望它可以帮助某人。

# jquery-mobile - jQuery Mobile - 滚动时使固定标题不淡出

> ID：10282721
> 
> 赞同：0
> 
> 时间：2012-04-23T14:39:42.663
> 
> 标签：jquery-mobile

我正在尝试为我的 jQuery Mobile 项目设置一个固定的标题，例如这个[演示页面](http://jquerymobile.com/test/docs/toolbars/bars-fixed.html)。

我已经尝试了 data-position="fixed" data-fullscreen="true" 的属性，但是当您滚动然后淡入时我的标题不可见。如何在功能上删除此淡入/淡出？

我发现了这个[类似的问题](https://stackoverflow.com/questions/6364227/how-to-fix-the-header-footer-position-using-jquery-mobile-with-data-position)，但我认为它可能已经过时了，因为尽管他们讨论了这个问题，但他们没有提到这个演示页面，这似乎可以满足他们的需要：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:45:54.787

您使用的是哪个版本的 JQuery Mobile？“真正的固定工具栏”被添加到最新版本的 jQuery Mobile 1.1.0 Final。[在http://bit.ly/JjPmwo](http://bit.ly/JjPmwo)查看

# c++ - 在 Code::Blocks 中运行程序的附加命令行参数？

> ID：10282728
> 
> 赞同：0
> 
> 时间：2012-04-23T14:40:12.053
> 
> 标签：c++, windows, windows-7, ide, codeblocks

许多 IDE 允许您添加一些自定义命令行参数，这些参数在 IDE 在编译后运行您的程序时使用。例如我的程序是`pro_ext_changer.exe`，我想`--backup`在运行时添加一个选项：

```
pro_ext_changer.exe --backup 
```

我还没有在 Code::Blocks 中找到这样做的方法。你怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:50:28.340

[项目] → [设置程序的参数…]

我不知道，但我刚刚启动了我只是玩过的 Code::Blocks，然后我环顾四周。

# iphone - 使用 ARC 时释放对象

> ID：10282731
> 
> 赞同：3
> 
> 时间：2012-04-23T14:40:18.227
> 
> 标签：iphone, profiling, automatic-ref-counting, instruments, memory-leaks

在测试我正在开发的应用程序时，我遇到了这个问题，我想讨论一下。我有一个类需要从服务器接收消息并需要将消息中继到视图。我就是这样做的：

```
- (void) onMessage:(DFTopicMessage *) message {    
    [[NSNotificationCenter defaultCenter] 
     postNotificationName:@"serverMessage" 
     object:message];
} 
```

该类不对消息做任何其他事情。当我使用 Instruments -> Leaks 进行分析时，这行代码被标记为潜在泄漏。我理解的问题是，消息被分配、使用并且从未被释放。第一个奇怪的事情是我在我的项目中使用 ARC，因此希望操作系统自动释放 var，但显然情况并非如此（那么，为什么它不释放 var？）。无论如何，我开始思考如何避免这种泄漏。只需将 message 设置为 nil，例如：

```
- (void) onMessage:(DFTopicMessage *) message {    
    [[NSNotificationCenter defaultCenter] 
     postNotificationName:@"serverMessage" 
     object:message];
      message = nil;
} 
```

不会阻止泄漏。我找到了使消息成为 ivar 并使用如下访问器的解决方案：

```
@interface myClass()
@property(nonatomic) DFTopicMessage *message;
@end

@implementation myClass {
@synthetize message;
    ....
   - (void) onMessage:(DFTopicMessage *) msg {
        [self setMessage:msg];

        [[NSNotificationCenter defaultCenter] 
        postNotificationName:@"serverMessage" 
        object:[self message]];

    }
} 
```

现在，如果我使用以下方法进行分析，Instruments -> Leak 将不再将其标记为潜在泄漏。我的问题是：这是在使用 ARC 时强制释放 var 的唯一解决方案吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T10:27:46.090

当您分析项目时，它是否也将此方法标记为可能的泄漏？（我怀疑不是）。

您确定 Instruments 检测到的泄漏是这个消息对象吗？如果是，它看起来一定是误报，因为启用了 ARC，这不应该泄漏。

# postgresql - 在 postgres 中获取咨询锁

> ID：10282738
> 
> 赞同：10
> 
> 时间：2012-04-23T14:40:43.420
> 
> 标签：postgresql, locking

我认为关于 postgres 中的咨询锁定一定有一些我不了解的基本内容。如果我在 psql 命令行客户端上输入以下命令，该函数两次都返回 true：

```
SELECT pg_try_advisory_lock(20); --> true
SELECT pg_try_advisory_lock(20); --> true 
```

我期待第二个命令应该返回 false，因为应该已经获得了锁。奇怪的是，我确实得到了以下信息，表明锁已被获取两次：

```
SELECT pg_advisory_unlock(20); --> true
SELECT pg_advisory_unlock(20); --> true
SELECT pg_advisory_unlock(20); --> false 
```

所以我想我的问题是，如何获得咨询锁以阻止它再次被获取？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T14:57:46.017

如果您尝试从 2 个不同的 PostgreSQL 会话中执行此操作会怎样？

[在文档中](http://www.postgresql.org/docs/current/interactive/explicit-locking.html#ADVISORY-LOCKS)查看更多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-11T18:31:33.653

我对咨询锁的第一印象是相似的。我希望第二个查询 (SELECT pg_tryadvisory_lock(20)) 也返回 false （因为第一个得到了锁）。但是这个查询只确认了一个值为 20 的 bigInt 有一个锁。解释由用户决定。

将咨询锁想象成一个表，您可以在其中存储一个值并获得该值的锁（通常是 BigInt）。它不是显式锁定，也不会延迟任何事务。这取决于您如何解释和使用结果 - 它不是阻塞的。

我在我的项目中使用它和两个整数选项。SELECT pg_try_advisory_lock(classId, objId) 而两个参数都是整数。

要使其与多个表一起使用，只需将表的 OID 用作 classId 并将主 id（此处为 17）用作 objId：

`SELECT pg_try_advisory_lock((SELECT 'first_table'::regclass::oid)::integer, 17);`

在此示例中，“first_table”是表的名称，第二个整数是主键 ID（此处为：17）。

使用 bigInt 作为参数允许更广泛的 id，但如果将其与“second_table”一起使用，则 id 17 也会被锁定（因为您锁定了数字“17”而不是与表中特定行的关系） .

我花了一些时间才弄清楚这一点，所以希望它有助于理解咨询锁的内部工作原理。

# jquery - jquery 与 richfaces 4.2.0 和 primefaces 3.2 冲突

> ID：10282742
> 
> 赞同：-1
> 
> 时间：2012-04-23T14:41:04.123
> 
> 标签：jquery, richfaces, primefaces, conflict

我使用的是 Richfaces 4.2.0 和 primefaces 3.2。一切正常（a4j：commandLinks 等）但是当我包括

```
a4j:push 
```

并且一个页面中的任何primefaces标签，a4j停止工作，a4j commandLinks仅在页面第一次加载时工作。

```
javax.faces.resource/jquery.js.html?conversationContext=m 
```

和

```
/javax.faces.resource/jquery/jquery.js.html?ln=primefaces&conversationContext=m 
```

被包含在内

没有任何 p:-tag 只有

```
javax.faces.resource/jquery.js.html?conversationContext=3g 
```

已经包括了。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T13:00:16.460

也许[JBoss 社区上](https://community.jboss.org/message/641745#641745)名为“努力实现 RichFaces / PrimeFaces 兼容性”的主题会有所帮助？

# java - 通过 Spring 框架获取依赖图（逆图）

> ID：10282748
> 
> 赞同：0
> 
> 时间：2012-04-23T14:41:29.783
> 
> 标签：java, spring

我正在为 java 项目使用 spring 框架。我得到一个 .xml 文件，并通过代码：

```
ClassPathXmlApplicationContext xmlApplicationContext;
xmlApplicationContext.getBeanFactory().getDependenciesForBean("name of the bean"); 
```

我得到一个字符串数组，其中包含当前对象所依赖的所有名称。

我可以得到与上述调用相反的方法，即获取依赖于当前对象的所有对象名称吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:52:28.107

您是否进一步查看了 javadoc？我认为这是您正在寻找的*.getDependentBeans("name of bean") 。*

# javascript - 获取选定元素的id

> ID：10282757
> 
> 赞同：1
> 
> 时间：2012-04-23T14:42:16.417
> 
> 标签：javascript, dom, svg

我正在尝试找到一种方法来获取当前悬停元素的元素 id 以显示弹出框/工具提示。目前我正在使用 clientX / clientY 来获取坐标，但我真的希望弹出窗口以我悬停的元素为中心。

有没有办法获取这些信息，例如“谁调用了 show_tooltip”或类似的方式来获取元素的坐标。希望这是有道理的。

针对下面的评论，这就是我目前正在使用的。

```
function show_tooltip(evt) {
    var x = evt.clientX -50;
    var y = evt.clientY -70;

    tooltip.setAttributeNS( null, "transform", "translate(" + x + "," + y + ")" );
    tooltip.setAttributeNS( null, "opacity", "0.7" );
} 
```

这样做的问题是鼠标指针用于坐标。虽然我可以使用`getElementById()`来获取一个元素，但我不知道*哪个*元素调用了该函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:48:04.257

我不知道这是不是你要找的：

```
<div onmouseover="show_tooltip(this)"/> 
```

您将在 js 函数中获得触发事件的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:46:42.273

也许你可以看看[http://docs.jquery.com/Plugins/Tooltip](http://docs.jquery.com/Plugins/Tooltip) ([演示](http://jquery.bassistance.de/tooltip/demo/))。这类插件已经开发了很多次。这只是一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T13:07:37.583

[Event.target](http://www.w3.org/TR/DOM-Level-3-Events/#interface-Event)（在您的脚本中`evt.target`）包含事件的目标（通常是一个元素）。

# android - 使用 Finger Paints 如何激活比较功能？

> ID：10282758
> 
> 赞同：-1
> 
> 时间：2012-04-23T14:42:19.023
> 
> 标签：android, canvas, drawing

我试图做一些事情来比较手指画应用程序中的 2 个位图。我首先将第一个位图加载到二维数组中，然后我想将另一个输出位图从手指画加载到另一个数组中并比较两个位图。我的代码不起作用，我不知道应该在哪里编辑。比较功能在用户按下选项菜单中的“比较”选项后立即启动。请帮我。

```
public class MainActivity extends GraphicsActivity
    {

boolean check = false;  

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new MyView(this));

    mPaint = new Paint();                                                                       
    mPaint.setAntiAlias(true);                                          
    mPaint.setDither(true);                                             
    mPaint.setColor(Color.RED);                                         
    mPaint.setStyle(Paint.Style.STROKE);                                
    mPaint.setStrokeJoin(Paint.Join.ROUND);                             
    mPaint.setStrokeCap(Paint.Cap.ROUND);                               
    mPaint.setStrokeWidth(20);
}

private Paint   mPaint;

public class MyView extends View {
    Bitmap mBitmap;
    Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.c_1);
    Bitmap bitmap2;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;

    int w1 = bitmap.getWidth();
    int h1 = bitmap.getHeight();

    int [][] array = new int [w1][h1];
    int b=0;
    int c=0;
    int k=0;
    int i, j;
    int l=0;
    View content = this;

    {
        for(int j = 0;j< w1; j++){
            for(int i = 0;i< h1; i++,k++){
                array[j][i]= bitmap.getPixel(j, i);
                if(bitmap.getPixel(j, i)== 100);
                {
                    b++;
                }

            }
        }
        System.out.println("numbers of gray:" + b);       

    }

    public MyView(Context c) {                                              
        super(c);

        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
        content.setDrawingCacheEnabled(true);
        content.setDrawingCacheQuality(View.DRAWING_CACHE_QUALITY_HIGH);

}

    @Override
    public void onSizeChanged(int w, int h, int oldw, int oldh){
        super.onSizeChanged(w, h, oldw, oldh);
        mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
    }

    @Override
    protected void onDraw(Canvas canvas) {

        canvas.drawColor(Color.WHITE);

        canvas.drawBitmap(bitmap, 0, 0, null);

        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        canvas.drawPath(mPath, mPaint);

        bitmap2 = content.getDrawingCache();
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;

        }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
            }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();         

        System.out.println("Coordinates:" + x + "," + y);

    switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
    }                               

    return true;    

    }  

    private void compare(Boolean check){
    if(check == true)
        {

            int w2 = bitmap2.getWidth();
            int h2 = bitmap2.getHeight();
            System.out.println("Width and Height of the product:" + w2 + "," + h2); 

            int [][] array1 = new int [w2][h2];             
            {               
                for(int j1 = 0;j1< w2; j1++){
                    for(int i1 = 0;i1< h2; i1++,l++){
                        array1[j1][i1]= bitmap2.getPixel(j1, i1);
                        if(array[j1][i1]== 100 && array1[j1][i1] == Color.RED);
                        {
                            c++;
                        }

                    }
                }
                System.out.println("numbers pixels touched:" + c);       
            }
            int d=(b-c)/b*100;

            Toast t = Toast.makeText(getBaseContext(), "Completion :" + d + "%", Toast.LENGTH_SHORT);
            t.show();

        }
    }
}

private static final int CLEAR_MENU_ID = Menu.FIRST;
private static final int COMPARE_ID = Menu.FIRST + 1;

public boolean onCreateOptionsMenu(Menu menu)  {
    super.onCreateOptionsMenu(menu);

    menu.add(0, CLEAR_MENU_ID, 0, "Clear ALL");
    menu.add(0, COMPARE_ID, 0, "Compare");

 return true;
   }

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case CLEAR_MENU_ID:
            setContentView(new MyView(this));
            check = false;
            return true;
        case COMPARE_ID:
            check = true;
            return true;
    }
            return super.onOptionsItemSelected(item);   
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:56:41.400

您没有在任何地方调用 compare() 。

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {
        case CLEAR_MENU_ID:
            setContentView(new MyView(this));
            check = false;
            return true;
        case COMPARE_ID:
            check = true;
            compare(check);
            return true;
        default:
            break;
    }

    return super.onOptionsItemSelected(item);   

} 
```

我看不到“检查”变量的用途，但我假设您在其他地方使用它。

# apache - Apache mod_rewrite 不保留名称

> ID：10282759
> 
> 赞同：1
> 
> 时间：2012-04-23T14:42:23.837
> 
> 标签：apache, mod-rewrite

我通常将我的 mod_rewrite 条件放在一个 .htaccess 文件中，但在这种情况下，它必须放在 httpd.conf 文件中。我很困惑，因为我想做的事情似乎很简单：站点的根目录是一个嵌套目录：mydomain.com/foo/bar/ 它必须是这样的。我想编写一个规则，以便一个人可以输入：mydomain.com/simple，它将显示来自 mydomain/foo/bar 的内容另外，如果有人点击该站点，我想要 mydomain.com/simple/some-other - 页面结构保持不变。我得到的最接近的是：

```
<IfModule mod_rewrite.c>
RewriteEngine on
RewriteRule   ^simple$ /foo/bar/$1 [PT]
</IfModule> 
```

但是，使用此规则，当一个人键入 mydomain.com/simple 时，它​​会将浏览器中的 URI 重写为 mydomain.com/foo/bar 我做错了什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:01:10.587

首先，这条规则可能有问题：

```
RewriteRule   ^simple$ /foo/bar/$1 [PT] 
```

表达式`^simple`可能永远不会匹配，因为所有请求都以`/`.

您在`$1`规则的右侧使用，但左侧没有匹配组来填充它。这意味着请求`/simple`会得到你`/foo/bar/`，但请求`/simple/somethingelse`不会匹配规则。如果这不是您想要的行为，您可能的意思是：

```
 RewriteRule   ^/simple(.*)$ /foo/bar$1 [PT] 
```

（请注意，我也在`/`这里添加了缺失的前导）。

随着这些变化的到位，这条规则在我的系统上的行为正如我认为你所期望的那样。

最后，打开`RewriteLog`and 设置`RewriteLogLevel`（假设 Apache 是 2.4 之前的版本）将有助于揭示正在发生的事情的详细信息。

# image - 将图像加载到 Webview + Safari 时内存继续增加

> ID：10282768
> 
> 赞同：2
> 
> 时间：2012-04-23T14:43:04.423
> 
> 标签：image, cocoa, memory, safari, webview

我将使用 Javascript 文件加载图像的 HTML 文件加载到 WebView。每次当我将 html 文件加载到 Web 视图时，它都会显示活动监视器中增加了一些内存。甚至，当我释放 Webview 时，它也不会释放内存。

我没有缓存 Webview 中的资源。但是，当我使用仪器分析内存时，它显示图像资源缓存在内存中，没有被释放。

我试图在 Safari 浏览器中加载相同的 HTML 文件，我发现了相同的行为。

谁能指导我在哪里失踪？如何优化 WebView 的内存加载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T02:18:24.577

不要使用 Activity Monitor 来分析应用程序中的内存性能。

使用[Instruments](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html)应用程序及其提供的各种与内存相关的工具，例如分配和泄漏。然后，您将能够确定您的应用程序是否真的泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:08:10.173

更多输入我如何尝试避免在 WebView 中缓存。

我正在使用下面的代码来删除缓存。

```
 [[NSURLCache sharedURLCache] setMemoryCapacity:0];
    [[NSURLCache sharedURLCache] setDiskCapacity:0];

    WebPreferences *the_pPrefs = [m_pWebView preferences];
    [the_pPrefs setCacheModel:WebCacheModelDocumentViewer];
    [the_pPrefs setUsesPageCache:NO];
    [m_pWebView setResourceLoadDelegate:self]; 
```

即使我在下面的委托方法中处理资源加载请求。

```
- (NSURLRequest *)webView:(WebView *)sender 
            resource:(id)identifier 
     willSendRequest:(NSURLRequest *)aRequest 
    redirectResponse:(NSURLResponse *)redirectResponse 
      fromDataSource:(WebDataSource *)dataSource
{
      NSURL * url = [aRequest URL];
      NSURLRequest * cachelessRequest = [NSURLRequest requestWithURL:url    cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:100];
      return cachelessRequest;
} 
```

我希望我做正确的事情来避免缓存。请给出你的想法。

# java - java调用应用程序无法与WCF服务通信

> ID：10282770
> 
> 赞同：1
> 
> 时间：2012-04-23T14:43:26.553
> 
> 标签：java, .net, wcf, web-services

我有 java 应用程序，使用 armart、metro 和 soapui，开源实用程序连接到 .net wcf 服务

得到错误 500 响应和安全验证失败的消息。我能够使用示例 .net 应用程序从 java 服务器连接并且能够连接。

让java使用.net服务的诀窍是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:00:40.480

您可能需要调整 WCF 服务配置以支持 java 客户端。安装和使用[WCF Interop Express](http://wcf.codeplex.com/wikipage?title=WCF%20Express%20Interop%20Bindings)向导来帮助您找到正确的配置。如果您不控制 WCF 服务，您仍然应该能够使用向导来创建他们可以使用的示例配置。

# ios - 在 CGAffineTransformMakeScale 之后更正模糊的文本

> ID：10282773
> 
> 赞同：4
> 
> 时间：2012-04-23T14:43:38.867
> 
> 标签：ios, cgaffinetransform, cgaffinetransformscale

我有多个视图，视图上有许多 UILabel。（全部在 Interface Builder 中构建）。

然后，当您捏住屏幕时，我会尝试创建我的视图的“较小”副本。

为此，我申请：

```
view.transform = CGAffineTransformMakeScale(.5, .5); 
```

然后我也调整了视野。

问题是转换后，我所有的 UILabel 中的文本都变得“模糊”。它不会像在全尺寸视图中那样保持像素完美。

有没有办法在转换后增加标签的像素化？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T16:50:20.943

对 UIView 或 CALayer 应用变换只会缩放该层或视图的光栅化位图。这可能会导致生成的 UI 元素变得模糊，因为它们不会以新的比例重新渲染。

如果您真的希望您的文本或图像在新的比例因子下清晰，您将需要手动调整它们的大小并使其重绘而不是应用变换。[我在此答案](https://stackoverflow.com/a/451629/19679)中描述了一种使用 UIScrollView 中托管的 UIView 执行此操作的方法。

您也许可以创建一个方法来遍历您的一个主视图的视图层次结构，递归地读取每个子视图的框架，将其缩小，然后强制重绘其内容。变换仍然非常适合用于交互式操作或动画，但您可以在操作或动画结束时触发完全手动缩放和重绘。

# jsf - 将空数转换为空

> ID：10282777
> 
> 赞同：2
> 
> 时间：2012-04-23T14:43:46.300
> 
> 标签：jsf, tomcat, el, myfaces

是否有可能告诉我的 JSF 实现将空数字转换为 null。到目前为止，我总是得到 0（对应的复杂类型）。
对于空字符串，有**javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL**，但我找不到任何数字。顺便说一句：不，我不能使用 vm-argument: **-Dorg.apache.el.parser.COERCE_TO_ZERO=false**

自定义数字转换器是我唯一的可能性吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T15:08:44.927

> *不，我不能使用 vm 参数：-Dorg.apache.el.parser.COERCE_TO_ZERO=false*

问题出在服务器使用的 EL 实现中，而不是在 JSF 中。您*确实*需要使用 VM 参数。如果您不能使用它，那么您的问题只能通过将 Tomcat 降级到 6.0.15 或更早版本或用例如 Glassfish 替换服务器之外的其他方式解决。引入这种“改进的”EL 强制行为是 Tomcat 6.0.16。

如果你详细说明你不能使用它的确切原因（至少对我来说没有意义），那么我们也许能够提出如何真正使用它的方法。例如，如果不知道如何设置 VM 参数，那就这么说吧。或者，如果您因为它是第三方维护的服务器而不允许将 VM 参数添加到启动脚本，那么请说出来。这两个问题都可以解决，以便您可以正确使用 VM 参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T02:02:16.823

曾经是 -Dorg.glassfish.el.COERCE_TO_ZERO=true: [https://java.net/projects/uel/lists/issues/archive/2012-04/message/1](https://java.net/projects/uel/lists/issues/archive/2012-04/message/1) 现在（Glassfish v4）是徒劳的！ [https://java.net/projects/uel/lists/commits/archive/2012-04/message/3](https://java.net/projects/uel/lists/commits/archive/2012-04/message/3)

# sql - 尝试为复杂的搜索场景构建 SQL 语句（比较）

> ID：10282780
> 
> 赞同：1
> 
> 时间：2012-04-23T14:43:52.140
> 
> 标签：sql, database, sql-server-2008

我正在尝试为复杂的搜索场景构建 SQL 语句，我需要你们的帮助。场景是：

我正在尝试提供一项服务，商家将注册它并提供他们将为每种产品提供的最佳价值（最多的钱），然后用户可以提供他们的位置并提供每种产品的多少/多少公斤他们拥有并将他们的值输入到输入表单中，然后我希望我的 SQL 列出所有商家以及他们将提供的总金额，其中大部分将从顶部开始。

我有一个包含 Merchants 表和 MerchantProducts 表和 Locations 表的数据库。每个商家有 20 种产品，这些产品对于每个商家来说都是一样的，

```
Merchant Table I have:
UserID (which is merchant's unique id)
MerchantName
MerchantTelNo
MerchantIsActive

MerchantProducts Table I have:
MerchantProductID
UserID
MerchantProductName
MerchantProductValue
MerchantProductLastUpdated 
```

我想做的是：

1- 我有一个产品表单，用户可以在其中输入他们拥有的产品数量。这是一个产品列表，仅包含产品名称（标签）和数量（文本框）。产品的数量将乘以产品的价值。

2-用户将输入他/她的位置。

3- SQL 填充找到附近的商家，并将它们列出在顶部列出的最多和下面列出的最少的位置。

到目前为止，我已经完成了用户只选择一种产品并输入他们的位置，我将获得一个提供最多金额的商家的回报。我已经通过以下 SQL 存储过程完成了这项工作：

```
ALTER PROCEDURE [dbo].[GetNearbyLocations2] 
@ChosenProduct VARCHAR(100),
@CenterLatitude FLOAT, 
@CenterLongitude FLOAT, 
@SearchDistance FLOAT, 
@EarthRadius FLOAT AS DECLARE @CntXAxis FLOAT DECLARE @CntYAxis FLOAT DECLARE @CntZAxis FLOAT 
SET @CntXAxis = COS(RADIANS(@CenterLatitude)) * COS(RADIANS(@CenterLongitude)) 
SET @CntYAxis = COS(RADIANS(@CenterLatitude)) * SIN(RADIANS(@CenterLongitude)) 
SET @CntZAxis = SIN(RADIANS(@CenterLatitude)) 

SELECT TOP 100 *,
ProxDistance = @EarthRadius * ACOS( dbo.XAxis(latitude, longitude)*@CntXAxis + dbo.YAxis(latitude, longitude)*@CntYAxis + dbo.ZAxis(latitude)*@CntZAxis) 
FROM MerchantProducts AS M INNER JOIN Locations AS L ON M.UserID = L.UserID INNER JOIN (SELECT MAX(M.MerchantProductValue) AS MerchantProductValue FROM Locations AS L LEFT OUTER JOIN MerchantProducts AS M On L.UserID = M.UserID 
WHERE (M.MerchantProductName = @ChosenProduct AND @EarthRadius * ACOS( dbo.XAxis(latitude, longitude)*@CntXAxis + dbo.YAxis(latitude, longitude)*@CntYAxis + dbo.ZAxis(latitude)*@CntZAxis) <= @SearchDistance))
AS MX ON M.MerchantProductValue = MX.MerchantProductValue
AND M.MerchantProductName = @ChosenProduct
AND latitude IS NOT NULL ORDER BY ProxDistance ASC 
```

我正在尝试创建一个存储过程来完成否。1,2 & 3\. 基本上我希望用户输入他们对每种产品有多少公斤的产品，然后我希望 sql 遍历每个商家并找出哪个商家将为所有人提供最多的总金额用户在列表中输入值的那些产品。

在此先感谢，我希望我能解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:43:26.107

我相信您所描述的是一个优化问题，您“根据位置和价格填写订单”。我认为您可能希望为每个距离分配“运输成本”，否则您可能无法同时优化最佳价格和最佳位置。

对于单个产品，您可以使用可以使用 SQL Server 中的通用表表达式编写的递归查询来优雅地解决这个问题。CTE 中的第一个种子行将是用户的位置和完整的产品数量。然后递归部分从列出位置和数量*价格的组合成本的查询中提取排名最高的行，并从种子行中减去可用数量，创建具有剩余产品数量的第二行。然后重复直到没有数量。它有点疯狂，因为可能需要通过使用前几行中的商家列表来避免多次包含同一商家。我认为每次迭代都会有一个排名靠前的商家，这会有所帮助。

对于多个产品，您可能需要从多行（或多个动态列）的“种子”开始，或者分别计算每个产品，然后合并结果。

如果您愿意，也可以使用循环、运行变量和临时表来更有效地完成此过程。

[使用公用表表达式的递归查询](http://msdn.microsoft.com/en-us/library/ms186243%28v=sql.105%29.aspx)

# jquery - html5 视频源在 safari 中没有改变

> ID：10282781
> 
> 赞同：0
> 
> 时间：2012-04-23T14:44:01.867
> 
> 标签：jquery, html, src, attr

我正在尝试更改 html5 中视频的来源，但在 Safari 中它并没有像我尝试那样更改它：

这是我的 JQUERY：

```
$(".video").click(function (){
    var str = $(this).attr("id");
    var nww = str.substring(0, str.length - 4);
    $(".id").append(nww);
    $("#vid source:eq(0)").attr("src", nww+".mp4");
    $("#vid source:eq(1)").attr("src", nww+".ovg");
    $("#vid source:eq(2)").attr("src", nww+".webm");
    $("#vid")[0].load();
    }); 
```

这是我的 HTML（单击的按钮）：

```
<div class="vid">
    <a id="http://cancunvideo.com/videos/localidades/cancun/spa/renova_spa_riu_caribe/assets/videos/Hotel_Riu_Caribe.mp4" class="video">
        <img src="http://cancunvideo.com/videos/localidades/cancun/spa/renova_spa_riu_caribe/assets/videos/Hotel_Riu_Caribe.jpg" width="230" height="120" border="0" />
    </a>
</div> 
```

这是我的视频 HTML：

```
<div id="mainVid">
   <video id="vid" width="640" height="360" poster="http://cancunvideo.com/videos/toyota_cancun/hossana/sources/template_toyota.png" autoplay="autoplay" controls style="display: block;">

      <!-- This is the path for the video. It's in webm format -->
  <source src="<?php echo $webm ?>" type='video/webm; codecs="vp8, vorbis"' />
        <!-- This is the path for the video. It's in OGV format -->
  <source src="<?php echo $ovg ?>" type='video/ogg; codecs="theora, vorbis"' />
        <!-- This is the path for the video. It's in mp4 format -->
  <source src="<?php echo $mp4 ?>" type='video/mp4; codecs="avc1.42E01E, mp4a.40.2"' />

    When a browser can't handle the poster fallback, it will show this P tag instead. Which happens to be the same static image.
    <p width="640" height="360" align=style="display: block; line-height: 1px;"><img src="http://cancunvideo.com/videos/toyota_cancun/hossana/sources/template_toyota.png" id="poster" alt="Poster" width="640" height="360" border="0" style="display: block;"></p> 
   </video> 
   <!-- first try HTML5 playback: if serving as XML, expand `controls` to `controls="controls"` and autoplay likewise -->
<!-- warning: playback does not work on iOS3 if you include the poster attribute! fixed in iOS4.0 -->

   </div> 
```

在 Safari 中发生的事情是它改变了所有的来源，但只改变了在 jquery (MP4) 中调用的第一个。在 Firefox 中，它会将它们全部更改为最后一个（.jpg）.. 此处的任何帮助将不胜感激。我撞墙了！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:47:10.753

而不是`$('.video').click(function(){...})`，尝试做

```
$('.video').each(function(){
    $(this).click(function(){
        ...
    })
}) 
```

# asp.net - 从母版页获取价值进入课堂

> ID：10282785
> 
> 赞同：1
> 
> 时间：2012-04-23T14:44:58.313
> 
> 标签：asp.net, vb.net, master-pages

我有一个母版页（myMaster），其中有一个变量（让调用是 myInteger），我想在外部类中访问。

通常我只是在我的 aspx 中这样做： <%@ MasterType VirtualPath="myMaster.master" %>

然后我可以在我的代码中访问它：Master.myInteger ...

我的问题是我想在另一个类中访问它（没有.aspx）

我试着做 Master.MasterPageFile = "~/myMaster.master" Master.AppRelativeVirtualPath = "myMaster.master"

但随后 Master.myInteger 无法识别。

我不确定我想做什么是可能的......有什么想法得到这个变量吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:55:05.580

所以你需要`MasterPage`从一个不继承自的类中引用 a 的属性`Page`？

我建议使用属性或构造函数来用这个值初始化这个类。但是，如果您真的需要这种方式，您可以尝试使用以下方法[`HttpContect.Current.Handler`](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.handler.aspx)：

```
// works even in static context
static void foo()
{
    int myInteger = -1;
    var page = System.Web.HttpContext.Current.Handler as System.Web.UI.Page;
    if(page != null) myInteger = ((myMaster)page.Master).myInteger;
} 
```

请注意，这很容易出错，并且还会将您的课程与`MasterPage`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:52:18.077

从外部类，尝试这样的事情：

```
var page = HttpContext.Current.Handler as Page;
if (page != null)
{
    var value = ((MasterPageName)page.Master).SomeProperty;
} 
```

如果您无法从外部类访问母版页，则可以使用反射来访问属性或方法：

```
var page = HttpContext.Current.Handler as Page;
if (page != null)
{
    var value = page.Master.GetType().GetProperty("SomeProperty").GetValue(page.Master, null);
} 
```

# c++ - 从派生类构造函数调用基类构造函数

> ID：10282787
> 
> 赞同：37
> 
> 时间：2012-04-23T14:45:07.137
> 
> 标签：c++, inheritance, constructor, visibility, derived-class

我有个问题：

假设我最初有这些我无法更改的类（假设因为它们是从我正在使用的库中获取的）：

```
class Animal_
{
public:
    Animal_();
    int getIdA()
    {
        return idA;
    };
    string getNameA()
    {
        return nameA;
    }
private:
    string nameA;
    int idA;
}

class Farm
{
public :
    Farm()
    {
        sizeF=0;
    }
    Animal_* getAnimal_(int i)
    {
        return animals_[i];
    }
    void addAnimal_(Animal_* newAnimal)
    {
        animals_[sizeF]=newAnimal;
        sizeF++;
    }

private:
    int sizeF;
    Animal_* animals_[max];
} 
```

但是后来我需要一个只添加几个字段的类，所以我这样做了：

```
class PetStore : public Farm
{
public :
    PetStore()
    {
     idF=0;
    };
private:
    int idF;
    string nameF;
} 
```

但是，我无法初始化我的派生类。我的意思是我做了这个继承，所以我可以添加`animals`到我的`PetStore`，但现在既然`sizeF`是私人的，我该怎么做？我在想也许在`PetStore`我可以调用的默认构造函数中`Farm()`......所以有什么想法吗？

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-23T14:51:15.077

的构造函数`PetStore`将调用`Farm`;的构造函数 你没有办法阻止它。如果您什么都不做（就像您所做的那样），它将调用默认构造函数 ( `Farm()`)；如果需要传递参数，则必须在初始化列表中指定基类：

```
PetStore::PetStore()
    : Farm( neededArgument )
    , idF( 0 )
{
} 
```

（类似地， 的构造函数`PetStore`将调用 的构造函数 `nameF`。类的构造函数*总是*调用其所有基类及其所有成员的构造函数。）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-23T14:48:18.000

首先，a`PetStore`不是农场。

让我们过去吧。您实际上不需要访问私有成员，您在公共界面中拥有所需的一切：

```
Animal_* getAnimal_(int i);
void addAnimal_(Animal_* newAnimal); 
```

这些是您可以访问的方法，也是您应该使用的方法。

> 我的意思是我做了这个继承，所以我可以将动物添加到我的 PetStore 但现在由于 sizeF 是私有的，我该怎么做？

很简单，你打电话`addAnimal`。它是`public`并且它也递增`sizeF`。

另外，请注意

```
PetStore()
{
 idF=0;
}; 
```

相当于

```
PetStore() : Farm()
{
 idF=0;
}; 
```

即调用基础构造函数，初始化基础成员。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-23T14:50:36.933

派生类构造函数已经自动调用了基类构造函数。在 C++ 中，如果基类有一个默认构造函数（不带参数，可以由编译器自动生成！），并且派生类构造函数没有调用其初始化列表中的另一个基类构造函数，则默认构造函数将叫做。即你的代码相当于：

```
class PetStore: public Farm
{
public :
    PetStore()
    : Farm()     // <---- Call base-class constructor in initialision list
    {
     idF=0;
    };
private:
    int idF;
    string nameF;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T14:48:49.470

> 但我无法初始化我的派生类，我的意思是我做了这个继承，所以我可以将动物添加到我的 PetStore 但现在由于 sizeF 是私有的，我该怎么做？所以我在想也许在 PetStore 默认构造函数中我可以调用 Farm()...所以任何想法？

不要恐慌。

**在 PetStore 的构造函数中会自动**调用 Farm 构造函数。

见基类继承调用规则：[调用超类构造函数的规则是什么？](https://stackoverflow.com/questions/120876/c-superclass-constructor-calling-rules)

# c# - TextBlock 在 Windows Phone 7 中只接受数字

> ID：10282800
> 
> 赞同：4
> 
> 时间：2012-04-23T14:45:50.710
> 
> 标签：c#, windows-phone-7

我正在创建一个应用程序，我不希望用户使用字母或特殊字符，除了数字（数字）。用户只能输入数字......如果用户输入字母或特殊字符，则会显示错误消息......我找到了“空部分”的解决方案，即

```
if (uservalue == "" )
  textblock.text = "Sorry! enter digit please"
else
  textblock.text=y.toString(); 
```

如果用户只是按下“点击我”按钮而不在文本框中输入数字，则此消息“对不起！请输入数字”出现在文本块中。我想知道如何解决字母和特殊字符的问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T14:51:37.187

您可以通过在 TextBox 中添加以下内容来更改手机的键盘以仅显示数字：

```
<TextBox .... InputScope="Digits" ....> 
```

这仍将添加“。” 键盘上的键。为了防止用户键入它，您将 KeyUp 事件添加到 TextBox 并执行以下操作：

```
private void KeyUp(object sender, System.Windows.Input.KeyEventArgs e)
{
    TextBox txt = (TextBox)sender;
    if (txt.Text.Contains('.'))
    {
        txt.Text = txt.Text.Replace(".", "");
        txt.SelectionStart = txt.Text.Length;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T14:49:12.273

您可以使用[TryParse](http://msdn.microsoft.com/en-us/library/f02979c7.aspx)方法：

```
int digit;
if (!int.TryParse(uservalue, out digit))
{
    textblock.text = "Sorry! enter digit please";
}
else
{
    textblock.text = digit.toString();
} 
```

这假定用户应该输入一个有效的 32 位整数。如果您需要处理可以输入大量数字的较大值，您可以使用以下正则表达式`\d+`来验证输入：

```
if (!Regex.IsMatch(uservalue, @"\d+"))
{
    textblock.text = "Sorry! enter digit please";
}
else
{
    textblock.text = uservalue;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T07:05:01.733

试试这个肯定会起作用，将 h 和 k 声明为整数变量。文本框只允许数字

```
private void txt3_KeyPress(object sender, KeyPressEventArgs e)
    {

        for (int h = 58; h <= 127; h++)
        {
            if (e.KeyChar == h)             //58 to 127 is alphabets tat will be         blocked
            {
                e.Handled = true;
            }

        }

        for(int k=32;k<=47;k++)
        {
            if (e.KeyChar == k)              //32 to 47 are special characters tat will 
            {                                  be blocked
                e.Handled = true;
            }

        }

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T14:55:22.977

您可以在 xaml 中使用`TextBox`和设置`TextBox.InputScope=Number`。[输入范围](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.inputscope%28v=vs.95%29.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-25T10:35:37.323

基于 Rithc Melton 所说，这里是所有输入范围选项的列表

[输入范围列表和教程](http://www.imaginativeuniversal.com/blog/post/2010/07/06/WP7-InputScope.aspx)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T14:52:18.260

您可以使用正则表达式

# wpf - 文本框密码字符

> ID：10282801
> 
> 赞同：7
> 
> 时间：2012-04-23T14:45:54.243
> 
> 标签：wpf, textbox, passwords, controls, char

Windows 窗体中的文本框曾经有一个 PasswordChar 属性。在 WPF 中有一个额外的控件：PasswordBox。这不是问题，但我的应用程序在仅触摸屏的设备上运行。不幸的是，密码框不支持屏幕键盘。我想知道是否有办法将密码字符功能添加到标准文本框中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:27:59.890

[这个答案](https://stackoverflow.com/a/6629237/107899)可能会为您提供所需的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-17T19:14:58.727

我通过为密码内容创建两个属性并将它们绑定到相同的模型值来解决这个特殊问题。其中之一（可见的 UI 元素）绑定到密码。这个属性上的 Get 当然会返回一个字符数组来显示。必须使用密码文本的函数可以使用 PlainPassword 属性。

将“UpdateSourceTrigger=PropertyChanged”添加到文本框的绑定会导致字符在键入时出现在文本框中。

```
 public string Password
  {
     set
     {
        Model.Password = value;
        OnPropertyChanged("Password");
     }
     get 
     {
        return new String('●', Model.Password.Length); 
     }
  }

  public string PlainPassword
  {
     set
     {
        Model.Password = value;
        OnPropertyChanged("Password");
     }
     get { return Model.Password; }
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T15:24:32.250

我相信您可以实现此目的的唯一方法是基于文本框创建自己的控件。然后只需将实际文本属性绑定到返回密码字符而不是实际密码的属性。然后您可以将密码作为依赖属性提取（尽管我听说这很不安全，这就是为什么它不是密码框中的依赖属性），或者只是一个常规属性并通过传递整个文本框对象来访问它.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-17T17:09:57.657

混淆 a 中密码的一种简单方法`TextBox`是使用`Webdings`字体。

```
txtInput.FontFamily = new FontFamily("Webdings"); 
```

这并不完全安全，但在大多数情况下就足够了。请注意，它比 ,`Webdings`效果更好`Wingdings`，因为`Wingdings`它不覆盖小写字母并以大写形式返回所有内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-05T15:01:32.250

你好！

我是新来的，但也许我可以帮助你。我发现这个-> 可以使用 WPF 和密码框

```
private void delete_Click(object sender, RoutedEventArgs e)
    {
    if (pass_passbox.IsFocused == true)
        {
            pass_passbox.Password= "";
        }
    } 
```

如果它的文本框，你可以执行这个 pass_passbox.Text，但是当更改 WPF 密码框时，你需要编写 pass_passbox.Password 并且你可以从屏幕键盘进行更改。

未经过全面测试，但您可以通过这种方式重置

你可以像这样选择：

```
string Query = "Select * from [employeeinfo] where username='" + this.txt_user_name.Text + "' and password='" + this.pass_passbox.Password + "' "; 
```

你可以看到 this.pass_passbox.Password 在文本框 this.pass_passbox.Text 是一样的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-02-27T03:42:41.280

```
 private void txtBoxPassword_TextChanged(object sender, EventArgs e)
    {
        //password view protection//
        txtBoxPassword.UseSystemPasswordChar = true;
    } 
```

这是一种启用用于向系统隐藏密码的 DEFAULT 字符的方法，如果您希望设置自己的密码字符，只需将事件函数中的实际行替换为以下内容：txtBoxPassword.PasswordChar='*'; //或任何其他字符

# c# - WCF 无法解析 Java 肥皂响应

> ID：10282803
> 
> 赞同：0
> 
> 时间：2012-04-23T14:45:59.773
> 
> 标签：c#, java, wcf, web-services, axis

我有来自 Java Web 服务的响应：

```
HTTP/1.1 200 OK
Date: Mon, 23 Apr 2012 12:08:50 GMT
Server: Jetty/5.1.14 (Linux/2.6.18-274.17.1.el5xen x86 java/1.6.0
Content-Type: text/xml; charset=utf-8
Content-Length: 571
--MIMEBoundaryurn_uuid_14B7343BF98675BB5D1335182931028
Content-Type: application/xop+xml; charset=utf-8; type="text/xml"
Content-Transfer-Encoding: binary
Content-ID: <0.urn:uuid:14B7343BF98675BB5D1335182931029@apache.org>
<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><ns1:loginResponse xmlns:ns1="http://www.telelogic.com/change/types"><token>206398089429929753</token></ns1:loginResponse></soapenv:Body></soapenv:Envelope>
--MIMEBoundaryurn_uuid_14B7343BF98675BB5D1335182931028-- 
```

WCF 的例外告诉我`The data at the root level is invalid. Line 1, position 1.`

我的 app.config 如下：

```
<customBinding>
  <binding>
    <!--<messageModifier />-->
    <!--<mtomMessageEncoding messageVersion="Soap11" writeEncoding="utf-8" />-->
    <textMessageEncoding writeEncoding="utf-8" messageVersion="Soap11"   />
    <httpsTransport
      requireClientCertificate="false"
      transferMode="Buffered" />
  </binding>
</customBinding> 
```

如您所见，我已经尝试了不同的设置，例如 mtom/text 编码、soap11/soap12 用于消息版本、缓冲和 responseStreamed 用于传输模式。我有点卡住了。当我用 Fiddler 剥离一些响应时，我得到了它的工作：

```
HTTP/1.1 200 OK
Date: Mon, 23 Apr 2012 14:21:44 GMT
Server: Jetty/5.1.14 (Linux/2.6.18-274.17.1.el5xen x86 java/1.6.0
Content-Type: text/xml; charset=utf-8
Content-Length: 571

<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><ns1:loginResponse xmlns:ns1="http://www.telelogic.com/change/types"><token>206398089429929753</token></ns1:loginResponse></soapenv:Body></soapenv:Envelope> 
```

我错过了什么吗？我需要配置设置的神奇组合吗？

我还尝试了 IClientMessageFormatter 和 IClientMessageInspector bot，但它们在堆栈中似乎都太高了，因为 WCF 已经失败并显示 ProtocolException `The data at the root level is invalid. Line 1, position 1.`。

[我从WCF 示例](http://msdn.microsoft.com/en-us/library/ms751495.aspx)中加入了 ChannelMessageInterceptor 。我以为我可以正常工作，但现在我从 java 服务中得到了异常：

```
HTTP/1.1 500 Internal Server Error
Date: Mon, 23 Apr 2012 14:40:05 GMT
Server: Jetty/5.1.14 (Linux/2.6.18-274.17.1.el5xen x86 java/1.6.0
Content-Type: multipart/related; boundary=MIMEBoundaryurn_uuid_14B7343BF98675BB5D1335192006387; type="application/xop+xml"; start="<0.urn:uuid:14B7343BF98675BB5D1335192006388@apache.org>"; start-info="application/soap+xml"; action="http://www.telelogic.com/change/ChangeService/login/Fault/LoginFault";charset=UTF-8
Content-Length: 2853

--MIMEBoundaryurn_uuid_14B7343BF98675BB5D1335192006387
Content-Type: application/xop+xml; charset=utf-8; type="application/soap+xml"
Content-Transfer-Encoding: binary
Content-ID: <0.urn:uuid:14B7343BF98675BB5D1335192006388@apache.org>

<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope"><soapenv:Body><soapenv:Fault xmlns:axis2ns15="http://www.w3.org/2003/05/soap-envelope"><soapenv:Code><soapenv:Value>axis2ns15:MustUnderstand</soapenv:Value></soapenv:Code><soapenv:Reason><soapenv:Text xml:lang="en-US">Must Understand check failed for header http://www.w3.org/2005/08/addressing : Action</soapenv:Text></soapenv:Reason><soapenv:Detail><Exception>org.apache.axis2.AxisFault: Must Understand check failed for header http://www.w3.org/2005/08/addressing : Action
    at org.apache.axis2.engine.AxisEngine.checkMustUnderstand(AxisEngine.java:88)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:137)
    at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:275)
    at org.apache.axis2.transport.http.AxisServlet.doPost(AxisServlet.java:121)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:428)
    at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:830)
    at compressionFilters.CompressionFilter.doFilter(CompressionFilter.java:192)
    at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:821)
    at com.telelogic.cs.filters.StrutsCharsetFilter.doFilter(StrutsCharsetFilter.java:44)
    at org.mortbay.jetty.servlet.WebApplicationHandler$CachedChain.doFilter(WebApplicationHandler.java:821)
    at org.mortbay.jetty.servlet.WebApplicationHandler.dispatch(WebApplicationHandler.java:471)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:568)
    at org.mortbay.http.HttpContext.handle(HttpContext.java:1530)
    at org.mortbay.jetty.servlet.WebApplicationContext.handle(WebApplicationContext.java:633)
    at org.mortbay.http.HttpContext.handle(HttpContext.java:1482)
    at org.mortbay.http.HttpServer.service(HttpServer.java:909)
    at org.mortbay.http.HttpConnection.service(HttpConnection.java:820)
    at org.mortbay.http.HttpConnection.handleNext(HttpConnection.java:986)
    at org.mortbay.http.HttpConnection.handle(HttpConnection.java:837)
    at org.mortbay.http.SocketListener.handleConnection(SocketListener.java:245)
    at org.mortbay.util.ThreadedServer.handle(ThreadedServer.java:357)
    at org.mortbay.util.ThreadPool$PoolThread.run(ThreadPool.java:534)
</Exception></soapenv:Detail></soapenv:Fault></soapenv:Body></soapenv:Envelope>
--MIMEBoundaryurn_uuid_14B7343BF98675BB5D1335192006387-- 
```

至少它告诉我他们正在使用 Axis？我还看到异常消息告诉我响应的内容类型与绑定中的类型不匹配，但我目前无法重现它们。

看起来很像[这个](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/6e8aeec0-eb8d-4aca-9dfb-f7a658d476cd/)问题。我还尝试了[带有附件编码器的 WCF Soap](http://wcfswaencoder.codeplex.com/)，但它也一直在唠叨`Data at the root level is invalid. Line 1, position 1.`（但现在直接在 XmlException 而不是 ProtocolException 内）。

*更新* 我有 WCF SWA 工作！

包含附件的示例消息：

```
HTTP/1.1 200 OK
Date: Tue, 24 Apr 2012 11:27:40 GMT
Server: Jetty/5.1.14 (Linux/2.6.18-274.17.1.el5xen x86 java/1.6.0
Content-Type: multipart/related; boundary=MIMEBoundaryurn_uuid_14B7343BF98675BB5D1335266861287; type="application/xop+xml"; start="<0.urn:uuid:14B7343BF98675BB5D1335266861289@apache.org>"; start-info="text/xml";charset=UTF-8
Content-Length: 81847

--MIMEBoundaryurn_uuid_14B7343BF98675BB5D1335266861287
Content-Type: application/xop+xml; charset=utf-8; type="text/xml"
Content-Transfer-Encoding: binary
Content-ID: <0.urn:uuid:14B7343BF98675BB5D1335266861289@apache.org>

<?xml version="1.0" encoding="utf-8"?><soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body><ns1:downloadAttachmentResponse xmlns:ns1="http://www.telelogic.com/change/types"><attachmentContents><xop:Include href="cid:1.urn:uuid:14B7343BF98675BB5D1335266861290@apache.org" xmlns:xop="http://www.w3.org/2004/08/xop/include"></xop:Include></attachmentContents></ns1:downloadAttachmentResponse></soapenv:Body></soapenv:Envelope>
--MIMEBoundaryurn_uuid_14B7343BF98675BB5D1335266861287
Content-Type: application/octet-stream
Content-Transfer-Encoding: binary
Content-ID: <1.urn:uuid:14B7343BF98675BB5D1335266861290@apache.org>

��ࡱ�����������������>����   ����������������������������������������������������������������������������������������������������������������������������������������������
--MIMEBoundaryurn_uuid_14B7343BF98675BB5D1335266861287-- 
```

目前我正在考虑使用 HttpWebRequest 调用服务，因为解析更不容易出错。

当对这个特定消息使用默认的 MTOM 编码器时，它可以工作：S 现在我需要动态切换编码器？！

我终于让它工作了。基于 WCF SWA 示例，我创建了一个绑定扩展，它使用 TextMessageEncodingBindingElement 作为默认值，并在接收多部分/相关消息时使用 MtomMessageEncodingBindingElement 发送消息和回退机制。

谢谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:42:14.210

确保 Action Header (incoming from Java) 不为空，或应用 WCF ServiceBehavior – AddressFilterMode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:57:35.920

此肥皂的格式类似于 mime 消息，但实际上没有附件。如果您有包含附件的示例，请发布。Otehrwise 我认为 tehre 永远不是附件，我建议您构建自己的消息编码器，该编码器只需剥离除肥皂信封之外的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:49:00.090

轴需要`SOAPAction:foo`标题。不要问我为什么，'foo' 可以是（据我所知）任何东西，无论调用的是什么服务。但如果那不存在，它将出错。因此，如果您将其添加到第二次尝试中，可能会解决您的问题。

YMMV，我只需要在单个客户端站点处理 Axis 托管的 Java 服务，但所有这些服务都是这样的。

# java - Java 行代码中的错误

> ID：10282806
> 
> 赞同：0
> 
> 时间：2012-04-23T14:46:15.710
> 
> 标签：java, line

[http://pastebin.com/gDMy7fPw](http://pastebin.com/gDMy7fPw)

上面，是我的形状创建者代码，这是一部分但独立。

我收到一个错误

```
g2d.drawLine(p1.getX(), p1.getY(), p2.getX(), p2.getY()); 
```

它基本上说它*不能在原始类型 double 上调用 getX()*，*不能在原始类型 double 上调用 getY()*。

我可以更改除该方法之外的任何代码。有谁知道我怎样才能摆脱这个错误，因为我不知道这意味着什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:48:18.173

你`p1`和`p2`变量的类型是`double`. 首先要做的是根据你的理解工作*。*编译器消息说明了您应该需要的一切：

> 无法在原始类型 double 上调用 getX()

这是绝对正确的- 你不能打电话`getX()`。`double`所以接下来你应该弄清楚你*为什么*要尝试跟注`getX()`。你不应该调用它，还是你的变量类型错误？

我*怀疑*不是这些变量：

```
private double x1;
private double y1;
private double x2;
private double y2;
private double p1;
private double p2; 
```

你实际上想要：

```
private Point p1;
private Point p2; 
```

或者，完全摆脱`p1`和`p2`改变你的电话：

```
g2d.drawLine(x1, y1, x2, y2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:50:32.523

可能您想使用：

g2d.drawLine(x1, y1, x2, y2);

# iphone - 如何配置 Xcode 项目以使用 TestFlightApp 进行 beta 测试？

> ID：10282810
> 
> 赞同：1
> 
> 时间：2012-04-23T14:46:41.400
> 
> 标签：iphone, ios, ipad, testflight, beta-testing

我注册了TestFlight。

然后我按照[本教程中的所有步骤操作：](http://help.testflightapp.com/customer/portal/articles/402782-how-to-create-an-ipa-xcode-4)

但是 Xcode 会抛出这个警告：

> 应用程序未通过协同设计验证。签名无效，包含不允许的权利，或者未使用 iPhone 分发证书签名。(-19011)

感觉比他们在教程中写的要多得多。是否有一个完整的教程，它可以在不跳过任何内容的情况下完成每一步？

即使是简单的 beta 测试，我是否也需要添加 SDK？（编辑：不，不需要 SDK！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T21:55:20.533

首先登录到[Provisioning Portal](https://developer.apple.com/ios/manage/overview/index.action)，然后在 Devices 下添加一个或两个测试设备。然后转到 Provisioning 并为您正在使用的 appID 创建一个新的并添加这些设备。

返回 Xcode 并使用 Organizer:Devices:Provisioning Profiles 下载（刷新）Provisioning Profile。将项目的调试方案的签名设置为使用该开发人员配置文件。然后，您应该能够构建然后归档。存档后，进行临时分发并将该文件保存到桌面。

转到您在 TestFlightApp.com 上的帐户，然后按 Upload Build 按钮。将您保存在桌面上的文件拖放到构建上传区域。如果应用程序没有为临时捆绑或未正确签名，TestFlightApp 将给您错误。

现在，TestFlightApp.com 将为您节省工作。从 TestFlightApp.com 向朋友发送邀请。TestFlightApp.com 将管理通知他们，并且在他们创建帐户时，它还将帮助他们找到他们的 UDID。这些 UDID 可以批量处理，稍后由您下载，然后重新上传到 Apple Provisioning Center 的设备部分。

![在此处输入图像描述](../Images/19d7a8212ab096381cbe66fa6c5da5f8.png) 然后，您使用 Xcode 刷新您的配置文件，并重建应用程序、存档并上传到 testflightapp。然后，您可以选择您的哪个测试人员将看到此构建以及应该向他们发送什么消息。您的测试人员不必弄清楚如何下载文件并使用 iTunes 或其他应用程序安装它们，他们只需按下安装按钮。

相信我，虽然这仍然是一项工作，但它比不使用 TestFlightApp.com 好得多，尤其是如果您的用户对应用程序安装不是很了解。将来，您可以使用 TestFLight SDK 为您的调试版本收集崩溃报告和使用信息。

有关更多信息，请参阅以下内容： [TestFlight beta-testing iOS app](https://stackoverflow.com/questions/9753643/testflight-beta-testing-ios-app/9753928#comment13228134_9753928)

# mysql - 如何（静默）在 32 位和 64 位 Windows 上卸载 MySQL

> ID：10282814
> 
> 赞同：1
> 
> 时间：2012-04-23T14:46:57.870
> 
> 标签：mysql, uninstallation, install4j

我们将 Install4J 用于我们当前版本的软件，并在安装过程中静默安装 MySQL 5.1。

对于我们软件的下一个版本，如果是升级的话，我想去掉MySQL 5.1，安装5.5。理想情况下，卸载应该静默进行，但不是硬性要求。我设法让它在 32 位 Windows XP 上运行，但不能在 64 位 Windows 7 上运行。这是我目前所拥有的：

```
String[] uninstallKeys = WinRegistry.getSubKeyNames(RegistryRoot.HKEY_LOCAL_MACHINE, "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall");
for( String uninstallKey : uninstallKeys )
{
  Object displayVersion = WinRegistry.getValue(RegistryRoot.HKEY_LOCAL_MACHINE, "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\" + uninstallKey, "DisplayVersion" );
  Object displayName = WinRegistry.getValue(RegistryRoot.HKEY_LOCAL_MACHINE, "SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Uninstall\\" + uninstallKey, "DisplayName" );
  if( displayVersion != null && displayVersion.toString().equals(installedMysqlVersion)
                  && displayName != null && displayName.toString().startsWith("MySQL Server") )
  {
    Util.logInfo( null, "Found match, uninstall key: " + uninstallKey );
    context.setVariable( "mysqlUninstallKey", uninstallKey );
    break;
 }
} 
```

这会将 MySQL Server 5.1 的产品代码放入`mysqlUninstallKey`变量中。在这一步之后，我有一个具有以下设置的“运行可执行文件或批处理文件”步骤：

*   可执行文件：msiexec.exe
*   工作目录：${installer:sys.system32Dir}
*   参数：/I{installer:mysqlUninstallKey}

这将（在 32 位 Windows XP 上）运行 MySQL 服务器的安装程序，然后用户必须手动选择“删除”。

在 64 位 Windows 7 上，它只显示一个对话框，显示所有命令行标志及其解释，因此 msiexec.exe 正在启动，但我传递给它的参数无法识别。

知道可能出了什么问题吗？或者，也许我做错了，有更好的方法吗？

我使用 Install4j 4.2.8。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T07:16:07.963

感谢@marcus-adams 的评论，我明白了。您需要在 install4j 的“运行可执行文件或批处理文件”操作中使用“/qn”、“/x”和“{installer:mysqlUninstallKey}”作为单独的参数。如果将 1 个参数与空格一起使用，则它不起作用。有了它，它适用于 32 位和 64 位。

# c# - 尝试从 XAML 绑定到同一类的成员 var（从 .xaml 到 .xaml.cs）

> ID：10282815
> 
> 赞同：0
> 
> 时间：2012-04-23T14:47:01.920
> 
> 标签：c#, windows-phone-7, xaml

在我的 XAML 中，我有代码

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <StackPanel>
        <TextBlock Height="30" Name="tb1" Text="{Binding meetingX}" />
    </StackPanel>
</Grid> 
```

在 .xaml.cs 属于上面的 .xaml 我有

```
 public static Meeting theMeeting;
    public string meetingX;

    public MeetingOverview()
    {
        InitializeComponent();
        theMeeting = (Meeting)App.meetings.ElementAt(App.selectedMeetingIndex);
        meetingX = theMeeting.MeetingName.ToString();
    }

    public string MeetingX
    {
        get
        {
            return meetingX;
        }
        set
        {
            if (value != meetingX)
            {
                Debug.WriteLine("set meetingXto: " + value.ToString()); 
                meetingX= value;
            }
        }
    } 
```

文本出现空白，因此它没有读取 meetingX 中的值。我添加了一个 Debug.WriteLine 来检查 var 中是否有一些文本并且有。

任何人都可以给我一些关于如何使我打算做的工作的提示吗？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:51:28.690

您只能绑定到属性：

```
Text="{Binding meetingX}" <!-- --> Text="{Binding MeetingX}" 
```

您需要设置视图的 DataContext：

```
public MeetingOverview()
    {
        theMeeting = (Meeting)App.meetings.ElementAt(App.selectedMeetingIndex);
        meetingX = theMeeting.MeetingName.ToString();
        this.DataContext = this;
        InitializeComponent();        
    } 
```

如果值要改变，你需要在你的类上实现[INotifyPropertyChanged 。](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)你也应该看看 MVVM，因为这些信息应该放在 ViewModel 中。

这两个主题在整个网络上都有广泛的博客，所以我相信你内心的谷歌搜索器；）

希望这可以帮助，

呸。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T14:58:50.750

将属性转换为[DependencyProperty](http://msdn.microsoft.com/en-us/library/ms752914.aspx)：

```
public String MeetingX
{
  get { return (String)this.GetValue(MeetingXProperty); }
  set { this.SetValue(MeetingXProperty, value); } 
}

public static readonly DependencyProperty MeetingXProperty = DependencyProperty.Register(
    "MeetingX", typeof(String), typeof(MeetingOverview),new PropertyMetadata("")); 
```

# javascript - stop() 的 slideToggle 问题

> ID：10282816
> 
> 赞同：1
> 
> 时间：2012-04-23T14:47:05.193
> 
> 标签：javascript, jquery, css, xhtml

```
$(document).ready(function() {
    $("ul li").click(function() {
        $(this).find("p").slideToggle("normal");
        return false;
    });
}); 
```

使用这段 jQuery 代码，我可以让元素滑入和滑出。但问题是，当有人真正快速点击时，滑出只会一直到达到最新达到的高度的最大高度。

因此，如果有人真正快速点击，该元素只会滑出几个像素并向上滑动。如果他们再次单击以将其滑出，它只会滑出到上次达到的最大高度。

任何人都可以帮我解决这个问题以使这项工作正常吗？

*PS：p元素的高度设置为auto，所以它会自动匹配里面内容的高度（也许这个细节会对你的回答有所帮助）。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:50:14.180

不要使用该`click`函数来附加点击事件，`one`而是使用：

```
$("ul li").one("click", doStuff);

function doStuff(){ 
   // do your stuff here
   $("ul li").one("click", doStuff); // Re-attach event
} 
```

然后在函数中重新附加事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:17:38.910

如果您想实际处理额外的点击（而不是忽略它们），那么您想使用`.stop(true, true)`停止上一个动画并将其跳转到结论，以便您的下一个动画可以按照您的意愿运行：

```
$(document).ready(function() {
    $("ul li").click(function() {
        $(this).find("p").stop(true, true).slideToggle("normal");
        return false;
    });
}); 
```

每当您通过用户点击触发动画时，您都应该知道`.stop()`并弄清楚在给定情况下要使用哪些参数。没有它，动画可能会堆积在队列中并按顺序运行，这通常不是您想要的。

这是关于它的[jQuery 参考信息](http://api.jquery.com/stop/)`.stop()`及其参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T14:51:13.540

尝试这个：

```
$(document).ready(function() {
    $("ul li").click(function() {
        if ( ! $(this).find('p:animated').length)
        {
            $(this).find("p").slideToggle("normal");
            return false;
        }
    });
}); 
```

# ios5 - 附加到电子邮件的 UI Web 视图

> ID：10282820
> 
> 赞同：1
> 
> 时间：2012-04-23T14:47:20.200
> 
> 标签：ios5, uiwebview, xcode4.2, html-email

我正在尝试将 UI webview 附加到我项目中的电子邮件正文。我有文本字段和 ui webview 的组合。当我尝试附加 UI WebView 时，文本框会出现，但 uiwebview 内容不会。

```
NSString *emailBody = [NSString stringWithFormat:@"%@%@",textfieled.text,webview.tag];

[mail setMessageBody:emailBody isHTML:YES]; 
```

我意识到 webview 上的 .tag 可能不正确，有人可以告诉我我应该放什么（或做错），因为我已经尝试了所有可用的组合？

# javascript - 扩展 JS Boolean.prototype 失败

> ID：10282821
> 
> 赞同：0
> 
> 时间：2012-04-23T14:47:21.113
> 
> 标签：javascript, boolean, prototype

我想做这个：

```
a = false;

a.toggle();

console.log(a) // -> true; 
```

所以我创建了这个：

```
Boolean.prototype.toggle = function (){this = !this; return this;} 
```

但它只是不起作用。我也尝试了许多类似的版本，包括 valueOf 之类的，但总是失败。

我怀疑`Boolean`object 没有 setter 方法 @ its `prototype`。但也许你们可以帮助解决这个问题。

提前致谢。

（请不要回答“为什么`a = !a`不适合你？”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:55:27.687

首先，你永远不能`this`在 javascript 中分配，所以`this = !this`不会工作。

其次，布尔对象似乎没有设置器。它有`valueOf()`而且它有`toString()`。

这是我能想到的最接近的：

```
Boolean.prototype.toggle = function (){return !this.valueOf();}

var a = false;
var b = a.toggle();

console.log(b) // -> true;​ 
```

# extjs4 - 创建自定义模板组件 Sencha Architect 2

> ID：10282823
> 
> 赞同：0
> 
> 时间：2012-04-23T14:47:26.513
> 
> 标签：extjs4, extjs, sencha-architect

如何为我的组件创建自定义模板。有人用过煎茶建筑师2吗？

我发现只导入了未知的 XDC 文件，但我没有，也不知道如何创建。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:36:21.570

在 Sencha Architect 中，转到 Project Inspector 并将 CSS Resource 拖到 Application 下的 Resources 部分。然后输入你的css文件的url，相对于应用程序文件夹，例如../_styles/myCSS.css，并给它一个id，以便它在资源下看起来不错，例如myCSS。

但请记住，Architect 使用元数据运行，因此您实际上需要将您的 css 代码添加到 Sencha Architect 的“代码”块中，以便应用它。

# javascript - Javascript 将动态图像从 URL 绘制到画布元素上

> ID：10282824
> 
> 赞同：6
> 
> 时间：2012-04-23T14:47:36.280
> 
> 标签：javascript, image, canvas

我正在尝试使用其 URL 将动态 PNG 图像（由 PHP 脚本生成的图像）​​绘制到 Canvas 元素上。我不能真正发布我正在测试的页面的确切 URL，因为您必须登录到该网站。

我正在使用的其中一个动态图像 URL 的示例是：[http ://www.website.com/includes/dynamicimage.php?ID=29718958161](http://www.website.com/includes/dynamicimage.php?ID=29718958161)

如果您登录到此特定网站并将该 URL 粘贴到您的地址栏中，它将正确显示图像。但是，以下 Javascript 代码未正确将其绘制到 canvas 元素上：

```
function checkImage(imageContext) {
    var canvas = document.createElementNS(
        'http://www.w3.org/1999/xhtml', 'canvas');
    canvas.width = imageContext.width;
    canvas.height = imageContext.height;

    var context = canvas.getContext("2d");
    var img = new Image();
    img.src = imageContext.src;
    context.drawImage(img, 0, 0);

    newWindow = window.open(imageContext.src, 'newWin', 'width=300,height=300');
    newWindow2 = window.open('', 'newWin2', 'width=300,height=300');
    newWindow2.document.body.appendChild(canvas);

    var imgd = context.getImageData(0, 0, imageContext.width,
        imageContext.height);
    var pix = imgd.data;
} 
```

我有两个弹出窗口显示动态图像和画布上绘制的内容，但画布始终是空白的。然后，我尝试在设置“pix”变量后对图像进行进一步的 RGB 测试，但由于图像从未绘制到画布元素，因此此步骤失败。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T16:57:19.580

您的问题是在尝试将图像绘制到画布之前，您没有等待图像加载。[有关更多详细信息，请参阅此问题](https://stackoverflow.com/questions/4776670/should-setting-an-image-src-to-dataurl-be-available-immediately)中标题为***“安全播放”***的部分。

简而言之：

```
var img = new Image;      // First create the image...
img.onload = function(){  // ...then set the onload handler...
  ctx.drawImage(img,0,0);
};
img.src = "someurl";      // *then* set the .src and start it loading. 
```

# hadoop - 如何将新节点添加到实时 hbase/hadoop 集群？

> ID：10282826
> 
> 赞同：3
> 
> 时间：2012-04-23T14:47:53.027
> 
> 标签：hadoop, hbase, hdfs

我使用不断变化的数据输入运行一些批处理作业，并且在配置容量时遇到问题。我正在使用 whirl 进行初始设置，但是一旦启动，例如，5 台机器，我不知道如何在其运行时向其添加新机器。我事先不知道数据会有多复杂或有多大，所以我想知道是否有办法将新机器添加到集群并让它立即生效（或者有一些延迟但不想必须关闭集群并使用新节点启动它）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T18:21:18.313

有如何添加节点的确切解释： [http ://wiki.apache.org/hadoop/FAQ#I_have_a_new_node_I_want_to_add_to_a_running_Hadoop_cluster.3B_how_do_I_start_services_on_just_one_node.3F](http://wiki.apache.org/hadoop/FAQ#I_have_a_new_node_I_want_to_add_to_a_running_Hadoop_cluster.3B_how_do_I_start_services_on_just_one_node.3F)

同时 - 我不确定已经运行的作业是否会利用这些节点，因为计划在哪里运行每个任务是在作业开始时发生的（据我所知）。
我也认为只在这些临时节点上运行任务跟踪器更实用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T14:48:40.227

检查以下参数引用的文件：

*   dfs.hosts => dfs.include
*   dfs.hosts.exclude
*   mapreduce.jobtracker.hosts.filename => mapred.include
*   mapreduce.jobtracker.hosts.exclude.filename

您可以将主机列表添加到文件 dfs.include 和 mapred.include 中，然后运行

hadoop mradmin -refreshNodes ;

hadoop dfsadmin -refreshNodes ;

就这样。

顺便说一句，“mradmin -refreshNodes”设施是在 0.21 中添加的

尼基尔

# multithreading - node.js 模块：Async vs Fibers.promise vs Q_oper8

> ID：10282828
> 
> 赞同：21
> 
> 时间：2012-04-23T14:47:58.123
> 
> 标签：multithreading, node.js, asynchronous, node-modules

只是想知道是否有人可以比较这些模块之间处理异步事件的权衡。具体来说，我有兴趣了解使用 Async 而不是 Fibers.promise 的原因，我现在至少在我的测试代码中广泛使用它。特别是，我在 Fibers.promise 中看到的主要优点之一是我可以保持堆栈链前端分叉，从而可以使用`try { } catch { } finally`，并且还允许我确保在处理请求后结束响应。

有人在使用 Q_oper8 吗？我在另一页上找到了这个，只是想知道它是否已经死了，或者我应该检查一下。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-23T20:03:46.817

我从来没有听说过Q_oper8，所以我不能评论它，但我会从另一个方向来。我首先听说了异步，其次是 Fiber（及其辅助库），实际上我不喜欢后者。

## 纤维的缺点

### 其他 Javascript 开发人员不熟悉

Fiber 通过编译后的本机方法将协同程序的概念引入 Javascript，该`Fiber`方法接管传递给它的 Javascript 代码的解释，拦截调用以`yield`跳回等待的协同程序。

这对你来说可能无关紧要，但如果你需要在一个团队中工作，你必须向你的成员传授这个概念（或者希望他们对其他语言的概念有经验，比如 Go）。

### 不支持 Windows

因此，为了使用 Fiber 或任何基于它编写的库，您必须首先为您的平台本地编译它。我不使用 Windows，但请注意 Windows 不支持 Fiber，因此限制了您自己的库的实用程序。*这意味着您根本*找不到用 Fiber 编写的通用 Node.js 库（无论如何，您可能不会找到，因为它增加了一个昂贵的编译步骤，否则您可以通过异步避免）。

### 浏览器不兼容

这意味着您使用 Fiber 编写的任何代码都*将无法*在浏览器中运行，因为您无法将本机代码与浏览器混合（我作为浏览器用户也不希望您这样做），即使您编写的所有内容都是“Javascript "（它在语法上是 Javascript，但在语义上不是）。

### 更难调试

虽然“回调地狱”在视觉上可能不那么令人愉悦，但连续传递风格确实有一件非常好的事情，超过了协同例程——你可以从调用堆栈中确切地知道问题发生在哪里，并且可以向后追溯。协同程序在程序中不止一个点进入函数，并且可以从*三种调用*中退出：`return`，`throw`和`yield()`，其中后者也是返回点。

使用协同程序，您可以在“同时”运行的两个或多个函数之间进行交叉执行，并且您可能在事件循环上同时运行一组以上的协同程序。使用传统的回调，您可以保证函数的外部范围在执行所述函数期间是静态的，因此您只需在需要时检查这些外部变量一次。协程需要在每个之后运行这些检查`yield()`（因为它与原始协程的使用将被转换为真正的 Javascript 中的回调链）。

基本上，我认为协同程序的*概念*变得更难使用，因为它必须存在*于*Javascript 事件循环中，而不是作为一种实现方法。

## 是什么让异步“更好”？

### 越差越好

实际上，这是一种“越差越好”的想法。Async 不是扩展 Javascript 语言来尝试摆脱它的缺陷（并创建新的，在我看来），而是一个纯 Javascript 解决方案来掩盖它们，就像化妆一样。

### 控制流显式

Async 函数描述了需要跨越事件循环障碍的不同类型的逻辑流，并且该库涵盖了实现该逻辑所需的回调代码的实现细节，您只需提供它应该以大致线性顺序运行的函数它们将在事件循环中执行。

如果您愿意放弃异步方法参数周围的第一个缩进级别，则与 Co-Routines 相比，您没有额外的缩进，并且只有少量额外的`function(callback) {`声明行，如下所示：

```
var async = require('async');
var someArray = [1, 2, 3, 4, 5, 6, 7, 8, 9];
async.forEach(someArray,
function(number, callback) {
    //Do something with the number
    callback();
}, function(err) {
    //Done doing stuff, or one of the calls to the previous function returned an error I need to deal with
}); 
```

在这种情况下，您知道您的代码使用的所有变量如果没有被您的代码更改，则只能在您的代码运行之前更改，因此您可以更轻松地调试，并且只有一种“返回”机制: `callback()`. 您要么在成功时不进行任何回调，要么在出现问题时将错误传递给回调。

### 代码复用不难

上面的示例使代码重用变得困难，但并非必须如此。您始终可以将命名函数作为参数传递：

```
var async = require('async');

// Javascript doesn't care about declaration order within a scope,
// so order the declarations in a way that's most readable to you

async.forEach(someArray, frazzleNumber, doneFrazzling);

var someArray = [1, 2, 3, 4, 5, 6, 7, 8, 9];

function frazzleNumber(number, callback) {
    // Do something to number
    callback();
}

function doneFrazzling(err) {
    // Do something or handle error
} 
```

### 功能性而非强制性

async 模块不鼓励使用命令式流控制，并鼓励（要求，对于跨事件循环的部分）使用函数进行流控制。

函数式风格的优点是您可以轻松地重用循环体或条件，并且您可以创建更好地匹配代码流的新控制流“动词”（通过async library），例如`async.auto`为函数调用顺序实现依赖图解析的控制流方法。（您指定一系列命名函数并列出它依赖于执行的其他函数（如果有），并`auto`首先运行“独立”函数，然后根据其依赖函数完成运行的时间运行下一个可以运行的函数。）

与其编写代码以适应您的语言规定的命令式风格，不如按照问题的逻辑编写代码，并实现“胶水”控制流以使其发生。

### 总之

Fiber 就其扩展 Javascript 语言的本质而言，无法在 Node.js 中开发大型生态系统，尤其是当 Async 在外观部门获得 80% 的份额时，并且没有 Javascript 中协同程序的其他缺点。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-06-03T00:33:46.207

简短的回答：

*   [Async](https://github.com/caolan/async)是用于管理单线程异步的纯/经典 javascript 解决方案
*   [Fibers](https://github.com/laverdet/node-fibers)是一个用于创建协程的 node.js 扩展。它包括一个用于管理单线程异步的期货库。
*   还有许多其他期货库（如下所列）不需要扩展 javascript。
*   [Q_oper8](https://github.com/robtweed/Q-Oper8)是一个 node.js 模块，用于管理多进程并发

请注意，这些都没有提供“线程”，因此可以说没有一个可以执行多线程（尽管也有一个 node.js 扩展名：[threads_a_gogo](https://github.com/xk/node-threads-a-gogo)）。

# 异步与光纤/期货

## 异步

Async 和 Fibers/futures 是解决同一问题的不同方法：管理异步解决依赖关系。与许多其他试图解决这个问题的库相比，异步似乎有更多的“花里胡哨”，在我看来，这使情况变得更糟（更多的认知开销——即更多的废话要学习）。

在 javascript 中，基本异步如下所示：

```
asyncCall(someParam, function(result) {
   useThe(result);
}); 
```

如果你的情况需要的不仅仅是基本的异步，比如你需要两个异步调用的结果，你可能会做这样的事情：

```
asyncCall1(someParam, function(result0) {
  asyncCall2(someParam, function(result1) {
   use(result0, result1);
  }
}); 
```

已经开始看起来像回调地狱。它的效率也很低，因为第二次调用正在等待第一次调用完成，即使它不依赖于它，更不用说代码甚至没有进行任何合理的错误处理。Async 提供了一种更有效地编写它的解决方案：

```
async.parallel([
  function(callback) {
    asyncCall1(someParam, function(result0) {
      callback(null,result0);
    },
  function(callback) {
    asyncCall1(someParam, function(result1) {
      callback(null,result1);
    },
  }
],
function(err, results) {
  use(results[0], results[1]);
}); 
```

所以对我来说，这比回调地狱更糟糕，但我想对每个人来说都是他自己的。尽管它很丑陋，但它允许两个调用同时发生（只要它们进行非阻塞 IO 调用或类似的东西）。Async 有更多用于管理异步代码的选项，因此如果您有兴趣，请查看[文档](https://github.com/caolan/async)。

## 输入光纤/期货

Fibers 模块的协程包括一个期货库，该库使用协程将异步事件重新注入到当前的延续中（future.wait()）。

Fibers 与大多数其他期货库不同，因为它允许当前继续等待异步事件 - 这意味着它不需要使用回调来从异步请求中获取值 - 允许异步代码成为类似同步的。阅读有关协程的更多信息。

Node.js 具有诸如 readFileSync 之类的 io 函数，它可以让您在它为您获取文件的同时在线等待函数。这不是通常在 javascript 中完成的事情，也不是可以用纯 javascript 编写的东西——它需要像 Fibers 这样的扩展。

回到上面相同的异步示例，这就是使用 Fiber/Future 时的样子：

```
var future0 = asyncCall1(someParam);
var future1 = asyncCall2(someParam);
use(future0.wait(), future1.wait()); 
```

这与那里的异步混乱一样简单且高效。它以一种优雅有效的方式避免了回调地狱。虽然有（小）缺点。大卫埃利斯夸大了许多缺点，所以我将在这里重复唯一有效的一个：

### 浏览器不兼容

由于 Fibers 是 node.js 扩展，它不会与浏览器兼容。这将使 node.js 服务器和浏览器无法共享使用光纤的代码。但是，有一个强有力的论点是，您想要在服务器上的大多数异步代码（文件系统、数据库、网络调用）与您想要在浏览器上的代码（ajax 调用）不同*。*也许超时会发生冲突，但这似乎是这样。

除此之外，[streamline.js](https://github.com/Sage/streamlinejs)项目有能力弥补这一差距。似乎它有一个编译过程，可以将使用同步和期货的 streamline.js 代码转换为使用回调样式的纯 javascript，类似于现在不支持的[Narrative Javascript](http://www.neilmix.com/narrativejs/doc/)。Streamline.js 可以在幕后使用几种不同的机制，一种是 node.js Fibers，另一种是 ECMAScript 6 生成器，最后一种是我已经提到的回调样式 javascript 的转换。

### 更难调试

这似乎是一个有效的，如果轻微的，抱怨。即使您只是计划使用纤程/期货，而不是将协程用于其他任何事情，由于意外的函数退出（和入口）点，上下文切换可能仍然会令人困惑。

### 将先发制人引入 javascript

这可能是纤维最大的问题，因为它有可能（尽管不太可能）引入难以理解的错误。基本上，由于 Fiber`yield`可能导致一组代码临时退出到另一个未确定的函数，因此可能会读取或引入一些无效状态。有关更多信息，请参阅[本文](http://calculist.org/blog/2011/12/14/why-coroutines-wont-work-on-the-web/)。就个人而言，我认为纤维/期货和类似结构令人难以置信的清洁度非常值得那些罕见的阴险虫子。更多的错误是由糟糕的并发代码引起的。

### 无效的抱怨

*   不在 Windows 上：这不再是真的
*   不熟悉协程： A. 不熟悉永远不是回避某事的理由。如果它好它就很好，不管你对它有多熟悉。B. 虽然协程和产量可能不熟悉，但期货是一个容易理解的概念。

## 其他期货库

有许多实现期货的库，其中的概念可能被称为“期货”、“延迟对象”或“承诺”。这包括[async-future](https://github.com/fresheneesz/asyncFuture)、[streamline.js](https://github.com/Sage/streamlinejs)、[Q](https://github.com/kriskowal/q)、[when.js](https://github.com/cujojs/when)、[promiscuous](https://github.com/RubenVerborgh/promiscuous/)、[jQuery 的 deferred](http://api.jquery.com/category/deferred-object/)、[coolaj86 的 futures](https://github.com/coolaj86/futures)、[kriszyp 的 promises](https://github.com/kriszyp/node-promise)和[Narrative Javascript](http://www.neilmix.com/narrativejs/doc/)等库。

其中大多数使用回调来解决期货问题，从而解决了 Fibers 引入的许多问题。但是，它们不像光纤/期货那样干净，但它们比异步要干净得多。这是同样的例子，再次使用我自己的[async-future](https://github.com/fresheneesz/asyncFuture)：

```
var future0 = asyncCall1(someParam);
var future1 = asyncCall2(someParam);
Future.all([future0, future1]).then(function(results) {
  use(results[0], results[1])
}).done() 
```

# Q_oper8

Q_oper8 真的是一个不同的野兽。它使用进程池在队列中运行作业。由于[javascript 是单线程](https://stackoverflow.com/questions/2734025/is-javascript-guaranteed-to-be-single-threaded)*，并且 javascript 没有可用的本地线程，因此进程是在 node.js 中利用多个处理器的常用方法。Q_oper8 旨在作为使用 node.js 的 child_process 模块管理进程的替代方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-21T03:21:38.933

您还应该查看[Step](https://github.com/creationix/step)。

它只处理 async 可以做的一小部分，但我认为代码更容易阅读。它非常适合处理做一系列事情的正常情况，其中一些事情是并行发生的。

我倾向于将 Step 用于我的大部分逻辑，然后在我需要在串行或并行执行中重复应用方法时偶尔使用 async（即 - 调用此函数直到，或在此数组的每个元素上调用此函数）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T17:18:46.420

我在客户端上使用 jQuery 的 Deferred 功能，在服务器上为 nodejs 使用 jQuery Deferred 来代替嵌套回调。它大大减少了代码并使事情变得如此可读。

[http://techishard.wordpress.com/2012/05/23/promises-promises-a-concise-pattern-for-getting-and-showing-my-json-array-with-jquery-and-underscore/](http://techishard.wordpress.com/2012/05/23/promises-promises-a-concise-pattern-for-getting-and-showing-my-json-array-with-jquery-and-underscore/)

[http://techishard.wordpress.com/2012/05/29/making-mongoose-keep-its-promises-on-the-server/](http://techishard.wordpress.com/2012/05/29/making-mongoose-keep-its-promises-on-the-server/)

# cakephp - CakePHP HABTM 访问关联表进行显示？

> ID：10282834
> 
> 赞同：1
> 
> 时间：2012-04-23T14:48:31.957
> 
> 标签：cakephp, has-and-belongs-to-many

出于某种原因，我真的很难理解 HABTM 协会。通过观察某人做某事并解释原因，我学得最好。无论如何，我有 2 个我想要关联的表，Drugs 和 SideEffects。我创建了中间表drugs_side_effects（现在没有数据）。蛋糕会自动将数据放入其中还是我需要做些什么？书中的 3.7.6.5 hasAndBelongsToMany (HABTM) 没有具体说明。

我已经正确设置了模型（我认为）并且不知道此时如何进行。看起来很简单。我需要在药物视图中显示 SideEffects 表中的副作用。我认为在 edit_french 控制器功能中我需要类似的东西

```
$side_effect = $this->Drug->SideEffect->read(
    array('SideEffect.id','SideEffect.side_effect'), $id);
$this->set('side_effect',$side_effect); 
```

但我觉得这不会按预期工作。或者也许有更有效的方法？任何建议或帮助表示赞赏。

**药物型号：**

```
 var $hasAndBelongsToMany = array(
    'SideEffect' => array(
      'className' => 'SideEffect',
      'joinTable' => 'drug_side_effects',
      'foreignKey' => 'drug_id',
      'associationForeignKey' => 'side_effect_id'
      )
  );
}
?> 
```

**副作用模型：**

```
 var $hasAndBelongsToMany = array(
     'Drug' => array(
        'className' => 'Drug',
        'joinTable' => 'drug_side_effects',
        'foreignKey' => 'side_effect_id',
        'associationForeignKey' => 'drug_id'
     )
  );
}
?> 
```

**药物管制员：**

```
<?php
class DrugsController extends AppController {
  var $name = 'Drugs';
  var $helpers = array('Html','Form','Paginator');
  var $paginate = array(
    //'contain' => array('SideEffect'),
    //'fields' => array('Drug.id', 'Drug.generic'),
    'fields' => array('Drug.id', 'Drug.generic','Drug.date_altered'),
    'limit' => 50,
    'order' => array(
        'Drug.generic' => 'asc'
      )
  );

  function index() {
    $data = $this->paginate('Drug');
    $alldrugs = $this->set('drugs', $this->Drug->find('all'));
    $this->set('drugs', $data);
    $this->set('alldrugs', $data);
    //$this->set('lessdrugs', $this->paginate());
    $this->set('title_for_layout','List of all current drugs');
  }

  function edit_french($id = null) {
    $this->Drug->id = $id;
    $drug = $this->Drug->read(
      array(
          'Drug.id','Drug.generic','Drug.ahl','Drug.aap','Drug.rid','Drug.oral','Drug.mw','Drug.clinical_recommendations'
      ),
      $id
    );
    $this->set('title_for_layout', 'Translate clinical recommendations - ' . $drug['Drug']['generic']);
    $this->set('drug',$drug);

    if (empty($this->data)) {
       $this->data = $this->Drug->read();
    } else {
       if ($this->Drug->save($this->data)) {
         $this->Session->setFlash('The drug has been updated.');
         $this->redirect(array('action' => 'index'));
       }
    }
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T14:55:12.020

您可以使用 拉取相关数据[`ContainableBehavior`](http://api20.cakephp.org/class/containable-behavior)。为此，只需在 Drug 模型上运行 find 并告诉它包含相关的 SideEffect 数据。

```
$drug = $this->Drug->find('first', array(
  'conditions' => array(
    'Drug.id' => $id
  ),
  'contain' => array(
    'SideEffect'
  )
)); 
```

`read()`如果您愿意，也可以在使用前设置包含。

```
$this->Drug->contain(array('SideEffect'));
$drug = $this->Drug->read(null, $id); 
```

使用 Containable 允许您在单个`find()`请求中收集所有相关数据。

# sql - SQL：基于数字选择数字文本

> ID：10282835
> 
> 赞同：0
> 
> 时间：2012-04-23T14:48:32.683
> 
> 标签：sql, select, text, integer

**背景**：我有一个 SQL 数据库，其中包含一个`text`类型的列 (foo) 而不是`integer`。在列中，我以表格形式存储**整数**`text`。

**问题**：是否可能`SELECT`包含（在 foo 列中）数字大于/小于*n*的行？

**PS**：我有充分的理由将它们存储为文本形式。请不要对此发表评论。

* * *

**更新**：（忘了提）我将它存储在 SQLite3 中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:50:19.227

```
SELECT foo
FROM Table
WHERE CAST(foo as int)>@n 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:50:21.163

```
select *
from   tableName
where  cast(textColumn as int) > 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T14:58:33.240

只要您确定 foo 列中的数据将正确转换为整数，WHERE 子句中的简单 CAST 就可以工作。如果没有，您的 SELECT 语句将引发错误。我建议您在此处添加一个额外的步骤，并在将字段转换为 int 之前取出非数字字符。这是有关如何执行类似操作的链接：

[http://blog.sqlauthority.com/2007/05/13/sql-server-udf-function-to-parse-alphanumeric-characters-from-string/](http://blog.sqlauthority.com/2007/05/13/sql-server-udf-function-to-parse-alphanumeric-characters-from-string/)

您需要对此函数进行的唯一真正修改是更改以下行：

```
PATINDEX('%[^0-9A-Za-z]%', @string) 
```

到

```
PATINDEX('%[^0-9]%', @string) 
```

然后，该 UDF 的结果应该可以转换为 int 而不会引发错误。它会进一步减慢您的查询速度，但会更安全。您甚至可以将您的 CAST 放入 UDF 并进行一次调用。最终的 UDF 如下所示：

```
CREATE FUNCTION dbo.UDF_ParseAlphaChars
(
@string VARCHAR(8000)
)
RETURNS int
AS
BEGIN
DECLARE @IncorrectCharLoc SMALLINT
SET @IncorrectCharLoc = PATINDEX('%[^0-9]%', @string)
WHILE @IncorrectCharLoc > 0
BEGIN
SET @string = STUFF(@string, @IncorrectCharLoc, 1, '')
SET @IncorrectCharLoc = PATINDEX('%[^0-9]%', @string)
END
SET @string = @string
RETURN CAST(@string as int)
END
GO 
```

您的最终 SELECT 语句将如下所示：

```
SELECT *
FROM Table
WHERE UDF_ParseAlphaChars(Foo) > 5 
```

**编辑**

根据数据库是 SQLite 的新信息，以上可能无法直接工作。我不相信 SQLite 对 UDF 有原生支持。您也许可以使用您选择的编程语言创建一种 UDF（例如：[http](http://www.christian-etter.de/?p=439) ://www.christian-etter.de/?p=439 ）

我看到的另一个安全获取所有数据的选项（IsNumeric 会从结果中排除某些行，这可能不是您想要的）可能是创建一个额外的列，该列具有字符串的 int 表示形式。这有点危险，因为您需要保持两个字段同步，但它可以让您快速排序和过滤表数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T14:50:11.773

```
SELECT *
  FROM Table
    WHERE CAST(foo as int) > 2000 
```

# object - python：反序列化对象

> ID：10282839
> 
> 赞同：0
> 
> 时间：2012-04-23T14:48:59.297
> 
> 标签：object, deserialization

我们有这种形式的类`classA version1, classA version2, classA version3`..等等。这是已经修改过的同一个类。每个“修改”都会创建一个类的新版本。每个对象都有一个版本属性，该属性指的是派生它的类的版本。例如`ObjectA.version =1`# 表示它来自`ClassA version1`

这是我的问题。在对象反序列化期间，我想使用用于制作对象的特定版本的类。例如，如果我要反序列化对象`ObjectA`，`version=3`那么`ClassA version 3`应该使用。存储类的所有不同变体的源代码。

这看起来首先获取对象然后获取类。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:23:27.633

你有三个选择：

1.  自定义序列化/反序列化 - 您可以将版本信息和类信息放在首位。
2.  创建一个包含所有类版本的所有成员的“联合类”，然后使用它来创建适当类的实例。
3.  重构为一个公共基类，并让每个“版本”从该类继承。

我会推荐选项 3，因为这样您的版本可以干净地共存。

# c# - 根据用户控制的路径加载资源文件

> ID：10282841
> 
> 赞同：0
> 
> 时间：2012-04-23T14:49:06.880
> 
> 标签：c#, asp.net, resources, embedded-resource

我需要帮助从资源文件中读取所有资源。我正在使用 Visual Studio 2010 c# .net 4.0。

我有一个用户控件，例如 ~/MyFolder/MyControl.ascx。有与之关联的本地资源文件

我通过了上面的值，即。将控件路径到我想根据当前语言加载适用资源文件的另一个类。

这可能吗？如果可以，我该如何实现？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T20:26:57.840

一种方法是使用嵌入式资源：

```
Assembly _assembly = Assembly.GetExecutingAssembly();
_assembly.GetManifestResourceStream("Project.UI.Assets.Logo.png"); 
```

这篇博文可能会给你更多的见解： http: [//www.attilan.com/2006/08/accessing-embedded-resources-using.html](http://www.attilan.com/2006/08/accessing-embedded-resources-using.html)

# iphone - 更改所有 UIView 的 Bg 图像

> ID：10282843
> 
> 赞同：2
> 
> 时间：2012-04-23T14:49:11.430
> 
> 标签：iphone

我有一个项目，我想为用户提供一个功能，允许他们更改背景设置。我希望该更改能够在所有 UI 屏幕上进行。实现这一目标的最有效方法是什么？

现在我可以在 NSUserDefault 中保留背景细节。加载视图时，我检查 getBG() 并在 viewDidLoad() 中应用该背景。但是，我认为这不是最有效的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:56:44.830

创建一个类`YourView`，您可以在其中以您喜欢的方式实现此行为。它应该继承自`UIView`.

然后，将所有其他类从继承自`UIView`更改为继承自`YourView`。

（至少，我相信你应该可以那样做你想做的事。如果没有，我只是没有正确理解你......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T14:58:55.373

您可以使用`NSNotification`.

当用户将背景图像更改为他的选择之一时，然后 **发布通知** 并**添加观察者**，以更改您设置背景图像的背景。

# session - Magento - 注册表和当前类别

> ID：10282847
> 
> 赞同：0
> 
> 时间：2012-04-23T14:49:25.757
> 
> 标签：session, magento, magento-1.4, magento-1.5

我有一个关于`Mage::registry`并且`categories:`我在类别页面上的问题，我通过 检索当前类别`Mage::registry('current_category')`。我注意到它仅适用于根类别，事实上，如果我访问子类别页面，我总是使用`Mage::registry('current_category')`. 所以问题是：是关于后端配置、缓存还是其他什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T15:07:20.273

如果您在模板中（例如`catalog/category/view.phtml`），您可以使用

```
$this->getCurrentCategory(); 
```

如果你在模型、控制器或其他中，试试这个（在[这里](http://indianicorange.wordpress.com/2010/06/18/magento-get-current-category-category-id/)找到）：

```
Mage::getModel('catalog/layer')->getCurrentCategory(); 
```

但是，`Mage::registry('current_category')`这是正常的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T15:16:04.893

OOB，`current_category`在`Mage_Catalog` `CategoryController::_initCategory()`（参考[此处](http://svn.magentocommerce.com/source/branches/1.6/app/code/core/Mage/Catalog/controllers/CategoryController.php)）中设置，并且*始终*与当前正在查看的类别相同。

如果您的数据不同，则您的应用程序具有非标准功能，或者您看到的是缓存结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-23T10:17:32.277

对于所有类别：-

```
<?php $_helper = Mage::helper('catalog/category') ?>
<?php $_categories = $_helper->getStoreCategories() ?> 
```

当前类别

```
<?php $currentCategory = Mage::registry('current_category') ?> 
```

为我工作。

# ruby-on-rails - 你如何在 Rails 中构建 i18n yaml 文件？

> ID：10282857
> 
> 赞同：52
> 
> 时间：2012-04-23T14:50:14.640
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization, structure, yaml

我开始在 Rails 中填充一个 en yaml 文件，我已经知道它很快就会变得混乱和失控。是否有保持此文件井井有条的约定？

到目前为止，我有这个结构：

```
language:
  resource:
    pages: # index, show, new, edit
      page html elements: # h1, title
  activerecord:
    attributes:
      model:
        property: 
```

现在我有以下想要融入这个结构的东西，但我不确定如何：

1.  导航
2.  按钮文本（保存更改、创建帐户等）
3.  来自控制器闪存的错误消息
4.  如何添加多字键。我使用空格还是下划线？例如，`t(".update button")`) 或`t(".update_button")`

语言环境文件结构是否有约定？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-04-28T14:20:55.110

我发现最好的总体策略是在某种程度上重现文件结构，以便在给定任何翻译后，我可以立即找到调用它的位置。这给了我一些翻译的背景。

大多数应用程序翻译都在视图中找到，所以我最大的顶级命名空间通常是`views`.

我为控制器名称和正在使用的操作名称或部分创建子名称空间 ex ：

*   `views.users.index.title`
*   `views.articles._sidebar.header`

这两个示例都应该清楚地表明我们正在翻译我的应用程序的哪个部分以及要查看哪个文件来找到它。

您提到导航和按钮，如果它们是通用的，那么它们`views.application`就像它们的视图对应物一样属于命名空间：

*   `views.application._main_nav.links.about_us`- 我们应用的主导航部分中的链接
*   `views.application.buttons.save`
*   `views.application.buttons.create`- 我有一堆这样的按钮可以在需要时使用

Flash 消息是从控制器生成的，所以它们的顶级命名空间是...... `controllers`！:)

我们应用与视图相同的逻辑：

*   `controllers.users.create.flash.success|alert|notice`

同样，如果您想提供诸如“操作成功”之类的通用 Flash 消息，您可以编写如下内容：

*   `controllers.application.create.flash.notice`

最后，键可以是任何有效的 YAML，但请按照惯例，坚持使用句点`.`作为分隔符和单词之间的下划线。`_`

现在唯一需要解决的就是将 rails 的翻译转换到它自己的命名空间中，以清理我们的顶层 :)

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-06-18T20:00:02.483

我知道答案已经被接受，但是这个问题为我提供了一些思考的食物，我想我会分享 Rails i18n yml 文件的另一种结构供您考虑/批评。

鉴于我想

1.  保留默认的应用程序结构，这样我就可以`t('.some_translation')`在我的视图中使用速记“惰性”查找，
2.  避免尽可能多的字符串重复，特别是使用不仅相同而且具有相同上下文/含义的单词，
3.  只需更改一次密钥，即可在所引用的任何地方反映出来，

对于看起来像这样的**config/locales/en.yml文件：**

```
activerecord:
  attributes:
    user:
      email: Email
      name: Name
      password: Password
      password_confirmation: Confirmation
  models:
    user: User
users:
  fields:
    email: Email
    name: Name
    password: Password
    confirmation: Confirmation
sessions:
  new:
    email: Email
    password: Password 
```

我可以看到有很多重复，并且“电子邮件”和“密码”等词的上下文是明确的，并且在它们各自的视图中具有相同的含义。如果我决定将“电子邮件”更改为“电子邮件”，则必须全部更改它们会有点烦人，所以我想重构字符串以引用某种字典。那么，如何将字典哈希添加到文件顶部，并带有一些`&`锚点，如下所示：

```
dictionary:
  email: &email Email
  name: &name Name
  password: &password Password
  confirmation: &confirmation Confirmation

activerecord:
  attributes:
    user:
      email: *email
      name: *name
      password: *password
      password_confirmation: *confirmation
  models:
    user: User
users:
  fields:  
    email: *email
    name: *name
    password: *password
    confirmation: *confirmation
sessions:
  new:
    email: *email
    password: *password 
```

每当您在视图中获得多个完全相同的单词/短语的实例时，您可以将其重构到字典中。如果基础语言中的键的字典翻译对目标语言没有意义，那么只需将目标语言中的引用值更改为静态字符串或将其作为额外条目添加到目标语言的字典中。我敢肯定，如果每种语言的字典变得太大且笨拙，都可以将它们重构到另一个文件中。

这种构建 i18n yaml 文件的方式似乎适用于我尝试过的一些本地测试应用程序。我希望精彩的[Localeapp](http://www.localeapp.com/)将来能为这种锚定/引用提供支持。但是无论如何，所有这些字典讨论都不可能是一个原创的想法，那么 YAML 中的锚引用是否还有其他问题，或者可能只是整个“字典”概念？[还是完全删除默认后端并用Redis](http://redis.io/)或其他东西替换它会更好？

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-28T10:35:03.247

您的问题不容易回答，并且关于该主题的可用材料不多。我发现最好的资源是：

*   [Rails 风格指南](https://github.com/bbatsov/rails-style-guide)，国际化部分
*   [I18n wiki](http://ruby-i18n.org/wiki)中有很多资源，但我没有找到可以回答您问题的资源。

所以我直接在这里试一试：

*   导航

    我认为您的意思是导航元素，例如面包屑，选项卡，...您必须为它们定义视图，然后遵守规则以将所有视图元素移动到目录中的单独文件中`views`（请参阅规则的样式指南）。

*   按钮文本（保存更改、创建帐户等）

    查看元素，也进入相同的文件。如果您在不同的视图中使用相同的按钮，请定义一个通用文件，然后使用它。

*   来自控制器闪存的错误消息

    我会使用与视图相同的规则。定义一个单独的目录，在其中包含控制器的文件。

*   如何添加多字键。我使用空格还是下划线？例如，t(".update button")) 或 t(".update_button")

    我个人更喜欢使用`.update_button`, not `.update button`，因为它更明确地表明这是一个键。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-01-28T10:58:51.190

我问这个问题已经快两年了，我想分享一些见解。我相信最佳结构是根据它们的 MVC 角色（模型、视图、控制器）进行命名空间转换。这使语言环境文件保持整洁，并防止命名空间冲突（例如，范围`en.users`可以表示视图或控制器）。

```
en:
  controllers:
    users:
      show:
        welcome_flash: "Welcome back!"
  mailers:
    users_mailer:
      welcome_email:
        subject: "Good of you to join us"
  views:
    users:
      show:
        notice: "Oh no! 
```

但是使用像这样整洁的命名空间会破坏 Rails 中的惰性查找功能。如果您使用惰性查找，Rails 会自动为您插入命名空间，并且它不会包含您创建的顶级命名空间（`views`、`controllers`等...）。

例如，范围`t('.welcome_flash')`解析为`en.users.show`. 这很臭，因为用户没有明确定义。它是什么？控制器？一个看法？还有什么？

为了解决这个问题[，我创建了 gem I18nLazyLookup](https://github.com/abitdodgy/i18n_lazy_scope)。它允许您对自己的自定义命名空间使用惰性查找。

`t`您可以使用,而不是 using ，`t_scoped('welcome_flash')`这会自动将范围解析为`en.controllers.users.show`. 它也适用于视图和邮件程序，您可以按照自己喜欢的方式自定义命名空间。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-23T16:53:39.067

直接编辑 yaml 文件会导致文件混乱且不可读。
此外，如果有一天您希望非开发人员添加新语言，您将很难提供对翻译的访问权限。

我建议使用[localeapp](http://www.localeapp.com/)，它会生成一个 yaml 文件。
但允许您在 Web 界面中轻松查看和管理您的翻译。
并为翻译人员创建额外的访问权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-14T22:08:18.173

战斗结束几年后，但这是一个（有点完全）不同的答案。

首先，我不喜欢`t('.xxx')`基于文件结构的默认命名空间的标准样式。我也不太喜欢根据 DOM 结构对翻译进行分类。虽然这对于非常结构化的翻译来说是一种很好的方法，但它通常是重复的，而且不是很直观。

我宁愿将我的翻译重新组合成更有用的类别，以便让我的翻译更容易，因为他们可以处理具体的主题，而不是一些奇怪的风格（有些翻译甚至不知道 MVC 是什么意思）

所以我的翻译文件的结构是这样的

```
fr:
  theme1:
    theme11:
      translationxxx: blabla
  theme2:
    translationyyy: blabla 
```

根据需要，“主题”可以是模型、更抽象的上下文等，这对译者来说是最直观的。

因为每次在我的视图中编写范围都会很麻烦，所以我在助手中添加了一些方便的方法来获得基于堆栈的翻译上下文。

*   我通过调用`t_scope([new_scope]`和`pop_t`
*   我覆盖了`t`帮助器以使用堆栈的最后一个范围

[该答案](https://stackoverflow.com/a/30288684/2832282)中提供了翻译范围方法的代码

# java - 如何从黑莓应用程序调用 asp.net Web 服务？

> ID：10282864
> 
> 赞同：0
> 
> 时间：2012-04-23T14:50:33.073
> 
> 标签：java, blackberry

我是黑莓应用程序的初学者我想要简单的代码从我的 bb 应用程序调用 asp.net 服务

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T14:54:56.077

KSOAP2 可用于黑莓。

为了调用 Web 服务，我使用 Sun Java Wireless Toolkit (WTK) 从您的 Web 服务的 WSDL 文件中生成存根，该文件对您来说应该是[http://192.168.1.14/CG/authentication.asmx?wsdl](http://192.168.1.14/)。

然后，您可以将 WTK 生成的文件导入您的项目，以使用以下方式调用您的 Web 方法：

```
//Generated stub file 
```

Service1Soap_Stub 存根 = 新的 Service1Soap_Stub();

```
//Web service method 
```

结果 = stub.methodName(param1, param2);

# sql - 蛋糕php树模型连接表

> ID：10282867
> 
> 赞同：1
> 
> 时间：2012-04-23T14:50:34.227
> 
> 标签：sql, cakephp, cakephp-model

我有三个表`books`：`books_categories`和`categories`。

```
books:
   ...

categories:
    id, name, parent_id

books_categories:
    id book_id category_id 
```

所以一本书可能有很多类别，一个类别可能有很多书。类别是一棵树 - 每个类别都有父（或`NULL`）（实际上是子）。问题是，如果我们有类别：`a`> `b`>`c`并且 book 属于 category `a`，这并不意味着它属于子类别`b`或`c`......而且我想从类别中获取所有书籍，`a`甚至从子类别中获取。

现在，我从指定类别中获取所有书籍，如下所示：

```
$options['joins'] = array(    
                array('table' => 'books_categories',
                      'alias' => 'BookCategory',
                      'type' => 'inner', 
                      'conditions' => array('Book.id = BookCategory.book_id')
                ),
                array('table' => 'categories',
                      'alias' => 'Category',
                      'type' => 'inner',
                      'conditions' => array('BookCategory.category_id = Category.id')
               ));

               $options['conditions'] = array('Category.id' => '5');

$this->set('books', $this->Book->find('all', $options)); 
```

这正确地找到了类别中的所有书籍`id = '5'`。而且我还需要来自“5”子类别的书籍 - 是否可以在单个查询中？或者我必须获取所有父子类别（如何），然后在条件设置中`'Category.id' => '5' OR 'Category.id => '6'`等等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:07:43.197

尝试这个 ：

```
$allCategories = $this->Book->find('threaded'); 
```

# java - 调试自定义 java WebApplication

> ID：10282871
> 
> 赞同：0
> 
> 时间：2012-04-23T14:50:42.277
> 
> 标签：java

我在 caucho Resin 服务器上部署了 IVR -Java 应用程序 Web 应用程序不在服务器中，而是在同一系统外部的目录中。Jsp 也在外部目录中编译。在eclipse中，当我启动调试器时我有源代码我能够连接并且我能够通过java类进行调试但是当控制转到jsp文件时它无法找到源代码

知道我该如何解决它。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:12:09.703

也许那是因为eclipse找不到源。您是否尝试将其添加到构建路径？项目 -> 属性搜索构建路径。

如果源代码需要运行不同的语言，Jsp（我从来没有处理过），那么也许你可以为该语言（jsp）获取一个 eclipse 插件，然后将 jsp 源代码添加到一个（eclipse）项目中整个项目的jsp部分。

编辑：似乎因为我对 JSP 没有太多的了解，所以我给出了错误的建议。按照下面评论中的[链接](https://stackoverflow.com/questions/123462/debug-jsp-from-eclipse)。

# android - android:想咨询一下Dialog添加按钮的困境

> ID：10282874
> 
> 赞同：0
> 
> 时间：2012-04-23T14:50:49.497
> 
> 标签：android

我有这个用于制作对话框的代码：

```
Dialog d = new Dialog(this);
d.setTitle("AA");
TextView tv=new TextView(this);
tv.setText("BB");
d.setContentView(tv);
d.show(); 
```

我正在寻找将 2 个按钮添加到此对话框并捕获按钮按下事件的任何方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:58:18.077

我会使用`AlertDialog.Builder`而不是`Dialog`构造函数：

```
AlertDilog ad = new AlertDialog.Builder(this).create();
ad.setTitle(R.string.app_name);
ad.setMessage(this.getString(R.string.dialog_message);
ad.setCancelable(true);

ad.setButton(AlertDialog.BUTTON1, this.getString(R.string.first_btn_label), new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        //Do something when the first button is pressed
        dismissDialog(DIALOG_SOLVED);
    }
}); 

ad.setButton(AlertDialog.BUTTON2, this.getString(R.string.second_btn_label), new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        //Do something when the second button is pressed
        dismissDialog(DIALOG_SOLVED);
    }
}); 

//You can even add a third button if you want to
/*
ad.setButton(AlertDialog.BUTTON3, this.getString(R.string.third_btn_label), new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        //Do something when the third button is pressed
        dismissDialog(DIALOG_SOLVED);
    }
}); 
*/

ad.show(); 
```

# c++ - 做什么？XXX!yyyyyyyyyy+zzz 在 !heap -flt s 输出中的意思

> ID：10282876
> 
> 赞同：3
> 
> 时间：2012-04-23T14:51:11.483
> 
> 标签：c++, debugging, windbg, memory-dump

我正在分析一些用户模式内存转储以尝试追踪泄漏，并且我有一些关于泄漏的候选者，但是当我运行 !heap -flt s xx 命令时，我一直在我的转储中看到这些条目.

```
 14a8bd58 0006 0006  [07]   14a8bd60    00018 - (busy)
    14a8bd88 0006 0006  [07]   14a8bd90    00018 - (busy)
    14a8bdf8 0006 0006  [07]   14a8be00    00018 - (busy)
    14a8bf48 0006 0006  [07]   14a8bf50    00018 - (busy)
      ? SomeModule!SomeFunction+1bdf4 
```

我明白了什么

```
 14a8bd58 0006 0006  [07]   14a8bd60    00018 - (busy) 
```

线条是，但我不太确定线条是什么

```
 ? SomeModule!SomeFunction+1bdf4 
```

真正的意义。这些转储是使用 +ust 标志捕获的，用于堆跟踪。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:53:48.980

它们只是提供符号信息，以便读者更有效地定位源的相应部分。

在 Windows 下，进程的虚拟地址空间由一组模块填充。每个模块由一个基地址和一个大小组成。因此，有时显示此信息的另一种方式是`Module + Relative Offset`。

一个模块可以包含函数。在符号表完整的情况下，可以找到这些函数的相对偏移量（进入模块）和大小。转储只是以更易于阅读的格式显示此信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T14:59:05.797

`SomeModule`是可执行模块的名称。

`SomeFunction`是从正在执行的模块导出的函数的名称。

`+1bdf4`是从该函数开头的偏移量，以十六进制表示。

此示例中的偏移量值非常大，这可能意味着模块的符号表丢失，并且偏移量显示为相对于具有已知名称的最接近的函数，通常是导出的函数。

# java - 如何将数据传递给调用者页面？

> ID：10282881
> 
> 赞同：0
> 
> 时间：2012-04-23T14:51:20.437
> 
> 标签：java, javascript, jsf, primefaces

我正在使用 PrimeFaces JSF 库和以下代码在弹出对话框中打开一个页面：

```
<p:commandLink ajax="false" onclick="PopupMultiFileSelect('multi_file_select.faces', 'Select files','500','300'); return false;">
    <h:graphicImage style="border: none" value="./img/add.jpg"/> 
</p:commandLink> 
```

这是javascript代码：

```
function PopupMultiFileSelect(pageURL, title, w, h) 
{
var left = (screen.width/2)-(w/2);
var top = (screen.height/2)-(h/2);
var childWin = window.open (pageURL, '_blank', 'toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=yes, resizable=no, copyhistory=no, width='+w+', height='+h+', top='+top+', left='+left);

if ( childWin.opener==null ) 
    childWin.opener = self;

return childWin;
} 
```

我在弹出页面中所做的只是选择一些文件名并将名称放在字符串列表中，如下所示：

```
 List<String> fileNames; 
```

我如何将列表传递到调用者页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:16:27.730

您可以使用 f:param 将信息传递到另一个页面。看这个例子：

```
<f:param name="listnames" value="#{bean.fileNames}" /> 
```

# android - EasyTracker (GoogleAnalytics) for Android 在 TabActivity 和其他

> ID：10282888
> 
> 赞同：3
> 
> 时间：2012-04-23T14:51:51.283
> 
> 标签：android, google-analytics

我正在尝试在我的项目中使用 EasyTracker。但是其中一项活动扩展了 TabActivity。

要使用 EasyTracker，所有活动都必须扩展 TrackedActivity。

我想如果不修改 Android 或 EasyTracker 的源代码，就不可能用我的 TabActivity 子类来扩展它。

我想知道是否可以混合“正常”跟踪（我将用于此活动）和 EasyTracker 的继承跟踪。但似乎至少不可取。来自 EasyTracker 文档：

*   请注意，您的所有活动都必须扩展 TrackedActivity（或
*   等效的 Activity，例如 TrackedListActivity 而不是 ListActivity）
*   这个类来正确跟踪应用程序的使用和时间。

那我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T08:01:22.940

解决方案非常简单，但我昨天懒得找到它。

*   EasyTracker 的下载源
*   复制 TrackedActivity 并将其重命名为 TrackedTabActivity
*   使其扩展 TabActivity 而不是 Activity
*   将此文件包含在项目中
*   使 TabActivity 的子类改为扩展 TrackedTabActivity

其他活动子类（如 PreferenceActivity 等）的原理相同。

# android - Android - 返回 DatePickerDialog 时 onCreateDialog 崩溃

> ID：10282890
> 
> 赞同：3
> 
> 时间：2012-04-23T14:52:07.747
> 
> 标签：android, android-dialog, android-datepicker

我目前正在尝试在单击某个 EditText 时引发 DatePickerDialog 。但是，每次单击 EditText 时，应用程序都会崩溃。这是相关代码和LogCat。

EditText 及其 OnClickListener：

```
 addBirth.setClickable(true);
    addBirth.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            showDialog(DATE_DIALOG_ID);
        }
    }); 
```

onCreateDialog 方法和 DateSetListener：

```
@Override
protected Dialog onCreateDialog(int id) {
    // TODO Auto-generated method stub
    switch (id) {
    case DATE_DIALOG_ID:
        DatePickerDialog dialog = new DatePickerDialog(getApplicationContext(), mDateSetListener, mYear, mMonth, mDay);
        return dialog;
    }
    return null;
}

protected DatePickerDialog.OnDateSetListener mDateSetListener = 
        new DatePickerDialog.OnDateSetListener() {

            @Override
            public void onDateSet(DatePicker view, int year, int monthOfYear,
                    int dayOfMonth) {
                mYear = year;
                mMonth = monthOfYear;
                mDay = dayOfMonth;
                updateDisplay();

            }
        };
private void updateDisplay() {
    addBirth.setText(
            new StringBuilder()
                    .append(mMonth + 1).append("-")
                    .append(mDay).append("-")
                    .append(mYear).append(" "));
} 
```

这是 LogCat：

```
04-23 14:46:56.142: D/AndroidRuntime(751): Shutting down VM
04-23 14:46:56.142: W/dalvikvm(751): threadid=1: thread exiting with uncaught exception (group=0x40015560)
04-23 14:46:56.241: E/AndroidRuntime(751): FATAL EXCEPTION: main
04-23 14:46:56.241: E/AndroidRuntime(751): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.view.ViewRoot.setView(ViewRoot.java:531)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:177)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.app.Dialog.show(Dialog.java:241)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.app.DatePickerDialog.show(DatePickerDialog.java:132)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.app.Activity.showDialog(Activity.java:2566)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.app.Activity.showDialog(Activity.java:2524)
04-23 14:46:56.241: E/AndroidRuntime(751):  at com.android.yawus.phone.AddContact$2.onClick(AddContact.java:65)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.view.View.performClick(View.java:2485)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.view.View$PerformClick.run(View.java:9080)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.os.Handler.handleCallback(Handler.java:587)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.os.Looper.loop(Looper.java:123)
04-23 14:46:56.241: E/AndroidRuntime(751):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-23 14:46:56.241: E/AndroidRuntime(751):  at java.lang.reflect.Method.invokeNative(Native Method)
04-23 14:46:56.241: E/AndroidRuntime(751):  at java.lang.reflect.Method.invoke(Method.java:507)
04-23 14:46:56.241: E/AndroidRuntime(751):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-23 14:46:56.241: E/AndroidRuntime(751):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-23 14:46:56.241: E/AndroidRuntime(751):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T14:54:48.213

切勿`getApplicationContext()`用于创建对话框。

试试这个。

```
DatePickerDialog dialog = new DatePickerDialog(YourActivity.this, mDateSetListener, mYear, mMonth, mDay); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-31T16:04:07.723

她是解释您的问题的官方 Google 票：[http ://code.google.com/p/android/issues/detail?id=11199](http://code.google.com/p/android/issues/detail?id=11199)

# vbulletin - 如何自定义vBulletin 4的登录页面

> ID：10282900
> 
> 赞同：1
> 
> 时间：2012-04-23T14:52:58.703
> 
> 标签：vbulletin

我正在使用 vBulletin 4.1.4 版。我想重新设计登录页面（它与当前的 vBulletin 皮肤分开），我尝试使用这些说明[http://www.vbgeeko.com/archives/217](http://www.vbgeeko.com/archives/217)但它显示错误：

```
Warning: fetch_template() calls should be replaced by the vB_Template class. Template name: navbar in [path]\includes\functions.php on line 4114

( ! ) Parse error: syntax error, unexpected T_STRING in D:\wamp\www\vBulletin Forum v4.1.4\upload\clogin.php(42) : eval()'d code on line 1
Call Stack
#   Time    Memory  Function    Location
1   0.0007  374496  {main}( )   ..\clogin.php:0

Warning: fetch_template() calls should be replaced by the vB_Template class. Template name: clogin in [path]\includes\functions.php on line 4114 
```

那么如何制作 vBulletin 4 的自定义登录页面呢？

# rabbitmq - 具有多个 URI 的 RabbitMQ 连接

> ID：10282902
> 
> 赞同：1
> 
> 时间：2012-04-23T14:53:09.483
> 
> 标签：rabbitmq, ssl, amqp

尽管

```
ConnectionFactory.newConnection(Address[] addrs) 
```

因此

```
ConnectionFactory.newConnection(
  Address.parseAddresses("somehost.com:5672,otherhost.com:5672")) 
```

工作，我想知道是否有一种方法可以传递多个 URI，例如：

```
ConectionFactory.newConnection("amqps://somehost.com:5671,amqps://otherhost.com:5671") 
```

或者要允许每个 URI 可能有不同的客户端证书，首先创建多个 ConnectionFactories，每个都有一个 URI，然后创建一个 ConnectionFactory，将这些连接工厂作为输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T18:34:42.480

很确定这是不可能的。 [http://www.rabbitmq.com/uri-spec.html](http://www.rabbitmq.com/uri-spec.html)

如果您尝试实现故障转移，您可能会考虑类似心跳：[https ://wiki.archlinux.org/index.php/Simple_IP_Failover_with_Heartbeat](https://wiki.archlinux.org/index.php/Simple_IP_Failover_with_Heartbeat)

如果您尝试从多个位置读取消息，您可以使用 shovel (http://www.rabbitmq.com/shovel.html) 将这些消息从多个位置放入一个队列并从中读取。

# python - python中的列表推导

> ID：10282906
> 
> 赞同：1
> 
> 时间：2012-04-23T14:53:23.410
> 
> 标签：python, list

有什么办法可以使用python中的列表推导将两个列表a和b组合成c，

```
a=[1,2,3]
b=['a','b']

c=['1a','1b','2a','2b','3a','3b'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T14:54:23.503

```
>>> from itertools import product
>>> a=[1,2,3]
>>> b=['a','b']
>>> ['%d%s' % el for el in product(a,b)]
['1a', '1b', '2a', '2b', '3a', '3b'] 
```

使用新的字符串格式

```
>>> ['{0}{1}'.format(*el) for el in product(a,b)]
['1a', '1b', '2a', '2b', '3a', '3b'] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T14:56:33.397

```
>>> a = [1,2,3]
>>> b = ['a', 'b']
>>> c = ['%d%c' % (x, y) for x in a for y in b]
>>> c
['1a', '1b', '2a', '2b', '3a', '3b'] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T14:55:13.793

利用`c = ["%d%s" % (x,y) for x in a for y in b]`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T14:56:39.930

列表推导可以循环多个对象。

```
In[3]: [str(a1)+b1 for a1 in a for b1 in b]

Out[3]: ['1a', '1b', '2a', '2b', '3a', '3b'] 
```

请注意将数字转换为字符串的细微之处。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-23T14:56:40.033

只需使用“嵌套”版本。

```
c = [str(i) + j for i in a for j in b] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-23T15:05:18.673

```
import itertools
c=[str(r)+s for r,s in itertools.product(a,b)] 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-23T15:08:29.093

与 jamylak 的解决方案有些相似的版本：

```
>>> import itertools
>>> a=[1,2,3]
>>> b=['a','b']
>>>[str(x[0])+x[1] for x in itertools.product(a,b)]
['1a', '1b', '2a', '2b', '3a', '3b'] 
```

# objective-c - 如何仅流式传输来自 YouTube 的视频的声音？

> ID：10282908
> 
> 赞同：8
> 
> 时间：2012-04-23T14:53:31.573
> 
> 标签：objective-c, ios, audio, stream, youtube

我想只播放来自 youtube 的声音。我需要这个用于IOS，但其他人可以。我在stackoverflow上搜索过，但找不到。因为我不想使用其他软件，所以我想直接通过代码仅流式传输 youtube 视频的声音。它也应该在后台工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-12-30T03:39:21.100

Flashgot (for Firefox) has a way to download only the audio of a Youtube video. It exposes links to the audio that looks like this:

[https://r3---sn-p5qlsu7d.googlevideo.com/videoplayback?id=887ce37c617a3225&itag=141&source=youtube&requiressl=yes&gcr=ca&ratebypass=yes&mime=audio%2Fmp4&gir=yes&clen=4012348&lmt=1409362978343745&dur=125.828&signature=0A00B9B16BB6EF3192DF33EEF9B2AB67F66F501F.0B649D407144B914A7CC7BE00E795B5BD1B9D932&upn=VFAbXgDGSU8&key=cms1&fexp=900718%2C924231%2C924637%2C927622%2C930809%2C931354%2C932404%2C9405454%2C941004%2C943917%2C945066%2C947209%2C947218%2C948124%2C952302%2C952605%2C952901%2C955301%2C957103%2C957105%2C957201&sver=3&ip=24.235.37.181&ipbits=0&expire=1419930614&sparams=clen,dur,expire,gcr,gir,id,ip,ipbits,itag,lmt,mime,mm,ms,mv,ratebypass,requiressl,source&cmbypass=yes&req_id=3eb2c618c54ca3ee&redirect_counter=2&cms_redirect=yes&mm=26&ms=tsu&mt=1419909012&mv=m](https://r3---sn-p5qlsu7d.googlevideo.com/videoplayback?id=887ce37c617a3225&itag=141&source=youtube&requiressl=yes&gcr=ca&ratebypass=yes&mime=audio%2Fmp4&gir=yes&clen=4012348&lmt=1409362978343745&dur=125.828&signature=0A00B9B16BB6EF3192DF33EEF9B2AB67F66F501F.0B649D407144B914A7CC7BE00E795B5BD1B9D932&upn=VFAbXgDGSU8&key=cms1&fexp=900718%2C924231%2C924637%2C927622%2C930809%2C931354%2C932404%2C9405454%2C941004%2C943917%2C945066%2C947209%2C947218%2C948124%2C952302%2C952605%2C952901%2C955301%2C957103%2C957105%2C957201&sver=3&ip=24.235.37.181&ipbits=0&expire=1419930614&sparams=clen,dur,expire,gcr,gir,id,ip,ipbits,itag,lmt,mime,mm,ms,mv,ratebypass,requiressl,source&cmbypass=yes&req_id=3eb2c618c54ca3ee&redirect_counter=2&cms_redirect=yes&mm=26&ms=tsu&mt=1419909012&mv=m)

OK, so that is a very big link. This is the same link dissected into pieces:

```
https://r3---sn-p5qlsu7d.googlevideo.com/videoplayback?id=887ce37c617a3225
&itag=141
&source=youtube
&requiressl=yes
&gcr=ca
&ratebypass=yes
&mime=audio/mp4 #Here's where audio only is specified.
&gir=yes
&clen=4012348
&lmt=1409362978343745
&dur=125.828
&signature=0A00B9B16BB6EF3192DF33EEF9B2AB67F66F501F.0B649D407144B914A7CC7BE00E795B5BD1B9D932
&upn=VFAbXgDGSU8
&key=cms1
&fexp=900718,924231,924637,927622,930809,931354,932404,9405454,941004,943917,945066,947209,947218,948124,952302,952605,952901,955301,957103,957105,957201
&sver=3
&ip=24.235.37.181 #Oh, look. My IP address.
&ipbits=0
&expire=1419930614
&sparams=clen,dur,expire,gcr,gir,id,ip,ipbits,itag,lmt,mime,mm,ms,mv,ratebypass,requiressl,source
&cmbypass=yes
&req_id=3eb2c618c54ca3ee
&redirect_counter=2
&cms_redirect=yes
&mm=26
&ms=tsu
&mt=1419909012
&mv=m 
```

Very interesting. This enables Flashgot to download only the audio and skip the video, thus saving bandwidth. I'm missing details, like how Flashgot created this link, but if Flashgot has a way to do it, it stands to reason that other HTTP clients could do it too.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T15:04:56.987

根据[Youtube API 博客文章](http://apiblog.youtube.com/2009/02/youtube-apis-iphone-cool-mobile-apps.html)，在 iOS 上播放 youtube 的唯一选择是链接到视频（并让内部 YouTube 应用播放视频），或者从 UIWebView 链接并从那里播放。 **不支持纯音频播放**。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T15:01:58.237

**你不能**。您从 youtube 收到的数据流包括视频/音频流。

你如何处理数据，这取决于你。[这个线程](https://stackoverflow.com/q/5337900/176769)有关于这个主题的有趣信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T14:56:40.050

我会使用 MPMoviePlayerController 并隐藏它的视图。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-25T11:58:44.430

使用 Audacity 软件，您可以从任何来源录制计算机上播放的音频。由于 Audacity 是开源的，您可以找到开源浏览器，您可以将它们组合起来并从 youtube 获取音频。当然它的工作量很大，但我只是说它可能与其他人不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-06-19T23:20:43.190

*音频*和*视频*有**单独**的流。这是在 mp4 到 flash 转换中的默认设置。

 **您可以获取 Flash 格式的组合流或 mp4 格式的单独流。

示例：[耳机立体声测试 (HD)][youtube.com/watch?v=ZjAQylVPU3I]

包含

[闪流][youtube.com/v/ZjAQylVPU3I]

包含 mp4格式的[音频流](https://r3---sn-gqn-unge.googlevideo.com/videoplayback?c=web&clen=485306&cpn=yj9rdXWd18Eo2hV7&cver=as3&dur=30.511&expire=1466398131&fexp=3300100%2C3300134%2C3300161%2C3312381%2C3313263%2C9416126%2C9416891%2C9422596%2C9428398%2C9431012%2C9432364%2C9432369%2C9433096%2C9433380%2C9433946%2C9435526%2C9435876%2C9437066%2C9437553%2C9438663%2C9439652&gir=yes&id=o-AP3QO22uiT3u9nsCaAxXDaOF5V_aN1NlDADwSae6TMkU&initcwndbps=2872500&ip=0%3A0%3A0%3A0%3A0%3A0%3A0%3A1&ipbits=0&itag=140&keepalive=yes&key=yt6&lmt=1388261170958562&mime=audio%2Fmp4&mm=31&mn=sn-gqn-unge&ms=au&mt=1466376153&mv=m&pl=40&ratebypass=yes&requiressl=yes&signature=84062AB04F428FF1EED1FCCA7987A777220CAD0E.A76448ACA6F66BFFB6C1327607A34E7004BD3377&source=youtube&sparams=clen%2Cdur%2Cgir%2Cid%2Cinitcwndbps%2Cip%2Cipbits%2Citag%2Clmt%2Cmime%2Cmm%2Cmn%2Cms%2Cmv%2Cpl%2Crequiressl%2Csource%2Cupn%2Cexpire&sver=3&upn=IVssJgkQnC0&ir=1&rr=12)和[视频流的组合。](https://r5---sn-c0q7lnes.googlevideo.com/videoplayback?c=web&clen=247668&cpn=yj9rdXWd18Eo2hV7&cver=as3&dur=30.400&expire=1466398131&fexp=3300100%2C3300134%2C3300161%2C3312381%2C3313263%2C9416126%2C9416891%2C9422596%2C9428398%2C9431012%2C9432364%2C9432369%2C9433096%2C9433380%2C9433946%2C9435526%2C9435876%2C9437066%2C9437553%2C9438663%2C9439652&gir=yes&id=o-AP3QO22uiT3u9nsCaAxXDaOF5V_aN1NlDADwSae6TMkU&ip=0%3A0%3A0%3A0%3A0%3A0%3A0%3A1&ipbits=0&itag=134&keepalive=yes&key=cms1&lmt=1388261164988130&mime=video%2Fmp4&pl=40&ratebypass=yes&requiressl=yes&signature=764F842ACD3B89124F6F14B9984AE6B7D6FBF018.09CB53BA6120A745A8E1F0DF36309D6B3404D1FC&source=youtube&sparams=clen,dur,expire,gir,id,initcwndbps,ip,ipbits,itag,lmt,mime,mm,mn,ms,mv,pl,requiressl,source,upn&sver=3&upn=IVssJgkQnC0&redirect_counter=1&req_id=b9bade61241ca3ee&cms_redirect=yes&mm=30&mn=sn-c0q7lnes&ms=nxu&mt=1466377086&mv=m)

*很抱歉，这些链接将不起作用，因为它们是根据 ip 、 expire data 和其他东西定制的。

为了获得这些链接，我使用 uBlock origin for chrome，因为它具有记录器功能，显示与服务器建立的所有连接。搜索：mime=video，您可以看到所有链接，然后删除范围以获得完整长度。与 mime=audio 相同，您也可以将其用于其他 Flash 播放器中的流，但这**违反了服务条款**。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-09-16T16:10:06.003

## 在 Linux 中：

*   **mps-youtube**一个 CLI 解决方案。更多细节[在这里](https://unix.stackexchange.com/a/229791/32012)。

*   **如果在没有视频的情况下开始VLC**也可以做到这一点 - 更多信息[在这里](https://unix.stackexchange.com/a/229790/32012)。

*   **mplayer**可以与命令一起使用`mplayer -novideo URL`

*   **mpv**可以与命令一起使用`mpv --no-video URL`

*   **Youtube Viewer ，一个 CLI 视频播放器也可以使用，如此**[处](https://unix.stackexchange.com/a/229812/32012)所示。

## 跨平台解决方案：

如[另一个答案所示](https://stackoverflow.com/a/27699302/4098390) **，Firefox 的 Flashgot 插件**可以识别以下载 Youtube 视频的音频。它将显示每个视频的可用流列表。

这个想法是在外部播放器中启动 youtube 流，但是通过将外部播放器添加为 Flashgot“下载器”（如[这里](https://askubuntu.com/a/169410/47206)），然后在启动 youtube 后，能够**在 Firefox 中仅选择带有 Flashgot 插件的音频流**Firefox 中的视频，使用 Flashgot 通过转到“可用格式/DASH（单独的音频和视频轨道）”来仅播放音频流

[![在此处输入图像描述](../Images/d9be98cf31828f4a30028343fca7bfb6.png)

并选择特定的音轨。

[![在此处输入图像描述](../Images/562c6644f220e8ba4906a93c01469a9e.png)

可以在 Flashgot 中分配多媒体播放器，而不是像 VLC 或 SMPlayer 这样的下载器，因为大多数视频播放器似乎都能完成这项工作（在 Linux 中；对于 Windows，请参见下面的更新）；甚至像 Clementine 这样的音频播放器，尽管有些音频播放器可能无法正常工作。

它将在几秒钟后开始，一些玩家比其他人多。Linux 中最快的似乎是**SMPlayer**。

**更新**：

*   Flashgot 必须是最新的。

*   在 Windows 中，Flashgot 似乎在与上图不同的位置显示一些音频流，这已经在第一个列表中（在 DASH 列表之前）。SMPlayer 是最好的 AFAICT。VLC 有效，但不适用于 Flashgot 列出的所有音频流。Clementine、Foobar2000 和 XMPlay 失败。这可能是一个整体的 Windows 编解码器问题。MPC-HC 启动但不能正确缓冲并在它应该之前停止很长时间。**

# sencha-touch - Sencha Touch - 标题栏为多行文本（2 行）

> ID：10282912
> 
> 赞同：1
> 
> 时间：2012-04-23T14:53:47.327
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

我试图有一个标题栏，中间有两行文本，而不是 1 个大文本。

所以它看起来像：

```
<Back] Registration [Support]
         Step 1/5 
```

基本上，而不是一个大文本。我希望顶线小，底线大。我知道框架是为了让你工作得更快，但看起来我正处于第一个障碍，我看不出有什么方法可以用标准的 JS/CSS 在几分钟内完成。

我猜我将不得不在某种程度上扩展此功能？我正在使用 Sencha Architect 来尝试加快我的工作流程。

干杯，多姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:08:47.397

只需使用最简单的方法，例如：

```
title: '<span class="first-line">first line</span><br><span class="second-line">second line</span>' 
```

然后增加标题栏或工具栏的高度，比如说 200px。我猜你看不到第二行，因为栏的高度不够。

# asp.net-mvc - 将 MVC3 添加到现有的网络表单解决方案

> ID：10282916
> 
> 赞同：2
> 
> 时间：2012-04-23T14:54:19.380
> 
> 标签：asp.net-mvc, asp.net-mvc-3, webforms

好的，所以我有一个包含许多项目的大型 .NET 4.0 网络表单解决方案。我想在 MVC3 中开发一组新的屏幕以集成到站点中。我是否需要更改现有 webforms（web 应用程序）根目录中的 webconfig 和路由？这似乎有风险。我可以只添加一个 MVC3 项目并将其集成到 Web 应用程序中吗？什么是最简单、风险最小的方法？所有的路由都必须在根目录下完成吗？此外，我们使用 NCache 进行状态管理。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T15:00:18.990

Webforms 的“解决方案”没有任何内容，所以是的，您可以将 MVC 项目添加到解决方案中。如果你想将 MVC3 组件添加到现有的 webforms 项目中，你也可以这样做，但是你必须做一些 MVC3 项目向导为你做的工作，比如在 global.asax.cs 中添加路由并制作一些web.config 更改。完成后，混合 webforms/MVC3 应用程序可以正常工作。

如果你想走这条路，我的建议是创建一个 MVC 应用程序并查看它放入 Global.asax.cs 文件和 web.config 文件的内容，并将其与你当前的应用程序进行比较。

查看 [http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx](http://www.hanselman.com/blog/IntegratingASPNETMVC3IntoExistingUpgradedASPNET4WebFormsApplications.aspx)以获得良好的入门。

# c# - 随机生成敌人 XNA 4.0 (WP7)

> ID：10282918
> 
> 赞同：1
> 
> 时间：2012-04-23T14:54:27.963
> 
> 标签：c#, windows-phone-7, random, xna

我正在用 C# 和 XNA 为 windows phone 创建一个 2d 侧滚动（有点）游戏。

我有一个角色动画，使它看起来像精灵在移动，但是背景和敌人是唯一移动的东西。我已经为敌人加载了纹理，屏幕上的位置是静态的，这很好。但我的问题是，我想随机生成这些敌人。我已经设置了一个随机数生成器、一个 int 和几个 TimeSpan 变量。

这是我放在 UpdateEnemies 方法中的代码。

**注意**：在更新中，我正在打电话`UpdateEnemies(gameTime);`

```
random = new Random();
spawnSeconds = random.Next(1, 6);
enemySpawnTime = TimeSpan.FromSeconds(spawnSeconds); 
if (gameTime.TotalGameTime - previousSpawnTime > enemySpawnTime)
{
    previousSpawnTime = gameTime.TotalGameTime;
    // Add an Enemy
    AddEnemy();
} 
```

我在这里遇到了一个问题，因为生成的敌人不是随机的。对于该特定运行，它们以相同的间隔生成。

我每次都使用断点和`spawnSeconds`更新，但仍然是这个问题。`enemySpawnTime`

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T14:58:39.073

随机=新随机（）；

每次调用更新函数时，您都会创建一个新的 Random 实例。这样做会导致您的随机函数生成相同的值，因为它将基于相同的种子。

在 Update 函数之外实例化您的 Random 对象，可能在您的构造函数中。这样做将改进您的代码，并解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:48:53.557

假设在每个 Update() 上调用 UpdateEnemies，您将在每个 Update() 上更改enemySpawnTime，这是没有意义的。你应该只在敌人产生时改变它，即：

```
if (gameTime.TotalGameTime - previousSpawnTime > enemySpawnTime)
{
    // Add an Enemy
    AddEnemy();

    // Update the time left next enemy spawn
    previousSpawnTime = gameTime.TotalGameTime;
    var spawnSeconds = random.Next(1, 6); // random should be a member of the class
    enemySpawnTime = TimeSpan.FromSeconds(spawnSeconds); 
} 
```

如前所述，只创建一次 Random() 对象，例如在 Initialize() 中，并使其成为类的成员。

# iphone - TableView 不进入 willDisplayCell

> ID：10282919
> 
> 赞同：1
> 
> 时间：2012-04-23T14:54:28.617
> 
> 标签：iphone, objective-c, ios, tableview

我的目标是定义我自己的单元格样式，包括背景、字体和大小。我试试这个。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    ScreenListElements *currentScreenElement = [self.screenDefBuild.elementsToTableView objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:currentScreenElement.objectName];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:currentScreenElement.objectName];

    }

    cell.textLabel.text = currentScreenElement.objectName;

    return cell;
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{  
cell.contentView.backgroundColor = [UIColor blackColor];
} 
```

我想更改单元格背景，但我的应用程序没有进入 willDisplayCell 方法。我已将我的班级宣布为：

```
@interface MyTableView : UIViewController  <UITableViewDataSource,NSCopying> {
} 
```

我应该有别的东西吗？或者也许是声明自己的单元格样式的更好方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T15:05:52.810

```
@interface MyTableView : UIViewController  <UITableViewDataSource, UITableViewDelegate ,NSCopying> {
} 
```

方法

```
tableView:willDisplayCell:forRowAtIndexPath 
```

是委托方法`UITableView`

**已编辑**（使其正确且被接受的答案）

设置委托

```
[myTableView setDelegate:self]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:02:24.253

好的，我看到了，您没有实现“UITableViewDelegate”协议，只有数据源......所以它肯定不会进入委托方法。

确保它是这样的：

```
@interface MyTableView : UIViewController  <UITableViewDataSource, UITableViewDelegate ,NSCopying> {
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-17T05:51:34.407

检查`UITableviewCell`委托协议：

```
- (void)tableView:(UITableView *)tableView 
        willDisplayCell:(UITableViewCell *)cell 
        forRowAtIndexPath:(NSIndexPath *)indexPath{  

    cell.contentView.backgroundColor = [UIColor blackColor]; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-02T07:53:27.890

我有同样的问题，我把所有的东西都设置正确了，但是如果你手动编写了你的​​函数，你可能会错过语法并发生这个错误：

> `(Instance method 'tableView(tableView:willDisplayCell:forRowAtIndexPath:)`几乎符合`tableView(_:willDisplay:forRowAt:)`协议的可选要求`UITableViewDelegate`

这样函数就不会被识别，正确编写函数：

```
func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) 
```

如果将委托分配给`self`它，它将起作用，否则它将在您编写代码时显示错误。

# linux - SSH 连接到外部机器时将文件传输到本地机器

> ID：10282921
> 
> 赞同：2
> 
> 时间：2012-04-23T14:54:40.747
> 
> 标签：linux, ssh

可以通过 SSH 登录到远程 shell，也可以使用 FTP 应用程序通过 SFTP 使用相同的凭据通过 SSH 登录。那么，当通过 SSH 登录到 shell 时，如何启动从远程主机到本地主机的文件传输？

我知道我可以使用 scp 或 rsync 来移动文件，但需要进行身份验证，这不是我总是可以从主机做的事情。根据我有限的理解，现有的 SSH 连接就足够了，因为[SSH 具有文件传输功能](http://en.wikipedia.org/wiki/SSH_File_Transfer_Protocol)。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:21:01.903

那么从本地主机A，你登录到远程主机B，并且想要将文件从B传输回A？

您需要 A 上的某种服务器来处理请求，或者在您登录到 A 时从 B 拉取它。

是否可以在服务器上设置authorized_keys 以方便免密码身份验证？

编辑：在 *nix 主机上，您可以在 A 上获取包 zssh 并在 B 上获取 lrzsz 包。然后，不要`ssh B`运行`zssh B`， cd 到要从中获取文件的目录，运行`sz file.name`然后点击`ctrl+space`并输入`rz`，它将在本地传输。其他客户端可能有其他方法。

# image - 已在舞台上更改图像 as3

> ID：10282926
> 
> 赞同：0
> 
> 时间：2012-04-23T14:55:01.523
> 
> 标签：image, actionscript-3, loader, movieclip

好的，这个解决方案似乎找不到。

我在舞台上有一个边框类型的图像（圆形），我在我的文档类中从 xml 动态加载图像。我在边框内有一个占位符图像。我可以用动态加载的图像替换该图像吗？

还是我必须添加Child，然后通过代码对其进行缩放和转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:44:19.213

我只需删除占位符图像并将新图像添加到同一个容器中并缩放/定位它。用代码做起来很简单。

```
container.removeChild(placeHolderImage);
container.addChild(newLoadedImage);
newLoadedImage.scaleX = newLoadedImage.scaleY = 1.5;
newLoadedImage.x = 100;
newLoadedImage.y = 100; 
```

您可能已经在屏幕上绘制图像的位图数据，但我看不出仅删除旧图像并添加新图像有任何缺点。

# android - Android：我可以一个显示多个对话框吗？有没有类似 Dialog Z-Level 的东西？

> ID：10282927
> 
> 赞同：8
> 
> 时间：2012-04-23T14:55:03.707
> 
> 标签：android, android-dialog, android-dialogfragment

是否可以一个接一个地显示多个对话框？有没有类似 Dialog Z-Level 的东西？我正在使用用户选择元素的 DialogFragment，当他确认他的选择时，它会保存到数据库并发送到服务器上。如果保存操作失败，我想通知用户...另一个对话框是否可能？它不会清除我的第一个对话吗？提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-05T22:07:52.467

实际上，可以在另一个中显示多个对话片段。z 顺序取决于它们的创建顺序。

在下面的代码中，有一个带有您需要的行为的 FragmentActivity 示例。

```
public class MyActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        //...    
    }

    public void onSave(View view) {
        Intent intent = getIntent();

        this.setResult(RESULT_OK, intent);
        finish();
    }

    public void onCancel(View view) {
        finish();
    }

    public void SelectWeekDay(View view) {
        DialogFragment selectWeekDayFragment = new SelectWeekDayFragment();
        selectWeekDayFragment.show(getSupportFragmentManager(), "WeekDayDialog");
    }

    public class SelectWeekDayFragment extends DialogFragment {

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
            View view = inflater.inflate(R.layout.week_day_dialog, container, true);

            Button saveButton = (Button) view.findViewById(R.id.button_save);
            saveButton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View view) {
                    CheckBox checkboxMonday = (CheckBox) getDialog().findViewById(R.id.checkBox_monday);
                    if (!checkboxMonday.isChecked()) {
                        DialogFragment saveErrorFragment = new SaveErrorFragment();
                        saveErrorFragment.show(getSupportFragmentManager(), "SaveErrorFragment");
                    }
                    else {
                        SaveToDb(); //Perform actions to store on db or what you wish
                        dismiss();  
                    }
                }
            });

            Button cancelButton = (Button) view.findViewById(R.id.button_cancel);
            cancelButton.setOnClickListener(new View.OnClickListener() {

                @Override
                public void onClick(View v) {
                    dismiss();
                }
            });

            return view;    
        }
    }

    public class SaveErrorFragment extends DialogFragment {

        @Override
        public Dialog onCreateDialog(Bundle savedInstanceState) {
            return new AlertDialog.Builder(getActivity())
            .setMessage("You must select Monday").setPositiveButton("Ok", null).create();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:06:58.517

我的建议是在对话框中使用带有 ViewFlipper 的自定义布局，这样您就可以轻松地在进度条或您想要显示的任何不同布局之间切换。如果您想显示多个对话框，我的猜测是 z 顺序取决于它们的创建顺序，即顶部显示的最新蜜蜂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T13:16:01.690

但是，您通常可以小心一点。使用对话框的生命周期来避免副作用。例如：您可以检查 onStop() 之类的函数，以查看子对话框是否打开，如果是，则关闭它。

理想情况下，减少对话层的数量是理想的，只要它是理智的（例如：这样做最终会增加数百行代码）

# ios - IOS main()之前执行什么？

> ID：10282934
> 
> 赞同：3
> 
> 时间：2012-04-23T14:55:23.520
> 
> 标签：ios

```
objc[1655]: Object 0x2314e0 of class __NSCFString autoreleased with no
pool in place - just leaking - break on objc_autoreleaseNoPool() to
debug

objc[1655]: Object 0x2315e0 of class NSPathStore2 autoreleased with
no pool in place - just leaking - break on objc_autoreleaseNoPool() to
debug

objc[1655]: Object 0x2316b0 of class __NSCFData autoreleased with no
pool in place - just leaking - break on objc_autoreleaseNoPool() to
debug

File:MultiFormatReader.mm Method:+[MultiFormatReader load]  --

objc[1655]: Object 0x2317e0 of class __NSCFString autoreleased with
no pool in place - just leaking -  break on objc_autoreleaseNoPool()
to debug

objc[1655]: Object 0x231800 of class __NSCFData autoreleased with no
pool in place - just leaking
- break on objc_autoreleaseNoPool() to debug

..++++++++

File:main.mm  Method:main  -- mark..

File:BarcodesAppDelegate.m  Method:-[BarcodesAppDelegate
application:didFinishLaunchingWithOptions:]  -
File:BarcodesAppDelegate.m  Method:-[BarcodesAppDelegate
application:didFinishLaunchingWithOptions:]  - 
```

这是相关代码：

```
+ (void)load {
    MPLog(@" ..++++++++");
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    [FormatReader registerFormatReader:[[[self alloc] init] autorelease]];
    [pool drain];
}

int main(int argc, char *argv[]) {
    MPLog(@"mark..");
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    [pool release];
    return retVal;
} 
```

这是我的调试消息，我在我的应用程序中使用了 zxing 框架，但是我发现在 main() 方法执行之前，已经执行了一些其他代码。为什么？一般来说，在 main() 之前执行什么？这个程序`" objc[1655]: Object 0x2314e0 of class __NSCFString autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug"`是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:00:46.450

移动`MPLog`下面的 2 s `NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];`?

```
+ (void)load {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
    MPLog(@" ..++++++++");
    [FormatReader registerFormatReader:[[[self alloc] init] autorelease]];
    [pool drain];
}

int main(int argc, char *argv[]) {
    NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
    MPLog(@"mark..");
    int retVal = UIApplicationMain(argc, argv, nil, nil);
    [pool release];
    return retVal;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T15:06:59.983

`objc_autoreleaseNoPool`在遇到此错误时设置符号断点以停止执行。然后，您可以确定需要放置自动释放池的位置（明确地）。

> > 一般来说，在 main() 之前执行什么？

**来自 +[NSObject load] 文档：**

> 每当将类或类别添加到 Objective-C 运行时时调用；实现此方法以在加载时执行特定于类的行为。
> 
> `+ (void)load`
> 
> **讨论**加载消息被发送到动态加载和静态链接的类和类别，但前提是新加载的类或类别实现了可以响应的方法。
> 
> 初始化顺序如下：
> 
> *   您链接到的任何框架中的所有初始化程序。
> *   图像中的所有 +load 方法。
> *   映像中的所有 C++ 静态初始化程序和 C/C++`__attribute__(constructor)`函数。
> *   链接到您的框架中的所有初始化程序。
> 
> 此外：
> 
> *   一个类的 +load 方法在其所有超类的 +load 方法之后被调用。
> *   在类自己的 +load 方法之后调用类别 +load 方法。
> *   因此，在加载的自定义实现中，您可以安全地从同一图像中向其他不相关的类发送消息，但这些类实现的任何加载方法可能尚未运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T13:51:11.497

我看到了同样的问题。如果我在主线程上的 objc_autoreleaseNoPool 处设置断点，我会得到以下无用的堆栈跟踪：
`0 0x332097b8 in objc_autoreleaseNoPool ()
1 0x331fe7b8 in (anonymous namespace)::AutoreleasePoolPage::autoreleaseSlow(objc_object*) ()
2 0x332098de in _ZL22_objc_rootAutorelease2P11objc_object ()
3 0x331fcdb6 in _objc_rootAutorelease ()`

在应用程序中的任何内容实际启动之前，它似乎已经遇到了自动释放错误。这可能是我在项目中包含的其中一个框架中的一些加载方法的结果吗？

# android - 意图画廊保存联合国相同的内容？

> ID：10282937
> 
> 赞同：1
> 
> 时间：2012-04-23T14:55:46.437
> 
> 标签：android

我在使用这个 Intent 和 Gallery 编辑器时遇到了问题

```
 //fileURI is a content://

Intent intent = new Intent(Intent.ACTION_EDIT);
intent.setDataAndType(fileUri, "image/jpeg");
intent.putExtra("return-data", true); 
intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
intent.putExtra("outputFormat", Bitmap.CompressFormat.JPEG.toString()); 
```

使用 Photoshop 应用程序没问题，我可以保存和编辑，但不能使用 Android Gallery 将它保存在另一个目录中

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:00:47.883

Afaik 取决于意图本身，因此画廊可能不会检查额外的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T04:46:13.800

好的，我发现：

Gallery Source 提供有关 noExtra 的信息，仅获取原始文件的 Uri，因此唯一的解决方案是获取 Media Provider 中的最后一个文件，如下所示：

```
 String[] projection = new String[]{
        MediaStore.Images.ImageColumns._ID
    };
    Cursor cursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
          projection, MediaStore.Images.ImageColumns.DATE_TAKEN + "="+datePhoto, null, "_ID DESC");

    if (cursor.moveToFirst()) {
        long ID = cursor.getLong(cursor.getColumnIndex(MediaStore.Images.ImageColumns._ID));
        fileUri = Uri.withAppendedPath(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, "" + ID);
    } 
```

# c# - 减少 C# 或 VB.NET 枚举中的值

> ID：10282938
> 
> 赞同：3
> 
> 时间：2012-04-23T14:55:46.617
> 
> 标签：c#, vb.net, enums

更多的是兴趣而不是实际需要......是否可以在 C# 或 VB.NET 中自动减少枚举？

```
public enum testEnum
{
    this = -1,
    that,
    other,
} 
```

所以那 = -2 和其他 = -3。

我很确定这样做的唯一方法是专门分配“那个”和“其他”，但我想知道是否有一种自动的方法来做到这一点。

**编辑**

为了清楚起见，我只是在谈论值的自动分配，而不是枚举的实际值递减。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T14:58:22.717

不，这是不可能的。

如果您愿意，您必须声明这些值，或者反转声明：

```
public enum testEnum
{
    other = -3,
    that,
    @this
} 
```

# javascript - 如何从 Javascript 中的通用网页获取 favicon 的 URL？

> ID：10282939
> 
> 赞同：37
> 
> 时间：2012-04-23T14:55:50.300
> 
> 标签：javascript

考虑到 favicon 并不总是位于基本 url，我需要一种从通用网页获取 favicon 的 URL 的方法。

Ps 不使用外部服务或库。

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-01T19:59:46.557

对于仍然没有使用上述代码获得网站图标的人；

1.  大多数浏览器都支持通过自己发送请求 ( `/favicon.ico`) 来获取网站图标，而不是在 html 中。

2.  Google 提供了另一种解决方案。

    要获取域的 favicon，请使用：
    `https://s2.googleusercontent.com/s2/favicons?domain=www.stackoverflow.com`

    要获取 URL 的 favicon，请使用：
    `https://s2.googleusercontent.com/s2/favicons?domain_url=https://www.stackoverflow.com`

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-04-23T15:16:50.913

这似乎有效：

```
var getFavicon = function(){
    var favicon = undefined;
    var nodeList = document.getElementsByTagName("link");
    for (var i = 0; i < nodeList.length; i++)
    {
        if((nodeList[i].getAttribute("rel") == "icon")||(nodeList[i].getAttribute("rel") == "shortcut icon"))
        {
            favicon = nodeList[i].getAttribute("href");
        }
    }
    return favicon;        
}

alert(getFavicon());​ 
```

或者查看[http://jsfiddle.net/PBpgY/3/](http://jsfiddle.net/PBpgY/3/)以获取在线示例。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-04-23T14:59:24.393

`/favicon.ico`除非您有`<link rel="icon" href="...">`元素，否则图标位于。因此，您可以通过获取所有[`link`元素](http://www.w3.org/TR/html5/the-link-element.html#the-link-element)[`document.getElementsByTagName`](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-A6C9094)，然后查看返回中的每个元素，`NodeList`看看它们中是否有任何具有`rel`值的属性`"icon"`，如果有，请查看它的`href`. （您也可以查看那些在哪里`rel`或`"shortcut icon"`出于`"icon shortcut"`历史原因的。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-30T20:03:33.417

现场工作小提琴示例：http: [//jsfiddle.net/sc8qp/2/](http://jsfiddle.net/sc8qp/2/)

只是为了没有正则表达式的良好度量和完整性：

```
function getIcons() {
    var links = document.getElementsByTagName('link');
    var icons = [];

    for(var i = 0; i < links.length; i++) {
        var link = links[i];

        //Technically it could be null / undefined if someone didn't set it!
        //People do weird things when building pages!
        var rel = link.getAttribute('rel');
        if(rel) {
            //I don't know why people don't use indexOf more often
            //It is faster than regex for simple stuff like this
            //Lowercase comparison for safety
            if(rel.toLowerCase().indexOf('icon') > -1) {
                var href = link.getAttribute('href');

                //Make sure href is not null / undefined            
                if(href) {
                    //Relative
                    //Lowercase comparison in case some idiot decides to put the 
                    //https or http in caps
                    //Also check for absolute url with no protocol
                    if(href.toLowerCase().indexOf('https:') == -1 && href.toLowerCase().indexOf('http:') == -1
                        && href.indexOf('//') != 0) {

                        //This is of course assuming the script is executing in the browser
                        //Node.js is a different story! As I would be using cheerio.js for parsing the html instead of document.
                        //Also you would use the response.headers object for Node.js below.

                        var absoluteHref = window.location.protocol + '//' + window.location.host;

                        if(window.location.port) {
                            absoluteHref += ':' + window.location.port;
                        }

                        //We already have a forward slash
                        //On the front of the href
                        if(href.indexOf('/') == 0) {
                            absoluteHref += href;
                        }
                        //We don't have a forward slash
                        //It is really relative!
                        else {
                            var path = window.location.pathname.split('/');
                            path.pop();
                            var finalPath = path.join('/');

                            absoluteHref += finalPath + '/' + href;
                        }

                        icons.push(absoluteHref);
                    }
                    //Absolute url with no protocol
                    else if(href.indexOf('//') == 0) {
                        var absoluteUrl = window.location.protocol + href;

                        icons.push(absoluteUrl);
                    }
                    //Absolute
                    else {
                        icons.push(href);
                    }
                }
            }
        }
    }

    return icons;
} 
```

# ipad - CakePHP iPad 布局未加载

> ID：10282942
> 
> 赞同：0
> 
> 时间：2012-04-23T14:55:55.947
> 
> 标签：ipad, cakephp, ios-simulator, cakephp-2.0

好的，这让我有些发疯。

我创建了一个移动布局，主要用于 iPad。我在 AppController 中使用 beforeRender() 函数来检测移动客户端并相应地切换主题。

当我使用 iOS 模拟器在本地开发服务器上测试移动站点时，一切正常。主题被正确加载。但是，当我在在线生产服务器上访问它时，没有加载移动主题。我看到了内容，但没有任何样式。

在线测试可以在这里找到：[http ://www.anuragdesign.com/test/mbv](http://www.anuragdesign.com/test/mbv)

为什么会这样？非常感谢任何输入。

**更新：**

以下是相关的代码片段：

在我的*AppController.php*

```
public function beforeRender() { 
    if($this->RequestHandler->isMobile()) {
        $this->theme = 'mobile';
    } 

} 
```

*/lib/cake/Network/CakeRequest.php*

```
protected $_detectors = array(
    'get' => array('env' => 'REQUEST_METHOD', 'value' => 'GET'),
    'post' => array('env' => 'REQUEST_METHOD', 'value' => 'POST'),
    'put' => array('env' => 'REQUEST_METHOD', 'value' => 'PUT'),
    'delete' => array('env' => 'REQUEST_METHOD', 'value' => 'DELETE'),
    'head' => array('env' => 'REQUEST_METHOD', 'value' => 'HEAD'),
    'options' => array('env' => 'REQUEST_METHOD', 'value' => 'OPTIONS'),
    'ssl' => array('env' => 'HTTPS', 'value' => 1),
    'ajax' => array('env' => 'HTTP_X_REQUESTED_WITH', 'value' => 'XMLHttpRequest'),
    'flash' => array('env' => 'HTTP_USER_AGENT', 'pattern' => '/^(Shockwave|Adobe) Flash/'),
    'mobile' => array('env' => 'HTTP_USER_AGENT', 'options' => array(
        'AvantGo','DoCoMo', 'Fennec', 'iPad', 'J2ME', 'MIDP', 'NetFront', 'Nokia', 'Opera Mini', 'Opera Mobi', 'PalmOS', 'PalmSource',
        'portalmmm', 'Plucker', 'ReqwirelessWeb', 'SonyEricsson', 'Symbian', 'UP\\.Browser',
        'webOS', 'Windows CE', 'Windows Phone OS', 'Xiino'
    )),
    'requested' => array('param' => 'requested', 'value' => 1)
); 
```

移动样式表位于：

*/app/View/Themed/mobile/webroot/css/mobile.css*

并在布局文件中调用启动页面*/app/View/Themed/mobile/Layouts/splash.ctp*，如下所示：

```
<?php echo $this->Html->css(array('reset.defaults', 'mobile', 'superfish')); ?> 
```

**更新：**

在线设置上的 debug($_SERVER['HTTP_USER_AGENT') 产生以下输出：

```
'Mozilla/5.0 (iPad; U; CPU OS 4_3_3 like Mac OS X; en-us) AppleWebKit/533.17.9 (KHTML, like Gecko) Version/5.0.2 Mobile/8J2 Safari/6533.18.5' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T17:46:48.773

**修复（好吧）**

我做了几个步骤，最终似乎解决了它。问题似乎是在在线生产服务器上，它会尝试从常规 webroot 文件夹中提供样式表，而不是我的主题文件夹。我不知道为什么，但你去。

所以首先，我复制了所有移动样式表并将它们放在 /app/webroot/css/ 中（而不是它们应该放在 /app/View/Themed/mobile/webroot/css/ 的位置。然后我还重命名了任何使用的元素在移动和非移动视图中确保移动视图（位于 /app/View/Themed/mobile/Elements）都有唯一的名称。

这似乎奏效了，但总的来说是一个相当不简洁的解决方案。因此，如果有人有更好的解决方案，我很想听听。

# php - PHP 上 WSDL 请求的分段错误

> ID：10282944
> 
> 赞同：0
> 
> 时间：2012-04-23T14:56:00.637
> 
> 标签：php, soap, wsdl, wso2, wsh

我已经基于 php 的 wso2 框架的 wsdl 模式示例创建了这个简单的示例。

```
 <?php

try {

    $client = new WSClient(array("wsdl"=>"http://footballpool.dataaccess.eu/data/info.wso?wsdl",
                                 ));

    $proxy = $client->getProxy();   

    $result = $proxy->TopGoalScorers(array('iTopN'=>1));

    echo "TEST!!!<br />";

    echo '<pre>';
    print_r($result);
    echo '</pre>';

} catch (Exception $e) {

        echo "Message = ".$e->getMessage();
}
?> 
```

如果我在 Web 浏览器中执行此脚本，我得到一个 http 324 错误 ERR_EMPTY_RESPONSE 当我在 shell 中执行它时，它似乎可以工作，但最后我得到一个分段错误错误。

使用示例文件 wsdl_11_client.php 将重现相同的错误

如果这条线

```
$result = $proxy->TopGoalScorers(array('iTopN'=>1)); 
```

被评论不会出现分段错误错误。

我正在为 php 版本 2.1.0 libxml 版本 2.7.8 libxslt 版本 1.1.26 PHP 版本 5.3.6-13ubuntu3.6 Ubuntu 11.10 使用 wsf wso2 框架。

在我的 php.ini 中，我添加了

```
include_path = ".:/usr/share/php:/usr/lib/php5/20090626/wsf_c/scripts"

[wsf]
wsf.home="/usr/lib/php5/20090626/wsf_c"
;log_level2 shows warnings and errors
;wsf.log_level=2 
;wsf.log_path="/var/log/wsf" 
```

我已经在 /etc/php5/conf.d/wsf.ini 添加了这个扩展

```
; configuration for php WSF module
extension=wsf.so 
```

我的服务器配置错误吗？还是我的 php 脚本中有一些错误？提前致谢。弗朗切斯科。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:43:10.510

我也是。

考虑到“WSO2 WSF for PHP”项目没有活动，我想最好不要在生产中使用它。

最好的解决方法可能是编写 Java 代理服务，它与原始服务通信并将 JSON 之类的内容返回给 PHP。

# matlab - 通过蛮力算法找到正确的参数

> ID：10282949
> 
> 赞同：0
> 
> 时间：2012-04-23T14:56:18.647
> 
> 标签：matlab, brute-force

我已经实现了一个压缩算法，假设我执行它，调用：

```
myCompression(data, th) 
```

*th*参数是一个介于 0 和 1 之间的实数。有时这可能是非常小的数字，例如 212.19e-013。

```
num = length(myCompression(data, th)) 
```

给了我压缩后剩余的数据数量。如果我想让*num*更大，我需要选择一个较低的*参数*。反之亦然，如果我想要更高的*num*，我必须选择更低的*th*。

现在的问题是：我想找到一个合适的*th*使得*num*等于我选择的目标数。如您所知，find *th*是一项非常漫长的工作，我会实现一种蛮力算法，它可以找到满足我需要的*th 。*我写了这个：

```
target = 304;
th = 2.49e-011;
num = 0;

while(num~=target)    
    num = length(MCSimplify3(time, latitudes, longitudes, th));
    disp(horzcat('tol: ', num2str(th), ' num: ', num2str(num)));

    if (num>target)
        th = th+(rand()*th);
    else
        th = th-(rand()*th);
    end

    th = abs(th);
end 
```

前一个脚本启动但从未捕获目标。我想这个问题是由于加减`(rand()*th)`法太大，所以一次在目标之上，一次在目标之下。所以继续摆动，永远不要看到结果，正如你在这里看到的：

```
tol: 2.67e-012 num: 333
tol: 4.0685e-012 num: 303
tol: 2.9909e-012 num: 320
tol: 3.1953e-012 num: 316
tol: 4.5895e-012 num: 298
tol: 3.7916e-012 num: 308
tol: 3.8906e-012 num: 308
tol: 7.6049e-012 num: 257
tol: 4.3302e-012 num: 299
tol: 1.6646e-013 num: 624
tol: 2.9337e-013 num: 562
tol: 2.9553e-013 num: 561
tol: 4.965e-013 num: 503
tol: 8.47e-013 num: 448
tol: 1.3934e-012 num: 391
tol: 2.163e-012 num: 350
tol: 2.6348e-012 num: 335
tol: 4.6699e-012 num: 296 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:49:55.270

给你的猫剥皮的方法不止一种，你需要做的第一件事是 remove `rand`，因为它是一个高度不可预测的参数。话虽如此，我将您推荐给[Nelder-Mead](http://en.wikipedia.org/wiki/Nelder%E2%80%93Mead_method)。

从更实际的角度来看，您应该将 rand() 替换为常数（例如 0.1），或测量 num 和目标之间的距离乘以变化参数的变量。

或者，您可以使用 fminsearch（使用 Nelder-Mead）之类的最小化例程，并可能对不连续性进行一些小的调整。

在无法运行代码的情况下很难提供更多信息（即我需要 MCSimplify3）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:18:20.987

首先，绘制您向我们展示的数据的图表。这应该让您清楚地了解在哪里搜索一个值，`th`该值可以为您提供您所寻求的目标值。

`th`其次，通过正确范围内的值实现某种搜索；即使是对包含所需目标值的区间进行简单的二等分搜索也会比您当前的方法更好。

只是观察您的数据表明，对于 的目标值`304`， 的值`th`应该在范围内`(3.7916e-012,4.0685e-012)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:09:30.080

有了High Performance Mark的宝贵提示，我就是这样解决的。

```
target = 304;
len = 0;

a = 0;
b = 1;

while(len~=target)
    c = (a+b)/2;
    len = length(MCSimplify3(time, latitudes, longitudes, c));
    if(len<target)
        b = c;
    end
    if (len>target)
        a = c;
    end
    if (len==target)
        disp(horzcat('tol: ', num2str(th), ' num: ', num2str(len)));
    end
end 
```

# .net - 暴露嵌套类的方法

> ID：10282950
> 
> 赞同：0
> 
> 时间：2012-04-23T14:56:19.760
> 
> 标签：.net, vb.net, oop

我有一个名为“ClientConnection”的公共类。在该类中，我有一个名为“FileTransfers(ByVal TransferID)”的公共只读属性。该属性返回“FileTransfer”类的对象。FileTransfer 中的所有方法都设置为 public。

VS 能够*发现*父类“ClientConnection”中的方法。如何公开属性“FileTransfers(ByVal TransferID)”返回的子类“FileTransfer”中的方法？

```
Public Class ClientConnection
'irreverent code removed

   Public ReadOnly Property FileTransfers(ByVal TransferID As Integer)
    Get
        Dim obj As FileTransfer = OngoingFileTransfers(TransferID)
        If obj IsNot Nothing Then
            Return obj
        Else
            Return Nothing
        End If
    End Get
   End Property

End Class

Public Class FileTransfer()
  Public Sub StartTransfer() '<--- I need this discoverable in VS from ClientConnection's parent
   'do some stuff
  End Sub
End Class 
```

我知道这可能很难理解。因此，如果您需要我澄清，请问。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:02:01.740

我认为您只需要指出您的`FileTransfers`财产返回的类型。

现在，`as`财产声明的末尾没有条款。

```
Public ReadOnly Property FileTransfers(ByVal TransferID As Integer) as FileTransfer
 Get
     Dim obj As FileTransfer = OngoingFileTransfers(TransferID)
     If obj IsNot Nothing Then
         Return obj
     Else
         Return Nothing
     End If
 End Get
End Property 
```

这听起来更像是一个方法操作而不是一个属性。

# jquery - jScrollPane 设置高度

> ID：10282952
> 
> 赞同：0
> 
> 时间：2012-04-23T14:56:24.127
> 
> 标签：jquery, jscrollpane

不知何故，我不明白如何设置 jScrollPane 的高度。

[http://tinyw.in/BLrg](http://tinyw.in/BLrg)点击时事通讯 546。现在您看到滚动条，手动滚动它。你看，它深入到虚无之中。我怎样才能让它和包装纸一样大？（600 像素）

它是一个带有 div 作为 jScrollPane 包装器的 UL。我已将此包装器的高度设置为 600 像素，我尝试了一些东西，但不知何故我无法让它工作。

这个 div 稍后会被隐藏，我知道我必须重新初始化，但也许这很重要。:)

它不应该采用它所连接的元素的高度吗？

谢谢！

如果时事通讯被删除（似乎人们这样做很有趣）只需按创建新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:39:27.120

I believe within your `initJScrollPane` function in the logic.frontend.js you have height being set with javascript after css is set:

```
var width = $('#elementsContainer ul').width();
var height = $('#elementsContainer ul').height();

$('#jScrollPane_Wrapper').css({'height' : height, 'width' : width});
$('#jScrollPane_Wrapper').jScrollPane({
    height: 600
}); 
```

I think, this could be getting the height of the whole content(`<ul>`), which is causing the wrong height to be set that you want.

Maybe changing it to this will fix it:

```
var height = $('#elementsContainer').height(); 
```

As that is set to 600px which I believe is what you are wanting it set too.

# google-chrome-extension - 如何读取和修改任何页面的内容？

> ID：10282955
> 
> 赞同：2
> 
> 时间：2012-04-23T14:56:30.563
> 
> 标签：google-chrome-extension

这是我的第一个应用程序，所以请原谅我缺乏知识。作为一个演示应用程序，我想实现以下目标：

阶段1 ：

1 阅读页面内容

2 在该页面的内容中查找正则表达式匹配

3 用其他东西替换它们

第 2 阶段：

1 关于提交（）文本到网页

2 阅读即将提交的文本

3 寻找一个正则表达式并替换它。

可以指向类似应用程序的方向或制作一个小指南吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:37:52.277

首先，您需要插入一个内容脚本，这是访问页面内容的唯一方法。

[http://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

您可以制作一个仅内容脚本的扩展来开始，但对于更高级的扩展，您应该阅读有关编程注入的内容。

[http://code.google.com/chrome/extensions/content_scripts.html#pi](http://code.google.com/chrome/extensions/content_scripts.html#pi)

从内容脚本中，您可以访问页面的 DOM，并以通常的方式将侦听器添加到事件中。例如，您可以使用 document.getElementById() 或 element.addListener() 。

查找正则表达式的方法有很多，这取决于您要搜索页面的方式，例如您可以使用

```
document.body.innerHTML.replace(...); 
```

Rob W 给了你一个很好的提示来拦截使用 chrome.webRequest 提交的文本

# php - 使用 Telerik RadGrid 将 php foreach 语法转换为 asp.net

> ID：10282962
> 
> 赞同：0
> 
> 时间：2012-04-23T14:56:44.127
> 
> 标签：php, asp.net, telerik

我正在用 ASP.NET 编写代码，而且我是新手。我有两个数组，一个是名称，另一个是 ID。

我想创建一个表，其中有一列中的名称和两个依赖于另一列中的 id 的链接（编辑到这个特定的名称链接，删除到这个特定的名称链接）。

在 PHP 中，我会这样做：

```
<table>
 <tr>
  <td>Title</td>
  <td>Actions</td>
 </tr>
 <?php 
  $names = Array("a", "b", "c");
  $ids = Array("1", "2", "3");
  for($i = 0; $i < 3; $i++):
 ?>
  <tr>
   <td>
    <?php echo $names[$i]; ?>
   </td>
   <td>
    <a href="edit.php?id=<?php echo $ids[$i]; ?>">Edit</a>
    <a href="delete.php?id=<?php echo $ids[$i]; ?>">Delete</a>
   </td>
  </tr>
 <?php endforeach; ?>
</table> 
```

我知道您可以在 ASP.NET 中编写非常相似的内容，但我必须使用 RadGrids。非常感谢您的帮助！

编辑：如果重要，我将数据作为 XML 获取，并选择将其解析为 2 个数组。如果它更容易，我可以用不同的方式解析它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:19:01.390

RadGrids 是一个 asp.net webforms 控件，您通常会将控件绑定到数据源，然后在后面的代码中以编程方式更改属性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T15:04:19.747

```
<table>
 <tr>
  <td>Title</td>
  <td>Actions</td>
 </tr>
<% string [] names = new string [] {"a", "b", "c"};
string [] ids = new string [] {"1", "2", "3"};
foreach (int i=0;i<names.length;i++)
{
%>
  <tr>
   <td>
<% names[i] %>
   </td>
   <td>
    <a href="edit.php?id=<% ids[i] %>">Edit</a>
    <a href="delete.php?id=<% ids[i] %>">Delete</a>
   </td>
  </tr>
<% } %>
</table> 
```

# winapi - 如何更新进度条？

> ID：10282964
> 
> 赞同：2
> 
> 时间：2012-04-23T14:56:48.147
> 
> 标签：winapi, progress-bar

如何在 win32api 中更新此进度条？你可以在这里找到完整的代码代码在[这里](http://dl.dropbox.com/u/19835281/main.cpp)

```
hProgress=CreateWindowEx(0, PROGRESS_CLASS, NULL,
                       WS_CHILD | WS_VISIBLE,
                  20, 20, 260, 17,
                  hwnd, NULL, g_hInst, NULL); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T14:59:34.513

您要查找的消息是[PBM_SETPOS](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760844%28v=vs.85%29.aspx)。它的使用取决于当前设置的范围（默认值为 0-100）。例如，假设默认范围，将位置设置为中途将按如下方式完成：

```
SendMessage(hProgress, PBM_SETPOS, 50, 0); 
```

或者，可以通过[PBM_STEPIT](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760853%28v=vs.85%29.aspx)逐步增加进度条。它的使用取决于步长增量是多少（默认为 10）。例如，假设进度条的默认范围和初始位置，将位置步进到 10 将按如下方式完成：

```
SendMessage(hProgress, PBM_STEPIT, 0, 0); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T15:03:49.777

您可以使用该`PMB_STEPIT`消息根据步长移动当前位置：

```
int max_range = 1000;

// set range of progress bar
SendMessage(hProgress, PBM_SETRANGE, 0, MAKELPARAM(0, max_range));

// set the step size
SendMessage(hProgress, PBM_SETSTEP, (WPARAM) 1, 0); 

// increment by step size
SendMessage(hProgress, PBM_STEPIT, 0, 0); 
```

这是一个很好的例子[`How to Use Progress Bar Controls`](https://msdn.microsoft.com/en-us/library/windows/desktop/hh298373%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T15:05:34.933

假设您已经初始化了公共控件：

```
INITCOMMONCONTROLSEX InitCtrlEx;

InitCtrlEx.dwSize = sizeof(INITCOMMONCONTROLSEX);
InitCtrlEx.dwICC  = ICC_PROGRESS_CLASS;
InitCommonControlsEx(&InitCtrlEx); 
```

设置范围：

```
SendMessage(hProgress, PBM_SETRANGE, 0, MAKELPARAM(min, max)); 
```

设置位置：

```
SendMessage(hProgress,PBM_SETPOS,pos,0); 
```

请参阅：[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760844%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T15:06:18.607

除了在进度条中更新进度外，您还必须给它一个重新绘制的机会。通常你会显示一个进度条，因为你正忙于工作，所以正常的消息循环没有运行，也没有生成 WM_PAINT 消息。您可以立即调用[`UpdateWindow`](http://msdn.microsoft.com/en-us/library/dd145167.aspx)以重新绘制窗口。

# spring - 为表单中的日期字段保留无效值时出错

> ID：10282967
> 
> 赞同：1
> 
> 时间：2012-04-23T14:57:08.963
> 
> 标签：spring, validation, datetime, date, spring-mvc

我对 Spring 框架相对较新，并且面临一个我不确定哪里出错的问题。

我有一个包含两个日期字段的表单，日期 1 和日期 2。如果日期 1 字段是无效日期而日期 2 是有效日期，则在执行验证时，不会显示日期 1 字段的无效值。相反，日期 2 值填充在日期 1 字段框中。

有人可以告诉我为什么以及哪里出错了。

我相信这是我配置spring的方式的框架错误，而不是我的代码问题。我尝试通过我的代码进行调试，它按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:26:59.737

我遇到过同样的问题。看起来您正在使用与 Spring 提供的不同的 customDateEditor。检查您是否正在导入

```
 org.springframework.beans.propertyeditors.CustomDateEditor 
```

在您的 customPropertyEditorRegistrar 类中......它可能会有所帮助。

# html - iframe 加载图片和 IE

> ID：10282968
> 
> 赞同：0
> 
> 时间：2012-04-23T14:57:27.967
> 
> 标签：html, css, internet-explorer, iframe

我正在从我的外部服务器将 iframe 加载到我的网页上，我想要一个加载图像，因为有时加载需要 10 秒。在 Chrome 中一切都很好，但在 IE 中什么也没有。

```
<center>
<div style="background: #ffffff url(http://mentalized.net/activity-indicators/indicators/simon-claret/progress_bar.gif) no-repeat 50% 5%;">
<iframe src="http://x.x.x.x/panel.php" allowTransparency="true" width="100%" height="450px" scrolling="no"></iframe>
</div>
</center> 
```

我的另一个问题是，有没有更好的方法来做到这一点？我不能使用 ajax，因为它是一个外部服务器，但是有没有更好的方法来使用 iFrame 加载图像？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:04:52.910

尝试将带有背景图像信息的样式放在 iframe 本身上，而不是单独的 div 上。

```
<iframe src="http://x.x.x.x/panel.php" allowTransparency="true" width="100%" height="450px" scrolling="no" style="background: #ffffff url(http://mentalized.net/activity-indicators/indicators/simon-claret/progress_bar.gif) no-repeat 50% 5%;"></iframe> 
```

# string - 在 O(mn) 中解决字符串对齐问题

> ID：10282969
> 
> 赞同：1
> 
> 时间：2012-04-23T14:57:30.293
> 
> 标签：string, algorithm

我需要用 O(nm) 解决以下问题。n = |T| 米 = |P| 其中 T,P 两个字符串 f 是一个评分函数。

该算法应返回 T 的子字符串 T'，使得 score(P,T') 值为最大值。

score(A,B) 是根据 f 对齐 A 和 B 的最大值。

我知道如果 f 是离散的（意味着矩阵的对角线的权重不大于常数 C，水平和垂直边缘为 0 或其他常数），我可以从 DIST 矩阵中得到它，该矩阵是 Monge 矩阵，但在这种情况下， f 是从 (sigma * {-})x(sigma * {-}) 到 R 的一般函数（其中 '-' 是一个间隙）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:28:42.117

您已经注意到有几种算法可以计算图中的最短路径，其弧是 (i, j) → (i + 1, j), (i + 1, j + 1), (i, j + 1 ）。该算法的最一般形式是允许单独指定每个弧长，具有以下含义。

*   (i, j) → (i + 1, j)：将 P 的第 (i+1) 个字母与 T 中的间隙对齐的成本
*   (i, j) → (i + 1, j + 1)：将 P 的第 (i+1) 个字母与 T 的第 (j+1) 个字母对齐的成本
*   (i, j) → (i, j + 1)：将 P 中的间隙与 T 的第 (j+1) 个字母对齐的成本

成本可以是负数。为了解决您的子字符串问题，使所有 (i, j) → (i, j + 1) 弧的成本为零，以便我们可以从 T 中删除而不会受到惩罚。

# .net - COM 互操作加载程序集时 AppDomain 的路径

> ID：10282972
> 
> 赞同：1
> 
> 时间：2012-04-23T14:57:36.163
> 
> 标签：.net, reflection, com, appdomain

为 COM 互操作注册的 .NET 程序集与一些应在程序集中加载类型的反射代码相结合会导致一些奇怪的行为。我已经分析了调试器中发生了什么，并且我已经搜索了网络以找到解决方案。我找到了很多有帮助的文章，但没有什么能让我完全解决问题。

**问题概述**

A 有一个不是 .NET 的 exe 文件（在我的情况下是 VB6 应用程序）。它位于文件夹 A 中。
我在文件夹 B 中有一些 .NET dll。其中一个是 COM dll。
exe 文件实例化 COM .NET 程序集的 .NET 对象的 COM 实例。然后 AppDomain 的主路径是文件夹 A，但我希望它是文件夹 B。因为它是文件夹 A，所以我的 .NET 代码中的一些反射类型加载失败。

**以下是详细信息：**

我有一个 VB6 应用程序。exe 文件位于文件夹 A 中。在其中我有一个 VB6 语句

```
Set DotNetE2 = CreateObject("MyDotNet.E2") 
```

这将创建一个为 COM 互操作注册的 .NET 类的实例。.NET 类的标头如下所示：

```
namespace MyDotNet.E2.COM
{
   [ComVisible(true)]
   [Guid("776FF4EA-2F40-4E61-8EF3-08250CB3712B")]
   [ProgId("MyDotNet.E2")]
   [ClassInterface(ClassInterfaceType.AutoDual)]
   public class E2
   { 
```

我的 .NET 程序集“MyDotNet.E2.COM.dll”位于文件夹 B 中。该程序集引用了位于同一文件夹中的其他两个名为 E3 和 E4 的 .NET 程序集。E3 没有对 E4 的引用。我是能够按预期执行这些程序集中的代码，所以引用是好的。到目前为止一切都很好。现在，我在 E3 中有一些代码试图对 E4 中的类型进行一些反射。这失败了。

这是代码：

```
string dotnetPath = Path.GetDirectoryName(
                 Assembly.GetExecutingAssembly().Location);
string mainDir = AppDomain.CurrentDomain.SetupInformation.ApplicationBase;
string otherDirs = AppDomain.CurrentDomain.SetupInformation.PrivateBinPath;

Assembly assembly = Assembly.LoadFrom(Path.Combine(dotnetPath, "E4.dll"));
Type mytype = assembly.GetType("MyDotnet.E4.MyForm"); 
```

**观察**

dotnetPath 与 mainDir 不同。
我的类型为空。预期结果是一个类型实例。
如果我将 exe 文件连同 .NET 程序集一起移动到文件夹 B，它就可以工作。那么 dotnetPath 和 mainDir 是一样的。
如果我在 E2 而不是 E4 中执行反射代码，它可以工作，即使 dotnetPath != mainDir.
但在我所概述的场景中，它不起作用。

通过在配置文件中指定这些文件夹，我发现了一些关于将其他文件夹添加到 PrivateBinPath 中的 AppDomain 的提示。但我在这方面没有成功。我试图向我的 COM .NET 文件和我的 VB6 exe 文件添加一个配置文件，但我的 PrivateBinPath 属性没有发生任何事情。这是我尝试添加的配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
     <probing privatePath="..\..\FolderB"/>
    </assemblyBinding>
  </runtime>
</configuration> 
```

不要让我重组我的程序集和类型。该项目相当复杂，这是最好的架构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:34:51.123

我设法自己解决了这个问题。关键是在系统无法解析程序集时触发的 AssemblyResolve 事件。这里解释：http: [//msdn.microsoft.com/library/system.appdomain.assemblyresolve](http://msdn.microsoft.com/library/system.appdomain.assemblyresolve)

我必须使用此事件似乎是 .NET 框架中的一个错误，但结果证明这种解决方法相当不错。

```
string dotnetPath = Path.GetDirectoryName(
                                   Assembly.GetExecutingAssembly().Location);
string mainDir = AppDomain.CurrentDomain.SetupInformation.ApplicationBase;

if (!mainDir.Equals(dotnetPath, StringComparison.CurrentCultureIgnoreCase))
{
   // This will happen if .NET process is fired 
   // from a COM call from another folder.
   // Solution: an event is fired if assembly-resolving fails.
   AppDomain.CurrentDomain.AssemblyResolve += 
                         new ResolveEventHandler(CurrentDomain_AssemblyResolve);
} 
```

事件处理程序相当简单：

```
Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
{
   foreach (Assembly assembly in AppDomain.CurrentDomain.GetAssemblies())
   {
      if (assembly.FullName == args.Name) return assembly;
   }
   return null;
} 
```

# asp.net - 如何将 DataTable 存储在配置文件中

> ID：10282974
> 
> 赞同：0
> 
> 时间：2012-04-23T14:57:43.270
> 
> 标签：asp.net, profile, provider, user-profile, personalization

如何将 DataTable 存储在配置文件中（**Personalzition 提供程序**，自定义类型）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:25:22.977

数据表具有`WriteXml`和`ReadXml`功能。

因此，您可以存储和检索 XML 字符串。

# orm - 一张表，一个类的ORM技术或概念框架？

> ID：10282977
> 
> 赞同：0
> 
> 时间：2012-04-23T14:57:55.187
> 
> 标签：orm, mapping, entity, design-patterns

我想知道是否存在概念框架或记录技术来研究如何将实体类映射到数据库表？

在我使用 JPA（Java Persistance API）映射一个表 -> 一个实体类之前，这是：每个表的行由一个对象类表示。这是最常见/正确的方法吗？这些模式有特定的名称吗？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:01:45.123

One table to one class is called the "**Active Record**" pattern. One alternative pattern people use is the **Repository** pattern. **DDD** (Domain Driven Design) has the concept of Aggregate Roots which also plays in this space. You should be able to do some reading on that terminology. I am personally not in love with any of those patterns, they all have pros and cons.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:40:18.317

对我来说，理想的类与表关系没有配方、公式或模式。映射的关键在于它充当适配器层，将表结构与实体结构隔离开来。如果您同时设计应用程序和表格，我认为您应该设计表格以最大限度地减少往返行程，获取尽可能多的数据来补充您的实体。然后让您的映射器构建实体和任何适当的关联。这可能会导致您对表结构的非规范化程度比通常情况下要多一些。

# asp.net-mvc-3 - 实体框架，使用 Fluent API 与同一对象的两个多对多关系

> ID：10282980
> 
> 赞同：0
> 
> 时间：2012-04-23T14:58:03.927
> 
> 标签：asp.net-mvc-3, entity-framework, many-to-many

我正在尝试使用流利的 api 定义与同一对象的两个多对多关系。

这是简化的模型：

```
public class PurchaseRequisition
{
    [Key, ForeignKey("Transaction")]
    public int TransactionId { get; set; }
    public virtual ICollection<People> RequisitionedBys { get; set; }
    public virtual ICollection<People> AuthorizedSignatures { get; set; }
}

public class People
{
    [Key]
    public string Id{ get; set; }
    public string FullName { get; set; }
    public virtual ICollection<PurchaseRequisition> PurchaseRequisitionsForRequisitionedBys { get; set; }
    public virtual ICollection<PurchaseRequisition> PurchaseRequisitionsForAuthorizedSignatures { get; set; }
} 
```

这是流畅的api代码：

```
modelBuilder.Entity<PurchaseRequisition>()
.HasMany(a => a.RequisitionedBys)
.WithMany(b => b.PurchaseRequisitionsForRequisitionedBys)
.Map(x =>
{
    x.MapLeftKey("PurchaseRequisitionId");
    x.MapRightKey("RequisitionedById");
        x.ToTable("PurchaseRequisitionRequisitionedBy");
});

modelBuilder.Entity<PurchaseRequisition>()
.HasMany(a => a.AuthorizedSignatures)
.WithMany(b =>b.PurchaseRequisitionsForAuthorizedSignatures)
.Map(x =>
{
    x.MapLeftKey("PurchaseRequisitionId");
    x.MapRightKey("AuthorizedSignatureId");
    x.ToTable("PurchaseRequisitionAuthorizedSignature");
}); 
```

我想要的是生成两个单独的链接表，但 EF 生成的是 People 表中 PurchaseRequisition 的两个外键列和 PurchaseRequisition 字段中 People 的 1 个外键列。

谁能告诉我可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T14:25:58.760

问题已解决。

我错误地认为我的数据库初始化程序代码会删除并重新创建数据库，因为我对模型类进行了更改并且我的初始化程序类扩展了 DropCreateDatabaseIfModelChanges。

正如 Slauma 所建议的那样，即使模型已经更改，也没有达到流畅的 api 代码。我正在使用 SetInitializer() 方法设置初始化程序，并且此代码仅在我第一次使用上下文实例访问数据库时运行。

# linux - 在 Angstrom Linux 上自动登录

> ID：10282981
> 
> 赞同：0
> 
> 时间：2012-04-23T14:58:05.190
> 
> 标签：linux, login, beagleboard, angstrom-linux

什么是让 Angstrom Linux 在不要求登录的情况下启动并打开 shell 的干净方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T22:45:44.123

这个简单的答案花了我几个小时才找到。对于那些没有 /etc/inittab 的人，以下内容对我有用。在

```
/etc/systemd/system/getty.target.wants/serial-getty@ttyO2.service 
```

换行

```
ExecStart=-/sbin/getty 115200 %I 
```

至

```
 ExecStart=-/sbin/getty -a USERNAME 115200 %I 
```

我通过阅读 /etc/inittab 中的 getty 部分自己弄清楚了这一点，这使我在我的系统上找到了 ExecStart，快速的谷歌搜索让我找到了[https://unix.stackexchange.com/questions/42359/how -can-i-autologin-to-desktop-with-systemd](https://unix.stackexchange.com/questions/42359/how-can-i-autologin-to-desktop-with-systemd)，它给了我 /sbin/getty 的自动登录语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T08:55:46.193

我找到了一个很好的方法来实现它。这对我来说适用于 Angstrom（在 Beagleboard xM Rev C4 上）。

1.  确保安装了 agetty（/sbin/agetty 是标准位置）。它应该包含在每个 Linux Angstrom 映像中。

2.  在任何位置创建脚本文件，例如 /home/root/autologin.sh。编辑它并添加以下内容：

    ```
    #!/bin/sh
    exec /bin/login -f root 
    ```

3.  使用命令使其可执行

    ```
    chmod a+x autologin.sh 
    ```

4.  编辑文件 /etc/inittab。注释掉（通过在开头添加“#”）以下行

    ```
    1:2345:respawn:/sbin/getty 38400 tty1 
    ```

并添加以下行：

```
 1:2345:respawn:/sbin/agetty -l /home/root/autologin.sh -n 38400 tty1 linux 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T15:04:34.727

我的答案是更通用的 linux。如果没有启动 getty 进程，您就没有密码登录。看着

```
/etc/inittab 
```

从这里开始一个 *getty 进程？删除此行并重新启动您的设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-09T03:39:46.183

```
1:2345:respawn:/bin/login -f root tty1 </dev/tty1 >/dev/tty1 2>&1 
```

为您的系统配置更改 tty1，例如）ttyO0、ttyS1 等。

# javascript - 不带元素的jQuery插件方法

> ID：10282983
> 
> 赞同：3
> 
> 时间：2012-04-23T14:58:10.900
> 
> 标签：javascript, jquery, jquery-plugins

我正在编写一个 jQuery 插件，其中我想编写的方法之一不会采用选择器参数，也不需要传递元素。我希望它可以通过`$.myMethod()`像内置`$.ajax()`方法这样的调用来使用。到目前为止，我已经尝试过类似的东西

```
$.fn.myMethod(options) {
     console.log("I've been called");
} 
```

这在我尝试时有效，`$('.a_selector').myMethod()`但在我尝试时无效`$.myMethod()`。

这是否可以通过 jQuery 插件实现，还是仅适用于内部函数。

此方法的目的是对存储在 jQuery.data 中的某些数据执行操作。我认识到他们 jQuery.data 与一个元素相关联，但在这种情况下，我已将其硬编码到 body 元素中，以便最终用户更轻松。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:02:22.767

作为成员的函数`$.fn`适用于 jQuery 对象，而不是`$`对象本身。如果你想创建这样的方法，你只需要写：

```
$.yourMethod = function() {
    // Do something.
}; 
```

现在你可以在没有 jQuery 对象的情况下调用它：

```
$.yourMethod(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:56:18.703

声明这种功能的一种复杂方式可以是

```
$.extend({myMethodA:function(){
                            //Do something
                            },
          myMethodB:function(){
                        //Do something else
                                }       
                 }); 
```

# javascript - 用 JS 即时替换文本

> ID：10282985
> 
> 赞同：0
> 
> 时间：2012-04-23T14:58:16.303
> 
> 标签：javascript

美好的一天！

现在我不是 JS 专家，但我现在如何使用它以及如何阅读它（大部分）。

我想做的是...

在表单元素中，我有通常的嫌疑人。但在一个文本区域中，我想要一种即时交换单词的方法。例如。

“... 这个和那个”

将被换成

“...这个 & ;（& 的 ascii 代码）那个”

对于其他一些 ascii 代码也是如此。

可以做到吗？谁能给我指个教程。

谢谢大家的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T15:03:12.890

替换本身只是 的一个例子`out = in.replace(/\band\b/g,"&amp;")`，但是你从哪里得到`in`以及你做什么`out`取决于你（除非你可以在你的问题中进一步详细说明）。

请小心您所做的事情 - 替换单词可能会很棘手并导致不良结果。以[这篇博文](http://www.codinghorror.com/blog/2008/10/obscenity-filters-bad-idea-or-incredibly-intercoursing-bad-idea.html)为例。我认为这很好地涵盖了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:30:55.977

您可以编写一个简单的函数，该函数接受一些 JSON，然后根据 JSON 替换文本。例子：

```
var theObj = {
    "and":"&amp;",
    "<":"&lt;",
    ">":"&gt;"
};

function replace( theString, myJSON ){

    for( prop in myJSON ){
         theString = theString.replace( \prop\g, myJSON[prop] );
    }
    return theString;
} 
```

这[应该](http://jsfiddle.net/dUe5t/2/)给你一个起点。

# javascript - 如何替换JS字符串中的所有\"？

> ID：10282991
> 
> 赞同：0
> 
> 时间：2012-04-23T14:58:31.803
> 
> 标签：javascript, regex, string, replace

如何将字符串中的所有内容替换`\"`为？`"`

我试过了，但它不起作用：`var foobar = ("foo\\\"bar\\\"foo").replace(/"\\\""/,'"');`

结果是`foo\"bar\"foo`，但应该是`foo"bar"foo`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T15:00:50.363

尝试`.replace(/\\"/g,'"');`- 正则表达式不需要引号，我很惊讶你得到任何结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T15:01:05.227

您不需要在 RegEx 模式中使用引号，`//`分隔符充当分隔符。

```
var foobar = "foo\\\"bar\\\"foo".replace(/\\"/g,'"'); 
```

为我工作。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-23T15:04:23.243

你需要修复你的正则表达式，你需要做

```
replace(/\\\"/g, "\"") 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T15:01:02.867

你的引用是错误的，你没有使用 g - 全局标志。它应该是：

```
var foobar = ("foo\\\"bar\\\"foo").replace(/\\"/g,'"'); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-23T15:02:07.287

尝试像这样定义它

```
var foobar = ("foo\\\"bar\\\"foo").replace(/"\\\""/g,'"'); 
```

请注意，`.replace`有一个**`/g`**使其成为全球性的

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T15:05:11.213

[jsfiddle](http://jsfiddle.net/ryanwfiorini/CcjkD/)

```
// initial string
var str = "AAAbbbAAAccc";

// replace here
str = str.replace(/A/g, "Z");
alert(str);
​ 
```

# ios - ios：读取汉字的html源码

> ID：10282993
> 
> 赞同：0
> 
> 时间：2012-04-23T14:58:33.753
> 
> 标签：ios, encoding

我正在尝试阅读和保存网站上的汉字！例如：html源代码有这一行：

`title="网络歌手`"

当我将其读取为 NSString 时，返回的值格式如下：

`\UT0212\UT0999`

类似的东西。我曾尝试使用 gb2312 和 utf-8 等编码器进行转换，但我不太了解确切的中文。有时我接近中文，但不是确切的单词。

任何帮助表示赞赏！

问候， 苏拉杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:02:22.520

[http://www.pinyin.info/tools/converter/chars2uninumbers.html](http://www.pinyin.info/tools/converter/chars2uninumbers.html)

我相信您必须将字符转换为 unicode ......类似于他们在上面的文章中所做的

# java - Java中HTTP-MMO游戏的问题

> ID：10282997
> 
> 赞同：-2
> 
> 时间：2012-04-23T14:58:39.613
> 
> 标签：java, http, jakarta-ee, singleton, mmo

我即将编写一个 MMO，使用以 JSON 响应的 HTTP 请求。

我是用 Java EE 风格编写的，希望移植到 Java EE 不会比它更难。但后来我发现我的几个 sinleton 的静态实例变量没有正确创建——类加载器在从 servlet 调用 SingletonClass.getInstance() 时生成了一堆。

我非常绝望，并认为添加@Singleton 描述会有所帮助。但事情并不那么容易。我的类在使用@EJB ClassName var 添加它们时根本不起作用。上下文查找也不起作用。

我尝试在 Eclipse、NetBeans 中开发，使用 Glassfish，尝试设置它，但没有任何帮助。我不知道该怎么办，现在真的很绝望。

我所需要的只是几个类，它们在加载应用程序时一直工作以处理游戏事件并保存记录的用户数据（分布在保存用户数据、怪物等的非 EJB 对象中），每个类都有一些定时事件记录的用户和使用 JSON 响应 HTTP POST 请求的能力。我什至不需要 ORM，我自己编写了所有查询，但仍然......必须工作的东西根本行不通。

我知道所有这些听起来很混乱且没有信息，但我不知道该怎么做——我的问题在哪里？也许，我应该填写 web.xml，或者使用不同的端口，或者飞向月球？或者只是改变编程语言？很抱歉您花时间阅读本文。

UPD。一些应用方案部分。包“服务器”中的前两个。

```
 @Startup
    @Singleton 
    public class DbWrapper 
```

处理所有数据库连接，DbConnectionPool 是非单例类，它处理 java.sql.Conneciton 池。

```
 @Startup
    @Singleton
    @DependsOn("DbWrapper")
    public class World 
```

是另一个处理所有游戏内事件的类，它包含已登录用户的 HashMap。用户和怪物类来自包“实体”（用户持有怪物列表）。

包“servlets”包含 HttpServlet 后代，注解 @WebServlet("/pathname")，尝试使用

```
 @EJB World world 
```

例如。但是诸如 world.getUser(id_user) 之类的东西根本行不通。

至于 JDBC - postgres jar 包含在 GlassFish 域的 /lib 中。

至于 JSON - 我使用在这里找到的 org.json：[https ://github.com/douglascrockford/JSON-java](https://github.com/douglascrockford/JSON-java)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:04:15.050

你应该*很少*使用单例（最好不要使用它们）。作为替代使用应用程序范围的bean（@Singleton bean 应该正常工作 - 他们应该使用实例变量，而不是静态变量）。

使用 Java EE 6，您还可以使用 CDI，因此如果您不需要 EJB 提供的附加功能（如自动事务划分、安全等），或者可以自己添加这些功能，则不必使用它们。

此外，您可以在 SE 应用程序中使用 CDI。但请记住，您需要定义 CDI bean 的范围（例如@Application、@Request 等），否则使用默认范围（@Dependant）会导致在每次访问时复制 bean。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T15:12:16.210

> 我发现我的几个单例的静态实例变量没有正确创建——类加载器在`SingletonClass.getInstance()`从 servlet 调用时生成了一堆。

首先，您应该向我们展示其中一个单例类的代码。您可能在实现中犯了导致此问题的错误。

确实，您可以在 servlet 框架中获得看似（正确实现的）单例类的多个实例。但事实上，它们并非表面上看起来的那样。实际发生的情况是您已经从多个类加载器加载了该类，或者是因为您有多个 Web 应用程序每个都加载该类，或者因为您正在重新部署您的 Web 应用程序并且之前的部署没有正确清理。

那么你能/能做些什么呢？

*   您可以使用依赖注入框架来配置您的 webapp，从而避免需要单例类。

*   您可以继续使用单例，但要找出您获得多个实例的原因，并解决该问题。

# asp.net-mvc - 我如何在条件下在 mvc3 中更改提交按钮文本？

> ID：10282998
> 
> 赞同：1
> 
> 时间：2012-04-23T14:58:49.783
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller

我有 mvc 3 应用程序，其中我在 Index.cshtml 视图上有一个输入表单。还有一个具有编辑、删除按钮的网络网格

根据这些操作链接，我需要更改我的提交按钮文本。我怎样才能在 homecontroller.cs 中实现这一点？对所有编辑、插入仅使用一个视图。

检查 homecontroller.cs 中的用户操作

```
public ActionResult Index(string userAction)
    {
       if (userAction == "Edit" )
        {

        }

        if (userAction == "Delete" )
        {

        }

    } 
```

查看代码。

```
<p>
            <input type="submit" value="Insert" />
</p> 
```

在具有编辑链接的 webgrid 上，在这种情况下删除我需要更改提交按钮文本。

```
@if (grid != null)
    {
        @grid.GetHtml(
                    tableStyle: "grid",
                    headerStyle: "head",
                    alternatingRowStyle: "alt",
                    columns: grid.Columns(
                                                grid.Column("", header: null, format: @<text>@Html.ActionLink("Edit", "Index", new { uid = (int)item.id, userAction = "Edit" })
        @Html.ActionLink("Delete", "Index", new { uid = (int)item.id, userAction="Delete" }, new { @class = "Delete" })</text>),
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:23:30.530

您可以将其存储`userAction`在`ViewData`或`ViewBag`从视图中访问它。

```
public ActionResult Index(string userAction)
{
    ViewBag.UserAction = userAction;
}

<input type="submit" value="@(ViewBag.UserAction == "X" ? "Y" : "Z")" /> 
```