# StackOverflow 问答 10629000-10629999

# javascript - 如何优化我的 if 语句或减少 if 语句？

> ID：10629001
> 
> 赞同：0
> 
> 时间：2012-05-17T02:06:07.737
> 
> 标签：javascript, jquery

```
if(varName1 <= 1 && varName1 > 0)
{
$('#id1').addClass('ClassName');
}

if(varName2 <= 2 && varName2 > 1)
{
$('#id1').addClass('ClassName');
$('#id2').addClass('ClassName');
}

if(varName3 <= 3 && varName2 > 2)
{
$('#id1').addClass('ClassName');
$('#id2').addClass('ClassName');
$('#id3').addClass('ClassName');
} 
```

所以基本上我想知道是否有更好的方法来使用更少的 if 语句（共有 8 个具有相同模式的语句）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:12:46.860

```
for (x = 1; x <= 3; x++) {
   if(varName[x] <= x && varName[x] > (x-1)) {
      $('#id[x]').addClass('ClassName');
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T02:09:13.313

将您的选择器组合在一个语句中

```
if(varName1 <= 1 && varName1 > 0)
{
  $('#id1').addClass('ClassName');
}
if(varName2 <= 2 && varName2 > 1)
{
  $('#id1,#id2').addClass('ClassName');
}
if(varName3 <= 3 && varName2 > 2)
{
  $('#id1,#id2,#id3').addClass('ClassName');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T02:42:23.390

完成任务的替代和最佳方法是将 if-else-if 替换为 switch 语句。您也可以使用三元，尽管它并没有太大的区别，只是代码大小会减少

switch( var ){ case 1: $('#id1').addClass('ClassName'); 休息;

```
case 2:
    $('#id1,#id2').addClass('ClassName');
    break;

case 3:
      $('#id1,#id2,#id3').addClass('ClassName');
      break;

default:
     break; 
```

}

请注意，在 switch case 中，如果要执行所有用例，则应省略 break 语句。在这里，这个代码片段将只执行特定的用例，当它遇到不匹配的用例时，它会中断并退出循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T03:29:27.417

```
var i = 0, $id;
while(i <= 3) {
    if(eval("varName" + i) <= i && eval("varName" + i) > (i - 1)) {
        $id = $("#id" + i).addClass("className");
    }
}

//But I recommend something like below (if that is your purpose):
$("div").each(function(_i, _self) {
    var $self = $(_self);
    if($self.hasClass("className")) {
        $self.addClass("className");
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-10T00:36:35.113

一种优雅的方法是使用不需要 if 语句的 hashmap 或数组查找。

```
function getClassName( id ){
    var cssClassMap = {0: "aClassName", 1: "bClassName", 2: "dClassName", 3: "eClassName"};
    var cssClassName = cssClassMap[id];

   return ( cssClassName !== undefined ) ? cssClassName : "not-found";
}

$("id"+varName).addClass( getClassName( varName ) ); 
```

**下面在 Chrome JS 控制台上进行测试** [![在此处输入图像描述](../Images/21c829b0c634b4c6b7ee9397c9c642e9.png)](https://i.stack.imgur.com/LDv6u.png)

# python - Python 的垃圾回收能否保证在所有情况下回收循环引用的对象？

> ID：10629004
> 
> 赞同：3
> 
> 时间：2012-05-17T02:06:32.687
> 
> 标签：python, garbage-collection, circular-reference

这个问题是我之前提出的一个问题的扩展：[Python 委托模式 - 如何避免循环引用？](https://stackoverflow.com/questions/10613102/python-delegate-pattern-how-to-avoid-circular-reference)阅读回复后，我决定澄清我的问题，但被要求单独发布。

开始：

1.  Python 文档中的一段（转载如下）指出，循环引用的对象不能保证垃圾收集。我在[这里](http://www.electricmonk.nl/log/2008/07/07/python-destructor-and-garbage-collection-notes/)找到的一篇文章暗示了同样的事情。但是对我之前的问题的答复不同意。那么，我是否误解了这篇文章，或者我错过了更多细节？
2.  我想使用弱引用，正如 Alex Martelli 对[我是否应该担心 Python 中的循环引用？](https://stackoverflow.com/questions/2428301/should-i-worry-about-circular-references-in-python)会完全避免在他的回复中提到的垃圾收集循环引用对象的开销吗？如果是这样，它是如何工作的？

相关的 Python 文档表明 Python 文档中的以下段落存在冲突：

> CPython 实现细节：CPython 目前使用引用计数方案，对循环链接的垃圾进行（可选）延迟检测，该方案在大多数对象变得无法访问时立即收集它们，但**不能保证收集包含循环引用的垃圾**。有关控制循环垃圾收集的信息，请参阅 gc 模块的文档。其他实现的行为不同，CPython 可能会改变。当对象变得无法访问时，不要依赖于立即完成对象（例如：始终关闭文件）。

可以在此处找到原始形式的段落：http: [//docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)粗体设置是我的。

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:20:12.150

我认为，不能*保证*收集具有循环引用的对象的最重要原因是，根据设计，*如果 Python 定义了一个**方法，则**从不*收集具有循环引用的对象。有一个非常[简单的原因](http://docs.python.org/library/gc.html#gc.garbage)： *`__del__`*

 **> Python 不会自动收集此类循环，因为通常 Python 无法猜测运行这些`__del__()`方法的安全顺序。

我不愿意说这是可能无法检测到具有循环引用的不可访问对象的*唯一原因。*可能有一些不寻常的情况可能会破坏 GC 的循环检测机制。但除非您`__del__`为您的对象之一定义，否则您*可能*没问题。不用担心，如果您发现性能问题，请使用 GC 广泛的调试选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:17:13.707

当它说不能保证收集循环引用时，这正是它的意思。每当您的数据结构包含循环引用时，引用计数将始终非零，这意味着仅引用计数不足以决定何时删除它们。另一方面，在到达每个范围的末尾后查找*所有*循环引用将是耗时的——至少可以这么说。它将涉及分析具有非零引用计数的所有对象的关系。

也就是说，一般来说，我不认为你会有问题。对于轻量级脚本，您可以忽略它。对于其他人，您仍然需要在范围结束时进行一些清理工作（关闭文件，甚至删除循环引用），就像在 C 中一样，但它仍然不像 C 那样令人兴奋。

如果它成为一个问题，只需在完成每个数据对象之前删除循环引用。**

# sql - 检查约束内的子查询

> ID：10629006
> 
> 赞同：0
> 
> 时间：2012-05-17T02:06:40.333
> 
> 标签：sql, check-constraints

如果我有一个人表，有 2 个字段（姓名和地址）。

```
create table PERSON  (
NAME                 VARCHAR2(50),
ADDRESS              VARCHAR2(100)  
); 
```

我如何确保所有具有相同地址的人都有不同的名字。

我试图使用`CHECK`约束，网上有一些示例在 create table 语句中使用子查询，但出现 SQL 错误：

> ORA-02251: 此处不允许子查询

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:09:53.100

您不能将行保留在检查约束中。您可以为此目的使用触发器。

# xcode - 包含 头文件 - 找不到文件？

> ID：10629008
> 
> 赞同：5
> 
> 时间：2012-05-17T02:07:08.533
> 
> 标签：xcode, stl, header-files

我在我的项目的一个文件中使用字符串流，并且似乎无法包含它们的头文件：（`#include <sstream>`）。给出的错误信息是：

```
/Users/lee/..../fasta_reader.cpp:13:10: fatal error: 'sstring' file not found [2]
#include <sstring>
         ^ 
```

包括许多其他 SC++L 和 STL 标头，并且都可以从预期的位置正确找到：`/Developer/SDKs/MacOSX10.7.sdk/usr/include/c++/4.2.1`.

这是我已验证的内容：

*   包含目录配置：其他标准头文件，例如从同一位置包含在内。
*   头文件权限：sstring和string拥有相同的权限，并且在同一个位置。字符串被成功包含，但不是字符串
*   将#include 位置移动到所有其他头文件之前或之后
*   干净的构建/重新编译没有帮助。

我还应该尝试什么？

编辑：找到解决方案 - 我输入错误`#include <sstring>`而不是`#include <sstream>`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-12T05:13:16.183

我打错`#include <sstring>`了，而不是`#include <sstream>`. 在一个小错误上浪费了很多时间。

# c++ - 取消引用刚刚插入的 std::map 值有时会导致访问冲突

> ID：10629011
> 
> 赞同：3
> 
> 时间：2012-05-17T02:07:58.580
> 
> 标签：c++, pointers, insert, dereference, stdmap

Label_Info 只是一个带有一些 int 成员的普通类：

```
class Label_Info {
public:
    Label_Info();
    unsigned int x, x1, x2, y, y1, y2, size;
};

Label_Info::Label_Info() {
    this->x = this->y = this->size = 0;
    this->x1 = this->y1 = -1;
    this->x2 = this->y2 = 0;
} 
```

然后，用 gcc 编译：

```
std::map<unsigned int, Label_Info> labels_info;
unsigned int label = 1;
Label_Info *label_info = &labels_info[label]; 
```

很少，我在第三行被访问冲突阻止。据我了解，std::map 为键 1 插入了一个新的 Label_Info，然后指向它的指针是 label_info。然后（至少当它不崩溃时！）我可以像这样访问成员：

```
label_info->x = 25; 
```

... 等等。我可能没有收到 1,000,000 次插入的访问冲突，然后，突然，砰。我检查了通常的嫌疑人：32 位阈值和内存不足，当它引爆时，插入物上的一切看起来都正常。我知道这是一个插入，因为我可以看到它通过调试器中的 STL std::map 代码，但我无法很好地阅读它来判断它试图访问什么以进行插入。

那么这段代码是坏消息吗？任何比我更了解 C++ 的人的见解将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:44:03.837

您向我们展示的代码应该非常好。但是，几乎可以肯定，您没有向我们展示的其他代码要么直接导致问题，要么更可能只是在某些情况下导致内存损坏，并且当它恰到好处时，地图就会中断。

如果您可以在 Linux 上编译您的代码库，则很有可能`valgrind`可以为您找到内存错误。

# javascript - 为什么我的 jQuery 函数会在 IE 8 中导致“堆栈溢出”错误？

> ID：10629013
> 
> 赞同：6
> 
> 时间：2012-05-17T02:08:21.313
> 
> 标签：javascript, jquery

我有一个简单的函数会在 IE 8 中导致 Stack Overflow 错误。尽管我没有测试 IE 7 或 6，但在任何其他浏览器中似乎都不会出现此问题。

确切的错误如下： -

```
 SCRIPT28: Out of stack space 
 jquery.min.js, line 2 character 7498
 SCRIPT2343: Stack overflow at line: 2 
```

有问题的功能：

```
function switchImage(size, objid, prefix, fullimage){

    if(size !== 'full'){
        var image = prefix + size + '/' + size +'_' + fullimage;
    }
    else {
        var image = prefix + size + '/' + fullimage;
    }

    $('#' + objid).data('type', size)
        .append('<img id="preload" src="' + image + '" style="display:none;" />')
            .find('#preload').load(function(){
                $('#' + objid).find('img').attr('src', image);
                $(this).remove();
            });
} 
```

为了概述用例，我将解释这个函数的目的：

当用户调整图像大小（使用 jqueryUI 调整大小）时，宽度/高度会在另一个函数中进行比较。

一旦图像增长到一定大小，然后调用此函数，如您所见，将隐藏`<img>`元素附加到 DOM 具有图像的更高分辨率版本的 'src' 属性（或者如果图像正在由用户缩小。

一旦它被加载，可见元素的 src 属性将被更新，隐藏元素被移除。

这证明了图像的出色动态切换，因为用户调整它们的大小，在整个过程中保持图像质量良好......

我似乎无法弄清楚是什么导致了 IE 8 中的问题。删除此函数后不会发生错误，尽管存在错误，但该函数仍然可以正常工作（尽管在 IE 8 中调整大小的性能仍然很差）。

任何帮助将不胜感激。

**更新：**我似乎已经通过将函数重写为以下内容来解决原始问题：-

```
function switchImage(size, objid, prefix, fullimage){

    var $el = $('#' + objid);

    if(size !== 'full'){
        var image = prefix + size + '/' + size +'_' + fullimage;
    }
    else {
        var image = prefix + size + '/' + fullimage;
    }

    $el.data('type', size);

    $('<img id="preload" src="' + image + '" style="display:none;" />')
        .appendTo($el)
            .one('load', function(){
                $('#' + objid).find('img').attr('src', image);
                    $(this).remove();
                });
} 
```

如您所见，唯一真正的区别是我使用 .appendTo() 而不是 .append() 以及使用 jQuery .one() 方法来确保加载事件只发生一次。虽然由于元素随后被直接删除，但我不明白为什么这会产生任何影响。

我真的很想看看是否有人可以对此有所了解，以便我可以学习如何在将来避免此类问题。干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T20:51:20.697

如果您没有`$(this).remove()`. 本质上，您所做的是将`src`属性设置为**所有** `img`标签，包括预加载图像本身。（替换`$(this).remove()`为`console.log('loaded')`并在 Firebug 中无限循环观看）

我猜想在 IE8 中，一旦属性也设置为预加载图像，它会在执行下一行（解释堆栈溢出）**之前**`$(this).remove()`首先调用您的“加载”事件处理程序，而其他浏览器可能首先完成执行首先是整个函数，从而删除了预加载图像，从而防止了无限循环。（这只是一个猜测）

初始版本的猴子补丁将使用`.find('img:not(#preload)')`而不是仅`.find('img')`.

您的补丁还可以防止无限循环，因为`.one()`确保它只运行一次。

但最终我会将函数重构为以下内容：

```
function switchImage(size, objid, prefix, fullimage){

    var $el = $('#' + objid),
        $image = $el.find('img'),
        $preload = $('<img>');

    if(size !== 'full'){
        var image = prefix + size + '/' + size +'_' + fullimage;
    }
    else {
        var image = prefix + size + '/' + fullimage;
    }

    $el.data('type', size);

    $preload
        .on('load', function () {
            $image.attr('src', image);
        })
        .attr('src', image);
} 
```

另请注意，预加载图像实际上不需要显式附加到 DOM 以达到您的目的。

# javascript - .change 循环中的函数

> ID：10629014
> 
> 赞同：0
> 
> 时间：2012-05-17T02:08:41.183
> 
> 标签：javascript, jquery

无论如何将一个`.change`函数放入for循环而不是将这个函数写出4次，因为我需要这个相同的函数但是使用`#room_Children1,2,3 and 4`and`.room#1,2,3 and 4`

```
$("#room_Children1").change(function () {
            switch ($("#room_Children1").val()) {
                case "1":
                    $(".room#1").children().next().next().first().show();
                    $(".room#1").children().next().next().next().first().hide();
                    $(".room#1").children().next().last().hide();
                    break;
                case "2":
                    $(".room#1").children().next().next().first().show();
                    $(".room#1").children().next().next().next().first().show();
                    $(".room#1").children().next().last().hide();
                    break;
                case "3":
                    $(".room#1").children().next().next().first().show();
                    $(".room#1").children().next().next().next().first().show();
                    $(".room#1").children().next().last().show();
                    break;
                case "0":
                    $(".room#1").children().next().next().hide();
                    break;
                default:
                    alert("You cheated");
                    break;
            }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:13:26.203

```
$.each([1,2,3,4], function(i, num) {
    var $roomChildren = $("#room_Children" + num);
    $roomChildren.change(function () {
        var $room = $(".room#" + num);
        switch ($roomChildren.val()) {
            case "1":
                $room.children().next().next().first().show();
                $room.children().next().next().next().first().hide();
                $room.children().next().last().hide();
                break;
            case "2":
                $room.children().next().next().first().show();
                $room.children().next().next().next().first().show();
                $room.children().next().last().hide();
                break;
            case "3":
                $room.children().next().next().first().show();
                $room.children().next().next().next().first().show();
                $room.children().next().last().show();
                break;
            case "0":
                $room.children().next().next().hide();
                break;
            default:
                alert("You cheated");
                break;
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:15:26.453

您不需要 for 循环。您在绑定了更改功能的元素的 Id 中拥有所需的所有数据。基本上从 ID 末尾提取数字，并在更改函数本身中使用此数值。

```
$("#room_Children1, #room_Children2, #room_Children3, #room_Children4").change(function () {
  var $this = $(this);
  var roomNumber = $this.attr("id")[$this.attr("id").length -1];
  switch ($this.val()) {
    case "1":
      $(".room#" + roomNumber).children().next().next().first().show();
      $(".room#" + roomNumber).children().next().next().next().first().hide();
      $(".room#" + roomNumber).children().next().last().hide();
      break;
    case "2":
      $(".room#" + roomNumber).children().next().next().first().show();
      $(".room#" + roomNumber).children().next().next().next().first().show();
      $(".room#" + roomNumber).children().next().last().hide();
      break;
    case "3":
      $(".room#" + roomNumber).children().next().next().first().show();
      $(".room#" + roomNumber).children().next().next().next().first().show();
      $(".room#1").children().next().last().show();
      break;
    case "0":
      $(".room#" + roomNumber).children().next().next().hide();
      break;
    default:
      alert("You cheated");
      break;
  }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T02:16:19.617

将整个块放入函数中：

```
function foo(id) { // choose a better function name, can't think of one at the moment :s
        var classId = '.room#' + id;
        switch ($('#room_Children' + id).val()) {
            case "1":
                $(classId).children().next().next().first().show();
                $(classId).children().next().next().next().first().hide();
                $(classId).children().next().last().hide();
                break;
            case "2":
                $(classId).children().next().next().first().show();
                $(classId).children().next().next().next().first().show();
                $(classId).children().next().last().hide();
                break;
            case "3":
                $(classId).children().next().next().first().show();
                $(classId).children().next().next().next().first().show();
                $(classId).children().next().last().show();
                break;
            case "0":
                $(classId).children().next().next().hide();
                break;
            default:
                alert("You cheated");
                break;
        }
} 
```

然后

```
$("#room_Children1, #room_Children2, #room_Children3, #room_Children4")
   .change(function() {
      var id = $(this).attr('id').replace('room_Children', '');
      foo(id);
   }); 
```

# javascript - 这第二场比赛是从哪里来的？

> ID：10629018
> 
> 赞同：0
> 
> 时间：2012-05-17T02:09:42.140
> 
> 标签：javascript, regex, string-matching

我有这段代码，当我删除`g`lobal 标志时，它匹配一个额外的`fox`：

```
var str = "...brown #fox jumped...";

var arr1 = str.match(/#([^\s]+)/g); //["#fox"]
var arr2 = str.match(/#([^\s]+)/); //["#fox", "fox"]

console.log(arr1.join(", ")); //#fox
console.log(arr2.join(", ")); //#fox, fox 
```

[[（代码来源）](https://stackoverflow.com/questions/10628274/in-javascript-how-can-i-get-the-tags-of-a-string-into-an-array/10628284#comment13776372_10628284)]

## [演示](http://jsfiddle.net/y9er8/)

我不知道发生了什么，欢迎任何启发我的东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T02:11:33.243

第一项是匹配*整个正则表达式*的字符串。所有接下来的项目都是大括号内匹配的对应值`(...)`

PS：`[^\s]`可以写成`[\S]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T02:20:22.413

第二个`fox`实际上并不匹配。这是一个捕获的组。默认情况下，括号构成一个捕获组。所以在你的例子中，`fox`括号内匹配的是什么，而`#fox`整个匹配是。

要编写没有捕获组的正则表达式，请执行以下操作：

```
#\S+ 
```

您还可以使用以下语法指定非捕获组：

```
#(?:\S+) 
```

全局标志阻止捕获组捕获，因为如果设置了全局标志，字符串匹配函数不会获取捕获的组。Regex exec 函数将获取捕获组，如[本问答](https://stackoverflow.com/questions/844001/javascript-regex-and-submatches)中所述。

# algorithm - 简单算法分析

> ID：10629019
> 
> 赞同：3
> 
> 时间：2012-05-17T02:09:43.683
> 
> 标签：algorithm, complexity-theory, analysis

我正在尝试将算法降低到至少 O(n^(3/2)) 复杂度。这是算法：

```
function( string s, int n )
{
    bool result = false;
    int position = 0;
    for( int i = 0; i < n/2; i++ )
    {
        position = 0;
        for( int j = i+1; j < n; j++ )
        {
            if( s[j] != s[position] ) break;        
            if( j == n ) result = true;
            if( position == i ) position = 0;
            else position++;        
        }
        if(result) break;       
    }
    return result;
} 
```

第一个 for 循环将迭代 n/2 次，即 O(n) 复杂度。我需要让内部 for 循环最多为 O(sqrt(n))，从而使整个算法具有 O(n^(3/2)) 复杂度。我很难弄清楚嵌套的 for 循环是否是我需要的正确复杂性。

**注意：**
`n`是字符串的大小。该函数主要检查字符串 s 中是否出现重复模式。s 中的唯一字符是`"0"`和`"1"`。例如，如果字符串是`"001001"`，则模式是`"001"`并且出现两次。字符串也是偶数。话虽如此，语法和功能与这个问题无关。所有基本操作都被认为需要 O(1)（恒定）时间，这几乎是这段代码的全部内容。

**注2：**
我这样做是为了家庭作业。但是作业问题只是让算法正常工作，我已经做到了。降低复杂性只是额外的练习。

任何帮助或指导将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T12:31:25.250

这很容易，只需检查长度是否除以总长度（它必须，如果 L 不除总长度，则字符串不能是长度 L 的重复模式）并且如果不运行内部循环它没有...除数的上限是 2sqrt(n)，所以这保证了 O(Nsqrt(N))。

如果你想知道为什么，一个数字可以有的最大除数是每个数字直到 sqrt(n)，然后对于每个数字 x，N/x。所以在 2sqrt(N) 以下。

当然，数字在现实中的除数要少得多，除了 12 实际上具有所有除数：1、2、3（每个数字都达到 sqrt）、12/1、12/2、12/3（倒数）。

有 2 个内部循环，但一个运行 L 次，另一个运行 N/L 次，因此内部循环为 O(N)。

```
 static bool f(string s)
    {
        int n = s.Length;
        for (int l = n / 2; l >= 1; l--)
        {
            if (n % l != 0) continue;
            bool d = true;
            for (int o = 0; o < l; o++)
            {
                char f = s[o];
                for (int p = l; p < n; p += l)
                    if (s[p + o] != f) d = false;
            }
            if (d == true) return true;
        }
        return false;
    } 
```

关键线是：

```
if (n % l != 0) continue; 
```

否则它将是 O(N^2)。

虽然外环乍一看似乎是 N/2，但从数学上可以保证它小于 2sqrt(N)。您还可以通过在几百万个字符的字符串上运行它来看到 - 它会很快工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T02:28:35.703

我认为您的内部循环不能降低到 O(sqrt(n)) 因为您必须将字符串开头的所有字符与特定索引 i 中的字符进行比较，该索引的值由外部循环控制。

# php - 加载 php 文件是否算作 HTTP 请求？

> ID：10629021
> 
> 赞同：2
> 
> 时间：2012-05-17T01:59:44.220
> 
> 标签：php, http, codeigniter

例如在 codeigniter 中，您可以使用：

```
<?php $this->load->view('some_php_file'); ?> 
```

如果我有多个这样的负载，每个都算作一个 http 请求，因为它正在加载一个外部文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:09:22.753

HTTP 请求是指您使用 HTTP 协议来请求文档。该代码看起来只是将来自同一服务器的另一个 PHP 文件包含到正在处理的 PHP 脚本中，因此这不是 HTTP 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T13:32:02.200

CodeIgniter 是一个[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller "模型视图控制器") Web 应用程序框架，当您使用

`$this->load->view('name');`

您告诉框架从服务器的硬盘驱动器中打开包含视图（MVC 的 V）的文件，并将其包含在最终的客户端响应中。

所以[在 CodeIgniter 中加载视图](http://codeigniter.com/user_guide/general/views.html "视图：CodeIgniter 用户指南")时没有 HTTP 请求。

# ruby-on-rails - ror export csv 带来严重的性能问题

> ID：10629026
> 
> 赞同：0
> 
> 时间：2012-05-17T02:09:56.587
> 
> 标签：ruby-on-rails, performance, fastercsv

```
export = FCSV.generate(:col_sep => l(:general_csv_separator)) do |csv|
..
end

format.csv {send_data(export), :type => 'text/csv;header=present',:filename => 'export.csv') } 
```

我想导出大量数据。但是它带来了严重的性能问题，并且填满了我的记忆。有更好的导出 csv 的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:55:56.680

FCSV 与 FasterCSV 相同，对吧？

处理内存的2条建议：

1.  将输出写入临时文件，然后发送。这样你就不需要记忆中的全部内容
2.  将输出直接流式传输给用户，而不是在内存中构建。例如，请参阅此问题的已接受答案：[Streaming CSV Download from Rails 3.2 app](https://stackoverflow.com/questions/9875352/streaming-csv-download-from-rails-3-2-app)

如果生成需要太多时间来执行，那么您将不得不分析代码然后尝试改进它......或者，将生成作为后台任务进行并允许用户稍后获取它。

# macos - OS X、Cocoa：当网络连接可用时，如何向应用发出信号？

> ID：10629034
> 
> 赞同：1
> 
> 时间：2012-05-17T02:11:29.423
> 
> 标签：macos, cocoa

我刚刚注意到，只要网络连接可用， [Textual](http://www.codeux.com/textual/)就会巧妙地将我重新连接到我配置的任何 IRC 服务器。

如何向应用程序发出连接已启动并正在运行的信号？我半猜测/半希望客户端不会被迫不断轮询并且能够接收信号/事件。

它是如何完成的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:20:43.490

你可以使用这个[`SCNetworkReachability`](https://developer.apple.com/library/mac/documentation/SystemConfiguration/Reference/SCNetworkReachabilityRef/Reference/reference.html#//apple_ref/doc/uid/TP40007260)类。

# python - 如何避免列表索引超出范围

> ID：10629037
> 
> 赞同：0
> 
> 时间：2012-05-17T02:11:54.237
> 
> 标签：python

```
def most_popular_guests(file_in):
    f=file(file_in,'r')
    listoflines=f.readlines()
    D={}
    dict={}
    title=''

    for lines in listoflines:
        if (lines.isupper()):
            title=lines
        else: 
            lines=lines.split(":")
            names=(lines[1]).split(",")
        for name in names:
            if D.has_key(name):
                D[name].append(Show_Appearance(title,lines[0]))
            else:
                D[name]=[Show_Appearance(title,lines[0])]
                break

    dict=longest(D)

def longest(D):    
    max=0
    d={}
    for name in D.keys():
        value = D[name]
        if max<len(value):
            max=len(value)

    for keys in D.keys:
        value=D[keys]
        if len(value)==max:
            d[key]=value

    return d 
```

我试图找到一本字典，其中最常出现的人作为键，该人的节目列表作为值。保持此列表索引超出范围错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:51:51.653

脚本的一般问题是它做出了错误的假设并且没有准备好处理假设结果不正确的情况:)

更具体地说，`lines.split(":")`不能保证返回至少 2 个元素长的列表，而其余代码只是盲目地假设访问行 [0] 和行 [1] 是安全的。

具体如何处理取决于您的目标——您可能希望忽略此类输入、停止脚本或记录警告。像这样的东西会跳过格式错误的行：

```
 lines=lines.split(":")
        if len(lines) < 2:
            print "Woops, bad line: %s" % lines
            continue 
```

# java - 为什么 PrintWriter 可以输出到 Process，而 BufferedWriter 不行？

> ID：10629044
> 
> 赞同：0
> 
> 时间：2012-05-17T02:12:50.467
> 
> 标签：java, linux, terminal

我有类似于以下与 Java 中的 gdb 交互的代码。我使用 gdb 启动进程，然后获取进程的流。我有一个线程不断读取进程的输出（使用`procOut`）并将其打印到屏幕上，然后我使用`procIn.println("some_command")`-向 gdb 发送命令

```
Process proc = new ProcessBuilder("gdb").start;

procOut = new BufferedReader(new InputStreamReader(proc.getInputStream()));
procErr = new BufferedReader(new InputStreamReader(proc.getErrorStream()));
procIn = new PrintWriter(new BufferedWriter(new OutputStreamWriter(proc.getOutputStream()))); 
```

但是，如果我更改`procIn`为 BufferedWriter -

```
procIn = BufferedWriter(new OutputStreamWriter(proc.getOutputStream())); 
```

并使用`procIn.write("some_command")`，它不起作用，gdb 没有得到输入。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:15:20.477

您必须在 BufferedWriter 上执行 flush() 以确保它熄灭。

# sql-server-2008 - Sql Server 2008 的实时复制

> ID：10629045
> 
> 赞同：1
> 
> 时间：2012-05-17T02:12:52.503
> 
> 标签：sql-server-2008, database-replication

我有一个 SQL Server 2008 R2 数据库实例和一些从各种 FTP、SFTP 源收集数据的数据收集脚本。现在我想重新安装这个系统，但我无法在新的远程位置获取这些 FTP 提要。我正在寻找一种最简单的方法来在新的远程机器上实时复制这个数据库。我知道我可以想出一些脚本来执行此操作，但我特别在寻找一种解决方案，它可以让我使用 SQL Server 2008 的某些功能来实现这一点。

简而言之，我需要的是位置 B 的新数据库，它始终与位置 A 的数据库同步（实时）。SQL Server 的任何功能都可以让我实现这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:51:45.217

sql server 有三个特点。1.复制 2.logshipping 3.镜像

1.  [复制](http://msdn.microsoft.com/en-us/library/ms151314%28v=sql.105%29.aspx)：它将每个事务从服务器 A 复制到服务器 B。它的最新数据也将在 B 中可用。阅读有关复制的信息。

2.  [日志传送](http://msdn.microsoft.com/en-us/library/ms187103.aspx)：这不过是自动备份和恢复，但您的 B 服务器将处于待机模式，您无法读取数据。

3.  参考此处进行[镜像。](http://msdn.microsoft.com/en-us/library/ms189852.aspx#Benefits)

# django - django-tastypie 和多对多“通过”关系

> ID：10629047
> 
> 赞同：7
> 
> 时间：2012-05-17T02:12:54.820
> 
> 标签：django, rest, tastypie

在 Django 和 Tastypie 中，我试图弄清楚如何正确处理多对多“通过”关系，就像在这里找到的那​​样：[https ://docs.djangoproject.com/en/dev/topics/db/models/#多对多关系的额外字段](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)

这是我的示例模型：

```
class Ingredient(models.Model):
    name = models.CharField(max_length=100)
    description = models.TextField()

class RecipeIngredients(models.Model):
    recipe = models.ForeignKey('Recipe')
    ingredient = models.ForeignKey('Ingredient')
    weight = models.IntegerField(null = True, blank = True)

class Recipe(models.Model):
    title = models.CharField(max_length=100)
    ingredients = models.ManyToManyField(Ingredient, related_name='ingredients', through='RecipeIngredients', null = True, blank = True) 
```

现在我的 api.py 文件：

```
class IngredientResource(ModelResource):
    ingredients = fields.ToOneField('RecipeResource', 'ingredients', full=True)

    class Meta:
        queryset = Ingredient.objects.all()
        resource_name = "ingredients"

class RecipeIngredientResource(ModelResource):
    ingredient = fields.ToOneField(IngredientResource, 'ingredients', full=True)
    recipe = fields.ToOneField('RecipeResource', 'recipe', full=True)

    class Meta:
        queryset= RecipeIngredients.objects.all()

class RecipeResource(ModelResource):
    ingredients = fields.ToManyField(RecipeIngredientResource, 'ingredients', full=True)

class Meta:
    queryset = Recipe.objects.all()
    resource_name = 'recipe' 
```

我正在尝试将我的代码基于此示例： http: [//pastebin.com/L7U5rKn9](http://pastebin.com/L7U5rKn9)

不幸的是，使用此代码我收到此错误：

```
"error_message": "'Ingredient' object has no attribute 'recipe'" 
```

有谁知道这里发生了什么？或者我如何在 RecipeIngredientResource 中包含成分的名称？谢谢！

编辑：

我可能自己发现了错误。ToManyField 应该指向成分而不是配方成分。我会看看这是否有效。

编辑：

新错误..有什么想法吗？对象 '' 有一个空属性 'title' 并且不允许使用默认值或空值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T18:21:48.637

你提到：

> 我可能自己发现了错误。ToManyField 应该指向成分而不是配方成分。我会看看这是否有效。

虽然 [Tastypie M2M] ~~( [http://blog.eugene-yeo.in/django-tastypie-manytomany-through.html](http://blog.eugene-yeo.in/django-tastypie-manytomany-through.html) )~~有更好的方法（旧博客离线：[https://github.com/9gix/eugene- yeo.in/blob/master/content/web/django-tastiepie-m2m.rst](https://github.com/9gix/eugene-yeo.in/blob/master/content/web/django-tastiepie-m2m.rst)）

简而言之`ToManyField`，我没有使用 to Ingredients，而是使用`ToManyField`了`ThroughModel`. 并将 kwargs自定义为`attribute`返回`ThroughModel`Queryset 的回调函数。

# 更新（2014 年 4 月）

这个答案是很久以前的。不确定它是否仍然有用。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-05T20:01:28.363

我和你有同样的问题。为了解决这个问题，我只是从 API 中删除了 ToMany 字段（如在 RecipeResource 中）。这对我们有用，因为模型仍然有 manytomany 字段（只是没有 API），您仍然可以通过查询中间模型来查询关系。

# mysql - CI：表单验证然后安全地插入数据（但没有将字符转换为 html 代码）

> ID：10629049
> 
> 赞同：0
> 
> 时间：2012-05-17T02:13:02.383
> 
> 标签：mysql, codeigniter, encoding, character-encoding

我正在处理一份注册表，这就是我目前的做法：

```
$this->form_validation->set_rules('first_name','First Name','trim|required');
$this->form_validation->set_rules('last_name','Last Name', 'trim|required');
....

if ($this->form_validation->run() === TRUE)
{                                               
    $data = array('first_name' => set_value('first_name')
    ....

// model
$this->db->insert('registration',$data)) 
```

**问题：**

如果名称中包含撇号，则它在 MySQL 中以`&#39;`

安全地处理这些数据并将其输入到 MySQL 中但不编码这些类型的字符的最佳方法是什么？

# ios - 捕获 UIImage 的放大部分，就好像它是自己的图像一样

> ID：10629050
> 
> 赞同：1
> 
> 时间：2012-05-17T02:13:05.953
> 
> 标签：ios, uiscrollview, uiimageview, uiimage, quartz-2d

我有以下场景： - 图像（作为相机图片） - 图像嵌入在 UIImageView 中 - 图像视图嵌入在 UIScrollView

我可以成功缩放和平移。我现在想要做的是当用户放大图像的一部分时，能够将该缩放视为 UIImageView 中唯一的东西。我希望他们能够再次缩小，所以我不想丢失原始图像（这会抛出裁剪我看到的图像的答案）。

现在发生的事情是我可以进行缩放，但是缩放后的图像被推到 0,0，就好像我放大了图像的左上角（而不是用户缩放的地方）。

我在scrollViewDidEndZooming 中没有太多内容，但这就是我假设代码要去的地方。我正在做类似的事情：

```
- (void)scrollViewDidEndZooming:(UIScrollView *)scrollView withView:(UIView *)view atScale:(float)scale
{
    CGFloat zoomReciprocal = 1.0f / scale;

    CGPoint offset = CGPointMake(imageHolder.image.size.width * ((1.0f - zoomReciprocal) / 2.0f), imageHolder.image.size.height * ((1.0f - zoomReciprocal) / 2.0f));
    CGRect croppedRect = CGRectMake(offset.x, offset.y, imageHolder.image.size.width * zoomReciprocal, imageHolder.image.size.height * zoomReciprocal);

    //and have tried things like:
    //[imageHolder.image drawInRect:croppedRect];
    //scrollView.contentSize = [self maximumUsableFrame].size;
    //scrollView.contentOffset = offset;
} 
```

我想要做的基本上是能够放大图像的一部分，并让其余方法认为这是当前图像。任何想法或指示？

# math - 推导动画的特定运动方程

> ID：10629052
> 
> 赞同：0
> 
> 时间：2012-05-17T02:13:28.247
> 
> 标签：math, animation, physics

我正在制作游戏原型，但我在推导运动方程时遇到问题。

有一个球以初始速度在屏幕上生成。它有一个固定的目标（固定距离）。有固定的加速度（在这种情况下为减速度）。所以球在到达目的地时会减速。

我正在尝试计算：

如果我希望球到达（第一次）到达目标时的最终速度是其初始速度（u / 4）的25％，那么球的初始速度（u）应该是多少？加速度、距离和时间是常数！

理想情况下，我希望将最终速度与初始速度的比率作为一个变量，但我认为一旦我弄清楚如何推导出简单的情况，我就可以找到一种让它工作的方法。

总结一下：

```
Distance: Constant
Time: Constant
Acceleration: Constant
Initial velocity: u
Final velocity at destination: u / 4 
```

如何为你解决？如何将其推广到不同的最终速度比？

感谢任何输入或指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:31:53.157

我猜你遇到的问题是因为你过度约束了你的系统。从速度随时间的变化，`v = v0 + at`，使用加速度和时间作为常数，你有

```
u/4 = u + AT
-3/4*u = AT
u = -4/3*AT 
```

但这可能与您从`v^2 = v0^2 + 2ad`（[托里切利方程](http://en.wikipedia.org/wiki/Torricelli%27s_equation)）中将距离作为常数给出的结果不一致

```
(u/4)^2 - u^2 = 2AD
-15/16*u^2 = 2AD
u = sqrt(-32/15*AD) 
```

总之，您不能将这三个都指定为常量。当然，如果您指定随时间变化的加速度（加速度的变化称为[jerk](http://en.wikipedia.org/wiki/Jerk_%28physics%29)），您可以得到您想要的，但我会让您推导出所需的方程 :)

# java - 记录致命崩溃

> ID：10629053
> 
> 赞同：0
> 
> 时间：2012-05-17T02:13:55.313
> 
> 标签：java, logging

如何在不为整个程序使用 try-cache 的情况下在我的应用程序某处记录致命崩溃的日志。就我而言，这甚至是不可能的，因为我有一个 RCP 应用程序。我不控制它的起点和终点。我怎么能做同样的事情，但只能从一个线程开始？我的应用程序中的另一个问题是我使用 Spring 如何将 Spring 日志流发送到我的日志？我使用 log4j。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:15:20.967

一种选择可能是使用[Thread.setUncaughtExceptionHandler()](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#setUncaughtExceptionHandler%28java.lang.Thread.UncaughtExceptionHandler%29)。但是，如果您可以控制线程的创建方式，或者至少有一个已知的入口点，那么这将最有效，这样您就可以设置处理程序。它还假设线程的调用堆栈中没有代码正在捕获异常并对其进行处理。

否则，如果不进一步了解应用程序的工作原理，就无法真正提出任何其他建议。

# ruby-on-rails - 尝试设置 Rails 以在 Postgresql 数据库中存储会话

> ID：10629054
> 
> 赞同：1
> 
> 时间：2012-05-17T02:14:11.950
> 
> 标签：ruby-on-rails, postgresql, activerecord, ruby-on-rails-3.2

我有一个现有的 Rails 3.2 应用程序，我想将会话存储在 Postgresql 数据库中。我在 Stackoverflow 上找到[了本教程](https://stackoverflow.com/questions/2588241/rails-sessions-current-practices-especially-for-rails-3)，并按照 Diego Pino 的指示进行操作。

但是，当我到达该`rake db:migrate`步骤时，出现以下错误：

> PG::Error: 错误：无法实现外键约束“sessions_session_id_fkey”详细信息：键列“session_id”和“id”的类型不兼容：字符变化和整数。

这是它试图执行的 SQL：

```
CREATE TABLE "sessions" ("id" serial primary key, 
    "session_id" character varying(255) NOT NULL, 
    "data" text,
    "created_at" timestamp NOT NULL, 
    "updated_at" timestamp NOT NULL, 
    FOREIGN KEY ("session_id") REFERENCES "sessions" ("id")) 
```

这是自动创建的迁移：

```
class AddSessionsTable < ActiveRecord::Migration                                    
  def change
    create_table :sessions do |t|
      t.string :session_id, :null => false
      t.text :date
      t.timestamps
    end
    add_index :sessions, :session_id
    add_index :sessions, :updated_at
  end
end 
```

令我困惑的是，我在迁移中看不到任何外键约束声明。那么为什么生成的 sql 试图将一个文本字段和一个整数字段链接在一起呢？

**更新 1**

凯文请求我的`config/initializers/session_store.rb`文件内容：

```
# Be sure to restart your server when you modify this file.

Calliope::Application.config.session_store :cookie_store, key: '_calliope_session'

# Use the database for sessions instead of the cookie-based default,
# which shouldn't be used to store highly confidential information
# (create the session table with "rails generate session_migration")
#Calliope::Application.config.session_store :active_record_store 
```

在取消注释底部的行后，我尝试重新运行`rake db:migrate`命令，但这并没有改变结果。`:active_record_store`

我的开发或测试数据库中也**没有**现有表。`sessions`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:40:43.227

查看生成的 SQL，跳出：

```
FOREIGN KEY ("session_id") REFERENCES "sessions" ("id")) 
```

您的表名是`sessions`，但它引用的是另一个名为 的表`sessions`。出于某种原因，它表明此表中的列是名为 的表中列`session_id`的外键。`id``sessions`

所以很明显，它不能使`session_id`您的会话表中的列成为同一个表中列的外键`id`- 正如错误告诉您的那样：

```
Key columns "session_id" and "id" are of incompatible types: character varying and integer. 
```

根据[ActiveRecord::SessionStore](http://api.rubyonrails.org/classes/ActiveRecord/SessionStore.html)的文档：

> 由 Active Record 类支持的会话存储。提供了一个默认类，但是任何对象鸭式键入到带有文本 session_id 和数据属性的 Active Record 会话类就足够了。

这是该页面的链接：

[http://apidock.com/rails/ActiveRecord/SessionStore](http://apidock.com/rails/ActiveRecord/SessionStore)

你能发布你的`/config/initializers/session_store.rb`文件的内容吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T17:52:19.963

我使用上面 Andrew 的建议检查了[schema_plus](https://github.com/lomba/schema_plus)库的文档，这是我问题的根源：

> SchemaPlus 添加了对外键约束的支持。事实上，对于使用后缀 _id 来表示它是外键的列命名的常见约定，SchemaPlus 会自动定义适当的约束。

值得庆幸的是，可以通过使用`:references => nil`设置在迁移中覆盖此行为。查看[自述文件](https://github.com/lomba/schema_plus/blob/master/README.rdoc)以获取更多信息。

# asp.net - 对网站的随机请求

> ID：10629055
> 
> 赞同：2
> 
> 时间：2012-05-17T02:14:21.263
> 
> 标签：asp.net, url, iis, webforms

定期，我收到对我网站的随机页面请求。例如，一些请求包括：

*   '/Pages/49r72acy.aspx'
*   '/60islation.aspx'
*   /category28_1ls.aspx'

像上面这样的请求还有很多，显然它会产生一个找不到页面的错误，因为我没有任何这样的页面。只是好奇为什么会这样。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:20:05.063

看起来像一个“机器人”在您的站点中寻找一些“漏洞”，或者试图通过向您的站点充斥虚假请求（不能来自缓存）来进行拒绝服务攻击 (DOS)。

或者，如果您正在使用一些渗透测试服务或工具，它也可能会生成随机请求（就像“机器人”会做的那样）。

# php - （wordpress）插件激活后如何在插件中运行功能

> ID：10629059
> 
> 赞同：0
> 
> 时间：2012-05-17T02:15:37.620
> 
> 标签：php, wordpress

我已经使用了 register_activation_hook 但它没有用。

```
<?php
  /*
  * Plugin Name: practice
  * Plugin URI: http://ramguiao.tk
  * Description: practice
  * Version: 1.0
  * Author: Ram Guiao
  * Author URI: http://ramguiao.tk 
  */

 register_activation_hook(_FILE_,"showMessage");

 function showMessage(){
     echo "activated";
 } 
```

?>

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T04:04:05.433

改变：

```
register_activation_hook(_FILE_,"showMessage"); 
```

至：

```
register_activation_hook(__FILE__,"showMessage"); 
```

# c# - 与数据库交互的类的命名约定

> ID：10629060
> 
> 赞同：8
> 
> 时间：2012-05-17T02:15:39.997
> 
> 标签：c#, .net, naming-conventions

是否存在与数据库交互的类的标准命名约定（CRUD 事物或检查重复）。现在我只是将它命名为 Helper，例如一个名为“Subscriptions”的与该表交互的类将被命名为“SubscriptionHelper”

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace LoopinWineBackOffice.Helper
{
    public class SubscriberHelper
    {
        public static bool IsEmailAlreadyInUsed(string email)
        {
            using (var dc = new LoopinWiineContainer())
            {
               return dc.Subscribers.Any(item => item.Email==email.Trim());
            }
        }
    }
} 
```

我的示例代码是这样的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T02:35:30.917

根据我的经验 [并且无意冒犯]，当类开始获得像“Helper”和“Manager”这样的名称时，这是因为该类的目的尚未明确定义（我自己过去也曾犯过此罪）。

在这种情况下，我推测您并没有真正考虑过您的数据访问模式，并且您只是在“SubscriptionHelper”类中有一堆即席 SQL。

现在，如果您正在实现标准数据访问模式，例如存储库模式，您的类将被称为 SubscriptionRepository，其意图会更加清晰。

所以，回答这个问题 - 不，我认为您的场景没有标准的“命名”约定。但是，有几种标准设计模式可以潜在地应用于您的系统，并且通过这样做，您最终可能会得到一个既能提供信息又有意义的命名约定。

以下是一些众所周知的设计模式的起点：[http](http://martinfowler.com/eaaCatalog/) ://martinfowler.com/eaaCatalog/ ，但如果不了解该项目的更多信息，很难进一步指导您。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T07:33:46.243

> 是否存在与数据库交互的类的标准命名约定之类的东西

是的，如何遵循表数据网关模式，在这种情况下，您将拥有一个“订阅者网关”对象来访问单个表或视图：选择、插入、更新和删除。

表数据网关：充当数据库表网关的对象。 [http://martinfowler.com/eaaCatalog/tableDataGateway.html](http://martinfowler.com/eaaCatalog/tableDataGateway.html)

# java - Spring 与远程数据库。如何最小化网络延迟开销？

> ID：10629062
> 
> 赞同：1
> 
> 时间：2012-05-17T02:16:02.070
> 
> 标签：java, mysql, spring, remote-server

我有 2 台服务器，一台带有使用 Spring 进行 DB 连接处理的 Java 应用程序，另一台带有 MySQL。两台服务器之间的 Ping 延迟约为 100 毫秒。

Java 服务器一次使用批量插入数据库，2000 行。执行此批量插入似乎需要 100 毫秒 x 2000 次插入 = 200,000 毫秒！

有没有办法最小化这种网络延迟？使用事务有助于减少它吗？

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:20:37.283

交易只会给你*更多的*开销。（尽管这当然并不意味着您不应该使用它们。）我认为批量处理可能会有所帮助。这将减少为每个插入建立新网络连接的开销。如果可能，您还可以考虑在 Java 服务器上缓存内容；虽然这只会有助于读取，而不是写入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T07:45:50.323

就像其他答案所说，尝试使用批处理。但如果 MySQL JDBC 驱动程序不优化它们，它就无济于事。有关其他潜在解决方案，请参见此处的答案：[JDBC 批量插入性能](https://stackoverflow.com/q/2993251/116509)

# iphone - 在 xcode 中输入指示器

> ID：10629063
> 
> 赞同：0
> 
> 时间：2012-05-17T02:16:08.760
> 
> 标签：iphone, xcode, messenger

有谁知道如何为 iPhone 聊天应用程序实现打字指示器（“John 正在打字”）？这可以感知用户何时正在打字。就像在 Kik messenger 中一样。

我试图在发布之前衡量需要多少工作才能实现这一点。

或者正确方向的指针会有所帮助！

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-24T16:03:58.497

在您的服务器上运行[RabbitMQ MQTT 适配器。](https://www.rabbitmq.com/mqtt.html)

使用[MQTT 客户端框架](https://github.com/ckrey/MQTT-Client-Framework)从设备发送和接收数据。

将设备 A 中的应用订阅到主题，比如说 /topic/user-a，设备 B 订阅主题 /topic/user-b

将事件附加到 UITextField 以更改文本，请[在此处](https://stackoverflow.com/a/7010676/1122828)阅读详细信息 一旦用户（假设 user-a）开始输入，使用 MQTT 客户端框架将数据发布到主题：/topic/user-b 和数据：1 并在输入停止时，发布 0 . 由于设备 B 订阅了该主题，设备将收到 1（开始输入）和 0（输入结束）的数据。

查看[https://github.com/AppLozic/Applozic-iOS-SDK](https://github.com/AppLozic/Applozic-iOS-SDK)以获取聊天 ios sdk 的示例代码，其中也包含输入指示器。

来源： http: [//www.applozic.com/blog/how-to-implement-typing-indicator-in-android-chat-app/](http://www.applozic.com/blog/how-to-implement-typing-indicator-in-android-chat-app/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T02:57:45.637

很有可能像 Kik 这样的消息应用程序正在通过其服务器 ping 下一个设备，并且当从接收设备（显示“John 正在打字”的 iPhone）收到 ping 时，应用程序正在显示`UILabel`.

# c# - 如何在c#中使用财务函数，如EXCEL

> ID：10629066
> 
> 赞同：1
> 
> 时间：2012-05-17T02:16:34.733
> 
> 标签：c#, excel, finance

如何在c#中使用财务函数，如EXCEL

例如，内部收益率、现值、未来值、净现值等。

我找到了这个链接，但我不适合我。我添加了 Finance.dll，但我不知道下一步该怎么做。

[http://archive.msdn.microsoft.com/FinancialFunctions](http://archive.msdn.microsoft.com/FinancialFunctions)

如果您有更好的解决方案帮助，请告诉我或从上面的链接中给出一个示例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T04:10:07.093

如果您阅读了您为 Excel 财务功能发布的页面。

> 我如何使用图书馆？
> 
> 只需将 Financial.dll 添加到项目中的引用中。这些函数作为 System.Numeric 命名空间中 Financial 类的静态方法提供

因此，如果您以这种方式引用它，则静态方法将可用。

# git - Git忽略测试子域的.htaccess文件还是更好的方法？

> ID：10629068
> 
> 赞同：1
> 
> 时间：2012-05-17T02:16:48.307
> 
> 标签：git, apache, .htaccess, version-control

我已经设置了一个子域 - foo.bar.com - 并将 bar.com/public_html 的内容 repo'd 到 bitbucket，然后将它们克隆到 foo.bar.com/public_html 以便我可以测试东西而不会弄乱实际站点。我还复制了 public_html 之外的其他目录，但这些主要是 tmp 文件和其他我不需要更改的东西

我认为这样做会出现各种问题，但到目前为止，几乎所有事情都按预期进行。当然，以下情况除外：

```
PassengerAppRoot /home/walkerneo/pyserver 
```

子域位于 /home/walkerneo/dev，实际站点位于 /home/walkerneo。python 乘客 wsgi 服务器位于 /home/walkerneo/pyserver。我想将 /home/walkerneo/dev/pyserver 中的乘客 wsgi 用于 foo.bar.com

我可以只更改 .htaccess 文件，但是如果我提交、推送然后拉到主站点，我将使用来自 foo.bar.com 的 python 服务器

有没有办法在 .htaccess 文件中使用相对路径？

喜欢：

```
PassengerAppRoot ../../pyserver 
```

或者

```
PassengerAppRoot %{DOCUMENT_ROOT}/../pyserver 
```

..或类似的规定？

如果我只是将文件添加到 git 的 foo.bar.com 存储库的忽略列表中，而不是 bar.com 存储库，那么当我从 foo.bar.com 推送或拉取，或从 bar 推送或拉取时会发生什么？

如果我需要忽略该文件，我想要的是：

1.  从 bar.com 到 bitbucket 的推送包括对该 .htaccess 文件的更改，恢复到 bitbucket 上的旧提交也是如此。
2.  从 bitbucket 拉入 foo.bar.com 不会更改 .htaccess 文件。
3.  从 foo.bar.com 推送不会更改有关 bitbucket 上 .htaccess 文件的任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:29:45.137

好吧，Git 中有一个便宜的解决方案，尽管理想情况下，您可以弄清楚如何使 .htaccess 文件可移植。如果您更改 .gitignore 文件，那么（因为它是版本化的），它将向其他两个存储库传播*无知。*

但是，如果您更改了 dev repo 的 .git/info/exclude 文件（它使用与 .gitignore 相同的格式，但没有版本控制），那么 .htaccess 文件将在那里被忽略，并在其他地方单独留下。应该可以的，不过没试过。

# autoconf - 错误消息：从未定义“AMDEP”

> ID：10629071
> 
> 赞同：3
> 
> 时间：2012-05-17T02:17:03.900
> 
> 标签：autoconf, automake

我有一个`configure.ac`我通过不同的配置选项启用不同的编译器。该`configure`脚本已成功生成，但最后（调用`AC_OUTPUT`）我收到一条错误消息：

```
configure: error: conditional "AMDEP" was never defined.
Usually this means the macro was only invoked conditionally. 
```

可悲的是，调查`config.log`并没有帮助，我不知道是什么导致了这个错误或从哪里开始搜索。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T20:53:37.940

显然，您不能嵌入`AM_PROG_CC`,`AM_PROG_CPP`或块`AM_PROG_CXX`中`if`（无论出于何种原因）。解决方案是在`if`块中设置一个变量并将其传递给 AM_PROG_*。

# c# - 通用对象调试器

> ID：10629072
> 
> 赞同：4
> 
> 时间：2012-05-17T02:17:11.480
> 
> 标签：c#

我正在尝试编写一个通用函数，我可以将对象传递给它，它将打印出 c# 中的所有属性和值。

我已经尝试了很多这样的例子，还有一些像[这样的例子](https://stackoverflow.com/questions/852181/c-printing-all-properties-of-an-object)

```
 public void PrintProperties(object obj)
    {
        PrintProperties(obj, 0);
    }
    public void PrintProperties(object obj, int indent)
    {
        if (obj == null) return;
        string indentString = new string(' ', indent);
        Type objType = obj.GetType();
        PropertyInfo[] properties = objType.GetProperties();
        foreach (PropertyInfo property in properties)
        {
            object propValue = property.GetValue(obj, null);
            if (property.PropertyType.Assembly == objType.Assembly)
            {
                Console.WriteLine("{0}{1}:", indentString, property.Name);
                PrintProperties(propValue, indent + 2);
            }
            else
            {
                Console.WriteLine("{0}{1}: {2}", indentString, property.Name, propValue);
            }
        }
    } 
```

和

```
 foreach (PropertyDescriptor descriptor in TypeDescriptor.GetProperties(obj))
        {
            string name = descriptor.Name;
            object value = descriptor.GetValue(obj);
            Console.WriteLine("{0}={1}", name, value);
        } 
```

但是我在调​​试/日志文件中想要的一些对象包含 string[] 属性。所有这些示例都将它们输出为

```
System.String[] 
```

如果我有一个像

```
class Thing
{
    public string Name { get; set; }

    public int Number { get; set; }

    public string[] Names { get; set; }
} 
```

我希望在日志中看到如下设置的任何值

```
Name: Test
Number: 3
Names[0]: Fred
Names[1]: John
Names[2]: Jimmy 
```

谢谢你的帮助=]

这是我最终使用的课程

```
class Descriptor
{
    public void PrintProperties(object obj)
    {
        PrintProperties(obj, 0);
    }
    public void PrintProperties(object obj, int indent)
    {
        if (obj == null) return;
        string indentString = new string(' ', indent);
        Type objType = obj.GetType();
        PropertyInfo[] properties = objType.GetProperties();
        foreach (PropertyInfo property in properties)
        {
            object propValue = property.GetValue(obj, null);

            if (propValue.GetType().IsArray)
            {
                object[] arrary = (object[]) propValue;
                foreach (string value in arrary)
                {
                    if (property.PropertyType.Assembly == objType.Assembly)
                    {
                        Console.WriteLine("{0}{1}:", indentString, property.Name);
                        PrintProperties(value, indent + 2);
                    }
                    else
                    {
                        Console.WriteLine("{0}{1}: {2}", indentString, property.Name, value);
                    }
                }
                continue;
            }

            if (property.PropertyType.Assembly == objType.Assembly)
            {
                Console.WriteLine("{0}{1}:", indentString, property.Name);
                PrintProperties(propValue, indent + 2);
            }
            else
            {
                Console.WriteLine("{0}{1}: {2}", indentString, property.Name, propValue);
            }
        }
    }

} 
```

现在我将在这个类中使用 Log4Net，现在在我的 mvc3 站点中，我可以调用它，同时提供并发布 ViewModel，以便在打开时获得全面的调试

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T02:25:27.173

如果您不介意使用 Windows 窗体，有一个名为 a 的控件`PropertyGrid`基本上可以满足您的需求：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid(v=vs. 90).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.propertygrid(v=vs.90).aspx)

现在，对于您的具体问题，问题是您没有查看数组内部。您应该做的是查看每个属性的类型。如果它是数组类型，那么您需要将值转换为`object[]`数组，然后遍历每个元素，而不是简单地打印值的`ToString()`输出。您还需要创建一个递归算法来查看每个属性的内部并将其视为具有要迭代的属性的对象。如果您需要这方面的帮助，请告诉我。

# ios - 连续调用 UIViewController 的 presentViewController 方法

> ID：10629080
> 
> 赞同：7
> 
> 时间：2012-05-17T02:18:19.187
> 
> 标签：ios, asynchronous, presentmodalviewcontroller

我最近在我的 iOS 应用程序中遇到了一个令人毛骨悚然的情况，我试图连续关闭`UIViewController`从我的窗口的 rootViewController 呈现的一个，使用：

```
[rootViewController dismissViewControllerAnimated:YES completion:NULL] 
```

并在此后不久呈现另一个（顺便说一句，以另一种方法），其中：

```
UIViewController *vc2 = [[[MyViewController2 alloc] initWithNibName:nil bundle:nil] autorelease];
[rootViewController presentViewController:vc2 animated:YES completion:NULL]; 
```

问题是，我永远无法让第二个视图控制器出现。事实证明，据我所知，`dismissViewControllerAnimated:completion:`需要通过“完成”时间的异步块，然后`presentViewController:animated:completion:`才能再次正常工作。据我所知，这一事实并未直接记录在[Apple 的文档中。](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

我想出的解决方案是用一个方法来包装解雇，该方法指定您以后要调用的选择器，如下所示：

```
- (void)dismissViewController:(UIViewController *)presentingController
                   postAction:(SEL)postDismissalAction
{
    [presentingController dismissViewControllerAnimated:YES
                                             completion:^{
                                                            [self performSelectorOnMainThread:postDismissalAction
                                                                                   withObject:nil
                                                                                waitUntilDone:NO];
                                                         }];
} 
```

然后我会打电话：

```
[self dismissViewController:self.window.rootViewController
                 postAction:@selector(methodForNextModalPresentation)]; 
```

无论如何，我想发帖，因为我环顾四周并没有看到有人遇到这个特殊问题，所以我认为它可能有助于人们理解。而且，我想验证我没有破解具有更好解决方案设计模式的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T18:30:29.127

只是为了清楚起见。你是说这段代码不起作用吗？

```
[myRootViewController dismissViewControllerAnimated:YES completion:^{
    [myRootViewController pushViewController:newController animated:YES];
}]; 
```

# json - 如何将 JSON 数组转换为 JavaScript 数组？

> ID：10629082
> 
> 赞同：2
> 
> 时间：2012-05-17T02:18:49.043
> 
> 标签：json, knockout.js

我正在使用 KnockoutJS 进行数据绑定。以下代码是控制器的操作方法

```
public JsonResult GetPeople()
{
    var people = new List<Person>
                     {
                         new Person {Name = "aaaa", Address = "aaaaaaaaa"},
                         new Person {Name = "bbbb", Address = "bbbbbbbbb"},
                         new Person {Name = "cccc", Address = "ccccccccc"}
                     };
    return Json(people, JsonRequestBehavior.AllowGet);
} 
```

下面是客户端代码片段

```
<ul data-bind="foreach: people">
  <li>NAME:<span data-bind="text: Name"></span></li>
  <li>ADDRESS:<span data-bind="text: Address"></span></li>  
</ul>

<script>
    function getPeopleFromServer() {
        var people= [];

        $.ajax({
            url: "GetPeople",
            cache: false,
            type: "GET",
            success: function (result) {
                console.log("result= " + result);
                people = $.parseJSON(result);
                console.log("people= " + people);
            }
        });

        return people;
    }

    function ViewModel() {
        var self = this;

        // data
        self.people = ko.observableArray(getPeopleFromServer());        
    }

    ko.applyBindings(new ViewModel());
</script> 
```

问题是 getPeopleFromServer 方法中的 people 变量始终为 null，而 result 具有来自服务器的正确值。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:26:08.437

您的`$.ajax`函数比它的包含函数花费更长的时间来完成，因此包含函数永远不会`people`在执行结束时弹出

您可以做的一件事是将以下内容添加到您的`$.ajax`:

```
$.ajax({
   async: false,
   url: "GetPeople",
   .....
}); 
```

`async: false`将使包含函数“等待”直到 ajax 完成。您的人员变量应在函数执行结束时填充。虽然这是一个快速的胜利，但我同意[Tom](https://stackoverflow.com/users/882436/tom)的观点，即您应该重新考虑如何处理您的 ViewModel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:49:56.227

人们应该在同一个视图模型中被引用。或者作为self.people。我建议你把对 ajax 的调用放在视图模型中，然后就清楚了。所以 getPeopleFromServer() 应该在视图模型中。

出于兴趣，您还可以添加 timeout: 600000 以便呼叫不会超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T02:20:39.507

@tom 的评论是正确的。

> 'success' 是一个内联异步函数。基本上，'return people' 发生在调用 'success' 函数之前，因为 ajax 调用是非阻塞的。您需要重新设计您的 ViewModel 以异步工作（或关闭异步），希望其他人会加入代码修复

这是他预言的完整评论的小提琴。

[http://jsfiddle.net/bczengel/8Wqum/](http://jsfiddle.net/bczengel/8Wqum/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T13:13:21.987

尝试使用 ko.mapping 插件。

```
function ViewModelWrapper(jsonResult)
{
       var self = this;
       self.model = ko.mapping.fromJS(jsonResult);
} 
```

[http://knockoutjs.com/documentation/plugins-mapping.html](http://knockoutjs.com/documentation/plugins-mapping.html)

# javascript - 具有负数组索引的 Safari 中无法解释的行为

> ID：10629083
> 
> 赞同：7
> 
> 时间：2012-05-17T02:19:05.313
> 
> 标签：javascript, macos, safari

**编辑**：更简单的复制案例；以下代码：

```
setInterval(function(){
  var a=[10,20,30,40], i=-1;
  a[-1] = 42;
  while (i<10000) a[i++];
  console.log(a[-1],a[4294967295]);
},100); 
```

…产生输出：

```
 42 undefined
     undefined 42
     42 undefined
37x  undefined 42
     42 undefined
     undefined 42
     42 undefined
41x  undefined 42
     42 undefined
     undefined 42
     42 undefined 
```

## 自己试试：http: [//jsfiddle.net/Fjwsg/](http://jsfiddle.net/Fjwsg/)

* * *

（原问题如下）

给定以下代码（或[类似代码（小提琴）](http://jsfiddle.net/TzCm9/)）：

```
<!DOCTYPE HTML>
<html><head><title>-1 Array Index</title></head><body>
  <label>p: <input id="p" size="3"></label>
  <script type="text/javascript">
  var p = document.getElementById('p');
  p.onkeyup = function(){
    var a = "10 20 30 40".split(/\s+/);
    foo(a, p.value*1);
  }

  function foo(a,p){
    var count=a.length, i=0, x;
    if (p) a[i=-1]=p;
    while (i<10000) x = a[i++ % count];
    console.dir(a);
  }
  </script>
</body></html> 
```

当我关注“p”输入并键入时，我在开发者控制台中看到以下内容`1` `backspace` `2`：
![数组的第一遍索引为 -1，第三遍索引为 4294967295](../Images/e9ee8994eccc2744a98293b8e9ab986a.png)

一旦我看到`4294967295`(2 ^(32) - 1) 的索引出现，有时事情就会开始“变坏”：有时开发人员工具会自动关闭，有时所有 Safari 选项卡都会冻结并需要重新启动才能恢复。

奇怪的是，如果我删除（在这种情况下基本上没用的）while 循环，我就无法重现这个。而且我无法在 Chrome 或 Firefox 上复制它。

谁能阐明这个问题的根源可能是什么？

*OS X 10.7.4 上的 Safari 5.1.7 会出现这种情况*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:36:48.227

使用负索引可能会导致未定义的行为。

根据[ECMAScript 文档](http://bclary.com/2004/11/07/#a-15.4)，特定值`p`只能是数组索引，当且仅当：

```
(p >>> 0 === p) && (p >>> 0 !== Math.pow(2, 32) - 1) 
```

在你的情况下：

```
# -1 >>> 0
4294967295
# Math.pow(2, 32) - 1
4294967295 
```

**编辑**

如果`p`上述测试失败，则应将其视为常规对象属性，例如`a.foo`or `a['foo']`。也就是说，事实证明，使用字符串强制转换设置负索引可以解决这个问题。

```
a['' + (i =-1)] = p 
```

结论：浏览器错误

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T02:39:53.403

对我来说，这听起来像是 JavaScriptCore 中的一个错误。可能`foo`在第二次调用时被 JITted 并且 JITted 代码引入了错误。

我建议针对 JavaScriptCore[提交一个错误](http://webkit.org/new-bug)并附加您的测试用例。

# actionscript-3 - AIR 浏览器调用未获取参数

> ID：10629084
> 
> 赞同：1
> 
> 时间：2012-05-17T02:19:05.950
> 
> 标签：actionscript-3, flash, apache-flex, air, flex3

我终于想出了如何从浏览器启动我的 AIR 本机安装程序桌面应用程序，但我没有收到任何传入的参数。

我将此添加到我的本机安装程序应用程序（来自[http://livedocs.adobe.com/flex/3/html/help.html?content=app_launch_1.html](http://livedocs.adobe.com/flex/3/html/help.html?content=app_launch_1.html)）

```
<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml"       
       invoke="onInvoke(event)">
<mx:Script>
<![CDATA[
import flash.events.InvokeEvent;
import flash.desktop.NativeApplication;

public function onInvoke(invokeEvent:InvokeEvent):void {
    var now:String = new Date().toTimeString();
    logEvent("Invoke event received: " + now);

    if (invokeEvent.currentDirectory != null){
        logEvent("Current directory=" + invokeEvent.currentDirectory.nativePath);
    } else {
        logEvent("--no directory information available--");
    }

    if (invokeEvent.arguments.length > 0){
        logEvent("Arguments: " + invokeEvent.arguments.toString());
    } else {
        logEvent("--no arguments--");
    }
}

public function logEvent(entry:String):void {
    log.text += entry + "\n";
    trace(entry);
}
]]>

(etc.) 
```

该应用程序通过此方法成功启动

```
 private function onButtonClicked(e:Event):void {
            var APP_ID:String = "my_app";
            var PUB_ID:String = "";
            var ARGS:Array = ["123", "abc"];
            _air.launchApplication( APP_ID,PUB_ID, ARGS );
        } 
```

logEvent 说收到了 Invoke 事件，但我总是得到“--no arguments--”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T20:58:30.807

使用`BrowserInvokeEvent`而不是`invokeEvent`在应用程序上。

将此添加到您的应用程序完整处理程序中，

```
NativeApplication.nativeApplication.addEventListener(BrowserInvokeEvent.BROWSER_INVOKE, onBrowserInvoke); 
```

然后在浏览器启动传递的参数上播放以下方法。

```
protected function onBrowserInvoke(event:BrowserInvokeEvent):void
{
    Alert.show(event.arguments.toString(),"My Args");           
} 
```

# java - Java：带有对象和空值的 Arrays.sort(...)

> ID：10629089
> 
> 赞同：1
> 
> 时间：2012-05-17T02:20:30.323
> 
> 标签：java, arrays, sorting, loops, comparator

我正在开发一个使用 Swing 的应用程序。我有一个 JTabbedPane，每个选项卡都被视为一个“页面”。每个页面包含 4 个普通面板（我将它们称为“视图”），它们按照 2x2 GridLayout 排列。

我想最小化页面的数量，所以每次删除视图时，我都想重新排序所有页面中的所有视图（如果更有意义，请考虑二维数组），以便靠近最后一页并从那里删除，并添加到更靠近前面的页面。

考虑这个例子：

```
Object[][] array = new Object [][] {

    { new Object(), null, new Object(), new Object() },
    { null, null, new Object(), new Object() },
    { new Object(), new Object(), new Object(), new Object() }

}; 
```

如何对该数组进行排序，使其看起来更像：

```
Object[][] array = new Object[][] {

    { new Object(), new Object(), new Object(), new Object() },
    { new Object(), new Object(), new Object(), new Object() },
    { new Object(), null, null, null },

}; 
```

起初，我想使用两个循环，一个从 0 到`array.length`，一个从`array.length`到 0。想法是：当从长度到 0 的循环接近 0 时，它将检查数组的索引从**0 到 length**是空的。如果是这样，它将把非空元素放在包含`null`.

由于所有的循环，这种方法让我很头疼，所以我向我的一位密友寻求建议。他提出了一个更优雅的解决方案：`Arrays.sort(Object[][], Comparator)`.

这段代码是结果：

```
 Object[][] array = new Object[][] { { new Object(), null, new Object(), new Object() }, { null, null, new Object(), new Object() }, { new Object(), new Object(), new Object(), new Object() } };

    for (int i = 0; i < 3; i++)
    {
        for (int j = 0; j < 4; j++)
        {
            System.out.println("Before sorting: (i = " + i + " j = " + j + " null = " + (array[i][j] == null) + ")");
        }
    }

    Arrays.sort(array, new Comparator<Object>()
    {

        public int compare(Object a, Object b)
        {
            return a == null ? (b == null ? 0 : -1) : (b == null ? 1 : 0);
        }

    });

    for (int i = 0; i < 3; i++)
    {
        for (int j = 0; j < 4; j++)
        {
            System.out.println("After sorting: (i = " + i + " j = " + j + " null = " + (array[i][j] == null) + ")");
        }
    } 
```

输出是：

```
排序前：（i = 0 j = 0 null = false）
排序前：（i = 0 j = 1 null = true）
排序前：（i = 0 j = 2 null = false）
排序前：（i = 0 j = 3 null = false）
排序前：（i = 1 j = 0 null = true）
排序前：（i = 1 j = 1 null = true）
排序前：（i = 1 j = 2 null = false）
排序前：（i = 1 j = 3 null = false）
排序前：（i = 2 j = 0 null = false）
排序前：（i = 2 j = 1 null = false）
排序前：（i = 2 j = 2 null = false）
排序前：（i = 2 j = 3 null = false）
排序后：（i = 0 j = 0 null = false）
排序后：（i = 0 j = 1 null = true）
排序后：（i = 0 j = 2 null = false）
排序后：（i = 0 j = 3 null = false）
排序后：（i = 1 j = 0 null = true）
排序后：（i = 1 j = 1 null = true）
排序后：（i = 1 j = 2 null = false）
排序后：（i = 1 j = 3 null = false）
排序后：（i = 2 j = 0 null = false）
排序后：（i = 2 j = 1 null = false）
排序后：（i = 2 j = 2 null = false）
排序后：（i = 2 j = 3 null = false）

```

完全相同的。我还尝试将`compare(Object, Object)`实现替换为：

```
 public int compare(Object a, Object b)
        {
            if (a == null && b != null)
            {
                return -1;
            }
            if (b == null && a != null)
            {
                return 1;
            }
            return 0;
        } 
```

...并取得了相同的结果。我有点不知所措。这不是我没有知识去做的事情，我只是无法思考如何为这样的问题实际创建解决方案。

我会很感激任何帮助。无论您喜欢哪种方式，循环方法或比较器方法，我都希望看到它！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:41:43.590

你的意思是

```
Object[][] array = new Object [][] { .. }; 
```

在您的情况下，您需要将二维数组转换为数组（一维数组）。对新数组进行排序后，用排序后的数组填充二维数组。

```
// convert to 1-D array
Object[] all = new Object[12];
int k = 0;
for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 4; j++) {
        all[k++] = array[i][j];
    }
}

// then sort the new array
Arrays.sort(all, yourComparator);

// then fill the 2-D array with the sorted array
k = 0;
for (int i = 0; i < 3; i++) {
    for (int j = 0; j < 4; j++) {
        array[i][j] = all[k++];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:39:40.983

数组是类型`Object[][]`。因此，当您这样做时，您正在安排其中的`sort(array, theComparator)`三个。您**没有**对这三个数组中的每一个的内容进行排序。`Object[]``array`

 **而且由于三个`Object[]`in`array`中没有一个为 null，因此您的比较器在每次比较时都返回零，因此它们`Object[]`保持在`array`.

因此，您需要转换为 的一维数组`Object`，对其进行排序，然后将其分解为二维数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T03:28:22.837

您的示例不清楚，显然不符合您的实际应用要求。（对一堆未区分的`Object`实例进行排序是没有意义的！）

所以我要试一试……猜猜你真的只是想把空值移到最后。（其他非空元素已经排序，删除一个/一些不会改变这一点。或者它们可能根本不需要排序......）

如果是这种情况，那么简单的方法就是这样做：

*   创建一个大小合适的临时一维数组
*   按照您希望元素出现的顺序（例如列中的行）迭代二维数组，并将非空元素复制到一维数组中。
*   再次迭代二维数组，从一维数组复制回来。

或者，如果您确实需要对非空元素进行排序，则可以使用 在一维数组中进行排序[`Arrays.sort(Object[], int, int)`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5B%5D,%20int,%20int%29)。选择边界以排除数组末尾的空值。这避免了创建理解的“复杂”比较器的需要`null`。

* * *

您当前的方法太复杂了……不必要的复杂代码是个坏主意。

而且，如果您的意图是将空值移到末尾，同时保留其他对象的顺序，那么`sort`这样做是一种昂贵的方法。（它将与`Comparator`您定义的方法一起使用，因为这些`sort(Object[] ...)`方法被记录为进行稳定的排序。但在这种情况下，我想说它很*不幸*地工作。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T02:50:56.890

您的代码失败的原因是您只是检查外部数组是否为空，您还应该检查外部数组的内容。

请参阅此代码：

```
import java.util.Arrays;
import java.util.Comparator;

public class Test2DArrayComparator {
    public static void main(String[] args) {
        Object[][] array = new Object[][]{
                {new Object(), null, new Object(), new Object()}, 
                {null, null, new Object(), new Object()},
                {new Object(), new Object(), new Object(), new Object()}
                };

        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 4; j++) {
                System.out.println("Before sorting: (i = " + i + " j = " + j + " null = " + (array[i][j] == null) + ")");
            }
        }

        class ArrayComparator implements Comparator<Object>{

            @Override
            public int compare(Object a, Object b) {
                if(a == null && b == null){
                    return 0;
                } else if(a != null && b == null){
                    return 1;
                } else if(a == null && b != null){
                    return -1;
                } else {
                    return checkConents(((Object[])a), ((Object[])b));
                }
            }

        }
        Arrays.sort(array, new ArrayComparator());

        for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 4; j++) {
                System.out.println("After sorting: (i = " + i + " j = " + j + " null = " + (array[i][j] == null) + ")");
            }
        }

    }

    static int checkConents(Object[] first, Object[] second){
        for(int iDx = 0; iDx < first.length; iDx++){
            if(first[iDx] != null && second[iDx] == null){
                return -1;
            } else if(first[iDx] == null && second[iDx] == null){
                return 0;
            } else if(first[iDx] == null && second[iDx] != null){
                return 1;
            }
        }
        return -1;
    }
} 
```

在检查外部数组的有效性后，`checkContent`调用比较内容，还要注意`checkContent`假设两个数组的大小相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T14:04:07.250

您不希望代码中有空值，不希望检查空值，不希望偶然发现空值，也不希望空值带有语义。

因此，您不需要数组。

如果您喜欢使用大小不同的集合，请不要使用数组。

以 ArrayList 为例，易于使用，大小可变，无需使用空值。

如果从 ArrayList 中删除元素 2：

```
 List <JPanel> al = new ArrayList <JPanel> ();
   al.add (new JPanel ());
   al.add (new JPanel ());
   al.add (new JPanel ());
   al.add (new JPanel ());

   al.remove (1); // 0-based numbering like in Arrays. 
```

现在元素 2 和 3 将滑到前面一个位置。你的阵列现在有多长？

```
 System.out.println (al.size ()); 
```

List 中没有 null，不需要针对 null 进行测试，迭代？

```
 for (JPanel jp : al) 
        // do something to every jp. 
```

不要在你的代码中使用 null ，但要禁止它！

不要将数组用于不同大小的集合！**

# javascript - Spotify 应用程序中的 OAuth

> ID：10629094
> 
> 赞同：0
> 
> 时间：2012-05-17T02:20:54.800
> 
> 标签：javascript, oauth, spotify

我正在尝试`OAuth`在 Spotify 应用程序中完成身份验证。默认情况下，`window.open`被阻止，我不确定是否有任何方法可以解决这个问题。所以，我想知道处理这个问题的最佳方法是什么。我希望能够执行以下操作：1）将用户重定向到身份验证链接 2）一旦他们通过身份验证，我希望能够得到通知以处理返回 URL 并从中提取访问令牌。

几个选项，我正在考虑：`1) IFrame` `2) $.ajax() -- problem is, this doesn't seem to load all javascript/css files from the auth url properly.`

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:08:20.610

我相信`auth.showAuthenticationDialog()`API 正是您所追求的。它会弹出一个对话框，显示给定的 URL，然后在调用返回 URL 时返回参数。文档[在这里](https://developer.spotify.com/technologies/apps/docs/beta/09321954e7.html)。

```
var sp = getSpotifyApi(1);
var auth = sp.require('sp://import/scripts/api/auth');

auth.showAuthenticationDialog('http://www.last.fm/api/auth/?api_key=LAST_FM_API_KEY&cb=sp://my_app_name', 'sp://my_app_name', {

    onSuccess : function(response) {
        // Response will be something like 'sp://my_app_name?token=xxxxxxx'
        console.log("Success! Here's the response URL: " + response);
    },

    onFailure : function(error) {
        console.log("Authentication failed with error: " + error);
    },

    onComplete : function() { }
}); 
```

# javascript - 使用 Prototype/JS 将 id 插入 div

> ID：10629100
> 
> 赞同：2
> 
> 时间：2012-05-17T02:22:51.383
> 
> 标签：javascript, html, prototypejs

是否可以使用原型/javascript 将 id 插入到 div 中？基本上：

```
<div> Hello </div> 
```

应该变成：

```
<div id="myId"> Hello </div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T02:25:59.713

是的，但是如果没有更多代码，这将很难做到，因为您无法识别`<div>`它当前的编码方式。如果它跟随一个`<div>`with 和 ID`somediv`那么你可以这样做：

```
$$('#somediv > div')[0].setAttribute('id', 'myId'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T20:25:31.453

```
$("somelement").writeAttribute("id","myid"); 
```

# eclipse-rcp - 关于 GEF 的选择

> ID：10629109
> 
> 赞同：0
> 
> 时间：2012-05-17T02:24:40.010
> 
> 标签：eclipse-rcp, eclipse-gef, draw2d

我是 GEF 的新手。我想在这里发表一些疑问。我在图形编辑器上创建了一个矩形图形。现在我无法选择那个数字。为了选择一个图，我需要使用编辑策略和命令吗？此外，删除、重做和撤消操作都可以在没有编辑器的视图中使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:06:51.133

启用选择是使用编辑策略完成的。由于您是 GEF 的新手，您可以查看我关于该主题[的教程。](http://www.vainolo.com/tutorials/)您还可以从[我找到的来源](http://www.vainolo.com/useful-links/)中阅读更多信息。

祝你好运！

# java - 按升序组织一副纸牌

> ID：10629112
> 
> 赞同：-1
> 
> 时间：2012-05-17T02:25:23.707
> 
> 标签：java

嗨，我写了一些代码来打印一副卡片

这是怎么出来的：2C 2D 2H 2S 3C 3D 3H 3S 4C ...

这就是我想要的：2C 3C 4C 5C 6C ...

这是我的代码的一部分：

```
public DeckOfCards()
{
  for (PlayingCard.CardRank rank : PlayingCard.CardRank.values())   
    for (PlayingCard.CardSuit suit : PlayingCard.CardSuit.values())           
    {
       System.out.printf(" %c%c ", rank.getSymbol(),suit.getSymbol());
    }
} 
```

我打算使用 for 循环，但我不确定从哪里开始任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:28:16.610

您非常接近：切换两个循环以获得您正在寻找的效果。

```
for (PlayingCard.CardSuit suit : PlayingCard.CardSuit.values())
    for (PlayingCard.CardRank rank : PlayingCard.CardRank.values()) 
```

其他一切看起来都不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T02:29:19.663

交换嵌套 for 循环的顺序。也就是说，将其更改为：

```
for (PlayingCard.CardSuit suit : PlayingCard.CardSuit.values())
      for (PlayingCard.CardRank rank : PlayingCard.CardRank.values()) 
```

请记住，每次通过外循环时，内循环都会运行一次。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T02:30:30.033

在我看来，它可能很简单：

```
for (PlayingCard.CardSuit suit : PlayingCard.CardSuit.values())
{  
    for (PlayingCard.CardRank rank : PlayingCard.CardRank.values())   

    {
       System.out.printf(" %c%c ", rank.getSymbol(),suit.getSymbol());
    }
} 
```

.. 换掉两个嵌套的 for 循环。

# php - 为什么我的 ftp 在 php 中上传不起作用？

> ID：10629113
> 
> 赞同：0
> 
> 时间：2012-05-17T02:25:26.970
> 
> 标签：php, file-upload, ftp

这是我正在尝试的代码：

```
 $ftp_user_name='user'; 
        $ftp_user_pass='pass'; 
        $ftp_server='ip.addr.ess';
        $ftp_dir='/site.com/public_html/upload/'; //www.site.com/upload/
        $upload_file='some.txt';

        $destination_file=$ftp_dir.$upload_file; 

        $conn_id = ftp_connect($ftp_server); 
        $login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass); 

        $upload = ftp_put($conn_id, $destination_file, $upload_file, FTP_BINARY); 
```

没有上传任何内容，但该文件存在于我的服务器上。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:08:08.677

Does your FTP user have write permission on the destination server?

# iphone - 在导航栏下添加信息栏

> ID：10629115
> 
> 赞同：0
> 
> 时间：2012-05-17T02:25:54.067
> 
> 标签：iphone, ios, uinavigationcontroller

我想知道如何添加一个栏，其中包含您在网站上获得的类似碎屑痕迹的内容。有点像这样（信息栏是导航栏，带有的栏是我的子栏，日历是表格视图）。

![在此处输入图像描述](../Images/52773ec3893c6908d3416727d0b584ff.png)

好的，所以我希望这仍然有意义。但这几乎是我想做的……我正在寻找最好的方法？

我是否可以将我的 uitableviewcontroller 更改为带有工具栏的普通视图（窗口）？然后将tableview放在窗口内，然后将其推送到导航堆栈上？我不确定，但希望这里有人比我有更好的主意，可以帮助我:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:39:53.990

UINavigationController 有一个默认禁用的工具栏。使用以下命令启用它：

```
- (void)setToolbarHidden:(BOOL)hidden animated:(BOOL)animated 
```

然后您可以添加 UIToolbarButtons 并根据需要调整其框架。

但我建议将工具栏保留在底部以获得适当的可用性。人们不喜欢不小心撞到他们不想要的东西，因为按钮的位置太近了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T02:31:44.143

嗯，不确定是否能完美地跟随你，但你可以在 UITableViewController 的顶部添加任何东西（包括你的信息栏），因为有一个 Header UIView 以及一个 Footer （只需尝试在 IB 中拖动一些东西就在你的 tableview 上方）。

希望能帮助到你。

# python - Pygame不会导入到python

> ID：10629119
> 
> 赞同：2
> 
> 时间：2012-05-17T02:26:12.173
> 
> 标签：python, pygame

当我输入 import pygame 时，我收到一条错误消息：

```
Traceback (most recent call last):
  File "<pyshell#0>", line 1, in <module>
    import pygame
  File "C:\Python27\lib\site-packages\pygame\__init__.py", line 95, in <module>
    from pygame.base import *
ImportError: DLL load failed: The specified module could not be found.
>>> 
```

有人知道这是什么意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:28:46.877

这意味着您需要查看`pygame\base.pyd`Dependency Walker 并查看它找不到哪个 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T18:27:03.010

我也犯了这个错误。问题是您正在使用 Idle Shell 来尝试构建 Python 程序。这是我摆脱外壳的方法：

1.  将 Idle Shell 保存为 .py 在您选择的位置
2.  之后，找到您创建的 .py。
3.  左键单击，然后右键单击以显示上下文子菜单（带有复制/粘贴的菜单）
4.  选择“空闲编辑”
5.  这将在编辑器窗口中打开 .py 文件。删除所有额外内容以创建空白屏幕
6.  现在您可以导入模块并开始编程：

    ```
    import os, sys
    import pygame
    from pygame.locals import *
    [...] 
    ```

这将使您抢先使用 pygame。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-07T01:50:10.667

Game Development（另一个 Stack Exchange 站点）上的这个问题应该回答你的问题： [安装正确版本的 PyGame](https://gamedev.stackexchange.com/questions/56595/installing-the-right-version-of-pygame)
这个用户不能让 Python 知道 PyGame 在那里，所以他问了这个问题。他的问题应该和你的差不多，方便你。我希望这可以帮助你！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-09T05:33:56.983

`pip install pygame`如果您有 Windows PC，或者`pip3 install pygame`如果您有 Linux 或 MacOS ，请在命令提示符下输入。

# c# - 如何合并gridview行

> ID：10629123
> 
> 赞同：1
> 
> 时间：2012-05-17T02:26:58.823
> 
> 标签：c#, asp.net, gridview, merge

我想合并表，但我不知道如何。我已经尝试了很多次，但仍然无法得到正确的解决方案。现在我的gridview是这样的：

```
Data 1  |  Data 1  |  Data 1  |  Data 1
Data 1  |  Data 1  |  Data 1  |  Data 1
Data 2  |  Data 2  |  Data 2  |  Data 2
Data 2  |  Data 2  |  Data 2  |  Data 2 
```

我希望gridview是这样的：

```
Data 1   |   Data 1   |   Data 1  |   Data 1
         |   Data 1   |   Data 1  |
Data 2   |   Data 2   |   Data 2  |   Data 2
         |   Data 2   |   Data 2  | 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:34:54.033

*   [如何在 GridView 中合并具有相等值的单元格，](http://www.codeproject.com/Articles/34337/How-to-merge-cells-with-equal-values-in-a-GridView) 这将对您有所帮助

合并单元格的代码非常短：

```
public class GridDecorator
{
    public static void MergeRows(GridView gridView)
    {
        for (int rowIndex = gridView.Rows.Count - 2; rowIndex >= 0; rowIndex--)
        {
            GridViewRow row = gridView.Rows[rowIndex];
            GridViewRow previousRow = gridView.Rows[rowIndex + 1];

            for (int i = 0; i < row.Cells.Count; i++)
            {
                if (row.Cells[i].Text == previousRow.Cells[i].Text)
                {
                    row.Cells[i].RowSpan = previousRow.Cells[i].RowSpan < 2 ? 2 : 
                                           previousRow.Cells[i].RowSpan + 1;
                    previousRow.Cells[i].Visible = false;
                }
            }
        }
    }
} 
```

最后一个动作是为 GridView 添加一个 OnPreRender 事件处理程序：

```
protected void gridView_PreRender(object sender, EventArgs e)
{
    GridDecorator.MergeRows(gridView);
} 
```

# winapi - 确定 Windows 中哪个进程创建了共享内存

> ID：10629124
> 
> 赞同：0
> 
> 时间：2012-05-17T02:27:04.043
> 
> 标签：winapi, shared-memory

我正在处理的系统有许多进程正在运行。在共享内存的上下文中，有些是服务器，有些是客户端。

`CreateFileMapping`他们通过和 创建/访问共享内存`MapViewOfFile`。

我最近更改了其中一个客户端的结构，这导致客户端尝试映射一个比服务器进程创建的更大的共享内存区域。结果是拒绝访问。

我的问题是，我不知道最初是哪个进程创建了内存。有没有办法访问有关共享内存的元信息以确定需要重新编译哪个服务器程序？

要确认，它`MapViewOfFile`是失败的，错误代码为 5：访问被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:36:12.963

存在两种类型的共享内存：动态（使用 CreateFileMapping...您的场景）和静态（在 PE 部分特性中声明的内存映射）。可以在文件和进程级别测试具有共享内存特征的 PE 部分的存在。

另一方面，[MapViewOfFile](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366761%28v=vs.85%29.aspx)失败的原因可能不是映射内存的大小不同（例如凭据、内存偏移量......）

# javascript - 糟糕的JavaScript？hello bar solo 仅在主页上工作 - 没有其他页面

> ID：10629125
> 
> 赞同：0
> 
> 时间：2012-05-17T02:27:08.873
> 
> 标签：javascript, e-commerce

我正在经营一家大型商业商店，并在网站页脚中安装了 hello bar 单独的自定义代码。我还尝试将 hellobar 代码放置在各个位置（标题模板文件、默认模板文件、页面特定模板文件）。出于某种原因，hello-bar 只能在我的主页上使用，而不能在任何其他页面上使用。

关于为什么的任何想法？好像如果我把它放在页脚中，它应该出现在每一页上，但这不是我得到的。如果您需要更多详细信息或代码示例来帮助，请告诉我。

谢谢

顺便说一句，bigcommerce 支持还认为，如果我在页脚中有此代码，则 hellobar 应该显示在每个页面上，但它不起作用。我的猜测是它是javascript，但我不知道如何解决这个问题。

这是我正在使用的代码：

```
 <div id="mailchimp_form" style="display:none;">
<form action="http://xxxxx.us5.list-manage.com/subscribe/post" method="POST">
<input type="hidden" name="u" value="xxxxxxxx">
<input type="hidden" name="id" value="xxxxx">
Get an instant coupon code by signing up to our newsletter.  Email: <input type="email" autocapitalize="off" autocorrect="off" name="MERGE0" id="MERGE0" size="25" value="" />
<input class="button" type="submit" value="Subscribe" />
</form>
</div>
<!-- Hello Bar configuration start -->
<script type="text/javascript">
var mailChimpForm = document.getElementById('mailchimp_form').innerHTML;
new HelloBar( mailChimpForm, {
    showWait: 1000,
    positioning: 'sticky',
    fonts: 'Arial, Helvetica, sans-serif',
    forgetful: true
}, 1.0 );
</script> 
```

以下是我放在标题中的参考资料：

```
<link type="text/css" rel="stylesheet" href="content/hellobar.css" />
<script type="text/javascript" src="content/hellobar.js"></script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:31:57.770

不知道 bigcommerce 是什么，但从您提供的内容来看，我猜测是两个原因之一。

1.  除了您的主页外，没有“mailchimp_form” div。
2.  由于某些奇怪的原因，Javascript 确实在“mailchimp_form” div 加载到所有其他页面之前执行。

# java - 简单的 dbunit 表比较失败

> ID：10629127
> 
> 赞同：1
> 
> 时间：2012-05-17T02:27:25.697
> 
> 标签：java, junit, junit4, dbunit

为什么这不起作用？我试图测试一个空数据库在什么都不做之前和什么都不做之后是一样的。换句话说，这是我能想到的最简单的带有数据库的 dbunit 测试。它不起作用。测试方法实际上来自[http://www.dbunit.org/howto.html](http://www.dbunit.org/howto.html)

我得到比较空数据库的错误消息是：

```
java.lang.AssertionError: expected:
org.dbunit.dataset.xml.FlatXmlDataSet<AbstractDataSet[_orderedTableNameMap=null]>
but was:
org.dbunit.database.DatabaseDataSet<AbstractDataSet[_orderedTableNameMap=null]> 
```

我得到比较空表的错误消息是：

```
java.lang.AssertionError: expected:
<org.dbunit.dataset.DefaultTable[_metaData=tableName=test, columns=[], keys=[], _rowList.size()=0]>
but was:
<org.dbunit.database.CachedResultSetTable[_metaData=table=test, cols=[(id, DOUBLE, noNulls), (txt, VARCHAR, nullable)], pk=[(id, DOUBLE, noNulls)], _rowList.size()=0]> 
```

（为了便于阅读，我添加了换行符）

如果有用的话，我可以在完整的堆栈跟踪（或其他任何内容）中进行编辑。或者您可以浏览公共 git 存储库：[https ://bitbucket.org/djeikyb/simple_dbunit](https://bitbucket.org/djeikyb/simple_dbunit)

我是否需要以某种方式将我的实际 IDataSet 转换为 xml，然后返回 IDataSet 以进行正确比较？我在做什么/期待错了？

```
 34 public class TestCase
 35 {
 36 
 37   private IDatabaseTester database_tester;
 38 
 39   @Before
 40   public void setUp() throws Exception
 41   {
 42     database_tester = new JdbcDatabaseTester("com.mysql.jdbc.Driver",
 43                                             "jdbc:mysql://localhost/cal",
 44                                             "cal",
 45                                             "cal");
 46 
 47     IDataSet data_set = new FlatXmlDataSetBuilder().build(
 48         new FileInputStream("src/simple_dbunit/dataset.xml"));
 49     database_tester.setDataSet(data_set);
 50 
 51     database_tester.onSetup();
 52   }
 53 
 54   @Test
 55   public void testDbNoChanges() throws Exception
 56   {
 57     // expected
 58     IDataSet expected_data_set = new FlatXmlDataSetBuilder().build(
 59         new FileInputStream("src/simple_dbunit/dataset.xml"));
 60 
 61     // actual
 62     IDatabaseConnection connection = database_tester.getConnection();
 63     IDataSet actual_data_set = connection.createDataSet();
 64 
 65     // test
 66     assertEquals(expected_data_set, actual_data_set);
 67   }
 68 
 69   @Test
 70   public void testTableNoChanges() throws Exception
 71   {
 72     // expected
 73     IDataSet expected_data_set = new FlatXmlDataSetBuilder().build(
 74         new FileInputStream("src/simple_dbunit/dataset.xml"));
 75     ITable expected_table = expected_data_set.getTable("test");
 76 
 77     // actual
 78     IDatabaseConnection connection = database_tester.getConnection();
 79     IDataSet actual_data_set = connection.createDataSet();
 80     ITable actual_table = actual_data_set.getTable("test");
 81 
 82     // test
 83     assertEquals(expected_table, actual_table);
 84   }
 85 
 86 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:06:19.843

与其他 DBUnit 组件进行比较时`IDataSet`，必须使用 DBUnit 提供的[assert 方法](http://www.dbunit.org/apidocs/org/dbunit/Assertion.html)。

如果您使用 JUnit 提供的 assert 方法，它只会通过`equals`方法进行比较，`Object` 这就是为什么您会收到抱怨不同对象类型的错误。

# php - MySQL选择不返回资源

> ID：10629129
> 
> 赞同：1
> 
> 时间：2012-05-17T02:27:47.290
> 
> 标签：php, javascript, mysql

我的 PHP MySQL Select 有一个小问题。该函数位于 PHP 类中。这是我得到的错误：

> 警告：mysql_fetch_array() 期望参数 1 是资源，整数在 C:\xampp\htdocs\include\database.php 第 59 行中给出警告：extract() 期望参数 1 是数组，在 C:\xampp\ 中给出 null htdocs\include\database.php 第 59 行

该功能只是简单地更新数据库以显示他们访问该站点的浏览器和操作系统。该函数是从另一个由 AJAX 调用调用的文件调用的，该调用使用 POST 发送从 Javascript 文件收集的有关操作系统和浏览器的数据。仅当数据库中已有 IP 地址条目时才会失败。如果数据库中没有 IP 地址条目，它将成功创建一个。

这是我的代码：

```
function addStat($browser, $os){
    $IE = 0; $Firefox = 0; $Safari = 0; $Opera = 0; $Chrome = 0; $otherb = 0;
    $Windows = 0; $Linux = 0; $Mac = 0; $Android = 0; $iOS = 0; $otheros = 0;
    $ql = 0; $totalVisits = 0;
    $ip = ip2long($_SERVER['REMOTE_ADDR']);
    $q1 = mysql_query("SELECT * FROM " . DB_STATS . " WHERE ip='$ip'", $this->connection);
    if (mysql_num_rows($q1)==0){
        $browser = mysql_real_escape_string($browser);
        $os = mysql_real_escape_string($os);
        switch($browser){
            case "Internet Explorer":
                $IE += 1;
            break;
            case "Firefox":
                $Firefox += 1;
            break;
            case "Safari":
                $Safari += 1;
            break;
            case "Opera":
                $Opera += 1;
            break;
            case "Chrome":
                $Chrome += 1;
            break;
            default:
                $otherb += 1;
            break;
        }
        switch($os){
            case "Windows":
                $Windows += 1;
            break;
            case "Mac OS X":
                $Mac += 1;
            break;
            case "Linux":
                $Linux += 1;
            break;
            case "Android":
                $Android += 1;
            break;
            case "iOS":
                $iOS += 1;
            break;
            default:
                $otheros += 1;
            break;
        }
        $q = $this->query("INSERT INTO " . DB_STATS . " VALUES (null, '$ip', '$Chrome', '$IE', '$Firefox', '$Opera', '$Safari', '$otherb', '$Windows', '$Mac', '$Linux', '$Android' , '$iOS' , '$otheros', 1)");
        if ($q == true){
           return(1);
        }
        else{
           return(0);
        }
    }
    else if (mysql_num_rows($q1)==1){
        extract(mysql_fetch_array($ql));
        switch($browser){
            case "Internet Explorer":
                $IE += 1;
            break;
            case "Firefox":
                $Firefox += 1;
            break;
            case "Safari":
                $Safari += 1;
            break;
            case "Opera":
                $Opera += 1;
            break;
            case "Chrome":
                $Chrome += 1;
            break;
            default:
                $otherb += 1;
            break;
        }
        switch($os){
            case "Windows":
                $Windows += 1;
            break;
            case "Mac OS X":
                $Mac += 1;
            break;
            case "Linux":
                $Linux += 1;
            break;
            case "Android":
                $Android += 1;
            break;
            case "iOS":
                $iOS += 1;
            break;
            default:
                $otheros += 1;
            break;
        }
        $totalVisits += 1;
        $q = $this->query("UPDATE " . DB_STATS . " set Chrome='$Chrome', IE='$IE', Firefox='$Firefox', Opera='$Opera', Safari='$Safari', otherb='$otherb', Windows='$Windows', Mac='$Mac', Linux='$Linux', Android='$Android' , iOS='$iOS' , otheros='$otheros', totalVisits='$totalVisits'");
        if ($q == true){
           return(1);
        }
        else{
           return(0);
        }
    }
    else{
        return(-1);
    }
} 
```

我希望一切都有意义，并且有人会提供帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:35:02.440

我现在明白了——`$ql`当你打算使用`$q1`. 让这成为反对使用非常短的变量名称或非常相似的名称的教训。

```
// $ql was initialized to 0
$ql = 0; $totalVisits = 0;

// $q1 holds the result resource
extract(mysql_fetch_array($q1)); 
```

除非您还将第二个参数指定为获取类型，否则不建议调用`extract()`的输出。默认情况下，它返回每列*的*数字和关联索引。`mysql_fetch_array()``MYSQL_ASSOC`

 *```
extract(mysql_fetch_array($q1, MYSQL_ASSOC));
// Or better
extract(mysql_fetch_assoc($q1)); 
```

一般来说，我可能会建议不要`extract()`在大多数情况下使用，因为它会导致大量变量转储到全局命名空间中，特别是当您在`SELECT *`没有具体选择哪些列的情况下完成操作时。最好通过他们的数组访问它们：

```
$row = mysql_fetch_assoc($q1);
echo $row['browser']; 
```*

# google-apps-script - 是否会在 Gmail 应用脚本 API 中添加一个函数来获取分配给邮件的星标类型？

> ID：10629130
> 
> 赞同：1
> 
> 时间：2012-05-17T02:27:48.437
> 
> 标签：google-apps-script, gmail

Gmail 设置允许在[几个](https://support.google.com/mail/bin/answer.py?hl=en&answer=7190)（“黄星”、“红星”、“绿复选”...）中设置不同类型的星。
可以使用的星类型数量可以在 Gmail[设置菜单](http://support.google.com/mail/bin/answer.py?hl=en&answer=5904)中设置。

[Google Apps Script](https://developers.google.com/apps-script/)的[Gmail 服务](https://developers.google.com/apps-script/service_gmail)包含一个[GmailMessage::isStarred](https://developers.google.com/apps-script/class_gmailmessage#isStarred)，它只返回一个布尔值。它不提供设置的星的类型。

是否会修改此函数或添加其他函数以返回为消息设置的星型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-09-30T23:15:47.523

```
GmailApp.search('label:^ss_sg') 
```

似乎只适用于获得绿色星星。各种代码都在[这个问题的答案中](https://stackoverflow.com/questions/31157723/unable-to-search-for-specific-coloured-star-superstars-using-advanced-search-i)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T03:12:51.360

似乎希望这种情况发生。[最好的地方是在 Apps Script issue tracker](http://code.google.com/p/google-apps-script-issues/issues/list)上填写“增强请求” 。

无论如何，由于我们在这个主题上，您可以通过在 gmail 上发出[适当的搜索来获取特定明星的所有消息。](http://support.google.com/mail/bin/answer.py?hl=en&answer=7190)

# asp.net - 如何设置 web.config 以查看 ASP.NET MVC3 项目的完整错误消息

> ID：10629133
> 
> 赞同：4
> 
> 时间：2012-05-17T02:28:15.823
> 
> 标签：asp.net, .net, asp.net-mvc-3, web-config

如何设置 web.config 以远程查看 ASP .NET MVC3 项目的完整错误消息？

所以我需要详细的错误信息...

我在 web.config 下有这个，但它似乎不起作用......

```
<system.web>
 <customErrors mode="off" /> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T02:43:47.283

最后我找到了解决方案。

是的，我们需要`<customErrors mode="off" />`，而且我们必须在 IIS 下重新启动网站。

# regex - 使用正则表达式和转义双引号将变量导入 FINDSTR

> ID：10629139
> 
> 赞同：1
> 
> 时间：2012-05-17T02:28:50.517
> 
> 标签：regex, batch-file, findstr

我正在尝试了解发送给我的批处理文件，以便在他们解决问题时解决第三方程序中的错误。基本上，他们正在运行 findstr 正则表达式命令以确定字符串是否匹配。如果是这样，则在将其传递给原始命令行程序之前，将手动重新添加不应删除的特殊字符。

尽我所知，所提供的内容不起作用或我不明白。我在下面粘贴相关的代码部分。

```
@echo off
setlocal
set username=%1
shift
echo %username% | findstr /r "^\"[0-9][0-9]*\"" >nul
if not errorlevel 1 (set username=";%username:~0,9%=%username:~10,4%?")
echo %username% 
```

我真正有疑问的三件作品如下：

1.  我相信上述正则表达式的未转义解释是`^"[0-9][0-9]*"`我认为这意味着字符串必须以数字字符*开头*，然后必须包含*零个或多个*额外*的纯数字*字符才能找到匹配项。好吧，FINDSTR 似乎对转义的引号做了一些奇怪的事情，我无法让它与我尝试过的任何东西相匹配。如果我删除`\"`周围，`[0-9][0-9]*`那么我可以让它工作，但它不能正确拒绝非数字字符，例如输入字符串`123456789O1234`（该示例字符串中有一个字母 O 而不是零）。
2.  有什么意义`>nul`
3.  检查等于 0 的错误级别而不是“非错误级别 1”不是更好吗，因为它[可能返回错误级别 2](https://stackoverflow.com/questions/8844868/what-are-the-undocumented-features-and-limitations-of-the-windows-findstr-comman)？

无论如何，以下代码有效，但并不像我想要的那样精确。我只是想了解为什么正则表达式字符串中的引号不起作用。也许这是 FINDSTR 的一个限制，但我还没有遇到任何确定的东西。

```
@echo off
setlocal
set username=%1
shift
echo %username% | findstr /r "^[0-9][0-9]*" >nul
if not errorlevel 1 (set username=";%username:~0,9%=%username:~10,4%?")
echo %username% 
```

我可以通过重复类 14 次来解决这个问题，因为这是我的情况下的字符数（[超过 15 个类会导致它崩溃](https://stackoverflow.com/questions/2635740/why-does-findstr-not-handle-case-properly-in-some-circumstances/8767815#8767815)- 滚动到底部）。我仍然对如何更简单地实现这一点感到好奇，当然还有剩下的 2 个问题。

## 编辑/工作解决方案

```
@echo off
setlocal enableDelayedExpansion
set username=%~1
shift
echo !username!|findstr /r /c:"^[0-9][0-9]*$" >nul 
if not errorlevel 1 (set username=";!username:~0,9!=!username:~10,4!?")
echo !username! 
```

笔记：

*   当我将现有代码修改为更接近 dbenham 的代码后第一次运行它时，[enableDelayedExpansion](http://ss64.com/nt/delayedexpansion.html)和设置用户名的引号一样给出了错误（见下文）。我无法复制我做错的事情，但现在一切正常（以防其他人遇到同样的问题）。
*   我曾尝试使用`$`EOL 标记（这是强制它仅匹配数字内容的关键），但我认为其他问题阻碍了我认为这不是解决方案。此外，为了确保`$`作品不会错过这部分 dbenham 的回答“......您还必须确保您的回显值和管道符号之间没有空格。”
*   简而言之，似乎试图在 findstr 的正则表达式中添加双引号是错误的语法/不起作用/等等...除非您实际上正在寻找匹配 " 在您正在解析的字符串/文件中。请参阅 dbenham 的答案为了清楚起见，正如他所指出的，您可以使用 %~1 从参数中去除引号，而不是将其添加到您的正则表达式中（并在需要时以编程方式将它们重新添加）。

错误信息

```
C:>sample.bat 123456789
'enableDelayedExpansion' is not recognized as an internal or external command,
operable program or batch file.
'"' is not recognized as an internal or external command,
operable program or batch file.
!username! 
```

参考链接：

*   [Windows FINDSTR 命令的未记录功能和限制](https://stackoverflow.com/questions/8844868/what-are-the-undocumented-features-and-limitations-of-the-windows-findstr-comman)
*   [findstr 的大小写异常（在某些情况下不能正确处理大小写）](https://stackoverflow.com/questions/2635740/)
*   [http://ss64.com/nt/findstr.html](http://ss64.com/nt/findstr.html)
*   [http://www.robvanderwoude.com/findstr.php](http://www.robvanderwoude.com/findstr.php)
*   [http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/findstr.mspx](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/findstr.mspx)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T03:56:54.007

以相反的顺序回答您的问题：

3)`if not errorlevel 1`可能与`if %errorlevel%==0`IF ERRORLEVEL 1 表示如果 ERRORLEVEL 大于或等于 1 相同。所以在前面放置 NOT 表示如果 ERRORLEVEL 小于 1。我相信 FINDSTR 永远不会返回负的 ERRORLEVEL，所以语法应该是好的。

2)`>nul`将 FINDSTR 的 stdout 输出重定向到 nul 设备，这意味着它禁用了输出。通常会打印任何匹配的行。你只对返回码感兴趣——你不想看到输出。

1) 原始正则表达式将匹配任何以引号开头的输入字符串，后跟至少一个数字，然后是另一个引号。它忽略第二个引号之后可能出现的任何字符。

因此以下字符串（包括引号）将匹配：

*   “0”
*   “01234”
*   “0”一
*   “01234”一

以下字符串将不匹配：

*   0
*   01234
*   “”
*   “0a”

如果匹配字符串中的位数达到一定长度，则原始代码会出现问题，因为结束引号被剥离导致结束 ) 被引用，因此脚本的其余部分失败。

我不了解您的要求，所以我不知道如何修复代码。

听起来您不想匹配具有非数字的字符串。这意味着您需要在正则表达式的末尾包含行尾标记 $。但您还必须确保回显值和管道符号之间没有空格。

我相信您可能不希望在您的价值中使用引号，（否则您应该在最后以编程方式添加它们）。您可以使用 %~1 从提供的参数中删除任何封闭引号。

如果您要检查参数 1 是否仅由数字组成，则可以使用：

```
setlocal enableDelayedExpansion
set "username=%~1"
echo !username!|findstr /r "^[0-9][0-9]*$" >nul 
```

我使用了延迟扩展，因为您无法控制 %1 中的字符，以及它是否包含特殊字符，如 & 或 | 如果您使用正常扩展，它将导致问题。我给出的语法不是防弹的，但它可以处理大多数“正常”情况。

在您的情况下没有必要，但我更喜欢使用 /c 选项，以防您的搜索字符串包含空格。所以上面可以写成

```
echo !username!|findstr /r /c:"^[0-9][0-9]*$" >nul 
```

我觉得奇怪的是，如果原始代码和修改后的代码与您的正则表达式不匹配，它只会通过用户名。也许这是你的意图，也许不是。

# android - 如何使用flex4使用前置摄像头

> ID：10629141
> 
> 赞同：2
> 
> 时间：2012-05-17T02:29:27.547
> 
> 标签：android, actionscript-3, apache-flex, camera, flex4

我使用 flex 4 为 Android 手机开发了简单的摄像头应用程序。问题是，当我运行该应用程序时，它使用后置摄像头。它没有使用前置摄像头。怎么换相机。我需要为此应用程序使用前置摄像头，请帮助我。

```
var camera:Camera = Camera.getCamera(cameraIndex.toString());
if (camera)
{
    var ui: UIComponent = new UIComponent();
    var localVideoDisplay: Video = new Video(180, 135);
    localVideoDisplay.attachCamera(camera);
    ui.addChild(localVideoDisplay);                     
    cameraGroup.addChild(ui);
} 
```

这是我在我的应用程序中使用的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:39:05.460

尝试

```
function getCamera( position:String ):Camera
{
    var camera:Camera;
    var cameraCount:uint = Camera.names.length;
    for ( var i:uint = 0; i < cameraCount; ++i )
    {
        camera = Camera.getCamera( String(i) );
        if ( camera.position == position ) 
            return camera;
    }
    return Camera.getCamera();
} 
```

采用 `getCamera(CameraPosition.FRONT)`

# asp.net - System.Addin - 创建安全的 ASP.NET MVC 插件

> ID：10629144
> 
> 赞同：25
> 
> 时间：2012-05-17T02:29:47.967
> 
> 标签：asp.net, asp.net-mvc, plugins, appdomain

最近我的重点是创建一个可以托管 3rd 方 MVC 插件的 ASP.NET MVC 应用程序。理想情况下，这些插件的开发将遵循以下规则：

1.  插件可以在标准的 MVC 项目中开发，并且能够使用 ASP.NET MVC 框架的所有现有基础设施。
2.  编译插件 MVC 项目并将其包含到主机 MVC 应用程序中的复杂性不应该很严重。
3.  对 MVC 应用程序的正常开发流程的任何更改都是最低限度的

经过一些研究，我想出了以下方法来实现这一点，每种方法都有自己的优点和缺点。

## 方法 1 - MVC 插件程序集加载到主 MVC AppDomain

**工作流程**

*   在单独的 MVC 项目中开发插件。
*   **编译程序集并通过MEF**或宿主项目中的基本程序集引用（如果可能）将它和任何依赖项加载到宿主应用程序`PreApplicationStartMethodAttribute`中。
***   将路由映射到插件控制器，以便将插件视为`Area`主机内的一个。*   将插件视图放入正确的区域文件夹中。需要更改布局文件，以便布局路径指向基于区域的位置，而不是应用程序的根目录（开发 MVC 项目中就是这种情况）*   当插件请求进入时，ASP.NET 将使用现有区域功能将请求路由到正确的控制器并在正确的位置查找视图文件。**

 ****优点**

1.  将像控制器嵌入到主机 MVC 应用程序程序集中一样无缝地工作。
2.  `PreApplicationStartMethodAttribute`在应用程序启动之前（项目参考）和应用程序启动之后（**MEF**）简单地将程序集包含到主机应用程序域中

**缺点**

1.  没有沙盒 - 控制器将具有与主机相同的信任级别。

**结论**

这是最简单的方法，但也是最不安全的。它基本上消除了允许不受信任的开发人员创建插件的可能性，因为这些插件将具有与宿主应用程序相同的信任级别（这意味着如果宿主应用程序可以执行诸如 之类的方法`System.IO.File.Delete`，那么插件也可以）

## 方法 2 - 通过 MAF 在自己的 AppDomain 中运行的 MVC 插件程序集

这种方法旨在允许创建 MVC 插件，这些插件可以被沙箱化`AppDomains`并由主机通过`System.Addin`库使用。

**结构**

1.  在主机中设置了一个路由，用于确定正在处理的 url 是否针对插件。可能有一个模式，如`example.com/p/{plugin}/{controller}/{action}/{id}`

2.  具有上述模式的所有路由都映射到具有模块路由操作的主机控制器。该操作查看任何给定的路由，并根据`{plugin}`段确定适当的插件来处理请求。

3.  插件视图是一个接收器/发送器对象，充当插件控制器的网关。它有一个名为**AcceptRequest**的方法，它接收`RequestContext`来自主机的 a，并返回一个`ActionResult`.

4.  插件管道包含可以串行化`RequestContext`和`ActionResult`跨管道隔离边界传输的适配器。

**执行流程**

1.  匹配插件的路由并调用插件路由控制器。

2.  控制器将所需的插件加载到自己的插件中`AppDomain`并调用**AcceptRequest**，通过`RequestContext`（通过管道序列化）

3.  **AcceptRequest**接收上下文并根据该请求确定要执行的适当控制器（使用自定义控制器工厂）。

4.  一旦控制器完成了请求的执行，它`ActionResult`会向接收者对象返回一个，然后将它`ActionResult`（也通过管道序列化）传递回主机`AppDomain`。

5.  最初调用**AcceptRequest**的控制器然后可以将其返回`ActionResult`给主机 MVC 执行管道，就好像它自己处理了请求一样。`AppDomain`如果愿意，可以卸载插件。

**优点**

插件将被沙箱`AppDomain`化，因此可以使用适合主机的任何权限集。

**缺点**

*   必须可以序列化`RequestContext`和`ActionResult`.
*   可能会破坏隔离的`AppDomain`.

**结论**

这种方法在纸上听起来不错，但我不确定序列化`RequestContext`and`ActionResult`对象是否可能/可行，以及单独运行 MVC 控制器。

## 问题

如果代码是由受信任的开发人员创建的，则第一种方法很好。我知道我不会删除所有主机视图文件或它的 web.config 文件。但最终，如果您希望第三方开发人员为您的 MVC 应用程序创建插件，您需要能够对他们的代码进行沙箱处理。

根据我的所有研究，`System.Addin`当您使用基于 API 的简单类库时，该库可以轻松实现主机/插件环境。然而，当涉及到 MVC 时，似乎并不容易做到这一点。

我的一些问题是：

1.  我在这里概述的第二种方法可行吗？
2.  有一个更好的方法吗？
3.  未来是否会有更简单的方法来实现 MVC 插件隔离？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-30T16:49:20.673

您最终将为每个插件创建单独的站点。这样，您可以为每个 AppPool 创建降低权限的用户，系统管理员可以将“插件”安装为在该用户下运行的网站。

任何替代方案都将展示内部平台反模式。除非您有大量时间和金钱来开发插件托管系统，否则您将陷入其中并憎恨它。我根据经验说话。

这些站点可以共享 AspnetIdentity 用户存储库，您可以将核心对象作为可以引用的 dll 提供。在 CDN 上托管您的内容（脚本文件、css、图像），以便可以引用它们。如果您想与您的子站点共享视图，请将它们编译为资源：

[在 ASP.NET MVC Web 应用程序中包含预编译的视图](https://stackoverflow.com/questions/13584288/including-pre-compiled-views-in-an-asp-net-mvc-web-application)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:45:51.523

恕我直言 System.AddIn 对于您尝试做的事情来说有点矫枉过正。

您熟悉[System.Security.Permissions](http://msdn.microsoft.com/en-us/library/system.security.permissions)命名空间吗？如果没有，您可以查看[FileIOPermission](http://msdn.microsoft.com/en-us/library/system.security.permissions.fileiopermission)。也许您可以通过使用（为什么不，甚至扩展）.NET的[代码访问安全机制来沙箱化您的可扩展系统。](http://msdn.microsoft.com/en-US/library/c5tk9z76%28v=vs.100%29)**

# javascript - Javascript如何在下拉菜单中使用类而不是id

> ID：10629145
> 
> 赞同：0
> 
> 时间：2012-05-17T02:30:00.440
> 
> 标签：javascript, html, forms, dom-events

我有另一个与此类似的问题，并试图看看我是否可以让它以类似的方式工作，但我没有成功。我有两个下拉菜单，其中一个的选项取决于您在第一个下拉菜单上选择的选项，但我遇到了一个问题，我需要在同一页面上使用相同的菜单两次，我认为可能已经奏效，但没有。我自己意识到这是因为你不能有两个具有相同 ID 的对象。我想知道如何使下面的脚本与类而不是表单的 id 一起使用？

```
var i;
function fill_damage(i){
    var form1 = document.getElementById("form1a");
    document.form1aa.damage.options.length=0;
    switch(i)
    {
        case 1:
            form1.damage.options[0] = 
                new Option('Cracked screen','Cracked screen');
            form1.damage.options[1] =
                new Option('Cracked top case','Cracked top case');
            form1.damage.options[2] =
                new Option('Cracked bottom case','Cracked bottom case');
            form1.damage.options[3] =
                new Option('Broken keyboard','Broken keyboard');
            form1.damage.options[4] =
                new Option('Faulty touch pad','Faulty touch pad');
            form1.damage.options[5] =
                new Option('Hinge broken','Hinge broken');
            form1.damage.options[6] =
                new Option('Motherboard','Motherboard');
            form1.damage.options[7] =
                new Option('Hard drive','Hard drive');
            break;
        case 2:
            form1.damage.options[0] =
                new Option('Re image','Re image');
            form1.damage.options[1] =
                new Option('Wireless cert','Wirless cert');
            form1.damage.options[2] =
                new Option('Application','Application');
            form1.damage.options[3] =
                new Option('Hacked','Hacked');
    }
}

<form name="form1aa" method="post" id="form1a" >
    <select name="type" 
        onChange="fill_damage(document.form1aa.type.selectedIndex);">
        <option value="">Select Type</option>
        <option value="Hardware">Hardware</option>
        <option value="Software">Software</option>
    </select> 
    <select name="damage">
        <option selected="selected">Select Type First</option>
    </select>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:40:31.670

你需要的是`document.getElementsByClassName()`

```
document.getElementsByClassName("yourClass")[0]; //first node with that class 
```

小心你可以在这里看到：[http](http://www.quirksmode.org/dom/w3c_core.html#fivemethods) : //www.quirksmode.org/dom/w3c_core.html#fivemethods，IE 7/8 没有实现这个方法。我建议看看像 jquery 这样的框架来简化所有浏览器的兼容性问题！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:08:15.840

马修，这是给你的演示。希望我得到了你想要的。

[来源](http://jsbin.com/ibatev/3/edit#javascript,html)| [演示](http://jsbin.com/ibatev/3/edit#preview)

但正如 Allaire 所说，这不适用于旧 IE。如果兼容性有问题，您可以自定义 getElementsByClassName（网上有很多）或使用 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:51:35.590

你需要的是`document.querySelectorAll()`或`document.querySelector()`。

```
document.querySelector(".yourClass"); //first node with that class 
```

它就像一个 jQuery，但在 HTML5 浏览器中是原生的！

这比`document.getElementsByClassName`IE 8 支持它要好！ [http://www.quirksmode.org/dom/w3c_core.html#gettingelements](http://www.quirksmode.org/dom/w3c_core.html#gettingelements)

然后对于*不支持的*：

```
if(!document.querySelectorAll){
    document.querySelectorAll = jQuery;
} 
```

# adapter - 为什么我每次使用Adapter.notifyDataSetChanged()，都会调用两次getView

> ID：10629147
> 
> 赞同：2
> 
> 时间：2012-05-17T02:30:17.980
> 
> 标签：adapter

为什么每次使用Adapter.notifyDataSetChanged()，都会调用两次getView？（我正在使用与适配器一起工作的画廊。）

# ruby-on-rails - 带有咖啡脚本按钮的确认弹出窗口

> ID：10629150
> 
> 赞同：1
> 
> 时间：2012-05-17T02:31:04.313
> 
> 标签：ruby-on-rails, coffeescript

我在我的视图中有 4 个在 coffescript 中实现的按钮，这是视图

```
 %button#warn.button{:type => "submit"}
      Warn
    %button#ban.button{:type => "submit"}
      Ban
    %button#delete.button{:type => "submit"} , 
      Delete
    %button#hide.button{:type => "submit"}
      Hide 
```

在 js.coffee 文件中，这是我写的

```
$(document).ready ->
  $("#warn").click ->
    target = "check_warned"
    $("#needs_form").attr "action", target
    $("#needs_form").submit()

  $("#ban").click ->
    target = "ban "
    $("#needs_form").attr "action", target
    $("#needs_form").submit()

  $("#delete").click ->
    target = " delete "
    $("#needs_form").attr "action", target
    $("#needs_form").submit()

  $("#hide").click ->
    target = " hide "
    $("#needs_form").attr "action", target
    $("#needs_form").submit() 
```

现在我需要添加一个确认弹出窗口“您确定要删除这些帖子吗？” 当我单击删除按钮时..有关如何将其嵌入此代码的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:58:26.737

in your delete click function:

```
$("#delete").click ->
  if window.confirm("are you sure?)
    target = " delete "
    $("#needs_form").attr "action", target
    $("#needs_form").submit() 
```

# grails - 如何派生 Config.groovy 中相对目录的物理路径？

> ID：10629151
> 
> 赞同：0
> 
> 时间：2012-05-17T02:31:25.713
> 
> 标签：grails, groovy

我正在尝试使用来自 GitHub 的源设置 Weceem。它需要为上传目录定义物理路径，并且对于似乎用于编写可搜索索引的目录。上传的默认设置是：

```
weceem.upload.dir = 'file:/var/www/weceem.org/uploads/' 
```

我想使用 WEB-INF/resources/uploads 等相对路径来定义那些。我尝试了一种我以前用于访问具有如下相对路径的目录的方法：

```
 File uploadDirectory = ApplicationHolder.application.parentContext.getResource("WEB-INF/resources/uploads").file
  def absoluteUploadDirectory = uploadDirectory.absolutePath
  weceem.upload.dir = 'file:'+absoluteUploadDirectory 
```

但是，ApplicationHolder.application 下的“parentContext”为 NULL。任何人都可以提供一个解决方案来允许我使用相对路径吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T04:20:08.063

看看你应该有的 Config.groovy（也许它被评论了）

```
// locations to search for config files that get merged into the main config
// config files can either be Java properties files or ConfigSlurper scripts

// "classpath:${appName}-config.properties", "classpath:${appName}-config.groovy",
grails.config.locations = [
        "file:${userHome}/.grails/${appName}-config.properties",
        "file:${userHome}/.grails/${appName}-config.groovy"
] 
```

在部署服务器中创建 Conig 文件

```
"${userHome}/.grails/${appName}-config.properties" 
```

并在该配置文件中定义您的道具（甚至不是相对路径）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T04:43:13.063

为了增加 Aram Arabyan 的回答，这是正确的，但缺乏解释：

Grails 应用程序没有像 PHP 应用程序那样的“本地”目录。它们应该（用于生产）部署在 servlet 容器中。该内容的位置不应被视为可写，因为它可能会在下一次部署时被清除。

简而言之：将您部署的应用程序视为已编译的二进制文件。

取而代之的是，在您的服务器上选择一个特定位置来进行上传，最好是在 Web 服务器路径之外，这样就无法直接访问它们。这就是为什么 Weceem 默认使用`/var/www/weceem.org/`.

如果您使用[外部化配置](http://grails.org/doc/latest/guide/conf.html#configExternalized)技术配置路径，那么您可以拥有特定于服务器的路径，并在您的开发机器上包含*不同的路径。*

但是，在这两种情况下，您都应该使用绝对路径，或者至少是相对于已知目录的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:46:23.150

IE

```
 String base = System.properties['base.dir']     
            println "config: ${base}/web-app/config/HookConfig.grooy"
            String str = new File("${base}/web-app/config/HookConfig.groovy").text
            return new ConfigSlurper().parse(str) 
```

或者

```
def grailsApplication    
private getConfig() {
            String str = grailsApplication.parentContext.getResource("config/HookConfig.groovy").file.text
            return new ConfigSlurper().parse(str)
} 
```

# html - Twitter Bootstrap：隐藏一个行流体容器而没有该行的其他容器向右滑动？

> ID：10629153
> 
> 赞同：0
> 
> 时间：2012-05-17T02:31:34.540
> 
> 标签：html, css, twitter-bootstrap

我正在处理包含一些动态内容的页面。主要布局在同一流体行内的 3 个容器中。我希望第一个容器要么显示两种类型的列表中的一种，要么不显示——因页面状态而异。但是，当我尝试使用 jquery 之类的函数删除元素时`$("#container-id").hide()`，它会将容器向右滑动到左侧，从而使页面布局倾斜。有没有办法在其他容器不向左移动的情况下将这个容器从视图中移除？

这是正在发生的事情的一个例子：http: [//jsfiddle.net/PHaeA/27/](http://jsfiddle.net/PHaeA/27/)

这是一个示例，说明当第一个容器不存在时，我希望容器如何出现：http: [//jsfiddle.net/gLTyF/5/](http://jsfiddle.net/gLTyF/5/)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:48:01.983

听起来最简单的解决方法是（如果可能）在包含内容的跨度内添加一个 div 并隐藏*它*而不是整个列。

另一种方法可能是覆盖 twitter 引导样式以使其向右而不是向左浮动：

```
 .row-fluid [class*="span"] {
     float: right; } 
```

但我猜这更有可能导致意想不到的后果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T22:08:34.470

如果你想保留空间，你可以使用

```
$('#col1').css({visibility:"hidden"}); 
```

# ruby-on-rails - Rails：验证 PayPal 电子邮件？

> ID：10629154
> 
> 赞同：0
> 
> 时间：2012-05-17T02:31:37.183
> 
> 标签：ruby-on-rails, paypal

我正在尝试验证卖家的电子邮件在 PayPal 中是否有效。

有什么方法可以验证用户的 PayPal 电子邮件吗？我一直很难找到这个问题的答案。

首先，我发现[这](http://curry.byteally.com/finding-verification-status-of-a-paypal-account-ruby-on-rails-paypal-adaptive-accounts-getverifiedstatus/)很有用，但似乎需要用户的名字和姓氏以及电子邮件地址。我也找到[了这个](https://www.x.com/developers/paypal/documentation-tools/api/addressverify-api-operation-nvp)，但这似乎也需要额外的信息。

没有任何简单的方法来检查电子邮件吗？我的意思是，如果您可以直接向用户的电子邮件付款而无需任何额外信息，您不应该能够检查该电子邮件是否有效吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T19:12:40.877

似乎唯一的方法是请求额外的权限，并使用 PayPal API 中的 GetVerifiedStatus。

# jsp - 如何使用 MyEclipse Tomcat 实现 HTTPS 访问？

> ID：10629158
> 
> 赞同：0
> 
> 时间：2012-05-17T02:32:49.990
> 
> 标签：jsp, tomcat, https

我正在使用 MyEclipse 开发一个网站，运行的服务器是 MyEclipse Tomcat。我想为我的网站添加 https 访问权限。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T02:50:00.450

在您的 Tomcat 目录中，您将找到一个 conf 目录，在该 conf 目录中是一个名为 server.xml 的文件。找到以下 XML 块：

```
<Connector port=”8443″
    maxThreads=”150″ minSpareThreads=”25″ maxSpareThreads=”75″
    enableLookups=”true” disableUploadTimeout=”true”
    acceptCount=”100″ debug=”0″ scheme=”https” secure=”true”
    clientAuth=”false” sslProtocol=”TLS”
    keystoreFile=”../webapps/techtracer.bin”
    keystorePass=”ttadmin” /> 
```

如果已注释掉，只需取消注释即可。您的块可能看起来略有不同，但重要的是它应该具有 port="8443" 属性、secure="true" 以及与 SSL 相关的一些其他属性。

如果您在 server.xml 中没有看到此内容，只需为端口 8080 查找“连接器”XML 元素并将其添加到其下方。

如需更多阅读内容，请查看[通过 3 个简单步骤在 Tomcat 上设置 SSL](http://techtracer.com/2007/09/12/setting-up-ssl-on-tomcat-in-3-easy-steps/)。因为您只是在 localhost 上运行它，所以那里的信息可能比您需要的更多。

最后，当您访问您的项目时，您将使用以下 URL：

```
http://localhost:8080   # Unsecure, plain HTTP

https://localhost:8443   # Secure HTTPS/SSL version 
```

请注意协议 (http/https) 和端口 (8080/8443) 的差异。

# pdf-generation - iTextSharp SetListSymbol 不起作用

> ID：10629159
> 
> 赞同：0
> 
> 时间：2012-05-17T02:32:53.197
> 
> 标签：pdf-generation, itextsharp

我正在尝试在从 iTextSharp 生成的 PDF 中设置样式。

`SetListSymbol`每当我尝试将 Symbol 设置为列出项目时，这似乎对我不起作用。

下面是我使用的代码：

```
var elements = HTMLWorker.ParseToList(overviewReader,null);

foreach (var element in elements)
{
    //element
    var list = element as List;
    if (list != null)
    {
        //list.Symbol.GetImage();
        list.SetListSymbol("\u25A0");
        list.IndentationLeft = 20f;
        doc.Add(list);
    }
    else
    {
        doc.Add(element);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:16:32.610

iText 和 iTextSharp 内部通过以下`HTMLWorker`方式支持一些非常有限的“样式表”`iTextSharp.text.html.simpleparser.StyleSheet`. 这些样式表松散地基于 HTML/CSS 属性，但只是最基本的（想想 HTML 3.2）。

您要做的三件事主要是 (1) 加载字体，(2) 创建`StyleSheet`指向该字体的指针，以及 (3)`StyleSheet`将`HTMLWorker`. 我将从[这里的回答](https://stackoverflow.com/a/10336531/231316)中部分删除一些代码。

iTextSharp 不会自动爬取整个系统来寻找字体，因此您需要手动注册它们。（实际上，您可以调用一种方法并告诉 iTextSharp 猜测加载字体，但这要快得多。）

步骤#1，加载字体，在本例中为 Curlz

```
//Path to our font
string OurFont = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "CURLZ___.TTF");
//Register the font with iTextSharp
iTextSharp.text.FontFactory.Register(OurFont); 
```

步骤#2，创建一个`StyleSheet`并将其指向我们的字体。我还将设置一些其他属性来展示它们。

```
//Create a new stylesheet
iTextSharp.text.html.simpleparser.StyleSheet ST = new iTextSharp.text.html.simpleparser.StyleSheet();
//Set the default body font to our registered font's internal name
ST.LoadTagStyle(iTextSharp.text.html.HtmlTags.LI, iTextSharp.text.html.HtmlTags.FACE, "Curlz MT");
ST.LoadTagStyle(iTextSharp.text.html.HtmlTags.LI, iTextSharp.text.html.HtmlTags.COLOR, "FF0000");
ST.LoadTagStyle(iTextSharp.text.html.HtmlTags.LI, iTextSharp.text.html.HtmlTags.SIZE, "50"); 
```

步骤#3，绑定`StyleSheet`到我们的`HTMLWorker`

```
//Use our StyleSheet from above when parsing
var elements = HTMLWorker.ParseToList(overviewReader, ST); 
```

下面是一个面向 iTextSharp 5.2.0 的功能齐全的 C# WinForms 应用程序，展示了上述所有内容。

```
using System;
using System.IO;
using System.Windows.Forms;
using iTextSharp.text;
using iTextSharp.text.html.simpleparser;
using iTextSharp.text.pdf;

namespace WindowsFormsApplication2 {
    public partial class Form1 : Form {
        public Form1() {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e) {
            //Path to our font
            string FontArial = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Fonts), "CURLZ___.TTF");
            //Register the font with iTextSharp
            iTextSharp.text.FontFactory.Register(FontArial);

            //Create a new stylesheet
            iTextSharp.text.html.simpleparser.StyleSheet ST = new iTextSharp.text.html.simpleparser.StyleSheet();
            //Set the default body font to our registered font's internal name
            ST.LoadTagStyle(iTextSharp.text.html.HtmlTags.LI, iTextSharp.text.html.HtmlTags.FACE, "Curlz MT");
            ST.LoadTagStyle(iTextSharp.text.html.HtmlTags.LI, iTextSharp.text.html.HtmlTags.COLOR, "FF0000");
            ST.LoadTagStyle(iTextSharp.text.html.HtmlTags.LI, iTextSharp.text.html.HtmlTags.SIZE, "50");

            //Sample HTML
            var html = @"<ul><li>Test</li></ul>";
            //File to output
            var outputFile = Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.Desktop), "Test.pdf");
            //Basic PDF creation, nothing special here
            using (FileStream fs = new FileStream(outputFile, FileMode.Create, FileAccess.Write, FileShare.None)) {
                using (Document doc = new Document(PageSize.LETTER)) {
                    using (PdfWriter writer = PdfWriter.GetInstance(doc, fs)) {
                        doc.Open();
                        //Bind a reader to our HTML
                        using (StringReader overviewReader = new StringReader(html)) {
                            //Use our StyleSheet from above when parsing
                            var elements = HTMLWorker.ParseToList(overviewReader, ST);
                            //Loop through each element
                            foreach (var element in elements) {
                                //See if the element is a list item
                                var list = element as List;
                                if (list != null) {
                                    //Set some properties
                                    list.SetListSymbol("\u25A0");
                                    list.IndentationLeft = 20f;
                                }
                                //Add the element to the document
                                doc.Add(element);
                            }
                        }
                        doc.Close();
                    }
                }
            }
            this.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:16:26.757

列表对象 = HTMLWorker.ParseToList(new StringReader(format), null);

```
 foreach (IElement element in objects)
                {

                    List list = new List();
                    list.SetListSymbol("\u2022");
                    list.IndentationLeft = 20f;                        
                    list.Add(element);
                    if (list.Chunks.Count == 0)
                    {
                        doc1.Add(element);
                    }
                    else
                    {
                        doc1.Add(list);
                    }
                } 
```

# iphone - iPhone后台应用程序在接到电话时更新屏幕

> ID：10629160
> 
> 赞同：7
> 
> 时间：2012-05-17T02:33:23.487
> 
> 标签：iphone, ios, ios5, jailbreak, core-telephony

我们正在编写一个 iPhone 应用程序（将在后台），当有来电时会收到通知。该应用程序执行一些后台工作 - 在电话会话正在进行时转到服务器检索一些数据，然后通知用户。

经过搜索，我发现我可以使用`Private Telephony Headers/Framework`来实际知道谁在我的应用程序中调用。但是，我无法使用从服务器检索到的信息来更新拨号器屏幕。我还发现应用程序必须在电话到达时运行。牦牛！！

我知道这不会在苹果商店获得批准，但是我正在寻找两件事：

1.  我如何把这个应用程序放在后台。
2.  如何在通话进行时显示一些信息。本地通知很好，但必须立即显示。

即使我们必须越狱，我也想知道如何完成这项工作。此应用程序适用于执法人员 - 概念验证。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T07:12:59.157

正如 YllierDev 所说，您可以查看 MobileSubstrate 调整以显示信息。但是，对于一些对新人来说*可能*不那么令人生畏的事情，你可以试试这个：

1.  首先，创建一个**启动守护程序**。这可以在后台运行并做任何你喜欢的事情。它会在手机启动时启动，因此用户无需先运行某个应用程序，然后将其放入后台。我发现[这是构建 LaunchDaemon 的一个很好的例子](http://chrisalvares.com/blog/7/creating-an-iphone-daemon-part-1/)

2.  听起来您已经知道如何使用 Core Telephony 框架的未记录功能来获得新呼叫的通知。这将是您的守护进程的责任。为了完整起见，[请参阅此答案](https://stackoverflow.com/a/11236454/119114)或有关守护程序如何使用 Darwin 通知侦听呼叫的[其他答案。](https://stackoverflow.com/a/14765396/119114)

3.  当呼叫被拦截时，您的守护程序可以联系您的服务器。

4.  [然后，您可以使用以下内容](https://stackoverflow.com/questions/2199642/display-cfusernotificationdisplayalert-on-iphone-lock-screen)创建一个简单的弹出窗口：

```
CFOptionFlags responseFlags = 0;
CFUserNotificationDisplayAlert(20.0, 3, NULL, NULL, NULL, 
     CFSTR("Hello"), CFSTR("Hello World"), CFSTR("OK"), 
     NULL, NULL, &responseFlags); 
```

[这是CFUserNotifications 上](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Reference/CFUserNotificationRef/Reference/reference.html)的一些Apple 文档

您可能必须链接到**CoreFoundation**框架，并且可能在您的项目中[包含此标头](http://www.opensource.apple.com/source/CF/CF-550/CFUserNotification.h)`CFUserNotificationDisplayAlert()`，以便可用。

但是，这应该会给您一个包含动态呼叫数据的弹出窗口。

# cassandra - 使用 which Query Implementation 从 Cassandra 获取一行

> ID：10629162
> 
> 赞同：2
> 
> 时间：2012-05-17T02:33:24.883
> 
> 标签：cassandra, hector

我想使用列族和行键从 Cassandra 中检索一行。但是，当我使用 SliceQuery 时，出现了一个异常：原因：me.prettyprint.hector.api.exceptions.HectorException：既没有设置列名也没有设置范围，这是一个无效的切片谓词。

有谁知道我是否使用了错误的查询实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:38:43.870

这将为您提供一整行：

```
SliceQuery query = HFactory.createSliceQuery(_keyspace, _stringSerializer, _stringSerializer, _stringSerializer);
query.setColumnFamily(columnFamily)
     .setKey(key)
     .setRange("", "", false, Integer.MAX_VALUE); 
```

# regex - 这个 shell/sed 脚本有什么问题？

> ID：10629163
> 
> 赞同：1
> 
> 时间：2012-05-17T02:34:28.687
> 
> 标签：regex, bash, sed

我想对给定目录中的大约 150 个 HTML 文件进行一些更改。一些锚标签具有如下几行的 href：`index.php?page=something`. 我希望所有这些都更改为`something.html`. 简单的正则表达式，简单的脚本。不过，我似乎无法正确理解。有人可以权衡我做错了什么吗？

示例 html，输出前后：

```
<!-- Before -->
<ul>
    <li><a href="#">Apple</a></li>
    <li><a href="index.php?page=dandelion">Dandelion</a></li>
    <li><a href="index.php?page=elephant">Elephant</a></li>
    <li><a href="index.php?page=resonate">Resonate</a></li>
</ul>

<!-- After -->
<ul>
    <li><a href="#">Apple</a></li>
    <li><a href="dandelion.html">Dandelion</a></li>
    <li><a href="elephant.html">Elephant</a></li>
    <li><a href="resonate.html">Resonate</a></li>
</ul> 
```

脚本文件：

```
#! /bin/bash

for f in *.html
do
    sed s/\"index\.php?page=\([.]*\)\"/\1\.html/g < $f >! $f
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T02:44:39.390

这是您的正则表达式，并且 shell 正试图解释您的正则表达式。

首先 -`[.]*`匹配任意数量的文字点`.`。将其更改为`.*`.

其次，将整个正则表达式括在单引号`'`中，以防止 bash shell 解释其中的任何一个。

```
sed 's/"index\.php?page=\(.*\)"/\1\.html/g' 
```

此外，`< $f >! $f`您可以将“-i”开关输入到 sed 以使其就地运行：

```
sed -i 's/"index\.php?page=\(.*\)"/"\1\.html"/g' "$f" 
```

（另外，我认为在您的替换中您需要双引号，`\1.html`以便在 HTML 中引用新 URL。我还引用了您的`$f`to `"$f"`，因为如果文件名包含空格 bash 会抱怨）。

**编辑**：正如@TimPote 所指出的，在引号内匹配某些内容的标准方法是`".*?"`（以便`.*`非贪婪）或`"[^"]+"`. Sed 不支持前者，所以试试：

```
sed -i 's/"index\.php?page=\([^"]\+\)"/"\1\.html"/g' "$f" 
```

这是为了防止（例如）`<a href="index.php?page=asdf">"asdf"</a>`变成`<a href="asdf">"asdf.html"</a>`（被`(.*)`捕获的`asdf">"asdf`，贪婪的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T02:44:25.057

你`.*`太贪心了。改为使用`[^"]\+`。再加上你的报价都搞砸了。用单引号将整个内容括起来，然后您可以`"`在不转义的情况下使用它们。

```
sed -i 's/"index\.php?page=\([^"]\+\)"/"\1\.html"/g' 
```

您可以使用单个语句完成整个操作`find`：

```
find . -maxdepth 1 -type f -name '*.html' \
 -exec sed -i 's/"index\.php?page=\([^"]\+\)"/"\1\.html"/g' {} \+ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T02:42:24.757

以下作品：

```
 sed "s/\"index\.php?page=\(.*\)\"/\"\1.html\"/g" < 1.html 
```

我认为主要是方括号。不知道为什么你有它们。哦，整个 sed 命令需要用引号引起来。

# javascript - 在 Firefox、IE 和 Chrome 中检测窗口 onblur() 事件？

> ID：10629169
> 
> 赞同：2
> 
> 时间：2012-05-17T02:35:47.173
> 
> 标签：javascript, event-handling, cross-browser, dom-events

我目前有以下代码：

```
if (document.onfocusin !== undefined) {
    var onfocusin = true; 
}  
else{   
    var onfocusin = false; 
}

if (onfocusin === true)
{   
    document.onfocusout = ad_blur; //ad_blur is a function I defined 
                                   //when window.onblur() fires
}  else{
    window.onblur = ad_blur; 

} 
```

代码在 IE 8 和 Chrome 17 中运行良好，但在 Firefox 8 中运行良好，我还找到了一些其他代码，但兼容性不符合我的需要。所以问题是：有没有办法确定`window.onblur()`IE、Firefox 和 Chrome 中的事件？

更具体地说，我想在打开新窗口（或选项卡）时处理该事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T11:42:59.953

正如 jmort253 提到的，jQuery 非常擅长这一点，下面是几乎在所有当前浏览器中都可以使用的代码：

```
$(document).ready(function() {
    $(window).blur(function() {
        ad_blur();  //here is what you wanna do when blur fires
    });
}); 
```

# c# - 使用 C# 在弹出窗口中输入用户名密码

> ID：10629177
> 
> 赞同：0
> 
> 时间：2012-05-17T02:37:20.293
> 
> 标签：c#

我正在尝试自动登录到网站以从中提取一些信息。我的表单上有一个隐藏的网络浏览器控件。我将 webbrowser 设置为我想要的 url，然后它会显示一条证书消息，并通过用户名/密码弹出窗口询问用户名和密码。是否可以自动化输入用户名和密码的过程？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T02:39:57.223

您可以在 URL 中指定用户名和密码：

```
https://user:pass@example.com 
```

这将适用于[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)。

# c# - 我可以使用 System.IO.Ports.SerialPort 读取 USB

> ID：10629178
> 
> 赞同：0
> 
> 时间：2012-05-17T02:37:30.130
> 
> 标签：c#, .net

> **可能重复：**
> [在 C# 中访问 USB 或串行](https://stackoverflow.com/questions/2594519/access-usb-or-serial-in-c-sharp)

我可以使用 System.IO.Ports.SerialPort 读取 USB 智能卡读卡器还是必须转换为 RS-232 串行 COM 端口？

如何从 USB 读取发送和读取响应？

# javascript - 防止向上/向下箭头键更改焦点选择的选择

> ID：10629193
> 
> 赞同：1
> 
> 时间：2012-05-17T02:40:40.623
> 
> 标签：javascript, jquery, html

我有一个包含两个`select`元素的文档。我希望向上/向下箭头键始终只更改其中一个`select`，无论焦点在哪里。即使用户只是点击进入`select#two`并且它仍然具有焦点，我希望向上/向下键更改`select#one`.

下面是我必须控制的代码`select#one`。**是否有可能`select#two`永远不响应向上/向下箭头键事件？**

```
document.onKeyDown = function(e) {
    var evtobj = e.which ? e.which : window.event.keyCode;
    if (evtobj == 38) {
        e.preventDefault(); //do not scroll
        //change the selection
        select = $('select#one');
        select[0].selectedIndex = Math.max(0, select[0].selectedIndex - 1)
        select.change(); //fire change listeners
    } 
    if (evtobj == 40) {
        //ditto for up key
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:14:32.650

一个半黑客的解决方案是在`select#two`发生以下任何一个关键事件时模糊页面上的所有其他选择元素（例如在此示例中）：`$("select").blur()`. 也许是最好/唯一的解决方案......

# haskell - 自动列出项目的依赖项

> ID：10629195
> 
> 赞同：9
> 
> 时间：2012-05-17T02:40:54.057
> 
> 标签：haskell, cabal

给定一个 Haskell 项目，有没有办法自动计算整个依赖项列表？它依赖的所有库以及已包含但不需要的库。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T05:05:29.757

正如我在评论中所说，cabal-install 已经通过模块查找（如 GHCi）猜测包来做到这一点（我正在使用 cabal-install 0.14.0）。它没有任何真正的智能 wrt 版本，因此它只是将版本设置为与您安装的主要版本相匹配。

下面你可以看到我制作了一个虚拟包，它导入`Data.Vector`和 cabal-install 推断我正在使用向量 0.9.*。

```
[tommd@mavlo blah]$ pwd
/tmp/blah
[tommd@mavlo blah]$ cat Data/Blah.hs 
module Data.Blah where

import Data.Vector
[tommd@mavlo blah]$ cabal init
Package name? [default: blah] 
...SNIP...
What does the package build:
   1) Library
   2) Executable
Your choice? 1
Include documentation on what each field means (y/n)? [default: n] 

Guessing dependencies...           <--- SEE, SEE! YAY!

Generating LICENSE...
Warning: unknown license type, you must put a copy in LICENSE yourself.
Generating Setup.hs...
Generating blah.cabal...

You may want to edit the .cabal file and add a Description field.
[tommd@mavlo blah]$ cat blah.cabal 
-- Initial blah.cabal generated by cabal init.  For further documentation, 
-- see http://haskell.org/cabal/users-guide/

name:                blah
version:             0.1.0.0
synopsis:            Sisponys
-- description:         
-- license:             
license-file:        LICENSE
author:              Me
maintainer:          No@No.No
-- copyright:           
-- category:            
build-type:          Simple
cabal-version:       >=1.8

library
  exposed-modules:     Data.Blah
  -- other-modules:       
  build-depends:       base ==4.5.*, vector ==0.9.*    <-- SEE?? SEE! YIPPEE!! 
```

# ruby - 如何控制使用 YAML 序列化的字段

> ID：10629209
> 
> 赞同：10
> 
> 时间：2012-05-17T02:43:37.087
> 
> 标签：ruby, yaml

例如，

```
class Point
  attr_accessor :x, :y, :pointer_to_something_huge
end 
```

我只想序列化 x 和 y 并将其他所有内容都保留为 nil。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-17T22:17:54.127

在 Ruby 1.9 中，[`to_yaml_properties`已弃用](https://github.com/tenderlove/psych/blob/1606060069c13b2bcdc672a1a0e89202a9eb5166/lib/psych/visitors/yaml_tree.rb#L392)；如果您使用的是 Ruby 1.9，一个更面向未来的方法是使用`encode_with`：

```
class Point
  def encode_with coder
    coder['x'] = @x
    coder['y'] = @y
  end
end 
```

在这种情况下，这就是您所需要的，因为默认设置是在从 Yaml 加载时将新对象的相应实例变量设置为适当的值，但在更复杂的情况下，您可以使用`init_with`：

```
def init_with coder
  @x = coder['x']
  @y = coder['y']
end 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-17T12:37:56.787

经过大量搜索后，我偶然发现了这一点：

```
class Point
  def to_yaml_properties
    ["@x", "@y"]
  end
end 
```

此方法用于选择 YAML 序列化的属性。有一种更强大的方法涉及自定义发射器（在 Psych 中），但我不知道它是什么。

此解决方案仅适用于 Ruby 1.8；在 Ruby 1.9 中，`to_yaml`已切换到使用 Psych，Matt 的回答 using`encode_with`是合适的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-14T19:47:57.727

如果您有大量实例变量，则可以使用像这样的简短版本

```
def encode_with( coder )
  %w[ x y a b c d e f g ].each { |v| coder[ v ] = instance_variable_get "@#{v}" }
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-13T19:54:12.890

如果你想要除少数几个以外的所有字段，你可以这样做

```
def encode_with(coder)
  vars = instance_variables.map{|x| x.to_s}
  vars = vars - ['@unwanted_field1', '@unwanted_field2']

  vars.each do |var|
    var_val = eval(var)
    coder[var.gsub('@', '')] = var_val
  end
end 
```

这使您不必手动管理列表。在 Ruby 1.9 上测试

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-31T14:24:45.707

您应该使用#encode_with，因为不推荐使用#to_yaml_properties：

```
def encode_with(coder)
  # remove @unwanted and @other_unwanted variable from the dump
  (instance_variables - [:@unwanted, :@other_unwanted]).each do |var|
    var = var.to_s                       # convert symbol to string
    coder[var.gsub('@', '')] = eval(var) # set key and value in coder hash
  end
end 
```

或者，如果 eval 太危险并且您只需要过滤掉一个实例 var，您可能更喜欢这个。所有其他变量都需要有一个访问器：

```
attr_accessor :keep_this, :unwanted

def encode_with(coder)
  # reject @unwanted var, all others need to have an accessor
  instance_variables.reject{|x|x==:@unwanted}.map(&:to_s).each do |var|
    coder[var[1..-1]] = send(var[1..-1])
  end
end 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-17T03:01:56.137

我建议`to_yaml`在您的类中添加一个自定义方法，以构建您想要的特定 yaml 格式。

我知道`to_json`接受参数来告诉它要序列化哪些属性，但我找不到相同的`to_yaml`.

这是 的实际来源`to_yaml`：

```
# File activerecord/lib/active_record/base.rb, line 653

  def to_yaml(opts = {}) #:nodoc:
    if YAML.const_defined?(:ENGINE) && !YAML::ENGINE.syck?
      super
    else
      coder = {}
      encode_with(coder)
      YAML.quick_emit(self, opts) do |out|
        out.map(taguri, to_yaml_style) do |map|
          coder.each { |k, v| map.add(k, v) }
        end
      end
    end
  end 
```

所以看起来可能有机会进行设置`opts`，以便在 yaml 中包含特定的键/值对。

# ruby-on-rails - 将 RestKit 与本地服务器一起使用

> ID：10629217
> 
> 赞同：1
> 
> 时间：2012-05-17T02:44:39.923
> 
> 标签：ruby-on-rails, ios, restkit

我的 iPhone 应用程序中的 RestKit 与 Heroku 上的 Rails 应用程序交互，但 RestKit 似乎无法与我机器上本地运行的 Rails 应用程序一起使用。这是我的 iPhone 应用程序中的输出：

`Fail: Error Domain=NSURLErrorDomain Code=-1004 "Could not connect to the server." NSErrorFailingURLKey=http://0.0.0.0:3000/users/1.json, NSUnderlyingError=0x2a9690 "Could not connect to the server."}`

我已经完成了所有的健全性检查。`http://0.0.0.0:3000/users/1.json`在我的浏览器中返回一个 JSON 对象，当我将根 URL 更改为 Heroku 上的应用程序时，RestKit 工作正常。

有什么我想念的吗？如何让 RestKit 与我的应用程序的本地版本一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T15:04:21.727

这对我来说是一个愚蠢的错误。在设备上运行的应用程序显然无法访问在 localhost 上运行的 rails 应用程序。

这在模拟器中或指向生产服务器时工作正常。

# android - Android ICS Launcher 4.0.x 无法保持屏幕方向

> ID：10629226
> 
> 赞同：17
> 
> 时间：2012-05-17T02:48:16.397
> 
> 标签：android, orientation, android-4.0-ice-cream-sandwich

我有一个关于 Android ICS Launcher 4.0.x 的奇怪案例。

前提：

*   具有root权限的ICS设备

*   下载Android ICS Launcher 4.0.3/4源码（修改运行）

程序：

1.  前往市场（Play 商店），下载“Go 任务管理器”

2.  在 Launcher 上打开 Widgets 选项卡，找到“Mem Optimize”，拖动到主屏幕（工作区）

3.  下载并安装“水果忍者”

4.  在主屏幕上的“内存优化”小部件旁边创建“水果忍者”快捷方式。

5.  执行“水果忍者”，将手机保持在横向（这个位置握在手中，不要改变这个）

6.  在“水果忍者”的菜单屏幕上，将“退出”切片，选择“是”

7.  现在回到 Launcher 主屏幕，点击“Mem Optimize”小部件

当前结果：

*   在第 7 步之后，屏幕会旋转到 LANDSCAPE 片刻，然后返回 PORTRAIT。

期待：

*   在第 7 步之后，屏幕应保持为 PORTRAIT。

我的尝试（修改 Launcher ICS 源代码）：

*   添加到“Manifest.xml”：`android:screenOrientation="portrait"`=> 仍然无法解决问题。

*   处理配置更改，`android:configChanges="orientation|screenSize"`=> 仍然无法解决问题。

*   使用：`setRequestedScreenOrientation(PORTRAIT)`=> 仍然无法解决问题。

我在 Android 2.x 上尝试过的工作；但是，从 4.0.3+ 开始，它并没有按预期工作。有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:47:31.813

问题不在启动器中。问题是手机上的所有活动都共享一个配置（包括方向）。

因此，如果您有一个将方向设置为 Landspace 的活动，例如相机（这是我工作的经典示例），这将“使”所有其他活动也位于景观上，因为正如我所说，信息在系统中是唯一的并在所有人之间共享。

这从 Android 开始就发生了，尽管有时你不会注意到，因为变化非常快。

要检查我在说什么，请执行以下操作。编写一个带有对话框主题的活动，例如 `@android:style/Theme.Holo.Dialog`，这样它就不会覆盖整个屏幕，您仍然可以看到下面的活动。该活动必须具有固定的方向。假设您将其设置为横向。然后[在 Android shell上](https://stackoverflow.com/a/6613947/1525801)[使用 `am start`](https://stackoverflow.com/a/6613947/1525801) ，以便能够在任何其他活动之上启动您刚刚创建的活动。您会看到，无论之前的活动有什么方向，只要您启动测试活动，之前的活动将采用与您的测试活动相同的方向。当您回击时，先前的活动将恢复方向。但有时可能需要一段时间，因此您会看到当前结果等内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-27T06:29:07.297

库存 ICS 启动器有几个地方会将方向设置为未指定。只需在 Launcher.java 中搜索`setRequestedOrientation`，但具体而言，它位于“eng”版本或平板电脑上。它在 onCreate 中执行，但在从应用程序自定义中拖放之后也执行此操作。

从 Launcher.java 的 onCreate 中：

```
// On large interfaces, we want the screen to auto-rotate based on the current orientation
if (LauncherApplication.isScreenLarge() || Build.TYPE.contentEquals("eng")) {
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
} 
```

# spring - 从旧版 Servlet 重定向到 Spring 3 以及从 Spring 3 重定向到旧版 Servlet

> ID：10629228
> 
> 赞同：1
> 
> 时间：2012-05-17T02:48:52.553
> 
> 标签：spring, servlets, integration

我通过将 Spring 3 集成到旧版 Servlet 应用程序中并逐渐转换旧版应用程序来学习 Spring。

下面发布了一个类似于我正在使用的 web.xml *-servlet.xml。基本上，事情是这样设置的，检索像“search”这样的字符串，Spring 会将其路由到控制器，视图解析器会将“search”转换为“/jsp/search.jsp”

我遇到了从旧版 Servlet 和旧版 ServletFilter 到 Spring的**响应.sendRedirect("search") 的问题。**URL 正确显示，但尽管 System.out.println() 调用表明已到达 JSP，但我得到了一个空白页面。Spring 没有错误消息，浏览器只告诉我重定向出了点问题。

我通过转发解决了这个问题，而不是从旧的 Servlet 和 ServletFilters 重定向：

```
request.getRequestDispatcher("search").forward(request,response);

getServletConfig().getServletContext().getRequestDispatcher("search").forward(request,response); 
```

从 Spring 3 中完成的新 JSP 到传统 Servlet 的另一个方向，我在屏幕上有按钮，所以我只使用了对“location.href=/helloworld”的 javascript 调用。我需要发送一些参数，所以我可能会将这些按钮转换为提交微小的 HTML 表单。

我想知道的是，是否有更好的方法让 Spring 3 和 Legacy Servlet 以更好的方式进行通信。

旧版 Servlet => Spring 3

和

Spring 3 => 旧版 Servlet

**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app  id="WebApp_ID" version="3.0"
   xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

  <display-name>Acme</display-name>

  <!--welcome-file-list>
    <welcome-file>/login</welcome-file>
  </welcome-file-list-->

  <servlet>
    <servlet-name>acme</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>acme</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <!-- Help Find The Spring Config Files -->
  <listener>
    <listener-class>
                  org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>
            /WEB-INF/nsd-servlet.xml,
            /WEB-INF/nsd-security.xml
    </param-value>
  </context-param>

  <!-- Spring Security -->
  <filter>
    <filter-name>springSecurityFilterChain</filter-name>
    <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
  </filter>
  <filter-mapping>
    <filter-name>springSecurityFilterChain</filter-name>
    <url-pattern>/*</url-pattern>
  </filter-mapping>

  <!-- Integrate A Legacy Screen Done With A Servlet -->
  <servlet>
    <servlet-name>HelloWorldServlet</servlet-name>
    <servlet-class>
            com.legacy.HelloWorldServlet
    </servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>HelloWorldServlet</servlet-name>
    <url-pattern>/helloworldservlet</url-pattern>
  </servlet-mapping>

</web-app> 
```

**我的 acme-servlet.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:mvc="http://www.springframework.org/schema/mvc"
  xsi:schemaLocation="http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <context:component-scan base-package="com.acme.controller" />

  <mvc:resources mapping = "/**" location = "/,file:/apps1/bea/user_projects/domains/acme/common/,file:/c:/weblogic_common_files/acme/"/>
  <mvc:annotation-driven/>

  <bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name = "prefix" value = "/jsp/"/>
    <property name = "suffix" value = ".jsp"/>
  </bean>

</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:00:52.270

使用时，`response.sendRedirect(String url)`您实际上是在传递要重定向到的 URL。

sendRedirect 遵循以下规则：

```
/*
* Destination, it can be any relative or context specific path.
* if the path starts without '/' it is interpreted as relative to the current request URI.
* if the path starts with '/' it is interpreted as relative to the context.
*/

String destination  ="/jsp/destination.jsp";        
response.sendRedirect(response.encodeRedirectURL(destination)); 
```

当您输入“搜索”时，这是相对于当前请求的 URI。因此，除非您当前的请求是对 /acme/something 的请求，并且假设 /acme/search 是您的 servlet，否则请求将失败。

但是，如果您使用 /acme/search 放置相对于根的路径，则该请求将在任何上下文中工作。

话虽如此，我不相信这真的是最好的方法，因为重定向涉及将响应发送回客户端浏览器，告诉它再次从另一个 URL 获取内容。这似乎是往返服务器的浪费之旅。

更好的方法可能是使用 Spring MVC 之类的东西将您的 servlet 连接到 Spring 中。它非常灵活，您可以将新的控制器类包装在现有的 servlet 周围，然后通过传入 HttpServletRequest 和 HttpServletResponse 对象直接调用它们。完成后，您可以使用有效的工作系统慢慢消除任何多余的东西，而不是与重定向链接在一起的系统。

```
package samples;

public class SampleController extends AbstractController {

    private int cacheSeconds;

    // for wiring in cacheSeconds
    public void setCacheSeconds(int cacheSeconds) {
        this.cacheSeconds = cacheSeconds; 
    }
    public int getCacheSeconds() {
        return cacheSeconds;
    }

    public ModelAndView handleRequestInternal(
        HttpServletRequest request,
        HttpServletResponse response) throws Exception {

        // you now have a Spring Controller wired in, and you could delegate to 
          // your legacy servlet in this manner
        YourServlet servlet = new YourServlet();

        servlet.doGet(request, response);

        ModelAndView mav = new ModelAndView("hello");
        mav.addObject("message", "Hello World!");
        return mav;        
    }
}

<bean id="sampleController" class="samples.SampleController">
    <property name="cacheSeconds" value="120"/>
</bean> 
```

请注意，手动实例化 servlet 并不真正被认为是一种好的做法或好的设计。相反，这更像是让您的 Spring 控制器连接和连接的垫脚石，这样您就可以系统地重构代码并通过将业务逻辑移动到服务层来消除遗留的 servlet。

这种方法与您计划系统地迁移到 Spring 并了解更多关于 Spring 的计划相吻合，解决一些技术债务，同时仍然致力于与您的站点相关的业务目标。

# c++ - 分段错误：“...没有这样的文件或目录”

> ID：10629229
> 
> 赞同：7
> 
> 时间：2012-05-17T02:49:06.607
> 
> 标签：c++, segmentation-fault, cstring

我得到了奇怪的段错误，似乎来自我程序之外的某个地方......无论如何都没有明确表示。我在两个数组上调用“strcmp”......两个数组都存储在相同类型的结构中。我得到了一个点符号和一个通过“->”取消引用：

```
int name = strcmp(one.name, two->name); 
```

它编译得很好，但是当我运行它时，我得到了段错误。我已经尝试使用 GDB 对其进行跟踪，但是当我在我认为应该发生的位置之前放置断点时，它无论如何都会出现故障。我越来越：

```
Program received signal SIGSEGV, Segmentation fault.
__strcmp_ia32 () at ../sysdeps/i386/i686/multiarch/../strcmp.S:40
40  ../sysdeps/i386/i686/multiarch/../strcmp.S: No such file or directory.
    in ../sysdeps/i386/i686/multiarch/../strcmp.S 
```

FML。建议？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T02:50:21.060

我的建议：用 -g 编译它并通过 valgrind 运行它。

# linux - 在没有dos2unix的情况下递归转换目录和子目录中所有文件的所有EOL（dos->unix）

> ID：10629231
> 
> 赞同：13
> 
> 时间：2012-05-17T02:50:12.957
> 
> 标签：linux, bash, unix, command-line, end-of-line

如何在没有的情况下递归地转换目录和子目录中所有文件的所有 EOL (dos->unix **)** `dos2unix`？（我没有，无法安装。）

有没有办法使用`tr -d '\r'`和管道来做到这一点？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T04:13:56.443

For all files in current directory you can do it with a Perl one-liner: `perl -pi -e 's/\r\n/\n/g' *` (stolen from [here](http://manavg.blogspot.com/2009/04/perl-one-liner-for-dos2unix.html))

**EDIT**: And with a small modification you can do subdirectory recursion:

```
find | xargs perl -pi -e 's/\r\n/\n/g' 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-17T03:12:31.750

您可以使用 sed 的`-i`标志来就地更改文件：

```
find . -type f -exec sed -i 's/\x0d//g' {} \+ 
```

如果我是你，我会保留这些文件以确保操作顺利进行。然后，您可以在完成后删除临时文件。这可以这样做：

```
find . -type f -exec sed -i'.OLD' 's/\x0d//g' {} \+
find . -type f -name '*.OLD' -delete 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T03:15:01.877

你有没有空格等的健全的文件名和目录名吗？

如果是这样，那就不太难了。如果您必须处理包含换行符和空格等的任意名称，那么您必须比这更努力。

```
tmp=${TMPDIR:-/tmp}/crlf.$$
trap "rm -f $tmp.?; exit 1" 0 1 2 3 13 15

find . -type f -print |
while read name
do
    tr -d '\015' < $name > $tmp.1
    mv $tmp.1 $name
done

rm -f $tmp.?
trap 0
exit 0 
```

陷阱的东西可确保您不会留下临时文件。您还可以使用其他技巧，为您的临时文件名提供更多随机名称。除非您在恶劣的环境中工作，否则您通常不需要它们。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T09:04:13.900

您还可以在批处理模式下使用编辑器。

```
find . -type f -exec bash -c 'echo -ne "%s/\\\r//\nx\n" | ex "{}" ' \; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-26T22:22:47.453

如果`\r`后面没有`\n`（可能是 Tim Pote 的文件中的情况）：

*   删除`\r`（使用`tr -d`）可能会删除换行符
*   替换`\r`为`\n`可能不会导致双/三换行符

也许蒂姆波特可以为他提到的文件验证上述几点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-20T13:08:00.247

这会从当前目录和所有子目录中的所有文件中删除回车，并且应该适用于大多数类 Unix 操作系统：

```
grep -lIUre '\r' | xargs sed -i 's/\r//' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-16T06:07:38.193

如果它在寡妇中完成：

尝试在 git bash 中运行命令：

```
$ find | xargs perl -pi -e 's/\r\n/\n/g' 
```

它可以显示某种`Can't do inplace edit:`类型的消息，因此请忽略它

# sql - 结合聚合的多个查询的结果

> ID：10629235
> 
> 赞同：0
> 
> 时间：2012-05-17T02:50:52.733
> 
> 标签：sql, sql-server, tsql

我有 2 个单独的选择语句，每个语句都使用聚合函数。我希望能够获取结果并将它们结合起来。

```
table_a
id int
entered_date datetime (holds utc stamp)
balance money
group_id int

table_b
id int
entered_date date
balance money
transaction_type int

query 1: 
select convert(date,entered_date), sum(balance) as earned
from table_a
where group_id in (1, 2, 3, 4)
group by convert(date,entered_Date)

query 2: 
select convert(date,entered_date), sum(balance) as spent
where transaction_type = 2
group by convert(date,entered_Date)

results:
query 1:
2012-05-13, 5000
2012-05-14, 12000
...

query 2:
2012-05-13, 9000
2012-05-14, 55856
... 
```

我想在不使用临时表的情况下为每条记录返回一行。结果集应该有一个日期，然后是收入与花费。我有一个使用联合运行的报告来获取总数，这很好，但我需要生成一个包含 1 条记录和一个赚到的对比线的结果集。对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T02:56:04.800

尝试：

```
;With AllDates AS
(
select convert(date,entered_date) As EnteredDate
    from table_a
    where group_id in (1, 2, 3, 4)
    group by convert(date,entered_Date)
UNION
select convert(date,entered_date)
    from table_b
    where transaction_type = 2
    group by convert(date,entered_Date)
)
, AllEarned AS (
select convert(date,entered_date) AS EnteredDate, sum(balance) as Earned
    from table_a
    where group_id in (1, 2, 3, 4)
    group by convert(date,entered_Date)
)
, AllSpent AS (
select convert(date,entered_date) AS EnteredDate, sum(balance) as Spent
    from table_b
    where transaction_type = 2
    group by convert(date,entered_Date)
)
SELECT
    d.EnteredDate, e.Earned, s.Spent
    FROM AllDates d
    LEFT OUTER JOIN AllEarned e ON d.EnteredDate=e.EnteredDate
    LEFT OUTER JOIN AllSpent s ON d.EnteredDate=s.EnteredDate
    ORDER BY 1,2,3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T02:57:48.040

```
SELECT 
       CASE WHEN a.a_date IS NULL THEN b.a_date ELSE a.a_date END as a_data, 
       a.earned,
       b.spent
FROM
    (select 
         convert(date,entered_date) as a_date, 
         sum(balance) as earned
    from table_a
    where group_id in (1, 2, 3, 4)
    group by entered_Date) A
FULL OUTER JOIN 
   (select 
        convert(date,entered_date) as a_date, 
        sum(balance) as spent
    from table_a
    where transaction_type = 2
    group by entered_Date) B 
ON A.a_date=b.a_date 
```

或者`FULL OUTER JOIN`如果有数据不满足这两个条件，则使用。并使用`CASE WHEN a.a_date IS NULL THEN b.a_date ELSE a.a_date END as a_data`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:12:52.000

Assuming earned amounts are from table_a and spent amounts are from table_b,

```
; WITH a AS (
    select entered_date=convert(date,entered_date), balance as earned, 0 AS spent
    from table_a
    where group_id in (1, 2, 3, 4)
    UNION ALL
    select entered_date=convert(date,entered_date), 0 AS earned, balance as spent
    from table_b
    where transaction_type = 2
)
SELECT entered_date
, earned=SUM(earned)
, spent=SUM(spent)
FROM a
GROUP BY entered_date 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T03:00:37.887

您可以使用逻辑组合这些，假设两者都来自同一个表（第二个查询缺少 from 语句）：

```
select convert(date,entered_date),
       sum(case when group_id in (1, 2, 3, 4) then balance end) as earned,
       sum(case when transaction_type = 2 then balance end) as spend
from table_a
group by convert(date,entered_Date) 
```

# javascript - 在指令中自定义模板

> ID：10629238
> 
> 赞同：98
> 
> 时间：2012-05-17T02:51:05.797
> 
> 标签：javascript, angularjs

我有一个使用 Bootstrap 标记的表单，如下所示：

```
<form class="form-horizontal">
  <fieldset>
    <legend>Legend text</legend>
    <div class="control-group">
      <label class="control-label" for="nameInput">Name</label>
      <div class="controls">
        <input type="text" class="input-xlarge" id="nameInput">
        <p class="help-block">Supporting help text</p>
      </div>
    </div>
  </fieldset>
</form> 
```

那里有很多样板代码，我想简化为一个新指令 - 表单输入，如下所示：

```
<form-input label="Name" form-id="nameInput"></form-input> 
```

生成：

```
 <div class="control-group">
      <label class="control-label" for="nameInput">Name</label>
      <div class="controls">
        <input type="text" class="input-xlarge" id="nameInput">
      </div>
    </div> 
```

我通过一个简单的模板做了这么多工作。

```
angular.module('formComponents', [])
    .directive('formInput', function() {
        return {
            restrict: 'E',
            scope: {
                label: 'bind',
                formId: 'bind'
            },
            template:   '<div class="control-group">' +
                            '<label class="control-label" for="{{formId}}">{{label}}</label>' +
                            '<div class="controls">' +
                                '<input type="text" class="input-xlarge" id="{{formId}}" name="{{formId}}">' +
                            '</div>' +
                        '</div>'

        }
    }) 
```

然而，当我开始添加更高级的功能时，我遇到了困难。

## 如何支持模板中的默认值？

我想在我的指令中将“类型”参数作为可选属性公开，例如：

```
<form-input label="Password" form-id="password" type="password"/></form-input>
<form-input label="Email address" form-id="emailAddress" type="email" /></form-input> 
```

但是，如果没有指定任何内容，我想默认为`"text"`. 我该如何支持这一点？

## 如何根据属性的存在/不存在自定义模板？

我还希望能够支持“必需”属性，如果它存在的话。例如：

```
<form-input label="Email address" form-id="emailAddress" type="email" required/></form-input> 
```

如果`required`指令中存在，我想将它添加到`<input />`输出中的生成中，否则忽略它。我不确定如何实现这一目标。

我怀疑这些要求可能已经超出了一个简单的模板，并且必须开始使用预编译阶段，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：211
> 
> 时间：2012-05-18T04:36:21.047

```
angular.module('formComponents', [])
  .directive('formInput', function() {
    return {
        restrict: 'E',
        compile: function(element, attrs) {
            var type = attrs.type || 'text';
            var required = attrs.hasOwnProperty('required') ? "required='required'" : "";
            var htmlText = '<div class="control-group">' +
                '<label class="control-label" for="' + attrs.formId + '">' + attrs.label + '</label>' +
                    '<div class="controls">' +
                    '<input type="' + type + '" class="input-xlarge" id="' + attrs.formId + '" name="' + attrs.formId + '" ' + required + '>' +
                    '</div>' +
                '</div>';
            element.replaceWith(htmlText);
        }
    };
}) 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-12-18T13:44:58.957

尝试使用 Misko 提出的解决方案，但在我的情况下，一些需要合并到我的模板 html 中的属性本身就是指令。

不幸的是，并非生成的模板引用的所有指令都可以正常工作。我没有足够的时间深入研究角度代码并找出根本原因，但找到了一种解决方法，这可能会有所帮助。

解决方案是将创建模板 html 的代码从编译移动到模板函数。基于上述代码的示例：

```
 angular.module('formComponents', [])
  .directive('formInput', function() {
    return {
        restrict: 'E',
        template: function(element, attrs) {
           var type = attrs.type || 'text';
            var required = attrs.hasOwnProperty('required') ? "required='required'" : "";
            var htmlText = '<div class="control-group">' +
                '<label class="control-label" for="' + attrs.formId + '">' + attrs.label + '</label>' +
                    '<div class="controls">' +
                    '<input type="' + type + '" class="input-xlarge" id="' + attrs.formId + '" name="' + attrs.formId + '" ' + required + '>' +
                    '</div>' +
                '</div>';
             return htmlText;
        }
        compile: function(element, attrs)
        {
           //do whatever else is necessary
        }
    }
}) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-10-16T02:47:13.783

不幸的是，上述答案并不完全奏效。特别是编译阶段无法访问范围，因此您无法根据动态属性自定义字段。使用链接阶段似乎提供了最大的灵活性（在异步创建 dom 等方面）。以下方法解决了：

```
<!-- Usage: -->
<form>
  <form-field ng-model="formModel[field.attr]" field="field" ng-repeat="field in fields">
</form> 
```

```
// directive
angular.module('app')
.directive('formField', function($compile, $parse) {
  return { 
    restrict: 'E', 
    compile: function(element, attrs) {
      var fieldGetter = $parse(attrs.field);

      return function (scope, element, attrs) {
        var template, field, id;
        field = fieldGetter(scope);
        template = '..your dom structure here...'
        element.replaceWith($compile(template)(scope));
      }
    }
  }
}) 
```

我创建了一个包含更完整代码和方法的[文章](http://justandsimply.com/blog/2013/10/14/dynamic-forms-in-angularjs/)[的要点](https://gist.github.com/joesavona/6985935)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-17T05:22:14.617

这是我最终使用的。

我对 AngularJS 很陌生，所以很想看到更好/替代的解决方案。

```
angular.module('formComponents', [])
    .directive('formInput', function() {
        return {
            restrict: 'E',
            scope: {},
            link: function(scope, element, attrs)
            {
                var type = attrs.type || 'text';
                var required = attrs.hasOwnProperty('required') ? "required='required'" : "";
                var htmlText = '<div class="control-group">' +
                    '<label class="control-label" for="' + attrs.formId + '">' + attrs.label + '</label>' +
                        '<div class="controls">' +
                        '<input type="' + type + '" class="input-xlarge" id="' + attrs.formId + '" name="' + attrs.formId + '" ' + required + '>' +
                        '</div>' +
                    '</div>';
                element.html(htmlText);
            }
        }
    }) 
```

示例用法：

```
<form-input label="Application Name" form-id="appName" required/></form-input>
<form-input type="email" label="Email address" form-id="emailAddress" required/></form-input>
<form-input type="password" label="Password" form-id="password" /></form-input> 
```

# android - 在 AndroidManifest.xml 中设置可调试打开或关闭的 ant 自定义规则

> ID：10629239
> 
> 赞同：1
> 
> 时间：2012-05-17T02:51:11.713
> 
> 标签：android, ant

更新：我在下面发布了这个问题的答案/解决方案。

这是我所拥有的，但正则表达式不太正确：

```
 <macrodef name="set-app-debuggable">
    <sequential>
        <echo>Setting  AndroidManifest.xml with debuggable set to true</echo>           
        <replaceregexp file="./AndroidManifest.xml" byline="true"
                match="name=&quot;debuggable&quot;&gt;(\w+)&lt;"
               replace="name=&quot;debuggable&quot;&gt;true&lt;"/>
    </sequential>
</macrodef> 
```

这是AndroidManifest

```
 <application android:name="MyApplication" android:theme="@style/MyStyles.NoTitleBar"
    android:label="@string/app_name" android:debuggable="true"    android:hardwareAccelerated="true" > 
```

我试图在调用此宏时将 debuggable 设置为 false。不确定如何指定元素应用程序和 =“false”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:58:09.687

Here is the macro

```
 <macrodef name="set-app-debuggable">
    <sequential>
        <echo>Updating AndroidManifest.xml with debuggable set to true</echo>           
       <replaceregexp file="./AndroidManifest.xml"
                            match='android:debuggable="(.*)"'
                            replace='android:debuggable="true"'
                            byline="false">         
        </replaceregexp>
    </sequential>
</macrodef> 
```

# asana - 更新 Asana 任务的“公共”/“私人”状态？

> ID：10629240
> 
> 赞同：0
> 
> 时间：2012-05-17T02:51:20.977
> 
> 标签：asana

我可以使用 Asana API 将任务从公共更改为私人，反之亦然？

我已经检查了文档 (http://developer.asana.com/documentation/) 并没有看到任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:52:33.357

（我在 Asana 工作）

我们还监控 StackOverflow。:) 你是对的，更改任务的私有/公共可见性还不是 API 的一部分。添加此功能是路线图的一部分，但我无法评论何时会发生。

# java - 避免在图像视图android中多次单击

> ID：10629242
> 
> 赞同：3
> 
> 时间：2012-05-17T02:51:39.823
> 
> 标签：java, android, onclicklistener

我尝试使用此代码来防止 ImageView 中的多次单击，但它没有帮助。

```
 Boolean isClicked = false;
    @Override
    public void onClick(View v)
    {
        if (v == imgClick && !isClicked)
        {
                      //lock the image
            isClicked = true;
            Log.d(TAG, "button click");

            try
            {
                //I try to do some thing and then release the image view
                Thread.sleep(2000);
            } catch (InterruptedException e)
            {
                e.printStackTrace();
            }
            isClicked = false;
        }

    } 
```

在日志猫中，当我尽可能快地单击 ImageView 5 次时，我可以看到 5 行“按钮单击”。我可以看到 log cat 打印第一行，等待一段时间（2 秒）然后打印下一行。
我认为当我单击 ImageView 时，触发的事件会按顺序移动到队列中，不是吗？那么我该如何阻止呢？
我也尝试使用*setEnable()*或setClickable *()*而不是 isClicked 变量，但它也不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:34:54.260

试试这个工作代码

```
 Boolean canClick = true; //make global variable
   Handler  myHandler = new Handler();

@Override
public void onClick(View v)
{
    if (canClick)
    {

       canClick= false;   //lock the image
       myHandler.postDelayed(mMyRunnable, 2000);

       //perform  your action here

    }

}

/* give some delay..*/
    private Runnable mMyRunnable = new Runnable()
    {
        @Override
        public void run()
        {   

         canClick = true;
         myHandler.removeMessages(0);
        }
     };

Instead of sleeping in 2 seconds, I use some task like doSomeThing() method (has accessed UI thread), and I don't know when it completed. So how can I try your way? 
```

//我提到了这个 android [链接](http://developer.android.com/resources/articles/painless-threading.html)。你可以更有效地处理线程，但我希望下面的代码对你有用.. //你试试这个

```
 Boolean canClick = true; //make global variable
public void onClick(View v) {
        if(canClick){

          new DownloadImageTask().execute();
        }
    }

        private class DownloadImageTask extends AsyncTask<String, Void, Bitmap> {

            protected Bitmap doInBackground(String... urls) {
                 Log.d("MSG","Clicked");
                 canClick =false;
                 //perform your long operation here

                return null;
             }

             protected void onPostExecute(Bitmap result) {
                 canClick =true;
             }
         } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:38:44.213

您可以跟踪您的最后一次消费点击`View`，并根据它执行必要的操作，或者简单地返回：

```
private long calcTime;
private boolean isClickedLately(final long millisToWait)
{
    if (System.currentTimeMillis() - calcTime < millisToWait)
        return true;
    return false;
}

@Override
public void onClick(View v)
{
    if (isClickedLately(2000))
        return;
    calcTime = System.currentTimeMillis();
    Log.d(TAG, "consuming button click");
    // perform the necessary actions
} 
```

使用该`millisToWait`参数可以调整“等待”的阈值，但如果您知道要在两次连续点击之间恰好等待 2 秒，则可以消除它。

这样您就不必处理`Threads`，这很好，因为让 gui 线程等待不是一个好主意。

# wordpress - 设置 $query->query_vars['meta_key'] 时，Wordpress 菜单消失

> ID：10629245
> 
> 赞同：0
> 
> 时间：2012-05-17T02:52:05.620
> 
> 标签：wordpress, sorting, metadata

我在我的 WP 帖子上设置了一些元变量。我希望能够按这些变量进行排序，除了按“视图”或“喜欢”排序时，一切都很好。当我按这两个字段中的任何一个进行排序时，WP 不会生成我的导航（wp_nav_menu）。

我尝试“重置”围绕我的 wp_nav_menu 调用的 $wp_query 变量：

```
$old_query = $wp_query; 
$wp_query = new WP_Query( array('post_type' => 'any') ); 
wp_nav_menu( array( 'container_class' => 'menu-header', 'theme_location' => 'primary' ) ); 
$wp_query = $old_query; 
```

但这并不能解决问题。唯一有效的方法是注释掉以 $query->query_vars['meta_key'] 开头的行，但显然这也否定了排序。

任何帮助，将不胜感激。

```
// Before a query is run, modify the sort order
function jh_popularity_sort_query($query) {
  $sort = $_GET['sort']; 
  if ($sort == "title") {
    $query->query_vars['orderby'] = 'title';
    $query->query_vars['order'] = 'ASC';
  } else if ($sort == "date") {
    $query->query_vars['orderby'] = 'date';
  } else if ($sort == "views") {
    $query->query_vars['meta_key'] = 'jh_page_views';
    $query->query_vars['orderby'] = 'meta_value';
    $query->query_vars['order'] = 'DESC';
  } else if ($sort == "likes") {
    $query->query_vars['meta_key'] = 'jh_page_likes';
    $query->query_vars['orderby'] = 'meta_value';
    $query->query_vars['order'] = 'DESC';
  }

  return $query;
} add_action('pre_get_posts', 'jh_popularity_sort_query'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:42:01.660

根据 allaire 的建议，关闭它并转到[https://wordpress.stackexchange.com/ 。](https://wordpress.stackexchange.com/)

对于遇到此问题的任何人，helenhousandi 都有正确的解决方案。[https://wordpress.stackexchange.com/a/52408/16201](https://wordpress.stackexchange.com/a/52408/16201)

# android - ICS 上的意外按钮填充

> ID：10629249
> 
> 赞同：1
> 
> 时间：2012-05-17T02:52:50.210
> 
> 标签：android, nine-patch, statelistdrawable

我有一个带有状态列表可绘制的自定义按钮，该按钮布局紧凑，填充很少。这个按钮在 MDPI 和 HDPI 设备上看起来很棒，但在我的 Motorola Xoom（ICS、MDPI 设备）上填充都是错误的。修改 'padding' 和 'margin' 属性没有任何作用。

有人对可能导致不必要填充的原因有任何建议吗？我相当有信心 state list drawable 和 9patch drawable 都很好（它们在其他 MDPI 设备上完美呈现）。

附件是最终产品外观的示例 - 绿色边框表示其理想外观（以及按钮在其他设备上的外观）；洋红色边框表示 Xoom 上的外观。![在此处输入图像描述](../Images/6ec6dcec1985e5dc347316e0f2b5b0a6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T01:29:36.317

我在开发appwidget时遇到了一些情况。我添加了一个按钮并尝试修剪它的所有填充以使其变小但失败了，总是有一个顶部填充和一个底部填充。我相信这是Android系统的限制，所以appwidget中的所有按钮都足够大，最终用户可以点击。但是，有时我们会因为老板而坚持使用小按钮...正如 Melllvar 所指出的解决方法，我使用了可聚焦、可点击的 TextView 而不是 Button，它按预期工作。

# javascript - 在 Backbone 应用程序中显示加载活动的正确方法

> ID：10629250
> 
> 赞同：0
> 
> 时间：2012-05-17T02:52:53.360
> 
> 标签：javascript, backbone.js

在制作[Backbone.js](http://documentcloud.github.com/backbone/)应用程序时，有时您正在加载一个新[视图](http://documentcloud.github.com/backbone/#View)，在页面呈现之前需要一些时间，并且由于新视图不进行真正的浏览器导航，因此页面似乎什么都不做。

通常，浏览器会在导航发生时显示一个旋转的轮子或“等待 yadayadayada.com”，以便用户知道正在发生的事情，但是对于 Backbone，我们使用 pushState 来更新 url，并且 javascript 处理绘制新页面。如果此新页面需要几秒钟才能呈现，则该页面将变得无响应。

我试图在我的[路由器](http://documentcloud.github.com/backbone/#Router)中向页面呈现加载图标，以便用户知道活动正在幕后发生，但是当该活动在 JS 中发生时，它会冻结 UI（在我的情况下，加载图标永远不会得到渲染到页面，因为 UI 在绘制到页面之前冻结）。

有没有人想出解决这个问题的办法？我确定我不是第一个遇到这个问题的人。

# backbone.js - 如何将主干视图连接到流星车把模板？

> ID：10629252
> 
> 赞同：12
> 
> 时间：2012-05-17T02:53:08.743
> 
> 标签：backbone.js, meteor, handlebars.js

看起来 Backbone.view、meteor 和 handlebars 在操作 DOM 的一部分时具有重叠功能。我查看了假设使用 Backbone 的 ToDo 应用程序，但实际上，它们只使用路由器。

主干视图也处理模板......但它们听起来与流星模板非常不同。此外，看起来骨干网和流星都可以在模型更新时更新用户界面。

好吧，我迷路了！？谁做了什么？

Backbone 对 Meteor 应用程序真的有用吗？Backbone 和 Handle bar 可以共存吗？如果可以的话，在 Meteor 上下文中，如何将 Backbone 视图连接到车把模板？

编辑：找到 todo-backbone 示例。它似乎证实你可以去：

*   流星+主干+下划线模板
*   或者...流星+车把

流星+骨干+车把似乎不是一个可行的选择......

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T09:42:24.757

这比使用 Underscore 模板非常简单，不需要更多的工作。这是一个示例 .html 文件：

```
<template name="user_list">
<ul>
  {{#each users}}
  <li>{{name}}</li>
  {{/each}}
</ul>
</template> 
```

这是一个示例 .js 文件：

```
Users = new Meteor.collection("users");

if (Meteor.is_client) {
  Template.user_list.users = function() {
    return Users.find();
  }

  window.UserView = Backbone.View.extend({
    initialize: function() {
      _.bindAll(this, 'render');
    },
    template: function() {
      Meteor.ui.render(function() {
        return Template.user_list();
      });
    },
    render: function() {
      $(el).empty().append(this.template());
    }
  });
} 
```

然后，您可以使用路由器或其他视图来管理何时显示 UserView，就像在任何其他 Backbone.js 应用程序中一样。

关键是使用 Meteor.ui.render 或其他 Meteor.ui 方法来呈现 HTML，使其具有反应性。

# proxy - 使用命令行通过代理访问 FTP

> ID：10629253
> 
> 赞同：1
> 
> 时间：2012-05-17T02:53:19.903
> 
> 标签：proxy, ftp

由于 FTP 访问被阻止，我需要能够通过代理服务器将文件上传/下载到 FTP。所有这些都是一个自动化脚本，我确实找到了 net2ftp.com，但他们还没有命令行功能。

我一直在使用 NCFTPGET 和 NCFTPPUT，但是在 FTP 被阻止的网络上，我卡住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T19:39:20.923

我找到了一种替代方法`wget`，它也可以使用代理从 FTP 和 HTTP 下载。

在此处阅读手册-> [http://www.gnu.org/software/wget/manual/wget.html](http://www.gnu.org/software/wget/manual/wget.html)

**更新**

我已经转到 cURL ，它是一个更好的完善的命令行工具。更多细节-> [http://curl.haxx.se/](http://curl.haxx.se/)

# symfony - Symfony2 重定向到 https 路由失败（使用错误的端口）

> ID：10629255
> 
> 赞同：2
> 
> 时间：2012-05-17T02:54:09.483
> 
> 标签：symfony

我设置了 symfony，以便登录/注册是 https 路由并且工作正常。当用户在注销时被重定向到登录页面时会出现问题，这里 symfony2 重定向到`https://domain.com:80/login`使用错误端口并失败。我发现解决此问题的唯一方法是将绝对网址放在这样的配置中

```
logout: 
            path:   /logout
            target: https://www.domain.com/login 
```

但我确信一定有更好的方法来解决这个问题。

知道需要做什么吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T09:57:58.117

如果您使用的是 nginx，而不是这个 mite 解决问题：http: [//blog.servergrove.com/2011/04/04/symfony2-quick-tip-generateurl-with-https-on-nginx/](http://blog.servergrove.com/2011/04/04/symfony2-quick-tip-generateurl-with-https-on-nginx/)

缺少 fastcgi 参数：

```
fastcgi_param HTTPS on; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-06T19:55:54.757

如果您使用清漆，请在 app.php 中添加：

```
$_SERVER['HTTP_X_FORWARDED_PORT'] = 443; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-21T23:53:02.543

这发生在任何重定向上，例如从不带破折号的 url 到带破折号的 url，它会重定向到正确的协议 (https)，​​但会重定向到错误的端口 (80)。AFAIK 似乎 Symfony 路由依赖于 SERVER_PORT 全局而不是请求 URI 中指定的内容。所以我唯一的解决方法是在 symfony2 在 app.php 中启动之前设置它，`$_SERVER['SERVER_PORT'] = 443;` hack 但它现在可以工作了。

# c - 比较 C 中的字符串

> ID：10629261
> 
> 赞同：1
> 
> 时间：2012-05-17T02:54:47.680
> 
> 标签：c, arrays, string, pointers, compare

我有一个程序，它使用 fgets 和声明为的缓冲区从 .txt 文件中逐行读取学生姓名和成绩：

```
char buffer[1024]; 
```

现在文件应该在一行上以字符串“end”结尾。

如何告诉 while 循环何时终止`buffer == "end"`？

我尝试使用`strcmp`，但由于某种原因它出现了段错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T03:25:55.037

为了简单地回答您的问题， strcmp 实际上*是*您正在寻找的功能：

```
#include <string.h>

if(!strcmp(line, "end\n") || !strcmp(line, "end\r\n"))
    break; 
```

或类似的应该做的伎俩。注意`!`strcmp 前面的，因为如果字符串匹配，strcmp 返回 0（即 false）。但是我想您已经知道了，因为您已经在问题中提到了 strcmp 。

关于段错误问题：您确定传递给 strcmp 的指针都不是 NULL 吗？大多数 C 标准库在此处不进行任何错误检查，并且在尝试读取`*(0)`.

我想到的另一个可能的问题是，使用 strcmp 当然只有在您已经将缓冲区拆分为单个字符串数组时才有效。`strtok_r`可能最适合这项任务（尽管使用起来[非常棘手](http://www.mkssoftware.com/docs/man3/strtok_r.3.asp)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:52:57.797

Why not just use formatted IO when the format of the text in the file is fixed and use !EOF for looping?

For example:

```
while(fp!=EOF)
{    fscanf(fp,"%s %s %d",name,grades, &marks);
     printf("Name: %s\tGrade: %s\t Marks: %d\n",name,grade,marks);
} 
```

This would automatically detect the end of file, which would also remove the condition of having a string 'end' in the text file.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:55:05.117

Using `strncmp(buffer, "end", 3)` to compare the first three characters along with `if(3 == strlen(buffer)` to make sure end does not start the line, should solve the problem.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T09:47:21.630

char *fgets(char *restrict s, int n, FILE *restrict 流);

fgets() 函数应从流中读取字节到 s 指向的数组中，直到读取 n-1 个字节，或者读取 a 并将其传输到 s，或者遇到文件结束条件。然后字符串以空字节终止。

因此，当您读取字符串“end”时，缓冲区中的元素应该是 {'e', 'n', 'd', '\n', '\0'}，您可以使用 strcmp 如下：

```
size_t len = strlen(buffer);
if (buffer[len - 1] == '\n')
{
    buffer[len - 1] == '\0';
}

if (strcmp(buffer, "end") == 0)
{
    //end
} 
```

或者

```
if (strncmp(buffer, "end", 3) == 0)
{
    //end
} 
```

# c# - .net 4.0开发的程序有时重启后无法启动

> ID：10629262
> 
> 赞同：1
> 
> 时间：2012-05-17T02:54:59.630
> 
> 标签：c#, windows, .net-4.0

我有一个由 C# 开发并由 .net 4.0 构建的程序。该程序是一个 Windows 客户端，它将从条形码阅读器（通过 com 端口）读取条形码，然后通过 WCF 将条形码发送到后端服务器。客户在客户端操作系统中有一个脚本，它将重新启动操作系统并每天自动启动我的程序。操作系统是 Windows XP Embedded。

现在的问题是，有时当系统重新启动时，我的程序无法启动，并且会弹出一个错误消息框询问是否将此错误报告发送给微软。最奇怪的是，如果我的同事将程序文件夹复制并粘贴为“...的副本”在与原始文件夹相同的文件夹中，“...的副本”下的exe可以毫无问题地运行。但原来的还是不行。

我的猜测是，当系统被迫重新启动时，程序可能正在写入日志和其他记录文件。并且文件获得未释放的读/写锁。

我已将错误屏幕截图上传到 flickr。请点击这里[链接](http://www.flickr.com/photos/78738028@N07/)访问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:37:47.420

在不知道实际异常是什么的情况下，我们只能猜测。

*您将需要捕获应用程序中引发的异常。*

最佳实践是将代码封装在 try/catch 子句中。

如果您仍然遇到应用程序崩溃，则可以将事件处理程序附加到 [AppDomain.UnhandledException](http://msdn.microsoft.com/en-us/library/system.appdomain.unhandledexception.aspx)或[Application.UnhandledException](http://msdn.microsoft.com/en-us/library/system.windows.application.unhandledexception%28v=vs.95%29.aspx)并记录收到的异常。

确保输出整个异常堆栈跟踪，以便您可以看到它是从哪里抛出的。

一旦你得到了异常，如果你不能找出原因，然后在这里问另一个问题，具体细节。例如：“在 Windows XP Embedded 上启动后调用 Bar() 时抛出 FooException”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:03:23.540

参考您发布的图像 IMG_1348，错误会在您的表单构造函数中引发。

似乎您添加的代码或 InitializeComponent 代码正在抛出。

由于您使用的是 XPe，因此您可以使用一些选项来调试此问题：

1.  在各种构造函数周围添加消息框语句以显示初始化进度。前后守护。

    public Form1() { MessageBox.Show("Before InitializeComponent"); 初始化组件（）；MessageBox.Show("初始化组件后");

    //MessageBox.Show("在其他之前"); //其他初始化代码 //MessageBox.Show("After Other"); }

2.  尝试使用远程调试器。我不确定这是否适用于 XPe，但如果可以，并且由于您的代码在构造函数中抛出，您需要添加代码以等待调试器连接。

    public Form1() { while (!System.Diagnostics.Debugger.IsAttached){ System.Threading.Thread.Sleep(0); } InitializeComponent(); //其他初始化代码 }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:50:55.567

有时在重新启动后，某些设备驱动程序或某些硬件不会自行重置。必须重新启动机器（关闭并重新打开），或者需要发现将强制设备驱动程序和/或硬件重置的命令。

# javascript - 字体大小转换器

> ID：10629264
> 
> 赞同：0
> 
> 时间：2012-05-17T02:55:30.040
> 
> 标签：javascript, jquery, css, font-size

我正在使用需要我使用字体调整大小的引导程序设计一个网站。我试着用一些javascript和jquery来做。脚本运行但字体大小没有响应。我怎样才能让它工作，我怎样才能在这些 javascript 中使用 !important 。

```
$(".decreaseFont").click(function(){
var currentFontSize = $('html').css('font-size');
var currentFontSizeNum = parseFloat(currentFontSize, 10);
var newFontSize = currentFontSizeNum*0.8;
$('html').css('font-size', newFontSize);
return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:40:46.393

在这里，您可以通过单击 + 或 - 符号来增加或减小文本的大小[http://jsfiddle.net/ipsjolly/hzD8h/1/](http://jsfiddle.net/ipsjolly/hzD8h/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:22:44.147

您的代码正在运行。

小提琴：http: [//jsfiddle.net/LHzBS/1](http://jsfiddle.net/LHzBS/1)

也许是文件中的其他代码有错误。您可以使用 Web 控制台进行调试，使用：

```
debugger; 
```

添加断点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T05:12:35.253

给你：http: [//jsfiddle.net/toadkicker/NJUH7/](http://jsfiddle.net/toadkicker/NJUH7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T03:05:06.857

可能是您正在测试的浏览器不会自动以像素为单位。为了安全起见，将最后一行更改为此

```
$('html').css('font-size', newFontSize+'px') 
```

# java - 获取网站移动版本？

> ID：10629265
> 
> 赞同：2
> 
> 时间：2012-05-17T02:55:46.343
> 
> 标签：java, android, jsoup

目前我正在通过其正常地址获取网站

```
Jsoup.connect(url).get(); 
```

但我想知道我是否可以通过强制获取例如移动版本来优化网络数据？那可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:00:57.900

如果网站有移动版本，它通常会（在他们的最后）检测浏览器类型并自动提供移动版本。

否则，您可以只使用传递网址的网站的移动网址。

# c++ - 这个项目需要多线程吗？

> ID：10629268
> 
> 赞同：-3
> 
> 时间：2012-05-17T02:56:20.380
> 
> 标签：c++, python, multithreading, sfml, ode-library

**目标平台：** Windows XP 高中计算机

**所需库：** SFML、GLEW、ODE、Python（用于嵌入）

让我相信我可能需要多线程的计划功能：

1.  多达一百个机器人都实时解释 python 脚本。
2.  与环境进行物理模拟的所有机器人及其组件。
3.  在播放器周围的大部分区域中生成详细的环境。
4.  游戏运行时可能需要将文件写入硬盘。
5.  （除了这些功能，目标平台让我担心）

这个项目需要多线程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T02:58:30.400

**这个项目需要多线程吗？**

如果您的项目需要您同时执行大量**独立****任务**，那么多线程是一个不错的选择。 注意对***独立***和***同时***的强调，基本规则是：

 *****更多同步的需求更少是拥有多线程的重点。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:01:00.780

相信我，当您的应用程序需要多线程时，您会知道的；）GUI 将冻结并且应用程序不会响应。但正如 Als 所说，如果您需要同时执行大量任务，这是一个不错的选择。****

# java - 传递给另一个函数时，BufferedReader 可以继续读取文本文件中的行吗？

> ID：10629269
> 
> 赞同：2
> 
> 时间：2012-05-17T02:56:31.447
> 
> 标签：java, function, loops, bufferedreader

我有这个函数可以用 BufferedReader 读取文本文件。我想知道我是否可以调用另一个函数并传递 readline/continue 以读取文本文件。如果它可以通过，它可以循环相同的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:01:52.260

对象是自包含的（感谢 Java 对[Object Orientation](http://en.wikipedia.org/wiki/Object-oriented_programming)`BufferedReader`的高度重视），因此您可以在函数和内部循环之间自由传递它，并且它会保留它的状态 - 包括读取行。

但是，如果您尝试调用一个方法来处理您刚刚读取的行，那么将行本身作为 a 传递给方法会更有效`String`，而不是传递整个 BufferedReader 对象。

```
while( myBufferedReader.ready() ) {
    String line = myBufferedReader.readLine();
    processLine( line );
} 
```

# grails - Grails Spring Security 核心插件

> ID：10629272
> 
> 赞同：0
> 
> 时间：2012-05-17T02:57:08.287
> 
> 标签：grails, plugins, spring-security

我（终于）将我的 Acegi 插件升级到 Spring Security Core。同时，我正在从 Grails 1.3.7 升级到 2.0。我的网站以前功能齐全，但现在当我尝试访问我的默认页面（即`IS_AUTHENTICATED_ANONYMOUSLY`）时，我被重定向到`auth`我的`LoginController`. 这个方法从来没有被 Acegi 调用过，所以我不知道问题是什么。我是否设置了错误的配置，或者还有其他需要考虑的事情？

```
grails.plugins.springsecurity.securityConfigType = SecurityConfigType.InterceptUrlMap

    grails.plugins.springsecurity.interceptUrlMap  = [
                '/blog/**':['IS_AUTHENTICATED_ANONYMOUSLY'],
                '/static/**':['IS_AUTHENTICATED_ANONYMOUSLY'],
                '/consensus/**':['IS_AUTHENTICATED_FULLY'],
                '/login/**':['IS_AUTHENTICATED_ANONYMOUSLY'],
                '/signup/**':['IS_AUTHENTICATED_ANONYMOUSLY'],
                '/home/**':['IS_AUTHENTICATED_FULLY'],
                '/test/**':['ROLE_ADMIN'],
                '/admin/**':['ROLE_ADMIN'],
                '/adminmanage/**':['ROLE_ADMIN'],
                '/quartz/**':['ROLE_ADMIN'],
                '/**/*.css':['IS_AUTHENTICATED_ANONYMOUSLY'],
                '/js/**':['IS_AUTHENTICATED_ANONYMOUSLY'],
                '/images/**':['IS_AUTHENTICATED_ANONYMOUSLY'],
                '/monitoring**':['ROLE_ADMIN'],
                '/**':['IS_AUTHENTICATED_FULLY']
            ] 
```

我的 UrlMappings.groovy 是：

```
class UrlMappings {
    static mappings = {
        "/"(controller:"x", action:"y")
        "/z/?"(controller:"x", action:"y")
        "/$controller/$action?/$id?"
                {
                    constraints {
                        // apply constraints here
                    }
                }
        "500"(view: '/error')
    }
} 
```

我一直在阅读文档，但遇到了一些问题，所以我不确定是否需要查看更多相关代码。如果有，请告诉我，我会添加它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T02:22:39.720

我的其他选项`Config.groovy`不正确，这导致了问题。一旦我纠正了它们，一切都很好。

尽管它在文档中被调用，但我的安全字段没有预先设置`grails.plugins.springsecurity`这导致引擎无法识别它们，由于某种原因导致调用`auth`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-02T00:01:59.130

删除 openid 插件后，所有请求都将我重定向到登录页面！我不知道该怎么办......我已经删除了所有相关的内容。

# python - 读取包含 UTF-8 xml 文件的 zip 时出现问题

> ID：10629273
> 
> 赞同：1
> 
> 时间：2012-05-17T02:57:10.510
> 
> 标签：python, utf-8, zip

我有包含许多 UTF-8 xml 文件的 zip 档案。这些文件主要包含英文标签和文本，但少数标签包含非英文文本。我打开 zip 文件并解析其中的 xml 文件没有问题，但是非英文文本会丢失它的编码。

当一个 xml 文件被提取并在 Notepad++ 中打开时，非英文文本如下所示：

```
Курс карбованца к доллару не изменился на Украинской Межбанковской Валютной Бирже (УМВБ) - 176.100. 
```

当它被提取并在 Python 中（在 linux 机器上）读取时，文本如下所示：

```
ÐÑÑÑ ÐºÐ°ÑÐ±Ð¾Ð²Ð°Ð½ÑÐ° Ðº Ð´Ð¾Ð»Ð»Ð°ÑÑ Ð½Ðµ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»ÑÑ Ð½Ð° Ð£ÐºÑÐ°Ð¸Ð½ÑÐºÐ¾Ð¹ ÐÐµÐ¶Ð±Ð°Ð½ÐºÐ¾Ð²ÑÐºÐ¾Ð¹ ÐÐ°Ð»ÑÑÐ½Ð¾Ð¹ ÐÐ¸ÑÐ¶Ðµ (Ð£ÐÐÐ) - 176.100. 
```

我的代码如下所示：

```
def parse(self, fp):
    # open/decompress zip file
    with zipfile.ZipFile(fp, 'r') as f:
        # get all files in zip
        comp_files = f.namelist()
        for comp_file in comp_files:
            cfp = f.open(comp_file, 'r')
            # parse xml
            tree = ElementTree.parse(cfp)
            ...parsing... 
```

我已经尝试解码/编码来自 cfp 的文本，并用 codecs.EncodedFile() 和 utf_8 和 utf_8_sig 的输入编码包装它，没有任何变化。我该怎么做才能修复非英文文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T07:01:27.997

您看到的结果是 UTF-8 被错误地解码为 latin-1/iso-8859-1：

```
>>> x=u'Курс карбованца к доллару не изменился на Украинской Межбанковской Валютной Бирже (УМВБ) - 176.100.'
>>> print x.encode('utf8').decode('latin1')
ÐÑÑÑ ÐºÐ°ÑÐ±Ð¾Ð²Ð°Ð½ÑÐ° Ðº Ð´Ð¾Ð»Ð»Ð°ÑÑ Ð½Ðµ Ð¸Ð·Ð¼ÐµÐ½Ð¸Ð»ÑÑ Ð½Ð° Ð£ÐºÑÐ°Ð¸Ð½ÑÐºÐ¾Ð¹ ÐÐµÐ¶Ð±Ð°Ð½ÐºÐ¾Ð²ÑÐºÐ¾Ð¹ ÐÐ°Ð»ÑÑÐ½Ð¾Ð¹ ÐÐ¸ÑÐ¶Ðµ (Ð£ÐÐÐ) - 176.100. 
```

我将以下通过 Notepad++ 编码的文本保存为单个文件，编码为 UTF-8，在 zip 文件中没有 BOM：

```
<text>Курс карбованца к доллару не изменился на Украинской Межбанковской Валютной Бирже (УМВБ) - 176.100.</text> 
```

您的代码经过修改以使其可运行：

```
from xml.etree import ElementTree
import zipfile

def parse(fp):
    # open/decompress zip file
    with zipfile.ZipFile(fp, 'r') as f:
        # get all files in zip
        comp_files = f.namelist()
        for comp_file in comp_files:
            cfp = f.open(comp_file, 'r')
            # parse xml
            tree = ElementTree.parse(cfp)
            print tree.getroot().text
            print type(tree.getroot().text)

parse(open('file.zip')) 
```

结果：

```
Курс карбованца к доллару не изменился на Украинской Межбанковской Валютной Бирже (УМВБ) - 176.100.
<type 'unicode'> 
```

所以在我看来，它只是在你的 Linux 机器上显示不正确，但没有你正在使用的文件的实际样本，很难进一步分析。

# wpf - Validation.Error 事件的奇怪触发顺序 - 在删除之前添加触发

> ID：10629278
> 
> 赞同：3
> 
> 时间：2012-05-17T02:57:50.050
> 
> 标签：wpf, wpf-4.0

就 Validation.Error 事件的触发顺序而言，我遇到了奇怪的行为。根据[此处](http://msdn.microsoft.com/en-us/library/system.windows.controls.validation.error%28v=vs.100%29.aspx)的文档，**数据绑定引擎首先删除可能已添加到绑定元素的 Validation.Errors 附加属性的任何 ValidationError**。因此，**Removed**的 ValidationErrorEvent应该在 added 之前触发**，**但奇怪的是，在我的情况下，**added事件会在****Removed**事件之前触发。这是我正在使用的代码。

**XAML**

```
<TextBox Grid.Row="3" Grid.Column="1" Name="txtGroupsPerRow" >
    <TextBox.Text>
        <Binding Path="StandardRack.NoOfGroupsPerRow" ValidatesOnDataErrors="True" NotifyOnValidationError="True" 
                 UpdateSourceTrigger="PropertyChanged">
            <Binding.ValidationRules>
                <gs:NumericValidationRule PropertyName="No Of Groups Per Row"/>
            </Binding.ValidationRules>
        </Binding> 
    </TextBox.Text>
</TextBox> 
```

**代码隐藏**

```
private RoutedEventHandler _errorEventRoutedEventHandler;
private void UserControl_Loaded(object sender, RoutedEventArgs e) {
    _errorEventRoutedEventHandler = new RoutedEventHandler(ExceptionValidationErrorHandler);
    this.AddHandler(System.Windows.Controls.Validation.ErrorEvent, _errorEventRoutedEventHandler, true); 
}

private void UserControl_Unloaded(object sender, RoutedEventArgs e) {
    this.RemoveHandler(System.Windows.Controls.Validation.ErrorEvent, _errorEventRoutedEventHandler);
    _errorEventRoutedEventHandler = null;
}

//Added fired before Removed
private void ExceptionValidationErrorHandler(object sender, RoutedEventArgs e) {
    if (validationErrorEvent.Action == ValidationErrorEventAction.Added) {
        viewModel.AddValidationError(propertyPath, validationErrorEvent.Error.ErrorContent.ToString());
    }
    else if (validationErrorEvent.Action == ValidationErrorEventAction.Removed) {
        viewModel.RemoveValidationError(propertyPath);
    }
} 
```

有没有人遇到过这个问题，或者我的代码有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-04T06:27:59.587

查看[源代码](http://referencesource.microsoft.com/#PresentationFramework/src/Framework/System/Windows/Data/BindingExpressionBase.cs,ed4c784234c49c09)，在删除旧验证错误之前添加新验证错误的步骤

> 被仔细安排以避免在用另一个错误替换一个错误时经历“无错误”状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-20T10:51:27.540

请记住fractor的回答，您可以尝试做一些解决方法。创建一些计数器来表示验证控制的错误计数：

```
int errorCounter = 0;
private void TextBox_Error(object sender, ValidationErrorEventArgs e)
{
    var tb = sender as TextBox;
    if (tb != null)
    {
        errorCounter += (e.Action == ValidationErrorEventAction.Added) ? 1 : -1;
        //here do whatever you want to with you stored information about error
        someControl.IsEnabled = !(errorCounter > 0);
    }
} 
```

我知道这是一个老问题，但我希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-27T15:16:20.917

我阅读了很多论坛，发现这是一个 MS 3.5 到 4.0 升级问题，没有直接的解决方案。[https://social.msdn.microsoft.com/Forums/vstudio/en-US/590dc1d4-045e-4bdf-a84b-d759a5903633/validationerror-giving-strange-behavior](https://social.msdn.microsoft.com/Forums/vstudio/en-US/590dc1d4-045e-4bdf-a84b-d759a5903633/validationerror-giving-strange-behavior)

但是，您可以使用以下代码做出决定

((BindingExpressionBase)e.Error?.BindingInError).HasValidationError

true = 如果有验证错误，否则为 false。它对我有用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-27T13:36:02.217

您可以使用此事件来确定错误状态的变化，但由于它们出现乱序（有充分的理由，请参阅 fractor 的答案），您应该改为阅读 Validation.HasErrors 属性。

`var hasErrors = (bool)GetValue(Validation.HasErrorProperty);`

在同一个处理程序中执行此操作，它将始终是正确的。

# solr - solr 排序，我想首先指定一个特定的文档

> ID：10629279
> 
> 赞同：2
> 
> 时间：2012-05-17T02:57:53.023
> 
> 标签：solr

solr 排序，我想首先指定一个特定的文档

例如：

结果：**5,2,3,1**

我要**2**个，其他按规则排序

**2,1,3,5**

这该怎么做 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:34:36.620

我知道您可以尝试使用 Solr 解决此问题的两种方法。

第一个是使用[QueryElevationComponent](http://wiki.apache.org/solr/QueryElevationComponent)。这使您可以在索引时定义排名靠前的结果。正如文档中所建议的，这对于将赞助结果或热门文档放在搜索结果的顶部很有用。潜在的缺点是您必须能够在索引时而不是在查询时识别这些文档。

[另一种方法是在查询时使用bq 参数](http://wiki.apache.org/solr/DisMaxQParserPlugin#bq_.28Boost_Query.29)来提升所需的文档。要提升文档 435，您可以执行以下操作：

```
...&bq=id:435^10 
```

不幸的是，这些方法都不能让您绝对控制结果的顺序。

如果您不介意在执行搜索后处理结果，那么 Riking 提供的解决方案肯定可以完成这项工作。您可以考虑的另一种方法是向 Solr 模式添加一个字段，用于定义显示顺序或优先级。然后，您可以对该字段进行排序以获得所需的排序顺序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-19T06:26:09.283

如果您使用的是 Solr 3.1 或更高版本，则可以[按函数查询排序](http://wiki.apache.org/solr/CommonQueryParameters#sort)。[map](http://wiki.apache.org/solr/FunctionQuery#map)函数对此很有用。

```
sort=map(field_name,5,5,0) asc 
```

在上面，`field_name`是您要排序的字段的名称，`5`是您要推到前面的值，并且`0`必须替换为您知道小于所有其他数字的某个数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:03:01.003

调用内置的 sort() 函数，然后将所需元素移到前面。

伪代码，以防您没有内置方法将其移到前面：

```
tmp = desired;
int dIndex = array.indexOf(desired);
for(i=dIndex-1; i >= 0; i--)
{
    array[i+1] = array[i]
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T07:08:00.830

如果您使用标准查询（不是 dismax），请在查询中添加“OR id:2^1000”。像这样：

```
q=(text:lalala AND author:Bob) OR id:2^1000 
```

这会将 ID=2 的文档放在结果的顶部。

# java - 在哈希表中查找冲突

> ID：10629285
> 
> 赞同：5
> 
> 时间：2012-05-17T02:59:22.500
> 
> 标签：java, hashtable, hashcode, hash-collision

我正在复习我的数据结构期末考试，我在去年的期末考试中遇到了一个问题。在过去三个小时的工作中，我仍然无法找到解决它的方法，除非通过反复试验。这是问题：

“假设你的哈希表的大小是 31，常数 g 也是 31，并且你使用下面的哈希码

```
int hash = 0;
int n = s.length();
for (int i = 0; i < n; i++)
   hash = g * hash + s.charAt(i); 
```

并且您使用单独的链接来解决冲突。列出五个不同的名称，它们将散列到表中的同一位置。”

我认为必须有某种技巧，可能涉及模运算符来解决这个问题，考虑到哈希表的大小为 31，与常数 g 相同。对不起，如果我听起来像这样，但我不是要代码或任何东西，只是对这个问题的一些想法/提示。非常感谢任何评论。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T03:51:54.383

java 字符串可以包含零字符 ( `"\0"`)，因此以下所有内容都将散列为相同的值：

```
"a"
"\0a"
"\0\0a"
"\0\0\0a"
"\0\0\0\0a" 
```

这是证明（感谢 Eric 提供的参考，这是使用的哈希）：

```
> cat Foo.java
class Foo {
    public static void main(String[] args) {                                    
        System.out.println("a".hashCode());                                     
        System.out.println("\0a".hashCode());                                   
        System.out.println("\0a".length());
        System.out.println("\0a".equals("a"));
    }                                                                           
}           
> javac Foo.java                                        
> java Foo                                                       
97
97
2
false 
```

不过，我怀疑这是预期的答案。

另外，如果这是一场考试，我怀疑我能记住 ASCII 码。因此，在另一个答案中使用样式序列的另一种方法是：

```
"\002\000"
"\001\037" 
```

等（这些是八进制三元组 - 以上都是哈希到 62）。*但是为这种风格生成五个*示例（所有相同的哈希）是否容易？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T03:07:10.953

根据[Wikipedia article on Java's string hashing algorithm](http://en.wikipedia.org/wiki/Java_hashCode%28%29)（与您提供的算法相同）：

> 与任何一般的散列函数一样，冲突是可能的。例如，字符串“FB”和“Ea”具有相同的哈希值。String 的 hashCode() 实现使用素数 31，'a' 和 'B' 的差值只有 31，所以计算为 70 × 31 + 66 = 69 × 31 + 97。

# java - AndEngine 两个场景与 ScrollDetector

> ID：10629287
> 
> 赞同：2
> 
> 时间：2012-05-17T03:00:29.603
> 
> 标签：java, android, andengine

我有两个场景，一个带有播放按钮，一个用户可以在游戏的不同级别中滑动。

当用户单击播放时，我将子场景设置为级别选择器场景。当用户按下后退按钮时，我删除子场景。

唯一的问题是当我向后导航时，屏幕上不再显示播放按钮了。我猜这与用户在级别选择器场景中滚动期间更改我的相机有关。

这是我允许用户滚动各个级别的方式。

```
@Override
public boolean onSceneTouchEvent(Scene pScene, TouchEvent pSceneTouchEvent) {

     // TODO Auto-generated method stub
     clickDetector.onTouchEvent(pSceneTouchEvent);
     surfaceScrollDetector.onTouchEvent(pSceneTouchEvent);
     return true;
}

@Override
public void onScrollStarted(ScrollDetector pScollDetector,int pPointerID, float pDistanceX,float pDistanceY) {
    // TODO Auto-generated method stub
    distanceX = 0;      
}

@Override
public void onScroll(ScrollDetector pScollDetector, int pPointerID,float pDistanceX, float pDistanceY) {
    // TODO Auto-generated method stub

    camera.offsetCenter(-pDistanceX, 0);

    distanceX += pDistanceX;
}

@Override
public void onScrollFinished(ScrollDetector pScollDetector,int pPointerID, float pDistanceX, float pDistanceY) {
    if ((distanceX > TURN_PAGE_DISTANCE) && (page > 0))
    {       
        page--;
        camera.offsetCenter(distanceX - CAMERA_WIDTH, 0);
    }
    else if ((distanceX < -TURN_PAGE_DISTANCE) && (page < LEVEL_PAGES - 1))
    {        
        page++; 
        camera.offsetCenter(distanceX + CAMERA_WIDTH, 0);
    }
    else
    {        
        mCamera.offsetCenter(distanceX, 0);
    }
}

@Override
public void onClick(ClickDetector pClickDetector, int pPointerID,float pSceneX, float pSceneY) {
    //loadLeve(levelClicked);
} 
```

有什么想法或建议吗？

# facebook-opengraph - 打开 Graph 自定义对象属性：配对对象？

> ID：10629289
> 
> 赞同：0
> 
> 时间：2012-05-17T03:00:38.820
> 
> 标签：facebook-opengraph, social-media

我想创建两种类型的自定义对象。每个都有一个引用另一种类型对象的属性。本质上，我想创建具有双向关系的双链接对象对。这是一个有效的用例，还是会破坏任何东西？

一个例子：

乐队：披头士；成员：{约翰、保罗乔治、林戈}

音乐家：林戈；乐队：披头士乐队

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:15:44.547

是的，这很好。

对象 1：乐队对象 2：音乐家

Band 引用一个 Musician 对象数组 Muscial 引用一个 Band 对象，或者一个 band 对象数组。

您需要将引用设置为在对象的设置中期望引用对象的数组。

# css - CSS流体布局：当容器宽度增加时，margin-top基于百分比增加

> ID：10629294
> 
> 赞同：31
> 
> 时间：2012-05-17T03:01:18.303
> 
> 标签：css, margin, responsive-design, fluid-layout

我只是在学习 CSS 流体布局和响应式设计，我正在尝试在布局中使用所有没有 px 值的百分比值。

到目前为止，它似乎正在工作，但在一个地方，我看到了一些我没想到的东西。我试图在两个垂直堆叠的 div 之间放置一个边距，这些 div 会根据容器的高度而变化。我希望当我垂直调整窗口大小时，边距会改变，但如果你水平调整它的大小，它也会增长，这是我不想要的。我错过了什么？

这是一个小提琴。提前感谢您的帮助。

[http://jsfiddle.net/gregir/aP5kz/](http://jsfiddle.net/gregir/aP5kz/)

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-17T03:34:12.763

在 CSS 中，所有四个 margin: 和 padding: 百分比都是相对于*宽度*的 ......即使这看起来很荒谬。这就是 CSS 规范的方式，你无能为力。

你能用'ex'（或'em'）做你想做的事吗？这就是我习惯于看到指定边距/填充的“流动”值的方式......而且它可能比百分比问题更少。（虽然我没有相关的第一手经验，但我*怀疑*您计算的百分比值的极长精度会在以后为您设置浏览器不兼容问题。我的风格是尽可能将 CSS 百分比限制为整数，或者有时可能是小数点后一位或有时甚至两位数。）

如果你真的想要一个精确的任意大小的空垂直空间，它是容器的百分比，我首先想到的是一个单独的空 < div > 具有“高度：nn%”的 CSS 规范。或者您指定的其他东西可能已经按照您希望的方式处理垂直尺寸（因为看起来边距在垂直调整大小时根本没有做任何事情）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:12:44.777

是的，这是出乎意料和违反直觉的，但它按设计工作，我不知道为什么它会这样工作。当窗口高度减小时，查看[边距顶部百分比不会改变](https://stackoverflow.com/questions/7266363/margin-top-in-percentage-is-not-adjust-when-window-height-is-decrease)

# scala - Scala 在 2.10 中通过模式匹配改进了哪些方面？

> ID：10629296
> 
> 赞同：26
> 
> 时间：2012-05-17T03:01:33.407
> 
> 标签：scala, scala-2.10

我发现[这个谜题](http://scalapuzzlers.com/index.html#pzzlr-002)很有趣，特别是这段代码：

```
val (i, j): (Int, Int) = ("3", "4") 
```

在 Scala 2.9.1 中运行时失败，但在 2.10 M3 编译时失败（这很棒）。我试图跟踪新的 Scala 版本中的内容，但我无法在这里连接这些点。什么改进导致了这种更精确的行为？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-17T07:01:30.373

在 scala 2.10 中，模式匹配器已经完全重写，现在是*虚拟化模式匹配器*。[**阅读更多关于它的信息！**](https://stackoverflow.com/questions/8533826/what-is-scalas-experimental-virtual-pattern-matcher)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-17T13:31:58.450

正在发生的事情是新的模式匹配器更容易增强和维护，因为它不是老鼠窝的代码。以下示例代码也应显示相同的更改：

```
("3", "4") match { case (i, j): (Int, Int) => /* whatever */ } 
```

发生的事情是 Scala 在编译时理解该模式永远无法匹配。

# java - 在每张牌后打印新行

> ID：10629299
> 
> 赞同：-2
> 
> 时间：2012-05-17T03:02:15.513
> 
> 标签：java

嗨，我正在尝试在不同的行中打印出每件西装：

这是如何出来的：`2C 3C 4C 5C 6C...2H 3H 4H...`

这就是我想要的：

```
2C 3C 4C 5C 6C...
2H 3H 4H 5H 6H 
```

这是我的代码的一部分：

```
public DeckOfCards()
{ 
      for (PlayingCard.CardRank rank : PlayingCard.CardRank.values())   
          for (PlayingCard.CardSuit suit : PlayingCard.CardSuit.values())
          {
              System.out.printf(" %c%c ", rank.getSymbol(),suit.getSymbol());
          } 
```

我想过写一个 if 语句（如果 rank 等于 ace，因为 ace 是最后一个打印出来的字符）然后`System. out.println()`

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T03:08:24.377

我不会直接回答你。

您正在遍历队伍，然后是西装，然后打印`RANK SUIT`。

在西装之后，你需要一个空间。你已经有了那个。

在所有等级的套装之后，您需要一条新线。

因此，您必须检测每个等级的结束（该等级的所有套装）。那应该是特定排名的所有迭代的结束，并且就在排名的迭代结束之前，对吗？它会在哪里？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:04:53.380

```
System.out.print( rank.getSymbol());
System.out.print(suit.getSymbol());
System.out.println(); 
```

# ruby-on-rails - 跨模型链命名范围？（活动记录，Rails）

> ID：10629300
> 
> 赞同：1
> 
> 时间：2012-05-17T03:02:38.947
> 
> 标签：ruby-on-rails, ruby, activerecord

```
Class ModelA < ActiveRecord::Base
    has_many :modelb
end
Class ModelB < ActiveRecord::Base
   has_many :modelc
end
Class ModelC < ActiveRecord::Base
   has_many :modeld
   named_scope :due_on, lambda {|date| { :conditions => {:due_date => date}}}
end
Class ModelD
   named_scope :has_feature, lambda {|feature| { :conditions => {:feature => feature}}}
end 
```

我可以执行以下操作吗

```
a = ModelA.find(1)

a.modelb.modelc.due_on(today).modeld.has_feature(somefeature).should return_an_array_of_instances_of_ModelD 
```

如果不是，那么从模型对象引用相关建模对象的最佳实践是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:50:50.063

您可能希望避免违反得墨忒耳定律，并为其创建抽象。

IE`a.modelb.ending(today).with_feature(feature)`

很好读：[http ://devblog.avdi.org/2011/07/05/demeter-its-not-just-a-good-idea-its-the-law/](http://devblog.avdi.org/2011/07/05/demeter-its-not-just-a-good-idea-its-the-law/)

# c# - 我怎样才能确定哪个对象创建了这个对象

> ID：10629302
> 
> 赞同：1
> 
> 时间：2012-05-17T03:03:03.847
> 
> 标签：c#, oop, unit-testing, vsto

有没有一种简单的方法来获取创建此对象的对象。我知道它总是属于某种对象类型，但我希望`this`在构造函数中使用一些简单的关键字。

### 可能不必要的上下文：

我一直在为我在 PowerPoint 中处理的这个加载项创建单元测试。有时您需要上一级查看父对象以获取位置、字体大小等信息。到目前为止，我一直试图避免这种情况。

我想我可以编辑我的“模拟”并添加另一个构造函数，在那里我将创建每个对象的对象传递给它的子对象；但是，我觉得那里有更好的解决方案。哦，还有，这些模拟部分实现了**Visual Studios Tools for Office**提供的接口，它们的部分接口是`Parent`属性 getter/setter。如果我不实现一个方法，它只会`NotImplementedException`在调用该方法时抛出一个新方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T03:15:19.373

您可以从堆栈中获取调用方法，并从中推断出类名：

[http://www.csharp-examples.net/reflection-calling-method-name/](http://www.csharp-examples.net/reflection-calling-method-name/)

但是，从某种意义上说，这很脆弱，如果您在中间有一个层，那么您关心的调用者在堆栈中的位置就会发生变化。但是，如果您将逻辑放在实用程序方法或扩展方法中，随着时间的推移，它并不难发展。

查询调用堆栈并不是一个非常快的操作，但对于单元测试来说，它可能是可以接受的。

# iphone - UITabViewController、viewWillAppear 没有被调用？

> ID：10629305
> 
> 赞同：2
> 
> 时间：2012-05-17T03:04:13.777
> 
> 标签：iphone, ios4, ios5

iOS新手，如果问题非常基本，请裸露？当我多次按下标签按钮时，它不是在调用`viewWillAppear`函数吗？如果我错了，那么每次按下选项卡按钮时都会调用哪个函数`tabview`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:10:13.087

你是对的，`viewWillAppear`有点特别，它通常是自动调用的，但在某些情况下，包括手动添加视图控制器视图（视图`addSubview:`），以及将其作为视图控制器添加到时，`UITabViewController`它不会收到消息。

然而，这仅适用于根视图，当您来回导航（可能使用导航控制器）时，根视图`viewWillAppear`将在某个点被触发。

简而言之，如果你需要`viewWillAppear`在这些情况下实现某些东西，你应该在知道它会被呈现时自己发送消息。您可以在视图控制器中处理这种情况，请查看以下有关此事的文章：

[http://www.touchthatfruit.com/viewwillappear-and-viewdidappear-not-being-ca](http://www.touchthatfruit.com/viewwillappear-and-viewdidappear-not-being-ca)

祝你好运。

# java - xpath 的运行时异常

> ID：10629308
> 
> 赞同：0
> 
> 时间：2012-05-17T03:04:44.780
> 
> 标签：java, xpath

我有一个函数，在这个函数中，我使用 Xpath 来获取节点的位置，如下所示：

```
 Node goTo;
.....

private Node xpathgo(Node node) throws XPathExpressionException {
       XPath xpath = XPathFactory.newInstance().newXPath();
       Node result;

 if (node == null || node.getNodeName() == null){
            return null;
        }

               xpathgo(node.getFirstChild());

               result =   (Node) xpath.evaluate("//*[. = \"" + goTo.getNodeValue() + "\"]", node,XPathConstants.NODE);

            xpathgo(node.getNextSibling());
 return  result;   
} 
```

基本上我用它来获取一个由 URL html 代码组成的 DOM 节点，但我面临两个问题，首先，有时我得到这个异常：

```
Exception in thread "main" java.lang.RuntimeException: Could not resolve the node to a handle
    at com.sun.org.apache.xml.internal.dtm.ref.DTMManagerDefault.getDTMHandleFromNode(DTMManagerDefault.java:574)
    at com.sun.org.apache.xpath.internal.XPathContext.getDTMHandleFromNode(XPathContext.java:182)
    at com.sun.org.apache.xpath.internal.XPath.execute(XPath.java:301)
    at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(XPathImpl.java:210)
    at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(XPathImpl.java:275) 
```

还有这个用于其他类型的节点：

```
Caused by: javax.xml.transform.TransformerException: Expected ], but found: the
at com.sun.org.apache.xpath.internal.compiler.XPathParser.error(XPathParser.java:608)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.consumeExpected(XPathParser.java:526)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.Predicate(XPathParser.java:1935)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.Step(XPathParser.java:1724)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.RelativeLocationPath(XPathParser.java:1624)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.LocationPath(XPathParser.java:1595)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.PathExpr(XPathParser.java:1315)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.UnionExpr(XPathParser.java:1234)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.UnaryExpr(XPathParser.java:1140)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.MultiplicativeExpr(XPathParser.java:1061)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.AdditiveExpr(XPathParser.java:1003)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.RelationalExpr(XPathParser.java:928)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.EqualityExpr(XPathParser.java:868)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.AndExpr(XPathParser.java:832)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.OrExpr(XPathParser.java:805)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.Expr(XPathParser.java:788)
at com.sun.org.apache.xpath.internal.compiler.XPathParser.initXPath(XPathParser.java:127)
at com.sun.org.apache.xpath.internal.XPath.<init>(XPath.java:176)
at com.sun.org.apache.xpath.internal.XPath.<init>(XPath.java:264)
at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.eval(XPathImpl.java:193)
at com.sun.org.apache.xpath.internal.jaxp.XPathImpl.evaluate(XPathImpl.java:275)
... 7 more 
```

但有趣的是，在展位案例中，节点是一个`[#text]`让我困惑为什么会发生的节点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T00:33:14.913

我制作了一个函数，可以根据需要返回节点的位置：

**测试.xml**

```
 <html>
           <div id='teste'>Teste</div>
           <div id='poutine'>poutine</div>
           <div id='ola'>Ola tudo ebm!</div>
   </html> 
```

**XMLManager 类：**

```
 public final class XMLManager {

            public static Integer getPositionByNode(Node node, File filteForLookUp){

                Integer position = null;    

                try {

                    Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(filteForLookUp);

                    NodeList ndList = doc.getElementsByTagName("*");

                    if(ndList != null){

                        for(int i=0;i<ndList.getLength();i++){

                            if(ndList.item(i).isEqualNode(node)){
                                position = i;
                                System.out.println("Dans la condition");
                            }

                        }

                    }

                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (SAXException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (ParserConfigurationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                return position;

            }

        } 
```

**我的主要：**

```
 public class MyMain {

            /**
             * @param args
             */
            public static void main(String[] args) {

                 Document doc = null;
                 File file = new File("D:\\Loic_Workspace\\Test2\\res\\test.xml");
                try {
                    doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(file);
                    System.out.println(doc.getElementsByTagName("*").item(2).getTextContent());
                    System.out.println(XMLManager.getPositionByNode(doc.getElementsByTagName("*").item(2), file));
                } catch (SAXException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (ParserConfigurationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }

        } 
```

控制台中的输出：

> poutine Dans la 条件 2

**顺便说一句，获取 [#text] 并不奇怪，你无法通过 getTextContent() 方法获取值。**

希望它有帮助;）

# ssl - 单个 IP、多个 SSL 证书、不使用通配符、IIS 7 上的 TLS 可能吗？

> ID：10629310
> 
> 赞同：-1
> 
> 时间：2012-05-17T03:04:55.560
> 
> 标签：ssl, iis-7, iis-7.5

我们在单个 IP 上托管许多具有域的站点，即。www.domain1.com，www.domain2.com。我们想使用 SSL 保护 /admin。从历史上看，每个 SSL 证书都需要一个唯一的 IP 地址。这些是小型站点，就可维护性和成本而言，为每个站点获取/分配单独的 IP 都是不现实的。因为我们没有使用子域，所以通配符 SSL 证书方法不起作用。

谷歌搜索我发现 Apache 可以通过使用 TLS 来做到这一点，请参阅此处的答案： [https ://serverfault.com/questions/109766/ssl-site-not-using-the-correct-ip-in-apache-and-ubuntu](https://serverfault.com/questions/109766/ssl-site-not-using-the-correct-ip-in-apache-and-ubuntu)

我的问题是 IIS 7.5 是否也可以做到这一点？如果是这样，有人知道如何设置吗？

提前致谢

戴夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T12:24:32.637

SSL 和 TLS 基本相同。TLS 是 SSL 的继承者，其中 TLS 1.0 与 SSL 3.1 基本相同。

不同之处在于对[SNI](http://en.wikipedia.org/wiki/Server_Name_Indication)的支持。这允许浏览器告诉服务器请求是哪个主机名，而不需要服务器解密请求。

通常，网络服务器会查看主机名标头来决定请求是针对哪个虚拟站点。但是当使用 SSL/TLS 时，整个请求（包括所有标头）都会被加密。为了读取标头，服务器必须解密请求，但如果不使用正确的证书，它就无法做到这一点。要知道要使用哪个证书，它需要知道请求是针对哪个站点的，但它不知道这一点，因为该信息在加密请求中。一个经典的鸡/蛋问题。这就是 SNI 介入的地方。

SNI 需要相当新的操作系统/浏览器/服务器，并且 IIS 尚不支持。它将在 Windows Server 2012 和 IIS 8.0（将于今年发布）中得到支持。

# java - 如何在 Ubuntu 上删除 Firefox/Chrome 状态栏中的“Applet 已启动”消息？

> ID：10629313
> 
> 赞同：0
> 
> 时间：2012-05-17T03:05:16.727
> 
> 标签：java, firefox, google-chrome, ubuntu, applet

这适用于不需要此消息的信息亭应用程序。这很奇怪，因为 Mac 在任一浏览器中都没有显示此消息——似乎只发生在 Ubuntu 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T01:08:00.817

在 Ubuntu 10、Firefox 12 上使用此[示例小程序](https://sites.google.com/site/drjohnbmatthews/subway)，​​我能够重现消息“小程序已初始化”，如下所示。它似乎不是*来自*覆盖的`init()`，并且`super`实现是空的；我认为这是插件或浏览器本身的功能。奇怪的是，当鼠标光标靠近时，消息实际上从浏览器窗口的一个下角*移动到另一个。*

对于嵌入式使用，请考虑通过[java-web-start 启动](/questions/tagged/java-web-start "显示标记为“java-web-start”的问题")小程序（或混合应用程序） ，如[示例](https://sites.google.com/site/drjohnbmatthews/subway)中所示。

![在此处输入图像描述](../Images/3164e76736a4860262833ebc761ec90d.png)

附录：Andrew 的示例产生消息“Applet 已启动”。

![在此处输入图像描述](../Images/9a4c094dd6312f84b91ef644313fed1b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-18T18:53:10.510

这不是您问题的直接答案，但绝对是您问题的可能解决方案（是评论。作为@Andrew Thompson 建议的答案添加）：

如果它是一个自助服务终端应用程序，那么为什么会有状态栏呢？如果您可以控制使用应用程序的系统（或安装浏览器的系统），您可以停用浏览器中的状态栏或使浏览器始终以全屏模式显示。

大多数信息亭应用程序都以这种方式运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T03:12:10.910

对我来说似乎很无聊，但是如果“状态栏”是指旧浏览器底部的小栏，请尝试在or[`Applet.showStatus("")`](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#showStatus%28java.lang.String%29)末尾使用。`init()``start()`

* * *

编辑：使用以下命令会产生预期的结果`appletviwer`。

```
$ appletviewer NoMessageApplet.java 
```

![在此处输入图像描述](../Images/e530177a11c5d2c85500234fe8867872.png)

代码：

```
// intended only to show attributes - view in browser
// <applet code='NoMessageApplet' width=400 height=400></applet>
import java.awt.BorderLayout;
import javax.swing.*;

public class NoMessageApplet extends JApplet {

    String noMessage = " Nobody Here But Us Chickens..";
    JTextArea output;

    @Override
    public void init() {
        try {
            SwingUtilities.invokeAndWait( new Runnable() {
                public void run() {
                    initGui();
                }
            });
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    public void initGui() {
        JPanel gui = new JPanel(new BorderLayout(5,5));
        output = new JTextArea(5,20);
        gui.add(new JScrollPane(output));

        setContentPane(gui);
        setMessage("initGui()" + noMessage);
    }

    @Override
    public void start() {
        setMessage("start()" + noMessage);
    }

    /** Both sets the message as the 'status' message &
    appends it to the output control */
    public void setMessage(final String message) {
        SwingUtilities.invokeLater( new Runnable() {
            public void run() {
                output.append(message + "\n");
            }
        });
        showStatus(message);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T18:47:38.997

FF13 修复了它（最新版本的 Chrome 也是如此）。两者目前默认情况下都没有启用状态栏（他们在我发布这个初始帖子时启用了）。不完全是一个答案，但一个*对*我有用的答案。

# iphone - 响应式设计的边距不适用于移动设备

> ID：10629314
> 
> 赞同：0
> 
> 时间：2012-05-17T03:05:25.510
> 
> 标签：iphone, css, ios, wordpress

我有一个响应式 wordpress 主题和我在移动设备 (IOS) 上关闭的网站的正确网站.. 我该如何解决这个问题？

我尝试了通常的 minwidth 无济于事..

```
.middle {
clear: both;
z-index: 2;
width: 100%;
padding-top: 27px;
min-width:1450px
} 
```

[http://speedsociety.com/](http://speedsociety.com/)

![在此处输入图像描述](../Images/62e69927676f9afcc9482831757e4ca4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:11:03.797

至少从我所见，您的网站似乎没有响应。您是否设置了任何媒体查询？

[查看媒体查询语法](http://webdesignerwall.com/tutorials/css3-media-queries)

编辑：我刚刚检查了父主题样式表并且没有设置媒体查询，因此您的主题没有响应。

# java - 使用自签名证书的 Java ssl/https 客户端

> ID：10629315
> 
> 赞同：6
> 
> 时间：2012-05-17T03:05:52.190
> 
> 标签：java, ssl, https, self-signed, truststore

我正在尝试使用 jdk 版本 1.6.0_32 编写 Java https 客户端。我有一个已导入新信任库的自签名公共证书。问题是我不断收到“线程“主”javax.net.ssl.SSLHandshakeException：握手期间远程主机关闭连接中的异常”SSL调试输出如下：

```
C:\Users\csheets\eclispe_workspace\sdpweb\InstallSSLCert>java TestCert
keyStore is :
keyStore type is : jks
keyStore provider is :
init keystore
init keymanager of type SunX509
trustStore is: c:\users\csheets\4startrust.ts
trustStore type is : jks
trustStore provider is :
init truststore
adding as trusted cert:
Subject: CN=4starserver.servehttp.com
Issuer:  CN=4STAR
Algorithm: RSA; Serial number: 0x200000001
Valid from Mon May 14 11:25:15 MDT 2012 until Tue May 14 11:25:15 MDT 2013

trigger seeding of SecureRandom
done seeding SecureRandom
Allow unsafe renegotiation: true
Allow legacy hello messages: true
Is initial handshake: true
Is secure renegotiation: false
%% No cached client session
*** ClientHello, TLSv1
RandomCookie:  GMT: 1320442869 bytes = { 175, 184, 30, 195, 10, 55, 219, 232, 23
, 237, 63, 239, 83, 49, 125, 80, 10, 174, 112, 210, 61, 53, 232, 66, 179, 22, 16
1, 80 }
Session ID:  {}
Cipher Suites: [SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH
_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC
_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_
DSS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_DES_CBC_SHA, SSL_DHE_RSA_WITH_DES_CBC_SH
A, SSL_DHE_DSS_WITH_DES_CBC_SHA, SSL_RSA_EXPORT_WITH_RC4_40_MD5, SSL_RSA_EXPORT_
WITH_DES40_CBC_SHA, SSL_DHE_RSA_EXPORT_WITH_DES40_CBC_SHA, SSL_DHE_DSS_EXPORT_WI
TH_DES40_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]
Compression Methods:  { 0 }
***
main, WRITE: TLSv1 Handshake, length = 75
main, WRITE: SSLv2 client hello message, length = 101
main, READ: SSLv3 Handshake, length = 527
*** ServerHello, SSLv3
RandomCookie:  GMT: 1320442987 bytes = { 158, 143, 79, 29, 193, 160, 122, 201, 8
1, 67, 17, 26, 159, 243, 54, 202, 255, 156, 125, 121, 132, 174, 17, 202, 222, 65
, 252, 77 }
Session ID:  {131, 30, 0, 0, 6, 235, 145, 226, 5, 214, 118, 217, 18, 123, 46, 20
4, 51, 182, 211, 225, 48, 172, 95, 70, 144, 4, 178, 150, 166, 75, 166, 29}
Cipher Suite: SSL_RSA_WITH_RC4_128_SHA
Compression Method: 0
Extension renegotiation_info, renegotiated_connection: <empty>
***
%% Created:  [Session-1, SSL_RSA_WITH_RC4_128_SHA]
** SSL_RSA_WITH_RC4_128_SHA
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=4starserver.servehttp.com
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 1024 bits
  modulus: 129409122589634486230897608496688768265641316152022572826296995250983
  80968933262586507340653723460037384941316405007365056646964455523390263136350462
  59738068084572819329229707448458528878467480278641098016863640927986379246142644
  62745346179244207665720440347282685862962453661441013596685879879277368109494267

public exponent: 65537
Validity: [From: Mon May 14 11:25:15 MDT 2012,
           To: Tue May 14 11:25:15 MDT 2013]
Issuer: CN=4STAR
SerialNumber: [    02000000 01]

]
Algorithm: [SHA1withRSA]
Signature:
0000: 00 8E A1 F4 58 22 F2 C2   A9 1D C6 CB 5A 23 F5 A5  ....X"......Z#..
0010: 02 3A C9 FF 83 96 1A 13   3A 0F 59 D5 1E 1F 56 85  .:......:.Y...V.
0020: AB 4A 46 8D F3 43 E8 BA   B3 F9 B7 8C FB 76 AD D5  .JF..C.......v..
0030: 9F 15 47 DC 30 72 F9 BA   B1 FF DA 2C 25 89 FF 30  ..G.0r.....,%..0
0040: C4 4F BA D6 0C B9 30 10   B0 4B 74 EF 8A F4 5D F1  .O....0..Kt...].
0050: AC 2C 47 D9 C2 F5 A0 AF   CE 8B 76 53 36 A3 BE 11  .,G.......vS6...
0060: 7E BA 1F 4A 67 C1 69 EF   C3 E6 32 E2 0D 09 93 66  ...Jg.i...2....f
0070: 92 21 66 88 95 CA BD C8   FF CF 79 9D 7E F3 DC E0  .!f.......y.....

]
***
Found trusted certificate:
[
[
  Version: V3
  Subject: CN=4starserver.servehttp.com
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  Sun RSA public key, 1024 bits
  modulus: 129409122589634486230897608496688768265641316152022572826296995250983
80968933262586507340653723460037384941316405007365056646964455523390263136350462
59738068084572819329229707448458528878467480278641098016863640927986379246142644
62745346179244207665720440347282685862962453661441013596685879879277368109494267

 public exponent: 65537
 Validity: [From: Mon May 14 11:25:15 MDT 2012,
           To: Tue May 14 11:25:15 MDT 2013]
 Issuer: CN=4STAR
 SerialNumber: [    02000000 01]

 ]
Algorithm: [SHA1withRSA]
Signature:
0000: 00 8E A1 F4 58 22 F2 C2   A9 1D C6 CB 5A 23 F5 A5  ....X"......Z#..
0010: 02 3A C9 FF 83 96 1A 13   3A 0F 59 D5 1E 1F 56 85  .:......:.Y...V.
0020: AB 4A 46 8D F3 43 E8 BA   B3 F9 B7 8C FB 76 AD D5  .JF..C.......v..
0030: 9F 15 47 DC 30 72 F9 BA   B1 FF DA 2C 25 89 FF 30  ..G.0r.....,%..0
0040: C4 4F BA D6 0C B9 30 10   B0 4B 74 EF 8A F4 5D F1  .O....0..Kt...].
0050: AC 2C 47 D9 C2 F5 A0 AF   CE 8B 76 53 36 A3 BE 11  .,G.......vS6...
0060: 7E BA 1F 4A 67 C1 69 EF   C3 E6 32 E2 0D 09 93 66  ...Jg.i...2....f
0070: 92 21 66 88 95 CA BD C8   FF CF 79 9D 7E F3 DC E0  .!f.......y.....

]
*** ServerHelloDone
*** ClientKeyExchange, RSA PreMasterSecret, SSLv3
main, WRITE: SSLv3 Handshake, length = 132
SESSION KEYGEN:
PreMaster Secret:
0000: 03 00 07 86 97 89 23 A4   73 85 54 59 A4 76 DD 85  ......#.s.TY.v..
0010: 12 1A 28 1B 71 CC 7A B2   EE 0F 65 60 26 30 6C B4  ..(.q.z...e`&0l.
0020: B4 92 2D 15 50 51 E5 10   77 96 8E B0 4F 30 57 73  ..-.PQ..w...O0Ws
CONNECTION KEYGEN:
Client Nonce:
0000: 4F B4 5C F5 AF B8 1E C3   0A 37 DB E8 17 ED 3F EF  O.\......7....?.
0010: 53 31 7D 50 0A AE 70 D2   3D 35 E8 42 B3 16 A1 50  S1.P..p.=5.B...P
Server Nonce:
0000: 4F B4 5C 6B 9E 8F 4F 1D   C1 A0 7A C9 51 43 11 1A  O.\k..O...z.QC..
0010: 9F F3 36 CA FF 9C 7D 79   84 AE 11 CA DE 41 FC 4D  ..6....y.....A.M
Master Secret:
0000: 60 59 16 75 E0 5E 4B 64   D6 6B 56 18 9B F2 C8 7A  `Y.u.^Kd.kV....z
0010: F8 DF 65 C6 C0 12 92 62   15 A1 4E 5F 53 D3 02 EF  ..e....b..N_S...
0020: 9B EF ED FD 1E 01 61 6F   AC 39 E0 5B AD 87 BF 25  ......ao.9.[...%
Client MAC write Secret:
0000: C1 36 79 97 E6 71 22 D0   27 D0 41 88 F9 F5 8D C2  .6y..q".'.A.....
0010: EA A3 97 FB                                        ....
Server MAC write Secret:
0000: C4 00 15 49 31 29 B2 F3   06 90 59 F0 5A 4D 3D 45  ...I1)....Y.ZM=E
0010: 32 B2 B6 83                                        2...
Client write key:
0000: E6 46 87 A2 16 52 04 11   73 15 E8 23 9F E6 02 A3  .F...R..s..#....
Server write key:
0000: 04 63 1D 64 E7 25 FC E4   53 FC 43 04 33 3C ED 6E  .c.d.%..S.C.3<.n
... no IV used for this cipher
main, WRITE: SSLv3 Change Cipher Spec, length = 1
*** Finished
verify_data:  { 61, 221, 238, 253, 97, 36, 152, 79, 254, 95, 226, 136, 55, 16, 2
07, 66, 58, 197, 233, 254, 125, 99, 11, 0, 138, 51, 139, 62, 175, 123, 52, 167,
131, 216, 245, 97 }
***
main, WRITE: SSLv3 Handshake, length = 60
main, received EOFException: error
main, handling exception: javax.net.ssl.SSLHandshakeException: Remote host close
d connection during handshake
main, SEND SSLv3 ALERT:  fatal, description = handshake_failure
main, WRITE: SSLv3 Alert, length = 22
main, called closeSocket()
Exception in thread "main" javax.net.ssl.SSLHandshakeException: Remote host clos
ed connection during handshake
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(Unknown Source)

    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(Un
known Source)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Sou
rce)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.startHandshake(Unknown Sou
rce)
    at sun.net.www.protocol.https.HttpsClient.afterConnect(Unknown Source)
    at sun.net.www.protocol.https.AbstractDelegateHttpsURLConnection.connect
(Unknown Source)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown So
urce)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(Unkn
own Source)
    at TestCert.main(TestCert.java:92)
Caused by: java.io.EOFException: SSL peer shut down incorrectly
    at com.sun.net.ssl.internal.ssl.InputRecord.read(Unknown Source)
    ... 9 more 
```

不知道如何解释所有这些信息，但似乎我的证书正在被发现和信任 - ClientKeyExchange 是什么意思 - 可能是服务器正在期待客户端身份验证，或者这只是正在交换的证书信息。整个 Java 密钥库、信任库和自签名证书似乎造成了很多复杂性和混乱——至少对我来说是这样。

我的测试客户端代码如下：

```
import java.io.*;
import java.net.URL;
import java.net.URLConnection;

import javax.net.ssl.*;
import javax.net.ssl.X509TrustManager;
import java.security.cert.X509Certificate;
import java.security.*;

public class TestCert {
public static void main(String[] args) throws Exception {
    System.setProperty("javax.net.debug", "ssl");
    System.setProperty("sun.security.ssl.allowUnsafeRenegotiation", "true");
    System.setProperty("javax.net.ssl.trustStore", "c:\\users\\csheets\\4startrust.ts");
    System.setProperty("javax.net.ssl.trustStorePassword", "mypassword");

    SSLSocketFactory sslsocketfactory = (SSLSocketFactory) SSLSocketFactory.getDefault();

    URL url = new URL("https://4starserver.servehttp.com:777/?username=0&password=0&command=WEBAUTH&TRAN=2&MERCHANT=9999999999119911&FNAME=TONY&LNAME=PISCOPO&CC=4111111111111111&EXP=0613&AMOUNT=99.98");
    HttpsURLConnection conn = (HttpsURLConnection)url.openConnection();
    conn.setSSLSocketFactory(sslsocketfactory);

    InputStream inputstream = conn.getInputStream();
    InputStreamReader inputstreamreader = new InputStreamReader(inputstream);
    BufferedReader bufferedreader = new BufferedReader(inputstreamreader);

    String string = null;
    while ((string = bufferedreader.readLine()) != null) {
        System.out.println("Received " + string);
    }
}
} 
```

我也尝试过其他方法，例如创建自己的 TrustManager 和 TrustManager，但这似乎也不起作用。任何帮助将不胜感激。

**更新：** 服务器端口已更改为 443，因此可以使用[Qualys SSL Lab 测试进行测试](https://www.ssllabs.com/ssltest/index.html)，我得到以下结果：

```
Common Error Messages

Connect timed out - server did not respond to our connection request
No route to host - unable to reach the server
Unable to connect to server - failed to connect to the server
Unrecognized SSL message, plaintext connection? - the server responded with plain-text HTTP on HTTPS port
Received fatal alert: handshake_failure - this is either a faulty SSL server or some other server listening on port 443; if the SSL version of the web site works in your browser, please report this issue to us
Known Issues

Could not generate DH keypair - due to a known problem with the underlying SSL library (Sun's JSSE implementation) we are unable to assess the sites that offer only DHE handshakes stronger than 1024 bits. 
```

奇怪的是，如果我只是将 URL [https://server.com/](https://server.com/)放在浏览器中，我似乎会从服务器得到响应 - 但在服务器上显然似乎有几个请求/连接正在建立。似乎服务器端有些东西不太对劲？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:52:05.407

您的证书是受信任的（使用您的自定义信任库），这不是信任管理器问题。您不需要允许不安全的重新协商（也不需要指定默认值`SSLSocketFactory`）。

TLS 设置似乎存在问题，因为它适用于`System.setProperty("https.protocols", "SSLv3");`. 如果你强制`-tls1`使用. 你也会遇到握手问题`openssl s_client`。

如果您可以控制服务器，我建议您尝试将其放在端口 443 上并通过[Qualys SSL 实验室测试进行测试](https://www.ssllabs.com/ssltest/)（与许多其他可用测试相比，该测试更详细并发现更多问题）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-24T20:40:13.373

对于有类似问题的任何人：我在使用 Java 和 SSL 时也遇到了问题，其中服务器具有自签名证书。我尝试使用 System.setProperty("https.protocols", "SSLv3"); 如答案中所述。它对我不起作用。但是类似的东西确实有效： System.setProperty("https.protocols", "TLSv1");

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-05-17T03:33:53.393

尝试在您的主类中实现 X509TrustManager 类，然后：

```
 private static void trustAllHttpsCertificates() throws Exception {
       //  Create a trust manager that does not validate certificate chains:
       javax.net.ssl.TrustManager[] trustAllCerts = new javax.net.ssl.TrustManager[1];
       javax.net.ssl.TrustManager tm = new YourMainClass();
       trustAllCerts[0] = tm; 
       javax.net.ssl.SSLContext sc = javax.net.ssl.SSLContext.getInstance("SSL");
       sc.init(null, trustAllCerts, null);
       javax.net.ssl.HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());
    } 
```

并覆盖它，

```
 @Override
    public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {
       return;
    }

    @Override
    public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {
       return;
    }

    @Override
    public X509Certificate[] getAcceptedIssuers() {
       return null;
    } 
```

我希望能帮助你。:)

# c# - 如何将图形对象转换为位图（或将其作为位图访问）

> ID：10629316
> 
> 赞同：1
> 
> 时间：2012-05-17T03:05:57.700
> 
> 标签：c#, bitmap

我知道整个

```
Bitmap bmp = new Bitmap(100,100) ;
Graphics graphics = Graphics.FromImage(bmp) ; 
```

但这不是我需要做的。基本上我要做的是稍微修改屏幕上的绘制方式（它是一个中间有一条线的矩形）。我需要更改矩形的背景（我可以使用像素比较或其他类似方法）。

如果我能以某种方式把它变成一个位图。没有办法（我可以告诉它获取/设置/修改）像素级别的图形对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:42:25.647

Bob Powell 写了一篇关于直接访问图像位的优秀文章。

[https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:31:49.140

您可以使用这样的 for 循环来执行此操作：

```
for(int i = 0; i < bmp.Width; i++)
{
    for(int j = 0; j < bmp.Height; j++)
    {
        var pixel = bmp.GetPixel(i, j);
        //do stuff with pixel here :)
    }
} 
```

编辑：在看到 Tilak 的评论后，如果性能对你来说是个问题，那么他是对的！（谢谢，我不知道 LockBits！+1）可以在[MS BitmapData 类页面](https://docs.microsoft.com/en-us/dotnet/api/system.drawing.imaging.bitmapdata)上找到一些示例。但是，如果这看起来很复杂，上述方法应该可以解决问题:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:53:00.347

一旦您使用了图形，只需保存位图 - 对图形所做的更改是对位图进行的。

# node.js - node js 常见做法

> ID：10629320
> 
> 赞同：5
> 
> 时间：2012-05-17T03:06:46.930
> 
> 标签：node.js

我一直在阅读一些节点教程，但是对于那些以前构建过真正节点应用程序的人，我想询问一些最佳/常见做法。

1.  你在你的 linux 机器上运行节点应用程序的是谁？我读过的教程都没有提到任何关于添加节点用户和组的内容，所以我很好奇这是因为他们只是忽略了提及它还是因为他们做了其他事情。
2.  你把你的项目放在哪里？'/家/'？'/var/'?
3.  你通常会在你的节点应用程序前面放一些东西吗？比如nginx还是haproxy？
4.  你是在同一台机器上还是在不同的机器上运行其他资源，例如 storage(redis, mongo, mysql, ...), mq, etc...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:08:43.613

我猜这个问题主要是关于设置你的在线服务器而不是你的本地开发机器。

1.  在 irc 频道中，有人回答了同样的问题，并说他为每个应用程序使用了一个单独的用户。所以我猜这是一个很好的常见做法。

2.  我主要做 /home/user/apps

3.  我看到很多 nginx 示例，所以我猜这是大多数人使用的。我在 node.js 应用程序前面有一个带有清漆的服务器，它运行良好并且易于设置。有一些纯粹的 node.js 解决方案，但对于像你的反向代理这样重要的东西，我会选择一些经过实战考验的东西。

4.  要正确回答这个问题，您可能需要问自己。我的资源是什么？我能负担得起许多小型服务器吗？你的申请有多重要？如果您的应用出现故障，您会赔钱吗？

    如果您在一个 VPS 上运行完整堆栈，那么如果该 VPS 出现问题，那么只有您的一个应用程序受到影响。

    在维护方面，例如一个用于多个应用程序的数据库服务器可能看起来很有吸引力。您可能会认为，如果您需要更新数据库以修补安全漏洞，您只需在一个地方进行。另一方面，您现在对依赖于该数据库服务器的所有应用程序都有一个单点故障。

    我个人选择了许多全栈服务器，并且正在学习如何自动化部署和维护。Puppet 和 Chef 之类的工具似乎对此非常有帮助。

在过去的 3 个月里，我只拥有自己的 Linux 服务器，并且成为 Linux 用户已有 1.5 年。因此，在根据这些答案设置服务器公园之前，请确保您进行了一些额外的研究。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T11:21:03.623

这是我的想法：

1.  为每个应用程序使用单独的用户**是**我这样做的方式。

2.  我保留它`/home/user/`以确保只有`user`（当然是root）才能访问该应用程序。

3.  前段时间，我基于[node-http-proxy 模块](https://github.com/nodejitsu/node-http-proxy)在 Node JS 中创建了自己的反向代理。如果您不想使用反向代理，那么在 Node.js 前面放置任何东西都是没有意义的。还有更多：它可能会损害应用程序，因为例如 nginx 不能使用 HTTP/1.1（至少目前）。

4.  我在同一台机器上运行的所有资源。只有当我真正需要在不同的机器之间分发我的应用程序时，我才开始考虑单独的机器。无需预先优化。不过，App 的代码是另一回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T13:34:55.777

访问以下链接::

[网红](http://net.tutsplus.com/tag/node-js/)

[节点图](http://net.tutsplus.com/tag/node-js/)

[lynda nodejs 教程](http://www.lynda.com/Node-js-training-tutorials/1283-0.html)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-18T11:02:22.143

1.  最佳实践似乎是使用与 Apache 或类似 Web 服务器相同的用户/组。

    在 Debian 上，即 www-data:www-data

    但是，对于某些可能需要更高权限的应用程序，这可能会出现问题。例如，我一直在尝试使用 Node 编写类似于 Webmin 的东西，这需要 root 权限（或至少是 adm 组）才能完成许多任务。

2.  在 Debian 上，我使用 /var/nodejs（我将 /var/www 用于“普通”Web 应用程序，例如 PHP）

3.  我仍然不愿意使用 Node 的原因之一（除了令人震惊的缺乏高质量的文档）是在运行多个应用程序时需要分配多个 IP 端口。我认为对于任何规模合理的生产环境，您都可以使用虚拟服务器来划分节点服务器进程。

    Node 开发人员似乎经常忘记的一件事是，在许多企业环境中，IP 端口受到非常严格的控制。通过防火墙打开一个新端口是一项非常痛苦且耗时的任务。

    如果您使用反向代理，要记住的另一件事*是*，Web 应用程序在从代理后面运行时通常会失败 - 特别是在映射虚拟文件夹（例如`https://extdomain/folder`-> `http://localhost:1234`）时，您需要继续测试。

4.  我只是为我自己的系统运行一个 VPS。但是，对于生产应用程序，您需要了解要求。如果只是为了弹性和可扩展性，生产应用程序很可能需要多个服务器。

# c# - c#中的异步http请求

> ID：10629324
> 
> 赞同：2
> 
> 时间：2012-05-17T03:07:46.573
> 
> 标签：c#, http, asynchronous

所以我正在制作一个类似于网络爬虫的程序。它下载页面的 html 并使用正则表达式将其解析为特定文本，然后将其添加到列表中。

为此，我使用了异步 http 请求。GET请求是异步发送的，对返回的html进行解析操作。

我的问题，我不确定它是否简单，是程序运行不顺畅。它会发送一堆请求，暂停几秒钟，然后一次递增所有解析的项目（尽管计数器被编程为每次添加项目时递增一次），例如它从 53 跳转到 69 而不是显示, 54,55,56,...

很抱歉成为新手，但我自学了所有这些东西，一些经验丰富的建议会大有帮助。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T03:14:25.307

听起来是对的。

您任务中最慢的部分是通过网络下载页面。

您的程序开始一次下载一堆页面，等待它们到达，然后几乎立即解析它们。

# android - AdWhirl 在关闭网络后导致 java.lang.NullPointerException

> ID：10629329
> 
> 赞同：17
> 
> 时间：2012-05-17T03:08:31.787
> 
> 标签：android, nullpointerexception, admob, android-viewpager, adwhirl

我在我的一个应用程序中使用 AdWhirl 和 Admob，发布后，我们从 adwhirl 中得到很多错误，并且它很容易重现，如下所示：

广告出现后，我关闭wifi，等待广告超时，然后按返回按钮退出应用程序。

然后出现bug。src可以从[这里](https://github.com/notenking/AdWhirlException)下载。异常是这样的：

```
 05-17 11:00:13.265: E/AndroidRuntime(12482): java.lang.RuntimeException: Unable to destroy activity {me.test.admob/me.test.admob.AdWhirlTestActivity}: java.lang.NullPointerException
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3112)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3130)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.app.ActivityThread.access$1200(ActivityThread.java:123)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1180)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.os.Handler.dispatchMessage(Handler.java:99)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.os.Looper.loop(Looper.java:137)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.app.ActivityThread.main(ActivityThread.java:4424)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at java.lang.reflect.Method.invokeNative(Native Method)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at java.lang.reflect.Method.invoke(Method.java:511)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at dalvik.system.NativeStart.main(Native Method)
05-17 11:00:13.265: E/AndroidRuntime(12482): Caused by: java.lang.NullPointerException
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.webkit.WebView.requestFocus(WebView.java:7650)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.requestFocus(ViewGroup.java:2110)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.requestFocus(ViewGroup.java:2110)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.requestFocus(ViewGroup.java:2110)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.requestFocus(ViewGroup.java:2110)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.requestFocus(ViewGroup.java:2110)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.requestFocus(ViewGroup.java:2110)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.onRequestFocusInDescendants(ViewGroup.java:2154)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.requestFocus(ViewGroup.java:2113)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.View.requestFocus(View.java:5323)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewRootImpl.clearChildFocus(ViewRootImpl.java:2200)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.clearChildFocus(ViewGroup.java:669)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.clearChildFocus(ViewGroup.java:669)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.clearChildFocus(ViewGroup.java:669)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.clearChildFocus(ViewGroup.java:669)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.clearChildFocus(ViewGroup.java:669)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.removeViewInternal(ViewGroup.java:3591)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.removeViewInternal(ViewGroup.java:3561)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.view.ViewGroup.removeView(ViewGroup.java:3509)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:998)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1080)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:1062)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.support.v4.app.FragmentManagerImpl.dispatchDestroy(FragmentManager.java:1843)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.support.v4.app.FragmentActivity.onDestroy(FragmentActivity.java:314)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.app.Activity.performDestroy(Activity.java:4629)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.app.Instrumentation.callActivityOnDestroy(Instrumentation.java:1079)
05-17 11:00:13.265: E/AndroidRuntime(12482):    at android.app.ActivityThread.performDestroyActivity(ActivityThread.java:3099)
05-17 11:00:13.265: E/AndroidRuntime(12482):    ... 11 more 
```

经过我的测试，我发现只有在 ViewPager 中使用带有 ListFragment 的 adwhirl 时才会出现此异常。如果我只在 ListFragment 中使用或在 ViewPager 中使用 Fragment，它可以正常工作。但我仍然想知道出了什么问题，我该如何解决这个异常。

任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T22:23:23.193

1.  确保在 onDestory() 方法中处理 AdWhirl
2.  使用 try catch 来捕获 NullPointer，联系开发人员并希望他们能解决这个问题（如果它是一个错误）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-10T16:00:00.487

始终检查承载连接到服务的对象的内容

```
if(conection !=null){
execute();
} 
```

因为您使用 webView 总是在执行之前检查您的电话连接是否打开，这应该停止空指针

如果没有代码示例，很难给出更好的见解

但是您可以使用下面的连接管理器进行检查，这是如何检查 wifi 的示例

```
public boolean isOnWifi(Context context) {
    ConnectivityManager connManager = (ConnectivityManager) context
            .getSystemService(CONNECTIVITY_SERVICE);
    NetworkInfo mWifi = connManager
            .getNetworkInfo(ConnectivityManager.TYPE_WIFI);

    if (mWifi.isConnected()) {
        return true;
    }

    return false;
} 
```

要查看是否有蜂窝连接，只需将 ConnectivityManager.TYPE_WIFI 更改为 ConnectivityManager.TYPE_MOBILE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T20:50:35.523

查找 AdMob 或 AdWhirl 尝试每隔几秒或几分钟更改一次广告横幅的功能。发生此异常是因为该函数中没有异常处理程序。关闭 wifi 后，一些代码需要正常工作的互联网连接，但不再有连接。最好试试这个：

1.  转到每 x 秒/分钟更改一次广告横幅的功能。
2.  在那里你必须用异常处理程序包围代码，例如try/catch。并捕获 NullPointerException。

# box-api - v2 版几乎没有限制

> ID：10629330
> 
> 赞同：2
> 
> 时间：2012-05-17T03:08:42.973
> 
> 标签：box-api

确实有有限的 v2 端点。同时使用 2 个版本的 API 时切换齿轮很痛苦，尤其是因为每个版本返回不同的输出格式。想象一下，当您调用的一个 api 返回 xml 而您调用的另一个 api 返回 json 时编写代码 :)

您能否支持原始 api 的 json 输出，这将使生活变得更轻松，而且我不必记住哪些发送 xml 与 json？

此外，计划何时发布新的端点以共享功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:53:15.270

v2 API 处于测试阶段，因此将在一段时间内不断变化。我们正在根据开发人员的反馈和使用情况完成初始版本。除了其他共享功能，我们最终将发布 /collaborations 端点，但我们将首先优化当前可用的端点。

[根据文档](http://developers.box.com/docs/#api-basics)，您可以将“.xml”附加到 API 请求以返回 XML，如果您选择同时针对两者进行开发，这将使您更轻松地使用 v1。

# c++ - 如何在我的 Opensuse 中安装 qt 演示/示例？

> ID：10629331
> 
> 赞同：0
> 
> 时间：2012-05-17T03:08:47.923
> 
> 标签：c++, qt

我的 OpenSuse 中安装了 Qt creator。我想查看所有的 qt 演示和示例，但是 Qt Creator 说“未安装示例”。我在哪里可以找到示例和演示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:30:38.330

我希望你已经安装了 qt(libqtX-dev) 的开发包。您可以在以下位置找到示例和演示`/usr/lib/qt4`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:33:18.833

尝试安装`libqt4-devel-doc`软件包：

作为根：

```
zypper in libqt4-devel-doc 
```

该软件包提供的大部分文件位于`/usr/lib/qt4/demos`(x86) 和`/usr/lib64/qt4/demos`(x86_64) 中。安装后，您可以`qtdemo`从您最喜欢的终端仿真器（或从 ALT+F2 运行对话框）执行。

可能您还需要/想要这个`libqt4-devel-doc-data`包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-13T19:28:02.867

只是 Qt 版本 5 的更新：

作为根：

`zypper in libqt5-qtdoc`

将为您提供所有示例

# ajax - 有没有办法找到 ajax xmlhttprequest 的 id？

> ID：10629333
> 
> 赞同：1
> 
> 时间：2012-05-17T03:09:06.067
> 
> 标签：ajax, xmlhttprequest

我的一个页面有大约 5 个 jQuery AJAX 调用，一旦页面加载就会触发。我想单独跟踪每个 AJAX 调用并获取它的 ID。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:17:06.020

下载 Firefox 浏览器并安装 Firebug 扩展。这将让您跟踪每个请求的所有 XMLHTTP 请求信息（并帮助您解决许多其他调试问题）。

这是一个基本概述： http: [//getfirebug.com/network](http://getfirebug.com/network)

# javascript - 在 JavaScript 中分配链接和类

> ID：10629334
> 
> 赞同：1
> 
> 时间：2012-05-17T03:09:13.890
> 
> 标签：javascript, location, append, attr

我有一个英文和西班牙文的网站，在网站的每个页面中都有一个链接指向该特定页面的西班牙文版本，所以如果用户在“home.php”页面上，它看起来像这样：

```
<div id="language">
    <ul class="language">
        <li class="english"><a href="#" class="active" title="English"></a></li>
        <li class="divider"></li>
        <li class="spanish"><a href="inicio.php" class="notactive" title="Español"></a></li>
    </ul>
</div> 
```

我想做的是将`<a>`HTML 中标签中的 href 和 class 留空，并根据用户所在的页面分配一个 class 和 href URL `<a>`，例如，我可以添加语言 div 到外部文件，并使用 an`<include>`将其附加到每个页面。为此，我使用以下代码：

```
$('ul.menubar a').each(function(){
    if(location.href.match('home.php')){
        $('ul.language li.english a').addClass('active');
        $('ul.language li.english a').append(function() {
            $(this).attr('onclick', 'return false;');
        });
        $('ul.language li.spanish a').addClass('notactive');
        $('ul.language a[href!="home.php"]').append(function() {
            $(this).attr('href', 'inicio.php');
        });
    }
} 
```

问题是该网站的英文版在导航栏中有 4 个链接（home.php、services.php、aboutus.php、contact.php），而西班牙文版也是如此（带有相应的 URL 名称翻译） . 我认为必须重复该代码 8 次（每个链接 1 个，每种语言 4 个链接）会过多，实际上会添加更多代码，而不是简单地在 HTML 中添加类和 href url。使用 JS 的目的是为了简化事情。

所以我基本上想知道是否有人能想到一个更好的方法来做到这一点，那不需要那么多代码。如果我需要更改某些内容，我试图避免不得不编辑每个不同的页面。另外，我想知道这是否是实现我想要使用 JavaScript 的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:20:37.347

HTML 最适合管理内容。CSS 最适合呈现该内容，而 JavaScript 最适合确定该内容的行为方式。而不是尝试从 JavaScript 注入链接和控制 HTML；相反，将内容留在其所属的 HTML 中，并使用 JavaScript 定义一个或两个事件处理程序，以根据超链接本身的类值采取行动。

您的英语超链接已经有一个课程，西班牙语超链接上有一个单独的课程，因此您可以利用它来发挥自己的优势。

## **编写点击处理程序：**

由于切换“语言开关”很可能会导致设置布尔值，因此您可以使用两个点击处理程序来定位所有英语链接和所有西班牙语链接，然后根据该开关的值控制*行为*点击链接的时间。

```
// handler for all English links
$('li.english a').click(function(event) {
    event.preventDefault();
    if(/* Switch is english */) {
        window.location = $(this).attr("href");
    } 
});

// handler for all Spanish links
$('li.spanish a').click(function() {
    event.preventDefault();
    if(/* Switch is SPANISH */) {
        window.location = $(this).attr("href");
    } 
}); 
```

请注意，当单击链接时，我们首先检查开关。根据它的值，我们要么重定向到那个超链接，要么简单地阻止默认行为——进入新页面——完成。

## **处理演示文稿：**

现在，您的另一个问题是，假设您的西班牙语网站和英语网站是同一个网站，您现在将看到总共 8 个超链接。同样，这是您的开关可以派上用场的地方。

```
// single handedly hide or display the relevant content, based on the switch
function switchToEnglish() {
    $('.english').show();
    $('.spanish').hide();
}

function switchToSpanish() {
    $('.spanish').show();
    $('.english').hide();
} 
```

现在，我不知道你的 switch 函数中还包含什么，但这里的大意是我们不需要*修改*内容。我们只需要*显示*和*隐藏*内容。如果您还没有类似的东西，您需要将此概念集成到您现有的开关功能中。

**这种方法有几个优点：**

*   您的 Web 设计人员仍会在 HTML 中看到 href，并且可以阅读和理解 HTML，而无需您的帮助或查看 JavaScript 代码。他们不仅会看到他们习惯看到的熟悉模式，而且您可能会与他们建立更好的工作关系。

*   搜索您网站的搜索引擎将能够阅读链接并关注它们。

*   没有 JavaScript 的浏览器将能够处理这些链接。有些人似乎在乎这个。我不。但无论如何都值得一提。

总之，你说得对，它更容易在 HTML 中管理。通过使用这种技术，您可以消除代码中您理所当然地担心的重复，并将内容移回 HTML，因为您的直觉告诉您这样做是正确的。您的代码不仅更具可读性，而且您还将获得更好的 SEO 结果。

# c# - 如何保持不变性在两个对象之间具有相互依赖关系

> ID：10629336
> 
> 赞同：1
> 
> 时间：2012-05-17T03:09:20.437
> 
> 标签：c#, design-patterns

我在创建 2 个不可变对象时遇到问题，它们都相互依赖。问题：如何解决这种情况，保持这些对象不可变？

```
public class One
{
    private readonly Another another;
    public One(Another another)
    {
        this.another = another;
    }
}

public class Another
{
    private readonly One one;
    public Another(One one)
    {
        this.one = one;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:52:56.933

除非您至少允许对其中一个类进行依赖注入，否则不可能按照您的建议进行操作，如下所示：

```
public class One
{
    private readonly Another another;
    public One(Another another)
    {
        this.another = another;
    }
}

public class Another
{
    private readonly One one;
    public Another(One one)
    {
        this.one = one;
    }
    public Another() {}
    public setOne(One one)
    {
       this.one = one;
    }
} 
```

然后，您可能必须考虑在 Another.setOne() 中放置某种保护逻辑（异常？），以便 One 对象只能设置一次。

还要考虑到`Another`在没有初始化变量的情况下使用默认构造函数进行实例化时可能会遇到问题`one`，在这种情况下，您可能必须删除 readonly 属性并在 setOne() 中使用上述逻辑

**或者**

您可以创建`One`该类并在内部让它`Another`使用对`One`. 这可能会增加两者之间的耦合，但会做你需要的，如下所示：

```
public class One
{
    private readonly Another another;
    public One()
    {
        this.another = new Another(this);
    }
    public Another getAnother()
    {
        return this.another;
    }
}

public class Another
{
    private readonly One one;
    public Another(One one)
    {
        this.one = one;
    }
    public Another() {}
}

...

One one = new One();
Another another = one.getAnother(); 
```

# android - Android 应用内购买。我可以检索标题和描述吗？

> ID：10629340
> 
> 赞同：2
> 
> 时间：2012-05-17T03:10:18.710
> 
> 标签：android, in-app-purchase, in-app-billing

我在应用内购买方面遇到了一点麻烦。我的应用程序下载一个 JSON 文件以获取可用产品的 sku。这样我就不必在添加新产品时更新我的​​代码。因此，当用户进行购买时，它会将该 sku 发送到 Google Play。这样可行。问题是，如何从 Google Play 检索产品信息以向用户显示产品的标题和描述？我知道您可以从 Google Play 导出 CSV，但您必须登录才能执行此操作。肯定有更好的方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:16:02.723

自 2012 年底以来，Android 支持应用内计费版本 3。使用它，您可以简单地`getSkuDetails`使用一个或多个 SKU（您的标识符）运行，它会返回例如价格、标题和描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T08:08:45.530

您需要自己存储产品信息（例如名称、描述等），无论是在您的应用程序中还是在外部服务器上。

# javascript - 文字对象和 jquery 选择器 DRY

> ID：10629341
> 
> 赞同：2
> 
> 时间：2012-05-17T03:10:51.013
> 
> 标签：javascript, jquery

我有一个案例，我想这样做：

```
var els = {
    div: $('div'),
    p: els.div.find('p'),
    span: els.p.find('span')
}; 
```

但是会发生这种情况：

```
console.log(els.div); // Works
console.log(els.p); // undefined 
```

所以我目前正在这样做：

```
var els = (function(){
    var div = $('div'),
        p = div.find('p'),
        span = p.find('span');
    return {
        div: div,
        p: p,
        span: span       
    }
}());

console.log(els.p); // Works now 
```

有什么办法可以让它更干燥吗？似乎是一堆代码才能做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T03:17:29.330

您可以逐步构建它：

```
vars els = { div: $('div') };
els.p    = els.div.find('p');
els.span = els.p.find('span'); 
```

或者像这样：

```
vars els = { };
els.div  = $('div');
els.p    = els.div.find('p');
els.span = els.p.find('span'); 
```

如果它对你来说似乎更一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:52:24.650

为了更进一步，您可以使用[工厂模式](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#factorypatternjavascript)为您处理对象创建。

```
function getChildElements(container, childTags) {
    var elements = {};

    // Default tags to find if none were specified.
    childTags = childTags || [ "p", "span" ];

    // Loop through the childTags and find them in the container
    childTags.forEach(function (tag) {
        elements[tag] = container.find(tag);
    });

    return elements;
} 
```

客户端可以使用这个工厂方法从父元素中检索子元素，如下所示：

```
var els = getChildElements($("div")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:14:06.147

你应该能够做这样的事情，对吧？

```
var els = {
    div: $('div'),
    p: this.div.find('p'),
    span: this.p.find('span')
}; 
```

我使用`this`关键字而不是`els`在对象内部。

# unix - 无法使用独立的 SSH 客户端连接/可以使用 Java SSH 客户端从浏览器连接

> ID：10629342
> 
> 赞同：0
> 
> 时间：2012-05-17T03:10:53.937
> 
> 标签：unix, ubuntu, ssh, amazon-web-services

我无法连接 SSH 客户端

```
ssh -i ~ key.pem ubuntu or root@ipaddress The authenticity of host can't be established. RSA key fingerprint 
is fingerprint Are you sure you want to continue connecting (yes/no)? 
```

我能够通过 Java 连接到 IP 地址、pem 的位置和用户 ubuntu

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:15:42.083

那只是询问您是否要“信任”您正在连接的计算机。

当您第一次通过 SSH 连接到新服务器时，它总会出现。如果您将来得到它*并且您之前已经连接到那里*，那是您应该担心的时候。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:15:32.557

当 openssh 命令行实用程序无法识别您正在连接的计算机时，它*总是会向您发出警告。*这是出于安全考虑，因为如果远程主机是假冒的，您可能会被诱骗向其提供登录信息。

你确定没有人来抓你吗？如果是这样，请键入 yes 并按 Enter。下次连接时，它甚至不会询问，除非远程主机更改它的地址或公钥。

# iphone - MKMapRectIntersectsRect 抛出 EXC_BAD_ACCESS

> ID：10629343
> 
> 赞同：1
> 
> 时间：2012-05-17T03:10:57.627
> 
> 标签：iphone, objective-c, ios5, mapkit

这是由添加地图图钉/注释并*过于*频繁地释放它们引起的问题吗？

`0 obj_msgSend`我的线程跟踪显示：`1 MKMapRectIntersectsRect`这让我知道向地图添加图钉是问题所在。

我有一个表格视图，它指向一个包含地图的详细视图。似乎只有当我快速进入和退出我的详细视图（来自不同单元格的segues）时才会引发错误。我尝试更改发布注释的方式并将其从地图视图中删除，但无济于事。

**崩溃日志：**

```
Thread 0 Crashed:
0   libobjc.A.dylib                 0x37ab5f78 objc_msgSend + 16
1   MyProject                       0x000aa954 0xa2000 + 35156
2   UIKit                           0x33181c84 -[UIViewController view] + 160
3   UIKit                           0x3318e1e2 -[UIViewController contentScrollView] + 18
4   UIKit                           0x3318e052 -[UINavigationController _computeAndApplyScrollContentInsetDeltaForViewController:] + 30
5   UIKit                           0x3318df38 -[UINavigationController _layoutViewController:] + 28
6   UIKit                           0x3318d704 -[UINavigationController _startTransition:fromViewController:toViewController:] + 312
7   UIKit                           0x3318d4fc -[UINavigationController _startDeferredTransitionIfNeeded] + 244
8   UIKit                           0x33181af8 -[UINavigationController pushViewController:transition:forceImmediate:] + 800
9   UIKit                           0x331817ce -[UINavigationController pushViewController:animated:] + 30
10  UIKit                           0x331fa8fc -[UITableView _selectRowAtIndexPath:animated:scrollPosition:notifyDelegate:] + 880
11  UIKit                           0x33274620 -[UITableView _userSelectRowAtPendingSelectionIndexPath:] + 152
12  Foundation                      0x3522e92c __NSFireDelayedPerform + 408
13  CoreFoundation                  0x356e8a2c __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 8
14  CoreFoundation                  0x356e8692 __CFRunLoopDoTimer + 358
15  CoreFoundation                  0x356e7268 __CFRunLoopRun + 1200
16  CoreFoundation                  0x3566a49e CFRunLoopRunSpecific + 294
17  CoreFoundation                  0x3566a366 CFRunLoopRunInMode + 98
18  GraphicsServices                0x37306432 GSEventRunModal + 130
19  UIKit                           0x33176cce UIApplicationMain + 1074
20  MyProject                       0x000a3a46 0xa2000 + 6726
21  MyProject                       0x000a39f0 0xa2000 + 6640 
```

# ios - 如何终止与特定 peerID 的连接？

> ID：10629344
> 
> 赞同：0
> 
> 时间：2012-05-17T03:11:02.037
> 
> 标签：ios, gamekit, gksession

我`GKSession`在 PEERMODE 中使用与不同设备建立多个连接。

```
[I(denoted as Z) have 3 connections with A, B and C.]

   (All with same session ID)
      <-----> A
    Z <-----> B
      <-----> C 
```

但我无法弄清楚如何终止具有特定 peerID 的特定连接，如下所示：

```
 <-----> A
    Z <--x--> B    disconnect with B, but A & C remain connected
      <-----> C 
```

我已经阅读了`GKSession`Class 的参考并在网上进行了一些搜索，但没有找到任何有用的信息，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:25:27.957

你试过了吗

`- (void)disconnectPeerFromAllPeers:(NSString *)peerID`

peerID 为 B ？问候！

# ruby-on-rails - 保存站点范围变量的安全且执行方式

> ID：10629356
> 
> 赞同：0
> 
> 时间：2012-05-17T03:13:05.900
> 
> 标签：ruby-on-rails, variables, global

我正在构建一个rails应用程序，有一个站点范围的计数器变量（计数器），由不同的页面使用（读取和写入），基本上很多页面都会导致计数器增加，存储这个变量的多线程安全方式是什么所以 1）它是线程安全的，我可能有很多并发用户访问可能会读取和写入这个变量 2）高性能，我最初考虑将这个变量保存在 DB 中，但是想知道是否有更好的方法，因为它可以很高请求量，我不想让这个数据库查询成为我应用程序的瓶颈......

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:18:52.307

这取决于它是否必须完全准确。假设不是，您可以将其存储在[memcached](http://en.wikipedia.org/wiki/Memcached)中并偶尔同步到数据库。如果 memcached 崩溃，它会过期（如果配置正确，则不会发生），您必须关闭等，在启动时从数据库重新加载它。

您还可以查看[membase](http://en.wikipedia.org/wiki/Membase)。我没有尝试过，但为了简化，它是一个自动持久化到磁盘的分布式 memcached 服务器。

为了获得更好的性能和准确性，您可以查看分片方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:16:23.980

那么你需要持久性，所以你必须将它存储在数据库/会话/文件中，AFAIK。

# c# - C#/XNA - 根据频率播放生成的音调

> ID：10629357
> 
> 赞同：1
> 
> 时间：2012-05-17T03:13:11.147
> 
> 标签：c#, xna

我正在编写一个小应用程序，它几乎是一个音序器（8 位合成器）我有一个公式可以将音符转换为其相应的频率：

```
private float returnFrequency(Note note)
{
    return (float)(440 * Math.Pow(TwoToTheTwelfthRoot, (note.SemitonesFromC0 - 57)));
} 
```

基本上，我想做的是用这个频率播放一个生成的音调（正弦、方波、锯齿等），所以它可以通过扬声器听到。XNA 对此有任何支持吗？还是我必须使用额外的库？

我不想通过内容管道导入 80 多个不同频率的正弦波样本，这样我就可以播放不同频率的音调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T03:01:20.117

对于那些请求链接的人，以及未来可能需要它的人： [http ://www.david-gouveia.com/creating-a-basic-synth-in-xna-part-i/](http://www.david-gouveia.com/creating-a-basic-synth-in-xna-part-i/)

他首先介绍了动态声音实例，然后通过向您展示如何创建声音（允许一种“用键盘弹钢琴”类型的东西）进入另一个层次。

有趣的是，David Gouveia 有一个 StackExchange 帐户，所以如果我收到他的任何通知，或者有人认出他，我不会感到惊讶。

# git - 为网站开发寻找易于设置的版本控制

> ID：10629359
> 
> 赞同：3
> 
> 时间：2012-05-17T03:13:32.577
> 
> 标签：git, svn, version-control, netbeans, bazaar

我是一名独立的网页设计师/开发人员。我的大部分工作是构建基本的 Wordpress 网站，但我也使用 PHP 进行一些自定义开发。我有一个更大的客户，我为他们做很多持续的定制开发，因为他们一直在努力改进他们的网站。我是唯一在这个网站上工作的网络开发人员。最近我不得不想，我真的需要设置某种版本控制系统来在这个网站上工作，因为能够轻松找出发生了什么变化以及何时发生变化，以防万一出现任何问题，这一点很重要。站点并能够轻松回滚到以前的状态。该站点在 apache 服务器上运行。我有 shell 访问权限，但我在那个 unix/linux 命令行环境中不太舒服。我在本地 Windows PC 上进行开发并将其通过 FTP 传输到该站点。在开发新功能时，我有一个开发网站。我在处理它时将我的代码 FTP 到开发服务器，然后一旦我测试了我的代码并准备好让它上线，我将它 FTP 到实时站点。我正在寻找的是设置起来非常简单且不会给我现有流程增加太多开销的东西。我不是命令行类型的人，所以我想要一个不错的 gui。我做了一些研究，感觉有点不知所措，因为这不仅仅是选择版本控制系统的问题，还有如何为我的目的设置它。我不知道我是否应该在我的机器上拥有一个本地系统并继续使用 FTP 来更新网站，或者我是否应该将一些东西与服务器更集成。所以我' m after 不仅是为了选择一个合适的版本控制解决方案，而且是如何为我的场景设置它。即我需要一个进程以及一个版本控制系统。以点形式回顾我的需求：

*   版本控制的主要需求是让我可以轻松确定发生了什么变化以及何时发生变化
*   易于为我的环境设置（在 Windows PC 上开发、开发网站和 LAMP 服务器上的实时网站）。需要一个易于遵循的设置指南。
*   易于使用的图形用户界面

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:20:57.593

对于设计师或不想弄脏手的人，我推荐 Bazaar (http://bazaar.canonical.com/)，放下手。它易于使用，并且至少有一个良好的 GUI（称为 TortiseBZR）。它在 Windows 和 Linux 上同样适用，并且 (TortiseBZR) 甚至为 Window 的外壳添加了功能：为修改的文件和上下文菜单提供自定义图标。这是我尝试的第一个 VCS，它是为初学者设计的。

`git`很棒而且很有特色，但主要是命令行。 `svn`我要说的是，欢迎来到 20 世纪。它已经过时了，而且很难使用。 `hg`主要是像 git，但也许有更好的 gui？没试过用过，很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:50:38.677

根据您的要求和意见，我可以推荐以下内容：

1.  **版本控制**
    *   [VisualSVN Server](http://www.visualsvn.com/server/)（VCS服务器组件，可安装在PC上，免费）
    *   [TortoiseSVN](http://tortoisesvn.net/)（客户端 GUI 组件，也安装在您的 PC 上，免费）
2.  **开发环境（IDE）**
    *   [NetBeans](http://netbeans.org/)（功能丰富且快速的 IDE，支持多种编程语言，包括 HTML、JavaScript 和 PHP，它是免费和开源的）

NetBeans 具有对 的集成支持`Git`，`Mercurial`因此`Subversion`您基本上不必使用任何外部工具。除了使用 Subversion，您可以使用 Mercurial ( [TortoiseHG](http://tortoisehg.bitbucket.io/) )，但对于您的需要和习惯，我认为 Subversion 已经绰绰有余（而且使用起来更简单）。

NetBeans 中集成的另一个非常有用的功能是您可以自动将项目文件上传到指定的 Web 服务器，并且每个项目可以有多个“部署”配置（称为`Run configuration`）。您可以使用 (S)FTP 或让 NetBeans 简单地将您的项目文件复制到另一个文件夹（用于本地 Web 服务器）。

如果你想要更高级的 IDE，我可以全心推荐[JetBrains PHPStorm](http://www.jetbrains.com/phpstorm/)，它是一个商业产品，但在 IMO 中，它物超所值。

# c++ - CUFFT 1-D FFT 期间的奇怪崩溃

> ID：10629366
> 
> 赞同：0
> 
> 时间：2012-05-17T03:14:38.787
> 
> 标签：c++, c, memory-management, cuda, fft

我有这个代码，它每 1-2 次启动就会崩溃。我试过使用 malloc/cudaMallocHost/cudeMalloc 但没用。它认为这是由于手动 cufftComplex 初始化而发生的，但证明它是不可能的，因为没有数据我无法获得 fft。你能帮我消除这个崩溃吗？

```
#include <stdio.h>
#include <string.h>
#include <iostream>
#include <fstream>
#include <conio.h>
#include <cuda.h>
#include <cufft.h>

using namespace std;

int main(int argc, char **argv)
{
cufftHandle plan;
cufftComplex *data;
cufftComplex *digits;
cufftComplex *h_data;

cudaMallocHost((void**)&digits, sizeof(cufftComplex)*8);
digits[0].x = 12.5f; digits[0].y = 0.0f;
digits[1].x = 66.23f; digits[1].y = 0.0f;
digits[2].x = 35.1f; digits[2].y = 0.0f;
digits[3].x = 16.7f; digits[3].y = 0.0f;
digits[4].x = 14.83f; digits[4].y = 0.0f;
digits[5].x = 55.1f; digits[5].y = 0.0f;
digits[6].x = 11.7f; digits[6].y = 0.0f;
digits[7].x = 18.83f; digits[7].y = 0.0f;

cudaMalloc((void**)&data, sizeof(cufftComplex)*8);

cudaMemcpy(data, digits, sizeof(cufftComplex)*8, cudaMemcpyHostToDevice);

if (cufftPlan1d(&plan, 8, CUFFT_C2C, 1) != CUFFT_SUCCESS) {
    fprintf(stderr, "Cuda: cufftPlan1d CUFFT_C2C failed\n");
    return 1;
}

if (cufftExecC2C(plan, data, data, CUFFT_FORWARD) != CUFFT_SUCCESS) {
    fprintf(stderr, "Cuda: cufftExecC2C CUFFT_FORWARD failed\n");
    return 1;
}

if (cudaMalloc((void**)&h_data, sizeof(cufftComplex)*8) != cudaSuccess) {
    fprintf(stderr, "Cuda: cudaMalloc((void**)&h_data failed\n");
    return 1;
}

cudaMemcpy(h_data, data, sizeof(cufftComplex)*8, cudaMemcpyDeviceToHost);

printf("\nOriginal:\n");
for(int i = 0; i < 8; ++i){
    printf("\nRe:%2.5f   Im:%2.5f", digits[i].x, digits[i].y);
} 

printf("\n\n1D-FFT:\n");
for(int i = 0; i < 8; ++i){
    printf("\nRe:%2.5f   Im:%2.5f", h_data[i].x, h_data[i].y);
} 

cudaFree(digits);
cudaFree(data);
cudaFree(h_data);
cufftDestroy(plan);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:44:29.287

您的基本问题是主机和设备内存指针的不正确混合。您已将设备内存分配的地址（使用 cudaMalloc）分配给`h_data`，但正试图将其用作指向主机内存中地址的指针。这不起作用，并且正在产生您所看到的主机分段错误。您的示例应类似于：

```
#include <cstdlib>
#include <cuda_runtime.h>
#include <cufft.h>

int main(int argc, char **argv)
{
    cufftHandle plan;
    cufftComplex *data, *digits, *h_data;

    digits = (cufftComplex *)malloc(sizeof(cufftComplex)*8);
    digits[0].x = 12.5f; digits[0].y = 0.0f;
    digits[1].x = 66.23f; digits[1].y = 0.0f;
    digits[2].x = 35.1f; digits[2].y = 0.0f;
    digits[3].x = 16.7f; digits[3].y = 0.0f;
    digits[4].x = 14.83f; digits[4].y = 0.0f;
    digits[5].x = 55.1f; digits[5].y = 0.0f;
    digits[6].x = 11.7f; digits[6].y = 0.0f;
    digits[7].x = 18.83f; digits[7].y = 0.0f;

    cudaMalloc((void**)&data, sizeof(cufftComplex)*8);
    cudaMemcpy(data, digits, sizeof(cufftComplex)*8, cudaMemcpyHostToDevice);

    if (cufftPlan1d(&plan, 8, CUFFT_C2C, 1) != CUFFT_SUCCESS) {
        fprintf(stderr, "Cuda: cufftPlan1d CUFFT_C2C failed\n");
        return 1;
    }

    if (cufftExecC2C(plan, data, data, CUFFT_FORWARD) != CUFFT_SUCCESS) {
        fprintf(stderr, "Cuda: cufftExecC2C CUFFT_FORWARD failed\n");
        return 1;
    }

    h_data = (cufftComplex *)malloc(sizeof(cufftComplex)*8);
    cudaMemcpy(h_data, data, sizeof(cufftComplex)*8, cudaMemcpyDeviceToHost);

    printf("\nOriginal:\n");
    for(int i = 0; i < 8; ++i){
        printf("\nRe:%2.5f   Im:%2.5f", digits[i].x, digits[i].y);
    } 

    printf("\n\n1D-FFT:\n");
    for(int i = 0; i < 8; ++i){
        printf("\nRe:%2.5f   Im:%2.5f", h_data[i].x, h_data[i].y);
    } 

    free(digits);
    free(h_data);
    cudaFree(data);
    cufftDestroy(plan);
} 
```

请注意，您应该使用 plain`malloc`或 C++`new`运算符来分配主机端内存，而不是`cudaMallocHost`，除非您非常了解后者 API 的作用以及使用它的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:46:10.283

代替：

```
if (cudaMalloc((void**)&h_data, sizeof(cufftComplex)*8) != cudaSuccess) {
    fprintf(stderr, "Cuda: cudaMalloc((void**)&h_data failed\n");
    return 1;
} 
```

尝试：

```
if (cudaMallocHost((void**)&h_data, sizeof(cufftComplex)*8) != cudaSuccess) {
    fprintf(stderr, "Cuda: cudaMalloc((void**)&h_data failed\n");
    return 1;
} 
```

因为您正在将字节复制回cpu。

该文档提供了有关`cudaMallocHost`vs`malloc`用法的提示：

> **cudaError_t cudaMallocHost ( void ** ptr, size_t size )**
> 
> *分配页面锁定且设备可访问的主机内存的 size 字节。驱动程序跟踪使用此函数分配的虚拟内存范围，并自动加速对 cudaMemcpy*() 等函数的调用。由于内存可以被设备直接访问，它可以以比使用 malloc() 等函数获得的可分页内存更高的带宽进行读取或写入。使用 cudaMallocHost() 分配过多的内存可能会降低系统性能，因为它会减少系统可用于分页的内存量。因此，最好谨慎使用此功能来分配暂存区域以用于主机和设备之间的数据交换。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:13:45.980

If you are on Linux, try running running your app under the CUDA debugger, with memory checking turned on:

```
nvcc –g –G myapp.cu –o myapp
cuda-gdb myapp
(cuda-gdb) set cuda memcheck on 
(cuda-gdb) run 
```

If you are on Windows, select `Nsight | Enable CUDA Memory Checker` and run your code from the built-in CUDA debugger. `Nsight | Start CUDA Debugging`.

Also, add code to your app to check the return values from each of the CUDA calls.

See for more information about the CUDA Memchecker:

[http://developer.nvidia.com/nvidia-gpu-computing-documentation#CUDA-MemcheckUserManual](http://developer.nvidia.com/nvidia-gpu-computing-documentation#CUDA-MemcheckUserManual)

# c++ - 如何用 c++ 计算 ms word 97-2003 doc 文件的字数？

> ID：10629368
> 
> 赞同：-1
> 
> 时间：2012-05-17T03:14:52.980
> 
> 标签：c++, com, ms-word, word-count

我刚刚学了一点COM，我知道VBA编程是基于MS提供的COM组件。但我现在不知道如何用 c++ 编程 office，因为我不知道如何为我的 c++ 程序导入类型库或其他东西。这是我的代码来计算一个doc文件的单词，但是失败了，你能帮我纠正一下吗，谢谢。

```
#include <objbase.h>
#include <stdio.h>
#include <assert.h>
#include <atlbase.h>
#include <atlconv.h>
#pragma comment(lib, "ole32.lib")
//0002095C-0000-0000-C000-000000000046

IID IID_Words = { 0x0002095C, 0x0000, 0x0000, {0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x46} }
//#import "msword.olb" how???
IDispatch* GetWordsInterface(LPCWSTR wszFileName);

int main()
{
    IDispatch *pDisp = NULL;
    LPOLESTR pwszFuncName = L"Count";
    DISPID dispID;
    HRESULT hr;

    pDisp = GetWordsInterface(L"D:\\test.doc");
    assert( pDisp != NULL );

    hr = pDisp->GetIDsOfNames( IID_NULL, &pwszFuncName, 1, LOCALE_SYSTEM_DEFAULT, &dispID );
    assert( hr == S_OK );

    VARIANT result;
    hr = pDisp->Invoke(
            dispID, IID_NULL, LOCALE_SYSTEM_DEFAULT, DISPATCH_PROPERTYGET,
            NULL, &result, NULL, NULL);
    assert( hr == S_OK );

    printf("the count of words is %ld \n", result.dblVal);

    return 0;
}

IDispatch* GetWordsInterface(LPCWSTR pwszFileName)
{
    HRESULT hr = S_FALSE;
    IBindCtx *pbc = NULL;
    IMoniker *pMk = NULL;
    LPWSTR strClsid = NULL;
    LPWSTR strDisplayName = NULL;
    IUnknown *pUnk = NULL;
    IDispatch *pWords = NULL;
    CLSID clsid;

    hr = CoInitialize(NULL);
    assert( hr == S_OK );

    hr = CreateBindCtx( 0, &pbc );
    assert( pbc != NULL &&  hr == S_OK );

    hr = CreateFileMoniker(pwszFileName, &pMk);
    assert( hr == S_OK && pMk != NULL );

    hr = pMk->GetClassID(&clsid);
    assert( hr == S_OK );
    StringFromCLSID(clsid, &strClsid);
    wprintf(L"CLSID : %s\n", strClsid);
    CoTaskMemFree(strClsid);

    hr = pMk->GetDisplayName(pbc, NULL, &strDisplayName);
    assert( hr == S_OK && strDisplayName != NULL );
    CW2A ascii(strDisplayName);
    printf("Display Name : %s\n", ascii);
    //wprintf(L"Display Name : %s\n", strDisplayName);
    CoTaskMemFree(strDisplayName);

    hr = pMk->BindToObject(pbc, NULL, IID_IUnknown, (void**)&pUnk);
    assert( hr == S_OK && pUnk != NULL );

    hr = pUnk->QueryInterface(IID_Words, (void**)&pWords); // FAILED HERE
    assert( hr == S_OK && pWords != NULL );

    pUnk->Release();
    pMk->Release();
    return pWords;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:27:25.577

这是正确的版本，原始版本失败是因为 Document 对象不支持 Words 接口，但我设法通过 Document._Document(interface) Words(property) 获取 Words 接口指针。

```
// excelmoniker.cpp : 
//
#include "stdafx.h"

//0002095C-0000-0000-C000-000000000046
IID IID_Words = { 0x0002095C, 0x0000, 0x0000, {0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x46} };
//_DocumentInterface
IID IID_innerDocument = { 0x0002096B, 0x0000, 0x0000, {0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x46} };
IDispatch* GetWordsInterface(LPCWSTR wszFileName);
IDispatch* SubGetWordsInterface(IDispatch *pDoc);

int _tmain(int argc, _TCHAR* argv[])
{
    IDispatch *pWords = NULL;
    LPOLESTR pwszFuncName = L"Count";
    DISPID dispID;
    HRESULT hr;
    DISPPARAMS dispParams = { NULL, NULL, 0, 0 };
    VARIANT result;

    hr = CoInitialize(NULL);
    assert( hr == S_OK );

    pWords = GetWordsInterface(L"D:\\test.doc");
    assert( pWords != NULL );

    hr = pWords->GetIDsOfNames( IID_NULL, &pwszFuncName, 1, LOCALE_SYSTEM_DEFAULT, &dispID );
    assert( hr == S_OK );

    hr = pWords->Invoke(
        dispID, IID_NULL, LOCALE_SYSTEM_DEFAULT, DISPATCH_PROPERTYGET,
        &dispParams, &result, NULL, NULL);
    assert( hr == S_OK );

    printf("the count of words is %ld \n", result.dblVal);

    assert( pWords->Release() == 0 );

    CoUninitialize();
    return 0;
}

IDispatch* GetWordsInterface(LPCWSTR pwszFileName)
{
    HRESULT hr = S_FALSE;
    IBindCtx *pbc = NULL;
    IMoniker *pMk = NULL;
    LPWSTR strClsid = NULL;
    LPWSTR strDisplayName = NULL;
    IDispatch *pDoc = NULL;
    IDispatch *pWords = NULL;
    CLSID clsid;

    hr = CreateBindCtx( 0, &pbc );
    assert( pbc != NULL &&  hr == S_OK );

    //Test for the clsid for the doc
    hr = GetClassFile(pwszFileName, &clsid);
    assert( hr == S_OK );
    StringFromCLSID(clsid, &strClsid);
    wprintf(L"associated file CLSID : %s\n", strClsid);
    CoTaskMemFree(strClsid);

    hr = CreateFileMoniker(pwszFileName, &pMk);
    assert( hr == S_OK && pMk != NULL );

    hr = pMk->GetClassID(&clsid);
    assert( hr == S_OK );
    StringFromCLSID(clsid, &strClsid);
    wprintf(L"CLSID : %s\n", strClsid);
    CoTaskMemFree(strClsid);

    hr = pMk->GetDisplayName(pbc, NULL, &strDisplayName);
    assert( hr == S_OK && strDisplayName != NULL );
    CW2A ascii(strDisplayName);
    printf("Display Name : %s\n", ascii);
    //wprintf(L"Display Name : %s\n", strDisplayName);
    CoTaskMemFree(strDisplayName);

    //Get _Document Interface pointer
    hr = pMk->BindToObject(pbc, NULL, IID_innerDocument, (void**)&pDoc);
    assert( hr == S_OK && pDoc != NULL );

    //Get _Words interface pointer
    pWords = SubGetWordsInterface(pDoc);

    assert( pMk->Release() == 0 );
    assert( pDoc->Release() == 0 );
    assert( pbc->Release() == 0 );

    return pWords;
}

IDispatch* SubGetWordsInterface(IDispatch* pDoc)
{
    LPOLESTR pwszFuncName = L"Words";
    DISPID dispID;
    HRESULT hr;
    DISPPARAMS dispParams = { NULL, NULL, 0, 0 };
    VARIANT result;

    memset(&result, 0, sizeof(VARIANT));

    hr = pDoc->GetIDsOfNames( IID_NULL, &pwszFuncName, 1, LOCALE_SYSTEM_DEFAULT, &dispID );
    assert( hr == S_OK );

    hr = pDoc->Invoke( dispID, IID_NULL, LOCALE_SYSTEM_DEFAULT, DISPATCH_PROPERTYGET, &dispParams, &result, NULL, NULL);
    assert( hr == S_OK && result.vt == VT_DISPATCH && result.ppdispVal != NULL );

    return (IDispatch*)result.ppdispVal;
} 
```

# css - 文本居中跨浏览器问题

> ID：10629370
> 
> 赞同：-1
> 
> 时间：2012-05-17T03:15:02.963
> 
> 标签：css, cross-browser, positioning

我看不到什么会控制文本在不同计算机上偏移，如下所示。一个正确地位于蓝色区域的中心，另一个似乎以某种方式偏移。它发生在文本字段和按钮中。直播网站：[http ://www.muuzik.me:8000](http://www.muuzik.me:8000)

![在此处输入图像描述](../Images/7b85426ff57ef605389f549ea851e6f1.png)

![在此处输入图像描述](../Images/c523726b3659de7977b755146c71d77c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:28:58.027

关键是调整该元素周围的填充。目前，顶部有 18px 的内边距，底部有 4px 的内边距。这不平衡，因此文本不会垂直居中。要使其水平居中，请确保左右填充相同；要使其垂直居中，请确保顶部和底部填充相同。

您可以使用速记声明来创建此效果可能会有所帮助： `padding: 10px 20px;`将顶部和底部设置为 10 像素，将左侧和右侧设置为 20 像素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:41:01.313

我认为这是填充设置。看到绿色区域了吗？那些是填充物。您当前的填充是

```
 padding-top:14px; 
 padding-right:18px 
 padding-bottoem:4px;
 padding-left:18px; 
```

这就是为什么文本不在中心显示的原因；您可以尝试将填充设置为

```
 padding: 12px; 
```

我试过了，它适用于 Chrome 和 Firefox

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:19:16.130

您应该显示整个 CSS，但您是否尝试设置`text-align: center;`和`line-height: 46px`按钮？

# sql - Microsoft SQL 四舍五入为整数，需要保留 1 位小数

> ID：10629376
> 
> 赞同：0
> 
> 时间：2012-05-17T03:15:44.027
> 
> 标签：sql, database, sql-server-2008

> **可能重复：**
> [在 SQL Server 中截断（不是四舍五入）小数位](https://stackoverflow.com/questions/44046/truncate-not-round-decimal-places-in-sql-server)

想不通这个。当 SQL 舍入为整数时，我需要返回 1 个小数位。

我读到整数除以整数在 SQL 中给出整数，但我需要一个截断的小数位作为临时表中的输出值。

我不介意 35.0 是否以 35 的形式返回，但 35.17 应该以 35.1 的形式返回。抱歉刚刚编辑。需要截断最后一个数字，而不是四舍五入。

```
create table #blah(output decimal(9,1))

DECLARE @a money
DECLARE @b money
DECLARE @intinterval decimal(9,1) 

SET @a = 5
SET @b = 2
SET @intinterval = (@b / 1000.0) * (86400.0 / @a)

INSERT INTO #blah (output) VALUES (@intinterval)

SELECT * from #blah

drop table #blah 
```

上面的等式应该给出 (2 / 1000) * (86400 / 5) = (0.002 * 17280) = 34.56

34.56 应截断为 34.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:52:28.003

```
SET @intinterval = cast(10 * (@b / 1000.0) * (86400.0 / @a) as int) / 10.0 
```

或者

```
SET @intinterval = cast(@b * 864.0 / @a as int) / 10.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:10:15.213

怎么样`Round((@b / 1000.0) * (86400.0 / @a), 1, 1)`，最后 1 句话是截断而不是舍入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:43:47.303

试试这个没有特殊功能...

如果
a = 5 则输出 = 34.5 (34.56)
a = 7 输出 = 24.6 (24.69)
a = 11 输出 = 15.7 (15.71)

```
create table #blah(output decimal(9,1))
DECLARE @a money
DECLARE @b money
DECLARE @intinterval decimal(9,2) 
declare @rounded decimal(9,1)    
declare @diff decimal(9,2)
declare @finalvalue decimal(9,1)
SET @a = 5
SET @b = 2
SET @intinterval = (@b / 1000.0) * (86400.0 / @a) 
set @rounded  = @intinterval    -- gets the rounded value
set @diff = @intinterval - @rounded  -- gets the difference whether to round off or not
if @diff >= 0           -- if differnce is >= 0 then get the rounded value  .. eg.   34.31 = 34.3
   set @finalvalue = @rounded 
else                     -- else  subtract 0.1 and get the rounded value  e.g.  34.56 - 0.1 = 34.46 -> rounded value of 34.5
   set @finalvalue = @intinterval - 0.1   
INSERT INTO #blah (output) VALUES (@finalvalue )
SELECT * from #blah
drop table #blah 
```

# c# - Task.ContinueWith 方法需要任务参数吗？

> ID：10629379
> 
> 赞同：10
> 
> 时间：2012-05-17T03:17:14.487
> 
> 标签：c#, task-parallel-library, multitasking

我有一个有两种方法的类，Load() 和 Process()。我希望能够将这些作为后台任务单独运行，或者按顺序运行。我喜欢 ContinueWith() 语法，但我无法让它工作。我必须在继续使用的方法上使用 Task 参数，并且不能在初始方法上使用 Task 参数。

我想在没有 lambda 表达式的情况下执行此操作，但我是坚持使用它们，在其中一个方法上强制使用任务参数，还是创建第三种方法 LoadAndProcess()？

```
void Run()
{
    // doesn't work, but I'd like to do it
    //Task.Factory.StartNew(MethodNoArguments).ContinueWith(MethodNoArguments);

    Console.WriteLine("ContinueWith");
    Task.Factory.StartNew(MethodNoArguments).ContinueWith(MethodWithTaskArgument).Wait();

    Console.WriteLine("Lambda");
    Task.Factory.StartNew(() => { MethodNoArguments(); MethodNoArguments(); }).Wait();

    Console.WriteLine("ContinueWith Lambda");
    Task.Factory.StartNew(MethodNoArguments).ContinueWith(x => { 
            MethodNoArguments(); 
        }).Wait();
}

void MethodNoArguments()
{
    Console.WriteLine("MethodNoArguments()");
}

void MethodWithTaskArgument(Task t = null)
{
    Console.WriteLine("MethodWithTaskArgument()");
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-17T10:02:12.770

在 的所有重载中[`ContinueWith()`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.continuewith.aspx)，第一个参数是一个接受 a 的委托`Task`，因此您不能将无参数委托传递给它。

我认为使用 lambdas 非常好，并且不会损害可读性。而且您的代码中的 lambda 是不必要的冗长：

```
Task.Factory.StartNew(MethodNoArguments).ContinueWith(_ => MethodNoArguments()) 
```

或者，正如 Cory Carson 在评论中指出的那样，您可以编写一个扩展方法：

```
public static Task ContinueWith(this Task task, Action action)
{
    return task.ContinueWith(_ => action());
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T11:29:33.150

当您使用多个延续时编写干净的代码并不容易，尽管您可以遵循一些规则来使代码更干净：

1.  使用 svick 答案中的较短形式
2.  避免链接延续。将每个延续的结果存储在单独的变量中，然后在单独的行中调用 ContinueWith
3.  如果继续代码很长，请将其存储在 lambda 变量中，然后使用 lambda 继续。
4.  [使用像“ Then](http://blogs.msdn.com/b/pfxteam/archive/2010/11/21/10094564.aspx) ”这样的扩展方法可以让你的代码更加简洁。

你可以把你的代码改成这样，这样更简洁：

```
 var call1=Task.Factory.StartNew(()=>MethodNoArguments());
        var call2 = call1.ContinueWith(_ => MethodNoArguments());
        call2.Wait(); 
```

甚至

```
 var call1 = Task.Factory.StartNew<Task>(MethodNoArguments);
        var call2 = call1.Then(MethodNoArguments);
        call2.Wait(); 
```

[Stephen Toub 在使用任务处理异步操作序列中](http://blogs.msdn.com/b/pfxteam/archive/2010/11/21/10094564.aspx)讨论了 Then 扩展和其他可以清理代码的方法

这个问题在 C# 4 中得到了很好的解决。在 C# 5 中，您可以使用 async/await 关键字创建看起来像原始同步版本的干净代码，例如：

```
 static async Task Run()
    {
        await MethodNoArguments();
        await MethodNoArguments();
    }

    static async Task MethodNoArguments()
    {
        await Task.Run(()=>Console.WriteLine("MethodNoArguments()"));
    } 
```

Visual Studio 11 和 .NET 4.5 具有 Go Live 许可证，因此您可以立即开始使用它们。

您可以使用 C# 4 中的 Async CTP 来实现相同的结果。您可以在生产中使用 Async CTP，因为它具有上线许可证。不利的一面是，由于 CTP 和 .NET 4.5 之间的差异（例如，CTP 具有 TaskEx.Run 而不是 Task.Run），当您迁移到 .NET 4.5 时，您必须对代码进行一些小的更改。

# c++ - 使用邻接矩阵的深度优先搜索

> ID：10629385
> 
> 赞同：2
> 
> 时间：2012-05-17T03:18:12.040
> 
> 标签：c++, adjacency-matrix

我正在完成一个课堂实验室，它采用邻接矩阵，并确定顶点之间的连通性。虽然我的代码运行，但它没有给出正确的结果。

我相信我的 while 循环中的第二个 if 语句存在问题。任何帮助是极大的赞赏。代码如下：

```
#include "graph.h"
#include <assert.h>

using namespace std;

bool Graph::connected(int v,int w) {

    int visited[SIZE] ={0};

    if (v == w)         
        return adj_matrix[v][v];

    Queue<int> Q;      
    Q.Enqueue(v);      

    while (!Q.empty()) {
        int curr = Q.Dequeue();

        if (curr == w)
            return true;

        int z=0;         
        for (int i=0; i<SIZE; i++) {      
            if (adj_matrix[curr][z]==1 && visited[i]==false) {
                Q.Enqueue(z);
                visited[i]==true;
            }   
        }
    }
    return false;  
} 
```

这是我收到的输出：

```
0 0 1 0 
0 0 0 0 
0 0 0 0 
0 0 0 1 
vertex 0 is connected to vertices: 
vertex 1 is connected to vertices: 
vertex 2 is connected to vertices: 
vertex 3 is connected to vertices: 3 
```

哪个明显缺少 0 和 2 之间的另一个连接是正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:30:53.273

仔细看看你对变量 i 和 z 的使用。似乎 z 被赋值为 0，之后就再也没有改变过。您可能想尝试使用更具描述性的变量名称来避免这种混淆。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:55:14.677

另请参阅：

Q.入队（z）；访问[i]==真；（它有两个“=”）是错误的。

将其更改为

Q.入队（z）；访问[i]=真；

并完全移除 z 并仅使用 i。

嘿还有一点：你想实现“深度优先”，那你为什么使用队列。深度优先使用堆栈。请再次检查你想要实现的内容。虽然对于连接性，两者都可以使用。

# javascript - 在点击事件时从 Google Fusion Tables 访问单个单元格值

> ID：10629386
> 
> 赞同：4
> 
> 时间：2012-05-17T03:18:24.417
> 
> 标签：javascript, google-maps-api-3, dom-events, google-fusion-tables

我正在使用 Google Fusion Tables 制作地图，以显示我所在大学的人们发表的有关全球健康的学术期刊文章的数量。目前，当您单击一个国家/多边形时，会出现一个弹出气泡，其中国家名称和关于每个国家发表的论文数量以样式显示在 Fusion Table 中。

我想要做的是在单击一个国家/地区时更新侧边栏，其中包含指向相应文章摘要的链接。例如，当您单击法国时，边栏中会出现 12 个作者姓名和文章标题（带有链接）。

我希望有一种方法可以在单击一个国家/地区时从融合表中获取该国家/地区的名称。获得国家名称后，我希望调用一个函数来换出侧边栏中的文本并将其替换为正确的信息。我希望将这些函数存储在一个单独的 javascript 文件中，并从 html 文件中调用它们。

我已阅读参考信息，但无法找到如何从单击的相应多边形中存储单元格值。

Javascript 文件现在只是一个模型，但理想情况下，这是存储数据以填充侧边栏的位置。

我是否清楚我想要达到的目标？我试图澄清并提供详细信息。

由于我是新成员，Stack Overflow 只允许我粘贴 2 个链接。这是地图和融合表：

地图：[https ://mywebspace.wisc.edu/csterling/web/practice%202.html](https://mywebspace.wisc.edu/csterling/web/practice%202.html)

融合表：[https ://www.google.com/fusiontables/DataSource?snapid=S501306uxNU](https://www.google.com/fusiontables/DataSource?snapid=S501306uxNU)

我想引用的 Javascript 文件将包含如下所示的函数：

```
function argentina() {
    document.getElementById("textDescription").innerHTML = "Articles Published: Curing diseases with indigenous knowledge by John So-and-so, etc";
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:59:18.137

这是我为解决问题所做的，非常感谢 Chris K. 的帮助！

```
google.maps.event.addListener(layer,'click',function(e) {
    var countryName = e.row['SOVEREIGNT'].value;
    if (countryName == 'Argentina'){
        argentina();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:26:16.863

我看到了 wisc.edu 网址，所以我想从麦迪逊打个招呼……

您需要在融合表层上使用[单击事件](https://developers.google.com/maps/documentation/javascript/events#EventListeners)，该事件将查询表并将数据写入页面元素。

这里有几个不同的片段，您可以模仿它们来获取单击的行中单元格的值。每个人将实现基本相同的事情。

```
//click listener on layer using jquery
google.maps.event.addListener(layer, 'click', function(e) {
    $("#dem-votes").html(
        '<p><strong>Percent:</strong> ' + e.row['Dem County Percent'].value +
        '<br><strong>Votes:</strong> ' + e.row['Dem County Votes'].value +
        '<br><strong>Vote Margin: </strong>' + e.row['Dem County Margin'].value + '</p>');
});

//click listener on layer using js
google.maps.event.addListener(layer, 'click', function(e) {
    document.getElementById('dem-votes').innerHTML =
        '<p><strong>Percent:</strong> ' + e.row['Dem County Percent'].value +
        '<br><strong>Votes:</strong> ' + e.row['Dem County Votes'].value +
        '<br><strong>Vote Margin: </strong>' + e.row['Dem County Margin'].value + '</p>';
}); 
```

键基本上是 e.row['Dem County Percent'].value，它是给定列的值 - 在本例中是 Dem County Percent - 在单击的行中。

我使用最后一个示例[制作了您的地图。](http://jsfiddle.net/chrislkeller/tEQCv/)似乎工作...

克里斯·K。

# java - 使用java代码从互联网下载图片的问题

> ID：10629387
> 
> 赞同：0
> 
> 时间：2012-05-17T03:18:33.270
> 
> 标签：java, download

以下代码不起作用：

```
import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class DownloadFile extends Thread {

    URL url;
    long startPos;
    long endPos;
    int length;
    public static ExecutorService pool = Executors.newCachedThreadPool();

    public DownloadFile(URL url, long startPos, long endPos, int length) {
        this.url = url;
        this.startPos = startPos;
        this.endPos = endPos;
        this.length = length;
    }

    public static void main(String[] args) {
        try {
            download(new URL(
                    "http://hiphotos.baidu.com/dazhu1115/pic/item/fb8eccffa223a373d6887dfc.jpg"));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void download(URL url) throws IOException {
        String fileName = url.getFile();
        final long size = 8096;
        if (fileName.equals("")) {
            throw new IOException("download webfile \"" + fileName
                    + "\" failed");
        }
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        long total = con.getContentLength();
        System.out.println("file size is " + total);
        con.disconnect();
        if (total <= size) {
            // con = (HttpURLConnection) url.openConnection();
            // con.connect();
            // in = con.getInputStream();
            // return download(fileName, in);
            // con.disconnect();
        } else {
            long part = total % size != 0 ? total / size + 1 : total / size;
            long len;
            byte[] b = null;
            for (int i = 0; i < part; i++) {
                len = i != part - 1 ? size : total % size;
                DownloadFile dl = new DownloadFile(url, size * i, size
                        * (i + 1), (int) len);
                pool.execute(dl);
            }
        }
    }

    public void run() {
        byte[] b = new byte[length];
        HttpURLConnection con;
        try {
            con = (HttpURLConnection) url.openConnection();
            con.setAllowUserInteraction(true);
            con.setReadTimeout(30000);
            con.setRequestProperty("RANGE", "bytes=" + startPos + "-" + endPos);
            // con.setRequestProperty("GET", fileName + " HTTP/1.1");
            // con.setRequestProperty("Accept","image/gif,image/x-xbitmap,application/msword");
            // con.setRequestProperty("Connection", "Keep-Alive");
            con.connect();
            /*
             * in = con.getInputStream(); DataInputStream dis = new
             * DataInputStream(in);
             */
            BufferedInputStream bis = new BufferedInputStream(
                    con.getInputStream());
            int wlen = bis.read(b, 0, length);
            RandomAccessFile oSavedFile = new RandomAccessFile("D:/bbb.jpg",
                    "rw");
            oSavedFile.seek(startPos);
            oSavedFile.write(b, 0, wlen);
            // con.disconnect();
            bis.close();
            oSavedFile.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

下载的图片大小正确，但无法正常查看该图片的图片。我不知道诀窍在哪里。以下是我下载的图片 ![在此处输入图像描述](../Images/ad82e56caea1cbfed2ed7ec2d0027365.png)

**问题已解决，将我的代码更改为**：

```
package com.tom.labs;

import java.io.BufferedInputStream;
import java.io.IOException;
import java.io.RandomAccessFile;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class DownloadFile extends Thread {

    URL url;
    long startPos;
    long endPos;
    final static int bufferSize = 1024 * 3;
    public static ExecutorService pool = Executors.newCachedThreadPool();

    public DownloadFile(URL url, long startPos, long endPos) {
        this.url = url;
        this.startPos = startPos;
        this.endPos = endPos;
    }

    public static void main(String[] args) {
        try {
            download(new URL("http://hiphotos.baidu.com/dazhu1115/pic/item/fb8eccffa223a373d6887dfc.jpg"));
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    public static void download(URL url) throws IOException {
        String fileName = url.getFile();
        final long size = 8096;
        if (fileName.equals("")) {
            throw new IOException("download webfile \"" + fileName + "\" failed");
        }
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        long total = con.getContentLength();
        System.out.println("file size is " + total);
        con.disconnect();
        if (total <= size) {

        } else {
            long part = total % size != 0 ? total / size + 1 : total / size;
            long len;
            byte[] b = null;
            for (int i = 0; i < part; i++) {
                len = i != part - 1 ? size : total % size;
                long startPos = size * i;
                long endPos = startPos + len - 1;
                con = (HttpURLConnection) url.openConnection();
                con.setAllowUserInteraction(true);
                con.setReadTimeout(30000);
                con.setRequestProperty("RANGE", "bytes=" + startPos + "-" + endPos);
                System.out.println("Request Data from " + startPos + " to " + endPos);
                con.connect();

                DownloadFile task = new DownloadFile(url,startPos,endPos);
                pool.execute(task);
            }
        }
    }

    public void run() {
        byte[] b = new byte[bufferSize];
        HttpURLConnection con;
        try {
            con = (HttpURLConnection) url.openConnection();
            con.setAllowUserInteraction(true);
            con.setReadTimeout(30000);
            con.setRequestProperty("RANGE", "bytes=" + startPos + "-" + endPos);
            con.connect();
            BufferedInputStream bis = new BufferedInputStream(con.getInputStream());
            RandomAccessFile oSavedFile = new RandomAccessFile("D:/bbb.jpg", "rw");
            oSavedFile.seek(startPos);
            System.out.println("Request Data from " + startPos + " to " + endPos);
            while (startPos < endPos) {
                int wlen = bis.read(b, 0, bufferSize);
                oSavedFile.write(b, 0, wlen);
                startPos += wlen;
            }
            bis.close();
            oSavedFile.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:25:05.940

我做了这样的事情来提取文件：

```
 String imgPath = "/* path to the URL on the internet */ "; 
     String imgFilePath = " /* path to file on disk */ ";

     URL imgUrl;
     try {
        imgUrl = new URL(imgPath);
        ReadableByteChannel rbc = Channels.newChannel(imgUrl.openStream());
        FileOutputStream fos = new FileOutputStream(imgFilePath);
        setState(EXTRACTING + imgFilePath);
        fos.getChannel().transferFrom(rbc, 0, 1 << 24);

     } catch (MalformedURLException e) {
        e.printStackTrace();
     } catch (FileNotFoundException e) {
        e.printStackTrace();
     } catch (IOException e) {
        e.printStackTrace();
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:56:31.260

如果没有更多可用字节，则该`BufferedIntpuStream.read`方法返回，因此您必须循环直到写入整个块大小。

这是解决您的问题的方法：

```
 BufferedInputStream bis = new BufferedInputStream(
                con.getInputStream());

        RandomAccessFile oSavedFile = new RandomAccessFile("D:/bbb.jpg",
                "rw");            
        oSavedFile.seek(startPos);
        int wlen = 0;
        while (wlen < length) {
            int read = bis.read(b, 0, length);
            wlen += read;
            oSavedFile.write(b, 0, read);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T05:41:12.813

我在您的代码中本地添加了一些日志记录语句。下面是日志。

```
file size is 69635
Requesting data from position 0 to 8096
Requesting data from position 8096 to 16192
Requesting data from position 32384 to 40480
Requesting data from position 24288 to 32384
Requesting data from position 16192 to 24288
Requesting data from position 48576 to 56672
Requesting data from position 40480 to 48576
Requesting data from position 64768 to 72864
Requesting data from position 56672 to 64768
Writing data starting at 0
Writing data starting at 16192
Writing data starting at 24288
Writing data starting at 48576
Writing data starting at 40480
Writing data starting at 64768
Writing data starting at 56672
Writing data starting at 32384
Writing data starting at 8096 
```

看到问题在于多线程。该程序正在以错误的顺序将数据写入最终成为损坏文件的文件。希望这足够清楚。**这是作业吗？**

# c# - 删除字典中的重复项

> ID：10629393
> 
> 赞同：4
> 
> 时间：2012-05-17T03:19:43.270
> 
> 标签：c#, .net

如果我有这样的字典，

```
Dictionary<int, string> roadNames = new Dictionary<int, string>();

roadNames.Add(1, "Rosedale Rd");
roadNames.Add(2, "Transmere Rd");
roadNames.Add(3, "Rosedale Rd");
roadNames.Add(4, "Rosedale Rd");
roadNames.Add(5, "Rosedale Rd");
roadNames.Add(6, "Rosedale Rd");
roadNames.Add(7, "Rosedale Rd");
roadNames.Add(8, "Brown Rd");
roadNames.Add(9, "Harold Rd"); 
```

是否有 LINQ 解决方案来删除彼此相邻的重复项。我追求的结果是一个包含这个的列表，

```
Rosedale Rd
Transmere Rd
Rosedale Rd
Brown Rd
Harold Rd 
```

请注意，Rosedale Rd 仍然在列表中两次。这个想法是删除彼此相邻的重复项，在这种情况下，我们将删除项目 4、5、6 和 7。

项目 1 不在项目 3 旁边，因此不会被删除。

更新：

不要担心字典没有被订购。有序列表的解决方案会很好。我可以处理订单。IE

```
List<string> roadNames = new List<string>()
{
    "Rosedale Rd",
    "Transmere Rd",
    // etc
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:59:19.600

Here's a method that uses the standard built-in LINQ operators:

```
var result =
    roadNames
        .OrderBy(x => x.Key)
        .Select(x => x.Value)
        .Aggregate(
            new List<string>(),
            (xs, x) =>
            {
                if (xs.LastOrDefault() != x)
                {
                    xs.Add(x);
                }
                return xs;
            }); 
```

I've assumed that you want to order by key before selecting the value from the dictionary.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T03:34:17.230

假设您使用的是排序字典（或任何其他排序结构），则有两个选项。

**利用响应式扩展**

[如果您利用 Microsoft 的Reactive Extensions](http://msdn.microsoft.com/en-us/data/gg577609.aspx)（每个人都应该这样做！），这非常简单：

```
roadNames.Values // remove if a list instead
         .ToObservable()
         .DistinctUntilChanged()
         .ToList(); 
```

如果您愿意，您可以将 final 更改`ToList()`为 to `ToEnumerable()`。

这将返回：

```
Rosedale Rd 
Transmere Rd 
Rosedale Rd 
Brown Rd 
Harold Rd 
```

**使用扩展方法**

您可以像这样使用`GroupAdjacent`扩展方法：

```
roadNames.Values // remove if a list instead
         .GroupAdjacent((x,y) => x == y)
         .Select(x => x.First()); 
```

扩展方法：

```
public static IEnumerable<IEnumerable<T>> GroupAdjacent<T>(
    this IEnumerable<T> source, Func<T, T, bool> adjacent)
{
    var g = new List<T>();
    foreach (var x in source)
    {
        if (g.Count != 0 && !adjacent(g.Last(), x))
        {
            yield return g;
            g = new List<T>();
        }
        g.Add(x);
    }
    yield return g;
} 
```

# ruby - 我将 rake 用于非 Rails 应用程序，并使用活动记录进行迁移。如何运行种子？

> ID：10629394
> 
> 赞同：0
> 
> 时间：2012-05-17T03:19:48.220
> 
> 标签：ruby, activerecord, rails-migrations

我有一个非 Rails 应用程序，我在其中使用 rake 和 activerecord 进行数据库迁移等。

我怎么能用种子？

我创建了一个 seed.rb 文件，但是如何将它包装在 rake 方法调用中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:47:47.557

只需`require_relative 'db/seeds'`在使用 Ruby 1.9 或`require 'db/seeds'`在 rake 任务中使用 Ruby 1.8 时使用。当你调用它时，它们将被评估。

# ruby-on-rails - 如何禁用 HTTP 严格传输安全性？

> ID：10629397
> 
> 赞同：42
> 
> 时间：2012-05-17T03:20:13.010
> 
> 标签：ruby-on-rails, apache, ssl, https, hsts

我有一个 Rails 应用程序`config.force_ssl = true`，但现在我不想要 SSL 加密，但我的应用程序仍在重定向到 https。我读到这是 Apache 上的 HTTP 严格传输安全问题。我怎样才能禁用它？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-17T09:20:52.943

这不是 Apache 的问题，而是 Rails 发送 HSTS 标头的事实。

在 Chrome 中，您可以通过进入 清除 HSTS 状态`about:net-internals`，如[ImperialViolet: HSTS UI in Chrome 中](http://www.imperialviolet.org/2011/02/17/hstsui.html)所述。您可能还需要清除缓存，因为`config.force_ssl = true`还使用 301（永久）重定向。

此外，根据[这个答案](https://stackoverflow.com/a/10523187/372643)，您还可以让您的应用程序发送一个 max-age=0 的 STS 标头。在您的控制器中：

```
response.headers["Strict-Transport-Security"] = 'max-age=0' 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-09-21T14:28:14.677

只是想指出@Bruno 的答案和@JoeVanDyk 的建议是正确的，并且可以在 Rails/Apache 的上下文之外应用。我正在使用 PHP 和 Nginx。在我的情况下，PHP 与它无关，但这里是使用 Nginx 的步骤：

```
//sorry here's the nginx.conf part first, can't figure out how to mix multi-line 
//code with an ordered list

server {
   #...
   #change:
   # add_header  Strict-Transport-Security "max-age=315360000; includeSubdomains";     
   #to:
   add_header  Strict-Transport-Security "max-age=0;";
   #...
} 
```

1.  清除您的“浏览器历史记录”。为了澄清@JoeVanDyk 的建议，我认为您需要清除“浏览历史记录”，因为清除缓存对我不起作用（在 Chrome/Firefox 上测试，如果您了解更多，请添加评论）。

2.  nginx.conf 文件（见上面的代码）

3.  重启服务器

    `root@ip-xxx-xxx-xxx:~# /etc/init.d/nginx restart`.

在此之后，您可以将 nginx`add_header Strict..`命令恢复为之前的命令。只需确保再次重复步骤 1-3。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-20T02:31:17.747

我发现我无法在 Chrome 中删除 HSTS 条目，因为我正在使用 IP 地址进行开发。我似乎无法`chrome://net-internals/#hsts`删除该条目。我发现 Chrome 将条目存储在 ../AppData/local/Google/Chrome/User Data/Default/TransportSecurity 中，所以我只是删除了该文件。它当然会删除所有 HSTS 请求，但我怀疑它们会随着时间的推移而重建。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-18T21:04:44.547

数字 id 对此提供了一些想法。将缓存时间设置为 0 是最好的选择，如果您将其关闭，则需要将其设置为 0 数周以清除客户端浏览器。如果您只需要在 chrome 中清除 HSTS（对于您自己的浏览器），您可以`chrome://net-internals/#hsts`在地址栏中使用您的特定浏览器清除您网站的缓存。结合下面的“门口”它变得有用。

您可以通过设置/欺骗自定义标头 => 键来设置临时 HSTS 模式。基本上，如果存在特殊的请求标头，并且它与键匹配，则将 HSTS 设置为您需要的任何缓存时间。这将允许您为除您之外的所有流量打开或关闭 HSTS。在全局启用之前尝试 HSTS 很有用（以确保所有资产正在加载）。如果您想在修复某些东西时暂时清除客户端缓存（为您留出测试空间），这也很有用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-20T14:13:38.147

如果您正在开发应用程序/站点并且出于任何原因选择使用域 .dev 或 .app 并且如果您使用 Chrome、Edge（基于 Chromium）作为您的浏览器，您将无法摆脱此错误是因为 Google 购买了 TLD .dev 和 .app 并强制对这些域使用 HTTPS。

这里的“所谓”解决方法是您应该将 .dev 或 .app 更改为其他内容，比如说 .local。

希望这会有所帮助。

# android - 在加载入口点活动时显示位图？

> ID：10629398
> 
> 赞同：1
> 
> 时间：2012-05-17T03:20:21.717
> 
> 标签：android

我的应用程序大约需要 3 秒才能加载（是的，那里还有很多改进空间）。在用户看到我的进入活动之前，我得到一个空白的屏幕。是否可以在此处放置位图以使其看起来不那么可怕？我想我记得在某处读过，您可以在实际应用程序仍在启动时通过使用样式在这里展示一些东西，

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:22:11.843

我会简单地显示一个带有 ImageView 的启动画面。

像这样的东西`onCreate`：

```
setContentView(mySplashImageView);
asyncTaskExecutor.runInBackground(new Runnable(){
    public void run(){
        // something that takes a long time to finish
        ..... CODE ....
        // when the heavy code above finished, use a handler or something to notify your UI thread to swap its main content view.
    }
}); 
```

在收到繁重代码完成的通知后，只需*重置*主要内容视图。

```
setContentView(R.layout.mainScreen); 
```

# objective-c - viewcontroller 可以访问传入 segue 的标识符吗？

> ID：10629399
> 
> 赞同：0
> 
> 时间：2012-05-17T03:20:36.703
> 
> 标签：objective-c, xcode, storyboard, uistoryboard

viewcontroller 可以访问用于转换到它的 segue 的标识符吗？例如，我使用标识符为“mySegue”的 segue 从 viewcontroller A 转换到 viewcontroller B。无论如何，viewcontroller B 是否可以获取 segue 的标识符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:19:23.507

我不相信有这样的财产。这种事情应该通过调用 VC 的 prepareForSegue:sender 方法（如评论中所述）来处理，然后分配一个自定义属性来表示它来自哪里等。

# iphone - ios: colorWithPatternImage , 拉伸图像全屏

> ID：10629403
> 
> 赞同：43
> 
> 时间：2012-05-17T03:20:59.593
> 
> 标签：iphone, ios, uicolor

我有一个视图，并希望通过 UIImage 为该视图设置背景颜色。代码为：

```
self.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"backImage.png"]]; 
```

问题是：backImage'frame 比 view 小。如何拉伸 UIImage 以充满我的视野。我知道使用 UIImageView 可以达到。

有人有好主意吗？

**更新：**

我无法上传一张图片。

像这样：backImage的大小是30*30，我的视图大小是1024*700，当我使用`myview.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"backImage.png"]];`

结果是myview 的backGroup 有很多'backImage.png'。我的目标是拥有一个完整的“backImage.png”。

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2012-12-27T04:08:35.117

试试。

`self.layer.contents = (id)[UIImage imageNamed:@"freshBackground.png"].CGImage;`

### 迅速：

```
self.view.layer.contents = UIImage(named: "freshBackground")!.cgImage 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-17T04:07:48.713

As far as I know, you cannot resize the background's pattern image directly. The easiest way is just to change your image to fit your parent view's frame size. Or you can redraw your image to fit the size of your parent view.

```
UIView * yourView = [[UIView alloc] initWithFrame:CGRectMake(10.f, 100.f, 300.f, 100.f)];
UIImage * targetImage = [UIImage imageNamed:@"backImage.png"];

// redraw the image to fit |yourView|'s size
UIGraphicsBeginImageContextWithOptions(yourView.frame.size, NO, 0.f);
[targetImage drawInRect:CGRectMake(0.f, 0.f, yourView.frame.size.width, yourView.frame.size.height)];
UIImage * resultImage = UIGraphicsGetImageFromCurrentImageContext();    
UIGraphicsEndImageContext();

[yourView setBackgroundColor:[UIColor colorWithPatternImage:resultImage]]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-08-31T20:05:44.103

world000 的答案翻译成 Swift：

```
self.layer.contents = UIImage(named: "freshBackground.png")?.CGImage 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-21T06:58:06.200

根据 Kjuly 的回答，如果您希望图像在中心正确插入而不是被拉伸，请使用此方法获取新图像：

```
#pragma mark - Image
+(UIImage*)imageFitInCenterForSize:(CGSize)inSize forSourceImage:(UIImage*)inImage
{
    // redraw the image to fit |yourView|'s size
    CGSize imageOriginalSize = inImage.size;
    UIImage *resultImage = nil;
    if (imageOriginalSize.width<=inSize.width && imageOriginalSize.height<=inSize.height)
    {
        UIGraphicsBeginImageContextWithOptions(inSize, NO, 0.f);
        [inImage drawInRect:CGRectMake((inSize.width-imageOriginalSize.width)/2.0, (inSize.height-imageOriginalSize.height)/2.0, imageOriginalSize.width, imageOriginalSize.height)];
        resultImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }
    return resultImage;
} 
```

与重载变体相同：

```
+(UIImage*)imageFitInCenterForSize:(CGSize)inSize forSourceImage:(UIImage*)inImage xOffset:(CGFloat)inXOffset yOffset:(CGFloat)inYOffset
{
    // http://stackoverflow.com/questions/10629403/ios-colorwithpatternimage-stretch-image-full-screen
    // redraw the image to fit |yourView|'s size
    CGSize imageOriginalSize = inImage.size;
    UIImage *resultImage = nil;
    if (imageOriginalSize.width<=inSize.width && imageOriginalSize.height<=inSize.height)
    {
        UIGraphicsBeginImageContextWithOptions(inSize, NO, 0.f);
        [inImage drawInRect:CGRectMake((inSize.width-imageOriginalSize.width)/2.0+inXOffset, (inSize.height-imageOriginalSize.height)/2.0+inYOffset, imageOriginalSize.width, imageOriginalSize.height)];
        resultImage = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();
    }
    return resultImage;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-14T15:26:46.050

我使用以下方法：

1.  在特定范围内绘制图像（使其缩放）
2.  使用生成的图像作为图案。

代码：

```
UIGraphicsBeginImageContext(self.window.frame.size);
[[UIImage imageNamed:@"background"] drawInRect:self.window.bounds];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
self.window.backgroundColor = [UIColor colorWithPatternImage:image]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-17T12:22:56.527

这是基于先前评论的版本，该版本首先缩放图像，然后裁剪以按比例填充。

```
func imageScaledToFillSize(size: CGSize, image: UIImage) -> UIImage
{
    let aspect = image.size.width / image.size.height;
    UIGraphicsBeginImageContextWithOptions(size, false, 0)
    if (size.width / aspect <= size.height) {
        let resizedImg = self.imageScaledToSize(CGSize(width: size.height * aspect, height: size.height), image: image)
        resizedImg.drawInRect(CGRectMake((size.width - resizedImg.size.width)/2, 0, resizedImg.size.width, resizedImg.size.height))
    } else {
        let resizedImg = self.imageScaledToSize(CGSize(width: size.width, height: size.width / aspect), image: image)
        resizedImg.drawInRect(CGRectMake(0, (size.height-resizedImg.size.height)/2, resizedImg.size.width, resizedImg.size.height))
    }
    let imageR = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return imageR;
}

func imageScaledToSize(size: CGSize, image: UIImage) -> UIImage {
    UIGraphicsBeginImageContextWithOptions(size, false, 0.0);
    image.drawInRect(CGRectMake(0.0, 0.0, size.width, size.height))
    let imageR = UIGraphicsGetImageFromCurrentImageContext()
    UIGraphicsEndImageContext();
    return imageR;
} 
```

# php - AJAX：请求附加了字符串，打乱了电话

> ID：10629405
> 
> 赞同：1
> 
> 时间：2012-05-17T03:21:09.703
> 
> 标签：php, jquery-ui, jquery

我有一个问题，我相信它与我的 ajax 有关，因此是标题。
我有一个脚本：

```
while($row = mysql_fetch_array($results)){
        $file="imgs/uploads/slideshow/".$row['image_location'];

        if(file_exists($_SERVER['DOCUMENT_ROOT'].$file)){
            $location = $file;//"imgs/uploads/thumbs/".$row['image_location'];
        } else if(!file_exists($_SERVER['DOCUMENT_ROOT'].$file)){
            $location = "imgs/resize.php?file=uploads/".$row['image_location']."&preset=slideshow";
        }
        $lightboxUrl = "imgs/resize.php?file=uploads/".$row['image_location']."&preset=lightbox2";
        $date = $index->formatDate($row['image_upload']);
        $name = $row['image_name'];
        print<<<HERE
            <div>
                <a href='$lightboxUrl' class='lightbox'>
                    <img title='$date' src='$location'/>
                </a>
            </div>";
HERE;
} 
```

在 ajax 加载的选项卡（jquery ui）内打印。它适用于除第一个图像之外的所有图像。第一个调用的图像有一个请求 url，如下所示：
`http://localhost/site/imgs/resize.php?file=uploads/113371269676r84gq9re1vppfram0a7ajgo15.JPG&preset=slideshow?1337224225894` 看到`?1337224225894`最后了吗？
这就是搞砸了。
添加到 url 中的位会使请求 url 无效，并且参数不会传递给脚本，因此我`?`得到的是完整图像而不是重新调整大小的图像。

所有其他网址都是正确的。我什至可以在脚本中回显该 url，它是正确的，但是当它被调用时，它会变得一团糟。我有一个模糊的想法，这是由于我的选项卡实例中没有使用缓存参数引起的，但它没有意义，因为它曾经工作过。
任何想法？

编辑：奇怪的是，当由普通的 ajax 请求与选项卡交易调用时，相同的脚本似乎可以完美地工作，至少这是我能看到的脚本之间的唯一区别。

EDIT2：
请求的标签初始化脚本：

```
 $(function(){
        $('#slides').slides({
            preload: true,
            generateNextPrev: false,
            preloadImage: 'imgs/loading.gif',
            //bigTarget: true,
            play: 5000,
            slideSpeed: 3000,
            generatePagination: false

        });
    }); 
```

这是视图源给出的标记：

```
<div id="content">

        <div class="ui-tabs ui-widget ui-widget-content ui-corner-all" id="tabs">
            <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
                <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#ui-tabs-1" id="public">Public View</a></li>
                <li class="ui-state-default ui-corner-top"><a href="#settings">Settings</a></li>
                <li class="ui-state-default ui-corner-top" id="editLink"><a href="#ui-tabs-2" id="edit">Edit Blog</a></li>
                <li class="ui-state-default ui-corner-top"><a href="#profile" "="">Profile</a></li>
            </ul><div class="ui-tabs-panel ui-widget-content ui-corner-bottom" id="ui-tabs-1">                      
            <div id="slides">
                    <div style="overflow: hidden; position: relative; display: block;" class="slides_container">                <div style="position: relative; width: 1800px; height: 600px; left: -600px;" class="slides_control"><div style="position: absolute; top: 0px; left: 600px; z-index: 5; display: block;">
             imgs/resize.php?file=uploads/113371269676r84gq9re1vppfram0a7ajgo15.JPG&amp;preset=slideshow
                <a href="imgs/resize.php?file=uploads/113371269676r84gq9re1vppfram0a7ajgo15.JPG&amp;preset=lightbox2" class="lightbox">
                    <img title="Yesterday @ 20:09" src="imgs/resize.php?file=uploads/113371269676r84gq9re1vppfram0a7ajgo15.JPG&amp;preset=slideshow?1337226056936">
                </a>
            </div><div style="position: absolute; top: 0px; left: 600px; z-index: 0; display: none;">
             imgs/resize.php?file=uploads/113371236426r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=slideshow
                <a href="imgs/resize.php?file=uploads/113371236426r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=lightbox2" class="lightbox">
                    <img title="Yesterday @ 19:14" src="imgs/resize.php?file=uploads/113371236426r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=slideshow">
                </a>
            </div><div style="position: absolute; top: 0px; left: 600px; z-index: 0; display: none;">
             imgs/resize.php?file=uploads/113371234386r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=slideshow
                <a href="imgs/resize.php?file=uploads/113371234386r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=lightbox2" class="lightbox">
                    <img title="Yesterday @ 19:10" src="imgs/resize.php?file=uploads/113371234386r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=slideshow">
                </a>
            </div><div style="position: absolute; top: 0px; left: 600px; z-index: 0; display: none;">
             imgs/resize.php?file=uploads/113371233356r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=slideshow
                <a href="imgs/resize.php?file=uploads/113371233356r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=lightbox2" class="lightbox">
                    <img title="Yesterday @ 19:08" src="imgs/resize.php?file=uploads/113371233356r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=slideshow">
                </a>
            </div><div style="position: absolute; top: 0px; left: 600px; z-index: 0; display: none;">
             imgs/resize.php?file=uploads/113371232486r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=slideshow
                <a href="imgs/resize.php?file=uploads/113371232486r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=lightbox2" class="lightbox">
                    <img title="Yesterday @ 19:07" src="imgs/resize.php?file=uploads/113371232486r84gq9re1vppfram0a7ajgo15.jpg&amp;preset=slideshow">
                </a>
            </div><div style="position: absolute; top: 0px; left: 600px; z-index: 0; display: none;">
             imgs/resize.php?file=uploads/113371230636r84gq9re1vppfram0a7ajgo15.JPG&amp;preset=slideshow
                <a href="imgs/resize.php?file=uploads/113371230636r84gq9re1vppfram0a7ajgo15.JPG&amp;preset=lightbox2" class="lightbox">
                    <img title="Yesterday @ 19:04" src="imgs/resize.php?file=uploads/113371230636r84gq9re1vppfram0a7ajgo15.JPG&amp;preset=slideshow">
                </a>
            </div><div style="position: absolute; top: 0px; left: 600px; z-index: 0; display: none;">
             imgs/resize.php?file=uploads/113371228826r84gq9re1vppfram0a7ajgo15.JPG&amp;preset=slideshow
                <a href="imgs/resize.php?file=uploads/113371228826r84gq9re1vppfram0a7ajgo15.JPG&amp;preset=lightbox2" class="lightbox">
                    <img title="Yesterday @ 19:01" src="imgs/resize.php?file=uploads/113371228826r84gq9re1vppfram0a7ajgo15.JPG&amp;preset=slideshow">
                </a>
            </div><div style="position: absolute; top: 0px; left: 600px; z-index: 0; display: none;">
             imgs/resize.php?file=uploads/11337107020jcemicq53t6g1h7m7kbfre77i1.JPG&amp;preset=slideshow
                <a href="imgs/resize.php?file=uploads/11337107020jcemicq53t6g1h7m7kbfre77i1.JPG&amp;preset=lightbox2" class="lightbox">
                    <img title="Yesterday @ 14:37" src="imgs/resize.php?file=uploads/11337107020jcemicq53t6g1h7m7kbfre77i1.JPG&amp;preset=slideshow">
                </a>
            </div><div style="position: absolute; top: 0px; left: 600px; z-index: 0; display: none;">
             imgs/resize.php?file=uploads/11337106997jcemicq53t6g1h7m7kbfre77i1.jpg&amp;preset=slideshow
                <a href="imgs/resize.php?file=uploads/11337106997jcemicq53t6g1h7m7kbfre77i1.jpg&amp;preset=lightbox2" class="lightbox">
                    <img title="Yesterday @ 14:36" src="imgs/resize.php?file=uploads/11337106997jcemicq53t6g1h7m7kbfre77i1.jpg&amp;preset=slideshow">
                </a>
            </div></div>";                                      </div> <!-- End # slide_container -->

                    <a href="#" class="prev"><img src="imgs/arrow-prev.png" alt="Arrow Prev" height="43" width="24"></a>
                    <a href="#" class="next"><img src="imgs/arrow-next.png" alt="Arrow Next" height="43" width="24"></a>
            </div> <!-- End # slides --></div> 
```

EDIT3：
新的奇怪发现。使用萤火虫我发现了以下内容。正确发送标头接收到正确的数据，并且根据萤火虫源代码是正确的，但如果我得到 web dev 插件生成的源代码，它会显示额外的字符串。所以它介于接收数据和打印数据之间。我认为....

无论第一张图像是什么，都会发生这种情况，它绝不会连接到我用不同位置和文件测试过的图像或文件位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:32:34.897

"profile" li 中的 "="" 会有点混乱！如果你纠正了会发生什么？

a 链接因此而混乱，因此您对整个 a 元素都有麻烦！

* * *

编辑：上面的代码是您从“查看源代码”还是从 Firebug 获得的？这 ？清楚地显示在图像 URL src 中，这就是传递给灯箱的内容（不是 a href）

因此，如果“查看源”然后检查创建源的内容，因为那是添加？少量。如果来自 Firebug，我们将需要更多代码来查找 src 可以被 Javascript 修改的位置。

# akka - 在 playframework2.0 中使用 akka promise/future 的异常

> ID：10629407
> 
> 赞同：1
> 
> 时间：2012-05-17T03:21:33.447
> 
> 标签：akka, playframework-2.0

我正在将 play framework 2.0 用于一个简单的应用程序，该应用程序从 MySQL 数据库返回 json 字符串中的员工列表。我的控制器如下

```
public class Application extends Controller {

 public static Result getEmployees() {
        Logger.info("enter getting employee information");
        Promise <List<Employee>> employeeList = Akka.future(new     Callable<List<Employee>>(){
            public List<Employee> call() {
                return Employee.getAll();

            }
        });

        return async(
                  employeeList.map(
                  new Function<List<Employee>,Result>() {
                    @Override
                    public Result apply(List<Employee> employeeList)
                             {
                        // TODO Auto-generated method stub
                      try { 
                        if (employeeList!=null) {
                            return ok(Json.toJson(employeeList));
                        } else {
                            return ok("");
                        }
                      } catch (Exception e) {
                          return ok("");
                      }
                    } 
                  }
                )
         );

  }
} 
```

模型类如下。

```
public class Employee extends Model{

    @Id
    public Long id;

    @Required
    public String name;

    @Required 
    public Float age;

       public static Model.Finder<Long,Employee> find = new Model.Finder<Long, Employee>(Long.class, Employee.class);

        @Transactional(readOnly = true)
    //    @Cached(key = "alllist")
        public static List<Employee> getAll() {

            //return JPA.em("default").find(Employee.class, 1L);

            Logger.info("Enter getAll");
            if (Cache.get("allList")!=null){
                Logger.info("cache is not null");
                return (List<Employee>) Cache.get("allList");
            }
            EntityManager entityManager = JPA.em("default");
            Query query = entityManager.createQuery("select m from Employee m", Employee.class);
            List<Employee> data = query.setFirstResult(0).getResultList();
            Logger.info("setting cache");
            Cache.set("allList", data);
            entityManager.close();

            return data;

    //      if (find!=null)
    //          return find.all();
    //      else 
    //          return null;
        }

    } 
```

我开始在生产模式下使用 apache 基准测试在我的 macbook 上对 play 应用程序进行基准测试，最大堆大小约为 1500 MB。

我注意到的几件事是增加请求的并发性会增加平均响应时间并提高并发率。

```
ab -n 100 -c 10 http://localhost:9000/api/employees/ 
```

我收到以下错误

```
[error] play - Waiting for a promise, but got an error: null
java.lang.RuntimeException: null 
```

我的 Akka 具体配置是。

```
play {

    akka {
        event-handlers = ["akka.event.slf4j.Slf4jEventHandler"]
        loglevel = WARNING

        actor {

            deployment {

                /actions {
                    router = round-robin
                    nr-of-instances = 100
                }

                /promises {
                    router = round-robin
                    nr-of-instances = 100
                }

            }

            retrieveBodyParserTimeout = 4 second

            actions-dispatcher = {
                fork-join-executor {
                    parallelism-factor = 1
                    parallelism-max = 100
                }
            }

            promises-dispatcher = {
                fork-join-executor {
                    parallelism-factor = 1
                    parallelism-max = 100
                }
            }

            websockets-dispatcher = {
                fork-join-executor {
                    parallelism-factor = 1
                    parallelism-max = 100
                }
            }

            default-dispatcher = {
                fork-join-executor {
                    parallelism-factor = 1
                    parallelism-max = 100
                }
            }

        }

    }

} 
```

# php - 如何在 MVC 应用程序中引导流量：CodeIgniter $routes 或 __remap() 用于控制器选择？

> ID：10629415
> 
> 赞同：3
> 
> 时间：2012-05-17T03:23:32.397
> 
> 标签：php, model-view-controller, codeigniter, routing, hmvc

### 背景：

我正在为 CodeIgniter 使用 HMVC 插件，但这个问题通常适用于 MVC。

## 问题：

我应该使用`$routes`匹配我的 URL 布局以便调用特定的控制器/模块，还是应该在我`__remap()`的每个控制器中创建函数来调用 url 系列中的下一个“模块”？

我可以成功实施这两种方法中的任何一种，但我并没有真正看到明确的赢家。我正在寻找使用一种方法而不是另一种方法的理由（除非两者结合更合适）。

另外，我不是在寻找任何语法帮助，所以如果下面有小错误，你可以忽略它们，我只是在寻找如何将 MVC (HMVC) 最佳实践应用于我的网站。

### 访问者可能遇到的 URL：

假设在我的应用程序中可能遇到以下 URL：

```
Main Site:
http://www.example.com

Individual Static Pages:
                   .../staticPage1
                   .../staticPage2

Profession Sections:
                   .../profession1
                   .../profession2

Users Section (Unique to each profession):
                   .../profession#/users
                               .../users/id
                               .../users/dashboard
                               .../users/edit
                               .../users/preferences

Events Section (Unique to each profession):
                   .../profession#/events
                               .../events/id
                               .../events/dates
                               .../events/location
                               .../events/create

Search Page (Unique to each profession):
                   .../profession#/search 
```

### 对应于上述 URL 段的控制器：

和相应的控制器：

*   地点
*   页面
*   专业（扩展为特定专业#）
*   用户
*   活动
*   搜索

### 我的控制器的 CodeIgniter 目录布局：

它们每个都充当自己的模块并按以下方式存储：

```
/applications
             /modules
                     /site/
                     /pages/
                     /professions/
                     /users/
                     /events/
                     /search/ 
```

每个模块都有一个`models`、`views`和`controllers`子目录。

### 示例 $routes：

如果我要使用路由器来实现所有这些，我将使用`routes`我在`config`文件中定义的以下内容：

```
//Defaults
$route['default_controller'] = 'site';
$route['404_override'] = '';

//Users
$route['(?i)([a-z0-9_-]+)/users'] = 'users';
$route['(?i)([a-z0-9_-]+)/users/(:num)(/(:any))?'] = 'users/dashboard/$2';
$route['(?i)([a-z0-9_-]+)/users/(:any)'] = 'users/$2';

//Specific Sections
$route['(?i)([a-z0-9_-]+)/search'] = 'search/eventSearch';

//Events
$route['(?i)([a-z0-9_-]+)/events'] = 'events';
$route['(?i)([a-z0-9_-]+)/events/(:num)(/(:any))?'] = 'events/getById/$2';
$route['(?i)([a-z0-9_-]+)/events/(:any)'] = 'events/getByCategory/$2';

//Profession1
$route['(?i)profession1'] = 'profession1';
$route['(?i)profession1(/(:any)?)'] = 'profession1/$2';

//Profession2
$route['(?i)profession2'] = 'profession2';
$route['(?i)profession2(/(:any)?)'] = 'profession2/$2';

//Pages
$route['(?i)(:any)'] = "pages/index/$1"; 
```

### 专业的示例 __remap()

`__remap()`如果事实证明这是最好的方法，我已经开发了可以在每个控制器中使用的功能。这是控制器的一个此类功能的示例`Professions`：

```
public function _remap( $method )
{
        if( isset( $this->uri->segment(3) ) )
        {
            $method2 = $this->uri->segment(3);
        } else {
            $method2 = 'index';
        }
    if ($method == 'users')
    {
        $method2 = $this->uri->segment(3);
        $this->load->module('users');
        $this->users->$method2();
    }
    elseif ($method == 'events')
    {
        $method2 = $this->uri->segment(3);
        $this->load->module('events');
        $this->events->$method2();
    }
    elseif ($method == 'search')
    {
        $this->load->module('search');
        $this->search->$method2();
    }
    else
    {
        $this->$method();
    }
} 
```

### 结论：

如果需要任何其他信息来帮助解决此问题，请告诉我，我会提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:08:56.407

`$route`并且`remap`可以解决类似的问题，但它们往往在一定程度上有所不同。与 CodeIgniter 中的大多数情况一样，您可以在给定的解决方案中找到最合适的解决方案。

路线解决方案为您提供了一个很好地了解您的意图的设计。您和其他人能够看到每个 url 的去向，而且我个人大多数时候更喜欢这个，因为它非常易于管理。

当有许多具有许多不同类名（通常是第二个 uri）的类似（或简单）调用时，_remap() 会派上用场。在你的情况下似乎有。
您可以在上面剥离您的 _remap 函数，这将是这种情况下的最佳解决方案。

```
public function _remap( $method )
{
    $function = array(  'users'     =>  'users',
                        'events'    =>  'courses',
                        'search'    =>  'search');
    switch ($method) {
        case 'users':
        case 'events':
        case 'search':
            $method2 = ($this->uri->segment(3) ?: 'index');
            $this->load->module($method);
            $this->$function[$method]->$method2();

            break;
        default:
            $this->$method();

            break;
    }
} 
```

所以基本上，因为你似乎对不同的调用有一个简单的结构，我说在这种情况下使用 _remap() 而不是 $route 。但我建议您在描述此行为的 $route 文件中留下一行注释，以简化故障排除。

# r - 在 Sweave 中是否有与 \Sexpr{} 等效的 R Markdown？

> ID：10629416
> 
> 赞同：48
> 
> 时间：2012-05-17T03:23:46.473
> 
> 标签：r, markdown, knitr

在 knitr 中使用 R Markdown 是否等同于`\Sexpr{}`在 Sweave 中？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-17T03:30:52.490

是的。您可以使用

```
`r your_expression_here` 
```

所以像

```
2+2 is: `r 2+2` 
```

应该产生：

```
2+2 is: 4 
```

我最初发现很难弄清楚您可以在 knitr 中使用的每种不同样式（html，markdown，sweave，...）的不同语法是什么，并求助于查看 Yihui 的[最小示例](http://yihui.name/knitr/demos)（它做了一个干得好），但如果你能阅读正则表达式，你就可以查看[默认的模式定义](http://yihui.name/knitr/patterns)。如果需要，您甚至可以选择定义自己的语法。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-21T23:19:45.567

默认情况下，R Markdown 中的内联 R 代码将被格式化为代码。如果您只想显示输出，`asis`请将 R 命令包含在`I(...)`. `I(...)`用匹配的行为封闭输出`Sexpr`。这种区别有时很重要。欲了解更多信息，请参阅 [谢一辉](https://github.com/yihui/knitr/issues/244#issuecomment-5833603)的这篇评论。下表显示了从 R Markdown 到 Markdown 到 HTML 的不同输出。

```
R Markdown        `r 2 + 2`               `r I(2+2)`
Markdown              `4`                     4
HTML             <code>4</code>               4 
```

# jquery - 在jquery ui对话框中对齐标题和关闭文本不起作用IE7和6

> ID：10629418
> 
> 赞同：1
> 
> 时间：2012-05-17T03:24:07.137
> 
> 标签：jquery, internet-explorer, text, dialog, alignment

我正在尝试在 jQuery 对话框标题栏中将标题文本向左对齐并在右侧关闭文本。它适用于我测试的所有浏览器，除了 IE6 和 7。在 IE6/7 中，关闭文本是右对齐的，但在标题文本下方出现一行，并且在对话框的标题栏之外，因此不可见。见下图： [https ://docs.google.com/document/d/1B-syu0IiTh27kb4D9nXhfZkpjACgZnOWIPDhOTRdMWQ/edit](https://docs.google.com/document/d/1B-syu0IiTh27kb4D9nXhfZkpjACgZnOWIPDhOTRdMWQ/edit)

这是我使用的一些代码

```
/**IE 7 has a ui dialog positioning issue with jquery UI 1.8 above , the below seems to solve it **/
.ui-dialog{ position: absolute;  width: 100%;}

.ui-icon  
{
  background-image: url("") !important; 
  text-align: right;
}
.ui-dialog-title-dialog 
{
  float: left;
}
.ui-dialog-titlebar-close
{
  font-size: 16px;
  float: right;
}

.ui-dialog-title
{ 
  font-size: 16px;
  padding: 4px;
  padding-right: 50px;
}

.ui-dialog-titlebar
{
  padding: 4px;
  background-color : #FFF;
}

$("#dialog").dialog({ autoOpen: false, width: area.width, height: area.height, modal: true, closeText: "閉じる", title: '<a href="#" id="hideAll">説明を非表示</a> ' }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T10:49:41.630

我根据对话框的宽度使用一些 jquery 和填充来解决这个问题。不是最好的解决方案，但它可以工作。

```
$('.ui-dialog-title').css("padding-right", (dialog.width - closeTextWidth) + "px"); 
```

# css - ASP.NET MVC3 - Site.css

> ID：10629423
> 
> 赞同：0
> 
> 时间：2012-05-17T03:24:29.777
> 
> 标签：css, styles

当我从以下位置更改代码时，为什么我的 site.css 没有任何变化：

```
.display-label, 
.editor-label 
{
    margin: 1em 0 0 0;
} 
```

至

```
.display-label, 
.editor-label 
{   
    margin: 1em 0 0 0;
    color: Green;
    font-weight: bold;
} 
```

这是我的 Details.cshtml ：

```
@model ContosoUniversity.Models.Student

@{
    ViewBag.Title = "Details";
}

<h2>Details</h2>

<fieldset>
    <legend>Student</legend>

    <div class="display-label">LastName</div>
    <div class="display-field">
    @Html.DisplayFor(model => model.LastName)
    </div>

    <div class="display-label">FirstMidName</div>
    <div class="display-field">
        @Html.DisplayFor(model => model.FirstMidName)
    </div>

    <div class="display-label">EnrollmentDate</div>
    <div class="display-field">
       @Html.DisplayFor(model => model.EnrollmentDate)
    </div>
</fieldset>
<p>
    @Html.ActionLink("Edit", "Edit", new { id=Model.StudentID }) |
    @Html.ActionLink("Back to List", "Index")
</p> 
```

为什么会这样？是继承造成的吗？

这是整个 Site.css ：

```
body {
    background-color: #2E8B57;
    font-size: .85em;
    font-family: "Trebuchet MS", Verdana, Helvetica, Sans-Serif;
    margin: 0;
    padding: 0;
    color: #696969;
}

a:link {
    color: #034af3;
    text-decoration: underline;
}

a:visited {
    color: #505abc;
}

a:hover {
    color: #1d60ff;
    text-decoration: none;
}

a:active {
    color: #12eb87;
}

p, ul {
    margin-bottom: 20px;
    line-height: 1.6em;
}

header,
footer,
nav,
section {
    display: block;
}

* HEADINGS   
----------------------------------------------------------*/
h1, h2, h3, h4, h5, h6 {
    font-size: 1.5em;
    color: #000;
}

h1 {
    font-size: 2em;
    padding-bottom: 0;
    margin-bottom: 0;
}

h2 {
    padding: 0 0 10px 0;
}

h3 {
    font-size: 1.2em;
}

h4 {
    font-size: 1.1em;
}

h5, h6 {
     font-size: 1em;
}

/* PRIMARY LAYOUT ELEMENTS   
----------------------------------------------------------*/

/* you can specify a greater or lesser percentage for the 
page width. Or, you can specify an exact pixel width. */
.page {
    width: 90%;
    margin-left: auto;
    margin-right: auto;
}

header, #header {
    position: relative;
    margin-bottom: 0px;
    color: #000;
    padding: 0;
}

header h1, #header h1 {
    font-weight: bold;
    padding: 5px 0;
    margin: 0;
    color: #fff;
    border: none;
    line-height: 2em;
    font-size: 32px !important;
    text-shadow: 1px 1px 2px #111;
}

#main 
{
clear: both;
    padding: 30px 30px 15px 30px;
    background-color: #fff;
    border-radius: 4px 0 0 0;
    -webkit-border-radius: 4px 0 0 0;
    -moz-border-radius: 4px 0 0 0;
}

footer, 
#footer {
    background-color: #fff;
    color: #999;
    padding: 10px 0;
    text-align: center;
    line-height: normal;
    margin: 0 0 30px 0;
    font-size: .9em;
    border-radius: 0 0 4px 4px;
    -webkit-border-radius: 0 0 4px 4px;
    -moz-border-radius: 0 0 4px 4px;
}

/* Styles for validation helpers
-----------------------------------------------------------*/
.field-validation-error {
color: #ff0000;
}

.field-validation-valid {
display: none;
}

.input-validation-error {
    border: 1px solid #ff0000;
    background-color: #ffeeee;
}

.validation-summary-errors {
    font-weight: bold;
    color: #ff0000;
}

.validation-summary-valid {
    display: none;
}

/* Styles for editor and display helpers
----------------------------------------------------------*/
.display-label, 
.editor-label 
{   
    margin: 1em 0 0 0;
    color: Green;
    font-weight: bold;
}

.display-field, 
.editor-field 
{
    margin: 0.5em 0 0 0;
}

.text-box {
    width: 30em;
}

.text-box.multi-line {
    height: 6.5em;
}

.tri-state {
    width: 6em;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:28:36.050

可能的原因是其他一些样式定义覆盖了这个。用于`firebug`查看应用/覆盖了哪些样式。

如果要覆盖特定样式，请使用`important`关键字

```
.editor-label 
{   
    margin: 1em 0 0 0;
    color: Green !important;
    font-weight: bold !important;
} 
```

# objective-c - 如何使用异步数据加载 NSTableView？

> ID：10629424
> 
> 赞同：2
> 
> 时间：2012-05-17T03:24:36.907
> 
> 标签：objective-c, cocoa, asynchronous, nstableview

我很新，`Cocoa/Objective-C`所以希望我只是错过了一些东西。看起来这应该是一个相当普遍的情况。这一切都适用于 Mac 应用程序。

我有一个`NSTableView`它的委托实现

```
-(NSView *)tableView:(NSTableView *)table viewForTableColumn:(NSTableColumn *)tableColumn row:(NSInteger)row 
```

和

```
-(NSInteger)numberOfRowsInTableView:(NSTableView *)tableView 
```

我遇到的问题是，我加载到列中的数据是通过 Web 服务的异步调用和`NSStreamDelegate`. 此时我显然无法返回我的列视图，因为我还没有数据来正确设置它。

我曾尝试使用以下代码，但由于它位于主线程上，因此有时似乎会将其锁定。

```
...
NSDate *loopUntil = [NSDate dateWithTimeIntervalSinceNow:0.1];
while (!callDone && [[NSRunLoop currentRunLoop] runMode: NSDefaultRunLoopMode beforeDate:loopUntil])
    loopUntil = [NSDate dateWithTimeIntervalSinceNow:0.1];

return rslt; 
```

有没有其他人不得不处理这种情况？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:04:07.267

我没有尝试过，但我认为您应该能够创建一个空数组（或字典，无论您需要什么来构建数据），并且当应用程序第一次打开您的表格视图时，您的表格视图将为空（但我没有认为它会崩溃）。下载数据后，将其添加到该空数组并在表格视图上调用 reloadData。

# jsp - 如何使用 jstl 访问 java 类中描述的常量值

> ID：10629427
> 
> 赞同：3
> 
> 时间：2012-05-17T03:25:06.903
> 
> 标签：jsp, jstl, constants

我想获取在单独的 java 类 techcontants.java 中声明的 java 常量，以使用 jstl 显示在 jsp 中。

```
public class TechConstants {
   public static final String PART = "Part";
   public static final String DESCRIPTION = "Description";
   public static final String VERSION = "Version";
} 
```

在我的 view.jsp 中，我需要像这样使用 ustl 的值

```
<td class="Thd" width="14%">Part</td> 
```

（我试过这样`<c:outvalue="${TechConstants.PART}">`）

```
<td class="Thd" width="20%">Description</td>
<td class="Thd" width="10%">Version</td> 
```

我正在使用spring和jstl，

我是否需要从那里获取我的模型和视图控制器中的常量值，我必须将它传递给查看？

如果是这样，请用代码示例描述我在控制器中做什么，或者我可以使用 jstl 直接在 jsp 中获取常量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-22T12:35:46.383

您可以使用 JSP 表达式标签来做到这一点，请尝试使用以下代码。

```
<%=TechConstants.PART %> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-12-05T12:45:56.660

您可以访问绑定到表单的对象的属性。

```
<form:form method="POST" commandName="user"> 
```

您可以使用`${user.name}`

# apache - 如何将所有网址重定向到apache中的新域，除了一个

> ID：10629430
> 
> 赞同：4
> 
> 时间：2012-05-17T03:25:18.213
> 
> 标签：apache, .htaccess, redirect

我需要将一个站点上的所有内容重定向到一个新域，但一条路径除外。

所以 domain.com/anything 需要去 newdomain.com/anything。

但我不希望 domain.com/services/xml 重定向。

我尝试了很多条件，但没有任何效果。它总是最终重定向它，或者将它重定向到新域上的其他一些奇怪的路径。

这不起作用：

```
RewriteCond %{REQUEST_URI} !^/services/xml$
RewriteRule ^(.*)$ http://www.newdomain.com/$1 [L,R=301] 
```

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T13:51:53.607

多亏了我的谈话 Ansari 和托管公司的一些帮助，我想通了。问题似乎是 url 被重写为 index.php，然后又被重定向。所以：

```
 RewriteCond %{REQUEST_URI} !^/services/xmlrpc
  RewriteCond %{REQUEST_URI} !index\.php$ [NC]
  RewriteRule ^(.*)$ http://www.wikiweightscore.com/$1 [L,R=301]

  RewriteCond %{REQUEST_FILENAME} !-f 
  RewriteCond %{REQUEST_FILENAME} !-d 
  RewriteCond %{REQUEST_URI} !=/favicon.ico 
  RewriteRule ^(.*)$ index.php?q=$1 [QSA] 
```

这适用于我想要的确切用例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T03:27:36.217

那么试试这个：

```
RewriteCond %{REQUEST_URI} !^/services/xml
RewriteCond %{HTTP_HOST} .*
RewriteRule ^(.*)$ http://www.newdomain.com/$1 [L,R=301] 
```

# backbone.js - Backbone.js 使用单个视图呈现重置集合

> ID：10629435
> 
> 赞同：0
> 
> 时间：2012-05-17T03:26:13.033
> 
> 标签：backbone.js, backbone-views

我正在尝试使用使用重置属性的选择框从单个视图呈现过滤后的集合。第一个问题是选择框和渲染的内容必须都出现在同一个 div 中才能工作。这是正常的吗？第二个问题是，它仅显示过滤后的结果，而是将过滤后的集合附加到呈现内容的末尾而不是替换它。我知道在我的 ._each 函数中附加将不起作用，因为它只会将过滤后的项目附加到整个集合的结尾。下面是我的代码示例：

```
(function($) {

  var images = [
       { tags: "Fun", date : "April 3, 2012", location : 'Home', caption : 'Having fun with my lady'},
       { tags: "Chillin", date : "April 4, 2012", location : 'Home', caption : 'At the park with my lady'},
       { tags: "Professional", date : "April 5, 2012", location : 'Home', caption : 'At the crib with my lady'},
       { tags: "Education", date : "April 6, 2012", location : 'Home', caption : 'Having fun with my baby'},
       { tags: "Home", date : "April 3, 2012", location : 'Home', caption : 'Having fun with my lady'},
       { tags: "Professional", date : "April 4, 2012", location : 'Home', caption : 'At the park with my lady'},
       { tags: "Fun", date : "April 5, 2012", location : 'Home', caption : 'At the crib with my lady'},
       { tags: "Chillin", date : "April 6, 2012", location : 'Home', caption : 'Having fun with my baby'},
       { tags: "Fun", date : "April 3, 2012", location : 'Home', caption : 'Having fun with my lady'},
       { tags: "Education", date : "April 4, 2012", location : 'Home', caption : 'At the park with my lady'},
       { tags: "Personal", date : "April 5, 2012", location : 'Home', caption : 'At the crib with my lady'},
       { tags: "Personal", date : "April 6, 2012", location : 'Home', caption : 'Having a play date'}
    ];

var Item = Backbone.Model.extend({
    defaults : {
        photo : 'http://placehold.it/200x250'
    }
});

var Album = Backbone.Collection.extend({
    model : Item
});

var ItemView = Backbone.View.extend({
el : $('.content'),

   initialize : function() {
        this.collection = new Album(images);
        this.render();
        $('#filter').append(this.createSelect());
        this.on("change:filterType", this.filterByType);
        this.collection.on('reset', this.render, this);
    },
    template : $('#img_container').text(),
    render : function() {
        var tmpl = _.template(this.template);
        _.each(this.collection.models, function (item) {
           this.$el.append(tmpl(item.toJSON()));                   
        },this);
},

events: {
    "change #filter select" : "setFilter"
},

 getTypes: function () {
    return _.uniq(this.collection.pluck("tags"), false, function (tags) {
        return tags.toLowerCase();
        });
},

createSelect: function () {
    var filter = this.$el.find("#filter"),
        select = $("<select/>", {
            html: "<option>All</option>"
        });

    _.each(this.getTypes(), function (item) {
        var option = $("<option/>", {
            value: item.toLowerCase(),
            text: item.toLowerCase()
        }).appendTo(select);
    });
    return select;
},

setFilter: function (e) {
   this.filterType = e.currentTarget.value;
   this.trigger("change:filterType");
},

filterByType: function () {
    if (this.filterType === "all") {
        this.collection.reset(images);
    } else {
        this.collection.reset(images, { silent: true });
        var filterType = this.filterType,
            filtered = _.filter(this.collection.models, function (item) {
            return item.get("tags").toLowerCase() === filterType;   
        });   
       this.collection.reset(filtered);
    }
}

}); 

var i = new ItemView();

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:36:49.627

没有看到你的标记，很难确定，但我怀疑你的选择需要在同一个 div 中的原因是因为当你使用事件哈希在主干中绑定事件时，它使用它的*el*作为根元素事件委托。

至于为什么你的集合只是被附加而不是替换它，我没有看到你在任何地方清空当前内容，你应该在你的渲染方法的开头有一些类似`this.$el('.itemCnt').empty()`.

单独的一点，您可能会考虑为每个项目和一个对象缓存它们然后每次过滤器更改而不是重置您的集合时，您可以分离所有项目并重新附加过滤的元素而不重新生成它们的标记。

例如，类似的东西

```
var ItemView = Backbone.View.extend({
   el : $('.content'),
   _views: {},
   //...

   add: function(item) {
     var view = new ItemView({model: item});
     this._views[item.cid] = view;
   }

   render: function (filteredItems) {
      this.$el.find('.ItemCnt .item').detach();

    var frag = document.createDocumentFragment();

      _.each(filteredItems, function(item) {
        frag.appendChild(this._views[item.cid].el);
     }
       this.$el.find('.ItemCnt').append(frag);
   } 
```

# ios - NSData 异常 - “无法理解的存档”

> ID：10629438
> 
> 赞同：1
> 
> 时间：2012-05-17T03:26:31.287
> 
> 标签：ios, nsuserdefaults, nskeyedarchiver

所以我在尝试实现时遇到了一个异常，`NSKeyedUnarchiver`因为我试图用`NSUsersDefaults`. 因为我不断收到一个错误，说我有非属性，所以我决定将它们存档到`NSData`. 现在我收到此错误：“无法理解的存档”。

这是我归档的方式（我已经测试了所有对象都为空，但它们都不是）：

```
NSMutableArray *array = [[NSMutableArray alloc] initWithArray:anotherArray];
for (int i = 0; i < array.count; i++) {
    CustomObj *obj = [array objectAtIndex:i];
    NSData *newdata  = [NSKeyedArchiver archivedDataWithRootObject:obj];
    [array replaceObjectAtIndex:i withObject:newdata];
}
NSArray *newArray = [[NSArray alloc] initWithArray:array];
[coder setObject:newArray forKey:@"key"]; 
```

这是我取消归档的方式（再次测试所有内容是否为空）：

```
if (!arrayM) { arrayM = [[NSMutableArray alloc] init]; NSLog(@"initialized"); }
else {
    for (int i = 0; i < arrayM.count; i++) {
        NSData *data = [arrayM objectAtIndex:i];
        --> The exception happens here: CustomObj *obj  = [NSKeyedUnarchiver unarchiveObjectWithData:data];
        [arrayM replaceObjectAtIndex:i withObject:obj];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:51:09.287

您没有使用 NSKeyedArchiver 将其存档，那么您为什么希望能够使用 NSKeyedUnarchiver 来取回数据呢？你想这样做的方式是这样的。使您的自定义对象符合 NSCoding 协议，并实现其两种方法（编码和解码）。然后，您可以在自定义对象数组上使用 NSKeyedArchiver 存档。NSKeyedArchiver 将对每个对象及其包含的任何对象（如果它是一个集合）调用 encodeWithCoder。

**编辑：在数组**上调用 NSKeyedArchiver ，而不是每个对象。然后，当您取消归档时，再次将其取消归档到数组中。

# android - 将 Emacs TRAMP 与不提供 /bin/sh 的 ssh 服务器一起使用？

> ID：10629439
> 
> 赞同：9
> 
> 时间：2012-05-17T03:26:49.383
> 
> 标签：android, emacs, ssh, tramp

我正在尝试使用 Emacs TRAMP 在不提供的服务器上通过 ssh 访问文件`/bin/sh`，因此在尝试连接时出现以下错误：

```
env: can't execute '/bin/sh': No such file or directory 
```

有什么方法可以告诉 TRAMP 该服务器的远程外壳在哪里？（“服务器”是一个绑定的 Android 手机，所以请在 sh in `/system/bin/sh`。）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T03:41:37.507

另请参阅`tramp-methods`变量的文档字符串。这部分似乎值得注意：

> *   `tramp-remote-shell`
>     这指定要在远程主机上使用的 shell。这必须是类似 Bourne 的外壳。通常不需要将其设置为“/bin/sh”以外的任何值：Tramp 想要使用一个能够理解波浪号扩展的 shell，但它可以搜索它。另请注意，所有 Unixen 上都存在“/bin/sh”，对于您决定使用的值，这可能不是真的。你被警告了。

**编辑：**

所以这里有一种方法可以基于现有方法（本例中为“scpc”）创建新方法，然后为自定义方法提供不同的远程 shell：

```
(require 'tramp)
(let* ((base-method (cdr (assoc "scpc" tramp-methods)))
       (new-method (copy-tree base-method))
       (rshell (assq 'tramp-remote-shell new-method)))
  (setcdr rshell "/system/bin/sh")
  (add-to-list 'tramp-methods (cons "android" new-method))) 
```

请注意，在 Emacs 23 (Tramp 2.1.20) 中，此属性被命名为`tramp-remote-sh`. 在 Emacs 24 (Tramp 2.2.3-24.1) 中，它已更改为`tramp-remote-shell`.

我猜你可以默认为你指定的主机使用这个方法：

```
(add-to-list
 'tramp-default-method-alist
 (list "\\`myhost\\'" nil "android")) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T03:32:42.017

ssh 期望使用远程用户的登录 shell。如果您对服务器具有 root 访问权限，则可以更改 passwd 文件中的条目：

:blah:blah:user_name:blah:/path/to/shell

或者只是符号链接 /bin/sh 到它。

我不相信有任何方法可以从客户端改变这一点，但如果有的话，你需要告诉`ssh`，而不是 TRAMP。（您可以通过 ssh_config 文件执行此操作。）

编辑：我的立场是正确的。

# iphone - iPad启动图像和方向...再次

> ID：10629442
> 
> 赞同：0
> 
> 时间：2012-05-17T03:27:37.767
> 
> 标签：iphone, cocoa-touch, orientation

我知道在发布时有上百万个关于 iPad 定位的问题，因为我已经阅读了所有这些问题，但这是我不明白的事情。

几乎所有内容都假设 iPad 是纵向的……

但是...您可以提供横向启动图像以及是否会使用它。

因此，在某个地方，它知道该设备处于横向状态......但似乎没有任何地方可以确定在启动时是否使用了横向图像！

我试过了：

```
orientation = [UIDevice currentDevice].orientation;
orientation = [UIApplication sharedApplication].statusBarOrientation; 
```

他们总是说肖像……即使不是。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:20:27.977

这些是一些可以回答您问题的链接。1\. [Landscape Lauch](https://stackoverflow.com/questions/4436530/launching-app-in-landscape-orientation-causes-rotation-on-launch) 2\. [Second Link](https://stackoverflow.com/questions/2647786/landscape-mode-only-for-iphone-or-ipad) 3\. [Apple Developer Library](http://developer.apple.com/library/ios/#qa/qa1588/_index.html)

每个链接都有您想知道的适当信息。

# objective-c - 如何在 ARC 中复制对象

> ID：10629443
> 
> 赞同：0
> 
> 时间：2012-05-17T03:28:19.810
> 
> 标签：objective-c, automatic-ref-counting

现在ARC里没有copy属性了，我想复制一个对象怎么办？然后我写了一个测试代码：

测试.h

```
@property (strong, nonatomic) NSMutableString *str1;
@property (strong, nonatomic) NSMutableString *str2; 
```

测试.m

```
self.str1 = [[NSMutableString alloc] initWithString:@"Hello"];
self.str2 = [self.str1 copy];
[self.str2 appendString:@"World"];
NSLog(@"str1:%@,str2:%@",self.str1,self.str2); 
```

当我运行时，它崩溃了：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Attempt to mutate immutable object with appendString:' 
```

那么，我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T03:53:11.870

`copy` should always returns immutable copies of objects, and `mutableCopy` (if available) should always returns mutable objects, regardless of whether the receiver is mutable or immutable. This way, you can be sure that when you ask for a `copy` it *will* be immutable and when you ask for a `mutableCopy` it *will* be mutable.

This concept has been around for years, and is not specific to ARC. ARC simply handles the memory management of objects, not their mutability.

# ajax - Web Worker 中的 Ajax 限制

> ID：10629450
> 
> 赞同：2
> 
> 时间：2012-05-17T03:28:54.287
> 
> 标签：ajax, performance, html, xmlhttprequest, web-worker

我的 HTML5 应用程序使用网络工作者从画布上下文中分析图像的像素数据。一旦工作人员分析了数据，它就会向我的服务器发出 3 次 XHR 调用以更新我的模型。当我测试应用程序时，我能够像我尝试的那样启动和运行尽可能多的工作人员，并且每个工作人员只对服务器进行一次 XHR 回调。一切正常。

现在我尝试从一个工作人员发出三个异步调用，我遇到了问题。查看 Chrome 的开发者工具，我可以看到所有 3 个调用都被触发了，但它们都被取消了，除了最后一个。如果我使任何或所有调用异步，就会发生这种情况。但是，如果我使用计时器 (setTimeout) 将每个调用彼此相隔约 500 毫秒，它们都可以正常工作。

有任何想法吗？

简而言之，我的问题是：

**1.** 一个worker内部可以同时进行多少个ajax调用？

**2.** *为什么我的worker内部的ajax调用被取消了？*（**已解决**）

**3.** 与我手头的问题稍微无关，但是您可以在单个页面中启动的最大工人数是多少？一旦我知道我不会向它发送任何消息，我应该停止工人吗？

谢谢

**更新：**原来我解决了异步调用被取消的问题。问题是我创建了自己的简单 ajax 类以在 worker 内部使用，而不是为每个调用实例化它，而是使用该对象的相同实例。因此，当我在之前的调用之后通过它进行后续调用时，如果在进行新调用之前它没有返回，那么第一个调用将被取消。希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T23:12:27.383

我已经尝试了 6 个没有 setTimeouts 的 diff ajax 调用，它对我来说很好。

您在最新的 chrome/safari 浏览器中是否仍然遇到相同的错误？

可能是服务器行为。另外，你试过没有网络工作者吗？

# spring - Spring JMS Oracle AQ - 指定出队选项

> ID：10629452
> 
> 赞同：1
> 
> 时间：2012-05-17T03:29:08.960
> 
> 标签：spring, jms, oracle-aq

我正在将 Spring JMS 用于 Oracle AQ。如何指定出队选项？我想指定`consumer`名称和`dequeue_mode`选项。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2017-05-26T14:51:27.397

老问题，但这是一个 XML 配置示例。消费者名称属性称为“messageListener”。我不确定 dequeue_mode 是什么...我建议查看 AbstractPollingMessageListenerContainer 的所有可用属性的文档。

```
<bean id="myBeanId" class="org.springframework.jms.listener.DefaultMessageListenerContainer">
    <property name="connectionFactory" ref="myConnectionFactory"/>
    <property name="transactionManager" ref="myTransactionManager"/>
    <property name="destinationName" value="myDestinationName"/>
    <property name="messageListener" ref="myConsumer"/>
    <property name="concurrency" value="1-50"/>
    <property name="receiveTimeout" value="5000"/>
    <property name="idleTaskExecutionLimit" value="10"/>
    <property name="idleConsumerLimit" value="5"/>
    <property name="messageSelector" value="JMSType = 'mySelectorIfNeeded'"/>
    <property name="cacheLevelName" value="CACHE_CONSUMER"/>
    <property name="sessionTransacted" value="true"/>
</bean> 
```

# java - 如何将“santa maria”之类的字符串更改为“Santa Maria”？

> ID：10629456
> 
> 赞同：1
> 
> 时间：2012-05-17T03:29:39.227
> 
> 标签：java

我的程序正在运行，但不是以我想要的方式运行。这是我想要的输出：

```
C:\Documents and Settings\Joe King\My Documents\418.85A Java\Projects\Day 6>java Project3 nina pinta "santa maria"

The Nina is decreasing throttle!

    The Nina is ready to launch...

            but the throttle is down, increase throttle!

The Pinta is lowering the main!

    The Pinta is ready to launch...

            but the sail is down, hoist the main!

The Santa Maria is hoisting the main!

    The Santa Maria is ready to launch...

            the sail is up, ahead full!

(press ENTER to exit) 
```

如您所见，Santa Maria 已大写。这是我得到的输出：

```
C:\Documents and Settings\Joe King\My Documents\418.85A Java\Projects\Day 6>java Project3 nina pinta "santa maria"

The Nina is decreasing throttle!

    The Nina is ready to launch...

            but the throttle is down, increase throttle!

The Pinta is lowering the main!

    The Pinta is ready to launch...

            but the sail is down, hoist the main!

The santa maria is hoisting the main!

    The santa maria is ready to launch...

            the sail is up, ahead full!

(press ENTER to exit) 
```

我的代码无法将 Santa Maria 等名称字符串大写。这是我的代码：

```
class Project3{

public static void main(String[] args){

    Boat[] boatArray;
    String result = " "; 
    char firstChar;
    char firstLetter;
    char secondLetter;
    int i;

    boatArray = new Boat[args.length];

    if(args.length > 0){

        for(i = 0 ; i < args.length ; i++){

            String delimiters = "[ ]";
            int limit = -1;

            String[]tokens = args[i].split(delimiters, limit);

            for( int k = 0 ; k < tokens.length ; ++k ){

                if( tokens[k].length() > 1 ){

                    tokens[k] = tokens[k].trim();

                }else{

                    tokens[k] = " ";

                }

                firstChar = tokens[k].charAt(0);

                if(firstChar == ' '){

                    break;

                }else{

                    if(Character.isUpperCase(firstChar)){

                        break;

                    }else{

                        firstChar = Character.toUpperCase(firstChar);
                        char[] tokenArray = tokens[k].toCharArray();                            
                        String text = new String(tokenArray, 1, (tokenArray.length - 1) );                          
                        tokens[k] = firstChar + text;

                    }

                    result = result + tokens[k];

                    if( k != tokens.length - 1 ){

                        break;

                    }else{

                        result = result.trim();
                        args[i] = result;
                        result = " ";

                    }
                }
            }       

            firstLetter = args[i].charAt(0);

            if((firstLetter == 'B') || (firstLetter == 'C') || (firstLetter == 'N')){

                boatArray[i] = new RaceBoat();
                boatArray[i].christenBoat(args[i]);

            }else{

                boatArray[i] = new SailBoat();
                boatArray[i].christenBoat(args[i]);

            }

        }

        System.out.println("\n");

        for(i = 0 ; i < args.length ; i++){         

            secondLetter = Character.toUpperCase(args[i].charAt(1));

            if((secondLetter == 'A') || (secondLetter == 'E')){

                boatArray[i].increaseSpeed();
                boatArray[i].goFast();

            }else{

                boatArray[i].decreaseSpeed();
                boatArray[i].goSlow();

            }           

            boatArray[i].launchBoat();
            boatArray[i].whatIsBoatState();

        }

    }else{

        System.out.println("\n\nArgh!... you forgot to enter ship names scalawag!" +
            "\n\n\n\tPlease try again!");

    }

    System.out.println("\n\n(press ENTER to exit)\n\n");

    try{

        System.in.read();

    } catch(IOException e){

        return;
    }
} 
```

}

认为问题可能是解析 santa maria 导致以下问题：

```
' santa '

' '

' maria ' 
```

我认为这段代码会修剪它：

```
if( tokens[k].length() > 1 ){

                    tokens[k] = tokens[k].trim();

                }else{

                    tokens[k] = " ";

                } 
```

但显然不是。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:32:49.957

看看 Commons-Lang`StringUtils.capitalize`函数。

[资本化](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringUtils.html#capitalize%28java.lang.String%29)

如果您想了解专业人士的制作方法，您可以获得有用的源代码 :)

这可能会使您的话大写。

```
StringBuilder b = new StringBuilder();
String[] parts = originalWord.split(" ");
for(String part : parts) {
    String capitalized = part.substring(0, 1).toUppercase() + part.substring(1);
    b.append(capitalized).append(" ");
}
//and then you can remove the last space if it is your taste.
return b.toString(); 
```

它缺乏基本的检查，但它会做:)。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:38:47.910

> 我认为这段代码会修剪它......

实际上，该代码还将用空格替换任何一个字母的单词。

另一个问题是您使用的正则表达式。您想将一个或多个空格视为一个分隔符。请参阅 javadocs 和/或您的教科书和讲义，了解如何编写正则表达式来做到这一点。（注意：如果你做对了，就不需要修剪空白。Split 会为你做的。）

足够的提示:-)

* * *

> 我也想过这个问题，但大多数船名都没有英文字母。

您不应该将这样的假设硬连接到您的代码中。尤其是当你不需要的时候。硬性假设导致代码脆弱；[即，当您的假设有时](http://en.wikipedia.org/wiki/USS_Robert_E._Lee_%28SSBN-601%29)被证明不正确时，代码会中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:41:27.343

你的问题是你正在使用break；在许多地方，这将终止循环，因此根本不会处理后面的单词。可能您只想跳过当前单词/参数，因此您应该使用 continue 它将使用下一个索引继续 for 循环。

您可以使用调试器或添加一些中间 printf 语句来更好地理解代码流。

# php - 777 替代 PHP

> ID：10629457
> 
> 赞同：2
> 
> 时间：2012-05-17T03:29:59.547
> 
> 标签：php, permissions

我正在使用 imagejpeg 将图片上传到文件夹.. imagejpeg 功能仅在文件夹具有 777 权限时才有效，否则会失败。由于 777 权限是完全不安全的，我想知道我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:44:52.260

PHP 脚本以您的网络服务器运行的任何用户身份运行，或者如果您使用的是网络托管公司，它可能以您自己的用户名运行。你是对的，777 是不安全的，因此正如 zerkms 提到的，将其更改为 755 并确保它由运行脚本的正确用户名拥有。

您可以通过查看创建这些文件的用户名来找到该用户名，而您是在未经许可的情况下运行的`777`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:34:50.797

请您的系统管理员将 PHP 处理程序从 dso 更改为 suphp。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:34:28.733

记住; 如果您将 PHP 处理程序设置为 suPHP，那么您的 PHP 脚本很可能对您的所有文件拥有完全权限。

然后，您可以将文件夹和文件保留为 755 而不是 777，这将阻止同一服务器上的其他用户访问和编辑您的文件。但是，缺点是一个 php shell 可以控制您的整个帐户目录以及其中的所有内容。确保您的脚本没有任何 RFI 漏洞或任何可能允许坏人执行 php 命令的漏洞。

# c++ - 点运算符可以将表达式作为右操作数吗？为什么？

> ID：10629459
> 
> 赞同：2
> 
> 时间：2012-05-17T03:30:38.887
> 
> 标签：c++

以下陈述在任何情况下都合法吗？

```
s.*p = 5; 
```

那么，
点运算符可以有一个表达式作为它的右操作数吗？为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T03:33:25.360

`p`是**[指向成员](http://msdn.microsoft.com/en-us/library/k8336763.aspx)**`s`的指针，您可以使用运算符通过类对象访问指向的成员`.*`。

# r - R quantreg - 在协变量的每个级别上获得效果

> ID：10629463
> 
> 赞同：1
> 
> 时间：2012-05-17T03:31:12.330
> 
> 标签：r, quantreg

我有一个在`quantreg`R 包中运行的分位数回归，如下所示：

```
read19 <- rq(comppercentile~q19*mothered+ethnicity+gender,tau=.5,data=medmodel) 
```

q19 是定量的，mothered 是一个 2 水平因子。

一旦我在 q19 和 Mothered 之间获得了显着的交互作用，我如何获得 q19 在每个 Mothered 级别上的效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:43:11.203

`-1`在公式末尾添加：

```
read19 <- rq(comppercentile~q19*mothered+ethnicity+gender -1, tau=.5, data=medmodel) 
```

使用您当前的公式，您*将*获得对基本“母亲”水平的估计，但它被标记为“拦截”。

# php - 清除具有重置值的 HTML 表单

> ID：10629464
> 
> 赞同：1
> 
> 时间：2012-05-17T03:31:16.183
> 
> 标签：php, html, forms

我有一个具有特定输入文本的表单。他们都有自己的重置值..例如...

```
<input type="text" 
       name="<?php echo $row['FieldName'];?>"
       id="<?php echo $row['FieldName'];?>" 
       class="required" 
       style="font:12px Verdana ; width:250px;" 
       value="<?php echo $row2[$nameROW]?>" />
<?php } 
```

因此，当我使用正常的 RESET 功能时..它不会清除我的表格。因为它的重置值已经被设置...

那么我怎样才能完全清除不重置表格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:51:51.823

这是一个易于使用（纯 js）的函数，您可以使用它通过 id 或名称重置任何表单：

```
// License: WTFPL
function clearForm(id)
{
    // find form by its id or name
    var form = document.getElementById(id) || document[id] || id;

    // cycle through elements
    for (var i = 0, item; item = form.elements[i]; ++i) {
        switch (item.type) {
            case 'select-one':
                item.selectedIndex = 0;
                break;

            case 'select-multiple':
                for (var j = 0, option; option = item.options[j]; ++j) {
                    option.selected = false;
                }
                break;

            case 'checkbox':
            case 'radio':
                item.checked = false;
                break;

            default:
                item.value = '';
        }
    }​​​​​​
} 
```

调用它：

```
clearForm('id or name of your form'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:39:45.460

如果您想避免字段被重置为其初始值，您需要实际循环遍历所有输入字段、文本字段和选择元素，将它们的值单独设置为空字符串，将选中的属性设置为 false 等。

您可以在 http://www.electrictoolbox.com/javascript-clear-form/ 上查看在线示例，或者在[http://www.electrictoolbox.com/javascript-clear-form/](http://www.electrictoolbox.com/javascript-clear-form/)上查看jQuery 解决方案（更简洁）的外观[：/ /www.electrictoolbox.com/jquery-clear-form/](http://www.electrictoolbox.com/jquery-clear-form/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T03:47:34.027

乔纳森是正确的，但它是不完整的。这是完整的解决方案：

```
for ( i = 0; i < document.myForm.elements.length; i++ )
  document.myForm.elements[i].fieldName.value = ""; 
```

如果您需要进一步的帮助，请告诉我们。这将遍历表单中的每个项目，然后将它们清空。如果您需要更多帮助，请告诉我们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T03:48:25.310

使用以下 jQuery 将指定字段设置为空白：

```
$("#btn_reset").click(function(){
     $("input:text[id=xxx]").val("");
}); 
```

使用以下 jQuery 将所有字段值设置为空白：

```
$("#btn_reset").click(function(){
    $(":input").val("");
}); 
```

在上述示例中，#btn_reset 是重置按钮的 ID。您还需要将上述脚本放在您页面的正常 $(document).ready() 函数处理程序中的脚本标记内。当然，以上要求您首先在页面顶部包含 jQuery 库。如果您有任何问题，请告诉我。

以下是完整的 HTML 文件：

```
<HTML>
    <HEAD>
        <TITLE></TITLE>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.pack.js"></script>
    <script type="text/javascript" language="javascript">
        $(document).ready(function() {
            $("#btn_reset").click(function() {
                $("input:text[id=xxx]").val("");
            });
        });
    </script>
    </HEAD>
    <BODY>
        <form>
            <input type="text" name="xxx" id="xxx" value="default"  />
            <input type="button" value="Reset" id="btn_reset" />
        </form>
    </BODY>
</HTML> 
```

请注意，您需要将按钮类型从重置更改为按钮，否则在 jQuery 设置值之后，重置按钮行为将再次将值设置为我们不想要的默认值。

# java - Spring MVC 控制器 JUnit：无法加载应用程序上下文

> ID：10629466
> 
> 赞同：0
> 
> 时间：2012-05-17T03:31:48.257
> 
> 标签：java, spring-mvc, junit, controller, spring-el

```
@RunWith(SpringJUnit4ClassRunner.class)

@ContextConfiguration({"/web-application-config.xml"}) 
```

我的项目由 4 个模块/层组成。我无法使这些注释与我的 Spring MVC 控制器的 JUnit 测试一起使用，但在其他层中，它就像一个魅力。

我研究了 spring jar 不兼容或配置错误的可能性，但我尝试在这些层中编辑 pom.xml，仍然会产生相同的错误。

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:308)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:301)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:303)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:46)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:180)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:41)
    at org.junit.runners.ParentRunner$1.evaluate(ParentRunner.java:173)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:220)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0': Initialization of bean failed; nested exception is java.lang.NoSuchFieldError: NULL
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:527)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:626)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:407)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:84)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    ... 24 more
Caused by: java.lang.NoSuchFieldError: NULL
    at org.springframework.expression.TypedValue.<clinit>(TypedValue.java:32)
    at org.springframework.expression.spel.support.StandardEvaluationContext.setRootObject(StandardEvaluationContext.java:85)
    at org.springframework.expression.spel.support.StandardEvaluationContext.<init>(StandardEvaluationContext.java:74)
    at org.springframework.context.expression.StandardBeanExpressionResolver.evaluate(StandardBeanExpressionResolver.java:124)
    at org.springframework.beans.factory.support.AbstractBeanFactory.evaluateBeanDefinitionString(AbstractBeanFactory.java:1287)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.evaluate(BeanDefinitionValueResolver.java:224)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:200)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1325)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1086)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    ... 35 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:12:52.790

尝试以这种方式配置即

给出由双反斜杠分隔的绝对路径

```
 For example
 @RunWith(SpringJUnit4ClassRunner.class)
 @ContextConfiguration(locations = 
{ 
    "file:D:\\projectName\\webtier\\webroot\\WEB-INF\\web-application-config.xml",

}
 ) 
```

# c# - 如何在 ios 上生成日历图像

> ID：10629467
> 
> 赞同：-1
> 
> 时间：2012-05-17T03:31:59.667
> 
> 标签：c#, .net

在 .net/c# 中图像更改为今天的日期

希望生成用于日历图标的图像

希望这不是太难？？

更新 - 希望为桌面/WPF 执行此操作，但可以采用其他 .net 代码并根据需要进行更改

对不起打扰了，我做商业应用，不擅长图形！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:42:12.340

**编辑**
此答案是在 OP 解释所需平台之前给出的。我选择保留它，因为它有助于其他希望在 WEB 世界中实现相同目标的人。

* * *

~~由于OP没有说这是针对什么平台的~~，我将抛出一个WEB解决方案。

就我个人而言，我讨厌在服务器上构建任何可以卸载到客户端的东西。这是实现所要求的CSS3方法。

```
<style>
/* Calendar */

.calendar {
    margin: 10px;
    background: #fff;
    width:176px;
    height:176px;
}

.calendar .header {
    -webkit-border-top-left-radius: 30px;
    -webkit-border-top-right-radius: 30px;
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#EEC4C4), to(#521B1C), color-stop(.92,#da3434),color-stop(.1,#ef9fa5));
    height: 50px;
    width: 176px;
    -webkit-box-shadow: inset 0px 2px 1px rgba(255, 255, 255, 0.4);
}

.calendar p.weekday {
    color: #fff;
    font-weight: bold;
    text-shadow: 0px 1px 1px rgba(0, 0, 0, 0.7);
    width: 176px;
    line-height: 50px;
    font-size: 25px;
    text-align: center;
}

.calendar p.daynumber {
    color: #000;
    font-weight: bold;
    text-shadow: 0px 1px 0px #fff;
    width: 176px;
    line-height: 126px;
    font-size: 130px;
    text-align: center;
}

.calendar .paper {
    -webkit-border-bottom-left-radius: 30px;
    -webkit-border-bottom-right-radius: 30px;
    background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#7A7A7A), to(#EDEDED), color-stop(.05,#BFBFBF),color-stop(.2,#E3E3E3));
    height: 126px;
    width: 176px;
}​
</style>

<div class="calendar icon">
        <div class="header">
            <p class="weekday">
                Monday
            </p>
        </div>
        <div class="paper">
            <p class="daynumber">
                7
            </p>
        </div>
</div> 
```

## 笔记：

您仍然需要退回到 PNG 文件（最好是 sprite）并在任何非 webkit 浏览器中覆盖工作日和日期。

## 免责声明：

这些代码都不是我的，可以在
[http://graphicpeel.com/cssiosicons找到](http://graphicpeel.com/cssiosicons)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:21:16.377

这不准确，但很接近：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:System="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <DataTemplate x:Key="CalendarTemplate">
            <Grid Width="220" Height="220">
                <Grid.Effect>
                    <DropShadowEffect Opacity="0.515" ShadowDepth="8" Direction="278" BlurRadius="28"/>
                </Grid.Effect>
                <Grid.RowDefinitions>
                    <RowDefinition Height="64"/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <Border Background="Red" CornerRadius="25,25,0,0" BorderBrush="Gray" BorderThickness="1">
                    <TextBlock Text="{Binding DayOfWeek}" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="White" FontSize="32" FontFamily="Arial"/>
                </Border>
                <Border Grid.Row="1" Background="White" BorderBrush="Gray" BorderThickness="1" CornerRadius="0,0,25,25">
                    <TextBlock Text="{Binding Day}" HorizontalAlignment="Center" VerticalAlignment="Center" FontFamily="Arial" FontSize="140" FontWeight="Bold"/>
                </Border>
            </Grid>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <ContentControl Content="{Binding Source={x:Static System:DateTime.Now}}" ContentTemplate="{DynamicResource CalendarTemplate}"/>
    </Grid>
</Window> 
```

![在此处输入图像描述](../Images/0491a1e4ad5acfd81fd166023945a28f.png)

# delphi - delphi 7函数结果可以是未定义的

> ID：10629469
> 
> 赞同：0
> 
> 时间：2012-05-17T03:32:27.680
> 
> 标签：delphi, delphi-7, undefined

我写了这个函数，它比较字符串，如果匹配则返回 TRUE，如果不匹配则返回 FALSE。

唯一的问题是，当我编译时，我得到一个错误，说结果可能是未定义的。我知道这不是问题，因为在这种特殊情况下只有两种可能的结果，但我是一个完美主义者，我想变得更好。你们中的任何人都可以启发我吗？

```
function filterUPC(upc: String): Boolean; 
var
  i, pos1: integer;
  Plano: TStringList;
  upcPlano: String;
begin
  Plano := TStringList.Create;
  if (fmMain.lblPlanook.Visible) and 
     not (fmMain.lblPlanook.Caption = 'INCOMPATIBLE') then
  begin
    Plano.LoadFromFile(fmMain.ebPlano.Text);
    for i := 0 to Plano.Count - 1 do
    begin
      pos1:=AnsiPos(';', Plano[i]);
      upcPlano := AnsiMidStr(Plano[i], pos1 + 1, 12);
      if (upc = upcPlano) then
      begin
        Result := TRUE;
        Break;
      end
      else if (i = Plano.Count - 1) then
      begin
        Result := FALSE;
      end;
    end;
  end
  else
  begin
    Result := FALSE;
  end;
  Plano.Free;
end; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T03:49:42.810

`Plano`如果为空，您的结果是未定义的。在这种情况下，for 循环永远不会执行并且`Result`永远不会被设置。

此外，您真的应该将 TStringList create/free 包装在 try/finally 中（因为您是完美主义者；）

这是我要做的：

```
function filterUPC(upc: String): Boolean;
var
  i, pos1: integer;
  Plano: TStringList;
  upcPlano: String;
begin
  Result := FALSE;
  Plano := TStringList.Create;
  try
    if (fmMain.lblPlanook.Visible) and (fmMain.lblPlanook.Caption <> 'INCOMPATIBLE') then
    begin
      Plano.LoadFromFile(fmMain.ebPlano.Text);
      for i := 0 to Plano.Count -1 do
      begin
        pos1 := AnsiPos(';', Plano[i]);
        upcPlano := AnsiMidStr(Plano[i], pos1 + 1, 12);
        if (upc = upcPlano) then
        begin
          Result := TRUE;
          Break;
        end;
      end;
    end
  finally
    Plano.Free;
  end;
end; 
```

I've added `Result:=FALSE;` to the top, and removed the `else` checks. The try/finally guarantees that Plano will be freed, even if an exception is raised.

# ruby-on-rails - 为什么 Selenium 浏览器测试在我的 Cucumber 场景中恢复到开发数据库？

> ID：10629475
> 
> 赞同：0
> 
> 时间：2012-05-17T03:33:29.853
> 
> 标签：ruby-on-rails, cucumber

我的 Cucumber 场景用于测试来自第三方提供商的身份验证。发生的情况是，当在我的注册页面上单击 facebook 连接按钮时，重定向会转到 Facebook，当凭据由 Facebook 授权时，重定向会返回到我的网站。

在我的 selenium 测试中，它使用重定向的开发数据库。我知道这一点，因为它最终出现在一个页面上，其中有数据，因为测试数据库是空的，所以不应该出现这种情况。

功能/身份验证。功能：

```
 @javascript
  Scenario: Signup through Facebook
    When I am on the signup page
    And I click the Facebook authentication link
    And I fill and submit the Facebook form
    Then I should be on the Add additional information page 
```

这`I should be on the Add additional information page`一步失败了，因为我从来没有到达那里。这意味着 facebook 用户存在一个数据行，这意味着它使用开发数据库。有没有我缺少的设置？

功能/支持/env.rb

```
require 'cucumber/rails'

ENV["RAILS_ENV"] ||= 'test'
require File.expand_path(File.dirname(__FILE__) + '/../../config/environment')
Capybara.default_selector = :css
Capybara.javascript_driver = :webkit
Capybara.app_host = "http://localhost:3000"

# factory_girl Factory definitions
Dir[(Rails.root + "spec/factories/**/*.rb").to_s].each {|factory| require factory}

ActionController::Base.allow_rescue = false

Cucumber::Rails::Database.javascript_strategy = :truncation
Cucumber::Rails::World.use_transactional_fixtures = true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:51:56.867

删除`Capybara.app_host = "http://localhost:3000"` 您正在开发环境中运行服务器并让 Capybara 使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-31T07:01:04.690

如果这是 facebook 回调的必要性，那么请确保您的开发服务器正在测试环境中运行

```
 Capybara.app_host = 'http://localhost:3000'
   Capybara.always_include_port = false 
```

使用

```
rails s --environment=test 
```

# java - 数组未在 Java/Android 中正确插入数据

> ID：10629480
> 
> 赞同：1
> 
> 时间：2012-05-17T03:34:03.510
> 
> 标签：java, android, arrays, loops

这是我的一个方法：

```
 public double getCombinedAprThisMonth() {
    Cursor c = database.rawQuery("SELECT *  FROM debt;", null);
    double totalMonthlyFee = 0;
    double SingleAprRate = 0;
    double[] storeFees;
    int rows = c.getCount();
    storeFees = new double[c.getCount()];

    for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        for (int i = 0; i < rows; i++) {
            String BalColumn = c.getString(c
                    .getColumnIndex("debt_total"));
            String AprColumn = c.getString(c.getColumnIndex("apr"));
            double aprColumn = Double.valueOf(BalColumn);
            double balColumn = Double.valueOf(AprColumn);

            SingleAprRate = (((aprColumn / 100) / 12) * balColumn);
            storeFees[i++] = SingleAprRate; 

        }

    }
    for(double i : storeFees) {
        totalMonthlyFee += i;
    }

    c.close();
    return totalMonthlyFee;
} 
```

有三个记录，所以应该发生三个循环。totalMonthlyFee 返回为 90。但是，数据是 8.33、45 和 45。我试图得到总和（98.33 应该是正确的，但我得到的是 90？）。有人看到这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:39:12.073

再想一想，如果我了解您在做什么，我认为您根本不需要内部循环。也许试试这个...

```
int j = 0;
for (c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {
        String BalColumn = c.getString(c
                .getColumnIndex("debt_total"));
        String AprColumn = c.getString(c.getColumnIndex("apr"));
        double aprColumn = Double.valueOf(BalColumn);
        double balColumn = Double.valueOf(AprColumn);

        SingleAprRate = (((aprColumn / 100) / 12) * balColumn);
        storeFees[j++] = SingleAprRate; 

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:46:59.367

当您已经将 i 作为循环的一部分递增时，不要在循环体中递增它。

# entity-framework - 即使我修改了实体的名称，如何在 EF 中获取实体的真实表名

> ID：10629481
> 
> 赞同：1
> 
> 时间：2012-05-17T03:34:04.680
> 
> 标签：entity-framework, entity-framework-4

即使我修改了实体的名称，如何在 EF 中获取实体的真实表名。我想扩展一个批量删除功能。</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:56:51.970

我认为这样的事情应该有效：

```
string GetTableName()
{
    Type t = this.GetType();
    var tableAttributes = t.GetCustomAttributes(typeof(TableAttribute), true);
    if (tableAttributes.Length == 0)
        return t.Name;
    else
        return ((TableAttribute)tableAttributes[0]).Name;
} 
```

基本上，如果该类被标记为[TableAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.tableattribute(v=vs.110).aspx)，则可以从中获取真实的表名。如果未标记，则 EF 的默认设置是使用与类相同的名称。

# c - 以随机顺序打印平衡 BST 的最佳方法？

> ID：10629482
> 
> 赞同：2
> 
> 时间：2012-05-17T03:34:09.097
> 
> 标签：c, binary-search-tree, tree-traversal, random-access, avl-tree

如果这看起来像是一个随机问题，我很抱歉，但我有一个包含超过 100,000 个名称/值对的数据库（如果你愿意，可以称它们为高分），存储在 AVL 风格的平衡二叉搜索树中。大多数时候，为了列出分数，我使用中序遍历或逆序遍历来打印 BST，但今天我遇到了以随机（或伪随机）顺序打印树的需求。是否有一些公认的或最佳的方式来做到这一点：只访问每个节点一次，但以不可预测的方式？

PS——我考虑过广度优先遍历，但由于它总是以同样的方式发生，它并不是真正随机的。必须有一些聪明的方法，或者一些理想的面试答案，因为这似乎是一个普遍的问题；除了将节点标记为已访问或创建外部跟踪数据结构之外，我还没有想出任何真正聪明的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:38:50.953

我不知道为什么这个问题的答案不仅仅是采用 BST，将其线性化，然后打印出来。我想您在这里担心的是线性化这样的数据结构可能会占用大量内存。如果是这种情况，您总是可以挑选出树的*碎片*，将它们线性化，然后跳来跳去。随机遍历指针并希望能够正常工作的排序是一个坏主意：你总是会在寻找最后一个节点时搞砸。如果你有一棵*完整*的二叉树，你总是可以提出数字并从根开始（本质上，你可以从树的完整性属性中免费获得线性化）。

编辑：

我没有得到应有的了解，因为我最近发现了这篇文章，虽然它是基于功能实现的，但它可能对你有用。我还没有全部阅读，所以我不知道它是如何迭代所有内容的，但是如果你只是想得到一个节点，那么你可以使用这个..

[http://okmij.org/ftp/Algorithms.html#random-tree-node](http://okmij.org/ftp/Algorithms.html#random-tree-node)

# ruby - Ruby：把一个类当作一个数字？

> ID：10629485
> 
> 赞同：1
> 
> 时间：2012-05-17T03:34:16.407
> 
> 标签：ruby

我想在做一些数学运算时将罗马数字与阿拉伯数字混合。

我会为每个符号定义一些类

```
第一类
结尾

第五类
结尾

X 级
结尾

```

现在我希望能够说类似的话

```
5 + V # 结果为 10
X + 12 # 结果为 22

```

但我不确定从哪里开始。
我必须定义一个方法来告诉 ruby​​ 是如何`5 + V`工作的，给每个类一个值，当我说

```
一世

```

我应该得到值 1。

我应该看看什么样的方法可以让我将`X`其视为数字 10？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T03:39:11.610

对我来说似乎很简单：

```
V = 5
V + 1 #=> 6 
```

如果您想将结果显示为罗马数字，我将使用以下方法扩展`Fixnum`该类`to_roman`：

```
class Fixnum
  def to_roman
    # I'll leave the implementation up to you
  end
end 
```

有了这个，你可以这样做：

```
10.to_roman #=> "X" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:38:52.463

您可以覆盖 roman 类中的 + 运算符，这样它适用于 X + 12，但不适用于 12 + X。请参阅此博客文章：[http://strugglingwithruby.blogspot.ca/2010/04/operator-overloading。 html](http://strugglingwithruby.blogspot.ca/2010/04/operator-overloading.html)获取更多信息

看

> 该定义不可交换，即尝试执行 3 + a 将失败。要使其正常工作，您需要覆盖 Integer 中的加法方法 - 我认为这不是一个好主意。

# cordova - ios Cordova 1.7.0 抓拍上传照片示例

> ID：10629489
> 
> 赞同：1
> 
> 时间：2012-05-17T03:34:50.180
> 
> 标签：cordova

我正在尝试连接照片以上传到服务器..没有cordova 1.7.0示例..只是尝试一下，但它不起作用。我的错误是.. wait_fences：未能收到回复：10004003。

```
function capturePhoto() {
  // Take picture using device camera and retrieve image as base64-encoded string
  navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 50,
    destinationType: destinationType.DATA_URL });
}

// A button will call this function
//
function getPhoto(source) {
  // Retrieve image file location from specified source
  navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 50, 
    destinationType: destinationType.FILE_URI,
    sourceType: source });
}

 function onSuccess(imageData) { 
 var image = document.getElementById('myImage');
 image.src = "data:image/jpeg;base64," + imageData;
 $.post('http://site.com/api/upload.php', {data:imageData});
 }

<?php 

if ($_REQUEST['image']) {

// convert the image data from base64
$imgData = base64_decode($_REQUEST['image']);

// set the image paths
$file = '/api/' . md5(date('Ymdgisu')) . '.jpg';
$url = 'http://www.site.com' . $file; 

// delete the image if it already exists
if (file_exists($file)) { unlink($file); }

// write the imgData to the file
$fp = fopen($file, 'w');
fwrite($fp, $imgData);
fclose($fp);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T16:51:56.250

```
try this one if its helpful to you.

$image = $_REQUEST['image'];
$name = date('Ymdgisu') . '.jpg';
base64_decode_image($image, $name);

function base64_decode_image($image, $name){
    if ($image){
        $new_file = fopen("/api/" . $name, "x");
        fwrite($new_file, base64_decode($image));
        fclose($new_file);
        //echo base64_decode($image);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:25:30.340

我想你可以这样使用。

`navigator.camera.getPicture(onSuccess, onFail, { quality: 50,` `destinationType: Camera.DestinationType.DATA_URL` `});`

`function onSuccess(imageData) {`
`//var image = document.getElementById('myImage');`
`//image.src = "data:image/jpeg;base64," + imageData;`
`$.post('http://www.site.com/api/upload.php', {data:imageData});`
`}`

`function onFail(message) {`
`alert('Failed because: ' + message);`
`}`

这里的 onSuccess 函数返回 base64 编码图像字符串，您可以将其传递给 upload.php 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-18T01:17:08.230

编写以下代码以使用 Cordova 的相机和文件传输插件上传照片。在 iOS 上运行，并假设它在 PhoneGap / Cordova 支持的所有移动浏览器上运行。

Cordova 照片上传示例：
[cordova 文件传输插件在 ios 模拟器中不起作用](https://stackoverflow.com/questions/31017152/cordova-file-transfer-plugin-not-working-in-ios-simulator/37906904#37906904)

* * *

Cordova 的文件传输插件 ( [https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file-transfer/index.html](https://cordova.apache.org/docs/en/latest/reference/cordova-plugin-file-transfer/index.html) ) 支持二进制 (FILE_URI) 或 base64 (DATA_URI) 上传。

传统上，文件（如照片）以二进制形式保存到磁盘，然后以 mime 类型`multipart/form-data`或`application/octet-stream`.

在 base64 中，您的高分辨率照片会保存到浏览器缓存中，这可能会导致内存溢出，因为浏览器旨在链接到高分辨率图像而不是缓存它们。此外，base64 文件比二进制文件大 37%，所以这也无济于事。

**TL;博士;**

1.  安装 Cordova 相机插件和 Cordova 文件传输插件
    `> cordova plugin add cordova-plugin-camera --save;`
    `> cordova plugin add cordova-plugin-file-transfer --save;`

2.  将相机选项设置为 FILE_URI

    ```
    navigator.camera.getPicture(success, error, {
      destinationType: destinationType.FILE_URI
    }); 
    ```

3.  使用 Cordova 的 Transfer File 插件上传照片

    ```
    var request = new FileTransfer();
    var options = new FileTransferOptions();
    request.upload(fileUri, success, error, options); 
    ```

# ruby - 将实体添加到实体集合？

> ID：10629496
> 
> 赞同：0
> 
> 时间：2012-05-17T03:36:29.993
> 
> 标签：ruby, sketchup

[https://developers.google.com/sketchup/docs/ourdoc/entities](https://developers.google.com/sketchup/docs/ourdoc/entities)

我想将实体数组添加到实体集合中，但是实体集合（如您在参考资料中所见）要求我按类型添加它们，即。实体.add_edge()。对混合类型数组执行此操作的最佳方法是什么？

这是一个片段-倒数第二行无效（通用 .add 不存在）

```
layers.each do |layer|
    layerEnts = []
    entities.each { |e| layerEnts << e if layer == (e.layer) }
    layerGroup = entities.add_group
    layerGroup.name = layer.name
    layerGroup.entities.add(layerEnts)
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T11:01:35.837

添加组时，您*可以*指定要添加到该组的一组现有实体。

```
layers.each do |layer|
  layerEnts = []
  entities.each { |e| layerEnts << e if layer == (e.layer) }
  layerGroup = entities.add_group(layerEnts)
  layerGroup.name = layer.name
end 
```

但**请注意**！如果操作不正确，在这样的上下文之间移动实体很容易崩溃 - 而且操作不正确很容易 - SU 在这里没有做太多的保护。

仅使用`entities.add_group(ents)`when和are 中`entities`的实体。`model.active_entities``ents``model.active_entities`

而且，我在这里不是 100% 确定的，如果您尝试在不添加边缘的情况下对面进行分组，则可能会出现问题。（这需要测试。）

如果您的插件创建了您想要分组的几何图形，那么您最好将它们直接添加到目标组 - 而不是将它们添加到一个上下文中，然后再分组。它避免了许多潜在的问题和崩溃——而且速度更快。

如果您描述了插件或功能的更抽象目的，则答案可能完全不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:03:15.590

[**您可以使用send**](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)以动态方式调用方法[](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)

 **假设您可以获得执行`layer.type`此操作的类型应该可以解决您的问题。

```
layerEnts.each do |l|
  type = l.typename.downcase
  layerGroup.entities.send("add_#{type}".to_sym, l)
end 
```

**更新：**仅阅读文档似乎实际上有一种获取类型的方法，它是 typename 并且似乎是骆驼大小写，所以我们需要将其小写。

[https://developers.google.com/sketchup/docs/ourdoc/entity#typename](https://developers.google.com/sketchup/docs/ourdoc/entity#typename)

* * *

此外，似乎有多个单词的类型，因此您需要在其中添加一些下划线。这是一个解决方案

```
layerEnts.each do |l|
  type = l.typename.gsub(/(.)([A-Z])/,'\1_\2').downcase
  layerGroup.entities.send("add_#{type}".to_sym, l)
end 
```**

# node.js - socket.io 和 node.js 向特定客户端发送消息

> ID：10629497
> 
> 赞同：11
> 
> 时间：2012-05-17T03:36:36.513
> 
> 标签：node.js, socket.io, messaging

向所有客户端发送消息效果很好，但我想向特定用户名发送消息。我的 server.js 文件看起来像。它的作用是在`http://localhost:8080`运行时，客户端代码将用户添加到对象用户名以及套接字对象中。并立即将单个消息返回给每个连接的客户端。

```
//var io = require('socket.io').listen(8080);
var app = require('http').createServer(handler)
  , io = require('socket.io').listen(app)
  , fs = require('fs')
var usernames={};  
 app.listen(8080);

// on server started we can load our client.html page
function handler ( req, res ) {
  fs.readFile( __dirname + '/client.html' ,
  function ( err, data ) {
    if ( err ) {
      console.log( err );
      res.writeHead(500);
      return res.end( 'Error loading client.html' );
    }
    res.writeHead( 200 );
    res.end( data );
  });
};
io.set('log level', 1); // reduce logging
io.sockets.on('connection', function (socket) {

 socket.on('adduser', function(username){
        // store the username in the socket session for this client
        socket.username = username;
        // add the client's username to the global list
        usernames[username] = username;
        // send client to room 1
        console.log(username+' has connected to the server');
        // echo to client they've connected
  });

  socket.on('pmessage', function (data) {
        // we tell the client to execute 'updatechat' with 2 parameters
        io.sockets.emit("pvt",socket.username,data+socket.username); // This works
        io.sockets.socket(socket.username).emit("pvt",socket.username,data+socket.username); // THIS DOESNOT
   });

  socket.on('disconnect', function(){
        // remove the username from global usernames list
        delete usernames[socket.username];

        // echo globally that this client has left
       console.log(socket.username + ' has disconnected');
    });
}); 
```

发出消息的部分

```
socket.on('pmessage', function (data) {
        // we tell the client to execute 'updatechat' with 2 parameters
        io.sockets.emit("pvt",socket.username,data+socket.username); // This works and sends message to all clients
        io.sockets.socket(socket.username).emit("pvt",socket.username,data+socket.username); // THIS DOESNOT
   }); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-06T19:41:35.033

试试这个：

```
socket.on('pmessage', function (data) {
    // we tell the client to execute 'updatechat' with 2 parameters
    io.sockets.emit("pvt",socket.username,data+socket.username);
    io.sockets.socket(socket.id).emit("pvt",socket.username,data+socket.username); 
}); 
```

socket.id 由 socket.io 保存，它包含您客户端的唯一 ID。您可以使用以下方法进行检查：

```
console.log(socket.id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-31T09:32:49.013

您必须存储所有客户端 ID，并据此获取特定客户端的 ID，然后使用以下代码

```
var store={};//this will store all client id and username e.g. store={jay:"34jhjshdj343sasa"}
socket.on('pmessage', function (data) {
    var receiverUserName=data.username;
    var message=data.message;
    var id = store[receiverUserName];//get ID
    // we tell the client to execute 'updatechat' with 2 parameters
    io.sockets.emit("pvt",socket.username,data+socket.username);
    io.sockets.socket(id).emit("pvt",socket.username,data+socket.username); 
}); 
```

然后这将在特定客户端上发出

# c# - 在webbrowser控件中静音刷新声音c#winform

> ID：10629499
> 
> 赞同：1
> 
> 时间：2012-05-17T03:36:43.947
> 
> 标签：c#, windows, winforms

我的表单上有一个在后台运行的 webbrowser 控件。页面不断刷新。所以我每次都听到刷新点击。有没有办法让它静音？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:04:56.887

您可以使用以下代码片段来解决此问题。它利用 url monitor dll。

```
const int FEATURE_DISABLE_NAVIGATION_SOUNDS = 21;

const int SET_FEATURE_ON_PROCESS = 0x00000002;

[DllImport("urlmon.dll")]
[PreserveSig]
[return: MarshalAs(UnmanagedType.Error)]
static extern int CoInternetSetFeatureEnabled(
    int FeatureEntry,
    [MarshalAs(UnmanagedType.U4)] int dwFlags,
    bool fEnable);

static void DisableClickSounds()
{
    CoInternetSetFeatureEnabled(
        FEATURE_DISABLE_NAVIGATION_SOUNDS,
        SET_FEATURE_ON_PROCESS,
        true);
} 
```

# jquery - object-c 中 jquery 文件中的 window.location 显示 jquery 文件位置而不是 window.location 参数

> ID：10629501
> 
> 赞同：0
> 
> 时间：2012-05-17T03:37:06.243
> 
> 标签：jquery, objective-c, xcode, uiwebview

在 jQuery 文件本身中：

```
this.item_test = function(){
    $('body').css('background-color', '#00ff00');
    window.location = "/allCorrect/yes";
} 
```

**Out come 1（第 1 行证明 jQuery 工作正常）：**`UIWebView`绿色的背景（预期和正确）。

**Out come 2（对于第 2 行，window.location 行）：**在委托方法中，预期`(UIWebView *)webView shouldStartLoadWithRequest:`值为。`request.mainDocumentURL.relativePath``/allCorrect/yes`

我的问题：我没有得到“/allCorrect/yes”，而是得到了调用 jQuery 文件本身的以下文件位置：

“/Users/chiemekailo/Library/Application Support/iPhone Simulator/5.0/Applications/77BB3C4A-E99C-47C3-B2AE-F4DSDMFE84MFOEF/Documents/Unzipped/OPS”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:12:18.760

这将在不使用 jQuery 的情况下工作，所以我无法想象 jQuery 为什么或如何产生影响，但是您可以尝试使用此方法而不是使用位置更改（不使用 jQuery），它也会触发 webViewShouldStartLoadWithRequest 以查看它是否适用于 jQuery。

```
iFrame = document.createElement("IFRAME");
iFrame.setAttribute("src", "/allcorrect/yes");
document.body.appendChild(iFrame); 
iFrame.parentNode.removeChild(iFrame);
iFrame = null; 
```

# wpf - 设置窗口状态会带走键盘焦点

> ID：10629502
> 
> 赞同：2
> 
> 时间：2012-05-17T03:37:07.477
> 
> 标签：wpf, window, lost-focus, windowstate

我们有一个有多个窗口的应用程序。其中一个窗口是通知窗口，它根据一定的条件自行弹出和关闭。我们希望窗口出现在所有窗口的前面，并且不应该带走焦点。所以我们将**Topmost**属性设置为 true 并将**ShowActivated 设置**为 false。每次打开窗口时，我们还将窗口的**WindowState**属性设置为**Normal**，这样即使用户最小化了窗口，它也总是出现在前面。

因此，在某些系统中，这种行为可以正常工作，而在某些系统中，焦点会丢失。这种行为本质上是间歇性的。

如果我们不设置窗口状态，那么焦点不会丢失，并且工作正常。但是我们不确定即使设置了窗口状态属性，焦点是如何在某些系统中保留的？

# java - 调试/处理 Java/Restlet 应用程序 SEGFAULT

> ID：10629504
> 
> 赞同：0
> 
> 时间：2012-05-17T03:37:51.390
> 
> 标签：java, web-services, segmentation-fault, monitor, restlet

我有一个应用服务使用 Restlet 框架。但运行1-2天后。我发现它突然停止了。检查了应用程序目录，我发现一个日志文件说：

> # Java 运行时环境检测到一个致命错误：
> 
> #
> 
> # SIGSEGV (0xb) 在 pc=0x00000039c7e7adfe，pid=32765，tid=1077344576

此处的日志文件：http: [//pastebin.com/fwNKWdT6](http://pastebin.com/fwNKWdT6)

那么谁能告诉我如何调试或处理这个？我知道 Linux 应用程序可以捕获 SEGFAULT 信号并手动重新启动。无论如何在java应用程序中可以做到这一点？

另外，你们知道如何监控远程java应用程序的CPU/内存吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:31:22.110

It looks like a bug in the native parts of JRE code (Zip handling?). You should first try to upgrade to JDK 7.0 update 4 and then report the bug to Oracle.

For remote monitoring, you can use VisualVM part of JDK: [http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/index.html)

# java - 跳过代码导致程序提前结束

> ID：10629505
> 
> 赞同：0
> 
> 时间：2012-05-17T03:37:55.890
> 
> 标签：java, block, volume, calculator

我目前正在尝试创建一个体积、面积、表面积和周长计算器，但我遇到了小问题

```
package Volume;

public class C {
  static double r;
  static double h;

    static double volume() {
      return (25/7.957747154)*(r*r)*h;
    }

} 
```

数据类

```
package Volume;

import java.io.IOException;
import java.util.Scanner;

public class VC {
  public static void main(String args[]) 
    throws IOException {
      char s2;  
      char s1;
      Scanner first = new Scanner(System.in);
      Scanner second = new Scanner(System.in);
      a: {
      System.out.println("Chose your Type: \n1.Volume \n2.Area \n3.Surface Area \n4.Perimeter \n5.Exit \nPlease type the number of your option.");
      s1 = (char) System.in.read();
      switch(s1) {
        case '1':
        System.out.println("Chose Your Shape: \n1.Cylinder \ntype the number");
        s2 = (char) System.in.read();
        switch(s2) {
          case '1': 
          System.out.println("Raidius?");
          Volume.C.r = first.nextDouble();
          System.out.println("Height?");
          Volume.C.h = second.nextDouble();
          Double v;
          v = Volume.C.volume();
          System.out.println("The Volume is:" + v);
          break a;
       }
       case '5':
       System.out.println("GoodBye");
     }
   }
 }
} 
```

主班

我遇到的问题是在我完成第一个 switch 语句而不是暂停读取字符之后，它跳过了整个块并转到案例“5”：在完成任何操作之前结束程序。

有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:50:02.357

IO 缓冲是许多问题的根源，我建议您：

1.  `System.in`仅通过扫描仪访问（例如 no `System.in.read`）
2.  为同一流仅创建一个 Scanner（例如， only `first`、 no `second`）

更多解释：

您正在通过 3 个不同的对象访问标准输入流（例如用户输入）：

*   `first`-`System.in`被包裹`Scanner`
*   `second`-`System.in`被包裹`Scanner`
*   Directly in some places, for example `s2 = (char) System.in.read();`

Instead, create only one `Scanner` and use it for all the reads from `System.in`

# drupal - 像在 yelp 中一样进行 Drupal 搜索

> ID：10629506
> 
> 赞同：0
> 
> 时间：2012-05-17T03:38:00.470
> 
> 标签：drupal, drupal-7

我想在我的网站上拥有像[http://www.yelp.com](http://www.yelp.com)或[http://www.eventbrite.com/directory这样的搜索功能。](http://www.eventbrite.com/directory)搜索有 2 个字段，标题和城市。我怎么能在drupal 7中做到这一点？

谢谢，雷纳尔迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T15:29:49.073

要获得最佳用户体验，请查看[Apache solr](http://www.slideshare.net/nickvh/drupal-apachesolr) drupal 模块，例如[Apache Solr Search Integration](http://drupal.org/project/apachesolr)。我必须警告你，它的设置和管理比任何其他解决方案都要复杂得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:25:41.963

基本上你可以使用[http://drupal.org/project/Custom_Search](http://drupal.org/project/Custom_Search)。但是你也可以使用视图和暴露的过滤器来做到这一点。Drupal 有很多方法可以做到这一点。

# iphone - UIScrollView objectAtIndex

> ID：10629507
> 
> 赞同：0
> 
> 时间：2012-05-17T03:38:09.703
> 
> 标签：iphone, ios, xcode, uiscrollview

在`UIScrollView`我的数组中，我有 30 张图像。我尝试将其`objectAtIndex`放入我的阵列中。我希望能够在 UIScrollView 停止滚动时在特定图像中显示动画。所以我在下面尝试了这段代码：

```
- (void) scrollViewDidEndScrollingAnimation:(UIScrollView *)scrollView{
    if([images objectAtIndex:0]){

        //Animation 1

    } else if([images objectAtIndex:1]){

        //Animation 2

    } else if{
...

} 
```

但我不能让它做我的动画。我的情况是可能的还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:44:06.997

你的代码：

```
if([images objectAtIndex:0]) 
```

将评估存储在索引位置 0 的数组图像中的对象是否为 nil。并且大概如果数组在界限内，那么它将返回true。如果数组超出范围，那么该语句将导致崩溃。因此，您的 if 语句的结果很可能为真或崩溃（除非您出于某种原因将 nil 指针存储在数组中）。

你想评价什么？您是否试图确定滚动视图停止滚动时显示的图像？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T01:08:00.700

我将`NSNumber`或`NSString`应用于我的阵列。像这样：

```
for (int i=0; i<30;i++)
{

    //for NSString
    [arrayName addObject:[NSString stringWithFormat:@"%d", i]];

    //for  NSNumber
    [arrayName addObject:[NSNumber numberWithInt:i]];
} 
```

然后在您的`scrollViewDidEndScrollingAnimation`, 实现以下任一条件：

```
if ([[arrayName objectAtIndex:anIndex] intValue] == 1)

if ([arrayName objectAtIndex:anIndex] isEqualToString:@"1"]) 
```

# c# - C# 防病毒阻止 smtp 检查

> ID：10629518
> 
> 赞同：2
> 
> 时间：2012-05-17T03:39:46.630
> 
> 标签：c#

我正在尝试使用以下方法检查 smtp 服务器。

似乎工作正常，但我的防病毒软件有阻止警报。

无论如何要检查防病毒软件是否被阻止然后停止 smtp 检查？

谢谢。

```
public static bool Check(string host, string port, string username, string password)
        {
            TcpClient tcpClient = new TcpClient();
            tcpClient.Connect(host, Convert.ToInt32(port));

            NetworkStream netStream = tcpClient.GetStream();
            System.IO.StreamReader strReader = new System.IO.StreamReader(netStream);
            byte[] WriteBuffer = new byte[1024];
            ASCIIEncoding enc = new System.Text.ASCIIEncoding();

            WriteBuffer = enc.GetBytes("USER " + username + "\r\n");
            netStream.Write(WriteBuffer, 0, WriteBuffer.Length);

            WriteBuffer = enc.GetBytes("PASS " + password + "\r\n");
            netStream.Write(WriteBuffer, 0, WriteBuffer.Length);

            if (strReader.ReadLine().Contains("+OK"))
            {
                return true;
            }
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T00:05:40.550

我无法找到阻止它的确切方法。因此，我决定改为捕获套接字异常。

# actionscript-3 - 子影片剪辑上的 as3 gotoandplay 帧

> ID：10629519
> 
> 赞同：4
> 
> 时间：2012-05-17T03:39:48.323
> 
> 标签：actionscript-3, flash

简单的肯定在这里..

```
mybutton.addEventListener(MouseEvent.MOUSE_DOWN, thefunction);

function thefunction(event:MouseEvent):void {
    gotoAndPlay(** frame on child movie clip **);
} 
```

如何定位框架？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T03:45:14.650

`MovieClip`从进入框架的孩子调用函数作为 gotoAndPlay 的参数

例如，给定一个带有实例名称的符号`childMovieClip`

```
childMovieClip.gotoAndPlay(2); 
```

![子 MovieClip 实例](../Images/65d348d6967922e81ee0bac3e52034e0.png)

[flash.display.MovieClip gotoAndPlay](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/MovieClip.html#gotoAndPlay%28%29)

# java - 对 Java 内存管理（堆栈和堆）感到困惑

> ID：10629521
> 
> 赞同：4
> 
> 时间：2012-05-17T03:39:53.120
> 
> 标签：java, memory-management, callstack

这听起来可能很愚蠢，但我仍然不清楚 Java 堆栈和内存堆。我从学习中了解到如下：

1）所有方法调用都在堆栈上。

2）本地分配的所有内存都在内存堆上（这点不太清楚）

3) new 操作符分配的所有内存（无论是在方法中还是在类中）都在内存堆上。

我担心以下情况：

1）如果我在方法中创建一个 int 变量并返回它，它会去哪里（我相信它会进入堆栈，但需要澄清）。

2）如果我在一个方法中创建一个新对象，即使在方法执行结束后它仍然存在，它仍然存在于堆内存中（我理解这是因为当我将此对象分配给某个对象时，java 创建的对象的哈希码保持不变外部引用变量，或者我返回这个对象）。

3) 我的问题是，如果我没有将第 2 点中提到的对象分配给任何引用，或者我没有返回它，会发生什么。它仍然在堆上创建吗？逻辑上应该是，但请赐教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T03:56:39.443

All method parameters go on the stack. All local variables go on the stack. The only thing that goes in the heap is stuff allocated explicitly using `new` (or implicitly by auto-boxing or varargs.)

Another way to think about it is that primitive values and object/array **references** may go on the stack, but actual objects cannot¹.

So:

1) - you are returning a primitive value (not a variable!), and it goes on the stack. (You can't "return" a variable. The variable is part of the stack frame and can't be detached from it.)

2) Yes.

3) Yes, at least for now¹. At some point, the GC may run, notice that the application doesn't have a reference to the object any more, and reclaim it.

* * *

^(1 - actually, the latest Hotspot compilers are capable of detecting that an object's reference never "escapes" from the method that creates it, and that the objects could be allocated on the stack. IIRC, this optimization - called escape analysis - needs to be enabled using a JVM command-line flag.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:33:09.307

代码段：常量值通常直接放在程序代码段中。

堆栈：对象引用和原始变量放在堆栈上。

堆：每当您创建一个对象时，执行该代码时都会在堆上分配存储空间。

对于您的问题：

1) 是的

2) 是的

3) 是的

# php - PHP 变量、类和继承了解基础知识

> ID：10629522
> 
> 赞同：0
> 
> 时间：2012-05-17T03:40:01.267
> 
> 标签：php, class, variables, inheritance

我正在开发一个 PHP 项目，我需要一些基础知识帮助。我有一个车辆类。在车辆类中有一个名为fuel_capacity 的变量。正如您所期望的，燃料容量因车辆而异。例如，燃料容量在汽车和卡车之间发生变化。我有一个 Car 类和一个 Truck 类，它们扩展了车辆类。

在建造汽车时，我想为 $fuel_capacity 赋值。当我这样做时，除非我将 $fuel_capacity 声明为 public，否则我无法从车辆内的函数中访问 $fuel_capacity。问题是如果我在 Car 类中声明 $fuel_capacity 公开，那么我担心它会与 Truck 类的 $fuel_capacity 冲突。这个对吗？如果是这样，我如何与父母分享 $fuel_capacity？

另外我想在我的 Car 类中使用一个构造函数类，然后它会覆盖我的 Vehicle 类构造函数。无论如何我可以调用例如在 Car 类中分配一个值，例如 $fuel_capacity，然后在 Vehicle 类的构造函数中使用该值？

最后有没有办法为从另一个类扩展的类设置接口？

我查看了很多页面，包括[在 PHP 中使用普通函数和类方法有什么区别？](https://stackoverflow.com/questions/3539778/help-understanding-php-classes),[了解 php](https://stackoverflow.com/questions/3535172/understanding-inheritance-in-php)中的继承,[了解 PHP 继承](https://stackoverflow.com/questions/5796907/understanding-php-inheritance), 以及[在 PHP 中使用普通函数和类方法有什么区别？](https://stackoverflow.com/questions/3539778/help-understanding-php-classes). 这些都是很好的介绍，但它们没有解决这些问题。谢谢 ：-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:50:05.620

您需要真正了解 OOP 的工作原理以及它是如何在 PHP 中实现的。 [http://php.net/oop](http://php.net/oop)应该可以提供帮助。

这是一种方法。您当然可以在构造函数中设置燃料容量。我建议`Vehicle`成为一个`abstract`班级，因为您不希望有人创建一个`Vehicle`对象。

如果你继承当然你可以从`Car/Trunk`类中访问变量，因为它被声明为受保护。

```
abstract class Vehicle {
    public function setFuelCapacity($capacity) {
        $this->fuel_capacity = $capacity;
    }

    protected $fuel_capacity;
}

class Car extends Vehicle {
}

class Truck extends Vehicle {
} 
```

希望有帮助。

# android - 构建一个实用程序以每次获取外部可移动存储的路径

> ID：10629523
> 
> 赞同：4
> 
> 时间：2012-05-17T03:40:02.690
> 
> 标签：android, android-sdcard

最近，我需要能够在手机的外部可移动存储（又名 SDCard）上严格写入一些数据。对于没有“外部”内部存储的低端设备（你知道我的意思），这不是问题，因为

`Environment.getExternalStorageDirectory().getAbsolutePath()`,

返回

`/mnt/sdcard`

也是sdcard的路径。然而，在具有内置闪存存储（例如 sgs 2）的高端手机上，`/mnt/sdcard`从 中返回`Environment.getExternalStorageDirectory().getAbsolutePath()`的 只是通往内部存储的路径。sdcard的真实路径是`

/mnt/sdcard/external_sd`。

然而，这并不止于此，因为当我尝试使用升级到 ICS 的 sgs2 时，现在 sd 卡的路径是

`/mnt/emmc`.

现在我正在尝试构建一个名为 ExternalStorage 的通用实用程序类，它具有一个静态方法，该方法返回到 sdcard 根目录的路径（以及一些其他方法来获取总空间、可用空间、特定目录消耗的空间等.) 到目前为止，我所拥有的是：

**更新后的版本：**

```
public static String getRemovableStoragePath() {

        File f = null;
//      Log.d(TAG, "Build.DEVICE: " + Build.DEVICE);
//      Log.d(TAG, "Build.MANUFACTURER: " + Build.MANUFACTURER);
//      Log.d(TAG, "Build.MODEL: " + Build.MODEL);

        if (Build.VERSION.RELEASE.startsWith("4")) {
            f = new File("/mnt/emmc");
        }
        if (Build.MODEL.toLowerCase().startsWith("mele")) {
            return "/mnt/extern_sd0";
        }
        if (Build.DEVICE.equals("nuclear-zoop") || Build.DEVICE.equals("nuclear-f900")) {
            f = new File("/mnt/extsd");
        }

        String path = Environment.getExternalStorageDirectory().getAbsolutePath();
        String extendedPath = "";
        if (Build.DEVICE.toLowerCase().contains("samsung") || Build.MANUFACTURER.toLowerCase().contains("samsung")) {
            extendedPath = "/external_sd/";
            try {
                f = new File(path + extendedPath);
                if (f.exists() && f.isDirectory()) {
                    return f.getAbsolutePath();
                } else if (Build.MODEL.toLowerCase().contains("gt-i9300")) {
                    extendedPath = "/mnt/extSdCard/";
                    try {
                        f = new File(extendedPath);
                        if (f.exists() && f.isDirectory()) {
                            return f.getAbsolutePath();
                        }
                    } catch (Exception e) {
                        // continue execution
                    }
                } else {
                    extendedPath = "/sd";
                }
            } catch (Exception e) {
                // contine execution
            }
        } else if (Build.DEVICE.toLowerCase().contains("e0") || Build.MANUFACTURER.toLowerCase().contains("LGE")) {
            extendedPath = "/_ExternalSD/";
        } else if (Build.MANUFACTURER.toLowerCase().contains("motorola") || Build.DEVICE.toLowerCase().contains("olympus")) {
            f = new File("/mnt/sdcard-ext");
        }
        try {
            if (!extendedPath.equals("")) {
                f = new File(path + extendedPath);
            }
            if (f.exists() && f.isDirectory()) {
                //              Log.d(TAG, "path: " + f.getAbsolutePath());
                return f.getAbsolutePath();
            } else {
            }
        } catch (Exception e) {
            //          e.printStackTrace();
            // f is probably null. no need to print stacktrace.
            return path;
        }

        return path;
//      return Environment.getExternalStorageDirectory().getAbsolutePath();
    } 
```

有人已经这样做了吗？我知道我缺少许多特定于制造商的路径，因此我需要帮助来完成此实用程序以支持尽可能多的 Android 手机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-28T15:01:20.390

我不确定这有多可靠，但由于可移动 SD 卡在其根目录中包含 LOST.DIR 文件夹并在启动时重新创建（在用户可能删除它的情况下）......

```
 File root = new File(Environment.getExternalStorageDirectory().getAbsolutePath());
    for (File sub : root.listFiles()) {
        if (new File(sub + "/lost.dir").exists()) {
            // 'sub' is probably the removable SD
            break;
        }
    } 
```

如果在 LOST.DIR 文件夹中找到“sub”，可能希望将其值写入 sharedPrefs 以便仅执行一次此查找（如果没有存储值），然后仅从 prefs 中获取，或者以便应用程序即使用户删除了 LOST.DIR 并且它目前在任何地方都不存在，也知道这条路径。

# php - 向 Websever 上的 PHP 函数发送 HTTP 请求

> ID：10629524
> 
> 赞同：1
> 
> 时间：2012-05-17T03:40:06.290
> 
> 标签：php, android, web-services, http

我目前正在构建一个简单的 Android 应用程序，该应用程序在我的网络服务器上调用一个简单的 php 脚本。我对Android开发相当陌生。在 iOS 中，我所做的只是发出一个肥皂请求，但在 Android 中，我想发出 HTTP 请求，因为 SOAP 不受本机支持。

**什么是在 Android 中实现到这个 PHP 函数的 HTTP 请求的最简单方法？**

这是我服务器上的 PHP 脚本：

```
function test($text1, $text2)

{

 $fullstring = $text1." ".$text2; 

 return $fullstring;
}

$server = new SoapServer(null, array('uri' => ""));
$server->addFunction("test");
$server->handle();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:15:26.300

你应该看到[这个](http://www.xyzws.com/Javafaq/how-to-use-httpurlconnection-post-data-to-web-server/139)；该程序发送 Post 请求，但您可以将其更改为获取请求，并且在发送时您应该发送 SOAP 请求字符串您正在关注的内容，您将得到响应

# javascript - 更改匹配列表中项目的颜色

> ID：10629528
> 
> 赞同：0
> 
> 时间：2012-05-17T03:41:16.430
> 
> 标签：javascript, arrays, events

基本上我有两个 html 字符串：

```
a = "Cowboys, Eagles, Redskins, Giants"
b = "Jets, Cowboys, Patriots, Eagles" 
```

我想更改匹配项目的颜色属性。我尝试将它们制作成数组，循环遍历 a 并检查每个元素是否在 b 中，但是一旦找到匹配的元素，我必须将其重新转换为 HTML 字符串以进行打印。如何在字符串中搜索匹配的术语并将这些小节设置为不同的颜色？这种方法有意义吗，还是有人有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:04:35.100

您可以在比较时构建字符串，而不是来回匹配。

[它对你有用吗？](http://jsfiddle.net/qUYpN/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:08:27.937

[这应该做你需要](http://jsfiddle.net/qUYpN/8/)的。我试图尽可能地遵循您的要求。

# jquery - 滚动到插入的新内容

> ID：10629529
> 
> 赞同：0
> 
> 时间：2012-05-17T03:41:24.643
> 
> 标签：jquery

假设我在数据库中插入了一篇文章，然后，我不想重新加载页面来显示它，所以我用 jQuery..now 追加它......我该怎么做才能向下滚动到那个发布并做一个动画来向用户展示插入的新帖子。像 Facebook 一样，当您打开评论通知时，它会向下滚动到评论并将 div 置于黄色然后删除该类，以便背景再次变为白色

我希望我清楚地解释自己！感谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:42:40.750

```
<div id="content">
  // parent container where to add element
</div>

$('#content').append('<div class="newlyappend">Sample Text'+ c++ +'</div>');
$('#content').scrollTop($('#content').height()); 
```

**[工作演示](http://jsfiddle.net/thecodeparadox/HCpDV/)**

# database - 最容易抓取/存储/显示和搜索数据的平台？

> ID：10629537
> 
> 赞同：0
> 
> 时间：2012-05-17T03:42:37.040
> 
> 标签：database, web, scrape

我计划建立一个网站，用户可以在其中输入一些关于他们自己的汽车的数据（比如年数、他们的自评维护水平等），然后我可以从各种制造商/汽车评论中抓取一些制造商数据网站（如引擎、自动/手动等），将所有这些数据转储到数据库中（我可以做 MS-SQL 或 MySQL），然后在网站上有一个前端用户表单，允许某人通过任何列出的字段，然后输入他们认为这辆车值得的价格。

现在，问题是，我对 SQL 和 HTML 有很好的了解，并且以前使用 VB.NET 做过一些抓取任务，但是我对 PHP 和其他平台的经验很少。因此，我只是想知道完成这项工作的最有效方法是什么？当用于抓取网站时，PHP 会比 .NET 框架好很多吗？

由于这是我自己的宠物项目，我可以灵活地使用我喜欢的任何软件的任何版本（只要它不像我付不起的 Oracle），平台可以在 Windows 或 Linux 上。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:54:30.773

If you're talking about code efficiency, definitely go with machine code. If you're talking about programmer efficiency definitely use a platform you already know. Having said that, Python is a great language, which everyone should use for everything that isn't already done in C. ;-)

(And Django (in Python) is a lovely web-framework. It's *Don't-Repeat-Yourself* motto is in sharp contract to .Net's *Copy-Paste-Everything-Twice* workflow, at least in my experience.)

# java - 如何在 ActionListener 中调用另一个 Java 文件？

> ID：10629538
> 
> 赞同：2
> 
> 时间：2012-05-17T03:42:38.277
> 
> 标签：java, swing, jbutton, actionlistener

我正在为我的程序创建一个图形界面。当我按下开始按钮时，我希望它调用另一个程序。

以下是我的侦听器代码：

```
private class ButtonHandler implements ActionListener 
{
    public void actionPerformed(ActionEvent e)
    {
        if(e.getSource()==startButton)
            ?????
    }
} 
```

我该怎么办？我打算调用另一个 Java 文件 (Start.java)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:47:24.590

如果你想在那里创建一个新的 Start 实例，你可以这样做：

```
public void actionPerformed(ActionEvent e)
{
    if(e.getSource()==startButton) {
       Start myStart = new Start();
       myStart.foo();
    }
} 
```

或者，如果您已经引用了现有的 Start 对象，则只需调用其方法即可。需要注意的是，如果 Start 的任何方法需要很长时间才能完成或占用大量资源，则您需要在后台线程中执行它们，例如 SwingWorker 对象提供的。

请注意，我的回答非常笼统，可能在细节上有点模糊，但我无法提供任何更细粒度的细节，直到你在这里告诉我们更多关于你的程序结构、你的类和你的具体问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:47:13.203

如果它属于您的项目并且已经包含在类路径中，您可以调用 Start 类的所需方法。

如果你想一起启动另一个进程，你必须使用 [http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec(java.lang.String](http://docs.oracle.com/javase/7/docs/api/java/lang/Runtime.html#exec(java.lang.String) )

# java - 如何将变量的全部内容发送/导出到文本文件/xml 文件/剪贴板？

> ID：10629544
> 
> 赞同：2
> 
> 时间：2012-05-17T03:44:06.197
> 
> 标签：java, eclipse, debugging

我想以树状形式将实例的内容发送给某人。打印屏幕不行，因为这个类太复杂了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:15:55.050

您是否需要将输出转回实例？在这种情况下，其他答案是正确的。

如果您只想手动检查实例的内容，理想情况下您的类将全部实现`toString()`，您可以将其重定向到文件。

如果你没有好的 toStrings，你可以使用下面的（例如在 Eclipse 的 Expressions 视图中）

```
org.apache.commons.io.FileUtils.writeStringToFile(
    new java.io.File("C:\\objectAsString.txt"),
    org.apache.commons.lang3.builder.ToStringBuilder.reflectionToString(
    variableToInspect,
    org.apache.commons.lang3.builder.ToStringStyle.MULTI_LINE_STYLE)) 
```

如果您在类路径上有 commons-lang3 和 commons-io。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:12:05.990

you could use Xml parsing or serialization as vidhya just said.

Xml more reflexive, it is easier to use or read in any type of program, you won't have versioning problems and many many other good features.

Serializing can be easier if you use this exact application on the other end. but many bugs can find their way into your application.

for xml parsing you can use java XML library or many third party libraries like Dom4j. Xml parsing is easy enough, You can add a toXml and fromXml to each one of your entities, and define how you would like that entity being parsed.

# batch-file - 批处理文件文本处理 - 查找连续数字

> ID：10629546
> 
> 赞同：0
> 
> 时间：2012-05-17T03:44:33.637
> 
> 标签：batch-file, range, sequence

我有一个文本文件，其中包含 PBX 的电话长途交换信息。输入文件包含：

```
sourceNPA,srcNNX,DestinationNPA,destNNX
954,327,954,201
954,327,954,202
954,327,954,203
954,327,954,210 
954,327,954,212
954,327,954,213 
954,327,954,214 
etc... 
```

出于公司政策原因（不仅仅是因为我不是编码员），我只能使用 VBS 或 Windows 批处理。我希望手动完成这些，但有 43000 或更多要转换为范围。

我需要读取给定文本文件的每一行，查看 dNPA 和 dNXX（每行中的最后两个 arg）是否连续，如果是，请确定范围，以便输入列表在输出中如下所示：

```
954,327,954,201,203
954,327,954,210,210
954,327,954,212,214
etc... 
```

我已经尝试研究数组的使用并尝试将单行读取到临时文件中，但这必须有一个技巧。

我一直在修修补补，但几乎没有什么可展示的：

```
@echo off
setlocal enabledelayedexpansion
set lineNumber=1
if exist outputFile.txt del outputFile.txt

for /f "tokens=1-6 delims=,;" %%a in (inputFile.txt) do call :process %%a %%b %%c %%d
:EOF

:process
set line!linenumber!SrcNPA=%1
set line!linenumber!SrcNNX=%2
set line!linenumber!destNPA=%3
set line!linenumber!destNNX=%4
REM then intended to compare the values but I'm stuck
REM I want to compare the last arugment of each line to the same
REM same argument in the next line read, and if its sequential 
REM then set the start the range and when the comaparison is no longer
REM consecutive set the top of the range andn then write that range to output
set /a lineNumber+=1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:39:15.853

您需要对第 4 个数字进行数学运算以查找连续值。大概有些数字可以从零开始。这会导致批处理的解析问题，因为 SET /A 假定以 0 开头的数字是八进制表示法。因此，需要额外的工作来防止这种情况发生。

假设输入文件是预先排序的，以下应该可以工作。

```
@echo off
setlocal enableDelayedExpansion
set "current="
set "next="
(
  for /f "tokens=1-4 delims=," %%A in (testFile.txt) do (
    set /a "num=10000%%D%%10000"
    if "!current!,!next!"=="%%A,%%B,%%C,!num!" (
      set "end=%%D"
      set /a "next+=1"
    ) else (
      if defined current echo !current!,!start!,!end!
      set "current=%%A,%%B,%%C"
      set "start=%%D"
      set "end=%%D"
      set /a "next=num+1"
    )
  )
  if defined current echo !current!,!start!,!end!
)>global_new.txt 
```

如果输入文件没有预先排序，那么只要每列的宽度不变，就可以在 FOR /F 中使用 SORT。

```
for /f "tokens=1-4 delims=," %%A in ('sort testFile.txt') do ( 
```

如果列的宽度不是恒定的并且文件没有预先排序，那么脚本会变得更加复杂。我建议此时切换到 VBS。无论如何，VBS 将有更好的性能。

# sqlalchemy - 按 sqlalchemy 查询中 DateTime 的 Year 元素排序

> ID：10629549
> 
> 赞同：1
> 
> 时间：2012-05-17T03:44:51.800
> 
> 标签：sqlalchemy, sap-ase

我有一个 Sybase 表，使用 sqlalchemy 进行声明式映射，如下所示：

```
from   sqlalchemy.ext.declarative import declarative_base    
Base = declarative_base()

class Appointment(base):
    __tablename__ = 'APPOINTMENT'
    __table_args__ = {'quote':False}

    dt = Column(Date, name='dt_appointment') 
```

如何查询此表，按年份（dt_appointment）排序？Year() 是有效的 sybase T-SQL 函数。我试过包括一个计算列，例如：

```
dtYear = Column(Integer, name='Year(dt_appointment)', quote=False) 
```

这不适用于查询：

```
session.Query(Appointment).order_by(Appointment.dtYear) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T16:07:22.450

您应该能够使用[函数表达式](http://docs.sqlalchemy.org/en/rel_0_7/core/tutorial.html#functions)：

```
from sqlalchemy.sql import func
qry = session.query(Appointment).order_by(func.DATE(Appointment.dt)) 
```

* * *

但是请注意，如果您经常使用这些类型的过滤器，建议在您的表中创建一个计算列，该列将只包含一个`year`值并在此列上`dt_appointment`创建一个。`index`这将大大提高您的查询/过滤器的速度。[我不了解 Sybase，所以我假设在 Sybase 中可以创建`computed persistent`列，就像在 中一样`MSSQL`]。

# regex - 用于 alpha dot alpha 模式的 REGEX 帮助

> ID：10629551
> 
> 赞同：0
> 
> 时间：2012-05-17T03:44:57.333
> 
> 标签：regex

我有以下 REGEX 检查模式，如（仅 alpha 和小数）：

```
abc.def
abc.def.ghi 
```

模式是：

```
^[a-zA-Z.]*$ 
```

我需要做的是确保没有前导或尾随小数。所以这样的事情是非法的：

```
.abc.def
abc.def. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T03:47:55.667

像这样：

```
^([a-zA-Z] +\.)+[a-zA-Z] +$ 
```

我针对您的示例进行了测试，并且可以正常工作。

# c++ - 编码时考虑内存碎片：是否过早优化？

> ID：10629556
> 
> 赞同：9
> 
> 时间：2012-05-17T03:46:04.803
> 
> 标签：c++, memory-fragmentation

我正在开发一个使用 C++ 编写的大型服务器应用程序。该服务器可能需要运行数月而不重新启动。碎片在这里已经是一个可疑的问题，因为我们的内存消耗会随着时间的推移而增加。到目前为止，测量一直是将私有字节与虚拟字节进行比较，并分析这两个数字的差异。

我对碎片化的一般方法是将其留给分析。我对一般性能和内存优化等其他事情有相同的思考方式。您必须通过分析和证明来支持更改。

在代码审查或讨论期间，我注意到很多，内存碎片是最先出现的事情之一。这几乎就像现在对它有巨大的恐惧，并且有一个提前“防止碎片化”的大举措。请求的代码更改似乎有利于减少或防止内存碎片问题。我倾向于立即不同意这些，因为它们对我来说似乎是过早的优化。我会牺牲代码的清洁度/可读性/可维护性/等等。为了满足这些变化。

例如，采用以下代码：

```
std::stringstream s;
s << "This" << "Is" << "a" << "string"; 
```

上面，字符串流在这里进行的分配数量是未定义的，它可能是 4 个分配，或者只是 1 个分配。所以我们不能仅基于此进行优化，但普遍的共识是要么使用固定缓冲区，要么以某种方式修改代码以可能使用更少的分配。我并没有真正看到 stringstream 在这里扩展自身是导致内存问题的巨大贡献者，但也许我错了。

对上述代码的一般改进建议如下：

```
std::stringstream s;
s << "This is a string"; // Combine it all to 1 line, supposedly less allocations? 
```

还有一个巨大的推动力是尽可能使用堆而不是堆。

有没有可能以这种方式抢占内存碎片，或者这只是一种错误的安全感？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-17T03:54:40.147

如果您事先知道您需要低碎片化*并且*您已经预先测量了碎片化对您来说是一个实际问题*并且*您提前知道您的代码的哪些段是相关的，那么这并不是过早的优化。性能是必需的，但盲目优化在任何情况下都是不好的。

然而，更好的方法是使用无碎片的自定义分配器，如对象池或内存区域，它可以保证没有碎片。例如，在物理引擎中，您可以将内存区域用于所有每个滴答分配并在最后清空它，这不仅速度快得离谱（甚至比`_alloca`VS2010 还要快），而且内存效率极高且碎片率极低。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T03:54:26.640

在算法层面考虑内存碎片是绝对合理的。在堆栈上分配小的、固定大小的对象也是合理的，以避免不必要的堆分配和释放的成本。但是，我肯定会在任何使代码更难调试、分析或维护的地方划清界限。

我也会担心有很多完全错误的建议。人们通常所说的应该“避免内存碎片”的事情中可能有 1/2 可能没有任何效果，其余的相当大一部分可能是有害的。

对于典型的现代计算硬件上大多数现实的、长时间运行的服务器类型的应用程序，用户空间虚拟内存的碎片不会成为简单、直接的编码的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T03:52:46.370

我认为这不仅仅是一个最佳实践，而不是过早的优化。如果您有一个测试套件，您可以创建一组内存测试来运行和测量内存、性能等，例如在夜间。如果可能，您可以阅读报告并修复一些错误。

小优化的问题是为不同但具有相同业务逻辑的东西更改代码。就像使用反向 for 循环一样，因为它比常规 for 更快。您的单元测试可能会指导您优化一些没有副作用的点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T07:50:06.600

在你真正遇到内存碎片之前，过多关注它显然是过早的优化；我不会在最初的设计中考虑太多。诸如良好封装之类的事情更重要（因为它们将允许您稍后更改内存表示，如果需要）。

另一方面，避免不必要的分配*是好的设计，并尽可能使用局部变量而不是动态分配。*不仅是因为碎片化的原因，也是因为程序简单的原因。C++ 通常倾向于使用值语义，使用值语义（复制和赋值）的程序比使用引用语义（动态分配和传递指针）的程序更自然。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T13:18:14.727

我认为您不应该在真正遇到碎片问题之前解决它，但同时您的软件应该设计为允许轻松集成这样的内存碎片问题解决方案。而且由于解决方案是自定义内存分配器，这意味着应该通过在 config.h 文件中的某处更改一行代码来将一个插入到您的代码中（操作员 new/delete 和容器的分配器类），而不是通过遍历所有容器等的所有实例化。支持这一点的另一点是，当前所有复杂软件中有 99% 是多线程的，来自不同线程的内存分配会导致同步问题，有时还会导致错误共享。而这些问题的答案又是自定义内存分配器。

因此，如果您的设计支持自定义分配器，那么您不应该接受以“碎片释放”形式出售给您的代码更改，直到您分析您的应用程序并亲眼看到该补丁确实减少了 DTLB 或 LLC 未命中的数量通过更好地打包数据。但是，如果设计不允许自定义分配器，那么这应该作为第一步在进行任何其他“内存碎片消除”代码更改之前实现。

根据我对内部设计的记忆，线程构建块可扩展分配器可以同时尝试——增加内存分配可扩展性和减少内存碎片。

另一个小点：您使用字符串流分配和尽可能将分配打包在一起的策略的示例 - 我的理解是，在某些情况下，这将**导致**内存碎片而不是解决这个问题。将所有分配打包在一起将使您请求大的连续内存块，最终可能会分散，然后其他类似的大块请求将无法填补空白。

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-05-17T05:49:15.337

还有一点我想提的是：你为什么不尝试某种垃圾收集器。您可以在某个阈值或某个时间段之后调用它。垃圾收集器会在达到一定阈值后自动收集未使用的内存。

另外关于碎片，尝试为不同类型的对象分配某种类型的存储，并在代码中自行管理它们。

即，如果您有 5 种类型的对象（A、B、C、D 和 E 类）。您可以在开头为每个类型的 1000 个对象分配空间，例如 cacheA、cacheB...cacheE。

因此，您将避免多次调用 malloc 和 new 并且碎片会非常少。代码也将像以前一样可读，因为您只需要实现类似 myAlloc 的东西，它将从您的 cacheA、cacheB 等中分配...

# c# - 使用 C# 或 Java 读取 XML 文档

> ID：10629563
> 
> 赞同：0
> 
> 时间：2012-05-17T03:47:23.840
> 
> 标签：c#, java, xml, xml-parsing

我想阅读下面的 XML 格式，只需要一些属性而不是全部。例如：

```
<Parts>
-   <Part>
        <Section>3003512</Section> 
        <Mark>RP-103</Mark> 
        <Length>4950</Length> 
        - <Components>
                <Section>3003512</Section> 
                <Mark>RP-103</Mark> 
                <Length>4950</Length>
                <Remark>System Generated </Remark>
              <Components />
            <Remark>No Comments </Remark>
        </Part>

-   <Part>
        <Section>3003512</Section> 
        <Mark>RP-103</Mark> 
        <Length>4950</Length> 
        <Components />
        <Remark>No Comments </Remark>
     </Part>
</Parts> 
```

我想只读部分并以表格格式标记。我正在使用下面的代码来阅读这个但是它给出了错误表架构'组件'已经存在。

```
 DataTable dt = new DataTable();
        DataColumn dc = new DataColumn("Mark");
        DataColumn dc1 = new DataColumn("Sections ");
        dt.Columns.Add(dc); 
        dt.Columns.Add(dc1);
        DataSet dSet = new DataSet();

        if (File.Exists(xmlpath2))
        {

            XmlTextReader Reader1 = new XmlTextReader(xmlpath2);

            dSet.ReadXml(Reader1, XmlReadMode.Auto);

            for (int i = 0; i < dSet.Tables[0].Rows.Count; i++)
            {
                DataRow rows = dSet.Tables[0].Rows[i];
                DataRow myRow = dt.NewRow();
                myRow["Mark"] = rows["Mark"];
                myRow["Sections "] = rows["Sections "];

                dt.Rows.Add(myRow);
            }

            GridView1.DataSource = dt;
            GridView1.DataBind(); 

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:53:26.023

不久前正在做类似的事情： [LINQ multiple columns](https://stackoverflow.com/questions/8601074/linq-multiple-columns)

希望能让你走上正轨

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:59:07.093

这是一个使用[LINQ to XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)的示例：

```
var ele = XElement.Parse(xml); // change to XElement.Load if loading from file

var result = ele.Descendants("Section")
                .Zip(ele.Descendants("Mark"), 
                    (s,m) => new {Section = s.Value, Mark = m.Value}); 
```

现在您可以创建您的`DataTable`：

```
var table = new DataTable();
var marks = new DataColumn("Mark");
var sections = new DataColumn("Sections");

table.Columns.Add(marks);
table.Columns.Add(sections);

foreach (var item in result)
{
    var row = table.NewRow();
    row["Mark"] = item.Mark;
    row["Sections"] = item.Section;
    table.Rows.Add(row);
} 
```

这将产生：

```
Mark     Sections 
RP-103   3003512 
RP-103   3003512 
RP-103   3003512 
```

它假定每个`Section`后面都有一个对应的`Mark`. 它还需要`System.Xml.Linq`和`System.Linq`。

# ruby-on-rails - 属于_to 和 has_many 通过

> ID：10629569
> 
> 赞同：0
> 
> 时间：2012-05-17T03:47:59.563
> 
> 标签：ruby-on-rails, activerecord

我正在使用 Rails 2.3.11。

```
class ModelA < ActiveRecord::Base
  belongs_to :modelb
  has_one :modelc, :through => :modelb
end

class ModelB < ActiveRecord::Base
  belongs_to :modelc
end

class ModelC < ActiveRecord::Base
  has_many :modelb
end

a = ModelA.find(x)
a.modelc # is nil (why??)
a.modelb.modelc # works fine 
```

有不同的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:08:03.010

我发现了问题，

```
inst_modelb = Factory(:modelb, :modelc => Factory(:modelc))
a=Factory(:modela, :modelb => inst_modelb)
a.modelc # was nil

#this worked
a.reload
a.modelc 
```

它似乎是一个缓存问题。虽然不能完全推理

# firefox - 当我使用 tinymce 编辑器时，Mozilla Firefox 中的脚本错误

> ID：10629571
> 
> 赞同：0
> 
> 时间：2012-05-17T03:48:09.863
> 
> 标签：firefox, tinymce

当我使用 tinymce 编辑器时，出现类似错误

`此页面上的脚本可能正忙，或者可能已停止响应。您现在可以停止脚本，在调试器中打开脚本，或者让脚本继续。

脚本：[http](http://rapidsurfing.net/site//jscripts/tiny_mce/tiny_mce.js:1) ://rapidsurfing.net/site//jscripts/tiny_mce/tiny_mce.js: 1`

在 mozilla firefox 浏览器中，我使用此代码获取 tinymce 编辑器

```
<script type="text/javascript">
tinyMCE.init({
    // General options
    mode : "exact",elements : "ntxtnotefield",
    theme : "advanced",
    plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template,wordcount,advlist,autosave",

    // Theme options
    theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect",

    theme_advanced_toolbar_location : "top",
    theme_advanced_toolbar_align : "left",
    theme_advanced_statusbar_location : "bottom",
    theme_advanced_resizing : true,

    // Example content CSS (should be your site CSS)
    // using false to ensure that the default browser settings are used for best Accessibility
    // ACCESSIBILITY SETTINGS
    content_css : false,
    // Use browser preferred colors for dialogs.
    browser_preferred_colors : true,
    detect_highcontrast : true,

    // Drop lists for link/image/media/template dialogs
    template_external_list_url : "lists/template_list.js",
    external_link_list_url : "lists/link_list.js",
    external_image_list_url : "lists/image_list.js",
    media_external_list_url : "lists/media_list.js",

    // Style formats
    style_formats : [
        {title : 'Bold text', inline : 'b'},
        {title : 'Red text', inline : 'span', styles : {color : '#ff0000'}},
        {title : 'Red header', block : 'h1', styles : {color : '#ff0000'}},
        {title : 'Example 1', inline : 'span', classes : 'example1'},
        {title : 'Example 2', inline : 'span', classes : 'example2'},
        {title : 'Table styles'},
        {title : 'Table row 1', selector : 'tr', classes : 'tablerow1'}
    ],

    // Replace values for the template plugin
    template_replace_values : {
        username : "Some User",
        staffid : "991234"
    }
}); 
```

如果有人知道这是怎么发生的，请回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:59:34.267

我强烈建议，你设置以下

```
plugins : "",
theme_advanced_buttons1: "", 
```

如果它有效，那么您的插件或按钮配置有错误。

# php - 如何使用php从html文本中提取特定句子

> ID：10629578
> 
> 赞同：0
> 
> 时间：2012-05-17T03:49:29.923
> 
> 标签：php

如果我有一个很大的 html 文本，我需要从中提取特定的句子，例如“/user/abdullaheidtv/videos?sort=dd&view=0&page=1”

也许我需要的是 "/user/abdullaheidtv/videos?sort=dd&view=0&page= ***12*** " 或 "/user/abdullaheidtv/videos?sort=dd&view=0&page= ***50*** " 或 "/user/abdullaheidtv/videos?sort=dd&view =0&页= ***90*** "

我想提取任何包含“/user/abdullaheidtv/videos?sort=dd&view=0&page= ***$no*** ”

只有最后一个数字是变量

等待帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:54:03.057

Regex can help you there. Use `preg_match`.

```
@/user/abdullaheidtv/videos\?sort=dd\&view=\d+\&page=\d+@ 
```

should match.

Note, I'm using `@...@` for the regular expression so that I don't need to escape `/` every time.

HTH.

# iphone - 如何像粉笔一样画线？

> ID：10629579
> 
> 赞同：3
> 
> 时间：2012-05-17T03:49:37.987
> 
> 标签：iphone, ios, line, draw

我想画线，就像粉笔一样。线条的边缘是微弱的。就像在黑板上用粉笔画一样。

我怎么得到这个？现在，我用图像画了线，但它看起来不像在黑板上画，因为线并不模糊。请给我一些建议。

这是我的代码：

```
 for (NSDictionary *dictStroke in self.arrayStrokes)
    {
        NSArray *arrayPointsInstroke = [dictStroke objectForKey:@"points"];
        //UIColor *color = [dictStroke objectForKey:@"color"];

    UIColor *color = [UIColor colorWithPatternImage:[UIImage imageNamed:@"point.png"]];

        float size = [[dictStroke objectForKey:@"size"] floatValue];
        [color setStroke];      // equivalent to both setFill and setStroke

        // draw the stroke, line by line, with rounded joints
        UIBezierPath* pathLines = [UIBezierPath bezierPath];
        CGPoint pointStart = CGPointFromString([arrayPointsInstroke objectAtIndex:0]);
        [pathLines moveToPoint:pointStart];
        for (int i = 0; i < (arrayPointsInstroke.count - 1); i++)
        {
            CGPoint pointNext = CGPointFromString([arrayPointsInstroke objectAtIndex:i+1]);
            [pathLines addLineToPoint:pointNext];
        }
        pathLines.lineWidth = size;
        pathLines.lineJoinStyle = kCGLineJoinRound;
        pathLines.lineCapStyle = kCGLineCapRound;
        [pathLines stroke];

        arraynum++;
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-07T09:48:21.140

尝试使用带有斑马线的图案图像。这会给你像粉笔书写一样的效果。

```
brushPattern = [[UIColor alloc]initWithPatternImage: [UIImage imageNamed:@"pattern.jpg"]];

- (void)drawRect:(CGRect)rect
{
    [brushPattern setStroke];
    [myPath strokeWithBlendMode:kCGBlendModeNormal alpha:1.0]; // myPath - points to be drawn    
} 
```

# qt - 工具提示停止 mouseMoveEvent

> ID：10629580
> 
> 赞同：0
> 
> 时间：2012-05-17T03:49:41.857
> 
> 标签：qt, pyqt, pyqt4, pyside

我刚刚注意到在工具提示上移动鼠标光标似乎不会在 PySide 中返回 mouseMoveEvent。

在我的情况下，它会导致麻烦，因为当鼠标移到主图标区域时，我会在主图标顶部动态显示一个小图标，并在鼠标离开主图标区域时再次隐藏小图标。因此，如果用户将鼠标光标移动到一个大的工具提示上，然后最终移到主按钮区域之外，则鼠标事件永远不会注册新位置并且迷你图标保持可见，即使鼠标不再位于主图标区域上.

我想我可以通过创建自定义 QToolTip 并将其放置在远离主按钮区域的位置来解决这个问题，因此永远不可能通过工具提示离开主按钮区域。但这似乎很难看。

有谁知道如何使工具提示注册到 mouseMoveEvent 这样可以避免？

这是一个示例片段（希望它的格式正确，我以前从未在这里发布过）：

```
import sys
from PySide.QtGui import *
from PySide.QtCore import *

class FancyButtonSmall( QWidget ):

    def __init__( self, parent=None ):
        super( FancyButtonSmall, self ).__init__( parent )
        self.setMouseTracking( True ) # TO DISPLAY "REMOVE" ICON ON MOUSE OVER

        # LAYOUT
        layout = QVBoxLayout()
        layout.setSpacing( 0 )
        self.setLayout( layout )
        self.setSizePolicy( QSizePolicy.Fixed, QSizePolicy.Fixed )
        self.fixedSize = ( 80, 80 )

        # BUTTON AND MOUSE STATE
        self.mainButtonDown = False # TO DRAW ICON STATE PROPERLY
        self.removeButtonDown = False # TO DRAW ICON STATE PROPERLY
        self.mouseOver = False # TO DISPLAY DELETE ICON

        # BUTTON COLOURS
        self.widgetColMainUp = QColor(60, 60, 60, 0)

        # LABELS
        self.textCol = QColor( 150, 150, 150 )

        # TOOLTIP
        self.setToolTip( self.__wrapText( 100*'test ' ) )

    def __wrapText( self, text, maxChar = 50 ):
        '''wrap text to only contain maxChar per line'''
        i = 1
        charList = list( text )
        while i*maxChar < len( charList ):
            charList.insert( i*maxChar, '\n' )
            i += 1
        return ''.join( charList )

    def mouseMoveEvent( self, event ):
        '''Show remove icon if cursor is on top of main icon'''
        print event.pos()

        self.mouseOver = self.iconRect.contains( event.pos() ) or self.removeIconRect.contains( event.pos() )
        self.update()

    def paintEvent( self, event ):
        painter = QPainter( self )
        painter.setRenderHint( QPainter.Antialiasing )

        # ICONS
        self.mainRect = QRect( 0, 0, self.geometry().width(), self.geometry().height() )
        iconSize = QSize( 58,58 )
        iconPos = QPoint( ( self.mainRect.width()-iconSize.width())/2, 10 )
        self.iconRect = QRect( iconPos, iconSize)

        removeIconSize = QSize( 16, 16 )
        removeIconPos = QPoint( iconSize.width()+iconPos.x()-10, iconPos.y()-5 )
        self.removeIconRect = QRect( removeIconPos, removeIconSize )

        # DRAW ICONS
        self.drawIcon( painter, iconPos, iconSize )

        # DRAW REMOVE ICON
        if self.mouseOver:
            self.drawIcon( painter, removeIconPos, removeIconSize, 'remove' )

    def drawIcon( self, painter, pos, size, btn='main' ):
        '''Draw icon with status'''
        painter.drawRect( pos.x(), pos.y(), size.width(), size.height() )

    def minimumSizeHint( self ):
        return QSize( *self.fixedSize )

    def sizeHint( self ):
        return QSize( *self.fixedSize )

if __name__ == '__main__':
    import os
    app = QApplication( sys.argv )
    w = QWidget()
    w.setLayout( QGridLayout() )
    btn2 = FancyButtonSmall()

    w.layout().addWidget( btn2, 1, 0 )

    w.show()
    sys.exit( app.exec_() ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T07:34:03.413

在询问后答案变得明显的那些时刻之一：使用 enterEvent() 和 leaveEvent() 而不是 mouseMoveEvent() 是一种享受。

# java - 谐波系列

> ID：10629591
> 
> 赞同：2
> 
> 时间：2012-05-17T03:51:47.850
> 
> 标签：java, php

我在将 PHP 脚本移至 Java 时遇到问题。我正在使用谐波系列。我让它在 PHP 中工作，但是当我将它转换为 Java 时，它永远不会结束（无限循环）。有任何想法吗？或者甚至是更好的方法来完成它？

PHP：

```
<?php

$current = 0;
$num = 2.5;

while($current < $num) {
    for($i = 1; $current < $num; $i++) {
        $current = $current + (1 / $i);
    }

    // this ($current) will return "2.5928571428571" (which it should)
    echo $current;
}

?> 
```

Java（Java 等价物，但未完成循环）：

```
double current = 0;
double num = 2.5;
int i = 0;

while(current < num) {
    for(i = 1; current < num; i++) {
        current = current + (1 / i);
    }

    System.out.println(current);
} 
```

或者也许我完全做错了：o。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T03:55:07.277

current never goes beyond 1 since 1/n=0 where n > 1.

A couple points:

1.  There should be no need to have the while loop or declare i outside the for loop
2.  use a double type

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:56:03.250

Use double numbers, not ints since int division will do funny things.

the fraction uses int literals, and int division *must* return an int, in your case it will often return 0 if i > 1

i.e.,

```
current = current + (1 / i); // will return current + 0 if i > 1 
```

Better to make the numerator a double literal by changing 1 to 1.0:

```
current = current + (1.0 / i); 
```

Now double division will do what you expect division should do.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:40:15.230

int/int = int（如果结果是假设 .07 int 不能保存浮点数，它将为 0）所以

int/float = float（希望你得到）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T04:01:06.403

问题在于类型转换。在这种情况下，PHP 不关心类型，所以它在那里工作。

另一方面，在 Java 中，您需要强制`double`分区上的类型才能正常工作。

```
double current = 0;
double num = 2.5;
int i = 0;

while(current < num) {
    for(i = 1; current < num; i++) {
        current += (1.0 / i); // Force the result to be a decimal with 1.0
    }
System.out.println(current);
} 
```

或者，您可以从`i`一个`double`开始。

```
...
for(double i = 1.0; current < num; i+=1.0)
  current += 1.0/i; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T04:01:09.353

创建一个中间变量只是为了查看总和是否是问题并能够调试。

```
double current = 0;
double num = 2.5;
double inc;

while(current < num) {
    for(int i = 1; current < num; i++) {
        inc = 1 / (double)i;
        current += inc;
    }
System.out.println(current);
} 
```

如果它解决了您的问题，则最终代码可以是

```
double current = 0;
double num = 2.5;

while(current < num) {
    for(int i = 1; current < num; i++) {
        current += (1 / (double)i);
    }
System.out.println(current);
} 
```

# javascript - 在所有浏览器中确定 javascript 中所选文件的类型

> ID：10629596
> 
> 赞同：0
> 
> 时间：2012-05-17T03:52:05.257
> 
> 标签：javascript, file, browser

在一个`<input type="file" >`元素中，我正在选择一个扩展名为 .srt 的文件并使用 javascript 确定文件的类型。我试过这个

```
var file=document.getElementById('fselect').files[0];
success = file.type =='application/x-subrip'? true : false;
console.log('selected a  file of type='+file.type);
console.log('selected a subtitle file='+success); 
```

但是，我只在`chrome 18.0.1025.168`

```
selected a  file of type= application/x-subrip
selected a subtitle file= true 
```

但是在`firefox 12`安装了萤火虫之后，我得到了

```
selected a  file of type= 
selected a subtitle file= false 
```

我对此感到困惑..我怎样才能始终如一地确定两种浏览器中的文件类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T03:59:19.883

您可以使用 HTML5 的文件 API。目前每个现代浏览器都支持它，包括 IE 9。

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

```
function handleFileSelect(evt) {
    var files = evt.target.files;                  // file list
    for (var i = 0, f; f = files[i]; i++) {
        if(f.type){
            console.log(f.type); 
        }else{
            var match = f.name.match(/^.+(\.[^\.]+)$/);
            if(match) {
                console.log(match[1]);
            }else{
                console.log('no MIME type nor extension');
            } 
        }
    }
}

document
    .getElementById('files')
    .addEventListener('change', handleFileSelect, false); 
```

```
<input type="file" id="files"> 
```

**现场演示：http:** [//jsfiddle.net/DerekL/f2WmJ/](http://jsfiddle.net/DerekL/f2WmJ/)

它在浏览器中*应该*是相同的，因为它是一个标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-11T14:16:07.600

```
<input type="file" onChange="showExcelData(this)">

function showExcelData(event)
{
    var file=event.value;
    file=file.substr(file.lastIndexOf("/")+1,file.length);
    file=file.substr(file.lastIndexOf(".")+1,file.length);
    console.log(file);

    /* You Can Return the Data or Anything You Want to Do */
} 
```

# javascript - HTML tag attribute referenced to an object

> ID：10629599
> 
> 赞同：0
> 
> 时间：2012-05-17T03:52:31.127
> 
> 标签：javascript, html

I have an object that acts like a cursor(table) and it's like this:

```
function cursor() {
  this.code = "";
  this.name = ""; } 
```

Then I have a variable that will be used as the cursor itself:

```
var lib_book = new cursor(); 
```

Then I have a table with a custom attribute 'record_source' which is referenced to my cursor:

```
<table record_source="lib_book" id="grdbook"> 
```

Now I have a Refresh_Record function that binds the cursor to the table object. I can do it with this code: (sorry for not including all the codes)

```
Refresh_Record(lib_book,grdbook); 
```

Now the question is this, is there a way to change the code to this:

```
Refresh_Record(grdbook); 
```

since I have lib_book as an attribute. But lib_book is just a string there. Is there a way that I can reference the record_source attribute to the actual cursor?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:32:58.127

将所有游标保存在全局数组中，并将游标的数组索引保存为表中的属性。

您可以使用 eval 以其他方式执行此操作，但使用 eval 不是一个好主意

# eclipse - Alt-R broken in Eclipse indigo

> ID：10629605
> 
> 赞同：1
> 
> 时间：2012-05-17T03:53:02.513
> 
> 标签：eclipse

For some reason "Alt-R" no longer opens the "Run" menu in Eclipse Indigo. All the other Alt- combinations work to open the other menus, but not Alt-R. Also, this combo doesn't seem to be bound to any other command. What gives?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:45:33.517

好的，问题不是eclipse，而是sysdeo Tomcat插件。删除插件，Alt-R 神奇地开始工作。

修复方法是进入键绑定并删除两个 tomcat 键绑定 - “Tomcat 快速重启”和“Tomcat 启动/停止”。奇怪的是，这些应该绑定到 CTRL-T 和 CTRL-SHIFT-T。所以我不知道他们为什么要干扰 CTRL-R。

# mysql - Can't pass row 999 in mysql database why?

> ID：10629608
> 
> 赞同：2
> 
> 时间：2012-05-17T03:53:36.723
> 
> 标签：mysql, database

So I hava a database (mysql) in my website with a table in it, in this table I have 10 columns for every row the first is an int primary key auto increase, the second one is the name that's unique they can't be the same, and the others are just text fields, so I have been entering data into it, the problem have come when I hit the 999 id mark that's the 999 row, I can't insert row 1000 it doesn't accept it at least I'm not able to see it in the table, and if I try to add it again it tells me that the name it already exists, so what can I do? Why Am I not able to add more rows?, why it thinks the name exists if the row with that name does not exists? Can I get any advise from, in advance Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:21:28.457

我将 id 列从 int 更改为 bigint，这样我就可以越过 999 行！

# jquery - JQuery解决方案将特定标题从一个项目复制到另一个div中

> ID：10629610
> 
> 赞同：2
> 
> 时间：2012-05-17T03:53:49.343
> 
> 标签：jquery, attributes, copy

这可能是一个困难的... 我有一个 Drupal 站点，我需要找到一种方法从节点的主 DIV 中的特定点复制标题字符串，并将标题作为纯文本添加到作者链接之后。这是以下示例节点设置：

```
<div id="node-19435" class="node"><div class="meta">

<div class="submitted">
<span class="authors">
  <a href="/authors/john_doe">John Doe</a> Copied Title Here surrounded by new span
</span>
</div>

<div class="terms">
  <ul class="links inline">
  <li><a href="/headlines" title="he">Headlines</a></li>
  <li><a href="/authors/john_doe" title="Original Title Is Here">John Doe</a></li>
  </ul>
</div>

</div></div> 
```

列表项可以按任何顺序排列，因此唯一可以使用的组件是作者的实际姓名字符串，或作者页面的链接路径。

请记住，该节点有时会在单个页面上的多个 div.node div 中重复，并且必须在它找到的每个 div.node 中执行相同的操作。感谢您的帮助。几天来，我一直在为此绞尽脑汁，看到你所有的专家回答，我能说的更多时候启发了我。

请帮我找到一个很好的 JQuery 解决方案来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:11:34.910

如果我正确理解了您的问题，我认为您正在尝试做这样的事情，对吗？

```
$('div.meta').each(function(){

   var titlelink = $('div.terms li a[href^="/authors/"]', this);
   var span = $('<span />', { text: titlelink.attr('title') });
   $('span.authors a[href="' + titlelink.attr('href') + '"]', this).after(span);

}); 
```

我假设在 div.meta 块中匹配链接的唯一方法是通过以“/authors”开头的链接的 URL。

# c - 如何从一个字符串中获取两个数字并在一个变量中转换为 int？

> ID：10629612
> 
> 赞同：0
> 
> 时间：2012-05-17T03:54:07.760
> 
> 标签：c, logic

我正在努力完成我的作业，这是从今天下午以来我无法弄清楚的最后一件事。

比如说我在数组中有这样的字符串，`ABCD24EFG`我想`24`在我初始化的变量中获取该数字`int`

我可以用一个数字来做，然后像这样转换

```
number_holder = array_name[4] - '0'; 
```

我会进入`2`但`number_holder`我怎样才能得到整个喜欢`24`并将它们转换成`int`类型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T03:59:03.220

您可以使用著名的算法

```
n = 0
while (char = nextchar()) {
  n = n*10 + digit(char)
} 
```

用伪语言

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T03:57:47.340

尝试

```
 number_holder_1 = array_name[4] - '0';
    number_holder_2 = array_name[5] - '0'; 
```

你会得到两个号码。并执行

```
number = number_holder_1  * 10 + number_holder_2 ; 
```

如果数字不能是 2 位数字，那么您可以使用 for 循环来获取所需的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T03:58:48.417

你可以使用这个逻辑。

```
number_holder=array_name[4] - '0';
number_holder=number_holder*10 + (array_name[5] - '0'); 
```

这样您还可以处理数组值，如 ABCD243EFG、ABCD2433EFG ...

整数 0-9 的 ASCII 值是 48 - 57 ..所以用它来查找数组中的整数。

```
 number_holder=0;
   For (int i=0;i<arraylength;i++) 
    {
        if(array[i]<58 && array[i]>47)
        number_holder=number_holder*10+array[i] - '0';
    } 
```

您将在 number_holder 中获得结果。

# android - Android facebook SDK，用不同语言的个人资料将图片上传到墙上？

> ID：10629613
> 
> 赞同：1
> 
> 时间：2012-05-17T03:54:10.373
> 
> 标签：android, facebook, upload, image

目前我可以使用我的应用程序将消息和图片发布到我的墙上，通过查找专辑“Wall Photos”到目前为止它工作正常，我让我的一个朋友在他的手机上测试我的应用程序，看看它是否有效对任何用户都很好，当他尝试上传图片时它不起作用，现在我认为这可能与他的个人资料是西班牙语的事实有关，因此无法查找专辑“Wall photos”可能，我看了他的相册，令我惊讶的是，他没有任何与他的语言相当的“墙照片”相册，所以..长话短说：

a) 如果用户的个人资料使用不同的语言，我如何查找“Wall Photos”相册？

b) 如果“Wall Photos”相册不存在，我该如何创建它？

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:20:39.313

发布您的代码如何将图像上传到 Facebook。这是一个对我来说运行良好的示例代码，看看可能对你有帮助。在我的代码中没有创建任何相册墙照片。我的照片被上传到墙上。看看...

```
private void fbImageSubmit() {
    if (facebook != null) {
        if (facebook.isSessionValid()) {
            try {
                byte[] data = null;

                // Bitmap bi = BitmapFactory.decodeFile(Constants.imgShare);
                ByteArrayOutputStream baos = new ByteArrayOutputStream();

                bmScreen.compress(Bitmap.CompressFormat.JPEG, 100, baos);
                data = baos.toByteArray();

                Bundle parameters = new Bundle();
                parameters.putString("message", strmsg);
                parameters.putString("method", "photos.upload");
                parameters.putByteArray("picture", data);

                facebook.request(null, parameters, "POST");
                /*
                 * time = Calendar.getInstance().getTime().getHours() + ":"
                 * + Calendar.getInstance().getTime().getMinutes();
                 */

                currentTime = DateFormat.format("hh:mm", d.getTime());
                currentDate = DateFormat.format("dd/MM/yyyy", d.getTime());

                Cursor cursor = Constants.dbHelper
                        .GetDataFromImageName(Constants.enhancedImage
                                .getImagename());
                if (cursor.getCount() > 0) {
                    Constants.dbHelper.updateData(currentDate.toString(),
                            currentTime.toString(), "Facebook", "Image");
                } else {
                    Constants.dbHelper.insertData("true");
                }
                Toast.makeText(getApplicationContext(),
                        "Image uploaded successfully.", Toast.LENGTH_LONG)
                        .show();

            } catch (Exception e) {
                // TODO: handle exception
                System.out.println(e.getMessage());
            }
        }
    }
} 
```

// bmscreen 是我的图像位图；希望对你有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:03:35.090

尝试使用

```
parameters.putString("caption", "ooo xxx"); 
```

代替

```
parameters.putString("message", "test post on wall"); 
```

应该做的伎俩，它对我有用:)

附言。感谢用户分享他的答案，这真的很有帮助：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T15:40:14.113

> a) 如果用户的个人资料使用不同的语言，我如何查找“Wall Photos”相册？

在查询相册的 Graph API 时将`locale`参数设置为 - 然后您将获得“Wall Photos”而不是本地化的相册名称。`en_US`

> b) 如果“Wall Photos”相册不存在，我该如何创建它？

呃，我不认为自己创建它是一个好主意，因为通常它是由 Facebook 自动创建的——所以当 FB 稍后为用户的第一张实际墙贴照片创建相册时，这可能会发生冲突。

# jpa-2.0 - 对于基于地图的@ElementCollection，可在@MapKeyColumn 上更新和插入

> ID：10629622
> 
> 赞同：0
> 
> 时间：2012-05-17T03:55:31.183
> 
> 标签：jpa-2.0

我有两个`@Embeddable`用 Map 映射的例子。

[http://hwellmann.blogspot.com/2010/07/jpa-20-mapping-map.html](http://hwellmann.blogspot.com/2010/07/jpa-20-mapping-map.html)

[http://www.objectdb.com/api/java/jpa/MapKeyColumn](http://www.objectdb.com/api/java/jpa/MapKeyColumn)

一个说

```
@MapKeyColumn(..., insertable = false, updatable = false) 
```

另一个说

```
@MapKeyColumn(...) // without insertable = false, updatable = false 
```

谁能告诉我哪一个是对的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:50:17.780

只有第二个示例是关于映射[@Embeddable](http://docs.oracle.com/javaee/6/api/javax/persistence/Embeddable.html)。第一个是关于`Map<String, String>`元素收集 - 不包括嵌入。

在第二个中将可插入和可更新设置为 false 的原因是元素集合中的“语言”属性可以通过地图的键和地图的值访问。将其中一个设置为只读可以避免地图键和“语言”属性中的冲突数据。

不需要将可插入和可更新设置为 false ，`Map<String, String>`因为只有映射的键只映射一次。

# c# - how to get data from cookie to view, C# in mvc3 using Viewbag

> ID：10629624
> 
> 赞同：0
> 
> 时间：2012-05-17T03:56:00.217
> 
> 标签：c#, asp.net-mvc-3, cookies, view

This is the first time for writing C# in MVC. I add the row value to cookie and want it to genrate the number of rows, but I don't know how to do it.

If you guys have better solutions, I will be appreciated. :)

First, Create cookie

```
if (Request.Cookies["UserSettings"] != null)
        {
            HttpCookie myCookie = new HttpCookie("UserSettings");
            myCookie["Row"] = "5";
            myCookie.Expires = DateTime.Now.AddDays(1d);
            Response.Cookies.Add(myCookie);
        } 
```

Second, Read Cookie, in Controller read rows from cookie and then send through "Viewbag.RowCookie" to view

```
 if (Request.Cookies["UserSettings"] != null)
        {
            string userSettings;
            if (Request.Cookies["UserSettings"]["Row"] != null)
            {
                userSettings = Request.Cookies["UserSettings"]["Row"];
                ViewBag.RowCookie = userSettings;
            }

        }
        return View(); 
```

Finally, in View, Then error appears when click the page. (Note I checked the row value is fine in another page.)

```
 @{int row = 3 ;
      row = (int)ViewBag.RowCookie; } // the problem is this line

     @for (int i = 0; i < row ; i++)
    {
        <tr>
            <td>
                <p>
                    @Html.Label("Name")
                    @Html.EditorFor(model => model.Name[i])</p>
            </td>
            <td>
                <p>
                    @Html.Label("Prob" + (i+1))
                    @Html.EditorFor(model => model.Prop[i])</p>
            </td>
            <td>
                <p>
                    @Html.Label("Forecast" + (i+1))
                    @Html.EditorFor(model => model.Forecast[i])</p>
            </td>
            <td> <p>
                    @Html.DisplayFor(model => model.AxB[i])
                  </p>
            </td>
             <td> <p>
                    @Html.DisplayFor(model => model.PowAxB[i])
                  </p>
            </td>
        </tr> 
```

Thank you all for helping.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:35:50.093

您不能通过使用将字符串转换为整数`(int) myString`

设置 ViewBag 时，您可以这样做

```
ViewBag.RowCookie = int.Parse(userSettings); 
```

那么它就`int row = ViewBag.RowCookie;`在视图中。

也就是说，在不知道你在做什么的情况下，我很难想象你会想要像这样使用 cookie 和 ViewBag 的情况。如果您不想使用超过某个索引的数组中的数据，请在创建视图模型时将其限制为该索引。那么你的 for 循环就是

```
@for (int i = 0; i < Model.Name.length; i++) 
```

或者更好，将所有属性重构为 IEnumerable 集合

在视图中限制它

```
@for (int i = 0; i < Model.YourCollection.Count(); i++) 
```

附带说明：

```
if (Request.Cookies["UserSettings"] != null)
    {
        HttpCookie myCookie = new HttpCookie("UserSettings");
        myCookie["Row"] = "5";
        myCookie.Expires = DateTime.Now.AddDays(1d);
        Response.Cookies.Add(myCookie);
    } 
```

你确定你不是那个意思`Request.Cookies["UserSettings"] == null`？

# php - 下载最新版本 Apache (httpd) 的 URL？

> ID：10629625
> 
> 赞同：1
> 
> 时间：2012-05-17T03:56:01.433
> 
> 标签：php, apache, sh

我正在编写一个小 bash 脚本，我想在其中下载 Apache (httpd) 和 PHP 的最新稳定版本。

**澄清**：我要求的不是 2012 年 5 月 17 日的“当前”版本，而是脚本运行日期（将来）的“最新”版本。

最好的方法是什么？

我知道我可以从 获取例如 Apache `http://httpd.apache.org/download.cgi`，但我不想解析该页面以找出最新版本，然后提交表单以选择镜像。理想情况下，我希望能够调用单个 URL，例如：

```
wget http://httpd.apache.org/download/latest 
```

但我显然不存在像上面这样的 URL - 或者是吗？

如果没有，使脚本下载最新版本的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T07:22:42.693

希望这将为您提供最新版本。

```
curl -s "http://archive.apache.org/dist/httpd/?C=M;O=D" | grep \>httpd\-*\.*\.*\.tar\.gz\< | head -n1 | cut -d\> -f 3 | cut -d\< -f 1 
```

截至目前，它会 fetch `httpd-2.4.2.tar.gz`。

接下来，您可以附加它`http://archive.apache.org/dist/httpd/{latest_build}`以下载它。

# python-3.x - Create a program that takes a parameter a two-dimensional list of integers and returns True if each row of the table sums up to an odd number

> ID：10629629
> 
> 赞同：0
> 
> 时间：2012-05-17T03:56:24.500
> 
> 标签：python-3.x

Any help would be greatly appreciated. As you can see from what I have so far, my knowledge of the python language is...well...weak.

example:

```
oddrow([[1, 2], [9, 4], [7, 6]])
True

def oddrow(lst):
  for item in lst:
    if sum(item[0:n]) #lost 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:05:16.467

Try the [`all`](http://docs.python.org/dev/library/functions.html#all) built-in:

> Return True if all elements of the iterable are true (or if the iterable is empty).

So a list comprehension can map the *oddness* of the sum of the elements of one inner list into boolean space - e.g. the result for `[[1, 2], [9, 4], [7, 6]]` would look like `[True, True, True]`. And `all` will do the rest.

```
def oddrow(lst): 
    return all([ sum(l) % 2 == 1 for l in lst ])

# since it's short, why not just make it a one-liner
oddrow = lambda lst: all([ sum(l) % 2 == 1 for l in lst ]) 
```

# android - 安卓搜索栏

> ID：10629633
> 
> 赞同：-1
> 
> 时间：2012-05-17T03:57:06.410
> 
> 标签：android, search, searchbar

> **可能重复：**
> [android中的搜索栏小部件？](https://stackoverflow.com/questions/6121048/search-bar-widget-in-android)

我必须在我的应用程序中实现“搜索栏”。请让我知道如何/从哪里开始，因为我是 android.Code 的新手。非常感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T04:11:37.290

我认为您正在寻找[**创建搜索界面**](http://developer.android.com/guide/topics/search/search-dialog.html)。

# http - telnet send a http request

> ID：10629634
> 
> 赞同：7
> 
> 时间：2012-05-17T03:57:10.997
> 
> 标签：http, post

I am using telnet to send a http request , like this:

```
telnet> open 192.168.4.135 8087
Trying 192.168.4.135...
Connected to 192.168.4.135.
Escape character is '^]'.
POST /rpc/ HTTP/1.1
HOST:192.168.4.135:8087
Content-length:18
Content-type:application/x-http-form-urlencoded

action=loadrsctype
HTTP/1.1 200 OK
Date: Thu, 17 May 2012 03:52:53 GMT
Content-Length: 45
Content-Type: text/html; charset=ISO-8859-1

return=fail&error=Configuration doesn't existHTTP/1.1 400 Bad Request
Content-Type: text/html
Connection: close
Date: Thu, 17 May 2012 03:52:53 GMT
Content-Length: 94

<HTML><HEAD>
<TITLE>400 Bad Request</TITLE>
</HEAD><BODY>
<H1>Bad Request</H1>
</BODY></HTML>
Connection closed by foreign host. 
```

the response code is 200 , but why there is a paragraph like this :

```
HTTP/1.1 400 Bad Request
Content-Type: text/html
Connection: close
Date: Thu, 17 May 2012 03:52:53 GMT
Content-Length: 94

<HTML><HEAD>
<TITLE>400 Bad Request</TITLE>
</HEAD><BODY>
<H1>Bad Request</H1>
</BODY></HTML> 
```

This is the output of the server or telnet itself ? How to avoid to show this ?

--update-- When i change "HTTP/1.1" to "http/1.1", i get the right response. Now i wonder wheather this is requirement of protocol or related with the implementation of the server?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T16:01:28.657

在中，除非另有声明，否则`HTTP 1.1`将考虑所有连接。`persistent`

然后...我认为服务器正在接收一些虚假的换行符并以`Bad Request`.

如果您使用`http/1.1`而不是`HTTP/1.1`可以将版本回退到`1.0`默认情况下不持久的版本，并且在`200 OK`响应之后它会断开连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-15T15:44:41.817

尝试替换`&`为`&amp;`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:20:04.070

您正在访问的 URL 处的代码正在打印一些文本：

```
return=fail&error=Configuration doesn't exist 
```

但随后您的代码继续打印 HTTP 400 错误。可能您在打印响应后忘记中止，因此您的代码也继续打印 HTTP 400。

# compiler-construction - Unable to run RPC programs using rpcgen

> ID：10629649
> 
> 赞同：0
> 
> 时间：2012-05-17T03:59:45.967
> 
> 标签：compiler-construction, rpc

I have just started learning about RPC and the rpcgen compiler. I am using the FreeBSD OS and trying to implement a simple program that prints "Hello World" to the console using RPC. I first created the '.x' file and using rpcgen, obtained the client and server stubs. Also, I am using both server and client code on the same machine for now. The whole code compiles fine but when I run the program like this: "./firsttry localhost", it outputs the following error: "RPC: Program not registered". What am I doing wrong here? Could it be a problem with the code or is my implementation incorrect?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T01:59:14.847

1.  首先，检查是否安装了“rpcbind”，如果没有先安装：

    ```
    ~$ sudo apt-get install rpcbind 
    ```

`*   Then run your server code with superuser permissions as

    ```
     ~$ sudo ./firsttry localhost 
    ```

    *   There won't be any error now.`

 `Note : instead of writing server and client code by yourself, use the strength of **rpcgen** . While compiling your .x file, try

```
 ~$ rpcgen -a filename.x 
```` 它将自动生成所有文件。只需进行少量更改（在服务器和客户端代码中）。试试看，省时省力。

# c - linux下gcc中的静态变量重新初始化

> ID：10629650
> 
> 赞同：0
> 
> 时间：2012-05-17T04:00:39.523
> 
> 标签：c, linux, gcc

我们有一个带有 3 个静态变量的函数。这很奇怪，但我们有时会看到 3 个静态变量之一正在重新初始化：

```
static uchar * Foo( uchar c_par1, uchar c_par2, uchar c_par3 )
{
   static char        s_var1[10];
   static uchar       c_var2     = 0;
   static uchar       c_var3     = 0;
   .....
   return s_var1;
} 
```

在上述情况下， c_var2 有时会重新初始化。

我们确信它已重新初始化，因为我们还打印了每个变量的内存位置，并且它永远不会改变。我们怀疑 s_var1 可能会覆盖 c_var2 但这两个变量的内存位置相距甚远。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T04:06:46.327

> 我们怀疑 s_var1 可能会覆盖 c_var2 但这两个变量的内存位置相距甚远。

这听起来像是某处的全局缓冲区溢出。

运行`nm -n a.out`，找出*附近* `c_var2`有哪些变量。然后寻找*这些*变量引起的溢出。

或者使用[Address Sanitizer](http://code.google.com/p/address-sanitizer/)，它应该能够很容易地为您提供错误的确切位置。

另一种调试方法：在 GDB 下运行程序，并在`c_var2`. 每次`c_var2`修改时都应触发观察点。

> 例如，如果我在某处添加延迟

如果您的程序是多线程的，请注意静态变量和线程不能很好地协同工作。

如果它不是多线程的，我看不出延迟会产生什么影响（除非您也在处理信号）。

# php - 仅使用文件名而不使用 php 命令在命令行中执行 php 脚本

> ID：10629653
> 
> 赞同：2
> 
> 时间：2012-05-17T04:01:11.893
> 
> 标签：php, command-line, shellexecute, command-line-arguments

如何配置 linux/php 以运行 php 脚本，而不必每次我想运行脚本时都键入 php -f 命令。IE

代替：

```
$ php -f /path/to/file/script.php 
```

当我这样做时，我希望脚本运行：

```
/path/to/file/script.php 
```

我的 google-fu 在这方面让我失望了，而且大多数关于从命令行运行 php 的所有其他 SO 问题都没有真正的帮助。我们工作中的远程服务器就是这样做的，我对它是如何完成的感到有些困惑。我正在考虑与 .php 扩展名有关的事情？在任何 php 文件中都没有使用 hash-bangs。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T04:03:08.650

1.  使您的`script.php`可执行文件`chmod +x /path/to/file/script.php`
2.  将 php 解释器的路径放在第一行，例如`#!/path/to/php`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:12:36.250

I don't know how you could do this without using a hash-bang/shebang. The only ideas that come to mind are configuring the shell to treat files ending in .php specially, or telling the kernel how to execute these files, as it does with ELF format binaries (I think this feature used to be used to launch DOS .exe files directly, without needing to specify the name of the emulator.)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-04T20:36:31.647

```
alias /path/to/file/script.php='php -f /path/to/file/script.php' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-20T12:17:01.293

我能得到的最接近的方法是为“php -f”设置一个别名：
*alias zz="php -f"*

您现在应该可以使用：
zz /path/to/file/script.php

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-11-20T13:04:27.040

将此行放入脚本的第一行：

```
#!/usr/bin/php
<?php 
```

运行此命令后：

```
chmod 0755 yourscript.php 
```

然后你可以运行 ./yourscript.php

# cakephp - CakePHP 无法在数组中返回值 (soapUi)

> ID：10629654
> 
> 赞同：1
> 
> 时间：2012-05-17T04:01:19.380
> 
> 标签：cakephp, soap, wsdl, soapui

我在cakephp中有一些这样的功能

```
/** 
    * Get one record 
    * @param string $type
    * @return string[]
    */ 
    function readType($type = NULL) 
    { 
        $arr[] = array(
           "bookTitle" => "ThaiBook",
           "bookYear"  => 2007,
           "bookAuthor"=> "Oke"
         );
        $arr[] = array(
           "bookTitle" => "EnglishBook",
           "bookYear"  => 2001,
           "bookAuthor"=> "Eko"
         );

         return $arr;
    } 
```

并且soapui不能像这样在数组中返回值

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://schema.example.com" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <SOAP-ENV:Body>
      <ns1:readTypeResponse>
         <readTypeReturn>
            ***<xsd:string>Array</xsd:string>
            <xsd:string>Array</xsd:string>***
         </readTypeReturn>
      </ns1:readTypeResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我的问题在哪里？以及如何解决这个问题谢谢:)

# java - Saxparser 不解析 HTML 数字字符引用。显示的问号

> ID：10629656
> 
> 赞同：0
> 
> 时间：2012-05-17T04:01:42.487
> 
> 标签：java, xml-parsing, saxparser

我正在尝试解析一个包含 - 和 ’ 数字字符引用的 xml。在解析它给我输出为“？”。不仅是这两个，xml 中的任何 HTML/XML 数字字符引用都会产生此问题。saxparser 只接受预定义的实体

我使用默认处理程序 saxparser。system out in character 方法向我显示数字字符引用的问号。

我做了很多谷歌搜索，到处我看到数字字符引用的使用不应该产生任何问题。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:32:31.140

`System.out`in character 方法向我显示数字字符引用的问号。

这听起来像是您的输出/控制台的字符编码问题。以下适用于 JSE 7

public static void main(String[] args) throws Exception{ SAXParser parser = SAXParserFactory.newInstance().newSAXParser();

```
 XMLReader reader = parser.getXMLReader();
    reader.setContentHandler(new ContentHandler() {

        // other methods omitted 

        @Override
        public void characters(char[] ch, int start, int length)
                throws SAXException {
            System.out.println(new String(ch, start, length));

        }
    });

    FileReader fReader = new FileReader("/tmp/HelloWorld.xml");
    reader.parse(new InputSource(fReader));
    fReader.close();
} 
```

使用 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Test>
Hello World&#8217;
</Test> 
```

输出：Hello World'</p>

您是否尝试过使用调试器查看传入的字符数组？

# vba - 账户余额

> ID：10629657
> 
> 赞同：-2
> 
> 时间：2012-05-17T04:02:17.153
> 
> 标签：vba

如何使用 vb 6.0 计算账户余额并访问 dbase 示例：

```
January 2000   2500.00
Febuary 2000   2300.00 
```

当用户选择 2000 年 1 月时，它将显示 2500.00，当用户选择 2000 年 2 月时，它将显示 4800.00。

希望任何人都可以帮助我谢谢

```
Dim TOTAL, FMACT As Double 
TOTAL = 0 
Set rs2 = New ADODB.Recordset 

With rs2 
    .Open "SELECT * FROM SW WHERE dtaYear=" & cmbYear.Text & " ", Con, 1, 2 
    Let FMACT = rs2![SWACTFM] 

    If .RecordCount > 0 Then 
        TOTAL = TOTAL + FMACT 
        .MoveFirst 

        Do While rs2.EOF = True 
            .MoveNext 
            ExcelWS.Cells(6, 7) = TOTAL 
        Loop 
    End If 

   .Close 
   Set rs2 = Nothing 
End With 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:27:21.677

你的代码有问题

1.  由于 Total 在`Do While`循环之外，因此它没有累积
2.  `.MoveNext`应该在之后执行`ExcelWS.Cells(6,7) = TOTAL`，否则会错过第一条记录

我不确定您想要什么，如果您每次只想从数据库中获取一条记录，您似乎不需要 while 循环。你可以试试这个。

```
Private Total As Double
Total = 0

Private Sub Cal_Total()
    Set rs2 = New ADODB.Recordset 

    With rs2 
        .Open "SELECT * FROM SW WHERE dtaYear=" & cmbYear.Text & " ", Con, 1, 2 

        .MoveFirst
        If .RecordCount > 0 Then 
            Do While rs2.EOF = False 
                Total = Total + rs2![SWACTFM]
                .MoveNext
            Loop

            ExcelWS.Cells(6,7) = Total
        End If 

       .Close 
       Set rs2 = Nothing 
    End With
End Sub 
```

# silverlight - Silverlight Textblock 中的文本会随着文本的变化而不断变化其大小

> ID：10629660
> 
> 赞同：0
> 
> 时间：2012-05-17T04:02:59.103
> 
> 标签：silverlight, text, silverlight-4.0, textblock

我正在用 silverlight 编写一个计数器应用程序，并使用一个文本块来显示秒数。每当第二个发生变化时，例如从 01 到 01 等等，第一个数字 (0) 会随着秒数的宽度变化而移动一点点。

我想知道，如果某处有设置，我可以强制我的文本块中的数字始终占据相同数量的空间，所以如果其中一个正在改变，另一个不会移动。

# asp.net-mvc-3 - 使用带有布尔值的 Html.RadioButtonFor 不会写 Checked="Checked"

> ID：10629671
> 
> 赞同：4
> 
> 时间：2012-05-17T04:04:25.823
> 
> 标签：asp.net-mvc-3

我在使用 RadioButtonFor 助手时遇到问题。当传入的值为 true 时，它​​不会在任一单选按钮中显示“检查”。当值为 false 时，它​​工作得很好。

我从我正在处理的项目中复制了这段代码并创建了一个示例应用程序，并且我能够复制该问题。如果我将值硬编码为真或假，它似乎可以工作，但是当我使用“！string.IsNullOrEmpty（allgroups）”时它不会。

从视图：

```
<div>
    @Html.RadioButtonFor(m => m.AllGroups, true) All Groups
    @Html.RadioButtonFor(m => m.AllGroups, false) Current Groups
</div> 
```

从视图模型：

```
 public bool AllGroups { get; set; } 
```

从控制器：

```
public ActionResult Index(string allgroups)
{
    var model = new ProgramGroupIndexViewModel
      {
          AllGroups = !string.IsNullOrEmpty(allgroups)
      };
    return View(model);
} 
```

从 IE 中查看源代码：

```
<div>
    <input id="AllGroups" name="AllGroups" type="radio" value="True" /> All Groups
    <input id="AllGroups" name="AllGroups" type="radio" value="False" /> Current Groups
</div> 
```

当 AllGroups 的值为 false 时从查看源代码（注意它有效）：

```
<div>
    <input id="AllGroups" name="AllGroups" type="radio" value="True" /> All Groups
    <input checked="checked" id="AllGroups" name="AllGroups" type="radio" value="False" /> Current Groups
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:11:55.737

模型绑定变得混乱，因为您将操作参数命名为与模型属性相同。更改您的`Index`操作参数的名称，它应该可以工作。

```
public ActionResult Index(string showAllGroups)
{
    var model = new ProgramGroup
                    {
                        AllGroups = !string.IsNullOrEmpty(showAllGroups);
                    };
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T04:39:51.007

如果您从模型返回 bool，则无需明确检查取消选中 mvc 将自行完成，只需编写

```
<div>
    @Html.RadioButtonFor(m => m.AllGroups) 
    @Html.RadioButtonFor(m => m.AllGroups)
</div> 
```

但是，如果您想明确地这样做

您应该使用以下语法来检查/取消选中

```
Html.RadioButtonFor(m => m.AllGroups, "DisplayText", new { @checked = "checked" }) 
```

在源代码中，您可以看到它为 value not checked 属性设置 true / false

在你看来你可以写

```
@if(m.AllGroups)
{
  Html.RadioButtonFor(m => m.AllGroups, "DisplayText", new { @checked = "checked" })
}
else
{
   Html.RadioButtonFor(m => m.AllGroups, "DisplayText" })
} 
```

# google-maps - 在谷歌地图上显示链接标签云？

> ID：10629672
> 
> 赞同：0
> 
> 时间：2012-05-17T04:04:25.610
> 
> 标签：google-maps, tag-cloud

我想在谷歌地图上显示一组链接作为云。我不知道该怎么做。我首先尝试使用 ELabels 甚至谷歌地图 API MapLabel 来在地图上显示标签，但它们不能是链接。如何创建标签云并将其显示在谷歌地图上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:10:14.260

use linkliberito, i think it has what you totally needed. :)

# c# - 如何将 Dtos 与 NHibernate 加载的对象一起使用

> ID：10629682
> 
> 赞同：0
> 
> 时间：2012-05-17T04:06:35.293
> 
> 标签：c#, wpf, nhibernate, .net-4.0

我有一个像下面这样的类层次结构，我通过 NHibernate 从 DB 加载数据。我使用自动映射。

```
public class Unit
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
}
public class Value
{
    public virtual int Id { get; set; }
    public virtual double Quantity { get; private set; }
}
public class DirectQuantity : Value
{
}
public class DependentQuantity : Value
{
    private double _getValue()
    {
        throw new NotImplementedException();
    }
    public override double Quantity
    {
        get
        {
            return _getValue();
        }
    }
}
public class MainCategory
{
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual string Notes { get; set; }
}
public class ItemTemplate
{
    public virtual int Id { get; set; }
    public virtual string Description { get; set; }
    public virtual Unit Unit { get; set; }
    public virtual MainCategory Category { get; set; }
    public virtual List<ItemTemplate> Children { get; set; }
}
public class Item
{
    public virtual int Id { get; set; }
    public virtual string Note { get; set; }
    public virtual Value Quantity { get; set; }
    public virtual ItemTemplate Template { get; set; }
    public virtual List<Item> Children { get; set; }
}
public class BSR
{
    public virtual int Id { get; set; }
    public virtual string Description { get; set; }
    public virtual List<MainCategory> Categories { get; set; }
} 
```

我这样写我的 DTO：

```
public class UnitDto : INotifyPropertyChanged
{
    public int Id { get; set; }

    private string _name;
    public string Name
    {
        get { return _name; }
        set 
        { 
            _name = value;
            PropertyChanged(this, new PropertyChangedEventArgs("Name"));
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
}
public class ValueDto : INotifyPropertyChanged
{
    public int Id { get; set; }
    public double Quantity
    {
        get { return _Quantity; }
        set
        {
            if (_Quantity != value)
            {
                _Quantity = value;
                OnPropertyChanged(QuantityPropertyName);
            }
        }
    }

    private void OnPropertyChanged(string PropertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
        //throw new NotImplementedException();
    }
    private double _Quantity;
    public const string QuantityPropertyName = "Quantity";

    public event PropertyChangedEventHandler PropertyChanged;
}
public class DirectQuantityDto : ValueDto
{
}
public class DependentQuantityDto : ValueDto
{
}
public class MainCategoryDto : INotifyPropertyChanged
{
    public int Id { get; set; }
    public string Name
    {
        get { return _Name; }
        set
        {
            if (_Name != value)
            {
                _Name = value;
                OnPropertyChanged(NamePropertyName);
            }
        }
    }

    private string _Name;
    public const string NamePropertyName = "Name";

    public string Notes
    {
        get { return _Notes; }
        set
        {
            if (_Notes != value)
            {
                _Notes = value;
                OnPropertyChanged(NotesPropertyName);
            }
        }
    }
    private string _Notes;
    public const string NotesPropertyName = "Notes";
    public event PropertyChangedEventHandler PropertyChanged;
    private void OnPropertyChanged(string PropertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
        //throw new NotImplementedException();
    }
}
public class ItemTemplateDto :INotifyPropertyChanged
{
    public int Id { get; set; }

    public string Description
    {
        get { return _Description; }
        set
        {
            if (_Description != value)
            {
                _Description = value;
                OnPropertyChanged(DescriptionPropertyName);
            }
        }
    }
    private string _Description;
    public const string DescriptionPropertyName = "Description";

    public int? UnitID
    {
        get { return _UnitID; }
        set
        {
            if (_UnitID != value)
            {
                _UnitID = value;
                OnPropertyChanged(UnitIDPropertyName);
            }
        }
    }
    private int? _UnitID;
    public const string UnitIDPropertyName = "UnitID";

    public int? MainCategoryId
    {
        get { return _MainCategoryId; }
        set
        {
            if (_MainCategoryId != value)
            {
                _MainCategoryId = value;
                OnPropertyChanged(MainCategoryIdPropertyName);
            }
        }
    }
    private int? _MainCategoryId;
    public const string MainCategoryIdPropertyName = "MainCategoryId";

    public ObservableCollection<int> ChildItemIds { get; set; }

    private void OnPropertyChanged(string PropertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
        //throw new NotImplementedException();
    }

    public event PropertyChangedEventHandler PropertyChanged;
}
public class ItemDto : INotifyPropertyChanged
{
    public virtual int Id { get; set; }
    public string Note
    {
        get { return _Note; }
        set
        {
            if (_Note != value)
            {
                _Note = value;
                OnPropertyChanged(NotePropertyName);
            }
        }
    }
    private string _Note;
    public const string NotePropertyName = "Note";

    public int? QuantityId
    {
        get { return _QuantityId; }
        set
        {
            if (_QuantityId != value)
            {
                _QuantityId = value;
                OnPropertyChanged(QuantityIdPropertyName);
            }
        }
    }
    private int? _QuantityId;
    public const string QuantityIdPropertyName = "QuantityId";

    public int? ItemTemplateId
    {
        get { return _ItemTemplateId; }
        set
        {
            if (_ItemTemplateId != value)
            {
                _ItemTemplateId = value;
                OnPropertyChanged(ItemTemplateIdPropertyName);
            }
        }
    }
    private int? _ItemTemplateId;
    public const string ItemTemplateIdPropertyName = "ItemTemplateId";

    public ObservableCollection<int> ChildItemIds { get; set; }

    //public virtual string Note { get; set; }
    //public virtual ValueDto Quantity { get; set; }
    //public virtual ItemTemplateDto Template { get; set; }
    //public virtual List<ItemDto> Children { get; set; }

    private void OnPropertyChanged(string PropertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
        //throw new NotImplementedException();
    }

    public event PropertyChangedEventHandler PropertyChanged;
}
public class BSRDto : INotifyPropertyChanged
{
    public int Id { get; set; }
    public string Name
    {
        get { return _Name; }
        set
        {
            if (_Name != value)
            {
                _Name = value;
                OnPropertyChanged(NamePropertyName);
            }
        }
    }
    private string _Name;
    public const string NamePropertyName = "Name";

    public string Description
    {
        get { return _Description; }
        set
        {
            if (_Description != value)
            {
                _Description = value;
                OnPropertyChanged(DescriptionPropertyName);
            }
        }
    }
    private string _Description;
    public const string DescriptionPropertyName = "Description";

    public ObservableCollection<int> CategoryIds { get; set; }

    public List<MainCategoryDto> Categories { get; set; }

    private void OnPropertyChanged(string PropertyName)
    {
        PropertyChanged(this, new PropertyChangedEventArgs(PropertyName));
        //throw new NotImplementedException();
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

我现在的问题是如何在不通过 Id 引用这些对象的情况下在 UI 中显示对象关系？我可以想办法做到这一点，但我的猜测是这将需要大量的编码。例如，我必须能够在 UI 中将 an 分配给`ItemTemplateDto`an`ItemDto`并将多个`ItemDto`s 作为子项分配给`ItemDto`. 人们有没有标准的方式来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T11:23:39.120

如果您不需要以某种方式传输对象，那么为什么不直接使用实体呢？

请参阅此处的 Databindingfactory [http://msdn.microsoft.com/en-us/magazine/ee819139.aspx](http://msdn.microsoft.com/en-us/magazine/ee819139.aspx)以在实体上自动实现 INPC。

For assigning child items to an item maybe show some kind of tree and enable drag and drop one item under another which should effectivly add one item object to another items child collection.

# c# - 为什么我会收到不间断的消息框？

> ID：10629683
> 
> 赞同：0
> 
> 时间：2012-05-17T04:06:36.063
> 
> 标签：c#, dialog

所以我在做一个突破性的游戏，到目前为止一切都很顺利，但是当我让球图片框离开屏幕时，我似乎得到了无限数量的消息框。

`here is the code snippet`

```
 using System;
   using System.Collections.Generic;
   using System.ComponentModel;
   using System.Data;
   using System.Drawing;
   using System.Linq;
   using System.Text;
   using System.Windows.Forms;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    List<Brick> bricks = new List<Brick>();
    Ball _ball;
    Paddle _paddle;
    DateTime startTime = DateTime.Now;
    DateTime startTime2 = DateTime.Now;

    float ballVelocityX = 0;
    float ballVelocityY = -1;
    float ballSpeed = 20;

    public Form1()
    {
        InitializeComponent();
        timer1.Enabled = true;
        timer2.Enabled = true;
        startTime = DateTime.Now;
        System.Media.SoundPlayer sndPlayer;
        sndPlayer = new System.Media.SoundPlayer(Properties.Resources._01_Calm_1);
        foreach (PictureBox brick in panel1.Controls)
        {
            if (brick.Name != "ball" && brick.Name != "paddle")
                bricks.Add(new Brick(brick));
            else if (brick.Name == "ball")
                _ball = new Ball(brick);
            else if (brick.Name == "paddle")
                _paddle = new Paddle(brick);
            //sndPlayer.Play();

        }
    }

    private void gameTimer_Tick(object sender, EventArgs e)
    {
        checkBrickCollision();
        checkPaddleCollision();
        checkBallScreenBounds();

        ball.SetBounds(ball.Location.X + (int)(ballVelocityX * ballSpeed),
            ball.Location.Y + (int)(ballVelocityY * ballSpeed),
            ball.Size.Width, ball.Size.Height);
        paddle.SetBounds(Cursor.Position.X - panel1.Location.X, paddle.Location.Y,
            paddle.Size.Width, paddle.Size.Height);
    }

    private void checkBallScreenBounds()
    {
        if (_ball.BallRectangle.Location.X + 25 > panel1.Size.Width)
            ballVelocityX *= -1;
        else if (_ball.BallRectangle.Location.X < 0)
            ballVelocityX *= -1;
        else if (_ball.BallRectangle.Location.Y < 0)
            ballVelocityY *= -1;
        else if (_ball.BallRectangle.Location.Y > panel1.Size.Height)
            ballOffScreen();
    }

    private void ballOffScreen()
    {
        new_start();
        Startnew startnew = new Startnew();
        startnew.Show();
        this.Close();
    }

    private void new_start()
    {            
        TimeSpan elapsedTime = DateTime.Now - startTime2;
        DialogResult result;
        result = MessageBox.Show("Your total time is " + ":" + elapsedTime.Minutes + elapsedTime.Seconds
            + " would you like to play aigan?", "Application1", MessageBoxButtons.YesNo);
        if (result == DialogResult.No)
        {
            Form1 form1 = new Form1();
            form1.Show();
        }
        else if (result == DialogResult.Yes)
        {
            this.Close();
        }

        //MessageBox.Show("Total time is " + elapsedTime.Minutes + ":" + elapsedTime.Seconds);

    }

    private void checkPaddleCollision()
    {
        int tmpBallVelocityX = _paddle.CheckPaddleMovement();

        if (_ball.BallRectangle.IntersectsWith(_paddle.PaddleRectangle))
        {
            ballVelocityX = tmpBallVelocityX;
            ballVelocityY *= -1;
        }
    }

    private void checkBrickCollision()
    {
        Rectangle ballRectangle = _ball.BallRectangle;

        foreach (Brick brick in bricks)
            if (brick.IntersectWith(ballRectangle))
            {
                bricks.Remove(brick);
                ballVelocityX *= -1;
                ballVelocityY *= -1;
                break;
            }
    }

    private void panel1_MouseEnter(object sender, EventArgs e)
    {
        Cursor.Hide();
    }

    private void panel1_MouseLeave(object sender, EventArgs e)
    {
        Cursor.Show();
    }
    public void Form_closse(object sender, FormClosedEventArgs e)
    {
        //ProgramInfo.ProgramState = State.Splash_Screen;
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {

    }
    private void timer1_tick(object sender, EventArgs e)
    {
        LabelTime.Text = "It is " + DateTime.Now;
    }
    private void timer2_tick(object sender, EventArgs e)
    {
        TimeSpan elapsedTime = DateTime.Now - startTime;
        labelElapsedTime.Text = "Time Elapsed " + elapsedTime.Minutes + ":" + elapsedTime.Seconds;
      }
    }
  }
    ` #**EDIT**#`
    `**because things were getting a bit confusing i posted all my code.**` 
```

我用一个按钮完成了这个，它工作正常，但我只需要弹出一次。有没有办法只调用一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:11:17.913

如果 new_start() 是 Form1 的一部分，

以下行看起来像是罪魁祸首，但需要更多代码才能仔细查看。

```
if (result == DialogResult.No)
    {
        Form1 form1 = new Form1();
        form1.Show(); //This line is creating endless messagebox on selecting NO
    } 
```

**更新**根据评论中的信息，

你可以用 flag 控制 new_start 函数

```
private bool checkNewGame = false;
private void new_start()
{        
    if(checkNewGame) return; 
    checkNewGame = true;    
    TimeSpan elapsedTime = DateTime.Now - startTime2;
    DialogResult result;
    result = MessageBox.Show("Your total time is " + ":" + elapsedTime.Minutes +   elapsedTime.Seconds
        + " would you like to play aigan?", "Application1", MessageBoxButtons.YesNo);
    if (result == DialogResult.No)
    {
        Form1 form1 = new Form1();
        form1.Show();
    }
    else if (result == DialogResult.Yes)
    {
       checkNewGame = true; 
       this.Close();

    } 
```

**更新 2**

代替

```
if (result == DialogResult.No)
{
    Form1 form1 = new Form1();
    form1.Show(); //This line is creating endless messagebox on selecting NO
} 
```

做类似的事情

```
if (result == DialogResult.No)
{
    this.Clear(); // Create new function Clear, and clear all the Form state.
}

void clear()
{
  ... //RESET all form state
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:22:07.220

很可能应该重新启动游戏的代码没有清除“ball-Off-Screen”情况，您的游戏立即进入游戏结束。

注意：调试应该立即显示行为的原因......

# java - 摆动中的自动完成文本字段

> ID：10629684
> 
> 赞同：1
> 
> 时间：2012-05-17T04:06:36.220
> 
> 标签：java, swing, autocomplete

我正在为餐厅计费做一个小项目。在用户输入项目时的计费表单中，我需要显示可能的项目列表，用户可以从中选择适当的项目，并且所选项目的所有详细信息应该是填在表中。（就像超市计费一样）。这些项目存储在数据库（MySQL）中，我使用 java swing 作为用户界面

任何人都可以建议一些方法来实现我的要求。还有一些有用的链接。谢谢你..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T04:21:10.940

您可以使用[自动完成包](http://www.jdocs.com/swingx/1.0/org/jdesktop/swingx/autocomplete/package-summary.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-30T11:40:17.713

您可以使用[Swingx](https://swingx.java.net/)。包含对 Swing GUI 工具包的扩展，包括提供富客户端应用程序通常需要的功能的新的和增强的组件。亮点包括：

表格、树和列表的排序、过滤、突出显示 查找/搜索 自动完成 登录/身份验证框架 TreeTable 组件 可折叠面板组件 日期选择器组件 每日提示组件

# web-services - How to implement security in a SOAP webservice?

> ID：10629685
> 
> 赞同：0
> 
> 时间：2012-05-17T04:06:37.917
> 
> 标签：web-services, security, ws-security

I am having a SOAP web service. I am using Apache Axis2 to generate the Javabean skeleton from WSDL file and i implemented the functionality.Now i am looking to secure the web service using user name token. What is the option available to do that.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T13:25:01.110

Axis2[可通过使用模块进行扩展，](http://axis.apache.org/axis2/java/core/modules/index.html) Axis2 的安全模块称为[Rampart](http://axis.apache.org/axis2/java/rampart/)。您可以使用此模块来提供安全功能。

您可能会发现这篇文章很有用：[UsernameToken Authentication with Rampart](http://wso2.org/library/240)

# html - 用于视频和音频的 FFMPEG 命令

> ID：10629686
> 
> 赞同：0
> 
> 时间：2012-05-17T04:06:45.090
> 
> 标签：html, audio, video, ffmpeg

我不会构建下一个 YouTube 或 iTunes，但我确实需要让我的用户能够上传他们的视频和音频——然后以尽可能高的质量和尽可能小的文件大小将其呈现在网络上。

问题：

1.  输入：我应该支持哪些视频和音频格式？我猜我应该尝试支持最常见的格式，但我不完全确定它们是什么。另外，我不确定是否应该支持最常见的格式。也许有理由不支持某种格式。

2.  FOR OUTPUT：我应该生成哪些视频和音频输出格式？我想使用 HTML5 和标签，但知道我应该考虑支持非 HTML5 浏览器。我应该为视频制作 OGG、MP4 和 FLV 吗？音频呢？

3.  给定用户上传的未知视频和音频文件，我应该使用什么命令来生成所需的输出格式。我想要一个命令来转换为特定的输出——并且希望不必根据输入对命令做任何不同的事情（知道文件的 MIME 类型是什么对我来说会很痛苦，等等。并且不能真正执行“如果输入是 WMV，则运行此命令”逻辑）。

建议FFMPEG专家？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:33:11.703

1.  **支持你真正支持**的东西。构建 FFmpeg 以支持尽可能多的格式，然后不再向用户提供支持的格式列表，而是报告 FFmpeg 是否在他们的文件中阻塞。用户可以（几乎）知道容器格式是什么，而这些信息不足以让您知道您是否可以正确地对其进行转码。

2.  **在 mp4 容器中使用 h264 视频，在 m4a 容器中使用 aac 音频**。由于视频将在线播放，因此没有理由支持多种格式。HTML5 和 Flash 都可以播放这些格式，因此除了您将获得的无数输入格式之外，还有大量的输出格式，不要给自己带来额外的问题。

3.  **`ffmpeg -i <input video file> -c:v libx264 -c:a libfaac output.mp4`**. 当然这只是一个开始，您可能很想调整质量`-qscale`（`-b`以尽可能小的文件大小。”

# matlab - 当文件中的内容有不同的格式时，如何使用“csvread”？

> ID：10629691
> 
> 赞同：3
> 
> 时间：2012-05-17T04:07:23.030
> 
> 标签：matlab, file-io, csv

我有一个 .csv 文件，格式如下所示：

映射.csv

```
5188.40811,TMobileML
5131.40903,TMobileGregsapt
5119.40791,TMobileJonsapartment
5123.40762,TMobileRedhat 
```

我想将它存储在一个 4 x 2 数组中，当我有一个值（例如，`5131.40903`这是一个“字符串”而不是“整数”）时，我想找到映射关系`TMobileGregsapt`。但是我遇到了两个问题，第一个是我不能使用`csvread('mapping.csv')`，它会有一些错误：（我认为问题可能`5131.40903`是`int`当我使用 csvread 时，但`TMobileGregsapt`它是一个字符串......）

```
??? Error using ==> dlmread at 145
Mismatch between file and format string.
Trouble reading number from file (row 1, field 2) ==> TMobi

Error in ==> csvread at 52
    m=dlmread(filename, ',', r, c); 
```

即使我使用`dlmread('cell4.csv', ',')`，它仍然有一些错误：

```
??? Error using ==> dlmread at 145
Mismatch between file and format string.
Trouble reading number from file (row 1, field 2) ==> TMobi 
```

第二个问题是如何以简单的方式找到映射关系，天真的方法是使用 forloop 来查找数组的位置。

谢谢你的帮助：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T04:22:41.770

csvread 和 dlmread 都只适用于数字数据。像这样的东西应该适合你

```
out=textread('tmp.csv', '%s', 'whitespace',',');
nums =  out(1:2:end);
strs =  out(2:2:end);
% find index of 'TMobileGregsapt'
ind = find(strcmp('TMobileGregsapt',strs));
nums(ind) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-24T21:17:26.393

如果您有混合文本/数字 csv 但您不知道格式是什么，或者它是异构的，另一个答案将起作用，请使用来自：[http ://www.mathworks.com/matlabcentral/fileexchange 的“csv2cell”函数/20836-csv2cell](http://www.mathworks.com/matlabcentral/fileexchange/20836-csv2cell)

```
c = csv2cell( 'yourFile.csv', 'fromfile'); 
```

`c(1, :)`会给你的标题，`c(2:end, k)`会给你每一列（没有标题），`for k = 1:size(c, 2)`

# c++ - c ++编译错误：'<'标记之前的预期初始化程序

> ID：10629693
> 
> 赞同：0
> 
> 时间：2012-05-17T04:07:50.863
> 
> 标签：c++, templates, vector, initializer

我正在尝试编译我自己编写的 c++ 程序。而且我在编译它时遇到了麻烦。

quicksort.hpp**文件**是：

```
#include <iostream>
#include <cmath>
#include <algorithm>
#include <vector>
#include "cv.h"
#include "cv.hpp"
#include "highgui.h"

    void print<CvPoint3D32f>(vector<CvPoint3D32f>& input)
    {
            for ( int i = 0; i < input.size(); i++)
            {
            std::cout << input[i].y << " ";
            }
            std::cout << std::endl;

    } 
```

而**test.cpp**是：

```
#include <iostream>
#include <cmath>
#include <algorithm>
#include <vector>
#include "cv.h"
#include "highgui.h"
#include "quicksort.hpp"

    int main()
    {

        vector<CvPoint3D32f> input;
        for(int r = 0; r <= 9;r++)
        {
             input.push_back(cvPoint3D32f(2.0f+r,2.1f+r,3.1f+r)); 
        }
        std::cout << "Input: ";
        print(input);

    return 0;
    } 
```

但我收到这样的错误：

```
quicksort.hpp:4: error: expected initializer before ‘&lt;’ token
test.cpp: In function ‘int main()’:
test.cpp:22: error: ‘print’ was not declared in this scope
test.cpp:22: error: expected primary-expression before ‘&gt;’ token 
```

是否可以帮助我弄清楚为什么会出现此错误？

我正在使用 Debian Etch(Linux)、g++(gcc 版本 4.1.2 20061115 (prerelease) (Debian 4.1.1-21)) 和 opencv 0.9.7-4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:16:57.977

说啊：

```
void print(vector<CvPoint3D32f>& points){ 
```

这将解决问题。如果不是，您需要声明一个模板，如果真的有必要，请查看您的 CvPoint3D32f 的模板专业化，但这将是矫枉过正。

# ruby-on-rails - 如果在 db 文本字段的内容中找到 URL，则即时生成 link_to？

> ID：10629695
> 
> 赞同：0
> 
> 时间：2012-05-17T04:08:06.000
> 
> 标签：ruby-on-rails

我有一个自动报告工具（corp Intranet），管理员有几个文本区域框可以为电子邮件正文的不同部分输入一些文本。

我想做的是解析文本区域的内容并用链接标签包装任何超链接（所以当报告出来时，会有链接而不是文本网址）。

有没有一种简单的方法来做这样的事情，而不想办法解析文本以在找到的周围添加链接标签（['http:','https:','ftp:] TO the first SPACE after）？

谢谢你！Ruby 1.87，Rails 2.3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:47:53.293

有很多方法可以实现你的目标。一种方法是使用正则表达式。如果您从未听说过正则表达式，那么这个[wikipedia 条目](http://en.wikipedia.org/wiki/Regular_expression)应该能让您快速上手。

例如：

```
content_string = "Blah ablal blabla lbal blah blaha http://www.google.com/ adsf dasd dadf dfasdf dadf sdfasdf dadf dfaksjdf kjdfasdf http://www.apple.com/ blah blah blah."
content_string.split(/\s+/).find_all { |u| u =~ /^https?:/ } 
```

哪个会返回：`["http://www.google.com/", "http://www.apple.com/"]`

现在，对于问题的后半部分，您将使用上面返回的数组将文本链接替换为超链接。

```
links = ["http://www.google.com/", "http://www.apple.com/"]
links.each do |l|
  content_string.gsub!(l, "<a href='#{l}'>#{l}</a>")
end 
```

`content_string`现在将更新以包含所有 http/https URL 的 HTML 超链接。

正如我之前提到的，有很多方法可以解决这个问题 - 查找 URL，您还可以执行以下操作：

```
require 'uri'
URI.extract(content_string, ['http', 'https']) 
```

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:11:29.253

做一个帮手：

```
def make_urls(text)
  urls = %r{(?:https?|ftp|mailto)://\S+}i
  html_text = text.gsub urls, '<a href="\0">\0</a>'
  html_text
end 
```

在视图上只需调用此函数，您将获得预期的输出。像 ：

```
irb(main):001:0> string = 'here is a link: http://google.com'
=> "here is a link: http://google.com"
irb(main):002:0> urls = %r{(?:https?|ftp|mailto)://\S+}i
=> /(?:https?|ftp|mailto):\/\/\S+/i
irb(main):003:0> html = string.gsub urls, '<a href="\0">\0</a>'
=> "here is a link: <a href=\"http://google.com\">http://google.com</a>" 
```

# android - 带有编辑文本和复选框的自定义列表视图

> ID：10629699
> 
> 赞同：3
> 
> 时间：2012-05-17T04:08:41.920
> 
> 标签：android, checkbox, android-listview

我是编程新手，在使用`getCheckedItemPositions()`for 复选框和从自定义列表视图中的编辑文本中获取编辑值时遇到问题。谁能帮我举个例子来创建具有上述功能的自定义列表视图。谢谢。

*这是自定义列表视图 xml 代码

```
<CheckBox android:id="@+id/checkBox" android:layout_height="wrap_content"
 android:layout_width="wrap_content" 
 android:layout_alignParentRight="true"
 android:text="CheckBox"
 android:onClick="clickHandler"
 ></CheckBox>
<TextView android:layout_height="wrap_content"
 android:layout_width="fill_parent" android:text="TextView" 
 android:id="@+id/textView1" 
 android:layout_alignParentLeft="true"
  android:layout_centerHorizontal="true" android:layout_marginBottom="14dp" 
```

android:layout_toLeftOf="@+id/checkBox">

*这是设置列表视图的代码

lv1 = (ListView)dialog.findViewById(R.id.l1); adapter2 = new SimpleCursorAdapter(this, R.layout.custom, cursor2, new String[] {"ItemName"}, new int[] {R.id.textView1});

```
 lv1.setItemsCanFocus(false);
         lv1.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
         lv1.setAdapter(adapter2); 
```

*这是我在检查时尝试做的

公共无效 onClick（查看 v）{

```
 int len = lv1.getCount();
                 SparseBooleanArray checked = lv1.getCheckedItemPositions();
                 for (int i = 0 ; i < len; i++)
                  if (checked.get(i)) {
                   String item = mArrayList.get(i);

                mItems.add(mArrayList.get(i));

             System.out.println(item);

                   /* do whatever you want with the checked item */
                  } 
```

但这不起作用。而且我想以这种方式使用编辑文本来获取值。当我检查并单击按钮应用程序终止时。 ![触发 Onclick() 时的 Logcat](../Images/ae43e49980ec96ab4ea96bf2d82d896b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:18:06.793

以下代码将解决您的问题。

```
public class SimpleCursorAdapter extends ArrayAdapter {
    private Context mcontext;   
    private View rowview;
    LayoutInflater inflater;
    public static ArrayList<Boolean > itemchecked=new ArrayList<Boolean>();
    public SimpleCursorAdapter(Context context,ArrayList<String> mylist)
    {
        super(context,your layout id);
        mcontext=context;

        //this is the important step    
        for (int i = 0; i < this.getCount(); i++) 
        {
            itemchecked.add(i,false); // initializes all items value with false
        }
    }

    public View getView(final int position, View convertView, ViewGroup parent) {
        rowview=convertView;
        if(convertView==null)
        {
            rowview = inflater.inflate(R.yourlayout, parent, false);
        }

        TextView textView_heading = (TextView) rowview.findViewById(R.id.textView1);

        CheckBox checkbox_detail=(CheckBox) rowview.findViewById(R.id.checkBox1);
        checkbox_detail.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                CheckBox cb = (CheckBox) v.findViewById(R.id.checkBox1);

                if (cb.isChecked()) {
                    itemchecked.set(position, true);
                    // do some operations here
                } else if (!cb.isChecked()) {
                    itemchecked.set(position, false);
                    // do some operations here
                }   
            }
        });
        checkbox_detail.setChecked(itemchecked.get(position));
        textView_heading.setText(userheading_list.get(position));

        return rowview;
    }   
}
//now the custom list part finish 
```

现在，要从列表中获取所有信息并查看选中了哪个复选框：

```
for(int i=0;i<yourlistadapterobject.getCount();i++)
{  
    View content_view=msg_adapter.getView(i,null , user_detail_list);
    System.out.println("the list count"+user_detail_list.getCount());
    if(MyContactAdapter.itemchecked.get(i))
    {
        System.out.println("is checked true"); 
        TextView tv_heading=  (TextView) content_view.findViewById(R.id.textView1);

        String text=tv_heading.getText();
    }
} 
```

通过这样做，您可以获得针对选中复选框的所有信息。

# php - 将上传文件的名称保存到我的 SQL 数据库上的这个表中

> ID：10629700
> 
> 赞同：2
> 
> 时间：2012-05-17T04:09:02.873
> 
> 标签：php, rename

这就是我想要完成的。我需要用户能够加载图片并将其显示在他们的个人资料页面上。我的 sql 数据库中有一个名为“members”的表，其字段如下：用户名、密码、名字、姓氏、照片。除照片外的所有字段均已在注册表中填写。一旦用户进入他们的个人资料页面，他们会找到一个表格来将图片上传到他们的个人资料中。我得到了upload_form.php ..（下面列出的代码）和另一个文件upload_processor.php（后面列出的代码）的代码

此代码成功地将文件加载到我的文件夹 upload_files 中，并将文件重命名为... 1140732936-filename.jpg 以确保文件是唯一的。如何将 1140732936-filename.jpg 的名称保存到我的 sql 表上的“照片”字段中？有什么办法吗？请帮忙....

upload_form 的代码

```
 <?php

    // filename: upload.form.php

    // first let's set some variables

    // make a note of the current working directory relative to root.
    $directory_self = str_replace(basename($_SERVER['PHP_SELF']), '',     $_SERVER['PHP_SELF']);

    // make a note of the location of the upload handler script
    $uploadHandler = 'http://' . $_SERVER['HTTP_HOST'] . $directory_self .   'upload.processor.php';

    // set a max file size for the html upload form
    $max_file_size = 3000000; // size in bytes

    // now echo the html page
    ?> 
```

这是同一文件上的 html 表单

```
<form id="Upload" action="<?php echo $uploadHandler ?>" enctype="multipart/form-data" method="post">

    <h1>
        Upload form
    </h1>

    <p>
        <input type="hidden" name="MAX_FILE_SIZE" value="<?php echo $max_file_size ?>">
    </p>

    <p>
        <label for="file">File to upload:</label>
        <input id="file" type="file" name="file">
    </p>

    <p>
        <label for="submit">Press to...</label>
        <input id="submit" type="submit" name="submit" value="Upload me!">
    </p>

</form>

</body> 
```

这是处理表单的文件的代码。

```
 <?php

    // filename: upload.processor.php

    // first let's set some variables

    // make a note of the current working directory, relative to root.
    $directory_self = str_replace(basename($_SERVER['PHP_SELF']), '', $_SERVER['PHP_SELF']);

    // make a note of the directory that will recieve the uploaded file
    $uploadsDirectory = $_SERVER['DOCUMENT_ROOT'] . $directory_self . 'uploaded_files/';

    // make a note of the location of the upload form in case we need it
    $uploadForm = 'http://' . $_SERVER['HTTP_HOST'] . $directory_self . 'updateprofile.php';

    // make a note of the location of the success page
    $uploadSuccess = 'http://' . $_SERVER['HTTP_HOST'] . $directory_self . 'upload.success.php';

    // fieldname used within the file <input> of the HTML form
    $fieldname = 'file';

    // Now let's deal with the upload

    // possible PHP upload errors
    $errors = array(1 => 'php.ini max file size exceeded',
            2 => 'html form max file size exceeded',
            3 => 'file upload was only partial',
            4 => 'no file was attached');

    // check the upload form was actually submitted else print the form
    isset($_POST['submit'])
    or error('the upload form is neaded', $uploadForm);

    // check for PHP's built-in uploading errors
    ($_FILES[$fieldname]['error'] == 0)
    or error($errors[$_FILES[$fieldname]['error']], $uploadForm);

    // check that the file we are working on really was the subject of an HTTP upload
    @is_uploaded_file($_FILES[$fieldname]['tmp_name'])
    or error('not an HTTP upload', $uploadForm);

    // validation... since this is an image upload script we should run a check  
    // to make sure the uploaded file is in fact an image. Here is a simple check:
    // getimagesize() returns false if the file tested is not an image.
    @getimagesize($_FILES[$fieldname]['tmp_name'])
    or error('only image uploads are allowed', $uploadForm);

    // make a unique filename for the uploaded file and check it is not already
    // taken... if it is already taken keep trying until we find a vacant one
    // sample filename: 1140732936-filename.jpg
    $now = time();
    while(file_exists($uploadFilename = $uploadsDirectory.$now.'-'.$_FILES[$fieldname]['name']))
    {
     $now++;
    }
    // now let's move the file to its final location and allocate the new filename to it
    @move_uploaded_file($_FILES[$fieldname]['tmp_name'], $uploadFilename)
    or error('receiving directory insuffiecient permission', $uploadForm);

    // If you got this far, everything has worked and the file has been successfully saved.
    // We are now going to redirect the client to a success page.
    header('Location: ' . $uploadSuccess);

    // The following function is an error handler which is used
    // to output an HTML error page if the file upload fails
    function error($error, $location, $seconds = 5)
    {   
    header("Refresh: $seconds; URL=\"$location\"");
    echo '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"'."\n".
    '"http://www.w3.org/TR/html4/strict.dtd">'."\n\n".
    '<html lang="en">'."\n".
    '    <head>'."\n".
    '        <meta http-equiv="content-type" content="text/html; charset=iso-   8859-1">'."\n\n".
    '        <link rel="stylesheet" type="text/css" href="stylesheet.css">'."\n\n".
    '    <title>Upload error</title>'."\n\n".
    '    </head>'."\n\n".
    '    <body>'."\n\n".
    '    <div id="Upload">'."\n\n".
    '        <h1>Upload failure</h1>'."\n\n".
    '        <p>An error has occured: '."\n\n".
    '        <span class="red">' . $error . '...</span>'."\n\n".
    '         The upload form is reloading</p>'."\n\n".
    '     </div>'."\n\n".
    '</html>';
    exit;
    } // end error handler

    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:16:51.497

在页面upload_processor.php 中，在图片复制到服务器后添加一些SQL。我没有代码，因此我假设您使用 microtime() 生成图像名称。将生成的图像名称保存在名为 $variable 的变量中。然后使用该变量重命名图像并

```
 <?php

    // filename: upload.processor.php

    // first let's set some variables

    // make a note of the current working directory, relative to root.
    $directory_self = str_replace(basename($_SERVER['PHP_SELF']), '', $_SERVER['PHP_SELF']);

    // make a note of the directory that will recieve the uploaded file
    $uploadsDirectory = $_SERVER['DOCUMENT_ROOT'] . $directory_self . 'uploaded_files/';

    // make a note of the location of the upload form in case we need it
    $uploadForm = 'http://' . $_SERVER['HTTP_HOST'] . $directory_self . 'updateprofile.php';

    // make a note of the location of the success page
    $uploadSuccess = 'http://' . $_SERVER['HTTP_HOST'] . $directory_self . 'upload.success.php';

    // fieldname used within the file <input> of the HTML form
    $fieldname = 'file';

    // Now let's deal with the upload

    // possible PHP upload errors
    $errors = array(1 => 'php.ini max file size exceeded',
            2 => 'html form max file size exceeded',
            3 => 'file upload was only partial',
            4 => 'no file was attached');

    // check the upload form was actually submitted else print the form
    isset($_POST['submit'])
    or error('the upload form is needed', $uploadForm);

    // check for PHP's built-in uploading errors
    ($_FILES[$fieldname]['error'] == 0)
    or error($errors[$_FILES[$fieldname]['error']], $uploadForm);

    // check that the file we are working on really was the subject of an HTTP upload
    @is_uploaded_file($_FILES[$fieldname]['tmp_name'])
    or error('not an HTTP upload', $uploadForm);

    // validation... since this is an image upload script we should run a check  
    // to make sure the uploaded file is in fact an image. Here is a simple check:
    // getimagesize() returns false if the file tested is not an image.
    @getimagesize($_FILES[$fieldname]['tmp_name'])
    or error('only image uploads are allowed', $uploadForm);

    // make a unique filename for the uploaded file and check it is not already
    // taken... if it is already taken keep trying until we find a vacant one
    // sample filename: 1140732936-filename.jpg
    $now = time();
    while(file_exists($uploadFilename = $uploadsDirectory.$now.'-'.$_FILES[$fieldname]['name']))
    {
     $now++;
    }
    // now let's move the file to its final location and allocate the new filename to it
    @move_uploaded_file($_FILES[$fieldname]['tmp_name'], $uploadFilename)
    or error('receiving directory insuffiecient permission', $uploadForm);

    // If you got this far, everything has worked and the file has been successfully saved.
    // We are now going to redirect the client to a success page.
    //connect database
    mysql_query("update members set photo='".$uploadFilename."' where member_id='".$_SESSION['id']."'");

    header('Location: ' . $uploadSuccess);

    // The following function is an error handler which is used
    // to output an HTML error page if the file upload fails
    function error($error, $location, $seconds = 5)
    {   
    header("Refresh: $seconds; URL=\"$location\"");
    echo '<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"'."\n".
    '"http://www.w3.org/TR/html4/strict.dtd">'."\n\n".
    '<html lang="en">'."\n".
    '    <head>'."\n".
    '        <meta http-equiv="content-type" content="text/html; charset=iso-   8859-1">'."\n\n".
    '        <link rel="stylesheet" type="text/css" href="stylesheet.css">'."\n\n".
    '    <title>Upload error</title>'."\n\n".
    '    </head>'."\n\n".
    '    <body>'."\n\n".
    '    <div id="Upload">'."\n\n".
    '        <h1>Upload failure</h1>'."\n\n".
    '        <p>An error has occured: '."\n\n".
    '        <span class="red">' . $error . '...</span>'."\n\n".
    '         The upload form is reloading</p>'."\n\n".
    '     </div>'."\n\n".
    '</html>';
    exit;
    } // end error handler

    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T03:22:56.030

这是我在页面顶部的代码

```
 <?php require_once('Connections/trusted.php'); ?>
    <?php
    if (!isset($_SESSION)) {
    session_start();
    }
    $MM_authorizedUsers = "";
    $MM_donotCheckaccess = "true";
    // *** Restrict Access To Page: Grant or deny access to this page
    function isAuthorized($strUsers, $strGroups, $UserName, $UserGroup) { 
    // For security, start by assuming the visitor is NOT authorized. 
    $isValid = False; 

    // When a visitor has logged into this site, the Session variable MM_Username set  equal to their username. 
    // Therefore, we know that a user is NOT logged in if that Session variable is blank. 
  if (!empty($UserName)) { 
  // Besides being logged in, you may restrict access to only certain users based on an ID established when they login. 
// Parse the strings into arrays. 
$arrUsers = Explode(",", $strUsers); 
$arrGroups = Explode(",", $strGroups); 
if (in_array($UserName, $arrUsers)) { 
  $isValid = true; 
} 
// Or, you may restrict access to only certain users based on their username. 
if (in_array($UserGroup, $arrGroups)) { 
  $isValid = true; 
} 
if (($strUsers == "") && true) { 
  $isValid = true; 
} 
} 
return $isValid; 
}

$MM_restrictGoTo = "updateprofile.php";
if (!((isset($_SESSION['MM_Username'])) && (isAuthorized("",$MM_authorizedUsers,       $_SESSION['MM_Username'], $_SESSION['MM_UserGroup'])))) {   
$MM_qsChar = "?";
$MM_referrer = $_SERVER['PHP_SELF'];
if (strpos($MM_restrictGoTo, "?")) $MM_qsChar = "&";
if (isset($_SERVER['QUERY_STRING']) && strlen($_SERVER['QUERY_STRING']) > 0) 
$MM_referrer .= "?" . $_SERVER['QUERY_STRING'];
$MM_restrictGoTo = $MM_restrictGoTo. $MM_qsChar . "accesscheck=" .   urlencode($MM_referrer);
 header("Location: ". $MM_restrictGoTo); 
exit;
}
?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "",    $theNotDefinedValue = "") 
  {
if (PHP_VERSION < 6) {
  $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
 }

$theValue = function_exists("mysql_real_escape_string") ?   mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

switch ($theType) {
case "text":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;    
case "long":
case "int":
  $theValue = ($theValue != "") ? intval($theValue) : "NULL";
  break;
case "double":
  $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
  break;
case "date":
  $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
  break;
case "defined":
  $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
  break;
 }
 return $theValue;
 }
}

$colname_rsuserdets = "-1";
if (isset($_SESSION['MM_Username'])) {
$colname_rsuserdets = $_SESSION['MM_Username'];
}
mysql_select_db($database_trusted, $trusted);
$query_rsuserdets = sprintf("SELECT * FROM members WHERE username = %s",   GetSQLValueString($colname_rsuserdets, "text"));
$rsuserdets = mysql_query($query_rsuserdets, $trusted) or die(mysql_error());
$row_rsuserdets = mysql_fetch_assoc($rsuserdets);
$totalRows_rsuserdets = mysql_num_rows($rsuserdets);
?> 
```

# batch-file - 批处理文件：根据另一个子字符串的存在提取子字符串

> ID：10629701
> 
> 赞同：0
> 
> 时间：2012-05-17T04:09:08.393
> 
> 标签：batch-file

我正在将各种参数发送到批处理文件。在那我需要“-l”旁边的参数..

例如：调用 .bat 时

Test.bat sampl.exe -s ssss -m mmmm -l path -k kkkk -d dddd

在此我需要根据 -l 的存在来提取“路径”。一般来说，我需要将下一个参数提取到“-l”。有办法我可以做到吗？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:55:00.130

下面有一个像这样的批处理文件的标准代码。如果变量名称与开关相同，则代码甚至更简单，即`set s=ssss` `set l=path`等。

```
@echo off
if "%1" neq "" goto getParams
rem A simple description of how to use this Batch file goes here, ie:
echo Test.bat progname [-s ssss] [-m mmmm] [-l path] [-k kkkk] [-d dddd]
goto :EOF

:getParams
rem Set here default parameter values, ie:
for %%a in (s m l k d) do set %%a=
set progName=%1
:shift
shift
for %%a in (s m l k d) do if /I "%1" equ "-%%a" goto getParam
goto main

:getParam
set %1=%2
shift
goto shift

:main
rem Run here the program, ie:
cd %l%
%progName% %s% %m% %k% %d% 
```

我希望它有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:36:34.767

这个想法是遍历参数列表，如果找到 -l 则调用另一个部分，然后提取下一个参数。

SHIFT 从可用参数列表中删除第一个参数。例如：

如果您运行： sampl.exe -s ssss -m mmmm -l path -k kkkk -d dddd

可用参数为 = -s ssss -m mmmm -l path -k kkkk -d dddd\

如果在脚本中执行了 SHIFT，则可用参数为 = ssss -m mmmm -l path -k kkkk -d dddd

请参见下面的代码示例：

```
@ECHO OFF

SET path=
SET mmm=
SET sss=
SET ddd=

REM Loop through passed parameters
:LOOP
IF [%1]==[] GOTO LOOP_END
    IF [%1]==[-s] @CALL :PROCESS_S %2
    IF [%1]==[-m] @CALL :PROCESS_M %2
    IF [%1]==[-l] @CALL :PROCESS_L %2
    IF [%1]==[-d] @CALL :PROCESS_D %2
    SHIFT
GOTO LOOP
:LOOP_END

REM call your actual end result here.. Once the batch file gets here, the variable path would have been set if there was a -l <my path> passed, otherwise it would be empty
cd %path%
runmyprogram.exe %sss% %mmm% %ddd%  

GOTO:EOF

REM Define your methods down here.
:PROCESS_S
    IF [%1]==[] GOTO:EOF
    SET sss=%1
    SHIFT
    GOTO:EOF

:PROCESS_M
    IF [%1]==[] GOTO:EOF
    SET mmm=%1
    SHIFT
    GOTO:EOF

:PROCESS_L
    IF [%1]==[] GOTO:EOF
    SET path=%1
    SHIFT
    GOTO:EOF

:PROCESS_D
    IF [%1]==[] GOTO:EOF
    SET ddd=%1
    SHIFT
    GOTO:EOF 
```

# html - 如何使用 CSS 或事件 HTML 限制表格的宽度？

> ID：10629705
> 
> 赞同：0
> 
> 时间：2012-05-17T04:10:43.053
> 
> 标签：html, css, html-table, width

我很好奇这是否可以通过 CSS 甚至 HTML 实现？说，我有一个包含 TABLE 的父 DIV：

```
<div class="divClass">
<table class="tableClass">
</table>
</div> 
```

该表显示用户内容，因此我无法控制其文本。有没有办法限制表格的宽度，使其不会超过，比如 750 像素？

PS。通常，如果没有足够的宽度，表格单元格会将单词换行到下一行，但 WordsLikeThisWithoutAnyActualWhiteSpacesBetweenThem 会出现问题。在这种情况下，表格会变得太宽并破坏页面布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T04:14:17.963

```
.tableClass {
   max-width: 750px
   word-break: break-all;
 } 
```

应该做的工作。

或者你也可以试试

```
.tableClass {
   table-layout:fixed;
}
.tableClass td {
   overflow: hidden;
} 
```

并为第一行中的每个 tds 分配宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:16:23.593

像这样写：

```
.tableClass{
 display-layout:fixed;
 word-wrap: break-word;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T04:30:58.783

```
td{word-wrap:break-word;
max-width: 750px;} 
```

# android - 挂载SD卡后注册FileObserver

> ID：10629706
> 
> 赞同：2
> 
> 时间：2012-05-17T04:11:14.593
> 
> 标签：android, file, android-intent, fileobserver

在我的应用程序中，我需要在拍摄一张照片时增加照片的数量。所以我`FileObserver`为`DCIM directory`. 它监视拍摄的照片。

但是，`FileObserver`当我卸载我的 SD 卡时，这将停止观看，因为`DCIM directory`它不再存在。当我安装 SD 卡时，我有意图`FileObserver`后再次尝试注册。`android.intent.action.EXTERNAL_APPLICATIONS_AVAILABLE`但是`FileObserver`没有注册。

我的问题是：

1.  安装SD卡后有没有其他方法可以制作`FileObserver`手表？
2.  在某些设备（HTC）中，我在安装 SD 卡后没有任何意图。在这种情况下我可以使用什么方法？
3.  有没有其他方法可以收听用户在他的内置软按钮相机中拍摄的照片。我不想建立自己的相机。

    ```
    fo = new FileObserver(path.toString(),
                        FileObserver.CLOSE_WRITE) {

                    @Override
                    public void onEvent(int event, String path) {
                        Log.d("yes", "event "+ event);
                        Log.d("operator",
                                "out side if"
                                        + Phototaken
                                        + externalStorageState
                                                .equals(Environment.MEDIA_MOUNTED));
                        if (Phototaken == 0 && event == 8){
                            String st = timeStamp();
                            Log.d("operator", "in event " + Phototaken);
                            Log.d("operator", "lat: " + MainService.lat
                                    + " " + "lng: " + MainService.lng + " "
                                    + "location: " + MainService.addre
                                    + " " + "time: " + st);
                            ptd.insert(st, String.valueOf(MainService.lat),
                                    String.valueOf(MainService.lng),
                                    MainService.addre);
                        }

                    }
                };
                fo.startWatching(); 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:22:24.067

您可以创建一个新`BroadcastReceiver`的来监视 SD 挂载/卸载事件。然后，在挂载事件中，告诉您`FileObserver`再次开始观看该`DCIM`目录。

您需要指定意图过滤器来监视您想要的事件：

```
IntentFilter filter = new IntentFilter();
filter.addAction(Intent.ACTION_MEDIA_MOUNTED);
filter.addAction(Intent.ACTION_MEDIA_REMOVED); 
```

[来自官方 API 参考的这段代码](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)展示了如何监控外部存储的状态。

# wpf - 基于属性更新另一个属性，反之亦然

> ID：10629713
> 
> 赞同：0
> 
> 时间：2012-05-17T04:11:52.193
> 
> 标签：wpf, dependency-properties, inotifypropertychanged

我的问题是我的 WPF 应用程序中有三个相互依赖的属性。我也为该类实现了 InotifyPropertyChanged。我不确定如何根据其他属性更新第二个属性。

**例子：**

属性：ActualValue、ChangedValue、Change

ActualValue 是 Fixed，可以更新 ChangedValue 和 Change。这意味着如果我更新 ChangedValue，Change 会像 (ActualValue-ChangedValue) 一样计算并设置。并且当 Change 更新时，ChangedValue 将根据 ActualValue 和 Change 进行计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:33:26.477

您可以将逻辑放在其他人所依赖的属性的设置器中。由于它是循环依赖，只需确保在设置器内部更改私有变量 - 不要使用属性设置器，因为这会创建无限循环。像这样：

```
private string _change, _changedValue;

public string ChangedValue {
    set { 
        _changedValue = value;
        _change = ActualValue - _changedValue;
        NotifyPropertyChanged("ChangedValue");
        NotifyPropertyChanged("Change");
    }
}

public string Change {
    set { 
        _change = value;
        _changedValue = ActualValue - _change;
        NotifyPropertyChanged("Change");
        NotifyPropertyChanged("ChangedValue");
    }
} 
```

# android - Android: give textfield 'id' in java

> ID：10629714
> 
> 赞同：1
> 
> 时间：2012-05-17T04:11:56.167
> 
> 标签：android, textview

I was wondering how to give a TextField an 'id' in java. So I am pretty much wanting to know how to give the TextField android:id="@id/NAMEHERE" but do it in java. Here is the code so far:

```
 TextView taskname = new TextView(this);
    taskname.setText("Task " + tasknumber);
    tasklayout.addView(taskname); 
```

What do I need to add to give it an id?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:16:59.780

如果您的问题是如何将 id 设置为活动，那么请了解 id 的用途。当您想将视图引用获取到活动类中时，特别需要 Id，其中视图已在 xml 文件中声明。但是在 Activity 中，如果您正在创建任何视图，通过

```
TextView taskname = new TextView(this); 
```

在这里，你已经有了视图参考，但如果你还想设置id，那么你可以使用方法

```
taskname.setId(10002); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:46:42.390

尝试这个

```
static final int TEXT_ID = 80001;
TextView taskname = new TextView(this);
taskname.setId(TEXT_ID); 
```

稍后在您的代码中，您可以通过以下方式引用此文本视图

```
TextView t = (TextView)findViewById(TEXT_ID); 
```

或者

```
TextView t = taskname; 
```

# math - Combinator Reduction Wolfram Mathematica

> ID：10629721
> 
> 赞同：4
> 
> 时间：2012-05-17T04:12:52.907
> 
> 标签：math, wolfram-mathematica, logic, discrete-mathematics

How can I implement the normal reduction strategy for Combinators {S,K,I} in Mathematica? Here are the rules: S[x][y][z]->x[y][z[y]] K[x][y][z]->x

Also we have an Y combinator ( fixed point) thus Y[a]=a[Ya]].

And we must "evaluate" the expression like ,for instance, S[K][K][a] = K[a][K[a]]=a

It is highly important to have a ONE step of reduction. Thus, that the result will be in application one step many times..

Thanks in anticipation for any suggestions!!!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-19T23:00:49.783

让我们定义一个名为的函数`eval`，它将执行组合器评估的一个步骤。首先，我们需要考虑究竟是什么构成了一个步骤。任意地，我们将首先评估最左边的表达式，然后从那里向内工作。

```
ClearAll[eval]
eval[e_] := Module[{r = eval1[e]}, r /; r =!= e]
eval[e:f_[g_]] := Module[{r = eval[f][g]}, r /; r =!= e]
eval[e:f_[g_]] := Module[{r = f[eval[g]]}, r /; r =!= e]
eval[e_] := e 
```

请注意，这些规则仅在它们实际更改表达式时才适用。这些定义的尴尬是由于 Mathematica 缺少一个模式表达式来匹配任意长的柯里化参数列表。

现在我们可以定义已识别的组合子*S*、*K*和*I*：

```
ClearAll[eval1]
eval1[s[f_][g_][h_]] := f[h][g[h]]
eval1[k[f_][_]] := f
eval1[i[f_]] := f 
```

这里的符号是小写的，主要是为了避免 Mathematica 呈现内置符号的方式`I`，即虚数单位。

任何其他组合子都将被视为变量并且不予评估：

```
eval1[e_] := e 
```

现在我们可以尝试基本情况：

```
i[f] // eval

(* f *)

k[f][g] // eval

(* f *)

s[f][g][h] // eval

(* f[h][g[h]] *) 
```

对于更有趣的情况，让我们定义`evalAll`显示评估链中的所有步骤：

```
ClearAll[evalAll]
evalAll[e_, n_:Infinity] := FixedPointList[eval, e, n+1] // Most // Column

s[k][k][a] // evalAll 

(*
s[k][k][a]
k[a][k[a]]
a
*)

s[s[m][n][r]][k[a][b]][c] // evalAll

(*
s[s[m][n][r]][k[a][b]][c]
s[m][n][r][c][k[a][b][c]]
m[r][n[r]][c][k[a][b][c]]
m[r][n[r]][c][a[c]]
*)

f[s[i[k]][k][g][i[f]]] // evalAll
(*
f[s[i[k]][k][g][i[f]]]
f[i[k][g][k[g]][i[f]]]
f[k[g][k[g]][i[f]]]
f[g[i[f]]]
f[g[f]]
*) 
```

`evalAll`采用可选的“count”参数来限制显示的步骤数。这对于发散表达式很有用——比如*Y*组合子的直接表达式：

```
eval1[y[f_]] := f[y[f]]

y[f] // evalAll[#, 4]&

(*
y[f]
f[y[f]]
f[f[y[f]]]
f[f[f[y[f]]]]
f[f[f[f[y[f]]]]]
*) 
```

*...但是用SKI*来表达这样的序列更有趣：

```
Module[{y = s[k[s[i][i]]][s[s[k[s]][k]][k[s[i][i]]]]}
, evalAll[y[f], 28]
]

(*
s[k[s[i][i]]][s[s[k[s]][k]][k[s[i][i]]]][f]
k[s[i][i]][f][s[s[k[s]][k]][k[s[i][i]]][f]]
s[i][i][s[s[k[s]][k]][k[s[i][i]]][f]]
i[s[s[k[s]][k]][k[s[i][i]]][f]][i[s[s[k[s]][k]][k[s[i][i]]][f]]]
s[s[k[s]][k]][k[s[i][i]]][f][i[s[s[k[s]][k]][k[s[i][i]]][f]]]
s[k[s]][k][f][k[s[i][i]][f]][i[s[s[k[s]][k]][k[s[i][i]]][f]]]
k[s][f][k[f]][k[s[i][i]][f]][i[s[s[k[s]][k]][k[s[i][i]]][f]]]
s[k[f]][k[s[i][i]][f]][i[s[s[k[s]][k]][k[s[i][i]]][f]]]
k[f][i[s[s[k[s]][k]][k[s[i][i]]][f]]][k[s[i][i]][f][i[s[s[k[s]][k]][k[s[i][i]]][f]]]]
f[k[s[i][i]][f][i[s[s[k[s]][k]][k[s[i][i]]][f]]]]              <-- f[...]
f[s[i][i][i[s[s[k[s]][k]][k[s[i][i]]][f]]]]
f[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]
f[i[s[s[k[s]][k]][k[s[i][i]]][f]][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]
f[s[s[k[s]][k]][k[s[i][i]]][f][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]
f[s[k[s]][k][f][k[s[i][i]][f]][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]
f[k[s][f][k[f]][k[s[i][i]][f]][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]
f[s[k[f]][k[s[i][i]][f]][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]
f[k[f][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]][k[s[i][i]][f][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]
f[f[k[s[i][i]][f][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]       <-- f[f[...]]
f[f[s[i][i][i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]
f[f[i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]]
f[f[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]]
f[f[i[s[s[k[s]][k]][k[s[i][i]]][f]][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]]
f[f[s[s[k[s]][k]][k[s[i][i]]][f][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]]
f[f[s[k[s]][k][f][k[s[i][i]][f]][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]]
f[f[k[s][f][k[f]][k[s[i][i]][f]][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]]
f[f[s[k[f]][k[s[i][i]][f]][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]]
f[f[k[f][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]][k[s[i][i]][f][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]]]
f[f[f[k[s[i][i]][f][i[i[i[s[s[k[s]][k]][k[s[i][i]]][f]]]]]]]] <-- f[f[f[...]]]
*) 
```

# client-side - Best practice in server side vs client side coding

> ID：10629725
> 
> 赞同：0
> 
> 时间：2012-05-17T04:13:42.077
> 
> 标签：client-side, server-side

I have many situations where I make AJAX call to server side to get some data. My question is:

Is it better to get the data back simply as JSON or XML, but then I need to use javascript to do all the input and it is impossible to use my server side variables of the user in this javascript (am I wrong here) or is it better to get back not only the database data but the whole HTML.

The first way would be to get back from AJAX call only the content of the table cells and do the whole table generating HTML in javascript. The second would be to call AJAX and get the whole HTML with the data in back from server side.

I am using the second approach now because it is easier for me to program in server side language, but I see two problems using this approach:

1.  Instead of getting only the data I get whole HTML back, which means for example that I am loading too much data every time instead of generating it on client.

2.  The data that I get back is only good for this particular "project", because it is already "formatted" with HTML code. If I would get the JSON raw data, I could reuse the serverside AJAX code to do something else with this data on some other page.

What is the best practice here?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T04:17:54.450

不要尝试从服务器获取 HTML 或任何标记以显示在屏幕上。这是一个不好的做法。

另外，我更喜欢 JSON 而不是 XML。

**编辑：** [http ://api.jquery.com/load/](http://api.jquery.com/load/)

# android - How to use custom ant rule regexpression to change property in propertyfile

> ID：10629726
> 
> 赞同：1
> 
> 时间：2012-05-17T04:13:43.750
> 
> 标签：android, ant

In my Android project I have the following property set in my project.properties file

```
proguard.config=proguard.cfg 
```

and I need a custom macro that will somehow set and unset this property.

How do I set unset this property using macro and regular expression? two things I am not clear on is how to set this to an empty property value. Would that be just proguard.config= or proguard.config=''

What would be the Macro for doing this?

```
 <macrodef name="turn-on-proguard">
    <sequential>    
       <replaceregexp file="./project.properties"
                            match='proguard.config="(.*)"'
                            replace='proguard.config=proguard.cfg'
                            byline="false">         
        </replaceregexp>
    </sequential>
</macrodef>

 <macrodef name="turn-off-proguard">
    <sequential>    
       <replaceregexp file="./project.properties"
                            match='proguard.config="(.*)"'
                            replace='proguard.config='
                            byline="false">         
        </replaceregexp>
    </sequential>
</macrodef> 
```

Would this work? Update. turn-proguard-off does nothing.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T15:13:27.433

您的解决方案对我来说非常不清楚。你为什么不转义点字符？为什么在正则表达式中使用引号和分组？这是工作脚本：

```
<macrodef name="turnonproguard">
    <sequential>    
       <replaceregexp file="project.properties"
                match='proguard\.config=.*'
                replace='proguard.config=proguard.cfg'
                byline="false"/>
    </sequential>
</macrodef>

<macrodef name="turnoffproguard">
    <sequential>    
       <replaceregexp file="project.properties"
                match='proguard\.config=.*'
                replace='proguard.config='
                byline="false"/>
    </sequential>
</macrodef>

<target name="on">
    <turnonproguard/>
</target>

<target name="off">
    <turnoffproguard/>
</target> 
```

# php - Yii - 如何打印 findAll 使用的 SQL

> ID：10629728
> 
> 赞同：15
> 
> 时间：2012-05-17T04:13:53.150
> 
> 标签：php, yii

我有以下代码从 db 获取一些记录

```
 $criteria = new CDbCriteria();
    $criteria->condition = 't.date BETWEEN "'.$from_date.'" AND "'.$to_date.'"';
    $criteria->with = array('order');

    $orders = ProductOrder::model()->findAll($criteria); 
```

是否可以获取 findAll 使用的 SQL？我知道你可以从调试控制台得到它。但我正在使用 yiic.php 在后台运行脚本

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T04:40:49.597

您可以在应用程序日志中记录执行的查询并查看它。配置文件中有这样的东西：

```
'components' => array(
  'db'=>array(
    'enableParamLogging' => true,
  ),
  'log'=>array(
    'class'=>'CLogRouter',
    'routes'=>array( 
      array(
        'class'=>'CFileLogRoute',
        'levels'=>'trace,log',
        'categories' => 'system.db.CDbCommand',
        'logFile' => 'db.log',
      ), 
    ),
  ),
); 
```

在某些情况下（例如在运行测试时），您还需要`Yii::app()->log->processLogs(null);`在进程结束时调用它才能工作。

当然，一旦你在那里，没有什么能阻止你编写自己的日志路由，它对记录的消息做一些不同的事情，但请注意日志是在请求结束时（或当你调用时`processLogs`）处理的，而不是每次你记录一些东西。

* * *

顺便说一句，您不应该在查询中使用动态输入来构建这样的查询。改用绑定变量：

```
$criteria = new CDbCriteria();
$criteria->condition = 't.date BETWEEN :from_date AND :to_date';
$criteria->params = array(
  ':from_date' => $from_date,
  ':to_date' => $to_date,
);
$criteria->with = array('order');

$orders = ProductOrder::model()->findAll($criteria); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-08-13T05:43:38.740

您可以使用 CDbCommandBuilder 获取 sql，如下所示：

`ModelClassName::model()-> getCommandBuilder()-> createFindCommand('tableName', $criteria)->text;`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-01-24T08:26:47.647

*   **第一种方式（官方方式）：**
    在您的`main.php`配置文件中添加这两个参数，`log section`您可以在页面末尾或`FireBug Console`浏览器中看到日志消息。不要忘记在`db`部分设置必要的参数。

    `'components' => array( 'db'=>array( 'enableProfiling'=>true, 'enableParamLogging' => true, ), 'log'=>array( 'class'=>'CLogRouter', 'routes'=>array( array( 'class'=>'CWebLogRoute', 'showInFireBug' => true, ), array( 'class'=>'CProfileLogRoute', 'levels'=>'profile', 'enabled'=>true, ), ), ), );`

*   **第二种方式：**
    在您的代码中，只需将其中一个列的拼写更改为不正确的内容，您将在错误页面中收到一条包含完整 SQL 查询的错误消息（您应该处于`YII_DEBUG`模式 true）。像这样的东西：（
    *我已更改`t.date`为`t.wrong_date`，当您刷新页面时，您将看到在您的数据库中执行的生成的 SQL）*

> > `$criteria = new CDbCriteria(); $criteria->condition = 't.wrong_date BETWEEN "'.$from_date.'" AND "'.$to_date.'"'; $criteria->with = array('order'); $orders = ProductOrder::model()->findAll($criteria);`

在这两种方式中，都有`YII_DEBUG`真实的`index.php`

```
defined('YII_DEBUG') or define('YII_DEBUG',true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T14:42:33.353

您可以直接在您的页面上查看日志：

```
'log'=>array(
    'class'=>'CLogRouter',
    'routes'=>array(
        array(
            'class'=>'CWebLogRoute',
        ),
    ),
), 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-08T13:01:52.807

如果您不想在看到 SQL 之前执行查询，那么这实际上并不像您希望的那么简单。

它和错误一样肮脏，但是，仅在开发时，我过去曾在标准中故意添加一个故意的错误，并依靠产生的异常来提供 SQL 尝试。

例如

```
$criteria = new CDbCriteria();
$criteria->condition = 't.date_fgjhfgjfgj BETWEEN :from_date AND :to_date';
$criteria->params = array(
  ':from_date' => $from_date,
  ':to_date' => $to_date,
);
$criteria->with = array('order');
$orders = ProductOrder::model()->findAll($criteria); 
```

我发现 Ilya 的方法不可靠（不知道为什么，但有时使用此方法会忽略标准）。

# android - 将图像 ID 设置为使用拖放添加的图像

> ID：10629734
> 
> 赞同：2
> 
> 时间：2012-05-17T04:14:44.823
> 
> 标签：android, image, gridview, drag-and-drop, getter-setter

我需要知道哪个图像在哪个单元格中，所以我只尝试使用`.setId()`and `.getId()`。但如果有其他方法可以做到这一点，请告诉我。

单击按钮时会添加图像。我没有显示它们出现的位置，但这是我的问题，我正在尝试为我能够添加的每个图像添加一个 Id。因此，当我将它们放在 GridView 中并单击其中一个时，如果它`Id`是正确的，我可以执行其他操作，例如`if (Id == 1) open... else if (id == 2) open other thing`. 但我无法`Id`将 保存到图像（或保存到该图像`ImageCell`）。

我遇到的问题示例：如果我添加了具有 Id1 的 image1，然后添加了具有 Id2 的 image2，则 image1 Id 将更改为最后添加的图像（在本例中为 image2 Id）。我已经尝试了很多不同的方法来设置 ID，但我仍然得到第一个图像 ID 中的最后一个图像 ID。

我正在使用 Toast 来显示图像丢弃的 Id。这是 ImageCell 代码。

```
public void onDrop(DragSource source, int x, int y, int xOffset, int yOffset,
    DragView dragView, Object dragInfo)
{
mEmpty = false;

ImageView sourceView = (ImageView) source;
sourceView.setId(DragActivity.m);
Drawable d = sourceView.getDrawable ();
this.setId(sourceView.getId());
if (d != null) {
   this.setImageDrawable (d);
   this.setId(sourceView.getId());
   prueba = this.getId();
}
toast ("" + prueba);
} 
```

DragActivity.m 只是一个用来改变图片的变量。

```
public void addNewImageToScreen() {
    int resourceId = R.drawable.hello;

    m = mImageCount % 3;
    if (m == 1) {
        resourceId = R.drawable.photo1;
    } else if (m == 2) {
        resourceId = R.drawable.photo2;
    }
    addNewImageToScreen(resourceId);
} 
```

有人知道我在做什么错吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T05:40:01.297

我认为您正在尝试交换图像，在这种情况下您可以`ImageView`通过这样的标签唯一标识：

```
ImageView imageView = new ImageView(_context);
imageView.setTag(1); 
```

然后在`GridView`'s / `ImageView`'s click 上检查它的标签，如下所示：

```
gridview.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {

        Tag = (Integer) arg1.getTag();

    }
} 
```

# c# - 无法捕获 MS Chart 控件异常

> ID：10629735
> 
> 赞同：3
> 
> 时间：2012-05-17T04:14:46.090
> 
> 标签：c#, visual-studio-2010, exception, .net-4.0, mschart

我无法弄清楚为什么我无法捕获 MS Chart 控件引发的异常。我正在使用带有最新更新的 Visual Studio 2010。感谢您的帮助。

以下是重现问题的方法：

*   创建一个新的 WinForms 应用程序
*   添加对 System.Windows.Forms.DataVisualization 的引用
*   在主窗体上放置一个按钮和一个图表控件
*   在表单的构造函数中添加以下代码

    ```
     int[] x = new int[] { 1, 2, 3, 4, 5 };
        int[] y = new int[] { 5, 13, 4, 10, 9 };
        chart1.Series[0].Points.DataBindXY(x, y); 
    ```

*   将以下代码添加到按钮的单击方法中

    ```
     try
        {
            chart1.Series[0].Label = "#VAL{";
        }
        catch
        {
            MessageBox.Show("Exception caught");
        } 
    ```

*   运行应用程序
*   点击表格上的按钮

上面的 catch 块永远不会执行。相反，标签字符串中使用的无效关键字引发的“InvalidOperationException”会冒泡到应用程序的 Main 方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:29:03.797

对于控件来说，这不是一种罕见的故障模式。问题在于 Label 属性的属性设置器没有执行足够的检查来验证分配的值是否合法。因此，当实际使用属性值时，这会出错。稍后，当控件绘制自身时。在调用堆栈窗口中很容易看到，请注意 Chart.OnPaint() 如何位于堆栈顶部。调试器在 Application.Run() 处停止，因为这是它实际拥有源代码的最后一条语句。因此，请确保您在调用堆栈中查找。

Winforms 中有针对此的对策，Application.ThreadException 事件将触发。但是当您调试时，它会被关闭，这是一个帮助您诊断异常的功能。无论如何，这是不实际的，ThreadException 的事件处理程序无法修复代码中的错误。您*可以*捕获异常，您必须强制重新绘制，以便绘制不会延迟并且会在您的 try 块仍然有效时爆炸：

```
 private void button1_Click(object sender, EventArgs e) {
        try {
            chart1.Series[0].Label = "#VAL{";
            chart1.Refresh();
        }
        catch {
            MessageBox.Show("Exception caught");
        }
    } 
```

但这也不是真正的修复，它只会在下一次重绘时再次爆炸。除非您在 catch 块中重新分配 Label 属性。唯一真正的治疗方法是修复代码。如果您允许用户输入标签，那么这个解决方法应该很好，只需确保在 catch 块中重置标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-12T12:51:58.923

`Chart.Area.RecalculateAxesScale()``Chart.Refresh()`如果由于某种原因不可用，也可以使用。

# 3d - 将 3d 4x4 旋转矩阵转换为 2d

> ID：10629737
> 
> 赞同：4
> 
> 时间：2012-05-17T04:14:56.570
> 
> 标签：3d, matrix, 2d, collada

假设我们有一个 4x4 矩阵，其索引如下：

```
00 01 02 03
10 11 12 13
20 21 22 23
30 31 32 33 
```

如何将此矩阵中包含的旋转数据（忽略 z 轴，如果有帮助）转换为单个 2d 旋转角度（以弧度为单位）？

背景：我有一个从 Blender 导出为 Collada 格式的 3D .dae 动画。动画在技术上是 2d，所有 z 轴值都是 0。我正在尝试将 4x4 矩阵转换为 2d 平移、旋转和缩放数据。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T12:35:21.287

比例矩阵`S`如下所示：

```
sx 0  0  0
0  sy 0  0
0  0  sz 0
0  0  0  1 
```

平移矩阵`T`如下所示：

```
1  0  0  0
0  1  0  0
0  0  1  0
tx ty tz 1 
```

Z 轴旋转矩阵`R`如下所示：

```
 cos(a) sin(a)  0  0
-sin(a) cos(a)  0  0
   0      0     1  0
   0      0     0  1 
```

如果您有一个变换矩阵`M`，它是多个和矩阵相乘`R`的结果。看着，这些乘法的顺序和数量是未知的。但是，如果我们假设我们可以将其分解为单独的矩阵。首先让我们计算一下：`T``S``M``M=S*R*T``S*R*T`

```
 ( sx*cos(a) sx*sin(a) 0  0)       (m11 m12 m13 m14)
S*R*T = (-sy*sin(a) sy*cos(a) 0  0) = M = (m21 m22 m23 m24)
        (     0         0     sz 0)       (m31 m32 m33 m34)
        (     tx        ty    tz 1)       (m41 m42 m43 m44) 
```

因为我们知道这是一个 2D 转换，所以翻译很简单：

```
translation = vector2D(tx, ty) = vector2D(m41, m42) 
```

要计算旋转和缩放，我们可以使用`sin(a)^2+cos(a)^2=1`：

```
(m11 / sx)^2 + (m12 / sx)^2 = 1
(m21 / sy)^2 + (m22 / sy)^2 = 1

m11^2 + m12^2 = sx^2
m21^2 + m22^2 = sy^2

sx = sqrt(m11^2 + m12^2)
sy = sqrt(m21^2 + m22^2)

scale = vector2D(sx, sy)

rotation_angle = atan2(sx*m22, sy*m12) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T04:26:54.133

[该库](http://www.lfd.uci.edu/%7Egohlke/code/transformations.py.html)具有将 4x4 矩阵转换为其 5 个组件的例程 - 旋转、平移、缩放、剪切和透视。您应该能够采用公式并删除 3d 向量的第三个分量。

# mysql - 通过终端的 MySQL 连接失败

> ID：10629743
> 
> 赞同：0
> 
> 时间：2012-05-17T04:15:57.583
> 
> 标签：mysql, linux, ubuntu, command-line, terminal

嗨，我正在使用 Linux/Ubuntu，但在登录 mysql 时遇到问题

当我运行代码时：

> sudo mysql -h localhost -u root -p

我收到一条错误消息：

> ERROR 2002 (HY000): 无法通过套接字 '/obitnami/mysql/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

我怎样才能解决这个问题？

我在用：

```
mysql  Ver 14.14 Distrib 5.5.22, for debian-linux-gnu (x86_64) using readline 6.2
rails 3.2.3
ruby 1.9.3 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-28T13:22:48.480

首先，您可以尝试使用命令查看它是否正在运行

`ps aux | grep mysql`

mysqld应该在那里。

还要检查是否监听地址，因为它可能是您的外部地址，而不是使用命令的 localhost：

`netstat -antp |grep mysql`

然后检查您的配置文件以查看您的套接字文件的确切写入位置。之后，您已验证它已启动并正在运行，您可以尝试使用命令连接到它

`mysql -u root -p -S /path/to/socket.file`

您可能在其他地方有套接字文件，因此您无法连接到服务器。`-h localhost`如果您要连接到 localhost，则不需要，因为如果`-h`未使用，则假定您在本地连接，但如果您的侦听 IP 地址是外部 IP 地址而不是内部 IP 地址（localhost 为 127.0.0.1 或所有地址为 0.0.0.0），则可能需要）。

# facebook - 给定一个 facebook ID，我可以使用哪些指标将个人资料标记为假的？

> ID：10629744
> 
> 赞同：1
> 
> 时间：2012-05-17T04:15:58.303
> 
> 标签：facebook, facebook-graph-api

我正在通过第三方应用程序（shortstack）在我的 Facebook 页面上举办摄影比赛。大奖应该颁发给得票数最多的人。每个投票都映射到一个 facebook ID，我可以通过 shortstack 获得该 ID。问题是来自虚假个人资料的投票太多，我通过手动查看投票过的人的 Facebook 个人资料的朋友数量来推断这一点（我有他们的 Facebook ID）。我也知道我只能通过 opengraph 提取这些用户的公开共享信息。

简而言之，在将所有 ID 置于使用公共共享用户信息中的信息的特定逻辑之后，我应该如何在“正版”和“假”两个类别中标记所有选票？

例如，让我们假设特定个人资料的朋友数量是用于识别个人资料是否虚假的唯一指标。现在会有一个神奇的基准（朋友数量），高于这个基准可以认为个人资料是真实的，低于这个基准可以认为所有个人资料都是假的，尽管可能有一些假人高于这个基准，而一些真正的人低于这个基准。在我们的案例中，这些指标还包括用户通过 opengraph 共享的其他信息，这些参数的值和模式对于真假用户来说是不同的。关键是我确信消除虚假资料是进行比赛的人面临的非常普遍的问题，因为他们希望根据参赛者将品牌传播给真实用户的能力来选择获胜者。所以，

# asp.net - HTML：在调整其容器大小时将复选框和关联文本保持在一起

> ID：10629747
> 
> 赞同：1
> 
> 时间：2012-05-17T04:16:32.070
> 
> 标签：asp.net, html, checkbox, positioning

我有一个 ASP.Net 页面，它呈现如下的复选框

![同一行的元素](../Images/1e6e97ad7a63e87f9e5b2dc849530dd2.png)

但是当我重新调整屏幕大小时，控件被挤在一起，复选框及其相关文本移动到不同的行中，这没有多大意义。

![不同线上的元素](../Images/a6a179192b57e9703b8cd36817cdb666.png)

我想知道是否有办法将复选框保持在一起。

继承人的代码：

```
<asp:Repeater ID="rpFiles" runat="server" DataSource='<%# Eval("Files") %>' OnPreRender="rpFiles_PreRender" >
    <ItemTemplate>
       <asp:PlaceHolder ID="phFile" runat="server">
        <asp:CheckBox ID="cbVisibility" AutoPostBack="false" runat="server" Text='<%# string.Format("{0} ({1})", Eval("FileName"), Eval("FileType").ToString().ToUpper()) %>' Checked='<%# !((bool)DataBinder.Eval(Container.DataItem, "IsHidden")) %>' />
              <asp:HiddenField ID="hfFileID" Value='<%# Eval("FileID") %>' runat="server" />
       </asp:PlaceHolder>                            
    </ItemTemplate>
</asp:Repeater> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T02:43:32.683

感谢您的输入。尝试在您的线路上工作。`width`并且`min-width`没有工作，但这个想法`div`很重要，为此+1。
我改用了这个

```
<asp:PlaceHolder ID="phFile" runat="server">
    <div style="display:inline-block; padding-right:15px"><asp:CheckBox ID=... 
```

这解决了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T04:20:43.697

假设你有代码

`<!--CheckboxCatering Order(PDF)--!>`

然后更新您的代码

`<div style="width:300px;"><!--checkboxCatering Order(PDF)--!></div>`

它会解决你的问题

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T04:28:14.477

如果它是 CheckBoxList 那么宽度必须以某种方式受到限制？设置固定宽度以防止折叠。

```
<div style="min-width:600px;">
    <!-- check boxes ->
</div> 
```

请注意，这个宽度是任意的；玩弄它...

更新：现在我看到了你的标记，只需在中继器上设置一个宽度。

# iphone - 如何将用户名/密码传递给 iOS 外部浏览器进行身份验证？

> ID：10629749
> 
> 赞同：2
> 
> 时间：2012-05-17T04:16:37.833
> 
> 标签：iphone, ios, authentication, login

大家好，下面的问题可以请教一下吗？

我正在使用以下代码在我当前的 iPhone 应用程序中调用外部浏览器：

```
[[UIApplication sharedApplication] openURL:urls]; 
```

*   网址 = "http://myhost.net/home.aspx"

假设用户已经登录到应用程序，如果安全不是问题，我可以将用户名密码传递给“home.aspx”......例如 urls = “http://myhost.net/home.aspx?username =xxx&密码=123456"

问题1：我可以通过“post”而不是“get”方法将一些信息传递给home.aspx吗？

问题2 如果上述解决方案不可行，我想在IIS 7中设置基本身份验证。当应用程序调用外部浏览器时，用户可以在没有第二次登录的情况下访问“home.aspx”吗？（例如使用代码绕过它）

对于第二季度，这是我目前的情况供您参考：

1) 我有 Windows IIS 提供的视频流服务，当用户从浏览器输入 URL 时，会提示登录表单。aeg xxxx/video.htm b. IIS 配置了 SSL 和基本身份验证

2) 用户登录成功后，视频应正确显示在 HTML 5 页面中。

3）我们有 iPad/iPhone 应用程序会打开外部浏览器（即 Safari）来查看视频页面，但如果用户已经登录，我不知道如何通过身份验证（即用户不应该看到登录表单）该应用程序在 15 分钟内。

非常感谢您的关注。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T04:43:19.723

回复：八月

关于问题 2，“[[UIApplication sharedApplication] openURL:urls];”

理论上，您可以对非视频流超链接执行此操作，但在类似的直通场景中，没有针对视频流的解决方案或解决方法。

另请参阅： [从 ASP.NET 中的搜索位置流式传输 MP4 视频](https://stackoverflow.com/questions/9843166/stream-mp4-video-from-seek-position-in-asp-net/11406593#11406593)

处理程序或 REST Web 服务都需要标头处理，但这可能是产品限制，因为没有现有的 API 可以为它工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T06:11:52.353

就您的问题而言，只有当且仅当您在本地或远程服务器上安装了诸如 REST 或 SOAP 之类的 Web 服务时，您才能将变量传递给 Web url。您可以搜索适合您需要的 ASP.net 的 Web 服务 API。从那里，您可以通过在每个请求中设置响应来验证任何变量。你可以从[这个](https://stackoverflow.com/questions/40692/possible-to-create-rest-web-service-with-asp-net-2-0)开始。

在另一端（在 iphone 中），您不能只使用上面的代码来发送请求，这可以使用本机 iOS url 连接来完成，但我建议使用[RESTKit](https://github.com/RestKit/RestKit)或 ASIHTTPRequest 之类的库。两者都处理获取、发布、删除和更新等请求。

# authentication - 如何手动设置/传播安全上下文信息，例如 JBoss 7 的主体（通过 JBoss 远程处理 2）

> ID：10629756
> 
> 赞同：3
> 
> 时间：2012-05-17T04:17:10.497
> 
> 标签：authentication, jboss, ejb-3.1

我正在使用 jboss remoting 2.5.4.SP3 提供从 Web 应用程序和其他 JBoss 实例对 JBoss 7.1 服务器中的 EJB 的远程访问。由于 JBoss 7.1 中的远程 EJB 访问问题，我手动执行此操作，特别是（但不仅）无法同时访问多个服务器上的相同（接口）bean。我正在使用 remoting2 因为 remoting3 没有文档。

我使用套接字传输使用 TransporterHandle/TransporterClient 进行远程处理，但是在通过此远程连接调用的方法中，服务器希望从 ejbContext 中查找主体。我找不到手动设置主体或其他上下文安全/身份信息的方法。在极限情况下，我很乐意在调用 ejb 方法时设置主体——所有传入调用都是对本地 EJB3 bean 的——或者甚至专门为 EJBContext 设置它。

我找到了很多关于 Spring 的信息（我没有使用），但似乎没有什么与我的特定上下文相匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T01:24:52.030

现在，正确的方法是：

在客户端，我获取安全上下文并打包安全域和主题信息，以便与调用一起传输到服务器。SecurityDomain 是一个字符串，SubjectInfo 是可序列化的：

```
Map m = new HashMap();
SecurityContext securityContext = SecurityContextAssociation.getSecurityContext();
if (securityContext != null) {
    m.put("SUBJECT-INFO", securityContext.getSubjectInfo());
    m.put("SECURITY-DOMAIN", securityContext.getSecurityDomain());
}
response = remotingClient.invoke(request, m); 
```

地图 m 通过 jboss 远程处理的调用发送。在服务器端，我提取安全信息并为调用设置上下文，如下所示：

```
SecurityContext oldContext = SecurityContextAssociation.getSecurityContext();
SubjectInfo si = (SubjectInfo) invocation.getRequestPayload().get("SUBJECT-INFO");
String domain = (String) invocation.getRequestPayload().get("SECURITY-DOMAIN");
if (si != null) {
    SecurityContext sc = new JBossSecurityContext(domain);
    sc.setSubjectInfo(si);
    SecurityContextAssociation.setSecurityContext(sc);
}
try {
    return super.invoke(invocation);
} finally {
    SecurityContextAssociation.setSecurityContext(oldContext);
} 
```

奇迹般有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T21:48:26.057

看看[jboss-ejb-client.properties](https://docs.jboss.org/author/display/AS71/EJB+invocations+from+a+remote+client+using+JNDI#EJBinvocationsfromaremoteclientusingJNDI-SettingupEJBclientcontextproperties)。还有一个使用远程客户端查找 EJB的[快速入门示例。](https://github.com/jbossas/quickstart/tree/master/ejb-remote)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-18T00:28:49.123

我已经解决了我的潜在问题，尽管不是以我希望的一般方式。

我在所有传入请求上放置了一个 servlet 过滤器，将 request.getUserPrincipal 记录在本地线程中。然后我可以在非 EE 代码中访问它并找到发出请求的委托人。然后，当我调用我的应用服务器时，我使用 JBoss Remoting 将元数据附加到每个调用以通过网络传递 Principal 的能力。我必须复制 TransporterClient 来执行此操作，因为它是私有构造函数等不允许覆盖附加每个请求元数据（而不是每个连接）所需的功能。在服务器端，我获取传入的 Principal 并将其设置为本地线程。然后，在访问 EJBContext.getCallerPrincipal 的后续代码中，我还从本地线程查找传入的 Principal，如果它不为空（因此我们处于远程 EJB 调用中），如果调用者主体是匿名的，我会使用它。如果它不是匿名的，那么它一定是在来电之后以某种方式设置的，所以在这种情况下我会忽略传入的 Principal。

总而言之，这是一个比我希望的更专业的解决方案，它并没有说明如何在 JBoss 7.1 中通过网络进行通用上下文传播。

# vb.net - 如何在 datagridview 组合框下拉列表中指定唯一项目

> ID：10629757
> 
> 赞同：0
> 
> 时间：2012-05-17T04:17:16.427
> 
> 标签：vb.net, datagridview, combobox, drop-down-menu, unique

我使用以下代码填充 datagridview 列中的组合框。组合框列是使用设计器创建的。

Form1_Load 中的代码：

```
Me.Sec_400TableAdapter.Fill(Me.Test1DataSet.Sec_400)    
Me.DataGridView1.DataSource = Me.bindingSource1
GetData("select CulType, PrKey, diam from Sec_400 where RdNo = '33-3-33'") 
```

当我运行代码时，datagridview 列中的所有组合框都会正确显示 Sec_400 表中的“Aluminized”或“Galvanized”项目。但是，当我单击向下箭头查看这两个选项并选择另一个选项时，将显示数据表中行中的所有“镀锌”和“镀铝”项目。我只想将一个“镀锌”和一个“镀铝”项目显示为下拉菜单项。

我尝试在“收藏项目”下的“编辑列”设计器中输入镀铝和镀锌，但是当我输入它们后，当我返回查看它们时它们就消失了。必须有一种方法可以使下拉项只有两个唯一值。但是如何？

# c# - 将内容从一个系统复制到另一个系统

> ID：10629762
> 
> 赞同：1
> 
> 时间：2012-05-17T04:18:17.673
> 
> 标签：c#, .net, networking, system

我有 2 台计算机系统连接到同一网络（Sys1，Sys2）。如果我从 Sys1 复制任何内容，我需要粘贴到 Sys2。

*   我的思考过程（.net 项目）
    *   创建一个将在系统启动时运行的应用程序。
    *   当我复制时我必须跟踪，然后我会将复制的内容保存到数据库中。
    *   在尝试粘贴（Sys2）时，我将从数据库中获取内容。

哪位大神推荐一下，这个好用吗？并请指导完成任务。

提前感谢拉梅什。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:34:46.663

是的，这种方法会奏效。

注意：考虑使用现有工具来同步内容，而不是重新发明轮子。

随机猜测：也许您正在寻找添加到剪贴板以实现类似于远程桌面剪贴板的事件的事件...检查以下信息：[剪贴板事件 C#](https://stackoverflow.com/questions/621577/clipboard-event-c-sharp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:37:28.743

您可以使用[MoveFile](http://msdn.microsoft.com/en-us/library/aa365239%28VS.85%29.aspx)功能将文件移动到网络位置。

File.Copy 不适用于 UNC 路径。MoveFile (P/Invoke) 将起作用。

复制文件不存在。所以首先使用 File.Copy 创建一个本地临时文件，然后调用 MoveFile。

c# 语法

```
[DllImport("kernel32", CharSet = CharSet.Auto, SetLastError = true)]
public static extern int MoveFile([In(), MarshalAs(UnmanagedType.LPTStr)] string lpExistingFileName, [In(), MarshalAs(UnmanagedType.LPTStr)] string lpNewFileName); 
```

# cocos2d-iphone - Cocos2d 中 BezierBy 和 BezierTo 的区别？

> ID：10629767
> 
> 赞同：3
> 
> 时间：2012-05-17T04:18:53.003
> 
> 标签：cocos2d-iphone, cocos2d-android

我想知道 BezierBy 和 BezierTo 之间的区别。如果说这是这种情况，下面的代码会发生什么

```
 CCBezierConfig bezier = new CCBezierConfig();

     // Bezier curve  
     bezier.controlPoint_1 = CGPoint.make(1002.0f,475.0f);
     bezier.controlPoint_2 = CGPoint.make(454.0f, 281.0f);
     bezier.endPosition = CGPoint.make(-20.0f,490.0f);

     CCBezierBy by = CCBezierBy.action(100, bezier);
     CCBezierTo to = CCBezierTo.action(2, bezier);

     CCCallFuncN actionMoveDone = CCCallFuncN.action(this,"spriteMoveFinished");
     CCSequence actions = CCSequence.actions(by, actionMoveDone);

     obstacle1.runAction(actions); 
```

在理解 moveTo 和 moveBy 方面也有同样的问题

请帮助我了解这些概念。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T05:53:39.257

CCMoveTo 将您的节点移动到位置。CCMoveBy 将您的节点移动为单像素。所有其他动作都是一样的。例子：

```
CCNode *a = [[CCNode alloc] init];
[a setPosition:CGPointMake(100, 100)]; //our node starts at point (100, 100) 
```

现在，如果你将它移动**到**CGPointMake(200,200)，他的位置将是 (200, 200)。但是，如果您将它从 (100, 100) **BY** CGPointMake(200,200) 移动，它将是 (300, 300)。

# android - 将微调器值右对齐而不是左对齐

> ID：10629768
> 
> 赞同：16
> 
> 时间：2012-05-17T04:18:59.463
> 
> 标签：android, xml, android-layout, alignment, spinner

在微调器 xml 中，我正在使用：

```
 android:entries="@array/cars" 
```

其中汽车是数字项目的列表。

微调器自动将值左对齐，我在 xml/code 中找不到如何更改它。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-17T04:35:00.723

您必须在此处使用自定义视图来对齐 Spinner 值。[**像这个**](https://stackoverflow.com/questions/2491980/how-to-color-and-alignment-spinner-item-on-android)答案一样创建一个 CustomView并添加`android:gravity`到 TextView 作为`right`.

**更新：**

使用将 CustomView 设置为您的适配器

```
adapter.setDropDownViewResource(android.R.layout.your_custom_created_view); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-12-02T01:36:53.750

您可以`TextAlignment`在 properties 和 select上使用`TextEnd`，或者`android:textAlignment="textEnd"`在 XML simple 上使用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-19T06:21:54.967

**您可以尝试使用微调器项目文本对齐右端：**

```
view.textAlignment = View.TEXT_ALIGNMENT_TEXT_END 
```

# android - 多个 IntentServices 监听一个唯一的 Intent

> ID：10629769
> 
> 赞同：1
> 
> 时间：2012-05-17T04:19:11.267
> 
> 标签：android, intentservice, intentfilter

我希望有多个 IntentServices 来监听一个 Intent 并以各种方式处理它。目前，只有一个 IntentService 接收 Intent 并消费它。有任何想法吗？有国旗什么的吗？我不想为每个服务实现一个意图。

# netcdf - 如何解决 netCDF 库：尝试在文本和数字之间进行转换

> ID：10629771
> 
> 赞同：1
> 
> 时间：2012-05-17T04:19:30.103
> 
> 标签：netcdf

我喜欢听听您对解决 netCDF 库问题的建议。当我使用程序 netcdf merge 合并几个小的 netcdf 文件时，我收到以下消息：

netCDF 库报告了以下问题：

```
NetCDF: Attempt to convert between text & numbers 
```

我卡住了~~请让我知道任何建议。非常感谢。

以下是我的日志文件：

```
imerge: Merging 61 npptot*.nc files, using 1 buffers

Number of dimensions:  4 
Dimension id:  0    Name:  longitude     Length:     4 
Dimension id:  1    Name:  latitude      Length:     1 
Dimension id:  2    Name:  time          Length:    60 
Dimension id:  3    Name:  lengthd       Length:    10 

Number of variables:  6 

Number of global attributes:  5 
Global attribute:  0     Attribute:  title           Type:  NC_CHAR, string      Length:  25   Value:  monthly total NPP carbon  
Global attribute:  1     Attribute:  source          Type:  NC_CHAR, string      Length:  14   Value:  ibis wmonthly  
Global attribute:  2     Attribute:  history         Type:  NC_CHAR, string      Length:  12   Value:  14-May-2012  
Global attribute:  3     Attribute:  calendar        Type:  NC_CHAR, string      Length:  10   Value:  gregorian  
Global attribute:  4     Attribute:  conventions     Type:  NC_CHAR, string      Length:  9    Value:  NCAR-CSM 
Variable:  longitude     Attribute:  long_name       Type:  NC_CHAR, string      Length:  10   Value:  longitude 
Variable:  longitude     Attribute:  units           Type:  NC_CHAR, string      Length:  13   Value:  degrees_east 

Attention: NetCDF attribute 'missing_value' does not exist for the selected variable. 
Variable:  latitude      Attribute:  long_name       Type:  NC_CHAR, string      Length:  9    Value:  latitude 
Variable:  latitude      Attribute:  units           Type:  NC_CHAR, string      Length:  14   Value:  degrees_north 

Attention: NetCDF attribute 'missing_value' does not exist for the selected variable. 
Variable:  time          Attribute:  long_name       Type:  NC_CHAR, string      Length:  5    Value:  time 
Variable:  time          Attribute:  units           Type:  NC_CHAR, string      Length:  22   Value:  days since 1500-12-31  

Attention: NetCDF attribute 'missing_value' does not exist for the selected variable. 
Variable:  time_weights  Attribute:  long_name       Type:  NC_CHAR, string      Length:  29   Value:  number of days per time step 
Variable:  time_weights  Attribute:  units           Type:  NC_CHAR, string      Length:  5    Value:  days 

Attention: NetCDF attribute 'missing_value' does not exist for the selected variable. 
Variable:  date          Attribute:  long_name       Type:  NC_CHAR, string      Length:  25   Value:  label for each time step 
Variable:  date          Attribute:  units           Type:  NC_CHAR, string      Length:  1    Value:   

Attention: NetCDF attribute 'missing_value' does not exist for the selected variable. 
Variable:  npptot        Attribute:  long_name       Type:  NC_CHAR, string      Length:  16   Value:  total NPP carbon 
Variable:  npptot        Attribute:  units           Type:  NC_CHAR, string      Length:  14   Value:  kg-C/m^2/month 
Variable:  npptot        Attribute:  missing_value   Type:  NC_FLOAT, 4 bytes    Length:  1    Value:  9e+20 
Value of netCDF attribute 'missing_value' is:  9e+20 
In file npptot0.nc there is 1 nlat line for a running total of 1 latitude lines.
:
:
:
variable 0: longitude, rank 1, size 4
variable 1: latitude, rank 1, size 61
variable 2: time, rank 1, size 60
variable 3: time_weights, rank 1, size 60
variable 4: date, rank 2, size 600 
```

# c# - 带有代码颜色的前景色

> ID：10629777
> 
> 赞同：6
> 
> 时间：2012-05-17T04:20:07.623
> 
> 标签：c#, asp.net

我是动态创建`HyperLink`的。我想通过添加颜色代码来改变颜色。

```
HyperLink hpl = new HyperLink();
hpl.Text = "SomeText";
hpl.ForeColor = "#5BB1E6";

//Cannot implicitly convert type 'string' to 'System.Drawing.Color 
```

但我不能。

如何添加代码颜色`ForeColor`？

是否可以？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T04:24:40.107

使用以下代码

```
HyperLink hpl = new HyperLink();
hpl.Text = "SomeText";
hpl.ForeColor = System.Drawing.ColorTranslator.FromHtml("#5BB1E6"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:27:39.573

采用

```
hpl.ForeColor =System.Drawing.ColorTranslator.FromHtml("#5BB1E6"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:41:04.827

您可以使用以下代码，它可以帮助您

```
HyperLink hpl = new HyperLink();
hpl.Text = "SomeText";
//use this
hpl.ForeColor = System.Drawing.Color.FromName("#5BB1E6") 
```

希望能帮助到你

# android - android 短信意图捆绑电话号码在哪里？

> ID：10629780
> 
> 赞同：1
> 
> 时间：2012-05-17T04:20:27.870
> 
> 标签：android, android-intent, sms, bundle, toast

这是我的短信发送意图代码的一部分

```
case Activity.RESULT_OK:
    Toast.makeText(getBaseContext(), "SMS sent", Toast.LENGTH_LONG).show();
    break; 
```

如何让 toast 显示“SMS sent - John Doe”而不是通用的“SMS sent”？

我查看了意图，bundle.setkey 正在寻找电话号码；他们有空值，我看错地方了吗？

感谢您的帮助和指点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:28:59.470

试试下面的代码

```
Intent intent = new Intent(SMS_SENT);
intent.putExtra("MobileNumber", SmsNumber); 
```

在 onRecieve 中，您可以捕获如下

```
case Activity.RESULT_OK:
                info += "Message Sent successfully !!";
                countEntered++;

                String tempMobileNumber = intent
                        .getStringExtra("MobileNumber"); 
```

# android - Android 应用程序中的活动数量是否重要？

> ID：10629782
> 
> 赞同：5
> 
> 时间：2012-05-17T04:20:30.620
> 
> 标签：android, android-activity

我正在开发一个 Android 应用程序。我已经跨越了 20 多个活动。所以我有点担心。我的意思是如果 Android 应用程序中有更多的活动，它会影响应用程序的性能，如速度、内存或任何其他问题吗？

**虽然这不是一个标准问题，但我仍然觉得它也可能对其他人有所帮助**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:23:33.500

是 Suraj**更多活动会影响性能**
活动相当于 GUI 工具包中的框架/窗口。它占据了屏幕的整个可绘制区域（减去顶部的状态和标题栏）。活动旨在显示 UI 并从用户那里获取输入一个活动（调用活动）可以通过 2 种方式生成另一个活动（子活动）：

*   Fire and forget – 创建一个事件（Intent）并触发它
*   异步回调——创建一个事件（Intent），触发它，并在（调用活动的）回调方法中等待它的响应。

因此，活动的效果将取决于您的设备、其处理器和内存等的性能。即使任何活动将保留在堆栈中并且未完成，它也会影响设备性能。即使你必须看看安全措施。

# jsctypes - 使用带有 JS-Ctypes 的 Linux 静态库

> ID：10629783
> 
> 赞同：1
> 
> 时间：2012-05-17T04:20:31.133
> 
> 标签：jsctypes

我在 Ubuntu 12.04 中创建了一个静态库，并希望使用 JS-Ctypes 来使用该库。

我的 JS 代码是：

```
try {  
    var libc = ctypes.open("/lib/i386-linux-gnu/libtestfn.a");  
    alert("JSCtype - after open1");
} 
```

不幸的是，打开失败并引发异常。相同的代码适用于 libc.so.6 等其他系统库。

解决此问题的任何指针。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T09:43:46.423

`jsctypes`内部用于`dlopen()`加载库（在 Unix 上），因此只能加载动态库。只需将您的代码重新编译为动态共享库，它就会正常加载。

# android - Opengl ES 模拟器与 Android 硬件

> ID：10629785
> 
> 赞同：0
> 
> 时间：2012-05-17T04:20:41.190
> 
> 标签：android, opengl-es, opengl-es-2.0

我正在开发一个 Opengl es 应用程序以在 Android 中部署，为此我正在使用 Opengl ES 模拟器在带有 Visual Studio 的 Windows 环境中进行开发。然后的想法是将其部署在 Android 上，只需对 JNI 和 Java 进行一些更改。

在 Windows 环境中，事情完美无缺，而在 Android 设备中，事情得到完美呈现，但它们的位置有点偏移。

我将 esContext 的高度和宽度设置为与 Windows 开发中的设备相同。尽管如此，行为还是有这种差异！还有其他可能会改变渲染位置的东西....

# python - Tipfy 如何使用安全 cookie 在谷歌应用引擎中存储 cookie

> ID：10629795
> 
> 赞同：1
> 
> 时间：2012-05-17T04:22:50.750
> 
> 标签：python, google-app-engine, tipfy

我正在尝试使用tipfy 实现保持登录选项，尽管我不允许使用默认的Tipfy 机制。这是我到目前为止所尝试的，

```
 secure_cookie_store = [SecureCookieStore()]
    user_cookie = Cookie.SimpleCookie()
    user_cookie['current_user'] = pickle.dumps(profile_user)
    user_cookie['current_user']['max-age'] = 60 * 60 * 24 * 365
    response = Response()
    response.set_cookie('current_user',\
                        secure_cookie_store.get_signed_value('current_user', 'hello'),
                        'test') 
```

我在实例化`SecureCookieStore()`对象时遇到问题。我应该为它的构造函数传递什么参数。请注意，我在请求处理程序实现的处理程序中编写了此代码段。如果有人给我一个正确的答案，我将不胜感激。

# jquery-ui - jquery ui 对话框正在创建两个对话框

> ID：10629798
> 
> 赞同：1
> 
> 时间：2012-05-17T04:23:16.600
> 
> 标签：jquery-ui, dialog

截图：[http ://d.pr/i/A4Kv](http://d.pr/i/A4Kv)

这是我的对话代码：

```
function popupbox(title,html,buttonTxt,buttonAction) {
  var buttons = {};
  if(buttonTxt != null) {
    buttons[buttonTxt] = buttonAction;
  }
  buttons['Cancel'] = function() {
    jQuery(this).dialog('destroy').remove();
  };
  var p = jQuery('<form class="dialoginnerbox">' + html  + '</form>');
  p.dialog({
    autoOpen: false,
    resizable: false,
    modal: false,
    width: 'auto',
    height: 'auto',
    maxHeight: 600,
    maxWidth: 980,
    title: title,
    close: function(event, ui){
        jQuery(this).dialog('destroy').remove();
    },
    buttons: buttons
  });
  p.dialog('open');
} 
```

有任何想法吗？

- - 更新 - -

我将返回的 html 换成了一些虚拟文本并修复了它.. 所以被放入弹出窗口的 html 的东西使它打开了两次......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-22T00:38:33.937

格式错误的 html 和内联脚本标签会导致 jquery ui 对话框打开多个对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T15:31:19.343

使用 jQueryUI 对话框；在某些情况下，jQuery 可能会将有效的 html 视为格式错误的 html。我这么说的原因是我用有效的 html 和有效的 html 注释为我的对话框加载了 html。我得到了双对话框，直到我从 ajax 加载的 html 中删除了 html 注释。例子...

内容.htm

```
<div id="myDialogContent">Alert!</div><!-- Here is an innocent looking comment --> 
```

对话框.js

```
$.get( '/content.htm', function( html ){ 
    $( html ).dialog(); 
}); 
```

这将产生一个双重对话。如果 html 以 html 注释开头或结尾，则会出现相同的对话框问题。唯一的方法是删除 html 注释或将 html 文本包装在另一个 html 标记中，就像这样......

对话框.js

```
$.get( '/content.htm', function( html ){ 
    $( '<div>'+html+'</div>' ).dialog(); 
}); 
```

这将产生一个对话框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-23T15:21:10.710

> > 函数 display_dialog() { if($('.dialog_wrapper').length) { return; }
> > 
> > ```
> > $('<div class="dialog_wrapper"</div>').dialog({
> >     autoOpen: true,
> >     modal: true, 
> > ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T22:26:40.853

此问题的解决方法是使用计数器：

```
var count = 0;
var $dialog = $('<div></div>') .dialog({ ...

autoOpen: false,
                        modal: true,
                        height: 625,
                        width: 500,
                        title: pagetitle
...
});

if (count > 0) {
                        $dialog.dialog("destroy").remove();
                        count = 0;
                    }
                    $dialog.dialog('open');
                    count++; 
```

为我工作......对于对话问题，但我在服务器上收到多个请求......类似的事情：当我第一次点击链接时，它会将信息发送到服务器。当我第二次单击（不刷新浏览器）时，它会发送两次相同的信息。当我第三次点击时，向服务器发送了三个请求，依此类推……

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-26T17:30:30.713

如果您将 html 包装在单个标签中，它可能会清理它。除非上面有一层，否则在 html 中包含 div 可能会导致每个 div 出现一个对话框：

这对我不起作用：

```
<hr /> blah blah blah 
<h3>blahblahtitle</h3> 
<div id=somestufffirst>here's the stuff</div> 
<div id=someotherstuff>here's some more stuff</div> 
```

但这确实：

```
<div>
<hr /> blah blah blah 
<h3>blahblahtitle</h3> 
<div id=somestufffirst>here's the stuff</div> 
<div id=someotherstuff>here's some more stuff</div>
</div> 
```

# plsql - 我可以将显式游标传递给函数/过程以在 FOR 循环中使用吗？

> ID：10629802
> 
> 赞同：9
> 
> 时间：2012-05-17T04:23:49.313
> 
> 标签：plsql

我有一个对游标返回的所有记录执行一些计算的过程。它看起来有点像这样：

```
PROCEDURE do_calc(id table.id_column%TYPE)
IS
  CURSOR c IS
    SELECT col1, col2, col3
      FROM table
     WHERE ...;
BEGIN
  FOR r IN c LOOP
    -- do some complicated calculations using r.col1, r.col2, r.col3 etc.
  END LOOP;
END; 
```

现在，我需要对来自不同表的不同记录集执行完全相同的计算。但是，它们具有与上述示例相同的“形状”。

是否可以编写如下所示的过程：

```
PROCEDURE do_calc2(c some_cursor_type)
IS
BEGIN
  FOR r IN c LOOP
    -- do the calc, knowing we have r.col1, r.col2, r.col3, etc.
  END LOOP;
END; 
```

我知道`SYS_REFCURSOR`，但我想知道是否可以使用更方便的`FOR ... LOOP`语法和隐式记录类型。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-18T06:39:30.867

创建一个包。

将光标声明为包变量。

用于`%rowtype`设置函数参数类型。

```
create or replace package test is
  cursor c is select 1 as one, 2 as two from dual;

  procedure test1;
  function test2(test_record c%ROWTYPE) return number;

end test;

create or replace package body test is
  procedure test1 is    
  begin
    for r in c loop      
      dbms_output.put_line(test2(r));
    end loop;
  end;

  function test2(test_record c%ROWTYPE) return number is
    l_summ number;
  begin
    l_summ := test_record.one + test_record.two;
    return l_summ;
  end;
end test; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-03-13T16:11:52.230

我有一个类似的问题，我有两个需要以相同方式处理的游标，所以这就是我想出来的。

```
DECLARE
   --Define our own rowType
   TYPE employeeRowType IS RECORD (
      f_name           VARCHAR2(30),
      l_name            VARCHAR2(30));
   --Define our ref cursor type
   --If we didn't need our own rowType, we could have this: RETURN employees%ROWTYPE
   TYPE empcurtyp IS REF CURSOR RETURN employeeRowType;

   --Processes the cursors
   PROCEDURE process_emp_cv (emp_cv IN empcurtyp) IS
      person employeeRowType;
   BEGIN
      LOOP
         FETCH emp_cv INTO person;
         EXIT WHEN emp_cv%NOTFOUND;
         DBMS_OUTPUT.PUT_LINE('Name = ' || person.f_name ||
                          ' ' || person.l_name);
      END LOOP;
   END;

   --Defines the cursors
   PROCEDURE mainProcedure IS
    emp empcurtyp;
   BEGIN
      OPEN emp FOR SELECT first_name, last_name FROM employees WHERE salary > 50000;
      process_emp_cv(emp);
      CLOSE emp;

      OPEN emp FOR SELECT first_name, last_name FROM kuren WHERE first_name LIKE 'J%';
      process_emp_cv(emp);
      CLOSE emp;
   END;

BEGIN
  mainProcedure;
END;
/ 
```

如果您想**批量收集**游标，也可以使用它。你只需要改变你的助手程序`process_emp_cv`；其余的可以保持不变。

## 使用批量收集

```
 --Processes the cursors
   PROCEDURE process_emp_cv (emp_cv IN empcurtyp) IS
      TYPE t_employeeRowTable IS TABLE OF employeeRowType;
      employeeTable   t_employeeRowTable;
   BEGIN
      LOOP
         FETCH emp_cv BULK COLLECT INTO employeeTable LIMIT 50;
         FOR indx IN 1 .. employeeTable.Count
         LOOP
            DBMS_OUTPUT.PUT_LINE('Name = ' || employeeTable(indx).f_name ||
                          ' ' || employeeTable(indx).l_name);
         END LOOP;
         EXIT WHEN emp_cv%NOTFOUND;
      END LOOP;
   END; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-07T04:13:00.237

试试这个，Usong ref cursor。

```
 declare
    type c is ref cursor;
    c2 c;
    type rec is record(
    id number,
    name varchar(20)
    );
    r rec;
    procedure p1(c1 in out c,r1 in out rec)is begin

    loop
    fetch c1 into r1;
    exit when c1%notfound;
    dbms_output.put_line(r1.id || ' ' ||r1.name);
    end loop;
    end;
    begin
    open c2 for select id, name from student;
    p1(c2,r);
    end; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-07T08:30:59.730

是的，您可以在过程和函数中显式使用游标，因为该游标需要在包中声明为变量

# java - 将元素添加到 ArrayList 中大于当前大小的位置

> ID：10629803
> 
> 赞同：5
> 
> 时间：2012-05-17T04:23:51.763
> 
> 标签：java, data-structures

目前我正在使用 ArrayList 来存储元素列表，因此我需要在特定位置插入新元素。我需要在大于当前大小的位置输入元素。例如：

```
ArrayList<String> arr = new ArrayList<String>();
arr.add(3,"hi"); 
```

现在我已经知道会有 OutOfBoundsException。有没有其他方法或其他对象可以在保持订单的同时做到这一点？这是因为我有根据索引查找元素的方法。例如：

```
ArrayList<String> arr = new ArrayList<String>();
arr.add("hi");
arr.add(0,"hello"); 
```

我希望现在在索引 1 而不是索引 0 处找到“hi”。
所以总而言之，除了手动将 null 插入中间的元素之外，有什么方法可以满足这两个要求：

*   将元素插入到大于当前大小的位置
*   当我在列表中间插入元素时，将现有元素向右推

我查看了[Java ArrayList add item outside current size](https://stackoverflow.com/questions/8925128/java-arraylist-add-item-outside-current-size)以及 HashMap，但 HashMap 不满足我的第二个标准。任何帮助将不胜感激。

PS 性能现在不是真正的问题。

更新：关于为什么我有这些特殊要求存在一些问题，这是因为我正在进行操作转换，我正在将一组操作插入到我的列表（一个数学公式）中。每个操作都包含一个字符串。当我在列表中插入/删除字符串时，我将通过跟踪已应用的每个操作来动态更新未应用的操作（如有必要）。我现在的解决方案是使用 ArrayList 的子类并覆盖一些方法。我当然想知道是否有更优雅的方式这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T04:41:59.457

你的要求是矛盾的：

> ...我需要在特定位置插入新元素。
> 
> 我需要在大于当前大小的位置输入元素。

这意味着位置是稳定的；即给定位置的元素保持在该位置。

> 我希望现在在索引 1 而不是索引 0 处找到“hi”。

这表明在某些情况下头寸不稳定。

你真的需要决定你需要哪种选择。

*   如果您必须有稳定的位置，请使用 a`TreeMap`或`HashMap`。（A`TreeMap`允许您按顺序迭代键，但代价是插入和查找成本更高……对于大型集合。）如有必要，请使用允许您“始终”生成新的“位置”键类型任何现有密钥对之间的密钥。

*   如果您不必有稳定的位置，请使用`ArrayList`，并处理必须使用 插入超出结束位置的情况`append`。

我看不出如果插入超出末端位置保持稳定是明智的，如果插入中间则允许不稳定。（此外，后者最终会使前者不稳定......）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T04:29:33.360

即使您可以使用 TreeMap 来维护键的顺序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T04:41:09.317

首先，我会说使用`Map`而不是列表。我想如果您使用`Map`. 但无论如何，如果你真的想这样做`Arraylist`

```
 ArrayList<String> a = new ArrayList<String>(); //Create empty list
        a.addAll(Arrays.asList( new String[100]));  // add n number of strings, actually null . here n is 100, but you will have to decide the ideal value of this, depending upon your requirement.
        a.add(7,"hello");
        a.add(2,"hi");
        a.add(1,"hi2"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-06T10:47:27.930

使用 Vector 类来解决这个问题。

向量向量 = 新向量（）； **矢量.setSize(100);**

向量.set(98, "a");

当“setSize”设置为 100 时，所有 100 个元素都将被初始化为空值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-27T14:33:42.920

对于那些仍在处理这个问题的人，你可以这样做。

```
Object[] array= new Object[10];
array[0]="1";
array[3]= "3";
array[2]="2";
array[7]="7";

List<Object> list= Arrays.asList(array); 
```

但问题是您需要首先确定总大小，这应该只是一个评论，但我没有太多的声誉来做到这一点。

# c# - 为什么这段代码只循环两次？

> ID：10629805
> 
> 赞同：1
> 
> 时间：2012-05-17T04:24:12.327
> 
> 标签：c#, sqlite

我有一个循环遍历列表中的每个项目并将其添加到数据库中。下面的代码是我在 WPF 表单上单击按钮时调用的方法。它从 app.xaml.cs 获取 ID 值和 Steps(DTO) 列表，并将列表中的数据放入数据库。

```
using (SQLiteConnection sqConnection = getDatabaseConnection())
{
    SQLiteCommand addItemCommand = sqConnection.CreateCommand();
    sqConnection.Open();
    SQLiteTransaction stepTrans;
    // Start a local transaction 
    stepTrans = sqConnection.BeginTransaction(System.Data.IsolationLevel.ReadCommitted);
    // Assign transaction object for a pending local transaction 
    addItemCommand.Transaction = stepTrans;
    addItemCommand.Connection = sqConnection;

     foreach (Step step in StepsGlobal)
        {
           string sqAddItem = String.Format
                ("INSERT INTO Steps(ID, RecipeID, Description, StepTime, Dependency, Priority, Type) Values(null, '{0}', '{1}', '{2}', '{3}', '{4}', '{5}')",
                recipeID, step.Description, step.StepTime, step.Dependency, step.Priority, step.Type);

            addItemCommand.CommandText = sqAddItem;
            addItemCommand.ExecuteNonQuery();
            stepTrans.Commit();
        } 
```

但是，它仅适用于前两项，如果列表包含两个以上的项目，我会收到以下错误。

```
A first chance exception of type 'System.ArgumentNullException' occurred in 
System.Data.SQLite.dll
System.ArgumentNullException: Value cannot be null.
Parameter name: No connection associated with this transaction
   at System.Data.SQLite.SQLiteTransaction.IsValid(Boolean throwError)
   at System.Data.SQLite.SQLiteTransaction.Commit()
   at Project.Methods.addStepsToDatabase() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:26:20.000

最好的猜测是 stepTrans.Commit... 提交事务并使对象无效。提交当前事务后，您将需要开始新事务。

# java - 当设备 GPS 关闭时获取移动设备的当前位置。移动网络应用程序

> ID：10629807
> 
> 赞同：0
> 
> 时间：2012-05-17T04:24:40.250
> 
> 标签：java, javascript, mobile-website

我正在开发一个移动网络应用程序。即使设备 GPS 关闭，我也想检测设备的当前位置。我们有什么办法可以做到吗？像（单元格/扇区/三角测量）这样的实现方法可以做到吗？

有没有可以帮助做到这一点的api？请帮忙。

谢谢和问候，维奈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:59:54.363

2 options based on where you want to determine - Java Script side. This wraps the HTML5 spec - Google Geolocation API - [http://code.google.com/p/geo-location-javascript/](http://code.google.com/p/geo-location-javascript/)

Or you could determine it on the server based on the IP address of the mobile phone (rememeber to make it clear to your users that you are using the IP to determine the location) [http://blog.programmableweb.com/2009/03/31/3-free-ways-to-geolocate-by-ip/](http://blog.programmableweb.com/2009/03/31/3-free-ways-to-geolocate-by-ip/)

# c# - 多线程和锁

> ID：10629809
> 
> 赞同：-1
> 
> 时间：2012-05-17T04:24:40.667
> 
> 标签：c#, multithreading, collections

我有一个关于多线程主题的问题，如描述

```
 private List<Email> emails = new List<Email>();

    private void AddEmail(Email email)
    {
        lock (this.emails)
        {
            this.emails.Add(email);
        }
    }

    private void ReadEmails()
    {
        foreach (Email email in this.emails)
        {
            Print(email);
        }
    } 
```

假设 ReadEmails 方法持续 10 秒，此时调用 AddEmail。那么是否会出现任何错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:33:51.927

您的`ReadEmails`方法不是线程安全的。你有几个选择。

**选项1：**

您可以`lock`在整个`foreach`循环周围放置一个。

```
private void ReadEmails()
{
  lock (emails)
  {
    foreach (Email email in this.emails)
    {
      Print(email);
    }
  }
} 
```

**选项#2：**

您可以在`lock`. 然后您可以无锁地迭代复制。

```
private void ReadEmails()
{
  List<Email> copy;
  lock (emails)
  {
    copy = new List<Email>(this.emails);
  }
  foreach (Email email in copy)
  {
    Print(email);
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:49:49.623

您绝对应该在 Read 方法中添加 Lock 方法。如果您不这样做，则可能会在读取过程尚未完成时添加电子邮件。由于 foreach 方法要求其集合在迭代期间不可更改，因此将引发异常。

```
 private void ReadEmails()
    {
        lock(emails) {
             foreach (Email email in this.emails) {
                Print(email);
             }
        }
    } 
```

# android - Soundpool 还是媒体播放器？

> ID：10629812
> 
> 赞同：10
> 
> 时间：2012-05-17T04:26:04.583
> 
> 标签：android

我正在为 android 做一个纸牌游戏，我希望每次扔纸牌时都能播放投掷声音。这是同一个文件。我还会播放其他声音，例如背景音乐和某些点击。您建议使用什么，声音池或创建 MediaPlayback 并播放它？每个人的优势/劣势是什么？我应该使用 ogg 还是 mp3/wave 文件？对此的任何帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-21T23:51:54.617

我会将声音池用于短片。我可能错了，但声音池的开销较小，而且它是播放短片的正确方法，它还允许您指定每秒可以播放多少次声音片段，这有助于降低手机速度。

关于 mp3 与 ogg 我使用 mp3。我不相信有任何性能问题。Ogg 是免费的，但这对于您的应用程序而言并不重要。另外，如果您计划在另一个不播放 ogg 文件的平台上使用这些剪辑，它可能会有所帮助。没有提到名字：P

# javascript - 我正在尝试从 jsfiddle 示例创建一个表，但它不工作 ANGULAR.JS

> ID：10629814
> 
> 赞同：1
> 
> 时间：2012-05-17T04:26:13.707
> 
> 标签：javascript, angularjs

我正在尝试创建一个我在这里找到的表

但我必须将它集成到我的解决方案和代码中，当我这样做时，我得到了这些古怪的字符，但没有错误。我的代码在这里

请看下图。

我想拥有这个

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:02:39.313

它工作正常[http://jsfiddle.net/ipsjolly/6zydf/](http://jsfiddle.net/ipsjolly/6zydf/)您可以更改要在 js 部分输入的数据

# python - 如何在 Selenium for Python 中切换到新窗口？

> ID：10629815
> 
> 赞同：66
> 
> 时间：2012-05-17T04:26:16.630
> 
> 标签：python, selenium, onclick, webdriver, ui-automation

我正在使用 Python进行**硒自动化项目。**

我面临一个问题，即处理多个浏览器窗口。

场景如下。当我单击主页上的链接时，会打开一个新窗口。在新打开的窗口中，我无法执行任何操作，因为焦点仍在主页 Web 驱动程序上。

谁能告诉我如何将焦点从背景窗口更改为新打开的窗口？

一个可能的解决方案是`driver.switch_to.window()`，但它需要窗口的名称。如何找出窗口的名称？如果这是一种错误的方法，任何人都可以提供一些代码示例来执行此操作吗？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2015-05-01T05:58:53.003

您可以通过使用`window_handles`and`switch_to.window`方法来做到这一点。

在单击链接之前，首先将窗口句柄存储为

```
window_before = driver.window_handles[0] 
```

单击链接后，将新打开的窗口的窗口句柄存储为

```
window_after = driver.window_handles[1] 
```

然后执行切换到窗口方法移动到新打开的窗口

```
driver.switch_to.window(window_after) 
```

同样，您可以在旧窗口和新窗口之间切换。以下是代码示例

```
import unittest
from selenium import webdriver

class GoogleOrgSearch(unittest.TestCase):

    def setUp(self):
        self.driver = webdriver.Firefox()

    def test_google_search_page(self):
        driver = self.driver
        driver.get("http://www.cdot.in")
        window_before = driver.window_handles[0]
        print window_before
        driver.find_element_by_xpath("//a[@href='http://www.cdot.in/home.htm']").click()
        window_after = driver.window_handles[1]
        driver.switch_to.window(window_after)
        print window_after
        driver.find_element_by_link_text("ATM").click()
        driver.switch_to.window(window_before)

    def tearDown(self):
        self.driver.close()

if __name__ == "__main__":
    unittest.main() 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2016-08-19T11:30:57.347

除了已经给出的答案之外，`window.open()`可以使用 javascript 命令打开一个新选项卡。

例如：

```
# Opens a new tab
self.driver.execute_script("window.open()")

# Switch to the newly opened tab
self.driver.switch_to.window(self.driver.window_handles[1])

# Navigate to new URL in new tab
self.driver.get("https://google.com")
# Run other commands in the new tab here 
```

然后，您可以按如下方式关闭原始选项卡

```
# Switch to original tab
self.driver.switch_to.window(self.driver.window_handles[0])

# Close original tab
self.driver.close()

# Switch back to newly opened tab, which is now in position 0
self.driver.switch_to.window(self.driver.window_handles[0]) 
```

或者关闭新打开的标签

```
# Close current tab
self.driver.close()

# Switch back to original tab
self.driver.switch_to.window(self.driver.window_handles[0]) 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-05-17T08:11:22.640

[`window_handles`](http://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver.window_handles)应该给你所有打开的窗口的参考。

[这](https://www.selenium.dev/documentation/en/webdriver/browser_manipulation/#switching-windows-or-tabs)就是文档中关于切换窗口的内容。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-04-16T20:10:54.993

例如。你可以拿

```
driver.get('https://www.naukri.com/') 
```

因为，它是一个当前窗口，我们可以命名它

```
main_page = driver.current_window_handle 
```

如果除当前窗口外至少有 1 个窗口弹出，您可以尝试此方法并将 if 条件放入 break 语句中，通过 hit n trial 为索引

```
for handle in driver.window_handles:
    if handle != main_page:
        print(handle)
        login_page = handle
        break

driver.switch_to.window(login_page) 
```

现在，无论您必须申请什么凭据，在登录后提供。窗口将消失，但您必须来到主页面窗口并完成

```
driver.switch_to.window(main_page)
sleep(10) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-05-12T06:27:27.197

我们可以通过使用“<strong>switchTo”方法在命名窗口之间移动来处理不同的窗口：

```
driver.switch_to.window("windowName")

<a href="somewhere.html" target="windowName">Click here to open a new window</a> 
```

或者，您可以将“窗口句柄”传递给“<strong>switchTo().window()”方法。知道了这一点，就可以像这样遍历每个打开的窗口：

```
for handle in driver.window_handles:
    driver.switch_to.window(handle) 
```

# android - 在 Android 中返回上一个应用程序（不是 Activity）

> ID：10629823
> 
> 赞同：5
> 
> 时间：2012-05-17T04:27:35.083
> 
> 标签：android

有两个 Android 应用程序相互调用：App1、App2。

脚步：

1.  从 Android 桌面启动 App1。-->

2.  从 App1 向 App2 启动 startActivity(intent) 或 startActivityForResult(intent,0)。-->

3.  再次从 App2 向 App1 启动 startActivity(intent) 或 startActivityForResult(intent,0)。-->

4.  开始 ( ? ) 返回 app1(activity) 或 App2。

我想制作一个对话框，让用户在步骤 4 中选择回到 App1 或 App2。是否可以完成它？

我已经在[这里尝试过这篇文章](https://stackoverflow.com/questions/4038479/android-go-back-to-previous-activity)，它只是回到了 App1 上的活动。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T04:39:52.143

您应该覆盖[`onActivityResults`](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)App1 中的活动，如果用户选择 App2，只需调用`finish`活动。

# c# - 从 C# 到 jquery 在 Cookie 中检索

> ID：10629825
> 
> 赞同：2
> 
> 时间：2012-05-17T04:28:05.873
> 
> 标签：c#, jquery

大家好，我有这个问题，即`lastGuestInsertedId`从文件后面的代码中的 C# cookie 到另一个 Web 表单，该表单`lastGuestInsertedId`通过 jquery 检索值，然后通过警报显示值。有任何想法吗？

C# 代码

```
 HttpCookie GuestCookie = new HttpCookie("GuestCookie");
            GuestCookie["Key"] = Convert.ToString(lastGuestInsertedId) ;

            GuestCookie.Expires = DateTime.Now.AddDays(1d);
            Response.Cookies.Add(GuestCookie); 
```

jQuery 代码

```
 var guestkey = $.cookie("GuestCookie")
            alert(guestkey); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:56:27.807

`$.cookie` is not part of default jQuery. You need some jQuery plugin to do that.

To check if you actually have cookies on client side - `alert(document.cookie)`.

# spring - Spring webflow 2 - url映射不起作用

> ID：10629826
> 
> 赞同：1
> 
> 时间：2012-05-17T04:28:08.723
> 
> 标签：spring, spring-webflow, url-mapping, spring-webflow-2

我正在使用 spring mvc 3 和 webflow 2。我一直在关注在线资源，并试图让一个示例正常工作。我无法让 webflow url 映射工作。只有 webflow 不工作，mvc 部分工作正常。

我不断收到的错误是：在名称为“appServlet”的 DispatcherServlet 中未找到带有 URI [/Project2Admin/pizza] 的 HTTP 请求的映射

我在下面粘贴了我的 servlet-context.xml。

非常感谢您的帮助！奥迪

* * *

servlet-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:flow="http://www.springframework.org/schema/webflow-config"
xsi:schemaLocation="http://www.springframework.org/schema/mvc     http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/webflow-config http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven/>  

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<beans:bean class="org.springframework.web.servlet.view.tiles2.TilesViewResolver"/>

<beans:bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/views/**/views.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean>

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
    <beans:property name="prefix" value="/WEB-INF/views/"/>
    <beans:property name="suffix" value=".jsp"/>
</beans:bean>

<context:component-scan base-package="com.project2.admin" />

<flow:flow-executor id="flowExecutor" flow-registry="flowRegistry"/>

<flow:flow-registry id="flowRegistry" base-path="/WEB-INF/flows">
    <flow:flow-location-pattern value="*-flow.xml"/>  
</flow:flow-registry>

<beans:bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <beans:property name="flowRegistry" ref="flowRegistry"/>
</beans:bean>

<beans:bean class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
    <beans:property name="flowExecutor" ref="flowExecutor"/>
</beans:bean>

<beans:bean class="com.example.PizzaFlowActions" id="pizzaFlowActions"/>

</beans:beans> 
```

* * *

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

</web-app> 
```

* * *

只有一个视图解析器（jstl 视图解析器）的 servlet_context.html 版本。mvc 和 webflow 部分都不适用于此设置。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:flow="http://www.springframework.org/schema/webflow-config"
xsi:schemaLocation="http://www.springframework.org/schema/mvc
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/beans   
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context   
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/webflow-config 
http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd">

<!-- DispatcherServlet Context: defines this servlet's request-processing infrastructure -->

<!-- Enables the Spring MVC @Controller programming model -->
<annotation-driven/>  

<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<beans:bean class="org.springframework.web.servlet.view.tiles2.TilesViewResolver">
    <beans:property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView"/>
    <beans:property name="prefix" value="/WEB-INF/views/"/>
    <beans:property name="suffix" value=".jsp"/>
</beans:bean>

<beans:bean class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <beans:property name="definitions">
        <beans:list>
            <beans:value>/WEB-INF/views/**/views.xml</beans:value>
        </beans:list>
    </beans:property>
</beans:bean>

<context:component-scan base-package="com.project2.admin" />

<flow:flow-executor id="flowExecutor" flow-registry="flowRegistry"/>

<flow:flow-registry id="flowRegistry" base-path="/WEB-INF/flows">
    <flow:flow-location-pattern value="*-flow.xml"/>  
</flow:flow-registry>

<beans:bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <beans:property name="flowRegistry" ref="flowRegistry"/>
</beans:bean>

<beans:bean class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
    <beans:property name="flowExecutor" ref="flowExecutor"/>
</beans:bean>

<beans:bean class="com.example.PizzaFlowActions" id="pizzaFlowActions"/>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T20:20:29.397

尝试将您的更改`FlowHandlerMapping`为

```
<beans:bean
    class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
    <beans:property name="flowRegistry" ref="flowRegistry" />
    <beans:property name="order" value="-1" />
</beans:bean> 
```

您正在使用 Spring MVC 的注释驱动配置，它`HandlerMapping`为您注册了一个默认值，我怀疑它不会落入下一个 HandlerMapping。这以前被报告为一个[问题](https://jira.springsource.org/browse/SPR-6581)。您希望 WebFlow 排`FlowHandlerMapping`在第一位 - 所以您将顺序设置为 -1。这就是我们在配置中的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T01:18:07.417

我设法通过为 webflows 创建一个调度程序 servlet 来解决这个问题。我不确定这是理想的解决方案，但它确实有效。mvc 和 webflows 现在都可以正常工作。

如果有人知道一种更优雅的方式来处理这个..即只使用一个调度程序 servlet 来处理 mvc 和 webflow 调用，请发布答案，我们将不胜感激。

谢谢！

* * *

web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

<!-- The definition of the Root Spring Container shared by all Servlets and Filters -->
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/spring/root-context.xml</param-value>
</context-param>

<!-- Creates the Spring Container shared by all Servlets and Filters -->
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- Processes application requests -->
<servlet>
    <servlet-name>appServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/appServlet/servlet-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet>
    <servlet-name>flowServlet</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/flow-context.xml</param-value>
    </init-param>
    <load-on-startup>2</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>appServlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping>

<servlet-mapping>
    <servlet-name>flowServlet</servlet-name>
    <url-pattern>/flow/*</url-pattern>
</servlet-mapping>

</web-app> 
```

* * *

流上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:flow="http://www.springframework.org/schema/webflow-config"
xmlns:p="http://www.springframework.org/schema/p"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/webflow-config 
http://www.springframework.org/schema/webflow-config/spring-webflow-config-2.0.xsd
http://www.springframework.org/schema/beans 
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:component-scan base-package="com.example" />

<!-- Executes flows: the entry point into the Spring Web Flow system -->

<!--<start id="flow_executor"/>--> 
<flow:flow-executor id="flowExecutor" flow-registry="flowRegistry" />
<!--<end id="flow_executor"/>--> 

<!-- The registry of executable flow definitions -->
<!--<start id="flow_registry"/>--> 
<flow:flow-registry id="flowRegistry" flow-builder-services="flowBuilderServices" base-path="/WEB-INF/flows">
<flow:flow-location-pattern value="/**/*-flow.xml" />
</flow:flow-registry>

<flow:flow-builder-services id="flowBuilderServices" view-factory-creator="mvcViewFactoryCreator"/>
<!--<end id="flow_registry"/>--> 

<!--<start id="mvcFactoryCreator"/>--> 
<bean id="mvcViewFactoryCreator" class="org.springframework.webflow.mvc.builder.MvcViewFactoryCreator">
<property name="defaultViewSuffix" value=".jspx" />   
</bean>
<!--<end id="mvcFactoryCreator"/>-->  

<!--Maps request paths to flows in the flowRegistry-->
<!--<start id="flowHandlerMapping"/>--> 
<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerMapping">
<property name="flowRegistry" ref="flowRegistry" />
</bean>
<!--<end id="flowHandlerMapping"/>--> 

<!--
Dispatches requests mapped to flows to FlowHandler implementations
-->
<!--<start id="flowHandlerAdapter"/>--> 
<bean class="org.springframework.webflow.mvc.servlet.FlowHandlerAdapter">
<property name="flowExecutor" ref="flowExecutor" />
</bean>
<!--<end id="flowHandlerAdapter"/>--> 

</beans> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T14:25:17.940

WebFlow 和 Spring MVC 对我来说一切正常

这是我的 web.xml 的一部分：

```
<servlet>
    <servlet-name>web-dispatcher</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value></param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>web-dispatcher</servlet-name>
    <url-pattern>*.do</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>web-dispatcher</servlet-name>
    <url-pattern>/public/*</url-pattern>
</servlet-mapping>
<servlet-mapping>
    <servlet-name>web-dispatcher</servlet-name>
    <url-pattern>/error/*</url-pattern>
</servlet-mapping> 
```

和我的网络调度员：

```
<bean id="viewNameTranslator" class="org.springframework.web.servlet.view.DefaultRequestToViewNameTranslator" />

<bean id="basicViewResolver" class="org.springframework.web.servlet.view.ResourceBundleViewResolver" >
    <property name="basename" value="views"/> 
</bean>

<!-- Resolves logical view names returned by Controllers to Tiles; a view name to resolve is treated as the name of a tiles definition -->
<bean id="tilesViewResolver" class="org.springframework.js.ajax.AjaxUrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.webflow.mvc.view.FlowAjaxTilesView"/>
</bean>

<!-- Configures the Tiles layout system -->
<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/jsp/views.xml</value>
            <value>/WEB-INF/jsp/fragments/views.xml</value>
            <!-- Flow views -->
            <value>/WEB-INF/flows/**/views.xml</value>              
            <!-- PUBLIC Pages -->
            <value>/WEB-INF/jsp/public/views.xml</value>
        </list>
    </property>
</bean> 
```

希望这可以帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-18T04:52:32.337

我认为这里的问题在于您的 servlet-context.xml 文件中有两个不同的视图解析器。

请移除**InternalResourceViewResolver**并将 viewClass、前缀和后缀属性放在**TilesViewResolver** bean 中。

据我说，这应该可以解决您的问题。

干杯。

# android - Android水平方向旋转时缺少某些部分

> ID：10629835
> 
> 赞同：2
> 
> 时间：2012-05-17T04:30:08.410
> 
> 标签：android

我目前正在开发一个应用程序。当我在 android 手机中安装 my_app 并在水平视图中旋转时，我的按钮丢失了，请帮忙！！在此先感谢我的Java编码是：

```
public class Draw extends Activity {
     ImageView iv1;
    @Override   
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final DrawView drawView = new DrawView(this);
        setContentView(R.layout.draw);
        FrameLayout frm_layout=(FrameLayout) findViewById(R.id.main_frame);
        iv1=(ImageView) findViewById(R.id.imageView1);
        frm_layout.addView(drawView);

        Intent myIntent = getIntent(); // this is just for example purpose
        String test=myIntent.getExtras().getString("guided");
        if(test.equals("1"))
        {
            iv1.setImageResource(R.drawable.untitled);

            iv1.setAlpha(100);
        }
        else
        {
            //iv1.setImageResource(null);
        }
        //Toast.makeText(getApplicationContext(), test.toString(), 2000).show();

        Button btn_undo=(Button) findViewById(R.id.button1);
        btn_undo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                drawView.onClickUndo();
            }
        });

        Button btn_redo=(Button) findViewById(R.id.button2);
        btn_redo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                drawView.onClickRedo();
            }
        });
    }

} 
```

我的 XML 编码如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="@android:color/white" >
 <FrameLayout
     android:id="@+id/main_frame"
     android:layout_width="fill_parent"
     android:layout_height="472dp"
     android:background="@android:color/white" >

    <ImageView
         android:id="@+id/imageView1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
          /> 

 </FrameLayout>
 <RelativeLayout
     android:id="@+id/relativeLayout1"
     android:layout_width="match_parent"
     android:layout_height="match_parent"
       >
     <Button
         android:id="@+id/button2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:layout_alignParentTop="true"
         android:layout_centerHorizontal="true"
         android:text="Redo" />
     <Button
         android:id="@+id/button1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:layout_alignParentLeft="true"
         android:layout_alignParentTop="true"
         android:text="Undo" />
     <Button
         android:id="@+id/button3"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:layout_alignParentRight="true"
         android:layout_alignParentTop="true"
         android:text="Save" />
 </RelativeLayout>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:35:27.807

做一件事，在 res 文件夹中创建一个名为 Layout-land 的文件夹，其中放置您的 xml 文件。现在您可以在水平模式下设计您的 xml。在该文件中执行您想要的任何更改并检查：

otw 在整个布局中放置一个滚动条，然后检查:) 祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:39:00.743

只需复制并粘贴到您的 xml 文件中，它就会完全运行。我已经测试过了。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@android:color/white" >
<FrameLayout
 android:id="@+id/main_frame"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="@android:color/white" android:layout_weight="0.1">

<ImageView
     android:id="@+id/imageView1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
      /> 

</FrameLayout>
<RelativeLayout
 android:id="@+id/relativeLayout1"
 android:layout_width="match_parent"
 android:layout_height="match_parent"
   android:layout_weight="0.9" android:layout_gravity="bottom" android:layout_marginTop="-10dp">
 <Button
     android:id="@+id/button2"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentTop="true"
     android:layout_centerHorizontal="true"
     android:text="Redo" />
 <Button
     android:id="@+id/button1"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentLeft="true"
     android:layout_alignParentTop="true"
     android:text="Undo" />
 <Button
     android:id="@+id/button3"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_alignParentBottom="true"
     android:layout_alignParentRight="true"
     android:layout_alignParentTop="true"
     android:text="Save" />
 </RelativeLayout>
</LinearLayout> 
```

希望这是你想要的。

# iphone - 以编程方式隐藏 UISplitview 的 masterDetailview

> ID：10629836
> 
> 赞同：2
> 
> 时间：2012-05-17T04:30:08.900
> 
> 标签：iphone, objective-c, ipad, uiviewcontroller, uisplitviewcontroller

我正在开发`UISplitview`基础项目。我有一个关于 UISplitview 的问题。我想以纵向模式隐藏 masterDetailview（左侧视图），形成其他`UIview controller`类。我该怎么做？

我在 Appdelegate 中声明了 UISplitviewcontroller 并创建了单独的详细视图类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:35:03.507

试试这个链接[http://www.raywenderlich.com/1040/ipad-for-iphone-developers-101-uisplitview-tutorial](http://www.raywenderlich.com/1040/ipad-for-iphone-developers-101-uisplitview-tutorial)你会得到你的答案。

或试试这个

```
 - (BOOL)splitViewController:(UISplitViewController*)svc shouldHideViewController:(UIViewController *)vc 
          inOrientation:(UIInterfaceOrientation)orientation 
 {
     return YES;
  } 
```

这用于删除 masterViewController

# python - 如何在 Jinja2 模板中间接调用宏？

> ID：10629838
> 
> 赞同：8
> 
> 时间：2012-05-17T04:30:32.673
> 
> 标签：python, jinja2

我正在尝试做这样的事情：

```
{% macro obj_type_1 %}
stuff
{% endmacro %}
{% macro obj_type_2 %}
stuff
{% endmacro %}

{{ (obj|get_type)(obj) }} 
```

在这个例子中，`get_type`是一个过滤器，它会返回`obj_type_1`或`obj_type_2`- 即要调用的宏的名称`obj`。我不想`obj`用配置输出进行标记，因为现在`obj`在多个模板中用作结构数据，根据上下文使用不同的标记呈现。

我知道这里的语法有点受折磨，但我认为那是因为我想做的事情在 Jinja 模板中无法立即实现。我正在尝试用模板替换某些配置生成代码中的 if/elif/else 废话，但这似乎是一个症结所在。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-07-03T12:12:01.967

您可以创建一个 Jinja2 过滤器，它从当前上下文中获取宏，然后评估宏。过滤器是：

```
@contextfilter
def call_macro_by_name(context, macro_name, *args, **kwargs):
    return context.vars[macro_name](*args, **kwargs) 
```

如果您的应用程序需要，您可以在 context.vars 中查找宏之前对 macro_name 执行字符串操作。

这是一个完整的例子：

```
#!/usr/bin/env python
from jinja2 import Environment, contextfilter

@contextfilter
def call_macro_by_name(context, macro_name, *args, **kwargs):
    return context.vars[macro_name](*args, **kwargs)

template_string = """\
{%- macro MyMacro(item) %}MyMacro({{ item }}){% endmacro -%}
{{ MyMacro('direct') }}
{{ 'MyMacro' | macro('indirect') }}
"""

env = Environment()
env.filters['macro'] = call_macro_by_name
template = env.from_string(template_string)
print(template.render()) 
```

哪个打印

```
MyMacro(direct)
MyMacro(indirect) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-12T12:54:07.220

可以通过 import dict 用法简单地调用宏：

**宏.html**

```
{% macro render_foo(value) %}
HELLO {{ value }}!
{% endmacro %} 
```

**my_view.html**

```
{% import "macros.html" as my_macros %}

{% set macro_name = 'render_' + dynamic_content %}
{{ my_macros[macro_name]('world') }} 
```

呈现为：

```
HELLO world! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T21:59:29.657

就个人而言，由于 get_type 用作调度程序，因此将其实现为 jinja 宏会更透明，该宏会根据 obj 的类型调用专门的宏。这消除了它返回可调用宏的需要，同时整合了专用宏和指示如何/何时使用它们的逻辑。

# git - Github 错误：找不到存储库（是的，另一个）

> ID：10629840
> 
> 赞同：3
> 
> 时间：2012-05-17T04:30:45.103
> 
> 标签：git, github

我已经在 SO 上搜索并阅读了大多数类似的问题，但似乎没有一个与我的相同。我在 Github 上有一个私人仓库，一个小时前我可以很好地推送。现在，我收到 ERROR: Repository not found 消息。

我的 ~/.ssh/config 中有以下内容：

```
Host github
    Hostname github.com
    User git
    IdentityFile ~/.ssh/id_rsa_gr.pub 
```

因为我需要使用特定的公钥。我的 .git/config 如下所示（出于安全目的，进行了一些信息更改：

```
[core]
        repositoryformatversion = 0
        filemode = true
        bare = false
        logallrefupdates = true
        ignorecase = true
[remote "origin"]
        fetch = +refs/heads/*:refs/remotes/origin/*
        url = git@github:MyProject/MyProject.git
[branch "master"]
        remote = origin
        merge = refs/heads/master 
```

我不明白为什么它工作了一段时间然后就停止了。

编辑：现在，我什至无法克隆它。我犯了同样的错误。

编辑 2：我将 VERBOSE 添加到我的 ssh 配置中，这就是我得到的：

```
Authenticated to github.com ([207.97.227.239]:22).
ERROR: Repository not found.
Transferred: sent 2432, received 2920 bytes, in 0.2 seconds
Bytes per second: sent 12278.1, received 14741.7
fatal: The remote end hung up unexpectedly 
```

编辑3：更多信息，我跑了 ssh -vT git@github ，这里是相关信息：

```
debug1: Reading configuration data /Users/gdboling/.ssh/config
debug1: Applying options for gh
debug1: Reading configuration data /etc/ssh_config
debug1: Applying options for *
debug1: Connecting to github.com [207.97.227.239] port 22.
debug1: Connection established.
debug1: identity file /Users/gdboling/.ssh/id_rsa_gr type 1
debug1: identity file /Users/gdboling/.ssh/id_rsa_gr-cert type -1
....
debug1: Next authentication method: publickey
debug1: Offering RSA public key: /Users/gdboling/.ssh/id_rsa 
```

请注意，它正在找到正确的密钥，然后使用错误的密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T14:42:29.683

听起来您的 SSH 代理在尝试对您进行身份验证时提供了错误的密钥。超级用户的这个问题听起来像你正在尝试做的事情[https://superuser.com/questions/272465/using-multiple-ssh-public-keys](https://superuser.com/questions/272465/using-multiple-ssh-public-keys)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:03:02.617

您是否停止为您的帐户付款？

您可以在 .ssh/config 中打开详细信息吗？

# javascript - 在 Javascript Regex 中，如何匹配哈希标签，但不匹配 HTML 代码？

> ID：10629841
> 
> 赞同：0
> 
> 时间：2012-05-17T04:30:46.810
> 
> 标签：javascript, regex

这就是我获取正文标签的方式。

```
var tags =  body.match(/#([a-z0-9]+)/gi); 
```

但是，如果句子是：

```
The brown #fox jumped over &#8216; fence. 
```

上面的正则表达式将处理“8216;” 作为一个标签，这是我不想要的。我只想要“狐狸”作为标签。

注意：我只想要一个基本的正则表达式解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T04:36:07.770

**试试这个：**

```
/(^#|\s#)([a-z0-9]+)/gi 
```

**现场演示：http:** [//jsfiddle.net/DerekL/NpjyR/](http://jsfiddle.net/DerekL/NpjyR/)

或这个：

```
/(^#|[^&]#)([a-z0-9]+)/gi   //this will exclude every &# 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T04:34:35.220

假设您可以访问 DOM，您可以使用 DOM 来解码 HTML，然后匹配文本内容：

```
var temp = document.createElement('div');
temp.innerHTML = body;
var tags = temp.textContent.match(/#([a-z0-9]+)/gi); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:35:14.030

**试试这个：**

```
#([a-z0-9]+)\b(?!;) 
```

# objective-c - UITableView 加载数据问题

> ID：10629850
> 
> 赞同：0
> 
> 时间：2012-05-17T04:32:29.763
> 
> 标签：objective-c, uitableview

我连接到服务器并检索五行数据，然后使用我的`UITableView.`So far so good 的 reloaddata 将它们显示在我的 UITableView 上。

然后我尝试从服务器检索另外五行，并再次使用我的`UITableView`. 我在 上看到了新数据，`UITableView`但是当我向下滚动查看以前的数据时，我的表格再次加载 - 重新绘制它们（UITableView 委托在我向下滚动时重新绘制对象）。我想要以前的数据但我不想被重绘以提高平滑度！有没有办法重新加载我的 UITableView 的数据，并且当我向下滚动到不重绘的先前数据时？

我只想重新加载我从服务器检索到的最后五个数据，而不是所有数据。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:50:44.610

如果您只想重新加载某些特定的行，请使用

```
[MytableView reloadRowsAtIndexPaths:arrOfIndexpaths withRowAnimation:UITableViewRowAnimationNone]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:20:22.920

您控制支持 UITableView 数据源的数据。当您实现数据源回调时，您正在从数组或保存数据的任何数据结构中检索数据。

如果您希望在从服务器检索数据后“刷新”数据，请清除您的数据结构（数组？）并替换数据。然后您可以调用 reload 并且数据源委托方法将查询新替换的数据。

# java - java多线程的多客户端错误

> ID：10629853
> 
> 赞同：-4
> 
> 时间：2012-05-17T04:32:36.610
> 
> 标签：java, multithreading, client, chat

下面是处理多用户聊天的客户端和服务器的代码。但是，当一个客户端写“退出”时，我的其他当前连接的客户端也终止，然后我无法连接另一个客户端。有人可以帮忙吗？

这是我的客户代码：

```
class TCPClientsc {
    public static void main(String argv[]) throws Exception {
        String modifiedSentence;
        InetAddress inetAddress = InetAddress.getLocalHost();
        System.out.println(inetAddress);

        Socket clientSocket = new Socket(inetAddress, 6789);
        DataOutputStream outToServer = new DataOutputStream(clientSocket.getOutputStream());

        BufferedReader inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

        CThread write = new CThread(inFromServer, outToServer, 0, clientSocket);
        CThread read = new CThread(inFromServer, outToServer, 1, clientSocket);
    }
}

class CThread extends Thread {
    BufferedReader inFromServer;
    DataOutputStream outToServer;
    Socket clientSocket = null;
    int RW_Flag;
    public CThread(BufferedReader in, DataOutputStream out, int rwFlag, Socket clSocket) {
        inFromServer = in;
        outToServer = out;
        RW_Flag = rwFlag;
        clientSocket = clSocket;
        start();
    }
    public void run() {
        String sentence;
        try {
            while (true) {
                if (RW_Flag == 0) {// write
                    BufferedReader inFromUser = new BufferedReader(new InputStreamReader(System.in));
                    sentence = inFromUser.readLine();

                    // System.out.println("Writing ");
                    outToServer.writeBytes(sentence + '\n');
                    if (sentence.equals("quit"))
                        break;

                } else if (RW_Flag == 1) {
                    sentence = inFromServer.readLine();
                    if (sentence.endsWith("quit"))
                        break;
                    System.out.println("(received)" + sentence);
                }
            }
        } catch (Exception e) {
        } finally {
            try {
                inFromServer.close();
                outToServer.close();
                clientSocket.close();

            } catch (IOException ex) {
                Logger.getLogger(CThread.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

服务器代码：

```
class TCPServersc {
    static int i = 0;
    static SThread tt[] = new SThread[100];
    static SThread anot[] = new SThread[100];
    public static void main(String argv[]) throws Exception {
        String client;
        String capitalizedSentence;
        ServerSocket welcomeSocket = new ServerSocket(6789);

        while (true) {
            Socket connectionSocket = welcomeSocket.accept();
            i++;
            System.out.println("connection :" + i);
            BufferedReader inFromClient = new BufferedReader(newInputStreamReader(connectionSocket.getInputStream()));
            DataOutputStream outToClient = new DataOutputStream(connectionSocket.getOutputStream());
            BufferedReader inFromMe = new BufferedReader(new InputStreamReader(System.in));

            tt[i] = new SThread(inFromClient, outToClient, tt, 0, connectionSocket, i);
            anot[i] = new SThread(inFromMe, outToClient, tt, 1, connectionSocket, i);
        }
    }
}

// ===========================================================
class SThread extends Thread {
    BufferedReader inFromClient;
    DataOutputStream outToClient;
    String clientSentence;
    SThread t[];
    String client;
    int status;
    Socket connectionSocket;
    int number;

    public SThread(BufferedReader in, DataOutputStream out, SThread[] t, int status, Socket cn, int number) {
        inFromClient = in;
        outToClient = out;
        this.t = t;
        this.status = status;
        connectionSocket = cn;
        this.number = number;
        start();
    }

    public void run() {
        try {
            if (status == 0) {
                clientSentence = inFromClient.readLine();
                StringTokenizer sentence = new StringTokenizer(clientSentence, " ");

                // ///////////////////////////////////////////////////////////
                if (sentence.nextToken().equals("login")) {
                    String user = sentence.nextToken();
                    String pass = sentence.nextToken();
                    FileReader fr = new FileReader("file.txt");
                    BufferedReader br = new BufferedReader(fr);
                    int flag = 0;
                    while ((client = br.readLine()) != null) {
                        if ((user.equals(client.substring(0, 5))) && (pass.equals(client.substring(6, 10)))) {
                            flag = 1;
                            System.out.println(user + " has logged on");
                            for (int j = 1; j <= 20; j++) {
                                if (t[j] != null)
                                    t[j].outToClient.writeBytes(user + " has logged on" + '\n');// '\n' is necessary
                            }
                            break;
                        }
                    }
                    if (flag == 1) {
                        while (true) {
                            clientSentence = inFromClient.readLine();
                            System.out.println(user + " : " + clientSentence);
                            for (int j = 1; j <= 20; j++) {
                                if (t[j] != null)
                                    // '\n' is necessary
                                    t[j].outToClient.writeBytes(user + " : " + clientSentence + '\n');
                            }
                            // if(clientSentence.equals("quit"))break;
                        }
                    }
                }
            }
            // /////////////////////////////////////////////////////////////////////////////////////////////////////////////////
            if (status == 1) {
                while (true) {
                    clientSentence = inFromClient.readLine();
                    if (clientSentence.equals("quit"))
                        break;

                    System.out.println("Server: " + clientSentence);
                    for (int j = 1; j <= 20; j++) {
                        if (t[j] != null)
                            t[j].outToClient.writeBytes("Server :" + clientSentence + '\n');// '\n' is necessary
                    }
                }
            }
        } catch (Exception e) {
        } finally {
            try {
                // System.out.println(this.t);
                inFromClient.close();
                outToClient.close();
                connectionSocket.close();
            } catch (IOException ex) {
                Logger.getLogger(SThread.class.getName()).log(Level.SEVERE, null, ex);
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:55:09.753

这段代码有很多问题。

*   首先，在未来，请发布格式良好的*更小、更简洁的代码片段。*我只需要基本上重新格式化您帖子中的所有内容。
*   我看到几个地方你正在捕捉但除了例外什么都不做。这是*非常*糟糕的做法。至少您应该打印/记录您捕获的异常。我怀疑这会导致您的问题。
*   我觉得`RW_Flag`非常混乱。那么你应该有两个客户端线程。一个用于写入`System.in`服务器，一个用于读取。没有一个客户端线程可以做两件事。与`status`服务器中的标志相同。那应该是2个不同的线程。
*   而不是`int flag = 0;`在服务器中，应该是`boolean loggedIn;`. 在 Java 中使用布尔值而不是 C 风格的标志，并使用更好的变量名。代码的可读性会为自己买单。`status`,`RW_flag`等也一样。
*   您应该将连续的代码移到方法中，而不是巨大的代码块：`handleSystemIn()`, `handleClient()`, `talkToServer()`. 一旦您在代码中创建了更多方法，并缩小了各个代码块，它就会使其更具可读性/可调试性/可理解性。
*   您需要`synchronized (tt)`围绕该数组的每次使用设置一个块。一旦你有多个线程都在使用`tt`，如果主`accept`线程添加到它，更新需要同步。

尽管 spagetti 代码太难解析，但我并没有立即看到问题。我怀疑您在某处抛出异常，这就是客户端在第一个退出后无法连接的原因。除此之外，我将继续自由地使用`System.out.println`调试来查看哪些消息被发送到哪里。

# jquery - jQuery - 分配标签文本

> ID：10629854
> 
> 赞同：0
> 
> 时间：2012-05-17T04:32:42.953
> 
> 标签：jquery

jQuery 1.7.1 - 我有一个输入文本元素数组（类 - pr）和相同数量的标签数组元素（类 - err）。我对文本框的模糊进行了一些验证，并希望将错误消息分配给与文本框关联的标签。以下 jQuery 代码不起作用。

**HTML**

```
<tr>
   <td>
            <label class="err" style="display: none;" for="prd"></label> 
            <input type="text" class="pr" name="prd" />
    </td>
 </tr> 
```

**jQuery**

```
$("input.pr:text").blur(function(event){
    // .... validation code
    var index = $.inArray(this, $("input.pr:text"));
    $("label.err")[index].show();
    $("label.err")[index].text("Enter a number");
 }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:42:31.003

一个班轮：

```
$('label.err').eq(index).show().text('Enter a number'); 
```

或者可能更好：

```
$("input.pr:text").blur(function(event){
     $(this).prev('label').show().text("Enter a number");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:38:05.540

一旦你使用索引引用了一个 JQuery 对象，它就不再是一个 JQuery 对象而是一个普通的 DOM 元素。请改用以下内容：

```
var el = $($("label.err")[index]);
el.show();
el.text("Enter a number"); 
```

# ipad - 使视图控制器成为拆分视图控制器

> ID：10629857
> 
> 赞同：1
> 
> 时间：2012-05-17T04:33:08.903
> 
> 标签：ipad, uisplitviewcontroller

我正在创建一个 ipad 应用程序，它首先显示登录屏幕，然后我需要在导航页面上显示主/详细信息格式。以前我没有太多时间进行研究，所以我使用方向和隐藏/显示放置在视图控制器上的视图手动创建了这些视图。

有什么方法可以让 viewcontroller 成为 splitviewcontroller。

请指教。

谢谢，

# powershell - csmanage 或 powershell commandlet，选择哪一个？

> ID：10629870
> 
> 赞同：3
> 
> 时间：2012-05-17T04:34:38.493
> 
> 标签：powershell, azure

在四处寻找有关管理我的 azure 应用程序的一些信息后，我发现了 csmanage 和 powershell commandlet。这些应用程序之间有什么区别以及选择哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T04:46:07.287

Windows Azure 服务管理的基础是 REST API，而使用 REST API 的好处在于，只要有可用的网络和安全基础设施，您就可以将 REST 包装在任何编程语言中。您上面提到的大多数工具都在底层使用 REST API 并使用 Windows Azure 服务管理 API。CSMANAGE 和 PowerShell Cmdlet 使用 Windows Azure 服务管理 API 来管理 Windows Azure 订阅。[您可以在此处](http://msdn.microsoft.com/en-us/library/windowsazure/ee460786.aspx)了解有关服务管理 API的更多信息。

还有另一个名为[WAPMMC](http://wapmmc.codeplex.com/)（Windows Azure 平台管理工具 (MMC)）的工具，它也是基于服务管理 API 构建的。

除此之外，还有使用服务管理 API 构建的 3rd 方工具，即[Cerebrata Powershell cmdlet](http://www.cerebrata.com/Products/AzureManagementCmdlets/)。

**比较以上所有内容，我会说 Windows Azure Powershell Cmdlets 是所有这些工具中最强大的工具，并且它已经更新了错误修复和经常添加的更多功能。要在您的机器上使用它，您只需要在您的机器上下载 powershell cmdlet 和 Windows Azure SDK，因为它们是必需的。 [http://wappowershell.codeplex.com/](http://wappowershell.codeplex.com/)**

最近我还发现了一个名为 Burp 的基于 Java 的工具，它可以直接从其 shell 中使用 REST API 来管理 Windows Azure 订阅。不需要 .net 框架或 Azure SDK。你只需要一台带有 Java 运行时和 Burp 的机器。我在[这里](http://blogs.msdn.com/b/avkashchauhan/archive/2012/05/16/windows-azure-management-using-burp-java-based-gui-tool-and-rest-api.aspx)添加了一个关于这方面的博客。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T04:46:19.547

我认为这取决于您更喜欢什么。我认为 CSManage 工具不会再更新那么多了（也许根本没有 - 不确定）。PowerShell cmdlet 引起了很多关注——无论是来自 Microsoft 还是来自 Cerebrata 等合作伙伴。

我的投票 - 学习 PowerShell 并使用 PowerShell cmdlet 来处理您的 Windows Azure 应用程序。学习曲线小，非常值得。

# facebook - 频道文件和 CDN

> ID：10629875
> 
> 赞同：3
> 
> 时间：2012-05-17T04:35:05.353
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我的主要 javascript（以及所有静态内容）包含在`https://static.anuary.com`. 用户正在浏览的 URL 是`https://dev.anuary.com/somepath/`。

频道文件需要放在哪里，`dev.anuary.com`或者`static.anuary.com`？目前是[http://static.anuary.com/channel.html](http://static.anuary.com/channel.html)。

* * *

我问是因为我仍然收到错误消息：

> 不安全的 JavaScript 尝试使用 URL https://www.facebook.com/dialog/oauth?access_token=[..]&api_key=[..]&app_id=[..]&client_id=[..]&display=popup&domain= 访问框架dev.anuary.com&locale=en_US&origin=1&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D6%23cb%3Df3ac7a0544%26origin%3Dhttp%253A%252F%252Fdev.anuary。 COM％252Ff373e908a8％26domain％3Ddev.anuary.com％26relation％3Dopener％26frame％3Df312def42c＆RESPONSE_TYPE =记号％2Csigned_request＆范围=电子邮件％2Cuser_birthday％2Cuser_likes％2Cuser_interests％2Cpublish_stream＆SDK =从帧乔伊与URL [http://dev.anuary.com/658fe23c24564ac978c31d167549c4ce8b36686d65a78ad99bfb38765d46e232 /](http://dev.anuary.com/658fe23c24564ac978c31d167549c4ce8b36686d65a78ad99bfb38765d46e232/)。域、协议和端口必须匹配。

* * *

回应@dtbarne：

嗯，就是这样——我仍然不知道，因为我已经尝试过弓形方法和任何方法，以防它产生相同的错误：

> 不安全的 JavaScript 尝试使用 URL https://www.facebook.com/dialog/oauth?access_token=[..]&api_key=[..]&app_id=[..]&client_id=[..]&display=popup&domain= 访问框架dev.anuary.com&locale=en_US&origin=1&redirect_uri=http%3A%2F%2Fstatic.ak.facebook.com%2Fconnect%2Fxd_arbiter.php%3Fversion%3D6%23cb%3Df1ee31b93%26origin%3Dhttp%253A%252F%252Fdev.anuary。 COM％252Ff9359b2f％26domain％3Ddev.anuary.com％26relation％3Dopener％26frame％3Df18e94f9c4＆RESPONSE_TYPE =记号％2Csigned_request＆范围=电子邮件％2Cuser_birthday％2Cuser_likes％2Cuser_interests％2Cpublish_stream＆SDK =从帧乔伊与URL [http://dev.anuary.com/658fe23c24564ac978c31d167549c4ce8b36686d65a78ad99bfb38765d46e232 /](http://dev.anuary.com/658fe23c24564ac978c31d167549c4ce8b36686d65a78ad99bfb38765d46e232/)。域、协议和端口必须匹配。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:40:49.380

听起来你已经知道答案了。它必须在 dev.anuary.com 上。目的是允许 FB 和用户访问的 URL 之间的通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T15:24:21.120

正如你自己所说，这个错误不是致命的，它意味着警告用户可能会发生一些可疑的事情。

`By Design`Facebook 还在他们的错误系统中将此问题标记为：[错误 > 不安全的 JavaScript 尝试使用 URL 访问框架](http://developers.facebook.com/bugs/318208704915095)...。
此外，这里有很多关于堆栈溢出的线程，例如：[Facebook Authentication - Unsafe JavaScript attempt to access frame with URL](https://stackoverflow.com/questions/8013008/facebook-authentication-unsafe-javascript-attempt-to-access-frame-with-url)。

现在我们知道这个“错误消息”是不可避免的，只要一切对你有用，你就可以随意使用这个频道。
正如文档中所述，您甚至不需要使用该通道：

> channelUrl 参数是可选的，但建议使用。提供通道文件可以帮助解决三个特定的已知问题。首先，包含跨框架通信的代码的页面可能会导致社交插件在没有 channelUrl 的情况下显示为空白。其次，如果没有提供 channelUrl 并且页面包含自动播放的音频或视频，则用户可能会听到两个音频流，因为该页面已在后台第二次加载以进行跨域通信。第三，通道文件将防止在您的服务器端日志中包含额外的命中。如果您不指定 channelUrl，您可以从日志中删除包含 fb_xd_bust 或 fb_xd_fragment 参数的页面查看，以确保正确计数。

但它也指出：

> 频道文件解决了某些浏览器中跨域通信的一些问题。

因此，由您决定。
我个人建议使用频道并从常规服务器而不是静态服务器提供文件。
但是，您应该将输出设置为具有较长的缓存到期日期，这样您的服务器就不会收到很多对此文件的请求，正如他们在[JS SDK 文档页面](http://developers.facebook.com/docs/reference/javascript/)中提到的那样：

```
<?php
   $cache_expire = 60*60*24*365;
   header("Pragma: public");
   header("Cache-Control: max-age=".$cache_expire);
   header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$cache_expire) . ' GMT');
?>
<script src="//connect.facebook.net/en_US/all.js"></script> 
```

（php 示例，但可以使用任何语言完成）。

希望这个答案可以为您澄清事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:20:52.197

频道文件应该放在用户访问的服务器/地址上，因为频道文件用于修复一些跨站点的 javascript 错误。如果用户总是使用 HTTPS 访问您的网站，那么您应该使用 HTTPS 引用频道文件以及任何其他内容。

频道文件本身应保持为`<script src="//connect.[..]`，但请确保您的所有静态内容和 JS 包含都包含 https。

# asp.net - ASP.NET MVC - 会话为空

> ID：10629882
> 
> 赞同：12
> 
> 时间：2012-05-17T04:36:43.420
> 
> 标签：asp.net, asp.net-mvc-3, session

我在 .net4 上有一个 MVC3 应用程序，它的会话在开发环境中工作，但不在生产环境中。
在生产中，我记录了 sessionID，并且在我从会话中设置和获取的那一刻它是相同的。

当我尝试获取会话时，我得到了`Null Exception`.

这是我访问会话的方式：

```
public static class HandlersHttpStorage
{
    public static string TestSession
    {
        get
        {
            return HttpContext.Current.Session["time"];//This is null
        }
        set
        {
            HttpContext.Current.Session.Add("time", value);//DateTime.Now.ToString()
        }
    }
} 
```

让我担心的是，生产中的行为与开发中的行为不同，即使 web.config 相同。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-17T04:49:25.963

## 解决方案1：

**链接：** [路由请求时 HttpContext.Current.Session 为空](https://stackoverflow.com/questions/218057/httpcontext-current-session-is-null-when-routing-requests)

知道了。相当愚蠢，实际上。在我像这样删除并添加 SessionStateModule 后它起作用了：

```
<configuration>
  ...
  <system.webServer>
    ...
    <modules>
      <remove name="Session" />
      <add name="Session" type="System.Web.SessionState.SessionStateModule"/>
      ...
    </modules>
  </system.webServer>
</configuration> 
```

简单地添加它是行不通的，因为“会话”应该已经在`machine.config`.

现在，我想知道这是否是通常的做法。它看起来肯定不是这样，因为它看起来很粗糙......

## 解决方案2：

**链接：** [HttpContext.Current.Session 空项](https://stackoverflow.com/questions/4710411/httpcontext-current-session-null-item)

sessionKey 可能会发生变化，您可能只需要这样做：

```
HttpContext.Current.Session["CurrentUser"] 
```

或者会话可能即将到期，请检查超时：

[http://msdn.microsoft.com/en-us/library/h6bb9cz9(VS.71).aspx](http://msdn.microsoft.com/en-us/library/h6bb9cz9(VS.71).aspx)

或者您可能正在从其他地方设置会话值，通常我通过一个属性控制对会话/上下文对象的访问

```
static readonly string SESSION_CurrentUser = "CurrentUser";

public static SiteUser Create() {     
 SiteUser.Current = new SiteUser();      
 return SiteUser.Current;
}

public static SiteUser Current {     
 get {         
  if (HttpContext.Current.Session == null || HttpContext.Current.Session[SESSION_CurrentUser] == null) {             
   throw new SiteUserAutorizationExeption();         
  }          
  return HttpContext.Current.Session[SESSION_CurrentUser] as SiteUser;     
 } 
 set {
  if (!HttpContext.Current.Session == null) {
   HttpContext.Current.Session[SESSION_CurrentUser] = value;
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-12T09:47:16.890

另一个可能的原因/解决方案是，如果域名有下划线，IE 不会保存 cookie（因为严格来说域名不能有下划线，所以你可能只会在开发中遇到这种情况），例如`http://my_dev_server/DoesntWork`. Chrome 或 Firefox 应该在这种情况下工作，如果您更改您正在使用的域名以不解决下划线问题。

参考：

*   [http://blog.smartbear.com/software-quality/internet-explorer-eats-cookies-with-underscores-in-the-hostname/](http://blog.smartbear.com/software-quality/internet-explorer-eats-cookies-with-underscores-in-the-hostname/)
*   [http://social.msdn.microsoft.com/Forums/ie/en-US/8e876e9e-b223-4f84-a5d1-1eda2c2bbdf4/ie7-cookie-issue-when-domain-name-has-underscore-character-in- it?forum=iewebdevelopment](http://social.msdn.microsoft.com/Forums/ie/en-US/8e876e9e-b223-4f84-a5d1-1eda2c2bbdf4/ie7-cookie-issue-when-domain-name-has-underscore-character-in-it?forum=iewebdevelopment)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-30T22:15:43.997

对我来说，我发现它`HttpContext.Current`是空的，所以我创建了它：

```
System.Web.HttpContext c = System.Web.HttpContext.Current; 
```

然后我将它传递到我的另一个类中的函数中，如下所示：

```
string myString = "Something to save";
SessionExtensions.SetDataToSession<string>(c, "MyKey1", myString); 
```

我实际上希望我的函数成为一个真正的扩展方法，`Session`就像下面的那样，但我发现它`this HttpSessionStateBase session`是空的，`NullReferenceException`当我尝试添加任何东西来`Session`使用它时，它会给出。所以这：

```
public static class SessionExtensions 
{ 
   /// <summary> 
   /// Get value. 
   /// </summary> 
   /// <typeparam name="T"></typeparam> 
   /// <param name="session"></param> 
   /// <param name="key"></param> 
   /// <returns></returns> 
   public static T GetDataFromSession<T>(this HttpSessionStateBase session, string key) 
   { 
       return (T)session[key]; 
   } 
   /// <summary> 
   /// Set value. 
   /// </summary> 
   /// <typeparam name="T"></typeparam> 
   /// <param name="session"></param> 
   /// <param name="key"></param> 
   /// <param name="value"></param> 
   public static void SetDataToSession<T>(this HttpSessionStateBase session, string key, object value) 
   { 
       session[key] = value; 
   } 
} 
```

微软在这里： [https](https://code.msdn.microsoft.com/How-to-create-and-access-447ada98) ://code.msdn.microsoft.com/How-to-create-and-access-447ada98变成了这个，而不是：

```
public static class SessionExtensions 
{ 
   /// <summary> 
   /// Get value. 
   /// </summary> 
   /// <typeparam name="T"></typeparam> 
   /// <param name="session"></param> 
   /// <param name="key"></param> 
   /// <returns></returns> 
   public static T GetDataFromSession<T>(HttpContext context, string key) 
   { 
        if (context != null && context.Session != null)
        {
            context.Session.Abandon();
        }

        return (T)context.Session[key];
   } 
   /// <summary> 
   /// Set value. 
   /// </summary> 
   /// <typeparam name="T"></typeparam> 
   /// <param name="session"></param> 
   /// <param name="key"></param> 
   /// <param name="value"></param> 
   public static void SetDataToSession<T>(HttpContext context, string key, object value) 
   { 
       context.Session[key] = value; 
   } 
} 
```

我能够像这样检索我的数据：

```
System.Web.HttpContext c = System.Web.HttpContext.Current;
string myString = SessionExtensions.GetDataFromSession<string>(c, "MyKey1"); 
```

而且，当然，既然`HttpContext.Current`和`Session`现在存在，我什至可以将其简化为：

```
 string myString = Session["MyKey1"].ToString(); 
```

如果这是对象，您可以将对象的类型放在`<string>`函数中`SetDataToSession()` ：

```
List<string> myStringList = new List<string>();
myStringList.Add("Something to save");
SessionExtensions.SetDataToSession<List<string>>(c, "MyKey1", myStringList); 
```

并检索它：

```
System.Web.HttpContext c = System.Web.HttpContext.Current;
List<string> myStringList = SessionExtensions.GetDataFromSession<List<string>>(c, "MyKey1"); 
```

或者简单地说：

```
List<string> myStringList = (List<string>)Session["MyKey1"]; 
```

# android - 将所有正在运行的应用程序的活动放在前面

> ID：10629886
> 
> 赞同：5
> 
> 时间：2012-05-17T04:37:30.523
> 
> 标签：android, broadcastreceiver

我开发了一个警报提醒类型的应用程序，所以当警报被调用时，我的广播接收器调用一个活动并触发一个通知并启动一项服务，它运行良好，

但是当我在其他应用程序中工作时，我的服务和通知被触发但活动未打开。它有时会发生，但并非全部。

那么，我如何才能优先考虑我的活动，以便在我们处理其他应用程序时它可以始终打开，就像在呼叫接收器屏幕中一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:48:41.577

我认为当其他应用程序排在前面时，您无法将您的应用程序置于首位。呼叫接收者屏幕是具有特殊权限的系统窗口。您的应用程序不能拥有相同的内容。

作为替代方案，您可以向状态栏发出通知。

# php - 无法删除记录，创建时重复

> ID：10629888
> 
> 赞同：0
> 
> 时间：2012-05-17T04:37:39.510
> 
> 标签：php, mysql, data-binding

我的 MySQL DB 中有 2 个表，其中表“pages”中的列“campaignid”引用（=to）表“campaigns.id”中的列“id”。

```
ALTER TABLE pages ADD FOREIGN KEY (campaignid) REFERENCES campaigns(id); 
```

这些列中的数据由此公共函数调用：

```
public function get_pages_by_campaign_id($campaignID) {
    $campaignID = $this->real_escape_string($campaignID);
    return $this->query("SELECT pid, campaignid FROM pages campaigns WHERE campaignid = 'campaigns.id'");
} 
```

但是，当我尝试使用以下方法删除“页面”时：

```
 public function delete_page($pageID) {
    $this->query("DELETE FROM pages WHERE id = " . $pageID);
} 
```

没发生什么事。我应该设置类似的`ON DELETE SET NULL | ON UPDATE CASCADE`东西吗？？？？

目前我无法更新、删除或将任何内容保存到数据库中，这种情况已经持续了 2 天……非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:03:13.577

你的语法不正确。您的查询使用`campaignid = 'campaigns.id'`但引号表示这是一个变量，当我假设它是您要查找的列时。您需要在表名之间使用逗号。您也不要使用传递给函数的变量。

```
public function get_pages_by_campaign_id($campaignID) {
    $campaignID = $this->real_escape_string($campaignID);
    return $this->query("SELECT pid, campaignid FROM pages, campaigns WHERE campaignid= campaigns.id AND campaignid = '$campaignID' ");
} 
```

我假设您也想从查询中的活动表中获取数据？否则，您不需要将其包含在查询中。

编辑：正如您在删除中使用 id 的评论中所述 - 这应该是您在选择中使用的 pid 吗？另外，在变量周围加上引号（不是必需的，但可以防止 DB 错误是变量为空）

```
$this->query("DELETE FROM pages WHERE pid = '" . $pageID. "'"); 
```

# html - 将 ASP 页滚动到错误消息

> ID：10629889
> 
> 赞同：2
> 
> 时间：2012-05-17T04:37:41.787
> 
> 标签：html, asp.net-mvc, vb.net-2010

我有一个 ASP 页，其中包含一个表，其中的行包含不同的控件。

其中一个包含出生日期（月份和日期的组合，年份的文本框）。我将验证用户输入的这个日期。如果发生任何错误，我会将此错误消息显示为标签文本。我能够验证这一点并在标签中弹出一个错误。

我的问题是我希望控件去那个地方（DOB 行）并且页面必须向上滚动。当前正在显示该消息，并且该页面从一开始就可见，用户必须手动向下滚动才能看到该错误。

非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:53:59.790

查看 HTML 锚点（Google 上的第一个结果：[http](http://www.hypergurl.com/anchors.html) ://www.hypergurl.com/anchors.html ），然后重定向到该标签以跳转错误消息 ala：

```
<div name = "ErrorDiv">Error</div> 
```

然后在你的代码后面

```
Response.Redirect(string.Format("{0}#{1}", Request.RawUrl, "ErrorDiv")); 
```

显然你也可以在客户端做同样的事情，但听起来你只是在服务器上进行验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:17:20.643

有一个名为“ScrollSaver”的 jQuery 插件。您所要做的就是将该 .js 文件包含在您的 asp 页面中。
它将每个元素的位置保存在 cookie 中，然后在页面重新呈现时恢复它。

欲了解更多信息：阅读，[http ://en.hasheminezhad.com/scrollsaver](http://en.hasheminezhad.com/scrollsaver)

# asp.net-mvc - mvc4 区域内的路由操作无法映射操作

> ID：10629894
> 
> 赞同：3
> 
> 时间：2012-05-17T04:38:20.113
> 
> 标签：asp.net-mvc, c#-4.0, asp.net-mvc-4, asp.net-mvc-routing

我在尝试让路线在我拥有的地区工作时遇到了麻烦。

我的区域称为 ABC，我在该区域内有一个名为 Home 的控制器。如果我浏览“http://localhost:8000/abc”，我可以使用 Home/Index 打断点，但是当我尝试点击另一个名为“http://localhost:8000/ABC/details”之类的详细信息的操作时，我得到了一个404。

我试过了

```
context.MapRoute(
           "details",
           "ABC/Home/{action}/{id}",
           new { action = "details", id = UrlParameter.Optional },
             constraints: null,
           namespaces: new[] { "WebApplication.Areas.ABC.Controllers" }

       );

        context.MapRoute(
          "ABC_Home",
          "ABC/{controller}/{action}/{id}",
          new { controller = "home",action="Index", id = UrlParameter.Optional },
            constraints: null,
            namespaces: new[] { "WebApplication.Areas.ABC.Controllers" }
      ); 
```

如果我使用“http://localhost:8000/ABC/Home/Details”，这允许我执行操作

```
 context.MapRoute(
           "details",
           "Home/Home/{action}/{id}",
           new {controller="home", action = "details", id = UrlParameter.Optional },
             constraints: null,
           namespaces: new[] { "WebApplication.Areas.ABC.Controllers" }

       ); 
```

理想情况下，如果可能的话，我不想在 url 中使用 home 。我究竟做错了什么？

任何帮助都是极好的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T04:44:58.943

我认为您只需要一条路线即可。不要在路由中包含控制器，因为它似乎以*/ABC*开头；只需将控制器分配为默认值：

```
context.MapRoute(
    "ABC_Home",
    "ABC/{action}/{id}",
    new { controller = "home", action="Index", id = UrlParameter.Optional },
    constraints: null,
    namespaces: new[] { "WebApplication.Areas.ABC.Controllers" }
} 
```

根据您的要求，这会将*/abc*路由到*/home/index*，并将*/abc/details*路由到*/home/details*。

然后，如果您需要访问其他控制器，您可以为此添加另一个规则，类似于默认规则：

```
context.MapRoute(
    "Default_Route",
    "{controller}/{action}/{id}",
    new { id = UrlParameter.Optional }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:51:04.750

我不认为你可以默认一个具有可变动作名称的控制器，否则无法从路由中判断它是一个动作或控制器以及匹配哪个路由。我认为您可以对操作进行硬编码：

```
Context.MapRoute(
    "ABC_Home_Details",
    "ABC/Details/{id}",
    new { controller = "home", action="details", id = UrlParameter.Optionsl },
    constraints: null,
    namespaces: new [] { "WebApplication.Areas.ABC.Controllers" }
); 
```

# svg - 我们如何使 SVG 在 Canvas 上透明？

> ID：10629895
> 
> 赞同：4
> 
> 时间：2012-05-17T04:38:21.413
> 
> 标签：svg

我们怎样才能做到这一点？

我在函数中得到了 SVG，我怎样才能使它在画布上透明？目前我的所有功能都在画布上工作。但我发现SVG可以做添加和删除功能。我该怎么办？

```
function Add() {
    var id = Math.floor(Math.random()*101+1);
        x = Math.random() * 550;
        y = Math.random() * 250;
    if (document.getElementById('amount').value < 50){
        document.getElementById('amount').value++;
        svg = document.getElementById("main");

        // construct uniqueid for the images
        uniqueid = "frog" + document.getElementById('amount').value;

        //namespaces for SVG
        svgNS="http://www.w3.org/2000/svg";
        xlinkNS="http://www.w3.org/1999/xlink";

        // create a image element
        image = document.createElementNS(svgNS, 'image');

        // set id and other attributes
        image.setAttributeNS(null, "id", uniqueid);
        image.setAttributeNS(xlinkNS, "href","jef-frog.gif");
        image.setAttributeNS(null, "x", x);
        image.setAttributeNS(null, "y", y);
        image.setAttributeNS(null, "width", "50");
        image.setAttributeNS(null, "height", "50");

        // append to svg
        svg.appendChild(image);

    } else {
        alert("we got 50");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T22:38:46.043

假设您正在询问 SVG`<image>`元素的透明度，我很高兴地说它工作得很好：

## 演示：http: [//jsfiddle.net/XBCEK/](http://jsfiddle.net/XBCEK/)

![演示截图](../Images/9fe4fa2ce2ed34d0ed7e537b8333f3c8.png)

```
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xl="http://www.w3.org/1999/xlink">
  <image xl:href="http://phrogz.net/tmp/alphaball.png"
         x="20" y="30" width="128" height="128" />
  <image xl:href="http://phrogz.net/tmp/hand.gif"
         x="220" y="30" width="32" height="32" />
</svg>​ 
```

如果您将该 SVG 与以下 CSS 一起嵌入到页面中：

```
body { background:url(http://phrogz.net/tmp/grid.gif) }
svg  { background:rgba(255,0,0,0.3) /*…*/ } 
```

…然后你会看到：

*   SVG 的背景默认是透明的。我们甚至可以提供低不透明度的颜色背景，让页面（网格）的背景显示出来。
*   8 位透明度 PNG（球）和 1 位透明度 GIF（手）的背景允许 SVG/页面的背景正确地发光。​</li>

# java - primefaces 默认 css 主题被自定义模板覆盖

> ID：10629896
> 
> 赞同：0
> 
> 时间：2012-05-17T04:38:36.657
> 
> 标签：java, css, jsf, primefaces

我有一个带有过滤、排序和分页功能的数据表。在我将现成的设计模板应用到我的应用程序之前，一切都运行良好。我猜自定义的现成模板覆盖了默认的 primefaces 主题。所以数据表功能不起作用......现在我得到一个没有主题的普通数据表......我想应用自定义模板只是为了增强我的应用程序设计，但我也想保持 primefaces 组件设计不变. 我应该怎么办？请提出一个解决方案...

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
   <meta http-equiv="Content-type" content="text/html; charset=UTF-8"/> 
<title>Scrip Master | Dashboard Admin</title> 

    <h:outputStylesheet library="css" name="reset.css"/>
    <h:outputStylesheet library="css" name="text.css"/>
    <h:outputStylesheet library="css" name="layout.css"/>
    <h:outputStylesheet library="css" name="jquery-ui-1.css"/>
    <h:outputStylesheet library="css" name="jquery.css"/>
    <h:outputStylesheet library="css" name="custom.css"/> 
```

`<link rel="stylesheet" href="css/layout.css" type="text/css" media="screen" title="no title"/>`

```
<h:outputScript library="js" name="jquery-1.js"/>
<h:outputScript library="js" name="excanvas.js"/>
<h:outputScript library="js" name="facebox.js"/>
<h:outputScript library="js" name="jquery-ui-1.js"/>
<h:outputScript library="js" name="jquery_002.js"/>
<h:outputScript library="js" name="jquery_003.js"/>
<h:outputScript library="js" name="jquery_005.js"/>
<h:outputScript library="js" name="jquery_004.js"/>
<h:outputScript library="js" name="jquery.js"/>
<h:outputScript library="js" name="widgets.js"/>
<h:outputScript library="js" name="dashboard.js"/>

</h:head> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:31:31.697

你添加的只是一个CSS？或者还包括一些js？还可以在您的萤火虫控制台中查看您可能想要使用的一些错误

```
<f:facet name="first"> 
   <h:outputScript ..../>
   <h:outputStylesheet.../> 
</f:facet> 
```

确保您的自定义内容将首先加载...

还请看这里[，注意加载 js 文件的顺序](https://stackoverflow.com/questions/10205318/twitter-bootstrap-with-primefaces-jsf/10205451#10205451)

您是否有机会尝试包含您自己的 jquery 库？或任何其他 jquery 插件？

**编辑**

对我来说似乎是一个 jquery 冲突

删除附加 jquery 库 js 文件的包含

而是添加以下内容

```
<h:outputScript library="primefaces" name="jquery/jquery.js" target="head" />
<h:outputScript target="head">
    $ = jQuery;
</h:outputScript> 
```

如果不起作用，请尝试用`<f:facet name="first"> ... </f:facet>`

# android - 我想创建一个可滚动的对话框？

> ID：10629897
> 
> 赞同：3
> 
> 时间：2012-05-17T04:38:37.663
> 
> 标签：android, android-alertdialog

> **可能重复：**
> [在 Android 中向 AlertDialog 添加垂直滚动条？](https://stackoverflow.com/questions/1564867/adding-a-vertical-scrollbar-to-an-alertdialog-in-android)

在我的项目中，有一些按钮。每当我单击一个按钮时，它都会显示一个带有该按钮描述的警报对话框。我已经在 string.xml 中写了描述。每当我单击按钮时，它都会从 string.xml 中获取描述并显示给我们。但我的问题是我的消息（将显示在对话框中）太长了。所以，我想要可滚动的警报对话框。不创建另一个 xml文件，怎么可能在java代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:01:47.763

您可以使用 setView 方法自定义对话框并将自定义视图应用于对话框。

```
AlertDialog.Builder ad = new AlertDialog.Builder(this);
  ad.setIcon(R.drawable.icon);
  ad.setTitle("Instructions ...");
  **ad.setView(LayoutInflater.from(this).inflate(R.layout.instructions_dialog,null));**

  ad.setPositiveButton("OK", 
    new android.content.DialogInterface.OnClickListener() {
     public void onClick(DialogInterface dialog, int arg1) {
      // OK, go back to Main menu
     }
    }
   );

   ad.setOnCancelListener(new DialogInterface.OnCancelListener(){
    public void onCancel(DialogInterface dialog) {
     // OK, go back to Main menu   
    }}
   ); 
```

我希望这是有帮助的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:19:17.050

这是一个例子。您可以根据您的要求进行更改

你可以在按钮事件中添加它

```
Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.alert);
Spinner spin = (Spinner)dialog.findViewById(R.id.spinner1);
Spinner spin2 = (Spinner)dialog.findViewById(R.id.spinner2);
EditText t1 =(EditText)dialog.findViewById(R.id.editText1);
EditText t2 =(EditText)dialog.findViewById(R.id.editText2);
EditText t3 =(EditText)dialog.findViewById(R.id.editText3);
EditText t4 =(EditText)dialog.findViewById(R.id.editText4);
dialog.show(); 
```

警报.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
android:id="@+id/widget54"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
xmlns:android="http://schemas.android.com/apk/res/android">
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<EditText
    android:id="@+id/editText1"
    android:layout_width="211dp"
    android:layout_height="wrap_content"
    android:layout_x="10dp"
    android:layout_y="11dp"
     >

</EditText>

<EditText
    android:id="@+id/editText2"
    android:layout_width="208dp"
    android:layout_height="wrap_content"
    android:layout_x="19dp"
    android:layout_y="76dp"
   />

<EditText
    android:id="@+id/editText3"
    android:layout_width="208dp"
    android:layout_height="wrap_content"
    android:layout_x="20dp"
    android:layout_y="138dp"
  />

<EditText
    android:id="@+id/editText4"
    android:layout_width="212dp"
    android:layout_height="wrap_content"
    android:layout_x="18dp"
    android:layout_y="196dp"
    />

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="222dp"
    android:layout_height="wrap_content"
    android:layout_x="5dp"
    android:layout_y="254dp" />

<Spinner
    android:id="@+id/spinner2"
    android:layout_width="225dp"
    android:layout_height="wrap_content"
    android:layout_x="2dp"
    android:layout_y="310dp" />

</LinearLayout>
</ScrollView> 
```

# ruby-on-rails - 在邪恶的向导中将数据传递到下一步

> ID：10629899
> 
> 赞同：0
> 
> 时间：2012-05-17T04:39:01.237
> 
> 标签：ruby-on-rails, wizard

我刚刚观看了用于创建多步向导的[Wicked gem](https://github.com/schneems/wicked)上的[Railscast 。](http://railscasts.com/episodes/346-wizard-forms-with-wicked)

我想知道这个 gem 是否可以用来创建一个向导，在`render_wizard`调用中以某种方式传递数据？根据我最初的修补，我不相信这是可能的。我希望解决的问题是创建一个向导，其中第一步选择一个国家，第二步允许选择该国家的人。

有没有更简单的方法来解决这个问题？谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:06:39.607

您可以使用无表的 ruby​​ 对象。在每个显示步骤之前将其序列化到会话，并在每个更新步骤之前从会话中加载它（合并任何新参数）。

```
before_filter :initialize_wizard, on: [:show, :update]

...

def initialize_wizard
  @wizard = YourWizardTempModel.new
  @wizard.update_attributes(session['wizard']) if session['wizard'].present?
  @wizard.update_attributes(params['wizard']) if params['wizard'].present?
  session['wizard'] = @wizard.as_json
end 
```

然后你可以有一个条件 before_filter，它根据 country_id 组装人员选择，如下所示：

```
before_filter :populate_people, if: "step == 'select_people'"

...

def populate_people
  People.find_by_country_id(@wizard.country_id)
end 
```

# asp.net - 从 Web 应用程序访问 IMEI #

> ID：10629900
> 
> 赞同：1
> 
> 时间：2012-05-17T04:39:06.683
> 
> 标签：asp.net

有没有可能我可以从网络应用程序获取 IMEI #Of Mobile。假设一个请求来自移动设备，那么我可以从该请求中获取 imei # 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:42:59.037

答案是……**不**
，通过网络应用程序无法获取手机的 IMEI。

但是您可以构建一个本地应用程序来获取 IMEI，例如 android java、symbian c++、j2me 等。

问候，
新泽西州

# c# - .net：如何从数组索引中获取数据？

> ID：10629901
> 
> 赞同：0
> 
> 时间：2012-05-17T04:39:24.090
> 
> 标签：c#, .net, matlab, .net-4.0

**代码 ：**

```
 byte[] bytes = new byte[fs.Length];
   var read =  (fs.Read(bytes, 0, Convert.ToInt32(fs.Length)));
   long flength = fs.Length;
   int fSize = int.Parse(flength.ToString());
   MWArray[] in_Arrw = new MWArray[((int)read)];

   MWNumericArray arr = new MWNumericArray(fSize, 1, bytes);

   ChordRecognizer hj = new ChordRecognizer();

   MWArray in_Arr = hj.estimateCost(arr);
   fs.Close(); 
```

我无法得到它返回的内容`in_Arr = hj.estimateCost(arr)`，如果我尝试访问会抛出异常`in_Arr[0]`，可以在图像中看到

请帮忙。

**快速观看：**

![在此处输入图像描述](../Images/082ca5f26a5cda9c88cc43e29fa562a2.png)

. ![在此处输入图像描述](../Images/6984dff1529cda2c643b7444cc5fc74f.png)

**堆栈跟踪 ：**

> 在 MathWorks.MATLAB.NET.Arrays.MWArray.ArrayIndexer(MWArray srcArray, Int32[] indices) 在 MathWorks.MATLAB.NET.Arrays.MWNumericArray.get_Item(Int32[] indices) 在 MathWorks.MATLAB.NET.Arrays.MWArray。 get_Item(Int32[] 索引)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:10:22.580

您似乎收到“无效索引异常”。我认为 [0] 不是访问对象的正确方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:37:41.007

从您发布的图片中，我看到您的数组不止一维。

由于这不是[锯齿状数组](http://msdn.microsoft.com/en-us/library/2s05feca.aspx)，因此如果您不为每个维度提供索引（可以这么说），您将无法访问数组中的一项。换句话说，您的数组类似于`YourType[m,n,p]`而不是`YourType[m][n,p]`，因此要访问您中的一项，`YourType[m,n,p]`您需要提供3 个索引（例如`var item = in_arr[0,0,0];`），而不仅仅是一个。

# iphone - 在 Facebook 新闻源上发帖不起作用

> ID：10629904
> 
> 赞同：1
> 
> 时间：2012-05-17T04:39:41.453
> 
> 标签：iphone, ios, facebook-graph-api

我正在使用 facebook sdk 为 iphone 运行 hackbook 示例，但是当我尝试在我的新闻源上发布时，它会在我的时间轴上发布，但它没有显示在我的新闻源中。[我从这个facebook 示例](http://www.icodeblog.com/2011/03/28/facebook-sdk-posting-to-user-news-feed/)链接尝试了另一个示例，但它也在我的时间轴上发布，但不在我的新闻源中。使用 hackbook 示例发布的代码是

```
 - (void)apiDialogFeedUser 
 {
     currentAPICall = kDialogFeedUser;
     SBJSON *jsonWriter = [[SBJSON new] autorelease];

     // The action links to be shown with the post in the feed
     NSArray* actionLinks = [NSArray arrayWithObjects:[NSDictionary dictionaryWithObjectsAndKeys:
                                                       @"Get Started",@"name",@"http://m.facebook.com/apps/hackbookios/",@"link", nil], nil];
     NSString *actionLinksStr = [jsonWriter stringWithObject:actionLinks];
     // Dialog parameters
     NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               @"I'm using the Hackbook for iOS app", @"name",
                               @"Hackbook for iOS.", @"caption",
                               @"Check out Hackbook for iOS to learn how you can make your iOS apps social using Facebook Platform.", @"description",
                               @"http://m.facebook.com/apps/hackbookios/", @"link",
                               @"http://www.facebookmobileweb.com/hackbook/img/facebook_icon_large.png", @"picture",
                               actionLinksStr, @"actions",
                               nil];

     HackbookAppDelegate *delegate = (HackbookAppDelegate *)[[UIApplication sharedApplication] delegate];
     [[delegate facebook] dialog:@"feed" andParams:params andDelegate:self];

} 
```

其他任何人都面临过此类问题任何建议都会有很大帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:42:09.967

Try using the OFFICIAl iOS dev tutorial made by Facebook themselves:

[iOS Tutorial](http://developers.facebook.com/docs/mobile/ios/build/)

# android - 选项卡在锁定/解锁屏幕等某些事件中被削减一半

> ID：10629907
> 
> 赞同：1
> 
> 时间：2012-05-17T04:39:56.133
> 
> 标签：android, android-layout, tabs

我在 android 应用程序中使用了 android 默认选项卡。当我们查看 iphone 应用程序时，我使用了屏幕底部的选项卡。我遇到了一个标签问题，

*   当屏幕锁定/解锁时，标签会被切掉一半。

我试图自己解决它，但一切都没有用。

有谁能够帮我 ？

在这里你可以看看我的标签屏幕。

前 ：

![在此处输入图像描述](../Images/d8ef84a486673eb96aae85802c3eb134.png)

======== 屏幕解锁后

![在此处输入图像描述](../Images/f24c5d1b6a407d2e2fb76784e6e74821.png)

提前致谢。

# delphi - 使用 TIdSmtp.Connect() 方法发生错误 11004 时获取扩展错误信息？

> ID：10629908
> 
> 赞同：3
> 
> 时间：2012-05-17T04:39:56.603
> 
> 标签：delphi, email, smtp, indy

我有一个 Delphi 6 应用程序，可以发送带有附件的电子邮件。当我第一次测试它时，我在调用 TIdSmtp.Connect() 时收到 11004 错误（违反策略）。原来我的电子邮件服务器 SMTP 设置是错误的，现在它工作正常。但是知道我的用户会遇到麻烦，我想知道是否有办法通过 Indy 组件从 SMTP 服务器获取更广泛的错误信息，以帮助我进行调试工作。我正在使用 Indy 9 和 Delphi 6。

有没有办法获得更丰富的报告并找出错误的可能原因是什么？（例如 - 需要 SSL、未填写“发件人”字段、被拒绝的域等）。另外，同样的问题，但是当 TIdSmtp.Send() 方法发生错误时？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T18:51:49.260

`EIdSMTPReplyError`为响应来自 SMTP 协议层的 SMTP 服务器的错误消息而引发。 `11004`是套接字/DNS 错误，而不是 SMTP 错误。除了基本的操作系统错误消息（您可以从中获得`SysErrorMessage()`）之外，没有其他可用的错误信息：

> 请求的名称有效并且在数据库中找到，但它没有正确的关联数据正在解析。

关于`TIdSMTP.Send()`，您可以查找`EIdSMTPReplyError`例外情况，例如：

```
try
  IdSMTP1.Connect;
  try
    IdSMTP1.Send(IdMessage1);
  finally
    IdSMTP1.Disconnect;
  end;
except
  on E: EIdSMTPReplyError do
    Application.MessageBox(
      PChar(
        'Error message: ' + E.Message + sLineBreak +
        'Error code: ' + IntToStr(E.ErrorCode) + sLineBreak +
        'Error reply: ' + E.EnhancedCode.ReplyAsStr
      ),
      'SMTP Error...', MB_OK + MB_ICONSTOP + MB_TOPMOST);
end; 
```

这将对一些人有所帮助，如果服务器支持扩展错误代码，那么您可能会更接近一点。但是更多时候，如果不查看网络上的实际 SMTP 命令/响应流量，您可能无法准确区分出了什么问题。

特别是关于 SSL/TLS 错误，可能会发生几种不同的事情之一，具体取决于您的`TIdSMTP`配置：

1）您可能会`EIdSocketError`引发一般异常，例如您的`11004`错误。

2)`EIdSMTPReplyError`如果您连接到需要隐式 SSL/TLS 但您没有`TIdSMTP.UseTLS`设置为`utUseImplicitTLS`.

2)如果您已分配但服务器不期望隐式 SSL/TLS，您可能会得到一个`EIdOSSLConnectError`或其他与 OpenSSL 相关的异常。`UseTLS=utUseImplicitTLS`

3) 您已`UseTLS`设置为`utUseExplicitTLS`or`utRequiresTLS`并且服务器支持显式 TLS，但 SSL/TLS 握手无论出于何种原因失败，您将收到`TIdSMTP.OnTLSHandShakeFailed`仅针对`utUseExplicitTLS`. 如果未设置事件处理程序`VContinue=True`，或者您使用`utRequiresTLS`了 ，您将引发`EIdTLSClientTLSHandShakeFailed`异常。

4）您已`UseTLS`设置为`utUseExplicitTLS`or`utRequiresTLS`并且服务器不支持显式 TLS，您将获得仅`TIdSMTP.OnTLSNotAvailable`触发的事件`utUseExplicitTLS`。如果未设置事件处理程序`VContinue=True`，或者您使用`utRequiresTLS`了 ，那么您将`EIdTLSClientTLSNotAvailable`引发异常。

# iphone - 如何为我自己的按钮/导航栏项目使用尖头后退按钮？

> ID：10629909
> 
> 赞同：0
> 
> 时间：2012-05-17T04:40:07.493
> 
> 标签：iphone, objective-c, ios, xcode, uistoryboard

我相信你知道，导航控制器堆栈内的导航栏有一个后退按钮，其形状有点像左侧有尖头的箭头。我想将此按钮图像用于我自己的 uibuttons 和导航栏项目，但属性检查器 > 栏项目 > 图像下拉菜单中缺少它。该图形位于何处以及如何使用它？

这是我所指的按钮屏幕： ![在此处输入图像描述](../Images/2fc078034bbe228435961f3382b17af8.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T05:11:37.937

如果您想以编程方式执行此操作 -

```
UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithImage:yourImage style:UIBarButtonItemStyleBordered target:nil action:nil];
self.navigationItem.backBarButtonItem = button;
[button release]; 
```

您可以在 xib- 中使用如下所示

![在此处输入图像描述](../Images/c5b08b386ab8fa381d792e73709f1cb4.png)

# sharepoint - 根据 sharepoint 2010 中的日期过滤图表 webpart

> ID：10629911
> 
> 赞同：1
> 
> 时间：2012-05-17T04:40:21.750
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-2007

我在 sharepoint 站点中使用图表 webpart 控件，方法是将其连接到我站点中的列表之一（X 轴是提案名称，Y 轴上是提案创建日期）。

到目前为止一切正常。但现在的要求是最终用户必须能够指定从日期到日期，并且图表应该仅针对指定日期范围内的值显示。

我不确定如何处理它。任何帮助将不胜感激，在此先感谢。

# ios - 具有动态 UILable 数量的 UITableViewCell

> ID：10629912
> 
> 赞同：0
> 
> 时间：2012-05-17T04:40:24.187
> 
> 标签：ios, dynamic, uitableview, uilabel, automatic-ref-counting

我试图实现一个像这样的表格视图

请阅读评论以查看链接<1>

我的实现是：
1\. 我用笔尖创建我的单元格！请阅读评论以查看链接<2>

1.  出于测试目的，我对单元格的标题部分进行硬编码，然后在代码中创建其余部分，如下所示......

    ```
    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:                (NSIndexPath *)indexPath
    {
        UITableViewCell *myCell = (UITableViewCell*) 
        [self.tableView dequeueReusableCellWithIdentifier:@"CheckedOutOrderTableCell"];

        [[NSBundle mainBundle] loadNibNamed:@"CheckedOutOrderTableCell" owner:self options:NULL];
        myCell = nibLoadedTableCell;

        UILabel *orderConditionLabel = [[UILabel alloc] initWithFrame:CGRectMake(250, (85+([[bigDictionary objectAtIndex:indexPath.row]count]*35)), 64, 21)];
        [orderConditionLabel setText:@"Delivered"];
        [orderConditionLabel setFont:[UIFont systemFontOfSize:14]];
        orderConditionLabel.textColor = [UIColor darkGrayColor];
        orderConditionLabel.backgroundColor = [UIColor clearColor];

        for(NSInteger i=0; i<[[bigDictionary objectAtIndex:indexPath.row]count]; i++)
        {
            UILabel *quantityLabel = [[UILabel alloc] initWithFrame:CGRectMake(15, 85+(i*35), 42, 21)];  
            UILabel *foodLabel = [[UILabel alloc] initWithFrame:CGRectMake(85, 85+(i*35), 175, 21)];
            UILabel *priceLabel = [[UILabel alloc] initWithFrame:CGRectMake(220, 85+(i*35), 60, 21)];

            [quantityLabel setFont:[UIFont systemFontOfSize:15]];
            [foodLabel setFont:[UIFont systemFontOfSize:15]];
            [priceLabel setFont:[UIFont systemFontOfSize:15]];

            [quantityLabel setText:[NSString stringWithFormat:@"%@",[[[bigDictionary objectAtIndex:indexPath.row]objectAtIndex:i]valueForKey:@"quantity"]]];           
            [foodLabel setText:[NSString stringWithFormat:@"%@",[[[bigDictionary objectAtIndex:indexPath.row]objectAtIndex:i]valueForKey:@"item_name"]]];        
            [priceLabel setText:[NSString stringWithFormat:@"$ %@.00", [[[bigDictionary objectAtIndex:indexPath.row]objectAtIndex:i]valueForKey:@"price"]]];   

            [self.view addSubview:quantityLabel];
            [self.view addSubview:foodLabel];
            [self.view addSubview:priceLabel]; 
            quantityLabel = nil;
            foodLabel = nil;
            priceLabel = nil;
        }
        [self.view addSubview:orderConditionLabel];
        orderConditionLabel = nil;
        return myCell;
    } 
    ```

2.  当然我也重写了 heightForRowAtIndexPath: 我终于得到了这个......

[http://i.stack.imgur.com/cF7Y4.png](http://i.stack.imgur.com/cF7Y4.png)

1.  一切似乎都正常：D所有标签都是动态创建的，位置完美……然后我试图保存任何其他记录……然后崩溃了:'(

[http://i.stack.imgur.com/RAXMF.png](http://i.stack.imgur.com/RAXMF.png)

1.  我使用 NSLOG 检查输入这些单元格的数据，下面是我的“bigDictionary”的结构

    ```
    2012-05-17 12:17:50.330 LazBuy[53187:11903] show structure (
            (
                    {
                "item_name" = "\U8292\U679c\U9752\U8336";
                price = 30;
                quantity = 1;
            },
                    {
                "item_name" = "\U6587\U5c71\U6e05\U8336";
                price = 20;
                quantity = 3;
            },
                    {
                "item_name" = "\U8292\U679c\U9752\U8336";
                price = 30;
                quantity = 3;
            }
        ),
            (
                    {
                "item_name" = "\U51cd\U9802\U70cf\U9f8d\U8336";
                price = 15;
                quantity = 3;
            }
        )
    ) 
    ```

2.  数据输入正确，我不知道出了什么问题！

为什么标签没有正确更新，我需要发布它们吗？但我不能发布，因为 ARC 不让我做发布线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:55:16.093

您正在将标签添加到 self.view？论文应该在 tableviewcell 上。

```
[self.view addSubview:quantityLabel];
[self.view addSubview:foodLabel];
[self.view addSubview:priceLabel]; 
```

和

```
[self.view addSubview:orderConditionLabel]; 
```

此外，您的 tableviewcell 重用应该看起来更像这样

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
 static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        [[NSBundle mainBundle] loadNibNamed:@"TVCell" owner:self options:nil];
        cell = tvCell;
        self.tvCell = nil;
    }

    // Set your labels text

    return cell;
} 
```

# c# - 如何诊断临时文件“泄漏”

> ID：10629916
> 
> 赞同：0
> 
> 时间：2012-05-17T04:40:57.433
> 
> 标签：c#, sqlite, system.data.sqlite

我们的应用程序最近开始以相当高的速度创建（而不是清理）临时文件（尽管当我们用完临时文件名时，仍然需要几天的高使用来阻塞我们的 CI 服务器）。这是一个大型应用程序，有一个庞大的团队在处理它，因此很难通过审查提交来追踪问题。有没有诊断这类问题的好方法？

我注意到了一些额外的事情（尽管他们还没有让我到任何地方）：

*   “泄露”的临时文件显示在 c:\windows\temp 中，无论 %temp% 设置为什么
*   它们总是空的，好像有人得到它们却什么也不做

最后，我们最近开始使用 sqlite 在本地存储一些文件，而不是直接使用文件系统。稍作搜索表明 SQLite 在那里写了一些临时文件，但所有论坛帖子都表明它们很大，我有 0 字节文件。任何人都有使用 SQLite 创建这样的问题的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:46:53.370

您可以使用[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)来监视这些文件的创建，然后在创建文件时查看调用线程的堆栈。这应该告诉您谁在制作文件，然后您也可以观看文件的使用方式。

只需将过滤器设置为仅包含“进程名称为 XXX.exe”（其中 XXX 是您的程序的名称）和“路径以 c:\windows\temp 开头”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T04:50:36.510

最有可能出现问题的方法是[Path.GetTempFileName](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)。检查是否所有对它的调用都会删除生成的临时文件。

# mysql - MySQL数据库设置问题

> ID：10629917
> 
> 赞同：0
> 
> 时间：2012-05-17T04:41:00.427
> 
> 标签：mysql, database-design

我正在为一个梦幻足球联盟建立一个数据库，在该数据库中，负责人可以根据每个球员的统计数据和与这些统计数据相关的点值输入他们的预测。

有六个玩家“组”：

```
QB
RB
WR
TE
K
DEF / ST 
```

QB、RB、WR 和 TE 组都有相同的统计选项。K 有自己的一组统计选项 DEF / ST 有自己的一组统计选项

我的问题是这样的：

我最好创建一个表（PROJECTIONS），然后在该表中创建位置、统计数据等字段，还是应该为每个玩家组创建一个单独的表？

哪一种是最好、最有效的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:09:57.903

对于这种情况，单张表就足够了....每个组都有相同的属性，统计那么你为什么要创建额外的表...

# java - 将字符串从用户输入转换为表达式

> ID：10629924
> 
> 赞同：0
> 
> 时间：2012-05-17T04:41:50.940
> 
> 标签：java

所以我大部分时间都在谷歌搜索和 StackExchange 寻求答案或指导，我已经放弃了。我必须问以下问题：

我想制作一个要求用户输入类似于此的表达式的 Java 应用程序：

```
t>>7|t|t>>6 
```

让我们假设它被存储为一个字符串。我想要的是将此字符串转换为一个表达式，该表达式`t`成为一个变量`>>`并`|`成为运算符。基本上我想弄清楚如何实现这个[http://www.redcode.nl/blog/2011/12/bytebeat-algorithmic-symphony/](http://www.redcode.nl/blog/2011/12/bytebeat-algorithmic-symphonies/)但不知何故将用户输入传递给`private static int f(int t)`而不是硬编码表达式。

我一直在阅读一些有关 ScriptEngineManager 和使用 JavaScript 的内容，但我不知道这是否是正确的方法。

无论如何，这只是为了个人教育和娱乐。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T06:39:54.800

您可以使用 javassist 库执行此操作。[从http://sourceforge.net/projects/jboss/files/Javassist/3.16.1-GA/](http://sourceforge.net/projects/jboss/files/Javassist/3.16.1-GA/)下载该库并将其添加到您的项目中。

//ExpressionEvaluator.java

```
public class ExpressionEvaluator {

} 
```

//AudioPump.java

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.lang.reflect.InvocationTargetException;

import javassist.CannotCompileException;
import javassist.ClassPool;
import javassist.CtClass;
import javassist.CtMethod;
import javassist.CtNewMethod;
import javassist.Loader;
import javassist.NotFoundException;

import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.SourceDataLine;

public class AudioPump {

    private static String expression;

    public static void main(String[] args) throws Exception {
        System.out.print("Enter expression(use t as variable):");
        BufferedReader consoleReader = new BufferedReader(
                new InputStreamReader(System.in));
        expression = consoleReader.readLine();
        generateMethod(expression);
        AudioFormat format = new AudioFormat(8000f, 8, 1, false, false);
        DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);
        SourceDataLine soundLine = (SourceDataLine) AudioSystem.getLine(info);
        soundLine.open(format, 32000);
        soundLine.start();

        byte[] buffer = new byte[8];
        int t = 0;

        while (true) {
            for (int n = 0; n < buffer.length; n++) {
                buffer[n] = (byte) invokeF(t++);
            }
            soundLine.write(buffer, 0, buffer.length);
        }
    }

    private static byte invokeF(int i) {
        java.lang.reflect.Method method = null;
        try {
            ClassPool pool = ClassPool.getDefault();
            Loader cl = new Loader(pool);
            Class expressionEvaluatorClass = cl.loadClass("ExpressionEvaluator");
            method = expressionEvaluatorClass.getMethod("f", Integer.TYPE);
        } catch (SecurityException e) {
            e.printStackTrace();System.exit(-1);
        } catch (NoSuchMethodException e) {
            e.printStackTrace();System.exit(-1);
        } catch (ClassNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();System.exit(-1);
        }
        try {
            return (Byte) method.invoke(null, i);
        } catch (IllegalArgumentException e) {
            e.printStackTrace();System.exit(-1);
        } catch (IllegalAccessException e) {
            e.printStackTrace();System.exit(-1);
        } catch (InvocationTargetException e) {
            e.printStackTrace();System.exit(-1);
        }
        return 0;
    }

    private static void generateMethod(String expression2) {
        ClassPool pool = ClassPool.getDefault();
        try {
            CtClass pt = pool.get("ExpressionEvaluator");
            String methodString = "public static byte f(int t) { return (byte)(" + expression2 + ");}";
            System.out.println(methodString);
            CtMethod m = CtNewMethod.make(methodString, pt);
            pt.addMethod(m);
            pt.writeFile();
        } catch (NotFoundException e) {
            e.printStackTrace();System.exit(-1);
        } catch (CannotCompileException e) {
            e.printStackTrace();System.exit(-1);
        } catch (IOException e) {
            e.printStackTrace();System.exit(-1);
        }
    }

    // return (t*(t>>5|t>>8))>>(t>>16);
    // return t*(((t>>12)|(t>>8))&(63&(t>>4)));
} 
```

在这里，我们使用用户提供的表达式动态生成一个方法，并使用 Javassist 将其添加到 ExpressionEvaluator 类中。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:46:56.180

这听起来像是语言识别工作。你试过[antlr](http://www.antlr.org)吗？据我所知，它用于 solr、hibernate 等中的复杂解析。

# html - 为什么 line-height 属性不适用于超链接？

> ID：10629928
> 
> 赞同：5
> 
> 时间：2012-05-17T04:42:23.980
> 
> 标签：html, css

这是超链接的 html 代码。我想在文本之间留一点空隙。例如，在“菜单”和“联系我们”之间。提前致谢。

```
<div id="navbar">

    <a class="fb" href="menu.html">Menu</a></br>
    <a href="ContactUs.html">Contact Us</a></br>
    <a href="About Us.html">About Us</a></br>
    <a href="TC.html">Terms & Conditions</a></br>
    <a href="jobs.html" target="_blank">Jobs</a></br>
    <a href="order.html">Your Order</a>

</div> 
```

我在 CSS 中设置 line-height 属性如下：

```
#navbar {
  line-height:2em;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T04:45:03.840

不要使用`<br/>`（您一直打错）和`line-height`，使用列表并调整列表项的边距。

## 演示：http: [//jsfiddle.net/psP7L/](http://jsfiddle.net/psP7L/)

```
<ul id="navbar">
  <li><a class="fb" href="menu.html">Menu</a></li>
  <li><a href="ContactUs.html">Contact Us</a></li>
  <li><a href="About Us.html">About Us</a></li>
  <li><a href="TC.html">Terms & Conditions</a></li>
  <li><a href="jobs.html" target="_blank">Jobs</a></li>
  <li><a href="order.html">Your Order</a></li>
</ul> 
```

```
#navbar    { padding:0; margin:0 }
#navbar li { display:block; padding:0; margin:0.3em 0 } 
```

*正确的，语义标记优先；然后得到正确的样式。*

* * *

但是，要回答您的问题，它确实“有效”，只是元素`line-height`上的[行为根据规范](http://www.w3.org/TR/CSS2/visudet.html#propdef-line-height)与`display:inline`元素的行为不同。`display:block`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T05:30:38.520

**您应该在锚点**中定义行高，而不是在**导航栏**id 中查看示例代码：-

**HTML**

```
<div id="navbar">

<a class="fb" href="menu.html">Menu</a></br>
<a href="ContactUs.html">Contact Us</a></br>
<a href="About Us.html">About Us</a></br>
<a href="TC.html">Terms & Conditions</a></br>
<a href="jobs.html" target="_blank">Jobs</a></br>
<a href="order.html">Your Order</a> 
```

**CSS**

```
#navbar a {
color: red;
line-height: 33px;
text-decoration: none; 
```

}

[http://jsfiddle.net/8LFLd/50/](http://jsfiddle.net/8LFLd/50/)

另一个正确的方法是我在下面提到你应该在正确的 ul li 列表项中进行导航，如下所述：-

**HTML**

```
<div id="navbar">
  <ul>
    <li><a class="fb" href="menu.html">Menu</a></li>
    <li><a href="ContactUs.html">Contact Us</a></li>
    <li><a href="About Us.html">About Us</a></li>
    <li><a href="TC.html">Terms & Conditions</a></li>
    <li><a href="jobs.html" target="_blank">Jobs</a></li>
    <li><a href="order.html">Your Order</a></li>
  </ul>
</div> 
```

**CSS**

```
#navbar li {
    display:block;
    list-style-type:none;
    line-height:25px;
}
#navbar li a {
    text-decoration:none;
    color:red;
}
#navbar li a.fb {
    text-decoration:none;
    color:green;
}

#navbar li a:hover {
    text-decoration:none;
    color:blue;
} 
```

演示：- [http://jsfiddle.net/XZ9w7/3/](http://jsfiddle.net/XZ9w7/3/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-05-31T11:17:48.397

您必须将样式应用于锚点，并添加`display:block;`到您的 CSS 中以使其工作：

```
#navbar a{
  line-height: 2em;
  display: block;
} 
```

在您的代码中的一些其他修复中，您应该最终得到类似[JSFiddle](http://jsfiddle.net/psP7L/10/)的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T04:56:46.687

```
#navbar a{ display:block;line-height:30px;} 
```

消除

演示[http://jsfiddle.net/psP7L/1/](http://jsfiddle.net/psP7L/1/)

# python - 在 Django 教程中使用模板

> ID：10629929
> 
> 赞同：3
> 
> 时间：2012-05-17T04:42:24.997
> 
> 标签：python, django

我在第 4 章：Django 教程的模板，我正在尝试使用 Python 在 Emacs 劣质模式下运行以下内容：

```
>>> from django import template
>>> t = template.Template('My name is {{ name }}.')
>>> c = template.Context({'name': 'Adrian'})
>>> print t.render(c)
My name is Adrian.
>>> c = template.Context({'name': 'Fred'})
>>> print t.render(c)
My name is Fred. 
```

[但我在这里](http://pastebin.com/uVuTLUj2)得到错误。

快速搜索表明我应该像这样设置我的 DJANGO_SETTINGS_MODULE：

```
>>> import os
>>> os.environ["DJANGO_SETTINGS_MODULE"] = "settings.py" 
```

但是，我遇到了这个错误：

```
ImportError: Could not import settings 'settings.py' (Is it on sys.path?): No module named settings.py 
```

我正在使用 Fedora 16。如何正确解决此问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T05:13:07.710

您可以在 , 中执行此操作`python manage.py shell`，因为那将`settings.py`在`.`目录中。

## 除此以外：

只考虑`settings.py`另一个 python 库，您需要确保将其添加到`sys.path`，然后您可以执行以下操作：

```
import settings
from django.core.management import setup_environ

setup_environ(settings)  # Setting up the env settings 
```

这将为您的环境设置设置。**[这是正确的方法]**

里面没有秘方`settings.py`，因为 django 本身就是 python 的库，所以它不能默认设置任何路径，`sys.path`除非导入和执行 - 正如我所建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:44:22.167

你真的应该`setup_environ`按照另一个答案中的建议使用。

有关此特定异常的提示：`DJANGO_SETTINGS_MODULE`是 Python 模块名称，因此它可能不以“.py”结尾。通常，这将是`your_django_site.settings`并且模块/目录`your_django_site`必须位于`sys.path`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:46:17.260

所有不在项目中的 Django 代码都应该从 Django REPL 运行，可以通过 获得`./manage.py shell`，或者作为[独立脚本](http://www.b-list.org/weblog/2007/sep/22/standalone-django-scripts/)运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T04:47:33.730

为了在 Django 的 shell 中测试任何东西，你应该使用 Django shell：

```
python manage.py shell 
```

这将启动一个 Python 解释器，它将神奇地将您的设置文件（以及您的项目的其余部分）放在 Python 路径上。

（这假设您已经有一个项目。如果没有，请使用`django-admin.py startproject my_project_name`。）

# java - EJBQL - 查找所有具有超过“x”关系的行

> ID：10629937
> 
> 赞同：0
> 
> 时间：2012-05-17T04:43:47.260
> 
> 标签：java, hibernate, jpql, ejbql

我知道必须有一种简单的方法来做到这一点，但目前还没有想到。我有一个简单的实体，例如（为简洁起见，删除了不相关的部分）：

```
@Entity
@Table(name = "reviews")
public class Review {
    private String text;
    private boolean approved;
    private Collection<ReviewFlag> flags;

    public Review() {
        this.text = null;
        this.approved = false;
        this.flags = Collections.emptyList();
    }

    @Column(nullable = false)
    public String getText() {
        return text;
    }

    @Column(nullable = false)
    public boolean isApproved() {
        return approved;
    }

    @OneToMany(mappedBy="review")
    public Collection<ReviewFlag> getFlags() {
        return flags;
    }
} 
```

我想运行一个查询，找到每个带有两个或多个标志的未批准评论。就像是：

```
SELECT r FROM Review r WHERE r.approved = 0 AND COUNT(r.flags) > 1 
```

...但当然该语法不起作用（休眠抱怨语法）。我已经尝试过：

```
SELECT r FROM Review r WHERE r.approved = 0 HAVING COUNT(r.flags) > 1 
```

...运行，但也返回具有 0 或 1 个标志的评论。我需要使用什么魔法调用来仅查找具有 2 个或更多标志的那些？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:25:51.660

由于注释的原因，我假设您在可以使用 JPQL 而不是 EJB QL 的环境中操作。如果是这样，那么[SIZE](http://docs.oracle.com/cd/E28613_01/apirefs.1211/e24396/ejb3_langref.html#ejb3_langref_arithmetic)运算符就是为了这种目的而存在的。它将集合的路径作为参数并返回元素的数量。

在您的情况下，JPQL 查询是：

```
SELECT r FROM Review r WHERE r.approved = 0 AND SIZE(r.flags) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:57:05.343

I got it:

```
SELECT DISTINCT(f.review) FROM Flag f WHERE f.review.hidden = 0 AND f.review.approved = 0 GROUP BY f.review HAVING COUNT(*) > 1 
```

A bit more obtuse than I'd like, but it works.

Note to self: stop answering own questions.

# objective-c - 需要子类化 UIView 而不是创建我们自己的视图并将其添加到

> ID：10629940
> 
> 赞同：1
> 
> 时间：2012-05-17T04:44:23.423
> 
> 标签：objective-c, ios, ios5, ios4

为什么有人会继承 UIView 而不是像这样创建我们自己的自定义视图：

```
CGRect labelRect = CGRectMake(20,20,20,20); //Frame to contain the current view
UILabel *label  = [[UILabel alloc] initWithFrame:labelRect];
label.text = @”This is a custom view with out subclassing UIView”
[self.view addSubView:label]; 
```

是看不到任何权衡或优势吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T06:04:32.133

在很多情况下，您只是重新排列文本，并使用一些内置按钮、标签等；不需要子类 a`UIView`而是可以通过 a 以编程方式完成`UIViewController`或添加到故事板/nib 文件中。但是，一个很好的例子说明何时以及为什么要对 a 进行子类化`UIView`是，如果您想向正在使用的视图添加一些自定义触摸行为或绘图。

所以在我看来，子类化 a 的主要考虑因素`UIView`如下：

1）触摸交互，

2) 自定义绘图

*请注意，可能还有其他原因，您可能希望仅从程序组织的角度创建视图子类，但这是不能将行为委托给另一个函数或直接添加到`UIView`. 例如，对一般动画和背景图像操作的支持都可以在没有子类化的情况下处理`UIView`。

**触摸交互**- 与 a 的触摸交互`UIView`可以通过几种不同的方式进行处理，您可以直接与触摸事件交互，或者将手势识别器添加到`UIView`. 在许多情况下，您可以通过手势识别器（或自定义手势识别器）完成所需的一切，而不是尝试查看视图上发生的单个触摸，但如果您想要/需要访问原始触摸事件，您将覆盖以下函数以实现所需的行为：

```
-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
-(void) touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event
-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
-(void) touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event 
```

**自定义绘图**-`UIView`您可以通过 Quartz/Core Graphics 进行基本的 2D 绘图。一个例子是，如果您正在做一个绘图应用程序，并希望您`UIView`在熨平板上的上下文中为您绘制实际线条。为此，您将覆盖该`drawRect:(CGRect)rect` 函数并在此处列出任何自定义绘图。

话虽如此，这绝不是您可以绘制线条的唯一方法，并且可以在不执行自定义绘图的情况下完成此任务。例如，同一条线或一组线可以由您的 绘制到图像缓冲区中`UIViewController`，然后相应地显示为您的视图或子视图的背景。然而，当这样做时，`UIView`屏幕上的线条会丢失，直接与该线条的触摸交互变得更具挑战性。最后，请记住，有一些创造性的方法可以绕过子类化以显示自定义绘图，但有时从程序设计的角度来看，创建子类可能更有意义`UIView`。

这些绝不是您想要将 a 子类化的唯一原因`UIView`，但却是我所见过的用于创建 的子类的两个最大原因`UIView`。我建议您查看[UIView 类参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIView_Class/UIView/UIView.html)或[iOS 的 View Programming Guide](https://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009503)了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:50:05.150

出于同样的原因，UIView 是 UIKit 中的控件和文本布局视图的子类：因为现有的实现并不能做*所有事情*，并且需要自定义实现或成员（有时）。

但是，在这种情况下，如果您需要做一些特定的事情，或者重用一个实现并且子类化是一个很好的解决方案，您可以在这种情况下子类化 UILabel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T05:36:39.493

我会说自定义行为和自定义布局。从外部控制器处理超出自动调整大小掩码或智能加载子视图的调整大小更困难。

我创建了一个自定义图像视图，它有一个滚动视图，可以在三列显示中查看一长串图像。它在内部管理图像，因此它只加载屏幕上显示的图像的视图。

您能想象必须通过手动将滚动视图与单元格组合来构建 UITableView，管理单元格视图的队列，必须仅在单元格出现时才智能加载单元格，并且每次处理所有点击、滑动和平移手势需要具有表格外观的屏幕？

# perforce - Perforce：客户端空间中的已删除文件：无法从服务器恢复文件

> ID：10629944
> 
> 赞同：2
> 
> 时间：2012-05-17T04:45:01.593
> 
> 标签：perforce

我删除了客户端工作空间中的一个文件。rm *.py。当我执行 p4 sync -f 时，它只是刷新文件我如何从服务器取回文件。谢谢， 拉什米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T04:50:02.903

p4 sync -f 是正确的命令。

需要检查的一些事项：

您正在同步正确的客户端吗？客户端视图是否包含该文件？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-22T01:54:02.270

发生这种情况的一个原因是您已经签出了这些文件。例如，如果您检出整个目录然后将其删除，p4 sync 将无法按预期工作。运行 p4 revert 然后 p4 sync -f ... 应该可以工作。

# c# - 如何重新打开上次应用程序运行期间打开的 MDI 表单？

> ID：10629951
> 
> 赞同：1
> 
> 时间：2012-05-17T04:45:34.280
> 
> 标签：c#, winforms, mdi, mdichild

使用 MDI 表单时，是否有任何标准方法来保存和恢复状态（打开了哪些表单以及在屏幕上的哪个位置）？

是的，我可以将 MdiChildren 中的值保存到文件并在应用程序启动时恢复它们。那不是我要找的。

有没有标准的方法来做到这一点？

如果您有比从 MdiChildren 序列化值更好的方法，请发布它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T08:07:10.033

经过一番搜索，得出以下结论：

不，没有标准解决方案。

编写恢复窗口及其状态所需的数据部分非常容易。只需序列化并写入`Closed`MdiParent 上事件的文件。（像这样`Application.Exit`的事件来不及序列化。表单已经关闭）。

读回来，填充你想要的任何东西，然后在 MdiParent`Show`上形成子窗体。`Load`

*我会接受这个作为答案，因为它是我使用的，我不喜欢留下未回答的问题。*

# c# - 事务死锁和 DBContext

> ID：10629955
> 
> 赞同：3
> 
> 时间：2012-05-17T04:46:13.917
> 
> 标签：c#, entity-framework-4.1

您好我正在使用 Entity Framework 4.1 代码优先方法。我有`MyContainer`继承的类`DBContext`。

我有一个流程，每个步骤有 7 个步骤访问许多存储库方法（大约 60 个）。此流程自动或手动执行取决于业务逻辑和用户要求。现在为了自动进程的性能观点，我创建了上下文，即`MyContainer`一次对象并将其传递给所有方法，并在进程结束时处理它，它的工作正常并提高了性能。但是当这个进程手动执行时，执行相同的方法并且容器是在方法本身中创建和处置的。例如下面，但这只是粗略的代码。

```
public bool UpdateProcess(Process process, MyContainer container = null)
    {
        bool disposeContainer = false;
        if (container == null)
        {
            container = new MyContainer();
            disposeContainer = true;
        }
        var result = SaveProcess(container, process);
        container.SaveChanges();
        if (disposeContainer)
            container.Dispose();
        return result;
    } 
```

对于自动流程，事务在流程开始时创建并在流程结束时结束，手动事务在根据用户在 ui 上的操作调用的方法中的 bll 处创建。现在假设我的自动流程正在运行同时用户在 ui 上做了一些操作我得到了异常`"Transaction (Process ID 65)`被锁定资源与另一个进程并已被选择“当从手动和自动过程一起调用 UpdateProcess() 方法时，我在 container.SaveChanges() 上得到它.

任何帮助将不胜感激。

如果我在这个存储库方法中创建一个事务范围，比如

```
public bool UpdateProcess(Process process, MyContainer container = null)
 {         bool disposeContainer = false;        
           if (container == null)  
           {             
                  container = new MyContainer();         
                  disposeContainer = true;         
            }
       using(var trans=new TransactionScop(TransactionScopeOption.RequiresNew))        
       { 
          var result = SaveProcess(container, process);
          container.SaveChanges();
          trans.Complete();
       }        
          if (disposeContainer)           
          container.Dispose();        
          return result;   
 } 
```

它工作正常。但是我不想在存储库中创建事务，因为事务已经在 bll 中进行。

任何帮助都会得到帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T12:38:56.223

The issue (sql deadlocking) you are having is common to most non-trivial client - database systems and can be very difficult to resolve.

The primary rule in designing code where deadlocks may occur is to assume that they will and design the application to handle them appropriately. This is normally handled via resubmitting the transaction. As documented by microsoft [here](http://support.microsoft.com/kb/832524)

> Although deadlocks can be minimized, they cannot be completely avoided. That is why the front-end application should be designed to handle deadlocks.

In order to minimise any deadlocks you are seeing the normal approach I take is as follows:

1.  Run profiler with a deadlock graph enabled to capture all deadlocks
2.  Export all deadlocks to text and investigate why they are occurring
3.  Check to see these can be minimised by using table hints and/or reducing the transation isolation level
4.  See if they can be minimised by other means, e.g. changing the order of operation
5.  Finally after all this has been completed ensure that you are trapping for deadlocks anytime you communicate with the database & resubmit the transaction / query etc.

# ruby-on-rails - 从csv导入Rails中的数据库时如何将字符串“560,000”转换为整数560000

> ID：10629958
> 
> 赞同：1
> 
> 时间：2012-05-17T04:46:35.683
> 
> 标签：ruby-on-rails, ruby

刚开始学习 Rails 并设法将 csv 文件导入数据库，但 csv 中的价格字段有引号和逗号，如下所示：“560,000”

但是如果我在迁移文件中将价格字段设置为 t.integer，然后添加数据，价格将导入为 560。那么，如何在导入之前删除引号和逗号？谢谢，亚当

编辑：这是 rake 文件：

```
require 'csv'    

task :csv_to_properties => [:environment] do 
  CSV.foreach("lib/assets/cbmb_sale.csv", :headers => true) do |row|

    Property.create!(row.to_hash)
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:49:30.747

尝试类似：

```
csvvalue = csvvalue.gsub!(/,/,'').to_i 
```

干杯!

感谢您发布您的代码。我不会做很多将 csv 转换为哈希的事情，但这样的事情可能会起作用：

```
Property.create!(row.to_hash.each_pair{|k,v| row.store(k,v.gsub(/,/,'').to_i)}) 
```

非常丑陋，但可能非常接近你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:28:29.933

在您的代码示例中，假设价格字段位于`row`元素 4 中：

```
CSV.foreach("lib/assets/cbmb_sale.csv", :headers => true) do |row|
  row[price=4].gsub!(/,/,'')
  Property.create!(row.to_hash)
end 
```

这`price=4`只是记录 price 元素的索引值的一种方便方法，它创建一个名为 price 的变量，将值 4 分配给它，然后立即将其用作数组索引。

由于 Property.create! `/,/`已经处理了字符串到整数的转换，我们可以对包含空字符串逗号的正则表达式执行就地替换`''`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T06:02:16.033

尝试：

```
"220,000".scan(/\d+/).join().to_i 
```

# java - 如何使用 mina 从客户端向服务器发送 POJO

> ID：10629959
> 
> 赞同：1
> 
> 时间：2012-05-17T04:46:53.403
> 
> 标签：java, apache-mina

我对 apache mina 很陌生，我在将 POJO 从客户端发送到服务器时遇到问题。如果可能，请提供任何示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:58:26.033

If you are just starting with MINA you may want to consider whether you should actually be using Netty instead:

*   [Netty vs Apache MINA](https://stackoverflow.com/questions/1637752/netty-vs-apache-mina)

If you stick with MINA, there is a good quick start guide here with worked code examples:

*   [http://mina.apache.org/quick-start-guide.html](http://mina.apache.org/quick-start-guide.html)

# php - 价格排序网址的正则表达式

> ID：10629962
> 
> 赞同：0
> 
> 时间：2012-05-17T04:47:12.640
> 
> 标签：php, regex, preg-match

我不擅长正则表达式，如果有人能解决我的问题，我将非常感激......我对此有些困惑：

```
echo (preg_match('/\/(price-100)/i','/index.php/search/price-100/')) ? 'Same' :'Not Same'; 
```

结果将是“相同”，但是当我更改为 price-10 或 price-1

```
echo (preg_match('/\/(price-10)/i','/index.php/search/price-100/')) ? 'Same' :'Not Same'; 
```

它也会导致“相同”...我认为正则表达式遗漏了..任何人都可以帮助我吗？非常感谢你！

最好的问候，哈里森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:51:59.840

使用 a`\b`作为单词边界。

```
echo (preg_match('/\/(price-10)\b/i','/index.php/search/price-100/')) ? 'Same' :'Not Same'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T04:53:01.297

“price-100”以“price-10”开头，所以正则表达式匹配。如果您只想在 price-10 后面没有数字时匹配它，您需要更改表达式来表示。

这是一个选项：

```
'/\/(price-10)(?:$|\/)/' 
```

这匹配“.../price-10”或“.../price-10/”，但如果在-10 之后出现除斜线以外的任何内容，则失败。如果这太严格了，你可以这样做：

```
'/\/(price-10)(?!\d)/' 
```

只要-10之后没有其他数字，它将匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T04:58:21.087

`(price-10)` replace with `(price-10?/)` and try

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T05:01:16.890

You aren't terminating your regular expression. For example, the string "price-1" is found in:

1.  price-1
2.  price-10
3.  price-100

So all three expressions will return true. You need to terminate the match with something like a word boundary, end-of-string, end-of-line, or other terminating character in order to have a unique match. See the PHP reference on [anchors](http://www.php.net/manual/en/regexp.reference.anchors.php) for more information.

# apache - .htaccess 不同目录映射

> ID：10629966
> 
> 赞同：0
> 
> 时间：2012-05-17T04:47:36.043
> 
> 标签：apache, .htaccess

我需要映射以下地址

```
http://www.mydomain.com/foo1/ 
```

至

```
http://www.mydomain.com/dev/foo2/ 
```

这样任何访问的人`http://www.mydomain.com/foo1/`都会看到来自`http://www.mydomain.com/dev/foo2/`. 请注意，我不考虑重定向。

以下代码位于我的 .htaccess`/foo1/`目录中

```
Options +FollowSymLinks
RewriteEngine On
RewriteRule ^(.*)$ /dev/foo2/$1 [L] 
```

但结果与我想要的相差甚远。它映射到`http://www.mydomain.com/dev/foo2/foo1/` 我尝试访问时`http://www.mydomain.com/foo1/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:53:57.043

```
RewriteRule ^foo1/(.*) /dev/foo2/$1 [L] 
```

# map - Maxmind 纬度/经度值

> ID：10629973
> 
> 赞同：1
> 
> 时间：2012-05-17T04:49:22.013
> 
> 标签：map, latitude-longitude

在地图方面我不是专家，但有谁知道（免费）MaxMind 城市数据库提供的纬度和经度值属于哪种地图类型？它们是米勒圆柱投影、墨卡托投影还是任何其他地图类型（https://en.wikipedia.org/wiki/Map_projection#Cylindrical）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-24T13:26:12.000

正如马克所说，纬度和经度值是通用的。根据投影，您可以适当地转换它们。

# ios - 不使用 NSUserDefaults 保存数据的方法

> ID：10629981
> 
> 赞同：0
> 
> 时间：2012-05-17T04:49:59.610
> 
> 标签：ios, nsuserdefaults

`NSUserDefaults`除了保存和取回自定义对象之外，还有什么其他方法？对我来说，`NSUserDefaults`已经变得太麻烦了（它没有正确保存），所以我正在寻找另一种方法来保存有效的数据。（我已经把我的问题贴出来了，我真的只是想寻找其他方法来保存数据）

编辑：我还需要能够保存 UIIMages 和 UIButtons 之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:53:52.943

1.  您可以将数据保存为普通`text`文件或`plist`文件。
2.  可以`SQLLite`用来保存数据。

除此之外，如果您使用的是服务器驱动的应用程序，那么您可以将数据保存在服务器上并在需要时取回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T05:19:26.740

UIImages 应该通过创建一个 PNG 或 JPEG 表示来保存，然后在你认为合适的时候写出那个 NSData 块。请参阅[UIImagePNGRepresentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html#//apple_ref/c/func/UIImagePNGRepresentation)。

UIButtons 应该使用[NSCoding](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html)协议进行序列化/反序列化。档案馆可以为您解决这个问题。

NSData 和 UIButtons 都支持 NSCoding，所以我建议归档而不是 NSUserDefaults。请参阅 NSCoding 以了解该兔子洞的开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T07:51:53.423

要存储自定义对象，您需要确保您的自定义对象实现了 NSCoding 协议。这是 Apple 关于[NSCoding 的文档。](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Protocols/NSCoding_Protocol/Reference/Reference.html) . 如果您需要有关如何实现 NSCoding 协议的教程，请查看[此站点。](http://www.raywenderlich.com/1914/how-to-save-your-app-data-with-nscoding-and-nsfilemanager) 要将 UIImage 保存到文件中，可以将图像转换为 [NSData](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html)，然后使用 NSData 的 writeToFile 方法写入文件。关于如何在 SO 上做最后一部分的例子很多。这是[一个。](https://stackoverflow.com/questions/6821517/save-an-image-to-application-documents-folder-from-uiview-on-ios)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T04:55:31.147

You cans use plist or coreData.As you used NSUserDefaults , that means data is quite small so plist will be a good idea.Both are apple's so quite effiecient .If data gets really large you can use sqlite.

# android - 如何在 Google Play 上提供已发布应用的更新？

> ID：10629988
> 
> 赞同：1
> 
> 时间：2012-05-17T04:50:19.843
> 
> 标签：android

我已经在使用数据库的 google play 上发布了我的应用程序。现在我想要的是在不干扰现有数据库的情况下提供软件更新。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:52:34.727

软件更新不应损害您的数据库。它从更新到更新持续存在。

# php - 如何在 apache ubuntu 11.04 中创建虚拟主机

> ID：10629994
> 
> 赞同：0
> 
> 时间：2012-05-17T04:51:05.893
> 
> 标签：php, apache, zend-framework, ubuntu-11.04

我想在 zend 框架中为我的项目创建虚拟主机。我有前端和后端（管理员）功能。我使用必要的配置为我的前端功能创建了虚拟主机，并且它运行正常。

示例：在 /etc/apache2/sites-available 中，我创建了文件 roomstays，我的代码位于**var/www**文件夹中。

```
<VirtualHost *:80>    
DocumentRoot "/var/www/roomstays/public"    
ServerName localhost

#This should be omitted in the production environment
SetEnv APPLICATION_ENV development

<Directory "/var/www/roomstays/public">
Options Indexes MultiViews FollowSymLinks
AllowOverride All
Order allow,deny
Allow from all
</Directory>    
</VirtualHost> 
```

它在本地主机上正常运行。

现在我有管理 iebackend 代码，和以前一样，我想运行这段代码。我将我的新代码放入同一个名为 roomstaysback 的**var/www目录中。**我的问题是如何为此后端代码创建虚拟主机。我想同时运行前端和后端代码。

请给我任何解决方案，我是全新的，谢谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:22:51.247

您可以处理来自同一虚拟主机的前端和后端。zend 框架提供了模块的概念。这是一个例子。看一看

[在 Zend Framework v1.9 中设置多模块，13 个步骤](http://www.zfforums.com/zend-framework-general-discussions-1/resources-developers-37/setup-multi-modules-zend-framework-v1-9-13-steps-3737.html)

详细的在这里

[使用传统的模块化目录结构](http://framework.zend.com/manual/en/zend.controller.modular.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-31T04:26:11.410

1.为虚拟主机创建一个conf文件

```
$sudo gedit /etc/apache2/sites-available/HOST_NAME.conf 
```

2.然后将以下内容粘贴到该文件中

```
<VirtualHost *:80>
    ServerName www.HOST_NAME.com (set host name here)
    DocumentRoot /var/wwww/HOST_FOLDER (point to host path )
 </VirtualHost> 
```

1.  添加主机名

    $sudo gedit /etc/hosts

2.  然后粘贴以下内容

    127.0.0.1 www.HOST_NAME.com

3.  启用网站

    $sudo a2ensite HOST_NAME.conf

4.  重启apache服务器

    $sudo 服务 apache2 重新加载

该过程结束，您可以浏览 www.HOST_NAME.com :)

# ruby-on-rails-3 - 如何在 Rails 路由辅助方法中传递参数？

> ID：10629995
> 
> 赞同：4
> 
> 时间：2012-05-17T04:51:16.223
> 
> 标签：ruby-on-rails-3, url-routing

我知道如何以愚蠢的方式传递参数。例如，

```
<%= link_to "Order", new_order_item_path(:item_id => @item.id) %> 
```

OrderItemsController 将其接收为`params[:item_id] = id`.

问题：

```
@order_item = OrderItem.new(params) 
```

引发异常（无法批量分配受保护的属性：动作、控制器）。我可以使用以下代码解决此问题。

```
@order_item = OrderItem.new
@order_item.item_id = params[:item_id] 
```

我知道控制器需要`params[:order_item][:item_id]`new 以第一种方式工作。我的问题是，如何`new_order_item_path`生成 url？我知道这不是一个主要问题，但它只是让我感到困扰，我不知道更清洁/正确的方法来做到这一点。我试过搜索，但只收到不相关的问题/答案/结果。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T21:34:14.833

您并没有真正指定是否不想使用它，但是在您的模型中，您可以像这样使属性 item_id 可访问：

```
class OrderItem < ActiveRecord::Base
   attr_accessible :item_id
... 
```

这样，

```
@order_item = OrderItem.new(params) 
```

会工作。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-25T19:39:22.780

这个怎么样：

```
# Controller
def get_item_edit_method
  @order = OrderItem.find("your criteria")
  #@order = OrderItem.new # if new
  @item = Item.new() 
end

def post_item_edit_method
  @order = OrderItem.new(params) # should work now
  @order.save
end
# End controller

<!-- view -->
<% @order.item = @item %>
<%= link_to "Order", new_order_item_path(@order) %>
<!-- end view --> 
```

# html - 为什么 HTML 5 画布中的矩形不是黑色的？

> ID：10629996
> 
> 赞同：3
> 
> 时间：2012-05-17T04:51:49.953
> 
> 标签：html, canvas, html5-canvas

下面是一个带有 canvas 标签的简单 HTML 5 页面。在画布上用黑色绘制一个矩形，并显示黑色文本。但由于某种原因，矩形实际上是灰色的。为了让它变黑，我必须在它上面画 2 到 3 次。这似乎表明存在某种 alpha 问题，但我不知道为什么会这样。

此外，线宽看起来比 1px 宽多一点......？

谁能告诉我我做错了什么？

```
function draw()
{
    var canvas = document.getElementById('tutorial');
    if (canvas.getContext)
    {
        var ctx = canvas.getContext('2d');
        //ctx.globalAlpha = 1;
        //ctx.globalCompositeOperation = "source-over";

        ctx.lineWidth = "1";
        ctx.strokeStyle = "#000000";
        ctx.strokeRect(100, 100, 50, 50); //appears grey

        ctx.font = "22px Arial";
        ctx.fillStyle = "#000000";
        ctx.fillText("test", 120, 120); //appears black as expected
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T05:07:32.707

您的线条在绘制时看起来很粗且呈灰色，因为它与像素重叠 - 即您的线条跨越两个像素。如果您将代码更改为：

```
ctx.strokeRect(100.5, 100.5, 50, 50); 
```

您会看到一条实心黑线。

![在此处输入图像描述](../Images/34902c67ac4f4725eceaede89ec32c9f.png)

有关更多信息，请参阅此页面：http: [//diveintohtml5.info/canvas.html#paths](http://diveintohtml5.info/canvas.html#paths)