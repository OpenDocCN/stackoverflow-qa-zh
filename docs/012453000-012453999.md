# StackOverflow 问答 12453000-12453999

# iphone - 我在 Xcode 中得到了预期的标识符

> ID：12453000
> 
> 赞同：1
> 
> 时间：2012-09-17T04:06:43.297
> 
> 标签：iphone, objective-c, c, xcode, identifier

我正在使用 obj-c 为 iPhone 制作一个应用程序，它可以找到三角形的边长和角度。该应用程序的一部分使用了勾股定理。

```
NSNumber *pySidea = [NSNumber numberWithInteger:[[sideA text] integerValue]];
NSNumber *pySideb = [NSNumber numberWithInteger:[[sideB text] integerValue]];
NSNumber *pySidec = [NSNumber numberWithInteger:[[sideC text] integerValue]];

int pyAside = [pySidea intValue];
int pyBside = [pySideb intValue];
int pyCside = [pySidec intValue];

if ([aSide length] = 0) {
    NSString *finalAnserc = [sqrtf(powf(pyAside, 2) + powf(pyBside, 2))];
    sideCstring = @"_anserSidec";
} 
```

sideA、sideB 和 sideC 是使用文本字段的三角形的边。我没有收到任何部分的错误，除了

```
if ([aSide length] = 0) {
    NSString *finalAnserc = [sqrtf(powf(pyAside, 2) + powf(pyBside, 2))];
    sideCstring = @"_anserSidec";
} 
```

我在哪里得到“预期的标识符”。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:23:25.933

这一行：

```
NSString *finalAnserc = [sqrtf(powf(pyAside, 2) + powf(pyBside, 2))]; 
```

似乎想要创建一个字符串，但除了方括号内的一些算术之外什么都不做，这不是有效的语法。我想你想要这样的东西：

```
float answer = sqrtf(powf(pyAside, 2) + powf(pyBside, 2));
NSString *finalAnswer = [[NSNumber numberWithFloat:answer] stringValue]; 
```

要求对数字`powf()`进行平方也有点笨拙。你可以写：

```
float answer = sqrtf(pyAside*pyAside + pyBside*pyBside); 
```

正如 Nithin 在他的回答中指出的那样，您的`if`陈述也存在逻辑错误 - 您可能想要使用`==`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:10:22.007

检查您的“如果”条件，它应该是`if([aSide length] == 0)`

记住两个等号（=）...

# vim - 如何使用 2 个不同的位置为 vim 生成单个 .ctags 文件？

> ID：12453001
> 
> 赞同：3
> 
> 时间：2012-09-17T04:06:48.850
> 
> 标签：vim, ctags

我每天都在使用 python，需要对我的本地项目和在我的 virtualenv 中找到的每个 python 模块/鸡蛋都有一个索引

以下是我希望改进的半工作版本。目前我可以在重绘命令之前做一个或另一个。通过这种方法，我最终在我处理的每个项目的根目录中都有一个 .ctags 文件，并且 vim 知道通过类名/方法名/等进行任何查找都变得快速而简单。

有没有办法将这 2 行 exe 组合成一行，仍然只产生一个索引文件？

先感谢您

```
set tags=./.ctags,.ctags;

" re-index the ctags file
map <leader>ri :call RenewTagsFile()<cr>

" search through the indexed ctags file for any class/method/etc
map <leader>fs :FufTag<CR>

function! RenewTagsFile()
    exe 'silent !ctags -Rf .ctags ' . system('python -c "from distutils.sysconfig import get_python_lib; print get_python_lib()"')''
    exe 'silent !ctags -Rf .ctags --extra=+f --exclude=.git --languages=-javascript 2>/dev/null'
    exe 'redraw!'
endfunction 
```

**更新**

对于将来可能偶然发现这个问题的任何人，我都可以使用 -a 标志附加（因此更新标签文件功能看起来像这样）

```
function! RenewTagsFile()
    exe 'silent !ctags -Rf .ctags ' . system('python -c "from distutils.sysconfig import get_python_lib; print get_python_lib()"')''
    exe 'silent !ctags -a -Rf .ctags --extra=+f --exclude=.git --languages=-javascript 2>/dev/null'
    exe 'redraw!'
endfunction 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T04:57:19.707

# ruby-on-rails - 确保包含的名称错误？

> ID：12453010
> 
> 赞同：0
> 
> 时间：2012-09-17T04:08:06.893
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rspec, rspec-rails

在我的模型中，我有以下要测试的内容：

```
UNIT_TYPES = [ 'seconds', 'minutes', 'hours', ]
validates_inclusion_of :unit_type, :in => UNIT_TYPES, :allow_blank => true 
```

并使用我放[的应该匹配器：](https://github.com/thoughtbot/shoulda-matchers/blob/master/lib/shoulda/matchers/active_model/ensure_inclusion_of_matcher.rb)

```
it { should ensure_inclusion_of(:unit_type).in_array(UNIT_TYPES) } 
```

但是为什么我会收到这个错误？

失败：

```
 1) Price inclusions
     Failure/Error: it { should ensure_inclusion_of(:unit_type).in_array(UNIT_TYPES) }
     NameError:
       uninitialized constant UNIT_TYPES
     # ./spec/models/price_spec.rb:39:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:10:24.830

每当您想在模型使用之外调用模型常量时`<ModelName>::<ConstantVariableName>`

改变

```
UNIT_TYPES 
```

到

```
User::UNIT_TYPES #Assuming 'User' is your Model Name 
```

所以你的`shoulda`代码应该是这样的

```
it { should ensure_inclusion_of(:unit_type).in_array(User::UNIT_TYPES) } 
```

# google-maps-api-3 - 在 V3 中渲染 kmz 时出错

> ID：12453011
> 
> 赞同：1
> 
> 时间：2012-09-17T04:08:16.610
> 
> 标签：google-maps-api-3

我正在开发一个洪水映射项目，并且有一堆 kmz 文件，当在 Google Earth 中查看时呈现良好，但在 Google Maps api v3 中显示时却没有。

kmz 包含显示湖上洪水阶段的多边形，在谷歌地球中湖上的岛屿是多边形中的“洞”，因为它们从不洪水。但是，当在谷歌地图中显示 kmz 时，这些洞会被填满。

不知道这里发生了什么，有人可以帮忙吗？这些地图是使用 shapefile 中的 ArcMap 工具创建的。

这是其中之一的链接：[http](http://www.frontiernet.net/~wfobtv/inundation/combined/103.kmz) ://www.frontiernet.net/~wfobtv/inundation/combined/103.kmz 将网址复制到谷歌地图中以了解我的意思。

谢谢！

# arrays - 无法从 AWK 语句填充 Bash 数组

> ID：12453013
> 
> 赞同：1
> 
> 时间：2012-09-17T04:08:20.747
> 
> 标签：arrays, bash, shell

我需要从配置文件中获取 1 个或多个位置，然后检查每个位置的某些文件。我有一个 AWK 和 SED 组合，可以找到位置，然后从文本文件中读取文件列表。我想检查文件的每个位置，并考虑使用 bash 数组来保存这些位置。

但是由于某种原因，我无法从 AWK 语句中填充数组。在我看来，它将完整内容加载到第一个元素中。

如果我手动填充数组，它可以工作；例如，将行 array=$(awk ... 替换为

```
array[1]=/docs01/objdata/admin/p1dig
array[2]=/docs02/objdata/admin/p1dig
array[3]=/docs03/objdata/admin/p1dig
array[4]=/docs04/objdata/admin/p1dig 
```

在下面的代码片段中，我删除了外部（文件名）循环并添加了一些调试上下文。

```
#!/bin/bash

declare -a array

OBJECTIVE_CONF=/u01/app/objective/perf/DOS1/config/objConf.xml
FILE=/tmp/DoS1_files.dsv

# IFS=$"/n"
array=$(awk '/<volume>/,/<\/volume>/' $OBJECTIVE_CONF | grep "<path>" | sed "s#<[/]*path>##g" | sed 's/^[ \t]*//' |sed 's/[ \t]*$//' )

element_count=${#array[@]}
echo "element_count is : $element_count "

echo "index is: $index"
echo "${array[$index]}"

   echo "filename loop"

   index=0
   while [ "$index" -lt "$element_count" ]
   do
      let "index = $index + 1"
      echo "index is: $index"
      echo "ls ${array[$index]}/filename_from_loop"
   done
   echo "leaving loop" 
```

从命令行运行时，Awk 语句给了我预期的结果。我 AWK 用于开始和结束 XML 标记，在 PATH 中使用 grep 并使用 SED 删除 PATH exm 标记以及前导和训练空间。

```
bash-3.00$ awk '/<volume>/,/<\/volume>/' $OBJECTIVE_CONF | grep "<path>" | sed "s#<[/]*path>##g" | sed 's/^[ \t]*//' |sed 's/[ \t]*$//'
/docs01/objdata/admin/p1dig
/docs02/objdata/admin/p1dig
/docs03/objdata/admin/p1dig
/docs04/objdata/admin/p1dig 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:35:29.727

`$(<command>)`替换不会产生数组。要获取数组，请使用另一对括号：

```
array=($(<command>)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:00:12.677

您也可以使用 readarray 语句：

```
readarray array < <(command) 
```

与分配不同的`array=($(<command>))`是，您对最终数组有更多的控制权，[(man)](http://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html#index-readarray)

这`< <(command)`是用于没有子进程的功能/命令扩展。

# asp.net-mvc-3 - 在实时服务器上，我如何创建 aspnet_roles

> ID：12453016
> 
> 赞同：0
> 
> 时间：2012-09-17T04:08:34.530
> 
> 标签：asp.net-mvc-3, asp.net-roles

我在godaddy 服务器上的MVC3 上发布了我的asp.net 网站。如何创建管理员角色并向其添加用户？是否有捷径可寻？即使通过 sqlserver 也请回复一些代码以便更好地理解。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:20:58.793

如果您已经通过将数据库复制到 GoDaddy 服务器来填充 SQL 数据库，则可以使用其中已经存在的这些存储过程。

创建管理员角色

```
EXEC    @return_value = [dbo].[aspnet_Roles_CreateRole]
    @ApplicationName = N'/',
    @RoleName = N'admin' 
```

要将用户添加到角色中，请执行存储过程`aspnet_UsersInRoles_AddUsersToRoles`。`aspnet_Users_CreateUser`如果还没有用户，请务必通过执行来创建用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:00:47.770

Create it in your local database and push that up to your site in app_data. You should be able to click the small icon at the top of solution explorer to admin your site and create the roles. No code required.

# javascript - 以 html 表单提交隐藏字段

> ID：12453017
> 
> 赞同：14
> 
> 时间：2012-09-17T04:08:45.590
> 
> 标签：javascript, html, css

对于一个基本的 HTML 表单，我想将表单分成三个选项卡，每个选项卡将包含某些字段，并且在提交表单时我希望三个表单中的所有数据都能够提交。

所以我有一个由`<ul>`and创建的菜单`<li`>

```
<ul class="subnav">
    <li class="subnav0 current"><a href="javascript:showTab('tab1');">Tab1</a></li>
    <li class="subnav1"><a href="javascript:showTab('tab2');">Tab2</a></li>
    <li class="lastItem subnav2"><a href="javascript:showTab('tab3');">Tab3</a></li>
</ul> 
```

在这个菜单下面，我有三个代表每个选项卡的 div：

```
<div class="tab1"></div>
<div class="tab2 displayNone"></div>
<div class="tab3 displayNone"></div> 
```

输入控件元素将被放入每个选项卡 div 中。并且菜单导航栏中的 javascript 将通过每个 div的调用`show()`和方法来控制显示哪个选项卡。`hide()`（使用 jQuery）。

现在我的问题是：

1）我希望能够提交整个表单（三个 div 内的所有控件）。但是，html 表单不会在 displayNone div 中提交输入控件，这意味着我只能在当前正在查看的选项卡中提交数据，而不能在其他两个选项卡中提交数据。

2）我还想在tab2或tab3中初始化表单时对隐藏元素执行一些javascript函数。但是，由于它们是 display:none，因此 javascript 不会有任何效果。

那么有什么方法可以隐藏 div，但也可以提交表单并对其进行任何 javascript 操作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T04:27:31.773

根据[W3C](http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2) display:none 控件可能仍会发送到服务器，因为它们被认为是成功的控件

> 17.13.2 成功控制
> 
> 一个成功的控件对于提交是“有效的”。每个成功的控件都将其控件名称与其当前值配对，作为提交的表单数据集的一部分。成功的控件必须在 FORM 元素中定义，并且必须具有控件名称。
> 
> 然而：
> 
> *   禁用的控件不能成功。
> *   如果一个表单包含多个提交按钮，只有激活的提交按钮是成功的。
> *   所有“打开”复选框都可能成功。
> *   对于共享相同 name 属性值的单选按钮，只有“on”单选按钮可能成功。
> *   对于菜单，控件名称由 SELECT 元素提供，值由 OPTION 元素提供。只有选定的选项可能会成功。
> *   如果未选择任何选项，则控件不成功，并且在提交表单时，名称和任何值都不会提交给服务器。
> *   文件选择的当前值是一个或多个文件名的列表。提交表单后，每个文件的内容都会与表单数据的其余部分一起提交。文件内容根据表单的内容类型打包。
> *   对象控件的当前值由对象的实现决定。

如果控件没有当前值

> 提交表单时，用户代理不需要将其视为成功控件。
> 
> 此外，用户代理不应认为以下控制成功：
> 
> 重置按钮。已设置声明属性的 OBJECT 元素。由于样式表设置而未呈现的隐藏控件和控件可能仍会成功。

例如：

```
<FORM action="..." method="post">
<P>
<INPUT type="password" style="display:none"  
          name="invisible-password"
          value="mypassword">
</FORM> 
```

> 仍然会导致一个值与名称“invisible-password”配对并与表单一起提交。

无论如何，如果这似乎不起作用，为什么不在每个表单上尝试 jQuery [serialize()](http://api.jquery.com/serialize/)或[serializeArray()](http://api.jquery.com/serializeArray/)并将值连接起来并将它们 ajax 回服务器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T04:29:09.090

在您的第一点上，仅仅因为输入显示无，并不意味着它不会提交这些字段。

关于你的第二点，我不太理解。您是说当您打开其中一个选项卡时，您想对内容执行一些操作吗？如果是这样，那么 JQuery UI 允许您这样做：-

[http://jqueryui.com/demos/tabs/#event-show](http://jqueryui.com/demos/tabs/#event-show)

你能举一个更完整的例子，包括表单标签和一些输入吗？

# python - PyGI 模拟 set_attribute / 发出适当的信号？

> ID：12453024
> 
> 赞同：0
> 
> 时间：2012-09-17T04:09:50.133
> 
> 标签：python, gtk3, pygobject

我有一个现有项目，我正在尝试围绕它构建一个 GUI（使用 PyGI + Gtk3）。我需要稍微扩展一些原生对象以使其可渲染。我把问题归结为简化的代码：

```
# Simplified Equivalent Code

from gi.repository import GObject
from gi.repository import Gtk
from gi.repository import GdkPixbuf

# Pre-existing, complex object
class Move(object):
    def __init__(self, color):
        self.color = color

# Pre-existing, complex object
class Block(object):
    def __init__(self,move=None,**kwds):
        self.move = move

# New object created to help render a Block
class BlockGui(Block):
    pixbufs = {
            'empty' : GdkPixbuf.Pixbuf.new_from_file('block_empty.png'),
            'red' : GdkPixbuf.Pixbuf.new_from_file('block_red.png'),
            'blue' : GdkPixbuf.Pixbuf.new_from_file('block_blue.png'),
          }

    def __setattr__(self, name, value):
        super(BlockGui, self).__setattr__(name, value)

        if name == 'move':
            print "Need to emit a signal here"

    def get_pixbuf(self):
        try:
            return BlockGui.pixbufs[self.move.color]
        except AttributeError:
            return BlockGui.pixbufs['empty']

class BlockRenderer(Gtk.CellRendererPixbuf):
    __gproperties__ = {
            'block' : (GObject.TYPE_PYOBJECT,
                'block to render',
                'the block object to be rendered',
                GObject.PARAM_READWRITE)
            }

    def __init__(self):
        GObject.GObject.__init__(self)
        self.block = None

    def do_set_property(self, prop, value):
        # What is a GParamBoxed? Should I be checking if prop == 'block' from it somehow?
        if isinstance(value, BlockGui):
            self.block = value
            self.set_property('pixbuf', self.block.get_pixbuf())

GObject.type_register(BlockRenderer)

def destroy(widget, data=None):
    Gtk.main_quit()

# Normally do not have access to this assignment
def on_clicked(widget, liststore, treeview):
    treeiter = liststore.get_iter(2)
    block = liststore.get_value(treeiter, 1)
    block.move = Move('red')

def main():
    # 3x5 so this demo window has some size
    fmt = [GObject.TYPE_PYOBJECT] * 3
    liststore = Gtk.ListStore(*fmt)
    for r in xrange(5):
        liststore.append([BlockGui() for x in xrange(3)])

    treeview = Gtk.TreeView(liststore)

    for c in xrange(3):
        col = Gtk.TreeViewColumn(str(c))
        treeview.append_column(col)
        cell = BlockRenderer()
        col.pack_start(cell, True)
        col.add_attribute(cell, 'block', c)

    button = Gtk.Button("Change Color!")
    button.connect('clicked', on_clicked, liststore, treeview)

    vbox = Gtk.VBox()
    vbox.add(treeview)
    vbox.add(button)

    window = Gtk.Window(Gtk.WindowType.TOPLEVEL)
    window.connect('destroy', destroy)
    window.add(vbox)
    window.show_all()

    Gtk.main()

if __name__ == '__main__':
    main() 
```

当前代码运行时，单击按钮不会立即产生结果，但是将鼠标悬停在更改的行上会导致中心方块变为红色（因为悬停在行上会触发刷新）。通常，当一个“正确”的 GObject 调用了 set_attribute 时，它​​会发出一些信号来通知包含它的小部件重新渲染。

我需要知道发出哪个信号，向谁发出信号，以及如何模拟这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T03:04:12.833

If you know the widget that must be redrawn, then you can just call `queue_draw()`, `queue_draw_region()` or `queue_draw_area()` for that widget. That will invalidate that window area and it will be redrawn. If you want more fine grained control, you might want to use Gtk.DrawingArea.

You might want to check the documentation for *[The GTK+ Drawing Model](http://developer.gnome.org/gtk3/3.5/chap-drawing-model.html)*.

# javascript - SCRIPT5007：属性“doDelete”的值为 null 或未定义

> ID：12453028
> 
> 赞同：0
> 
> 时间：2012-09-17T04:10:25.153
> 
> 标签：javascript, internet-explorer

我有以下带有 JS 的页面。

```
<html>
<script language="Javascript" type="application/javascript">
function doDelete(myid)
{
    if(confirm("Are you sure want to delete this Attendance?"))
    {
        window.location.href="AttDelete.asp?id="+myid;
    }
}
</Script>

<body>

66

<a href="" onClick="doDelete(44)"> Delete</a>       

</body>
</html> 
```

它可以在 Firefox 中找到，但在 IE9 中会引发以下错误。请指教。

> SCRIPT5007：属性“doDelete”的值为 null 或未定义，不是 Function 对象

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:47:15.973

不知道你是如何调用这个函数的，但到目前为止我可以建议的是，它`<script type="text/javascript" />`比`<script type="application/javascript" />`

# java - Java：如何打印矢量？

> ID：12453030
> 
> 赞同：0
> 
> 时间：2012-09-17T04:10:52.953
> 
> 标签：java, printing, vector

Java：如何打印矢量？

```
import java.util.Scanner;

public class Ed04VetorOrdenado {

    public static void main(String[] args) {
        Scanner entrada = new Scanner(System.in);
        int vet[] = new int[10];
        System.out.println("Digite 10 numeros:");
        for (int i = 0; i < vet.length; i++) {
            vet[i] = entrada.nextInt();
        }
        System.out.print("Vetor ordenado: ");
        ordenar(vet);
    }

    // Buble sort function
    static void ordenar(int[] v) {
        int troca;
        for (int i = 0; i < v.length; i++) {
            for (int j = i + 1; j < v.length; j++) {
                if (v[i] > v[j]) {
                    troca = v[j];
                    v[j] = v[i];
                    v[i] = troca;
                }
            }
            System.out.print(v[i] + ", ");
        }
    }
} 
```

我想在 FOR 之外打印。类似的

```
System.out.print(v); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T04:11:53.987

这是一个数组，而不是一个向量！但是，这是打印数组元素的方式：

```
System.out.print(Arrays.toString(v)); 
```

# java - Spring - JPA - 插入 - 不为具有默认抛出错误的字段传递值

> ID：12453031
> 
> 赞同：4
> 
> 时间：2012-09-17T04:10:58.340
> 
> 标签：java, spring, jpa, spring-data-jpa

表中的一些不可为空的字段具有默认值。通过 JPA 将新行插入表中时，我不想为这些字段传递任何值，以便它们获得默认值。但是，当通过 Spring JPA 存储库类插入新行时，出现无法插入空值的错误。我注意到 JPA 发送到数据库的插入语句列出了所有字段：

```
insert into table (field1, field2, field3) values ('abc',null,null); 
```

由于 field2 和 field3 指定了 null，因此未分配默认值，并且数据库抛出无法插入 null 值的错误。有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T05:20:52.517

如果要为数据库分配默认值。您不应该将它作为 NULL 插入，而是必须将其排除在外，并且不要插入它，这样做您可以使用`@Column(insertable = false)` 注释。

事实上，我认为当您使用 ORM 进行收集时，在数据库中分配默认值并不是一件好事。选择其他方式（例如[JPA 事件](http://en.wikibooks.org/wiki/Java_Persistence/Advanced_Topics#Events)）来启动 JAVA 中的所有值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T05:10:36.070

您可以尝试配置不应`insertable`保留的属性并将其从插入语句中排除。`@Column`

从文档 -`insertable : (Optional) Whether the column is included in SQL INSERT statements generated by the persistence provider.`

# android - 放大和缩小后获取图像的高度和宽度

> ID：12453050
> 
> 赞同：0
> 
> 时间：2012-09-17T04:14:39.553
> 
> 标签：android, imageview

我试图在放大和缩小后获取图像的高度和宽度。缩放效果后，有什么方法可以在 Android 中获取高度和宽度。我尝试了很多，但得到了图像的实际高度和宽度。

```
public class ImageZoomView extends View implements Observer {

    /** Paint object used when drawing bitmap. */
    private final Paint mPaint = new Paint(Paint.FILTER_BITMAP_FLAG);

    /** Rectangle used (and re-used) for cropping source image. */
    private final Rect mRectSrc = new Rect();

    /** Rectangle used (and re-used) for specifying drawing area on canvas. */
    private final Rect mRectDst = new Rect();

    /** The bitmap that we're zooming in, and drawing on the screen. */
    private Bitmap mBitmap;

    /** Pre-calculated aspect quotient. */
    private float mAspectQuotient;

    /** State of the zoom. */
    private ZoomState mState;

    // Public methods

    /**
     * Constructor
     */
    public ImageZoomView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    /**
     * Set image bitmap
     * 
     * @param bitmap The bitmap to view and zoom into
     */
    public void setImage(Bitmap bitmap) {
        mBitmap = bitmap;

        calculateAspectQuotient();

        invalidate();
    }

    /**
     * Set object holding the zoom state that should be used
     * 
     * @param state The zoom state
     */
    public void setZoomState(ZoomState state) {
        if (mState != null) {
            mState.deleteObserver(this);
        }

        mState = state;
        mState.addObserver(this);

        invalidate();
    }

    // Private methods

    private void calculateAspectQuotient() {
        if (mBitmap != null) {
            mAspectQuotient = (((float)mBitmap.getWidth()) / mBitmap.getHeight())
                    / (((float)getWidth()) / getHeight());
        }
    }

    // Superclass overrides

    @Override
    protected void onDraw(Canvas canvas) {
        if (mBitmap != null && mState != null) {
            final int viewWidth = getWidth();
            final int viewHeight = getHeight();
            final int bitmapWidth = mBitmap.getWidth();
            final int bitmapHeight = mBitmap.getHeight();

            final float panX = mState.getPanX();
            final float panY = mState.getPanY();
            final float zoomX = mState.getZoomX(mAspectQuotient) * viewWidth / bitmapWidth;
            final float zoomY = mState.getZoomY(mAspectQuotient) * viewHeight / bitmapHeight;

            Log.i("onDraw", "onDraw"+SimpleSeekBarListener.f);
            // Setup source and destination rectangles
            mRectSrc.left = (int)(panX * bitmapWidth - viewWidth / (zoomX * 2));
            mRectSrc.top = (int)(panY * bitmapHeight - viewHeight / (zoomY * 2));
            mRectSrc.right = (int)(mRectSrc.left + viewWidth / zoomX);
            mRectSrc.bottom = (int)(mRectSrc.top + viewHeight / zoomY);
            mRectDst.left = getLeft();
            mRectDst.top = getTop();
            mRectDst.right = getRight();
            mRectDst.bottom = getBottom();

            // Adjust source rectangle so that it fits within the source image.
            if (mRectSrc.left < 0) {
                mRectDst.left += -mRectSrc.left * zoomX;
                mRectSrc.left = 0;
            }
            if (mRectSrc.right > bitmapWidth) {
                mRectDst.right -= (mRectSrc.right - bitmapWidth) * zoomX;
                mRectSrc.right = bitmapWidth;
            }
            if (mRectSrc.top < 0) {
                mRectDst.top += -mRectSrc.top * zoomY;
                mRectSrc.top = 0;
            }
            if (mRectSrc.bottom > bitmapHeight) {
                mRectDst.bottom -= (mRectSrc.bottom - bitmapHeight) * zoomY;
                mRectSrc.bottom = bitmapHeight;
            }

            canvas.drawBitmap(mBitmap, mRectSrc, mRectDst, mPaint);
            double i1=bitmapHeight*mAspectQuotient;
            double i2=bitmapWidth*mAspectQuotient;

            Log.v("Image Height",i1+"");
            Log.i("Image Width",i2+"");

            Paint paint = new Paint();
            paint.setColor(Color.GREEN);
            paint.setStrokeWidth(3);

            canvas.drawRect(40,40, 80*SimpleSeekBarListener.f, 80*SimpleSeekBarListener.f, paint);

        }
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right, int bottom) {
        super.onLayout(changed, left, top, right, bottom);

        calculateAspectQuotient();
    }

    // implements Observer
    public void update(Observable observable, Object data) {
        invalidate();
    }

} 
```

# javascript - Node.js：计算文件中的行数

> ID：12453057
> 
> 赞同：44
> 
> 时间：2012-09-17T04:16:11.943
> 
> 标签：javascript, node.js

我有大文本文件，范围在`30MB`和之间`10GB`。如何使用 计算文件中的行数`Node.js`？

我有这些限制：

*   整个文件不需要写入内存
*   执行任务不需要子进程

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-17T05:16:46.180

不使用 wc 的解决方案：

```
var i;
var count = 0;
require('fs').createReadStream(process.argv[2])
  .on('data', function(chunk) {
    for (i=0; i < chunk.length; ++i)
      if (chunk[i] == 10) count++;
  })
  .on('end', function() {
    console.log(count);
  }); 
```

它更慢，但没有你期望的那么多 - 140M+ 文件需要 0.6 秒，包括 node.js 加载和启动时间

```
>time node countlines.js video.mp4 
619643

real    0m0.614s
user    0m0.489s
sys 0m0.132s

>time wc -l video.mp4 
619643 video.mp4
real    0m0.133s
user    0m0.108s
sys 0m0.024s

>wc -c video.mp4
144681406  video.mp4 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2017-01-03T09:10:02.780

我们可以使用[indexOf](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf)让 VM 找到换行符：

```
function countFileLines(filePath){
  return new Promise((resolve, reject) => {
  let lineCount = 0;
  fs.createReadStream(filePath)
    .on("data", (buffer) => {
      let idx = -1;
      lineCount--; // Because the loop will run once for idx=-1
      do {
        idx = buffer.indexOf(10, idx+1);
        lineCount++;
      } while (idx !== -1);
    }).on("end", () => {
      resolve(lineCount);
    }).on("error", reject);
  });
}; 
```

该解决方案的作用是使用 . 找到第一个换行符的位置`.indexOf`。它递增`lineCount`，然后找到下一个位置。第二个参数`.indexOf`告诉从哪里开始寻找换行符。这样我们就跳过了大块的缓冲区。while 循环将为每个换行符运行一次，加一。

我们让 Node 运行时为我们进行搜索，这在较低级别上实现并且应该更快。

`for`在我的系统上，这大约是在大文件（111 MB）的缓冲区长度上运行循环的两倍。

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2012-09-17T04:29:27.853

您可以按照评论建议使用`wc`

```
var exec = require('child_process').exec;

exec('wc /path/to/file', function (error, results) {
    console.log(results);
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-03-27T00:47:06.037

由于 iojs 1.5.0 有`Buffer#indexOf()`方法，用它来比较 Andrey Sidorov 的回答：

```
ubuntu@server:~$ wc logs
  7342500  27548750 427155000 logs
ubuntu@server:~$ time wc -l logs 
7342500 logs

real    0m0.180s
user    0m0.088s
sys 0m0.084s
ubuntu@server:~$ nvm use node
Now using node v0.12.1
ubuntu@server:~$ time node countlines.js logs 
7342500

real    0m2.559s
user    0m2.200s
sys 0m0.340s
ubuntu@server:~$ nvm use iojs
Now using node iojs-v1.6.2
ubuntu@server:~$ time iojs countlines2.js logs 
7342500

real    0m1.363s
user    0m0.920s
sys 0m0.424s
ubuntu@server:~$ cat countlines.js 
var i;
var count = 0;
require('fs').createReadStream(process.argv[2])
  .on('data', function(chunk) {
    for (i=0; i < chunk.length; ++i)
      if (chunk[i] == 10) count++;
  })
  .on('end', function() {
    console.log(count);
  });
ubuntu@server:~$ cat countlines2.js 
var i;
var count = 0;
require('fs').createReadStream(process.argv[2])
  .on('data', function(chunk) {
    var index = -1;
    while((index = chunk.indexOf(10, index + 1)) > -1) count++
  })
  .on('end', function() {
    console.log(count);
  });
ubuntu@server:~$ 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-02-28T02:04:43.490

如果您使用 Node 8 及更高版本，则可以使用此 async/await 模式

```
const util = require('util');
const exec = util.promisify(require('child_process').exec);

async function fileLineCount({ fileLocation }) {
  const { stdout } = await exec(`cat ${fileLocation} | wc -l`);
  return parseInt(stdout);
};

// Usage

async someFunction() {
  const lineCount = await fileLineCount({ fileLocation: 'some/file.json' });
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-08-29T13:57:31.077

这是另一种没有太多嵌套的方法。

```
var fs = require('fs');
filePath = process.argv[2];
fileBuffer =  fs.readFileSync(filePath);
to_string = fileBuffer.toString();
split_lines = to_string.split("\n");
console.log(split_lines.length-1); 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-06-07T21:54:06.377

```
var fs=require('fs');
filename=process.argv[2];
var data=fs.readFileSync(filename);
var res=data.toString().split('\n').length;
console.log(res-1);` 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-04-25T19:52:47.050

我发现的最佳解决方案是使用 promises、async 和 await。这也是一个如何等待履行承诺的例子：

```
#!/usr/bin/env node
const fs = require('fs');
const readline = require('readline');
function main() {
    function doRead() {
        return new Promise(resolve => {
            var inf = readline.createInterface({
                input: fs.createReadStream('async.js'),
                crlfDelay: Infinity
            });
            var count = 0;
            inf.on('line', (line) => {
                console.log(count + ' ' + line);
                count += 1;
            });
            inf.on('close', () => resolve(count));
        });
    }
    async function showRead() {
        var x = await doRead();
        console.log('line count: ' + x);
    }
    showRead();
}
main(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-11-25T19:22:17.497

您还可以使用 indexOf()：

```
var index = -1;
var count = 0;
while ((index = chunk.indexOf(10, index + 1)) > -1) count++; 
```

# java - String.Format 由于某种原因严重错位

> ID：12453067
> 
> 赞同：1
> 
> 时间：2012-09-17T04:17:35.000
> 
> 标签：java, user-interface, jtextarea, string.format

我习惯于使用 printf，但我的研究使我相信我可以使用 String.Format 在 JTextArea 中设置表格，并且它本质上是相同的。这是一个节奏游戏应用程序。我的代码是：

```
private final String HEADER = "%-10s%-15s%-90s%-9s%-6s%-9s%-7s%-6s%-9s";
...
ranks.setText("");
ranks.append(String.format(HEADER + "\n", "Rank", "Difficulty", "Song Name",     "Perfects", "Goods", "Averages", "Misses", "Boos", "MaxCombo"));
ranks.append(analyze.toString());
...
return String.format("%-10d%-15d%-90s%-9d%-6d%-9d%-7d%-6d%-9d\n ", rank, difficulty,   songName, perfects, goods, averages, misses, boos, maxCombo); 
```

对于数组中的每个组件，analyze.toString 返回显示的字符串。我的格式字符串是相同的，标题中的所有内容都是字符串，表中的大多数内容都是整数，所以我不知道为什么我的表看起来像这样：

![在此处输入图像描述](../Images/142c90eb04b7b3a68430dce78b9ec77a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T04:38:20.403

如评论中所述，您应该使用[固定宽度字体（或等宽字体）](http://en.wikipedia.org/wiki/Monospaced_font)来进行此类对齐工作。

```
JTextArea area = new JTextArea();
area.setFont(new Font("Monospaced", Font.PLAIN, 12)); 
```

或者如 Denis Tulskiy 所述，直接使用 JTable 组件。

# php - Apache error_log 中的 PHP 未定义变量

> ID：12453068
> 
> 赞同：1
> 
> 时间：2012-09-17T04:17:43.310
> 
> 标签：php

我得到了一系列：

“未定义的变量：/Library/WebServer/Documents/clients 中的 loginError ......”

我想阻止的 Apache error_log 中的条目。我有一个简单的 login.php 页面，如果登录时出现错误，则将 $loginError 变量设置为：

```
$loginError = '<p class="text-error">Login Error: '. $layouts->getMessage(). ' (' . $layouts->code . ')</p>'; 
```

如果没有错误记录，它会这样做：

```
$loginError = ''; 
```

然后我输出任何错误：

```
if ($loginError !== '') { //line 112
echo $loginError; /line 113
} 
```

我在上面的评论中得到了第 112 行和第 113 行的条目。有人告诉我如何防止条目出现吗？我正在使用 PHP 版本 5.3.6。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:23:06.007

它说你应该在使用之前检查它是否设置：

一种方法是使用`isset()`

```
if (isset($loginError) && $loginError !== '') {
  echo $loginError;
} 
```

但是在您的特定情况下，您也可以使用`!empty()`

```
if (!empty($loginError)) {
  echo $loginError;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:22:02.880

很难说没有看到你的代码的其余部分。跟踪您的逻辑以确保每个可能的分支都`loginError`在其执行的某个时间点进行初始化。更好的是，在执行逻辑*之前将其设置为默认值。*

# sql - 如何动态禁用 CodeIgniter SQL 错误消息

> ID：12453074
> 
> 赞同：0
> 
> 时间：2012-09-17T04:18:37.880
> 
> 标签：sql, sql-server, codeigniter

我在 SQL 命令之后休息我的 SQL Auto 增量值。但在 SQL 中，它就像一条消息一样抛出。但在 CodeIgniter 中得到类似错误消息。

这是我的代码

```
$sql = "DBCC CHECKIDENT (table_name, RESEED, 1)";
$res = $this->db->query($sql); 
```

如何重置我的自动增量值而不会出现错误或动态禁用 CI 错误消息。

# android - 如何设置 TimePicker 显示格式为 24 小时

> ID：12453075
> 
> 赞同：53
> 
> 时间：2012-09-17T04:18:42.203
> 
> 标签：android, android-layout

我在布局中创建了一个 TimePicker，我希望它以 24 小时格式显示时间。

你能帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-09-17T04:24:24.023

`TimePicker`是用于选择一天中时间的视图，可选择 24 小时或 AM/PM 模式。您可以将[`setIs24HourView(true)`](http://developer.android.com/reference/android/widget/TimePicker.html#setIs24HourView%28java.lang.Boolean%29)方法与[TimePicker 一起使用。](http://developer.android.com/reference/android/widget/TimePicker.html#setIs24HourView%28java.lang.Boolean%29)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-04-28T09:13:20.850

默认设置`TimePicker`为 24 小时模式并不总是一个好主意，因为许多国家/地区有不同的约定。对于这种情况，使用`DateFormat.is24HourFormat(getActivity())`.

您的最终代码可能看起来像`picker.setIs24HourView(DateFormat.is24HourFormat(this));`.

更多详情见：

*   [http://developer.android.com/guide/topics/ui/controls/pickers.html](http://developer.android.com/guide/topics/ui/controls/pickers.html)
*   [http://developer.android.com/reference/android/widget/TimePicker.html](http://developer.android.com/reference/android/widget/TimePicker.html)
*   [http://developer.android.com/reference/android/text/format/DateFormat.html](http://developer.android.com/reference/android/text/format/DateFormat.html)

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-08-08T12:16:40.707

如果您希望使用 24 小时格式的当前时间正确初始化 TimePicker，请使用以下命令：

```
import java.util.Calendar;

timePicker.setIs24HourView(true);
timePicker.setCurrentHour(Calendar.getInstance().get(Calendar.HOUR_OF_DAY)); 
```

否则，由于 Android 错误，选择器将以不正确的小时开始（2 而不是 14 等）。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-06-22T19:08:30.813

您只需要在充气后从视图中检索 TimePicker 实例，然后您就可以修改小部件。

ID 是任意的：

```
View v=getActivity().getLayoutInflater().inflate(R.layout.dialog_time, null);
TimePicker timePicker=(TimePicker)v.findViewById(R.id.dialog_time_timePicker);
timePicker.setIs24HourView(true); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-11-13T15:59:43.067

xml

```
<TimePicker
        android:layout_width="300dp"
        android:layout_height="300dp"
        android:id="@+id/timePicker" /> 
```

爪哇

```
TimePicker timePicker = (TimePicker) findViewById(R.id.timePicker);    
timePicker.setIs24HourView(true); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-17T04:28:59.330

默认情况下，它以 AM/PM 格式显示时间。如果要更改 24 小时格式的时间，则可以使用 setIs24HourView() 方法。请参阅此链接：[http ://www.androidaspect.com/2012/06/timepicker-view-tutorial.html](http://www.androidaspect.com/2012/06/timepicker-view-tutorial.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-07-25T23:42:35.290

我需要相同的应用程序来设置执行任务的持续时间。我发现我只需要扩展 TimePickerDialog 类，并在最后一个构造函数参数 boolean is24HourView 中传递 True。

```
public class DurationPickerDialog extends TimePickerDialog {

public DurationPickerDialog(Context context, TimePickerDialog.OnTimeSetListener callBack, int hourOfDay, int minute){
    super(context, callBack, hourOfDay, minute, true);
} 
```

然后你只需要将它创建为

```
TimePickerDialog durationPicker =  new DurationPickerDialog(getActivity(), this, hour, minute);
durationPicker.setTitle("Duration:"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-13T00:59:36.947

您只需要调用并将**true**发送到**setIs24HourView**函数。

```
TimePicker tpHourMin = (TimePicker) findViewById(R.id.timePicker);
tpHourMin.setIs24HourView(true); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-06-28T09:46:11.170

正如一些人已经提到的，只需将参数设置为 true 或 false。

timePicker.setIs24HourView(true);

您可以从这里 [http://www.ahotbrew.com/android-timepicker-example/找到包含源代码的完整示例下载](http://www.ahotbrew.com/android-timepicker-example/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-07-13T23:12:13.543

或者您让用户**自己决定**他想使用哪种格式。

在您的 MainActivity 中：

```
DialogFragment timePicker = new TimePickerFragment();
timePicker.show(getSupportFragmentManager(), "time picker");

   @Override
public void onTimeSet(TimePicker view, int hourOfDay, int minute) {

            TextView outputText= (TextView)findViewById(R.id.outputText);
            outputText.setText(hourOfDay + " : "+ minute);
} 
```

在一个新的 Java 类（TimePickerFragment）中：

```
public class TimePickerFragment extends DialogFragment {

@NonNull
@Override
public Dialog onCreateDialog(@Nullable Bundle savedInstanceState) {

    Calendar c = Calendar.getInstance();
    int hour = c.get(Calendar.HOUR_OF_DAY);
    int minute = c.get(Calendar.MINUTE);

    return new TimePickerDialog(getActivity(),(TimePickerDialog.OnTimeSetListener) getActivity(), hour, minute, android.text.format.DateFormat.is24HourFormat(getActivity()));

}} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-01-30T11:08:26.903

**对于时间选择器对话框**

Timepicker 对话框由 android 提供以选择时间。

Java 通过在 TimePickerDialog 构造函数中传递 is24HourView == true 来提供默认功能。

```
public TimePickerDialog(Context context, OnTimeSetListener listener, int hourOfDay, int minute,boolean is24HourView) {
        this(context, 0, listener, hourOfDay, minute, is24HourView);
    } 
```

传递 true 24 小时或传递 false 以设置 AM-PM 格式的时间选择器对话框。

**例如：（科特林）**

```
 private fun showTimePicker() {
        val cal = Calendar.getInstance()
        val dialog = TimePickerDialog(this, TimePickerDialog.OnTimeSetListener { view, hourOfDay, minute ->
            Log.e("Time :","$hourOfDay:$minute")
        }, cal.get(Calendar.HOUR_OF_DAY), cal.get(Calendar.MINUTE), true) //here pass true for 24hrs view else false for AM-PM(12hrs view)
        dialog.show()
    } 
```

# iphone - 如何从 NSData 读取字节

> ID：12453078
> 
> 赞同：14
> 
> 时间：2012-09-17T04:19:17.573
> 
> 标签：iphone, ios, ios5, ios4

谁能建议一种从中读取字节的方法（例如：`NSData`中的读取函数）`@interface` `NSInputStream``NSStream`

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-17T04:26:17.727

[如何读取 NSData 中的二进制字节？](https://web.archive.org/web/20130301082816/http://www.iphonedevsdk.com/forum/iphone-sdk-development/66099-how-to-read-binary-bytes-in-nsdata.html)可以帮助您：

```
NSString *path = @"…put the path to your file here…&quot;;
NSData * fileData = [NSData dataWithContentsOfFile: path];
const char* fileBytes = (const char*)[fileData bytes];
NSUInteger length = [fileData length];
NSUInteger index;

for (index = 0; index<length; index++) {
   char aByte = fileBytes[index];
   //Do something with each byte
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-17T04:40:41.227

如果需要读取接口，还可以`NSInputStream`从对象创建：`NSData`

```
NSData *data = ...;
NSInputStream *readData = [[NSInputStream alloc] initWithData:data];
[readData open]; 
```

但是，您应该知道`initWithData` *复制*数据的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-10T18:51:37.990

最简单的方法之一是使用[NSData getBytes:range:](https://developer.apple.com/documentation/foundation/nsdata/1407224-getbytes?language=objc)。

```
NSData *data = ...;
char buffer[numberOfBytes];
[data getBytes:buffer range:NSMakeRange(position, numberOfBytes)]; 
```

其中位置和长度是您要在 NSData 中读取的位置，长度是您要读取的字节数。无需复制。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-04T19:00:25.273

Alex[已经提到](https://stackoverflow.com/questions/12453078/how-to-read-bytes-from-nsdata/41079097#41079097)NSData getBytes:range: 但也有[NSData getBytes:length:](https://developer.apple.com/documentation/foundation/nsdata/1411450-getbytes?language=objc)从第一个字节开始。

```
NSData *data = ...;
char buffer[numberOfBytes];
[data getBytes:buffer length:numberOfBytes]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-11T10:08:11.293

可以这样做..不要忘记在使用后释放字节​​数组。

```
NSData* dat = //your code
NSLog(@"Receive from Peripheral: %@",dat);
NSUInteger len = [dat length];
Byte *bytedata = (Byte*)malloc(len);
[dat getBytes:bytedata length:len];
int p = 0;
while(p < len)
{
    printf("%02x",bytedata[p]);
    if(p!=len-1)
    {
     printf("-");
    }//printf("%c",bytedata[p]);
    p++;
}
printf("\n");
// byte array manipulation

free(bytedata); 
```

# c++ - 在 C++ 中，为什么我不必包含任何内容来使用 sqrt() 函数？

> ID：12453079
> 
> 赞同：1
> 
> 时间：2012-09-17T04:19:46.477
> 
> 标签：c++, include, sqrt, cmath

我只是在学习 C++。使用 g++ 版本 3.2.3 编译，“g++ hworld.cpp”：

```
double sqrt(double);
int main(){
    double x = sqrt(1515.15);
    return 0;
} 
```

编译得很好，但是如果我们用“sqrtfoo”替换 sqrt，编译器会说 sqrtfoo 不能用作函数。我以为我必须包括 cmath，但我想不是吗？有人可以在任何包含之前解释我的程序可以访问的内容吗？相比之下，gcc 不允许我这样做，说“未定义对 'sqrt' 的引用”。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:21:23.213

您不需要包含`cmath`，因为您的代码中已经有一个原型`sqrt`，即第一行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:11:07.040

正如现有答案所解释的那样，`double sort(double)`提供了一个原型让编译器知道该函数存在。

但是您还提到这在 GCC 下不起作用。当您构建 C 或 C++ 程序时，源代码将被编译为对象格式。然后将目标文件链接在一起以形成可执行文件。

要查看此操作，请尝试

```
gcc -c hello.c 
```

这告诉 GCC 编译 (-c) 源文件 hello.c。假设 hello.c 存在并且没有错误，您将在当前目录中找到 hello.o。现在试试

```
gcc -o hello hello.o 
```

这告诉 GCC 将 hello.o 与适当的系统库链接，并生成一个名为“hello”的输出文件。如果 hello.c 使用数学函数，您还需要在数学库中链接：

```
gcc -o hello hello.o -lm 
```

“-l”用于告诉 gcc 包含额外的库（超出默认的“libc”C 库）。“m”指的是“libm”，它是包含`sqrt`. 如果您的程序仅使用一个源文件，通常会隐式要求 GCC 在一个命令中进行编译和链接：

```
gcc -o hello hello.c -lm 
```

现在回答你的问题。GCC 不会编译上面的代码，因为你没有要求它链接到数学库中。但是 g++ 没问题。Stack Overflow 上已经有一个非常[相似的问题。](https://stackoverflow.com/questions/1033898/why-do-you-have-to-link-the-math-library-in-c)根据其接受的答案，

> C++ 运行时 libstdc++ 需要 libm，因此如果您使用 GCC (g++) 编译 C++ 程序，您将自动获取 libm 链接。

由于 "libstdc++" 是 C++ 语言运行时库，因此它默认包含在 g++ 中。由于它依赖于 libm，因此链接器会在生成最终二进制程序时自动加载 libm。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T04:25:16.597

头文件只包含声明（签名），并且您在第一行中包含了一个（原型：）`double sqrt(double)`。

编译器编译它就好了，因为您已经声明在某个地方定义了这个函数。编译后发生的步骤负责实际查找该函数定义。它被称为`linking`，并且在该阶段链接器查找这些定义。万一`sqrtfoo`它找不到任何东西，而万一`sqrt`它在某个标准库中找到它（我不知道这里的细节）。

# xcode - 如何检查与 UIImageView 的触摸接近度？

> ID：12453081
> 
> 赞同：0
> 
> 时间：2012-09-17T04:20:29.133
> 
> 标签：xcode, uiimageview, sensors, uitouch, proximity

有谁知道我将如何在 Xcode 中检查与 UIImageView 的触摸接近度？我正在尝试检查触摸是否在围绕屏幕移动的 UIImageView 的 25 像素内。任何帮助，将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:38:05.327

首先，您可以接触到：

```
UITouch *touch = [[event allTouches] anyObject]; 
```

接下来，您要检查相对于图像视图的 locationInView。

```
CGPoint touchlocation = [touch locationInView:self]; // or possibly myimage instead of self. 
```

接下来，CGRectContainsPoint 返回一个布尔值。它应该是：

```
if ( CGRectContainsPoint( imgView.frame, touchlocation ) ) {
   // inside imgView
} else {
   // outside imgView Now we will found out is it within proximityImgViewRect
   CGRect *proximityImgViewRect = CGRectMake( imgView.frame.origin.x-25,imgView.frame.origin.y - 25, imgView.frame.size.width+50,imgView.frame.size.height+50); 
   if ( CGRectContainsPoint( proximityImgViewRect.frame, touchlocation ) ) {
     // inside proximityImgViewRect
   } else {
    //outside proximityImgViewRect
   }
} 
```

# symfony - 从登录表单获取监听器中的帖子参数

> ID：12453082
> 
> 赞同：0
> 
> 时间：2012-09-17T04:20:31.453
> 
> 标签：symfony

在我的第一个 Symfony2 应用程序中，用户必须提交三个值才能登录。用户名、密码和域。它们在登录表单上并根据 Firebug 提交，但应该创建令牌的侦听器无法获取值。我曾希望它会像这样简单：

```
class UMListener implements ListenerInterface
{
    protected $securityContext;
    protected $authenticationManager;

    public function __construct(SecurityContextInterface $securityContext, AuthenticationManagerInterface $authenticationManager)
    {
        $this->securityContext = $securityContext;
        $this->authenticationManager = $authenticationManager;
    }

    public function handle(GetResponseEvent $event)
    {
        $request = $event->getRequest();
        $token->setUser($request->get('_username'));
        $token->password   = $request->get('_password');
        $token->domain    = $request->get('_domain');
    } 
```

我检查了参数是 _username、_password 和 _domain，当我打印 $request 时，我在任何地方都看不到它们：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:26:09.370

当下一次谷歌搜索找到答案时，你不要只是讨厌它。改变

```
$token->domain    = $request->get('_domain'); 
```

到

```
$token->domain    = $request->get('_domain', null, true); 
```

成功了

# algorithm - 在已经指定运行时间时解决算法中的问题，例如 theta(nlogn)

> ID：12453083
> 
> 赞同：1
> 
> 时间：2012-09-17T04:20:45.623
> 
> 标签：algorithm, computer-science, big-o

这学期我上过算法课程，我正在尝试解决 CLRS 中的一个问题

**2.3-7 描述一个 theta(n lg n) 时间算法，给定一个由 n 个整数组成的集合 S 和另一个整数 x，确定 S 中是否存在两个和正好为 x 的元素。**

我不知道如何解决这个问题。我正在尝试使用合并排序算法来解决它，因为它在 nlogn 时间内完成，但我不知道这是否是正确的方法。

谁能告诉我在已经指定运行时间时求解算法的一般方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T04:25:33.990

我怀疑此类问题是否有任何通用方法，例如在任何“提议算法”任务中。然而，所需的运行时可以提示要使用的“构建块”（例如存在`log`通常表示需要树或排序数组）。例如，您可以查看[标记 wiki 中的“big-o”](https://stackoverflow.com/tags/big-o/info)，以获取每个所需运行时的算法示例。

针对您的问题的算法想法：

首先，对数组进行排序（`O(n lg n)`）；然后为`y`数组的每个元素检查元素`x-y`是否存在（同样`O(n lg n)`，因为数组已排序）。

# php - 在 php 中，“return false”在 echo 语句之后有什么作用吗？

> ID：12453089
> 
> 赞同：3
> 
> 时间：2012-09-17T04:21:23.640
> 
> 标签：php, return, echo

当我在 php 中显示错误消息时，我通常会这样做，

```
if($query){
    // Success code
}else{
    // Error message
    $error_msg = "An error occurred.";
    return false;
} 
```

我`$error_msg`在前端 html 页面中回显变量。我只是想知道`return false`在变量之后是否真的做了任何事情，还是把它放在那里毫无意义？

我正在尝试优化我的代码，只是想确保！提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:28:43.300

是的，它告诉函数停止执行，并返回一个值“false”。所以它做了一些事情。是否有用取决于您的编程。

如果在 echo 之后没有可执行行，并且函数不需要返回值，那么它实际上不会做任何有用的事情。

不过，如果确实让读者更清楚“这是一个停止/故障点”。有一天，您可能想要真正捕获它是有效还是失败-因此将其保留会更清楚。您也可以不假思索地扩展功能，并且需要重新安装返回 - 再次，将其保留会使它更容易。

相反，还有 C/Assembler 时代的旧编程风格，即所有函数只有一个入口和一个出口点来帮助垃圾收集。不是 PHP 的要求，但这种风格确实使它变得漂亮和整洁。在这种情况下，设置返回值（如果需要）并在最后返回。

所以，选择适合你风格的 - 但要提前考虑。使所有内容都保持原始和简约（即在您并不严格需要时放弃）可能并不总是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:27:56.907

return false 的目的是让您可以轻松地测试函数以查看它是否有效 - 而无需进入任何潜在的错误消息等。

可以通过以下方式使用为失败返回 false 的函数：

```
if(someFunction($var))
{
    do stuff for function working...
}
else
{
    // function failed. Do other stuff.
} 
```

一个函数在失败时返回 false 也很直观。它可以像这样进一步使用：

```
$foo=someFunction($var);
if($foo)
{
    again, function has worked.
}//... etc 
```

虽然相同的函数返回*函数失败*，但不能以直观的方式使用。

# c# - 从 C# 调用 C++ dll 函数

> ID：12453094
> 
> 赞同：1
> 
> 时间：2012-09-17T04:22:12.457
> 
> 标签：c#, c++, dll

我有一个解决方案，它有一个带有函数的 c++ dll 项目（MsgHook.cpp）：-

```
BOOL f_closeSEB()
{
    logg(fp, "\n\n");
    //TerminateProcess(hPiProcess->hProcess,0);
    SendMessage(hWndCaller,WM_DESTROY,NULL,NULL);
    logg(fp, "   SEB exit sequence, destroy window\n");
    //logg(fp, "Leave LLKeyboardHook() and return -1\n\n");
    return -1;
} 
```

我正在尝试通过以下方式从我的 c# Web 服务项目中调用此函数：-

```
using System.Runtime.InteropServices;

    namespace closeSEB
    {
        partial class closeSEBService
        {
            /// <summary> 
            /// Required designer variable.
            /// </summary>
            private System.ComponentModel.IContainer components = null;

            public enum commands
            {
                CloseIt=255
            }

            /// <summary>
            /// Clean up any resources being used.
            /// </summary>
            /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
            protected override void Dispose(bool disposing)
            {
                if (disposing && (components != null))
                {
                    components.Dispose();
                }
                base.Dispose(disposing);
            }

            [DllImport("MsgHook.dll", SetLastError = true)]
            public static extern void runRTS(string serviceName);

             protected override void OnCustomCommand(int command)
            {
              base.OnCustomCommand(command);
              if (command == (int)commands.CloseIt)
              {
                //Code to call msghook closeSEB function
                  runRTS("closeSEBService");
                  f_closeSEB(); 
              }
            }
            #region Component Designer generated code

            /// <summary> 
            /// Required method for Designer support - do not modify 
            /// the contents of this method with the code editor.
            /// </summary>
            private void InitializeComponent()
            {
                // 
                // closeSEBService
                // 
                this.ServiceName = "Service1";

            }

            #endregion

        }
    } 
```

但是在编译器中，我收到一个错误，即名称 f_closeSEB 在当前上下文中没有退出。这不是通过 C# 调用 DLL 文件中定义的函数的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:39:13.970

你必须确保两件事：

1.  如下所示的示例中正确编写 DLLImport

    [DllImport("MsgHook.dll", SetLastError = true)] public static extern bool f_closeSEB();

2.  确保根据 C# 程序的需要为 x86 或 x64 编译 DLL“MsgHook.dll”。.NET 支持**任何 cpu**，但 C++ 不支持，因此请确保所需的类型。

[有关详细信息，请参阅有关使用 P/Invoke 在 C# 中调用 Win32 DLL](http://msdn.microsoft.com/en-us/magazine/cc164123.aspx)的 MSDN 文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:41:10.877

尝试声明

```
extern "C" BOOL f_closeSEB()
// function code goes here 
```

在 MsgHook.cpp 文件中。这样，`f_closeSEB`就可以将其分解为 .dll 文件。

您还可以使用某些工具（如 CFF Explorer）检查生成的文件，以查看 .dll 的导出部分是否包含`f_closeSEB`.

MsgHook.cpp 中的代码看起来像 C 代码，因此您可以将“.cpp”文件重命名为“.c”并将其编译为 C 源代码。

# python - Python str.find() 覆盖 Element.find()，如何规避？

> ID：12453095
> 
> 赞同：1
> 
> 时间：2012-09-17T04:22:23.300
> 
> 标签：python

我正在编写一些使用`Element.find()`Python`xml.etree.ElementTree`模块中的方法的代码。但是，我发现一旦我开始使用`str.replace()`，Python 就会将我的调用解释为`object.find()`as`str.find()`而不是`Element.find()`.

我需要我的代码`Element`从 XML 文件中的各种对象中获取文本，并且在某些情况下我需要使用`str`方法对其进行修改。在不改变口译员的解释方式的情况下如何做到这一点`object.find()`？这是我的代码：

```
import xml.etree.ElementTree as xml
import re
import json

pattern = re.compile('[a-z,0-9,-]+')
c_pattern = re.compile('\[caption[^\]]+\]')
c2_pattern = re.compile('\[/caption\]')

tree = xml.parse('file.xml')
root = tree.getroot()

for item in root.iter('item'):
    if item.find('{http://wordpress.org/export/1.2/}post_type').text == 'post':
        t = item.find('{http://purl.org/rss/1.0/modules/content/}encoded').text
        print item.find
        try:
            t = t.encode('utf-8')

            o_cap = re.findall(c_pattern,t)
            e_cap = re.findall(c2_pattern,t)

            for item in o_cap:
                t = t.replace(item,'') 
            for item in e_cap:
                t = t.replace(item,'')           
        except:
            t = 'None'
        print item.find
        title = item.find('title').text 
```

第一条`print`语句返回`<bound method Element.find of <Element 'item' at 0x2a7a7d0>>`，而第二条语句返回`<built-in method find of str object at 0x2b56e00>`。

我试过 subclassing `Element`，但我不知道如何使`Element`我的 XML 文件中的节点成为新子类的对象。我也尝试过简单地定义一个引用该方法的新方法`Element.find()`，但是当我尝试使用它时，解释器只是告诉我一个`Element`对象没有我的用户定义名称的方法。

我想到的另一种方法是某种

```
from xml.etree.ElementTree import Element.find() as Element.some_other_name() 
```

但这不起作用（我尝试了一堆语法变体，但它们也不起作用）。有谁知道我可以/应该做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T04:46:45.710

你在破坏这个名字`item`。尝试将内部循环中的变量名称切换为其他名称，例如`poop`.

```
for poop in o_cap:  
    t = t.replace(poop,'') 
for poop in e_cap:
    t = alvin.replace(poop,'') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T04:29:40.787

没有任何代码，我只能猜测。

被调用的方法总是来自你所指的对象。如果您希望`Element.find()`运行，则必须有一个`Element`对象。相反，您有一个`str`对象，来自`replace()`.

一种方法可以是`Element`用`replace()`结果替换 的内容，然后像原来的一样处理它。

# iphone - 为什么我的对象没有通过 segue 正确传递？

> ID：12453096
> 
> 赞同：4
> 
> 时间：2012-09-17T04:22:34.283
> 
> 标签：iphone, objective-c, ios, xcode, ipad

假设我有 2 个控制器，BarViewController 和 FooViewController。

FooViewController 有一个名为 imageView 的 UIImageView 的出口：

```
@property (nonatomic, weak) UIImageView *imageView; 
```

BarViewController 有一个 UIButton 按钮的出口。BarViewController 有一个从这个按钮到 FooViewController 的 segue，称为 BarToFooSegue（在故事板中完成）。

当我运行以下代码并在 FooViewController.imageView.image 上调用 NSLog 时，结果为 nil，并且我的图像不会显示。为什么会这样？

```
// code in BarViewController
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if([segue.identifier isEqualToString:@"BarToFooSegue"]){
        NSURL *photoUrl = @"http://www.randurl.com/someImage"; // assume valid url
        UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:photoUrl]];
        UIImageView *imageView = [[UIImageView alloc] initWithImage:image];

        [segue.destinationViewController setImageView:imageView];
    }
} 
```

我尝试将 FooViewController.imageView 设置为强而不是弱，但问题仍然存在：

```
@property (nonatomic, strong) UIImageView *imageView; 
```

运行我的调试器，我注意到 FooViewController 中的 imageView 在 prepareForSegue: 中正确更新：但随后又被重新更新为一些新分配的 imageView，其中 @property image 设置为 nil。我不确定控制流的哪一部分导致了这种情况，因为它发生在用汇编语言编写的行中。

我通过向 FooViewController 添加 UIImage 属性使我的代码正常工作：

```
@property (nonatomic, strong) UIImage *myImage; 
```

并在 BarViewController 中更改 prepareForSegue: 以传递图像而不是 imageView：

```
// code in BarViewController
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if([segue.identifier isEqualToString:@"BarToFooSegue"]){
        NSURL *photoUrl = @"http://www.randurl.com/someImage"; // assume valid url
        UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:photoUrl]];

        [segue.destinationViewController setMyImage:image];
} 
```

并修改 viewWillAppear: 在 FooViewController:

```
- (void)viewWillAppear:(BOOL)animated{
    [self.imageView setImage:self.myImage];
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T05:18:44.847

在设置图像之前调用`[segue.destinationViewController view];`，这将导致加载视图层次结构，然后设置您的插座。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T04:30:30.487

在`prepareForSegue`出口尚未定义 - 他们是零。您正在向 nil 发送消息，这非常好，因此不会给您错误，但在这种情况下，它可能会导致意外行为。您可以通过创建一个临时 UIImage 属性来解决它，并在 viewDidLoad 或 viewWillAppear 中将您的图像视图设置为该图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T05:36:31.500

如果您必须直接设置 imageView.image，我同意@ikuragames 的回答。但通常情况下，我将 ViewController 的视图层次结构保密。

我认为将 UIImage 属性添加到 Foo 并不难看。我认为它实际上比@ikuragames 正确的解决方案更漂亮。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-17T04:36:39.920

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if([segue.identifier isEqualToString:@"BarToFooSegue"]){
        NSURL *photoUrl = @"http://www.randurl.com/someImage"; 
        UIImage *image = [UIImage imageWithData:[NSData dataWithContentsOfURL:photoUrl]];

        FooViewController *vc = [segue destinationViewController];
        vc.myImage = image;   
 }
} 
```

# java - 我对用于存储数据库内容的 listview 有疑问

> ID：12453101
> 
> 赞同：0
> 
> 时间：2012-09-17T04:23:08.937
> 
> 标签：java, android, android-listview

在我的应用程序中使用了简单的列表视图，用于显示数据库中的字符串内容。

如果我点击下一个项目，我有一个名为 next 的按钮，它会以某种颜色突出显示，它可以工作，但问题是如果项目超过 7 个项目，然后单击“下一步”按钮会强制关闭。有什么问题。请给我解决它的想法。

编辑：

我使用简单的列表视图在其上显示项目，这是因为列表视图到达列表视图的末尾（底部）还是其他问题？你能告诉我我遇到的这个问题有什么问题吗？

我的代码用于“下一步”按钮：

```
else if(v.getId()==R.id.buttonBookmarkrNext)
    {
        if((pos+1) == length)
        {   
            //if no of files exist in a arraylist and current position of a file matches do the following
            pos = 0;
            audiofile=(String) lv.getItemAtPosition(pos);
            Toast.makeText(this, " next file1",Toast.LENGTH_SHORT).show();
            lv.getChildAt(length-1).setBackgroundColor(0x00000000);
            lv.getChildAt(pos).setBackgroundColor(Color.LTGRAY);
        }
        else if(pos<length)
        {
            //if no of files exist in a arraylist(lenght) are greater than current position(pos) of a file  do the following
            pos ++;
            //audioDetails = (ArrayList<String[]>) lv.getItemAtPosition(pos);
            audiofile=(String) lv.getItemAtPosition(pos);
            Toast.makeText(this, " next file",Toast.LENGTH_SHORT).show();
            lv.getChildAt(pos-1).setBackgroundColor(0x00000000);
            lv.getChildAt(pos).setBackgroundColor(Color.LTGRAY);
            String str=(String) lv.getItemAtPosition(pos);
            //Log.e("next file end",str);
            Toast.makeText(this, " end file"+str,Toast.LENGTH_SHORT).show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:27:45.573

你的问题出在这里...

```
else if(pos<length)    // pos should be less than length-1, 
        {

            pos ++;

        .......
        .......

        } 
```

**试试这个方法...**

```
else if(pos<(length-1))     
        {

            pos ++;

        .......
        .......

        } 
```

# wordpress - htaccess 中的 Wordpress 自定义 URL 重写条目

> ID：12453103
> 
> 赞同：0
> 
> 时间：2012-09-17T04:23:33.050
> 
> 标签：wordpress, .htaccess, url-rewriting

我正在尝试做的简单的事情 - 只是升级了一个网站以使用 wordpress，特别是一个页面我不想 301 并希望保留其原始网址

原来的网址是

/freerecords.htm

这是我添加到我的 htaccess 中的内容

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^/freerecords.htm [NC]

RewriteRule . /index.php [L]
RewriteRule ^/freerecords.htm$ /index.php\?page_id=793 [L,NC] 
```

问题是以上不起作用-我想我已经很接近了...

我不想使用内置 php url 重写功能的 wordpress - 我只想在 htaccess 中执行此操作

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:54:02.713

如果你想要一个 301 重定向，你需要在 wordpress 相关规则之前发生这个：

```
RewriteRule ^freerecords.htm /index.php?page_id=793 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

这使用 301 重定向重定向浏览器。像所有重定向一样，浏览器的 URL 地址栏现在会显示`/index.php?page_id=793`.

如果您不想要 301 重定向，那么您的旧规则中有一个前导斜杠，这可能会使其无法正常工作。您的最后一行在正则表达式中有一个前导斜杠，因此它永远不会匹配任何内容：

```
# was here---v
RewriteRule ^freerecords.htm$ /index.php\?page_id=793 [L,NC] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:15:19.257

而不是直接从 .htaccess 更改使用管理面板中的永久链接设置来进行 URL 重写

在进行永久链接更改之前，还要检查 .htaccess 文件的权限。

或者您也可以从管理员端提供的主题文件编辑器更改 wordpress .htaccess 文件

[http://davidwalsh.name/wordpress-htaccess](http://davidwalsh.name/wordpress-htaccess)

# c++ - 在 C++ 中序列化，在 python 中反序列化？

> ID：12453105
> 
> 赞同：5
> 
> 时间：2012-09-17T04:23:43.577
> 
> 标签：c++, python, linux, protocol-buffers

我有一个 C++ 应用程序，它像这样使用 Google Protobuf 序列化一个结构

```
int len = mdd.ByteSize();
char* buf = (char *)malloc(len);
mdd.SerializeToArray(buf, len); 
```

我想从 python 中反序列化：

```
import  marketdata_pb2
...
md = marketdata_pb2.MarketDataDepth()
#what goes here? I don't see a marketdata_pb2.parsefromarray() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T04:29:03.003

你正在寻找`md.ParseFromString(some_string_of_bytes)`. 在 Python 2.x 中，“一些字节串”是一个`str`.

[https://developers.google.com/protocol-buffers/docs/pythontutorial](https://developers.google.com/protocol-buffers/docs/pythontutorial)

# .net - 在这种情况下我可以使用起订量吗？

> ID：12453107
> 
> 赞同：3
> 
> 时间：2012-09-17T04:23:49.727
> 
> 标签：.net, unit-testing, mocking, moq-3

我有什么可能的解决方法来使用 Moq 模拟这个对象。返回的错误消息是：“非虚拟（在 VB 中可覆盖）成员上的设置无效：p => p.Certificate.SubjectName.Name”

```
 var st = new Mock<X509SecurityToken>();
        st.SetupGet(p => p.Certificate.SubjectName.Name).Returns("test1");
        var target = new X509IssuerNameRegistry("test1", "test2");

        var actual = target.GetIssuerName(st.Object);

        Assert.AreEqual<string>("test1", actual, "Actual security token did not equal expected security token"); 
```

注意：我正在尝试模拟[X509SecurityToken](http://msdn.microsoft.com/en-us/library/vstudio/system.identitymodel.tokens.x509securitytoken%28v=vs.100%29.aspx)。这是正在测试的类：

公共类 X509IssuerNameRegistry : IssuerNameRegistry { 只读列表 _trustedSubjectNames = new List();

```
public X509IssuerNameRegistry(params string[] trustedSubjectNames)
{
    _trustedSubjectNames = new List<string>(trustedSubjectNames);
}

public override string GetIssuerName(SecurityToken securityToken)
{
    var x509Token = securityToken as X509SecurityToken;
    if (x509Token != null)
    {
        if (_trustedSubjectNames.Contains(x509Token.Certificate.SubjectName.Name))
        {
            return x509Token.Certificate.SubjectName.Name;
        }
    }
    throw new SecurityTokenException("Untrusted issuer.");
} 
```

}

任何工作轮次（使用起订量）还是我应该寻找另一个模拟框架来完成这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:35:16.987

不，Moq（就像任何继承类一样）不能覆盖非虚拟方法，因此除非您可以使 Name 成为虚拟属性（通过更改或包装类），否则 Moq 不能模拟它。

如果可能的话，我建议您将您的属性更改为虚拟的，因为这将允许您使用任何模拟框架。据我所知，只有 3 个可以模拟非虚拟方法，它们都不是免费的；

*   [`Fakes`](http://msdn.microsoft.com/en-us/library/hh549175.aspx)VS2012附带的微软（我相信只有终极版[）](http://msdn.microsoft.com/en-us/library/hh549175.aspx)
*   [Typemock 隔离器](http://www.typemock.com/)。
*   [Telerik JustMock](http://www.telerik.com/products/mocking.aspx)（不是免费版）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:34:36.333

您可以寻找一些允许您“破解”无法简单模拟的代码的框架（即不包含虚拟方法/不是接口），但这可能是矫枉过正（并且某些选项不是免费的，例如[TypeMock Isolator](http://www.typemock.com/isolator-product-page) for例子）。

一种更简单的方法可能是 abstract `X509SecurityToken`，例如：

```
interface ISecurityToken
{
    string SubjectName { get; }
    // ...
} 
```

然后，实现一个包装器，它也实现了上面指定的接口：

```
class SecurityToken : ISecurityToken
{
    X509SecurityToken token;
    public SecurityToken(X509SecurityToken token)
    {
        this.token = token;
    }
    public string SubjectName { get { return token.SubjectName.Name; } }
} 
```

然后，在整个代码中，您应该使用`ISecurityToken`interface 而不是`X509SecurityToken`，这将是相当简单的模拟。

# java - 扫描仪输入流未定义..？

> ID：12453113
> 
> 赞同：0
> 
> 时间：2012-09-17T04:24:55.537
> 
> 标签：java

我只是直接从我的 Uni 提供的讲义中复制并粘贴了这段代码：

```
import java.util.*;
public class Echo {
public static void main (String[] args) {
  Scanner console = new Scanner(System.in);
  System.out.println("Input a line of text");
  String message = console.nextLine();
  System.out.println("Your input was: "
       + message); 
```

它一直给我错误：线程“main”java.lang.Error中的异常：未解决的编译问题：构造函数Scanner（InputStream）在Scanner.main（Scanner.java：4）未定义

我认为它指的是（System.in）；部分代码，但我不知道如何修复它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:26:31.243

您将文件命名为 Scanner.java，但您应该将其命名为 Echo.java。Java 要求文件名和公共类名相同。

具体错误：javac 认为您正在定义一个 Scanner 类，该类与`java.util.Scanner`. 如果你解决了这个问题，它会抱怨类/文件名不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:45:07.980

进口`java.util.Scanner;`

```
import java.util.Scanner;

public class Echo {
public static void main (String[] args) {
Scanner console = new Scanner(System.in);
System.out.println("Input a line of text");
String message = console.nextLine();
System.out.println("Your input was: "
   + message); 
```

# asp.net-mvc-3 - mvc 3.0 中的 URL 路由

> ID：12453114
> 
> 赞同：1
> 
> 时间：2012-09-17T04:25:04.893
> 
> 标签：asp.net-mvc-3, model-view-controller, routing

我想为我的网站提供以下特定的 URL 路由

[http://www.MyWebsite?Region=US&Area=South](http://www.MyWebsite?Region=US&Area=South)

基于传递的 Region 和 Area 查询字符串参数，我想重定向到特定的控制器操作。

问题：

1.  Url 路由应该是什么？
2.  创建一个重定向到特定操作的通用控制器操作是否可以在这里工作？

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:34:34.387

如果您想直接从根处执行查询字符串，那么您需要以这种方式在全局中映射路由。在您的操作中，您可以访问上下文并从中获取查询字符串。下面是我做 twitter 风格用户名的例子，但想法是一样的。

```
routes.MapRoute("UserSettings",
          "{username}/settings",
          new { controller = "Home", action = "Settings", username = "" },
          new { username = new NotNullOrEmptyConstraint() }
        ); 
```

公共类 NotNullOrEmptyConstraint : IRouteConstraint {

```
 public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        try
        {
            return !String.IsNullOrEmpty(values["username"].ToString());
        }
        catch (Exception)
        {
            return false;
        }
    }
}

 public ActionResult Settings(string username){
 } 
```

# c++ - 尽管跨多个 .cpp 文件需要信息，但 C++ 一次读取头文件

> ID：12453118
> 
> 赞同：0
> 
> 时间：2012-09-17T04:25:55.150
> 
> 标签：c++, class, variables, static, header

我的朋友和我正在一起学习 C++，我们有一个问题。我们创建了一个头文件，其中包含一个使用静态变量和静态函数的类，这些函数和变量需要被总共 2+ 个 .cpp 文件访问，但是因为我们在头文件中初始化静态变量，所以头文件可以只能读取一次（由于静态变量初始化）。

我们尝试只在 MainFunction.cpp 文件中包含头文件，但如果我们这样做，其他 .cpp 文件将无法使用静态变量和函数。在（当前）需要函数/变量的两个 .cpp 文件中包含头文件会导致大量链接错误，因为静态变量被多次初始化。

这是包含类和静态变量初始化的头文件：

```
//PlayerStatistics.h
// Classes
class PlayerStatistics
{
public:
    // Functions To Change Player Statistics
    static void SetStats(short int HitPoints, short int MagickaPoints, short int Fatigue, short int Damage, short int Defense, short int Dodge, short int Block, short int SpellCastChance);
    static void SetLevel(short int Experience, short int Level);
    static void SetExperience(short int Experience);

    // Player Statistics
    static short int HitPoints;
    static short int MagickaPoints;
    static short int Fatigue;
    static short int Damage;
    static short int Defense;

    // Chance Based System Player Statistics (Relies on Fatigue Level)
    static short int Dodge;
    static short int Block;
    static short int SpellCastChance;

    static short int Experience;
    static short int Level;
};

// STATIC VARIABLES
short int PlayerStatistics::HitPoints = 20;
short int PlayerStatistics::MagickaPoints = 20;
short int PlayerStatistics::Fatigue = 20;
short int PlayerStatistics::Damage = 20;
short int PlayerStatistics::Defense = 20;
short int PlayerStatistics::Dodge = 20;
short int PlayerStatistics::Block = 20;
short int PlayerStatistics::SpellCastChance = 20;
short int PlayerStatistics::Experience = 0;
short int PlayerStatistics::Level = 1; 
```

以及需要访问的 2 个 .cpp 文件：

# 1：

```
//PlayerCharcter.cpp
void PlayerStatistics::SetLevel(short int Experience, short int Level)
{
Experience = Experience;
Level = Level;
}

void PlayerStatistics::SetStats(short int HitPoints, short int MagickaPoints, short int Fatigue, short int Damage, short int Defense, short int Dodge, short int Block, short int SpellCastChance)
{
HitPoints = HitPoints;
MagickaPoints = MagickaPoints;
Fatigue = Fatigue;
Damage = Damage;
Defense = Defense;
Dodge = Dodge;
Block = Block;
SpellCastChance = SpellCastChance;
}

void PlayerStatistics::SetExperience(short int Experience)
{
Experience = PlayerStatistics::Experience;
}

void AddExperience()
{
// This is a Testing Function to test the Level Up system and should be removed once Creatures
// are added to the game, or it can be edited to include proper experience points given for
// killing curtain enemies.

short int GetExperienceNumber;
std::cout << "How many experience points do you want? \n";
std::cin >> GetExperienceNumber;

PlayerStatistics::Experience = (PlayerStatistics::Experience += GetExperienceNumber);
std::cout << GetExperienceNumber << " Experience Points Added! \n \n \n \n \n";
} 
```

# 2：

```
//WordBank.cpp
        std::cout << "\n \n \n \n \n \n \n \n \n \n \n \n"
        << PlayerName << "'s Character Sheat! \n \n \n"
        << "Level: " << PlayerStatistics::Level << "\n"
        << "Experience: " << PlayerStatistics::Experience << "\n \n \n"
        << "Health: " << PlayerStatistics::HitPoints << "\n"
        << "Magicka: " << PlayerStatistics::MagickaPoints << "\n"
        << "Fatigue: " << PlayerStatistics::Fatigue << "\n"
        << "Attack: " << PlayerStatistics::Damage << "\n"
        << "Defense: " << PlayerStatistics::Defense << "\n"
        << "Dodge Skill: " << PlayerStatistics::Dodge << "\n"
        << "Block Skill: " << PlayerStatistics::Block << "\n"
        << "Spell Casting Skill: " << PlayerStatistics::SpellCastChance << "\n"
        << "\n \n \n \n \n \n \n" << "To Continue Type Any Key In And Hit Enter" << std::endl; 
```

我们需要在这 2 个 .cpp 文件中#include 这个头文件（计划中还有 2 个也需要访问这个类），但实际上只读取一次头文件（这样我们就可以避免更多地读取静态变量初始化一次）。我们试图避开构造函数（主要是为了便于使用静力学，也为了我们的学习目的）。我们已经阅读了有关 Header Guards 的信息，但我们无法弄清楚如何让它们解决这个问题。

您的任何提示/建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:30:44.223

您可能应该只在头文件中声明变量（这些应该是外部的，而不是静态的、全局变量或具有外部链接的静态成员变量）。所以保持静态成员变量声明，如（在你的`PlayerStatistics.h`头文件中）

```
class PlayerStatistics {
   /// ....
   static short int HitPoints;
}; 
```

（它是一个带有外部链接的静态成员变量声明）

然后你可以把定义像

```
short int PlayerStatistics::HitPoints = 20;
short int PlayerStatistics::MagickaPoints = 20;
short int PlayerStatistics::Fatigue = 20; 
```

在一个单独的实现文件中（通常通常包含一个`main`，例如 some `main.cpp`）。

您可能应该在头文件中放置[包含保护](http://en.wikipedia.org/wiki/Include_guard)，即以

```
#ifndef PLAYER_STATISTICS_INCLUDED
#define PLAYER_STATISTICS_INCLUDED 
```

并以

```
#endif /*PLAYER_STATISTICS_INCLUDED*/ 
```

我强烈建议您研究一些现有的 C++ 自由软件应用程序的源代码（例如来自[http://freecode.com/](http://freecode.com/)或其他自由软件集合）。这会教给你很多东西。

# jpa - JPA 复合主键生成

> ID：12453122
> 
> 赞同：0
> 
> 时间：2012-09-17T04:26:22.273
> 
> 标签：jpa, key, composite

我有简单的实体类（省略不相关的方法）：

```
@Entity
@Table(name="CONNECTIONS")
public class Connection implements Serializable {
      @Id private Long id_track;
      @Id private Long id_carrier;
      @Id private Date date_out;                       
      @Id private Time time_out;        
      private Date date_in;
      private Time time_in;
      private Double price;
      ...
} 
```

我希望 JPA（在我的例子中是 Eclipse 实现）使用由**id_track**、**id_carrier**、**date_out**和**time_out**列组成的复合主键创建表连接，但它添加了额外的列**id**（整数类型）我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:26:53.907

我无法重现这一点。您确定 JPA 正在创建您的表吗？还要确保您已经重新编译并重新部署了您的代码。

也许启用日志记录，并包括您正在使用的 JPA 提供程序和版本。

你在用玻璃鱼吗？

# java - CountDownTimer 格式毫秒

> ID：12453125
> 
> 赞同：1
> 
> 时间：2012-09-17T04:26:56.517
> 
> 标签：java, time, timer, format

K 所以我正在用 CountDownTimer 做一个计时器。这是我正在做的第一个应用程序，我已经遇到了问题。首先我的计时器跳过了数字 14？不知道为什么。其次，我不知道如何设置正确的格式。"mm:ss" 我最大的问题是设置格式。我需要它，所以当我离开 8 秒时，它显示为 00:08 等，当我离开 15 分钟时，它显示为 1:15，而不是 00:75 或 1:75。试图弄清楚这一点是漫长的一天。提前致谢。

```
private void walk() {
                new CountDownTimer(15000, 1000) {

                    @Override
                    public void onFinish() {
                        lapCounter++;
                        lapNumber.setText("Lap Number: " + lapCounter);
                        run();
                    }

                    @Override
                    public void onTick(long millisUntilFinished) {
                        text.setText("Time left:" + millisUntilFinished/1000);

                    }

                }.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:31:12.807

您可能想使用[joda-time](http://joda-time.sourceforge.net/)，请参阅此[帖子](https://stackoverflow.com/questions/8026136/find-remaining-day-and-time-using-jodatime)了解详细信息

# c# - 从 web 服务创建后无法打开文本文件

> ID：12453129
> 
> 赞同：1
> 
> 时间：2012-09-17T04:27:30.667
> 
> 标签：c#, asp.net, web-services

在 c# webservice 代码中创建文件后，我无法打开文件。该目录最初不存在。所以程序创建了目录和文件。然后尝试打开文件写入一行。但它无法打开文件。错误是文件在另一个进程中打开。

我试图从 Windows 资源管理器中打开该文件。文件打开，但错误消息仍然出现。我试图删除文件夹 C:\Test，它说文件打开是在**WebDev.WebDevServer40.exe**

请提供任何帮助。

```
[WebMethod]
    public string saveFileUploaderName(string name)
    {
        string path = "c:\\Test";
        string filename = "Test.txt";
        string completeFileName = Path.Combine(path,filename);
        if(!File.Exists(completeFileName))
        {
            Directory.CreateDirectory(path);
            File.Create(completeFileName);
        }
        StreamWriter writer = File.AppendText(completeFileName);
        writer.WriteLine(name);
        writer.Flush();
        writer.Close();
return "success";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:33:13.183

File.Create 返回一个流，但您正在丢弃它。所以（我认为！）您要么需要使用返回的流，要么在尝试打开同一个文件的新流之前显式关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:44:50.933

您需要关闭文件，尝试：

```
File.Create(completeFileName).Close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T04:45:21.567

请改用[File.AppendAllText](http://msdn.microsoft.com/en-us/library/ms143356.aspx)。

如果文件不存在，这将创建文件。

你的代码很简单

```
[WebMethod]
public string saveFileUploaderName(string name)
{
    string path = "c:\\Test";
    string filename = "Test.txt";
    string completeFileName = Path.Combine(path,filename);
    File.AppendAllText(completeFileName, name);
    return "success";
} 
```

# version-control - 在特定版本上放置警告标志

> ID：12453130
> 
> 赞同：1
> 
> 时间：2012-09-17T04:27:45.563
> 
> 标签：version-control, cvs

我有 4 个版本的文件`1.21, 1.22, 1.23`和`1.24`. 经过一个月的时间，我开始知道该版本`1.22`并且`1.23`其中有一些错误。现在我不希望任何人使用这些版本。解决它的一种方法是删除这些版本，但我不想删除它们。我只是想知道一种方法，这样如果有人签出那些过时的版本，他们应该会收到一条警告或自定义消息，“不要使用这个版本，这个版本有一些问题”。

有没有办法做到这一点？让我知道，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:44:51.133

我不是 CVS 专家，但您可以标记错误的修订，然后编写某种预结帐挂钩（请参阅[此问题](https://stackoverflow.com/questions/4092834/can-i-create-a-pre-checkout-cvs-hook)）。

不过，我不确定如何实施它。或者如果它可以工作，就此而言。

# c - 具有分散聚集的 MPI 矩阵乘法

> ID：12453134
> 
> 赞同：0
> 
> 时间：2012-09-17T04:28:22.393
> 
> 标签：c, mpi, matrix-multiplication, scatter

我正在尝试在 C 中使用 MPI 进行矩阵乘法，我们必须做一个顺序版本和一个并行版本。我的并行版本没有给出正确的答案，我不知道为什么。我认为我没有向流程发送正确的通信，但我不能确定。教授只是查看了不同的发送/接收/收集等消息，但并没有真正深入细节......我看过很多不同的例子，但没有一个完整的，也没有使用分散/收集的。如果有人可以查看我的代码并告诉我是否有任何内容出现在他们身上，我将不胜感激。我很确定我的问题出在分散/收集消息或 c 矩阵的实际计算中。

```
#define N 512

#include <stdio.h>
#include <math.h>
#include <sys/time.h>
#include <stdlib.h>
#include <stddef.h>
#include "mpi.h"

print_results(char *prompt, float a[N][N]);

int main(int argc, char *argv[])
{
    int i, j, k, rank, size, tag = 99, blksz, sum = 0;
    float a[N][N], b[N][N], c[N][N];
    char *usage = "Usage: %s file\n";
    FILE *fd;
    double elapsed_time, start_time, end_time;
    struct timeval tv1, tv2;

    MPI_Init(&argc, &argv);
    MPI_Comm_size(MPI_COMM_WORLD, &size);
    MPI_Comm_rank(MPI_COMM_WORLD, &rank);

    if (argc < 2) {
            fprintf (stderr, usage, argv[0]);
            return -1;
    }

    if ((fd = fopen (argv[1], "r")) == NULL) {
            fprintf (stderr, "%s: Cannot open file %s for reading.\n",
                                    argv[0], argv[1]);
            fprintf (stderr, usage, argv[0]);
            return -1;
    }

    for (i = 0; i < N; i++)
            for (j = 0; j < N; j++)
                    fscanf (fd, "%f", &a[i][j]);

    for (i = 0; i < N; i++)
            for (j = 0; j < N; j++)
                    fscanf (fd, "%f", &b[i][j]);

    MPI_Barrier(MPI_COMM_WORLD);

    gettimeofday(&tv1, NULL);

    MPI_Scatter(a, N*N/size, MPI_INT, a, N*N/size, MPI_INT, 0,
                                                    MPI_COMM_WORLD);
    MPI_Bcast(b, N*N, MPI_INT, 0, MPI_COMM_WORLD);

    if (rank != 0) {
            for (i = 0; i < N; i++)
            {
                    for (j = 0; j < N; j++)
                    {
                            for (k = 0; k < N; k++)
                            {
                                    sum = sum + a[i][k] * b[k][j];
                            }
                            c[i][j] = sum;
                            sum = 0;
                    }
            }
    }

    MPI_Gather(c, N*N/size, MPI_INT, c, N*N/size, MPI_INT, 0,
                                                     MPI_COMM_WORLD);
    MPI_Finalize();

    gettimeofday(&tv2, NULL);

    elapsed_time = (tv2.tv_sec - tv1.tv_sec) + ((tv2.tv_usec - tv1.tv_usec)/1000000.0);

    printf ("elapsed_time=\t%lf (seconds)\n", elapsed_time);

    print_results("C = ", c);
}

print_results(char *prompt, float a[N][N])
{
    int i, j;

    printf ("\n\n%s\n", prompt);
    for (i = 0; i < N; i++) {
            for (j = 0; j < N; j++) {
                    printf(" %.2f", a[i][j]);
            }
            printf ("\n");
    }
    printf ("\n\n");
} 
```

更新部分代码：

```
for (i=0;i<size; i++)
            {
                    if (rank == i)
                    {
                            for (i = rank*(N/size); i < (rank*(N/size)+(N/size)); i++)
                            {
                                    for (j = rank*(N/size); j < (rank*(N/size)+(N/size)); j++)
                                    {
                                            for (k = rank*N; k < rank*N+N; k++)
                                            {
                                                    sum = sum + a[i][k] * b[k][j];
                                            }
                                            c[i][j] = sum;
                                            sum = 0;
                                    }
                            }
                    }
            } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:19:03.997

您的代码中的第一个问题是它`size`可能不会划分`N`。这意味着分散`size`长度的数据包`N*N/size`不一定发送整个矩阵。这可能是最难做对的地方。

正如 Greg Inozemtsev 指出的那样，第二个问题是您从计算中排除了进程 0，尽管它负责矩阵的一部分。

还有一个问题是所有的 I/O 操作（在开始时读取系数并在结束时输出结果）只能由进程 0 完成。

另一方面，您应该在前向声明和定义中指定函数的返回类型（`void`在这种情况下） 。`print_result`

# php - php中子类构造函数如何与父类构造函数交互？

> ID：12453143
> 
> 赞同：2
> 
> 时间：2012-09-17T04:29:29.047
> 
> 标签：php, mysql, class, pdo

现在，我正在开发两个用于与 MySQL 数据库交互的类——一个扩展了另一个。他们来了：

```
class DB_MySQL {

    protected $dbuser;
    protected $dbpass;
    protected $dbhost;
    protected $dbname;
    protected $dbh; // Database connection handle

    public function __construct($dbuser, $dbpass, $dbhost, $dbname)
    {
        $this->dbuser = $dbuser;
        $this->dbpass = $$dbpass;
        $this->dbhost = $dbhost;
        $this->dbname = $dbname;
    }

    //Used to create connections - almost always called by execute()
    protected function connect()
    {
        try
        {
            $this->dbh = new PDO("mysql:host=$dbhost;dbname=$dbname",$dbuser,$dbpass);
        }
        catch(PDOException $e)
        {
            print "Error!: ".$e->getMessage()."<br/>";
            die();
        }
    } 
```

和子类：

```
class CheckOut extends DB_MySQL{

     function __construct() 
    {
        parent::__construct();
    }
} 
```

我刚开始写它们，所以对它们来说还没有“肉”。如果有人看到任何重大问题或任何建议，请不要犹豫指出。

不过，我的问题是子构造函数将如何与父构造函数交互。我的计划是简单地创建一个 CheckOut 对象而不启动父对象。可以看出，我的父构造函数有四个值。那么，我是否必须在子构造函数中重新定义这些值？说清楚，我的意思是：

```
class CheckOut extends DB_MySQL{

     function __construct($dbuser, $dbpass, $dbhost, $dbname) 
    {
        parent::__construct($dbuser, $dbpass, $dbhost, $dbname);
    }
} 
```

当然还要定义这些变量。或者我可以在创建对象时添加这些值并将其隐式传递吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:33:49.293

如果子类的构造函数不做任何其他事情，那么你可以省略构造函数。

只需以下即可：

```
class CheckOut extends DB_MySQL{
} 
```

但是如果子类的构造函数需要做一些其他的工作，是的，你需要做：

```
class CheckOut extends DB_MySQL{

    public function __construct($dbuser, $dbpass, $dbhost, $dbname) 
    {
        parent::__construct($dbuser, $dbpass, $dbhost, $dbname);
        do_some_other_work();
    }
} 
```

使用时，双方都需要调用：

```
$checkout = new CheckOut($dbuser, $dbpass, $dbhost, $dbname); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:34:13.183

您在问题中提供的代码是在这种情况下执行此操作的正确方法（假设您想在构造函数中执行其他操作）：

```
class CheckOut extends DB_MySQL{
    function __construct($dbuser, $dbpass, $dbhost, $dbname) 
    {
        parent::__construct($dbuser, $dbpass, $dbhost, $dbname);
    }
} 
```

否则（如果你不想在构造函数中做任何其他事情）你不需要重写构造函数。

```
class CheckOut extends DB_MySQL{

    // no constructor, Parent's constructor is called by default

} 
```

# javascript - 如何制作图像：小时放大，大时保持中心

> ID：12453146
> 
> 赞同：0
> 
> 时间：2012-09-17T04:30:08.753
> 
> 标签：javascript, html, css, styles

我有一个具有设定宽度和高度的图像容器（一个 div）。

现在我从后端获得了一个图像 url，我需要将它放入容器中。

当图像小于容器时，我需要将其放大以填满容器。当图像大于容器时，我需要将其居中放置在容器中。

这可以用纯 CSS 完成吗？还是我需要使用 JavaScript 来做某事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:03:17.173

在图像上怎么样`min-width:100px`，其中 div 的宽度为 100px。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:07:34.390

您将需要混合使用 css 和 javascript，这是我为您创建的示例：

[http://jsfiddle.net/7fUxw/1/](http://jsfiddle.net/7fUxw/1/)

# java - 如何通过java实现按键记录

> ID：12453156
> 
> 赞同：2
> 
> 时间：2012-09-17T04:31:38.150
> 
> 标签：java, keylistener, keylogger

> **可能重复：**
> [在 Java 中的另一个窗口上操作时如何记录击键？](https://stackoverflow.com/questions/2010657/how-do-you-record-keystrokes-when-operating-on-another-window-in-java)

尝试在操作系统上获取所有击键。有任何想法吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-17T05:02:17.617

Yeah possibly u should get the keystrokes of the users through the use of `currentTimeMillis` method or so in java in any of the `keyPressed()` or `keyReleased()` methods in java.Then save those time recordings in any variable get the time difference and then compare it with the keystrokes stored in database with a particular threshold.It should work then.During the recording phase make the user type the intended filed 5-6 times, take the keystrokes recording of the user and then save its mean in the database and compare it with the current keystrokes of the user while he tries to log in.

# regex - 使用 Visual Studio 或 VS Code 删除文本中的空行

> ID：12453160
> 
> 赞同：167
> 
> 时间：2012-09-17T04:32:48.307
> 
> 标签：regex, visual-studio, visual-studio-2010, visual-studio-code, line

如何在 Visual Studio 中删除空行？

* * *

## 回答 #1

> 赞同：191
> 
> 时间：2012-12-21T09:22:53.990

由于 Visual Studio 2012 更改了其正则表达式语法，Ala 的原始答案在 VS 2012 中转换为以下内容：

**删除单个空行**

老的：

```
^:b*$\n 
```

新的：

```
^(?([^\r\n])\s)*\r?$\r?\n 
```

Visual Studio 2013（感谢 BozoJoe 和 Joe Johnston）：

```
^\s*$\n 
```

**删除双空行**

老的：

```
^:b*\n:b*\n 
```

新的：

```
^(?([^\r\n])\s)*\r?\n(?([^\r\n])\s)*\r?\n 
```

从你的舌头上滚下来。

[这](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.110%29.aspx "这里")是来自 MSDN 的转换表。

* * *

## 回答 #2

> 赞同：131
> 
> 时间：2012-09-17T04:32:48.307

它非常有用，特别是如果您想安排或比较代码，感谢回答这个问题的人，我从[这里](http://wblo.gs/VGx)得到了答案，并想与 Stackoverflow 分享：

**Visual Studio** (Visual Studio Code) 可以使用正则表达式删除替换操作中的空行。

*   点击`Ctrl`- `H`（快速替换）

*   勾选“使用正则表达式”

*   在查找中指定`^$\n`

*   在替换框中删除所有内容。

*   点击“全部替换”

所有空行都将被删除。

空行的正则表达式包括

行首`^`

行结束`$`

越线`\n`

请注意，通常在 Windows 中，行尾由 2 个字符表示[crlf](/questions/tagged/crlf "显示标记为“crlf”的问题") - 回车（CR，ASCII 13，`\r`）换行（LF，ASCII 10，`\n`）。

一个正则表达式，用于删除/不是*真正*空白的空白行（即它们有/没有空格）： `^:b*$\n`

要删除双线： `^:b*\n:b*\n`替换为：`\n`

*** 对于 Visual Studio 2013 及更高版本：***

```
^\s*$\n 
```

对于双线：

```
^(?([^\r\n])\s)*\r?\n(?([^\r\n])\s)*\r?\n 
```

请参阅下面@lennart 的答案中的 VS2012 及更高版本的正则表达式语法更新

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-10-12T13:00:20.287

**使用 Visual Studio 2017 及更高版本**

在 **当前文档中**

使用快捷方式

*   打开 **工具**>**选项**或按`Alt`+ `T`+`O`
*   在**环境**选项卡 >**键盘下**
*   搜索“ **DeleteBlank** ”并选择`Edit.DeleteBlankLines`
*   添加一个新的快捷方式，例如`Ctrl`+ `D`, `Ctrl`+`E`
*   **分配**> **确定**

#### **选择所有文本并点击快捷方式**

[![在此处输入图像描述](../Images/b7b8ea4b607f68080fcc37ae53b3e47a.png)](https://i.stack.imgur.com/h3kUk.png)

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-09-22T19:14:45.300

在 Visual Studio 2013（版本 12.0.20623.01）中，我使用此正则表达式删除了空行。`^\r\n`在屏幕中，您可以看到棕色方块表示的匹配行。

![Visual Studio 2013 替换空行](../Images/b9ac998b45f920ee695993659af88b72.png)

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2015-01-06T16:13:57.803

在 VS 2012 中测试以允许纯换行。

```
^\s*$\n 
```

hth

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2018-09-24T20:56:48.003

我正在使用 Visual Studio 2017，在我尝试之前，上述方法均不适用于我`\n\r`

脚步：

1.  Ctrl + H（打开查找和替换）
2.  选择使用正则表达式 (Alt + E)
3.  进入`\n\r`“查找...”输入
4.  按更换

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-02-22T08:37:44.307

要使用 VS2012 删除两个或更多相邻的空行，请使用以下命令：

```
^(?([^\r\n])\s)*\r?$\r?\n^(?([^\r\n])\s)*\r?$\r?\n 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-05-13T15:41:45.240

安装[CodeMaid](http://www.codemaid.net/)并点击`Ctrl+M, Space`清理代码。（它也会格式化代码，例如 Format Document `Ctrl+E, D`）。您可以从解决方案资源管理器中清理更多文件。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-04-01T19:58:50.867

删除双行：^:b*\n:b*\n 替换为：\n

来源： http: [//geekswithblogs.net/mnf/archive/2008/03/04/remove-empty-lines-in--text-using-visual-studio.aspx](http://geekswithblogs.net/mnf/archive/2008/03/04/remove-empty-lines-in--text-using-visual-studio.aspx)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-01-13T09:55:56.760

**VS 2019**

1.  打开替换框：`Ctrl`+`H`
2.  打开正则表达式：`Alt`+`E`
3.  寻找：`^\s*$\n`
4.  替换：（留空）
5.  全部替换： `Alt`+`A`
6.  关闭正则表达式：`Alt`+`E`
7.  隐藏替换框：`Esc`
8.  格式化文档：`Ctrl`+`K`然后`Ctrl`+`D`
9.  如果您曾经用力过猛，请更换键盘

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-09-07T01:35:48.833

在 VS 2012 中，用于查找和替换所有空行的正则表达式字符串是 ^(?([^\r\n])\s)\r?\n

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-01-08T14:04:08.110

`Ctrl`+ `K`, `Ctrl`+`D`自动格式化当前文档并删除代码中不必要的空间。如果您正在寻找什么，它有助于使您的代码保持可读性。

# c - 如何在编译时检查 `typeof` 的 void 值？

> ID：12453165
> 
> 赞同：10
> 
> 时间：2012-09-17T04:33:05.523
> 
> 标签：c, types, void, c-preprocessor, compile-time

假设我想要一个适用于任何类型的 C 宏。我正在使用 GCC 编译器 (>= 4.6) 并且可以使用 GNU99 宏。

```
//code...
any_type_t *retVal = function_that_runs_very_long_time(a, b, &&c, **d, &e, *f);
//other code... 
```

TIMER 宏的用法可以看起来像这样

```
//code...
any_type_t *retVal = 
    TIMER(
          function_that_runs_very_long_time(a, b, &&c, **d, &e, *f),
          "TIMING FOR VALUE <%d, %d>", a, b
         );
//other code... 
```

因此 TIMER 必须返回给定函数的值并打印其运行的持续时间。`void`具有返回类型的函数存在问题。

我显然可以有两个宏，如 TIMER_TYPE 和 TIMER_VOID，但我想使用一个单独的对任何返回值的计时函数。

谢谢你的建议。

* * *

此 TIMER 宏的编辑示例

```
#define TIMER(expr, fmt_msg, ...)                           \
({                                                          \
    struct timeval before, after;                           \
    uint64_t time_span;                                     \
    int time_span_sec, time_span_usec;                      \
    gettimeofday(&before, NULL);                            \
    typeof(expr) _timer_expr__ = (expr);                    \ // <- static if?
    gettimeofday(&after, NULL);                             \
    time_span = (after.tv_sec * 1000000 + after.tv_usec)    \
              - (before.tv_sec * 1000000 + before.tv_usec); \
    time_span_sec  = time_span / 1000000;                   \
    time_span_usec = time_span % 1000000;                   \
    TRACE(fmt_msg "\n%s : %d.%d seconds",                   \
          #expr, time_span_sec, time_span_usec, ...);       \
    _timer_expr__;                                          \
}) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-16T11:37:26.287

多么有趣的问题，赞！

经过几次实验，我找到了一个使用GCC[`__builtin_types_compatible_p`和`__builtin_choose_expr`](http://gcc.gnu.org/onlinedocs/gcc/Other-Builtins.html)内在函数的解决方案。

## `__builtin_types_compatible_p`

引用 GCC 手册：

> 内置功能：`int __builtin_types_compatible_p (type1, type2)`
> 
> 您可以使用内置函数`__builtin_types_compatible_p`来确定两种类型是否相同。
> 
> 如果类型和（它们是类型，不是表达式）`1`的非限定版本兼容，则此内置函数返回，否则返回。**此内置函数的结果可用于整数常量表达式。**`type1``type2``0`
> 
>  **此内置函数忽略顶级限定符（例如`const`，, `volatile`）。例如，`int`等价于`const int`。**

 **所以这就是我们如何检查“ `void`ness”的方法。

```
#define __type_is_void(expr) __builtin_types_compatible_p(typeof(expr), void) 
```

## `__builtin_choose_expr`

> 内置功能：`type __builtin_choose_expr (const_exp, exp1, exp2)`
> 
> 您可以使用内置函数`__builtin_choose_expr`根据常量表达式的值来评估代码。此内置函数返回`exp1`if `const_exp`，它是一个整数常量表达式，非零。否则返回`exp2`。
> 
> 这个内置函数类似于`? :`C 中的运算符，只是**返回的表达式的类型不受提升规则的影响。此外，内置函数不会计算未选择的表达式**。例如，如果`const_exp`计算结果为 true，`exp2`即使有副作用也不计算。
> 
> **如果`exp1`返回，则返回类型与`exp1`' 类型相同。同样，如果`exp2`返回，其返回类型与 相同`exp2`。**

所以`__builtin_choose_expr`内在的东西就像在编译时评估的“静态开关”。

## 准备

我不会在此处粘贴您的`TIMER`宏，但我认为它能够将其拆分为两个版本：一个用于 void `expr`，另一个用于其余版本。这里只是评估表达式并产生相同类型结果的存根。

```
#define __DO(expr) \
    ({ typeof(expr) __ret; __ret = (expr); __ret; })

#define __DO_VOID(expr) \
    (void) (expr) 
```

## 天真的解决方案

现在我们可以根据表达式的实际类型在两个实现之间静态切换。但实际上天真的解决方案是行不通的，见下文。

```
#define DO(expr) \
    __builtin_choose_expr(__type_is_void(expr), \
        __DO_VOID(expr), \
        __DO(expr))  # won't work 
```

尝试通过 void 表达式编译此代码会出现以下错误：

```
test.c:28:9: error: variable or field ‘__ret’ declared void
test.c:28:9: error: void value not ignored as it ought to be 
```

虽然`__DO_VOID`被选中，但会`__DO`产生错误。手册中描述了此行为：

> ...未使用的表达式（`exp1`或`exp2`取决于 的值`const_exp`）可能仍会产生语法错误。这可能会在未来的修订版中发生变化。

## 工作解决方案

诀窍是用一些非 void 值替换原始 void`expr`以便能够编译`__DO`案例（当为 void 时，这无论如何都是死代码`expr`）。

```
#define __expr_or_zero(expr) __builtin_choose_expr(__type_is_void(expr), 0, (expr))

#define DO(expr) \
    __builtin_choose_expr(__type_is_void(expr), \
        __DO_VOID(expr), \
        __DO(__expr_or_zero(expr))) # works fine! 
```

就是这样！以下是 Ideone 的完整源代码：http: [//ideone.com/EFy4pE](http://ideone.com/EFy4pE)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T05:25:28.510

你能接受“这不可能”的答案吗？

不是关于从宏返回的部分。但是关于有条件地测试 expr 的返回类型的部分。

实际上，您要求的是以下内容：

假设不是一些名为“is_expr_type_void(expr)”的神奇检查，而是在调用时简单地传递一个 1 或一个 0，以在宏的以下变体中指示 is_void 或 !is_void：

```
#define TIMER(is_void, expr, fmt_msg, ...)                  \
({                                                          \
    struct timeval before, after;                           \
    uint64_t time_span;                                     \
    int time_span_sec, time_span_usec;                      \
    gettimeofday(&before, NULL);                            \
    if (is_void)                                            \
        (expr)                                              \
    else                                                    \
        typeof(expr) _timer_expr__ = (expr);                \ // <- static if?
    gettimeofday(&after, NULL);                             \
    time_span = (after.tv_sec * 1000000 + after.tv_usec)    \
              - (before.tv_sec * 1000000 + before.tv_usec); \
    time_span_sec  = time_span / 1000000;                   \
    time_span_usec = time_span % 1000000;                   \
    TRACE(fmt_msg "\n%s : %d.%d seconds",                   \
          #expr, time_span_sec, time_span_usec, ...);       \
    if (!is_void)                                           \
        _timer_expr__;                                      \
}) 
```

这根本行不通。预处理器将在所有情况下为该 if-else 条件创建代码，包括 void 和非 void 函数调用。并且双方都可以很好地编译非 void 函数。但是当使用 void 函数调用 TIMER 时，编译器总是会阻塞条件的“else”部分……尽管代码永远不会被调用。

（现在，如果存在一个非常聪明的编译器，它既可以识别它是死代码，又可以在将其标记为编译时错误之前将其删除，那么你会很幸运！但我不认为 gcc 4.6 是这么聪明……）

这为您留下了#define 中的#if (is_void) 条件的首选选项。但这根本是不允许的。因为，正如[这个答案](https://stackoverflow.com/a/301889/774691)在尝试回答有关条件预处理的类似问题时指出的那样，预处理器不是[图灵完备的](http://en.wikipedia.org/wiki/Turing_completeness)。

所以……尽管您希望拥有一个宏，但我认为您最简单的答案是为 void 函数创建一个，为具有返回值的函数创建一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-19T16:34:58.407

只要你有`typeof`and `_Generic`，你也可以做到没有`__builtin_types_compatible_p`or `__builtin_choose_expr`。

需要注意的是，`_Generic`不会让你匹配`void`所以而不是匹配`Expr`反对`void`，匹配`(typeof(Expr)*){0}`反对`void*`。

下面是[eldar-abusalimov](https://stackoverflow.com/users/545027/eldar-abusalimov)示例修改为使用`_Generic`代替`__builtin_types_compatible_p`and `__builtin_choose_expr`：

```
#include <stdio.h>
#define __type_is_void(expr) _Generic((typeof(expr)*){0}, void*:1, default:0)
#define __expr_or_zero(expr) _Generic((typeof(expr)*){0}, void*:0, default:(expr))

#define DO(expr) \
    _Generic((typeof(expr)*){0}, \
        void*:__DO_VOID(expr), \
        default:__DO(__expr_or_zero(expr)))

#define __DO(expr) \
    ({ typeof(expr) __ret; puts("do nonvoid"); __ret = (expr); __ret; })

#define __DO_VOID(expr) \
    (void)({ puts("do void"); (void)(expr); })

void foo(void) { }
int bar(void) { return 1; }

int main(void) 
{
    DO(foo());
    DO(bar());
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-19T11:51:53.890

如果您确实需要从宏返回，请改用**内联**函数。**

# javascript - 使用 jQuery 基于所选值调用 keydown 事件

> ID：12453166
> 
> 赞同：0
> 
> 时间：2012-09-17T04:33:07.050
> 
> 标签：javascript, jquery, client-side, jquery-events, onkeydown

我只想根据用户从下拉列表中的选择输入文本或不输入数字（如果用户选择客户代码或费率请求 ID，则文本框仅为数字，如果是客户代码可以写字母）。这是我编写但无法正常工作的代码，有什么帮助吗？ [jsfiddle代码](http://jsfiddle.net/reguapo/BAAGK/3/)

```
<select id="test" class="target">
<option value="custName">Customer Name</option>
<option value="custCode">Customer Code</option>
<option value="rateReqId">Rate Request Id</option>
</select>
<input id="target" type="text" /> 
```

Javascript代码是：

```
// Numeric only control handler
jQuery.fn.ForceNumericOnly =

function() {
    return this.each(function() {
        $(this).keydown(function(e) {
            var key = e.charCode || e.keyCode || 0;
            // allow backspace, tab, delete, arrows, numbers and keypad numbers ONLY
            return (
            key == 8 || key == 9 || key == 46 || (key >= 37 && key <= 40) || (key >= 48 && key <= 57) || (key >= 96 && key <= 105));
        });
    });
};

$('#test').change(function() {
    var val = this.value;
    switch (val) {
        case "custName":
            $("#target").unbind('ForceNumericOnly')
            break;
        case "custCode":
            alert('inside custCode');
            $("#target").ForceNumericOnly();
            break;
        case "rateReqId":
            break;
        default:
    }
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:43:28.403

只是出于兴趣，我只是自己写了其中一个，如果感兴趣，如下所示

```
function numbersOnlyTextBox(e) {
     var NumberFieldCharCodes = [48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 8, 9, 13, 46, 37, 39];
    if (e.shiftKey) {
        e.preventDefault();
    }
    if (!~$.inArray(e.which, NumberFieldCharCodes)) {
        return false;
    }
} 
```

允许小键盘、主键盘数字、左箭头、右箭头、退格键、制表键和删除键

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:09:48.757

```
jQuery.fn.ForceNumericOnly =

function() {
    return this.each(function() {
        $(this).keydown(function(e) {
            var key = e.charCode || e.keyCode || 0;
            return (
            key == 8 || key == 9 || key == 46 || (key >= 37 && key <= 40) || (key >= 48 && key <= 57) || (key >= 96 && key <= 105));
        });
    });
};

/**
 * as plugin functionality is not undoable
 * so one alternative solution is to make a
 * clone of the element without data and events.
 *
 * After binding plugin function that element
 * replace the existing element with cloned
 * element to remove that plugin functionality
 */

var target = $('#target'),
    clonedTarget = $('#target').clone(false, false);

$('#test').change(function() {
    var val = this.value;
    switch (val) {
    case "custName":
        target.replaceWith(clonedTarget);
        break;
    case "custCode":
        target.val('').ForceNumericOnly();
        break;
    case "rateReqId":
        target.val('').ForceNumericOnly();
        break;
    default:
    }
}); 
```

***[工作演示](http://jsfiddle.net/BAAGK/14/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T21:17:28.870

感谢@thecodeparadox，我完成了以下操作： [demo](http://jsfiddle.net/reguapo/BAAGK/15/)

**html代码：**

```
<select id="test" class="target">
<option value="custName">Customer Name</option>
<option value="custCode">Customer Code</option>
<option value="rateReqId">Rate Request Id</option>
</select>
<input id="target" type="text" />

<div id="toolTip" style="border: solid 1px #000; padding: 2px 2px 2px 2px; background-color: #f1f1f1; width: 150px; height: 30px; font-size: 11px; position: absolute; top: 250px;
    left: 130px; display: none;">test
</div> 
```

**jQuery代码：**

```
// Numeric only control handler
jQuery.fn.ForceNumericOnly =

function(selectedFilter) {
    return this.each(function() {
        $(this).keydown(function(e) {

            var key = e.charCode || e.keyCode || 0;
            // allow backspace, tab, delete, arrows, numbers and keypad numbers ONLY
            var result = (
            key == 8 || key == 9 || key == 46 || (key >= 37 && key <= 40) || (key >= 48 && key <= 57) || (key >= 96 && key <= 105));

            if (!result) {
                var tooltip = $('#toolTip');

                if (!tooltip.is(':visible')) {
                    tooltip.text("Numeric values only for " + selectedFilter);
                    tooltip.show().fadeOut(3000);
                }

            }
            return result;
        });
    });
};

$('#test').change(function() {
    var val = this.value;
    var input = $("#target");
    switch (val) {
    case "custName":
        input.val('').unbind();
        break;
    case "custCode":
        input.val('').unbind().ForceNumericOnly("Customer Code");
        break;
    case "rateReqId":
        input.val('').unbind().ForceNumericOnly("Rate Request Id");
        break;
    default:
    }
});​ 
```

其实我不知道这是更好的方法还是最有效的方法，所以仍然欢迎建议

谢谢您的帮助 ：）

# scala - 在scala中，使用函数名作为返回值？

> ID：12453168
> 
> 赞同：2
> 
> 时间：2012-09-17T04:33:15.197
> 
> 标签：scala

当我第一次遇到以下代码时，我很困惑。

在 Element 类中，有三个函数定义。

为什么height和width可以直接用contents作为Array[String]的变量？

是因为 Scala 中的每个函数都是对象还是其他规则？

我来自 C++ 世界，所以这个定义真的让我很困惑。

```
abstract class Element {
  def contents: Array[String]
  def height: Int = contents.length
  def width: Int = if (height == 0) 0 else contents(0).length
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T04:39:04.460

这只是语法。例如，表达式`contents.length`被编译为`contents`方法调用，然后是`length`对结果的方法调用。

通常，在零参数方法调用上可以省略括号。实际上，在调用定义中*没有参数列表*的方法（例如您的方法）时，*必须*省略括号。`contents`

 *请注意，此功能是 Scala 对[统一访问原则](http://en.wikipedia.org/wiki/Uniform_access_principle)的承诺的一部分。该`contents`方法可以用`contents`属性替换而不会破坏调用者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T04:38:41.207

没有什么特别的事情发生。与 C++ 相比，您遇到了以下差异：

*   在 Scala 中调用不带参数的方法不需要括号 -`length`在这种情况下与`length()`
*   `{}`如果方法定义只包含一个表达式，则不需要包装
*   函数返回其主体中最后一个表达式的值

一种更像 C/Java 的编写方式是

```
def height() : Int = { return contents.length(); } 
```

这会做同样的事情，但会更冗长 - 很好地证明了为什么 Scala 是一种用于*阅读*代码的出色语言。*

# excel - eclipse GEF中的EXCEL类似表

> ID：12453173
> 
> 赞同：-1
> 
> 时间：2012-09-17T04:33:51.383
> 
> 标签：excel, eclipse

我有一个项目需要创建几个图形编辑。

一个新功能是使用 GEF 创建类似 Excel 的表格。

需要列/行添加/删除。

目前的计划是多节点。在添加新列/行时，添加大量节点以使其像表格一样。关于节点宽度/高度调整，目前的计划是使用可以调整每个节点的大小。其他对应的节点会根据当前节点的变化而变化。

目前一些测试正在工作，但我想知道这个是否有更好的解决方案？

（使用计划 SWT 表是不行的，因为仍然需要一些 GEF 功能。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:56:18.673

我认为在 Canvas 上呈现 excel 表比使用 GEF 数字表示列/行..等更好。因为您将无法使用 GEF 优化性能，因为它`UpdateManager`（进行绘画）非常通用，并且它不知道您正在寻找的类似 excel 的行为。

# c# - 如何格式化整数？

> ID：12453174
> 
> 赞同：-5
> 
> 时间：2012-09-17T04:34:01.170
> 
> 标签：c#, xna-4.0, number-formatting

我希望整数在您添加位置时向左移动而不是向右移动。

```
input = 1
output = "1 "

input = 10
output = "10 "

input = 100
output = "100 "

input = 1234
output = "1234 " 
```

* * *

**不像**这样：

```
input = 1234
output = " 1234"

input = 123456
output = " 123456" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:40:11.463

我不确定您需要什么，但看起来您在字符串的整数末尾添加了一个空格。你可以简单地做

```
int i = 1;
string result = i.ToString() + " "; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:38:39.557

使用`string.Format()`带有格式说明符的方法，如下所述：http: [//social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/e5bc8093-5aaa-4d28-99e7-8b40bc58df3c](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/e5bc8093-5aaa-4d28-99e7-8b40bc58df3c)

例如：

```
string.Format("{0,-4}", 123); 
```

给出：

```
"123 " 
```

# php - 动态创建的表单元素值没有进入 php 中的 $_POST

> ID：12453177
> 
> 赞同：1
> 
> 时间：2012-09-17T04:34:34.350
> 
> 标签：php, jquery, forms, dynamic

我根据编号创建了一些动态文本框和值。用户选择的购物车项目。没有。的购物车项目存储在 cookie 中，我正在尝试执行以下操作：

1) 得到号码。来自名为`cartcounter`
2 的 cookie 的购物车项目的数量创建 'cartcounter' 没有名称的文本框`itemkey_skey`其中`itemkey`是用户购物车中每个项目的哈希键。
3) 提交表单
4) 在php中获取选中项的key

现在我可以创建`cartcounter`具有不同值的文本框的数量。

但问题是我只能在 PHP 中获取 $_POST 中的第一个文本框值。我想获取动态创建的表单元素的所有值。

代码：

```
$(document).ready(function() {
    if (getCookie("cartcounter") != 0) {
        $("#counter").val(getCookie("cartcounter"));
        for (var i = 1; i <= cartcounter; i++) {

            var ckey = getCookie(i + "_skey");
            var element = document.createElement("input");
            alert("Element=" + element);
            element.setAttribute("type", "text");
            element.setAttribute("value", ckey);
            element.setAttribute("name", "skey_" + ckey);
            var foo = document.getElementById("itmbox");
            foo.appendChild(element);
            $("#frm").submit();
        }
    }
    else {
        alert('Your cart is empty , please choose your product');
        window.location = "http://synergiadigital.com/restaurant2/orderFood.php/"
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T04:39:01.353

我已经解决了。问题是我在循环中调用了提交函数。我通过这样做解决了它：

```
$(document).ready(function() {
    if (getCookie("cartcounter") != 0) {
        $("#counter").val(getCookie("cartcounter"));
        for (var i = 1; i <= cartcounter; i++) {

            var ckey = getCookie(i + "_skey");
            var element = document.createElement("input");
            alert("Element=" + element);
            element.setAttribute("type", "text");
            element.setAttribute("value", ckey);
            element.setAttribute("name", "skey_" + ckey);
            var foo = document.getElementById("itmbox");
            foo.appendChild(element);

        }
        $("#frm").submit();
    }
    else {
        alert('Your cart is empty , please choose your product');
        window.location = "http://synergiadigital.com/restaurant2/orderFood.php/"
    }
});​ 
```

# ruby-on-rails - 未定义的方法图像标签

> ID：12453179
> 
> 赞同：1
> 
> 时间：2012-09-17T04:35:00.843
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在尝试在模型中调用图像标签并返回图像（如果存在），否则返回 null，如下所示：-

```
 def medium_avatar_exists?
    if self.avatar.present?
      image_tag self.avatar.thumb_medium_url
    else
      image_tag "missing-avatar-medium.png"
    end
  end 
```

当我从视图中调用此方法时：-`current_user.medium_avatar_exist?`

我收到一条错误消息，提示未定义方法 image_tag 可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:42:14.397

您不能在模型中使用辅助方法`image_tag`是辅助方法，并且您试图在模型中使用它，因此它会给出错误。

尝试在您`application_helper.rb`或您想要的其他帮助者中关注

```
def medium_avatar_exists?(user)
  if user.avatar.present?
    image_tag user.avatar.thumb_medium_url
  else
    image_tag "missing-avatar-medium.png"
  end
end 
```

要不就

```
def medium_avatar_exists?(user)
  image_tag (user.avatar.present? ? user.avatar.thumb_medium_url : "missing-avatar-medium.png")
end 
```

# c - 为什么我只有 1% 的时间会得到不同的结果？

> ID：12453183
> 
> 赞同：3
> 
> 时间：2012-09-17T04:35:35.740
> 
> 标签：c, casting, int, double, formula

我正在尝试截断小数点后的所有内容。（13.4396 将是 13.43）它不是总是或从不工作吗？

我有这个 99% 有效的公式：

```
 input = (( (double) ((int)(orgInput * 100)) )  / 100) ; 
```

然后我有这个算术等价的公式序列：

```
 input = (orgInput * 100);
    input = (int) input;
    input = (double) (input);
    input = input / 100; 
```

这些输入没有给出期望的结果（公式截断并向下舍入，而分解的步骤输出期望的结果）：

12.33

99.99

22.22

44.32

56.78

11.11

然后对我来说更大的谜团是为什么 33.30 对它们中的任何一个都不起作用。下面是我的程序，它不断运行以演示我的问题。

```
 #include <stdio.h>
    #include <stdlib.h>

    int main(void)
    {
        double orgInput, input;
        while (4!=3)
        {
            printf("Please enter the dollar amount (up to $100)  => ");
           scanf("%lf", &orgInput);

            /* Truncates anything past hundredths place */
            input = (orgInput * 100) ;
            printf("\n1\. input is %g \n ", input);

            input = (int) input ;
            printf("\n2\. input is %g \n ", input);

            input = (double) (input)   ;
            printf("\n3\. input is %g \n", input);

            input = input / 100 ;
            printf("\n4\. input is %.2lf \n", input);

            input = (( (double) ((int)(orgInput * 100)) )  / 100) ;
            printf("\nUsing the formula the input is %.2lf \n \n\n", input);

        }
        system("PAUSE");
        return 0;
    } 
```

先感谢您！！！！PS对不起我仍然习惯于stackoverflow的格式

关键词：Double to int 转换精度误差

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T04:49:17.853

我认为您正遭受浮点精度错误的困扰。

您应该可以通过执行以下操作来解决此问题：

```
const double epsilon = 1e-10;  // Or some suitable small number
input = floor(orgInput * 100 + epsilon) / 100; 
```

另一种方法是在输入时阻止这种情况发生。不是读取双精度，而是读取一个字符串，然后解析它以获取美元和美分金额（美分正好是小数点后的 2 位数字，如果有的话）。然后，您可以忽略其他所有内容。

一般来说，如果您使用截断为美分的货币，您最好将其保留为美分并使用整数。要么是那个，要么是舍入而不是截断（对于我上面的例子，这意味着 0.5 的 epsilon）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T12:00:06.770

您需要了解浮点数以二进制表示为：

> 2^(指数) * 尾数

指数是标准整数，但尾数（1 到 2 之间的值）是位数，其中每个位代表一个分数：1、1/2、1/4、1/8、1/16 等等。 . 因此，尾数不可能精确地表示某些值，它将具有+/-某个分数的精度。

例如，您提到 33.30。作为浮点数 33.30 只能是：2^5 * 尾数。

在这种情况下，尾数必须是 33.30/32 = 1.40625。但是通过从分数中得出最接近的分数是：1.0406249999999999111821580299874767661094。所以双精度的实际值不是 33.30，而是 33.2999999999999971578290569595992565155029296875，当您将类型转换为整数时，这当然会向下舍入为 33.29。

修复程序的正确方法是首先不要以浮点数进行扫描。您应该扫描两个以小数分隔的整数，如果 scanf 返回一个值，表明它没有扫描两个整数，那么对于仅美元值的情况，将其扫描为一个整数。

可悲的是，printf 通过将其转换为 int 来工作，并且不会正确打印任何超过 6 位小数的双精度浮点数，这就是为什么即使您要求 printf 打印双精度值，您仍将其视为 33.30 的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:28:12.503

大多数机器使用二进制而非十进制浮点。虽然二进制到十进制的转换总是给出精确的值（理论上），但是如果没有四舍五入就不可能从十进制转换为二进制（我没有考虑数字可以有无限位数的不切实际情况）。

因此，您所有的二进制浮点数都将与十进制的数字略有偏差。

唯一可以用二进制表示的 1 位十进制小数是：.0、.5。

同样，可以用二进制精确表示的 2 位十进制小数是：.00、.25、.50、.75（参见[此处](http://ideone.com/Hk4SM)）。

如果你愿意，我怀疑，你可以四舍五入到最接近的分数。

# c - C 中的 isalpha 函数仅使用 & 和 <= 运算符

> ID：12453187
> 
> 赞同：-4
> 
> 时间：2012-09-17T04:35:57.387
> 
> 标签：c, bit-manipulation

这就是问题：

仅使用 C 中的两个操作（& 和 <=），最多 5 个操作，确定一个字符是小写字母还是大写字母。您可以声明任意数量的变量，但仅限于按位和 (&) 以及 <= 比较的 5 次操作。

例子：

```
is_char('b') = 1
is_char('A') = 1
is_char(10) = 0 
```

我可以在 6 次操作中完成，但不能在 5 次中完成......有人有想法吗？

对不起！！忘了包括没有人可以使用控制流语句：/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T06:17:12.037

这是使用五个操作且没有控制流语句的方法。`a-z`我们通过删除 0x20 位（将范围映射到范围）来避免第二次范围测试`A-Z`：

```
int is_char(unsigned char c) {
    return ((c & ~0x20) <= 'Z') & ('A' <= (c & ~0x20))
} 
```

请注意，您可以像不想意外地考虑运算符`~0x20`一样进行编码。`0xdf``~`

修改`c`将其减少到四个操作，尽管优化器应该看到冗余：

```
int is_char(unsigned char c) {
    c &= ~0x20;
    return ('A' <= c) & (c <= 'Z');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T04:51:58.153

Gabe 您忘记了在 C 中，char 在 ASCII 表中表示为 int。所以这可以通过两个操作来完成。（我认为 OP 并没有完全详细说明这个问题）

```
if (c <= 'A' - 1)
    return 0;
if ('z' + 1 <= c)
    return 0;
return 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T04:45:01.727

你必须使用`&`运算符吗？如果没有，您可以通过 4 个`<=`操作来完成：

```
if (c <= 'A' - 1)
    return 0;
if (c <= 'Z')
    return 1;
if (c <= 'a' - 1)
    return 0;
if (c <= 'z')
    return 1;
return 0; 
```

注意：这里假定为 ASCII，使用`'A' - 1`只是为了说明 - 将其转换为常量留给读者作为练习。

# ruby-on-rails - 有没有办法用 Ruby 符号而不是字符串来编写这个 Rails 订单查询？

> ID：12453190
> 
> 赞同：1
> 
> 时间：2012-09-17T04:37:05.317
> 
> 标签：ruby-on-rails, ruby, activerecord, sql-order-by

在订购记录之前，我需要将一张桌子与另一张桌子连接起来。到目前为止，我发现我只能使用字符串进行排序，如下所示：

```
customer.joins(:product).order("products.position") 
```

我不喜欢使用硬编码的字符串值，感觉不安全。如果我可以使用 Ruby 符号代替，那就太好了，如下所示：

```
customer.joins(:product).order(:products => :position) #doesn't work 
```

我该怎么做？

我觉得这应该是可能的，因为您可以在加入表格和执行 时使用 Ruby 符号`where`，如下例所示：

```
customer.joins(:product).where(:products => {:manufacturer_id => @manufacturer.id}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:26:04.223

不，activerecord 不是这样设计的。我能想到的最好的理由是，您将如何指定`ASC`或`DESC`使用这种类型的命名？您必须以字符串格式指定完整的语句才能使其工作。

# html - 在 as3 中获取 web 的源代码

> ID：12453191
> 
> 赞同：3
> 
> 时间：2012-09-17T04:37:18.303
> 
> 标签：html, actionscript-3, httpwebrequest, urlloader

这可能是一件不可能的事情，但我想问一下。有没有办法通过提供链接来获取网页的 html 源代码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T08:32:27.130

当然有。我不明白你为什么得到这么多反对票。无论如何，这是给你的一个片段：

```
var pageLoader:URLLoader = new URLLoader(); //make a loader that will load a page
var pageRequest:URLRequest = new URLRequest("http://google.com"); //make a request with a url to page
pageRequest.method = URLRequestMethod.GET; //set request's html request method to GET

pageLoader.addEventListener(Event.COMPLETE, onPageLoaded); //listen for page load
pageLoader.load(pageRequest); //actually load the page

function onPageLoaded(e:Event):void
{
    trace(pageLoader.data); //handle the data from the loader
} 
```

您还可以`pageLoader`使用`e.target`. 祝你好运。

# formula - 如何在 MathType 中证明此符号的合理性

> ID：12453192
> 
> 赞同：0
> 
> 时间：2012-09-17T04:37:22.640
> 
> 标签：formula, mathtype

我在下面附加了一个 MathType 公式。但我无法证明 $+\infty$ 符号的位置。我希望它出现在 "${$" 之后并与第二个术语的左侧对齐。

谢谢您的帮助。

![方程](../Images/48f6d7375ebf4ae6ab9732638e05832d.png)

乳胶代码：

${{R} *{1}}\left( {{x}* {pi}},{{G} *{q}},{{x}* {qj}} \right)=\,\left{ \begin{矩阵} +\infty & p=q \ \underset{l=1}{\overset{d}{\mathop \sum }}\,({{x} *{pi}}\left[ l \right]-{ {x}* {qj}}\left[ l \right])\left( 2\left( {{x} *{qj}}\left[ l \right]-{{{\bar{x}}}* {q }}\left[ l \right] \right)+({{x} *{pi}}\left[ l \right]-{{x}* {qj}}\left[ l \right])(\left| {{G} *{q}} \right|-1)/|{{G}* {q}}| \right) & p\ne q \ \end{matrix} \right.$

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:58:49.237

I must use array statement instead of matrix.

LaTex Code:

[ {{R}*{1}}\left( {{x}*{pi}},{{G}*{q}},{{x}*{qj}} \right)=\,\left{ \begin{array}{@{}lc} +\infty & p=q \ \underset{l=1}{\overset{d}{\mathop \sum }}\,({{x}*{pi}}\left[ l \right]-{{x}*{qj}}\left[ l \right])\left( 2\left( {{x}*{qj}}\left[ l \right]-{{{\bar{x}}}*{q}}\left[ l \right] \right)+({{x}*{pi}}\left[ l \right]-{{x}*{qj}}\left[ l \right])(\left| {{G}*{q}} \right|-1)/|{{G}*{q}}| \right) & p\ne q \ \end{array} \right. ]

# linux - 使用命令行对文件进行拼写检查，非交互方式

> ID：12453196
> 
> 赞同：11
> 
> 时间：2012-09-17T04:37:52.550
> 
> 标签：linux, command-line, spell-checking, aspell, hunspell

我有一个大文本文件，其中包含许多错误/拼写错误的英文单词。我正在寻找一种在 Linux 中使用命令行拼写检查器来编辑此文件的方法。我找到了一些方法来做到这一点，但根据我的搜索，它们都以交互方式工作。我的意思是，看到一个错过/拼写错误的单词，他们会向用户建议一些更正，他/她应该选择其中一个。由于我的文件相当大，并且包含许多错误的单词，我无法以这种方式对其进行编辑。我正在寻找一种方法来告诉拼写检查器使用第一个候选词替换所有错误的单词。有没有办法做到这一点？(a/hun)spell 有什么选择吗？

问候。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-02T20:59:47.320

您可以尝试以下命令：

```
yes 0 | script -c 'ispell text.txt' /dev/null 
```

或者：

```
yes 1 | script -c 'aspell check text.txt' /dev/null 
```

但请记住，即使是简单的事情，结果也可能很差：

```
$ echo The quik broown fox jmps over the laazy dogg > text.txt
$ yes 0 | script -c 'ispell text.txt' /dev/null
Script started, file is /dev/null
Script done, file is /dev/null
$ cat text.txt
The quick brown fox amps over the lazy dog 
```

使用 aspell 似乎更糟，所以使用 ispell 可能会更好。

您需要该`script`命令，因为某些命令（例如 ispell）不想编写脚本。通常，您会将 的输出通过管道`yes 0`传输到命令以模拟一直按“0”键，但有些命令检测到正在编写脚本并拒绝合作：

```
$ yes 0 | ispell text.txt
Can't deal with non-interactive use yet. 
```

幸运的是，他们可以被以下`script`命令愚弄：

```
$ yes 0 | script -c 'ispell text.txt' /dev/null
Script started, file is /dev/null
Script done, file is /dev/null 
```

您可以使用 /dev/null 以外的其他文件来记录输出：

```
$ yes 0 | script -c 'ispell text.txt' out.txt
Script started, file is out.txt
Script done, file is out.txt
$ cat out.txt 
Script started on Tue 02 Feb 2016 09:58:09 PM CET

Script done on Tue 02 Feb 2016 09:58:09 PM CET 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-09T16:33:56.973

如果您不需要它来替换每个错误的单词，而只是以非交互方式指出错误并打印建议，则可以使用 ispell：

```
$ ispell -a < file.txt | grep ^\& > errors.txt 
```

不幸的是，我不知道有任何标准的 Linux 实用程序可以执行您从命令行请求的操作，尽管上面评论中的 emacs 建议很接近。

# android - 问题运行代码定期更新 UI 上的按钮颜色

> ID：12453205
> 
> 赞同：0
> 
> 时间：2012-09-17T04:39:17.160
> 
> 标签：android, android-layout, scheduled-tasks

我试图每 3 秒定期运行一段代码，这可以改变按钮的颜色。

到目前为止，我有：

```
ScheduledExecutorService scheduleTaskExecutor = Executors.newScheduledThreadPool(2);

// This schedule a runnable task every 2 minutes
scheduleTaskExecutor.scheduleAtFixedRate(new Runnable() {
    public void run() {

        queryFeedback2(); // display the data
    }
}, 0, 3, TimeUnit.SECONDS); 
```

此代码将运行这段代码，但不会使用结果更新我的 UI。

首先，什么代码会导致我的 UI 更新问题？

其次，这是我应该定期运行代码的方式吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T04:44:14.193

是的，可用的选项很少。

1.  线
2.  可运行
3.  定时器任务

正如 alex2k8 在[他们的回答](https://stackoverflow.com/a/1921759/19679)中所说：

> ```
> final Runnable r = new Runnable()
> {
>     public void run() 
>     {
>         tv.append("Hello World");
>         handler.postDelayed(this, 1000);
>     }
> };
> 
> handler.postDelayed(r, 1000); 
> ```
> 
> 或者我们可以使用普通线程，例如（使用原始 Runner）：
> 
> ```
> Thread thread = new Thread()
> {
>     @Override
>     public void run() {
>         try {
>             while(true) {
>                 sleep(1000);
>                 handler.post(r);
>             }
>         } catch (InterruptedException e) {
>             e.printStackTrace();
>         }
>     }
> };
> 
> thread.start(); 
> ```
> 
> 您可以将可运行对象视为可以发送到消息队列以执行的命令，而将处理程序视为用于发送该命令的辅助对象。
> 
> 更多细节在这里 [http://developer.android.com/reference/android/os/Handler.html](http://developer.android.com/reference/android/os/Handler.html)

您可以从处理程序更新 UI。使用处理程序的教程，线程可用[here。](http://www.vogella.com/articles/AndroidPerformance/article.html)

在上述选项之间进行选择实际上取决于您需要什么样的功能。如果您只需要每隔一段时间做一些事情，那么上述任何一项都应该没问题。

# php - 我如何仅使用此正则表达式捕获链接？

> ID：12453215
> 
> 赞同：1
> 
> 时间：2012-09-17T04:40:42.870
> 
> 标签：php, regex

我正在尝试用适当的 html 标签分别替换图像链接、youtube 视频链接和常规链接，并且我无法仅定位常规链接：这是我的代码：

```
 function($text)
  {
    $output = preg_replace('#(http://([^\s]*)\.(jpg|gif|png))#', 
                        '<br/><img src="$1" alt="" width="300px" style = "clear:both;"/><br/>', $text);

        $output = preg_replace('#(http://([^\s]*)youtube\.com/watch\?v=([^\s]*))#', 
                      '<br/><iframe width="480px" height="385px" src="http://www.youtube.com/embed/$3"
                       frameborder="0" allowfullscreen style = "clear:both;"></iframe><br/>', $output);

    $output = preg_replace('#(http://([^\s]*)\.(com))#', 
                      '<br/><a href="$1">$1</a><br/>', $output);

    return $output

 } 
```

而是替换最后一步中的所有链接...我如何避免这种情况并在最后一步中仅替换链接（不是 youtube 或图像）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:42:09.667

您要查找的 url 需要用空格或换行符等分隔。只需将定界符添加到正则表达式中，最后一个正则表达式就不会太贪心了！例如...

```
<?php

$text = "
http://www.youtube.com/watch?v=yQ4TPIfCK9A&feature=autoplay&list=FLBIwq18tUFrujiPd3HLPaGw&playnext=1\n
http://www.asdf.com/asdf.png\n
http://www.asdf.com\n
";

var_export($text);
var_export(replace($text));

function replace($text)
{
    $output = preg_replace('#(http://([^\s]*)\.(jpg|gif|png))\n#', 
                        '<br/><img src="$1" alt="" width="300px" style = "clear:both;"/><br/>', $text);

    $output = preg_replace('#(http://([^\s]*)youtube\.com/watch\?v=([^\s]*))\n#', 
                      '<br/><iframe width="480px" height="385px" src="http://www.youtube.com/embed/$3"
                       frameborder="0" allowfullscreen style = "clear:both;"></iframe><br/>', $output);

    $output = preg_replace('#(http://([^\s]*)\.(com))\n#', 
                      '<br/><a href="$1">$1</a><br/>', $output);

    return $output;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:50:32.107

您可以使用[`preg_replace_callback`](http://php.net/manual/en/function.preg-replace-callback.php)来匹配每个链接一次。所以你不必担心修改一个链接两次：

```
$input = <<<EOM
http://www.example.com/fritzli.jpeg

https://www.youtube.com/watch?v=blabla+bla+"+bla

http://wwww.google.com/search?q=blabla
EOM;
echo replace($input);

function replace($text) {
    $output = preg_replace_callback("#(https?://[^\s]+)#", function($umatch) {
        $url = htmlspecialchars($umatch[1]);

        if(preg_match("#\.(jpg|jpeg|gif|png|bmp)$#i", $url)) {
            $result = "<br/><img src=\"$url\" alt=\"\" width=\"300px\" "
                . " style = \"clear:both;\"/><br/>";
        } elseif(preg_match("#youtube\.com/watch\?v=([^\s]+)#", $url, $match)) {
            $result = "<br/><iframe width=\"480px\" height=\"385px\""
                . " src=\"http://www.youtube.com/embed/{$match[1]}\""
                . " frameborder=\"0\" allowfullscreen style = \"clear:both;\">"
                . "</iframe><br/>";
        } else {
            $result = "<br/><a href=\"$url\">$url</a><br/>";
        }

        return $result;
    }, $text);

    return $output;
} 
```

注意：以上代码仅适用于 PHP 版本 >= 5.3。如果您使用 5.3 或更低版本，您可以将内部函数提取到单独的函数中，并将函数名称作为参数提供给`preg_replace_callback`：

```
function replace_callback($umatch) {
    $url = htmlspecialchars($umatch[1]);

    if(preg_match("#\.(jpg|jpeg|gif|png|bmp)$#i", $url)) {
        $result = "<br/><img src=\"$url\" alt=\"\" width=\"300px\" "
            . " style = \"clear:both;\"/><br/>";
    } elseif(preg_match("#youtube\.com/watch\?v=([^\s]+)#", $url, $match)) {
        $result = "<br/><iframe width=\"480px\" height=\"385px\""
            . " src=\"http://www.youtube.com/embed/{$match[1]}\""
            . " frameborder=\"0\" allowfullscreen style = \"clear:both;\">"
            . "</iframe><br/>";
    } else {
        $result = "<br/><a href=\"$url\">$url</a><br/>";
    }

    return $result;
}

function replace($text) {
    $output = preg_replace_callback("#(https?://[^\s]+)#",
        "replace_callback", // the name of the inner function goes here
        $text);

    return $output;
} 
```

# apache - 重定向到另一个域而不影响 SEO

> ID：12453217
> 
> 赞同：0
> 
> 时间：2012-09-17T04:41:55.653
> 
> 标签：apache, .htaccess, seo, subdomain, blogger

我有一个博客 www.MY_BLOG_NAME.com，它托管在 blogger.com 上，它已经快 4 年了，并且在搜索引擎中排名更高。大部分流量来自谷歌。现在我正在用 drupal 重新设计我的网站，但我想保留旧博客。新网站`www.MY_BLOG_NAME.com`和旧网站`old.MY_BLOG_NAME.com`。

到底有没有？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T06:38:04.620

让您的旧博客和新博客同时运行是个坏主意 - Google 会将其视为重复内容，您的排名将会下降。

如果您在旧博客上放置一个 nofollow 标签，您就可以做到这一点，这样机器人就无法对其进行索引。

# android - 在 AS3 中，如何将图像从 rss 提要文件加载到 AIR for Android 的文本框中

> ID：12453220
> 
> 赞同：1
> 
> 时间：2012-09-17T04:42:29.153
> 
> 标签：android, air, xml-parsing, actionscript-3

我可以将提要文件中的图像加载到普通 Flash as3 应用程序的文本框中，但是当我将相同的文件加载到 Air for Android 时，它不起作用。这是代码，请阅读并帮助我。

“这是 Flash as3 中适用于 Android 的 Air 应用程序”

```
var txt:TextField = new TextField();

addChild(txt);

txt.htmlText="image url" 
```

从上面的代码图像没有加载。

但相同的代码在普通闪存 as3 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:06:17.630

您是否尝试过使用 StageWebView 来显示 html 内容（例如您的示例中的图像）？

另外，如果 html 文本不起作用，您是否考虑过使用 Loader 类

```
var img:Loader = new Loader();
    img.load(new URLRequest("image url"));
    addChild(img); 
```

上面的示例也不包括重要部分，如 IOError 处理和其他元素，但您可以自己找到:)

此致

# android - 为安卓设计用户界面

> ID：12453223
> 
> 赞同：1
> 
> 时间：2012-09-17T04:43:08.933
> 
> 标签：android, user-interface

我不知道我是否应该在这里问这个问题。我在开发android应用程序方面经验很少。我做了很少的研究。让我解释一下我的问题。我正在制作一个 android 应用程序来显示一所大学的详细信息。我用 a**`WebView`**来显示 HTML 和 CSS 页面的结果，这对我来说很容易，[这里](http://dibyaranjan.net76.net/action.php?reg=090101CSR001)有一个演示。我想过使用**`JSON`**从数据库中获取数据。现在我不确定如何填充它。请建议我一种方法来填充与该示例页面中相同的数据。

我访问过[http://android.stackoverflow.com](http://android.stackoverflow.com)但在常见问题解答中我发现不应该在那里问这个问题。我希望我在正确的地方问它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:47:02.473

您可以使用 填充您的数据`Listview`。您可以使用 a`custom or default adapter`在 ListView 中进行设置。而且您不需要`JSON`用于从数据库中获取数据。您可以使用`Cursor`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T16:21:28.207

对于这样一个具有**少量数据的****简单**解决方案，您还可以考虑使用基于**JavaScript 的模板系统**创建一个纯移动 Web 应用程序。作为一种*务实的方法*就足够了。

 *****当您可以切换底层软件平台（例如从 Web 到本机应用程序）时，模板还在开发周期的后期提供了灵活性

我推荐*PURE*或*车把*。

**看**

*   [客户端 Web 模板系统概述](http://en.wikipedia.org/wiki/Web_template_system#Client-Side_Systems)
*   [嵌入式.JS](http://embeddedjs.com/)
*   [车把.js](http://handlebarsjs.com/)
*   [pure](http://beebole.com/pure/)（从 JSON 数据生成 HTML 的简单且超快速的模板工具”）
*   stackoverflow：[Javascript 模板系统 - PURE、EJS、jquery 插件？](https://stackoverflow.com/questions/1869726/javascript-template-system-pure-ejs-jquery-plugin)*****

# python - Django datetime.date 到时间戳转换

> ID：12453225
> 
> 赞同：0
> 
> 时间：2012-09-17T04:43:22.460
> 
> 标签：python, django, python-datetime

我在获取一些日期时间转换时遇到问题。我实际上正在使用 django，并且在其中一个模型字段中我使用了`date`字段而不是`datetime`字段。现在我需要显示时差，我从 djangosnippets 获得了它的片段。但这接受时间戳。

所以我很困惑实际上是什么python时间戳以及它是如何制作的。我尝试了不同的东西，如下所示：

```
publish_date.timetuple() 
```

但这说，`'datetime.date' object has no attribute 'mktime'`.我猜 datetime.datetime 有这个 mktime 但没有 datetime.date 所以我不能使用它。

```
int(parse(publish_date).strftime('%s')) 
```

这里 parse 来自一个名为 dateutil 的第三方模块，但这次它给出了以下错误。

```
datetime.date' object has no attribute 'read' 
```

它对以下代码给出了相同的错误：

```
humanizeTimeDiff(publish_date) 
```

因此，我应该尝试将 datetime.date 对象转换为时间戳的任何更好的想法或方法。似乎转换 datetime.datetime 也会有所帮助。但是如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:52:23.000

由于您的数据库中没有任何时间信息（只有日期），您只能计算天数的差异。为此，只需减去日期对象。这将产生一个表示两个日期（或日期时间）[`timedelta`对象](http://docs.python.org/library/datetime.html#available-types)之间差异的对象。

```
>>> d1
datetime.date(2012, 9, 16)
>>> d2
datetime.date(2012, 9, 17)
>>> d2-d1
datetime.timedelta(1)
>>> print d2-d1
1 day, 0:00:00
>>> print (d2-d1).days
1 
```

# macos - 在 App Store 上发布 Mac App

> ID：12453227
> 
> 赞同：0
> 
> 时间：2012-09-17T04:43:28.230
> 
> 标签：macos, publishing, mac-app-store

我们正在为我们的客户开发一个应用程序，他希望我们构建应用程序，以便他可以通过 Mac App Store 发布该应用程序，

到目前为止，我们还没有 Mac Developer Id，我们已经从客户端收到了 App Id，

我的问题是，是否可以仅使用 App Id 进行构建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T09:16:35.710

我猜你的 App ID 是指“com.company.product”之类的东西。

将适用于 OS X 的应用程序下载到 App Store 并非易事（与 iPhone/iPad 相比）。

要签署应用程序，您需要公钥/私钥对和来自客户端的几个证书。

将应用程序上传到苹果的便捷方式是使用 Xcode 完成的。

1.  客户端是否使用 Xcode？如果您的客户使用 Xcode，那么您的客户可以完成所有的签名工作。然后你的客户只需要源代码。

2.  如果您的客户需要一个签名的二进制文件，那么他如何将应用程序带到 Appstore 就不是很明显了。有一个可用于上传二进制文件的工具：“Application Loader.app”（这是一个类似的 SO 问题，描述了工具链：[如何在没有 XCode 的情况下提交 iOS 应用程序？](https://stackoverflow.com/questions/7924085/how-to-submit-an-ios-app-without-xcode)）

如果您需要将结果作为签名包交付给您的客户，那么您需要来自客户的所有证书。您的代码必须设置所有权利。上传此代码而不在本地计算机上测试您的权利就像蒙着眼睛开车一样。

但是：如果您需要将签名的二进制文件交付给您的客户端，那么您需要所有证书。

如果您将代码分发给客户端，则向客户端提供未签名的二进制文件不是问题。无需代码签名即可执行应用程序。即使没有有效的 AppID，您的代码也可能会被执行。

如果您的客户有 Mac 开发方面的知识，这应该没问题。如果您的客户对 Mac 开发一无所知，您应该访问他的 Mac-Developer 帐户并为他做这件事。

结论：AppID 只是一个用于标识应用程序的字符串。如果您的客户使用 Xcode 自己进行代码签名并上传到 Apple，那么您不需要其他任何东西。如果您应该使用 iCloud 或 App-Sandboxing（权利），那么您需要来自您的客户端的证书。

# javascript - 触摸事件在android phonegap webview（甚至内置浏览器）中不起作用

> ID：12453230
> 
> 赞同：1
> 
> 时间：2012-09-17T04:44:10.507
> 
> 标签：javascript, android, touch

我正在使用phonegap，需要使用'touchstart'来加速点击响应，只是意识到'touchstart'，'touchmove'，'touchend'都没有触发，而是'click'。

我什至在内置浏览器（7" android 4.0.3 平板电脑）中测试了一个简单的页面，发现它失败了。

我在两块平板电脑上测试过还是一样的。在以下页面中，button2 仅显示“html_click”，button3 仅显示“click”：

```
<!DOCTYPE html>
    <html>
    <head>
    <meta http-equiv="content-type" content="text/html;charset=utf8">
    <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width">
    <title>Droid touch event test.</title>
    </head>
    <body>
    <button id="button">touch it</button>
    <button id="button2" ontouchstart="d_('html_touchstart')" onclick="d_('html_click')">html</button>
    <button id="button3">touch 3</button>
    <div id="db"></div>
    <script>
            function $(d){return document.getElementById(d)}
            function d_(m){dbo.innerHTML=dbo.innerHTML+' '+m}
            function ts1(e){d_('document touched')}
            function ts2(e){d_('button touched')}
            function eh(e){
                d_(e.type);
            }
            var ets='touchstart',dbo=$('db');
            document.addEventListener(ets,ts1,false);
            $('button').addEventListener(ets,ts2,false);
            $('button3').addEventListener(ets,eh,false);
            $('button3').addEventListener('touchend',eh,false);
            $('button3').addEventListener('click',eh,false);
    </script>
    </body>
    </html> 
```

为什么'touchstart没有触发？我应该做些什么来使触摸事件起作用吗？或者有没有其他方法可以让点击响应更快？

我使用`mousedown`事件，工作但不是特别快。

`(new Date()).getTime()`和之间的差异（包括一些`innerHTML`变化）仅在 15 左右。`mousedown``click`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:46:43.390

只保留向您展示概念所必需的内容，我编写了这个并在 ICS 设备上使用 Phonegap Build（默认为 Phonegap 2.0，但不重要）进行了测试。应该为你工作：

```
<!DOCTYPE html>
<html>
    <body>
        <button id="button1">1</button>
        <button id="button2">2</button>

        <script>
            document.getElementById("button1").addEventListener('touchstart',button1Pressed);
            document.getElementById("button2").addEventListener('touchstart',button2Pressed);
            function button1Pressed ()
            {
                alert('Button 1 Pressed');
            }

            function button2Pressed ()
            {
                alert('Button 2 Pressed');
            }
        </script>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-24T10:54:29.317

我也面临同样的问题。在下面的第一行，我收到错误“Android WebView and NO_FAST_DRAW = false”。换到二线后。有效。错误出现在 createCustomAlert('wpt') 处。所以我被称为的函数看起来像一个字符串。这个错误来了。所以请检查函数调用的地方

onclick = 'createCustomAlert('wpt')'

onclick = 'createCustomAlert(3)'

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T05:23:57.520

我也遇到了同样的问题，几乎三天就搞砸了。我将点击事件放在我的 html 输入标签上，`(EditText)`并尝试过，但它也没有用。最后，为了我的奇迹，我只是放了一个简单`alert("Hello")`的用`ontouchstart`. 令我惊讶的是，我成功地获得了警报和软键盘，为此我尝试了将近一周。你也试试这个.. 祝你好运

# file - 元数据在哪里？

> ID：12453234
> 
> 赞同：1
> 
> 时间：2012-09-17T04:44:20.963
> 
> 标签：file, operating-system, metadata

所以我只是在玩文件，比如用十六进制编辑器打开并做一些事情。我发现了一件事……我可以访问存储在文件中的数据，但是文件属性、时间戳和其他内容等元数据存储在哪里？

它绝对没有存储在文件中，但它在哪里？它是存储在硬盘文件系统中的某个地方还是其他任何地方？我还注意到 NTFS 文件系统也可以存储权限，就像我可以在 NTFS 文件系统上使用 dos 命令 cacls（或 icacls）一样，但它不支持像 FAT32 这样的文件系统。如果它在硬盘上，那么我们可以使用 linux 更改元数据（隐藏的文件属性、存档等）（我是对的）吗？

请有人解释或告诉我在哪里可以找到有关此主题的正确信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:08:38.080

元数据与文件数据分开存储。通常在称为 的结构中`inode`，但它取决于使用的文件系统。在 Linux 上，您通过函数`chmod`(2)、`chown`(2) 等提供的 API 处理元数据。括号中的数字是节号，您可以使用 man 命令阅读这些内容： `man -s2 chown`。对于命令行，Linux 有类似名称的命令（chmod、chown、touch 等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T04:59:15.713

是的，文件系统本身会分配额外的空间来在磁盘上存储元数据。所有操作系统都为您提供允许更改文件元数据（时间戳、属性、名称等）的 API。

您可以打开分区或硬盘的相应设备文件（例如“\.\C:”）并对其进行读/写。当您了解文件系统的详细信息时，您可以找出磁盘上特定文件的元数据位置。

# java - JavaFX primaryStage.close() 来自方法

> ID：12453235
> 
> 赞同：2
> 
> 时间：2012-09-17T04:44:28.120
> 
> 标签：java, methods, javafx, stage

我目前有一些代码可以在`primaryStage`其中生成一个新阶段的按钮。我的目标是在启动新按钮后立即使用该`setOnMouseClicked`方法关闭按钮所在的阶段。以下是它当前的设置方式：

```
@Override
public void start(Stage primaryStage) {

    setPlayBtn();

}

private void setPlayBtn() {
    play = new ImageView(new Image(BugWars.class.getResourceAsStream("images/play-btn.png")));
    play.setFitHeight(50);
    play.setFitWidth(50);
    play.setX(375);
    play.setY(375);
    play.setOnMouseClicked(new EventHandler<MouseEvent>() {

        @Override
        public void handle(MouseEvent t) {
            setGame(); // This creates the new stage.
            primaryStage.close();

        }
    }); 
```

不幸的是，这不起作用。Netbeans 抱怨它找不到该符号。它认为这是一个变量。我敢肯定这是愚蠢的，但任何参考的帮助`primaryStage`将不胜感激。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:24:42.900

因此，我通过简单地在（我相信）创建`PlayBtn`的方法中创建 instatiate然后创建. 我不知道为什么会这样，但确实如此。`start()``primaryStage``primaryStage` `final`

# c# - 聚合显示空值

> ID：12453236
> 
> 赞同：0
> 
> 时间：2012-09-17T04:44:50.450
> 
> 标签：c#, linq

我的 lambda 表达式：

```
lst.Add(qry.Where(item => item.Type == "Gundalac")
           .Aggregate(new CDetails(), (accumulator, item) => new CDetails {
                       Des = "CATALOG", 
                       Amt = accumulator.Amt + item.Amt 
                   }));

public class CDetails
{   
    public string Des { get; set; }
    public decimal? Amt { get; set; }
} 
```

总是`Amt`为空值？如何获得“qry”结果的总金额。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:19:11.013

我会检查`qry.Where(item => item.Type == "Gundalac")`实际返回的任何项目。

一旦您检查我是否倾向于将您的代码更改为：

```
lst.Add(new CDetails()
{
    Des = "CATALOG", 
    Amt = qry
        .Where(item => item.Type == "Gundalac")
        .Sum(item => item.Amt)
}); 
```

在这种特殊情况下，使用`.Sum()`要简单得多。

# junit - Junit：如何在junit中存根以下java类

> ID：12453239
> 
> 赞同：0
> 
> 时间：2012-09-17T04:45:03.780
> 
> 标签：junit

嗨，我有一个类，它通过调用 start() 方法从类的构造函数调用线程的 run() 方法，所以请帮我存根，以便编写 junit 测试用例。班级如下

> 公共类 MyClass 扩展线程 { Student st=null; 大学 uni= 新大学（）；
> 
> ```
>  public MyClass(Student st)    {
>      this.st=st;
>      start();
>  }
>  public void run()     {
>     uni.calculate(st);
>  }
>   } 
> ```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:45:12.037

看看这里的讨论：

[使用 Powermock 测试构造函数](https://stackoverflow.com/questions/12409153/testing-constructors-with-powermock/12409928#comment16750083_12409928)

它讨论了子类化和覆盖。

一般来说，为了测试它而必须模拟被测类应该被认为是不好的做法。这也很难做到，因为大多数模拟框架不允许在被测类中模拟单个方法，因为它们创建了包装代理。

# c - enum_is_int 选项

> ID：12453241
> 
> 赞同：0
> 
> 时间：2012-09-17T04:45:12.457
> 
> 标签：c, linker, makefile, arm, armcc

我目前使用 arm env 在 Intel x118 平台上工作。我发现我必须强制打开这个选项以确保链接没有问题，否则会出现如下错误：

```
Error: L6242E: Cannot link object iui_os_irq_msk.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object iui_os.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object uta_os.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object uta_os_critical_section.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object uta_os_thread.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object uta_os_event.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object uta_os_event_group.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object uta_os_queue.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object uta_os_sem.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object uta_os_common.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Error: L6242E: Cannot link object uta_os_mem.o as its attributes are incompatible with the image attributes.
   ... packed-enum clashes with enum_is_int.
Not enough information to list image symbols.
Not enough information to list the image map.
Finished: 13 information, 0 warning and 11 error messages. 
```

谁能告诉我，如果此`--enum_is_int`选项对我的目标文件产生重大影响？

**更多的信息：**

我发现了一些关于 ARM 的评论：

```
--enum_is_int 
```

此选项强制所有枚举类型的大小至少为四个字节。

默认情况下关闭此选项，并使用可以保存所有枚举器值的最小数据类型。

如果在命令行中指定 ARM Linux 配置文件，则默认开启此选项。

**注意**`--enum_is_int`不建议 将该选项用于一般用途。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:42:05.940

该选项可能会略微增加代码的内存占用量，但可能不会显着增加。它可以安全使用，并且在这种情况下是必需的，因为链接器不会链接对象被认为是不兼容的。

也就是说，您可以使用 --diag-warning=6242 命令行选项覆盖链接器错误，但生成的图像可能无法正常工作。

# node.js - 如何使用 mongoose + express 创建用户

> ID：12453242
> 
> 赞同：0
> 
> 时间：2012-09-17T04:45:15.763
> 
> 标签：node.js, express, mongoose

我有一个像这样到 /signup 的 GET 请求路由，它显示了一个表单：

```
#app.js
app.get('/signup', routes.signup);

#./routes/signup.js
exports.signup = function(req, res){
  res.render('signup', { title: 'Signup for a free account' });
};

#./views/signup.ejs
<form action="/signup" method="POST">...</form>

#app.js
app.post('/signup', ??); 
```

我将如何处理到 /signup 的 POST 以创建新用户？

我不知道如何使用 routes.signup 来处理 POST。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:39:55.117

非常快速和容易...

```
#app.js
app.get('/signup', routes.signup.get);

#./routes/signup.js
exports.signup = {};
exports.signup.get = function(req, res){
  res.render('signup', { title: 'Signup for a free account' });
};
exports.signup.post = function(req, res) {
// do your stuff
};

#./views/signup.ejs
<form action="/signup" method="POST">...</form>

#app.js
app.post('/signup', routes.signup.post); 
```

# c# - nlog：方法的参数无效

> ID：12453247
> 
> 赞同：2
> 
> 时间：2012-09-17T04:45:48.650
> 
> 标签：c#, nlog

我写了以下代码：

```
public class Log
{
    public static  void Info(string message, int arg)
    {
         Logger.Info(message, arg);                
    }
}
public class Task
{
    public void StartTask()
    {
        var i =10;
        Log.Info(" i = ", i);
    }
} 
```

但在日志文件中包含：

```
2012-09-17 10:41:00.0789 | Info | i= 
```

这是配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd"
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" throwExceptions="true">

  <targets>
    <target name="logfile" xsi:type="File" fileName="C:\KazbiletLog.txt" layout="${longdate} | ${level} | ${message} ${exception:format=ToString,StackTrace}${newline}" />
  </targets>

  <rules>
    <logger name="*" minlevel="Info" writeTo="logfile" />
  </rules>
</nlog> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T04:50:52.080

您忘记了格式中的 {0}

```
public void StartTask()
{
    var i =10;
    Log.Info(" i = {0}", i);
} 
```

# c++ - 循环内的迭代器不会递增

> ID：12453248
> 
> 赞同：0
> 
> 时间：2012-09-17T04:45:57.510
> 
> 标签：c++, loops, while-loop

我正在尝试比较两个字符串数组。每当我进入 if 语句内的 while 循环时，我就会陷入无限循环，因为即使循环内有一个迭代器，它也不会递增。我`cout<< finder;`在循环中只是为了查看查找器在什么位置，并且它永远不会增加到零以上。如果有人可以提供帮助，我将不胜感激。

```
if (memory[p] == "J")
    {
        if (is_number(memory[p+1]))
        {
            worker = atoi(memory[p+1].c_str());
            p = worker;
            continue;
        }
        else
        {
            int finder = 0;
            while (memory[p+1] != Symtablelab[finder])
            {
                cout << finder;
                finder = finder + 1;
            }

            if (memory[p+1] == Symtablelab[finder])
            {
                int k = Symtablepos[finder];
                worker = atoi(memory[k].c_str());

                p = worker;
                continue;
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:53:17.370

你说`finder`永远不要超过零。它是否打印finder = 0？如果有，就意味着

```
memory[p+1] = Symtablelab[1] 
```

就在第一次迭代之后，所以 while 循环被终止并停留`finder`在 1。

**编辑** 如果你说，它`finder = 0`在 while 语句中连续打印，那么你可能`if (memory[p] == "J")`在外部`for`或`while`（循环）语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:20:48.693

如果它连续打印 finder 并且它是 0，那么我必须询问您发布的整个代码片段是否包含在您没有发布的 while 语句中。如果它是陷入无限循环的循环，那么您发布的语句中包含的while循环将不会增加finder，这绝对没有意义。

或者另一种可能性是 Symtablelab 已经覆盖了 '[' ']' 运算符。如果这些事情都不是真的，那么一些令人难以置信的事情正在发生。

# node.js - Nodejs Connect/Express 会话如何管理内存

> ID：12453249
> 
> 赞同：3
> 
> 时间：2012-09-17T04:46:27.590
> 
> 标签：node.js, session, cookies, express, connect

我一直在阅读有关如何管理会话的 Connect 和 Express 的源代码。我仍在学习会话的基础知识，但我不明白如何处理内存。

我知道服务器将会话数据保存在内存中，并使用会话 ID 来访问数据。服务器发送保存 id 的 cookie（我猜是会话 cookie？），当用户访问该站点时，再次使用该会话。

这是一个愚蠢的问题，但我的问题是，如果用户删除了他的 cookie 或在没有更新会话超时的情况下过期，如何管理内存？数据会永远留在内存中吗？

**编辑：**我只是查看了 PHP 和其他语言，并查看了有关它们如何清理会话的文档。他们似乎有一个垃圾收集器（扫描并删除过期的会话）。Connect/Express 有这个功能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T10:40:23.620

Connect `MemoryStore`（`Session`中间件的默认会话存储模块）*不会*垃圾收集过期会话。*它仅在访问*时检查它们的过期时间（此时如果会话过期，*它将*`MemoryStore`删除存储），因此如果用户清除他们的 cookie，则会话将永远不会被再次访问，并且永远不会从. 因此，[中间件文档](http://www.senchalabs.org/connect/session.html#warning)中[的警告`Session`](http://www.senchalabs.org/connect/session.html#warning)`MemoryStore`不应在生产中使用。

Connect 不提供其他会话存储模块，并希望您提供自己的，基于中间件`Store`包含的抽象模块构建。`Session`

# jquery - JQuery 阻止数据发布

> ID：12453250
> 
> 赞同：0
> 
> 时间：2012-09-17T04:46:29.460
> 
> 标签：jquery, html, dynamic-tables

我的注册页面中有一个动态表格，仅显示用户是否选择“注册更多用户”。基本上他们可以使用该表来注册其他人。但是，如果他们在最后一刻选择“只注册我”并点击提交，我该如何阻止所有表格数据发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:19:14.517

我认为您可能希望停止发布通过单击注册更多用户按钮动态生成的文本输入字段的值。您可以跟踪添加到表中的所有输入字段，然后一旦用户单击注册我按钮，您可以调用一个 javascript 函数，该函数将删除以前通过调用`removechild`funcion 添加的文本输入。

您可以尝试[这个问题](https://stackoverflow.com/questions/3387427/javascript-remove-element-by-id)来更好地了解如何删除文本输入元素。

希望这会有所帮助。谢谢

# sql-server - Windows Azure VM 中的 Sql server 2012 评估

> ID：12453252
> 
> 赞同：0
> 
> 时间：2012-09-17T04:46:39.617
> 
> 标签：sql-server, azure

谁能告诉我这个版本的限制是什么，比如一些不支持的功能之类的。我将为我的应用程序创建这种类型的 Windows Azure VM。对sql和兼容性的完全控制是我首先考虑的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T21:21:13.847

在 Windows AzureVM 中运行的 SQL Server 2012 是您自己安装的确切版本，唯一的区别是它是评估版本，因此您可以在最终确定之前试用它。一旦您尝试过并知道这是您想要的，您就可以在您可以创建以满足您的需要的 VM 上运行您自己的 SQL Server 2012。

# spring-batch - 根据项目的属性作为标准将数据路由到项目编写器中的多个文件

> ID：12453254
> 
> 赞同：7
> 
> 时间：2012-09-17T04:46:43.947
> 
> 标签：spring-batch

我正在阅读器中获取项目列表。

在每个项目对象中调用一个属性，该属性`Code`具有我事先不知道的几个可能值。

1）基于`Code`每个项目中的值，我想将该特定项目写入与该`Code`. 例如，如果我当前的项目`Code`是“abc”，则该项目应写入编写器中的 abc.txt。

2) 如果`Code`当前项目中有一个“xyz”，而该文件不存在，则应创建一个新文件并且该项目应转到该文件。

3) 对于基于 . 创建的所有此类多个文件`Code`，我还想添加页眉和页脚回调以输入一些详细信息，例如每个文件中的项目数。

是否有可能拥有满足以上 3 个要求的作家？

我知道使用 multiresourceitemwriter，可以在多个输出文件之间划分数据。但据我所知，这个划分是根据项目的数量来划分的。例如，file1 中的前 10 个项目，file2 中的下 10 个项目，依此类推。

但是如何根据我的问题中提到的项目属性将数据路由到输出文件？

我很熟悉 Spring Batch，只需要一点指导，因为这是我第一次遇到这种问题。

谢谢阅读！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T22:20:35.780

如果我正确理解您的问题，您需要一些项目。

一、实现[Classifier](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/classify/Classifier.html)接口的分类器

```
public class ItemCodeClassifier {
    @Classifier
    public String classify(Item item) {
        return item.getCode().getKey();// returns "abc", "xyz"
    }
} 
```

第二个使用上述方法的路由器实现

```
<bean id="classifier"  class="org.springframework.batch.classify.BackToBackPatternClassifier">
    <property name="routerDelegate">
        <bean class="ItemCodeClassifier" />
    </property>
    <property name="matcherMap">
        <map>
        <entry key="abc" value-ref="abcItemWriter" />
        <entry key="xyz" value-ref="xyzItemWriter" />
        </map>
    </property>
</bean> 
```

最后，一个[ClassifierCompositeItemWriter](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/support/ClassifierCompositeItemWriter.html)

```
<bean id="ItemWriter" class="org.springframework.batch.item.support.ClassifierCompositeItemWriter">
<property name="classifier" ref="classifier" />
</bean 
```

没有编译以上，但希望它有所帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-10-25T12:56:24.900

以下解决方案对我有用。编译了代码，它工作正常。

首先，您需要一个分类器。要么实现 Classifier 接口，要么使用 @Classifier 注释分类（）方法。

这里我使用了注解。

```
public class MyClassifier {
    @Classifier
    public String classify(Policy pol) {
        return pol.getPolCode;// returns "01", "02"
    }
} 
```

添加分类器 bean

```
<bean id="myClassifier"  class="org.springframework.batch.classify.BackToBackPatternClassifier">
    <property name="routerDelegate">
        <bean class="MyClassifier" />
    </property>
    <property name="matcherMap">
        <map>
        <entry key="01" value-ref="pol01ItemWriter" />
        <entry key="02" value-ref="pol02ItemWriter" />
        </map>
    </property>
</bean> 
```

添加您的作家bean，如下所示

```
<bean id="ItemWriter" class="org.springframework.batch.item.support.ClassifierCompositeItemWriter">
    <property name="myClassifier" ref="myClassifier" />
</bean> 
```

上面的代码可能会抛出 WriterNotOpenException。为此，您需要将 batch:stream 添加到步骤中。

```
<batch:step id="step1">
    <batch:tasklet>
        <batch:chunk reader="reader" processor="processor" writer="ItemWriter" commit-interval="3">
            <batch:streams>
                <batch:stream ref="pol01ItemWriter"/>
                <batch:stream ref="pol02ItemWriter"/>
            </batch:streams>
        </batch:chunk>
    </batch:tasklet>
</batch:step> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T20:20:49.703

我会尝试至少 2 种策略

1.  批处理将所有数据写入临时数据库表，简单的工具/批处理/脚本创建单个文件-我不确定页眉/页脚，但一如既往，有人会说“让我们保持便宜”
2.  itemWriter 动态创建和管理所需的编写器，可能使用抽象的预配置编写器/bean 作为模板，只要您忽略重新启动场景，这听起来“简单”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T14:20:53.747

另一种选择是构建 3 个列表，其中包含由代码分隔的元素。然后，使用不同的步骤将这些列表写入文件系统。

一个优点是您的元素已准备好写入，因此您可以使用大缓冲区来增加写入吞吐量（当然根据您的硬件）。

如果您必须生成的文件数量是动态的，我建议您按顺序编写它们以避免任何多线程问题。

您不能动态路由元素。所以这个想法是创建一个自己路由的元素列表，然后在这些列表上工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-05T06:49:56.820

**用于 JDBC 编写器的 Java 配置**

这就是我为 jdbc writer 所做的。我们可以对 flatfile Writer 进行类似的配置

```
 @Bean
    public ItemWriter<Person> itemWriter(DataSource dataSource) {
        BackToBackPatternClassifier classifier = new BackToBackPatternClassifier();
        classifier.setRouterDelegate(new AggGroupClassifier());
        classifier.setMatcherMap(new HashMap<String, ItemWriter<? extends Person>>() {
            {
                put("A", writerA(dataSource));
                put("B", writerB(dataSource));
                put("C", writerC(dataSource));

            }
        });
        ClassifierCompositeItemWriter<Person> writer = new ClassifierCompositeItemWriter<Person>();
        writer.setClassifier(classifier);
        return writer;      
        }

public class AggGroupClassifier {

    @Classifier
    public String classify(Person person) {
        return person.getAgeGroup();

    }
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-31T09:32:36.330

今天早上我遇到了同样的问题。最后我发现目前 ClassifierCompositeItemWriter 在 Spring batch 的最新版本 2.1.9 版本中不支持 FlatFileItemWriter 作为其委托 ItemWriter。

WriterNotOpenException 抛出如下：

```
org.springframework.batch.item.WriterNotOpenException: Writer must be open before it can be written to
    at org.springframework.batch.item.file.FlatFileItemWriter.write(FlatFileItemWriter.java:236)
    at org.springframework.batch.item.support.ClassifierCompositeItemWriter.write(ClassifierCompositeItemWriter.java:65)
    at org.springframework.batch.core.step.item.SimpleChunkProcessor.writeItems(SimpleChunkProcessor.java:171)
    at org.springframework.batch.core.step.item.SimpleChunkProcessor.doWrite(SimpleChunkProcessor.java:150)
    at org.springframework.batch.core.step.item.SimpleChunkProcessor.write(SimpleChunkProcessor.java:269)
    at org.springframework.batch.core.step.item.SimpleChunkProcessor.process(SimpleChunkProcessor.java:194)
    at org.springframework.batch.core.step.item.ChunkOrientedTasklet.execute(ChunkOrientedTasklet.java:74)
    at org.springframework.batch.core.step.tasklet.TaskletStep$ChunkTransactionCallback.doInTransaction(TaskletStep.java:386)
    at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:130)
    at org.springframework.batch.core.step.tasklet.TaskletStep$2.doInChunkContext(TaskletStep.java:264)
    at org.springframework.batch.core.scope.context.StepContextRepeatCallback.doInIteration(StepContextRepeatCallback.java:76)
    at org.springframework.batch.repeat.support.RepeatTemplate.getNextResult(RepeatTemplate.java:367)
    at org.springframework.batch.repeat.support.RepeatTemplate.executeInternal(RepeatTemplate.java:214)
    at org.springframework.batch.repeat.support.RepeatTemplate.iterate(RepeatTemplate.java:143)
    at org.springframework.batch.core.step.tasklet.TaskletStep.doExecute(TaskletStep.java:250)
    at org.springframework.batch.core.step.AbstractStep.execute(AbstractStep.java:195)
    at org.springframework.batch.core.job.SimpleStepHandler.handleStep(SimpleStepHandler.java:135)
    at org.springframework.batch.core.job.flow.JobFlowExecutor.executeStep(JobFlowExecutor.java:61)
    at org.springframework.batch.core.job.flow.support.state.StepState.handle(StepState.java:60)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.resume(SimpleFlow.java:144)
    at org.springframework.batch.core.job.flow.support.SimpleFlow.start(SimpleFlow.java:124)
    at org.springframework.batch.core.job.flow.FlowJob.doExecute(FlowJob.java:135)
    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:281)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:120)
    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:48)
    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:114) 
```

# java - 如何获取不同时区的日期和时间？

> ID：12453257
> 
> 赞同：1
> 
> 时间：2012-09-17T04:47:01.793
> 
> 标签：java, time, timezone

我正在使用 Indigo Service Release 2。我编写了以下代码：

```
TimeZone calcutta = TimeZone.getTimeZone("Asia/Calcutta");
Date now = new Date(); 
DateFormat format = 
    DateFormat.getDateTimeInstance(DateFormat.FULL, DateFormat.FULL);  
format.setTimeZone(calcutta);  
jlabel_IndiaTime.setText((format.format(now).toString())); 
```

它正在显示`Monday, September 17,2012 1:13:23 PM IST`，但在印度，时间是上午 10:14。我正在纽约尝试这个。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T06:13:10.293

您可以使用 SimpleDateFormat 和 Date 类，如下所示：

```
 Date date = new Date();
    SimpleDateFormat simpleDateFormat = new SimpleDateFormat();
    simpleDateFormat.setTimeZone(TimeZone.getTimeZone("America/New_York"));
    System.out.println(simpleDateFormat.format(date)); 
```

您可以将不同的时区替换为“America/New_York”，例如“Asia/Calcutta”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T05:52:06.027

这是一些示例代码。我明确地将我的服务器的默认时区设置为纽约时间，但您可能需要遵循 Jon Lin 的提示并确定您自己服务器的默认时区。例如，如果您在纽约，但使用托管在旧金山的服务器并使用太平洋时间，那么这可能与任何区域的预期时间相差 3 小时。

```
public void testTodayInIndia() {
    // For demonstration, make my system act as though it's in New York
    TimeZone.setDefault(TimeZone.getTimeZone("America/New_York"));
    long oneDay = 86400000;
    long fourYears = (365 * 4 + 1) * oneDay;
    // Calculate 42 years after 1/1/1970 UTC
    Date now = new Date(fourYears * 10 + oneDay * 365 * 2 + 1);
    TimeZone calcutta = TimeZone.getTimeZone("Asia/Kolkata");
    SimpleDateFormat formatter = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    // Since unspecified, this output will show the date and time in New York
    assertEquals("2011-12-31 19:00:00", formatter.format(now));
    // After setting the formatter's time zone, output reflects the same instant in Calcutta.
    formatter.setTimeZone(calcutta);
    assertEquals("2012-01-01 05:30:00", formatter.format(now));
} 
```

# ruby-on-rails - Rails 不再允许在路线中使用“符号：值”？

> ID：12453265
> 
> 赞同：1
> 
> 时间：2012-09-17T04:48:48.597
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, syntax-error

所以我刚刚将我的系统从 os 10.6.8 snow leopard 更新为闪亮的新山狮，我发现一大堆来自 rails 的完全相同的错误消息：

```
syntax error, unexpected ':', expecting tASSOC 
```

是什么赋予了？我曾经一直在做依赖: :destroy 和验证存在：真实，唯一性：真实之类的事情，但现在我不能再这样做了？

我想代码应该冗长是有道理的，但我实际上有点喜欢以前代码的简洁性，它在我的旧系统上运行时没有缺陷。

当我在我的 routes.rb 上启动并运行我的 rails 应用程序时，我立即遇到了这个问题，我发现这样做

```
root :to => 'welcome#index', as: 'welcome' 
```

将不再工作并且需要导轨`:as => 'welcome'`

有没有人有类似的经历？有没有办法恢复这个功能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T04:53:27.070

新的哈希语法来自 ruby​​ 1.9。

通过以下方式检查您的 ruby​​ 版本`ruby -v`

# c++ - echo (shell) 和 C 语言

> ID：12453266
> 
> 赞同：1
> 
> 时间：2012-09-17T04:48:49.490
> 
> 标签：c++, c, bash, shell

我有一个用 C 语言编写的程序。在这个程序中，我有一个整数变量 QS。这个变量的值在程序执行过程中发生变化在这个用C编写的程序中，我想使用echo命令shell显示这个变量QS

听说纸尿裤C的system()函数可以使用终端或控制台

system ("echo $ QS") 当我这样做时，变量 QS 无法识别并且它什么也不显示。

您对我如何做到这一点有任何具体的答案吗？以及如何识别C语言中的变量？

我知道使用简单的 printf，我可以显示这个变量，但我想要的是使用 echo。

预先感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T05:03:25.783

Shell 无法访问您的程序变量值。您必须先将值设置到环境中。有不同的方法可以做到这一点。其中之一是（在 linux/unix 中工作）

```
int main()  
{  
    char chProgramVar[] = "hello world" ;  
    setenv("ShellVar", chProgramVar, 1) ;  
    system("echo $ShellVar") ;  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:14:52.753

正如其他人所说，shell 无法访问您的程序变量。您可以使用`sprintf`将值插入到您将使用以下命令执行的命令中`system`：

```
char command[BUFSIZ];

sprintf(command, "echo %d", QS);
system(command); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T05:04:34.297

您通过`system(3)`调用生成的 shell 不知道 C 程序中的任何变量。做你想做的最简单的方法是将数据导出为环境变量。由于环境是通过调用继承的`system(3)`，因此您只需使用 设置变量即可[`setenv(3)`](http://linux.die.net/man/3/setenv)。但是，您必须首先将其格式化为字符串：

```
int QS = ...;
char QSStr[32];  // Longest integer string is INT_MIN = -2147483648, assuming
                 // that sizeof(int) == 4
snprintf(QSStr, sizeof(QSStr), "%d", QS);  // Convert to string
setenv("QS", QSStr);  // Set the environment variable)
...
system("echo $QS");  // Will print the value of QS 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-17T04:56:17.947

您必须将数字格式化为字符字节。数字“4”作为打印字符具有不同的整数表示。

使用 printf 打印数字，或使用 sprintf 将其作为字符重新格式化到新缓冲区中。然后您可以使用系统回显（无论出于何种原因）打印新缓冲区。

```
char s[16]; // might be too small
sprintf(s, "%d", integer_var); 
// s is the string 
```

# jquery-ui - 如何为这行代码实现简单的加载图像

> ID：12453270
> 
> 赞同：-2
> 
> 时间：2012-09-17T04:49:36.437
> 
> 标签：jquery-ui, jquery

我想知道在弹出对话框之前如何或应该做什么来实现加载图像？任何 gif 都可以。我应该在我的函数中添加什么函数或代码行？

------------我的jQuery代码：------------

```
 $(".red_img").click(function() {

                });

                $("#red_form").dialog({

                        modal:true,
                        buttons: {
                            "Done": function() {

                            },
                            Cancel: function() {
                                $(this).dialog("close");
                            }
                        }
                });
                $("#red_form").show(500);
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:25:08.637

我希望您在弹出对话框之前正在寻求进度指示器的解决方案，以显示加载弹出窗口的进度，如果是，那么这里是您如何与模态一起实现此进度指示器的方法。

**步骤1。**

我采用了一个简单的面板，在其中插入了一个图像，“正在加载请稍候...”是我要显示的文本。我已将面板的位置设置为屏幕上我想要的位置

```
<asp:Panel ID="ProgressIndicatorPanel" runat="server" Style="display: none" CssClass="modalPopup">
        <div id="ProgressDiv" class="progressStyle">
            <ul class="ProgressStyleTable" style="list-style:none;height:60px">
                <li style="position:static;float:left;margin-top:0.5em;margin-left:0.5em">
                    <asp:Image ID="ProgressImage" runat="server" SkinID="ProgressImage" />
                </li>
                <li style="position:static;float:left;margin-top:0.5em;margin-left:0.5em;margin-right:0.5em">
                    <span id="ProgressTextTableCell"> Loading, please wait... </span>
                </li>
            </ul>
        </div>
    </asp:Panel> 
```

**第 2 步** 因为我想在进度指示器显示期间禁用其余的屏幕功能，所以我使用了一个模态对话框，如下所示。

```
<asp:ModalPopupExtender ID="Progress_ModalPopupExtender" runat="server" ClientIDMode="Static" BehaviorID="ProgressModalPopupBehaviour"
        PopupControlID="ProgressIndicatorPanel" TargetControlID="DummyDialogButton" BackgroundCssClass="ModalPopupBG" 
        RepositionMode="RepositionOnWindowResizeAndScroll" Drag="false" DropShadow="true">
    </asp:ModalPopupExtender> 
```

**第 3 步**

现在你需要通过包含这个 $("#ProgressImage").show(); 来编写 Javascript 函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:02:20.407

您可以在单击事件开始时显示加载图像，然后在显示对话框之前隐藏图像：

```
// Initially, your loading image must be hidden
$("#your_loading_image").hide();

$(".red_img").click(function() {
    var red_type = $(this).attr("title").trim();

    // Display your loading image here -----------------------------
    $("#your_loading_image").show();

    $.ajax({
        url: "get_attributes.php",
        type: "post",
        datatype: "json",
        data: {wtype: red_type},
        success: function(data) {
            var toAppend = '';
            if(typeof data === "object"){
                toAppend += "<tbody>";
                toAppend += "<tr></td><td class=datalabel>Type:</td><td>"+data['type']+"</td></tr>";
                toAppend += "<tr><td class=datalabel>Health:</td><td>"+data['health']+"</td></tr>";
                toAppend += "<tr><td class=datalabel>Attack:</td><td>"+data['attack']+"</td></tr>";
                toAppend += "<tr><td class=datalabel>Defense:</td><td>"+data['defense']+"</td></tr>";
                toAppend += "<tr><td class=datalabel>Speed:</td><td>"+data['speed']+"</td></tr>";
                toAppend += "<tr><td class=datalabel>Evade:</td><td>"+data['evade']+"</td></tr>";
                toAppend += "<tr><td class=datalabel>Special:</td><td>"+data['special']+"</td></tr>";
                toAppend += "</tbody>";
                $("tbody").remove();
                $("#red_form table").append(toAppend);
            }
        }
    });

    $("#red_form #name").val($(this).attr("alt").trim());

    // Hide your loading image here --------------------------------
    $("#your_loading_image").hide();

    $("#red_form").dialog({
        width:300,
        resizable:false,
        modal:true,
        buttons: {
            "Done": function() {

                if($("#red_form #name").val().trim()==''){
                    alert("Text field cannot be empty.");
                    $("#red_form #name").focus();
                }
                else if($("#red_form #name").val().trim()===$("#blue_name").val().trim()){
                    alert("Name cannot be the same by other player.");
                    $("#red_form #name").focus();
                }
                else {
                    $("#red_name").val($("#red_form #name").val().trim());
                    $("#red_type").val(red_type);
                    $("#red_form").hide(400);
                    $(this).dialog("close");
                }
            },
            Cancel: function() {
                $(this).dialog("close");
            }
        }
    });
    $("#red_form").show(500);
}); 
```

您的加载图像在哪里`#your_loading_image`，例如：

```
<img id="your_loading_image" src="your_loading_image_path.gif"/> 
```

# iphone - 如何处理在 iphone 中将 JSON 上传为空的问题

> ID：12453274
> 
> 赞同：1
> 
> 时间：2012-09-17T04:50:26.373
> 
> 标签：iphone, json, ios5

我有一个 JSON 字符串来上传服务器，它工作得很好。我的想法是当上传 JSON 没有数据时，也成功上传了消息。

我的带有值的 JSON 格式如下：

```
{
 "Data" : [
      [view] [17/09/2012] [msg];
]
} 
```

我没有值的 JSON 格式如下：

```
{
"Data" : [

]
 } 
```

如何处理这些问题并识别带有数据或空的 JSON？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:24:53.103

您可以解析 json，然后使用标准空测试检查集合...

```
// note this function assumes json as you specified: dictionary containing array
// for the key @"Data"
//
- (BOOL)jsonIsEmpty:(NSString *)jsonString {

    NSError *e = nil;
    NSData* data = [jsonString dataUsingEncoding:NSUTF8StringEncoding];
    NSDictionary *dictionary = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error: &e];

    NSArray *dataArray = [dictionary valueForKey:@"Data"];
    return dataArray.count == 0;
} 
```

# asp.net-mvc-3 - 如何对 MVC 应用程序中的私有操作进行单元测试？

> ID：12453275
> 
> 赞同：0
> 
> 时间：2012-09-17T04:50:38.647
> 
> 标签：asp.net-mvc-3, unit-testing, nunit

我们可以对将访问说明符设为私有的操作进行单元测试吗？如果可能，我们如何对私有操作进行单元测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:18:34.327

一种选择是将动作公开并用`NonActionAttribute`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:06:22.240

你可以，但为什么你有私人的行动方法？我会重新考虑一下这种架构。如果您忘记将其设为私有，它将变为 URL 可寻址。

但是，如果您真的想这样做，请右键单击该方法并添加一个单元测试。单元测试项目将向应用程序 assemblyinfo.cs [InternalsVisibleTo] 添加一个项目，因此可以通过在测试项目中创建的代理访问它的私有方法。有点乱，不妨把它拉到一个单独的类中，让它公开或内部等

# file - 下载文件时计算吞吐量？

> ID：12453278
> 
> 赞同：0
> 
> 时间：2012-09-17T04:51:09.793
> 
> 标签：file, upload, download, calculator, throughput

通过下载和上传 5MB、10MB、20MB、50MB 和 100MB 文件。如何计算吞吐量？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:26:08.873

```
throughput = bytes_downloaded / (time_now - time_started); 
```

如果这还不足以解决问题，那么您的问题需要更加详细。发布您到目前为止编写的代码，并解释它为什么不起作用。

# python - osascript 和 python 给出错误 (-2741)

> ID：12453279
> 
> 赞同：0
> 
> 时间：2012-09-17T04:51:33.797
> 
> 标签：python, osx-lion, osascript

感谢您抽时间阅读。我在 Mac OS X 10.7 上的 python 脚本中调用了一个 osascript。

```
osascript -e 'tell application "Microsoft PowerPoint" to activate' -e 'tell application "System Events" to key code 124' 
```

以下是出错的脚本片段：

```
import os
cmd = """osascript -e 'tell application "Microsoft PowerPoint" to activate' -e 'tell application "System Events" to key code 124'
os.system(cmd) 
```

这是错误日志：

```
[error] [client 192.168.10.65] 92:96: 
[error] [client 192.168.10.65] syntax error: Expected end of line, etc. but found identifier. (-2741) 
```

几个小时一直在敲我的头，请帮助或指示非常感谢！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:17:30.447

不确定您是否复制粘贴错字，但您应该关闭第二行的三引号，因为它永远不会关闭。您可能还想包括 92:96 映射到的行和列，以帮助人们更好地调试问题。此外，这里还有一些其他建议：

1.  你应该结束“告诉”声明吗？在我所有的脚本中，我都会使用“osascript”来调用。
2.  如果这不起作用，请尝试将 osascript 放入文件并执行该文件，而不是使用“-e”标志。
3.  在 Python 中使用 subprocess 模块，因为不推荐使用 os 模块执行命令的方式。

# django - 将 CreateView 行为更改为在 django 中保存之前预览数据

> ID：12453281
> 
> 赞同：3
> 
> 时间：2012-09-17T04:51:47.023
> 
> 标签：django

我已经让基于[Creatview()](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-editing/)类的函数工作了。当提交成功时，它已经有数据并显示“成功”页面。

我想以这种方式改变这种行为：当 CreateView() 成功时，我希望数据得到验证，但不保存。我不想进入成功页面，而是想使用[DetailView()](https://docs.djangoproject.com/en/dev/ref/class-based-views/generic-display/)类来显示新创建的实例，这样用户就可以看到最终保存数据时的样子。

一旦用户对显示的数据感到满意，用户可以单击“保存”，在这种情况下，数据被保存并且 CreateView() 完成，或者用户可以单击“重新编辑”，然后返回表单进行更改数据，然后使用 DetailView() 显示新创建的实例（并重复直到用户满意）。优雅地使用基于类的视图来做到这一点的最佳方法是什么？

```
from django.views.generic.edit import CreateView  
from restaurant.models import Restaurant  
from restaurant.forms import RestaurantForm  
import uuid  

class RestaurantCreate(CreateView):  
   form_class = RestaurantForm  
   template_name = 'restaurant_form.html'  
   model = Restaurant  

   def form_valid(self, form):  
       form.instance.created_by = self.request.user  
       form.instance.life_id = str(uuid.uuid1())  
       return super(RestaurantCreate, self).form_valid(form) 
```

另外，我知道表单向导，但我没有多页表单。即使我忽略了这一点，表单向导也不会在最终保存之前提供预览数据的机会。

[编辑：关于谷歌群组](https://groups.google.com/forum/?fromgroups=#!topic/django-users/eBa70jpW5iU)的相关讨论，但没有解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T06:49:53.827

这是我应该做的：

覆盖 RestaurantCreate 类的 form_valid 方法，让表单保存在会话中。从那里您可以重定向到另一个视图，即您的 RestaurentDetail 视图，在那里您可以通过从会话中读出表单并显示您需要的内容来覆盖 get_object 方法。在那里我还会放置一个隐藏所有字段的表单，除了提交/保存按钮。该表单将由您会话中的任何内容填充。因此，当用户按下保存时，例如对另一个视图 RestaurantFinalCreate 视图执行 POST。在那里你可以像往常一样实现 CreateView。

如果您不确定要覆盖哪种方法以及如何覆盖，请查看：[http](http://ccbv.co.uk/) ://ccbv.co.uk/它对我很有帮助。

也不要在 RestaurantCreate 视图的 form_valid 方法中使用 super，因为这会触发父类 ModelFormMixin 中的保存。

# php - SQLSTATE[42000]：语法错误或访问冲突：1064，找不到源

> ID：12453283
> 
> 赞同：0
> 
> 时间：2012-09-17T04:51:55.310
> 
> 标签：php, pdo

我被抛出一个错误：

> “SQLSTATE [42000]：语法错误或访问冲突：1064 您的 SQL 语法有错误；请查看与您的 MySQL 服务器版本相对应的手册，以获取在 '* FROM auction WHERE etime < ?' 附近使用的正确语法 在第 1 行“

我对此的理解通常是我在说发生错误的地方拼写错误。

但是，在以下脚本中，我的页面的第 1 行没有`"* FROM auction WHERE etime < ?"`。

此外，它在页面中仅出现 3 次 - 在第 19、26 和 288 行。

我已经检查了所有这些位置是否存在语法错误，它看起来很合适。所以我不知道为什么会抛出这个，我希望它消失。

页面相当大，请耐心等待：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<?php

session_start();
$url = (!empty($_SERVER['HTTPS'])) ? "https://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'] : "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
$_SESSION['lasturl'] = $url;

include("connect.php");

$pdo = connect();
$pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    try{
        $old = time() - (60*24*60*60);
        $stmt15 = $pdo->prepare("DELETE * FROM auction WHERE etime < :time");
        $stmt15->bindParam(":time", $old, PDO::PARAM_INT);
        $stmt15->execute();

        $time = time();

        $stmt8 = $pdo->prepare("SELECT * FROM auction WHERE etime < :time AND closed < 1");
        $stmt8->bindParam(":time", $time, PDO::PARAM_INT);
        $stmt8->execute();

        while($row = $stmt8->fetch(PDO::FETCH_ASSOC)){
            $id = $row['ID'];
            $holder = $row['holder'];
            $owner = $row['owner'];

            $stmt5 = $pdo->prepare("UPDATE auction SET closed = 50 WHERE ID = :id");
            $stmt5->bindParam(":id", $id, PDO::PARAM_INT);
            $stmt5->execute();

            $stmt3 = $pdo->prepare("SELECT * FROM user WHERE username = :holder");
            $stmt3->bindParam(":holder", $holder, PDO::PARAM_STR);
            $stmt3->execute();

            $row2 = $stmt3->fetch(PDO::FETCH_ASSOC);
            $fbtokenh = $row2['fbtoken'];

            $fbtokenh++;

            $stmt4 = $pdo->prepare("UPDATE user WHERE username = :holder SET fbtoken = :fbtoken");
            $stmt4->bindParam(":holder", $holder, PDO::PARMA_STR);
            $stmt4->bindParam(":fbtoken", $fbtokenh, PDO::PARAM_INT);
            $stmt4->execute();

            $stmt6 = $pdo->prepare("SELECT * FROM user WHERE username = :owner");
            $stmt6->bindParam(":owner", $owner, PDO::PARAM_STR);
            $stmt6->execute();

            $row3 = $stmt6->fetch(PDO::FETCH_ASSOC);
            $fbtokeno = $row2['fbtoken'];

            $fbtokeno++;

            $stmt7 = $pdo->prepare("UPDATE user WHERE username = :owner SET fbtoken = :fbtoken");
            $stmt7->bindParam(":owner", $owner, PDO::PARAM_STR);
            $stmt7->bindParam(":fbtoken", $fbtokeno, PDO::PARAM_INT);
            $stmt7->execute();

        }
    }catch(PDOException $e){
        echo $e->getMessage();
}

if(isset($_GET['searchbox'])){
    $search = $_GET['searchbox'];
}
?>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Trade diving equipment online at DiveBay</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="js/jquery.countdown.css" />
<script type="text/javascript" src="js/jquery.countdown.js"></script>
<script src="js/menuscript.js" language="javascript" type="text/javascript"></script>
<link rel="stylesheet" type="text/css" href="css/menustyle.css" media="screen, print" />
<link rel="stylesheet" type="text/css" href="css/searching.css" />

</head>

<body>
<center>
    <div id="wrapper">

        <div id="header">
            <div id="hbackground">
                <img src="db3.jpg" alt="hbackground" width="100%" height="100%" style="z-index:1;" />
                <div id="htitle">
                    <span id="banner">DIVEBAY.COM</span>
                    <span id="byline">SEARCHING FOR STUFF ONLINE</span>

                    <table border="0" cellpadding="0" cellspacing="0" style="float:right; background-color:transparent;">
                        <tr>
                            <td>
                                <a href="search.php" onmouseover="setOverImg('1','');" onmouseout="setOutImg('1','');" target=""><img src="buttons/button1up.png" border="0" id="button1" vspace="1" hspace="1"></a><br>
                                <a href="sellanitem.php" onmouseover="setOverImg('2','');" onmouseout="setOutImg('2','');" target=""><img src="buttons/button2up.png" border="0" id="button2" vspace="1" hspace="1"></a><br>
                                <a href="forum.php" onmouseover="setOverImg('3','');" onmouseout="setOutImg('3','');" target=""><img src="buttons/button3up.png" border="0" id="button3" vspace="1" hspace="1"></a><br>
                                <a href="myaccount.php" onmouseover="setOverImg('4','');" onmouseout="setOutImg('4','');" target=""><img src="buttons/button4up.png" border="0" id="button4" vspace="1" hspace="1"></a><br>
                                <a href="support.php" onmouseover="setOverImg('5','');" onmouseout="setOutImg('5','');" target=""><img src="buttons/button5up.png" border="0" id="button5" vspace="1" hspace="1"></a><br>
<?php
if(isset($_SESSION['loggedin'])){
?>
                                <a href="logout.php" onmouseover="setOverImg('7','');" onmouseout="setOutImg('7','');" target=""><img src="buttons/button7up.png" border="0" id="button7" vspace="1" hspace="1"></a><br>
<?php
}else{
?>
                                <a href="login_to_divebay.php" onmouseover="setOverImg('6','');" onmouseout="setOutImg('6','');" target=""><img src="buttons/button6up.png" border="0" id="button6" vspace="1" hspace="1"></a><br>
<?php
}
?>

                            </td>
                        </tr>
                    </table>

                </div>
            </div>

        </div>

        <div id="searchandlog">
            <div id="search">
                <form id="searchdivebay" action="search.php" method="get">
                    <div id="searchboxholder"><input type="text" name="searchbox" id="searchbox" /></div>
                    <div id="searchbuttonholder"><input type="submit" name="searchbutton" id="searchbutton" value="Search DiveBay"/></div>
                    <input type="hidden" id="submit" name="submit" value="1"/>
                </form>
            </div>
            <div id="login">
<?php
if(isset($_SESSION['loggedin'])){
    echo '<span class="price1">Logged in as:</span>&nbsp;<span class="sessionset">'.$_SESSION['username'].'</span>';
}
else{
    echo '<ul class="signreg">
            <li><i>Existing user?</i><a href="login_to_divebay.php">SIGN IN</a></li>
            <li><i>or, new?</i><a href="createacct.php">REGISTER</a></li>
          </ul>';
}               
?>
            </div>
        </div>

<?php
if(isset($_POST['searchbox'])){

if($search == ""){
?>
    <p style="color:black; font-size:18pt; font-family: Impact; "> You didn"t search for anything!</p>
<?php
}else{
try{
    $time = time();
    $stmt12 = $pdo->prepare('SELECT * FROM auction WHERE name LIKE :name');
    $stmt12->bindParam(':name', '%'. trim($search) .'%',PDO::PARAM_STR);

    $stmt12->execute();

    $numrows = 0;
?>

        <div id="searchresults"><span style="font-style:italic; font-size: 14pt; font-family:Impact;">Search results for: </span>&nbsp<span id="searchword"><?php echo $search; ?></span></div>
        <div id="content">
        <table id="displaying" class="displayer">
<?php

while($row = $stmt12->fetch(PDO::FETCH_ASSOC)){
        $numrows++;
        $ID = $row['ID'];
        $img = $row['img'];
        $desc = $row['description'];
        $name = $row['name'];
        $owner = $row['owner'];
        $cprice = $row['sprice'];
        $iprice = $row['iprice'];
        $incprice = $row['incprice'];
        $etime = $row['etime'];
        $nextBid = $cprice + $incprice;

$stmt21 = $pdo->prepare("SELECT * FROM user WHERE username = :username");
$stmt21->bindParam(":username", $owner,PDO::PARAM_STR);
$stmt21->execute();

$thisuser = $stmt21->fetch(PDO::FETCH_ASSOC);
$location = $thisuser['location'];

        echo'
        <tr class="resultindex">

        <td class="imgCol"><a href="displayAuct.php?id='.$ID.'"><img src="'.$img.'" alt="'.$name.'" /></a></td>
        <td class="infoCol">

            <div class="nameDiv">
                <a class="nameLink" href="displayAuct.php?id='.$ID.'">'.$name.'</a><br/>
            </div>
            <div class="descDiv">
                <span class="priceLabel2">'.$desc.'</span>
            </div>

            <div class="userdiv">
                <span class="fromuser">Location: </span><br/>
                <span class="location">'.$location.'</span>
            </div>
        </td>
        <td style="width:1px; background-color:#330066;" ></td>
        <td class="priceCol">
            <div class="currentp"><span class="priceLabel">Current Bid: </span><br/><span class="price1">$'.$cprice.'</span></div>
            <div class="instantp"><span class="priceLabel2">Instant Sale: </span><br/><span class="price2">$'.$iprice.'</span></div>
            <div style="height:5px;"></div>
            <div class="incp"><span class="priceLabel2">Next Bid:</span><br/><span class="price2">$'.$nextBid.'</span></div>
        </td>
        <td style="width:1px; background-color:#330066;"></td>
        <td class="timerCol">
            <div id="timeRow">
                <span class="timeleft">Time Left: </span>
            </div>
            <div id="countdownRow"></div>

            <script type=text/javascript>
            var timestamp = '. $etime * 1000 .';
            var endTime = new Date();
            endTime.setTime(timestamp);

            $("#countdownRow").countdown({until: endTime});

            </script>
        </td>
        </tr>
        ';
    }
    if($numrows == 0){
?>
        <tr>
        <td colspan="6"><span class="price1">Sorry your search returned no results</span></td>
        </tr>
<?php
    }
    else{
?>
        <tr>
        <td colspan="6"><span class="price1">Displaying <?php echo $numrows; ?> results</span></td>

    </tr>
<?php
    $pdo = null;
    }
    }catch(PDOException $e){
        echo $e->getMessage();
    }
}
?>

    </table>

    </div>
<?php
}else{
?>
    <div id="searchresults"><span style="font-style:italic; font-size: 14pt; font-family:Impact;">Hurry, these auctions dont have long left!:</span></div>
    <div id="content">
    <table id="displaying" class="displayer">
<?php
try{
    $time = time();
    $in15 = time() + 900;
    $stmt55 = $pdo->prepare('SELECT * FROM auction WHERE etime < :etime AND etime > :time ORDER BY etime');
    $stmt55->bindParam(':etime', $in15, PDO::PARAM_INT);
    $stmt55->bindParam(':time', $time, PDO::PARAM_INT);

    $stmt55->execute();

    while($row = $stmt55->fetch(PDO::FETCH_ASSOC)){
        $ID = $row['ID'];
        $img = $row['img'];
        $desc = $row['description'];
        $name = $row['name'];
        $owner = $row['owner'];
        $cprice = $row['sprice'];
        $iprice = $row['iprice'];
        $incprice = $row['incprice'];
        $etime = $row['etime'];
        $nextBid = $cprice + $incprice;

        $stmt23 = $pdo->prepare("SELECT * FROM user WHERE username = :username");
        $stmt23->bindParam(":username", $owner,PDO::PARAM_STR);
        $stmt23->execute();

        $thisuser = $stmt23->fetch(PDO::FETCH_ASSOC);
        $location = $thisuser['location'];

        echo'
        <tr class="resultindex">

        <td class="imgCol"><a href="displayAuct.php?id='.$ID.'"><img src="'.$img.'" alt="'.$name.'" /></a></td>
        <td class="infoCol">

            <div class="nameDiv">
                <a class="nameLink" href="displayAuct.php?id='.$ID.'">'.$name.'</a><br/>
            </div>
            <div class="descDiv">
                <span class="priceLabel2">'.$desc.'</span>
            </div>

            <div class="userdiv">
                <span class="fromuser">Location: </span><br/>
                <span class="location">'.$location.'</span>
            </div>
        </td>
        <td style="width:1px; background-color:#330066;" ></td>
        <td class="priceCol">
            <div class="currentp"><span class="priceLabel">Current Bid: </span><br/><span class="price1">$'.$cprice.'</span></div>
            <div class="instantp"><span class="priceLabel2">Instant Sale: </span><br/><span class="price2">$'.$iprice.'</span></div>
            <div style="height:5px;"></div>
            <div class="incp"><span class="priceLabel2">Next Bid:</span><br/><span class="price2">$'.$nextBid.'</span></div>
        </td>
        <td style="width:1px; background-color:#330066;"></td>
        <td class="timerCol">
            <div id="timeRow">
                <span class="timeleft">Time Left: </span>
            </div>
            <div id="countdownRow"></div>

            <script type=text/javascript>
            var timestamp = '. $etime * 1000 .';
            var endTime = new Date();
            endTime.setTime(timestamp);

            $("#countdownRow").countdown({until: endTime});

            </script>
        </td>
        </tr>
        ';

    }
    $pdo = null;
    }catch(PDOException $e){
        echo $e->getMessage();
    }
}
?>

    </table>

    </div>

    <div id="sitemap">
    </div>
    </div>
</center>
</body>

</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T04:56:24.557

您的 SQL 稍有偏差，您`*`的`DELETE`. 给出一个列列表是没有意义的，因为`DELETE`总是删除一整行；

```
DELETE * FROM auction WHERE etime < :time 
```

应该

```
DELETE FROM auction WHERE etime < :time 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-09-28T14:48:26.697

> 我被抛出一个错误

你不是。

事实上，您会收到一条信息更丰富的错误消息，*包括发生错误的确切位置*。但是由于某种原因，您正在使用删除所有有用信息的代码，向您抛出赤裸裸的错误消息。

> 找不到来源

如果您[摆脱这些 try 和 catch 操作符](http://phpdelusions.net/delusion/try-catch)，您将使自己完全了解发生错误的确切查询。

# android - 刷新按钮onClick Listview数据必须在android中更新

> ID：12453290
> 
> 赞同：0
> 
> 时间：2012-09-17T04:53:08.257
> 
> 标签：android, android-layout, android-intent, android-emulator

> **可能重复：**
> [如何刷新 Android 列表视图？](https://stackoverflow.com/questions/2250770/how-to-refresh-android-listview)

我正在寻找使用刷新按钮刷新列表视图数据.. DES：在我的应用程序中有刷新按钮，当我点击它时来自服务器的列表视图数据必须刷新并显示更新列表视图数据。
我不知道该怎么做。请给我举个例子..提前谢谢。下面是我的代码。

Mainactivity.java

```
listView = (ListView) findViewById(R.id.homelistView);
listView.setTextFilterEnabled(true);   
final EfficientAdapter objectAdapter = new EfficientAdapter(this);
listView.setAdapter(objectAdapter);

Button refreshButton= (Button)findViewById(R.id.refreshButton);
 refreshButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    objectAdapter.notifyDataSetChanged();

    }
}); 
```

高效适配器.java

```
public static class EfficientAdapter extends BaseAdapter {
    private LayoutInflater mInflater;
    private Context context;

    public EfficientAdapter(Context context) {
        mInflater = LayoutInflater.from(context);
        this.context=context;

    }

    public int getCount() {
        return CountriesList.name.length;
    }

    public Object getItem(int position) {

        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.homemplebrowview, null);
            holder = new ViewHolder();
            holder.text1 = (TextView) convertView
                    .findViewById(R.id.name);
            holder.text2 = (TextView) convertView
                    .findViewById(R.id.mrn);
            holder.text3 = (TextView) convertView
                    .findViewById(R.id.date);
            holder.text4 = (TextView) convertView
                    .findViewById(R.id.age);
            holder.text5 = (TextView) convertView
                    .findViewById(R.id.gender);
            holder.text6 = (TextView) convertView
                    .findViewById(R.id.wardno);
            holder.text7 = (TextView) convertView
                    .findViewById(R.id.roomno);
            holder.text8 = (TextView) convertView
                    .findViewById(R.id.bedno);                  
            holder.btnList = (Button)convertView.findViewById(R.id.listbutton);
         //   holder.btnList.setOnClickListener(this);

            holder.btnList.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {                       
                    Intent next=new Intent(context, SeviceDetails.class);
                    context.startActivity(next);
                }
            });

            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.text1.setText(CountriesList.name[position]);
        holder.text2.setText(CountriesList.mrn[position]);
        holder.text3.setText(CountriesList.actualstart[position]);
        holder.text4.setText(CountriesList.age[position]);
        holder.text5.setText(CountriesList.gender[position]);
        holder.text6.setText(CountriesList.wardNo[position]);
        holder.text7.setText(CountriesList.roomNo[position]);
        holder.text8.setText(CountriesList.bedNo[position]);

        return convertView;
    }

    static class ViewHolder {
        public Button btnList;
        public TextView text8;
        public TextView text7;
        public TextView text6;
        public TextView text5;
        public TextView text4;
        public TextView text1;
        public TextView text2;
        public TextView text3;
    }

    @Override
    public void notifyDataSetChanged() // Create this function in your adapter class
    {
        super.notifyDataSetChanged();
    }

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T04:55:33.717

在适配器中添加新值并调用`notifyDataSetChanged`.

按照步骤更新列表视图。

```
1) First Add new values to your CountriesList .
2) Before Assign EfficientAdapter to listiew, make one object of it and then assign that object.
3) Create one function in your  EfficientAdapter class called notifyDataSetChanged().
4) Call notifyDataSetChanged() function using EfficientAdapter object. 
```

## 例子

```
EfficientAdapter objectAdapter = new EfficientAdapter(this);
listView.setAdapter(objectAdapter);

@Override
public void notifyDataSetChanged() // Create this function in your adapter class
{
    super.notifyDataSetChanged();
} 
```

**现在在刷新按钮的 onClick 事件上调用 objectAdapter.notifyDataSetChanged()。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T09:59:28.873

你可以做这样的事情

```
public class Mainactivity extends Activity{

ListView listView;
EfficientAdapter objectAdapter;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.mainlayout);

listView = (ListView) findViewById(R.id.homelistView);
listView.setTextFilterEnabled(true);   
objectAdapter = new EfficientAdapter(this);
listView.setAdapter(objectAdapter);

Button refreshButton= (Button)findViewById(R.id.refreshButton);
 refreshButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {

       objectAdapter = new EfficientAdapter(Mainactivity.this);// adapter with new data
       listView.setAdapter(objectAdapter);
       objectAdapter.notifyDataSetChanged();

    }
});

}

} 
```

这是我想告诉你的一个示例：

```
public class second extends Activity{

    ListView listView;
    ArrayAdapter<String> adapter;
    Button button;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);

        listView=(ListView) findViewById(R.id.listView1);
        button=(Button) findViewById(R.id.button1);

        String[] planets = new String[] { "Mercury", "Venus", "Earth", "Mars",  
                "Jupiter", "Saturn", "Uranus", "Neptune"};    
        ArrayList<String> planetList = new ArrayList<String>();  
        planetList.addAll( Arrays.asList(planets) );  

        // Create ArrayAdapter using the planet list.  
        adapter = new ArrayAdapter<String>(this, R.layout.simplerow, planetList);  

        listView.setAdapter(adapter);

        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                String[] planets = new String[] { "Mercury m", "Venus m", "Earth m", "Mars m",  
                        "Jupiter m", "Saturn m", "Uranus m", "Neptune m"};    
                ArrayList<String> planetList = new ArrayList<String>();  
                planetList.addAll( Arrays.asList(planets) );  
                adapter = new ArrayAdapter<String>(second.this, R.layout.simplerow, planetList);

                listView.setAdapter(adapter);
                adapter.notifyDataSetChanged();
            }
        });

    }

} 
```

其中 R.layout.simplerow：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
 android:id="@+id/rowTextView" 
 android:layout_width="fill_parent" 
 android:layout_height="wrap_content"
 android:padding="10dp"
 android:textSize="16sp" >
</TextView> 
```

和 R.layout.second：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

    </ListView>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T04:58:02.997

```
Button refreshButton= (Button)findViewById(R.id.refreshButton);
 refreshButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    /*Intent next=new Intent(MainActivity.this, SeviceDetails.class);
    startActivity(next);*/
     Do a notifyDataSetChanged();

    }
}); 
```

点击了解[更多信息](http://developer.android.com/reference/android/widget/ArrayAdapter.html#notifyDataSetChanged%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T04:58:33.780

您必须向 CountryList 添加新值并调用 notifyDataSetChanged() API。

# ruby-on-rails - 如何使用 EventMachine 进行异步 Thrift 通信？

> ID：12453302
> 
> 赞同：1
> 
> 时间：2012-09-17T04:55:39.350
> 
> 标签：ruby-on-rails, ruby, asynchronous, thrift, eventmachine

目前我正在使用 Thrift 协议在 Rails 应用程序和 HBase 之间使用同步通信：

```
table = HBaseRb::Table.new ThriftClientFactory.create("client_name"), "table_name"
i = table.atomic_increment("row_key", "f:count_#{Time.now.getlocal.hour}") 
```

这些代码在模型类中，因此如果 HBase 出现问题，可以**阻止服务。**

为了解决这个问题，我想异步进行 Thrift 通信（非阻塞 I/O）。我认为[EventMachine](https://github.com/eventmachine/eventmachine)可以解决这个问题。但是有几个关于在我的 Rails 应用程序中使用 EventMachine 的问题：

1.  据我所知，EventMachine 就像一个持续监听事件的服务器（或守护进程）。如果是这样，我应该在我的 Rails 应用程序中包含一个小型 EM 服务器吗？

2.  我应该`EventMachine.start_server :host, : port, :server_module`用来做我想做的事吗？如果是这样，**HTTP 请求**是我向 EM 服务器发送事件的方式吗？

如果我对 EM 的理解有误，请告诉我。

感谢您的任何建议/更正。

# solr - Solr 使用 Suggester 的热门搜索词

> ID：12453303
> 
> 赞同：1
> 
> 时间：2012-09-17T04:55:54.357
> 
> 标签：solr, search-engine

参考以下源自[http://wiki.apache.org/solr/Suggester](http://wiki.apache.org/solr/Suggester)的 wiki 文本。

“搜索应用程序的一个常见需求是根据不完整的用户输入建议查询词或短语。这些完成可能来自基于主索引或任何其他任意字典的字典。能够仅提供顶部通常很有用-N 个建议，按字母顺序或根据它们对普通用户的有用性（例如受欢迎程度或返回结果的数量）进行排序。”

Solr 如何知道哪些搜索词更受欢迎？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:56:04.967

Solr 自己不知道它，您必须尽自己的一份力量，记录用户所做的所有搜索，并将其提供给 Solr，然后，在您有一些有意义的使用后，您可以将其用于您的建议。

# iphone - 将数组作为 Post 值传递 ASIFormDataRequest

> ID：12453304
> 
> 赞同：0
> 
> 时间：2012-09-17T04:56:08.617
> 
> 标签：iphone, ios, ios5, ios4

我需要将数组传递给 webservice。我已将产品标识符存储到 nsmutablearray 中。我想将此数组传递给我的 php 服务器。所以我有以下事情。

```
__block ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
request.requestMethod = @"POST";
[request setPostValue:product_identifiers forKey:@"product_identifiers"]; 
```

当我 NSLog 我的数组时，

```
 (
        "com.hoiuat.test.loves.oneweek",
        "com.hoiuat.test.loves.oneweek",
        "com.hoiuat.test.loves.oneweek",
        "com.hoiuat.test.loves.oneweek",
        "com.hoiuat.test.loves.oneweek",
        "com.hoiuat.4",
        "com.hoiuat.11",
        "com.hoiuat.3",
        "com.hoiuat.8",
        "com.hoiuat.6"
    ) 
```

Php 开发人员说他们无法将参数作为数组接收。

请让我知道，我应该如何传递数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:14:00.903

这取决于 Web 服务的要求，但您可以将其作为分隔符的字符串传递，如下所示：

```
NSString *postValue = [product_identifiers componentsJoinedByString:@"&"];
NSString *postString = [NSString stringWithFormat:@"product_identifiers=%@, postValue];

// this will generate the string:
// product_identifiers=com.hoiuat.test.loves.oneweek&com.hoiuat.test.loves.oneweek ... 
```

然后像这样设置请求：

```
[request setHTTPBody:[postString dataUsingEncoding:NSUTF8StringEncoding]]; 
```

# tcp - 创建自定义 WSO2 ESB 传输

> ID：12453310
> 
> 赞同：0
> 
> 时间：2012-09-17T04:56:41.797
> 
> 标签：tcp, wso2, wso2esb, esb

我想在 WSO2 ESB 上创建一个新的传输处理器。此传输提供 ISO 8583 消息处理并将 Raw TCP 转换为 SOAP 消息，反之亦然。在源代码上，有一个传输管理对象，由几个传输服务类继承，如JMS、HTTP、HTTPS等。我有几个问题：

1.  传输管理对象如何工作？
2.  是否可以重新编码 TCP 服务源代码并使用我的自定义操作重新部署？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:18:20.353

WSO2 ESB 由 Apache Synapse 提供支持，它使用 Axis2 Transports 来提供传输层。您可以编写一个新的 Axis2 传输并将其插入 WSO2 ESB。资源可以在[这里](http://axis.apache.org/axis2/java/core/docs/axis2config.html#Receiver)和[这里](http://synapse.apache.org/transports.html)找到。

问候，/女娲

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-04T09:52:40.740

WSO2 ESB 中有针对特定客户要求编写的自定义传输实现。FIX（财务信息交换）就是这样一种自定义传输。如果您浏览此传输的源代码，您可以了解如何编写自定义传输。

[https://github.com/wso2/wso2-synapse/tree/master/modules/transports/optional/fix](https://github.com/wso2/wso2-synapse/tree/master/modules/transports/optional/fix)

这是我写的一篇博客文章，用于解释为 ISO8583 协议创建自定义传输的过程。

[http://soatutorials.blogspot.com/2015/06/extending-wso2-esb-with-custom_21.html](http://soatutorials.blogspot.com/2015/06/extending-wso2-esb-with-custom_21.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T20:43:19.637

将原始 TCP 暴露给 ESB 的另一种方法是创建一个 ActiveMQ 队列来侦听原始 TCP 并使它们对 ESB 可用。

# random - 使 CURAND 从均匀分布中生成不同的随机数

> ID：12453312
> 
> 赞同：3
> 
> 时间：2012-09-17T04:56:58.447
> 
> 标签：random, cuda, seed

我正在尝试使用 CURAND 库生成从 0 到 100 完全相互独立的随机数。因此，我将时间作为每个线程的种子并指定“id = threadIdx.x + blockDim.x * blockIdx.x "作为序列和偏移量。然后将随机数设为浮点数后，将其乘以 100 并取其整数值。

现在，我面临的问题是它为线程 [0,0] 和 [0,1] 获得相同的随机数，无论我运行多少次 11 的代码。我无法理解是什么我做错了。请帮忙。

我在下面粘贴我的代码：

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include<curand_kernel.h>
#include "util/cuPrintf.cu"
#include<time.h>

#define NE WA*HA //Total number of random numbers 
#define WA 2   // Matrix A width
#define HA 2   // Matrix A height
#define SAMPLE 100 //Sample number
#define BLOCK_SIZE 2 //Block size

__global__ void setup_kernel ( curandState * state, unsigned long seed )
{
int id = threadIdx.x  + blockIdx.x + blockDim.x;
curand_init ( seed, id , id, &state[id] );
}

__global__ void generate( curandState* globalState, float* randomMatrix )
{
int ind = threadIdx.x + blockIdx.x * blockDim.x;
if(ind < NE){
    curandState localState = globalState[ind];
    float stopId = curand_uniform(&localState) * SAMPLE;
    cuPrintf("Float random value is : %f",stopId);
    int stop = stopId ;
    cuPrintf("Random number %d\n",stop);
    for(int i = 0; i < SAMPLE; i++){
            if(i == stop){
                    float random = curand_normal( &localState );
                    cuPrintf("Random Value %f\t",random);
                    randomMatrix[ind] = random;
                    break;
            }
    }
    globalState[ind] = localState;
}
}

/////////////////////////////////////////////////////////
// Program main
/////////////////////////////////////////////////////////

int main(int argc, char** argv)
{

// 1\. allocate host memory for matrix A
unsigned int size_A = WA * HA;
unsigned int mem_size_A = sizeof(float) * size_A;
float* h_A = (float* ) malloc(mem_size_A);
time_t t;

// 2\. allocate device memory
float* d_A;
cudaMalloc((void**) &d_A, mem_size_A);

// 3\. create random states    
curandState* devStates;
cudaMalloc ( &devStates, size_A*sizeof( curandState ) );

// 4\. setup seeds
int n_blocks = size_A/BLOCK_SIZE;
time(&t);
printf("\nTime is : %u\n",(unsigned long) t);
setup_kernel <<< n_blocks, BLOCK_SIZE >>> ( devStates, (unsigned long) t );
// 4\. generate random numbers
cudaPrintfInit();
generate <<< n_blocks, BLOCK_SIZE >>> ( devStates,d_A );
cudaPrintfDisplay(stdout, true);
cudaPrintfEnd();
// 5\. copy result from device to host
cudaMemcpy(h_A, d_A, mem_size_A, cudaMemcpyDeviceToHost);

// 6\. print out the results
printf("\n\nMatrix A (Results)\n");
for(int i = 0; i < size_A; i++)
{
   printf("%f ", h_A[i]);
   if(((i + 1) % WA) == 0)
      printf("\n");
}
printf("\n");

// 7\. clean up memory
free(h_A);
cudaFree(d_A);

} 
```

我得到的输出是：

时间为：1347857063 **[0, 0]：浮点随机值为：11.675105[0, 0]：随机数 11** [0, 0]：随机值 0.358356 **[0, 1]：浮点随机值为：11.675105[0, 1 ]：随机数 11** [0, 1]：随机值 0.358356 [1, 0]：浮点随机值是：63.840496[1, 0]：随机数 63 [1, 0]：随机值 0.696459 [1, 1]：浮点随机值为：44.712799[1, 1]：随机数 44 [1, 1]：随机值 0.735049

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:01:28.310

这里有一些问题，我在这里解决第一个问题以帮助您入门：

**一般要点**

*   请检查所有 CUDA API 调用的返回值，请参阅[此处](https://stackoverflow.com/tags/cuda/info)了解更多信息。
*   请运行 cuda-memcheck 来检查明显的事情，比如越界访问。

**具体点**

*   When allocating space for the RNG state, you should have space for one state per thread (not one per matrix element as you have now).
*   Your thread ID calculation in setup_kernel() is wrong, should be `threadIdx.x + blockIdx.x * blockDim.x` (* instead of +).
*   You use the thread ID as the sequence number as well as the offset, you should just set the offset to zero as described in the cuRAND manual:

> For the highest quality parallel pseudorandom number generation, each experiment should be assigned a unique seed. Within an experiment, each thread of computation should be assigned a unique sequence number.

最后你每个块运行两个线程，这是非常低效的。查看 CUDA C 编程指南，在“最大化利用率”部分以获取更多信息，但您应该寻找每个块启动 32 个线程的倍数（例如 128、256）和大量块（例如数万）。如果您的问题很小，那么考虑一次运行多个问题（在单个内核启动中批处理或作为不同流中的内核以获得并发执行）。

# clojure - -> 在遇到 nil/false 返回时中断评估的运算符

> ID：12453318
> 
> 赞同：7
> 
> 时间：2012-09-17T04:57:50.240
> 
> 标签：clojure

我想通过一系列函数对输入进行线程化，这正是 -> 运算符所做的。但是，如果任何函数返回 nil / false 那么我想中断评估并返回错误消息。我该怎么做，是否有一些提供此功能的运算符/宏？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T05:05:21.237

试试这个：[`-?>`](http://clojuredocs.org/clojure_contrib/clojure.contrib.core/-_q%3E) 来自文档：

```
(-?> "foo" .toUpperCase (.substring 1)) returns "OO"
(-?> nil .toUpperCase (.substring 1)) returns nil 
```

如果您将使用`->`宏作为第二个示例，您肯定会得到`NullPointerException`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T14:21:06.040

中还有`maybe-m`单子`clojure.algo.monads`。作为 monads 框架的一部分，它比宏更重量级，因此如果您仍然使用 monads 或者如果您的计算图比简单的函数链更复杂`-?>`，那么使用它是有意义的。`maybe-m`

与线程宏不同，`domonad`组合可以处理多个参数函数，这些函数从多个先前的计算步骤中获取参数：

```
(domonad maybe-m
    [a 1
     b nil
     c (* a b)]
    c) 
```

在这个例子中，`(* a b)`不会被评估，因为`b`它是 nil。整个表达式将返回 nil 而不是在尝试乘以 nil 时抛出异常。

# javascript - How to get data as JSON from a Sharepoint issuer tracker to display in FullCalendar JS

> ID：12453320
> 
> 赞同：0
> 
> 时间：2012-09-17T04:58:05.667
> 
> 标签：javascript, sharepoint, sharepoint-2007, fullcalendar

Can someone please help me on how to get Sharepoint Issuer tracker list data as JSON data using (AJAX) so that i can use it in FullCalendar JS.

We have our Vacation Tracking done using Sharepoint Issuer tracker and we want to display approved request in the Calendar view (using FullCalendar JS).

We are currently using SP 2007.

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:01:46.027

In MOSS 2007 there is no official JSON support or libraried. You will have to write your own web service which can use the Server Object Model and read data from the issue tracker list.

# java - 在 LibGDX 中滚动 TiledMap

> ID：12453321
> 
> 赞同：2
> 
> 时间：2012-09-17T04:58:17.707
> 
> 标签：java, libgdx, 2d-games

我目前正在使用 TiledMap、SimpleTiledAtlas（仍然无法弄清楚如何使用包文件）和 TileMapRenderer，遵循本教程：[http](http://code.google.com/p/libgdx-users/wiki/Tiles) ://code.google.com/p/libgdx-users/wiki/Tiles 。

我不知道如何访问地图的 xyz 或如何更改它。对于初始化：

```
map = TiledLoader.createMap(Gdx.files.internal("tiles/tiles.tmx"));
    atlas = new SimpleTileAtlas(map, Gdx.files.internal("tiles/"));
    tileMapRenderer = new TileMapRenderer(map, atlas, 128, 128, 8, 8); 
```

对于我的渲染：

```
camera.zoom = 1.0f;
    camera.update();
    tileMapRenderer.render(camera);
    batch.begin();
    font.draw(batch, "FPS: " + Gdx.graphics.getFramesPerSecond(), 20, 20);
    tmp.set(0, 0, 0);
    camera.unproject(tmp);
    batch.end(); 
```

我试过改变 tmp xyz 但它似乎不起作用。TileMapRenderer 和 TiledMap 似乎也没有 x 和 y 字段。我是错过了什么还是太累了没注意到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T13:04:39.033

您移动相机，而不是 TiledMap 或 TileMapRenderer。

~~TiledMapTest~~展示了一个如何工作的示例。

* * *

**编辑**

自发布此答案以来，LibGDX 中的瓦片地图 api 已更改。

有关使用新 api 的等效测试，请参阅[TiledMapDirectLoaderTest 。](https://github.com/libgdx/libgdx/blob/master/tests/gdx-tests/src/com/badlogic/gdx/tests/TiledMapDirectLoaderTest.java)

# css - 嵌套元素时覆盖 em 字体大小

> ID：12453324
> 
> 赞同：4
> 
> 时间：2012-09-17T04:59:04.307
> 
> 标签：css, overriding, font-size

当您有嵌套元素时，如何覆盖 font-size 属性？使用*!important*似乎没有任何效果。

```
div {
    font-size:6em;  
}
p {
    font-size:1em !important;
}
span {

    font-size:1em;
} 
```

-

```
<html>
<body>
    <div><span>span</span><p>paragraph</p></div>
</body>
</html>​ 
```

​</p>

[http://jsfiddle.net/dvUTQ/](http://jsfiddle.net/dvUTQ/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T05:07:13.883

Em 是其父元素的相对大小。

[http://jsfiddle.net/dvUTQ/3/](http://jsfiddle.net/dvUTQ/3/)

```
div#small {
  font-size:2em; 
}
div#big {
  font-size:6em;
}
p {
  font-size:.5em; /* effective sizes: big: 3em, small: 1em */
}
span {
  font-size:2em; /* effective sizes: big: 12em, small: 4em */
} 
```

将子元素设置为 1em 只会使其大小与其父元素相同。在这种情况下，p 上的 .5em 将有效地使其变为 3em。

[http://www.w3schools.com/cssref/css_units.asp](http://www.w3schools.com/cssref/css_units.asp)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T08:50:35.700

除了[dmzza 的回答](https://stackoverflow.com/a/12453377/880619)：该[`!important`](http://www.w3.org/TR/CSS21/cascade.html#important-rules)规则仅在样式表中的选择器具有冲突[特异性](http://www.w3.org/TR/CSS21/cascade.html#specificity)时才有效。

在您的情况下，没有冲突，因此该`!important`规则不会产生任何影响。

当您有冲突的特异性时，最好为异常创建一个更具体的选择器。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-10T15:14:51.133

您可以使用 CSS3 rem 单位，它是相对于根而不是父级的。我一直陷入同样的​​困境，因为我正在处理的项目有太多嵌套元素，以至于 em 不可靠。

您可以在此处找到更多信息[http://snook.ca/archives/html_and_css/font-size-with-rem](http://snook.ca/archives/html_and_css/font-size-with-rem)。

唯一的问题是对 IE8 及更低版本的后备浏览器支持。在声明 rem 大小之前，您仍然需要提供像素大小。尽管有这些额外的编码，它可能仍然值得研究。

# java - dynamically create expandablelistview within expandablelistview in android

> ID：12453328
> 
> 赞同：-1
> 
> 时间：2012-09-17T04:59:35.497
> 
> 标签：java, android, expandablelistview, expandablelistadapter

i have developed one dynamic expandablelistview successfully...how is dynamically create expandablelictview within another expandalilistview. this is my code:

```
public class SingleMenuItemActivity extends ExpandableListActivity {
Button btninsert;   
String selectedItem;

static final String KEY_NAME = "orderid"; 
static final String KEY_STATUS = "status"; 
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.particular);
Button btninsert = (Button) findViewById(R.id.btn_insert);
btninsert.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) {
     String s= getIntent().getStringExtra("orderid");
     String s1= getIntent().getStringExtra("status");
Intent i = new Intent(getApplicationContext(), InsertionExample.class);
i.putExtra(KEY_NAME, s);
i.putExtra(KEY_STATUS, s1);
startActivity(i);
}
});

    // Construct Expandable List
    final String NAME1 = "payment_method1";
    final String NAME = "payment_method";
    final String TOTAL = "total";
    final String TOTAL1 = "total1";

    final String IMAGE = "image"; 
    final String FNAME1 = "firstname1";

    final String FNAME = "firstname";
    final String LNAME1 = "lastname1";
    final String LNAME = "lastname";
    final String PHONE1 = "phone1";

    final String PHONE = "phone";
    final String EMAIL1 = "email1";
    final String EMAIL = "email";
    final LayoutInflater layoutInflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    final ArrayList<HashMap<String, String>> headerData = new ArrayList<HashMap<String, String>>();

    final HashMap<String, String> group1 = new HashMap<String, String>();
    group1.put(NAME, "OrderInfo");
    headerData.add( group1 );

    final HashMap<String, String> group2 = new HashMap<String, String>();
    group2.put(NAME, "CustomerInfo");
    headerData.add( group2);

    final ArrayList<ArrayList<HashMap<String, Object>>> childData = new ArrayList<ArrayList<HashMap<String, Object>>>();

    final ArrayList<HashMap<String, Object>> group1data = new ArrayList<HashMap<String, Object>>();
    childData.add(group1data);
    final ArrayList<HashMap<String, String>> group2data = new ArrayList<HashMap<String,String>>();
    final HashMap<String, String> group3 = new HashMap<String, String>();
    group3.put(NAME, "PersonalInfo");
    group2data.add( group3 );

    final HashMap<String, String> group4 = new HashMap<String, String>();
    group4.put(NAME, "ContactInfo");
    group2data.add( group4 );
    final ArrayList<HashMap<String, Object>> group3data = new ArrayList<HashMap<String, Object>>();
    childData.add(group3data);
    final ArrayList<HashMap<String, Object>> group4data = new ArrayList<HashMap<String, Object>>();
    childData.add(group4data);

    // Set up some sample data in both groups

        final HashMap<String, Object> map = new HashMap<String,Object>();
        String s= getIntent().getStringExtra("payment_method");
        String s1= getIntent().getStringExtra("total");

        map.put(NAME1, "Payment_method:");
        map.put(NAME, s );
        map.put(TOTAL1, "Total:");
        map.put(TOTAL, s1);

        group1data.add(map);
     //  map.put(IMAGE, getResources().getDrawable((i%3==0? R.drawable.color_green : R.drawable.color_red)));
      //  ( i%2==0 ? group1data : group2data ).add(map);

    final HashMap<String, Object> map1 = new HashMap<String,Object>();
    String s2= getIntent().getStringExtra("firstname");
    String s3= getIntent().getStringExtra("lastname");

    map1.put(FNAME, s2);
    map1.put(FNAME1, "Firstname:");
    map1.put(LNAME, s3);
    map1.put(LNAME1, "Lastname:");

 //  map.put(IMAGE, getResources().getDrawable(R.drawable.color_yellow));

    group3data.add(map1);

    final HashMap<String, Object> map2 = new HashMap<String,Object>();
    String s4= getIntent().getStringExtra("phone");
    String s5= getIntent().getStringExtra("email");

    map2.put(PHONE, s4);
    map2.put(PHONE1, "Phone:");
    map2.put(EMAIL, s5);
    map2.put(EMAIL1, "Email:");

 //  map.put(IMAGE, getResources().getDrawable(R.drawable.color_yellow));
    group4data.add(map2);

    setListAdapter( new SimpleExpandableListAdapter(
            this,
            headerData,
            R.layout.group_row,
            new String[] { NAME },    // the names of the data
            new int[] { R.id.order },
            // the text field to populate with the field data
            childData,
            0,
            null,
            new int[] {}
        ) {
            @Override
            public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {
                final View v = super.getChildView(groupPosition, childPosition, isLastChild, convertView, parent);

              //  Spinner spinner = (Spinner) findViewById(R.id.spnMusketeers);

                // Populate your custom view here
                ((TextView)v.findViewById(R.id.payment_method1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(NAME1) );
                ((TextView)v.findViewById(R.id.payment_method)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(NAME) );
                ((TextView)v.findViewById(R.id.phone1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(PHONE1) );
                ((TextView)v.findViewById(R.id.phone)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(PHONE) );
                ((TextView)v.findViewById(R.id.email1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(EMAIL1) );
                ((TextView)v.findViewById(R.id.email)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(EMAIL) );

                ((TextView)v.findViewById(R.id.firstname)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(FNAME) );
                ((TextView)v.findViewById(R.id.firstname1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(FNAME1) );
                ((TextView)v.findViewById(R.id.total1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(TOTAL1) );
                ((TextView)v.findViewById(R.id.total)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(TOTAL) );
                ((TextView)v.findViewById(R.id.lastname)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(LNAME) );
                ((TextView)v.findViewById(R.id.lastname1)).setText( (String) ((Map<String,Object>)getChild(groupPosition, childPosition)).get(LNAME1) );

                return v;
            }

            @Override
            public View newChildView(boolean isLastChild, ViewGroup parent) {

                 return layoutInflater.inflate(R.layout.expandable_list_item_with_image,null, false);

            }
        }
    );

    ExpandableListView list = (ExpandableListView) findViewById(android.R.id.list);
    list.setOnChildClickListener(new OnChildClickListener(){
        public boolean onChildClick(ExpandableListView parent, View v,
                int groupPosition, int childPosition, long id) {
            System.out.println("Group:"+groupPosition+", Child: "+childPosition);
            return true;
        }
    });

}} 
```

Here i wish to display the output is below format:

```
---->Orderinfo
            * payment_method
            * total
---->Customerinfo
         ---->Personalinfo
            * firstname
            * lastname
         ----->Contactinfo
            * phone
            * email 
```

Here i can't develop this.

here how can i implement my code???

here i have created headerData(orderinfo,customerinfo) and group2data(personalinfo,contactinfo) for creating groups.Here i have used headerData only on below code.

```
setListAdapter( new SimpleExpandableListAdapter(
            this,
            headerData,
            R.layout.group_row,
            new String[] { NAME },    // the names of the data
            new int[] { R.id.order },
            // the text field to populate with the field data
            childData, 
```

so ly created orderinfo and customerinfo groups only.but i can't add group2data here.here i have add groupdata on this line means i got the following error:

**- Breakpoint:SingleMenuItemActivity - Line breakpoint:SingleMenuItemActivity [line: 134] - onCreate(Bundle) - The constructor SimpleExpandableListAdapter(SingleMenuItemActivity, ArrayList>, ArrayList>, int, String[], int[], ArrayList>>, int, null, int[]) is undefined**

How can i resolve my error.please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:38:25.270

ListView 中的 ListView 变得非常多毛。操作系统在确定要滚动哪个列表视图时遇到问题，尽管这对您来说可能很明显。

无论如何，听起来你应该仔细检查你的参数列表。确保它与该对象的构造函数匹配。

# c#-4.0 - Mdi 面板控制

> ID：12453333
> 
> 赞同：0
> 
> 时间：2012-09-17T05:01:14.100
> 
> 标签：c#-4.0

如何将第二个子窗体添加到 mdi 父窗体“面板控件”...？？我正在将子表单添加到 mdi 父表单的面板控件.. 我有两个子表单，childForm1，childForm2.. 当我单击 mdi 父表单上的按钮时，childForm1 被添加到 mdiParent“面板控件”.. .知道我想将childForm2添加到mdiform“面板控件”，当我单击childForm1上的按钮时......意味着我想将childForm2从childForm1按钮单击事件添加到mdiParent表单“面板控件”......？

谁能帮我....？？？提前致谢.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:16:20.133

使用带有两列的 tablelayoutpanel，在第一列显示 child1 单击第二个按钮在下一列显示下一个子 (2) 并隐藏第一列（列宽 = 0）

# joomla2.5 - 在 VirtueMart 2 购物车和 Joomla 2.5 中修改表格

> ID：12453342
> 
> 赞同：0
> 
> 时间：2012-09-17T05:02:28.797
> 
> 标签：joomla2.5, virtuemart

我正在使用 Virtuemart 2 和 Joomla 2.5

我想修改表格，例如删除列 SKU、Only 和 Dicount 等。

我该怎么做？谢谢。

![在此处输入图像描述](../Images/ee1c85f85d0e04a91516311b52e8958e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:33:37.310

这可以通过一个简单的模板覆盖来完成（从没想过我会这么说VM！！！）

首先你需要复制这个文件：

```
/JOOMLA INSTALL/components/com_virtuemart/views/cart/tmpl/default_pricelist.php 
```

把那个副本放在这里：

```
/JOOMLA INSTALL/templates/YOUR TEMPLATE/html/com_virtuemart/cart/default_pricelist.php 
```

然后就是从复制的文件中删除您不想显示的代码。

# android - Android，如何在 Facebook 对话框中放置消息？

> ID：12453347
> 
> 赞同：0
> 
> 时间：2012-09-17T05:03:06.423
> 
> 标签：android, facebook, dialog, screen

经过两天的搜索，我终于可以将 Facebook SDK 集成到我的应用程序中。我的问题是当我设置捆绑并显示对话框界面时，某些部分的行不在屏幕上。这是我的代码：

```
 private void postFacebookMessage() {
            Log.i(TAG, "Try to post message");

            token = mFacebook.getAccessToken();
            Log.i("token", "" + token);

            Bundle parameters = new Bundle();
            parameters.putString("access_token", token);
            parameters.putString("message", "This is test message.");
            parameters.putString("name", "Chef Astro");
            parameters.putString("link", "http://www.astrogempak.com.my");
            parameters.putString("caption", message);
            parameters.putString("description", "");
            parameters.putString("picture","http://a1.mzstatic.com/us/r30/Purple/v4/2d/7d/c3/2d7dc3ed-9e32-cd7b-adba-2a31637a8cf0/mzl.toeyydsk.175x175-75.jpg");

    //      mAsyncRunner.request("me/feed", parameters, "POST", new WallPostRequestListener(), null); 
            mFacebook.dialog(FacebookActivity.this, "feed", parameters, new SampleDialogListener());
    } 
```

我`message`输入`description`但结果是一样的。如何在对话框中放置消息？ ![在此处输入图像描述](../Images/fa9203b6f57ccd5511161c217d078a3c.png)

# android - 意图不起作用（显示错误）

> ID：12453351
> 
> 赞同：0
> 
> 时间：2012-09-17T05:03:48.707
> 
> 标签：android, android-intent

在图像按钮上开始意图时单击“意图意图=新意图（this，Settings.class）；” 在eclipse中显示错误。我的代码有什么问题吗？这是我的代码..帮助表示赞赏..

```
imageButton =(ImageButton)findViewById(R.id.imageButton4);
        imageButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Intent intent = new Intent(this,Settings.class);
                startActivity(intent);

            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:06:31.487

你应该使用`getApplicationContext()`而不是`this`

```
public void onClick(View v) {
       Intent intent = new Intent(getApplicationContext(), Settings.class);
       startActivity(intent);
      }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:12:54.773

你必须做两件事首先像这样开始你的活动

Intent intent = new Intent(getBaseContext, Setting.class); 开始活动（意图）；

第二件事在默认活动标签下方的应用程序标签内的 Android manifest.xml 中提及此类

我认为这种方式可以解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:08:06.173

试试下面的代码。

```
 public void onClick(View v) {

                Intent intent = new Intent(yourclassName.this,Settings.class);
                startActivity(intent);

            }
        }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T05:16:52.193

做这个

```
imageButton =(ImageButton)findViewById(R.id.imageButton4);
        imageButton.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Intent intent = new Intent(YourCurrentCLass.this,Settings.class);
                startActivity(intent);

            }
        }); 
```

并检查您的清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.sampledatabase"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

如果你只看到`<category android:name="android.intent.category.LAUNCHER" />`

和不`<category android:name="android.intent.category.DEFAULT" />`

像这样创建一个新活动

```
<activity
            android:name=".Settings"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="name.of.your.package.Settings" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

记得把它放在你的`<application`标签里，和你的 .MainActivity 一样

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T20:53:54.013

```
Intent intent = new Intent(this,Settings.class); 
```

使用这行代码

```
 Intent intent = new Intent(yourclassName.this,Settings.class);

    Because you using anonymus class for OnClickListener.
    So you can provide the reference with class name. this 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-09-17T05:06:31.017

在 AndroidManifest.xml 中添加您的设置活动

# eclipse - 如何在 Maven 构建期间解决缺少的 context.xml？

> ID：12453352
> 
> 赞同：2
> 
> 时间：2012-09-17T05:03:48.227
> 
> 标签：eclipse, maven

我有一个使用 Eclipse 构建的 Maven Web 应用程序，并且有这个命令：`install tomcat:deploy`在目标中设置。当我构建应用程序时，我遇到了这个错误：

```
SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
[INFO] Scanning for projects...
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building web4 0.0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ web4 ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/kokhoe/workspace/web4/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ web4 ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ web4 ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/kokhoe/workspace/web4/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ web4 ---
[INFO] Not compiling test sources
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ web4 ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-war-plugin:2.1.1:war (default-war) @ web4 ---
[INFO] Packaging webapp
[INFO] Assembling webapp [web4] in [/home/kokhoe/workspace/web4/target/web4-0.0.1-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [/home/kokhoe/workspace/web4/src/main/webapp]
[INFO] Webapp assembled in [71 msecs]
[INFO] Building war: /home/kokhoe/workspace/web4/target/web4-0.0.1-SNAPSHOT.war
[INFO] WEB-INF/web.xml already added, skipping
[INFO] 
[INFO] --- maven-install-plugin:2.3.1:install (default-install) @ web4 ---
[INFO] Installing /home/kokhoe/workspace/web4/target/web4-0.0.1-SNAPSHOT.war to /home/kokhoe/.m2/repository/org/huahsin/web4/0.0.1-SNAPSHOT/web4-0.0.1-SNAPSHOT.war
[INFO] Installing /home/kokhoe/workspace/web4/pom.xml to /home/kokhoe/.m2/repository/org/huahsin/web4/0.0.1-SNAPSHOT/web4-0.0.1-SNAPSHOT.pom
[INFO] 
[INFO] >>> tomcat-maven-plugin:1.1:deploy (default-cli) @ web4 >>>
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ web4 ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/kokhoe/workspace/web4/src/main/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ web4 ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ web4 ---
[debug] execute contextualize
[INFO] Using 'UTF-8' encoding to copy filtered resources.
[INFO] skip non existing resourceDirectory /home/kokhoe/workspace/web4/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ web4 ---
[INFO] Not compiling test sources
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ web4 ---
[INFO] Tests are skipped.
[INFO] 
[INFO] --- maven-war-plugin:2.1.1:war (default-war) @ web4 ---
[INFO] Packaging webapp
[INFO] Assembling webapp [web4] in [/home/kokhoe/workspace/web4/target/web4-0.0.1-SNAPSHOT]
[INFO] Processing war project
[INFO] Copying webapp resources [/home/kokhoe/workspace/web4/src/main/webapp]
[INFO] Webapp assembled in [14 msecs]
[INFO] Building war: /home/kokhoe/workspace/web4/target/web4-0.0.1-SNAPSHOT.war
[INFO] WEB-INF/web.xml already added, skipping
[INFO] 
[INFO] <<< tomcat-maven-plugin:1.1:deploy (default-cli) @ web4 <<<
[INFO] 
[INFO] --- tomcat-maven-plugin:1.1:deploy (default-cli) @ web4 ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.938s
[INFO] Finished at: Mon Sep 17 12:16:34 MYT 2012
[INFO] Final Memory: 18M/215M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy (default-cli) on project web4: Cannot find context file: /home/kokhoe/workspace/web4/target/web4-0.0.1-SNAPSHOT/META-INF/context.xml -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException 
```

错误提到 context.xml 丢失。我可以知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T03:42:05.037

我通过在 Maven 目标中使用此命令解决了问题：

`install tomcat:run`

# url - 包含非可视字符的 URL

> ID：12453353
> 
> 赞同：2
> 
> 时间：2012-09-17T05:03:49.783
> 
> 标签：url, unicode, web, special-characters, web-crawler

我的爬虫引擎似乎与特定客户的网站有问题。

在该站点上，重定向到如下所示的 URL：

`http://example.com/dir/aaa$0081 aaa.php` （将 URL 显示为未编码，其中 $0081 是使用 HEX 表示的两个字节。）

现在，这是在检查使用 WinInet Windows API 调用 HttpQueryInfo 后返回的缓冲区时，所以此时这两个字节实际上代表了一个 WideChar。

现在，我可以看到例如 $0081 是一个非可视控制字符： [Latin-1 Supplement (Unicode block)](http://en.wikipedia.org/wiki/Latin-1_Supplement_%28Unicode_block%29)

问题是，如果我将 URL “按原样”（URL 编码）用于未来对服务器的请求，它会以 400 或 404 响应。（另一方面，它是否被完全删除，它可以工作并且服务器提供正确的页面和响应...）

我怀疑 FireFox/IE/等。在发出 HTTP 请求之前，正在去除 URL 中的不可见控制字符...（至少 IEHTTPHeaders 和 FF Live HTTP Headers 插件不会显示任何不可见字符。）

我想知道是否有人可以为此指出一个标准？对于我所看到的不应在 URL 中找到不可见字符的内容，因此我认为解决方案可能是（在此和将来的情况下）删除这些。但这似乎不是网络上广泛讨论的话题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:21:34.717

在给出的示例中，$0081 只是五个 Ascii 字符。但是，如果您的意思是这就是它的*样子*，并且您（以某种方式）推断出实际的 URL 包含 U+0081，那么应该发生并且至少在 Firefox 上确实发生的情况是它是 % 编码的（“ URL 编码”）为 %C2%81（由 %-编码 U+0081 的 UTF-8 编码形式的两个字节形成。Firefox 在其地址栏中将其显示为空，因为 U+0081 是控制字符，但服务器实际上得到 %C2%81 并且必须从那里获取它。

我不知道空间来自哪里，但是 URL 不能包含空格，除非是 %-encoded (%20)。

相关标准是 Internet 标准[STD 66](http://www.rfc-editor.org/rfc/std/std66.txt)，*URI Generic Syntax*。（目前为 RFC 3986。请注意：在本期中，人们仍然经常将较旧的 RFC 称为“标准”。）

# python - 为什么在 subversion pre-revprop-change py 脚本中尝试 sys.stdin.read() 时会得到“错误的文件描述符”？

> ID：12453354
> 
> 赞同：3
> 
> 时间：2012-09-17T05:03:57.133
> 
> 标签：python, svn, svn-hooks

我正在 Windows 机器上尝试 pre-revprop-change 挂钩脚本，但发现了一个棘手的问题。

我将我的问题提炼为以下场景：

我有*C:\csvn\data\repositories\tr1\hooks\pre-revprop-change.bat*内容：

```
D:\svntest\testhook.py %*
exit %ERRORLEVEL% 
```

*testhook.py*是：

```
import os, sys

if __name__ == '__main__':
    # sys.stderr.write(sys.version+'\n') # this is OK, tried.
    newtext = sys.stdin.read() # try to read new log message

    sys.stderr.write('newtext is: %s\n'%newtext)

    exit(2) 
```

但是，在做客户端时`svn propset svn:log --revprop -r 2 "newtext"`，我得到了 python 错误：

```
Traceback (most recent call last):
  File "D:\svntest\testhook.py", line 5, in <module>
    newtext = sys.stdin.read() # try to read new log message
IOError: [Errno 9] Bad file descriptor 
```

**这个错误的原因是什么？**

似乎*pre-revprop-change.bat*没有将 STDIN 句柄传递给 py 脚本。是的，我验证了*pre-revprop-change.bat* 可以从 STDIN 获取文本（根据[Read stdin stream in a batch file 中的](https://stackoverflow.com/q/6979747)说明）。

我也尝试直接从命令行运行*pre-revprop-change.bat*`sys.stdin.read()` ，没问题。

请帮助我。

屏幕截图如下：

![在此处输入图像描述](../Images/bcea9c828dd6c7f7902515fbf7cf7638.png)

环境：

*   视窗服务器 2003
*   Collabnet Subversion Edge 2.3（svn 1.7.3 和 Apache 2.2.22）
*   从 python.org 安装 Python 2.7.1 msi

＝＝＝＝＝＝＝＝＝＝＝＝＝＝[最新更新]＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝

**不好意思说：我应该写在.bat**

```
exit %ERRORLEVEL% 
```

代替

```
exit /b %ERRORLEVEL% 
```

对于和我一起尝试过的人，请修复它并重试。`/b`似乎 pre-revprop-change.bat 总是以 0 退出。提示：如果没有，`/b`直接从 cmd 窗口运行 .bat 会导致 cmd 窗口关闭，所以我们最好尝试使用`cmd /c "pre-revprop-change.bat some param"`.

**在下面重现此问题的快速方法**

更重要的是，对于那些仍然感兴趣的人，请

*   下载这个文件包[http://down.nlscan.com/misc/chjsvnpyhook.zip](http://down.nlscan.com/misc/chjsvnpyhook.zip) ,
*   将它们提取到 D:\ ，
*   cd 进入 D:\svntest\tr1_local ，
*   运行 elog.bat ( `svn propset svn:log --revprop -r 2 "newtext"`)

那么我的问题将被重现。（要求：svn.exe 1.7 命令行（collabnet 或 TortoiseSVN），并安装 Python 2.7）

如果仍然无法重现错误。我已经准备了一个 VMware 虚拟机来准确地展示这个问题。[在http://down.nlscan.com/misc/chj/winxp-svnhook-py-stdin-error.7z](http://down.nlscan.com/misc/chj/winxp-svnhook-py-stdin-error.7z)下载 VM （链接预计有效期至 2013 年 9 月）。VMware Player 3.0（免费）足以运行该虚拟机。

＝＝＝＝＝＝＝＝＝＝＝＝＝＝[找到解决方法]＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝＝</p>

@nmenezes 提供的非常好的解决方法，`c:\Python27\python.exe D:\svntest\testhook.py %*`在 bat 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T09:58:45.713

SVN 在没有关联控制台的情况下执行脚本。所以你不会在 STDOUT 上看到任何显示。如果脚本返回不同于 0 的错误代码，则发送到 STDERR 的所有内容都会在 SVN 上显示为一条消息。

这种脚本应该在无人值守的情况下运行，它独立于用户的输入或输出。

您可以尝试将属性值作为额外的命令行参数传递。为此，请将您的 .bat 更改为：

```
@echo off
set /p NEWTEXT=
test.py %* %NEWTEXT%
exit /b %ERRORLEVEL% 
```

和 .py 到：

```
import os, sys

if __name__ == '__main__':   
    newtext = sys.argv[6]
    sys.stderr.write('newtext is: %s\n'% newtext)
    exit(2) 
```

我将批处理 STDIN 读取到 NEWTEXT 变量，并将其作为额外的命令行参数传递给您的脚本。

此解决方案不适用于多行值。因此，我再次尝试了您的原始解决方案，并且效果很好。

```
svn propset svn:log --revprop -r 3 -F svn.txt 
```

在这种情况下，属性值是从 svn.txt 文件中读取的，这是一个多行的文本文件。在这种情况下，带有 set /p 的选项不起作用，正如我们在评论中讨论的那样。但原始脚本有效。

有关信息，在命令行上传递了 5 个属性：

1 - 存储库

2 - 修订号

3 - 用户

4 - 属性名称

5 - 操作（在这种情况下为 M）

属性值在批处理脚本的标准输入上传递。

@Chen，我终于下载了图片。当您将挂钩批次更改为：

```
c:\python27\python.exe d:\svntest\testhook.py %*
exit %ERRORLEVEL% 
```

看来你的XP机器直接执行python的方式配置错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:35:10.160

将它接收到的标准输入引导到它调用的脚本中不是由你的批处理文件决定的吗？

供参考： [http ://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/redirection.mspx?mfr=true)

也许你可以在你的脚本调用前加上 > 符号来实现这一点？

```
> D:\svntest\testhook.py %*
exit /b %ERRORLEVEL% 
```

看起来如果批处理文件可以从标准输入读取，那么 SVN 正在做它应该做的事情，这取决于你的批处理文件是否可以让你调用的附加脚本使用它。

# javascript - 如何在 JavaScript 数组中添加一些代码？

> ID：12453356
> 
> 赞同：0
> 
> 时间：2012-09-17T05:04:05.383
> 
> 标签：javascript

环境：Visual Studio 2012、MVC4、Razor、Internet 应用程序。

我有一个 JavaScript 数组..

```
var over100 = "@Model.Over100";
var filterarray = [
{
    "name": "Condition",
    "value": "New",
    "paramName": "",
    "paramValue": ""
},
{
    "name": "FreeShippingOnly",
    "value": "false",
    "paramName": "Currency",
    "paramValue": "USD"
},
    ]; 
```

的情况下...`if(over100 != null)`

我想...

```
var filterarray = [
{
    "name": "Condition",
    "value": "New",
    "paramName": "",
    "paramValue": ""
},
{
    "name": "FreeShippingOnly",
    "value": "false",
    "paramName": "Currency",
    "paramValue": "USD"
},
{ 
    "name": "Over100",
    "value": "true",
    "paramName": "",
    "paramValue": ""
},
    ]; 
```

我想知道所有可能的方法，如何做到这一点。

谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:07:38.743

您可以使用`push()`：

```
if(over100 != ''){
    var addfilter = {"name": "Over100",
        "value": "true",
        "paramName": "",
        "paramValue": ""}

    filterarray.push(addfilter)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:08:37.650

```
if(over100 != null) {
    filterarray.push({"name": "Over100", "value": "true", "paramName": "", "paramValue": ""})
} 
```

# c# - 拆分和替换字符串

> ID：12453357
> 
> 赞同：0
> 
> 时间：2012-09-17T05:04:20.337
> 
> 标签：c#, asp.net

我有一个格式的字符串：

```
string path="/fm/Templates/testTemplate/css/article.jpg"; 
```

我想用第二个 '/' 拆分它并用 '/' 替换为 '\\' 想要这样的结果。

```
string newPath="\\Templates\\testTemplate\\css\\article.jpg"; 
```

My`path`是动态创建的，因此文件夹层次结构不固定。最好的方法是什么。我可以先拆分`string path`并`/`转到循环以重新连接它，然后用 '/' 替换为 '\\' 或者我缺少任何简单的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:06:19.040

你不能只使用[String.Replace](http://msdn.microsoft.com/en-us/library/fk49wtc1.aspx)吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:12:38.817

```
string path = "/fm/Templates/testTemplate/css/article.jpg";
path = path.Substring(path.IndexOf('/', 1)).Replace("/", "\\\\"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:07:12.807

试试这个：

```
public static int nthOccurrence(String str, char c, int n)
{
    int pos = str.IndexOf(c, 0);
    while (n-- > 0 && pos != -1)
        pos = str.IndexOf(c, pos + 1);
    return pos;
}    

string path = "/fm/Templates/testTemplate/css/article.jpg";

int index = nthOccurrence(path, '/', 1);
string newpath = path.Substring(index).Replace("/", "\\"); 
```

**输出：** `"\\Templates\\testTemplate\\css\\article.jpg"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T05:11:03.657

从路径中删除第一项后，您可以创建一个新字符串。以下将为您提供所需的结果。它可能会被优化。

你可以试试：

*   在 char 上拆分字符串`/`并删除空条目。
*   忽略拆分数组中的第一项后获取新数组
*   用于`string.Join`创建带有`\\`分隔符的新字符串。

这是代码：

```
string path = "/fm/Templates/testTemplate/css/article.jpg";
string[] temp = path.Split("/".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);
var newTemp = temp.AsEnumerable().Where((r, index) => index > 0);
string newPath2 = string.Join("\\", newTemp); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T05:11:13.320

如果您正在处理路径的各个部分（而不仅仅是替换斜线的方向），System.Uri 类将有所帮助（.Segments 属性）。

例如来自[MSDN](http://msdn.microsoft.com/en-us/library/system.uri.segments.aspx)

```
Uri uriAddress1 = new Uri("http://www.contoso.com/title/index.htm");
Console.WriteLine("The parts are {0}, {1}, {2}", uriAddress1.Segments[0], uriAddress1.Segments[1], uriAddress1.Segments[2]); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T05:11:41.740

您可以使用以下代码。

```
string path="/fm/Templates/testTemplate/css/article.jpg"; 
string newpath = path.Replace("/fm", string.Empty).Replace("/","\\"); 
```

谢谢

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T05:12:19.907

试试这个，

```
string path = "/fm/Templates/testTemplate/css/article.jpg";
string[] oPath = path.Split('/');
string newPath = @"\\" + string.Join(@"\\", oPath, 2, oPath.Length - 2);
Console.WriteLine(newPath); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-09-17T05:18:36.613

您的字符串操作真的对时间至关重要，以至于您需要一次完成所有操作吗？将其分解为多个部分要容易得多：

```
// First remove the leading /../ section:
path = Regex.Replace("^/[^/]*/", "", path);

// Then replace any remaining /s with \s:
path = path.Replace("/", "\\"); 
```

# github - 请参阅我是协作者的存储库

> ID：12453358
> 
> 赞同：76
> 
> 时间：2012-09-17T05:04:21.920
> 
> 标签：github

我是私人仓库的合作者，但它没有出现在我的仓库中。我也无法在其他用户的存储库列表中看到它，因为它是私有的。我已经确认我能够推/拉到回购。有没有办法在不输入完整 URL 的情况下使用 Github 访问这个存储库？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2016-11-04T18:36:38.707

您可以查看您是协作者的存储库。为此，请前往您帐户设置的**存储库**部分 ( [https://github.com/settings/repositories](https://github.com/settings/repositories) )。

您作为合作者的每个存储库旁边都应该有一个**离开操作按钮。**

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2012-10-11T18:00:36.473

即使它不会出现在您的存储库中，它也应该出现在右下角的 github 仪表板（单击 github 徽标）上。应该有一个列表，顶部有按钮来过滤所有、公共和私人回购。尝试单击私人按钮，它应该在那里。

> 请注意，如果您已选择加入新仪表板，则上述内容不适用，但您可以在左侧看到存储库（所有者和合作者）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-04-02T13:11:39.837

一个更简单的地方（根据今天）找到您正在协作的私有存储库是转到[https://github.com/](https://github.com/)（不要包含您的用户名，但请确保您已经登录）。在左侧，您可以找到搜索界面或单击“显示更多”以查看全部。奇怪的是，根据今天，如果您尝试从存储库中执行此操作，您将找不到它们。

# c - 释放指向指针的指针

> ID：12453363
> 
> 赞同：0
> 
> 时间：2012-09-17T05:05:07.870
> 
> 标签：c, pointers, memory-management, buffer, double-pointer

假设一个函数需要一个缓冲区来存放某些东西，并且可能需要将内存分配给函数范围内的缓冲区。它可能看起来像这样：

```
void func_with_buf( ...params..., char** buf ) {

    if ( !buf ) {
       buf = ( char** )calloc( ... );
    }

    /* more stuff here */
    ...
} 
```

现在，稍后在这个函数中有另一个条件语句，它的计算结果为假，如果在 if/条件语句中返回假，则`buf`应该释放指向指针的指针，因为在函数本身中不能做更多的事情.

所以，有两种方法可以解决这个问题，我想知道哪一种在可扩展性、重用等方面会被认为“更安全”和更实用。

**方法 A)**

```
char* buf;

if ( !func_with_buf( ..., &buf ) ) {

   free( buf );
   buf = NULL;
   /* more error handling here */
} 
```

**方法 B)**

```
char* buf; 

if ( !func_with_buf( ..., &buf ) ) {
    /* no need to free buf because func_with_buf handles deallocation internally. */
} 
```

有些东西告诉我，方法**A)**将是推荐的方法，但我很好奇，想看看我是否看过任何东西。

另外，如果程序员需要释放一个指向指针的指针，是否就像将它传递给它一样简单，`free(p)`它会处理它？还是我需要将其转换为相同类型的单个指针？

这么多的问题...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T05:09:57.087

我认为两者都是可以接受的，只要在函数的描述中非常清楚。

就个人而言，如果我有一个分配内存的函数并且由于某种原因失败了，我觉得它有义务释放该内存。如果调用者收到指示内存无用的错误条件，他们应该期望它也已被释放。

或者换句话说，内存只有在函数指示成功时才有效。

顺便说一句，在您的功能中，您正在执行以下操作：

```
buf = ( char** )calloc( ... ); 
```

但我认为你打算这样做：

```
*buf = ( char* )calloc( ... ); 
```

您要求调用者提供一个您将修改的指针。所以他们传递了一个指向他们的指针的指针，但他们需要的实际数据类型是一个`char`.

至于你的最后一个问题（对不起，我一开始没看到），不 - 你不需要投射它（除非你想投射到`void*`）。该函数`free`只需要一个内存地址并释放那里分配的任何内存。它不需要类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T05:13:59.523

## 方法（C）

```
char* buf = func_with_buf( ..., buf ); 
```

这样，您传入原始 buf 但返回新的或 buf，如果出现问题返回 NULL（并在函数中清理）。

# ruby-on-rails - 使用连接（Rails）为 has_many 关联指定默认排序？

> ID：12453365
> 
> 赞同：0
> 
> 时间：2012-09-17T05:05:40.287
> 
> 标签：ruby-on-rails, sql-order-by, rails-activerecord

我有一个简单的 Customer 模型，它与 Purchase 模型有很多关系。

```
class Customer < ActiveRecord::Base
  has_many :purchases
end 
```

我反复发现我需要通过以下方式在我的视图中订购 Customer.purchases：

```
@customer.purchases.joins(:shop).order("shops.position").order(:position) #yes, two orders chained 
```

为了保持干燥，我想把它放在一个集中的地方，这样我就不必重复做。理想情况下，我想让它成为 Customer.purchases 的默认排序。例如：

```
class Customer < ActiveRecord::Base
  has_many :purchases, :order => joins(:shop).order("shops.position").order(:position)
end 
```

显然上面的行不通。我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-21T09:16:35.477

您可以创建一个`Customer`返回已订购商品的方法：

```
class Customer < ActiveRecord::Base
  has_many :purchases

  def ordered_purchases
    purchases.joins(:shop).order("shops.position").order(:position)
  end
end 
```

并`@customer.ordered_purchases`从您的意见中调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:00:23.910

在您的购买模型中，您可以创建一个类方法：

购买.rb：

```
def self.order_by_position
  joins(:shop).order("shops.position").order(:position)
end 
```

然后你可以这样说：

```
@customer.purchases.order_by_position
Purchase.order_by_position 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:26:37.323

在您的客户模型中，您指定**joins(:shop)**是键**:order**的值。我认为这是问题所在，因此您可以使用**联接**作为键而不是像下面这样的顺序，

```
class Customer < ActiveRecord::Base
  has_many :purchases, :joins => [:shop], :order => "shops.position"
end 
```

我认为它可能会奏效。

# jquery - Struts jquery Ajax 函数

> ID：12453366
> 
> 赞同：2
> 
> 时间：2012-09-17T05:05:41.897
> 
> 标签：jquery, ajax, struts2

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<%@taglib prefix="html" uri="/struts-tags"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<link type="text/css" href="css/login.css" rel="stylesheet">
<script type="text/javascript" src="jquery/jquery-1.7.2.js"></script>
<script type="text/javascript" src="jquery/jquery.dataTables.js"></script>
<script type="text/javascript" src="jquery/jquery.ui.core.js"></script>
<script type="text/javascript" src="jquery/jquery.ui.widget.js"></script>
<script type="text/javascript" src="jquery/jquery.ui.dialog.js"></script>
<link type="text/css" href="css/jquery-ui-1.7.3.custom.css" rel="stylesheet">
<link type="text/css" href="css/jquery.dataTables_themeroller.css" rel="stylesheet">
<link type="text/css" href="css/jquery.dataTables.css" rel="stylesheet">
<link type="text/css" href="themes/base/jquery.ui.all.css" rel="stylesheet">
<style type="text/css">
    #grid_wrapper{
    width: 880px;margin:0 auto;
    margin-top: 100px;
    }
</style>
<script type="text/javascript">
$(document).ready(function(){
    $('#grid').dataTable({
         "bServerSide": true,
         "sAjaxSource": "companylist.action",
         "sPaginationType": "full_numbers",
         "bJQueryUI": true});

    $("#grid tbody").delegate("tr", "click", function() {
          var companyID = $("td:eq(1)", this).text();
          $("#companyID").val(companyID);
          $( "#passwordBox" ).dialog( "open" );
        });

    $("#passwordBox").dialog({
        autoOpen: false,
        modal: true,
    });

        $("#verifyPass").click(function(){
            $.ajax({
                url:"validatepassword.action",
                type:"POST",
                dataType:"JSON",
                data:{companyID:$("#companyID").val(),comPassword:$("#compassword").val()},
                success:function(response){
                    alert(response);
                }
            });
        });
    });
</script>
<title>Insert title here</title>
</head>
<body>
    <table id="grid" class="display">
        <thead>
            <tr>
                <th>Select</th>
                <th>Company ID</th>
                <th>Company Name</th>
                <th>Company Type</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
        <div id="passwordBox">
            <form id="passwordvali">
                <span id="error"></span>
                <input type="hidden" name="companyID" id="companyID">
                <label>Password:</label><br><br>
                <input type="password" name="compassword" id="compassword"/><br><br>
                <input type="submit" value="Verify" id="verifyPass"/>
            </form>
        </div>
    </table>
</body>
</html> 
```

这段代码工作正常。它在 jQuery 数据表中显示公司数据网格。我为每家公司添加了一个单选按钮，每当用户选择一家公司时，都会打开一个对话框，提示输入公司的密码。

当我输入密码并单击“验证”按钮时，请求已成功发送，但浏览器在 url 中显示数据并给出错误。

# unit-testing - 为什么我的测试函数会出现在代码覆盖率中？（或如何使它们 100%？）

> ID：12453367
> 
> 赞同：2
> 
> 时间：2012-09-17T05:05:44.580
> 
> 标签：unit-testing, visual-studio-2012, xunit.net

我正在使用 xUnit 来测试我的 C# 代码，并且我正在使用 Visual Studio Premium 2012。

在我的解决方案中，我有我正在测试的主要项目和包含我所有测试的第二个项目。我应该达到 100% 的代码覆盖率，但我的测试项目中有一些功能无法达到 100%。我可以将该项目排除在代码覆盖结果中吗？

或者......现在有没有人在您期望抛出异常的测试时如何将测试功能提高到 100%？以下是我尝试为应该引发异常的方法编写测试的一些方法，以及未涵盖的内容。MyBusinessLogic 有一个名为 GenerateNameLine 的函数，它接受 MyViewModel 类型的对象。如果 MyViewModel 的 Name 属性是一个空字符串，它应该抛出一个 RequiredInformationMissingException 类型的异常。

```
[Fact]
public void TestMethod1()
{
  var vm = new MyViewModel();
  vm.Name = string.Empty;

  Assert.Throws<RequiredInformationMissingException>(delegate { MyBusinessLogic.GenerateNameLine(vm); });
} 
```

这个测试通过了，但是代码覆盖率用颜色突出显示它`MyBusinessLogic.GenerateNameLine(vm);`没有被击中。

我也试过：

```
[Fact]
public void TestMethod1
{
  bool fRequiredInfoExceptionThrown = false;
  var vm = new MyViewModel();
  vm.Name = string.Empty;

  try
  {
    MyBusinessLogic.GenerateNameLine(vm);
  }
  catch (Exception ex)
  {
    if (ex.GetType() == typeof(RequiredInformationMissingException))
      fRequiredInfoExceptionThrown = true;
  }

  Assert.True(fRequiredInfoExceptionThrown, "RequiredInformationMissingException was not thrown.");
} 
```

这个测试也通过了。但是代码覆盖率`}`在 my`catch`永远不会被击中之前说正确的。

我不知道如何为获得 100% 的异常编写测试。我知道这并不重要，但在工作中 100% 的代码覆盖率是我们对完成的定义的一部分，所以我不知道在这里做什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T05:38:19.503

答案是肯定的

我们提供过滤器来自定义您想要通过 .runsettings 文件包含/排除的内容。您可以过滤掉几乎所有您认为无用的东西。[ExcludeFromCodeCoverage] 属性也可以在代码中使用。

请参阅：http: [//blogs.msdn.com/b/sudhakan/archive/2012/05/11/customizing-code-coverage-in-visual-studio-11.aspx](http://blogs.msdn.com/b/sudhakan/archive/2012/05/11/customizing-code-coverage-in-visual-studio-11.aspx)

您是否也看到了 VS2012RTM+Update1 中的第二个问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:15:59.730

我会排除测试，但仍然关注它们的覆盖率，因为低于 99% 的覆盖率表明其中一些根本没有运行。

BTW：100% 是一种理想，在现实生活中的项目中是无法实现的。至少实际达到 100% 反对 90% 的努力是不成比例的高。准确的覆盖率也取决于计算命中线的方式。

# javascript - 无法访问 JSON 元素

> ID：12453368
> 
> 赞同：-1
> 
> 时间：2012-09-17T05:05:50.163
> 
> 标签：javascript, json, asp.net-web-api

我在 Win API 控制器中使用以下代码返回一个包含 Menu 对象和 CourseOption 对象列表的对象。

```
public object GetCourseOption(int id) //Here id is Menu id
{
    IEnumerable<CourseOption> courseoptions = db.CourseOptions.Where(c => c.MenuId == id);
    Menu menu = db.Menus.Single(c => c.Id == id);
    if (courseoptions == null)
    {
         throw new HttpResponseException(Request.CreateResponse(HttpStatusCode.NotFound));
    }

    var combine = new { Menu = menu, Options = courseoptions };
    return combine;
} 
```

我可以通过在 JavaScript 中使用以下代码来访问菜单属性

```
$.getJSON("/api/CourseOptionAPI/" + id, function (data) {
alert("In " + data.Menu.Name);
}); 
```

但无法通过以下代码访问 CourseOption 属性

```
alert("In " + data.Options[0].Name); 
```

控制器方法将选项作为“组合”对象的一部分返回（我已经使用断点对其进行了检查）。'Menu' 和 'CourseOption' 是对象，而 'Name' 是它们的字符串类型的属性之一（在这两个属性中）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:02:56.050

`Name`可能是属性之一，但看起来如果`c.MenuId == id`一直失败，您将永远不会用任何有用的数据进行响应，并且 data.Options[0] 将是未定义的。

就像@zerkms 所说，`console.log`您的传入数据并检查接收到的 JSON 中的内容。

# java - 如何使 netbeans 创建的 jar 文件可以在系统中的任何位置工作

> ID：12453373
> 
> 赞同：0
> 
> 时间：2012-09-17T05:07:01.047
> 
> 标签：java, swing, jar, executable, netbeans7.0

我有一个 java 桌面应用程序`netbeans`。我使用由`netbeans`. 通过使用此命令，可执行 jar 文件在 netbeansProjects//dist/.jar 下创建。我可以使用项目路径中的 java -jar .jar 从命令行执行这个 jar 文件。但问题是，当我将这个 jar 移到 netbeans 项目文件夹之外，比如桌面并运行 jar 文件时，它会给出“线程“主”中的异常”类型的错误`java.lang.NoClassDefFoundError`。如何解决这个问题并使 jar 文件可以从系统的任何位置执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T10:13:41.330

完整的说明可以在`dist/README.TXT`：

> 要分发此项目，请压缩 dist 文件夹（包括`lib`文件夹）并分发 ZIP 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:36:43.823

确保 jar 文件内的清单包含必要的类路径。如果您不熟悉这个概念，请访问：http: [//docs.oracle.com/javase/tutorial/deployment/jar/downman.html](http://docs.oracle.com/javase/tutorial/deployment/jar/downman.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T05:37:11.670

`dist/lib`Netbeans 可能已在该文件夹中包含任何外部项目/库/Jars 。

为了运行应用程序，您必须在`dist`复制应用程序时包含文件夹中的所有文件

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T05:44:17.840

检查您的项目 Manifest.mf 文件中是否将属性“Main-Class”设置为您的项目当前的主类文件。

# ruby - Facebook API：获取具有包含字符串的评论的照片

> ID：12453374
> 
> 赞同：0
> 
> 时间：2012-09-17T05:07:11.070
> 
> 标签：ruby, facebook, facebook-graph-api, facebook-fql

我正在为我工​​作的公司使用他们客户的 Facebook 照片实现一个伪哈希标记系统。客户可以将照片上传到页面，页面管理员可以使用产品的标签对其进行标记。

我想要做的是从页面中获取所有在评论中有特定标签的照片（例如，从公司页面获取所有照片，评论中只包含“#bluepants”）。

我试图确保 Facebook API 处理繁重的工作（我们将缓存结果），所以我想使用 FQL 或 Graphs API，但我似乎无法让它工作（我的 SQL 相当在依赖 ORM 这么久之后生锈了）。我希望它能输出尽可能多的结果，但我不确定 FB 是否能让你一次做超过 25 个。

这将在一个 sinatra 站点中实现（我目前正在玩 Koala gem，所以如果我可以使用它进行查询，可以加分）

谁能给我一些指导？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:40:05.143

我有类似的东西在 FQL/PHP 中工作。这是我的多查询。

```
{'activity':
   "SELECT post_id, created_time FROM stream WHERE source_id = PAGE_ID AND 
      attachment.fb_object_type = 'photo' AND created_time > 1338834720 
      AND comments.count > 0 LIMIT 0, 500",
  'commented': 
    "SELECT post_id, text, fromid FROM comment WHERE post_id IN 
      (SELECT post_id FROM #activity) AND AND (strpos(upper(text), '#HASHTAG') >= 0", 
   'accepted': 
     "SELECT post_id, actor_id, message, attachment, place, created_time, likes 
       FROM stream WHERE post_id IN (SELECT post_id FROM #commented) 
       ORDER BY likes.count DESC", 
   'images': 
     "SELECT pid, src, src_big, src_small, src_width, src_height FROM photo 
        WHERE pid IN (SELECT attachment.media.photo.pid FROM #accepted)",
   'users':
      "SELECT name, uid, current_location, locale FROM user WHERE uid IN 
        (SELECT actor_id FROM #accepted)",
   'pages':
     "SELECT name, page_id FROM page WHERE page_id IN (SELECT actor_id FROM #accepted)",
   'places':
      "SELECT name, page_id, description, display_subtext, latitude, longitude 
         FROM place WHERE page_id IN (SELECT place FROM #accepted)"
 } 
```

要打破这一点：

*   `#activity`获取在我的活动开始日期之后创建的所有流对象，这些对象是照片并且评论计数不为零。使用 500 的 LIMIT 似乎返回了最大数量的帖子。更高或更低的值返回更少。
*   `#commented`查找在`#HASHTAG`他们的评论之一的文本中包含的帖子。请注意，我不是在寻找`#`，它是 FQL 中的保留字符。使用它可能会给您带来问题。
*   `#accepted`获取在#commented 中找到的帖子的完整详细信息。
*   `#images`获取这些帖子中图像的所有详细信息。我在我的待办事项上有它来重构它以`object_id`代替使用`pid`并尝试使用新`real_width`规范来使我的布局更容易。
*   `#users`并`#pages`获取最初发布该项目的演员的详细信息。我现在知道我可以使用该`profile`表在一个查询中得到它。
*   `#places`获取地理标记帖子的位置详细信息。

你可以在这里看到这个：http: [//getwellgabby.org/show-us-a-sign](http://getwellgabby.org/show-us-a-sign)

# assembly - GCC 生成的程序集 - C 函数调用时的段错误

> ID：12453378
> 
> 赞同：0
> 
> 时间：2012-09-17T05:07:14.810
> 
> 标签：assembly, gnu-assembler

我最近一直在用 Windows 中的 GCC 练习 x86 汇编。我目前正在混合汇编和 C 代码以进行测试。我遇到了一些奇怪的东西，我无法用我目前的知识来解释，所以我求助于 SO。

让我们看一个最小的例子。我们在 C 代码中有一个**test_func()**函数，我们希望将其转换为汇编，然后从 C 代码中调用它。这个函数虽然是从项目中调用其他函数，但问题就在这里。从程序集中对其他一些 C 代码函数的任何调用都会给我一个分段错误。

我们希望在汇编中看到的函数：

```
#include "rf_string.h"
void test_func()
{//nonsense function, just calling another C function of the project
    RF_String s;
    rfString_Init(&s,"anything");
} 
```

要求 gcc 为此吐出汇编代码给我们：

```
 .file   "to_asm.c"
    .section .rdata,"dr"
    .align 4
LC0:
    .ascii "anything\0"
    .text
    .globl  _test_func
    .def    _test_func; .scl    2;  .type   32; .endef
_test_func:
LFB6:
    .cfi_startproc
    pushl   %ebp
    .cfi_def_cfa_offset 8
    .cfi_offset 5, -8
    movl    %esp, %ebp
    .cfi_def_cfa_register 5
    subl    $40, %esp
    movl    $LC0, 4(%esp)
    leal    -16(%ebp), %eax
    movl    %eax, (%esp)
    movl    _rfString_Init, %eax
    call    *%eax
    leave
    .cfi_restore 5
    .cfi_def_cfa 4, 4
    ret
    .cfi_endproc
LFE6: 
```

然后通过将其保存到一个名为“asm_test.S”的文件中，并将其包含到项目的构建过程中，它可以很好地构建和链接。所以我们尝试制作一个简单的程序来调用该函数。

```
int main()
{
    test_func();
    return 0;
} 
```

调试的时候问题就来了。从汇编代码内部调用另一个 C 函数时出现分段错误。对于我尝试从汇编代码调用的任何其他函数都会发生这种情况，它与我使用的函数没有任何关系。

我认为这与这里的函数调用有关：

```
 movl    %eax, (%esp)
 movl    _rfString_Init, %eax
 call    *%eax 
```

为什么要这样做，这是什么意思？具体为什么不简单地调用该函数？%eax 寄存器前的 * 是什么？我还需要补充一点，如果我用一个简单的函数调用来替换最后两行，如下所示，一切似乎都工作得很好，这真的让我感到困惑。

```
 call     _rfString_Init 
```

另一个小问题是关于所有这些 cfi_directives。如果我要根据 SO 中提出的问题的答案来判断，它们似乎是为异常处理目的而生成的。问题是，就代码的功能而言，我可以安全地忽略它们吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:03:17.890

这里：

```
 movl    _rfString_Init, %eax
 call    *%eax 
```

请注意，没有`$`before `_rfString_Init`（与 in 不同`movl $LC0, 4(%esp)`）。这意味着它`_rfString_Init`不是直接常量（例如，函数或对象的常量地址或只是一个常量），而是一个内存变量。

因此，`movl`加载`eax`名为 的变量的内容`_rfString_Init`。

然后`call`执行对包含在 中的地址的调用`eax`。星号是一些语法糖，表示将通过引用/指针间接传递控制。

所以，`rfString_Init`真的是一个指向函数的指针。在您的 C 代码中查找它！

而且，当然，如果您尝试将控制权转移到指针中包含的字节，则不会有任何好处，因为它是数据，不应该被解释为代码。此外，底层内存很可能被配置为不可执行。

我对这些指令了解不多。它们也可以用于调试。无论如何，他们不会在您看到它们的地方插入代码。

# android - 是否可以将 AsyncTask 的结果作为 Arraylist Hashmap 获取

> ID：12453385
> 
> 赞同：0
> 
> 时间：2012-09-17T05:07:39.820
> 
> 标签：android, arraylist, android-asynctask

我的应用程序中现在至少有三个活动，它们使用 AsyncTask 将 JSON 结果返回到 ListView。我已经开始开发这个应用程序，但是一旦他掌握了基础知识，另一个人就会接管开发，所以我想尝试让事情尽可能易于使用。这意味着我正在尝试将尽可能多的可重复代码转换为可调用函数，因此每次需要查询 Web 服务时不需要复制/粘贴/重用 30-40 行代码，他们只需将参数传递给一个函数。

目前，我在一项活动中具有以下内容，该活动通过 php webservice 从 mysql 数据库中提取健身课程列表：

```
 class LoadAllClasses extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        //          pDialog = new ProgressDialog(Checkin.this);
        //          pDialog.setMessage("Loading products. Please wait...");
        //          pDialog.setIndeterminate(false);
        //          pDialog.setCancelable(false);
        //          pDialog.show();
    }

    /**
     * getting All products from url
     * */
    @Override
    protected String doInBackground(String... args) {
        // Building Parameters

        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", getclasses_tag));
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(SmashGyms.WEBSERVICE_URL,
                "POST", params);

        // Check your log cat for JSON response
        Log.d("CheckinDialog", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // classes found
                // Getting Array of Classes
                classes2 = json.getJSONArray(TAG_CLASSES);

                // looping through All Classes
                for (int i = 0; i < classes2.length(); i++) {
                    JSONObject c = classes2.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_CLASSID);
                    String name = c.getString(TAG_CLASSNAME);
                    //String day = c.getString(TAG_DAY);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_CLASSID, id);
                    map.put(TAG_CLASSNAME, name);
                    //map.put(TAG_DAY, day);
                    // adding HashList to ArrayList
                    allclasseslist.add(map);
                    Log.d("map: ", map.toString());

                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    @Override
    protected void onPostExecute(String file_url) {
        // dismiss the dialog after getting all products

        runOnUiThread(new Runnable() {
            @Override
            public void run() {
                /**
                 * Updating parsed JSON data into ListView
                 * */
                adapter = new SimpleAdapter(CheckinDialog.this,
                        allclasseslist, R.layout.checkin_item,
                        new String[] { TAG_CLASSID, TAG_CLASSNAME },
                        new int[] { R.id.pid, R.id.name });

                setListAdapter(adapter);
            }
        });

        //pDialog.dismiss();
        // updating UI from Background Thread

    }

} 
```

我想把它移到我拥有的另一个类，称为“WebServiceTasks”，这样我就可以在活动的 OnCreate() 中调用类似这样的东西：

```
allclasseslist = new ArrayList<HashMap<String, String>>();
allclasseslist = new WebServiceTasks.LoadAllClasses().get();
    adapter = new SimpleAdapter(CheckinDialog.this,
            allclasseslist, R.layout.checkin_item,
            new String[] { TAG_CLASSID, TAG_CLASSNAME },
            new int[] { R.id.pid, R.id.name });

    setListAdapter(adapter); 
```

虽然我已经尝试过这个，但我得到了许多与定义 asyncTask 错误或其他不匹配的错误有关的错误。

这是我尝试放入“WebServiceTasks”类的内容：

```
public static class LoadAllClasses extends
        AsyncTask<String, String, ArrayList<HashMap<String, String>>> {
    JSONParser jParser = new JSONParser();

    ArrayList<HashMap<String, String>> allclasseslist;
    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_CLASSES = "classes";
    private static final String TAG_CLASSID = "id";
    private static final String TAG_CLASSNAME = "class";
    private static final String getclasses_tag = "getclasses";

    JSONArray classes2 = null;

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        //          pDialog = new ProgressDialog(Checkin.this);
        //          pDialog.setMessage("Loading products. Please wait...");
        //          pDialog.setIndeterminate(false);
        //          pDialog.setCancelable(false);
        //          pDialog.show();
    }

    /**
     * getting All classes from url
     * */
    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            String... args) {
        // Building Parameters

        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", getclasses_tag));
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(SmashGyms.WEBSERVICE_URL,
                "POST", params);

        // Check your log cat for JSON response
        Log.d("CheckinDialog", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // classes found
                // Getting Array of Classes
                classes2 = json.getJSONArray(TAG_CLASSES);

                // looping through All Classes
                for (int i = 0; i < classes2.length(); i++) {
                    JSONObject c = classes2.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_CLASSID);
                    String name = c.getString(TAG_CLASSNAME);
                    //String day = c.getString(TAG_DAY);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_CLASSID, id);
                    map.put(TAG_CLASSNAME, name);
                    //map.put(TAG_DAY, day);
                    // adding HashList to ArrayList
                    allclasseslist.add(map);
                    Log.d("map: ", map.toString());

                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return allclasseslist;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    @Override
    protected void onPostExecute(
            ArrayList<HashMap<String, String>> allclasses) {
        // dismiss the dialog after getting all products

        //pDialog.dismiss();
        // updating UI from Background Thread

    }

} 
```

这是可能的，如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:13:47.690

好吧，您正在尝试使用`get()`非常昂贵的 AsyncTask 方法，因为它会阻塞 UI，直到您`onPostExecute()`完成。我会坚持让您触发`BroadCastReceiver`以`onPostExecute()`更新您的 UI 或`Interface`使用`onPostExecute()`. 我刚刚创建了一个小演示，用于使用 BroadCastReceiver 和 Interface 将结果从`onPostExecute()`您的 Activity 传递。你可以从我的 github 找到一个演示源[`here`](https://github.com/lalit3686/AsyncTaskReturnValue)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:03:46.853

对于任何试图复制这一点的人，以下是我使用 Lalit 和 Samir 的示例解决此问题的方法：

**在我的活动中：**

```
public class CheckinDialog extends ListActivity implements
    AsyncTaskCompleteListener {

WebServiceTasks.LoadAllClasses objAsyncTask = new WebServiceTasks.LoadAllClasses(
            this);
    objAsyncTask.execute();

@Override
public void onTaskComplete(ArrayList<HashMap<String, String>> allclasseslist) {
    // TODO Auto-generated method stub
    adapter = new SimpleAdapter(CheckinDialog.this, allclasseslist,
            R.layout.checkin_item, new String[] { TAG_CLASSID,
                    TAG_CLASSNAME }, new int[] { R.id.pid, R.id.name });

    setListAdapter(adapter);
    Log.d("OnTaskComplete", "taskcomplete");

} 
```

**在名为“AsyncTaskCompleteListener”的接口中：**

```
public interface AsyncTaskCompleteListener {
    void onTaskComplete(ArrayList<HashMap<String, String>> allclasseslist);
} 
```

**和单独的 WebServiceTasks 类：**

```
 public static class LoadAllClasses extends
        AsyncTask<String, String, ArrayList<HashMap<String, String>>> {
    JSONParser jParser = new JSONParser();
    private final AsyncTaskCompleteListener callback;
    private final Activity activity;

    public LoadAllClasses(Activity act) {
        this.activity = act;
        this.callback = (AsyncTaskCompleteListener) act;
    }

    // JSON Node names
    private static final String TAG_SUCCESS = "success";
    private static final String TAG_CLASSES = "classes";
    private static final String TAG_CLASSID = "id";
    private static final String TAG_CLASSNAME = "class";
    private static final String getclasses_tag = "getclasses";

    JSONArray classes2 = null;

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
    }

    /**
     * getting All classes from url
     * */
    @Override
    protected ArrayList<HashMap<String, String>> doInBackground(
            String... args) {
        // Building Parameters
        ArrayList<HashMap<String, String>> allclasseslist = null;
        allclasseslist = new ArrayList<HashMap<String, String>>();
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("tag", getclasses_tag));
        // getting JSON string from URL
        JSONObject json = jParser.makeHttpRequest(SmashGyms.WEBSERVICE_URL,
                "POST", params);

        // Check your log cat for JSON response
        Log.d("CheckinDialog", json.toString());

        try {
            // Checking for SUCCESS TAG
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // classes found
                // Getting Array of Classes
                classes2 = json.getJSONArray(TAG_CLASSES);
                Log.d("JSONArray", json.getJSONArray(TAG_CLASSES)
                        .toString());
                // looping through All Classes
                for (int i = 0; i < classes2.length(); i++) {
                    JSONObject c = classes2.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_CLASSID);
                    String name = c.getString(TAG_CLASSNAME);
                    //String day = c.getString(TAG_DAY);

                    // creating new HashMap
                    final HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_CLASSID, id);
                    map.put(TAG_CLASSNAME, name);
                    //map.put(TAG_DAY, day);
                    // adding HashList to ArrayList
                    allclasseslist.add(map);
                    //Log.d("map: ", map.toString());

                }
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return allclasseslist;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    @Override
    protected void onPostExecute(
            ArrayList<HashMap<String, String>> allclasseslist) {
        super.onPostExecute(allclasseslist);
        // dismiss the dialog after getting all classes
        callback.onTaskComplete(allclasseslist);
    }

} 
```

感谢大家的快速帮助。这最终在使用此代码的每个活动中节省了 120 多行重复代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:10:40.613

您可以创建一个 Bean 类来存储来自异步任务的所有值，以便您可以将其接收到另一个类我的朋友

# windows - 远程访问 Windows 7 命令提示符

> ID：12453386
> 
> 赞同：3
> 
> 时间：2012-09-17T05:07:53.333
> 
> 标签：windows, command-line, command-prompt, remote-access

我想从我的 mac 访问远程 windows 机器的命令提示符，特别是从 mac 的终端，windows 机器没有远程桌面连接，因为它是 Windows 7 家庭高级版。有什么可以让我这样做吗？我正在寻找合理的命令行驱动的东西。

我可以将软件安装到远程机器上，充当界面，我已经使用 Logmein 等应用程序这样做了，但这是非常图形化的，我正在寻找以命令行为中心的东西。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T05:13:12.640

为 Windows 安装 OpenSSHD - 这将允许远程“控制台”会话。

如果您正在寻找非常“类 unix”的东西，那么您可以安装 cygwin。

[http://www.worldgoneweb.com/2011/installing-openssh-on-windows-7/](http://www.worldgoneweb.com/2011/installing-openssh-on-windows-7/)

# c++ - 如何在分叉之间共享数组？

> ID：12453388
> 
> 赞同：0
> 
> 时间：2012-09-17T05:08:09.023
> 
> 标签：c++, c, fork, shared-memory

我正在编写这段代码，它基本上接受一个参数，指定我想要多少个子线程，分叉来获取它们，然后打印存储在数组中的所有 pid。

如果只有父母需要 PID，这很好，但我也需要孩子获得他们的 IDS (pcid)。我从网上复制并粘贴了一些代码（我不太明白），所以我不确定为什么它不起作用。

第一次打印 PID 后出现分段错误。

这里有什么问题？

```
#include <stdio.h>
#include <sys/types.h> 
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <sys/shm.h>
#include <sys/ipc.h>

int main(int argc, char *argv[])
{

if(argc  < 2) {
printf("ERROR: No arguments fed.\n");
exit(-1);
}

int amount = atoi(argv[1]);
int i;
int pid = 1;
int pcid = 0;
key_t key;
int shmid;
int *arr[amount];

key = ftok("thread1.c",'R');
shmid = shmget(key, 1024, 0644 | IPC_CREAT);

for(i = 0; i < amount; i++) 
{
    if(pid != 0) 
    {
        pid = fork();
    }
    *arr = shmat(shmid, (void *) 0, 0);
    if(pid != 0) 
    {
    *arr[i] = pid;
    }
    else 
    {
    pcid = *arr[i];
    break;
    }
}
if(pid != 0) 
{

    printf("Printing PID Array:\n");
    for(i =0; i < amount; i++) 
    {
        printf("%d\n", *arr[i]);
    }
}    
else 
{
    printf("My PID: %d\n",pcid);
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:38:03.780

您正在使用指针数组。并且`*arr = shmat(shmid, (void *) 0, 0)`您将共享内存访问点分配给数组的第一个元素。现在，当您使用`*arr[i] = pid`它时，它将转到`i+1`未知地址所在的数组元素，然后您尝试将值放在那里。所以你得到了分段错误。

# ruby-on-rails - Rails 3 - 模型关联（组合）和方法委托

> ID：12453390
> 
> 赞同：3
> 
> 时间：2012-09-17T05:08:28.493
> 
> 标签：ruby-on-rails, model, delegation, model-associations

我有以下**模型**和关联：

```
class JuridicalPerson < ActiveRecord::Base
end

class Supplier < ActiveRecord::Base
  belongs_to :juridical_person
  delegate  :company_name, :company_name=, :to => jurirical_person
end 
```

**控制器**是：

```
def new
  @supplier = Supplier.new                                                                                                                                                 

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @supplier }
  end
end 
```

**架构**如下所示：

```
create_table "suppliers", :force => true do |t|
  t.integer  "juridical_person_id"
  ...
end

create_table "juridical_people", :force => true do |t|
  t.string   "company_name"
  ...
end 
```

现在，当我尝试在视图中渲染它时，出现以下错误：

**供应商#company_name 委托给 juridical_person.company_name，但 juridical_person 为 nil：** #(Supplier id: nil, juridical_person_id: nil, created_at: nil, updated_at: nil)

**提取的源代码（在第 9 行附近）：**

```
8:       <%= f.label :company_name, "Company Name" %>
9:       <%= f.text_field :company_name %> 
```

似乎在委派时没有创建相关的 juridical_person ，但我不知道为什么。即使我在控制器中创建它，出于同样的原因尝试更新时应用程序也会中断。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:42:36.063

删除`=`更改

```
delegate  :company_name, :company_name=, :to => jurirical_person 
```

至

```
delegate  :company_name, :company_name, :to => jurirical_person 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:24:11.037

```
class JuridicalPerson < ActiveRecord::Base
    has_many :suppliers
end 
```

# java - 如何以编程方式找到所有未使用的导入？

> ID：12453391
> 
> 赞同：8
> 
> 时间：2012-09-17T05:08:31.387
> 
> 标签：java, reverse-engineering, static-analysis

就我而言，这样做有两个原因：

*   有时人们会错误地导入在 macbooks JDK 中存在但在 Linux 中不存在的类。这会导致在基于 Linux 的机器上的 ci 服务器上构建失败。我不经常发生，但是当它发生时，我想应该有一些更聪明的方法来更早地发现它。
*   未使用的导入在 IDE/代码分析中触发警告。有时有人需要花时间清理这些东西。即使只是在 IDE 中单击鼠标右键，您仍然需要提交更改并确保构建时一切正常。

我很好奇是否有任何方法可以以编程方式找到未使用的导入（让我们从单元测试中说）***并***在本地失败（如果有的话）。

也许由于未使用的导入而导致构建失败听起来很苛刻，但如果它为整个团队节省了时间，那么这样做是有道理的（也很想听听对此的意见）。

**更新**：

我遵循[了 yegor256 的](https://stackoverflow.com/users/187141/yegor256)建议，并将 Checkstyle 任务与最初的一小部分[Sun 代码约定](https://stackoverflow.com/questions/22961733/oracle-java-code-conventions)（未使用的导入就是其中之一）合并，并在发现违规时使其中断构建。

经过一周的试用，我们的代码库中未使用的导入为零，令人惊讶的是，对此规则的投诉为零（顺便说一下，Checkstyle 非常快：分析 ~100KLoc 只需不到一秒的时间）。

至于使用 IDE 进行此类分析：是的，这是一个不错的选择，但是将这种检查作为自动构建的一部分运行会更好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T05:29:03.990

您正在尝试做的事情称为[静态代码分析](http://en.wikipedia.org/wiki/Static_program_analysis)。[Checkstyle](http://checkstyle.sourceforge.net/)可以为您提供帮助。如果您使用 Maven，此插件将为您完成自动化：[http ://maven.apache.org/plugins/maven-checkstyle-plugin/](http://maven.apache.org/plugins/maven-checkstyle-plugin/)

你也可以看看[qulice.com](http://www.qulice.com)（我是它的开发者之一），它集成了一些静态分析工具并预先配置了它们（包括 Checkstyle、PMD、FindBugs）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T09:32:12.047

如果您使用的是 eclipse IDE 或 IntelliJ IDEA，您可以将它们配置为

1a。在保存或提交之前组织导入/删除未使用的导入（请参阅清理首选项）

1b。将“未使用的导入”警告切换为错误（请参阅错误设置）

2a. 配置一个不包含 com.* 东西的 jre

2b。将来自 jre 的专有 api 使用警告配置为错误

不过，您可能仍想在构建服务器上进行检查。在这种情况下，仍然需要配置 CheckStyle 等更复杂的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T07:45:11.820

> 我很好奇是否有任何方法可以以编程方式找到未使用的导入（让我们从单元测试中说）并在本地构建失败（如果有的话）。

我使用 IntelliJ 来组织导入，这将删除所有未使用的导入。您可以使用代码库顶部的一个热键来更正所有导入。（它还有超过 700 种其他类型的静态检查和修复）

> 也许由于未使用的导入而导致构建失败听起来很苛刻，但如果它为整个团队节省了时间，那么这样做是有道理的（也很想听听对此的意见）。

我让 IntelliJ 签入格式化并组织导入的代码，因此问题从一开始就不会出现。;)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-10-13T12:15:44.187

我看到很多评论与使用这个 IDE 或那个 IDE 的方式相同。但我所有的朋友都试图理解其中的区别。以编程方式做某事是不同的，使用 IDE 是不同的。

如果我希望一个过程是程序化的，那么 IDE 的建议是没有用的。有人可能会问这个问题，因为他正在构建完整的流程，而这一步是其中的一部分。在 CI 工作的不同机器和操作系统上，打开 IDE 如何帮助他？

我也在类似的线路上构建了一个工具。我在某种程度上实现了它，但它以编程方式打开 IDE 并自动关闭它并修复源代码。但是在 Linux 中打开同样的东西对我来说可能是个问题。

在回答之前了解某人的观点确实非常重要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T06:19:30.537

在计算机科学中，这种无需执行即可分析代码的过程的名称称为`static code analysis`.

尝试使用 IDE，我正在使用 Eclipse，它用黄色下划线标记所有未使用的导入和未使用的变量或方法....

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T06:25:29.983

这些不是无关的问题吗？如果您导入仅存在于本地 JDK 中的类，*则会*使用这些导入（只是不满意）。对于任何一个问题，我建议在 IDE 中解决它，以便在编写代码时检测到问题，而不是在签入之前（检测越早，修复越容易......）。

[在 Eclipse 中，您可以通过访问规则](http://www.eclipsezone.com/eclipse/forums/t53736.html)防止不满意的导入，并在保存源文件时通过启用适当的[保存操作](http://help.eclipse.org/juno/topic/org.eclipse.jdt.doc.user/reference/preferences/java/editor/ref-preferences-save-actions.htm)自动修复导入。如果您将这些设置检查到版本控制中，您可以轻松地与团队共享它们。

# python - 当我附加到 Python 中的列表时的奇怪行为

> ID：12453396
> 
> 赞同：3
> 
> 时间：2012-09-17T05:09:07.460
> 
> 标签：python, list, append

我正在寻找[Josephus_problem](http://en.wikipedia.org/wiki/Josephus_problem)，但结果不是我的预期。为什么？

```
def J(n,x):
    li=range(1,n+1)
    k=0
    res=[]
    while len(li)>1:
        k= (x+k-1) % len(li)
        li.pop(k)
        res.append(li)
        #print li
    return res

print J(5,3) 
```

预期输出：

```
[1, 2, 4, 5]

[2, 4, 5]

[2, 4]

[4] 
```

实际输出：

```
[[4], [4], [4], [4]] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T05:12:09.167

您需要在此处附加列表副本：

```
res.append(li[:]) # <-- not res.append(li) !!! 
```

发生这种情况的实际原因`list`是 Python 中的可变数据结构。看看这个片段

```
>>> l = [1,2,3]
>>> p = [l,l,l]    
>>> p
[[1, 2, 3], [1, 2, 3], [1, 2, 3]]
>>> l.pop()
3
>>> p
[[1, 2], [1, 2], [1, 2]] 
```

# java - 创建具有大量属性的对象的更好方法

> ID：12453398
> 
> 赞同：4
> 
> 时间：2012-09-17T05:09:16.120
> 
> 标签：java, oop, design-patterns

我有一个域对象`Invoice`，它有大约 60 个属性，有些是强制性的，有些是可选的。此类`Invoice`是底层 DB 表中记录的表示形式，其中某些列值用应用程序层类包装（例如 Enum 表示存储在 DB 中的简单整数，Currency 表示双精度等）。

这个`Invoice`类目前定义如下：

*   公共全参数构造函数。
*   公共吸气剂。
*   受保护的二传手。

现在，创建对象的这个类的客户害怕`Invoice`将所有 60 个奇怪的属性传递给构造函数。出于显而易见的原因，我坚决反对将二传手*公开。*

您能否建议一种更好的方法来允许创建/修改此发票对象？如果您需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-17T05:23:07.350

## *使用*构建器模式

使用 Joshua Bloch 在其《[*Effective Java 2nd Edition*](https://rads.stackoverflow.com/amzn/click/com/0321356683) [》一书中描述的构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)。您可以在[http://www.javaspecialists.eu/archive/Issue163.html中找到相同的示例](http://www.javaspecialists.eu/archive/Issue163.html)[](https://rads.stackoverflow.com/amzn/click/com/0321356683)

 *特别注意这一行：

```
NutritionFacts locoCola = new NutritionFacts.Builder(240, 8) // Mandatory
                          .sodium(30) // Optional
                          .carbohydrate(28) // Optional
                          .build(); 
```

## *使用* `BeansUtils.populate`

其他方法是使用[`org.apache.commons.beanutils.BeanUtils.populate(Object, Map)`](http://commons.apache.org/proper/commons-beanutils//api/org/apache/commons/beanutils/BeanUtils.html#populate%28java.lang.Object,%20java.util.Map%29)Apache [Commons BeansUtils](http://commons.apache.org/proper/commons-beanutils/)中的方法。在这种情况下，您需要一个映射来存储对象的属性。

**代码**：

```
public static void main(String[] args) throws Exception {

    Map<String, Object> map = new HashMap<>();
    map.put("servingSize", 10);
    map.put("servings", 2);
    map.put("calories", 1000);
    map.put("fat", 1);

    // Create the object
    NutritionFacts bean = new NutritionFacts();

    // Populate with the map properties
    BeanUtils.populate(bean, map);

    System.out.println(ToStringBuilder.reflectionToString(bean,
            ToStringStyle.MULTI_LINE_STYLE));

} 
```

**输出**：

```
NutritionFacts@188d2ae[
  servingSize=10
  servings=2
  calories=1000
  fat=1
  sodium=<null>
  carbohydrate=<null>
] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T05:24:41.227

你可以做的可能是将你的对象[分解](http://en.wikipedia.org/wiki/Decomposition_%28computer_science%29)成更小的对象。根据上面的评论，您可能需要用户构建这些新对象，但是，根据您的数据库设计，您可能只需要将主键或外键传递给类。

然后该类将具有一些从数据库中查找相关数据的*行为。*这显然会增加您的数据库服务器上的负载，但它会允许您使用不太复杂（尽管数量更多）的类。复杂性的降低很可能会增加代码重用的机会，并使其更易于维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T11:19:00.863

正如@Jake King 所建议的那样，将 60 个属性组合成更小的数据对象总是更好。

在这样做的同时，我将研究一个方面，哪些可能的组合是可选的，我将以这种方式进行创作。例如，如果客户点击说使用当前地址和邮寄地址，则邮寄地址是可选的。

围绕这些组合对象构建构造函数将帮助您轻松有效地管理/维护类。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-17T06:37:32.897

如果您的 Invoice 对象有 60 个属性，并且您确定不需要其中一些属性，则无需为这些属性创建 getter 和 setter。始终建议您在代码中创建所需属性的 getter setter。但您需要确保省略的字段应允许数据库中的空约束。

否则，如果您需要代码中的所有 60 个属性，则根据客户端的要求创建不同的构造函数。如果客户端只需要传递 4 个，则创建接受 4 个参数的构造函数，您可以为数据库中的属性设置默认值，其值不是客户通过。*

# mysql - 合并2张表，一张一张取数据

> ID：12453402
> 
> 赞同：0
> 
> 时间：2012-09-17T05:09:44.313
> 
> 标签：mysql

我有两张桌子

![在此处输入图像描述](../Images/227f507a9c60daa8cfd1390ad0508809.png)

现在，我想在一个限制为 20 的页面上显示产品，问题是首先我想在按 offer_id desc 排列的报价表上显示所有产品，然后在产品表上显示产品，除了报价表上的那些 20限制。

提前谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T05:12:22.373

您只需要一个[外连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)，然后按降序排序`offer_id`（MySQL 将放置`NULL`值，例如从没有匹配记录的外连接中获取的值，最后以这样的顺序排列）：

```
SELECT   Products.*
FROM     Products LEFT JOIN Offers USING (prod_id)
ORDER BY Offers.offer_id DESC
LIMIT    20 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/86abf/1/0)上查看。

# android - 如何解析这个xml文件？

> ID：12453410
> 
> 赞同：0
> 
> 时间：2012-09-17T05:10:32.690
> 
> 标签：android, xml-parsing

嗨我想解析这个

```
<entry>
<id>http://306721</id>    
<title type='text'>MY New</title>   
<photo:id>513306721</gphoto:id>
<photo:name>MYNew</gphoto:name>   
<photo:numphotos>9</gphoto:numphotos>   
<media:group>
  <media:content url='http:Ya4MIz9Y/MYNew.jpg' medium='image' type='image/jpeg' />     
  <media:keywords />
  <media:thumbnail url='htt0-c/MYNew.jpg' height='160' width='160' />
  <media:title type='plain'>MY New</media:title>
</media:group>
</entry> 
```

我能够解析这个文件，也能够像这样从上面的 xml 文档中读取一些值

```
Document doc = db.parse(is);
NodeList entries = doc.getElementsByTagName("entry");            
for (int i = 0; i < entries.getLength(); i++) {
   Element element = (Element) entries.item(i);
   albumIds.add(getCharacterDataFromElement((Element) element                           
                             .getElementsByTagName("photo:id").item(0)));     
} 
```

在上面的代码中，我正在阅读`gphoto:id`这样我正在阅读`photo:name`和`photo:numphotos`。

现在我想阅读那些在.. 中可用的`url`内容。任何人都可以帮助我了解如何阅读。`media:thumbnail``media:group`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:53:34.820

请参阅我的 SO Question 的以下链接，它将解决您的问题，如果您对此有任何疑问，请告诉我。

[使用 DOM 解析器进行 XML 解析](https://stackoverflow.com/questions/12106287/how-to-parse-xml-file-using-dom-parsing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:22:42.923

将这些值添加到对象中（使用 java pojo）并将该对象添加到 ArrayList

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:31:24.787

尝试使用下面的代码。希望它会帮助你。

```
 Document doc = db.parse(is);
    NodeList entries = doc.getElementsByTagName("entry");            
    for (int i = 0; i < entries.getLength(); i++) {
       Element element = (Element) entries.item(i);
       albumIds.add(getCharacterDataFromElement((Element) element                           
                                 .getElementsByTagName("gphoto:id").item(0)));   
       NodeList nodelist_group = doc.getElementsByTagName("media:group");  

        for (int j = 0; j < nodelist_group.getLength(); j++) {
       Element element = (Element) nodelist_group.item(j);
       NodeList nodelist_content = doc.getElementsByTagName("media:content");  
       URLS.add(nodelist_content.getAttribute('url')));  }} 
```

# ruby - rb-appscript 在 Mountian Lion 中不起作用

> ID：12453412
> 
> 赞同：1
> 
> 时间：2012-09-17T05:10:36.290
> 
> 标签：ruby, macos, applescript, osx-mountain-lion, rb-appscript

我正在使用 rb-appscript。以下行在 Lion 中运行良好，但在 Mountain Lion 中似乎不起作用：

```
desktop_bounds = Appscript.app.by_name("Finder").desktop.window.bounds.get 
```

我有两个问题：

1.  有没有办法在山狮中解决这个问题。
2.  我看到不再维护 rb-appscript 项目。有更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T16:44:00.477

我认为这与 iTunes 10.6.3 出现的问题相同：请参阅[此处了解 iTunes 讨论（以及](https://stackoverflow.com/questions/11089123/itunes-10-6-3-changes-applescript-interface "这里")[Drang 博士](http://www.leancrew.com/all-this/2012/06/the-first-nail-in-the-coffin-of-python-appscript/ "leancrew.com")发表的关于 appscript 未来的更全面辩论的链接）和 Matt Neuburg 的修复.

问题似乎是 appscript 无法再获取应用程序的字典（在本例中为 Finder），因此对特定于应用程序的方法的任何调用都会中断。Matt 在[https://github.com/mattneub/appscript/tree/master/rb-appscript](https://github.com/mattneub/appscript/tree/master/rb-appscript)发布了一个脚本，该脚本提供了另一种获取字典的方法。您可以通过以下方式使用它来恢复功能：

```
require 'Appscript'

$RUBY_DIR = '/Users/ben/Documents/Code/rb-appscript'

def app_module( id )
  require "#{$RUBY_DIR}/sdefToRBAppscriptModule.rb"
  f = FindApp.by_id(id)
  return SDEFParser.makeModule(f)
end

finder = Appscript.app("Finder", app_module('com.apple.finder'))

desktop_bounds = finder.desktop.window.bounds.get
p desktop_bounds 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:04:26.303

只是我的两分钱：MacRuby 作为替代品更像是 Ruby，但绝对比 rb-appscript 少 Appscript。但它应该完成工作。

# regex - Perl：如何提取从“IF”到“END-IF”的行范围，忽略以 * 开头的行

> ID：12453419
> 
> 赞同：1
> 
> 时间：2012-09-17T05:11:28.820
> 
> 标签：regex, perl

即使该行以 * 开头，我的代码也会尝试提取范围这是我的代码：

```
while (<FILE1>) {

    $_ =~ s/^\s+//; #remove leading spaces
    $_ =~ s/\s+$//; #remove trailing spaces

    if (/IF/ .. /END-IF/) {

        if($_ =~ m/END-IF/) {

            $flag = 1;
        }
        print FINAL "$_\n";

        if ($flag == 1) {

            $flag = 0;
            print FINAL "\n\n";
        }
    }
}
close FINAL;
close FILE1; 
```

我的最终输出文件应该只包含所有 IF 和 END-IF 之间的范围，由 \n\n 分隔，如果 IF 块中有一个 IF，则从第一个 if 到第二个 IF 之前的行的范围应该是保存在 FINAL 中，由 \n\n 分隔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:17:58.420

如果要排除 IF 和 END-IF，请使用以下命令：

```
perl -lne 'if(/IF/.../END-IF/ and $_!~/^\*|IF|END-IF/){print}' your_file 
```

如果要包含 IF 和 END-IF，请使用以下命令：

```
perl -lne 'if(/IF/.../END-IF/ and $_!~/^\*/){print}' your_file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:41:21.210

添加下一行解决了我的问题:)

```
next if(/^\*/); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:47:21.003

也许以下内容会有所帮助：

```
use strict;
use warnings;

while (<DATA>) {
    if ( /IF/ .. /END-IF/ ) {
        next if /^\*|IF|END-IF/;
        print;
    }
}

__DATA__
This is a line.
And another line...
IF
1\. A line within the if
* 2\. An asterisk line within the if
3\. And now, another line within the if
END-IF
Outside an if construct.
Still outside the if construct.
IF
4\. A line within the if
* 5\. An asterisk line within the if
6\. And now, another line within the if
END-IF 
```

输出：

```
1\. A line within the if
3\. And now, another line within the if
4\. A line within the if
6\. And now, another line within the if 
```

范围内的行`IF .. END-IF`有条件地通过，然后仅在它们不以 or 开头`*`或不包含`IF`or时打印`END-IF`。

# android - 无法在我的 android 应用程序中获得以下 UI

> ID：12453421
> 
> 赞同：0
> 
> 时间：2012-09-17T05:11:40.623
> 
> 标签：android, user-interface

在我的应用程序中，我有一个列表视图，因为我需要放置以下 UI![在此处输入图像描述](../Images/6758432453796ac0cdcbd1206fa6eea6.png)

如上图所示，我能够在垂直方向的线性布局中获得圆形背景。所以我已经按顺序放置了以下内容 1\. TextView 2\. FrameLayout 中的 ImageView 以便可以将 TextView 放置在 FrameLayout 3 内的 ImageView 上，然后再放置一个 TextView

```
Now my problem is 
1\. i want to place the image view of the calendar icon at the top right corner, so that a part of the icon gets placed over the image view 
2\. The image inside the Frame layouts imageview is received from an url without round corners. I want to show round corners over the image 
```

以下是我的布局内容

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:background="@drawable/img_bg"
        android:layout_margin="10dp">

        <TextView
            android:id="@+id/event_list_header"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/app_name"
            android:textColor="@color/title"
            android:textAppearance="?android:attr/textAppearanceLarge" 
            android:layout_marginTop="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"/>

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical" 
            android:layout_margin="6dp">

            <FrameLayout
                android:layout_width="fill_parent"
                android:layout_height="wrap_content">

                <ImageView
                    android:contentDescription="@string/app_name"
                    android:id="@+id/event_list_image"
                    android:layout_width="fill_parent"
                    android:layout_height="280dp"/>

                <RelativeLayout
                    android:layout_width="fill_parent"
                    android:layout_height="match_parent" 
                    android:background="@drawable/offer_title_bg"
                    android:layout_gravity="bottom">

                    <TextView
                        android:id="@+id/event_overlay_text"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_alignParentLeft="true"
                        android:layout_centerVertical="true"
                        android:textColor="#FFFFFF"
                        android:layout_marginLeft="10dp"
                        android:textAppearance="?android:attr/textAppearanceMedium" />
                </RelativeLayout>
            </FrameLayout>
        </LinearLayout>

        <TextView
            android:id="@+id/event_timing_text"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="@string/app_name"
            android:textColor="@color/black"
            android:textAppearance="?android:attr/textAppearanceLarge" 
            android:layout_marginBottom="10dp"
            android:layout_marginLeft="10dp"
            android:layout_marginRight="10dp"/>

    </LinearLayout>

</RelativeLayout> 
```

如何使这个 UI 成为可能......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:14:32.910

使用 RelativeLayout 和 alignTop：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/event_list_image"
        android:layout_width="110dip"
        android:layout_height="110dip"
        android:layout_margin="1dip"
        android:src="@drawable/main0x" />

    <TextView
        android:id="@+id/event_overlay_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/event_list_image"
        android:layout_marginLeft="100dp"
        android:layout_marginTop="1dp"/>

</RelativeLayout> 
```

# codeigniter - CodeIgniter：重定向时会话值丢失

> ID：12453423
> 
> 赞同：1
> 
> 时间：2012-09-17T05:11:42.620
> 
> 标签：codeigniter

我在控制器方法中设置会话，例如 & 重定向到其他控制器。

```
$search = array(
    'search_count' => count($data['result']),
    'projectInfo' => $data['result']
    );

$this->session->set_userdata($search);
redirect('projects'); 
```

但是如果我尝试在其他控制器中访问这个变量，它什么也不会显示：

```
print_r($this->session->userdata('projectInfo')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T06:50:56.707

解决了我使用[PHP Native Session 类](https://github.com/EllisLab/CodeIgniter/wiki/Native-session)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:33:45.177

利用

```
redirect('projects', 'refresh'); 
```

反而。使用 HTTP 重定向设置 cookie 不适用于所有浏览器。

# linux - 每小时 cron 作业未运行

> ID：12453432
> 
> 赞同：1
> 
> 时间：2012-09-17T05:12:55.910
> 
> 标签：linux, debugging, cron

我用`crontab -e`. 然后我将它添加到我的 crontab 中：

```
SHELL=/bin/bash

@hourly /home/ec2-user/utilities/create-snapshots.sh 
```

然后我保存了文件。大约一个小时后，cron 日志显示：

```
CROND[1876]: (ec2-user) CMD (/home/ec2-user/utilities/create-snapshots.sh)
CROND[1877]: (root) CMD (/usr/lib64/sa/sa1 -S DISK 1 1)
CROND[1892]: (root) CMD (run-parts /etc/cron.hourly)
run-parts(/etc/cron.hourly)[1892]: starting 0anacron
run-parts(/etc/cron.hourly)[1901]: finished 0anacron 
```

但是我知道该命令`/home/ec2-user/utilities/create-snapshots.sh`实际上并没有运行，因为它会创建我的数据库的快照，但它没有。`/home/ec2-user/utilities/create-snapshots.sh`如果我直接在终端中运行命令，则运行该命令有效。

我怎样才能让 cron 每小时运行一次该命令？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T05:15:26.250

我的心理调试能力告诉我`create-shapshots.sh`脚本*已*运行，但由于环境变量问题（可能`PATH`）而失败。Cron 通常在清理过的环境中运行命令，所用的东西比你在 shell 提示符下通常拥有的东西要少得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T22:09:45.103

我同意 Greg 的观点，即您的环境变量可能与您的想法不同。如前所述，它从一个空的石板开始。要调试变量，您可以使用 set 命令：

```
set >~/some-file.txt 
```

您可以包含您的 .bash_profile 文件，但如果您缺少 PATH、HOME 等，那将没有那么有用。首先，您需要设置这些基本变量（尽管应该为用户 cron 脚本设置 HOME。）要加载您的 bash 配置文件脚本，请执行此操作，假设 $HOME 已正确设置：

```
. ~/.bash_profile 
```

但是，阅读 anacrontab 手册页我看到了这个：

```
@period_name delay job-identify command

The period_name can only be set to monthly at the present time.
This will ensure jobs are only run once a month, no matter the
number of days in this month, or the previous month. 
```

所以感觉你的@hourly 不起作用。显然，手册页可能在撒谎。我不是 100% 确定，因为我没有那么多地使用 Anacron。当前的 Cron 设置将自动使用 Anacron 运行预期会运行但由于计算机关闭而以某种方式失败的脚本。

# android - 在android中创建条形图

> ID：12453434
> 
> 赞同：0
> 
> 时间：2012-09-17T05:13:14.733
> 
> 标签：android, web-services, bar-chart

有没有人遇到过这个问题。现在我正在尝试在 android 中显示条形图，但我通过使用它从 Web 服务获取 x 和 y 轴值。我通过 SOAP 方法使用它。这里我我遇到了这个问题，谁能告诉我如何克服这个问题？

**LOGCAT**

```
09-17 10:18:09.651: W/KeyCharacterMap(339): No keyboard for id 0
09-17 10:18:09.651: W/KeyCharacterMap(339): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
09-17 10:18:20.450: D/AndroidRuntime(339): Shutting down VM
09-17 10:18:20.450: W/dalvikvm(339): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
09-17 10:18:20.460: E/AndroidRuntime(339): FATAL EXCEPTION: main
09-17 10:18:20.460: E/AndroidRuntime(339): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.xmlparsing_test/com.example.xmlparsing_test.BarGraphActivity}: java.lang.NullPointerException
09-17 10:18:20.460: E/AndroidRuntime(339):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
09-17 10:18:20.460: E/AndroidRuntime(339):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
09-17 10:18:20.460: E/AndroidRuntime(339):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
09-17 10:18:20.460: E/AndroidRuntime(339):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
09-17 10:18:20.460: E/AndroidRuntime(339):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-17 10:18:20.460: E/AndroidRuntime(339):  at android.os.Looper.loop(Looper.java:123)
09-17 10:18:20.460: E/AndroidRuntime(339):  at android.app.ActivityThread.main(ActivityThread.java:4627)
09-17 10:18:20.460: E/AndroidRuntime(339):  at java.lang.reflect.Method.invokeNative(Native Method)
09-17 10:18:20.460: E/AndroidRuntime(339):  at java.lang.reflect.Method.invoke(Method.java:521)
09-17 10:18:20.460: E/AndroidRuntime(339):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
09-17 10:18:20.460: E/AndroidRuntime(339):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
09-17 10:18:20.460: E/AndroidRuntime(339):  at dalvik.system.NativeStart.main(Native Method)
09-17 10:18:20.460: E/AndroidRuntime(339): Caused by: java.lang.NullPointerException
09-17 10:18:20.460: E/AndroidRuntime(339):  at com.example.xmlparsing_test.BarGraphActivity.buildBarDataset(BarGraphActivity.java:120)
09-17 10:18:20.460: E/AndroidRuntime(339):  at com.example.xmlparsing_test.BarGraphActivity.DrawGraph(BarGraphActivity.java:61)
09-17 10:18:20.460: E/AndroidRuntime(339):  at com.example.xmlparsing_test.BarGraphActivity.onCreate(BarGraphActivity.java:26)
09-17 10:18:20.460: E/AndroidRuntime(339):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
09-17 10:18:20.460: E/AndroidRuntime(339):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
09-17 10:18:20.460: E/AndroidRuntime(339):  ... 11 more 
```

条形图活动.java

```
 public class BarGraphActivity extends Chart
 {

public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main1);

    Chart ch = new Chart();
    DrawGraph();
}

public void DrawGraph() 
{
String[] titles = new String[] { " Barcharts",""};

double[] x_axis = null;   
double[] y_axis = null;

List<double[]> values = new ArrayList<double[]>();

values.add(x_axis);
values.add(y_axis);

int[] colors = new int[] { Color.WHITE, Color.BLACK};

XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
renderer.setOrientation(Orientation.HORIZONTAL);

setChartSettings(renderer, "some texts", " ", " ",0,x_axis, 0,y_axis, Color.GRAY, Color.LTGRAY);
renderer.setXLabels(1);

renderer.addXTextLabel(1, "x_axis");
renderer.addYTextLabel(1, "y_axis");

renderer.setPanEnabled(true, false);

int length = renderer.getSeriesRendererCount();
for (int i = 0; i < length; i++) 
{
  SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
  seriesRenderer.setDisplayChartValues(true);
  }

ChartFactory.getBarChartIntent(this, buildBarDataset(titles, values), renderer,Type.DEFAULT);
}

protected XYMultipleSeriesRenderer buildBarRenderer(int[] colors) 
{

        // creates a SeriesRenderer and initializes it with useful default values as well as colors

    XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();

    renderer.setAxisTitleTextSize(15);
    renderer.setChartTitleTextSize(20);
    renderer.setLabelsTextSize(15);
    renderer.setLegendTextSize(15);

    int length = colors.length;
    for (int i = 0; i < length; i++) 
    {
      SimpleSeriesRenderer r = new SimpleSeriesRenderer();
      r.setColor(colors[i]);
      renderer.addSeriesRenderer(r);
    }
    return renderer;
  }

protected void setChartSettings(XYMultipleSeriesRenderer renderer, String title, String xTitle,
String yTitle, double xMin, double[] x_axis, double yMin, double[] y_axis, int axesColor,int labelsColor) 
 {
    // sets lots of default values for this renderer

renderer.setChartTitle(title);

renderer.setXTitle(xTitle);
renderer.setYTitle(yTitle);

renderer.setXAxisMin(xMin);

renderer.setYAxisMin(yMin);
renderer.setAxesColor(axesColor);
renderer.setLabelsColor(labelsColor);

renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(Color.BLACK);
}

protected XYMultipleSeriesDataset buildBarDataset(String[] titles, List<double[]> values) 
{
        // adds the axis titles and values into the dataset

XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();

int length = titles.length;

for (int i = 0; i < length; i++) 
{
   CategorySeries series = new CategorySeries(titles[i]);

   double[] v = values.get(i);

   int seriesLength = v.length;

   for (int k = 0; k < seriesLength; k++) 
   {
     series.add(v[k]);
    }

   dataset.addSeries(series.toXYSeries());
   }
return dataset;
 }    } 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:27:18.733

还有其他方法可以制作 Graph 你只需要这个方法还是你想要任何其他方法。？如果是的话，我会用一个新的来编辑我的答案`Bar Graph Activity`

# r - R all.equal 中可能存在的错误

> ID：12453435
> 
> 赞同：4
> 
> 时间：2012-09-17T05:13:19.973
> 
> 标签：r

我在 R 的 all.equal 函数中遇到了一些奇怪的行为。基本上，我以不同的方式创建两个相同的 data.frame，然后调用 all.equal 函数（同时检查数据和属性）。

重现该行为的代码如下：

```
var.a <- data.frame(cbind(as.integer(c(1,5,9)), as.integer(c(1,5,9))))
colnames(var.a) <- c("C1", "C2")
rownames(var.a) <- c("1","5","9")

var.b <- data.frame(matrix(NA, nrow = 10, ncol = 2))
var.b[, 1] <- 1:10
var.b[, 2] <- 1:10
colnames(var.b) <- c("C1", "C2")
var.b <- var.b[seq(1, nrow(var.b), 4), ]

all.equal(var.a, var.b) 
```

这是一个错误还是我只是错过了什么？我对 all.equall 函数做了一些调试，看来问题出在 data.frames 的行名上（一旦它们是字符，而其他时候是数字向量）。all.equall 函数的响应：

> [1]“属性：<组件2：模式：字符，数字>”
> [2]“属性：<组件2：目标是字符，当前是数字>”

然而，

> typeof(rownames(var.a)) == typeof(rownames(var.b))

返回**TRUE**，这让我很困惑。

PS：对象的结构似乎相同：

```
> str(var.a)
'data.frame':   3 obs. of  2 variables:
$ C1: int  1 5 9
$ C2: int  1 5 9
> str(var.b)
'data.frame':   3 obs. of  2 variables:
$ C1: int  1 5 9
$ C2: int  1 5 9 
```

如果有人能对此有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T06:29:09.703

（我不太清楚你认为你发现了什么错误。数据框的创建方式不同。） var.a 和 var.b 的结构有两个不同：列：`numeric`在“var.a”和`integer`“var.b”中；以及行名的模式：`integer`对于“var.a”和`character`“var.b”：

```
> dput(var.b)
structure(list(C1 = c(1L, 5L, 9L), C2 = c(1L, 5L, 9L)), .Names = c("C1", 
"C2"), row.names = c(1L, 5L, 9L), class = "data.frame")
> dput(var.a)
structure(list(C1 = c(1, 5, 9), C2 = c(1, 5, 9)), .Names = c("C1", 
"C2"), row.names = c("1", "5", "9"), class = "data.frame")

> mode(attr(var.b, "row.names"))
[1] "numeric"
> storage.mode(attr(var.b, "row.names"))
[1] "integer"
> mode(attr(var.a, "row.names"))
[1] "character" 
```

补充说明：如果你想检查数值相等，你应该使用'check.attributes'开关：

```
> all.equal(var.a, var.b, check.attributes=FALSE)
[1] TRUE 
```

如果您查看`var.b`with `dput`，您可以看到行名是数字：

```
> dput(var.b)
structure(list(C1 = c(1L, 5L, 9L), C2 = c(1L, 5L, 9L)), .Names = c("C1", 
"C2"), row.names = c(1L, 5L, 9L), class = "data.frame") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-01T10:45:24.003

> 然而，
> 
> typeof(rownames(var.a)) == typeof(rownames(var.b))
> 
> 返回TRUE，这让我感到困惑。

除了投票最多的答案外，请注意属性存储为`"character"`for`var.a`和 as `"numeric"`for `var.b`：

```
> attr(var.a, "row.names")
[1] "1" "5" "9"
> attr(var.b, "row.names")
[1] 1 5 9 
```

而该`rownames()`函数将强制其输出值`"character"`：

```
> rownames(var.a)
[1] "1" "5" "9"
> rownames(var.b)
[1] "1" "5" "9" 
```

这就是您进入`TRUE`上述命令的原因。根据`?rownames`：

> 对于数据框，rownames 的值应该是非重复和非缺失名称的字符向量（这是强制的），而 colnames 的值应该是（最好）唯一的语法有效名称的字符向量。在这两种情况下，值都将被 as.character 强制转换，设置 colnames 会将行名转换为字符。

更相关的检查是：

```
> typeof(attr(var.a, "row.names")) == typeof(attr(var.b, "row.names"))
[1] FALSE 
```

这就是说，我相信`all.equal()`消息充其量是神秘的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:26:36.387

一个是数字模式，另一个是整数模式。你可以看到这个：

```
str(var.a); str(var.b)

> str(var.a); str(var.b)
'data.frame':   3 obs. of  2 variables:
 $ C1: num  1 5 9
 $ C2: num  1 5 9
'data.frame':   3 obs. of  2 variables:
 $ C1: int  1 5 9
 $ C2: int  1 5 9 
```

# mule - Mule 核心模式的“prolog 中不允许内容”错误

> ID：12453436
> 
> 赞同：1
> 
> 时间：2012-09-17T05:13:38.197
> 
> 标签：mule, saxparseexception

在运行我的 mule 配置文件时，我在以下行中收到 SAXParserException "Content is not allowed in prolog"：

```
<mule xmlns="http://www.mulesoft.org/schema/mule/core"
            ...... 
            http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/3.0/mule.xsd 
    .......

</mule> 
```

当我在浏览器中打开[http://www.mulesoft.org/schema/mule/core/3.0/mule.xsd](http://www.mulesoft.org/schema/mule/core/3.0/mule.xsd)时，它会在 XSD 文件开始之前显示以下警告消息：

警告：fopen（./logs/proxy-2012-09.log）：无法打开流：/var/www/domains/mulesoft.org/mule/drupal/drupal-6.25/mule-schema/proxy 中的权限被拒绝。第 56 行的 php

以及更多警告。

有人可以提出任何解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:34:36.813

周末期间，MuleSoft 托管 XSD 的服务器出现了一些中断。

然而，通过 web 解析模式只是一种后备，任何应用程序都不应该依赖它。

要确保从 jars 而不是从 Internet 检索架构，您需要将架构版本（例如 3.0 ）与类路径中包含的 jars 版本相同。

如果您使用 mule >= 3.2，建议使用当前版本。

# .net - Task.StartNew 初学者问题

> ID：12453437
> 
> 赞同：0
> 
> 时间：2012-09-17T05:13:45.953
> 
> 标签：.net, c#-4.0, task-parallel-library

```
Task.Factory.StartNew((param,param2) => { Console.WriteLine("Test"); },
                                        TaskCreationOptions.None); 
```

错误 1 ​​委托“System.Action”不接受 2 个参数

我收到上述错误。无法理解出了什么问题。

编辑：为什么它接受单个参数

```
 Task.Factory.StartNew((param1) =>
            {
                for (int j = 0; j < 10; j++)
                {
                    Console.WriteLine(string.Format("Task : {0}, outputing {1}- {2}",
                       param1, j.ToString(), param1));
                }
            }, string.Format("Tast Count " + ic++.ToString())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:40:58.217

该方法有[几个重载](http://msdn.microsoft.com/en-us/library/dd321421.aspx)`Task.Factory.StartNew`。您在问题中提到的两个是：

```
Task.Factory.StartNew(Action, TaskCreationOptions)
Task.Factory.StartNew(Action<Object>, Object) 
```

这些方法做了相当不同的事情。`Action`但是，需要注意的是和之间的区别`Action<object>`。Lambda 本质上是匿名方法，因此为了直观地了解它们是什么，让我们将它们转换为方法签名。

```
Action                 -> void AnonymousMethod()
Action<object>         -> void AnonymousMethod(object f)
Action<object, object> -> void AnonymousMethod(object f, object s) 
```

在您的第一个示例中，它无法编译，它等效于最后一个示例。没有重载，因为`Task.Factory.StartNew`它需要多个参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:17:36.343

`StartNew`接受一个`Action`委托，其定义为：

```
public delegate void Action() 
```

也就是没有返回值，也没有参数的方法。您正在尝试将两个参数传递给一个动作：`param`和`param2`.

您的代码应如下所示：

```
Task.Factory.StartNew(() => { Console.WriteLine("Test"); });
                    // ^^ Note: no "param" or "param2". 
```

此外，`TaskCreationOptions`附加到自定义任务工厂，而不是默认任务工厂。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T05:18:01.400

`Task.Factory.StartNew`接受 1 个参数 a `System.Action`。

还有一个`System.Action`根据[MSDN Action Delegate](http://msdn.microsoft.com/en-us/library/system.action.aspx)

> 封装一个没有参数且不返回值的方法。

从外观上看，您正在尝试传递两个参数？您没有将 TaskCreationOptions.None 传递给 StartNew()。如果您确实想传递选项（您不希望传递选项，因为您使用的是“none”），那么您将创建一个自定义任务工厂（将选项传递给它的构造函数）。

# eclipse - 可以将eclipse配置为自动查找jar的来源吗？

> ID：12453444
> 
> 赞同：4
> 
> 时间：2012-09-17T05:14:10.877
> 
> 标签：eclipse

假设我有`foo.jar`并且`foo-src.jar`有一种方法可以将`foo-src.jar`Eclipse 默认情况下找到它的地方放置，而不必询问与 jar 对应的源的位置。

我知道我可以使用用户定义的库来指定 .jar 的源，但是是否有其他方法不需要更改 eclipse 配置或项目配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:47:37.460

您可以尝试使用其所有设置（如 Javadoc 和源代码）全局定义库，并在项目的构建路径中引用它。您可以在*Window -> Preferences -> Java -> Build Path -> Classpath Variables* or *User Libraries*下执行此操作。

如果您需要为此提供自动工具，请尝试通过[m2e 插件使用](http://m2eclipse.codehaus.org/)[Maven](http://maven.apache.org/)。它会根据需要自动下载 Javadoc 和工件（库）的源代码。当然，这取决于库的提交者，但大部分时间都有效。

# c# - 尝试使用 OracleConnection 使用 C# 连接到 oracle express 10 时出错

> ID：12453445
> 
> 赞同：1
> 
> 时间：2012-09-17T05:14:16.550
> 
> 标签：c#, .net, database, oracle

我在 .Net(3.5) C# 和 Oracle Express 10g 中开发应用程序。当我尝试连接到数据库时，出现此错误：

从我得到的 OracleConnection 对象，在 ServerVersion 属性中：

`ServerVersion = 'conn.ServerVersion' produjo una excepción de tipo 'System.InvalidOperationException'`

并且，在捕获中：

`ORA-12154: TNS:could not resolve the connect identifier specified`

我正在使用这个连接字符串：

`Data Source=Angelo-HP/XE;User ID=MAPFRE;Password=123456;`

我的 tnsnames.ora 已设置：

```
XE =
  (DESCRIPTION =
  (ADDRESS = (PROTOCOL = TCP)(HOST = Angelo-HP)(PORT = 1521))
  (CONNECT_DATA =
    (SERVER = DEDICATED)
    (SERVICE_NAME = XE)
  )
)

EXTPROC_CONNECTION_DATA =
  (DESCRIPTION =
  (ADDRESS_LIST =
    (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC_FOR_XE))
  )
  (CONNECT_DATA =
    (SID = PLSExtProc)
    (PRESENTATION = RO)
  )
)

ORACLR_CONNECTION_DATA = 
(DESCRIPTION = 
  (ADDRESS_LIST = 
    (ADDRESS = (PROTOCOL = IPC)(KEY = EXTPROC_FOR_XE)) 
  ) 
  (CONNECT_DATA = 
    (SID = CLRExtProc) 
    (PRESENTATION = RO) 
  ) 
) 
```

我的 sqlnet.ora 是这样的：

`SQLNET.AUTHENTICATION_SERVICES = (NTS) NAMES.DIRECTORY_PATH= (LDAP, TNSNAMES, HOSTNAME)`

任何想法为什么我无法连接？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:31:05.700

如我的评论中所述，您应该将 Datasource-property 更改为 XE。

```
Data Source=XE;User ID=MAPFRE;Password=123456; 
```

此外，您必须确保 tnsnames 中的标识符前面没有空格。

另一件事：如果您安装了多个 oracle-clients，则必须确保此条目位于正确的 tnsnames 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:11:42.440

您的连接字符串被提及为

```
Data Source=Angelo-HP/XE;User ID=MAPFRE;Password=123456; 
```

这意味着它正在寻找 Angelo-HP/XE 的 TNSNAME，它不在 TNS 名称中，因此您会收到错误消息

将其更改为

```
Data Source=XE;User ID=MAPFRE;Password=123456; 
```

# symfony - 如何在学说 2 中设置枚举数据类型

> ID：12453448
> 
> 赞同：7
> 
> 时间：2012-09-17T05:14:38.800
> 
> 标签：symfony, doctrine-orm

在基于注解的映射中，根据教义的文档，我们可以如下所示：

```
/** @Column(type="string", columnDefinition="ENUM('visible', 'invisible')") */ 
```

我的问题是如何在 yaml 元数据文件中表示这一点？

我想做这样的事情：

```
fields:
status:
  type: string
  columnDefinition: .... 
```

我正在使用 symfony 2 作为框架

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T10:11:59.407

只需使用：

```
fields:
status:
  type: string
  columnDefinition: ENUM('visible', 'invisible') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-01-23T20:27:42.973

```
status:
    type: enum
    values: ['visible', 'invisible'] 
```

[https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/yaml-schema-files.html#enums](https://www.doctrine-project.org/projects/doctrine1/en/latest/manual/yaml-schema-files.html#enums)

# javascript - 母版页中 JavaScript 文件的代码未在 Web 表单中运行

> ID：12453449
> 
> 赞同：2
> 
> 时间：2012-09-17T05:14:41.603
> 
> 标签：javascript, asp.net, master-pages

在 Web 应用程序解决方案中，我有一个位于根文件夹中的母版页。我也有使用此母版页的 Web 表单，它们位于根文件夹中的一个文件夹中。

母版页----位于----> 根文件夹

Web 表单--------位于----> 根文件夹/表单

我的 JavaScript 无法在 Web 表单中运行，因为此代码无法访问脚本文件夹中的源文件。我使用了以下内容：

```
<script type="text/javascript" src="<%= Page.ResolveClientUrl("~/Scripts/stmenu.js") %>"></script> 
```

但是，它会导致此错误：

> 无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）。

如何将位于单独文件夹中的 JavaScript 插入母版页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:29:45.760

请`runat="server"`像这样添加到头部标签

```
<head runat="server"> 
```

也请`Page.ResolveUrl`像这样使用

```
<script type="text/javascript" src="<%= Page.ResolveUrl("~/Scripts/stmenu.js") %>">
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:07:57.583

在母版页的 <head> 部分添加另一个 asp:contentplaceholder，Webforms 可以在其中放置其 Javascript 引用和代码。

# javascript - 结合用户滚动+动画css3/Javascript

> ID：12453453
> 
> 赞同：3
> 
> 时间：2012-09-17T05:15:19.370
> 
> 标签：javascript, animation, css, scroll, parallax

到目前为止的第一篇文章:)

我正在创建一个结合 css3 + javascript 的视差网站。

我遵循[了本](http://coding.smashingmagazine.com/2011/07/12/behind-the-scenes-of-nike-better-world/)教程，我不得不说它让我对这个主题有了相当的了解。

我只是想知道两件事：

1.  如何平移 X 轴上的运动？
2.  **最重要**的：如何将用户的滚动与动画结合起来？

我已经看到那里有很多插件，但我宁愿自己开发一个解决方案，而不会使代码过于繁琐和复杂。您能否指出一些好的资源，这将启发我了解这种技术？

谢谢你们！

于 2012 年 9 月 17 日 14.14 编辑（+1 GTM 时间）如果有人感兴趣，那应该是我们用来解决问题的想法代码：

$(document).ready(function() { $('section[data-type="example"]').scroll(function() {

```
// If the user scroll as much as we need, in this instance 750px
if (scrollTop() > '750px') {
  // switch its class from ".animation" to ".animated" 
  $(".animation").toggleClass("animated"); 
} 
```

}); });

CSS 类是： .animation { width: 300px; 高度：300px：-webkit-transition：宽度 2s 缓动，高度 2s 缓动；-moz-transition：宽 2s 缓动，高 2s 缓动；-o-transition：宽 2s 缓动，高 2s 缓动；-ms-transition：宽 2s 缓动，高 2s 缓动；过渡：宽 2s 缓动，高 2s 缓动；}

.animated { 宽度：400px; 高度：400px；}

如我们所见，在“.animation”中我们会找到初始大小和动画，在“.animated”中我们将打印我们想要实现的内容。

这要归功于@jfriend00 提供的提示。不幸的是，我还没有机会尝试它，所以请随时改进它。我在这里写它是因为似乎有人对这个主题感兴趣，并且之前我将它发布在评论中使其无法阅读:)

此外，Jfriend00 告诉 .scrollTop() 是一个 JQuery 方法，而不是一个普通的函数。您认为使用纯 JS 可以如何改进它？

提前感谢并为我的语法错误和菜鸟感到抱歉；我不是英语母语，我对编程很陌生:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:42:41.537

从您的评论中：

> 比如说，我想将用户的滚动组合成一个过渡效果。因此，即一旦用户滚动了 750 像素，我希望一个对象以淡入淡出过渡出现。如何将滚动因子与动画联系起来？

这是处理该特定示例的一种方法：

1.  您将为滚动事件注册一个事件侦听器。
2.  在滚动事件处理程序中，您将检查当前滚动位置并决定是否要采取行动（例如`scrollTop`超过 750 像素）。
3.  触发 CSS3 动画的最简单方法是向对象添加类名。如果该对象已为该新类分配了 CSS，并且该对象已配置为通过将类名称添加到对象而更改的任何属性上的 CSS 过渡，则添加该类时将启动 CSS3 动画。

# c# - 何时创建新的 Controller

> ID：12453455
> 
> 赞同：0
> 
> 时间：2012-09-17T05:15:29.200
> 
> 标签：c#, asp.net-mvc

我正在努力了解何时应该创建一个新控制器。

假设我有一个维护人员记录（姓名、年龄等）的应用程序

我有几点看法。显示人员列表的视图，我可以选择显示。显示详细人员信息的视图（仅查看） 编辑人员记录的视图 添加人员记录的视图（在 MVC 中，添加和编辑通常是一个视图吗？）

目前，我有一个控制器。但这是对的，还是每个视图都应该有一个控制器？我担心我的单个控制器变得太大...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:18:22.460

最好为每个资源（在您的情况下为人）设置一个控制器，而不是为每个视图设置一个控制器。因此，`PersonsController`处理人员列表、人员详细信息和编辑人员是正确的。

# c# - 内存泄漏 C# 异步（获取堆栈）

> ID：12453456
> 
> 赞同：0
> 
> 时间：2012-09-17T05:15:46.150
> 
> 标签：c#, memory-leaks, threadpool, out-of-memory

我有一个应用程序，我将通信从 TCPClient 切换到使用 SocketAsyncEventArgs，但是当应用程序运行几个小时时，我确实遇到了一个问题，我似乎找不到它。这是我的堆栈跟踪，有人知道吗？：

```
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.OutOfMemoryException

Stack:
at System.Threading.ThreadPoolWorkQueue.Enqueue(System.Threading.IThreadPoolWorkItem, Boolean)
at System.Threading.ThreadPool.QueueUserWorkItemHelper(System.Threading.WaitCallback, System.Object, System.Threading.StackCrawlMark ByRef, Boolean)
at System.Threading.ThreadPool.QueueUserWorkItem(System.Threading.WaitCallback, System.Object)
at System.IO.Ports.SerialStream+EventLoopRunner.CallEvents(Int32)
at System.IO.Ports.SerialStream+EventLoopRunner.WaitForCommEvent()
at System.Threading.ThreadHelper.ThreadStart_Context(System.Object)
at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object, Boolean)
at System.Threading.ExecutionContext.Run(System.Threading.ExecutionContext, System.Threading.ContextCallback, System.Object)
at System.Threading.ThreadHelper.ThreadStart() 
```

代码：

```
public Client(Form1 parent)
        {
            todo = new ArrayList();
            buffert = new List<MsgStruct>();
            this.parent = parent;
            this.ip = ini.GetFromIni("CONFIG", "IP");
            this.port = ini.GetFromIni("CONFIG", "PORT");
            data = new byte[100000];

            // Addres of the host.
            IPAddress[] addressList = host.AddressList;

            // Instantiates the endpoint and socket.
            this.hostEndPoint = new IPEndPoint(addressList[addressList.Length - 1], Convert.ToInt32(port));
            this.clientSocket = new Socket(this.hostEndPoint.AddressFamily, SocketType.Stream, ProtocolType.Tcp);

            startTimer = new System.Timers.Timer();
            startTimer.Elapsed += new ElapsedEventHandler(startSendLoop);
            startTimer.Interval = 1000;
            startTimer.Start();
            sendTimer = new System.Timers.Timer();
            sendTimer.Elapsed += new ElapsedEventHandler(sendloop);
            sendTimer.Interval = 500;
            sendTimer.Start();
            pingTimer = new System.Timers.Timer();
            pingTimer.Elapsed += new ElapsedEventHandler(pingTimer_Elapsed);
            pingTimer.Interval = 13000;
            pingTimer.Start();

        }

        internal void Disconnect()
        {
            try
            {
                clientSocket.Disconnect(true);
            }
            catch (Exception e)
            {
                System.Diagnostics.Debug.WriteLine(e.ToString());
                MessageBox.Show(e.ToString());
            }
        }

        public void Dispose()
        {
            try
            {
                autoConnectEvent.Close();
                autoSendReceiveEvents[SendOperation].Close();
                autoSendReceiveEvents[ReceiveOperation].Close();
                if (this.clientSocket.Connected)
                {
                    this.clientSocket.Close();
                }
            }
            catch (Exception ex)
            {
            }
        }

        public void pingTimer_Elapsed(object sender, ElapsedEventArgs e)
        {
            sendPing = true;
        }

        public void startSendLoop(object sender, ElapsedEventArgs e)
        {
            try
            {
                if (!this.clientSocket.Connected)
                {

                    connectArgs = new SocketAsyncEventArgs();

                    connectArgs.UserToken = this.clientSocket;
                    connectArgs.RemoteEndPoint = this.hostEndPoint;
                    connectArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnConnect);

                    clientSocket.ConnectAsync(connectArgs);
                    bool test = autoConnectEvent.WaitOne(5000);

                    gotData = true;
                    lastTime = DateTime.Now;

                }

            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine(ex.ToString());
            }
        }

        private void ProcessError(SocketAsyncEventArgs e)
        {
            Socket s = e.UserToken as Socket;
            if (s.Connected)
            {
                // close the socket associated with the client
                try
                {
                    s.Shutdown(SocketShutdown.Both);
                }
                catch (Exception)
                {
                    // throws if client process has already closed
                }
                finally
                {
                    if (s.Connected)
                    {
                        s.Close();
                    }
                }
            }

        }

        private void OnConnect(object sender, SocketAsyncEventArgs e)
        {
            try
            {
                autoConnectEvent.Set();

                // Set the flag for socket connected.
                this.connected = (e.SocketError == SocketError.Success);
            }
            catch (Exception ex)
            {
            }
        }

        private void OnReceive(object sender, SocketAsyncEventArgs e)
        {
            try
            {
                while (true)
                {
                    if (canReceive)
                    {
                        canReceive = false;
                        string stringData;
                        int recv = 0;
                        for (int i = 0; i < e.Buffer.Length; i++)
                        {
                            if (e.Buffer[i] != 0)
                                recv++;
                            else
                                break;
                        }

                        if (recv > 0)
                        {
                            int count = 0;
                            for (int i = 0; i < data.Length; i++)
                            {
                                if (data[i] != 0)
                                    count++;
                                else
                                    break;
                            }

                            e.Buffer.CopyTo(data, count);

                            lastTime = DateTime.Now;
                            gotData = true;
                            if ((byte)data[count + recv - 1] == (byte)255)
                            {
                                int cnt = -1;
                                for (int i = 0; i < count + recv; i++)
                                {
                                    if (data[i] == (byte)254)
                                    {
                                        cnt = i;
                                        break;
                                    }
                                }
                                int nr = (count + recv) - cnt - 2;
                                byte[] tmp = new byte[nr];

                                for (int i = 0; i < nr; i++)
                                {
                                    tmp[i] = data[cnt + i + 1];
                                }
                                string crc = Encoding.UTF8.GetString(tmp);
                                stringData = Encoding.UTF8.GetString(data, 0, cnt);
                                MsgStruct msgs = new MsgStruct(stringData);
                                msgs.setCrc(crc);
                                todo.Add(msgs);
                                data = new byte[100000];

                            }
                        }
                        canReceive = true;
                        break;
                    }
                    else
                        Thread.Sleep(10);
                }

                handleToDo();

                autoSendReceiveEvents[SendOperation].Set();
                e.Dispose();

            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine(ex.ToString());
            }
        }

        private void OnSend(object sender, SocketAsyncEventArgs e)
        {
            try
            {
                // Signals the end of send.
                sendSuccess = true;
                autoSendReceiveEvents[ReceiveOperation].Set();

                if (e.SocketError == SocketError.Success)
                {
                    if (e.LastOperation == SocketAsyncOperation.Send)
                    {
                        // Prepare receiving.
                        Socket s = e.UserToken as Socket;

                        byte[] receiveBuffer = new byte[100000];
                        e.SetBuffer(receiveBuffer, 0, receiveBuffer.Length);
                        e.Completed += new EventHandler<SocketAsyncEventArgs>(OnReceive);
                        s.ReceiveAsync(e);
                    }
                }
                else
                {
                    this.ProcessError(e);
                }
            }
            catch (Exception ex)
            {
            }
        }

        public void sendloop(object sender, ElapsedEventArgs e)
        {

            try
            {

                sendTimer.Enabled = false;
                if (this.clientSocket.Connected)
                {
                    byte[] data = new byte[1024];
                    bool extendedTime = false;
                    DateTime tmpDate = lastTime.AddSeconds(30);
                    if (DateTime.Now > tmpDate)
                    {
                        gotData = false;
                    }

                    if (canUseBuffert && sendSuccess)
                    {
                        canUseBuffert = false;
                        if (buffert.Count > 0)
                        {
                            if (buffert[0] != null && buffert[0].getMsg().Length != 0)
                            {
                                byte[] ba = Encoding.UTF8.GetBytes(buffert[0].getMsg());

                                if (buffert[0].getCrc() == "")
                                {
                                    ulong tmp = CRC.calc_crc(ba, ba.Length);
                                    buffert[0].setCrc(tmp.ToString("X"));
                                }

                                if (buffert[0].canSendByTimeout())
                                {
                                    string crcStr = "?" + buffert[0].getCrc() + "?";
                                    byte[] bb = Encoding.UTF8.GetBytes(crcStr);
                                    crcStr = Encoding.UTF8.GetString(bb);
                                    byte[] fullMsg = new byte[ba.Length + bb.Length];
                                    bb[0] = 254;
                                    bb[bb.Length - 1] = 255;

                                    ba.CopyTo(fullMsg, 0);
                                    bb.CopyTo(fullMsg, ba.Length);
                                    string s = System.Text.UTF8Encoding.ASCII.GetString(fullMsg);

                                    this.clientSocket.NoDelay = false;
                                    completeArgs = new SocketAsyncEventArgs();
                                    completeArgs.SetBuffer(fullMsg, 0, fullMsg.Length);
                                    completeArgs.UserToken = this.clientSocket;
                                    completeArgs.RemoteEndPoint = this.hostEndPoint;
                                    completeArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnSend);

                                    sendSuccess = false;
                                    // Start sending asyncronally.
                                    clientSocket.SendAsync(completeArgs);

                                }
                            }
                        }
                        else
                        {
                            extendedTime = true;
                            byte[] bba = Encoding.UTF8.GetBytes("X");
                            this.clientSocket.NoDelay = true;
                            completeArgs = new SocketAsyncEventArgs();
                            completeArgs.SetBuffer(bba, 0, bba.Length);
                            completeArgs.UserToken = this.clientSocket;
                            completeArgs.RemoteEndPoint = this.hostEndPoint;
                            completeArgs.Completed += new EventHandler<SocketAsyncEventArgs>(OnSend);

                            sendSuccess = false;
                            // Start sending asyncronally.
                            clientSocket.SendAsync(completeArgs);

                        }
                    }
                    canUseBuffert = true;
                    if (!clientSocket.Connected && !gotData)
                        Disconnect();

                }

                sendTimer.Enabled = true;
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine(ex.ToString());
                sendTimer.Enabled = true;
            }

        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T06:37:45.960

我会认真看看**data = new byte[100000];** 调用您的通信程序。因为它大于 85KB（准确地说是 85,000 字节）内存块，所以您正在填充（并分割）您的 LOH。这可能会导致 OutOfMemoryException 问题。看到这个[链接](http://bit.ly/OzllO2)

# iphone - 如何确定用户在 ABUnknownPersonViewController 中按下了两个按钮中的哪一个？

> ID：12453462
> 
> 赞同：0
> 
> 时间：2012-09-17T05:16:40.377
> 
> 标签：iphone, objective-c, xcode, uibutton

我有一个按钮，如果用户按下我正在显示`ABUnknownPersonViewController`。现在的问题是有两个选项**Create New Contact**和**Add To Existing Contact**。如何确定选择了哪些选项？

我需要知道这一点，因为在我的应用程序中，我在另一部分显示我的联系人。有时它会导致我的应用程序因错误而崩溃：

> 不应尝试显示多个添加到现有联系人的人员选择器

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T10:26:19.893

我猜你有 2 个 UIButtons？给他们每个人一个标签，并指出他们使用一种方法。如果您使用 IB，只需 CTRL 拖动到您的代码（.m 文件）。像这样的东西：

```
- (IBAction)buttonPressed:(UIButton *)sender {
  switch (sender.tag) {
    case 0:
      // load create controller
      break;

    case 1:
      // load add controller
      break;

    default:
      break;
  }
} 
```

您也可以尝试比较按钮标题标签上的文本，尽管我认为这不是一个好的做法，因为按钮上的文本可能会在开发过程中发生变化。

```
- (IBAction)buttonPressed:(UIButton *)sender {
  if([sender.titleLabel.text isEqualToString:@"create"]) {
    // load create controller
  } else if ([sender.titleLabel.text isEqualToString:@"add"]) {
    // load add controller
  }
} 
```

您还可以为每个按钮创建 2 种不同的方法 :) 这样您可以避免使用标签，因为两个按钮都有自己的回答方法。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:28:49.223

为按钮分配标签值并检查单击的按钮的标签。根据标签放置条件并显示您的意见。

```
- (IBAction)contactsEdit_New:(id)sender 
{
    if ([addExitingBtn tag]==0)
    {
        // load ur view for exiting

    } 
    else  // here you can add if condition if required
    {
        // load view for creating new
    }

} 
```

希望这有帮助。

# c++ - 对象渲染顺序，场景图？

> ID：12453465
> 
> 赞同：2
> 
> 时间：2012-09-17T05:17:26.317
> 
> 标签：c++, opengl, scenegraph

我正在使用 OpenGL 渲染 3D 对象。3D 世界中的每个对象都有一个边界框和一个关联的模型矩阵，用于将对象从零件坐标系 (PCS) 转换为世界 (WCS)。边界框也在 PCS 中。每个对象的质心在 WCS 中计算并与每个对象相关联。

给定 WCS 中的相机位置和目标位置：-> 我想从前到后渲染所有不透明对象（alpha == 1）。-> 我想在渲染不透明对象后从后到前渲染所有半透明对象。

由于这是我第一次尝试实现图形引擎，我不确定场景图将如何帮助我。我想我必须根据与相机的距离手动对对象进行排序，然后根据不透明/半透明对象进行渲染。我真的需要场景图吗？我应该如何实施引擎。我可以使用其他可用的引擎，但我不喜欢并且想自己实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T05:59:21.087

好吧，这里不一定需要场景图，但确实需要渲染列表。也就是说，您清除列表的每个渲染周期。每个要渲染的对象都将自己添加到渲染列表中。完成后，根据与相机的距离对列表进行排序。

在您的情况下，您可能需要使用两个渲染列表：一个用于半透明对象，一个用于不透明对象。

对列表进行排序后，您可以翻阅它们并按顺序渲染对象。

您可能对场景图的需求感到困惑，因为几乎任何场景图实现都会渲染列表。

# java - 我可以更改列表视图上文本字段中的值吗

> ID：12453467
> 
> 赞同：0
> 
> 时间：2012-09-17T05:17:34.300
> 
> 标签：java, listview, android-emulator

我已经开始管理体育比赛的积分和细节。我已经从数据库中显示了竞争对手的 ID 和名称。但我需要动态获取他们在运行时获得的积分。

为了比赛的真实性，必须动态更改参赛者名单。有网球，国际象棋，跑步等各种游戏。

每个游戏都包含不同的玩家和不同的玩家数量。我们可以用这个`ListView`吗？

我需要解决给竞争对手加分的问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:14:48.520

您可以使用 listView.setAdapter(); 在 listView 上设置数据。此外，您可以添加一个 TextView 作为实现的 getView(position, converView, view) 的一部分并将其返回给 listView。

您还可以在 listView 内有一个 tableLayout。您将有一个单独的 layout.xml 文件用于 tableLayout。这将有 3 列。并将其作为 getView() 方法的一部分返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-24T05:24:15.573

您可以将 ListAdapter 与 TextViews 和 Data 占位符一起使用

# qt - QT QtreeView在树展开和折叠时显示图像

> ID：12453472
> 
> 赞同：2
> 
> 时间：2012-09-17T05:18:08.270
> 
> 标签：qt

我在 TreeView 中有一个要求，我必须在树折叠时显示向下箭头图像，在树展开时显示向上箭头图像，这适用于树中的每个父项。我的 UI 将只有 1 列，我必须在行尾显示此箭头图像。

我正在使用 QTreeView，我可以看到展开和折叠信号。但它确实只有索引争论。但我需要项目矩形详细信息才能在行尾显示图像。您能否建议有什么方法可以实现这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:35:32.033

最简单的方法是使用[QTreeView::setIndexWidget](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#setIndexWidget)（继承自 QAbstractItemView）。使用此方法，您可以设置自己的小部件来呈现节点。

如果您有更复杂的需求，则需要实现自定义委托。请查看[QAbstractItemDelegate 类参考](http://qt-project.org/doc/qt-4.8/qabstractitemdelegate.html)和[设计代表](http://doc.qt.nokia.com/qq/qq24-delegates.html)。通过使用委托，您可以完全控制您的项目。

# asp.net - Page_Load if statement fires regardless

> ID：12453473
> 
> 赞同：0
> 
> 时间：2012-09-17T05:18:14.260
> 
> 标签：asp.net, vb.net, if-statement

Is there any reason why an if then statement would fire regardless:

Its inside my Page_load:

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Dim a As New Clicks
    If Request.QueryString("u") IsNot Nothing Then
        a.Click(Request.QueryString("u"), Request.ServerVariables("REMOTE_ADDR"), Request.ServerVariables("HTTP_USER_AGENT"))
        Response.Redirect(urls.GetURL(Request.QueryString("u")))
    End If
End Sub 
```

As a result, I am get 126 instances of a.Click per page load when "u" isnt present?

I have tried to move to other Page Events but same result

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:59:08.710

Created a workaround by encasing if statement in the original if statement to capture the unwanted items.

Not the perfect solution but is working

# java - 这是MVC吗？简单的Java Graphics2D绘图程序

> ID：12453475
> 
> 赞同：3
> 
> 时间：2012-09-17T05:18:25.127
> 
> 标签：java, model-view-controller, graphics2d

我对使用 Java Graphics2D 在 MVC 上的尝试提出意见。我想通过一个简单的例子来了解 MVC。

请问我做对了吗？

文档在这里。

[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

[http://www.oracle.com/technetwork/articles/javase/index-142890.html](http://www.oracle.com/technetwork/articles/javase/index-142890.html)

反馈赞赏欢呼。

编辑：下面的代码现已根据 Rasmus 的反馈和进一步的研究得到修复。

```
public class App {

    /*
     * The view registers as a listener on the model. Any changes to the
     * underlying data of the model immediately result in a broadcast change
     * notification, which the view receives.
     * 
     * Note that the model is not aware of the view or the controller -- it
     * simply broadcasts change notifications to all interested listeners.
     * 
     * The controller is bound to the view. This typically means that any user
     * actions that are performed on the view will invoke a registered listener
     * method in the controller class.
     * 
     * The controller is given a reference to the underlying model.
     */
    public static void main(String[] args) {
        Model model = new Model();
        Controller controller = new Controller(model);
        View view = new View(controller);
        model.addModelChangedListener(view);

    }
}

import java.awt.Rectangle;
import java.util.ArrayList;
import java.util.Iterator;

public class Model {

    private ArrayList<Rectangle> rectangles = new ArrayList<Rectangle>();
    private ArrayList<ModelChangedEventListener> listeners = new ArrayList<ModelChangedEventListener>();

    public void addRectangle(int x, int y, int width, int height) {
        rectangles.add(new Rectangle(x, y, width, height));
        modelChangedEvent();
    }

    public ArrayList<Rectangle> getRectangles() {
        return rectangles;
    }

    public synchronized void addModelChangedListener(
            ModelChangedEventListener listener) {
        listeners.add(listener);
    }

    public synchronized void removeModelChangedListener(
            ModelChangedEventListener listener) {
        listeners.remove(listener);
    }

    private synchronized void modelChangedEvent() {
        ModelChangeEvent event = new ModelChangeEvent(this);
        Iterator<ModelChangedEventListener> i = listeners.iterator();
        while (i.hasNext()) {
            ((ModelChangedEventListener) i.next()).handleModelChange(event);
        }
    }

}

import java.awt.Container;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.MouseEvent;
import java.awt.event.MouseListener;
import java.util.EventObject;

import javax.swing.JFrame;
import javax.swing.JPanel;

public class View extends JFrame implements ModelChangedEventListener {

    private static final int DISPLAY_WIDTH = 300;
    private static final int DISPLAY_HEIGHT = 300;
    private ViewPanel viewPanel;
    private Controller controller;

    public View(Controller controller) {
        this.controller = controller;
        setSize(DISPLAY_WIDTH, DISPLAY_HEIGHT);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        Container contentPane = getContentPane();
        viewPanel = new ViewPanel();
        contentPane.add(viewPanel);
        setVisible(true);
    }

    @Override
    public void handleModelChange(EventObject e) {
        viewPanel.repaint();
    }

    public class ViewPanel extends JPanel implements MouseListener {

        public ViewPanel() {
            addMouseListener(this);
        }

        public void paintComponent(Graphics g) {
            Graphics2D g2 = (Graphics2D) g;
            controller.draw(g2);
        }

        @Override
        public void mouseClicked(MouseEvent arg0) {
            controller.click(arg0.getX(), arg0.getY());
        }

        @Override
        public void mouseEntered(MouseEvent arg0) {
        }

        @Override
        public void mouseExited(MouseEvent arg0) {
        }

        @Override
        public void mousePressed(MouseEvent arg0) {
        }

        @Override
        public void mouseReleased(MouseEvent arg0) {
        }

    }

}

import java.awt.Graphics2D;
import java.awt.Rectangle;

public class Controller {

    private Model model;

    public Controller(Model model) {
        this.model = model;
    }

    public void click(int x, int y) {
        model.addRectangle(x, y, 25, 25);
    }

    public void draw(Graphics2D g2) {
        for (Rectangle rectangle : model.getRectangles()) {
            g2.draw(rectangle);
        }
    }
}

import java.util.EventObject;

public interface ModelChangedEventListener {
    public void handleModelChange(EventObject e);
}

public class ModelChangeEvent extends java.util.EventObject {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

    public ModelChangeEvent(Object source) {
        super(source);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T07:09:16.240

你弄错了。MVC的要点之一就是让模型独立于视图。即模型不应该知道视图（或者更确切地说它不应该需要关心）。另一方面，视图需要使用模型对象来做它的事情。我从来没有设计过考虑 MVC 的非 Web 应用程序。视图通常是一个 JSP/HTML/XHTML/XML 文件，它的作用是使程序以某种方式显示。所以关于渲染、放置等的一切都适合视图。控制器的工作是从模型中收集数据并将其以视图可以以简单方式使用的形式传递给视图，并处理视图之间的导航等事情。它是将视图和模型保持在一起的粘合剂。因此：

模型不依赖任何东西。控制器取决于型号。视图取决于控制器和模型。

# java - java - 将 curl 与 Runtime.getRuntime().exec 一起使用

> ID：12453477
> 
> 赞同：4
> 
> 时间：2012-09-17T05:18:38.467
> 
> 标签：java, curl, command

我想在使用 Runtime.getRuntime().exec 的 java 程序中使用 curl

完整的代码片段如下，但我的问题归结为当我在 Runtime.getRuntime().exec( *command ) 中使用 curl**命令*时收到错误响应，但是当我使用 System.out.println*命令*时，复制并粘贴它到一个shell并在那里执行它工作正常。

 **```
System.out.println(command);
Runtime.getRuntime().exec(command); 
```

什么可能导致运行时 exec 和在 shell 中执行命令之间出现这种不同的结果。

感谢您的任何提示

马丁

更新：

*   我在使用运行时得到的错误响应是：{"error":"unauthorized"}

*   正如我从似乎不清楚的命令中看到的那样。我没有得到 curl 命令运行的任何异常，但 json 响应如上所示。

* * *

```
String APP_ID = "XXX";
String REST_API_KEY = "YYY";

String header = "-H \"X-Parse-Application-Id: " + APP_ID
        + "\" -H \"X-Parse-REST-API-Key: " + REST_API_KEY
        + "\" -H \"Content-Type: application/zip\" ";

public void post2Parse(String fileName) {

    String outputString;

    String command = "curl -X POST " + header + "--data-binary '@"
            + fileName + "' https://api.parse.com/1/files/" + fileName;

    System.out.println(command);

    Process curlProc;
    try {
        curlProc = Runtime.getRuntime().exec(command);

        DataInputStream curlIn = new DataInputStream(
                curlProc.getInputStream());

        while ((outputString = curlIn.readLine()) != null) {
            System.out.println(outputString);
        }

    } catch (IOException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-22T09:50:55.463

我没有直接的答案，但有一点是撇号的编码方式不同。虽然是一个老问题，但我会回答以供将来参考，也许以后有人可以解释完整的答案。

当我以类似的方式测试我们的 API 时，我注意到以下内容：

```
curl -i http://localhost:8080/auth/login -d 'identifier=test@example.com&password=test' 
```

这个命令，当从 shell 发送时，在服务器中结束为：

```
identifier=test@example.com,\npassword=test,\n 
```

但是当从 Runtime.getRuntime().exec(command) 发送时，它最终为：

```
'identifier=test@example.com,\npassword=test',\n 
```

如果我更改 curl 命令并删除撇号，它会起作用（由于此命令的本质）

```
 curl -i http://localhost:8080/auth/login -d identifier=test@example.com&password=test 
```

因此，一个既成的猜测是，如果问题中的代码更改为此，如果文件名不包含空格，它可能实际上可以工作......：

```
String command = "curl -X POST " + header + "--data-binary @"
        + fileName + " https://api.parse.com/1/files/" + fileName; 
```

一种选择是将执行命令与此处描述的输入数组一起使用：[Runtime Exec 似乎忽略撇号](https://stackoverflow.com/questions/33318236/runtime-exec-seems-to-be-ignoring-apostrophes)结合解析 curl 命令（除非硬编码），如此处所述：[Split string on spaces in Java，除非引号之间（即把“hello world”当作一个记号）](https://stackoverflow.com/questions/7804335/split-string-on-spaces-in-java-except-if-between-quotes-i-e-treat-hello-wor)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:39:57.050

我猜你从 Curl 得到一个错误代码而不是例外，再次检查 Curl API，你猜你会发现任何缺失的参数，如“用户”或其他东西。

您可以尝试检查[此](https://stackoverflow.com/a/9105267/395659)答案中提到的一些提示。**

# c# - DBConcurrencyException MySqlCommandBuilder

> ID：12453479
> 
> 赞同：0
> 
> 时间：2012-09-17T05:18:45.053
> 
> 标签：c#, mysql

在修改内部数据时`DataGridView`，出现异常：

```
DBConcurrencyException: Concurrency violation: the UpdateCommand affected 0 of the expected 1 records 
```

当我这样做时：

```
// myTable is the DataSource of the datagridview.
myAdapter.Update(myTable); 
```

VS2010 调试器告诉我这是`updateCommand`尝试更新的时候：

```
UPDATE `MySchema`.`MyDatabase` 
SET `EmployeeFirstName` = @p1 
WHERE ((`ID` = @p2) AND (`EmployeePhoneNumber` = @p3) AND
       (`EmployeeFirstName` = @p4))

@p1 is Joe (new value changed in the datagridview)
@p4 is Sally (database value) 
```

**问题：**

为什么我得到一个`DBConcurrencyException`if`WHERE`子句存在于数据库中？（没有实际变化，因此没有任何并发​​冲突）

# android - 请帮助我有关Android连接到mysql的信息。logcat 告诉我这个 org.json.JSONException: No value for report_data

> ID：12453482
> 
> 赞同：1
> 
> 时间：2012-09-17T05:19:22.537
> 
> 标签：android, mysql

请告诉我为什么 log cat 告诉我 org.json.JSONException：report_data 没有值。我的 php 文件可以正常工作。

```
List<NameValuePair> params = new ArrayList<NameValuePair>();
params.add(new BasicNameValuePair(TAG_REPORT_ID, report_id));
JSONObject json = jsonParser.makeHttpRequest(ReportURL, "GET", params);
Log.d("details", json.toString());

try {               
    int success = json.getInt(TAG_SUCCESS);
    if (success == 1) {
    JSONArray detailsObj = new JSONArray();
    detailsObj = json.getJSONArray(TAG_REPORT_DATA); // error this line
    JSONObject details = detailsObj.getJSONObject(0);
} 
```

这里所有的日志猫秀

```
09-17 11:55:59.723: D/details(4097): {"success":1,"detail":[{"uid":"1","time_end":"2012-08-21 15:50:37","time_start":"2012-08-15 15:40:31","report_id":"1","project_name":"example1","location":"bkk"}]}
09-17 11:55:59.723: W/System.err(4097): org.json.JSONException: No value for report_data
09-17 11:55:59.723: W/System.err(4097):     at org.json.JSONObject.get(JSONObject.java:354)
09-17 11:55:59.723: W/System.err(4097):     at org.json.JSONObject.getJSONArray(JSONObject.java:544)
09-17 11:55:59.723: W/System.err(4097):     at com.example.androidhive.ReportEdit$GetReportDetails$1.run(ReportEdit.java:131)
09-17 11:55:59.734: W/System.err(4097):     at android.os.Handler.handleCallback(Handler.java:615)
09-17 11:55:59.734: W/System.err(4097):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-17 11:55:59.734: W/System.err(4097):     at android.os.Looper.loop(Looper.java:137)
09-17 11:55:59.734: W/System.err(4097):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-17 11:55:59.743: W/System.err(4097):     at java.lang.reflect.Method.invokeNative(Native Method)
09-17 11:55:59.743: W/System.err(4097):     at java.lang.reflect.Method.invoke(Method.java:511)
09-17 11:55:59.743: W/System.err(4097):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-17 11:55:59.743: W/System.err(4097):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-17 11:55:59.754: W/System.err(4097):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:47:55.433

问题在于您的 JSON 解析。试试这个代码

```
detailsObj = json.getJSONArray("detail"); 
```

代替

```
detailsObj = json.getJSONArray(TAG_REPORT_DATA); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:42:59.750

问题似乎是您在 JSON 中没有名为“report_data”的元素

# r - 从大 .csv 表创建新表

> ID：12453483
> 
> 赞同：-1
> 
> 时间：2012-09-17T05:19:31.867
> 
> 标签：r

我有很大的 .csv 文件。我想将该文件过滤到一个新表中。

例如，我有 .csv 文件，如下所示：

```
 f1 f2  f3 f4  f5  f6 f7 f9  f10  f11 
t1  1  0  1   0  1  0   0  0   0    1 
t2  1  0  0   0  0  1   1  1   1    1 
t3  0  0  0   0  0  0   0  0   0    0 
t4  1  0  0   0  1  0   0  0   0    0 
t5  0  0  0   0  0  0   0  0   0    0 
t6  0  0  0   0  0  0   0  0   0    0 
```

1.  我有一张桌子（如上）

2.  我想要做的是，我想为每一行创建新表（这意味着，我将为所有行创建新表。例如，行 t1 的新表，行 t2 的新表，行 t3 的新表等）。在这个例子中，我应该有 6 个新表。

3.  要为每一行开发新表，需要满足一个条件。新表应查看每列中的每个值。如果该列与其他行中的其他列具有相同的值（即值为 1），则应将其组合在一起。

如本例所示，t1 的新表将包含 t1,t2,t4，因为 f1 列中的值与 f1 中 t2 和 t4 行的值具有相同的值（即 1），f5 中的值也与值相等t4 行的 f5 中的值，f11 中的值与 t2 行的 f11 中的值相等）。所以，这意味着，它将检查每一列。的输出之一应该是这样的：

```
 f1 f2  f3 f4  f5  f6 f7 f9  f10  f11 
    t1  1  0  1   0  1  0   0  0   0    1 
    t2  1  0  0   0  0  1   1  1   1    1 
    t4  1  0  0   0  1  0   0  0   0    0 
```

1.  至于 t2，行 t2 应与 t4 分组，因为 t1 中 f1 中的值和 t4 中 f1 中的值相等。但是，t2 不应考虑较早的行（如在此示例中，它不应考虑 t1）。输出应该是这样的：

    ```
     f1 f2  f3 f4  f5  f6 f7 f9  f10  f11 
    t2  1  0  0   0  0  1   1  1   1    1 
    t4  1  0  0   0  1  0   0  0   0    0 
    ```

2.  与其他行（行 t3、t4、t5 和 t6）类似，它应该查看每列中的每个值。如果该列与其他行中的其他列具有相同的值（即值为 1），则应将其组合在一起。

3.  然后应将新表（带有行和列标题）保存在新的 .csv 文件中。该文件应使用其行名重命名。例如，对于 t1，应保存为 t1.csv。

4.  这只是一个简单的例子。这里提出的解决方案将应用于其他大数据表。我需要阅读 abc.csv 文件。这意味着，可能会创建超过 100 个新表（当我使用原始数据时）。

到目前为止，我使用了这段代码：

```
a.files <- grep("^Task_vs_Files", dir(), value=TRUE) 
a.files

for(i in 1:length(a.files))
   dat <- read.table(file=a.files[i], header=T, sep=",", row.names=1) 

      (sapply(1:nrow(dat), function(x) if (dat[x,]==1)  #check row
            (sapply(1:nrow(dat), function(y) if (dat[,y]==1) #check column

            { 
                   write.csv( dat[(dat[[x,y]]==1 ) & (1:nrow(dat) >= x) , ] , file = paste("Files_", x) ) #save file based on row names
            } 
            else {NULL} )) 
```

a.files 的输出：

```
[1] "Task_vs_Files_Proj.csv"  "Task_vs_Files_Whirr.csv" 
```

来自文件之一的数据集 (Task_vs_Files_Proj.csv)

```
 pom.xml. ZooKeeper.java HBase.java Hadoop.java. BasicServer.java. Abstract.java. HBaseRegion.java
WHIRR-25        1              0          1            0                 1              1                1
WHIRR-28        1              0          1            0                 0              1                0
WHIRR-55        0              0          1            0                 0              0                0
WHIRR-61        0              0          0            0                 0              1                0
WHIRR-76        0              0          1            0                 0              0                0
WHIRR-87        1              1          1            0                 0              1                1
WHIRR-92        1              0          0            1                 0              1                1 
```

感谢专家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T23:02:28.553

```
 sapply(1:nrow(dat), function(x) if (dat[x, "f1"]==1) { 
           write.csv( dat[ (dat[["f1"]]==1 )& (1:nrow(dat) >= x) , ])
            } else {NULL} )
"","f1","f2","f3","f4","f5","f6","f7","f9","f10","f11"
"t1",1,0,1,0,1,0,0,0,0,1
"t2",1,0,0,0,0,1,1,1,1,1
"t4",1,0,0,0,1,0,0,0,0,0
"","f1","f2","f3","f4","f5","f6","f7","f9","f10","f11"
"t2",1,0,0,0,0,1,1,1,1,1
"t4",1,0,0,0,1,0,0,0,0,0
"","f1","f2","f3","f4","f5","f6","f7","f9","f10","f11"
"t4",1,0,0,0,1,0,0,0,0,0
[[1]]
NULL 
```

将需要构造文件名：

```
invisible(
  sapply(1:nrow(dat), function(x) if (dat[x, "f1"]==1) { 
           write.csv( dat[ (dat[["f1"]]==1 )& (1:nrow(dat) >= x) , ] ,
                    file = paste0("fil_", x, ".csv") )
                                } else {NULL} )
         ) 
```

如果这是针对 Excel 的，我担心它可能是这样，请注意包含行名，但不会创建列标题来指定行名。

# r - 如何根据每行中的最大值删除列

> ID：12453485
> 
> 赞同：1
> 
> 时间：2012-09-17T05:20:16.797
> 
> 标签：r

```
Col1<-c(3,8,2,4,2)
Col2<-c(3,7,3,9,2)
Col3<-c(5,7,5,7,5)
Col4<-c(1,9,2,3,4)
Col5<-c(1,2,6,7,5)
Toy<-data.frame(Col1,Col2,Col3,Col4,Col5)

> Toy
  Col1 Col2 Col3 Col4 Col5
1    3    3    5    1    1
2    8    7    7    9    2
3    2    3    5    2    6
4    4    9    7    3    7
5    2    2    5    4    5 
```

鉴于上述数据框，我想删除每行中等于每行最大值的值，以及出现在最大值右侧（或增加列#）的值。

从逻辑上讲，该语句将是：

```
1\. Find max value per row 
2\. Make max value for each row = NA
3\. Make all columns to the right of column with max value =NA 
```

所以新的数据框看起来像

```
 Col1 Col2 Col3 Col4 Col5
1    3    3    NA   NA  NA
2    8    7    7    NA  NA
3    2    3    5    2   NA
4    4    NA   NA   NA  NA
5    2    2    NA   NA  NA 
```

脚步

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T05:41:48.860

这是一个`apply()`避免显式 for 循环的基于解决方案：

```
ff <- function(X) {X[which.max(X):length(X)] <- NA; X}
t(apply(Toy, 1, ff))
#      Col1 Col2 Col3 Col4 Col5
# [1,]    3    3   NA   NA   NA
# [2,]    8    7    7   NA   NA
# [3,]    2    3    5    2   NA
# [4,]    4   NA   NA   NA   NA
# [5,]    2    2   NA   NA   NA 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:29:20.680

首先，我们需要找到每一行最大值的索引，并构造一个向量，该向量的索引到该行的末尾。我们希望使用应用循环对每一行执行此操作：

```
list_of_indices = apply(Toy, 1, function(x) which.max(x):ncol(Toy))
> list_of_indices
[[1]]
[1] 3 4 5

[[2]]
[1] 4 5

[[3]]
[1] 5

[[4]]
[1] 2 3 4 5

[[5]]
[1] 3 4 5 
```

然后我们可以循环索引列表并分配`NA`到`data.frame`：

```
for(i in seq_along(list_of_indices)) {
  Toy[i,list_of_indices[[i]]] <- NA
} 
```

这导致了预期的结果：

```
> Toy
  Col1 Col2 Col3 Col4 Col5
1    3    3   NA   NA   NA
2    8    7    7   NA   NA
3    2    3    5    2   NA
4    4   NA   NA   NA   NA
5    2    2   NA   NA   NA 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T05:31:44.183

一个简单的方法（保罗击败我一分钟）：

```
inds <- lapply(apply(Toy, 1, which.max), function(x) x:ncol(Toy))
lapply(1:nrow(Toy), function(i) {Toy[i, inds[[i]]] <<- NA; return(Toy)})
Toy 
```

# javascript - 无法在部分视图的 JQuery 中通过 ViewBag 发送参数。

> ID：12453493
> 
> 赞同：0
> 
> 时间：2012-09-17T05:21:16.760
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-3

我正在开发一个具有剃刀语法的 MVC3 应用程序。我正在研究评论功能的部分课程。

我的代码是：

```
<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#AddCommentButton').click(function () {
            $.ajax({
                type: 'post',
                url: '/Comment/SaveComments',
                dataType: 'json',
                data:
                { 

                'comments': $('#Comment').val(), @ViewBag.EType, @ViewBag.EId
                 },

                   success: function (data) {

                    $("p.p12").append

                   $('.ShowComments').text('Hide Comments');

                }
            });
        });
    });
</script> 
```

我试图在上面的 jQuery 中使用 ViewBag 从 View 向控制器发送参数，但它不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:23:46.673

试试这样：

```
<script src="@Url.Content("~/Scripts/jquery.js")" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#AddCommentButton').click(function () {
            $.ajax({
                type: 'post',
                url: '@Url.Action("SaveComments", "Comment")',
                data: { 
                    comments: $('#Comment').val(), 
                    etype: @Html.Raw(Json.Encode(ViewBag.EType)), 
                    eid: @Html.Raw(Json.Encode(ViewBag.EId))
                },
                success: function (data) {
                    $("p.p12").append(data);
                    $('.ShowComments').text('Hide Comments');
                }
            });
        });
    });
</script> 
```

和你的控制器动作：

```
[HttpPost]
public ActionResult SaveComments(string comments, string etype, string eid)
{
    ...
} 
```

或定义视图模型：

```
public class SaveCommentViewModel
{
    public string Comments { get; set; }
    public string EType { get; set; }
    public string EId { get; set; }
} 
```

进而：

```
[HttpPost]
public ActionResult SaveComments(SaveCommentViewModel model)
{
    ...
} 
```

# c - 我的列表中有额外的优势吗？

> ID：12453503
> 
> 赞同：0
> 
> 时间：2012-09-17T05:23:03.537
> 
> 标签：c, algorithm, graph, adjacency-list, adjacency-matrix

我正在编写代码来从边列表中创建一个矩阵。

然而，当我运行上述代码时，我得到了一个不在输入数据中的“幻影边缘”，这继续搞砸了我的程序的其余部分。边是矩阵中的 9,2，或元素代码形式的 8,1。

矩阵中的所有元素都预先初始化为 0。

这是与矩阵有关的输入数据：

```
1 2
1 8
2 8
3 5
3 1
4 5
4 6
5 2
5 9
6 4
6 8
7 4

7 10
8 4
8 6
9 4
9 5
10 7
10 3 
```

以下是处理输入的函数：

```
void displayMatrix(int **matrix, int numberVertices){                           //function displays the matrix

        int i, j;

        for(i=0; i<numberVertices; i++)                                         //go through eveyr element
        {
                for(j=0; j<numberVertices; j++)
                {
                        printf("%d ", matrix[i][j]);                            //print element
                }
                printf("\n");
        }

        printf("\n\n");
}

void inputMatrix(FILE *fp, int ** matrix)                                       //file places value 1 into matrix if edge exists for the adjacency matrix
{
        int e1, e2;

        while(!feof(fp))                                                        //continue to the end of the file
        {
                fscanf(fp, "%d %d", &e1, &e2);                                  //get pairs
                e1 = e1 - 1;                                                    //adjust the edges for array use
                e2 = e2 - 1;
                matrix[e1][e2] = 1;                                             //place value 1 into appropriate location in adjacency matrix
        }

        fclose(fp);                                                             //close the file connection
}

0 1 0 0 0 0 0 1 0 0
0 0 0 0 0 0 0 1 0 0
1 0 0 0 1 0 0 0 0 0
0 0 0 0 1 1 0 0 0 0
0 1 0 0 0 0 0 0 1 0
0 0 0 1 0 0 0 1 0 0
0 0 0 1 0 0 0 0 0 1
0 0 0 1 0 1 0 0 0 0
0 *1 0 1 1 0 0 0 0 0
0 0 1 0 0 0 1 0 0 0 
```

*不应该存在的条目，不在输入数据中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:39:18.400

问题是您循环的时间比必要的多，导致`fscanf`在第一次转换之前失败，因此离开了`e1`，`e2`就像它们从先前的读取中一样。事实证明，最后一个条目已`e1`设置为`10`和`e2`，`3`因此`e1`变为`9`和`e2`变为`2`，从而导致您的*幻像边缘*。

这个额外循环的原因是因为您的循环条件没有按照您的想法执行。`feof`检查是否设置了文件结束标志，并且只能在尝试读取文件末尾时设置。由于您在读取*之前*检查文件结尾，因此直到下一次迭代您才真正了解它，因此您循环了额外的时间。正确的校正非常简单；继续直到`fscanf`结果`EOF`。

```
 while (fscanf(fp, "%d %d", &e1, &e2) != EOF)
    {
            matrix[e1 - 1][e2 - 1] = 1;                  
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:39:44.490

正如评论中所指出的，您不是在测试`fscanf`.

特别是，您在 read 之后还没有到达文件末尾`10 3`，可能是因为遇到了换行符。

但是，在接下来的时间里`fscanf`将返回零。然后从这些值（未读取）中减去 1 以获得`9 2`.

您可以通过执行以下操作确保读取了两个整数：

```
if( 2 != fscanf(fp, "%d %d", &e1, &e2) ) break; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:58:53.537

你可以试试这个：

```
fscanf(fp, "%d %d\n", &e1, &e2); 
```

当你完成最后两位数时，还有一位`\n`，循环必须继续，这会很麻烦

# spring - Spring 模板项目不适用于 Cloud Foundry 服务器

> ID：12453505
> 
> 赞同：1
> 
> 时间：2012-09-17T05:23:23.353
> 
> 标签：spring, model-view-controller, maven, project, cloud-foundry

我目前正在尝试使用 STS 工具创建一个 spring mvc 项目。所以我使用 STS 提供的 Spring Template Project 创建了一个。我尝试使用 tomcat 服务器运行它，它运行良好。但是当我尝试使用 VMare Cloud Foundry Server 时，它不再工作了。我有这种错误：

```
org.apache.jasper.JasperException: java.lang.NullPointerException
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:538)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:370)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
org.springframework.web.servlet.view.InternalResourceView.renderMergedOutputModel(InternalResourceView.java:238)
org.springframework.web.servlet.view.AbstractView.render(AbstractView.java:262)
org.springframework.web.servlet.DispatcherServlet.render(DispatcherServlet.java:1157)
org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:927)
org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
javax.servlet.http.HttpServlet.service(HttpServlet.java:617)
javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:28:48.900

该错误更可能与弹簧版本有关。我用 springVersion = 3.1.1.RELEASE 部署了它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:00:55.200

您可以通过从“服务器”窗格中打开 CloudFoundry 插件来查看日志。单击“远程系统视图”链接，然后使用“远程系统”选项卡浏览应用程序及其日志文件。

请参阅下面的 Skitch 截图；

[http://goo.gl/603vT](http://goo.gl/603vT)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T00:37:16.053

尝试右键单击您的应用程序，然后转到 Maven --> Update Dependencies。

一旦你这样做了，你应该在 Cloud Foundry 上重新启动你的应用程序，它应该可以正常工作。

# ruby - 如何在 Rails 中使用自定义格式路由进行重定向？

> ID：12453506
> 
> 赞同：0
> 
> 时间：2012-09-17T05:23:26.500
> 
> 标签：ruby, routes, ruby-on-rails-3.2

我正在开发一个简单的应用程序，该应用程序要求我在更新操作后重定向到显示操作。

我有这条路线可供展示。

```
match '/user/:fullname' => 'items#show' 
```

这给了我这个控制器。

```
@user = User.find_by_fullname(params[:fullname]) 
```

但是，在用户的更新方法之后，

```
def update
  if @user.update_attributes(params[:user])
    format.html { redirect_to @user } # Don't need to pass parameters here.
  else
    format.html { render action: 'edit' }
  end
end 
```

它将我重定向到显示操作的原始格式，即：

```
sampleapp.dev/users/1 
```

如何使用我在 routes.rb 中指定的全名格式重定向以显示操作？

```
sampleapp.dev/users/johndoe 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:28:23.867

将此行更改为：

```
match '/user/:fullname' => 'items#show', :as => :custom_show_item 
```

然后将您的重定向更改为：

```
redirect_to custom_show_item_path(:fullname => @user.fullname) 
```

# sql - SQL -- 以百分比显示结果

> ID：12453508
> 
> 赞同：1
> 
> 时间：2012-09-17T05:23:40.677
> 
> 标签：sql, oracle

```
select retention
 , Sum(count(retention)) over(order by retention desc) as Num_Users_Retained
  from (select player_id
         , round(init_dtime-create_dtime,0) as retention
      from player
     where Trunc(Create_Dtime) >= To_Date('2012-jan-01','yyyy-mon-dd')
       and init_dtime is not null)
  Group by retention
  order by retention 
```

此查询显示两列：第一列是今年的日期（第 0 天是 1 月 1 日，第 259 天是今天 9 月 16 日），第二列是保留。第 0 天有 428,000，因为所有用户都被保留，第 1 天有 300K（因为有 128,000 人在第一天后没有登录），随着时间的推移，这个数字不断减少。我想为第 0 天的每一天的百分比显示另一列。这足够清楚还是我应该提供更多细节？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:48:42.107

```
select retention
     , Num_Users_Retained
     , round(Num_Users_Retained/max(Num_Users_Retained) over() * 100, 2) as perc
  from (select retention
             , Sum(count(retention)) over(order by retention desc) as Num_Users_Retained
         from (select player_id
                    , round(init_dtime-create_dtime,0) as retention
                from player
               where Trunc(Create_Dtime) >= To_Date('2012-jan-01','yyyy-mon-dd')
                 and init_dtime is not null
              )
        Group by retention
        order by retention)
 order by retention 
```

# c# - 如何使用 c# 在 SQL Server 2008 中插入多个列表？

> ID：12453514
> 
> 赞同：2
> 
> 时间：2012-09-17T05:24:08.080
> 
> 标签：c#, sql-server, list, insert

我的表包含 10 列。我需要使用 c# 插入一个列表。
我已经存储了多个成员的详细信息，对于每个计数，它必须在同一行中插入连续的详细信息。

```
 if (members.Count >= 1)

    {
         foreach (Members myList in members)
             {                             
            Command.Parameters.Add("first", SqlDbType.VarChar).Value = myList.first;
            Command.Parameters.Add("last", SqlDbType.VarChar).Value = myList.last;
            Command.Parameters.Add("age", SqlDbType.VarChar).Value = myList.age;
             }
    } 
```

示例：对于 count=1，表格看起来像 "fName1","lName1",21

对于 count=2，表格看起来像 "fName1","lName1",21,"fname2","lName2",21

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T04:20:22.640

编码风格看起来模棱两可。您的 foreach 循环针对成员中的“成员”运行。很难理解正在尝试做什么。让我建议你重构你的代码，让类名是“成员”。您可以使用 ADO.Net 将成员放入 db 中（也有其他方法），如下所示 -

```
 using (SqlConnection connection = new SqlConnection(connectionString))
        {
            using (SqlCommand command = connection.CreateCommand())
            {
                //select just schema of the table.
                command.CommandText = "select * from members where 1=2;";
                using (SqlDataAdapter adapter = new SqlDataAdapter(command))
                {
                    using (SqlCommandBuilder builder = new SqlCommandBuilder(adapter))
                    {
                        using (DataTable dt = new DataTable())
                        {
                            foreach (Member item in memebers)
                            {
                                DataRow row = dt.NewRow();

                                row.SetField<string>("", item.FirstName);
                                row.SetField<string>("", item.LastName);
                                row.SetField<int>("", item.Age);
                                //
                                // number of SetField should be equal to number of selected columns.
                                //
                                dt.Rows.Add(row);
                            }
                            adapter.Update(dt);
                        }                         
                    }   
                }
            }
        } 
```

# android - 在 Android 设备上“以编程方式”查找硬件可用性

> ID：12453515
> 
> 赞同：0
> 
> 时间：2012-09-17T05:24:09.243
> 
> 标签：android, accelerometer, gyroscope, android-hardware

我正在开发一个基于 GPS / Accelerometer / Gyroscope 和 Linear Acceleration 的应用程序。我想知道，有什么方法可以在我的设备上找出硬件（加速度计/陀螺仪和线性加速度）的可用性。因为，从给定的论坛中，有 API 可用于检查传感器是否可用，但没有给出与设备中硬件可用性相关的任何信息。提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T05:27:40.043

检查 Android 设备上的 GPS 可用性。

```
PackageManager pm = context.getPackageManager();
boolean hasGps = pm.hasSystemFeature(PackageManager.FEATURE_LOCATION_GPS); 
```

/* 在构造函数中检查一次 * 加速度计是否在此设备上可用。*/

/** 当加速度计功能基本可用时为真。*/

```
boolean accelerometerAvailable = false;

for (String aSensor : Sensors.getSupportedSensors())
     if (aSensor.equals(Sensors.SENSOR_ACCELEROMETER))
         accelerometerAvailable = true;

      if (!accelerometerAvailable)
           throw new UnsupportedOperationException("Accelerometer is not available."); 
```

[检查](http://www.anddev.org/accessing_the_accelerometer-t499.html)此链接以了解此设备上是否提供加速度计。

# python - 在 Python 中添加两个给定的浮点数？

> ID：12453516
> 
> 赞同：0
> 
> 时间：2012-09-17T05:24:10.983
> 
> 标签：python, floating-point

如何在不使用库的情况下使用 Python 创建一个方法来添加列表中的浮点数？老师给了我们这段代码，我没看懂，谁能再给我一个例子？

```
def msum(iterable):
    "Full precision summation using multiple floats for intermediate values"
    partials = []               # sorted, non-overlapping partial sums
    for x in iterable:
        i = 0
        for y in partials:
            if abs(x) < abs(y):
                x, y = y, x
            hi = x + y
            lo = y - (hi - x)
            if lo:
                partials[i] = lo
                i += 1
            x = hi
        partials[i:] = [x]
    return sum(partials, 0.0) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:37:03.713

python 中的 Kahan 算法版本如下所示：

```
def msum(input):
    sum = 0.0
    c = 0.0
    for x in input:
        y = x - c
        t = sum + y
        c = (t - sum) - y
        sum = t

    return sum 
```

“不使用其他库”是什么意思？当然你可以有

```
def msum(input):
    return sum(input) 
```

# php - 解析非 html 网站

> ID：12453517
> 
> 赞同：0
> 
> 时间：2012-09-17T05:24:26.083
> 
> 标签：php, javascript, xml, parsing, dom

有一个网站会在您每次加载页面时输出一组新数字以实现更安全的登录，我正在尝试自动化该过程。现在，由于该站点实际上并未将其置于 html 格式中，而是仅在第一行显示输出。

前任：

DChar='c2adf7354aa1f505b8a96b81017e8837';

我该如何解析并使用它将其保存为字符串？！DOM 函数不起作用，因为它不是一个真正的站点，只是一个输出。我一直在尝试使用 javascript，但如果您能想到一种使用 PHP 或 XML 的方法，那也一样好。还有一件事，在 PHP 中你会认为你可以使用

file_get_contents('html');

但由于某种原因，它不会连接到运行输出我要解析的内容的 javascript 的服务器。PHP无法将服务器连接到服务器对吗？我最好的猜测为什么它至少不起作用。

感谢您提前提供的所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:03:54.693

如果它是一个普通网页，您可以在地址栏中手动输入，并且我理解您正在尝试做什么，那么使用 PHP 您应该能够使用 file_get_contents("url-for-the-page");

然后你可以像这样使用正则表达式`preg_match("'([^']*)", $string, $results);`来只选择单引号内的部分。

如果它是“正常”网页，则看不出为什么这种方法不起作用，过去它对我来说还可以。

话虽如此，你说它对你不起作用。如果您需要更多控制，可以尝试[PHP cURL](http://php.net/manual/en/book.curl.php)。这是一个取自 cURL 网站的示例，它将 HTML 页面放入 php 变量中。

```
<?php
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,"http://www.myurl.com/");
curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
$result=curl_exec ($ch);
curl_close ($ch);
?> 
```

请记住，如果由于 file_get_contents() 函数不起作用并且似乎出于安全目的而这样做，那么执行您之后的操作可能会更复杂（或一个坏主意）并且可能更容易遵循安全流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:12:45.003

尝试这个：

```
<?php
$site = 'SITE_URL_HERE';

$data = file_get_contents($site); // may use curl also.

// suppose $data="DChar='c2adf7354aa1f505b8a96b81017e8837';",
// and you want the value within the quotes.

$data = explode( "'", trim($data) );

// result is in $data[1]
?> 
```

希望能帮助到你。

# android - 按钮设置文本活动 B

> ID：12453519
> 
> 赞同：-1
> 
> 时间：2012-09-17T05:24:43.277
> 
> 标签：android, button, android-activity

我来自卡利哥伦比亚不会说英语好的

我有activityA 和activityB 一个Button activityA
点击按钮set Text activityB = setText ("100");

```
 public void onClick(View arg0) {

    Intent manu = new Intent (MainActivity.this,Sonido.class);

    setContentView(R.layout.activity_main2);                
    ((TextView) findViewById(R.id.textView21)).setText("100");

startActivity(manu);

/*
1.getText()
2.putString()
3.getString()

.take data from a string and show activity B
.The button is only in the activity
*/

} 
```

像我这样的问题： [从另一个活动中调用按钮](https://stackoverflow.com/questions/10685039/calling-button-from-another-activity)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:54:52.417

**-**活动 A 和活动 B

**-**活动 B 有一个按钮 mbutt。

从活动 A 转移到活动 B

```
A ----> B (B has button mbutt) 
```

**在活动 A 中：**

```
Intent i = new Intent(A.this, B.class);
i.putExtra("key","100");
startActivity(i); 
```

**在活动 B 中：**

```
Button mbutt = (Button)findViewById(R.id.myButt);
Intent intent = getIntent();
String value = intent.getStringExtra("key");
mbutt.setText(value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:35:44.273

您可以为此制定明确的意图。实例化后，将字符串与 intent.putextra() 方法放在一起。使用 settext.getextras() 在其他活动中获取字符串。然后，如果您希望在下一个活动中写入不同但对应的字符串，则可以使用 switch 语句。

# php - TCP Listener，用 PHP 写的，不捕获，应该捕获什么

> ID：12453523
> 
> 赞同：0
> 
> 时间：2012-09-17T05:25:14.570
> 
> 标签：php, tcp, tcpdump, listen

我已经调整了[示例 PHP TCP 侦听](http://php.net/manual/en/sockets.examples.php)器（多客户端版本，由 javier 在主文章下方的用户贡献注释中发布，带有我的小修复）以在端口 7777 上侦听任何 TCP 数据包/连接。

我已经通过 SSH 在我的家庭服务器上运行了这个监听器，并且在第二个 SSH 会话中，我已经运行`tcpdump`在同一个端口上监听，以验证，如果我的 PHP 监听器工作正常。

Listener 是这样写的，它回显所有内容，接收，返回给客户端并在控制台上打印出来。

每当我使用浏览器联系我的家庭服务器时，我的监听器和`tcpdump`正在显示捕获的流量，所以我假设一切都已设置并且工作正常。但是，当我尝试从我的另一台设备（GPS 定位器）联系同一端口上的同一台服务器时，它只`tcpdump`显示它已经捕获了任何东西，但我的 PHP 侦听器仍然是聋子——不会向控制台显示任何东西（所以我假设它也不会向本地化程序发送任何内容——尽管我无法验证这一点——因为它无法从中捕获任何流量）。

正如[我被告知](https://superuser.com/questions/474029/tcp-packets-not-captured-by-php-listener)（感谢来自 SuperUser 的乐于助人的人），来自 webbrowser 和 GPS 定位器的 TCP 传输似乎是有效的 TCP 数据包，网络层中的一切似乎都很好，因此看起来问题出在 PHP 监听器的某个地方本身。

所以，我在问，如果有人看到我在这里错过的任何东西吗？

# git - git：尝试重新创建相同的存储库但使用一些不同的文件

> ID：12453526
> 
> 赞同：2
> 
> 时间：2012-09-17T05:25:25.270
> 
> 标签：git, version-control, github

所以我重新安装了我的操作系统，现在我面临着一个 git 困境。

我在网络上有一个现有的 git repo，其中有一些我已经特别更改的东西，因为它们没有与我的服务器 yadda yadda 等一起工作。

我现在有一个非常相似的 repo，但有很多核心更改，这是我需要知道的：

我想重新初始化 repo 以使用我的新文件夹，但覆盖服务器上的不同文件。我的文件夹中没有 .git，所以我需要创建一个，但是如何在线将我的更改覆盖到现有的 git 存储库？

它接近 git push --force 吗？但是我如何在不克隆的情况下将同一个 repo 初始化到这个文件夹中（我不想这样做，因为我不想覆盖我的更改）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:01:42.087

在这里要做的自然的事情（至少对我来说）是在新的提交中进行这些修改，保留项目的历史记录。无需推动--force！

为此，您必须首先将您的 repo 克隆回本地计算机，但位于不同的目录中，以免被覆盖。

```
git clone git://myrepo.com clonedrepo 
```

然后在本地仓库中复制“工作副本”：

```
cp -r workingdir clonedrepo 
```

如果您在工作目录中删除了文件，则必须在目标目录中手动删除它们。最后阶段并提交：

```
git add . && git commit -m "details on what changed" 
```

由于没有重写历史记录，您将能够正常推送。

# c# - 为什么我不能使用 Gma.QrCodeNet.Encoding.Windows.Render？

> ID：12453527
> 
> 赞同：4
> 
> 时间：2012-09-17T05:25:32.523
> 
> 标签：c#, winforms, .net-4.0, qr-code

我正在使用0.3 版的[QrCode.Net](http://www.google.com.ar/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCQQFjAA&url=http://qrcodenet.codeplex.com/&ei=WZxWUIzPGIKc9gTitoGIBg&usg=AFQjCNHE5N5PFWEkh6pzhgzaf3y1Uq3wPQ&sig2=WfrI-6xsVdR1huZDE-GFJg)库，我需要使用它来使用qrcode [ISizeCalculation](http://qrcodenet.codeplex.com/wikipage?title=Size&referringTitle=Renderer)`Gma.QrCodeNet.Encoding.Windows.Render`创建图像，但我缺少一些东西，或者那里有另一个版本。可能是什么问题？无论如何，我为有同样问题的人找到了一个解决方案，他们想要创建具有相同固定尺寸的图像。这是代码：

```
private void gen_qr_file(string file_name, string content, int image_size)
{
    string new_file_name = file_name;

    QrEncoder qrEncoder = new QrEncoder(ErrorCorrectionLevel.H);
    QrCode qrCode = new QrCode();
    qrEncoder.TryEncode(content, out qrCode);

    Renderer renderer = new Renderer(image_size, Brushes.Black, Brushes.White);

    MemoryStream ms = new MemoryStream();

    renderer.WriteToStream(qrCode.Matrix, ms, ImageFormat.Png);

    var image = new Bitmap(Image.FromStream(ms), new Size(new Point(200, 200)));

    image.Save(new_file_name + ".png", ImageFormat.Png);

} 
```

这将使用 qrcode 生成 200x200 像素的 png 图像。

库本身有一种方法可以做到这一点，但我需要包含 RENDER 东西，但我不能。有人知道有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T09:50:16.717

```
private void gen_qr_file(string file_name, string content, int image_size) {

    string new_file_name = file_name;

    QrEncoder qrEncoder = new QrEncoder(ErrorCorrectionLevel.H);
    QrCode qrCode = new QrCode();
    qrEncoder.TryEncode(content, out qrCode);

    Renderer renderer = new Renderer(image_size, Brushes.Black, Brushes.White);

    MemoryStream ms = new MemoryStream();

    renderer.WriteToStream(qrCode.Matrix, ms, ImageFormat.Png);

    var imageTemp = new Bitmap(ms);

    var image = new Bitmap(imageTemp, new Size(new Point(image_size, image_size)));

    image.Save(new_file_name + ".png", ImageFormat.Png);

} 
```

注意：仅修改了 2 行。我希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-21T16:36:30.687

使用`FixedCodeSize`. 请参阅下面的示例，该示例将生成 400x400 像素的图像，每个“模块”（块）越小，添加的数据越多。

```
var qrEncoder = new QrEncoder(ErrorCorrectionLevel.M);
var qrCode = qrEncoder.Encode("my value");

var renderer = new GraphicsRenderer(new FixedCodeSize(400, QuietZoneModules.Zero), Brushes.Black, Brushes.White);
renderer.WriteToStream(qrCode.Matrix, ImageFormat.Png, /* OUTPUT STREAM */); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T22:42:39.807

我必须包括以下两个陈述：

使用 Gma.QrCodeNet.Encoding；使用 Gma.QrCodeNet.Encoding.Windows.Controls；

另外， Gma.QrCodeNet.Encoding.dll 有多大？

它应该超过 80K 或者你有错误的。

我遇到过同样的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-28T21:53:40.737

这是我的实现只有改变`GraphicsRenderer`

```
private string gen_qr_file(string file_name, string content, int image_size)
{
    string new_file_name = file_name;
    QrEncoder qrEncoder = new QrEncoder(ErrorCorrectionLevel.H);
    QrCode qrCode = new QrCode();
    qrEncoder.TryEncode(content, out qrCode);

    GraphicsRenderer renderer = new GraphicsRenderer(
        new FixedCodeSize(400, QuietZoneModules.Zero), 
        Brushes.Black, 
        Brushes.White);
    MemoryStream ms = new MemoryStream();
    renderer.WriteToStream(qrCode.Matrix, ImageFormat.Png, ms);
    var imageTemp = new Bitmap(ms);
    var image = new Bitmap(imageTemp, new Size(new Point(200, 200)));
    image.Save(new_file_name, ImageFormat.Png);

    return new_file_name;
} 
```

# c# - 将特定位置的图像绘制到现有图像上

> ID：12453528
> 
> 赞同：0
> 
> 时间：2012-09-17T05:25:32.043
> 
> 标签：c#, silverlight, windows-phone-7

在我的 Windows Phone 7 应用程序中，我有一个大图像，我想在大图像顶部的特定位置 (x, y) 绘制另一个小图像（来自图像文件夹）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:24:11.313

您可以将图像放在画布中并定位它们

```
<Canvas>
    <Image Source="BigImage.jpg"/>
    <Image Source="SmallImage.jpg" Canvas.Left="100" Canvas.Top="50" />
</Canvas> 
```

根据您的要求/设置，您还可以将它们嵌套在 Grid 中并使用图像的 Margin 属性。

# selenium - Selenium 仅在我手动单击执行时才找到元素

> ID：12453535
> 
> 赞同：0
> 
> 时间：2012-09-17T05:26:15.170
> 
> 标签：selenium, selenium-ide

我需要自动点击按钮。代码：

```
<tr>
<td>click</td>
<td>css=button</td>
<td></td> 
```

当我单击“播放当前测试用例”时，它没有找到该元素。但是当我在那之后点击“查找”——它确实如此，如果我点击执行——它就会点击它！日志：

```
[info] Executing: |click | css=div.sometag > p | |
[info] Executing: |pause | | 2000 | // Same error with pause & without it
[info] Executing: |clickAndWait | css=button | | // Auto executing
[error] Element css=button not found // Fails
[info] Executing: |click | css=button | | // I click on "Execute" manually - OK! 
```

为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T21:06:10.880

您也可以尝试使用不同类型的定位器，例如 ID 或 XPath。

如果我们能够看到您正在与之交互的页面的 HTML，我们可以提供确切的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:55:17.603

~~您是否尝试过插入“waitForElementPresent|css=button|” 在点击语句之前？这可能会有所帮助。~~

您实际上需要使用类选择器。所以无论是**div.button**还是**.button**，否则 selenium 可能正在寻找一个 ID 或一个元素名称。

# sql - SQL Server 空结果

> ID：12453541
> 
> 赞同：2
> 
> 时间：2012-09-17T05:26:48.693
> 
> 标签：sql, sql-server

我有一个有效的 SQL 选择，它返回一个空结果，直到环境中发生特定事务。

SQL 本身是否有可用的东西，可以让我返回 0 而不是空数据集？类似于 isNULL('', 0) 功能。显然我试过了，但没有奏效。

PS。遗憾的是，我无权访问数据库或环境，我安装了一个执行这些查询的代理，所以我只能用 SQL 来解决这个问题。

仅供参考：在不满足“条件”的情况下进行任何选择并运行它（例如 LockCookie='777777777'）。如果从未满足该条件，则结果为空。但在某些时候，查询将根据发生的一组操作/任务成功。但我想返回 0，直到该事件发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T05:35:56.500

您可以将结果存储在临时表中并检查`@@rowcount`.

```
select ID
into #T
from YourTable
where SomeColumn = @SomeValue

if @@rowcount = 0
  select 0 as ID
else
  select ID
  from #T

drop table #T 
```

如果您希望这是一个没有临时表的查询，您可以将查询包装*在*一个`outer apply`只有一行的虚拟表中。

```
select isnull(T.ID, D.ID) as ID
from (values(0)) as D(ID)
  outer apply
    (
      select ID
      from YourTable
      where SomeColumn = @SomeValue        
    ) as T 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:34:32.077

alternet 方式是从代码中，您可以检查 DataSet 的计数。

```
DsData.Tables[0].Rows.count > 0 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T05:31:13.977

确保您的查询符合您的条件

# php - 循环查询结果

> ID：12453543
> 
> 赞同：0
> 
> 时间：2012-09-17T05:26:59.460
> 
> 标签：php, mysql

我有一个网站，用户可以在其中输入/输入最多 5 个兴趣。现在，我想在表单字段中向用户显示用户的兴趣。这使他们能够直接编辑它们。

首先我要做的是在我的兴趣表中查询与用户相关的数据行。然后，我使用 mysqli_num_rows 来确定我必须创建的变量。然后，我手动循环遍历数组以创建每个变量。

但是有一个问题，它没有循环到下一行数据。因此，例如`$interest1`will equal `$interest2`，并且`$interest3`会做同样的事情。等等等等。这不是我想要发生的。`$interest2, 3, 4, and 5`应该都等于下一行数据。我可能做错了什么？

这是我的代码：

```
$result2= mysqli_query($connect, $query2);
    if (mysqli_num_rows($result2) != 0) {

        if (mysqli_num_rows($result2) == 1) {
        $row2= mysqli_fetch_array($result2);
        $interest1= $row2['interest'];
        }
        else if (mysqli_num_rows($result2) == 2) {
        $row2= mysqli_fetch_array($result2);            
        $interest1= $row2['interest'];
        $interest2= $row2['interest'];          
        }
        else if (mysqli_num_rows($result2) == 3) {
        $row2= mysqli_fetch_array($result2);            
        $interest1= $row2['interest'];
        $interest2= $row2['interest'];
        $interest3= $row2['interest'];
        }
        else if (mysqli_num_rows($result2) == 4) {
        $row2= mysqli_fetch_array($result2);            
        $interest1= $row2['interest'];
        $interest2= $row2['interest'];
        $interest3= $row2['interest'];
        $interest4= $row2['interest'];      
        }
        else if (mysqli_num_rows($result2) == 5) {
        $row2= mysqli_fetch_array($result2);            
        $interest1= $row2['interest'];
        $interest2= $row2['interest'];
        $interest3= $row2['interest'];
        $interest4= $row2['interest'];
        $interest5= $row2['interest'];
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:30:47.460

您可能希望循环遍历此内容（如您所说），而且要将结果存储在数组中，因为您已经（基本上）使用数组格式将其存储在单独的变量中：

```
$result2 = mysqli_query($connect, $query2);
$interests = array();
while ($result = mysqli_fetch_array($result2)) {
    $interests[] = $result['interest'];
}
print_r($interests); 
```

根据您未设置值的问题，这是因为您没有遍历行，而是每次访问单个数组并将其设置为不同的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:32:13.827

尝试这个

```
 $result2= mysqli_query($connect, $query2);
       while($row= mysqli_fetch_array($result2))
      {
        $interest[]= $row['interest'];

      }

print_r($interest)//Array of itnerest 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:30:27.680

我不清楚你想做什么。但是您在每个 IF 案例中的代码重复地从 中获取相同的值`mysqli_num_rows($result2)`，只是每种案例的次数不同。

# c# - 将特殊 SQL 查询转换为 Linq

> ID：12453555
> 
> 赞同：1
> 
> 时间：2012-09-17T05:28:31.400
> 
> 标签：c#, sql, linq, linq-to-sql

你知道如何将这个 SQL 查询写到 linq 吗？

```
SELECT * 
FROM 
  a 

  INNER JOIN b 
  ON a.FkSubmissionId = b.Id 

  RIGHT JOIN c 
  ON a.FkItemId = c.Id 

WHERE 
 (b.FkUserId = '...' OR b.FkUserId is null) 
 and 
 (c.FkTenderId = 2) 
```

我使用 Linquer，我从该工具中获得的最好的东西是：

林克：

```
from 
  items in _context.Items 

from 
  si in _context.si

  join s in _context.s 
  on new { fki = si.fki } equals new { fki = s.Id } 

into 
  submissions_join

from 
  s in submissions_join.DefaultIfEmpty()

... 
```

结果在 SQL ：

```
SELECT * 
FROM 
  [Items] AS [t0]

  CROSS JOIN [SubmissionsItems] AS [t1]

  LEFT OUTER JOIN [Submissions] AS [t2] 
  ON [t1].[FkSubmissionId] = [t2].[Id]

WHERE 
  (([t2].[FkUserId] = @p0) OR (([t2].[FkUserId]) IS NULL)) 
  AND 
  ([t0].[FkTenderId] = @p1) 
```

所以最终结果不是我从我需要的查询中得到的......

感谢您的帮助 ！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:44:37.973

试试这个：

```
var part1 =
    from x in a
    join y in b on x.FkSubmissionId equals y.Id
    where b.FkUserId = "..."
    select new {x, y};

var part2 =
    from c in z
    where c.FkTenderId == 2
    join xy in part1
        on z.Id equals xy.x.FkItemId
        into xys
    from xy in xys.DefaultIfEmpty()
    select new {xy.x, xy.y, z}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:03:21.147

我会重新排序您的查询，以便您可以使用左连接而不是右连接

```
var query = from c in context.C
            from a in context.A.Where(x => c.Id == x.FkItemId)
                               .DefaultIfEmpty()
            join b in context.B on a.FkSubmissionId equals b.id
            where b.FkUserId == '...' || b.FkUserId == null
            where c.FkTenderId == 2
            select new {
              a,
              b,
              c
            }; 
```

# c++ - “setprecision”不是“std”的成员

> ID：12453557
> 
> 赞同：45
> 
> 时间：2012-09-17T05:28:42.523
> 
> 标签：c++, string

错误：

```
~> g++ ssstring.cpp
ssstring.cpp: In function ‘int main()’:
ssstring.cpp:12:31: error: ‘setprecision’ is not a member of ‘std’
ssstring.cpp:12:52: error: ‘numeric_limits’ is not a member of ‘std’
ssstring.cpp:12:74: error: expected primary-expression before ‘float’
ssstring.cpp:13:30: error: ‘setprecision’ is not a member of ‘std’
ssstring.cpp:13:51: error: ‘numeric_limits’ is not a member of ‘std’
ssstring.cpp:13:73: error: expected primary-expression before ‘float’
ssstring.cpp:14:28: error: ‘setprecision’ is not a member of ‘std’
ssstring.cpp:14:49: error: ‘numeric_limits’ is not a member of ‘std’
ssstring.cpp:14:71: error: expected primary-expression before ‘float’
anisha@linux-trra:~> 
```

代码：

```
#include <sstream>
#include <iostream>
#include <string.h>

int main ()
{
    // Convert `lat`, `lons`, and `vehicleId` to string.
    float selectedPointLat = 2.2;
    float selectedPointLng = 2.3;
    float vehicleId        = 1.0;

    std :: stringstream floatToStringLat, floatToStringLng, floatToStringVehicleId;

    floatToStringLat       << std :: setprecision (std :: numeric_limits<float> :: digits10 + 1); floatToStringLat  << selectedPointLat;
    floatToStringLng       << std :: setprecision (std :: numeric_limits<float> :: digits10 + 1); floatToStringLng << selectedPointLng;
    floatToStringVehicleId << std :: setprecision (std :: numeric_limits<float> :: digits10 + 1); floatToStringVehicleId << vehicleId;

} 
```

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-09-17T05:29:08.733

您需要包含[std::setprecision](http://en.cppreference.com/w/cpp/io/manip/setprecision)和[std::numeric_limits](http://en.cppreference.com/w/cpp/types/numeric_limits)的标头`<iomanip>`。这些参考告诉您要包​​含哪个标头。`<limits>`

# sql - ms访问数据库的sql查询

> ID：12453565
> 
> 赞同：3
> 
> 时间：2012-09-17T05:29:58.357
> 
> 标签：sql, ms-access

下面是我在 ms 访问中的表结构，

```
SNo    Time        EmpId    Date      Type
-------------------------------------------
  1   09:20:53 AM    1     9/12/2012  IN      
  2   09:50:12 AM    1     9/12/2012  OUT 
  3   09:52:09 AM    1     9/12/2012  IN
  4   12:15:10 PM    1     9/12/2012  OUT 
```

输出应比较时间并找出第一两行和接下来的 2（第 3 和第 4）行的差异所需的输出是，

```
EmpId   Date          Time
 1     9/12/2012     0:30:41
 1     9/12/2012     2:23:01 
```

有人可以帮忙吗。非常感谢，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:04:36.890

我认为这个查询接近你想要的，假设你的`Date`和`Time`字段都是日期/时间数据类型。如果它们实际上是文本类型，您可以使用 转换它们的值`CDate()`。但无论哪种方式，我认为使用单个字段来保存日期和时间而不是为每个字段单独保存会更*容易*。

```
SELECT
    sub.SNo,
    sub.EmpId,
    sub.Type,
    sub.start_time,
    sub.end_time,
    Format(sub.end_time - sub.start_time, 'h:nn:ss') AS duration
FROM
    (
        SELECT
            o.SNo,
            o.Date + o.Time AS end_time,
            o.EmpId,
            o.Type,
            (
                SELECT TOP 1 i.Date + i.Time
                FROM YourTable AS i
                WHERE
                        i.Type = 'IN'
                    AND i.EmpId = o.EmpId
                    AND i.Date + i.Time < o.Date + o.Time
                ORDER BY i.Date, i.Time DESC
            ) AS start_time
        FROM YourTable AS o
        WHERE o.Type='OUT'
    ) AS sub; 
```

顺便说一句，`Date`和`Time`是`Type`保留字，因此不是作为字段名称的理想选择。尽管这些名称不会影响此查询，但如果可能的话，您可以通过重命名这些字段来避免其他潜在的麻烦。

# python - 如何在 Turtle 中填充这些正方形 - Python

> ID：12453572
> 
> 赞同：3
> 
> 时间：2012-09-17T05:31:11.907
> 
> 标签：python, turtle-graphics

我正在尝试在这些正方形中填充颜色：

![http://i.imgur.com/kRGgR.png](../Images/8dd98a3ee3718707ad5722cbc0fb638d.png)

现在乌龟只填充这些正方形的角落，而不是整个正方形。

这是我的代码：

```
import turtle
import time
import random

print ("This program draws shapes based on the number you enter in a uniform pattern.")
num_str = input("Enter the side number of the shape you want to draw: ")
if num_str.isdigit():
    squares = int(num_str)

angle = 180 - 180*(squares-2)/squares

turtle.up

x = 0 
y = 0
turtle.setpos(x,y)

numshapes = 8
for x in range(numshapes):
    turtle.color(random.random(),random.random(), random.random())
    x += 5
    y += 5
    turtle.forward(x)
    turtle.left(y)
    for i in range(squares):
        turtle.begin_fill()
        turtle.down()
        turtle.forward(40)
        turtle.left(angle)
        turtle.forward(40)
        print (turtle.pos())
        turtle.up()
        turtle.end_fill()

time.sleep(11)
turtle.bye() 
```

我试过四处走动`turtle.begin_fill()`，`end_fill()`在许多地方都没有运气……使用 Python 3.2.3，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T05:37:28.090

我还没有真正使用过龟，但看起来这可能是你想要做的。如果我假设这些调用的功能错误，请纠正我：

```
turtle.begin_fill() # Begin the fill process.
turtle.down() # "Pen" down?
for i in range(squares):  # For each edge of the shape
    turtle.forward(40) # Move forward 40 units
    turtle.left(angle) # Turn ready for the next edge
turtle.up() # Pen up
turtle.end_fill() # End fill. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T05:36:33.853

您正在绘制一系列三角形，每个三角形都使用`begin_fill()`和。`end_fill()`您可能会做的是将您的调用移至内部循环`begin_fill()`和`end_fill()`外部循环，因此您绘制一个完整的正方形，*然后*要求填充它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-26T03:38:47.363

使用填充

```
t.begin_fill()
t.color("red")
for x in range(4):
    t.fd(100)
    t.rt(90)
t.end_fill() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-08T20:21:52.003

正如一些人所提到的，除了移动`begin_fill()`和`end_fill()`循环之外，您的代码还有其他问题。例如，这是一个无操作：

```
turtle.up 
```

即它什么都不做。（缺少括号。）这个测试：

```
if num_str.isdigit(): 
```

对您没有多大帮助，因为没有`else`处理错误的子句。（即当它不是数字时，下一条语句只是将字符串用作数字并失败。）这个计算似乎有点太复杂了：

```
angle = 180 - 180*(squares-2)/squares 
```

最后应该有一个更干净的方式来退出程序。让我们解决所有这些问题：

```
from turtle import Screen, Turtle
from random import random

NUMBER_SHAPES = 8

print("This program draws shapes based on the number you enter in a uniform pattern.")

num_str = ""

while not num_str.isdigit():
    num_str = input("Enter the side number of the shape you want to draw: ")

sides = int(num_str)
angle = 360 / sides

delta_distance = 0
delta_angle = 0

screen = Screen()
turtle = Turtle()

for x in range(NUMBER_SHAPES):
    turtle.color(random(), random(), random())

    turtle.penup()
    delta_distance += 5
    turtle.forward(delta_distance)
    delta_angle += 5
    turtle.left(delta_angle)
    turtle.pendown()

    turtle.begin_fill()

    for _ in range(sides):
        turtle.forward(40)
        turtle.left(angle)
        turtle.forward(40)

    turtle.end_fill()

screen.exitonclick() 
```

# python - 如何将列表中的项目连接到单个字符串？

> ID：12453580
> 
> 赞同：927
> 
> 时间：2012-09-17T05:32:25.410
> 
> 标签：python, string, list, concatenation

有没有更简单的方法将列表中的字符串项连接成单个字符串？我可以使用该`str.join()`功能吗？

例如，这是输入`['this','is','a','sentence']`，这是所需的输出`this-is-a-sentence`

```
sentence = ['this','is','a','sentence']
sent_str = ""
for i in sentence:
    sent_str += str(i) + "-"
sent_str = sent_str[:-1]
print sent_str 
```

* * *

## 回答 #1

> 赞同：1638
> 
> 时间：2012-09-17T05:33:41.273

使用[`str.join`](https://docs.python.org/library/stdtypes.html#str.join)：

```
>>> sentence = ['this', 'is', 'a', 'sentence']
>>> '-'.join(sentence)
'this-is-a-sentence'
>>> ' '.join(sentence)
'this is a sentence' 
```

* * *

## 回答 #2

> 赞同：200
> 
> 时间：2015-12-01T03:11:58.587

将 python 列表转换为字符串的更通用的方法是：

```
>>> my_lst = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
>>> my_lst_str = ''.join(map(str, my_lst))
>>> print(my_lst_str)
'12345678910' 
```

* * *

## 回答 #3

> 赞同：54
> 
> 时间：2016-05-14T13:55:36.710

对于初学者来说知道 [为什么 join 是一个字符串方法是](https://stackoverflow.com/questions/493819/python-join-why-is-it-string-joinlist-instead-of-list-joinstring)非常有用的。

一开始很奇怪，但之后非常有用。

join 的结果始终是一个字符串，但要连接的对象可以是多种类型（生成器、列表、元组等）。

`.join`更快，因为它只分配一次内存。比经典串联更好（请参阅[扩展解释](https://paolobernardi.wordpress.com/2012/11/06/python-string-concatenation-vs-list-join/)）。

一旦你学会了它，它就会很舒服，你可以做这样的技巧来添加括号。

```
>>> ",".join("12345").join(("(",")"))
Out:
'(1,2,3,4,5)'

>>> list = ["(",")"]
>>> ",".join("12345").join(list)
Out:
'(1,2,3,4,5)' 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-11-02T01:51:03.193

**从未来编辑**：请不要使用下面的答案。这个函数在 Python 3 中被删除了，Python 2 已经死了。即使您仍在使用 Python 2，您也应该编写 Python 3 就绪代码，以使不可避免的升级更容易。

* * *

虽然[@Burhan Khalid 的回答](https://stackoverflow.com/a/12453584)很好，但我认为这样更容易理解：

```
from str import join

sentence = ['this','is','a','sentence']

join(sentence, "-") 
```

join() 的第二个参数是可选的，默认为“”。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2020-09-03T09:18:52.127

```
list_abc = ['aaa', 'bbb', 'ccc']

string = ''.join(list_abc)
print(string)
>>> aaabbbccc

string = ','.join(list_abc)
print(string)
>>> aaa,bbb,ccc

string = '-'.join(list_abc)
print(string)
>>> aaa-bbb-ccc

string = '\n'.join(list_abc)
print(string)
>>> aaa
>>> bbb
>>> ccc 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2018-11-29T11:15:04.187

我们还可以使用 Python 的*reduce*函数：

```
from functools import reduce

sentence = ['this','is','a','sentence']
out_str = str(reduce(lambda x,y: x+"-"+y, sentence))
print(out_str) 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-10-18T07:46:18.623

我们可以指定我们必须如何加入字符串。代替'-'，我们可以使用''

```
sentence = ['this','is','a','sentence']
s=(" ".join(sentence))
print(s) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-30T15:20:02.993

如果你想在最终结果中生成一个用逗号分隔的字符串，你可以使用这样的东西：

```
sentence = ['this','is','a','sentence']
sentences_strings = "'" + "','".join(sentence) + "'"
print (sentences_strings) # you will get "'this','is','a','sentence'" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-01-27T10:21:57.657

如果您有混合内容列表。并想对其进行字符串化。这是一种方法：

考虑这个列表：

```
>>> aa
[None, 10, 'hello'] 
```

将其转换为字符串：

```
>>> st = ', '.join(map(str, map(lambda x: f'"{x}"' if isinstance(x, str) else x, aa)))
>>> st = '[' + st + ']'
>>> st
'[None, 10, "hello"]' 
```

如果需要，转换回列表：

```
>>> ast.literal_eval(st)
[None, 10, 'hello'] 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-07-07T11:03:36.563

如果没有 .join() 方法，您可以使用此方法：

```
my_list=["this","is","a","sentence"]

concenated_string=""
for string in range(len(my_list)):
    if string == len(my_list)-1:
        concenated_string+=my_list[string]
    else:
        concenated_string+=f'{my_list[string]}-'
print([concenated_string])
    >>> ['this-is-a-sentence'] 
```

因此，在此示例中基于范围的 for 循环，当 python 到达列表的最后一个单词时，它不应该在 concenated_string 中添加“-”。如果它不是您的字符串的最后一个单词，请始终将“-”字符串附加到您的 concenated_string 变量。

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2020-05-07T21:18:04.153

```
def eggs(someParameter):
    del spam[3]
    someParameter.insert(3, ' and cats.')

spam = ['apples', 'bananas', 'tofu', 'cats']
eggs(spam)
spam =(','.join(spam))
print(spam) 
```

# java - 如何避免在spring xml中配置所有服务类？

> ID：12453581
> 
> 赞同：1
> 
> 时间：2012-09-17T05:32:27.300
> 
> 标签：java, spring-mvc

我在我的项目中使用 spring MVC，在服务类中我使用了“@Autowired”注释，尽管我必须在 Application-Servlet.xml 的 bean 标记中定义所有类。（如果我们有“N”个，我觉得它很复杂类）我怎样才能避免这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T06:10:04.157

目前尚不清楚您在 XML 配置中定义了哪些类，但我猜您正在询问您的服务类...

只需用`@Service`（或`@Component`）注释您的服务类。[Spring 文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-scanning-autodetection)将解释使用哪个并提供示例。注意：您需要有这些 XML 配置行才能使这项工作：`<context:component-scan base-package="com.foo.bar"/>`和`<mvc:annotation-driven />`

也适用于控制器，只需使用`@Controller`( [docs](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html) ) 进行注释。

# html - HTML5图形与img的用途是什么

> ID：12453586
> 
> 赞同：42
> 
> 时间：2012-09-17T05:34:02.097
> 
> 标签：html, image, tags, figure, difference

使用 HTML5 是否有任何特定的优势/[`<figure>`](https://developer.mozilla.org/en-US/docs/HTML/Element/figure)用途[`<img>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/img)？

我认为`<figure>`没有 是没用[`<figurecaption>`](https://developer.mozilla.org/en-US/docs/HTML/Element/figcaption)的，不是吗？

如果用一个例子来解释会很有帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-17T05:36:55.413

从技术上讲，图像不是插入到 HTML 页面中的，图像是链接到 HTML 页面的。该`<img>`标签为引用的图像创建了一个保存空间。

虽然`<figure>`元素的内容与主流相关，但它的位置与主流无关，如果移除它应该不会影响文档的流向

来自[http://dev.w3.org/](http://dev.w3.org/)

“ [img 元素代表一个图像](http://dev.w3.org/html5/markup/img.html)，”而“[t]he figure 元素代表一个内容单元，可以选择带有标题，它是自包含的，通常作为文档主要流程中的单个单元引用，并且可以将其从文档的主要流程中移开，而不会影响[文档的含义。](http://dev.w3.org/html5/markup/figure.html) ”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-17T05:52:29.263

> 该标签为内容提供了一个**容器**，相当于书中的图形或图表。***它可用于将标题与一个或多个图像、代码块或其他内容组合在一起***。

换句话说，使我们能够更自由、更逼真地处理图像、图表，方法是将它们和标题组合在一起，或者将图像与单个标题组合在一起。

来源：[http ://www.html-5.com/tags/figure-tag/index.html](http://www.html-5.com/tags/figure-tag/index.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T05:38:19.877

每当您在其上`figure`使用`img, video`标签时都会使用HTML5`caption (figcaption)`

如果您有许多带有标题文本的相关图像（或其他内容），则可以使用嵌套图形元素将组标题和单个标题与使用该`figcaption`元素的每个实例相关联。

```
<figure role="group">
 <img src="castle-etching.jpg" alt="The castle has one tower, and a tall wall around it.">
 <figcaption>Charcoal on wood. Anonymous, circa 1423.</figcaption>
</figure> 
```

[**这里有些例子**](http://www.html5accessibility.com/tests/figures-nested.html)

# php - Smarty：阵列不工作

> ID：12453587
> 
> 赞同：1
> 
> 时间：2012-09-17T05:34:04.007
> 
> 标签：php, arrays, smarty

我有一个函数可以将以下内容打印到这样的数组中：

`Array ( [0] => Array ( [id] => 1 [name] => name`

但是我无法`foreach`通过这个，我不确定为什么？

```
 <ul>
             {foreach from=$array item=item}
              <li>{$item.name}</li>
            {/foreach}
         </ul> 
```

**更新：**

```
{foreach item=topitem from=$getlocations}
         {foreach item=item from=$topitem}
          <option value="{$item.locationid}">{$item.name}</option>
          {/foreach}
      {/foreach} 
```

**功能：**

```
function getlocations()
    {
      global $smarty;

      $query = placeholderstackoverflow;

      return $query;

      $smarty->assign('getlocations', $getlocations);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T05:59:33.697

假设您使用 Smarty 3.xx，您的代码实际上将通过关联数组运行。

示例 php 代码：

```
$tpl->assign('yourarray', array( 
  0 => array ( 
      'id' => 1, 
      'name' => 'name'
    )
  )
); 
```

智能代码示例：

```
<ul>
{foreach from=$yourarray item=item}
    <li>{$item.name}</li>
{/foreach}
</ul> 
```

...生成以下 HTML 输出：

```
<ul>
    <li>name</li>
</ul> 
```

如果这不是您的实际或预期结果，请添加更多代码。

查看，

*   如果您使用 Smarty 版本 3.xx 并且
*   如果您的阵列确实正确形成。

**更新：**

由于您使用的是 Smarty 2.xx，因此请注意[foreach 已](http://www.smarty.net/docsv2/en/language.function.foreach.tpl)在两者之间进行了更改。

对于遍历嵌套数组，您不能只使用一个 foreach，您必须使用更多。查看版本 2.xx[手册中的示例 7.8。](http://www.smarty.net/docsv2/en/language.function.foreach.tpl)

# php - 从文件夹和数据库中删除 - php

> ID：12453588
> 
> 赞同：-6
> 
> 时间：2012-09-17T05:34:07.820
> 
> 标签：php

请帮助解决问题：

> 注意：未定义变量：第 6 行 D:\MyWebSite\css_pro\admin\core\de_products_test.php 中的 id
> 
> 注意：未定义变量：第 17 行 D:\MyWebSite\css_pro\admin\core\de_products_test.php 中的 id

代码：

```
session_start();
require("../../inc/con_db.php");

$qry=mysql_query("SELECT * FROM products WHERE id='$id'");
$row=mysql_fetch_array($qry);

if($row["img_thumb"]!="") {  
  $thum=$row["img_thumb"];
  unlink("/images/products/thumbs/".$thum);
}

if($row["img_larg"]!="") {  
  $larg=$row["img_larg"];
  unlink("/images/products/".$larg);
}

$delete="DELETE FROM products WHERE id='$id' ";
$result=mysql_query($delete);

if($result==1) {
  print "Entry delete success";
} else {
  print "Entry delete failed";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:40:52.450

通过使用检查 $id 变量

```
if(isset($id))
{
     // your query
} 
```

# c# - Application.Current.Shutdown() 将 my.settings 重置为默认值

> ID：12453589
> 
> 赞同：0
> 
> 时间：2012-09-17T05:34:09.380
> 
> 标签：c#, wpf, vb.net

您好，我使用以下代码重新启动我的 WPF 应用程序

```
System.Diagnostics.Process.Start(Application.ResourceAssembly.Location)
Application.Current.Shutdown() 
```

但是我注意到当它再次运行时 My.Settings 值被重置为默认值，知道如何防止这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:21:36.557

确保在重新启动之前在设置上调用 Save()。如果您已经在应用关闭过程中执行此操作，则设置文件可能会被新应用实例锁定，从而阻止当前实例保存。

# sql - 在 SQL 中将数据类型 varchar 转换为数字时出错

> ID：12453592
> 
> 赞同：1
> 
> 时间：2012-09-17T05:34:32.657
> 
> 标签：sql, sql-server, tsql, stored-procedures

我花了最后 3 个小时试图弄清楚这一点，但我没有运气。执行此 SP 时出现以下错误：

```
Msg 8114, Level 16, State 5, Procedure sp_SPLIT_CARTON, Line 28
Error converting data type varchar to numeric. 
```

这是SP，非常感谢您的帮助

```
USE [1_WMS]

GO 

ALTER PROCEDURE [dbo].sp_SPLIT_CARTON
    @FROM_CARTON VARCHAR(20)
    , @TO_CARTON VARCHAR(20)
    , @SKU VARCHAR(20)
    , @QTY DECIMAL
    , @USER VARCHAR(20)

AS
DECLARE 
    @DATE VARCHAR(10)
    , @TIME VARCHAR(8)
    , @SYS_CONFIG_CODE VARCHAR(5)
    , @SYS_CONFIG_VALUE INT
    , @CN_STATUS INT
    , @CN_STATUS_1 INT  --USE FOR BETWEEN STATEMENT
    , @CN_STATUS_2 INT  --USE FOR BETWEEN STATEMENT
    , @CN_STORE VARCHAR(10)

    SET @DATE = CONVERT(VARCHAR(10), GETDATE(),101);
    SET @TIME = CONVERT(VARCHAR(8), GETDATE(),114);
    SET @SYS_CONFIG_CODE = 'SPLCN';
    SET @CN_STATUS_1 = '10'; 
    --SET @CN_STATUS_2 = 20;

    --THIS IS LINE 28
/*CHECK FOR VALID CARTON STATUS BEFORE SPLITTING*/  
SELECT  @CN_STATUS = cn_status 
        , @CN_STORE = cn_store
FROM CARTON
    WHERE cn_number = @FROM_CARTON    --I BELIEVE THIS IS THE PIECE OF CODE CAUSING THE ISSUE

IF @CN_STATUS = @CN_STATUS_1
    BEGIN

        /*CHECK FOR SYSTEM CONFIGURATION*/  
        SELECT @SYS_CONFIG_VALUE = sys_value FROM SYS_CONFIG
            WHERE sys_code = @SYS_CONFIG_CODE

        IF @SYS_CONFIG_VALUE = 1
            BEGIN
                /*REMOVE SKU FROM CURRENT CARTON*/
                DELETE FROM CARTON_DETAIL 
                    WHERE cd_carton_number = @FROM_CARTON
                        AND cd_barcode = @SKU

                /*UPDATE THE CARTON HEADER*/
                UPDATE CARTON
                    SET cn_packed_qty = cn_packed_qty - @QTY
                        , cn_modify_date = @DATE
                        , cn_modify_time = @TIME
                        , cn_modify_by = @USER
                    WHERE cn_number = @FROM_CARTON
                        AND cn_status BETWEEN @CN_STATUS_1 AND @CN_STATUS_2 

                /*CREATE NEW CARTON HEADER*/                    
                INSERT INTO CARTON
                    (
                        cn_number
                    )
                    VALUES
                    (
                        @FROM_CARTON
                    )

                /*CREATE CARTON DETAIL*/
                INSERT INTO CARTON_DETAIL
                    (
                        cd_carton_number
                    )
                    VALUES
                    (
                        @TO_CARTON
                    )                   

            END

        ELSE IF @SYS_CONFIG_VALUE = 0
            BEGIN
                /*REMOVE SKU FROM CURRENT CARTON*/
                DELETE FROM CARTON_DETAIL 
                    WHERE cd_carton_number = @FROM_CARTON
                        AND cd_barcode = @SKU

                /*UPDATE THE CARTON HEADER*/
                UPDATE CARTON
                    SET cn_packed_qty = cn_packed_qty - @QTY
                        , cn_modify_date = @DATE
                        , cn_modify_time = @TIME
                        , cn_modify_by = @USER
                    WHERE cn_number = @FROM_CARTON
                        AND cn_status BETWEEN @CN_STATUS_1 AND @CN_STATUS_2 

                /*GET THE NEXT CARTON FROM COUNTERS*/
                SELECT @TO_CARTON = counter_current FROM COUNTERS WHERE counter_name = (
                SELECT DISTINCT so_counter_name FROM STORES WHERE SO_NUMBER = (
                SELECT DISTINCT cn_store FROM CARTON WHERE cn_number = @FROM_CARTON))

                /*UPDATE THE COUNTER AFTER GETTING THE NEXT CARTON NUMBER*/
                UPDATE COUNTERS SET counter_current = counter_current + 1
                                    , counter_next = counter_next + 1
                    WHERE counter_name = (SELECT DISTINCT so_counter_name FROM STORES WHERE SO_NUMBER = (
                                            SELECT DISTINCT cn_store FROM CARTON WHERE cn_number = @FROM_CARTON))

                /*CREATE NEW CARTON HEADER*/
                DECLARE 
                    @CN_NUMBER VARCHAR(20)              , @CN_PICKTICKET VARCHAR(20)        , @2ndCN_STORE VARCHAR(10)      , @CN_LOAD_NUMBER VARCHAR(20)
                    , @CN_SHIPMENT_NUMBER VARCHAR(20)   , @CN_MANIFEST_NUMBER VARCHAR(20)   , @CN_PACKED_QTY DECIMAL        , @CN_TRACKING_NUMBER VARCHAR(20)
                    , @CN_TYPE VARCHAR(5)               , @CN_PACK_TYPE VARCHAR(5)          , @CN_ROUTE VARCHAR(5)          , @CN_SHIP_VIA VARCHAR(5)
                    , @CN_BOL VARCHAR(20)               , @CN_MBOL VARCHAR(20)              , @CN_PARCEL_NUMBER VARCHAR(10) , @CN_TRAILER_NUMBER VARCHAR(10)
                    , @CN_AREA VARCHAR(10)              , @CN_ZONE VARCHAR(10)              , @CN_AISLE VARCHAR(10)         , @CN_LEVEL VARCHAR(10)
                    , @CN_POSITION VARCHAR(10)          , @CN_HEIGHT DECIMAL                , @CN_WIDTH DECIMAL             , @CN_DIMENSION DECIMAL
                    , @CN_WEIGHT DECIMAL                , @CN_VOLUME DECIMAL                , @2ndCN_STATUS INT             , @CN_ADDRESS VARCHAR(150)
                    , @CN_ADDRESS_1 VARCHAR(150)        , @CN_CITY VARCHAR(50)              , @CN_STATE VARCHAR(50)         , @CN_ZIP_CODE VARCHAR(20)
                    , @CN_COUNTRY VARCHAR(50)           , @CN_MISC7 VARCHAR(50)             , @CN_MISC8 VARCHAR(50)         , @CN_MISC9 VARCHAR(50)
                    , @CN_MISC10 VARCHAR(50)                                    

                SET @CN_NUMBER = @TO_CARTON         SET @2ndCN_STORE = @CN_STORE            SET @CN_LOAD_NUMBER = ''
                SET @CN_SHIPMENT_NUMBER = ''        SET @CN_MANIFEST_NUMBER = ''            SET @CN_PACKED_QTY = ''
                SET @CN_TRACKING_NUMBER = ''        SET @CN_TYPE = 'SPLIT'                  SET @CN_PACK_TYPE = 'SPLITTED'
                SET @CN_ROUTE = ''                  SET @CN_SHIP_VIA = ''                   SET @CN_BOL = ''
                SET @CN_MBOL = ''                   SET @CN_PARCEL_NUMBER = ''              SET @CN_TRAILER_NUMBER = ''
                SET @CN_AREA = ''                   SET @CN_ZONE = ''                       SET @CN_AISLE = ''
                SET @CN_LEVEL = ''                  SET @CN_POSITION = ''                   SET @CN_HEIGHT = ''
                SET @CN_WIDTH = ''                  SET @CN_DIMENSION = ''                  SET @CN_WEIGHT = ''
                SET @CN_VOLUME = ''                 SET @2ndCN_STATUS = '10'                SET @CN_MISC7 = ''
                SET @CN_MISC8 = ''                  SET @CN_MISC9 = ''                      SET @CN_MISC10 = '' 

                /*GET STORE INFORMATION*/
                SELECT @CN_ADDRESS = so_address
                        , @CN_ADDRESS_1 = so_address_1
                        , @CN_CITY = so_city
                        , @CN_STATE = so_state
                        , @CN_ZIP_CODE = so_zip_code
                        , @CN_COUNTRY = so_country
                    FROM STORES
                    WHERE so_number = @CN_STORE

                EXECUTE sp_CREATE_CARTON
                    @CN_NUMBER              , @CN_PICKTICKET        , @CN_STORE             , @CN_LOAD_NUMBER       , @CN_SHIPMENT_NUMBER
                    , @CN_MANIFEST_NUMBER   , @CN_PACKED_QTY        , @CN_TRACKING_NUMBER   , @CN_TYPE              , @CN_PACK_TYPE
                    , @CN_ROUTE             , @CN_SHIP_VIA          , @CN_BOL               , @CN_MBOL              , @CN_PARCEL_NUMBER
                    , @CN_TRAILER_NUMBER    , @CN_AREA              , @CN_ZONE              , @CN_AISLE             , @CN_LEVEL
                    , @CN_POSITION          , @CN_HEIGHT            , @CN_WIDTH             , @CN_DIMENSION         , @CN_WEIGHT
                    , @CN_VOLUME            , @CN_STATUS            , @CN_ADDRESS           , @CN_ADDRESS_1         , @CN_CITY
                    , @CN_STATE             , @CN_ZIP_CODE          , @CN_COUNTRY           , @CN_MISC7         , @CN_MISC8
                    , @CN_MISC9             , @CN_MISC10            , @USER

                INSERT INTO CARTON
                    (
                        cn_number
                    )
                    VALUES
                    (
                        @TO_CARTON
                    )

                /*CREATE CARTON DETAIL*/
                INSERT INTO CARTON_DETAIL
                    (
                        cd_carton_number
                    )
                    VALUES
                    (
                        @TO_CARTON
                    )                   
            END 
    END
--ELSE
--  BEGIN
--      EXECUTE sp_CREATE_ERROR_MESSAGE
--          @ER_TYPE
--  END 

GO 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:33:10.140

--查找非数值的行并修复数据

```
SELECT *
FROM CARTON
    WHERE ISNUMERIC(cn_number) != 1 OR 
          ISNUMERIC(cn_status) != 1 
```

--如果您无法修复数据，则需要转换为 varchar 并进行比较

# java - 我将如何通过 Java 安全地连接到数据库？

> ID：12453594
> 
> 赞同：0
> 
> 时间：2012-09-17T05:34:45.310
> 
> 标签：java, database, security, encryption

我希望使用 Java 连接到 Mysql 数据库而不向任何可能反编译我的代码的人透露密码？我可以有效地连接到数据库，但我的方式会在代码中公开显示我的密码:(并且只希望对如何隐藏密码做出回应。谢谢，Josh Aurora

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:49:25.527

OAuth 允许客户端连接，而无需在客户端上存储凭据（在移动设备上广泛使用或用于识别 tweitte 应用程序）。它还允许从恶意客户端删除访问权限。但我怀疑 mysql 是否直接支持这个。所以你必须用某种服务层来包装你的数据库。OAuth 的可用映射之一：

[http://code.google.com/p/oauth-signpost/](http://code.google.com/p/oauth-signpost/)

（IIRC，Qipe 使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:45:54.760

假设将要访问的数据库将在您的机器上，我会想到两件事：

*   设置一个小型安全 REST 服务（如图所示[）](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)，该服务将根据具有特定凭据的特定请求将密码传递到您的数据库。但是，如果您的应用程序位于某些公司防火墙之后，这可能是一个问题，因为您可能需要添加防火墙例外，这并不是所有管理员都热衷的事情。

*   您可以混合使用[密码术](http://docs.oracle.com/javase/7/docs/technotes/guides/security/)和[混淆](http://en.wikipedia.org/wiki/Obfuscation_%28software%29)来加密数据库的密码，然后混淆您的所有代码。

不过需要注意的是，这些方法中的任何一种都可以及时被打破。这基本上是所有安全相关软件的规则。

如果由我决定，我会使用第一种方法来解决这个问题，并确保经常更改访问服务的凭据。

但是，用作客户端解决方案一部分的数据库包含非常敏感的数据，这些数据符合客户的利益，不能被篡改，因此客户很可能不会乱用它，只要系统能够满足他/她就会很高兴作品。

另一方面，如果数据库没有部署到您的一台机器上，那么您就无法真正做太多事情。您可以建议将服务器存储在只能通过 Intranet 访问的远程计算机上，但除此之外，我认为您对此无能为力。

# python - Python - 从列表中删除标点符号

> ID：12453595
> 
> 赞同：2
> 
> 时间：2012-09-17T05:34:57.537
> 
> 标签：python, python-3.x

我需要从文本文件中删除标点符号。

文本文件是这样的

> ffff, hhhh, & tommorw home,
> 你离开了吗？

我在尝试

> punc=(",./;'?&-")
> 
> f = open('file.txt', 'r')
> 
> ```
> for line in f:
>     strp=line.replace(punc,"")
>     print(strp) 
> ```

我需要输出为：

> ffff hhhh 明天回家
> 
> ```
> Have you from gone 
> ```

这是返回每一行，但双关语仍然存在>可以使用一些帮助。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T05:37:11.963

用于`str.translate`从字符串中删除字符。

在 Python 2.x 中：

```
# first arg is translation table, second arg is characters to delete
strp = line.translate(None, punc) 
```

在 Python 3 中：

```
# translation table maps code points to replacements, or None to delete
transtable = {ord(c): None for c in punc}
strp = line.translate(transtable) 
```

或者，您可以使用`str.maketrans`构建`transtable`：

```
# first and second arg are matching translated values, third arg (optional) is the characters to delete
transtable = str.maketrans('', '', punc)
strp = line.translate(transtable) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T05:37:10.930

```
>>> import string
>>> with open('/tmp/spam.txt') as f:
...   for line in f:
...     words = [x.strip(string.punctuation) for x in line.split()]
...     print ' '.join(w for w in words if w)
... 
ffff hhhh tommorw home
Have you from gone 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T09:37:40.183

```
import string

str_link = open('replace.txt','r').read()

#str_link = "ffff, hhhh, & tommorow home, Have you from gone?"

punc = list(",./;'?&-")

for line in str_link:
    if line in punc:
        str_link = str_link.replace(line,"") 

print str_link 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-04T10:55:21.553

我认为使用的想法`str.translate`很棒，但这是另一种方法：

```
punc=set(",./;'?&-")

for line in f:
    strp=''.join(c for c in line if not c in punc)
    print(strp) 
```

# iphone - 从 iphone 设置更改距离单位

> ID：12453597
> 
> 赞同：2
> 
> 时间：2012-09-17T05:35:27.387
> 
> 标签：iphone, objective-c, ios, xcode

我正在开发一个基于位置的 iphone 应用程序，它根据距离搜索附近的商店。我使用公里的标准距离单位。但我想根据每个国家的标准单位更改距离单位。我可以从 iphone 设置中更改距离单位吗？距离格式应该是基于位置的默认值：在南非：KM，在美国：MI。我也想以以下单位获得它 - o 英尺 o 英里 o 海里 o 米 o 公里 o Ri（韩国）o Ri（日本）o ETC！！！——</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T05:44:44.610

您可以通过以下方式获取手机设置的语言环境：

```
NSLocale *locale = [NSLocale currentLocale]; 
```

并以这种方式询问计量单位：

```
NSString *measurementSystem = [locale objectForKey: NSLocaleMeasurementSystem]; 
```

这将回答“公制”或“美国”。[您可以在NSLocale 类 ref](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)中查看更多内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:42:45.513

不，您不能更改距离单位。你应该使用的是`NSLocaleUsesMetricSystem`来自[NSLocale](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)

# javascript - 单选按钮 Javascript

> ID：12453598
> 
> 赞同：0
> 
> 时间：2012-09-17T05:35:32.677
> 
> 标签：javascript, html, add

我有`radiobutton`如下：

```
Apple
<input type="radio" id="one" name="apple" data-price="10" value="light"/> Light
<input type="radio" id="two" name="apple" data-price="20" value="dark" /> Dark
<input type="text" id="appleqty" name="appleqty" value="" />

Mango
<input type="radio" id="three" name="Mango" data-price="30" value="light"/> Light
<input type="radio" id="one" name="Mango" data-price="40" value="dark" /> Dark
<input type="text" id="Mangoqty" name="Mangoqty" value="" />

Pine Apple
<input type="radio" id="four" name="Pineapple" data-price="50" value="light"/> Light
<input type="radio" id="five" name="Pineapple" data-price="60" value="dark" /> Dark
<input type="text" id="Pineappleqty" name="Pineappleqty" value="" />

Grape
<input type="radio" id="six" name="Grape" data-price="70" value="light"/> Light
<input type="radio" id="seven" name="Grape" data-price="80" value="dark" /> Dark
<input type="text" id="Pineappleqty" name="Pineappleqty" value="" />
​ 
```

`radiobutton`s 在as`Group`中分隔`(Apple,Mango,Pineapple,Grape)`。我需要添加`Price`他`Quantity`需要的。

## 例子：

如果用户点击`Dark Apple`了应该是，`radiobutton`如果用户将点击更改为，那么价格应该是。这可能使用 JavaScript 吗？`1 Qty``Price``20``Radio``Light Apple` `radiobutton``10 - 20(Previous Price If Checked) = 10`

我尝试过的代码：

```
function upprice(ref)
{
    var elname = ref.getAttribute("name");
    var qtyname = elname+"qty";
    var price = ref.getAttribute("proprice");
    var qty = parseInt(document.getElementById(qtyname).value)
    var newprice = parseInt(price*qty);
    var olprice = parseInt(document.getElementById("orderpagepriceinstant").innerHTML);
    var totalprice = parseInt(olprice+newprice);
    document.getElementById("orderpagepriceinstant").innerHTML = parseInt(totalprice)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:20:07.820

你的输入应该是这样的：

```
<input type="radio" name="apple" value="10">Light
<input type="radio" name="apple" value="20">Dark
<input type="text" name="appleqty" value=""> 
```

您可以在单选按钮上放置一个点击监听器，在数量上放置一个更改监听器以更新价格：

```
<input type="radio" onclick="updatePrice(this)" ...>
<input type="text" onclick="updatePrice(this)" ...> 
```

更新功能是：

```
function updatePrice(el) {
  var priceEach, quantity, itemValue;

  if (el.type == 'radio') {
    priceEach = getRBValue(el);
    quantity = el.form[el.name + 'qty'].value;

  } else if (el.type == 'text') {
    quantity = el.value;
    priceEach = getRBValue(el.form[el.name.replace(/qty$/,'')]);
  }

  /* 
     code here to validate the value of quantity
  */

  itemValue = quantity * priceEach;

  /* 
     do something with itemValue
  */

  alert(itemValue);
}

// Get the value of a radio button set
function getRBValue(el) {
  var buttons;

  // See if have been passed a button or button set (NodeList)
  if (el.type == 'radio') {
    buttons = el.form[el.name];
  } else if (typeof el.length == 'number') {
    buttons = el;
  }

  if (buttons) {
    for (var i=0, iLen=buttons.length; i<iLen; i++) {
      if (buttons[i].checked) {
        return buttons[i].value;
      }
    }
  }
}

</script> 
```

标记，您还可以向表单添加一个单击侦听器以进行更新，而不是在每个单选按钮上。您还应该有一个重置按钮，以便用户可以清除表单。

```
<form ... >
    <input type="radio" name="apple" value="10" onclick="updatePrice(this)">Light
    <input type="radio" name="apple" value="20" onclick="updatePrice(this)">Dark
    <input type="text" name="appleqty" value="" onchange="updatePrice(this)">
    <br>
    <input type="reset">
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:45:08.167

这是一个快速的 jQuery 示例：http: [//jsfiddle.net/FTscC/](http://jsfiddle.net/FTscC/)

（笔记本快死了，明天我会详细说明！）

# solr - 用于预测搜索的 Solr Suggester 查找类

> ID：12453600
> 
> 赞同：4
> 
> 时间：2012-09-17T05:35:40.920
> 
> 标签：solr, search-engine

我正在开发 Solr 3.6 以获取自动建议。我一直在提到 Solr Suggester 组件（http://wiki.apache.org/solr/Suggester）。但是我无法决定应该为 Suggester 使用哪个 Lookup 类，而且也没有提供任何好的文档，我可以从中找到最好的文档。

我在这四个查找类中进行了选择：

JaspellLookup - 基于 Jaspell 的基于树的表示，TSTLookup - 基于三叉树的表示，能够立即更新数据结构，FSTLookup - 基于自动机的表示；构建速度较慢，但​​在运行时消耗的内存要少得多（请参阅下面的性能说明）。WFSTLookup - 加权自动机表示：FSTLookup 的替代方案，用于更细粒度的排名。索尔 3.6+

你能帮我理解这个吗？或者帮我决定哪一个适合我的要求？

我需要部署一个类似于 Amazon.com、Flipkart、NewEgg 的建议器，具有以下特定要求：

*   自动建议与术语完成，比如当我输入“xpe”时，建议者应该返回，xperia，电子产品中的 xperia，PC 和笔记本电脑中的 xperia（这可以在类别中建议术语）
*   对于同一个词，它还应该返回 xperia ray、xperia arc、xperia play 等。这可以是按受欢迎程度排序的热门搜索。
*   对于更完整的术语“xperia u”，它应该返回 xperia u、xperia u unlocked、xperia u case、xperia u st25i 等。
*   当有人写“xperia u”时填写完整的产品名称，它应该列出xperia u android手机-白色，xperia u android手机-黑色......其中建议是具体的产品名称。
    *   我们还需要过滤父类别，所以当有人选择婴儿产品作为类别时，它不会列出 xperia play 或 xperia u for xpe。相反，如果没有建议，它可能只是不提供建议，或者只提供这些类别中的建议。

**编辑** 只是为了澄清，按受欢迎程度排序，我的意思是按实际用户搜索的次数列出建议的术语，而不是给出更多数量的项目作为结果的术语。

我确信这可以做到这一点，但不确定如何使用 Solr 中提供的建议器组件来准确地做到这一点，特别是我应该选择哪个查找来实现这种建议。您的帮助将不胜感激。

# c# - 如何检查电子邮件地址是否存在？

> ID：12453601
> 
> 赞同：0
> 
> 时间：2012-09-17T05:35:40.853
> 
> 标签：c#, vb.net

我正在尝试检查电子邮件地址是否存在。我可以`@gmail.com`根据 SMTP 服务器验证地址`gmail-smtp-in.l.google.com`，但我不知道如何获取其他域的 SMTP 服务器以进行检查。请告知如何获取域的 SMTP 服务器，或者另一种可靠地检查电子邮件地址是否存在的方法。

这是我检查`@gmail.com`地址的代码：

```
TcpClient tClient = new TcpClient("gmail-smtp-in.l.google.com", 25);'
string CRLF = "\r\n";
byte[] dataBuffer;
string ResponseString;

NetworkStream netStream = tClient.GetStream();
StreamReader reader = new StreamReader(netStream);
ResponseString = reader.ReadLine();

/* Perform HELO to SMTP Server and get Response */
dataBuffer = BytesFromString("HELO AnkurHere" + CRLF);
netStream.Write(dataBuffer, 0, dataBuffer.Length);
ResponseString = reader.ReadLine();

dataBuffer = BytesFromString("MAIL FROM:<abc@gmail.com>" + CRLF);
netStream.Write(dataBuffer, 0, dataBuffer.Length);
ResponseString = reader.ReadLine();

/* Read Response of the RCPT TO Message to know from google if it exist or not */
dataBuffer = BytesFromString("RCPT TO:<" + TextBox1.Text.Trim() + ">" + CRLF);
netStream.Write(dataBuffer, 0, dataBuffer.Length);

ResponseString = reader.ReadLine();
if (GetResponseCode(ResponseString) == 550)
   {
       label1.Text = "Mai Address Does not Exist !";
       label2.Text = "Original Error from Smtp Server" + ResponseString;
   }

/* QUITE CONNECTION */
dataBuffer = BytesFromString("QUITE" + CRLF);
netStream.Write(dataBuffer, 0, dataBuffer.Length);
tClient.Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:28:38.937

对于您正在使用的方法，您需要对域的 MX 记录进行 DNS 查找。据我所知，.NET 中没有内置的方法可以做到这一点，所以你要么必须找到一个组件，要么看看[这个问题](https://stackoverflow.com/questions/2669841/how-to-get-mx-records-for-a-dns-name-with-system-net-dns/7546721#7546721)。

但是，您需要注意的是，此方法不会给出 100% 准确的结果，并且可能会产生误报 - 某些域会在将任何地址的邮件放入“全部接收”邮箱、静默删除或发送退回邮件之前接受任何地址的邮件信息。接受然后弹跳不是最佳实践，但有时仍会发生。

# php - 如何使用正则表达式删除 URL 中的特定参数

> ID：12453607
> 
> 赞同：0
> 
> 时间：2012-09-17T05:36:25.633
> 
> 标签：php, regex, url

我们无法去除 URL 中的特定参数，请查看 URL。

> [http://www.globalseopulse.com/&sa=U&ei=u7RWUJniFcfTrQejp4DACw&ved=0CBMQFjAA&usg=AFQjCNEWLiKXbuVg6N165ETGYP3F1K0Qfw](http://www.globalseopulse.com/&sa=U&ei=u7RWUJniFcfTrQejp4DACw&ved=0CBMQFjAA&usg=AFQjCNEWLiKXbuVg6N165ETGYP3F1K0Qfw)

在我们的代码中，它会自动添加参数：

> &sa=U&ei=u7RWUJniFcfTrQejp4DACw&ved=0CBMQFjAA&usg=AFQjCNEWLiKXbuVg6N165ETGYP3F1K0Qfw

我们的程序中不需要这些参数。请为我提供合适的方法，我们可以在其中删除循环中的附加参数。

谢谢

聚苯乙烯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:52:07.590

```
$url = "http://www.globalseopulse.com/&sa=U&ei=u7RWUJniFcfTrQejp4DACw&ved=0CBMQFjAA&usg=AFQjCNEWLiKXbuVg6N165ETGYP3F1K0Qfw";
$pieces = explode("&", $url, 1);
$urlWithoutParameters = $pieces[0]; 
```

# eclipse - 打开 Eclipse 时出错

> ID：12453609
> 
> 赞同：0
> 
> 时间：2012-09-17T05:36:31.750
> 
> 标签：eclipse

我无法打开 Eclipse IDE。显示的错误如下

![在此处输入图像描述](../Images/9674761222b73c83962663ca37b05be6.png)

知道可能是什么原因吗？我该如何解决这个问题？

**注意**：我最近运行了 CCleaner（任何注册表问题？？），执行我打开的 Eclispe 项目时出错。重新启动时，我遇到了这个问题。重新安装会有帮助吗？我会这样做并在这里更新结果。我真的很想知道是什么导致了这种情况，以便将来采取预防措施。

**更新**：新安装同样的错误。但是这次出现了关于启动 JVM 和缺少 dll 的错误，所以要重新安装 Java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:48:54.090

无法理解可能是什么问题，仍然试一试。

您是否通过此 URL [http://michaelzanussi.com/?p=468](http://michaelzanussi.com/?p=468)

似乎是同样的问题，重置 JAVA_HOME 和 PATH 为他解决了这个问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-12T19:23:10.733

Eclipse 的作者强烈建议手动更新 Eclipse.ini 文件以直接指向您要使用的 JRE，而不是依赖于 Windows 环境变量。

此外，C:\Windows\System32 是查找 Java 运行时环境文件的一个非常奇怪的地方，通常它们在 C:\Program Files\Java 或 C:\Program Files (x86)\Java 中结束。

# binary - 找出 4 位的位模式#

> ID：12453618
> 
> 赞同：0
> 
> 时间：2012-09-17T05:37:03.337
> 
> 标签：binary, twos-complement

一个。填写以下 4 位数字的位模式。如果一个数字有多个位模式，请将它们全部写入。如果不存在位模式，请在框中填写“N/A”。

无符号、符号/大小、一个补码、二进制补码

对于 0,7,-1, 15 和 8。

我找出了 0、-1 和 15 的值。

我需要 7 和 8 的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:40:50.990

对于 7

```
Unsigned notation - 0111
Signed notation - 0111
1s complement notation - 0111 
2s complement notation - 0111 
```

8人

```
Unsigned notation - 1000
Signed notation - N/A  (-7 to +7)
1s complement notation - N/A  (-7 to +7)
2s complement notation - N/A  (-8 to +7) 
```

检查[这个](http://en.wikipedia.org/wiki/Signed_number_representations)

# c++ - 我可以让 C++ 编译器在编译时实例化对象吗？

> ID：12453623
> 
> 赞同：3
> 
> 时间：2012-09-17T05:37:17.903
> 
> 标签：c++, optimization, gcc

我正在编写一些具有大量相当简单对象的代码，我希望它们在编译时创建。我认为编译器能够做到这一点，但我无法弄清楚如何做到这一点。

在*C*中，我可以执行以下操作：

```
#include <stdio.h>

typedef struct data_s {
    int a;
    int b;
    char *c;
} info;

info list[] = {
    1, 2, "a",
    3, 4, "b",
};

main()
{
   int i;
   for (i = 0; i < sizeof(list)/sizeof(*list); i++) {
     printf("%d %s\n", i, list[i].c);
   }
} 
```

使用#C++* 每个对象都会调用它的构造函数，而不仅仅是在内存中布局。

```
#include <iostream>
using std::cout;
using std::endl;

class Info {
    const int a;
    const int b;
    const char *c;
public:
    Info(const int, const int, const char *);
    const int get_a() { return a; };
    const int get_b() { return b; };
    const char *get_c() const { return c; };
};

Info::Info(const int a, const int b, const char *c) : a(a), b(b), c(c) {};

Info list[] = {
    Info(1, 2, "a"),
    Info(3, 4, "b"),
};

main()
{
    for (int i = 0; i < sizeof(list)/sizeof(*list); i++) {
        cout << i << " " << list[i].get_c() << endl;
    }
} 
```

我只是看不到编译器无法在编译时完全实例化这些对象的信息，所以我认为我遗漏了一些东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T06:26:18.223

在 C++ 2011 中，您可以在编译时创建对象。为此，您需要使各种事物成为常量表达式，但是：

1.  需要声明构造函数`constexpr`。
2.  您声明的实体需要声明`constexpr`。

请注意，几乎所有的`const`限定词要么无关紧要，要么位于错误的位置。这是一个带有各种更正的示例，并且实际上还演示了`list`数组在编译期间被初始化（通过使用它的成员来定义 an 的值`enum`）：

```
#include <iostream>
#include <iterator>

class Info {
    int a;
    int b;
    char const*c;

public:
    constexpr Info(int, int, char const*);
    constexpr int get_a() const { return a; }
    constexpr int get_b() const { return b; }
    constexpr char const*get_c() const { return c; }
};

constexpr Info::Info(int a, int b, char const*c)
  : a(a), b(b), c(c) {}

constexpr Info list[] = {
    Info(1, 2, "a"),
    Info(3, 4, "b"),
};

enum {
    b0 = list[0].get_b(),
    b1 = list[1].get_b()
};

int main()
{
    std::cout << "b0=" << b0 << " b1=" << b1 << "\n";
    for (Info const* it(list), *end(list); it != end; ++it) {
        std::cout << (it - list) << " " << it->get_c() << "\n";
    }
} 
```

# actionscript-3 - as3 将参数发布到谷歌表单，奇怪的是它不能工作

> ID：12453624
> 
> 赞同：0
> 
> 时间：2012-09-17T05:37:26.263
> 
> 标签：actionscript-3

我新写了一个项目来使用闪存做谷歌表单工作。但它不能将任何数据发布到谷歌表单。

提交代码：

```
var ulpost:URLLoader = new URLLoader()
var url:String = htmlformat.form.data.action
var req:URLRequest = new URLRequest(url)
var vars:URLVariables = new URLVariables()
for (var name:String in dic) {
    var eachParam:Object = dic[name] as Object
    if (eachParam is TextInput) {
        vars[name]=TextInput(eachParam).text
    }else if (eachParam is TextArea) {
        vars[name]=TextArea(eachParam).text
    }else if (eachParam is RadioButtonGroup) {
        vars[name] = RadioButtonGroup(eachParam).selection.label
    }else if (eachParam is ComboBox) {
        vars[name] = ComboBox(eachParam).selectedLabel
    }
}
vars['pageNumber']="0"
vars['backupCache']=""
vars['submit']="Submit"
req.data = vars
ulpost.dataFormat = URLLoaderDataFormat.TEXT
req.contentType= "application/x-www-form-urlencoded";
req.method = URLRequestMethod.POST
EventCenter.defaultCenter().addObject(Event.COMPLETE,ulpost,evt_ulpost_com)
EventCenter.defaultCenter().addObject(IOErrorEvent.IO_ERROR,ulpost,evt_ulpost_err)
EventCenter.defaultCenter().addObject(HTTPStatusEvent.HTTP_RESPONSE_STATUS, ulpost, evt_ulpost_status)
EventCenter.defaultCenter().addObject(SecurityErrorEvent.SECURITY_ERROR, ulpost, evt_ulpost_err2)
ulpost.load(req) 
```

变量：

```
submit=Submit&entry%2E5%2Esingle=test&entry%2E1%2Egroup=%E6%99%AE%E9%80%9A&entry%2E7%2Esingle=&entry%2E0%2Egroup=A&pageNumber=0&entry%2E4%2Esingle=game%5FMistyJewel&backupCache= 
```

响应状态：

500

它返回一个错误页面字符串：

```
<!DOCTYPE html><html lang="en" ><head><meta name="description" content="Web word processing, presentations and spreadsheets"><link rel="shortcut icon" href="//ssl.gstatic.com/docs/spreadsheets/favicon_jfk.png"><title>Google Docs Error</title><link href="//fonts.googleapis.com/css?family=Open+Sans:300" rel="stylesheet" type="text/css"><style>/* Copyright 2012 Google Inc. All Rights Reserved. */
.goog-inline-block{position:relative;display:-moz-inline-box;display:inline-block}* html .goog-inline-block{display:inline}*:first-child+html .goog-inline-block{display:inline}#drive-logo{color:#91959c;font-family:"Open Sans",Arial,sans-serif;font-size:27px;font-weight:300;position:absolute;text-shadow:0 1px 1px white;white-space:nowrap}#drive-logo img{padding:0 0.4em 0 0;position:relative;top:2px;vertical-align:middle}#drive-logo a{color:#91959c;text-decoration:none}#drive-logo span.goog-inline-block{margin-top:3px;vertical-align:top}</style><style type="text/css">body {background-color: #fff; font-family: Arial,sans-serif; font-size: 13px; margin: 0; padding: 0;}a, a: link, a: visited {color: #112ABB;}</style><style type="text/css">.errorMessage {font-size: 12pt; font-weight: bold; line-height: 150%;}</style></head><body><div style="margin: auto; max-width: 750px;"><div style="margin: 80px 40px 20px 40px; position:relative; "><div style="position: absolute; top: -80px;"><h1 id="drive-logo"><a href="/"><img src="//www.google.com/images/logos/google_logo_41.png" width="116" height="41" alt="Google logo" ><span class="goog-inline-block">Drive</span></a></h1></div><p style="padding-top: 15px">Google Docs has encountered a server error. If reloading the page doesn't help, please <a href="http://docs.google.com/support/bin/request.py?hl=en&ctx=docs&contact_type=server_error">contact us</a>.</p><p>We&#39;re sorry, a server error occurred. Please wait a bit and try reloading your spreadsheet.<br>To discuss this or other issues, visit the <a href="http://productforums.google.com/forum/#!forum/docs">Google Docs Help forum</a>. To see the list of known problems, check the <a href="http://docs.google.com/support/bin/static.py?hl=en&page=known_issues.cs">Google Docs Known Issues page</a>.</p><p><br><b>Sorry, and thanks for your help!</b><br><i>- The Google Docs Team</i></p></div></div></body></html> 
```

我试过任何方法。但不要工作。后页与网页表单操作 url 相同。

:(

此处的快照：（无法上传）https://docs.google.com/open?id=0ByCQf0ErsQlOVTI3aTJJVVY2S28

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:57:49.233

现在我解决它。

表单网址是： [https ://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=xxxx&ifq](https://docs.google.com/spreadsheet/viewform?hl=en_US&formkey=xxxx&ifq)

删除一些参数并使用此页面 [https://docs.google.com/spreadsheet/viewform?formkey=xxxx](https://docs.google.com/spreadsheet/viewform?formkey=xxxx)

# asp.net-web-api - 当涉及到自定义模型时，如何做 asp.net webapi 路由？

> ID：12453626
> 
> 赞同：1
> 
> 时间：2012-09-17T05:37:30.880
> 
> 标签：asp.net-web-api, asp.net-routing

我正在开发一个 ASP.Net WebApi 应用程序并在路由方面遇到一些困难。我的 WebApi 控制器中有以下代码。

```
public class UserRegistrationServiceWebApiController : ApiController
{

    [HttpPost]
    public void RegisterUser(RegisterUser registerUser)
    {
        /*Some code here*/

    }

    [HttpPost]
    public void ConfirmUserPassword(UserPasswordConfirmModel userPasswordData)
    {
        /*Some code here*/
    }
} 
```

在我的 RouteConfig.cs 中，我给出了这样的路线。

```
routes.MapHttpRoute(
            name: "UserRegistrationApi",
            routeTemplate: "api/{controller}/{action}/{firstName}/{lastName}/{email}/{phoneNo}/{company}"
        );

        routes.MapHttpRoute(
            name: "UserPasswordConfirmationApi",
            routeTemplate: "api/{controller}/{action}/{userId}/{password}"
        ); 
```

这里的属性（名字、姓氏等）是从客户端正确填充的，当我分别调用这两个操作时，我可以在服务器端看到它们。但是当两个动作都在控制器中时，它说它无法确定要选择哪个动作。这显然是因为我在服务器端填写了自定义对象（RegisterUser 模型和 UserPasswordConfirmModel 模型）。所以那里有冲突。

这是因为路由问题。感谢任何形式的帮助。

提前致谢。

实际上我发现问题在于同一个控制器中的两个动作的冲突。如果我分别使用这两个动作，它们可以正常工作。当我们在上面的同一个控制器中有两个动作时，我不知道如何处理。我查看了自定义参数绑定，但我认为这不是问题，因为我的操作单独工作正常。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T09:12:40.703

一个简短的回答，在同一个控制器上不要有两个动作。但是，如果您愿意，请使用特定路线（添加约束）。另外，是否有理由在网址中包含密码？

```
 routes.MapHttpRoute(
        name: "UserRegistrationApi",
        routeTemplate: "api/{controller}/{action}/{firstName}/{lastName}/{email}/{phoneNo}/{company}",
        constraints = new { action = "RegisterUser" }
    );

    routes.MapHttpRoute(
        name: "UserPasswordConfirmationApi",
        routeTemplate: "api/{controller}/{action}/{userId}/{password}",
       constraints = new { action = "ConfirmUserPassword" }
    ); 
```

# ember.js - 如何使用不需要所有参数的 ember.js 构建嵌套路由？

> ID：12453631
> 
> 赞同：1
> 
> 时间：2012-09-17T05:38:14.820
> 
> 标签：ember.js, ember-old-router

我有一个嵌套的路由结构，它允许分页/排序/搜索，这实际上会以某种方式调整 ArrayController。我对当前实现的问题是，一切都需要得到一个有效的页面来呈现。

```
http://localhost:8000/#/page/1/sort/username/search/dave 
```

如果我只通过页面，我会收到错误

> 未捕获的错误：断言失败：找不到路径的状态

我是否在嵌套路由中遗漏了某些内容，或者我是否需要将排序/搜索标记为可选？

```
PersonApp.Router = Ember.Router.create({
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      connectOutlets: function(router) {
        router.get('applicationController').connectOutlet('person', router.get('store').findAll(PersonApp.Person));
      },
      paginated: Ember.Route.extend({
        route: '/page',
        index: Ember.Route.extend({
          route: '/:page_id',
          connectOutlets: function(router, context) {
            console.log("here with page id " + context.page_id);
            router.get('personController').set('selectedPage', context.page_id);
          },
          exit: function(router) {
            router.get('personController').set('selectedPage', undefined);
          },
          sorted: Ember.Route.extend({
            route: '/sort',
            index: Ember.Route.extend({
              route: '/:column',
              connectOutlets: function(router, context) {
                console.log("SORTING " + context.column);
              },
              search: Ember.Route.extend({
                route: '/search',
                index: Ember.Route.extend({
                  route: '/:term',
                  connectOutlets: function(router, context) {
                    console.log("SEARCHING " + context.term);
                  }
                })
              })
            })
          })
        })
      })
    })
  })
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T07:02:30.220

Emberjs 路由器只允许路由到叶节点，因此您必须通过在每个路由中添加虚拟“/”路由来制作每个节点的叶节点。以下问题与您的问题相似，您可以查看这些问题。 [为什么 Ember 路由器只允许导航到叶路由？](https://stackoverflow.com/questions/11380369/why-does-ember-router-only-allow-navigating-to-leaf-routes)

# python - python gevent、zeromq和ultramysql——伤脑筋

> ID：12453633
> 
> 赞同：0
> 
> 时间：2012-09-17T05:38:30.297
> 
> 标签：python, mysql, concurrency, zeromq, gevent

在此示例中，客户端应立即收到响应，因为查询已生成且根本未使用。“print msg”行立即显示在服务器端，但客户端在查询完成执行之前不会收到响应。怎么了？

```
#!/usr/bin/python
import sys
import gevent
from gevent_zeromq import zmq
import umysql
context = zmq.Context()

def serve():
    socket = context.socket(zmq.REP)
    socket.connect('inproc://backend')
    msg = socket.recv()
    gevent.spawn(serve)
    db = umysql.Connection()
    db.connect('localhost',3306,'user','password','database')
    gevent.spawn(db.query,"SELECT SLEEP(10)")
    socket.send(msg)
    socket.close()
    print msg
gevent.spawn(serve)

frontend = context.socket(zmq.ROUTER)
frontend.bind('tcp://*:5571')

backend = context.socket(zmq.DEALER)
backend.bind('inproc://backend')

def zeromq_relay(a, b):
    while True:
        msg = a.recv()
        more = a.getsockopt(zmq.RCVMORE)
        if more:
            b.send(msg, zmq.SNDMORE)
        else:
            b.send(msg)

a = gevent.spawn(zeromq_relay, frontend, backend)
b = gevent.spawn(zeromq_relay, backend, frontend)
gevent.joinall([a,b]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T17:58:28.397

ultramysql 是一个不错的软件包，但是完全没有文档很糟糕。

ultramysql 不会自动与 gevent 兼容。添加到顶部：

从 gevent 导入猴子 monkey.patch_socket()

问题解决了。

# unit-testing - 如何使用 rabbitmq 在 python 中编写单元/集成测试？

> ID：12453639
> 
> 赞同：4
> 
> 时间：2012-09-17T05:39:23.103
> 
> 标签：unit-testing, testing, integration-testing, rabbitmq, automated-tests

我有一个使用rabbitmq编写的python项目，我想知道我应该如何为它编写单元测试/什么是最佳实践。

由于代码需要在后台运行 rabbitmq 服务器，因此我提出了三个选项：

1.  编写一些检查器，在测试套件开始时检查 rabbit 是否正在运行，如果没有运行则失败 - 不理想，因为它需要手动启动 rabbitmq
2.  在每个测试设置上自动使用 rabbitmq 启动一个进程，并在 tearDown 时终止它 - 出于某种原因，这会产生连接错误
3.  模拟 rabbitmq - 有人对此有任何建议或提示吗？

谢谢！

乔恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T10:31:23.517

毫无疑问，我更喜欢将 rabbitmq 排除在单元测试之外。

我正在编写一个假的上层类以避免 Rabbit mq 依赖，它给了我几个接口来调用发布者方法或调用一个接收器检查器方法。

```
class FakePublisher(Publisher)
    def __init__(self):
        pass
    def call_consumer(self, msg):
        self.consumer(msg)

class test(unittest.TestCase):
    def test_foo(self):
        publisher = FakePublisher()
        ret = publisher.call_consumer(msg("foo"))
        self.assertEqual(ret, True) 
```

# xcode - 为什么新结帐显示修改后的文件？

> ID：12453640
> 
> 赞同：1
> 
> 时间：2012-09-17T05:39:25.123
> 
> 标签：xcode, svn, version-control

我在 SVN 存储库中有一个项目。提交时我没有收到任何错误，但是当我签出时，新副本显示一些文件已修改。

新签出的项目副本：

![在此处输入图像描述](../Images/ad5e351e538c098cce94b82e3c651ccd.png)

# jquery - 带有 Cookie 的 Jquery 选项卡

> ID：12453641
> 
> 赞同：1
> 
> 时间：2012-09-17T05:39:32.120
> 
> 标签：jquery, asp.net, cookies, tabs

我正在使用 Jquery 提供的 Cookie 使用 Jquery 选项卡，[并且](http://jqueryui.com/demos/tabs/#cookie)当我刷新页面时，所选选项卡保持不变，因此工作完美。
我使用了以下代码：

```
 $("#tabs").tabs({
            cookie: {                   
                expires: 1
            }
        }); 
```

但是当我导航到其他页面并返回时，所选选项卡保持不变。此时，我希望第一个选项卡被选中，而不是在导航到其他页面之前我之前选择的选项卡。
是否可以仅将 cookie 用于刷新页面而不是在导航到其他页面后使用？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:58:19.213

为此，您可以使用 cookie 创建选项卡，当您导航到其他页面时，您需要手动删除 cookie。对于擦除，将当前时间戳传递给 document.cookie。请通过以下[链接](http://www.quirksmode.org/js/cookies.html) 了解详细说明。

# jquery - 在选择框外单击时收回选择选项

> ID：12453647
> 
> 赞同：1
> 
> 时间：2012-09-17T05:40:11.700
> 
> 标签：jquery, html, css

我使用以下 html/css 和 jQuery 制作了一个自定义选择框。

```
div.selectBox {
    position:relative;
    display:inline-block;
    cursor:default;
    text-align:left;
    line-height:30px;
    clear:both;
    color:#888;
}
span.selected {
    width:167px;
    text-indent:20px;
    border:1px solid #ccc;
    border-right:none;
    border-top-left-radius:5px;
    border-bottom-left-radius:5px;
    background:#f6f6f6;
    overflow:hidden;
}
span.selectArrow {
    width:30px;
    border:1px solid #60abf8;
    border-top-right-radius:5px;
    border-bottom-right-radius:5px;
    text-align:center;
    font-size:20px;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -o-user-select: none;
    user-select: none;
    background:#4096ee;
}

span.selectArrow,span.selected {
    position:relative;
    float:left;
    height:30px;
    z-index:1;
}
div.selectOptions {
    position:absolute;
    top:28px;
    left:0;
    width:198px;
    border:1px solid #ccc;
    border-bottom-right-radius:5px;
    border-bottom-left-radius:5px;
    overflow:hidden;
    background:#f6f6f6;
    padding-top:2px;
    display:none;
}

span.selectOption {
    display:block;
    width:80%;
    line-height:20px;
    padding:5px 10%;
}

span.selectOption:hover {
    color:#f6f6f6;
    background:#4096ee;         
} 
```

和 jQuery：

```
$('div.selectBox').each(function(){
        $(this).children('span.selected').html($(this).children('div.selectOptions').children('span.selectOption:first').html());
    $(this).attr('value',$(this).children('div.selectOptions').children('span.selectOption:first').attr('value'));

    $(this).children('span.selected,span.selectArrow').click(function(){
        if($(this).parent().children('div.selectOptions').css('display') == 'none'){
            $(this).parent().children('div.selectOptions').css('display','block');
        }
        else
        {
            $(this).parent().children('div.selectOptions').css('display','none');
        }
    });

    $(this).find('span.selectOption').click(function(){
        $(this).parent().css('display','none');
        $(this).closest('div.selectBox').attr('value',$(this).attr('value'));
        $(this).parent().siblings('span.selected').html($(this).html());
    });
}); 
```

但是当我们单击选择框中的箭头时，会出现列表。但只有当我们点击同一个箭头时它才会关闭。当我单击页面的任何其他部分时，如何实现关闭列表？

HTML

```
<div class='selectBox'>
    <span class='selected'></span>
    <span class='selectArrow'>&#9660</span>
    <div class="selectOptions" >
        <span class="selectOption" value="Option 1">Option 1</span>
        <span class="selectOption" value="Option 2">Option 2</span>
        <span class="selectOption" value="Option 3">Option 3</span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:59:31.687

使用文档单击隐藏`.selectOptions`：

```
$(document).unbind('click');
$(document).click(function(event){
    if($(event.target).closest('div.selectBox').length == 0) {
         $('.selectOptions').hide();                
    }
}); 
```

**工作示例：http: [//jsfiddle.net/FBuKG/](http://jsfiddle.net/FBuKG/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:51:29.213

尝试

```
$('body').click(function() {
    if($('div.selectOptions').css('display') != 'none'){
        $('div.selectOptions').css('display','none');
    }
}); 
```

# python - 从 XML 标记 python 中删除文本值

> ID：12453657
> 
> 赞同：0
> 
> 时间：2012-09-17T05:41:08.617
> 
> 标签：python

我只想使用python dom或elementtree删除xml文件的文本值。我的xml文件如下。

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0"  xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
 <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
    <PostBuildEvent>
      <Command>sign "Loc" </Command>
     </PostBuildEvent>
 </ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
    <PostBuildEvent>
     <Command>COPY "SourceLoc" "DestLoc"</Command>
     </PostBuildEvent>
  </ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
    <PostBuildEvent>
      <Command>COPY "SourceLoc" "DestLoc"</Command>
     </PostBuildEvent>
 </ItemDefinitionGroup>
</Project> 
```

我想要的是清空包含复制过程的命令标签。并保持所有其他命令标签没有复制过程，如下面的 xml

```
<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Build" ToolsVersion="4.0"  xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

 <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
    <PostBuildEvent>
      <Command>sign "Loc" </Command>
     </PostBuildEvent>
 </ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|Win32'">
    <PostBuildEvent>
     <Command></Command>
     </PostBuildEvent>
  </ItemDefinitionGroup>
  <ItemDefinitionGroup Condition="'$(Configuration)|$(Platform)'=='Debug|x64'">
    <PostBuildEvent>
      <Command></Command>
     </PostBuildEvent>
 </ItemDefinitionGroup>
</Project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:44:58.993

使用 elementtree，尝试以下方式：

```
for tag in tree.findAll("Command"):
    tag.text = None 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T14:24:42.823

我只是扩展从stackoverflow获得的解决方案；我经常使用它...只需在“__main”函数中定义您的输入和输出 xmlfile 名称

```
from xml.etree import ElementTree as ET
import re

class ElementTreeHelper():
    def __init__(self, xml_file_name):
        xml_file = open(xml_file_name, "rb")
        self.__parse_xml_declaration(xml_file)
        self.element_tree = ET.parse(xml_file)
        xml_file.seek(0)
        root_tag_namespace = self.__root_tag_namespace(self.element_tree)
        self.namespace = None
        if root_tag_namespace is not None:
            self.namespace = '{' + root_tag_namespace + '}'
            ET.register_namespace('', root_tag_namespace)
            self.element_tree = ET.parse(xml_file)

    def find(self, xpath_query):
        return self.element_tree.find(xpath_query)

    def write(self, xml_file_name):
        xml_file = open(xml_file_name, "wb")
        if self.xml_declaration_line is not None:
            xml_file.write(self.xml_declaration_line + '\n')

        return self.element_tree.write(xml_file)

    def __parse_xml_declaration(self, xml_file):
        first_line = xml_file.readline().strip()
        if first_line.startswith('<?xml') and first_line.endswith('?>'):
            self.xml_declaration_line = first_line
        else:
            self.xml_declaration_line = None
        xml_file.seek(0)

    def __root_tag_namespace(self, element_tree):
        namespace_search = re.search('^{(\S+)}', element_tree.getroot().tag)
        if namespace_search is not None:
            return namespace_search.group(1)
        else:
            return None

def __main():
    el_tree_hlp = ElementTreeHelper('myxml.xml')

    for elem in el_tree_hlp.element_tree.iter():
        if elem.text and 'COPY' in elem.text:
            elem.text=None

    el_tree_hlp.write('myxml1.xml')

if __name__ == '__main__':
    __main() 
```

# android - 从 NFC 标签读取数据

> ID：12453658
> 
> 赞同：5
> 
> 时间：2012-09-17T05:41:10.467
> 
> 标签：android, nfc

您好我正在开发一个应用程序来读取和写入数据到 NFC 标签。我在从 NFC 标签读取数据时遇到问题。当我尝试读取数据时，我的应用程序第一次崩溃，当我第二次扫描标签时，应用程序读取数据。请帮我解决这个问题。这是我的代码。提前致谢。

```
public class Read extends Activity {

    Tag detectedTag;
    TextView txtType,txtSize,txtWrite,txtRead;
    NfcAdapter nfcAdapter;
    IntentFilter[] readTagFilters;
    PendingIntent pendingIntent;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
        setContentView(R.layout.read);
        getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.custom_title);

         nfcAdapter = NfcAdapter.getDefaultAdapter();
         detectedTag =getIntent().getParcelableExtra(NfcAdapter.EXTRA_TAG);
        txtType  = (TextView) findViewById(R.id.txtType);
        txtSize  = (TextView) findViewById(R.id.txtsize);
        txtWrite = (TextView) findViewById(R.id.txtwrite);
        txtRead  = (TextView) findViewById(R.id.txt_read);

        pendingIntent = PendingIntent.getActivity(getApplicationContext(), 0, 
                new Intent(this,getClass()).
                addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

        IntentFilter tagDetected = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
        IntentFilter filter2     = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
        readTagFilters = new IntentFilter[]{tagDetected,filter2};

    }

    protected void onNewIntent(Intent intent) {

        if(getIntent().getAction().equals(NfcAdapter.ACTION_TAG_DISCOVERED)){
            detectedTag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);

            readFromTag(getIntent());
        }
    }

@Override
    protected void onResume() {

        super.onResume();
        nfcAdapter.enableForegroundDispatch(this, pendingIntent, readTagFilters, null);
    }

    public void readFromTag(Intent intent){

        Ndef ndef = Ndef.get(detectedTag);

        try{
            ndef.connect();

            txtType.setText(ndef.getType().toString());
            txtSize.setText(String.valueOf(ndef.getMaxSize()));
            txtWrite.setText(ndef.isWritable() ? "True" : "False");
            Parcelable[] messages = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);

            if (messages != null) {
                NdefMessage[] ndefMessages = new NdefMessage[messages.length];
                for (int i = 0; i < messages.length; i++) {
                    ndefMessages[i] = (NdefMessage) messages[i];
                }
            NdefRecord record = ndefMessages[0].getRecords()[0];

            byte[] payload = record.getPayload();
            String text = new String(payload);
            txtRead.setText(text);

            ndef.close();

        }
        }
        catch (Exception e) {
            Toast.makeText(getApplicationContext(), "Cannot Read From Tag.", Toast.LENGTH_LONG).show();
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T10:48:32.377

onNewIntent() 方法中唯一缺少的行是 setIntent(intent); 我添加了它，代码运行良好。

# php - 如果我们在函数返回码之后有更多的编码语句会发生什么？

> ID：12453663
> 
> 赞同：1
> 
> 时间：2012-09-17T05:41:39.433
> 
> 标签：php

我有一个基本问题要问你们

我有 php 函数，它验证并为给定类型创建文件处理程序名称，

但是我只想知道以下代码是否转到其他代码，创建 guid 的下一行代码将被执行还是会被忽略？

```
private function fileFormat($type=false){

    if($type=='CreditCard')
        $prefix='CC-';
    elseif($type=='DirectDebit')
        $prefix='DD-';
    else 
        return false;   

    $date         = $prefix.'-'.date('d-m-Y', time());
    $guid         = '' . md5($date) . '.csv';
    return $guid;   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:42:39.203

他们将被忽略。语句之后的任何内容`return`都不会被执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:42:59.370

每当`return false`执行以下行时，都不会执行。但是，您必须确保在调用函数的地方可以 100% 区分返回值 from`return false`和 a`return $guid`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T05:43:14.703

执行 return 语句后不再执行任何行。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-17T05:43:24.547

只是它不会执行（*忽略*）以下行`return`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T05:43:37.583

该函数将返回，遇到的 return 语句之后的所有内容都不会执行。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-17T05:44:14.733

这个想法是将控制权返回给调用方法......所以这些行将永远不会执行。例如，如果您的 IDE 良好，则在返回后出现冗余语句时会收到警告，例如：

```
function PrintHelloWorld()
{
   if($userPresent)
   {
     echo "Hello World" ;
   }
   return "World empty!";
   $something = "blah" ; //redundant (will never execute)
   $something+="Blah" ; //redundant (will never execute) 
//A good IDE should give warnings. But you usually see them as grayed out
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-09-17T05:45:06.080

它们将被忽略，因为返回将由 else （默认）情况执行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-09-17T05:48:29.427

不要打死马，现在有很多答案都说明了同样的事情……但这是我的澄清。

a`return`被**执行**后，不会执行剩余的代码。您设置代码的方式很好，假设您希望在没有遇到`false`任何 s 的情况下返回。`$type`这是一个常见的控制流程，优于设置标志并在返回之前检查缺陷。

```
if ($myCondition_1) {
    $a = 1;
} elseif ($myCondition_2) {
    $a = 2;
} else {
    return False;
}
other_operation_on_a($a);
return $a; 
```

优于（对我而言）：

```
$a = False;
if ($myCondition_1) {
    $a = 1;
} elseif ($myCondition_2) {
    $a = 2;
} 
if ($a !== False) {
    other_operation_on_a($a);
}
return $a; 
```

# c# - 使用 EZconnect 时 TNS 侦听器的 Oracle 客户端问题 (ORA:12541)

> ID：12453664
> 
> 赞同：0
> 
> 时间：2012-09-17T05:41:43.417
> 
> 标签：c#, oracle, deployment

我已经安装了`Oracle 11g`, 之后`ODAC x64`和之后`ODAC x86`（以获取 ODT）并成功运行`Oracle 11g`并`Oracle Data Provider x64`用于我在后端使用 Oracle 的 C# 项目。

我使用`EZconnect`命名方法连接到 Oracle 数据库。[我按照Stackoverflow](http://www.stackoverflow.com)的一些部署说明，按照建议将 4 或 5 个 dll 复制到了可执行文件的目录中。

虽然目标机器上的程序也可以检测到`Oracle Data Provider`，`Oracle Client`但它给出了错误`ORA:12541 No TNS listener`。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:01:34.110

侦听器在数据库服务器上运行——您需要一个侦听器才能从任何远程客户端建立到数据库的连接。它与客户端配置以及如何配置客户端以解析 TNS 别名完全无关。

您确定侦听器正在运行并且您正在尝试连接到正确端口上的正确机器吗？该错误意味着您连接到错误的机器。您在错误的端口上连接，您指定了错误的服务名称，或者数据库的侦听器已关闭。前三个将是客户端配置中的错误。最后一个意味着问题出在服务器上。

# jquery - JQuery prevAll 不影响 a 内的元素

> ID：12453670
> 
> 赞同：-1
> 
> 时间：2012-09-17T05:42:18.463
> 
> 标签：jquery

[JSFIDDLE](http://jsfiddle.net/E9gTa/)

看看演示。为什么 prevall 不会影响`<select>`跨度内的内容？（或者，我怎样才能让它这样工作？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:45:37.933

```
$('.test').bind("propertychange keyup input paste", function(event){
    if ($(this).val() != '') {
        $(this).prevAll().find('select').attr('disabled', true);
    } else {
        $(this).prevAll().find('select').attr('disabled', false);
    }
}); 
```

***[演示](http://jsfiddle.net/E9gTa/4/)***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T05:46:45.137

你的第一个`select`是跨度，第二个不是`span`..我认为这是一个错字。

答案假设第二个`select`也在跨度中

```
$('.test').bind("propertychange keyup input paste", function(event){
    if ($(this).val() != '') {
        $(this).prev().find('select').attr('disabled', true);
    } else {
        $(this).prev().find('select').attr('disabled', false);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:47:02.353

这是因为，在第一种情况下，prevAll 返回前一个兄弟，在这种情况下，span 元素没有被禁用，但不是 select 元素。所以选择元素没有被禁用。在第二种情况下，选择元素被选中并禁用。要在第一种情况下工作，您应该在 span 元素中找到 select。

```
$(this).prevAll().find('select').attr('disabled', true); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T05:47:11.953

这是因为 prevAll 选择了“兄弟”，而“select”不是它的兄弟，“span”是。所以你可以使用“thecodeparadox”的建议。

# android - 在 android 4.0 中使用 Numberpicker 自定义 Listview

> ID：12453671
> 
> 赞同：1
> 
> 时间：2012-09-17T05:42:21.370
> 
> 标签：android, numberpicker

我需要以向竞争对手提供积分的概念开发一项任务。它必须动态完成。所以我选择了 NumberPicker 作为 Points 值。我需要列出数据库中的竞争对手，它将位于两个单独的列中，例如 Id 和 Name。

在运行时，我需要使用范围为 0-10 的 NumberPicker 来评估和放置点。

我需要从 NumberPicker 获取值到 Textview 并将值存储在我的数据库中

请帮我完成我的任务..

提前致谢

# python - py2app/Tkinter 应用程序错误：“不再支持经典环境”

> ID：12453675
> 
> 赞同：1
> 
> 时间：2012-09-17T05:42:44.210
> 
> 标签：python, numpy, tkinter, py2app

因此，我使用 Tkinter、py2app 和 numpy 创建了一个简单的 GUI 应用程序。当我在我的计算机上运行它时，它工作正常。但是，我在其他几台电脑上测试过，一直报错：“您无法打开应用程序，因为不再支持经典环境。” 我不确定我是否理解错误。其他计算机的 python 版本和操作系统版本和我一样吗？我需要做些什么才能让我的应用程序在其他机器上运行吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-17T19:44:59.450

把它从虚空中拉回来。

我遇到了类似的问题。我正在开发的 MAC 正在运行 10.8.Something。目标机器运行 10.6+，我遇到了`classic environment is no longer supported`错误。我查看了架构标志无济于事。我确实发现了我的问题。当通过电子邮件将 .app（拖放到 chrome 中的 gmail）发送给客户端时，文件大小仅为 1kb。在开发机器上，文件大小显示为 25Mb+。从电子邮件中提取这个 1kb 的文件并在开发机器上启动它，我也遇到了同样的错误。事实证明拖放是不够的。我成功压缩了 .app 并能够消除此错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T10:46:22.927

在 Mac 世界`classic environment`中是一个软件抽象层，它允许旧的 Mac 应用程序（例如 G5 硬件架构）在新的 Mac 架构（英特尔硬件架构）上执行。经典环境在`pre-10.5`Mac OS X 版本上得到支持，然后在较新的版本中被删除。

py2app 支持用于构建可执行文件以支持不同架构的命令行参数，请仔细查看`--arch`py2app 的参数。

# cuda - 更好还是相同：CPU memcpy() 与设备 cudaMemcpy() 在 CUDA 中的固定映射内存上？

> ID：12453677
> 
> 赞同：6
> 
> 时间：2012-09-17T05:42:55.513
> 
> 标签：cuda, memcpy

我有：

*   已使用`cudaHostAlloc(..., cudaHostAllocMapped)`or成功固定和映射的主机内存`cudaHostRegister(..., cudaHostRegisterMapped)`；
*   设备指针已使用`cudaHostGetDevicePointer(...)`.

我`cudaMemcpy(..., cudaMemcpyDeviceToDevice)`在 src 和 dest 设备指针上启动，它们指向通过上述技术获得的两个不同的固定+映射内存区域。一切正常。

*问题：我应该继续这样做还是只使用传统的 CPU 样式`memcpy()`，因为一切都在系统内存中？...或者它们是否**相同**（即当 src 和 dest 都固定时`cudaMemcpy`映射到直线）？`memcpy`*

（我仍在使用该`cudaMemcpy`方法，因为以前所有内容都在设备全局内存中，但由于 gmem 大小限制，后来切换到固定内存）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T10:44:12.757

使用`cudaMemcpy`CUDA 驱动程序检测到您正在从主机指针复制到主机指针，并且复制在 CPU 上完成。如果您愿意，您当然可以自己在 CPU 上使用 memcpy。

如果您使用`cudaMemcpy`，则在进行复制之前可能会执行额外的流同步（您可能会在分析器中看到，但我猜那里 - 测试并查看）。

在 UVA 系统上，您可以`cudaMemcpyDefault`按照 talonmies 在他的回答中所说的那样使用。但是如果您没有 UVA（sm_20+ 和 64 位操作系统），那么您必须调用正确的副本（例如`cudaMemcpyDeviceToDevice`）。如果您`cudaHostRegister()`感兴趣的所有内容`cudaMemcpyDeviceToDevice`最终将根据内存所在的位置执行以下操作：

*   Host <-> Host：由CPU执行（memcpy）
*   主机 <-> 设备：DMA（设备复制引擎）
*   设备 <-> 设备：Memcpy CUDA 内核（在 SM 上运行，由驱动程序启动）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T08:08:38.923

如果您正在使用 UVA（统一虚拟寻址）的平台上工作，我强烈建议您使用`cudaMemcpy`with `cudaMemcpyDefault`。这样一来，所有关于最快路径的手动操作都变成了您不必担心的内部 API 实现细节。

# linux - 脚本的 crontab

> ID：12453681
> 
> 赞同：0
> 
> 时间：2012-09-17T05:43:21.710
> 
> 标签：linux, shell, crontab

我的脚本在 /u01/software/aditya/script/ 目录下。脚本的名称是 myscript.sh。我也可以运行这个脚本并获得输出。我正在尝试在每天早上 6.30 为这个脚本设置一个 cronjob。我以 root 用户身份执行此操作。我已经完成了以下步骤，但没有得到输出。

```
crontab -e
30 06 * * * sh /u01/software/aditya/script/myscript.sh >> /u01/software/aditya/hello.log
:wq 
```

但在 hello.log 文件中没有得到任何更新 :( 。请帮助...。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:16:59.403

首先检查您的 cron 日志文件，该文件通常位于`/var/log/syslog`. 应该有类似的条目

```
Sep 17 06:30:01 localhost CRON[17725]: (root) CMD (sh /u01/software/aditya/script/myscript.sh >> /u01/software/aditya/hello.log) 
```

如果没有，您的脚本从未运行过。这可能是由于`crontab`文件损坏。您应该确保此文件始终以*换行符结尾*，最好在末尾插入多个，以免意外删除一个不会破坏文件。

如果日志文件中存在此行，则您的脚本已运行，但未生成任何输出。这可能是由于通过运行时不同的环境而发生的`cron`。

另请注意，`>>`仅重定向*stdout*，而不重定向*stderr*。如果您也想重定向*stderr*`2>&1` ，请在行尾添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-03T22:29:35.803

通常这是由`PATH`问题引起的。很有可能调用cron 运行时`myscript.sh`不可用的命令。`PATH`解决此问题的一些选项是：

*   确保每个命令`myscript.sh`都是完整的路径引用（乏味）
*   添加`source ~/.bashrc`到顶部`myscript.sh`
*   添加`export PATH=$PATH:<colon delimited list of paths necessary for myscript.sh to run correctly>`

选择上述之一，或者您也可以在此处选择一个选项：[Hourly cron job did not run](https://stackoverflow.com/questions/12453432/hourly-cron-job-did-not-run)

# asp.net - 在 Asp.net 中的 Listview 中将数据绑定到标题模板

> ID：12453683
> 
> 赞同：4
> 
> 时间：2012-09-17T05:43:24.377
> 
> 标签：asp.net

我想在标题中显示一些详细信息，例如 Name, Lic.# ，这是唯一的，并且对于特定的 Listview 不重复。反正有没有显示这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T14:14:10.040

您可以为要在布局中显示的数据引入页面属性，从 ItemDataBound 事件处理程序中的第一行 dataItem 获取它们，并在 ListView 的 DataBound 事件处理程序中绑定布局控件：

```
<asp:ListView ID="ListView1" runat="server" DataKeyNames="job_id" DataSourceID="SqlDataSource1">
          <LayoutTemplate>
               <table>
                    <thead>
                         <tr runat="server" id="headerRow">
                              <th>
                                   <%# FirstHeaderText %></th>
                              <th>
                                   <%# SecondHeaderText  %>
                              </th>
                         </tr>
                    </thead>
                    <tbody>
                         <tr runat="server" id="itemPlaceholder" />
                    </tbody>
               </table>
          </LayoutTemplate>
          <ItemTemplate>
               <tr>
                    <td>
                         <%# Eval("job_id")%></td>
                    <td>
                         <%# Eval("job_desc")%></td>
               </tr>
          </ItemTemplate>
     </asp:ListView>
     <asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:PUBSConnectionString %>"
          SelectCommand="SELECT [job_id], [job_desc] FROM [jobs]"></asp:SqlDataSource> 
```

服务器代码：

```
protected string FirstHeaderText
{
    get { return ViewState["FirstHeaderText"] as string; }
    set { ViewState["FirstHeaderText"] = value; }
}
protected string SecondHeaderText
{
    get { return ViewState["SecondHeaderText"] as string; }
    set { ViewState["SecondHeaderText"] = value; }
}

protected void Page_Init(object sender, EventArgs e)
{
    ListView1.ItemDataBound += new EventHandler<ListViewItemEventArgs>(ListView1_ItemDataBound);
    ListView1.DataBound += new EventHandler(ListView1_DataBound);
}

void ListView1_DataBound(object sender, EventArgs e)
{
    ((HtmlTableRow)ListView1.FindControl("headerRow")).DataBind();
}

void ListView1_ItemDataBound(object sender, ListViewItemEventArgs e)
{
    if (string.IsNullOrEmpty(FirstHeaderText) && e.Item.ItemType == ListViewItemType.DataItem)
    {
        var dataRow = e.Item.DataItem as DataRowView;
        FirstHeaderText = dataRow["job_id"].ToString();
        SecondHeaderText = dataRow["job_desc"].ToString();
    }
} 
```

另一个可用的决定是将标题部分放入 itemTemplate 但仅在第一条记录中显示：

```
<asp:ListView ID="ListView1" runat="server" DataKeyNames="job_id" DataSourceID="SqlDataSource1">
     <LayoutTemplate>
          <table>
               <asp:PlaceHolder runat="server" ID="itemPlaceholder" />
          </table>
     </LayoutTemplate>
     <ItemTemplate>
          <tr runat="server" visible='<%# (int)DataBinder.Eval(Container, "DataItemIndex") == 0 %>'>
               <th>
                    <%# Eval("job_id")%></th>
               <th>
                    <%# Eval("job_desc")%></th>
          </tr>
          <tr>
               <td>
                    <%# Eval("job_id")%></td>
               <td>
                    <%# Eval("job_desc")%></td>
          </tr>
     </ItemTemplate>
</asp:ListView> 
```

# javascript - 如何正确记录通过 Object.defineProperties 添加的实例成员？

> ID：12453686
> 
> 赞同：5
> 
> 时间：2012-09-17T05:43:39.810
> 
> 标签：javascript, jsdoc

我有一个通过定义一些实例属性的类，`Object.defineProperties`我很难让[JSDoc 3](https://github.com/jsdoc3/jsdoc)识别它们属于他们的类。

这是我正在使用的简化版本：

```
/** @exports mymodule */
function mymodule(exports) {
    /** @constructor
      * @param {String} foo A foo.
      * @param {String} bar A bar.
      * @classdesc Has a foo and a bar.
      */
    function Example(foo, bar) {
        Object.defineProperties(this, {
            /** A foo and a bar
              * @memberof Example
              */
            foobar: { enumerable: false, value: foo + bar, writable: false }
        });
    }

    exports.Example = Example;
} 
```

当我运行 JSDoc 时，我得到了`mymodule`、`Example`、`foo`和的输出`bar`，但没有得到`foobar`。如果我删除 的`@memberof`标签`foobar`，它将被注册为全局。我已经尝试过`@memberof mymmodule~Example`，添加`@lends`到`Object.defineProperties`调用和传递给它的对象，并将其转换为`Object.defineProperty`，但结果没有改变。

我怎样才能证明`foobar`属于`Example`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-18T15:30:12.660

在挖掘了我能找到的每个示例之后，我终于组装了必要的咒语——`@memberof`确实是诀窍，但 JSDoc 似乎要求在名称路径中使用的模块必须明确标记为这样。以下工作完美：

```
/** A foo and a bar
  *
  * @type String
  * @instance
  * @memberof module:mymodule~Example
  */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-29T09:32:35.163

您也可以尝试使用@lends 注释代替@memberOf，如下所示：

```
Object.defineProperties(this, /** @lends Example# */{
    /** A foo and a bar */
    foobar: { enumerable: false, value: foo + bar, writable: false }
}); 
```

不要忘记类名后面的尖符号告诉 jsdoc 成员是实例成员而不是静态成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T15:00:51.470

在摆弄了几个小时后，我终于可以使用它了`@memberOf!`。注意大写的“O”和爆炸“！”

```
/**
 * Description
 * @memberOf! MyClass
 * @type {String}
 */
var myString; 
```

# php - php脚本发送带有文件附件的邮件

> ID：12453687
> 
> 赞同：1
> 
> 时间：2012-09-17T05:43:58.713
> 
> 标签：php, javascript, html, forms, email

我在这里有一个 HTML 表单，我可以在其中选择上传文件，然后通过电子邮件将其发送给我。我已经有一个下面给出的 php 脚本，它通过电子邮件发送文本框值和文本区域值等。

现在我想要的是，我希望表格中上传的文件通过电子邮件作为附件接收给我，我将在其中收到表格的其余部分。

```
contactform.html

<form id="contact form" name="form1" enctype="multipart/form-data" method="post" action="contactformprocess.php">
  <p>
    <label for="name">Name:</label>
    <input type="text" name="name" id="name" />
  </p>
  <p>
    <label for="email">Email:</label>
    <input type="text" name="email" id="email" />
  </p>
  <p>
    <label for="message">Message:</label>
    <textarea name="message" id="message" cols="45" rows="5"></textarea>
  </p>
  <p>
    <label for="fileupload">Upload your file:</label>
    <input type="file" name="fileupload" id="fileupload" />
  </p>
  <p>
    <input type="submit" name="submit" id="submit" value="Submit" />
  </p>
</form> 
```

和php脚本

```
contactformprocess.php

<?php

/* Subject and Email Variables */

    $emailSubject = 'Contact Form';
    $webMaster = 'me@myemail.com';

/* Gathering Data Variables */

    $name = $_POST['name'];
    $email = $_POST['email'];
    $question = $_POST['message'];

    $body = <<<EOD
<br><hr><br>
Name: $name <br>
Email: $email <br>
Message: $message <br>
EOD;

    $headers = "From: $email\r\n";
    $headers .= "Content-type: text/html\r\n";
    $success = mail($webMaster, $emailSubject, $body, $headers);

/* Results rendered as HTML */

    $theResults = <<<EOD
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Confirmation Page</title>
<style type="text/css">
.header {
    font-family: Trebuchet MS, Arial, Helvetica, sans-serif;
}
</style>
</head>

<body>
<table width="100%" border="0">
  <tr>
    <td bgcolor="#adbe69" class="header"><strong>Confirmation Page</strong></td>
  </tr>
</table>
<table width="100%" border="0" align="left">
  <tr>
    <td><p align="center">Thank You!</p>
    <p align="center">Your Form is Submitted Succesfully,</p>
    <p align="center">You will recieve an email within 24 to 48 hours regarding your message,</p>
    </td>
  </tr>
</table>
</body>
</html>
EOD;
echo "$theResults";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:48:15.377

并不是说我会推荐使用 php 脚本来发送带有附件的邮件（而是提供一个下载链接并将文档存储在服务器上以便检索邮件目标）

看看这里：[http ://webcheatsheet.com/php/send_email_text_html_attachment.php#attachment](http://webcheatsheet.com/php/send_email_text_html_attachment.php#attachment)

检索附件的部分如下所示：

```
$attachment = chunk_split(base64_encode(file_get_contents('attachment.zip'))); 
```

您将不得不使用服务器（php-）上传目录中的临时文件而不是附件.zip

# cuda - 如何在 cuda 中将向量类型值设置为固定内存

> ID：12453691
> 
> 赞同：6
> 
> 时间：2012-09-17T05:44:20.923
> 
> 标签：cuda

我对制作固定记忆有疑问。

现在我正在使用 CUDA 来处理大量数据。

为了减少运行时间，我发现有必要使内存复制和内核启动重叠。

在搜索了一些文本和网页，重叠内存复制和内核启动后，我注意到有必要使用 cudaMallocHost 分配主机内存，它将主机内存分配给固定内存。
在主机上使用整数或数组类型的情况下，很容易制作固定内存。

像这样...

```
cudaStream_t* streams = (cudaStream_t*)malloc(MAX_num_stream * sizeof(cudaStream_t));
for(i=0; i<MAX_num_stream; i++)
    cudaStreamCreate(&(streams[i]));

cudaMallocHost(&departure, its_size);

for(n=1; ... ; n++){
   cudaMemcpyAsync( ... streams[n]);
   kernel <<< ... , ... , ... , streams[n] >>> (...);
} 
```

但在我的情况下，我的主机离开内存是由变频器类型设置的。

而且我在任何地方都找不到通过使用 cudaMallocHost 将向量类型主机内存转换为固定内存的方法。

帮助我或提供一些建议来解决这个问题。感谢您阅读我蹩脚的英语。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T08:01:18.130

直接而言，您不能使用`cudaMallocHost`.

如果你*真的*需要一个`std::vector`使用固定内存的，你将不得不实现你自己的内部`std::allocator`调用模型并使用该自定义分配器`cudaMallocHost`实例化你。`std::vector`

或者，[推力模板库](http://thrust.github.com/)（在最新版本的 CUDA 工具包中提供）包括一个实验性固定内存分配器，您可以将其与推力自己的向量类一起使用，它本身就是`std::vector`.

# jquery - 无限滚动插件使用自定义查询修改路径

> ID：12453694
> 
> 赞同：5
> 
> 时间：2012-09-17T05:44:47.027
> 
> 标签：jquery, scroll, jquery-isotope, infinite-scroll, infinite

我正在使用带有 jQ​​uery isotope 的无限滚动插件 ( [infinite-scroll](https://github.com/paulirish/infinite-scroll) )，并且想知道当用户向下滚动页面以查看更多项目时，是否可以使用自定义查询参数修改路径。

有没有办法访问路径并修改其中一个查询参数。它第一次到达路径 ok 返回第一组项目，然后它到达下一页 1,2 3 ok 但使用我第一次使用的相同查询参数只更新页码。

我想在点击第 3 页或第 4 页时修改其中一个参数，如下所示：

```
var customPath = path + "?type=items&category=clothes&pageNumber="; 
```

我是以错误的方式接近这个吗？

这是我的代码：

```
$container.infinitescroll({
    navSelector: '#page_nav', // selector for the paged navigation 
    nextSelector: '#page_nav a', // selector for the NEXT link (to page 2)
    itemSelector: '.element', // selector for all items you'll retrieve
    loading: {
        finishedMsg: 'No more categories to load.',
        msgText: "<em>Loading the next set of categories...</em>",
        img: 'http://i.imgur.com/qkKy8.gif'
    },
    pathParse: function (path, nextPage) {
        var customPath = path + "?type=items&category=all&pageNumber=";
        path = [customPath, '#contaner'];
        return path;
    }
},
// call Isotope as a callback
function (newElements) {
    $container.isotope('appended', $(newElements));
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T22:11:21.747

好的，所以我不得不做一些小技巧，但由于 Rich 向我指出了相关问题，我让它满足了我的需要。

我在这里为 jquery.infinitescroll.js 原型添加了一些额外的属性：

```
//line 67
 $.infinitescroll.prototype = {
       //My custom parameters
        pageType: "&type=items",
        categoryParam: "&category=shoes",
        /*  
            ----------------------------
            Private methods
            ----------------------------
            */ 
```

然后在函数内部调用：

```
retrieve: function infscr_retrieve(pageNum) {} 
```

有一个变量：

```
desturl = path.join(opts.state.currPage) 
```

将其更改为

```
desturl = path.join(opts.state.currPage + $.infinitescroll.prototype.pageType + $.infinitescroll.prototype.categoryParam); 
```

这将在 desturl 的末尾添加您的其他查询参数。

然后从你拥有 JavaScript 的页面中，你可以执行以下操作：

```
$('#filters a').click(function () {
    $.infinitescroll.prototype.pageType = "&type=products" ;                  
    $.infinitescroll.prototype.pageType = "&category=clothes";                           
     return false;
}); 
```

这将使用您的自定义查询更新下一页的查询参数。

希望这会对某人有所帮助。

# php - PHP preg_match_all() 在正则表达式中返回动态字符串

> ID：12453695
> 
> 赞同：0
> 
> 时间：2012-09-17T05:44:49.243
> 
> 标签：php, regex, preg-match-all

我正在使用`PHP`和正则表达式来查找：

```
preg_match_all('/\{\{include:[a-zA-Z0-9_]{25}\}\}/i', $content, $include_matches, PREG_PATTERN_ORDER); 
```

根据 PHP 文档，`$include_matches`应该给我原始字符串，以及括号内的结果（PREG_PATTERN_ORDER 标志），正是我想要的。问题是结果是：

```
Array
(
    [0] => Array
        (
            [0] => {{include:rec_ih6tk504c23dfdf4a3qqK}}
        )
 ) 
```

我希望结果是：

```
Array
(
    [0] => Array
        (
            [0] => rec_ih6tk504c23dfdf4a3qqK
        )
 ) 
```

知道我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T05:46:49.007

只需使用：

```
preg_match_all('/\{\{include:([a-zA-Z0-9_]{25})\}\}/', $content, $include_matches, PREG_PATTERN_ORDER);
$include_matches= $include_matches[1]; 
```

你必须插入一个捕获组

# c# - WinForm：为 InitializeComponent 方法加载表单

> ID：12453700
> 
> 赞同：1
> 
> 时间：2012-09-17T05:45:15.147
> 
> 标签：c#, winforms, .net-2.0, biometrics

我们有一个用于指纹扫描的 Windows 窗体应用程序，用于保持**时间，仅初始化指纹扫描控件就需要花费太多时间**，大约 5 到 10 分钟。所以我们需要创建一个加载表单，让用户知道应用程序没有挂起，他们需要等待，但是长时间运行的原因是`InitializeComponent()`在表单初始化的方法内部。

我的问题是，如何将`InitializeComponent()`方法移动到另一个线程，以便在初始化生物识别扫描仪控件所在的表单时显示加载表单，因为它在从主线程以外的另一个线程访问 UI 控件时会产生错误?

我的代码在 C#、Framework 2.0 中，在 Visual Studio 2008 中构建。

请帮助，提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:51:48.660

您可以从可视化设计器中删除指纹扫描控件，并使用额外的后台线程从代码中创建此控件，并在此过程中写入进度信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:53:23.953

SO有很多关于它的数据：

[如何从 C# 中的另一个线程更新 GUI？](https://stackoverflow.com/questions/661561/how-to-update-gui-from-another-thread-in-c)

[在线程中访问 UI](https://stackoverflow.com/questions/709187/accessing-ui-in-a-thread)

[调用任何跨线程代码的最佳方式？](https://stackoverflow.com/questions/711408/best-way-to-invoke-any-cross-threaded-code)

你可以找到更多。

如果仍然需要帮助，请发表评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T05:54:13.103

您可以在 中找到您的`InitializeCompoent();`方法`yourForm.designer.cs`，然后您可以从那里修改它。

# objective-c - 为什么这段代码有时能工作，但有时不能？

> ID：12453704
> 
> 赞同：-1
> 
> 时间：2012-09-17T05:46:10.457
> 
> 标签：objective-c, camera, uiimagepickercontroller, avcapturesession

我在我的应用程序中创建了一个类似“镜子”的视图，它使用前置摄像头向用户显示“镜子”。我遇到的问题是我已经好几周没有接触过这段代码了（当时它确实有效），但现在我再次对其进行测试，但它不起作用。代码和之前一样，没有报错，storyboard中的view和之前一模一样。我不知道发生了什么，所以我希望这个网站会有所帮助。

这是我的代码：

```
if([UIImagePickerController isCameraDeviceAvailable:UIImagePickerControllerCameraDeviceFront]) {
        //If the front camera is available, show the camera

        AVCaptureSession *session = [[AVCaptureSession alloc] init];
        AVCaptureOutput *output = [[AVCaptureStillImageOutput alloc] init];
        [session addOutput:output];

        //Setup camera input
        NSArray *possibleDevices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];
        //You could check for front or back camera here, but for simplicity just grab the first device
        AVCaptureDevice *device = [possibleDevices objectAtIndex:1];
        NSError *error = nil;
        // create an input and add it to the session
        AVCaptureDeviceInput* input = [AVCaptureDeviceInput deviceInputWithDevice:device error:&error]; //Handle errors

        //set the session preset
        session.sessionPreset = AVCaptureSessionPresetHigh; //Or other preset supported by the input device
        [session addInput:input];

        AVCaptureVideoPreviewLayer *previewLayer = [AVCaptureVideoPreviewLayer layerWithSession:session];
        //Now you can add this layer to a view of your view controller
        [cameraView.layer addSublayer:previewLayer];
        previewLayer.frame = self.cameraView.bounds;
        [session startRunning];
        if ([session isRunning]) {
            NSLog(@"The session is running");
        }
        if ([session isInterrupted]) {
            NSLog(@"The session has been interupted");
        }

    } else {
        //Tell the user they don't have a front facing camera
    } 
```

提前谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T05:50:24.913

不确定这是否是问题，但您的代码和注释之间存在不一致。不一致之处在于以下代码行：

```
AVCaptureDevice *device = [possibleDevices objectAtIndex:1]; 
```

在上面的评论中它说：“......为简单起见，只需抓住第一个设备”。但是，代码正在抓取第二个设备，`NSArray`从 0 开始索引。我认为应该更正注释，因为我认为您假设前置摄像头将是阵列中的第二个设备。

如果您假设第一个设备是后置摄像头，第二个设备是前置摄像头，那么这是一个危险的假设。`possibleDevices`检查前置摄像头设备的列表会更安全，也更适合未来。

以下代码将枚举列表`possibleDevices`并`input`使用前置摄像头创建。

```
// Find the front camera and create an input and add it to the session
AVCaptureDeviceInput* input = nil;

for(AVCaptureDevice *device in possibleDevices) {
    if ([device position] == AVCaptureDevicePositionFront) {
        NSError *error = nil;

        input = [AVCaptureDeviceInput deviceInputWithDevice:device 
                                                      error:&error]; //Handle errors
        break;
    }
} 
```

**更新**：我刚刚将问题中的代码完全剪切并粘贴到一个简单的项目中，它对我来说工作正常。我正在观看来自前置摄像头的视频。您可能应该在其他地方寻找问题。首先，我倾向于检查`cameraView`相关层。

# c# - 如何找出 C# 中的单击事件中按下的键是什么？

> ID：12453708
> 
> 赞同：1
> 
> 时间：2012-09-17T05:46:48.690
> 
> 标签：c#, winforms, datagridview

我正在尝试查看是否在单元格双击事件（或者可能是任何其他事件，而不是基于键的事件，例如 Key_Up 或 Key_Down 等）中按下了键或修饰符，例如 ALT、CTRL 等。我如何在 C# 中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:52:10.290

如果您参考，您可以查看以下内容`System.Windows.Input`

```
if (Keyboard.Modifiers == ModifierKeys.Shift) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:50:57.553

看看这个：（对不起）

检查 MSDN 的`Keyboard.Modifiers`静态属性...

德语：http: [//msdn.microsoft.com/de-de/library/system.windows.input.keyboard.modifiers.aspx](http://msdn.microsoft.com/de-de/library/system.windows.input.keyboard.modifiers.aspx)

英文：http: [//msdn.microsoft.com/en-en/library/system.windows.input.keyboard.modifiers.aspx](http://msdn.microsoft.com/en-en/library/system.windows.input.keyboard.modifiers.aspx)

# android - ViewPager 项的延迟加载数据

> ID：12453710
> 
> 赞同：1
> 
> 时间：2012-09-17T05:47:01.080
> 
> 标签：android, android-fragments, android-viewpager

我有一个`Fragment`包含 a 的`ViewPager`，现在`ViewPager`包含 3 个不同的项目，即每个项目（页面）都包含 a`ListView`并且每个列表都拥有它`Adapter`，我不能使用`FragmentPagerAdapter`

正弦`ViewPager`生活在一个`Fragment`。

我应该加载所有三个`ListViews`数据`Fragment`并将其传递给`PagerAdapter`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-22T12:39:05.073

```
 public  abstract class BaseLazyFragment extends Fragment {

    protected boolean isVisible;

    /**
     * to judge if is visible to user 
     * @param isVisibleToUser
     */
    @Override
    public void setUserVisibleHint(boolean isVisibleToUser) {
        super.setUserVisibleHint(isVisibleToUser);

        if(getUserVisibleHint()) {
            this.isVisible = true;
            onVisible();
        } else {
            this.isVisible = false;
            onInvisible();
        }

    }

    /**
     * when the  fragment is not visible to user 
     */
    protected void onInvisible() {
        Loggy.e("do  onInvisible");
    }

    /**
     * when the fragment is visible to user 
     * 
     * lazyload
     */
    protected void onVisible() {
        Loggy.e("do  onVisible---");
        lazyLoad();
    }

    protected abstract void lazyLoad();

    } 
```

*然后您可以创建一个客户片段扩展 BaseLazyFragment 例如*

```
 public class NewsFragment extends BaseLazyFragment {

    private boolean isPrepared; 
    //a flag to judge init action has finished

    @Nullable
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.fragment_news_page,null);

        //do init

        // when init is finish , set flag true;
        isPrepared = true;

        lazyLoad();

        return view;
    }

    @Override
    protected void lazyLoad() {

         // according this judge, can prevent nullpointerexception 
        if(!isPrepared || !isVisible){
            return;
        }

        // assignment the view 
        // get data from network assignment to varible
    }
} 
```

> 设置用户可见提示（）

片段创建时 setUserVisibleHint() 方法第一次比 onCreateView() 头，所以由于 oncreateView() 没有被调用，所以lazyLoad() 方法可能会抛出 NullPointerException，所以你应该创建一个标志变量 --> isPrepared。

> onCreateView()

[参考链接](http://www.jcodecraeer.com/a/anzhuokaifa/androidkaifa/2014/1021/1813.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-19T09:05:09.083

实际上，这取决于您要加载的数据有多大？

如果它很大，请尝试下载 ie。每页 10 个项目，并将该数据传递给适配器并缓存它。之后，实施惰性加载器（例如在 google play 应用程序中），它会为您的正确页面下载下一个项目，而不是全部。

所以你所有的三个页面都会在第一次加载时显示数据，如果用户想要更多，他可以导航到列表底部，按“加载更多”并获取更多项目:)

根据我的经验，这个解决方案效果很好。当然这种加载器应该采用服务器端。

还有更多的考虑，即。也许您的数据“非常活跃”。所以你必须考虑一下。

# android - AchartEngine 简单动画

> ID：12453718
> 
> 赞同：3
> 
> 时间：2012-09-17T05:47:28.273
> 
> 标签：android, android-layout, animation, android-animation, achartengine

是否可以使用 achartengine 库来制作它，以便在绘制图表时使它看起来像动画一样，就像从屏幕底部缓慢向上移动生成的柱形图列一样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T10:14:03.357

您可以拥有动态图表，这意味着您在运行时添加数据然后更新图表，但您不能在 AChartEngine 中拥有动画，因为它是开箱即用的。

# wpf - 如何在 WPF DataGrid Header 的左侧放置一个控件？

> ID：12453719
> 
> 赞同：1
> 
> 时间：2012-09-17T05:47:30.837
> 
> 标签：wpf, wpfdatagrid

我需要在 WPFDataGrid 标题的左侧放置一个菜单，我不想使用 ColumnHeaderStyle 将此菜单放在每个列标题上，只在左侧一次。这可能吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:26:51.997

好吧，谢谢混合！

```
<Style x:Key="DataGridStyle" TargetType="{x:Type DataGrid}">
    <Setter Property="Template" Value="{DynamicResource DataGridControlTemplate1}"/>
</Style>
<ControlTemplate x:Key="DataGridControlTemplate1" TargetType="{x:Type DataGrid}">
    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
        <ScrollViewer x:Name="DG_ScrollViewer" Focusable="false">
            <ScrollViewer.Template>
                <ControlTemplate TargetType="{x:Type ScrollViewer}">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <"YourControls"   Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.All}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" Grid.Column="1">
                        <DataGridColumnHeadersPresenter x:Name="PART_ColumnHeadersPresenter" Grid.Column="1" Visibility="{Binding HeadersVisibility, ConverterParameter={x:Static DataGridHeadersVisibility.Column}, Converter={x:Static DataGrid.HeadersVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}" d:IsLocked="True"/>
                        <ScrollContentPresenter x:Name="PART_ScrollContentPresenter" CanContentScroll="{TemplateBinding CanContentScroll}" Grid.ColumnSpan="2" Grid.Row="1" d:IsLocked="True"/>
                        <ScrollBar x:Name="PART_VerticalScrollBar" Grid.Column="2" Maximum="{TemplateBinding ScrollableHeight}" Orientation="Vertical" Grid.Row="1" Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}" Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportHeight}" d:IsLocked="True"/>
                        <Grid Grid.Column="1" Grid.Row="2" d:IsLocked="True">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="{Binding NonFrozenColumnsViewportHorizontalOffset, RelativeSource={RelativeSource AncestorType={x:Type DataGrid}}}"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <ScrollBar x:Name="PART_HorizontalScrollBar" Grid.Column="1" Maximum="{TemplateBinding ScrollableWidth}" Orientation="Horizontal" Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}" ViewportSize="{TemplateBinding ViewportWidth}" d:IsLocked="True"/>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </ScrollViewer.Template>
            <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
        </ScrollViewer>
    </Border>
</ControlTemplate> 
```

和

```
 <DataGridStyle="{StaticResource DataGridStyle1}".../> 
```

# hibernate - 删除而不是在单个事务问题中同时保存批量数据

> ID：12453720
> 
> 赞同：2
> 
> 时间：2012-09-17T05:47:31.330
> 
> 标签：hibernate, transactions

我有两个清单。第一个列表包含要保存的数据，第二个列表包含要删除的数据。我需要执行批量删除，而不是需要在单个事务中保存批量插入。以下是我用来执行这些操作的代码：

```
public void bulkSaveDeleteOperation(final List<Person> personList, 
        final List<Person> duplicatePersonList) {
    Session session = getHibernateTemplate().getSessionFactory().getCurrentSession();
    session.beginTransaction();
    try {
        //delete operation
        if (duplicatePersonList != null) {
            Integer deleteCounter = 0;
            for (Person cp : duplicatePersonList) {
                session.delete(cp);
                deleteCounter++;
                if (deleteCounter % 20 == 0) {
                    session.flush();
                    session.clear();
                }
            }
        }
        //save operation
        if (personList != null) {
            Integer saveCounter = 0;
            for (Person cp : personList) {
                session.saveOrUpdate(cp);
                saveCounter++;
                if (saveCounter % 20 == 0) {
                    session.flush();
                    session.clear();
                }
            }
        }
        session.getTransaction().commit();
    } catch (Exception e) {
    }
} 
```

现在的问题是，要保存的列表中的数据（即（personList））在最终提交中成功插入到数据库中，但要删除的列表中的数据（即（duplicatePersonList））不会被删除。删除和插入操作都命中数据库中的同一个表。所以，这里有什么问题，我不知道。

# android - 如何从 createPackageContext 方法中删除上下文实例？

> ID：12453722
> 
> 赞同：3
> 
> 时间：2012-09-17T05:47:49.553
> 
> 标签：android, classloader, android-context

如何从`createPackageContext()`方法中删除上下文实例？

我使用了下面的代码：

```
context = _context.createPackageContext(package, Context.CONTEXT_INCLUDE_CODE | Context.CONTEXT_IGNORE_SECURITY); 
klass = Class.forName(classpath, true, context.getClassLoader()); 
instance = klass.getMethod(FACTORY_METHOD_NAME, Context.class).invoke(klass, context); 
```

我想删除包含上下文的资源和代码的“上下文”实例。

# java - JAX-WS 生成的模式版本

> ID：12453724
> 
> 赞同：1
> 
> 时间：2012-09-17T05:47:59.787
> 
> 标签：java, jax-ws

我正在使用 JAX-WS (Metro 2.0) 在 NetBeans 中生成 Web 服务。它生成 WSDL 和 xsd 模式。生成的模式如下所示：

```
<xs:schema version="1.0" targetNamespace="http://s.portal.org">
...
</xs:schema> 
```

有没有办法通过配置或绑定设置自定义模式版本？

```
<xs:schema version="2.3.4" targetNamespace="http://s.portal.org">
...
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:27:57.890

似乎`version="1.0"`在 xml 生成器中是硬编码的，不能按照我想要的方式进行更改。所以我最终得到了这个算法：

1.  使用 wsgen 工具生成 wsdl 和 xsd。
2.  在 wsdl/xsd 中更改您需要的任何内容（在我的情况下为版本属性）。
3.  `wsdlLocation`通过注释参数将wsdl 和 xsd 模式链接到 SEI 类`@WebService`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:05:18.727

你试过`@Version`注释吗？我知道它来自`javax.persistance`...

# visual-studio-2008 - 在固定代码应用程序中更改语言的最简单方法是什么？

> ID：12453725
> 
> 赞同：0
> 
> 时间：2012-09-17T05:48:09.627
> 
> 标签：visual-studio-2008

Visual Studio 可以列出应用程序（win 应用程序）中的所有固定消息并显示我以编辑另一种语言吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:59:21.647

我觉得不是。

您可以将所有消息放在一个文件中，并在需要时在一个位置进行编辑。

但是，我认为您正在谈论本地化，此链接可以提供帮助：[如何在 C# 中使用本地化](https://stackoverflow.com/questions/1142802/how-to-use-localization-in-c-sharp)

# android - 在评级栏上设置浮动值，如 1.2

> ID：12453726
> 
> 赞同：0
> 
> 时间：2012-09-17T05:48:11.487
> 
> 标签：android

我如何在评分栏上设置 1.2 评分。如果我设置 rating.setRating(1.2f) 那么我无法在评级栏上设置 1.2 值，那么它不会在评级栏上显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:50:20.763

你试试这个。

```
float ratingValue = 1.5f;
myRatingBar.setRating(ratingValue); // to set rating value
myRatingBar.setStepSize(ratingValue);// to show to stars 
```

[有关更多详细信息，请查看本教程](http://a2zandroidtutorials.blogspot.in/2012/07/rating-bar-events.html)。

**编辑：**设置此评级栏的步长（粒度）。此评级栏的步长。例如，如果需要半星粒度，则为 0.5。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:27:57.570

您可以像 1.2 一样设置评分栏上的值，因为如果评分栏为 0.1 ，则必须设置步长。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T05:50:32.753

尝试像这样以编程方式修复值：

```
float ratingValue = 1.5f;
myRatingBar.setRating(ratingValue); // to set rating value
myRatingBar.setStepSize(ratingValue); // to show to stars 
```

# iphone - FB Graph API - 评论 - 在 UIWebView

> ID：12453727
> 
> 赞同：1
> 
> 时间：2012-09-17T05:48:14.090
> 
> 标签：iphone, ios, facebook, facebook-graph-api, facebook-comments

我有[来自这里](https://graph.facebook.com/35819517694_10151061675702695/comments?access_token=xyz)的 FB 评论- 。使用的标准方法是什么，在 iOS 中显示（可能是 UIWebView）？我想要 FB 评论的网络或移动视图（像[这样](https://fbcdn-sphotos-e-a.akamaihd.net/hphotos-ak-ash4/384492_307851252589634_1222763805_n.jpg)），比如评论框插件。但是评论插件可能需要一些我没有的网络设置。如何在我的应用中显示评论？我知道我可以解析和使用 Graph API 并手动显示它，但我需要标准的方式，查看。

# iframe - 隐藏来自 IFRAME 的 Facebook Like Box 内容

> ID：12453731
> 
> 赞同：2
> 
> 时间：2012-09-17T05:48:24.637
> 
> 标签：iframe, facebook-iframe

![我只需要隐藏高亮部分。](../Images/4876029ba638ccb5e7adce703fe1874f.png)

我在我的主页中使用来自 iframe 的 Facebook 'Like Box'。但我想要的是需要隐藏或删除图像中提到的突出显示部分。

请尽快帮助我。我真的需要它。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-15T14:46:23.910

从我所看到的情况来看，Facebook 不允许您再这样做了，但是通过一点 HTML 和 CSS，我已经能够删除顶部栏和底部栏。尝试这个：

1.  将外部 div 包裹在 div`fb-like-box`周围
2.  将外部 div 的高度和宽度设置为您希望在提要中看到的内容
3.  将`fb-like-box`div 的高度设置为高于外部 div 的高度
4.  `margin-top:-71px`在 fb-like-box div 上设置
5.  `overflow-y: hidden`在外部 div 上设置

这应该隐藏外部 div 上方的页眉和下方的页脚。下面的例子。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=123456789101112";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
<div style="width:275px;height:242px;border:solid 1px #b28b2e;overflow-y:hidden;">
    <div class="fb-like-box" data-href="http://www.facebook.com/myfacebookpage" data-width="275" data-height="338" data-show-faces="false" data-stream="true" data-header="false" data-force-wall="true" style="margin-top:-71px;"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T06:01:05.123

由于同源限制，您无法触摸 iframe 中的内容，并且 Facebook 不会将该部分设为可选（Like Box 要求 Like 按钮始终显示）。

您可能会使用 Activity Feed 插件获得所需的结果：[https ://developers.facebook.com/docs/reference/plugins/activity/](https://developers.facebook.com/docs/reference/plugins/activity/)

**编辑：** 对不起，活动提要与点赞框流不同。事实上，我不认为 Facebook 提供了另一个具有该功能的插件。如果您真的希望该部分从您的页面中**消失**，我唯一能想到的就是将 iframe 放在带有“溢出：隐藏”的 div 中；并使用 iframe “位置：相对；顶部：-63px；”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:28:46.817

也许您可以尝试使用 html 5 插件而不是 iframe 插件并使用 CSS 隐藏它。或者您可以使用图形 api 来抓取提要并根据需要显示它。

# windows - 在命令行输出中搜索字符串

> ID：12453733
> 
> 赞同：16
> 
> 时间：2012-09-17T05:48:27.773
> 
> 标签：windows, batch-file, command, prompt

**我想在“ sysinfo** ”命令的“ **system model** ”属性中搜索字符串“ **virtual ”。****如果在'system model: -------------------------'**即 systeminfo 的输出中找到 'virtual'，则该命令应该是成功的。它不应该在 systeminfo 命令的整个输出中搜索“虚拟”，而应该只在系统模型属性中搜索。例如命令

 ******```
systeminfo | findstr /i "system model" 
```

我会得到类似的东西

```
System Model:              HP Compaq dc7800p Small Form Factor 
```

在上面的输出行中，我想搜索字符串 virtual，并想使用 errorlevel 进行操作。所以请帮助我做到这一点。

以下是我尝试过的不正确的。或者如果我可以使用正则表达式，请帮助我

```
systeminfo | findstr /i /R  "system model: virtual machine" > nul
if %errorlevel% == 0 (
   echo virtual machine
) ELSE (
   echo physical machine
) 
```

提前致谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-17T08:39:27.883

尝试这个：

```
systeminfo | findstr /I /B /C:"system model" | findstr /I "virtual"
if %errorlevel% == 0 (
    echo virtual machine
) else (
    echo real machine
) 
```

我已经在真实和虚拟系统上进行了测试，它在 WinXp 和 Win7 上运行良好。请注意，该`system model`字符串仅在英文 Windows 版本中使用。其他语言的 Windows 版本将使用不同的名称。******

# facebook - 通过 AS3 facebook canvas iFrame 应用邀请朋友

> ID：12453735
> 
> 赞同：0
> 
> 时间：2012-09-17T05:48:28.997
> 
> 标签：facebook, actionscript-3

我们正在开发一个 AS3 应用程序（iframe）。用户可以从自定义弹出窗口（flash 内）中邀请朋友。目前我们在弹出窗口中获取好友列表，但无法邀请好友。

请帮忙解决

明白啦

```
var dat:Object = new Object();
dat.message = msg;
dat.from = _user_fbid;
dat.to = fid;
dat.title = title;
Facebook.ui('apprequests', dat, callBack); 
```

会试一试并更新。同时，如果有人知道这是否正确。

更新

这对我有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:50:37.897

您可以使用 AS3 Facebook API 使用 100% 客户端代码执行此操作：[http ://code.google.com/p/facebook-actionscript-api/](http://code.google.com/p/facebook-actionscript-api/)

AS3 API 实际上只是[JavaScript SDK](https://developers.facebook.com/docs/reference/javascript/)的一个包装器（您需要页面中的 JS，您也可以使用 ExternalInterface 来调用它的方法，但是 API 提供了有用的快捷方式）。大多数 JS SDK 教程都可以适应在 AS3 中使用，这很有用，因为周围没有那么多好的 Flash 教程。

这个 SO 问题显示了如何使用 JS SDK 执行此操作：`http://stackoverflow.com/questions/6829864/invite-friends-to-facebook-using-javascript-sdk` AS3 API 中的 Facebook.UI 对象应该具有几乎相同的方法。

所有 Facebook API 方法的一个问题是它们变化相当频繁，并且教程已经过时。以下是我认为使用 JS SDK 邀请用户的最新文档：

[https://developers.facebook.com/docs/reference/dialogs/requests/](https://developers.facebook.com/docs/reference/dialogs/requests/)

在最坏的情况下，您可以使用 ExternalInterface 调用方法来启动此对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T18:07:30.533

这段代码对我有用。

```
var obj:Object = 
        {
            message: "your message",
            filters: ["app_non_users"],//only if you need it
            title: "your title",
            to: ID //if you don't fill this, you can see the friends selector
        };
        Facebook.ui("apprequests", obj, callBackFunctionOrNull, "iframe"); 
```

# jekyll - 为什么使用高亮标记进行语法高亮显示 mking 代码消失了？

> ID：12453736
> 
> 赞同：0
> 
> 时间：2012-09-17T05:48:28.753
> 
> 标签：jekyll, jekyll-extensions

我正在使用 Jekyll 和颜料来突出显示我博客中的一些代码，并且突出显示标签中的任何代码似乎都消失了，即没有生成 Html。

这是一些此类代码的示例

```
{% highlight java %}
ObjectMapper mapper = new ObjectMapper();
mapper.getSerializationConfig().
setSerializationInclusion(JsonSerialize.Inclusion.NON_NULL);
{% endhighlight %} 
```

其他一些细节；

*   操作系统：OSX Mountain Lion Ruby 版本：
*   ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin12.1.0]
*   Jekyll 版本：Jekyll 0.11.2

谷歌搜索时有人建议运行这个命令来检查 pygments

```
echo 'puts "Hello World"' | pygmentize -l ruby -f html -O encoding=utf-8 
```

对我来说，它返回此错误：

```
Traceback (most recent call last):
  File "/usr/local/bin/pygmentize", line 5, in <module>
    from pkg_resources import load_entry_point
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 2603, in <module>
    working_set.require(__requires__)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 666, in require
    needed = self.resolve(parse_requirements(requirements))
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/pkg_resources.py", line 565, in resolve
    raise DistributionNotFound(req)  # XXX put more info here
pkg_resources.DistributionNotFound: Pygments==1.5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T17:42:31.930

如果您使用 easy_install Pygments，您应该指定 Python 安装的版本。

也许这对你有帮助！

```
easy_install-2.7 Pygments 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:51:59.577

我认为您的 easy_install 鸡蛋被放入：`~/Library/Python/2.7/site-packages/` 虽然它们需要放入：`/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/`

只需将文件（eggs 和 easy_install.path 的内容）复制过来，它应该可以解决您的问题。

# android - 一个数据库上的多个 Android 内容提供程序

> ID：12453737
> 
> 赞同：2
> 
> 时间：2012-09-17T05:48:36.773
> 
> 标签：android, database, sqlite, android-contentprovider

一般情况下，一个数据库可以有多个内容提供者吗？

我有以下情况/愿望：

1.  我有一个带有数据库的应用程序，它存储“主数据”（例如项目定义和偏好）和“实时数据”（例如该项目的工作时间）。

2.  我有内部内容提供程序来读取和写入数据。

现在我想要两个更多的内容提供者供外部使用。

1.  一个用于访问“主数据”（必须具有特殊的读写权限）

2.  一个用于访问“实时数据”（必须具有特殊的读写权限，但与第一个不同）。

可能吗？如何？

我尝试实现不同的提供程序，但我得到了很多“原因：java.lang.IllegalStateException：数据库/data/data/package/databases/db.db（conn#0）已经关闭”。

我只使用内容提供者进行数据库访问。数据列表（Spinner、ListViews）的加载器和单行的直接内容提供程序访问。

**编辑：**

**该解决方案确实有效（`FAKE_PERMISSION`）！**

```
<provider android:name=".provider.MyContentProvider"
    android:authorities="my.package.provider"
    android:enabled="true"
    android:exported="true"
    android:permission="FAKE_PERMISSION" >
    <path-permission
        android:pathPrefix="/master_data"
        android:readPermission="my.package.PERMISSION_READ_MASTER_DATA"
        android:writePermission="my.package.PERMISSION_WRITE_MASTER_DATA" />
    <path-permission
        android:pathPrefix="/live_data"
        android:readPermission="my.package.PERMISSION_READ_LIVE_DATA"
        android:writePermission="my.package.PERMISSION_WRITE_LIVE_DATA" />
</provider> 
```

**没有全局提供者许可是行不通的！**这两个路径都可以从外部应用程序访问，而无需`uses-permission`.

```
<provider android:name=".provider.MyContentProvider"
    android:authorities="my.package.provider"
    android:enabled="true"
    android:exported="true" >
    <path-permission
        android:pathPrefix="/master_data"
        android:readPermission="my.package.PERMISSION_READ_MASTER_DATA"
        android:writePermission="my.package.PERMISSION_WRITE_MASTER_DATA" />
    <path-permission
        android:pathPrefix="/live_data"
        android:readPermission="my.package.PERMISSION_READ_LIVE_DATA"
        android:writePermission="my.package.PERMISSION_WRITE_LIVE_DATA" />
</provider> 
```

# asp.net - 无效的视图状态。客户端已断开连接

> ID：12453742
> 
> 赞同：3
> 
> 时间：2012-09-17T05:49:18.957
> 
> 标签：asp.net, c#-4.0, iis-7.5

我收到一条
**错误消息**：客户端已断开连接。
**错误来源**：System.Web
**Stack Treace**：System.Web.UI.ViewStateException：无效的视图状态...

我有一个在 Windows IIS 7.5 框架 4.0 上运行的简单 Web 应用程序。**并且没有负载平衡器**
我正在使用[flowplayer](http://jquerytools.org/demos/overlay/external.html)的 jquery 工具打开覆盖上的一些页面。

早些时候，我在登录页面上打开了带有视图状态的整个页面。
例如

> ```
> $("a[rel]").length && $("a[rel]").live("click", function (a) {
>         var b = $(this).overlay({
>             mask: "gray",
>             effect: "apple",
>             closeOnClick: !1,
>             closeOnEsc: !1,
>             fixed: !1,
>             top: 0,
>             onBeforeLoad: function () {
>                 var a = this.getOverlay().find(".contentWrap"),
>                     b = this.getOverlay().find(".contentWrap_Request"),
>                     d = this.getOverlay().find(".contentWrap_AddLead");
>                 a.html("");
>                 b.html("");
>                 d.html("");
>                 a.load(this.getTrigger().attr("href"));
>                 b.load(this.getTrigger().attr("href")); 
> ```

```
 }... 
```

我认为我正在加载的页面的视图状态导致了问题。所以我将代码更改如下

```
a.load(this.getTrigger().attr("href") + " .ajaxDiv");
b.load(this.getTrigger().attr("href") + " .ajaxDiv"); 
```

现在，我没有打开整个页面。
为了避免我在覆盖上打开的页面的视图状态，我只加载了页面的预定义 div。

我通过互联网搜索并找到了一些建议，例如指定机器密钥。我已将其放入我的 web.config 文件中。

```
 <pages enableViewStateMac="true" viewStateEncryptionMode="Always"/>
 <machineKey validationKey="...." decryptionKey="..." validation="SHA1" decryption="AES" /> 
 <authentication mode="Forms" >
        <forms requireSSL="true" protection="All" timeout="720" defaultUrl="...." loginUrl="Default.aspx" >
        </forms>
    </authentication> 
```

但我仍然收到上述错误。

我在博客上看到建议[在页面加载事件中检查 HttpResponse.IsClientConnected](http://rayaspnet.blogspot.in/2010/12/how-to-fix-invalid-viewstate-and.html) 我应该使用这种方法吗？我的应用程序的流量并不算多，每天（24 小时）大约 7 到 9 千。那么应用程序池回收是否有任何原因。

我也看过 Stack [Overflow](https://stackoverflow.com/questions/8252276/system-web-ui-viewstateexception-invalid-viewstate)的文章，但没有运气。
另外我想补充一点，4 个应用程序正在运行我的应用程序的同一个应用程序池中运行。

# javascript - Internet Explorer 和 Firefox 的输入类型日历

> ID：12453743
> 
> 赞同：0
> 
> 时间：2012-09-17T05:49:20.387
> 
> 标签：javascript, firefox, input, calendar

我经常在我的网站 Intranet 上使用日历类型的输入，但它仅在我使用 Chrome 谷歌而不使用其他浏览器时才有效。所以我为拥有一个 css/javascript 日历编写了一个代码，但我只想在浏览器不是 chrome 时才显示它。

日历按 id 显示，所以有没有办法检查浏览器？

我真的不知道我可以使用哪个，因为我不知道哪些功能可以检查浏览器。

接受我最大的尊重。

亲切的问候

SP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:52:46.500

你可以试试这个来检查浏览器：

```
var nav = navigator.userAgent;
var ischrome = nav.indexOf("Chrome") ? true : false;

if (!ischrome) {
    // Do something for browsers other than Chrome 
    //    like displaying your calendar
    // ...
} 
```

另外，您可能会感兴趣的一个有趣链接：[JavaScript：如何确定用户浏览器是否是 Chrome？](https://stackoverflow.com/questions/4565112/javascript-how-to-find-out-if-user-browser-is-chrome)

希望这可以帮助。

# nginx - nginx重写规则解释

> ID：12453748
> 
> 赞同：0
> 
> 时间：2012-09-17T05:49:28.693
> 
> 标签：nginx, rewrite

从一个例子开始。

输入 URI：

`http://website.com/search/some-search-keywords`

重写的URI：

`http://website.com/search.php?q=some-search-keywords`

重写规则：

`rewrite ^/search/(.*)$ /search.php?q=$1?`

是什么意思 ”？” 在“重写规则”中？我不明白谁能给我解释或参考？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:46:07.053

[http://nginx.org/r/rewrite](http://nginx.org/r/rewrite)

> 如果替换字符串包含新的请求参数，则将先前的请求参数附加在它们之后。如果这是不希望的，在替换字符串的末尾放置一个问号可以避免附加它们

阅读官方文档总是一个好主意。

# java - Google Task API 没有列出我所有的任务列表

> ID：12453751
> 
> 赞同：0
> 
> 时间：2012-09-17T05:50:06.790
> 
> 标签：java, google-api, google-api-java-client

我尝试使用 OAuth Playground，它运行良好，并返回了我所有的 10 个任务列表。但以下是我返回有线响应的 Java 代码。

```
HttpTransport httpTransport = new NetHttpTransport();
JacksonFactory jsonFactory = new JacksonFactory();

String clientId = "[MYCLIENTID].apps.googleusercontent.com";
String clientSecret = "[MYCLIENTSECRET]";
String refreshToken = "1/P_mWwxnZEJHlDLiUs_BzMIvx6MDewDmvrgx-LNTfib0";

GoogleRefreshTokenGrant authRequest = new GoogleRefreshTokenGrant(httpTransport, jsonFactory, clientId, clientSecret, refreshToken);        
authRequest.useBasicAuthorization = false;

AccessTokenResponse authResponse = authRequest.execute();
GoogleAccessProtectedResource access = new GoogleAccessProtectedResource(authResponse.accessToken, httpTransport, jsonFactory, clientId, clientSecret, authResponse.refreshToken);

HttpRequestFactory rf = httpTransport.createRequestFactory(access);

String endPointUrl = "https://www.googleapis.com/tasks/v1/users/@me/lists";
GenericUrl endPoint = new GenericUrl(endPointUrl);
String requestBody = "{\"maxResults\":10000}"; 
HttpRequest request = rf.buildPostRequest(endPoint, ByteArrayContent.fromString("application/json", requestBody));
HttpResponse response = request.execute();

String str = response.parseAsString();
utils.log(str); 
```

以下是我的回应：

```
{
    "kind": "tasks#taskList",
    "id": "MDA4NTI1NjMwNTAxMTQ5ODQ0NzM6OTA1NjU0MjI6MA",
    "etag": "\"M3V2EYzE8ZKSrA5JDxxyFB0Dbp4/zpmuA0Fyh_wtIkaqHMXDWlYqzd8\"",
    "title": "",
    "updated": "2012-09-17T05:38:05.000Z",
    "selfLink": "https://www.googleapis.com/tasks/v1/users/@me/lists/MDA4NTI1NjMwNTAxMTQ5ODQ0NzM6OTA1NjU0MjI6MA"
} 
```

我什至尝试过`requestBody`空。但是没有用。

我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:00:29.650

那是我的错！

`GETRequest`我用`POSTReques`t 方法代替了Method。

更改了以下行：

```
HttpRequest request = rf.buildPostRequest(endPoint, ByteArrayContent.fromString("application/json", requestBody)); 
```

至

```
HttpRequest request = rf.buildGetRequest(endPoint); 
```

它工作正常！

# java - 结合java和nodejs的android应用程序

> ID：12453754
> 
> 赞同：7
> 
> 时间：2012-09-17T05:50:22.640
> 
> 标签：java, android, node.js, multiplayer

我正在开发基于回合的 Android 游戏，并且我选择 Nodejs 作为服务器端。我已经探索了大约两周的时间，如何从 Android 客户端与 Nodejs 服务器进行通信。有什么办法可以在两者之间进行交流。

如果有人对这样的项目有任何经验，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:42:49.583

根据您的游戏在客户端和服务器之间通信的要求，有很多这样的选择。例如，在此处查找“Android 的 TCP 客户端”会显示这样的[答案](https://stackoverflow.com/questions/5855775/android-tcp-client)。如果服务器和客户端之间的快速更新很重要，那么 UDP 是一种选择，如果您的游戏可以处理中间丢失一些数据包。

除了 TCP/UDP 之外，您还拥有诸如Android 的[WebSockets 之类的东西。](http://jwebsocket.org/mobile/android/android_part1.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:50:59.323

结合 Android 和 nodejs 是没有问题的。首先，您必须定义一个中间件。您可以使用 REST-Webservices 或任何其他技术在节点服务器和 android 客户端之间进行通信。有许多标准的 API 和协议。我会使用 Websocket 进行通信。您可以在此处找到支持 WebSocket 的 Android / Node.js API：

*   [http://cjihrig.com/blog/creating-your-own-node-js-websocket-echo-server/](http://cjihrig.com/blog/creating-your-own-node-js-websocket-echo-server/)
*   [https://github.com/Worlize/WebSocket-Node](https://github.com/Worlize/WebSocket-Node)
*   [http://jwebsocket.org/mobile/android/android_part1.htm](http://jwebsocket.org/mobile/android/android_part1.htm)
*   [http://code.google.com/p/weberknecht/](http://code.google.com/p/weberknecht/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-14T17:43:01.073

您可以在 Android 中使用[Volley](https://developer.android.com/training/volley/simple#java)来生成 json`POST`或`GET`请求。

而对于 NODE JS，您可以使用 node 的内置`http`模块来创建一个简单的 HTTP 服务器，然后从 req 对象接收数据。

```
const http=require('http');
const stringDecoder=require('string_decoder').StringDecoder;

var httpServer=http.createServer(function(req,res){    
    unifinedServer(req,res);
});
//Just another method. 
var unifinedServer=function(req,res){

    var decoder=new stringDecoder('utf-8');
    var buffer='';
    //reading the post data. 
    req.on('data',function(data){
        buffer+=decoder.write(data);
    });
    //Reading of data is completed. 
    req.on('end',function(){
        buffer+=decoder.end(); 
    // Do what ever you want to do with the POST data. 
    });    
}
//The Server is listening on a specific port. 
httpServer.listen(7000,function(){
    console.log("Server is now listening on Port..."+7000);
}); 
```

对于 Android 代码，您可以使用 volley 执行此操作：

```
String url = "http://example.com";

JsonObjectRequest jsonObjectRequest = new JsonObjectRequest
        (Request.Method.POST, url, postJsonObject, new Response.Listener<JSONObject>() {

    @Override
    public void onResponse(JSONObject response) {
        mTextView.setText("Response: " + response.toString());
    }
}, new Response.ErrorListener() {

    @Override
    public void onErrorResponse(VolleyError error) {
        // TODO: Handle error

    }
});

// Access the RequestQueue through your singleton class.
MySingleton.getInstance(this).addToRequestQueue(jsonObjectRequest); 
```

# objective-c - 如何在文本字段中从右到左给出数据？

> ID：12453762
> 
> 赞同：0
> 
> 时间：2012-09-17T05:51:43.777
> 
> 标签：objective-c, uiwebview

在我使用 html 页面的应用程序中，在该页面中我有一个文本字段现在我想从右到左提供数据（因为在希伯来语中对齐是从右到左）请帮助我提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:57:05.763

对于 RTL 文本字段，您可以使用 HTML`dir`属性或`dir="RTL"` `direction`CSS with 中的 with 属性`direction: rtl`。您可以在大多数可视 HTML 元素上使用这些属性，而不仅仅是在文本字段上。

```
<textarea dir="rtl"></textarea> 
```

# codeigniter - 在 save() 之后未调用 codeigniter datamapper get_rules

> ID：12453766
> 
> 赞同：0
> 
> 时间：2012-09-17T05:52:05.650
> 
> 标签：codeigniter, codeigniter-datamapper

我正在[为 CodeIgniter 使用 Datamapper ORM](http://datamapper.wanwizard.eu)`get_rules`我对模型中的字段有“序列化”和“非序列化”规则。该字段将存储序列化数据，当我检索回来时，`get_rules`将对其进行反序列化。

但是，在调用之后`save()`，我试图重新访问该字段，但它仍然返回序列化字符串，而不是数组。

有没有办法重新调用或刷新我的对象，以便`get_rules`再次调用并且该字段现在返回数组？

这是我的模型：

```
class User extends DataMapper{
  public $validation = array(
    'password' => array(
      'label' => 'Password',
      'rules' => array('encrypt')
    ),
    'preferences' => array(
      'rules' => array('serialize'),
      'get_rules'=> array('unserialize')
    )
  );

  function __construct($id = NULL)
  {
    parent::__construct($id);
  }

  function post_model_init($from_cache = FALSE)
  {
  }

  public function _encrypt($field)
  {
    if (!empty($this->{$field}))
    {
      $this->{$field} = md5($this->{$field});
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:47:35.147

Datamapper ORM，afaik，只会`get_rules`在实际执行`get()`. 您可以尝试几件事：

鉴于以下

```
$a = new Fruit();
$a->name = 'grapes';
$a->colors = serialize(array("purple","green"));
$a->save(); 
```

## 1.创建一个新的datamapper对象并重新获取：

```
$b = new Fruit();
$b->where('id', $a->id)->get();
$colors = $b->colors; 
```

## 2.`unserialize()`自己的领域...

```
$colors = unserialize($a->colors); 
```

## 3\. 你甚至可以使用`get_clone()`

```
//not tested...
$b = $a->get_clone();
$colors = $b->colors; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T17:46:31.203

这已在此处修复：[https ://bitbucket.org/wanwizard/datamapper/commits/db6ad5f2e10650b0c00c8ef9b7176d49a8e85163](https://bitbucket.org/wanwizard/datamapper/commits/db6ad5f2e10650b0c00c8ef9b7176d49a8e85163)

从 bitbucket 获取最新的 Datamapper 库。

# visual-studio-2008 - Visual Studio 部署项目：取决于构建配置的条件文件

> ID：12453772
> 
> 赞同：5
> 
> 时间：2012-09-17T05:52:48.020
> 
> 标签：visual-studio-2008, setup-deployment, conditional-compilation

我想知道是否可以完全根据构建配置（调试/发布）构建不同的安装程序，其中包含一个部署项目的不同文件？

我想这样做是因为：

1.  在调试阶段，我们想在测试机器上安装一些额外的调试文件（*.pdb）以及二进制文件，以便如果出现任何问题，我们可以知道发生了什么
2.  在发布阶段，我们不希望用户拥有这些调试文件。而且我们不想让它成为用户安装 *pdb 的选项 - 他们中的大多数人不知道这些文件的用途，并且为他们选择只会引起混淆

我目前面临的困难：

1.  我尝试打开部署项目文件 (*.vdproj)，它与 ​​CSharp 等其他类型的项目非常不同。部署项目文件不是 XML，我似乎无法编写如下内容：.
2.  我检查了微软的网站： http: [//msdn.microsoft.com/en-us/library/cz6k1z02%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/cz6k1z02%28v=vs.80%29.aspx)没有与构建配置相关的部署条件。
3.  由于我想根据构建配置设置条件，我想项目文件至少应该能够告诉当前选择的配置是什么。但是，用于部署的配置管理器非常简单——我只能更改输出、打包、压缩和安装 URL。我似乎无法为其他类型的项目（例如 CSharp）定义任何其他宏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-02-22T18:18:58.240

只是为了增加我的两分钱，我在我的 WPF 项目中也有类似的需求。对于在输出文件夹 /bin/ 中正确生成的不同构建配置（调试、QA 和发布），我有不同的 .config 文件

我注意到主输出的输出文件从正确的配置文件夹（即 /bin/Release）列出了我的 .exe 文件，但是 .config 文件来自项目的根目录（App.config），然后重命名为我的项目名称.

所以，为了解决这个问题，我：

1.  创建了一个构建后事件以将我的生成器 .config 文件复制到名为 ConfigDeploy 的文件夹中。

    COPY /Y $(TargetDir)$(TargetFileName).config $(SolutionDir)ConfigDeploy\$(TargetFileName).config

2.  通过右键单击我的主输出项，转到“属性”并在“ExcludeFilter”中设置“*.config”过滤器，从主输出中忽略了我的 .config 文件

[![在此处输入图像描述](../Images/fdc3ef4c84613c16685fadfc9da2cb1b.png)](https://i.stack.imgur.com/QxGhT.png)

3.  在“Program Files Folder/MyApplication”中为我的 .config 文件创建了一个文件条目，该条目指向 ConfigDeploy 文件夹中的文件

至于 .pdb 文件，它更简单。您只需要添加一个项目输出并选择 Debug Symbols 然后指向您需要的配置

[![在此处输入图像描述](../Images/156cbb7d7cccfb28e3092c455a145614.png)](https://i.stack.imgur.com/yXV41.png)

# jquery - jQuery UI - 手风琴：在事件中设置选项

> ID：12453773
> 
> 赞同：1
> 
> 时间：2012-09-17T05:53:01.130
> 
> 标签：jquery, jquery-ui, jquery-ui-accordion

```
$('.ui-accordion').accordion({
    // Event
    changestart: function(event, ui) {
        // How can I set an option here?
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:57:50.090

所有 jQuery UI 小部件都支持一个[`option`方法](http://api.jqueryui.com/accordion/#method-option)：

> **option( optionName, value )**
> ***返回：jQuery（仅限插件）***
> 
> 设置与指定关联的手风琴选项的值`optionName`。

所以你应该能够：

```
$(this).accordion('option', ...); 
```

设置一个选项。

# memory-alignment - 如果 EXE 和 DLL 有不同的 MEMORY ALIGNMENT 怎么办？

> ID：12453783
> 
> 赞同：2
> 
> 时间：2012-09-17T05:54:03.863
> 
> 标签：memory-alignment

在 VC 中，我有一个内存对齐设置为 1 的 DLL 文件，一个 EXE 文件内存对齐设置为默认值（它是 4）。我在 EXE 中使用这个 DLL 的类。不同的内存对齐集是否有任何潜在风险？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:06:41.087

我假设“内存对齐”是指“结构打包”（/Zp）。是的，如果您的结构需要填充以实现指定的对齐方式，则可能会出现问题，因为这两个模块的填充方式不同。

# sql - SQL Group By 并出现错误

> ID：12453786
> 
> 赞同：0
> 
> 时间：2012-09-17T05:54:48.170
> 
> 标签：sql, group-by, having

我有两张桌子。一个是：

```
+--------------------------+-------------+------+-----+---------+
| Field                    | Type        | Null | Key | Default |  
+--------------------------+-------------+---------+-----+------+ 
| facility_id              | int(10)     | NO   | PRI | NULL    |  
| facility_name            | varchar(30) |      |     | NULL    |                 
| facility_model           | varchar(25) |      |     | NULL    |                 
+--------------------------+-------------+------+-----+---------+ 
```

另一个是：

```
+--------------------------+-------------+------+-----+---------+
| Field                    | Type        | Null | Key | Default | 
+--------------------------+-------------+---------+-----+------+ 
| facility_id              | int(10)     | NO   | PRI | NULL    | 
| facility_serial_number   | varchar(30) |      |     | NULL    |                 
+--------------------------+-------------+------+-----+---------+ 
```

不同的设施可能有相同的设施序列号（这是我们想要找出并修复的）。我想获取其设施序列号多次出现的设施的所有信息。

我尝试使用 group by 并具有：

```
select f1.facility_id, f1.facility_name, f1.facility_model, f2.facility_serial_number
from f1, f2 on f1.facility_id = f2.facility_id
group by f2.facility_serial_number
having count (facility_serial_number) > 2 
```

这是错误的。我也尝试了其他方法，但没有成功。corerct 查询语法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:01:12.057

目前尚不清楚您的 sql 的意图是什么，但正确的语法类似于

```
select  f1.facility_id, 
        f1.facility_name, 
        f1.facility_model, 
        f2.facility_serial_number 
from    f1 INNER JOIN
        f2  on  f1.facility_id = f2.facility_id 
group by    f1.facility_id, 
            f1.facility_name, 
            f1.facility_model, 
            f2.facility_serial_number
having count (facility_serial_number) > 2 
```

或者

```
select  f2.facility_serial_number 
from    f1 INNER JOIN
        f2  on  f1.facility_id = f2.facility_id 
group by    f2.facility_serial_number
having count (facility_serial_number) > 2 
```

但是，如果我理解正确，您可能想尝试类似

```
select  f1.facility_id, 
        f1.facility_name, 
        f1.facility_model, 
        f2.facility_serial_number 
from    f1 INNER JOIN
        f2  on  f1.facility_id = f2.facility_id 
WHERE   f2.facility_serial_number IN (
                                        select  f2.facility_serial_number 
                                        from    f1 INNER JOIN
                                                f2  on  f1.facility_id = f2.facility_id 
                                        group by    f2.facility_serial_number
                                        having count (facility_serial_number) > 2
                                    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:01:40.350

尝试关注[参考](http://www.w3schools.com/sql/sql_having.asp)

```
SELECT f1.facility_id, f1.facility_name, f1.facility_model, f2.facility_serial_number 
FROM f1 LEFT JOIN f2 on f1.facility_id = f2.facility_id 
GROUP BY f2.facility_serial_number 
HAVING count (f2.facility_serial_number) > 2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:12:06.887

```
select * form f1 from where facility_id in(
select facility_id where f2 group by facility_id
 having count(facility_serial_number) > 2)) 
```

# titanium - 通过 Appcelerator Cloud API 发送电子邮件

> ID：12453794
> 
> 赞同：2
> 
> 时间：2012-09-17T05:55:11.777
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

我试图在我的 Titanium 应用程序中通过 Appcelerator 云服务发送电子邮件。我使用的代码是标准代码，在文档站点上给出。但是电子邮件没有发送。

```
Cloud.Emails.send({
    template: 'welcome',
    recipients: '*******@gmail.com'
    },
    function (e) {
        if (e.success) {
        Titanium.API.info('Email sent successfully.');
    } else {
        Titanium.API.info('Error:\\n' +
            ((e.error && e.message) || JSON.stringify(e)));
    }
}); 
```

它给出了这个错误，“找不到电子邮件模板欢迎”。我在想模板是要在电子邮件中发送的消息。API 上没有关于这个属性模板的帮助。谁能给我解释一下？我会很感激的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T12:09:12.243

该错误表明您尚未在 ACS 网站上创建电子邮件模板。以下步骤将帮助您创建电子邮件模板

1.  登录到您的 Appcelerator 应用程序控制台
2.  在您正在使用的应用程序下单击“管理 ACS”
3.  单击“电子邮件模板”选项卡
4.  “创建电子邮件模板”。

您也可以按以下方式设置您的 SMTP 设置，这对我有用。

**用户名：*_* __ *_* ____@gmail.com 密码：gmail 帐户密码 TLS：真/假（两者都可以） SMTP 地址：smtp.gmail.com 端口：*587* 域：www.gmail.com**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:54:05.420

该错误意味着您尚未在 ACS 网站上创建电子邮件模板。登录到您的[Appcelerator 应用程序控制台](https://my.appcelerator.com/apps/titanium)，单击您正在使用的应用程序下的“管理 ACS”，然后单击“电子邮件模板”选项卡，然后单击“创建电子邮件模板”。

# java - 如何在 Java 中为 double[] 数组提供输入

> ID：12453795
> 
> 赞同：0
> 
> 时间：2012-09-17T05:55:22.883
> 
> 标签：java

`double[]`当在另一种方法中调用该函数时，尤其是当该输入是一个数组时，如何直接提供输入？

```
public double dotPro1(double[] vectorA, double[] vectorB) {
    double[] vecPro;
    vecPro = new double[2];
    vecPro[0] = vectorA[0]*vectorB[0];
    vecPro[1] = vectorA[1]*vectorB[1];
    return vecPro[0] + vecPro[1];
}
public double dotPro2(double[] length) {
    double[] lenPro;
    lenPro = new double[1];
    lenPro[0] = length[0];
    return lenPro[0];
}
public static double cosine(double a) {
    double x = Math.cos(Math.toRadians(a));
    /*Class c = Class.forName("NaiveStrategy");
        Class methodTypes[] = new Class[3];
        methodTypes[0] = Double.TYPE;
        methodTypes[1] = Double.TYPE;
        methodTypes[2] = Double.TYPE;
        Method[] m = c.getMethods();*/
    NaiveStrategy ns = new NaiveStrategy();
  problem-->ns.dotPro1(vectorA[], vectorB[]);
  problem-->ns.dotPro2(length[]);
    return 0;  
} 
```

正如您还可以看到我的旧编码，我尝试以另一种方式解决它，但它没有奏效。上面已经注释掉了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T05:59:45.187

完全不清楚你的意思——但你现在所掌握的语法肯定是行不通的。如果您只是想在执行时创建一个数组，那很容易：

```
NaiveStrategy ns = new NaiveStrategy();
// Either using separate variables...
double[] first = { 0.5, 0.1, 10 };
double[] second { 5, 20.3, 1 };
double result1 = ns.dotPro1(first, second);

// Or inline...
double results2 = ns.dotPro2(new double[] { 50.2, 0.3 }); 
```

我不知道为什么你的代码中有注释掉的反射调用......

此外，正如评论中所述，您的方法似乎没有特定目的创建数组。它们可以重写为：

```
public double dotPro1(double[] vectorA, double[] vectorB) {
    return vectorA[0] * vectorB[0] + vectorA[1] * vectorB[1];
}

public double dotPro2(double[] length) {
    return length[0];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:50:43.377

您在一条评论中说您想要随机值。所以使用 Random 类来生成它们。

```
double[] list1 = new double[5];
double[] list2 = new double[5];
Random rand = new Random();
for (int i = 0; i < list1.length; i++) {
    list1[i] = rand.nextDouble();
}

for (int i = 0; i < list2.length; i++) {
    list2[i] = rand.nextDouble();
} 
```

新双[5]；将创建一个长度为 5 的数组。将此数字更改为您想要的长度。

注意：rand.nextdouble 只给出 0 到 1 之间的随机数。如果你希望它在 0 到 100 之间，那么使用 rand.nextDouble()*100

然后你可以使用

```
double result1 = ns.dotPro1(list1, list2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:01:35.497

传递数组参数时不要放方括号。

`= ns.dotPro2(length);`
`= ns.dotPro1(vectorA, vectorB);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T06:15:13.673

抱歉耽搁了，因为我的网断了......好吧，回到答案......

这是最简单的方法...

```
double[] first = { 0.10, 0.15, 0.30 };
double[] second { 65, 44.3, 10.11 };
double result1 = ns.dotPro1(first, second); 
```

# python - 从文件中搜索字符串 - python

> ID：12453796
> 
> 赞同：1
> 
> 时间：2012-09-17T05:55:23.857
> 
> 标签：python, file, search, dictionary, string-search

我有一个看起来像这样的人类字典文件`eng.dic`（该列表中有近**十亿**个单词的图像）。而且我必须经常运行不同的单词查询。

```
apple
pear
foo
bar
foo bar
dictionary
sentence 
```

我有一个字符串让我们说“foo-bar”，是否有更好（更有效的方法）搜索该文件以查看它是否存在，如果它返回存在，如果它不存在，附加字典文件

```
dic_file = open('en_dic', 'ra', 'utf8')
query = "foo-bar"
wordlist = list(dic_file.readlines().replace(" ","-"))
en_dic = map(str.strip, wordlist)

if query in en_dic:
    return 1
else:
    print>>dic_file, query 
```

python中是否有任何内置的搜索功能？或任何我可以导入以运行此类搜索而无需太多开销的库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:30:47.050

正如我已经提到的，当文件的大小很大时遍历整个文件并不是一个好主意。相反，您应该使用已建立的解决方案，并且：

1.  索引文档中的单词，
2.  以适当的形式存储索引结果（我建议使用数据库），
3.  检查文件中是否存在单词（通过检查数据库），
4.  如果不存在，将其添加到文件和数据库中，

将数据存储在数据库中确实比尝试重新发明轮子要高效得多。如果您将使用 SQLite，数据库也将是一个文件，因此设置过程非常简单。

因此，我再次建议**将单词存储在 SQLite 数据库中，并在您想要检查该单词是否存在于文件中时进行查询，然后在添加时更新它**。

要阅读有关解决方案的更多信息，请参阅此问题的答案：

> [**索引文档中单词的最有效方法**](https://stackoverflow.com/a/8017470/548696)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:07:50.757

最有效的方法取决于您将使用此字典执行的最频繁操作。

如果您每次都需要读取文件，您可以使用`while`循环读取文件逐行，直到结果是您在文件末尾的单词。如果您有多个可以同时更新文件的并发工作人员，这是必要的。

如果您不需要每次都读取文件（例如，您只有一个使用字典的进程），您绝对可以编写更有效的实现：1）将所有行读入`set`（而不是`list`），2）对于每个“新" word 执行两种操作 - 更新`set`操作`add`并将 word 写入文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:09:43.703

如果它是“相当大”的文件，则按顺序访问这些行并且不要将整个文件读入内存：

```
with open('largeFile', 'r') as inF:
 for line in inF:
    if 'myString' in line:
        # do_something 
```

# php - 如何使用 PHP 将许多元素插入 DOM

> ID：12453797
> 
> 赞同：3
> 
> 时间：2012-09-17T05:55:35.230
> 
> 标签：php, javascript, dom

把我的头发拉在这里...

我需要使用 PHP 在两个不同的点将一堆 html 插入到另一组 html 中。

$a 从另一个类的函数返回给我。我需要将$b 插入$a，使$b 元素成为$a 的一些元素的父元素。

```
<?php
$a = '
<div id="one">
    <div id="two">
        <div id="three">Hi</div>
    </div>
</div> 
';

$b = '
<div id="red">
    <div id="blue"></div>
</div>
<div id="green">
    <div id="yellow">there</div>
</div>
';
?> 
```

最终需要：

```
<?php
$c = '
<div id="one">
    <div id="two">
        <div id="red">
            <div id="blue">
                <div id="three">Hi</div>
            </div>
        </div>
        <div id="green">
            <div id="yellow">there</div>
        </div>
    </div>
</div>
';
?> 
```

注意 $b 是如何插入到 $a 中的，使所有的 $ba 子成为“二”。但同时，“三”变成了“蓝”的孩子。“green”和“yellow”保持原来的关系，但现在嵌套在“two”之下。

现实世界的例子......

```
<?php
$a = '
<div class="ginput_complex ginput_container">
    <span class="ginput_full">
            <input name="input_5" id="input_4_5" type="file" value="" class="medium" tabindex="5">
            <label for="input_4_5" class="ginput_post_image_file">File</label>
    </span>
    <span class="ginput_full ginput_post_image_title">
            <input type="text" name="input_5.1" id="input_4_5_1" value="" tabindex="6">
            <label for="input_4_5_1">Title</label>
    </span>
    <span class="ginput_full ginput_post_image_caption">
            <input type="text" name="input_5.4" id="input_4_5_4" value="" tabindex="7">
            <label for="input_4_5_4">Caption</label>
    </span>
    <span class="ginput_full ginput_post_image_description">
            <input type="text" name="input_5.7" id="input_4_5_7" value="" tabindex="8">
            <label for="input_4_5_7">Description</label>
    </span>
</div>
';

$b =
'
<div class="container">
    <div class="row fileupload-buttonbar">
        <div class="span7">
            <span class="btn btn-success fileinput-button">
            <i class="icon-plus icon-white"></i>

            {{{{{{{{ THIS IS WHERE I MY FILE INPUT SHOULD GO }}}}}}}}}}}

            </span>
            <button type="submit" class="btn btn-primary start">
                <i class="icon-upload icon-white"></i>
                <span>Start upload</span>
            </button>
            <button type="reset" class="btn btn-warning cancel">
                <i class="icon-ban-circle icon-white"></i>
                <span>Cancel upload</span>
            </button>
            <button type="button" class="btn btn-danger delete">
                <i class="icon-trash icon-white"></i>
                <span>Delete</span>
            </button>
        </div>
    </div>
</div>
';

$doc = new DOMDocument;
$doc->loadHTML($a);
$x = new DOMXPath($doc);

?> 
```

我正在使用 $x->query('//*[@id="input_4_5"]') 到达我想要开始工作的节点。从那里开始，我一直在使用新的 DOMElement 和 importNode 以及 appendChild、replaceChild 和 insertBefore 的变体来尝试遍历 DOM 树。但坦率地说，即使我确实成功地遍历了它，我也无法弄清楚如何插入/附加我正在使用的大块代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T06:25:41.907

我正在使用[SimpleHTMLDom](http://simplehtmldom.sourceforge.net/)解析器

试试这个：

```
<?php
require_once( 'simple_html_dom.php' );

$a = '
<div id="one">
    <div id="two">
        <div id="three">Hi</div>
    </div>
</div> 
';

$b = '
<div id="red">
    <div id="blue"></div>
</div>
<div id="green">
    <div id="yellow">there</div>
</div>
';

$a = str_get_html( $a );
$c = str_get_html( $b );

$c->find( 'div[id=blue]', 0 )->innertext = $a->find( 'div[id=two]', 0 )->innertext;
$a->find( 'div[id=two]', 0 )->innertext = $c->save();

echo $a;
?> 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T06:26:19.003

检查下面的代码，我使用 php & jQuery 来生成输出。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script language="javascript" src="http://code.jquery.com/jquery-1.7.js"></script>
</head>

<body>
<div id="varA" style="display:none">
<?
    echo $a= '<div id="one">
    <div id="two">
        <div id="three">Hi</div>
    </div>
</div>';
?>
</div>
<div id="varB" style="display:none">
<?
    echo $b = '
<div id="red">
    <div id="blue"></div>
</div>
<div id="green">
    <div id="yellow">there</div>
</div>
';
?>
</div>

<span id="output"></span>

<script language="javascript">
alert('varA id have:'+$('#varA').html());
var middle = $('#two').html();
$('#output').html($('#varA').html());
$('#varA').remove();
alert('varB id have:'+$('#varB').html());
$('#two').html($('#varB').html());
$('#varB').remove();
$('#blue').html(middle);
alert('output id have:'+$('#output').html());
</script>

</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:10:16.717

我认为最好编写一个新函数来获取关于`a`and的数据`b`，然后生成 html。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T06:24:09.210

如果我不得不这样做，我会做一个占位符，一些东西`/#/`，然后在它上面做 ma str_replace。

但如果你真的需要使用 DOM，请查看 DOMDocument。

如果你想做 Javascript 在你的 js 中回显它们

```
<script>

var a = '<?php echo $a ?>';
var b = '<?php echo $b ?>':

</script> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-17T06:09:16.230

替换字符串会有帮助吗？

```
$matched = array();
preg_match('/<div id="three">.*?<\/div>/', $a, $matched);
$b = preg_replace('/<div id="blue"><\/div>/', '<div id="blue">'.$matched[0].'</div>', $b);
$a = str_replace($matched[0], $b, $a); 
```

# c# - 如何在 xaml 文件中设置自定义列属性？

> ID：12453800
> 
> 赞同：0
> 
> 时间：2012-09-17T05:55:47.870
> 
> 标签：c#, silverlight, grid, gridsplitter, col

GridSplitterControl.xaml

```
<sdk:GridSplitter x:Class="JustLogIt.Common.GridSplitterControl"
                  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                  xmlns:sdk="http://schemas.microsoft.com/winfx/2006/xaml/presentation/sdk"
                  xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
                  mc:Ignorable="d">
    <sdk:GridSplitter.Template>
        <ControlTemplate TargetType="sdk:GridSplitter">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="auto" />
                </Grid.ColumnDefinitions>
                <telerik:RadButton Grid.Row="0"
                                   Width="10"
                                   Height="20"
                                   HorizontalAlignment="Center"
                                   Click="Click"
                                   Cursor="Hand" />
                <Border Grid.Row="1"
                        BorderBrush="LightGray"
                        BorderThickness="5" />
            </Grid>
        </ControlTemplate>
    </sdk:GridSplitter.Template>
</sdk:GridSplitter> 
```

GridSplitterControl.xaml.cs

```
 public partial class GridSplitterControl : GridSplitter
    {
        GridLength AutoSize = new GridLength(1.0, GridUnitType.Auto);
        GridLength ZeroSize = new GridLength(0.0);
        public ColumnDefinition Left{ set; get;}
        public GridSplitterControl()
        {
            InitializeComponent();

        }
        public GridSplitterControl(ColumnDefinition ColLeft)
        {
            InitializeComponent();
            Left = ColLeft;
        }
        public void Click(object sender, RoutedEventArgs e)
        {
            if (Left != null)
            {
                Left.MinWidth = 10.0;
                if ((Left.Width.Value + 10) == Left.MinWidth)
                    Left.Width = AutoSize;
                else if (Left.Width.Value != AutoSize.Value)
                    Left.Width = AutoSize;
                else Left.Width = ZeroSize;
            }
            //ClickNotify(sender, e);
        }

        public event EventHandler ClickCompleted;
        private void ClickNotify(object senderAIF, RoutedEventArgs eAIF)
        {
            if (ClickCompleted != null)
                ClickCompleted(senderAIF, eAIF);
        }
    } 
```

1.  Click 事件可以工作，但我不知道在使用此元素的 xaml 文件中设置 Left(ColumnDefinition)。

```
 <Grid x:Name="LayoutRoot1"
                  Grid.Row="1"
                  Margin="5"
                  Background="White">
         <Grid.ColumnDefinitions>
              <ColumnDefinition x:Name="LvCol_10" Width="*" />
              <ColumnDefinition x:Name="LvCol_11" Width="*" />
         </Grid.ColumnDefinitions>
         <Mylayout:GridSplitterControl x:Name="GridSplitter_Left"
                                       Grid.RowSpan="7"
                                       Grid.Column="0"
                                       Width="10"
                                       VerticalAlignment="Stretch"
                                       IsEnabled="True"
                                       Left=? /> < !-- How to set "LvCol_11" in here? -->
    </Grid>` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T00:34:28.453

似乎您想将 grid.row 设置为单击按钮时使用的属性。

也许你可以试试这个...

GridSplitterControl.xaml.cs

```
private void UI_Loaded(object sender, RoutedEventArgs e)
{
    if (sender is GridSplitter)
    {
        Grid ParentGrid = this.ParentOfType<Grid>();
        SetLocation(ParentGrid);
    }
}
public void SetLocation(Grid p_Layout)
{
    int index = Grid.GetColumn(this);
    ColumnDefinition ColLocation = p_Layout.ColumnDefinitions[index];
    ColLocation.MinWidth = 10;
    Left = ColLocation;
} 
```

小心，确保您的元素的父级（上一级）是网格。

如果 parent 是 stackPanel、border 或 rectangle，它可能不起作用。

# c# - 如何为 Active Directory 组中的用户设置访问权限

> ID：12453804
> 
> 赞同：0
> 
> 时间：2012-09-17T05:56:36.090
> 
> 标签：c#, asp.net, authentication, active-directory

我有一个在 C# 中使用**Windows 身份验证**的 Web 应用程序，目前我将用户单独分配给角色。

例如，在应用程序的每一页，我都会检查

```
if(Roles.IsUserInRole(AU\UserName, "PageAccessRole")) 
```

由于我需要在本周将应用程序推广到整个团队（最终是整个公司），我需要使用 AD 组，因为有超过 3000 人，所以我不打算手动进行！

作为 ASP.NET（以及一般编程）的新手，我真的不太了解设置 AD 组（例如，如何从我的应用程序访问 AD 组等？）

如果有人能指出我正确的方向，我将不胜感激……我一直在阅读有关**LDAP**和**System.DirectoryServices.AccountManagement**等的所有信息，但我越来越困惑了。

到目前为止，我的 web.config 中有这个

```
 <authentication mode="Windows">
  </authentication>
  <authorization> 
              <allow roles="AU\Active Directory Group Name"/>
    <deny users="?"/>
  </authorization>

  <roleManager enabled="true" >
    <providers>
    <clear/>
    <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers> 
```

而且我在 IIS 服务器中启用了 Windows 身份验证并禁用了匿名。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T09:03:25.763

解决方案：-

这是您可以从 AD 中的 OU 获取组的方法

```
DataTable dt = new DataTable();
dt.Columns.Add("groups");
DirectoryEntry rootDSE = null; 
```

假设我想从我的部门 OU 获取记录。现在路径会是这样

**部门-->>用户**

这里的**dc**是域控制器名称，在我的例子中是**Corp.Local**
这样你就可以从你的 AD 中获取组

```
if (department != "")
{
   rootDSE = new DirectoryEntry(
     "LDAP://OU=" + department + ",OU=Users,dc=corp,dc=local", username, password);
}
else
{
   rootDSE = new DirectoryEntry(
      "LDAP://OU=Users,OU=" + ou + ",dc=corp,dc=local", username, password);
}
DirectorySearcher ouSearch = new DirectorySearcher(rootDSE);
ouSearch.PageSize = 1001;
ouSearch.Filter = "(objectClass=group)";
ouSearch.SearchScope = SearchScope.Subtree;
ouSearch.PropertiesToLoad.Add("name");
SearchResultCollection allOUS = ouSearch.FindAll();
foreach (SearchResult oneResult in allOUS)
{
    dt.Rows.Add(oneResult.Properties["name"][0].ToString());
}
rootDSE.Dispose();
return dt; 
```

现在如何将用户添加到组中。

这是单个用户的示例，您可以通过循环用户以类似的方式执行此操作。

```
 PrincipalContext pr = new PrincipalContext(ContextType.Domain,
     "corp.local", "dc=corp,dc=local", username, password);
GroupPrincipal group = GroupPrincipal.FindByIdentity(pr, groupName);//Looking for the Group in AD Server

if (group == null)
  {
     //Throw Exception
  }

UserPrincipal user = UserPrincipal.FindByIdentity(pr, userName);//Looking  for the User in AD Server

if (user.IsMemberOf(group))//If Group is already added to the user
   {
       //I have Put it into If else condition because in case you want to Remove Groups from that User you can write your Logic here.

     //Do Nothing, Because the group is already added to the user
   }
 else// Group not found in the Current user,Add it
   {
      if (user != null & group != null)
       {
         group.Members.Add(user);
         group.Save();
         done = user.IsMemberOf(group);//You can confirm it from here
        }
   }
     pr.Dispose();
     return done; 
```

# iphone - 如何在实现文件中运行函数？

> ID：12453805
> 
> 赞同：1
> 
> 时间：2012-09-17T05:56:53.693
> 
> 标签：iphone, c++, ios, xcode

我正在*iPhone*上做一个项目，我是一个非常初学者。我正在制作`Tic Tac Toe`应用程序，我想制作一个改变转弯的功能`'X' to 'O'`

所以我试着输入这个

```
void setTurn(){
    SinglePlayer*SO=[[SinglePlayer alloc]init];
    SO .turn =1;
    if (SO.turn%2==0){
        SO-&gt;turnLabel.text=@"O Turn";
    }
    else SO-&gt;turnLabel.text=@"X Turn";
    SO.turn++;
} 
```

所以意味着`SinglePlayerObject`。

无论我在实现的标题中定义了什么

而当我试图在方法`putSign();`下键入这个方法时

```
-(IBAction)PutSign2:(id)sender{
    if (turn%2 !=0){
        label2.text=@"X";
    }
    else if (turn%2 ==0){
        label2.text=@"O";
    }
} 
```

它显示一个错误。

**那么我如何运行与C++**相同的方法，因为我有**C++**经验？

这是头文件

```
#import <UIKit/UIKit.h>

@interface SinglePlayer : UIViewController{

    IBOutlet UILabel*label1;
    IBOutlet UILabel*label2;
    IBOutlet UILabel*label3;
    IBOutlet UILabel*label4;
    IBOutlet UILabel*label5;
    IBOutlet UILabel*label6;
    IBOutlet UILabel*label7;
    IBOutlet UILabel*label8;
    IBOutlet UILabel*label9;

    BOOL Player;

    int turn;

    IBOutlet UILabel*turnLabel;

}
@property (nonatomic)int turn;
@property (nonatomic) BOOL Player;
-(IBAction)PutSign1:(id)sender;
-(IBAction)PutSign2:(id)sender;
-(IBAction)PutSign3:(id)sender;
-(IBAction)PutSign4:(id)sender;
-(IBAction)PutSign5:(id)sender;
-(IBAction)PutSign6:(id)sender;
-(IBAction)PutSign7:(id)sender;
-(IBAction)PutSign8:(id)sender;
-(IBAction)PutSign9:(id)sender;
void setTurn();

@end 
```

这是未完成的实现

```
@implementation SinglePlayer
//Player=true = X
//Player=False= O
@synthesize Player;
@synthesize turn;

void setTurn(){
    SinglePlayer*SO=[[SinglePlayer alloc]init];

    SO .turn =1;
    if (SO.turn%2==0){
        SO->turnLabel.text=@"O Turn";

    }
    else SO->turnLabel.text=@"X Turn";
    SO.turn++;
}
//this code to put the sign in the button label:-
//[sender setTitle:@"X" forState:UIControlStateNormal];
-(IBAction)PutSign1:(id)sender{
    if (turn%2 !=0){
        label1.text=@"X";
    }
    else if (turn%2 ==0){
        label1.text=@"O";
    }
turnLabel.text=@"O Turn";
}
      putSign();
-(IBAction)PutSign2:(id)sender{
    if (turn%2 !=0){
        label2.text=@"X";
    }
    else if (turn%2 ==0){
        label2.text=@"O";

    }
}    
   putSign();

-(IBAction)PutSign3:(id)sender{
    if (turn%2 !=0){
        label3.text=@"X";
    }
    else if (turn%2 ==0){
        label3.text=@"O";

    }
}
 putSign();
-(IBAction)PutSign4:(id)sender{
    //[sender setTitle:@"X" forState:UIControlStateNormal];
}

putSign(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:16:19.157

这些名字被搞砸了；）我知道这听起来无关紧要，但我不会低估“命名的力量”

代码变得更容易读/写

* * *

无论如何......你没有任何功能 - 你有属于对象的方法：它的 [OBJECT executeMyMethod:myParam];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:05:48.107

编写方法如下。

```
-(void)setTurn
{
    SinglePlayer*SO=[[SinglePlayer alloc]init];

    SO .turn =1;
    if (SO.turn%2==0){
        SO.turnLabel.text=@"O Turn";

    }
    else SO.turnLabel.text=@"X Turn";
    SO.turn++;
} 
```

# highcharts - highcharts 基础知识

> ID：12453810
> 
> 赞同：0
> 
> 时间：2012-09-17T05:57:37.250
> 
> 标签：highcharts

我使用 php 和我的 sql 在数组中获取了以下数据

```
Array
(
    [name] => Array
        (
            [0] => a
            [1] => b
        )

    [data] => Array
        (
            [0] => Array
                (
                    [0] => 0
                    [1] => 1
                    [2] => 2
                    [3] => 3
                    [4] => 4
                    [5] => 5
                    [6] => 6

                )

            [1] => Array
                (
                    [0] => 34
                    [1] => 35
                    [2] => 36
                    [3] => 37
                    [4] => 38
                    [5] => 39
                    [6] => 40

                )

        )

) 
```

我是 highcharts 和 jquery 的新手。

线图的函数是

```
<script type="text/javascript">
$(function () {

    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
                marginRight: 130,
                marginBottom: 25
            },
            title: {
                text: 'Monthly Average Temperature',
                x: -20 //center
            },
            subtitle: {
                text: 'Source: WorldClimate.com',
                x: -20
            },
            xAxis: {
                categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',
                    'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
            },
            yAxis: {
                title: {
                    text: 'Temperature (°C)'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: '#808080'
                }]
            },
            tooltip: {
                formatter: function() {
                        return '<b>'+ this.series.name +'</b><br/>'+
                        this.x +': '+ this.y +'°C';
                }
            },
            legend: {
                layout: 'vertical',
                align: 'right',
                verticalAlign: 'top',
                x: -10,
                y: 100,
                borderWidth: 0
            },
            series: [{
                name: 'Tokyo',
                data: [7.0, 6.9, 9.5, 14.5, 18.2, 21.5, 25.2, 26.5, 23.3, 18.3, 13.9, 9.6]
            }, {
                name: 'New York',
                data: [-0.2, 0.8, 5.7, 11.3, 17.0, 22.0, 24.8, 24.1, 20.1, 14.1, 8.6, 2.5]
            }, {
                name: 'Berlin',
                data: [-0.9, 0.6, 3.5, 8.4, 13.5, 17.0, 18.6, 17.9, 14.3, 9.0, 3.9, 1.0]
            }, {
                name: 'London',
                data: [3.9, 4.2, 5.7, 8.5, 11.9, 15.2, 17.0, 16.6, 14.2, 10.3, 6.6, 4.8]
            }]
        });
    });

});
        </script> 
```

我不知道如何为 a 和 b 传递我的数据，以便它可以绘制线图需要它紧急.. 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T11:19:34.870

使用以下内容将您的数组解析为 js。

```
var data = jQuery.parseJSON(' <?php echo json_encode($yourArray, JSON_NUMERIC_CHECK); ?> '); 
```

比你可以把它放在你的系列中，如下所示。

```
series: [{
    'name': data.name[0],
    'data': data.data[0]
}, {
    'name': data.name[1],
    'data': data.data[1]
}] 
```

# ruby-on-rails - Rabbit MQ AMQP 和 DaemonKit

> ID：12453812
> 
> 赞同：2
> 
> 时间：2012-09-17T05:57:55.990
> 
> 标签：ruby-on-rails, ruby, rabbitmq, daemon

我正在尝试将 RabbitMq 和 AMQP 与守护程序套件集成以在 Ruby on Rails 平台中安排消息传递任务。我还处于实验阶段。我被提及的博客和网站很少，其中之一是： http: [//www.ioncannon.net/programming/941/using-daemon-kit-and-robustthread-to-build-ruby-daemons/#evented-daemon](http://www.ioncannon.net/programming/941/using-daemon-kit-and-robustthread-to-build-ruby-daemons/#evented-daemon)

`daemon-kit -i amqp eventbased` 当我尝试在 Rails 应用程序 中运行此命令时 ，出现此错误：`No value provided for required arguments 'app_path'`

我无法弄清楚它有什么问题。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T09:11:25.897

所以这个错误

> 没有为所需参数“app_path”提供值

出现因为你应该提供守护进程的路径，像这样

```
daemon-kit ~/projects/amqp-dev -i amqp 
```

这将在`amqp-dev`文件夹中生成骨架守护程序。

我不确定 daemon-kit 与 ruby​​ 框架（如 sinatra 或 rails）的兼容性，但我相信与它们一起工作并不难。

# jakarta-ee - JRebel 更新更改不是 tomcat maven 插件

> ID：12453816
> 
> 赞同：1
> 
> 时间：2012-09-17T05:58:33.960
> 
> 标签：jakarta-ee, tomcat, maven, maven-3, jrebel

我有带有 JRebel 和 Tomcat-maven-plugin 的 Maven 模块。如屏幕截图所示，我使用 JRebel 运行 tomcat:run。每当我更改时都会反映在浏览器中。

**问题 1：**我如何确保这些更改反映在 JRebel 上，而不是像在 Jetty 插件中我们设置为 0 的 tomcat 重新部署？

![在此处输入图像描述](../Images/64d811b5562d6594da761fc502890915.png)

**在控制台中**

```
[2012-09-17 10:11:22] JRebel: Directory 'C:\Users\abc\Desktop\Java\IntelliJ-Projects\Struts2_Maven_HelloWorld\target\classes' will be monitored for changes.
[2012-09-17 10:11:22] JRebel: Directory 'C:\Users\abc\Desktop\Java\IntelliJ-Projects\Struts2_Maven_HelloWorld\src\main\webapp' will be monitored for changes. 
```

**问题 2：**有什么方法可以在 pom.xml JRebel 插件中使用 -Drebel.log=true 启用 JRebel 日志记录。我无法启用日志记录。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:58:31.250

如果您的应用程序由 Tomcat 重新部署，它会丢失会话。因此，如果是这种情况，您将从第一个屏幕重新开始（再次登录应用程序）。插件本身只定义了*重新加载*和*重新部署*目标，无论如何似乎都不会自动触发。

或者您可以尝试以下配置

```
 <configuration>
                <update>true</update>
            </configuration> 
```

要启用 JRebel 日志记录，您可以通过 MAVEN_OPTS 环境变量传递**-Drebel.log=true参数（只是猜测）。**或者，您可以在运行配置的 Runner 选项卡中指定 VM 参数：

![Maven 运行配置](../Images/40c50860f638506576d75feeece3ff1a.png)

# c# - 如何将数据表中的数据导出到asp.net c#mvc3中的excel？

> ID：12453819
> 
> 赞同：2
> 
> 时间：2012-09-17T05:59:00.863
> 
> 标签：c#, asp.net-mvc-3, export, export-to-excel

目前我正在尝试将数据表中的数据导出到 c# asp.net mvc3 中的 excel 表中。我在网上冲浪，发现了一些将数据表导出到 Excel 工作表的代码。它执行没有任何错误。但不会创建 Excel 工作表。任何建议这样做。

```
 string filename = "DownloadMobileNoExcel.xls";
            DataGrid dgGrid = new DataGrid();
            dgGrid.DataSource = dt;
            dgGrid.DataBind();
            Response.Clear();
            Response.AddHeader("content-disposition", "attachment;filename=" 
              + filename + "");
            Response.Charset = "";
            Response.Cache.SetCacheability(HttpCacheability.NoCache);
            Response.ContentType = "application/vnd.ms-excel";

            //Convert the rendering of the gridview to a string representation 
            StringWriter sw = new StringWriter();
            HtmlTextWriter htw = new HtmlTextWriter(sw);
            dgGrid.RenderControl(htw);

            //Open a memory stream that you can use to write back to the response
            byte[] byteArray = Encoding.ASCII.GetBytes(sw.ToString());
            MemoryStream s = new MemoryStream(byteArray);
            StreamReader sr = new StreamReader(s, Encoding.ASCII);

            //Write the stream back to the response
            Response.Write(sr.ReadToEnd());
            Response.End(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:33:23.627

```
protected void ExportToExcel(object sender, EventArgs e)
{

    //Get the data from database into datatable
    string strQuery = "select CustomerID, ContactName, City, PostalCode" +" from customers";
    SqlCommand cmd = new SqlCommand(strQuery);
    DataTable dt = GetData(cmd);
    //Create a dummy GridView
    GridView GridView1 = new GridView();
    GridView1.AllowPaging = false;
    GridView1.DataSource = dt;
    GridView1.DataBind();
    Response.Clear();
    Response.Buffer = true;
    Response.AddHeader("content-disposition","attachment;filename=DataTable.xls");
    Response.Charset = "";
    Response.ContentType = "application/vnd.ms-excel";
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    for (int i = 0; i < GridView1.Rows.Count; i++)
    {
        //Apply text style to each Row
        GridView1.Rows[i].Attributes.Add("class", "textmode");
    }
    GridView1.RenderControl(hw);
    //style to format numbers to string
    string style = @"<style> .textmode { mso-number-format:\@; } </style>";
    Response.Write(style);
    Response.Output.Write(sw.ToString());
    Response.Flush();
    Response.End();
} 
```

资料来源：[http ://www.aspsnippets.com/Articles/Export-DataSet-or-DataTable-to-Word-Excel-PDF-and-CSV-Formats.aspx](http://www.aspsnippets.com/Articles/Export-DataSet-or-DataTable-to-Word-Excel-PDF-and-CSV-Formats.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T06:38:36.633

你可以使用 Microsoft.Office.Interop.Excel 库

```
using Microsoft.Office.Interop.Excel; 
```

使用 System.Reflection；

```
 Microsoft.Office.Interop.Excel.Application ObjExcel = new Microsoft.Office.Interop.Excel.Application();
            Microsoft.Office.Interop.Excel.Workbook ObjWorkBook;
            Microsoft.Office.Interop.Excel.Worksheet ObjWorkSheet;
            ObjWorkBook = ObjExcel.Workbooks.Add(System.Reflection.Missing.Value);
            ObjWorkSheet = (Microsoft.Office.Interop.Excel.Worksheet)ObjWorkBook.Sheets[1];

            int counter = 1;
            foreach (var item in SomeDataCollection)
            {
                ObjWorkSheet.Cells[counter, 1] = item.some_property1;
                ObjWorkSheet.Cells[counter, 2] = item.some_property2;
                ObjWorkSheet.Cells[counter, 3] = item.some_property3;     
                counter++;
            }
            ObjWorkSheet.Columns.AutoFit();
            ObjWorkSheet.Columns.get_Range("M1", "M60").ColumnWidth = 25;
    string filename;    
            string[] file_parts = Convert.ToString(DateTime.Now).Split(' ');
            filename = file_parts[0].Replace("/", ".") + "(" + file_parts[1].Replace(":", "-") + ")" + "-file.xls";
            string save_path = AppDomain.CurrentDomain.BaseDirectory + "Content/files/" + filename;

            ObjWorkBook.SaveAs(save_path, Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookNormal,
                                            System.Reflection.Missing.Value, System.Reflection.Missing.Value,
                                            System.Reflection.Missing.Value, System.Reflection.Missing.Value, Microsoft.Office.Interop.Excel.XlSaveAsAccessMode.xlExclusive,
                                            System.Reflection.Missing.Value, System.Reflection.Missing.Value,
                                            System.Reflection.Missing.Value, System.Reflection.Missing.Value,
                                            System.Reflection.Missing.Value);

            ObjWorkBook.Close(false, System.Reflection.Missing.Value, System.Reflection.Missing.Value);
            ObjExcel.Workbooks.Close();
            ObjExcel.Quit(); 
```

文件下载。我使用搜索表单，所以当提交没有 ajax 的表单时，我会返回 excel 文件，否则只需 returl 项目列表

```
[HttpPost]
    public ActionResult Search(MyModel model)
    {
        model.GetCollection();
        if (Request.IsAjaxRequest())
        {
            return PartialView("_listItems", model.SomeCollection);
        }
        else
        {           
            string filename = model.GetExcel();
            string save_path = AppDomain.CurrentDomain.BaseDirectory + "Content/Personal/" + filename;
            HttpContext.Response.Clear();
            HttpContext.Response.ClearContent();
            HttpContext.Response.ClearHeaders();
            HttpContext.Response.AddHeader("content-disposition", string.Format("attachment; filename={0}", filename));
            HttpContext.Response.ContentType = "application/excel";
            HttpContext.Response.WriteFile(save_path);
            HttpContext.Response.End();
            System.IO.File.Delete(save_path);
            return new EmptyResult();
        }              

    } 
```

# image - Facebook 喜欢的盒子图像失真

> ID：12453825
> 
> 赞同：1
> 
> 时间：2012-09-17T05:59:31.910
> 
> 标签：image, height, facebook-likebox, distortion

我在我的网站上使用 FB like box 小部件。我注意到在 FB 上发布的较大图像在框中出现扭曲。

我看到负责这个的css是：

```
.uiScaledImageContainer img {
    height: 100%;
    min-height: 100%;
 } 
```

有没有办法强制`height: auto`我的CSS？显然，我在样式表中为此元素声明的任何内容都会被忽略，即使使用`!important`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T08:17:31.543

因为到目前为止没有任何改变，这里有一些我发现这个问题的更多细节：

*   它只出现在相册中的图像上，而不是在帖子中上传的单个图像上。
*   在我看来，它出现在 chrome 浏览器和 iphone 和 android 设备上，而不是在 Firefox 和 Internet Explorer 上。

也许这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T23:55:06.567

您无法在 Facebook 的 iFrame 中编辑 CSS。我遇到了同样的问题，但是还有一段代码用“height:auto”覆盖了“height:100%”，我得到了相同的结果。如果我将最小高度更改为“自动”，它似乎可以修复它。

原始代码是：

```
.fan_box .uiStreamStory .uiStreamAttachments .photoRedesignAspect .img, .fan_box .uiStreamStory .uiStreamAttachments .photoRedesignCover .img, .fan_box .photoRedesign .img, .uiStreamStory .videoRedesign .uiVideoThumb img {
height: auto;
left: 0 !important;
width: 100%; 
```

和

```
.uiScaledImageContainer img {
height: 100%; <!-- this is being overwritten -->
min-height: 100%;
position: relative; 
```

现在我们只需要有人更新 facebook 的 likebox.php。令人惊讶的是，IE 是唯一没有问题的浏览器。由于某种原因，Firefox 没有完全加载应用程序......

# assembly - 查找输入字符串的长度

> ID：12453830
> 
> 赞同：2
> 
> 时间：2012-09-17T05:59:50.960
> 
> 标签：assembly, mips

这是我到目前为止得到的。我可以解决什么问题才能做到这一点？

```
.data
msg1:.asciiz "Please insert text (max 20 characters): "
msg2:.asciiz "\nThe length of the text is: "

newline: .asciiz "\n"

str1: .space 20
.text
.globl main
main:
addi $v0, $v0,4
la $a0,msg1
syscall #print msg1
li $v0,8
la $a0,str1
addi $a1,$zero,20
syscall   #get string 1

la $a0,str1  #pass address of str1
jal len

len: 
## your code here
addi $t2, $zero, 0 # $t2 is what we want to return in the end -- the count of the length of the character array
addi $s1, $zero, 0 # Index i for array traversing | init. to 0 | i = 0

Loop:

add $s1, $s1, $a0 # Adds the location of the index to the location of the base of the array | $t1 is now the location of: array[index]
lw $t0, 0($s1)

beq $t0, $zero, exit
addi $t2, $t2, 1 # Count = Count + 1
addi $s1, $s1, 1 # i = i + 1
j Loop

exit: 
la $a0,msg2 
li $v0,4
syscall
move $a0,$t0 #output the results 
li $v0,1
syscall

li $v0,10
syscall 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T09:25:26.760

```
add $s1, $s1, $a0 
```

在这里，您覆盖了 $s1，因此将 1 添加到 $s1 不再正确。只需使用字符串的地址（而不是 0）初始化 $s1 并删除此行。

```
lw $t0, 0($s1) 
```

这应该是`lb`。您正在加载一个字节，而不是 4 个字节。

# c# - 修改 C# WebBrowser 的 InvokeMember("click") 的标头

> ID：12453833
> 
> 赞同：0
> 
> 时间：2012-09-17T06:00:02.643
> 
> 标签：c#, browser

我想从`InvokeMember("click")`方法中更改点击请求的正常标头。告诉我怎么做？

# android - 插入其他线程时打开相机需要更多时间

> ID：12453835
> 
> 赞同：4
> 
> 时间：2012-09-17T06:00:27.007
> 
> 标签：android, android-camera

我正在为android编写频闪灯代码。三星galaxy ace不支持闪光模式。所以我自己写了。这是我用来使它成为闪光灯的代码。但是它阻塞了android应用程序的主线程（UI线程），我不想发生这种情况。当我将此代码插入新线程并运行它时，当我测量它时，ON时间会更多。为什么会这样？

```
Camera cam = Camera.open();     
Camera.Parameters pon = cam.getParameters(); 
Camera.Parameters poff = cam.getParameters();

while(true) {
    try {           
        //d = new Date();                           
        //System.out.println("ON START " + d.getSeconds());

        cam.setParameters(pon);
        //because FLASH_MODE_TORCH isnt supported
        pon.setFlashMode(Camera.Parameters.FLASH_MODE_ON); 
        pon.setFocusMode(Camera.Parameters.FOCUS_MODE_INFINITY);                

        s1.start();
        cam.startPreview();         
        cam.autoFocus(new AutoFocusCallback() {
            public void onAutoFocus(boolean success, Camera camera) {
                camera.autoFocus(this);
            }
        });

        Thread.sleep(500);
        //d = new Date();
        s1.stop();
        System.out.println("ON FOR milliseconds : " + s1.getElapsedTime());                         
        cam.stopPreview();

        s2.start();
        Thread.sleep(500);                          
        s2.stop();
        System.out.println("OFF FOR milliseconds : " + s2.getElapsedTime());                            
    } catch (InterruptedException e) { e.printStackTrace(); }
} 
```

我只是将上面的代码插入到新的可运行文件中并说开始，当它插入线程时，ON 时间段更多。经过的时间以毫秒为单位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T13:13:02.300

使用消息处理程序或异步任务。见[处理程序](http://developer.android.com/reference/android/os/Handler.html)

# algorithm - 从一束边创建邻接列表的复杂性？

> ID：12453837
> 
> 赞同：1
> 
> 时间：2012-09-17T06:00:32.877
> 
> 标签：algorithm, complexity-theory, performance

我正在创建一种算法，可以从边列表构建邻接列表。

例如，如果数据输入是：

```
1 2
1 8
2 8
3 5
3 1
4 5
4 6
5 2
5 9
6 4
6 8
7 4
7 10
8 4
8 6
9 4
9 5
10 7
10 3 
```

输出将是：

```
1: 8 4 6
2: 4 6
3: 9 2 8
4: 2 9 8
5: 8 4
6: 5 4
7: 5 6 3
8: 5 6 4
9: 5 6 2
10: 4 5 1 
```

该算法显然受顶点和边数的限制，所以最初我认为它是 O(v + e)。但是我只能通过在带有二维数组的 for 循环中实现 for 循环来使程序工作，我认为这会导致 O(N^2) 的复杂性。

谁能帮助我更好地理解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:18:28.820

这在很大程度上取决于您使用哪种数据结构来存储从顶点到相邻顶点列表的地图。遍历边列表当然会有时间复杂度 O(e)。任何更大的时间复杂度都来自于在地图中找到一个顶点所需的时间以及将一个新项目插入到顶点的相邻顶点列表中所需的时间。如果您使用的是平面数组，那么您可能具有 O(v*e) 复杂度（对于每条边，循环遍历顶点列表以找到所需的顶点），但是通过使用哈希表或树可以大大改善这一点数据结构，为您提供更好的查找性能。

# c# - 如何识别引号 (")

> ID：12453842
> 
> 赞同：2
> 
> 时间：2012-09-17T06:01:28.740
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

环境：Visual Studio 2012、MVC4、Razor、Internet 应用程序。

我在“查看”页面中有一个带有搜索表单的代码......

```
@using (Html.BeginForm("SearchResult", "Home", FormMethod.Get))
{
    @Html.ValidationSummary(false)
    <fieldset>
        <legend>Contact Search</legend>
        <div class="editor-label">
            @Html.LabelFor(model => model.Name)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Name)
            @Html.ValidationMessageFor(model => model.Name)
        </div>
        <p>
            <input name="SearchButton" type="submit" value="Search" /></p>
    </fieldset>
} 
```

然后我使用“@Model.Name”将“model.Name”字符串直接发送到 JavaScript 代码。

问题是......当我在搜索表单中输入引号（“）符号时......例如......（10” android）我遇到了问题。JavaScript 在某处停止工作。如何检查控制器内的这个“model.Name”字符串是否包含（“）并将其更改为 JavaScript？

我的 JavaScript 代码...`url += "&keywords=@Model.Name";` 如果“model.Name”是... 10" android ...它会正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:13:07.510

对于 Javascript，我会使用“转义”进行编码，但最好将“（双）引号替换为 XML 表示形式`&quot;`

至于服务器端，我使用 Microsoft 的 Web 保护库来处理该部分， [http://wpl.codeplex.com/](http://wpl.codeplex.com/)

> Microsoft.Security.Application.Encoder.HtmlEncode(HttpUtility.HtmlDecode(dr["message"].ToString()))

# jsf-2 - 覆盖

> ID：12453847
> 
> 赞同：3
> 
> 时间：2012-09-17T06:01:51.080
> 
> 标签：jsf-2, facelets, templating

有没有办法覆盖`<ui:define>`JSF 模板提供的？

例如`main.xhtml`，包含模板文件的文件包含：

```
<ui:define name="title">SomeTitle</ui:define>
<ui:define name="menu"><ui:include src="path_to_menu_1"/></ui:define>
<ui:define name="content">content_code_goes_here</ui:define> 
```

如果我想创建一个`main2.xhtml`与 相同的文件，`main.xhtml`除了它使用不同的菜单之外，是否可以执行以下操作：

```
<ui:include src="main.xhtml"/>
<ui:define name="menu"><ui:include src="path_to_menu_2"/></ui:define> 
```

其中`<ui:define name="menu">`覆盖具有相同名称属性的标签`main.xhtml`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T10:56:08.953

只需指定`main.xhtml`为`main2.xhtml`.

`main.xhtml`

```
<ui:composition template="sometemplate.xhtml" ...>
    <ui:define name="title">SomeTitle</ui:define>
    <ui:define name="menu"><ui:include src="path_to_menu_1"/></ui:define>
    <ui:define name="content">content_code_goes_here</ui:define>
</ui:composition> 
```

`main2.xhtml`

```
<ui:composition template="main.xhtml" ...>
    <ui:define name="menu"><ui:include src="path_to_menu_2"/></ui:define>
</ui:composition> 
```

# django - 在 AWS 上使用 django 的 ssl

> ID：12453848
> 
> 赞同：3
> 
> 时间：2012-09-17T06:01:58.330
> 
> 标签：django, ssl

我在 Amazon 上托管的网站拥有 ELB 级别的 SSL 认证。我使用以下站点设置了一个中间件以将所有`http`请求转发到`https`：

[http://djangosnippets.org/snippets/2472/](http://djangosnippets.org/snippets/2472/)

它工作得很好。但这是我的问题。每个请求都被转发，所以我注意到点击链接等时有轻微的延迟。没什么特别的。但是有没有办法强制 django 做所有事情`https`呢？当我有代码到`HttpResponse`and时`HttpResponseRedirect`，我怎样才能让它默认为`https`而不是`http`？我试图搜索这个并没有成功......

我知道如果我`https://www...`为每个 URL 输入重定向和页面链接是可能的，但我想尽可能避免这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:06:15.723

查看您发布的中间件，它正在执行您提到的您不想手动执行的操作，即附加`https`到来自您域的每个传入`http`请求。我建议您将此工作卸载到前端服务器（nginx 或 apache）。

示例

*   [Nginx](http://lincolnloop.com/django-best-practices/deployment/servers.html)

*   [阿帕奇](https://stackoverflow.com/questions/2131727/django-and-ssl-question?rq=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-08T02:23:44.860

当 Django 构建要重定向到的绝对 URI 时，它会检查 request.is_secure 以决定它应该使用什么协议方案（http、https 或 ftp）。

Django 默认根据用于请求的协议执行此操作，但正如您所确定的，当在 LB 或代理后面时，由于 LB/代理级别的 SSL 终止，这可能是错误的。

[您可以使用SECURE_PROXY_SSL_HEADER](https://docs.djangoproject.com/en/1.10/ref/settings/#secure-proxy-ssl-header)设置配置 Django 以检测这种确切的场景。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T19:10:09.030

我们目前使用 Nginx 来进行负载平衡、对请求强制使用 SSL，并在 SSL 连接被代理到内部应用服务器时终止它们。它没有花哨的负载平衡功能，但 Nginx 小而快，可以放在任何地方。

这是您可能需要的代码位：

```
# listen on port 80 and redirect to SSL.
server {
   listen         80;
   server_name    site.com;
   rewrite        ^ https://$server_name$request_uri? permanent;
}

# listen on port 443, terminate SSL, and proxy to internal web app
# can be node, rails, whatever.
server {
  listen 443;
  server_name  site.com;
  gzip  on;
  client_max_body_size 250M;

  ssl   on;
  ssl_certificate   /etc/nginx/site.com.crt;
  ssl_certificate_key  /etc/nginx/site.com.key;
  keepalive_timeout  70;

  location / {
    proxy_pass http://127.0.0.1:8080;
    # We add this extra header just so proxied web app
    # knows this used to be an SSL connection.
    proxy_set_header x-https 1;
    include /etc/nginx/conf.d/proxy.conf;
  }
} 
```

# jquery - Jquery 显示/隐藏 div 元素，具体取决于加载的某些页面元素

> ID：12453849
> 
> 赞同：0
> 
> 时间：2012-09-17T06:02:13.930
> 
> 标签：jquery, show-hide

我想让 Jquery 检测是否将某个 div id 加载到当前页面中，然后隐藏另一个 div id 元素，例如：

```
<div id="A1">some content here</div> //initially this div is visible
<div id="C1" style="display: none;">some content here</div> //initially this div is invisible
<div id="B1">some content here</div> 
```

如果 Jquery 检测到 #B1 已加载到当前页面，则隐藏 #A1 并显示 #C1。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:04:49.367

```
$(function () {
    if ($('#B1').length) {
        $('#A1').hide();
        $('#C1').show();
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T06:05:01.177

```
if ($("#B1").length > 0) {
  $("#A1").hide();
  $("#C1").show();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:05:26.587

我假设您在加载文档后加载 div，所以，

```
$('#B1').load('ajax/test.html', function() {
  $('#A1').hide();
  $('#C1').show();

}); 
```

如果您不使用 jQuery，这将`onreadystatechanged`在 #B1 元素上实现。其他明智的做法是在准备好文件时， $(function(){
$('#A1").hide(); $("#C1").show();});

# c# - C# - 类、构造函数和 Resharper - 说明

> ID：12453850
> 
> 赞同：1
> 
> 时间：2012-09-17T06:02:26.200
> 
> 标签：c#, .net, visual-studio-2010, resharper

我在 Visual Studio 中使用 Resharper 工具

考虑下面写的一个非常简单的类。

```
class Test()
{

   //constructors do not have any return type.   
   Test()
   {
      System.Console.WriteLine("Hello World!");
   } 

   static Test()
   {
        System.Console.WriteLine("Hello World in Static constructors");
   }

   public void A()
   {
      System.Console.WriteLine("A simple function in a class");
   }

}

class Program
  {
    static void Main(string[] args)
    {
        var asa = new Test(); //Implicitly Typed local variables.
        asa.A();

    }
} 
```

使用 var（编译器必须从初始化语句右侧的表达式推断变量的类型）。

我有一些澄清问题，它们在下面。

1.  编译器的额外负担？
2.  一个类可以有多少个构造函数？
3.  为什么首先调用静态构造函数？（我通过设置断点来检查？）
4.  为什么不测试 asa = new Test(); 不是 Resharper 的首选？
5.  作为初学者首先使用 Resharper 真的是个好主意吗？（我自己是 C 和 .net 编程的新手！）

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T06:06:45.653

1.  *编译器*的任何额外负担基本上是无关紧要的——它不应该成为您决定是否使用`var`. 正如评论中所指出的，当您使用显式声明的变量时，编译器可能需要做*更多*的工作......但同样，它并不重要。

2.  一个类可以有任意数量的构造函数……尽管它很快就会变得笨拙。

3.  静态构造函数将在第一次使用类之前被调用*一次*（无论是通过静态方法还是构造函数调用）。阅读 C# 规范以获取更多详细信息 - C# 5 规范的第 10.12 节包括：

    > 封闭类类型的静态构造函数在给定的应用程序域中最多执行一次。静态构造函数的执行由在应用程序域中发生的以下第一个事件触发：
    > 
    > *   类类型的一个实例被创建。
    > *   类类型的任何静态成员都被引用。

4.  您可以将 ReSharper 配置为建议替代方案，或将其视为警告等。在这方面，让它按您认为应该的方式工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T06:10:17.370

1.  如果有的话可以忽略不计。否则返回类型将被编译检查。无论如何，你不应该以此为基础做出决定。
2.  只要它们是可区分的，您想要多少就多少。
3.  静态构造函数是类型定义的一部分。当第一次引用类型时调用它们。
4.  你收到什么信息？R# 是可配置的。

编辑：（你不能打败飞碟）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T06:14:44.203

1.  是的，需要做一些额外的工作，但`var`只能在编译器很容易推断类型的情况下使用关键字。

2.  *构造函数的数量*没有限制，但构造函数必须遵循一些规则（即：编译器需要明确调用哪个构造函数）

3.  我不能告诉你*为什么*——假设这只是规则之一。有趣的是 beforefieldinit (http://stackoverflow.com/questions/610818/what-does-beforefieldinit-flag-do, [http://cshapindepth.com/Articles/General/Beforefieldinit.aspx](http://csharpindepth.com/Articles/General/Beforefieldinit.aspx) )

4.  我个人认为，在这种情况下，这只是一个品味问题。有些人倾向于`var`尽可能多地使用，而另一些人则相反。我尝试在以下情况下使用：

    *   我正在使用集合（或者需要大量文本来告诉编译器类型：而不是：

```
Dictionary<<OneOfMyClasses, OtherClasss> dictionary = new Dictionary<OneOfMyClasses, OtherClass>(); 
```

我倾向于使用`var`：

```
var dictionary = new Dictionary<OneOfMyClasses, OtherClass>(); 
```

请注意，它不会影响代码的可读性（即仍然很容易理解实际发生的事情）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T16:45:48.330

感谢大家。在花了一些时间研究之后，我想补充一些可能对某人有所帮助的观点。

免责声明：（以下几点来自（甚至粘贴）codeproject 和其他此类网站。

**1) 每个类只能有一个静态构造函数。**

*原因：静态构造函数必须是无参数的或简单的，不允许构造函数重载。由于 CLR 将调用此构造函数，因此我们无法控制将值传递给此函数。*由于我们不能直接调用静态构造函数，因此拥有多个静态构造函数是没有意义的。

```
class Test
{
   static Test() {...}
   static Test(int a) {...} //would throw error as "Static constructor must be parameter less"
} 
```

**2) 静态构造函数的声明应该没有任何访问说明符。**

原因：CLR 将再次调用静态构造函数，而不是类的任何对象。因此，我们不需要任何访问说明符。

**3) 静态构造函数只能操作该类的静态变量**

原因：非静态成员特定于对象实例。修改其值依赖/绑定到其特定对象实例的变量是没有意义的。

**4) 为什么要使用静态构造函数？给我一个很好的例子**

原因：您可以使用静态构造函数，例如当您想要记录您将使用该类执行的操作时。MSDN 说**“静态构造函数的典型用途是当类使用日志文件并且构造函数用于将条目写入该文件时”。**

**5) 何时调用静态构造函数？**

答：用户无法控制程序中何时执行静态构造函数。.正如其他人和 MSDN 指出的那样，“在创建第一个实例或引用任何静态成员之前，会自动调用静态构造函数来初始化类。”

**6）在C#中使用基类和派生类时，在创建派生类的新实例时，是先调用基类构造函数还是先调用派生类构造函数？**

答：首先调用基类构造函数，然后调用派生类构造函数。

代码示例

```
class DerivedClass : ParentClass
{
     public DerivedClass()
     {
         Console.WriteLine("Derived class constructor!");
     }

}

 class ParentClass
{
     public ParentClass()
     {
         System.Console.WriteLine("Parent class constructor!");
     }
}

class Program
{
    static void Main(string[] args)
    {

        var a = new DerivedClass(); //Implicitly Typed local variables.

    }
} 
```

**7）为什么在你上面的例子中，两个构造函数都有公共访问说明符？如果我指定私有或根本不指定访问说明符怎么办？**

**答：**当你没有指定访问说明符时（这种情况下，构造函数自动变为私有）或者当你使用私有访问说明符时，类不能被实例化。每当一个类包含一个或多个私有构造函数时，它严格（！）不能被实例化。这种类型的构造函数称为特殊实例构造函数，一般在类的所有成员都是静态方法时使用。（可能数学课应该是一个很好的例子。）

**8）关于继承的奖金问题。一个类是否继承自两个不同的类？

严格来说没有。C# 只支持直接继承，当然你也可以使用接口。例如，

```
 interface Test
   {
         void abc();
   }  
   class DerivedClass : ParentClass, Test //Test should not be a class. It can be  a interface.
{
     public DerivedClass()
     {
         Console.WriteLine("Derived class constructor!");
     }

     public void abc()
     {
          //should be publicly defined!
          //non public method could not implement from interface Test
     }

}

 class ParentClass
{
     public ParentClass()
     {
         System.Console.WriteLine("Parent class constructor!");
     }
} 
```

# java - 从 WebDriver 中的弹出窗口切换后，在主窗口中单击“发布”按钮不起作用

> ID：12453852
> 
> 赞同：0
> 
> 时间：2012-09-17T06:02:55.110
> 
> 标签：java, popup, webdriver, selenium-webdriver

我有以下代码在弹出窗口中添加照片，然后在从弹出窗口返回后单击主窗口的 PUBLISH 按钮：

//我现在在主窗口中：

```
String myWindowHandle = driver.getWindowHandle();
driver.findElement(By.linkText("Add Photo")).click();//Add Photo link
driver.switchTo().window("uploadPhoto"); 
```

我已经过渡到弹出窗口：

```
elemById("widget_129_upload_file").sendKeys("F:\\Blossom.jpg");//Browsing a .jpg file
driver.findElement(By.cssSelector("input.button.submit")).click();//this is UPLOAD button at pop up window
driver.switchTo().defaultContent();
driver.switchTo().window(myWindowHandle); 
```

我再次回到主窗口：

```
elemByCssSelector("input[value=Publish]").click();//Publish button at main window WHICH IS NOT BEING CLICKED 
```

不幸的是，主窗口的发布按钮不起作用。没有错误，硒测试停止。我的代码有什么问题？有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T04:34:37.980

当在弹出窗口中没有上传照片时，我的问题中提到的相同方式效果很好：

```
String myWindowHandle = driver.getWindowHandle();
driver.switchTo().window("Add Placement");//switch to pop up window 
```

//在弹出窗口中：填写一些文本字段并单击提交按钮 //以下代码用于切换到主窗口

```
driver.switchTo().defaultContent();
driver.switchTo().window(myWindowHandle); 
```

//下面这行代码是主窗口中的一个断言

```
assertTrue(isTextPresent("placementname:WWW"), "placement is not created"); 
```

所以，我的猜测是，在返回主窗口后，在弹出窗口上传照片需要很长时间，测试执行正在停止

# extjs4.1 - 布局运行失败 Extjs

> ID：12453862
> 
> 赞同：2
> 
> 时间：2012-09-17T06:03:58.103
> 
> 标签：extjs4.1

我`border`在 Extjs4.0 中使用布局。它在那里工作得很好。当我将我的库升级到 extjs4.1 时，它显示错误，如`layout run failed`，并且面板未加载。我没有遇到这样的错误，所以请帮我解决这个错误。

我的代码是

```
Ext.define('TextFit', {
    extend : 'Ext.container.Container',
    title: 'Sample text',
    layout: {
        type : 'border'
    },
    items : [{
        title : 'left panel',
        region : 'west'
    },{
        title : 'Center panel',
        region: 'center'
    }]
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-01T15:16:04.277

尝试添加

```
layout: 'fit' 
```

到您的边框布局的父容器。我有同样的问题，这为我解决了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-27T17:01:41.430

来自 BorderLayout 的文档：

*   任何具有西部或东部区域的子项都可以配置为初始宽度、Ext.layout.container.Box.flex 值或初始百分比宽度字符串（简单地除以 100 并用作 flex价值）。'center' 区域的 flex 值为 1。

南北类似，但高度而不是宽度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-03T13:14:58.120

我在渲染面板之前尝试将一组复杂的（深层嵌套）项目添加到面板时遇到了这个问题。一旦我在面板知道它的尺寸后添加了这些项目，它就起作用了：

```
addItems: function() {
    this.on("boxready", function(){ this.add(items); }, this, {single: true});  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T13:48:45.667

您可以尝试使用：

```
 <script type="text/javascript" src="extjs/src/diag/layout/Context.js"></script>
 <script type="text/javascript" src="extjs/src/diag/layout/ContextItem.js"></script> 
```

只需将其放入您的 index.html 并检查控制台以查看其中是否有任何错误。不要介意您看到的大多数警告。

如果出现如下错误：“...仍处于连接/附加状态”，请查看该项目并确保它具有锚点以外的布局。

如果您在控制台中没有任何错误并且仍然存在布局问题，您可以尝试使用页面分析器。

您应该能够在您的 extjs zip 中找到分析器。如果它部署在您的服务器上，您可以访问：http://< server-address >/extjs/examples/page-analyzer/page-analyzer.html

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-27T13:57:59.843

尝试将 flex 属性添加到这两个项目......所以修改后的代码将是

```
....

items : [{
    title : 'left panel',
    region : 'west',
flex:1 //add here
},{
    title : 'Center panel',
    region: 'center',
flex:1 //and here
}] 
```

……

# android - 将我的应用程序与 android 源代码集成并编译（我的应用程序是使用 NDK 开发的）

> ID：12453875
> 
> 赞同：1
> 
> 时间：2012-09-17T06:05:45.550
> 
> 标签：android, compilation, android-ndk, android-source

我用 NDK 开发了一个调谐器应用程序。现在我想实现这一点。

第 1 步：将我的应用程序添加到 android 源代码中

第2步：我需要编译android源

第 3 步：我需要在我的设备上闪烁输出。

闪烁编译的输出后，在设备中我必须有我的应用程序。

对于我上面所说的所有 3 个步骤，请逐步帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:26:18.740

Android 应用可以使用 JNI 与本机代码 (NDK) 进行通信。按照[http://developer.android.com/tools/sdk/ndk/index.html](http://developer.android.com/tools/sdk/ndk/index.html) 链接了解更多关于在 Android 应用程序中集成本机代码的信息。然后构建你的安卓应用。

在 android_source 代码中添加您的 android 应用程序。可能在 /android_source/packages/apps/your_app 下。在 android_souce/build/target/product/generic.mk 中进行更改，在其中将您的新项目名称添加到应用程序列表下以与它们一起构建您的应用程序。

现在编译 android 源代码并在您的设备上刷写它。您可以在设备上看到您的应用。

# php - 在 Yii 中进行计算只需要手动插入值

> ID：12453878
> 
> 赞同：2
> 
> 时间：2012-09-17T06:06:02.873
> 
> 标签：php, jquery, yii, yii-events

我正在写一个小发票申请`Yii`。我有`database`模型`item`。`item database`是这样的

```
 +++++++++++++++++
  |  InvoiceItems |
  +++++++++++++++++
  +      id       +
  +      name     +
  +  description  +
  +    unit_cost  +
  +    quantity   +
  +    tax        +
  +    total      +
  +++++++++++++++++ 
```

现在，在`item model`我制作了一个下拉列表中，我`unit_cost, quantity, tax`在 Ajax 中获取所有项目名称及其等。为了做到这一点`total`，我的业务逻辑如下：

1.  `unit_cost`将乘以`quantity`
2.  然后税收将被添加到总数中。
3.  总数最终应该会出现在文件的`total`字段中`_form.php`。

为了计算，我写了这个`jQuery`脚本：

```
<script type="text/javascript">
jQuery(document).ready(function(){
  jQuery("#InvoiceItems_unit_cost, #InvoiceItems_quantity, #InvoiceItems_tax").on('keyup',function(event){
    var subtotal = jQuery("#InvoiceItems_quantity").val() * jQuery("#InvoiceItems_unit_cost").val();
    var total = subtotal + (subtotal  * jQuery("#InvoiceItems_tax").val() / 100);
    jQuery("#InvoiceItems_total").val(total);
  });
});
</script> 
```

当我*手动插入值*时这工作正常，但当值来自数据库时它不起作用。我完全被困住了。

**更新**

当我试图通过 ajax 在 Firefox 的控制台选项卡中从数据库中获取后查看值时`console.log("#InvoiceItems_quantity").val()`，它正在显示`an empty string`。Ajax 代码以 json 的形式从数据库中获取数据

```
 <?php echo $form->dropDownList($customers,'customer_name',CMap::mergeArray(CHtml::listData(Customers::model()->findAll(), 'customer_name',       'customer_name'
        ),
        array(
        'empty'=>array('Select'=>'- - Choose One - -'),
        'id'=>'Customers_name',
        'ajax'=> array(
            'type'=>'GET',
            'id'=>'abc',
            'url'=>$this->createUrl('Invoices/customerdetails'),// action that will generate the data
            'data'=>'js:"customer_name="+$(this).val()',// this is the data that we are sending to the action in the controller
            'dataType'=>'json',// type of data we expect back from the server
            'success'=>'js:updateFieldsCustomers',// a javascript function that will execute when the request completes
            'beforeSend'=>'js:function(){
                if($("#Customers_name").val() == "create_customer_link") {
                    addCustomers();
                    $("#dialogCustomers").dialog("open");
                    return false;
                }
            }',
        ),
        'options'=>array(
            'create_customer_link' => array('class'=>'create-link'),
        )
    )
);?>

   <?php
  Yii::app()->clientScript->registerScript('update','
  function updateFieldsCustomers(data, textStatus, jqXHR){
  // select each input field by id, and update its value
  $("#InvoiceItems_unit_cost").val(data.unit_cost);
  $("#InvoiceItems_quantity").val(data.quantity);
  $("#InvoiceItems_discount").val(data.discount);
  // similarly update the fields for the other inputs
  }
');
  ?> 
```

**最近更新**

当我尝试时，`console.log("#InvoiceItems_quantity").val()`我看到它显示了更改后该字段的实际值。意味着选择一个值时，它显示了控制台面板中先前输入值的值。我认为这一切都在工作，因为我已经使用了`on change`函数，但是当我使用`.select`它时，它根本不起作用。控制台面板中没有显示任何值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T13:49:12.947

我得到了这个问题的解决方案。应该是这样的

```
<script type="text/javascript">
jQuery(document).ready(function(){
  jQuery("#Product_name").ajaxComplete(function(event,request,settings){
    var subtotal = jQuery("#InvoiceItems_quantity").val() * jQuery("#InvoiceItems_unit_cost").val();
    var total = subtotal + (subtotal  * jQuery("#InvoiceItems_tax").val() / 100);
    jQuery("#InvoiceItems_total").val(total);
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:40:13.787

试试这个

```
 <script type="text/javascript">
    jQuery(document).ready(function(){
      jQuery("#Items_unit_cost, #Items_quantity, #Items_discount").on('keyup',calculate_total);

     function calculate_total(){
           var subtotal = jQuery("#Items_quantity").val() * jQuery("#Items_unit_cost").val();
           var total = subtotal + (subtotal  * jQuery("#Items_discount").val() / 100);
           jQuery("#Items_total").val(total);
         }

calculate_total();

    });

    </script> 
```

# ios5 - 在opengl的绘画应用程序中撤消/重做

> ID：12453879
> 
> 赞同：0
> 
> 时间：2012-09-17T06:06:06.140
> 
> 标签：ios5, opengl-es

我正在使用 openGL 在 iOS 中开发绘图应用程序。每次切换页面时，我都会将绘图保存为 .png。当我回来时，我使用纹理将保存的图像设置为 2 的幂。现在在撤消/重做时，我清除整个帧缓冲区并重绘所有（。 png+remaining stuff）。在这种情况下，每次绘制大纹理图像时，我的性能都会降低。

有什么办法可以解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T18:21:59.903

我建议您不要将任何内容保存到永久存储中，除非应用程序被终止。

此外，使用不大于 1024 x 1024 的纹理。

此外，如果您没有利用透明度，请避免使用 .png。.jpg 的大小要小得多。

这应该会显着提高你的表现。

# process - 如何唤醒被 pause() 阻塞的进程？

> ID：12453883
> 
> 赞同：0
> 
> 时间：2012-09-17T06:06:26.013
> 
> 标签：process, block

我需要分别使用 SIGUSR2 和 SIGUSR1 阻止和唤醒进程。下面是我的信号处理程序子例程。如何唤醒被暂停阻止的进程？

```
void sig_handler(int sig) { 
    static int i = 1;
    if(sig == SIGUSR2) {
    pause();
    }
    else if(sig == SIGUSR1) {
/* I don't what to write here */
    }
} 
```

另外，我在某处读到 pause() 不是一个好的编程习惯，还有其他方法可以暂停进程一段时间吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:27:58.830

看到[这个页面](http://www.gnu.org/software/libc/manual/html_node/Pause-Problems.html)

一般来说，在信号中做很多工作是……棘手的。有些东西不是异步信号安全的，因此它使健壮的编程变得有点困难。在您的情况下， pause() 等待信号到达，但由于您是从信号处理程序调用它，所以它不会在那里工作（我认为）。

至于使进程休眠并在信号上恢复。看看我上面链接的页面。最好的方法是让信号处理程序简单地设置标志并让主线程（即在 main() 或事件循环中）对这些标志作出反应。按照页面的建议，在收到 SIGUSR2 时使用 sigsuspend 暂停进程，直到收到 SIGURS1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-18T05:00:46.317

这很简单。使用'kill'系统调用-

```
void sig_handler(int sig) { 
    static int i = 1;
    if(sig == SIGUSR2) {
    pause();
    }
    else if(sig == SIGUSR1) {
        kill(<pid of process to wake up>, sig);
        // make sure that process with pid has registered for sig
    }
} 
```

# java - 如何在第一次请求时检测历史 API、localStorage 等浏览器功能？

> ID：12453884
> 
> 赞同：4
> 
> 时间：2012-09-17T06:06:30.620
> 
> 标签：java, html, jsf, browser

**有什么方法可以在从服务器上的客户端收到的第一个请求**中检测历史 API、localStorage 等浏览器功能，以便我可以根据浏览器功能自定义响应页面数据？

我知道如何在页面加载时执行此操作（我使用`Modernizr`JS 库执行此操作）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:08:01.847

您可以在第一个页面加载时设置一个 cookie。如果所述 cookie 不存在，请检查功能。伪：

```
if(feature_cookies_does_not_exist) {
   check_for_features()
   create_feature_cookie()
} 
```

# javascript - 如何计算形状高度和宽度，包括画布中的边框宽度？

> ID：12453885
> 
> 赞同：0
> 
> 时间：2012-09-17T06:06:34.357
> 
> 标签：javascript, html, canvas

我正在使用 HTML5 和 javascript 开发一个项目。我有一个将加载文档的画布。

```
canvas = document.getElementById('pdf');
ctx = canvas.getContext('2d'); 
```

在上面的画布中，将加载文档。我必须在运行时在其上绘制不同的形状作为单独的画布。所以在绘图时我必须为每个形状创建一个新的画布（必需）。

**鼠标按下**

```
function mouse_Pressed(e) {
     getMouse(e);//getting current X and Y position
 x1=mx; y1=my;
    var cords=getMousePos(canvas,e); 
    annCanvas=document.createElement('canvas'); //Creating 
    annCanvasContext=annCanvas.getContext('2d');
     isDraw=true;isDrawAnn=true;
} 
```

**鼠标移动**

```
function mouse_Dragged(e)
{
    if(isDraw)
    {
    getMouse(e);
    x2=mx; y2=my;
    calculatePoints(x1,y1,x2,y2);
    var width=endX-startX;
    var height=endY-startY;
    annCanvas.style.position = "absolute";
    annCanvas.width=4; //Width of square
    annCanvas.style.left=""+startX+"px";
    annCanvas.style.top=""+startY+"px";
    annCanvas.height=height;
    annCanvas.style.zIndex="100000";

    document.getElementById("canvas").appendChild(annCanvas);
    annCanvasContext.fillStyle='rgb(255,255,0)';
    annCanvasContext.lineWidth=borderWidth;
    annCanvasContext.strokeRect(0,0,width,height);
    annCanvasContext.stroke();
 }
} 
```

**鼠标释放**

```
function mouse_Released(e)
{
 isDrag = false;
 isDraw=false;
 isDrawAnn=false;
} 
```

主要问题是，如果我正在绘制边框宽度为 50 的矩形，那么由于画布的面积较小（即矩形形状），它的画布外部部分将被切割。所以我想用它的边框宽度计算画布高度、宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T09:04:29.977

这应该考虑到边框宽度以及宽度等。

```
function init() {
    var canvas = document.getElementById("canvas");
    var ctx = canvas.getContext("2d");
    var s = size(canvas);
    alert(s[0]);
}

function size(el) {
    var clientHeight = (el.offsetHeight > el.clientHeight) ? el.offsetHeight : el.clientHeight;
    var clientWidth = (el.offsetWidth > el.clientWidth) ? el.offsetWidth : el.clientWidth;
    return [clientWidth, clientHeight];
}; 
```

HTML：

```
<body onload="init();">
<canvas id="canvas" width="200" height="300" style="width: 500px; height: 400px; border: 10px solid brown;"></canvas>
</body> 
```

# symfony - 使用 swiftmailer 和 symfony2 有条件地附加文件

> ID：12453887
> 
> 赞同：0
> 
> 时间：2012-09-17T06:06:40.970
> 
> 标签：symfony, swiftmailer

我目前正在使用 swiftmailer 附加邮件。我有时需要将图像文件附加到邮件中，有时我必须在没有附件的情况下发送邮件。

这是我试过的

```
function sendMail($mailer,$subject , $to , $msg, $isAttachment, $attach)
    {
        $message = \Swift_Message::newInstance()
        ->setSubject($subject)
        ->setFrom('abc@gmail.com')
        ->setTo('xyz@gmail.com')
        ->setBody($msg)
        ->setContentType("text/html");

    if($isAttachment){

            $message->attach(Swift_Attachment::fromPath($attach));
        }

        $this->get('mailer')->send($message);

    } 
```

`$isAttachment`是一个布尔变量，`1`如果有附件。

这是我得到的错误。

```
Fatal error: Class 'MyProject\FrontBundle\Controller\Swift_Attachment' not found in /var/www/ABC/src/Myproject/FrontBundle/Controller/trialController.php on line 187 
```

这是我第一次在 swiftmailer 工作。如果这个问题听起来很幼稚，请原谅我。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T06:50:38.833

命名空间问题。你这样做了`\Swift_Message::newInstance`，你必须这样做：

```
$message->attach(\Swift_Attachment::fromPath($attach)); 
```

# ipython - IPython 日晒？

> ID：12453888
> 
> 赞同：5
> 
> 时间：2012-09-17T06:06:42.643
> 
> 标签：ipython, color-scheme, spyder

我正在运行 Spyder 并使用 Pschelo 的[spyder solarized 主题](https://github.com/pshchelo/spyder-color-solarized)，但控制台（包括 IPython 控制台）不受 IDE 主题的影响。如何调整 IPython 中的默认颜色主题以使其使用[日晒](http://ethanschoonover.com/solarized)颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T04:51:58.410

在 2.1 版中，无法更改配色方案以使用为编辑器定义的配色方案。只有两个不同的版本：白色和深色背景（我不知道它们是否仍然正常工作）

但是，我们计划在 2.2 版中为 IPython 使用细粒度的配色方案（因为正如 Thomas 所指出的，IPython 现在可以正确处理它们）。

# google-maps - 从地图中删除谷歌地图标记是有效的，现在它不是

> ID：12453890
> 
> 赞同：-1
> 
> 时间：2012-09-17T06:06:48.927
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

由于我正在研究面向对象的 javascript，因此我创建了一个地图对象，并且由于我需要维护所有以前的路线和标记，因此我没有创建新的地图对象。我的代码如下

```
function map() {

    this.defaultMapOption   =    {
        center : new google.maps.LatLng(0, 0),
        zoom : 1,
        mapTypeId : google.maps.MapTypeId.ROADMAP
    };

    this.map    =   null;

    this.marker =   [];

    this.directionsDisplay = null;
}

map.prototype.init = function() {

    this.map    =   new google.maps.Map(document.getElementById("map"), this.defaultMapOption);

    var map1    =   this.map;
    var marker1 =   this.marker;

    var count   =   0;

    google.maps.event.addListener(this.map, 'click', function(event) {

        count++;

        $(".tabNavigation li").find("a[href=markers]").trigger('click');

        if ( marker1[count] ) {
            marker1[count].setPosition(event.latLng);
        }
        else
        {
            marker1[count] = new google.maps.Marker({
                position: event.latLng,
                map: map1,
                draggable : true
            });

            //by clicking double click on marker, marker must be removed.
            google.maps.event.addListener(map.marker[count], "dblclick", function() {

                console.log(map.marker);

                map.marker[count].setMap(null);//this was working previously
                map.marker[count].setVisible(false);//added this today

                $("#markers ul li[rel='"+count+"']").remove();

            });

            google.maps.event.addListener(marker1[count], "dragend", function(innerEvent) {
                var geocoder = new google.maps.Geocoder();

                geocoder.geocode({'latLng': innerEvent.latLng}, function(results, status) {

                    if (status == google.maps.GeocoderStatus.OK) {
                        map.addMarkerData(results, count);
                    }
                    else
                    {
                        alert("Geocoder failed due to: " + status);
                    }
                });
            }); 

            var geocoder = new google.maps.Geocoder();

            geocoder.geocode({'latLng': event.latLng}, function(results, status) {

                if (status == google.maps.GeocoderStatus.OK) {

                    map.addMarkerData(results, count);
                }
                else
                {
                    alert("Geocoder failed due to: " + status);
                }
            });
        }
    });

} 
```

只有上面的代码只适用于一个标记。表示第一次标记在双击时被删除。之后它将无法正常工作。

任何关于它为什么停止工作的想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:45:56.383

您的 count 值随着新标记的增加而增加，并且 in `addListener(map.marker[count],...)`， count 将包含最新值。所以只有那个标记会被删除。

因此，您应该`count`在 addListener 函数的末尾递减该值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:25:48.083

您正在添加标记 [1]，但随后您尝试删除标记 [0]。将您`count++;`从函数的开头移动到结尾。

# asp.net-mvc - 2个属性一个validationMessage

> ID：12453896
> 
> 赞同：0
> 
> 时间：2012-09-17T06:07:54.043
> 
> 标签：asp.net-mvc, validation, jquery-validate

我有一个 MVC 表单，我希望用户输入他的名字和姓氏，但我只想让标签说 `FullName : [input for First Name] [input for Surname] [Validation Message]`

它必须是一个验证消息，验证在 [验证消息] 中填写的名字和姓氏只会是一个“*”，但验证摘要必须显示两个验证错误，例如。名字是必需的，姓是必需的。

我正在使用启用了所有正常验证的 MVC4。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:12:02.317

除非有人能想出一个更简单的解决方案，否则我会有一个自定义验证属性并将其应用于这些属性中的任何一个（很可能是姓氏），并让它为您执行“必需”验证。然后，如果有错误，您可以输出一条消息。

# php - 如何在 CakePHP 1.3 中呈现以 CamelCase 命名的视图？

> ID：12453899
> 
> 赞同：0
> 
> 时间：2012-09-17T06:08:02.923
> 
> 标签：php, cakephp, naming-conventions, element

CakePHP 1.3 中的命名约定有点麻烦。我有一个名为 storeItem.ctp 的元素，当我试图从另一个视图调用它时 - 它工作得很好，但是当我试图将它用作操作视图时（$this->viewPath = 'elements'; 和然后 $this->render(null, 'ajax', '/canvas/storeItem');) 我收到错误消息：错误：确认您已创建文件：***views/elements/canvas/store_item.ctp . 如何在不重命名元素的情况下修复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:27:34.670

[说明为什么您的代码不能按预期工作的解释写在说明书](http://book.cakephp.org/1.3/view/980/render)底部的第二段中。你应该这样尝试：

```
$this->layout = 'ajax';
$this->render('/elements/canvas/storeItem'); 
```

# android - 在 .js 文件和 .html 文件中添加断点

> ID：12453903
> 
> 赞同：-1
> 
> 时间：2012-09-17T06:09:16.110
> 
> 标签：android, eclipse, breakpoints

任何人请告诉我`can i put break point in .js file or in .html file inside the eclipse`？我只能在 .java 文件中放置断点。有没有加什么插件啊？

注意：我在设备中运行应用程序，所以如果 html 文件加载了 webview，那么我想调试那个 html 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T13:27:51.940

试试 jsHybugger： http: [//www.jshybugger.org/](http://www.jshybugger.org/)

它允许您设置断点、单步执行、捕获异常以及与 JS/DOM 环境交互。您可以从 Eclipse 或远程桌面上的 Chrome 或与 Chrome 兼容的调试器中使用它。它可以与创建自己的 webView 的应用程序一起使用。

但是，您必须安装一些文件——但使用起来可能并不比 weinre 复杂。它确实广泛地修改了 JS 文件（动态地，对用户透明）以启用所有这些调试——webKit 确实应该原生支持 javascript 调试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T06:23:45.323

对于调试 javascript，您可以使用 firebug 或 IE 开发人员工具 (F10) 并在代码中放置断点，因为它在客户端浏览器上运行。

# asp.net - 使用数据源传递参数

> ID：12453905
> 
> 赞同：0
> 
> 时间：2012-09-17T06:09:33.770
> 
> 标签：asp.net, gridview

我需要帮助将参数传递给 DataSource`BindCompanyCharItems()`以过滤记录，我将其绑定到`CheckList`被调用的`chklstCompCharItems`.

我尝试使用的参数是`<asp:BoundField DataField="Id" HeaderText="CompCharID" />`

我的网格视图：

```
<asp:GridView ID="grid_Data" runat="server" Width="100%" AutoGenerateColumns="false">
   <Columns>
        <asp:BoundField DataField="Id" HeaderText="CompCharID" />
        <asp:BoundField DataField="Name" HeaderText="Comp Char Name" />
        <asp:TemplateField HeaderText="Invite Permission">
        <ItemTemplate>
             <asp:CheckBoxList ID="chklstCompCharItems" DataSource='<%# BindCompanyCharItems()%>' DataTextField="Name" DataValueField="Id" SelectedValue='<%# Bind ("Id") %>'  runat="server">
             </asp:CheckBoxList>  
        </ItemTemplate>
       </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:22:04.903

试试下面的代码：

```
DataSource='<%# BindCompanyCharItems((Eval("Id")))%>' 
```

您的“BindCompanyCharItems()”必须接受参数，然后您应该使用此参数进行过滤。

# hadoop - 使用“本地”S3 作为 HDFS 的替代品？

> ID：12453907
> 
> 赞同：3
> 
> 时间：2012-09-17T06:09:48.277
> 
> 标签：hadoop, amazon-s3, cloudera, jets3t

我一直在笔记本电脑上测试[最新的 Cloudera CDH4](https://ccp.cloudera.com/display/CDH4DOC/Installing+CDH4+on+a+Single+Linux+Node+in+Pseudo-distributed+Mode#InstallingCDH4onaSingleLinuxNodeinPseudo-distributedMode-InstallingCDH4withYARNonaSingleLinuxNodeinPseudodistributedmode) `hadoop-conf-pseudo`（即 MRv2 或 YARN），它有 4 个内核、8GB RAM 和 Intel X25MG2 SSD。操作系统是 Ubuntu 12.04LTS 64 位。到目前为止，一切都很好。

看着[Setting up hadoop to use S3 as a replacement for HDFS](http://wiki.apache.org/hadoop/AmazonS3)，我想在我的笔记本上做 - 在这个笔记本上，我和我的同事实现了一个 S3 模拟器。

不过，我找不到可以设置[jets3t.properties](http://jets3t.s3.amazonaws.com/toolkit/configuration.html#jets3t)以将终点更改为`localhost`. 我下载`hadoop-2.0.1-alpha.tar.gz`并搜索了源代码，但没有找到任何线索。[SO Using s3 as fs.default.name or HDFS](https://stackoverflow.com/questions/6271222/using-s3-as-fs-default-name-or-hdfs)上有一个类似的Q ？，但我想在我们的实验中使用我们自己的轻量级和快速 S3 仿真层，而不是 AWS S3。

我将不胜感激有关如何将端点更改为不同主机名的提示。

问候，

——扎克

# mysql - 如何在 MySQL 数据库中存储 Paypal 十进制金额

> ID：12453910
> 
> 赞同：2
> 
> 时间：2012-09-17T06:10:06.153
> 
> 标签：mysql, sql, paypal

嗨，在 Paypal 交易后，金额应存储在数据库中。但十进制金额未存储在数据库中，它转换为整数。我想将其作为十进制数存储在数据库中。

例如：amt = 0.5 它在 MySQL 数据库中存储为 1。我想将它作为 0.5 存储在数据库中

任何人都可以帮助我如何处理查询。

提前致谢。

我是 Paypal 和 MySQL 的新手。如果我的问题有任何错误，请 fg。

这是我的代码

```
 <?php
        define("DB_HOST", "localhost");
          define("DB_USERNAME", "root");
          define("DB_PASSWORD", "");
           define("DB_DATABASE", "test");
          $connect = mysql_connect(DB_HOST, DB_USERNAME, DB_PASSWORD) or die("Database Connection Error");
          mysql_select_db(DB_DATABASE) or ("Database Selection Error");

          session_start();
         $uid = $_SESSION['uid'];
          $username=$_SESSION['username'];

          $item_no = isset($_GET['item_number']) ? $_GET['item_number'] : null;
           $item_transaction = isset($_GET['tx']) ? $_GET['tx'] : null ;
                $item_price = isset($_GET['amt']) ? $_GET['amt'] : null ;
             $item_currency = isset($_GET['cc']) ? $_GET['cc'] : null ;;

           $result = mysql_query("INSERT INTO sales(pid, uid, saledate,transactionid,amt) VALUES('$item_no', '$uid', NOW(),'$item_transaction','$item_price')");
           if($result){
           echo "<h1>Welcome, $username</h1>";
                echo '<h1>Payment Successful</h1>';

             }else{
                  echo "Payment Error";
                   }

                 ?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T06:11:48.897

您的列的数据类型必须是`decimal`并且必须具有`precision and scale`。`precision`表示为值存储的有效位数，表示`scale`可存储在小数点后的位数。

例子

```
paypalAmount DECIMAL(10,2) 
```

默认情况下，精度值为 10，比例为 0。如果您的比例值是，`0`那么它将没有十进制值并导致您插入的值四舍五入。

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!2/bd177/1)

# iphone - 如何在 iphone 应用程序开发中添加两个 uiimageview 并将其保存到 iphone 照片库？

> ID：12453913
> 
> 赞同：2
> 
> 时间：2012-09-17T06:10:21.363
> 
> 标签：iphone, ios, uiimageview, uiimagepickercontroller, save-image

我直奔主题，我的问题是，我有一个 uiview 控制器，它带有 3 个按钮和一个 uiimage 视图。现在，

1.  当我按下第一个按钮时，我正在从 iphone 默认照片库中获取图像并放置在 uiimageview 上。

2.  当我按下第二个按钮时，它将从照片库中获取另一张图像并放置在上一张图像上。

3.  现在，当我按下第三个按钮时，这两个图像将添加并使其成为一张图像并保存在相册中。

我已经完成了第 1 步和第 2 步，但我该怎么做第 3 步？

**编辑**

假设图片中有一个没有胡须的人（image1），但我正在添加另一个胡须图像（image2）来制作一个他看起来像胡须男子的图像（image3）。我想将图像 3 保存在相册中。

提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:19:35.900

在按钮**TouchUpInSide**事件中编写此代码

**创建第一个图像**

```
UIImage *myImage = [UIImage imageNamed:@"image1.png"]; 
```

**保存第一张图片**

```
UIImageWriteToSavedPhotosAlbum(myImage, self, nil, nil); 
```

**创建第二个图像**

```
myImage = [UIImage imageNamed:@"image2.png"]; 
```

**保存第二张图片**

```
UIImageWriteToSavedPhotosAlbum(myImage, self, nil, nil); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T05:31:17.393

我自己也有同样的问题，以前我是这样解决的

试试这个类别代码....

**.h 文件：**

```
#import <UIKit/UIKit.h>

@interface UIImage (MyImage)

+ (UIImage*)imageFromView:(UIView*)view;
+ (UIImage*)imageFromView:(UIView*)view scaledToSize:(CGSize)newSize;
+ (UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize;
+ (void)beginImageContextWithSize:(CGSize)size;
+ (UIImage *)croppedImage:(UIImage *)myImage :(CGRect)bounds;

//masking the image ....

+ (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage;

@end 
```

**.m 文件：**

```
#import "UIImage+MyImage.h"

@implementation UIImage (MyImage)

+ (void)beginImageContextWithSize:(CGSize)size
{
    if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
        if ([[UIScreen mainScreen] scale] == 2.0) {
            UIGraphicsBeginImageContextWithOptions(size, YES, 2.0);
        } else {
            UIGraphicsBeginImageContext(size);
        }
    } else {
        UIGraphicsBeginImageContext(size);
    }
}

+ (void)endImageContext
{
    UIGraphicsEndImageContext();
}

+ (UIImage*)imageFromView:(UIView*)view
{
    [self beginImageContextWithSize:[view bounds].size];
    BOOL hidden = [view isHidden];
    [view setHidden:NO];
    [[view layer] renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    [self endImageContext];
    [view setHidden:hidden];
    return image;
}

+ (UIImage*)imageFromView:(UIView*)view scaledToSize:(CGSize)newSize
{
    UIImage *image = [self imageFromView:view];
    if ([view bounds].size.width != newSize.width ||
        [view bounds].size.height != newSize.height) {
        image = [self imageWithImage:image scaledToSize:newSize];
    }
    return image;
}

+ (UIImage*)imageWithImage:(UIImage*)image scaledToSize:(CGSize)newSize
{
    [self beginImageContextWithSize:newSize];
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    [self endImageContext];
    return newImage;
}

+ (UIImage *)croppedImage:(UIImage *)myImage :(CGRect)bounds {
    CGImageRef imageRef = CGImageCreateWithImageInRect(myImage.CGImage, bounds);
    UIImage *croppedImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    CGSize asd =  croppedImage.size;
    return croppedImage;
}

+ (UIImage*) maskImage:(UIImage *)image withMask:(UIImage *)maskImage {

    CGImageRef maskRef = maskImage.CGImage; 

    CGImageRef mask = CGImageMaskCreate(CGImageGetWidth(maskRef),
                                        CGImageGetHeight(maskRef),
                                        CGImageGetBitsPerComponent(maskRef),
                                        CGImageGetBitsPerPixel(maskRef),
                                        CGImageGetBytesPerRow(maskRef),
                                        CGImageGetDataProvider(maskRef), NULL, false);

    CGImageRef masked = CGImageCreateWithMask([image CGImage], mask);

    CGImageRelease(mask);
    CGImageRelease(maskRef);
    return [UIImage imageWithCGImage:masked];

}

@end 
```

我的设计将是包含两个图像视图的视图（命名为combinedView），一个只是源图像[即没有胡须的人]在该图像顶部我有胡须图像...

然后我用这种方式制作图像....

```
UIImage *myMaskedImage=[UIImage imageFromView:combinedView ]; 
```

将此保存到相册使用此...

```
 UIImageWriteToSavedPhotosAlbum(myMaskedImage, self, nil, nil); 
```

试试这个主意....

**新更新：** 您需要维护此结构，并且`theView`背景颜色为透明色

```
 +theView ---
                 |
                 ->imageview1(person)
                 |
                 ->imageView2(beard alone) 
```

# c - 如何使用 libxml2 使用 C 编程语言中的模式文件验证 xml 文件

> ID：12453914
> 
> 赞同：3
> 
> 时间：2012-09-17T06:10:23.223
> 
> 标签：c, libxml2

我一直在尝试使用我的 C 代码中的模式文件来验证 XML 文件。验证成功发生，说明文件是有效还是无效。

但我的问题是它只打印有效/无效。应该有一个关于 xml 文件中缺少的内容的报告/输出，以防它无效。可能类似于 XML 文件中的行号。

希望，我已经把自己说清楚了。

这是我的 C 代码：-

```
 int validateXmlFile()
{
    int iError = 0;
    xmlDocPtr pDoc;
    xmlDocPtr pSchemaDoc;
    xmlSchemaParserCtxtPtr pSchemaCtxt;
    xmlSchemaPtr pSchema;
    xmlSchemaValidCtxtPtr pValidCtxt;
    char * xmlFilename = "C:\\Documents and Settings\\pbhatia\\Desktop\\Schema\\ipt_config.xml";
    char * schemaFilename = "C:\\Documents and Settings\\pbhatia\\Desktop\\Schema\\ipt_config.xsd";

    PRNT(printf("Schema file : %s \n", schemaFilename));
    PRNT(printf("XML file : %s \n", xmlFilename));

    pDoc = xmlReadFile(xmlFilename, NULL, XML_PARSE_NONET);
    if (!pDoc)
        return -1;

    pSchemaDoc = xmlReadFile(schemaFilename, NULL, XML_PARSE_NONET);
    if (!pSchemaDoc)
        return -2;

    pSchemaCtxt = xmlSchemaNewDocParserCtxt(pSchemaDoc);
    if (!pSchemaCtxt)
        return -3;

    pSchema = xmlSchemaParse(pSchemaCtxt);
    if (!pSchema)
        return -4;

    pValidCtxt = xmlSchemaNewValidCtxt(pSchema);
    if(!pValidCtxt)
        return -5;

    // Attempting to validate xml with schema
    xmlSchemaFreeParserCtxt(pSchemaCtxt);
    xmlFreeDoc(pSchemaDoc);

    iError = xmlSchemaValidateDoc(pValidCtxt, pDoc);
        if (iError == 0)
        PRNT(printf("Document in %s is valid \n", xmlFilename));
    else
        PRNT(printf("Document in %s is NOT valid \n", xmlFilename));

    xmlSchemaFree(pSchema);
    xmlFreeDoc(pDoc);
    return 0;
} 
```

谢谢，普里扬卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T13:19:57.617

通过阅读[`xmllint.c`](http://git.gnome.org/browse/libxml2/tree/xmllint.c)源代码，您可以在上下文中为错误和警告设置回调，使用[`xmlSchemaSetValidErrors`](http://xmlsoft.org/html/libxml-xmlschemas.html#xmlSchemaSetValidErrors). 在最简单的情况下，您转发`fprintf`它只会打印错误。

```
xmlSchemaSetValidErrors(ctxt,
    (xmlSchemaValidityErrorFunc) fprintf,
    (xmlSchemaValidityWarningFunc) fprintf,
    stderr); 
```

UTSL :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:35:41.900

不是您的 schame 部分的答案，而是您“在哪里可以找到”错误的答案：

```
 FILE *f = fopen("/temp/xml_err.log", "a");

  xmlDocPtr doc;
  if (f) {
    xmlSetGenericErrorFunc(f, NULL);
  }
  doc = xmlParseMemory(xmlstr, XMLMAXSTRSIZE);
  if (f) {
    fclose(f);
  } 
```

# c++ - 作曲访问

> ID：12453915
> 
> 赞同：0
> 
> 时间：2012-09-17T06:10:32.380
> 
> 标签：c++, oop

我有以下课程：

*   名为 House 的类（包含有关房屋结构的数据）
*   称为 Room 的类是 House 的组成部分。

因此，当我想例如在房间中显示房子的名称时，问题就来了，所以为了做到这一点，我需要从 Room 类中访问 House 名称，其中组合“有”不会让我。

解决方法是通过构造函数将房屋名称传递给房间类，但这是多余的，因为我已经在 House 类中拥有数据。

另一个解决方案是继承 House in Room，它不完全是“House IS A Room”，而且我将放弃糖语法来制作：

```
House.Room 
```

所以问题是：对于这类问题是否有标准的解决方法或重新设计模式？

这里还有一个例子：

```
class Room {
public:
  MyHouseName();       //Needs access to const char* name from House
};

class House {
   const char* name
   vector<Room> rooms;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:20:12.143

Luchian的回答是对的，但我明白你在想什么，所以让我强化他的回答。您希望在 Room 对象中可以访问您的 House 名称，但 Room 不应该有 House 引用，因为 Room 组成 House，并且不应该对 House 有任何控制权，对吧？让我们假设：

```
class House;
class Room
{
public:
     string getMyHouseName(); //return m_myHouse->getName();
     void demolish(); //demolish the room
     //other methods...

private:
     House* m_myHouse;
};

class House
{
public:
     string getName();
     void demolish(); //demolish the house, calling demolish() of all rooms in "m_rooms"
     //other methods...

private:
     vector<Room*> m_rooms;
     const string m_name;
}; 
```

如您所见，您可以访问房屋的名称，这没关系，但您还拥有将房屋从房间中拆除的权力！好的，你知道你不应该在 Room 类中使用“m_myHouse->demolish()”，但是你可以，这是一个常见的错误，提供了对对象的更多访问而不是必要的。所以这个问题的解决方案是使用 const 方法和 const 对象。我来给你展示：

```
class House;
class Room
{
public:
     string getMyHouseName(); //return m_myHouse->getName();
     void demolish(); //demolish the room
     //other methods...

private:
     const House* m_myHouse;
};

class House
{
public:
     string getName() const;
     void demolish(); //demolish the house, calling demolish() of all rooms in "m_rooms"
     //other methods...

private:
     vector<Room*> m_rooms;
     const string m_name;
}; 
```

现在，House 的“getName()”是 const 方法，这意味着可以从 House 的 const 实例调用该方法，因为它不会改变对象的状态，您只是从 House 中读取信息。并且“demolish()”不是 const，因为它可以改变房屋的状态（拆除它的房间）。

所以，现在我们将 House 的 const 引用放在 Room 中，这是一个“只读”对象。现在，Room 没有权力再改变 House 了。你不能在 Room 中调用 m_myHouse->demolish()，你没有那个控制权，但是 House 可以拆除任何房间。这就是House“拥有”房间的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:12:29.440

`Room`保留指向拥有它的指针`House`：

```
class House;
class Room {
public:
  MyHouseName();       //Needs access to const char* name from House
  House* house;
};

class House {
   const char* name
   vector<Room> rooms;
}; 
```

虽然你不太可能真的需要这个。你到底想完成什么？

# android - 如何获取短信对话的联系人姓名？

> ID：12453916
> 
> 赞同：3
> 
> 时间：2012-09-17T06:10:38.773
> 
> 标签：android, sms, cursor, contacts

我正在使用以下查询检索上次短信/彩信对话的列表：

```
String[] columns={"type", "address", "date", "body", "conversation_id"};
Cursor cursor=context.getContentResolver().query(Uri.parse("content://mms-sms/conversations"), columns,  null, null, "date desc"); 
```

谁能告诉我如何获得相同的查询以及联系人姓名？具体领域`ContactsContract.PhoneLookup.DISPLAY_NAME`？

我的意思是，我了解如何在单独的查询中获取这些字段，但我需要在与对话相同的查询中获取它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T09:14:08.623

尝试这个：

```
Log.i(TAG,"load_contact for "+Phone_numb);
Uri uri = Uri.withAppendedPath(ContactsContract.PhoneLookup.CONTENT_FILTER_URI, Uri.encode(Phone_numb));
String name = "?";

ContentResolver contentResolver = getContentResolver();
Cursor contactLookup = contentResolver.query(uri, 
    new String[] { BaseColumns._ID, ContactsContract.PhoneLookup.DISPLAY_NAME }, null, null, null);

try {
    if (contactLookup != null && contactLookup.getCount() > 0) {
        contactLookup.moveToNext();
        name = contactLookup.getString(contactLookup.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
    } else {
         return Phone_numb;
    }
} finally {
    if (contactLookup != null) {
        contactLookup.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-01T21:21:16.117

我使用这个解决方法做了这个：

```
val uri = Uri.parse("content://sms")
val projection = arrayOf("DISTINCT $THREAD_ID", _ID, ADDRESS, BODY, DATE, TYPE)
val selection = "$THREAD_ID IS NOT NULL) GROUP BY ($THREAD_ID"

contentResolver.query(uri, projection , selection, null, "date DESC") 
```

如果有人知道更好的方法，请分享。

# android - 是否可以编写方法选择时间？

> ID：12453918
> 
> 赞同：0
> 
> 时间：2012-09-17T06:10:45.310
> 
> 标签：android, user-interface, modal-dialog

我想实现一个选择时间并返回它的方法，比如

```
public static int pickTime(Context context, int minuteOfDay) {
    final int[] result = {-1};
    final OnTimeSetListener listener = new OnTimeSetListener() {
        @Override
        public void onTimeSet(TimePicker timePicker, int hourOfDay, int minute) {
            result[0] = 60*hourOfDay + minute;
        }
    };
    new MyTimePickerDialog(context, listener, minuteOfDay/60, minuteOfDay%60, false).show();
    return result[0];
} 
```

只是发现对话框立即返回，因此我的方法总是返回-1。

这是我可以忍受的事情，但是，我很好奇这样的事情是否可能。我不在乎应用程序在等待输入时是否工作，因为`TimePicker`无论如何它几乎占据了整个屏幕。

请注意，标准解决方案对我有用，但我认为这是一个很好的练习，可以更好地理解系统。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:40:11.313

从另一个线程很容易实现，只需等待对话框关闭即可。从主线程等待不起作用，因为它阻塞了事件处理。因此，我必须自己运行事件循环，而不是等待，这可能很复杂，甚至是不可能的。

可以做的是传递一个`TextView`应该设置的。但是，我总是需要做更多的事情，所以这没什么用。我最终得到了一个可以按如下方式使用的类（调用构造函数完成整个工作）：

```
new MyTimePickerCallback(context, oldMinutes) {
    @Override
    public void onResult(int newMinutes) {
        ... do whatever you want
    }
}; 
```

# html - 在 Jquery 中从一个 js 访问另一个 js 的功能？

> ID：12453922
> 
> 赞同：0
> 
> 时间：2012-09-17T06:11:25.373
> 
> 标签：html, jquery

我想实现以下功能。

我有两个 Jquery .js 文件都导入一个 HTML 文件并使用 ajax 功能。First.js 具有 ajax 函数，它将获取 json 响应。如果服务返回成功，我必须调用 Second.js 中存在的另一个 ajax 调用

**测试.HTML**

```
<!DOCTYPE html>
 <html>
   <head>
     <meta charset="ISO-8859-1">
      <title>Insert title here</title>          
      <script type="text/javascript" src='js/jquery.js'></script>
      <script type="text/javascript" src="js/test.js"></script>
      <script type="text/javascript" src="js/test1.js"></script>
   </head>
    <body>  
     <div class="ui-body">
      <fieldset class="ui-grid-a">                          
         <div id="buttondiv" class="ui-block-a"><a data-role="button" id="loginbtn" data-theme="b">Login</a></div>
         <div id="loading" style="display:none"><img src='css/images/demo_wait.gif' /></div>                                         
    </fieldset>
  </div>
</body>
</html> 
```

**第一个.js**

```
 $(document).ready(function(){
     $.ajax({
           .
           .
           .            
            success:function(data){ 
                 Successcall();
            },
           error:function(xhr){ 
                  alert("Error");
            }
      });
 }); 
```

**第二个.js**

```
 $(document).ready(function(){

 function Successcall(){
         $.ajax({
           .
           .
           .            
            success:function(data){ 
                 alert("In Second JS");
            },
           error:function(xhr){ 
                  alert("Error");
            }
      });
      }
 }); 
```

我无法调用 Successcall(); Second.js 中的函数

有人可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:19:50.257

Second.js 中的 Successcall 函数超出了 First.js 的范围，因为它包含在 $(document).ready() 函数范围内。

Muthu Kumaran 的解决方案会将 Successcall 函数附加到全局对象，这会起作用，但恕我直言，这很混乱。

也许这样会更好（把这个放在 Second.js 中）

```
var my_functions = {};
my_functions.Successcall = function() {
  // do something
}; 
```

然后从 First.js 调用 my_functions.Successcall()。这样可以避免将函数附加到全局对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:32:08.820

那么你首先检查你的ajax调用成功方法。
把警报功能像

```
success:function(data){ 
                 **alert("Got success");**
                 Successcall();
        } 
```

如果上面的代码工作正常并且仍然​​没有调用**Successcall();** 函数
然后你可以把**Successcall();** 在准备功能之外

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T06:14:28.697

在你的`Second.js`，删除`$(document).ready`包装。 `Successcall()`功能必须在外部`document ready`才能访问

```
 function Successcall(){
         $.ajax({
           .
           .
           .            
            success:function(data){ 
                 alert("In Second JS");
            },
           error:function(xhr){ 
                  alert("Error");
            }
      });
      } 
```

在 first.js 之前先加载 second.js

# wpf - 如何对 App.OnStartup 进行单元测试

> ID：12453924
> 
> 赞同：1
> 
> 时间：2012-09-17T06:11:30.913
> 
> 标签：wpf, unit-testing, mvvm

我正在使用 MVVM 编写一个 WPF 应用程序，所以我在 App 中覆盖 OnStartup 来设置 View 的 ViewModel。很快，在工作中，完成的定义将包括 100% 的代码覆盖率，所以我现在在家中尝试在自己的项目中养成习惯。我不知道如何测试这个功能：

```
public partial class App : Application
{
  protected override void OnStartup(StartupEventArgs e)
  {
    base.OnStartup(e);

    ViewModel.MainViewModel vm = new ViewModel.MainViewModel();
    View.MainView v = new View.MainView();
    v.DataContext = vm;
    v.Show();
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:24:14.963

尼克，我建议你把这个反馈给工作。您基本上找到了一个完美的例子，说明为什么 100% 覆盖率通常不是大多数人遵守的标准。我个人建议我工作的公司更加务实。存在收益递减的情况，覆盖率越高，您当然可以通过询问自己，这将实际测试什么来节省 UI 应用程序的大量时间。

您拥有的代码将显示一个带有视图模型的应用程序视图窗口。您可以使用[White](http://white.codeplex.com)或[WiPFlash](http://white.codeplex.com/site/search?query=Wipflash&ac=8)等库来提供简单的方法来确认这一点，但您真正要做的就是确认 windows 已经完成了它的工作。稍后您可能会测试单击按钮会导致在文本框中显示一个值，这具有更多价值，但可以通过调用 ViewModel 命令并随后检查视图模型状态来轻松模拟。

这是您的选择，我建议两者都尝试，但这些天我将我的 View 命名空间排除在所有覆盖率计数之外。

# android - 以编程方式更改 PIN

> ID：12453926
> 
> 赞同：3
> 
> 时间：2012-09-17T06:11:40.083
> 
> 标签：android

在 android 设备中，我们可以有三种类型的锁，即图案、PIN 和密码。

在我的应用程序中，我想以编程方式更改/重置 PIN。

我接受来自用户的 4 位数字，这将被设置为该设备的新 PIN。

是否可以重置此 PIN 码还是违反 android 安全策略？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:23:19.440

您可以使用[Device Admin API](http://developer.android.com/guide/topics/admin/device-admin.html)来完成。android 为您提供了为密码制作自己的逻辑的便利（甚至更多..）。[阅读有关如何实施密码策略的信息。](http://developer.android.com/guide/topics/admin/device-admin.html#pwd)

***注意：*** 您可以在`<sdk>/samples/android-<version>/`. 该`<version>`数字对应于平台的 API 级别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-20T10:35:00.180

使用反射的最佳方法。使用反射，您可以将设备密码设置为无、滑动、pin、密码。这是帮助您的代码。确保您拥有管理员权限。此代码会将您的设备密码更改为刷卡。对于 resetpassword 方法中的 pin 给出一些值而不是“”空字符串。对于 none 只是不要对设备策略管理器做任何事情和是的，请确保您的应用是系统应用，即系统签名

```
try
                            {  
                                try{
                                    Class lockPatternUtilsCls = Class.forName("com.android.internal.widget.LockPatternUtils");
                                    Constructor lockPatternUtilsConstructor = 
                                        lockPatternUtilsCls.getConstructor(new Class[]{Context.class});
                                    lockPatternUtilsConstructor.setAccessible(true);
                                    Object lockPatternUtils = lockPatternUtilsConstructor.newInstance(ChangeDeviceLockMode.this);
                                    Method clearLockMethod = lockPatternUtils.getClass().getMethod("clearLock", boolean.class);
                                    clearLockMethod.setAccessible(true);
                                    clearLockMethod.invoke(lockPatternUtils, true);
                                    Method setLockScreenDisabledMethod = lockPatternUtils.getClass().getMethod("setLockScreenDisabled", boolean.class);
                                    setLockScreenDisabledMethod.setAccessible(true);
                                    setLockScreenDisabledMethod.invoke(lockPatternUtils, false);     
                            }catch(Exception e){
                                System.err.println("An InvocationTargetException was caught!");
                                                    Throwable cause = e.getCause();
                            }
                                devicePolicyManager.setPasswordQuality(demoDeviceAdmin, DevicePolicyManager.PASSWORD_QUALITY_UNSPECIFIED);
                                devicePolicyManager.setPasswordMinimumLength(demoDeviceAdmin, 0);
                                boolean result = devicePolicyManager.resetPassword("", DevicePolicyManager.RESET_PASSWORD_REQUIRE_ENTRY);
                            }
                            catch(Exception ex)
                            {
                                ex.printStackTrace();
                            } 
```

# c - char ** 然后取消对 char * 的引用

> ID：12453930
> 
> 赞同：0
> 
> 时间：2012-09-17T06:11:51.863
> 
> 标签：c, pointers, casting

为了使用库函数比较字符串，我学会了编写一个比较函数来比较两个字符串，但我不太清楚他们为什么这样做。

```
int StrCmp(const void *a, const void *b){
    char *s1 = *(char**) a;
    char *s2 = *(char**) b;
    return strcmp(s1,s2);
} 
```

为什么他们必须先将其转换为 char ** ？为什么不直接将它们转换为 char * 呢？像

```
return strcmp((char*)a, (char*)b); 
```

将（指针）转换为（指向指针的指针）的含义是什么？如果我有

```
char *x = "string"; 
```

如果我为 x 铸造

```
(char**)x; // what is this? Is this character 's'? 
```

我对此很困惑，感谢澄清，还有一个问题是关于 const 如果它是 const，我还能转换它们吗？（虽然我知道我可以）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T06:44:05.453

该函数的调用者很可能正在使用指针数组，例如：

```
const char* arr_of_ptr[] =
{
  "hello",
  "world"
}; 
```

在这种情况下，数组的第一个元素是指向 char 的指针，它本身不是 char。因此，StrCmp 函数充当指向普通 C 字符串的指针数组之间的转换器。

但是，他们也抛弃了 const 关键字，这是不好的做法。函数应该这样写：

```
int StrCmp(const void *a, const void *b){
    const char *s1 = *(const char**) a;
    const char *s2 = *(const char**) b;
    return strcmp(s1,s2);
} 
```

[很好的阅读主题](http://c-faq.com/ptrs/index.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T07:27:24.857

“为什么他们必须先将其转换为（char 指针指针）？为什么不直接将它们转换为（char 指针）？”

* * *

他们必须把它变成它的样子。假设传入的值指向内存位置 10,000，你有这样的东西：

```
 (char **) 

  a                 address a
                    "points to"
                    *a                **a   
  mem 1000          mem 10000         mem 20000
  to mem 1007       to mem 10007
  _____________     _____________     _______________ 
  pointer var  --> char pointer   ->  char
  10000             20000             'a'
  _____________     _____________     _______________ 
```

如果将其转换为 (char *)，则您是在告诉编译器 a（在本例中为 10,000）引用的地址是 char。这是不正确的。

```
 (char *)          address a points 
  a                 to
  mem 1000          mem 10000         mem 20000
  to mem 1007
  _____________     ______            ________________
  pointer var  -->  "char"            unreachable char
  10000             ?                 'a'
  _____________     ______            ________________ 
```

* * *

“将（指针）转换为（指向指针的指针）是什么意思如果我有

字符 *x = "字符串"; 如果我为 x 铸造

(char**)x; // 这是什么？这个角色是's'吗？”

* * *

此示例中存在的内容类似于：

```
x            *x or x[0] x[1]       x[2]      x[3]      x[4]      x[5]      x[6]
mem 15000    mem 30000  mem 30001  mem 30002 mem 30003 mem 30004 mem 30005 mem 30006
to 15007
char *       char       char       char      char      char      char      char
_________    _________  _________  _________ _________ _________ _________ _________

30000    -->    's'       't'         'r'      'i'      'n'       'g'       '\0'
________     _________  _________  _________ _________ _________ _________ _________ 
```

如果你告诉编译器 x 是一个 char** 那么它认为这是模式：

```
x              *x or x[0]         **x
               char *
mem 15000      mem 30000          "char" 
to 15007       to 30007
__________     _________          _________

30000      --> "string\0?"
               converted to
               pointer value  ->   ??
__________     _________          _________ 
```

它错误地最终转到从 30000 开始的前 8 个字节解析为的任何“地址”并获得一个“字符”。但是由于 30000 是一个以空字符结尾的字符数组的开始，所以它充其量会进入内存的某个部分并获取一些随机字节，认为它是一个有效的字符。在最坏的情况下，它会得到一个对该程序无效的地址，当它试图访问它时会导致致命错误。

* * *

所以我能做吗

```
 return strcmp((char *)a, (char *)b); 
```

* * *

不，因为 a 和 b 不是 char 指针。要获得 char 指针，您无法避免：

```
return strcmp( *(char**)a, *(char**)b); 
```

使用 Linden 的示例，您可以这样调用：

```
#include <stdio.h>
#include <string.h>

int StrCmp(const void *a, const void *b){
    char *s1 = *(char**) a;
    char *s2 = *(char**) b;
    printf("s1:%s\n",s1);
    printf("s2:%s\n",s2);
    return strcmp(s1,s2);
}

const char* arr_of_ptr[] =
{
  "hello",
  "world"
};

const char **p_arr_of_ptr = arr_of_ptr;

int main(void)
{
   const char *cstring1 = "LaDonna";
   const char *cstring2 = "McPherson";
   const char **pcstring1 = &cstring1;
   const char **pcstring2 = &cstring2;
   StrCmp(&arr_of_ptr[0],&arr_of_ptr[1]);
   StrCmp(pcstring1,pcstring2);
   StrCmp(p_arr_of_ptr,p_arr_of_ptr + 1);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-23T21:55:10.467

这实际上是将 void 指针（即：）转换`void*`为指向 char 的双指针（即：）`char**`。

请记住，间接/取消引用运算符（一元运算`*`符）和类型转换运算符（例如：）`(char**)`具有相同的优先级，但也具有从右到左的关联性。

因此，请考虑以下事项：

```
void myFunction(void* a) {
  char* s1;  // Pointer to a character, or the beginning of a character array or string
             // Note that the effective difference between a character array and a string is that
             // a string is a character array that is terminated with the '\0' character
  s1 = *(char**) a;
             /* The above statement can be decomposed as follows:
              * (  *( (char**) a ) )
              * 1) Cast the pointer-to-void-type, (ie: void*)'a', 
              *    to a pointer-to-pointer-to-char (ie: char**)
              * 2) Deference the value, so it becomes a pointer-to-char
              * 3) Assign this char* value to s1
              */
} 
```

这在 C 中很常见，因为该语言不支持像其后继 C++ 这样的模板，因此您必须做一些漂亮的指针魔术。请注意，如果您可以使用高级指针逻辑，那么您可能根本不需要使用 C++ 代替 C。

祝你好运！

# python - 如何清除日志文件并重新写入？

> ID：12453934
> 
> 赞同：7
> 
> 时间：2012-09-17T06:12:03.140
> 
> 标签：python

我通过这种方式创建日志文件：

```
 global logger
    logger = logging.getLogger("plus_dig_cname")
    logger.setLevel(logging.DEBUG)

    fh = logging.FileHandler( fdoc_log + "/plus_dig_cname.log" )

    formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
    fh.setFormatter(formatter)

    logger.addHandler(fh) 
```

而当 plus_dig_cname.log 的大小大于 300MB 时，我通过 shell 脚本处理，主要过程是：

```
 mv $LOG_DIR/$1 $LOG_DIR/$1.bk
 [ $? -ne 0 ] && return 1
 touch $LOG_DIR/$1
 [ $? -ne 0 ] && return 1
 chmod 666 $LOG_DIR/$1
 [ $? -ne 0 ] && return 1 
```

只需 mv 并触摸一个新的。
**问题是记录器无法在 plus_dig_cname.log 文件中写入任何内容。日志无法工作。**
也许可以通过以下方式解决：

```
with open( "plus_dig_cname.log", "w" ):
               pass 
```

这种方式可以通过 Python 获取新的日志文件。但我想通过 Bash 获取新的日志文件。 **那么，为什么在“mv touch chmod”之后无法进行日志记录呢？**

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T06:16:58.590

使用[RotatingFileHandler](http://docs.python.org/release/2.7/library/logging.html#rotatingfilehandler)为您处理此问题。

例如：

```
MAX_SIZE = 300 * 1024 * 1024
LOG_PATH = fdoc_log + "/plus_dig_cname.log"
fh = logging.handlers.RotatingFileHandler(LOG_PATH, maxBytes=MAX_SIZE, backupCount=5) 
```

这将创建 5 个备份，每个备份 300MB。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T06:43:38.193

该文件在您创建[`FileHandler()`](http://hg.python.org/cpython/file/ef44e1b740cb/Lib/logging/__init__.py#l965)或第一次写入时打开。如果您移动文件；它消失了。

您可以`logging.handlers.RotatingFileHandler`按照@sberry 的建议使用 Python 来旋转文件。

如果您在外部旋转日志文件，例如使用[logrotate](http://linux.die.net/man/8/logrotate) ，那么您可以通知您的脚本文件已消失，例如，通过重新启动它或在 postrotate 步骤中发送信号。

如果您使用诸如 inotify 之类的东西来检测更改，您的脚本可以自动重新打开文件。比较如何`tail -f`和`tail -F`工作。

# bash - 如何将 awk 输出移动到单个文件夹？

> ID：12453936
> 
> 赞同：0
> 
> 时间：2012-09-17T06:12:14.313
> 
> 标签：bash, awk

我正在尝试将 awk 输出文件移动到单个文件夹中。每个输出文件的名称应该是输入文件的名称。我使用了以下程序。但是这个程序将每个输出文件保存为“out”，它的目录名称是输入文件的名称。如何更改以下代码以将输出保存到具有输入文件名的单个文件夹中。

```
for i in file/*.txt;  do mkdir "$i"_dir;  awk -f script.awk "$i" > "$i"_dir/out; done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:15:35.237

```
for i in file/*.txt;  do 
    awk -f script.awk "$i" > out; 
done 
```

应该工作，或内联

```
for i in file/*.txt;  do awk -f script.awk "$i" > out; done 
```

您的输出文件将在当前目录中简单地命名为“out”。

另请注意，这既不会创建目录，也不会将输出存储在其中。如果您需要创建目录但不写入它们，则必须重新添加`mkdir`命令。

**编辑**

根据您更新的问题，您首先要创建一个输出目录，我们称之为`foo`.

```
mkdir foo 
```

所以现在目录结构应该是这样的

```
/path/to/your/base-folder/
                        ./file/ <-- .txt 文件所在的目录
                        ./foo/ <-- 你的输出文件夹

```

然后，从该基本文件夹中，您可以运行以下命令：

```
for i in file/*.txt;  do awk -f script.awk "$i" > foo/"$i"; done 
```

或者，如果您想要输出文件的文件扩展名：

```
for i in file/*.txt;  do awk -f script.awk "$i" > foo/"$i".txt; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T13:06:54.133

将输出重定向移到循环之外。

```
mkdir dir
for i in file/*.txt; do
  awk -f script.awk "$i"
done > dir/out 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T13:37:02.270

```
for i in file/*.txt; #get a value for "i"
 do mkdir "$i"_dir; #create a folder called *value for i"_dir
 awk -f script.awk "$i" > "$i"_dir/out; done #save the output to the created
                                             #directory saving only the last
                                             #iteration of the cycle, as @farid said. 
```

尝试这个

`for i in file/*.txt; do mkdir dir; awk -f script.awk "$i" >> dir/out; done`

`dir`您可以通过将,更改为来更改所需的目录名称`anything`

`for i in file/*.txt; do mkdir anything; awk -f script.awk "$i" >> anything/out; done`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T07:44:20.613

杰德沃兹，

如果您想要所有输出，则必须添加**>>**代替**> 。**否则你将只有循环的最后一次迭代。

```
for i in file/*.txt;  do awk -f script.awk "$i" >> out; done 
```

# javascript - 如何在 jquery 中用 , 分割字符串？

> ID：12453938
> 
> 赞同：0
> 
> 时间：2012-09-17T06:12:56.633
> 
> 标签：javascript, jquery

我正在研究webapi，实际上我需要在这里拆分一个字符串我从控制器中获取数据，而这些数据我已经分离了菜单和子菜单等数据。

就像我正在获取数据

```
 MenuName:  "Home" "product" "setting" "orders" "contact " "Profile"

  SubMenus for Product: 
                       "viewProduct,Addproduct,searchProduct"; 
```

在这里我需要拆分子菜单，但菜单没有拆分。我不知道怎么了。

这是我的代码：

```
var Url = "/api/MenuItem";
(function($) {
    $.buildMenu = function(MenuId, CurrentPage) {
        $.getJSON(Url, function(data) {
            alert(data);
            var item = data;
            $.each(data, function(k, v) {
                var MenuItems = [];
                MenuItems = v.MenuName;
                alert(MenuItems);

                var subitems = [];
                subitems = v.SubMenUs;
                alert(subitems);

                var spltting = [];
                var splitteditems = [];
                spltting = subitems[0];
                splitteditems = spltting.split(',');
                alert(spltting.count());
                alert(spltting.toString());
                var count = new Array();
                for (var n = 0; n < splitteditems.length; n++) {
                    count.push(parseInt(splitteditems[n]));
                }
            });
            alert(item.toString());
            $('.' + MenuId).append("<ul>");

            for (var i = 0; i < item.length; i++) {
                if (CurrentPage == item[i].MenuName)
                    $('.' + MenuId).append("<li><a class='main_menu_active'>" +
                        item[i].MenuName + "</a></li>"
                    );
                else
                    $('.' + MenuId).append("<li> " +
                        item[i].MenuName + "</li>"
                    );
            }
        });
    }
})(jQuery);​ 
```

我需要拆分子菜单并需要附加到嵌套列表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:21:34.537

*jQuery 是 JavaScript*，所以这可以使用 JavaScript`String.split(",")`方法来完成。

# iphone - 如何更改共同的uibarbutton颜色

> ID：12453941
> 
> 赞同：0
> 
> 时间：2012-09-17T06:13:07.630
> 
> 标签：iphone, ios, uibarbuttonitem, uinavigationitem

我想让`uibarbutton`所有班级的颜色变化保持一致，而不是在每个班级都改变颜色？我该怎么办`appdelegate`？

这是我的代码：

```
UIBarButtonItem *random1 = [[UIBarButtonItem alloc]initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(back:)];
[random1 setTintColor:UIColorFromRGB(0xf63d78)];
self.navigationItem.leftBarButtonItem = random1; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T06:19:09.807

对此类事情使用`UIAppearance`代理。在您的应用程序委托中放置以下内容。

```
[[UIBarButtonItem appearance] setTintColor:UIColorFromRGB(0xf63d78)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T06:20:28.430

您应该检查官方文档（[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIBarButtonItem_Class/Reference/Reference.html)）中的外观部分。

但是在这种情况下你应该做的是

`[[UIBarButtonItem appearance] setTintColor:UIColorFromRGB(0xf63d78)];`

# jquery - 如何将结果显示到来自带有 jquery 的 Ifram 的文本区域？

> ID：12453943
> 
> 赞同：0
> 
> 时间：2012-09-17T06:13:29.990
> 
> 标签：jquery

我有一个 iframe，我正在其中上传一个文本文件，上传后读取它的内容，这些内容只是 url。问题是我无法在这个 iframe 被称为某人的 textarea 中显示结果，请让我摆脱这个。我的代码如下。这是我框架的代码。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $(this).parent().find("#social_media_urls").val("<?php echo $links?>");
    });
</script>
</body>
</html> 
```

并且打击是我要显示结果的html。

```
<div class="tabs-content" id="tab_social_urls">
  <ul>
    <li>
      <div class="left"> Upload URLs (csv): </div>
      <div class="rite">
        <iframe id="uploadFile" src="<?php echo "includes/iframe_upload_file.php" ;?>"></iframe>
      </div>
      <div class="clr"></div>
    </li>
    <li>
      <div class="left"> Current URLs: </div>
      <div class="rite">
        <textarea name="social_media_urls" id="social_media_urls" cols="" rows="">

                                                </textarea>
      </div>
      <div class="clr"></div>
    </li>
  </ul>
  <div class="clr"></div>
</div> 
```

我想在文本区域中显示结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:21:39.083

如果您像这样使用，您可以在文本区域中设置值

```
<script type="text/javascript">
    $(document).ready(function(){
        $("#social_media_urls").val("<?php echo $links?>");
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:20:07.310

上次我遇到这个问题时，我使用以下方法解决了：

```
parent.$('#social_media_urls') ... 
```

# c++ - 注册 WIN32 Dll

> ID：12453944
> 
> 赞同：0
> 
> 时间：2012-09-17T06:13:35.513
> 
> 标签：c++

我想使用 Regsvr32 将我的 Win32Dll 注册到注册表中的特定路径。我将在 HKEY_LOCAL_MACHINE 下创建子项（例如：HKEY_LOCAL_MACHINE\SOFTWARE\ALGORITHM）并在这个层次结构下我想注册我的 Win32 Dll ..我怎样才能做到这一点？

# android-canvas - 为什么我无法将表面视图上的画布绘图保存到 Android 中的 SD 卡

> ID：12453946
> 
> 赞同：0
> 
> 时间：2012-09-17T06:13:44.047
> 
> 标签：android-canvas

在我的 Paint 应用程序中，我需要保存绘制的图像。我的代码正在运行，但图像未保存到 SD 卡。下面的代码我用过。

```
drawingSurfaceView.buildDrawingCache();
    Bitmap bmap = drawingSurfaceView.getDrawingCache();
    String extStorageDirectory = Environment.getExternalStorageDirectory()
            .toString();
    File file = new File(extStorageDirectory, "imag.PNG");
    FileOutputStream outStream;
    try {
        outStream = new FileOutputStream(file);
        bmap.compress(Bitmap.CompressFormat.PNG, 100, outStream);

        MediaStore.Images.Media.insertImage(getContentResolver(),
                file.getAbsolutePath(), file.getName(), file.getName());

    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

请告诉我该代码有什么问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:31:28.340

我已经通过使用 getters 和位图设置器（如 drwaSurfaceView.setBitmap() 和 drwaSurfaceView.getBitmap()）解决了问题。在我的表面视图类中，我创建了 `public Bitmap getBitmap() { return scaled; }

```
public void setBitmap(Bitmap scaled) {
    this.scaled = scaled;
}` 
```

在 Thread 类中，我将保存绘画和背景图像，例如 `class DrawThread extends Thread { private SurfaceHolder mSurfaceHolder;

```
 public DrawThread(SurfaceHolder surfaceHolder) {
        mSurfaceHolder = surfaceHolder;

    }

    public void setRunning(boolean run) {
        _run = run;
    }

    @Override
    public void run() {
        Canvas canvas = null;
        while (_run) {
            if (isDrawing == true) {
                try {
                    canvas = mSurfaceHolder.lockCanvas(null);

                    if (scaled == null) {
                        scaled = Bitmap.createScaledBitmap(background, w,
                                h, true);
                    }

                    if (DrawAppActivity.saveBtnFlag == 1) {
                        DrawAppActivity.saveBtnFlag = 0;
                        final Canvas c = new Canvas(scaled);
                        commandManager.executeAll(c);
                        canvas.drawBitmap(scaled, 0, 0, null);
                        commandManager.executeAll(canvas);
                    } else {
                        canvas.drawBitmap(scaled, 0, 0, fillPaint);
                        commandManager.executeAll(canvas);
                    }

                } finally {
                    mSurfaceHolder.unlockCanvasAndPost(canvas);
                }
            }
        }
    }
}` 
```

# iphone - cocos2D中如何实现拉伸动画？

> ID：12453947
> 
> 赞同：0
> 
> 时间：2012-09-17T06:13:44.093
> 
> 标签：iphone, cocos2d-iphone

我想给一个 sprite 一个拉伸动画。
这是我试过的代码

```
id scaleUpAction =  [CCEaseInOut actionWithAction:[CCScaleTo   actionWithDuration:4.0 scaleX:1.0 scaleY:10.0] rate:2.0]; 
```

但我想保持顶部位置，然后从上到下像波浪效果一样动画。任何人都可以建议我这样做的方法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:53:31.737

无法理解您在“波浪”下是什么意思，但关于您问题的第一条路径 - 要保持最高位置，您应该更改精灵的锚点。所有转换都是相对于节点的（在您的情况下为精灵）锚点完成的。因此，如果您想修复精灵的左上角，只需将其`anchorPoint`属性设置为 (0.f, 1.f)。锚点 (1.f, 1.f) 将固定精灵的右上角。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-09T07:21:41.353

*试试这个代码。*

```
id scaleAction =  [CCEaseInOut actionWithAction:[CCScaleTo actionWithDuration:5.0f scaleX:1.0 scaleY:1.0] rate:2.0];
id scaleUpAction =  [CCEaseInOut actionWithAction:[CCScaleTo actionWithDuration:1.0f scaleX:4.8 scaleY:4.8] rate:2.0];
id scaleUpAction1 =  [CCEaseInOut actionWithAction:[CCScaleTo actionWithDuration:12 scaleX:4.8 scaleY:4.8] rate:2.0];
CCSequence *scaleSeq = [CCSequence actions:scaleAction,scaleUpAction,scaleUpAction1, nil];
[scaleright runAction:[CCRepeatForever actionWithAction:scaleSeq]]; 
```

# mysql - MYSQL 查询解释选择

> ID：12453948
> 
> 赞同：0
> 
> 时间：2012-09-17T06:14:08.260
> 
> 标签：mysql, select, indexing, key, explain

某些表的 EXPLAIN SELECT 结果具有：

```
 type   possible_keys   key       Extra
table1       ref    fl              fl        Using where
table2       ref    PRIMARY,variant variant   Using where; Using index 
```

如果想澄清两个表都使用“键”列的索引，但是我看不到表 1 的“使用索引”？？？我应该关心这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:21:16.420

如[`EXPLAIN`输出格式](http://dev.mysql.com/doc/en/explain-output.html)中所述：

> ### **`EXPLAIN`**额外的信息
> 
> 输出列**`Extra`**包含[**`EXPLAIN`**](http://dev.mysql.com/doc/en/explain.html)有关 MySQL 如何解析查询的附加信息。下面的列表解释了可以出现在此列中的值。
> 
> `[ deletia ]`
> 
> *   **`Using index`**
>     
>     
>     
>     仅使用索引树中的信息从表中检索列信息，而无需执行额外的查找来读取实际行。当查询仅使用属于单个索引的列时，可以使用此策略。

如果`Using index`不存在，索引仍可用于定位记录，但 MySQL 可能会获取完整记录以检索列数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:35:40.590

如果您将其输出与查询中的过滤条件进行比较，则 EXPLAIN EXTENDED 可能会有所帮助：行数等： [EXPLAIN EXTENDED 输出格式](http://dev.mysql.com/doc/refman/5.0/en/explain-extended.html)

# c# - 为什么 IEnumerator 需要两个 Current 方法 在 C# 中？

> ID：12453950
> 
> 赞同：2
> 
> 时间：2012-09-17T06:14:10.757
> 
> 标签：c#, oop, interface

我正在编写一个实现接口 IEnumerator 的类。为了让它编译，我需要以下两种方法：

```
public object Current
{
    get { return current; }
}

T IEnumerator<T>.Current
{
    get { return current; }
} 
```

为什么这两个都是必要的？从表面上看，似乎只需要后者。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T06:15:08.623

这是因为[`IEnumerator<T>`](http://msdn.microsoft.com/en-us/library/78dfe2yb.aspx)实现的[`IEnumerator`](http://msdn.microsoft.com/en-us/library/system.collections.ienumerator.aspx)接口是在 .NET 2.0 中引入泛型之前存在的接口的非泛型版本。因此，在实现接口（`IEnumerator<T>`在您的情况下）时，您还需要实现该接口实现的所有其他接口。

# forms - Wordpress 联系表收件人问题

> ID：12453952
> 
> 赞同：0
> 
> 时间：2012-09-17T06:14:32.953
> 
> 标签：forms, wordpress, content-management-system, sendmail, contact

我在这里建了一个表格：http: [//22twenty.com/wordpress/contact/](http://22twenty.com/wordpress/contact/)

它从标准形式中获得了传统代码

```
<form id="contact" method="post" action="<?php bloginfo('template_directory'); ?> contact-send.php" class="validateform">

                    <div id="errormessage"></div>
                    <div id="sendmessage">
                        <p>Your message has been sent. Thank you!</p>
                    </div>  

                        <div class="formfield">
                            <input name="name" type="text"placeholder="Name:" class="text" required/>
                        </div>

                        <div class="formfield">
                            <input name="email" type="email" placeholder="Email:" class="text" required/>
                        </div>

                        <div class="formfield">
                            <input name="subject" type="text" placeholder="Subject:" class="text" required/>
                        </div>

                        <div class="formfield">
                            <textarea name="message" class="text textarea" placeholder="Enter Your Message Here:" required></textarea>
                        </div>

                        <div class="formfield">
                            <input type="submit" id="send" value="Post message"  class="btn" />
                        </div>

                </form>

  <?php $name = $_POST['name'];

$email = $_POST['email'];

$message = $_POST['message'];

$formcontent="From: $name \n Message: $message";

$recipient = "get_option('admin_email')";

$subject = $_POST['subject'];

$mailheader = "From: $email \r\n";

mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");

?> 
```

我想知道两件事这是添加表单的最佳方式，我可以在这个意义上使用 get_opition('admin_email') 吗？

谢谢

丹佛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:18:43.393

您可以使用名为[联系表格 7](http://wordpress.org/extend/plugins/contact-form-7/)的插件。您可以轻松自定义整个表单以及更多选项和功能，您可以从他们的网站查看文档。希望这会奏效。

# javascript - 从 ScriptManager.RegisterStartupScript 引发 Click 事件

> ID：12453964
> 
> 赞同：0
> 
> 时间：2012-09-17T06:15:25.800
> 
> 标签：javascript, asp.net, asp.net-ajax

如何执行

```
document.getElementById("<%= btnHiddenBreak.ClientID%>").click() 
```

使用`ScriptManager.RegisterStartupScript`.

我正在尝试这样

```
ScriptManager.RegisterStartupScript(
    this.Page, 
    Page.GetType(), 
    "OpenModalDialog", 
    "<script type=text/javascript>document.getElementById('<%= tnHiddenBreak.ClientID%>').click() ;</script>", 
    false);` 
```

但它抛出一个错误。

按钮的 Asp 代码是

```
<asp:Button id="btnHiddenBreak" runat="server" 
    Visible="false" 
    OnClientClick="openmodalWinBreak();" 
    OnClick="btnHiddenBreak_Click" /> 
```

我收到的错误消息是：-

> Microsoft JScript 运行时错误：Sys.WebForms.PageRequestManagerServerErrorException：为类型“ASP.associates_home_aspx”和键“OpenModalDialog”注册的脚本标记在脚本标记之外具有无效字符：document.getElementById('<%= btnHiddenBreak.ClientID%>' ）。点击（） ;。只能注册格式正确的脚本标签。

请指导我犯了什么错误并按照..修复我的代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:29:45.737

您是否尝试过使用

```
ScriptManager.RegisterStartupScript(this.Page, Page.GetType(), "OpenModalDialog", "<script type='text/javascript'>document.getElementById('" + btnHiddenBreak.ClientID + "').click() ;</script>", false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-22T18:19:55.533

对于脚本标签，type='text/javascript' 是默认值，因此最好的解决方案是排除它。更好的是，完全排除脚本标签并将 RegisterStartupScript 的最终参数设置为 true，如下所示：

```
ScriptManager.RegisterStartupScript(
    this.Page, 
    Page.GetType(), 
    "OpenModalDialog", 
    "document.getElementById('<%=tnHiddenBreak.ClientID%>').click();", 
    true); 
```

# python - 模块长名和短名

> ID：12453965
> 
> 赞同：1
> 
> 时间：2012-09-17T06:15:28.133
> 
> 标签：python

> **可能重复：**
> [在 python 中更改导入名称](https://stackoverflow.com/questions/8997274/changing-import-name-in-python)

在皮梅尔，

当我访问模块名称节点类型内的类名称转换时。我可以通过以下两种方式访问​​课程。

1.  LongName:- nodetypes.Transform
2.  简称：- nt.Transform

我怎么能用我自己创建的模块来做到这一点。

请解释。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:18:49.197

```
import nodetypes as nt 
```

...你就完成了。

# php - 为什么否定在 PHP 的赋值表达式中最后发生？

> ID：12453968
> 
> 赞同：29
> 
> 时间：2012-09-17T06:15:50.197
> 
> 标签：php

否定运算符的优先级高于赋值运算符，为什么它在表达式中较低？

例如

```
if (!$var = getVar()) { 
```

在前面的表达式中，赋值首先发生，否定发生在后面。不应该先否定，然后赋值吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-02-28T20:03:17.510

的左侧`=` [必须是`variable`](http://lxr.php.net/xref/PHP_5_6/Zend/zend_language_parser.y#778). `$var`是一个`variable`，而`!$var`不是（它是一个`expr_without_variable`）。

因此 PHP 以唯一可能的方式解析表达式，即 as `!($var = getVar())`。优先权永远不会在这里发挥作用。

的优先级相关的示例`=`如下：

```
$a = $b || $c // ==> $a = ($b || $c), because || has higher precedence than =
$a = $b or $c // ==> ($a = $b) or $c, because or has lower precedence than = 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-22T08:38:33.033

**简而言之，赋值总是优先于它们的左边部分** （因为在相反的情况下会导致解析错误）。

```
 <?php
 $b=12 + $a = 5 + 6;
 echo "$a $b\n";
 --> 11 23

 $b=(12 + $a) = (5 + 6);
 echo "$a $b\n";
 --> Parse error 
```

PHP文档现在有一个关于这个问题的注释：http: [//php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php) （我猜它是在你的问题之后添加的）

> 尽管 = 的优先级低于大多数其他运算符，但 PHP 仍然允许类似于以下的表达式：if (!$a = foo())，在这种情况下 foo() 的返回值被放入 $a

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T06:33:04.843

协商操作员需要在下一次检查单个值，所以如果你这样给出

> !$var = getVar()

该运算符仅适用于下一个变量，因此 !$var 将分开。所以我们只需要付出

> !($var = getVar())

# sql - 在访问中存储多个数据

> ID：12453970
> 
> 赞同：1
> 
> 时间：2012-09-17T06:16:16.113
> 
> 标签：sql, ms-access-2007

我想存储来自客户购物车示例的数据：在线比萨店。假设客户购买了 5 个 1 号比萨和 3 个 2 号比萨。那么如何将其存储在 Ms Access 中，就像管理员可以看到有什么一样已订购，数量是多少？

我的视图购物车表单如下所示：

![在此处输入图像描述](../Images/07b329f67492f7525409ce13bee92de8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:15:41.003

在我看来，您应该有一个`Products`包含`product_id`主键的表。这是您将存储其他产品属性的位置：名称；描述; 价格; 等等

客户数据可以存储在一个单独的表中`Customers`，包括`customer_id`作为主键。

然后一个`Orders`表将包括一个自动编号`order_id`字段和一个`customer_id`外键。此表的目的是将订单与其客户相关联。

订单中包含的项目可以作为单独的行存储在`Order_Details`表中。它的字段将包括`order_id`、`product_id`、`unit_price`和`quantity`。尽管价格也存储在`Products`表格中，但您再次将其存储`Order_Details`为下订单时有效的价格……这很有用，因为价格往往会随着时间而变化。

# objective-c - 在xcode中引发异常时如何避免记录调用堆栈

> ID：12453973
> 
> 赞同：0
> 
> 时间：2012-09-17T06:16:36.627
> 
> 标签：objective-c, xcode, macos

我们使用以下代码引发异常：

```
[NSException raise:@"ExceptionName" format:@"XYZ"]; 
```

当引发异常时，调用堆栈也会登录控制台。我们不想在控制台中记录调用堆栈。如何避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:41:16.697

Cocoa 不能很好地与异常混合（惯用的 C++ 是另一回事）。您*通常*应该将异常视为 Cocoa 中的不可恢复。因此，您应该**真正**考虑 Cocoa 中另一种（更惯用的）错误处理形式。因此，简短的回答是：“不要抛出/引发异常，除非你不打算恢复”。

* * *

还不满意？

您有能力捕获异常并尝试继续：

```
#import <Foundation/Foundation.h>

static void A() {
    [NSException raise:@"ExceptionName" format:@"XYZ"];
}

int main(int argc, const char * argv[]) {
    @autoreleasepool {
        @try {
            A();
        }
        @catch (NSException * e) {
            NSLog(@"e=mc%p", e);
            NSLog(@"What I meant to say is: %@", e);
        }
    }
    return 0;
} 
```

此外，框架为您的目的提供了一些高级条目和自定义，如下[所述](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Exceptions/Tasks/ControllingAppResponse.html)——您可以设置掩码来自定义日志级别，或设置自己的未捕获异常处理程序。

# excel - 模块看不到公共变量

> ID：12453980
> 
> 赞同：0
> 
> 时间：2012-09-17T06:18:07.590
> 
> 标签：excel, vba, variables

打扰一下，又出问题了
标准模块：

```
Public ws1 As Worksheet
Public rCopy As Range 
```

工作簿_打开：

```
Set ws1 = Sheets("abc")
Set rCopy = ws1.Range("A1") 
```

第三个模块：

```
ws1.Select ' Error
rCopy.Select ' Error 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T06:30:39.590

*如果第三个模块中的代码由于 Workbook_Open之后*发生的某些事件而未被调用，则这两个变量仍未初始化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T06:31:45.397

您发布的代码*确实*有效。

您可能会收到错误的一个原因是，如果您一直在调试代码并且在某个时候出现错误并停止执行，则将不再设置公共变量。您只需要`Workbook_Open`再次运行子程序（您可以从 IDE 运行它，使用`F5`）

请注意，您应该从上一个问题中获得建议并使用`Set ws1 = Thisworkbook.Sheets("abc")`. 如果您不这样做，您将面临在另一个工作簿中`ws1`设置为工作表的风险`abc`，因为正如所写的那样，它相当于`Set ws1 = ActiveWorkbook.Sheets("abc")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T08:19:36.517

那么私人成员和财产呢？

```
Option Explicit

Private m_mySheet As Worksheet
Private m_myRange As Range

Public Property Get MySheet() As Worksheet
    If (m_mySheet Is Nothing) Then
        Set m_mySheet = ThisWorkbook.Worksheets("abc")
    End If
    Set MySheet = m_mySheet
End Property

Public Property Get MyRange() As Range
    If (m_myRange Is Nothing) Then
        Set m_myRange = MySheet.Range("A1")
    End If
    Set MyRange = m_myRange
End Property

Option Explicit

Sub test()
    Debug.Print MyRange.Address
End Sub 
```

# android - 我怎样才能找到每个应用程序的数据使用情况？

> ID：12453981
> 
> 赞同：1
> 
> 时间：2012-09-17T06:18:10.927
> 
> 标签：android

嗨，我正在研究 Android 中的交通应用程序，它显示了由 Android 设备接收和发送的数据。

我怎样才能在很长一段时间内获取接收和发送的数据，例如如何获取最近 24 小时接收和发送的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:44:51.383

您可以使用`TrafficStats`来确定每个 UID 的带宽使用情况，这大致对应于每个应用程序。

# objective-c - 将非 ARC 项目转换为 ARC

> ID：12453982
> 
> 赞同：7
> 
> 时间：2012-09-17T06:18:24.653
> 
> 标签：objective-c, ios5, automatic-ref-counting

我有一个 Xcode 3.2 目标项目。我想将此项目转换为 ARC 以改进

性能。我正在遵循这些步骤。

编辑->重构->转换为Objective C ARC

我有一些 .mm 文件，我正在使用 -fno-objc-arc 禁用 ARC。但即使之后

这我遇到了很多错误（ARC 问题）。例如，主要在 self=[super init] 调用中，

错误是不能在 init 系列中的方法之外分配给 self。能

有人告诉我我是否遵循正确的步骤？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-04T14:16:14.173

我试图将一个项目转换为 ARC，并在创建一个新项目并包含旧项目的文件之后 - 我遇到的问题之一是

> 无法在 init 系列中的方法之外分配给“自我”

选择器名称必须以`init`- 不仅如此 - 在我的情况下，初始化选择器是：

```
-(id)initwithPage:(unsigned)pageNum {...} 
```

注意小“w”。

我已将其更改为：

```
-(id)initWithPage:(unsigned)pageNum {...} 
```

注意大写的“W”！

我的问题解决了。

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T06:28:51.283

Ray Wenderlich 的教程有一个非常好的 ARC 转换两部分教程，其中应详细说明要采取的正确步骤：[第 1](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1) [部分第 2 部分](http://www.raywenderlich.com/5773/beginning-arc-in-ios-5-tutorial-part-2)

就您遇到的错误而言，描述几乎总结了它：您分配到`self`的方法不符合[init 方法的标准](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#family)。我不能说这是否是 ARC 之前的合法，但它肯定不再是了。要解决这个问题，要么将其设为 init 方法（遵循将超级 init 方法调用到 self、初始化任何值并返回 self 的 init 实践），要么在其中取出对 self 的赋值。对于其他错误，请发布您遇到的任何问题（其中许多都包含在 Ray 的教程中），我们将尽我们所能。

# asynchronous - 无需召回的异步任务

> ID：12453985
> 
> 赞同：0
> 
> 时间：2012-09-17T06:18:36.050
> 
> 标签：asynchronous, task

我在使用不同应用程序和语言的异步任务时遇到了一些困难。

据我所知，典型的用法是这样的：

```
asyncTask(x,y){
    //do something
}

alwaysRunWhenAsyncIsFinished(){
    //continue with the app has to 
    //happen here
}

...

mainProgramFunction(){
    asyncTask(5,6);
} 
```

那么在这种情况下，您必须编写程序直到异步任务发生，并且当您必须调用 asyncTask 时，您必须在 Recall Function 中编写继续代码，这是始终在异步任务之后发生的函数。

有没有可能写这样的东西：

```
asyncTask(x,y){
    //do something
}

...

mainProgramFunction(){
    asyncTask(5,6);

    continuingCode();//But happens AFTER asyncTask is done.
} 
```

我不完全知道这是否可能。也许这只能通过提供这种异步任务的特定 sdk 来实现？

最后一个选项可能是我并不真正了解异步任务以及如何使用它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:37:14.513

您的

```
 Kick off a task

 Keep doing stuff 
```

许多编程语言都支持程序结构模型。例如在 Java 中可以有

```
 Runnable myRunnable = new MyRunnable();

 new Thread(myRunnable).start();

 doSomeMore(); 
```

但是，这可能会有点混乱。您正在启动线程，这可能会无限期地运行，因此您的“主线”可能会在线程全部停止工作时到达终点。你没有“监督”线程来跟踪这项工作。更糟糕的是，您最终可能会触发过多的线程并耗尽所有处理能力。

因此，在不同的线程中进行所有处理是很常见的，这是一种**事件驱动**的编程风格。所以你有一个线程来监听诸如工作线程完成和决定创建哪些新工作等事件。或者可能是一个线程监听新请求（例如，用户单击某物，或者正在创建文件或消息到达）并决定是否以及何时启动工作人员。

一般来说，现代 UI 几乎完全是事件驱动的，大部分代码都在事件处理程序中（当用户单击*它时执行**此*操作），您自己不会编写 main，UI 框架在控制并调用您的代码。

 *我认为您会发现学习有关事件驱动编程[的教程很有帮助。](http://eventdrivenpgm.sourceforge.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-28T07:44:57.127

> mainProgramFunction(){ asyncTask(5,6);
> 
> continueCode();//但是发生在 asyncTask 完成之后。}

好吧，如果 continueCode() 必须在 asyncTask() 之后运行，那么您将离开异步世界（-：

但是，如果您需要异步执行某些操作，然后等待所有任务继续，您可以使用信号量例如：

```
mainProgramFunction(){
    bool taskDone = false;
    asyncTask(5,6);
    doSometingElse();

    while(taskDone != true){
      // wait
    }

    continuingCode();//But happens AFTER asyncTask is done.
}
asyncTask(a,b){
   // compute a and b 
   taskDone = true;
} 
```

（请注意，这是伪代码，每种语言都有关于如何“等待”部分的良好实践！）。

另一种（当然更好的方法）是使用事件驱动逻辑......*

# c# - 如何在 ASP.NET 中测试 WCF 服务？

> ID：12453989
> 
> 赞同：0
> 
> 时间：2012-09-17T06:18:48.390
> 
> 标签：c#, .net, wcf, web-services

我创建了一个简单的 WCF 应用程序，在我的服务中添加了一个显示方法，但我不知道**如何测试这个显示服务？**我用谷歌搜索过，但没有找到任何可行的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T06:20:48.780

您可以使用[`WcfTestClient.exe`](http://msdn.microsoft.com/en-us/library/bb552364.aspx)作为 SDK 一部分的实用程序。另一种可能性是编写一个示例客户端应用程序，您将在其中导入服务定义并能够调用其方法，但可能需要更多工作。作为替代方案，如果您在服务上使用 SOAP 绑定，您也可以 checkout [`SoapUI`](http://www.soapui.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T15:34:46.630

WCFTestClient 是一个不错的选择，但似乎 VS2010 在将其作为启动进程启动时有些不一致。最好的选择是从 VS2010 命令行（以管理员身份）运行它。您还可以查看免费的 soapUI 实用程序 (http://www.soapui.org/)，它具有（在我看来）比 WcfTestClient 更好的界面和更多的功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T07:25:42.623

在 Visual Studio 中，将服务设置为启动项目。这将在您开始运行调试器时启动 WcfTestclient.exe。

# c# - 在 C#.NET 中成功建立 Internet 连接的事件

> ID：12453991
> 
> 赞同：-2
> 
> 时间：2012-09-17T06:19:03.173
> 
> 标签：c#, .net

我需要知道如何在机器成功建立 Internet 连接时收到通知。我试着在这里搜索代码，我发现了一些这样的链接

[这是我在堆栈溢出中找到的链接](https://stackoverflow.com/questions/1859799/determine-if-internet-connection-is-available)

> NetworkChange.NetworkAvailabilityChanged。

我可以用这个吗？

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:40:02.730

看看这里：http: [//msdn.microsoft.com/en-us/library/ee264321%28VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ee264321%28VS.85%29.aspx)

它是否涵盖了您想要做的事情？

# c++ - 过程控制

> ID：12453994
> 
> 赞同：1
> 
> 时间：2012-09-17T06:19:15.900
> 
> 标签：c++, c, unix, fork

所以我正在尝试完成我的编程任务，这里是：

```
Write a C/C++ program (call it string invert) that takes a
string argument from the command line and outputs the string in reversed order. Here comes
the twist: Each process can output at most one character. If you want to output more than a
single character, you must fork off one or more processes in order to do that, and each of the
forked processes in turn outputs a single character. After the call to program string invert
with the command line argument, the output should appear, and no more processes should
be running, in addition to the shell. Test your program on any UNIX/LINUX machine, and
turn in the source code as part of the written assignment. (The source code should be at
most a few lines long.) 
```

我可以轻松地读取和反转字符串，没问题。问题是当它说“每个进程最多可以输出一个字符”时是什么意思。我什至不明白那是什么意思。我不需要任何代码，我相信一旦我理解我就可以自己做。我只需要有人解释这应该是什么意思。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:26:14.793

假设您有输入“abcd”，那么您的程序应该为每个字符生成一个进程。所以第一个进程将返回“d”，第二个进程将返回“c”，依此类推。该作业可能是对您对同步过程的理解程度的测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T06:24:23.827

每个进程都应该只打印*一个*字符。例子：

```
$yourProgamm sample 
```

通常你会遍历示例字符串并简单地通过调用来打印每个字符`cout`。但是，您应该每个进程只打印一个字符。意思是你输出`e`，一切都很好。但是，如果您再次运行循环以输出`l`相同的过程，则会打印第二个字符。

所以你必须为*每个字符**派生*一个进程，让那个进程打印那个字符并继续*你*的循环。一定要同步，否则你可能会得到随机顺序输出（我想这是分配的重点，只需运行几次就可以明白我的意思）。**`join`**

# eclipse-plugin - 弹出动态操作禁用操作

> ID：12453995
> 
> 赞同：1
> 
> 时间：2012-09-17T06:19:28.307
> 
> 标签：eclipse-plugin, swt, eclipse-rcp, jface

当我们选择分词动作时，我编写了一些代码来禁用弹出菜单动作。这些动作是动态的。但是，当我们单击弹出菜单上的特定操作时，会发生什么禁用操作。但它也不断增加动作。例如，我在弹出菜单中有 3 个操作。当我第一次右键单击并选择它禁用的任何操作时。下次当我右键单击时，它会出现 6 个动作。第三次是9个动作等等..这是我面临的问题。以下是我的代码。

```
package rcppopumenu;

import java.util.ArrayList;
import java.util.List;

import org.eclipse.jface.action.Action;
import org.eclipse.jface.action.IMenuListener;
import org.eclipse.jface.action.IMenuManager;
import org.eclipse.jface.action.MenuManager;
import org.eclipse.jface.action.Separator;
import org.eclipse.jface.viewers.TableViewer;
import org.eclipse.swt.SWT;
import org.eclipse.swt.layout.RowLayout;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.swt.widgets.Menu;
import org.eclipse.ui.ISharedImages;
import org.eclipse.ui.IWorkbenchActionConstants;
import org.eclipse.ui.PlatformUI;
import org.eclipse.ui.part.ViewPart;

public class View extends ViewPart {
    public static final String ID = "RCPPOPUMENU.view";

    private Action action1;
    private Action action2;
    private TableViewer viewer = null;
    private Composite composite = null;
    private Button button = null;

    /**
     * This is a callback that will allow us to create the viewer and initialize
     * it.
     */
    public void createPartControl(Composite parent) {

        composite = parent;
        composite.setLayout(new RowLayout());
        button = new Button(composite, SWT.NONE);
        button.setText("Hello");

        // viewer = new TableViewer(composite);

        // createActions();
        createHookContextMenu();
    }

    private void createHookContextMenu() {

        MenuManager menuMgr = new MenuManager("#PopupMenu");
        menuMgr.setRemoveAllWhenShown(true);
        menuMgr.addMenuListener(new IMenuListener() {
            public void menuAboutToShow(IMenuManager manager) {
                View.this.fillContextMenu(manager);
            }
        });
        Menu menu = menuMgr.createContextMenu(button);
        button.setMenu(menu);
        getSite()
                .registerContextMenu(menuMgr, getSite().getSelectionProvider());

    }

    private void fillContextMenu(IMenuManager manager) {

        List<Action> createActions = createActions();

        for (Action action : createActions) {

            manager.add(action);

        }

        // Other plug-ins can contribute there actions here
        manager.add(new Separator(IWorkbenchActionConstants.MB_ADDITIONS));
    }

    List<Action> list = new ArrayList<Action>();

    private List<Action> createActions() {

    //  list.clear();

        String[] array = { "a", "b", "c" };

        for (final String str : array) {

            Action action1 = new Action() {

                public void run() {
                    System.out.println(str);
                    setEnabled(false);
                }
            };
            action1.setText(str);
            action1.setToolTipText("Action 1 tooltip");
            action1.setImageDescriptor(PlatformUI.getWorkbench()
                    .getSharedImages()
                    .getImageDescriptor(ISharedImages.IMG_OBJS_INFO_TSK));

            if (!list.contains(action1)) {
                list.add(action1);
            }

        }

        return list;

    }

    /**
     * Passing the focus request to the viewer's control.
     */
    public void setFocus() {

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T11:37:36.720

您的 createActions() 方法应该只调用一次，并且您的操作列表作为成员属性存储在您的对象中 - 例如在 createPartControl() 方法中调用 - 。

```
private List<Action> actionsList;

/**
 * This is a callback that will allow us to create the viewer and initialize
 * it.
 */
public void createPartControl(Composite parent) {

    composite = parent;
    composite.setLayout(new RowLayout());
    button = new Button(composite, SWT.NONE);
    button.setText("Hello");

    // viewer = new TableViewer(composite);

    actionsList = createActions();
    createHookContextMenu();
}

private void fillContextMenu(IMenuManager manager) {

    for (Action action : actionsList) {

        manager.add(action);

    }

    // Other plug-ins can contribute there actions here
    manager.add(new Separator(IWorkbenchActionConstants.MB_ADDITIONS));
} 
```

# ruby - 当 Phusion Passenger 被描述为不需要任何配置时，它是什么意思？

> ID：12453996
> 
> 赞同：0
> 
> 时间：2012-09-17T06:19:28.933
> 
> 标签：ruby, passenger

我是 Ruby 新手，安装了 Phusion Passenger。我 [按照 Nginx 的说明](http://www.modrails.com/documentation/Users%20guide%20Nginx.html#_installing_phusion_passenger_for_nginx_through_the_installer)让它工作了。

具体来说，从他们的页面上，我不明白这个断言：

> 部署只是上传应用程序文件的问题。无需特定于 Ruby（on Rails）的服务器配置！

如果是这样，为什么我似乎需要一个 config.ru 文件？我在想我可以在passenger_root中删除一个index.rb文件并完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:53:18.853

`config.ru`实际上并没有那么多配置。事实上，它是 Rack 应用程序的主要入口点（例如 Rails 应用程序，还有 Sinatra 和其他应用程序）。因此，它是您的应用程序的一部分，而不是网络服务器配置的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:53:46.347

该参考资料正在谈论网络服务器配置部分。例如，您不需要在 apache 的虚拟主机配置中包含任何反向代理内容。这与使用薄等不同。

# php - $.ajax 成功功能对我不起作用。

> ID：12453998
> 
> 赞同：0
> 
> 时间：2012-09-17T06:19:31.520
> 
> 标签：php, jquery

朋友我有问题。我有一个会员区功能，它将使用 jquery 显示收件箱消息的计数。

这就是我所做的。

```
function listner_requests(){
  $.ajax({
  type: "POST",
  url: "http://src.abc.com/listner.php",
  data: "action=listner_requests",
  success: function(responseText, statusText, xhr) { alert(responseText);                               
  },
 error: function(data, statusCode) {
    alert("ERROR: "+data)
    }
  });
    } 
```

**监听器.php**

```
if($_POST['action']=="listner_requests"){
$sql="SELECT messages FROM friend_requests WHERE message_to='".$_SESSION['MEMBER_ID']."'";
$data=mysql_query($sql,$profile);
$count=mysql_num_rows($data);
echo $count;
exit();
} 
```

我在没有 ajax 的情况下执行 php 来测试它是否工作。它工作得很好。

但如果我使用 ajax 方法，它不会提醒正确的响应。它会产生错误。我做错事了吗？请帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:58:13.980

不是解决方案 - 而是帮助调试的评论（不能在评论中发布，因为代码不会出现）

你的代码：

```
 success: function(responseText, statusText, xhr) {
      alert(responseText);                                
  }, 
  error: function(data, statusCode) { 
      alert("ERROR: "+data) 
  } 
```

有点误导，因为您将参数弄混了。您会发现使用以下命令进行调试会更清晰：

```
 success: function(data) {
      alert(data);                                
  }, 
  error: function(xhr, status, textError) { 
    alert('Error ' + xhr.responseText + ' - ' + status + ' - ' + textError); 
  } 
```

如果 xhr.responseText 为空白（如您在评论中所说），则 textError 可能会显示答案。否则，状态将...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:37:48.823

假设你想计为响应..我更喜欢返回数据作为 json ......检查一下......看看它是否有效......

```
function listner_requests(){
$.ajax({
type: "POST",
dataType:'json',
url: "http://src.abc.com/listner.php",
data: "action=listner_requests",
success: function(data) { alert(data.totalcount);                               
},
error: function(data, statusCode) {
alert("ERROR: "+data)
}
});
} 
```

监听器.php

```
if($_POST['action']=="listner_requests"){
$sql="SELECT messages FROM friend_requests WHERE         message_to='".$_SESSION['MEMBER_ID']."'";
$data=mysql_query($sql,$profile);
$count=mysql_num_rows($data);
echo json_encode(array('totalcount'=>$count));
exit(); 
```

}