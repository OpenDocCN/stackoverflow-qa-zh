# StackOverflow 问答 10045000-10045999

# css - 在 h3 类 (WordPress) 上使用背景图片

> ID：10045002
> 
> 赞同：0
> 
> 时间：2012-04-06T14:39:33.477
> 
> 标签：css, background-image

这是我想要获得的效果的图像：

![在此处输入图像描述](../Images/02c070f912cd7a5513fdcb38a63f5a18.png)

这是我得到的实际图像：

![在此处输入图像描述](../Images/72b5e5b819c6ce9b859222c53825a1ea.png)

这是网站[http://ratest10.com/?page_id=2](http://ratest10.com/?page_id=2)

我试过这个；

```
.widget-container {
margin: 0 0 18px 0;
background: #FFFFFF;
width:204px;
padding: 0 8px;
overflow:visible;
}
.widget-title {
color: #222;
font-weight: bold;
background: url(images/sidbar-title-bak.png);
width:240px; height: 45px;
} 
```

然后尝试使用各种变体，包括溢出：可见，并将 html 结构更改为一个 div，其中包含一个包含 h3 的类，只是没有得到任何结果。

这是一个 WordPress 网站，其 html 是...

```
<li id="categories-2" class="widget-container widget_categories"><h3 class="widget-  title">Categories</h3> <ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:58:57.287

问题是白色背景的容器没有你的h3那么宽。但是，您可以移动背景位置以将其显示出来。例如：

```
.widget-title {
background-position:-19px 0;
} 
```

**编辑：**

实际上很抱歉，通过查看您的图像，我意识到您希望它脱离白盒。这是您需要做的。

```
.widget-title {
position:absolute;
}

#main .widget-area ul {
background-color:#FFF;
} 
```

然后您可能需要更改图像的宽度。他们现在似乎有点长了。或者你可以像我之前所说的那样使用背景位置。

# wpf - 附加行为或交互。触发器？

> ID：10045004
> 
> 赞同：0
> 
> 时间：2012-04-06T14:39:46.757
> 
> 标签：wpf, mvvm

我正在使用 MVVM 编写 WPF 应用程序，但我对应该使用什么来处理 EventArgs 从 View 到 ViewModel 的自定义路由感到困惑。

我的虚拟机上有一个名为 CurrentIndex 的属性，在我看来，它绑定到一个控件；

值="{绑定 CurrentIndex}"

当控件的值发生变化时，该控件有自己的一组EventArgs（即IndexValueChangedEventArgs）。

我试图了解如何触发此事件并访问我的 ViewModel 的当前状态，以便我可以相应地更新 viewmodel。

我尝试使用 EventTrigger（它调用命令但它绑定到我的 VM，因此我无法从控件中获取自定义事件参数）来执行此操作，并创建了一个附加行为，它使我可以访问自定义 EventArgs 但与我的虚拟机。

我不确定我在模式中做错了什么，我想做的就是将 EventArgs 从 ControlA 获取到可以与我的 VM 交互并相应更​​新的东西中。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:14:11.793

基本上，您不会将 EventArgs 从 View 路由到 ViewModel，而是使用绑定。

您的 ViewModel 应该实现 INotifyPropertyChanged。那里有各种样板实现，但自己做并不难，例如

```
public class MyViewModel : INotifyPropertyChanged
{
    #region Implementation of INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion

    private void RaisePropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if(handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    private int _currentIndex;
    public int CurrentIndex
    {
        get { return _currentIndex; }
        set
        {
            if (value != _currentIndex)
            {
                _currentIndex = value;
                RaisePropertyChanged("CurrentIndex");
            }
        }
    }
} 
```

现在，您的视图将使用您已有的绑定与您的视图模型的更改同步

```
Value="{Binding CurrentIndex}" 
```

当然，假设视图的 DataContext 设置为您的视图模型的实例。

# grails - 现有项目中的新 SOAP 请求绑定失败

> ID：10045006
> 
> 赞同：2
> 
> 时间：2012-04-06T14:40:03.090
> 
> 标签：grails, soap, binding, wsdl, cxf

我已向已使用大量 SOAP 请求的现有项目添加了一个新的 SOAP 请求。他们都工作正常。我以完全相同的方式添加新的（通过 Apache CXF 从 WSDL 生成的代码），但不知何故它失败了。

我收到此错误：

```
javax.xml.ws.WebServiceException: Could not find wsdl:binding operation info for web method foo.
    at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:113)
    at $Proxy51.foo(Unknown Source) 
```

这是一个 Grails 项目，代码调用如下：

```
FooRequest request = new FooRequest()
processResponse(order) { getPort().foo(request) } 
```

显然是底部的 getPort().foo() 失败了。~~事实上，我相信失败的不是调用，而是闭包的创建，因为 processResponse() 似乎没有被执行（我在该方法的第一行放了一个 println ）。~~ **编辑：**闭包的*执行*失败，而不是创建。所以它真的找不到 getPort().foo()，尽管我生成的接口确实有这个方法：

```
public nl.wecompany.portal.webserviceQopi.QOPIResponse foo(
    @WebParam(name = "in", targetNamespace = "")
    com.myproject.FooRequest in
); 
```

getPort() 返回一个 org.apache.cxf.jaxws.JaxWsClientProxy@41079622，它也为其他 SOAP 请求（有效的请求）执行此操作。

我在我的新代码和现有代码之间找不到任何有意义的区别。有什么想法可能是错的吗？关于在哪里看的任何建议？

编辑： port.metaClass.methods*.name.sort().unique() 确实包括我的新 foo() 方法。然而，当我调用它时，我得到了这个奇怪的 wsdl:binding 错误，并且该方法没有被执行（它没有到达第一行的 println）。

编辑：匿名一些我打算匿名的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T04:58:58.450

我想我想通了。JaxWsClientProxy 可能有一个 foo() 方法，但这不是我的 foo() 方法。它是我的 foo() 方法的代理，它首先检查此方法是否实际存在于远程服务器上的 WSDL 中。如果我没有使用 foo 请求更新远程服务器上的 WSDL，那么它会抛出异常而不是调用我的实际 foo() 方法。我没想到会在看起来像是常规方法调用的中间进行这种检查，但显然这种检查是拥有这样一个 WSDL/SOAP 绑定框架的全部意义所在。

连接到具有更新的 WSDL 的服务器解决了该问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-30T07:37:59.640

这在 jboss EAP 中发生在我身上，问题是在我的框架的 module.xml 中没有添加对 jboss-cxf 的依赖项，并且默认情况下它使用 de jaxws 规范。为了解决这个问题，我添加了以下内容：

```
<module name="org.jboss.ws.cxf.jbossws-cxf-client" export="true"/> 
```

export=true says that includes all the required libs for cxf library.

I hope this can help more people. I spent nearly a week on this.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T14:07:33.680

您是否使用参数名称“in”？

**in**是 groovy 中的保留字。我怀疑这是问题所在。

尝试重命名您的参数。

# c# - 微软 Kinect + Telldus Tellstick

> ID：10045011
> 
> 赞同：3
> 
> 时间：2012-04-06T14:40:36.377
> 
> 标签：c#, automation, kinect

我希望有人可以帮助我指出正确的方向。

我正在寻找一种使用 Microsoft Kinect 关闭灯的方法。该灯连接到与 Telldus Tellstick 配对的 Home Easy 远程插座开关。我正在使用 C# 编写应用程序，现在我的脑海里有一个模糊的想法，我想做什么，并且在使用 Kinect SDK 之后，我对如何使用 Kinect 有了更好的理解。

我想知道的是创建这个应用程序最合乎逻辑的方式是什么？我在想一些事情：初始化Kinect>当Kinect准备好然后扫描骨架>当检测到骨架时，将布尔值标记为“真”>当值为真时，打开灯。

我知道这很模糊，但我是使用 kinect 开发的新手，总的来说我还在学习 C#。任何帮助，无论多么小，将不胜感激！

问候，约翰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T02:22:09.553

您不能为此设置一个简单的布尔值，因为 SDK 的事件驱动方法将返回 6 个骨架结构，即使它们都是空的。不过，使用一点 LINQ 和空值检查可以得到你想要的东西。

脚步：

1.  初始化 Kinect（我将为此应用 WPFViewers 使用包含的 KinectSensorChooser）启用并注册骨骼流。
2.  在骨架事件中检查以确保您没有得到空骨架集合（它发生了）
3.  使用 LINQ 获取第一个将其跟踪属性设置为跟踪的骨架。您也可以只使用 for 循环，我只是发现 LINQ 对这些类型的迭代很有用。
4.  如果 LINQ 查询后的骨架不为空，请执行某些操作。

如果您想快速上手并有一些天赋，您可以利用下载 SDK Kinect Explorer 时包含的示例。有一个骨架查看器和 KinectSensorChooser，它可以让您拥有一个功能齐全的应用程序，只需很少的代码。[在此处](http://msdn.microsoft.com/en-us/library/hh855381.aspx)阅读有关此示例中包含的骨骼查看器的更多信息

* * *

我偶然发现了是否为此提供代码。我认为最好用执行操作所需的逻辑而不是实际代码来回答这个问题......因为你问了:) 但是，如果你想要这个代码，你可以从[Channel 9 的快速入门](http://channel9.msdn.com/Series/KinectQuickstart/Skeletal-Tracking-Fundamentals)或[我的书](https://rads.stackoverflow.com/amzn/click/com/0672335883)第 4 章中获得它

* * *

编辑（扩展 KinectExplorer）：

为了扩展 KinectExplorer 以在检测到骨架时做出响应，只需在 KinectSkeletonViewer.xaml.cs 中找到函数 KinectAllFramesReady。在这个函数内部，有一个对 hasSkeletonData 的布尔检查，当 Kinect 的可视框架中存在骨架时，将调用这个 if 语句。所以：

```
 private void KinectAllFramesReady(object sender, AllFramesReadyEventArgs e)
   {
    //Checking for Skeleton
    if (haveSkeletonData)
    {
     //Do Stuff Here
    }
   } 
```

# c - 为什么消息队列没有类似轮询/选择的机制？

> ID：10045015
> 
> 赞同：4
> 
> 时间：2012-04-06T14:40:53.310
> 
> 标签：c, linux, linux-kernel

就像我们可以做的那样，在 fd 上进行 poll/epoll/select，我们不能在 msg 队列 id 上。我发现了一些非标准的方法来将 msgqueue-id 设置为 fd，但毕竟它是非标准的。所以我的问题是，为什么 linux 极客，没有在 msg queue id 上实现 poll/select ？这会导致严重的问题吗？

我需要实现这种机制。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-06T14:49:39.093

从[`mq_overview`](http://www.kernel.org/doc/man-pages/online/pages/man7/mq_overview.7.html)手册页：

> 轮询消息队列描述符
> 
> 在 Linux 上，消息队列描述符实际上是一个文件描述符，可以使用 select(2)、poll(2) 或 epoll(7) 进行监控。这不是便携式的。

因此，您*可以*在消息队列中使用`poll`和朋友 - 只需确保使用现代变体即可。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T15:36:54.447

正如 Mat 指出的那样，POSIX MQ*可以*`select/poll`在 Linux中使用。除此之外，[mq_notify()](http://www.kernel.org/doc/man-pages/online/pages/man3/mq_notify.3.html)为您提供了在空 MQ 接收到消息时接收信号或生成新线程的选项。这是避免阻塞或轮询的另一种方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:51:09.887

我很惊讶它不仅可以工作，但如果没有，我怀疑原因是为了避免鼓励这种不可移植的做法。虽然允许消息队列描述符是文件描述符，但它们不是必需的，并且假定它们是文件描述符（因此占用相同的“数字空间”）的代码是不可移植的。

如果您需要文件描述符，最好只使用 Unix 套接字或其他一些机制来代替消息队列。消息队列似乎旨在用于线程的实时编程，通常不使用基于`select`/的事件驱动 IO。`poll`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-08T13:09:20.330

SysV MsgQ 为您提供了阻止您对特定消息类型或使用 IPC_WAIT 的任何消息类型的 msgrcv() 调用的规定。poll/epoll/select 用于帮助您编写事件驱动程序，其中用户应用程序不会浪费 cpu 周期轮询特定事件并将其留给内核更好地判断。这也是您使用 SysV msg Q 也可以实现的目标。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-21T22:18:38.850

IBM AIX 在 System V 队列上具有 poll() 扩展。但是Linux没有这个特性。另一方面，Linux Posix 队列实现允许对队列进行 select/poll/epoll。

# clojure - 在 Linux Mint 12 上为 Clojure 安装 Leiningen

> ID：10045018
> 
> 赞同：5
> 
> 时间：2012-04-06T14:41:06.720
> 
> 标签：clojure, leiningen, linux-mint

我是 clojure 初学者。我按照[http://www.unexpected-vortices.com/clojure/brief-beginners-guide/development-env.html](http://www.unexpected-vortices.com/clojure/brief-beginners-guide/development-env.html)上给出的步骤在运行 Linux Mint 12 的机器上设置 Leiningen。

```
cd ~/bin
wget https://raw.github.com/technomancy/leiningen/stable/bin/lein
chmod +x lein
lein self-install 
```

但是现在当我运行以下命令时：

```
lein new foobar 
```

我明白了

```
The program 'lein' is currently not installed.  You can install it by typing:
sudo apt-get install leiningen 
```

我在 ~/.lein/self-installs 中看到了一个文件 leiningen-1.7.1-standalone.jar。即使我使用了自安装方法，为什么仍要求我再次使用包管理器安装 lein？

请帮忙谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:43:27.063

您的目录似乎`~/bin`不在您的`PATH`.

在您的`.bashrc`（或`.bash_profile`）中，您需要添加以下内容：

```
export PATH=$HOME/bin:$PATH 
```

# php - MYSQL 列的默认值无效

> ID：10045022
> 
> 赞同：1
> 
> 时间：2012-04-06T14:41:34.693
> 
> 标签：php, mysql, sql, database

我正在使用 MySQL 的地理空间扩展。`MyISAM`表中有`listings`1`GEOMETRY`列`p`2`float`列`lat`和`lng`。中的值`p`是使用 设置的`UPDATE listings SET p = POINT(lat, lng);`。

**问题：**现在我想在 column 上设置一个空间索引`p`。当我尝试时：

```
ALTER TABLE listings ADD SPATIAL INDEX(p); 
```

并尝试过：

```
CREATE SPATIAL INDEX sp_index ON listings (p); 
```

两次，我都得到错误`error : All parts of a SPATIAL index must be NOT NULL`。

所以（使用 Navicat）我尝试制作 col `p` `NOT NULL`，但它需要一个默认值。我应该为此使用什么默认值？我尝试使用`''`作为默认值，但它给出了错误`invalid default value for 'p'`。

`p`我尝试为as设置默认值，`POINT(0,0)`但出现错误`BLOB/TEXT column 'p' can't have a default value`

我应该如何处理这个问题来创建空间索引？谢谢！

## 编辑

运行查询后`ALTER TABLE listings CHANGE p p POINT NOT NULL`，运行`ADD SPATIAL INDEX(p)`会导致一个奇怪的错误`Lost connection to MySQL server during query`。其他不涉及创建索引的查询工作正常，即。`SELECT * FROM listings`

**由于。。。导致的结果`SHOW CREATE TABLE listings`**

```
CREATE TABLE `listings` (
 `listing_id` int(8) NOT NULL AUTO_INCREMENT,
 `url` varchar(255) DEFAULT NULL,
 `website_city` varchar(32) DEFAULT NULL,
 `website` varchar(32) DEFAULT NULL,
 `price` int(7) DEFAULT NULL,
 `price_per_br` int(7) DEFAULT NULL,
 `bedroom` int(2) DEFAULT NULL,
 `bathroom` int(2) DEFAULT NULL,
 `fee` varchar(10) DEFAULT NULL,
 `address_1` varchar(255) DEFAULT NULL,
 `address_2` varchar(255) DEFAULT NULL,
 `city` varchar(64) DEFAULT NULL,
 `state` varchar(32) DEFAULT NULL,
 `postal` int(6) DEFAULT NULL,
 `retrival_date` timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
 `post_timestamp` timestamp NULL DEFAULT NULL,
 `lat` float(10,6) DEFAULT NULL,
 `lng` float(10,6) DEFAULT NULL,
 `p` point NOT NULL,
 `description` text,
 `img_subpath` varchar(15) DEFAULT NULL,
 `photos` text,
 `reply_email` varchar(255) DEFAULT NULL,
 `phone` varchar(16) DEFAULT NULL,
 `has_dishwasher` tinyint(1) DEFAULT NULL,
 `has_laundry` tinyint(1) DEFAULT NULL,
 `has_fireplace` tinyint(1) DEFAULT NULL,
 `has_elevator` tinyint(1) DEFAULT NULL,
 `has_balcony` tinyint(1) DEFAULT NULL,
 `has_deck` tinyint(1) DEFAULT NULL,
 `has_backyard` tinyint(1) DEFAULT NULL,
 `has_parking` tinyint(1) DEFAULT NULL,
 `has_gym` tinyint(1) DEFAULT NULL,
 `has_pool` tinyint(1) DEFAULT NULL,
 `cats_ok` tinyint(1) DEFAULT NULL,
 `dogs_ok` tinyint(1) DEFAULT NULL,
 PRIMARY KEY (`listing_id`),
 KEY `lat lng` (`lat`,`lng`,`price`,`price_per_br`,`bedroom`,`bathroom`,`post_timestamp`) USING BTREE,
 KEY `spatial` (`p`(25))
) ENGINE=MyISAM AUTO_INCREMENT=589605 DEFAULT CHARSET=latin1 
```

我转换`p`回`GEOMETRY`，运行查询以添加索引`p`并得到一个新错误`Cannot get geometry object from data you send to the GEOMETRY field`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-28T17:39:52.007

我遇到了类似的问题。

无法将 Geo-Datatype 设置为 DEFAULT 值。但是您可以使用触发器：

1.  如下定义您的表：

    ALTER TABLE 节点添加 latlonGeo POINT NOT NULL;

2.  创建一个触发器来设置“NOT NULL”列：

    CREATE TRIGGER default_geo_column BEFORE INSERT ON Node FOR EACH ROW SET NEW.latlonGeo = GeomFromText('POINT(0 -999)');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:54:14.760

此页面[InformIT：MySQL 中的数据类型](http://www.informit.com/articles/article.aspx?p=1238838&seqNum=2)声称空间列不能有`DEFAULT`值，但我无法在 MySQL 文档中找到该信息：

> **3.2.3 指定列默认值**
> 
> 对于除 BLOB 和 TEXT 类型、空间类型或具有 AUTO_INCREMENT 属性的列之外的所有类型，您可以指定一个 DEFAULT def_value 子句来指示...

在我的 5.1 框中测试显示与您相同的错误。所以这个说法可能是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T09:35:19.880

应该做的伎俩！

```
ALTER TABLE `devices` ADD `last_location` POINT;
UPDATE `devices` SET `last_location` = ST_GeomFromText("POINT(0 0)");
ALTER TABLE `devices` MODIFY `last_location` POINT NOT NULL;
CREATE SPATIAL INDEX `location_index` ON `devices` (`last_location`); 
```

# java - 在 Java 中对字符进行加减运算并始终在 ASCII 范围内得到结果

> ID：10045024
> 
> 赞同：0
> 
> 时间：2012-04-06T14:41:34.943
> 
> 标签：java, ascii, sum, chars, subtraction

我创建了两个函数，它们将两个字符的数值相加和相减，并在 PHP 中返回结果的字符。是这样的：

```
function sumchars($c1, $c2) {
    return chr(ord($c1) + ord($c2));
}

function subchars($c1, $c2) {
    return chr(ord($c1) - ord($c2));
} 
```

好吧，我还在 Java 中创建了这两个函数，它们应该像 PHP 那样工作。

```
public static String sumchars(char c1, char c2) {
    return (char)((int)c1 + int(c2));
}

public static String subchars(char c1, char c2) {
    return (char)((int)c1 -+ int(c2));
} 
```

似乎 PHP 函数 chr() 知道如何处理超出 ASCII 范围（大于 255）和负数（小于 0）的结果。在 Java 中发生的情况并不相同（我只是转换整数结果而不是函数）。我知道我可以为此创建一个简单的函数，但我想知道是否已经有一个。我希望这些功能非常快，我更愿意使用已经实现的东西，而不是我创建的功能。

提前感谢您的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:47:11.307

只需添加 256 以确保您没有负值，然后将结果乘以 256 以确保它不大于 256。（或者，使用`if else`语句）。

```
public static String sumchars(char c1, char c2) {
    return (char)((((int)c1 + int(c2)) + 256) % 256);
}

public static String subchars(char c1, char c2) {
    return (char)(((int)c1 - int(c2)) + 256) % 256);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:47:59.130

您可以使用 Character 类：

[http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html)

```
Character.isLetter()
Character.isDigit()
Character.isLetterOrDigit() 
```

然后根据返回的布尔值确定要做什么。

# facebook - 将画布指向我的站点总是转到 /view

> ID：10045025
> 
> 赞同：0
> 
> 时间：2012-04-06T14:41:35.470
> 
> 标签：facebook, url, facebook-canvas

我只是潜入了令人兴奋的 facebook 应用程序创建世界，但已经遇到了一个希望易于修复的障碍。我正在按照此 URL 上的分步说明进行操作：http: [//developers.facebook.com/docs/appsonfacebook/tutorial/](http://developers.facebook.com/docs/appsonfacebook/tutorial/)

我正在尝试将 facebook 应用程序画布指向一个 URL（我们称之为“http://mydomain.com/my/path/”）。这个 URL，当我直接加载它时，只显示一个“hello word”消息，所以没有重定向或类似的事情发生。但是，如果我使用安全或不安全的连接，请不要担心，画布似乎总是想加载“http://mydomain.com/view”，这会显示 404 错误消息。

我才刚刚开始，所以我没有在“画布 URL”选项之外配置任何东西（尚未配置授权）。我*想*我可以让“/view”在我的服务器上显示我的 facebook 应用程序，但这有几个问题。1）它与我的 facebook 应用程序最终将托管的现有 URL 冲突，2）根据文档，这是未定义的行为，我想知道为什么会这样。

欢迎任何帮助，因为我现在陷入泥潭。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:05:20.753

在您的应用设置中，您会注意到一些 URL 字段。画布字段、页面画布字段等...请粘贴这些字段的值（来自您的 Facebook 应用程序设置页面）以供人们查看。

例如，我将 /show 设置为 Canvas URL。任何时候任何人访问我的应用程序，他们都会看到 /show。此外，如果您最近更改了 URL，您可能会注意到一些 LAG，因为设置更改会传播到所有 FB 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T15:01:53.413

我解决了这个问题。我使用的服务器软件在“幕后”执行重定向。直到我稍微加快了日志记录，我才看到这一点。我已经解决了这个问题，现在一切都按预期工作。谢谢您的帮助！

# sqlite - 如何针对 SQLite 3 数据库文件执行 sql 脚本文件？

> ID：10045035
> 
> 赞同：32
> 
> 时间：2012-04-06T14:42:06.867
> 
> 标签：sqlite

什么是 MySQL 的 SQLite 3 (3.7.11) 类似物

```
mysql -p -u username database_name < file.sql 
```

对指定数据库执行给定 SQL 脚本文件中的所有查询？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-04-06T14:54:43.830

这应该有效：

```
[someone@somewhere ~]$ echo "select * from sometable;" > file.sql
[someone@somewhere ~]$ sqlite3 file.db < file.sql 
10/02/2012
11/01/2012
09/03/2012 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-06T08:48:30.030

以下也应该起作用：

```
 echo "SELECT id, username, email FROM fos_user_user;" | sqlite3 app/data.db3 
```

# sql - 在sql中更改日期格式

> ID：10045041
> 
> 赞同：0
> 
> 时间：2012-04-06T14:42:41.890
> 
> 标签：sql, sql-server

```
set dateformat dmy
select isdate('31/1/2012') 
```

我想通过在 Windows 控制面板中**更改数字、日期和时间的格式**，我不必在 sql中**设置 DATEFORMAT DMY ？**

所以我进行了更改，省略了 set 语句，并且 isdate 仍然失败，我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:46:04.390

试试这个。

```
SELECT CONVERT(VARCHAR(10),GetDate(),111) 
```

这`111`是日期格式。您可以更改它以满足您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:05:48.773

SQL Server 通常在`System`用户帐户或`NETWORKSERVICE`. 这些在安装时采用区域设置。

因此，要更改 SQL Server 的区域设置，您必须更改 sql server 服务使用的用户帐户的区域设置。

[您可以按照本文](http://windows.microsoft.com/en-US/windows-vista/Apply-regional-and-language-settings-to-reserved-accounts)中说明的步骤进行更改

（我从未对此进行过测试，但理论上它应该可以工作。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-07T10:28:51.173

在 SQL Server 2012 中，您可以使用`TRY_PARSE`和指定文化（例如`en-gb`）。你可以在`TRY_PARSE`这里阅读：

[http://msdn.microsoft.com/en-us/library/hh213126(v=sql.110).aspx](http://msdn.microsoft.com/en-us/library/hh213126(v=sql.110).aspx)

当然，首先使用明确的日期格式要安全得多，并避免所有的文化废话。您可以让应用程序在看到数据库之前转换用户条目，或者完全避免字符串输入 - 使用日历控件或下拉菜单，您可以指定安全格式`YYYYMMDD`，而不必担心区域、语言或日期格式设置 - 永远不会介意相信所有用户都在输入`d/m/y`与`m/d/y`......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T14:53:45.577

无论服务器设置如何，SQL 都会处理数据库中的日期时间。如果你有一个看起来像日期时间的任何格式的字符串并且你想转换它，你可以使用 CAST() 或 CONVERT() 来做这件事。但你总是必须这样做。

请参阅[http://msdn.microsoft.com/en-us/library/ms187928.aspx](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

一个很好的信息也是[http://karaszi.com/the-ultimate-guide-to-the-datetime-datatypes](http://karaszi.com/the-ultimate-guide-to-the-datetime-datatypes)

在你的情况下

```
select isdate('31/1/2012') 
```

应该管用。那么运行时会出现什么错误呢？

编辑：试过这个：

```
SELECT DATEPART(m,CAST('1/31/2012' AS datetime)) 
```

和

```
SELECT DATEPART(m,CONVERT(datetime, '31/1/2012', 103)) 
```

总是像我预期的那样给我 1 个月。

# android - 从父 Activity 中更新 Fragment UI

> ID：10045042
> 
> 赞同：0
> 
> 时间：2012-04-06T14:42:47.820
> 
> 标签：android, user-interface, android-activity, fragment

当我尝试从父活动中更新一些片段 UI 元素时，我注意到一个奇怪的行为。

如果有人可以提供一些背后的推理，我将不胜感激！

这是场景：

我有一个活动......说我的活动。**在 MyActivity**我有几个片段：**LeftFragment**和**RightFragment**。LeftFragment 有一个按钮：“ **showTheDialogBtn** ”。当**我按下“showTheDialogBtn”**时，我得到一个对话框，其中包含一些 EditText 字段和最后一个**按钮 OK**。该对话框是在 MyActivity 中**创建的**（例如不在 LeftFragment 中）。现在，当我**按下该对话框上的 OK**按钮时，我试图通过调用**rightFragment.changeMyTextFieldColor(RED)**的实例来更改 RightFragment 上的文本颜色。

我注意到的是，**在 RightFragment 的实例上调用 changeMyTextFieldColor 并没有做任何事情**。但是，如果我在 MyActivity 内（在 OK 按钮的 onClickListener 内）获得了需要更改的 TextView，那么一切似乎都正常。

这对任何人都有意义吗？请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:00:55.760

它没有改变的原因是因为你调用 `changeMyTextFieldColor`那与`ONCREATEVIEW()`. 更多细节：您在屏幕上看到的内容来自 onCreateView()。所以如果你想更新 UI，你应该修改来自 onCreateView() 的视图。你应该：

1.  确保视图的上下文来自 onCreateView() 和“changeMyTextFieldColor”的上下文是相同的。
2.  确保更改实际属于从 onCreateView() 生成的“视图”的组件的颜色。例如：保存 onCreateView() 的视图以供以后修改。

# php - 如何使用 php 从已保存在数据库中的下拉列表中选择某些内容？

> ID：10045044
> 
> 赞同：0
> 
> 时间：2012-04-06T14:43:01.523
> 
> 标签：php, html, html-select

我有这个国家的下拉列表：

```
<select name="country">
    <option value="">Country...</option>
    <option value="Afganistan">Afghanistan</option>
    <option value="Albania">Albania</option>
    <option value="Algeria">Algeria</option>
    <!-- Removed several options as they are not needed for question -->
    <option value="Zaire">Zaire</option>
    <option value="Zambia">Zambia</option>
    <option value="Zimbabwe">Zimbabwe</option>
</select> 
```

当用户编辑他们的个人资料时，我希望默认选择用户选择的国家（在数据库中）。

## 例子

当用户注册时，`Egypt`被选中。当用户编辑他们的个人资料时，我希望这个下拉列表`Egypt`默认选择（直到更改）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:50:06.580

只需将`selected`属性添加到`option`用户在创建帐户时选择的属性。

## 基本理念

### 前锋

```
<?php
$country_list = '<select name="country">';
$selected_country = $user_info['country'];
foreach($countries as $country){
 $is_selected = ($country===$selected_country);
 $country_list .= '<option value="'.$country.'"'.($is_selected ? ' selected' : '').'>$country</option>';
}
$country_list .= '</select>'; 
```

### 尽管

```
<?php
...
$country_list = '<select name="country">';
$selected_country = $user_info['country'];
$stmt->bind_result($country);
while($mysqli->fetch()){
 $is_selected = ($country===$selected_country);
 $country_list .= '<option value="'.$country.'"'.($is_selected ? ' selected' : '').'>$country</option>';
}
$country_list .= '</select>'; 
```

***注意：**虽然它会消耗更多资源，但我**建议**至少使用一系列国家/地区，但最好将国家/地区存储在数据库中。数据库的原因是如果您更改了一个国家/地区的名称（例如，苏联到俄罗斯），您也不必为每个用户更新它（因为他们将链接到表`id`中的`countries`）。我建议使用数据库或数组，因为迟早您可能会`option`在某个时间点更改列表的标记，并且将列表放在数组中可以更改单行，而不是列出的**每个**国家/地区一次。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:44:59.263

html语法是这样的：

```
<option value="AAAA" selected>label</option> 
```

因此，在 PHP 中，从数据库中加载您的值和您选择的值，当您在循环中打印它们时，如果当前打印的是选定的，则只回显“选定”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:54:27.230

从数据库值定义一个变量。将整个`<select>`标签存储为变量。查找并用选定的属性替换选​​定的选项值。

```
$country_selected_value;
// defined from database
$country_select = '<select name="country">...</select>';
// ... represents your options
$value_search = 'value="'.country_selected_value.'"';
// what to look for in the select
echo str_replace($value_search , $value_search.'" selected="selected"', $country_select);
// displaying the select field with the selected option 
```

如果您需要帮助从数据库中获取数据，那么 SO 上已经有很多这样的主题。

# c# - EF Code-First 中查找表的最佳实践

> ID：10045046
> 
> 赞同：13
> 
> 时间：2012-04-06T14:43:11.210
> 
> 标签：c#, entity-framework-4.1, poco, code-first

我正在用 EF 做我的第一个项目，我打算采用代码优先模型。我试图找到一些关于处理相当经典的“查找表”场景的指导。

我正在处理一个非常规范的情况，我将保留地址数据。所以，我有一个简单的地址 DTO ......

```
public class Address
    {
        public int Id { get; set; }
        public virtual string StreetAddress1 { get; set; }
        public virtual string StreetAddress2 { get; set; }
        public virtual string City { get; set; }
        public virtual string State { get; set; }
        public virtual string ZipCode { get; set; }
    } 
```

在 state 属性中，我想存储标准的美国两字母州代码。出于验证目的，我希望在结果地址表和相当标准的状态查找表之间建立标准的一对多外键关系。该表可能包含一个 ID、两个字母的代码和包含完整州名的第三列。

我希望使用此状态查找表来填充和状态下拉样式框等，并且还可以作为对地址实体中提交的状态的验证。很普通的东西。所以，我有几个简单的（我希望的）问题。

1.  我是否需要创建一个实体来表示 State 实体只是为了让 EF 创建表，还是我可以将表创建过程包含在 DBCreation 策略中并在那里播种？
2.  创建该实体是否有意义，只是用作我想显示“状态选择器”的任何地方的“视图模型”
3.  我真的只想将两个字母的状态代码存储在地址实体中，但这是否有意义，或者将其作为状态实体的导航属性然后显示是否更有意义？

我在这里表达我的观点有点挣扎，所以如果我不清楚，请随时询问更多细节。

提前致谢。在 UI 中合适吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-06T15:13:16.227

1.  我会将状态设为它自己的类和地址的导航属性。

```
public class Address
{
    public int Id { get; set; }
    public virtual string StreetAddress1 { get; set; }
    public virtual string StreetAddress2 { get; set; }
    public virtual string City { get; set; }
    public virtual USState State { get; set; }
    public virtual string ZipCode { get; set; }
}

public class USState
{
    public int Id { get; set; }
    public string Code { get; set; }
    public string Text { get; set; }
} 
```

使用代码优先 EF 将创建表，但您可以在`Seed()`方法中填充它。

1.  您不一定需要使用视图模型，但使用共享视图在编辑表单中显示状态是有意义的。你没有提到 MVC，但如果你使用它，那么它就像放

```
[UIHint("StatePicker")]
public virtual USState State { get; set; } 
```

在您的 POCO 或视图模型中 - 取决于您的视图使用什么。然后在 Views/Shared/EditorTemplates 中，添加一个局部视图 StatePicker.cshtml，它看起来像

```
@inherits System.Web.Mvc.WebViewPage<USState>
@Html.DropDownListFor(m => m, new SelectList((IEnumerable<USState>)ViewBag.USStatesAll,
    "Id",
    "Name",
    Model==null?1:Model.Id),
    "Choose--") 
```

结合

```
@Html.EditorFor(m => m.State) 
```

在你看来。

1.  导航属性。您的数据库会将 USState id 存储为外键，但您的应用可以根据需要使用 addr.State.Code 或 addr.State.Text。它更加灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:59:38.380

1.  Yes you can just create a new DBCreation script extending the original script and create a state table which has no relation with the Entity Framework.

2.  If I were you I would create the state entity. If state entity is not created, in the end you need to create it in the code, but populating this entity will be a problem, you will need to use sql (you may store this data in xml which seems a better option than storing in sql).

3.  If you decide to store the table in the database and directly use it by creating an entity, making it a navigation property is a better option since you may use it directly while lazy loading or eager loading by including it.

# android - 将下载的数据存储在 sdcard 上

> ID：10045050
> 
> 赞同：0
> 
> 时间：2012-04-06T14:43:26.920
> 
> 标签：android, caching

有没有办法保存在应用程序运行期间获得的数据，然后使用它而不是再次访问网络资源？

例如，我有一篇文章，里面有一些图片。当客户第一次打开文章时，图像被下载并存储在他的 sdcard 上。因此，他下次访问该文章时，不会浪费网络流量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:46:39.243

[http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)

这是下载文件形式 URL（文件）并保存到 sd 卡的代码。

并进一步使用

您可以轻松地为您的 URL（文件）实现

# iphone - 从 UIScrollView 中删除按钮

> ID：10045052
> 
> 赞同：0
> 
> 时间：2012-04-06T14:43:37.190
> 
> 标签：iphone, objective-c

我使用 IB 添加了 UIScrollVIew。然后使用下面的代码向这个 UIScrollView 添加一些按钮。

```
for (int index=0; index<3;index++)
{
    UIButton* button=[UIButton buttonWithType:UIButtonTypeRoundedRect];

    [button setTitle:buttonTitle forState:UIControlStateNormal];
    [button setFrame:CGRectMake(18,200,300,45)];
    [button setTag:100+index];
    [button addTarget:self action:@selector(butclick:) forControlEvents:UIControlEventTouchUpInside];
    [self.scrollView addSubview:button];
} 
```

现在我需要一种方法来删除我从 ScrollView 添加的这些按钮。

注意：还有其他按钮、图像、标签附加到 UIScrollView。这些不应该被删除。只有我以编程方式添加的按钮应该从 UIScrollView 中删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:45:53.713

在这些按钮上贴上标签，然后您可以再次使用它们：

```
for (int index=0; index<3;index++)
{
    UIButton *myButton = (UIButton *)[self.scrollView viewWithTag:100+i];
    [myButton removeFromSuperView];
} 
```

或者将这些按钮保存在一个数组中，然后你也可以这样做。

如果你只想隐藏它们，你可以这样做：

```
myButton.hidden = YES; 
```

# java - 用两个字符反转一个字符串两个字符

> ID：10045055
> 
> 赞同：0
> 
> 时间：2012-04-06T14:43:47.083
> 
> 标签：java, string, reverse

我正在尝试开发一个程序，将 6 个字节转换为十六进制表示（如 00:65:36:21:A5:BC）

用这种方法：

```
public static String toHexString(byte[] bytes) {
        StringBuilder sb = new StringBuilder(18);
        for (byte b : bytes) {
            if (sb.length() > 0)
                sb.append(':');
            sb.append(String.format("%02x", b));
        }

        return sb.toString();

    } 
```

我获得了一个很好的格式，但现在我必须将数字两个两个反转。

我得到什么 00:65:36:21:A5:BC

我应该得到什么 BC:A5:21:36:65:00

任何人都可以帮助我完成最后一步吗？我正在努力获取每对数字并反转其位置（将 BC 放在开头，但不更改其顺序（如 CB）

提前致谢

G。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T14:47:58.697

要在开头追加而不是追加到最后，请使用以下命令：

```
sb.insert(0, text); 
```

而不是这个：

```
sb.append(text); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:50:20.063

您可以使用反向正则`for`代替`for each`

```
public static String toHexString(byte[] bytes) {
    StringBuilder sb = new StringBuilder(18);
    for (int i = bytes.length - 1; i >= 0; i--) {
        if (sb.length() > 0)
            sb.append(':');
        sb.append(String.format("%02x", bytes[i]));
    }

    return sb.toString();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:50:29.610

使用 StringBuilder 类的 insert 方法而不是 append 方法，偏移量为 0。

[你可以在这里](http://docs.oracle.com/javase/tutorial/java/data/buffers.html)阅读更多。

# c# - 修改或替换从 DataTable 读取的列值

> ID：10045061
> 
> 赞同：0
> 
> 时间：2012-04-06T14:44:10.277
> 
> 标签：c#, datatable

我正在尝试更新列中的值，例如从数据表中读取的以下代码块。目前，它只更新第一行的指定列值（字符串），但不遍历下一行并更新那些。我究竟做错了什么？请指教。

```
public void UpdateDescription(DataTable dataTable)
{
    if (dataTable != null && dataTable.Rows.Count > 0)
    {
        DataRow dr = dataTable.Rows[0];
        string dataDesc = string.Empty;
        int rowIndex = 0;
        dataDesc = dr["DataDesc"].ToString();

        if (rowIndex < dataTable.Rows.Count)
        {
            dr = dataTable.Rows[rowIndex];

            if (!dr.IsNull("DataDesc"))
            {
                if (dataDesc.Contains("STATE"))
                {
                    dataDesc = dataDesc.Replace("STATE", "").Trim();
                }

                if (dataDesc.Contains("HELLO ALL"))
                {
                    dataDesc = dataDesc.Replace("HELLO ALL", "").Trim();
                }

                if (dataDesc.Contains("("))
                {
                    dataDesc = dataDesc.Remove(dataDesc.IndexOf("(")).Trim();
                }
            }
            dr["DataDesc"] = dataDesc;
        }

        rowIndex++;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:54:28.207

看起来您只读取一次该`string`值`dataDesc`。

也许您的意思是为每一行阅读它。我不知道。

如果是这样，试试这个版本：

```
public void UpdateDescription(DataTable dataTable) {
  if ((dataTable != null) && (0 < dataTable.Rows.Count)) {
    int rowIndex = 0;
    //DataRow dr = journalTable.Rows[0]; // What was this line for? "journalTable" is not defined here.

    if (rowIndex < dataTable.Rows.Count) {
      DataRow dr = dataTable.Rows[rowIndex];

      if (!dr.IsNull("DataDesc")) {
        string dataDesc = dr["DataDesc"].ToString();
        if (dataDesc.Contains("STATE")) {
          dataDesc = dataDesc.Replace("STATE", "").Trim();
        }

        if (dataDesc.Contains("HELLO ALL")) {
          dataDesc = dataDesc.Replace("HELLO ALL", "").Trim();
        }

        if (dataDesc.Contains("(")) {
          dataDesc = dataDesc.Remove(dataDesc.IndexOf("(")).Trim();
        }
        dr["DataDesc"] = dataDesc;
      }
    }

    rowIndex++;

  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:47:28.107

你没有循环。尝试这个：

```
while (rowIndex < dataTable.Rows.Count) 
{ 
    dr = dataTable.Rows[rowIndex];
    ...
    dr["DataDesc"] = dataDesc;
    rowIndex++; 
} 
```

或者，如果您愿意...

```
for (int rowIndex = 0; rowIndex < dataTable.Rows.Count; ++rowIndex)
... 
```

另外，如果一行的“dataDesc”为空，它将在您的逻辑中获得前一行的值！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:48:32.650

您需要循环数据表中的行。您只是在此行中指定一行，编号为 0：

```
DataRow dr = journalTable.Rows[0]; 
```

以下代码应该适合您：

```
 public void UpdateDescription(DataTable dataTable)
    {
        if (dataTable != null && dataTable.Rows.Count > 0)
        {
            foreach (DataRow dr in dataTable.Rows)
            {
                String dataDesc = dr["DataDesc"].ToString(); 

                if (!dr.IsNull("DataDesc"))
                {
                    if (dataDesc.Contains("STATE"))
                    {
                        dataDesc = dataDesc.Replace("STATE", "").Trim();
                    }

                    if (dataDesc.Contains("HELLO ALL"))
                    {
                        dataDesc = dataDesc.Replace("HELLO ALL", "").Trim();
                    }

                    if (dataDesc.Contains("("))
                    {
                        dataDesc = dataDesc.Remove(dataDesc.IndexOf("(")).Trim();
                    }
                }
                dr["DataDesc"] = dataDesc;

            }

        }
    } 
```

# django - 如何在 Django 管理内联中仅显示一张图像

> ID：10045064
> 
> 赞同：25
> 
> 时间：2012-04-06T14:44:13.607
> 
> 标签：django, django-admin

我在我`django.contrib.admin`的一个应用程序中使用。

我的模型：

```
class Gallery(models.Model):
    location = models.ForeignKey(Location)
    date = models.CharField(max_length = 15)

class Image(models.Model):
    gallery = models.ForeignKey(Gallery)
    name = models.CharField(max_length=35)
    image = ImageField(upload_to='songs') 
```

我的`admin.py`：

```
class ImageInline(admin.StackedInline):
    model           = Image

class GalleryAdmin(admin.ModelAdmin):
    inlines = [ ImageInline, ] 
```

在管理部分，我现在可以创建画廊并在同一页面上添加图像。默认情况下，django 显示三种图像上传表单。我怎样才能将其更改为只有一个？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-06T16:12:58.883

额外 = 0

```
class GalleryImageInline(admin.TabularInline):
    """
    Gallery Image inline
    """
    fieldsets = (
        (
            None, 
            {
                'fields': ('name', 'image',)
            }
        ),
    )

    model = Image
    extra = 0

class GalleryAdmin(admin.ModelAdmin):
    """
    Case Study Admin
    """
    fieldsets = (
        (
            None, 
            {
                'fields': ('location', 'date',)
            }
        ),
    )

    inlines = (GalleryImageInline, )
    list_display = ['location', 'date']
    list_filter = ['location', ] 
```

在我看来，对于具有有用图像的内联，您需要实际显示内联图像（因此自定义覆盖图像小部件）：

```
from django.contrib.admin.widgets import AdminFileWidget
from django.utils.translation import ugettext as _
from django.utils.safestring import mark_safe
import os
import Image

class AdminImageWidget(AdminFileWidget):
    def render(self, name, value, attrs=None):
        output = []
        if value and getattr(value, "url", None):

            image_url = value.url
            file_name=str(value)

            # defining the size
            size='100x100'
            x, y = [int(x) for x in size.split('x')]
            try :
                # defining the filename and the miniature filename
                filehead, filetail  = os.path.split(value.path)
                basename, format    = os.path.splitext(filetail)
                miniature           = basename + '_' + size + format
                filename            = value.path
                miniature_filename  = os.path.join(filehead, miniature)
                filehead, filetail  = os.path.split(value.url)
                miniature_url       = filehead + '/' + miniature

                # make sure that the thumbnail is a version of the current original sized image
                if os.path.exists(miniature_filename) and os.path.getmtime(filename) > os.path.getmtime(miniature_filename):
                    os.unlink(miniature_filename)

                # if the image wasn't already resized, resize it
                if not os.path.exists(miniature_filename):
                    image = Image.open(filename)
                    image.thumbnail([x, y], Image.ANTIALIAS)
                    try:
                        image.save(miniature_filename, image.format, quality=100, optimize=1)
                    except:
                        image.save(miniature_filename, image.format, quality=100)

                output.append(u' <div><a href="%s" target="_blank"><img src="%s" alt="%s" /></a></div> %s ' % \
                (miniature_url, miniature_url, miniature_filename, _('Change:')))
            except:
                pass
        output.append(super(AdminFileWidget, self).render(name, value, attrs))
        return mark_safe(u''.join(output)) 
```

注意：这会做一些你可能不喜欢的调整大小的事情——所以你可能需要自己重写小部件的拇指大小部分。

因此，您将需要覆盖内联表单中的小部件：

```
class GalleryImageForm(forms.ModelForm):
    """
    Image Admin Form
    """
    class Meta:
        model = Image
        widgets = {
            'image' : AdminImageWidget,
        }

class GalleryImageInline(admin.TabularInline):
    ...
    form = GalleryImageForm
    ... 
```

你最终会得到这样的东西（这是另一个项目的一部分，并且有很多额外的东西）： ![图像管理内联的屏幕截图](../Images/79f312fa357732f6ec3e48bd88d271a3.png)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-06T14:50:12.387

检查[InlineModelAdmin.extra](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.extra)和[InlineModelAdmin.max_num](https://docs.djangoproject.com/en/dev/ref/contrib/admin/#django.contrib.admin.InlineModelAdmin.max_num)的文档。

我相信在你的情况下`max_num`需要是 1 和`extra`0。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-11-08T13:49:32.280

如果您使用[sorl-thumbnails](http://sorl-thumbnail.readthedocs.org)，小部件是这样的：

```
from django.contrib.admin.widgets import AdminFileWidget
from django.utils.safestring import mark_safe
from sorl import thumbnail

class AdminImageWidget(AdminFileWidget):
    def render(self, name, value, attrs=None):
        output = []
        if value and getattr(value, "url", None):
            t = thumbnail.get_thumbnail(value,'100x100')
            output.append('<img src="{}">'.format(t.url))
        output.append(super(AdminFileWidget, self).render(name, value, attrs))
        return mark_safe(u''.join(output))

class GalleryImageForm(forms.ModelForm):
    """
    Image Admin Form
    """
    class Meta:
        model = Image
        widgets = {
            'image' : AdminImageWidget,
        }

class GalleryImageInline(admin.TabularInline):
    ...
    form = GalleryImageForm
    ... 
```

# javascript - 尝试使用 HTML、Javascript 和 Phonegap 打开 Android SD 卡

> ID：10045065
> 
> 赞同：1
> 
> 时间：2012-04-06T14:44:15.003
> 
> 标签：javascript, jquery, cordova, android-sdcard

我正在尝试使用 Phonegap 打开 SD 卡并在 Android 中上传文件。下面是我将 SD 卡内容附加到我的 HTML 的代码，但没有显示任何内容。我正在使用`cordova.js`, `jquery1.7.1.js`。下面是我的代码：

我的Javascript：

```
function onDeviceReady() {
    getFileSystem();
}

function getFileSystem() {
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0,
        function(fileSystem) { // success get file system
            root = fileSystem.root;
            listDir(root);
        }, 
        function(evt) { // error get file system
            console.log("File System Error: "+evt.target.error.code);
        }
    );
}

function listDir(directoryEntry) {
    if (!directoryEntry.isDirectory) 
        console.log('listDir incorrect type');

    $.mobile.showPageLoadingMsg(); // show loading message

    currentDir = directoryEntry; // set current directory
    directoryEntry.getParent(
        function(par) { // success get parent
            parentDir = par; // set parent directory
            if ((parentDir.name == 'sdcard' && currentDir.name != 'sdcard') || parentDir.name != 'sdcard') 
                $('#backBtn').show();
        }, 
        function(error) { // error get parent
            console.log('Get parent error: ' + error.code);
        }
    );

    var directoryReader = directoryEntry.createReader();
    directoryReader.readEntries(
        function(entries) {
            var dirContent = $('#dirContent');
            dirContent.empty();

            var dirArr = new Array();
            var fileArr = new Array();
            for (var i=0; i < entries.length; ++i) { // sort entries
                var entry = entries[i];
                if (entry.isDirectory && entry.name[0] != '.') 
                    dirArr.push(entry);
                else if (entry.isFile && entry.name[0] != '.') 
                    fileArr.push(entry);
            }

            var sortedArr = dirArr.concat(fileArr); // sorted entries
            var uiBlock = ['a','b','c','d'];

            for (var i=0; i < sortedArr.length; ++i) { // show directories
                var entry = sortedArr[i];
                var blockLetter = uiBlock[i%4];
                //console.log(entry.name);
                if (entry.isDirectory)
                    dirContent.append('<div class="ui-block-' + blockLetter + '"><div class="folder"><p>' + entry.name + '</p></div></div>');
                else if (entry.isFile)
                    dirContent.append('<div class="ui-block-' + blockLetter + '"><div class="file"><p>' + entry.name + '</p></div></div>');
            }
            $.mobile.hidePageLoadingMsg(); // hide loading message
        }, 
        function(error) {
            console.log('listDir readEntries error: ' + error.code);
        }
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:57:27.787

你看过 Cordova API 文档了吗？我试过这个示例代码，它工作得很好。[链接到 API 和示例代码](http://docs.phonegap.com/en/1.5.0/phonegap_file_file.md.html#LocalFileSystem)

# perl - 如果同一个选项多次出现，Getopt::Long GetOptions 会产生错误吗？

> ID：10045067
> 
> 赞同：4
> 
> 时间：2012-04-06T14:44:17.910
> 
> 标签：perl, getopt-long

我有这个getopt：

```
GetOptions(  GetOptions ("library=s" => \@libfiles);
    @libfiles = split(/,/,join(',',@libfiles));
     "help" => \$help,
     "input=s" => \$fileordir,
     "pretty-xml:4" => \$pretty
); 
```

是否可以`Getopt::Long::GetOptions`检测是否在命令行上多次提供了相同的选项？例如，我希望以下内容生成错误：

```
perl script.pl --input=something --input=something 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T15:13:00.763

我认为没有直接的方法，但您有两种选择：

*   使用数组并在处理选项后检查

    ```
    #!/usr/bin/perl

    use warnings;
    use strict;

    use Getopt::Long;

    my @options;
    my $result = GetOptions ('option=i' => \@options);

    if ( @options > 1 ) {
       die 'Error: --option can be specified only once';
    } 
    ```

*   使用子程序并检查选项是否已定义

    ```
    #!/usr/bin/perl

    use warnings;
    use strict;

    use Getopt::Long;

    my $option;
    my $result = GetOptions (
        'option=i' => sub {
            if ( defined $option) {
                die 'Error: --option can be specified only once';
            } else {
                $option = $_[1]; 
            }
        }
    ); 
    ```

    `!`在这种情况下，您可以在开头使用感叹号`die`，错误将被捕获并报告为通常的 Getopt 错误（有关详细信息，请参阅[Getopt::Long 的文档](http://perldoc.perl.org/Getopt/Long.html#User-defined-subroutines-to-handle-options)）

# java - 如何一次向 TelnetOutputStream 写入一个字符？

> ID：10045079
> 
> 赞同：0
> 
> 时间：2012-04-06T14:45:02.837
> 
> 标签：java, apache-commons, telnet, outputstream

我正在使用`apache.commons.net.telnet`.

我有`char[] array`。我打电话`TelnetClient.getOutputStream().write(array[i]).`

我希望我的数据一次发送一个字符，但 Wireshark 显示第一个字符单独发送，其余字符一起发送。为什么会出现这种情况，如何逐个字符发送数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:58:42.680

好的。这是正确的答案。要尽快发送数据，请执行以下操作：

在您的输出流上调用 setTcpNoDelay(true)。

用你的整个数组调用 write。你应该更新一次写一个字节。同时写入整个数组会快得多。

写完后调用flush()。

这是发送数据的最快方式，也是产生最小延迟的方式。也就是说：一次发送一个字节并不能确保服务器更快地接收它们。

一次发送一个字节的数据会减慢您的速度，而不是加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:52:09.753

您是否尝试`flush()`在每次调用 write() 后调用？

`flush()`函数应该在缓冲区被填充之前发送流中的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T14:52:21.727

如果您真的想一次发送一个字符（为什么，它真的会减慢您的速度）我想您必须遍历数组并每次调用 write 一个字节。然后在每次写入后刷新。类似的东西（未经测试，但它应该给你一个提示）。

```
OutputStream os=TelnetClient.getOutputStream();
for(int i=0;i!=array.length;i++) {
  os.write(array[i]);
  os.flush();
} 
```

# matlab - 在matlab中绘制狄拉克函数

> ID：10045081
> 
> 赞同：1
> 
> 时间：2012-04-06T14:45:09.120
> 
> 标签：matlab, plot, visualization

我正在尝试使用在 Matlab 中绘制 Dirac delta 函数`plot`，但我在图中看不到任何内容。我如何可视化它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T15:20:29.047

```
x = -10 : 0.1 : 10;
y = double(x == 0);
plot(x, y); 
```

或者

```
stem(x, y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-28T15:40:42.127

我个人更喜欢使用`dirac`和设置`Inf`到`1`或其他幅度。

```
x = -1:0.1:1;
y = dirac(x);
idx = y == Inf; % find Inf
y(idx) = 1;     % set Inf to some amplitude
stem(x,y) 
```

当然，另一个答案是完全有效的。这只是个人对明确的偏好。

# ruby-on-rails - ruby on rails 中的密码保护页面（无用户名）

> ID：10045082
> 
> 赞同：1
> 
> 时间：2012-04-06T14:45:14.897
> 
> 标签：ruby-on-rails, authentication, passwords

我正在开发一个 Rails 项目，您可以在其中创建相册。我希望相册的创建者输入访问此相册所需的密码。然后，当用户想要查看它时，他们必须输入密码。我不需要完整的用户管理系统，并且我希望用户不必输入带有密码的用户名（我使用 时就是这种情况`authenticate_or_request_with_http_basic`）。处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:22:12.063

1.  存储用户在会话中成功输入关键字的事实
2.  在 before_filter 中检查这个事实，重定向到一个表单让他们输入他们的密钥
3.  输入密钥后重定向回相册。

有点老式的身份验证，但没有用户名。

# nginx - 如何为 nginx 设置这个重写？

> ID：10045083
> 
> 赞同：0
> 
> 时间：2012-04-06T14:45:21.553
> 
> 标签：nginx

请帮帮我。如何为 nginx 1.0.14 设置此重写？

```
RewriteRule ^([^/]*)\.html$ /?page=$1 [QSA,L]
RewriteRule ^([^-]*)-([^-]*)/$ /index.php?page=$1&act=$2 [QSA,L]
RewriteRule ^([[:alnum:]]{8})/*$ /index.php?page=paste&id=$1 [QSA,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T21:46:29.887

结帐[http://wiki.nginx.org/HttpRewriteModule#rewrite](http://wiki.nginx.org/HttpRewriteModule#rewrite)

就像是：

```
rewrite ^([^/]*)\.html$ /?page=$1 last;
rewrite ^([^-]*)-([^-]*)/$ /index.php?page=$1&act=$2 last;
rewrite ^([[:alnum:]]{8})/*$ /index.php?page=paste&id=$1 last;
return 403; 
```

# web-services - ActiveMQ/Camel 发送文件进行进一步处理

> ID：10045084
> 
> 赞同：1
> 
> 时间：2012-04-06T14:45:23.027
> 
> 标签：web-services, activemq, apache-camel

所以我让我的 ActiveMQ 接收来自另一个位置的消息 woo hoo - 今天早上这里有快乐的舞蹈！

现在，一旦消息到达队列，我需要对消息采取后续步骤。

具体来说，根据文件名，如果可能发生这种情况，则需要将其发送到另一个队列或直接发送到另一个进程。

例如，发送一个文件，其中包含有关法庭会议更改的信息。我需要阅读该 XML 并更新一些本地 MySQL 表。开庭过程可以是网络服务吗？理想情况下，我只想将文件传递给该服务。

发送了另一个文件，其中包含有关取消授权的信息，我需要将该文件中的信息发送到外部 Oracle 数据库上的存储过程。我可以从文件名中看出该文件应该发送到的下一个过程是什么。

所以，我正在寻找关于我最好的行动方案是为发送到我们队列的文件设置额外处理的建议？

非常感谢！！！顺便说一句 - 我们已经订购了“ActiveMQ in Action”和“Camel in Action”，我将阅读这些内容，但现在，我们将不胜感激任何具体的新手指导。

莱斯利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:21:40.513

Camel[基于内容的路由器](http://camel.apache.org/content-based-router.html)正是您所寻找的。它允许您根据消息正文/标题/属性设置路由规则...

这是一个基本示例，它从入站队列中读取数据，并根据标头简单地委托给其他队列......

```
 from("activemq:queue:inboundQueue")
        .choice()
            .when(header("foo").isEqualTo("bar"))
                .to("activemq:queue:barQueue")
            .when(header("foo").isEqualTo("cheese"))
                .to("activemq:queue:cheeseQueue")
            .otherwise()
                .to("activemq:queue:generalQueue"); 
```

除了检查消息头之外，您还可以检查正文和属性（使用[简单的](http://camel.apache.org/simple.html)表达式、[xpath](http://camel.apache.org/xpath.html)等）以确定正确的路由等...

# c# - 使用联合从 RSS 提要获取图像？

> ID：10045089
> 
> 赞同：2
> 
> 时间：2012-04-06T14:45:57.267
> 
> 标签：c#, regex, image, windows-phone-7, rss

我正在构建一个 Windows Phone 应用程序并使用`SyndicationFeed`它来阅读 RSS 提要。如何从提要中获取图片？

我需要一个转换器吗（？），但我不知道里面会有什么。我看到有一个`ImageUrl`属性，我尝试使用它，但没有任何乐趣。:(

图片需要按类别与提要（这是预定义的）一起过滤。我知道如何过滤提要（慷慨的论坛成员帮助:)）只是获取图像是问题所在。

我使用 MSDN 示例作为背景： http: [//msdn.microsoft.com/en-us/library/hh487167 (v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/hh487167(v=vs.92).aspx)

我的饲料：[http ://www.zimo.co/feed/](http://www.zimo.co/feed/)

* * *

我会使用这个正则表达式从提要中获取图像：

```
Regex rg = new Regex(@"<img.*?src=""(.*?)""", RegexOptions.IgnoreCase); 
```

但问题是如何实现它。所以我同时得到了提要和图片:(

这是我使用的代码：

```
private void UpdateFeedList(string feedXML)
    {
        StringReader stringReader = new StringReader(feedXML);
        XmlReader xmlReader = XmlReader.Create(stringReader);
        SyndicationFeed feed = SyndicationFeed.Load(xmlReader);

Regex rg = new Regex(@"<img.*?src=""(.*?)""", RegexOptions.IgnoreCase);

        Deployment.Current.Dispatcher.BeginInvoke(() =>
        {

ls_text.ItemsSource = feed.Items;

        });
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T12:50:58.557

RSS 规范中没有任何内容提供代表`<item>`正在处理的单个图像。如果您想要一张图片，您可以尝试解析`<content>`元素并从元素内容中提取一张或多张图片。

要从源中获取图像链接，您需要解析文本以匹配文本中的所有`<img>`标签。您可以尝试通过几种方式来做到这一点。您可以尝试对 img 标记进行 RegEx 匹配，或者您可以尝试将文本加载到 XML 文档中并对其进行解析。问题是，它不是完整的 HTML，因此您可能需要对其进行一些修改（例如，如果内容尚未被标签包围，您*可能*`<p>`必须在内容周围放置一组封闭标签。

# android - AndEngine and Background size

> ID：10045090
> 
> 赞同：1
> 
> 时间：2012-04-06T14:45:59.707
> 
> 标签：android, mobile, andengine

I'm creating an Android application (a game, to be more precise) and using **AndEngine**.
My designer is working on the background images for the game and he need to know
what is the ideal size (width & height or a ratio?) for the background image.

Clarification: I want to target for variety of android-devices.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:47:51.637

I think the best thing to do is to pick a common screen size and then develop everything based on that size. If you use a RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), AndEngine will scale everything appropriately.

And with that in mind, I would consider what devices you want to run on and go with one of the larger choices - it's easier to scale down than up.

Personally, I develop on a 7" tablet which is 1024x600 and it works fine on my phone which is 800x480

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T14:53:28.963

You could generate by the device's width:

```
mWinMgr = (WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
int displayWidth = mWinMgr.getDefaultDisplay().getWidth(); 
```

or you can use high resolution that fits all. It's not recommended though.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T17:15:45.337

You could create the image as the largest size, and then save the image at different sizes that represent the average screen sizes for small, medium, and large devices, then use a switch statement to determine which one to load based on the screen size.

```
final Display myDisplay = getWindowManager().getDefaultDisplay();
int displayWidth = myDisplay.getWidth();
int displayHeight = myDisplay.getHeight(); 
```

This will tell you what your actual screen pixel size is. Even large images are tiny in PNG format a 1024x1024 image is less than 1.64 mb on average (depending on complexity). So if you do the average sizes you probably end up with 3-4 images at about 2mb total. Using the smallest image for the size of the screen will also speed up your app.

# iphone - 如何获取 UITextField 点击事件？

> ID：10045095
> 
> 赞同：22
> 
> 时间：2012-04-06T14:46:19.763
> 
> 标签：iphone, objective-c, ios, ipad, ios-universal-app

我试图在 iPad 和 iPhone 的 UITextField 的 Tap 或 Click 上显示 UIAlertView。我制作了一个 IBAction 并使用 UITextField 的 Tap Down 事件附加它。

但它不能正常工作，意味着并非总是如此，在 iPhone 的情况下，在 iPad 的情况下不工作

```
- (IBAction) TopuchState
{
    //function code
} 
```

请帮助我怎么能这样做。

![在此处输入图像描述](../Images/c1a364c18d53d532850df98ecc0038b0.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-06T14:53:32.510

由于您已经订阅了 UITextField 委托，请实现此方法：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Alert" message:@"Alert Message" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
    [alert show];

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-04-07T06:32:07.420

尝试在特定文本字段开始编辑时添加目标 ( `UIControlEventEditingDidBegin`)：

```
 [textField1 addTarget:delegate action:@selector(textField1Active:) forControlEvents:UIControlEventEditingDidBegin]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-06T14:51:36.347

我认为如果您设置委托`UITextField`并实现该方法会更容易：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField 
```

然后在该方法中，您可以轻松创建并显示您的`UIAlertView`.

看看[UITextFieldDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intf/UITextFieldDelegate)。

祝你好运！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-18T04:26:26.717

**在斯威夫特 3**

在 viewDidLoad 方法中为事件 .editingDidBegin 添加特定文本字段的目标

```
self.textField.addTarget(self, action: #selector(textFieldTouched(_:)), for: UIControlEvents.editingDidBegin)

func textFieldTouched(textField: UITextField) {
//Show AlertView
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-25T12:06:04.550

将 TextField 与委托连接，现在调用此函数！！

```
-(BOOL)textFieldShouldBeginEditing:(UITextField *)textField {       
   textView.text=@"   ";
   return YES;
} 
```

# java - 如何计算检查的 JCheckbox 数量？

> ID：10045100
> 
> 赞同：3
> 
> 时间：2012-04-06T14:46:44.423
> 
> 标签：java, swing, jframe, jcheckbox

我的 JFrame 中有 11 个不同的复选框，并且希望能够在每次检查一个检查总数时获得一个数字。我知道如何设置一个 ItemListener 并查看是否检查了一个，但我不确定如何检查所有这些..

编辑：

cblist 是一个包含 11 个 JCheckBox 的 ArrayList。我给每个 JCheckBox 一个项目侦听器，这是单击复选框时使用的类...

```
private class CheckClass implements ItemListener{
      public void itemStateChanged(ItemEvent event){
         for(cblist.isChecked){
             ingnum++;
         }

      }
  } 
```

在 for 循环中，我如何测试 ArrayList 的所有元素。我知道我的语法现在不正确。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T14:52:33.433

一种方法：将所有 JCheckBoxes 放在一个数组中，或者`ArrayList<JCheckBox>`在需要时简单地遍历列表以查看选中了哪些复选框。

另一种可能的解决方案：如果您有一个表格结构，请使用在其模型中保存布尔值的 JTable，然后在需要时遍历 TableModel 的行以查看哪些行保存 Boolean.TRUE 值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:55:48.590

我的建议（也许不是最好的）是将所有选中的 CheckBox 保留在列表中。

因此，所有 JCheckBoxex 的侦听器将是这样的：

```
void stateChanged(ChangeEvent e){
    if( CheckBox is checked){
       // add the checkbox in the list.
    } else {
        // remove CheckBox in the list.
     }
} 
```

要知道检查了多少个复选框，只需计算列表的大小。

问候。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T15:13:21.940

您可以保留一个全局计数器`countChecked`并制作框架`implements ItemListener`

对于`JCheckBox`框架中的所有内容`chkBox.addItemListener(this)`并处理事件

```
public class MyFrame extends JFrame implements ItemListener{

private int countChecked = 0;
private JPanel contentPane;
    public MyFrame() {
    contentPane = new JPanel();
    setContentPane(contentPane);
    JCheckBox chckbx = new JCheckBox("New check box");
    contentPane.add(chckbx, BorderLayout.CENTER);
    chckbx.addItemListener(this);
}

@Override
public void itemStateChanged(ItemEvent ie) {
    if(ie.getSource().getClass() == JCheckBox.class)
    {
        if(ie.getStateChange() == ie.SELECTED)
            countChecked++;
        else if(ie.getStateChange() == ie.DESELECTED)
            countChecked--;
    }

} 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T15:23:58.960

为所有复选框添加“ActionPerformed”事件侦听器并在事件处理程序方法中调用此方法以获取选中复选框的数量：

```
int countCheckedCheckBoxes(){
    Component[] cs = getRootPane().getComponents();
    int checkNums = 0;
    for(Component c : cs){
        if(c instanceof JCheckBox){
            if(((JCheckBox)c).isSelected()){
                checkNums++;
            }
        }
    }
    return checkNums;
} 
```

getRootPane 应该返回您的主面板，哪些组件位于其上。

# ruby-on-rails - 记忆 AR 对象以避免选择

> ID：10045101
> 
> 赞同：0
> 
> 时间：2012-04-06T14:46:53.347
> 
> 标签：ruby-on-rails, caching

我正在开发一个项目，该项目将使用选择（即 find_by_name('bob') 或其他）查​​询数据库大约一百万次，而不是为所有这些选择点击数据库，如果我的数据集很小，我一直在考虑将结果缓存在 ruby​​ var 中，并仅使用 Array.find 来定位我的对象。这样可以避免撞到数据库，但我不需要。就像存储约 15k Ruby 对象的想法一样。还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:58:07.490

我发现了一篇有趣的博客文章，它告诉您如何使用 memcached 和 cache_fu 缓存查询结果：[编码块：在 Rails 3 中缓存 Active Record 模型](http://codingblock.blogspot.com/2011/07/caching-active-record-models-in-rails-3.html)。

我的建议是使用 memcached（如文章中所述）或 Redis 之类的东西来存储您的对象，然后根据需要从缓存中检索它们。

# android - MonoDroid 将位置纬度经度双精度转换为坐标

> ID：10045105
> 
> 赞同：0
> 
> 时间：2012-04-06T14:47:03.177
> 
> 标签：android, xamarin.android

使用位置管理器获取包含纬度和经度的位置对象时，值以双精度形式返回，格式为 1.5......E-314。如何将其转换为 35.55378、-85.8790 等坐标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:51:23.973

```
GeoPoint point2= new GeoPoint((int)(21.75 * 1E6),(int)(70.61 * 1E6)); 
```

这将帮助您转换

# sql - 在和之间使用

> ID：10045108
> 
> 赞同：0
> 
> 时间：2012-04-06T14:47:15.437
> 
> 标签：sql, sql-server-2008

```
SELECT TOP 5 Notices.Id, NoticeL.Notices_Id, Loc.Id as Location_Id,
CAST(Notices.Text AS TEXT) as Text, CAST(Notices.Title AS TEXT) as Title,
Notices.CDate as RegDate 

FROM NoticeL JOIN Notices ON NoticeL.Notices_Id=Notices.Id
JOIN Loc ON NoticeL.Loc_Id=Loc.Id
WHERE Loc_Id IN (1) BETWEEN '06/04/2012' AND '23/04/2012' 
```

我正在尝试在以下 IN 之间使用，但我没有运气。我收到以下语法错误：

```
 Msg 156, Level 15, State 1, Line 1
   Incorrect syntax near the keyword 'BETWEEN'. 
```

我猜 MsSql 不喜欢这种语法。我怎样才能做到这一点？

第二个问题，我想在过去两周内过滤掉通知。无论如何我可以在mssql中动态地做到这一点。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:53:40.350

```
 SELECT TOP 5 Notices.Id,
              NoticeL.Notices_Id, 
              Loc.Id as Location_Id,
              CAST(Notices.Text AS TEXT) as Text,
              CAST(Notices.Title AS TEXT) as Title,
              Notices.CDate as RegDate
 FROM NoticeL 
 JOIN Notices ON NoticeL.Notices_Id=Notices.Id JOIN Loc ON NoticeL.Loc_Id=Loc.Id
 WHERE Loc_Id IN (1) 
 AND Notices.CDate BETWEEN '06/04/2012' AND '23/04/2012' 
```

您不能在同一字段上组合 IN 和 BETWEEN。我猜在 Notices.CDate 上需要使用 Between，因为这似乎是唯一的日期字段。

如果您想抓住最后两周的价值，那么最后一行将更改为

```
 AND Notices.CDate BETWEEN GETDATE() - 14 AND GETDATE() 
```

如果时间在您的查询中很重要，那么您可能想要做一些事情来消除 GETDATE() 的时间。这个问题似乎有一些很好的答案。

[如何仅从 SQL Server 日期时间数据类型返回日期部分](https://stackoverflow.com/questions/113045/how-to-return-the-date-part-only-from-a-sql-server-datetime-datatype)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T14:54:11.910

```
NoticeL.Loc_Id=Loc.Id WHERE Loc_Id = 1 -- IN (1) should work too
                                      -- if you're building the query 
                                      -- dynamically as a string and want 
                                      -- to use IN with a list of IDs 
AND Notices.CDate BETWEEN '06/04/2012' AND '23/04/2012 
```

在过去两周（即过去 14 个日历日），您可以

```
AND Notices.CDate BETWEEN DATEADD(d,-14,GETDATE()) AND GETDATE() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T14:57:54.920

我认为你错过了 AND，试试这个

```
FROM NoticeL JOIN Notices ON NoticeL.Notices_Id=Notices.Id
JOIN Loc ON NoticeL.Loc_Id=Loc.Id
WHERE Loc_Id IN (1) AND BETWEEN '06/04/2012' AND '23/04/2012' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T14:55:37.660

试试这个

```
 SELECT TOP 5 Notices.Id, NoticeL.Notices_Id, Loc.Id as Location_Id,
CAST(Notices.Text AS TEXT) as Text, CAST(Notices.Title AS TEXT) as Title,
Notices.CDate as RegDate 

FROM NoticeL JOIN Notices ON NoticeL.Notices_Id=Notices.Id
JOIN Loc ON NoticeL.Loc_Id=Loc.Id
WHERE Loc_Id IN (1) HAVING RegDate BETWEEN '06/04/2012' AND '23/04/2012' 
```

# macos - X11 在 R 中绘图时挂起

> ID：10045109
> 
> 赞同：1
> 
> 时间：2012-04-06T14:47:19.610
> 
> 标签：macos, r, x11

在 R 中绘制到窗口时，X11 一直挂起。这些步骤重现错误。

```
plot(c(1,2,3),c(4,5,6)) 
```

X11 窗口变为活动状态。按 [Apple]+[Tab] 返回终端窗口。

```
dev.new() 
```

第二个 X11 窗口变为活动状态。按 [Apple]+[Tab] 返回终端窗口。

确保您在终端中并且没有按住任何键，再次按 [Apple]+[Tab] 以尝试转到 X11。X11 不再响应！

设置细节：我在 OSX 10.7.3 上，通过 Macports 安装了 R 和 xorg-*。/Applications 中的 R.app 似乎没有这个问题。如果他们有帮助，我可以提供更多细节。

这是来自活动监视器/检查：

![在此处输入图像描述](../Images/c43fd24c3eacc1a4f11fb15185a8a6d4.png)

该过程的采样位于[http://pastebin.com/3rXM2BBn](http://pastebin.com/3rXM2BBn)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T18:27:06.377

显然，这是 Apple X11 中的一个错误，已在 xorg-server 中修复。来自交叉帖子： [https ://trac.macports.org/ticket/33914](https://trac.macports.org/ticket/33914)

# algorithm - 如何在 Snake Game 中围绕 Apple 以封闭的矩形方式移动

> ID：10045114
> 
> 赞同：2
> 
> 时间：2012-04-06T14:47:52.970
> 
> 标签：algorithm, path, grid, path-finding

我正在开发一个在 60*60 的场地上玩的蛇游戏（Linux 中的 Nibbles），四条蛇争夺一个随机放置的苹果。

我已经用 A*（A 星）算法实现了我的蛇的运动。

**我的问题是这样的：**

当我的分数超过其他蛇时，我想避免其他蛇吃苹果。所以，当我是离苹果最近的蛇时，我想以封闭的矩形方式移动。

你可以在这张图片中看到我的意思：

![在此处输入图像描述](../Images/3e9b9ed6cdf95ac2d51656b47d876f31.png)

（我是绿色的，红点是我的头。）

我的程序中有一种方法可以使用 A* 算法来执行此操作：`setGoal(x,y);`.

我的问题是，当我找到一个闭合（或近似闭合）的矩形时，我需要跟随我的尾巴直到游戏结束。所以请帮助我使这个矩形路径工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:42:08.037

有没有一种方法可以轻松跟随尾巴的位置？如果可以的话，您可以将头部的目标设置为与尾巴的位置相同。如果你不能轻易地标记你尾巴的位置，那么它会更复杂。

如果你知道蛇有多长（我假设你知道，因为蛇可以遵循`snakeLength`大小正好的矩形路径）并且它是矩形的，那么你应该能够进入一个继续循环直到 endOfGame == true 的状态， 例如。

```
divSnakeLength = snakeLength / 4; (giving you the length of each side of the rectangle)
distanceToApple = divSnakeLength / 2;
applePosition = this.getApplePosition();
Position[] rectangleEdges = new int[2][2];

rectangleEdges[0] = {applePosition.x - distanceToApple, 
                        applePosition.y + distanceToApple};

rectangleEdges[1] = {applePosition.x + distanceToApple,
                        applePosition.y + distanceToApple};

rectangleEdges[2] = {applePosition.x + distanceToApple,
                        applePosition.y - distanceToApple};

rectangleEdges[3] = {applePosition.x - distanceToApple,
                        applePosition.y - distanceToApple};

//now we have the four corners of the rectangle

while(!endOfGame){
    foundGoal = false;
    setGoal(rectangleEdges[0]);
        while(!foundGoal(rectangleEdges[0]));
    setGoal(rectangleEdges[1]);
        while(!foundGoal(rectangleEdges[1]));
    setGoal(rectangleEdges[2]);
        while(!foundGoal(rectangleEdges[2]));
    setGoal(rectangleEdges[3]);
        while(!foundGoal(rectangleEdges[3]));
    } 
```

我希望这会在你的路上轻推你。

# satchmo - 在satchmo中，如何在特色产品、产品首页和分类页面中显 示价格

> ID：10045117
> 
> 赞同：0
> 
> 时间：2012-04-06T14:48:02.993
> 
> 标签：satchmo

我用了

```
{% if sale %}
    <strike id="fullprice" style="display: block;">
        {{ product|discount_price:""|currency }}
    </strike>
{% endif %}
<span id="price">{{ product|discount_price:sale|currency }}</span> 
```

这在没有**销售**的情况下有效，即 discount_price: **sale** |currency 并引发异常

> 渲染时捕获 VariableDoesNotExist：在...中查找键 [sale] 失败

显示销售价格和非销售价格很重要。我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:21:56.317

如果您使用按产品分配的单独销售，您应该使用

```
{{ product|sale_price|currency }} 
```

或者您可以替换`sale_price`为`taxed_sale_price`或者`untaxed_sale_price`如果您想在发票上明确设置一个。

如果您的意思是整个站点的折扣，例如为登录用户创建特殊折扣，您应该使用 `discount_price:storewide_sale`，因为上下文处理器创建的这个“sale”变量已在多个用户的请求下重命名为 storewide_sale。

# iphone - 自定义 UITableViewCell 高度

> ID：10045119
> 
> 赞同：3
> 
> 时间：2012-04-06T14:48:10.327
> 
> 标签：iphone, objective-c, uitableview

我在 Interface Builder 的 UITableView 中组成了几个不同的自定义单元格，包括每个单元格都有一个自定义高度，大于默认的 44 像素高。

然后我像这样加载它们：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    static NSString *CellIdentifier;

    for (int cell = 0; cell <= [tableCellsArray count]; cell++) 
    {
        if ([indexPath row] == cell) 
        {
            CellIdentifier = [tableCellsArray objectAtIndex:cell];
        }
    }

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...

    return cell;
} 
```

它们每个都有一个自定义类，在上面的代码中，我遍历一个数组，该数组基本上保存了相关的单元格标识符。然而，在运行应用程序时，所有单元格都返回默认的 44 像素高度。

如果不使用委托方法返回我自己的单元格高度，我是否没有遗漏可能导致这种情况的东西？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T15:02:32.160

您可以在 tableView 的定义中更改所有单元格的高度，但要单独设置它们，您必须使用委托方法。您可以在 IB 中设置它令人困惑，但它仅用于显示目的，而不是在运行时使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T14:56:03.470

您将必须实现以下选择器并应用正确的逻辑，以便根据您的自定义单元格类型设置正确的高度。没有它，将使用默认高度 44

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    return YOUR_WANTED_CELL_HEIGHT;
} 
```

不要以为你错过了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T07:03:32.627

在**iOS 8**及更高版本中，我们可以使用**Dynamic Table View Cell Height**。

使用这个特性**UITableviewCell**从它的内容中获取它的高度，我们不需要写**heightForRowAtIndexPath**

我在**viewDidLoad()中要做的所有事情**

```
tableView.estimatedRowHeight = 44.0;
tableView.rowHeight = UITableViewAutomaticDimension; 
```

单元格中的设置约束：

[![在此处输入图像描述](../Images/7e72fb7179a578729f9be090c2d3b9e8.png)](https://i.stack.imgur.com/SksC0.png)

结果：

[![在此处输入图像描述](../Images/19f071df7dad20e02a2d054f3aea7b27.png)](https://i.stack.imgur.com/G0HnS.png)

在这里我们可以看到：当文本增加时，**单元格**大小也会自动增加，而无需编写**heightForRowAtIndexPath**

# javascript - 根据搜索/替换对替换字符串中的许多值

> ID：10045122
> 
> 赞同：3
> 
> 时间：2012-04-06T14:48:24.943
> 
> 标签：javascript

如何在 javascript 中通过替换将值替换为数组。

我想一起替换数字（例如）。如何？

`1`-替换白衣-> `11`
`2`-替换白衣->`22`

**演示：http:** [//jsfiddle.net/ygxfy/](http://jsfiddle.net/ygxfy/)

```
<script type="text/javascript">
    var array = {"1":"11", "2":"22"}
    var str="13332";
    document.write(str.replace(array));
</script>​ 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:52:13.837

您必须使用 RegEx 创建一个模式，然后将其传递给该`.replace`方法。

```
var array = {"1":"11", "2":"22"}; // <-- Not an array btw.
// Output. Example: "1133322"
document.write( special_replace("13332", array) );

function special_replace(string_input, obj_replace_dictionary) {
    // Construct a RegEx from the dictionary
    var pattern = [];
    for (var name in obj_replace_dictionary) {
        if (obj_replace_dictionary.hasOwnProperty(name)) {
            // Escape characters
            pattern.push(name.replace(/([[^$.|?*+(){}\\])/g, '\\$1'));
        }
    }

    // Concatenate keys, and create a Regular expression:
    pattern = new RegExp( pattern.join('|'), 'g' );

    // Call String.replace with a regex, and function argument.
    return string_input.replace(pattern, function(match) {
        return obj_replace_dictionary[match];
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T15:00:30.267

[http://jsfiddle.net/mendesjuan/uHUs9/](http://jsfiddle.net/mendesjuan/uHUs9/)

您可以将函数传递给[replace](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace)方法

```
RegExp.escape = function(text) {
    return text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
}

String.prototype.mapReplace = function (replacements) {
    var regex = [];

    for (var prop in replacements) {
        regex.push(RegExp.escape(prop));
    }

    regex = new RegExp( regex.join('|'), "g" );

    return this.replace(regex, function(match){
      return map[match];
    });
}

var map = {"1":"11", "2":"22"};    
var str="13332";

document.write(str.mapReplace(map));​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:05:32.303

```
var str = "13332",
    map = {"1":"11", "2":"22"};

str.split("").map( function(num ){
    return map.hasOwnProperty(num) ? map[num] : num;
}).join("");

//"1133322" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T14:51:08.893

```
<script type="text/javascript">
    var rep = {"1":"11", "2":"22"}
    var str="13332";

    for (key in rep) {
        str = str.split(key).join(rep[key]);
    }

    document.write(str);
</script>​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-14T21:08:27.670

使用`reduce`函数呢？

```
<script type="text/javascript">
  var array = {"1":"11", "2":"22"};
  var str = "13332";

  str = Object.keys(array).reduce(function(result, key) {
    return result.replace(new RegExp(key, 'g'), array[key]);
  }, str);

  document.write(str);
</script> 
```

# ios - Windows 上的 Mac iOS 开发 - Flash / Flex

> ID：10045124
> 
> 赞同：1
> 
> 时间：2012-04-06T14:48:44.000
> 
> 标签：ios, windows, xcode, flash, apache-flex

> **可能的重复：**
> [Windows 上的 iPhone 开发](https://stackoverflow.com/questions/113547/iphone-development-on-windows)

我们即将开始使用 iOS 的第一个医疗技术应用体验。一年前我们玩弄了这个想法，但现在它已成为现实。我们面临的问题是团队中的一些人没有 Mac/Apple 产品，因此我想知道以下问题：

1.  你可以在 Ipad 上使用 Xcode 吗？如果是这样，那么我们的两个程序员就可以了。

2.  是否有适用于 Windows 的 iOS 开发解决方案？

3.  如果我们想为团队中的其他两名程序员尝试使用 Flash/Flex 为基于 Windows 的解决方案...

    1.  是objective-c 和a-script 兼容，还是坚持使用objective-c；
    2.  Adobe 会继续支持 iOS 开发吗？

感谢您的帮助，我为这个问题的天真道歉。

-蒂姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:53:45.273

简而言之：

1.  很不幸的是，不行。只有麦克。

2.  是的，您可以在普通 PC 上安装 Mac OS，但这违反了 Apple 的 EULA。它被称为hackintosh。

3.  对不起。我没有足够的信息来回答这个问题。

A）你能澄清一下你的真正意思吗？

B) 只有 Adob​​e 自己可以确认。但我从来没有听说他们要取消它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T15:01:32.957

你有很多问题，我无法回答所有问题，但我会尽力解决我能解决的问题：

> 你可以在 Ipad 上使用 Xcode 吗？

正如@theNavigator 所说；Xcode 工具仅适用于 Mac。

> ```
> Is there and iOS development solution yet for windows? 
> ```

通常，除了将完成的应用程序 (ipa) 上传到 Apple App Store 之外，您可以在 Windows 上执行所有步骤。我不相信您可以在 Windows 上使用 Apple 开发工具，因此您必须使用替代的跨平台工具，例如 Adob​​e AIR（如果您已经了解 ActionScript/Flex）或 Sencha Touch。

提交到商店的最后一步必须在 OSX 上完成。您可以使用虚拟化在 Windows 中运行[OSX](http://www.hackintosh.com/)；但这是一个棘手的法律问题。我不确定我是否会为企业推荐这种方法。

> A）objective-c 和 a-script 是否兼容，或者你会坚持使用objective-c；

我想说，没有 Objective-C 和 ActionSCript3 是不兼容的。它们是用于不同目的的不同语言。但是，您没有理由不能在 ActionScript 3（有或没有 Flex）中编写并使用 Adob​​e AIR SDK 将其交叉编译为原生 iOS 应用程序。

> ```
> B) Is Adobe going to keep supporting iOS development, or is all of that dead now that they are canceling Flash? 
> ```

Adobe 并没有放弃 Flash。请阅读 Adob​​e 的[Flash 运行时路线图以了解更多详细信息](http://www.adobe.com/devnet/flashplatform/whitepapers/roadmap.html)。他们正在放弃 Flash Player 的移动浏览器插件。但是，他们将继续投资 Adob​​e AIR 以进行移动部署。

Adobe Creative Cloud 中的大多数触控工具都是使用 ActionScript 和 Adob​​e AIR 构建的。这包括 Photoshop Touch。我认为这是对平台的承诺。

# qt - 无法初始化 shared_ptr

> ID：10045126
> 
> 赞同：-1
> 
> 时间：2012-04-06T14:48:49.857
> 
> 标签：qt, shared-ptr

我已经`shared_ptr <QMap < T , X > * > shared_`并且正在尝试像这样初始化它：

```
shared_t = new QMap < T , X >(); 
```

但我收到错误：

```
 c:\mingw\bin\..\lib\gcc\mingw32\4.6.2\include\c++\bits\shared_ptr_base.h:762: error: cannot  
 convert 'QMap<boost::filesystem3::path, Qt::CheckState>*' to 'QMap<boost::filesystem3::path,    
   Qt::CheckState>**' in initialization 
```

我应该如何初始化这个ptr？请注意，我确实需要将映射指针作为存储在 shared_ptr 中的类型

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:54:21.183

模板参数中的类型必须是值类型本身，而不是指向它的指针：

```
shared_ptr <QMap<T, X> > shared_t; 
```

# android - 在 Android 上使用 Appcelerator 进行音频录制

> ID：10045128
> 
> 赞同：0
> 
> 时间：2012-04-06T14:48:51.933
> 
> 标签：android, appcelerator, audio-recording, titanium-mobile, appcelerator-mobile

我想录制音频，然后将文件发送到网络服务器。我在 Win7 上使用 Titanium 1.8.2。我正在使用的应用程序同时适用于 Android 和 iphone，我确实意识到 Titanium.Media.AudioRecorder 和 Titanium.Media.AudioPlayer 是用于这些目的。让我们暂时专注于android。

在该平台上，您可以通过创建意图来实现录音，然后在应用程序中处理文件。[在这里](http://developer.appcelerator.com/blog/2011/02/launching-activities-and-using-content-uris-in-android.html)查看更多。这种实现有几个缺点：

1.  您不能留在您的应用程序中（因为将启动本机录音机）
2.  您只能从记录器中获取 uri，而不是实际文件。

另一种实现是由[Codeboxed](http://www.codeboxed.com/2011/08/titanium-module-for-android-audio-recording/)完成的。该模块用于在不使用意图的情况下录制音频。唯一的问题是我无法（与其他人一起）和密码箱团队自去年以来没有回应任何人。

所以我的问题是：你知道如何在不使用意图的情况下在 android 上录制音频吗？提前致谢。

编辑：

我对 codeboxed 模块的问题：我从这里下载了模块。我将 zip 文件复制到我的项目目录中。我编辑了我的清单文件：

`<modules> <module platform="android" version="0.1">com.codeboxed.audiorecorder</module> </modules>`

当我尝试编译时，我收到以下错误： `[DEBUG] appending module: com.mwaysolutions.barcode.TitaniumBarcodeModule [DEBUG] module_id = com.codeboxed.audiorecorder [ERROR] The 'apiversion' for 'com.codeboxed.audiorecorder' in the module manifest is not a valid value. Please use a version of the module that has an 'apiversion' value of 2 or greater set in it's manifest file [DEBUG] touching tiapp.xml to force rebuild next time: E:\TitaniumProjects\MyProject\tiapp.xml` 我可以通过将模块的清单文件编辑为此来识别模块：`版本：0.1

描述：我的模块

作者：你的名字

许可证：指定您的许可证

版权所有：贵公司版权所有 (c) 2011

版本：2

名称：录音机

moduleid: com.codeboxed.audiorecorder

指导：747dce68-7d2d-426a-a527-7c67f4e9dfad

平台：安卓

minsdk：1.7.0`

但是我再次在编译时收到错误： [DEBUG] "C:\Program Files\Java\jdk1.6.0_21\bin\javac.exe" -encoding utf8 -classpath "C:\Program Files (x86)\Android\android -sdk\platforms\android-8\android.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\modules\titanium-media.jar;C:\Users\Gabor \AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\modules\titanium-platform.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\titanium。 jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\thirdparty.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\ android\jaxen-1.1.1.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\modules\titanium-locale.jar;C:\Users\Gabor\AppData\ Roaming\Titanium\mobilesdk\win32\1.8.2\android\modules\titanium-app。jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\modules\titanium-gesture.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\ 1.8.2\android\modules\titanium-analytics.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\kroll-common.jar;C:\Users\Gabor\ AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\modules\titanium-network.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\ti-commons -codec-1.3.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\modules\titanium-ui.jar;C:\Users\Gabor\AppData\Roaming\Titanium \mobilesdk\win32\1.8.2\android\modules\titanium-database.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\kroll-v8.jar;C: \Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\modules\titanium-xml.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\android-support-v4.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\ android\modules\titanium-filesystem.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\modules\titanium-android.jar;E:\TitaniumProjects\MyProject\modules\ android\com.mwaysolutions.barcode\0.3\barcode.jar;E:\TitaniumProjects\MyProject\modules\android\com.mwaysolutions.barcode\0.3\lib\zxing.jar;E:\TitaniumProjects\MyProject\modules\android\ com.codeboxed.audiorecorder\0.1\audiorecorder.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\kroll-apt.jar;C:\Users\Gabor\AppData\ Roaming\Titanium\mobilesdk\win32\1.8.2\android\lib\titanium-verify.jar;C:\Users\Gabor\AppData\Roaming\Titanium\mobilesdk\win32\1.8.2\android\lib\titanium-debug .jar" -d E:\TitaniumProjects\MyProject\build\android\bin\classes -proc:none -sourcepath E:\TitaniumProjects\MyProject\build\android\src -sourcepath E:\TitaniumProjects\MyProject\build\android\gen @c:\users\ gabor\appdata\local\temp\tmpbqmjuy [错误] 编译生成的 Java 代码时出错 [错误] E:\TitaniumProjects\MyProject\build\android\gen\com\petosoft\myproject\MyProjectApplication.java:44: 找不到象征

符号：类 AudiorecorderBootstrap

位置： com.codeboxed.audiorecorder 包

```
 runtime.addExternalModule("com.codeboxed.audiorecorder", com.codeboxed.audiorecorder.AudiorecorderBootstrap.class);

                                                                                        ^ 
```

1 个错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:36:02.290

[可以在http://vocalrank.com/audiorecorder](http://vocalrank.com/audiorecorder/)找到与 Titanium SDK 2.1+ 配合使用的更新的录音机模块：

# r - 扩展数据框以在 ggplot2 中绘制热图

> ID：10045130
> 
> 赞同：2
> 
> 时间：2012-04-06T14:48:59.120
> 
> 标签：r, ggplot2

我想从全部比较中生成热图。我有数据，已经缩放到 0-1。但是，我的值仅用于以一种方式进行比较，而不是用于同一组之间的比较（始终为 1），即我有一半的矩阵而缺少另一半和对角线。将其转换为 ggplot2 可用于热图的形式的好方法是什么？

这是我拥有的数据的一个示例：

```
A    B    value   
T1    T2    0.347
T1    T3    0.669
T2    T3    0.214 
```

我假设以下是我需要的 ggplot （或者我可能不需要，如果 ggplot 可以以某种方式生成它？）：

```
A    B    value   
T1    T2    0.347
T1    T3    0.669
T2    T3    0.214
T2    T1    0.347
T3    T1    0.669
T3    T2    0.214
T1    T1    1
T2    T2    1
T3    T3    1 
```

然后我会跑

```
sorted<-data[order(data$A, data$B), ]

ggplot(sorted, aes(A, B)) +
  geom_tile(aes(fill = value), colour = "white") +
  scale_fill_gradient(low = "black", high = "red") + 
```

我已经解决了这个问题，但是（我假设是）一种涉及 for 循环的非常糟糕的方式。必须有更好的方法来从上面的第一个数据帧到第二个！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T17:23:48.063

嗯......我可以想象一个优雅的内置存在，但这应该对你有用：

```
# Factors are not your friend here
options(stringsAsFactors = FALSE)

# Here's the data you're starting with
this.half <- data.frame(A = c("T1", "T1", "T2"),
                        B = c("T2", "T3", "T3"),
                        value = c(0.347, 0.669, 0.214))

# Make a new data.frame, simply reversing A and B
that.half <- data.frame(A = this.half$B,
                        B = this.half$A,
                        value = this.half$value)

# Here's the diagonal
diagonal <- data.frame(A = unique(c(this.half$A, this.half$B)),
                       B = unique(c(this.half$A, this.half$B)),
                       value = 1)

# Mash 'em all together
full <- rbind(this.half, that.half, diagonal) 
```

# r - 最大似然估计器的准确性

> ID：10045131
> 
> 赞同：4
> 
> 时间：2012-04-06T14:49:03.683
> 
> 标签：r, mathematical-optimization

这是一个比较泊松分布的 lambda 参数的 ML 估计量的测试。

```
with(data.frame(x=rpois(2000, 1.5), i=LETTERS[1:20]),
     cbind(cf=tapply(x, i, mean),
           iter=optim(rep(1, length(levels(i))), function(par) 
             -sum(x * log(par[i]) - par[i]), method='BFGS')$par)) 
```

第一列显示了从封闭形式解获得的 ML 估计量（供参考），而第二列显示了通过使用 BFGS 方法最大化对数似然函数获得的 ML 估计量。结果：

```
 cf     iter
A 1.38 1.380054
B 1.61 1.609101
C 1.49 1.490903
D 1.47 1.468520
E 1.57 1.569831
F 1.63 1.630244
G 1.33 1.330469
H 1.63 1.630244
I 1.27 1.270003
J 1.64 1.641064
K 1.58 1.579308
L 1.54 1.540839
M 1.49 1.490903
N 1.50 1.501168
O 1.69 1.689926
P 1.52 1.520876
Q 1.48 1.479891
R 1.64 1.641064
S 1.46 1.459310
T 1.57 1.569831 
```

可以看出，使用迭代优化方法得到的估计量与正确值有很大的偏差。这是可以预料的，还是有另一种（多维）优化技术可以产生更好的近似值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T15:34:11.243

大通提供的答案：

> `reltol`传递给的参数`control()`可让您调整收敛的阈值。如有必要，您可以尝试使用它。

**编辑：**

这是现在包含选项的代码的修改版本`reltol=.Machine$double.eps`，它将提供最大可能的准确性：

```
with(data.frame(x=rpois(2000, 1.5), i=LETTERS[1:20]),
     cbind(cf=tapply(x, i, mean),
           iter=optim(rep(1, length(levels(i))), function(par) 
             -sum(x * log(par[i]) - par[i]), method='BFGS',
             control=list(reltol=.Machine$double.eps))$par)) 
```

结果是：

```
 cf iter
A 1.65 1.65
B 1.54 1.54
C 1.80 1.80
D 1.44 1.44
E 1.53 1.53
F 1.43 1.43
G 1.52 1.52
H 1.57 1.57
I 1.61 1.61
J 1.34 1.34
K 1.62 1.62
L 1.23 1.23
M 1.47 1.47
N 1.18 1.18
O 1.38 1.38
P 1.44 1.44
Q 1.66 1.66
R 1.46 1.46
S 1.78 1.78
T 1.52 1.52 
```

`cf`因此，优化算法产生的误差（即和之间的差异`iter`）现在减少到零。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T16:15:44.700

除了设置 reltol 参数之外，还要考虑到您确实对一个参数进行了一系列优化，该`optimize`函数比`optim`单参数情况下工作得更好，这可能更适合您的实际问题（如果它真的是一维的）。

# php - Magento 修改可配置的颜色下拉菜单

> ID：10045132
> 
> 赞同：0
> 
> 时间：2012-04-06T14:49:04.367
> 
> 标签：php, javascript, magento, magento-1.4

我有一个可配置的产品，它与一些产品相关联，具有属性颜色和尺寸。我需要修改颜色下拉列表，添加相关简单产品的名称，如下所示：

```
<select class="required-entry super-attribute-select" id="attribute124" name="super_attribute[124]">
  <option value="">Scegli una Opzione...</option>
<option value="1358">PEARL - NAME OF SIMPLE PRODUCT</option>
<option value="691">U9BMNERO(FLAT BLACK) - NAME OF SIMPLE PRODUCT </option>
</select> 
```

我怎样才能做到这一点？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T20:19:44.930

不幸的是，我无法完全帮助您，但希望我可以为您指明正确的方向，或者其他人可以提供更好/更完整的输入。

我之前更改了标签下拉列表一次以添加数量。

`[magento root]/app/code/[local]/Mage/Catalog/Block/Product/View/Type/Configurable.php`（把你的定义放在这个文件中）

`[magento root]/js/varien/product.js`（选择下拉标签的填充位置 | 将此文件复制到新目录，例如 - /js/ **[yourcompany]** /product.js）

`[magento root]/app/design/frontend/[package]/[template]/layout/catalog.xml`（指向**product.js**文件）

这些是我在处理数量时更改的文件和位置......希望它有所帮助。

# android - Android：具有自定义布局和日/夜主题的按钮

> ID：10045138
> 
> 赞同：0
> 
> 时间：2012-04-06T14:49:39.547
> 
> 标签：android

我正在尝试创建一个具有自定义布局和 2 个主题（白天和黑夜）的 Button。

按钮布局具有背景图像（可绘制）和文本（字符串）。

主题必须在可绘制（我有两个 PNG）和文本颜色方面有所不同。

我的方法如下：

1.  在按钮布局中将背景可绘制对象设置为选择器：

2.  这是drawable/btn_basket_calls.xml

    ```
    <item
        android:drawable="@drawable/btn_basket_calls_pressed"
        android:state_focused="true"
        android:state_pressed="true"
        />

    <item
        android:drawable="@drawable/btn_basket_calls_pressed"
        android:state_focused="false"
        android:state_pressed="true"
        />

    <item
        android:drawable="@drawable/btn_basket_calls_selected"
        android:state_focused="true"
        />

    <item
        android:drawable="@drawable/btn_basket_calls_disabled"
        android:state_enabled="false"
        />

    <item
        android:drawable="?attr/btn_basket_calls_default"
        android:state_focused="false"
        android:state_pressed="false"
        /> 
    ```

3.  “默认”drawable 是对 attrs.xml 中定义的属性“btn_basket_calls_default”的引用，如下所示：

4.  AppTheme 在 styles.xml 中有两个子主题：

    @drawable/btn_basket_calls_d_default

    @drawable/btn_basket_calls_n_default

AFAIK 它应该可以工作 :) 但是该项目可以正常运行，但会出现运行时异常：

```
E/AndroidRuntime( 1154): FATAL EXCEPTION: main
E/AndroidRuntime( 1154): java.lang.RuntimeException: Unable to start activity ComponentInfo{a.daynighttest/a.daynighttest.DayNightTestActivity}: android.view.InflateException: Binary XML file line #9: Error inflating class <unknown>
E/AndroidRuntime( 1154):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
E/AndroidRuntime( 1154):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
E/AndroidRuntime( 1154):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
E/AndroidRuntime( 1154):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
E/AndroidRuntime( 1154):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 1154):    at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime( 1154):    at android.app.ActivityThread.main(ActivityThread.java:3683)
E/AndroidRuntime( 1154):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1154):    at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime( 1154):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime( 1154):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime( 1154):    at dalvik.system.NativeStart.main(Native Method)
E/AndroidRuntime( 1154): Caused by: android.view.InflateException: Binary XML file line #9: Error inflating class <unknown>
E/AndroidRuntime( 1154):    at android.view.LayoutInflater.createView(LayoutInflater.java:518)
E/AndroidRuntime( 1154):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
E/AndroidRuntime( 1154):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
E/AndroidRuntime( 1154):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
E/AndroidRuntime( 1154):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
E/AndroidRuntime( 1154):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
E/AndroidRuntime( 1154):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
E/AndroidRuntime( 1154):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:207)
E/AndroidRuntime( 1154):    at android.app.Activity.setContentView(Activity.java:1657)
E/AndroidRuntime( 1154):    at a.daynighttest.DayNightTestActivity.onCreate(DayNightTestActivity.java:13)
E/AndroidRuntime( 1154):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
E/AndroidRuntime( 1154):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1611)
E/AndroidRuntime( 1154):    ... 11 more
E/AndroidRuntime( 1154): Caused by: java.lang.reflect.InvocationTargetException
E/AndroidRuntime( 1154):    at java.lang.reflect.Constructor.constructNative(Native Method)
E/AndroidRuntime( 1154):    at java.lang.reflect.Constructor.newInstance(Constructor.java:415)
E/AndroidRuntime( 1154):    at android.view.LayoutInflater.createView(LayoutInflater.java:505)
E/AndroidRuntime( 1154):    ... 22 more
E/AndroidRuntime( 1154): Caused by: android.content.res.Resources$NotFoundException: File res/drawable/btn_basket_calls.xml from drawable resource ID #0x7f020000
E/AndroidRuntime( 1154):    at android.content.res.Resources.loadDrawable(Resources.java:1697)
E/AndroidRuntime( 1154):    at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
E/AndroidRuntime( 1154):    at android.view.View.<init>(View.java:1951)
E/AndroidRuntime( 1154):    at android.view.View.<init>(View.java:1899)
E/AndroidRuntime( 1154):    at android.view.ViewGroup.<init>(ViewGroup.java:286)
E/AndroidRuntime( 1154):    at android.widget.LinearLayout.<init>(LinearLayout.java:120)
E/AndroidRuntime( 1154):    ... 25 more
E/AndroidRuntime( 1154): Caused by: org.xmlpull.v1.XmlPullParserException: Binary XML file line #31: <item> tag requires a 'drawable' attribute or child tag defining a drawable
E/AndroidRuntime( 1154):    at android.graphics.drawable.StateListDrawable.inflate(StateListDrawable.java:167)
E/AndroidRuntime( 1154):    at android.graphics.drawable.Drawable.createFromXmlInner(Drawable.java:787)
E/AndroidRuntime( 1154):    at android.graphics.drawable.Drawable.createFromXml(Drawable.java:728)
E/AndroidRuntime( 1154):    at android.content.res.Resources.loadDrawable(Resources.java:1694)
E/AndroidRuntime( 1154):    ... 30 more 
```

有关详细信息，请参阅附加的完整 Eclipse 项目。

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:22:16.127

你应该添加这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"> 
```

开始和这个：

```
</selector> 
```

到 btn_basket_calls.xml 文件的末尾。

# php - 如何获取图像ID

> ID：10045139
> 
> 赞同：0
> 
> 时间：2012-04-06T14:49:39.997
> 
> 标签：php, javascript

我正在动态创建图像列表，以下是代码

```
<?php
for ( $counter = 0; $counter < $obj1->id; $counter ++)
{ ?>
<tr><td> Week <?php echo($counter+1); ?>
</td><td><?php echo" <a href=\"#hiddenDiv\" rel=\"facebox\";>";?>
<img src="tue.png"/ id="image" value="<?php echo $counter+1;?>" >
</a></td></tr>
<?php } ?> 
```

当用户单击图像时，会打开一个表单。每个图像代表一周，因此我需要唯一标识用户在哪一周插入数据。我需要该图像的 id，通过它我可以识别一周。单击图像后，将调用以下函数

```
function pc(){
var temp = document.getElementById("image");
alert(temp.value);
} 
```

但我越来越“未定义”。有人可以帮我吗？

谢谢

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:55:20.507

您会注意到我更改了 img 标签上的 id，这意味着每个新图像都将具有当前计数器的 id。

我还在链接中添加了一个 onclick 事件，并将计数器传递给 js 函数。

```
<?php
for ( $counter = 0; $counter < $obj1->id; $counter ++)
{ ?>
<tr><td> Week <?php echo($counter+1); ?>
</td><td><?php echo" <a href=\"#hiddenDiv\" onclick=\"pc(<?php echo $counter;?>)\" rel=\"facebox\";>";?>
<img src="tue.png"/ id="<?php echo $counter;?>" value="<?php echo $counter+1;?>" >
</a></td></tr>
<?php } ?> 
```

另外，删除 js 函数中“id”周围的引号：

```
    函数 pc(id){
    var temp = document.getElementById(id);
    警报（温度值）；
    }

```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-06T14:53:46.763

您必须传递标签的 id。喜欢`document.getElementById("image").`

```
function pc(id){
var temp = document.getElementById("image");
alert(temp.value);
} 
```

# matlab - MATLAB 中的一对一 SVM

> ID：10045140
> 
> 赞同：-2
> 
> 时间：2012-04-06T14:49:40.267
> 
> 标签：matlab, svm

我希望在 MATLAB 中对 fisheriris 数据使用一对一的方法来实现多类 SVM。

我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-07T12:55:13.897

您可以将[libsvm](http://www.csie.ntu.edu.tw/~cjlin/libsvm/)库用于 SVM。

您可以使用以下方法训练 svm：

```
model = svmtrain(features, labels); 
```

并做出预测：

```
predictions = svmpredict(features); 
```

默认情况下，如果 'labels' 中有多个值，libsvm 会进行 1vs1 分类。

# html - 如何防止在原始框架中加载页面？

> ID：10045144
> 
> 赞同：1
> 
> 时间：2012-04-06T14:49:47.997
> 
> 标签：html, hyperlink, frame

在我的网站上，我有一个包含另一个页面的框架。当我单击一个链接（位于框架中的页面上）时，我会在同一页面中获得一个新页面。因此，不会重新加载整个网页（只是框架的内容）。我可以改变这种行为吗？单击后，我想转到新页面（不仅仅是将其放在原始框架中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:51:30.583

将您的链接定位到 _parent：

```
<a href="..." target="_parent">...</a> 
```

# java - 正在创建多少个对象？

> ID：10045147
> 
> 赞同：0
> 
> 时间：2012-04-06T14:50:01.747
> 
> 标签：java, string, object

有一个关于 Java 中 Stringz 实例池的简单问题

如果我有这样的情况：场景1：

```
String s1 = "aaa";  
String s2 = new String("aaa"); 
```

然后翻转场景2：

```
String s1 = new String("aaa");  
String s2 = "aaa"; 
```

在每种情况下 - 在字符串池和堆中创建了多少个对象？我假设两者都会创建相同数量的对象（2 个对象 - 在字符串池中的每个场景中，两条线都有一个“aaa”，而新的运算符则有一个）。我在 iview 中被告知这是不正确的 - 我很好奇我的理解有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:35:14.047

字面量的字符串`"aaa"`是在加载类时创建和池化的，所以当~~你的两行~~代码被执行时，只会创建一个新的字符串。

需要明确的是：这两个示例在执行时都只创建一个新的 String 对象。第一次使用包含字符串“aaa”的类时会创建文字。

```
class FooBar{
  void foo(){
    String s1 = "aaa";//the literal already exists  
    String s2 = new String("aaa");//creates string for s2 
  }
  void bar(){
    String s1 = new String("aaa"); //creates string for s1 
    String s2 = "aaa";//the literal already exists  
  }
}

class Test{

    public void main(String... args){
      ...
      //first time class FooBar used in program, class with literals loaded
      FooBar fb = new FooBar();
      //creates one string object, the literal is already loaded
      fb.bar();
      //also creates one string object, the literal is already loaded
      fb.foo();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:51:59.930

正如您在采访中所说的那样，无论哪种情况，答案都是堆中的 1 个实例和字符串池中的 1 个。

字符串可以驻留有两个空间：堆和存储内部字符串的永久代。

String 构造函数在堆中创建一个 String。字符串文字是在永久代的字符串池中创建的。堆中的字符串可以通过实习字符串的方法移动到字符串池`String.intern()`（即确定对池中相等字符串的引用，或者在那里创建相等的字符串，如果还没有的话）并返回对实习字符串。

编辑：要检查我的回答，请`System.out.println(s1 == s2);`在每个示例中添加第三行。在这两种情况下都会打印 false，证明两个对象具有不同的内存地址。

# c# - 序列化 .txt 与 .xml

> ID：10045149
> 
> 赞同：0
> 
> 时间：2012-04-06T14:50:06.923
> 
> 标签：c#, xml, serialization

我一直在阅读有关序列化的内容，但我真的不明白为什么我们使用 XML 文件而不是 txt 文件？我一直在尝试从 txt 文件中读取数据，并且效果很好。使用 XML 的原因是什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:53:25.383

xml 文件基本上是一个文本文件，遵循 xml 格式化规则。

xml 文件的主要优点是它们是分层的。考虑例如以下 XML：

```
<carOwners>
  <person name="Bill">
    <car brand="Audi"/>
  </person>
  <person name="Charlie">
    <car brand="volvo"/>
    <car brand="saab"/>
  </person>
</carOwners> 
```

这里我们有两种不同的数据类型：人和汽车。使用 XML 的层次结构，可以很容易地表示每辆车的所有者。

当然，不使用 XML 也可以做类似的事情，但是您必须自己进行大量的字符串操作来解析信息。对于 XML，每种主要编程语言都至少有一个 xml 库可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:54:18.657

一方面，围绕 xml（或 json，或任何定义明确的序列化格式）有大量工具。另一方面，所有问题都已得到解答：

*   我如何嵌套项目？
*   我如何转义字符？
*   如何自动序列化？

此外，其他开发人员几乎没有时间使用您的数据，因为每个人都理解这些商定的格式。

也就是说，自定义序列化显然可以更小（二进制表示，更短的语法等）或更具体地根据您的需求量身定制，但是您需要编写自己的*一切*，这非常耗时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T14:54:35.920

XML 优于原始文本的原因是 XML 是一种表示结构化数据的方式。这与对象图的序列化非常匹配。另一方面，文本文件本质上是非结构化的，需要构成序列化的格式标准

# c - 从C中的long中提取单个数字

> ID：10045158
> 
> 赞同：8
> 
> 时间：2012-04-06T14:50:57.307
> 
> 标签：c

我正在为我的 C 课程（第一门编程课程）做作业。部分作业是编写代码，让用户输入一个最长为 9 位的数字，程序需要判断这个数字是“增加”/“真正增加”/“减少”/“真正减少”/“增加和减少”/“真正减少和真正增加”/“不减少而不增加”。（共7个选项）

由于这是我们的第一个作业，我们不允许使用除了课堂上教过的东西之外的任何东西：

do-while、for、while 循环、else-if、if、break、continue scanf、printf、模数和基本运算符

（我们不能使用除 stdio.h 之外的任何库）

而已。我不能使用数组或`getchar`任何东西。我可以用来接收用户输入的唯一功能是`scanf`.

到目前为止，我已经用流程图和所有内容编写了算法，但我需要将用户的输入分成不同的数字。

例如，如果用户输入“1234...”，我想在 a 中保存 1，在 b 中保存 2，等等，然后在所有数字之间进行比较以确定它们是否都相等（增加和减少） ) 或是否 a > b >c ... (递减) 等等。

我知道如何使用 % 和 / 运算符来分隔每个数字，但我不知道如何将这些值“保存”在以后可以用于比较的变量中。

这是我到目前为止所拥有的：

```
printf("Enter a positive number : ");

do {
    scanf ("%ld", &number);
    if (number < 0) {
        printf ("invalid input...enter a positive integer: ");
        continue;
    }
    else break;
} while (1);

while (number < 0) {
    a = number % 10;
    number = number - a;
    number = number / 10;
    b = a;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T14:58:49.763

为什么不将它们扫描为字符（字符串）？然后您可以通过数组偏移量访问它们，方法是从 ASCII 字符代码中减去 48 的偏移量。`isdigit`您可以使用ctype.h验证该字符是否为数字。

* * *

**编辑**

由于您的教授设置了令人难以置信的心不在焉的限制：

```
#include <stdio.h>

int main()
{
  int number;
  printf("Enter a positive number: ");

  do
  {
    scanf ("%ld", &number);
    if (number < 0)
    {
      printf ("invalid input...enter a positive integer: ");
      continue;
    }
    else break;
  } while (1);

  int a = -1;
  int b = -1;
  int c = -1;
  int d = -1;
  int e = -1;
  int f = -1;
  int g = -1;
  int h = -1;
  int i = -1;

  while (number > 0)
  {
    if (a < 0) a = number % 10;
    else if (b < 0) b = number % 10;
    else if (c < 0) c = number % 10;
    else if (d < 0) d = number % 10;
    else if (e < 0) e = number % 10;
    else if (f < 0) f = number % 10;
    else if (g < 0) g = number % 10;
    else if (h < 0) h = number % 10;
    else if (i < 0) i = number % 10;

    number /= 10;
  }

  /* Printing for verification. */

  printf("%i", a);
  printf("%i", b);
  printf("%i", c);
  printf("%i", d);
  printf("%i", e);
  printf("%i", f);
  printf("%i", g);
  printf("%i", h);
  printf("%i", i);

  return 0;
} 
```

最后的有效数字将为正数，因此这些是您验证以满足不同条件的数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T15:48:54.087

由于您只需要比较连续的数字，因此有一种无需数组的优雅方法：

```
int decreasing = 2;
int increasing = 2;

while(number > 9)
{
  int a = number % 10;
  int b = (number / 10) % 10;

  if(a == b)
  {
    decreasing = min(1, decreasing);
    increasing = min(1, increasing);
  }
  else if(a > b)
    decreasing = 0;
  else if(a < b)
    increasing = 0;

  number /= 10;
} 
```

在这里，我们遍历数字（除以`10`）直到只剩下一位数字。我们将到目前为止有关数字的信息存储在`decreasing`和`increasing`-`2`表示真正增加/减少，`1`表示增加/减少，以及`0`表示不增加/减少。

在每一步，`a`是个位，`b`是十位。然后，我们根据和之间的比较来更改`increasing`和。`decreasing``a``b`

最后，应该很容易将`increasing`和的值`decreasing`转换为您想要的最终答案。

注意：该函数`min`返回其 2 个参数中较小的一个。您应该能够自己编写，或者用`if`语句或条件替换这些行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:04:09.817

Let us suppose you have this number 23654

```
23654 % 10000 = 2 and 3654
3654 % 1000 = 3 and 654
654 % 100 = 6 and 54
54 % 10 = 5 and 4
4 
```

This way you can get all the digits. Of course, you have to know if the number is greater than 10000, 1000, 100 or 10, in order to know the first divisor.

Play with sizeof to get the size of the integer, in order to avoid a huge if...else statement

**EDIT:**

Let us see

```
if (number>0) {
    // Well, whe have the first and only digit
} else if (number>10) {
    int first_digit = number/10;
    int second_digit = number % 10;
} else if (number>100) {
    int first_digit = number/100;
    int second_digit = (number % 100)/10;
    int third_digit = (number % 100) % 10;
} ... 
```

and so on, I suppose

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T15:14:19.613

要求你做没有数组的循环是愚蠢的——但这是你老师的错，而不是你的错。

话虽这么说，我会做这样的事情：

```
char c;
while (1) {
    scanf("%c", &c);
    if (c == '\n')    /* encountered newline (end of input) */
        break;
    if (c < '0' || c > '9')
        break;        /* do something to handle bad characters? */
    c -= '0';
    /*
     * At this point you've got 0 <= c < 9\. This is
     * where you do your homework :)
     */
} 
```

这里的诀窍是，当您在程序中输入数字时，您会一次发送所有缓冲区，而不是一次发送一个字符。这意味着第一个 scanf 将阻塞，直到整个字符串（即“123823”或其他）连同换行符（'\n'）一起到达。然后这个循环在空闲时解析那个字符串。

**编辑**为了测试数字的增加/减少，您可能认为您需要存储整个字符串，但事实并非如此。只需定义一些额外的变量来记住重要信息，例如：

```
int largest_digit_ive_seen, smallest_digit_ive_seen, strict_increasing_thus_far; 
```

等等等等

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-11T14:25:02.503

```
// u_i is the user input, My homework asked me to extract a long long, however, this should also be effective for a long.

int digits = 0;
long long d_base = 1;
int d_arr[20];
while (u_i / d_base > 0)
{
    d_arr[digits] = (u_i - u_i / (d_base * 10) * (d_base * 10)) / d_base;
    u_i -= d_arr[digits] * d_base;
    d_base *= 10;
    digits++;
} 
```

编辑：提取的单个数字现在位于 int 数组 d_arr 中。我不擅长C，所以我认为可以优化数组声明。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T15:13:18.363

这是纯 C 中的一个工作示例：

```
#include <stdio.h>

unsigned long alePow (unsigned long int x, unsigned long int y);

int main( int argc, const char* argv[] )
{
   int enter_num, temp_num, sum = 0;
   int divisor, digit, count = 0;

    printf("Please enter number\n");
    scanf("%d", &enter_num);

   temp_num = enter_num;

   // Counting the number of digits in the entered integer
   while (temp_num != 0)
   {
       temp_num = temp_num/10;
       count++;
   }

   temp_num = enter_num;

   // Extracting the digits
   printf("Individual digits in the entered number are ");
   do
   {
       divisor = (int)(alePow(10.0, --count));
       digit = temp_num / divisor;
       temp_num = temp_num % divisor;

       printf(" %d",digit);
       sum = sum + digit;
   }
   while(count != 0);

   printf("\nSum of the digits is = %d\n",sum);

   return 0;
}

unsigned long alePow(unsigned long int x, unsigned long int y) {

    if (x==0) { return 0; } 
    if (y==0||x==1) { return 1; } 
    if (y==1) { return x; }
    return alePow(x*x, y/2) * ((y%2==0) ? 1 : x);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T15:21:09.617

我建议*循环展开*。

```
int a=-1, b=-1, c=-1, d=-1, e=1, f=-1, g=-1, h=-1, i=-1; // for holding 9 digits
int count = 0; //for number of digits in the given number

if(number>0) {
i=number%10;
number/=10;
count++;
}

if(number>0) {
h=number%10;
number/=10;
count++;
}

if(number>0) {
g=number%10;
number/=10;
count++;
}
....
....
/* All the way down to the storing variable a */ 
```

现在，您知道了位数（变量计数）以及它们存储在哪个变量中。现在你有了所有的数字，你可以用很多 if 来检查它们的“减少”、“增加”等！

考虑到您的所有条件，我真的想不出更好的解决方案。

# asp.net - DotNetOpenAuth“违反继承安全规则”

> ID：10045159
> 
> 赞同：2
> 
> 时间：2012-04-06T14:50:59.717
> 
> 标签：asp.net, security, dotnetopenauth

我有一个 ASP.NET MVC4 应用程序，它使用[DotNetOpenAuth 4.0.1](http://www.dotnetopenauth.net/)通过 OpenId 提供程序 (Google) 对用户进行身份验证。在我的开发机器（本地主机）上一切正常。

但是，当我将 Web 应用程序部署到服务器（共享主机）时，我在尝试进行身份验证时收到以下错误（特别是，当我尝试创建一个`OpenIdRelyingParty`.

> > 覆盖成员时违反了继承安全规则：“DotNetOpenAuth.Messaging.ProtocolException.GetObjectData(System.Runtime.Serialization.SerializationInfo, System.Runtime.Serialization.StreamingContext)”。重写方法的安全可访问性必须与被重写方法的安全可访问性相匹配。

堆栈跟踪：

```
DotNetOpenAuth.Messaging.ErrorUtilities.VerifyProtocol(Boolean condition, String message, Object[] args) +0
DotNetOpenAuth.Messaging.Channel.ValidateAndPrepareBindingElements(IEnumerable`1 elements) +524
DotNetOpenAuth.Messaging.Channel..ctor(IMessageFactory messageTypeProvider, IChannelBindingElement[] bindingElements) +316
DotNetOpenAuth.OpenId.ChannelElements.OpenIdChannel..ctor(IMessageFactory messageTypeProvider, IChannelBindingElement[] bindingElements) +48
DotNetOpenAuth.OpenId.ChannelElements.OpenIdRelyingPartyChannel..ctor(ICryptoKeyStore cryptoKeyStore, INonceStore nonceStore, RelyingPartySecuritySettings securitySettings) +52
DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty..ctor(ICryptoKeyStore cryptoKeyStore, INonceStore nonceStore) +570
DotNetOpenAuth.OpenId.RelyingParty.OpenIdRelyingParty..ctor() +65
MyProject.Controllers.OpenIdController.Authenticate(String returnUrl) in OpenIdController.cs:81
... 
```

我听说 DotNetOpenAuth 在中等信任下工作得很好，所以我很惊讶地发现了一个错误。我该如何解决？我需要修改 DotNetOpenAuth 源代码还是有更简单的方法？

这个问题似乎与[这个](https://stackoverflow.com/questions/3055792/inheritance-security-rules-violated-while-overriding-member-securityruleset-le)问题相似，但我不知道源代码的哪些部分需要编辑。同样奇怪的是，之前没有人就 DotNetOpenAuth 提出过这个问题，所以也许我做错了什么？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:36:50.390

看起来您正在运行针对 .NET 3.5 的 DotNetOpenAuth 构建。.NET 4.0 引入的一个重大变化是对不同安全属性的要求。您可以[从 NuGet 获取针对 .NET 4.0 的 DotNetOpenAuth 构建](https://nuget.org/packages/DotNetOpenAuth)。

# jsf - JSF 2 和使用命令按钮下载文件 - 最终重定向问题？

> ID：10045160
> 
> 赞同：0
> 
> 时间：2012-04-06T14:51:02.873
> 
> 标签：jsf, download, firebug

我希望能够在我的 JSF 应用程序中下载 .txt 文件。我这样使用 h:command 按钮：

```
<h:commandButton value="Download" actionListener="#{exportBean.downloadFile}">
<f:attribute name="fileName" value="#{upload.name}"/>
</h:commandButton> 
```

我在支持 bean 中使用此方法：http: [//pastebin.com/BMAQSgTJ](http://pastebin.com/BMAQSgTJ)（该实现可能没问题，因为服务器返回我要下载的文件 - 可以在 firebug 输出中看到，我只粘贴它如果你是感兴趣的）

我的问题是，当我“单击” h:commandButton 下载文件时，没有保存或打开文件的对话框窗口......有人知道问题出在哪里吗？

这是我的萤火虫输出：[http ://dl.dropbox.com/u/21435926/firebug.png](http://dl.dropbox.com/u/21435926/firebug.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:02:16.757

You might want to replace the AJAX `actionListener` in

```
<h:commandButton value="Delete file" actionListener="#{exportBean.deleteFile}"> 
```

to an `action`:

```
<h:commandButton value="Delete file" action="#{exportBean.deleteFile}"> 
```

# vb6 - 在 VB6 中，声明的字段是否具有默认值？

> ID：10045167
> 
> 赞同：10
> 
> 时间：2012-04-06T14:51:36.020
> 
> 标签：vb6

我正在浏览一些旧的 VB6 代码，并且以多种形式遇到声明语句，例如 -

```
 PEC_NUM_ENT(1) As Byte
 EC_MORE_RW_EXIST(0) As Byte
 EC_CODE_IND(0) As Byte
 EC_DATA(7) As PRXDetail 
```

我的问题是，这些字段是否有默认值？如果是这样，价值是什么？谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-06T15:02:03.813

是的。数字和日期类型默认为 0，字符串为空字符串（即“”），布尔值为 False，变体为 EMPTY。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-06T19:29:30.643

来自[VB6 文档](http://msdn.microsoft.com/en-us/library/aa243352(v=VS.60).aspx)

> 变量初始化时，数值变量初始化为 0，变长字符串初始化为零长度字符串（“”），定长字符串用零填充。Variant 变量被初始化为 Empty。用户定义类型变量的每个元素都被初始化，就好像它是一个单独的变量一样。

PRXDETAIL 看起来可能是用户定义的类型

# django - 如何使用 mercurial 将文件夹与现有 Heroku 应用程序链接

> ID：10045169
> 
> 赞同：4
> 
> 时间：2012-04-06T14:51:39.487
> 
> 标签：django, deployment, mercurial, heroku, hg-git

我在 Bitbucket 上有一个现有的 Django 应用程序，我可以[部署到 Heroku whith`hg-git`](https://stackoverflow.com/q/9591380/343834)。每当我想在我的应用程序文件夹中运行一些 heroku 命令时，我都会收到以下错误：

```
$ heroku ps
 !    No app specified.
 !    Run this command from an app folder or specify which app to use with --app <app name>
$ heroku logs
 !    No app specified.
 !    Run this command from an app folder or specify which app to use with --app <app name>
etc. 
```

当前的解决方法是指定应用程序名称：`heroku ps --app <app name>`但我正在寻找一种方法将我的存储库名称链接到远程 Heroku 应用程序名称，就像[它是如何使用 git 完成的](https://stackoverflow.com/q/5129598/343834)一样。

我暂时无法将我的应用程序移至 github。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-05T02:36:20.183

我建议尝试 Hg-Git 的“intree”配置选项。通过将以下内容添加到您的 hgrc 来设置它：

```
[git]
intree = True 
```

使用该设置，Hg-Git 内部使用的 Git 存储库将存储为工作副本中的“.git”目录，而不是嵌套在“.hg”目录中。

Heroku 将看到这个存储库的配置。按照另一个答案中的建议添加一个遥控器（引用如下），你应该已经准备好了。

```
git remote add heroku git@heroku.com:<app-name>.git 
```

目前，我发现的 Hg-Git 配置选项的最佳文档是项目 Bitbucket 页面上显示的 README：[https ://bitbucket.org/durin42/hg-git](https://bitbucket.org/durin42/hg-git)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-09T18:10:36.553

考虑`heroku`查看`.git/config`文件以获取应用程序名称，只需在本地存储库中执行以下操作：

```
git init
git remote add heroku git@heroku.com:<app-name>.git 
```

为了不弄乱您的存储库，您还将将以下行添加到`.hgignore`：

```
#Git setup
.git/** 
```

现在，通常的 heroku 命令不再要求默认应用程序名称。

# php - 使用 Codeigniter for Backbone.js 处理服务器端同步

> ID：10045170
> 
> 赞同：0
> 
> 时间：2012-04-06T14:51:43.260
> 
> 标签：php, codeigniter, rest, backbone.js

`RESTful JSON request`在 PHP Codeigniter 端应该如何处理 Backbone 同步？

手册中有一个 Ruby 示例，但我不知道 Ruby 也许有人可以翻译它？

```
def update
  account = Account.find params[:id]
  account.update_attributes params
  render :json => account
end 
```

[http://documentcloud.github.com/backbone/#Sync](http://documentcloud.github.com/backbone/#Sync)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:06:06.167

我个人没有使用过它，但您可能想查看 Phil Sturgeon 的[CodeIgniter 的 RESTful 服务器](https://github.com/philsturgeon/codeigniter-restserver)。

# actionscript - 在 this.parent.insertMovieClip() 中找不到引用的 MovieClip；

> ID：10045181
> 
> 赞同：0
> 
> 时间：2012-04-06T14:52:33.743
> 
> 标签：actionscript, actionscript-2, symbols, movieclip

如果这个问题有一个非常简单的答案，请原谅我。

我目前正在更新**其他人创建**的一系列 .fla 文件。在其中一个符号中是以下代码： `this.insertMovieClip("symbolName","objectReferenceName",5);`

我了解代码在做什么，或者更确切地说它**通常**会做什么。它会在库中找到一个命名的元件，并在MovieClip`symbolName`中创建一个命名为它的实例。`objectReferenceName``this`

问题是我搜索了图书馆，但找不到任何名为`symbolName`. 它不存在。但不知何故，在运行时调用了一个影片剪辑 - 代码有效。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:05:06.500

库中的符号名称实际上在运行时没有影响——它们只是标签。在运行时使用的标识符在符号的链接属性中设置。您可以通过查看库中的 AS Linkage 列或右键单击符号并单击属性来查看此内容。

在 AS2 中，通过选中“属性”对话框中的“Export for ActionScript”框为符号分配标识符。然后，您可以像这样从 ActionScript 创建该符号的实例：

```
attachMovieClip("linkageIdentifier", "reference", depth); 
```

这可能就是您的`insertMovieClip`功能正在做的事情。

# android - Android::menu 无法解析或不是字段

> ID：10045182
> 
> 赞同：0
> 
> 时间：2012-04-06T14:52:40.243
> 
> 标签：android

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
super.onCreateOptionsMenu(menu);
MenuInflater inflater = getMenuInflater();
inflater.inflate(R.menu.settings1, menu);
return true;
} 
```

我需要帮助。我在“R.menu”收到错误消息“菜单无法解析或不是字段”..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:05:56.963

如果您的布局中有错误，则不会生成 R 文件，因此出现此错误是正常的。

您需要先纠正布局中的错误，然后进行清理，然后 R 将得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:38:46.503

您正在使用 Preference xml 作为菜单参考，这就是接收此错误的原因，因此请创建 menu.xml 或添加为：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
super.onCreateOptionsMenu(menu);
this.getMenuInflater().inflate(R.menu.options_menu, menu);
return true;
} 
```

您可以动态添加为：

```
@Override
        public boolean onCreateOptionsMenu(Menu menu) {
            menu.add(Menu.NONE, Menu.FIRST + 1, 5, "??").setIcon(
                    android.R.drawable.ic_menu_delete);
            menu.add(Menu.NONE, Menu.FIRST + 2, 2, "??").setIcon(
                    android.R.drawable.ic_menu_edit);
            return true; 
        }
        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
            case Menu.FIRST + 1:
               startActivity(new Intent(getBaseContext(), SettingActivity.class));
                break;
            case Menu.FIRST + 2:
               Toast.makeText(getBaseContext(), "Menu Clicked", Toast.LENGTH_SHORT).show();
                break;
            }
        return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-14T23:43:17.973

检查您的`imports`. `.R`如果您从其他项目（可能是库项目）导入了某种文件，例如`import com.someotherpackage.R;`您需要删除该行，然后清理您的项目。

现在它可能引用了错误的`.R`文件，或者您在某处的名称中有拼写错误。

# file - UIImage initWithContentsOfFile:... - 只需要获取尺寸

> ID：10045185
> 
> 赞同：0
> 
> 时间：2012-04-06T14:52:52.897
> 
> 标签：file, uiimage, dimensions

我只需要从 PNG 文件中获取宽度和高度。有可能`UIImage`吗？原因是因为有时（在极少数情况下，某些图像具有奇数宽度和 RGB8 格式）UIImage 返回的尺寸不同于`libpng`)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:19:15.280

我在这里找到了答案：http: [//oleb.net/blog/2011/09/accessing-image-properties-without-loading-the-image-into-memory/](http://oleb.net/blog/2011/09/accessing-image-properties-without-loading-the-image-into-memory/)

```
#import <ImageIO/ImageIO.h>

NSURL *imageFileURL = [NSURL fileURLWithPath:...];
CGImageSourceRef imageSource = CGImageSourceCreateWithURL((CFURLRef)imageFileURL, NULL);
if (imageSource == NULL) {
    // Error loading image
    ...
    return;
}

NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                         [NSNumber numberWithBool:NO], (NSString *)kCGImageSourceShouldCache, 
                         nil];
CFDictionaryRef imageProperties = CGImageSourceCopyPropertiesAtIndex(imageSource, 0, (CFDictionaryRef)options);
if (imageProperties) {
    NSNumber *width = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelWidth);
    NSNumber *height = (NSNumber *)CFDictionaryGetValue(imageProperties, kCGImagePropertyPixelHeight);
    NSLog(@"Image dimensions: %@ x %@ px", width, height);
    CFRelease(imageProperties);
} 
```

我们可以在不加载图像的情况下访问文件中的任何元数据。

# runtime - 在运行时终止正在运行的 while 循环

> ID：10045186
> 
> 赞同：0
> 
> 时间：2012-04-06T14:53:06.017
> 
> 标签：runtime, while-loop, termination

我在控制事件结构内的 while 循环时遇到了一些问题。假设我有一个迭代过程，并且我想在运行时停止迭代（比如检查结果）。

```
 while(resid > 1e-10 )
{

for (int iter = 0;iter < 1000;iter++)
{
// some thing //
}

} 
```

我有 3 个按钮（“开始运行，停止运行，退出程序”）。当while循环运行时，应该可以通过点击“停止运行”来停止运行，但这不起作用。

我并不是说它必须是按钮，但它可以是一个控制台应用程序，并且通过在控制台上写一些东西来完成终止。

有没有人可以实施的想法？

非常感谢和最好的问候， 穆罕默德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T14:55:10.960

您需要检查循环内的“按钮被按下”，如果检测到，则退出循环。

# android - LocationManager GetBestProvider 标准

> ID：10045189
> 
> 赞同：0
> 
> 时间：2012-04-06T14:53:29.287
> 
> 标签：android, xamarin.android

我希望我的 LocationManager 先尝试获取 Fine_Location，然后如果不可用，则获取 Coarse_Location。可以为 Criteria Accuracy 属性设置这种类型的层次结构吗？

```
const string context = LocationService;
LocationManager locationManager = (LocationManager)GetSystemService(context);
Criteria criteria = new Criteria() { Accuracy = Accuracy.Fine | Accuracy.Coarse };
string provider = locationManager.GetBestProvider(criteria, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:26:36.900

取自该[`GetBestProvider()`](http://docs.mono-android.net/?link=M%3aAndroid.Locations.LocationManager.GetBestProvider)方法的文档：

> 返回最符合给定条件的提供者的名称。只有被调用活动允许访问的提供者才会被返回。**如果多个提供者符合标准，则返回准确度最高的提供者。**

这听起来像您正在寻找的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T13:02:09.310

> 我希望位置尽可能准确，但如果无法获得 GPS 信号，我不希望它返回 null

然后你必须为这两个提供者注册 -`provider = LocationManager.GetBestProvider(criteria, true);`将返回最好的*可用*提供者 - 它不会检查这个提供者是否真的可以得到修复。请参阅[此处](https://stackoverflow.com/questions/5505429/switching-between-network-and-gps-provider/14237739#14237739)和[此处](https://stackoverflow.com/questions/7019474/switching-between-gps-and-network-provider)以向两家提供商注册

# c# - 如何确定用户是否是管理员，即使未提升权限

> ID：10045190
> 
> 赞同：11
> 
> 时间：2012-04-06T14:53:31.097
> 
> 标签：c#, .net, windows-7, uac

在我的 C# 应用程序中，我需要检查当前用户是否是管理员组的成员。它需要与 Windows XP 和 Windows 7 兼容。

目前，我正在使用以下代码：

```
bool IsAdministrator
{
    get
    {
        WindowsIdentity identity = WindowsIdentity.GetCurrent();
        WindowsPrincipal principal = new WindowsPrincipal(identity);

        return principal.IsInRole(WindowsBuiltInRole.Administrator);
    }
} 
```

问题是，如果应用程序在 Windows 7 上运行且 UAC 作为非提升管理员打开，则此方法返回 false。即使应用程序以非提升管理员身份运行，我如何确定用户是否是管理员？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-06T14:59:09.217

有一个 Win32 API`GetTokenInformation`可用于检查当前令牌。如果返回的令牌是拆分令牌，则可能是在非提升模式下运行的管理员用户。

`GetTokenInformation`有一个输出参数`tokenInformation`，它采用以下三个值之一：

*   TokenElevationTypeDefault = 1
*   TokenElevationTypeFull = 2
*   TokenElevationTypeLimited = 3

TokenElevationTypeLimited 的值表示用户正在使用具有有限权限的拆分令牌运行。当提升 TokenElevationTypeFull 值时返回。非管理员用户的值为 TokenElevationTypeDefault。

[在http://www.davidmoore.info/2011/06/20/how-to-check-if-the-current-user-is-an-administrator-even-if-uac](http://www.davidmoore.info/2011/06/20/how-to-check-if-the-current-user-is-an-administrator-even-if-uac-is-on/)有一个完整的 C# 代码示例[-开启/](http://www.davidmoore.info/2011/06/20/how-to-check-if-the-current-user-is-an-administrator-even-if-uac-is-on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-18T04:18:50.323

对于任何 VB.NET 人（我知道你在那里......），这是我从各种来源炮制出来的一个版本，我认为，它经过优化以确定当前用户（包括提升的用户）是否在定义的管理员中组、机器或域，启用或不启用 UAC。（*这篇*文章非常感谢这里和其他地方的其他帖子！）

首先，它使用静态可空布尔值来保持管理员状态，因为虽然基本检查很快，但完整测试可能需要数十秒，所以你只想做一次 - 如果你能帮助它的话.

其次，它在基本测试不正确/错误方面出错，如果用户是 AD 管理的或本地计算机启用了 UAC，通常会出现这种情况。因此，如果它*可以确定*用户是管理员，*它将*.

*第三，您可以根据需要在AuthorizationGroups*中添加或删除条件，但其中包含的条件涵盖了大多数情况。

最后，如果出现任何问题，您将得到*False*；如果你想要一个错误，你可以有一个，但我个人不明白这一点。

```
Function IsAdministrator() As Boolean

    Static bResult As Boolean? = Nothing
    Try
        If bResult Is Nothing Then
            bResult = New WindowsPrincipal(WindowsIdentity.GetCurrent()).IsInRole(WindowsBuiltInRole.Administrator)
            If Not bResult Then
                Dim oContext As PrincipalContext = Nothing
                Try 'to get a domain context first ...
                    Domain.GetComputerDomain()
                    oContext = New PrincipalContext(ContextType.Domain)
                Catch
                    '... if it fails, fall through to a machine context
                End Try
                If oContext Is Nothing Then oContext = New PrincipalContext(ContextType.Machine)
                Dim oPrincipal As UserPrincipal = UserPrincipal.FindByIdentity(oContext, WindowsIdentity.GetCurrent().Name)
                If oPrincipal IsNot Nothing Then
                    bResult = oPrincipal.GetAuthorizationGroups().Any(Function(p) _
                        p.Sid.IsWellKnown(WellKnownSidType.BuiltinAdministratorsSid) OrElse
                        p.Sid.IsWellKnown(WellKnownSidType.AccountDomainAdminsSid) OrElse
                        p.Sid.IsWellKnown(WellKnownSidType.AccountAdministratorSid) OrElse
                        p.Sid.IsWellKnown(WellKnownSidType.AccountEnterpriseAdminsSid))
                End If
            End If
        End If
    Catch
        bResult = False
    End Try
    Return bResult.GetValueOrDefault(False)
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-25T11:56:04.947

我知道这很旧，但我发现以下方法可以在所有系统中正常工作。我需要它在 .net 2 上工作，而其他解决方案（例如 WinAPI 和管理对象）在某些版本的 Windows 上失败：

启动一个运行命令的新进程`net localgroup administrators`并适当地解析输出。这适用于启用和禁用 UAC，并且不需要提升的进程。

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2012-04-06T15:03:45.917

如果您是管理员，您可以暂时从代码中禁用 UAC，然后重新启用它。注册表项是

键：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\System 值：EnableLUA 设置为：0 禁用，1 启用

所以你可以做类似的事情

```
RegistryKey myKey = Registry.LocalMachine.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\Policies\\System", true);
myKey.SetValue("EnableLUA", "1", RegistryValueKind.String); 
```

然后检查你的校长。这有点像黑客，但值得一试。

# python - 在 Python 描述符中创建动态文档字符串

> ID：10045192
> 
> 赞同：9
> 
> 时间：2012-04-06T14:53:34.457
> 
> 标签：python, metaprogramming, descriptor

我正在尝试动态生成一些类定义（用于包装 C++ 扩展）。以下描述符工作正常，除非我尝试使用 help() 访问字段的文档字符串，它为描述符提供默认文档，而不是它自己的字段。但是，当我执行帮助（类名）时，它会检索传递给描述符的文档字符串：

```
class FieldDescriptor(object):
    def __init__(self, name, doc='No documentation available.'):
        self.name = name
        self.__doc__ = doc

    def __get__(self, obj, dtype=None):
        if obj is None and dtype is not None:
            print 'Doc is:', self.__doc__
            return self
        return obj.get_field(self.name)

    def __set__(self, obj, value):
        obj.set_field(self.name, value)

class TestClass(object):
    def __init__(self):
        self.fdict = {'a': None, 'b': None}

    def get_field(self, name):
        return self.fdict[name]

    def set_field(self, name, value):
        self.fdict[name] = value

fields = ['a', 'b']
def define_class(class_name, baseclass):
    class_obj = type(class_name, (baseclass,), {})
    for field in fields:
        setattr(class_obj, field, FieldDescriptor(field, doc='field %s in class %s' % (field, class_name)))
    globals()[class_name] = class_obj

if __name__ == '__main__':
    define_class('DerivedClass', TestClass)
    help(DerivedClass.a)
    help(DerivedClass)
    v = DerivedClass()
    help(v.a) 
```

“python test.py”打印：

```
文档是：类 DerivedClass 中的字段 a
模块 __main__ 对象中 FieldDescriptor 的帮助：

类 FieldDescriptor(__builtin__.object)
 | 此处定义的方法：
 |  
 | __get__(self, obj, dtype=None)
 |  
 | __init__(self, name, doc='没有可用的文档。')
 |  
 | __set__(self, obj, value)
 |  
 | -------------------------------------------------- --------------------
 | 此处定义的数据描述符：
 |  
 | __dict__
 | 实例变量的字典（如果已定义）
 |  
 | __weakref__
 | 对象的弱引用列表（如果已定义）

文档是：类 DerivedClass 中的字段 a
文档是：DerivedClass 类中的字段 b
模块 __main__ 中的 DerivedClass 类的帮助：

类派生类（TestClass）
 | 方法解析顺序：
 | 派生类
 | 测试类
 | __builtin__.object
 |  
 | 此处定义的数据描述符：
 |  
 | 一个
 | 类 DerivedClass 中的字段 a
 |  
 | b
 | DerivedClass 类中的字段 b
 |  
 | -------------------------------------------------- --------------------
 | 从 TestClass 继承的方法：
 |  
 | __在自身）
 |  
 | get_field（自我，姓名）
 |  
 | set_field（自我，姓名，价值）
 |  
 | -------------------------------------------------- --------------------
 | 继承自 TestClass 的数据描述符：
 |  
 | __dict__
 | 实例变量的字典（如果已定义）
 |  
 | __weakref__
 | 对象的弱引用列表（如果已定义）

关于 NoneType 对象的帮助：

类无类型（对象）
 | 此处定义的方法：
 |  
 | __hash__(...)
 | x.__hash__() 哈希(x)
 |  
 | __repr__(...)
 | x.__repr__() 代表(x)

```

知道如何获得`descriptor.__doc__`for`help(class.field)`吗？有没有办法绕过这个并为 doc 提供一个 getter 函数，而不必将 doc 字符串存储在描述符中？

喜欢：

```
class FieldDescriptor(object):
    def __init__(self, name, doc='No documentation available.'):
        self.name = name
        self.__doc__ = doc

    def __get__(self, obj, dtype=None):
        if obj is None and dtype is not None:
            print 'Doc is:', self.__doc__
            return self
        return obj.get_field(self.name)

    def __set__(self, obj, value):
        obj.set_field(self.name, value)

    # This is what I'd like to have
    def __doc__(self, obj, dtype):
       return dtype.generate_docstring(self.name) 
```

更新：实际上我从以下定义开始`__get__`：

```
def __get__(self, obj, dtype=None):
    return obj.get_field(self.name) 
```

问题在于，当我说：

```
help(DerivedClass.a) 
```

Python 抛出了一个异常，表明我正在尝试调用`None.get_field`. 因此使用and`help()`调用该`__get__`方法。这就是为什么我决定在 obj=None 和 dtype!=None 时返回 FieldDescriptor 实例。我的印象是试图展示。按照这个逻辑，如果返回，那么应该由 help() 打印，整个类 [ ] 都是这种情况，但单个字段 [ ] 不是这种情况。`obj=None``dtype=DerivedClass``help(xyz)``xyz.__doc__``__get__``descriptor_instance``descriptor_instance.__doc__``help(DerivedClass)``help(DerivedClass.a)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:42:56.630

发生的事情是，当您请求时`help(DerivedClass.a)`- python 计算括号内的表达式 - 这是描述符`__get__`方法返回的对象 - 并且他们搜索该对象的帮助（包括文档字符串）。

让这个工作（包括动态文档字符串生成）的一种方法是让您的`__get__`方法重新调整一个动态生成的对象，该对象具有所需的文档字符串。但是这个对象本身需要是原始对象的适当代理对象，并且会在您的代码上产生一些开销 - 以及许多特殊情况。

无论如何，让它像你想要的那样工作的唯一方法是修改`__get__`它自己返回的对象，以便它们的行为像你想要的那样。

我建议，如果您在帮助中想要的只是一些信息，就像您正在做的那样，也许您希望从您返回的对象`__get__`是一个定义`__repr__`方法的类（而不仅仅是一个`__doc__`字符串）。

# google-app-engine - 在 servlet 中调用 createNewGSFile() 时出现 IOException

> ID：10045193
> 
> 赞同：3
> 
> 时间：2012-04-06T14:53:36.933
> 
> 标签：google-app-engine

我在尝试写入 Google 商店时收到 IOException

堆栈跟踪已附加

> com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:574) 处 com.google.appengine.api.files.FileServiceImpl.translateException(FileServiceImpl.java:601) 处的 java.io.IOException。 google.appengine.api.files.FileServiceImpl.create(FileServiceImpl.java:481) 在 com.google.appengine.api.files.FileServiceImpl.createNewGSFile(FileServiceImpl.java:151) 在 guestbook.StoreFileServlet.Insert(StoreFileServlet.java: 106) 在 guestbook.StoreFileServlet.doPost(StoreFileServlet.java:76) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:637) 在 javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 在org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166) 在 com.google.apphosting.utils.servlet.ParseBlobUploadFilter.doFilter(ParseBlobUploadFilter.java:102) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.apphosting .runtime.jetty.SaveSessionFilter.doFilter(SaveSessionFilter.java:35) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter (TransactionCleanupFilter.java:43) 在 org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157) 在 org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388) 在 org. mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216) 在 org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182) 在 org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765) 在 org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418) 在 com.google.apphosting.runtime .jetty.AppVersionHandlerMap.handle(AppVersionHandlerMap.java:249) 在 org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152) 在 org.mortbay.jetty.Server.handle(Server.java:326) 在org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542) 在 org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923) 在 com.google.apphosting.runtime.jetty.RpcRequestParser.parseAvailable( RpcRequestParser.java:76) 在 org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404) 在 com.google.apphosting.runtime.jetty.JettyServletEngineAdapter。serviceRequest(JettyServletEngineAdapter.java:135) 在 com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:446) 在 com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449) 在 com .google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext. java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453) 在 com.google.apphosting.runtime .ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251) 在 java.lang.Thread。运行(Thread.java:679) 引起：com.google.apphosting.api.ApiProxy$ApplicationException: ApplicationError: 8: at java.lang.Thread.getStackTrace(Thread.java:1495) at com.google.apphosting.runtime .ApiProxyImpl.doSyncCall(ApiProxyImpl.java:237) 在 com.google.apphosting.runtime.ApiProxyImpl.access$000(ApiProxyImpl.java:68) 在 com.google.apphosting.runtime.ApiProxyImpl$1.run(ApiProxyImpl.java:182 ) 在 com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java: 180) 在 com.google.apphosting.api.ApiProxy.makeSyncCall(ApiProxy.java:101) 在 com.google.apphosting.api 的 com.google.apphosting.runtime.ApiProxyImpl.makeSyncCall(ApiProxyImpl.java:68)。ApiProxy.makeSyncCall(ApiProxy.java:50) at com.google.appengine.api.files.FileServiceImpl.makeSyncCall(FileServiceImpl.java:570) ... 36 更多原因：com.google.apphosting.api.ApiProxy$ApplicationException : ApplicationError: 8: at com.google.apphosting.runtime.ApiProxyImpl$AsyncApiFuture.failure(ApiProxyImpl.java:546) at com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher$1.runInContext(RpcStub.java:788)在 com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455) 在 com.google.tracing.TraceContext.runInContext(TraceContext.java:695) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref( TraceContext.java:333) 在 com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325) 在 com。com.google.net.rpc3.client.RpcStub$RpcCallbackDispatcher.rpcFinished(RpcStub.java:828) 上 com.google.net.rpc3.client 上的 google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)。 RpcStub$RpcCallbackDispatcher.failure(RpcStub.java:819) 在 com.google.net.rpc3.impl.client.RpcClientInternalContext.runCallbacks(RpcClientInternalContext.java:906) 在 com.google.net.rpc3.impl.client.RpcClientInternalContext。 com.google.net.rpc3.impl.client.RpcNetChannel.afterFinishingActiveRpc(RpcNetChannel.java:1062) 上的finishRpcAndNotifyApp(RpcClientInternalContext.java:809) com.google.net.rpc3.impl.client.RpcNetChannel.finishRpc(RpcNetChannel. java:908) 在 com.google.net.rpc3.impl.client.RpcNetChannel.handleResponse(RpcNetChannel.java:2265) 在 com.google.net.rpc3.impl.client.RpcNetChannel。messageReceived(RpcNetChannel.java:2077) at com.google.net.rpc3.impl.client.RpcNetChannel.access$2000(RpcNetChannel.java:147) at com.google.net.rpc3.impl.client.RpcNetChannel$TransportCallback.receivedMessage (RpcNetChannel.java:3115) 在 com.google.net.rpc3.impl.client.RpcChannelTransportData$TransportCallback.receivedMessage(RpcChannelTransportData.java:602) 在 com.google.net.rpc3.impl.wire.RpcBaseTransport.receivedMessage(RpcBaseTransport .java:420) 在 com.google.net.rpc3.impl.wire.RpcClientTcpTransport.parseOneMessage(RpcClientTcpTransport.java:773) 在 com.google.net.rpc3.impl.wire.RpcClientTcpTransport.parseMessages(RpcClientTcpTransport.java:651 ) 在 com.google.net.rpc3.impl.wire.RpcClientTcpTransport$1 的 com.google.net.rpc3.impl.wire.RpcClientTcpTransport.access$100(RpcClientTcpTransport.java:38)。dataReceived(RpcClientTcpTransport.java:293) 在 com.google.net.async3.SocketConnection.handleNetworkReadEvent(SocketConnection.java:843) 在 com.google.net.async3.SocketConnection.access$400(SocketConnection.java:40) 在 com。 com.google.net.eventmanager.AbstractFutureTask$Sync.innerRun(AbstractFutureTask.java:260) 上 com.google.net.eventmanager.AbstractFutureTask 上的 google.net.async3.SocketConnection$NetworkReadHandlerImpl.run(SocketConnection.java:872)。在 com.google.net.eventmanager.EventManagerImpl.internalRunWorkerLoop(EventManagerImpl.java:997) 在 com.google.net.eventmanager.EventManagerImpl.runTask(EventManagerImpl.java:576) 在 com.google 运行(AbstractFutureTask.java:121) .net.eventmanager.EventManagerImpl.runWorkerLoop(EventManagerImpl.java:878) 在 com.google.net.eventmanager.WorkerThreadInfo。runWorkerLoop(WorkerThreadInfo.java:134) 在 com.google.net.eventmanager.EventManagerImpl$WorkerThread.run(EventManagerImpl.java:1833)

代码如下

```
 FileService fileService = FileServiceFactory.getFileService();
    GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder()
      .setBucket("mybucket")
      .setKey(key)
      .setMimeType("text/html")
      .setAcl("public-read")
      .addUserMetadata("myfield1", "my field value");
    try {
        AppEngineFile writableFile = fileService.createNewGSFile(optionsBuilder.build());
        // Open a channel for writing
        boolean lockForWrite = false;
        FileWriteChannel writeChannel = fileService.openWriteChannel(writableFile, lockForWrite);
        PrintWriter out = new PrintWriter(Channels.newWriter(writeChannel, "UTF8"));
        out.println(value);
        out.close();
        writeChannel.closeFinally();
    } catch (IOException e) {
        // TODO Auto-generated catch block
    } 
```

我正在使用 App Engine SDK 1.6.4

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:30:48.413

我通过使用 App Engine SDK 1.7 而不是 1.6.3.1 解决了这个问题（这会导致问题）

我的代码没有任何变化。只需将 App Engine SDK 版本更改为 1.7。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T02:53:37.380

这解决了。这是典型的不耐烦的新手问题:)

我没有做的是给我的应用程序许可到谷歌云存储项目[我错过了]。

请参阅先决条件 5

[https://developers.google.com/appengine/docs/java/googlestorage/overview](https://developers.google.com/appengine/docs/java/googlestorage/overview)

# doctrine-orm - Doctrine 2 - 一对一自动生成空行

> ID：10045194
> 
> 赞同：2
> 
> 时间：2012-04-06T14:53:39.853
> 
> 标签：doctrine-orm

假设我有 2 个实体，用户和地址。每个用户都必须有一个地址，因此表之间存在一对一的关系。

现在我想生成一个用户，它应该自动创建一个没有数据的地址行并标记它们的关系。

这可能在 Entity 或 EntityRepository 类中吗？还是有自动执行此操作的命令？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:55:02.587

首先，你不需要它。使用[空对象](http://en.wikipedia.org/wiki/Null_Object_pattern)模式。

其次，如果你真的需要它：

```
class User { 
    public function __construct() { 
        $this->setAddress(new Address);
    }
} 
```

并设置[级联持续](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/working-with-associations.html#transitive-persistence-cascade-operations)：

```
 * @OneToOne(targetEntity="Address", cascade={"persist"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:27:02.597

在存储库中写入函数：

```
class User_Repository {

    public function createEmptyUserWithAddress() {
        $user = new User();
        $entityManager->persist($user);
        $entityManager->flush();
        $address = new Address();
        $entityManager->persist($address);
        $entityManager->flush();
        $user->setAddress($address);
        $address->setUser($user);
        $entityManager->flush();
    } 
} 
```

或扩展用户（或地址）的构造函数：

```
class User { 
    public function __construct(Address $address) { 
        $this->setAddress($address);
    }
}

class User_Repository {
    public function createEmptyUserWithAddress() {
        $address = new Address();
        $entityManager->persist($address);
        $entityManager->flush();
        $user = new User($address);
        $entityManager->persist($user);
        $entityManager->flush();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T08:35:35.530

您可以使用 __construct() 创建关系

```
class User
{
    /**
     * @OneToOne(targetEntity="Address", cascade={"persist"})
     */
    private $address;

    public function __construct()
    {
        $address = new Address();
        $address->setUser($this);
        $this->address = $address;
    }
} 
```

# repository - 使用自托管 cgi 脚本克隆 Fossil 会产生“未知存储库”

> ID：10045202
> 
> 赞同：1
> 
> 时间：2012-04-06T14:53:55.147
> 
> 标签：repository, clone, file-not-found, fossil

我已经尝试了两个星期来设置化石来工作，如果我没有看到拥有存储库的优势，我现在就放弃了。我真的对此束手无策。

我已经在我的服务器和计算机上设置了化石。我的服务器是 linux，virtualmin 负责大部分托管。我的电脑是windows 7。

我的化石二进制文件都在我的路径中。

我选择使用自托管 cgi 脚本让化石主机本身。确切地说，与此页面标题标题下的脚本完全相同：“自动提供多个存储库的另一种解决方案” - [http://fossil-scm.org/fossil/wiki?name=Cookbook](http://fossil-scm.org/fossil/wiki?name=Cookbook)

它似乎有效，如果我将服务器的 ip 转到 /cgi-bin/p 文件，我可以看到我使用过的存储库列表：

```
 fossil init ider.fsl 
```

但是，我可以看到 wiki 和化石存储库的一般 web gui....

当我尝试使用以下命令克隆源时，从我的 Windows 机器：

```
 fossil clone  192.168.1.200:81/cgi-bin/p  ider 
```

我只听到不断的回声：

```
 unknown repository: 192.168.1.200:81/cgi-bin/p 
```

可能是 ider.fsl 文件上设置的权限吗？显然我是 SCM 的新手，但有一些非常错误的地方，因为我在文档中找不到任何描述此问题的内容或来自谷歌的任何参考资料，除非我试图找出是否要克隆恐龙......：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T20:29:32.517

只是在这里猜测，但从观察脚本来看，它似乎要求 repo 名称位于 CGI 变量`PATH_INFO`中，即脚本名称后面的 URL 位。

如果是这种情况，您需要使用以下命令克隆存储库：

```
fossil clone http://192.168.1.200:81/cgi-bin/p/ider ider
#                                             ^^^^^ 
```

Fossil 还有一个非常活跃的[邮件列表](http://www.fossil-scm.org/fossil/wiki?name=MailingList)，您应该可以从中获得帮助。

# android - TextView 中的空指针异常

> ID：10045211
> 
> 赞同：0
> 
> 时间：2012-04-06T14:54:24.960
> 
> 标签：android, roboguice

这是我的布局

```
<?xml version="1.0" encoding="utf-8"?>
      <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

       <TextView 
        android:id = "@+id/postQues"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Post A Question" />

          <TextView
              android:id="@+id/postAnswer"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_alignParentBottom="true"
              android:layout_alignParentLeft="true"
              android:layout_alignParentRight="true"
              android:text="Post Your Answer" />

          <Button
              android:id="@+id/submit"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:layout_alignParentBottom="true"
              android:layout_alignParentRight="true"
              android:clickable="true"     
              android:text="Submit" />
      </RelativeLayout> 
```

这是我的活动：

```
package com.qstack.quizbox;

import roboguice.activity.RoboActivity;
import roboguice.inject.ContentView;
import roboguice.inject.InjectView;
import android.content.DialogInterface;
import android.view.View.OnClickListener;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

import com.app.main.R;

@ContentView(R.layout.q_box)
public class QuizBox extends RoboActivity {

    @InjectView(R.id.postQues) TextView postQues;
    @InjectView(R.id.postAnswer) EditText postAnswer;
    //@InjectView(R.id.submit) Button submitA;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        PostQuestion postQuestion = new PostQuestion();
        postQues.setText(postQuestion.postQuestion());

        submitA.setOnClickListener(submitAnswerListener);
    }

     private OnClickListener submitAnswerListener = new OnClickListener() {
         //onClick view
         public void onClick(View v) {
             String answer;
             answer = postA.getText().toString();

             CheckAnswer checkAnswer = new CheckAnswer();

             if (answer == checkAnswer.checkAnswer()) {
                 postA.setText("Correct");
             }
         }
     };
} 
```

我在第 48 行收到空指针异常，这是因为 postQues = null 引起的。当我从代码中删除 postAnswer 时，没有空指针异常。我已经清理了我的项目和所有这些。任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-19T10:20:27.783

我还不能对你的答案发表评论，但人们忽略了这一点：他和我一样，正在使用`RoboGuice`注入观点和东西。

`onCreate()`这个框架的唯一目的是避免你不再需要使用`setContentView`的样板部分`findViewById()`！

至于他为什么得到一个`NullePointerException`，我不知道。我碰巧在我的一项活动中遇到了同样的问题，尽管它在所有其他活动上都很好......

**[编辑]**

我找到了解决方案：我混淆了两种视图的类型。如果你把`setContentView()`它放在它应该在的地方，你会得到错误。应用程序会说它不能分配。因为类型不匹配。因此你会得到一个不错的

> java.lang.RuntimeException：无法启动活动 ComponentInfo

但是如果你使用`RoboGuice`框架，你会得到这样的错误（在我的情况下我没有）。但是，您的所有观点都将是`null`.

希望有一天它会帮助某人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T14:59:02.363

```
protected void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.yourxml); // you have missed this.....
    PostQuestion postQuestion = new PostQuestion();
    postQues.setText(postQuestion.postQuestion());
    submitA.setOnClickListener(submitAnswerListener);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-28T09:22:37.680

我遇到了同样的问题，并遵循了 Mackovich 的建议。他正确地指出你不需要使用 RoboGuice 的 setContentView()，只要你用 @ContentView 注释你的活动。

就我而言，问题是由于我用 EditText 替换了 AutoCompleteTextView，但忘记在活动中用相应的@InjectView 进行相同的替换。这导致了我的 NullPointerException。

同样，就像 Mackovich 所说，如果我使用 setContentView() 而不是 @ContentView，stacktrace 会给我一个更有用的信息：

```
Caused by: java.lang.IllegalArgumentException: Can't assign class android.support.v7.internal.widget.TintEditText value android.support.v7.internal.widget.TintEditText@426ce048 to class android.widget.AutoCompleteTextView field usernameTextView 
```

我想这是反对使用 Roboguice 的 @ContentView 的一个论点，至少在进行修复以显示正确的堆栈跟踪之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T14:57:11.060

您需要先打电话`setContentView(R.layout.the_xml)`（在 之后`super.onCreate()`）。否则 RoboGuice 不知道将什么注入到您的变量中！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T14:59:06.013

您忘记了代码中的以下行，

```
setContentView(R.layout.main); 
```

应该在这行`onCreate()`方法之后

```
super.onCreate(savedInstanceState); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-06-19T10:39:15.543

你错过了那条线

```
 setContentView(R.layout.xml_filename); 
```

# c# - 使用 LINQ 在组分区内排序集合

> ID：10045214
> 
> 赞同：0
> 
> 时间：2012-04-06T14:54:28.470
> 
> 标签：c#, linq

我有简单的类型`Question`：

```
public class Question
{
    public string[] Tags { get; set; }
    public DateTime Created { get; set; }
} 
```

虽然我有一个问题列表，但我需要沿着标签列表（称为过滤器）过滤它们。与过滤器列表匹配的标签最多的问题应该放在结果集合中的较高位置。我为此写了表达式：

```
public IList<Question> GetSimiliar(IList<Questions> all, string[] filters)
{
    var questions = all.Select(
                        x => new 
                               { 
                                  MatchedTags = x.Tags
                                                 .Count(tag => filters.Contains(tag)), 
                                  Question = x 
                               })
                       .Where(x => x.MatchedTags > 0)
                       .OrderByDescending(x => x.MatchedTags)
                       .Select(x => x.Question);

    return questions.ToList();
} 
```

现在我需要对这种情况的支持，在这种情况下，我有多个问题具有相同数量的匹配标签。此类问题应按创建日期（从最新到最旧）进一步排序。

我想要的示例：

过滤器：标签 = [a,b,c]

要过滤的问题集合：

1.  q1 {标签 = [a]，创建 = 1939 }
2.  q2 {标签 = [b]，创建 = 1945 }
3.  q3 { 标签 = [a,b,c]，创建 = 1800 }
4.  q4 { 标签 = [a,b]，创建 = 2012 }
5.  q5 {标签 = [z]，创建 = 1999 }

结果 - 排序后的集合：

1.  q3
2.  第四季度
3.  q2
4.  q1

如何使用 linq 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:35:03.990

> 现在我需要对这种情况的支持，在这种情况下，我有多个问题具有相同数量的匹配标签。此类问题应按创建日期（从最新到最旧）**进一步排序。**

使用`ThenBy`或`ThenByDescending`对查询进行进一步排序。使用这些方法打破之前订购的关系。

```
.OrderByDescending(x => x.MatchedTags)
.ThenByDescending(x => x.Question.Created)
.Select(x => x.Question); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:00:24.213

[101 Linq Samples 页面](http://code.msdn.microsoft.com/101-LINQ-Samples-3fb9811b)有一个[嵌套分组示例](http://code.msdn.microsoft.com/LINQ-to-DataSets-Grouping-c62703ea#Nested)。此示例使用 group by 对每个客户的订单列表进行分区，首先按年份，然后按月份：

```
public void Linq43() 
{ 
    List<Customer> customers = GetCustomerList(); 

    var customerOrderGroups = 
        from c in customers 
        select 
            new 
            { 
                c.CompanyName, 
                YearGroups = 
                    from o in c.Orders 
                    group o by o.OrderDate.Year into yg 
                    select 
                        new 
                        { 
                            Year = yg.Key, 
                            MonthGroups = 
                                from o in yg 
                                group o by o.OrderDate.Month into mg 
                                select new { Month = mg.Key, Orders = mg } 
                        } 
            }; 

    ObjectDumper.Write(customerOrderGroups, 3); 
} 
```

# objective-c - UIImage 不显示

> ID：10045224
> 
> 赞同：0
> 
> 时间：2012-04-06T14:55:51.637
> 
> 标签：objective-c

我正在使用以下代码将 base64 字符串转换为 uiimage 并获取 NSDAta 但我无法获取图像。请检查以下代码。

base64String //包含base64字符串

```
 NSData *imageData = [base64String dataUsingEncoding:NSUTF8StringEncoding];
 UIImage *ret = [[UIImage alloc] initWithData:imageData]; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:14:27.667

`UIImage`不直接识别 base64 编码数据。查看[Mac 和 iPhone 上的 Base64 编码选项](http://cocoawithlove.com/2009/06/base64-encoding-options-on-mac-and.html)以获取有关 iOS 中 base64 解码的信息。它具有`NSData+Base64`将 base64 字符串解析为`NSData`.

# css - 如何让 3 个 div 显示在一行中，如果我调整浏览器大小不会换行？

> ID：10045226
> 
> 赞同：0
> 
> 时间：2012-04-06T14:56:00.220
> 
> 标签：css, html

请在此处查看演示：http: [//jsfiddle.net/Freewind/Vkp4U/](http://jsfiddle.net/Freewind/Vkp4U/)

的HTML：

```
<div class="outer">
    <div class="x">x</div>
    <div class="y">y</div>
    <div class="z">z</div>
</div>​ 
```

的CSS：

```
.outer {
    border: 1px solid black;
    overflow: scroll-x;
}

.x {
    width: 400px;
    border: 1px solid red;
    float:left;
}

.y {
    width: 400px;
    border: 1px solid yellow;
    float:left;
}

.z {
    width: 400px;
    border: 1px solid blue;
    float:left;
}​ 
```

如果我将浏览器调整为更小，如何让 3 个内部 div 显示在行中，不会换行？

限制：

1.  不应指定外部 div 的宽度
2.  内部 div 的宽度是固定的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:00:45.893

这可能有效：这里的想法是将外部设置为相对位置。现在所有的绝对子 div 都将引用它们的父相对 div。（此处演示：http: [//jsfiddle.net/Vkp4U/7/](http://jsfiddle.net/Vkp4U/7/)）

```
.outer {
    border: 1px solid black;
    overflow: scroll-x;
    position:relative;
}

.x {
    width: 400px;
    border: 1px solid red;
    float:left;
    position:absolute;
    left:0px;
}

.y {
    width: 400px;
    border: 1px solid yellow;
    float:left;
    position:absolute;
    left:400px;
}

.z {
    width: 400px;
    border: 1px solid blue;
    float:left;
    position:absolute;
    left:800px;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:01:29.330

在 CSS 宽度中使用 %...

```
.outer {
    border: 1px solid black;
    overflow: scroll-x;
}

.x {
    width: 30%;
    border: 1px solid red;
    float:left;
}

.y {
    width: 30%;
    border: 1px solid yellow;
    float:left;
}

.z {
    width: 30%;
    border: 1px solid blue;
    float:left;
}​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:01:33.370

嗨，您可以像这样在您的 css 属性中定义显示表格和表格单元格

**CSS**

```
.outer {
    border: 1px solid black;
    overflow: scroll-x;

    display:table;
}

.x {
    width: 400px;
    border: 1px solid red;
    display:table-cell;
}

.y {
    width: 400px;
    border: 1px solid yellow;
    display:table-cell;
}

.z {
    width: 400px;
    border: 1px solid blue;
    display:table-cell;
} 
```

**HTML**

```
<div class="outer">
<div class="x">x</div>
<div class="y">y</div>
<div class="z">z</div>
</div>​
​ 
```

现场演示[http://jsfiddle.net/Vkp4U/5/](http://jsfiddle.net/Vkp4U/5/)

# coldfusion - 如何告诉 ColdFusion 9.0.1 使用 /tmp 以外的目录？

> ID：10045230
> 
> 赞同：1
> 
> 时间：2012-04-06T14:56:38.213
> 
> 标签：coldfusion

我今天安装了 ColdFusion 9.0.0，我正在尝试升级到 9.0.1。

*   Linux 64位环境。
*   我没有root访问权限。
*   /tmp 似乎没有足够的空间来安装 9.0.1

我在 /opt/coldfusion9/Adobe_ColdFusion_9.0.1_InstallLog.log 中发现了以下错误

```
Install File:             /tmp/515453.tmp/cf-multi-startup
                          Status: ERROR
                          Additional Notes: ERROR - ZeroGlq: No space left on device

Install File:             /tmp/515453.tmp/cf-init.sh
                          Status: ERROR
                          Additional Notes: ERROR - ZeroGlq: No space left on device 
```

我尝试了 -D IATEMPDIR=/opt/temp，但安装程序说由于 /tmp 中空间不足，它正在尝试使用 /home/coldfusion。无论如何，它都会尝试使用 /tmp。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T13:46:05.120

这是我的最终脚本。我必须将 /tmp 和 /home 填充到 100% 才能从 bin 文件中获得不错的错误响应。我确信我的 Linux 管理员非常高兴。

```
cd /opt/coldfusion9/bin
IATEMPDIR=/home/coldfusion
export IATEMPDIR
LAX_DEBUG=1
export LAX_DEBUG
./ColdFusion_update_901_WWEJ_linux64.bin 
```

# flash - 服务器端保存带有参数的独立 SWF

> ID：10045231
> 
> 赞同：0
> 
> 时间：2012-04-06T14:56:42.953
> 
> 标签：flash, flv

我有这个系统，客户上传公司的徽标，我调整它的大小并将其放在 SWF 文件中进行预览（使用一些 FlashVars 变量），以便预览动画的外观。

有没有办法将此预览另存为独立的 SWF 文件，然后另存为 FLV 文件？

对于第二个问题（转换问题），除了 ffmpeg 还有其他可能性吗？

谢谢！

**更新：**

实际上我想知道这些家伙[http://www.flashbannernow.com](http://www.flashbannernow.com)是如何保存他们的 flash 横幅的，因为他们在嵌入代码中没有任何 GET 或 Flashvars 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:45:53.087

'将此预览另存为独立 SWF' 的替代方法是将当前的 swf 修改为有意动态的，采用表示图像的变量。

所以在您的服务器上，您将拥有： -- www.yourserver.com/some_dir/app_dir/your.swf?image_id=abc.jpg -- www.yourserver.com/some_dir/app_dir/uploaded_images_dir/

当前，您的客户端将图像发送给您，您对其进行操作，然后将它们上传到您的服务器，upload_images_dir。

然后，当您的 swf 被调用时，它将读取 GET 值并使用它将图像从 upload_images_dir 加载到 your_mc。

您的客户只需输入您的 url 并附加图像名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T17:07:57.627

经过一些研究，我的一个朋友给了我一个很好的例子[http://cookbooks.adobe.com/post_Screen_or_Stage_Capture_with_Flash-18504.html](http://cookbooks.adobe.com/post_Screen_or_Stage_Capture_with_Flash-18504.html)它实际上是**AS 3 的一个组件，**它**可以进行屏幕截图**，然后将其**保存为 FLV**实际上是一项很棒的工作，不需要任何许可证。

这里是创建 FLV 文件的类[http://www.zeropointnine.com/blog/simpleflvwriteras-as3-class-to-create-flvs/](http://www.zeropointnine.com/blog/simpleflvwriteras-as3-class-to-create-flvs/)

在此之后，有人可以轻松地使用 ffmpeg 进行压缩或其他文件格式。

# asp.net - 使用 TortoiseSVN，团队可以将 .svn 和 _svn 用于本地文件吗？

> ID：10045232
> 
> 赞同：0
> 
> 时间：2012-04-06T14:56:43.190
> 
> 标签：asp.net, tortoisesvn

我的几个开发人员团队使用 TortoiseSVN。我注意到在过去某个时间点进行更新后，我不再使用**_svn**（下划线）作为 SVN 本地隐藏文件的标准，而是使用**.svn**（点）。这会导致我们的存储库或 SVN 的正常功能出现任何问题吗？

**更新**

我们是一家 .net 商店，所以我想最初在这里指定 _svn 文件是因为一个[似乎不再存在的老问题](https://stackoverflow.com/questions/5513331/tortoisesvn-is-there-any-need-for-svn-instead-of-svn-anymore)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:16:18.903

这不是基于存储库，而是基于 TortoiseSVN 的配置。我不知道你为什么使用“_svn”，据我所知，它是用于与.net 相关的。为什么不使用 SVN 中的默认值“.svn”。

# c# - 已部署应用程序中的 HttpContext.User.Identity.Name

> ID：10045234
> 
> 赞同：1
> 
> 时间：2012-04-06T14:56:45.517
> 
> 标签：c#, asp.net, iis, asp.net-mvc-2, authentication

对于 ASP.NET MVC 2 应用程序，我们`HttpContext.User.Identity.Name`用于获取用户名以进行身份​​验证。这在测试时工作正常。数据库中的用户可以访问他们有权访问的区域，否则会被重定向到 401 页面。401 页面显示他们的用户名，说明此用户无权访问此内容。

但是，在已部署的环境中，所有访问应用程序任何部分的尝试都会重定向到 401 页面，并且显示的用户名是空白的！

我们如何使部署的应用程序能够访问请求的用户名？

根据我的研究，我应该转到以下屏幕并启用 Windows 身份验证，但它不在列表中！

![在此处输入图像描述](../Images/6c5c32f4f91429d6da8276642ba06cb7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:26:25.593

我们遇到了这样的问题，我们最终做的是关闭 IIS 中的匿名访问。记得检查底部的集成框。希望这会有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T17:29:27.173

啊，如果您使用的是 IIS 7，您可能需要先安装它！[这是一个很好的概述。](http://www.iis.net/ConfigReference/system.webServer/security/authentication/windowsAuthentication)自由贸易协定：

> IIS 7 的默认安装不包括 Windows 身份验证角色服务。要在 IIS 上使用 Windows 身份验证，您必须安装角色服务，为您的网站或应用程序禁用匿名身份验证，然后为站点或应用程序启用 Windows 身份验证。

如果您没有将其视为一个选项，则可能没有安装它。

（来自我的 Winodws 7 机器，）转到您的开始菜单并输入：*打开或关闭 Windows 功能*。

接下来，在对话框的树形视图中，转到*Internet 信息服务 - 万维网服务 - 安全*，然后选中***Windows 身份验证***复选框。

# c# - Lockbits 跨越 1bpp 索引图像字节边界

> ID：10045238
> 
> 赞同：1
> 
> 时间：2012-04-06T14:56:54.217
> 
> 标签：c#, windows, graphics

我正在从一个 1bpp 索引图像剪切和粘贴到一个新图像。

一切正常，直到起始像素是 8 的除数。在下面的代码中，步幅等于相对于矩形宽度的值，直到我遇到字节边界。那么步幅就等于整个页面的宽度。

```
var croppedRect = new Rectangle((int)left, (int)top, (int)width, (int)height);
BitmapData croppedSource = _bitmapImage.LockBits(croppedRect, ImageLockMode.ReadWrite, BitmapImage.PixelFormat);
int stride = croppedSource.Stride; 
```

这是一个问题，因为 Marshal 不是将我选择的区域粘贴到新图像中，而是复制了一个横截面，即所选区域的高度，以及页面的整个宽度。

```
int numBytes = stride * (int)height;
var srcData = new byte[numBytes];

Marshal.Copy(croppedSource.Scan0, srcData, 0, numBytes);
Marshal.Copy(srcData, 0, croppedDest.Scan0, numBytes);
destBmp.UnlockBits(croppedDest); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T14:08:00.633

这是我的代码，任何有兴趣的人。可能有一个更优化的解决方案，但这是可行的。我正在创建一个白色的整个页面，并在我通过它时复制新页面中的选定区域。感谢 Bob Powell 的 SetIndexedPixel 例程。

```
protected int GetIndexedPixel(int x, int y, BitmapData bmd)
{
    var index = y * bmd.Stride + (x >> 3);
    var p = Marshal.ReadByte(bmd.Scan0, index);
    var mask = (byte)(0x80 >> (x & 0x7));
    return p &= mask;
}

protected void SetIndexedPixel(int x, int y, BitmapData bmd, bool pixel)
{
    int index = y * bmd.Stride + (x >> 3);
    byte p = Marshal.ReadByte(bmd.Scan0, index);
    byte mask = (byte)(0x80 >> (x & 0x7));
    if (pixel)
        p &= (byte)(mask ^ 0xff);
    else
        p |= mask;
    Marshal.WriteByte(bmd.Scan0, index, p);
}

public DocAppImage CutToNew(int left, int top, int width, int height, int pageWidth, int pageHeight)
{
    var destBmp = new Bitmap(pageWidth, pageHeight, BitmapImage.PixelFormat);
    var pageRect = new Rectangle(0, 0, pageWidth, pageHeight);

    var pageData = destBmp.LockBits(pageRect, ImageLockMode.WriteOnly, BitmapImage.PixelFormat);
    var croppedRect = new Rectangle(left, top, width, height);
    var croppedSource = BitmapImage.LockBits(croppedRect, ImageLockMode.ReadWrite, BitmapImage.PixelFormat);

    for (var y = 0; y < pageHeight; y++)
        for (var x = 0; x < pageWidth; x++)
        {
            if (y >= top && y <= top + height && x >= left && x <= width + left)
            {
                SetIndexedPixel(x, y, pageData,
                                GetIndexedPixel(x - left, y - top, croppedSource) == 0 ? true : false);
                SetIndexedPixel(x - left, y - top, croppedSource, false); //Blank area in original
            }
            else
                SetIndexedPixel(x, y, pageData, false);  //Fill the remainder of the page with white.
        }

    destBmp.UnlockBits(pageData);

    var retVal = new DocAppImage { BitmapImage = destBmp };
    destBmp.Dispose();

    BitmapImage.UnlockBits(croppedSource);
    SaveBitmapToFileImage(BitmapImage);

    return retVal;
} 
```

# xml - 前同级 [1] 不是最后一个

> ID：10045245
> 
> 赞同：2
> 
> 时间：2012-04-06T14:57:24.907
> 
> 标签：xml, xslt, xpath, xslt-2.0

我要感谢这个社区最近对我的帮助很大。你是我的救星：）

我正在尝试验证数字（x）何时与前一个不同
所以我的列表已排序，首先我有：

```
<xsl:apply-templates select="house">
    <xsl:sort select="./point/x"/>
</xsl:apply-templates> 
```

重要的部分是：

```
<xsl:template match="house">

    <xsl:if test="./point/x != preceding-sibling::house[1]/point/x">
        <br/> 
        <xsl:value-of select="preceding-sibling::house[1]/point/x"/>
             value changed to <xsl:value-of select="./point/x"/>        
    </xsl:if>

    <!-- Just printing -->
    <br/>
    <td><xsl:value-of select="./point/x"/></td>
    <td><xsl:value-of select="./point/y"/></td>

</xsl:template> 
```

注意我在打印中有 2 个值，x 和 y，但我只使用 x
我希望输出类似于：
xy
00
01
0 值更改为 1
10
11

不知何故，我的结果得到了错误的前一个数字

00
1 值变为 0
01
0 值变为 1
10
0 值变为 1
11

进展：我发现通过删除排序输出是正确的

00
0 值更改为 1
10
1 值更改为 0
01
0 值更改为 1
11

所以我现在的问题是......我该怎么做这个程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:38:29.950

不是很好，但是如果你必须知道*"x 的前一个值按照一定的顺序"*，那么你必须再次对节点进行排序并获取正确的节点：

```
<xsl:template match="house">
    <xsl:variable name="current-position" select="position()" />
    <xsl:variable name="preceding-x-ordered">
      <xsl:for-each select="../house">
        <xsl:sort select="point/x" />
        <xsl:if test="position() = $current-position - 1">
          <xsl:value-of select="point/x" />
        </xsl:if>
      </xsl:for-each>
    </xsl:variable>

    <xsl:if test="position() &gt; 1 and point/x != $preceding-x-ordered">
        <br/> 
        <xsl:value-of select="$preceding-x-ordered"/>
        <xsl:text> value changed to </xsl:text>
        <xsl:value-of select="point/x"/>        
    </xsl:if>

    <!-- Just printing -->
    <br/>
    <td><xsl:value-of select="point/x"/></td>
    <td><xsl:value-of select="point/y"/></td>
</xsl:template> 
```

XSLT 应该没有副作用，这意味着处理器可以按照它希望的任何顺序处理模板，而不会改变整体结果。不“知道”它在循环的最后一次迭代中做了什么是该要求的结果。因此，`preceding-sibling`轴无法知道之前处理了哪个节点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-07T02:43:43.993

**这是一个更有效的（线性 vs O(N^2*log(N)) XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output method="text"/>

 <xsl:key name="kHouseById" match="house" use="generate-id()"/>

 <xsl:variable name="vIdsOfSorted">
  <xsl:for-each select="/*/house">
    <xsl:sort select="point/x" data-type="number"/>
    <xsl:copy-of select="concat(generate-id(), ' ')"/>
  </xsl:for-each>
 </xsl:variable>

 <xsl:template match="/*">
  <xsl:call-template name="traverseIds">
   <xsl:with-param name="pIds" select="concat($vIdsOfSorted, ' ')"/>
   <xsl:with-param name="pLength" select="count(house)"/>
  </xsl:call-template>
 </xsl:template>

 <xsl:template name="traverseIds">
   <xsl:param name="pIds"/>
   <xsl:param name="pLength"/>
   <xsl:param name="pPos" select="1"/>
   <xsl:param name="pPrevId" select="''"/>

   <xsl:if test="not($pPos > $pLength)">
     <xsl:variable name="vId" select="substring-before($pIds, ' ')"/>
     <xsl:variable name="vHouse" select="key('kHouseById', $vId)"/>

     <xsl:value-of select=
      "concat('&#xA;(', $vHouse/point/x, ',', $vHouse/point/y, ')')"/>
       <xsl:if test="not($pPos >= $pLength)">
        <xsl:variable name="vNextId" select=
         "substring-before(substring-after($pIds, ' '), ' ')"/>

        <xsl:variable name="vNextHouse" select="key('kHouseById', $vNextId)"/>

        <xsl:if test="not($vHouse/point/x = $vNextHouse/point/x)">
         <xsl:value-of select=
           "concat('&#xA;value changed to ', $vNextHouse/point/x)"/>
        </xsl:if>

        <xsl:call-template name="traverseIds">
          <xsl:with-param name="pIds" select="substring-after($pIds, ' ')"/>
          <xsl:with-param name="pLength" select="$pLength"/>
                <xsl:with-param name="pPos" select="$pPos+1"/>
                <xsl:with-param name="pPrevId" select="$vId"/>
        </xsl:call-template>
       </xsl:if>
     </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>
  <house>
    <point>
      <x>1</x><y>0</y>
    </point>
  </house>
  <house>
    <point>
      <x>0</x><y>1</y>
    </point>
  </house>
  <house>
    <point>
      <x>0</x><y>0</y>
    </point>
  </house>
  <house>
    <point>
      <x>1</x><y>1</y>
    </point>
  </house>
</t> 
```

**产生了想要的正确结果**：

```
(0,1)
(0,0)
value changed to 1
(1,0)
(1,1) 
```

**如果您不喜欢递归，这里有一个使用`xxx:node-set()`扩展函数**的非递归 XSLT 1.0 解决方案：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="http://exslt.org/common">
 <xsl:output method="text"/>
 <xsl:variable name="vrtfSorted">
        <xsl:for-each select="/*/house">
            <xsl:sort select="point/x" data-type="number"/>
            <xsl:copy-of select="."/>
        </xsl:for-each>
 </xsl:variable>

 <xsl:variable name="vSorted" select="ext:node-set($vrtfSorted)/*"/>

    <xsl:template match="/*">
        <xsl:for-each select="$vSorted">
            <xsl:variable name="vPos" select="position()"/>
            <xsl:if test=
              "$vPos > 1 
             and 
               not(point/x = $vSorted[position()=$vPos -1]/point/x)">
                <xsl:text>&#xA;</xsl:text>
                <xsl:value-of select="concat('value changed to ', point/x)"/>
            </xsl:if>
            <xsl:text>&#xA;</xsl:text>
            <xsl:value-of select="concat('(',point/x,',',point/y, ')')"/>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

**产生完全相同的正确结果**。

* * *

**二、XSLT 2.0 解决方案**

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema">
 <xsl:output method="text"/>

 <xsl:template match="/*">
  <xsl:variable name="vSorted">
   <xsl:perform-sort select="house">
     <xsl:sort select="xs:integer(point/x)"/>
   </xsl:perform-sort>
  </xsl:variable>

  <xsl:sequence select=
   "(for $n   in 2 to count($vSorted/*),
        $n-1 in $n -1,
        $vNewX in $vSorted/*[$n]/point/x,
        $vOldX in $vSorted/*[$n-1]/point/x,
        $vNewY in $vSorted/*[$n]/point/y,
        $vOldY in $vSorted/*[$n-1]/point/y,
        $remark in
              if($vNewX ne $vOldX)
                then concat('&#xA;value changed to ', $vNewX, '&#xA;')
                else '&#xA;'
     return
       concat('(',$vOldX,',',$vOldY, ')', $remark)
     ),
     concat('(',$vSorted/*[last()]/point/x,',',
                $vSorted/*[last()]/point/y, ')'
            )
   "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于相同的 XML 文档（上图）时，会产生相同的正确结果：**

```
 (0,1)
 (0,0)
value changed to 1
 (1,0)
 (1,1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T22:42:45.467

这是另一种方法。你可能想从组的角度来考虑。正如您已标记问题 xslt 2.0，这确实带有一些有用的分组功能（在 xslt 1.0 中，您必须使用 Meunchian 分组技术）

实际上，您是按**点/x**值对房屋进行分组，因此您可以像这样得到每个不同的组：

```
<xsl:for-each-group select="house" group-by="point/x">
   <xsl:sort select="point/x"/> 
```

然后你可以像这样遍历组内的房屋：

```
<xsl:for-each select="current-group()">
    <xsl:sort select="point/y"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="2.0">
   <xsl:output method="text"/>

   <xsl:template match="houses">
      <xsl:text>xy&#13;</xsl:text>
      <xsl:for-each-group select="house" group-by="point/x">
         <xsl:sort select="point/x"/>
         <xsl:if test="position() &gt; 1">
            <xsl:value-of select="concat(' value changed to ', point/x, '&#13;')" />
         </xsl:if>
         <xsl:for-each select="current-group()">
            <xsl:sort select="point/y"/>
            <xsl:value-of select="concat(point/x, point/y, '&#13;')" />
         </xsl:for-each>
         <xsl:if test="position() &lt; last()">
            <xsl:value-of select="point/x" />
         </xsl:if>
      </xsl:for-each-group>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于以下 XML....

```
<houses>
    <house><point><x>1</x><y>0</y></point></house>
    <house><point><x>2</x><y>1</y></point></house>
    <house><point><x>0</x><y>1</y></point></house>
    <house><point><x>1</x><y>1</y></point></house>
    <house><point><x>0</x><y>0</y></point></house>
    <house><point><x>2</x><y>0</y></point></house>
</houses> 
```

以下是输出：

```
xy
00
01
0 value changed to 1
10
11
1 value changed to 2
20
21 
```

# sql-server-2005 - 在仅提供一个输入变量的同时删除整行

> ID：10045247
> 
> 赞同：0
> 
> 时间：2012-04-06T14:57:28.440
> 
> 标签：sql-server-2005

我有一个包含实体的表：reg_num、user_name、phone_num、designation

我想编写存储过程，只需输入 reg_num 值即可删除一行的全部数据。

```
create proc del @reg_num nchar(10)
as
delete reg_num, user_name, phone_num, designation from nameTable 
where reg_num = @reg_num 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T14:59:29.127

您没有为删除语句指定列：

```
create proc del @reg_num nchar(10)
as
delete from nameTable 
where reg_num = @reg_num 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:00:33.550

您只需要指定表名，不需要列出的列。

IE

```
create proc del @reg_num nchar(10)
as
delete from nameTable 
where reg_num = @reg_num 
```

另见： [http ://www.w3schools.com/sql/sql_delete.asp](http://www.w3schools.com/sql/sql_delete.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:01:10.127

删除时，您必须遵循如下语法：

```
declare @regNum int
set @regnum = 1

delete from [table] where regnum = @regnum 
```

在存储过程中，您需要这样做：

```
create procedure test (@regnum int) as 
begin
delete from [table] where regnum = @regnum
end 
```

# facebook - 将照片从 Android 应用程序直接发布到 Facebook 页面时间线

> ID：10045248
> 
> 赞同：1
> 
> 时间：2012-04-06T14:57:43.120
> 
> 标签：facebook, facebook-android-sdk, facebook-timeline

我有一个 Android 应用程序，我想从中直接将照片发布到 Facebook 页面的时间线。我不希望照片进入相册，而是直接进入时间线。

有没有人这样做过？

[我在http://facebook.stackoverflow.com/questions/8662460/android-app-how-to-upload-photo-from-sdcard-to-facebook-wall](http://facebook.stackoverflow.com/questions/8662460/android-app-how-to-upload-photo-from-sdcard-to-facebook-wall)看到了答案，它描述了将照片发布到 Wall Photos 相册; 但是，当我尝试获取页面的专辑列表时，我没有得到任何专辑。这个页面确实有至少一个带有图片的时间线帖子，所以我希望它有一个 Wall Photos 相册，但我没有找回它。与普通 Facebook 用户相比，Pages 的相册工作方式是否不同，或者 Page 是否需要授予应用程序一些权限？这是我用来获取页面相册的代码：

```
String wallAlbumID = null;
String response = getFacebook().request("<pageid>/albums");
JSONObject json = new JSONObject(response);
JSONArray albums = json.getJSONArray("data");
for (int i =0; i < albums.length(); i++) {
    JSONObject album = albums.getJSONObject(i);                     
    if (album.getString("type").equalsIgnoreCase("wall")) {
        wallAlbumID = album.getString("id");
        Log.d("JSON", wallAlbumID);
        break;
    }
} 
```

有谁知道将照片从 Android 应用程序直接发布到主页时间轴的方法？我可以将照片上传到用户的相册，然后在主页的时间线上创建指向照片的链接，但这实际上并没有将照片放在主页的时间线上。我想把照片放在时间线上，就像你点击“上传照片”时从 Facebook 网络界面发生的事情一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:19:59.040

发布到 Facebook 的照片将始终归入相册。如果您没有从用户的相册列表中指定相册 ID，上传的图片将自动上传到“Wall Photos”相册。

使用该`publish_stream`方法将照片发布到时间线，它将显示在时间线和墙相册中。或者使用仅带有图片的提要对话框：[https ://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# vb.net - 如何在 RDLC 报告中显示图像？

> ID：10045252
> 
> 赞同：0
> 
> 时间：2012-04-06T14:57:55.240
> 
> 标签：vb.net, rdlc

我有一个专栏，我希望图像出来，但在运行时只出现名称

> MIMEType：image/jpeg 来源：数据库值：=Fields!Image.Value

我看到了这段代码，但 idk 要把它：

> 内存流毫秒 = 新的内存流（）；
> 
> Image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
> 
> 返回 ms.ToArray();

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T08:30:20.443

做类似的事情

```
 Bitmap _img = new Bitmap(10, 10);
        public byte[] MyPicture
        {
            get
            {
                // Generate bitmap

                // Convert to stream
                MemoryStream ms = new MemoryStream();
                __img.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
                return ms.ToArray();
            }
        } 
```

# pseudocode - 访问类变量的伪代码

> ID：10045257
> 
> 赞同：1
> 
> 时间：2012-04-06T14:58:13.877
> 
> 标签：pseudocode, class-variables

访问类变量应该如何用伪代码编写？

仅使用变量名称是不明确的，因为它们不会被定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:19:49.017

基本上，在任何面向对象语言中访问类级别变量时，您都希望确保调用 Accessor/Mutator 方法。

伪代码中的访问器：

```
Call Accessor Method
Accessor returns a the variables value. 
```

相对于 Mutators ：

```
Call Mutator method (setVariable()) and pass necessary parameters.
No value gets returned, although sometimes true or false is returned. 
```

希望这可以帮助。

# c++ - WINAPI 的消息循环让我抓狂

> ID：10045259
> 
> 赞同：1
> 
> 时间：2012-04-06T14:58:19.470
> 
> 标签：c++, multithreading, winapi, java-native-interface

我一直在尝试使用 JNI 实现简单的低级 keyhook，并且一切顺利，直到我发现当 DLL 处于无限循环（消息循环）时我无法调用这些方法。所以我决定创建新线程，但不知何故，在我创建它之后，消息循环在它自己的循环上运行，低级 keyhook 停止响应，这意味着它不再调用 keyproc，我不知道这是为什么？还有其他解决方法吗？我需要能够在键盘挂钩仍在运行时调用 DLL 的方法。

我当前的代码很简单

注册键盘钩子：

```
keyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, keyboardProc, hInstance, 0); 
```

启动线程

```
HANDLE threadHandle = CreateThread(NULL, 0, ThreadProc, NULL, 0, &threadId); 
```

我的键盘 proc 和 threadproc 如下：

```
DWORD WINAPI ThreadProc(LPVOID lpVoid) {
    MSG msg;
    while(GetMessage(&msg, NULL, 0, 0)) {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }
    return 0;
}

LRESULT CALLBACK keyboardProc(int nCode, WPARAM wParam, LPARAM lParam) {
    KBDLLHOOKSTRUCT keyEvent = *((KBDLLHOOKSTRUCT*)lParam);
    jint vkCode = keyEvent.vkCode;
    jint flags = keyEvent.flags;
    jint action = wParam;
    (*globalEnv).CallVoidMethod(globalObj, keyboardMethodId, vkCode, flags, action);
    return CallNextHookEx(NULL, nCode, wParam, lParam);
} 
```

我哪里错了？即使我为从未调用过的 keyproc 添加简单的日志记录，我也确信它不是 java。但是，如果我停止使用线程并在主线程上运行消息循环，它工作正常，但 DLL 不会响应它之后的方法调用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:09:25.247

您需要在调用 SetWindowsHookEx() 的同一线程上抽取消息循环。因此，只需将调用移至您的 ThreadProc()。当然，请注意您的 CallVoidMethod() 回调也在同一个线程上运行，因此请小心您在该函数中所做的事情。您访问的任何共享状态都需要使用锁进行保护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T15:04:33.393

您正在尝试安装桌面范围的挂钩，该挂钩跨越桌面的所有进程。也就是说，您的 DLL 被映射到具有特定于进程的全局变量集的多个进程中。你在其他进程中没有valid `globalEnv`，你可能会遇到访问冲突或类似的错误（全局变量可以用共享数据段创建，详见[这篇文章](http://www.codeproject.com/Articles/2082/API-hooking-revealed)）。

要安装线程特定的钩子，您将需要不同类型的钩子（`WH_KEYBOARD_LL`仅限全局！）和非零的最后一个参数`SetWindowsHookEx`。

# python - IRC bot 在不中断主循环的情况下使循环睡眠

> ID：10045261
> 
> 赞同：2
> 
> 时间：2012-04-06T14:58:34.060
> 
> 标签：python, sockets, irc, feedparser

我一直在尝试编写 IRC 机器人，而我已经成功了。我在执行我想做的事情时遇到问题。代码工作正常，但我有以下问题：

因为当我使用 time.sleep(seconds) 添加第二个 While 时，机器人使用 While 循环从 IRC 读取命令，所以机器人无法连接，因为它读取了我的第二个循环并暂停连接以不及时响应：PING这样做会断开连接。我一直在搜索，但越是搜索越让我感到困惑，因为我不知道我应该尝试什么。

无堆栈，多线程，子进程。有这么多的结果，我只是变得更加困惑。那么我正在尝试 RSS 机器人的最佳方法是什么，如果我在 IRC 频道中使用命令 !rss，机器人工作正常，但我需要它每 10 分钟检查一次新的，如果使用睡眠命令，主循环会混乱向上。

这是我的代码：

```
#!/usr/bin/python

import socket, sys, string, time, feedparser, hashlib
port = 6667
nick = "RSSbot"
host = 'irc.server.com'
name =  "RSSBOT"
channel = '#debug'
ident = 'rssbot'
irc = socket.socket()
irc.connect ( (host, port) )
irc.send ( 'NICK ' + nick + '\r\n' )
irc.send ( 'USER ' + ident + ' ' +  ident + ' ' + ident + ' :rssbot\r\n' )

def readRss():
    feedurl = feedparser.parse("http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=username")
    newest = feedurl['items'][0].title
    newest = newest.replace("username:","")
    msg = newest.split("http://")
    title = msg[0]
    url = msg[1]
    url = "http://" + url
    e = feedurl.entries[2]
    threadurl = e.link
    id = hashlib.md5(url + title).hexdigest()
    irc.send ("PRIVMSG #debug :Tittle:%s\r\n" % newest)
    irc.send ("PRIVMSG #debug :URL: %s\r\n" % url)
    irc.send ("PRIVMSG #debug :MD5: %s\r\n" % id)
while 1:
    data = irc.recv ( 1024 )
    print(data)

    if data.find ( '376' ) != -1:
        irc.send( 'JOIN ' + channel + '\r\n' )
    if data.find ( 'PING' ) != -1:
        irc.send( 'PONG ' + data.split() [1] + '\r\n')
    if data.find ( '!rss' ) != -1:
        feedurl = feedparser.parse("http://api.twitter.com/1/statuses/user_timeline.rss?screen_name=username")
        newest = feedurl['items'][0].title
        newest = newest.replace("username:","")
        msg = newest.split("http://")
        title = msg[0]
        url = msg[1]
        url = "http://" + url
        #e = feedurl.entries[2]
        #threadurl = e.link
        id = hashlib.md5(url + title).hexdigest()
        irc.send ("PRIVMSG #debug :Tittle:%s\r\n" % newest)
        irc.send ("PRIVMSG #debug :URL: %s\r\n" % url)
        irc.send ("PRIVMSG #debug :MD5: %s\r\n" % id)
    while true:
        readRss()
        time.sleep(300) 
```

如果我在 while 1: 中添加一个 while :true 和 time.sleep(300)，则 sleep 命令与 while 1: 循环冲突，我需要做类似的事情，这样我就可以每 x 分钟检查一次新的提要。我能做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:05:49.007

而不是一个新的循环，使用一个单独的计时器。

```
import time
last_update = time.time()

while 1:
   # the rest of your while loop as usual
   now = time.time()
   if now - last_update > 300:
       # you've waited 300 seconds
       # check feeds or whatever 
       last_update = now 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T20:52:07.117

我用我的 irc 机器人上的线程模块处理了这个问题 检查项目这可能会对你有所帮助[https://github.com/mouuff/MouBot](https://github.com/mouuff/MouBot)（我调用了函数 ircloop 这将回答服务器 ping 并做机器人工作:)

# haskell - 使用谷物通过句柄发送数据

> ID：10045262
> 
> 赞同：4
> 
> 时间：2012-04-06T14:58:44.163
> 
> 标签：haskell

有人可以向我展示一个使用谷物（ ）通过从包中或包中`Data.Serialize`接收的句柄发送数据的示例吗？`connectTo``accept``Network`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T22:48:25.333

好的，当使用几个包时，这真的很容易：

```
import Data.Conduit
import Data.Conduit.Binary
import Data.Conduit.Cereal
import Data.Serialize

-- where h is a `Handle` to a socket or whatever

-- Write data
a = 123 :: Integer
runResourceT $ sourcePut (put a) $$ sinkHandle h

-- Read data
a <- runResourceT $ sourceHandle h $$ sinkGet get 
```

**经过一些测试，似乎我不能多次发送接收...**

# c++ - 不能用变量设置可变长度

> ID：10045266
> 
> 赞同：3
> 
> 时间：2012-04-06T14:59:01.110
> 
> 标签：c++, arrays

我现在要做的是创建一个长度由变量定义的数组。但是，当我将变量放入数组长度时，它给了我一个“非 POD 元素类型'glm::vec2'的可变长度数组”错误。但是，如果我用实际数字替换变量，错误就会消失。为什么会发生这种情况，我该如何解决？

```
 int numtriangles = sector1.numtriangles;

glm::vec2 tex[test]; //Using a variable generates an error
glm::vec3 vertices[10]; //No error here 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T15:01:50.510

标准 C++中不能有**可变长度数组 (VLA)**。
C++ 标准不允许可变长度数组。在 C++ 中，数组的长度需要是编译时间常数。一些编译器确实支持 VLA 作为编译器扩展，但使用它们会使您的代码在其他编译器中不可移植。

您可以使用，[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)而不是 VLA。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T15:04:38.807

看到这个问题[有没有办法用非常量变量初始化数组？(C++)](https://stackoverflow.com/questions/972705/is-there-a-way-to-initialize-an-array-with-non-constant-variables-c)

简短的回答是不，你不能直接这样做。但是，您可以使用类似的方法获得相同的效果

```
int arraySize = 10;
int * myArray = new int[arraySize]; 
```

Now`myArray`是指向数组的指针，您可以像访问数组一样访问它`myArray[0]`，等等。

您还可以使用一个向量，它允许您拥有一个可变长度的数组。我的示例允许您使用变量初始化器创建一个数组，但`myArray`在我的示例中只有 10 个项目长。如果您不确定数组将使用矢量多长时间，您可以将项目推入并弹出它。

还要记住我的例子，因为你已经动态分配了内存，当你完成数组时，你需要通过执行类似的操作来释放该内存

```
delete[] myArray; 
```

这是一个小示例应用程序来说明这一点

```
#include <iostream>
using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    int arraySize = 10;
    int * myArray = new int[arraySize];
    myArray[0] = 1;
    cout << myArray[0] << endl;

    delete[] myArray;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:06:29.723

使用 STL。如果你想要一个可变长度数组，你可以在下面使用向量`#include<vector>`

本机 c++ 数组不包含可变长度数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T15:13:35.180

当您使用长度说明符声明数组时，只允许使用常量。

实际上是在编译程序时评估数组长度。

但是请注意，在 C++ 中声明`int test[];`像编译器无法知道为变量分配多少空间是非法的。

如果没有长度说明符，就没有为数组保留的实际内存，您必须求助于使用指针和动态内存分配：

```
int * test = new int[12];
// or
int * test = new int[val]; // variable works here

// and don't forget to free it
delete [] test; 
```

使用`int test[12]`实际上创建了一个数组，该数组在编译时一劳永逸地静态初始化以包含 12 个整数。永远不要尝试`delete [] test`使用这种方式声明的变量，因为它肯定会让你的程序崩溃。

准确地说，如果数组在函数中声明，它将使用程序堆栈上的空间，如果在全局上下文中声明，则将使用程序数据内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T15:36:29.683

C++ 不支持声明可变长度数组。所以要使用一个长度的数组，你可以

1.  假设一个大数字是数组的最大可能长度。现在声明一个该大小的数组。并通过假设它是您想要的长度的数组来使用它。

    ```
    #define MAX_LENGTH 1000000000
    glm::vec2 tex[MAX_LENGTH]; 
    ```

    迭代它

    ```
    for(i=0; i<test; i++) {
        tex[i];
    } 
    ```

    **注意：**此方法不会最小化内存使用。

2.  使用指针并根据您的长度分配它。

    ```
    glm::vec2 *tex;
    tex = new glm::vec2[test]; 
    ```

    在这里输入代码

    ```
    for(i=0; i<test; i++) {
        tex[i];
    }
    delete [] tex; // deallocation 
    ```

    **注意：**两次释放内存会发生错误。

3.  使用其他类似数组的数据结构。

    ```
    vector<glm::vec2> tex;
    for(i=0; i<test; i++){ 
        tex.push_back(input_item);
    }
    /* test.size() return the current length */ 
    ```

# sql - 将 Cognos 报告转换为 SSRS，XSUM 命令有什么作用？

> ID：10045270
> 
> 赞同：3
> 
> 时间：2012-04-06T14:59:16.720
> 
> 标签：sql, tsql, reporting-services, cognos

我们正在将 cognos 报告转换为 ssrs 报告。我有一个从 cognos 报告中得到的查询，它是用普遍的 sql 编写的，我不确定该语言。我能够解释大部分查询，但我被一个命令 XSUM 卡住了。它的语法为

XSUM(col21 at col3 col7 col5 col5 for col3 col7) as col22 其中 col21、col3、col5 和 col7 是表中的列。

任何人都可以帮助我理解命令 XSUM 的作用以及它在 T-sql 中的等价物。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:06:26.027

X 代表扩展。

您的报告可能正在对生成这些 xsum 和 xmin 的数据库之外的应用程序进行一些算术运算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:16:55.080

您可能想查看本机 sql 和 cognos sql 可能其中之一可能没有 Xsum。

除此之外，SSRS 中是否会有一个语义层，您必须在其中创建类似于包的东西。如果是这样，最好在 SSRS 中重新创建报告。

谢谢公关

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-07T01:06:13.700

XSUM 就像 Stephen 强调的那样。这意味着正在报告本身内执行计算。您的报告是在交叉表本身的查询或小计中进行任何汇总或汇总，还是您在报告中加入子查询。一旦有了子查询并将它们绑定在一起，就必须在应用程序服务器上执行算术运算。将其视为一种两层方法 -> 从数据库中收集满足过滤器标准的数据 -> 然后在应用程序服务器上聚合数据，然后再发送到 UI。

# powershell - powershell: comment based help

> ID：10045278
> 
> 赞同：1
> 
> 时间：2012-04-06T15:00:18.247
> 
> 标签：powershell, powershell-2.0

I've created a small script to test creating my own help based powershell and i received error:

> Get-Help : Cannot find Help for topic ".\testHelp.ps1". At line:49 char:15 + Get-Help <<<< @PSBoundParameters | more + CategoryInfo : ResourceUnavailable: (:) [Get-Help], HelpNotFoundException + FullyQualifiedErrorId : HelpNotFound,Microsoft.PowerShell.Commands.GetHelpCommand

Heres the test script:

```
<#
SYNOPSIS
retrieive a list of services from local and remote machines 
.DESCRIPTION
Retrieive services from local and remote machines and reports the following fields
.PARAMETER  Servers 
The Get-Service cmdlet gets objects that represent the services on a local computer or on a remote computer.
.EXAMPLE
PS C:\> Get-Something 'One value' 32
#>
param($computername="localhost")
Get-WmiObject -Class Win32_BIOS -ComputerName $computername 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T15:16:25.567

看起来你错过了`.`前面的`.SYNOPSIS`. 您的帮助还说参数被调用`Servers`但参数块说`$computername`。尽管我认为它不能验证参数名称，但 PowerShell 对帮助格式的正确性非常挑剔。:-)

结果是：

```
PS> Get-Content .\FuncHelp.ps1
<#
.SYNOPSIS
retrieive a list of services from local and remote machines 
.DESCRIPTION
Retrieive services from local and remote machines and reports the following fields
.PARAMETER  Servers 
The Get-Service cmdlet gets objects that represent the services on a local computer or on a remote computer.
.EXAMPLE
PS C:\> Get-Something 'One value' 32
#>
param($computername="localhost")
Get-WmiObject -Class Win32_BIOS -ComputerName $computername

PS> .\FuncHelp.ps1 -?

NAME
    C:\Users\hillr\FuncHelp.ps1

SYNOPSIS
    retrieive a list of services from local and remote machines

SYNTAX
    C:\Users\hillr\FuncHelp.ps1 [[-computername] <Object>] [<CommonParameters>]

DESCRIPTION
    Retrieive services from local and remote machines and reports the following fields

RELATED LINKS

REMARKS
    To see the examples, type: "get-help C:\Users\hillr\FuncHelp.ps1 -examples".
    For more information, type: "get-help C:\Users\hillr\FuncHelp.ps1 -detailed".
    For technical information, type: "get-help C:\Users\hillr\FuncHelp.ps1 -full". 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T07:08:58.773

您可以使用名为[PowerGui](http://powergui.org/index.jspa)的免费 Quest 编辑器。您已经获得了具有高级帮助的功能片段 (CTRL+I)。它为您提供了您可以在[about_Comment_Based_Help中找到的所有高级帮助关键字](http://technet.microsoft.com/us-us/library/dd819489.aspx)

您可以在`<# #>`您的函数之前或内部输入，但请注意帮助中的特殊字符，当从网络或 PDF 文档中复制/粘贴一些示例时，它会导致我出现一些错误。

# java - Proguard 返回错误代码 127。请参阅控制台

> ID：10045286
> 
> 赞同：1
> 
> 时间：2012-04-06T15:01:03.860
> 
> 标签：java, android, proguard

我正在尝试导出我的 android 项目（导出未签名的应用程序包），但出现以下错误：

> Proguard 返回错误代码 127。请参阅控制台
> 
> /path/android-sdk-linux_x86/tools/proguard/bin/proguard.sh：9：java：未找到

我在ubuntu上运行eclipse。有任何想法吗 ？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T10:16:26.700

我也遇到了这个问题，错误是系统找不到'java'命令，所以只需导出你的java路径或在proguard.sh中用你的java命令的完整路径替换'java'。

# activerecord - 如何增加 Heroku 上的 ActiveRecord 线程池大小

> ID：10045302
> 
> 赞同：16
> 
> 时间：2012-04-06T15:02:25.197
> 
> 标签：activerecord, heroku, connection-pooling

通常我会将池大小设置为

```
development:
  adapter: postgresql
  encoding: unicode
  database: openkitchen_development
  username: rails
  host: localhost
  pool: 10
  password: 
```

在 database.yml 中。但是 heroku 替换了配置文件。我正在使用 girl_friday 做后台数据库工作，需要增加线程池大小。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-07T14:43:09.663

只需在您的 heroku 配置中添加一个`pool`查询参数。`DATABASE_URL`要在您的 heroku 应用程序中将池大小设置为 15，请使用以下内容：

`heroku config -s | awk '/^DATABASE_URL=/{print $0 "?pool=15"}' | xargs heroku config:add`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-15T15:09:37.987

对于它的价值，Heroku 不建议使用此处其他答案中描述的 URL 参数方法。他们保留随时重置或更改此 URL 的权利，而且从长远来看，这种行为可能会因 Rails 构建行为而被删除，无论如何。

[根据这篇开发中心文章](https://devcenter.heroku.com/articles/concurrency-and-database-connections)，建议通过初始化后应用程序回调设置其他参数来修改 heroku-postgresql 数据库的配置。

在 config/initializers/database_connection.rb 中：

```
Rails.application.config.after_initialize do
  ActiveRecord::Base.connection_pool.disconnect!

  ActiveSupport.on_load(:active_record) do
    config = Rails.application.config.database_configuration[Rails.env]
    config['pool']              = 10
    ActiveRecord::Base.establish_connection(config)
  end
end 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-23T16:22:59.623

Heroku 现在有一篇关于管理池大小的好文章 - [https://devcenter.heroku.com/articles/concurrency-and-database-connections#connection-pool](https://devcenter.heroku.com/articles/concurrency-and-database-connections#connection-pool)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-21T17:29:43.560

remvee 的回答触及了所需的核心，但由于他的命令导致我的控制台挂起，我想我会写下如何手动执行此操作。

```
heroku config 
```

查找 DATABASE_URL 键。对于此示例，可以说它是：

```
DATABASE_URL:            mysql2://something.example.com/stuff?reconnect=true 
```

在 URL 末尾添加“&pool=10”（使用 & 代替 ?，因为 url 已经有参数）

```
heroku config:add DATABASE_URL=mysql2://something.example.com/stuff?reconnect=true&pool=10 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-07T02:40:23.133

这不是很简单，但您可以尝试创建自己的 buildpack。

你需要分叉： [https ://github.com/heroku/heroku-buildpack-ruby](https://github.com/heroku/heroku-buildpack-ruby)

然后修改以下内容： [https ://github.com/heroku/heroku-buildpack-ruby/blob/master/lib/language_pack/ruby.rb#L325-387](https://github.com/heroku/heroku-buildpack-ruby/blob/master/lib/language_pack/ruby.rb#L325-387)

只需添加您需要的池大小。

然后，您可以使用自定义 buildpack 创建一个新的 Heroku 应用程序：

```
heroku create --stack cedar --buildpack https://github.com/yourgithubusername/heroku-buildpack-ruby.git 
```

应该是这样！

# php - How to hide anchor tag from URL

> ID：10045303
> 
> 赞同：1
> 
> 时间：2012-04-06T15:02:27.817
> 
> 标签：php, javascript, html, anchor

How can I hide the hash value from the following link href in the address bar?

```
<a href="index.php#dev_name"> 
```

So it'll redirect me to a the `index.php#dev_name`, but I want the address bar to only show `index.php`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:07:13.017

您可以使用 Javascript onclick 事件。浏览器仍然会显示`index.php`，但会先触发 onclick 事件，并将浏览器重定向到正确的页面。

```
<a href="index.php" onclick="location.redirect('index.php#dev');"> 
```

# iphone - 观察 NSURL iCloud 属性

> ID：10045306
> 
> 赞同：2
> 
> 时间：2012-04-06T15:02:40.727
> 
> 标签：iphone, ios, ipad, ios5, icloud

有没有办法观察 NSURL iCloud 属性的变化`NSURLUbiquitousItemPercentDownloadedKey`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:20:07.987

查询`NSURL`for`NSURLUbiquitousItemPercentDownloadedKey`不起作用。您应该使用`NSMetadataQuery`and`NSMetadataUbiquitousItemPercentDownloadedKey`代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T13:53:12.613

您应该注册这样的通知：

```
 [[NSNotificationCenter defaultCenter]
     addObserver: self
     selector: @selector (iCloudAccountAvailabilityChanged:)
     name: NSUbiquityIdentityDidChangeNotification
     object: nil]; 
```

iCloudAccountAvailabilityChanged 将在 iCloud 状态更改时调用。在这个地方，您还可以重新查询您的无处不在容器的 URL。

# php - CodeIgniter and ORM (datamapper)

> ID：10045307
> 
> 赞同：0
> 
> 时间：2012-04-06T15:02:42.403
> 
> 标签：php, codeigniter, codeigniter-datamapper

i'm new to php and codeigniter but i have experience with pylons and sqlalchemy.

there you define model classes and then you use command something like "paster setup-app development.ini" and (paster?) creates tables for you and you dont have to write any sql code...

i was trying this with codeigniter and datamapper but so far i'm not sure if it is possible. so here i am asking you if it is possible?

i am very confused because in "models/" you can put your own classes (like in sqlalchemy). in these classes you define every attribute, relationship and other stuff. so why would you need to write the same thing 2 times? (1st in this class 2nd in sql script)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T20:19:41.693

这是不可能的，Datamapper 实现了期望表存在的 Active Record 模式。

无需在 Datamapper 模型中定义任何属性，它将从关联的表中获取（并缓存）。

# android - Programmatically add view into a LinearLayout

> ID：10045308
> 
> 赞同：3
> 
> 时间：2012-04-06T15:02:48.570
> 
> 标签：android, fragment, android-linearlayout

I am trying to simulate a ListView in a LinearLayout in order to show three rows with identical layout. This single View is composed by a ratingbar and a content. It is very strange, but all ratingBars receive the last assigned value. First of all this is my custom Component that extends LinearLayout just adding these two methods:

```
public void setElements(List<Item> elements) {
    removeAllViews();
    for (int i = 0; i < elements.size() && i < 3; i++) {
        View vi = buildElementView(elements.get(i));
        vi.setId(i);
        addView(vi);
    }
}

private View buildElementView(Item itemElement) {
    View view = inflater.inflate(R.layout.element_list_item, null, true);
    // set values
    View header = view.findViewById(R.id.header);
    RatingBar ratingInItem = (RatingBar) header.findViewById(R.id.ratingBarInItem);
    TextView content = (TextView) view.findViewById(R.id.content);

    content.setText(itemElement.getContent());

    ratingInItem.setRating(itemElement.getRating());
    return view;
} 
```

and this is the layout I am inflating:

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res/com.weorder.client"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@color/transparent"
    android:minHeight="60.0dp"
    android:orientation="vertical"
    android:paddingBottom="8.0dp"
    android:paddingLeft="5.0dp"
    android:paddingRight="5.0dp"
    android:paddingTop="8.0dp" >

    <RelativeLayout
        android:id="@+id/header"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RatingBar
            android:id="@+id/ratingBarInItem"
            style="@style/RatingBarSm"
            android:isIndicator="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="3dp"
            android:numStars="5"
            android:stepSize="0.1" />

    </RelativeLayout>

    <TextView
        android:id="@+id/content"
        style="@style/Content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_marginLeft="3dp"
        android:layout_marginRight="3dp"
        android:layout_marginTop="3dp"

        android:textColor="@color/dark_brown"
        android:textSize="@dimen/text_size_small" />

 </LinearLayout> 
```

I call the setElements method inside onActivityCreated() in the fragment. It works well when the fragment start, but when I try to rotate the phone, the content of items changes properly but the ratingbar gets the last value (if there are 3 elements with rating 1,2 and 3, all ratingbars have 3 stars). Is it a bug?

EDIT: this is my onSaveInstanceMethod:

```
 @Override
public void onSaveInstanceState(Bundle outState) {

    if (elements != null) {
        outState.putSerializable("elements", elements);
    }

    super.onSaveInstanceState(outState);
} 
```

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:14:28.710

我认为您正在使用 findViewById() 的错误视图，这会导致问题。

这是一个基于您所做的对我有用的示例。

```
LinearLayout ll = (LinearLayout)findViewById(R.id.ll);
ViewGroup parentGroup = parentGroup = (ViewGroup)ll;

for (int i = 0; i < 3; i++)
{
    LayoutInflater inflater = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View view = inflater.inflate(R.layout.element_list_item, null, true);
    RatingBar rBar = (RatingBar)view.findViewById(R.id.ratingBar1);
    rBar.setProgress(i);
    parentGroup.addView(view);
} 
```

结果应显示三个评分栏，分别为 0、1 和 2 星，具体取决于您设置评分栏的方式。我将新视图附加到视图父级三次。父级是我的线性布局，新视图是评分栏（或您选择的任何内容）。

为了保存片段使用

```
@Override
public void onSaveInstanceState(Bundle outState)
{
    super.onSaveInstanceState(outState);
    getFragmentManager().putFragment(outState, Content.class.getName(), this);
} 
```

然后您可以在 onCreateView 中获取您的参数并恢复您的数据（如有必要）

```
Bundle extras = this.getArguments();
if(extras != null)
{
    //set arguments here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-22T03:25:42.307

> 片段启动时效果很好，但是当我尝试旋转手机时，项目的内容会正确更改，但评分栏会获得最后一个值（如果有 3 个元素的评分为 1,2 和 3，则所有评分栏都有 3 颗星） . 它是一个错误吗？

这不是错误 - 这就是 Android 的工作方式。

**为什么会这样？**

默认情况下，系统将保存和恢复具有 ID 的视图的状态，并使用这些 ID 来维护状态的内部映射。因为您在 中使用相同的布局，所以`LinearLayout`每个孩子都有一个`RatingBar`带有 ID `ratingBarInItem`。当系统保存视图的状态时，它会保存第一个栏的状态，然后用第二个栏覆盖它，然后用第三个栏覆盖*它*。然后，当您恢复状态时，它会将带有 ID 的每个视图恢复`ratingBarInItem`到它在状态图中的状态 - 这将是最后保存的值，即第三项的值。

**你如何解决这个问题？**

你有两个选择。

1.  自己手动保存和恢复视图的状态。

您表明您已经在保存视图中的“元素”。好吧，您可以更新`onRestoreInstanceState`以读取这些元素，然后使用它们重新更新子视图（即，`setElements`再次调用）。

2.  给每个评分栏一个唯一的 ID。

膨胀子视图以添加到布局后，使用[generateViewID](https://developer.android.com/reference/android/view/View.html#generateViewId())创建一个新的唯一 ID，您可以在每个`RatingBar`.

```
RatingBar ratingInItem = (RatingBar) header.findViewById(R.id.ratingBarInItem);
ratingInItem.setID(View.generateViewID()); 
```

然后您不必实现保存或恢复状态，因为现在每个视图都有一个唯一的 ID，默认的系统行为将起作用。

希望有帮助！

# python - Python: How to program an IDE Code collapsing?

> ID：10045312
> 
> 赞同：0
> 
> 时间：2012-04-06T15:03:09.837
> 
> 标签：python

I'm learning Python and want to make a small text editor that would allow the code collapsing like when def a Function, how you can collapse that to a single line.

I'm thinking of using Tkinter but would be open to other environments.

I mainly want to know what widget I should use, I'd like to think that I'd be able to figure out how to do it. (Although an example is always welcome.)

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:17:01.493

您可以考虑使用 Scintilla 文本编辑组件，它具有 Python（和其他语言）的绑定。Scintilla 文本编辑小部件是 SciTE 文本编辑器的基础。

SciTE 支持代码折叠，所以它当然是可行的——它甚至可能是 Scintilla 的内置部分。

来自 SciTE 网站：

> Scintilla 是一个免费的源代码编辑组件。它带有完整的源代码和允许在任何免费项目或商业产品中使用的许可证。
> 
> 除了标准文本编辑组件中的功能外，Scintilla 还包括在编辑和调试源代码时特别有用的功能。其中包括对语法样式、错误指示器、代码完成和调用提示的支持。选择边距可以包含类似于调试器中用于指示断点和当前行的标记。样式选择比许多编辑器更开放，允许使用比例字体、粗体和斜体、多种前景色和背景色以及多种字体。
> 
> SciTE 是一个基于 SCIntilla 的文本编辑器。最初是为了演示 Scintilla 而构建的，它已经发展成为一个普遍有用的编辑器，具有构建和运行程序的功能。它最适用于配置简单的工作——我用它来构建测试和演示程序以及 SciTE 和 Scintilla 本身。

# haskell - 通过 cabal 为 Haskell 安装 glade 库时出错

> ID：10045313
> 
> 赞同：1
> 
> 时间：2012-04-06T15:03:13.793
> 
> 标签：haskell, cabal, glade, gtk2hs

我正在使用与 Ubuntu 11.10 (7.0.3) 一起分发的最新版本的 GHC。

当我尝试安装 glade 时，我得到了这个：

```
$ cabal install glade
Resolving dependencies...
Downloading glade-0.12.1...
[1 of 2] Compiling SetupWrapper     ( /tmp/glade-0.12.129125/glade-0.12.1/SetupWrapper.hs, /tmp/glade-0.12.129125/glade-0.12.1/dist/setup/SetupWrapper.o )
[2 of 2] Compiling Main             ( /tmp/glade-0.12.129125/glade-0.12.1/Setup.hs, /tmp/glade-0.12.129125/glade-0.12.1/dist/setup/Main.o )
Linking /tmp/glade-0.12.129125/glade-0.12.1/dist/setup/setup ...
[1 of 2] Compiling Gtk2HsSetup      ( Gtk2HsSetup.hs, dist/setup-wrapper/Gtk2HsSetup.o )
[2 of 2] Compiling Main             ( SetupMain.hs, dist/setup-wrapper/Main.o )
Linking dist/setup-wrapper/setup ...
Configuring glade-0.12.1...
Preprocessing library glade-0.12.1...
gtk2hsC2hs: UName: root name supply used after saving
cabal: Error: some packages failed to install:
glade-0.12.1 failed during the building phase. The exception was:
ExitFailure 1 
```

gtk2hs-buildtools 和 gtk 已通过 cabal 成功安装。但林间空地不安装。这是一个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T18:00:42.817

我已经设法`glade`通过

```
$ cabal unpack glade
...
$ cd glade-0.12.1
$ runhaskell Setup.hs configure --user
...
$ runhaskell Setup.hs build
...
$ runhaskell Setup.hs build # Note: twice - first build has failed.
...
$ runhaskell Setup.hs install
... 
```

太糟糕了，我不知道是什么导致了错误。

# jquery - 使整个 div 可点击

> ID：10045318
> 
> 赞同：1
> 
> 时间：2012-04-06T15:03:34.540
> 
> 标签：jquery, css

现在我有一个菜单，我正在使用 jquery 在 mouseenter 上进行淡入和淡出并离开

这是该功能的超级基本 jsfiddle（我知道这很糟糕，但你明白了） [http://jsfiddle.net/A26d9/2/](http://jsfiddle.net/A26d9/2/)

所以..现在只有文本是可点击的。我怎样才能做到这一点，以便整个 div 是可点击的。我试过使用

```
 $(".home_hover").click(function(){
     window.location=$(this).find("a").attr("href");
     return false;
}); 
```

但它只会禁用整个菜单。我知道这很容易。我现在只是空白。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:16:00.940

试试这个，它会在div 中寻找一个`a`元素，并在点击时将浏览器发送到那里。`#home`

```
$(document).ready(function() {
    $('#home')
        .mouseenter(function() {
            $('.home_hover', $(this)).fadeIn()
        })
        .mouseleave(function() {
            $('.home_hover', $(this)).fadeOut();
        })
        .click(function() {
            var link = $("a", $(this));
            if (link.length) {
                window.location.assign(link.attr("href"));
            }
        });
}); 
```

[**示例小提琴**](http://jsfiddle.net/A26d9/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:08:12.487

只需使用：

```
$('#home').click(function(){
    alert('clicked');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:09:44.217

您可以像处理 Jquery 中的按钮一样执行此操作。您可以给 div 一个类或一个 ID，然后将一个事件与单击关联。例如，您的 div 有一个“regDiv”类

```
$('.regDiv').live("click", function() {
    alert('clicked');
}); 
```

# android - Action Mode tab bug in ActionBarSherlock 4.0.1

> ID：10045323
> 
> 赞同：2
> 
> 时间：2012-04-06T15:03:55.827
> 
> 标签：android, android-fragments, actionbarsherlock, android-actionbar, android-tabs

I am currently expanding the use of the action bar in one of my applications by looking at and implementing the action mode ability via ActionBarSherlock 4.0.1 and the support Library .

I have achieved this by implementing the 'ActionMode.Callback' on a class as par the ActionBarSherlock example (ActionModes.java). As par the example, I am starting the action mode by using 'startActionMode(new ModeCallback());' and finishing it with 'actionMode.finish();'. The only difference I have is that I am doing all this in a SherlockFragment and not SherlockActivity.

Currently the functionality works just fine, however, as the following images will show, I am getting graphical issues with the ActionBar tabs when they are on a separate row with some android versions and not others.

Android 2.1 - **Issue**

Portrait - bad:

![enter image description here](../Images/5ae2d2343c937ac5fe611c316379be8b.png)

Landscape - ok

![enter image description here](../Images/4089551676e51a85a46a3c1eff98b144.png)

Android 2.2 - **No Issue**

Portrait - ok

![enter image description here](../Images/42b99eab890ff58d2a149e1414dea224.png)

Landscape - ok

![enter image description here](../Images/8b55869413ecde99e4c253c4a84e7e7d.png)

Android 2.3.3 - **Issue**

Portrait - bad

![enter image description here](../Images/99da56036c1c3916482a4a6fca6451d0.png)

Landscape - ok

![enter image description here](../Images/34f5dd67b375f4811ca2ed116e99f441.png)

Android 4.0 - **No Issue**

Portrait - ok

![enter image description here](../Images/cecb3a5faec965a99de14d4aadf9f9d4.png)

Landscape - ok

![enter image description here](../Images/842edaf85ad5416b1622bdaca96a9f64.png)

Apologies for the obvious image adjustment but I have had to cover up some IP. As can be seen from the screen shots of ones with issues and ones without, the tab row is getting 'whited out' when going into the action mode.

The screen shots for Android 2.2, 2.3.3 and 4.0 have been taken from the emulator with 2.1 being taken from my own phone. I can therefore rule out emulator issues. The problem also is present on a phone running Android 2.3.5.

I have also run the application in BlueStack for Windows. Incase you have not heard about it go to [http://bluestacks.com/](http://bluestacks.com/). In essence it allows the running of Android apps in a Windows Environment (Yep, a fancy emulator!). On this the issue is not present.

Any help will be appreciated as the fact it is happening on some versions and not others completely baffles me.

# ruby-on-rails - 使用 PDFKit 和 wkhtmotopdf 生成 PDF 时挂起

> ID：10045327
> 
> 赞同：0
> 
> 时间：2012-04-06T15:04:18.153
> 
> 标签：ruby-on-rails, ruby, wkhtmltopdf, pdfkit

我在 OSX Lion 上使用自制软件（0.9.9）附带的 wkhtmtopdf，突然之间我无法再生成 PDF。当我在 URL 末尾添加 .pdf 时，wkhtmltopdf 进程启动，但该进程永远不会完成。我怀疑这是 wkhtmltopdf 的问题，因为当我通过 cli 运行它时该过程也没有完成。当我发出以下命令时，我得到一个 test.pdf 文件，但该过程从未完成，即使它说“完成”。

我可以做些什么来强制该过程完成吗？

```
curl google.com | wkhtmltopdf - test.pdf

  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   219  100   219    0     0   1685      0 --:--:-- --:--:-- --:--:--  5475
Loading page (1/2)
Printing pages (2/2)                                               
Done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:32:12.943

原来它与 cli 无关，实际上是由于 Jammit 在开发中运行。禁用 Jammit 可修复 PDFkit 挂起问题。

# xamarin.ios - 如何从输入字段中获取字符串值？

> ID：10045332
> 
> 赞同：0
> 
> 时间：2012-04-06T15:04:37.390
> 
> 标签：xamarin.ios, monotouch.dialog

我正在尝试使用 MonoTouch 和 DialogViewController 为 iOS 实现一个设置对话框。

下面的类包含一些公共属性，以及为其获取 DialogViewController 的方法。

问题是当视图消失时，其中的字符串值为`thisName.Value`空（我当然在文本字段中填写了一些内容）。

为什么？

```
 public class Settings
    {
        public string Name { get; set; }

        public  int MagicNumber { get; set; }

        public bool ThisIsEnabled{ get; set; }

        public Settings ()
        {
            var defaults = NSUserDefaults.StandardUserDefaults;
            Name = defaults.StringForKey ("name");
            ThisIsEnabled = defaults.BoolForKey("thisisenabled");
            MagicNumber = defaults.IntForKey ("123");
        }

        public UIViewController GetViewController ()
        {
            var thisBoolean = new BooleanElement ("This boolean", ThisIsEnabled);
            var thisName = new EntryElement ("Name", "name", Name);
            thisName.KeyboardType = UIKeyboardType.ASCIICapable;

            var root = new RootElement ("Options"){
                new Section (){thisBoolean,thisName}
            };

            var dv = new DialogViewController (root, true){Autorotate= true};
            dv.ViewDissapearing += delegate {
                ThisIsEnabled = thisBoolean.Value; // <== This works
                Name = thisName.Value; // <== This is NULL

                var defaults = NSUserDefaults.StandardUserDefaults;
                defaults.SetBool (ThisIsEnabled, "thisisenabled");
                defaults.SetString (Name, "name");
            };
            return dv;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:22:50.577

当前版本的 MT.D 不会“保存”字段的值，直到用户离开它。这可能就是您所看到的。

此行为已[修复](https://github.com/migueldeicaza/MonoTouch.Dialog/commit/4cffe144f89fc9fbfe032d56e67a8583c2d641bf)，但尚未发布。

# php - 在我的网站上用 php 搜索

> ID：10045334
> 
> 赞同：-1
> 
> 时间：2012-04-06T15:04:45.230
> 
> 标签：php, html, mysqli

我在我的网站上的搜索有问题 我不明白为什么它会给我这个错误

这是我的表单代码

```
<form action="index.php?cat=search_results&learn_id=1" method="post">
      <div id="topSearchBodyStyle">
        <input type="text" name="search" class="topSearchTextBackground" />
      </div>
      <div id="topSearchButtonStyle">
        <input type="submit" name="submit" class="topSearchButtonBackground" value="" />
      </div>
    </form> 
```

这是有php代码的页面

```
<?php 

    $getSearch = $_POST['search'];
    trim($getSearch);

    if(!get_magic_quotes_gpc()) {
        $getSearch = addslashes($getSearch);
        }

    $connectToDb = "select * from tutorials where tutorial_title like '%.$getSearch.%'"; 
    $searchResults = $db->query($connectToDb) or die($db->error);
    if ($searchResults){
        $numResultas = $searchResults ->num_rows;
        echo "<p>Found : " . $numResultas . "</p>";
        while($row = mysqli_fetch_array($searchResults)) {

            echo $row['tutorial_title'];    
        }
    }else{
        echo "cant connect";
        }
?> 
```

知道为什么它给我关于“未定义索引：搜索”的注释以及为什么结果为“0”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:27:48.717

从您给出的代码示例中，我看不出您得到的原因`Undefined index: search`，但是，您确定`$_POST['search']`确实设置了？如果这是某个框架或其他项目的一部分，我已经看到一些未设置 $_POST 和 $_GET 并且您必须以另一种方式访问​​它们。

未定义的索引错误是否可能来自代码中的不同行？

如果您通过 获得一个值`$_POST['search']`，那么您获得 0 个结果的原因是因为您的 SQL 语句中有错误。

应该：`"select * from tutorials where tutorial_title like '%".$getSearch."%'"`

最后，您应该使用`mysql_real_escape_string`而不是添加斜杠，或者更好的[准备语句](http://php.net/manual/en/book.pdo.php)。

# c# - c#编译器：获取中间输出

> ID：10045340
> 
> 赞同：4
> 
> 时间：2012-04-06T15:04:59.223
> 
> 标签：c#, compiler-construction

有没有办法指示 c# 编译器在编译的不同阶段输出源代码：删除语法糖后的源代码，...，IL。

也许一些工具（Resharper？）可以做到这一点，但我想知道他们是如何做到的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T15:06:49.723

不，那里没有。C# 编译器不产生任何中间输出。它要么产生错误/警告，要么产生程序集。

可以通过 ildasm 获得 IL。这是 .Net 附带的一个工具，它将显示程序集的原始 IL

*   [http://msdn.microsoft.com/en-us/library/aa309387(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa309387%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-06T17:46:43.483

> 有没有办法指示 c# 编译器在编译的不同阶段输出源代码：删除语法糖后的源代码，...，IL。

正如 Jared 正确指出的那样，您当然可以看到 IL。编译器此时不会公开有关其分析的更多信息。

正如 Jon 正确指出的那样，Roslyn 编译器会。Roslyn 将以树的形式公开完整的*句法*分析。但是，我们没有计划以“降低的树”的形式公开*句法或语义转换*。（例如，查询理解降低为方法调用，foreach 循环降低为 while 循环，using 语句降低为 try-finally 语句，等等。）

我们确实有计划公开一个 API，它允许您对我们的语义分析引擎进行*查询*。例如，你可以说“给我这个程序的句法分析”，然后说“好的，句法分析中的这个节点是一个表达式；它的类型是什么？” 或者“重载决议决定了这个调用实际调用的方法是什么？” 等等。

我们还计划公开允许您查询我们的流分析引擎的 API。例如，您可以获取一个语法树，然后问“给定此方法中的这段代码，哪些局部变量在控制进入该块之前没有分配，但在控制离开后将被分配？”

如果这是您需要的分析，我鼓励您获取 Roslyn 的预览版。我们希望尽可能多地获得早期反馈。下载地址在这里：

[http://www.microsoft.com/download/en/details.aspx?id=27746](http://www.microsoft.com/download/en/details.aspx?id=27746)

反馈论坛在这里：

[http://social.msdn.microsoft.com/forums/en-us/roslyn](http://social.msdn.microsoft.com/forums/en-us/roslyn)

可以在此处找到有关 Roslyn 的更多信息：

[http://msdn.microsoft.com/en-us/roslyn](http://msdn.microsoft.com/en-us/roslyn)

> 也许一些工具（Resharper？）可以做到这一点，但我想知道他们是如何做到的。

他们编写自己的句法和语义分析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:08:33.040

不，你能得到的最好的就是 IL。我相信一些 AOP 工具（如[PostSharp](http://www.sharpcrafters.com/)）通过获取 IL 并使用属性代码重写它来工作。你为什么要问？你有什么想做的吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T15:25:15.123

您应该查看 Microsoft 的[Roslyn](http://msdn.microsoft.com/en-us/roslyn)项目。它将构建过程公开为一组丰富的 API。我相信这项工作将非常重要，但您应该能够以这种方式获得您正在寻找的信息。

# php - Converting a mysql query to a JSON object using php?

> ID：10045341
> 
> 赞同：0
> 
> 时间：2012-04-06T15:05:06.427
> 
> 标签：php, mysql, json

I am trying to convert a mySQL query into a JSON object. This works:

```
<?php
// load in mysql server configuration (connection string, user/pw, etc)
include 'mysqlConfig.php';
$year = $_GET['year'];
// connect to the database
@mysql_select_db($dsn) or die( "Unable to select database");

// outputs the db as lines of text.
$result = mysql_query("SELECT COUNTY, COUNT(TYPE) AS 'type'  from data WHERE DATE between '2000-01-01' and '2000-12-31' GROUP BY COUNTY");
$rows = array();

while($r = mysql_fetch_assoc($result)) {
     $rows[] = $r;
}

echo json_encode($rows);
mysql_close();

?> 
```

But I get this output:

```
[{"COUNTY":"Carlow","type":"121"},{"COUNTY":"Cavan","type":"130"},{"COUNTY":"Clare","type":"112"},{"COUNTY":"Cork","type":"833"},{"COUNTY":"Donegal","type":"264"},{"COUNTY":"Dublin","type":"2457"},{"COUNTY":"Galway","type":"287"},{"COUNTY":"Kerry","type":"227"},{"COUNTY":"Kildare","type":"300"},{"COUNTY":"Kilkenny","type":"139"},{"COUNTY":"Laois","type":"123"},{"COUNTY":"Leitrim","type":"39"},{"COUNTY":"Limerick","type":"370"},{"COUNTY":"Longford","type":"85"},{"COUNTY":"Louth","type":"257"},{"COUNTY":"Mayo","type":"231"},{"COUNTY":"Meath","type":"268"},{"COUNTY":"Monaghan","type":"136"},{"COUNTY":"Offaly","type":"97"},{"COUNTY":"Roscommon","type":"115"},{"COUNTY":"Sligo","type":"113"},{"COUNTY":"Tipperary","type":"249"},{"COUNTY":"Waterford","type":"205"},{"COUNTY":"Westmeath","type":"118"},{"COUNTY":"Wexford","type":"246"},{"COUNTY":"Wicklow","type":"235"}] 
```

whereas this is the format I am looking for:

```
{"Carlow":3,"Cavan":4,"Clare":5,"Cork":3,"Donegal":4,"Dublin":5,"Galway":4,"Kerry":5,"Kildare":5,"Kilkenny":12,"Laois":4,"Leitrim":4,"Limerick":4,"Longford":4,"Louth":4,"Mayo":5,"Meath":3,"Monaghan":5,"Offaly":4,"Roscommon":3,"Sligo":3,"Tipperary":4,"Waterford":2,"Westmeath":2,"Wexford":4,"Wicklow":2} 
```

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:11:13.607

它应该是：

```
while($r = mysql_fetch_assoc($result)) {
     $rows[$r['COUNTRY']] = $r['type'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:08:44.290

```
while($r = mysql_fetch_assoc($result)) {
 $rows[] = $r;
} 
```

应该

```
while($r = mysql_fetch_assoc($result)) {
 $rows[] = array($r['COUNTY'], $r['type']);
} 
```

# iphone - 将 UIView 添加到另一个是否安全，以便子视图的框架比父视图的框架大得多

> ID：10045347
> 
> 赞同：0
> 
> 时间：2012-04-06T15:05:53.967
> 
> 标签：iphone, ios, uiview

我想将 UIView 添加到另一个 UIView 以便子视图覆盖其所有父视图。

最初我是这样做的：

```
UIView * childVU;
childVU = [[UIView alloc] initWithFrame:parentVU.frame]; 
```

当我将 childVU 添加到 parentVU 时，childVU 的顶部低于 parentVU。

所以我做了：

```
childVU = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 10000.0, 10000.0)]; 
```

它在模拟器上运行正常，但这样做真的安全吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:07:41.050

是的，没关系。`clipToBounds`确保在显示内容之前您的父视图已禁用。这也是一个巨大的视图大小，它将在旧设备上不受支持。如果您实际使用的是这种大小的内容，则应将其放在 a`UIScrollView`或 a`CATiledLayer`中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:09:11.027

您的第一个代码在正确的轨道上。除了你应该使用`bounds`而不是`frame`，因为框架是相对于父级的。

```
UIView * childVU;
childVU = [[UIView alloc] initWithFrame:parentVU.bounds]; 
```

尽管使子视图变大会起作用，但这不是正确的方法，但是如果在视图上设置为或`clipsToBounds`设置为它，将不会绘制大于其自身大小的子视图。`YES``masksToBounds``YES`

# javascript - Event.ClientX 在 Firefox 和 chrome 中不起作用

> ID：10045351
> 
> 赞同：1
> 
> 时间：2012-04-06T15:06:06.290
> 
> 标签：javascript

我有在 IE 中工作但在 Firefox 和 chrome 中没有的编码...

```
 function handleWindowClose() {
            if ((window.event.clientX < 0) || (window.event.clientY < 0))
             {
                 event.returnValue = "Are You sure to leave this page";
             }
         }
         window.onbeforeunload = handleWindowClose; 
```

谁能帮我...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T16:21:54.363

`window.event`是一个只有 IE 的东西。要让它在其他浏览器中工作，您必须将事件作为处理函数的参数：

```
function handleWindowClose(e) {
    e = window.event || e; 
        if ((e.clientX < 0) || (e.clientY < 0))
        {
            e.returnValue = "Are You sure to leave this page";
        }
}
window.onbeforeunload = handleWindowClose; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:25:49.870

也许只是添加将鼠标位置存储在变量中的 mousemove 处理程序

```
var mouse;
function storeMouse(e)
{
    if(!e) e = window.event;
    mouse = {clientX: e.clientX, clientX:e.clientY};
}
function test(e){
     alert(mouse.clientX);
} 
```

并使用jQuery？

```
 $(window).bind('beforeunload', function() {
    if (iWantTo) {
        return 'Are You sure to leave this page';
    }
}); 
```

# php - PHP app\console 无法尝试为 Symfony 2 创建包

> ID：10045352
> 
> 赞同：1
> 
> 时间：2012-04-06T15:06:14.503
> 
> 标签：php, symfony, console, bundle

我已经用 PHP 5.3.8 在 Xampp 服务器上安装了 Symfony2，一切正常（php，symfony 演示页面）。

正如教程所说，我尝试创建自己的 helloWorld：

> php 应用程序/控制台生成：bundle --namespace=Acme/HelloBundle --format=yml

我去 Start->Run->CMD 并输入那行代码，它给了我这个：

> 无法打开输入文件：app/console

我将 PHP 目录放到系统 PATH 中，但问题仍然存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-06-16T10:43:25.833

要执行命令，您应该移动到终端/CMD 中项目的根目录。

请注意，`version 2.5`已经进行了一些更改，因此命令将无法使用`app/console`

**注意：**从 2.5`app/console`替换为`bin/console`.

请[在此处](https://github.com/symfony/symfony/blob/master/UPGRADE-3.0.md)查看更改。另请检查[此](https://stackoverflow.com/a/23994473/631652)以获取有关差异的更多详细信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T23:54:19.730

很可能，您不在 symfony2 项目目录中。

1.  启动 Windows 控制台（开始->运行->CMD）
2.  然后使用命令 cd: "cd c:\htdocs\path\to\your\symfony2\project" 移动到 symfony2 项目根目录
3.  然后运行教程中的命令

问题是教程“app/console”中的命令部分表示symfony2项目的“app”目录中“console”脚本的路径。

# inheritance - EF4：当关系仅在层次结构的子类型上定义时如何包含相关对象

> ID：10045353
> 
> 赞同：1
> 
> 时间：2012-04-06T15:06:15.963
> 
> 标签：inheritance, entity-framework-4, include, load

这是我的问题：我有一个代码优先的 EF4 模型，其中有一个 TBH 层次结构。因此，我在数据库中有一个表，该表映射到从基类 A 继承的 2 个类（A1 和 A2）上。A1 类将导航属性定义为另一个类（例如一对一）。我的问题是：如何包含 B 相关实例？

我不能做这样的事情：

```
Dim res = From a In dbContext.A.Include("B_rel_obj")
          Select a 
```

因为 B_rel_obj 只为 A1 定义，而不是在 A 和 A2 中。

我的解决方案是：

```
Dim res = From a In dbContext.A
Dim res1 = From a1 In res
           Where TypeOf(a1) Is A1
           Select a1

For Each a1 As A1 In res1
  dbContext.Entry(a1).Reference(Function(a) a.B_rel_obj).Load()
Next 
```

这行得通，但我不喜欢将结果循环到 Load()。有没有办法一次加载所有集合？

# c# - 与标签、修复数据合同和数据成员关联的 WCF/REST 返回组

> ID：10045359
> 
> 赞同：1
> 
> 时间：2012-04-06T15:06:53.060
> 
> 标签：c#, wcf, web-services, rest

所以我在下面的每个部分都坚持了一些事情，它们对于堆栈中的大多数人来说都是微不足道的，所以我想知道我是否可以就以下代码段中的三个问题获得帮助，我遇到的问题是：

我的运营合同如下所示：

```
 [OperationContract]
    [WebInvoke(Method = "GET", BodyStyle = WebMessageBodyStyle.Bare, RequestFormat = WebMessageFormat.Xml, ResponseFormat = WebMessageFormat.Xml, UriTemplate = "")]
    List<Tag> GetTagCollection();
    #endregion 
```

我的数据合同如下所示：

```
[DataContract(Name="Student")]
public class Student
{
    [DataMember(Name = "StudentID")]
    public string StudentID { get; set; }
    [DataMember(Name = "FirstName")]
    public string FirstName { get; set; }
    [DataMember(Name = "LastName")]
    public string LastName { get; set; }
} 
```

我的服务工作如下所示：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single)] 
public class RawDataService : IReceiveData
{

    public List<Group> GetGroupsCollection(string TagName)
    {
        List<Group> groups = (from g in _program.Groups // _program does not exist notsure what goes here
                              where
                                  (from t in g.Tags where t.Name == TagName select t).Count() > 0
                              select g).ToList();
        return groups;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:17:03.313

1.因为`GetGroupsCollection`需要一个`TagName`参数，所以您需要将其包含在您的 uri 模板中：

```
/whatever/{TagName} 
```

以便在 WCF REST 调用时将其传递给方法。[Uri 模板 (msdn)](http://msdn.microsoft.com/en-us/library/bb675245.aspx)

2.您的合同看起来不错，但是当名称与类/成员名称相同时，您不需要名称。.Net 会为您解决这个问题。但是不疼...

3.您的服务必须从某个地方提取数据，对吗？现在，您可以简单地新建一组用于测试的组并将其返回。数据库连接、ORM 等可能超出了这个问题的范围。

这应该产生足够的玩：

```
var tempGroups = new[]{
    new Group { 
        Name = "Hello", 
        Tags = new[] { 
            new Tag { Name = "Tag1"}, 
            new Tag { Name =  "Tag2"}
        }
    },
   new Group { 
        Name = "World", 
        Tags = new[] { 
            new Tag { Name = "Tag1"}, 
            new Tag { Name = "Tag2"}
            new Tag { Name = "Tag3"}
        }
    }
}; 
```

只需替换`_program.Groups`为`tempGroups`.

# android - 尝试动态插入 RelativeLayout 时出现 ClassCastException？

> ID：10045360
> 
> 赞同：14
> 
> 时间：2012-04-06T15:06:54.140
> 
> 标签：android, android-layout, android-widget

```
 setContentView(R.layout.main2);

        out= new ArrayList<TextView>();
        llay =(RelativeLayout) findViewById(R.id.displayPoll);

       RelativeLayout.LayoutParams lparams =  new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
       RelativeLayout.LayoutParams lparams1 =  new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
        LayoutParams lpar = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        Log.v("my","rched");

        out.add(new TextView(this));
        out.get(0).setLayoutParams(lpar);
        out.get(0).setId(1);
        lparams1.addRule(RelativeLayout.ALIGN_BOTTOM,R.id.user_name);
        llay.setLayoutParams(lparams1);
        out.get(0).setText("Title "+0+"\n\n\n\n\n\n");
        my_poll.this.llay.addView(out.get(0));

            for (int i = 1; i < 3;i++)//mJsonArray.length(); i++) 
            {
                out.add(new TextView(this));

                out.get(i).setLayoutParams(lpar);
                out.get(i).setId(i+1);
                Log.v("my","hey : "+out.get(i-1).getId());

                lparams.addRule(RelativeLayout.BELOW,out.get(i-1).getId());
                llay.setLayoutParams(lparams);

                out.get(i).setText("Title "+i+"\n\n\n\n\n\n");

                llay.addView(out.get(i));

            }

                Log.v("my","rasasched"); 
```

通过执行程序，我收到此错误

```
04-06 20:30:49.372: E/AndroidRuntime(1093): FATAL EXCEPTION: main
04-06 20:30:49.372: E/AndroidRuntime(1093): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.widget.ScrollView.onMeasure(ScrollView.java:301)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.view.View.measure(View.java:8171)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.view.View.measure(View.java:8171)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:526)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:304)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.view.View.measure(View.java:8171)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3132)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.view.View.measure(View.java:8171)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.view.ViewRoot.performTraversals(ViewRoot.java:801)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1727)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.os.Looper.loop(Looper.java:123)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at java.lang.reflect.Method.invokeNative(Native Method)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at java.lang.reflect.Method.invoke(Method.java:521)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-06 20:30:49.372: E/AndroidRuntime(1093):     at dalvik.system.NativeStart.main(Native Method) 
```

这是我正在使用的 XML 文件。

```
<RelativeLayout
android:id="@+id/displayPoll"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/back_blue_grad"
android:padding="0dp" >

   <TextView
    android:id="@+id/user_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:text="Priyank Bharad"
    android:textColor="#fff"
    android:textSize="28dp"
    android:textStyle="bold" />
   <ImageView
    android:id="@+id/p_image"
    android:layout_width="35dp"
    android:layout_height="35dp"
    android:layout_marginRight="10dp"
    android:src="@drawable/final_fb" 
    android:layout_toLeftOf="@id/user_name"/>
</RelativeLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-06T16:25:14.320

这里的错误在于选择 的子类`LayoutParams`。

实例化的正确版本`LayoutParams`取决于您正在创建的视图的**父级，****而不是视图本身的类型**。

看一下 logcat 转储：

```
04-06 20:30:49.372: E/AndroidRuntime(1093): java.lang.ClassCastException: android.widget.RelativeLayout$LayoutParams
04-06 20:30:49.372: E/AndroidRuntime(1093):     at android.widget.ScrollView.onMeasure(ScrollView.java:301) 
```

Android 正在尝试对 to 的实例进行类型转换`RelativeLayout.LayoutParams`，我认为应该是`ScrollView.LayoutParams`，因为您`RelativeLayout`在`ScrollView`.

修复应该是更改您在`RelativeLayout`to上使用的布局参数类型`ScrollView.LayoutParams`。

# python - Pickling cv2.KeyPoint 导致 PicklingError

> ID：10045363
> 
> 赞同：26
> 
> 时间：2012-04-06T15:07:10.563
> 
> 标签：python, opencv

我想在给定目录中的所有图像中搜索冲浪并保存它们的关键点和描述符以供将来使用。我决定使用pickle，如下所示：

```
#!/usr/bin/env python
import os
import pickle
import cv2

class Frame:
  def __init__(self, filename):
    surf = cv2.SURF(500, 4, 2, True)
    self.filename = filename
    self.keypoints, self.descriptors = surf.detect(cv2.imread(filename, cv2.CV_LOAD_IMAGE_GRAYSCALE), None, False)

if __name__ == '__main__':

  Fdb = open('db.dat', 'wb')
  base_path = "img/"
  frame_base = []

  for filename in os.listdir(base_path):
    frame_base.append(Frame(base_path+filename))
    print filename

  pickle.dump(frame_base,Fdb,-1)

  Fdb.close() 
```

当我尝试执行时，出现以下错误：

```
File "src/pickle_test.py", line 23, in <module>
    pickle.dump(frame_base,Fdb,-1)
...
pickle.PicklingError: Can't pickle <type 'cv2.KeyPoint'>: it's not the same object as cv2.KeyPoint 
```

有谁知道，这是什么意思以及如何解决？我正在使用 Python 2.6 和 Opencv 2.3.1

十分感谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-16T10:15:11.820

问题是您不能将 cv2.KeyPoint 转储到 pickle 文件。我遇到了同样的问题，并设法通过自己序列化和反序列化关键点来解决它，然后再用 Pickle 倾倒它们。

所以用一个元组表示每个关键点及其描述符：

```
temp = (point.pt, point.size, point.angle, point.response, point.octave, 
        point.class_id, desc) 
```

将所有这些点附加到一些列表中，然后用 Pickle 转储。

然后当您想再次检索数据时，使用 Pickle 加载所有数据：

```
temp_feature = cv2.KeyPoint(x=point[0][0],y=point[0][1],_size=point[1], _angle=point[2], 
                            _response=point[3], _octave=point[4], _class_id=point[5]) 
temp_descriptor = point[6] 
```

使用上述代码从该数据创建一个 cv2.KeyPoint，然后您可以使用这些点来构建一个特征列表。

我怀疑有一种更简洁的方法可以做到这一点，但上面的方法对我来说很好（而且很快）。您可能需要稍微调整一下您的数据格式，因为我的功能存储在特定格式的列表中。我试图在其通用基础上使用我的想法来呈现上述内容。我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2018-02-16T18:11:42.500

部分问题是`cv2.KeyPoint`python中的一个函数返回一个`cv2.KeyPoint`对象。Pickle 感到困惑，因为从字面上看，“ `<type 'cv2.KeyPoint'>`[is] `not the same object as cv2.KeyPoint`”。也就是说，`cv2.KeyPoint`是一个函数对象，而类型是`cv2.KeyPoint`。为什么OpenCV是这样的，除非我去挖掘，否则我只能猜测。我觉得它与它作为 C/C++ 库的包装器有关。

Python 确实让你能够自己解决这个问题。[我在这篇文章中找到了关于类的酸洗方法的灵感](https://stackoverflow.com/a/38509409/786020)。

我实际上使用了这段代码，对帖子中的原始代码进行了高度修改

```
import copyreg
import cv2

def _pickle_keypoints(point):
    return cv2.KeyPoint, (*point.pt, point.size, point.angle,
                          point.response, point.octave, point.class_id)

copyreg.pickle(cv2.KeyPoint().__class__, _pickle_keypoints) 
```

注意要点：

*   在 Python 2 中，您需要使用`copy_reg`代替`copyreg`和`point.pt[0], point.pt[1]`代替`*point.pt`.
*   `cv2.KeyPoint`由于某种原因，您无法直接访问该类，因此您制作了一个临时对象并使用它。
*   `copyreg`修补将使用我在 when unpickling 的输出中指定的其他有问题的函数`cv2.KeyPoint`，`_pickle_keypoints`因此我们不需要实现 unpickling 例程。
*   令人作呕`cv2::KeyPoint::KeyPoint`的是，它是 C++ 中的一个重载函数，但在 Python 中，这并不完全是一回事。而在 C++ 中，有一个函数将点作为第一个参数，而在 Python 中，它会尝试将其解释为`int`代替。将`*`点展开为两个参数，`x`并`y`匹配唯一的`int`参数构造函数。

我一直在使用[casper 的出色解决方案](https://stackoverflow.com/a/11985056/786020)，直到我意识到这是可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-17T11:37:36.410

与 Poik 提供的解决方案类似。只需在酸洗前调用一次。

```
def patch_Keypoint_pickiling(self):
    # Create the bundling between class and arguments to save for Keypoint class
    # See : https://stackoverflow.com/questions/50337569/pickle-exception-for-cv2-boost-when-using-multiprocessing/50394788#50394788
    def _pickle_keypoint(keypoint): #  : cv2.KeyPoint
        return cv2.KeyPoint, (
            keypoint.pt[0],
            keypoint.pt[1],
            keypoint.size,
            keypoint.angle,
            keypoint.response,
            keypoint.octave,
            keypoint.class_id,
        )
    # C++ Constructor, notice order of arguments : 
    # KeyPoint (float x, float y, float _size, float _angle=-1, float _response=0, int _octave=0, int _class_id=-1)

    # Apply the bundling to pickle
    copyreg.pickle(cv2.KeyPoint().__class__, _pickle_keypoint) 
```

不仅仅是代码，这是因为那里提供了令人难以置信的清晰解释：[https ://stackoverflow.com/a/50394788/11094914](https://stackoverflow.com/a/50394788/11094914)

请注意，如果您想将此想法扩展到其他“不可选择”的 openCV 类，您只需要构建与“_pickle_keypoint”类似的函数。确保以与构造函数相同的顺序存储属性。您可以像我一样考虑复制 C++ 构造函数，即使在 Python 中也是如此。大多数 C++ 和 Python 构造函数似乎没有太大区别。

我对“pt”元组有疑问。但是，存在用于 X 和 Y 分隔坐标的 C++ 构造函数，因此允许此修复/解决方法。

# ios - 从 RemoteIO 保存音频的示例？

> ID：10045369
> 
> 赞同：2
> 
> 时间：2012-04-06T15:07:45.247
> 
> 标签：ios, core-audio

我四处搜索，但没有找到任何从 RemoteIO 音频单元中保存音频的好的示例或教程。

我的设置：使用 MusicPlayer API，我有几个 AUSamplers -> MixerUnit -> RemoteIO

音频播放效果很好。我想添加将音频输出保存到文件的功能。我会在 RemoteIO 的渲染回调中执行此操作吗？

非常感谢任何提示或指向示例代码！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:55:25.670

由于音频单元回调的严格延迟要求，不应在 RemoteIO 回调中执行任何同步文件访问（或任何其他可能阻塞的调用，涉及内存管理或操作系统锁定操作）。相反，只需将音频数据复制到另一个缓冲区（例如更大的循环缓冲区），并设置一些状态来指示已复制了多少数据。然后，在另一个线程中，当数据量足够时，将该缓冲区的内容写入文件。这可能是原始 PCM 文件，稍后可以由 AVAssetReader/Writer 转换为另一种音频文件类型。

# javascript - 在 JQuery/Javascript 中实现带有暂停/播放图标的背景音乐

> ID：10045373
> 
> 赞同：2
> 
> 时间：2012-04-06T15:08:16.650
> 
> 标签：javascript, jquery

您好，提前谢谢您。我对 JQuery/Javascript 很陌生，不确定如何使用暂停/播放图标来实现嵌入的背景音乐。任何帮助将不胜感激。提前致谢！

```
 <div id="toggle" class="play" style="width: 314px; height: 311px"></div>
       <script type="text/javascript"></script>

     $(document).ready(function() {
       $('#music').attr("class", "false");
        $('#toggle').bind("click", function() {

        if ($(this).attr("class") == "play")

        $(this).attr("class", "pause");

        else
        $(this).attr("class", "play");

        });

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:25:56.987

声音被放置在一个空的 Span 中

当脚本启动时，JavaScript 会在一个空的 span 标签内放置一个 embed 标签。因此，您需要在 HTML 页面正文中的某处添加以下 span 文件，最好靠近文档顶部：

```
<span id="dummy"></span>
Call the Script with an onmouseover or onclick Attribute 
```

您需要添加的最后一件事是您希望在单击或鼠标悬停时生成声音的元素。使用这些属性之一调用脚本：

```
<a href="#" onclick="playSound('URL to soundfile');">Click here to hear a sound</a>

 <p onmouseover="playSound('URL to soundfile');">Mouse over this text to hear a sound</p> 
```

# html - 使用位置时重置位置：固定

> ID：10045374
> 
> 赞同：4
> 
> 时间：2012-04-06T15:08:23.983
> 
> 标签：html, css, css-position

我想制作一个网站，其中（动态高度）页眉和页脚具有固定位置。内容应直接在标题下方开始。我做了一个简单的[例子](http://www.braemhof.be/fixed.html)。（黄色和红色顶部位置相同，我希望黄色 DIV 从红色 DIV 下方开始。）

如果将标题位置设置为固定，则内容 DIV 将放置在标题的相同顶部位置。

比如你用float，你可以用clear:both来重置位置，是不是也可以用position:fixed？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-07T04:49:24.000

我知道这是一篇旧帖子，但我自己最近遇到了这个问题。所以只是想我会分享我的解决方案（尽管我还没有完全测试它 - 在此处添加免责声明）。

我在固定容器（页面顶部）下方创建了另一个容器（div），具有相同的设置、类等和内容。

然后我添加了一个样式来将第二个 div 重置为位置：静态，可见性：隐藏。你真的不需要隐藏它，因为它完全被固定的 div 覆盖；但以防万一它是一个不识别位置的旧浏览器：固定。

无论如何，这将为您的内容上方提供一个缓冲区，该缓冲区应该始终是正确的高度。缺点是如果有动态内容，那么这将在您的页面中包含两次，但您需要该内容以确保隐藏的 div 是正确的高度。

不是一个完美的解决方案，但我能想出的最好的解决方案......使用javascript吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:18:53.157

**仅 CSS 解决方案**

使用某种方式填充标题在屏幕顶部占用的空间：

*   `padding-top:`
*   `margin-top:`
*   `position:relative + top:`

然后有一个单独的 CSS 样式表来更改`height`常规`viewport`s 与 mobile `viewport`s。

*（或见下文动态设置`height`属性的 JavaScript 解决方案。）*

*   [jsFiddle](http://jsfiddle.net/t7qMc/1/)

HTML：

```
<html>
  <body>
    <div id="header">
      Header
    </div>
    <div id="wrapper">
      <p>First Row</p>
      <p>Next row</p>
      <p>...</p>
      <p>Last row</p>
    <div>
  </body>
</html> 
```

CSS（普通版）：

```
#header {
  position:fixed;
  height:100px;
  width:100%;
  background-color:green;
  color:white;
}
#wrapper {
  position:relative;
  top:101px;
} 
```

CSS（移动版）：

```
#header {
  height:50px;
}
#wrapper {
  top:51px;
} 
```

* * *

**JavaScript 解决方案**

HTML *（可复制粘贴）*：

```
<head>
  <style>
    #header {
      position:fixed;
      height:100px; /* try different values here! */
      width:100%;
      background-color:green;
      color:white;
    }
    #wrapper {
      position:relative; /* look Mom no height! */
    }
  </style>
</head>
<html>
  <body>
    <div id="header">
      Header
    </div>
    <div id="wrapper">
      <p>First Row</p>
      <p>Next row</p>
      <p>...</p>
      <p>Last row</p>
    <div>
    <script language="javascript">
      document.getElementById('wrapper').style.top = String(document.getElementById("header").offsetHeight + 1);
    </script>
  </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:11:01.330

对一个 div 使用 z-index (css) 使其成为：z-index:-1; 对于其他 z-index:1;

[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T15:11:20.623

我认为您想要的是添加一个等于标题高度的边距顶部。对 margin-bottom 执行相同操作以容纳页脚。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T15:11:41.360

您必须使用`padding-top`和`padding-bottom`。在您的示例中，如果您添加`padding-top: 25px;`到样式，它将显示在顶部固定 div 下。

如您所知，固定位置显示在浏览器上的同一位置，并且在您滚动时不会移动。其余的“正常”内容不受固定定位元素的影响，因此您必须使用填充和边距来创建一些缓冲区空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T17:10:20.757

```
 <body>

   <div style="background-color: red; position: fixed;width:100%;">This is a test with position set  to fixed</div>
  <div style="background-color: yellow; height: 1000px;">This is content that should  start beneath the fixed DIV</div>

    </body> 
```

# jquery - 如何让这个幻灯片自动旋转

> ID：10045384
> 
> 赞同：0
> 
> 时间：2012-04-06T15:10:34.450
> 
> 标签：jquery

[http://jsfiddle.net/AndyMP/CkuKe/](http://jsfiddle.net/AndyMP/CkuKe/)

它工作得很好，但只有在点击上一个/下一个时。可以说服它自动运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:14:06.290

**编辑：**单击#next/#prev 后将代码更新为自动滑动。

注意：点击`#next/#prev`后，2 秒后调用 autoSlide 进行制作。

[**演示**](http://jsfiddle.net/skram/CkuKe/10/)

```
/* home slide show */

var $slides = $('.slideshow_item');
var slide_pos = 0;
var slide_len = $('.slideshow_item').length;
var slide_int = 0;

$slides.filter(':gt(0)').hide();

autoSlide();

function autoSlide() {
    slide_pos = 0;
    slide_int = setInterval(function() {
        $slides.eq(slide_pos % slide_len).fadeOut(500);
        $slides.eq(++slide_pos % slide_len).fadeIn(500);
    }, 500);
}

$('#next').click(function() {
    $slides.eq(slide_pos % slide_len).fadeOut(500);
    $slides.eq(++slide_pos % slide_len).fadeIn(500);

    clearInterval(slide_int);
    setTimeout(autoSlide, 2000);
});

$('#prev').click(function() {
    $slides.eq(slide_pos % slide_len).fadeOut(500);
    $slides.eq(--slide_pos % slide_len).fadeIn(500);

    clearInterval(slide_int);
    setTimeout(autoSlide, 2000);
}); 
```

* * *

只需`#next`在 setInterval 中添加 2 行代码即可。

[**演示**](http://jsfiddle.net/skram/CkuKe/3/)

```
slide_int = setInterval(function() {
    $slides.eq(slide_pos % slide_len).fadeOut(500);
    $slides.eq(++slide_pos % slide_len).fadeIn(500);
}, 500); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:15:42.717

干得好。您每 500 毫秒调用一次单击处理程序是正确的，但`clearInterval` 在第一次迭代后停止了它。

**[演示](http://jsfiddle.net/CkuKe/9/)**

```
 /* home slide show */

var $slides = $('.slideshow_item');
var slide_pos = 0;
var slide_len = $('.slideshow_item').length;

$slides.filter(':gt(0)').hide();

slide_int = setInterval(function() {
    $('#next').click();
}, 500);

$('#next').click(function() {
    $slides.eq(slide_pos % slide_len).fadeOut(500);
    $slides.eq(++slide_pos % slide_len).fadeIn(500);

    //clearInterval(slide_int);
});

$('#prev').click(function() {
    $slides.eq(slide_pos % slide_len).fadeOut(500);
    $slides.eq(--slide_pos % slide_len).fadeIn(500);

    //clearInterval(slide_int);
});​ 
```

# webstorm - 如何为 Webstorm 编写自己的插件？

> ID：10045385
> 
> 赞同：21
> 
> 时间：2012-04-06T15:10:37.180
> 
> 标签：webstorm

我想为 WebStorm 编写一个专门的插件，可以为自定义框架提供帮助，有没有关于如何做到这一点的教程？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-07T07:18:13.417

没有可用的 WebStorm 特定指南，[插件的创建方式与 IntelliJ IDEA 完全相同](http://confluence.jetbrains.net/display/IDEADEV/PluginDevelopment)。

[欢迎您在论坛](http://devnet.jetbrains.net/community/idea/open_api_and_plugin_development)中提出更具体的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-19T22:39:38.287

正如@CrazyCoder 所说，没有具体的官方指南来编写 Webstorm 插件。原因是所有插件都以相同的方式编写，但您可以决定[它适用于哪个 IDE](https://www.jetbrains.org/intellij/sdk/docs/basics/getting_started/plugin_compatibility.html?search=Compatibility%20with%20Multiple%20Products#modules-specific-to-functionality)。

我发现[这篇文章](https://medium.com/@andresdom/developing-an-intellij-webstorm-javascript-plugin-65416f9afea3)对开始构建 Webstorm 插件很有帮助。

# objective-c - 如何让 iPad 上的 iPhone 应用变小？

> ID：10045388
> 
> 赞同：0
> 
> 时间：2012-04-06T15:10:59.410
> 
> 标签：objective-c, xcode4

我已将 ILColorPicker 转换为在 XCode4 和 Storyboard 上工作。我的问题是它填满了 iPad 上的整个 UIView ......我从哪里开始寻找一种让它变小的方法？

我正在考虑使用子视图，但不确定如何将其“连接”到子视图中。还有其他想法吗？

更新：这是我相信我可以修改框架的代码，除了我不知道如何......

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        [self setup];
    }

    return self;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:30:29.600

调整帧大小的程序`CGRectMake`如下：

```
- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:CGRectMake(x, y, width, height)])) {
        // Initialization code
    }
    return self;
} 
```

在上面的变量`x`和`y`对应的左上角。和是框架的宽度和高度`width`。`height`

# database - 使用 liquibase，如何处理作为数据库表子集的对象模型

> ID：10045390
> 
> 赞同：0
> 
> 时间：2012-04-06T15:11:05.680
> 
> 标签：database, grails, grails-orm, liquibase

有些日子我爱我的 dba，然后有今天......

在 Grails 应用程序中，我们使用数据库迁移插件（基于 Liquibase）来处理迁移等。

一切都很可爱。

我被告知，我们*必须*在每个表上支持一组数据库管理元数据。此信息对应用程序的使用为零。

现在，我可以轻松地更新我的模型以适应这种情况。但这个答案很难看。

现在问题出在每次迁移时，Liquibase/database-migration 插件抱怨架构和模型不同步。

无论如何要告诉 Liquibase（或 GORM）列 x、y、z 将被忽略？

我要避免的是这样的变更集：

> changeSet（作者：“cwright（生成）”，id：“1333733941347-5”）{ dropColumn（columnName：“BUILD_MONTH”，tableName：“ASSIGNMENT”）}

它试图使模式与模型保持一致。能够将这些列注释为不适用于模型将是一件好事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T04:36:38.660

可悲的是，此时您最好自己定义[映射块](http://grails.org/doc/latest/guide/GORM.html#ormdsl)并控制[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)（Hibernate 本质上是）。如果您需要控制数据库集成插件处理迁移的方式，您可能想[查看源代码](https://github.com/grails-plugins/grails-database-migration/blob/master/src/groovy/grails/plugin/databasemigration/GormDatabase.groovy)或[在 JIRA 上提出问题](http://jira.grails.org/browse/GPDATABASEMIGRATION)。天真地，在域模型中显式映射列应该允许您绕过数据库中不必要的列。

# ruby - Ruby 中的时间范围？

> ID：10045396
> 
> 赞同：6
> 
> 时间：2012-04-06T15:11:23.930
> 
> 标签：ruby, time

我想知道一个时间是否属于一个*时间表*或另一个。

在我的情况下，用于计算*时间*是在*夜间时间表*还是*正常时间表*中。

我已经到了这个解决方案：

```
NIGHT = ["21:00", "06:00"]
def night?( date )
  date_str = date.strftime( "%H:%M" )
  date_str > NIGHT[0] || date_str < NIGHT[1]
end 
```

但我认为这不是很优雅，也只适用于这个具体案例，而不是每个*时间范围*。

（我发现几个类似的问题是*这样*，但他们都提到*日期*范围没有*时间*范围）

## 更新

解决方案不仅适用于这个具体的时间范围，还必须适用于随机时间范围。比方说：

```
"05:00"-"10:00"
"23:00"-"01:00"
"01:00"-"01:10" 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T15:31:24.130

这实际上或多或少是我会做的，除了可能更简洁一点：

```
def night?( date )
    !("06:00"..."21:00").include?(date.strftime("%H:%M"))
end 
```

或者，如果您的日程安排边界可以保持在小时：

```
def night?(date)
    !((6...21).include? date.hour)
end 
```

请注意`...`- 这基本上意味着“白天时间是 6 小时到 21 小时，但*不包括*21 小时”。

编辑：这是一个通用（可悲的是不那么简洁）的解决方案：

```
class TimeRange
    private

    def coerce(time)
        time.is_a? String and return time
        return time.strftime("%H:%M")
    end

    public

    def initialize(start,finish)
        @start = coerce(start)
        @finish = coerce(finish)
    end

    def include?(time)
        time = coerce(time)
        @start < @finish and return (@start..@finish).include?(time)
        return !(@finish..@start).include?(time)
    end
end 
```

您几乎可以像使用普通 Range 一样使用它：

```
irb(main):013:0> TimeRange.new("02:00","01:00").include?(Time.mktime(2010,04,01,02,30))
=> true
irb(main):014:0> TimeRange.new("02:00","01:00").include?(Time.mktime(2010,04,01,01,30))
=> false
irb(main):015:0> TimeRange.new("01:00","02:00").include?(Time.mktime(2010,04,01,01,30))
=> true
irb(main):016:0> TimeRange.new("01:00","02:00").include?(Time.mktime(2010,04,01,02,30))
=> false 
```

请注意，上述课程不了解时区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:54:01.037

在 Rails 3.2 中，它添加了 Time.all_day 和类似的东西作为生成日期范围的一种方式。我想你必须看看它是如何工作的。它可能有用。

# ruby-on-rails - Ruby on Rails 3.1：数组的意外 to_json 行为

> ID：10045400
> 
> 赞同：1
> 
> 时间：2012-04-06T15:11:52.200
> 
> 标签：ruby-on-rails, arrays, ruby-on-rails-3, json, ruby-on-rails-3.1

我有以下结构：

```
a = { 'x' => [1,2,3] } 
```

在带有 ruby​​ 1.8 的 Rails 3.0 中，向 JSON 的转换按预期工作：

> > a.to_json
> 
> => "{\"x\":[1,2,3]}"

在带有 ruby​​ 1.9.3p125 的 Rails 3.1 中，数组被转换为 hash ：

> > a.to_json
> 
> => "{\"x\":{\"1\":null,\"2\":null,\"3\":null}}"

我找不到任何解释两个版本之间行为差异的文档，也找不到任何方法来保留 Rails 3.1 中的预期输出。有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T08:51:17.310

该问题实际上与 Gemfile 上安装的其中一个 gem 有关，它为 to_json 调用返回不正确的结果。

谢谢您的帮助。

# linq - 数据实体框架和 LINQ - 获取巨大的数据集并在每个对象上一次执行一个命令

> ID：10045401
> 
> 赞同：1
> 
> 时间：2012-04-06T15:12:03.983
> 
> 标签：linq, entity-framework, entity-framework-4, linq-to-entities, entity-framework-4.1

我们正在提取一个巨大的记录数据集（成百上千个），然后需要更新每个字段上的一个字段，在原子转换中一次一个。它们的记录彼此无关，我们不想对所有几十万进行盲目更新（此表上的视图和索引使这非常令人望而却步）。我可以在不进行大量转换的情况下使其工作的唯一方法如下（容器是对自定义 ObjectContext 的引用）：

```
var expiredWorkflows = from iw in container.InitiatedWorkflows
where iw.InitiationStatusID != 1 && iw.ExpirationDate < DateTime.Now
select iw.ID;

foreach (int expiredWorkflow in expiredWorkflows)
container.ExecuteStoreCommand("UPDATE dbo.InitiatedWorkflow SET InitiationStatusID = 7 WHERE ID = @ID", new SqlParameter() { ParameterName = "@ID", Value = expiredWorkflow.ToString() } ); 
```

我们尝试循环遍历每一个，并通过容器更新字段，然后调用 SaveChanges()，但这会将所有内容作为一个事务运行。我们尝试在 foreach 循环中调用 SaveChanges()，但这会引发事务异常。有什么办法可以使用 ObjectContext 来做，所以它会做类似的事情（上面的选择将被更改为返回完整的对象，而不仅仅是 ID）：

```
foreach (var expiredWorkflow in expiredWorkflows)
expiredWorkflow.InitiationStatusID = 7

container.SaveChanges(SaveOptions.OneAtATime); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T13:08:57.467

一般来说，如果您需要执行的操作与上面代码所建议的那种 UPDATE 一样简单，那么这种操作将在后端数据库上运行得更好——当然，假设有一些明确的仅选择需要更改的行的方法。实体框架更多地用于操作可以轻松加载到内存中并在那里旋转的中小型对象集，而不是存储过程通常最好的大型批量处理操作。EF 当然可以执行这些大操作，但是每行执行一条 SQL 语句需要更长的时间。

# sql - Oracle Report 一直占用，但查询运行速度很快

> ID：10045404
> 
> 赞同：0
> 
> 时间：2012-04-06T15:12:19.877
> 
> 标签：sql, oracle, report

我的查询大约需要 3-5 秒才能运行。当我运行报告时，几列的简单摘要需要 25-30 分钟！这是一个左组报告。我尝试过使用查询，并且尝试处理查询中的分组但没有运气。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:25:54.860

查询是否在存储过程中执行？如果是，请尝试在不通过 SQL 存储过程传递变量的情况下执行 SQL。

如果执行时间不同，请尝试一些优化，例如删除参数嗅探（从存储过程中创建局部变量，其中包含通过存储过程传递的变量值的副本）。如果查询需要优化，这些可以为您提供指示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T14:45:59.753

根据我的经验，有时返回大量数据的查询在 Toad 或 SQL Developer 之类的工具中运行速度似乎很快，但是当您尝试获取所有行时，您会遇到查询的真正整体性能。

所以也许你的查询返回了很多行，而所有的时间都花在了所有的 i/o 上。

# python - Python中优先级队列的重载比较器

> ID：10045405
> 
> 赞同：2
> 
> 时间：2012-04-06T15:12:21.650
> 
> 标签：python, queue

C 语言中的人要将节点推入优先级队列，我们​​必须重载 < 运算符。python优先级队列中是否有类似的东西。

例如在 C 中：

```
 struct node
    {

    int city , weight

    }

    bool operator < (node a, node b)
    {
     return a.weight > b.weight;
    }

    int main()
   {
     node a,b,c;
     priority_queue <node> pq;
     pq.push(a);pq.push(b);pq.push(c);
     return 0;
   } 
```

是否有任何类似的方法可以在 Python 中定义优先级队列；如果需要帮助，我无法在 python.org 文档的头部或尾部获取优先级队列。我在 stackoverflow 上看到了一些解释，需要更多解释。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T15:23:46.287

将数据包装在一个类中并覆盖`__cmp__`以返回您想要进行比较的内容。例如

```
class PQEntry:

    def __init__(self, priority, value):
        self.priority = priority
        self.value = value

    def __cmp__(self, other):
         return cmp(self.priority, other.priority) 
```

# ruby - Ruby：在不删除分隔符的情况下拆分字符串

> ID：10045407
> 
> 赞同：4
> 
> 时间：2012-04-06T15:12:42.080
> 
> 标签：ruby, string, split

我需要在不删除分隔符的情况下拆分字符串。有没有一种简单且“面向 Ruby”的方法来做到这一点？

例如，给定这样的字符串：

```
str = "(This is (a test))" 
```

我需要的是这个：

```
["(", "This", "is", "(", "a", "test", ")", ")"] 
```

我尝试对字符串使用 split 方法，使用括号`"("`和`")"`分隔符，但随后我将它们从返回的数组中删除。任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T15:22:13.043

也许是这样的：

```
str.scan(/\(|\)|\w+/) 
```

# iphone - 如何使用 Interfacebuilder 更改 UIScrollView 的高度

> ID：10045408
> 
> 赞同：0
> 
> 时间：2012-04-06T15:12:50.030
> 
> 标签：iphone, objective-c, xcode4

如何更改`UIScrollVIew`仅使用的高度`InterfaceBuilder`？

更改高度字段`Show the Size inspector`不起作用

我正在使用 xCode 4.3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:29:23.577

如果你想改变scrollView的高度，你需要调整它的frame。你可以这样做

```
theScrollView.frame = CGRectMake(x, y, width, height); 
```

您显然需要填写 x、y、宽度和高度的值。如果您想在 Interface Builder 中执行此操作，请打开包含滚动视图的 nib。在 Utilities 部分（最右边的部分）中，单击 Size Inspector（标尺图标）。选择您的滚动视图，在“视图”部分下，您可以调整高度。

如果您正在寻找一种通过界面生成器在运行时调整高度的方法，那是没有办法的。Interface Builder 允许您调整视图从相应的 nib 文件中卸载时的外观。卸载该文件后，您需要以编程方式对其框架进行更改。

# visual-studio-2010 - 如何在 2 个视觉工作室之间同步断点？

> ID：10045409
> 
> 赞同：1
> 
> 时间：2012-04-06T15:12:56.083
> 
> 标签：visual-studio-2010, visual-c++

我正在构建一个网络应用程序，所以我可以运行我的应用程序的 2 个实例。为了调试它，我将一个 Visual Studio (2010) 附加到每个实例。我想同步我的断点，所以当我添加一个断点时，它会同时添加到两个 VS 上。可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-08-31T06:02:59.407

在 Visual Studio 2017 中，可以通过单击“导出与当前搜索条件匹配的所有断点”来导出断点列表。 [Visual Studio 导出断点](https://i.stack.imgur.com/DdVN9.png)

# php - 在php中为一件事添加多条记录

> ID：10045410
> 
> 赞同：0
> 
> 时间：2012-04-06T15:12:56.677
> 
> 标签：php, mysql

我目前有一个名为 的表`paper`，其中包含用户上传到我的系统的每篇论文的所有信息。我还有一张桌子叫`paper_topics`；这意味着`paper_id`从`topic_id`一个名为`topic`. 但是我不确定如何使用 PHP 来允许用户选择多个主题，然后将它们与`paper_id`表一起提交`paper_topics`。

这是我上传论文的代码。

```
if(!is_dir("paper")) {
mkdir("paper");

}
function savedata(){
    global $_FILES, $_POST, $putItAt;
    $sql = "INSERT INTO `internetcoursework`.`paper` (
    `paper_id`, 
    `username`,
    `title`, 
    `abstract`, 
    `filelocation`, 
    `date_added`) 
    VALUES (NULL,'".mysql_real_escape_string($_POST['username'])."' , '".mysql_real_escape_string($_POST['title'])."',
    '".mysql_real_escape_string($_POST['abstract'])."', '".mysql_real_escape_string($putItAt)."', CURDATE());";
    mysql_query($sql);

    }
$putItAt = "paper/".basename($_FILES['uploadedfile']['name']);
if(move_uploaded_file($_FIleS['uploadedfile']['tmp_name'],$putItAt)) {
savedata();
header("location: listfiles.php");
echo "you have succesfully uploaded";

}else { 
if(copy($_FILES['uploadedfile']['tmp_name'],$putItAt)) {
savedata();
    header("location: listfiles.php");
    } else {
        echo "you totally failed";

        }
        }

?>
' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:00:50.073

如果我正确理解您的请求（“选择多个主题，然后将它们与 paper_id 一起提交到 paper_topics 表”），基本的想法是在您的表单中添加一个多选表单元素（如[http://onlinetools.org/ tricks/using_multiple_select.php](http://onlinetools.org/tricks/using_multiple_select.php)），然后使用该发布的值将行插入到 paper_topics 表中。您需要先插入纸张并获取纸张 ID（[http://php.net/manual/en/function.mysql-insert-id.php](http://php.net/manual/en/function.mysql-insert-id.php)）

这是否回答你的问题？

# cocoa - 如何设置拆分视图的最大宽度？

> ID：10045412
> 
> 赞同：4
> 
> 时间：2012-04-06T15:13:07.050
> 
> 标签：cocoa, nssplitview

我是 Cocoa 和 Xcode 4 的新手。我有一个关于 OSX Lion 应用程序的项目。我需要在 Xcode 中设计界面。我用来`NSSplitView`在我的应用程序中创建 3 列。而且我想为第一列和第三列设置最大大小，但我不知道该怎么做以及在哪里可以找到它。谁能给我一些详细的例子或一步一步。

# asp.net - 验证asp文件上传控制客户端

> ID：10045419
> 
> 赞同：2
> 
> 时间：2012-04-06T15:13:33.400
> 
> 标签：asp.net, validation, file-upload, client-side

我的页面上有一个 ASP 文件上传控件。如何在客户端验证所选文件。验证规则： 1\. 文件必须为 jpeg,png,bmp 或 gif。2\. 文件大小必须在 25 kb 和 2 mb 以内。请帮忙。谢谢。
我已尝试以下代码来验证扩展

```
<asp:FileUpload ID="FileUpload2" runat="server"/>                    
<asp:CustomValidator ID="CustomValidator1" runat="server" ClientValidationFunction="ValidateFileUpload" ErrorMessage="Invalid file type. Only .gif, .jpg, .png, .bmp and .jpeg are allowed." ControlToValidate="FileUpload2" ValidationGroup="update">&nbsp;</asp:CustomValidator>
<script language="javascript" type="text/javascript">
    function ValidateFileUpload(Source, args) {
        var fuData = document.getElementById('<%= fuData.ClientID %>');
        var FileUploadPath = fuData.value;

        if (FileUploadPath == '') {
            // There is no file selected
            args.IsValid = false;
        }
        else {
            var Extension = FileUploadPath.substring(FileUploadPath.lastIndexOf('.') + 1).toLowerCase();

            if (Extension == "jpg" || Extension == "jpeg" || Extension == "png" || Extension == "gif" || Extension == "bmp") {
                args.IsValid = true; // Valid file type
            }
            else {
                args.IsValid = false; // Not valid file type
            }
        }
    }
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T17:36:13.470

您无法通过客户端脚本确定在文件输入元素中选择的文件的大小。为了确定文件的大小，必须对文件具有读取权限。正如您可能想象的那样，允许 JavaScript 读取您计算机上的文件将是一个“非常糟糕的主意”。™

我经常看到这类问题，并且认为对于文件输入元素的实际作用存在一些混淆。当用户选择一个文件时，文件字节不会“加载”到此元素中，以便它们可供读取。相反，输入指定了对文件位置的*引用*，以便浏览器知道 - 当表单发布时 - 对文件进行编码并使用 POST 发送它。这个过程是浏览器内部的，不会以脚本可以利用的方式暴露给客户端。

如果您需要进行文件大小验证，您应该在可以访问实际文件字节的服务器上进行。如果您担心人们用非常大的文件“淹没”您的站点，您可以通过配置 IIS 实例来指定允许的最大 POST 大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T12:25:54.560

你可以试试ajax控制工具包。它有自己的文件上传控制。它更酷

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-10T10:36:25.020

在当今使用的大多数浏览器中，您可以对文件大小进行客户端验证： [https ://stackoverflow.com/a/1832497/2705769](https://stackoverflow.com/a/1832497/2705769)

# events - 判断用户是点击滚动条还是内容（onclick 表示原生滚动条）

> ID：10045423
> 
> 赞同：59
> 
> 时间：2012-04-06T15:13:46.820
> 
> 标签：events, scrollbar, jquery

我正在尝试在 JQuery 中创建应该检测何时单击滚动条的自定义事件¹。
我知道有很多文字，但我所有的问题都是黑体字，并且有一个[JSFiddle 示例](http://jsfiddle.net/aKejW/)，您可以立即处理。

因为我还没有找到任何内置功能，所以
我必须创建一个`hasScroll`函数，检查元素是否有滚动条，

```
$.fn.hasScroll = function(axis){
    var overflow = this.css("overflow"),
        overflowAxis;

    if(typeof axis == "undefined" || axis == "y") overflowAxis = this.css("overflow-y");
    else overflowAxis = this.css("overflow-x");

    var bShouldScroll = this.get(0).scrollHeight > this.innerHeight();

    var bAllowedScroll = (overflow == "auto" || overflow == "visible") ||
                         (overflowAxis == "auto" || overflowAxis == "visible");

    var bOverrideScroll = overflow == "scroll" || overflowAxis == "scroll";

    return (bShouldScroll && bAllowedScroll) || bOverrideScroll;
}; 
```

和一个`inScrollRange`函数，检查执行的点击是否在滚动范围内。

```
var scrollSize = 18;

function inScrollRange(event){
    var x = event.pageX,
        y = event.pageY,
        e = $(event.target),
        hasY = e.hasScroll(),
        hasX = e.hasScroll("x"),
        rX = null,
        rY = null,
        bInX = false,
        bInY = false

    if(hasY){
        rY = new RECT();
        rY.top = e.offset().top;
        rY.right = e.offset().left + e.width();
        rY.bottom = rY.top +e.height();
        rY.left = rY.right - scrollSize;

        //if(hasX) rY.bottom -= scrollSize;
        bInY = inRect(rY, x, y);
    }

    if(hasX){
        rX = new RECT();
        rX.bottom = e.offset().top + e.height();
        rX.left = e.offset().left;
        rX.top = rX.bottom - scrollSize;
        rX.right = rX.left + e.width();

        //if(hasY) rX.right -= scrollSize;
        bInX = inRect(rX, x, y);
    }

    return bInX || bInY;
} 
```

**所有滚动条的大小都是统一的吗？例如在 Firefox 和 IE 中它是 18px。**
假设没有自定义滚动条，在某些浏览器中是否有任何额外的填充或大小？

这些功能都按预期执行（据我所知）。

制作自定义事件有点棘手，但我让它有点工作。唯一的问题是，如果单击的元素附加了 mousedown/up 事件，该事件也会被触发。

我似乎无法阻止其他事件同时触发，我称之为 mousedownScroll/mouseupScroll 事件。

```
$.fn.mousedownScroll = function(fn, data){
    if(typeof fn == "undefined" && typeof data == "undefined"){
        $(this).trigger("mousedownScroll");
        return;
    }

    $(this).on("mousedownScroll", data, fn);
};

$.fn.mouseupScroll = function(fn, data){
    if(typeof fn == "undefined" && typeof data == "undefined"){
        $(this).trigger("mouseupScroll");
        return;
    }

    $(this).on("mouseupScroll", data, fn);
};

$(document).on("mousedown", function(e){
    if(inScrollRange(e)){
        $(e.target).trigger("mousedownScroll");
    }
});

$(document).on("mouseup", function(e){
    if(inScrollRange(e)){
        $(e.target).trigger("mouseupScroll");
    }
});

$("selector").mousedown(function(e){
    console.log("Clicked content."); //Fired when clicking scroller as well
});

$("selector").mousedownScroll(function(e){
    console.log("Clicked scroller.");
}); 
```

**如何阻止其他“点击”事件触发？**

当我问的时候，请尽可能优化代码。

**[这是一个可以解决的 JSFiddle。](http://jsfiddle.net/aKejW/)**

我做这个的原因是因为我正在开发一个更大的插件。当我右键单击其中一个滚动条时，它会显示一个自定义上下文菜单。我不想要那个。所以我想我应该做一个检查滚动点击（鼠标上/下）的事件，然后阻止显示上下文菜单。不过，为了做到这一点，我需要滚动点击在正常点击之前出现，并且如果可能的话，停止正常点击。

**我只是在这里大声思考，但**也许有一种方法可以获取绑定到元素的所有功能，然后切换添加它们的顺序？我知道函数是按照它们添加的顺序执行的（第一次添加第一次调用），所以，如果我可以利用该过程，也许可以在点击事件之前插入事件到 JQuery 的整个“注册”。

* * *

^(¹只能使用 mousedown/mouseup 因为单击滚动条时不会触发单击。如果这是错误的，请提供一个工作示例/代码)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-11-19T09:00:05.423

# **解决了：**

我能想到的最短的滚动条点击检测，在 IE、Firefox、Chrome 上进行了测试。

```
var clickedOnScrollbar = function(mouseX){
  if( $(window).outerWidth() <= mouseX ){
    return true;
  }
}

$(document).mousedown(function(e){
  if( clickedOnScrollbar(e.clientX) ){
    alert("clicked on scrollbar");
  }
}); 
```

工作示例： [https ://jsfiddle.net/s6mho19z/](https://jsfiddle.net/s6mho19z/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-07T12:14:24.160

你可能会使用这个 hack。

您可以尝试劫持`mousedown`和`mouseup`事件并在使用自定义驱动功能单击滚动条时避免它们。

```
$.fn.mousedown = function(data, fn) {
    if ( fn == null ) {
        fn = data;
        data = null;
    }    
    var o = fn;
    fn = function(e){
        if(!inScrollRange(e)) {
            return o.apply(this, arguments);
        }
        return;
    };
    if ( arguments.length > 0 ) {
        return this.bind( "mousedown", data, fn );
    } 
    return this.trigger( "mousedown" );
}; 
```

`mousedownScroll`和`mouseupScroll`事件相反。

```
$.fn.mousedownScroll = function(data, fn) {
    if ( fn == null ) {
        fn = data;
        data = null;
    }    
    var o = fn;
    fn = function(e){
        if(inScrollRange(e)) {
            e.type = "mousedownscroll";
            return o.apply(this, arguments);
        }
        return;
    };
    if ( arguments.length > 0 ) {
        return this.bind( "mousedown", data, fn );
    } 
    return this.trigger( "mousedown" );
}; 
```

顺便说一句，我认为滚动条宽度是操作系统设置。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2018-01-03T11:37:33.283

使用以下解决方案来检测用户是否在元素的滚动条上单击鼠标。没有测试它如何与窗口的滚动条一起工作。我猜 Pete 的解决方案更适用于窗口滚动。

```
window.addEventListener("mousedown", onMouseDown);

function onMouseDown(e) {
  if (e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight) 
  {
      // mouse down over scroll element
   }
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-05-23T16:13:15.730

我在之前的项目中遇到了同样的问题，我推荐这个解决方案。它不是很干净，但它可以工作，我怀疑我们可以用 html 做得更好。这是我的解决方案的两个步骤：

**1\. 测量桌面环境中滚动条的宽度。**

为了实现这一点，在应用程序启动时，您执行以下操作：

将以下元素添加到正文：

`<div style='width: 50px; height: 50px; overflow: scroll'><div style='height: 1px;'/></div>`

用 jQUery 的 .width() 测量先前添加元素的内部 div 的宽度，并将滚动条的宽度存储在某处（scollbar 的宽度为 50 - 内部 div 的宽度）

删除用于测量滚动条的额外元素（现在您已经有了结果，请删除添加到正文中的元素）。

用户不应该看到所有这些步骤，并且您的操作系统上有滚动条的宽度

例如，您可以使用以下代码段：

```
var measureScrollBarWidth = function() {
    var scrollBarMeasure = $('<div />');
    $('body').append(scrollBarMeasure);
    scrollBarMeasure.width(50).height(50)
        .css({
            overflow: 'scroll',
            visibility: 'hidden',
            position: 'absolute'
        });

    var scrollBarMeasureContent = $('<div />').height(1);
    scrollBarMeasure.append(scrollBarMeasureContent);

    var insideWidth = scrollBarMeasureContent.width();
    var outsideWitdh = scrollBarMeasure.width();
    scrollBarMeasure.remove();

    return outsideWitdh - insideWidth;
}; 
```

**2\. 检查滚动条上是否有点击。**

现在您有了滚动条的宽度，您可以使用事件的坐标计算事件相对于滚动条位置矩形的坐标并执行令人敬畏的事情......

如果要过滤点击，可以在处理程序中返回 false 以防止其传播。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-06-23T15:01:50.017

确保 scollarea 的内容完全 [over] 填充父 div。

然后，您可以区分对内容的点击和对容器的点击。

**html:**

```
<div class='test container'><div class='test content'></div></div>
<div id="results">please click</div> 
```

**CSS：**

```
#results {
  position: absolute;
  top: 110px;
  left: 10px;
}

.test {
  position: absolute;
  left: 0;
  top: 0;
  width: 100px;
  height: 100px;
  background-color: green;
}

.container {
  overflow: scroll;
}

.content {
  background-color: red;
} 
```

**js：**

```
function log( _l ) {
  $("#results").html( _l );
}

$('.content').on( 'mousedown', function( e ) {
  log( "content-click" );
  e.stopPropagation();
});

$('.container').on( 'mousedown', function( e ) {
  var pageX = e.pageX;
  var pageY = e.pageY;
  log( "scrollbar-click" );
}); 
```

[http://codepen.io/jedierikb/pen/JqaCb](http://codepen.io/jedierikb/pen/JqaCb)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-26T15:44:29.337

这里有很多答案涉及`event.clientX`,`element.clientHeight`等。它们都是错误的。不要使用它们。

*   正如上面所讨论的，在某些平台上`overflow: scroll`滚动条显示为覆盖，或者您可能已经使用`overflow: overlay`.
*   Mac 可以通过插入或拔出鼠标在持久和覆盖之间切换滚动条。这击倒了“启动时测量”技术。
*   垂直滚动条出现在左侧，阅读顺序从右到左。这会破坏比较客户端宽度，除非您有一堆从右到左阅读顺序的特殊逻辑，我打赌这会破坏，因为您可能没有始终如一地测试 RTL。

你需要看看`event.target`。如有必要，使用一个占据滚动元素所有客户区域的内部元素，并[查看](https://developer.mozilla.org/en-US/docs/Web/API/Node/contains) `event.target`该元素是该元素还是它的后代。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-15T12:18:17.807

我将提交我自己的答案并接受[Alexander 的答案](https://stackoverflow.com/a/10054388/944301)，因为它使它完美运行，并支持[Samuel 的答案](https://stackoverflow.com/a/10723918/944301)，因为它正确计算了滚动条宽度，这也是我所需要的。

* * *

话虽如此，我决定制作两个独立的事件，而不是尝试覆盖/覆盖 JQuery 的`mousedown`事件。

这给了我所需的灵活性，而不会弄乱 JQuery 自己的事件，而且很容易做到。

*   `mousedownScroll`
*   `mousedownContent`

下面是使用 Alexanders 和我自己的两个实现。两者都按照我最初的意图工作，但前者可能是最好的。

* * *

*   这是一个实现 Alexander 的答案 + Samuel 的答案[的 JSFiddle 。](http://jsfiddle.net/udFQy/)

    ```
    $.fn.hasScroll = function(axis){
        var overflow = this.css("overflow"),
            overflowAxis;

        if(typeof axis == "undefined" || axis == "y") overflowAxis = this.css("overflow-y");
        else overflowAxis = this.css("overflow-x");

        var bShouldScroll = this.get(0).scrollHeight > this.innerHeight();

        var bAllowedScroll = (overflow == "auto" || overflow == "visible") ||
                             (overflowAxis == "auto" || overflowAxis == "visible");

        var bOverrideScroll = overflow == "scroll" || overflowAxis == "scroll";

        return (bShouldScroll && bAllowedScroll) || bOverrideScroll;
    };

    $.fn.mousedown = function(data, fn) {
        if ( fn == null ) {
            fn = data;
            data = null;
        }    
        var o = fn;
        fn = function(e){
            if(!inScrollRange(e)) {
                return o.apply(this, arguments);
            }
            return;
        };
        if ( arguments.length > 0 ) {
            return this.bind( "mousedown", data, fn );
        } 
        return this.trigger( "mousedown" );
    };

    $.fn.mouseup = function(data, fn) {
        if ( fn == null ) {
            fn = data;
            data = null;
        }    
        var o = fn;
        fn = function(e){
            if(!inScrollRange(e)) {
                return o.apply(this, arguments);
            }
            return;
        };
        if ( arguments.length > 0 ) {
            return this.bind( "mouseup", data, fn );
        } 
        return this.trigger( "mouseup" );
    };

    $.fn.mousedownScroll = function(data, fn) {
        if ( fn == null ) {
            fn = data;
            data = null;
        }    
        var o = fn;
        fn = function(e){
            if(inScrollRange(e)) {
                e.type = "mousedownscroll";
                return o.apply(this, arguments);
            }
            return;
        };
        if ( arguments.length > 0 ) {
            return this.bind( "mousedown", data, fn );
        } 
        return this.trigger( "mousedown" );
    };

    $.fn.mouseupScroll = function(data, fn) {
        if ( fn == null ) {
            fn = data;
            data = null;
        }    
        var o = fn;
        fn = function(e){
            if(inScrollRange(e)) {
                e.type = "mouseupscroll";
                return o.apply(this, arguments);
            }
            return;
        };
        if ( arguments.length > 0 ) {
            return this.bind( "mouseup", data, fn );
        } 
        return this.trigger( "mouseup" );
    };

    var RECT = function(){
        this.top = 0;
        this.left = 0;
        this.bottom = 0;
        this.right = 0;
    }

    function inRect(rect, x, y){
        return (y >= rect.top && y <= rect.bottom) &&
               (x >= rect.left && x <= rect.right)
    }

    var scrollSize = measureScrollWidth();

    function inScrollRange(event){
        var x = event.pageX,
            y = event.pageY,
            e = $(event.target),
            hasY = e.hasScroll(),
            hasX = e.hasScroll("x"),
            rX = null,
            rY = null,
            bInX = false,
            bInY = false

        if(hasY){ 
            rY = new RECT();
            rY.top = e.offset().top;
            rY.right = e.offset().left + e.width();
            rY.bottom = rY.top +e.height();
            rY.left = rY.right - scrollSize;

            //if(hasX) rY.bottom -= scrollSize;
            bInY = inRect(rY, x, y);
        }

        if(hasX){
            rX = new RECT();
            rX.bottom = e.offset().top + e.height();
            rX.left = e.offset().left;
            rX.top = rX.bottom - scrollSize;
            rX.right = rX.left + e.width();

            //if(hasY) rX.right -= scrollSize;
            bInX = inRect(rX, x, y);
        }

        return bInX || bInY;
    }

    $(document).on("mousedown", function(e){
        //Determine if has scrollbar(s)
        if(inScrollRange(e)){
            $(e.target).trigger("mousedownScroll");
        }
    });

    $(document).on("mouseup", function(e){
        if(inScrollRange(e)){
            $(e.target).trigger("mouseupScroll");
        }
    });
    });

    function measureScrollWidth() {
        var scrollBarMeasure = $('<div />');
        $('body').append(scrollBarMeasure);
        scrollBarMeasure.width(50).height(50)
            .css({
                overflow: 'scroll',
                visibility: 'hidden',
                position: 'absolute'
            });

        var scrollBarMeasureContent = $('<div />').height(1);
        scrollBarMeasure.append(scrollBarMeasureContent);

        var insideWidth = scrollBarMeasureContent.width();
        var outsideWitdh = scrollBarMeasure.width();
        scrollBarMeasure.remove();

        return outsideWitdh - insideWidth;
    }; 
    ```

*   这是我决定做[的 JSFiddle 。](http://jsfiddle.net/dnca2/)

    ```
    $.fn.hasScroll = function(axis){
        var overflow = this.css("overflow"),
            overflowAxis,
            bShouldScroll,
            bAllowedScroll,
            bOverrideScroll;

        if(typeof axis == "undefined" || axis == "y") overflowAxis = this.css("overflow-y");
        else overflowAxis = this.css("overflow-x");

        bShouldScroll = this.get(0).scrollHeight > this.innerHeight();

        bAllowedScroll = (overflow == "auto" || overflow == "visible") ||
            (overflowAxis == "auto" || overflowAxis == "visible");

        bOverrideScroll = overflow == "scroll" || overflowAxis == "scroll";

        return (bShouldScroll && bAllowedScroll) || bOverrideScroll;
    };

    $.fn.mousedownScroll = function(fn, data){
        var ev_mds = function(e){
            if(inScrollRange(e)) fn.call(data, e);
        }
        $(this).on("mousedown", ev_mds);
        return ev_mds;
    };

    $.fn.mouseupScroll = function(fn, data){
        var ev_mus = function(e){
            if(inScrollRange(e)) fn.call(data, e);
        }
        $(this).on("mouseup", ev_mus);
        return ev_mus;
    };

    $.fn.mousedownContent = function(fn, data){
        var ev_mdc = function(e){
            if(!inScrollRange(e)) fn.call(data, e);
        }

        $(this).on("mousedown", ev_mdc);

        return ev_mdc;
    };

    $.fn.mouseupContent = function(fn, data){
        var ev_muc = function(e){
            if(!inScrollRange(e)) fn.call(data, e);
        }
        $(this).on("mouseup", ev_muc);
        return ev_muc;
    };

    var RECT = function(){
        this.top = 0;
        this.left = 0;
        this.bottom = 0;
        this.right = 0;
    }

    function inRect(rect, x, y){
        return (y >= rect.top && y <= rect.bottom) &&
            (x >= rect.left && x <= rect.right)
    }

    var scrollSize = measureScrollWidth();

    function inScrollRange(event){
        var x = event.pageX,
            y = event.pageY,
            e = $(event.target),
            hasY = e.hasScroll(),
            hasX = e.hasScroll("x"),
            rX = null,
            rY = null,
            bInX = false,
            bInY = false

        if(hasY){ 
            rY = new RECT();
            rY.top = e.offset().top;
            rY.right = e.offset().left + e.width();
            rY.bottom = rY.top +e.height();
            rY.left = rY.right - scrollSize;

            //if(hasX) rY.bottom -= scrollSize;
            bInY = inRect(rY, x, y);
        }

        if(hasX){
            rX = new RECT();
            rX.bottom = e.offset().top + e.height();
            rX.left = e.offset().left;
            rX.top = rX.bottom - scrollSize;
            rX.right = rX.left + e.width();

            //if(hasY) rX.right -= scrollSize;
            bInX = inRect(rX, x, y);
        }

        return bInX || bInY;
    }

    function measureScrollWidth() {
        var scrollBarMeasure = $('<div />');
        $('body').append(scrollBarMeasure);
        scrollBarMeasure.width(50).height(50)
            .css({
                overflow: 'scroll',
                visibility: 'hidden',
                position: 'absolute'
            });

        var scrollBarMeasureContent = $('<div />').height(1);
        scrollBarMeasure.append(scrollBarMeasureContent);

        var insideWidth = scrollBarMeasureContent.width();
        var outsideWitdh = scrollBarMeasure.width();
        scrollBarMeasure.remove();

        return outsideWitdh - insideWidth;
    }; 
    ```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-08T17:15:02.853

需要指出的是，在 Mac OSX 10.7+ 上，没有持久滚动条。滚动条会在您滚动时出现，并在您完成后消失。它们也比 18px 小得多（它们是 7px）。

截图：http: [//i.stack.imgur.com/zdrUS.png](http://i.stack.imgur.com/zdrUS.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-08T21:00:59.820

唯一适合我的解决方案（仅针对 IE11 进行了测试）：

```
$(document).mousedown(function(e){
    bScrollbarClicked = e.clientX > document.documentElement.clientWidth || e.clientY > document.documentElement.clientHeight;
}); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-24T13:04:25.263

在 ubuntu 21.10 中测试并在 chrome 和 firefox 中工作。

```
const isScrollClick =
  e.offsetX > e.target.clientWidth || e.offsetY > e.target.clientHeight; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-11-08T17:06:29.103

我需要在 mousedown 上检测滚动条，但不是在窗口上而是在 div 上，并且我有填充内容的元素，我用它来检测没有滚动条的大小：

```
.element {
    position: relative;
}
.element .fill-node {
    position: absolute;
    left: 0;
    top: -100%;
    width: 100%;
    height: 100%;
    margin: 1px 0 0;
    border: none;
    opacity: 0;
    pointer-events: none;
    box-sizing: border-box;
} 
```

检测代码类似于[@DariuszSikorski 答案](https://stackoverflow.com/a/33799265/387194)，但包括偏移量并使用可滚动内部的节点：

```
function scrollbar_event(e, node) {
    var left = node.offset().left;
    return node.outerWidth() <= e.clientX - left;
}

var node = self.find('.fill-node');
self.on('mousedown', function(e) {
   if (!scrollbar_event(e, node)) {
      // click on content
   }
}); 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-10-15T13:46:40.997

```
clickOnScrollbar = event.clientX > event.target.clientWidth || event.clientY > event.target.clientHeight; 
```

在 Chrome / Mac OS 上测试

# javascript - 为什么谷歌浏览器不重新加载我的脚本？

> ID：10045424
> 
> 赞同：7
> 
> 时间：2012-04-06T15:13:52.303
> 
> 标签：javascript, html, google-chrome

所以，我有一个名为“engine”的脚本，经过多次头疼和（徒劳的）调试，我发现 GC 根本没有重新加载它！

这就是我将它包含在网页中的方式（在`<head>`元素内部）：

```
<script type="text/javascript" src="engine.js"></script> 
```

当在脚本开头放置 10`console.log("asdf");`时，就好像它们不存在一样。当我转到 GC 控制台中的“资源”选项卡时，我看到该脚本没有应用任何更改！哈哈？将 a`+ "?" + new Date()`放在最后有帮助吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-06T16:00:11.313

适用于 Chrome、Firefox和IE 的通用解决方案是通过`Ctrl`++ （在 Mac`Shift``Del``⌘</kbd>+`Shift`+`⌫</kbd>).``

## 铬解决方案 #1

1.  打开开发者工具（`F12`或`⌘</kbd>+`⌥</kbd>+`i`, or right-click → **Inspect**).``
2.  选择**网络**选项卡并勾选**禁用缓存**复选框。

[![Chrome 禁用缓存 - 网络选项卡](../Images/ef6bfc0e00dbdb5c0dcf86a5ccb9251e.png)](https://i.stack.imgur.com/9ZGTo.png)

3.  重新加载页面。

^(❗️*注意：**只有*在 devtools 窗口打开时才会禁用缓存。)

## 铬解决方案 #2

> ^(这仅在不使用 #1 时才有意义。)

1.  打开开发者工具。
2.  单击右下角的**设置齿轮图标。**
3.  在出现的对话框中，选择***网络***子部分下的**禁用缓存**复选框：从现在开始，当 devtools 窗口打开时，缓存将被跳过。当 devtools 窗口关闭时，缓存将照常工作。

[![Chrome 在 devtools 设置中禁用缓存](../Images/0cfa85cd1110094f3caaea4682f84656.png)](https://i.stack.imgur.com/t2wiz.png)

## Chrome 解决方案 #3：清空缓存 + 硬重新加载

1.  打开开发者工具（否则下一步的菜单将不会显示）。
2.  单击并按住**Refresh**按钮，然后从下拉列表中选择**Empty Cache and Hard Reload**。

[![Chrome 硬刷新和缓存重置](../Images/efe92361688c19991c19583410348077.png)](https://i.stack.imgur.com/E6iGF.png)

## 修改javascript代码

可用于调试的与浏览器无关的解决方案是在您的服务器端代码中附加一个随机生成的版本字符串作为查询参数，即将您的脚本称为：

`<script type="text/javascript" src="myscript.js?ver=12345"></script>`

当参数值改变时，这个技巧将强制浏览器重新加载脚本`ver`。如果您发出 ajax 请求，那么您可以附加`"?ver=" + new Date().getTime()`到您的 URL。

> [注意：完成调试后不要忘记删除参数，因为在生产中您很可能**确实**希望缓存脚本。虽然在每个新构建上生成一个新的时间戳是一种常见的做法 - 这可以在生产中使用，并且将确保在新部署之后客户端将始终获得更新的脚本。]

* * *

> [与上述所有解决方案不同，即使您在客户端和服务器之间有某种缓存（例如 redis、memcached、varnish）或 CDN（例如 akamai、cloudflare、cloudfront 等），这个解决方案也可以工作。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:17:14.833

脚本可能已被缓存，因此旧版本正在从缓存中加载。如果您想确保获得新版本，您可以强制重新加载浏览器、清除浏览器缓存或更改脚本名称或在文件名末尾放置不同的查询参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-13T08:05:53.537

这也困扰着我；CTRL+F5 或 SHIFT+F5 从来没有用过...唯一有效的方法是打开您的开发工具（按 F12），然后右键单击地址栏旁边的重新加载图标，然后选择“硬重新加载”或“清空”缓存和硬重载”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T15:21:51.757

正如我在评论中所说，我猜这是一个缓存问题，一个 CTRL+F5 应该就足够了，以防它不能用于 CTRL+SHIFT+CANC 并清除浏览数据。然而，有时它是具有某种缓存的服务器，我说因为使用 IBM WebSphere，我经常遇到缓存问题，而我无法在浏览器上使用简单的 F5 来解决这些问题。我只需要等待我的网络服务器“刷新”自己。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-21T06:06:49.440

在 2016 年 10 月 21 日最新的铬稳定。

# c - 从 c 源代码调用 tftp get 命令

> ID：10045432
> 
> 赞同：1
> 
> 时间：2012-04-06T15:14:20.223
> 
> 标签：c, command, tftp

我正在调用系统命令

```
system("tftp -m binary 192.168.1.1 -c get myfile  > /dev/null") ; 
```

当 tftp 服务器运行时它工作正常，但是当 tftp 服务器关闭时它使我的 c 程序崩溃。

有没有办法在 c 源代码中检查服务器是否可用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:28:51.730

我认为您的问题不在于服务器的可用性，而在于 tftp（至少在我的 Ubuntu 机器上）不支持您提供的命令行参数这一事实。事实上，它支持的唯一命令行参数是服务器的名称。

但是，您可以尝试将命令通过管道传输到 tftp（模拟交互式会话），如下所示：

```
system( "echo -e \"binary\\nget myfile\\nquit\" | tftp 192.168.1.1" ); 
```

如果服务器不可用，它将在几秒钟后超时并将控制权返回给您的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T10:48:43.997

```
system("echo -e \"timeout 1\\nget myfile\" | tftp 192.168.1.1"); 
```

我使用超时选项而不是退出命令，因为使我的程序看门狗重置的实际延迟是在执行 get 命令时执行的。所以退出不能阻止这一点。

另一方面，我决定在启动我的 c 程序的 bash 脚本上调用 tftp 命令。

我认为在实时 c 程序上调用 tftp commad 是错误的。

非常感谢伊桑。

# excel - 通过单击 Excel 单元格运行 VBA 函数

> ID：10045436
> 
> 赞同：0
> 
> 时间：2012-04-06T15:14:54.857
> 
> 标签：excel, function, vba, hyperlink

单击特定单元格时，我需要运行一个函数。功能是：

```
HighlightOnWebsite(url As String, phrase As String) 
```

基本上，此函数加载 Web 浏览器控件，调出请求的页面，并突出显示所需的短语。该功能工作得更多或更少。

我想不通的是如何让某些单元格调用这个函数。

假设每行有 3 个单元格，其中包含以下信息：

```
url of some document | some important phrase | will contain call to function 
```

现在，我需要扫描电子表格并在每一行的第三列中创建一个可单击的单元格，该单元格调用诸如 HighlightOnWebsite(A1,A2) 之类的函数。

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:17:05.703

您不必扫描工作表。

在第三列的每个单元格中创建一个链接到同一单元格的静态超链接。
然后在工作表中有一个处理程序：

```
Private Sub Worksheet_FollowHyperlink(ByVal Target As Hyperlink)
  If Target.Range.Column = 3 Then
    HighlightOnWebsite Target.Range.Offset(0, -2).Value, Target.Range.Offset(0, -1).Value
  End If
End Sub 
```

# android - 如何在 Android 中将字符串添加到我的自定义地图标记？

> ID：10045439
> 
> 赞同：0
> 
> 时间：2012-04-06T15:15:31.580
> 
> 标签：android, google-maps

我通过查找用户位置创建了一个地图标记，该标记位于我的地图上，但我正在尝试向地图标记添加字符串，但无法使其正常工作。这是我设置位置的 onCreate 方法。该方法的最后一部分显示将精确定位在位置，我认为覆盖项将采用字符串参数，如下所示：

```
 @Override
        public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map);

        // Displaying Zooming controls
        mapView= (MapView) findViewById(R.id.mapView);
        mapView.setBuiltInZoomControls(true);

        //Manually place a pin by touching the map
        touchy t = new touchy();
        overlayList = mapView.getOverlays();
        overlayList.add(t);
        compass = new MyLocationOverlay(Maps.this, mapView);
        overlayList.add(compass);
        controller = mapView.getController();

        d = getResources().getDrawable(R.drawable.androidmarker);

      //placing pinpoint at location
        lm =(LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria crit = new Criteria();

        towers = lm.getBestProvider(crit, false);

        Location location = lm.getLastKnownLocation(towers);

        if(location != null){

            lat = (int) (location.getLatitude()* 1E6);
            longi = (int) (location.getLongitude()* 1E6);

              GeoPoint ourLocation = new GeoPoint(lat, longi);
              controller.animateTo(ourLocation);
            controller.setZoom(6);
            OverlayItem overlayitem = new OverlayItem(ourLocation, "First string", "Second string");
            HelloItemizedOverlay custom = new HelloItemizedOverlay(d, Maps.this);
            custom.insertPinpoint(overlayitem);
            overlayList.add(custom);
        }
        else{
            Toast.makeText(Maps.this, "Couldn't get provider", Toast.LENGTH_SHORT).show();
        }

    } 
```

谁能看到我做错了什么？这是错误的方法吗？最终，我想将名称和高分传递给将从另一个类中检索为两个字符串的位置。

我很感激任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:42:07.113

按照以下教程： [http ://codemagician.wordpress.com/2010/05/06/android-google-mapview-tutorial-done-right/](http://codemagician.wordpress.com/2010/05/06/android-google-mapview-tutorial-done-right/)

在这个他正在创建一个 ItemizedOverly

```
HelloItemizedOverlay extends ItemizedOverlay<OverlayItem> 
```

这将帮助您添加带有文本的地图叠加层

# c++ - 如何从 C++ 向 cmd.exe 发送字符链？

> ID：10045443
> 
> 赞同：0
> 
> 时间：2012-04-06T15:15:46.097
> 
> 标签：c++, cmd

我尝试使用 findwindow 和 sendmessage，但是使用 sendmessage 我只能为 GUI 发送消息。帮助！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:05:24.783

我认为使用 CreateProcess 函数启动命令行进程的最佳方法是采用 STARTUPINFO 结构并指定输入/输出句柄。

当 cmd 进程已经启动时，使用 SendInput。但是恕我直言，这种方式不太可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:20:49.977

尝试使用[keybd_event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304%28v=vs.85%29.aspx)函数。它不是很友好，所以如果你想将它用于复杂的任务，你可以看看CodeProject 上的[这个库](http://www.codeproject.com/Articles/6819/SendKeys-in-C)，它模拟了著名的VBScript/.NET 的[SendKey](http://msdn.microsoft.com/en-us/library/system.windows.forms.sendkeys%28v=vs.100%29.aspx)命令。

# jquery-mobile - $.mobile.showPageLoadingMsg() 不旋转

> ID：10045445
> 
> 赞同：0
> 
> 时间：2012-04-06T15:15:54.243
> 
> 标签：jquery-mobile, spinner

我遇到了[这个人描述](http://forum.jquery.com/topic/calling-the-spinner-programmatically)的同样的问题。showPageLoadingMsg() 上的微调器永远不会旋转！没有人回答他的问题，所以我没有什么可继续的。A 有人有什么想法吗？

```
 $.mobile.loadingMessageTextVisible = true;
    $.mobile.loadingMessage = "please wait...";
    $.mobile.showPageLoadingMsg(); 
```

编辑：这是我用来在我的页面中包含 jquery mobile 和 jquery 的代码：

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>   
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T14:13:17.700

我升级到 jquery mobile 1.1.0，现在一切似乎都运行良好。这是我用于可能遇到此问题的其他任何人的代码：

在标题中：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

js：

```
$.mobile.loadingMessageTextVisible = true;
$.mobile.loadingMessage = "please wait...";
$.mobile.showPageLoadingMsg(); 
```

# data-structures - 不可变（双）LinkedList的高效实现

> ID：10045446
> 
> 赞同：10
> 
> 时间：2012-04-06T15:15:54.350
> 
> 标签：data-structures, linked-list, immutability

读过这个问题[不可变还是不可变？](https://stackoverflow.com/questions/9009627/immutable-or-not-immutable)并阅读我之前关于不变性的问题的答案，我仍然对有效实现不可变的简单 LinkedList 感到有些困惑。就数组而言，这似乎很容易——复制数组并基于该副本返回新结构。

假设我们有一个通用的 Node 类：

```
class Node{
    private Object value;
    private Node next;
} 
```

并且基于上面的类 LinkedList 允许用户添加、删除等。现在，我们将如何确保不变性？当我们插入一个元素时，我们是否应该递归地复制所有对列表的引用？

我也对[不可变或不可变的答案感到好奇？](https://stackoverflow.com/questions/9009627/immutable-or-not-immutable)提到在二叉树的帮助下导致 log(n) 时间和空间的 cerain 优化。另外，我在某处读到，在前面添加一个元素也是 0(1)。这让我非常困惑，好像我们不提供引用的副本，然后实际上我们正在修改两个不同来源中的相同数据结构，这破坏了不变性......

您的任何答案都适用于双向链表吗？我期待任何其他问题/解决方案的回复/指示。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-06T15:34:25.793

> 假设我们有一个通用的 Node 类和基于上述的 LinkedList 类，允许用户添加、删除等。现在，我们如何确保不变性？

您可以通过将对象的每个字段设为只读来确保不变性，并确保这些只读字段之一引用的每个对象也是不可变对象。如果字段都是只读的并且只引用其他不可变数据，那么显然该对象将是不可变的！

> 当我们插入一个元素时，我们是否应该递归地复制所有对列表的引用？

你可以。您在这里得到的区别是*immutable*和*persistent*之间的区别。不可变的数据结构无法更改。持久数据结构*利用*数据结构不可变这一事实来重用其部分。

一个持久的不可变链表特别容易：

```
abstract class ImmutableList
{
    public static readonly ImmutableList Empty = new EmptyList();
    private ImmutableList() {}
    public abstract int Head { get; }
    public abstract ImmutableList Tail { get; }
    public abstract bool IsEmpty { get; }
    public abstract ImmutableList Add(int head);
    private sealed class EmptyList : ImmutableList
    {
        public override int Head { get {  throw new Exception(); } }
        public override ImmutableList Tail { get { throw new Exception(); } }
        public override bool IsEmpty { get { return true; } }
        public override ImmutableList Add(int head)
        {
            return new List(head, this);
        }
    }

    private sealed class List : ImmutableList
    {
        private readonly int head;
        private readonly ImmutableList tail;
        public override int Head { get { return head; } }
        public override ImmutableList Tail { get { return tail; } }
        public override bool IsEmpty { get { return false; } }
        public override ImmutableList Add(int head)
        {
            return new List(head, this);
        }
    }
}
...
ImmutableList list1 = ImmutableList.Empty;
ImmutableList list2 = list1.Add(100);
ImmutableList list3 = list2.Add(400); 
```

你去吧。当然你会想要添加更好的异常处理和更多的方法，比如`IEnumerable<int>`方法。但是有一个持久不变的列表。每次创建新列表时，都会重复使用现有不可变列表的内容；list3 重用了 list2 的内容，因为 list2 永远不会改变，所以它可以安全地做到这一点。

> 您的任何答案是否也适用于双向链表？

当然，您可以轻松地创建一个双向链表，每次都对整个数据结构进行完整复制，但这很愚蠢；您不妨只使用一个数组并复制整个数组。

制作一个*持久*的双向链表非常困难，但有一些方法可以做到。我要做的是从另一个方向解决问题。而不是说“我可以制作一个持久的双向链表吗？” 问问自己“我觉得双向链表有哪些吸引人的属性？” 列出这些属性，然后看看您是否可以提出具有这些属性的持久数据结构。

例如，如果你喜欢的属性是双向链表可以廉价地从两端扩展，廉价地分成两个列表，并且两个列表可以廉价地连接在一起，那么你想要的持久结构是一个*不可变的可连接双端队列*，而不是双向链表。我在这里举了一个不可变的不可连接双端队列的例子：

[http://blogs.msdn.com/b/ericlippert/archive/2008/02/12/immutability-in-c-part-eleven-a-working-double-ended-queue.aspx](http://blogs.msdn.com/b/ericlippert/archive/2008/02/12/immutability-in-c-part-eleven-a-working-double-ended-queue.aspx)

将其扩展为可连接的双端队列留作练习；我链接到的关于手指树的论文是一本很好读的论文。

更新：

> 根据上面我们需要将前缀复制到插入点。根据不变性的逻辑，如果 w 从前缀中删除任何内容，我们会得到一个新列表以及后缀中的内容......为什么只复制前缀而不是后缀？

考虑一个例子。如果我们有列表 (10, 20, 30, 40)，我们想在位置 2 插入 25 怎么办？所以我们想要 (10, 20, 25, 30, 40)。

我们可以重复使用哪些部分？我们手头的尾巴是 (20, 30, 40), (30, 40) 和 (40)。显然我们可以重用 (30, 40)。

绘制图表可能会有所帮助。我们有：

```
10 ----> 20 ----> 30 -----> 40 -----> Empty 
```

我们想要

```
10 ----> 20 ----> 25 -----> 30 -----> 40 -----> Empty 
```

所以让我们做

```
| 10 ----> 20 --------------> 30 -----> 40 -----> Empty
|                        /
| 10 ----> 20 ----> 25 -/ 
```

我们可以重复使用 (30, 40) 因为这部分是两个列表的共同点。

更新：

> 是否也可以提供随机插入和删除的代码？

这是一个*递归*解决方案：

```
ImmutableList InsertAt(int value, int position)
{
    if (position < 0) 
        throw new Exception();
    else if (position == 0) 
         return this.Add(value);
    else 
        return tail.InsertAt(value, position - 1).Add(head);
} 
```

**你明白为什么会这样吗？**

现在作为练习，编写一个递归 DeleteAt。

现在，作为练习，编写一个*非递归的*InsertAt 和 DeleteAt。请记住，*您有一个不可变的链表*供您使用，因此您可以在迭代解决方案中使用它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:24:10.883

> 当我们插入一个元素时，我们是否应该递归地复制所有对列表的引用？

您应该递归地复制列表的前缀直到插入点，是的。

这意味着插入不可变链表是*O(n)*。（就像在数组中插入（而不是覆盖）一个元素一样）。

出于这个原因，插入通常是不受欢迎的（以及附加和连接）。

不可变链表的通常操作是“cons”，即在开头附加一个元素，即*O(1)*。

您可以清楚地看到例如 Haskell 实现的复杂性。给定一个定义为递归类型的链表：

```
data List a = Empty | Node a (List a) 
```

我们可以直接将“cons”（在前面插入一个元素）定义为：

```
cons a xs = Node a xs 
```

显然是*O(1)*操作。而插入必须递归地定义——通过找到插入点。将列表分解为前缀（复制），并与新节点和对（不可变）尾部的引用共享。

关于链表要记住的重要一点是：

*   线性访问

对于不可变列表，这意味着：

*   复制列表的前缀
*   共享尾巴。

如果您经常插入新元素，则首选基于日志的结构，例如树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T08:02:02.670

有一种方法可以模拟“突变”：使用不可变映射。

对于字符串的链表（Scala 风格的伪代码）：

`case class ListItem(s:String, id:UUID, nextID: UUID)`

然后`ListItems`可以将其存储在密钥为的地图中`UUID`： `type MyList = Map[UUID, ListItem]`

如果我想插入一个新`ListItem`的`val list : MyList`：

```
def insertAfter(l:MyList, e:ListItem)={ 
     val beforeE=l.getElementBefore(e)
     val afterE=l.getElementAfter(e)
     val eToInsert=e.copy(nextID=afterE.nextID)
     val beforeE_new=beforeE.copy(nextID=e.nextID)
     val l_tmp=l.update(beforeE.id,beforeE_new)
     return l_tmp.add(eToInsert)
} 
```

其中`add`, `update`,`get`使用固定时间：http `Map`: [//docs.scala-lang.org/overviews/collections/performance-characteristics](http://docs.scala-lang.org/overviews/collections/performance-characteristics)

实现双链表也是类似的。

# r - optim() 上的 R 问题，其函数取决于循环

> ID：10045448
> 
> 赞同：0
> 
> 时间：2012-04-06T15:16:01.013
> 
> 标签：r, optimization

这是关于 R 上的 optim() 函数的一个简单问题。我试图根据循环的变量找到函数的最小值。

```
f<-function(x,i){
  i*x
}

M<-matrix(0,10,1)

  for (i in 1:5) {
    M[i,1]<-optim(c(1),f,lower=-2,upper=2,method="L-BFGS-B")
  }
M 
```

R回答我：

```
Erreur dans i * x : 'i' est manquant 
```

我真的不明白如何处理这个问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:33:33.093

你必须传递`i`给`optim`调用：

```
optim(1,f,i=i,lower=-2,upper=2,method="L-BFGS-B") 
```

...并`optim`返回一个列表，因此您需要在列表中选择要存储的元素`M`。我假设你想要`par`：

```
M[i,1] <- optim(1,f,i=i,lower=-2,upper=2,method="L-BFGS-B")$par 
```

更新：

正如贾斯汀在评论中指出的那样，更类似于 R 的方法是：

```
L <- list()
for (i in 1:5) {
    L[[i]] <- optim(1,f,i=i,lower=-2,upper=2,method="L-BFGS-B")
}
V <- sapply(L, `[[`, "par") 
```

# sip - 星号：发起呼叫未在拨号计划中设置 CALLERID

> ID：10045451
> 
> 赞同：6
> 
> 时间：2012-04-06T15:16:15.757
> 
> 标签：sip, asterisk

我正在使用 Asterisk PBX 呼叫软电话，我使用这个命令：“发起 SIP/100 分机 4004”，在拨号方案中，我必须获取 CALLERID 变量，但在这种情况下，它总是空的！

PS：如果我从软电话（100）呼叫分机（4004），则设置了 CALLERID，我可以通过 : 获取它`${CALLERID(num)}`。

如何在发起案例中获取来电显示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T02:14:48.550

当您发起呼叫时，您可以自己设置呼叫者 ID。有两种方法可以做到这一点——要么在你自己的发起应用程序中，要么在拨号方案中。下面是一个例子。

```
Action: Originate
Channel: local/12345@outgoing
Application: Echo
CallerID: Asterisk <12345> 
```

extensions.conf：

```
[outgoing]
exten => 12345,1,NoOp()
same => n,Verbose(1, Outgoing Caller ID: {$CALLERID(all)})
same => n,Dial(SIP/${EXTEN})
same => n,Hangup() 
```

或者您可以执行以下操作：

```
exten => 12345,1,NoOp()
same => n,Set(CALLERID(num)=54321)
same => n,Set(CALLERID(name)=Asterisk)
same => n,Verbose(1, Outgoing Caller ID: {$CALLERID(all)})
same => n,Dial(SIP/${EXTEN})
same => n,Hangup() 
```

您应该看到您的呼叫者 ID 在 AMI 发起中设置，或者，如果您选择在拨号计划中覆盖它，这些值。

有关详细信息，请参阅[Manager Action Originate](https://wiki.asterisk.org/wiki/display/AST/ManagerAction_Originate)和[CallerID Function](https://wiki.asterisk.org/wiki/display/AST/Function_CALLERID)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T19:24:05.763

我知道这已经很晚了，但如果你在 Asterisk 1.8 上，Originate 应用程序通常不允许它。

我之前在论坛上问过，他们说以后会添加这个功能。所以我所做的是修改 app_originate.c 以允许传递数字和名称。

这是我去年写的： [https ://github.com/cmendes0101/asterisk-originate-callerid](https://github.com/cmendes0101/asterisk-originate-callerid)

已经生产一年多了，一直运行良好。为 1.8 编写的。这是一个简单的修改，因此如果您使用不同的版本，您可以简单地对更改进行比较，并对您的版本进行一些小的更改以实现它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T16:02:44.793

我现在使用的最终解决方案：

*   我从 php 脚本调用我的扩展（发起 SIP/100 扩展 777）
*   我将扩展名写入文本文件（file_put_contents）
*   然后我在星号拨号计划中读取它，并将此变量设置为呼叫者 ID Set(CALLERID(num)=${caller_id}

我没有找到另一个解决方案。

# java - 如何停止渲染不可见的面孔

> ID：10045454
> 
> 赞同：2
> 
> 时间：2012-04-06T15:16:23.617
> 
> 标签：java, opengl, lwjgl, voxel

我正在制作一个基于体素的游戏，为了它的需要，我正在创建一个块渲染引擎。

重点是，我需要生成很多立方体。每次我渲染超过 16x16x16 块的这些块时，我的 FPS 几乎不会下降，因为它渲染了所有这些立方体的所有 6 个面。那是 24 576 个四边形，我不想要那个。

所以，我的问题是，如何停止渲染不可见的顶点（或四边形），从而提高我的游戏性能？

这是用于渲染块的类：

```
public void renderBlock(int posx, int posy, int posz) {
  try{
    //t.bind();
    glEnable(GL_CULL_FACE);
    glCullFace(GL_BACK);// or even GL_FRONT_AND_BACK */);

    glPushMatrix();

    GL11.glTranslatef((2*posx+0.5f),(2*posy+0.5f),(2*posz+0.5f));             // Move Right 1.5 Units And Into The Screen 6.0
    GL11.glRotatef(rquad,1.0f,1.0f,1.0f);

    glBegin(GL_QUADS);               // Draw A Quad

    GL11.glColor3f(0.5f, 0.4f, 0.4f);             // Set The Color To Green
    GL11.glTexCoord2f(0,0);
    GL11.glVertex3f( 1f, 1f,-1f);         // Top Right Of The Quad (Top)
    GL11.glTexCoord2f(1,0);
    GL11.glVertex3f(-1f, 1f,-1f);         // Top Left Of The Quad (Top)
    GL11.glTexCoord2f(1,1);
    GL11.glVertex3f(-1f, 1f, 1f);         // Bottom Left Of The Quad (Top)
    GL11.glTexCoord2f(0,1);
    GL11.glVertex3f( 1f, 1f, 1f);         // Bottom Right Of The Quad (Top)

    //GL11.glColor3f(1.2f,0.5f,0.9f);             // Set The Color To Orange
    GL11.glTexCoord2f(0,0);
    GL11.glVertex3f( 1f,-1f, 1f);         // Top Right Of The Quad (Bottom)
    GL11.glTexCoord2f(0,1);
    GL11.glVertex3f(-1f,-1f, 1f);         // Top Left Of The Quad (Bottom)
    GL11.glTexCoord2f(1,1);
    GL11.glVertex3f(-1f,-1f,-1f);         // Bottom Left Of The Quad (Bottom)
    GL11.glTexCoord2f(1,0);
    GL11.glVertex3f( 1f,-1f,-1f);         // Bottom Right Of The Quad (Bottom)

    //GL11.glColor3f(1.0f,0.0f,0.0f);             // Set The Color To Red
    GL11.glTexCoord2f(0,0);
    GL11.glVertex3f( 1f, 1f, 1f);         // Top Right Of The Quad (Front)
    GL11.glTexCoord2f(1,0);
    GL11.glVertex3f(-1f, 1f, 1f);         // Top Left Of The Quad (Front)
    GL11.glTexCoord2f(1,1);
    GL11.glVertex3f(-1f,-1f, 1f);         // Bottom Left Of The Quad (Front)
    GL11.glTexCoord2f(0,1);
    GL11.glVertex3f( 1f,-1f, 1f);         // Bottom Right Of The Quad (Front)

    //GL11.glColor3f(1f,0.5f,0.0f);             // Set The Color To Yellow
    GL11.glTexCoord2f(0,0);
    GL11.glVertex3f( 1f,-1f,-1f);         // Bottom Left Of The Quad (Back)
    GL11.glTexCoord2f(1,0);
    GL11.glVertex3f(-1f,-1f,-1f);         // Bottom Right Of The Quad (Back)
    GL11.glTexCoord2f(1,1);
    GL11.glVertex3f(-1f, 1f,-1f);         // Top Right Of The Quad (Back)
    GL11.glTexCoord2f(0,1);
    GL11.glVertex3f( 1f, 1f,-1f);         // Top Left Of The Quad (Back)

    //GL11.glColor3f(0.0f,0.0f,0.3f);             // Set The Color To Blue
    GL11.glTexCoord2f(0,1);
    GL11.glVertex3f(-1f, 1f, 1f);         // Top Right Of The Quad (Left)
    GL11.glTexCoord2f(1,1);
    GL11.glVertex3f(-1f, 1f,-1f);         // Top Left Of The Quad (Left)
    GL11.glTexCoord2f(1,0);
    GL11.glVertex3f(-1f,-1f,-1f);         // Bottom Left Of The Quad (Left)
    GL11.glTexCoord2f(0,0);
    GL11.glVertex3f(-1f,-1f, 1f);         // Bottom Right Of The Quad (Left)

    //GL11.glColor3f(0.5f,0.0f,0.5f);             // Set The Color To Violet
    GL11.glTexCoord2f(0,0);
    GL11.glVertex3f( 1f, 1f,-1f);         // Top Right Of The Quad (Right)
    GL11.glTexCoord2f(1,0);
    GL11.glVertex3f( 1f, 1f, 1f);         // Top Left Of The Quad (Right)
    GL11.glTexCoord2f(1,1);
    GL11.glVertex3f( 1f,-1f, 1f);         // Bottom Left Of The Quad (Right)
    GL11.glTexCoord2f(0,1);
    GL11.glVertex3f( 1f,-1f,-1f);         // Bottom Right Of The Quad (Right)

    //rquad+=0.0001f;
    glEnd();
    glPopMatrix();
  }catch(NullPointerException t){t.printStackTrace(); System.out.println("rendering block failed");}
} 
```

这是呈现它们的代码：

```
private void render() {
  GL11.glClear(GL11.GL_COLOR_BUFFER_BIT|GL11.GL_DEPTH_BUFFER_BIT);
  for(int y=0; y<32; y++){
    for(int x=0; x<16; x++){
      for(int z=0; z<16; z++) {
        b.renderBlock(x, y, z);

      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T16:22:20.780

您的代码存在更大的性能问题。您不应该使用即时模式 OpenGL 渲染 ( `glVertexXXX() calls`) 来绘制如此大量的顶点。

当您以这种方式执行渲染时，您的代码必须为每个顶点调用图形驱动程序，这很慢。

相反，您应该使用[Vertex Buffer Objects](http://en.wikipedia.org/wiki/Vertex_Buffer_Object)。这将允许您将所有几何图形直接上传到图形卡上，然后在单个 Java 方法调用中绘制所有立方体（可能`glDrawArrays`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T20:21:00.270

I recommend, like ulmangt said, that you use VBO but before that, you need to calculate only the visible faces.

This can be easily done by (just once at the beginning) checking if a face is neighbor to a empty voxel ("air"). If it is, add that quad (face) to the rendering.

Afterwards you just do this check only on the neighbors of changed voxels. Example: When the user removes a cube, check the 6 neighbors of that voxel and add those quads to the rendering. Do the reverse when voxels are added, remove neighbor quads.

So with a 5x5x5 cube made of voxels, instead of 750 quads, you end up with 150.

Other gains can be had by just rendering chunks (a group of voxels) in the view (ignoring the ones to the back of the player) and using a distance limit.

You can go even more crazy by using octrees to only render chunks that you know that could possibly be visible.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-26T00:37:56.350

一个好主意是不要使用立即模式来渲染你的块，我使用显示列表，因为它们最容易设置并且非常快。其次，即使您仍然只使用即时模式，然后在绘图时只使用一个 glBegin/glEnd 调用，在未来使用纹理图集来处理纹理以及您的主要问题是如何停止渲染不可见的面孔，它很简单，我这样做的方式基本上是为每个返回布尔值的面创建六个方法。如果该面方向的块类型是空气块，您将简单地返回，如果是。那么这意味着它将返回true，因此渲染它。并在您的绘图方法中添加参数“布尔背面，布尔顶面......等”和一个 if 语句检查要绘制哪一面。

希望我有所帮助，祝你好运！

# mysql - 尝试将 mysql 与 jsp 连接时出现 ClassNotFoundException

> ID：10045459
> 
> 赞同：0
> 
> 时间：2012-04-06T15:16:47.907
> 
> 标签：mysql, jsp, jdbc

我有一个看起来像这样的 JSP

```
<%
Class.forName("com.mysql.jdbc.Driver"); 
java.sql.Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/test","root","root"); 

Statement st= con.createStatement(); 

ResultSet rs=st.executeQuery("select * from example");
.
.
.
%> 
```

当我请求 jsp 时，我收到此错误：

HTTP 状态 500 -

类型异常报告

信息

描述 服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

```
org.apache.jasper.JasperException: javax.servlet.ServletException: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:549)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:455)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause
javax.servlet.ServletException: java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
org.apache.jasper.runtime.PageContextImpl.doHandlePageException(PageContextImpl.java:911)
org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContextImpl.java:840)
org.apache.jsp.test_jsp._jspService(test_jsp.java:95)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
root cause
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1701)
org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1546)
org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:126)
org.apache.jasper.servlet.JasperLoader.loadClass(JasperLoader.java:63)
java.lang.Class.forName0(Native Method)
java.lang.Class.forName(Class.java:186)
org.apache.jsp.test_jsp._jspService(test_jsp.java:69)
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:432)
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

note Apache Tomcat/7.0.26 日志中提供了根本原因的完整堆栈跟踪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T01:20:35.270

只需将**mysql-connector-java-5.1.13-bin.jar**文件放在您的目录的**WEB-INF/lib**中，该目录存在于 tomcat 的 webapps 中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T15:26:09.637

将 mysql `mysql-connector-java-5.1.13-bin`jar 添加到您的类路径。

# ruby-on-rails - 在 has_many 关联上的 mongoid

> ID：10045460
> 
> 赞同：0
> 
> 时间：2012-04-06T15:16:57.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, polymorphic-associations

由于 mongo 不是关系型的，我想知道如何在 has_many 多态关联上找到特定类型。

我有 3 个模型，[地点、城市和国家/地区] 所有 3 个都可以有评论（多态）

如何返回具有特定模型关联的所有评论？我知道如何在简单的 has_many 关联上做到这一点，但不知道如何在多态关联上做到这一点？

通常我会做这样的事情：

```
 @user = User.where(username: params[:user]).first
  @user ? @reviews = @reviews.where(user_id: @user.id) : @reviews = nil 
```

但是对于多态关联，我迷路了？

```
#@reviews = params[:review_type].constantize if params[:review_type].present? #@reviews.reviewable.where(review_type: params[:review_type])

@reviews = Review.order_by([:updated_at, :desc]).page(params[:page])#.order(sort_column + " " + sort_direction) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T11:54:10.267

我假设您的多态关系已命名`reviewable`您可以按关联类型查询您的评论，如下所示：

```
Review.where(:reviewable_type => "Place") # Returns all reviews for 'places'
Review.where(:reviewable_type => "City") # Returns all reviews for 'cities'
Review.where(:reviewable_type => "Country") # Returns all reviews for 'countries' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:45:02.423

如果您在模型中很好地定义了关联关联，则只需调用该方法。

# c++ - 为什么 COM 类需要构造函数？不注册如何使用COM类？

> ID：10045465
> 
> 赞同：1
> 
> 时间：2012-04-06T15:17:03.723
> 
> 标签：c++, com, directshow

我正在研究来自 Windows SDK 的 DirectShow 示例。许多类具有非默认构造函数。这些构造函数是如何调用的？谁提供论据？

我可以在没有注册的情况下在 C++ 程序中使用这些类吗？如果是这样，我可以直接使用类构造函数。

如果我使用未注册的 COM 类，则以下代码片段中会发生什么：

```
Foo * foo = new Foo(.....); // note, not using CoCreateInstance
Bar * bar = foo->QueryInterface(...);
bar->Release();
delete foo; // CRASH? 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:33:45.843

公开为*真实*COM coclass 的 C++ 类通常不能具有带参数的构造函数。COM 客户端代码没有将参数传递给 CoCreateInstance() 函数的机制。COM 接口通常有一个 Initialize() 方法来提供所需的初始化。从技术上讲，也可以修改，CoCreateInstance 只是一个隐藏类工厂 (IClassFactory) 的便利函数。具有自定义 CreateInstance() 方法的自定义类工厂是可能的，但很少这样做。

Microsoft 在非 COM 代码中也使用 COM 代码中常见的基于接口的编程模型。DirectX 就是一个很好的例子。将 Direct3DCreate9Ex() 视为类工厂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T15:25:24.333

它与 无关`COM`，只是框架是以这种方式构建的，并且 DirectShow BaseClasses 中的构造函数参数对于将所有内容组合在一起 - 类，祖先，实例化工厂是必要的。

使用 COM 类而不注册可能是可能的，也可能是不可能的。我怀疑您可能对使用 DirectShow filter without registration 感兴趣，并且有一篇关于该主题的好文章：[Using Filters without Registration](http://www.gdcl.co.uk/2011/June/UnregisteredFilters.htm)。

# java - 如何使用默认构造函数伪造 InitialContext

> ID：10045466
> 
> 赞同：14
> 
> 时间：2012-04-06T15:17:04.980
> 
> 标签：java, unit-testing, initial-context

全部，

我正在尝试在一些古老的 java 代码中进行一些单元测试（没有接口，没有抽象等）

这是一个使用 ServletContext 的 servlet（我假设它是由 Tomcat 设置的），并且它在 web.xml/context.xml 文件中设置了数据库信息。现在，我已经想出了如何制作一个 Fake ServletContext，但是代码有

```
 InitialContext _ic = new InitialContext(); 
```

到处都是（所以更换它是不可行的）。我需要找到一种方法来使默认 InitialContext() 能够在`_ic.lookup(val)`不引发异常的情况下执行此操作。

我假设 context.xml 以某种方式被加载，但是这种魔法是如何工作的，我正在画一个空白。有人有想法么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-06T18:10:09.450

`InitialContext`利用使用 SPI 来处理其创建的事实。您可以通过系统属性( )创建一个实现`javax.naming.spi.InitialContextFactory`并将其传递给您的测试，从而挂钩它的生命周期。它比听起来简单。`javax.naming.factory.initial``Context.INTITIAL_CONTEXT_FACTORY`

给定这个类：

```
public class UseInitialContext {

    public UseInitialContext() {
        try {
            InitialContext ic = new InitialContext();
            Object myObject = ic.lookup("myObject");
            System.out.println(myObject);
        } catch (NamingException e) {
            e.printStackTrace();
        }
    }

} 
```

而这个 impl `InitialContextFactory`：

```
public class MyInitialContextFactory implements InitialContextFactory {

    public Context getInitialContext(Hashtable<?, ?> arg0)
            throws NamingException {

        Context context = Mockito.mock(Context.class);
        Mockito.when(context.lookup("myObject")).thenReturn("This is my object!!");
        return context;
    }
} 
```

`UseInitialContext`在junit测试中创建一个实例

```
-Djava.naming.initial.factory=initial.context.test.MyInitialContext 
```

在命令行输出上`This is my object!!`（易于在 eclipse 中设置）。我喜欢[Mockito](http://mockito.org/)的嘲笑和存根。如果您处理大量遗留代码，我还推荐 Micheal Feather 的[《有效处理遗留代码》。](https://rads.stackoverflow.com/amzn/click/com/0131177052)这完全是关于如何在程序中找到接缝，以便隔离特定的部分进行测试。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-06T16:14:32.863

这是我为单元测试设置初始上下文的解决方案。首先，我将以下测试依赖项添加到我的项目中：

```
<dependency>
  <groupId>org.apache.tomcat</groupId>
  <artifactId>catalina</artifactId>
  <version>6.0.33</version>
  <scope>test</scope>
</dependency> 
```

然后我使用以下代码创建了一个静态方法：

```
public static void setupInitialContext() throws Exception {
    System.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.naming.java.javaURLContextFactory");
    System.setProperty(Context.URL_PKG_PREFIXES, "org.apache.naming");
    InitialContext ic = new InitialContext();
    ic.createSubcontext("jdbc");
    PGSimpleDataSource ds = new PGSimpleDataSource();
    ds.setDatabaseName("postgres");
    ds.setUser("postgres");
    ds.setPassword("admin");
    ic.bind("jdbc/something", ds);
} 
```

最后，在我的每个测试类中，我添加了一个调用 setupInitialContext 的@BeforeClass 方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-06T16:04:59.510

尝试设置系统变量之前：

```
System.setProperty(Context.INITIAL_CONTEXT_FACTORY,
        "org.apache.naming.java.javaURLContextFactory");
System.setProperty(Context.URL_PKG_PREFIXES,
        "org.apache.naming");
InitialContext ic = new InitialContext(); 
```

如果您使用的是 JUnit，请遵循此文档：[https ://blogs.oracle.com/randystuph/entry/injecting_jndi_datasources_for_junit](https://blogs.oracle.com/randystuph/entry/injecting_jndi_datasources_for_junit)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-06T15:33:26.667

您可以使用[PowerMock](http://code.google.com/p/powermock/)模拟 InitialContext 的构造并控制其行为。[此处](http://code.google.com/p/powermock/wiki/MockConstructor)记录了构造函数模拟。

PowerMock 测试可能非常混乱和复杂，重构通常是更好的选择。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-04T16:31:20.387

今天我遇到了同样的问题（我们不能使用 PowerMock）并以这种方式解决了它：

1.  不要在构造函数中查找，因此当您在对象上调用 @InitMock 时，构造函数还不需要上下文。

2.  创建一个在需要时检索服务 bean 的方法，例如“getService().serviceMethod(param, param ...)”：

> ```
>  /* Class ApplicationResourceProvider */
> 
>     /* We can mock this and set it up with InjectMocks */
>     InitialContext ic;
> 
>     /* method hiding the lookup */
>     protected ApplicationService getService() throws NamingException {
>         if(ic == null)
>             ic = new InitialContext();
>         return (ApplicationService)ic.lookup("java:global/defaultApplicationLocal");
>     } 
> ```

3.  在测试中，设置它：

> ```
> @Mock
> ApplicationService applicationServiceBean;
> 
> @Mock
> InitialContext ic;
> 
> @InjectMocks
> ApplicationResourceProvider arp;
> 
> @Before
> public void setUp() throws Exception {
>     MockitoAnnotations.initMocks(this);
>     when(ic.lookup(anyString())).thenReturn(applicationServiceBean);
>     ...
> } 
> ```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T16:22:31.390

你考虑过[模仿](http://code.google.com/p/mockito/)吗？

这很简单：

> InitialContext ctx = mock(InitialContext.class);

顺便说一句，如果您选择使用模拟，我建议您也阅读这篇文章：[http ://martinfowler.com/articles/mocksArentStubs.html](http://martinfowler.com/articles/mocksArentStubs.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-03T14:29:57.493

一个穷人的独立实现，不使用外部库：

```
public class myTestClass {
    public static class TestContext extends InitialContext {
        public TestContext() throws NamingException {
            super(true /*prevents initialization*/);
        }

        static Object someExpectedValue = "the expected string or object instance";

        /*override the method(s) called by the legacy program on _ic, check the parameter and return the wanted value */
        public Object lookup(String name) throws NamingException {
            return name != null && name.equals("theValueOfVal") ? someExpectedValue : null;
        }
    }

    public static class TestInitialContextFactory implements InitialContextFactory {
        public Context getInitialContext(Hashtable<?, ?> arg0) throws NamingException {
            return new TestContext();
        }
    }

    public static void main(String[] args) throws SQLException {
        System.setProperty(Context.INITIAL_CONTEXT_FACTORY, "the.package.myTestClass$TestInitialContextFactory");
        /*now call the legacy logic to be tested*/
        ... 
```

您可以`switch`在方法的覆盖中使用 a`lookup`来返回`val`传递给`_ic.lookup(val)`整个遗留程序的每个不同值的预期值。

# solr - SOLR - Tika - 存储文件的二进制版本

> ID：10045472
> 
> 赞同：1
> 
> 时间：2012-04-06T15:18:10.090
> 
> 标签：solr, apache-tika

我正在使用 SOLR 中集成的 Tika 来索引文档并允许搜索所述文档。这工作非常顺利（现在我的设置与 SOLR 附带的示例完全相同）并且我确实可以索引和搜索文档。除了索引文档之外，我还想将二进制版本存储在 SOLR 中，这样当搜索返回结果时，我可以返回完整的 PDF/Word/等。文件下载。这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T18:23:55.247

没有。
Solr 是全文搜索引擎，不提供任何开箱即用的实现来存储二进制文件。
相反，您可以轻松地将二进制文件托管在外部，并通过 id 链接的 http 呈现它们。

# excel - Dir() 函数在 Mac Excel 2011 VBA 中不起作用

> ID：10045474
> 
> 赞同：13
> 
> 时间：2012-04-06T15:18:14.170
> 
> 标签：excel, vba, macos

您好我正在尝试列出 Excel 工作簿所在的子目录中的所有文件。由于某种原因，代码无法在 Dir 函数之外执行。有人可以请教吗？谢谢！

```
Sub ListFiles()

    ActiveSheet.Name = "temp"

    Dim MyDir As String
    'Declare the variables
    Dim strPath As String
    Dim strFile As String
    Dim r As Long

    MyDir = ActiveWorkbook.Path 'current path where workbook is
    strPath = MyDir & ":Current:" 'files within "Current" folder subdir, I am using Mac Excel 2011

    'Insert the headers in Columns A, B, and C
    Cells(1, "A").Value = "FileName"
    Cells(1, "B").Value = "Size"
    Cells(1, "C").Value = "Date/Time"

    'Find the next available row
    r = Cells(Rows.Count, "A").End(xlUp).Row + 1

    'Get the first file from the folder
            'Note: macro stops working here
    strFile = Dir(strPath & "*.csv", vbNormal)

    'Loop through each file in the folder
    Do While Len(strFile) > 0

        'List the name, size, and date/time of the current file
        Cells(r, 1).Value = strFile
        Cells(r, 2).Value = FileLen(strPath & strFile)
        Cells(r, 3).Value = FileDateTime(strPath & strFile)

        'Determine the next row
        r = r + 1

        'Get the next file from the folder
        strFile = Dir

    Loop

    'Change the width of the columns to achieve the best fit
    Columns.AutoFit

End Sub 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-06T16:08:02.080

Gianna，你不能`DIR`在 VBA-EXCEL 2011 中这样使用。我的意思是不支持通配符。为此，您必须使用 MACID。

请参阅此代码示例（**TRIED AND TESTED**）

```
Sub Sample()
    MyDir = ActiveWorkbook.Path
    strPath = MyDir & ":"

    strFile = Dir(strPath, MacID("TEXT"))

    'Loop through each file in the folder
    Do While Len(strFile) > 0
        If Right(strFile, 3) = "csv" Then
            Debug.Print strFile
        End If

        strFile = Dir    
    Loop
End Sub 
```

有关 MACID 的更多详细信息，请参阅此链接

**主题：MacID 函数**

**链接**： http: [//office.microsoft.com/en-us/access-help/macid-function-HA001228879.aspx](http://office.microsoft.com/en-us/access-help/macid-function-HA001228879.aspx)

**编辑：**

万一我怀疑该链接消失了，这里有一个摘录。

> > > > **MacID 函数**
> > > > 
> > > > 在 Macintosh 上用于将 4 个字符的常量转换为 Dir、Kill、Shell 和 AppActivate 可以使用的值。
> > > > 
> > > > **句法**
> > > > 
> > > > MacID（常数）
> > > > 
> > > > 必需的常量参数由 4 个字符组成，用于指定资源类型、文件类型、应用程序签名或 Apple 事件，例如，TEXT、OBIN、Excel 文件的“XLS5”（Excel 97 的“XLS8”），Microsoft Word 使用“W6BN”（Word 97 为“W8BN”）等等。
> > > > 
> > > > **评论**
> > > > 
> > > > MacID 与 Dir 和 Kill 一起使用以指定 Macintosh 文件类型。由于 Macintosh 不支持 * 和 ? 作为通配符，您可以使用四字符常量来标识文件组。例如，以下语句从当前文件夹返回 TEXT 类型的文件：
> > > > 
> > > > 目录（“SomePath”，MacID（“TEXT”））
> > > > 
> > > > MacID 与 Shell 和 AppActivate 一起使用，以使用应用程序的唯一签名指定应用程序。

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T20:22:29.273

```
If Dir(outputFileName) <> "" Then
Dim ans
ans = MsgBox("File already exists.Do you wish to continue(the previous file will be    deleted)?", vbYesNo)
If ans = vbNo Then
Exit Sub
Else
Kill outputFileName
End If
End If

For listitem = 0 To List6.ListCount() - 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-26T20:19:18.283

对于上面的答案，当我在 MacID 中取出“TEXT”时，它对我有用：

```
Sub LoopThruFiles()

    Dim mydir As String
    Dim foldercount As Integer
    Dim Subjectnum As String
    Dim strpath As String
    Dim strfile As String

    ChDir "HD:Main Folder:"
    mydir = "HD:Main Folder:"
    SecondaryFolder = "Folder 01:"
    strpath = mydir & SecondaryFolder

    strfile = Dir(strpath)

    'Loop through each file in the folder
    Do While Len(strfile) > 0
     If Right(strfile, 3) = "cef" Then
        MsgBox (strfile)
        End If
        strfile = Dir
    Loop
End Sub 
```

# emacs - Emacs 有类似 go-eldoc-mode 的东西吗？

> ID：10045481
> 
> 赞同：3
> 
> 时间：2012-04-06T15:18:56.033
> 
> 标签：emacs, go

当你用 Emacs Lisp 编写代码时，eldoc-mode 会显示你正在调用的函数的参数。Emacs 中的 Google Go 是否存在类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:30:33.427

看这里：[https](https://github.com/nsf/gocode) ://github.com/nsf/gocode和“Emacs 设置”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-08T02:38:11.947

我写了[go-eldoc](https://github.com/syohex/emacs-go-eldoc)。您可以使用来自 MELPA 的 package.el 安装 go-eldoc。

# javascript - 将 OPTIONAL 参数发送到 javascript 函数有什么问题 - 测试未定义

> ID：10045484
> 
> 赞同：0
> 
> 时间：2012-04-06T15:19:12.877
> 
> 标签：javascript

我用 ajax 的信息填写下拉列表——有时（编辑时）我不仅想填写下拉列表，还选择值......所以我添加了一个可选参数 - 并检查 IF != UNDEFINED ...这种方法有什么问题吗？

它似乎工作。

```
function getFormFields(TypeOfFields, NameOfElement, OptionalValue) {
    $.ajax({
        type: 'POST',
        url: 'WorkflowWizard.aspx?TemplateWorkflowID=' + $("#hiddenTemplateWorkflowID").val(),
        data: {
            'LinkFormField': true,
            'TypeOfFields': TypeOfFields
        },
        success: function (data) {
            $("#vizLoadingDiv").hide();
            $("#" + NameOfElement).html(data);
            if (OptionalValue != undefined) {
                $("#" + NameOfElement).val(OptionalValue);
            }
        },
        error: function (xhr) {
            alert(xhr.responseText);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:59:23.453

要看。您可以使用三个参数调用该函数，其中最后一个参数的值为 undefined - 这可能是也可能不是问题。处理此问题的“正确”方法是检查 arguments.length，这将是 2 或 3，具体取决于您实际使用的参数数量。

# java-me - J2ME 空指针异常中的相机快照

> ID：10045485
> 
> 赞同：2
> 
> 时间：2012-04-06T15:19:19.830
> 
> 标签：java-me, midp, mmapi

我在这方面花了很长时间，但还没有成功。在我捕获图像并发送到服务器的应用程序中，我得到下面的 NullPointerException；

```
java.lang.NullPointerException:   0

at Files.CameraMIDlet.snap(CameraMIDlet.java:120)
at Files.CameraForm.commandAction(CameraForm.java:116)
at javax.microedition.lcdui.Display$ChameleonTunnel.callScreenListener(), bci=46
at com.sun.midp.chameleon.layers.SoftButtonLayer.processCommand(), bci=74
at com.sun.midp.chameleon.layers.SoftButtonLayer.soft2(), bci=173
at com.sun.midp.chameleon.layers.SoftButtonLayer.keyInput(), bci=78
at com.sun.midp.chameleon.CWindow.keyInput(), bci=38
at javax.microedition.lcdui.Display$DisplayEventConsumerImpl.handleKeyEvent(), bci=17
at com.sun.midp.lcdui.DisplayEventListener.process(), bci=277
at com.sun.midp.events.EventQueue.run(), bci=179
at java.lang.Thread.run(Thread.java:722) 
```

错误发生在`byte[] image = videoControl.getSnapshot("encoding = jpeg");`CameraMIDlet 和`midlet.snap();`CameraForm 中，在下面的代码中。

CameraForm 的代码在这里：

```
package Files;

import javax.microedition.media.*;

import javax.microedition.lcdui.*;

import javax.microedition.media.control.*;

import java.io.IOException;

class CameraForm extends Form implements CommandListener {

private final CameraMIDlet midlet;

private final Command exitCommand;

private Command captureCommand = null;

private Command showImageCommand = null;

private Player player = null;

private static VideoControl videoControl = null;

private boolean active = false;

private StringItem messageItem;

public CameraForm(CameraMIDlet midlet) {
    super("Camera");
    this.midlet = midlet;
    messageItem = new StringItem("Message", "start");
    append(messageItem);
    exitCommand = new Command("EXIT", Command.EXIT, 1);
    addCommand(exitCommand);
    setCommandListener(this);
    try {
        //creates a new player and set it to realize
        player = Manager.createPlayer("capture://video");
        player.realize();
        //Grap the Video control and set it to the current display
        videoControl = (VideoControl) (player.getControl("VideoControl"));
        if (videoControl != null) {
            append((Item) (videoControl.initDisplayMode(
                    VideoControl.USE_GUI_PRIMITIVE, null)));
            captureCommand = new Command("CAPTURE", Command.SCREEN, 1);
            addCommand(captureCommand);
            messageItem.setText("OK");
        } else {
            messageItem.setText("No video control");
        }
    } catch (IOException ioe) {
        messageItem.setText("IOException: " + ioe.getMessage());
    } catch (MediaException me) {
        messageItem.setText("Media Exception: " + me.getMessage());
    } catch (SecurityException se) {
        messageItem.setText("Security Exception: " + se.getMessage());
    }
}

 *  the video should be visualized on the sreen
 *  therefore you have to start the player and set the videoControl visible

synchronized void start() {
    if (!active) {
        try {
            if (player != null) {
                player.start();
            }
            if (videoControl != null) {
                videoControl.setVisible(true);
                                   //midlet.snap();
            }
        } catch (MediaException me) {
            messageItem.setText("Media Exception: " + me.getMessage());
        } catch (SecurityException se) {
            messageItem.setText("Security Exception: " + se.getMessage());
        }
        active = true;
    }
}

 *  to stop the player. First the videoControl has to be set invisible
 *  than the player can be stopped

synchronized void stop() {
    if (active) {
        try {
            if (videoControl != null) {
                videoControl.setVisible(false);
            }
            if (player != null) {
                player.stop();
            }
        } catch (MediaException me) {
            messageItem.setText("Media Exception: " + me.getMessage());
        }
        active = false;
    }
}

 *  on the captureCommand a picture is taken and transmited to the server

public void commandAction(Command c, Displayable d) {
    if (c == exitCommand) {
        midlet.cameraFormExit();
    } else {
        if (c == captureCommand) {

                      midlet.snap();

        }

    }
}

} 
```

CameraMIDlet 的代码如下：

```
package Files; 

import java.io.*;

import javax.microedition.midlet.*;

import javax.microedition.lcdui.*;

import javax.microedition.io.*;

import javax.microedition.media.control.*;

import java.io.IOException;

import javax.microedition.media.MediaException;

public class CameraMIDlet extends MIDlet {

private CameraForm cameraSave = null;

private DisplayImage displayImage = null;

    CameraForm  captureThread;

    private static VideoControl videoControl;

    private StringItem messageItem;

public CameraMIDlet() {
}
/*
 * startApp()
 * starts the MIDlet and generates cameraSave, displayImage, database
 *
 **/

public void startApp() {
    Displayable current = Display.getDisplay(this).getCurrent();
    if (current == null) {
        //first call
        cameraSave = new CameraForm(this);
        displayImage = new DisplayImage(this);
        Display.getDisplay(this).setCurrent(cameraSave);
        cameraSave.start();

    } else {
        //returning from pauseApp
        if (current == cameraSave) {
            cameraSave.start();
        }
        Display.getDisplay(this).setCurrent(current);
    }
}
public void pauseApp() {
    if (Display.getDisplay(this).getCurrent() == cameraSave) {
        cameraSave.stop();
    }
}
public void destroyApp(boolean unconditional) {
    if (Display.getDisplay(this).getCurrent() == cameraSave) {
        cameraSave.stop();
    }
}
private void exitRequested() {
    destroyApp(false);
    notifyDestroyed();
}
void cameraFormExit() {
    exitRequested();
}
/**
 * restart the camera again
 *
 */
void displayCanvasBack() {
    Display.getDisplay(this).setCurrent(cameraSave);
    cameraSave.start();
}

/**
 *  the byte[] of the image should be transmitted to a server
 *
 **/
void buildHTTPConnection(byte[] byteImage) {
    displayImage.setImage(byteImage);
    Display.getDisplay(this).setCurrent(displayImage);
    HttpConnection hc = null;
    OutputStream out = null;
    try {
        //enode the image data by the Base64 algorithm
        String stringImage = Base64.encode(byteImage);
        // URL of the Sevlet
        String url = new String(
                "http://ip-adress:8080/C:/Users/HASENDE/Documents/NetBeansProjects/Mobile/pics");
        // Obtain an HTTPConnection
        hc = (HttpConnection) Connector.open(url);
        // Modifying the headers of the request
        hc.setRequestMethod(HttpConnection.POST);
        // Obtain the output stream for the HttpConnection
        out = hc.openOutputStream();

        out.write(stringImage.getBytes());          
    } catch (IOException ioe) {
        StringItem stringItem = new StringItem(null, ioe.toString());
    } finally {
        try {
            if (out != null)
                out.close();
            if (hc != null)
                hc.close();
        } catch (IOException ioe) {
        }
    }
    // ** end network
}
/**
 *  stop the camera, show the captured image and transmit the image to a server
 **/
void transmitImage(byte[] image) {
    cameraSave.stop();
    Display.getDisplay(this).setCurrent(displayImage);
    buildHTTPConnection(image);
}

     public void snap(){
               try {
         byte[] image = videoControl.getSnapshot("encoding = jpeg");
         transmitImage(image);  
         messageItem.setText("Ok");
    } catch (MediaException me) {
          messageItem.setText("Media Exception: " + me.getMessage());
      } 

        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-07T06:21:46.307

通过识别引发 NPE 的语句，您可以 99% 接近找到错误：

```
 byte[] image = videoControl.getSnapshot("encoding = jpeg"); 
```

上述语句中的 NPE 表示`videoControl`为空。现在，如果您仔细观察，您可能会注意到在 CameraMIDlet 中，videoControl 被初始化为 null 并且永远不会更改为其他任何内容 - 这就是您获得 NPE 的原因。顺便说一句，从 CameraForm 代码看来，您打算使用那里定义的 videoControl 对象，不是吗。

边注。CameraForm 似乎被设计为在多个线程中使用（有`synchronized`修饰符） - 如果是这种情况，您最好确保 videoControl 也以同步方式从中获取。同样在这种情况下，在标志`volatile`的定义中添加修饰符：`active`

```
 private volatile boolean active = false; // in CameraForm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T09:25:43.100

对于捕获照片使用画布而不是表单，请检查以下代码以获取照片捕获

```
public class ImageCaptureCanvas extends Canvas {

    UrMidlet midlet;
    VideoControl videoControl;
    Player player;
    SnapShotCanvas snap;
    private Display display;

    public ImageCaptureCanvas(UrMidlet midlet) throws MediaException {
        this.midlet = midlet;

        this.display = Display.getDisplay(midlet);
        this.setFullScreenMode(true);

        try {
            player = Manager.createPlayer("capture://image");
            player.realize();
            videoControl = (VideoControl) player.getControl("VideoControl");

        } catch (Exception e) {
            dm(e.getClass().getName());
        }

        videoControl.initDisplayMode(VideoControl.USE_DIRECT_VIDEO, this);
        try {
            videoControl.setDisplayLocation(0,0);
            videoControl.setDisplaySize(getWidth(), getHeight());

        } catch (MediaException me) {
            try {
                videoControl.setDisplayFullScreen(true);
            } catch (MediaException me2) {
            }
        }
        dm("icc10");
        videoControl.setVisible(true);
        dm("icc11");
        player.start();
        this.display.setCurrent(this);
    }

     public void dm(String message) {
        Form form = new Form("Error");
        form.append(message);
        display.setCurrent(form);
    }

    public void paint(Graphics g) {
    }

    protected void keyPressed(int keyCode) {
        boolean prv=false;
        int actn=getGameAction(keyCode);
        switch (keyCode) {
            case KEY_NUM5:
                prv=true;
                Thread t = new Thread() {

                    public void run() {
                        try {
                            byte[] raw = videoControl.getSnapshot(null);
                            Image image = Image.createImage(raw, 0, raw.length);

                            snap = new SnapShotCanvas(image);
                            display.setCurrent(snap);
                        } catch (Exception e) {
                            dm(e.getClass().getName() + " " + e.getMessage());
                        }
                    }
                };
                t.start();
                break;
        }
        if(!prv){
            switch (actn) {
            case Canvas.FIRE:
                Thread t1 = new Thread() {

                    public void run() {
                        try {
                            byte[] raw = videoControl.getSnapshot(null);
                            Image image = Image.createImage(raw, 0, raw.length);

                           snap = new SnapShotCanvas(image);
                           display.setCurrent(snap);

                        } catch (Exception e) {
                            dm(e.getClass().getName() + " " + e.getMessage());
                        }
                    }
                };
                t1.start();
                break;

        }
        }

    }
} 
```

SnapShotCanvas 代码在这里

```
class SnapShotCanvas extends Canvas {

    private Image image;

    public SnapShotCanvas(Image image) {
        this.image = image;
        setFullScreenMode(true);
    }

    public void paint(Graphics g) {
        g.drawImage(image, getWidth() / 2, getHeight() / 2, Graphics.HCENTER | Graphics.VCENTER);
    }
} 
```

# c++ - eclipse 可以使用 cocos2d 等外部 库自动完成吗？

> ID：10045486
> 
> 赞同：2
> 
> 时间：2012-04-06T15:19:24.533
> 
> 标签：c++, eclipse, java-native-interface, cocos2d-android

我在 linux 中使用 Eclipse。我已经使用 Cocos2D 创建了一个项目。这是一个 Java 项目，但我打开 cpp 和头文件来编写本机代码。

每次，我都用 ./build_native.sh 编译本机代码

我想知道是否可以将 eclipse 配置为在本机代码中自动完成功能。

例子：

```
CCDirector::sharedDirector()-> 
```

必须显示 getWinSize() 之类的选项。

一些想法？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T21:50:00.283

我无法回答您问题的具体细节，但总的来说，我在使用 iostream 和 STL 库的 C/C++ 中遇到了这个问题。即使一切都可以正常编译，但它不支持自动完成。我最终深入研究了提供的库到包含每个 .h 文件集合的根目录，并将它们添加到目录路径中。然后我重建了索引，然后自动完成开始工作。因此，如果 cocos2d 将 .h 文件存储在多个位置，则添加每个文件夹。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T21:44:08.000

你安装了[CDT](http://www.eclipse.org/cdt/)吗？这使 Eclipse C/C++ 功能类似于它已经为 Java 提供的功能。

# ios5 - Xcode 4.2 IOS 5，uitextview 没有显示键盘

> ID：10045488
> 
> 赞同：1
> 
> 时间：2012-04-06T15:19:45.023
> 
> 标签：ios5, keyboard

我有一个在 iOS 4 上运行良好的 uitextview，当我传递到 iOS 5 时，键盘没有显示。

如果我添加：[self.view.window makeKeyAndVisible]；==>- (void)textViewDidBeginEditing:(UITextView *)textView ---> 否则不运行

但由于我传递给 iOS 5（模拟器/设备），键盘没有显示。

有人可以帮忙吗？

# android - 得到由 admob 引起的致命异常

> ID：10045491
> 
> 赞同：3
> 
> 时间：2012-04-06T15:19:57.763
> 
> 标签：android, xml, admob, inflate

我在市场上有一个使用 admob 的应用程序，现在我想更新我的应用程序。当我测试这个新版本时，我得到了一个由 admob 引起的致命异常。

```
04-06 15:09:04.123: E/AndroidRuntime(409): Caused by: android.view.InflateException: Binary XML file line #51: Error inflating class com.google.ads.AdView

04-06 15:09:04.123: E/AndroidRuntime(409): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView in loader dalvik.system.PathClassLoader[/data/app/com.kmbdev.purrkitty-2.apk] 
```

这是第 51 行的 xml 文件：

```
 <com.google.ads.AdView
    android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@id/bottom_border"
    android:layout_toLeftOf="@id/right_border"
    ads:adSize="BANNER"
    ads:adUnitId="my id"
    ads:loadAdOnCreate="true" /> 
```

我没有对发布的原始应用程序进行任何重大更改。我只添加了启动画面和一些语言字符串文件并将版本更改为 1.2，发布的应用程序是 1.1 版本。我想知道为什么这个应用程序将不再运行。

我又试了一次，日志如下：

```
04-11 12:13:21.474: D/AndroidRuntime(282): Shutting down VM
04-11 12:13:21.474: W/dalvikvm(282): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-11 12:13:21.644: E/AndroidRuntime(282): FATAL EXCEPTION: main
04-11 12:13:21.644: E/AndroidRuntime(282): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.kmbdev.purrkitty/com.kmbdev.purrkitty.Cat1}: android.view.InflateException: Binary XML file line #52: Error inflating class com.google.ads.AdView
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.os.Looper.loop(Looper.java:123)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-11 12:13:21.644: E/AndroidRuntime(282):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 12:13:21.644: E/AndroidRuntime(282):  at java.lang.reflect.Method.invoke(Method.java:521)
04-11 12:13:21.644: E/AndroidRuntime(282):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-11 12:13:21.644: E/AndroidRuntime(282):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-11 12:13:21.644: E/AndroidRuntime(282):  at dalvik.system.NativeStart.main(Native Method)
04-11 12:13:21.644: E/AndroidRuntime(282): Caused by: android.view.InflateException: Binary XML file line #52: Error inflating class com.google.ads.AdView
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:576)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
04-11 12:13:21.644: E/AndroidRuntime(282):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:198)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.app.Activity.setContentView(Activity.java:1647)
04-11 12:13:21.644: E/AndroidRuntime(282):  at com.kmbdev.purrkitty.Cat1.onCreate(Cat1.java:25)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-11 12:13:21.644: E/AndroidRuntime(282):  ... 11 more
04-11 12:13:21.644: E/AndroidRuntime(282): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView in loader dalvik.system.PathClassLoader[/data/app/com.kmbdev.purrkitty-2.apk]
04-11 12:13:21.644: E/AndroidRuntime(282):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
04-11 12:13:21.644: E/AndroidRuntime(282):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
04-11 12:13:21.644: E/AndroidRuntime(282):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.view.LayoutInflater.createView(LayoutInflater.java:466)
04-11 12:13:21.644: E/AndroidRuntime(282):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:565)
04-11 12:13:21.644: E/AndroidRuntime(282):  ... 20 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T23:57:03.550

我遇到了同样的问题，浪费了 3 个多小时才弄清楚。最后，我找到了让它工作的方法。

1.  将 SDK 名称从 GoogleAdMobAdsSdk-6.0.0.jar 更改为 GoogleAdMobAdsSdk.jar
2.  在项目下创建“libs”文件夹，在文件夹中复制上面的 sdk 并使用 Add External JARs 链接库。
3.  如果不起作用，请将导入类名称从 com.google.ads.* 更改为 com.google.ads.AdRequest、comp.google.ads.AdView 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:22:52.440

您确定清单包含所有标签吗？（admob 的那些）。同样在 XML 中，您需要为 xmlns 设置一个 addl 标记，对吗？你指定了吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T15:10:24.370

我通过将保存 jar 文件的文件夹重命名`/lib`为`/libs`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-25T14:10:30.983

要解决这个问题，您只需以两种方式链接 sdk .jar 文件。首先，将其添加到 libs 文件夹（如果没有，请创建它）然后，右键单击 .jar 文件，转到 Build Path->Add to Build Path... 三天得出结论.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T17:28:04.693

清理您的项目，如果您没有在 Eclipse 中激活自动构建，请进行手动构建。它会起作用的。

# c++ - CreateDirectory 报告它失败但错误代码是 ERROR_SUCCESS

> ID：10045495
> 
> 赞同：2
> 
> 时间：2012-04-06T15:20:11.903
> 
> 标签：c++, windows, error-code, create-directory

我有一个用于创建目录的函数。它使用 CreateDirectoryA()

CreateDirectory 报告它失败，但是当我使用 GetLastError() 检查错误代码时，它报告 ERROR_SUCCESS

代码：

```
BOOL isDirCreated = CreateDirectoryA(dirName.c_str(), NULL);
DWORD dw = GetLastError();
if (isDirCreated) {
        if (!SetFileAttributesA(dirName.c_str(), attributes)) {
            printf("SetFileAttributes() %s failed with (%d)", dirName.c_str(), GetLastError()));
            return;
        }
    } else {
        printf("CreateDirectory() %s Failed with (%d)", dirName.c_str(), dw));
        if(ERROR_ALREADY_EXISTS != dw) {
            return;
        }
    } 
```

这将返回：（对函数的多次调用）

```
CreateDirectory() testDir Failed with (0)
CreateDirectory() testDir\dir Failed with (183) 
```

即使 CreateDirectoryA 返回 false，也会创建目录。失败总是发生在第一次调用该函数时。所有后续调用都按预期工作。

为什么 CreateDirectory 在成功创建目录时会返回 false 的任何想法。

这是一个类似的帖子，但该解决方案对我不起作用：

[ReadFile() 表示失败，但错误代码为 ERROR_SUCCESS](https://stackoverflow.com/questions/5685090/readfile-says-it-failed-but-the-error-code-is-error-success)

*更新* 原来这个错误是因为代码中包含的另一个头文件有一个函数“GetLastError”，另一个函数在一个单独的命名空间中，所以解决方案是调用 GetLastError，如下所示。

```
/*
 * the :: will tell it to use the GetLastError that is available on the global 
 * scope.  Most of Microsoft's calls don't have any namespace.
 */
DWORD dw = ::GetLastError(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T16:40:44.550

事实证明，这个错误是因为代码中包含的另一个标头有一个函数“GetLastError”，另一个函数位于单独的命名空间中，因此解决方案是调用 GetLastError，如下所示。

```
/*
 * the :: will tell it to use the GetLastError that is available on the global 
 * scope.  Most of Microsoft's calls don't have any namespace.
 */
DWORD dw = ::GetLastError(); 
```

# php - 使用跌落开关

> ID：10045497
> 
> 赞同：7
> 
> 时间：2012-04-06T15:20:27.763
> 
> 标签：php, switch-statement

在研究使用`switch`语句的更好方法时，我发现了这个[stackoverflow](https://stackoverflow.com/questions/207002/how-to-use-a-switch-case-or-in-php)示例。我想做类似的事情，但有一点不同：

```
switch($status)
{
 case "a":
 case "b":
  echo "start execute code for case a and b";
 case "a":
  echo "continue to execute code for case a only";
 case "b":
  echo "continue to execute code for case b only";
 case "a":
 case "b":
  echo "complete code execution for case a and b";
 break;
 case "c":
  echo "execute code for case c";
 break;
 case "d":
  echo "execute code for case d";
 break;
 case "e":
  echo "execute code for case e";
 break;
 case "f":
  echo "execute code for case f";
 break;
 default:
  echo "execute code for default case";
} 
```

是的，以上显然没有按计划进行，因为案例“a”将通过直到它达到 a `break`。我只想知道是否有一种方法可以优雅地做到这一点而无需重复太多代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T16:02:49.297

我认为这是一个优雅的解决方案：

```
switch($status)
{
 case "a":
 case "b":
  echo "start execute code for case a and b";
  if($status == "a") echo "continue to execute code for case a only";
  if($status == "b") echo "continue to execute code for case b only";
  echo "complete code execution for case a and b";
 break;
 case "c":
  echo "execute code for case c";
 break;
 case "d":
  echo "execute code for case d";
 break;
 case "e":
  echo "execute code for case e";
 break;
 case "f":
  echo "execute code for case f";
 break;
 default:
  echo "execute code for default case";
} 
```

我不想在这里发明任何新东西。只是想从这里每个人的经验中学习。感谢所有为我提供答案的人。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T15:26:23.547

一旦 a`case`被匹配，PHP 将忽略任何进一步`case`的语句并执行所有代码，直到开关关闭 ( `}`) 或`break`遇到 a。`break`也会终止开关，所以你想要的是不可能的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:32:25.280

这不是正确的 switch 语句用法。

您应该用一系列 if 语句替换您的开关。

```
if($status == a || $status == b ) {
   echo "start execute code for case a and b";
   if(status == a) {
      echo "continue to execute code for case a only";
   }
   else {
      echo "continue to execute code for case b only";   
   }
   echo "complete code execution for case a and b";
}
else if ($status == c) {
   echo "execute code for case c";  
}
...
...
else {
   echo "execute code for default case";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T15:50:10.810

除了我知道你想做什么而且这是我的概念`$status`证明`=` `a``b``array`

```
function runSwitch($status) {

    if (in_array ( "a", $status ) && in_array ( "b", $status )) {
        echo "start execute code for case a and b" . PHP_EOL;
    }

    if (in_array ( "a", $status )) {
        echo "continue to execute code for case a only" . PHP_EOL;
    }

    if (in_array ( "b", $status )) {
        echo "continue to execute code for case b only" . PHP_EOL;
    }

    if (in_array ( "c", $status )) {
        echo "execute code for case c" . PHP_EOL;
    }

    if (in_array ( "d", $status )) {
        echo "execute code for case d" . PHP_EOL;
    }

    if (in_array ( "e", $status )) {
        echo "execute code for case e" . PHP_EOL;
    }

    if (in_array ( "f", $status )) {
        echo "execute code for case f" . PHP_EOL;
    }

    if (in_array ( "c", $status ) && in_array ( "f", $status )) {
        echo "continue to execute code for case c AND f only" . PHP_EOL;
    }

} 
```

**示例 1**

```
$status = array (
        "a" 
);

runSwitch($status); 
```

输出

```
continue to execute code for case a only 
```

**示例 2**

```
$status = array (
        "a" , "b"
);

runSwitch($status); 
```

输出

```
start execute code for case a and b
continue to execute code for case a only
continue to execute code for case b only 
```

我希望这有帮助

谢谢

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T15:38:26.400

正如 Marc B 所说，您正在尝试的事情（至少使用开关）无法完成。幸运的是，删除重复代码的一个好方法是定义方法，这样可以在需要时调用 a 和 b 共有的代码。

# xpath - 在 XQuery 中计算序列中属性的出现次数

> ID：10045499
> 
> 赞同：0
> 
> 时间：2012-04-06T15:20:33.347
> 
> 标签：xpath, xquery

我有一个`$answer`使用从 XML 文件的元素中提取的属性调用的序列。在里面`$answer`我有以下 3 个属性：`1, 3, 3`和另一个属性序列`$p`：`1, 3`

我试图这样做以获取出现次数

```
for $x in $p
return count (index-of($x, $answer)) 
```

因为我在另一篇文章中将其视为解决方案，但它给了我错误。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:34:53.443

您想按属性值对所有属性进行排序吗？group by 语句可能会给您预期的结果：

```
for $a in (attribute a {'A'}, attribute b {'B'}, attribute a {'A'})
group by $v := $a
return concat(count($a), ': ', $v) 
```

但是请注意，您的 XQuery 实现需要支持 XQuery 3.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T21:38:49.137

您需要交换传递给 index-of() 的参数：

```
for $x in $p
return count(index-of($answer, $x)) 
```

但更简单的方法是测试谓词中的相等性：

```
for $x in $p
return count($answer[. eq $x]) 
```

对于给定的数据产生相同的结果。

# android - Android 中的活动太多？

> ID：10045501
> 
> 赞同：14
> 
> 时间：2012-04-06T15:20:43.087
> 
> 标签：android, optimization, android-activity

当我开始我的 Android 项目时，我有一个误解，即应用程序中显示的每个屏幕都必须是一个新活动。现在我已经完成了这个项目，我已经在我的模拟器以及几部安卓手机上检查了它。到目前为止，我没有看到任何问题，但最近我在某处读到应用程序中的太多活动是一个非常糟糕的主意。

目前我的应用程序有大约 15-20 个活动。理想情况下，我听说应该在 5-6 个左右。我是否需要重新构建我的代码或只是在完成每个活动后才完成它的一部分就足够了？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-06T15:36:18.950

在创建复杂的应用程序时，您肯定需要创建许多活动。因此，这取决于您的应用程序需要多少活动。项目中的任何活动都不会影响绩效。

效果是由你的 android 堆栈中的活动数量产生的。因此，最好在堆栈中保留 5-6 个活动（如果不再需要，请完成活动）。

因此，根据您的应用程序需求创建尽可能多的活动，但一次保持较少的活动打开。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-06T17:10:39.493

如果您的项目有很多活动，但有些活动并不重要，则意味着您在另一个活动开始后不需要任何活动。

在清单文件集中：`android:noHistory="true"`

**例子：**

```
Activity1 -> Activity2 -> Activity3 -> Activity4..................-> Activity20 
```

在清单文件中：

```
 activity android:name=".Activity1" android:label="@string/app_name" android:noHistory="true" 
```

如果您使用 Intent 再次调用 Activity1，而不是在 startActivity() 之前设置 finish()

我认为这可以帮助你

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-06T15:33:19.730

Android 系统试图尽可能长时间地维护一个应用程序进程，但最终需要移除旧进程来为新的或更重要的进程回收内存。这适用`Activity`于在后台运行的 s...旧`Activity`的 s 为您管理，并在系统需要为新进程回收内存时被销毁。

话虽如此，我认为您应该考虑两件事：

1.  **用户体验**。您的应用程序真的需要 15-20`Activity`秒吗？你能以某种方式减少屏幕数量吗？`Activity`s 通常越少越好，因为它在用户导航应用程序时需要更少的交互。

2.  **代码设计**。虽然每个`Activity`都有自己独立的类，但这并不限制您在实现应用程序时做出明智的设计决策。例如，您可以尝试通过让相似`Activity`的 s 扩展一个 s 来对它们进行分组`abstract class`。随着 Android 项目规模的扩大，它们变得更加难以管理。以这种方式在类似的类之间共享代码将确保您可以对应用程序的核心进行简单的更改，而不会带来太多麻烦。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-06T15:26:18.640

[编辑] - 从 Google IO 2018 开始，Google 建议使用包含多个片段的单个活动。需要考虑的事情。

这最终取决于你在做什么。有时您无法对视图进行足够的修改以产生影响。理想情况下，5-6 次活动很棒，但在某些情况下，这不仅是不可行的。我已经完成了一个包含大约 40 个不同课程和大约 18 个活动的移动应用程序。只是必须根据应用程序与用户交互的方式来完成。如果您可以将 2 或 3 个活动合并为一个，那就太好了。它也有助于文件大小和优化，但如果你不能 - 不要太担心它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-06T15:29:18.750

我会说 15 个不同的屏幕 = 15 个不同的活动。我认为一些能够减少活动数量的原因之一是因为引入了片段。尽管有人会争论如果单个活动有效，为什么要使用片段。我想这取决于开发人员的偏好。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-05-24T22:31:37.357

使用片段比使用活动更好。我们可以在单个活动中使用多个片段，因此我们应该始终考虑使用片段。我见过具有 5-6 个活动和 150 多个片段的复杂应用程序。

# java - 10 个并发请求线程限制 - 线程总数或只是同时运行？

> ID：10045503
> 
> 赞同：0
> 
> 时间：2012-04-06T15:20:59.793
> 
> 标签：java, google-app-engine

文档[https://developers.google.com/appengine/docs/java/runtime#The_Sandbox](https://developers.google.com/appengine/docs/java/runtime#The_Sandbox)说

> 每个请求限制为 10 个并发请求线程。

我想澄清一下，这是 10 个**并发**请求的限制，而不是每个请求允许产生的线程总数。即，如果我必须运行超过 10 个，我可以使用存储桶大小为 10 的队列，如果总线程数大于 10，这不是问题。

# c# - VS 2010 是否允许我在 C# 中使用新的 async 和 await 关键字？

> ID：10045506
> 
> 赞同：19
> 
> 时间：2012-04-06T15:21:09.213
> 
> 标签：c#, .net, visual-studio, async-await

当新的 async 和 await 功能上线时，我可以在 Visual Studio 2010 中使用它们，还是需要 Visual Studio？

我要问的是：微软会在 VS 2010 和 VS 11 之间保持语言功能对等吗？CTP 是一个预览版，无论是否可靠，我们的客户不希望我们使用被认为不完整或未经测试的技术 - 所以尽管获得了许可，但我无法使用它。

我的雇主*没有*购买 VS 11，所以我需要知道我是否在浪费时间使用 async 和 await 编写代码。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T15:27:51.710

现在，异步 CTP 允许您使用 Visual Studio 2010 中的新语法`awaits`和`async`语法。语言团队在演示新功能时为当前版本的 Visual Studio 提供 CTP 是很常见的。这是让开发人员进行试验并向语言团队提供反馈的好方法。

但是，对于最终版本，新语言功能通常仅可用于下一版本的 Visual Studio（在本例中为 Dev11）。它们不会反向移植到以前版本的 Visual Studio。

当前版本和下一个最终版本中的这种 CTP 模式在 LINQ 之前已经发生过。几乎可以肯定会重复`awaits`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-06T15:24:13.253

只需安装[Async CTP](http://www.microsoft.com/download/en/details.aspx?id=9983)，在项目中引用 dll 即可使用 async 和 await。或者安装 VS11 并直接与 .Net 4.5 一起使用。如果您想尽快在生产中使用它，我会选择第一个选项。

编辑：对于仍在查找此内容的任何人。如果此时您仍然有一个 .Net 4.0 应用程序并且想要使用 .Net 4.5 的所有异步功能，那么有一个名为[Microsoft Async](http://www.nuget.org/packages/microsoft.bcl.async)的 Nuget 包。你只需要至少有 Visual Studio 2012。有了这个包，当你已经有 VS2012 时，你就不必费心安装 Async CTP。（此外，与 VS2012 并排安装 Async CTP 并不能从我的尝试中真正奏效）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:24:00.777

您可以在 2010 年使用它们。我在 2010 年运行了开发人员预览版，没有出现任何问题。然而，Resharper 无法识别这些关键字，但他们已经（或将要）在以后的版本中对其进行补救。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T15:25:42.953

由于变化的范围，这意味着**极**不可能将其作为正式版本回到 VS2010。

不过，正如其他人评论的那样，您可以很好地使用 CTP。但是，如果您担心它受到官方支持，那几乎肯定意味着使用 VS11（Beta 版具有上线许可证，FWIW）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T15:27:03.177

据我了解，新功能将成为 C# 5.0 的一部分。根据框架和编程语言的过去版本，它们可以与通常与此一起发布的新工作室版本一起使用。

然而，在过去，我们已经能够通过引用包含它们的库来使用更新的 C# 功能，因此这可能通过引用所需的东西成为可能。

# ruby-on-rails - Mongoid 在保存具有特定名称的字段时给出错误

> ID：10045509
> 
> 赞同：0
> 
> 时间：2012-04-06T15:21:22.020
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我在 Rails 应用程序中使用 mongoid。轨道 3.0.10 红宝石 1.9.2p0

当我尝试使用“test”、“link”、“desc”等字段时。

说

```
Content.new(:test => 'ggg')

Content.new(:link => 'ggg')

Content.new(:desc => 'ggg') 
```

内容是使用“Mongoid::Document”的模型

它给出了以下错误。（此错误适用于“测试”字段）

我认为 mongoid 使用了一些库，这些库的内容高于字段名称作为函数

可能会产生问题。有什么办法可以解决这个问题。

```
ArgumentError: wrong number of arguments (0 for 2..3)
    from /usr/lib/ruby/gems/1.9.1/gems/activemodel-3.0.10/lib/active_model/dirty.rb:155:in `test'
    from /usr/lib/ruby/gems/1.9.1/gems/activemodel-3.0.10/lib/active_model/dirty.rb:155:in `attribute_will_change!'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/attributes.rb:102:in `block (2 levels) in write_attribute'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/attributes.rb:100:in `tap'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/attributes.rb:100:in `block in write_attribute'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/attributes.rb:170:in `assigning'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/attributes.rb:98:in `write_attribute'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/attributes/processing.rb:95:in `process_attribute'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/attributes/processing.rb:25:in `block in process'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/attributes/processing.rb:23:in `each_pair'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/attributes/processing.rb:23:in `process'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/document.rb:128:in `block in initialize'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/relations/builders.rb:47:in `building'
    from /usr/lib/ruby/gems/1.9.1/gems/mongoid-2.2.4/lib/mongoid/document.rb:125:in `initialize'
    from (irb):1:in `new'
    from (irb):1
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.0.10/lib/rails/commands/console.rb:44:in `start'
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.0.10/lib/rails/commands/console.rb:8:in `start'
    from /usr/lib/ruby/gems/1.9.1/gems/railties-3.0.10/lib/rails/commands.rb:23:in `<top (required)>'
    from /home/harshal/simple-cms/branches/1.0/script/rails:6:in `require'
    from /home/harshal/simple-cms/branches/1.0/script/rails:6:in `<top (required)>'
    from -e:1:in `load'
    from -e:1:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:50:25.813

使用最新的一切，ruby（1.9.3），rails（3.2.3），mongoid（2.4.7）我尝试了以下事情：

没有设置字段的模型，全是动态的：

```
class Content
  include Mongoid::Document
end 
```

导轨控制台：

```
1.9.3p125 :011 > c = Content.new(:test => "test", :link=> "link", :desc => "desc")
 => #<Content _id: 4f7f49f5add3617fae000003, _type: nil, test: "test", link: "link", desc: "desc"> 
1.9.3p125 :012 > c.save
 => true 
1.9.3p125 :013 > Content.first
 => #<Content _id: 4f7f49f5add3617fae000003, _type: nil, test: "test", link: "link", desc: "desc"> 
1.9.3p125 :014 > 
```

静态设置所有字段的模型：

```
class Content
  include Mongoid::Document
  field :test, :type => String
  field :link, :type => String
  field :desc, :type => String
end 
```

Rails 再次控制台：

```
Loading development environment (Rails 3.2.3)
1.9.3p125 :001 > c = Content.new
 => #<Content _id: 4f7f4652add3617ec4000001, _type: nil, test: nil, link: nil, desc: nil> 
1.9.3p125 :002 > c.test = 'tyler'
 => "tyler" 
1.9.3p125 :003 > c.save
 => true 
1.9.3p125 :004 > Content.first
 => #<Content _id: 4f7f4652add3617ec4000001, _type: nil, test: "tyler", link: nil, desc: nil> 
```

# ruby-on-rails - 如何让搜索使用 attr_accessor？

> ID：10045510
> 
> 赞同：0
> 
> 时间：2012-04-06T15:21:27.457
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, thinking-sphinx

好的，所以我有一个需要搜索的日期字段，但我需要像在 mysql 查询中一样按天搜索

```
 search_conditions << ["DAY(open_date) != ?", event.thursday.day] if options[:thur].blank? 
```

我需要用 Thinking Sphinx 来做这个条件，所以我尝试了这个

```
 attr_accessor :event_day

    def event_day
     self.start_date.day
    end

    #thinking sphinx configurations for the event search
    define_index do
     indexes event_day
     ...
     ... 
```

在搜索中我尝试了这个

```
 search_string = "@event_day -#{event.thursday.day}" unless options[:thur].blank? 
```

但我不断收到此错误

```
index event_core: query error: no field 'event_day' found in schema 
```

任何使这项工作的方法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:08:55.950

您不能在 SQL 查询中使用 ruby​​ 属性。Rails 没那么聪明。

您需要编写复制该函数的 SQL，或通过它过滤查询结果，例如

```
@my_query.where(:a => "b").select { |rec| rec.some_method == "some value" } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T02:50:42.723

正如迈克尔指出的那样，Sphinx 无法访问 Ruby 属性 - 它直接与您的数据库对话。

因此，您可以创建一个包含事件日期值的列，并通过 Sphinx 引用该值，或者您可以创建一个使用 SQL 函数（可能会有所不同，取决于 MySQL 或 PostgreSQL）的字段，该函数从 start_date 中提取日期列 - 不是特别复杂。它可能最终看起来像这样：

```
indexes "GET_DAY_FROM_DATE(start_date)", :as => :event_day 
```

# github - 在 GitHub wiki (gollum) 存储库中嵌入图像？

> ID：10045517
> 
> 赞同：91
> 
> 时间：2012-04-06T15:22:24.330
> 
> 标签：github, wiki, gollum-wiki

Github wiki 由一个单独的 git 存储库支持，然后是主项目存储库。

[Github 团队的这篇文章](https://github.com/blog/699-making-github-more-open-git-backed-wikis)听起来你应该能够链接到存储在 wiki 存储库中的 wiki 标记内的图像。

> **图像和文件夹**
> 
> 您现在可以引用托管在 Git 存储库中的图像。

我检查了我的 wiki 存储库并将资源文件夹和图像推入其中。我的问题是，**我该如何使用这张图片**？

这甚至可能还是我误解了什么？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-09-17T04:49:48.603

对于希望在 github wiki 上查看图像的查看者，我发现以下方法可行：

*   转到存储库 wiki 页面内的“Git Access”选项卡并检索 SSH 路径，该路径应类似于：git@github.com:USER/REPO.wiki.git 其中 USER 是您的帐户名，REPO 是存储库名称。
*   在您的本地机器上，使用您希望 cd 进入您选择的本地目录并通过以下方式获取存储库的任何 Git 命令行工具

    > git clone git@github.com:USER/REPO.wiki.git

*   现在在这个存储库中创建一个图像目录，我将其命名为“图像”并将您想要的任何图像放入目录中

*   然后将你的 wiki git 目录推送到 github
*   您将无法实际看到“页面”选项卡中的图像，但如果您只是在本地链接中引用图像，您应该能够看到它们。下面的 Markdown 示例：

    `![Alt attribute text Here](images/YOURIMAGE.ext)`

*   您还可以通过进一步包装图像将图像嵌入为链接本身，如下所示：

    `[![Alt attribute text Here](images/YOURIMAGE.ext)](http://Yoursite.com)`

您还可以在本地副本中添加子目录来帮助组织 wiki，因为“页面”选项卡只是将它们列出来。但是请记住，即使推送了新目录，“页面”选项卡也不会列出该目录。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-05-02T13:34:23.163

要使用相对路径，请执行以下操作：

```
[[foo.jpg]] 
```

有关更多信息，请参阅[演示 wiki 的图像页面](https://github.com/mojombo/gollum-demo/blob/master/Mordor/Eye-Of-Sauron.md)。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2012-07-18T19:47:26.683

在`readme.md`. 我有一个解决方案：

如果图片的 URL 是：

```
https://github.com/Username/Repository-Name/blob/master/Directory-Inside-Repository/image.png 
```

替换`blob`为`raw`您提供原始图像的 URL：

```
https://github.com/Username/Repository-Name/raw/master/Directory-Inside-Repository/image.png 
```

现在，您将使用普通降价嵌入图像：

```
![Image Alt](https://github.com/Username/Repository-Name/raw/master/Directory-Inside-Repository/image.png) 
```

**更新：**截至目前，GitHub 还提供来自不同子域的原始图像`raw.github.com`。因此，您还可以使用：

```
https://raw.github.com/Username/Repository-Name/master/Directory-Inside-Repository/image.png 
```

**例子：** `https://raw.github.com/Automattic/liveblog/master/screenshot-1.png`

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2013-02-18T07:34:15.973

相对路径对我来说是这样的：

维基主页：

```
![text](wiki/images/someimage.png) 
```

维基子页面：

```
![text](images/someimage.png) 
```

请注意，在进行预览时，图像不会显示，我已经保存了它。

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2013-11-21T11:32:38.693

如果您想通过拖放快速上传图像，您可以执行以下操作（尽管有点骇人听闻）：

创建一个虚拟问题；将您的图像拖放到那里；将上传的 Markdown 图像代码复制/粘贴到您的 wiki；

创建问题一次后，您可以多次使用它来执行此操作。

希望这可以帮助任何寻求快速修复的人，而无需将图像驻留在存储库中。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2017-02-22T17:10:55.580

这是一种实用的方法：

*   转到github上的任何问题
*   在评论部分，您可以附加文件，只需拖放、选择或粘贴您的图像
*   复制文本区域中显示的代码/链接
*   粘贴到维基
*   利润 ！

与@tiby 解决方案相比，您甚至不必创建或修改任何问题！

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-04-06T15:44:20.123

弄清楚了。

url 格式如下

> [https://raw.github.com/wiki/username/project/pathtoimage/imagename.extension](https://raw.github.com/wiki/username/project/pathtoimage/imagename.extension)

`pathtoimage`是可选的

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-05-31T15:49:42.743

James 的 URL 格式对我不起作用，也许它已经改变了。我用过：

> [https://github.com/username/project/wiki/pathtoimage/image.extension](https://github.com/username/project/wiki/pathtoimage/image.extension)

哪里`pathtoimage`是可选的。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-04-07T16:17:23.537

最后使用 nerdwin 描述的方法将图像放入存储库，并使用它们显示在 wiki 中`![test](test.jpg)`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-04-03T21:18:21.637

以下降价将从您相应的 GitHub **wiki中引用您的 GitHub****存储库中的图像**

 **```
![My Alt Text](../blob/master/Path/ToAsset/In/Repo.png?raw=true) 
```

上面的示例假设您的存储库中有以下文件结构

*   小路
    *   到资产
        *   在
            *   回购.png

对于一个真实世界的例子，如果我想从相应的 wiki 引用github 中的[这张图片](https://github.com/jquintus/TrelloWorld/blob/master/TrelloWorld/TrelloWorld.Server/Assets/Azure_AppSettings.png)，我会使用这个 markdown

```
![Azure App Settings](../blob/master/TrelloWorld/TrelloWorld.Server/Assets/Azure_AppSettings.png?raw=true) 
```

**注意事项**

1.  案件事宜
2.  如果您在 wiki 的特殊主页上，则无需使用 ../ 升级，在我上面的示例中，正确的链接应该是

主页：

```
![Azure App Settings](blob/master/TrelloWorld/TrelloWorld.Server/Assets/Azure_AppSettings.png?raw=true) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-02-25T05:36:49.237

我将图像和 PDF 都放在我的 wiki 中。我克隆 wiki 并添加一个`images`和一个`files`目录，然后使用以下 markdown 嵌入图像链接并添加文件链接：

图片：

```
[[/images/path/to/image.ext|ALT TEXT]] 
```

如果您的 wiki 页面都位于根级别，则不需要前导斜杠，但我使用子目录并且绝对路径可以正确解析并保持简单。

文件：

```
[link text](files/path/to/file.ext "ALT TEXT") 
```

请注意，wiki 路径没有前导斜杠`files`以正确解析为这种格式的链接。

[我在GitHub gist](https://gist.github.com/subfuzion/0d3f19c4f780a7d75ba2)中更详细地记录了这一点

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-02-28T21:08:17.880

## 使用相对路径

维基位于`[repositoryname]/wiki`

存储库中的文件位于`[repositoryname]/raw/master/[file path in repository]`

所以只需使用相对路径：`../raw/master/[file path in repository]`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-04T03:20:14.677

要嵌入外部图像缩略图，请使用以下命令， `![Image](<external link to the image>)`

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-12-21T07:26:40.023

[@Drew Noakes](https://stackoverflow.com/users/24874/drew-noakes)对原始问题的评论对我来说是这样的：

我想显示的图像的语法：

```
[[/images/imageName.png]] 
```

此图像仅在重命名时显示：

```
wikiPage.md --> wikiPage.wiki 
```

wiki 存储库中使用了以下文件夹结构：

```
repository.wiki
   |--wikiPage.wiki
   |--images
        |--imageName.png 
```

**但：**

.wiki 中的语法与 .md 文件不同。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-04-16T14:23:59.257

许多答案对我不起作用，这就是最终起作用的方法：

```
![](../raw/master/Images/ImportantImage.png) 
```

使用“Markdown”编辑器模式和子页面，例如：

```
https://github.com/project/repo/wiki/MyPage 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2022-02-14T22:18:58.483

自 2022 年 2 月起，您可以简单地拖放、选择或粘贴文件。

这会将**[图像上传到您的 Wiki 页面](https://github.blog/changelog/2022-02-14-upload-images-to-wiki-pages/)**，并将其存储在`https://user-images.githubusercontent.com`

[![https://user-images.githubusercontent.com/3369400/153617338-24d3895c-dc02-4267-ba62-cf4529d03805.mp4](../Images/1038ce5e2dd6c000f58806edcc15b206.png)](https://i.stack.imgur.com/qcR69.gif)**

# php - 将字符串转换为数组后，一些字符变成了这个 �

> ID：10045518
> 
> 赞同：0
> 
> 时间：2012-04-06T15:22:30.777
> 
> 标签：php, utf-8

像 čęąįęėįųų 等字母变成 �。我怎样才能防止这种情况或使字符与以前一样。

```
$x = 0; $b = 0;
$char2 = ''; //define a variable to collect all the chars
while ($x++ < 10) {
    $char2 .= $text[$b++]; //add to the char
    $char2 .= ' ';
} 
```

输出示例 之前：Aš ėjau。之后：A�jau。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:27:35.657

```
mb_internal_encoding("UTF-8");
$x = 0; $b = 0;
$char2 = ''; //define a variable to collect all the chars
while ($x++ < 10) {
    $char2 .= mb_substr($text, $b++, 1); //add to the char
    $char2 .= ' ';
} 
```

是你想要的。

UTF8 字符是多字节的，所以你的 'š' 由 2 个字节组成，但是用 [] 索引只需要其中一个，并且在一个 utf8 字符的字节之间放置空间会破坏它。

编辑：您需要先指定内部编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:31:05.223

您没有考虑到某些字符占用超过 1 个字节，因此当您从 2 个字节宽的字符中取出 1 个字节时，它将变成其他内容。在这种情况下`"�"`。

这是一种做你想做的事情的方法：

```
<?php
$text = "Aš ejau";
$chars = preg_split('/(?<!^)(?!$)/u', $text ); 
$char2 = '';

foreach( $chars as $char ) {
    $char2 .= $char;
    $char2 .= ' ';
}

echo $char2;

//A š   e j a u 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:28:07.933

尝试以写入编码保存您的脚本文件。我猜它应该是没有 BOM 的 utf-8

# ios - 这个 CALayer 设置代码有什么问题

> ID：10045523
> 
> 赞同：0
> 
> 时间：2012-04-06T15:22:48.567
> 
> 标签：ios, calayer

在pg 上[查看 iOS 编程指南。](http://developer.apple.com/library/ios/DOCUMENTATION/WindowsViews/Conceptual/ViewPG_iPhoneOS/ViewPG_iPhoneOS.pdf)57有这段代码：

```
// Create the layer.
CALayer* myLayer = [[CALayer alloc] init];
// Set the contents of the layer to a fixed image. And set
// the size of the layer to match the image size.
UIImage layerContents = [[UIImage imageNamed:@"myImage"] retain];
CGSize imageSize = layerContents.size;
myLayer.bounds = CGRectMake(0, 0, imageSize.width, imageSize.height);
myLayer = layerContents.CGImage; 
```

为什么要在最后一行执行此操作：`myLayer = layerContents.CGImage;`. 一方面，对象不匹配，所以这是一个类型问题。但它正在替换第一个语句中创建的对象！

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:25:12.643

看起来那个文件是错误的。应该是：

```
myLayer.contents = (id)layerContents.CGImage; 
```

这是设置图层内容的一种方法。请参阅[文档`contents`](https://developer.apple.com/library/mac/documentation/graphicsimaging/reference/CALayer_class/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004500-CH1-SW24)

# android - 使用查询/原始查询#SQLite#无法获得任何结果

> ID：10045529
> 
> 赞同：0
> 
> 时间：2012-04-06T15:23:13.737
> 
> 标签：android, sqlite

当我使用下面的代码查询数据库时，我无法得到任何结果，但我可以通过控制台上的 sql 命令获得结果。

```
DBHelper dbHelper = new DBHelper(SampleActivity.this, "contents.db", null, 1);
SQLiteDatabase db = dbHelper.getWritableDatabase();
//Cursor cursor = db.query("ContentsTable", new String[] { "title" }, "id<10", null, null, null, null);
Cursor cursor = db.rawQuery("select title from ContentsTable", null);
db.close();
cursor.close(); 
```

*我调试程序，运行db.rawquery( ** )后发现游标的mCount=-1和mStackTrace=DatabaseObjectNotClosedException ，就像照片所示： http: [//flic.kr/p/bw9P2o](http://flic.kr/p/bw9P2o)

下面是 DBHelper 类： public class DBHelper extends SQLiteOpenHelper{

```
 public DBHelper(Context context, String name, CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        String createTable = "create table ContentsTable(id int, title varchar(100))";
        db.execSQL(createTable);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        System.out.println("Update Database");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:35:12.377

请原谅这个简单的问题，但您添加行了吗？

**编辑：**

您必须`cursor.moveToFirst()`在访问返回的数据之前调用。

# android - Android 下载带进度条

> ID：10045532
> 
> 赞同：0
> 
> 时间：2012-04-06T15:23:21.333
> 
> 标签：android, android-progressbar

我该怎么做才能得到 `getContentLength`

这是我的代码：

```
HttpGet request = new HttpGet(MyConstants.URL);
HttpResponse response = null;
response = httpClient.execute(request);
HttpEntity httpEntity = response.getEntity(); 
```

我正在尝试使我的代码类似于此示例代码：

示例代码：

```
 int count;
try {
    URL url = new URL(f_url[0]);
    URLConnection conection = url.openConnection();
    conection.connect();
    // getting file length
    int lenghtOfFile = conection.getContentLength();

    // input stream to read file - with 8k buffer
    InputStream input = new BufferedInputStream(url.openStream(), 8192);

    // Output stream to write file
    OutputStream output = new FileOutputStream("/sdcard/downloadedfile.jpg");

    byte data[] = new byte[1024];

    long total = 0;

    while ((count = input.read(data)) != -1) {
        total += count;
        // publishing the progress....
        // After this onProgressUpdate will be called
        publishProgress(""+(int)((total*100)/lenghtOfFile));

        // writing data to file
        output.write(data, 0, count);
    }

    // flushing output
    output.flush();

    // closing streams
    output.close();
    input.close();

} catch (Exception e) {
    Log.e("Error: ", e.getMessage());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:31:41.017

这是您想要的完整示例..

**AsyncOncImageActivity.java**

```
public class AsyncOncImageActivity extends Activity {
/** Called when the activity is first created. */
ProgressBar pbHorizontal;
ImageView ivImage;
//Button btnIncrement;
String URL="http://appcolumn5.columnfivemedia.netdna-cdn.com/wp-content/uploads/2012/03/TakePart-Infographic_MarijuanaAttitudesandLegislation.png";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    /*** FIND ALL COMPONENT ***/
    ivImage = (ImageView) findViewById(R.id.ivImage);
    pbHorizontal=(ProgressBar) findViewById(R.id.pbHorizontal);
    //btnIncrement=(Button) findViewById(R.id.btnIncrement);

    /*** DOWNLOAD IMAG FROM URL AND READ FROM SD CARD***/
    new AsyncDemo(URL,pbHorizontal,ivImage).execute(this);
}

class AsyncDemo extends AsyncTask<Context, ProgressBar, Bitmap>
{
    String url;
    Boolean cancelTask=true;
    ProgressBar pbHorizontal;
    ImageView ivImage;
    AsyncDemo(String url,ProgressBar pbHorizontal,ImageView ivImage)
    {
        this.url = url;
        this.pbHorizontal=pbHorizontal;
        this.ivImage=ivImage;
    }

    @Override
    protected Bitmap doInBackground(Context... params) {
        // TODO Auto-generated method stub
        try {
            File root = Environment.getExternalStorageDirectory();
            URL u = new URL(url);
            HttpURLConnection c = (HttpURLConnection) u.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();

            FileOutputStream f = new FileOutputStream(new File(root, "c5.jpg"));

            InputStream in = c.getInputStream();
                // here u will get content length (Size of image)
            System.out.println("Content length"+c.getContentLength());
            //pbHorizontal.setMax(c.getContentLength());

            byte[] buffer = new byte[1024];
            int len1 = 0;
            /*** WRITTING IMAGE TO SD CARD **/
            while ((len1 = in.read(buffer)) > 0)// && cancelTask==true) 
            {
                f.write(buffer, 0, len1);
                System.out.println("current buf: "+len1);
                //pbHorizontal.incrementProgressBy(len1);
                pbHorizontal.setProgress(pbHorizontal.getProgress()+len1);
                //System.out.println("status Loop:"+this.getStatus());
            }
            f.close();// image stored in sd card

            /*** READING IMAGE FROM SD CARD ***/
            String imageInSD = "/sdcard/c5.jpg";
           // System.out.println("statusf inis:"+this.getStatus());
            Bitmap bitmap = BitmapFactory.decodeFile(imageInSD);

            return bitmap;

        } catch (Exception e) {
            Log.d("Downloader", e.getMessage());
            return null;
        }
    }
    @Override
    protected void onPostExecute(Bitmap result )  
    {
        ivImage.setImageBitmap(result);
        pbHorizontal.setVisibility(ProgressBar.GONE);
    }
    protected void stopIt()
    {
        cancelTask=false;
    }
} 
```

}

**主要的.xml**

```
 <ImageView
        android:id="@+id/ivImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:src="@drawable/ic_launcher" />

    <ProgressBar
        android:id="@+id/pbHorizontal"
        android:progress="0"
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="64dp" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:32:16.207

`httpEntity.getContentLength()`?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T17:29:40.993

```
File root = Environment.getExternalStorageDirectory();
        URL u = new URL(url);
        HttpURLConnection c = (HttpURLConnection) u.openConnection();
        c.setRequestMethod("GET");
        c.setDoOutput(true);
        c.connect();

       // FileOutputStream f = new FileOutputStream(new File(root, "c5.jpg"));

        InputStream in = c.getInputStream();
            // here u will get content length (Size of image)
        System.out.println("Content length"+c.getContentLength()); 
```

此代码将为您提供图像的大小（长度）试试这个

# javascript - 通过javascript将拉丁数字更改为阿拉伯数字

> ID：10045533
> 
> 赞同：0
> 
> 时间：2012-04-06T15:23:26.720
> 
> 标签：javascript

我有一个带有 javascript 的时钟我想通过 javascript 将这个时钟的拉丁数字更改为阿拉伯数字，我尝试了以下代码，但它不起作用。如何解决？

**演示：http:** [//jsfiddle.net/NdzHg/](http://jsfiddle.net/NdzHg/)

```
<script type="text/javascript">
    var interval = self.setInterval("clock()", 1000);
    function clock() {
    var rep = {
        '0': '&#1776;',
        '1': '&#1777;',
        '2': '&#1778;',
        '3': '&#1779;',
        '4': '&#1780;',
        '5': '&#1781;',
        '6': '&#1782;',
        '7': '&#1783;',
        '8': '&#1784;',
        '9': '&#1785;',
    }

        var date = new Date();
        var hourOffset = 4;
        date.setUTCHours(date.getUTCHours(), date.getUTCMinutes());
        var time = date.getTime();
        date.setUTCFullYear(date.getUTCFullYear(), 3, 21);
        var dstStart = date.getTime();
        date.setUTCFullYear(date.getUTCFullYear(), 9, 22);
        var dstEnd = date.getTime();
        if (time > dstStart && time < dstEnd){ hourOffset = 4;}
        date.setUTCHours(date.getUTCHours() + hourOffset, date.getUTCMinutes() + 30);
        var output = date.getUTCHours() + ":" + date.getUTCMinutes() + ":" + date.getUTCSeconds();
    for (key in rep) {
        str = output.split(key).join(rep[key]);
    }
        $("#clock").html(str);
    }
</script>
<div id="clock"></div>
​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T17:28:38.780

试试看：http: [//jsfiddle.net/McxL5/](http://jsfiddle.net/McxL5/) 顺便说一句，它在 mootools 中......

这是 jquery 版本：http: [//jsfiddle.net/McxL5/12/](http://jsfiddle.net/McxL5/12/)

# objective-c - Objective-C：如何检查变量是对象、结构还是其他原语

> ID：10045534
> 
> 赞同：7
> 
> 时间：2012-04-06T15:23:29.243
> 
> 标签：objective-c, struct, primitive

我想编写一个像 NSLog() 这样的函数或指令，它接受任何类型的变量、原语和对象。在那个功能中，我想区分这些。

我知道它对对象的工作原理：

```
- (void)test:(id)object {
    if ([object isKindOfClass:[NSString class]])
        ... 
```

但是我如何区分对象与结构甚至整数或浮点数。就像是：

```
"isKindOfStruct:CGRect" or "isInt" 
```

例如？

这可能吗？我想既然您可以将所有内容发送到 NSLog(@"...", objects, ints, structs) 它一定是可能的吗？

谢谢你的帮助！

编辑

我的最终目标是实现某种多态性。

我希望能够调用我的函数：

```
MY_FUNCTION(int)
MY_FUNCTION(CGRect)
MY_FUNCTION(NSString *)
...

or [self MYFUNCTION:int]... 
```

并在 MY_FUNCTION

```
-(void)MYFUNCTION:(???)value {
    if ([value isKindOf:int])
        ...
    else if ([value isKindOf:CGRect])
        ...
    else if ([value isKindOfClass:[NSString class]])
        ...
 } 
```

我知道 isKindOf 不存在，你甚至不能对原语执行这样的方法。我也不确定“？？？” 函数头中“值”的通用类型。

那可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-07-07T03:56:47.350

```
#define IS_OBJECT(T) _Generic( (T), id: YES, default: NO)

NSRect    a = (NSRect){1,2,3,4};
NSString* b = @"whatAmI?";
NSInteger c = 9;

NSLog(@"%@", IS_OBJECT(a)?@"YES":@"NO"); // -> NO
NSLog(@"%@", IS_OBJECT(b)?@"YES":@"NO"); // -> YES
NSLog(@"%@", IS_OBJECT(c)?@"YES":@"NO"); // -> NO 
```

另外，请查看 Vincent Gable 的[The Most Useful Objective-C Code I've Ever Written](http://vgable.com/blog/2010/08/19/the-most-useful-objective-c-code-ive-ever-written/)，了解一些非常方便的东西，这些东西使用`@encode()`编译器指令（它）返回一个描述它给出的任何类型的字符串......”

> LOG_EXPR(x) 是一个宏，它打印出 x，无论 x 是什么类型，而不必担心格式字符串（以及相关的崩溃，例如，以与 NSString 相同的方式打印 C 字符串）。它适用于 Mac OS X 和 iOS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T15:25:44.487

像这样的函数`NSLog()`可以从作为第一个参数传递的格式字符串中判断其参数列表中期望的类型。因此，您无需查询参数来确定它的类型——您可以根据格式字符串确定您期望的类型，然后相应地解释参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T15:31:55.730

您不能将 C 结构或原语作为 type 的参数传递`id`。为此，您必须将原语包装在 NSNumber 或 NSValue 对象中。

例如

```
[self test: [NSNumber numberWithInt: 3.0]]; 
```

`id`被定义为一个指向 Objective-C 对象的指针。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-10-03T11:24:44.813

@alex gray 答案不起作用（或者至少在 iOS SDK 8.0 上不起作用）。您可以使用@deepax11 答案，但是我想指出这个“魔术宏”是如何工作的。它依赖于系统提供的类型编码。根据苹果文档：

> 为了帮助运行时系统，编译器将每个方法的返回和参数类型编码在一个字符串中，并将该字符串与方法选择器相关联。它使用的编码方案在其他上下文中也很有用，因此可以通过 @encode() 编译器指令公开使用。当给定类型规范时，@encode() 返回一个编码该类型的字符串。该类型可以是基本类型，例如 int、指针、标记结构或联合，或类名——事实上，任何类型都可以用作 C sizeof() 运算符的参数。

为了将宏分开，我们首先获取变量“typeOf”，然后对该类型调用@encode()，最后将返回值与编码表中的“object”和“class”类型进行比较。

完整示例应如下所示：

```
 const char* myType = @encode(typeof(myVar));//myVar declared somewhere
    if( [@"@" isEqualToString:@(myType)] || [@"#" isEqualToString:@(myType)] )
    {
        //myVar is object(id) or a Class
    }
    else if ( NSNotFound != [[NSString stringWithFormat:@"%s", myType] rangeOfCharacterFromSet:[NSCharacterSet characterSetWithCharactersInString:@"{}"]].location )
    {
        //myVar is struct
    }
    else if ( [@"i" isEqualToString:@(myType)] )
    {
        //my var is int
    } 
```

请注意，NSInteger 将在 32 位设备上返回 int，在 64 位设备上返回 long。完整的编码列表：

```
‘c’ - char
‘i’ - int
’s’ - short
‘l’ - long
‘q’ - long long
‘C’ - unsigned char
‘I’ - unsigned int
’S’ - unsigned short
‘L’ - unsigned long
‘Q’ - unsigned long long
‘f’ - float
‘d’ - double
‘B’ - C++ bool or a C99 _Bool
‘v’ - void
‘*’ - character string(char *)
‘@’ - object(whether statically typed or typed id)
‘#’ - class object(Class)
‘:’ - method selector(SEL)
‘[<some-type>]’ - array
‘{<some-name>=<type1><type2>}’ - struct
‘bnum’ - bit field of <num> bits
‘^type’ - pointer to <type>
‘?’ - unknown type(may be used for function pointers) 
```

阅读有关[Apple 的类型编码的更多信息](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-09-04T09:48:25.100

#define IS_OBJECT(x) ( strchr("@#", @encode( **typeof** (x))[0]) != NULL ) 这个微工作我在堆栈溢出的某个地方得到了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T17:24:03.150

重要的是要注意 id 代表任何 Objective-C 对象。我所说的 Objective-C 对象是指使用@interface 定义的对象。它不代表结构或原始类型（int、char 等）。

此外，您只能将消息（[...] 语法）发送到 Objective-C 对象，因此您不能将 isKindOf: 消息发送到普通结构或原语。

但是您可以将整数等转换为 NSNumber，将 char* 转换为 NSString，并将结构包装在 NSObject 派生类中。然后它们将是 Objective-C 对象。

# selenium - Selenium IDE 正则表达式给出错误“参数列表后抛出异常：缺少)”

> ID：10045536
> 
> 赞同：1
> 
> 时间：2012-04-06T15:23:30.780
> 
> 标签：selenium

在我的测试用例中，我试图从当前网页的 url 中捕获动态状态 id。

我的 Selenium IDE 代码是：

```
storeLocation | myLocation

echo | ${myLocation}
myLocation returns https://stage.abcx.com/ui/States/ManageTitle.ddx?      action=view&stateid=76702 

storeEval | re=/^sid/;re.exec(${myLocation}) | new

echo | ${new} 
```

我不断收到的错误是

[错误] 参数列表后抛出异常：缺少 )

我在网上搜索了我的代码有什么问题，但无法找出问题所在。

我是 Selenium 的新手，正则表达式将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T20:00:38.850

你可以尝试更换

```
storeEval | re=/^sid/;re.exec(${myLocation}) | new 
```

和：

```
storeEval | /\\d*$/.exec(storedVars['myLocation']) | new 
```

`new`将包含`myLocation`. 有关 ${x} 和 storedVars['x'] 之间区别的一些信息可以在[这里](http://51elliot.blogspot.com/2008/03/selenium-ide-test-tips.html)找到。

# entity-framework - 如何在 ADO.NET Entity Framework 中向实体添加项

> ID：10045538
> 
> 赞同：2
> 
> 时间：2012-04-06T15:23:36.660
> 
> 标签：entity-framework, ado.net

我正在使用**ADO.NET Entity Framework**在 C# 中开发应用程序。

在网络上的许多示例中，我看到为了向`newProduct`实体添加元素，让我们假设`Product`，它使用以下代码：

```
context.Products.Add(newProduct); 
```

但是，Add 方法不是其中的成员，`Products`因此我无法使用它。也许示例中使用的 EF 是 LinqToSQL。

但是在 ADO.NET 中有一种方法`AddObject`：

```
context.AddObject("Products", newProduct) 
```

它有效，但我不喜欢它有两个原因：

1）我尽量**避免**使用**魔术字符串**，除非它们真的是实现功能的唯一手段

2）它给出了**void**作为返回类型，我如何检查插入是否良好？

我相信还有另一种方法可以插入我的实体。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T17:16:29.497

> 1）我尽量避免使用魔术字符串，除非它们真的是实现功能的唯一手段

如果`context`是`ObjectContext`(EF <= 4.0)，您通常应该在派生上下文中有一个成员，它代表`ObjectSet<Product>`带有名称`Products`或类似名称的 。然后你可以使用：

```
context.Products.AddObject(newProduct); 
```

即使您的上下文中没有这样的集合，也有另一个强类型选项：

```
context.CreateObjectSet<Product>().AddObject(newProduct); 
```

> 2）它给出了 void 作为返回类型，我如何检查插入是否良好？

`AddObject`根本不执行 INSERT 到数据库中。它仅将对象置于`Added`objectContext 中的状态。真正的 INSERT 稍后会在您调用`SaveChanges`.

尽管如此，`AddObject`可能会失败，也许如果您将具有相同键的两个对象添加到上下文中（如果您的实体没有键的自动生成标识），或者出于其他原因。如果是这样，`AddObject`将抛出一个您不应该捕获的异常，因为它通常表明您的代码中存在严重的问题或错误。

`SaveChanges`返回一个`int`. 但这`int`并不表示`SaveChanges`插入对象是成功的。它只计算 SQL 语句执行前对象上下文中处于`Added`状态（将导致 INSERT 语句）、处于`Modified`状态（将导致 UPDATE 语句）和处于`Deleted`状态（将导致 DELETE 语句）的对象的数量。

同样，如果任何 SQL 语句（如您的 INSERT）不成功，`SaveChanges`将引发异常。异常可以表明客户端已经存在问题，或者它可以告诉您在 SQL 操作期间发生了问题 - 例如：对于失败的 INSERT，异常可能会给您一条消息，指出 INSERT 失败，因为已经有一行带有键您要在数据库中插入，或者您要插入的实体中未填写所需的不可为空的列等。在许多其他异常类型中，由于并发问题也可能出现异常。

`SaveChanges`您可以通过捕获可能的异常来检查是否成功：

```
try
{
    int numberOfObjects = context.SaveChanges();
}
catch (SomeExceptionType e)
{
    // What now?
} 
```

顺便说一句：`context.Products.Add(...)`您所看到的很可能`context`是`DbContext`（EF >= 4.1）的示例。`DbContext`是实体框架的简化 API（它仍然使用底层的核心`ObjectContext`）。在此 API 中，插入新实体的方法确实称为`Add`(method of `DbSet<T>`) 而不是`AddObject`。

# java - N-Queens 使用堆栈的迭代方式非常混乱。爪哇

> ID：10045539
> 
> 赞同：-1
> 
> 时间：2012-04-06T15:23:39.933
> 
> 标签：java, algorithm, n-queens

我正在用java解决一些编程练习。一切都很好，直到我的大脑在 N Queens 练习中有点僵硬。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:12:10.953

也许 s.get(x) 返回的东西有问题？自从

```
s.showAll() 
```

说栈里有东西，奇怪的是

```
(s.get(x)==y) 
```

总是假的。您可以尝试插入：

```
for (int x=1; x<=boardSize; x++){
    for (int y=1; y<=boardSize; y++){
        System.out.println("(" + x + ", " + y + "): " + s.get(x) + " == " + y + " -> " + (s.get(x) == y));
    }
} 
```

最后，检查 s.get(x) 的结果是否与 s.showAll() 一致。

这里的其余代码看起来不错。

# history.js - 如果有斜杠，History.pushState(data,title,url) 将 url 连接（而不是替换）到地址栏

> ID：10045540
> 
> 赞同：10
> 
> 时间：2012-04-06T15:23:42.763
> 
> 标签：history.js

例如，

如果我使用“www.site.com”中的搜索栏，我会看到“www.site.com/search”，这很好。

如果我使用“www.site.com/events/”中的搜索栏，我会看到“www.site.com/events/search”，这很愚蠢。

为什么这样做？这是行为还是 history.js 错误或我的错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T15:48:24.150

举一个你在做什么的例子。

如果地址栏中的当前 URL 具有以下形式：`http://somesite.com/path/` 并且您`pushState( null, null, 'newpath' );`在这种情况下传递，则链接将如下所示，`http://somesite.com/path/newpath`但如果您将参数传递为：`pushState( null, null, '/newpath' )`，则在这种情况下将如下所示： `http://somesite.com/newpath`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-28T02:32:27.277

如果您的应用程序没有部署在根目录（例如使用虚拟目录，或者只是在更深的层次结构中），那么您最终会搞砸 URL`history.pushState({}, '/newpath');`

有几个选择：

1）在一个javascript变量中获取你的根路径，你可以在它前面加上URL。在此示例`window.ViewModel.rootPath`中只是一个任意位置 - 只需修改它以存储全局变量。

您必须设置`rootPath`in 脚本（此处为 .NET 示例）。

```
<script>
    window.ViewModel.rootPath = "@Request.ApplicationPath";
</script>

history.pushState({}, window.ViewModel.rootPath + '/newpath'); 
```

2) 检查 URL 是否以 a 结尾，`/`如果是，则需要上一级目录。注意：这种方法要求您知道您发布的内容的“父”目录 - 在这种情况下`YourAccount`。

```
history.pushState({ mode: 'Club' }, '',
     (window.location.href.endsWith('/') ? '../' : '') +
      'YourAccount/ManageClub/' + id ); 
```

如果当前 URL 是，`/preview/store/YourAccount`那么这将变为`../YourAccount/ManageClub/123`.

如果当前 URL 是，`/preview/store/YourAccount/`那么这将变为`YourAccount/ManageClub/123`.

它们都以相同的 URL 结束。

# css - 如何使用 CSS2 剪辑文本和右对齐（非浮动）元素？

> ID：10045542
> 
> 赞同：0
> 
> 时间：2012-04-06T15:23:48.277
> 
> 标签：css

和in CSS3`white-space: nowrap;`的[绝妙组合](http://www.quirksmode.org/css/textoverflow.html)在剪切块元素的文本方面做得很好。`overflow: hidden;``text-overflow: ellipsis;`

我想用 CSS2（与现代浏览器、IE7 和更新的浏览器兼容）来做到这一点，并将文本（不浮动）向右对齐。可能吗？

[这是一个带有示例代码片段的 jsFiddle](http://jsfiddle.net/N3WYE/)。请在上面测试你的答案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:40:07.457

无法在 IE 中对此进行测试，但将包含文本的元素显示为`inline-block`然后`text-align: right`在父项上进行设置。

[http://jsfiddle.net/N3WYE/1/](http://jsfiddle.net/N3WYE/1/)

编辑：`display: inline`在#breadcrumbs 上也应该有效，但你显然会失去`block`效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:44:01.573

是什么让你认为你不能只是设置`text-align:right`？对我来说很好。

`white-space`并且`text-overflow`在所有现代浏览器 (IE7+) 中都受支持。因此，在您的示例中，如果右对齐的文本超出父级的宽度，它将变成椭圆形。

这是你的小提琴（只需拉开窗口，让它变窄，你会看到它工作正常）：http: [//jsfiddle.net/rgthree/N3WYE/2/](http://jsfiddle.net/rgthree/N3WYE/2/)

# android - 用于在多个活动/片段中重用的全局加载器 (LoaderManager)

> ID：10045543
> 
> 赞同：16
> 
> 时间：2012-04-06T15:23:51.493
> 
> 标签：android, android-fragments, android-3.0-honeycomb, android-loadermanager, android-fragmentactivity

**我想达到的目标：**

我有两个不同的片段。我希望他们都以两种形式（列表和地图）显示相同的数据。我希望他们分享一个装载机（`AsyncTaskLoader`特别是）。一切正常，但装载程序没有被重复使用。创建另一个并加载数据两次。

**我所做的：**

在`Fragment`我使用的 s`LoaderManager lm = getActivity().getSupportLoaderManager();` 中，我实现`LoaderCallbacks<ArrayList<Item>>`了所需的方法。在两者中我都使用`lm.initLoader(0, args, this);`.

但是当我输出时，`lm.toString()`它们似乎是两个不同的加载器。并且数据被下载了两次。

**如何从不同于启动它的 Activity/Fragment 重新连接到同一个 Loader？**

这应该是可能的，因为上下文无论如何都附加到 Loader 上`onCreate()`，例如在配置更改时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-07T18:24:09.843

> 如何从不同于启动它的 Activity/Fragment 重新连接到同一个 Loader？

您**不应该**跨多个s 和s重复使用`Loader`由实例管理的s。`LoaderManager``Activity``Fragment`

将相对于/生命周期`LoaderManager`启动/停止那些s ，因此无法保证一旦您进入另一个 s 就会存在这些 s 。`Loader``Activity``Fragment``Loader``Activity`

从文档中：

> LoaderManager.LoaderCallbacks 是一个回调接口，允许客户端与 LoaderManager 交互。
> 
> 加载器，尤其是 CursorLoader，在停止后应该保留它们的数据。这允许应用程序跨 Activity 或 Fragment 的 onStop() 和 onStart() 方法保存数据，这样当用户返回应用程序时，他们不必等待数据重新加载。您使用 LoaderManager.LoaderCallbacks 方法何时知道何时创建新的加载器，并告诉应用程序何时该停止使用加载器的数据。

换句话说，通常情况下，您`Loader`的 s 将特定于某个 Activity（或 Fragment）。当你`Activity`实现`LoaderManager.LoaderCallbacks`接口时，你的 Activity 被赋予 type `LoaderManager.LoaderCallbacks`。每次调用`initLoader(int ID, Bundle args, LoaderCallbacks<D> callback)`时，LoaderManager 都会创建或重用`Loader`特定于某个`LoaderManager.LoaderCallbacks`接口实例（在本例中是您的 Activity 实例）的 a。这本质上是把你的 Activity 和一个 Loader 绑定在一起，它的回调方法会随着 loader 状态的改变而被调用。

话虽如此，除非你能找到一种方法让你的两个单独的 Activity 共享相同的回调方法，否则我怀疑是否有一种干净的方法可以做到这一点（即让 Activity 和 Fragment 共享相同的回调听起来会很棘手，如果不是不可能的话）。不过我不会太担心。在我见过的所有示例代码中，我从未见过两个 Activity 和/或 Fragments 共享相同的回调方法。此外，鉴于`Activity`s 和`Fragment`s 都应该为重用而设计，`Loader`以这种方式共享 s 似乎并不值得鼓励。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T05:42:41.190

是的。它对我有用。我在导航抽屉中有 3 个不同的片段，其中相同的数据填充在不同的 ListView 中。（所有片段都是相同活动的一部分）。

我的异步任务加载器：

```
public class MyTaskLoader extends AsyncTaskLoader<HashMap<String, Integer>> {

public MyTaskLoader(Context context) {
    super(context);
}

@Override
public HashMap<String, Integer> loadInBackground() {
...
return hashMap;
}

...
} 
```

在所有片段中使用相同的加载程序 ID。

片段1：

```
public class Fragment1 extends BaseFragment implements LoaderManager.LoaderCallbacks<HashMap<String, Integer>> {
@Override
public void onCreate(Bundle savedInstanceState) {

//initialize adapter

getActivity().getSupportLoaderManager().initLoader(0, null, this);

}

@Override
public Loader<HashMap<String, Integer>> onCreateLoader(int arg0, Bundle arg1) {
    // TODO Auto-generated method stub

    return new MyTaskLoader(getActivity());
}

@Override
public void onLoadFinished(Loader<HashMap<String, Integer>> arg0,
        HashMap<String, Integer> data) {
    // TODO Auto-generated method stub

    listAdapter.setData(data.keySet());

}

@Override
public void onLoaderReset(Loader<HashMap<String, Integer>> arg0) {
    // TODO Auto-generated method stub

    listAdapter.setData(null);
}
} 
```

对 Fragment2 使用相同的 ID：

```
public class Fragment2 extends BaseFragment implements LoaderManager.LoaderCallbacks<HashMap<String, Integer>> {
@Override
public void onCreate(Bundle savedInstanceState) {

//initialize adapter

getActivity().getSupportLoaderManager().initLoader(0, null, this);

}

@Override
public Loader<HashMap<String, Integer>> onCreateLoader(int arg0, Bundle arg1) {
    // TODO Auto-generated method stub

    return new MyTaskLoader(getActivity());
}

@Override
public void onLoadFinished(Loader<HashMap<String, Integer>> arg0,
        HashMap<String, Integer> data) {
    // TODO Auto-generated method stub

    listAdapter.setData(data.keySet());

}

@Override
public void onLoaderReset(Loader<HashMap<String, Integer>> arg0) {
    // TODO Auto-generated method stub

    listAdapter.setData(null);
}
} 
```

应该在初始化加载器之前初始化适配器。工作至今。但是，这是正确的方法吗？有没有更好的方法来为多个片段使用通用加载器？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-14T08:13:22.587

经过讨论后，我不太确定您要归档什么。但是有一种`application.registerActivityLifecycleCallbacks()`方法，它接受全局活动生命周期监听器（如`onActivityCreated()`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T19:56:18.167

如果您在不同的片段和活动中使用相同的加载程序 ID，我认为您将获得所需的行为。确保加载器 ID 对于要加载的数据是唯一的。例如，PhotosLoader 和 VideoLoader 不应具有相同的 id。

# c# - wgs 点到 wgs 定义的线段的距离

> ID：10045544
> 
> 赞同：4
> 
> 时间：2012-04-06T15:23:53.447
> 
> 标签：c#, wgs84, geographic-distance

我进行了搜索，但找不到完整的答案。如果可能的话，在 C# 中。我需要 WGS 点和球体上 WGS 点定义的线段之间的最短距离（准确地说是地球）。

```
float DistanceInKilometres(PointF LineStartA, PointF LineEndB, PointF ThePoint) 
```

编辑：也许插图会有所帮助

![在此处输入图像描述](../Images/0a2307aded8f62243f9abfc04a62601a.png)

请注意，这是一个理想的例子。“点”可以是球体表面的任何地方，也可以是线段的起点。显然，我不是在寻找穿过球体的距离。数学不是我的强项，所以我不理解*normalize*或*to cartesian*。也许我还应该注意路径 AB 是最短的，而距离？也是最短的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-19T16:46:53.040

您可以使用余弦球面定律：

*   [http://en.wikipedia.org/wiki/Spherical_law_of_cosines](http://en.wikipedia.org/wiki/Spherical_law_of_cosines)
*   [http://mathworld.wolfram.com/SphericalSegment.html](http://mathworld.wolfram.com/SphericalSegment.html)
*   [http://mathworld.wolfram.com/SphericalTrigonometry.html](http://mathworld.wolfram.com/SphericalTrigonometry.html)

您将不得不使用地球的半径进行计算：

EARTH_RADIUS_KM = 6371；

在这里，来自我对 OsmMercator.java 的贡献，来自 openstreetmap.org：

```
/**
 * Gets the distance using Spherical law of cosines.
 *
 * @param la1 the Latitude in degrees
 * @param lo1 the Longitude in degrees
 * @param la2 the Latitude from 2nd coordinate in degrees
 * @param lo2 the Longitude from 2nd coordinate in degrees
 * @return the distance
 */
public static double getDistance(double la1, double lo1, double la2, double lo2) {
    double aStartLat = Math.toRadians(la1);
    double aStartLong = Math.toRadians(lo1);
    double aEndLat =Math.toRadians(la2);
    double aEndLong = Math.toRadians(lo2);

    double distance = Math.acos(Math.sin(aStartLat) * Math.sin(aEndLat)
            + Math.cos(aStartLat) * Math.cos(aEndLat)
            * Math.cos(aEndLong - aStartLong));

    return (EARTH_RADIUS_KM * distance);
} 
```

您需要做的就是使用点积找到最近的点并将其与距离方程一起使用。

这是最近点示例：

```
double[] nearestPointSegment (double[] a, double[] b, double[] c)
{
   double[] t= nearestPointGreatCircle(a,b,c);
   if (onSegment(a,b,t))
     return t;
   return (distance(a,c) < distance(b,c)) ? a : c;
} 
```

*   [如何计算球体上点到线段的距离？](https://stackoverflow.com/questions/1299567/how-to-calculate-distance-from-a-point-to-a-line-segment-on-a-sphere)
*   [http://en.wikipedia.org/wiki/Great-circle_distance](http://en.wikipedia.org/wiki/Great-circle_distance)

请记住，这些单位尚未明确声明。在处理空间中的点时，有多种方法可以确定位置。最重要的是你必须将你的单位确定为一致的类型。

在处理地球上的位置时，我主要使用纬度/经度坐标和矢量来表示大小/方向。有几种已知类型可用于矢量和地球的位置。其中包括：

*   地心地球固定 (ECEF) 坐标系
*   东北下 (NED)
*   大地坐标系

对于您的示例，我可能会考虑坚持使用 Geodetic。

现在，把这些放在一起，你可能会得到一些伪代码，如下所示：

```
Where a Vector is made up of Geodetic coordinates:
class Vector {
 double x=0.0; //latitude
 double y=0.0; //longitude
 double h=0.0; //height
...
}

public Vector closestPoint(Vector lineStartA, Vector lineEndB, final Vector thePoint ) {
    Vector w = thePoint.subtract(lineStartA);
    double proj = w.dot(lineEndB);
    // endpoint 0 is closest point
    if ( proj <= 0.0f )
        return lineStartA;
    else
    {
        //Vector square 
        double vsq = lineEndB.dot(lineEndB);
        // endpoint 1 is closest point
        if ( proj >= vsq )
            return lineStartA.add(lineEndB);
        else
            return lineStartA.add(lineEndB.multiply(proj/vsq));
    }
}      

double DistanceInKilometres(Vector lineStartA, Vector lineEndB, Vector thePoint) {
  Vector cp=closestPoint(lineStartA, lineEndB, thePoint);
  return getDistance(cp.x, cp.y, thePoint.x, thePoint.y);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T19:30:05.650

如果您的点位于由线段端点定义且垂直于线的走廊内，那么这个[答案](https://stackoverflow.com/questions/133897/how-do-you-find-a-point-at-a-given-perpendicular-distance-from-a-line)应该可以。

如果您的点位于该走廊之外，则计算您的点到线段每一端的距离并取较小的值。

# sql - 我怎样才能有一个在同一行回显 echo 的 powershell 循环？

> ID：10045551
> 
> 赞同：1
> 
> 时间：2012-04-06T15:24:22.917
> 
> 标签：sql, loops, powershell, formatting, echo

目前我有跟随 ps 读取用户名列表然后回显它。

用户名文件如下

```
username1
username2
username3 
```

ps脚本如下

```
$userNames = (Get-Content usernames.txt)# | Sort-Object
$userID=0
$userNames.Count
echo "FROM table WHERE (userID ='"
For ($i =1; $i -le ($userNames.Count - 1); $i++)
{
echo $userNames[$userID] "' OR userID='"
$userID++
}
echo $userNames[$userNames.Count - 1] "'" 
```

我希望能在同一行上回显（并最终写入文本文件）。

```
FROM table WHERE (userID = 'username1' OR userID = 'username2' OR userID = 'username3' 
```

我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T15:30:33.093

您正在寻找的是：

```
Write-Host "Blah" -NoNewLine 
```

我可能会像这样重写脚本以避免不得不使用`For...Loop`

```
$userNames = (Get-Content usernames.txt) | Sort-Object
$count = 0

Write-Host "FROM table WHERE (" -NoNewLine

$userNames |% {
    Write-Host "userID='$_'" -NoNewLine

    if(++$count -ne $userNames.Length){
        Write-Host " OR " -NoNewLine
    }
    else {
        Write-Host ")"
    }
} 
```

该脚本还将利用 PowerShell 的另一个不错的功能，即字符串文字中的变量替换。`For-EachObject`在迭代过程中自动设置`$_`为当前对象，PowerShell 将自动解析字符串文字中的变量并替换它们的值。

另外......**我刚刚意识到整个事情可以简化为以下内容：**

```
$userNames = (Get-Content usernames.txt) | Sort-Object |% { "'$_'" }

Write-Host "FROM table WHERE UserID in ($([String]::Join(",",$userNames)))" 
```

这将产生以下查询：

```
FROM table WHERE UserID in ('username1','username2','username3') 
```

在我看来，这是一个更令人愉快的脚本*和查询:)*

# c# - 如何从pdf文件C#中读取带有AnchorText的超链接

> ID：10045553
> 
> 赞同：1
> 
> 时间：2012-04-06T15:24:32.027
> 
> 标签：c#, itext

我已经从 PDF 文件中获取了链接值，例如`http://google.com` ，但我需要获取锚文本值`click here`。如何取锚链接值文本？

我使用以下 URL 获取了 PDF 文件的 URL 值： 例如[，从 pdf 文件中读取超链接。](https://stackoverflow.com/questions/6959076/reading-hyperlinks-from-pdf-file)

```
Anchor a = new Anchor("Test Anchor");
a.Reference = "http://www.google.com";
myParagraph.Add(a); 
```

在这里我得到了，`http://www.google.com`但我需要得到锚值，即`Test Anchor`

需要你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-17T06:30:00.547

从 PDF 文件中，您需要确定放置链接的区域，然后使用 iTextSharp 阅读链接下方的文本。

这样您就可以提取链接下方的文本。这种方法的局限性在于，如果链接区域比文本宽，则提取将读取该区域下的全文。

```
private void GetAllHyperlinksFromPDFDocument(string pdfFilePath)
{
    string linkTextBuilder = "";
    string linkReferenceBuilder = "";

    PdfDictionary PageDictionary = default(PdfDictionary);
    PdfArray Annots = default(PdfArray);
    PdfReader R = new PdfReader(pdfFilePath);

    List<BinaryHyperlink> ret = new List<BinaryHyperlink>();

    //Loop through each page
    for (int i = 1; i <= R.NumberOfPages; i++)
    {
        //Get the current page
        PageDictionary = R.GetPageN(i);

        //Get all of the annotations for the current page
        Annots = PageDictionary.GetAsArray(PdfName.ANNOTS);

        //Make sure we have something
        if ((Annots == null) || (Annots.Length == 0))
            continue;

        //Loop through each annotation

        foreach (PdfObject A in Annots.ArrayList)
        {
            //Convert the itext-specific object as a generic PDF object
            PdfDictionary AnnotationDictionary = (PdfDictionary)PdfReader.GetPdfObject(A);

            //Make sure this annotation has a link
            if (!AnnotationDictionary.Get(PdfName.SUBTYPE).Equals(PdfName.LINK))
                continue;

            //Make sure this annotation has an ACTION
            if (AnnotationDictionary.Get(PdfName.A) == null)
                continue;

            //Get the ACTION for the current annotation
            PdfDictionary AnnotationAction = (PdfDictionary)AnnotationDictionary.GetAsDict(PdfName.A);
            if (AnnotationAction.Get(PdfName.S).Equals(PdfName.URI))
            {
                //Get action link URL : linkReferenceBuilder
                PdfString Link = AnnotationAction.GetAsString(PdfName.URI);
                if (Link != null)
                    linkReferenceBuilder = Link.ToString();

                //Get action link text : linkTextBuilder
                var LinkLocation = AnnotationDictionary.GetAsArray(PdfName.RECT);
                List<string> linestringlist = new List<string>();
                iTextSharp.text.Rectangle rect = new iTextSharp.text.Rectangle(((PdfNumber)LinkLocation[0]).FloatValue, ((PdfNumber)LinkLocation[1]).FloatValue, ((PdfNumber)LinkLocation[2]).FloatValue, ((PdfNumber)LinkLocation[3]).FloatValue);
                RenderFilter[] renderFilter = new RenderFilter[1];
                renderFilter[0] = new RegionTextRenderFilter(rect);
                ITextExtractionStrategy textExtractionStrategy = new FilteredTextRenderListener(new LocationTextExtractionStrategy(), renderFilter);
                linkTextBuilder = PdfTextExtractor.GetTextFromPage(R, i, textExtractionStrategy).Trim();
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:54:33.747

不幸的是，我认为您无法做到这一点，至少在没有大量猜测的情况下不会。在 HTML 中这很容易，因为超链接和它的文本一起存储为：

```
<a href="http://www.example.com/">Click here</a> 
```

但是，在 PDF 中，这两个实体不以任何形式的关系存储。我们认为的 PDF 中的“超链接”在技术上是恰好位于文本顶部的 PDF 注释。您可以通过在 Adob​​e Acrobat Pro 等编辑程序中打开 PDF 来查看。您可以更改文本，但“可点击”区域不会更改。您还可以移动和调整“可点击”区域的大小，并将其放在文档中的任何位置。

创建 PDF 时，iText/iTextSharp 将其抽象出来，因此您不必考虑这一点。您可以创建带有可点击文本的“超链接”，但是当它生成 PDF 时，它最终会将文本创建为普通文本，计算矩形坐标，然后在该矩形上放置注释。

我确实说过您可以尝试猜测这一点，它可能适合您，也可能不适合您。为此，您需要获取用于注释的矩形，然后找到也在这些坐标处的文本。但是，由于填充问题，它不会是完全匹配的。如果您绝对必须在超链接下获取文本，那么这是我所知道的唯一方法。祝你好运！

# ubuntu - Pygmentize：找不到名称“javascript”的格式化程序

> ID：10045554
> 
> 赞同：0
> 
> 时间：2012-04-06T15:24:32.253
> 
> 标签：ubuntu, jekyll, pygments

我正在尝试使用 Pygments 生成为 JavaScript 格式化的 CSS 文件。我可以通过使用以下方法对 HTML 做得很好：

```
pygmentize -S default -f html 
```

但是，当我尝试使用 JavaScript 时：

```
pygmentize -S default -f javascript 
```

我收到以下错误：

```
No formatter found for name 'javascript' 
```

如何让 Pygments 为 JavaScript 生成 CSS 文件？谢谢。

* * *

**编辑：**我的目标是生成样式化 Pygments 格式`code`块所需的 CSS。例如，当我在启用 Pygments 的情况下运行 Jekyll 时，它会将我的`code`块格式化为各种 CSS 类。但是，没有 CSS 文件来设置这些类的样式。也许我误解了如何使用 Pygments。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T13:55:05.270

我认为您误解了 pygment 的作用以及.`lexer`和`formatter`.

*   `lexer`用于解析要突出显示的代码，在 jekyll 中，在`{% highlight %}`命令中，您提供词法分析器作为参数：`ruby`, `python`,`javascript`等。
*   `formatter`是您想要的输出格式：`pdf`、`latex`、`html`等。

如果您选择 html 格式化程序，您将拥有一个适用于所有语言的**CSS 样式表**，这些语言将使用不同的`lexer`.

因此，要获得此 CSS，您可以浏览网络以查找自定义 CSS（访问[http://pygments.org/demo/](http://pygments.org/demo/)并在您选择了一个演示后使用组合框选择不同的样式）。[或者从http://pygments.org/media/pygments_style.css](http://pygments.org/media/pygments_style.css)下载默认样式

# objective-c - ParseKit 的汇编程序回调如何工作？我应该在哪里存储我在其中所做的工作？

> ID：10045555
> 
> 赞同：6
> 
> 时间：2012-04-06T15:24:37.390
> 
> 标签：objective-c, parsekit

我应该如何在 parsekit 中使用回调函数？假设我有以下规则：

```
expr_s = expr_p '+' expr_s | expr_p ; 
```

我应该从生成的 PKAssembly 中弹出 3 个符号并添加第一个和最后一个数字，然后将答案推回堆栈吗？
对于上述规则，我怎么知道是第一条规则还是第二条规则导致了匹配？
我不明白 ParseKit 调用回调函数的顺序。我真的可以使用一些帮助。

感谢 Todd 的回复，请记住您的指示，我为一个简单的数学表达式编写了以下语法和回调函数，其中包括加法和乘法：

```
- (IBAction)press_equals:(id)sender {
NSString *g = @"@start = expr_s; expr_s = expr_p ('+'! expr_p)+ ; expr_p = Number ('*'!     Number)+  ;";
PKParser *p = [[PKParserFactory factory] parserFromGrammar:g assembler:self];
NSString *s = @"3*4+4*8";

[p parse:s];

PKAssembly *res = [p parse:s];
NSLog(@"res %@", res);

}

- (void)parser:(PKParser *)p didMatchExpr_s:(PKAssembly *)a {
NSLog(@"%s %@", __PRETTY_FUNCTION__, a);

NSArray *toks = [a objectsAbove:nil];

double total = 0.0;
for (PKToken *tok in toks) {
    total += tok.floatValue;
}

a.target = [NSNumber numberWithDouble:total];
}
- (void)parser:(PKParser *)p didMatchExpr_p:(PKAssembly *)a {
NSLog(@"%s %@", __PRETTY_FUNCTION__, a);

NSArray *toks = [a objectsAbove:nil];

double total = 1.0;
for (PKToken *tok in toks) {
    total *= tok.floatValue;
}
a.target = [NSNumber numberWithDouble:total];
} 
```

这是我得到的输出：

```
2012-04-06 22:54:31.975 Calculator[1070:207] -[CalculatorViewController    parser:didMatchExpr_p:] [3, 4]3/*/4^+/4/*/8
2012-04-06 22:54:31.976 Calculator[1070:207] -[CalculatorViewController parser:didMatchExpr_p:] [4, 8]3/*/4/+/4/*/8^
2012-04-06 22:54:31.977 Calculator[1070:207] -[CalculatorViewController parser:didMatchExpr_s:] []3/*/4/+/4/*/8^
2012-04-06 22:54:31.977 Calculator[1070:207] -[CalculatorViewController parser:didMatchExpr_p:] [3, 4]3/*/4^+/4/*/8
2012-04-06 22:54:31.978 Calculator[1070:207] -[CalculatorViewController parser:didMatchExpr_p:] [4, 8]3/*/4/+/4/*/8^
2012-04-06 22:54:31.978 Calculator[1070:207] -[CalculatorViewController parser:didMatchExpr_s:] []3/*/4/+/4/*/8^
2012-04-06 22:54:31.979 Calculator[1070:207] res 0 
```

为什么我的 res 为 0？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T16:30:40.293

[ParseKit](http://parsekit.com)的开发者在这里。

首先，理解这些东西的最好方法是[Steven Metsker 的书](https://rads.stackoverflow.com/amzn/click/com/0201719622)，ParseKit 就是基于该书。

* * *

其次，[查看我对另一个关于`PKAssembly`'s`stack`和`target`.](https://stackoverflow.com/a/7098051/34934)

* * *

第三，这是[我对另一个关于意外回调的 PaseKit 问题的回答](https://stackoverflow.com/a/6237800/34934)。

* * *

第四，检查ParseKit**测试目标中的**[`TDArithmeticParser.m`文件](http://code.google.com/p/parsekit/source/browse/trunk/test/TDArithmeticParser.m)（包含在 ParseKit Xcode 项目中。此类具有实现您似乎正在寻找的相同类型的算术逻辑的回调。

 **同时签出[`arithmetic.grammar`文件](http://code.google.com/p/parsekit/source/browse/trunk/res/arithmetic.grammar)（也在 ParseKit 测试目标中）。这是一个如何在 ParseKit 语法中设计算术语法的示例。

* * *

最后，这里有一些更具体到你上面的例子的想法。

让我们稍微澄清一下您的语法，因为您提出的问题非常基本，我认为它不需要非常复杂的语法来解决。这是一个基本的算术语法，它使乘法和除法运算符优先于加法和减法：

```
@start         = expr;
expr           = term (plusTerm | minusTerm)*;
term           = factor (timesFactor | divFactor)*;
plusTerm       = '+'! term;
minusTerm      = '-'! term;
timesFactor    = '*'! factor;
divFactor      = '/'! factor;
factor         = Number; 
```

`!`在`'+'`告诉 ParseKit**自动丢弃这个令牌**之后。这使您在编写回调时更加方便。

**请注意**，如果您希望您的语法只有从左到右的运算符优先级（如计算器），则此语法将不起作用。如果您需要，请在 StackOverflow 上提出一个标记为 #ParseKit 的单独问题，我会及时回答。

我会定义这些回调：

```
- (void)parser:(PKParser *)p didMatchExpr:(PKAssembly *)a {
    NSLog(@"%s %@", __PRETTY_FUNCTION__, a);

    NSNumber *n = [a pop];

    // the expr is complete, and its value is on the stack.
    // important! wrap things up by 
    // storing your work in `a.target`. not in an ivar.
    a.target = n;
}

- (void)parser:(PKParser *)p didMatchFactor:(PKAssembly *)a {
    NSLog(@"%s %@", __PRETTY_FUNCTION__, a);

    // a number token was found. store its number value on the stack
    PKToken *tok = [a pop];
    [a push:[NSNumber numberWithDouble:tok.floatValue]];
}

- (void)parser:(PKParser *)p didMatchPlusTerm:(PKAssembly *)a {
    NSLog(@"%s %@", __PRETTY_FUNCTION__, a);

    // a '+' expr was found. pop off the two operands and add them
    // store the result on the stack temporarily
    NSNumber *n2 = [a pop];
    NSNumber *n1 = [a pop];
    [a push:[NSNumber numberWithDouble:[n1 doubleValue] + [n2 doubleValue]]];
}

- (void)parser:(PKParser *)p didMatchMinusTerm:(PKAssembly *)a {
    NSLog(@"%s %@", __PRETTY_FUNCTION__, a);

    // a '-' expr was found. pop off the two operands and subtract them
    // store the result on the stack temporarily
    NSNumber *n2 = [a pop];
    NSNumber *n1 = [a pop];
    [a push:[NSNumber numberWithDouble:[n1 doubleValue] - [n2 doubleValue]]];
}

- (void)parser:(PKParser *)p didMatchTimesFactor:(PKAssembly *)a {
    NSLog(@"%s %@", __PRETTY_FUNCTION__, a);

    // a '*' expr was found. pop off the two operands and multiply them
    // store the result on the stack temporarily
    NSNumber *n2 = [a pop];
    NSNumber *n1 = [a pop];
    [a push:[NSNumber numberWithDouble:[n1 doubleValue] * [n2 doubleValue]]];
}

- (void)parser:(PKParser *)p didMatchDivideFactor:(PKAssembly *)a {
    NSLog(@"%s %@", __PRETTY_FUNCTION__, a);

    // a '/' expr was found. pop off the two operands and divide them
    // store the result on the stack temporarily
    NSNumber *n2 = [a pop];
    NSNumber *n1 = [a pop];
    [a push:[NSNumber numberWithDouble:[n1 doubleValue] / [n2 doubleValue]]];
} 
```

**两个重要的点**是

1.  **不用担心这些回调被调用了多少次**。它们的调用次数可能比您预期的要多，或者调用的顺序看起来很奇怪。
2.  **不要将这些回调中完成的工作结果存储在 ivar 中**。始终将您的工作存储在`a`参数的`target`或`stack`. 我通常将临时值存储在 上`stack`，并将最终结果存储在 上`target`，因为我发现这样最方便。但是你有灵活性。

我会写这个驱动程序代码：

```
NSString *g = .. // fetch grammar above
PKParser *p = [[PKParserFactory factory] parserFromGrammar:g assembler:self];
NSString *s = @"3*4+4*8";

PKAssembly *res = [p parse:s];
NSLog(@"res %@", res); 
```

我看到这个日志输出：

```
-[DebugAppDelegate parser:didMatchFactor:] [3]3^*/4/+/4/*/8
-[DebugAppDelegate parser:didMatchFactor:] [3, 4]3/*/4^+/4/*/8
-[DebugAppDelegate parser:didMatchTimesFactor:] [3, 4]3/*/4^+/4/*/8
-[DebugAppDelegate parser:didMatchFactor:] [12, 4]3/*/4/+/4^*/8
-[DebugAppDelegate parser:didMatchFactor:] [12, 4, 8]3/*/4/+/4/*/8^
-[DebugAppDelegate parser:didMatchTimesFactor:] [12, 4, 8]3/*/4/+/4/*/8^
-[DebugAppDelegate parser:didMatchPlusTerm:] [12, 4]3/*/4/+/4^*/8
-[DebugAppDelegate parser:didMatchPlusTerm:] [12, 32]3/*/4/+/4/*/8^
-[DebugAppDelegate parser:didMatchExpr:] [3]3^*/4/+/4/*/8
-[DebugAppDelegate parser:didMatchExpr:] [12]3/*/4^+/4/*/8
-[DebugAppDelegate parser:didMatchExpr:] [16]3/*/4/+/4^*/8
-[DebugAppDelegate parser:didMatchExpr:] [44]3/*/4/+/4/*/8^
res 44 
```

希望这可以帮助。**

# xul - 关闭消息选项卡/窗口时访问 Thunderbird 消息

> ID：10045556
> 
> 赞同：3
> 
> 时间：2012-04-06T15:24:37.760
> 
> 标签：xul, thunderbird

我们开发了一个 Thunderbird (11) 插件，允许我们将消息的内容保存到磁盘。现在我们正在扩展此扩展程序，以便在您关闭消息时自动处理它。我们遇到了很多问题：

我们找不到挂钩“关闭标签”事件的方法。我们在获取当前打开的选项卡的消息 URI 时也遇到了问题（我们现在正在尝试捕获点击和键盘事件）。此信息在选项卡容器的 DOM 中似乎不可用。

有没有办法以通用方式检测邮件消息选项卡或窗口的关闭，以及检索已关闭邮件消息的 URI 以进行进一步处理？

我们查看了选项卡容器的文档`NsIWindowMediator`，尝试了各种事件侦听器，但到目前为止还没有运气。

编辑：我们使用最近关闭的选项卡列表获得了一些结果。不是一个非常优雅的解决方案，但至少我们有一个对选项卡的引用。现在我们只需要获取选项卡中包含的消息的 URI。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T20:00:50.263

> 我们找不到挂钩“关闭标签”事件的方法。

（[文档不详](http://mxr.mozilla.org/comm-central/source/mail/base/content/tabmail.xml)）`<tabmail>`元素允许注册选项卡监视器。像这样的东西应该工作：

```
var tabmail = document.getElementById("tabmail");
var monitor = {
  onTabClosing: function(tab)
  {
    ...
  }
};
tabmail.registerTabMonitor(monitor); 
```

> 我们也无法获取当前打开的选项卡的消息 URI

该`<tabmail>`元素有一个`tabInfo`包含当前打开选项卡信息的属性。您可能只想查看所在的选项卡`mode.name`（`"message"`还有许多其他模式，例如`"folder"`or `"contentTab"`）。这种模式有一个`getBrowser()`方法，所以应该这样做：

```
var tabmail = document.getElementById("tabmail");
for (var i = 0; i < tabmail.tabInfo.length; i++)
{
  var tab = tabmail.tabInfo[i];
  if (tab.mode.name == "message")
    alert(tab.mode.getBrowser().currentURI.spec);
} 
```

**编辑**：正如彼得在评论中指出的那样，获取消息 URI 的方法仅适用于当前加载的消息 - 所有选项卡都为邮件消息重用相同的浏览器元素。正确获取 URI 更加复杂，您必须通过获取消息的[`nsIMsgDBHdr`实例](https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIMsgDBHdr)`TabInfo.folderDisplay.selectedMessage`，然后使用[`nsIMsgFolder.getUriForMsg()`](https://developer.mozilla.org/en-US/docs/Mozilla/Tech/XPCOM/Reference/Interface/nsIMsgFolder#getUriForMsg%28%29)它为其构造 URI：

```
var tabmail = document.getElementById("tabmail");
for (var i = 0; i < tabmail.tabInfo.length; i++)
{
  var tab = tabmail.tabInfo[i];
  if (tab.mode.name != "message")
    continue;
  var message = tab.folderDisplay.selectedMessage;
  alert(message.folder.getUriForMsg(message));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T12:57:35.717

对于问题的第二部分：

以下示例代码将为您提供所有打开的选项卡的 msgDBHdr 对象。您应该对类型进行一些检查以避免访问日历选项卡中的消息。）：

```
tabInfos = window.document.getElementById("tabmail").tabInfo;
for (i = 0; i < tabInfos.length; i++) {      
  msgHdr = tabInfos[i].folderDisplay.selectedMessage;
  alert(
    msgHdr.mime2DecodedSubject+"\n"
   +msgHdr.messageId+"\n"
   +"in view type "+tabInfos[i].mode.type
  );
} 
```

tabinfo 条目有一些更有趣的信息。只需打开 ErrorConsole 并运行

```
top.opener.window.document.getElementById("tabmail").tabInfo[0].toSource() 
```

并仔细阅读。

# python - 在 Python 中散列一个不可变的字典

> ID：10045562
> 
> 赞同：17
> 
> 时间：2012-04-06T15:25:18.397
> 
> 标签：python, dictionary, hash, immutability, python-3.2

**简短版本：**作为无序项字典实现的多重集的最佳散列算法是什么？

我正在尝试散列一个不可变的多重集（在其他语言中是一个包或多重集：就像一个数学集，除了它可以容纳多个元素）作为字典实现。我创建了标准库类的一个子类`collections.Counter`，类似于这里的建议：[Python hashable dicts](https://stackoverflow.com/questions/1151658/python-hashable-dicts)，它推荐了一个像这样的哈希函数：

```
class FrozenCounter(collections.Counter):
    # ...
    def __hash__(self):
        return hash(tuple(sorted(self.items()))) 
```

创建项目的完整元组会占用大量内存（例如，相对于使用生成器），并且在我的应用程序的内存非常密集的部分会发生散列。更重要的是，我的字典键（多集元素）可能无法订购。

我正在考虑使用这个算法：

```
def __hash__(self):
    return functools.reduce(lambda a, b: a ^ b, self.items(), 0) 
```

我认为使用按位异或意味着**顺序对哈希值无关紧要，这与元组的哈希不同？**我想我可以在我的数据的无序元组流上半实现 Python 元组哈希算法。请参阅[https://github.com/jonashaag/cpython/blob/master/Include/tupleobject.h](https://github.com/jonashaag/cpython/blob/master/Include/tupleobject.h)（在页面中搜索“哈希”一词）——但我几乎不知道足够的 C 来阅读它。

**想法？建议？谢谢。**

* * *

（*如果您想知道我为什么要尝试散列一个多重集：*我的问题的输入数据是多重集的集合，并且在每组多重集中，每个多重集必须是唯一的。我正在截止日期前工作而且我不是经验丰富的编码员，所以我想尽可能避免发明新算法。似乎最 Pythonic 的方法来确保我拥有一堆东西中的独特性，就是把它们放在 a 中`set()`，但这些东西必须是可散列的。）

* * *

# 我从评论中收集到的

@marcin 和 @senderle 都给出了几乎相同的答案： use `hash(frozenset(self.items()))`。这是有道理的，因为[`items()`“视图”是 set-like](http://docs.python.org/py3k/library/stdtypes.html#dictionary-view-objects)。@marcin 是第一个，但我给@senderle 打了勾，因为对不同解决方案的 big-O 运行时间进行了很好的研究。@marcin 还提醒我[包含一种`__eq__`方法](http://docs.python.org/py3k/reference/datamodel.html#object.__hash__)——但继承自的方法`dict`可以正常工作。这就是我实现一切的方式——欢迎基于此代码的进一步评论和建议：

```
class FrozenCounter(collections.Counter):
    # Edit: A previous version of this code included a __slots__ definition.
    # But, from the Python documentation: "When inheriting from a class without
    # __slots__, the __dict__ attribute of that class will always be accessible,
    # so a __slots__ definition in the subclass is meaningless."
    # http://docs.python.org/py3k/reference/datamodel.html#notes-on-using-slots
    # ...
    def __hash__(self):
        "Implements hash(self) -> int"
        if not hasattr(self, '_hash'):
            self._hash = hash(frozenset(self.items()))
        return self._hash 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T15:37:47.493

由于字典是不可变的，因此可以在创建字典时创建哈希并直接返回。我的建议是创建一个[`frozenset`](http://docs.python.org/library/stdtypes.html#frozenset)from `items`（在 3+ 中；`iteritems`在 2.7 中），对其进行散列并存储散列。

提供一个明确的例子：

```
>>>> frozenset(Counter([1, 1, 1, 2, 3, 3, 4]).iteritems())
frozenset([(3, 2), (1, 3), (4, 1), (2, 1)])
>>>> hash(frozenset(Counter([1, 1, 1, 2, 3, 3, 4]).iteritems()))
-3071743570178645657
>>>> hash(frozenset(Counter([1, 1, 1, 2, 3, 4]).iteritems()))
-6559486438209652990 
```

为了澄清为什么我更喜欢 a`frozenset`而不是排序项目的元组： a`frozenset`不必对项目进行排序，因此初始哈希在 O(n) 时间内完成，而不是 O(n log n) 时间。这可以从[`frozenset_hash`](http://hg.python.org/cpython/file/5fd1ac1c9474/Objects/setobject.c#l766)和[`set_next`](http://hg.python.org/cpython/file/5fd1ac1c9474/Objects/setobject.c#l531)实现中看出。

另请参阅Raymond Hettinger 的这个[很好的回答](https://stackoverflow.com/a/20931478)`frozenset`，描述了他对哈希函数的实现。在那里，他明确解释了哈希函数如何避免对值进行排序以获得稳定的、顺序不敏感的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:39:14.127

你考虑过`hash(sorted(hash(x) for x in self.items()))`吗？这样，您只需对整数进行排序，而不必构建列表。

您也可以将元素散列异或在一起，但坦率地说，我不知道这有多好（你会有很多冲突吗？）。说到碰撞，不是非得实现`__eq__`方法吗？

或者，类似于我[在这里](https://stackoverflow.com/a/9997296/21640)的回答，`hash(frozenset(self.items()))`。

# javascript - Expressjs/node.js 相当于 php 中的 exit()

> ID：10045573
> 
> 赞同：1
> 
> 时间：2012-04-06T15:25:59.397
> 
> 标签：javascript, node.js, express

我正在使用带有 node.js 的 Expressjs，并且我有这样的路线：

```
 users.init(app.db, function() {

        users.checkUsername(user.username, function(err, count) {
            if (count > 0) {
                res.json({'username': 'unavailable'});
            }
        });

        users.checkEmail(user.email, function(err, count) {
            if (count > 0) {
                res.json({'email': 'unavailable'});
            }
        });

        users.insertUser(user, function(err, response) {
            res.json({'success' : 'true'});
        });

    }) 
```

例如，在某些情况下，这将打印发送多个响应、用户名和电子邮件。

这条路线是通过 ajax 调用的，在 php 中，我通常`exit()`在回显一个 json 响应后执行一个。有没有办法在 Expressjs 中做到这一点？

谢谢！

编辑：我可以将所有内容包装在 if/else 中或在每个内容中设置一个标志，但只是看看是否有更优雅的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:22:20.500

您不能使用“多次响应”（无论这意味着什么）`res.json`- 每次使用它时，它都会将数据发送到客户端并最终确定响应。您需要将结果保存（并更新）在变量中并在最后发送。

现在我可以为你想出两种可能性：

*   **嵌套回调**实际上很烦人但有时是必要的（例如，第二次调用取决于第一次调用）；

*   **异步回调队列**在回调中检查是否所有其他回调都完成了工作。如果是这样，请作出回应。自己实现它可能有点棘手，所以尝试例如一个优秀的[异步](https://github.com/caolan/async)库。

# c# - XML反序列化“元素不是预期的”错误

> ID：10045574
> 
> 赞同：3
> 
> 时间：2012-04-06T15:26:02.147
> 
> 标签：c#, xml, xml-deserialization

我知道以前有人问过这个问题，但是我检查了其他线程，但没有一个对我有帮助。我正在尝试将 xml 反序列化为对象并收到错误消息：

```
"<doPublish xmlns='http://usdoj.gov/leisp/lexs/publishdiscover/3.1'> 
   was not expected." 
```

我的 XML 看起来像：

```
<lexspd:doPublish xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://usdoj.gov/leisp/lexs/publishdiscover/3.1 ../xsd/lexs/publish-discover/3.1/publish-discover.xsd"
    xmlns:lexspd="http://usdoj.gov/leisp/lexs/publishdiscover/3.1"
    xmlns:lexs="http://usdoj.gov/leisp/lexs/3.1">
    <lexs:PublishMessageContainer>
        <lexs:PublishMessage>
            <lexs:PDMessageMetadata>
            </lexs:PDMessageMetadata>
        </lexs:PublishMessage>
    </lexs:PublishMessageContainer>
</lexspd:doPublish> 
```

我用来反序列化的代码如下所示：

```
XmlSerializer xs = new XmlSerializer(typeof(PublishMessageType));
Encoding encode = new UTF8Encoding();

PDWebService lexpdServiceProxy = new PDWebService();
lexpdServiceProxy.Url = "http://59.60.72.12/";

String pdMessageXml = File.ReadAllText(fileName);

DoPublishType doPublishType = new DoPublishType();
MemoryStream publishMsgMemStream = new MemoryStream(encode.GetBytes(pdMessageXml));
doPublishType.PublishMessageContainer = new PublishMessageType[1];
doPublishType.PublishMessageContainer[0] =
   (PublishMessageType)xs.Deserialize(publishMsgMemStream); 
```

我试图反序列化的对象也看起来像：（缩短版）

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "2.0.50727.3038")]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Web.Services.WebServiceBindingAttribute(Name = "PDWebServiceSoapBinding", Namespace = "http://usdoj.gov/leisp/lexs/publishdiscover/3.1/ws")]
[System.Xml.Serialization.XmlIncludeAttribute(typeof(SRMessageType))]
[System.Xml.Serialization.XmlIncludeAttribute(typeof(AugmentationType))]
[System.Xml.Serialization.XmlIncludeAttribute(typeof(PayloadObjectReferenceType))]
[System.Xml.Serialization.XmlIncludeAttribute(typeof(ComplexObjectType))]
[System.Xml.Serialization.XmlIncludeAttribute(typeof(MetadataType))]
public partial class PDWebService : System.Web.Services.Protocols.SoapHttpClientProtocol
{

    private System.Threading.SendOrPostCallback doPublishOperationCompleted;

    /// <remarks/>
    public PDWebService()
    {
        this.Url = "http://localhost:9080/PDWebService/services/PDWebServiceBean";
    }

    /// <remarks/>
    public event doPublishCompletedEventHandler doPublishCompleted;

    /// <remarks/>
    [System.Web.Services.Protocols.SoapDocumentMethodAttribute("urn:#doPublish", Use = System.Web.Services.Description.SoapBindingUse.Literal, ParameterStyle = System.Web.Services.Protocols.SoapParameterStyle.Bare)]
    [return: System.Xml.Serialization.XmlElementAttribute("doPublishReponse", Namespace = "http://usdoj.gov/leisp/lexs/publishdiscover/3.1/ws")]
    public doPublishReponse doPublish([System.Xml.Serialization.XmlElementAttribute("doPublish", Namespace = "http://usdoj.gov/leisp/lexs/publishdiscover/3.1")] DoPublishType doPublish1)
    {
        object[] results = this.Invoke("doPublish", new object[] {
                doPublish1});
        return ((doPublishReponse)(results[0]));
    }

    /// <remarks/>
    public System.IAsyncResult BegindoPublish(DoPublishType doPublish1, System.AsyncCallback callback, object asyncState)
    {
        return this.BeginInvoke("doPublish", new object[] {
                doPublish1}, callback, asyncState);
    }

    /// <remarks/>
    public doPublishReponse EnddoPublish(System.IAsyncResult asyncResult)
    {
        object[] results = this.EndInvoke(asyncResult);
        return ((doPublishReponse)(results[0]));
    }

    /// <remarks/>
    public void doPublishAsync(DoPublishType doPublish1)
    {
        this.doPublishAsync(doPublish1, null);
    }

    /// <remarks/>
    public void doPublishAsync(DoPublishType doPublish1, object userState)
    {
        if ((this.doPublishOperationCompleted == null))
        {
            this.doPublishOperationCompleted = new System.Threading.SendOrPostCallback(this.OndoPublishOperationCompleted);
        }
        this.InvokeAsync("doPublish", new object[] {
                doPublish1}, this.doPublishOperationCompleted, userState);
    }

    private void OndoPublishOperationCompleted(object arg)
    {
        if ((this.doPublishCompleted != null))
        {
            System.Web.Services.Protocols.InvokeCompletedEventArgs invokeArgs = ((System.Web.Services.Protocols.InvokeCompletedEventArgs)(arg));
            this.doPublishCompleted(this, new doPublishCompletedEventArgs(invokeArgs.Results, invokeArgs.Error, invokeArgs.Cancelled, invokeArgs.UserState));
        }
    }

    /// <remarks/>
    public new void CancelAsync(object userState)
    {
        base.CancelAsync(userState);
    }
}
    /// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("wsdl", "2.0.50727.3038")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType = true, Namespace = "http://usdoj.gov/leisp/lexs/publishdiscover/3.1/ws")]
public partial class doPublishReponse
{

    private string responseStausField;

    private doPublishReponseErrorDetails errorDetailsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public string responseStaus
    {
        get
        {
            return this.responseStausField;
        }
        set
        {
            this.responseStausField = value;
        }
    }

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute(Form = System.Xml.Schema.XmlSchemaForm.Unqualified)]
    public doPublishReponseErrorDetails errorDetails
    {
        get
        {
            return this.errorDetailsField;
        }
        set
        {
            this.errorDetailsField = value;
        }
    }
} 
```

我试过添加：

```
[System.Xml.Serialization.XmlRoot("doPublish", Namespace = "http://usdoj.gov/leisp/lexs/publishdiscover/3.1", IsNullable = true)] 
```

在班级的顶端，我也试图反序列化，但没有运气。我还尝试将 XmlSerializer 对象更改为：

```
XmlRootAttribute xRoot = new XmlRootAttribute();
xRoot.ElementName = "doPublish";
xRoot.Namespace = "http://usdoj.gov/leisp/lexs/publishdiscover/3.1";
xRoot.IsNullable = true;
XmlSerializer xs = new XmlSerializer(typeof(PublishMessageType), xRoot); 
```

这会起作用，但是反序列化对象中的每种类型都会返回 null，即使它们都填充在 xml 文档中。

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T17:22:16.210

我将您的 xml 放入文件“test.xml”，然后运行 ​​xsd test.xml。这导致了“test.xsd”和“test_app1.xsd”。我将 test_app1.xsd 中的模式元素添加到 test.xsd，然后运行 ​​xsd.test.xsd /classes。

这导致：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://usdoj.gov/leisp/lexs/3.1")]
[System.Xml.Serialization.XmlRootAttribute(Namespace="http://usdoj.gov/leisp/lexs/3.1", IsNullable=false)]
public partial class PublishMessageContainer {

    private PublishMessageContainerPublishMessage[] publishMessageField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("PublishMessage")]
    public PublishMessageContainerPublishMessage[] PublishMessage {
        get {
            return this.publishMessageField;
        }
        set {
            this.publishMessageField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://usdoj.gov/leisp/lexs/3.1")]
public partial class PublishMessageContainerPublishMessage {

    private string pDMessageMetadataField;

    /// <remarks/>
    public string PDMessageMetadata {
        get {
            return this.pDMessageMetadataField;
        }
        set {
            this.pDMessageMetadataField = value;
        }
    }
}

/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("xsd", "4.0.30319.1")]
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(AnonymousType=true, Namespace="http://usdoj.gov/leisp/lexs/3.1")]
[System.Xml.Serialization.XmlRootAttribute(Namespace="http://usdoj.gov/leisp/lexs/3.1", IsNullable=false)]
public partial class doPublish {

    private PublishMessageContainer[] itemsField;

    /// <remarks/>
    [System.Xml.Serialization.XmlElementAttribute("PublishMessageContainer")]
    public PublishMessageContainer[] Items {
        get {
            return this.itemsField;
        }
        set {
            this.itemsField = value;
        }
    }
} 
```

现在在 LINQPad 中运行以下代码，工作正常。

```
using(var stream = File.Open(@"..path here..\test.xml", FileMode.Open))
{
    XmlRootAttribute xRoot = new XmlRootAttribute();
    xRoot.ElementName = "doPublish";
    xRoot.Namespace = "http://usdoj.gov/leisp/lexs/publishdiscover/3.1";
    xRoot.IsNullable = true;

    var serializer = new XmlSerializer(typeof(doPublish), xRoot);

    var root = (doPublish)serializer.Deserialize(stream);

    root.Dump();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T16:07:45.377

也许命名空间在这两种情况下都需要相同。被拒绝的 XML 最后缺少“/ws”。

# mysql - MYSQL 触发器更新基于其他两个表的表

> ID：10045576
> 
> 赞同：0
> 
> 时间：2012-04-06T15:26:10.723
> 
> 标签：mysql, database, database-design, triggers

我使用来自两个表“store_data”和“hd_data”的数据创建了一个表名“combined_data”。这两个表共享一个公共列，我在创建新表时用来链接数据，即“store_num”。当用户向“store_data”提交信息时，我希望来自该提交的信息（例如 store_num、store_name 等）移动到“combined_data”表中，并从“hd_data”中提取与输入的特定 store_num 相关的信息例如区域，部门等。试图想出结构来做到这一点，我可以填写表名和列名就好了。只是好奇这是否可行，或者是否应该寻求其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:32:59.607

这是保存数据时的常见情况，需要拆分为 2 个或更多不同的存储库。我会创建一个存储过程，并将所有内容传递到事务中，因此如果任何时候出现故障，它将回滚，并且您的表之间将保持一致性。

但是，是的，如果您想保持简单，您也可以使用在 store_data 或 hd_data 上插入数据的触发器来执行此操作。

# c++ - 一种将 C++ 代码划分为 .h 和 .cpp 文件的工具，对程序员来说是透明的

> ID：10045585
> 
> 赞同：0
> 
> 时间：2012-04-06T15:27:09.637
> 
> 标签：c++, ide

C++ 是我学习的第一门语言，因此将源代码划分为 .h 和 .cpp 文件似乎很明显 - 但是在学习了 C# 和 Java 之后，它们现在在我看来非常笨拙。它们可能在 60 年代很有用，甚至可能在 80 年代仍然有用，但在现代工具时代，例如带有部分折叠的 IDE 和文档生成器，它们似乎已经过时了。

无论如何，我的问题是：是否有一种工具可以使这两种文件的存在对程序员透明？例如，让编码人员看似在头文件中写入方法的定义，但实际上将其保存到 .cpp 文件中？

（我知道可以尝试仅在头文件中编写 C++ 程序，但 AFAIK 这不是最佳实践，使程序构建时间更长，并且几乎不可能让两个类相互引用。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T16:19:07.940

我在问题、评论和对另一个答案的评论中看到的讨论似乎集中在组件的文本表示上。从纯文本的角度来看，完全删除标题是有意义的。

另一方面，头文件和 cpp 文件的分离还有第二个层次，即将接口与实现分离，并在这样做时从接口中删除实现细节。

这以不同的方式发生，在最简单的层面上*，您*实现特定功能的方式与组件的用户无关[*]。在许多情况下，您可以在 .cpp 文件中拥有更多类型和函数，这些类型和函数仅用作实现细节。此外，如果您决定直接或通过依赖另一个库来实现特定功能，这是实现的细节，不应泄露给您的用户。

在自动管理文件分离的工具中实现这种分离可能会也可能不会容易，并且不能由那些喜欢使用*仅标头*库的人来完成。

你们中的一些人声称不必*去定义*没有意义，并且希望完全查看代码，我看到的是可以灵活地决定组件的哪些部分是用户不应该知道的*细节。*在许多 IDE（甚至在 vim 中）中，只有一个按键组合可以将您从一个键带到另一个。在 IDE 中，您可以*重构*函数的签名并让 IDE 将更改应用到标头和实现（有时甚至应用到使用）...

如果您要让一个工具提供标头和实现的统一视图，那么让该工具了解您正在编写的代码的哪些部分是接口或实现的一部分以及决策可能会困难得多该工具可能会对生成的程序产生影响。

单独编译模型有其缺点，但也有优点，我觉得这里进行的讨论只是触及更深层次的设计决策的表面。

[*] 似乎有不少人认为每个类都应该有自己的头文件和 .cpp 文件，我不同意，每个头文件代表一个组件，可能是单个类，也可能是多个类和自由函数的分离文件中的代码是*设计*的一部分，并且在单个组件中，您可能有一个或多个公共类型以及可能没有或多个内部类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T16:19:19.480

我不知道有什么可以使源/标头的划分完全透明。

但是，我确实知道一些使它更容易处理的方法。例如，Visual Assist X 将让您将整个类写入头文件，然后选择成员函数，并将它们移动到源文件（即 .cpp 文件）。

这不是完全治愈（无论如何），但无论如何它可以/确实使它们更容易忍受。

就个人而言，我认为完全摆脱文件会很有趣，而是直接使用数据库之类的东西——即，你有一个函数数据库，其中该函数的源代码是一列，目标代码是另一列，内部关于如何使用它的编译器信息还有一个，等等。这也将使集成版本控制变得非常简单（基本上只是一个存储的事务日志）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:35:13.350

一方面，我喜欢 C++ 中的头文件，因为它们可以充当某种“目录”，让您快速了解一个类。当然，这是假设您保持标题简短，并将大多数功能的实现放入 .cpp 中。

此外，您可以获得 Visual Studio 的插件，这些插件会将成员函数的实现从标头移动到 .cpp 中。再加上 Visual Studio 中的“转到定义”和“转到声明”命令，标题对于浏览大型代码库非常有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T17:58:38.180

头文件是当前 C++ 编译模型的基础。我认为如果不将程序员直接暴露于 header/cpp 拆分，有些事情会有点难以表达。例如，在某些情况下，两者之间存在显着差异：

```
// header
class Foo {
    Foo() = default;
} 
```

和

```
// header
class Foo {
    Foo();
};

// cpp
Foo::Foo() = default; 
```

尽管如此，我认为考虑改进编译模型或使其更容易处理是值得的。

例如，我可以想象一个“代码气泡”风格的 IDE，程序员在代码气泡中编写定义，然后将气泡组合成翻译单元。程序员会将定义标记为“已导出”，以使它们可用于其他 TU，并且对于每个 TU，他会选择从​​其他单元导出的项目以进行导入。IDE 一直在维护它自己的程序代码气泡表示，当您构建它时，它会根据需要生成传递给编译器、创建前向声明等所需的实际 cpp 文件。cpp 文件只是一个中间构建产品。

虽然会有像我上面展示的那样的微妙之处，但我不确定我描述的 IDE 将如何处理这个问题。

# android - jquery mobile 和 phonegap 哪个更好

> ID：10045587
> 
> 赞同：-7
> 
> 时间：2012-04-06T15:27:13.280
> 
> 标签：android, jquery-mobile, cordova

大家好，我要做一个安卓游戏。我想知道哪个更适合像我这样的 android 初学者。我知道js。请建议我使用**phonegap**或**jquery mobile**哪个？问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:30:32.563

它们是两个非常不同的东西。Phonegap 是原生与 HTML、CSS 与 JS 之间的桥梁。jQuery mobile 是一个可以在 phonegap 中使用的框架/库。

Phonegap 将使用您的 jQuery 移动应用程序，并允许您像本地应用程序一样运行它，其中仅 jQuery Mobile 将仅在浏览器中在线运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T05:01:32.403

您不能独立使用 Jquery mobile。但是您可以在没有 jquery mobile 的情况下使用 phonegap。

您可以在 phonegap 中使用其他框架，如 sencha touch、Launchair、XUI、手套箱等。这些是您可以在phonegap中开发移动应用程序的开发工具。

# jquery - JQuery 表单向导插件 - Chrome 不隐藏之前的步骤

> ID：10045588
> 
> 赞同：1
> 
> 时间：2012-04-06T15:27:14.037
> 
> 标签：jquery, jquery-ui, google-chrome, formwizard, jquery-form-wizard

我有一个适用于 Firefox 的表单（使用 thecodemine.org 中的 JQuery 插件表单向导）。在 Firefox 中，当您点击“下一步”时，它会隐藏上一步并显示下一步。在 Chrome 中，它不会隐藏上一步。Chrome 不会给出任何 Javascript 错误。

这不是 Chrome 和表单向导的一般问题。这是一个特定于我的实现的。

我为您创建了一个测试表来检查此错误：[http ://www.energyjustice.net/map/test2.html](http://www.energyjustice.net/map/test2.html)

我正在使用 Jquery UI 1.8.7 和表单向导 3.0.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-12T12:21:03.727

确实，加

```
.step {
  display: block;
} 
```

到我的 css 使它在 chrome 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T19:48:05.427

我遇到了同样的问题，每一步都使用。看起来它必须是一个块元素，`style="display:block;"`为我解决了这个问题。

# performance - 如何测量 F# 代码的 CPU 和内存使用情况？

> ID：10045591
> 
> 赞同：8
> 
> 时间：2012-04-06T15:27:26.187
> 
> 标签：performance, f#, measurement

我是 F# 语言的新手，目前我正在对 F# 性能进行简短研究。所以我想做的是对我的 F# 代码进行基准测试。我已经找到了 Stopwatch 类，这很明显，但至于你应该能够测试的其余部分，我没有发现明确的线索。

我想做的是在我运行 F# 代码时找出它的内存和 CPU 使用情况。这里有没有人可以给我一些关于如何做到这一点的建议？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-06T15:39:08.200

对于快速原型设计，fsi 的时序指令提供了很好的指示：

```
#if INTERACTIVE
#time "on"
#endif 
```

它打印出如下内容：

```
Real: 00:00:00.199, CPU: 00:00:00.120, GC gen0: 0, gen1: 0, gen2: 0 
```

除了执行时间之外，其他统计数据还显示了分代 GC 的三个级别收集的垃圾量，这有助于了解程序中的内存使用情况。

对于严格的基准测试，您应该使用提供函数调用计数、计时和内存分配测量等的[Visual Studio 分析器](http://msdn.microsoft.com/en-us/library/ms182371.aspx)，甚至使用第三方内存分析器。[您可以在我的Good F# Performance Profiling Tool](https://stackoverflow.com/questions/7968653/good-f-performance-profiling-tool)回答中找到使用这些分析器的一些提示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T16:06:08.773

您可能还会发现 Dave Thomas（原 Moirae Software）的这篇博文很有帮助：

[https://7sharp9.github.io/2011/12/11/2011-12-11-fixing-a-hole/](https://7sharp9.github.io/2011/12/11/2011-12-11-fixing-a-hole/)

通常我会确定我正在考虑回答问题的博客文章的特定部分，但整个博客文章都是对这个问题的回答。

编辑：更新链接，因为旧链接已损坏。

# java - Java中的自定义事件设计

> ID：10045593
> 
> 赞同：1
> 
> 时间：2012-04-06T15:27:33.817
> 
> 标签：java, events

我需要实现类来支持能够根据事件类型传递不同类型/数量的数据的自定义事件。例如，

使用事件类型 AI 需要传递 2 个字符串名称。使用事件类型 BI 需要传递 3 个字符串名称和一个双精度。

我发现的 2 个设计：

1.  EventObject 的扩展，包含所有可能数据的字段和方法（某些事件类型不需要的字段留空）。

    ```
    // event constructors
    public MyEvent(Object source, int type, String a, String b) {}

    public MyEvent(Object source, int type, String a, String b, String c, double d) {} 
    ```

2.  EventObject 的扩展，包含 EventInfo 对象的参数。EventInfo 是更改信息的基类。触发特定事件的方法将传递 EventInfo 的子类，其中包含必要的更改信息（侦听器需要向下转换）。

    ```
    // event constructors
    public MyEvent(Object source, int type, EventInfo info) {}

    // base class for event info
    public class EventInfo {} 
    ```

有哪些其他设计可以实现这一点？各自的优缺点是什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:31:52.927

一种常见的设计是在您的事件类中包含一个 Map 以保留参数以及显示事件类型的字段。因此，您的事件界面将如下所示：

```
public interface Event [
    public Object getParameter(String key);
    public void setParameter(String key, Object parameter);
    public String getType();
} 
```

在您的事件处理程序类中，您可以使用 getParameter() 和 getType() 来检索事件的参数和事件类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:44:47.993

如果您不介意尝试 Scala，这就是“案例”类的主要用途。您可以将它们定义为：

```
sealed trait SomeEvent
case class YourEvent( a: String, b: String ) extends SomeEvent
case class YourOtherEvent( a: String, b: String, c: String, d: Double  ) extends SomeEvent 
```

然后你可以通过模式匹配在你的“事件处理器”中使用它们：

```
class EventProcessor extends Actor with ActorLogging {

  def receive = {

    case YourEvent( a: String, b: String ) =>

        // handle it    

    case YourOtherEvent( a: String, b: String, c: String, d: Double ) =>

        // handle it    

    case unknown => log.debug( "got an unknown event => " + unknown )
  }
} 
```

不知道你的意思是什么`int type`，但如果那是事件的类型，它可以只是一个类型化的类。

An`Object source`可能类似于`source: ActorRef`，您实际上可以回复它，也不需要作为参数传递（如果使用 Scala/AKKA，它会为您创建并保留该引用）：

```
 case YourEvent( a: String, b: String, c: String, d: Double ) =>

        // handle it
        ...
        //reply to sender (e.g. source)
        sender ! YourReply( ... ) 
```

* * *

上面的示例使用了 AKKA 的一小部分，但它不是必须的，因为案例类的模式匹配是 Scala 的内置功能。

将上述内容视为*看待*您正在解决的问题的另一种方式。

# javascript - 创建 JavaScript 变量

> ID：10045595
> 
> 赞同：0
> 
> 时间：2012-04-06T15:27:40.373
> 
> 标签：javascript, variables

我正在做一个小型网络项目，我对在 JS 中创建变量有点困惑。

该应用程序允许人们使用 JS 库 Raphael 在画布上创建形状。这一切都非常简单，但我想知道的是，假设用户创建了 10 个立方体。我将如何在 javascript 中执行此操作，我的意思是，这些多维数据集中的每一个都需要它们自己的变量名，以便可以引用它们，我将如何让用户在创建对象时创建变量？

我意识到这似乎是一个非常愚蠢的问题，但此刻我的大脑有点疲惫。

感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T15:36:34.777

创建一个数组。

```
var cubes = []; 
```

每次用户创建一个，您可以将其添加到数组中：

```
cubes.push(newCube); 
```

然后，您可以通过以下方式引用给定的多维数据集：

```
cubes[3] 
```

或者，使用循环迭代它们：

```
for (var i = 0; i < cubes.length; i++) {
    // do something with cubes[i]
} 
```

或者，您不必全部存储它们，您可以使用普通的 DOM 操作工具在 DOM 中查找和迭代它们。

# android - 安卓程序设计

> ID：10045597
> 
> 赞同：0
> 
> 时间：2012-04-06T15:27:46.837
> 
> 标签：android, multithreading, service, broadcastreceiver

我对 Android 开发相当陌生，所以我想知道我应该如何设计/构建我想要开发的新程序。我不确定它是否应该作为服务或广播接收器或活动启动（我曾经做过的所有事情）。

我想要做的是在手机上发生某些事件时接收，例如当以下打开蓝牙、wifi、gps 和相机时。当这种情况发生时，会向网络管理员发送一条消息（使用 SNMP）。

现在我希望它在后台持续运行，等待这些事件发生。我是否创建服务并创建接收器以创建接收器，并且当操作发生时创建服务/踏板以对其进行操作/生成 SNMP 消息？

当得到回答时，我还在为在同一组代码中运行接收器和服务时如何构建清单文件而苦苦挣扎。但我想这取决于你如何设计它来运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:42:11.653

您所需要的只是一个广播接收器，它会收到有关列出的事件的通知并启动一个异步发送一些消息的服务器。

# mysql - MySQL 动态列 - column_create 不存在

> ID：10045599
> 
> 赞同：0
> 
> 时间：2012-04-06T15:27:49.607
> 
> 标签：mysql, innodb, mariadb, dynamic-tables

MariaDB 5.3 引入了动态列。据我了解，下一个版本的mysql应该有类似mariadb的功能吗？

我目前正在运行 mysql 5.5.9，我想弄乱每行的动态列。

所以我在 mysql 网站上阅读，以使其正常工作：

innodb_file_format 应设置为梭子鱼。

完毕。

```
--------------
show variables like "%innodb_file%"
--------------

+--------------------------+-----------+
| Variable_name            | Value     |
+--------------------------+-----------+
| innodb_file_format       | Barracuda |
| innodb_file_format_check | ON        |
| innodb_file_format_max   | Barracuda |
| innodb_file_per_table    | ON        |
+--------------------------+-----------+
4 rows in set (0.00 sec) 
```

然后我继续创建我的表进行测试

```
 CREATE TABLE `test` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `dyn` blob,
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8 ROW_FORMAT=DYNAMIC 
```

然后我尝试插入

```
 insert into test(`dyn`) VALUES (COLUMN_CREATE(1, "black", 3, "Linux")) 
```

我收到以下错误：

```
 FUNCTION db.COLUMN_CREATE does not exist 
```

所以我的问题是mysql不提供这些功能吗？我应该切换到 mariadb 进行测试吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:38:12.697

根据[文档](http://dev.mysql.com/doc/innodb/1.1/en/innodb-row-format-dynamic.html)，MySQL 似乎*不*提供此功能。

动态行格式实际上提供了一种不同的方法来存储在某些情况下可能更有效的行，而**不是**一种具有可变表模式的方法：

> 当 innodb_file_format 设置为 Barracuda 并使用 ROW_FORMAT=DYNAMIC 或 ROW_FORMAT=COMPRESSED 创建表时，长列值完全离页存储，并且聚集索引记录仅包含指向溢出页的 20 字节指针。

* * *

如果您需要这种灵活的模式，请查看[实体-属性-值](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)模式。

# java - 如何制作 JButton 的棋盘格

> ID：10045602
> 
> 赞同：5
> 
> 时间：2012-04-06T15:28:10.960
> 
> 标签：java, swing, graphics, jbutton

我需要制作一个由交替的黑色和白色 JButton 组成的棋盘，它们正对着另一个。我可以使用图形类来添加按钮吗？我将不胜感激，因为这是家庭作业。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T15:31:12.717

查看[GridLayout ，您可以在](http://docs.oracle.com/javase/7/docs/api/java/awt/GridLayout.html)[此处](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)找到有关如何使用它的示例。最后，如果你想创建一个棋盘格，我认为使用 JPanels 比使用 JButtons 会给你一个更好的完成，但这完全取决于你。

# sed - sed 语句语法错误？

> ID：10045603
> 
> 赞同：0
> 
> 时间：2012-04-06T15:28:14.777
> 
> 标签：sed

我的 sed 仅在输入文件的最后一个条目为“in”时才有效，如果文件具有“in”或“out”，我将如何使其工作？我尝试了不同的变化，但没有成功。

```
egrep -w 'TCP|UDP' denied.txt | sed 's/:[^:]* in/ in/'
egrep -w 'TCP|UDP' denied.txt | sed 's/:[^:]* in/ in/ out/ out/'
egrep -w 'TCP|UDP' denied.txt | sed 's/:[^:]* in/ in/ || out/ out/' 
```

### 输入文件

```
Apr 6 08:54:23 TCP 212.58.244.58:80 in

Apr 6 09:29:09 TCP 212.58.244.58:443 out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:35:43.703

尝试：

```
egrep -w 'TCP|UDP' denied.txt | sed 's/:[^:]* \(in\|out\)/ \1/' 
```

请参阅[sed 正则表达式](http://www.gnu.org/software/sed/manual/html_node/Regular-Expressions.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T17:14:12.897

这可能对您有用：

```
sed '/\<\(TCP\|UDP\)\>/!d;s/:[^:]*\(in\|out\)/ \1/' denied.txt
Apr 6 08:54:23 TCP 212.58.244.58 in
Apr 6 09:29:09 TCP 212.58.244.58 out 
```

或者更简单地说：

```
sed '/\<\(TCP\|UDP\)\>/!d;s/:[^ ]*//2' denied.txt
Apr 6 08:54:23 TCP 212.58.244.58 in
Apr 6 09:29:09 TCP 212.58.244.58 out 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:49:54.260

你有3个例子：

1.  `egrep -w 'TCP|UDP' denied.txt | sed 's/:[^:]* in/ in/'`

    这应该适用于结尾的行`in`。

2.  `egrep -w 'TCP|UDP' denied.txt | sed 's/:[^:]* in/ in/ out/ out/'`

    这将失败并出现来自`sed`. 第一部分是一个有效的`s///`命令，直到第二个之后的斜线`in`；其余的应该是一个新命令，例如：

    ```
    egrep -w 'TCP|UDP' denied.txt | sed 's/:[^:]* in/ in/; s/:[^:]* out/ out/' 
    ```

    这应该适用于任何版本`in`的.`out``sed`

3.  `egrep -w 'TCP|UDP' denied.txt | sed 's/:[^:]* in/ in/ || out/ out/'`

    与之前的诊断一样，第一个之后的材料`s///`根本无效`sed`。

标准[`sed`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/sed.html)使用正则表达式的中等功率版本，但它不是完整的 ERE（扩展正则表达式）。特别是，它不支持交替（或'd 替代）。

一些现代版本`sed`（尤其是 GNU `sed`）支持 ERE 甚至 PCRE（Perl 兼容的正则表达式）。

```
egrep -w 'TCP|UDP' denied.txt | sed -r 's/:[^:]* (in|out)/ \1/' 
```

如果做不到这一点，要使用单个替代品处理“输入”和“输出”，您可以使用：

```
egrep -w 'TCP|UDP' denied.txt | sed 's/:[^:]* \([io][nu]t\{0,1\}\)/ \1/' 
```

当然，这将映射`on`and`iut`等等`int`以及`in`and `out`; 您的问题是“您的数据中是否会出现这种奇怪现象”？如果是这样，那么这两个显式`s///`命令更好。

最后，所有的正则表达式都可能受益于or`$`之后，以确保替换只发生在行尾。`in``out`

# javascript - 以循环方式移动图片

> ID：10045604
> 
> 赞同：0
> 
> 时间：2012-04-06T15:28:24.997
> 
> 标签：javascript

我有以下代码用于围绕圆形方式移动 4 张图片，但它只能旋转其中两个

```
<html>
<head>
<title>Moving div</title>
</head>
<body>
<div id = "listDiv">
    <img id="img1" width="200" height="200" /><br />
    <span id="quote1" ></span>
</div>
<div id="listDiv1">
<img id="img2"  width="200" height="200"/><br/>
<span id="quote2 "></span>
</div>
<div id="listDiv2">
<img id="img3" width="200" height="200"/><br/>
<span id="quote3 "></span>
</div>
<div id="listDiv3">
<img id="img4" width="200" height="200"/><br/>
<span id="quote4 "></span>
</div>

<script>

var listDiv = document.getElementById("listDiv");

var lisDiv1=document.getElementById("listDiv1");
var listDiv2=document.getElementById("listDiv2");
var listDiv3=document.getElementById("listDiv3");
var quote1 = document.getElementById("quote1");
var quote2 = document.getElementById("quote2");
var quote3 = document.getElementById("quote3");
var quote4 = document.getElementById("quote4");
var img1 = document.getElementById("img1");
var img2 = document.getElementById("img2");
var img3 = document.getElementById("img3");
var img4 = document.getElementById("img4");
listDiv.style.backgroundColor = "lightBlue";

listDiv.style.position = "absolute";
listDiv1.style.position = "absolute";
listDiv2.style.position = "absolute";
listDiv3.style.position = "absolute";

var intervalHandle = setInterval(changeSecond, 10);

var counter=0;

var pics = [
"http://www.dyslexiaassociation.ca/gallery/famous/AlbertEinstein.jpg",
"http://www.historyking.com/images/Black-Famous-People.jpg",
"http://www.historyking.com/images/Famous-People-From-Washington.jpg",
"http://baobongdaso24h.com/wp-content/uploads/2011/10/Steve-Jobs-chet1.jpg",
"http://www.stgabss.net/SpecialNeeds/images/stories/famous/john_lennon_portrait.jpg",
"http://imgs.inkfrog.com/pix/just4kids2/President-George-W-Bush_mprtp.jpg",
"http://www.smilorama.com/img/people/rare_photos_of_famous_people/rare_photos_of_famous_people04.jpg"
]; 

var quotes = [
'E=mc<sup style="font-size:xx-small">2</sup>',
"I have a dream",
"Be nice to nerds.<br/>Chances are you'll<br/>end up working for one",
"You are holding it wrong",
"Imagine all the people",
"I know the human being<br/>and fish can coexist peacefully.",
"The name is Bond, James Bond"
];

function changeSecond(){
  if (counter++%2==0){
    if (counter>700){
      counter=0;
    }
    //change the text every 101 counts
    if (counter%101==0){
      var randomIndex = Math.floor(Math.random()*pics.length);
      img1.setAttribute("src", pics[randomIndex]);
      quote1.innerHTML=quotes[randomIndex];
       img2.setAttribute("src", pics[randomIndex]);
      quote2.innerHTML=quotes[randomIndex];
       img3.setAttribute("src", pics[randomIndex]);
      quote3.innerHTML=quotes[randomIndex];
       img4.setAttribute("src", pics[randomIndex]);
      quote4.innerHTML=quotes[randomIndex];
    }
    //move the element to the left:
    listDiv.style.left =400+200*Math.cos(counter/90)+"px"; 
    //move the element down:
    listDiv.style.top =400+200*Math.sin(counter/90)+"px"; 
      listDiv1.style.left =400 + 300* Math.cos(counter/90)+"px";
      listDiv1.style.top =400 + 200 * Math.cos(counter/90)+"px";
      listDiv2.style.left =400 + 200 * Math.cos(counter/90)+"px";
      listDiv2.style.top =400 + 200 * Math.cos(counter/90)+"px";
      listDiv3.style.left =400 + 200 * Math.cos(counter/90)+"px";
      listDiv3.style.top =400 + 2width="200" height="200"00 * Math.cos(counter/90)+"px";
  }
}

</script>
</body>
</html> 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:39:45.213

有一些简单的错误会阻止所有 4 个显示。

一个是您在跨度 id 中有一些用于引号的空格，这会导致错误：

```
<span id="quote2 "></span>
<span id="quote3 "></span>
<span id="quote4 "></span> 
```

删除空格是必要的，它清除了生成的错误。然后这里有一个错字或复制过去的错误：

```
 listDiv3.style.top =400 + 2width="200" height="200"00 * Math.cos(counter/90)+"px"; 
```

那个 width= 和 height= 位可能是在发布等时出现的粘贴错误，但需要排除。

所以有 3 个很好地同时出现，所以看起来你有 4 个，但有两个被他们的朋友覆盖。

尝试改变每个的起点，像这样（我让左边有 200、300、400、500 作为计算的一部分）：

```
listDiv.style.left =400+200*Math.cos(counter/90)+"px"; 
listDiv.style.top =400+200*Math.sin(counter/90)+"px"; 

listDiv1.style.left =400 + 300 * Math.cos(counter/90)+"px";
listDiv1.style.top =400 + 200 * Math.cos(counter/90)+"px";

listDiv2.style.left =400 + 400 * Math.cos(counter/90)+"px";
listDiv2.style.top =400 + 200 * Math.cos(counter/90)+"px";

listDiv3.style.left =400 + 500 * Math.cos(counter/90)+"px";
listDiv3.style.top =400 + 200 * Math.cos(counter/90)+"px"; 
```

这不是很好看，但它让它们被发现，你可以玩它并更好地安排它们。

希望对一些人有所帮助

# c# - 更新sql表的最快方法是什么？

> ID：10045610
> 
> 赞同：-1
> 
> 时间：2012-04-06T15:28:53.743
> 
> 标签：c#, sql

我有一个 C# 应用程序，它允许用户更新数据库中的某些列。我的问题是我在数据库中有 300.000 条记录，仅更新 50.000 条记录需要 30 分钟。我可以做些什么来加快速度吗？

我的更新查询如下所示：

```
UPDATE SET UM = 'UM', Code = 'Code' WHERE Material = 'MaterialCode'. 
```

我唯一的独特约束是材料。我读取用户选择的文件，并将数据放入数据表中，然后逐行进行，并更新数据库中的相应材料

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:46:43.760

限制数据库中的索引数量，特别是如果您的应用程序更新数据非常频繁。这是因为每个索引都占用磁盘空间，并且增加、删除和更新行的速度很慢，您应该在分析使用情况后才创建新索引数据、执行查询的类型和频率，以及您的查询将如何使用新索引。

在许多情况下，创建新索引的速度优势超过了使用额外空间和缓慢修改行的劣势。但是，避免使用冗余索引，仅在必要时创建它们。对于只读表，可以增加索引数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:51:59.827

1.  如果更新频繁，请在表上使用非聚集索引。

2.  如果更新/插入不频繁，请在表上使用聚集索引。

3.  C# 代码可能没有问题，你的更新语句很重要。update 语句的 where 子句是需要注意的地方。您需要在 where 子句中有一些索引列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T23:44:51.420

另一件事，是字段材料，索引吗？此外，where 子句是否需要位于具有 varchar 值的字段上？它不能是一个整数值字段吗？

如果您过滤具有整数而不是字符串的字段，性能会更好。不确定这是否适合您。

# sql - Oracle PL/SQL 触发器更新另一列

> ID：10045611
> 
> 赞同：0
> 
> 时间：2012-04-06T15:28:59.877
> 
> 标签：sql, oracle, triggers

我正在尝试创建一个使用 PL/SQL 更新另一个表的触发器，但我遇到了一些问题。（我已阅读[此](https://stackoverflow.com/questions/4588180/sql-trigger-to-update-another-table)内容，但没有多大帮助）。

这是我的情况，我可以说两张桌子：

**客户**表

> **CustomerID**号 主键，**ItemsDelivered**号

**项目**表

> **CustomerID**编号、**ItemID**编号、**ItemDelivered** Varchar(15)

假设当有人下订单时，我们在 Items 表中有一条新记录，如下所示：

```
| CustomerID | ItemID | ItemDelivered | 
|         1  |    1   |    False      | 
```

我想要一个触发器，只要有人将 ItemDelivered 列更新为“True”，就会引发 ItemsDelivered 计数器。

```
create or replace Trigger UpdateDelivered  
   After Update On Items For
     Each Row 
Declare  
   Counter Customers.ItemsDelivered%Type; 
Begin
  If (:Old.ItemDelivered ='False' And :New.ItemDelivered='True') Then
     Select ItemsDelivered into Counter From Customers where CustomerdID =:New.CustomerID; 
     Update....
  end if; 
END; 
```

这是我的问题，如果仅更新 ItemDelivered 列，则没有 New.CustomerID！

有什么方法可以获取刚刚更新的行的 CustomerID？（我试图加入插入的虚拟表，但我收到表不存在的错误）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T17:19:24.480

在 上的行级触发器中`UPDATE`，两者`:new.customerID`和`:old.customerID`都应该被定义。除非您更新`CustomerID`，否则两者将具有相同的值。鉴于此，听起来你想要

```
create or replace Trigger UpdateDelivered  
   After Update On Items For
     Each Row 
Begin
  If (:Old.ItemDelivered ='False' And :New.ItemDelivered='True') Then
     Update Customers
        set itemsDelivered = itemsDelivered + 1
      where customerID = :new.customerID;
  end if; 
END; 
```

然而，话虽如此，存储这种计数器并使用触发器维护它通常是设计数据模型的一种有问题的方式。它违反了基本规范化，并可能导致各种竞争条件。例如，如果您按照最初显示的方式对触发器进行编码`SELECT`以获取原始计数然后进行更新，那么您将在多用户环境中引入错误，因为其他人也可能正在处理将项目标记为已交付，并且任何事务都不会看到其他会话的更改，并且您的计数器将设置为错误的值。即使你实现了无错误的代码，你也必须引入一种序列化机制（在这种情况下，`CUSTOMERS`表上的行级锁由`UPDATE`) 导致不同的会话必须相互等待——这将限制应用程序的可伸缩性和性能。

证明 the`:old.customerID`和 the`:new.customerID`都将被定义并且都相等

```
SQL> desc items
 Name                                      Null?    Type
 ----------------------------------------- -------- ----------------------------
 CUSTOMERID                                         NUMBER
 ITEMID                                             NUMBER
 ITEMDELIVERED                                      VARCHAR2(10)

SQL> ed
Wrote file afiedt.buf

  1  create or replace
  2  trigger updateDelivered
  3    after update on items
  4    for each row
  5  begin
  6    if( :old.itemDelivered = 'False' and :new.itemDelivered = 'True' )
  7    then
  8      dbms_output.put_line( 'New CustoerID = ' || :new.customerID );
  9      dbms_output.put_line( 'Old CustomerID = ' || :old.customerID );
 10    end if;
 11* end;
SQL> /

Trigger created.

SQL> select * from items;

CUSTOMERID     ITEMID ITEMDELIVE
---------- ---------- ----------
         1          1 False

SQL> update items
  2     set itemDelivered = 'True'
  3   where customerID = 1;
New CustoerID = 1
Old CustomerID = 1

1 row updated. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-07T01:01:04.693

如果您想将项目计数存储在数据库中，我会推荐一对触发器。您将使用后行触发器来记录项目编号（可能在包裹中的表变量中）和后语句触发器，该触发器将实际更新计数器，计算直接从基准日期交付的项目。也就是说，由

```
select sum(itemsDelivered) from Customers where itemId = :itemId; 
```

这样，您就避免了损坏计数器的危险，因为您总是将其设置为应有的值。将派生数据保存在单独的表中可能是一个好主意。

我们将旧系统完全建立在数据库触发器上，这些触发器更新了单独的“派生”表中的数据，并且运行良好。它的优点是我们所有的数据操作都可以通过插入、更新和删除数据库表来执行，而无需了解业务规则。例如，要让一个学生进入一个班级，您只需在注册表中插入一行；在你的选择声明之后，学费、杂费、经济援助和其他一切都已经计算过了。

# jquery - 仅需要 DOM 遍历、$.ajax 和 Deferred 时的 jQuery 替代方案

> ID：10045613
> 
> 赞同：7
> 
> 时间：2012-04-06T15:29:07.647
> 
> 标签：jquery, ajax, javascript, dom-traversal

**编辑（2012-04-12）：**由于提出了这个问题，[现在可以（从 jQuery 1.8 开始）制作 jQuery 的自定义构建](https://github.com/jquery/jquery#modules-new-in-18)。

* * *

对于我从事的大多数 JavaScript 项目，我想要一个简单、轻量级的 UI 堆栈。

目前我在我的项目中使用 jQuery，但是当我真正退后一步查看代码时，我只是将它用于：

*   [DOM 遍历](http://api.jquery.com/category/traversing/)
*   [jQuery.ajax](http://api.jquery.com/jQuery.ajax/)
*   和[延期](http://api.jquery.com/category/deferred-object/)

**是否有另一个库（我不想自己处理所有各种跨浏览器和 ES3/ES5 差异）可以为我提供这些功能而无需我个人不需要的所有附加内容？**

Dojo 浮现在脑海中，但到目前为止我还没有这方面的经验，理想情况下希望听到那些在这方面使用过多个库的人的意见。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T16:33:15.690

看看[http://microjs.com/](http://microjs.com/)并使用你只需要的东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T15:51:13.633

在最小化的形式中，Dojo 是 136kb，jQuery 是 96kb。转向道场并没有朝着正确的方向前进。

你应该考虑的问题是：

1.  图书馆是否适合您的目的
2.  图书馆规模
3.  它已经被预缓存的可能性
4.  您对库功能的熟悉程度
5.  流行的公共 CDN 上的可用性
6.  网络上的良好支持和出色的文档
7.  在可靠性、跨浏览器支持和定期更新方面享有盛誉

仔细阅读其中的每一个，除非你找到另一个在这些方面得分很高的库，否则 jQuery 可能是你最好的选择。它为您提供的功能非常紧凑，并且实际上并没有很多您想要的东西列表中没有的东西。jQuery 在保持核心库专注于其核心任务方面做得非常好，让 UI 内容进入 jQueryUI，而其他大部分内容都进入他们自己的插件库。

如果您痴迷于优化您包含的代码以仅成为您需要的东西，那么您可能需要查看 YUI。它被设计成模块化的，因此您可以只指定您想要的模块，然后您可以预构建一个只有这些模块的代码块（或者您可以动态加载您想要的模块）。我的感觉是 YUI 在这方面有些过度设计，并且用于快速项目很麻烦，因为您必须花时间找出您需要哪些模块并每次生成该构建。一旦你加载了一堆模块，它也不是那么紧凑，这就是你发现 jQuery 在它所包含的内容方面出奇地紧凑的地方。

通常，您不必担心库中包含的您未使用的内容。只需查看满足您需求的库的整体规模和适用性。你可能会找到一个只做你想要的并且比 jQuery 更大并且没有被广泛缓存的库，所以这不会是一个胜利。

有一些紧凑的库仅适用于 ajax 或只是 deferred，但您可能想要一个将 ajax 和 deferred 一起实现的库，这样您就可以将 deferred 与 ajax 一起使用（就像 jQuery 所做的那样）。进行大量 DOM 操作的库往往不止于此，因为它们更多地被设计为您的核心库，并且大多数人除了 DOM 操作之外还有其他需求。

最后，我建议你不要关心你的图书馆里有什么你不需要的东西。只需评估它与替代方案的整体适用性。

# java - 有效地从java中的大量数组中删除重复的字符串？

> ID：10045617
> 
> 赞同：5
> 
> 时间：2012-04-06T15:29:24.300
> 
> 标签：java

我正在考虑从（未排序的）字符串数组中删除重复项的最佳方法 - 该数组包含数百万或数百万个 stringz ..该数组**已**预先填充，因此优化目标仅在于删除重复而不是防止重复从最初填充！！

我正在考虑进行排序然后进行二进制搜索以获得对数（n）搜索而不是n（线性）搜索。这会给我 nlogn + n 个搜索，其中 althout 比未排序的 (n^2) 搜索更好 = 但这似乎仍然很慢。（也在考虑散列，但不确定吞吐量）

请帮忙！由于涉及数百万个字符串而不使用 Collections API，因此正在寻找一种既能解决速度又能解决内存问题的有效解决方案！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T15:31:59.247

直到你的最后一句话，答案对我来说似乎很明显：如果你需要保持顺序，请使用 a`HashSet<String>`或 a ：`LinkedHashSet<String>`

```
HashSet<String> distinctStrings = new HashSet<String>(Arrays.asList(array)); 
```

如果您不能使用集合 API，请考虑构建您自己的哈希集……但在您给出不想使用集合 API 的*原因*之前，很难给出更具体的答案，因为原因也可以排除其他答案。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-06T16:18:39.777

**分析**

让我们进行一些分析：

1.  使用哈希集。时间复杂度 - O(n)。空间复杂度 O(n)。请注意，它需要大约 8 * 数组大小字节（8-16 字节 - 对新对象的引用）。

2.  快速排序。时间 - O(n*log n)。空间 O(log n)（最坏情况分别为 O(n*n) 和 O(n)）。

3.  合并排序（二叉树/TreeSet）。时间 - O(n * log n)。空间 O(n)

4.  堆排序。时间 O(n * log n)。空间 O(1)。（但它比 2 和 3 慢）。

在堆排序的情况下，您可以即时删除重复项，因此您将在排序后保存最后一次通过。

**结论**

1.  如果您关心时间，并且您不介意为 HashSet 分配 8 * array.length 字节 - 此解决方案似乎是最佳的。

2.  如果空间是一个问题 - 然后快速排序 + 一次通过。

3.  如果空间是一个大问题 - 实现一个堆，并在飞行中丢弃重复项。它仍然是 O(n * log n) 但没有额外的空间。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T15:42:28.970

我建议您在数组上使用修改后的合并排序。在合并步骤中，添加逻辑以删除重复值。此解决方案具有 n*log(n) 复杂性，并且可以在需要时就地执行（在这种情况下，就地实现比普通合并排序更难，因为相邻部分可能包含来自已删除重复项的间隙，这也需要合并时关闭）。

有关合并排序的更多信息，请参阅[http://en.wikipedia.org/wiki/Merge_sort](http://en.wikipedia.org/wiki/Merge_sort)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-06T23:13:09.600

创建一个哈希集来处理这个任务太昂贵了。显然，事实上他们告诉你不要使用 Collections API 的全部意义在于他们不想听到哈希这个词。所以剩下的代码如下。

请注意，您在对数组进行排序后向他们提供了二进制搜索：这没有任何意义，这可能是您的提案被拒绝的原因。

选项1：

```
public static void removeDuplicates(String[] input){
    Arrays.sort(input);//Use mergesort/quicksort here: n log n
    for(int i=1; i<input.length; i++){
        if(input[i-1] == input[i])
            input[i-1]=null;
    }       
} 
```

选项 2：

```
public static String[] removeDuplicates(String[] input){
    Arrays.sort(input);//Use mergesort here: n log n
    int size = 1;
    for(int i=1; i<input.length; i++){
        if(input[i-1] != input[i])
            size++;
    }
    System.out.println(size);
    String output[] = new String[size];
    output[0]=input[0];
    int n=1;
    for(int i=1;i<input.length;i++)
        if(input[i-1]!=input[i])
            output[n++]=input[i];
    //final step: either return output or copy output into input; 
    //here I just return output
    return output;
} 
```

选项 3：（由 949300 添加，基于选项 1）。请注意，这会**破坏输入数组**，如果这是不可接受的，则必须进行复制。

```
public static String[] removeDuplicates(String[] input){
    Arrays.sort(input);//Use mergesort/quicksort here: n log n
    int outputLength = 0;
    for(int i=1; i<input.length; i++){
        // I think equals is safer, but are nulls allowed in the input???
        if(input[i-1].equals(input[i]))
            input[i-1]=null;
        else
           outputLength++;
    }  

    // check if there were zero duplicates
    if (outputLength == input.length)
       return input;

    String[] output = new String[outputLength];
    int idx = 0;
    for ( int i=1; i<input.length; i++) 
       if (input[i] != null)
          output[idx++] = input[i]; 

    return output;   
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T15:34:37.717

嗨，您需要将它们放入数组中。使用像集合这样的哈希值的集合会更快。这里每个值都是唯一的，因为它的哈希值。

如果将所有条目都放入一个集合类型。您可以使用

```
 HashSet(int initialCapacity) 
```

构造函数来防止运行时内存扩展。

```
 Set<T> mySet = new HashSet<T>(Arrays.asList(someArray)) 
```

如果不必扩展内存，则 Arrays.asList() 的运行时间为 O(n)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-07T00:01:15.073

好吧，如果他们想要超快的速度，让我们尽可能地使用字符串的哈希码。

1.  遍历数组，获取每个字符串的哈希码，并将其添加到您喜欢的数据结构中。由于不允许使用 Collection，因此请使用 BitSet。请注意，您需要两个，一个用于正面，一个用于负面，它们每个都很大。

2.  使用另一个 BitSet 再次循环遍历数组。True 表示字符串通过。如果 Bitset 中不存在 String 的哈希码，您可以将其标记为 true。否则，将其标记为可能重复，为假。当你在做的时候，计算有多少可能的重复。

3.  将所有可能的重复项收集到一个名为 possibleDuplicates 的大字符串 [] 中。解决。

4.  现在遍历原始数组中的可能重复项和可能的重复项中的二进制搜索。如果存在，那么您仍然被卡住，因为您想将它包含一次但不是所有其他时间。所以你在某个地方还需要另一个数组。凌乱，我得去吃晚饭了，但这是一个开始......

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T16:11:42.813

由于这是一个面试问题，我认为他们希望您提出自己的实现而不是使用 set api。

您可以构建一棵二叉树并创建一个空数组来存储结果，而不是先对其进行排序并再次比较。

数组中的第一个元素将是根。

1.  如果下一个元素等于节点，则返回。-> 这将删除重复的元素

2.  如果下一个元素小于节点，则将其与左侧进行比较，否则将其与右侧进行比较。

继续执行上述 2 个步骤，直到到达树的末尾，然后您可以创建一个新节点并知道它还没有重复。将此新节点值插入到数组中。

在遍历原始数组的所有元素后，您会得到一个数组的新副本，并且在原始顺序中没有重复。

遍历需要 O(n) 并且搜索二叉树需要 O(logn) （插入应该只需要 O(1) 因为你只是附加它而不是重新分配/平衡树）所以总数应该是 O(nlogn) .

# c# - 显式加载相关实体时应用过滤器

> ID：10045618
> 
> 赞同：0
> 
> 时间：2012-04-06T15:29:41.290
> 
> 标签：c#, entity-framework, entity-framework-4, load, filtering

我试图这样做是指[MSDN 文章](http://msdn.microsoft.com/en-us/library/gg715120%28v=vs.103%29.aspx)。

我试过这个：

```
dbContext.Entry(entry) _
    .Collection(Function(c) c.relObjects) _
    .Query() _
    .Where(Function(c) c.MyCondition) _
    .Load() 
```

但它不编译，说 Load() 不是 IQueryable 的成员

我看到它针对的是 EF5。有没有办法让它在 EF4 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-02T02:00:20.677

我知道这是一篇旧文章，但请确保您导入了`System.Data.Entity`命名空间：

```
Imports System.Data.Entity 
```

该`.Load`方法实际上是该命名空间中的扩展方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:34:34.220

Where 条件返回一个 IQueryable 对象。您应该在收集相关对象后使用**Load ：**

```
dbContext.Entry(entry).Collection(Function(c) c.relObjects).Load() 
```

[来自 msdn](http://msdn.microsoft.com/en-us/library/gg715120%28v=vs.103%29.aspx)：*即使禁用了延迟加载，仍然可以通过在相关实体的条目上使用对 Load 方法的显式调用来延迟加载相关实体。例如*：

```
// Load the department related to a given course using a string      
context.Entry(course).Reference("Department").Load();      
// Load the courses related to a given department 
context.Entry(department).Collection(Function(c) c.Courses).Load(); 
```

# ember.js - 控制器策略/垃圾收集（销毁）

> ID：10045619
> 
> 赞同：3
> 
> 时间：2012-04-06T15:30:03.897
> 
> 标签：ember.js

试图为我的应用找出关于 MVC 的“ember 最佳实践”。也供参考，我正在使用 ember-data、ember-layout 和 ember-route-manager。

我将以用户为例：

我想做的是从数据库中获取用户模型...然后将其包装在 UserController 中，并将模型设置为“内容”属性...然后在视图中，我想绑定到某些功能的控制器，以及模型**级**数据的**控制器内容。**所以控制器可能看起来像：

```
App.UserViewController = Em.Object.create({   
    content: userRecord,
    isFollowingBinding : 'content.you_follow', 
    toggleFollow: function() { 
       make server call to change following flag 
    }
}); 
```

然后视图可以绑定到**{{controller.content.name}}**或**{{#if controller.isFollowing}}**或**{{action "toggleFollowing" target="controller"}}**

但是假设我从数据库中获取了用户模型的列表...我觉得*应该*发生的是每个模型都应该用控制器包装，并且*应该*作为列表返回...所以视图会有一个用户控制器列表

顺便说一句，我已经这样做了......而且它工作得很好......除了每次我重新加载列表时，我都会用新的控制器包装所有新模型对象......随着时间的推移，控制器的数量内存越来越大。在我的基本 Controller 类上，我正在记录对“destroy”的调用，但我没有看到它发生过

当谈到 Em.View... 我知道每次从屏幕上删除它时， .destroy() 都会收到调用（我也在记录这些调用）。所以如果我要将我的代码移动到一个视图中，我知道它每次都会被破坏并重新创建......但我不觉得像 toggleFollow() 这样的功能应该在视图中......

所以问题：

*   这是MVC应该如何工作的吗？包装在该模型的控制器中的模型的每个实例？哪里可以为一个屏幕创建很多控制器实例？
*   如果我采用这种方法，那么我负责销毁（）我创建的所有控制器吗？
*   或者我上面描述的功能是否真的适用于视图，并且当它们从屏幕上添加/删除时，Ember 会创建/销毁它们？还允许模板设计者决定他们需要什么功能（如果他们只需要**{{user.name}}**，则无需实例化其他控制器/视图类......但如果他们需要“切换”按钮，那么他们可以将模板的那部分包装在**{{#view App.UserViewController contentBinding="this"}}**中）

我重新写了几次......希望它有意义......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:37:01.953

我不会将每个都包装`user`到自己的控制器中。

相反，我会将用户绑定到一个视图，说`App.UserView`并处理该`toggleFollow`视图上的操作。然后，此操作会将其操作委托给将处理服务器调用的控制器，请参阅[http://jsfiddle.net/pangratz666/hSwEZ/](http://jsfiddle.net/pangratz666/hSwEZ/)

**车把**：

```
<script type="text/x-handlebars" >
    {{#each App.usersController}}
        {{#view App.UserView userBinding="this" controllerBinding="App.usersController"}}            
            {{user.name}}
            {{#if isFollowing}}
                <a {{action "toggleFollowing"}} class="clickable" >stop following</a>
            {{else}}
                <a {{action "toggleFollowing"}} class="clickable" >start following</a>
            {{/if}}
            {{#if user.isSaving}}saving ...{{/if}}
        {{/view}}
    {{/each}}
</script>​ 
```

**JavaScript**：

```
App.usersController = Ember.ArrayProxy.create({
    content: [],

    toggleFollowing: function(user) {
        user.set('isSaving', true);
        Ember.run.later(function() {
            user.toggleProperty('you_follow');
            user.set('isSaving', false);
        }, 1000);
    }
});

App.UserView = Ember.View.extend({
    isFollowingBinding: 'user.you_follow',
    toggleFollowing: function() {
        var user = this.get('user');
        var controller = this.get('controller');
        controller.toggleFollowing(user);
    }
});
​ 
```

# android - Android中的YoutubeService类错误

> ID：10045621
> 
> 赞同：1
> 
> 时间：2012-04-06T15:30:15.833
> 
> 标签：android, api, youtube

我收到了这个错误

> E/AndroidRuntime(475): java.lang.NoClassDefFoundError: com.google.gdata.client.youtube.YouTubeService

当我尝试运行 Youtube 数据 api 时。我几乎包含了所有的 api，而不是额外的 jar 文件，但它仍然给我这个错误！请快速回复如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:35:06.907

如果您已将 ADT 更新为 ADT 17，则无需添加外部 jar 的引用，只需将该 jar 放在名为“ **libs** ”的文件夹中。

# php - CakePHP 外键显示值

> ID：10045623
> 
> 赞同：1
> 
> 时间：2012-04-06T15:30:24.103
> 
> 标签：php, cakephp, foreign-keys

我知道这可能很容易做到，但我想不通。我在谷歌上没有找到一个例子。

我有一个表“状态”和一个表“事件”。'events'.'statuses_id' 连接到 'statuses'.'id'。现在，当我在事件模型上进行 find('all') 时，我仍然会得到我输入数据库的 id。我想显示字段“状态”。“名称”。

有人可以帮助我如何做到这一点吗？我知道我必须以某种方式在模型中声明 fk 连接，但是如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:32:30.870

使用belongs_to 引用（“Event belongsTo Statuses”），cake 会自动为您提供名称和ID

# asp.net - IIS 子应用程序的不同默认文档

> ID：10045625
> 
> 赞同：2
> 
> 时间：2012-04-06T15:30:28.763
> 
> 标签：asp.net, iis, application-pool, default-document

我有一个运行 ASP.NET 站点的 IIS 网站，但它下面运行着多个应用程序（基本上是一个具有单独应用程序池的虚拟目录）。

好吧 - 我需要两个单独的应用程序，它们指向同一个根文件夹目录，但我希望这些应用程序有单独的默认文档。原因是因为这是它在生产中的配置方式，并且在我的开发箱中。

问题是 IIS 不断为我提供两个应用程序的相同默认文档（它们是单独的虚拟路径和单独的应用程序池，只是相同的物理位置）。我怎样才能克服这个问题，或者我不能在 IIS7 中？

我将重新编写整个事情，并且在未来不会这样做......但在那之前我需要修复一些错误并想要一个本地开发环境。帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-17T20:49:03.280

为了实现这一点并保留在我们的站点中实现的设置，我需要在根站点 web.config 中的 System.WebServer 元素周围添加一个位置标记，并在其中指定默认文档，如下所示，其中路径是 VirtualDirectory/Application姓名：

```
<location path="VirtualDirectoryName">
    <system.webServer>
        <defaultDocument>
            <files>
                <clear />
                <add value="Document.asp" />
            </files>
        </defaultDocument>
    </system.webServer>
</location>
<location path="VirtualDirectoryName2">
    <system.webServer>
        <defaultDocument>
            <files>
                <clear />
                <add value="AnotherDocument.asp" />
            </files>
        </defaultDocument>
    </system.webServer>
</location> 
```

# python - 将 no-X11 tkinter 与 python 一起使用（通过 macports 安装）

> ID：10045631
> 
> 赞同：5
> 
> 时间：2012-04-06T15:30:36.883
> 
> 标签：python, macos, tkinter, macports

我已经通过 MacPorts 安装了 Python 2.7 和一些有用的库（如 Python Image Library）。一切都好。

现在，我想使用 Tkinter。问题是该版本使用 X11（我不想使用 X11）。

如果我切换到 Apple 安装的 python（/usr/bin/python 而不是 /opt/local/bin/python），Tkinter 是可以的（不需要 X11）但是当然，我错过了通过 MacPorts 安装的各种库。

我的问题是：“我如何使用 no X11 Tkinter 和通过 MacPorts 安装的 Python 2.7”？

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-25T11:42:27.670

这是一个已知问题，您可以查看此页面以解决它 [https://www.python.org/download/mac/tcltk](https://www.python.org/download/mac/tcltk)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-03T13:20:09.343

tkinter 端口依赖于`tk`，但 tk 端口默认使用 x11 变体。通过安装石英变体来解决。（首先删除 tkinter 和 tk 端口，然后使用下面的命令安装 tk quartz 变体，然后再次安装 tkinter）

`sudo port install tk -x11 +quartz`

*   `-x11`禁用默认的 x11 变体
*   `+quartz`启用石英变体

有关变体的更多信息：[https ://guide.macports.org/#using.variants](https://guide.macports.org/#using.variants)

# ruby - 这是好习惯吗？存储由常量访问的对象...

> ID：10045632
> 
> 赞同：0
> 
> 时间：2012-04-06T15:30:51.990
> 
> 标签：ruby

这是好习惯吗？存储常量访问的对象。有很多方法可以存储对象以供其他类访问以进行处理。除了 * @@class_variables 之外，我最近还开始使用常量来存储指向集合的哈希对象。如果有的话，这会有什么优点/缺点？对 OOP 来说并不是真正的新事物，但任何对不好的做法的见解都会受到赞赏。

```
 #!/usr/bin/env ruby 
  OUTSIDE_STATE = true

  NAMES = {:objects => []}

  module CheckSelf
    module ClassMethods
      def self.inherited(child)
        ::NAMES[:objects] << child
      end

      def select_and_make_calls
        _selected = NAMES[:objects].select {|child|
            child.purpose() 
          }.each {|child|
          # _child = child.new(child)
          child.new(child).call_out
        }
      end    
    end

    module InstanceMethods
      def call_out
        puts "FIRING OFF THE CALLS #{self.class}"
      end
    end

    def self.included(receiver)
      receiver.extend         ClassMethods
      receiver.send :include, InstanceMethods
    end
  end

  class Parent

    def initialize(name)
      @name = name
    end  

    include CheckSelf

    # The inherited class must be defined in the * 
    # Body of the class.
    def self.inherited(child)
      NAMES[:objects] << child
    end

  end

  class ObjectOne < Parent

  def self.purpose
      OUTSIDE_STATE
    end
  end

  class ObjectTwo < Parent
    def self.purpose
      true
    end

  end

  Parent.select_and_make_calls 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:02:20.800

我建议不要使用常量来存储变化的数据。使用常量不仅告诉解释器你的数据不会改变，它还告诉其他阅读你代码的程序员。如果您需要在某个地方随时间存储数据，请使用 a`@@class_variable`和`@instance_variable`或 a`$global`代替。

这与其说是一个 OOP 约定，不如说是一个 ruby​​ 约定。

# c# - Varchar 到 Varbinary 不允许

> ID：10045634
> 
> 赞同：0
> 
> 时间：2012-04-06T15:30:57.650
> 
> 标签：c#, sql-server-2008

将值插入数据库时​​出错 (SQL Server 2008)

> 不允许从数据类型 varchar 到 varbinary 的隐式转换。使用 CONVERT 函数运行此查询。

代码：

```
da.InsertCommand = new SqlCommand("insert into tblProductMaster ([Name],[Type],[Height],[Width],[Length],[Price]) values( @Name , @Type , @Height , @Width , @Length , @Price )", con);

da.InsertCommand.Parameters.Add("@Name", SqlDbType.VarChar).Value = txtName.Text;
da.InsertCommand.Parameters.Add("@Type", SqlDbType.VarChar, 10).Value = Convert.ToString(ddlType.SelectedItem);
da.InsertCommand.Parameters.Add("@Height", SqlDbType.Float).Value = float.Parse(txtHeight.Text);
da.InsertCommand.Parameters.Add("@Width", SqlDbType.Float).Value = float.Parse(txtWidth.Text);
da.InsertCommand.Parameters.Add("@Length", SqlDbType.Float).Value = float.Parse(txtLength.Text);
da.InsertCommand.Parameters.Add("@Price", SqlDbType.SmallMoney).Value = int.Parse(txtPrice.Text);

da.InsertCommand.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:33:30.307

我想你表中的 Name 或 Type 列是 varbinary 类型的，你正试图将它们设置为 varchar

# security - DMZ 之间的 WebService 安全 - 受保护的网络

> ID：10045640
> 
> 赞同：1
> 
> 时间：2012-04-06T15:31:18.340
> 
> 标签：security, authentication, asmx

我有一个调用 ASMX Web 服务的自定义桌面应用程序。该服务托管在 IIS 中虚拟目录中的 SharePoint 站点下。使用的身份验证是 Windows 集成的。

现在，我想在 DMZ 中的主机上使用相同的应用程序。我将 ISA 服务器配置为允许从 DMZ 到我们受保护网络中的服务器的 HTTP 访问。

尝试测试应用程序时遇到一些错误，例如：“客户端找到响应内容类型 text/html 但预期为 text/xml”。我猜这个错误来自身份验证失败，因为同一个应用程序在保护模式下工作正常。

关于身份验证，我有哪些选择？我应该允许匿名吗？

谢谢，迪米特里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T13:55:48.193

我终于找到了解决方案！我必须向所有将在 Active Directory WFE 的计算机帐户下访问 Web 服务“允许验证”权限的 DMZ 域用户提供

# c# - 如何将 Safari 与 Selenium 2.0 一起使用？

> ID：10045641
> 
> 赞同：0
> 
> 时间：2012-04-06T15:31:18.987
> 
> 标签：c#, testing, selenium, safari

我想知道如何使用 Safari 和 Selenium 2.0 [Selenium IDE 1.7.2] 使用 C#...有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:37:53.897

不幸的是， **Selenium IDE**仅适用于**Firefox**。要将 Selenium 与 Safari 一起使用，您必须使用 Selenium 编程库之一（Java、C# 等）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-07T01:56:52.393

您还可以查看[Telerik 测试框架](http://www.telerik.com/automated-testing-tools/free-testing-framework.aspx)，这是一个免费的 Web 测试框架，它支持[我们的商业 Test Studio 产品](http://www.telerik.com/automated-testing-tools)。

使用测试框架，您可以编写一个测试并针对 IE、Firefox、Chrome 和 Safari 运行它。您可以使用 C# 或 VB.NET 编写测试。

该框架是免费的；但是，如果您愿意，也可以购买付费支持包。

（披露：我是 Telerik 的测试工作室布道者）

# javascript - 当我单击 Facebook 发送按钮时，不显示 div

> ID：10045642
> 
> 赞同：2
> 
> 时间：2012-04-06T15:31:19.710
> 
> 标签：javascript, html, facebook

出于某种原因，当我单击 Facebook 发送按钮时，该按钮会更改其颜色，就像它被单击（这是正常的），但 div 没有出现。

我在下面给你一个简单的例子。它对我不起作用。

有谁知道我犯了什么错误？非常感谢

我的代码如下：

编辑：我所做的只是复制并粘贴 Facebook 文档告诉我粘贴的内容。

```
<html>
    <body>
        <div id="fb-root"></div>
        <script>
        (function(d, s, id) {
            var js, fjs = d.getElementsByTagName(s)[0];
            if (d.getElementById(id)) return;
            js = d.createElement(s);
            js.id = id;
            js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=276966272386423";
            fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
        </script>
        <div class="fb-send" data-href="http://apple.com"></div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-06T16:06:45.290

好吧，我看到你没有使用 jQuery 或 Dojo，你应该检查那些工具。

无论如何，你能把你正在做的id为“facebook-jssdk”的元素的代码放在`document.getElementById("facebook-jssdk")`我看不到那个元素的存在。使用您放置此脚本的代码将失败。

# android - OGLES 2 原生 Android：eglCreateWindowSurface 参数

> ID：10045651
> 
> 赞同：2
> 
> 时间：2012-04-06T15:31:59.187
> 
> 标签：android, c++, opengl-es, android-ndk, arguments

我有一个有趣的事件，其中一个正在开发中的应用程序在原生 NDK C++ for Android 上使用 OpenGL ES。该程序编译并运行没有问题。但是，如果我决定进行单元测试并调试代码，它会抱怨以下消息：

```
Invalid arguments ' Candidates are: 
    void * eglCreateWindowSurface(void *, void *, unsigned long int, 
                                                         const int *) ' 
```

这与以下代码快照的最后一行有关：

```
 EGLint lFormat, lNumConfigs, lErrorResult;
    EGLConfig lConfig;
    // Defines display requirements. 16bits mode here.
    const EGLint lAttributes[] = {
        EGL_RENDERABLE_TYPE, EGL_OPENGL_ES2_BIT,
        EGL_BLUE_SIZE, 5, EGL_GREEN_SIZE, 6, EGL_RED_SIZE, 5,
        EGL_SURFACE_TYPE, EGL_WINDOW_BIT, EGL_RENDER_BUFFER, EGL_BACK_BUFFER,
        EGL_NONE
    };
    // Retrieves a display connection and initializes it.
    packt_Log_debug("Connecting to the display.");
    mDisplay = eglGetDisplay(EGL_DEFAULT_DISPLAY);
    if (mDisplay == EGL_NO_DISPLAY) goto ERROR;
    if (!eglInitialize(mDisplay, NULL, NULL)) goto ERROR;
    // Selects the first OpenGL configuration found.
    packt_Log_debug("Selecting a display config.");
    if(!eglChooseConfig(mDisplay, lAttributes, &lConfig, 1,
        &lNumConfigs) || (lNumConfigs <= 0)) goto ERROR;
    // Reconfigures the Android window with the EGL format.
    packt_Log_debug("Configuring window format.");
    if (!eglGetConfigAttrib(mDisplay, lConfig,
        EGL_NATIVE_VISUAL_ID, &lFormat)) goto ERROR;
    ANativeWindow_setBuffersGeometry(mApplication->window, 0, 0, lFormat);
    // Creates the display surface.
    packt_Log_debug("Initializing the display.");
    mSurface = eglCreateWindowSurface(mDisplay, lConfig, mApplication->window, NULL); 
```

我已经查看了 OGLES 参考资料，但我尝试过的所有不同的事情都没有奏效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T12:57:46.663

用 'EGLNativeWindowType 窗口' 替换 'mApplication->window' 解决了这个问题。

# php - 将今天的“历史上的这一天”刮到 PHP 中的数组中

> ID：10045660
> 
> 赞同：2
> 
> 时间：2012-04-06T15:32:37.223
> 
> 标签：php, html-parsing

我试图获取历史上这一天发生的四五件事，并将其明文表示添加到 PHP 中的数组中。

到目前为止，我正在使用以下代码：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'http://en.wikipedia.org/w/api.php?action=featuredfeed&feed=onthisday&feedformat=rss');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, '3');
curl_setopt($ch, CURLOPT_USERAGENT, 'My random user agent'); // Needed for Wikipedia to prevent IP blocking
$contents = trim(curl_exec($ch));
curl_close($ch);

$xml = simplexml_load_string($contents);
$json = json_encode($xml);
$array = json_decode($json, true);

$noOfDays = count($array['channel']['item']);
$r = $noOfDays - 1;
$input = $array['channel']['item'][$r]['description']; 
```

我知道这不是非常动态和有效的，但是一个人每天会调用一次这个页面，所以它不是非常重要。

此时，`$input`包含一个 HTML 块，看起来像这样：

```
<p><b><a href="/wiki/April_6" title="April 6">April 6</a></b>: <b><a href="/wiki/Good_Friday" title="Good Friday">Good Friday</a></b> (Western Christianity, 2012); <b><a href="/wiki/Fast_of_the_Firstborn" title="Fast of the Firstborn">Fast of the Firstborn</a></b> begins at dawn and <b><a href="/wiki/Passover" title="Passover">Passover</a></b> begins at sunset (Judaism, 2012)
</p>
<div style="float:right;margin-left:0.5em">
<p><a href="/wiki/File:Sir_Arthur_Wellesley,_1st_Duke_of_Wellington.png" class="image" title="Arthur Wellesley, the Earl of Wellington"><img alt="Arthur Wellesley, the Earl of Wellington" src="//upload.wikimedia.org/wikipedia/commons/thumb/8/83/Sir_Arthur_Wellesley%2C_1st_Duke_of_Wellington.png/78px-Sir_Arthur_Wellesley%2C_1st_Duke_of_Wellington.png" width="78" height="100" /></a>
</p>
</div>
<li style="-moz-float-edge: content-box">
<a href="/wiki/1250" title="1250">1250</a> – <a href="/wiki/Seventh_Crusade" title="Seventh Crusade">Seventh Crusade</a>: Egyptian <a href="/wiki/Ayyubid" title="Ayyubid" class="mw-redirect">Ayyubids</a> <b><a href="/wiki/Battle_of_Fariskur" title="Battle of Fariskur">annihilated the crusader army</a></b> and captured King <a href="/wiki/Louis_IX_of_France" title="Louis IX of France">Louis&#160;IX of France</a> as a hostage.
<li style="-moz-float-edge: content-box">
<a href="/wiki/1320" title="1320">1320</a> – The <b><a href="/wiki/Declaration_of_Arbroath" title="Declaration of Arbroath">Declaration of Arbroath</a></b>, a declaration of <a href="/wiki/Scottish_independence" title="Scottish independence">Scottish independence</a>, was adopted.
<li style="-moz-float-edge: content-box">
<a href="/wiki/1812" title="1812">1812</a> – <a href="/wiki/Peninsular_War" title="Peninsular War">Peninsular War</a>: After a <b><a href="/wiki/Siege_of_Badajoz_(1812)" title="Siege of Badajoz (1812)">three-week siege</a></b>, the <a href="/wiki/Anglo-Portuguese_Army" title="Anglo-Portuguese Army">Anglo-Portuguese Army</a>, under the <a href="/wiki/Arthur_Wellesley,_1st_Duke_of_Wellington" title="Arthur Wellesley, 1st Duke of Wellington">Earl of Wellington</a> <i>(pictured)</i>, captured <a href="/wiki/Badajoz" title="Badajoz">Badajoz</a>, Spain and forced the surrender of the French garrison.
<li style="-moz-float-edge: content-box">
<a href="/wiki/1947" title="1947">1947</a> – The <a href="/wiki/1st_Tony_Awards" title="1st Tony Awards">first</a> <b><a href="/wiki/Tony_Award" title="Tony Award">Tony Awards</a></b>, recognizing achievement in live American <a href="/wiki/Theatre" title="Theatre">theatre</a>, were handed out at the <a href="/wiki/Waldorf-Astoria_Hotel" title="Waldorf-Astoria Hotel">Waldorf-Astoria Hotel</a> in <a href="/wiki/New_York_City" title="New York City">New York City</a>.
<li style="-moz-float-edge: content-box">
<a href="/wiki/2008" title="2008">2008</a> – Egyptian workers staged <b><a href="/wiki/2008_Egyptian_general_strike" title="2008 Egyptian general strike">an illegal general strike</a></b>, two days before <a href="/wiki/Egyptian_municipal_elections,_2008" title="Egyptian municipal elections, 2008">key municipal elections</a>.
</li>
</ul>
<p>More anniversaries: <span class="nowrap"><a href="/wiki/April_5" title="April 5">April 5</a> &#8211;</span> <span class="nowrap"><b><a href="/wiki/April_6" title="April 6">April 6</a></b> &#8211;</span> <span class="nowrap"><a href="/wiki/April_7" title="April 7">April 7</a></span>
</p>
<div style="text-align: right;" class="noprint"><span class="nowrap"><b><a href="/wiki/Wikipedia:Selected_anniversaries/April" title="Wikipedia:Selected anniversaries/April">Archive</a></b> &#8211;</span> <span class="nowrap"><b><a href="https://lists.wikimedia.org/mailman/listinfo/daily-article-l" class="extiw" title="mail:daily-article-l">By email</a></b> &#8211;</span> <span class="nowrap"><b><a href="/wiki/List_of_historical_anniversaries" title="List of historical anniversaries">List of historical anniversaries</a></b></span></div>
<div style="text-align: right;"><small>It is now <span class="nowrap">April 6, 2012</span> (<a href="/wiki/Coordinated_Universal_Time" title="Coordinated Universal Time">UTC</a>) &#8211; <span class="plainlinks" id="purgelink"><span class="nowrap"><a class="external text" href="//en.wikipedia.org/w/index.php?title=MediaWiki:Ffeed-onthisday-transcludeme&amp;action=purge">Refresh this page</a></span></span></small></div> 
```

我唯一感兴趣的是每个之间的位`<li style="-moz-float-edge: content-box">`

我不知道他们为什么没有`<li>`正确关闭这些标签，但是你去吧。

所以我想要的本质是获取实际信息，剥离链接并将每个链接添加到一个数组中，它应该看起来像这样：

```
Array (
    [0] => 1250 – Seventh Crusade: Egyptian Ayyubids annihilated the crusader army and captured King Louis&#160;IX of France as a hostage.
    [1] => Next one...
    [2] => And another...
) 
```

`&#160;`在这一行的末尾还有一个小问题。我如何将其翻译成纯文本？我有一种感觉 HTML 解析可能是答案。

我已经尝试过正则表达式和 HTML 解析，但由于标签没有关闭，我在执行此操作时遇到了一些困难。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:08:35.483

正如@zzzzBov 指出的那样，结束标记在 HTML（但不是 XHTML）中是可选的。不幸的是，这是使其与 XML（和 XML 解析器）不兼容的几个事实之一。对于您的任务，我建议使用[phpQuery](http://code.google.com/p/phpquery/wiki/Selectors)或[PHP Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/manual.htm)之类的库来解析 DOM 。

在 phpQuery 中，您的代码将如下所示：

```
$doc   = phpQuery::newDocumentHTML( $input );
$items = $doc->find('li');

foreach($items as $item) {
  echo pq($item)->text();
}

// Or... (PHP 5.3+)

$items = array_map( function( $item ) {
  return pq( $item )->text();
}, $doc->find('li') ); 
```

至于`&#160;`，试试[`html_entity_decode()`](http://php.net/html_entity_decode)。

# java - 使用 servlet 检索单选按钮值

> ID：10045663
> 
> 赞同：0
> 
> 时间：2012-04-06T15:32:56.030
> 
> 标签：java, servlets, button, radio

我对网络开发过程很陌生，所以如果这似乎是一个非常愚蠢的问题，我表示歉意。

基本上，我正在创建一个 servlet，用户将在其中对三个 3 个问题回答“是”或“否”，然后提交表单。

我想做的是检索每个按钮的值，并将其存储为数据结构，例如数组，我可以在其中对其进行检查。但是，我在这一点上有点迷茫。java中是否有我可以在每个按钮上调用的方法，类似于getValue（）？

看看我到目前为止开发的代码：

```
out.println("<FORM ACTION=\"Game\" METHOD = \"POST\">" +
        "<b>Question 1: Are you over the age of 25?. </b><br> <br>" +

        "<input type = \"radio\" name = \"rad1Q1\" onclick = \"getAnswer('a')\"> Yes " +
        "<input type = \"radio\" name = \"rad2Q1\" onclick = \"getAnswer('b')\"> No<br>" +

        "<br><br><b>Question 2: Are you from planet earth. </b><br> <br>" +

        "<input type = \"radio\" name = \"rad1Q2\" onclick = \"getAnswer('a')\"> Yes " +
        "<input type = \"radio\" name = \"rad2Q2\" onclick = \"getAnswer('b')\"> No <br>" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:40:38.843

html 表单中的输入值将作为请求参数提交给 servlet。在表单提交到的 servlet 中，您可以执行

```
String rad1Q1 = request.getParameter("rad1Q1"); 
```

获取选定的值。

我确实建议您将 html 代码放在 jsp 中而不是 servlet 中，以使代码更清晰且更易于维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:41:12.237

这些按钮完全是客户端，但是 JSP 是一种服务器端脚本语言，所以您必须提交表单并检查服务器端按钮的值，或者简单地使用 javascript 来检查选择了哪个（您也可以使用 AJAX，但它对你来说似乎有点困惑）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:55:42.490

好的，您能否发布更多信息？例如您使用的是什么？弹簧或支柱，以及您的“游戏”servlet 的外观。

一般来说，该过程可以是：

编写一个常规的 html 或 jsp 文件，其中包含您喜欢的表单和问题，收音机应该有一个唯一的名称（我可以看到您已经这样做了）并且在表单中您还需要添加一个提交按钮将触发表单的操作，因此表单的操作必须是您的其中一个 servlet 的 url。

在目标 servlet 中，您将通过您在 html 或 jsp 中给出的名称获取单选按钮，例如对于 rad1Q1，您将执行类似 request.getParameter("rad1Q1") 的操作，您将获得该字段的值.

这是一种方法，有很多方法，但根据您的经验，这看起来像更简单的方法。

# vcf-vcard - 将银行帐户存储在 vCard 文件中

> ID：10045664
> 
> 赞同：1
> 
> 时间：2012-04-06T15:32:57.977
> 
> 标签：vcf-vcard

标题中的问题 - 是否可以在 vCard 中存储银行帐号？规范是否说明了什么？有什么指导方针吗？

米。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T16:37:10.637

Yes. vCARD supports extensions, which means you could use something like

```
X-BANK-ACCOUNT-NUMBER:12345678 
```

Or, you could just put the details in the comments field.

You can [read more about the vCARD extensions on Wikipedia](http://en.wikipedia.org/wiki/VCard#vCard_extensions).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:37:07.660

我不是这个话题的专家。也就是说，我强烈建议不要将任何敏感信息存储在 vCard 中。据我所知，vCard 不支持加密（如果我弄错了，请有人纠正我）。

# objective-c - 加载图像后应用程序崩溃

> ID：10045668
> 
> 赞同：0
> 
> 时间：2012-04-06T15:33:25.330
> 
> 标签：objective-c

加载缩略图后，我的应用程序崩溃了。在这一行代码正在下载图像（缩略图）

```
else if ([tempTagName isEqualToString:@"Unicorn"])
            {   

                bottomIndexPage.unitArr = [[NSMutableArray alloc] init];
                NSArray *tempArr = [tempTagValue componentsSeparatedByString:@","];

                for (int i = 0; i<[tempArr count]; i++) 
                {

                    [bottomIndexPage.unitArr addObject:[[NSString alloc] initWithString:[tempArr objectAtIndex:i]]];

                } 
```

在输出中，我没有看到任何崩溃消息。它需要加载缩略图，但应用程序因下载而崩溃（90 +- 缩略图）

我觉得这里有东西

```
 if (!loadXmlFromWeb)
    {
        xmlTextReaderPtr xmlreader = xmlReaderForMemory([xmlData bytes], 
                                                        [xmlData length], 
                                                        [path UTF8String], nil, 
                                                        (XML_PARSE_NOBLANKS | XML_PARSE_NOCDATA | XML_PARSE_NOERROR | XML_PARSE_NOWARNING));
        [self xmlParseProc:xmlreader];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:42:37.070

首先：此代码泄漏。Using`[[ NSString alloc ] initWithString: s ]`返回一个您负责处理的已分配对象。在这样的循环中，您应该使用自动释放的字符串：`[ NSString stringWithString: s ]`。

但在这种情况下，您根本不需要新的字符串值。`-componentsSeparatedByString:`已经为您准备好了字符串值。您甚至不需要循环来插入来自`tempArr`. 做就是了：

```
[ bottomIndexPage.unitArr addObjectsFromArray: tempArr ]; 
```

# javascript - 如何在 Javascript 中对大于 2^32 的数字进行按位运算？

> ID：10045674
> 
> 赞同：10
> 
> 时间：2012-04-06T15:34:00.660
> 
> 标签：javascript

例如，如何得到正确答案`137438953472 & 137438953472`？

如果操作数在 2^32 和 2^53(max int) 之间，Javascript 返回 0。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T15:59:05.647

好的，这就是我想出的，仅使用 < 2^53 的无符号整数进行了测试：

编辑：当部分结果被解释为已签名时，修复了一个错误

```
function and( op1, op2 ) {

    var mod = Math.pow( 2, 32 ),
        op1mod = op1 % mod,
        op2mod = op2 % mod,
        op164to32,
        op264to32,
        res32, res64, res;

        op1 -= op1mod;
        op2 -= op2mod;

        res32 = ( op1mod & op2mod ) >>> 0;

        op164to32 = op1 / mod;
        op264to32 = op2 / mod;
        res64 = ( op164to32 & op264to32 ) >>> 0;

        res = res64 * mod + res32;
        return res;
}

and( 137438953473, 137438953473 )
//137438953473
and( 137439087606, 137438953473)
//137438953472
and( 0xCAFECAFECAFE, 0xBABEBABEBABE )
//152550976162494 
```

使用 Windows 64 位计算器确认结果正确：P

# compilation - Erlang gproc 编译失败

> ID：10045678
> 
> 赞同：1
> 
> 时间：2012-04-06T15:34:27.137
> 
> 标签：compilation, erlang, rebar

为了从 uwiger 编译 gproc，我似乎有一些问题。

我在[这里取了 ZIP](https://github.com/uwiger/gproc)

解压后，我完成了

```
$./rebar get-deps
==> gproc (get-deps)
Pulling edown from {git,"git://github.com/esl/edown.git","HEAD"}
Cloning into 'edown'...
Pulling gen_leader from {git,"git://github.com/abecciu/gen_leader_revival.git",
                             "HEAD"}
Cloning into 'gen_leader'...
==> edown (get-deps)
==> gen_leader (get-ups)

$make
rebar compile
==> edown (compile)
Compiled src/edown_make.erl
Compiled src/edown_xmerl.erl
Compiled src/edown_lib.erl
Compiled src/edown_doclet.erl
Compiled src/edown_layout.erl
==> gen_leader (compile)
Compiled src/gen_leader.erl
==> gproc (compile)
ERROR: git describe --always --tags `git log -n 1 --pretty=format:%h .` failed with error: 128 and output:
fatal: Not a git repository (or any of the parent directories): .git
fatal: Not a git repository (or any of the parent directories): .git

make: *** [compile] Error 1 
```

我似乎无法摆脱这个错误，它无法正确编译我在 ebin 目录中没有 gproc.app。

我正在使用 Mac OS X Lion。

有什么建议么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T00:00:50.543

这些天我使用了与您相同的操作系统（mac os lion）并测试了 gproc。

作者直到2012年5月2日才更改源代码。您是什么时候得到源代码的？

但我使用“sourcetree”从 git 获取源代码并获取所有补丁，而不是从 zip 获取文件。它编译正常，虽然问题不大。

另外，“gproc_dist_tests.erl”的eunit测试在mac os中存在问题，稍后你会发现。

# mysql-workbench - 更新 MySQL Workbench OS X Lion

> ID：10045682
> 
> 赞同：1
> 
> 时间：2012-04-06T15:34:44.707
> 
> 标签：mysql-workbench

我目前有版本 5.2.37，我想更新到 5.2.38。我该如何做到这一点并保持我的数据库连接？它们是存储在应用程序之外还是我必须重新创建连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T15:59:46.993

您的设置（存储的服务器连接/实例、日志、首选项等）存储在单独的目录中（`~/.mysql/workbench`在 Linux/Mac OSX 和`%APPDATA%/MySQL/Workbench`Windows 中），升级时不会受到影响。完成升级后，您将看到所有设置都已到位并且可以正常工作。

将 Workbench 升级到 5.2.38 是个好主意，因为它包含许多错误修复。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:37:56.757

我没有使用它，但如果你的设置*没有*被保留，我会感到惊讶。我什至不确定您的设置是否可以保存在应用程序本身中。它们更有可能保存在您的主目录中，位于“库”下的某个位置。

# sql - T-SQL 获取层次结构中的根节点

> ID：10045683
> 
> 赞同：5
> 
> 时间：2012-04-06T15:34:45.573
> 
> 标签：sql, sql-server, sql-server-2008, tsql

所以我有两个结构如下的表：

```
CREATE TABLE #nodes(node int NOT NULL);
ALTER TABLE #nodes ADD CONSTRAINT PK_nodes PRIMARY KEY CLUSTERED (node);

CREATE TABLE #arcs(child_node int NOT NULL, parent_node int NOT NULL);
ALTER TABLE #arcs ADD CONSTRAINT PK_arcs PRIMARY KEY CLUSTERED (child_node, parent_node);

INSERT INTO #nodes(node)
VALUES (1), (2), (3), (4), (5), (6), (7);

INSERT INTO #arcs(child_node, parent_node)
VALUES (2, 3), (3, 4), (2, 6), (6, 7); 
```

如果我有两个节点，可以说 1 和 2。我想要一个它们的根节点的列表。在这种情况下，它将是 1、4 和 7。如何编写查询来获取这些信息？

我尝试编写它，但遇到了一个问题，即由于某种未知原因，我无法在 CTE 的递归部分中使用 LEFT 连接。如果允许我进行 LEFT JOIN，以下是可以使用的查询。

```
WITH root_nodes
AS (
    -- Grab all the leaf nodes I care about and their parent
    SELECT n.node as child_node, a.parent_node
    FROM #nodes n
    LEFT JOIN #arcs a
      ON n.node = a.child_node
    WHERE n.node IN (1, 2)

    UNION ALL

    -- Grab all the parent nodes
    SELECT rn.parent_node as child_node, a.parent_node
    FROM root_nodes rn
    LEFT JOIN #arcs a -- <-- LEFT JOINS are Illegal for some reason :(
      ON rn.parent_node = a.child_node
    WHERE rn.parent_node IS NOT NULL
)
SELECT DISTINCT rn.child_node as root_node
FROM root_nodes rn
WHERE rn.parent_node IS NULL 
```

有没有办法可以重组查询以获得我想要的？我无法重组数据，我真的更愿意远离临时表或不得不做任何昂贵的事情。

谢谢，劳尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T15:48:10.877

将 LEFT JOIN 移出 CTE 怎么样？

```
WITH root_nodes
AS (
    -- Grab all the leaf nodes I care about
    SELECT NULL as child_node, n.node as parent_node
    FROM #nodes n
    WHERE n.node IN (1, 2)

    UNION ALL

    -- Grab all the parent nodes
    SELECT rn.parent_node as child_node, a.parent_node
    FROM root_nodes rn
        JOIN #arcs a
      ON rn.parent_node = a.child_node
)
SELECT DISTINCT rn.parent_node AS root_node
FROM root_nodes rn
    LEFT JOIN #arcs a
  ON rn.parent_node = a.child_node
WHERE a.parent_node IS NULL 
```

结果集为 1、4、7。

# trac - 将 trac 票证导出到 MS Project

> ID：10045686
> 
> 赞同：2
> 
> 时间：2012-04-06T15:35:02.680
> 
> 标签：trac, ms-project

我想在 Trac 和 MS Project 之间共享数据。要将数据导入 Trac，我可以使用 CSV 导入插件，但我不知道是否有办法将数据从 Trac 导出到 Project。有人有一些想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T08:51:48.487

如果您不介意编写一些代码，可以使用[MPXJ](http://mpxj.sf.net)创建 MPX 或 MSPDI (XML) 文件，您可以将其导入 Microsoft Project。

乔恩

ps 免责声明：我维护 MPXJ。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T21:28:55.120

您可以将数据从 Excel 文件导入 MS Project。如果您以 CSV 格式从 Trac 导出数据，Excel 应该能够将其转换为 Excel 文件，然后可以将其导入 Project。我自己没有尝试过，所以YMMV。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-21T19:56:12.273

您可以[联系 Task Adapter 开发人员](http://www.taskadapter.com/contacts)以请求 Trac 连接器。如果您只需要一次性转让，那是不值得的。但如果您定期需要这种工具，这可能是有道理的。

# ruby-on-rails - 如何与 Ruby 中的线程通信？

> ID：10045693
> 
> 赞同：6
> 
> 时间：2012-04-06T15:35:22.717
> 
> 标签：ruby-on-rails, ruby, real-time, juggernaut

我正在构建一个实时游戏，主要是基于聊天的，我需要同时运行许多这样的聊天，通过网络套接字接收和发送数据。

有人告诉我，与其在每个游戏中生成一个进程，不如在每个游戏中有一个进程和一个线程（可能使用事件机器）。

我将 Juggernaut 用于套接字部分，它允许我通过使用发布/订阅系统向游戏中的所有玩家发送数据：每个玩家订阅一个游戏。但是我如何将每个玩家的数据发送到那个特定的游戏呢？

我在想我可以将游戏ID或频道ID从客户端发送到服务器，然后将其发送到相应的线程。

但是如何将任何内容发送到线程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T15:46:04.900

要将数据发送到线程，可以使用 Ruby Queue：

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/thread/rdoc/Queue.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/thread/rdoc/Queue.html)

# sql - SQL Server 执行模拟

> ID：10045699
> 
> 赞同：8
> 
> 时间：2012-04-06T15:36:05.533
> 
> 标签：sql, sql-server-2008, sql-server-2005, impersonation

有什么区别...

```
execute as user = 'testuser' 
```

和

```
execute as login = 'testuser' 
```

我在这些登录名下执行一个跨数据库过程，它与作为登录名的执行一起工作，而不是作为用户执行。这是说服务器主体“testuser”不能在安全上下文下访问数据库“xxx”。

当我`SELECT SYSTEM_USER`在两个命令之后我看到它设置为`'testuser'`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-06T15:40:53.423

`execute as login`提供对整个服务器的模拟，因为登录是在服务器级别上的。由于用户是按数据库定义的，因此`execute as user`模拟仅适用于特定数据库，这就是您在跨数据库时看到错误的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T00:02:35.293

EXECUTE AS 可以添加到存储的过程、函数、触发器等。

执行方式示例：

```
CREATE PROCEDURE dbo.MyProcedure
      WITH EXECUTE AS OWNER 
```

在这种情况下，您将冒充被调用模块的*所有者*。

您还可以模拟*SELF*，或创建或更改模块的*USER或...模拟**CALLER*，这将使模块能够获得当前用户的权限，或者...模拟*OWNER*，它将获得以下权限该过程的所有者被称为 OR... impersonate `'user_name'`，它将模拟特定用户 OR... impersonate `'login_name'`with 将模拟特定登录。

可以通过以下方式设置对象（如存储过程）的权限

```
GRANT EXECUTE ON <schema>.<procedurename> to <username>; 
```

但是，您可能还想在登录和用户级别授予安全权限。

您将只想确定和授予需要访问（例如执行）的对象的必要权限**。**考虑使用`"EXECUTE AS"`能够**模拟**另一个用户来验证执行代码所需的权限而*不必*授予所有底层对象（例如表）的所有必要权限的功能。

大多数时候，您只需要授予存储过程的执行权限，然后将权限授予存储过程中引用的所有对象。

这样，您不需要赋予隐式权限（例如：更新数据或调用其他 procs）。 **所有权链**为您处理这个问题。这对于动态 sql 或者如果您需要创建提升的安全任务（例如`CREATE TABLE. EXECUTE AS`考虑这些的方便工具）特别有用。

这个例子可能有助于澄清所有这些：

```
--Create a user called NoPrivUser with public access to a database (e.g. dbadb)

USE [master]
GO
CREATE LOGIN [NoPrivUser] WITH PASSWORD=N'ABC5%', DEFAULT_DATABASE=[dbadb], CHECK_EXPIRATION=ON, CHECK_POLICY=ON
GO
USE [DBAdb]
GO
CREATE USER [NoPrivUser] FOR LOGIN [NoPrivUser]
GO 
```

注意：此过程的创建者或所有者将需要在目标数据库中创建表权限。

```
use DBAdb
go
CREATE PROCEDURE dbo.MyProcedure 
WITH EXECUTE AS OWNER
AS
IF NOT EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].MyTable') AND type in (N'U')) 
CREATE TABLE MyTable (PKid int, column1 char(10)) 
INSERT INTO MyTable
VALUES (1,'ABCDEF')

GO

GRANT EXEC ON dbo.MyProcedure TO NoPrivUser;
GO 
```

-- 现在以 NoPrivUser 身份登录到您的数据库服务器并运行以下命令。

```
use dbadb
go

EXEC dbo.MyProcedure

--(1 row(s) affected) 
```

现在尝试在以 NoPrivuser 身份登录时从新表中进行选择。

您将获得以下信息：

```
select * from MyTable
go 
```

> 消息 229，级别 14，状态 5，第 1 行对象“MyTable”、数据库“DBAdb”、模式“dbo”的 SELECT 权限被拒绝。

这是意料之中的，因为您仅在以 NoPrivUser 身份登录时在 Owner 的安全上下文中运行了该过程。
NoPrivUser 因为没有实际读取表的权限，只是执行创建和插入行的过程。

使用 EXECUTE AS 子句，存储过程在对象所有者的上下文中运行。此代码成功创建 dbo.MyTable 并成功插入行。

在此示例中，用户“NoPrivUser”绝对没有授予修改表或读取或修改此表中的任何数据的权限。
它仅具有完成此过程上下文中编码的特定任务所需的权限。

This method of creating stored procedures that can perform tasks that require elevated security rights without permanently assigning those rights come be very useful.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T15:41:38.587

登录范围在服务器级别，而用户范围在当前数据库级别

[http://msdn.microsoft.com/en-us/library/ms181362.aspx](http://msdn.microsoft.com/en-us/library/ms181362.aspx)

# python - 使用 ElementTree 解析 xml

> ID：10045700
> 
> 赞同：2
> 
> 时间：2012-04-06T15:36:09.340
> 
> 标签：python, xml, django

我写了一个小函数，它使用 ElementTree 来解析 xml 文件，但它抛出以下错误“xml.etree.ElementTree.ParseError: not well-formed (invalid token): line 1, column 0”。请在下面找到代码

```
tree = ElementTree.parse(urllib2.urlopen('http://api.ean.com/ean-services/rs/hotel/v3/list?type=xml&apiKey=czztdaxrhfbusyp685ut6g6v&cid=8123&locale=en_US&city=Dallas%20&stateProvinceCode=TX&countryCode=US&minorRev=12'))

rootElem = tree.getroot()

hotel_list = rootElem.findall("HotelList") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-06T15:56:07.667

您使用的网站存在多个问题：

*   您正在使用的网站以某种方式不尊重`type=xml`您作为 GET arg 发送，而是您需要发送接受标头，告诉网站您接受 XML，否则它返回 JSON 数据

*   网站不接受内容类型`text/xml`，因此您需要发送`application/xml`

*   您的`parse`调用是正确的，在其他答案中错误地提到它应该获取数据，而不是`parse`获取文件名或文件类型对象

所以这是工作代码

```
import urllib2
from xml.etree import ElementTree

url = 'http://api.ean.com/ean-services/rs/hotel/v3/list?type=xml&apiKey=czztdaxrhfbusyp685ut6g6v&cid=8123&locale=en_US&city=Dallas%20&stateProvinceCode=TX&countryCode=US&minorRev=12'
request = urllib2.Request(url, headers={"Accept" : "application/xml"})
u = urllib2.urlopen(request)
tree = ElementTree.parse(u)
rootElem = tree.getroot()
hotel_list = rootElem.findall("HotelList")  
print hotel_list 
```

输出：

```
[<Element 'HotelList' at 0x248cd90>] 
```

注意我正在创建一个`Request`对象并传递`Accept`标题

顺便说一句，如果站点返回 JSON，为什么您需要解析 XML，解析 JSON 会更简单，您将获得一个现成的 python 对象。

# codeigniter - CodeIgniter reCaptcha 和 Form_validation 类

> ID：10045702
> 
> 赞同：0
> 
> 时间：2012-04-06T15:36:25.383
> 
> 标签：codeigniter, validation, recaptcha

我有一个简单的联系表格，其中包含几个必填字段，效果很好。我正在尝试将 reCaptcha 添加到表单中以增加一些垃圾邮件保护。

我在表单上正确显示了 reCaptcha，我已经安装了我的密钥。在我的控制器中，我可以调用 recaptcha_check_answer 方法并取回有效响应。我已经正确安装和配置了所有文件，因为我可以使用 recaptcha 类中的方法并获得良好的响应。

我的问题是我想让一个无效的 reCaptcha 触发 CI form_validation 错误，但我在这方面花了很多时间，但无法触发它。我对 CI 很陌生，所以如果这很容易，请原谅我的无知。

当 is_valid 响应返回 NULL 时，我尝试抛出 form_validation 错误。如果为NULL，那么我尝试执行以下操作：

```
$this->form_validation->set_message('recaptcha_response_field', 'reCaptcha', lang('recaptcha_incorrect_response'));
echo form_error('recaptcha_response_field'); 
```

以下是有效和无效验证码的 reCaptcha API 响应：

```
Valid = stdClass Object ( [0] => is_valid [1] => error [is_valid] => 1 )
Invalid = stdClass Object ( [0] => is_valid [1] => error [is_valid] => [error] => incorrect-captcha-sol ) 
```

这是我在控制器中的代码：

```
class Contact extends CI_Controller 
{

function __construct()
{
  parent::__construct();
}

public function index()
{
  $this->load->library('recaptcha');
  $this->recaptcha->set_key ('MY_PUBLIC_KEY_HERE' ,'public');
  $this->recaptcha->set_key ('MY_PRIVATE_KEY_HERE' ,'private'); // For private key

     // Is this a Form Submission?
     if (!empty($_POST))
     {

        // LOAD VALIDATION AND SET RULES
         $this->load->library('form_validation');
         $this->load->helper('form');

        $this->form_validation->set_rules('first_name', 'First Name', 'required');
        $this->form_validation->set_rules('last_name', 'Last Name', 'required');
        $this->form_validation->set_rules('email', 'Email', 'required|valid_email');
        $this->form_validation->set_rules('recaptcha_response_field', 'reCaptcha', 'required|recaptcha_check_answer');
        $this->_resp = $this->recaptcha->recaptcha_check_answer ( $this->input->ip_address(), $this->input->post('recaptcha_challenge_field',true), $this->input->post('recaptcha_response_field',true));

        // If the reCaptcha doesnt match throw an form_valiation Error
        if ($this->_resp->is_valid == '')
        {
            $this->form_validation->set_message('recaptcha_response_field', 'reCaptcha', lang('recaptcha_incorrect_response'));
            echo form_error('recaptcha_response_field');
        }

        if ($this->form_validation->run() !== FALSE)
        {
           // SUCCESS NO ERRORS - SEND EMAIL DATA AND RETURN TO HOME
              $this->load->library('email');   // LOAD EMAIL LIBRARY
              $config['protocol'] = 'sendmail';
              $config['mailpath'] = '/usr/sbin/sendmail';
              $config['charset'] = 'utf-8';
              $config['wordwrap'] = TRUE;

              $this->email->initialize($config);

              $this->email->from($this->input->post('email'), $this->input->post('first_name').' '.$this->input->post('last_name'));
              $this->email->to('jassen.michaels@gmail.com');
              $this->email->cc('');
              $this->email->bcc('');

              $this->email->subject('Contact Email From Spider Design Website');
              $this->email->message(
                    'First Name: '.$this->input->post('first_name')."\r\n".
                    'Last Name: '.$this->input->post('last_name')."\r\n".
                    'Company: '.$this->input->post('company')."\r\n".
                    'Location: '.$this->input->post('location')."\r\n"."\r\n".
                    'I am interested in learning: '."\r\n"."\r\n".
                    'Information Architecture: '.$this->input->post('information_architecture')."\r\n".
                    'Web Design: '.$this->input->post('web_design')."\r\n".
                    'Graphic Design: '.$this->input->post('graphic_design')."\r\n".
                    'Email Marketing: '.$this->input->post('email_marketing')."\r\n".
                    'Social Media: '.$this->input->post('social_media')."\r\n".
                    'Content Management: '.$this->input->post('content_management')."\r\n".
                    'Search Engine Optimization: '.$this->input->post('seo')."\r\n".
                    'Web Traffic Analytics: '.$this->input->post('wta')."\r\n"."\r\n".
                    'Preferred Method of Contact: '."\r\n".
                    'Phone: '.$this->input->post('phone')."\r\n".
                    'Email: '.$this->input->post('email')."\r\n"."\r\n".
                    'Comments: '."\r\n".
                    $this->input->post('comments')            
                    );

           //$this->email->send();
           //$this->load->helper('url');
           //redirect('http://sdi.myspiderdesign.com/fuel');
        } 
     }

         // Not a form submission, load view
         $this->load->helper('form');
         $this->load->view('include/spider_header');
         $this->load->view('contact');   // Content Area
         $this->load->view('include/spider_footer'); // Footer
   }
} 
```

我已经注释掉了表单底部的重定向和联系电子邮件，直到我可以解决这个问题。

提前感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T21:42:14.287

我在 form_validation 库中使用了 callback_ 函数。在进行 API 调用的控制器内设置一个附加函数，如果验证码未通过，它将引发验证错误。

# asp.net-mvc - ASP.NET MVC 脚手架 + 关联

> ID：10045707
> 
> 赞同：0
> 
> 时间：2012-04-06T15:36:39.333
> 
> 标签：asp.net-mvc, associations, scaffolding, radiobuttonlist

我为我的模型搭建了一个 CRUD 场景。现在我需要为我的“创建"-查看数据库驱动的列表项。我发现没有其他方法可以做到这一点（不会丢失我的强类型视图），然后将我的整个模型包装在另一个模型中，以便我可以添加列表项。

这意味着我必须调整视图中的几乎每一行，因为它们不再是：

```
@Html.EditorFor(model => model.Name) 
```

但现在：

```
@Html.EditorFor(model => model.Model.Name) 
```

有没有办法解决这个问题？

# video - 如何在我的网站中嵌入私人 youtube 视频？

> ID：10045708
> 
> 赞同：33
> 
> 时间：2012-04-06T15:36:43.890
> 
> 标签：video, youtube, private

我必须在我的博客中显示一些私人 Youtube 视频。我不能直接嵌入它们。我应该用什么来做到这一点。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2015-04-02T08:53:14.093

您应该将视频设置为“不公开”而不是“私人”。这样，视频就不会出现在您的频道或任何搜索结果中，但任何有视频链接的人都可以看到它，并且您可以将视频嵌入任何网站。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-17T18:10:34.157

我还没有尝试过这种解决方法，但理论上它应该可以工作，您需要使用 YouTube API V 3 并按照以下步骤操作：

1.  通过 API 将视频的隐私状态设置为不公开。
2.  通过 API 将视频嵌入隐藏的 div 中。
3.  使用 onPlayerStateChange 事件检查视频播放器当前是否正在播放视频，使用 API 在第一秒暂停视频。
4.  如果状态更改为“正在播放”，则向服务器端脚本发送 AJAX 请求以将视频的隐私状态恢复为私有，一旦您收到确认消息显示视频并使用 API 播放它。

即使用户将 URL 复制并粘贴到另一个选项卡中，这也应该保持视频的私密性，他/她应该会收到视频是私密的消息。

[这是对 YouTube iFrame API 的参考，它为您提供了 onPlayerStateChange 事件的示例](https://developers.google.com/youtube/iframe_api_reference?hl=en)

[请参考此链接通过 API v 3 更改隐私状态](https://stackoverflow.com/questions/30235503/php-how-to-change-privacy-status-of-a-youtube-video-through-youtube-api-v3)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-06T15:40:37.027

我不认为您可以在您的网站上嵌入私人 youtube 视频，即使您这样做，他们也将无法查看它，因为它是私人的。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-05T09:39:43.323

您可以嵌入您的私人视频，但它们只会显示给您和您与之共享的人。有关更多信息，请参阅[https://support.google.com/youtube/bin/answer.py?hl=en&answer=157177](https://support.google.com/youtube/bin/answer.py?hl=en&answer=157177)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-09-11T02:47:40.677

您不能将私人视频嵌入到您的网站，因为它是私人的，因此无法在您的网站上向公众观众展示。

到目前为止，Youtube 拥有三个许可证：

1 - 公开：您的视频可以公开观看
2 - 不公开：您的视频可以通过 url 或链接查看或嵌入，并且不会显示在搜索结果或您的频道中
3 - 私有：您的视频是私有的，无法查看

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-10-30T17:06:21.990

是的，您可以在您的网站上嵌入私人和未列出的文件。如果是私有的，Youtube 将要求登录（如果没有），凭据将授予观看内容的权限，这取决于您是频道的经理/管理员或有邀请（来自仪表板的邀请电子邮件）。

如果未列出，它将显示！

视频必须是可嵌入的！

# javascript - Flex - javascript 函数运行时的状态栏

> ID：10045709
> 
> 赞同：1
> 
> 时间：2012-04-06T15:36:49.060
> 
> 标签：javascript, apache-flex, photoshop-script

我正在就这个问题寻求方向。我有一个调用 Javascript 的 Flex 函数，它正在操作文件、复制到另一个目录等。根据操作的大小，可能需要一些时间才能完成。

有没有一种方法可以在该功能运行时显示动画“加载”状态？

谢谢

# cakephp - 如何在 CakePHP 2.0 中发送带有附件的电子邮件？

> ID：10045719
> 
> 赞同：3
> 
> 时间：2012-04-06T15:37:55.517
> 
> 标签：cakephp, cakephp-2.0

我正在尝试使用 CakePHP 2.0 发送带有附件的电子邮件。

该文件由用户通过表单提交。

到目前为止，我有：

```
App::uses('CakeEmail', 'Network/Email');
$email = new CakeEmail();
$email->attachments = array($this->data['Opportunity']['resume_file']['tmp_name']);
$email->viewVars(array('name' => $this->data['Opportunity']['name']));
$email->template('application')
    ->emailFormat('html')
    ->to(TEST_CONTACT)
    ->from(EMAIL_CONTACT)
    ->subject('New application received')
    ->send(); 
```

电子邮件发送并且看起来不错，但没有附件。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T15:44:08.333

出于某种原因，除非您先声明文件路径，否则 CakePHP 不会做附件。

我有同样的问题，我没有设法找到这个问题的很多答案。我花了一段时间来解决这个问题，澄清一下，我让它工作了

```
$this->Email->filePaths  = array('/home/username/');
       $this->Email->attachments =array('article_button.png');
$this->Email->to      = 'em...@email.co.uk';
    $this->Email->subject = 'Something';
    $this->Email->replyTo = $client['Client']['email'];
    $this->Email->from    = $client['Client']['email'];
    $this->Email->sendAs  = 'html';

    if($this->Email->send('Testing', null, null)){
      die('Email Sent!');
    }else{
      die('Failed to send email');
    } 
```

[http://groups.google.com/group/cake-php/browse_thread/thread/93a9c9467733fe38?pli=1](http://groups.google.com/group/cake-php/browse_thread/thread/93a9c9467733fe38?pli=1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T20:58:23.630

将以下脚本放入**AppController.php**

```
 function sendMailWithAttachment($template = null, $to_email = null, $from_email = null, $subject = null, $contents = array()) {
        $from_email = 'noreply@xyz.com';
        $email = new CakeEmail();
        $result = $email->template($template, 'default')
                ->emailFormat('html')
                ->to($to_email)
                ->from($from_email)
                ->subject($subject)
            ->attachments('your-server-path/filename.extenstion')
                ->viewVars($contents);
        if ($email->send('default')) {
            return true;
        }
        return false;
    } 
```

之后只需在任何控制器中调用方法 sendMailWithAttachment()

```
$this->sendMailWithAttachment('tmpl', 'test@abc.com','noreply@xyz.com', 'Subject', $tmpl_DATA_IN_ARRAY); 
```

# c# - 来自 Asp.net 的间接下载链接

> ID：10045726
> 
> 赞同：0
> 
> 时间：2012-04-06T15:38:31.373
> 
> 标签：c#, asp.net

我想给用户，链接到我在服务器上的文件，但我不想让他们直接链接

我知道如何做到这一点（使用重写或处理程序），我不希望我需要一个 C# 中的库来做到这一点，非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T08:28:50.623

例如，您可以简单地`Response.WriteFile("filePath")`在按钮事件中使用。只需以某种方式使文件名可用于此方法（例如，查询字符串或从数据库读取），但请记住该`WriteFile`方法不支持恢复，因此如果您的文件不大，此方法很有用。

# c# - Visual Studio 2010 解决方案文件夹中的未知 Index.dat 和 Storage.dat 文件

> ID：10045735
> 
> 赞同：4
> 
> 时间：2012-04-06T15:39:41.227
> 
> 标签：c#, visual-studio, visual-studio-2010, index.dat

我有一个 Visual Studio 2010 解决方案，一周前在根解决方案文件夹中神秘地出现了两个文件，名为 Index.dat 和 Storage.dat。它们的大小分别为 28 字节和 512 字节。

该解决方案与 TFS 服务器相关联，但我之前从未在任何其他解决方案中见过这些文件。

关于这些文件是否与VS有关的任何线索？自 2003 年以来我一直在使用 VS，之前从未见过这些文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T13:02:03.860

如果将数据库项目添加到解决方案，这些文件由 Visual Studio 创建。

# ios - 从 NSArray 动态创建 NSString - NSXMLParser

> ID：10045736
> 
> 赞同：0
> 
> 时间：2012-04-06T15:39:43.200
> 
> 标签：ios, ios5, nsstring, nsarray, nsxmlparser

我有一个实现 NSXMLParser 方法并解析 XML 文档的类。由于类将用于解析几个 xml 文档，因此传递给我的类的键会改变。

当我解析文档时，我正在检查 didStartElement 和 didEndElement 是否匹配我的键，然后在 foundCharacters 中将字符串保存到 NSDictionary。NSDictionary 将通过选择器返回给我的委托。

问题在于 foundCharacters 方法，正在保存的字符串是文档中的部分字符串。

我在想的是为每个键和 foundCharacters 创建一个 NSString，将字符串附加到为该键动态创建的字符串。

这是我的数组。

```
NSArray *items = [NSArray arrayWithObjects:@"id", @"time", @"newtime", @"title", @"html", @"image", @"url", nil]; 
```

使用以下方法将其传递到我的解析器中。

```
-(void) parseArticles:(NSString *)url keys:(NSArray *)findKeys containingString:(NSString *)containing withDelegate:(id)aDelegate {

    keys = findKeys;
    [self setDelegate:aDelegate];

    responseData = [NSMutableData data];
    NSURL *baseUrl = [NSURL URLWithString:url];

    NSLog(@"Loading URL: %@", url);

    [UIApplication sharedApplication].networkActivityIndicatorVisible = YES;
    NSURLRequest *request = [NSURLRequest requestWithURL:baseUrl];
    (void)[[NSURLConnection alloc] initWithRequest:request delegate:self];

} 
```

这是我的 foundCharacters 方法

```
-(void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    for(NSString *toFind in keys){
        if([currentItem isEqualToString:toFind]) [item setObject:string forKey:toFind];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:18:26.367

您的解析器应该有一个 NSMutableString，您应该在 didStartElement 中将其设置为空字符串，将字符串附加到 foundCharacters 并将字符串保存到 didEndElement 中的 NSDictionary 中，如下所示：

```
-(void)parser:(NSXMLParser *)parser didStartElement...
{
     myMutableString = [[NSMutableString alloc] initWithFormat:@""];
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
     [myMutableString appendString:string];
}

-(void)parser:(NSXMLParser *)parser didEndElement...
{
     for(NSString *toFind in keys){
        if([currentItem isEqualToString:toFind]) [item setObject:myMutableString forKey:toFind];
    }
} 
```

# ios - 一个低帧的cocos2d程序

> ID：10045740
> 
> 赞同：2
> 
> 时间：2012-04-06T15:40:09.947
> 
> 标签：ios, ipad, cocos2d-iphone

我用cocos2d启动了一个iPad游戏。当我添加一个全屏图像作为它的背景时，框架减少到30..有什么办法可以改善吗？iOS模拟器是否导致了这个？

```
CCSprite *background = [CCSprite spriteWithFile:@"demoBackground.png"];
background.position = CGPointMake(winSize.width/2, winSize.height/2);
[self addChild:background]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T19:35:49.583

尝试在真正的 iPad 上运行该应用程序。我对视网膜屏幕的图像有类似的问题。在模拟器上它非常慢（fps），但在 iPod 上却非常流畅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T01:45:37.187

我一直发现 Cocos 项目的 Sim 上的 FPS 远低于设备上的 FPS。您永远不应该注意模拟器上的 FPS。始终在设备上加载您的项目。这不是唯一的原因。考虑内存使用情况。使用 Sim，您可以加载各种东西，但您的应用程序可能会立即在设备上崩溃，因为它们的可用内存要少得多。通常，在设备上测试您的应用程序。iOS 向您的应用程序委托发送的那些自然内存警告也只会在设备上发生，并且很高兴知道您何时遇到了 2 级警告，而您不会在 Sim 中看到这一点（至少我从未遇到过）。

我只使用 Sim 来测试我的代码的一般定位和布局结果。我从不在 Sim 上测试性能或交互性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T19:34:29.107

你在测量模拟器的帧率吗？这将使您的问题变得毫无意义。模拟器性能无关紧要且具有误导性，因为您只是在衡量 Mac 运行模拟器的速度。您的所有用户都将在设备上运行您的应用程序。

在实际设备上，单个全屏背景图像不会降低帧率。即使在第一代 iPad 上，您还需要做很多其他事情才能将帧速率降至 60 fps 以下。

# mysql - 关系数据库结构设计

> ID：10045742
> 
> 赞同：0
> 
> 时间：2012-04-06T15:40:11.100
> 
> 标签：mysql, database-design, database-schema

我正在 MySQL 中设计一个数据库，需要一些关于它的结构和表之间关系的指导。我已经确定了以下事实：

我有：

*   许多用户。（美好的）
*   一个用户有多个组织。（一 - 多）
*   一个组织有许多事件。（一 - 多）
*   一个用户有多个地址。（一 - 多）
*   一个组织有许多地址（一个 - 许多），但这些地址可能被另一个组织或事件使用。因此，许多组织有许多地址。（很多很多）
*   一个事件有一个地址。（一一）
*   一个组织有一个主要地址，但许多组织可能在同一个地址工作，所以（多 - 一）

这就是我卡住的地方，因为尽管组织或活动有地址，但他们并不拥有它，用户拥有。那么这些关系有必要吗？我是否需要定义外键关系，或者没有它们我可以逃脱吗？我是否需要维护一个单独的默认地址表，因为 2 个组织可以使用相同的地址，但它不是一个的默认地址，因此在地址表中引用它会有问题（哪个实际上是主地址）？

还是我以一种过于复杂的方式看待这个问题？也许让用户维护地址，然后当他们添加组织时，该组织引用该地址但对其他地址一无所知（对于组织来说是一对一关系还是对于地址是多一关系？显然删除了一个组织不应该意味着删除地址，反之亦然）。

然后，当添加一个事件时，它也只是引用一个地址，但可以查找它所属组织的默认地址。出现与上述相同的问题。事件位于该地址，但该地址不属于该事件，反之亦然。

这几乎将其简化为：

*   一个用户，许多事件。
*   一个用户，多个组织。
*   一个用户，多个地址。
*   一个组织，一个地址。
*   一个事件，一个地址。

这是看待这个问题的正确方法吗？是否有任何我似乎没有考虑到的困难？有没有更好的方法来解决这个问题？我遇到的最大问题是如何将表格相互关联，以便我可以相应地设置关系。

-- 编辑：添加信息

进一步考虑，可能不止一个组织正在举办同样的活动。我也希望能够链接事件。这些组织可以由不同的用户添加，但都需要相关。这是 MySQL 可以轻松处理的事情，还是我应该查看其他类型的数据库逻辑，例如图形数据库？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-06T15:48:14.650

这实际上取决于您的用例。当然，让用户或组织共享一个地址（因此，一个地址表）在技术上似乎是正确的，但它可能会增加不必要的复杂性。想想你将如何查询你的数据库（尝试前瞻性的思考——你以后想做什么？）并设计你的表来支持这些查询。

您不必在数据库中有外键约束。实际上，我看过的大多数数据库*都没有*它们，业务逻辑处理检查记录的完整性。我再次建议您对此保持务实，并做您喜欢构建和支持的事情。

# c# - 关于 OleDbCommand 的困惑

> ID：10045743
> 
> 赞同：0
> 
> 时间：2012-04-06T15:40:16.767
> 
> 标签：c#

我知道要实例化一个新的 OLEDbCommand 对象，您可以这样做：

```
OleDbCommand command = new OleDbCommand(queryString, connection); 
```

但是，我对这行代码的作用感到困惑：

```
OleDbCommand cmd = aConnection.CreateCommand(); 
```

我知道 aConnection 是一个 OleDbConnection 对象，它在代码的前面被实例化了。

从 MSDN Library 我知道 CreateCommand() 是一个与 OdbcConnection 关联的 OdbcCommand 对象。然而，图书馆并没有真正进一步解释其目的。

尽管我知道各个组件是什么，但我不确定这里发生了什么。cmd 是为了能够使用 SQL 命令而被实例化的 OleDbCommand 对象吗？我推断这是因为在代码中进一步有以下内容：

```
cmd.CommandText = "SELECT * FROM Team where typeOfSport = '" + typeOfSport + "'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:46:13.470

根据[MSDN](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbconnection.createcommand.aspx) `aConnection.CreateCommand()`：

> 创建并返回与 OleDbConnection 关联的 OleDbCommand 对象。

这基本上是一种方便的方法，它已经在命令上设置了相应的连接而没有设置- 因此，只要您需要一个对象而不直接提供对象，`CommandText`就可以将其用作实用方法，但稍后...`OleDbCommand``CommandText`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T15:45:32.983

它只是从连接对象创建一个命令。该命令将与创建它的连接相关联。

```
OleDbCommand command = new OleDbCommand(queryString, connection); 
```

是相同的

```
OleDbCommand command = connection.CreateCommand() 
```

# iphone - Facebook 开放图 - 发布动作可靠性

> ID：10045747
> 
> 赞同：3
> 
> 时间：2012-04-06T15:40:44.950
> 
> 标签：iphone, ios, facebook-graph-api, facebook-opengraph

谁能告诉我，在将动作发布到时间线时，Facebook 的开放图形 API 的可靠性如何？

**背景**：

*   我创建了一个新的 FB iOS 应用
*   使用自定义对象“blogpost”创建一个新的操作类型“write”，因为通用类型对我不起作用
*   [遵循 Facebook 在http://developers.facebook.com/docs/opengraph/tutorial/](http://developers.facebook.com/docs/opengraph/tutorial/)上提供的教程的每一点，以符合所有 OG 要求

**发布代码**：

```
[self.facebook requestWithGraphPath: @"me/MY_APP:write" andParams: [NSMutableDictionary dictionaryWithObject: @"http://blogpost.url/here" forKey: @"blogpost"] andHttpMethod: @"POST" andDelegate: self]; 
```

以下是符合 OG 要求的博文页头片段：

```
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# MY_APP: http://ogp.me/ns/fb/MY_APP#">
      <title>Blogpost page</title>
      <meta property="og:title" content="Blogpost page" />
      <meta property="og:image" content="http://url.to/the/image.png" />
      <meta property="fb:app_id" content="123456790123456789" />
      <meta property="og:url" content="http://blogpost.url/here" />
      <meta property="og:type" content="MY_APP:blogpost" />
</head> 
```

**测试环境**：

*   在模拟器和实际设备中测试
*   对于每次请求尝试，我都会启动一个新的应用程序以排除任何应用程序的网络问题。
*   每次，我的请求都是完全相同的，具有相同的链接博客网址。
*   我正在使用可用的最新 iOS SDK
*   我的网络非常可靠
*   博客文章页面可访问并正确包含 opengraph 设置的所有要求

**Facebook API 的错误响应每次都不同：**

*   OAuthException：发生意外错误。请稍后重试您的请求。
*   例外：无法从 URL 检索数据。
*   例外：“MY_APP:blogpost”类型的 URL“http://blogpost.url/here”处的对象无效，因为指定的应用程序 ID“XXXXXXXX”不允许使用域“blogpost.url”。[您可以在https://developers.facebook.com/apps/XXXXXXX](https://developers.facebook.com/apps/XXXXXXX)验证您配置的“应用程序域” 。

（注意：很明显， blogpost.url 被替换为真实的现有页面）

请求成功率在 30% 左右。

Facebook端是否有任何问题？目前，我不想以 Facebook 共享可靠性的当前形式发布我的应用程序。

感谢您提供任何反馈、帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T11:07:34.193

经过一些进一步的研究和耐心，现在一切正常。

以下错误只是在 24 小时内停止出现，我们这边没有任何代码更改（我想 FB 确实存在问题）：

*   OAuthException：发生意外错误。请稍后重试您的请求。
*   例外：“MY_APP:blogpost”类型的 URL“http://blogpost.url/here”处的对象无效，因为指定的应用程序 ID“XXXXXXXX”不允许使用域“blogpost.url”。[您可以在https://developers.facebook.com/apps/XXXXXXX](https://developers.facebook.com/apps/XXXXXXX)验证您配置的“应用程序域” 。

以下异常是由我们的操作对象的 url 引起的 - 由于 url 在“FB 发布操作”之前一秒钟就生效了，因此该 URL 并未真正在我们的 Web 前端的所有实例中发布：

*   例外：无法从 URL 检索数据。

希望这对将来的某人有所帮助。

# jquery - 使用 jQuery 从 DIV 中获取一个类并将另一个类添加到具有第一个类的所有 DIV

> ID：10045749
> 
> 赞同：0
> 
> 时间：2012-04-06T15:40:54.000
> 
> 标签：jquery, html, addclass

基本上，我正在创建一个选项卡式面板。当用户单击选项卡时，我希望面板切换出去。该选项卡具有与相应面板上的类相同的类。我想使用 jQuery get ($this) 类并说当您单击带有 XX 类的选项卡时，将类“.active”添加到所有具有 XX 类的 DIV。

这是我的 HTML：

```
<div class="bundle_panel">
    <div class="tab tXX">TITLE_HERE</div>
    <div class="panel tXX">CONTENT_HERE</div>
</div> 
```

我试过这个jQuery没有效果：

```
$(".bundle_panel .tab").click(function(){
    var panelClass = $(this).attr("class");
    $(panelClass).addClass('active');
}); 
```

任何帮助，将不胜感激。如果我需要澄清任何事情或提供更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:52:00.540

实现选项卡的更好方法是`id`为每个“面板”使用一个属性并链接到`id`选项卡中的那些 s：

```
<ul>
    <li><a href="#panel-1">Panel 1</a></li>
    <li><a href="#panel-2">Panel 2</a></li>
</ul>

<section id="panel-1">
    <h2>Panel 1</h2>
    <p>Content</p>
</section>

<section id="panel-2">
    <h2>Panel 2</h2>
    <p>Content</p>
</section> 
```

然后你可以简单地：

```
$('ul.tabs a').click(function () {
    var target = $(this).attr('href');

    $(target).show();
}); 
```

编辑：额外的好处是它在没有 JavaScript 的情况下也有意义。

Edit2：在您的代码中，问题是您试图*仅*选择类名，而不用点（。）作为前缀，它应该是：

```
$('.' + panelClass).addClass('active'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:54:26.100

您的示例的问题是单击将导致将“tab tXX”的值分配给您的 panelClass 变量。然后您的行`$(panelClass).addClass('active');`正在尝试将活动类添加到不退出的元素。如果您使用：

```
$(".bundle_panel .tab").click(function(){
    var panelClass = $(this).attr("class").split(' ');
    $(".panel."+panelClass[1]).addClass('active');
});​ 
```

这会将活动类应用于所有具有“面板”类和单击元素的第二类的元素（使用您的示例代码，TXX）。**[jsFiddle 示例](http://jsfiddle.net/j08691/FZ9aw/)**。

# jquery - jQuery 工具：日期输入/验证器不能一起工作

> ID：10045752
> 
> 赞同：0
> 
> 时间：2012-04-06T15:41:06.727
> 
> 标签：jquery, jquery-tools

我正在使用 jQuery 工具 v1.2.7 和 jQuery v1.7.2。我有以下代码：

```
<input type="date" name="delivery_due" required="required"> 
```

使用以下设置：

```
$("form.validate").validator();
$(document).ready(function(){
    $(":date").dateinput( { format: 'yyyy-mm-dd', min: 0 });
}); 
```

验证脚本始终将日期字段视为 null；即使我选择了一个值并且该值显示在输入字段中。它与具有必需属性的任何其他字段没有问题；只是日期范围。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:11:31.847

新的和改进的答案：尝试在dateinput 函数`$("form.validate").validator();` *之后运行。*我认为这应该可以解决问题。

老愚蠢的答案：尝试更改`$(":date").dateinput(...`为`$("input[name=delivery_due]").dateinput(...`

# android - 如何使用地图视图在谷歌地图上获取当前位置

> ID：10045754
> 
> 赞同：2
> 
> 时间：2012-04-06T15:41:10.870
> 
> 标签：android

我想知道如何使用地图视图获得我在谷歌地图上的当前位置。那是当我步行并从一个位置移动到另一个位置时，我在地图上的位置也会改变。它将通过 GPS 或网络提供商实现，但希望获得我适当的当前位置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T16:19:19.507

您必须实施位置侦听器以获取纬度和经度数据，使用这些值在谷歌地图上设置位置并使用标记来指示该位置

```
public class MyLocationListener implements LocationListener {
protected LocationManager lm;
public String message="Hello";
Location location;
private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; 
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000000; 
Context mContext;
public MyLocationListener(Context mContext) {
    // TODO Auto-generated constructor stub
    this.mContext = mContext;
    String context=Context.LOCATION_SERVICE;
    lm = (LocationManager)mContext.getSystemService(context);
    lm.requestLocationUpdates(LocationManager.PASSIVE_PROVIDER,MINIMUM_TIME_BETWEEN_UPDATES,MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,this);
}

  public void showCurrentLocation() 
  {

        location=lm.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);
       if (location != null) {
             message = String.format(
                    "Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude()
            );

           t1.setText(message);

      }

    }   

  public void onLocationChanged(Location location) 
  {
    /*  String message = String.format(
              "New Location \n Longitude: %1$s \n Latitude: %2$s",
              location.getLongitude(), location.getLatitude()
      );
      t1.setText(message);
    Toast.makeText(WinUirep.this,
              "Location Changed !",
              Toast.LENGTH_LONG).show();*/

  }

  public void onStatusChanged(String s, int i, Bundle b) 
  {

  }

  public void onProviderDisabled(String s) 
  {

  }

  public void onProviderEnabled(String s) 
  {

  }} 
```

location.getlatitude() 从网络提供商处获取纬度，经度也一样

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:46:46.957

我建议以下教程，它们将帮助您构建所需的内容：

[http://developer.android.com/resources/tutorials/views/hello-mapview.html](http://developer.android.com/resources/tutorials/views/hello-mapview.html) [http://www.vogella.de/articles/AndroidLocationAPI/article.html](http://www.vogella.de/articles/AndroidLocationAPI/article.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:18:01.853

使用 LocationListener 获取当前位置的纬度经度

```
public class MyLocationListener implements LocationListener{
    private Context context;

    public MyLocationListener (Context context){

            this.context = context;
            this.frequency = frequency;

            locationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);

            criteria = new Criteria();
            criteria.setAccuracy(Criteria.ACCURACY_COARSE);
            criteria.setAltitudeRequired(false);
            criteria.setCostAllowed(true);
            criteria.setSpeedRequired(false);
            criteria.setBearingRequired(false);
            criteria.setPowerRequirement(Criteria.POWER_HIGH);

            provider = locationManager.getBestProvider(criteria, true);

            location = locationManager.getLastKnownLocation(provider);

    }
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        // here you can get latitute and longitude and send to mapview to show the current location on map
            double latitute = location.getLatitude();
            double longitude = location.getLongitude();
        Toast.makeText(context, "lat,long:"+latitute+","+longitude, Toast.LENGTH_LONG);

    }

} 
```

看教程[点击这里阅读教程获取当前纬度和经度](http://www.firstdroid.com/2010/04/29/android-development-using-gps-to-get-current-location-2/)

[单击此处阅读如何在特定纬度和经度的地图上放置图标](http://android-coding.blogspot.in/2011/06/using-itemizedoverlay-to-add-marker-on.html)

# html - Internet Explorer：如何检测插件正在更新

> ID：10045757
> 
> 赞同：0
> 
> 时间：2012-04-06T15:41:19.960
> 
> 标签：html, internet-explorer, plugins, activex

我使用正确的“代码库”属性在网页中嵌入了一个 ActiveX 插件。会`'#Version=X,Y,Z'`定期更新。版本更新后，每个客户端都按预期下载新版本。

问题是插件很重（~10Mo）。

一旦 IE 检测到新版本，它就会自动触发更新，这需要一段时间。在下载过程中，`<object ../>`元素在 IE 上以经典的加载图片显示![在此处输入图像描述](../Images/7901e3149254d41108d19a5dcd0aca0f.png)

用户（不是超级用户）不知道服务器、插件或其他是否存在问题。IE 甚至不会在网页选项卡上显示加载图标。底部栏中只有一条消息说：'等待......'。

我怎么能至少显示一个文本来警告用户？有没有办法检测 IE 正在更新插件？

谢谢！

注意：在 IE7 和 8 下测试。但我猜 IE9 的行为相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T07:15:41.017

怎么样：创建一个并将警告消息添加到标签中。下载控件后，您可以隐藏标签并显示控件。

# c# - XNA：缩小纹理 2D 抗锯齿？

> ID：10045758
> 
> 赞同：6
> 
> 时间：2012-04-06T15:41:20.967
> 
> 标签：c#, xna, antialiasing, texture2d, xbox

我正在使用 XNA 中的一个项目，我正在使用一些相当大的纹理，我将它们作为 Texture2D 对象加载到游戏中，并且在屏幕上绘制比它们加载的要小得多。原因是我需要在不同的地方以各种不同的尺寸绘制它们，虽然我可以使用多种纹理来做到这一点，但这样做是不切实际的。

我的问题是 XNA 在缩小这些 Texture2D 对象时似乎没有抗锯齿。我已经设定：

```
graphics.PreferMultiSampling = true; 
```

并且

```
spriteBatch.Begin(SpriteBlendMode.AlphaBlend); 
```

但无济于事。我还尝试了各种涉及 GraphicsDevice 中的过滤器的事情，但老实说，我并不真正知道我在做什么。

显然，我使用 spriteBatch 来绘制它，但除此之外，我绘制它的方式并没有什么特别有趣的地方。

这是正在发生的事情的（放大的）示例，以及我正在努力实现的目标：

![实际结果](../Images/1dbbb1bb951810286fb2b64937acb140.png) ![期望的结果](../Images/fbb1c7107f08df689b5c76c60dfaedf2.png)

如您所见，XNA 在重新缩放图像时不提供任何抗锯齿功能。有没有办法强迫它这样做，以使边缘看起来更干净？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:49:55.980

你是在创建`graphics.PreferMultiSampling = true;`之前调用的吗？`GraphicsDevice`您必须在创建之前打开它，无论是在`Game`构造函数中还是在`Initialize()`.

# c# - C# - 动态创建 MenuStrip

> ID：10045762
> 
> 赞同：2
> 
> 时间：2012-04-06T15:41:41.153
> 
> 标签：c#, menustrip, toolstripitem

我正在创建一个带有标签的网络浏览器。要输入 URL，我正在尝试将 MenuStrip 设置 `ToolStripMenuItem`为文本框。我正在动态创建所有控件，我有 2 个问题。

1）。如何`ToolStripMenuItem`从代码中插入文本框？

（仅对于此屏幕截图，我在设计时添加了 MenuStrip）

![在此处输入图像描述](../Images/5ef439a3a7c7ec9752051f2bef243c65.png)

2）。我怎样才能改变它的宽度？

谢谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:49:41.717

您可以使用[ToolStripTextBox](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstriptextbox.aspx)

```
 toolStripTextBox1 = new System.Windows.Forms.ToolStripTextBox();
  toolStripTextBox1.Size = new System.Drawing.Size(100, 25);
  toolStrip1.Items.Add(toolStripTextBox1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T15:50:28.410

创建控件：

```
var textBox = new System.Windows.Forms.ToolStripTextBox(); 
```

设置一些属性：

```
textBox.Name = "someName";
textBox.Size = new System.Drawing.Size(300, 25); // width, height 
```

将其添加到`ToolStrip`：

```
toolStrip.Items.Add(textBox); 
```

# android - Android：以编程方式向 android 联系人添加生日事件

> ID：10045766
> 
> 赞同：0
> 
> 时间：2012-04-06T15:42:10.783
> 
> 标签：android, contactscontract, rawcontactid

我正在尝试将生日信息发送给联系人。我使用lookupkey 来识别我的联系人（因为它比仅仅依靠contactId 更安全）。为了能够将事件插入数据库，我需要一个 raw_contact_id ...所以我试图获取这个 id：

```
String where = ContactsContract.Data.LOOKUP_KEY + " = ? AND "
            + ContactsContract.Data.MIMETYPE + " = ?";
String[] params = new String[] { lookupKey,
            ContactsContract.CommonDataKinds.Event.CONTENT_ITEM_TYPE };

Cursor cursor = contentResolver.query(
            ContactsContract.Data.CONTENT_URI, null, where, params, null);
if (cursor.moveToFirst()) {
        birthdayRow = cursor.getInt(idIdx);
        long rawContactId = cursor.getLong(cursor
                .getColumnIndex(ContactsContract.Data.RAW_CONTACT_ID));
} 
```

问题是，如果没有为联系人设置生日事件，那么我收到的这个光标是空的......而且我不知道如何在没有 raw_contact_id 的情况下插入这个事件。为了插入事件，我执行以下操作：

```
values.put(ContactsContract.Data.RAW_CONTACT_ID, rawContactId);
values.put(ContactsContract.Data.MIMETYPE, Event.CONTENT_ITEM_TYPE);
values.put(ContactsContract.CommonDataKinds.Event.START_DATE,
birthdayStartDate);
values.put(ContactsContract.CommonDataKinds.Event.TYPE,
            ContactsContract.CommonDataKinds.Event.TYPE_BIRTHDAY);
values.put(ContactsContract.CommonDataKinds.Event.START_DATE,
            context.getString(R.string.birthday_label));
if (birthdayRow >= 0) {
        int result = contentResolver.update(
                ContactsContract.Data.CONTENT_URI, values,
                ContactsContract.Data._ID + " = " + birthdayRow, null);
        Log.i("ContactList", "update result: " + result);
} else {
        Uri result = contentResolver.insert(
                ContactsContract.Data.CONTENT_URI, values);
        Log.i("ContactList", "update result: " + result);
} 
```

所以请建议我该怎么做，有没有办法将此事件添加到 ContactData whitout a raw_contact id？我也觉得奇怪的是，对于其他 ContactData，如昵称，我正在做同样的事情，但我没有为 params String[] params = new String[] { String.valueOf(lookupKey), ContactsContract.CommonDataKinds.Nickname 得到一个空光标.CONTENT_ITEM_TYPE }; 即使联系人没有昵称。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:58:17.923

在执行插入之前使用它来获取原始联系人 ID。

```
 long rawContactId = -1; 
    String[] projection = new String[]{ContactsContract.CommonDataKinds.Event.RAW_CONTACT_ID}; 
    String selection = ContactsContract.CommonDataKinds.Event.CONTACT_ID + "=?";
    String[] selectionArgs = new String[]{
    String.valueOf(bdayContact.getId()) };
    Cursor c = getContentResolver().query(ContactsContract.Data.CONTENT_URI, projection, selection, selectionArgs, null); 
    try { 
        if (c.moveToFirst()) { 
             rawContactId = c.getLong(0); 
        } 
    } finally { 
        c.close(); 
    } 
```

# arrays - 使用 Mustache.Js 渲染简单数组

> ID：10045768
> 
> 赞同：28
> 
> 时间：2012-04-06T15:42:12.590
> 
> 标签：arrays, mustache

有一个像下面这样的数组

`var arrNames = ["Stackoverflow","StackExchange","Webmaster","Programmers"];`

模板应该如何使用 mustache.js javascript 模板。我在下面试过但没有线索

*   `{{#}}{{key}}{{/}}`

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-04-07T16:57:40.150

从[文档](https://github.com/janl/mustache.js/)中：

> 当循环一个字符串数组时，一个 . 可用于引用列表中的当前项目。
> 
> 模板：
> 
> > {{#musketeers}} * {{.}} {{/musketeers}}
> 
> 看法：
> 
> > {“火枪手”：[“阿托斯”，“阿拉米斯”，“波尔托斯”，“达达尼昂”]}
> 
> 输出：
> 
> > *   阿托斯
> > *   阿拉米斯
> > *   波尔托斯
> > *   达达尼昂

```
var tpl = document.getElementById('simple').innerHTML,
  view = {
    items: ['Stackoverflow', 'StackExchange', 'Webmaster', 'Programmers']
  };

document.getElementById('output').innerHTML = Mustache.to_html(tpl, view);
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.js"></script>
<script type="template" id="simple">
  <h1>Array Values</h1>
  <ul>
    {{#items}}
    <li>{{.}}</li>
    {{/items}}
  </ul>
</script>

<div id="output"></div>
```

# objective-c - 创建朋友属性的正确方法

> ID：10045778
> 
> 赞同：0
> 
> 时间：2012-04-06T15:43:13.093
> 
> 标签：objective-c, ios, xcode

全部-

在 Obj-C 中定义朋友属性的正确方法是什么（具体实现是 Xcode for IOS）。我所说的友元属性是指对基类、该基类的任何子类可用但对公众不可用的实例属性。

例子：

```
@interface Base : NSObject
@property int friend
@end

@interface Sub : Base
@end

@implementation Base
@synthesize friend;
@end

@implementation Sub
-(id)newFriend
{
[self setFriend: [someOtherObject friend]];  // this should be allowed
}

@implementation Wow
-(void)
{
Sub* sub = [[Sub alloc] init];
[sub setFriend: [someOtherObject friend]];  // this should not be allowed
} 
```

我尝试将 Base 的 @property 朋友放在 .m 文件中，但随后 Sub 看不到它。

在 c++ 中，我有一个名为friend 的辅助声明器，它完全符合我的要求。如何在 Obj-C 中做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T15:54:33.377

在 Objective-C 中没有办法强制执行这种行为。属性只是 Objective-C 对象上的 getter 和 setter 方法，任何人都可以调用这些方法。

您可以控制的一件事是可见性。我过去模拟受保护属性的方式是仅在`Base.h`. 然后创建另一个名为 的头文件`Base+protected.h`，其中包含具有声明属性的类扩展。

```
// Base.h

@interface Base : NSObject

@end

// Base+protected.h

#import "Base.h"

@interface Base ()

@property int friend;

@end

// Base.m

#import "Base.h"
#import "Base+protected.h"

@implementation Base

@synthesize friend;

@end

// Sub.h

#import "Base.h"

@interface Sub : Base

@end

// Sub.m

#import "Base+protected.h"

@implementation Sub

@end 
```

所以 Sub 实现可以看到受保护的属性，但任何外部类只有`#include`s`Base.h`或`Sub.h`，所以看不到它们。

# asp.net-mvc - 每次创建一个会话的最佳方法是什么？（ASP.NET，MVC）

> ID：10045782
> 
> 赞同：0
> 
> 时间：2012-04-06T15:43:42.713
> 
> 标签：asp.net-mvc, session

每次创建一个会话的最佳方法是什么？例如，如果用户从一个 IP 和浏览器登录，则不应在某一时刻从其他地方登录。也许存在一些标准解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:51:17.833

由于网络使用断开连接的模型，因此没有万无一失的方法来确定用户是否真正在线。使用标准 ASP.NET 成员资格，您可以使用[MembershipUser 对象的 IsOnline 属性，](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.isonline.aspx)如果值为 ，则阻止用户登录`true`。但是，您可能需要通过 IP 地址确定传入请求是来自不同位置的第二个用户，还是来自会话超时但仍然具有`IsOnline == true`.

如果您采用这种方法，您可能不得不忍受一定数量的误报。

# iphone - iOS 共享对话框？

> ID：10045783
> 
> 赞同：1
> 
> 时间：2012-04-06T15:43:45.350
> 
> 标签：iphone, ios, ipad

我很好奇，您在许多 iOS 应用程序中看到的标准“共享”对话框是标准 SDK 对话框，还是每个人都只是模仿 Apple 为其应用程序（如 Safari）创建的对话框？或者也许每个人都在使用 ShareKit？

例如，在 iPhone 上，你会得到一个不错的 3/4 模态对话框，它具有垂直封面外观，包含一堆闪亮的按钮：

![iPhone 共享对话框](../Images/149fbd31c61109a0c3be874ff64f12dc.png)

在 iPad 上，您会看到“语音气泡”类型的对话框出现：

![iPad 共享对话框](../Images/fab1c8cfb24eed888bfe0d74078e433f.png)

这在应用程序中似乎太标准了，不能只是巧合/人们扯掉了外观和感觉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:51:10.950

您在这种特定情况下出现的情况是由于在 iPad 上，UIActionSheet 始终显示在弹出框控制器中，而在 iPhone 上，它显示如您的示例中一样，没有弹出框控制器（仅在 iPad 上可用)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T16:01:57.070

我已经使用 Facebook 的 SDK 和 iOS5 Twitter 集成编写了我自己的共享代码，所以我从未使用过它，但我相信你可以使用一个名为 ShareKit 的库，它可以创建你想要的操作表和共享功能. “最新”/“2.0”（我相信原来的不再维护）版本在这里可用： [https ://github.com/ShareKit/ShareKit](https://github.com/ShareKit/ShareKit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-06T15:47:08.940

Apple 提供了制作 UI 对象的工具。您正在查看的是“UIActionSheet”。开发人员可以将方法绑定到操作表的点击事件。

Apple 鼓励开发人员保持一致的 UI，以使用户更容易使用。

查看 Apple 人机界面指南。

[关联](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AppleHIGuidelines/Intro/Intro.html)

# jquery - jQuery.load() 如何影响 Google Analytics 中的页面加载？

> ID：10045786
> 
> 赞同：0
> 
> 时间：2012-04-06T15:44:05.177
> 
> 标签：jquery, pageload, page-load-time

我很想知道 jQuery.load 功能在向 Google Analytics 报告时如何影响页面加载速度？该加载时间（应该在整个页面加载完成后加载外部脚本）是否算作返回母舰时的实际页面加载时间？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T08:10:51.147

您在哪里调用负载，例如 .ready，响应点击等？

这是一篇关于 GA 如何测量页面加载时间机制的好文章 - [_gaq.push(['_trackPageLoadTime']) 如何工作？](https://stackoverflow.com/questions/6166074/how-does-gaq-push-trackpageloadtime-work)

基本上直到加载事件触发，之后的任何事情都不是计数。

# ruby-on-rails-3 - Rails - ActsAsTaggableOn gem - 标记更多模型？

> ID：10045787
> 
> 赞同：1
> 
> 时间：2012-04-06T15:44:05.493
> 
> 标签：ruby-on-rails-3, model, acts-as-taggable-on

我正在玩很棒的[ActsAsTaggableOn](https://github.com/mbleigh/acts-as-taggable-on) gem，现在我面临一个问题，如何在一个应用程序中拥有多个`tagged`“系统”。

例如，目前我正在为我的文章使用已经标记 - 我按照 GitHub 上的教程进行操作，gem 创建了表**taggings**和**tags**。

如何为照片添加标签（我想为照片标签提供单独的表格）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T16:04:56.883

gem 确实不支持不同类型的可标记对象上的标签的单独表，但我真的没有理由这样做。它有一个 taggings 表和一个 tags 表，但是 taggings 是多态的，所以你需要做的就是添加`acts_as_taggable`到你的 Photo 类中。

如果您只需要获取有关一种类型的标记的一些信息，您可以向相关查询添加一些条件 -`.where('taggings.taggable_type = ?', 'Photo')`或类似的。

# python - Cx_Freeze 可执行文件不适用于 pygame

> ID：10045791
> 
> 赞同：1
> 
> 时间：2012-04-06T15:44:14.770
> 
> 标签：python, python-3.x, tkinter, pygame, cx-freeze

我在使用 cx_freeze 为我的 python 程序创建可执行文件时遇到了问题。我在 Windows (XP) 上，我的程序使用 Tkinter、Pygame（和随机）并用 python 3.2 编码。我尝试创建一个 distils**并**从命令提示符运行：

```
cxfreeze --target-dir dist 
```

在这两个我得到这个错误：

```
 Traceback (most recent call last):
  File "C:\Python32\lib\site-packages\pygame\__init__.py", line 117, in <module>

    try: import pygame.display
  File "ExtensionLoader_pygame_display.py", line 12, in <module>
  File "ExtensionLoader_pygame_surface.py", line 12, in <module>
ImportError: No module named _view

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Python32\lib\site-packages\cx_Freeze\initscripts\Console3.py", line 2
7, in <module>
    exec(code, m.__dict__)
  File "BallGame.pyw", line 1, in <module>
  File "C:\Python32\lib\site-packages\pygame\__init__.py", line 118, in <module>

    except (ImportError,IOError):display=MissingModule("display", geterror(), 1)

  File "C:\Python32\lib\site-packages\pygame\__init__.py", line 61, in __init__
    self.warn()
  File "C:\Python32\lib\site-packages\pygame\__init__.py", line 85, in warn
    warnings.warn(message, RuntimeWarning, level)
  File "C:\Python32\lib\warnings.py", line 18, in showwarning
    file.write(formatwarning(message, category, filename, lineno, line))
  File "C:\Python32\lib\warnings.py", line 25, in formatwarning
    line = linecache.getline(filename, lineno) if line is None else line
  File "C:\Python32\lib\linecache.py", line 15, in getline
    lines = getlines(filename, module_globals)
  File "C:\Python32\lib\linecache.py", line 41, in getlines
    return updatecache(filename, module_globals)
  File "C:\Python32\lib\linecache.py", line 127, in updatecache
    lines = fp.readlines()
  File "C:\Python32\lib\codecs.py", line 300, in decode
    (result, consumed) = self._buffer_decode(data, self.errors, final)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x90 in position 2: invalid s
tart byte 
```

请你告诉我如何修复它，或者推荐一个不同的软件来将我的 python 脚本变成可执行文件。任何帮助是极大的赞赏。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:01:50.940

您需要`import pygame._view`在脚本的开头运行。

# javascript - Socket.IO 服务器-服务器通信

> ID：10045795
> 
> 赞同：1
> 
> 时间：2012-04-06T15:44:42.320
> 
> 标签：javascript, node.js, tcp, socket.io

我们正在使用 Socket.IO 将实时统计信息传递给连接的浏览器；然而，由于我们正在构建的系统架构，我们希望允许浏览器和***其他 nodejs 服务器***通过 Socket.IO 订阅统计信息。我是否可以创建类似于自定义传输的东西，以便通过 TCP 与另一个订阅的 Socket.IO 服务器进行通信？

我们希望继续使用 Socket.IO 对频道和订阅的内置支持，但通过节点提供服务器-服务器。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:42:07.527

我还在 Socket.IO 的[GitHub 问题页面](https://github.com/LearnBoost/socket.io/issues/818)上发帖并在那里得到了答案。看起来我将使用[Hook.IO](https://github.com/hookio/hook.io)来做我需要的事情。

谢谢！

# ios - 将团队成员添加到个人开发者帐户

> ID：10045797
> 
> 赞同：5
> 
> 时间：2012-04-06T15:44:45.807
> 
> 标签：ios, iphone-developer-program

是否可以将团队成员添加到个人开发者帐户？文档说公司开发者帐户是可能的；您可以将个人转换为公司开发者帐户吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-06T16:07:44.143

您可以将个人帐户转换为公司帐户。它确实要求您拥有注册的公司名称，并且需要大约一周的时间才能获得苹果的批准。个人账户的团队规模为 1 - 你。

# c#-4.0 - StructureMap 实例工厂方法

> ID：10045800
> 
> 赞同：3
> 
> 时间：2012-04-06T15:45:26.197
> 
> 标签：c#-4.0, structuremap, factory-method, open-generics

我正在尝试注册一个工厂方法来创建开放泛型类型的实例`MongoCollection<>`。但是，当我`GetInstance`看起来它使用的是 MongoCollection 的构造函数而不是工厂方法时。

```
var mongo = new MongoConfiguration("mongodb://localhost", "test");
For(typeof (MongoCollection<>)).Use(c =>
{
    var requestedType = c.BuildStack.Current.RequestedType; // set breakpoint here
    var type = requestedType.GetGenericArguments()[0];
    return mongo.GetCollection(type);
}); 
```

然后我做

```
ObjectFactory.GetInstance<MongoCollection<User>>(); 
```

当我运行该`GetInstance`行时，它永远不会在工厂方法中遇到断点，但它会抛出一个`StructureMapException`说法“没有为 PluginFamily MongoDb.Driver.MongoServerSettings 定义默认实例”。有一个构造函数`MongoCollection`需要 a `MongoServerSettings`，但我不希望结构映射使用该构造函数，我希望它使用我的工厂方法。

任何想法为什么它不使用工厂方法？这是一个错误吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T20:42:52.040

我分叉存储库以浏览代码并意识到它绝对是一个错误。我修复了这个错误并发送[了一个拉取请求](https://github.com/structuremap/structuremap/pull/34)，希望它会很快被合并和发布。

# reporting-services - 如何在 RDLC 中使用变量

> ID：10045803
> 
> 赞同：2
> 
> 时间：2012-04-06T15:45:45.163
> 
> 标签：reporting-services, bids

我是 C# 的新手，我想知道我是否可以在 RDLC 中使用变量？？如果我可以使用，请告诉我如何使用它。我的意思是将值分配给变量..或类似的东西..

我有购买和付款表。在我的报告中，我需要从这两个表中绘制特定列，例如，

```
 [PurchaseNo]  [PaymentDate]  [PurchaseAmount]   [PaymentAmount]

     c1          12/3/2012       1000               200
                 12/4/2012       1000               500
   -------------------------------------------------------------------
     SubTotal                    1000               700
   --------------------------------------------------------------------

     c2          12/3/2012       900               300
                 12/4/2012       900               500
   -------------------------------------------------------------------
     SubTotal                    900               800
   --------------------------------------------------------------------

     Total                       1900              1500 
```

UI 就是这样.. 但是当我创建 RDLC 并运行它时..

```
 [PurchaseNo]  [PaymentDate]  [PurchaseAmount]   [PaymentAmount]

     c1          12/3/2012       1000               200
                 12/4/2012       1000               500
   -------------------------------------------------------------------
     SubTotal                    2000               700
   --------------------------------------------------------------------

     c2          12/3/2012       900                300
                 12/4/2012       900                500
   -------------------------------------------------------------------
     SubTotal                    1800               800
   --------------------------------------------------------------------

     Total                       3800               1500 
```

这就是我现在遇到的问题..我不知道要添加 PurchaseAmount 和 Payment can't be paid in one day..所以我认为我将在 RDLC 和 RDLC 中创建一个变量，我'将使用 IIf 函数检查 PurchaseNo 是否相等。如果相等，我将避免添加 PurchaseAmount.. 并存储在变量中。或者有什么方法请告诉我！

有谁知道，请帮助我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T22:38:57.060

我相信如果您`PurchaseAmount`与“PurchaseNo”一起分组，您可以实现以下目标：

```
[PurchaseNo]  [PurchaseAmount] [PaymentDate]   [PaymentAmount]

   c1              $1,000.00     12/3/2012           $200.00
                                 12/4/2012           $500.00
 -------------------------------------------------------------------
   SubTotal        $1,000.00             2           $700.00
 --------------------------------------------------------------------

   c2                $900.00     12/3/2012           $300.00
                                 12/4/2012           $500.00
 -------------------------------------------------------------------
   SubTotal          $900.00             2           $800.00
 --------------------------------------------------------------------

   Total           $1,900.00             4         $1,500.00 
```

# javascript - 字符串中的javascript空值

> ID：10045805
> 
> 赞同：7
> 
> 时间：2012-04-06T15:45:54.213
> 
> 标签：javascript

在javascript中，我有以下内容：

```
var inf = id + '|' + city ; 
```

如果 id 或 city 为 null，则 inf 将为 null。

如果 id 或 city 为空，是否有任何巧妙的方式表示然后为空。

我知道在 c# 中您可以执行以下操作：

```
var inf = (id ?? "") + (city ?? ""); 
```

javascript中有类似的方法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-06T15:48:22.590

怎么样：

```
var inf = [id, city].join('|'); 
```

编辑：您可以在加入之前删除“空白”部分，这样如果 id 和 city 中只有一个为空，则 inf 将只包含该部分，如果两者都为空，则 inf 将为空。

```
var inf = _([id, city]).compact().join('|'); // underscore.js
var inf = [id, city].compact().join('|'); // sugar.js
var inf = [id, city].filter(function(str) { return str; }).join('|'); // without helpers 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-06T15:47:13.090

总的远射，但试试这个：

```
var inf = (id || "") + "|" + (city || ""); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-06T15:52:39.797

```
var inf = (id == null ? '' : id) + '|' + (city == null ? '' : city) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-25T10:36:37.033

```
function nullToStr(str) {
    return !str || 0 === str.length ? '' : str;
} 
```

用法：

```
console.log(nullToStr(null); 
```

```
 function nullToStr(str) {
    return !str || 0 === str.length ? '' : str;
}

console.log(`The value which was null = ${nullToStr(null)}`);
console.log(`The value which was null = ${nullToStr(undefined)}`);
console.log(`The value which was null = ${nullToStr('')}`);
console.log(`The value which was null = ${nullToStr('asdasd')}`);
```

我认为它会有所帮助并且更容易使用。显然，它基于我在这个线程中找到的其他答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T15:57:58.137

```
var inf = (id && city) ? (id+"|"+city) : ""; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-06T16:51:43.783

等效于 c# `var inf = (id ?? "") + (city ?? "");`（如果`id`和`city`可以为空）是

```
var inf = (id || '') + (city || ''); 
```

这被称为“[短路评估](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Logical_Operators)”。可空性在 javascript 中不是问题（在 js 中，所有变量都可以为空），但`id`必须`city`分配（但不需要值，如`var id, city`）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-06T16:52:01.670

```
if (id != ""){
inf = id;
if (city != ""){ inf += " | " + city ;}
}
else 
inf= city; 
```

# android - 获取 gps 位置时出错

> ID：10045809
> 
> 赞同：0
> 
> 时间：2012-04-06T15:46:10.073
> 
> 标签：android, timer, gps, aidl

我正在开发一个与手机上的三个远程服务通信的应用程序。对于沟通，我试图找出哪种方法是最好的（意图或 AIDL）。我通过蓝牙以 4 个流/秒的速率接收一个流，每个流 15 个字节，现在我想添加我的 gps 位置以执行数据记录。我每秒都需要我的 gps 位置。由于 requestLocationUpdates 中的时间只是一个提示，我创建了一个计时器，它每秒询问最后一个已知位置。

不幸的是，当我尝试使用 AIDL 进行通信时，我遇到了无法修复的错误。奇怪的是，当我使用意图将接收到的数据传递给远程服务时，一切正常。

谁能帮我吗 ？

这是我的代码：

```
 private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 0; //meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; //in Milliseconds
    private final MyLocationListener listener;
    private final LocationManager mLocationManager;
    private final List<String> providers;

    public Parser() {
         mLocationManager = (LocationManager) context.getSystemService(Context.LOCATION_SERVICE);
         listener = new MyLocationListener();
         listener.onProviderEnabled(LocationManager.GPS_PROVIDER);
         mLocationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 
                MINIMUM_TIME_BETWEEN_UPDATES, 
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES, 
                listener);
         providers = mLocationManager.getProviders(true);
         timer = new Timer();
    }

    public boolean parse(byte[] data) {
         gpsUpdater();
         ...
    }

    private void gpsUpdater() {
        timer.scheduleAtFixedRate(new TimerTask() {
            Location l = null;

            @Override
            public void run() {
                for(String s: providers) {
                    l = mLocationManager.getLastKnownLocation(s);
                    if(l != null) {
                        gps = true;
                        latitude = l.getLatitude();
                        longitude = l.getLongitude();
                    }
                }
            }
       }, 0, MINIMUM_TIME_BETWEEN_UPDATES);
   }

   public class MyLocationListener implements LocationListener {

    @Override
    public void onLocationChanged(Location arg0) {
        //TODO Auto-generated method stub
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

这是我得到的错误：

> 04-06 15:06:43.015: E/AndroidRuntime(844): 致命异常: Timer-0 04-06 15:06:43.015: E/AndroidRuntime(844): java.lang.SecurityException: Binder 调用不正确的接口04-06 15:06:43.015: E/AndroidRuntime(844): 在 android.os.Parcel.readException(Parcel.java:1322) 04-06 15:06:43.015: E/AndroidRuntime(844): 在 android. os.Parcel.readException(Parcel.java:1276) 04-06 15:06:43.015: E/AndroidRuntime(844): 在 android.location.ILocationManager$Stub$Proxy.getLastKnownLocation(ILocationManager.java:896) 04-06 15:06:43.015: E/AndroidRuntime(844): 在 android.location.LocationManager.getLastKnownLocation(LocationManager.java:1020) 04-06 15:06:43.015: E/AndroidRuntime(844): 在 pt.ua.droidshark .handler.Parser$1.run(Parser.java:446) 04-06 15:06:43.015: E/AndroidRuntime(844): 在 java.util.Timer$TimerImpl.run(Timer.java:284)

是不是，位置管理器使用一种aidl 为我的应用程序提供位置，而当所有通信都使用 AIDL 进行时，手机无法处理如此多的信息？我不明白为什么当我使用意图时它工作正常，而当我使用 AIDL 时总是出现这个错误。

PS：由于有人建议原因可能是计时器不在服务或活动类中，因此我创建了一个服务，在该服务中我执行代码并且遇到了同样的情况。当所有通信都使用意图进行并在使用 AIDL 时出现错误时工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:04:42.173

我认为你`timer.scheduleAtFixedRate()`在一个不是活动或服务的类中实现了一个循环任务（）。这可能是原因

1）要么你在一个保持活动状态的活动中实现监听器，所以位置会根据设置的参数更新`requestLocationUpdates()`，但这会使 gps 保持开启并消耗电池

2）您在您的活动中设置了一个计时器，并使用带有回调的实现从您的活动中轮询位置（请参阅此示例：[在Android上获取用户当前位置的最简单和最可靠的方法是什么？](https://stackoverflow.com/questions/3145089/what-is-the-simplest-and-most-robust-way-to-get-the-users-current-location-in-a)）

3）您可以实现一项服务，Commonsware 提供的这个组件可以为您完成这项工作：[https ://github.com/commonsguy/cwac-locpoll](https://github.com/commonsguy/cwac-locpoll)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:04:43.803

确保您已为`AndroidManifest.xml`文件添加了正确的权限。

它包括这个标签吗？

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" /> 
```

# php - php交互式图表动态表单

> ID：10045811
> 
> 赞同：0
> 
> 时间：2012-04-06T15:46:13.540
> 
> 标签：php, charts

我对 PHP 非常缺乏经验，我正在寻找最快最简单的方法来创建一个接受用户输入并根据输入吐出两个图表的表单。

1.  请输入金额：（用户输入金额）
2.  （用户点击计算按钮）
3.  该脚本应根据用户输入生成两个 Excel 样式的图表，图表 1 是一个条形图，输入在 Y 轴上，沿 X 轴预设百分比值。图表 2 应该是具有类似输入和百分比的折线图.

无论用户输入什么，图表都应该看起来相同，只是 X 值发生了变化。我已经查看了开源 PHP 图表库，但我不确定如何添加用户输入功能。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T17:18:21.123

对于表单，请尝试以下操作：

```
<html>
  <body>
    <form action="chart.php" method="post">
      Name: <input type="text" name="amount" />
      <input type="submit" />
    </form>
  </body>
</html> 
```

在chart.php中：

```
$amount = intval($_POST['amount']);
include('chart_library.php');
show_graph($amount); 
```

如果您在 Google 上搜索`php chart library`，您可以找到各种可以显示图表的库。[JpGraph 就是一个例子。](http://jpgraph.net)

# php - 如何获取此特定案例的记录？

> ID：10045812
> 
> 赞同：0
> 
> 时间：2012-04-06T15:46:14.847
> 
> 标签：php, mysql, database, join

我有三张桌子

```
Person (id, name, email)
Address (id, Person_id, address, verified)
Person_Claimed (id, Person_id, name, email) 
```

我们手动在 Person 和 Address 表中添加记录。当有人在网上看到他/她的个人资料时，他/她认领了他/她的资料，并在 Person_Claimed 表中创建了一个条目。

现在我想获取那些没有声称他们的个人资料并且他们的地址也没有得到验证的人的记录。

如何加入这些表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:50:46.240

假设`verified`不为空且 0 表示“未验证”

```
SELECT p.*
FROM Person p
INNER JOIN Address a ON (a.Person_id = p.id )
LEFT JOIN Person_Claimed pc ON (pc.Person_id = p.id)
WHERE a.verified =0 AND pc.id IS NULL 
```

如果一个人可以有多个未验证的地址，您可能需要添加`GROUP BY p.id` （或`SELECT DISTINCT`代替`SELECT`

# java - android中带有detailview的Listview

> ID：10045815
> 
> 赞同：0
> 
> 时间：2012-04-06T15:46:33.747
> 
> 标签：java, android

帮助！！

我有一个带有详细视图的列表适配器，我遇到的问题是试图将值从 xml 文件传递​​到第二个视图。我目前可以这样做，但前提是我在第一个视图中显示这些值。我想要实现的是在 firstview 上只有一个标题，当您单击该标题时，它会将您带到详细视图，其中包含有关它的更多信息。

这是我目前拥有的代码。

```
ListAdapter adapter = new SimpleAdapter(this, menuItems,
            R.layout.list_item,
            new String[] { KEY_USERADDRESS, KEY_DATEDUE}, new int[] {
                    R.id.name, R.id.cost });
    setListAdapter(adapter);

    // selecting single ListView item
    ListView lv = getListView();

    lv.setOnItemClickListener(new OnItemClickListener() {

        //@Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            // getting values from selected ListItem
        //  String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
            String cost = ((TextView)view.findViewById(R.id.cost)).getText().toString();
        //  String description = ((TextView) view.findViewById(R.id.desciption)).getText().toString();

            // Starting new intent
            Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
            //in.putExtra(KEY_USERADDRESS, name);
            in.putExtra(KEY_DATEDUE, cost);
            //in.putExtra(KEY_DESC, description);
            startActivity(in);

        }
    });
} 
```

如您所见，我有一个列表适配器，我只想在第一个视图上显示 KEY_USERADDRESS 的内容，当他们单击它时，将显示其余部分。如果我将其余的 Textviews 添加到 listadapter 它会使 textviews 变大。

对不起，如果我有点困惑，我在 android 开发方面仍然是一个菜鸟。

任何帮助将不胜感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:01:04.577

假设您的数据存储在 menuItems Map 对象中，那么在您的 onItemClick() 中如何处理：

```
public void onItemClick(AdapterView<?> parent, View view,
            int position, long id) {
    //Your code here..
    Map<String, String> myValueMap = menuItems.get(position);

    // Starting new intent
    Intent in = new Intent(getApplicationContext(), SingleMenuItemActivity.class);
    in.putExtra(KEY_USERADDRESS, myValueMap.get(KEY_USERADDRESS));
    in.putExtra(KEY_DATEDUE, myValueMap.get(KEY_DATEDUE));
    in.putExtra(KEY_DESC, myValueMap.get(KEY_DESC));
    startActivity(in);
} 
```

onItemClick 中的位置参数可用于从您使用创建 SimpleAdapter 来填充 ListView 的 menuItems 中获取所选地图

# blackberry - BBM 集成，在检查 BBM 版本检查器时

> ID：10045825
> 
> 赞同：0
> 
> 时间：2012-04-06T15:47:31.857
> 
> 标签：blackberry

我尝试通过我的应用程序调用 BBM 客户端。我使用 BBM sdk 1.3，它在包含 BBM 6.1 版的设备上运行良好。所以为了在其他 BBM 版本上工作，我使用了文档中给出的 BBM 版本检查器。我跟着文档中提到的所有步骤，都制作了核心项目和代理项目..但是当我在模拟器中运行代理项目时它不起作用..

还有一件事，即使它有效，那么我如何打包这两个项目并将其安装在我的设备上..

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:47:59.500

打包这两个应用程序：-

1.  签署他们。
2.  将 .cod 文件复制到一个文件夹中
3.  将其上传到 App Store。

# c++ - C++ 中的继承和模板

> ID：10045827
> 
> 赞同：2
> 
> 时间：2012-04-06T15:47:37.837
> 
> 标签：c++, templates, inheritance

我对继承和模板有以下问题：

```
class Base {};
class Deriv : public Base {};

template <class T> class X{};

void f(X<Base>& inst) {}

int main()
{
  X<Base> xb;
  f(xb);
  X<Deriv> xd;
  f(xd);
  return 0;
} 
```

`X<Base>`该程序无法编译，因为和之间没有关系`X<Deriv>`。尽管如此，我认为应该可以`X<Base>`用`X<Deriv>`. 除了将函数体复制`f`到新函数之外，我还能做些`void g(X<Deriv>& inst)`什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:52:35.147

您可以继续使用模板：

```
template<class T>
void f(X<T>& inst) {} 
```

将适用于`X<Base>`和`X<Derived>`。

编译器*可能会*复制代码（如果它不够聪明），但您不必这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:51:07.970

为什么你认为它们应该是相关的？考虑以下：

```
template<typename T>
class X;

template<>
class X<Base> {
    int x;
};

template<>
class X<Deriv> {
    double d;
}; 
```

它们绝对不能互换。所以不，这些类之间没有关系，你不能将一个传递给期望另一个的函数。你必须做一些事情，比如让这两种类型都继承自另一个公开你需要的接口的通用类型。

* * *

关于您的评论，您可以使用类型特征并`static_assert`执行您在 Java 中会执行的操作：

```
template<typename T>
void f(X<T>& inst) {
    static_assert(std::is_base_of(Base, T)::value, "Template type must subclass Base");

    // body of function...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:50:02.077

如果您需要这样的功能，那么您必须在类型或重载上进行模板化，正如您所说。或者，您可以明确地专门化`X`这样的`X<Derived> : X<Base>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T15:54:58.697

这取决于。`X`考虑is的情况`std::shared_ptr`。`std::shared_ptr<Derived>`如果从 派生，它将破坏类型安全`std::shared_ptr<Base>`，但存在隐式值转换。

However, since you’re passing by reference to non-`const`, such a value conversion will not help you you directly.

Other possibilities include inheriting from a common interface, and templating your function.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T15:56:46.343

Different instantiations of a template are unrelated types, even if the instantiating template arguments are related. That is, `X<A>` is not related to `X<B>` regardless of what the relationship between `A` and `B` might be.

Now as of what can be done, it depends on what your template actually is. In some cases you can provide conversions so that the `X<Derived>` can be converted to a `X<Base>` for a particular operation. Another alternative is modifying your function to be able to take any `X<T>` for which `T` derives from `Base` (this can be done by creating a template and using SFINAE to disallow calling it with `T`s that don't derive from `Base`. Again, depending on what your template is, you might be able to offer access to the underlying type, in which case the function could take a reference to `Base` (consider `shared_ptr` or `unique_ptr` with the `.get()` method)

Without a description of what you actually want to get done it is impossible to provide a good alternative.

# c - 将数组传递给c中的函数

> ID：10045830
> 
> 赞同：4
> 
> 时间：2012-04-06T15:48:06.627
> 
> 标签：c, arrays, function, prototype

编译代码时出现 gcc 错误。错误是关于“传递 'print_path' 的参数 1 使指针从整数而不进行强制转换”。

这是我的函数原型：

```
void print_path(int previous[], int desired_node_index); 
```

这是我的功能：

```
void print_path(int previous[], int desired_node_index)
{
    if( previous[desired_node_index] != -1 )
        print_path( previous[desired_node_index] );
    printf("-> %d ", previous[desired_node_index]);
} 
```

这里是我调用我的函数的地方：

```
print_path(previous, dest_index); 
```

我显然是错误地传递了它，否则我在如何将数组传递给函数方面做错了。有什么帮助吗？

多谢你们！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T15:56:45.610

这显然是一个递归函数。请注意，它`print_path()`需要 2 个参数：第一个是**int**数组，第二个是该数组内某个位置的索引。

调用它：

```
print_path( previous[desired_node_index] ); 
```

是绝对错误的（除非你重载了这个函数），因为它需要 2 个参数，而你只传递了一个。你应该做的是：

```
print_path( previous, desired_node_index ); 
```

您在此函数中似乎缺少的是增加/减少索引变量的操作，否则您将始终在数组中打印相同的位置。

在不知道您到底想要做什么的情况下，您可能想要这样做：

```
print_path( previous, previous[desired_node_index] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T11:56:49.210

在这里我做了一些修改。数组 temp_arr2[] 是一个缓冲区数组。在我的实际程序中，我从 main() 打印了数组。在这里，为了做同样的事情，需要将一些计算的最终结果存储回 temp_arr[].MAX 可以是宏或全局变量。在上一个中，我只是忘记编辑以下行： temp_arr[i]=temp_arr[i]+1; （我的演示示例代码）:)

```
void receive_array(int *temp_arr)
  {
      int i=0;
      int temp_arr2[MAX];

  do
  {
     temp_arr2[i]=temp_arr[i];
     i++;
  }
  while((char)temp_arr[i]!='\0');

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T11:32:20.213

如果您想将数组传递给函数并在更改函数中的元素后返回，您可以看到以下示例：

您可以在以下位置找到解决方案：[https ://github.com/krishnabhat81/Send-and-return-array-from-function-in-C](https://github.com/krishnabhat81/Send-and-return-array-from-function-in-C)

```
#include <stdio.h>

/*
If you want to return a single-dimension array from a function, you would have to 
declare a function returning a pointer as in the following example:
*/

int *getRandom(int arr[])
{
  static int  r[10];
  /*Second point to remember is that C does not advocate to return the address of a 
  local variable to outside of the function so you would have to define the 
  local variable as static variable.*/
  int i;

  for ( i = 0; i < 10; ++i)
  {
     r[i] = arr[i]+1;//rand();
     printf( "r[%d] = %d\n", i, r[i]);

  }

  return r;
}

/* main function to call above defined function */
int main ()
{
   /* a pointer to an int */
   int *p;
   int i;
   int arris[10] = {110,22,33,44,5,6,7,8,9,20};

   p = getRandom(arris);
   for ( i = 0; i < 10; i++ )
   {
       printf( "*(p + %d) : %d\n", i, *(p + i));
   }

   return 0;
}

   return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T17:29:54.583

一个明显的错误是：

> print_path（以前的[desired_node_index]）；

我不确定你想要做什么，但我想你想要这样的东西：

```
#include <stdio.h>

void print_path(int *previous, int desired_node_index);

int main(void) {

    int dest_index = 2;
    int previous[5] = { -1, 0, 1, 2, 3};

    print_path(previous, dest_index);

    return 0;
}

void print_path(int *previous, int desired_node_index) {
    if( previous[desired_node_index] != -1 )
        print_path( previous, previous[desired_node_index]);
    printf("-> %d ", previous[desired_node_index]);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-19T10:09:51.587

```
void receive_array(int *temp_arr)
{
      int i=0;

      do
      {
         temp_arr[i]=temp_arr[i]+1;
         i++;
      }
      while((char)temp_arr[i]!='\0');

} 
```

# objective-c - 非游戏开发者的基于物理的动画

> ID：10045834
> 
> 赞同：0
> 
> 时间：2012-04-06T15:48:15.940
> 
> 标签：objective-c, cocos2d-iphone, chipmunk

我曾使用 Objective-C 和 XCode 开发过几个 iOS 应用程序。我的大多数应用程序都是儿童互动书籍，完全用 Objective-C 编写，所有互动动画都是基于 UIView 的。在我的下一本书中，我想添加一些基于物理的动画。我最好的选择是什么？我从未在 Cocos2D 上工作过，也从未使用过任何其他基于物理的动画引擎。我最近开始阅读基于 Chipmunk 物理的动画引擎。我应该使用 Chipmunk 和 Objective-C 来实现基于物理的动画还是考虑切换到 Cocos2D？我目前不考虑游戏开发。我将非常感谢您的建议/建议。

谢谢，拉梅什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:48:42.493

您可以在没有 Cocos2d 的情况下使用 Chipmunk，从它的示例中可以看出。但我建议将 Cocos2d 与 Chipmunk 一起使用。Cocos2d 自带了一个带有Chipmunk 的项目模板，里面有很多例子等等。我们用 Cocos2d 和 Chipmunk 制作了一本[互动书籍](http://itunes.apple.com/gb/app/the-phantom-clickerist/id465630229?mt=8)，里面有很多物理交互，而且效果很好。

# java - 有没有办法输出 Java 看到的变量，以便我可以隔离用于测试或寻求帮助的方法？

> ID：10045837
> 
> 赞同：0
> 
> 时间：2012-04-06T15:48:35.490
> 
> 标签：java

我正在学习 Java，发现自己在寻求帮助时会发送方法，但我的问题是我有很多方法，并且每种方法都会修改数据。当只有一个区域相关时，我经常不得不发送大文件（这也使我的 SO 问题过长）。

但是对于我所做的一些事情，我无法将正确的数据格式输出为稍后可以输入的字符串。例如，如果我将数据添加到点列表（像这样，`(new Point(0, 0));`），那么当我输出结果时，我会得到这样的结果（带有示例数据）：

`[java.awt.Point[x=970,y=10], java.awt.Point[x=65,y=10], java.awt.Point[x=729,y=10]`

当我将它分配给一个变量并将它发送到我想要测试/显示的方法时，我得到了错误。我基本上有两个目标：

1.  如果我需要一个方法的帮助（这是一个更大的类的一部分），我希望能够向帮助我的人发送最少的代码（理想情况下只是方法本身和输入......我就是现在无法准确捕获）。
2.  当我测试我的代码时，我想要一种方法来隔离一个方法，这样当我所能做的就是改进一个方法时，我就不必运行一个大文件。

我很确定我不是第一个遇到这个问题的人，我该如何解决这个问题？

更新：这是一个例子，

```
double[] data = new double[] {.05, .02, -.03, .04, .01}; 
System.out.println(data); //output is: [D@13fcf0ce 
```

如果我为此创建一个新变量并将其发送到一个方法，我会得到错误。我一堂课有 30 种方法。我想请一位朋友帮我做一个。我要避免发送与此人无关的 29 种方法。所以我需要一种捕获数据的方法，但打印输出似乎无法以我可以发送到方法的方式捕获它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:56:08.277

您可以使用调试器并单步执行您的代码。您可以“观察”变量，以便获得它们的实际值，而不是它们的`toString`表示。调试器通常是所有主要 IDE 的一部分，例如 Eclipse、Netbeans 和 IntelliJ。

至于您关于隔离和测试的问题，这更像是一个设计问题。理想情况下，您的方法应该是自包含的，从而减少耦合。你可以做的是学会把你的问题分解成更小的块，直到它不能被进一步分解。一旦你这样做了，你就开始构建分别解决问题的每个部分的方法。

一旦你有了你的方法，你就可以自己测试它（从而减少可能出错的事情的数量，而不是一次测试大量的代码）。如果您满意，您可以将该方法与您的代码集成并再次测试。如果出现问题，您将知道您的最后一个模块是问题，因为它破坏了您的系统。[您可以在此处](http://en.wikipedia.org/wiki/Integration_testing)获得有关此的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T16:30:43.867

Java 以人类可读的方式输出变量（尽管它取决于对象的`toString`方法）。的输出`toString`（不出所料）是 a `String`。除非您有一种解析机制将字符串转回原始对象，否则它是一种单向操作。

但是，应该没有必要将其变回原始对象。如果您尝试隔离函数和样本数据，最简单的做法是将其封装在测试和一些数据中——有许多不同的方法可以做到这一点并将其传达给其他人。

但是，我仍然不清楚您的用例。如果这是一个 SO 问题，您需要做的就是显示有问题的代码，提供显示问题的最少量数据，然后您就完成了。这可以在一个独立的示例中完成，您可以在代码中简单地创建数据，作为单元测试，或者通过显示您已经完成的字符串输出。

如果您试图将问题传达给技术支持层，那么*最好*的机制完全取决于他们能够处理什么——他们会告诉您如果您做得不对，相信我。

# security - 如果需要更高权限的 PW 才能看到密码，是否可以使用未混淆的密码？

> ID：10045840
> 
> 赞同：0
> 
> 时间：2012-04-06T15:48:46.710
> 
> 标签：security, svn, hudson

我试图在我们的自动构建过程中自动将一些文件提交到 SVN。Hudson 没有工具（有效）来简单地做到这一点。我发现[Plugin 提交了 hudson build artifact](https://stackoverflow.com/questions/2446136/plugin-to-commit-hudson-build-artifact)，它使用一个简单的命令显示了第二个示例。现在的困难在于混淆提供的凭据。

我真的不喜欢将我的批处理构建为 exe 的想法——它似乎有点太笨重并且无法更改。我为其他想法和同事绞尽脑汁，我想出了这个：

*   在 SVN 中创建一个没有权限的新用户。我称这个用户为“哈德森”
*   只给哈德森阅读/提交有问题的一个项目的能力。它不能删除。
*   使用未混淆的用户名/密码。：X

现在，访问我们的 Hudson 构建服务器需要身份验证。因此，在能够击中未混淆的密码之前，至少有一个级别的隐含身份验证。如果恶意用户能够看到这个未经混淆的密码，则暗示他们拥有比未经混淆的密码授予他们更多的权限。那有意义吗？这是声音吗？我觉得这样做真的很脏，但我想不出更简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T15:57:50.787

从广义上讲，这不是问题。但是，您可以做几件事来改进它。

*   有问题的密码应该是长且随机的。它仅由程序使用；为什么要易于阅读？
*   我通常对此类密码进行小规模混淆，特别是如果它们由于某种原因而不长且随机（例如人类也使用它们）。原因是为了防止有人偷看我的肩膀突然知道密码。每当您要在脚本中输入密码时，温和筛选非常有用。

# c - 为什么这个 C 程序编译没有错误？

> ID：10045847
> 
> 赞同：9
> 
> 时间：2012-04-06T15:49:21.137
> 
> 标签：c

我是 C 的初学者，我在玩 C。我输入了这样的 C 代码：

```
#include <stdio.h>
int main()
{
    printf("hello world\n"); 
    \
    return 0;
} 
```

即使我`\`故意使用，C 编译器也不会抛出任何错误。这个符号在 C 语言中是做什么用的？

编辑：

即使这样也有效：

```
"\n"; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-06T15:56:20.450

在翻译过程的早期阶段（阶段 2）从代码中删除序列反斜杠换行符。它曾经是您在字符串连接之前创建长字符串文字的方式，也是您仍然将宏扩展到多行的方式。

请参阅 C99 标准的 §5.1.1.2 转换阶段：

> 翻译的语法规则之间的优先级由以下阶段指定。^(5))
> 
> 1.  如有必要，物理源文件多字节字符以实​​现定义的方式映射到源字符集（为行尾指示符引入换行符）。Trigraph 序列被相应的单字符内部表示替换。
> 2.  每个反斜杠字符 ( `\`) 的实例后面紧跟一个换行符都被删除，拼接物理源代码行以形成逻辑源代码行。只有任何物理源行上的最后一个反斜杠才有资格成为此类接头的一部分。非空源文件应以换行符结尾，在进行任何此类拼接之前，该换行符之前不应紧跟反斜杠字符。
> 3.  源文件被分解为预处理标记^(6))和空白字符序列（包括注释）。源文件不应以部分预处理标记或部分注释结尾。每个注释被一个空格字符替换。保留换行符。除换行符之外的每个非空空白字符序列是保留还是替换为一个空格字符是实现定义的。
> 4.  执行预处理指令，扩展宏调用，并 `_Pragma`执行一元运算符表达式。如果与通用字符名称的语法匹配的字符序列由标记连接 (6.10.3.3) 生成，则行为未定义。预处理指令导致命名的`#include`头文件或源文件从阶段 1 到阶段 4 以递归方式进行处理。然后删除所有预处理指令。
> 5.  字符常量和字符串文字中的每个源字符集成员和转义序列都被转换为执行字符集的相应成员；如果没有对应的成员，则将其转换为除空（宽）字符之外的实现定义的成员。^(7))
> 6.  相邻的字符串文字标记被连接起来。
> 7.  分隔标记的空白字符不再重要。每个预处理令牌都被转换为一个令牌。生成的标记在句法和语义上进行分析，并作为翻译单元进行翻译。
> 8.  所有外部对象和函数引用都已解析。链接库组件以满足对当前翻译中未定义的函数和对象的外部引用。所有此类翻译器输出都被收集到程序映像中，该程序映像包含在其执行环境中执行所需的信息。
> 
> ^(5))实现应该表现得好像这些单独的阶段发生了一样，即使在实践中许多通常是折叠在一起的。
> 
> ^(6))如 6.4 所述，将源文件的字符划分为预处理标记的过程是上下文相关的。例如，请参阅预处理指令`<`内的处理。`#include`
> 
> ^(7))实现不需要将所有不对应的源字符转换为相同的执行字符。

如果杂散反斜杠后有空格或任何其他字符，则会出现编译错误。我们可以告诉您在它之后没有任何内容，因为您没有编译错误。

* * *

你问题的另一部分，关于：

```
"\n"; 
```

是完全不同的。这是一个简单的表达式，没有副作用，因此对程序没有影响。优化器将完全丢弃它。当你写：

```
i = 1; 
```

您有一个带有被丢弃值的表达式；它被评估为修改的副作用`i`。

有时，您会发现如下代码：

```
*ptr++; 
```

编译器会警告你表达式的结果被丢弃；表达式可以简化为：

```
ptr++; 
```

并且会在程序中达到同样的效果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-06T16:06:58.643

，`\`当紧跟一个换行符时，会被预处理消耗，并导致下一个“物理”行连接到当前逻辑行。这对于编写长的预处理指令非常重要，这些指令必须全部在一个逻辑行上：

```
#define SHORT very log macro \
   consisting of lots and \
   lots of preprocessor \
   tokens 
```

如果删除反斜杠换行序列，则不再正确。来自 Unix 文化的其他一些语言具有类似的反斜杠行延续语法：源自 Bourne shell 的 POSIX shell 语言，以及 makefile。

```
$ this is \
one shell command 
```

About `"\n";`，这是用于形成表达式语句的主要表达式。在 C 中，表达式可以用作语句，并且一直被利用。`printf`例如，您的调用是一个表达式语句。`printf("hello world\n")`是一个后缀表达式，它调用一个函数，获得一个返回值。因为您将此表达式用作语句，所以返回值被丢弃。的返回值`printf` 表示打印了多少个字符，或者它是否成功，所以通过丢弃它，你的程序会让自己忘记`printf`调用是否真的有效。

由于表达式语句的值被丢弃，如果这样的语句也没有副作用，它是一个无用的语句，什么都不做（比如你的`"\n"`）。但是这种无用的表达语句并没有错误。如果您在编译器命令行中添加警告选项，您可能会收到诸如“没有效果的语句”之类的警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T15:51:32.463

反斜杠 \ 由 C 预处理器解释。它保护它的下一个字符（你的情况下的换行符）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-06T15:52:13.950

反斜杠只是转义下一个字符。在这种情况下，可能是行结束 (CR) 字符。完全合理。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-06T15:56:45.687

反斜杠加上它后面的内容是一个[转义序列](http://www.learncpp.com/cpp-tutorial/27-chars/)；"\n" 一起是换行符（打印换行符）。另一个重要的是“\t”，用于制表符。

# c# - Windows Phone 应用程序背景图片

> ID：10045848
> 
> 赞同：3
> 
> 时间：2012-04-06T15:49:22.423
> 
> 标签：c#, windows-phone-7

我正在尝试更改 app.xaml 中所有 xaml 页面的背景图像，但未成功。

我正在 App 构造函数中尝试以下操作：

```
var imageBrush = new ImageBrush
{
    ImageSource = new BitmapImage(new Uri("/Images/SomeBackgroundImage.png", UriKind.Relative))
};

RootFrame.Background = imageBrush; 
```

我不想在页面级别执行此操作，因为所有页面都将具有相同的背景图像，具体取决于用户选择的主题。

关于我在这里做错了什么的想法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-10T11:38:32.400

我最终做了什么：

我创建了一个根据所选主题选择正确背景图像的方法。

```
public static ImageBrush GetBackground()
{
    var imageBrush = new ImageBrush();

    if ((Visibility)App.Current.Resources["PhoneLightThemeVisibility"] == Visibility.Visible)
    { 
        imageBrush = new ImageBrush
        {
            ImageSource = new BitmapImage(new Uri("/Images/Background1.png", UriKind.Relative))
        };
    }
    else
    {
        imageBrush = new ImageBrush
        {
            ImageSource = new BitmapImage(new Uri("/Images/Background2.png", UriKind.Relative))
        };
    }

    return imageBrush;
} 
```

在每一页中，我都设置了背景图片。

```
LayoutRoot.Background = Utils.GetBackground(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T16:16:20.017

虽然您的代码片段也不适用于我，但使用

```
RootFrame.Background = App.Current.Resources["MainBackground"] as ImageBrush; 
```

做。您需要将以下内容添加到您的资源字典中`App.xaml`

```
<ImageBrush x:Key="MainBackground" ImageSource="/resources/MainBackground.jpg" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:06:27.677

我使用自定义样式使我的框架背景变为白色：

```
<ControlTemplate x:Key="WhiteTemplate" TargetType="toolkit:TransitionFrame">
                <Grid x:Name="ClientArea">
                    <Grid.Background>
                        <ImageBrush ImageSource="Images/yourimage.png"
                    </Grid.Background>
                    <ContentPresenter x:Name="FirstContentPresenter"  />
                    <ContentPresenter x:Name="SecondContentPresenter" />

                </Grid>
            </ControlTemplate> 
```

然后，在 App.xaml.cs

```
private void CompleteInitializePhoneApplication(object sender, NavigationEventArgs e)
        {
            // Set the root visual to allow the application to render
            if (RootVisual != RootFrame)
                RootVisual = RootFrame;

            // Remove this handler since it is no longer needed
            RootFrame.Navigated -= CompleteInitializePhoneApplication;
            // Add this to inject the media element Control template
            RootFrame.Template = Current.Resources["WhiteTemplate"] as ControlTemplate;
        } 
```

请注意，这是使用工具包。如果您不使用它，您可能应该使用“PhoneApplicationFrame”而不是工具包：TransitionFrame

# c# - 如何将 C# 中匿名类型的 IEnumerable 序列化为 JavaScript 对象？

> ID：10045855
> 
> 赞同：1
> 
> 时间：2012-04-06T15:50:05.647
> 
> 标签：c#, javascript, asp.net, serialization

在我的 ASP.net C# 代码中，我有一个 IEnumerable 容器，其中填充了匿名类型的对象（它松散地基于来自 SQL 的数据）。

假设我的代码看起来像这样：

```
var uics = entities.getData()
    .Select(x => new
        {
            id = x.id
            name = x.name
            age = x.age
        });
return Json(uics); //Serialize JSON in ASP.net MVC 3 
```

这很简单。当我将它序列化为 JavaScript 时，我得到一个对象数组，每个对象都有字段 id、name 和 age。

我想做的是将此数据序列化为一个以 id 作为索引的 JavaScript 对象，每个对象由其索引引用，具有字段名称和年龄。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T15:58:54.060

您可以创建一个`IDictionary`并将其用作操作的结果：

```
var uics = entities.getData()
    .ToDictionary(x => x.id, x => new { x.name, x.age });

return Json(uics); //Serialize JSON in ASP.net MVC 3 
```

无需显式指定此处使用的匿名类型的属性名称，因为编译器将这些默认设置为用于提供值的属性名称（在这两种情况下都是相同的）。

# css - 如何使用 font-weight 和 font-face 字体？

> ID：10045859
> 
> 赞同：31
> 
> 时间：2012-04-06T15:50:24.523
> 
> 标签：css, fonts, font-face

我有两个字体文件，例如：FONT-light 和 FONT-bold。两者都来自@font-face 套件，因此每个版本都包含大约 5 个字体文件（OGV、TTF、WOFF、EOT）。

要从浅色版本变为粗体版本，我必须使用`font-family: FONT-light;`然后`font-family: FONT-bold;`. 我想使用`font-weight: light;`and ，`font-weight: bold;`因为我需要它来进行 CSS3 转换。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-06T16:33:25.583

```
@font-face {
    font-family: 'DroidSerif';
    src: url('DroidSerif-Regular-webfont.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
}
@font-face {
    font-family: 'DroidSerif';
    src: url('DroidSerif-Italic-webfont.ttf') format('truetype');
    font-weight: normal;
    font-style: italic;
}
@font-face {
    font-family: 'DroidSerif';
    src: url('DroidSerif-Bold-webfont.ttf') format('truetype');
    font-weight: bold;
    font-style: normal;
}
@font-face {
    font-family: 'DroidSerif';
    src: url('DroidSerif-BoldItalic-webfont.ttf') format('truetype');
    font-weight: bold;
    font-style: italic;
} 
```

来自教程：[http ://www.456bereastreet.com/archive/201012/font-face_tip_define_font-weight_and_font-style_to_keep_your_css_simple/](http://www.456bereastreet.com/archive/201012/font-face_tip_define_font-weight_and_font-style_to_keep_your_css_simple/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-02-06T21:34:18.607

在嵌入字体 ( ) 上使用`font-weight`和`font-style`属性`@font-face`并不是那么简单。有几个项目是你需要关心的。

# 1 -`@font-face`语法：

语法对于在所有浏览器中使用字体非常重要。Paul Irish 拥有许多资源，如上图所示，编写了**'Bulletproof Syntax'**，并对其进行了多次改进：

```
@font-face {
  font-family: 'FONT-NAME';
  src: url('FONT-NAME.eot?') format('eot'), url('FONT-NAME.woff') format('woff'),     url('FONT-NAME.ttf') format('truetype');
} 
```

此版本（[http://www.paulirish.com/2009/bulletproof-font-face-implementation-syntax/](http://www.paulirish.com/2009/bulletproof-font-face-implementation-syntax/)，查找**“Fontspring @font-face 语法”**）是最新版本，适用于`IE6`、`iOS`、`Android`。查看链接以了解为什么应该以这种方式编写，这一点很重要。

# 2 - 字体属性，如`font-weight`和`font-style`

如果您愿意，可以在声明上应用`font-weight`and以使用相同字体的变体，但您需要对这些特征进行具体和精确的描述。有一些方法可以做到这一点。`font-style``@font-face`

## 2.1 - 对每个变体使用一个字体系列

使用**'Bulletproof Syntax'**，假设您要加载**'Normal'**、**'Bold'**和**'Italic'**变体，我们有：

```
@font-face {
  font-family: 'FONT-NAME-normal';
  src: url('FONT-NAME-normal.eot?') format('eot'), url('FONT-NAME-normal.woff') format('woff'), url('FONT-NAME-normal.ttf') format('truetype');

  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'FONT-NAME-bold';
  src: url('FONT-NAME-bold.eot?') format('eot'), url('FONT-NAME-bold.woff') format('woff'), url('FONT-NAME-bold.ttf') format('truetype');

  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'FONT-NAME-italic';
  src: url('FONT-NAME-italic.eot?') format('eot'), url('FONT-NAME-italic.woff') format('woff'), url('FONT-NAME-italic.ttf') format('truetype');

  font-weight: normal;
  font-style: normal;
} 
```

因此，要使用您想要的变体，您必须调用与`font-family`它对应的 并在规则上声明`font-weight: normal`and `font-style: normal`。如果您不这样做，浏览器可能会默认将**“仿粗体/斜体”**应用于具有此规则的元素。' **faux'**样式可以强制元素与它一起显示，即使已经使用斜体或粗体字体。问题在于字体总是看起来很丑，因为它不是看起来的样子。

当您定义**“普通”**字体时也会发生同样的情况，例如，在一个`<p>`元素上，并在其中放置一个`<strong>`or `<em>`。`<strong>`和将`<em>`强制字体上的粗体/斜体过程。为避免这种情况，您需要将正确`font-family`的，指定为粗体/斜体，应用于`<strong>`and的规则，并将`<em>`它们各自的属性（`font-weight`和`font-style`）设置为`normal`：

```
strong {
  font-family: 'FONT-NAME-bold';
  font-weight: normal;
  font-style: normal;
}

em {
  font-family: 'FONT-NAME-italic';
  font-weight: normal;
  font-style: normal;
} 
```

但它有一个问题。如果您的字体未加载，则选择的后备将失去其权重/样式。这将我们引向下一条道路。

## 2.2 - 使用相同的字体系列名称，但不同的权重和样式

如果您的字体未加载，这种方式更容易正确处理多个权重和样式以及后备。使用相同的示例：

```
@font-face {
  font-family: 'FONT-NAME';
  src: url('FONT-NAME-normal.eot?') format('eot'), url('FONT-NAME-normal.woff') format('woff'), url('FONT-NAME-normal.ttf') format('truetype');

  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'FONT-NAME';
  src: url('FONT-NAME-bold.eot?') format('eot'), url('FONT-NAME-bold.woff') format('woff'), url('FONT-NAME-bold.ttf') format('truetype');

  font-weight: 700;
  font-style: normal;
}

@font-face {
  font-family: 'FONT-NAME';
  src: url('FONT-NAME-italic.eot?') format('eot'), url('FONT-NAME-italic.woff') format('woff'), url('FONT-NAME-italic.ttf') format('truetype');

  font-weight: normal;
  font-style: italic;
} 
```

在这种方法中，`@font-face`声明中的权重和样式充当“标记”。当浏览器在 CSS 的其他地方遇到这些权重和样式时，它知道`@font-face`要访问哪个声明以及要使用哪种字体变体。

确保您的体重和样式是否匹配。如果是这样，当您使用`<strong>`或`<em>`在使用`@font-face`您创建的父级时，它将加载正确的声明。

* * *

在这些嵌入风格化方法的源代码中（[http://coding.smashingmagazine.com/2013/02/14/setting-weights-and-styles-at-font-face-declaration/](http://coding.smashingmagazine.com/2013/02/14/setting-weights-and-styles-at-font-face-declaration/)），有另一种方法结合了我提到的两个（**2.1**和**2.2**）。但它带来了很多问题，包括**“人造粗体/斜体”**，迫使您`<strong>`向右声明，`font-family`并且对于`<em>`,`classes`的样式超过`font`不同的`weight`. 我想我选择的两个足以胜任这项工作。

资料来源： http: [//www.paulirish.com/2009/bulletproof-font-face-implementation-syntax/](http://www.paulirish.com/2009/bulletproof-font-face-implementation-syntax/) [http://coding.smashingmagazine.com/2013/02/14/setting-weights-and-styles-at-字体声明/](http://coding.smashingmagazine.com/2013/02/14/setting-weights-and-styles-at-font-face-declaration/)

## 编辑1：

无需使用大量字体扩展。如果您需要支持 IE8（仅接受格式） ，则该`.woff`类型几乎适用于除 IE 之外的所有浏览器。`.eot`（[http://caniuse.com/#feat=fontface](http://caniuse.com/#feat=fontface)）

其他可能有用的提示是使用`base64`编码在 CSS 上嵌入字体。这将有助于避免大量请求，但您需要记住它会覆盖 CSS 文件。这可以通过组织 CSS 内容和字体来处理，以便在一个小文件中快速给出第一个 CSS 规则，在`<body>`标签关闭时将其他 CSS 规则传递到另一个 CSS 文件中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T16:22:52.320

您可以将数字添加到 font-weight 属性，例如添加到轻型版本。

```
font-weight: normal; //  light version as it is.
font-weight: 700; // makes light version bolder. 
```

# mysql - 为什么我的 MySQL 查询只返回 28 条记录中的 7 条？

> ID：10045860
> 
> 赞同：1
> 
> 时间：2012-04-06T15:50:26.413
> 
> 标签：mysql, inner-join

我正在为我的会员计划编写数据馈送脚本，我真的以为我在“做”，但是当我运行该脚本时，它创建的 CSV 文件只有 28 个产品中的 7 个。在测试之前，我使所有产品都符合查询条件，所以它们都应该被包括在内。我什至删除了库存水平和价格条件。仍然只有 28 个中的 7 个被添加到 csv 文件中，5 个来自一个类别，2 个来自另一个。第一类只有 5 件商品，全部退货。但是第二类的 23 个中只有 2 个被返回。

**目标**是从查询中的类别中获取所有产品的特定数据，并将它们转储到 csv 文件中。

这是我第一次尝试编写更复杂的 sql 查询（无论如何都是初学者）。

使用 print_r 我发现问题是我的查询。我以为我以前有这个工作。它工作时和现在之间的区别在于我包括了获取 categoryid 和 catparentid。但即使我删除了这些添加，我仍然得到相同的结果。现在我在想，我之前可能认为它在我更大的产品数据库上工作，但也许它实际上并没有返回所有产品，而是因为我认为它们太多了。

完整的脚本很长，但我在下面创建了一个新脚本，只是为了查看查询是否抓取了所有记录……不是。:(

如果我运行查询以检查未关联的产品（即没有类别关联的产品），则所有产品都与一个类别相关联。

所有的产品都有形象和品牌联想，所以我认为这也不是问题。

即使我完全删除 Where 子句，也只能抓取 7 个产品。

我还直接在数据库中运行查询并得到相同的结果：

```
Showing rows 0 - 6 ( 7 total, Query took 0.0029 sec)

SELECT isc_products.productid, isc_products.prodcode, isc_products.prodname, isc_products.produrl, isc_products.prodcalculatedprice, isc_products.proddesc, isc_products.prodcurrentinv, isc_products.upc, isc_categories.categoryid, isc_categories.catparentid, isc_categories.catname, isc_product_images.imagefilestd, isc_product_images.imagefilethumb, isc_brands.brandname
FROM isc_products
INNER JOIN isc_categories ON isc_products.prodcatids = isc_categories.categoryid
INNER JOIN isc_product_images ON isc_products.productid = isc_product_images.imageprodid
INNER JOIN isc_brands ON isc_products.prodbrandid = isc_brands.brandid
WHERE isc_categories.categoryid =10
OR isc_categories.categoryid =12 
```

数据中是否有任何特殊字符会导致此问题？

还是我错误地使用了内部连接？

```
<pre>
<?php

// Make a MySQL Connection
mysql_connect("localhost", "myusername", "mypassword") or die(mysql_error());
mysql_select_db("mydatabase") or die(mysql_error());

$result = mysql_query("SELECT isc_products.productid, 
isc_products.prodcode,
isc_products.prodname,
isc_products.produrl,
isc_products.prodcalculatedprice,
isc_products.proddesc,
isc_products.prodcurrentinv,
isc_products.upc,
isc_categories.categoryid,
isc_categories.catparentid,
isc_categories.catname, 
isc_product_images.imagefilestd,
isc_product_images.imagefilethumb,
isc_brands.brandname
FROM isc_products 
INNER JOIN isc_categories 
ON isc_products.prodcatids = isc_categories.categoryid 
INNER JOIN isc_product_images 
ON isc_products.productid = isc_product_images.imageprodid 
INNER JOIN isc_brands 
ON isc_products.prodbrandid = isc_brands.brandid 
WHERE isc_categories.categoryid = 17
OR isc_categories.categoryid = 15
OR isc_categories.categoryid = 16
OR isc_categories.categoryid = 12
OR isc_categories.categoryid = 13
OR isc_categories.categoryid = 14
OR isc_categories.categoryid = 11
OR isc_categories.categoryid = 10
AND isc_products.prodcurrentinv > 1
AND isc_products.prodcalculatedprice > 1.00
ORDER BY isc_categories.catname
")
or die(mysql_error());

while($row = mysql_fetch_array( $result)){
print_r ($row);
}

// end of file
echo '<br/>****** Script successfully run! ******';
?>
</pre> 
```

对此的任何想法将不胜感激。*如果*您的第一个想法是“为什么不...”，那是因为我不知道或不知道。:) 有一天，我的朋友……有一天我会的。哈哈哈哈

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T15:57:06.350

你的问题是一个经典的 SQL 编码问题：`OR`优先于`AND`，这基本上意味着你必须在你`OR`的 s 周围加上括号，否则它会被解析为`A OR (B OR (C AND D))`你`(A OR B OR C) AND D`希望的那样。

尝试这个：

```
WHERE ( -- note opening bracket
    isc_categories.categoryid = 17
    OR isc_categories.categoryid = 15
    OR isc_categories.categoryid = 16
    OR isc_categories.categoryid = 12
    OR isc_categories.categoryid = 13
    OR isc_categories.categoryid = 14
    OR isc_categories.categoryid = 11
    OR isc_categories.categoryid = 10
) -- note closing bracket
AND isc_products.prodcurrentinv > 1
AND isc_products.prodcalculatedprice > 1.00 
```

此外，您可以通过将 where 子句简化为：完全避免此问题，并使 SQL 更易于阅读：

```
WHERE isc_categories.categoryid in (10,11,12,13,14,15,16,17)
AND isc_products.prodcurrentinv > 1
AND isc_products.prodcalculatedprice > 1.00 
```

或者，因为您的值是连续的，所以更简单：

```
WHERE isc_categories.categoryid between 10 and 17
AND isc_products.prodcurrentinv > 1
AND isc_products.prodcalculatedprice > 1.00 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-06T15:55:00.900

很可能是`INNER JOIN`造成这种情况的原因。INNER 连接将返回连接两侧都有 NON-NULL 字段的行。如果您想获取没有附加产品的类别，您将需要 LEFT 或 RIGHT 连接（取决于您如何构建查询）。那些将返回在连接的左侧或右侧有数据的记录，但在另一侧为空。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-06T15:55:41.170

尝试用 LEFT JOIN 替换内部连接，然后查看结果。你看到你期望的28了吗？如果是这样（或者您看到更多），则连接在某种程度上是不正确的。

# iphone - Xcode：上传到 iTunes 商店时出错

> ID：10045861
> 
> 赞同：0
> 
> 时间：2012-04-06T15:50:28.250
> 
> 标签：iphone, ios, xcode, submit, itunes

嘿，试图将我的应用程序提交到 iTunes。它通过了验证，但是当我提交它时显示错误：

```
an error occurred uploading to the iTunes store 
```

![在此处输入图像描述](../Images/6c7db4c84e6fca98d9472f93bfd27512.png)

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T15:57:53.933

您可以尝试以下几件事：

首先，看看这个答案：[https ://stackoverflow.com/a/10021537/535632](https://stackoverflow.com/a/10021537/535632)

二、尝试使用Application Loader而不是XCode来提交app

# java - Dozer Java API 如何执行？

> ID：10045863
> 
> 赞同：3
> 
> 时间：2012-04-06T15:50:44.793
> 
> 标签：java, dozer

我有两个与 Dozer 使用其 Java API 的性能有关的问题：

1.  一般来说，映射是否比使用 Dozer XML 配置更快？还是它们差不多？
2.  它与其他 Java 映射框架（例如 Orika）相比如何？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T16:18:04.190

通常，使用 XML 配置或 Java API 的映射性能是相同的。

性能将取决于您的应用程序（用例），基本上 Orika 的性能优于 Dozer 或其他映射（基于反射的框架），因为它在后台使用字节码生成。

IMO 当您必须呈现 HTML 并访问远程数据存储时，映射器的性能可能会很混乱。

这是一些基准 [http://bit.ly/pJ7n6t](http://bit.ly/pJ7n6t)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-12T17:27:02.910

我刚刚偶然发现了 GeDA - 根据[http://inspire-software.com/confluence/display/GeDA/Benchmarks](http://inspire-software.com/confluence/display/GeDA/Benchmarks)提供的一个非常快速的 bean 映射框架，并且具有 Spring 集成支持。

有 2 个具有 4 个简单字段的类 - 字符串、字符串、日期、布尔值。此类对象的 1000000 次转换使用 GeDA 需要 100 毫秒，使用 Orika 需要 1000 毫秒。

知道 Orika 比 Dozer 快 10 倍，您可以想象 GeDA 与 Dozer 的表现如何

# java - JavaPNS - 在笔记本电脑上工作正常，而不是在服务器上？

> ID：10045879
> 
> 赞同：0
> 
> 时间：2012-04-06T15:51:46.923
> 
> 标签：java, apple-push-notifications

这个问题我纠结了好久，希望有大神帮忙？我有一些 JavaPNS 代码在从本地计算机运行时可以很好地推送到我的设备，但是，当我将该代码复制到我的服务器时，一切运行正常，没有错误，但我从未在我的设备上收到警报？在检查了来自我的服务器的日志与我的本地机器相比之后，我注意到我从来没有在我的服务器上收到刷新消息，我使用的是 JavaPNS 队列，有 30 个线程。在这两种情况下，本地盒子和服务器，我发送的警报都少于 30 个。

```
public class PushWorker 
{
private PushQueue queue = null;

public PushWorker(File keystore, String password, boolean production) throws KeystoreException
{
    BasicConfigurator.configure();
    int threads = 30;
    this.queue = Push.queue(keystore, password, production, threads);
    queue.start();
}

public void push(String message, String sound, String token, String eventId) throws JSONException
{
    BasicDevice bd = new BasicDevice();
    bd.setToken(token);

    PushNotificationPayload payload = PushNotificationPayload.complex();
    payload.addAlert(message);
    payload.addSound(sound);
    payload.addCustomDictionary("eid", eventId);

    push(payload, bd);
}

private void push(Payload payload, Device device)
{
    queue.add(payload, device);
}
} 
```

----BELOW 是来自我本地邮箱的刷新消息-------------

```
4872 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.notification.PushNotificationManager  - Flushing
4872 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.notification.PushNotificationManager  - At this point, the entire 139-bytes message has been streamed out successfully through the SSL connection
4872 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.notification.PushNotificationManager  - Notification sent on first attempt 
```

我可以以某种方式从队列中强制刷新吗？

----------------------BELOW 是服务器 JavaPNS 日志记录---------- -

```
0 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.communication.ConnectionToAppleServer  - Creating SSLSocketFactory
16 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.communication.ConnectionToAppleServer  - Creating SSLSocketFactory
49 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.communication.ConnectionToAppleServer  - Creating SSLSocket to gateway.sandbox.push.apple.com:2195
49 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.communication.ConnectionToAppleServer  - Creating SSLSocket to gateway.sandbox.push.apple.com:2195
177 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.notification.PushNotificationManager  - Initialized Connection to Host: [gateway.sandbox.push.apple.com] Port: [2195]: 5117f31e[SSL_NULL_WITH_NULL_NULL: Socket[addr=gateway.sandbox.push.apple.com/17.172.233.65,port=2195,localport=56015]]
...
...

DEBUG javapns.notification.Payload  - Adding alert [blah, blah my alert]
14767 [main] DEBUG javapns.notification.Payload  - Adding sound [default]
14767 [main] DEBUG javapns.notification.Payload  - Adding custom Dictionary [eid] = [193790]
14776 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.notification.PushNotificationManager  - Building Raw message from deviceToken and payload
14776 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.notification.PushNotificationManager  - Built raw message ID 16777217 of total length 135
14777 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.notification.PushNotificationManager  - Attempting to send notification: {"aps":{"sound":"default","alert":"blah, blah my alert"},"eid":"193790"}
14777 [JavaPNS grouped notification thread in QUEUE mode] DEBUG javapns.notification.PushNotificationManager  -   to device: [my device number] 
```

就是这样，没有冲洗...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T02:59:00.547

您是否在服务器或其他防火墙设备上配置了 iptables？

*   也许需要允许端口 2195。

尝试使用 telnet 进行测试：

$ telnet gateway.sandbox.push.apple.com 2195

你启用了 SELinux 吗？检查以下设置：

$ getebool -a | grep httpd

httpd_can_network_connect --> ?

确保它已打开。

您是否查看了 javapns repo 站点上的文档？

让我们知道怎么回事。

账单

# big-o - 计算上限和下限的见证

> ID：10045883
> 
> 赞同：0
> 
> 时间：2012-04-06T15:52:07.683
> 
> 标签：big-o

我正在研究程序的运行时间并且遇到了大 O 符号。有人被要求通过证明存在整数和常数来证明这`T(n)`一点，使得对于所有整数，。`O(f(n))``x``c > 0``n >= x``T(n) <= cf(n)`

我看到的例子通过“挑选”`x`和的值来证明这一点`c`。我知道您可以将值插入方程式并查看它们是否正确，但是有没有办法实际计算`x`or `c`？或者，至少，一些关于如何选择它们的经验法则，这样就不会无休止地插入值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:09:22.657

这些值来自算法的检查`T`。例如，当您有一个简单的循环时：

```
for (i=0; i < n; ++i) {
  sum += i;
} 
```

然后你执行操作`i<n`,`++i`和`sum+=i`n 次, 和`i=0`一次。所以`f(n)==n`，`c==4`（对于这四个操作，为了值的正确性，将“一次”提升到“n 次”），`x==1`（对于`n==0`，您仍然执行`i=0`and `i<n`，因此该公式将不起作用）。这为您提供了 O(n) 性能（与输入数量成线性关系）。

对于嵌套循环：

```
for (i=0; i < n; ++i) {
  for (j=0; j<n; ++j) {
    sum += j;
  }
} 
```

计算是相似的，用`f(n)==n^2`，给你 O(n^2)。

因此，没有直接的方法来告诉 和 的确切值`c`，`x`但大多数时候最难的部分是提出来的`f`——而且“最小的”也是（一个 O(n^2) 算法是根据您提供的定义，还有一个 O(n^3) 算法，但您想用 O(n^2) 而不是 O(n^3)) 来表征该算法。s的排序`f`基于它们在`n`接近无穷大时的增长：`f(n)=n^3`增长比 慢`f(n)=2^n`，即使对于小`n`的 s 前者大于后者。

请注意，理论上 和 的实际值随着接近无穷大`x`而`c`变得无关紧要`n`，这就是为什么它们不会出现在`O(n)`符号本身中的原因。但是，这并不意味着对于（相对）较小的值 if `n`，指令的数量不会比`f(n)`（例如，for 循环中有 1000 条指令）大很多。

此外，O(n) 表示法会给您带来*最差*的性能，例如，这可能比您在现实生活中观察到的（平均案例成本）或数据结构的整体使用（摊销成本）要高得多。

# asp.net - 如何设置asp.net应用程序的根路径

> ID：10045890
> 
> 赞同：0
> 
> 时间：2012-04-06T15:52:46.483
> 
> 标签：asp.net, root

我有一个包含位于多个文件夹中的页面的 asp.net 应用程序。我的 .js 文件也在一个“JS”文件夹中，并且我在母版页的头部添加了它们的引用，例如：

```
<script  type="text/javascript" src="JS/jquery.min.js"></script> 
```

现在，当我在主页上时，脚本加载正常。但是当我在另一个文件夹（例如物理）中存在的其他页面上时，路径被附加，因此我得到错误：

> 加载资源失败：服务器响应状态为 404（未找到）

`<a>`我的图像路径和标签也发生了类似的事情。

现在我想给出关于根路径的路径，例如：

```
~/JS/VerticalMenu.js 
```

但这`~`并没有把我带到我的应用程序的根源。我需要设置`~`应该通向哪里吗？如果是，那么在哪里以及如何？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T16:21:48.110

@Charlie Kilian 答案是一个可行的解决方案，但是您也可以通过html 页面头部的[基本标记为页面中的所有相对 URL 指定基本 URL。](http://www.w3schools.com/tags/tag_base.asp)

```
<head>
    <base href="http://www.yourdomain.com/anyvirtualdirectory/" />
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T16:05:53.623

试试这个：

```
<script type="text/javascript" 
    src="<%=Page.ResolveUrl("~/JS/VerticalMenu.js")%>"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:00:34.163

如果它是 ASP.NET 应用程序，您可以通过在路径前添加前缀来访问根目录`~/`：

```
<script src="~/common/scripts/safeguard.common.js" type="text/javascript"></script> 
```

您也可以尝试在路径前加上`/`：

```
<script src="/common/scripts/safeguard.common.js" type="text/javascript"></script> 
```

# node.js - Winston 的多个日志文件？

> ID：10045891
> 
> 赞同：20
> 
> 时间：2012-04-06T15:52:46.677
> 
> 标签：node.js, logging, flatiron.js, winston

我们想使用 Winston 来登录 Node.js。但是，我们无法弄清楚如何拥有两个日志文件：一个仅用于错误，一个用于其他所有文件。

但是，以天真的方式这样做是行不通的：添加多个`winston.transports.File`传输会产生错误。

[其他人遇到了这个问题，给出了模糊的解决方案提示，但没有真正的答案](https://github.com/flatiron/winston/issues/101)。

有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-06-28T23:12:26.763

不幸的是，pesho 提到的补丁似乎仍然没有包含在正式版本中（参见 stephenbeeson 在[pull request #149](https://github.com/flatiron/winston/pull/149)中的评论）。

所以，我改用了一种解决方法。当 winston 比较名称属性时，您可以通过自己定义名称来欺骗它：

```
winston = require 'winston'

logger = new winston.Logger
  transports: [
    new winston.transports.File
      name: 'file#debug'
      level: 'debug'
      filename: '/tmp/debug.log'
    new winston.transports.File
      name: 'file#error'
      level: 'error'
      filename: '/tmp/error.log'
  ]
logger.error 'error' # both logs
logger.debug 'debug' # on debug log 
```

也许不优雅，但至少它有效。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-06-09T16:35:13.900

同时，您可以使用相同的接口实现一个基本的包装器，如下所示

```
var winston = require('winston');
var configs = require('./env.js');

var debug = new winston.Logger({
  levels: {
    debug: 0
  },
  transports: [
    new (winston.transports.File)({ filename: configs.PATH_TO_LOG, level: 'debug'}),
    new (winston.transports.Console)({level: 'debug'})
  ]
});

var info = new winston.Logger({
  levels: {
    info: 1
  },
  transports: [
    new (winston.transports.File)({ filename: configs.PATH_TO_LOG, level: 'info'}),
    new (winston.transports.Console)({level: 'info'})
  ]
});

var warn = new winston.Logger({
  levels: {
    warn: 2
  },
  transports: [
    new (winston.transports.File)({ filename: configs.PATH_TO_LOG, level: 'warn'}),
    new (winston.transports.Console)({level: 'warn'})
  ]
});

var error = new winston.Logger({
  levels: {
    error: 3
  },
  transports: [
    new (winston.transports.File)({ filename: configs.PATH_TO_LOG, level: 'error'}),
    new (winston.transports.Console)({level: 'error'})
  ]
});

var exports = {
  debug: function(msg){
    debug.debug(msg);
  },
  info: function(msg){
    info.info(msg);
  },
  warn: function(msg){
    warn.warn(msg);
  },
  error: function(msg){
    error.error(msg);
  },
  log: function(level,msg){
    var lvl = exports[level];
    lvl(msg);
  }
};

module.exports = exports; 
```

这将涵盖基本的 winston API。可以扩展元数据等等......

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-29T12:50:33.133

我刚刚发送了一个拉取请求，允许在一个记录器中使用多个文件传输。 [https://github.com/flatiron/winston/pull/149](https://github.com/flatiron/winston/pull/149)

它已经合并到 flatiron/winston 中。

你也可以使用我的分叉仓库： [https ://github.com/pdobrev/winston](https://github.com/pdobrev/winston)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-07-28T08:32:35.057

你只需要给运输一个自定义`name`属性，这样你就不会发生碰撞：

```
const logger = new (winston.Logger)({
  transports: [
    new (winston.transports.Console)(),
    new (winston.transports.File)({ name: 'text', filename: logFile, json: false }),
    new (winston.transports.File)({ name: 'json', filename: logFileJson })
  ]
}); 
```

您可以在文档中阅读有关多种传输的更多信息：[https ://github.com/winstonjs/winston#multiple-transports-of-the-same-type](https://github.com/winstonjs/winston#multiple-transports-of-the-same-type)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-06-28T07:58:07.637

Winston 现在正式支持此功能，并在[此处的自述文件中进行了说明](https://github.com/winstonjs/winston#usage)

代码示例：

```
const logger = winston.createLogger({
  level: 'info',
  format: winston.format.json(),
  defaultMeta: { service: 'user-service' },
  transports: [
    //
    // - Write to all logs with level `info` and below to `combined.log` 
    // - Write all logs error (and below) to `error.log`.
    //
    new winston.transports.File({ filename: 'error.log', level: 'error' }),
    new winston.transports.File({ filename: 'combined.log' })
  ]
});

//
// If we're not in production then log to the `console` with the format:
// `${info.level}: ${info.message} JSON.stringify({ ...rest }) `
// 
if (process.env.NODE_ENV !== 'production') {
  logger.add(new winston.transports.Console({
    format: winston.format.simple()
  }));
} 
```

# ruby-on-rails - Rails 编译带有和不带有 md5 哈希的资产，为什么？

> ID：10045892
> 
> 赞同：15
> 
> 时间：2012-04-06T15:52:57.473
> 
> 标签：ruby-on-rails, md5, assets, digest

我对 RoR 比较陌生，我很好奇为什么 Rails 会编译带有和不带有 md5 哈希的资产以用于生产？

`bundle exec rake assets:clean`然后我跑`bundle exec rake assets:precompile`

我的 production.rb 文件：

```
MyApp::Application.configure do

  # Code is not reloaded between requests

  config.cache_classes = true

  # Full error reports are disabled and caching is turned on

  config.consider_all_requests_local       = false

  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)

  config.serve_static_assets = false

  # Compress JavaScripts and CSS

  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed

  config.assets.compile = false

  # Generate digests for assets URLs

  config.assets.digest = true 

  config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  config.assets.precompile += %w(tos.js, tos.css)

  config.i18n.fallbacks = true

  config.active_support.deprecation = :notify

end 
```

我的应用程序使用名称中带有哈希的文件，这在我的情况下应该是这样:)

所以我在这里有两个问题：

1）为什么编译时会发生？

> Rails 编译带有和不带有 md5 哈希的资产以用于生产

2）这些文件（没有哈希）是做什么用的？

也许我没有得到什么，所以请有人解释一下。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-06T16:40:48.797

这样做的原因是您可以在不知道 MD5 指纹的情况下访问文件（例如，在非 Rails 应用程序中，或 Rails 应用程序中未由 Rails 堆栈编译或运行的文件（例如 500 /502 状态错误页面）。在这种情况下，您必须编译资产，然后在每次更新代码时更改静态 HTML 文件中的 css/js 链接（从而导致 MD5 哈希值发生变化）。

So instead rails produces 2 copies of each asset file, one with the fingerprint in the filename, the other without (e.g. application-731bc240b0e8dbe7f2e6783811d2151a.css, and application.css). The fingerprinted version is obviously preferred (see '[what is fingerprinting and why should I care](http://guides.rubyonrails.org/asset_pipeline.html#what-is-fingerprinting-and-why-should-i-care-questionmark)' in the [rails asset pipeline guide](http://guides.rubyonrails.org/asset_pipeline.html)). But the non-digested version is there as a fallback.

As a final thought on the matter I'd take a read of the following pull request to the rails git repo: [https://github.com/rails/rails/pull/5379](https://github.com/rails/rails/pull/5379) where they are discussing the pros and cons of the non-digested filenames, and the possibility of being able to turn off compilation of them.

HTH

# perl - Perl+Selenium：chomp() 失败

> ID：10045894
> 
> 赞同：0
> 
> 时间：2012-04-06T15:53:17.550
> 
> 标签：perl, selenium-rc, chomp

我正在使用 Selenium 工作，我从“//ul”中提取了一些数据，不幸的是，这些数据包含换行符，我尝试使用 chomp() 函数来删除它（因为我需要写入 CSV 文件）但是它不起作用，代码部分是：

```
open (INFO, '>>file.csv') or die "$!";  
print INFO ("codice\;descrizione\;prezzo\;URLFoto\n");
my $sel = Test::WWW::Selenium->new( host => "localhost", 
                                    port => 4444, 
                                    browser => "*chrome", 
                                    browser_url => "http://www.example.com/page.htm" );
$sel->open_ok("/page.htm");
$sel->click_ok("//table[2]/tbody/tr/td/a/img");
$sel->wait_for_page_to_load_ok("30000");
my $descrizione = $sel->get_text("//ul");
my $prezzo = $sel->get_text("//p/font");
my $codice = $sel->get_text("//p/font/b");
my $img = $sel->get_attribute ("//p/img/\@src");
chomp ($descrizione);
print INFO ("$codice\;$descrizione\;$prezzo\;$img\n");
$sel->go_back_ok();

# Close file
close (INFO); 
```

但输出是：

```
Art. S500 Set Yoga "Siddhartha";Idea regalo ?SET YOGA Siddhartha? Elegante scatola in cartone lucido contenente:  

 2 mattoni in legno naturale mis. cm 20 x 12,5 x 7

 1 cinghia in cotone mis. cm 4 x 235  

 1 stuoia in cotone mis. cm 70 x 170    

 1 manuale di introduzione allo yoga stampato

Tutto rigorosamente realizzato con materiali natural;€ 82,50;../images/S500%20(Custom).jpg 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:01:53.003

`chomp`从一个字符串或一组字符串的末尾删除平台特定的行尾字符序列。

在您的情况下，您似乎有一个带有嵌入换行符和/或回车符的字符串。因此，您可能想用其他东西替换任何可能的行结尾序列，比如说一个空格字符。在这种情况下，你会这样做：

```
$descrizione =~ s/[\r\n]+/ /g; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T21:02:56.683

如果你想替换所有垂直空格，Perl 有一个特殊的字符类快捷方式：

```
 use v5.10;
 $descrizione =~ s/\v+/ /g; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-06T16:26:05.127

也可以使用它来删除`\r`。

```
$descrizione =~ s#[\r\n]+\z##; 
```

问候，

# java - 使用时间戳的 JPA 查询问题

> ID：10045896
> 
> 赞同：3
> 
> 时间：2012-04-06T15:53:45.837
> 
> 标签：java, jpa, timestamp, eclipselink

[我的问题与此](https://stackoverflow.com/questions/2539035/how-to-do-a-timestamp-comparison-with-jpa-query)有点相似：我想检索日期与当前日期时间相比不超过 20 分钟的行，我的源代码：

```
 EntityManagerFactory emf=Persistence.createEntityManagerFactory("JavaApplication21PU");
   CoordonneesJpaController cjc=new CoordonneesJpaController(emf);
   Timestamp nd=new Timestamp(System.currentTimeMillis());//now
   nd.setMinutes(nd.getMinutes()-20);

   EntityManager em = getEntityManager();
   Query qr= em.createQuery("SELECT c FROM Coordonnees c WHERE c.date > '"+nd+"'");
    java.util.List<Coordonnees> lC=qr.getResultList(); 
```

我的实体：

```
 public class Coordonnees implements Serializable {
    //some code...
    @Basic(optional = false)
    @Column(name = "DATE", nullable = false)
    @Temporal(TemporalType.TIMESTAMP)
    private Date date; 
```

当我运行此代码时：

```
Exception in thread "main" Local Exception Stack: 
Exception [EclipseLink-3002] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.ConversionException
Exception Description: The object [%2012-04-06 16:19:49.179%], of class [class java.lang.String], from mapping [org.eclipse.persistence.mappings.DirectToFieldMapping[date-->APIGPS.PUBLIC.COORDONNEES.DATE]] with descriptor [RelationalDescriptor(javaapplication21.Coordonnees --> [DatabaseTable(APIGPS.PUBLIC.COORDONNEES)])], could not be converted to [class java.sql.Timestamp].
    at org.eclipse.persistence.exceptions.ConversionException.incorrectTimestampFormat(ConversionException.java:119)
    at org.eclipse.persistence.internal.helper.Helper.timestampFromString(Helper.java:1888)
    at org.eclipse.persistence.internal.helper.ConversionManager.convertObjectToTimestamp(ConversionManager.java:726)
    at org.eclipse.persistence.internal.helper.ConversionManager.convertObject(ConversionManager.java:107) 
```

错误来自这一行：

```
 Query qr= em.createQuery("SELECT c FROM Coordonnees c WHERE c.date > '"+nd+"'") 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-06T15:59:35.987

看起来您正在将日期（时间戳）与字符串的 c.date 进行比较，因为您在字符串查询中设置 nd 并用单引号括起来。您应该使用命名参数，并将 nd 变量设置为该参数。

```
Query qr= em.createQuery("SELECT c FROM Coordonnees c WHERE c.date > :nd");
qr.setParameter("nd", nd); 
```

# shell - [[ -n $VAR ]] 与 [[ -n ${VAR:-} ]]

> ID：10045897
> 
> 赞同：0
> 
> 时间：2012-04-06T15:53:57.860
> 
> 标签：shell, ksh

两者有什么区别

```
[[ -n $VAR ]] 
```

和

```
[[ -n ${VAR:-} ]] 
```

?

我什么时候应该使用第二次测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:17:33.523

语法`${VAR:-value}`替代`value`when`$VAR`为空或未设置。没有特别的理由（我能想到）将此语法与空的`value`.

# jquery - jQuery .animate() 在 Chrome 中跳转

> ID：10045902
> 
> 赞同：1
> 
> 时间：2012-04-06T15:54:29.810
> 
> 标签：jquery, css, google-chrome

我使用 jQuery .animate() 来移动绝对定位的容器。FF、IE 和 Opera 将容器正确移动到顶部。使用 Chrome，容器会跳到顶部并从边缘向下移动 200 像素。

jQuery：

```
$("#indexbox").animate({top: "0", marginTop: "0"}, 500); 
```

CSS：

```
#indexbox {
 position: absolute;
 width: 500px;
 left: 50%;
 top: 50%;
 margin-left: -250px;
 margin-top: -200px;
} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:02:18.397

如果您希望元素从下方向上移动，则不应设置负边距顶部。在我个人看来，Chrome 是唯一能够“逻辑”呈现代码的浏览器。

我在这里做了一个例子，我认为你想要的：http: [//jsfiddle.net/QLBvh/1/](http://jsfiddle.net/QLBvh/1/)

# android - Android 访问另一个应用程序的数据库

> ID：10045907
> 
> 赞同：1
> 
> 时间：2012-04-06T15:54:58.057
> 
> 标签：android, database, root

我正在创建一个 android 应用程序，我想直接访问另一个应用程序的数据库文件（从中读取）。解决此问题的最佳方法是什么，因为应用程序是相互沙盒化的。我可以让应用程序需要 root 权限，我只是不确定最好的方法是什么。

我是否应该在每次启动时使用 su 命令将数据库复制到我的应用程序的本地区域，然后使用该数据库？还是我应该直接访问数据库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T16:03:02.010

你在开发这两个应用程序吗？如果是这样，那么**正确**的方法是使用[ContentProviders](http://developer.android.com/guide/topics/providers/content-providers.html)如果您不使用数据库开发应用程序，请与开发人员一起检查它是否提供`ContentProvider`.

如果您尝试访问的带有数据库的应用程序没有提供访问其数据的简单方法，那么没有 root 用户就无法做到这一点，此时您的问题变得更加困难。

# .net - 没有网络服务器的单元测试 ASP.NET MVC 3 Restful Service

> ID：10045911
> 
> 赞同：1
> 
> 时间：2012-04-06T15:55:16.617
> 
> 标签：.net, asp.net-mvc-3, unit-testing, rest

我目前正在编写一个 MVC3 应用程序，该应用程序将公开一个 restful api。基本上我所做的只是提供一些返回 json 对象而不是视图和正确处理动词的控制器方法（即放置帖子等）。

我不确定如何对restful api进行单元测试。我可以直接在 c# 中调用控制器，但这意味着我不是“吃我自己的狗粮”（它将使用这个 api 的第三方）。所以目前在我的单元测试中，我使用 HttpWebRequest 来创建访问真实 Web 服务器的请求。这不太令人满意，因为我现在必须在我的构建机器上运行一个网络服务器。还有另一种方法可以做到这一点吗？即模拟一个真实的Web 请求，如果它在IIS 中运行，它将如何影响代码的所有部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T19:12:42.797

单元测试意味着测试一个独立的代码单元，在你的例子中是控制器。如果您想端到端测试整个系统，则更多的是集成测试。

您也许可以使用 iis 7 可托管 Web 核心在您自己的流程中设置集成测试：

[http://blogs.iis.net/carlosag/archive/2008/04/14/host-your-own-web-server-in-your-application-using-iis-7-0-hostable-web-core。 aspx](http://blogs.iis.net/carlosag/archive/2008/04/14/host-your-own-web-server-in-your-application-using-iis-7-0-hostable-web-core.aspx)

# html - 我需要在容器中包装长文本

> ID：10045912
> 
> 赞同：4
> 
> 时间：2012-04-06T15:55:19.140
> 
> 标签：html, css, containers, word-wrap

我在容器中包装文本时遇到问题。我已经搜索过了，所有答案都输入了，`word-wrap: break-word;`但它对我不起作用。我一定是做错*了什么*，但我很难找到什么。

这是网站，因此您可以搜索源代码：[http ://www.simplistico.net/](http://www.simplistico.net/)

任何帮助是极大的赞赏。

编辑：另外，容器背景是红色的，所以你可以清楚地看到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:01:08.240

为什么不在 p 标签上设置宽度？

```
p {
width:65%;
} 
```

**编辑：**

也许我应该更清楚。如果容器内已经有 p 标签，则不一定需要像上面那样做。你可以做类似的事情。

```
#container p {
width:65%;
} 
```

这样，只有指定容器内的 p 标签会受到影响。

默认情况下，ap 标签将拉伸其容器的 100%。另外请记住，分词和自动换行是 CSS3 属性，默认情况下仅适用于某些浏览器。[http://www.w3schools.com/cssref/css3_pr_word-break.asp](http://www.w3schools.com/cssref/css3_pr_word-break.asp)

分词也只会在容器的边界处中断。并且因为您在另一个容器内有一个默认宽度为 100% 的 ap 标签，超出了您的“红色背景”容器。它将在该容器的边界处破裂。所以从技术上讲，它是有效的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:28:14.863

如果你要定位`content`，那么你必须明确地给它一个宽度。

尝试：

```
content { width: 600px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:33:39.087

首先你的css文件应该是`.content {}`（现在有一个错字——`content {}`所以它里面的任何东西都没有任何效果）。

不了解 HTML5 标签`<nav>`，所以我将`<ul>`标签设置为 class: `<ul class="nav">`。然后在 css 文件中添加了一个新样式：`nav {float:left}`并删除了该`p{word-wrap: break-word;}`样式。这几乎完美无缺。红色背景在内容结束的地方结束，因此需要注意。

更新：为了让红色背景颜色一直向下添加一个 css 样式`.clearfloat{clear:both;}`并将其放入 .html 文件`<br class="clearfloat" />`中最后一段之后的 html 文件中`<content>`。

UPDATE2：抛弃 css 文件的属性`position`和`left`属性，`.content`并调整它们的边距，`<nav>`使`<content>`它们对齐。

# asp.net-mvc - 如何在 DropdownlistFor 上使用修剪

> ID：10045916
> 
> 赞同：0
> 
> 时间：2012-04-06T15:55:37.877
> 
> 标签：asp.net-mvc, asp.net-mvc-2

```
Benefit Set: </label><br />
                 <%: Html.DropDownListFor(model => model.bvODSMapping.Benefit_Set, Model.BenefitSet,new {id="BSet", style = "width:230px;" })%> 
```

当我使用 model=>model.bvODSMapping.Benefit_Set.Trim()

我得到值不能为空。

任何人都可以帮我解决如何修剪字符串吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:50:15.597

我想最好在将模型传递给您的视图之前修剪这些值。不过，这可能会有所帮助：

```
@Html.DropDownListFor(
  model =>
  model.bvODSMapping.Benefit_Set,
  Model.BenefitSet.Select(
    item => 
    new SelectListItem
    {   
      Selected = item.Selected, 
      Text = item.Text.Trim(), 
      Value = item.Value
    }),
  new { id = "BSet", style = "width:230px;" }) 
```

# windows - 如果我的 repo 在 Windows 机器上，我可以让 git 发送一封带有 post-receive-email 脚本的电子邮件吗？

> ID：10045917
> 
> 赞同：3
> 
> 时间：2012-04-06T15:55:40.573
> 
> 标签：windows, git, email

我已经看到了很多在仓库收到新推送时发送电子邮件的示例，但它们似乎都是针对 linux 机器上的仓库的，这可能与我在 Windows 机器上的仓库有关吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T15:59:39.337

Windows 机器往往不会附带简单的内置邮件发送脚本。但是，您可以安装一个程序来发送邮件，然后在`post-receive`挂钩中使用该程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T15:59:55.177

当然，即使您正在运行 Windows，您也可以使用任何类型的脚本语言，例如 Python 或 Ruby，它们很容易在 Windows 上安装。只需在脚本顶部创建一个 hashbang：

```
#!C:\Python26\python 
```

使用 python，发送邮件、与数据库交谈或其他任何事情都是小菜一碟。

# visual-studio-2010 - 加载特定项目时VS2010崩溃，我应该停止进行单元测试吗？

> ID：10045920
> 
> 赞同：0
> 
> 时间：2012-04-06T15:55:43.677
> 
> 标签：visual-studio-2010, unit-testing, crash, project

我的解决方案中有一个测试项目。它包含在一个封闭的解决方案文件夹中。我打开这个文件夹，我得到了通常的

> VS 停止工作 Windows 正在“寻找问题的解决方案” *（骗你）*

然后关闭。

我发现我可以右键单击该文件夹并在此解决方案文件夹中选择卸载项目，然后该文件夹打开，但是当我尝试重新加载项目时它崩溃了。

然后我删除了该项目，并创建了一个新项目，将所有文件移动到这个新项目中，重新配置了一个构建后事件（xcopy from`$(ProjectDir)`到`$(OutDir)`文件夹中的几个文件），它工作正常。

现在又崩溃了……

也许这是微软告诉我不要做单元测试的方式？:(

# java - 在Java中计算弧角

> ID：10045921
> 
> 赞同：0
> 
> 时间：2012-04-06T15:55:52.450
> 
> 标签：java, graphics, awt, angle

当我右键单击 Jframe 时，会出现这个饼图。我想要的是在点击事件发生时计算每个饼图的角度。

```
 Color[] c = {Color.BLACK, Color.RED, Color.BLUE, Color.YELLOW, 
                     Color.GREEN, Color.CYAN, Color.MAGENTA, Color.PINK};
        for(int i=0; i<8; ++i){
            g.setColor(c[i]);
            g.fillArc(x, y, w, h, i*45, 45);
        } 
```

这是我尝试过的

```
 public void mouseClicked(MouseEvent e) 
        {

              PointerInfo a = MouseInfo.getPointerInfo();
               Point d  = a.getLocation();
               x1 = (int)d.getX();
               y1 = (int)d.getY();
               int base=x1-CenterX;
               int prep=CenterY-y1;
               double tan=prep/base;
               double angle=Math.atan( tan);
  } 
```

但计算出的角度不正确。它有时让我除以零例外。这是我的右键单击事件，它显示了菜单。

```
 public void mousePressed(MouseEvent e) {
            if(e.isPopupTrigger())
            {
                CenterX=e.getX();
                CenterY=e.getY();
              try {
                    Thread.sleep(300L);
                } catch (InterruptedException ex) {
                    Logger.getLogger(animate.class.getName()).log(Level.SEVERE, null, ex);
                }
        p.repaint();
            }
        }

        @Override
        public void mouseReleased(MouseEvent e) {
            if(e.isPopupTrigger()){
               s=e.getX();
                as=e.getY();
                p.mx=e.getX(); 
        p.my=e.getY(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:16:26.357

`base == 0`是的，如果，即如果 ，将发生除以零`x1 == CenterX`。

使用[Math.atan2](http://docs.oracle.com/javase/6/docs/api/java/lang/Math.html#atan2%28double,%20double%29)。它将 x/y 坐标转换为角度，并为您处理所有杂乱的数学运算。

# c# - 使用 SQL Server 数据库的 C# 应用程序

> ID：10045925
> 
> 赞同：2
> 
> 时间：2012-04-06T15:56:14.670
> 
> 标签：c#, visual-studio, sql-server-2008, sql-server-ce

这听起来可能是一个愚蠢的问题，但我真的花了几个小时试图找到解决方案......

我在 SQL Server 上有一个本地数据库，它与 C# 应用程序一起使用。我查看数据库的唯一方法是通过 SQL Server。当我在开发 PC 上运行应用程序时，它可以在我的应用程序中访问和更改，但是当我在另一台 PC 上运行它时，找不到数据库（显然）.. 在编译程序时如何包含数据库源（这样当我在其他 PC 上运行它时也会找到它）？

最初我使用 SQL Server CE 并实现了可移植性，但我必须包含存储过程，而这个版本不接受它们：/ 所以我不得不将注意力转向后一种类型。

对不起我糟糕的英语！:(

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-06T15:59:55.447

> 编译程序时如何包含数据库源（以便在其他 PC 上运行时也能找到它）？

你不能。SQL Server 许可证禁止像那样分发它的一部分，而且没有记录的方法可以做到这一点。如果您需要在盒子上安装 SQL Server，它需要来自安装程序。您可以为自己的产品创建安装程序，如果需要作为先决条件，您的安装程序可以安装 SQL Server。

或者，您可以查看其他数据库选项，例如基于文件的数据库的[SQLite](http://www.sqlite.org/)。您*可以*分发 SQLite 的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T16:20:44.440

如果您在运行应用程序的每台电脑上都需要一个本地 sql 服务器，那么您应该查看 MS SQL Server 的[Express](http://www.microsoft.com/sqlserver/en/us/editions/express.aspx)版本。它是 MS SQL Server 的免费有限制版本。

# java - 使用 maven-bundle-plugin 安装 OSGi 依赖项

> ID：10045928
> 
> 赞同：11
> 
> 时间：2012-04-06T15:56:25.727
> 
> 标签：java, maven, osgi, maven-bundle-plugin

我有一个编译成 OSGi 包的 java 项目。我正在使用 maven-bundle-plugin 创建包，并使用 maven-sling-plugin 将包推送到我正在运行的 OSGi 服务器。目前，我的项目有两个依赖项（Guava 和 Gson）需要在安装 bundle 之前手动安装在 Felix 服务器中。这两个依赖包的手动安装只需要发生一次（当第一次设置 OSGi 服务器时），但由于它是一个手动过程，我有点想把它推到“mvn install”阶段。

我查看了许多 maven 插件（maven-sling-plugin、maven-ipojo-plugin、依赖插件等），但恐怕我没有足够的知识知道从哪里开始，甚至在 Stackoverflow 中搜索解决方案（我怀疑这已经得到了回答）。

那么 - 有没有一种干净的方法来安装/启动 Maven 依赖包？我可以指定一个 jar 和一个运行级别，并在安装我的包之前进行安装？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T21:59:05.563

Ops4j pax 构造项目可能会有所帮助：[http ://team.ops4j.org/wiki/display/paxconstruct/Pax+Construct](http://team.ops4j.org/wiki/display/paxconstruct/Pax+Construct)

看起来可以使用 maven 指定要安装的捆绑包，然后按照此处所述启动 felix osgi 环境：

[http://www.sonatype.com/books/mcookbook/reference/ch01s04.html](http://www.sonatype.com/books/mcookbook/reference/ch01s04.html)

# c# - Windows Phone 声音播放

> ID：10045929
> 
> 赞同：0
> 
> 时间：2012-04-06T15:56:26.843
> 
> 标签：c#, .net, silverlight, windows-phone-7, audio-streaming

我有很多`.wav`文件要播放，因此我创建了`AudioItem`类：

```
public class AudioItem
{
    public string SongName { get; set; }
    public string SongText { get; set; }

    public AudioItem()
    { }

    /// <summary>
    /// Initialize AudioItem class
    /// </summary>
    /// <param name="SongName">The name of the song(with .wav)</param>
    /// <param name="SongText">Text to display</param>
    public AudioItem(string SongName, string SongText)
    {
        this.SongName = SongName;
        this.SongText = SongText;
    }

    public void Play()
    {
        var stream = TitleContainer.OpenStream("Sound/" + SongName);
        var effect = SoundEffect.FromStream(stream);
        FrameworkDispatcher.Update();
        effect.Play();
    }

} 
```

在视图中我有一个`Listbox`项目：

```
<ListBox Name="soundtrackLbx">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <Button Name="ListButton" HorizontalAlignment="Stretch" >
                            <Button.Content>
                                <StackPanel Orientation="Horizontal">
                                    <Image Margin="10" Height="30" Width="30" Source="Picture/audio.png"/>
                                    <TextBlock Margin="10" HorizontalAlignment="Stretch" Text="{Binding SongText}" FontFamily="Verdana" Tap="TextBlock_Tap" />
                                </StackPanel>
                            </Button.Content>
                        </Button>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

我背后的代码：

```
public ObservableCollection<AudioItem> AudioItems { get; set; }

    public MainView()
    {
        InitializeComponent();
        AudioItems = new ObservableCollection<AudioItem>();

        Initialize();
        this.soundtrackLbx.ItemsSource = AudioItems;
    }

    private void Initialize()
    {
        AudioItems.Add(new AudioItem("ApsolutnoDa.wav", "Apsolutno da"));
        AudioItems.Add(new AudioItem("Da.wav", "Da"));

    }

    private void TextBlock_Tap(object sender, GestureEventArgs e)
    {
        TextBlock tblock = sender as TextBlock;
        string text = tblock.Text;

        AudioItem item = AudioItems.SingleOrDefault(a => a.SongText == text);
        item.Play();
    } 
```

好吧，`.wav`有时我会听到他们演奏，有时我不会，我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T10:39:41.497

好的。在这里，如果有人像我一样被困。问题是因为我将`Tap`事件设置在 上`Textblock`，而不是`Button`.

我是如何从中获取内容的`Button.Content`？

我使用`tag`属性并将其绑定到`SongName`属性。

# php - PHP SimpleXML 语法错误

> ID：10045941
> 
> 赞同：0
> 
> 时间：2012-04-06T15:57:27.770
> 
> 标签：php, simplexml

我正在开发 Twitterbot 后端应用程序，我正在尝试将直接消息复制到可以保存然后读取的字符串中。如果我想成功地将其集成到我的 AIML（人工智能标记语言）引擎中。

当我运行文件来测试它时，我得到一个 Parse 错误：

```
syntax error, unexpected T_VARIABLE referring to the line "file_put_contents('Program-O/InfoBot2012/test.xml', $direct_messages);" 
```

我检查了语法，没有明显的错误，因为我关注[了这个](https://stackoverflow.com/questions/1479315/php-simplexml-load-file)线程。

```
$connection = new TwitterOAuth($consumer_key,$consumer_secret, $oAuthToken,  $oAuthSecret);

$direct_messages = $connection->get('direct_messages');

$direct_messages = file_get_contents('https://api.twitter.com/1/direct_messages.json')
file_put_contents('Program-O/InfoBot2012/test.xml', $direct_messages);

$direct_messages = simplexml_load_file("test.xml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:54:32.413

您必须启用 php_openssl.dll（因为您使用的是 Windows，所以是 dll）。

您可以通过打开 php.ini（通常是 xampp/EasyPHP 文件夹中的 apache/bin/php.ini）来执行此操作，然后删除“;” 在“extension=php_openssl.dll”行之前（所以你取消注释），或者在文件底部添加“extension=php_openssl.dll”。

这样 php_openssl.dll 将被加载，PHP 将知道如何处理 HTTPS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T16:02:16.387

```
$direct_messages = file_get_contents('https://api.twitter.com/1/direct_messages.json')
                                                                                      ^-- 
```

`;`在我标记的地方你错过了一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:57:39.677

根据关于[direct_messages api](https://dev.twitter.com/docs/api/1/get/direct_messages)的 Twitter 文档，该请求`https://api.twitter.com/1/direct_messages.json`将返回一个 JSON 响应，您正在尝试将其保存并加载为 XML。

试试`https://api.twitter.com/1/direct_messages.xml`吧。

希望能帮助到你。

# php - 如果值包含非拉丁词，则表单提交按钮返回 null

> ID：10045942
> 
> 赞同：0
> 
> 时间：2012-04-06T15:57:34.840
> 
> 标签：php, forms, codeigniter, submit

这是我的 HTML：

```
 <?php echo form_open(base_url().'admin'); ?>
        <div class="row username">
            <span class="icon"></span>
            <input type="text" value="" name="username" placeholder="Όνομα" />
        </div>
        <div class="row password">
            <span class="icon"></span>
            <input type="password" value="" name="password" placeholder="Κωδικος Πρόσβασης" />
        </div>
        <div class="row button">
            <input type="submit" value="Σύνδεση" name="submit" />
        </div>
    <?php echo form_close(); ?> 
```

所以按钮的值为“Σύνδεση”，当我单击提交按钮时，它什么都不返回（空字符串）......

如果我将其替换为“登录”之类的文本，它将起作用...

为什么它不允许我使用非拉丁字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:15:09.820

您是否将所有内容都发布在同一页面上？如果您将其发布在不同的页面上，请确保您在那里也有相同的内容类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T20:35:37.127

确保您的 php 文件以 utf-8 编码。您可以使用像 EditPad 这样的文本编辑器程序来检查它。然后您可以考虑使用表单属性`accept-charset`并将其设置为 UTF-8。确保您的页面元数据也是 utf-8。最后检查 codeigniter 应用程序 config.php 并确保`$config['charset'] = 'UTF-8'`. 希望这可以帮助。

另外，确保`validation rules`除了基本的拉丁语之外，您没有其他的阻止输入的方法`alpha-dash`

另外关于php文件编码，尽量确保`BOM`没有设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T15:22:53.370

问题是我的 MAMP 版本太旧，出了点问题……所以我删除了它并为 Mac OSX 添加了 XAMPP，现在它很好。

# c - 查找数组中元素的最大和的算法，使得相邻的元素不超过 k

> ID：10045944
> 
> 赞同：8
> 
> 时间：2012-04-06T15:57:38.843
> 
> 标签：c, algorithm, dynamic-programming

我遇到了这个问题。给定一个仅包含正值的数组，您希望在不超过 k 个选定元素的组相邻的约束下最大化选定元素的总和。例如，如果输入是 1 2 3 1 7 9（n=6 和 k =2）。输出将是 21，它来自于选择元素 _ 2 3 _ 7 9。我的简单 DP 解决方案是这样的

```
#include<stdio.h>
#include<limits.h>
#include<malloc.h>

long maxsum(int n,int k,long *sums){
    long *maxsums;
    maxsums = malloc(sizeof(long)*n);
    int i;
    long add  = 0;
    for(i=n-1;i>=n-k;i--){
        add += sums[i];
        maxsums[i] = add;
    }

    for(i = n-k-1;i>=0;i--){
        int j;
        long sum =0,max = 0,cur;
        for(j=0;j<=k;j++){
            cur = sum;
            if((i+j+1)<n)
                cur += maxsums[i+j+1];  
            if(cur > max) max = cur;
            sum += sums[i+j];
        }
        maxsums[i] = max;
    }
    return maxsums[0];
}

int main(){
    int cases=0,casedone=0;
    int  n,k;
    long *array;
    long maxsum = 0;
    fscanf(stdin,"%d %d",&n,&k);
    array = malloc(sizeof(long)*n);
    int i =0;
      while(casedone < n){
            fscanf(stdin,"%ld",&array[casedone]);
        casedone++;
      }
    printf("%ld",maxsum(n,k,array));
} 
```

但我不确定这是否是有效的解决方案。是否可以进一步降低复杂度？谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-14T11:47:33.703

您的代码是正确的（至少想法是正确的），而且，到目前为止，我还没有发现任何错误的测试数据。按照你的想法，我们可以列出DP方程

`P(v)=max{sum(C[v]~C[v+i-1])+P(v+i+1),0<=i<=k}`

在这个等式中，P(v) 表示 {C[v]~C[n]} 中的最大值（我们让 {C[1]~C[n]} 是整个列表），所以我们只需要确定 P (1)。

到目前为止我还没有找到更好的解决方案，但是你的代码可以优化，确定P(v)后，你可以保存数据i，所以当你找到P(v-1)时，你可以比较sum( C[v-1]+C[v]~C[v+i-1])+P[v+i+1] with P[v+1]+C[v] 当 i!=k 时，最差复杂度是一样的，但最好的复杂度是线性的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T17:52:07.103

我认为这会起作用：

```
findMaxSum(int a[], int in, int last, int k) { // in is current index, last is index of last chosen element
    if ( in == size of a[] ) return 0;
    dontChoseCurrent = findMaxSum(a, in+1, last, k); // If current element is negative, this will give better result
    if (last == in-1 and k > 0) { // last and in are adjacent, to chose this k must be greater than 0
        choseCurrentAdjacent = findMaxSum(a, in+1, in, k-1) + a[in];
    }
    if (last != in-1) { // last and in are not adjacent, you can chose this.
        choseCurrentNotAdjacent = findMaxSum(a, in+1, in, k) + a[in];
    }
    return max of dontChoseCurrent, choseCurrentAdjacent, choseCurrentNotAdjacent
} 
```

# facebook-graph-api - 请求 Facebook 用户时未调用 getJSON 回调

> ID：10045945
> 
> 赞同：0
> 
> 时间：2012-04-06T15:57:41.873
> 
> 标签：facebook-graph-api, spotify

我通过我的 Spotify 应用程序成功地向 Facebook 验证用户，但随后我尝试请求用户信息并且我的 .getJSON 回调从未被调用。这是我的代码：

```
auth.authenticateWithFacebook(facebookAppId, facebookPermissions, {
onSuccess: function(accessToken, ttl) {
    var request_url = 'https://graph.facebook.com/me';
    var url = request_url + '?access_token=' + accessToken;
    $.getJSON(url, function(data) {
      alert("Working");
    });
  },
onFailure: function(error) {
  console.log("Authentication failed with error: " + error);   
},
onComplete: function() { }
}); 
```

我尝试使用 $.ajax，添加 &callback=?, &callback=myFunction 但没有任何效果......有人知道这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T10:08:06.720

确保将 graph.facebook.com 添加到文件中的`RequiredPermissions`键中`manifest.json`。

# javascript - 如何在不传递回调函数的情况下将嵌套对象属性作为选项传递？

> ID：10045951
> 
> 赞同：0
> 
> 时间：2012-04-06T15:58:12.927
> 
> 标签：javascript, json

我正在编写一个简单的 jQuery 插件，它将与 JSON 对象/数组交互。我想让该对象数组足够灵活，以便人们可以将自己的对象数组传递给插件函数。我希望用户能够通知插件如何获取 JSON 对象中的两个不同值。例如，假设这是 JSON——

```
[
    {
      name: "Baseball Opening Day",
      format: "jpg",
      urls: {
        small: "http://myurl.com/images/small/baseball.jpg",
        big: "http://myurl.com/images/big/baseball.jpg"
      }
    },

    // etc.
] 
```

如果插件“知道”它将被传递一个图像对象数组，但是这些图像对象可能以多种方式格式化，我们如何传递一个选项来告诉它在哪里可以找到各种东西？例如，如果我想显示一个标题，我会要求对标题值的引用。这个相当简单：

```
$("gallery").myPlugin({
  references: {
    caption: "name"
  }
}); 
```

在插件内部，一旦我们遍历收集的图像对象，我们就可以得到这样的值：

```
// Assuming the value passed in is called "options"...
var caption = image[options.references.caption]; 
```

这将被解释为与 image.name 相同的 image["name"] 并且可以正常工作。

但是你如何告诉插件如何访问 image.urls.small 呢？你不能这样做：

```
$("gallery").myPlugin({
  references: {
    caption: "name",
    urlSmall: "urls.small"
  }
}); 
```

因为它会被解释为 image["urls.small"] 并返回`undefined`。

有没有办法通过这个？或者到那时我是否必须使用这样的回调函数：

```
$("gallery").myPlugin({
  references: {
    caption: "name",
    urlSmall: function () {
      return this.urls.small;
    }
  }
});

// Call it like this inside the plugin image loop
var urlSmall = options.references.urlSmall.call( image ); 
```

我知道这是一个选项，但我想知道是否有办法避免强迫用户编写回调函数，如果他们可以传递对嵌套对象属性的引用，而不是不知何故？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T16:21:28.450

您只需要一个可以拆分这些属性名称的方法。[http://jsfiddle.net/mendesjuan/CUMgL/](http://jsfiddle.net/mendesjuan/CUMgL/)

```
var a = {
  b: {
    c: 2
  }
};

getProp(a, 'b.c') // returns 2

function ​getProp(obj, propName)​ {
    var parts = propName.split('.');

    for (var i=0; i < parts.length; i++) {
       obj = obj[parts[i]];
    }
    return obj;
} 
```

在你的插件里面，你可以做

```
// Assuming the value passed in is called "options"...
var caption = getProp( image, options.references.caption ); 
```

理想`getProp`也可以与 一起使用`getProp('a[b]')`，但这有点困难，因此您可以根据需要实现它。Ext-JS 有一个叫做 a 的东西`Ext.data.reader.JsonReader`，你可以用它作为灵感[http://docs.sencha.com/ext-js/4-0/source/Json2.html#Ext-data-reader-Json](http://docs.sencha.com/ext-js/4-0/source/Json2.html#Ext-data-reader-Json)看对于方法`createAccessor`

# java - 秋千中的交互式平面直线图

> ID：10045958
> 
> 赞同：2
> 
> 时间：2012-04-06T15:58:56.523
> 
> 标签：java, swing

我正在尝试在 JApplet 上绘制交互式平面直线图 (PSLG)。我正在使用鼠标单击来确定 PSLG 的顶点。

这是我为绘制 PSLG 1 的边缘而遵循的算法。用户执行鼠标单击的点被添加为 PSLG 的顶点。2\. 如果他点击第二个点，直接在该点和之前点击的点之间创建一条边

以下是由于使用此算法而观察到的某些缺陷：

1.  无法创建不相交的平面集，比如只说一条线段
2.  仅当用户单击起点所在的确切位置时才会创建封闭多边形在一定的公差范围内]。

我在这里检查了一些类似的问题，人们建议使用**JFreeChart**库。但据我所知，这些问题的场景是 PSLG 的要点是已知的。我不知道**JFreeChart**是否可用于创建交互式 PSLG

我考虑过添加点并有一个按钮，上面写着在点之间添加边，但如果是这种情况，选择 2 个点仍然会涉及 2 中遇到的邻近问题。

我想知道是否有人可以建议我更好地处理这种情况。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T17:36:08.120

[`GraphPanel`](http://sites.google.com/site/drjohnbmatthews/graphpanel)可以适应这项任务，尽管它可能会受益于更先进的[边缘模型](http://en.wikipedia.org/wiki/Planar_straight-line_graph)以加快搜索速度。还要考虑[`JGraph`](http://www.jgraph.com/)。

# jquery-mobile - asp.net mvc TextAreaFor 未作为必填字段进行验证

> ID：10045964
> 
> 赞同：6
> 
> 时间：2012-04-06T15:59:17.243
> 
> 标签：jquery-mobile, razor, unobtrusive-validation

我有一个数据输入字段，我正在收集笔记。每个注释都需要注释数据元素。这是我的模型：

```
public interface INoteDataEntryViewModel : IMobilePageDataContract
{
    int CourseId { get; set; }

    [Required(ErrorMessage = @"Note is required")]
    String Note { get; set; }

    [DisplayName(@"Note Date")]
    DateTime NoteDate { get; set; }
} 
```

您可以看到我有 Note 属性的Required 属性。

我正在使用 Razor 显示数据输入表单元素：

```
<div data-role="fieldcontain">
    @Html.LabelFor(m => m.Note)
    @Html.TextAreaFor(m => m.Note)
    @Html.ValidationMessageFor(m => m.Note)
</div> 
```

当我使用“@Html.TextAreaFor”时，必填字段没有验证，我可以提交表单。但是，如果我更改为“@Html.TextBoxFor”，则会对必填字段进行验证，并且我无法提交表单。关于 TextAreaFor 为什么验证失败的任何想法？我正在使用不显眼的 ajax 并且是 jQueryMobile。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-18T19:11:35.713

客户端验证不适用于 Html.TextAreaFor() 帮助程序，这是[Codeplex 上报告的相关问题](http://aspnet.codeplex.com/workitem/8576)。

为了让它工作，你必须用属性装饰'Note'`[DataType(DataType.MultilineText)]`属性。并且在视图中，使用`Html.EditorFor()`helper 而不是`Html.TextAreaFor()`helper 方法。

更新模型：

```
public interface INoteDataEntryViewModel : IMobilePageDataContract
{
    int CourseId { get; set; }

    [Required(ErrorMessage = @"Note is required")]
    [DataType(DataType.MultilineText)]
    String Note { get; set; }

    [DisplayName(@"Note Date")]       
    DateTime NoteDate { get; set; }
} 
```

看法：

```
<div data-role="fieldcontain">
    @Html.LabelFor(m => m.Note)
    @Html.EditorFor(m => m.Note)
    @Html.ValidationMessageFor(m => m.Note)
</div> 
```

# wpf - ListView 中的垂直网格线

> ID：10045966
> 
> 赞同：3
> 
> 时间：2012-04-06T15:59:25.453
> 
> 标签：wpf, listview, gridlines

我有一个用作 GridView 的 WPF ListView。有什么办法可以在那里获得垂直网格线？

ListView 指定了 MinHeight，所以我希望 GridLine 一直到网格的底部，所以它会填充空白空间。

这似乎是一个相当棘手的问题。有可能解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T18:13:38.603

我就是这样做的。

```
 <ListView Grid.IsSharedSizeScope="True"
                ItemsSource="{Binding Path=MyList,FallbackValue='12345'}" >
        <ListView.ItemTemplate>
          <DataTemplate>
            <Grid>
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="3*" SharedSizeGroup="col0"/>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="1*" SharedSizeGroup="col2"/>
              </Grid.ColumnDefinitions>
              <TextBlock Grid.Column="0" Margin="10,0"
                       Text="{Binding Path=Name, FallbackValue='Name goes here'}"/>
              <Border Grid.Column="1" Margin="0,-2"
                    BorderBrush="DarkGray" 
                    BorderThickness="0,0,1,0" />
              <TextBlock Grid.Column="2" Margin="10,0"
                       Text="{Binding Path=DateModified, FallbackValue='Date goes here'}"/>
            </Grid>
          </DataTemplate>
        </ListView.ItemTemplate>
      </ListView> 
```

`SharedSizeGroup`和`Grid.IsSharedSizeScope`属性是这种方式的关键。上的`Margin="0,-2"`属性`Border`确保分割线看起来像一条连续的垂直线。如果为两个文本块添加垂直边距，则需要增加边框的负垂直边距。

这将负责将事物排列成两个大小一致的列，它们之间有一条垂直线，但它不会延伸到没有数据的区域。如果您想要该功能，ListView 可能不是最佳选择。

将一些数据添加到`MyList`ViewModel 中的属性会得到以下结果： [![在此处输入图像描述](../Images/cbc990e21425d85cdb2464a40f5c0f8b.png)](https://i.stack.imgur.com/Uo4ru.png)

当然，`MyList`属性需要是具有`Name`和`DateModified`作为属性的类的列表或集合。

# delphi - 为什么我在控制台打印 PChar 时会出现问号？

> ID：10045967
> 
> 赞同：1
> 
> 时间：2012-04-06T15:59:28.990
> 
> 标签：delphi, console

我的应用程序中有以下功能：

```
function GetDeviceChannelInfo_HSI(PortNumber, Address, ChNumber: Integer;
  var State: Integer): PChar; stdcall; external DLL_FILENEAME; 
```

我要做的就是将结果打印到控制台。但是会发生什么，当我调用`WriteLn`它时，我得到的只是`???????????`响应。

我假设控制台不知道如何打印它。也许它是Unicode或其他东西，它不能被打印？

我是 Delphi 的新手，真的不知道为什么会这样。我实际上是在打印指针地址吗？我真的不知道。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-06T16:11:19.337

您没有打印指针地址。如果你是，你会得到一个看起来像地址（十进制或十六进制数）的东西，而不是问号。

自 Delphi 2009 起，`PChar`是指向 Unicode 字符的指针。如果您使用的是该版本或更高版本，请确保这是您的函数真正返回的内容。该函数更有可能返回一个指向非 Unicode 字符的指针——如果你从函数返回的 C 代码中翻译它，它将返回一个指针`char*`。该类型的正确 Delphi 翻译是`PAnsiChar`.

当您打印不是真正字符的宽字符，或者在当前字体中没有表示的宽字符时，您通常会得到问号。

如果您使用的是较早的 Delphi 版本，并且该函数确实返回`PWideChar`( `wchar_t*`, 在 C 中)，那么您可能会遇到相反的问题，当函数为您提供宽字符时打印窄字符。不过，这不太可能，因为您收到的宽字符无论如何都是 ASCII 的问题，因此您的程序将在打印第一个字符并遇到构成宽字符后半部分的 nul 字节后停止。

您可以使用调试器让自己了解您真正拥有的东西。获取函数提供给您的地址，然后在内存浏览器（CPU 视图的一部分）中访问该地址。您可以让 Delphi 以不同的格式显示内存，包括字符、宽字符和各种宽度的数字。如果您对应该得到的结果有所了解，这也会有所帮助。然后你可能会识别出记忆中的模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T16:11:08.123

好吧，如果这是错误的，您可能需要发布更多代码，但我本以为会有类似的事情

```
Var
  FuncResult : String;
Begin
  FuncResult := GetDeviceChannelInfo( ...);
  WriteLn(FuncResult);
End; 
```

去工作。

基本上只是强制从 PChar 到 String 的一些隐式转换；

# php - Codeigniter 分页 - 多个表

> ID：10045969
> 
> 赞同：0
> 
> 时间：2012-04-06T15:59:38.133
> 
> 标签：php, sql, sql-server-2008, codeigniter, codeigniter-pagination

我需要对多个结果集进行分页，到目前为止我的查询是这样的：

```
// setting offset for pagination
            $offset=is_numeric($this->uri->segment($page_segment))?
                                $this->uri->segment($page_segment):
                                0;

     $q = "
    SELECT 
      Notices.Id, 
      NoticeLoc.Notices_Id,
      Loc.Id as Loc_Id, 
      CAST(Notices.Text AS TEXT) as Text, 
      CAST(Notices.Title AS TEXT) as Title, 
      Notices.CDate as RDate 
    FROM NoticeLoc 
      JOIN Notices ON NoticeLoc.Notices_Id=Notices.Id JOIN Loc ON NLoc.Loc_Id=Loc.Id WHERE Loc_Id IN (1)

    UNION 

    SELECT  
      Notices.Id, 
      '',
      '', 
      CAST(Notices.Text AS TEXT) as Text, 
      CAST(Notices.Title AS TEXT) as Title, 
      Notices.CDate as RDate 
    FROM NoticeC 
      JOIN Notices ON NoticeC.Notices_Id=Notices.Id WHERE C_Id=110 AND CDate BETWEEN '10/01/2011' AND '07/14/2025' ORDER BY RDate desc ";

$query = $this->db->query($q);
//result array
    $Notices = $query->result_array();
//count total number of records in query    
    $recCnt = count($Notices);

//pagination
//slice array, so that you only get the amount defined in the limit
$config['total_rows'] = array_slice($query, $page_segment , $limit);
$config['per_page'] = $limit;

$this->pagination->initialize($config);

//pass onto the controller

return array("paging"=>$this->pagination->create_links(),"notices"=>$notices); 
```

我似乎无法让最后一部分工作，页面成功加载所有通知，但分页失败。页面最终显示所有通知，而不是在切片数组后显示特定通知。

知道为什么吗？

干杯。

像这样修复它：

```
$config['total_rows'] = $recCnt; 
```

然后在最后写道：

```
 $notices = array_slice($notices, $offset , $limit); 
```

换句话说，原始查询获取完整的结果集并将其放入数组中，然后根据页面的偏移量对其进行切片。

# iphone - 逻辑问题 - 在标签上显示数字作为标题

> ID：10045972
> 
> 赞同：1
> 
> 时间：2012-04-06T15:59:50.010
> 
> 标签：iphone, objective-c

这是一个逻辑问题。例如假设我有 4 个标签。我需要为这些标签设置一个数字作为它的标题。

标签如下；会有一个按钮，当我点击它时，标签的标题应该改变（这类似于`First in First Out`）

当我第一次单击该按钮时，它应该只显示 Label1 的 1。然后，当我第二次单击该按钮时，它应该显示 label1 和 label2 的值（值分别为 1 和 2）。问题出现在我们第 5 次尝试单击时。此时 label1 的值（原为 1）将被删除，现在应该取值为 2（每个数字向前推进）。

注意：一个实例只允许有 4 个号码。

```
L1 --- L2 --- L3 --- L4
01 --- 02 --- 03 --- 04 
02 --- 03 --- 04 --- 05
03 --- 04 --- 05 --- 06 
```

它还在继续。

我怎么能以编程方式做到这一点，我还没有编写任何代码来显示你的代码。我被这个困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T16:05:15.043

你的描述不是特别清楚。但这听起来像是您试图描述一种情况，即一次可以“激活”多个标签，并且按下按钮以某种方式在状态之间循环。如果是这样，您的代码应随时跟踪哪些标签处于活动状态。要处理按键，请检查当前状态并做正确的事。

或者也许你想保存最后四个数字，并继续增加？然后保留您拥有的四个值的列表，并跟踪要插入的下一个数字以及它将进入的位置。要知道它会去哪里，使用模运算很方便：n % 4 会去 3，然后换成 0。

现在去写一些代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T16:13:08.137

我假设您每次点击只想更改一个标签。它并不完全响应点击或设置标签，但这里有一些需要检查的东西应该会给你关于算术的答案：

```
NSInteger maxLabel = 4;
for (NSInteger clickCount = 0; clickCount < 12; clickCount++) {
    NSInteger baseValue = clickCount / maxLabel;
    NSInteger cycleValue = (clickCount % maxLabel) + 1;
    NSLog(@"Set label %i to %i", cycleValue, baseValue + cycleValue);
} 
```

另一方面，如果您尝试一次全部更改它们，则逻辑类似，除了保存 baseValue 并在更改时更新所有标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T16:15:45.863

我认为您正在尝试完成的一些伪代码（一次填写一个标签，直到全部填满，然后不断更新标签以仅显示最新的一组数字）：

```
int numLabels = 4;
onClick () {
  static int lastDisplayed = 0;
  lastDisplayed++;
  for (i from 1 to min(lastDisplayed, numLabels)) {
    label[i-1] = (i + lastDisplayed - min(lastDisplayed, numLabels));
  }
} 
```

# java - 在 JSP 中显示来自动作的不同图像

> ID：10045983
> 
> 赞同：0
> 
> 时间：2012-04-06T16:00:57.493
> 
> 标签：java, image, jsp, struts2, inputstream

我有一个迭代用户列表的 jsp 页面。每个用户都有自己的显示图片。我想显示这些显示图片。

问题是当页面加载时，所有图像都是相同的，而不是每个用户的不同图像。

迭代器中的图像标签是这样的：

```
 <img src="<s:url action="getUserImage">
                        <s:param name="user">
                             <s:property value="userId"/>
                        </s:param>
                    </s:url>"/> 
```

动作看起来像这样

`this.inputStream = ByteArrayInputStream(userService.getUserById(Integer.parseInt(user)).getDisplayPicture());`

在调试时，我发现在为每个图像执行操作时，“用户”属性总是相同的。

有趣的是，当我在浏览器上检查 imgs 元素时，src 参数都是正确的（意味着它们每个都有自己不同的值）。

我正在使用 spring 框架，自动连接动作类 .. struts.objectFactory value ="spring"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T16:26:20.780

不`userService.getUserById(Integer.parseInt(user)`应该`userService.getUserById(Integer.parseInt(userId)`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T09:11:24.420

@Component @Scope("原型")

成功了！

动作类为每个请求重用相同的 id

# wpf - 使用 SharePoint 客户端对象模型侦听列表更新

> ID：10045987
> 
> 赞同：1
> 
> 时间：2012-04-06T16:01:13.420
> 
> 标签：wpf, sharepoint, object, model, client

我正在寻找一种非常有效的方法来`List`仅使用客户端对象模型来监听 SharePoint 网站上的更改。我理解这个想法是多么落后，但我试图避免在安装时将任何库推送到 SharePoint 服务器。一切都应该放在本地机器上。

我考虑过一个类，它只是循环一个计时器并`ClientContext`从成功查询的最后一个日期开始查询，但这似乎非常低效。

我知道这是一个***客户端***对象模型，但是有没有办法从服务器获取仅来自客户端更改的通知？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T17:22:40.470

恐怕使用客户端对象模型是不可能的。如果您需要经常轮询用户体验因性能太慢而受到太多影响，则需要在服务器端捕获列表更改。部署具有将[SPItemEventReceiver](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spitemeventreceiver.aspx)注册到您的列表的功能的解决方案。

我理解您不愿意将服务器端代码推送到 SP 场；没有它，您可以将讨论和解释保存给客户的管理员。但是，有些任务只有在服务器上运行时才会更加高效甚至可行。您可以考虑使用[沙盒解决方案](http://msdn.microsoft.com/en-us/magazine/ee335711.aspx)来实现此类功能。它们*不是由场管理员*部署到 SP，而是*由网站集管理员部署到网站集*通过友好的网络用户界面。这需要更少的特权，更宽松的公司政策来遵守，并且可以更好地被您的客户接受。您可以仅在您的网站集中开发、测试甚至使用您的解决方案，而不会影响整个场。Microsoft 建议甚至在场范围内的解决方案中设计尽可能多的沙盒解决方案功能，只为场解决方案提供必要的最低限度。

如果无法将整个应用程序部署为沙盒解决方案，您可以将收集更改的沙盒解决方案与请求从网站集中收集的数据的外部网站相结合，或者在您所说的情况下与仅客户端应用程序结合使用关于。（沙盒解决方案有一个很大的限制：您不能从外部网站集*内*发出 Web 请求；您只能*从外部*访问网站集。）

--- 费尔达

# graph - 图的最低成本路径

> ID：10045988
> 
> 赞同：0
> 
> 时间：2012-04-06T16:01:38.900
> 
> 标签：graph, graph-traversal, floyd-warshall

我正在研究一个深入研究的问题：

> 有一个连通的无向图。我需要访问所有节点而不多次访问节点。我可以在任意节点开始和结束。

我该怎么办？我应该将算法`Floyd-Warshall`应用于所有可能的起始节点还是有更好的方法？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-06T16:28:31.790

访问每个节点一次且仅一次的路径称为**哈密顿路径**。寻找哈密顿路径的问题称为[哈密顿路径问题](http://en.wikipedia.org/wiki/Hamiltonian_path_problem)。

首先，这个问题是NP-Complete。运行时间最多与输入大小的多项式成正比的算法称为多项式算法。例如，大多数排序算法需要 O(N logN) 时间，小于 N^2，这使其成为多项式。

对于 NP 完全问题，没有已知的多项式时间算法。尽管目前还没有人能够证明这一点，但很可能没有针对 NP 完全问题的多项式时间算法。它的意思是：

1.  您将提出的任何算法的运行时间都将与输入大小的指数函数成正比。（即如果它在一小时内解决 40 个节点的问题，则 41 个节点需要 2 小时，42 个节点需要 4 小时，..）这是一个非常坏的消息。

2.  您将提出的算法从根本上不会比尝试和错误进行的算法快得多。

如果您的输入量很小，请从简单的回溯算法开始。如果您需要做得更好，使用“哈密顿路径”、“最长路径”等术语的谷歌搜索可能会提供答案。如果您的输入很大，最终您将不得不降低您的期望（例如，使用近似值而不是最佳解决方案来解决）。

# visual-c++ - BackgroundWorker，不能将数值以外的其他变量发送到函数回调

> ID：10045990
> 
> 赞同：0
> 
> 时间：2012-04-06T16:01:50.923
> 
> 标签：visual-c++, c++-cli, backgroundworker

后台工作者，传递变量不起作用，在我的示例中，我解释了所有内容，我只放置了重要的函数，我有来自 BackgroundWorker 的其他函数。

```
int TheFunction(unordered_map<std::string,std::string> options, BackgroundWorker^ worker, DoWorkEventArgs ^ e){

    if(options["option1"].compare("options") == 0){
            //...
        }

        return 0;
}

    void backgroundWorker2_DoWork(Object^ sender, DoWorkEventArgs^ e ){
         BackgroundWorker^ worker = dynamic_cast<BackgroundWorker^>(sender);     
        //e->Result = TheFunction( safe_cast<Int32>(e->Argument), worker, e ); //That's how I do to send an integer value and works just fine, but I don't know how to send non-numeric values with safe_cast or something that works, in the function it looks like this: TheFunction(int index, ...) it works fine, I want to know with unordered_map or with strings also would work, I want more than one argument if you can do with std::string
          e->Result = TheFunction(safe_cast<unordered_map<std::string,std::string>>(e->Argument)); //I tried this, and it didn't work

    }

void CallBackgroundWorker(){
         this->backgroundWorker2 = gcnew System::ComponentModel::BackgroundWorker;
         this->backgroundWorker2->WorkerReportsProgress = true;
         this->backgroundWorker2->WorkerSupportsCancellation = true;
         this->backgroundWorker2->DoWork += gcnew DoWorkEventHandler( this, &GUISystem::backgroundWorker2_DoWork );
         this->backgroundWorker2->RunWorkerCompleted += gcnew RunWorkerCompletedEventHandler( this, &GUISystem::backgroundWorker2_RunWorkerCompleted );
         this->backgroundWorker2->ProgressChanged += gcnew ProgressChangedEventHandler( this, &GUISystem::backgroundWorker2_ProgressChanged );

         unordered_map<std::string,std::string>* options = unordered_map<std::string,std::string>();
         options["option1"] = "valor1";
         options["option2"] = "valor2";

         this->backgroundWorker2->RunWorkerAsync(options);
} 
```

那么我该如何发送 unordered_map 或 std::string （超过 1 个参数）？

提前致谢。这会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-07T13:18:10.210

这一行：

```
unordered_map<std::string,std::string>* options = unordered_map<std::string,std::string>(); 
```

即使在标准 C++ 中也不合法。指针需要存储地址，而不是对象。所以可能你的意思是说`new`使用动态分配（毕竟，对象需要生存，直到回调在另一个线程上运行）。

此时，您可以将指针包装在 内`System::IntPtr`，并在回调中强制转换 的结果`ToPointer()`。

# android-emulator - 在android模拟器中捕获网络活动

> ID：10045994
> 
> 赞同：1
> 
> 时间：2012-04-06T16:02:10.567
> 
> 标签：android-emulator, tcpdump

我知道有很多关于如何使用 tcpdump、wireshark 等捕获网络流量的线程。我尝试`-tcpdump emulator1.cap`在`Eclipse > Run Configurations`. 但我不知道这些数据是在哪里捕获的。有人可以告诉我有关如何使用 tcpdump 捕获流量的分步说明吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T02:26:29.867

它存储在模拟器的 PWD 上。如果我从命令行启动模拟器，比如

$模拟器-tcpdump emulator1.cap -avd x86

然后我得到一个不错的 emulator1.cap 文件。

使用 Eclipse，您可能想要做一个绝对路径。尝试编写 -tcpdump /tmp/emulator1.cap 或 -tcpdump C:\emulator1.cap（在 Windows 上）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-12-14T15:33:55.013

就我而言，我尝试这样做，但我收到了一些模拟器警告，例如：

模拟器：警告：QEMU2 尚不支持 -tcpdump 标志，将被忽略。

顺便说一句，我在控制台发出的命令是/path_to_sdk/sdk/tools/emulator -tcpdump /path_to_save/emulator1.cap -avd Nexus_7_API_22。

有没有人对模拟器支持 tcpdump 标志的图像或引擎有什么想法？