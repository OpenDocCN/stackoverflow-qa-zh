# StackOverflow 问答 12449000-12449999

# java - 在循环中调用时，cassandra insert/batch_mutate 的节俭稳步增加

> ID：12449002
> 
> 赞同：1
> 
> 时间：2012-09-16T17:21:22.643
> 
> 标签：java, cassandra, thrift

我有一个 Java 应用程序，它从分区的 Oracle 表（实际上是几列，大小大约 100G）中读取数据，并使用与分区数相等的线程数加载到 Cassandra 集群中。监控进度的线程显示每个线程的进度（插入的行 @ ?? ms/rec），如下所示：

问题是，无论我调用什么 api 方法（insert/batch_mutate）（从 while 循环内部），延迟都在稳步增加。正如你所看到的，它以小于 10ms/rec 的速度开始，并且稳定且持续地上升。任何猜测可能是什么原因？

**PS**：出于某些原因，我选择了原始节俭客户端而不是赫克托，除非这是唯一可用的解决方案，否则我不能选择更高级别的客户端。无论如何，我对这种奇怪的行为感到好奇。

**监控线程的示例输出**：

```
24@0 ms/rec, 135323@485 ms/rec, 131821@513 ms/rec, 155841@339 ms/rec, 243@0 ms/rec,                              226146@538 ms/rec, 0, 0, .
24@0 ms/rec, 135431@523 ms/rec, 131939@427 ms/rec, 156008@316 ms/rec, 243@0 ms/rec, 226247@553 ms/rec, 0, 0, .
24@0 ms/rec, 135534@535 ms/rec, 132052@506 ms/rec, 156172@345 ms/rec, 243@0 ms/rec, 226355@472 ms/rec, 0, 0, .
24@0 ms/rec, 135643@519 ms/rec, 132171@455 ms/rec, 156323@387 ms/rec, 243@0 ms/rec, 226464@492 ms/rec, 0, 0, .
24@0 ms/rec, 135735@498 ms/rec, 132273@514 ms/rec, 156466@355 ms/rec, 243@0 ms/rec, 226561@508 ms/rec, 0, 0, .
24@0 ms/rec, 135858@474 ms/rec, 132404@455 ms/rec, 156630@330 ms/rec, 243@0 ms/rec, 226676@533 ms/rec, 0, 0, . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:51:54.057

为什么不在循环中构建所有插入并在之后尝试“batch_mutate”？我想性能会更好，并且您不需要 Hector 使用“batch_mutate”（也可用于节俭，较低级别的实现）。也许这可能是由于 Hector 的实施。

# iphone - iOS：搜索选项 UI

> ID：12449004
> 
> 赞同：0
> 
> 时间：2012-09-16T17:21:32.030
> 
> 标签：iphone, objective-c, ios, xcode

我正在为图书馆构建一个 iPhone 应用程序，我想给用户几个选项来搜索书籍。用户可以按书名、作者、主题或出版日期来搜索一本书。

我想知道向用户显示这些搜索选项的最佳方式是什么？就 HTML 而言，这很容易 - 使用下拉列表或单选按钮。我尝试使用 UIPickerView 但老实说，这看起来非常丑陋并且破坏了我的应用程序视图的美感。

我正在考虑的另一个选项是使用分段控制，但是是否可以使用垂直分段控件而不是水平分段控件？选择文本可能太长。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:31:53.867

如果你想要一个垂直分段控件，你必须自己制作。创建带有分隔线的纹理图像。我会将每个部分分别导出为 PNG。然后使用“按下”渐变创建每个部分的图片，并再次将每个部分导出为单独的 PNG。

然后我会开设一个新课程。如果您的分段控件中有特定数量的对象，或者这是一次性的，则该类甚至可能不是必需的。如果不是，则在类构造函数中传递一个数组，其中包含分段控件中分段的标题。对于第一个和最后一个对象，请使用您制作的带有圆角的图片。对于介于两者之间的对象，请使用标准图片。然后把标题放在上面。当一个片段被点击时（可能使用 hidden `UIButtons`），你可以使用一个委托方法告诉主搜索类哪个被点击了，然后这个类可以用按下的那个片段替换那个片段的正常图片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:18:56.590

感谢您的选择。

我最终创建了一个简单的表格来显示我的选择。

用户单击“搜索依据”，这将打开带有选项的表格，然后当您选择任何选项时，您将返回带有所选搜索选项的主视图。

# ios - 我们在 xcode 4.4.1 中综合了哪些属性

> ID：12449005
> 
> 赞同：1
> 
> 时间：2012-09-16T17:21:35.637
> 
> 标签：ios, xcode4.4

我正在使用 Xcode 4.4.1。当我定义 `@property` 喜欢`UINavigationController`或`NSArray`在 .h 文件中时，我必须`@synthesize`在 .m 文件中定义它。但有些人`@property`喜欢`UITabBarController`或`NSString`我不必`@synthesize`让它发挥作用。

我的问题是什么`@property`需要`@synthesize`什么不需要。

AppDelegate.h

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>
{
UITabBarController *_tabBar;
UINavigationController *_navBar;
}

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, retain) Employee *empView;
@property (nonatomic, retain) UITabBarController *_tabBar;
@property (nonatomic, retain) UINavigationController *_navBar; 
```

AppDelegate.m

```
@implementation AppDelegate
@synthesize _navBar;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
Employee *emp = [[Employee alloc]initWithNibName:@"Employee" bundle:nil];
self._tabBar = [[UITabBarController alloc]init];
self._navBar = [[UINavigationController alloc]initWithRootViewController:emp];
self._tabBar.viewControllers = [NSArray arrayWithObjects:_navBar, nil];
self.window.rootViewController = self._tabBar;
self._navBar.navigationBar.tintColor = [UIColor brownColor];
self.window.backgroundColor = [UIColor whiteColor];
[self.window makeKeyAndVisible];
return YES;
} 
```

当`@synthesize` `UINavigationController`我得到`UINavigationController`and时`UITabBarController`。但是当我不这样 做时，我`@synthesize` `UINavigationController`不会得到`UINavigationController`但`UITabBarController`会显示。

在这两种情况下我都没有`@synthesize` `UITabBarController`

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T17:35:49.200

由于 Xcode 4.4 附带了最新版本的编译器 (LLVM)，因此`@synthesize`不再需要该指令。

`@property`您声明的每个未`@synthesize`明确使用的访问器都将自动合成其访问器，就像您编写`@synthesize yourprop = _yourprop;`. 这是最新编译器的一个新功能（就像在您必须`@synthesize`为所有显式编写（或实现访问器）之前一样`@properties`）。

*请注意，当然，`@synthesize`如果您愿意（就像过去一样），您仍然可以显式使用该属性。这可以是一种显式设计用于属性的支持实例变量的方法。但事实上，**我强烈建议忘记实例变量**（事实上，我不再在`@interface`声明的大括号之间使用显式实例变量了），而只使用`@property`声明。有了它和让编译器`@synthesize`为您生成指令的新功能，您将避免大量胶水代码，并使您的类更易于编写。*

* * *

仅供参考，当您有一个隐式合成的 for 时，您可以**切换警告**`@property`（这意味着您没有`@synthesize`明确编写指令，因此编译器现在为您合成它）。只需转到项目的 Build Settings 并打开“Implicit Synthesized Properties”警告（在“Apple LLVM compiler 4.0 - Warnings - Objective-C”部分下），编译器就会告诉你它隐含的所有属性合成访问器，因为您自己没有提及该`@synthesize`指令。

# c# - 刷新 ListView 分组项

> ID：12449006
> 
> 赞同：2
> 
> 时间：2012-09-16T17:21:39.050
> 
> 标签：c#, wpf, listview, refresh, grouping

我有一个`ListView`, 实现 a `GridView`as ，其中项目根据由 a 表示的字段`View`分组（使用） 。`Expander``ComboBox`

我的`ItemsSource`of my`ListView`与`ObservableCollection`of 绑定：

```
public class data
{
   public string Name { get; set; }
   public int Age { get; set; }
   public bool Graduate { get; set; }
   public eMusic Music { get; set; }
}

public enum eMusic
{
    Rock,
    Pop,
    Classic
} 
```

`Music`财产的价值由`ComboBox`.

![在此处输入图像描述](../Images/26f484d1785aca3ee24c0dfede4c249c.png)

问题如下：当我更改 ComboBox 的值（例如 Pop -> Rock）时，相关项目不会在相应的组中移动。为什么？我怎么解决这个问题？

**编辑：**

[MainWindow.xaml](http://ideone.com/xO8JP)
[MainWindow.xaml.cs](http://ideone.com/rNsia)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:40:30.383

当我编辑`ComboBox`我必须刷新`ItemsSource`我的`ListView`：

```
ICollectionView view = CollectionViewSource.GetDefaultView(MyListView.ItemsSource);
view.Refresh(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:47:31.873

添加`IsSynchronizedWithCurrentItem="True"`组合框 xaml 属性

像这样在你的视图模型上写一个属性

```
 private ICollectionView _musicsView;
    public ObservableCollection<Music> Musics{ get; private set; }

    public YourViewModel()
    { 
       Musics= new ObservableCollection<Music>();
       _music= CollectionViewSource.GetDefaultView(AvaibleLanguages);
       _music.CurrentChanged += new EventHandler(OnCurrentChanged);
    }

    public ICollectionView MusicsView
    {
       get
       {
          return _musicsView;
       } 
    }

    void OnCurrentChanged(object sender, EventArgs e)
    {
        YourObject current = _musicsView.CurrentItem as YourItem;
//do: what you want
    } 
```

# excel - Excel - 日期和时间自动格式化

> ID：12449007
> 
> 赞同：3
> 
> 时间：2012-09-16T17:21:54.067
> 
> 标签：excel, vba

情况如下：

1.  我在一个单元格中有以下号码`2012-09-13 23:38:22`
2.  单元格格式编号为`hh:mm`
3.  单元格显示的数字是`23:38`
4.  单元格的长度为 43 像素
5.  当我将单元格的号码更改为`2012-09-13 23:38:23`
6.  单元格格式编号更改​​为`yyyy-mm-dd hh:mm:ss`
7.  单元格的长度为 93 像素
8.  那么我该怎么做才能避免第 6 步和第 7 步中描述的单元格自动格式呢？我想将单元格格式号保持`hh:mm`为 43 像素。

也许我应该在特定列的版本检测后尝试重新格式化宏？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:22:47.473

在第 6 步，将新数字输入到不同的单元格中，可能是在草稿工作表上。然后复制 - 选择性粘贴 - 将该单元格的值设置为您尝试更改的单元格。

# jquery - 使用jquery对值进行升序和降序排序

> ID：12449008
> 
> 赞同：3
> 
> 时间：2012-09-16T17:21:54.270
> 
> 标签：jquery

```
$1 = 10;
$2 = 30;
$3 = 5;

$("#bidtmp").val('');

if ($1 > $2) {
    $("#bidtmp").val('1');
} else if ($2 > $3) {
    $("#bidtmp").val('2');
} else if ($3 > $1) {
    $("#bidtmp").val('3');
} else if ($1 > $3) {
    $("#bidtmp").val('1');
} else if ($2 > $1) {
    $("#bidtmp").val('2');
} else if ($3 > $2) {
    $("#bidtmp").val('3');
} 
```

如何使用jquery按升序对值进行排序？以上是我尝试过的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T17:23:47.763

你可以试试：

```
$("#bidtmp").val( Math.max($1, $2, $3) ); 
```

从您的代码看来，您正在尝试将最大值设置`#bidtmp`为，并且上面的值将起作用。

但是对于排序尝试***[sort()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/sort)***方法，如下所示：

```
[$1, $2, $3].sort(function(a, b) {
  return a-b;
}); 
```

为下降`return b-a;`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-12-18T22:48:56.417

这太复杂了；）

试试这个：

```
var arr = [$1, $2, $3]
arr.sort() // asc
arr.sort().reverse() // desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:26:25.577

```
var $1 = 10, $2 = 30, $3 = 20;
var sorted_arr = [$1, $2, $3].sort(); 
```

不要忘记声明变量。

[排序](http://www.w3schools.com/jsref/jsref_sort.asp)方法可以获取一个函数作为自定义排序的参数。

# c# - 如何在运行时找到导致我的应用程序崩溃的缺失内容？

> ID：12449010
> 
> 赞同：0
> 
> 时间：2012-09-16T17:21:58.607
> 
> 标签：c#, .net

我正在开发一个 C# 应用程序，并且在安装了 Visual Studio 的操作系统上运行良好。
如果我将可执行文件带到任何其他操作系统，它会在执行时崩溃。
我怎样才能知道究竟缺少什么以便我可以解决问题？
在这种情况下更准确地说，我使用了一些 Telerik 组件，我注意到在可执行文件旁边已经有几个与之相关的 Dll。
我还为 Visual Studio 2010 安装了 Crystal Report，因为项目中有报告（在 CR 2008 中），尽管到目前为止我还没有使用它们。（我也尝试安装

> SAP_Crystal_Reports_runtime_engine_for_.NET_Framework_4_32bit

和

> CRforVS_redist_install_32bit_13_0_1

在应用程序失败的这些系统上。但同样没有运气。

如果我能知道究竟缺少什么，我就可以知道我正在处理什么并直接解决问题

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:32:07.330

一种选择是使用[Fusion 日志查看器查看](http://msdn.microsoft.com/en-us/library/e74a18c4.aspx)目标机器上的程序集绑定信息。任何程序集绑定失败都会被记录下来，您可以看到哪些程序集加载失败，以及运行时在哪里寻找它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:23:32.513

查看您的参考文献列表。框架中不标准的任何内容，设置引用的属性以将程序集复制到构建目录。]

此外，请确保您在项目属性中构建正确的处理器架构。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T17:28:03.927

检查目标机器的事件日志。可能缺少一些依赖项。请参阅[依赖项](https://stackoverflow.com/questions/227886/how-do-i-determine-the-dependencies-of-a-net-application)。如果由于应用程序中的异常而崩溃，则在应用程序异常事件中捕获该异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T17:59:36.660

我认为您可以为此使用[AssemblyResolve](http://www.codeproject.com/Articles/310675/AppDomain-AssemblyResolve-Event-Tips)事件

```
AppDomain.CurrentDomain.AssemblyResolve += (object sender, ResolveEventArgs args)=>
    {
        string assemblyToResove = args.Name;
        //return Assembly.Load(....);
    }; 
```

# grid - ZK Grid Columns 在按下按钮时改变宽度

> ID：12449012
> 
> 赞同：-1
> 
> 时间：2012-09-16T17:22:02.257
> 
> 标签：grid, zk, zul

我放置了具有一定比例列的 ZK 网格，如下所示：

```
 <grid model="@load(vm.rowList)">
        <template name="model">
            <row>
                <cell width="7px">
                    <label value="@load(each.number)"/>
                </cell>

                <cell width="55px">
                    <vbox>
                        <button label="Up" width="100%"
                            onClick="@command('up',row=each)" />
                        <button label="Down" width="100%"
                            onClick="@command('down',row=each)" />
                    </vbox>
                </cell>
                <cell width="100%">
                    <label value="@load(each.text)"/>
                </cell>
            </row>
        </template>
    </grid> 
```

它显示得很好，直到我按下任何按钮，每列的宽度变成网格的 1/3。

我不明白原因。请建议如何保持宽度不变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:43:36.210

你可以试试！！！使用 de colums by 来调整每个单元格的大小。

```
<grid model="@load(vm.rowList)">
    <columns sizable="true">
        <column width="20%"/>
        <column width="20%"/>
        <column width="20%"/>
    </columns>
    <template name="model">
        <row>
            <cell>
                <label value="@load(each.number)"/>
            </cell>

            <cell>
                <vbox>
                    <button label="Up" width="100%"
                        onClick="@command('up',row=each)" />
                    <button label="Down" width="100%"
                        onClick="@command('down',row=each)" />
                </vbox>
            </cell>
            <cell>
                <label value="@load(each.text)"/>
            </cell>
        </row>
    </template>
</grid> 
```

# mysql - Sql Count on many to many

> ID：12449018
> 
> 赞同：5
> 
> 时间：2012-09-16T17:22:49.043
> 
> 标签：mysql, sql

我有三张桌子

**邮政**

`id | statement | date`

**特征**

`id | feature`

**post_feature**（Post 和 Feature 之间的多对多表）

`post_id | feature_id`

我想触发一个查询，该查询将为我计算给定日期期间的帖子的不同不同特征及其各自的特征。我刚刚开始学习 SQL，但我无法破解这个。

我尝试了以下一个但没有得到正确的结果。

```
 SELECT f.feature, count(f.feature)
   FROM  post_feature l 
   JOIN  features f ON (l.featureid = f.id AND l.featureid IN (
   select post.id from post where post.date > 'some_date'))
   GROUP BY f.feature 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T17:31:17.273

你可以这样尝试：

```
 SELECT f.feature, count(f.feature)
       FROM  post_feature l 
       JOIN  features f ON l.featureid = f.id 
       JOIN  post p ON l.post_id =p.id 
       WHERE p.date > 'some_date'
       GROUP BY f.feature 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:31:49.600

```
select f.feature, count(*)
from  post_feature l inner join features f on l.feature_id = f.id
                     inner join post p on l.post_id = p.id
where p.date > 'some_date'
group by f.feature 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T17:32:43.023

你的 SQL 很有创意。但是，您在 IN 子句中的联接位于错误的列上。它应该在 postid 到 postid 上。

虽然这修复了查询，但这是一种更好的编写方法：

```
 SELECT f.feature, count(f.feature)
 FROM  post p join
       post_feature pf
       on p.id = pf.postid join
       feature f
       on pf.featureid = f.id
 where post.date > 'some_date'
 GROUP BY f.feature 
```

这将连接所有表，然后按您想知道的信息进行汇总。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:31:33.713

尝试

```
 SELECT f.feature, count(DISTINCT f.feature) 
   FROM  post_feature l  
   JOIN  features f ON (l.featureid = f.id AND l.featureid IN ( 
   select post.id from post where post.date > 'some_date')) 
   GROUP BY f.feature 
```

# java - 在 Spring 中使用 ResponseBody 注释返回 Json 不起作用

> ID：12449021
> 
> 赞同：3
> 
> 时间：2012-09-16T17:23:46.543
> 
> 标签：java, jquery, spring-mvc, spring-annotations

我正在开发一个 spring mvc web 应用程序，其中我使用 Google Visualization API 来生成一些图表。我有一个模型类，其中包含 2 个数组列表，它们代表我发送给绘制图表的函数的数据（这是我想要转换为 JSON 的数据）。

模型类：

```
@Component
public class JsonResponse {

private List<Integer> percentages = new ArrayList<Integer>();
private List<String> topics = new ArrayList<String>();

public JsonResponse(){
}

public List<Integer> getPercentages() {
    return percentages;
}

public void setPercentages(List<Integer> percentages) {
    this.percentages = percentages;
}

public List<String> getTopics() {
    return topics;
}

public void setTopics(List<String> topics) {
    this.topics = topics;
}
} 
```

然后我`ve got a`@Component` 注释类，其中包含一个返回模型对象（我上面写的类）的方法，并填充了 2 个 arraylists 属性。

```
@Component
public class ChartUtils {
    @Autowired
    public JsonResponse response;

    public JsonResponse listPieChartData( ModelAndView model ,int waveId ){

    //arraylists for chart generation
List<Integer> percentages = new ArrayList<Integer>();
List<String> topics = new ArrayList<String>();

    {... code for accessing the DB and processing some data and then populating the 2                  
     arraylists ... }

response.setTopics(topics);
response.setPercentages(percentages);

return response;}
} 
```

因此，Controller 类，它具有我正在调用以收集图表​​生成数据的操作的映射，并且我正在`listPieChartData`从上面的类中调用方法，并且我也在其中使用`@ResponseBody`注释是这个：

```
@Controller
public class ChartController {

@Autowired
public ChartUtils utils;

@Autowired
public JsonResponse response;

@RequestMapping(value = "/drawPieChart", method = RequestMethod.GET )
@ResponseBody
public JsonResponse drawPieChart( ModelAndView model,
        @RequestParam(value = "id", defaultValue = "-1") int waveId ) {

    return utils.listPieChartData(model,waveId ); } 
```

绘制图表的 JavaScript 函数：

```
function drawColumnChart(percentages, topics , div,width,height) {
    var data = new google.visualization.DataTable();

data.addColumn('string', 'Wave');
for (var i=0; i < topics.length; i++){
    data.addColumn( 'number', topics[i] ); 
}

    data.addRow( percentages );

    var wave=percentages[0];
    var options = {
        'title':'Generated Chart For '+wave,
        'backgroundColor': { fill: "none" },
        'is3D': true,
        'width':width,
        'height':height,
    };

var chart = new google.visualization.ColumnChart(document.getElementById(div));
chart.draw(data, options); 
```

}

以及对控制器的映射方法（用于收集数据）的 AJAX 调用，最终调用上述 JS 函数来获取图表（我也在发送控制器方法的请求参数 int id，我没有写那个）

```
$("#button").live("click", function(){

var arrayP, arrayT;
$.ajax({
    url: "drawPieChart",      
contentType: "application/json",
data: params,
success: function(data) {
    $.each(data, function(messageIndex, message) {
    if (messageIndex === 0) {
            arrayP = message;
    } else {
    arrayT = message;
    }
        });
    drawPieChart(arrayP, arrayT,'chart_div',600,400);
    }
    });  
}); 
```

我知道这是很多代码 :) 但它是非常简单的代码，为了更好地理解流程，这是它的工作原理：

从我正在使用 AJAX 调用的按钮输入，映射方法到 drawPieChart 操作（在`ChartController`类中），此方法通过调用 listPieChart 方法（来自`ChartUtils`类）发送响应，该方法返回一个`JsonResponse`对象，（包含 2 个数组列表）。这`JsonResponse`应该转换为 JSON，因为在 AJAX 请求中，我告诉请求需要 JSON 输入（通过 contentType：“application/json”），它应该得到它，因为我`@ResponseBody`在映射的控制器方法中使用这个请求。

我收到了这样的回复：

> 此请求标识的资源只能生成具有根据请求“接受”标头（）不可接受的特征的响应。
> （HTTP 状态 406）

请纠正我哪里错了，我就是不能让它工作，我不知道为什么......

我的`servlet-context.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:beans="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xsi:schemaLocation="http://www.springframework.org/schema/mvc       
http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
http://www.springframework.org/schema/beans    
http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context     
http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <!-- DispatcherServlet Context: defines this servlet's request-processing      
infrastructure -->

  <!-- Enables the Spring MVC @Controller programming model -->
  <annotation-driven />

  <!-- Handles HTTP GET requests for /resources/** by efficiently serving up
      static resources in the ${webappRoot}/resources directory -->
  <resources mapping="/resources/**" location="/resources/" />

  <!-- Resolves views selected for rendering by @Controllers to .jsp resources
    in the /WEB-INF/views directory -->
  <beans:bean 
     class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
  </beans:bean>

  <context:component-scan base-package="com.bla.bla" />

  <beans:import resource="classpath:springJDBC.xml" />

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T19:17:53.933

所以问题是我没有在 pom.xml 中声明所有 Jackson 依赖项。这些是您的 maven 项目的依赖项，以防您希望 Spring 3 使用 @ResponseBody 注释自动为您序列化对象，作为方法的响应。菜鸟的东西，但我没有在我找到的示例中看到这一点。

```
 <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-jaxrs</artifactId>
        <version>1.6.1</version>
    </dependency>

        <dependency>
    <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-mapper-asl</artifactId>
    <version>1.9.9</version>
</dependency>

<dependency>
       <groupId>org.codehaus.jackson</groupId>
    <artifactId>jackson-core-asl</artifactId>
    <version>1.9.9</version>
</dependency> 
```

此外，我必须更改 ajax 调用中的一些内容，以调用返回 json 对象和图表生成数据的方法：

```
$("#buttonPieGenerate").live("click", function(){

    $.ajax({
        url: "drawPieChart", //method from controller
        contentType: "application/json",
        data: params,
        success: function(data) {

        drawPieChart(data.percentages, data.topics,'chart_div',600,400);
        }
    });

}); 
```

我正在访问 Json 对象中的数据，这些数据是我通过 data.percentages 和 data.topics 调用的响应。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-15T16:14:24.263

2015 年世界的一个小更新：

```
<dependency>
    <!-- Just placing this on the classpath will enable JSON for @ResponseBody -->
    <groupId>com.fasterxml.jackson.core</groupId>
    <artifactId>jackson-databind</artifactId>
    <version>2.5.3</version>
</dependency> 
```

# android - Android片段不保存状态

> ID：12449023
> 
> 赞同：6
> 
> 时间：2012-09-16T17:23:54.270
> 
> 标签：android, android-fragments, savestate

我最近将我的应用程序从基于活动的应用程序转换为基于片段的应用程序。这是一个记分应用程序，当它是一项活动时，我可以轻松地保存和恢复分数。但是，这似乎不能作为一个片段工作。这是我的代码：

```
 @Override
public void onSaveInstanceState(Bundle savedInstanceState){
    super.onSaveInstanceState(savedInstanceState);

    if(t!=null&&flag==1){
        savedInstanceState.putInt("time", t.getTimeLeft());
    } else {
        savedInstanceState.putInt("time", 0);
    }

    savedInstanceState.putIntArray("score_array", points);
    savedInstanceState.putIntArray("position_array", spinnerPosition);
    savedInstanceState.putBooleanArray("checked_array", shouldBeChecked);

    flag = 0;
    Log.d("MyApp", "savingState");
}

@Override
public void onActivityCreated(Bundle savedInstanceState){
    super.onActivityCreated(savedInstanceState);

    Log.d("MyApp", "onActivityCreated");

    try {
        int timeLeft = savedInstanceState.getInt("time");

        points = savedInstanceState.getIntArray("score_array").clone();
        spinnerPosition = savedInstanceState.getIntArray("position_array").clone();
        shouldBeChecked = savedInstanceState.getBooleanArray("checked_array").clone();

        ((BaseAdapter) ((ListView)getView().findViewById(R.id.missionList)).getAdapter()).notifyDataSetChanged();

        if(timeLeft!=0){
            flag=1;

            this.getActivity().getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);

            t = new TimerClass(timeLeft*1000, 1000);
            t.setViews((TextView)getView().findViewById(R.id.minuteView), (TextView)getView().findViewById(R.id.tenSecondView), (TextView)getView().findViewById(R.id.secondView), (Button)getView().findViewById(R.id.start_button));
            ((Button)getView().findViewById(R.id.start_button)).setText(R.string.stop);
            t.start();
        }
    } catch (Exception e) {
        e.printStackTrace();
    } 

} 
```

我在一个活动中成功地使用了这个完全相同的代码，`onRestoreInstanceState`而不是`onActivityCreated`try/catch。问题是当我尝试从包中提取某些内容时，我遇到了空指针错误。我可以在日志中看到保存状态，然后是 onActivityCreated，但 onActivityCreated 似乎没有得到 onSavedInstanceState 放入包中的内容。我只是在调用`savedInstanceState.getAnything()`. 但是，根据我的阅读，`onCreate`、`onCreateView`和`onActivityCreated`都使用相同的捆绑包。我尝试将代码移至其他两个，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T22:28:28.610

对于任何需要更好答案的人：

在访问它之前总是测试`if(savedInstanceState!=null)`它，以避免空指针错误。此外，请注意**onSaveInstanceState()**在您的片段被销毁时无法在所有情况下保存您的数据。

特别是如果您的 Fragment 被推入后堆栈，并且设备被旋转。在这种情况下，只有**onDestoryView()**会在您的 Fragment 被推入后台堆栈时被调用，因此当**onSaveInstanceState()**在设备旋转期间运行时，它将无法保存您的视图中的任何数据，因为它们都已在较早时被销毁。

有关解决方法，请参阅以下线程。我认为它对使用 Fragments 进行开发的每个人都很有用。特别是**DroidT**的回答： [https ://stackoverflow.com/a/19744402/2517350](https://stackoverflow.com/a/19744402/2517350)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T00:05:42.200

我最终想出了一个相当老套的工作。对此并不感到兴奋，因为它实际上并没有解决核心问题。如果有人能帮我找到那个，我很乐意接受这个答案。

也就是说，我只是使用了活动的 onSaveInstanceState 和 onRestoreInstanceState 来保存和恢复片段数据。

# php - 使 SQL 查询更高效

> ID：12449026
> 
> 赞同：0
> 
> 时间：2012-09-16T17:24:06.263
> 
> 标签：php, mysql

我有一个有效的查询，但运行至少需要 3 秒，所以我认为它可能会更快。它用于填充新线程列表并显示每个线程中有多少未读帖子。我在将查询字符串放入`$db->query_read()`. 为了只从有效论坛中获取结果，`$ids`字符串最多包含 50 个值，以逗号分隔。

该`userthreadviews`表已存在 1 周，其中大约有 9,500 行。我不确定我是否需要设置一个 cron 作业来定期清除一周以上的线程视图，或者我是否可以让它增长。

这是目前的查询：

```
SELECT 
    `thread`.`title` AS 'r_title', 
    `thread`.`threadid` AS 'r_threadid', 
    `thread`.`forumid` AS 'r_forumid', 
    `thread`.`lastposter` AS 'r_lastposter', 
    `thread`.`lastposterid` AS 'r_lastposterid', 
    `forum`.`title` AS 'f_title', 
    `thread`.`replycount` AS 'r_replycount', 
    `thread`.`lastpost` AS 'r_lastpost', 
    `userthreadviews`.`replycount` AS 'u_replycount', 
    `userthreadviews`.`id` AS 'u_id',
    `thread`.`postusername` AS 'r_postusername', 
    `thread`.`postuserid` AS 'r_postuserid' 
FROM 
    `thread` 
INNER JOIN 
    `forum` 
    ON (`thread`.`forumid` = `forum`.`forumid`) 
LEFT JOIN 
    (`userthreadviews`) 
    ON (`thread`.`threadid` = `userthreadviews`.`threadid` 
    AND `userthreadviews`.`userid`=$userid) 
WHERE 
    `thread`.`forumid` IN($ids) 
    AND `thread`.`visible`=1 
    AND `thread`.`lastpost`> time() - 604800
ORDER BY `thread`.`lastpost` DESC LIMIT 0, 30 
```

连接`post`表的替代查询（仅显示用户发布的线程）实际上是两倍快，所以我认为这里必须有一些东西可以改变以加快速度。有人可以提供一些建议吗？

编辑：抱歉，我已将 EXPLAIN 放在备用查询前面。这是正确的输出：根据要求，这是 EXPLAIN SELECT 生成的输出： ![解释查询](../Images/559fadbec55908a9c02b4e930915520e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:30:03.160

看一下[mysql的解释](http://dev.mysql.com/doc/refman/5.5/en/using-explain.html)语句。它为您提供查询的执行计划。

知道计划后，您可以检查是否有计划中涉及的字段的索引。如果没有，请创建它们。

也许该计划揭示了有关如何以另一种方式编写查询的详细信息，从而使查询更加优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:27:43.833

如果没有索引，请尝试索引表 forumid

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T17:41:45.593

要在连接/位置上没有索引（解释时使用的键 = NULL），这就是您的查询速度慢的原因。您应该以这种方式对它们进行索引：

```
CREATE INDEX thread_forumid_index ON thread(forumid);
CREATE INDEX userthreadviews_forumid_index ON userthreadviews(forumid); 
```

文档[在这里](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:42:11.300

建议：

*   将条件从 WHERE 子句移到 JOIN 子句
*   将带有条件的 JOIN 放在另一个 JOIN*之前*
*   确保您有正确的索引并且它们正在查询中使用（创建您需要的索引......太多的索引可能和太少一样糟糕）

这是我对查询的建议：

```
SELECT 
    `thread`.`title` AS 'r_title',
    `thread`.`threadid` AS 'r_threadid',
    `thread`.`forumid` AS 'r_forumid',
    `thread`.`lastposter` AS 'r_lastposter',
    `thread`.`lastposterid` AS 'r_lastposterid',
    `forum`.`title` AS 'f_title',
    `thread`.`replycount` AS 'r_replycount',
    `thread`.`lastpost` AS 'r_lastpost',
    `userthreadviews`.`replycount` AS 'u_replycount',
    `userthreadviews`.`id` AS 'u_id',
    `thread`.`postusername` AS 'r_postusername',
    `thread`.`postuserid` AS 'r_postuserid' 
FROM
    `thread` 
    INNER JOIN (`forum`)
        ON ((`thread`.`visible` = 1)
        AND (`thread`.`lastpost` > $time)
        AND (`thread`.`forumid` IN ($ids))
        AND (`thread`.`forumid` = `forum`.`forumid`))
    LEFT JOIN (`userthreadviews`)
        ON ((`thread`.`threadid` = `userthreadviews`.`threadid`)
        AND (`userthreadviews`.`userid` = $userid))
ORDER BY
    `thread`.`lastpost` DESC
LIMIT
    0, 30 
```

这些是很好的索引候选者：

```
- `forum`.`forumid`
- `userthreadviews`.`threadid`
- `userthreadviews`.`userid`
- `thread`.`forumid`
- `thread`.`threadid`
- `thread`.`visible`
- `thread`.`lastpost` 
```

看来您已经有很多索引了……所以，请确保保留真正需要的索引并删除无用的索引。

# java - 创建一个 addContact() 方法，每次都会创建唯一的联系人

> ID：12449031
> 
> 赞同：1
> 
> 时间：2012-09-16T17:24:46.007
> 
> 标签：java, object, unique

一个学校作业（在初学者 Java 中）要求我创建一个小型联系人管理器程序，但我遇到了麻烦。

它要求我们创建几个类 - Address、PhoneNumber、Contact 和 ContactManager。

在 ContactManager 中，我们被要求创建一个名为 addContact() 的方法，它将向 ContactManager 中的对象数组添加一个全新的唯一联系人。

但是我无法弄清楚如何让这个方法做我想做的事情，因为每次它创建一个新的联系人时，它总是具有相同的名称。如何使它创建的对象每次都具有唯一的名称（即 Contact001、Contact002 等）？

另外，假设我可以在实例变量中输入所有数据来测试它，我如何提供创建它所需的所有相关信息？这是我的代码类：

```
public class Contact {
//Contact Instance Variables
private String lastName;
private String firstName;
private String middleName;
private Address completeAddress[];
private PhoneNumber phoneNumer[];
private SocialNetworkAccount socialNetworkInfo[];

public Contact(String lastName, String firstName, String middleName,
        Address[] completeAddress, PhoneNumber[] phoneNumer,
        SocialNetworkAccount[] socialNetworkInfo) {
    this.lastName = lastName;
    this.firstName = firstName;
    this.middleName = middleName;
    this.completeAddress = completeAddress;
    this.phoneNumer = phoneNumer;
    this.socialNetworkInfo = socialNetworkInfo;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:50:02.280

在您的 ContactManager 类中，定义这些

```
private List<Contact> contacts; 

contacts = new ArrayList<Contact>(); //you should put this in ContactManager constructor

public void addContact(Contact contact) {
 contacts.add(contact);
} 
```

当您想添加新联系人时

```
//just supply different names, etc. load the information from a file
contactManager.addContact(new Contact(name,surname,....)); 
```

或者...

要添加几个占位符联系人...

```
int NUM_OF_CONTACTS = 2; //how many contacts to create
for(int i = 0; i < NUM_OF_CONTACTS; ++i) {
 contactManager.addContact(new Contact(("Contact" + i),"Placeholder Surname",..);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T05:30:30.527

“私人名单联系人；” 是一个名为contacts 的实例变量的声明。

变量的类型是 List，它是 java.util 包中的一种特定类型的 Collection 对象。

List`<Contact>`是一种向编译器说明此列表仅包含 Contact 对象的方式。请参阅 java 教程中的“泛型”。

# email - 将参数从电子邮件链接传递到 jQuery 移动 Web 应用程序

> ID：12449032
> 
> 赞同：0
> 
> 时间：2012-09-16T17:24:46.140
> 
> 标签：email, jquery-mobile, url-parameters

我使用 jquery mobile 1.1.1 创建了一个网络应用程序

作为我的应用程序的一部分，我构建了密码检索功能。如果用户需要重置密码，他们会填写一份表格并收到一封电子邮件，其中包含一个链接，其中包含密码重置页面的地址和其他两个参数：

```
www.mywebapp.com/demo.html#resetPassword?x=123&y=123 
```

**最初的问题：** 当用户点击链接时，即使地址栏中的 URL 显示：www.mywebapp.com/demo.html#resetPassword?x=123&y=123 我明白，他们也会看到 Web 应用程序的主页jQuery mobile 不支持在哈希后传递参数，所以我想出了以下解决方案。

**一个小不便的解决方案：** 我将以下代码放在一起，它读取 URL，捕获我的两个参数并将用户重定向到密码重置页面：

```
$( document ).bind( "pagebeforeshow", function() {
    //cpe("parameter") will check whether the specified URL parameter exists
    if(cpe("x") && cpe("y")){
        //gpv("parameter") captures the value of the specified URL parameter
        recovery.username=gpv("x");
        recovery.token=gpv("y");
        $.mobile.changePage("#resetPassword");
    }
}) 
```

**不便之处，以及我当前的问题：** 当用户点击电子邮件中的链接时，浏览器会启动并打开应用程序的主页，然后它会快速显示#resetPassword 页面。我了解发生这种情况是因为我正在更改页面

```
$.mobile.changePage("#resetPassword"); 
```

但是，如何修改上面的代码，让用户根本看不到主页，直接进入#resetPassword 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:35:40.533

我遵循了 Raymond Camden 的[建议](https://stackoverflow.com/a/12449755/1634475)，并在我的 html 中添加了以下内容：

```
<pre>

<!--Start of blank initial page: #initPage-->
<div data-role="page" id="initPage">
    <div data-role="content"></div>
</div>
<!-- /page -->

</pre> 
```

我还在我的javascript中添加了以下内容：

```
//init page -> path control hub
$( document ).bind( "pagebeforeshow", function() {
    var pageid=$.mobile.activePage.attr('id');
    if(pageid=="initPage"){
        if(cpe("x") && cpe("y")){
            recovery.username=gpv("x");
    recovery.token=gpv("y");
    $.mobile.changePage("#resetPassword");
    }else{
                $.mobile.changePage("#info");
                }
    }
}) 
```

它现在正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:59:34.793

使用没有内容的空白初始页面。默认情况下，对您的初始页面执行 changePage *，*但在其他情况下，例如 resetPassword 情况，您将 changePage 改为该页面。

# javascript - d3.js 强制有向图搜索

> ID：12449033
> 
> 赞同：3
> 
> 时间：2012-09-16T17:25:00.920
> 
> 标签：javascript, search, select, d3.js, force-layout

我正在尝试在 d3 force 有向图示例上实现搜索功能。当我在文本字段中输入搜索查询时，相关项目将显示，不相关的项目将淡出。

我已经实现了 searchUpdate 和 count 方法，如下面的[jsfiddle](http://jsfiddle.net/H2Rj5/11/)所示。

我需要一些帮助来褪色这些物品。当前`d3.select("svg")`淡化整个图形，同时`d3.select("#"+n.id)`产生错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:07:55.340

当您`d3.select("svg")`选择`SVG`画布并设置其`opacity`. 你想做的是

```
 d3.selectAll("circle") 
```

或者

```
 d3.selectAll("circle.node") 
```

并应用`opacity`那里。

然后，您要做的是使用 ID 选择与 ID 匹配的圈子，`d3.select("#"+n.id)`但要这样做，您必须在创建圈子时创建一个 ID，例如

```
 .attr("id", function(d,i) {return "circle"+i}) 
```

否则，您没有可供选择的 ID。

# c - 使用 unsigned long long int 的函数的结果不正确

> ID：12449043
> 
> 赞同：1
> 
> 时间：2012-09-16T17:26:30.157
> 
> 标签：c, unsigned-long-long-int

以下是我在c中输入的代码

```
unsigned long long int Je=23; 
int col=2,row=2; 
void mod(unsigned long long int mat1[][col],unsigned long long int mat2[][col],int r) 
{
    int i,j;
    for(i=0;i<r;i++)
        for(j=0;j<col;j++)
        {
            mat1[i][j]=mat2[i][j]%Je;
            printf("Value mat1=%u mat2=%u Je=%u\n",mat1[i][j],mat2[i][j],Je);
        } 
} 
```

我用下面的矩阵调用这个函数

```
t1[2][2]={1036,1090,1526,1472};
mod(t2,t1,row); 
```

但是在控制台屏幕中，我得到了包含在函数定义中的“printf”语句的以下结果

```
Value mat1=5 mat2=0 Je=1036
Value mat1=2 mat2=0 Je=1090
Value mat1=16 mat2=0 Je=1526
Value mat1=9 mat2=0 Je=1472 
```

这些值怎么会这样打印？我正在使用 Dev Cpp 编译器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:30:40.827

printf 语句中的格式说明符“%u”不正确。对于 unsigned long long，说明符应为“%llu”

# parsing - 使用 Clang 生成调用图

> ID：12449044
> 
> 赞同：4
> 
> 时间：2012-09-16T17:26:39.367
> 
> 标签：parsing, clang, call-graph

如何使用 clang 生成 C++ 代码的调用图？我知道我需要使用[这个](http://clang.llvm.org/doxygen/CallGraph_8cpp_source.html)，但我找不到任何示例。

我已经尝试过为此使用 python 绑定，但它们似乎缺少一些重要的功能。

谁能提供一个使用当前 clang 的 API 来完成此任务的最小示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T16:17:03.447

对于 C++（对于 C，只需使用 clang）

```
clang++ -Xclang -analyze -Xclang -analyzer-checker=debug.ViewCallGraph <file to analyze> 
```

这将为您提供图像。

# windows - 如何从 Windows 上的控制台窗口创建控制台窗口？

> ID：12449046
> 
> 赞同：0
> 
> 时间：2012-09-16T17:26:45.630
> 
> 标签：windows, shell, console, window, subclass

我有一个需要读取窗口消息的控制台程序，但是由于不能将属于另一个进程的窗口子类化，如何创建一个新的控制台窗口？

我曾尝试使用[AllocConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx)，但它显示错误：`"Access is denied"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T20:04:18.327

来自[AllocConsole 的 MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx)：

> 一个进程只能与一个控制台关联，因此如果调用进程已经有一个控制台，则 AllocConsole 函数会失败。进程可以使用 FreeConsole 函数将自己与其当前控制台分离，然后它可以调用 AllocConsole 来创建新控制台或 AttachConsole 以附加到另一个控制台。

所以你需要在调用[AllocConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944%28v=vs.85%29.aspx)之前调用[FreeConsole](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683150%28v=vs.85%29.aspx)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T17:41:41.507

我开发了此代码以用于我的项目。我希望这就是你所需要的，还有更多:)

```
/// <summary>
/// Smart Console powered by Gregor Primar s.p.
/// </summary>
public class ConsoleWindow
{

    #region EXTERNALL DLL CALLS

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool AllocConsole();

    [DllImport("kernel32.dll", SetLastError = true)]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool FreeConsole();

    [DllImport("user32.dll")]
    static extern IntPtr RemoveMenu(IntPtr hMenu, uint nPosition, uint wFlags);

    [DllImport("user32.dll")]
    static extern bool EnableMenuItem(IntPtr hMenu, uint uIDEnableItem, uint uEnable);

    [DllImport("user32.dll")]
    static extern IntPtr GetSystemMenu(IntPtr hWnd, bool bRevert);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool SetForegroundWindow(IntPtr hWnd);

    [DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
    static extern IntPtr FindWindowByCaption(IntPtr zeroOnly, string lpWindowName);

    internal const UInt32 SC_CLOSE = 0xF060;
    internal const UInt32 MF_GRAYED = 0x00000001;
    internal const UInt32 MF_ENABLED = 0x00000000;
    internal const uint MF_BYCOMMAND = 0x00000000;

    #endregion

    #region PROPERTIES

    /// <summary>
    /// Gets if console window is displayed
    /// </summary>
    public bool Displayed { get; internal set; }

    /// <summary>
    /// Gets or Sets console background color
    /// </summary>
    public ConsoleColor BackgroundColor
    {
        get
        {
            return Console.BackgroundColor;
        }
        set
        {
            Console.BackgroundColor = value;
        }
    }

    /// <summary>
    /// Gets or Sets console foreground color
    /// </summary>
    public ConsoleColor ForegroundColor
    {
        get
        {
            return Console.ForegroundColor;
        }
        set
        {
            Console.ForegroundColor = value;
        }
    }

    /// <summary>
    /// Gets or Sets 
    /// </summary>
    public ConsoleColor ForegroundErrorColor { get; set; }

    #endregion

    #region WRITE AND READ METHODES

    /// <summary>
    /// Clears console window
    /// </summary>
    public void Clear()
    {
        Console.Clear();
    }

    /// <summary>
    /// Writes to console with ForegroundColor
    /// </summary>
    /// <param name="value"></param>
    public void Write(string value)
    {
        Write(value, false);
    }

    /// <summary>
    /// Writes to console with ForegroundColor or ForegroundErrorColor
    /// </summary>
    /// <param name="value"></param>
    /// <param name="isError"></param>
    public void Write(string value, bool isError)
    {
        Write_internal(value, isError, false);
    }

    /// <summary>
    /// Writes blank line to console with ForegroundColor
    /// </summary>
    public void WriteLine()
    {
        this.WriteLine("");
    }

    /// <summary>
    /// Writes to console with ForegroundColor
    /// </summary>
    /// <param name="value"></param>
    public void WriteLine(string value)
    {
        WriteLine(value, false);
    }

    /// <summary>
    /// Writes line to console with ForegroundColor or ForegroundErrorColor
    /// </summary>
    /// <param name="value"></param>
    /// <param name="isError"></param>
    public void WriteLine(string value, bool isError)
    {
        Write_internal(value, isError, true);
    }

    void Write_internal(string value, bool isError, bool fullLine)
    {
        ConsoleColor defaultColor = this.ForegroundColor;
        if (isError)
        {
            this.ForegroundColor = this.ForegroundErrorColor;
        }
        if (fullLine)
        {
            Console.WriteLine(value);
        }
        else
        {
            Console.Write(value);
        }
        this.ForegroundColor = defaultColor;
    }

    void ReadLine_internal(Type type, bool allowNull, ref object returnValue, StringDictionary options)
    {
        if ((options != null) && (type != typeof(string)))
        {
            throw new Exception("ReadLine_internal allows options only when type is string!");
        }

        string currentValue = null;
        string errorMessage = null;

        do
        {
            currentValue = Console.ReadLine();

            if (allowNull && currentValue == "")
            {
                returnValue = null;
                break;
            }

            //probaj za točno določen tip...
            bool typeResolved = false;

            if (type == typeof(string))
            {
                typeResolved = true;
                if (currentValue != "")
                {
                    if (options != null)
                    {
                        foreach (DictionaryEntry option in options)
                        {
                            if (option.Key.ToString() == currentValue)
                            {
                                returnValue = currentValue;
                                return;
                            }
                        }
                        errorMessage = "Enter one of possible options!";
                    }
                    else
                    {
                        returnValue = currentValue;
                        return;
                    }
                }
                else
                {
                    errorMessage = "String value is required!";
                }
            }

            if (type == typeof(int?))
            {
                typeResolved = true;
                int iVal = 0;
                if (int.TryParse(currentValue, out iVal))
                {
                    returnValue = iVal;
                    return;
                }
                errorMessage = "Int value is required!";
            }

            if (type == typeof(decimal?))
            {
                typeResolved = true;
                decimal dVal = 0;
                if (decimal.TryParse(currentValue, out dVal))
                {
                    returnValue = dVal;
                    return;
                }
                errorMessage = "Decimal value is required!";
            }

            if (type == typeof(DateTime?))
            {
                typeResolved = true;
                DateTime dtVal = new DateTime();
                if (DateTime.TryParse(currentValue, out dtVal))
                {
                    returnValue = dtVal;
                    return;
                }
                errorMessage = "DateTime value is required!";
            }

            if (typeResolved == false)
            {
                throw new Exception("Type='" + type.ToString() + "' not supported in ReadLine_internal void!");
            }

            this.WriteLine(errorMessage, true);

        } while (1 == 1);

    }

    /// <summary>
    /// Reads line from user input and returns string
    /// </summary>
    /// <returns></returns>
    public string ReadLine()
    {
        return this.ReadLine(true);
    }

    /// <summary>
    /// Reads line from user input and returns string
    /// </summary>
    /// <returns></returns>
    public string ReadLine(bool allowNull)
    {
        object returnValue = null;
        ReadLine_internal(typeof(string), allowNull, ref returnValue, null);
        if (returnValue != null)
        {
            return returnValue.ToString();
        }
        else
        {
            return null;
        }

    }

    /// <summary>
    /// Reads line from user input and returns nullable integer
    /// </summary>
    /// <param name="allowNull"></param>
    /// <returns></returns>
    public int? ReadLineAsInt(bool allowNull)
    {
        object returnValue = null;
        ReadLine_internal(typeof(int?), allowNull, ref returnValue, null);
        return (int?)returnValue;
    }

    /// <summary>
    /// Reads line from user input and returns nullable decimal
    /// </summary>
    /// <param name="allowNull"></param>
    /// <returns></returns>
    public decimal? ReadLineAsDecimal(bool allowNull)
    {
        object returnValue = null;
        ReadLine_internal(typeof(decimal?), allowNull, ref returnValue, null);
        return (decimal?)returnValue;
    }

    /// <summary>
    /// Reads line from user input and returns nullable datetime
    /// </summary>
    /// <param name="allowNull"></param>
    /// <returns></returns>
    public DateTime? ReadLineDateTime(bool allowNull)
    {
        object returnValue = null;
        ReadLine_internal(typeof(DateTime?), allowNull, ref returnValue, null);
        return (DateTime?)returnValue;
    }

    /// <summary>
    /// Reads line from user input and returns string from options list
    /// </summary>
    /// <param name="options"></param>
    /// <param name="allowNull"></param>
    /// <returns></returns>
    public string ReadLineAsOption(StringDictionary options, bool allowNull)
    {
        if (options != null)
        {
            if (options.Count == 0)
            {
                throw new Exception("Options list can not be empty! You can pass only null or unempty options list!");
            }
            else
            {
                this.WriteLine("Enter one of following options:");
                foreach (DictionaryEntry de in options)
                {
                    string description = null;
                    if (de.Value != null)
                    {
                        description = de.Value.ToString();
                    }
                    string userLine = "[" + de.Key.ToString() + "]";
                    if (description != null)
                    {
                        userLine += " " + description;
                    }
                    this.WriteLine(userLine);
                }
            }
        }
        object returnValue = null;
        ReadLine_internal(typeof(string), allowNull, ref returnValue, options);
        if (returnValue != null)
        {
            return returnValue.ToString();
        }
        else
        {
            return null;
        }
    }

    #endregion

    const string consoleTitle = "Smart Console powered by Gregor Primar s.p.";

    /// <summary>
    /// Default constructor
    /// </summary>
    public ConsoleWindow()
    {
    }

    /// <summary>
    /// Set focus to console window
    /// </summary>
    public void SetFocus()
    {
        if (this.Displayed)
        {
            SetConsoleFocus();
        }
        else
        {
            throw new Exception("Unable to SetFocus because console is not displayed!");
        }
    }

    /// <summary>
    /// Opens console window
    /// </summary>
    public void Open()
    {
        if (this.Displayed == false)
        {

            AllocConsole();
            Console.Title = consoleTitle;
            //onemogoči zapiranje konzole...
            ChangeConsoleMenu(false);
            this.Displayed = true;
            Console.CancelKeyPress += new ConsoleCancelEventHandler(Console_CancelKeyPress);

            //nastavi default barve...
            this.BackgroundColor = ConsoleColor.DarkBlue;
            this.ForegroundColor = ConsoleColor.White;
            this.ForegroundErrorColor = ConsoleColor.Red;
            this.Clear();

            this.SetFocus();
        }
        else
        {
            throw new Exception("Console window is allready opened!");
        }            
    }

    void Console_CancelKeyPress(object sender, ConsoleCancelEventArgs e)
    {
        e.Cancel = true;
    }

    /// <summary>
    /// Closes console window
    /// </summary>
    public void Close()
    {
        if (this.Displayed)
        {
            Console.CancelKeyPress -= Console_CancelKeyPress;
            ChangeConsoleMenu(true);
            FreeConsole();
            this.Displayed = false;
        }
        else
        {
            throw new Exception("Can not close console window because its not displayed!");
        }
    }

    void ChangeConsoleMenu(bool enabled)
    {
        IntPtr hConsole = FindConsoleHandle();
        IntPtr hMenu = FindMenuHandle(hConsole);
        uint value = MF_ENABLED;
        if (enabled == false)
        {
            value = MF_GRAYED;
        }
        EnableMenuItem(hMenu, SC_CLOSE, value);
    }

    void SetConsoleFocus()
    { 
        IntPtr hConsole = FindConsoleHandle();
        while (true)
        {
            if (SetForegroundWindow(hConsole))
            {
                break;
            }
            Thread.Sleep(50);
        }
    }

    /// <summary>
    /// Finds handle to console window
    /// </summary>
    /// <returns></returns>
    IntPtr FindConsoleHandle()
    {
        string originalTitle = Console.Title;
        string uniqueTitle = Guid.NewGuid().ToString();
        Console.Title = uniqueTitle;
        Thread.Sleep(50);
        IntPtr handle = FindWindowByCaption(IntPtr.Zero, uniqueTitle);
        if (handle == IntPtr.Zero)
        {
            Console.Title = originalTitle;
            throw new Exception("Unable to find console window!");
        }
        Console.Title = originalTitle;
        return handle;
    }

    /// <summary>
    /// Finds handle to main menu
    /// </summary>
    /// <param name="windowHandle"></param>
    /// <returns></returns>
    IntPtr FindMenuHandle(IntPtr windowHandle)
    {
        IntPtr hSystemMenu = GetSystemMenu(windowHandle, false);
        return hSystemMenu;
    }

} 
```

以及如何使用这个类的示例代码：

```
 ConsoleWindow cw = new ConsoleWindow();
    cw.Open();
    cw.WriteLine("Some text displayed on smart console", true); 
```

# javascript - javascript：只有在检测到“return false”时才会执行 onsubmit

> ID：12449051
> 
> 赞同：3
> 
> 时间：2012-09-16T17:27:31.830
> 
> 标签：javascript, html

我不太明白它是如何`onsubmit="return validate()"`工作的。为什么我必须使用`return`该功能？仅当它`return false`从语句中检测到 a 时才有效？

```
<script type="text/javascript">
    function validate() {
        if ((document.example2.naming.value == "") || (document.example2.feed.value == "")) {
            alert("You must fill in all of the required .fields!");
            return false;
        }
        else {
            return true;
        }
</script>

<form name="example2" onsubmit="return validate()">
<input type="submit" name="B1" value="Submit">​​​​​​​ 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-16T17:34:19.983

使用`return`for`onsubmit`确定表单是否实际提交（`true`或`false`，分别）。当您想要在允许表单提交或不提交之前做一些特定的事情时，这对于 Javascript 很有用。例如，就像您提供的代码一样，关键是如果表单无效 - 如果某个字段为空白，则停止提交表单。重要的部分是您需要包含`return`在 onsubmit 部分中，以及实际返回`true`或`false`在您调用的函数中。这是因为`onsubmit`除非您返回，否则 for 的行为将始终完成`false`。因此，当您执行以下操作时：

```
onsubmit="validate();" 
```

什么都没有返回（因为缺少`return`） - 所以函数运行但就是这样，所以表单被提交。当您添加`return`时，提交取决于返回值 - 从函数返回的内容。如果不使用`return`，则函数返回什么都没有关系`validate`，因为 的结果`validate`实际上并没有返回到`onsubmit`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:29:41.820

当`return`ing时`false`，您会阻止*提交*`form`。否则，将提交表单，即使它可能有验证错误，例如，`feed`值为空。

另一方面，如果你`return true`，表单数据将被提交到[`action`](http://www.w3schools.com/tags/att_form_action.asp)属性定义的 URL。

# bash - USB 供应商和产品 ID 到设备绑定

> ID：12449057
> 
> 赞同：2
> 
> 时间：2012-09-16T17:28:10.937
> 
> 标签：bash, usb, lsusb

我有一个用于 GNU / Linux 上附加设备的 USB VID 和 PID。`045e:0084`， 例如。我想要绑定，所以我 grep 的输出`lsusb`并将`VID:PID`其按摩成可以接受的格式以供`udevadm`查找。最后，我采用结果路径的基本名称。就像是：

```
bus_dev=$(lsusb|grep VID:PID...) # Grep / Sed magic to extract bus and device from VID and PID.
path=$(udevadm info -q path -n /dev/bus/usb/$bus_dev) # e.g., -n /dev/bus/usb/003/018
basename $path # e.g., /devices/pci0000:00/0000:00:14.0/usb3/3-2/3-2.3/3-2.3.1
# e.g., yields 3-2.3.1 
```

然后我可以像这样使用它：

```
echo 3-2.3.1|sudo tee /sys/bus/usb/drivers/usb/unbind 
```

从 USB 供应商和产品 ID 获取绑定的首选方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:34:06.183

你的意思是这样的？

```
vidpid="1d6b:0002"
bus_dev=`lsusb | grep "ID\s$vidpid" | sed 's/^.*Bus\s\([0-9]\+\)\sDevice\s\([0-9]\+\).*$/\1\/\2/g' | tail -n 1` 
path=$(udevadm info -q path -n /dev/bus/usb/$bus_dev)
basename $path 
```

# php - 从一个循环中创建几个 MySQL 表？

> ID：12449059
> 
> 赞同：0
> 
> 时间：2012-09-16T17:28:34.413
> 
> 标签：php, mysql

这是代码：

```
<?php
$months= array("january", "november", "december");
$db_server = include('root.php');
if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());
mysql_select_db('info');
for ($i=0; $i < $months; $i++){
    $query1 = "CREATE TABLE {$months[$i]} (
    StIDf CHAR(10) NOT NULL, FulNam TEXT NOT NULL, ComNam TEXT NOT NULL,Add TEXT ,Tel TEXT )";
}
?> 
```

但它不起作用。我需要从一个循环创建几个表。有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:29:45.583

您永远不会执行实际查询，将此行添加到 for 循环内：

`mysql_query($query1);`

此外，您应该使用`count($month)`它来找出它包含多少项目。

```
for ($i = 0; $i < count($months); $i++) {
    $query1 = "CREATE TABLE {$months[$i]}  (
    StIDf CHAR(10) NOT NULL,FulNam TEXT NOT NULL, ComNam TEXT NOT NULL,Add TEXT ,Tel TEXT )";
    mysql_query($query1);
} 
```

另外，我建议使用`mysqli`or`mysql PDO`代替旧的，将来会弃用 mysql API。在此处阅读更多相关信息：http: [//se2.php.net/manual/en/mysqlinfo.api.choosing.php](http://se2.php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:35:22.707

试试这个：

```
<?php
$months    = array("january","november","december");
$db_server = include('root.php');

if (!$db_server) die("Unable to connect to MySQL: " . mysql_error());

mysql_select_db('info');

foreach($months as $month) {
    $query1 = "CREATE TABLE {$month}  ( "
            . "StIDf CHAR(10) NOT NULL, "
            . "FulNam TEXT NOT NULL, "
            . "ComNam TEXT NOT NULL, "
            . "Add TEXT, "
            . "Tel TEXT "
            . ")";
    $result = mysql_query($query1);
}
?> 
```

您的代码没有执行`mysql_query`（或来自 mysqli 或 PDO 的替代方案），因此在数据库中没有执行任何操作。

# javascript - 使用 twitter bootstrap 在选项卡中加载新页面

> ID：12449063
> 
> 赞同：11
> 
> 时间：2012-09-16T17:28:52.253
> 
> 标签：javascript, jquery, twitter-bootstrap

您好我正在使用以下代码使用 twitter bootstrap 创建选项卡式布局

```
<ul class="nav nav-tabs" >
   <li class="active"><a href="#"  data-toggle="tab">Request Audit</a></li>
   <li><a href="#" data-toggle="tab">status</a></li>
   <li><a href="#" data-toggle="tab">Settings</a></li>
   <li><a href="#" data-toggle="tab">Help</a></li>
</ul> 
```

现在在所有标签中我需要加载不同的页面。所以我想这样做：

```
<ul class="nav nav-tabs" >
       <li class="active"><a href="#"  data-toggle="tab">Home</a></li>
       <li><a href="status.html" data-toggle="tab">status</a></li>
       <li><a href="settings.html" data-toggle="tab">Settings</a></li>
       <li><a href="help.html" data-toggle="tab">Help</a></li>
</ul> 
```

我不想在所有选项卡中从同一页面加载内容，上面的代码没有加载新页面。请帮助..

更新 ：

```
<ul class="nav nav-tabs" id="myTab">
  <li class="active"><a href="#audit">Request Audit</a></li>
  <li><a href="#status">status</a></li>
  <li><a href="#settings">Settings</a></li>
  <li><a href="#help">Help</a></li>
</ul>

<div class="tab-content">
  <div class="tab-pane active" id="audit">
    <p>audit</p>
  </div>
  <div class="tab-pane" id="status">
     <p>status</p>
  </div>
  <div class="tab-pane" id="settings">
      <p>settings</p>
  </div>
  <div class="tab-pane" id="help">
      <p>help</p>
  </div>
</div> 
```

我添加了这个脚本

```
<script>  

   $('#myTab a[href="#status"]').click(function (e) {
         e.preventDefault();
         $(this).tab('show');
         $('#status').load('status.html');
   });
</script> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-16T17:53:12.323

有几种方法可以做到这一点，但在决定使用哪一种之前，我想确保你真的想要这样拼凑你的文件。是什么阻止您将内容按原样放在页面上的选项卡中？

如果没有，为什么不使用 PHP？

如果你决定坚持你目前的计划，我会通过 jQuery 和 AJAX 来完成你想要做的事情。

首先，您要确保使用正确的 Bootstrap 结构 - 查看[Tabbable Nav](http://getbootstrap.com/components/#nav)部分，并使您的标记选项卡对应于空白内容区域：

```
 <div class="tabbable" style="margin-bottom: 18px;">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#tab1" data-toggle="tab">Request Audit</a></li>
            <li class=""><a href="#tab2" data-toggle="tab">Status</a></li>
            <li class=""><a href="#tab3" data-toggle="tab">Settings</a></li>
            <li class=""><a href="#tab4" data-toggle="tab">Help</a></li>
          </ul>
          <div class="tab-content" style="padding-bottom: 9px; border-bottom: 1px solid #ddd;">
            <div class="tab-pane active" id="tab1">
              <p>Placeholder 1</p>
            </div>
            <div class="tab-pane" id="tab2">
              <p>Placeholder 2</p>
            </div>
            <div class="tab-pane" id="tab3">
              <p>Placeholder 3</p>
            </div>
            <div class="tab-pane" id="tab4">
              <p>Placeholder</p>
            </div>
          </div>
        </div>​ 
```

然后，使用[jQuery.load](http://api.jquery.com/load/)填充`tab-panes`！

```
$('#tab2').load('/status.html');
$('#tab3').load('/settings.html');
$('#tab4').load('/help.html'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-26T05:10:38.077

只需删除**data-toggle="tab"**

例如：在主页上：

```
<ul class="nav nav-tabs" >
       <li class="active"><a href="#" >Home</a></li>
       <li><a href="status.html" >status</a></li>
       <li><a href="settings.html" >Settings</a></li>
       <li><a href="help.html" >Help</a></li>
</ul>
<div class="tab-content">
     <div class="tab-pane active" id="tab1">
         <p>Home Page content 1</p>
     </div>
</div>​ 
```

在 status.html 页面上：

```
<ul class="nav nav-tabs" >
       <li ><a href="#" >Home</a></li>
       <li class="active"><a href="status.html" >status</a></li>
       <li><a href="settings.html" >Settings</a></li>
       <li><a href="help.html" >Help</a></li>
</ul>
<div class="tab-content">
     <div class="tab-pane active" id="tab1">
         <p>status content 1</p>
     </div>
</div>​ 
```

不好的是只有一些导航标签代码的副本

# java - 对话框标题栏中的自定义按钮

> ID：12449066
> 
> 赞同：5
> 
> 时间：2012-09-16T17:29:02.807
> 
> 标签：java, android, xml, dialog, titlebar

我正在尝试制作一个对话框，类似于 Nova Launcher 中的对话框（对话框的右上角）：

![在此处输入图像描述](../Images/702bd89b2d64191402d67053df259fab.png)

显示应用程序的设置。我无法让它显示，我当前的对话框只显示一个正常的标题栏：当前代码：

自定义对话框文件：（add_dialog_custom_title）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:paddingLeft="15.0dip"
    android:paddingRight="15.0dip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        android:textAppearance="?android:textAppearanceLarge"
        android:gravity="center_vertical"
        android:layout_width="0.0dip"
        android:layout_height="wrap_content"
        android:minHeight="?android:listPreferredItemHeight"
        android:text="@string/menu_item_add_item"
        android:drawablePadding="14.0dip"
        android:layout_weight="1.0" />
    <ImageView
        android:layout_gravity="center"
        android:id="@id/settings_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@android:drawable/ic_menu_preferences"
        android:layout_weight="0.0" />
</LinearLayout> 
```

NfcUnlockActivity：

```
package com.quinny898.gcse.doorcontrol;
import android.app.*;
import android.widget.*;
import android.content.*;
import android.text.*;
import android.os.*;
import android.view.*;

public class NfcUnlockActivity extends Activity 
{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        AlertDialog.Builder builder;
        AlertDialog alertDialog;
    Context mContext = getApplicationContext();
    Dialog dialog = new Dialog (mContext);
    LayoutInflater inflater = (LayoutInflater) mContext.getSystemService(LAYOUT_INFLATER_SERVICE);
    View layout = inflater.inflate(R.layout.add_dialog_custom_title,
    (ViewGroup) findViewById(R.id.layout_root));

    dialog.setContentView(R.layout.add_dialog_custom_title);
    dialog.setTitle("Door Control");
    builder = new AlertDialog.Builder(mContext);
    builder.setView(layout);
    alertDialog = builder.create();
    }
} 
```

所有的 ID 和字符串都在那里，我检查了一下，
我觉得我在这里错过了一些非常愚蠢的东西，有什么帮助吗？

编辑：修复它，我按照你说的做了，然后添加了 alertDialog.show(); 然后我在这里使用第二个答案来修复导致的崩溃：[Android：ProgressDialog.show() crash with getApplicationContext](https://stackoverflow.com/questions/1561803/android-progressdialog-show-crashes-with-getapplicationcontext) 完美运行，感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:00:53.053

这可能是因为您的图像没有在您创建的对话框上膨胀，要膨胀它，请使用 android:id = "@+id/settings_button" 而不是 "@id/setting_button"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:46:09.700

一个错误是在您编写的图像视图中

```
android:id="@id/settings_button" 
```

代替

```
android:id="@+id/settings_button" 
```

# java - Spring Framework - java.lang.IncompatibleClassChangeError: 类 net.sf.cglib.core.DebuggingClassWriter 具有接口 org.objectweb.asm.ClassVisitor

> ID：12449074
> 
> 赞同：6
> 
> 时间：2012-09-16T17:30:06.130
> 
> 标签：java, spring, jar

当我试图在 Eclipse 上的 Spring 中运行一个简单的静态切入点示例时，我遇到了以下错误消息：-

> java.lang.IncompatibleClassChangeError: 类 net.sf.cglib.core.DebuggingClassWriter 有接口 org.objectweb.asm.ClassVisitor

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T18:17:02.173

首先，找出哪个 cglib 版本与 asm-3.1 兼容。其次，只使用兼容版本。现在您使用 2 个不同版本的 cglib jars（这总是很糟糕）。

# javascript - CSS 和 JS 文件仅在 Google Chrome 上加载

> ID：12449076
> 
> 赞同：1
> 
> 时间：2012-09-16T17:30:41.870
> 
> 标签：javascript, css, html

我遇到了一个奇怪的错误，我的 CSS 和 JS 文件仅在 Chrome 上加载。我尝试了不同的编码，但似乎没有任何效果。

Safari 似乎加载了一些 CSS，元素以正确的顺序出现并具有动画效果。然而，在 Firefox 上根本没有加载任何外部组件。

任何人都可以对此有所了解吗？谢谢

[http://keiranlovett.com](http://keiranlovett.com)

URGH：所以在服务器更新中，备份决定忽略几十个关键文件夹（不好），但 Chrome 没有更新内容。有一个编码错误，但我也链接到十几个丢失的文件，而它说我没有。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:34:40.907

Firefox 将您的 CSS 读取为 UTF16。

进一步看，您的 HTTP 服务器似乎做错了什么。

# python - 在 Python 线程中模拟取消标记

> ID：12449077
> 
> 赞同：2
> 
> 时间：2012-09-16T17:30:52.357
> 
> 标签：python, multithreading, semaphore, task-queue, cancellationtokensource

我刚刚用 Python 写了一个任务队列，它的作用是限制一次运行的任务数量。这有点不同，`Queue.Queue`因为它不是限制队列中可以有多少项目，而是限制一次可以取出多少项目。它仍然使用 unbounded`Queue.Queue`来完成它的工作，但它依赖于 a`Semaphore`来限制线程数：

```
from Queue import Queue
from threading import BoundedSemaphore, Lock, Thread

class TaskQueue(object):
    """
    Queues tasks to be run in separate threads and limits the number
    concurrently running tasks.

    """

    def __init__(self, limit):
        """Initializes a new instance of a TaskQueue."""
        self.__semaphore = BoundedSemaphore(limit)
        self.__queue = Queue()
        self.__cancelled = False
        self.__lock = Lock()

    def enqueue(self, callback):
        """Indicates that the given callback should be ran."""
        self.__queue.put(callback)

    def start(self):
        """Tells the task queue to start running the queued tasks."""
        thread = Thread(target=self.__process_items)
        thread.start()

    def stop(self):
        self.__cancel()
        # prevent blocking on a semaphore.acquire
        self.__semaphore.release()
        # prevent blocking on a Queue.get
        self.__queue.put(lambda: None)

    def __cancel(self):
        print 'canceling'
        with self.__lock:
            self.__cancelled = True

    def __process_items(self):
        while True:
            # see if the queue has been stopped before blocking on acquire
            if self.__is_canceled():
                break

            self.__semaphore.acquire()

            # see if the queue has been stopped before blocking on get
            if self.__is_canceled():
                break

            callback = self.__queue.get()

            # see if the queue has been stopped before running the task
            if self.__is_canceled():
                break

            def runTask():
                try:
                    callback()
                finally:
                    self.__semaphore.release()

            thread = Thread(target=runTask)
            thread.start()
            self.__queue.task_done()

    def __is_canceled(self):
        with self.__lock:
            return self.__cancelled 
```

除非我明确停止任务队列，否则 Python 解释器将永远运行。这比我想象的要棘手得多。如果您查看该`stop`方法，您会看到我在队列上设置了一个`canceled`标志、`release`信号量和`put`一个无操作回调。最后两部分是必要的，因为代码可能会阻塞在`Semaphore`或`Queue`. 我基本上必须强迫这些通过，以便循环有机会爆发。

此代码有效。当运行一个试图并行运行数千个任务的服务时，这个类很有用。为了保持机器平稳运行并防止操作系统因过多的活动线程而尖叫，此代码将限制任何时间的线程数。

我之前用 C# 写过类似的代码块。使该代码特别“干”的原因是 .NET 有一个叫做 a 的东西`CancellationToken`，几乎每个线程类都使用它。任何时候有阻塞操作，该操作都需要一个可选的令牌。如果父任务被取消，任何使用该令牌阻塞的子任务也将立即被取消。与通过释放信号量或将值放入队列来“伪造”它相比，这似乎是一种更干净的退出方式。

我想知道在 Python 中是否有等效的方法？我绝对想使用线程而不是异步事件之类的东西。我想知道是否有一种方法可以使用两个`Queue.Queue`s 来实现相同的事情，其中​​一个具有最大尺寸，而另一个没有 - 但我仍然不确定如何处理取消。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T02:52:09.577

我认为您的代码可以通过使用**中毒**和来简化`Thread.join()`：

```
from Queue import Queue
from threading import Thread

poison = object()

class TaskQueue(object):

    def __init__(self, limit):
        def process_items():
            while True:
                callback = self._queue.get()
                if callback is poison:
                    break
                try:
                    callback()
                except:
                    pass
                finally:
                    self._queue.task_done()
        self._workers = [Thread(target=process_items) for _ in range(limit)]
        self._queue = Queue()

    def enqueue(self, callback):
        self._queue.put(callback)

    def start(self):
        for worker in self._workers:
            worker.start()

    def stop(self):
        for worker in self._workers:
            self._queue.put(poison)
        while self._workers:
            self._workers.pop().join() 
```

未经测试。

为简洁起见，我删除了评论。

此外，在这个版本`process_items()`中是真正的私人。

顺便说一句：该`Queue`模块的重点是让您摆脱可怕的锁定和事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:02:16.820

您似乎正在为队列中的每个任务创建一个新线程。这本身就是一种浪费，同时也会给你带来如何限制线程数的问题。

相反，一种常见的方法是创建固定数量的工作线程，让它们自由地从队列中拉取任务。要取消队列，您可以[清除它](https://stackoverflow.com/a/6518011/222914)并让工作人员保持活力以期待未来的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T02:12:46.290

我接受了 Janne Karila 的建议并创建了一个线程池。这消除了对信号量的需要。问题是如果您希望队列消失，您必须停止工作线程运行（只是我之前所做的一个变体）。新代码非常相似：

```
class TaskQueue(object):
    """
    Queues tasks to be run in separate threads and limits the number
    concurrently running tasks.

    """

    def __init__(self, limit):
        """Initializes a new instance of a TaskQueue."""
        self.__workers = []
        for _ in range(limit):
            worker = Thread(target=self.__process_items)
            self.__workers.append(worker)
        self.__queue = Queue()
        self.__cancelled = False
        self.__lock = Lock()
        self.__event = Event()

    def enqueue(self, callback):
        """Indicates that the given callback should be ran."""
        self.__queue.put(callback)

    def start(self):
        """Tells the task queue to start running the queued tasks."""
        for worker in self.__workers:
            worker.start()

    def stop(self):
        """
        Stops the queue from processing anymore tasks. Any actively running
        tasks will run to completion.

        """
        self.__cancel()
        # prevent blocking on a Queue.get
        for _ in range(len(self.__workers)):
            self.__queue.put(lambda: None)
            self.__event.wait()

    def __cancel(self):
        with self.__lock:
            self.__queue.queue.clear()
            self.__cancelled = True

    def __process_items(self):
        while True:
            callback = self.__queue.get()

            # see if the queue has been stopped before running the task
            if self.__is_canceled():
                break

            try:
                callback()
            except:
                pass
            finally:
                self.__queue.task_done()
        self.__event.set()

    def __is_canceled(self):
        with self.__lock:
            return self.__cancelled 
```

如果你仔细看，我不得不做一些会计来杀死工人。我基本上等了`Event`和工人一样多的时间。我`clear`是底层队列，以防止工人以任何其他方式被取消。在将每个虚假值注入队列后，我也会等待，因此一次只能有一个工作人员取消。

我已经对此进行了一些测试，它似乎正在工作。消除对虚假值的需求仍然很好。

# c - 使用 C 和 GSL 的三次方根

> ID：12449079
> 
> 赞同：0
> 
> 时间：2012-09-16T17:31:05.890
> 
> 标签：c, gsl

我正在尝试使用 GSL 编写一个 C 程序，按照此处的说明查找三次方程的根：[http](http://www.gnu.org/software/gsl/manual/html_node/Cubic-Equations.html) ://www.gnu.org/software/gsl/manual/html_node/Cubic-Equations.html 。这就是我想出的：

```
#include <stdio.h>
#include <gsl/gsl_poly.h>

double *x0,*x1,*x2;
int roots;

int
main (void)
{
    roots = gsl_poly_solve_cubic(0,0,0,x0,x1,x2);

    printf( " %d ", roots);

    return 0;
} 
```

参数是 0,0,0 因为我想先测试它是否有效。代码可以编译，但运行时会崩溃，没有输出。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:34:35.540

x0、x1 和 x2 只是悬空指针 - 将代码更改为：

```
double x0,x1,x2;
int roots;

int
main (void)
{
    roots = gsl_poly_solve_cubic(0,0,0,&x0,&x1,&x2);

    printf( " %d ", roots);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:35:24.570

您误解了 C 中如何实现引用语义。请阅读我刚刚在完全相同的主题上写的[这个答案。](https://stackoverflow.com/a/12449034/596781)

**解决方案：**

```
double x0, x1, x2;

int roots = gsl_poly_solve_cubic(0, 0, 0, &x0, &x1, &x2); 
```

**简而言之：**调用者必须获取接收者变量的地址。收件人变量必须*存在*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T17:35:53.960

据你说，我们有`gsl_poly_solve_cubic (double a, double b, double c, double * x0, double * x1, double * x2)`。您声明 3 个双指针而不分配任何内存……这将导致段错误。
尝试声明双变量并传递它们的地址：

```
#include <stdio.h>
#include <gsl/gsl_poly.h>

double x0,x1,x2;
int roots;

int
main (void)
{
    roots = gsl_poly_solve_cubic(0,0,0,&x0,&x1,&x2);

    printf( " %d ", roots);

    return 0;
} 
```

# iphone - 主从应用程序 - 详细视图中的静态表

> ID：12449083
> 
> 赞同：0
> 
> 时间：2012-09-16T17:31:45.597
> 
> 标签：iphone, objective-c, xcode

我正在尝试使用故事板在 Xcode 4 中编写应用程序。这是一个主详细信息应用程序，使用表格和详细信息视图一切正常。但在我的详细视图中，我希望有一个静态表来显示数据。以分组表格样式的方式，左侧是“键”，右侧是“值”，如果这是一种放置方式......所以，在我将表格放入我的 UIView 之前，一切正常。显然你必须把它放在 UITableView 中才能工作，所以我删除了 Xcode 为我制作的 UIView 并放在 UITableView 的位置。我将其与标识符、标题等设置完全相同（我认为），然后将表格单元格与插座连接起来，等等。但是现在当我进入视图时，我只是得到一个空表（嗯，不是空的，只是所有的行都说“详细信息” 而不是我想要的实际数据）。我不明白为什么！D：我什至把 DetailViewController.h 也改成了“UITableViewController”！无济于事... :( 有人可以告诉我我做错了什么！我敢打赌这真的很简单... :L 这是我的代码

主视图控制器.h

```
#import <UIKit/UIKit.h>

@class DetailViewController;

@interface MasterViewController : UITableViewController

@property (strong, nonatomic) DetailViewController *detailViewController;
@property (strong) NSMutableArray *verbs;

@end 
```

主视图控制器.m

```
#import "MasterViewController.h"
#import "DetailViewController.h"
#import "VerbData.h"

@interface MasterViewController () {
    NSMutableArray *_objects;
}
@end

@implementation MasterViewController

@synthesize verbs = _verbs;

- (void)awakeFromNib
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        self.clearsSelectionOnViewWillAppear = NO;
        self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    }
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    self.detailViewController = (DetailViewController *)  [[self.splitViewController.viewControllers lastObject] topViewController];
    self.title = @"Verbs";
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

- (void)insertNewObject:(id)sender
{
    if (!_objects) {
        _objects = [[NSMutableArray alloc] init];
    }
    [_objects insertObject:[NSDate date] atIndex:0];
    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
    [self.tableView insertRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _verbs.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"VerbCell"];

    VerbData *verb = [self.verbs objectAtIndex:indexPath.row];
    cell.textLabel.text = verb.infinitive;
    cell.detailTextLabel.text = verb.english;
    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_objects removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
}

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        VerbData *object = [self.verbs objectAtIndex:indexPath.row];
        self.detailViewController.detailItem = object;
    }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"showDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        VerbData *object = [self.verbs objectAtIndex:indexPath.row];
        [[segue destinationViewController] setDetailItem:object];
    }
}

@end 
```

DetailViewController.h

```
#import <UIKit/UIKit.h>
#import "VerbData.h"

@interface DetailViewController : UITableViewController <UISplitViewControllerDelegate>

@property (strong, nonatomic) VerbData *detailItem;

@property (weak, nonatomic) IBOutlet UILabel *detailDescriptionLabel;
@property (weak, nonatomic) IBOutlet UILabel *jeOutlet;
@property (weak, nonatomic) IBOutlet UILabel *tuOutlet;
@property (weak, nonatomic) IBOutlet UILabel *ilOutlet;
@property (weak, nonatomic) IBOutlet UILabel *nousOutlet;
@property (weak, nonatomic) IBOutlet UILabel *vousOutlet;
@property (weak, nonatomic) IBOutlet UILabel *ilsOutlet;

@end 
```

细节视图控制器.m

```
#import "DetailViewController.h"

@interface DetailViewController ()
@property (strong, nonatomic) UIPopoverController *masterPopoverController;
- (void)configureView;
@end

@implementation DetailViewController

#pragma mark - Managing the detail item
@synthesize detailItem = _detailItem;
@synthesize jeOutlet = _jeOutlet;
@synthesize tuOutlet = _tuOutlet;
@synthesize ilOutlet = _ilOutlet;
@synthesize nousOutlet = _nousOutlet;
@synthesize vousOutlet = _vousOutlet;
@synthesize ilsOutlet = _ilsOutlet;

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        // Update the view.
        [self configureView];
    }

    if (self.masterPopoverController != nil) {
        [self.masterPopoverController dismissPopoverAnimated:YES];
    }
}

- (void)configureView
{
    // Update the user interface for the detail item.

    if (self.detailItem) {
        self.detailDescriptionLabel.text = self.detailItem.english;
        self.jeOutlet.text = self.detailItem.je;
        self.tuOutlet.text = self.detailItem.tu;
        self.ilOutlet.text = self.detailItem.il;
        self.nousOutlet.text = self.detailItem.nous;
        self.vousOutlet.text = self.detailItem.vous;
        self.ilsOutlet.text = self.detailItem.ils;
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.title = self.detailItem.infinitive;
    [self configureView];
}

- (void)viewDidUnload
{
    [self setJeOutlet:nil];
    [self setTuOutlet:nil];
    [self setIlOutlet:nil];
    [self setNousOutlet:nil];
    [self setVousOutlet:nil];
    [self setIlsOutlet:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } else {
        return YES;
    }
}

#pragma mark - Split view

- (void)splitViewController:(UISplitViewController *)splitController willHideViewController:(UIViewController *)viewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{
    barButtonItem.title = NSLocalizedString(@"Master", @"Master");
    [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
    self.masterPopoverController = popoverController;
}

- (void)splitViewController:(UISplitViewController *)splitController willShowViewController:(UIViewController *)viewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    // Called when the view is shown again in the split view, invalidating the button and popover controller.
    [self.navigationItem setLeftBarButtonItem:nil animated:YES];
    self.masterPopoverController = nil;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:35:47.280

我将尝试调试的第一件事是*-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath*方法。是返回值吗？尝试将NSLog放入此方法并检查它。

或者也许这会帮助你：

> 注意：如果要更改单元格的背景颜色（通过 UIView 声明的 backgroundColor 属性设置单元格的背景颜色），您必须在委托的 tableView:willDisplayCell:forRowAtIndexPath: 方法中进行，而不是在 tableView :cellForRowAtIndexPath: 数据源的。更改组样式表视图中单元格的背景颜色在 iOS 3.0 中的效果与以前版本的操作系统不同。它现在影响圆角矩形内部的区域，而不是它外部的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:53:41.493

代码必须处理 dequeueReusableCellWithIdentifier 回答 nil 的情况...

```
static NSString *CellIdentifier = @"VerbCell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (!cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
} 
```

# wso2 - WSO2 ESB 休息服务调用示例

> ID：12449086
> 
> 赞同：0
> 
> 时间：2012-09-16T17:32:04.593
> 
> 标签：wso2, wso2esb

谁能给我指出一个成熟的 REST 服务调用表单 wso2 ESB？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:41:22.160

请查看 Hiranya [1] [2] 撰写的文章。

这些文章对 WSO2 ESB REST API 支持提供了很好的解释。

[1]。[http://techfeast-hiranya.blogspot.com/2012/09/how-to-get-cup-of-coffee-wso2-way.html](http://techfeast-hiranya.blogspot.com/2012/09/how-to-get-cup-of-coffee-wso2-way.html)

[2]。[http://wso2.org/library/articles/2012/09/get-cup-coffee-wso2-way](http://wso2.org/library/articles/2012/09/get-cup-coffee-wso2-way)

希望这可以帮助！

/哈莎娜

# javascript - 本地存储问题

> ID：12449091
> 
> 赞同：0
> 
> 时间：2012-09-16T17:33:09.147
> 
> 标签：javascript, jquery, local-storage

我的商店使用 localStorage 来存储购物车。我已经使用这一行来检索值：

```
var kamat = window.localStorage.getItem("simpleCart_items"); alert(kamat); 
```

这将检索类似：

```
{"SCI-1":{"quantity":1,"id":"SCI-1","price":20,"name":"Valkoinen hiilikuitu -teippi","size":"Tyhjä"},"SCI-3":{"quantity":1,"id":"SCI-3","price":4,"name":"Car Speaker -hajuste","color":"Sport Fresh"}} 
```

由于我已将其存储为变量，因此我想稍后再使用它。

我想在最后的大括号之前添加这个（在变量 kamat 之后）

```
var toimituskulut = {"Toimitus":{"quantity":1,"id":"Toimituskulut","price":8,"name":"Toimituskulut"}}; 
```

我已经尝试过了，因为它需要在项目之间使用冒号：

```
var kamatjatoimituskulut = kamat + "," + toimituskulut; 
```

但不会工作。如果可以，它会在最后一个大括号之后插入 toimituskulut 的内容。那么我需要做什么呢？

**编辑**

单击按钮时，我正在尝试对其进行编辑：

```
$("#posti").live('click', function() {
        $(".maksu").slideDown(600);
        $("#posti").attr("disabled" , "disabled");
        $("#matkahuolto").removeAttr("disabled");
        $("#posti").addClass( "selectedtoimitus" );
        $("#matkahuolto").removeClass( "selectedtoimitus" );
        $(".simpleCart_shipping").html(kamat);  
        var kamatObj = JSON.parse(localStorage["simpleCart_items"]);
        kamatObj['toimituskulut'] = toimituskulut;
        localStorage["simpleCart_items"] = JSON.stringify(kamatObj);

    }); 
```

但是不，它不会添加任何东西。

[JSFIDDLE](http://jsfiddle.net/gV88c/)

**因此，如果本地存储如下所示：**

```
{"SCI-1":{"quantity":1,"id":"SCI-1","price":20,"name":"Valkoinen hiilikuitu -teippi","size":"Tyhjä"},"SCI-3":{"quantity":1,"id":"SCI-3","price":4,"name":"Car Speaker -hajuste","color":"Sport Fresh"}} 
```

**当我单击一个按钮时，我希望它看起来像这样**

```
{"SCI-1":{"quantity":1,"id":"SCI-1","price":20,"name":"Valkoinen hiilikuitu -teippi","size":"Tyhjä"},"SCI-3":{"quantity":1,"id":"SCI-3","price":4,"name":"Car Speaker -hajuste","color":"Sport Fresh"},"Toimitus":{"quantity":1,"id":"Toimitus","price":5,"name":"Toimituskulut"}} 
```

但是这样做`var kamatjatoimituskulut = kamat + "," + toimituskulut;` 只会输出类似的东西，对吧？

```
{"SCI-1":{"quantity":1,"id":"SCI-1","price":20,"name":"Valkoinen hiilikuitu -teippi","size":"Tyhjä"},"SCI-3":{"quantity":1,"id":"SCI-3","price":4,"name":"Car Speaker -hajuste","color":"Sport Fresh"}},"Toimitus":{"quantity":1,"id":"Toimitus","price":5,"name":"Toimituskulut"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:08:09.827

如果您有两个包含 JSON 字符串的变量，如下所示：

```
var kamat = '{"SCI-1":{"quantity":1,"id":"SCI-1","price":20,"name":"Valkoinen hiilikuitu -teippi","size":"Tyhjä"},"SCI-3":{"quantity":1,"id":"SCI-3","price":4,"name":"Car Speaker -hajuste","color":"Sport Fresh"}}';

var toimituskulut = '{"Toimitus":{"quantity":1,"id":"Toimituskulut","price":8,"name":"Toimituskulut"}}'; 
```

您需要像这样将这些字符串解析为 json（我使用的是 jQuery）：

```
var kamatJSON = $.parseJSON(kamat);
var toimitusJSON = $.parseJSON(toimituskulut); 
```

然后像这样将它们加在一起：

```
$.extend(kamatJSON, toimitusJSON); 
```

并且由于它是一个对象，因此如果您访问以下值，则顺序并不重要：

```
kamatJSON.Toimitus 
```

[**小提琴**](http://jsfiddle.net/LNptx/4/);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:44:47.013

您想要的是将属性添加到对象。

但是你拥有的是一个字符串，因为 localStorage 只存储字符串。它似乎存储为 JSON（这是最明显的解决方案）。

首先你需要恢复对象：

```
var kamatObj = JSON.parse(localStorage["simpleCart_items"]); 
```

然后你可以添加一个属性：

```
kamatObj['toimituskulut'] = toimituskulut; 
```

然后您可以再次将其序列化为字符串以将其放回 localStorage ：

```
localStorage["simpleCart_items"] = JSON.stringify(kamatObj); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T18:09:51.190

```
 Try This :
        $("#posti").live('click', function() {
                $(".maksu").slideDown(600);
                $("#posti").attr("disabled" , "disabled");
                $("#matkahuolto").removeAttr("disabled");
                $("#posti").addClass( "selectedtoimitus" );
                $("#matkahuolto").removeClass( "selectedtoimitus" );
                $(".simpleCart_shipping").html(kamat);  
                var kamatObj = JSON.parse(localStorage["simpleCart_items"]);
var resultObject =JSON.parse((kamatObj).concat(JSON.parse(toimituskulut));
 alert(resultobjcet); 
localStorage["simpleCart_items"] = resultObject; 
            }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T04:08:37.497

如果您尝试在本地存储中向对象添加内容（当然是字符串化的），我为此目的编写了一个工具。它可以在本地存储中设置任何类型的值，并同样提取。它甚至可以存储嵌套在存储值深处的值。[您可以在https://github.com/andresgallo/truStorage](https://github.com/andresgallo/truStorage)找到脚本/工具

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-17T01:31:13.590

您可能想查看[localDataStorage](https://github.com/macmcmeans/localDataStorage)。它透明地设置/获取数组、布尔值、日期、浮点数、整数、字符串和对象。它提供轻量级数据混淆（为了安全）并智能压缩字符串。该实用程序允许您按键（名称）或（键）值或数据类型查询，检查重复值，并支持写保护键的概念。注意：*我是该实用程序的作者。*

# java - 从地图中获取地图的值

> ID：12449092
> 
> 赞同：-1
> 
> 时间：2012-09-16T17:33:13.060
> 
> 标签：java

在我的代码中，我有一个

```
Map<String,Map<String,customObject>> 
```

我不确定如何迭代此地图并从中获取值。我在这里要做的是通过将密钥传递给外部 Map 来获取封闭的 Map。当我得到封闭的地图时，我需要对其进行迭代并从中获取键和值。你能告诉我我该怎么做吗，因为我有点卡在这里。任何类似类型的示例或代码都有助于更好地理解它。

感谢 Vikeng21

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:38:56.543

您可以使用两个地图的条目集。像这样的东西：

```
 Map<String,Map<String,String>> map1 = ...
    Set<Entry<String,Map<String,customObject>>> entrySet1 = map1.entrySet();
    for (Entry<String, Map<String, customObject>> entry1 : entrySet1) {
        Map<String,String> map2 = entry1.getValue();
        Set<Entry<String, customObject>> entrySet2 = map2.entrySet();
        for (Entry<String, customObject> entry2 : entrySet2) {
            System.out.println(entry1.getKey() +" -> "+entry2.getKey()+" -> "+entry2.getValue());
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:36:51.993

迭代哈希图条目...

```
for (Map.Entry<String, Map<String, Object>> ent : hashmap.entrySet())
{
    //ent.getKey();   is the key [String]
    //ent.getValue(); is the value [Map<String, Object>]
} 
```

现在从那里开始工作，基本上是一样的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T17:37:23.207

> 我不知道如何迭代这张地图并从中获取值

您将像使用任何地图一样迭代地图的值 - 请参见下面使用这种结构的示例。

```
Map<String, CustomObject> innerMap = new HashMap<String, CustomObject> ();
innerMap.put("abc", new CustomObject());

Map<String, Map<String, CustomObject>> externalMap = new HashMap<String, Map<String, CustomObject>> ();

externalMap.put("map1", innerMap);

//iterate over all the maps contained in externalMap 
for (Map<String, CustomObject> inner : externalMap.values()) {
    System.out.println(inner);
} 
```

如果您还需要访问密钥，则可以遍历条目集：

```
for (Entry<String, Map<String, CustomObject>> e : externalMap.entrySet()) {
   System.out.println(e.getKey()); //map1
   System.out.println(e.getValue()); //innerMap
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:45:20.893

我想这个例子会给你答案....

```
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;

public class MapInMap {
    public static void main(String[] args) {
        Map<String, MyObj> innerMap01 = new HashMap<String, MyObj>();
        Map<String, MyObj> innerMap02 = new HashMap<String, MyObj>();
        innerMap01.put("OneOne", new MyObj());
        innerMap02.put("TwoOne", new MyObj());

        Map<String, Map<String, MyObj>> maps = new HashMap<String, Map<String, MyObj>>();

        maps.put("One", innerMap01);
        maps.put("Two", innerMap02);

        for (Entry<String, Map<String, MyObj>> map : maps.entrySet()) {
            for (Entry<String, MyObj> innerObject : map.getValue().entrySet()) {
                // your logic
            }
        }
    }
}

class MyObj {
    int i;
} 
```

# ruby-on-rails - Ruby on Rails Strings：查找下一个不是字母或数字的字符？

> ID：12449095
> 
> 赞同：0
> 
> 时间：2012-09-16T17:33:28.153
> 
> 标签：ruby-on-rails, twitter

我现在正在做一个提及功能，所以当用户输入@时，他们为用户名输入的下一部分是可点击的，直到出现一个空格。这是假设他们正确输入了只有字母和数字的用户名。我需要它来工作，所以如果他们输入“Hi @jon！” 它发现感叹号（或任何不是字母或数字的符号）不是用户名的一部分，并将其排除在外，而不是仅仅寻找以下空格。

这就是我所拥有的：

```
while @comment.content.include? "@" do
  at = @comment.content.index('@')
  space = @comment.content.index(' ', at)
  length = space - at
  usernotag = @comment.content[at + 1,length - 1]
  userwtag = @comment.content[at,length]
    @user = User.where(:username => usernotag.downcase).first
    @mentioned_users.push(@user)
  replacewith = "<a href='/" + usernotag + "'>*%^$&*)()_+!$" + usernotag + "</a>"
  @comment.content = @comment.content.gsub(userwtag, replacewith)
end

@comment.content = @comment.content.gsub("*%^$&*)()_+!$", "@") 
```

知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:50:59.857

您应该使用正则表达式来解析/提取用户引用：

```
# Transform comment content inline.
@comment.content.gsub!(/@[\w\d]+/) {|user_ref| link_if_user_reference(user_ref) }
@comment.save!

# Helper to generate a link to the user, if user exists
def link_if_user_reference(user_ref)
  username = user_ref[1..-1]
  return user_ref unless User.find_by_name(username)

  link_to user_ref, "/users/#{user_name}"
  # => produces link @username => /user/username
end 
```

这假设您的用户名仅限于您所说的字母数字字符（字母或数字）。如果您有其他字符，您可以将它们添加到正则表达式中包含的集合中。

# jquery - 无法让 jQuery 验证插件正常工作

> ID：12449096
> 
> 赞同：0
> 
> 时间：2012-09-16T17:33:37.310
> 
> 标签：jquery, jquery-plugins, jquery-validate

我是 jQuery 新手，虽然我了解它的工作原理，但我无法弄清楚为什么验证插件在我的表单上不起作用。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="/validation/dist/jquery.validate.min.js"></script>
<script type=text/javascript">
    $(document).ready(function(){
    $("#signup").validate();
    });
</script> 
```

表格标题：

```
<form action="/registration/" method="post" id="signup"> 
```

此外，获取最新版本的 jQuery 和验证插件的推荐来源是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:58:59.697

您需要下载的文件称为“jquery.validate.js”。

默认情况下，验证插件使用输入字段的类进行验证。因此，如果您有电子邮件字段，请使用：

```
<input type="text" class="email" /> 
```

如果需要字段，请添加`required`到类中，例如：

```
<input type="text" class="required" /> 
```

如果它是必需的电子邮件，请将它们组合起来：

```
<input type="text" class="required email" /> 
```

它还理解 HTML5 输入类型和属性，因此您可以这样做：

```
<input type="email" required="required"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:02:14.467

您需要为验证器指定规则。您还需要单击“提交”按钮来执行验证。或者，您可能希望使用`form`Validator 对象的函数触发验证（通常不推荐）。

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
<script type="text/javascript" src="jquery.validate.js"></script>

<script type=text/javascript">
    $(document).ready(function(){
        $("#signup").validate({rules: {'company': 'required'}}).form();
    });
</script>

<form action="/registration/" method="post" id="signup">
    Company: <input type="text" name="company" />
    <input type="submit" value="Save" />
</form> 
```

# html - 不显示长菜单标题

> ID：12449097
> 
> 赞同：-1
> 
> 时间：2012-09-16T17:33:41.317
> 
> 标签：html, css

我有一个 html 和 css，但不能在 firefox 中工作，即只能在 chrome 中工作。如果容器包含菜单，则不显示长菜单（MENU_LONGGGGGGGG）。仅显示

[http://jsbin.com/isitij/1/edit](http://jsbin.com/isitij/1/edit)

请帮我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:41:33.783

添加`display: block`到`.genres li a span`.

# c - 使用 UDP 协议从服务器向多个客户端广播消息

> ID：12449098
> 
> 赞同：0
> 
> 时间：2012-09-16T17:33:44.617
> 
> 标签：c, linux, network-programming, udp, broadcasting

我在这里有两个代码，用于带有广播机制的 UDP 聊天，服务器可以同时向所有客户端广播消息

服务器代码...

```
 #include<stdio.h>
#include<string.h>
#include<sys/stat.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<arpa/inet.h>
int main(int argc, char *argv[] )
{
    struct sockaddr_in client,server;
    int s,n;
    char b1[100],b2[100];
    s=socket(AF_INET,SOCK_DGRAM,0);
    server.sin_family=AF_INET;
    server.sin_port=htons(2000);
    server.sin_addr.s_addr=inet_addr("127.0.0.1");
    bind(s,(struct sockaddr *)&server,sizeof(server));
    printf("\nServer ready,waiting for client....\n");
    n=sizeof(client);
    int sock;                         /* Socket */
    struct sockaddr_in broadcastAddr; /* Broadcast address */
    char *broadcastIP;                /* IP broadcast address */
    unsigned short broadcastPort;     /* Server port */
    char *sendString;                 /* String to broadcast */
    int broadcastPermission;          /* Socket opt to set permission to broadcast */
    unsigned int sendStringLen;       /* Length of string to broadcast */

    if (argc < 4)                     /* Test for correct number of parameters */
    {
        fprintf(stderr,"Usage:  %s <IP Address> <Port> <Send String>\n", argv[0]);
        exit(1);
    }

    broadcastIP = argv[1];            /* First arg:  broadcast IP address */ 
    broadcastPort = atoi(argv[2]);    /* Second arg:  broadcast port */
    sendString = argv[3];             /* Third arg:  string to broadcast */

    /* Create socket for sending/receiving datagrams */
    sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP);
     broadcastPermission = 1;
    while(1)
    {
        recvfrom(s,b1,sizeof(b1),0,(struct sockaddr *) &client,&n);
        if(!(strcmp(b1,"end")))
            break;
        printf("\nClient:%s",b1);
        printf("\nServer:");
        gets(b2);
        sendto(s,b2,sizeof(b2),0,(struct sockaddr *) &client,n);
     broadcastPermission = 1;
    setsockopt(sock, SOL_SOCKET, SO_BROADCAST, (void *) &broadcastPermission,sizeof(broadcastPermission));
           /* Construct local address structure */
    //memset(&broadcastAddr, 0, sizeof(broadcastAddr));   /* Zero out structure */
    broadcastAddr.sin_family = AF_INET;                 /* Internet address family */
    broadcastAddr.sin_addr.s_addr = inet_addr(broadcastIP);/* Broadcast IP address */
    broadcastAddr.sin_port = htons(broadcastPort);         /* Broadcast port */
    sendStringLen = strlen(sendString);
    for (;;) /* Run forever */
        {
         /* Broadcast sendString in datagram to clients every 3 seconds*/
         sendto(sock, sendString, sendStringLen, 0, (struct sockaddr *) &broadcastAddr, sizeof(broadcastAddr));
         //    DieWithError("sendto() sent a different number of bytes than expected");

        //sleep(3);   /* Avoids flooding the network */
     }

    }

} 
```

客户端代码...

```
#include<stdio.h>
#include<string.h>
#include<sys/stat.h>
#include<sys/types.h>
#include<sys/socket.h>
#include<netinet/in.h>
#include<arpa/inet.h>

#define MAXRECVSTRING 255
int main(int argc , char argv[])
{
    struct sockaddr_in client,server;
    int s,n;
    char b1[100],b2[100];
    s=socket(AF_INET,SOCK_DGRAM,0);
    server.sin_family=AF_INET;
    server.sin_port=htons(2000);
    server.sin_addr.s_addr=inet_addr("127.0.0.1");
    printf("\nClient ready....\n");
    n=sizeof(server);
    int sock;                         /* Socket */
    struct sockaddr_in broadcastAddr; /* Broadcast Address */
    unsigned short broadcastPort;     /* Port */
    char recvString[MAXRECVSTRING+1]; /* Buffer for received string */
    int recvStringLen;                /* Length of received string */

    if (argc != 2)    /* Test for correct number of arguments */
    {
        fprintf(stderr,"Usage: %s <Broadcast Port>\n", argv[0]);
        exit(1);
    }
     printf("\nClient ready…11111.\n");
    broadcastPort = htons(argv[1]);   /* First arg: broadcast port */
     printf("\nClient ready….1\n");
    /* Create a best-effort datagram socket using UDP */
    if(sock = socket(PF_INET, SOCK_DGRAM, IPPROTO_UDP)<0)
    printf("no sock created");  
     printf("\nClient ready….2\n");
    while(1)
    {
        printf("\nClient:");
        gets(b2);
        sendto(s,b2,sizeof(b2),0,(struct sockaddr *) &server,n);
        if(strcmp(b2,"end")==0)
            break;
        recvfrom(s,b1,sizeof(b1),0,NULL,NULL);
        printf("\nServer:%s",b1);
    broadcastAddr.sin_family = AF_INET;                 /* Internet address family */
    broadcastAddr.sin_addr.s_addr = htonl(INADDR_ANY);  /* Any incoming interface */
    broadcastAddr.sin_port = htons(broadcastPort);      /* Broadcast port */

    /* Bind to the broadcast port */
    bind(sock, (struct sockaddr *) &broadcastAddr, sizeof(broadcastAddr));

    /* Receive a single datagram from the server */
    recvStringLen = recvfrom(sock, recvString, MAXRECVSTRING, 0, NULL, 0);

    recvString[recvStringLen] = '\0';
    printf("Received: %s\n", recvString);    /* Print the received string */

    }
    close(sock);
} 
```

这些代码运行没有任何错误，但是当我从客户端向服务器发送一个字符串时，服务器无法接收该字符串，反之亦然。

如果有人可以帮助我了解为什么会这样。

我在不同终端窗口中的同一系统上同时运行服务器和客户端..因此本地主机地址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:54:25.160

Some platforms, e.g. Windows, won't receive broadcasts unless the socket is bound to INADDR_ANY, i.e. 0.0.0.0.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:39:01.660

首先：

```
server.sin_port=2000; 
```

你忘记了这个网络顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-05T07:57:34.007

在您的服务器代码中：套接字未绑定到任何 IP 地址。虽然它广播消息并且客户端接收；反之亦然。因此，将您的服务器和客户端套接字绑定到 2 个不同的 IP 地址。当服务器广播消息时，在 sendto 函数中使用适当的广播地址（参见服务器-客户端 IP 的子网）。

# php - 用于 PHP 会话存储的最佳 MySQL 存储引擎

> ID：12449099
> 
> 赞同：6
> 
> 时间：2012-09-16T17:33:51.093
> 
> 标签：php, mysql, session, storage-engines

我想使用 MySQL 来存储会话变量。据我了解，这意味着在每个页面请求上都会对表进行一次读取和一次写入。

哪种 MySQL 存储引擎最适合这项任务？MyISAM、InnoDB、MariaDB（我在 PHPMyAdmin 中看不到）、内存或其他完全？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T17:46:52.717

“最好”没有任何意义。你需要表达你的约束：你需要一致性吗？耐用性？高可用性？表现？所有这些属性的组合？你能负担得起放松你的会话吗？它们能适应记忆吗？您是否需要支持对相同数据的并发访问？

如果没有更多上下文，我会选择最平衡的存储引擎 InnoDB。它为 OLTP 应用程序、ACID 事务、良好的可靠性和明智的并发管理提供了正确的性能。会话变量访问可能会使用主键来完成，并且此操作对于 InnoDB 非常有效。

现在，如果性能真的是一个限制，我宁愿使用 NoSQL 引擎（即不是 MySQL）。在存储会话数据方面，[Redis](http://redis.io/)通常做得很好，并且很容易集成和部署。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:38:57.920

内存存储引擎听起来是最好的选择。请记住，这对于临时会话很有用。

[http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:59:55.113

这取决于您如何评估“更好”：

MyISAM 是最常见的（很多共享主机包只让你使用 MyISAM）。加上它在关系控制方面相当有限，所以你设置它非常快速和容易。如果您想要跨多个托管场景的可移植性和快速实施，MYISAM 是最好的。

InnoDB 允许您通过链接不同表中的键来创建关系并保存数据完整性，这意味着更多的工作，但更专业的数据库设计。许多共享主机包没有实现 InnoDB，因此在将表结构从一个环境导出到另一个环境时，您可能需要做一些额外的工作。如果你想要关系管理和控制，INNODB 是最好的。

就数据可移植性而言，MyISAM 将完全接受 InnoDB 数据库（因为 MyISAM 不检查数据完整性：“例如，当我在 user_car 中插入新记录时，用户数据库中是否有 4 号用户”） . 如果您从 MyISAM 开始，导出到成熟的 InnoDB 数据库将是一场噩梦，即使您的数据具有所有键，表数据也必须以正确的顺序导入（用户和汽车，在 user_car 之前）。

玛丽亚数据库？永远不会，仅仅是因为使用它的人少，因此与 MyISAM 和 InnoDB 相比，您将获得更少的支持。

底线关键：INNODB。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T18:19:31.490

如果您不希望 SQL 连接的开销考虑使用 MemCached 会话存储。见[http://php.net/manual/en/memcached.sessions.php](http://php.net/manual/en/memcached.sessions.php)

# f# - 懒惰..但 F# 中的急切数据加载器

> ID：12449100
> 
> 赞同：4
> 
> 时间：2012-09-16T17:33:54.390
> 
> 标签：f#, lazy-loading, eager-loading, agent, mailboxprocessor

有谁知道关于以下主题的“现有技术”：

*   我的数据需要一些不错的时间才能加载。它们是各种股票的历史水平。
*   我想以某种方式预加载它们，以避免使用我的应用程序时的延迟
*   但是，在开始时将它们预加载到一个块中会使我的应用程序首先无响应，这对用户不友好

所以我*不想*加载我的数据....*除非*用户没有请求任何数据并使用他已经拥有的东西，在这种情况下我想一点一点地得到。所以它既不是“懒惰”也不是“渴望”，更多的是“当你需要时懒惰”和“当你可以时渴望”，因此是首字母缩写词 LWYNEWYC。

我做了以下似乎可行的方法，但我只是想知道是否有一种公认的和有福的方法来处理这种事情？

```
let r = LoggingFakeRepo () :> IQuoteRepository
r.getHisto "1" |> ignore  //prints Getting histo for 1 when called

let rc =  RepoCached (r) :> IQuoteRepository
rc.getHisto "1" |> ignore //prints Getting histo for 1 the first time only

let rcc =  RepoCachedEager (r) :> IQuoteRepository
rcc.getHisto "100" |> ignore  //prints Getting histo 1..100 by itself BUT
                              //prints Getting histo 100 immediately when called 
```

和类

```
type IQuoteRepository = 
   abstract getUnderlyings : string seq
   abstract getHisto :  string -> string

type LoggingFakeRepo () =
   interface IQuoteRepository with 
      member x.getUnderlyings = printfn "getting underlyings"
                                [1 .. 100] |> List.map string :> _

      member x.getHisto udl = printfn "getting histo for %A" udl
                              "I am a historical dataset in a disguised party"

type RepoCached (rep : IQuoteRepository) =
   let memoize f =
     let cache = new System.Collections.Generic.Dictionary<_, _>()
     fun x ->
        if cache.ContainsKey(x) then cache.[x]
        else let res = f x
             cache.[x] <- res
             res
   let udls = lazy (rep.getUnderlyings )
   let gethistom = memoize rep.getHisto

   interface IQuoteRepository with 
      member x.getUnderlyings = udls.Force()
      member x.getHisto udl = gethistom udl

type Message = string * AsyncReplyChannel<UnderlyingWrap>
type RepoCachedEager (rep : IQuoteRepository) =
   let udls = rep.getUnderlyings

   let agent = MailboxProcessor<Message>.Start(fun inbox ->
      let repocached = RepoCached (rep) :> IQuoteRepository
      let rec loop l =
         async {  try
                     let timeout = if l|> List.isEmpty  then -1 else 50
                     let! (udl, replyChannel) = inbox.Receive(timeout)
                     replyChannel.Reply(repocached.getHisto udl)
                     do! loop l
                  with 
                  | :? System.TimeoutException -> 
                     let udl::xs = l
                     repocached.getHisto udl |> ignore
                     do! loop xs
          }
      loop (udls |> Seq.toList))

   interface IQuoteRepository with 
      member x.getUnderlyings = udls
      member x.getHisto udl = agent.PostAndReply(fun reply -> udl, reply) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T19:03:42.650

我喜欢你的解决方案。我认为使用代理来实现一些带有超时的后台加载是一个很好的方法——代理可以很好地封装可变状态，所以它显然是安全的，你可以很容易地编码你想要的行为。

我认为[异步序列](http://tomasp.net/blog/async-sequences.aspx)可能是另一个有用的抽象（如果我是正确的，它们现在在 FSharpX 中可用）。异步序列表示异步生成更多值的计算，因此它们可能是将数据加载器与其余代码分开的好方法。

我认为您在某些时候仍然需要一个代理来同步，但是您可以使用异步序列很好地分离不同的关注点。

加载数据的代码可能如下所示：

```
let loadStockPrices repo = asyncSeq {
  // TODO: Not sure how you detect that the repository has no more data...
  while true do
    // Get next item from the repository, preferably asynchronously!
    let! data = repo.AsyncGetNextHistoricalValue()
    // Return the value to the caller...
    yield data } 
```

此代码表示数据加载器，并将其与使用它的代码分开。通过使用数据源的代理，您可以使用`AsyncSeq.iterAsync`这些值并对其进行处理。

使用`iterAsync`，您指定为使用者的函数是*异步*的。它可能会阻塞（即使用`Sleep`），当它阻塞时，源——即你的加载器——也被阻塞。这是从使用数据的代码中控制加载器的非常好的隐式方法。

一个尚未在库中的特性（但会很有用）是一个部分急切的评估器，它接受`AsyncSeq<'T>`并返回一个新的`AsyncSeq<'T>`但尽快从源获取一定数量的元素并缓存它们（这样消费者就不会当它要求一个值时必须等待，只要源可以足够快地产生值）。

# java - 在 factoryBean 返回实例之前如何处理 bean？

> ID：12449102
> 
> 赞同：0
> 
> 时间：2012-09-16T17:34:08.317
> 
> 标签：java, spring, junit, mockito, springmockito

我发现在调用 factoryBean.getObject() 之前对 bean 进行后处理是不可能的。'resultingBean' 是一些在开始时初始化的 bean 的依赖项，因此它首先被实例化。请参阅在“MyFactoryBean”中构造“resultingBean”之前，我需要“myBeanPostProcessor”来处理“myBean”。lazy-init 和 depends-on 都没有帮助。无论如何，总是首先调用“MyFactoryBean.getObject()”。

```
<bean id="myBean" class="example.MyBean" />

<bean id="myBeanPostProcessor" class="example.MyBeanPostProcessor" />

<bean id="resultingBean" class="example.MyFactoryBean" depends-on="myBean"/> 
```

知道如何处理吗？我故意选择 BeanPostProcessor 是因为此要求应处理在 junit @Before 方法之前设置 mocito 模拟...问题是在 @Before 方法中设置这些模拟为时已晚，因为您需要在上下文时使用它们初始化。

没有很多方法可以做到这一点，包括 ExecutionListeners、ContextLoaders、BeanFactoryPostprocessor、Runner 等等。

我正在使用[springockito](https://bitbucket.org/kubek2k/springockito/wiki/Home)来模拟我的豆子。

这是完美的弹簧测试框架的一个小缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T02:01:33.613

我真的不同意使用这样的模拟（即用于集成测试），但我理解你的问题。

您需要使用在 InitializingBean 和 BeanPostProcessor 之前调用的 ApplicationContextAware 接口。

但是总是会首先调用您的工厂，因此请考虑使用不同的选项，例如新的 java 配置或重构风格（因为您可能具有排序循环依赖项）

除了我需要更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:53:01.660

不确定我是否很好地理解了您的问题，但您不能简单地创建另一个上下文文件 - 比如说`test-override-context.xml`并在那里重新定义 bean，最后一个同名的 bean 是在上下文中生效的。

在您的`test-override-context.xml`文件中：

```
<import resource="my-base-resource.xml"/>
<bean id="myBean" class="MyMockedBean"> 
```

# jsf-2 - JSF2：标签库支持命名空间：http://java.sun.com/jsf/composite/components/customer，但没有为名称定义标签：list

> ID：12449103
> 
> 赞同：1
> 
> 时间：2012-09-16T17:34:11.293
> 
> 标签：jsf-2, mojarra

我为客户列表创建了一个复合组件。我可以在视图中使用这个组件：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:customer="http://java.sun.com/jsf/composite/components/customer">

<ui:composition template="/WEB-INF/templates/template.xhtml">

  <ui:define name="caption">
    <h:outputText value="#{msg.customerListHeading}" />
  </ui:define>

  <ui:define name="content">

    <ui:decorate template="/WEB-INF/templates/sidebox.xhtml">
      <ui:param name="title" value="#{msg.customerListHeading}" />

      <p:outputPanel>
        <h:form id="customerList">

          <customer:list list="#{customerControllerBean.list}">
            <f:facet name="headerButton">
              <h:button outcome="customerdetail.jsf"
                value="#{msg.newButtonLabel}" />
            </f:facet>
            <f:facet name="rowButton">
              <h:commandButton value="#{msg.deleteButtonLabel}"
                action="#{customerControllerBean.delete(customer)}" />
              <h:button outcome="customerdetail.jsf?id=#{customer.id}"
                value="#{msg.editButtonLabel}" />
            </f:facet>
          </customer:list>

        </h:form>
      </p:outputPanel>
    </ui:decorate>

  </ui:define>

</ui:composition>

</html> 
```

但是当我在非常相似的视图中使用该组件时，我收到以下错误：

```
<customer:list> Tag Library supports namespace: http://java.sun.com/jsf/composite/components/customer, but no tag was defined for name: list 
```

有问题的视图如下所示：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:customer="http://java.sun.com/jsf/composite/components/customer">

<ui:composition template="/WEB-INF/templates/template.xhtml">

  <ui:define name="caption">
    <h:outputText value="#{msg.customerListHeading}" />
  </ui:define>

  <ui:define name="content">

    <ui:decorate template="/WEB-INF/templates/sidebox.xhtml">
      <ui:param name="title" value="#{msg.customerListHeading}" />

      <p:outputPanel>
        <h:form id="customerList">

          <customer:list list="#{customerControllerBean.list}">
            <f:facet name="rowButton">
              <h:commandButton value="#{msg.applyButtonLabel}"
                action="#{orderControllerBean.setCustomer(customer)}" />
            </f:facet>
          </customer:list>

        </h:form>
      </p:outputPanel>
    </ui:decorate>

  </ui:define>

</ui:composition>

</html> 
```

正如您所看到的，这两个视图的不同之处仅在于我用来向客户列表表添加按钮的方面，因为我在两个不同的上下文中使用该列表。但是为什么第二种观点不起作用呢？

我发现 Mojarra 存在/曾经存在问题，但我使用所谓的稳定版本来解决这个问题：

```
2012-09-16 19:09:41,512 INFO     [javax.enterprise.resource.webcontainer.jsf.config] (MSC service thread 1-4) Mojarra 2.1.7-jbossorg-1 (20120227-1401) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T18:58:39.907

我在 Mojarra Jira 上找到了解决此问题的方法：http: [//java.net/jira/browse/JAVASERVERFACES-2437](http://java.net/jira/browse/JAVASERVERFACES-2437)

我将其放置`xmlns:customer="http://java.sun.com/jsf/composite/components/customer"`在`ui:composition`标签中，并且成功呈现了视图：

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
  xmlns:customer="http://java.sun.com/jsf/composite/components/customer">

<ui:composition template="/WEB-INF/templates/template.xhtml" xmlns:customer="http://java.sun.com/jsf/composite/components/customer">

  <ui:define name="caption">
    <h:outputText value="#{msg.customerListHeading}" />
  </ui:define>

  <ui:define name="content"> 
```

...

根据那个 Jira，问题在 Mojarra 2.1.10 中得到修复，所以我希望 JBoss 尽快更新 AS 7.1... :)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-02T12:13:25.320

eclipse查看不正确的文件夹路径（组件）

从构建路径中删除 src/main/resource -- 构建路径==> 从构建路径中删除。
并在构建路径中再次添加

# php - 安全模式下的PHP后台进程

> ID：12449104
> 
> 赞同：0
> 
> 时间：2012-09-16T17:34:15.150
> 
> 标签：php, background-process, safe-mode

在我的 php 项目中，我应该有一些后台进程，但在安全模式下，因为我在共享主机上运行它。

例如，我的后台进程代码在文件*bg.php*中，我希望它被执行，在另一个特定脚本的完成时编写。（或者可能有一些延迟）
我搜索了很多。一些建议的库，如**beanstalkd**，但我认为这个库对于我简单的后台进程来说很重，而且也没有**PHP**的好文档。其他一些人说像**exec()**这样的功能在安全模式下是不可能的。

*   1-有没有人有这个问题的简单解决方案？
*   *2- cpanel 中存在的cron 作业*也提到了我，这些作业准备在特定时间执行的任务。我可以使用此选项以某种方式解决我的问题吗？

我注意到我想要一个简单而轻量级的解决方案。任何建议都深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:46:42.577

不可能使用由 HTTP 服务器提供的 PHP 文件，因为所有进程都会在请求结束后终止。

因此，cPanel cron 是一个不错的选择，您无需始终启用 cron 条目，只需设置该条目并在脚本开始运行后将其禁用。

只有您需要`&`在 cron 命令末尾添加才能使其作为后台运行。

# python - 初始化 __init__ 之外的字段

> ID：12449107
> 
> 赞同：3
> 
> 时间：2012-09-16T17:34:38.847
> 
> 标签：python, initialization, python-2.7

我需要一些帮助来理解 python 初始化是如何工作的。我有一个类（Bar）和另一个类（Foo）作为字段/变量。当我尝试直接在 Bar 中（而不是在类 __init__ 中）初始化这个变量时，Bar 的所有实例都将指向同一个 Foo。但是如果我有一个 __init__ 方法，就像在 Bar2 中一样，每个 Bar2 实例都会有一个唯一的 Foo 实例。这里发生了什么？

```
class Foo():
    number = 0

class Bar():
    foo = Foo()

class Bar2():
    foo = None

    def __init__(self):
        self.foo = Foo()

first = Bar()
second = Bar()

print "Bar"
print first
print second
print first.foo
print second.foo

first = Bar2()
second = Bar2()

print "\nBar2"
print first
print second
print first.foo
print second.foo 
```

例如，输出将是：

```
Bar
<\__main__.Bar instance at 0x025B2AF8>
<\__main__.Bar instance at 0x025B2B20>
<\__main__.Foo instance at 0x004A3AA8>
<\__main__.Foo instance at 0x004A3AA8>

Bar2
<\__main__.Bar2 instance at 0x025B2B48>
<\__main__.Bar2 instance at 0x025B2AF8>
<\__main__.Foo instance at 0x025B2B70>
<\__main__.Foo instance at 0x025B2B98> 
```

使用 Bar 两个实例将引用同一个 Foo 实例。为什么？

**编辑：**更正了两次为*Bar*打印*first.foo*的错误。产生的行为仍然如输出中所示。

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:46:52.210

Python 是一种动态语言。在像 Java 这样的静态语言中，编译器读取代码，找到类定义，判断它们是否正确并相应地生成一些代码。在 python 中，一个类定义（或一个函数定义）只是一个声明，就像对一个变量的赋值一样。语法只是有点不同。

定义类时，解释器运行类定义，即运行类行之后的所有代码。如果它找到函数定义，它也会运行它们，即定义函数并将它们绑定到函数名称。由于类和函数定义与任何其他赋值一样是语句，因此您也可以在许多地方使用它们。例如如下：

```
def foo():
  class A: pass
  a = A()
  a.msg = "Hello"
  return a 
```

因为 python 是鸭子类型的（如果它像鸭子一样嘎嘎叫，看起来像一只，那就是一只），函数 foo 的用户甚至不必知道类被称为什么，他们只需要知道 foo 返回一个对象与会员味精。你会像这样使用它：

```
a = foo()
print a.msg 
```

因此，在您的示例中，执行 Bar 的定义时，将运行 classes 语句，包括创建 Foo 对象。当 Bar2 的定义被执行时，类语句在其中运行一个名为**init**的函数的定义。Python 使用 this 作为要调用的函数的名称，当一个对象被创建时（在调用另一个函数之后`__new__`，但这不是重点）。

同样，类定义（类内部的代码，Bar 创建 Foo 对象的代码）只在引入类时运行一次。`__init__`每次创建新对象时都会一次又一次地调用，因此在 Bar2 中，Foo 的创建也会一次又一次地完成。

据我所知，“foo = None”是多余的，它并不是真正需要的。在 python 中，您可以从任何地方添加实例变量，甚至可以从类外部添加，当然也可以从内部添加`__init__`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:36:27.417

`Bar.foo`是一个类变量。它在创建类时初始化一次。

（请注意，您的代码也打印`first.foo`两次，所以难怪输出是相同的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T17:39:49.103

类也是对象，它们有自己的一组变量。不仅如此，当 Python 在对象中找不到变量时，它会在类中查找是否可以在其中找到它，这就是它使用的方法。由于该类在该类的所有对象之间共享，因此该类中的变量也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:39:10.517

```
first = Bar()
second = Bar()

print "Bar"
print first
print second
print first.foo
print first.foo 
```

在这里，您打印 first.foo 两次，这就是打印相同 foo 对象的原因。

```
first = Bar2()
second = Bar2()

print "\nBar2"
print first
print second
print first.foo
print second.foo 
```

这里， foo 是类 Bar2 中的一个静态变量，这就是为什么两个对象都指向同一个 foo 对象，用 second 的构造来构造。

```
class Bar2():
 foo = None

 def __init__(self):
     self.foo = Foo()

class Bar():
 def __init__(self):
   self.foo = Foo() 
```

在 Bar2 中，Bar2 的所有对象都会有 foo 对象指向在 Bar2 的最后一个构造对象的构造中构造的同一个对象。

在 Bar 中，除非另有说明，否则所有 foo 对象对于 Bar 的每个对象都是唯一的。*

# amazon-ec2 - 在 Ubuntu 12.04 上安装 Yaws 服务器（使用云服务）

> ID：12449114
> 
> 赞同：1
> 
> 时间：2012-09-16T17:35:29.913
> 
> 标签：amazon-ec2, erlang, yaws

我正在尝试让 Yaws Web 服务器在云服务（亚马逊 AWS）上运行。我已经在服务器上编译并安装了一个本地副本。我的问题是在端口 8000 或端口 80 上运行时，我无法让 Yaws 运行。

我在 yaws.conf 中有以下配置：

> ```
>  port = 8000
>    listen = 0.0.0.0
>    docroot = /home/ubuntu/yaws/www/test
>    dir_listings = true 
> ```

这会产生以下成功的启动/结果：

> Eshell V5.8.5（使用 ^G 中止）
> 
> =INFO REPORT==== 16-Sep-2012::17:21:06 === Yaws：使用配置文件 /home/ubuntu/yaws.conf
> 
> =信息报告==== 16-Sep-2012::17:21:06 === Ctlfile : /home/ubuntu/.yaws/yaws/default/CTL
> 
> =INFO REPORT==== 16-Sep-2012::17:21:06 === Yaws：收听 <3> 虚拟服务器的 0.0.0.0:8000：- http://domU-12-31-39 -0B-1A-F6:8000 下 /home/ubuntu/yaws/www/trial -
> 
> =INFO REPORT==== 16-Sep-2012::17:21:06 === Yaws：收听 <1> 虚拟服务器的 0.0.0.0:4443：-

当我尝试访问 url (http://ec2-72-44-47-235.compute-1.amazonaws.com) 时，它永远不会连接。我尝试使用 paping 检查端口 80 或 8000 是否打开（http://code.google.com/p/paping/）并且我收到“无法解析主机”错误，所以显然不是在职的。

我还尝试将 yaws.conf 设置为端口 80，如下所示：

> ```
>  port = 8000
>    listen = 0.0.0.0
>    docroot = /home/ubuntu/yaws/www/test
>    dir_listings = true 
> ```

我收到以下错误：

> =错误报告==== 2012 年 9 月 16 日::17:24:47 === Yaws: 无法收听 0.0.0.0:80 : {error,eacces}
> 
> =错误报告==== 2012 年 9 月 16 日::17:24:47 === 无法监听套接字：{error,eacces} =错误报告==== 2012 年 9 月 16 日::17： 24:47 === Top proc 死亡，终止 gserv =ERROR REPORT==== 16-Sep-2012::17:24:47 === Top proc 死亡，终止 gserv =INFO REPORT==== 16-Sep -2012::17:24:47 === application: yaws exited: {shutdown,{yaws_app,start,[normal,[]]}} 类型：永久 {"Kernel pid terminate",application_controller," {application_start_failure,yaws ,>>>>>>{关机,>{yaws_app,start,[正常,[]]}}}"}

我还使用 iptables 打开了 80 端口。运行 sudo iptables -L 给出以下输出：

> Chain INPUT (policy ACCEPT) target prot opt source destination
> ACCEPT tcp -- ip-192-168-2-0.ec2.internal ip-192-168-2-16.ec2.internal tcp dpt:http ACCEPT tcp -- 0.0 .0.0 任何地方 tcp dpt:http 接受所有 -- 任何地方 ctstate RELATED,ESTABLISHED 接受 tcp -- 任何地方 tcp dpt:http 接受 tcp -- 任何地方 tcp dpt:http
> 
> Chain FORWARD (policy ACCEPT) target prot opt source destination
> 
> Chain OUTPUT (policy ACCEPT) target prot opt source destination

谢谢你的耐心

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T21:14:05.723

实际上，我通过这个论坛帖子 (http://www.trapexit.org/forum/viewtopic.php?p=42923) 找到了为什么我无法让它工作的答案。

它指出：

```
2a. I run yaws on 8080 and have nginx reverse proxying 
from http://mydomain:80 to 8080\. Yaws won't run as a 
low-privilege user if you want it to listen on port 
80.

2b. nginx.conf needs the following directives: 
server { 
listen 80; 
server_name yourdomain.com; 
access_log /path/to/access/log.log 
location / { 
proxy_pass http://127.0.0.1:8080; 
proxy_redirect default; 
} 
} 
```

基本上，我安装了 nginx，并将其配置为作为代理服务器运行。

为了让 Chicago Boss 框架运行，我使用了相同的解决方案，唯一的区别是我将 nginx proxy_pass 设置为 >http://127.0.0:8001，因为 Chicago Boss 默认在 8001 上运行。如果有人使用 nginx 作为代理服务器，任何人都知道这如何影响 erlang 服务器的并发优势，或者它没有任何影响？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:37:54.460

您粘贴的错误报告之一显示了您无法在端口 80 上启动服务器的原因：*权限*({error, eaccess})。

```
=ERROR REPORT==== 16-Sep-2012::17:24:47
=== Yaws: Failed to listen 0.0.0.0:80 : {error,eacces} 
```

关于在端口 8000 上启动，您是否尝试通过 SSH 连接到机器并在本地连接到服务器（例如通过 telnet）？如果这可行，那么您的问题一定与其他人建议的那样，与未打开端口 8000 的 Ubuntu 防火墙或您的 EC2 实例的安全组不包含允许该端口上的入站流量的路由有关。

也就是说，这个问题可能应该转移到[ServerFault](https://serverfault.com/)或[AskUbuntu](https://askubuntu.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T07:47:53.330

有两件事要寻找：

*   检查您的实例的安全组设置，并确保端口 80 或 8000 已打开（可从 访问`0.0.0.0/32`）。
*   尝试将您的服务器绑定到机器的内部 IP 地址。有些服务器需要监听这个接口而不是`0.0.0.0.`你可以在控制台或使用`ifconfig`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-27T16:37:36.130

值得注意的是交互式命令行需要root权限：

```
sudo su
yaws -i --id whatever 
```

如果 yaws 守护程序同时运行，您还必须指定一个 ID。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-17T12:56:37.383

[http://hyber.org/privbind.yaws](http://hyber.org/privbind.yaws)

**绑定到特权端口**

在 UN*X 操作系统上发现的一个常见错误功能是只有 root 可以绑定到低于 1024 的端口的限制。很多钱都浪费在了变通方法上，而且 - 通常 - 结果是安全漏洞。

```
$ setcap 'cap_net_bind_service=+ep' /usr/lib/erlang/erts-5.7.4/bin/beam 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-16T20:07:21.833

@Bernard 是正确的，EC2 实例有防火墙保护它。您需要为实例修改[EC2 安全组](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/using-network-security.html)（您可以在管理控制台 Web 界面的左侧找到它）以允许入站 TCP 流量到您要使用的端口。对于端口 80，您可以`HTTP`从组合框中进行选择。对于端口 8080，选择`Custom TCP Rule`并输入端口号。

# javascript - Backbone.Marionette：将视图关闭推迟到 beforeClose 动画完成

> ID：12449116
> 
> 赞同：11
> 
> 时间：2012-09-16T17:35:50.093
> 
> 标签：javascript, jquery, backbone.js, marionette

我正在尝试使用 Backbone.Marionette 设置渲染和关闭 ItemView 的动画。对于渲染视图，这相当简单：

```
MyItemView = Backbone.Marionette.View.extend({
   ...
   onRender: function() {
     this.$el.hide().fadeIn();
   }
   ...
}); 
```

当我渲染它时，这将使我的视图淡入淡出。但是，假设我想在关闭时淡出我的视图。

```
beforeClose: function() {
   this.$el.fadeOut();       // doesn't do anything....
} 
```

这不起作用，因为项目在调用后立即关闭`this.beforeClose()`，所以动画没有时间完成。

**有什么方法可以使用 Marionette 来完成结束动画？**

* * *

或者，这是我一直在使用的解决方法：

```
_.extend(Backbone.Marionette.ItemView.prototype, {
    close: function(callback) {

        if (this.beforeClose) {

            // if beforeClose returns false, wait for beforeClose to resolve before closing
            // Before close calls `run` parameter to continue with closing element
            var dfd = $.Deferred(), run = dfd.resolve, self = this;
            if(this.beforeClose(run) === false) {
                dfd.done(function() {
                    self._closeView();              // call _closeView, making sure our context is still `this`
                });
                return true;
            }
        }

        // Run close immediately if beforeClose does not return false
        this._closeView();
    },

// The standard ItemView.close method.
    _closeView: function() {
        this.remove();

        if (this.onClose) { this.onClose(); }
        this.trigger('close');
        this.unbindAll();
        this.unbind();      
    }
}); 
```

现在我可以这样做了：

```
beforeClose: function(run) {
    this.$el.fadeOut(run);      // continue closing view after fadeOut is complete
    return false;
}, 
```

我是使用 Marionette 的新手，所以我不确定这是否是最佳解决方案。如果这是最好的方法，我会提交一个拉取请求，不过我会想更多地思考这如何与其他类型的视图一起使用。

这可能会用于其他目的，例如在关闭时要求确认（请参阅此[问题](https://github.com/marionettejs/backbone.marionette/issues/186)），或运行任何类型的异步请求。

想法？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-16T19:18:02.820

覆盖该`close`方法是执行此操作的一种方法，但您可以将其写得更短一些，因为您可以调用 Marionettes`close`方法而不是复制它：

```
_.extend(Backbone.Marionette.ItemView.prototype, {
    close: function(callback) {
        var close = Backbone.Marionette.Region.prototype.close;
        if (this.beforeClose) {

            // if beforeClose returns false, wait for beforeClose to resolve before closing
            // Before close calls `run` parameter to continue with closing element
            var dfd = $.Deferred(), run = dfd.resolve, self = this;
            if(this.beforeClose(run) === false) {
                dfd.done(function() {
                    close.call(self);
                });
                return true;
            }
        }

        // Run close immediately if beforeClose does not return false
        close.call(this);
    },

}); 
```

另一个想法是覆盖`remove`视图的方法。所以你淡出视图的元素，然后从 DOM 中删除它

```
remove: function(){
  this.$el.fadeOut(function(){
    $(this).remove();
  }); 
} 
```

# ruby-on-rails - 群组成员资格需要群组管理员的确认

> ID：12449118
> 
> 赞同：1
> 
> 时间：2012-09-16T17:35:55.677
> 
> 标签：ruby-on-rails

我有一个组模型和一个用户模型。这是一个 m 对 n 的关系。组和用户模型通过单独的成员模型连接。

属于某个组的某些用户子集是管理员。当新用户尝试通过创建新成员资格来加入群组时，我希望在新用户实际参与群组之前，由其中一位群组管理员确认此操作。

实现这一目标的最佳方法是什么？我目前的想法是有一个单独的模型，称为权限或邀请，只有组管理员可以创建。当用户同时是成员资格和邀请的一部分时，他们才是组的成员。这似乎是一个相当普通的任务的很多模型。如果这实际上是最好的方法，那么一些关于如何去做的建议将不胜感激。

我不想使用电子邮件进行确认。

我正在使用 Rails 3.1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:44:07.903

为什么不在连接模型本身中包含确认状态？因此，让我们假设您有一个 User、一个 Group 模型，并且它们由 Membership 模型连接。将格式为 DateTime 的属性“accepted_on”添加到 Membership 模型（或者如果您不关心它们何时被接受，则只是一个布尔值。）然后创建一个视图，列出仅对管理员可见的所有成员资格，并带有一个链接只有他们可以访问将“accepted_on”属性设置为`Time.current`.

在您的用户/组模型中，您可以执行以下操作：

```
class User < ActiveRecord::Base
  has_many :memberships, :conditions => 'accepted_on IS NOT NULL'
  has_many :groups, :through => :memberships
end

class Group < ActiveRecord::Base
  has_many :memberships, :conditions => 'accepted_on IS NOT NULL'
  has_many :users, :through => :memberships
end

class Membership < ActiveRecord::Base
  belongs_to :user
  belongs_to :group
end 
```

这样，当一个新用户添加一个成员时，它在管理员接受他之前不会变为可用（也就是说，将 accept_on 设置为 nil 以外的任何内容。）

# css - Safari中不同iOS之间的CSS渲染

> ID：12449120
> 
> 赞同：1
> 
> 时间：2012-09-16T17:36:17.563
> 
> 标签：css, ios, safari

我注意到 iOS 5.x 和 iOS 4.x 之间的 CSS 渲染存在差异。 

我猜这两者有不同的 Safari 版本。 

如何在我的桌面 Safari 上测试这两个版本？我需要使用两个不同版本的 Safari 浏览器吗？（在 Windows 上）

# c - c 指向结构的自由指针

> ID：12449121
> 
> 赞同：4
> 
> 时间：2012-09-16T17:36:22.310
> 
> 标签：c, pointers, structure, free, ansi

我正在用普通的 C 语言编写，我有一个关于如何释放指向结构的指针的问题。我有一个以下列方式声明的结构

```
typedef struct _RealMatrix {
    uint nRows;
    uint nCols;
    real **matrix;
} RealMatrix; 
```

现在，每次我需要它时，我都会使用以下代码来分配它

```
RealMatrix *realMatrixAlloc(uint n, uint m) {
    loop_var(i);
    RealMatrix *matrix;

    matrix = malloc(sizeof(RealMatrix));
    errcheck(matrix, "Unable to create real matrix structure.");

    matrix->nRows = n;
    matrix->nCols = m;
    matrix->matrix = malloc(n*sizeof(real *));
    matrix->matrix[0] = malloc(n*m*sizeof(real));
    errcheck(matrix->matrix && matrix->matrix[0], "Unable to get requested memory for real matrix of dimensions: (%u, %u).", n, m);

    f_i(i < n) matrix->matrix[i] = matrix->matrix[0] + i*m;

    return matrix;
} 
```

其中 errcheck() 是分配检查宏。一切正常，直到我尝试释放它调用

```
freeRealMatrix(&myRealMatrix); 
```

这将

```
free((*ma)->matrix[0]),
free((*ma)->matrix)
free(*ma).
*ma = NULL; 
```

进行适当的检查以避免跟随任何 NULL 指针。这里的“ma”是指向结构的指针：函数声明读取

```
void freeRealMatrix(RealMatrix **ma); 
```

但是，当此函数返回时，我发现“myRealMatrix”仍在寻址现有结构，该结构没有像我预期的那样被 free(*ma) 释放。另一方面，数组 (*ma)->matrix 已成功释放。

关于我做错了什么的任何想法？这让我发疯......提前致谢！

更新：

我复制了代码并在一个全新的程序中执行......它按预期工作。我注意到“myRealMatrix”中包含的地址与 *ma 指向的地址不同。嗯......有点：它似乎被截断了！而不是 0x106a50，它只是 0x106a，仅此而已。每次都缺少最后两个十六进制数字！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:44:15.873

释放后，您的指针继续包含释放位置的地址。但是，您不能继续寻址此位置。它可以用于其他用途。

您可能希望在第三个 free 语句之后将其显式设置为 NULL：

```
*ma = NULL; 
```

# sql - Asp.net MVC + 成员资格 + 代码优先 + 现有数据库

> ID：12449126
> 
> 赞同：2
> 
> 时间：2012-09-16T17:36:41.730
> 
> 标签：sql, asp.net-mvc, entity-framework, asp.net-membership

经过大量的研究和尝试，我失败了，情况如下：

技术

*   ASP.NET MVC4
*   实体框架代码优先
*   SQL Server 2008

我使用 Code First 来创建我的域类，例如：

```
public class Country{
   public int IdCountry {get;set;}
   public int NameCountry {get;set;}
}
public class Sex{
   public int IdSex {get;set;}
   public int NameSex{get;set;}
} 
```

等等...我有 20 节课

我想要的是：

使用 Asp.Net Membership 系统，并将其插入我的课程。我有一个名为 UserProfile 的域类

```
public class UserProfile{
   public int IdUserProfile {get;set;}
   public virtual Sex sex {get;set;}
   public virtual Country country {get;set;}
   public virtual ICollection<Photos> photos {get;set;}
   etc...
} 
```

我希望能够将所有这些与通过 Asp.Net Membership 和 AccountController 注册的 Asp.Net 用户连接起来

我在stackoverflow、codeplex等中搜索。我没有找到解决方案，或者我可能不明白。

我希望有人在现实世界的应用中实现了这一点:)

ps：我正在开发一个“约会”网站

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T18:32:24.590

MVC 4 中的 AccountController 已经依赖 SimepleMembership 和其他 WebMatrix 位来支持 OAuth 和本地帐户的成员资格。

我的建议是首先删除在您的 MVC 4 项目的 AccountModel.cs 中定义的 DbContext 派生类，然后将其替换为您自己的（编译器错误将告诉您删除该类后必须更改的内容）。

我还将从项目中删除 SimpleMembershipInitializerAttribute 并确保在 Application_Start 期间执行初始化任务。过滤器有一些细微的缺陷。当我有机会发布有关此内容时，我将使用 URL 进行更新。

# c# - DDD - 服务层和存储库之间的重复

> ID：12449131
> 
> 赞同：8
> 
> 时间：2012-09-16T17:37:12.237
> 
> 标签：c#, domain-driven-design, ddd-repositories, ooad

我曾开发过几个尝试遵守 DDD 原则的应用程序，我注意到我们最终会遇到服务层和存储库之间存在重复的情况，感觉就像代码异味。

对于服务层中的大多数操作，它似乎是直接映射到 CRUD 操作、GetAll、GetById、Create、Delete 等。架构的流程在以下几行中：我有一个**控制器**调用**服务层**调用一个**存储库**，该存储库调用一个与**后端**对话的**ORM** ..

 **因此，例如**GetAll**将同时存在于 SL 和存储库中。现在，如果我们有一个更改/业务要求 GetAll 应该忽略某些项目，我应该怎么做，我应该在存储库中忽略这些，还是应该进入服务层的业务逻辑？如果我们只是有一个直接调用 ORM 的服务层，生活会不会更轻松？

总结一下：我知道服务层可以抽象一些业务逻辑，但是当 - 在大多数情况下 - 它正在处理简单的 CRUD 操作时，摆脱存储库不是更容易吗？但是，如果 SL*还*包含一些具有复杂业务逻辑的方法，这些方法是否应该通过存储库？从良好的设计角度来看，我应该支持一致性并始终通过存储库还是保持简单并且仅在存储库不是简单的一对一映射到 CRUD 操作时才使用它。

PS：我意识到似乎有类似的问题，但没有找到任何令人满意的答案

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T08:47:41.227

> 我注意到我们最终会遇到服务层和存储库之间存在重复的情况，这感觉就像代码异味。

**这不是代码气味，因为它们做不同的事情。**

您应该记住，域或应用程序服务驻留在与存储库实现不同的层中。层的存在是有原因的——不同层中的对象没有相同的职责，也不会与相同的邻居对话。存储库实现与对象的持久性方式紧密耦合。他们可能会生成 SQL 语句并与关系数据库交谈，他们可能会与您的 ORM 交谈……重要的是他们*知道您的对象的持久化方式*，而应用程序服务并非如此。

如果你的服务层直接调用 ORM，它真的会做两件大事，打破单一职责原则。将您的 ORM 更改为另一种或不同的持久性方式也会更加困难。

> 因此，例如 GetAll 将同时存在于 SL 和存储库中。现在，如果我们有一个更改/业务要求 GetAll 应该忽略某些项目，我应该怎么做，我应该在存储库中忽略这些，还是应该进入服务层的业务逻辑？

如果 GetAll() 忽略某些项目，我强烈建议在 Service 和 Repository 中重命名它以反映这一点，例如 : `GetAllAllowedToUser()`, `GetAllBut...()`。因此，该方法的合同将是明确的，并且您将避免对它应该返回的内容产生误解。另外，您将能够保留原始真正的 GetAll() 方法，该方法仍有一些用处。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-16T17:46:55.233

> 在大多数情况下 - 它处理简单的 CRUD 操作，摆脱存储库不是更容易吗

恕我直言，我不会说要摆脱存储库。我会说，如果你在做 CRUD，你根本不需要 DDD。如果您阅读 Fowler 的企业模式或 Evans，他们都说 DDD 仅在您拥有非常复杂的域逻辑时才有用。CRUD 并不复杂，因此不需要 DDD。

您描述的是代码气味。但我不认为这是 DDD 的气味。您只是看到了一段过度设计的代码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-16T17:57:05.540

为 Dtryon +1，还有：

> 现在，如果我们有一个更改/业务要求 GetAll 应该忽略某些项目

没有直接关系，我知道你只是用它作为例子，但我已经看到了这个确切的东西。请不要以调用 GetAll 的方法结束，但不能获得全部。保留 GetAll，拥有 GetAll，然后拥有 GetAllLive，或 GetAllAvailable 或类似的东西，它会按照**它所说的那样做**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-02T15:58:31.597

也许“查找器模式”（不知道这是否正确）可以解决您的问题。根据CQS（Command-Query-Separation）原则，（IMO，）查询操作根本不是“业务逻辑”。我们可以在基础设施层写一些特定的“查找器”来执行各种查询，让所有非查询操作（业务逻辑）留在服务层，然后在客户端我们将查找器视为服务。
对不起我的语言:-(。**

# c - 这个声明的意义是什么？

> ID：12449134
> 
> 赞同：1
> 
> 时间：2012-09-16T17:37:51.073
> 
> 标签：c, function, pointers

我在我的教授为一个项目提供的一个 .h 文件中看到了这个文件，但我不太确定这意味着什么。

```
int (*get_console_dev)(void); 
```

是不是一样

```
(int*) get_console_dev(void); 
```

（一个名为 get_console_dev 的函数，它返回一个指向`int`? 的指针）

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T17:38:55.000

它是一个函数指针，可以指向一个返回`int`和取0参数的函数；它不等于您发布的第二行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T17:39:43.770

`int (*get_console_dev)(void)`是一个函数指针声明。`get_console_dev`是一个变量，可以保存对与特定签名匹配的函数的引用。

```
int consoleFunction(void);

// ...

int (*get_console_dev)(void);

get_console_dev = consoleFunction; 
```

此声明与： 不同`(int*) get_console_dev(void);`。

[用cdecl](http://cdecl.ridiculousfish.com/?q=int+%28%2aget_console_dev%29%28void%29)检查这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T17:44:56.697

int (*get_console_dev)(void);

这是没有参数且返回类型为整数的指针指针函数。

(int*) get_console_dev(void);

这是没有参数的函数，返回类型为整数类型的指针。

两者完全不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T17:49:20.810

请阅读函数指针。它是一个指向函数的指针，该函数接受 void（作为参数）并返回整数

# excel - “骰子上 2-7 的结果总是被视为掷出 8”的 Excel 公式

> ID：12449135
> 
> 赞同：3
> 
> 时间：2012-09-16T17:37:58.240
> 
> 标签：excel

我有一个掷二十面骰子的电子表格程序。表 1 是卷，表 2 是值。

我想掷一个 d20，但如果它出现 2-7，则捏造它并假设我得到了 8。

`Rolls!A2`的函数`=RANDBETWEEN(1,20)`返回一个 1 到 20 之间的随机数来表示 d20 滚动。`Values!7E`是计算（非随机）数字（当前为 13）的函数。

目前，`Rolls!C7`的函数试图用 来计算我的结果`=Values!E7+Rolls!A2`。但我想更新`Rolls!C7`以反映捏造。如果`Rolls!A2`返回数字 2、3、4、5、6 或 7，`Rolls!C7`则将按照掷出 8 的方式计算。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T17:47:05.247

用这个替换`Rolls!A2`你的公式：`IF(AND(Rolls!A2<8, Rolls!A2>1),8,Rolls!A2)`这样它总是至少为 8，除非滚动 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T23:30:01.700

或者你可以做`=IF(Rolls!A2=1,1,MAX(Rolls!A2,8))`

# c# - 使用 POP 提取电子邮件并放置读取标志

> ID：12449138
> 
> 赞同：0
> 
> 时间：2012-09-16T17:38:13.460
> 
> 标签：c#, asp.net, openpop

在 C# 中使用 openpop 读取电子邮件后，有什么方法可以引发读取标志？

我`openpop.dll`在我的程序中使用过。我只是不知道如何在阅读电子邮件后设置阅读标志。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:39:35.063

不; POP 协议不支持。

使用 IMAP。

# node.js - 如何将模块添加到 node.js

> ID：12449146
> 
> 赞同：-1
> 
> 时间：2012-09-16T17:39:00.797
> 
> 标签：node.js, formidable

我想问如何将模块添加到node.js。我我已经安装了 node.js 并想创建一个简单的表单来上传图像。当我需要一个“强大的”模块并从中创建一个新对象时，我收到一个错误“找不到模块formidabe”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:51:00.973

通过 npm（节点包管理器），从你的命令行试试这个：

```
npm install formidable 
```

如[文档](https://github.com/felixge/node-formidable)中所述。之后它应该工作。

# azure - 没有适用于 Visual Studio 2012 的 Azure 模板？

> ID：12449147
> 
> 赞同：1
> 
> 时间：2012-09-16T17:39:03.797
> 
> 标签：azure, visual-studio-2012

我为 Visual Studio 2012 Professional 安装了 Azure SDK，但没有看到任何云项目模板。我的安装成功，没有任何错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T04:09:48.577

您需要从顶部的小下拉框中选择 .NET Framework 4，因为默认选择 4.5 并且 Azure 尚不支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T17:43:54.540

您需要将 Windows Azure SDK 与用于 Windows Azure 的 Visual Studio 工具一起安装（这些不包括在干净的 VS2012 安装中）。

官方 Windows Azure 站点上有一个完整的安装程序，其中包含您需要的一切：[https](https://www.windowsazure.com/en-us/develop/net/) ://www.windowsazure.com/en-us/develop/net/ （大安装按钮）。

# html - 在没有（不必要的）滚动条的情况下将页脚粘贴到页面底部

> ID：12449156
> 
> 赞同：5
> 
> 时间：2012-09-16T17:40:30.227
> 
> 标签：html, css

***编辑2：***

我的代码中有一个错误导致页脚没有粘在页面底部。我的代码看起来像这样：

```
<div id="footer">
 <div id="copyright-bg" class="container">
  <div class="row">
   <div class="twelvecol">
    <p class="copyright-text">Lorum Ipsum</p>
</div>
</div>
</div>
</div> 
```

我删除`<div id="footer">`并移动了这些 CSS 属性，`id="copyright-bg"`然后它开始正确地粘在底部。但是现在又出现了一个问题！我现在有不必要的滚动条！[这是一个 Fiddle](http://jsfiddle.net/aVKq3/1/)，它有最简单的代码来试图弄清楚发生了什么。我认为这可能是渐变，但是当我将代码更改为纯色背景时，滚动条仍然出现。

注意：我已经在 Chrome 和 Firefox 中进行了测试。

***编辑：***

我已尝试按照[网站](http://www.cssstickyfooter.com/)上的说明使用[CSS Sticky Footer](http://www.cssstickyfooter.com/)。

我假设我的 CSS（？）中存在冲突，[这是页面的小提琴](http://jsfiddle.net/PekEf/3/)。

我也尝试过[这个网站的建议](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)，虽然它在技术上有效，但它会创建滚动条！如果可能的话，我想避免这种情况。

***原始问题***

我正在处理一个页面，如果该页面没有太多内容（即页面没有滚动条），我的版权容器下方会留下一个黑条。

这是一个屏幕截图：

![截屏](../Images/1f6594b81f9771869b752eb3e7ec2c5e.png)

注意：你看到这个词的地方`Done`是我的浏览器底部，一个箭头指向黑条。

我尝试了一些方法来删除该栏。当我添加`height: 100%;`到 body 标记时，它会采用我的背景渐变，它会到达页面底部，但同样看起来不太好。然后我尝试添加`height: 100%`到版权容器。这导致灰色区域向下延伸并导致过多的空白空间和滚动条。我试图绝对定位元素，但这会导致其他几个问题，并且更愿意避免绝对定位。

如何去除黑条？（最好只使用 CSS，但会接受使用 jQuery/Javascript 的答案）

***代码***：

*HTML：*

```
<!-- Body Content Is Here -->
<div id="copyright-bg" class="container">
<div class="row">
<div class="twelvecol">
    <p class="copyright-text">Ipsum</p>
</div>
</div>
</div> 
```

*CSS：*

```
html, body{
font-size:1em;
font-family: "ff-dagny-web-pro", Helvetica, Arial, sans-serif;
line-height:1.438em;
color:#222;
    margin: 0;
    padding: 0;
    text-align: justify;
    background: linear-gradient(to bottom, rgba(0,0,0,1) 25%,rgba(209,209,209,1) 100%);
    /* Vendor Specific Background Gradients... */
}

#copyright-bg{
margin-top:1.875em;
background: none repeat scroll 0 0 #666666;
    border-top: 5px solid #E31836;
padding:1.250em;
}

.container {
    padding-left: 20px;
    padding-right: 20px;
}

.row {
    width: 100%;
    max-width: 1140px;
    min-width: 755px;
    margin: 0 auto;
    overflow: hidden;
 }

.row .twelvecol {
    width: 100%;
    float: left;
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T01:49:14.983

如果您尝试了多种解决方案（例如[Ryan Fait 的页脚](http://ryanfait.com/resources/footer-stick-to-bottom-of-page/)或~~[CSS Sticky Footer](http://www.cssstickyfooter.com/)~~（此链接已损坏，[请参阅此](https://stackoverflow.com/questions/12449156/stick-footer-to-bottom-of-page-without-unnecessary-scroll-bars)），这是我最喜欢的），那么我敢打赌，您遇到的问题比面值更大。这两个示例已经证明了时间的考验，但仍然是创建粘在页面底部的页脚的最常用方法。虽然我不是在抨击您的代码，但我建议您也许重做您从头开始创建的页面，并让第一个实现成为粘性页脚。从那里你应该能够复制和粘贴你的视觉样式，如果它再次搞砸了，那么你就知道你的罪魁祸首代码行了。

**编辑：**

我需要稍微编辑您的代码，因为缺少缩进使其难以阅读。 [这是新的 jsFiddle。](http://jsfiddle.net/PekEf/7/) 我所做的改变是一些事情。这是 CSS 代码顶部的补充内容：

```
* {margin:0;padding:0;} 
html, body {height: 100%;}

#content-wrap {min-height: 100%;} 
```

这些行对于使您的代码正常工作是 100% 必要的。您不仅需要对所​​有`*`元素进行通配符 ( ) 重置，还需要告诉文档 ( `html`) 和正文 ( `body`) 占据屏幕的整个高度。我不记得它是否在您的原始 CSS 中，但`#content-wrap`也应该有`min-height`100%。

搜索后，我意识到您的页脚实际上不是 180px 的高度，而是 100px 的高度。 [这是最终的 jsFiddle。](http://jsfiddle.net/PekEf/8/) 此外，这是使页脚保持不变的最终代码：

```
#main {overflow:auto;
    padding-bottom: 100px;}  /* must be same height as the footer */

#footer {position: relative;
    margin-top: -100px; /* negative value of footer height */
    height: 100px;
    clear:both;} 
```

您现在应该看到，当您应用此代码时，页脚会粘在底部（并且没有胶带）。希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T22:30:29.660

大多数粘性页脚代码似乎会导致我的页面出现问题。要解决此问题，我使用以下代码：

***HTML***

```
<body>
 <div id="page-content">
   <header> 
     <!-- Header Content Goes Here --> 
   </header> 

     <!-- Page Content Goes Here --> 

   <footer>
     <!-- Footer Content Goes Here --> 
   </footer>

 </div>
</body> 
```

***JS***

```
$(function() {
   var height = $(window).height() - ($("header").outerHeight() + $("footer").outerHeight() );
 $("#page-content").css("min-height",height+"px");
}); 
```

这样做是计算页面的高度并设置页面的最小高度，从而将页脚粘贴到底部。它工作得很好。

注意：我使用的是 HTML5。

# android - Android地图/gps查询

> ID：12449157
> 
> 赞同：0
> 
> 时间：2012-09-16T17:40:34.067
> 
> 标签：android, gps, maps

我希望为我的第四年项目做的一个项目如下（目前只是一个想法）：它会显示你的时间表（天、时间、班级、房间等），但说你的一个班级在房间里IT101 但你不知道那个房间在哪里。您按下 IT101，它将显示 IT 大楼的地图并突出显示您想要的房间。

我是做应用程序的初学者，所以我想知道是否有可能做到这一点，如果这样做有多难，我将如何去做？

我还在想，如果用户启用了 gps，我将能够看到用户的位置并在地图上精确定位（一种“A 是你所在的位置”和“B 是你需要的位置” )，但我不确定 gps 的准确度如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:38:29.910

听起来你想做内部导航。使用 GPS 很难做到这一点，因为您需要清楚地看到几颗 GPS 卫星，而建筑物中没有这些卫星。

内部导航通常使用 WLAN 三角测量来完成，参见。[https://stackoverflow.com/a/12176718/1127492](https://stackoverflow.com/a/12176718/1127492)

# model-view-controller - 如何有效地将日志记录添加到 Java Web 项目中？

> ID：12449159
> 
> 赞同：2
> 
> 时间：2012-09-16T17:40:59.557
> 
> 标签：model-view-controller, jsp, servlets, logging, log4j

我正在使用 MVC 架构创建一个非常简单的 JSP/Servlets Web 项目。

我有一个先决条件，将使用 log4j 的日志记录添加到项目中。由于我之前没有使用 Log4j 实现日志记录，我想听听一些关于**如何以有效方式实现它的**提示。

**主要关注**的是如何在整个项目中共享负责记录的对象，而无需在每次我想写另一条消息时创建一个新对象。**那么文件结构和消息组织**
呢，将有关基于日期的操作和用户操作的信息写在单独的文件中还是在一个文件中更好？

 **也许这听起来很奇怪，但我想听听有这方面经验的人的评论，因为我是新手 :)

提前感谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:49:07.877

*在 log4j 中，每个类别*都需要一个记录器对象，而不是每个对象。由于通常您的控制器、服务、daos 等通常是单例的，因此在每个中包括一个记录器对象作为实例变量是可以的。你会写类似的东西

```
public void MyServiceImpl implements MyService {
    private Logger logger = Logger.getLogger(getClass());

    ....
} 
```

如果您有一堆控制器都需要自己的记录器（服务和 daos 也是如此），您甚至可以将该 Logger 声明放在抽象基础控制器中（服务和 daos 也是如此）。它可以是受保护的字段，也可以是带有 getter 的私有字段，但由于日志记录类别很重要，因此您需要为每个控制器（子）类创建一个记录器。

当然，有太多的记录器是一个有效的问题，所以如果你的类不是单例的，你需要做点别的。如果您要向域对象添加日志记录，并为此创建了数十个或数百个域对象，您不希望为每个域对象创建一个记录器对象。在这种情况下，我使用（并且看到其他人使用）记录器作为类变量，例如：

```
public void MyDomainObject {
    private static Logger logger = Logger.getLogger(MyDomainObject.class);

    ....
} 
```

就记录“架构”而言，让它遵循您的应用程序架构。如果您在应用程序架构中很好地分离了关注点，并且对所有内容进行了适当的分层，并且为您的类和接口选择了好的名称，那么您的日志记录结构应该遵循。**

# ios - RestKit、核心数据和关系问题。父对象不识别子集

> ID：12449160
> 
> 赞同：3
> 
> 时间：2012-09-16T17:41:02.580
> 
> 标签：ios, core-data, restkit, relationship

我正在尝试使用 RestKit 映射文章和属于它们的照片之间的关系。在请求资源时，这两个对象都得到了正确存储，但似乎这种关系并没有持续存在。事实上，文章模型似乎甚至没有响应照片选择器（这可能是“duh”点，但我将提供完整的代码以供通过）。

我在一个要点中提供了所有代码，因为我发现在 StackOverflow 上更容易查看和格式化。抱歉，如果这实际上给您带来不便。

[https://gist.github.com/3733334](https://gist.github.com/3733334)

这是核心数据模型和建立的关系的图像（抱歉，我不得不将它们结合起来，因为我目前只能发布 2 个超链接）：

[http://imageshack.us/a/img33/5039/stackoverflowissue.jpg](http://imageshack.us/a/img33/5039/stackoverflowissue.jpg)

当我尝试通过 anArticle.photos 访问照片时，除了对象之间的关系之外，一切似乎都正常工作。选择器无法识别。我在 Photo 模型中设置了一个 convience 方法来返回具有匹配文章 ID 的所有照片，但我觉得这是一个不理想的解决方案，因为它有点消除了创建关系的整个想法。

我觉得我可能缺少一些简单的东西，任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T22:45:19.160

所以当然这是一个“Duh”错误。在当地开发人员的帮助下，他指出我的 Article.h 文件中的 Photos 变量是一个 NSArray，需要更改为 NSSet 来存储由 RestKit 映射的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:50:57.080

不同版本的 RestKit 之间存在一些不一致。如果您使用的是最新的映射，则应按此处所示进行设置：[https](https://github.com/RestKit/RestKit/wiki/Object-mapping) ://github.com/RestKit/RestKit/wiki/Object-mapping 。如果您想将实体类用于模型特定方法，请在您的 NSManagedObjects 上创建类别，以便在更改数据模型时可以重新生成它们（仅在将方法提取到类别后执行此操作！在 .xcdatamodeld 中选择一个实体并继续到编辑器-> 创建 NSManagedObject 子类...）。

我将映射移至负责与远程 API 同步的控制器。

这也应该有帮助：[http](http://andriyadi.me/logging-in-restkit/) ://andriyadi.me/logging-in-restkit/ 。

核心数据指南也强调你应该建立反比关系（但这不是强制性的）。

在我看来，获取实体也可以做得更好。在我的项目中，我有一个 NSObject 子类单例，它（在其他一些核心数据便利功能中）通过实体和谓词获取：

```
- (NSArray *)fetchEntities:(NSString *)entity usingPredicate:(NSPredicate *)predicate {
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:entity];
    [request setPredicate:predicate];
    NSError *error = nil;
    NSArray *results = [self.managedObjectContext executeFetchRequest:request error:&error];
    if (error) {
        RLog(@"Error fetching entity %@ using predicate %@", entity, predicate);
        abort();
    }
    if ([results count] >= 1) {
        return results;
    }
    return nil;
} 
```

您也可以更改它以将谓词作为 NSStrings 传递。

旁注：目前我自己也在努力使用 RestKit 和对象映射:)。

# python - 在 Ubuntu 12.04 上完全删除和全新安装 python

> ID：12449161
> 
> 赞同：3
> 
> 时间：2012-09-16T17:41:25.217
> 
> 标签：python, ubuntu-12.04

承认这很尴尬，但我只是继续努力在 Ubuntu 安装上设置我的 Python 环境。

有时我让它工作正常。但问题是：

我觉得每当我坐下来对 python 项目进行一些业余爱好时，我最终都会花费数小时来解决与我的 python 安装不一致的问题。现在我不断收到以下错误消息：

```
ImportError: cannot import name urandom 
```

尝试导入名为 googleplaces 的模块时（https://github.com/slimkrazy/python-google-places）。

但这总是让我无休止地寻找合适的配置。

我只想在这个项目上工作，而不是在论坛上无休止地钻研。

这让我明白了我的意思：我如何完全删除我现有的 python 设置（包括 virtualenv、pip、easy_install 等）并从一个完全干净的状态开始？我已经尝试从突触重新安装所有 python，但没有成功，仍然出现错误。

**更新：**我已经重新安装了 virtualenv，到目前为止看起来“还可以”。发现我的导入错误是权限问题，如果我在交互式中使用 sudo 导入，就可以通过了。我应该如何更正我的权限，这样我就不必运行 sudo？（可能关闭它并开始一个新问题。）

# php - 嵌入在 PHP 中的 HTML 代码中的分页

> ID：12449163
> 
> 赞同：0
> 
> 时间：2012-09-16T17:41:34.317
> 
> 标签：php, image, pagination

我想在下面的脚本中添加分页，该脚本搜索数据库并将文件夹中的图像输出到行和列中。但我希望输出在页面中，而不是全部在同一页面上。我该怎么做？

```
<?php
    echo '<table border="0" cellpadding="15" cellspacing="15">';
    $getImages = mysql_query("SELECT * FROM yaamembers");
    if(!$getImages)
        die("Cannot execute query. " . mysql_error());
    $countRows = mysql_num_rows($getImages);
    $i = 0;
    if ($countRows > 0)
    {
        while ($row_rsYaamembers = mysql_fetch_assoc($getImages))
        {
            if ($i % 3 == 0) echo ($i > 0? '</tr>' : '') . '<tr>';
                echo '<td valign="top"><a target="_blank" href="yimagelarge.php?yaaid=' . $row_rsYaamembers['yaaID'] . '"><img src="/home/youngatart/yaamembers/'.$row_rsYaamembers['photo'].'" border="0" width="120" /></td>';
            if ($i == $countRows - 1)
                echo '</tr>';
            $i++;
        }
    }
    echo '</table>';
?> 
```

我修改了代码，得到了三行三列的图像，页面上的最后一行填充了一个图像。这对于分页链接生成的所有页面都是相同的。它应该在进入下一页之前均匀填满。我可能做错了什么？

***修改后的代码如下：***

```
<?Php
    $getImages = mysql_query("SELECT * FROM yaamembers");
    if(!$getImages)
        die("Cannot execute query. " . mysql_error());

    $output = "";

    $getImages = get_images($start,$limit);
    if ($getImages && mysql_num_rows($getImages) > 0)
    {
        /* Pagination section2 */
        $getAllImages = get_images();
        $total_items = mysql_num_rows($getAllImages);
        $paginate = paginate($targetpage,$total_items,$limit,$pagenum);
        $paginate = trim($paginate);
        /* Pagination section2 End */

        echo '<table border="0" cellpadding="15" cellspacing="15">';
        $countRows = mysql_num_rows($getImages);
        $i = 0;
        if ($countRows > 0)
        {
            while ($row_rsYaamembers = mysql_fetch_assoc($getImages))
            {
                if ($i % 3 == 0) echo ($i > 0) . '<tr>';
                    echo '<td valign="top"><a target="_blank" href="yimagelarge.php?yaaid=' . $row_rsYaamembers['yaaID'] . '"><img src="http://localhost/youngatart/yaamembers/'.$row_rsYaamembers['photo'].'" border="0" width="120" /></a><div id="text2"><div class="clear_4"></div><div align="center" id="text2"><a target="_blank" href="yimagelarge.php?yaaid=' . $row_rsYaamembers['yaaID'] . '"><div align="center" id="text2"> '.$row_rsYaamembers['school'].'</a></div><div class="clear_4"></div><div align="center" id="text2"><a target="_blank" href="yimagelarge.php?yaaid=' . $row_rsYaamembers['yaaID'] . '"> '.$row_rsYaamembers['year'].'</a></div></div></td>';
                if ($i == $countRows - 1)
                    echo '</tr>';
                $i++;
            }
        }
        echo '</table>';

        $output .= $paginate;
    }
    echo $output;
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:38:03.283

我建议对你的脚本做一个简单的改变，让我的解释更舒服（因为我不是一个好的程序员！:)）。此外，我还创建了一些可以使用的函数。

建议的更改

1.  对 HTML 进行一些更改（使用 div 并放置一个 CSS 类，并使用 CSS）
2.  使`get_images`作为函数

## 如何使用

```
function get_images($start=0,$limit=0)
{
    mysql_connect("host","user","pass")or die("Cannot connect DB");
    mysql_select_db("db_name")or die("DB does not exist");
    $sql = "SELECT * FROM yaamembers";

    if($start!=0 || $limit!=0)
    {
        $sql .= " LIMIT ". $start .", ". $limit;
    }

    $sql .= ";";

    $data = mysql_query($sql);
    mysql_close();
    return $data;
}
/* Pagination section1 */
$pagenum = 1;
$limit = 10; /* Items per page*/
$start = 0;
if(isset($_GET['pagenum'])) {
    $pagenum = $_GET['pagenum'];
}
$url = get_current_url();
$targetpage = format_url($url, "pagenum");
if($pagenum)
{
    $start = ($pagenum - 1) * $limit;
}
/* Pagination section1 End */

$output = "";

$getImages = get_images($start,$limit)
if ($getImages && mysql_num_rows($getImages) > 0)
{
    /* Pagination section2 */
    $getAllImages = get_images();
    $total_items = mysql_num_rows($getAllImages);
    $paginate = paginate($targetpage,$total_items,$limit,$pagenum);
    $paginate = trim($paginate);
    /* Pagination section2 End */

    while ($row_rsYaamembers = mysql_fetch_assoc($getImages))
    {
        $output .= "
            <div>
                <a target="_blank" href="yimagelarge.php?yaaid=' . $row_rsYaamembers['yaaID'] . '">
                <img src="/home/youngatart/yaamembers/'.$row_rsYaamembers['photo'].'" border="0" width="120" />
                </a>
            </div>";
    }
    $output .= $paginate;
}
echo $output; 
```

## 以下是分页功能

```
<?php
    function paginate($targetpage,$total_items=0,$limit=10,$pagenum=1)
    {
        /*
        * Remember to remove pagenum variable from $targetpage variable
        */
        $adjacents = 3; /* How many items adjascent to page link */
        /* How many items to show per page $limit = 30; */

        /* Setup page vars for display. */
        if ($pagenum == 0)
            $pagenum = 1;                             /* If no page var is given, default to 1\. */
        $prev = $pagenum - 1;                         /* Previous page is page - 1 */
        $next = $pagenum + 1;                         /* Next page is page + 1 */
        $lastpage = ceil($total_items/$limit);        /* Last page is equal to total pages / items per page, rounded up. */
        $lpm1 = $lastpage - 1;                        /* Last page minus 1 */
        /*
            Now we apply our rules and draw the pagination object.
            We're actually saving the code to a variable in case we want to draw it more than once.
        */
        $pagination = "";
        if($lastpage > 1)
        {
            $pagination .= "<div class=\"pagination\">";
            /* previous button */
            if ($pagenum > 1)
            {
                $pagination .= "<a href=\"$targetpage&pagenum=$prev\">Previous</a>";
            }
            else
            {
                $pagination .= "<span class=\"disabled\">Previous</span>";
            }

            /* Pages */
            if ($lastpage < 7 + ($adjacents * 2))  /* Not enough pages to bother breaking it up. */
            {
                for ($counter = 1; $counter <= $lastpage; $counter++)
                {
                    if ($counter == $pagenum)
                    {
                        $pagination .= "<span class=\"current\">$counter</span>";
                    }
                    else
                    {
                        $pagination .= "<a href=\"$targetpage&pagenum=$counter\">$counter</a>";
                    }
                }
            }
            elseif($lastpage > 5 + ($adjacents * 2))    /* Enough pages to hide some */
            {
                /* Close to beginning; only hide later pages */
                if($pagenum < 1 + ($adjacents * 2))
                {
                    for ($counter = 1; $counter < 4 + ($adjacents * 2); $counter++)
                    {
                        if ($counter == $pagenum)
                        {
                            $pagination .= "<span class=\"current\">$counter</span>";
                        }
                        else
                        {
                            $pagination .= "<a href=\"$targetpage&pagenum=$counter\">$counter</a>";
                        }
                    }
                    $pagination .= "...";
                    $pagination .= "<a href=\"$targetpage&pagenum=$lpm1\">$lpm1</a>";
                    $pagination .= "<a href=\"$targetpage&pagenum=$lastpage\">$lastpage</a>";
                }
                /* In middle; hide some front and some back */
                elseif($lastpage - ($adjacents * 2) > $pagenum && $pagenum > ($adjacents * 2))
                {
                    $pagination .= "<a href=\"$targetpage&pagenum=1\">1</a>";
                    $pagination .= "<a href=\"$targetpage&pagenum=2\">2</a>";
                    $pagination .= "...";
                    for ($counter = $pagenum - $adjacents; $counter <= $pagenum + $adjacents; $counter++)
                    {
                        if ($counter == $pagenum)
                        {
                            $pagination .= "<span class=\"current\">$counter</span>";
                        }
                        else
                        {
                            $pagination .= "<a href=\"$targetpage&pagenum=$counter\">$counter</a>";
                        }
                    }
                    $pagination .= "...";
                    $pagination .= "<a href=\"$targetpage&pagenum=$lpm1\">$lpm1</a>";
                    $pagination .= "<a href=\"$targetpage&pagenum=$lastpage\">$lastpage</a>";
                }
                /* close to end; only hide early pages */
                else
                {
                    $pagination .= "<a href=\"$targetpage&pagenum=1\">1</a>";
                    $pagination .= "<a href=\"$targetpage&pagenum=2\">2</a>";
                    $pagination .= "...";
                    for ($counter = $lastpage - (2 + ($adjacents * 2)); $counter <= $lastpage; $counter++)
                    {
                        if ($counter == $pagenum)
                        {
                            $pagination .= "<span class=\"current\">$counter</span>";
                        }
                        else
                        {
                            $pagination .= "<a href=\"$targetpage&pagenum=$counter\">$counter</a>";
                        }
                    }
                }
            }

            /* Next button */
            if ($pagenum < $counter - 1)
            {
                $pagination .= "<a href=\"$targetpage&pagenum=$next\">next</a>";
            }
            else
            {
                $pagination .= "<span class=\"disabled\">next</span>";
            }
            $pagination .= "</div>\n";
        }
        return $pagination;
    }

    function format_url($url, $fileds)
    {
        /*-To remove queries from URL, the field input may be single string or an array of strings. */
        $url_filed_array = explode("&",$url);
        $return_url = '';
        for($i=0; $i<count($url_filed_array); $i++)
        {
            if(is_array($fileds))
            {
                if($i==0)
                {
                    $_url = explode('?',$url_filed_array[$i]);
                    $return_url .=$_url[0] .'?';
                    $url_filed = explode('=',$_url[1]);
                }
                else
                {
                    $url_filed = explode('=',$url_filed_array[$i]);
                }
                if(!in_array($url_filed[0],$fileds))
                {
                    if($i==0 && isset($_url[1]))
                    {
                        $return_url .=$_url[1];
                    }
                    else
                    {
                        $return_url .=$url_filed_array[$i];
                    }
                    if(($i+1) != count($url_filed_array))
                    {
                        $return_url .="&";
                    }
                }
            }
            else
            {
                if($i==0)
                {
                    $_url = explode('?',$url_filed_array[$i]);
                    $return_url .=$_url[0] .'?';
                    $url_filed = explode('=',$_url[1]);
                }
                else
                {
                    $url_filed = explode('=',$url_filed_array[$i]);
                }
                if($url_filed[0]!=$fileds)
                {
                    if($i==0 && isset($_url[1]))
                    {
                        $return_url .=$_url[1];
                    }
                    else
                    {
                        $return_url .=$url_filed_array[$i];
                    }
                    if(($i+1) != count($url_filed_array))
                    {
                        $return_url .="&";
                    }
                }
            }
        }
        if(substr($return_url,-1)=='&')
        {
            $return_url = substr($return_url, 0, -1);
        }
        if(substr($return_url,-1)=='?')
        {
            $return_url = substr($return_url, 0, -1);
        }
        return $return_url;
    }

    function get_current_url()
    {
        $pageURL = (@$_SERVER["HTTPS"] == "on") ? "https://" : "http://";
        if ($_SERVER["SERVER_PORT"] != "80")
        {
            $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
        }
        else
        {
            $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
        }
        return $pageURL;
    }
?> 
```

## CSS 代码

```
div.pagination {
    padding:3px;
    margin:3px;
    text-align:center;
}

div.pagination span.disabled ,
div.pagination span.current ,
div.pagination a
{
    background:url('../images/pagination_bg.jpg') #ffffff repeat-x right center;
    height: 28px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    padding: 5px 8px;
    margin-right: 8px;
    color: #6B6868;
}

div.pagination a {
    border: 1px solid #ddd;
    text-decoration: none;
}
div.pagination a:hover, div.pagination a:active {
    border:1px solid #f2813a;
    color: #f2813a;
    background-color: #F46F1B;
}
div.pagination span.current {
    border: 1px solid #f2813a;
    font-weight: bold;
    color: #FFF;
    background:url('../images/pagination_bg_active.jpg') #F46F1B repeat-x right center;
}
div.pagination span.disabled {
    border: 1px solid #f3f3f3;
    color: #ccc;
}

div.pagination span.current,
div.pagination span.disabled {
    cursor: default;
} 
```

*在文件夹images*中根据需要创建两个背景图像：

```
pagination_bg.jpg /* Normal button image */
pagination_bg_active.jpg /* Active or current page button image */ 
```

# sql - 如何在 SQL Server 2008 中重新组织标识列值

> ID：12449165
> 
> 赞同：0
> 
> 时间：2012-09-16T17:41:35.297
> 
> 标签：sql, sql-server, replication, identity

我有一个 SQL Server 数据库设置为复制环境中的发布者。它有几个订阅，几个不同的人一直在执行`INSERT`关于这些的声明。由于为标识列分配的值范围不同，一旦将所有数据推回发布，我们最终会得到非常大的变化。

这在生产环境中当然是可以预料的，甚至是可取的。但是，我们仍在开发中，因此希望重新组织所有身份值，以便它们是连续的。而不是`[1,2,3,1001,1001,1003]`我们想要拥有`[1,2,3,4,5,6]`. 我意识到这意味着更改标识列值并在它们支持的关系中相应地更新它们。有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:54:10.523

在 Management Studio 中创建身份列时为其播种。

如果使用代码创建表，则可以使用以下形式的 Transact-SQL (T-SQL) CREATE TABLE 语句轻松地为表的标识列设定种子：

```
CREATE TABLE tablename 
(
  columnname datatype identity [(seed, increment)
  [NOT FOR REPLICATION]],
  [columnname ...]
) 
```

在代码中，数据类型是数值列。种子和增量都是可选的，两者的默认值都是 1。

图 B 显示了使用 CREATE TABLE 创建名为 Orders 的表并将 OrderID 列的标识种子和增量值分别设置为 100 和 10 的结果。如您所见，第一个标识值为 100，随后的每个值增加 10。（您可以通过为增量指定负值来减小标识值。）

并使用 CREATE TABLE 播种标识列。

检查和重新播种

例如，如果您将表的所有记录复制到存档表，然后删除源表中的所有记录，您可能希望重新设定源表的标识列的种子，以便控制顺序。如下使用 T-SQL 的 DBCC CHECKIDENT 重新设定标识列的种子：

```
DBCC CHECKIDENT    
(    
  tablename    
  [, [NORESEED | RESEED [, newreseedvalue]]]    
)

[WITH NO_INFOMSGS] 
```

表 A 定义了该语句的可选参数。

表 A：DBCC CHECKIDENT

范围

描述

NORESEED 返回当前标识值和标识列的当前最大值，无需重新设定种子。这些值通常（并且应该）相同。

RESEED 如果当前标识值小于标识列中存储的最大标识值，则使用标识列中的最大值更改当前标识值。

newreseedvalue 指定重新播种时的新种子值。如果表为空，则第一个标识值（在执行 DBCC CHECKIDENT 之后）将等于 newreseedvalue。如果表包含数据，则下一个标识值将等于 newreseedvalue + 当前增量值（默认值为 1）。此行为是 SQL Server 2005 的新行为（并且在 2008 中仍然存在）。SQL Server 2000 总是递增种子值。

WITH NO INFOMSGS 禁止所有信息性消息。

从技术上讲，DBCC CHECKIDENT 检查并更正标识值。简单地说，使用它来学习当前的身份值或重新设定现有的身份列。

# php - 为什么我得到未定义的索引但我已经转储了我的数组并且它上面有值？

> ID：12449166
> 
> 赞同：0
> 
> 时间：2012-09-16T17:41:37.997
> 
> 标签：php, arrays

我不知道出了什么问题，但为什么我有未定义的索引，因为我已经转储了我的数组并且它的值可能是错误的或我丢失了？

//这里是截图： ![在此处输入图像描述](../Images/68c9f3ef59f8e38f7523c3c17af86c9a.png)

//这是我的php代码：

```
$result1 = array(); //for player 1
$result2 = array(); //for player 2

$data_blue = $db->dataWarrior($battle,$blue_name,$blue_type);

foreach($data_blue as $blue){
    $result1[] = $blue;
}

$data_red = $db->dataWarrior($battle,$red_name,$red_type);

foreach($data_red as $red){
    $result2[] = $red;
}

var_dump($result1);

//variables to identify turns 1=turn
$warrior_1 = 0;
$warrior_2 = 0;

//compare speed
if($result1['speed']>$result2['speed']){ //this is the undefined index
    $warrior_1 = 1;
    $warrior_2 = 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T17:45:36.033

这一行：

```
$result1[] = $blue; 
```

将一个数组嵌套在另一个数组中。

```
if($result1[0]['speed']>$result2[0]['speed']){ 
```

或者只是分配而不是附加在前面的行中。

```
$result1 = $blue; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T17:46:14.983

您的数组以索引 0 开始。

尝试

```
if($result1[0]['speed']>$result2[0]['speed']){ 
```

# git - 如何将一组不同的更改推送到 master？

> ID：12449170
> 
> 赞同：0
> 
> 时间：2012-09-16T17:41:58.383
> 
> 标签：git, heroku, github

我在当地有两家分店。分期和大师。

已经有一些更改已推送到分期。但是，我不想将这些更改推送给 master。

如果我有第二组更改，我需要立即推送到 master。如果不从暂存合并我的第一组更改，我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:51:07.073

您可以使用 git`cherry-pick`选项拉入 master 精确提交。

```
$ git checkout master
$ git cherry-pick SHA1_of_commit 
```

您可以使用 SHA1_of_commit`log`命令

```
$ git log --pretty=format:\"%h %ad | %s%d [%an]\" --graph --date=short
* 9121391 2012-09-16 | Studio sweeper fix in offices controller. (HEAD, origin/master, origin/HEAD, heroku/master, master) [Nick Kugaevsky]
* a7720f9 2012-09-16 | RBP improvements [Nick Kugaevsky]
* 5d0db9f 2012-09-16 | RBP improvements [Nick Kugaevsky]
* a35cd96 2012-09-16 | Home controller clean up [Nick Kugaevsky]
  ^^^^^^^ – SHA1_of_commit 
```

# python - 如何调试 gunicorn 失败问题？（工人无法启动）

> ID：12449172
> 
> 赞同：35
> 
> 时间：2012-09-16T17:42:02.177
> 
> 标签：python, django, gunicorn

我有一个使用 Gunicorn 并且在本地运行良好的 Django Web 应用程序，但是当我在 EC2 上部署应用程序时，我看到 Gunicorn 失败了：

```
 $ gunicorn_django -b 127.0.0.1:8000 --settings=myapp.settings.dev --debug --log-level info
 2012-09-16 17:39:24 [28333] [INFO] Starting gunicorn 0.14.6
 2012-09-16 17:39:24 [28333] [INFO] Listening at: http://127.0.0.1:8000 (28333)
 2012-09-16 17:39:24 [28333] [INFO] Using worker: sync
 2012-09-16 17:39:24 [28336] [INFO] Booting worker with pid: 28336
 2012-09-16 17:39:24 [28336] [INFO] Worker exiting (pid: 28336)
 2012-09-16 17:39:24 [28333] [INFO] Shutting down: Master
 2012-09-16 17:39:24 [28333] [INFO] Reason: Worker failed to boot. 
```

我尝试使用日志记录，`--spew`但它继续运行并且没有显示错误。

我该如何调试这个问题？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-04-10T07:18:29.507

尝试将 with`--preload`作为参数运行`gunicorn_django`- 它应该向您显示工作人员在启动时遇到的错误。看到[这个错误](https://github.com/benoitc/gunicorn/issues/338#issuecomment-7425197)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-10-19T20:36:10.740

你需要`--debug --log-level debug`

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-03-23T02:04:26.597

就我而言，我必须`gunicorn_django --bind example.com:8001`从与 manage.py 文件相同的文件夹中运行。

# opencv - 运行 AES 解密时 OpenCv 图像不稳定

> ID：12449178
> 
> 赞同：1
> 
> 时间：2012-09-16T17:42:39.850
> 
> 标签：opencv, openssl, aes

我正在尝试使用 Opencv 从网络摄像头捕获视频并通过 TCP 传输。另外，我想使用 AES 加密视频。但无论何时运行 AES decrpt 功能，视频都不稳定。

我正在使用[opencv over tcp 示例](http://nashruddin.com/Streaming_OpenCV_Videos_Over_the_Network)和[AES 示例](http://saju.net.in/blog/?p=36)

每当我运行此功能时：

```
img->imageData = aes_decrypt(&de, img->imageData, &imgsize); 
```

我的视频变得不稳定。

我附上了我编写函数的代码段。

```
/* start receiving images*/

while(1)
{ 

  /* get raw data */
  for (i = 0; i < imgsize; i += bytes) {
    if ((bytes = recv(sock, sockdata + i, imgsize - i, 0)) == -1) {
      quit("recv failed", 1);
    }
  }

  pthread_mutex_lock(&mutex);

  for (i = 0, k = 0; i < img->height; i++) {
    for (j = 0; j < img->width; j++) {
      ((uchar*)(img->imageData + i * img->widthStep))[j] = sockdata[k++];
    }
  }

  img->imageData = aes_decrypt(&de, img->imageData, &imgsize); 

  is_data_ready = 1;
  pthread_mutex_unlock(&mutex);

  /* have we terminated yet? */
  pthread_testcancel();

  /* no, take a rest for a while */
  usleep(1000);
} 
```

这是我的第一篇文章，抱歉我的英文和文章格式不好。

# iphone - Xcode 4：如何实现游戏中心成就？

> ID：12449179
> 
> 赞同：2
> 
> 时间：2012-09-16T17:43:01.787
> 
> 标签：iphone, ios5, xcode4, game-center, gamekit

我正在尝试在我的游戏中加入成就，但问题是当我使用 GKTapper Apple Docs 的示例尝试它们时，我没有获得任何成就。例如：第一个 Ach。点击按钮 100 次即可获得。但是在模拟器上尝试时，我没有获得这个成就。

代码：

[http://developer.apple.com/library/ios/#samplecode/GKTapper/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/GKTapper/Introduction/Intro.html)

从这里我复制了 AppSpecificValues.h、GameCenterManager.h 和 .m

然后我在我的 ViewController 中声明它们

我用它来检查进度：

```
- (void) checkAchievements
{
    NSString* identifier = NULL;
    double percentComplete = 0;
    switch(self.currentScore)
    {
        case 10:
        {
            identifier= kAchievement10Taps;
            percentComplete= 100.0;
            break;
        }
    }
    if(identifier!= NULL)
    {
        [self.gameCenterManager submitAchievement: identifier percentComplete:     percentComplete];
    }
} 
```

我终于在模拟器上尝试了，但正如我所说，成就没有进步。

我做错了什么？？

非常感谢！！

如果有用，我会在此处阅读如何执行此操作：

第 1 部分：http : [//mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-1/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-1/)

第 2 部分：http : [//mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-2/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk-game-center-achievements-and-leaderboards-part-2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:18:52.023

# php - 从逗号分隔的列名更新位置 X 的值

> ID：12449181
> 
> 赞同：0
> 
> 时间：2012-09-16T17:43:21.457
> 
> 标签：php, sql, sql-update

我有一个表格用于更新下表 LoationName= $locationName

```
+--------+---------------------+--------------+------+
|Id |LocationName|TaskComplete | TaskNotes           |
+--------+---------------------+--------------+------+
|001| NYC,FRA,UK |no,yes,no    |NULL,Task Completed-FRA,NULL
|002| NYC,FRA,UK |no,no,yes    |NULL,NULL,task-completed @ UK
|003| NYC,FRA,UK |no,no,yes    |NULL,Task-started-FRA,completed Mar 3rd 
```

如何使用与正确 locationName 对应的信息更新 task-complete 和 task-notes col？如果 NYC 更新其状态，则表应更新为

```
+--------+---------------------+--------------+------+
|Id |LocationName|TaskComplete | TaskNotes           |
+--------+---------------------+--------------+------+
|001| NYC,FRA,UK |yes,yes,no   |NYC NOTES,Task Completed-FRA,NULL
|002| NYC,FRA,UK |yes,no,yes   |NYC-Finished task2,NULL,task-completed @ UK
|003| NYC,FRA,UK |yes,no,yes   |Completed-Tuesday,Task-started(FRA),completed Mar 3rd 
```

我总共有 100 项任务必须由 25 个地点完成。下面的 UPDATE 语句可以，但在我们的场景中不起作用，因为它只是用单个值（即“yes”或“no”）更新 col。

```
UPDATE operations_checklist SET TaskComplete='$val' where TaskId IN($i) 
```

我在想我的解决方案是分解 TaskComplete 值，然后使用 array_replace 更新必要的值/位置。最好的解决方案是什么？

我最终可能会创建一个表格，其中包含 77 个用于 TaskName 的 cols、77 个用于 TaskNotes 的 cols、77 个 cols completeDate 等等......想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T17:52:47.890

由于 MySQL 中没有内置 SPLIT 函数，因此使用查询来执行此操作是不可接受的，您需要自己编写一个 FUNCTION 或编写一个很长的无用算法来使用内置函数来执行此类操作...

我强烈建议您使用 php 作为您自己所说的并爆炸您的数据，替换您想要的内容，然后将其内爆并更新您的记录...

**更新** 只是关于您的表结构的注释，您可以这样做来代替您当前的结构：

创建具有此结构的第二个表：

```
+----+----------+------------+
| FK | TaskType | TaskStatus |
+----+----------+------------+
| 1  | 1        | True
| 1  | 2        | False
| 2  | 1        | False 
```

该表将通过 FK 链接到您的主表，而不是在其中的字段中使用 ~70 逗号，在此使用 TaskType 1、2、...、70，并将 TaskStatus 设置为 true 或 false 表示是和否，缺少 FK 的 TaskType 也意味着这里没有 ...

# symfony - 连接 composer 来管理 symfony2 中的网络资产是个好主意吗？

> ID：12449182
> 
> 赞同：9
> 
> 时间：2012-09-16T17:43:22.627
> 
> 标签：symfony, symfony-2.1, composer-php

如您所知，在 Symfony2.1 中，php 包和包由 composer 管理，但将 web 资产的管理也连接起来可能是个好主意？我真的很想使用我用来更新 php 包的相同控制台命令来更新 Twitter Bootstrap、jQuery、jQueryUi、Underscore.js 和许多其他库。

这样做有什么严重的缺点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:07:12.897

好吧，这听起来是个好主意，但我认为这是不可能的：

1.  Composer 是为处理**PHP 依赖**项而创建的，而不是为处理前端依赖项而创建的，twitter 团队为前端依赖项创建了[Bower 。](http://twitter.github.com/bower/)
2.  结合这两个伟大的库是一项艰巨的任务：您需要创建自己的作曲家命令和配置文件。
3.  Bower 将所有内容都放在一个`components`目录中。这不是网络资产的正确目录，您需要更改它。据我所知，您无法在 Bower 配置中更改它，它几乎等于零。**更新**正如@xanido 所说，您可以使用从 Bower 0.3.0 开始的选项[配置输出目录。](https://github.com/twitter/bower/tree/v0.3.0#bower-configuration)`directory`

很好，您可以在 Symfony2 中使用 Bower（可能还有其他类似的程序）管理 Web 资产，但是将这两者结合起来并不是一个好习惯。单独使用 Bower 和 Composer 会很有用，尽管您会获得另一个 Web 资产目录。

# magento - Magento 产品在添加到购物车时使用自定义价格

> ID：12449191
> 
> 赞同：1
> 
> 时间：2012-09-16T17:44:57.930
> 
> 标签：magento, attributes, product, cart

**情况**

我的客户有一份包含数千种简单产品（车轮和轮胎）的 Magento 目录。其中一些车轮和轮胎可以作为一个包裹一起购买（4 个车轮和 4 个轮胎），在这种情况下，它们可以以较低的价格购买，理想情况下我希望将其设置为单独的价格属性。

但是，它们不能单独以这些降价购买。

我已经创建了一个自定义表单和控制器，用于使用标准价格将这些产品添加到购物车中，效果很好，但我需要让它使用每个单位降低的“包装价格”。

**我试过的**

*   我尝试过使用分级定价，但这不起作用，因为一旦有人自己购买了 4 个轮胎，他们就会支付套餐价格。

*   添加到购物车时，我尝试在产品上设置自定义价格，这很有效，但显然为一般购买的产品创建了该价格，因此不是一种选择。

**我需要的**

我需要知道是否有一种方法可以使用我的自定义表单为添加到购物车的产品创建折扣/自定义价格？我已经搜索了论坛，但我还没有找到解决方案。

如果需要，我不介意使用观察者，但我现在有点卡住了！我知道一旦进入购物车，产品就会直接从数据库中获取价格，所以我不知道是否必须对报价对象做些什么？

非常感谢任何帮助或建议。

# android - Android 在包中传递持久信息还是使用单例模式？

> ID：12449194
> 
> 赞同：5
> 
> 时间：2012-09-16T17:45:17.233
> 
> 标签：android, android-activity, singleton, android-lifecycle, android-bundle

只是想知道在活动之间传递信息、将其添加到捆绑包或使用单例类来存储和访问这些数据的更好做法是什么。我过去曾将两者用于各种 android 端项目，但我现在正在开发一个规模更大的 android 项目，因此更愿意从一开始就做事。

我的应用程序对用户进行身份验证，然后必须根据它的 id 进行各种查询。为了最大限度地减少活动之间的耦合，我认为只是将 id 添加到捆绑包中，然后让每个活动查询它需要的信息，这将是最好的选择；然而，为了提高响应能力，我倾向于使用单例类来存储持久性信息，以防止查询超出需要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T19:23:54.967

就个人而言，我会创建一个扩展`Application`来存储您的应用程序的状态并在不同的活动之间共享数据。`Application`充当整个应用程序的上下文，Android 保证在您的应用程序中始终只有一个实例。因此，它的工作方式类似于定义您自己的 Singleton，但使用`Application`将允许 Android 控制您共享数据的生命周期并基本上为您进行内存管理。

[这里有更多细节](https://stackoverflow.com/a/708317/1029225)。如果你沿着这条路走，你可以简单地将任何 getter/setter（或其他）方法添加到应用程序扩展中，以存储/检索数据并对其进行操作。`Bundle`尤其是后者在使用s 在活动之间来回传递时会变得非常难以管理（并保持一致） 。如果仅`Bundle`在活动流中相邻的一两个地方需要数据并且不需要在其*上*运行任何（复杂）操作，则仅使用 a。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:31:21.110

我唯一一次通过 bunlde 在活动之间传递数据是如果它是我暂时不需要访问的东西（即我只想在调用活动中使用一次的资源的 resID 等）。我还认为响应能力的差异非常小，因此不必担心。我建议单例方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T21:45:26.473

对您来说更好的方法是使用 SharedPreferences 来保留您需要保留和重用的 userId。当然你可以使用单例方法甚至Application类，但是应用程序被杀死后数据会丢失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T18:24:46.790

传递捆绑包是一项乏味的工作。您必须为活动中的每个更改传递一个包，以确保该值不会丢失，即使您没有在调用的活动中使用该值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-04T11:32:27.473

单例模式有一些不好的结果。例如：从主要活动中，您称为次要活动。电话打断了您的工作。结束电话后，Android 正试图将辅助活动显示在屏幕上。这是我的噩梦——许多用户抱怨异常——谷歌向我报告了我的单例中的 NULL 指针。所以你不仅要提供单例，而且单例中的所有数据也必须是单例的。这让事情变得非常复杂:(

# google-app-engine - BadArgumentError：带有游标的 _MultiQuery 需要 ndb 中的 __key__ 顺序

> ID：12449197
> 
> 赞同：9
> 
> 时间：2012-09-16T17:45:21.143
> 
> 标签：google-app-engine, google-cloud-datastore

我不明白这个错误是什么意思，显然，没有人在互联网上遇到过同样的错误

> BadArgumentError：带有游标的 _MultiQuery 需要`__key__`顺序

这发生在这里：

```
return SocialNotification.query().order(-SocialNotification.date).filter(SocialNotification.source_key.IN(nodes_list)).fetch_page(10) 
```

该属性`source_key`显然是一个键，`nodes_list`是先前检索到的实体键的列表。

我需要的是找到所有具有与列表中的一个键匹配`SocialNotifications`的字段的字段。`source_key`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-16T23:04:36.493

错误消息试图告诉您涉及 IN 和游标的查询必须按`__key__`（这是实体键的内部名称）排序。（这是必需的，以便可以正确合并结果并使其唯一。）在这种情况下，您必须将`.order()`调用替换为`.order(SocialNotification._key)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T20:31:29.843

当您过滤不等式并尝试获取页面时，似乎也会发生这种情况。（例如 `MyModel.query(MyModel.prop != 'value').fetch_page(...)`。这基本上意味着（除非我错过了什么）在使用不等式过滤器时你不能 fetch_page 因为一方面你需要排序，`MyModel.prop`但另一方面你需要它`MyModel._key`，这很难:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T03:00:36.543

我在这里找到了答案：[https ://developers.google.com/appengine/docs/python/ndb/queries#cursors](https://developers.google.com/appengine/docs/python/ndb/queries#cursors)

您可以将查询更改为：

`SocialNotification.query().order(-SocialNotification.date, SocialNotification.key).filter(SocialNotification.source_key.IN(nodes_list)).fetch_page(10)`

为了让它发挥作用。请注意，当 nodes_list 很大（1000 个实体）时，它似乎很慢（18 秒），至少在开发服务器上是这样。我在测试服务器上没有大量的测试数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-12T15:35:41.780

在没有组的情况下过滤时我遇到了同样的错误。每次我的过滤器返回多个结果时都会发生错误。

为了解决这个问题，我实际上不得不按键**添加**排序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-21T01:11:33.410

您需要您想要订购的房产和钥匙。

```
.order(-SocialNotification.date, SocialNotification.key) 
```

# php - 将 url slug 更改为驼峰式

> ID：12449214
> 
> 赞同：4
> 
> 时间：2012-09-16T17:47:43.493
> 
> 标签：php, regex

我在 PHP 中有以下字符串：

```
this-is_a-test 
```

我想将其更改为：

```
thisIsATest 
```

所以字符串可以包含任意数量的破折号或下划线。我需要一些将字符串更改为驼峰式字符串的正则表达式函数。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T17:57:05.157

使用[`preg_replace_callback`](http://php.net/manual/en/function.preg-replace-callback.php)：

```
$string = 'this-is_a-test';

function toUpper($matches) {
  return strtoupper($matches[1]);
}

echo preg_replace_callback('/[-_](.)/', 'toUpper', $string); // thisIsATest 
```

**[演示](http://ideone.com/4Iq5T)**。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-16T17:59:26.337

不，你不需要正则表达式。

*   `str_replace()`用空格替换标点符号。
*   `ucwords()`将每个单词的首字母大写。
*   `str_replace()`再次摆脱空间。

您可以使用正则表达式，但这不是必需的。

# .htaccess - 在重定向到其他页面时保留 url

> ID：12449216
> 
> 赞同：-2
> 
> 时间：2012-09-16T17:47:57.117
> 
> 标签：.htaccess, mod-rewrite

我想将一组特定的 Url 重定向回我网站的索引页面，但在浏览器地址栏中保留它们的 url。我将如何`mod_rewrite`在 htaccess 文件中实现这一目标？

当前使用的代码：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /
    # Custom rewrite below
    RewriteRule ^references/(.*) / [L]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule . /index.php [L]
</IfModule> 
```

请注意，这是一个 WP 安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:12:18.407

把它放在你文档根目录的 htaccess 文件中，最好是上面你可能已经有的规则：

```
RewriteEngine On

# for each of these "urls" do this
RewriteRule ^/?url_you_want_to_point_to_index / [L] 
```

假设您没有查询字符串参数（a 之后的名称/值对`?`），这应该就是您所需要的。

# php - Symfony2：如何正确包含资产与 Twig 模板继承？

> ID：12449218
> 
> 赞同：7
> 
> 时间：2012-09-16T17:48:04.520
> 
> 标签：php, symfony, twig, assets, symfony-2.1

我目前正在使用 Symfony 2.1.0 开发一个 Web 应用程序。

我已经通读了本书的[模板章节](http://symfony.com/doc/current/book/templating.html)，并试图在我的网页中包含资产（现在，它只是一个样式表）。

我正在使用书中提到[的三级继承系统](http://symfony.com/doc/current/book/templating.html#three-level-inheritance)，我的应用程序结构目前如下所示：

*   **应用程序/资源/视图/**
    *   *base.html.twig：*基本模板，包含*标题*、*样式表*和*正文*块。
*   **src/我的/PageBundle/资源/视图**
    *   *layout.html.twig：*布局模板（扩展基本模板），将主样式表附加到*样式表*块，覆盖*正文*块，包括*navigation.html.twig*和定义*内容*块
    *   *layout-admin.html.twig：*和上面一样，但是包括*navigation-admin.html.twig*
    *   **src/My/PageBundle/Resources/views/Main**
        *   标准模板，扩展布局模板并覆盖其*内容*块
    *   **src/我的/PageBundle/资源/视图/管理**
        *   管理模板。与上述相同，但扩展了管理布局模板。
*   **src/我的/PageBundle/资源/公共/css**
    *   *main.css：*主样式表

如您所见，我已将样式表放入我的包中。我不知道这是否是好习惯。

现在，问题是，在 layout.html 我添加了这个：

```
{% block stylesheets %}
    {{ parent() }}

    <link rel="stylesheet" type="text/css" href="{{ asset('css/main.css)' }}" />
{% endblock %} 
```

但`asset('css/main.css')`只是链接到`/css/main.css`，而`./app/console assets:install`将资产安装在`web/bundles/mypagebundle/`. 我不喜欢这样，我的包名称会公开可见（这可能会让用户怀疑我正在使用 Symfony，而且我喜欢保留我网页的内部结构，嗯，内部的）。是否可以更改`assets:install`安装资产的目录？在我看来，手动安装 web/.js 中的资产似乎很乏味。

我也在考虑使用 Assetic 进行资产管理，因为我个人喜欢自动缩小我的脚本/样式表并将它们全部存储在一个文件中的可能性。但是，我听说如果您在不同级别包含样式表，这是不可能的，即它不适用于三级继承系统。有可能解决这个问题吗？另外，使用 Assetic 可以让我对公众隐藏我的捆绑包名称吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T19:21:31.073

使用资产将解决您的所有问题。

> 我听说如果您在不同级别包含样式表，这是不可能的，即它不适用于三级继承系统

你可以，但它会为每个级别生成一个 css 文件（实际上就像资产（）一样）。

例子：

布局：

```
{% block stylesheets %}
    {{ parent() }}
    {% stylesheets 'main.css' %}
        <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %} 
```

子模板：

```
{% block stylesheets %}
    {{ parent() }}
    {% stylesheets 'sub.css' %}
        <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %} 
```

结果：

```
<link rel="stylesheet" type="text/css" href="..." />
<link rel="stylesheet" type="text/css" href="..." /> 
```

或者子模板可以完全覆盖样式表块，以便只生成一个样式表（但它不那么干）：

```
{% block stylesheets %}
    {% stylesheets 'main.css' 'sub.css' %}
        <link rel="stylesheet" type="text/css" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %} 
```

结果（生产/非调试）：

```
<link rel="stylesheet" type="text/css" href="..." /> 
```

# php - 从 mySQL 获取事件。PHP 日历

> ID：12449220
> 
> 赞同：0
> 
> 时间：2012-09-16T17:48:09.707
> 
> 标签：php, mysql, calendar

我试图让一个日历脚本连接到 mySQL 数据库。该脚本是一个简单的日历选择器，我正在尝试连接到数据库，以便它可以显示事件。我设法让我在数据库中显示的事件在该月的所有日子里都显示出来，但我希望它只在设置的那一天显示为链接。我还想添加一个用于添加和删除事件的功能，但首先要做的是。

我的数据库如下所示：

```
database: calendar

table: calendar_events
row1: event_title
row2: event_shortdesc
row3: event_start 
```

这是我的整个脚本代码，日历功能工作正常。

```
<?php include("includes/header.php")?>
<?php require_once("includes/db_connection.php")?>
<?php include("includes/functions.php")?>

<?php

if (!isset($_REQUEST["month"])) $_REQUEST["month"] = date("m"); 
if (!isset($_REQUEST["year"])) $_REQUEST["year"] = date("Y"); 

$cMonth = $_REQUEST["month"]; 
$cYear = $_REQUEST["year"]; 

$prev_year = $cYear; 
$next_year = $cYear; 
$prev_month = $cMonth-1; 
$next_month = $cMonth+1; 

if ($prev_month == 0) {
    $prev_month = 12; 
    $prev_year = $cYear-1; 
}

if ($next_month == 13) {
    $next_month = 1;
    $next_year = $cYear+1;  
}

$monthNames = Array("Januar", "Februar", "Mars", "April", "Mai", "Juni", "Juli",
"August", "September", "Oktober", "November", "Desember"); 

?>

<div id="kalendercontainer">

<a id="prev" href="<?php echo $_SERVER["PHP_SELF"] . "?month=". $prev_month . "&year=" . $prev_year; ?>">Previous</a>

<span id="monthname"><?php echo $monthNames[$cMonth-1].' '.$cYear; ?></span>

<a id="next" href="<?php echo $_SERVER["PHP_SELF"] . "?month=". $next_month . "&year=" . $next_year; ?>">Next</a> 

<table id="kalender">

<tr>
<td><strong>Man</strong></td>
<td><strong>Tir</strong></td>
<td><strong>Ons</strong></td>
<td><strong>Tor</strong></td>
<td><strong>Fre</strong></td>
<td><strong>Lør</strong></td>
<td><strong>Søn</strong></td>
</tr>

<?php
$timestamp = mktime(0,0,0,$cMonth,1,$cYear);
$maxday = date("t",$timestamp);
$thismonth = getdate ($timestamp);
$startday = $thismonth['wday']-1;

//Get calendar events

$get_cal_events = mysql_query("SELECT * FROM calendar_events WHERE event_start = '{$startday}'"); 

$rows = mysql_fetch_array($get_cal_events); 

$event = $rows['event_title'] . $rows['event_shortdesc']; 

//Draw calendar

for ($i=0; $i<($maxday+$startday); $i++) {          

    if(($i % 7) == 0 ) echo "<tr>";
    if($i < $startday) echo "<td></td>";

    else 

    echo "<td>" . ($event) . ($i - $startday + 1) . "</td>";
    if(($i % 7) == 6 ) echo "</tr>";
}                   

?>
</table>
<p></p>
</div> 

<?php require("includes/footer.php")?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T06:05:26.900

您需要在 echo 之前检查单元格日和事件日`$event`。`//Get calendar events`对和进行以下 2 处更改`//Draw Calendar`。更改位于`//ADD THIS CODE`.

这假定这`event_start`是一个日期（即 2012-09-17）。

```
//Get calendar events

$get_cal_events = mysql_query("SELECT * FROM calendar_events WHERE event_start = '{$startday}'"); 

$rows = mysql_fetch_array($get_cal_events); 

$event = $rows['event_title'] . $rows['event_shortdesc']; 

//ADD THIS CODE
// Gets the event day. Assuming the event_start is a mysql date (ie. 2012-09-17) 
$event_day = date("j", strtotime($rows['event_start']));

//Draw calendar

for ($i=0; $i<($maxday+$startday); $i++) {          

if(($i % 7) == 0 ) echo "<tr>";
if($i < $startday) echo "<td></td>";

else 

echo "<td>";
    //ADD THIS CODE
    // Checks to see if the event day is the same as the cell day
    if ($event_day == ($i - $startday + 1)) echo $event;
echo ($i - $startday + 1) . "</td>";
if(($i % 7) == 6 ) echo "</tr>";
} 
```

# ruby - Pony Mail Gem 引发断管错误

> ID：12449222
> 
> 赞同：0
> 
> 时间：2012-09-16T17:48:23.097
> 
> 标签：ruby, email, sinatra, pony

因此，我正在使用 sinatra，并且出于基本验证原因，我正在尝试从该应用程序发送电子邮件。我在文档中四处寻找，找到了宝石小马，它似乎就在我的小巷里。在我的 app.rb 文件中，我有

```
require 'rubygems'
require 'sinatra'
require 'pony'
require 'mail'

post '/signup' do
  Pony.mail  :to => "myself@me.com", :body => "User Sign Up!", :subject => "score"
end 
```

但我最终遇到了一个损坏的管道错误。见下文。我进入了 sendmail.rb，但对其进行任何更改，我都会遇到不同的错误。我想其他一些人也遇到过类似的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T00:30:39.113

您可以通过 IRB 手动使用 Pony 发送邮件吗？

```
$ irb
>> require 'rubygems'
>> require 'pony'
>> mail = Pony.mail :to => "myself@me.com", :body => "User sign up!", :subject => "score" 
```

您可能需要添加更多选项（例如 SMTP 服务器）。有关配置，请参见[https://github.com/benprew/pony](https://github.com/benprew/pony)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T21:25:24.530

如果你发现自己和我有同样的问题，那很容易解决。信息[在这里](https://apple.stackexchange.com/questions/54051/sendmail-error-on-os-x-mountain-lion)

基本上你只需要在终端中运行这三行

```
sudo mkdir -p /Library/Server/Mail/Data/spool
sudo /usr/sbin/postfix set-permissions
sudo /usr/sbin/postfix start 
```

[这个答案是在https://apple.stackexchange.com/questions/54051/sendmail-error-on-os-x-mountain-lion](https://apple.stackexchange.com/questions/54051/sendmail-error-on-os-x-mountain-lion)给我的

# php - xmlhttp.open() 用于外部 php 文件

> ID：12449223
> 
> 赞同：2
> 
> 时间：2012-09-16T17:48:28.603
> 
> 标签：php, javascript, ajax

我有线

```
xmlhttp.open("GET","file.php?id=4",true); 
```

这不起作用，因为 file.php 不在同一个文件夹中，而是在公众不可见的不同私人文件夹中。

有没有办法使用打开功能打开不同文件夹中的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T17:51:01.253

这是根本不可能的。

如果要向它发送 HTTP 请求，它必须通过 HTTP 对公众可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T17:54:01.100

您只能从公共网络空间中请求文件。要访问公共网络空间之外的文件，您需要公共网络空间中的一个脚本，该脚本可以从私人文件夹中获取内容，例如

```
<?php // file.php in the public webspace

    $allowedFiles = array(
        1 => '/path/to/private/space/on/server/file1.txt',
        2 => '/path/to/private/space/on/server/file2.txt',
        3 => '/path/to/private/space/on/server/file3.txt',
        4 => '/path/to/private/space/on/server/file4.txt',
    );

    $id = filter_var($_GET['id'], FILTER_VALIDATE_INT);

    if (isset($allowedFiles[$id])) {
        readfile($allowedFiles[$id]);
    } 
```

现在当你做

```
xmlhttp.open("GET","file.php?id=4",true); 
```

该脚本将发送的内容

```
/path/to/private/space/on/server/file4.txt 
```

给客户。

### 编辑一些评论：

*   注意`readfile`不会执行文件内容。如果您需要发送 PHP 脚本的结果，则必须`include`使用`readfile`. 详情请参阅手册。

*   上述方法实际上与当今使用的大多数框架相同。您有一个脚本充当应用程序的网关（有点像前端控制器模式）。该脚本接受对您的应用程序的任何和所有请求（想想 mod_rewrite），并且是唯一可公开访问的 PHP 文件。它将引导您的应用程序，然后从 URL（或您认为合适的任何内容）确定应该实例化和调用私有空间中的哪个文件（通常是使用 MVC 时的控制器）。

# android - 将纹理 LibGDX 居中

> ID：12449229
> 
> 赞同：3
> 
> 时间：2012-09-16T17:50:16.270
> 
> 标签：android, libgdx

我试图在 LibGDX 中居中 256px X 256px 图像。当我运行我正在使用的代码时，它会在窗口的右上角呈现图像。对于相机的高度和宽度，我使用`Gdx.graphics.getHeight();`和`Gdx.graphcis.getWidth();`。我将相机位置设置为相机的宽度除以二，高度除以二......这应该把它放在屏幕的中间，对吧？当我绘制纹理时，我将它的位置设置为相机的宽度和高度除以二 - 所以它是居中的......或者我认为。为什么图像没有绘制在屏幕中央，是我不明白的地方吗？

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T13:23:41.980

听起来好像你的相机没问题。如果设置纹理位置，则设置该纹理左下角的位置。它不是居中的。因此，如果将它设置为屏幕中心的坐标，它的延伸将覆盖该点右侧和顶部的空间。要将其居中，您需要从 x 中减去纹理宽度的一半，从 y 坐标中减去纹理高度的一半。这些方面的东西：

```
image.setPosition(Gdx.graphics.getWidth()/2 - image.getWidth()/2, 
Gdx.graphics.getHeight()/2 - image.getHeight()/2); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-17T13:22:44.457

您应该在相机位置绘制纹理 - 纹理尺寸的一半......

例如：

```
class PartialGame extends Game {
    int w = 0;
    int h = 0;
    int tw = 0;
    int th = 0;
    OrthographicCamera camera = null;
    Texture texture = null;
    SpriteBatch batch = null;

    public void create() {
        w = Gdx.graphics.getWidth();
        h = Gdx.graphics.getheight();
        camera = new OrthographicCamera(w, h);
        camera.position.set(w / 2, h / 2, 0); // Change the height --> h
        camera.update();
        texture = new Texture(Gdx.files.internal("data/texture.png"));
        tw = texture.getwidth();
        th = texture.getHeight();
        batch = new SpriteBatch();
    }

    public void render() {
        batch.begin();
        batch.draw(texture, camera.position.x - (tw / 2), camera.position.y - (th / 2));
        batch.end();
    }
} 
```

# git - 移动远程分支

> ID：12449230
> 
> 赞同：4
> 
> 时间：2012-09-16T17:50:28.780
> 
> 标签：git, version-control

在[重写提交树以重命名作者并更改电子邮件](https://stackoverflow.com/questions/750172/how-do-i-change-the-author-of-a-commit-in-git)后，我的本地仓库和远程源不同步。我是唯一的开发人员，并且想将我的本地 repo 推送到 origin，将 origin/master 更新到我的本地 master 分支。这是我没有成功的尝试：

```
LibGuest08@LBP-NW0345QZMH1 /e/devel/src/java/bbct (swing.0.5.2)
$ git push
Password:
To ssh://codeguru@git.code.sf.net/p/bbct/code
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'ssh://codeguru@git.code.sf.net/p/bbct/code'
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. If you did not intend to push that branch, you may want to
hint: specify branches to push or set the 'push.default' configuration
hint: variable to 'current' or 'upstream' to push only the current branch.

LibGuest08@LBP-NW0345QZMH1 /e/devel/src/java/bbct (swing.0.5.2)
$ git push origin master:master
Password:
To ssh://codeguru@git.code.sf.net/p/bbct/code
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'ssh://codeguru@git.code.sf.net/p/bbct/code'
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. Check out this branch and merge the remote changes
hint: (e.g. 'git pull') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

LibGuest08@LBP-NW0345QZMH1 /e/devel/src/java/bbct (swing.0.5.2)
$ git push -f origin master:master
Password:
Counting objects: 464, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (148/148), done.
Writing objects: 100% (452/452), 470.65 KiB, done.
Total 452 (delta 268), reused 417 (delta 247)
remote: error: denying non-fast-forward refs/heads/master (you should pull first)
To ssh://codeguru@git.code.sf.net/p/bbct/code
 ! [remote rejected] master -> master (non-fast-forward)
error: failed to push some refs to 'ssh://codeguru@git.code.sf.net/p/bbct/code'

LibGuest08@LBP-NW0345QZMH1 /e/devel/src/java/bbct (swing.0.5.2)
$ 
```

我还按照建议提取了来源，但这会与所有提交合并，其中一些提交的作者姓名和电子邮件地址错误。如何将远程原始存储库与本地存储库同步并删除所有包含错误元数据的提交？

**更新：**

我在 Sourceforge 存储库中编辑了配置文件。我仍然收到一条错误消息，但我注意到另一行：

```
lib_lab_ref08@LBP-REF87XVMDP1 /e/devel/src/java/bbct (master)
$ git push -f
Password:
Counting objects: 464, done.
Delta compression using up to 2 threads.
Compressing objects: 100% (148/148), done.
Writing objects: 100% (452/452), 470.65 KiB, done.
Total 452 (delta 268), reused 417 (delta 247)
fatal: Unable to create temporary file: Permission denied
error: unpack failed: index-pack abnormal exit
To ssh://codeguru@git.code.sf.net/p/bbct/code
 ! [remote rejected] master -> master (n/a (unpacker error))
error: failed to push some refs to 'ssh://codeguru@git.code.sf.net/p/bbct/code' 
```

做什么

```
fatal: Unable to create temporary file: Permission denied
error: unpack failed: index-pack abnormal exit 
```

意思是？更重要的是我该怎么做才能解决这个问题？

**想了想：**

我正在使用公共计算机。我最近压缩了我的 repo 数据库，我猜我没有权限写入 git 在推送期间解压缩压缩的 repo 对象的临时文件夹。我将在没有这些安全限制的计算机上尝试这个，看看会发生什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T17:58:34.757

远程存储库上有一个设置可以防止（这是一件好事）非快进推送，这就是您正在执行的推送类型。

正如您指出的那样，您可以安全地进行非 ff 推送，因为您是唯一使用它的人，因此请参阅[此博客文章](http://pete.akeo.ie/2011/02/denying-non-fast-forward-and.html)以了解如何更改它：

1.  登录 ssh shell`ssh -t USER,PROJECT@shell.sourceforge.net create`
2.  导航到 git repo: cd to `/home/git/p/<project_name>/code.git`(填写正确的项目名称)
3.  编辑配置文件`vi`并设置`denyNonFastforwards`为`false`

# java - 将项目的所有库和文件放在一个文件夹中

> ID：12449237
> 
> 赞同：2
> 
> 时间：2012-09-16T17:51:07.033
> 
> 标签：java, maven

我在我的 java 构建过程中使用 maven。以下是创建具有所有依赖项的单个 jar 的代码片段。为了减少对构建的微小更改的数据传输，我想将所有项目文件（包括依赖项）放在文件夹 target/build 中。我计划将该文件夹与运行该应用程序的远程计算机同步，并使用以下命令运行该应用程序：

```
java -cp target/build/* <classname> 
```

如何修改此代码段以实现此目的？我已阅读此处的文档，但不知道如何将修复拼凑在一起：

*   [http://maven.apache.org/plugins/maven-assembly-plugin/](http://maven.apache.org/plugins/maven-assembly-plugin/)
*   [http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html](http://maven.apache.org/plugins/maven-assembly-plugin/assembly.html)
*   [http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html)

    ```
     <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.3</version>
            <configuration>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
            </configuration>
            <executions>
                <execution>
                    <id>make-assembly</id>  
                    <phase>package</phase>  
                    <goals>
                        <goal>single</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:12:18.893

您是否在询问如何让 maven 在构建时将依赖项复制到目标文件夹？

我想你想要 Maven 依赖插件。它将项目的依赖项复制到您指定的输出文件夹。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.3</version>
            <executions>
                <execution>
                    <id>install</id>
                    <phase>install</phase>
                    <goals>
                        <goal>copy-dependencies</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>${targetDirectory}</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

听起来您可能还需要 maven jar 插件来告诉它将您的 jar 打包到哪里。

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.3.1</version>
            <configuration>
                <outputDirectory>${dir}</outputDirectory>
            </configuration>
        </plugin> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:12:36.843

使用maven[依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/)

它有 gole: [`copy-dependencies`](http://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)。这应该做你想要的。

示例（取自[文档](http://maven.apache.org/plugins/maven-dependency-plugin/examples/copying-project-dependencies.html)）

```
 <project>
    [...]
    <build>
      <plugins>
        <plugin>
          <groupId>org.apache.maven.plugins</groupId>
          <artifactId>maven-dependency-plugin</artifactId>
          <version>2.5.1</version>
          <executions>
            <execution>
              <id>copy-dependencies</id>
              <phase>package</phase>
              <goals>
                <goal>copy-dependencies</goal>
              </goals>
              <configuration>
                <outputDirectory>${project.build.directory}/alternateLocation</outputDirectory>
                <overWriteReleases>false</overWriteReleases>
                <overWriteSnapshots>false</overWriteSnapshots>
                <overWriteIfNewer>true</overWriteIfNewer>
              </configuration>
            </execution>
          </executions>
        </plugin>
      </plugins>
  </build>
   [...]
</project> 
```

# java - 识别使用 Java 的人说的字母

> ID：12449242
> 
> 赞同：11
> 
> 时间：2012-09-16T17:52:06.083
> 
> 标签：java, android, speech, speech-to-text

我需要识别用户在设备麦克风中说出的字母。该设备可以是Android驱动的手机。

例如，当用户说“ **R** ”时，它应该给我“R”而不是“Are”。

如何在 Java 中完成这种口语字母识别？我正在寻找可以在代码中轻松表达的想法。

## 编辑

根据@David Hilditch 的一项建议，我想出了下面这张人物地图及其发音词。

```
A - ye,a,yay 
B - be, bee, 
C - see, sea, 
D - thee, dee, de
E - eh, ee, 
F - eff, F
G - jee, 
H - edge, hedge, hatch, itch
I - Aye, eye, I
J - je, jay, joy
K - kay, ke, 
L - el, yell, hell
M - am, yam, em
N - yen, en,
O - oh, vow, waw
P - pee, pay, pie
Q - queue,
R - are, err, year
S - yes, ass, S
T - tee, tea, 
U - you, U
V - we, wee,
W - double you, 
X - axe
Y - why
Z - zed, zee, jed 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T17:58:35.533

您可以使用 Google 的 API 从语音中获取文本（快速查看[http://developer.android.com/reference/android/speech/RecognizerIntent.html](http://developer.android.com/reference/android/speech/RecognizerIntent.html)）。

然后，如果您想推断语言（然后是字母表），您可以使用基于 n-gram 的名为“语言检测器”的开放项目：

[http://code.google.com/p/language-detection/](http://code.google.com/p/language-detection/)

您可以使用“字典巧合”和您可以从文本中获得的其他功能来组合它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-25T09:28:58.313

我认为一个不错的选择是遵循@rmunoz 发布的指导方针。但是，如果您不想使用外部活动，那么恐怕您必须自己编写文本识别代码。我也不确定，android 中字母的语音识别有多好。我想背后的机制是受过语言训练的。

我认为这最好用`Neural Networks`. 首先，您必须收集大量不同人说字母的样本（对于您收到的每个字母，让我们说一个人的 2 个示例）。您还将表示该人所说的那封信。所以假设以这种方式，你从一个人那里得到 52 个例子，你有 10 个人参与。现在您获得了 520 个口语字母示例。之后，您必须从提供的示例中构建您的神经网络。一个很好的教程在这里：[https](https://www.coursera.org/course/ml) ://www.coursera.org/course/ml 。然后你只需要记住这个神经网络（神经网络中的参数），并将其用于分类。这个人在他们的麦克风里说话，神经网络用一个字母对新获得的例子进行分类。

只有一个问题。如何表示用户输入的声音，以便训练神经网络，然后对这个声音进行分类。您必须计算输入声音的一些频谱特征。您可以在[http://www.cslu.ogi.edu/tutordemos/nnet_recog/recog.html](http://www.cslu.ogi.edu/tutordemos/nnet_recog/recog.html)中阅读相关内容。但我强烈建议您在深入了解下一个链接之前查看第一个链接（如果您对神经网络一无所知）。

其他答案有一个假设，即您已经可以识别诸如“是”之类的单词。但根据我对问题的理解，情况并非如此。因此，问题中发布的映射对您没有帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-25T01:22:39.170

如果您的 Java 程序在有人说“R”时成功识别出“Are”这个词，那么为什么不列举 26 个字母的词并翻译它们呢？

例如

```
Ay, Aye, Ai -> A
Bee, Be -> B
Sea, See -> C
Dee, Deer, Dear -> D 
```

是不是太简单了？似乎它对我有用，你可以使用任何你喜欢的语音识别软件。

您的优势是这里的上下文范围非常有限（字母表），因此配置它只需不到一个小时。

您可以记录任何未成功翻译的单词并手动收听以改进您的枚举。

话虽如此，我确信大多数体面的语音识别软件都可以选择将系统限制为识别字母和数字而不是单词，但如果没有，请尝试我的解决方案 - 它会起作用。

要构建您的枚举，只需与您的系统对话并在您背诵字母表时将其翻译。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-22T02:30:18.850

我来自 IVR 的 Speech Rec 背景，但您可以使用自定义语言语法来定义什么是有效话语。

我相信您可以使用[http://cmusphinx.sourceforge.net/wiki/](http://cmusphinx.sourceforge.net/wiki/) 或 [http://jvoicexml.sourceforge.net/](http://jvoicexml.sourceforge.net/)之类的东西来执行实际识别。

您将加载的语法可能如下所示：

```
#JSGF V1.0;

grammar alphabet;

public <alphabet> = a | b| c |d | e;  //etc..... 
```

它在已经是语言一部分的语法中识别字母有点多余 - 但它是一种限制识别器仅返回您想要处理的话语的简单方法。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-25T05:12:47.027

大卫是对的。由于您的输出集是有限的，您可以选择手动编码规则，例如 Are->R。

问题在于听起来相似的字母。例如，该人可能说 N，但您的系统将其识别为 M。您可以查看语言建模来预测可能的字符序列。例如，如果您的用户之前说“I”，之后说“G”，则双向语言模型将给予“N”比“M”更高的概率。

基于字典的方法也可以正常工作。如果解释字母导致字典中的一个词与字典中的一个词不同，例如：“NOSE”与“MOSE”，请选择有效的一个。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-25T15:04:26.990

Any Speech-to-text platform should work as needed. [This post](https://stackoverflow.com/questions/9073856/android-speech-to-text-speech-recognition) discusses some of the available options, which include the [built-in speech-to-text](https://stackoverflow.com/questions/2080401/is-there-a-speech-to-text-api-by-google), an open-source option called [CMUSphinx](http://cmusphinx.sourceforge.net), and a free, closed source [option](http://www.microsoft.com/en-us/download/details.aspx?id=27226) from Microsoft.

# android - 从accountmanager android中删除帐户时自定义对话框

> ID：12449247
> 
> 赞同：5
> 
> 时间：2012-09-16T17:52:51.207
> 
> 标签：android, accountmanager, android-account

我想阻止用户从我的应用程序的 Android 帐户中删除该帐户。Android`AbstractAccountAuthenticator`提供了一种方法`getAccountRemovalAllowed`，我可以使用它来防止删除帐户。到目前为止，一切都很好。

但是当我尝试从设置中删除帐户时，对话框很吓人。说你只能通过恢复出厂设置来删除。我想自定义它说您应该卸载该应用程序以删除该帐户。有没有办法做到这一点？

我尝试提供`KEY_INTENT`自己的活动，但没有效果。

```
public Bundle getAccountRemovalAllowed(AccountAuthenticatorResponse response,
        Account account) throws NetworkErrorException {
    // Cannot remove the account.
    final Bundle result = new Bundle();
            Intent i = new Intent(mContext, MyDialog.class);
    result.putParcelable(AccountManager.KEY_INTENT, i);
    return result;
} 
```

# vim - Vim：用于删除颜色方案背景的 Autocmd 无法运行

> ID：12449248
> 
> 赞同：0
> 
> 时间：2012-09-16T17:53:02.433
> 
> 标签：vim, terminal, autocmd

在使用终端窗口时，我试图覆盖所有颜色方案的背景——主要是因为我发现透明的终端窗口非常令人兴奋。我所有最大的研究努力都指向定义一个自动命令，该命令将在每次更改颜色方案时运行。目前该命令如下所示：

```
autocmd ColorScheme * so rmbackground.vim 
```

rmbackground.vim 是我自己制作的一个文件，它基本上列出了一堆 hilightcommands，如下所示：

```
hi Normal ctermbg=NONE
hi Comment ctermbg=NONE
... 
```

现在奇怪的是，如果我手动获取 rmbackground.vim 文件，一切正常，但自动命令不会按预期运行。如果我将单个 hilight 命令指定为 autocmd 而不是获取整个 rmbackground 文件，它也不起作用。

我对整个问题感到非常困惑。下面是我的完整 vimrc 和 rmbackground.vim，以防有我不知道的冲突。（由于我刚刚开始构建我的配置，该文件目前很糟糕，但我希望你能原谅我;-)）

.vimrc

```
runtime bundle/vim-pathogen/autoload/pathogen.vim
call pathogen#infect()

"Turn on syntax
if has("syntax")
  syntax on
endif

"Jump to last edited line
if has("autocmd")
  au BufReadPost * if line("'\"") > 1 && line("'\"") <= line("$") | exe "normal! g'\"" | endif
endif

"Indent correctly
if has("autocmd")
  filetype plugin indent on
endif

set t_Co=256 "use 256 colors
let g:CSApprox_attr_map = { 'bold' : 'bold', 'italic' : '', 'sp' : '' }

set background=light
colorscheme twilight

set showcmd     " Show (partial) command in status line.
set showmatch       " Show matching brackets.
set ignorecase      " Do case insensitive matching
set smartcase       " Do smart case matching
set hlsearch        " Highlight search-terms
set incsearch       " Incremental search
set autowrite       " Automatically save before commands like :next and :make
set hidden             " Hide buffers when they are abandoned
set mouse=a     " Enable mouse usage (all modes)

set history=1000

runtime macros/matchit.vim

set wildmenu
set wildmode=list:longest

set title
set scrolloff=3
set backupdir=~/.vim/tmp,~/.tmp,/var/tmp,/tmp
set directory=~/.vim/tmp,~/.tmp,/var/tmp,/tmp
set ruler

set backspace=indent,eol,start

set tabstop=4
set softtabstop=4
set shiftwidth=4
set shiftround "Round the indention nicely with other indents

set visualbell

"!autocmd
autocmd ColorScheme * so rmbackground.vim 
```

rmbackground.vim

```
"Remove background set by colorscheme
hi Normal ctermbg=NONE
hi Comment ctermbg=NONE
hi Constant ctermbg=NONE
hi Special ctermbg=NONE
hi Identifier ctermbg=NONE
hi Statement ctermbg=NONE
hi PreProc ctermbg=NONE
hi Type ctermbg=NONE
hi Underlined ctermbg=NONE
hi Todo ctermbg=NONE
hi String ctermbg=NONE
hi Function ctermbg=NONE
hi Conditional ctermbg=NONE
hi Repeat ctermbg=NONE
hi Operator ctermbg=NONE
hi Structure ctermbg=NONE 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T18:50:08.853

中的命令`.vimrc`按顺序执行。您是第一个设置`:colorscheme`，但`:autocmd`仅在最后出现。

要么将 autocmd 移到`:colorscheme`命令之前（以便它已经应用于该命令），要么显式地`:source rmbackground.vim`在`:colorscheme`命令之后，并且`:autocmd`只有以后的动态更改。

# java - 如何在 Maven 项目中使用 -Xlint:unchecked 进行编译？

> ID：12449251
> 
> 赞同：69
> 
> 时间：2012-09-16T17:54:01.693
> 
> 标签：java, maven, netbeans

在 NetBeans 7.2 中，我无法找到如何在 Maven 项目中使用 -Xlint:unchecked 进行编译。在 Ant 项目下，您可以通过转到 Project Properties -> Compiling 来更改编译器标志，但 Maven 项目似乎没有任何此类选项。

有什么方法可以配置 IDE 以使用 Maven 使用此类标志进行编译？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-09-16T18:03:48.013

我猜你可以在你的 pom.xml 中设置编译器参数。请参考这个[http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html](http://maven.apache.org/plugins/maven-compiler-plugin/examples/pass-compiler-arguments.html)

```
 <compilerArgument>-Xlint:unchecked</compilerArgument> 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2016-01-10T14:51:47.727

我想详细说明@Nishant 的答案。`compilerArgument`标签需要进入标签内部`plugin/configuration`。这是一个完整的例子：

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>3.3</version>
    <configuration>
      <source>1.8</source>
      <target>1.8</target>
      <testSource>1.8</testSource>
      <testTarget>1.8</testTarget>
      <compilerArgument>-Xlint:unchecked</compilerArgument>
    </configuration>
  </plugin>
</plugins> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-23T23:39:51.103

这对我有用...

```
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.8.1</version>
        <configuration>
            <source>11</source>
            <target>11</target>
            <compilerArguments>
                <endorseddirs>${endorsed.dir}</endorseddirs>
            </compilerArguments>
            <compilerArgs>
                <arg>-Xlint:unchecked</arg>   <-------this right here ---->
            </compilerArgs>
        </configuration>
    </plugin>
</plugins> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2016-09-01T07:01:28.293

pom文件信息很准确。我遇到了在 Jenkins 中构建别人的 Maven 项目并且无法访问 pom 文件存储库的额外挑战。

我创建了一个预构建步骤，以便在从 git 下载后将编译器参数插入 pom 文件，例如

```
sed -i 's|/target> *$|/target>\n<compilerArgument>\n-Xlint:deprecation\n</compilerArgument>|' $WORKSPACE/pom.xml 
```

# jquery - 修改 jquery 自动建议脚本以使用 python

> ID：12449254
> 
> 赞同：0
> 
> 时间：2012-09-16T17:54:18.873
> 
> 标签：jquery, python, autosuggest

我在修改自动建议 jquery 脚本时遇到问题，我发现我正在尝试临时添加到我正在制作的 Web 应用程序中，在这个特定示例中，将从修改后的 wordnet 词典中选择英文单词。

这是演示：

```
http://documentcloud.github.com/visualsearch/#demo 
```

现在这里是要修改并包含所有数据的代码：

```
<script type="text/javascript" charset="utf-8">
  $(document).ready(function() {
    window.visualSearch = VS.init({
      container  : $('#search_box_container'),
      query      : 'country: "South Africa" account: 5-samuel "U.S. State": California',
      // query      : '',
      unquotable : [
        'text',
        'account',
        'filter',
        'access'
      ],
      callbacks  : {
        search : function(query, searchCollection) {
          var $query = $('#search_query');
          $query.stop().animate({opacity : 1}, {duration: 300, queue: false});
          $query.html('<span class="raquo">&raquo;</span> You searched for: <b>' + searchCollection.serialize() + '</b>');
          clearTimeout(window.queryHideDelay);
          window.queryHideDelay = setTimeout(function() {
            $query.animate({
              opacity : 0
            }, {
              duration: 1000,
              queue: false
            });
          }, 2000);
        },
        valueMatches : function(category, searchTerm, callback) {
          switch (category) {
          case 'account':
              callback([
                { value: '1-amanda', label: 'Amanda' },
                { value: '2-aron',   label: 'Aron' },
                { value: '3-eric',   label: 'Eric' },
                { value: '4-jeremy', label: 'Jeremy' },
                { value: '5-samuel', label: 'Samuel' },
                { value: '6-scott',  label: 'Scott' }
              ]);
              break;
            case 'filter':
              callback(['published', 'unpublished', 'draft']);
              break;
            case 'access':
              callback(['public', 'private', 'protected']);
              break;
            case 'title':
              callback([
                'Pentagon Papers',
                'CoffeeScript Manual',
                'Laboratory for Object Oriented Thinking',
                'A Repository Grows in Brooklyn'
              ]);
              break;
            case 'city':
              callback([
                'Cleveland',
                'New York City',
                'Brooklyn',
                'Manhattan',
                'Queens',
                'The Bronx',
                'Staten Island',
                'San Francisco',
                'Los Angeles',
                'Seattle',
                'London',
                'Portland',
                'Chicago',
                'Boston'
              ])
              break;
            case 'U.S. State':
              callback([
                "Alabama", "Alaska", "Arizona", "Arkansas", "California",
                "Colorado", "Connecticut", "Delaware", "District of Columbia", "Florida",
                "Georgia", "Guam", "Hawaii", "Idaho", "Illinois",
                "Indiana", "Iowa", "Kansas", "Kentucky", "Louisiana",
                "Maine", "Maryland", "Massachusetts", "Michigan", "Minnesota",
                "Mississippi", "Missouri", "Montana", "Nebraska", "Nevada",
                "New Hampshire", "New Jersey", "New Mexico", "New York", "North Carolina",
                "North Dakota", "Ohio", "Oklahoma", "Oregon", "Pennsylvania",
                "Puerto Rico", "Rhode Island", "South Carolina", "South Dakota", "Tennessee",
                "Texas", "Utah", "Vermont", "Virginia", "Virgin Islands",
                "Washington", "West Virginia", "Wisconsin", "Wyoming"
              ]);
              break
            case 'country':
              callback([
                "China", "India", "United States", "Indonesia", "Brazil",
                "Pakistan", "Bangladesh", "Nigeria", "Russia", "Japan",
                "Mexico", "Philippines", "Vietnam", "Ethiopia", "Egypt",
                "Germany", "Turkey", "Iran", "Thailand", "D. R. of Congo",
                "France", "United Kingdom", "Italy", "Myanmar", "South Africa",
                "South Korea", "Colombia", "Ukraine", "Spain", "Tanzania",
                "Sudan", "Kenya", "Argentina", "Poland", "Algeria",
                "Canada", "Uganda", "Morocco", "Iraq", "Nepal",
                "Peru", "Afghanistan", "Venezuela", "Malaysia", "Uzbekistan",
                "Saudi Arabia", "Ghana", "Yemen", "North Korea", "Mozambique",
                "Taiwan", "Syria", "Ivory Coast", "Australia", "Romania",
                "Sri Lanka", "Madagascar", "Cameroon", "Angola", "Chile",
                "Netherlands", "Burkina Faso", "Niger", "Kazakhstan", "Malawi",
                "Cambodia", "Guatemala", "Ecuador", "Mali", "Zambia",
                "Senegal", "Zimbabwe", "Chad", "Cuba", "Greece",
                "Portugal", "Belgium", "Czech Republic", "Tunisia", "Guinea",
                "Rwanda", "Dominican Republic", "Haiti", "Bolivia", "Hungary",
                "Belarus", "Somalia", "Sweden", "Benin", "Azerbaijan",
                "Burundi", "Austria", "Honduras", "Switzerland", "Bulgaria",
                "Serbia", "Israel", "Tajikistan", "Hong Kong", "Papua New Guinea",
                "Togo", "Libya", "Jordan", "Paraguay", "Laos",
                "El Salvador", "Sierra Leone", "Nicaragua", "Kyrgyzstan", "Denmark",
                "Slovakia", "Finland", "Eritrea", "Turkmenistan"
              ], {preserveOrder: true});
              break;
          }
        },
        facetMatches : function(callback) {
          callback([
            'account', 'filter', 'access', 'title',
            { label: 'city',    category: 'location' },
            { label: 'address', category: 'location' },
            { label: 'country', category: 'location' },
            { label: 'U.S. State', category: 'location' },
          ]);
        }
      }
    });
  });
</script> 
```

现在我试图修改它而不是从 jquery 脚本中获取所有数据，我想从同一服务器上的 python 脚本中获取数据，并使用该数据代替（因为我无法添加所有数据到一个文件，因为数据集很大）。但我基本上想做的是，几乎有两件事。

第一个在最后，它说“facetMatches”，它有一个术语列表（如帐户、过滤器等）和括号中的术语。我想将这些术语保留在括号中，但我希望其他术语不是“'account'、'filter'、'access'、'title'”，我希望它是一个包含数千个单词的列表，从 python 脚本访问，而不是直接写入。

第二个是，在“ValueaMatches”部分中，“Switch case”已经存在，每个单词都有一个输出列表，我希望每个单词都有一个结果列表，再次来自 python 脚本。我还希望 facetMatches 括号中的 4 个单词仍然有个别情况。我知道这可以很容易地用 if 语句完成，但我不知道如何从 python 脚本中获取数据。

另外，对于 python 脚本，我在每个脚本中有什么来输出正确的数据？我已经有了打印出我需要的所有东西的功能，只是不是我可能需要的格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:06:34.487

您可以向服务器询问 json 格式的数据列表。这可以通过创建一个 python 列表并使用[json](http://docs.python.org/library/json.html)模块将其转换为 json 格式来完成。根据您的 python 版本，此模块将被调用`simple_json`，但在最新版本的 python 中，它只是`json`.

在您的 javascript中，您将`jQuery.ajax()`调用服务器并将响应读入您的列表变量。

# html - 粘性页脚不会产生粘性行为

> ID：12449256
> 
> 赞同：-2
> 
> 时间：2012-09-16T17:54:35.807
> 
> 标签：html, css

[christianselig.com/contact](http://christianselig.com/contact.html)

出于某种原因，页脚仅在这一页的一半处停留，但其他所有似乎都还可以。找了好久也找不到原因。

我已将相关的 HTML 和 CSS 放在下面，显然还有更多可用的内容。

HTML：

```
 <div class="alt-contact">
                    <p>Prefer manual contacting? <a href="mailto:me@example">Email me.</a></p>
                </div>
            </div> <!-- This div corresponds to the content wrapper div above -->

            <div class="footer-wrapper">
                <div class="footer">
                    <p class="copyright">Copyright &copy; 2012 Christian Selig</p>
                    <ul>
                        <li><a href="#">Home</a></li>
                        <li><a href="#">About</a></li>
                        <li><a href="#">Work</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div> 
```

CSS：

```
.footer-wrapper {
    background: #f7f7f7; /* Old browsers */
    background: -moz-linear-gradient(top,  #f7f7f7 0%, #d6d6d6 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f7f7f7), color-stop(100%,#d6d6d6)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #f7f7f7 0%,#d6d6d6 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #f7f7f7 0%,#d6d6d6 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #f7f7f7 0%,#d6d6d6 100%); /* IE10+ */
    background: linear-gradient(to bottom,  #f7f7f7 0%,#d6d6d6 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f7f7f7', endColorstr='#d6d6d6',GradientType=0 ); /* IE6-9 */
    border-top: 1px solid #ccc;
    bottom: 0;
    height: 16px;
    overflow: hidden;
    padding: 8px 0 5px 0;
    position: absolute;
    width: 100%;
}

    .footer {
        color: #808080;
        clear: both;
        font-family: 'Lucida Grande', Helvetica, Arial, sans-serif;
        font-size: 0.7em;
        margin: auto;
        width: 900px; 
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:03:43.937

你应该有：

```
html,
body {
    height: 100%;
} 
```

Your `html` has no `height` given to it, so it's only as tall as the `body` pushes it. Note, in IE8 and less you have to use "tricker" solutions like R[yan Fait's Sticky Footer](http://ryanfait.com/sticky-footer/):

```
* {
    margin: 0;
}
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    /* the bottom margin is the negative value of the footer's height */
    margin: 0 auto -142px; 
}
.footer, .push {
    /* .push must be the same height as .footer */
    height: 142px; 
}

/* Sticky Footer by Ryan Fait
   http://ryanfait.com/       */ 
```

I've used it; it works. It gives you headaches, though, because it essentially takes `margin` and `padding` flexibility away from you. Which can be a pain.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T17:58:29.970

是的，这是因为`position: absolute;`不会制作粘性页脚。如果你想要一个粘性页脚，你需要使用`position: fixed;`. 这将使页脚相对于浏览器窗口保持在同一位置，而不是下一个相关的父对象。

祝你好运，
-布赖恩

# php - 替代 php preg_match 从外部网站提取数据？

> ID：12449258
> 
> 赞同：1
> 
> 时间：2012-09-16T17:54:55.687
> 
> 标签：php

我想在外部网页中提取特定 div 的内容，该 div 如下所示：

```
<dt>Win rate</dt><dd><div>50%</div></dd> 
```

我的目标是“50%”。我实际上是在使用这个 php 代码来提取内容：

```
function getvalue($parameter,$content){
    preg_match($parameter, $content, $match);
    return $match[1];
    };
$parameter = '#<dt>Score</dt><dd><div>(.*)</div></dd>#';
$content = file_get_contents('https://somewebpage.com'); 
```

一切正常，问题是这种方法花费了太多时间，特别是如果我必须多次使用不同的 $content。

我想知道是否有更好（更快、更简单等）的方法来完成相同的功能？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:04:07.133

您可以使用[DOMDocument::loadHTML](http://php.net/manual/en/domdocument.loadhtml.php)并导航到给定节点。

```
$content = file_get_contents('https://somewebpage.com');
$doc = new DOMDocument();
$doc->loadHTML($content); 
```

现在要到达所需的节点，您可以使用方法[DOMDocument::getElementsByTagName](http://php.net/manual/en/domdocument.getelementsbytagname.php)，例如

```
$dds = $doc->getElementsByTagName('dd');
foreach($dds as $dd) {
  // process each <dd> element here, extract inner div and its inner html...
} 
```

编辑：我看到@pebbl 关于 DomDocument 变慢的观点。然而，确实是这样，用 preg_match 解析 HTML 是件麻烦事。在这种情况下，我还建议查看事件驱动的 SAX XML 解析器。由于它不构建树，因此它更轻量级、更快且内存占用更少。您可以查看[XML_HTMLSax](http://pear.php.net/package/XML_HTMLSax/redirected)以了解此类解析器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T08:49:52.647

基本上，您可以做三件事来提高代码的速度：

## 将外部页面加载到另一个时间*（即使用 cron）*

在基于 linux 的服务器上，我知道该建议什么，但是当您使用 Windows 时，我不确定等价物是什么，但是 Cron for linux 允许您在特定的调度时间偏移处触发脚本 -*在后台*- 所以不是使用浏览器。基本上，我建议您创建一个脚本，其唯一目的是在特定时间偏移*（取决于您需要更新数据的频率）*获取网站页面，然后将这些网页写入本地系统上的文件。

```
$listOfSites = array(
  'http://www.something.com/page.htm',
  'http://www.something-else.co.uk/index.php',
);

$dirToContainSites = getcwd() . '/sites';

foreach ( $listOfSites as $site ) {
  $content = file_get_contents( $site );

  /// i've just simply converted the URL into a filename here, there are
  /// better ways of handling this, but this at least keeps things simple.
  /// the following just converts any non letter or non number into an
  /// underscore... so, http___www_something_com_page_htm
  $file_name = preg_replace('/[^a-z0-9]/i','_', $site);

  file_put_contents( $dirToContainSites . '/' . $file_name, $content );
} 
```

创建此脚本后，您需要设置服务器以根据需要定期执行它。然后您可以修改显示统计数据以从本地文件读取的前端脚本，这将显着提高速度。

您可以在此处了解如何从目录中读取文件：

[http://uk.php.net/manual/en/function.dir.php](http://uk.php.net/manual/en/function.dir.php)

或者更简单的方法*（但容易出现问题）*只是重新步进您的站点数组，使用上面的 preg_replace 将 URL 转换为文件名，然后检查文件夹中是否存在文件。

## 缓存计算统计数据的结果

这很可能是您想要经常访问的统计页面*（不像公共页面那样频繁，但仍然如此）*。如果访问同一页面的次数多于执行基于 cron 的脚本，则没有理由再次进行所有计算。所以基本上你要做的就是缓存你的输出是做类似下面的事情：

```
$cachedVersion = getcwd() . '/cached/stats.html';

/// check to see if there is a cached version of this page
if ( file_exists($cachedVersion) ) {
  /// if so, load it and echo it to the browser
  echo file_get_contents($cachedVersion);
}
else {
  /// start output buffering so we can catch what we send to the browser
  ob_start();

  /// DO YOUR STATS CALCULATION HERE AND ECHO IT TO THE BROWSER LIKE NORMAL

  /// end output buffering and grab the contents so we now have a string
  /// of the page we've just generated
  $content = ob_get_contents(); ob_end_clean();

  /// write the content to the cached file for next time
  file_put_contents($cachedVersion, $content);

  echo $content;
} 
```

一旦你开始缓存东西，你需要知道什么时候应该删除或清除缓存——否则，如果你不这样做，你的统计输出将永远不会改变。对于这种情况，清除缓存的最佳时间是在您再次获取外部网页时。因此，您应该将此行添加到“cron”脚本的底部。

```
$cachedVersion = getcwd() . '/cached/stats.html';

unlink( $cachedVersion ); /// will delete the file 
```

您可以对缓存系统进行其他速度改进*（您甚至可以记录外部网页的修改时间并仅在它们更新时加载）*，但我试图让事情易于解释。

## 在这种情况下不要使用 HTML 解析器

扫描 HTML 文件以获取特定的唯一值不需要使用成熟的甚至是轻量级的 HTML 解析器。错误地使用 RegExp 似乎是许多初创程序员陷入的事情之一，并且是一个经常被问到的问题。这导致更多经验丰富的编码人员做出许多自动下意识的反应，以自动遵守以下逻辑：

```
if ( $askedAboutUsingRegExpForHTML ) {
  $automatically->orderTheSillyPersonToUse( $HTMLParser );
} else {
  $soundAdvice = $think->about( $theSituation );
  print $soundAdvice;
} 
```

当标记中的目标不是那么独特时，应该使用 HTMLParsers，或者您要匹配的模式依赖于这种脆弱的规则，以至于它会破坏第二个额外的标记或字符出现。它们应该用于使您的代码更可靠，而不是如果您想加快速度。即使没有构建所有元素的树的解析器仍将使用某种形式的字符串搜索或正则表达式表示法，因此除非您使用的库代码已经以极其优化的方式编译，否则它不会比编码好strpos/preg_match 逻辑。

考虑到我还没有看到您希望解析的 HTML，我可能会走得更远，但是从我看到的您的代码段来看，使用 strpos 和 preg_match 的组合应该很容易找到该值。显然，如果您的 HTML 更复杂并且可能随机多次出现`<dt>Win rate</dt><dd><div>50%</div></dd>`它会导致问题 - 但即便如此 - HTMLParser 仍然会遇到同样的问题。

```
$offset = 0;

/// loop through the occurances of 'Win rate'
while ( ($p = stripos ($html, 'win rate', $offset)) !== FALSE ) {

  /// grab out a snippet of the surrounding HTML to speed up the RegExp
  $snippet = substr($html, $p, $p + 50 ); 

  /// I've extended your RegExp to try and account for 'white space' that could
  /// occur around the elements. The following wont take in to account any random
  /// attributes that may appear, so if you find some pages aren't working - echo
  /// out the $snippet var using something like "echo '<xmp>'.$snippet.'</xmp>';"
  /// and that should show you what is appearing that is breaking the RegExp.

  if ( preg_match('#^win\s+rate\s*</dt>\s*<dd>\s*<div>\s*([0-9]+%)\s*<#i', $snippet, $regs) ) {
    /// once you are here your % value will be in $regs[1];
    break; /// exit the while loop as we have found our 'Win rate'
  }

  /// reset our offset for the next loop
  $offset = $p;
} 
```

## 需要注意的问题

如果您是 PHP 新手，正如您在上面的评论中所说，那么上面的内容可能看起来相当复杂 - 确实如此。您正在尝试做的事情非常复杂，尤其是如果您想以最佳方式快速完成它。但是，如果您仔细阅读我给出的代码并研究您不确定/没有听说过的任何内容*（php.net 是您的朋友）*，它应该可以让您更好地理解实现你正在做的事情。

但是，请提前猜测，以下是您可能会遇到上述问题的一些问题：

*   **文件权限错误**- 为了能够从本地操作系统读取和写入文件，您需要具有正确的权限才能这样做。如果您发现无法将文件写入特定目录，则可能是您使用的主机不允许您这样做。如果是这种情况，您可以联系他们询问如何获得对文件夹的写入权限，或者如果这不可能，您可以轻松更改上面的代码以使用数据库。

*   **我看不到我的内容**- 当使用输出缓冲时，所有回显和打印命令都不会发送到浏览器，而是保存在内存中。PHP 应该在脚本退出时自动输出所有存储的内容，但是如果您使用 ob_end_clean() 之类的命令，这实际上会擦除“缓冲区”，因此所有内容都会被删除。当你知道你在呼应某些东西时，这可能会导致混乱的情况......但它只是没有出现。

*（迷你免责声明：）我已经手动输入了以上所有内容，因此您可能会发现存在 PHP 错误，如果是这样，而且它们令人困惑，只需将它们写回到这里，StackOverflow 可以帮助您）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T18:10:34.267

与其尝试不使用`preg_match`，为什么不直接缩小文档内容的大小？例如，您可以转储之前`<body`的所有内容和之后的所有内容`</body>`。那么`preg_match`将搜索更少的内容。

此外，您可以尝试将这些进程中的每一个都作为一个伪独立线程来执行，这样它们就不会一次发生一个。

# google-drive-api - 我可以使用可索引文本将元数据存储在 Google 驱动器文档中吗？

> ID：12449259
> 
> 赞同：0
> 
> 时间：2012-09-16T17:55:00.460
> 
> 标签：google-drive-api

将文件上传到 Google Drive 时，我会使用 Google 中的文档维护对原始文件的引用。有一个[关于](https://stackoverflow.com/questions/12093934/google-drive-add-meta-data-to-file)元数据的问题，但我想知道是否可以使用新 API 中的两个新属性之一。引用将是 32 个字符的密钥，我需要能够使用该密钥找到文档。

[可索引文本](http://javadoc.google-api-java-client.googlecode.com/hg/apis/drive/v2/index.html)似乎是一种选择，我可以将密钥存储在那里并使用搜索来检索文档。但是，如果密钥在任何其他文档中，我就有可能被多次点击

[OriginalFilename](http://javadoc.google-api-java-client.googlecode.com/hg/apis/drive/v2/index.html)是我可以设置的属性，但我不确定是否可以搜索该属性。

我将尝试使用组合，将键写入可索引文本和原始文件名中，这样我就可以搜索文件并使用原始文件名选择正确的文件，如果我得到多个文件名来选择正确的文件火柴。

这似乎有点骇人听闻，有没有更好的方法，或者这种方法会失败的任何原因？

[谷歌驱动器将元数据添加到文件](https://stackoverflow.com/questions/12093934/google-drive-add-meta-data-to-file)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:56:34.973

您可以在*技术上*使用这两个字段，但它们用于不同的目的，并且不能保证用户或其他应用程序不会更改它们的值。

正如您提到的另一个问题中所写，我们已经在努力解决您的用例，所以请多多容忍我们，您将有一个更好的解决方案。谢谢！

# rest - 从 WSO2 ESB 在 REST 调用中发送 post 方法内容

> ID：12449263
> 
> 赞同：0
> 
> 时间：2012-09-16T17:56:17.417
> 
> 标签：rest, wso2, wso2esb

我一直在尝试从我的 wso2 ESB 调用 rest 操作，并成功地从 WSO2 ESB 调用了 rest post 方法。但是，不幸的是，我无法通过请求参数或请求属性访问我发布的数据。

PS：我不想为我的帖子请求构建一种获取类型的 URL。

有针对这个的解决方法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T02:25:23.750

您需要使用正确的内容类型，以便保留 POST 请求数据。这篇[文章](http://pradeepfernando.blogspot.com/2011/05/post-variables-get-dropped-while-going.html)将帮助您了解原因。

编辑。

1) 在消息构建器中将以下条目添加到axis2.xml。

```
<messageBuilder contentType="application/x-www-form-urlencoded"
                    class="org.apache.synapse.commons.builders.XFormURLEncodedBuilder"/> 
```

2) 然后使用 esb 访问所需的参数

```
<property name="NameOfTheProperty" expression="//xformValues/NameOfTheProperty/text()"/> 
```

# ruby-on-rails-3 - AFNetworking 使用 Rails 进行 PUT 和删除

> ID：12449268
> 
> 赞同：1
> 
> 时间：2012-09-16T17:57:16.133
> 
> 标签：ruby-on-rails-3, api, http, afnetworking

在查看 AFNetworking 文档时，Put 和 Delete 方法采用路径和参数字典。我使用 Rails 作为后端，希望这两种类型采用 Put /object/1.json 和 Delete /object/1.json 的形式。我应该通过添加 Id 来构建路径字符串，还是发送带有 Id 作为字典中的参数之一的 Put 或 Delete？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T20:03:49.917

通常，当我使用`PUT`类似类型的 HTTP 请求时，使用`AFNetworking`是这样的：

```
// Create an HTTP client with your site's base url
AFHTTPClient *client = [AFHTTPClient clientWithBaseURL:[NSURL URLWithString:@"http://example.com"]];

// Setup the other parameters you need to pass
NSDictionary *parameters = @{@"username" : @"bob", @"password" : @"123456"};

// Create a NSURLRequest using the HTTP client and the path with your parameters
NSURLRequest *request = [client requestWithMethod:@"PUT" path:@"object/1.json" parameters:parameters];

// Create an operation to receive any response from the server
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    // Do stuff
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    // Handle error
}];

// Begin the operation
[operation start]; 
```

如果您查看`AFHTTPClient.h`有关如何格式化基本 url 和路径的示例。[AFNetworking 文档](http://afnetworking.github.com/AFNetworking/Classes/AFHTTPClient.html#//api/name/getPath:parameters:success:failure:)中提供了有关这些方法的更多信息

# php - mpdf页面添加

> ID：12449271
> 
> 赞同：0
> 
> 时间：2012-09-16T17:57:49.380
> 
> 标签：php, pagination, mpdf

我正在将 html 转换为 PDF。除非有很长的 html ，有多个页面，否则一切正常。转换后，它的输出显示在一个PDF页面中，我需要自动分页。mPDF是否支持。它适用于所有其他 HTML，但不适用于少数人。我试图在这里复制我的代码，但它很长，所以不能放在这里。

我的 Html 无效，我知道。我使用 HTML 净化器修复它，但它没有完全修复。我在网上读到，如果有嵌套表，那么这可能会发生。但我需要一个解决方案。

这是我的代码。

```
<?php
error_reporting(E_ALL ^ E_NOTICE);
ini_set('display_errors','Off');
//ini_set("pcre.backtrack_limit","1000000");
ini_set("memory_limit","256M"); 
$html = 'My long invalid HTML';

include_once('../htmlpurifier/library/HTMLPurifier.auto.php');
$config = HTMLPurifier_Config::createDefault();
$config->set('Core', 'Encoding', 'UTF-8');
$config->set('HTML', 'Doctype', 'HTML 4.01 Transitional');
$filter = new HTMLPurifier($config);
$html = $filter->purify($html);
include("mpdf.php");
$mpdf=new mPDF('c');
$mpdf->SetDisplayMode('fullpage');
$mpdf->WriteHTML($html);
$mpdf->Output();
exit; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T13:56:24.190

问题在于嵌套表。我把表格分开了，PDF 现在工作得很好

# c++ - 列表 push_back 期间的 C++ 后缀递增

> ID：12449272
> 
> 赞同：-2
> 
> 时间：2012-09-16T17:57:51.577
> 
> 标签：c++, iterator, dereference, push-back, postfix-operator

我有一个代码`flush[*it % 4].push_back(*(it++) /= 4);`，它的目的是在增加 it 迭代器之前 push_back 新值（旧值/4），是这样还是如何以最快的方式从迭代器中获取值，将其除以 4，存储它，使用 push_back 中的新值，然后增加迭代器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T18:00:03.737

这太恶心了。是否`it`在之前或之后增加`*it % 4`？Protip：它没有定义，所以你的代码没有明确定义的结果。这真是太糟了。此外，这通常是一团糟——您已经对一个变量进行了两次读取和一次写入，以及一次赋值、一次函数调用*和*一次索引。一种表达方式就很多了。

使用多个语句来实现您的逻辑。

# git - 与同事共享 AFS 上的 git 本地分支

> ID：12449277
> 
> 赞同：0
> 
> 时间：2012-09-16T17:58:31.227
> 
> 标签：git, version-control

我的项目使用 Andrew 文件系统 (AFS) 和 Git 修订控制。我在我的沙箱中克隆了项目存储库，并且一直在他们自己的专用本地分支中处理许多功能请求。

在将更改推送到主存储库之前，我希望我的 2 位同事检查我的更改，因此希望与他们共享我的本地分支。我在互联网和 SO 上搜索“git 与同事共享本地分支”，但最有用的解决方案建议使用唯一标签将更改推送到主存储库。

有没有什么方法可以让同事直接读取我的本地分支，而不需要我推送到主存储库？如果没有，有什么方法可以一次性推动所有分支吗？大约有10个分支，如果可能的话，我想避免一个一个地推动它们。

此外，并非所有 10 个分支机构都与我的两个同事有关。与这个问题[Git local branch access for coworker](https://stackoverflow.com/questions/7660106/git-local-branch-accessible-for-coworker)不同，我不介意他们访问与其他人共享的分支，但告诉他们我希望他们查看哪些分支似乎更清晰。

不确定这是否相关，但他们具有读取和查找我的沙箱的 AFS 权限。此外，我们不在同一个地点工作，而且我们之间的时区差异很大，因此一次检查一个分支进行审核将花费太长时间。

感谢您的考虑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:04:05.923

如果您的同事对您的沙箱具有读取权限，他们可以简单地克隆您的完整存储库（或将其提取到现有存储库中），然后以他们想要的任何方式浏览所有分支。

# java - JAVA - 使用 FOR、WHILE 和 DO WHILE 循环对 1 到 100 求和

> ID：12449281
> 
> 赞同：1
> 
> 时间：2012-09-16T17:58:51.060
> 
> 标签：java, for-loop, while-loop, do-while

正如标题所述，我很难理解循环，并想出了一种方法来做一个简单的 1 到 100 的总和，但就像我说的那样，循环让我有些困惑。我想我已经想到了 FOR 循环。

这就是我想出的。

```
int sum = 0; 
for (int i = 1; i <= 100; i++) sum += i; 
System.out.println("The sum is " + sum); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T19:19:16.320

**-**首先对我来说`Iterating`是`Looping`两个不同的东西。

**例如：**增加一个变量直到 5 是循环的。

```
 int count = 0;

    for (int i=0 ; i<5 ; i++){

        count = count + 1;

   } 
```

**例如：**迭代数组以打印出它的值，是关于迭代

```
 int[] arr = {5,10,15,20,25};

    for (int i=0 ; i<arr.length ; i++){

        System.out.println(arr[i]);

   } 
```

**现在关于所有循环：**

**-**当您知道要循环的确切时间时，使用 For-Loop 总是更好，如果您不确定，请使用 While-Loop。是的，很多天才可以说他们两个都可以优雅地完成，我不否认他们......但这些都是让我完美地执行我的程序的几件事......

`For Loop`：

```
int sum = 0; 

for (int i = 1; i <= 100; i++) {

  sum += i; 

}

 System.out.println("The sum is " + sum); 
```

**While 和 Do-While 的区别如下：**

**-** `While`是一个`Entry Control Loop`，在进入循环之前在开始时检查条件。

**-** `Do-While`是一个`Exit Control Loop`，至少一旦块总是被执行然后条件被检查。

`While Loop`：

```
int sum = 0; 
int i = 0;       // i is 0 Here

    while (i<100) {

      sum += i; 
      i++;

    }

  System.out.println("The sum is " + sum); 
```

`do-While`：

```
int sum = 0; 
int i = 0;      // i is 0 Here

    do{ 

      sum += i; 
       i++
    }while(i < 100; );

     System.out.println("The sum is " + sum); 
```

**从 Java 5 开始，我们也有 For-Each 循环来迭代集合，即使它与数组一起使用也很方便。**

```
ArrayList<String> arr = new ArrayList<String>();

arr.add("Vivek");
arr.add("Is");
arr.add("Good");
arr.add("Boy");

for (String str : arr){         // str represents the value in each index of arr

    System.out.println(str);     

 } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T18:17:05.247

你的`for`循环看起来不错。

一个可能的`while`循环来完成同样的事情：

```
int sum = 0;
int i = 1;
while (i <= 100) {
    sum += i;
    i++;
}
System.out.println("The sum is " + sum); 
```

一个可能的`do while`循环来完成同样的事情：

```
int sum = 0;
int i = 1;
do {
    sum += i;
    i++;
} while (i <= 100);
System.out.println("The sum is " + sum); 
```

`while`和之间的区别在于`do while`，对于`do while`，肯定会发生至少一次迭代。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-16T18:28:21.217

好吧，for 或 while 循环与 do while 循环不同。do while 至少执行一次语句，即使条件结果为假。

您指定的 for 循环是绝对正确的。

虽然我会再次为你做所有的循环。

```
int sum = 0;
// for loop

for (int i = 1; i<= 100; i++){
    sum = sum + i;
}
System.out.println(sum);

// while loop

sum = 0;
int j = 1;

while(j<=100){
    sum = sum + j;
    j++;
}

System.out.println(sum);

// do while loop

sum = 0;
j = 1;

do{
    sum = sum + j;
    j++;
}
while(j<=100);

System.out.println(sum); 
```

在最后一种情况下，条件 j <= 100 是因为，即使 do while 的条件变为假，它仍然会执行一次，但在这种情况下并不重要，因为条件变为真，所以它继续像任何循环一样循环其他循环语句。

# c - 创建唯一标识符 - 纯 C

> ID：12449282
> 
> 赞同：0
> 
> 时间：2012-09-16T17:58:52.990
> 
> 标签：c, uniqueidentifier, id-generation

我正在编写一个玩具操作系统，我需要一种创建唯一标识符的方法（如 Windows`HANDLE`除外）。这需要是纯 C/ASM 数学；如果可能的话，我不想依赖任何东西，甚至是 C 标准库。我目前有一个存储 32 位 GUID ^(**1**)的数据结构，如下所示：

```
//u32 = unsigned 32-bit integer, and so on
typedef union
  {
  struct { u32 type : 10; u32 id : 22; }; //Okay in C99 with gcc -fms-extensions
  u32 guid;
  } GUID; 
```

我有另一个将 GUID 与实际数据相关联的结构，但就本文而言，它并不是那么重要：

```
typedef struct
  {
  GUID guid;
  void *data;
  } GUIDTblEntry; 
```

我的内核有望支持各种类型的 GUID，每种类型的 GUID 最多具有唯一实例（这已经足够了，对吗？）。我减去一个是因为我想成为字段和字段的非法值。我的问题是我不知道如何开发一种算法来唯一地填充内核创建的每个字段。我能想到的唯一算法是随机选择一个 id，然后查看该 id 是否用于我要创建的特定 GUID 类。但是，我必须对所有为该特定类型创建的 GUID 进行排序，以查看它是否被占用，如果是，则重新执行整个操作。我也想过有一个数组`2^(10) - 1 = 1023``2^(22) - 1 = 4194303``0``.type``.id``.id``GUID``u32`每种使用的 GUID 类型都有一个（我确定我不会有 1023 种类型），并且每次我想要一个 GUID 时只增加适当的数字，但是当我创建 4194303 个特定的 GUID 时会发生什么类型？

只给用户一个指向实际数据的指针会更好吗，因为这保证是唯一的，并`typedef void* GUID`用来让 API 用户知道我不希望他们弄乱我的数据？还是我需要 GUID 提供的抽象？

**1)**这与[GUID 标准](http://en.wikipedia.org/wiki/GUID)无关。我独立想出了这个名字，当我发现实际上有一个叫做 GUID 的东西时，我试着想出一个新名字，但还没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:16:27.313

这是一个动态索引算法：

```
// variables
int instanceCount = 0;
int* recycler = malloc(sizeof *recycler);

// allocate index
int index = recycler[0];
if (!index) {
    index = (instanceCount+=1);
    recycler = realloc(recycler, (instanceCount+1) * sizeof *recycler);
    recycler[instanceCount] = 0;
} else {
    recycler[0] = recycler[index];
}

// deallocate index
recycler[index] = recycler[0];
recycler[0] = index;

// on initialization
recycler[0] = 0; 
```

我希望这有帮助。很长一段时间以来，我一直在使用类似的算法。

如果这没有帮助，那么我为浪费您的时间而道歉。

**编辑**

澄清一下，我是一名 C++ 程序员，所以我不是 100% 知道 C 世界中不存在什么，所以如果出现任何错误，请随时纠正我。

**编辑**

我刚刚对其进行了彻底的测试，并且效果很好。在分配任何新 id 之前，将填补所有空白。

# ruby-on-rails - 如何将路由设置为 Amazon S3 的别名？

> ID：12449286
> 
> 赞同：2
> 
> 时间：2012-09-16T17:59:07.377
> 
> 标签：ruby-on-rails, heroku, dns, routing, amazon-s3

我正在使用 heroku 托管我的 rails 应用程序，并使用 ZerigoDNS（免费的 heroku 插件）管理我的 DNS。我使用 Amazon S3 来存储我的所有资产。

我的 S3 存储桶中有一个名为`newsletter`. 我想`http://mydomain.com/newsletter`简单地充当`https://my-bucket.s3.amazonaws.com/newsletter`.

我该怎么做呢？

谢谢！

* * *

**编辑：**最好，我希望 URL 不重定向，而只是从 S3 文件夹中读取。所以我基本上只是为`https://my-bucket.s3.amazonaws.com/newsletter`. 有没有办法使用 routes.rb 或一些 gem 来做到这一点？

# android - 动态替换视图而不改变活动

> ID：12449294
> 
> 赞同：2
> 
> 时间：2012-09-16T17:59:50.733
> 
> 标签：android, view

我想知道如何解决我在制作视频播放器应用程序时遇到的这个小问题。![第一的](../Images/426870797741b5b0ffb1b6226bda3e25.png)

单击上图中的第一个控件（矩形图标）时，必须显示以下视图而不是它，我不确定如何执行此操作。这是它被替换的内容 ![第二](../Images/05386ef876ebd0061fe94d1faa6c54ba.png)

另请注意，不得更改活动。我已经能够单独设计视图，但是在用户单击时在运行时更改它们时遇到问题。有人可以解释如何完成或提供一些合适的链接来实现我的目标。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:16:25.547

对于像这样简单的事情，您只需更改视图的可见性。

```
view.setVisibility(View.INVISIBLE) 
```

或者更有效：

```
view.setVisibility(View.GONE) 
```

在您想要消失的视图上执行此操作，我建议使用包装类。要么是这个，要么是改变 contentView，如下所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:11:57.597

```
this.setContentView(R.layout.newLayoutToUse); 
```

但是，我觉得有更好的方法来做你想做的事。如果您只想更改某些按钮或图像视图的图像，则加载一个完整的新布局是多余的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T18:22:17.490

这可能是一个愚蠢的解决方案，因为我现在非常疲倦，但是为什么不使用要在前面显示的`bringToFront()`方法呢？`View`将它们显示在彼此的前面，也许在 a`RelativeLayout`中，然后根据需要在它们之间交换。它们是小对象，所以不要消耗内存。我不明白为什么这不起作用。

或者

将它们放在彼此之上，使它们重叠，然后根据您需要显示的视图使上面的视图可见/不可见。

或者

`ScrollView`只记得我在某处读过，您可以从代码中自动滚动浏览。因此，连续显示`Views`，`ScrollView`当按下按钮或其他任何内容时，向下滚动以使下一个菜单可见。当按下返回时，您向上滚动以使之前的内容可用。应该可以工作，并且还可以在更改菜单之间制作漂亮的动画。

# neo4j - 通过关系属性的总和限制 Neo4j 密码查询结果

> ID：12449295
> 
> 赞同：6
> 
> 时间：2012-09-16T17:59:52.563
> 
> 标签：neo4j, cypher

有没有办法通过关系属性的总和来限制密码查询？

我正在尝试创建一个密码查询，该查询返回距离起始节点 100 以内的节点。所有的关系都有一个距离集，一条路径中所有距离的总和就是到起始节点的总距离。

如果 WHERE 子句可以处理聚合函数，我正在寻找的可能看起来像这样

```
START n=node(1)
MATCH path = n-[rel:street*]-x
WHERE SUM( rel.distance ) < 100
RETURN x 
```

有没有一种方法可以对 where 子句的路径中的关系距离求和？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T21:10:24.230

当然，您想要做的就像一个 SQL 查询。

在 cypher 中，您可以链接查询段并在下一部分中使用前一部分的结果`WITH`，请参阅[手册](http://docs.neo4j.org/chunked/snapshot/query-with.html)。

对于您的示例，假设：

```
START n=node(1)
MATCH n-[rel:street*]-x
WITH SUM(rel.distance) as distance
WHERE distance < 100
RETURN x 
```

不幸的是 sum 还不适用于集合

因此，我尝试以不同的方式进行操作（对于可变长度路径）：

```
START n=node(1)
MATCH n-[rel:street*]-x
WITH collect(rel.distance) as distances
WITH head(distances) + head(tail(distances)) + head(tail(tail(distances))) as distance
WHERE distance < 100
RETURN x 
```

不幸的是，一个空列表的头没有返回`null`，它可能是`coalesce`d ，`0`但只是失败了。所以这种方法只适用于固定长度的路径，不知道这是否适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-29T08:36:11.217

我最近遇到了同样的问题。在 Neo4j 的更新版本中，这通过*extract*和*reduce*子句解决。你可以写：

```
START n=node(1)
MATCH path = (n)-[rel:street*..100]-(x)
WITH extract(x in rel | x.distance) as distances, x
WITH reduce(res = 0, x in rs | res + x) as distance, x
WHERE distance <100
RETURN x 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T13:40:08.110

我不知道 WHERE 子句中的限制，但您可以简单地在 MATCH 子句中指定它：

```
START n=node(1)
MATCH path = n-[rel:street*..100]-x
RETURN x 
```

见[http://docs.neo4j.org/chunked/milestone/query-match.html#match-variable-length-relationships](http://docs.neo4j.org/chunked/milestone/query-match.html#match-variable-length-relationships)

# ios - 使 UITableView 看起来更像一个“常规”表格，有多个列

> ID：12449296
> 
> 赞同：0
> 
> 时间：2012-09-16T17:59:53.620
> 
> 标签：ios, uitableview, user-interface

我有一个非常标准的`UITableView`，但我想将其更改为看起来像在 iOS 开发之外被视为普通表格的表格 - 使其具有更多列（但只有一行）并使单元格呈方形。
我想过制作更多表格（每个单元格一个），然后将它们彼此相邻放置，但这不会那么方便。

**是否有一种简单的方法可以使单元格在之前的右侧而不是在下方？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:06:49.187

使用一些允许您拥有“网格视图”的第三方类。

一个是我的[`OHGridView`](https://github.com/AliSoftware/OHGridView)班级，另一个是[`NRGridView`](https://github.com/ldesroziers/NRGridView)，还有更多。如果您的应用程序需要与 iOS4 和/或 iOS5 兼容，则使用第三方类（或自己构建一个）是唯一的选择。

在 iOS6 下，还有一些其他的东西可以让你直接这样做（iOS6 仍然在 NDA 下，所以我们还不能公开谈论它，但是如果你有的话，去看看 developer.apple.com 网站上的 API Diff 文件访问它们）。因此，如果您的应用只打算从 iOS6+ 开始兼容并且您不需要对 iOS5 的支持，那么这可能是解决方案，如果您有一个可以访问 iPs6 SDK 的开发人员帐户，您应该去阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:15:34.843

您在寻找我们的 UICollectionView。

# c++ - std::string::substr 成员函数的复杂度是多少？

> ID：12449298
> 
> 赞同：6
> 
> 时间：2012-09-16T17:59:56.047
> 
> 标签：c++

`std::string::substr`成员函数的复杂度是多少？它是由标准定义的还是由实现定义的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:06:40.050

一个简单的实现将是 O(k)，其中 k 是结果子字符串的长度。std::string 不支持写时复制。如果您想要 O(1) 子字符串操作，请使用诸如[Rope](http://en.wikipedia.org/wiki/Rope_%28computer_science%29)之类的数据结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T18:07:55.177

C++11 标准没有定义`substr`21.4.7.8 或我能找到的任何其他地方的性能特征。在实践中，您几乎可以肯定地期望`O(n)`性能与`n`结果的长度有关。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T18:09:27.523

这就是标准所要说的：

n3242, 21.4.7.8

> 1.  要求：`pos <= size()`
> 2.  抛出：`out_of_range`如果`pos > size()`
> 3.  效果：确定要复制的字符串的有效长度`rlen`为`n`和`size() - pos`
> 4.  回报：`basic_string<charT,traits,Allocator>(data()+pos,rlen)`。

所以答案是否定的，复杂性没有定义。

编辑：根据 n3242 更正，pos > size not pos >= size

# html - AJAX 调用后显示数据，如何在控制器中渲染？

> ID：12449300
> 
> 赞同：3
> 
> 时间：2012-09-16T18:00:13.630
> 
> 标签：html, ruby-on-rails, ajax, render

我想`link_to`用来调用一个名为 show 的控制器动作。发生这种情况，我收到 200 条消息。现在我想`div`用返回的内容更新 a 。

控制器中的代码：

```
respond_to do |format|
  format.html # show.html.erb
  format.js 
 end 
```

视图、链接和 JavaScript 中的代码：

```
<%= link_to "Show analysis", company_comparison_path(3), :remote => true , :id => "thelink" %>

<div id="replaced"> will be replaced </div>

<script>  
$('#thelink').bind('ajax:complete', function() {  
        $('#replaced').html(data)
});  
 </script> 
```

我想我仍然不明白如何将控制器中的 HTML 或 JavaScript 正确返回到 JavaScript 中。如果我用括号中的一些文本替换 JavaScript 中的“数据”一词，我会得到正确的输出。但是我如何从控制器动作中得到结果呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:15:07.487

您快到了，但您需要告诉绑定函数您想要插入#results div 的实际html 内容。当你调用你使用`.html()`的`$('#replaced')`变量时 ( `data`) 仍然是未定义的。

尝试以下操作：

```
$('#thelink').bind('ajax:complete', function(event, data) {
  $('#replaced').html(data.responseText);
}); 
```

编辑：哦，要记住的是，这可能会呈现您的视图，包括可能不是您想要的布局。您可以`render layout: false if request.xhr?`在控制器中添加类似的内容，以防止布局显示在 ajax 请求中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:12:13.400

如果你想从 AJAX 响应返回更丰富的内容，你可以通过 :render_to_string 方法从控制器渲染视图。

查看更多：[http ://apidock.com/rails/ActionController/Base/render_to_string](http://apidock.com/rails/ActionController/Base/render_to_string)

```
respond_to do |format|
  format.html # show.html.erb
  format.js {
    @content = render_to_string(:partial => 'some_partial_view')
  }
 end 
```

# tfs - Slowcheeta 不适用于 Teambuild 中的 Web 应用程序

> ID：12449307
> 
> 赞同：2
> 
> 时间：2012-09-16T18:02:24.723
> 
> 标签：tfs, tfsbuild, slowcheetah, xdt-transform

我阅读了[这篇](http://sedodream.com/2011/12/12/SlowCheetahXMLTransformsFromACIServer.aspx)关于让 slowcheeta 在构建服务器上工作的文章。它适用于控制台应用程序，但我无法让它适用于 Web 应用程序。

我验证了构建服务可以访问 slowcheeta（适用于控制台应用程序）。我也能够在我的本地机器上正确地为 Web 应用程序进行转换。

主 .config 文件设置为内​​容不复制，转换设置为无，不复制。服务器是 TFS 2012，安装了 Visual Studio 2010 和 2012 以支持构建任务。

[github](https://github.com/sayedihashimi/slow-cheetah/issues/30)

# php - 将 .txt 文件分解为多维数组

> ID：12449308
> 
> 赞同：0
> 
> 时间：2012-09-16T18:02:29.437
> 
> 标签：php, arrays, multidimensional-array

目前我有一个看起来像这样的文件：

```
Awesomedude123 = 399,408 = September 16, 2012:
Username11 = 1,914,144 = September 16, 2012:
EpicSurfer = 1,031,427 = September 16, 2012: 
```

我想要做的是用 PHP 将它转换成一个多维数组，所以它看起来像这样：

```
Array
(
    [1] => Array
    (
        [0] => Awesomedude123
        [1] => 399,408
        [2] => September 16, 2012
    )

[2] => Array
    (
        [0] => Username11
        [1] => 1,914,144
        [2] => September 16, 2012
    )

[3] => Array
    (
        [0] => EpicSurfer
        [1] => 1,031,427
        [2] => September 16, 2012
    )

) 
```

我尝试过使用array_shift，但没有成功。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:09:14.810

这是代码：

```
<?php

$data = file_get_contents('File.txt'); // Get the file content
$data = str_replace(array("\n", "\r"), '', $data); // Clear newline characters

$data = explode(':', $data); // Get each record by : at end of line

unset($data[count($data) - 1]); // Clear the last empty element

$final_array = array();
foreach($data AS $row){ // Loop the exploded data
    $final_array[] = explode(' = ', $row); // Explode each row by Space=Space to each row of final_array
}

print_r($final_array);

?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T18:10:10.187

您可以使用正则表达式来拆分字符串：

```
myarray = array();
$file = fopen("myfile",'r');
while (!feof($file)) {
  $line = fgets($file);
  preg_match("/(\w+) = (.+) = (.+)/",$line,$matches);
  myarray[] = array($matches[1],$matches[2],$matches[3]);
} 
```

# javascript - 尝试使用 javascript 更新 Sharepoint 列表时出错

> ID：12449312
> 
> 赞同：0
> 
> 时间：2012-09-16T18:03:35.003
> 
> 标签：javascript, asp.net, sharepoint

**更新**

我现在尝试了一种新方法。这在我第一次调用它时有效，但第二次它告诉我由于某种原因尚未启动收集。此代码片段的测试功能中的注释将澄清我的问题。

Javascript：

```
function test(){
    //this first call works
    countRetrieve('Very', 'Difficult');
    //this second call generates error that collListItem hasnt been initiated
    countRetrieve('Less', 'Interesting');
}   

function countRetrieve(grade, title) {
    var siteUrl = '/sites/MySite';
    var clientContext = new SP.ClientContext(siteUrl);
    var oList = clientContext.get_web().get_lists().getByTitle('Summary');

    var camlQuery = new SP.CamlQuery();

    camlQuery.set_viewXml('<View><Query><Where>' +
    '<And>' +
    '<Eq><FieldRef Name=\'Grad\'/><Value Type=\'Text\'>' +
    grade +
    '</Value></Eq>' +
    '<Eq><FieldRef Name=\'Title\'/><Value Type=\'Text\'>' +
    title +
    '</Value></Eq>' +
    '</And>' +  
    '</Where></Query></View>');
    this.collListItem = oList.getItems(camlQuery);
    clientContext.load(collListItem);
    clientContext.executeQueryAsync(Function.createDelegate(this, this.onRetrieveQuerySucceeded), Function.createDelegate(this, this.onQueryFailed));
}

function onRetrieveQuerySucceeded(sender, args) {
    listItemEnumerator = collListItem.getEnumerator();

    while (listItemEnumerator.moveNext()) {
        var oListItem = listItemEnumerator.get_current();
        itemId = oListItem.get_id();
        itemCount = oListItem.get_item('Count');
    }
    updateCount();
}

function updateCount() {
    var clientContext = new SP.ClientContext('/sites/MySite');
    var oList = clientContext.get_web().get_lists().getByTitle('Summary');

    this.oListItem = oList.getItemById(itemId);
    //update the count, raise it by one
    var c = itemCount + 1;
    oListItem.set_item('Count', c);

    oListItem.update();

    clientContext.executeQueryAsync(Function.createDelegate(this, this.onUpdateSucceeded), Function.createDelegate(this, this.onQueryFailed));
}

function onUpdateSucceeded(sender, args){
    alert('item count updated');
} 
```

我试图检索列表中“计数”列的当前值，然后将该值增加 1。但是我收到一个错误，告诉我集合尚未初始化。

它没有在*this.collListItem = oList.getItems(camlQuery);中初始化吗？*?

这个功能可能完全错误，我非常感谢有关如何执行此任务的提示，因为我是 Sharepoint 和 Javascript 的新手。

这是我的代码（javascript）：

```
function countUpdate() {
            var siteUrl = '/sites/MySite';
            var clientContext = new SP.ClientContext(siteUrl);
            var oList = clientContext.get_web().get_lists().getByTitle('Summary');

            var camlQuery = new SP.CamlQuery();

            camlQuery.set_viewXml('<View><Query><Where>' +
            '<And>' +
            '<Eq><FieldRef Name=\'Grade\'/><Value Type=\'Text\'>' +
            'Really' +
            '</Value></Eq>' +
            '<Eq><FieldRef Name=\'Property\'/><Value Type=\'Text\'>' +
            'Narrow' +
            '</Value></Eq>' +
            '</And>' +  
            '</Where></Query></View>');
            this.collListItem = oList.getItems(camlQuery);
            clientContext.load(collListItem);

            clientContext.executeQueryAsync(Function.createDelegate(this, this.onUpdateQuerySucceeded), Function.createDelegate(this, this.onQueryFailed));

            //update
            var listItemEnumerator = collListItem.getEnumerator();
            while (listItemEnumerator.moveNext()) {
                var oListItem = listItemEnumerator.get_current();
                var count = oListItem.get_item('Count');
                oListItem.set_item('Count', '40');
                oListItem.update();
            }
            clientContext.executeQueryAsync(Function.createDelegate(this, this.onUpdateQuerySucceeded),Function.createDelegate(this, this.onQueryFailed));
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T13:16:51.763

正如回答的那样，您的问题在于 AJAX 的异步性质。您的电话已拨打，其他代码在返回之前立即继续。所以你需要的是一个“处理程序”——一个在你的请求完成时调用的函数，它将处理它返回的数据。

executeQueryAsync 将方法（函数）“succeededCallback”作为其第一个参数 - 您需要创建该方法并将其提供给此调用（没有括号 - 您想要传递对函数的引用，而不是运行它）。该方法将在请求完成时自动调用，并再次自动将调用结果作为第一个参数包含在内。

查看您的代码并尽可能简单化，您将不得不将三个函数链接在一起：

1) 设置初始呼叫和完成呼叫 2)。

2) 接受第一次调用的结果，对它们采取行动，设置第二次调用，完成后调用 3)

3) 接受第二次调用的结果，对它们采取行动。

您可以使用内置的 SP 功能，但老实说我觉得它们有点麻烦。我在这里构建了自己的 AJAX 抽象来执行此操作：

[http://depressedpress.com/javascript-extensions/dp_ajax/](http://depressedpress.com/javascript-extensions/dp_ajax/)

实现有点不同，但想法完全一样——也许看看那里的一些例子可能会让事情变得更清晰。

希望这可以帮助。值得一提的是，与您相处融洽：这是“在真正得到它之前没有人得到它”的事情之一，这似乎是第一次对任何人来说都是一个绊脚石。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:24:13.357

您需要在 onUpdateQuerySucceeded 函数中继续执行 - 在该列表将没有任何信息之前，因为需要将请求发送到服务器并在获取项目之前对响应进行处理。

正是出于这个原因，这些函数被称为 XXXXAsync - 调用它不会立即给出结果，而是在成功回调中异步评估。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T12:40:52.323

感谢吉姆的回答。不仅问题所有者发现您的帖子有用。

为了简化事情，我发布了一个示例：此代码可以`SPListItem`通过单击一个来更新多个`CheckBox`

```
var appOpsUrl = '/sites/AppOpsRep';
var coll;

function UpdateTargetInReport(checkBox, refValueOne, refValueTwo)
{
    var clientContext = new SP.ClientContext.get_current();
    var list = clientContext.get_web().get_lists().getByTitle('SLA Fulfillment');
    var camlQuery = new SP.CamlQuery();
    camlQuery.set_viewXml('<View><Query><Where><And><Eq><FieldRef Name=\'Application\' /><Value Type=\'Text\'>' + refValueOne + '</Value></Eq><Eq><FieldRef Name=\'Metric_x0020_name\' /><Value Type=\'Text\'>' + refValueTwo + '</Value></Eq></And></Where></Query></View>');
    coll = list.getItems(camlQuery);
    clientContext.load(coll);
    clientContext.executeQueryAsync(Function.createDelegate(this, function(){ UpdateTargetInReport_onQuerySucceeded(refValueTwo, checkBox); }), Function.createDelegate(this, function(sender,args) { UpdateTargetInReport_onQueryFailed(sender, args, checkBox); })); 
}

function UpdateTargetInReport_onQuerySucceeded(refValueTwo, checkBox)
{
    var clientContext = new SP.ClientContext.get_current();
    var listItemEnumerator = coll.getEnumerator();
    while(listItemEnumerator.moveNext()) 
    {
        var listItem = listItemEnumerator.get_current();
        listItem.set_item('In_x0020_Report', checkBox.checked);
        listItem.update(); 
    }
    clientContext.executeQueryAsync(Function.createDelegate(this, function() { UpdateTargetInReport_onUpdateQuerySucceeded(refValueTwo); }), Function.createDelegate(this, function(sender,args) { UpdateTargetInReport_onUpdateQueryFailed(sender, args, checkBox); } )); 
}

function UpdateTargetInReport_onQueryFailed(sender, args, checkBox) 
{
    SP.UI.Notify.addNotification('Request failed. ' + args.get_message());
    checkBox.checked = !checkBox.checked; 
}

function UpdateTargetInReport_onUpdateQuerySucceeded(refValueTwo)
{
    SP.UI.Notify.addNotification(refValueTwo + ' updated successfully');
}

function UpdateTargetInReport_onUpdateQueryFailed(sender, args, checkBox)
{
    SP.UI.Notify.addNotification('Request failed. ' + args.get_message());
    checkBox.checked = !checkBox.checked;
} 
```

# database - 查询以列出 Datomic 中的所有分区

> ID：12449315
> 
> 赞同：6
> 
> 时间：2012-09-16T18:03:51.587
> 
> 标签：database, clojure, datomic

什么是列出 Datomic 数据库的所有分区的查询？

这应该返回

```
[[:db.part/db] [:db.part/tx] [:db.part/user] .... ] 
```

`....`所有用户定义的分区在哪里。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T22:15:50.600

您应该能够`:db.part/db`通过`:db.install/partition`属性搜索与实体关联的所有实体来获取数据库中所有分区的列表：

```
(ns myns
  (:require [datomic.api :as d]))

(defn get-partitions [db]
  (d/q '[:find ?ident :where [:db.part/db :db.install/partition ?p]
                             [?p :db/ident ?ident]]
       db)) 
```

**笔记**

当前版本的 Datomic (build 0.8.3524) 有一个缺点，即`:db.part/tx`and `:db.part/user`(三个内置分区中的两个) 被特殊处理并且实际上与`:db.part/db`via没有关联`:db.install/partition`，因此上述查询函数的结果不会包括两者。

这个问题[将](https://groups.google.com/d/topic/datomic/9xxoWH6RxhA/discussion)在 Datomic 的未来版本之一中得到解决。`:db.part/tx`同时，您应该注意`:db.part/user`将自己包含在结果集中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-15T22:50:08.393

**第一种方法 - 使用查询**

```
=> (q '[:find ?i :where 
       [:db.part/db :db.install/partition ?p] [?p :db/ident ?i]]
     (db conn)) 
```

**第二种方法 - 从 db 对象**

```
(filter #(instance? datomic.db.Partition %) (:elements (db conn))) 
```

第二种方法返回*datomic.db.Partition*对象的序列，如果我们想获取有关分区的其他信息，这可能很有用。

这两种方法都有已知的错误/不一致：它们不返回 :db.part/tx 和 :db.part/user 内置分区。

# java - 休眠保存实体

> ID：12449316
> 
> 赞同：0
> 
> 时间：2012-09-16T18:03:53.773
> 
> 标签：java, mysql, hibernate, jsp

我有 2 个实体，车辆和司机。车辆有司机。在 Hibernate 生成的 Vehicle 类中，这种表示法由...表示

```
public class Vehicle
{
    private Driver driver;
    ...
    ...
    ...
} 
```

在数据库中，以下是场景......

```
table vehicle
    id INT
    name VARCHAR(20)
    driverId INT

table driver
    id INT
    name VARCHAR(45) 
```

我正在创建一个车辆并想分配一个现有的驱动程序。使用 Hibernate，当我创建一个 Vehicle 对象并保存它时，我必须执行以下操作...

```
// Load Driver
Driver driver = (Driver) session.load(Driver.class, Integer.parseInt(iKnowTheDriverId));

// Create Vehicle
Vehicle v = new Vehicle();
v.setDriver(driver); 
```

我是否需要每次都加载相应的驱动程序实体，还是只设置驱动程序 ID？

提前致谢...

SG

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:14:48.013

`Driver`保存新的`Vehicle`.

```
// Load Driver
Driver driver = (Driver) session.load(Driver.class, driverId);

// Create Vehicle
Vehicle v = new Vehicle();
v.setDriver(driver);
v.setName("someName");

session.save(vehicle); 
```

但是使用`session.load()`to get对应`Driver`是一个不错的选择，可以避免`SQL SELECT`到数据库。在您读取其上的属性之前，该`driver`对象不会被完全初始化。只有这样`SQL SELECT`才会发出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:14:58.497

你可以这样做：

```
Driver temp = new Driver();
temp.setId(iKnowTheDriverId);

v.setDriver(temp);

session.merge(v); 
```

保存方法之间可能存在一些差异，但是如果您使用 Session#merge() 它应该可以工作。然后它将通过检查其 id 将分离的驱动程序与现有的驱动程序合并，并且分离对象中的空值不会覆盖持久状态中的非空值。只需确保在从 Vehicle 到 Driver 的引用中具有 CascadeType.MERGE/ALL 即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-28T06:20:02.470

```
try {
        Session session = sessionFactory.openSession();
        session.beginTransaction();
        session.save(userDetails);
        Long userId = userDetails.getId();
        session.getTransaction().commit();
        session.close();
        logger.info("Successfully added the user");
        return userId;
    } catch (Exception e) {
        logger.error("error in saving the user in user table", e);
    } 
```

# mongodb - Casbah：当字段名称有空格时如何更新和嵌入对象？

> ID：12449320
> 
> 赞同：0
> 
> 时间：2012-09-16T18:05:04.467
> 
> 标签：mongodb, casbah

假设我在数据库中有以下文档：

```
{"_id":"test", "with space":{"a name":1}} 
```

如何在 Casbah 中编写 $set 查询以将“with space”.“a name”更新为 2？

我在想一些事情：

```
collection.update(MongoDBObject("_id" -> "test"), "'with space'.'a name'" $set 2) 
```

但是，如果我的字段名称未知并且我必须在运行时编写它们怎么办？有没有办法以安全的方式“逃离”它们？（例如，如果其中任何一个包含单引号等怎么办？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:25:22.077

如何不在字段名称中添加空格。严重地。

好的，如果你真的必须，它应该可以正常工作而不会逃避......

```
collection.update(MongoDBObject("_id" -> "test"), $set ("with space.a name" -> 2)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T23:52:09.487

MongoDB 不需要任何显式转义；你可以只传递一个变量名，例如：

```
 val key = MongoDBObject(name + '.' + embeddedname -> "somevalue") 
```

或者

```
 val key = MongoDBObject("with space.a name" -> "somevalue") 
```

虽然 MongoDB 确实允许您在键名中使用任何有效的 UTF-8 字符，但 '.' 除外。和前导“$”，您通常最好坚持使用字母数字键名加下划线。

如果您担心用户提供的输入的安全性，请参阅[MongoDB 如何解决 SQL 或查询注入？](http://docs.mongodb.org/manual/faq/developers/#how-does-mongodb-address-sql-or-query-injection)

# heroku - Heroku：适合实时游戏服务器吗？

> ID：12449323
> 
> 赞同：0
> 
> 时间：2012-09-16T18:05:56.993
> 
> 标签：heroku

我正在尝试使用 Java/Netty 在 Heroku 上运行实时游戏服务器。游戏服务器使用非标准端口进行通信（4876/tcp）。我已经使用 Unity3D 构建了游戏客户端。游戏客户端使用二进制协议（即不使用 HTTP）与游戏服务器通信。

我可以在 Heroku 上主持这个吗？Heroku 看起来只能在端口 80 或 443 上托管 Web 应用程序（即 procfile 中的 Web 进程）。

为了使事情稍微复杂一点，我还有一个使用 Java/Embedded Jetty 构建的 Web 服务应用程序，它需要能够与游戏客户端和我也想在 Heroku 上托管的实时游戏服务器通信。这可能是因为我知道不可能有进程间通信吗？如果我在 Heroku 上创建两个单独的应用程序（一个用于 Web 服务，一个用于实时游戏服务器）会怎样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:18:59.260

截至本答案发布时，heroku 仅支持 http 和 hptts，如您所见。

您可以尝试修改您的游戏以使用 http 作为二进制协议的传输。

# html - 链接在 Nivo Slider 上无法正常工作

> ID：12449325
> 
> 赞同：0
> 
> 时间：2012-09-16T18:06:22.663
> 
> 标签：html, css, drupal, nivo-slider

我有一个包含 nivo 滑块幻灯片的网站。每个图像都封装在一个链接中，但是我无法单击该链接。

请在以下地址查看幻灯片： [http ://www.andrews-autosource.co.uk/](http://www.andrews-autosource.co.uk/)

我正在为 Drupal 使用 nivo 滑块视图模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:48:26.117

仅使用 CSS 无法解决此问题。Nivo 正在从`.field-content`元素中复制图像，但它不显示这些特定元素。当一个新元素显示幻灯片时，它们被隐藏了。链接包裹在未显示的图像周围，因此您无法在 CSS 中修复此问题。

您可能可以使用 Javascript 来攻击它，但 Nivo Views 设置中必须有一个选项来修复它。那将是最好的解决方案。

# javascript - Django-ckeditor 内联错误

> ID：12449328
> 
> 赞同：1
> 
> 时间：2012-09-16T18:06:39.140
> 
> 标签：javascript, django, ckeditor, feincms

我正在使用 FeinCMS (https://github.com/feincms/feincms/) 和支持文件上传的 django-ckeditor (https://github.com/shaunsephton/django-ckeditor)。

我为 RichTextField 创建了 FeinCMS 内容类型：

```
class RichContent(models.Model):
    text = RichTextField(_('text'))

    class Meta:
        abstract = True
        verbose_name = _('Rich Text')
        verbose_name_plural =_('Rich Text')

    def render(self, **kwargs):
        context_instance = kwargs.get('context_instance')

        return render_to_string('content/page/rich_content.html', {
            'page': self,
        }, context_instance=context_instance) 
```

但是在 Django admin 中，当我选择“富文本”并按“Go”时，在 firebug 控制台中出现此错误：

```
uncaught exception: [CKEDITOR.editor] The instance "id_richcontent_set-__prefix__-text" already exists. 
```

ckeditor 中的 textarea 不可编辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T08:55:29.783

当您尝试使用已分配 CKEditor 实例的元素 (textarea) 创建新编辑器时，会发生这种情况。您可以通过探索`CKEDITOR.instances`对象来使用控制台列出活动实例。

我也相信这是解决您问题的方法：[CKEditor instance already exists](https://stackoverflow.com/questions/1794219/ckeditor-instance-already-exists)。您最好销毁现有实例或检测它并避免替换其 DOM 元素。

# java - JPA：防止级联操作[坚持，删除...]

> ID：12449333
> 
> 赞同：2
> 
> 时间：2012-09-16T18:06:51.610
> 
> 标签：java, hibernate, jpa

我有两个实体

```
@Entity
@Table(name="parent")
public class Parent {
  @Id
  String uuid;

  @ElementCollection(fetch=FetchType.EAGER)
  @CollectionTable(
      name="child",
      joinColumns=@JoinColumn(name="parent_uuid", insertable=false, updatable=false)
  )

  @Column(name="uuid")
  private Set<String> childrenUuids = new HashSet<String>();
}

@Entity
@Table(name="child") 
public class Child {
  @Id
  String uuid;

  @Column(name="parent_uuid")
  String parentUuid;

} 
```

现在当我坚持 Parent 时，由于 ManyToOne 关系，childrenUuids 中的孩子会自动坚持。我想防止对父级的所有操作（例如持久化、删除...）级联到子级，JPA 可以吗？我已经研究了几天，但找不到答案。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:18:45.907

您应该使用@OneToMany 而不是@ElementCollection。@OneToMany 默认情况下不会级联。据我所知，@ElementCollection 总是级联，这是有道理的，因为“@ElementCollection 定义了基本类型或可嵌入类的实例集合”，并且基本类型/可嵌入被认为是其父级的组成部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T06:14:34.763

@ElementCollection 总是级联。我最终通过实现我的@ElementCollection 解决方案来解决这个问题。我仍然使用 JPA 注释，而是在 @ElementCollection 上方添加 @Transient 以使 JPA 忽略它。然后我将我的实现作为每个实体的 JPA 加载后侦听器，它将在实体加载后填充每个集合。

# java - Eclipse/Java：检测到外部更改时重新加载文件的内容，文件锁定

> ID：12449334
> 
> 赞同：1
> 
> 时间：2012-09-16T18:06:53.320
> 
> 标签：java, eclipse, io

我有一个读取文件内容的应用程序。当程序运行时，它会检查该文件的 .lastModified() ，当它被修改时，它会重新加载文件的内容。这一切似乎工作正常。

如果我在 Eclipse 中打开了该外部文件并保存该文件，我会收到一条错误消息：“无法对打开了用户映射部分的文件执行请求的操作”。

如果我在 textpad 中打开相同的文件，我可以很好地保存文件并在我的应用程序中查看重新加载的结果。

为什么会发生这种情况，如何在 Eclipse 中解决它？

# python - GraphApi 模块是否存在于 pyfacebook 中

> ID：12449335
> 
> 赞同：3
> 
> 时间：2012-09-16T18:06:59.300
> 
> 标签：python, pyfacebook

我已经安装了 pyfacebook 以及 python sdk，即使我收到如下错误

使用此代码时

```
import facebook
token = 'my token'
graph = facebook.GraphAPI(token)
profile = graph.get_object("me")
friends = graph.get_connections("me", "friends")
friend_list = [friend['name'] for friend in friends['data']]
print friend_list 
```

我面临的错误是

```
graph = facebook.GraphAPI(token)
AttributeError: 'module' object has no attribute 'GraphAPI' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T23:25:56.623

当我`facebook`使用`easy_install facebook`. 当我运行以下命令时它起作用了：

`git clone https://github.com/pythonforfacebook/facebook-sdk.git` `pip install facebook-sdk`

# mysql - utf-8 与 latin1

> ID：12449336
> 
> 赞同：19
> 
> 时间：2012-09-16T18:07:03.067
> 
> 标签：mysql, database

使用 utf8 作为字符集与使用 latin1 相比有哪些优点/缺点？

如果 utf 可以支持更多字符并且始终如一地使用，它不总是更好的选择吗？有什么理由选择latin1吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-16T18:24:24.047

UTF8 优点：

1.  支持大多数语言，包括希伯来语等 RTL 语言。

2.  将数据导入/导出到 UTF8 感知组件（JavaScript、Java 等）时​​无需翻译。

UTF8 的缺点：

1.  由于编码方案更复杂，非 ASCII 字符将花费更多时间进行编码和解码。

2.  非 ASCII 字符将占用更多空间，因为它们可能使用超过 1 个字节来存储（字符不在 ASCII 字符集中的前 127 个字符中）。一个`CHAR(10)`or`VARCHAR(10)`字段可能需要最多 30 个字节来存储一些 UTF8 字符。

3.  其他排序规则`utf8_bin`会更慢，因为排序顺序不会直接映射到字符编码顺序），并且需要在某些存储过程中进行转换（因为变量默认为`utf8_general_ci`排序规则）。

4.  如果您需要`JOIN`UTF8 和非 UTF8 字段，MySQL 会造成*严重*的性能损失。如果加入的字段是不同的字符集/排序规则，那么亚秒级查询可能需要*几分钟。*

底线：

如果您不需要支持非Latin1 语言，想要获得最大性能，或者已经有表使用`latin1`，请选择`latin1`。

否则，选择`UTF8`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-16T18:14:41.637

`latin1`它的优点是它是单字节编码，因此它可以在相同的存储空间中存储更多的字符，因为MySql中字符串数据类型的长度取决于编码。该手册[指出](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)

> 要计算用于存储特定 CHAR、VARCHAR 或 TEXT 列值的字节数，您必须考虑用于该列的字符集以及该值是否包含多字节字符。特别是，在使用 utf8 Unicode 字符集时，您必须记住，并非所有字符都使用相同的字节数。utf8mb3 和 utf8mb4 字符集每个字符最多分别需要三个和四个字节。有关用于不同类别 utf8mb3 或 utf8mb4 字符的存储细分，请参阅第 10.9 节，“Unicode 支持”。

此外，许多字符串操作（例如获取子字符串和依赖于排序规则的比较）使用单字节编码更快。

无论如何，如果您完全关心国际化，latin1 就不是一个真正的竞争者。当您将存储已知的安全值（例如百分比编码的 URL）时，它可能是一个合适的选择。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-07-22T15:20:06.907

@Ross Smith II，第 4 点很有价值，这意味着列之间的不一致可能很危险。

为了增加已经很好的答案的价值，这里是一个关于字符集之间差异的小型性能测试：

一个现代的 2013 服务器，实际使用的表有 20000 行，相关列上没有索引。

SELECT 4 FROM `subscribers`WHERE 1 ORDER BY `time_utc_str`; （4是缓存破坏者）

*   varchar(20) CHARACTER SET latin1 COLLATION latin1_bin: 15ms
*   varbinary(20): 17 毫秒
*   utf8_bin：20ms
*   utf8_general_ci：23 毫秒

对于像数字日期这样的简单字符串，当考虑性能时，我的决定是使用 utf8_bin (CHARACTER SET utf8 COLLATE utf8_bin)。这将防止与期望数据库字符集为 utf8 同时仍是二进制的其他代码的任何不利影响。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T18:13:47.527

就 CPU 消耗而言，诸如 latin-1 之类的固定长度编码总是更有效。

如果已知某些固定长度字符集中的标记集足以满足您手头的目的，并且您的目的涉及繁重和密集的字符串处理，其中包含大量 LENGTH() 和 SUBSTR() 内容，那么这可能是一个不使用 UTF-8 等编码的充分理由。

哦，顺便说一句。不要像您似乎所做的那样混淆字符集及其**编码**。字符集是一些已定义的可写字形集。同一个字符集可以有多种不同的编码。unicode 标准的各个版本都构成一个字符集。它们中的每一个都可以进行UTF-8、UTF-16和“UTF-32”（不是官方名称，但它指的是对任何字符使用完整的四个字节的想法）编码，后两者可以分别采用 HOB-first 或 HOB-last 口味。

# java - WebView 只打开一些 URL，但不是全部

> ID：12449337
> 
> 赞同：1
> 
> 时间：2012-09-16T18:07:14.350
> 
> 标签：java, android, webview

当我打电话给我`WebView`并给它一个 URL 时，我希望它在应用程序中打开（即在我的页面上），但它并不总是这样做。

一些页面将在我的应用程序中打开，但其他页面将在默认的 android 网络浏览器中打开。

这是我的代码。对此的任何帮助将不胜感激。

```
WebView webView = ((WebView)findViewById(R.id.website));
WebSettings webSettings = webView.getSettings();
webSettings.setJavaScriptEnabled(true);
webSettings.setDomStorageEnabled(true);     
webView.loadUrl(website); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:13:51.607

要覆盖默认行为，请使用以下内容：

```
private class HelloWebViewClient extends WebViewClient {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        view.loadUrl(url);
        return true;
    }
} 
```

或多或少重复现有问题[Clicking URLs opens default browser](https://stackoverflow.com/questions/2378800/android-webview-click-opens-default-browser)？

# submit - Javascript自动登录第三方网站

> ID：12449341
> 
> 赞同：1
> 
> 时间：2012-09-16T18:07:54.423
> 
> 标签：submit, account, autologin

我正在尝试创建一个 javascript，它将自动按下第三方网站上的提交按钮。基本上，如果我想用 cookie 填写我的用户名和密码自动登录到一个站点，例如一个 google 帐户，javascript 会自动按下提交按钮，而我不必这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T18:45:27.503

我猜你正在寻找的是`.click()`所有按钮都有的方法。更详细的解释如下...

您可以在一个框架中使用`frameset`您的 JavaScript 代码，而在另一个框架中使用第三方页面。例如：

```
<!-- Main page -->
<HTML><frameset rows="0,*">
<!-- You see your script page. To see the actual login page, swap the * and the 0\. -->
  <frame src="http://third.party.website.com/login/page.htm" name="theirframe" />
  <frame src="myscript.html" name="myframe" />
</frameset></HTML> 
```

如果您要登录的页面是这样的（从 Gmail 的登录页面清理，他们有很多奇怪的换行符和空格！）：

```
<!-- Third-party page -->
<div class="email-div">
  <label for="Email"><strong class="email-label">Username</strong></label>
  <input type="email" spellcheck="false" name="Email" id="Email" value="">
</div>
<div class="passwd-div">
  <label for="Passwd"><strong class="passwd-label">Password</strong></label>
  <input type="password" name="Passwd" id="Passwd">
</div>
<input type="submit" class="g-button g-button-submit" name="signIn" id="signIn" value="Sign in"> 
```

那么你的脚本可能是这样的：

```
<!-- Your script page (myscript.html) -->
<HTML><body>
<!-- Insert custom message here... -->
Logging you in......
<script>
  //parent.theirframe.document.getElementById("Email").value = getemail();
  //parent.theirframe.document.getElementById("Passwd").value = getpass();
  parent.theirframe.document.getElementById("signIn").click();
</script>
<body></HTML> 
```

如果您的浏览器告诉您“ID 为“电子邮件”的元素不存在”或其他内容，则您的浏览器可能在登录页面之前加载了您的脚本页面。在这种情况下，您必须将登录页面放在`iframe`自定义页面中的命名中，并将脚本放在页面正文中的**之后**`iframe`。如果您最终这样做了，[此页面](http://javascript.info/tutorial/frames-and-iframes)将帮助您访问`iframe`的内容。

希望这会有所帮助。

# android - android 记分卡 - 共享首选项和显示

> ID：12449345
> 
> 赞同：0
> 
> 时间：2012-09-16T18:08:20.293
> 
> 标签：android, sharedpreferences

我现在正在制作 4 名球员的记分卡，用户在页面底部输入 4 名球员的分数，当按下 + 按钮时，刚刚输入的分数将添加到上面的滚动视图中。

slot number 定义为整数，这样当用户在对应的 EditText 中输入 1、12、34、56、78 时，app 可以识别并添加一行 slot =1，则 Player 1 得分为 12，玩家 2 为 34，P3 = 56，P4 = 78。

然后当用户输入另一个集合，如 2、23、45、67、89 时，它将添加为第 2 轮，依此类推。至此行可以正常添加，槽号可以是1、2、3等等，但是不知道为什么

第 1 轮：槽号正确为 1，但上面输入的所有 4 名玩家得分都变为 78，

第 2 轮：插槽号正确为 2，但上面输入的所有 4 名玩家得分都变为 89。

```
 public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.main);

      // get the SharedPreferences that contains the user's saved slots 
      SavedSlotsP1 = getSharedPreferences("slots", MODE_PRIVATE);
      SavedSlotsP2 = getSharedPreferences("slots", MODE_PRIVATE);
      SavedSlotsP3 = getSharedPreferences("slots", MODE_PRIVATE);
      SavedSlotsP4 = getSharedPreferences("slots", MODE_PRIVATE);

      SlotTableLayout = (TableLayout) findViewById(R.id.SlotTableLayout);  
      SlotEditText = (EditText) findViewById(R.id.SlotEditText);
      P1ScoreEditText = (EditText) findViewById(R.id.P1ScoreEditText);
      P2ScoreEditText = (EditText) findViewById(R.id.P2ScoreEditText);
      P3ScoreEditText = (EditText) findViewById(R.id.P3ScoreEditText);
      P4ScoreEditText = (EditText) findViewById(R.id.P4ScoreEditText);

      refreshButtons(null);
   } // end method onCreate

public OnClickListener addButtonListener = new OnClickListener()
   // create a new Button and add it to the ScrollView   
   {
      @Override
      public void onClick(View v) 
      {
         if (SlotEditText.getText().length() > 0 &&
             P1ScoreEditText.getText().length() > 0 && 
             P2ScoreEditText.getText().length() > 0 &&
             P3ScoreEditText.getText().length() > 0 && 
             P4ScoreEditText.getText().length() > 0 )            
         {
            SaveTagToFile(SlotEditText.getText().toString(),
                    P1ScoreEditText.getText().toString(), 
                    P2ScoreEditText.getText().toString(), 
                    P3ScoreEditText.getText().toString(), 
                    P4ScoreEditText.getText().toString());

            SlotEditText.setText(""); 
            P1ScoreEditText.setText(""); 
            P2ScoreEditText.setText("");
            P3ScoreEditText.setText(""); 
            P4ScoreEditText.setText("");

            // hide the soft keyboard
            ((InputMethodManager) getSystemService(
               Context.INPUT_METHOD_SERVICE)).hideSoftInputFromWindow(
               SlotEditText.getWindowToken(), 0);  
         } // end if
         else 
         {
            AlertDialog.Builder builder = new AlertDialog.Builder(FavoriteTwitterSearches.this);
            builder.setTitle(R.string.missingTitle); 
            builder.setMessage(R.string.missingMessage);
            builder.setPositiveButton(R.string.OK, null);             
            AlertDialog errorDialog = builder.create();
            errorDialog.show();
         } 
      } 
   };    

   private void SaveTagToFile(String Slot, String P1Score, String P2Score, String P3Score, String P4Score)
   // save the new row to the file, then refresh all Buttons
   {
      // originalScore will be null if we're modifying an existing search
      String originalScoreP1 = SavedSlotsP1.getString(Slot, null);
      String originalScoreP2 = SavedSlotsP2.getString(Slot, null);
      String originalScoreP3 = SavedSlotsP3.getString(Slot, null);
      String originalScoreP4 = SavedSlotsP4.getString(Slot, null);

      // get a SharedPreferences.Editor to store new row data
      SharedPreferences.Editor preferencesEditorP1 = SavedSlotsP1.edit();
      SharedPreferences.Editor preferencesEditorP2 = SavedSlotsP2.edit();
      SharedPreferences.Editor preferencesEditorP3 = SavedSlotsP3.edit();
      SharedPreferences.Editor preferencesEditorP4 = SavedSlotsP4.edit();

      preferencesEditorP1.putString(Slot, P1Score);
      preferencesEditorP2.putString(Slot, P2Score);
      preferencesEditorP3.putString(Slot, P3Score);
      preferencesEditorP4.putString(Slot, P4Score);

      preferencesEditorP1.apply();
      preferencesEditorP2.apply();
      preferencesEditorP3.apply();
      preferencesEditorP4.apply();

      // if this is a new slot, add its GUI
      if (originalScoreP1 == null) //P1 imply also P2, P3, P4
          refreshButtons(Slot); 
   } 

private void refreshButtons(String ThereIsNewSlot)
   // recreate search tag and edit Buttons for all saved searches;
   // pass null in all circumstances to renew and recreate to show all the saved rows

   {
      // store saved tags in the tags array
      String[] slots = SavedSlotsP1.getAll().keySet().toArray(new String[0]);

      Arrays.sort(slots, String.CASE_INSENSITIVE_ORDER); // sort by slot

      // if a new row was added, insert in GUI at the appropriate location
      if (ThereIsNewSlot != null) {ToDisplayTagGUI(ThereIsNewSlot, Arrays.binarySearch(slots, ThereIsNewSlot));}
      else // recreate and display GUI for ALL tags
      {for (int index = 0; index < slots.length; ++index) ToDisplayTagGUI(slots[index], index);} 
   }

   private void ToDisplayTagGUI(String Slot, int index)
   // add a new tag button and corresponding edit button to the GUI   
   {
      LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
      View newTagView = inflater.inflate(R.layout.new_tag_view, null);

      EditText SlotNewTagEditText = (EditText) newTagView.findViewById(R.id.SlotNewTagEditText);
      EditText P1NewTagScoreEditText = (EditText) newTagView.findViewById(R.id.P1NewTagScoreEditText);
      EditText P2NewTagScoreEditText = (EditText) newTagView.findViewById(R.id.P2NewTagScoreEditText);
      EditText P3NewTagScoreEditText = (EditText) newTagView.findViewById(R.id.P3NewTagScoreEditText);
      EditText P4NewTagScoreEditText = (EditText) newTagView.findViewById(R.id.P4NewTagScoreEditText);
      Button newTagEditButton = (Button) newTagView.findViewById(R.id.NewTagEditButton); 

      String P1Score = SavedSlotsP1.getString(Slot, "");
      String P2Score = SavedSlotsP2.getString(Slot, "");
      String P3Score = SavedSlotsP3.getString(Slot, "");
      String P4Score = SavedSlotsP4.getString(Slot, ""); 

      SlotNewTagEditText.setText(""+Slot); // assume Slot for P1 = P2 = P3 = P4
      P1NewTagScoreEditText.setText(""+P1Score);
      P2NewTagScoreEditText.setText(""+P2Score); 
      P3NewTagScoreEditText.setText(""+P3Score); 
      P4NewTagScoreEditText.setText(""+P4Score); 

      // add new tag and edit buttons to queryTableLayout
      SlotTableLayout.addView(newTagView, index);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:10:43.993

您对每个玩家的得分使用相同的 SharedPrefs 和 key，因此每次连续写入都会覆盖它。

更改为每个播放器加载的首选项，或使键唯一。我会做后者，这意味着你也可以为每个玩家放弃商店的概念，并做这样的事情：

```
scoreStore = getSharedPreferences("scores", MODE_PRIVATE);

...

scoreEditor = scoreStore.edit();
scoreEditor.putString("p1score", p1score);
scoreEditor.putString("p2score", p2score);
scoreEditor.putString("p3score", p3score);
scoreEditor.putString("p4score", p4score);
scoreEditor.apply(); 
```

# c - 基本的按位（我认为）或示例？

> ID：12449347
> 
> 赞同：2
> 
> 时间：2012-09-16T18:08:29.947
> 
> 标签：c, if-statement, bit-manipulation

所以我想要一个 if 语句就像：`if (foo == ("bar" | "barbar"))`. 我认为这是按位或运算符，但我不确定。无论如何，这不起作用。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:18:44.840

正如@cnicutar 所述，`|`未为字符串文字定义按位或运算符。

在我看来，如果 foo 等于“bar”或“barbar”，您正在尝试执行代码。这*将*（请注意，这将不起作用）看起来像这样（使用标准的布尔 OR 运算符，`||`）：

```
if ((foo == "bar") || (foo == "barbar")) 
```

这不起作用（它会编译，但可能不会按照您的意图进行），因为“bar”和“barbar”（我猜也是 foo）是字符指针，并且这个 if 语句将比较这些字符串的 ADDRESSES。你要做的是：

```
if ((strcmp(foo, "bar") == 0) || (strcmp(foo, "barbar") == 0)) 
```

请注意，您必须检查 strcmp() 的结果是否为 0，因为这表示相等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:13:18.240

> 无论如何，这不起作用。关于我做错了什么的任何想法？

未为字符串文字定义按位或运算符，因此在该上下文中使用它是没有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T18:15:54.970

如果你想比较你需要使用的字符串`strcmp()`（[manpage](http://pubs.opengroup.org/onlinepubs/009695399/functions/strcmp.html)）：

```
if (strcmp(foo, "bar") == 0 ||
    strcmp(foo, "barber") == 0)
{
    ...
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T18:27:26.710

按位 OR 运算符对被 OR 运算的值中的各个位执行 OR 运算。

示例：0b10111001 | 0b01101101 == 0b11111101

```
uint8_t a = 0xF0;
uint8_t b = 0x0F;
uint8_t c = a | b; // This is 0xFF 
```

在文字的情况下，由 OR 运算符操作的值是它们的地址，因此无法按照您的代码似乎想要的方式工作。

如前面的答案所述，您应该使用库中的`strcmp`or`strncmp`函数`string.h`来比较字符串。

# python - 为我的家庭作业在 Python 中实现“man got to mow”押韵

> ID：12449348
> 
> 赞同：0
> 
> 时间：2012-09-16T18:08:30.320
> 
> 标签：python

我们必须编写一个程序，就像一个人去割草的孩子们的押韵。我们必须使用列表来做到这一点。我的老师并不担心男人和男人的正确英语。

这是韵的链接[http://www.kididdles.com/lyrics/o105.html](http://www.kididdles.com/lyrics/o105.html)

这是我目前所拥有的......

```
men = input ('enter how many men you would like to mow the meadow')
menmow = 1
menlist = []
while menmow <men:
   print str(menmow) + ' man went to mow'
   print 'went to mow a meadow'
   print 'one man and his dog'
   print 'went to mow a meadow'
   menlist.insert [0.2]
if menmow >men:
   print 'your meadow has been mowed' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:12:44.037

对于初学者，您有一个无限循环（while 循环永远不会终止）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:14:48.320

你离这个很远。有些细节是错误的，你会在测试时发现。缺少的是正确执行“一个人和他的狗”这句话。这应该针对每个对联进行更改。

你可以做的是创建第二个循环来输出一个人，两个人等。提示：`print "text",`将打印文本，但抑制换行符。

作为替代方案，您可以使用 for 循环将文本构建为列表，然后将其输出。就像在您的主循环中一样，您可以保留一个计数器并附`str(counter) + " man"`加到列表中。要将此列表输出为字符串，请使用`' '.join(list)`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T18:23:37.617

*   您可以`while`通过仅使用`for`循环和`range()`对象来简化循环。
*   使用函数。他们是你的朋友。
*   将列表的内容连接在一起使用`', '.join(your_list)`

这是我解决问题的方法：

```
def lyrics(men):
  verses = []

  verses.append(str(len(men)) + ' men went to mow,')
  verses.append('Went to mow a meadow,')
  verses.append(', '.join(reversed(men)) + ' and his dog,')

  return '\n'.join(verses)

num_men = int(raw_input('How many men will mow the meadow? '))

song = []
men = []

for man in range(1, num_men + 1):
  men.append(str(man) + ' men')
  song.append(lyrics(men))

print '\n\n'.join(song)
print
print 'your meadow has been mowed' 
```

要真正让您的代码吐出真正的歌曲（带有拼写的数字），请使用字典将数字映射到单词：

```
num_men = int(raw_input('How many men will mow the meadow? '))

def lyrics(men):
    return '{num_men} went to mow,\nWent to mow a meadow,\n{men} and his dog'.format(
      num_men=len(men),
      men=', '.join(reversed(men)).capitalize()
  )

song = []
men = []

numbers = {
    1: 'one',
    2: 'two',
    3: 'three',
    4: 'four',
    5: 'five',
    6: 'six',
    7: 'seven',
    8: 'eight',
    9: 'nine'
}

for man in range(1, num_men + 1):
    men.append('{} {}'.format(numbers[man], 'man' if man == 1 else 'men'))
    song.append(lyrics(men))

print '\n\n'.join(song)
print
print 'your meadow has been mowed' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T20:02:03.213

我看到了问题，并决定尝试一下，只是为了见鬼。这就是我想出的。
由于用户输入必须是数字，因此您需要创建一个**字典**来将数字映射到数字（在单词中，例如 1 变为**one**）。为了创建字典，您需要知道用户将输入的**最大值。**
**或者**
像那样使用数字，而不是单词中的数字。
我选择了第二个选项；这是代码；随意弄乱它。

```
def one_man():
    返回 ”””
            一个人去割草，\n
            去割草场，\n
            一个男人和他的狗，\n
            去割草。\n

```
 """; 
```

def many_men（num_of_men，collat​​ed_men）：
    返回 ”””
            {0} 名男子去割草，\n
            去割草场，\n
            {1} 1 个人和他的狗，\n
            去割草。\n
          """ . format(num_of_men, collat​​ed_men);

def collat​​e_men(num_of_men):
    结果 = "";
    而 num_of_men > 1：
        结果 += "{0} 名男子，" 。格式（num_of_men）；
        人数 -= 1；
    返回结果；

如果**名称**== “**主要**”：
    preamble = """ 要退出此程序，请在提示时输入 y 或 n""";
    打印序言；

loop = True;
while loop:

    preamble = raw_input("""Want to exit the program? y/n : """);
    if preamble == "y":
        loop = False;
        break;
    else:
        num_of_men_value = raw_input("""Enter the number of men you would like to mow the meadow with?: """);
        try:
            num_of_men = int(num_of_men_value);
            if num_of_men < 1:
                    print "Digit must be greater than 0";
            elif num_of_men == 1:
                    print one_man();
            else:
                    collated_men = collate_men(num_of_men);
                    print many_men(num_of_men, collated_men);
            continue;    
        except:
            print  "Number must be a valid digit";
            continue; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T18:13:43.930

如果您使用的是 Python 2.x，则该`input()`函数将像执行 Python 代码一样*执行*该语句。这可能不是你想要的。此外，您尝试这样做`menmow < men`，这将是 int 和 String 之间的无效比较。

将您的输入语句更改为：

```
men = int(raw_input ('enter how many men you would like to mow the meadow')) 
```

您还需要一个语句来结束您的循环。它将无限期运行，因为循环条件不关心`menlist`.

最后，`menlist.insert [0.2]`不是有效的语法。请务必检查如何将值插入列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-16T18:18:47.027

`menlist.insert[0.2]`是无效的; 你最终会遇到一个神秘的错误，比如`'builtin_function_or_method' object has no attribute '__getitem__'`.

作为`insert`一个函数，使用函数调用语法：在列表的开头（在 index 处）`menlist.insert(0, 2)`插入。`2``0`

# bash - 如何为字符linux终端着色

> ID：12449350
> 
> 赞同：0
> 
> 时间：2012-09-16T18:08:40.780
> 
> 标签：bash, ubuntu, terminal

我希望您能帮助编写一些代码：我希望 Ubuntu 12.04.1 终端将“/”字符与其他文本颜色相反。

这对于几乎所有直接在控制台中编写 bash/python 的人来说都非常重要......

**任何想法从哪里开始？**

我正在考虑一个终端的自定义插件，它可以在打印之前解析文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T15:43:06.693

该`tput`命令是您的朋友（假设您想留在 shell 脚本领域）。

```
$ tput smso; echo Bold text; tput rmso 
```

问：突出显示*/*字符会给你什么？

# php - 使用 PHP 将选项卡式文本转换为树（SQL 将每一行插入 TreeNode 表（TreeNodeID、ParentID、Title））

> ID：12449355
> 
> 赞同：2
> 
> 时间：2012-09-16T18:09:17.337
> 
> 标签：php, database, automation, screen-scraping, arbor.js

我正在试验 ArborJS，试图建立一个知识树。[这里](http://atr.eng.utah.edu/~lwilkins/arborTest/KT1/index.html)是我的测试区（左键进入节点，右键回到开头）。我已经充实了“人文与艺术”部分的“全部”，所以我建议通过该区域进行播放。

我正在从[维基百科的学术学科列表文章中](http://en.wikipedia.org/wiki/List_of_academic_disciplines)构建这棵树。

现在，我从一个 mySQL 表中提取数据（通过 PHP）。表结构为TreeNodeID、ParentID、Title。“TreeNodeID”是主键（自动递增），“ParentID”是节点的父节点，“Title”是应该在节点上显示的文本。

我现在在这篇文章的第 7 页，共 27 页。我觉得我没有利用我的计算机的能力来自动化这个手动输入的过程。

我刚刚制作了所有主题的文本文件。它采用以下格式：

```
Anthropology
    Biological Anthropology
        Forensic Anthropology
        Gene-Culture Coevolution
        Human Behavioral Ecology
    Anthropological Linguistics
        Synchronic Linguistics
        Diachronic Linguistics
        Ethnolinguistics
        Socioloinguistics
    Cultural Anthropology
        Anthropology of Religion
        Economic Anthropology
Archaelogy
... 
```

如何使用 PHP 来完成此操作并填充我的数据库（为每个节点使用正确的 ParentID）？

更新#3：工作代码（由下面的正确答案给出）

```
<?php
//echo "Checkpoint 1";

$data = "
Social sciences
    Anthropology
        Biological anthropology
            Forensic anthropology
            Gene-culture coevolution
            Human behavioral ecology
            Human evolution
            Medical anthropology
            Paleoanthropology
            Population genetics
            Primatology
        Anthropological linguistics
            Synchronic linguistics (or Descriptive linguistics)
            Diachronic linguistics (or Historical linguistics)
            Ethnolinguistics
            Sociolinguistics
        Cultural anthropology
            Anthropology of religion
            Economic anthropology
            Ethnography
            Ethnohistory
            Ethnology
            Ethnomusicology
            Folklore
            Mythology
            Political anthropology
            Psychological anthropology
    Archaeology
        ...(goes on for a long time)
";

//echo "Checkpoint 2\n";

$lines = preg_split("/\n/", $data);

$parentids = array(0 => null);
$db = new PDO("host", 'username', 'pass');
$sql = 'INSERT INTO `TreeNode` SET ParentID = ?, Title = ?';
$stmt = $db->prepare($sql);

//echo "Checkpoint 3\n";

foreach ($lines as $line) {
    if (!preg_match('/^([\s]*)(.*)$/', $line, $m)) {
        continue;
    }
    $spaces = strlen($m[1]);
    //$level = intval($spaces / 4); //assumes four spaces per indent
    $level = strlen($m[1]); // if data is tab indented
    $title = $m[2];
    $parentid = ($level > 0 ? $parentids[$level - 1] : 1); //All "roots" are children of "Academia" which has an ID of "1";

    $rv = $stmt->execute(array($parentid, $title));

    $parentids[$level] = $db->lastInsertId();
    echo "inserted $parentid - " . $parentid . " title: " . $title . "\n";
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:57:08.880

未经测试，但这应该适合你（使用 PDO）：

```
<?php

$data = "
Anthropology
    Biological Anthropology
        Forensic Anthropology
        Gene-Culture Coevolution
        Human Behavioral Ecology
    Anthropological Linguistics
        Synchronic Linguistics
        Diachronic Linguistics
        Ethnolinguistics
        Socioloinguistics
    Cultural Anthropology
        Anthropology of Religion
        Economic Anthropology
Archaelogy
";

$lines = preg_split("/\n/", $data);

$parentids = array(0 => null);

$sql = 'INSERT INTO `table` SET ParentID = ?, Title = ?';
$stmt = $db->prepare($sql);

foreach ($lines as $line) {
    if (!preg_match('/^([\s]*)(.*)$/', $line, $m)) {
        continue;
    }
    #$spaces = strlen($m[1]);
    #$level = intval($spaces / 4); # if data is space indented
    $level = strlen($m[1]); # assumes data is tab indented
    $title = $m[2];

    $parentid = $level > 0
        ? $parentids[$level - 1]
        null;

    $rv = $stmt->execute(array($parentid, $title));

    $parentids[$level] = $db->lastInsertId();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:57:14.893

您可以尝试以下方法

```
// parser.php

<?php
include_once './vendor/autoload.php';

use Symfony\Component\DomCrawler\Crawler;

$crawler = new Crawler(file_get_contents('http://en.wikipedia.org/wiki/List_of_academic_disciplines'));

$texts = $crawler->filter('.tocnumber + .toctext');
$numbers = $crawler->filter('.tocnumber');

$last = '';

for ($i=0; $i < count($numbers); $i++) {
    $value = $numbers->eq($i)->text();
    if(!preg_match('/\d+.\d+/', $value)) {
        // is a root discipline
        $last = $texts->eq($i)->text();
    } else {
        // is a leaf discipline
        $disciplines[$last][$texts->eq($i)->text()] = $texts->eq($i)->text();
    }
}

var_dump($disciplines); 
```

有了这个，你可以做一些更多的事情，比如持久化数据库或任何内容，并且对其他 DOM 解析任务很有用

我使用了 Symfony Components 的 CssSelector 和 DomCrawler 很容易安装

作曲家.json

```
{
    "name": "wiki-parser",
    "require": {
        "php": ">=5.3.3",
        "symfony/dom-crawler": "2.1.0",
        "symfony/css-selector": "2.1.0"
    }
} 
```

在控制台中

```
$ php composer.phar install 
```

看看[getcomposer](http://getcomposer.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T18:49:48.053

我会说首先**复制粘贴**到文本文件更容易，就像您在上面所做的那样**缩进。**然后解析它：

*   读取每一行（一次一行），为您提供节点文本。
*   每个缩进都是一个新的孩子，所以前一个节点是父 id
*   `\t`如果您一直保持一致或保持计数，请检查 dents-count `indent level`。注意 0 缩进（根）。

这将允许您构建一个包含每个学科的**关联数组。**然后你**解释**它。例如：

*   获取所有根节点（根节点的第一个子节点，视情况而定）并给它们一个增量 id **`parse_id`**。
*   从上面继续沿着数组，将`parse_id`s 分配给所有节点。
*   然后开始将这些数据放入 MySQL。正如你所做的那样，将`mysqli_insert_id`数组与 一起添加，例如`parse_id`调用。**`db_id`**这应该用于`parent_id`将 db 中的 required 与 parent 的`parse_id`.

假设您不尝试检查常见研究或唯一节点文本，那应该足够简单。

# nhibernate - 可空 GUID (Guid?) 作为域类 (NHibernate) 的 ID

> ID：12449358
> 
> 赞同：0
> 
> 时间：2012-09-16T18:09:37.447
> 
> 标签：nhibernate, fluent-nhibernate, fluent-nhibernate-mapping

我在我的表中使用 Guid.comb 作为我的主键。

我从未找到任何使用可为空的 guid 作为域类 ID 的示例；这是 NHibernate 的坏习惯吗？

原因：我将 POCO 列表绑定到组合框；如果没有可为空的 guid，我必须处理 Guid.Empty 的验证，而不是在 DataAnnotations 所需的验证中使用默认构建。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:39:39.853

主键的主要原因是它为特定记录定义了唯一标识符。如果您能够使您的主键可以为空，那么 NHibernate 将无法区分具有空 GUID 的新创建记录和具有空或可为空 GUID 的数据库中现有记录之间的区别。

所以是的，你看不到任何这样的例子，因为这将是一个非常糟糕的做法。

关于您将 POCO 绑定到组合框的示例，这也是一种不好的做法。遵循[关注点分离原则](http://en.wikipedia.org/wiki/Separation_of_concerns)，您不希望将您的 UI 逻辑与特定于域的逻辑（例如您与 NHibernate 一起使用以持久保存到数据库的 POCO/实体）混合。通常，您将创建一个 ViewModel 类来存储 UI 所需的任何数据。然后，您将拥有一个服务/业务层，该层将存储业务逻辑并处理将您的 ViewModel 类转换/映射到 POCO/实体/DTO。

因此，在您的示例中，如果应用程序遵循关注点分离原则，您甚至不会遇到您面临的问题，因为您不会公开您希望使用 NHibernate 创建/保存/更新的对象。以这种方式分离您的应用程序提供了许多其他好处，例如不直接将您的数据库架构绑定到您的 UI，允许您轻松修改 UI、服务层或数据库，而不会显着影响任何其他层等。

# windows-phone-7 - 适用于 Windows Phone 的 XNA 4.0 动画创意

> ID：12449359
> 
> 赞同：0
> 
> 时间：2012-09-16T18:09:37.767
> 
> 标签：windows-phone-7, animation, xna

我正在开发一款游戏，我需要让两个角色互相交谈。我知道 XNA 不允许我播放全屏以外的电影，所以我需要以不同的方式在我的游戏应用程序中实际“播放”动画。角色周围有动画环境，因此动画不是简单的头部运动，因此，通过 3D 模型中的关键帧动画角色不是一种选择。两个角色之间的对话是关卡之间的过场动画，因此它不是游戏玩法本身的一部分。

我不确定最好的方法是什么，所以如果您有任何想法，请告诉我。

这是我到目前为止的想法：

**1\. 为角色创建所有单独的框架作为图像。将这些图像加载到 spritesheet 中，并以我想要的帧速率浏览每一帧。**

这种方法的问题在于，2048x2048 的最大 spritesheet 纹理不允许太多帧，因为字符大约为 300x200。另一个问题是我有两个字符，因此，最小的场景需要我在内存中创建两个 2048x2048 的 spritesheets ......而且我想保持低内存要求。

**2\. 加载一批帧（图像），播放它们，然后释放它们并加载下一组。我知道通常加载大量小纹理并在绘图调用中在它们之间切换（性能方面）并不是一个好主意，但在这种情况下我似乎别无选择。**

我担心在 Update-Draw 循环中从内存中卸载东西并在 while 中加载其他东西会减慢整个场景......所以不确定这是否是一种理智的方法。

另一个想法是用整个东西制作一个 mp4/wmv [char 动画、对话的字幕等]，但是承载这些角色的界面不会像直接渲染时那样“流畅”，等等......

谢谢大家的建议，

马吕斯

**编辑 1**：

我已经测试了场景 2，似乎性能还可以。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:05:44.197

我使用了场景 2。它适用于我的特定情况，但我确信它不适用于所有情况。

# sql-server-2008 - 获取所有数据库操作（插入、更新、删除、更改……）信息

> ID：12449363
> 
> 赞同：0
> 
> 时间：2012-09-16T18:09:46.637
> 
> 标签：sql-server-2008

在 sql server 2008 中，有没有办法让用户插入一些行，或者更新、删除、删除、更改一些表？
我们能得到这些信息发生的日期吗？

还有没有办法知道数据是从同一台机器还是从其他机器插入的？

编辑：如果真的很难，那么实现这一点的方法可能是用户触发器
，但是有没有办法捕捉数据库上发生的每一个动作，这样我就可以把它们全部记录下来？**在任何表上插入**
类似的东西

 **我希望一切都在数据库上完成，所以无论我使用什么业务应用程序，它都会被记录下来

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:15:08.180

除非您已经预先设置了一些东西 - 某种 CDC 机制，否则从日志中提取该信息将非常困难。如果有足够的时间，这是可能的，但这是一项高度熟练的取证活动，执行起来非常耗时。（并且依赖于完整的日志可用。）有第三方日志阅读器可以帮助解决这个问题，但这仍然是一项巨大的努力。**

# javascript - XMLHttpRequest onunload？

> ID：12449367
> 
> 赞同：3
> 
> 时间：2012-09-16T18:10:17.133
> 
> 标签：javascript, ajax, xmlhttprequest

在我的网络应用程序中，我需要在用户离开页面之前发送他们更改的最新数据。

当页面卸载时，我会调用这样的函数：

```
window.onbeforeunload=sendData; 
```

这就是函数内部的内容

```
function sendData(){
        var xhr = new XMLHttpRequest;
        var storage = container;
        xhr.open("POST","save.php",false);
        xhr.send("information="+container);
} 
```

我的问题：

1.  更正确的是：在用户关闭页面之前使用异步或同步发送请求？

2.  是否可以使请求更小？我只发送最多包含两个字符的变量，整个请求需要 171 个字节！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-18T12:03:57.537

必须使用同步请求，否则在 IE10 和 IE11 中无法传输数据，请参见[IE10 中的 Unload 事件，无表单数据](https://stackoverflow.com/questions/16383939/unload-event-in-ie10-no-form-data)。

# ruby-on-rails - 从控制器重构为模型

> ID：12449370
> 
> 赞同：0
> 
> 时间：2012-09-16T18:10:37.267
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, refactoring

我的订单控制器中有此操作：

```
# POST /orders
# POST /orders.json
def create
  @order = Order.new(params[:order])

  #spostare il ciclo cart > line_items come metodo del modello Order
  cart = session[:cart]

  cart.each do | id, quantity |
    item = Project.find_by_id(id)
    @line_item = LineItem.new
    @line_item.project = item
    @line_item.quantity = quantity
    @line_item.price = item.price
    @order.line_items << @line_item
  end

  @order.user = current_user

  session.delete(:cart)

  respond_to do |format|
    if @order.save
      #Send an email to admin
      UserMailer.order_created_to_admin(@order).deliver

      format.html { redirect_to :dashboard, notice: "L'ordine è stato creato correttamente." }
      format.json { render json: @order, status: :created, location: @order }
    else
      format.html { render action: "new" }
      format.json { render json: @order.errors, status: :unprocessable_entity }
    end
  end
end 
```

现在我想对其进行一些重构，并且正在考虑将以下几行移至 Order Model 作为一种方法：

```
 cart.each do | id, quantity |
    item = Project.find_by_id(id)
    @line_item = LineItem.new
    @line_item.project = item
    @line_item.quantity = quantity
    @line_item.price = item.price
    @order.line_items << @line_item
  end 
```

像那样：

```
class Order < ActiveRecord::Base
  attr_accessible :user_id

  belongs_to :user
  has_many :line_items, :dependent => :destroy
  accepts_nested_attributes_for :line_items, :allow_destroy => true

  def add_line_items_to_order_from_cart(cart) do
    cart.each do | id, quantity |
      item = Project.find_by_id(id)
      @line_item = LineItem.new
      @line_item.project = item
      @line_item.quantity = quantity
      @line_item.price = item.price
      line_items << @line_item
    end
  end
end 
```

并从控制器调用它，如：

```
order.add_line_items_to_order_from_cart(cart) 
```

就“瘦控制器/胖模型”模式而言，它是否有意义？

谢谢你

编辑

我现在的订单模型：

```
class Order < ActiveRecord::Base
  attr_accessible :user_id

  belongs_to :user
  has_many :line_items, :dependent => :destroy
  accepts_nested_attributes_for :line_items, :allow_destroy => true
  validates :user, :presence => :true

  def add_line_items_to_order_from_cart(cart)
    cart.each do | id, quantity |
      item = Project.find(id)
      line_items << LineItem.new(project: item,
                                 quantity: quantity,
                                 price: item.price)
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:35:52.483

对我来说很有意义，您正在为模型提供哈希，并且模型负责解析哈希并将其转换为数据库记录。

甚至可以将整个 line_item 东西移到一行中，这样更简洁：

```
def add_line_items_to_order_from_cart(cart) do
  cart.each do |id, quantity|
    item = Project.find_by_id(id)
    line_items << LineItem.new( project: item,
                                quantity: quantity,
                                price: item.price )
  end
end 
```

你甚至可以这样尝试：

```
def add_line_items_to_order_from_cart(cart) do
  line_items = cart.map do |id, quantity|
    item = Project.find_by_id(id)
    LineItem.new( project: item,
                  quantity: quantity,
                  price: item.price )
  end
end 
```

但总体思路是对的，将这些东西移到模型中！;)

# r - 使用 roxygen2 包打包 .Rd 文件

> ID：12449371
> 
> 赞同：8
> 
> 时间：2012-09-16T18:10:58.437
> 
> 标签：r, package, roxygen2

我有一个关于使用`roxygen2`包为我的 R 包创建 .Rd 文件的问题。

我很清楚，为了记录 R 函数，我可以在 emacs 中使用 Cc Co 在函数上方生成注释，然后填写它们，然后是`roxygenize("pkg")`. 这样，我就有了 R 函数的 .Rd 文件。但是，我不确定如何获取数据示例和包本身的 .Rd 文件？目前，我正在使用`prompt("data")`生成**data.Rd**和`promptPackage("pkg")`生成**pkg-package.Rd**。我必须将这些文件放入`man`文件夹中，然后单独编辑它们。如何以类似使用记录 R 函数的方式记录数据和打包`roxygen2`？

非常感谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T18:19:09.393

有关数据，请参阅[关于 SO 的上一个问题，](https://stackoverflow.com/questions/2310409/how-can-i-document-data-sets-with-roxygen)其中建议：

```
#' This is data to be included in my package
#'
#' @name data-name
#' @docType data
#' @author My Name \email{blahblah@@roxygen.org}
#' @references \url{data_blah.com}
#' @keywords data
NULL 
```

我怀疑你可以为`pkg-package.Rd`. 如果它*必须*是 roxygen 格式，请考虑

*   手动翻译或
*   rd2roxygen[包](http://cran.r-project.org/web/packages/Rd2roxygen/index.html)。

# python - 如何使networkx shortest_path() 可以支持自定义权重函数？

> ID：12449375
> 
> 赞同：4
> 
> 时间：2012-09-16T18:11:21.163
> 
> 标签：python, graph, metadata, networkx

在networkx中，

```
shortest_path(G, source=None, target=None, weight=None)  
# weight/distance/cost 1 by default 
```

可以支持边属性“权重”作为算子来计算图中两个节点之间的最短路径。

但是，如果我有其他带有节点/边缘的元类，例如：

```
class meta( object ):
    def __init__( self, weight_shift = 1 ):
        self.weight_shift = weight_shift

G.add_node('A', meta_data = meta( weight_shift = 100 ) )
G.add_node('B', meta_data = meta( weight_shift = 200 ) )
G.add_node('C')
...
G.add_edge("A", "C", weight=10, meta_data = meta( weight_shift = -5 ))  
G.add_edge("B", "C", weight=10, meta_data = meta( weight_shift = -10 ))
G.add_edge("A","B") 
```

是否可以将函数定义为 shortest_path() 的权重参数？

```
def weight_sum():
    ... 
```

其中可以计算“运行时”中的“权重”，例如使用逻辑：

```
weight_sum = edge.weight + edge.meta.weight_shift + node_left.meta.weight_shift + node_right.meta.weight_shift 
```

然后

```
shortest_path(G, source="A", target="B", weight=weight_sum()) 
```

获得最短路径？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:22:11.570

NetworkX 中的当前实现是不可能的。

两个选项是：

1）在您的最短路径搜索处理所有边缘之前，根据您的权重函数添加新的边缘属性。使用该属性作为 shortest_path() 的“权重”参数

2）替换像

```
vw_dist = dist[v] + edgedata.get(weight,1) 
```

在 Dijkstra 算法的代码中，将自定义函数用于边缘权重，而不是获取“权重”属性。

# c# - 使用来自其他 MVC 项目的视图

> ID：12449376
> 
> 赞同：0
> 
> 时间：2012-09-16T18:11:26.077
> 
> 标签：c#, asp.net-mvc-3, razor, partial-views

我有一些使用相同局部视图的 MVC3 项目。这些视图包含我可以在其他 MVC 项目中轻松重用的部分表单。有没有办法去中心化`Views`。就像，也许在另一个项目中？所以我可以添加项目的程序集并轻松调用我需要的视图？

否则，每次我开始一个新项目时，我都必须复制可重复使用的视图文件夹。当我对其中一个视图进行更改时，我也必须在所有其他项目中更改它。如果我能把它放在一个地方并以某种方式引用它会更好。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:49:33.807

最简单的解决方案是使用 IIS 的虚拟文件夹功能在您的视图文件夹中简单地映射一个共享虚拟文件夹。这样，所有使用相同视图的应用程序实际上将指向相同的物理文件夹。

您在部署时可能会遇到一些挑战，您可以将共享文件夹作为他们自己项目的一部分。但是你需要在本地开发机器和服务器上处理这个问题。

# r - “if”和“for”的简单使用

> ID：12449377
> 
> 赞同：0
> 
> 时间：2012-09-16T18:11:45.303
> 
> 标签：r

我一直在尝试学习 R 中“if”和“for”的用法。作为一个简单的例子，我设置了数据框

```
V1<-c(3,2,2,4,5)
V2<-c(3,7,3,5,2)
V3<-c(5,2,5,7,5)
V4<-c(1,1,2,3,4)
V5<-c(1,2,6,7,5)
DF2<-data.frame(V1=V1,V2=V2,V3=V3,V4=V4,V5=V5)
DF2
  V1 V2 V3 V4 V5
1  3  3  5  1  1
2  2  7  2  1  2
3  2  3  5  2  6 
4  4  5  7  3  7
5  5  2  5  4  5 
```

我的目标是设置一个 if 语句，该语句将根据行值删除一行中的一列。举个例子：

```
If V1 = 5, drop column V5
If V1 = 4, drop column V4 & V5 
```

所以根据这些规则，我的数据框最终看起来像这样

```
 V1 V2 V3 V4 V5
1  3  3  5  1  1
2  2  7  2  1  2
3  2  3  5  2  6 
4  4  5  7  
5  5  2  5  4 
```

我的第一个想法是我可以写一个简单的 if 语句来做到这一点：

```
if(DF2$V1==5){
    DF2[-5]
}else if(DF2$V1==4){
    DF2[-4:5]
} 
```

但我得到一个错误，“if”条件语句不能>1。所以我想如果我写了一个“for”循环，它将允许if语句逐行执行，允许条件语句为==1。

```
for(i in 1:length(DF2)){
if(DF2$V1==5){
    DF2[-5]
}else if(DF2$V1==4){
    DF2[-4]
}
} 
```

但现在我得到了同样的错误，只是 x10。所以我显然是在同一棵树上吠叫。所以我的问题是 - 处理我的原始数据框问题的最佳方法是什么？如果没有某种 if 或 for 循环答案，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-16T18:23:25.043

这不会帮助您使用`if`，因为您不应该`if`在这里使用，而是将解决方案矢量化。此外，您真的不能只在数据框中放置漏洞，因为根据定义，数据框是等长向量的列表。我想你可以把它变成一个字符向量并用“”替换你想要的部分，但这可能没有用。另一种方法是使用`print`并将其打印为矩阵，并告诉它不要显示 NA 或缺失值。

长话短说：

1.  矢量化
2.  替换为 NA 不为空
3.  将 NA 打印为空白将其转换为矩阵并使用打印函数的参数

这里是...

```
DF2[DF2$V1==5, 5] <- NA
DF2[DF2$V1==4, 4:5] <- NA
DF2

#If you want blanks printed.
M1 <- as.matrix(DF2)
rownames(M1) <- 1:nrow(M1)
print(M1, na.print="", quote=FALSE) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T19:00:23.857

老实说，我认为@Tyler 的方法更有效——对于普通 R 用户来说，这肯定是一种更典型的方法——但如果你执着于使用`if`，只需考虑一下你在做什么：

*   您正在`data.frame`逐行处理。
*   R 中的`apply()`函数允许您将您的指定`MARGIN`为`1`（按行应用函数）或`2`（按列应用函数）。
*   因此，您可以将条件设​​置为“函数”，`apply()`以便在每一行上使用，如下所示。

    ```
    t(apply(DF2, 1, function(x) { if(x[1] == 5) x[5] <- NA;
                                  if(x[1] == 4) x[4:5] <- NA;
                                  x} ))
    #      V1 V2 V3 V4 V5
    # [1,]  3  3  5  1  1
    # [2,]  2  7  2  1  2
    # [3,]  2  3  5  2  6
    # [4,]  4  5  7 NA NA
    # [5,]  5  2  5  4 NA 
    ```

这`t`只是在最后一步中转置输出。

### 基准

一些评论中提出了效率问题。在小数据集的情况下，我怀疑任何答案在效率上会有很大差异，所以我用更大（但仍然很小）的数据集做了一些基准测试。

这是数据集：

```
set.seed(1)
DF2 = data.frame(V1 = sample(5, 1000, replace = TRUE),
                 V2 = sample(5, 1000, replace = TRUE),
                 V3 = sample(5, 1000, replace = TRUE),
                 V4 = sample(5, 1000, replace = TRUE),
                 V5 = sample(5, 1000, replace = TRUE)) 
```

这是用于运行基准测试的代码和结果。在这里，我们可以很容易地看到 Tyler 的方法比使用`if (...) else if (...)`.

```
library(rbenchmark)
benchmark(
  Barranka = {
    for(i in seq(1,nrow(DF2))) {
      if(DF2$V1[i] == 5) {
        DF2[i,5] <- NaN
      } else if(DF2$V1[i] == 4) {
        DF2[i,4] <- NaN
        DF2[i,5] <- NaN
      }
    }},
  Tyler = {
    DF2[DF2$V1==5, 5] <- NA
    DF2[DF2$V1==4, 4:5] <- NA },
  mrdwab = {
    t(apply(DF2, 1, function(x) { if(x[1] == 5) x[5] <- NA;
                                  if(x[1] == 4) x[4:5] <- NA;
                                   x })) },
columns = c("test", "replications", "elapsed", "relative"), 
order = "relative")
#       test replications elapsed relative
# 2    Tyler          100   0.378    1.000
# 3   mrdwab          100   2.072    5.481
# 1 Barranka          100  11.885   31.442 
```

当我尝试将行数更改为 100000 时，使用`system.time()`Tyler 的方法和我的方法能够毫无问题地做必要的事情。Tyler 的经过时间是 0.315 秒，我的是 2.773 秒，Barranka 是 807.446 秒（13 多分钟！）。这是一个***巨大***的差异。

如果有人知道更好的基准测试方法，请随时编辑和更新这篇文章。

> > **注意**：这不是在这里批评任何人的特定方法，而是为了证明评论中的一些陈述是正确的。我喜欢（和讨厌）R 的一件事是几乎总是有不止一种方法可以做某事。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-16T18:25:54.623

好的，无需深入挖掘细节，我认为您应该使用 a`for`来遍历数据框，并使用 a`if`来执行删除。另一方面，您不能拥有具有不同行大小的数据框，因此将所需条目替换为`NaN`：

```
V1<-c(3,2,2,4,5)
V2<-c(3,7,3,5,2)
V3<-c(5,2,5,7,5)
V4<-c(1,1,2,3,4)
V5<-c(1,2,6,7,5)
DF2<-data.frame(V1=V1,V2=V2,V3=V3,V4=V4,V5=V5)

'The data frame, before replacing values:'; DF2
for(i in seq(1,nrow(DF2))) {
  if(DF2$V1[i] == 5) {
    DF2[i,5] <- NaN
  } else if(DF2$V1[i] == 4) {
    DF2[i,4] <- NaN
    DF2[i,5] <- NaN
  }
}

'The data frame, after replacing values:'; DF2 
```

运行此脚本时，您将获得以下输出：

```
> V1<-c(3,2,2,4,5)
> V2<-c(3,7,3,5,2)
> V3<-c(5,2,5,7,5)
> V4<-c(1,1,2,3,4)
> V5<-c(1,2,6,7,5)
> DF2<-data.frame(V1=V1,V2=V2,V3=V3,V4=V4,V5=V5)
> 
> 'The data frame, before replacing values:'; DF2
[1] "The data frame, before replacing values:"
  V1 V2 V3 V4 V5
1  3  3  5  1  1
2  2  7  2  1  2
3  2  3  5  2  6
4  4  5  7  3  7
5  5  2  5  4  5
> for(i in seq(1,nrow(DF2))) {
+   if(DF2$V1[i] == 5) {
+     DF2[i,5] <- NaN
+   } else if(DF2$V1[i] == 4) {
+     DF2[i,4] <- NaN
+     DF2[i,5] <- NaN
+   }
+ }
> 
> 'The data frame, after replacing values:'; DF2
[1] "The data frame, after replacing values:"
  V1 V2 V3  V4  V5
1  3  3  5   1   1
2  2  7  2   1   2
3  2  3  5   2   6
4  4  5  7 NaN NaN
5  5  2  5   4 NaN 
```

以防万一，我使用了一个出色的 R 参考站点：statmethods.net

希望这可以帮助你

# android - android - 小部件表面视图？

> ID：12449380
> 
> 赞同：1
> 
> 时间：2012-09-16T18:12:12.267
> 
> 标签：android, widget, surfaceview, flashlight

我正在编写一个小部件。当有人点击小部件按钮时，手电筒正在打开。如果再次单击小部件按钮，手电筒将关闭。我写了一个小应用程序，它可以工作，因为我的布局 xml 文件中有一个表面视图。在我的小部件 xml 上不起作用。

这是我的 widget_layout.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<SurfaceView
    android:id="@+id/surface"
    android:layout_width="1dp"
    android:layout_height="1dp" />

<ImageButton
    android:id="@+id/button"
    android:src="@drawable/off"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerInParent="true"
    android:scaleType="center"/>

</FrameLayout> 
```

在开发者页面上，有一段文字：

[http://developer.android.com/guide/topics/appwidgets/index.html](http://developer.android.com/guide/topics/appwidgets/index.html)

```
A RemoteViews object (and, consequently, an App Widget) can support the following layout classes:

FrameLayout
LinearLayout
RelativeLayout
GridLayout

And the following widget classes:

AnalogClock
Button
Chronometer
ImageButton
ImageView
ProgressBar
TextView
ViewFlipper
ListView
GridView
StackView
AdapterViewFlipper 
```

所以我的小部件按钮永远不会工作，因为我不能使用表面视图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-05T14:56:06.090

您需要传递虚拟表面纹理而不是表面视图.....例如：

将此添加到 turnLightOn 代码：

mCamera.setPreviewTexture(新 SurfaceTexture(0));

# c++ - 臃肿的 EXE 大小，以及与 Qt/MingW 的不需要的依赖关系

> ID：12449387
> 
> 赞同：5
> 
> 时间：2012-09-16T18:12:53.680
> 
> 标签：c++, qt4, g++, mingw, compiler-optimization

我试图弄清楚如何缩小在最新的 QT SDK (4.8.2) (mingw/g++ based) 下编译的 EXE 文件的大小。我正在开发一个香草 c++ 控制台应用程序，它有一个简单的循环并且只有#includes iostream，当我注意到它生成的 exe 大约为 465kb 时；比他们应该的要大得多！注释掉所有流的东西会使它降低到预期的 5kb 范围（尽管剩余的代码大部分都是死的）。这似乎根本不对，特别是因为我正在处理的另一个完整项目有一个 QGLwidget、窗口、十几个数据结构和约 3000 条语句，并且只有大约 126Kb 的时钟。我缺少一些设置或标志吗？这是 .pro，而 cpp 是微不足道的和无 Qt 的（基本上是 getline 和 cout 与半打字符交换）：

```
TEMPLATE = app
CONFIG += console
CONFIG -= app_bundle
CONFIG -= qt
SOURCES += main.cpp
QMAKE_CXXFLAGS_RELEASE += -O2
QMAKE_CXXFLAGS_RELEASE += -Os 
```

我尝试了其他一些配置，它肯定是在发布模式下编译的（调试大于 3Mb），但我不明白为什么它如此臃肿。

我还查看了 PE 头文件，我发现它正在从 libgcc_s_dw2-1.dll 和 mingwm10.dll 导入一些函数，如果我也能完全消除这些依赖关系，那就太好了，尤其是因为两者都不应该无论如何都需要。我可以通过添加到 .pro 使 libgcc 消失（以 17kb 的 exe 大小为代价）`QMAKE_LFLAGS_RELEASE += -static`，但 mingwm10.dll 仍然存在，调用单个函数。

基于整体膨胀，以及编译器试图潜入的所有无用框架的东西（至少是网络）。我猜这只是一些歪斜的设置的问题，尤其是一些默认编译器标志，如 -DQT_LARGEFILE_SUPPORT 或 -mthreads。这是编译输出（为强调而添加的项目符号）：

*   14:04:00：项目竞赛的运行步骤...
*   14:04:00：配置不变，跳过 qmake 步骤。
*   14:04:01：开始：“C:\QtSDK\mingw\bin\mingw32-make.exe”
*   C:/QtSDK/mingw/bin/mingw32-make -f Makefile.Release
*   mingw32-make[1]: 进入目录`C:/Documents and Settings/Administrator/My Documents/QT/conTest'
*   g++ -c -O2 -O2 -Os -frtti -fexceptions -mthreads -Wall -DUNICODE -DQT_LARGEFILE_SUPPORT -I"c:\QtSDK\Desktop\Qt\4.8.1\mingw\mkspecs\win32-g++" -o release\main .o main.cpp g++ -Wl,-s -Wl,-subsystem,console -mthreads -o release\conTest.exe release/main.o
*   mingw32-make[1]: 离开目录`C:/Documents and Settings/Administrator/My Documents/QT/conTest'
*   14:04:10：进程“C:\QtSDK\mingw\bin\mingw32-make.exe”正常退出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:50:42.477

使用 mingw 的问题之一是 w32 版本的 binutils 不支持死代码剥离（它删除了您实际上不使用的库部分。）为了降低可执行文件的大小，我必须使用此处的补丁从源代码修补和构建 binutils：

[http://sourceware.org/bugzilla/show_bug.cgi?id=11539](http://sourceware.org/bugzilla/show_bug.cgi?id=11539)

它有帮助。但要使其正常工作，您需要使用以下方法重建*所有内容*：

```
-fdata-sections -ffunction-sections
```

在所有东西（包括 GCC、Qt、其他库*和*您自己的应用程序）的编译标志中，并且：

```
-Wl,--gc-部分
```

仅在您的应用程序的链接标志中。这对我来说是值得的，因为以前我的可执行文件的大小约为 20MB，而现在已经减半，大约为 10MB。这包括*所有*库（我静态链接），包括 Qt、SDL 和各种媒体库（如 Vorbis、mpg123、FLAC 等。）

虽然我想如果你在 Windows 上构建，那么做这一切并不容易。我使用 Linux 来构建所有东西的 w32 交叉编译版本，这要容易得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-03T18:27:08.550

我会说添加`-s`命令。该命令会去除所有调试符号的编译二进制文件。通常，当您的编译器编译某些东西时，它会将 .exe 文件中的类和函数的名称作为查找。这些符号将包括所有包含的标题。所以你的 .exe 文件将有来自 的符号`iostream`，包括函数和类。

MinGW`nm.exe`可以从 cmd 执行以列出文件中的所有符号。连同`strip.exe`剥离已创建的符号文件。

# php - 仅从组中的第一条记录中选择值

> ID：12449396
> 
> 赞同：1
> 
> 时间：2012-09-16T18:13:50.080
> 
> 标签：php, mysql

我有一个包含交易记录的数据库。每条记录都属于一个交易链，这些交易有一个它们共享的 TCID（交易链 ID）。每个事务都包含一个发送者和一个接收者。我需要做的是检查链中的最终接收用户是否与另一个链中的第一个发送者相同。

目前，我的 MySQL 查询返回最终接收者在另一个链的任何事务中的记录，而不仅仅是第一个。我需要将其严格限制为最终接收者和第一个发送者。

我尝试使用 group by、order by 和 limit 1，但在查询找到一些记录后应用这些。这是我到目前为止尝试过的查询：

`SELECT TCID FROM transactions WHERE senderUID = '$receiverUID' GROUP BY TCID LIMIT 1`

任何人都知道我可以只搜索组中第一个（最低 TID）记录（TCID）的 senderUID 的方法吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T06:39:51.150

这应该有望使您朝着正确的方向前进-

```
//Gets rows where senderUID is the first (lowest TID) record in group
SELECT a.* 
FROM test a 
WHERE a.senderUID = '$receiverUID'
AND NOT EXISTS (select * from test where TCID = a.TCID and id < a.id and senderUID != '$receiverUID')
GROUP BY TCID

UNION

//Gets rows where senderUID is the same as the last receiverUID of TCID
SELECT b.* 
FROM test b
WHERE b.receiverUID = '$receiverUID'
AND NOT EXISTS (select * from test where TCID = b.TCID and id > b.id and receiverUID != '$receiverUID')
GROUP BY TCID 
```

所以作为一个简单的例子，我有下表 -

![表数据](../Images/47f936f7622911f9c0279d2d14652b48.png)

因此，如果我设置 $receiverUID = 1，我会得到 2 行，其中 senderUID 是 TCID 组 (1,9) 中的第一个，以及 3 行，其中 senderUID 是 TCID 组中的receiverUID (4,7,8)

![senderUID/receiverUID 的 TCID 组为 1](../Images/35ec042c6c6dd32a3a07dcdf1875ea4e.png)

`LIMIT 1`如果您只想获得 1 行，其中 senderUID 是 TCID 组 (1)/(4,7,8) 中的第一个，则可以添加

```
SELECT a.* 
FROM test a 
WHERE a.senderUID = '$receiverUID'
AND NOT EXISTS (select * from test where TCID = a.TCID and id < a.id and senderUID != '$receiverUID')
GROUP BY TCID LIMIT 1 
```

![senderUID/receiverUID 的 TCID 组为 1，仅限制第一行 senderUID](../Images/a4252e75debe4d528e9735cd8511d622.png)

同样的想法，如果我设置 $receiverUID = 2 (3,11)/(6,10)

![senderUID/receiverUID 的 TCID 组为 2](../Images/1a83cd854654af7cfdabc93953628ab1.png)

和`LIMIT 1`(3)/(6,10)

![senderUID/receiverUID 的 TCID 组为 2，仅限制第一行 senderUID](../Images/7e145da7a6659837127e1884a8279095.png)

# asp.net - 使用 ASP.NET Web 窗体启用/禁用每个业务逻辑的列表删除按钮

> ID：12449399
> 
> 赞同：0
> 
> 时间：2012-09-16T18:13:58.587
> 
> 标签：asp.net, webforms

如何根据通过数据绑定加载的数据启用/禁用列表窗口上的删除按钮？我试图通过 GridView1_DataBound 事件访问数据，但是当我在 GridView1.Rows 中看到正确的行数时，内容似乎是空的。

```
protected void GridView1_DataBound(object sender, EventArgs e)
{
    foreach (GridViewRow row in GridView1.Rows)
    {
        //
        // Don't display delete link for non-admin users. (This is working fine.)
        //
        ((LinkButton)row.FindControl("DeleteLinkButton")).Visible = (DataAccess.GetUserInfo(true).UserType == DataAccess.UserType.Admin);

        //
        // TODO: Instead of just making the button visible, if it is visible, enable 
        // or disable based on the row's DATESTAMP column.
        //
        DateTime dateStamp = Convert.ToDateTime(row.Cells[11].Text); // NO DATA RETURNED??

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:22:59.133

改为尝试`RowDataBound`事件。每一行都会发生这种情况，因此您不必遍历网格行。但是，您必须在使用前检查行类型。为此，您将获得`GridViewRowEventArgs`. 这个[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)有示例代码。

# android - Android，当我向Facebook发布消息时不显示对话框界面？

> ID：12449408
> 
> 赞同：0
> 
> 时间：2012-09-16T18:15:18.210
> 
> 标签：android, facebook, sdk, sharing

通过 Facebook SDK，我向 Facebook 分享了一条消息。我可以成功分享我的消息，但是我没有看到任何登录和发布消息的对话框。当我点击我的分享按钮时，我的消息将在没有对话界面的情况下发布到 Facebook。那么，如何显示对话框并让我的用户点击发布按钮？

这是 mt 代码：

```
@Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       Log.i(TAG, "Try to create activity...");

       mFacebook = new Facebook(FACEBOOK_APPID);
       mAsyncRunner = new AsyncFacebookRunner(mFacebook);

       if(!restoreCredentials(mFacebook)) {
            Log.i(TAG, "Try to get token...");
            mFacebook.authorize(this, PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
        }

        postFacebookMessage();
    } 
```

//

```
private void postFacebookMessage() {
        Log.i(TAG, "Try to post message");

        token = mFacebook.getAccessToken();
        Log.i("token", "" + token);

        Bundle parameters = new Bundle();
        parameters.putString("access_token", token);
        parameters.putString("message", "Text is test message.");
        parameters.putString("name", "Chef Astro");
        parameters.putString("link", "http://www.astrogempak.com.my");
        parameters.putString("caption", "Caption");
        parameters.putString("description", message);
        parameters.putString("picture","http://a1.mzstatic.com/us/r30/Purple/v4/2d/7d/c3/2d7dc3ed-9e32-cd7b-adba-2a31637a8cf0/mzl.toeyydsk.175x175-75.jpg");

        mAsyncRunner.request("me/feed", parameters, "POST", new WallPostRequestListener(), null); 
    } 
```

//

```
class LoginDialogListener implements DialogListener {

    public void onComplete(Bundle values) {
        saveCredentials(mFacebook);
        Log.i(TAG, "Credentials saved.");
    }

    public void onFacebookError(FacebookError error) {
        showToast("Authentication with Facebook failed!");
    }

    public void onError(DialogError error) {
        showToast("Authentication with Facebook failed!");
    }

    public void onCancel() {
        showToast("Authentication with Facebook cancelled!");
    }
} 
```

//

```
public boolean saveCredentials(Facebook facebook) {
    Editor editor = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
    editor.putString(TOKEN, facebook.getAccessToken());
    editor.putLong(EXPIRES, facebook.getAccessExpires());
    return editor.commit();
}

public boolean restoreCredentials(Facebook facebook) {
    SharedPreferences sharedPreferences = getApplicationContext().getSharedPreferences(KEY, Context.MODE_PRIVATE);

    facebook.setAccessToken(sharedPreferences.getString(TOKEN, null));
    facebook.setAccessExpires(sharedPreferences.getLong(EXPIRES, 0));

    return facebook.isSessionValid();
} 
```

//

```
public class WallPostRequestListener extends BaseRequestListener {
    public void onComplete(final String response, final Object state) {
        Log.d("Facebook-Example", "Got response: " + response);
        String message = "<empty>";
        try {
            JSONObject json = Util.parseJson(response);
            message = json.getString("message");
        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }

        final String text = "Your Wall Post: " + message;
        FacebookActivity.this.runOnUiThread(new Runnable() {
            public void run() {
                Log.d(TAG, text);
            }
        });

        closeActivity();
    }
} 
```

在上面的代码中，我希望当对话框显示时用户可以在文本框中写下他/她的建议，我在这里得到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:18:12.853

您好，您使用的是 Android 版 Facebook 的原生 SDK 吗？如果是，请阅读本教程。本教程通过适当的示例解释了所有适用于 android 的 Facebook 对话框。

[Facebook 教程链接：](https://developers.facebook.com/docs/mobile/android/build/)

# vb.net - 由于未转义的字符，在读取 XML 文件时出现解析错误

> ID：12449412
> 
> 赞同：0
> 
> 时间：2012-09-16T18:16:10.710
> 
> 标签：vb.net, xml-parsing, runtime-error, html-escape-characters

我有一个 XML 文件，其中包含一些转义字符。当我尝试在 VB 中使用 xpathdocument 类阅读时，我将其解析为“'<' 字符，十六进制值 0x3C，不能包含在名称中。行号，位置号。”

在将该xml文件传递给xpathdocument之前如何替换该转义字符？xml文件是：

```
 <classes>
      <class>Class&</class>
      <name>.net></name>
      </classes> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:22:37.273

如果不了解完整的上下文，就不可能回答您的问题。可能`<`是有效的，但出现在前面的东西`<`是问题的根本原因。

最好的做法是回到您获得 XML 文件的位置并请求语法正确的替换。

W3C 有一个[XML Validator](http://www.w3schools.com/xml/xml_validator.asp)，它对于查找 XML 错误非常有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T11:38:22.773

我同意，最好的解决方案是获取正确的文件，但是，有时这可能很困难。

我有一个客户，我必须首先将他们的 XML 文件作为文本文件逐行浏览，然后对转义字符进行替换。直到那时我才将它加载到我的 XML 文档中。有效。这并不理想，如果 XML 文件很大或会发生很大变化，*可能会导致其他问题。*（此外，如果有人在您身后需要维护您的代码。但它可能会起作用。）希望这会有所帮助，但请记住，如果您这样做，如果您没有考虑到所有问题，那么您以后会冒运行时错误的风险您将在 xml 文件中遇到的场景。

# html - 并排显示 Gwt SuggestBox 单元格

> ID：12449416
> 
> 赞同：0
> 
> 时间：2012-09-16T18:16:46.297
> 
> 标签：html, css, gwt, html-table, suggestbox

GWT SuggestBox 的搜索结果显示在一个`<table>`元素中，该元素（显然）`<td>`每个结果包含一个元素。这会导致结果显示**在彼此之上**，如下所示：

![在此处输入图像描述](../Images/053aac2949c018d29d44485438613e38.png)

相反，我希望我可以**并排**显示结果。由于结果包含在`<td>`元素中，我想知道如何使每个元素都`<td>`内联。

在某种网格中显示搜索结果会很整洁（当您撰写问题时，想想 StackOverflow 的标签建议小部件）：

![在此处输入图像描述](../Images/f94a7d3c9619ac766611cce2520b10cf.png)

而不是无聊的自上而下的列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T18:52:31.003

你所描述的是`DefaultSuggestionDisplay`（它使用一个`Menu`带有每个建议的小部件`MenuItem`），但你可以自由地实现[`SuggestionDisplay`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/SuggestBox.SuggestionDisplay.html)你想要的方式。

# vba - 使用 Instr 复制单元格值

> ID：12449417
> 
> 赞同：0
> 
> 时间：2012-09-16T18:16:45.890
> 
> 标签：vba, excel

我需要复制包含一串文本的单元格。我正在使用 instr 定位单元格，但无法复制内容。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:53:01.927

当您找到单元格时（使用任何方法，我猜您正在遍历单元格并使用 InStr 来测试它们的内容）您可以将该值分配给一个新变量，而不是将其“复制”到剪贴板。

```
Public Sub FindTheText()
    Dim strCellValue As String
    Dim i As Integer

    ' Loop through cells on a sheet to find the text "theText"
    For i = 1 To 100
        If InStr(1, "theText", Cells(i, 1).Value, vbTextCompare) <> 0 Then
            strCellValue = Cells(i, 1).Value
            Exit For
        End If
    Next i
End Sub 
```

然后您可以在其他地方使用字符串变量 strCellValue，或使用以下命令将其分配给另一个单元格的值：

```
Cells(2,5).value = strCellValue 
```

# c# - 从 aspx 页面发送电子邮件

> ID：12449421
> 
> 赞同：0
> 
> 时间：2012-09-16T18:17:02.427
> 
> 标签：c#, asp.net, email

我目前正在为我的用户创建一个联系我们页面。在这里，用户可以从任何电子邮件向我发送电子邮件。

```
using System.Net;
using System.Net.Mail;
OpenFileDialog dlg = new OpenFileDialog();
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        string filename = dlg.FileName;

        try
        {
            MailMessage mail = new MailMessage();
            SmtpClient SmtpServer = new SmtpClient("smtp.gmail.com");

            mail.From = new MailAddress(TextBox1.Text);
            mail.To.Add("u@urdomain.com");
            mail.Subject = filename;
            mail.Body = "Report";
            Attachment attachment = new Attachment(filename);
            mail.Attachments.Add(attachment);

            SmtpServer.Port = 25;
            SmtpServer.Credentials = new System.Net.NetworkCredential("me", "password");
            SmtpServer.EnableSsl = true;

            SmtpServer.Send(mail);
        } 
```

此电子邮件只能从 gmail 帐户接收。如何接收来自 yahoo、hotmail 等的电子邮件？对于这一部分`SmtpServer.Credentials = new System.Net.NetworkCredential("me", "password");`，我应该写什么？如何获取用户的密码和邮箱？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:33:58.983

`smtp.gmail.com`不是公共 SMTP 服务器。它保留给 gmail 用户发送和接收邮件。

大多数 SMTP 服务器被限制为仅从其域中的用户发送邮件，并且仅接收为其域中的用户的邮件。简而言之，您不能使用 smtp.gmail.com 将邮件从 joe@aol.com 发送到 pete@msn.com。

您可以通过以下两种方式之一解决您的问题：

1.  您的用户可以单击`mailto`您页面上的链接。这将导致用户通过他们的 ISP 从他们的默认邮件客户端向您发送邮件。这种方法的缺点是您必须跳过几圈才能防止垃圾邮件。
2.  您可以在您的服务器上安装一个 SMTP 服务器并更改您的应用程序以使用该服务器。由于该服务器将接受来自/发往其所在域以外的电子邮件地址的电子邮件，因此您必须确保在开放的 Internet 上无法访问此 SMTP 服务器。否则，垃圾邮件发送者会将您的服务器用作开放中继。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:19:03.260

您不能从用户的电子邮件地址发送。

相反，您需要从您拥有的一个地址（并使用其用户名、密码和 STMP 服务器）发送到您拥有的另一个地址。

# html - 将每对行的表格分组为唯一元素

> ID：12449423
> 
> 赞同：0
> 
> 时间：2012-09-16T18:17:05.207
> 
> 标签：html, css

我有这张桌子：

```
<table>
        <tr class="initial" onmouseover="this.className='highlight'" onmouseout="this.className='initial'">
            <td rowspan="2">ELEMENT 1</td>
            <td class="value">val 1</td>
        </tr>
        <tr class="initial" onmouseover="this.className='highlight'" onmouseout="this.className='initial'">
            <td>val2</td>
        </tr>
        <tr class="initial" onmouseover="this.className='highlight'" onmouseout="this.className='initial'">
            <td rowspan="2">ELEMENT 2</td>
            <td>val a</td>
        </tr>
        <tr class="initial" onmouseover="this.className='highlight'" onmouseout="this.className='initial'">
            <td>val b</td>
        </tr>         
    </table>​ 
```

当鼠标悬停时，每一对都`tr`应该着色。这是不可能的（例如，如果鼠标位于元素 2 单元格上，则“元素 2”和“值 a”单元格会着色，而“值 b”则不会。）。如何将元素组合在一起？我想要的是：如果我在元素 1、值 1 或值 2 单元格上使用鼠标，则两个（三个）单元格都需要着色。我能做些什么？这是我的问题的一个例子：http: [//jsfiddle.net/PA4y6/](http://jsfiddle.net/PA4y6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:21:45.447

一种方法是将要分组的行包装在 a 中`<tbody>`并将侦听器绑定到该行。

看到这个[小提琴](http://jsfiddle.net/PA4y6/1/)

# scala - Scalala 是否提供将向量插入矩阵的直接方法？

> ID：12449427
> 
> 赞同：3
> 
> 时间：2012-09-16T18:17:42.863
> 
> 标签：scala, vector, matrix, scalala

我在所有这些可用的运算符中有点迷失 - 那么有没有简单的方法将整个行/列（向量）插入矩阵？

我开始考虑创建一个向量，将其转换为数组，将其与转换为数组的矩阵连接起来，并基于这样的组合数组创建新的矩阵，但它看起来比听起来更难看。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T19:13:10.437

```
val m = DenseMatrix((1, 4, 10, 13), (2, 5, 11, 14), (3, 6, 12, 15))

val v = DenseVector(7, 8, 9)

val m2 = DenseMatrix.zeros[Int](3, 5)
m2(::, 0 to 1) := m(::, 0 to 1)
m2(::, 2) := v
m2(::, 3 to 4) := m(::, 2 to 3) 
```

[您将在此处](https://github.com/dlwh/breeze/wiki/Quickstart)找到有关基本[微风](https://github.com/dlwh/breeze)功能的更多信息。

# ajax - MVC3 中的两种形式导致不需要的刷新

> ID：12449429
> 
> 赞同：1
> 
> 时间：2012-09-16T18:18:05.297
> 
> 标签：ajax, asp.net-mvc-3, file-upload, postback

我目前正在 MVC3 中构建我的第一个应用程序。在我的一种观点中，有两种形式。一种方法是仅使用 AJAX 选择图像并在页面中显示/上传它（调用另一个控制器并使用隐藏的 IFrame，如本文中所示[）](http://www.dustinhorne.com/post/2011/11/16/AJAX-File-Uploads-with-jQuery-and-MVC-3.aspx)。另一种形式是输入姓名、地址等信息。此外，当使用第一种形式选择并导入图像时，会在第二种形式中填充一个隐藏字段，以便在调用 Create 控件时创建所有内容在数据库中。

所有这一切都完美无缺，但如果用户犯了错误并在第二种形式的数字字段中输入文本，我的模型的验证会得到注意，并且有一个以红色显示错误的回发。通过这样做，第一个表单会丢失所有信息，并使用文件输入控件重置，并且不显示图像。

有谁知道如何解决这个问题？我对 MVC3 和 AJAX 很陌生，所以也许我做错了什么。

我的最终目标是，一旦图片显示在页面中（并上传），它将保留在那里，直到第二个表单被验证并发送到我的创建控制器。

谢谢！

编辑：有些人要代码，就在这里！这是视图：

```
@model RecettesMaison.Models.Recipe

@{
    ViewBag.Title = "Create";
}

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.min.js" type="text/javascript"></script>

<script type="text/javascript">
    var isFirstLoad = true;
    var loadingImg;

    function UploadImage() {
        var fileUploader = document.getElementById("fileuploader");
        $(fileUploader).hide();

        //Create a new image and insert it into the Images div.  Just to be fancy, 
        //we're going to use a "FadeIn" effect from jQuery
        var imgDiv = document.getElementById("Images");
        loadingImg = new Image();
        loadingImg.src = "../../Pictures/ajax-loader.gif";

        //Hide the image before adding to the DOM
        $(loadingImg).hide();
        imgDiv.appendChild(loadingImg);
        //Now fade the image in
        $(loadingImg).fadeIn(500, null);

        $("#ImgForm").submit();
    }

    function UploadImage_Complete() {
        //Check to see if this is the first load of the iFrame
        if (isFirstLoad == true) {
            isFirstLoad = false;
            return;
        }

        //Reset the image form so the file won't get uploaded again
        document.getElementById("ImgForm").reset();

        //Grab the content of the textarea we named jsonResult .  This shold be loaded into 
        //the hidden iFrame.
        var newImg = $.parseJSON($("#UploadTarget").contents().find("#jsonResult")[0].innerHTML);

        //If there was an error, display it to the user
        if (newImg.IsValid == false) {
            alert(newImg.Message);
            return;
        }

        //Create a new image and insert it into the Images div.  Just to be fancy, 
        //we're going to use a "FadeIn" effect from jQuery
        var imgDiv = document.getElementById("Images");
        var img = new Image();
        img.src = newImg.ImagePath;
        img.name = "uploadedImage";

        var input = document.createElement("input");
        input.setAttribute("type", "hidden");
        input.setAttribute("name", "Picture");
        input.setAttribute("id", "Picture");
        input.setAttribute("value", newImg.RealName);
        document.getElementById("Hidden").appendChild(input);

        //Hide the image before adding to the DOM
        $(img).hide();
        imgDiv.removeChild(loadingImg)
        imgDiv.appendChild(img);
        $(img).addClass('img-polaroid');

        //Now fade the image in
        $(img).fadeIn(500, null);
    }
</script>

<iframe id="UploadTarget" name="UploadTarget" onload="UploadImage_Complete();" style="position: absolute; left: -999em; top: -999em;"></iframe>
    <fieldset>
        <div class="row-fluid">
          <div class="span12">
            <h4>Publier une recette</h4>
            <div class="row-fluid">
              <div class="span3">

                @using (Html.BeginForm("UploadImage", "Recipe", FormMethod.Post,
                    new
                    {
                        enctype = "multipart/form-data",
                        id = "ImgForm",
                        name = "ImgForm",
                        target = "UploadTarget"
                    }))
                {
                    <div id="fileuploader">
                    <input id="lefile" type="file" style="display:none" name="imageFile" accept="image/x-png, image/jpeg" />
                    <div class="input-append">
                       <input id="photoCover" class="input-large" type="text" />
                       <a class="btn" onclick="$('input[id=lefile]').click();">Parcourir...</a>
                    </div>

                    <script type="text/javascript">
                        $('input[id=lefile]').change(function () {
                            $('#photoCover').val($(this).val());
                        }); 
                    </script>
                    <input type="button" class="btn btn-success" value="Sauvegarder l'image" onclick="UploadImage()" />
                    </div>

                    <div id="Images"></div>
                }
              </div>
              <div class="span9">
              @using (Html.BeginForm("Create", "Recipe", FormMethod.Post, new { id = "realForm", name = "realform" }))
              {
                @Html.ValidationSummary(true)
                <div id="Hidden"></div>
                <div class="editor-label">
                    @Html.LabelFor(model => model.RecipeName) <div class="alert alert-info">Soyez original!</div>
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.RecipeName)
                    @Html.ValidationMessageFor(model => model.RecipeName)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.Source) <div class="alert alert-info">(Exemple: Ricardo, Food Channel, Blog de Jean Cuisine, etc...)</div>
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Source)
                    @Html.ValidationMessageFor(model => model.Source)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.PreparationTime)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.PreparationTime) minutes
                    @Html.ValidationMessageFor(model => model.PreparationTime)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.CookingTime)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.CookingTime) minutes
                    @Html.ValidationMessageFor(model => model.CookingTime)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.MacerationTime)
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.MacerationTime) minutes
                    @Html.ValidationMessageFor(model => model.MacerationTime)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.Portions) <div class="alert alert-info">Combien d'adultes cette recettes peut nourir?</div>
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Portions)
                    @Html.ValidationMessageFor(model => model.Portions)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(model => model.Commentary) <div class="alert alert-info">Partagez votre expérience avec cette recette, que ce soit au moment de sa création ou de sa préparation. <br />Dites les modifications que vous faites à la recette originale.<br />Rendez cette recettes personnelle! </div>
                </div>
                <div class="editor-field">
                    @Html.EditorFor(model => model.Commentary)
                    @Html.ValidationMessageFor(model => model.Commentary)
                </div>
                <p>
                    <input type="submit" class="btn btn-success" value="Publier la recette!" />
                </p>
              }
              </div>
            </div>
          </div>
        </div>
    </fieldset> 
```

这是发送图片的控制器

```
[HttpPost]
public WrappedJsonResult UploadImage(HttpPostedFileWrapper imageFile)
{

    if (imageFile == null || imageFile.ContentLength == 0)
    {
        return new WrappedJsonResult
        {
           Data = new
           {
                IsValid = false,
                Message = "No file was uploaded.",
                ImagePath = string.Empty
            }
        };
    }

    if (imageFile.ContentType != "image/jpeg" && imageFile.ContentType != "image/png")
    {
        return new WrappedJsonResult
        {
            Data = new
            {
                IsValid = false,
                Message = "Mauvais format de fichier!",
                ImagePath = string.Empty
            }
        };
    }

    int nIndexPoint = imageFile.FileName.IndexOf(".");
    string strExtension = imageFile.FileName.Substring(nIndexPoint + 1);

    var fileName = String.Format("{0}.{1}", Guid.NewGuid().ToString(), strExtension);

    var imagePathFull = Path.Combine(Server.MapPath(Url.Content("~/Pictures/Upload/FullSize")), fileName);
    var imagePathThumb = Path.Combine(Server.MapPath(Url.Content("~/Pictures/Upload/Thumbnail")), fileName);

    imageFile.SaveAs(imagePathFull);
    ThumbnailGenerator generator = new ThumbnailGenerator();
    generator.GetThumbnail(imagePathFull, imagePathThumb);

    return new WrappedJsonResult
    {
        Data = new
       {
            IsValid = true,
            Message = string.Empty,
            ImagePath = Url.Content(String.Format("~/Pictures/Upload/Thumbnail/{0}", fileName)),
            RealName = fileName
        }
    };
} 
```

最后，这是第二种形式调用的控制器。

```
[HttpPost]
public ActionResult Create(Recipe recipe)
{
      if (ModelState.IsValid)
      {
          db.Recipes.Add(recipe);
          db.SaveChanges();
          return RedirectToAction("Index");  
      }

      return View(recipe);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T19:58:53.187

您需要将图像（或者看起来只是文件名）作为配方模型的一部分，并将其以第二种形式存储在 Html.HiddenFor 元素中。

然后，您将需要一个 document.ready jQuery 函数来查看是否有一个 flyname 可用，如果有则显示它。可能这应该调用您在上传完成时调用的相同函数。

最后，当在 ajax 方法中完成上传时，使用 jQuery 使用图像文件名更新隐藏字段，现在当您回发时，您的模型具有显示完整视图所需的所有信息，包括图片。

有道理？

# java - 下面这段 Java 代码是如何计算 Pi 的位数的？

> ID：12449430
> 
> 赞同：4
> 
> 时间：2012-09-16T18:18:08.383
> 
> 标签：java, pi

以下代码使用哪种算法/公式？

```
 /**
 * Computes the nth digit of Pi in base-16.
 * 
 * If n < 0, return -1.
 * 
 * @param n The digit of Pi to retrieve in base-16.
 * @return The nth digit of Pi in base-16.
 */
public static int piDigit(int n) {
    if (n < 0) return -1;

    n -= 1;
    double x = 4 * piTerm(1, n) - 2 * piTerm(4, n) -
               piTerm(5, n) - piTerm(6, n);
    x = x - Math.floor(x);

    return (int)(x * 16);
}

private static double piTerm(int j, int n) {
    // Calculate the left sum
    double s = 0;
    for (int k = 0; k <= n; ++k) {
        int r = 8 * k + j;
        s += powerMod(16, n-k, r) / (double) r;
        s = s - Math.floor(s);
    }

    // Calculate the right sum
    double t = 0;
    int k = n+1;
    // Keep iterating until t converges (stops changing)
    while (true) {
        int r = 8 * k + j;
        double newt = t + Math.pow(16, n-k) / r;
        if (t == newt) {
            break;
        } else {
            t = newt;
        }
        ++k;
    }

    return s+t;
} 
```

这段代码已经在我们的问题集中为我们编写好了。我找不到它使用的算法/公式，我很好奇。我怀疑这是一个简单的算法，但我无法仅根据这段代码在网上找到公式。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T18:27:27.803

据我所知，在不知道第 (n-1) 位的情况下，计算 pi 的第 n 位是 Bailey-Borwein-Plouffe 算法。pi 的表示在这里是 base-16。

![计算圆周率第N位的公式](../Images/b7cd50742c7a8ea44c4a488f1a31191e.png)

见贝利主页：[http ://crd-legacy.lbl.gov/~dhbailey/](http://crd-legacy.lbl.gov/~dhbailey/)

# actionscript-3 - AS3 中使用瓷砖的迷宫生成器

> ID：12449438
> 
> 赞同：1
> 
> 时间：2012-09-16T18:19:07.497
> 
> 标签：actionscript-3

> **可能重复：**
> [生成迷宫的好算法是什么？](https://stackoverflow.com/questions/38502/whats-a-good-algorithm-to-generate-a-maze)

长话短说，我必须在 AS3 中制作一个随机迷宫生成器。

我看过很多关于迷宫生成的教程，但没有什么能满足我的需求。迷宫必须由十个图块（它们是电影剪辑）组成，它们是迷宫部分的可能状态（例如：仅墙；仅开放空间；北墙，东墙；西墙等）。我必须弄清楚如何使用这十个图块生成迷宫。

有人可以告诉我如何做到这一点吗？我想到的任何事情听起来都非常复杂，必须有更简单的方法来做到这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:30:02.987

您可以在此处查看迷宫生成器的源代码：[Maze on WonderFL](http://wonderfl.net/c/v7Vh)

并且在你生成了一个迷宫之后，你可以看到你有什么样的墙和其他点的关系，当你真正完成一个迷宫的时候，这应该不会太难。

# magento-1.7 - 获取送货地址 ZIP

> ID：12449444
> 
> 赞同：1
> 
> 时间：2012-09-16T18:20:01.640
> 
> 标签：magento-1.7

我想在这个文件中使用送货地址邮政编码

app/code/core/Mage/Shipping/Model/Carrier/Tablerate.php

我想在这个函数中使用它
public function collectRates(Mage_Shipping_Model_Rate_Request $request){}

有什么方法可以访问那里的邮政编码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:44:32.850

你可以得到这样的邮政编码：

```
var_dump($request->getDestPostcode()); 
```

要查看对象的所有重要数据`$request`：

```
var_dump($request->getData()); 
```

# ping - 尝试执行 DICOM ping 后出现 Dicom 错误

> ID：12449446
> 
> 赞同：1
> 
> 时间：2012-09-16T18:20:14.993
> 
> 标签：ping, dicom

我制作了一个简单的程序，应该对服务器执行 DICOM ping。它给出了以下错误：

> 拒绝 - 结果：REJECTED_PERMANENT 来源：DICOM_UL_SERVICE_USER 原因：NO_REASON_GIVEN

对于我使用 JDiCom 运行 RIS 服务器的服务器，我还尝试使用 AW 服务器，这给了我这个错误。我对此很陌生，这是我的第一个程序，所以我没有很多关于不同参数的细节。

我无法理解此类错误的原因，因为添加执行 ping 的所有详细信息都是正确的，例如端口号、IP 地址和 ae 标题。我的系统也在服务器上配置，所以即使这不是问题。

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T17:10:26.243

当在协商 DICOM 关联时出现诸如此类的永久拒绝时，可能是由于配置的 AE 标题不匹配或与客户端和服务器之间支持的 SOP 类不匹配。我建议您调查客户端上配置的 Called AE Title 是否与服务器的 AE 标题匹配。我还会确认您提议的 SOP 类与服务器支持的 SOP 类匹配。

# json - Jquerymobile Json 列表视图

> ID：12449450
> 
> 赞同：1
> 
> 时间：2012-09-16T18:21:09.727
> 
> 标签：json, html, jquery, mobile

我使用 jquerymobile，现在我想将 li 放入带有 json 的 ul listview 中。

我必须遵循代码：

```
<script type="text/javascript">
$(function() {
$(document).ready(function(){

        $.getJSON("url",function(data) {
                $.each(data.posts, function(i,data){

                $('#output').children('ul').append('<li><a href="#">'+data.title+'</a></li>');

                });
            }
        );
        return false;
    });
});
</script>

<div data-role="content">
    <div class="content-primary">   
        <div id="output">
               <ul data-role="listview">

                </ul>
            </div>
            </div>
</div> 
```

它可以工作，但不能在 .

有谁现在我可以解决这个问题？

亲切的问候，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:37:43.313

孩子/孩子的选择可能会让它有点失望，试一试，看看是否有所作为。

```
$('#output ul').append(..........); 
```

由于您在加载 DOM 后将这些列表项附加到列表中，并且正在使用 jQueryMobile，因此您必须向该元素的函数链添加一个附加项。像这样：

```
$('#output ul').append(..........).trigger('create'); 
```

Create 是一个 jquery 移动事件。最初加载 DOM 时触发它，为加载时 DOM 中的所有元素设置样式。但是，通过添加新的样式，它们将不会具有样式，因为 jquerymobile 不通过常规样式表关系依赖 css。它使用样式表进行样式设置，但根据容器类型示例应用样式

`data-role="header"`在加载 dom 后设置样式，因此即使您使用带有 CSS 的常规方法设置特定元素的样式，jquery mobile 也会在 DOM 准备好后覆盖它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T08:48:23.183

我解决了这个问题：

```
<script type="text/javascript">
$(function() {
$(document).ready(function(){
        $.getJSON("url",function(data) {

                $.each(data.posts, function(i,data){

                $('#output ul').append('<li></li>');

                });
                $('#output ul').listview('refresh');
            }
        );      
    });             
});

</script> 
```

# checksum - 猜测 CRC-24 参数

> ID：12449453
> 
> 赞同：1
> 
> 时间：2012-09-16T18:21:34.947
> 
> 标签：checksum, crc

我想找到一些 CRC-24 算法的参数。

我所知道的是：

* * *

### 来源 1

*   生成多项式为 1010111010110110111001011 = 0x15D6DCB，即

    ```
    5D6DCB 
    ```

    正常表示（MSB 优先代码）

*   数据（十六进制）

    ```
    00 40 00 01 09 01 01 B0 A0 0C 0A 01 00 04 07 A0 05 A5 03 80 01 02 00 00 00 00 00 00 00 00 00 
    ```

    给

    ```
    99 84 62 
    ```

生成多项式与[CRC-24/FLEXRAY](http://reveng.sourceforge.net/crc-catalogue/17plus.htm#crc.cat-bits.24)中使用的相同，但都是关于寻找其他参数的。我使用灵活[的jacksum](http://www.jonelo.de/java/jacksum/index.html)工具做了一些测试，但到目前为止没有成功。

```
BYTES="00 40 00 01 09 01 01 B0 A0 0C 0A 01 00 04 07 A0 05 A5 03 80 01 02 00 00 00 00 00 00 00 00 00"
jacksum -s '\t' -a 'crc:24,5D6DCB,000000,fals,fals,000000+crc:24,5D6DCB,000000,true,true,000000+crc:24,5D6DCB,abcdef,fals,fals,000000+crc:24,5D6DCB,abcdef,true,true,000000+crc:24,5D6DCB,fedcba,fals,fals,000000+crc:24,5D6DCB,fedcba,true,true,000000+crc:24,5D6DCB,ffffff,fals,fals,ffffff+crc:24,5D6DCB,ffffff,true,true,ffffff' -F '#FILESIZE #ALGONAME{i}#SEPARATOR#CHECKSUM{i}' -E hex -q "hex:$(echo $BYTES | sed 's/ //g')"

31 crc:24,5d6dcb,000000,fals,fals,000000    6579ac
31 crc:24,5d6dcb,000000,true,true,000000    b17f3a
31 crc:24,5d6dcb,abcdef,fals,fals,000000    fd794d  # CRC-24/FLEXRAY-B
31 crc:24,5d6dcb,abcdef,true,true,000000    367f23
31 crc:24,5d6dcb,fedcba,fals,fals,000000    e8a75b  # CRC-24/FLEXRAY-A
31 crc:24,5d6dcb,fedcba,true,true,000000    5e048b
31 crc:24,5d6dcb,ffffff,fals,fals,ffffff    a408f7
31 crc:24,5d6dcb,ffffff,true,true,ffffff    6bf1b9 
```

以防万一我也尝试了反转字节顺序和反转输入数据的半字节顺序，但没有`99 84 62`或`62 84 99`没有。

我认为是`refIn=false refOut=false xorOut=0`，但不确定。

* * *

### 来源 2

DATA + CRC（十六进制） - 每行一个条目：

```
00C01FFF057EA013CEFFCD1361D5E6E6001D64001400002C667E0000000000329BEA
00FFEC01007EA018CDCE2313BB18E6E7001E0149534B050000000100B3017E38CD0F
00C01FFF1B7EA021CEFFCD133817E6E6001CFEFEFEFEFEFEFEFE0149534B050000000100100CE67E00000000000000000000000000000000000000000000000000000054F223
00C01010107EA0080223C993E4437E000000000000000000000000000000003F96F1
00010C011D7EA01FC9022373B49681801205017E06017E0704000000010804000000015F757E0000000000000000000000000000000000000000000000000000000000723D01
00C010101B7EA0450223C9102148E6E6006036A1090607608574050801018A0207808B0760857405080201AC0A80083132333435363738BE10040E01000000065F1F0400007E1FFFFF83D77E0000000000000000000000000000000000000000000000000000009BFF67
00010C01037EA039C902233022BDE6E700612AA109060760857405080101A203020100A305A103020100BE11040F080100065F1F0400007C1F04000007194A7E00000010E99A
00C01010227EA01A0223C932AF55E6E600C0014000080000010000FF0200EADD7E00000000000000000000000000000000000000000000000000000000000000000000C22B4A
00010C011D7EA01FC90223523FA6E6E700C4014000090C07D201070101231A00FFC40080EC7E0000000000000000000000000000000000000000000000000000000000C162A6
00010C011D7EA01FC9022373B49681801205017E06017E0704000000010804000000015F757E0000000000000000000000000000000000000000000000000000000000723D01 
```

运行`reveng -w 24 -F -s ...`给出`no models found`。这是否意味着上述某些示例可能已损坏？不幸的是，我不能 100% 确定它们都是正确的......

* * *

**是否有任何理智的方法可以在不使用蛮力的情况下找到 init、refIn、refOut 和 xorOut？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:33:53.600

您需要提供多个序列和关联的 crc 才能求解参数。请提供由两对组成的四个序列，其中每对是相同长度的序列，并且两对具有不同的长度。

看看[CRC RevEng](http://reveng.sourceforge.net/)。仅使用一个序列并指定多项式，它会报告两种可能性：

```
width=24  poly=0x5d6dcb  init=0xe959e3  refin=false  refout=false  xorout=0x000000  check=0x13fe57  name=(none)
width=24  poly=0x5d6dcb  init=0x005035  refin=true  refout=true  xorout=0x000000  check=0x63b7b9  name=(none) 
```

但是，仅通过一个示例无法区分或验证它们。

*更新：*

我找到了crc。原来crc之前的最后三个字节不参与crc计算。然后，所提供的多项式将不反映在数据上，无需进行预处理或后处理。然而，生成的 crc 需要反映，然后以大端顺序写入。

您可以使用 RevEng 来生成 crc。例如，对于您发布的第一个示例（删除了最后三个字节）：

```
$ reveng -c -w 24 -L -p 5d6dcb 00400001090101B0A00C0A01000407A005A503800102000000000000
628499 
```

reveng 以小端顺序提供了答案。在您的数据中，它采用大端顺序：99 84 62。

这适用于所有示例，但以 . 开头的示例除外`00 FF`。这也是异常的，因为倒数第二个字节不是零，在所有其他情况下它们都是零。

遗憾的是，RevEng 无法推断出这个特殊的 crc，因为 RevEng 不会搜索它是一个奇怪的 crc。当您尝试使用`-s`with 时`-L`，您会得到：

```
reveng: cannot search for crossed-endian models 
```

这是生成crc的代码。请注意，crc 之前的最后三个字节不会提供给`crc24()`，并且`crc24()`必须以大端顺序写入或比较的结果。

```
unsigned long reflect(unsigned long val, int bits)
{
    unsigned long vers;

    vers = 0;
    while (bits) {
        vers = (vers << 1) | (val & 1);
        val >>= 1;
        bits--;
    }
    return vers;
}

#define POLY 0x5d6dcb
#define CARRY 0x800000

unsigned long crc24(unsigned long crc, unsigned char *buf, unsigned len)
{
    crc = reflect(crc, 24);
    while (len--) {
        crc ^= (unsigned long)(*buf++) << 16;
        crc = crc & CARRY ? (crc << 1) ^ POLY : crc << 1;
        crc = crc & CARRY ? (crc << 1) ^ POLY : crc << 1;
        crc = crc & CARRY ? (crc << 1) ^ POLY : crc << 1;
        crc = crc & CARRY ? (crc << 1) ^ POLY : crc << 1;
        crc = crc & CARRY ? (crc << 1) ^ POLY : crc << 1;
        crc = crc & CARRY ? (crc << 1) ^ POLY : crc << 1;
        crc = crc & CARRY ? (crc << 1) ^ POLY : crc << 1;
        crc = crc & CARRY ? (crc << 1) ^ POLY : crc << 1;
    }
    return reflect(crc, 24);
} 
```

# jquery - 如何将字符串 mm/DD/yy 转换为时间戳格式？

> ID：12449455
> 
> 赞同：0
> 
> 时间：2012-09-16T18:21:38.367
> 
> 标签：jquery, datepicker, timestamp

我从 jQuery-Calender UI 获取日期值，它以字符串格式“mm/dd/yy”为我提供日期，例如 09/16/2012。现在我想将其转换为时间戳格式“yyy-MM-dd hh:mm:ss”。因为在数据库中我有一个 Timestamp 数据类型的属性。我怎样才能做到这一点？

使用`$( ".selector" ).datepicker({ dateFormat: "yy-mm-dd" })`

我接受输入，`dateFrom = "2012-09-27"`但现在我想将其转换为日期格式**yyyy-MM-dd hh:mm:ss**

但我得到了“无法解析的日期”异常。

我正在使用以下代码：

```
java.text.SimpleDateFormat sdf = new java.text.SimpleDateFormat("yyyy-mm-dd HH:mm:ss");
java.util.Date test1=new java.util.Date (sdf.format(dateFrom)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:34:57.000

您尚未指定语言。但是任何语言都有 DateTime 方法，它为您提供了根据需要更改其格式的选项。

我正在回答 C#。

DateTime.Now.ToString("u"));

将输出您所需的值。

如需更多帮助，请访问以下链接：

[http://msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)

[http://www.dotnetperls.com/datetime-format](http://www.dotnetperls.com/datetime-format)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:47:20.410

假设您使用的是 jquery 的 DatePicker UI 工具，那么您可以使用 dateFormat 选项初始化一个 datepicker。

初始化 datepicker 的[dateFormat](http://jqueryui.com/demos/datepicker/#option-dateFormat)：

```
$( ".selector" ).datepicker({ dateFormat: "yy-mm-dd" }); 
```

或者，在 init 之后设置 dateFormat 选项：

```
$( ".selector" ).datepicker( "option", "dateFormat", "yy-mm-dd" ); 
```

请注意，这仅提供日期，而不是时间。

# c# - 将 Visual Basic (.net 1.1) 项目转换为 C#

> ID：12449457
> 
> 赞同：1
> 
> 时间：2012-09-16T18:21:54.967
> 
> 标签：c#, .net, vb.net, visual-studio

我有一个非常古老的 Visual Basic (.net 1.1) 项目，现在我愿意继续开发，但不是在 Visual Basic 中，而是在 C# 中。有没有办法将其转换为 C#？我可以想到两个选择：

1.  使用在线提供的源代码转换器（但大多数时候它们都失败了，而且项目很大）
2.  编译并将其反编译为 C#（虽然我会丢失注释和杂注标记）

进行此转换的推荐方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:25:47.943

鉴于 .NET 自 .NET 1.1 以来发生了相当大的变化——特别是，有更多可用的库等会改变你处理各种任务的方式——我很想重新开始。鉴于您已经在更改 .NET 版本和语言，即使只是为了获得直接端口，您也需要投入大量工作......所以为什么不利用您从现有项目中学到的经验并进行投资呢？创造一个新的？

（我知道[Joel 关于重写的博客文章](http://www.joelonsoftware.com/articles/fog0000000069.html)，但是如果您已经决定通过将其转换为另一种语言来进行伪重写，那么我认为无论如何这种痛苦是不可避免的。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:25:57.630

对于编写良好的 VB 1.1，在线转换器应该做得不错。我会尝试批量转换项目的文件，然后手动浏览它们以查找明显的错误。

在线转换器更倾向于扼杀在较新版本的 .NET 中引入的功能（有充分的理由 - 这些功能导致编译期间更基本的代码转换，即它们使语言更加困难）。

/编辑：但 Jon 所说的有其优点：.NET 1.1 完全不同，在许多方面不如现代 .NET，并且自动转换不会帮助您在代码中采用现代语言和 CLR 功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T15:48:40.680

刚刚重读了 Jon Skeet 提到的 Joel 的帖子，我想说*一定*要听从他的建议。编写一个引用旧 VB.NET 项目的新 C# 项目，并将代码从旧项目一点一点地移动到新项目中，一次一个类。每次你需要修改一些东西时，将相关代码从旧项目移动到新项目。

这应该有一些优点：

1.  可以工作且不需要修改的旧代码可以保持不变。
2.  在您甚至可以运行您的程序之前，您不需要花费数周或数月的繁琐代码翻译来完全重写所需的开销。

# android - Android ListView - 如何预测可以显示多少行

> ID：12449458
> 
> 赞同：3
> 
> 时间：2012-09-16T18:22:02.783
> 
> 标签：android, android-layout, listview, android-activity

由于 Android 有不同的布局大小，所以行数可以在其中显示`ListView`是可变的，理想情况下，我们需要执行 API 调用，如..

```
http://www.example.com/get_product?count=N&.. 
```

其中`N`= 可以在给定的 `ListView`+ 10 个项目缓冲区中显示的行数以实现屏幕外滚动效果。

在应用程序中定义价值的最佳方法是`N`什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:29:45.943

尝试这个：

```
ListView list = (ListView) findViewById(R.id.list) //R.id.list will be your listview id in the layout    
int n = Double.intValue(list.getHeight()/list.getChildAt(1).getHeight()) 
```

如果它不起作用，因为它需要首先创建列表来获得一个孩子，并且你有 listItem 的 dp 高度（如果你使用自定义布局可能），你可以使用

```
ListView list = (ListView) findViewById(R.id.list) //R.id.list will be your listview id in the layout    
Resources r = getResources();
int px = Math.round(TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, !!!YOUR LISTITEM HEIGHT IN DP!!!, r.getDisplayMetrics())); //Convert DP to actual size in pixels (rounded)
int n = Double.intValue(list.getHeight()/px) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:42:56.823

> 使用方法 listView.setOnScrollListener(OnScrollListener)将[onScrollListener设置为 listview。](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)@param visibleItemCount of method onScroll(AbsListView view, int firstVisibleItem, int visibleItemCount, int totalItemCount) 是您要查找的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:37:26.350

您可以致电`getListView().getChildCount()`以获取可见项目的数量。虽然这只能在您的 ListView 显示后调用。所以我不确定当您尝试获取项目数量时是否会在第一次尝试时得到这个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T18:48:37.830

如果您使用像 BaseAdapter 或 ArrayAdapter 这样的自定义适配器，那么`getCount()`将为您提供要在 ListView 中膨胀的 View 数量。

**这会给你行数**

`getCount()`**是在方法之前**被调用的`getView()`，因为`getCount()`只告诉了要膨胀多少视图。

# mysql - 两个查询的联合结果，顺序正确

> ID：12449459
> 
> 赞同：1
> 
> 时间：2012-09-16T18:22:10.287
> 
> 标签：mysql

我的数据库中有两个表表 A 和表 B -

```
 Table `A`
    SN   |    Order1    |   Order2   |   Text
 (INT)   |   (TINYINT)  |  (TINYINT) |  (VARCHAR)
   1001  |      1       |      1     |    ABC
   1001  |      1       |      2     |    DEF
   1001  |      1       |      3     |    GHI
   1001  |      2       |      1     |    IOU
   1001  |      3       |      1     |    JKL     <--
   1001  |      3       |      2     |    LMO
   1001  |      3       |      3     |    UTF
   ....
   1021  |      1       |      1     |    ZXC
   1021  |      1       |      2     |    QWE
   1021  |      2       |      1     |    JKL     <--
   1021  |      3       |      1     |    YOU 
```

在另一张桌子上

```
 Table `B`
    SN   |    Order1    |     rSN    |   rOrder1
   1021  |      2       |     1001   |      3 
```

现在当我查询`1021`结果的数据时应该是这样的： -

```
 Result Needed

    1    |      1     |    ZXC
    1    |      2     |    QWE
    2    |      1     |    JKL
    2    |      2     |    LMO
    2    |      3     |    UTF
    3    |      1     |    YOU 
```

* * *

目前我正在尝试这样的事情 -

```
SELECT `SN`, `Order1`, `Order2`, `Text` FROM `Table A` 
  WHERE `SN`=1012 
UNION  
SELECT `SN`, `Order1`, `Order2`, `Text` FROM `Table A`  
  WHERE `Table A`.`SN` 
  IN (SELECT  `rSN` FROM `Table B` WHERE `SN`=1021) 
  AND `Table A`.`Order1` 
  IN (SELECT  `Order1` FROM `Table B` WHERE `SN`=1021) 
```

哪个给出了这样的结果：-

```
 Result
  SN | Order1 |   Order2   |    Text
 1021|   1    |      1     |    ZXC
 1021|   1    |      2     |    QWE
 1021|   2    |      1     |    JKL
 1021|   3    |      1     |    YOU
 1001|   3    |      1     |    JKL
 1001|   3    |      2     |    LMO
 1001|   3    |      3     |    UTF 
```

我应该怎么做才能使`Order1`结果`Order2`的最后三行与引用行相同，例如`1001 | 2 | 2 | LMO`

编辑 - -

在这里，我想获得与 查询给出数据输出时相同的`Order1`值。`1001``Order1``1012`

因为顺序`Text`很重要。

Order2 文本与其在此组中对应的第一个值相关，在 Order1 中并`Table B`存储对数据库中已输入的重复相关文本的引用，并定义其在相应的位置`SN`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:16:32.850

我自己找到了解决方案：-

**解决方案**

```
SELECT `Order1`, `Order2`, `Text` FROM `Table A` WHERE `SN` = 1012
UNION DISTINCT
SELECT `Table B`.`Order1`,  `Table A`.`Order2`, `Table A`.`Text` 
FROM  `Table A` JOIN  `Table B` 
WHERE  `Table B`.`rSN` =  `Table A`.`SN` 
      AND  `Table B`.`Order1` =  `Table A`.`Order1` 
      AND `Table B`.`SN` = 1021
ORDER BY `Order1`, `Order2` 
```

**解释**

第一个`SELECT`选择`Rows`关联的`1021`

在查询的**第二**部分中，我希望`Text`被引用`SN`的`1001`行具有`Order1`价值`3`（参见表 B）。
**但是作为引用`SN` *ie`1021`有它的`Order1`值`2`****，它的文本在哪里`JKL`（参见表 A，带 1021 SN 的 Pointed Row ("<--")）*所以我们想要与Formatted As相关联的 Text
的所有值 对于上述问题`Order1``1001 | 3 |``1001 | 2 |`
`JOIN`有效，加入给出了一个类似的表： -

```
SELECT *  FROM  `Table A` JOIN  `Table B` 
WHERE  `Table B`.`rSN` =  `Table A`.`SN` 
  AND  `Table B`.`Order1` =  `Table A`.`Order1` 
  AND `Table B`.`SN` = 1021

            Table `B`                            Table `A`
 SN  | Order1 |  rSN | rOrder1     ||    SN | Order1 | Order2 | Text
1021 |   2    | 1001 |    3        || 1001  |    3   |    1   | JKL 
1021 |   2    | 1001 |    3        || 1001  |    3   |    2   | LMO
1021 |   2    | 1001 |    3        || 1001  |    3   |    3   | UTF 
```

并且从这个结果中我们可以拿起结果集。
了解如何`2, 2, LMO`来 -> 它就在这里 现在我们正在`Table B.Order1`从 JOIN 结果中获取，而不是像**之前一样**一样，我们正在获取`Order1`Of the `1001`，然后导致我们不想要的排序。

`why isn't 1, 3, GHI required as a part of result`-> 与相关信息一样，
具有相同信息的`Order1`信息相互显示相关的单词/信息，并且由于`1021`没有任何相关信息，`1, 3, GHI`因此结果部分**不需要**。

现在我们已经得到了`Order1`第二个查询的结果，应该`2`不是`3`我们现在可以很容易地通过 Order 子句对它们进行排序

我希望这也能澄清这个问题。还是谢谢大家:)

**- - - 编辑 - - - -**

`DISTINCT`在 UNION 中将删除`JKL`来自最终结果的重复条目

# wpf - wpf中的STA线程

> ID：12449461
> 
> 赞同：0
> 
> 时间：2012-09-16T18:22:28.477
> 
> 标签：wpf, multithreading, dispatcher, sta

ListViewItem 有问题。当我在线程中使用它时，它会显示一条消息：

> “调用线程必须是 STA，因为很多 UI 组件都需要这个。”

然后我将其更改为：

```
Mythread.SetApartmentState(ApartmentState.STA); 
```

虽然当我使用它时，它再次显示一条消息：

> “调用线程无法访问此对象，因为不同的线程拥有它。”

我使用 Dispatcher。它再次显示一条消息：

> “调用线程无法访问此对象，因为不同的线程拥有它。”

我在做什么来解决问题？

```
Thread th = new Thread(() =>
    {                                          
        search.SearchContentGroup3(t, addressSearch.CurrentGroup.idGroup);
    });
th.SetApartmentState(ApartmentState.STA);
th.Start();

public void SearchContentGroup3(int id)
{
    ListViewItem lst = new ListViewItem();
    lst.DataContext = p;        
    Application.Current.Dispatcher.BeginInvoke(
        new Action(() => currentListView.Items.Add(lst)),
        DispatcherPriority.Background);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T23:09:34.440

如果我理解正确，您想启动一个工作线程来加载某种实体，然后创建一个列表视图项来表示它。

我的猜测是问题在于您正在线程中创建列表视图项，并尝试使用 Dispatcher 将其附加到列表视图。相反，试试这个：

```
public void SearchContentGroup3(int id)
{
// Do stuff to load item (p?) 
// ...

// Signal the UI thread to create and attach the ListViewItem. (UI element)
Application.Current.Dispatcher.BeginInvoke(
    new Action(() => 
    {
       var listItem = new ListViewItem() {DataContext = p};
       currentListView.Items.Add(lst); 
    }),
    DispatcherPriority.Background);
} 
```

# c - 按位移位使我的程序停止？

> ID：12449469
> 
> 赞同：2
> 
> 时间：2012-09-16T18:23:25.523
> 
> 标签：c, bit-manipulation, shift, halt

我正在处理一个任务，我必须编写一个 C 函数，通过找到最高有效设置位并返回该位的位置来计算无符号整数*n的 log2。*例如，如果*n*为 17 (0b10001)，则函数应返回 4。

下面是我到目前为止的代码，但是按位运算会使程序停止。通过注释掉第 6-9 行的循环，程序可以正常工作。我终其一生都无法理解它为什么会这样。有人能帮我吗？

```
#include<stdio.h>
#include<stdlib.h>

int mylog2(unsigned int n) {
    int log = 1;
    while (n != 1) {
        n >> 1;
        log++;
    }
    return log;
}

int main() {
    int a;
    a = mylog2(17);
    printf("%d", a);
    getch();
    return(0);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:25:52.607

你有一个无限循环，因为你永远不会改变 n 的值。而不是`n >> 1;`使用`n = n >> 1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:27:07.380

查看您的 while 循环。你这样做`n >> 1`，但你从不分配它。

# php - 将预定数量的字符放入数组中

> ID：12449470
> 
> 赞同：1
> 
> 时间：2012-09-16T18:23:32.890
> 
> 标签：php

我有一个接收文本的系统

> 99912345678910119999999999991234567891011999999999999123456789101199999999999912345678910119999999999991234567891011999999999999123456789101199999999999912345678910119999999999991234567891011999999999

如您所见，它是一组重复的 25 个字符。我正在尝试获取这些混乱的信息并将每组 25 个字符分配给一个数组。

你认为使用 substr 和自动增加金额会起作用吗？

IE：

```
$numbers = "that number batch"; 
$i = 0;
$n = 25;
while (blabla) {
  $i + 25;
  $n + 25;
  $newnumber = subst($numbers, $i, $n);
} 
```

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:26:01.577

你试过了[`str_split`](http://php.net/str_split)吗？

```
$numbers = str_split($numbers, 25); 
```

# jquery - 无法让前置 ajax 内容淡入

> ID：12449472
> 
> 赞同：0
> 
> 时间：2012-09-16T18:23:47.383
> 
> 标签：jquery, ajax, prepend

我希望我的 ajax 调用返回的内容淡入，但我无法让它工作。

**ajax 响应是 html：**

```
<div id="com_loaded">
  <div id="com_loaded_poster"><a href="#"><?=$row['user_name']?></a></div>
  <div id="com_loaded_text"><?=$row['comment_text']?></div>
</div> 
```

**它被添加到以下 div 之前：**

```
<div id="messages">

            <?

            $sql = "SELECT *
                    FROM items_comments, users
                    WHERE items_comments.item_id = '".$id."'
                    AND items_comments.user_id = users.user_id
                    ORDER BY comment_id DESC";
            $result = $Db->sQuery($sql);
            while($row = mysql_fetch_array($result)){

            ?>

            <div id="com_loaded">
                <div id="com_loaded_height"></div>
                <div id="com_loaded_userpic"><a href="#" class="tooltip"><img src="<?=$row['user_pic']?>" class="img_poster" /><span><?=$row['user_name']?></span></a></div>
                <div id="com_loaded_content">
                    <div id="com_loaded_poster"><a href="#"><?=$row['user_name']?></a></div>
                    <div id="com_loaded_text"><?=$row['comment_text']?></div>
                </div>
                <div id="com_loaded_divide"></div> 
            </div>
            <?

            }

            ?>

            </div> 
```

我正在尝试通过以下方式淡入前置：

```
 <script>
    $(function() {
        $(".submit-comment").click(function() {

            var text = $(".txtinput").val();
            var itemid = "<?=$id?>";
            var userid = "<?=$_SESSION['user_id']?>";
            var dataString = 'text=' + text + '&userid=' + userid + '&itemid=' + itemid;

            if(text == '') {
                $('#content_error1').fadeIn(250);
                $('#content_error1').delay(1500).fadeOut(500);
            } else {

            $.ajax({
                type: "POST",
                url: "/ajax/comments.php",
                data: dataString,
                success: function(html){
                /*  $("#messages").prepend(html).fadeIn(2000); */

                $(html).hide().prependTo("#messages").fadeIn(1000);​
                }
            }); 
            }
            return false; 
        });
    }); 
  </script> 
```

该行：

```
 $(html).hide().prependTo("#messages").fadeIn(1000); 
```

似乎不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T19:46:03.113

我通过使用前置来修复它。现在它正在工作

# ruby - Ruby YAML 序列化

> ID：12449473
> 
> 赞同：0
> 
> 时间：2012-09-16T18:24:04.853
> 
> 标签：ruby, serialization, yaml

我正在序列化一个红宝石对象

```
YAML::dump(obj) 
```

并将其存储在数据库中。然后我打电话

```
myobj = YAML::load(obj) 
```

我可以在调试中看到该对象已成功创建并且它的字段已初始化。但是，当我尝试调用一个属性时，例如 myobj.name 之类的“名称”，我会收到“无方法错误”消息。我做错了什么，如何正确反序列化对象？顺便说一句，我可以通过调用访问对象的字段

```
myobj.instance_variable_get('@attributes')[:name] 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:34:01.490

你确定你的对象有方法`name`吗？

你能试试

```
YAML::dump(obj) 
p obj.name 
```

可以肯定的是，您存储的对象确实有一个方法`name`。

您的

```
myobj.instance_variable_get('@attributes')[:name] 
```

并不表示存在方法或属性`name`。只有一个属性`@attributes`，它支持一种方法`[]`（可能是哈希）。

也许你可以使用

```
myobj.attributes[:name] 
```

But without more information, all this are only a guess.

# recursion - 用于生成n位字符串的分而治之算法？

> ID：12449474
> 
> 赞同：0
> 
> 时间：2012-09-16T18:24:08.973
> 
> 标签：recursion, combinations, divide-and-conquer, space-complexity

有人可以告诉如何生成 n 位字符串（所有可能的组合），即使用分而治之的方法从 0 到 2^n-1 计数位。

我可以使用以下算法做到这一点，但空间复杂度和时间复杂度都是 O(2^n)。有人可以给我一个更好的算法（使用分而治之），它需要比这更少的空间。

```
ArrayList generate(int n)
 {
      if(n==1) 
         {  
            Create an arrayList and store strings "0" and "1";
         }
     else
    {
         generate(n-1)

         now recompose the solution to get 2^n strings and return this arraylist
         "PROBLEM here is that the length of the array list is also getting
         exponential"

    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T05:43:08.870

我相信你被误解了。生成位串本身不是问题，因此您无法提出解决方案。也许你遗漏了问题的一部分。例如，您可以使用位串定义解决方案的表示，然后尝试为给定问题找到最佳位串。

还有一件事，通常表示为 n 位字符串的问题的时间复杂度始终为 O(2^n)，除非问题已定义。然后，您可以使用问题的标准来降低任一复杂性。但是在定义问题之前，生成和遍历一个 n 位字符串总是需要您倾向于每一个可能的 2^n 组合。

编辑：

如果必须，这是分治的伪代码：

```
solution breakdown(problem p)
{
    if (smallenough(p))
    {
        return solve(p);
    }
    problem[] subproblems = divide(p);
    solution[] subsolutions;
    for (i=0; i<count(subproblems); i++)
    {
        subsolutions[i] = breakdown(subproblems[i]);
    }
    return reconstruct(subsolutions);
} 
```

# javascript - SomeArray.sort (function() { ... } ) 语句背后的逻辑是什么？

> ID：12449479
> 
> 赞同：1
> 
> 时间：2012-09-16T18:24:40.140
> 
> 标签：javascript, arrays, sorting, random, shuffle

```
var array = [3,9,23,76,1,54,21,12,0,9,2];
var shuffled = array.sort(function() {return 0.5 - Math.random()});
console.log(shuffled); 
```

我知道结果，也很满意。

上面的代码返回我的数组元素的打乱顺序。

我对它为什么会导致该输出感到困惑。

里面的函数有什么意义，`.sort`它对输出有何贡献？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:39:45.777

该函数实际上有两个参数，它们是数组中的 2 个项目。目的是比较这些元素并返回一个数字。
如果数字是正数，则第二项应在第一项之前。
如果数字为 0 或负数，则第二项应在第一项之后。

```
[0,1].sort(function(a,b){return  1;}); // [1, 0], reverses order
[0,1].sort(function(a,b){return  0;}); // [0, 1], does nothing
[0,1].sort(function(a,b){return -1;}); // [0, 1], does nothing 
```

在上述示例的每种情况下，`a === 0`并且`b === 1`.

* * *

## 编辑逐步输出

要逐步查看升序排序时发生的情况`[1,3,2,4,4,0]`，可以编写一个函数来准确记录每一步发生的情况

```
arr = [1,3,2,4,4,0];
arr.sort(function(a,b){ // ascending order sort
    var result = a-b,
    str = '';
    if(result > 0) str = 'so swapping';
    else if(result === 0) str = 'so ignoring'
    else str = 'so continuing';
    console.log('with [ '+arr.join(', ')+' ]','comparing',a,'to',b,'resulting in',result, str);
    return result;
});
console.log('resulting in [ '+arr.join(', ')+' ]'); 
```

哪个输出

```
with [ 1, 3, 2, 4, 4, 0 ] comparing 1 to 3 resulting in -2 so continuing
with [ 1, 3, 2, 4, 4, 0 ] comparing 3 to 2 resulting in 1 so swapping
with [ 1, 3, 3, 4, 4, 0 ] comparing 1 to 2 resulting in -1 so continuing
with [ 1, 2, 3, 4, 4, 0 ] comparing 3 to 4 resulting in -1 so continuing
with [ 1, 2, 3, 4, 4, 0 ] comparing 4 to 4 resulting in 0 so ignoring
with [ 1, 2, 3, 4, 4, 0 ] comparing 4 to 0 resulting in 4 so swapping
with [ 1, 2, 3, 4, 4, 4 ] comparing 4 to 0 resulting in 4 so swapping
with [ 1, 2, 3, 4, 4, 4 ] comparing 3 to 0 resulting in 3 so swapping
with [ 1, 2, 3, 3, 4, 4 ] comparing 2 to 0 resulting in 2 so swapping
with [ 1, 2, 2, 3, 4, 4 ] comparing 1 to 0 resulting in 1 so swapping
resulting in [ 0, 1, 2, 3, 4, 4 ] 
```

* * *

为了完整性，原始问题中随机算法的概率表（估计，基于每个索引的 500,000 次试验），X 是起始索引

```
 x     0     1     2     3     4     5     6     7     8     9    10
 0 |  8.0,  8.0,  6.2,  6.6,  9.2, 10.8,  9.3,  6.6,  6.2,  9.7, 18.8
 1 |  4.5,  4.6,  7.8, 12.2, 16.9, 12.9, 11.4, 10.7,  8.7,  6.1,  3.6
 2 | 15.5, 15.5, 10.3,  5.9,  3.7,  3.8,  5.7,  8.3, 10.6, 11.7,  8.5
 3 | 10.4, 10.3, 13.4, 10.2,  7.0,  6.5,  7.8,  9.4,  9.7,  8.8,  6.0
 4 |  6.4,  6.3, 10.7, 15.4, 11.4,  9.5,  9.6,  9.9,  8.9,  6.9,  4.4
 5 | 16.1, 16.1, 10.9,  7.7,  7.4,  7.6,  6.2,  4.4,  4.1,  6.5, 12.5
 6 |  4.7,  4.7,  7.1,  9.7, 12.6, 16.3, 13.6, 11.9,  9.2,  6.1,  3.6
 7 |  6.0,  6.0,  7.7,  8.9,  9.4, 10.9, 14.0, 13.6, 11.2,  7.4,  4.3
 8 |  8.4,  8.3,  9.1,  8.6,  7.3,  6.7,  8.2, 11.6, 13.8, 10.8,  6.7
 9 | 11.5, 11.4, 10.1,  7.6,  5.0,  3.7,  4.2,  6.7, 10.9, 15.8, 12.6
10 |  8.0,  8.1,  6.2,  6.6,  9.2, 10.9,  9.2,  6.6,  6.1,  9.8, 18.8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:15:24.720

to 的参数`sort`是一个排序回调，它是一个函数，它应该将两个值作为参数排序并返回负数、0 或正数，具体取决于比较的第一个值是小于、等于还是大于第二个。

在您的特定示例中，此回调完全忽略比较的实际值，而是生成一个随机数`Math.random`，它返回范围 0 .. 1 中的值并将其从 0.5 中减去以将结果范围更改为 -0.5 .. 0.5。这使得排序随机假设一个值小于或大于另一个值，并最终生成随机打乱的列表，而不是按某些“真实”条件排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T18:30:55.807

我*认为*排序的目的是随机排列列表中的项目。sort() 方法的匿名函数要么返回正值，要么返回负值，这正是回调应该做的事情。

排序回调应该用于比较两个项目，并分别返回 -1、0 或 -1 以表示小于、相等和大于。

现在可能还有另一个关于这是否是随机化的好方法的讨论，因为比较函数可能会在离散调用中为相同的两个对象返回不同的值.....

# css - 纯 CSS 漂亮的内联块折叠

> ID：12449480
> 
> 赞同：0
> 
> 时间：2012-09-16T18:24:43.560
> 
> 标签：css

我有一个包含三个内联块的标题。包含这些块的元素设置为文本居中对齐，左侧块向左浮动，右侧黑色向右浮动。这会产生一个很好的效果，使得中间块的文本在屏幕上居中，（几乎）不管窗口大小。

如果您将窗口做得更小，则这些块会相互堆叠……这就是我所需要的。问题是，由于浮动，它们不会“跳”到位。即，当块从水平移动到垂直以堆叠在一起时，最右边的块粘在右侧（在左侧留下一个大的空白区域）。中间块，因为 text-align: center，也不会跳过。所以我在小屏幕上留下了“阶梯/阶梯”效果，但还不足以强制完全堆叠。

看看这个 js fiddle 看看我的意思：http: [//jsfiddle.net/fphzY/15/](http://jsfiddle.net/fphzY/15/)

## HTML：

```
<div id="top">

    <div class="topBox">
        <div id="companyLogo">
            IMG
        </div>
    </div>

    <div class="topMiddleBox">
        <div id="shortcuts" class="headerList">
            List of Links
        </div>
    </div>

    <div class="topRightBox">
        <div id="welcome">
            Links
        </div>
        <div id="globalLinks">
            Links
        </div>
    </div>

</div> 
```

## CSS：

```
#top{
 padding:0;
 text-align:center;
 vertical-align:top;
}

.topBox{
    min-width: 100px;
    min-height: 100px;
    background-color:#ccc;
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1;
    float: left;
}

#companyLogo {
    margin: 15px 0px 10px 20px;
    vertical-align: top;
    background-color:#000;
    color:#fff;
}

.topMiddleBox{
    min-width: 100px;
    min-height: 100px;
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1;
    background-color:#66CCFF;
}
#shortcuts{
    display: inline;
    background-color:#000;
    color:#fff;
}

.topRightBox {
    min-width: 100px;
    vertical-align: top;
    display: inline-block;
    *display: inline;
    zoom: 1;
    float: right;
    margin-top: 27px;
    background-color:#FF8000;
}

#welcome 
{
    font-weight: normal;
    margin: 23px 20px 0px 0px;
    text-align:right;
    color: #424242;
    font-size: 10pt;
    background-color:#000000;
    color:#ffffff;
}

#globalLinks
{
    margin: 7px 20px 0px 0px;
    vertical-align: middle;
    text-align: center;
    padding:5px 2px 0px;
    background-color:#FFFF66;
    color:#000000;    
}

#globalLinks ul 
{
    list-style: none;
    padding: 0;
    margin-top: -5px;
    margin-left: 0;
}
#globalLinks ul li
{
    padding: 0;
    margin-left: 3px;
    display:inline;
}
#globalLinks ul li span
{
    padding-right: 2px;
} 
```

现在，我知道这是预期的行为，但我正试图找到一种方法来实现我的目标（三个水平容器 - 一个粘在左侧，一个粘在右侧，一个居中 - 很好地堆叠在窗口缩小时彼此顶部）仅使用 CSS。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:24:26.837

不确定这是否是您想要的，但我想您可以将三个 div 中的每一个设为宽度的三分之一，如下所示：

[http://jsfiddle.net/henrikandersson/vFkv9/1/](http://jsfiddle.net/henrikandersson/vFkv9/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:55:17.503

恐怕纯CSS无法实现您想要的...

...除非您的三个 div 可以具有**相同的固定宽度**。

在这种情况下，只需将它们全部浮动到左侧，如下所示：

[http://jsfiddle.net/fphzY/16/](http://jsfiddle.net/fphzY/16/)

# c++ - 使“Makefile”看起来更好

> ID：12449482
> 
> 赞同：0
> 
> 时间：2012-09-16T18:25:01.763
> 
> 标签：c++, makefile, bin

我的 makefile 工作正常（GNU Make），但我想知道是否

*   有一种方法可以创建一个新目录“bin”并将所有 .o 放在那里
*   如果“1”的答案是“是”，指令“make clean”可以删除文件夹“bin”吗？
*   避免编写所有 .cpp 和 .o 文件名？

> ```
> CFLAGS = -Wall -g
> CC = g++
> EXEC = main
> OBJ = listpath.o Parser.o main.o
> 
> all: $(EXEC)
> 
> listpath.o: src/listpath.cpp
>   $(CC) $(CFLAGS) -c src/listpath.cpp
> 
> Parser.o: src/Parser.cpp 
>   $(CC) $(CFLAGS) -c src/Parser.cpp
> 
> main.o: src/main.cpp
>   $(CC) $(CFLAGS) -c src/main.cpp
> 
> $(EXEC): $(OBJ)
>   $(CC) $(CFLAGS) $(OBJ) -o $(EXEC)
> 
> .cpp.o:
>   $(CFLAGS) $<
> 
> .PHONY: clean
> clean:
>   rm $(OBJ) $(EXEC) 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:31:21.173

从最后一个问题开始，您可以定义隐式规则将 .c 文件转换为 .o 文件。

```
bin/%.o : src/%.cpp | bin
  $(CC) $(CFLAGS) -c $< -o $@ 
```

这也会将 .o 文件放到 bin/ 目录中。

现在您的结果规则将如下所示：

```
$(EXEC): $(addprefix bin/, $(OBJ))
  $(CC) $(CFLAGS) $^ -o $@ 
```

要清理 bin/ 目录，只需将清理规则更改为：

```
clean:
  rm -rf bin/ $(EXEC) 
```

最后，添加一条规则来创建 bin 目录：

```
bin:
  mkdir -p bin 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T18:50:28.777

从那里指定内容而不是通过某些中间产品（例如 .o 文件）是一个好主意。使用模式替换来生成这些中间产品的名称。如果您使用相同的模式来编译每个文件，则不需要多次指定它。使用make的模式。

```
# The first rule that make sees is the default target.
# I like to put the default target right up front so there is no doubt.
default: all

SRC = src/listpath.cpp src/Parser.cpp src/main.cpp
# Or SRC = $(wildcard src/*.cpp)

# Generate list of object files.
OBJ = $(patsubst %.cpp, bin/%.o, $(notdir $(SRC)))

# Compile rule
$(OBJ): bin/\%.o : src/%.cpp bin
   $(CC) $(CFLAGS) -c $< -o $@ 
```

箱：mkdir箱

```
# Link rule
$(EXEC): $(OBJ)
  $(CC) $(CFLAGS) $(OBJ) -o $(EXEC)

all: $(EXEC)

clean:
   rm -rf bin $(EXEC) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T18:33:01.870

考虑使用一些 makefile 构建工具，如 cmake 或 qmake。根据我的经验，不明确命名 makefile 中的所有源文件是危险的。

如果你是onlinux，试试简单

```
qmake -project && qmake && make 
```

在您的源目录中。QMake 将为您创建 makefile 做所有的事情。我相信，cmake 也会这样做。

# android - 如何在模拟器上运行应用程序而不会出错

> ID：12449483
> 
> 赞同：-1
> 
> 时间：2012-09-16T18:25:12.887
> 
> 标签：android, android-emulator

模拟器加载并将消息显示为“不幸的是应用程序已停止”PLS帮助我....这显示在控制台中

```
[2012-09-16 23:32:25 - Demo] Android Launch!
[2012-09-16 23:32:25 - Demo] adb is running normally.
[2012-09-16 23:32:25 - Demo] Performing com.example.demo.MainActivity2 activity launch
[2012-09-16 23:32:25 - Demo] Automatic Target Mode: launching new emulator with compatible AVD 'Emulator1'
[2012-09-16 23:32:25 - Demo] Launching a new emulator with Virtual Device 'Emulator1'
[2012-09-16 23:32:31 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-16 23:32:31 - Emulator] Failed to create Context 0x3005
[2012-09-16 23:32:31 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-16 23:32:31 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-16 23:32:31 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-16 23:32:31 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-16 23:32:31 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-16 23:32:31 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-16 23:32:31 - Emulator] could not get wglGetExtensionsStringARB
[2012-09-16 23:32:31 - Emulator] emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
[2012-09-16 23:32:31 - Emulator] emulator: warning: opening audio input failed
[2012-09-16 23:32:31 - Emulator] 
[2012-09-16 23:32:32 - Demo] New emulator found: emulator-5554
[2012-09-16 23:32:32 - Demo] Waiting for HOME ('android.process.acore') to be launched...
[2012-09-16 23:33:36 - Demo] HOME is up on device 'emulator-5554'
[2012-09-16 23:33:36 - Demo] Uploading Demo.apk onto device 'emulator-5554'
[2012-09-16 23:33:36 - Demo] Installing Demo.apk...
[2012-09-16 23:34:36 - Demo] Success!
[2012-09-16 23:34:36 - Demo] Starting activity com.example.demo.MainActivity2 on device emulator-5554
[2012-09-16 23:34:38 - Demo] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.demo/.MainActivity2 }
[2012-09-16 23:41:22 - Demo] ------------------------------ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:02:01.513

初始化有很多错误，因此建议全新安装。虽然它也可能是apk包的问题，​​但是重新安装模拟器并尝试相同，如果它仍然无法正常工作，那么它是包而不是模拟器的问题，但我认为这是因为缺少文件或配置，无论如何尝试一下，希望它应该工作，否则包损坏或损坏。

完全卸载程序。

然后按照这些视频，你会很高兴：

正确安装模拟器 - [http://www.youtube.com/watch?v=BwnPpVpzJSk&feature=youtube_gdata_player](http://www.youtube.com/watch?v=BwnPpVpzJSk&feature=youtube_gdata_player)

在 android 模拟器上获取应用程序 - [http://www.youtube.com/watch?v=979dyHuZG9I&feature=youtube_gdata_player](http://www.youtube.com/watch?v=979dyHuZG9I&feature=youtube_gdata_player)

不过，游戏或应用程序的运行速度不会像在实际的 android 设备上那样快。

一切顺利。希望我有所帮助。

# c# - 将字符串转换为相应的 Forms.Keys 值？

> ID：12449484
> 
> 赞同：6
> 
> 时间：2012-09-16T18:25:17.490
> 
> 标签：c#, .net, winforms, string

我正在寻找一种将 a 的值转换为`string`等效`System.Windows.Forms.Keys`项的方法。然后这个值会被用来`PressKey`模拟对应的Key。我尝试使用`KeyConverter`这样的：

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern void keybd_event(byte bVk, byte bScan, uint dwFlags, UIntPtr dwExtraInfo);

    public static void PressKey(System.Windows.Forms.Keys key, bool up)
        {
            const int KEYEVENTF_EXTENDEDKEY = 0x1;
            const int KEYEVENTF_KEYUP = 0x2;
            if (up)
            {
                keybd_event((byte)key, 0x45, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP, (UIntPtr)0);
            }
            else
            {
                keybd_event((byte)key, 0x45, KEYEVENTF_EXTENDEDKEY, (UIntPtr)0);
            }
        }

    KeyConverter kc = new KeyConverter();
    PressKey((System.Windows.Forms.Keys)kc.ConvertFromString(string), false); 
```

我需要的是一个`string`喜欢`"Enter"`转换为`System.Windows.Forms.Keys.Enter`. 但是`KeyConverter`没有返回任何东西。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T18:27:48.783

用于[`Enum.Parse`](http://msdn.microsoft.com/en-us/library/essfb559.aspx)将字符串转换为对应的枚举值：

```
public static Keys ConvertFromString(string keystr) {
    return (Keys)Enum.Parse(typeof(Keys), keystr);
} 
```

请注意，如果密钥字符串不在枚举中，`Enum.Parse`则会抛出一个。`ArgumentException`如果您不希望这样，请改用`Enum.TryParse`它，它会返回一个布尔值，指示转换是否成功。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-16T18:29:06.307

`System.Windows.Forms.Keys`是一个枚举，所以你可以使用 [`Enum.TryParse`](http://msdn.microsoft.com/en-us/library/dd783499%28v=vs.100%29.aspx)：

```
Keys key;
Enum.TryParse("Enter", out key); 
```

它是在 .NET 框架 4.0 中引入的，它比`Enum.Parse`自动推断类型参数更具可读性。

您可以检查布尔返回值以查看转换是否成功，从而无需为未定义的枚举值捕获异常。

# css - 使用 CSS 显示 XSTL 表

> ID：12449497
> 
> 赞同：2
> 
> 时间：2012-09-16T18:26:34.040
> 
> 标签：css, xml, xslt

好的，我的第一个 XML 项目遇到了麻烦，所以我求助于你们。我正在尝试使用包含联系人数据的 XML 文件生成地址簿，然后在 XSLT 中进行转换。XML 和 XSLT 文件都可以正常工作，但是当我尝试将 CSS 文件实现到 XSLT 中时，我的问题就开始了，这样我就可以格式化页面以匹配网站的其余部分。实现 CSS 后，我的表格只显示 XSLT 中给出的第一行并停止。下面给出的是我的三个文件的代码，以及包含 CSS 文件的给定响应。

**XML:**

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<?xml-stylesheet type="text/xsl" href="contactdata.xsl"?>

<!DOCTYPE addressbook [
<!ELEMENT addressbook (contact)>
<!ELEMENT contact (fname,lname,mi,staddress,city,state,zip,phone,email,twitter)>
<!ELEMENT fname (#PCDATA)>
<!ELEMENT lname (#PCDATA)>
<!ELEMENT mi (#PCDATA)>
<!ELEMENT staddress (#PCDATA)>
<!ELEMENT city (#PCDATA)>
<!ELEMENT state (#PCDATA)>
<!ELEMENT zip (#PCDATA)>
<!ELEMENT phone (#PCDATA)>
<!ELEMENT email (#PCDATA)>
<!ELEMENT twitter (#PCDATA)>
]>
<addressbook>
<contact>
<fname>Peyton</fname>
<lname>Manning</lname>
<mi>Z</mi>
<staddress>123 Go Vols</staddress>
<city>Denver</city>
<state>CO</state>
<zip>12345</zip>
<phone>1-800-youwish</phone>
<email>pmanning@broncos.com</email>
<twitter>peyton_manning</twitter>
</contact>

<contact>
<fname>Eric</fname>
<lname>Berry</lname>
<mi>P</mi>
<staddress>123 Arrowhead Stadium</staddress>
<city>Kansas City</city>
<state>MO</state>
<zip>34567</zip>
<phone>816-213-4452</phone>
<email>eberry@chiefs.com</email>
<twitter>eric_berry</twitter>
</contact>
</addressbook> 
```

**XSLT：**

```
<?xml-stylesheet type="text/css" href="sitetemplate.css"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
    <html>
        <body>
            <table>
                <tr>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Middle Initial</th>
                    <th>Street Address</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Zip</th>
                    <th>Phone</th>
                    <th>Email</th>
                    <th>Twitter</th>
                </tr>
                <xsl:apply-templates/>
            </table>
        </body>
    </html>
 </xsl:template>

 <xsl:template match="contact">
  <tr><xsl:apply-templates/></tr>
 </xsl:template>

 <xsl:template match="contact/*">
  <td><xsl:value-of select="."/></td>
 </xsl:template>
</xsl:stylesheet> 
```

**CSS：**

```
.text {font-family: Helvetica, Times, serif; color:white;}

.center {text-align:center;}

body {background-image:url('wallpaper.jpg'); font-family: Helvetica, Times, serif;}

hr {border: 0; width: 50%; color:white;}

table, th, td {border:10px white; background-color:blue; color:white;} 

a:link {color:#75B8FA; text-decoration:none;}
a:visited {color:#75B8FA; text-decoration:none;}
a:hover {color:#75B8FA; text-decoration:none;}
a:active {color:#FFFFFF; text-decoration:none;} 
```

尝试运行时浏览器上显示的内容：http: [//i144.photobucket.com/albums/r171/jmock89/giventable.png](http://i144.photobucket.com/albums/r171/jmock89/giventable.png) （对不起，这是一个外部链接，我不能在 StackOverflow 上发布图像，直到我有 10代表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:41:39.257

**如果您的 CSS 样式表位于： `http://myUrl.com/myCSS.css` 然后在转换中包含以下内容，紧跟在 之后`<html>`：**

```
 <head>
          <link rel="stylesheet"
                type="text/css"
                href="http://myUrl.com/myCSS.css"/>
        </head> 
```

**或者，生成内联样式**：

```
 <head>
          <style>
                    .text {font-family: Helvetica, Times, serif; color:white;}

                    .center {text-align:center;}

                    body {background-image:url('wallpaper.jpg'); font-family: Helvetica, Times, serif;}

                    hr {border: 0; width: 50%; color:white;}

                    table, th, td {border:10px white; background-color:blue; color:white;}

                    a:link {color:#75B8FA; text-decoration:none;}
                    a:visited {color:#75B8FA; text-decoration:none;}
                    a:hover {color:#75B8FA; text-decoration:none;}
                    a:active {color:#FFFFFF; text-decoration:none;}
          </style>
        </head> 
```

**还有另一种选择**：

生成必要的处理指令：

```
<?xml-stylesheet type="text/css" href="sitetemplate.css"?> 
```

为此，请添加以下内容（紧接在前面`<html>`）：

```
 <xsl:processing-instruction
 name="xml-stylesheet">type="text/css" href="sitetemplate.css"</xsl:processing-instruction> 
```

# magento - 如何将代码注入 Magento 管理模板

> ID：12449498
> 
> 赞同：1
> 
> 时间：2012-09-16T18:26:53.730
> 
> 标签：magento

我必须向以下每个 adminhtml 模板添加一段代码：

```
shipment/create/form.phtml
shipment/view/form.phtml
creditmemo/create/form.phtml
creditmemo/view/form.phtml
invoice/create/form.phtml
invoice/view/form.phtml 
```

所以总共有 6 个模板，所有模板都需要关联的布局代码才能将模板从默认 magento 替换为我的自定义模板。

所有这些都是为了添加一行代码来回显某些内容。

现在，我看不到它，但是有没有办法让我以某种方式将我的代码添加到这些模板中，但不必用我的自定义版本替换默认的 magento 模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T22:43:23.890

没有必要改变*模板*。Adminhtml 渲染与前端渲染相同，包括回退。在模块的配置中为管理存储指定一个自定义主题：

```
<config>
    <!-- ... -->
    <stores>
        <admin>
            <design>
                <theme>
                    <template>your_theme</template>
                    <!-- or <default>your_theme</default> -->
                </theme>
            </design>
        </admin>
    </stores>
</config> 
```

如果这将是一个分布式模块，您将需要一种不同的方法，或者您需要使用自定义模板的扩展来建议客户。[由于`Find_Feed`模块](https://github.com/benmarks/magento-mirror/blob/1.6.0.0/app/code/community/Find/Feed/etc/config.xml#L125)，这种方法在 CE1.6.1.0 之前不起作用。

在这种情况下，您可以使用布局更新 XML 来更改您所描述的使用的模板。如果用户已经在为这些块使用自定义模板，这并不理想 - 不太可能但可能。如果情况变得更糟，您可以随时观察[`core_block_abstract_to_html_after`](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/app/code/core/Mage/Core/Block/Abstract.php#L886)事件作为最后的手段。

# c# - 将 DispatcherTimer 与 Windows 服务一起使用

> ID：12449503
> 
> 赞同：4
> 
> 时间：2012-09-16T18:27:20.140
> 
> 标签：c#, windows-services, dispatcher

为什么我的 DispatcherTimer 不适用于 Windows Service 。

我想使用 DispatcherTimer 检查 Windows 服务许可证的目的

```
 public OIMService()
    {
        InitializeComponent();
        _dispatcherTimer = new DispatcherTimer();
        if (!System.Diagnostics.EventLog.SourceExists("OIM_Log"))
        {
            EventLog.CreateEventSource("OIM_Log", "OIMLog");
        }
        EventLog.Source = "OIM_Log";
        EventLog.Log = "OIMLog";
        _helpers = new ValidationHelpers();
        StartTimer();

    }

protected override void OnStart(string[] args)
{
    System.Diagnostics.Debugger.Launch();

    if (_helpers.IsValid())
    {
        ConfigureServer();
        StartTimer();
    }
    else
    {
        this.Stop();
    }

}

 private void StartTimer()
        {
            const int time = 10;
            _dispatcherTimer.Tick += new EventHandler(DispatcherTimerTick);
            _dispatcherTimer.Interval = new TimeSpan(0, 0, Convert.ToInt32(time));
            _dispatcherTimer.IsEnabled = true;
            _dispatcherTimer.Start();
        }
    private void DispatcherTimerTick(object sender, EventArgs e)
    {

        EventLog.WriteEntry("test test test ...");
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T18:32:13.583

的重点`DispatcherTimer`是在调度程序线程上触发其`Tick`事件。这很重要，因为您只能在调度程序线程上操作 Silverlight/WPF UI 元素。在 Windows 服务中，*没有*调度程序线程……没有可操作的 UI。为什么要使用 a`DispatcherTimer`而不是 (say) [`System.Timers.Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)？

# php - 删除文件扩展名的重写规则，Webmatrix

> ID：12449506
> 
> 赞同：0
> 
> 时间：2012-09-16T18:27:44.680
> 
> 标签：php, url, url-rewriting, webmatrix

我使用 Webmatrix/IIS Express 开发了一个 php 应用程序。虽然我能够自己编写大部分基本规则，但我在以下两项方面遇到了困难：

1.  应该删除文件扩展名，用斜杠替换。下面的例子：

    http://localhost.com/Home.php -> http://localhost.com/home/

2.  确保根目录中的现有文件夹正常工作。例如，我的站点根目录中有一个 admin 文件夹，因此 http://localhost.com/admin 应该指向它。我只有几个文件夹，所以如果我必须为每个文件夹创建一个规则，我不会介意。

任何人都可以指定将在 web.config 的重写部分中的上述确切规则吗？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:47:03.683

这是我为此使用的 web.config 重写规则。

```
<rewrite>
    <rules>
        <rule name="GeneralRewrite" stopProcessing="true">
            <match url="^(.*)$" ignoreCase="true" />
            <conditions>
                <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
                <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
            </conditions>
            <action type="Rewrite" url="{tolower:{R:1}}.php" />
        </rule>
    </rules>
</rewrite> 
```

# javascript - 更改 YouTube 中嵌入 Flash 对象的来源

> ID：12449509
> 
> 赞同：1
> 
> 时间：2012-09-16T18:27:49.473
> 
> 标签：javascript, flash, youtube, greasemonkey

我想更改 YouTube 视频的源 swf 文件。视频是一个`<embed>`元素。

## 它是如何构建的：

```
<embed width="640" id="movie_player-flash" height="390"
       tabindex="0" type="application/x-shockwave-flash"
       src="http://s.ytimg.com/yt/swfbin/watch_as3-vfl07wZSq.swf" flasvars="..."> 
```

（可以在[Google 的 YouTube 频道](http://www.youtube.com/user/google)上找到一个示例）

我遗漏了一些属性和内容，`flashvars`因为它是一个带有设置的长字符串，这会影响视频吗？

* * *

## 我试过的：

1.  我尝试通过简单地更改`src`属性来尝试，但这不会影响任何事情：

    ```
    document.getElementById('movie_player-flash').src = url; 
    ```

2.  我还尝试克隆原始文件，更改源并重新附加它。再说一遍：没有：

    ```
    var player = document.getElementById('movie_player-flash');
    var playerClone = player.cloneNode(true);
    playerClone.setAttribute('src', url);

    player.parentNode.replaceChild(playerClone, player); 
    ```

有人知道如何完成更改视频源吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T06:01:06.693

这里有很多问题：

1.  Flash 视频并不总是在`<embed id="movie_player-flash"`，有时它在`<embed id="movie_player"`。由于这是 Google，因此可能还有其他方案。所以，一个简单`document.getElementById('movie_player-flash')`的就出来了。使用类似的东西：

    ```
    var flashEmbed  = document.querySelectorAll ("#movie_player-flash, #movie_player");
    if (flashEmbed.length) {
        flashEmbed  = flashEmbed[0];
        // DO THE SWITCH HERE.
    } 
    ```

2.  *仅*更改`src`属性**确实**有效，但仅在极少数情况下。如果您要切换到其他视频：

    1.  **不需要参数。** （尽管您可以通过创建适当的`<object>`和`<param>`标签来恢复这些。）
    2.  **不加载外部依赖项。** 如果它们与目标页面不在同一个域中，它们将被跨域安全阻止。此外，flash 文件加载的对象的路径通常在文件本身内是固定的（即使是相同的域，也可能给出 404 错误）。

    **然后，它可以工作。**看到[**这个小提琴**](http://jsfiddle.net/wgUnR/1/)。

3.  回覆：

    > 我遗漏了一些属性和内容，`flashvars`因为它是一个带有设置的长字符串，这会影响视频吗？

    在现代 Youtube 上，这`flashvars`就是一切！此外，如果您比较该`src`属性，您会发现它对于大多数所有 Flash 视频都是相同的。例如，无论我尝试什么视频，目前`src`都是`http://s.ytimg.com/yt/swfbin/watch_as3-vfl07wZSq.swf`.

    这是因为`<embed>`标签加载的 Flash 对象不是视频。它是一个加载播放器（和其他东西）的外壳对象，播放器加载实际的视频文件。

    因此，名义上，**要将一个 Youtube 视频更改为另一个，您必须更改参数和/或`flashvars`**. 即使您将 更改`src`为旧式的直接`<embed>`链接 (EG: `http://www.youtube.com/v/uY3LAFJbKyY?version=3&amp;hl=en_US&amp;rel=0`)，它也只会在按下***Play***按钮之前似乎有效。然后参数中定义的视频将返回并播放。

4.  **但是，** Youtube 仍然保留了旧系统的某些方面（目前）。因此，如果您能找到旧式嵌入链接，您可以将 换成`src`那个并用`<embed>`没有`flashvars`. 请参阅答案末尾的代码。

    这是查找旧式嵌入链接的一种方法：

    1.  在视频的 Youtube 页面上，按下***分享*按钮**。
    2.  按***嵌入*按钮**。
    3.  选中***使用旧嵌入代码*复选框**。
    4.  文本区域现在将显示`<object>...<embed>...`HTML。将其复制并仅提取`<embed>` `src`属性。（例如：

        ```
        http://www.youtube.com/v/uY3LAFJbKyY?version=3&amp;hl=en_US&amp;rel=0 
        ```

        )
        丢弃一切。

5.  flash 元素并不总是立即加载。它也可以通过 AJAX 替换。所以，我们可能需要等待（右）`<embed>`出现。
    为简单起见，我将使用 来展示这一点`setInterval()`，但对于一个强大、实用的解决方案，您将需要使用[该`waitForKeyElements()`实用程序](https://gist.github.com/2625891)，如[本答案](https://stackoverflow.com/a/11197969/331508)所示。

综上所述，这是一个**完整的 Greasemonkey 脚本**，可以替换大多数视频：

```
// ==UserScript==
// @name        _Youtube, replace flash video
// @description Replaces most videos with the Greatest Video Of All Time!
// @include     http://www.youtube.com/watch*
// @include     http://www.youtube.com/user*
// @grant       none
// ==/UserScript==

var embedChkIntval  = setInterval ( function () {
        var flashEmbed  = document.querySelectorAll ("#movie_player-flash, #movie_player");
        if (flashEmbed.length) {
            var playerClone = flashEmbed[0].cloneNode (true);
            playerClone.src = 'http://www.youtube.com/v/dQw4w9WgXcQ?version=3&amp;hl=en_US&amp;rel=0';
            playerClone.removeAttribute ("flashvars");

            flashEmbed[0].parentNode.replaceChild (playerClone, flashEmbed[0]);
            clearInterval (embedChkIntval);
        }
    },
    150
); 
```

# matlab - 如何根据特定行（Matlab）中包含的条件对列进行排序？

> ID：12449510
> 
> 赞同：2
> 
> 时间：2012-09-16T18:27:49.373
> 
> 标签：matlab, sorting, matrix

我有类似以下矩阵的数据： A = [2 5 10 4 10; 2 4 5 1 2; 6 2 1 5 4]；

一个=

```
 2     5    10     4    10
 2     4     5     1     2
 6     2     1     5     4 
```

我想根据以下标准按最后一行排序：

如果第一个元素（第三行）和第二个元素（第三行）之间的差异小于或等于 2 - 然后移动该列（在这种情况下，第二个元素向右移动两列）。然后对所有列执行此操作，直到没有两个元素（最后一行）在 2 之内）

乙 =

```
 2     5     4    10    10
 2     4     1     5     2
 6     2     5     1     4 
```

其中 (6-2 = 4) (2-5 = 3) (5-1 = 4) (1-4 = 3)

最终，最后一行的所有元素与其旁边的元素之间的差异大于 2。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T21:46:28.790

这是一种可能的解决方案：

```
A = [2 5 10 4 10; 2 4 5 1 2; 6 2 1 5 4];

B = A;

MatrixWidth = size(A, 2);

CurIndex = 1;

%# The second-last pair of the bottom row is the last pair to be compared.
while(CurIndex+2 <= MatrixWidth)
    Difference = abs(A(3,CurIndex) - A(3,CurIndex+1));

    %# If the right side of comparison is not yet the second-last index.
    if ((Difference <= 2) && (CurIndex+3 <= MatrixWidth))
        B = [ B(:, 1:CurIndex), B(:, CurIndex+2), B(:, CurIndex+1), B(:, CurIndex+3:end) ];
    %# If the right side of the comparison is already the second-last index.
    elseif (Difference <= 2)
        B = [ B(:, 1:CurIndex), B(:, CurIndex+2), B(:, CurIndex+1) ];
    end

    CurIndex = CurIndex + 1;
end 
```

# c# - 任何避免 ShowDialog() 阻塞 Messenger 的解决方案？

> ID：12449511
> 
> 赞同：1
> 
> 时间：2012-09-16T18:28:12.807
> 
> 标签：c#, wpf, modal-dialog, mvvm-light

我正在开发一个基于 mvvm light 工具包的项目。我有 a`MainView`和 a`DetailsView`及其对应的 ViewModel。两个 VM 都注册了`NotificationMessage`.

```
// MainViewModel.cs and DetailsViewModel.cs
private void RegisterMessages()
{
    Messenger.Default.Register<NotificationMessage>(this, NotificationMessageHandler);
} 
```

当收到“ShowDetails”消息时，`MainViewModel`调用创建“DetailsView”的服务

```
// MainViewModel.cs
private void NotificationMessageHandler(NotificationMessage msg)
{
    if (msg.Notification == "ShowDetails")
    {
        _detailsService.ShowDetails(); // Does something like (new DetailsView).ShowDialog()
    }
} 
```

使用`DetailsView`来`ViewModelLocator`获取现有的`DetailsViewModal`作为 DataContext。

应该收到“ `DetailsViewModel`ShowDetails”消息来更新其内部状态或请求一些数据。

```
// DetailsViewModel.cs
private void NotificationMessageHandler(NotificationMessage msg)
    {
        if (msg.Notification == "ShowDetails")
        {
            UpdateViewModel();
        }
    } 
```

现在的问题是：因为我希望它`DetailsView`是一个模态窗口，所以我调用`ShowDialog()`它。这似乎会阻止信使，直到`DetailsView`再次关闭。所以在`DetailsViewModal`模态窗口关闭后接收消息。有什么解决方案可以解决这个问题吗？

我认为它会起作用，如果我可以`DetailsViewModal`在`MainViewModel`. 这将改变 MessageHandler 调用的顺序，并且 VM 更新发生在阻塞之前`ShowDialog()`。但是`MainViewModel`首先创建和注册它是因为它就是它。`DetailsViewModel`是在第一次需要它时创建的，`ViewModalLocator`所以它总是输掉比赛。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T15:19:02.490

不幸的是，我无法重现您的具体问题。我在 MainWindowView Loaded 事件处理程序中启动了一个单独的线程；一个除了不断发送特定消息之外什么都不做的线程。然后我在我的 SecondWindowView 上调用了 ShowDialog()，它的视图模型被注册来监听这个特定的消息。第二个窗口的视图模型中的消息处理程序重复执行。事实上，甚至在调用 ShowDailog() 之前就调用了处理程序，因为我的视图模型已经由 ViewModelLocator 在应用程序启动时创建。我需要查看更多代码才能更好地了解您的情况（即您的服务正在创建详细信息窗口，或者我可以编译以重现该问题的内容）。

相反，您可以为您的子窗口尝试以下方法。在应用程序的某处定义以下类：

```
public class ShowChildWindowMessage : MessageBase { }
public class HideChildWindowMessage : MessageBase { }
public class DisplayDetailsMessage : MessageBase { } 
```

现在创建以下 ChildWindowVM 类并在 ViewModelLocator 中初始化它，就像初始化 MainWindowVM 一样：

```
public class ChildWindowVM : ViewModelBase
{
    private ViewModelBase m_currentContent;
    public ViewModelBase CurrentContent
    {
        get { return m_currentContent; }
        set
        {
            NotifySetProperty(ref m_currentContent, value, () => CurrentContent);
            if (m_currentContent != null)
            {
                m_currentContent.Refresh();
                Messenger.Default.Send(new ShowChildWindowMessage());
            }
        }
    }

    public ChildWindowVM()
    {
        Messenger.Default.Register<DisplayDetailsMessage>(this, OnDisplayDetails);
    }

    private void OnDisplayDetails(DisplayDetailsMessage msg)
    {
        CurrentContent = ViewModelLocator.DetailsViewModel; // or whatever view model you want to display
    }
} 
```

Refresh() 方法将在 DetailsViewModel 类中定义，并且会在显示窗口之前处理您希望执行的任何初始化。请注意，当设置 CurrentContent 属性时，会向 MainWindowView 发出一条消息，以创建一个 ChildWindowView 实例来显示您的内容。

MainWindowView 代码如下所示：

```
public partial class MainWindowView : Window
{
    private ChildWindowView m_childWindowView;

    public MainWindowView()
    {
        InitializeComponent();
        Closing += () => ViewModelLocator.CleanUp();      

        Messenger.Default.Register<ShowChildWindowMessage>(this, OnShowChildWindow);
        Messenger.Default.Register<HideChildWindowMessage>(this, OnHideChildWindow);
    }

    private void OnShowChildWindow(ShowChildWindowMessage msg)
    {
        m_childWindowView = new ChildWindowView();
        m_childWindowView.ShowDialog();
    }

    private void OnHideChildWindow(HideChildWindowMessage msg)
    {
        m_childWindowView.Close();
    }
} 
```

最后一步是将 ChildWindowVM 类中的 CurrentContent 属性绑定到您的 ChildWindowView 类。这是在您的 ChildWindowView 的 xaml 中完成的：

```
<Window x:Class="Garmin.Cartography.AdminBucketTools.ChildWindowView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    DataContext="{Binding Path=ChildWindowVm, Source={StaticResource Locator}}">

<Grid>
    <ContentPresenter Content="{Binding Path=CurrentContent}" />
</Grid> 
```

现在您可以在应用程序的任何位置显示您的详细信息，只需调用

```
Messenger.Default.Send(new DisplayDetailsMessage()); 
```

您可以通过调用以编程方式关闭窗口

```
Messenger.Default.Send(new HideChildWindowMessage()); 
```

您还可以从 MessageBase 派生任意数量的类，并在 ChildWindowVM 类中注册它们。在每个消息处理程序中，您可以通过将 CurrentContent 属性设置为适当的视图模型来指定要显示的内容。

实际上，还有一件事。如果你真的想在你的子窗口中看到任何有用的东西，你需要在你的视图和视图模型之间指定模板绑定。这可以通过应用程序资源中的 xaml 来完成：

```
<DataTemplate DataType="{x:Type viewmodels:DetailsViewModel}">
    <views:DetailsView />
</DataTemplate> 
```

不要忘记定义命名空间（即“viewmodels”和“views”）。

# css - 为什么这些字体之一在 IE8 中呈现，而其他字体却没有？

> ID：12449512
> 
> 赞同：7
> 
> 时间：2012-09-16T18:28:20.190
> 
> 标签：css, internet-explorer, fonts, font-face

为什么这个字体在 IE8 中呈现：

```
@font-face {
  font-family: 'Aller';
  src: url('aller_rg-webfont.eot');
  src: url('aller_rg-webfont.eot?#iefix') format('embedded-opentype'),
       url('aller_rg-webfont.woff') format('woff'),
       url('aller_rg-webfont.ttf') format('truetype'),
       url('aller_rg-webfont.svg#AllerRegular') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

这不会：

```
@font-face {
  font-family: 'Champagne';
  src: url('champreg-webfont.eot');
  src: url('champreg-webfont.eot?#iefix') format('embedded-opentype'),
       url('champreg-webfont.woff') format('woff'),
       url('champreg-webfont.ttf') format('truetype'),
       url('champreg-webfont.svg#Champagne&LimousinesRegular') format('svg');
  font-weight: normal;
  font-style: normal;
} 
```

我实在想不通。显然，所有其他浏览器都可以正常工作。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-17T12:43:50.123

`.eot`尝试使用在线 woff/ttf/svg to eot 转换器与其他文件之一创建一个新文件。

*   [http://www.font2web.com/](http://www.font2web.com/)
*   [http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator) <- 可能有问题，因为它们将字体名称列入黑名单。

如果这个新文件不起作用，那么它可能是字体本身的问题。如果字体名称和系列名称在实际字体文件中不同，有时 IE6-8 会很合适。要解决这个问题：

*   你需要下载[FontForge](http://sourceforge.net/projects/fontforge/)
*   打开字体
*   从菜单中，选择`Element`>`Font Info`
*   确保字体名称、姓氏和人类名称**都相同**
*   将字体保存为 TTF 或 OTF 并使用在线转换器生成 EOT 文件。

我在 font-face 上遇到的每一个问题——如果 CSS 是正确的——都可以使用上述两种解决方案之一，祝你好运:-) 甚至可以尝试在 FontForge 中不做任何更改的情况下保存字体并在你摆弄之前在线转换它与名称属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-25T12:48:09.750

1.  将此添加到 htaccess。“BrowserMatch MSIE 最佳标准支持标头集 X-UA 兼容 IE=8 env=最佳标准支持”
2.  试图重新转换eot字体
3.  doc 可压缩性模式更改
4.  试过usleep功能
5.  设置间隔js
6.  添加谷歌html5脚本
7.  在 ie8 的正文部分调用 css
8.  添加数据图标类
9.  广告伪元素js
10.  在 CSS 中添加 png 和 svg 过滤器
11.  检查服务器中的字体类型权限

但最终在添加时有效

> **.sass 和 .less CSS**

文件快乐编码...由 sivakumar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-24T21:53:28.610

在 IIS（MVC 环境）下，我必须将以下规则添加到我的 Web.config：

```
 <system.web>
    <httpHandlers>
      <add verb="GET" path="*.eot" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.svg" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.ttf" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.woff" type="System.Web.StaticFileHandler" />
      <add verb="GET" path="*.otf" type="System.Web.StaticFileHandler" />
    </httpHandlers>
  </system.web> 
```

# python - Python 中的基准测试：为什么我的代码重复运行会变慢？

> ID：12449522
> 
> 赞同：7
> 
> 时间：2012-09-16T18:29:48.173
> 
> 标签：python, performance, benchmarking

我有一个简单[的 Eratosthanes 筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)实现，如下所示：

```
# Generate all primes less than k
def sieve(k):
    s = [True] * k
    s[0] = s[1] = False
    for i in range(4, k, 2):
        s[i] = False

    for i in range(3, int(sqrt(k)) + 2, 2):
        if s[i]:            
            for j in range(i ** 2, k, i * 2):
                s[j] = False

    return [2] + [ i for i in range(3, k, 2) if s[i] ] 
```

我通过重复生成 10M 以下的素数来对这段代码进行基准测试：

```
st = time()
for x in range(1000):
    rt = time()
    sieve(10000000)
    print "%3d %.2f %.2f" % (x, time() - rt, (time() - st) / (x + 1)) 
```

我很困惑，因为每次测试运行所花费的时间显着增加：

```
run   t  avg
  0 1.49 1.49
  1 1.79 1.66
  2 2.23 1.85
  3 2.72 2.07
  4 2.67 2.20
  5 2.87 2.31
  6 3.05 2.42
  7 3.57 2.56
  8 3.38 2.65
  9 3.48 2.74
 10 3.81 2.84
 11 3.75 2.92
 12 3.85 2.99
 13 4.14 3.07
 14 4.02 3.14
 15 4.05 3.20
 16 4.48 3.28
 17 4.41 3.34
 18 4.19 3.39
 19 4.22 3.43
 20 4.65 3.49 
```

但是，将 的每个实例更改为`range`可以`xrange`消除该问题：

```
run   t  avg
  0 1.26 1.26
  1 1.23 1.28
  2 1.24 1.27
  3 1.25 1.26
  4 1.23 1.26
  5 1.23 1.25
  6 1.25 1.25
  7 1.25 1.25
  8 1.23 1.25
  9 1.25 1.25
 10 1.24 1.25 
```

为什么会这样？真的都是 GC 开销吗？运行 20 次后减速 3 倍似乎很多......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:12:54.143

这（还）不是一个答案，而只是一个有组织的实验的集合。

这很迷人，真的。似乎 Python 的内存分配器发生了一些非常可疑的事情。

这是我减少测试用例的尝试：

```
def sieve(k):
    s = [True] * k

    for i in xrange(3, int(sqrt(k)) + 2, 2):
        for j in range(i ** 2, k, i * 2):
            s[j] = False

    return [ i for i in range(3, k, 2) if s[i] ]

st = time()
for x in range(1000):
    rt = time()
    sieve(10000000)
    print "%3d %.2f %.2f" % (x, time() - rt, (time() - st) / (x + 1)) 
```

请注意，如果我删除`if s[i]`，使内部`range`an `xrange`，使返回值成为生成器，或者`pass`在内部`for`循环中（或 make it `s[j] = True`），则行为消失并且时间平缓。

Python 的内存使用随着函数的运行而稳步增加，最终达到一个平台期（此时运行时间也开始平台期，大约为初始值的 250%）。

我的假设是，大量的内部`range`s（大小减小），加上最终的数组，会导致某种最坏情况下的堆碎片，使得继续分配对象变得非常困难。

我的建议是制作一个简化的测试用例并将其作为一个错误提交给 Python 开发人员 (bugs.python.org)。

# css - 使用多个背景时指定背景的重复和位置

> ID：12449524
> 
> 赞同：4
> 
> 时间：2012-09-16T18:30:04.307
> 
> 标签：css, background, background-image

我正在尝试应用两个背景图像。一个是我希望沿 x 轴重复的重复色块。另一个只是我只想出现一次的单个图像。

我使用了多个背景图像来尝试将这两个图像应用于同一个 div，但是我不确定如何将特定背景规则定位到每个背景。

背景 1 需要有一个 top 和 repeat-x 的位置。背景 2 需要有一个右上角且不重复的位置。

这可能有多个背景，还是我必须回到嵌套两个独立 div 的旧方式？

JS 小提琴：http: [//jsfiddle.net/nnq4S/](http://jsfiddle.net/nnq4S/)

灰色背景应该跨越容器的整个顶部，而色带应该保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:34:59.147

我手边没有测试，但这有用吗？

```
background:url(bg1.png) top left repeat-x, url(bg2.png) top right no-repeat; 
```

# php - 使用 preg_replace 解析 HTML

> ID：12449525
> 
> 赞同：-5
> 
> 时间：2012-09-16T18:30:19.950
> 
> 标签：php, html, html-parsing, preg-replace

我正在寻找一个正则表达式来将任何以`-`（破折号）开头的文本行转换为项目符号点（`<li>`）。

例如：

```
- This is a point
- This is another point 
```

变成：

```
<li>This is a point</li>
<li>This is another point</li> 
```

任何想法，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:42:59.157

我们不提供代码，我们帮助回答任何问题。

* * *

这是我帮助你做你想要达到的目标的答案。

看一下[strpos()](http://php.net/manual/en/function.strpos.php)，如果找不到您要查找的内容，它将返回 false 。现在您可以创建一个 IF 语句。

如果它没有返回 false，则运行一个循环。至于替换，请查看[str_replace()](http://php.net/manual/en/function.str-replace.php)。您还可以使用[strlen()](http://php.net/manual/en/function.strlen.php)找出总共有多少个字母可能对您的情况有所帮助。

* * *

同样，此 ^ 只是帮助您实现目标的快速提升。我希望你能接受我的建议，不要索要代码。

**另外**：为什么不做一些谷歌搜索？我很确定有人已经完成了你想要完成的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T18:50:28.533

Markdown 会为您做到这一点，[Michel Fortin 为 PHP 提供了一个端口](http://michelf.ca/projects/php-markdown/)。

它还将 *this* 转换为*this*并将 **this** 转换为**this**。如需完整列表，请参阅[Markdown 官方网站](http://daringfireball.net/projects/markdown/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:06:41.077

听起来您想使用正则表达式组。

```
preg_replace('/^- (.*)$/m', '<li> \1 </li>', $string); 
```

此处正则表达式末尾的“m”确保“^”和“$”元字符与行的开头和结尾匹配。模式的括号部分捕获它匹配的文本，以便稍后在替换字符串中使用它。在这种情况下，'\1' 指的是由模式中的第一个括号开始的分组。

# objective-c - 使 UITableView 的单元格水平对齐而不是垂直对齐

> ID：12449532
> 
> 赞同：0
> 
> 时间：2012-09-16T18:31:22.053
> 
> 标签：objective-c, ios, xcode, uitableview

> **可能重复：**
> [使 UITableView 看起来更像一个“常规”表，有多个列](https://stackoverflow.com/questions/12449296/making-uitableview-look-more-like-a-conventional-table-with-multiple-columns)

我制作了一个法线`UITableView`，将其单元格显示在另一个下方，但我希望它水平对齐它们

我想过制作更多表格（每个单元格一个），然后将它们彼此相邻放置，但这不会那么方便。

简单地说，如何让单元格在前一个的右侧而不是在其下方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T18:40:45.090

不幸的是，一个 UITableView 仅限于一列。在官方[文档](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html)中，它说：“UIKit 框架中的表格视图仅限于单列，因为它是为小屏幕设备设计的。” 如果你真的想在一行中有多个单元格并使用 UITableView，你可以创建一个自定义 UITableViewCell。但是我不知道您尝试创建它的上下文，因此可能有更好的选择。

# c - 当我将 malloc 返回的地址存储在 Integer 变量中时，程序编译成功

> ID：12449536
> 
> 赞同：0
> 
> 时间：2012-09-16T18:31:46.467
> 
> 标签：c, malloc, type-conversion

考虑下面的代码片段：

```
#include <stdio.h>

int main()
{
    int p = malloc( sizeof( int ) );
    return 0;
} 
```

上面的程序[编译成功](https://ideone.com/Dwagl)，没有任何警告。

由于存储块的地址`integer variable`而不是指针，它不应该给出错误/警告吗？

最初，我认为这种行为很奇怪，因为我忘记包含`stdlib`. 很快，我的假设就失败了。即使包含 ，行为也是相同的`stdlib`。

包含后请参阅以下程序`stdlib`

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int p = malloc( sizeof( int ) );
    return 0;
} 
```

这个程序也有[类似的行为。](https://ideone.com/a3oB5)

为什么编译成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:38:07.683

它编译成功，但您应该收到警告：

```
> gcc -o test test.c
test.c: In function ‘main’:
test.c:6:13: warning: initialization makes integer from pointer without a cast [enabled by default] 
```

你永远不应该丢弃编译器警告。我使用 gcc 4.7 没有任何选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:06:21.613

`malloc()`正在返回一个`void *`类型。您要返回并存储到该 int 的是`void *`. 这是完全合法的做法，例如，如果您想在使用 malloc'ed 内存之前打印它的地址，您可以：

```
int main()
{
    int *r = NULL;
    int p = malloc( sizeof( int ) );
    printf("%#x\n",p);
    r = (int *)p; 
    *r = 5;
    printf("%d\n", *r);
    free(r);
    return 0;
} 
```

显然，这并没有多大意义……但是使用此代码时没有出错是有原因的。就警告而言……你应该得到一个。

VS 给出：

```
1>c:\users\ma\documents\visual studio 2010\projects\test\test\test.c(7): warning C4047: 'initializing' : 'int' differs in levels of indirection from 'void *' 
```

# http - “请稍等”的 HTTP 响应代码

> ID：12449538
> 
> 赞同：12
> 
> 时间：2012-09-16T18:32:04.583
> 
> 标签：http, rest, httpresponse

如果服务器希望客户端等待一点时间然后再次尝试请求，那么服务器发送的最佳 HTTP 响应代码是什么？

现在，我正在使用：

```
409 Conflict 
```

但这感觉不太对劲……

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-31T16:54:48.640

根据您希望他们等待的原因，状态代码会有所不同。以 4 开头的代码表示客户端错误。如果请求正确完成，我不会使用 400 代码。以 5 开头的状态用于服务器错误。如果您因为自己的问题而要求 HTTP 请求者等待，我会选择 503。

我在编写 Web 服务以检查文件是否已完成处理时遇到了这个问题。如果完成了。我返回 200，如果不是，我不想给出错误代码。使用以 2 开头的代码（成功）会更合适。在这种情况下，最好的标准代码可能是“202 Accepted” [HTTP 规范](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3)将其描述为：

> 请求已被接受处理，但处理尚未完成。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-16T18:34:34.760

[您可以按照 HTTP RFC - https://www.rfc-editor.org/rfc/rfc2616#section-10.5.4](https://www.rfc-editor.org/rfc/rfc2616#section-10.5.4)中的建议使用 503 + "retry-after" 标头。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-16T18:37:01.110

假设您正在尝试实施速率限制方案，我想到了两个选项（否则，[Alexei 的建议](https://stackoverflow.com/a/12449556/23897)可能更适用）。

*   429[请求过多](https://www.rfc-editor.org/rfc/rfc6585)

> 429 状态码表示用户在给定时间内发送了太多请求（“速率限制”）。

> 响应表示应该包含解释条件的详细信息，并且可以包含一个 Retry-After 标头，指示在发出新请求之前要等待多长时间。

*   420 [Enhance Your Calm](https://dev.twitter.com/docs/error-codes-responses)，非标准，由 Twitter 使用，并包含在此处，因为它的名字让我很开心。

> 当您受到速率限制时，由版本 1 搜索和趋势 API 返回。

# regex - CFML RegEx - 我需要从列表中提取 aplh-number-number-number-number-number 的模式

> ID：12449540
> 
> 赞同：0
> 
> 时间：2012-09-16T18:32:09.937
> 
> 标签：regex, coldfusion

我有一个清单；

```
D.默里 20 131 6.6 48 0 A.Bradshaw 17 78 4.6 33 1 T.Romo 5 12 2.4 9 0 D.Wilson 2 4 2.0 3 0 L.Vickers 1 0 0.0 0 0
```

我需要提取 5 个项目中的每一个。由于没有分隔符，我想我会尝试 RegEx。但是，我不明白如何将 6 个模式串在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:24:16.010

另外一个选项...

如果一般模式是一致的但数字部分变量，您可以在名称前的空格上拆分，例如

```
<cfsavecontent variable="input">D.Murray 20 131 6.6 48 0 A.Bradshaw 17 78 4.6 33 1 T.Romo 5 12 2.4 9 0 D.Wilson 2 4 2.0 3 0 L.Vickers 1 0 0.0 0 0</cfsavecontent>

<cfset matches = input.split(' (?=[A-Z]\.)') />

<cfdump var=#matches# /> 
```

..部分是一个前瞻`(?=`，`)`它确认其中的子模式在该位置匹配，但不包括它作为实际匹配文本的一部分。（因此在这种情况下，只有空格用作拆分分隔符。）

此外，正如 Adam 在 Ray's answer 的评论中所指出的那样，空格仅与文字空格字符匹配 `chr(32)`- 如果您想允许*任何*空格（空格、制表符、换行符等），请`\s`改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:46:54.437

所以假设我上面的评论没问题，这对我来说没问题。

```
<cfset input = "D.Murray 20 131 6.6 48 0 A.Bradshaw 17 78 4.6 33 1 T.Romo 5 12 2.4 9 0 D.Wilson 2 4 2.0 3 0 L.Vickers 1 0 0.0 0 0">

<cfset pattern = "[a-zA-Z\.]+ [\d\.]+ [\d\.]+ [\d\.]+ [\d\.]+ [\d\.]+">
<cfset matches = reMatch(pattern,input)>

<cfdump var="#matches#"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-19T05:06:13.000

您是否希望将结果数据放在以空格分隔的列表数组中？

```
<cfscript>
var data = "D.Murray 20 131 6.6 48 0 A.Bradshaw 17 78 4.6 33 1 T.Romo 5 12 2.4 9 0 D.Wilson 2 4 2.0 3 0 L.Vickers 1 0 0.0 0 0";

// inject "|" between each set of 6 variables
var dataPipeList = data.replaceAll('(([^ ]+ ){5}[^ ]+) ','$1|');

// now convert your piped list into an array of space delimited strings
var dataArray = listToArray(dataPipeList,'|');

// eg.
dataArray == [
    'D.Murray 20 131 6.6 48 0',
    'A.Bradshaw 17 78 4.6 33 1',
    'T.Romo 5 12 2.4 9 0',
    'D.Wilson 2 4 2.0 3 0',
    'L.Vickers 1 0 0.0 0 0'
]
</cfscript> 
```

或者你想要一个数组数组？

```
<cfscript>
var data = "D.Murray 20 131 6.6 48 0 A.Bradshaw 17 78 4.6 33 1 T.Romo 5 12 2.4 9 0 D.Wilson 2 4 2.0 3 0 L.Vickers 1 0 0.0 0 0";

// split into an array at every space
var temp = listToArray(data,' ');

// loop the array in steps of 6, adding each to a new array
var dataArray = [];
for ( var i = 1; i <= arrayLen( temp ); i = i + 6 ) {
    arrayAppend( dataArray, [
        temp[i],
        temp[i+1],
        temp[i+2],
        temp[i+3],
        temp[i+4],
        temp[i+5]
    ] );
}

// eg.
dataArray == [
    [ 'D.Murray', '20', '131', '6.6', '48', '0' ],
    [ 'A.Bradshaw', '17', '78', '4.6', '33', '1',
    [ 'T.Romo', '5', '12', '2.4', '9', '0' ],
    [ 'D.Wilson', '2', '4', '2.0', '3', '0' ],
    [ 'L.Vickers', '1', '0', '0.0', '0', '0' ]
]
</cfscript> 
```

您甚至可以使用 Java regex Pattern 类来生成数组数组，如下所示：

```
<cfscript>
var data = "D.Murray 20 131 6.6 48 0 A.Bradshaw 17 78 4.6 33 1 T.Romo 5 12 2.4 9 0 D.Wilson 2 4 2.0 3 0 L.Vickers 1 0 0.0 0 0";

// build a regex pattern
var regex = '([a-zA-Z.]+) ([0-9.]+) ([0-9.]+) ([0-9.]+) ([0-9.]+) ([0-9.]+)';
var pattern = createObject('java','java.util.regex.Pattern').compile(regex);

// get a matcher for the data
var matcher = pattern.matcher(data);

// build an array from the matched strings
var dataArray = [];
while ( matcher.find() ) {
    arrayAppend( dataArray, [
        matcher.group(1),
        matcher.group(2),
        matcher.group(3),
        matcher.group(4),
        matcher.group(5),
        matcher.group(6)
] );
}

// eg.
dataArray == [
    [ 'D.Murray', '20', '131', '6.6', '48', '0' ],
    [ 'A.Bradshaw', '17', '78', '4.6', '33', '1',
    [ 'T.Romo', '5', '12', '2.4', '9', '0' ],
    [ 'D.Wilson', '2', '4', '2.0', '3', '0' ],
    [ 'L.Vickers', '1', '0', '0.0', '0', '0' ]
]
</cfscript> 
```

# python - Django 管理员的 Facebook 授权

> ID：12449543
> 
> 赞同：0
> 
> 时间：2012-09-16T18:32:54.453
> 
> 标签：python, django, facebook, django-admin

我想为 Django Admin 使用 Facebook 授权。只有应用程序开发人员（我）应该能够登录。可能吗？容易地？如何？

实际上，我什至想在其中提供一些特殊的图形操作。所以，我应该可以轻松地与管理员一起玩！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:37:08.737

您可以使用[django social auth](https://github.com/omab/django-social-auth)作为身份验证手段。基本上，它允许您将用户身份验证为 django`User`的。然后，您将进入“标准 Djangoland”，拥有该`is_staff`标志的用户可以访问管理员，而没有该标志的用户则不能。

因此，您可以授予 Social Auth 为您创建的 Facebook 用户适当的权限（即`is_staff = True`），以便您可以访问管理员

这里有一点鸡与蛋的问题，但您可以使用`manage.py`控制台使您的用户成为管理员用户/超级用户。

# php - jQuery下拉依赖

> ID：12449547
> 
> 赞同：1
> 
> 时间：2012-09-16T18:33:18.523
> 
> 标签：php, javascript, jquery

我有 2 个下拉列表。第一个显示一个国家的地区，另一个显示所选州的每个城市。问题是，在我提交表单后，MySQL 数据库从第一个列表中获取所选区域的 ID，而第二个列表没有显示任何内容。我想让我的数据库接收正确的信息。地区名称和城市名称。

*我怎样才能做到这一点？*

### 我的 javascript 看起来像这样：

```
$(document).ready(function() {
    $(".region").change(function() {`enter code here`
        var id = $(this).val();
        var dataString = 'id=' + id;

        $.ajax({
            type: "POST",
            url: "ajax_city.php",
            data: dataString,
            cache: false,
            success: function(html) {
                $(".city").html(html);
            }
        });
    });
});​ 
```

### 我的`section.php`脚本是：

```
<?php

  <label>Country :</label> <select name="country" class="country">
  <option selected="selected">--Select Region--</option>

<?php
 $sql = mysql_query("SELECT id,region FROM regions ORDER BY region");
   while ($row = mysql_fetch_array($sql)) {
    $id     = $row['id'];
    $region = $row['region'];
    echo '<option value="' . $id . '">' . $region . '</option>';
  } 
?>
 </select> <br/><br/>
 <label>City :</label> <select name="city" class="city">
 <option selected="selected">--Select City--</option>

 </select>

?> 
```

### 该`ajax_city.php`文件如下所示：

```
<?php

if($_POST['id']) {
  $id = $_POST['id'];
  $sql=mysql_query("SELECT DISTINCT city FROM CITY where id_city=$id order by city");

    while($row = mysql_fetch_array($sql)) {
      $id=$row['id'];
      $data=$row['city'];
      echo "<option value=$id>$data</option>";
    }
 }

?> 
```

代码工作正常。但我无法弄清楚如何处理数据库。我想我必须更改 JavaScript 中的某些内容？

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:18:21.140

```
<script type="text/javascript">
$(document).ready(function()
{
    $(".country").change(function()
    {
        var id=$(this).val(); 
        var region = $(this).find('option:selected').html();  
        $.ajax({
          type: "POST",
          url: "ajax_city.php",
          data: { country: id , name : region },
          cache: false,
          success: function(html)
           {
             $(".city").html(html);
             $(".city").removeAttr('disabled');
           } 
    });
    });
});
</script> 
```

`section.php`

```
<label>Country :</label> 
<select name="country" class="country">
    <option selected="selected">--Select Region--</option>
        <?php
            $sql=mysql_query("SELECT id,region FROM regions ORDER BY region");
            while($row = mysql_fetch_array($sql))
            {
                $id=$row['id'];
                $region=$row['region'];
                echo '<option value="'.$id.'">'.$region.'</option>';
            } 
            ?>
</select><br/><br/>
<label>City :</label> 
<select disabled name="city" class="city">
    <option selected="selected">--Select City--</option>
</select> 
```

`ajax_city.php`

```
<?php
    if($_POST['country'])
    {
        $id = $_POST['country'];
        $region = $_POST['name'];
        $sql = mysql_query("SELECT DISTINCT city FROM CITY where id_city = $id order by city");

        while($row = mysql_fetch_array($sql))
        {
            $id=$row['id'];
            $data=$row['city'];
            echo "<option value=$id>$data</option>";
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T11:40:26.050

数据库：`country`

```
CREATE TABLE IF NOT EXISTS `city` ( `id_city` int(11) NOT NULL AUTO_INCREMENT,  `city` varchar(30) NOT NULL,  `pid` int(11) NOT NULL,  PRIMARY KEY (`id_city`)) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=7 ;

INSERT INTO `city` (`id_city`, `city`, `pid`) VALUES(1, 'Gujarat', 1),(2, Maharashtra', 1),(3, 'Rajasthan', 1),(4, 'Madhya Pradesh', 1),(5, 'Lahore', 2),(6, 'hyderabad', 2);

CREATE TABLE IF NOT EXISTS `regions` ( `id` int(11) NOT NULL AUTO_INCREMENT,  `region` varchar(30) NOT NULL,  PRIMARY KEY (`id`)) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

INSERT INTO `regions` (`id`, `region`) VALUES(1, 'India'),(2, 'Pakistan'); 
```

Javascript 在 default.php

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

     <script type="text/javascript">
     $(document).ready(function()
 {
$(".country").change(function()
{
    var id=$(this).val(); 
    var region = $(this).find('option:selected').html();  
    $.ajax({
      type: "POST",
      url: "ajax_city.php",
      data: { country: id , name : region },
      cache: false,
      success: function(html)
       {
         $(".city").html(html);
         $(".city").removeAttr('disabled');
       } 
   });
  });
 });
  </script>

 <label>Country :</label> 
 <select name="country" class="country">
  <option selected="selected">--Select Region--</option>
     <?php
            $conn=mysql_connect("localhost","root","");
            $db=mysql_select_db("country",$conn);

        $sql=mysql_query("SELECT id,region FROM regions ORDER BY region");
        while($row = mysql_fetch_array($sql))
        {
            $id=$row['id'];
            $region=$row['region'];
            echo '<option value="'.$id.'">'.$region.'</option>';
        } 
        ?>
   </select><br/><br/>
   <label>City :</label> 
  <select disabled name="city" class="city">
     <option selected="selected">--Select City--</option>
  </select> 
```

ajax_city.php

```
<?php
  if($_POST['country'])
{
    $conn=mysql_connect("localhost","root","");
    $db=mysql_select_db("country",$conn);

    $id = $_POST['country'];
    $region = $_POST['name'];
    $sql = mysql_query("SELECT DISTINCT city FROM CITY where pid = $id order by city");

    while($row = mysql_fetch_array($sql))
    {
        $id=$row['id'];
        $data=$row['city'];
        echo "<option value=$id>$data</option>";
    }
}

?> 
```

# mysql - 将 MySQL 查询转换为 cakephp 查询

> ID：12449550
> 
> 赞同：0
> 
> 时间：2012-09-16T18:33:57.070
> 
> 标签：mysql, cakephp-2.0

我想使用 cakephp 的 ORM 的 find() 方法翻译这个 $query。

```
$custom_query = $this->Agency->query(
        "SELECT a.id, a.name, a.created, c.total
          FROM agencies a
            join (SELECT agency_id, sum(price) total
                    FROM commands
                    GROUP BY agency_id) C
              on a.id = c.agency_id;"
    ); 
```

（这个查询完全符合我的要求，但我想了解如何使用 cakephp ORM 和 $virtualFields）感谢您的帮助和您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T02:44:28.597

如果您使用的是 CakePHP 1.3 或更高版本，您可以在模型中定义虚拟字段（即计算字段）。

根据您的查询，我将在模型类中定义虚拟字段，如下所示：

```
$virtualFields = array(
   'total'=>'(SELECT SUM(price) FROM commands WHERE agency_id = Agency.id)'
); 
```

然后您可以将该字段称为常规 ORM 字段：

```
$this->Agency->find('all',array(
    'fields'=>array(
        'id','name','created','total'
        )
    )
); 
```

Cake 手册页：[http ://book.cakephp.org/2.0/en/models/virtual-fields.html](http://book.cakephp.org/2.0/en/models/virtual-fields.html)

# nsdateformatter - iOS6 NSDateFormatter 默认年份

> ID：12449553
> 
> 赞同：2
> 
> 时间：2012-09-16T18:34:25.213
> 
> 标签：nsdateformatter, ios6, ios5

有没有人注意到 iOS6 NSDateFormatter 在没有给出年份时默认为 2000 年

iOS6：

[[NSDateFormatter alloc] init] dateFromString: @"7:30am"]

=> 2000 年 1 月 1 日，早上 7:30

iOS5：

=> 1970 年 1 月 1 日，早上 7:30

问题：1.有没有更好的方法来比较两个不同的时间？我有这个地铁应用程序[PATH Schedule/Map](http://itunes.apple.com/us/app/pathway-schedule-map/id495582516?mt=8)。地铁时间在数据库中被硬编码为 numSecondsSince1970。我通过将出发时间与当前的 numSecondsSince1970 进行比较，为人们提供下一班到达的火车。现在我只是将 1970 年附加到时间字符串 "2:30am" => "1970 2:30am" 但似乎有更好的方法

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T13:48:08.740

是的，我刚刚注意到这个问题。显然，Apple 报告了此错误，请参阅[http://openradar.appspot.com/12358210](http://openradar.appspot.com/12358210)

* * *

**编辑：**这就是我在我正在处理的项目中处理这个问题的方式......

```
// I use the following code in a category to parsing date strings

- (NSDate *)dateWithPath:(NSString *)path format:(NSString *)format
{
    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    formatter.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0];
    formatter.dateFormat = format;

    NSString *string = [self valueWithPath:path];
    return [formatter dateFromString:string];
} 
```

* * *

```
// old parsing code that worked fine in iOS 5, but has issues in iOS 6

NSDate *date            = [element dateWithPath:@"datum_US" format:@"yyyy-MM-dd"];
NSDate *timeStart       = [element dateWithPath:@"aanvang" format:@"HH:mm:ss"];
NSTimeInterval interval = [timeStart timeIntervalSince1970];
match.timeStart         = [date dateByAddingTimeInterval:interval]; 
```

*和修复...*

```
// the following code works fine in both iOS 5 and iOS 6

NSDate *date                = [element dateWithPath:@"datum_US" format:@"yyyy-MM-dd"];
NSDate *timeStart           = [element dateWithPath:@"aanvang" format:@"HH:mm:ss"];
NSCalendar *calendar        = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
calendar.timeZone           = [NSTimeZone timeZoneForSecondsFromGMT:0];
NSUInteger units            = NSHourCalendarUnit | NSMinuteCalendarUnit | NSSecondCalendarUnit;
NSDateComponents *timeComps = [calendar components:units fromDate:timeStart];
match.timeStart             = [calendar dateByAddingComponents:timeComps toDate:date options:0]; 
```

# algorithm - 给定最大匹配，找到二分图的最小顶点覆盖

> ID：12449554
> 
> 赞同：2
> 
> 时间：2012-09-16T18:34:26.490
> 
> 标签：algorithm, graph, set, matching, bipartite

我似乎找到了一种算法，但无法理解它，我想知道你们中是否有人知道该算法的通用大纲。

这是我在第 2 页找到的算法的链接

[http://www.cse.iitb.ac.in/~sundar/cs435/lecture23.pdf](http://www.cse.iitb.ac.in/~sundar/cs435/lecture23.pdf)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2015-11-01T21:56:51.350

算法很简单：

1.  找到不匹配的顶点，将其标记为不包含在最小顶点覆盖中。
2.  将此顶点的所有匹配邻居标记为包含在最小顶点覆盖中。
3.  将上一步中顶点的所有配合视为不匹配的顶点并重复步骤 1。
4.  如果递归结束，则从步骤 1 开始重复（即图的多个连接组件的情况）。
5.  如果没有不匹配的顶点，请取出所有剩余的对并以您喜欢的方式标记它们（请记住，一对中的一个顶点必须包含在最小顶点覆盖中，而另一个必须不包括在内）。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-09-16T19:01:40.000

首先你应该知道二分图，两组顶点和边，好的，你现在知道了。

那么你需要从这两组中选择一些顶点来覆盖所有的边。只要选择一个顶点，链接到它的所有边都会被覆盖。现在您的任务是选择最少数量的顶点，以覆盖所有边。

原则意味着，您需要的最小数量等于最大匹配对的数量。

# python - 用随机项目替换 Python 字符串

> ID：12449555
> 
> 赞同：9
> 
> 时间：2012-09-16T18:34:30.590
> 
> 标签：python, regex, string

[Python中的字符串替换](http://docs.python.org/library/string.html)并不难，但我想做一些特别的事情：

```
teststr = 'test test test test'
animals = ['bird','monkey','dog','fox']
#replace 'test' with random item from animals
finalstr = ['dog fox dog monkey'] 
```

我写了一个非常低效的版本：

```
from random import choice
import string
import re

teststr = 'test test test test'
animals = ['bird','monkey','dog','fox']

indexes = [m.start() for m in re.finditer('test', 'test test test test')]
#indexes = [0, 5, 10, 15]
for i in indexes:
    string.replace(teststr, 'test', choice(animals), 1)

#Final result is four random animals
#maybe ['dog fox dog monkey'] 
```

它有效，但我相信有一些我不熟悉的正则表达式的简单方法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T18:42:39.677

使用[re.sub 回调](http://docs.python.org/library/re.html#re.sub)：

```
import re
import random

animals = ['bird','monkey','dog','fox']

def callback(matchobj):
    return random.choice(animals)

teststr = 'test test test test'
ret = re.sub(r'test', callback, teststr)
print(ret) 
```

产量（例如）

```
bird bird dog monkey 
```

的第二个参数`re.sub`可以是字符串或函数（即回调）。如果它是一个函数，它会在正则表达式模式的每个非重叠出现时调用，并且它的返回值被替换为匹配的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:44:11.443

您可以使用[`re.sub`](http://docs.python.org/library/re.html#re.sub)：

```
>>> from random import choice
>>> import re
>>> teststr = 'test test test test'
>>> animals = ['bird','monkey','dog','fox']
>>> re.sub('test', lambda m: choice(animals), teststr)
'fox monkey bird dog'
>>> re.sub('test', lambda m: choice(animals), teststr)
'fox dog dog bird'
>>> re.sub('test', lambda m: choice(animals), teststr)
'monkey bird monkey monkey' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:05:21.887

这将完成这项工作：

```
import random, re
def rand_replacement(string, to_be_replaced, items):
    return re.sub(to_be_replaced, lambda x: random.choice(items), string ) 
```

# html - 纯 CSS 替换 OL>LI 元素中的句点

> ID：12449557
> 
> 赞同：3
> 
> 时间：2012-09-16T18:34:43.500
> 
> 标签：html, css, styles, html-lists

据我所知，无论`list-style-type`您设置什么属性，分隔列表的数字或字母都会后跟一个句点（`.`）。**有什么办法可以将其更改为右括号 ( `)`)，甚至完全删除它？**

## 概念

* * *

这是显示我想要做的不正确的 CSS：

```
<HTML>
<HEAD>
<STYLE>
OL{
  list-style-type:decimal;
  list-style-punctuation: ')';
}
OL.onlyNumbers{
  list-style-punctuation: none;
}
</STYLE>
</HEAD>
<BODY>
<OL>
  <LI>Won</LI>
  <LI>Too</LI>
  <LI>Tree</LI>
  <LI>Fore</LI>
  <LI VALUE=100>Won Hun Dread</LI>
</OL>
<OL CLASS=onlyNumbers>
  <LI>Won</LI>
  <LI>Too</LI>
  <LI>Tree</LI>
  <LI>Fore</LI>
  <LI VALUE=100>Won Hun Dread</LI>
</OL>
</BODY>
</HTML> 
```

这是我想在浏览器中看到的：

```
 1) Won
  2) Too
  3) Tree
  4) Fore
100) Won Hun Dread

  1 Won
  2 Too
  3 Tree
  4 Fore
100 Won Hun Dread 
```

一般来说，我不希望与 jQuery 或 JavaScript 有任何关系。我希望它尽可能接近正确的 HTML 5 和 CSS 3。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T18:46:26.887

您可以使用`before`伪元素和[CSS`counter`](http://www.w3schools.com/cssref/pr_gen_counter-increment.asp)功能。

```
body {
    counter-reset:withBrackets;
    counter-reset:onlyNumbers;
}    
ol {
    list-style:none;
}
ol:not(.onlyNumbers) li {
    counter-increment:withBrackets;
}
ol:not(.onlyNumbers) li:before {
    content:counter(withBrackets) ") ";
}
ol.onlyNumbers li {
    counter-increment:onlyNumbers;
}
ol.onlyNumbers li:before {
    content:counter(onlyNumbers) " ";
} 
```

查看[工作演示](http://jsfiddle.net/gionaf/EvNSh/)

# dotnetnuke - 在 DotNetNuke 中重新启用登录页面

> ID：12449560
> 
> 赞同：0
> 
> 时间：2012-09-16T18:35:04.410
> 
> 标签：dotnetnuke

我是 DotNetNuke 的新手，并且错误地禁用了我在 DotNetNuke 中构建的网站的登录页面，现在我既不能访问我的网站，也不能登录我的网站。

如何重新启用已禁用的登录页面。

任何建议将不胜感激。

提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:06:25.407

您可能需要进入数据库并编辑 PortalSettings 表的内容。

您实际上在您的网站上更改了哪些设置？管理员/站点设置中的“页面”下拉列表之一？

查看 portalsettings 表并找到 Login Home Splash page 等的列，并将它们设置为 Null。

尽管如果您没有更改它，也许您的意思是您更改了 IIS 中的“默认”页面？如果是这种情况，请尝试访问 www.yourwebsite.com/default.aspx?ctl=login 登录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T23:06:16.980

[http://www.yoursite.com?ctl=login](http://www.yoursite.com?ctl=login)

这将允许您登录 aa，然后您可以更新设置。

# php - 是否有一个真正的用 PHP 编写的代理，或者我需要做些什么来实现一个？

> ID：12449569
> 
> 赞同：3
> 
> 时间：2012-09-16T18:35:53.327
> 
> 标签：php, proxy

我一直在网上寻找 PHP 代理脚本，但找不到任何东西。我一直在寻找的只是下载页面和编辑 HTML 中的属性的脚本，`src`并且`href`要求我浏览到安装它们的任何网站。我不需要这个，我需要一个真正的代理监听一个端口，我可以设置我的浏览器将它的所有请求路由到。

我要做的是：

1.  运行一个 PHP 脚本来监听我自己电脑的某个端口
2.  将我的网络浏览器配置为使用 localhost:port 作为代理
3.  让 PHP 脚本将页面提供给我的浏览器

如果请求的页面用于获取内容，那么我发现的所有用 PHP 编写的所谓代理脚本都会失败，`XMLHttpRequest`因为它们根本看不到该请求。除了注入一些真正代理不需要的巧妙 JavaScript 之外，再多的链接重写都无法解决问题。

我最终想要的是访问在我的浏览器和某个远程服务器之间来回传输的请求和响应。我希望能够使用我的浏览器对 JavaScript、cookie、flash 等的支持。基本上，我希望以编程方式访问所有通信，以便我可以使用 PHP 分析或操作它。

所以，问题是

*   我是否因为搜索结果中的所有噪音而错过了用 PHP 实现的真正代理？
*   如果 PHP 中没有真正的代理，我想尝试制作一个。是否有在线资源可以帮助我了解我应该做什么？（注意，我虔诚地 RTM：寻找更多关于基本代理的警告和架构）

链接表示赞赏。我知道那里有几个 MITM 代理，但我想要一个 PHP 代理。

我不知道我是否可以用[PHP 的内置网络服务器](http://php.net/manual/en/features.commandline.webserver.php)做点什么，但我也会搞砸的。

**更新**

我有一个用于内置网络服务器的 PHP 的路由器脚本，它开始显示出前景。我可以启动网络服务器并告诉我的网络浏览器将其用作代理。我制作的路由器脚本区分了本地资源和外部资源，并提供了一种处理这两种情况的简单方法。我唯一的问题是https。服务器报告`Invalid Request (Malformed HTTP Request)`。我认为这意味着该服务器根本不会仅使用脚本和设置来执行 https。我不知道。也许我可以用 Apache 来做到这一点，但透明地代理 https 听起来很难，特别是如果我想在数据到达我的浏览器之前更改它。

**AtropaToolbox/php_router/router.php 指向** 我的 PHP 内置网络服务器的路由器脚本，从其他文件中提取实际类。

```
<?php
require_once('AtropaToolbox/php_proxy/proxy.php');

$proxy = new atropa_proxy();

if($proxy->process_request() === false) {
    return false;
}

?> 
```

**AtropaToolbox/php_proxy/proxy.php** 扩展 atropa_mod_proxy 以重新定义处理程序。

```
<?php
require_once('AtropaToolbox/php_proxy/mod_proxy.php');

class atropa_proxy extends atropa_mod_proxy 
{
    protected function local_resource_handler() {
        return false;
    }

    protected function external_resource_handler() {
        $ext = $this->get_page();
        //echo '<pre>' . print_r($ext, true) . '</pre>';
        //$ext['page'] = preg_replace('/<a /', '<p ', $ext['page']);
        $this->show_page($ext);
    }
}
?> 
```

**AtropaToolbox/php_proxy/mod_proxy.php** 通用路由器脚本

```
<?php
/**
 * Rev. 1 Atropa mod_proxy for php built in webserver
 */
class atropa_mod_proxy
{
    protected function is_external_resource() {
        $host = parse_url($_SERVER['REQUEST_URI'], PHP_URL_HOST);
        if(isset($host) && $host !== $_SERVER['SERVER_NAME']) {
            return true;
        } else {
            return false;
        }
    }

    protected function local_resource_handler() {
        return false;
    }

    protected function external_resource_handler() {
        $ext = $this->get_page();
        $this->show_page($ext);
    }

    public function process_request() {
        if($this->is_external_resource()) {
            return $this->external_resource_handler();
        } else {
            return $this->local_resource_handler();
        }
    }

    public function get_request_headers() {
        $arr = array();
        foreach($_SERVER as $svar => $sval) {
            if(substr($svar, 0, 4) === 'HTTP') {
                $svar = substr($svar, 5);
                $svar = preg_replace('/_/', ' ', $svar);
                $svar = ucwords(strtolower($svar));
                $svar = preg_replace('/ /', '-', $svar);
                $arr[$svar] = $sval;
            }
        }
        return $arr;
    }

    public function pack_request_headers($headers_array) {
        $packed = '';
        foreach($headers_array as $header_name => $header_value) {
            $packed .= $header_name . ': ' . $header_value . "\r\n";
        }
        return $packed;
    }

    public function echo_response_headers($http_response_header_array) {
        foreach($http_response_header_array as $val) {
            if(strpos(strtolower($val), 'connection') !== 0) {
                header($val);
            }
        }
    }

    protected function get_page() {
        $request_headers = $this->get_request_headers();
        $request_headers = $this->pack_request_headers($request_headers);
        $method = $_SERVER["REQUEST_METHOD"];
        $scheme = parse_url($_SERVER['REQUEST_URI'], PHP_URL_SCHEME);
        $opts = array(
            $scheme => array(
                'method' => $method,
                'header' => $request_headers
            )
        );
        if(count($_POST) > 0) {
            $content = http_build_query($_POST);
            $opts[$scheme]['content'] = $content;
        }
        $context = stream_context_create($opts);
        $ext = array();
        $ext['page'] = file_get_contents($_SERVER['REQUEST_URI'], false, $context);
        $ext['http_response_header'] = $http_response_header;
        return $ext;
    }

    protected function show_page($ext) {
        header_remove();
        $this->echo_response_headers($ext['http_response_header']);
        echo $ext['page'];
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:52:42.367

请阅读[Socket Programming with PHP](http://www.devshed.com/c/a/PHP/Socket-Programming-With-PHP/)和[An Introduction to Sockets in PHP](http://www.devshed.com/c/a/PHP/An-Introduction-to-Sockets-in-PHP/)。您将运行[PHP 守护程序](http://kevin.vanzonneveld.net/techblog/article/create_daemons_in_php/)以使 PHP 侦听端口并处理所有请求。

为了做到这一点，您可能需要查看[http://sourceforge.net/projects/poxy/](http://sourceforge.net/projects/poxy/)，以便您可以将 PHP 守护程序建立在那里。您还必须了解代理如何与客户通信。Poxy 是一个基于 Web 的应用程序，您输入一个 URL，它会为您加载它。它不允许您监听端口并且它不是 php 守护程序，因此您必须为您的 PHP 守护程序代理进行大量编码。

# ruby-on-rails - 机械化 HABTM 连接表的质量分配错误

> ID：12449573
> 
> 赞同：0
> 
> 时间：2012-09-16T18:36:12.863
> 
> 标签：ruby-on-rails, mechanize, has-and-belongs-to-many

问题是我收到此错误：

```
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: amenity_id 
```

当我运行此代码时：

```
task import_amenities: :environment do

  agent = Mechanize.new

  Kindergarten.find_all_by_public(false).each do |k| 
    p = agent.get(k.uri)
    amenities = p.search("td td tr:nth-child(11) td:nth-child(2)").text.split(/(;|,) */)
    amenities.each do |a|
      am = Amenity.find_or_create_by_name!("#{a}")
      k.update_attributes(amenity_id: am.id)
    end
  end
end 
```

幼儿园和便利设施通过 HABTM 关系链接，定义如下：

幼儿园.rb

```
class Kindergarten < ActiveRecord::Base
  attr_accessible :location, :name, :public, :uri, :address, :contact, 
                  :phone, :url, :email, :description, 
                  :password, :password_confirmation, :amenity_ids
  has_and_belongs_to_many :amenities
end 
```

舒适度.rb

```
class Amenity < ActiveRecord::Base
  attr_accessible :name, :kindergarten_ids
  has_and_belongs_to_many :kindergartens
end 
```

这是连接表的迁移：

```
class CreateKindergartensAmenitiesJoinTable < ActiveRecord::Migration
  def up

    create_table :kindergartens_amenities, :id => false do |t|
      t.integer :kindergarten_id
      t.integer :amenity_id
    end
  end
end 
```

该错误是由 rake 任务中的这一行引起的：

```
k.update_attributes(amenity_id: am.id) 
```

在我完成大规模任务之前，控制台中的一切似乎都运行良好。而且我认为我真的在这里搞砸了，因为我在 HABTM 之前从未使用过。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:51:32.757

由于这个错误，我昨晚无法入睡，但我终于找到了解决方案。

代码中有一些问题，当我开始在数据库中手动挖掘和添加数据时，我注意到的第一个问题是连接表的名称错误。解决这个问题：

```
class RenameKindergartensAmenitiesTable < ActiveRecord::Migration
  def up
    rename_table :kindergartens_amenities, :amenities_kindergartens
  end
end 
```

显然，habtm 协会必须将内容按字母顺序放在标题中。[来源](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_and_belongs_to_many)

第二个问题是我假设

```
k.amenity_id = am.id 
```

将为现有的每个便利设施添加一个 amenity_id/幼儿园 ID。事实上 k.amenity_id 没有任何意义（尤其是在许多 id 的情况下）。有效的解决方案是：

```
amenities.each do |a|
  am = Amenity.find_or_create_by_name!("#{a}")
  k.update_attributes(amenity_ids: k.amenity_ids.push(am.id))
end 
```

我没有修改`attr_accessible`任何地方

# php - PHP以秒为单位查找过期时间

> ID：12449576
> 
> 赞同：1
> 
> 时间：2012-09-16T18:36:30.647
> 
> 标签：php

假设我们有开始日期和结束日期

```
 if (isset($_POST['start_date']))
    $_POST['start_date'] = gmdate('Y-m-d H:i:s', strtotime($_POST['start_date']));

 if (isset($_POST['end_date']))
    $_POST['end_date'] = gmdate('Y-m-d H:i:s', strtotime($_POST['end_date'])); 
```

会给 `$_POST['end_date'] - $_POST['start_date']`你以秒为单位的过期时间吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:46:30.483

不，要以秒为单位获取过期时间，您可以使用[strtotime()](http://www.php.net/strtotime)：

```
$expired = strtotime($_POST['end_date'])-strtotime($_POST['start_date']);

if (isset($_POST['start_date']))
    $_POST['start_date'] = gmdate('Y-m-d H:i:s', strtotime($_POST['start_date']));

if (isset($_POST['end_date']))
    $_POST['end_date'] = gmdate('Y-m-d H:i:s', strtotime($_POST['end_date']));

if (isset($_POST['start_date']) && isset($_POST['end_date'])) echo 'Expired time in seconds: ' . $expired; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T18:45:37.417

我建议您使用[mktime](http://php.net/manual/en/function.mktime.php)函数从日期文字中获取 unix 时间戳，以毫秒为单位。

```
$startDate = mktime($hour, $minute, $second, $month, $day, $year);
$endDate = mktime($hour, $minute, $second, $month, $day, $year);

$diffInSeconds = ($endDate - $startDate) / 1000; // 1 second = 1000 miliseconds 
```

# facebook - 服务未触发：控制器必须返回响应（给定 null）

> ID：12449577
> 
> 赞同：1
> 
> 时间：2012-09-16T18:36:35.607
> 
> 标签：facebook, symfony, fosuserbundle, fosfacebookbundle

大家好，非常感谢您的帮助，我正在努力让 FOSFacebook 工作，但直到现在这似乎是不可能的。我尝试了很多配置，并进行了很多修复，但对我没有任何帮助。

这是我的配置：

**安全.yml**

```
chain_provider:
    chain:
        providers: [fos_userbundle, fos_facebook_provider]
fos_userbundle:
    id: fos_user.user_provider.username
fos_facebook_provider:
      id: fos.facebook.custom_provider

firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    main:
        pattern: ^/
        form_login:  
            login_path: fos_user_security_login
            check_path: fos_user_security_check
            provider: fos_userbundle
            csrf_provider: form.csrf_provider
        logout:       true
        anonymous:    true
    public:
          pattern:   ^/
          fos_facebook:
              app_url: "http://apps.facebook.com/myApp/"
              server_url: "http://www.mywebsite.com"
              login_path: /facebook/login
              check_path: /facebook/check
              default_target_path: /
              provider: fos_facebook_provider
          anonymous: false
          logout:
              handlers: ["fos_facebook.logout_handler"] 
```

**配置.yml**

```
fos.facebook.custom_provider:
    class: Bundles\UserBundle\Security\User\Provider\FacebookProvider
    arguments:
        facebook: "@fos_facebook.api"
        userManager: "@fos_user.user_manager"
        validator: "@validator"
        container: "@service_container"
fos_facebook:
    file:   %kernel.root_dir%/../vendor/facebook/php-sdk/src/base_facebook.php
    alias:  facebook
    app_id: myid
    secret: mysecret
    cookie: true
    permissions: [email] 
```

**路由.yml**

```
 _security_check:
        pattern:  /facebook/check

    _security_logout:
        pattern:  /logout 
```

**树枝模板**

```
<script type="text/javascript">
    function goLogIn(){
        window.location.href = "{{ path('_security_check') }}";
    }

    function onFbInit() {
        if (typeof(FB) != 'undefined' && FB != null ) {
            FB.Event.subscribe('auth.statusChange', function(response) {
                if (response.session || response.authResponse) {
                    setTimeout(goLogIn, 500);
                } else {
                    window.location.href = "{{ path('_security_logout') }}";
                }
            });
        }
    }
</script>
{{ facebook_initialize({'xfbml': true, 'fbAsyncInit': 'onFbInit();'}) }} 
```

**用户控制器.php**

```
 * @Route("/facebook/check")
 */
 public function loginCheckFacebookAction(){

 } 
```

以及提供者和对 User 类的修改（如在[自述文件](https://github.com/FriendsOfSymfony/FOSFacebookBundle/blob/master/README.md)中）。

但问题是该服务似乎没有被调用。确实，UserController中的方法一定是dummy方法，这里不是这样。该方法被调用，当然我得到这个错误：

*LogicException：控制器必须返回响应（给定 null）。您是否忘记在控制器的某处添加 return 语句？（未捕获的异常）。*

我的错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:09:13.493

删除您的 UserController 路由/操作`loginCheckFacebookAction`

# c++ - 根据 API 中调用的其他函数更改函数的行为

> ID：12449580
> 
> 赞同：0
> 
> 时间：2012-09-16T18:37:22.110
> 
> 标签：c++, oop, class

我正在编写一些科学代码来生成/导入一些数据（我们称之为 X）以生成其他数据集（我们可以称之为 Y）。问题是生成 X 的方法不止一种，而且这种生成方法会影响 Y 的计算公式。

我已经开发了一个库来处理数据导入和计算的东西，但是，我无法在没有用户干预的情况下决定一个完善的机制来修改公式。

处理此类案件的最佳方法是什么？我为 X 的不同生成方法实现了不同的功能，但 Y 的计算方法是单一的。

为了澄清更多，我想实现以下行为：

1.  用户调用生成/导入 X 的导入函数之一，
    *   奇迹发生了，计算 Y 的公式以某种方式更新。
2.  然后用户调用生成 Y 的 calc() 函数。

这个问题中提到的所有函数都是具体的、简单的和愚蠢的类内函数。

我不确定如何在生成/导入 X 并使魔术起作用的函数中实现触发机制。有用的研究员@UnknownGosu 和@Dima-Rudnik 回答了存储配方的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:12:56.613

你需要一种形式的[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。

就像@UnknownGosu 指出的那样。定义一个抽象`Formula`接口，如下所示：

```
class Formula
{
public:
  virtual double calc(double) = 0;
}; 
```

比创建一个混凝土`Formula`

```
class QuardicFormula : public Formula
{
public:
  double calc (double x) {return x*x;}
}; 
```

**编辑：**

在过程编程中，函数指针也是如此。例如，采用指向排序函数的指针的 QuickSort 实现。

# ruby-on-rails - twitter bootstrap 模态数据属性参数中的 html 文本

> ID：12449582
> 
> 赞同：0
> 
> 时间：2012-09-16T18:37:55.340
> 
> 标签：ruby-on-rails, twitter-bootstrap

这来自[Twitter Bootstrap modal rails delete button not working](https://stackoverflow.com/questions/12429066/twitter-bootstrap-modal-rails-delete-button-not-working)

如何传递 html 代码以在 Twitter Bootstrap 模式中显示？链接在这里

```
<%= link_to t('delete'), post, method: :delete, confirm: t('delete_this_question'), 'data-my-message' => raw(post.text), class: 'label' %> 
```

post.text 是 HTML 代码。现在它以错误的格式显示链接。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:52:31.387

我认为这里的问题可能是您对“原始”的使用。如果您在 link_to 助手中使用原始 html，它可能会弄乱链接的引用。例如你可能会得到这样的东西：

```
<a href="..." data-my-message="Hello <a href="/foo">world</a>" ...> 
```

那会弄乱你的链接标签。我不确定您的其余视图如何组合在一起，但我认为您应该能够放弃“原始”方法：

```
<%= link_to t('delete'), post, method: :delete, confirm: t('delete_this_question'), 'data-my-message' => post.text, class: 'label' %> 
```

# ios - 配置脚本和ldid

> ID：12449585
> 
> 赞同：2
> 
> 时间：2012-09-16T18:38:11.790
> 
> 标签：ios, gcc, scripting, jailbreak

配置脚本的摘录由于`Killed: 9` 错误而失败，即 iOS 5 只能运行**签名**的应用程序。所以我需要找到一种方法`ldid -s`在这些测试中放置一些地方，唯一的问题是在哪里。

任何人？？？

失败了

```
checking build system compiler gcc... no
checking build system compiler gcc -g -O2 ... no
checking build system compiler cc... no
checking build system compiler gcc... no
checking build system compiler c89... no
checking build system compiler c99... no
configure: error: Cannot find a build system compiler 
```

和 config.log

```
onfigure:15586: gcc -c -g -O2  conftest.c >&5
configure:15586: $? = 0
configure:15586: result: yes
configure:15586: checking sys/time.h presence
configure:15586: gcc -E  conftest.c
configure:15586: $? = 0
configure:15586: result: yes
configure:15586: checking for sys/time.h
configure:15586: result: yes
configure:15677: checking build system compiler gcc
configure:15690: gcc conftest.c
conftest.c: In function 'main':
conftest.c:4: warning: incompatible implicit declaration of built-in function 'exit'
configure:15693: $? = 0
./configure: line 15675: 27218 Killed: 9               ./a.out
./configure: line 15695: ./b.out: No such file or directory
./configure: line 15695: ./a.exe: No such file or directory
./configure: line 15695: ./a_out.exe: No such file or directory
./configure: line 15695: ./conftest: No such file or directory
configure:15700: result: no
configure:15677: checking build system compiler gcc -g -O2
configure:15690: gcc -g -O2  conftest.c
conftest.c: In function 'main':
conftest.c:4: warning: incompatible implicit declaration of built-in function 'exit'
configure:15693: $? = 0
./configure: line 15675: 27234 Killed: 9               ./a.out
./configure: line 15695: ./b.out: No such file or directory
./configure: line 15695: ./a.exe: No such file or directory
./configure: line 15695: ./a_out.exe: No such file or directory
./configure: line 15695: ./conftest: No such file or directory
configure:15700: result: no 
```

最后是 ./configure 脚本..

```
if test -n "$CC_FOR_BUILD"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking build system compiler $CC_FOR_BUILD" >&5
    $as_echo_n "checking build system compiler $CC_FOR_BUILD... " >&6; }
    # remove anything that might look like compiler output to our "||" expression
    rm -f conftest* a.out b.out a.exe a_out.exe
    cat >conftest.c <<EOF
    int
    main ()
    {
      exit(0);
    }
    EOF
    gmp_compile="$CC_FOR_BUILD conftest.c"
    cc_for_build_works=no
    if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$gmp_compile\""; } >&5
      (eval $gmp_compile) 2>&5
      ac_status=$?
      $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
      test $ac_status = 0; }; then
      if (./a.out || ./b.out || ./a.exe || ./a_out.exe || ./conftest) >&5 2>&1; then
        cc_for_build_works=yes
      fi
    fi
    rm -f conftest* a.out b.out a.exe a_out.exe
    { $as_echo "$as_me:${as_lineno-$LINENO}: result: $cc_for_build_works" >&5
    $as_echo "$cc_for_build_works" >&6; }
    if test "$cc_for_build_works" = yes; then
      :
    else
      as_fn_error $? "Specified CC_FOR_BUILD doesn't seem to work" "$LINENO" 5
    fi

    elif test -n "$HOST_CC"; then
      { $as_echo "$as_me:${as_lineno-$LINENO}: checking build system compiler $HOST_CC" >&5
    $as_echo_n "checking build system compiler $HOST_CC... " >&6; }
    # remove anything that might look like compiler output to our "||" expression
    rm -f conftest* a.out b.out a.exe a_out.exe
    cat >conftest.c <<EOF
    int
    main ()
    {
      exit(0);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:59:08.710

我不得不承认，除了最简单的 shell 脚本之外，我的阅读能力很差，但基本上，您需要在运行可执行文件之前对其进行伪造代码签名。看起来您要运行的可执行文件被称为`conftest`，对吗？因此，请尝试在此块中签名：

```
if { { eval echo "\"\$as_me\":${as_lineno-$LINENO}: \"$gmp_compile\""; } >&5
  (eval $gmp_compile) 2>&5
  ac_status=$?
  $as_echo "$as_me:${as_lineno-$LINENO}: \$? = $ac_status" >&5
  test $ac_status = 0; }; then

  #begin added code
  ldid -S ./conftest
  #end added code

  if (./a.out || ./b.out || ./a.exe || ./a_out.exe || ./conftest) >&5 2>&1; then
    cc_for_build_works=yes
  fi
fi 
```

显然，`ldid`如果`/usr/bin/ldid`在现有的`PATH`.

**更新：**根据海报下面的评论，`a.out`实际上是需要签名的可执行文件，而不是`conftest`.

# xml - 使用 xsltproc 忽略 XSLT 中的所有其他标记

> ID：12449587
> 
> 赞同：0
> 
> 时间：2012-09-16T18:38:14.417
> 
> 标签：xml, xslt

我想使用 xsltproc 转换 xml 文件并只提取其中的一部分，我有这样的 xslt：

```
<?xml version="1.0" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output
       method="xml"
       indent="yes"
       encoding="iso-8859-1" />

    <xsl:template match="glossary">
        <ul>
        <xsl:for-each select="*/glossentry">
            <li>
                <h2><xsl:value-of select="glossterm"/> (<xsl:value-of select="abbrev/emphasis"/>)</h2>
                <div><xsl:value-of select="*/para"/></div>
            </li>
        </xsl:for-each>
        </ul>
    </xsl:template>
    <xsl:template match="/">
        <html>  
        <body>
        <xsl:apply-templates/>
        </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

但它将 xml 中的所有其他文本显示为文本。**需要添加或更改什么才能仅显示这样的内容？**

```
<html><body>
<ul>
<li>
  <h2>Term (abbrev)</h2>
  <div>Para</div>
</li>
<li>
  <h2>Term2 (abbrev2)</h2>
  <div>Para2</div>
</li>
...
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:02:25.163

好的，我找到了，我需要添加选择到`apply-templates`

```
<?xml version="1.0" ?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output
       method="xml"
       indent="yes"
       encoding="iso-8859-1" />

    <xsl:template match="part">
        <xsl:if test="@id = 'lexicon'">
            <xsl:apply-templates select="glossary"/>
        </xsl:if>
    </xsl:template>

    <xsl:template match="glossary">
        <ul>
        <xsl:for-each select="*/glossentry">
            <li>
                <h2><xsl:value-of select="glossterm"/> 
                    <xsl:if test="abbrev">
                      <xsl:text>: </xsl:text>
                      <xsl:for-each select="abbrev/*">
                        <xsl:if test="position() &gt; 1">, </xsl:if>
                        <xsl:apply-templates select="."/>
                      </xsl:for-each>
                    </xsl:if>
                </h2>
                <div><xsl:value-of select="*/para"/></div>
            </li>
        </xsl:for-each>
        </ul>
    </xsl:template>
    <xsl:template match="book">
        <html>
            <title><xsl:value-of select="title"/></title>
        <body>
        <xsl:apply-templates select="part"/>
        </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

# css - 如何修复 IE9 的下拉菜单？

> ID：12449589
> 
> 赞同：-4
> 
> 时间：2012-09-16T18:38:22.967
> 
> 标签：css, drop-down-menu, internet-explorer-9

我有这个 CSS 构建的悬停下拉菜单，我想在我的网站上使用。它适用于除 IE9 以外的所有浏览器。这是我的代码和工作表：

[工作表和代码](http://timdebruyn8.wix.com/ie9problemhelp#!home/mainPage)

有谁知道似乎出了什么问题？我在建筑工地等方面不是那么好或经验丰富......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:38:22.550

我无法在 ie9 中测试这个（目前在 Mac 上），但也许你可以尝试从`visibility:hidden;`to`display:none;`更改`visibility:visible;`为`display: block;`

# animation - CSS旋转慢

> ID：12449591
> 
> 赞同：6
> 
> 时间：2012-09-16T18:38:37.770
> 
> 标签：animation, css, rotation, flip

[http://jsfiddle.net/egEq2/](http://jsfiddle.net/egEq2/)

```
.badge {
    -webkit-transform-style: preserve-3d;
    -webkit-perspective: 1000;
    position: relative;
}   
.back, .front {
    position: absolute;
    -webkit-backface-visibility: hidden;
    -webkit-transition: -webkit-transform 1s ease-in;
    width: 100%;
    height: 100%;   
}
.back {
    -webkit-transform: rotateY(180deg);
    overflow: hidden;
}   
.front {
}
.product-action {
    display: inline-block;
}   
.product-action:hover .back {   
    -webkit-transform: rotateY(0deg);
}
.product-action:hover .front {      
    -webkit-transform: rotateY(-180deg);
}​ 
```

...可以，但是翻转太慢，我​​可以改变速度吗？

另外，我可以以某种方式增加宽度，使翻盖看起来像一块木板而不是一张薄纸吗？:)

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-16T18:40:53.013

您已经指定了速度：

```
-webkit-transition: -webkit-transform 1s ease-in;
                                      ^^ 
```

将其更改为：http `0.3s`: [//jsfiddle.net/egEq2/1/](http://jsfiddle.net/egEq2/1/)

# php - 如何使用和检查 HipHop for PHP 的性能改进？

> ID：12449593
> 
> 赞同：2
> 
> 时间：2012-09-16T18:38:48.127
> 
> 标签：php, hiphop

Facebook 上围绕 HipHop PHP 的讨论给我留下了深刻的印象，也想尝试一次。我发现很多文章都说 HipHop 如何提高性能，我也找到了安装步骤。但是我没有找到使用此 HipHop 并检查性能改进的步骤/指南。

我想很多人已经使用了 HipHop，所以请告诉我使用 HipHop 的确切步骤并检查性能改进。如果您知道已经有一些博客或其他内容可以指定相应的流程，那么至少请指出这些资源。

**仅供参考：**我已经按照[wiki 页面上](https://github.com/facebook/hiphop-php/wiki/Building-and-installing-HHVM-on-Ubuntu-12.04)的说明在我的 Ubuntu 12.04 LTS 中安装了 HipHop ，但不知道如何使用它。我在我的项目中使用 CodeIgniter 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:04:46.970

一种方法（对于 Web 应用程序）是运行[ab](http://httpd.apache.org/docs/2.2/programs/ab.html)，这是一个非常简单的基准测试工具。

它不会考虑图像或脚本等其他资源，而只会考虑页面本身的响应时间，因此您应该对之前和之后的加载时间有一个不错的了解。为了测试并发请求处理，它具有并行请求的选项。

基本用法类似于

```
ab -n2000 -c5 http://www.example.com 
```

其中 n 是请求数量，c 是并发级别

# jsp - 在两个 tomcat 服务器上的两个应用程序之间保持 JSP 会话处于活动状态

> ID：12449595
> 
> 赞同：2
> 
> 时间：2012-09-16T18:38:55.813
> 
> 标签：jsp, session

嗨，我想在 2 个 tomcat 服务器上运行的两个不同应用程序之间保持相同的会话。我在一台服务器上运行了一个应用程序，在登录时为其创建了一个会话。如果我单击应用程序上的链接，它将被重定向到另一个 tomcat 服务器上的第二个应用程序。那时，它应该保持与第一台服务器中相同的会话。之后，如果它返回到第一台服务器中的应用程序，则不应再次请求身份验证。它应该使用相同的会话。

有什么方法可以在 JSP 中**的 2 个 tomcat 服务器之间传递****会话 ID**或详细信息。

 **任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T07:31:03.997

我认为您可能需要 SSO（单点登录）解决方案。所以这里有这些是免费的和一些开源的：

1.  [打开 AM](http://openam.forgerock.org/ "官方网站：首页")（以前打开 SSO）
2.  [JOSSO](http://www.josso.org/confluence/display/JOSSO1/JOSSO+-+Java+Open+Single+Sign-On+Project+Home "官方网站：首页")（Java 开放式单点登录）
3.  [CAS](http://www.jasig.org/cas "官方网站：首页")（中央认证服务）

[您还可以按照此处](http://www.coderanch.com/t/463609/Tomcat/Implementing-Single-Sign#post_text_2071247 "实现单点登录的 Java 牧场论坛答案")提到的方法使用 Servlet 过滤器在这两个 Web 应用程序中构建一些自定义安全性。

[**注意：**仅当您不想使用任何 SSO 解决方案时才选择自定义解决方案（这将是一种痛苦但很好的学习 ;-)）；由于[此处](http://www.mousetech.com/blog/?p=11 "Why Do-it-Yourself Java Security is a BAD THING")给出的原因，我建议不要[重新发明轮子](http://en.wikipedia.org/wiki/Reinventing_the_wheel)）]

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T18:57:00.193

如果您在同一台机器上使用两个 tomcat 服务器，那么这两个服务器都有不同的端口，比如一个有 8080，第二个有 8081。

现在您可以简单地将请求转发到具有设置属性的第二个应用程序，并记住在 url 中提供第二个应用程序 jsp 的完整路径，例如，

```
http://localhost:8081/2nd_application/page.jsp 
```

JSP 有 4 个作用域：Application、Session、Request 和 Page。

在这里使用 Request 范围是我的权利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T03:49:17.017

只需 `resp.encodeRedirectURL()`与`resp.sendRedirect()`.

像这样 ：

```
response.sendRedirect(response(encodeRedirectURL("outputpage.jsp")) 
```

希望提供了正确的解决方案。**

# jpanel - 为什么我的面板不能使用 BorderLayout？

> ID：12449596
> 
> 赞同：0
> 
> 时间：2012-09-16T18:39:15.090
> 
> 标签：jpanel

我正在制作一个程序，其中有一帧，其中包含一个 GridLayout g = (2,2)，这意味着本质上是一个正方形，分为四个部分。在每个部分中，我添加了一个面板并相应地命名它们（tl = 左上角，tr = 右下角，bl = 左下角，br = 右下角）现在我想将面板添加到这些面板中。我想将 Panel tl 的布局设置为 BorderLayout，然后将另一个面板 - 称为 tl1 - 添加到 tl。这是我的代码，但由于某种原因它不会让我这样做。我是 java 的初学者，所以我不太确定一切是如何工作的，所以这可能是一个愚蠢的问题，但是当我查看边框布局的语法时，它说它是这样写的 (component, BORDER.LAYOUT North ） 或者其他的东西。JPanel 不是一个组件，这就是为什么这不起作用？

```
public class BattleShipGrid {
JFrame frame  = new JFrame("Battleship");
//JPanel tl = new JPanel();
JPanel tl = new JPanel();
JPanel tl1 = new JPanel();
JPanel tr = new JPanel();
JPanel bl = new JPanel();
JPanel br = new JPanel();

JButton  b1 = new JButton();

GridLayout g = new GridLayout(2,2,2,2);
GridLayout gtl = new GridLayout(11,11,2,2);

JButton[][] tlba;

public BattleShipGrid(){
frame.setVisible(true);
frame.setSize(800,800);
frame.setBackground(Color.RED);
frame.setLayout(g);
frame.add(tl);tl.setBackground(Color.GREEN);
tl.setLayout(new BorderLayout());
frame.add(tr);//tr.setBackground(Color.BLUE);
frame.add(bl);//bl.setBackground(Color.GREEN); 
frame.add(br);//br.setBackground(Color.YELLOW);
/*GridBagConstraints gbc = new GridBagConstraints();
gbc.insets = new Insets(15,15,0,0);
tl.setLayout(gtl);
gbc.gridx = 3;
gbc.gridy = 3;
tl1.add(b1); 
*/
//ADD A TOOLBAR SO THAT THE USER CAN MAKE A NEW GAME OR ACCESS OTHER OPTIONS
tl1.setBackground(Color.yellow);
tl.add(tl1, BorderLayout); 

tl1.setPreferredSize(new Dimension(200,200)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T19:00:11.987

我几乎可以肯定你不再需要答案了，但你需要编辑你的行“tl.add(tl1, BorderLayout);” 对其中任何一个

```
tl.add(tl1, BorderLayout.NORTH);
tl.add(tl1, BorderLayout.EAST);
tl.add(tl1, BorderLayout.CENTER);
tl.add(tl1, BorderLayout.SOUTH);
tl.add(tl1, BorderLayout.WEST); 
```

# xna - xna 4.0 精灵 + MRT + 像素着色器

> ID：12449599
> 
> 赞同：1
> 
> 时间：2012-09-16T18:39:44.133
> 
> 标签：xna, xna-4.0, pixel-shader, rendertarget, spritebatch

我正在尝试组合 2 个渲染目标，颜色和法线，用于漫反射闪电并在屏幕上渲染结果。这个想法是使用具有仅包含像素着色器的效果的精灵来组合来自纹理的渲染目标。XNA 代码：

```
GraphicsDevice.SetRenderTarget(null);
GraphicsDevice.Clear(ClearOptions.Target | ClearOptions.DepthBuffer, Color.Black, 1.0f, 0);
effect.CurrentTechnique = effect.Techniques["show_buffer"];
effect.Parameters["normalTex"].SetValue(normalRendertarget);
effect.Parameters["colorTex"].SetValue(colorRendertarget);
effect.Parameters["AmbientIntensity"].SetValue(ambientIntesity);
effect.Parameters["LightDirection"].SetValue(lightDirection);
effect.Parameters["DiffuseIntensity"].SetValue(diffuseIntensity);

spriteBatch.Begin(0, BlendState.Opaque, null, null, null,effect);
spriteBatch.Draw(normalRT, Vector2.Zero, Color.White);
spriteBatch.End(); 
```

由于某种原因， spriteBatch.Draw() 中使用的渲染目标会影响结果。

像素着色器：

```
void Tex_PixelShader(float2 texCoord : TEXCOORD0, out float4 color : COLOR0)
{
 float4 normal = tex2D(normalTexSampler, texCoord);
 //tranform normal back into [-1,1] range
 normal.rgb = (normal.rgb*2)-1; 
 float4 baseColor = tex2D(colorTexSampler, texCoord);
 float3 lightDirectionNorm = normalize(LightDirection);
 float diffuse = saturate(dot(-lightDirectionNorm,normal.rgb));

 //only works with normalRT in spriteBatch.Draw()
 //colorRT  in spriteBatch.Draw() gives colorRT but darker as result
 color = float4 (baseColor.rgb * (AmbientIntensity + diffuse*DiffuseIntensity), 1.0f);

 //only works with colorRT in spriteBatch.Draw()
 //normalRT in spriteBatch.Draw() gives normalRT as result
 //color = tex2D(colorTexSampler, texCoord); 

 //only works with NormalRT
 //colorRT in spriteBatch.Draw() gives colorRT as result
 //color=tex2D(normalTexSampler, texCoord);

 // works with any rendertarget in spriteBatch.Draw()
 //color = float4(0.0f,1.0f,0.0f,1.0f);
} 
```

两个渲染目标中的 alpha 值始终为 1。将顶点着色器添加到效果会导致黑色。使用 spriteBatch.Draw() 绘制一个没有任何效果的渲染目标表明每个渲染目标的内容都很好。我无法理解这一点。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:16:08.567

**使用GraphicsDevice.Textures[1]=tex;** 设置纹理；而不是**effect.Parameters["tex"]=tex;** 工作。谢谢安德鲁。

将 xna 代码更改为：

```
GraphicsDevice.SetRenderTarget(null);
GraphicsDevice.Clear(ClearOptions.Target | ClearOptions.DepthBuffer, Color.Black, 1.0f, 0);
effect.CurrentTechnique = effect.Techniques["show_buffer"];
GraphicsDevice.Textures[1] = normalRT;   //changed
GraphicsDevice.Textures[2] = colorRT;    //changed
effect.Parameters["AmbientIntensity"].SetValue(ambientIntesity);
effect.Parameters["LightDirection"].SetValue(lightDirection);
effect.Parameters["DiffuseIntensity"].SetValue(diffuseIntensity);

spriteBatch.Begin(0, BlendState.Opaque, null, null, null,effect);
spriteBatch.Draw((Texture2D)colorRT, Vector2.Zero, Color.White);
spriteBatch.End(); 
```

以及着色器代码：

```
sampler normalSampler: register(s1);   //added
sampler colorSampler: register(s2);    //added

void Tex_PixelShader(float2 texCoord : TEXCOORD0, out float4 color : COLOR0)
{
 float4 normal = tex2D(normalSampler, texCoord); //changed
 normal.rgb = (normal.rgb*2)-1;
 float4 baseColor = tex2D(colorSampler, texCoord);  //changed

 float3 lightDirectionNorm = normalize(LightDirection);
 float diffuse = saturate(dot(-lightDirectionNorm,normal.rgb));

 color = float4 (baseColor.rgb * (AmbientIntensity + diffuse*DiffuseIntensity), 1.0f);
} 
```

# android - PhoneGap App - 具有相同数据库的免费应用程序和付费应用程序

> ID：12449601
> 
> 赞同：2
> 
> 时间：2012-09-16T18:39:52.770
> 
> 标签：android, cordova, storage, shared

我使用 PhoneGap 开发了 2 个移动应用程序。一种是免费的广告支持版本，功能略有限制，另一种是没有广告的完整版本。我的应用程序将数据保存在 localStorage 密钥对和 WebSQL 开放数据库中。

理想情况下，我希望这两个应用程序共享相同的存储空间，因为目前每个应用程序在各自的安装路径中都有自己的数据库。我需要这个，所以如果有人使用我的免费应用程序几周并保存了大量数据，他们可以升级到完整版本，他们的数据将被保留。

另一种解决方案是拥有一个导入/导出功能，最终我想实现它以允许用户备份他们的数据甚至转移到新手机。但是，为了让两个应用程序都使用同一个数据库，我更愿意先让它工作。

**应用信息：**

存储：localStorage 密钥对和 WebSQL (openDatabase();)

语言：HTML、CSS、JavaScript

平台：安卓蜂巢+

数据库：2 个表，“temp”和“shifts”，由 id (INT)、startTime (DATETIME)、stopTime (DATETIME)、shiftTime (FLOAT) 组成。

我不是在寻找如何做到这一点的完整代码示例，我只需要一些关于哪些方法是可能的以及从哪里开始实施它们的建议。感谢您的宝贵时间，所以提前致谢。

亲切的问候，米切尔勒索姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T08:25:35.440

在android平台中，每个应用程序都有自己的隔离存储`/data/data/packagename`，只有应用程序本身可以访问，在您的情况下，一种解决方案是将免费和付费应用程序打包为相同的，因此android在免费应用程序上安装付费应用程序（它将保留用户数据，包括您的数据基础）第二个解决方案是将您的数据库保存在 sdcard（不推荐）和您指出的第三个解决方案是导入/导出功能。

# ruby-on-rails - Rails如何按日期分组和计数记录？

> ID：12449602
> 
> 赞同：3
> 
> 时间：2012-09-16T18:39:53.323
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

在我的模型中，我有：

```
start = 3.weeks.ago

kliks = where(created_at: start.beginning_of_day..Time.zone.now)
kliks = kliks.group("date(created_at)") 
```

如何计算每天的所有记录总数？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T18:47:56.787

我相信这应该有效：

```
kliks = count(
  :group => 'date(created_at)',
  :conditions => { :created_at => start.beginning_of_day..Time.zone.now }
) 
```

这将为您返回一个哈希映射日期到他们的计数。

# django - 在 Django 应用程序中集成日历小部件

> ID：12449603
> 
> 赞同：5
> 
> 时间：2012-09-16T18:40:11.563
> 
> 标签：django, calendar, datepicker

如何在我的系统中集成日历小部件？我希望将日历小部件添加到我的表单中，该表单是用 Django 设计的。我附上了一个屏幕截图，显示了我想在哪里集成它。另外，我希望日历小部件类似于[http://www.dynarch.com/projects/calendar/](http://www.dynarch.com/projects/calendar/)。

我需要修改什么文件，需要使用什么代码？

![在此处输入图像描述](../Images/40002ee0705ce10299eb1781d2cc4671.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T09:18:20.993

forms.py

```
import datetime
from django.forms.extras.widgets import SelectDateWidget
from django.forms import ModelForm, Form

date_field = forms.DateField(widget=SelectDateWidget) 
```

or else there is also a another way using Javascript [Using Django time/date widgets in custom form](https://stackoverflow.com/questions/38601/using-django-time-date-widgets-in-custom-form) it may be helpful

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-16T13:52:50.757

我想到了。您只需要在 settings.py 中激活管理界面并在 forms.py 文件中导入 AdminDateWidget 而不是 SelectDateWidget。此外，将以下代码插入到表单的模板文件中。确保将其放在标签之间。这是代码：

```
<script type="text/javascript" src="/admin/jsi18n/"></script>
<script type="text/javascript" src="/static/admin/js/core.js"></script>
<script type="text/javascript" src="/static/admin/js/admin/RelatedObjectLookups.js">        </script>
<script type="text/javascript" src="/static/admin/js/jquery.min.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery.init.js"></script>
<script type="text/javascript" src="/static/admin/js/actions.min.js"></script>
<script type="text/javascript" src="/static/admin/js/calendar.js"></script>
<script type="text/javascript" src="/static/admin/js/admin/DateTimeShortcuts.js"></script> 
```

希望它对某人有用，干杯！

萨达特

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-03T10:35:52.970

经过长时间的努力，我设法让它在 Django 2.0.2 上运行。您需要在模板标题中包含以下内容：

```
<script type="text/javascript" src="/jsi18n/"></script>
<script type="text/javascript" src="{% static 'admin/js/core.js' %}"></script>
<script type="text/javascript" src="{% static 'admin/js/admin/RelatedObjectLookups.js' %}"></script>

<link rel="stylesheet" type="text/css" href="{% static 'admin/css/forms.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/base.css' %}"/>
<link rel="stylesheet" type="text/css" href="{% static 'admin/css/widgets.css' %}"/>
```

网址.py

```
from django.views.i18n import JavaScriptCatalog

urlpatterns = [
    ...
    path('jsi18n/', JavaScriptCatalog.as_view(), name='javascript-catalog'),

] 
```

然后是forms.py

```
from django import forms
from .models import MyModel
from django.contrib.admin.widgets import AdminDateWidget

class TripDetailForm(forms.ModelForm):
    class Meta:
        model = MyModel
        fields = '__all__'
        widgets = {
            'my_field': AdminDateWidget(),
} 
```

使用此代码，您一定可以顺利进行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-16T20:23:10.740

**只是给使用Django_filters**的人的提示，他们希望管理日历显示在日期字段上（Ex Date 大于）.. 您需要在您创建的过滤器中声明小部件。

像这样 ：

```
class InterviewFilter(django_filters.FilterSet):

    start_date = django_filters.DateFilter(name='date',lookup_expr=('gt'), widget=AdminDateWidget())
    end_date = django_filters.DateFilter(name='date',lookup_expr=('lt'), widget=AdminDateWidget()) 
    registry_year = django_filters.DateRangeFilter(field_name='date', lookup_expr='year')

    class Meta:
        model = Interview
        fields = ['position', 'result', 'status'] 
```

# php - 第一次用php拉select语句

> ID：12449604
> 
> 赞同：-1
> 
> 时间：2012-09-16T18:40:24.487
> 
> 标签：php, mysql, database

> **可能重复：**
> [mysql_fetch_array() 期望参数 1 是资源，选择中给出的布尔值](https://stackoverflow.com/questions/2973202/mysql-fetch-array-expects-parameter-1-to-be-resource-boolean-given-in-select)

这就是我所拥有的

```
<?php 
            mysql_select_db("my_db", $conn);

            $result = mysql_query("SELECT name FROM card");

            while($row = mysql_fetch_array($result))
            {
            echo $row['name'];
            echo "<br />";
            }
?> 
```

和

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 113 行的 D:\xampp\htdocs\UFSDBSearch.php 中给出

就是我得到的。我不知道那是什么意思。我只是想让它呼应存储在该桌子上的卡片的名称。如果我需要告诉我更多信息，请告诉我。我在这里先向您的帮助表示感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T18:44:12.410

`mysql_query()`返回**FALSE**。当某些错误阻止查询成功完成时，就会发生这种情况。请检查您连接到数据库的代码，并确保`SELECT name FROM card`正在使用该数据库。

要进一步调查，请执行以下操作：

```
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

您将看到 MySQL 返回的实际错误。

此外，就像有人建议的那样，您可以考虑学习新的（和更好的）数据库交互范例，例如[`PDO`](http://php.net/manual/en/book.pdo.php). `mysql_*`函数是遗留的（已弃用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T19:03:46.893

[PDO](http://php.net/manual/en/book.pdo.php)比. ***_*** _`mysql_`

```
<?php
$db = new PDO('mysql:host=localhost;dbname=my_db', 'username', 'password');
// The next line is only needed if you are using prepared statements,
// see the next block of code below
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$query = $db->query('SELECT name FROM card');
$rows = $query->fetchAll();
foreach($rows as $row) {
    echo $row['name'] . '<br />';
}
?> 
```

***编辑：***如果您使用的是动态查询，则应使用以下内容：

```
<?php
$db = new PDO('mysql:host=localhost;dbname=my_db', 'username', 'password');
// Turn off prepare emulation, *this is good practice*
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$query = $db->prepare('SELECT name FROM card WHERE id = ?');
$query->execute(array($_GET['id']));
$rows = $query->fetchAll();
foreach($rows as $row) {
    echo $row['name'] . '<br />';
}
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-16T18:47:24.813

尝试以下方法，看看它是否对您有帮助。它有更多的错误报告。

```
mysql_select_db("my_db", $conn);

$result = mysql_query("SELECT name FROM card") or die(mysql_error());

if (mysql_num_rows($result) > 0)
{
    while($row = mysql_fetch_array($result))
        {
        echo $row['name'];
        echo "<br />";
        }
}
else{
    echo 'There were no results found.';
} 
```

# objective-c - Objective-C 委托功能无法正常工作

> ID：12449605
> 
> 赞同：0
> 
> 时间：2012-09-16T18:40:41.267
> 
> 标签：objective-c, delegates, protocols

我有一个具有三个视图的应用程序。所有三个视图在屏幕底部都有一个广告横幅。第一个视图创建一个音频流媒体，当单击此视图上的广告横幅时，该音频流媒体会暂停。我正在尝试在第二个视图上使用 AdBanner 委托方法来停止/启动音频。选择广告横幅后，AdBanner 委托方法应调用我的自定义委托函数。代码编译并运行，但无法正常运行。

使用 NSLog 我已经确定广告横幅正在正确调用其委托函数，但这不是调用自定义委托。

希望这是有道理的。任何帮助，将不胜感激。这是我的代码。

SecondViewControler H 文件

```
#import "SecondViewController.h"

@protocol demoViewControllerDelegate <NSObject>
@required

-(void)stopSent;
-(void)startSent;

@end

@interface SecondViewController ()
{    
    id<demoViewControllerDelegate> delegate;
}    
@property (nonatomic, assign) id<demoViewControllerDelegate> delegate;
@end 
```

SecondViewController M 文件

```
@implementation SecondViewController
@synthesize delegate; 
```

协议

```
- (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave {
    [delegate stopSent];
    return YES;
}

- (void)bannerViewActionDidFinish:(ADBannerView *)banner{
[delegate startSent];
} 
```

FirstViewController H 文件

```
#import <QuartzCore/QuartzCore.h>
#import "iAd/iAd.h"
#import <MessageUI/MessageUI.h>
#import "AudioStreamer.h"
#import "Reachability.h"
#import "SecondViewController.h"
#import "MFAppDelegate.h"
#import "MFSideMenu.h"

Class secondViewConroller;

@interface DemoViewController : UIViewController <ADBannerViewDelegate,demoViewControllerDelegate> {
}

@end 
```

FirstViewController M 文件

```
-(void)stopSent{
    if (isPlaying) {
        [streamer stop];
        wasPlaying=true;
    }
}

-(void)startSent{
    if (wasPlaying) {
        [streamer start];
         isPlaying=true;
    }
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:09:24.927

您的协议方法需要在您指定为委托目标的类中实现。

看起来您的 DemoViewController（或 FirstViewController）是您指定为委托的对象，因为您已为接口指定了“ `<ADBannerViewDelegate,demoViewControllerDelegate>`”名称。

然后，从您的第二个视图控制器中，您可以调用您指定的对象并将其设置为委托：

```
[delegate startSent]; 
```

和

```
[delegate stopSent]; 
```

在适当的位置，它们分别显示为“ `bannerViewActionShouldBegin`”和“ `bannerViewActionDidFinish`”。

您还应该确保代理设置正确，因此而不是：

```
[delegate startSent]; 
```

你**实际上**应该这样做：

```
if(delegate)
    [delegate startSent];
else
    NSLog( @"delegate is null; we should figure out why" ); 
```

# c++ - 提升 ASIO async_read_some

> ID：12449611
> 
> 赞同：5
> 
> 时间：2012-09-16T18:41:02.930
> 
> 标签：c++, networking, boost, boost-asio

我在实现一个简单的 TCP 服务器时遇到了困难。以下代码取自[boost::asio 示例](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_asio/examples.html)，准确地说是“Http Server 1”。

```
void connection::start() {
    socket_.async_read_some(
            boost::asio::buffer(buffer_),
            boost::bind(
                &connection::handle_read, shared_from_this(),
                boost::asio::placeholders::error,
                boost::asio::placeholders::bytes_transferred
            )
        );
}
void connection::handle_read(const boost::system::error_code& e, std::size_t bytes_transferred) {
        if (!e && bytes_transferred)    {
                std::cout << " " << bytes_transferred <<"b" << std::endl;
                data_.append(buffer_.data(), buffer_.data()+bytes_transferred);

                //(1) what here?                
                socket_.async_read_some(
                    boost::asio::buffer(buffer_), 
                    boost::bind(
                        &connection::handle_read, shared_from_this(),
                        boost::asio::placeholders::error,
                        boost::asio::placeholders::bytes_transferred
                    )
                ); 

            }
            else// if (e != boost::asio::error::operation_aborted)
            {
                std::cout << data_ << std::endl;
                connection_manager_.stop(shared_from_this());
            }
        } 
```

在原始代码中，`buffer_`足够大以保留整个请求。这不是我需要的。我已将大小更改为 32 字节。

服务器编译并监听 localhost 的 80 端口，所以我尝试通过我的网络浏览器连接到它。

现在如果语句 (1) 被注释掉，那么只有请求的前 32 个字节被读取并且连接挂起。网络浏览器一直在等待响应，服务器确实......我不知道是什么。

如果 (1) 未注释，则读取整个请求（并添加到`data_`），但它永远不会停止 - 我必须在浏览器中取消请求，然后该`else { }`部分才会运行 - 我在标准输出上看到我的请求。

**问题1：**我应该如何处理一个大的请求？
**问题2：**我应该如何缓存请求（目前我将缓冲区附加到一个字符串）？
**问题3：**如何判断请求已经结束？在 HTTP 中总是有响应，所以我的网络浏览器一直在等待它并且没有关闭连接，但是我的服务器如何知道请求已经结束（可能关闭它或回复一些“200 OK”）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T21:26:27.577

假设浏览器向您发送 1360 字节的数据，您说`asio`要将一些数据读入缓冲区，但您说它只有 32 字节。然后第一次调用它时，您的处理程序将以 32 字节的数据开头调用。在这里，如果您评论 (1)，那么浏览器会尝试发送其其余数据（实际上浏览器已经发送了它，并且它在操作系统缓冲区中等待您从那里窥视它），您可能会`io_service::run`因为一些奇迹而被阻止！

如果您在说循环开始时取消注释（1），则读取第一个块，然后读取下一个块，然后...直到浏览器发送的数据完成，但是在那之后，当您说`asio`要读取更多数据时，它将等待一些永远不会来自浏览器的数据（因为浏览器已经发送了它的信息并且正在等待你的回答），当你取消来自浏览器的请求时，它将关闭它的套接字，然后你的处理程序将被调用，并显示一个错误说我无法读取更多数据，因为连接已关闭。！！

但是你应该在这里做的是：你应该学习`HTTP`格式，从而知道你的浏览器发送给你的数据是什么，并为它提供一个好的答案，然后你与客户端的通信将继续进行。在这种情况下，缓冲区的结尾是`\r\n\r\n`，当您看到它时，您不应再读取任何数据，您应该处理到目前为止所读取的内容，然后向浏览器发送响应。

# jquery - 滚动时隐藏 div 并在鼠标悬停时显示

> ID：12449621
> 
> 赞同：0
> 
> 时间：2012-09-16T18:42:34.890
> 
> 标签：jquery, show-hide

我想在页面顶部显示标题，并在滚动时将其隐藏，就像[这个网站](http://divide.comyr.com/divide_by_two.html)一样；而且我还想在`mouseover`. 但我是一名设计师，而不是一名程序员，并且正在努力让它发挥作用。

我到目前为止的代码：

```
$(document).ready(function() {
$('#header').mouseover( function() {
        $(this).find('.action').show();
    });
});
$(window).scroll(function(){
    if ($(this).scrollTop() > 600) {
        $('#header').fadeOut();
    } else {
        if ($(this).scrollTop() > 100) {
            $('#header').fadeIn();
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:49:45.283

或者您可以使用标题的不透明度。这是一个使用您的模板的工作示例：[**demo jsFiddle**](http://jsfiddle.net/6URKw/embedded/result/)

**JAVASCRIPT**

```
var header, op = 1;

$(function(){
    header = $("#header");
    header.hover(
        function(){ $(this).fadeTo("fast", 1); },
        function(){ if (!op) $(this).fadeTo("fast", 0); }
    );
});
$(window).scroll(function(){
    if ($(this).scrollTop() > 600 && op == 1) {
        header.fadeTo("slow", 0);
        op = 0;
    } else {
        if ($(this).scrollTop() <= 600 && op == 0) {
            header.fadeTo("slow", 1);
            op = 1;              
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:32:51.323

在标题 div 的顶部创建一个透明的假 div 并设置默认显示=隐藏。然后在隐藏标题时简单地显示它。这样你的鼠标悬停效应就会起作用。在显示标题时也要隐藏 div，否则您将无法单击标题中的链接。

这是代码示例

```
$(document).ready(function() {
$('#transparent_div').mouseover( function() {
         $('#header').fadeIn();
    });
    $('#transparent_div').mouseleave( function() {
         $('#header').fadeOut();
    });

});
$(window).scroll(function(){
    if ($(this).scrollTop() > 600) {
    $('#transparent_div').show();
        $('#header').fadeOut();
    } else {
        if ($(this).scrollTop() > 100) {
    $('#transparent_div').hide();
            $('#header').fadeIn();
        }
    }
}); 
```

# c++ - 在 Qt 中的线程之间发送对象作为信号参数

> ID：12449624
> 
> 赞同：1
> 
> 时间：2012-09-16T18:42:42.743
> 
> 标签：c++, qt

我是 Qt 的新手，正在尝试学习 Qt 线程机制。我的情况是，我希望后台线程执行一些长时间运行的任务，并在处理完每 100 个项目后将结果报告给另一个（或主）线程。现在，我通过从后台线程发出一个信号来执行此操作，该信号包含在主线程的插槽中接收到的已处理对象的列表。Qt 在插槽中接收到信号参数时是否会复制它？如果是这样，呼叫如何`qRegisterMetaType`帮助解决这个问题？这就是我要在我的代码中完成的事情：

```
//background thread
void run(){
   //get a query object from database
   int fireCount = 0;
   QList< QList<QVariant> > data;
   while(query->next()){
        fireCount++;
        QList<QVariant> row;
        //do some calculations on the fields read from the query
        processRow(query,&row);
        data.append(row);
        if(fireCount>100){
            emit publishDataToMainThread(data);
            fireCount = 0;
            data.clear();
        }
   }

}

//slot in main thread
void receiveData(QList< QList<Qvariant> > data){
\\display the data
} 
```

另外，这是在线程之间传输对象的推荐做法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T07:21:22.150

这是一个非常好的方法。QList 使用隐式共享（即写入时复制），因此复制它意味着复制一个指针并增加引用计数。只有在您尝试修改它时才会复制它。只需记住在将信号连接到插槽时使用[Qt::QueuedConnection](http://doc.qt.nokia.com/4.7-snapshot/qt.html#ConnectionType-enum)，以便插槽在接收者线程中运行。

`qRegisterMetaType`或者`Q_DECLARE_METATYPE`是需要的，以便您可以在信号中按值传递参数。它告诉 Qt 元类型系统（有点像反射）这种类型存在。

# ubuntu - 尝试使用 RSA 密钥通过 SSH 连接到 EC2，获取：不正确的 RSA1 标识符...权限被拒绝（公钥）

> ID：12449626
> 
> 赞同：26
> 
> 时间：2012-09-16T18:42:46.227
> 
> 标签：ubuntu, ssh, amazon-ec2, amazon-web-services

我在 Amazon EC2 上创建了一个 Ubuntu 12.04 实例。

我已经下载了 PEM 文件并且能够通过 SSH 连接到实例，没问题。

现在，我想在远程实例上为顾问等创建一些帐户。他们应该能够使用 RSA 密钥 ssh 进入盒子。在 EC2 机器上，我在 ~/home/ 中设置了几个帐户，并将它们分配给组 admin。我也给自己一个类似的帐户（MyTestAccount）进行测试。这就是我所做的：

我使用 key-gen 在本地机器 (~/.ssh) 上的 .ssh 目录中创建公钥和私钥：

```
drwx------  2 peter peter 1024 Sep 14 10:23 .ssh 
```

和里面的文件：

```
-rw-------  1 peter peter 1675 Sep 14 10:23 id_rsa
-rw-------  1 peter peter  394 Sep 14 10:23 id_rsa.pub
-rw-------  1 peter peter  444 Sep 14 00:05 known_hosts 
```

然后，我将 id_rsa.pub 文件 SCP 到我的远程 EC2 实例中，并将其附加到我的远程实例中的 .ssh/authorized_keys 文件中。我的远程 .ssh 目录的权限：

```
drwx------ 2 ubuntu ubuntu 4096 Sep 16 16:13 .ssh 
```

而我的 authorized_keys 文件：

```
-rw-------  1 peter ubuntu  1179 Sep 14 00:05 authorized_keys 
```

接下来，我注销了我的远程实例并尝试使用新密钥通过 SSH 连接到远程机器。当我发出以下命令时：

```
peter@ubuntu:~/.ssh$ ssh -vvv MyTestAccount@ec2-XX-XXX-XX-XXX.compute-1.amazonaws.com 
```

我得到以下。我的私钥好像有问题？有什么建议么？谢谢。

```
OpenSSH_5.9p1 Debian-5ubuntu1, OpenSSL 1.0.1 14 Mar 2012
debug1: Reading configuration data /etc/ssh/ssh_config  
debug1: /etc/ssh/ssh_config line 19: Applying options for *  
debug2: ssh_connect: need priv 0
debug1: Connecting to ec2-XX-XXX-XX-XXX.compute-1.amazonaws.com [XX.XXX.XX.XXX] port 22\.  
debug1: Connection established.  
debug3: Incorrect RSA1 identifier  
debug3: Could not load "/home/peter/.ssh/id_rsa" as a RSA1 public key 
debug1: identity file /home/peter/.ssh/id_rsa type 1
debug1: Checking blacklist file /usr/share/ssh/blacklist.RSA-2048 
debug1: Checking blacklist file /etc/ssh/blacklist.RSA-2048
debug1: identity file /home/peter/.ssh/id_rsa-cert type -1  
debug1: identity file /home/peter/.ssh/id_dsa type -1  
debug1: identity file /home/peter/.ssh/id_dsa-cert type -1  
debug1: identity file /home/peter/.ssh/id_ecdsa type -1 
debug1: identity file /home/peter/.ssh/id_ecdsa-cert type -1 
```

[剪辑...]

```
debug2: we sent a publickey packet, wait for reply  
debug1: Authentications that can continue: publickey  
debug1: Trying private key: /home/peter/.ssh/id_dsa  
debug3: no such identity: /home/peter/.ssh/id_dsa
debug1: Trying private key: /home/peter/.ssh/id_ecdsa  
debug3: no such identity: /home/peter/.ssh/id_ecdsa 
debug2: we did not send a packet, disable method
debug1: No more authentication methods to try. **Permission denied (publickey).** 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2013-03-22T06:07:37.363

这种情况很正常，并不奇怪。
你收到的消息：

> debug3：不正确的 RSA1 标识符
> debug3：无法将“/home/user_name/.ssh/id_rsa”加载为 RSA1 公钥

确实并不表示错误。
RSA1 公钥仅用于 SSH 协议 1，该协议已经过时。现在主要使用 SSH 协议 2。

在正常的 SSH 登录过程中，您很可能会看到带有`ssh -vvv`.
你可能会感到惊讶，但别担心，这很正常。

参考：
[https](https://bbs.archlinux.org/viewtopic.php?id=122646) ://bbs.archlinux.org/viewtopic.php?id=122646 ，#9

# jquery - 在复选框选择上使用 jQuery 突出显示行

> ID：12449631
> 
> 赞同：0
> 
> 时间：2012-09-16T18:43:09.057
> 
> 标签：jquery, html, css, checkbox, html-table

选中复选框时，我尝试使用 jQuery 突出显示表中的行。使用此 jQuery 代码相同。

```
$(":checkbox").change(function() {
    $(this).closest("tr").toggleClass("highlight", this.checked);
}); 
```

我只对备用行正确。我使用以下 CSS 来设置表格中的备用行的样式。

```
.tables tbody tr:nth-child(2n){
    background-color:#F9F9F9;
} 
```

我怎样才能突出偶数行呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:49:02.487

只需将此样式添加到您的 css 文件中

```
.tables tr.highlight td {
  background-color: #FFF9DC;
} 
```

问题是您的偶数行样式会覆盖突出显示样式。所以你应该做的就是让你的突出风格更重要。

# android - 哎呀！很遗憾，该商家不再接受通过 Google 进行的付款。我们对不便表示抱歉

> ID：12449633
> 
> 赞同：2
> 
> 时间：2012-09-16T18:43:21.350
> 
> 标签：android

当我尝试为 Google Play 控制台开发者帐户支付 25 美元时，出现此消息“糟糕！不幸的是，该商家不再接受通过 Google 付款。对于给您带来的不便，我们深表歉意。”

谁能解释一下！这是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T18:52:23.497

不幸的是，许多成员都遇到了这个错误。谷歌没有亲自对此发表评论。这可能是因为结帐服务器故障、维护，或者他们正在完全致力于实施新的东西，比如从 android market 到 google play。

所有这些都只是可能性，在谷歌亲自声明原因之前，一切都无法确定，但既然是谷歌，结果将是甜蜜的:-)

希望有帮助。:-)

# c# - 如何每天在 Windows 服务中检查许可证

> ID：12449639
> 
> 赞同：-4
> 
> 时间：2012-09-16T18:44:16.030
> 
> 标签：c#, windows-services

> **可能重复：**
> [将 DispatcherTimer 与 Windows 服务一起使用](https://stackoverflow.com/questions/12449503/use-dispatchertimer-with-windows-service)

我想每天在我的 Windows 服务中检查许可证我尝试使用`DispatcherTimer`但不工作这是我试图做的

```
 public OIMService()
    {
        InitializeComponent();
        _dispatcherTimer = new DispatcherTimer();
        this.ServiceName = "OIMService";
        if (!System.Diagnostics.EventLog.SourceExists("OIM_Log"))
        {
            EventLog.CreateEventSource("OIM_Log", "OIMLog");
        }
        EventLog.Source = "OIM_Log";
        EventLog.Log = "OIMLog";
        _sc = new ServiceController("OIMService");
        _helpers = new ValidationHelpers();
        StartTimer();

    }

  private void StartTimer()
        {
            _dispatcherTimer.Tick += new EventHandler(DispatcherTimerTick);
            _dispatcherTimer.Interval = new TimeSpan(0, 0, Convert.ToInt32(time));
            _dispatcherTimer.IsEnabled = true;
            _dispatcherTimer.Start();
        }

    private void DispatcherTimerTick(object sender, EventArgs e)
    {
        var helpers  = new ValidationHelpers();
        if (!helpers.IsValid())
            this.Stop();

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:56:05.013

您可以像这样使用新线程：

```
 bool cancelJob = false;

    ThreadStart ts = new System.Threading.ThreadStart(CheckLicence);
    Thread thMain = new System.Threading.Thread(ts);
    thMain.Start();

    void CheckLicence()
    {
        //you can use cancelJob to break the thread...
        while (!this.cancelJob)
        {
            //TODO: code to check your licence...

            //sleep for 1 hour...
            System.Threading.Thread.Sleep(3600000);
        }
    } 
```

当您想停止服务时，请确保您也终止线程，如下所示：

```
 thMain.Abort(); 
```

# java - 返回一个文本字符串作为响应 struts2

> ID：12449642
> 
> 赞同：2
> 
> 时间：2012-09-16T18:45:06.710
> 
> 标签：java, string, struts2

大家好，我得到了一个从 struts2 动作类获取字符串/文本作为响应的教程。它来自 struts2 文档，链接是[教程](http://struts.apache.org/2.2.3/docs/how-can-we-return-a-text-string-as-the-response.html)。这是工作。但我的问题是 StringBufferInputstream 类已被弃用。那么我们可以使用这个类吗？如果没有，那么有什么替代方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:40:43.097

你可以这样尝试：

```
import org.apache.struts2.ServletActionContext;
import java.io.PrintWriter;
import com.opensymphony.xwork2.Action;
import com.opensymphony.xwork2.ActionSupport;

public class MyStringAction extends ActionSupport {

      @Override
      public String execute() throws Exception
      {
        PrintWriter out = ServletActionContext.getResponse().getWriter();
        out.write("Your String!");
        return Action.NONE;
      }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:25:51.260

首先，该示例更多地是关于文件下载内容和处理流结果。 `StringBufferInputstream`已被弃用，您可以使用它的替代品。我不确定您正在使用什么样的东西，如果您不使用文件下载的东西，我不建议您将流结果用于其他东西。

对于 Ajax，您可以使用简单的 Jquery 并查看如何调用 Struts2 操作以及响应如何返回到 JSP 页面。

开始，建议看以下官方文档

*   [Struts2 指南](http://struts.apache.org/2.3.3/docs/guides.html)
*   [Struts2 教程](http://struts.apache.org/2.3.3/docs/tutorials.html)

希望这会给你一些想法。

# ruby-on-rails - 使用类似 HQL 的语法的“where”查询？

> ID：12449644
> 
> 赞同：2
> 
> 时间：2012-09-16T18:45:25.647
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我是 Hibernate 的 HQL 语法的粉丝，它可以让我形成遍历模型关系的查询，例如：

```
from Book book where book.publisher.lastName = 'jones'
from Book book where book.chapters.length = 2 
```

是否有用于遍历这样的模型的 ActiveRecord 语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:18:12.417

我认为您与 ARel 最接近的是：

```
Book.joins(:publisher).where('publishers.lastName = ?', 'Jones') 
```

或者

```
Book.where(:publisher_id => Publisher.where(:last_name => 'Jones')) 
```

（这可能效率较低，因为它将两次而不是一次访问数据库）

和

```
Book.joins(:chapters).group('books.id').having('count(chapters) = ?', 2) 
```

我承认这有点不可读。

有一些宝石，[Squeel](https://github.com/ernie/squeel)是我想到的一种，它可以让您以各种方式更改查询语法 - 其中一种可能会感觉更接近您想要使用的内容。

# .htaccess - 是否可以使用 .htaccess 文件删除 URL 末尾的“文件夹”？

> ID：12449648
> 
> 赞同：0
> 
> 时间：2012-09-16T18:45:45.413
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, yii

所以我有一堆网址

```
http://foo.com/people/smith/john/1
http://foo.com/people/cartman/eric/2
http://foo.com/people/simpson/bart/3 
```

我想像这样更改网址

```
http://foo.com/people/smith/john/
http://foo.com/people/cartman/eric/
http://foo.com/people/simpson/bart/ 
```

所以基本上，我认为我需要编写一个条件来查找文件夹“people”并从 URL 中删除第三个目录。这对我的 .htaccess 可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:06:25.130

在文档根目录的 htaccess 文件中，尝试：

```
RewriteEngine On
RewriteRule ^people/([^/]+)/([^/]+)/.+ /people/$1/$2 [L,R=301] 
```

这会将浏览器（更改地址栏中的 URL）从

*   [http://foo.com/people/smith/john/1](http://foo.com/people/smith/john/1)

至

*   [http://foo.com/people/smith/john/](http://foo.com/people/smith/john/)

如果您不想更改浏览器地址栏中的 URL，请`,R=301`从方括号中删除 。

# iphone - 如何将图形旋转或调整为横向？

> ID：12449649
> 
> 赞同：1
> 
> 时间：2012-09-16T18:46:24.710
> 
> 标签：iphone, core-plot, landscape

我已经敲了将近半天的头，但仍然无法识别解决方案。如果这是一个蹩脚的问题，请原谅我......

**目标：**无论设备的方向如何，始终以横向模式显示我的图表。我希望我的 x 轴和 y 轴如图所示[显示](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2/screen-shot-2012-05-07-at-5-29-31-pm)。x 轴比 y 轴占用更多空间来显示更多数据有多好，但没有提到作者是如何做到这一点的。

我现在所拥有的是：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return YES;
} 
```

同样在 中`viewDidLoad`，我尝试将我的视图旋转 -90 度：

```
self.view.transform = CGAffineTransformMakeRotation(-(M_PI * (90) / 180.0)); 
```

加载时，我的视图如下所示，`Date`x 轴和`Calories Burned`y 轴在哪里。

![查看负载图](../Images/e0a5b869dda86efe1ebe7520ac1b8ba7.png)

当我旋转模拟器时，它看起来很奇怪：

![查看模拟器旋转](../Images/73803d744b869f4f545ce730fb09e367.png)

有人可以告诉我如何调整这个东西吗？非常感谢。

* * *

*收到正确答案后编辑：我还要提到的一件事是，要解决我在图 2 中提到的问题，只需编写：

```
myHostingGraph.autoresizingMask = (UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight); 
```

这是一条非常重要的线，可以让定向工作更漂亮。参考来自：[stackoverflow.com/a/10954432/437146](https://stackoverflow.com/questions/7569580/how-to-rotate-bar-chart-like-the-example-cpttestapp-iphone-provided-in-core-pl/10954432#10954432)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:30:57.240

为什么不将整个 UIViewController 设置为仅横向：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
   if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
              return (interfaceOrientation != UIInterfaceOrientationPortrait && interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
   }
    else return YES;
} 
```

如果你真的想要，当他们把它变成肖像时，只需变换/旋转标签并将它移动到你的图表上方，`IBOutlet UILabel *yourLabel;` `yourLabel.center=CGPointMake(yourGraph.center.x, 10);`

# comments - Wordpress：在单独的页面上显示评论

> ID：12449652
> 
> 赞同：0
> 
> 时间：2012-09-16T18:46:39.210
> 
> 标签：comments, wordpress, wordpress-theming

我需要在单独的页面上显示评论，在页面本身上，所以只会有指向评论页面的链接，比如 www.example.com/my-post/comments （也可以有 /my-post/comments /name-of-some-comment 为每条评论）。

任何想法，我该怎么做？例如一些插件？我还没有找到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:48:34.200

您不需要任何插件。基本上你只需要复制已经有帖子/页面正文和评论的帖子或页面模板，然后删除除评论之外的所有内容。

检查 wordpress 法典：

*   [模板标签](http://codex.wordpress.org/Template_Tags)
*   [自定义页面模板](http://codex.wordpress.org/Theme_Development#Custom_Page_Templates)
*   [基于查询的模板文件](http://codex.wordpress.org/Theme_Development#Query-based_Template_Files)
*   [条件标签](http://codex.wordpress.org/Conditional_Tags)

您很可能需要创建自己的条件标签，或者只检查特定的查询字符串 (GET) 参数并应用您的自定义模板

# java - 可点击的电子邮件地址作为 Java 中的 JLabel

> ID：12449654
> 
> 赞同：1
> 
> 时间：2012-09-16T18:47:09.960
> 
> 标签：java, swing, email, jlabel, clickable

对于我的应用程序的“关于”对话框，我有一个使用 html 标记定义的 JLabel，如下所示：

```
JLabel myEmail = new JLabel(
    "<html><br><font size=2><a href=mailto:abc.pqr@xyz.com>abc.pqr@xyz.com</a>" +
    "</font></html>");` 
```

我希望单击此按钮`JLabel`时，默认电子邮件客户端（例如 Outlook）会打开，其中`To`填充为`abc.pqr@xyz.com`和`subject`作为预定义文本（例如`Hi!`）的字段。

怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:04:10.983

这是有关如何执行此操作的片段：

```
String address = "abc.pqr@xyz.com"; // global

JLabel label = new JLabel("<html><br><font size=2><a href=#>" + address + "</a></font></html>");
label.setCursor(Cursor.getPredefinedCursor(Cursor.HAND_CURSOR));
label.addMouseListener(new MouseAdapter() {
    @Override
    public void mouseClicked(MouseEvent e) {
        try {
            Desktop.getDesktop().mail(new URI("mailto:" + address + "?subject=Hello"));
        } catch (URISyntaxException | IOException ex) {
            // ...
        }
    }
}); 
```

出于演示目的，`address`变量在这里是全局的，但您应该使用具体的`MouseAdapter`子类来传递关联的电子邮件地址。最好避免尝试解析 HTML。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T18:51:58.023

不幸的是，默认情况下，JLabel 中的 HTML 链接不是“可点击的”。请参阅此主题：[如何在 JLabel 中添加超链接](https://stackoverflow.com/questions/527719/how-to-add-hyperlink-in-jlabel)。它包含您可能需要了解的有关此主题的所有信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:30:26.647

或者，如果您不介意使用额外的库，可以考虑使用`JXHyperLink`SwingX 项目中的

# javascript - 如何传递我正在使用 jquery-ajax 的这个特定变量

> ID：12449655
> 
> 赞同：-1
> 
> 时间：2012-09-16T18:47:14.047
> 
> 标签：javascript, ajax, jquery

我想将“passedThisValue”传递给我的“start_battle”函数并在“Rematch”中使用“start_battle”函数。但是模态只是挂起为什么会发生这种情况？有什么问题？请帮忙！：） 谢谢。

代码：

```
function start_battle(){
    $.ajax({
        data: {
            receivePassedValue: passedThisValue
        },
        success: function(data){

        }
    });
}
$("#start_battle").click(function() {
    $.ajax({
        success: function(data){
            var toAppend = '';
            if(typeof data === "object"){
                var passedThisValue = '';
                for(var i=0;i<data.length;i++){
                    passedThisValue = data[i]['thisValue']; 
                }

                start_battle(); // can I still get the passedThisValue?

            }
        }
    });
    $("#battle").dialog({
        modal:true,
        buttons: {
            "Rematch": function(){
                start_battle(); // can I still get the passedThisValue?
            }
        }
    });
    $("#battle").show(500);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:29:30.353

当你调用一个函数时，你不使用`function start_battle();`，你只是使用`start_battle();`.

将值传递给函数时，需要使用以下语法：`start_battle(param1, param2);`.

当你想从一个函数中获取一个值时，你需要在函数中返回它，像这样：

```
function start_battle(param1) {
    // Do something
    return param1;
} 
```

当您想存储函数的返回值时，您可以执行以下操作：`var returned = start_battle(param1);`

事实上，您不知道模式为什么会挂起，这意味着您没有检查浏览器的错误控制台，它可以保存一些非常重要的错误信息。尝试检查并在此处发布，以便我们查看当前问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:28:07.390

你的函数声明似乎有点不对劲。我认为你应该离开`$`from `function`。就这样做

```
function start_battle() { 
```

另外，当你调用一个函数时，你不要`function`在它之前说。如果你想向函数传递一个值，你必须把它放在括号内，无论是在定义函数时还是在调用它时。像这样

```
function start_battle(someValue) {
    // do some stuff with someValue
}

// inside your .click, call start_battle like this
start_battle(passedThisValue); 
```

很基本的东西。但是这些问题中的任何一个都可能导致挂起，这很可能是一个 javascript 错误。

# html - 图像背景在站点中间重复 y

> ID：12449657
> 
> 赞同：0
> 
> 时间：2012-09-16T18:47:20.707
> 
> 标签：html, css

我试图通过我的网站重复“背景”。必须正好在中间，并且高度为 100%。已经尝试过绝对位置 + 25% 的边距，但是当我缩放时，网站崩溃了。知道如何实现这种效果吗？
现在我将它添加到正文中，并且在 Chrome 和 Safari 中运行良好，但在其他中则不行。

```
<body style="background:url('sheets/image_assets/parchment.png') repeat-y 50%"> 
```

哦，我正在使用：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"
"http://www.w3.org/TR/REC-html40/loose.dtd"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:13:09.373

```
background: url(your-background-image.jpg) repeat-y 50% 0; 
```

应该可以在`body`任何浏览器中使用。

[演示](http://dabblet.com/gist/3733879)

另外，尝试只使用`<!DOCTYPE html>`

# c# - 将 js 值作为参数发送给 js 函数

> ID：12449663
> 
> 赞同：1
> 
> 时间：2012-09-16T18:47:36.527
> 
> 标签：c#, javascript, jquery, json

我在[这里](https://stackoverflow.com/questions/12440154/sending-value-from-one-js-function-to-another-as-parameter)发布了问题并且答案是正确的，但我不是很清楚。在初始化页面加载一切正常，但我需要使用日期参数作为参数调用。

所以这很好

```
$('#myDate').click(function () { 
     var date = getDate();
  }) 
```

但我应该把这个日期寄给

```
 $('#dataTable').dataTable({
... 
```

**更新**

`Ok, I'm simplifying this,`

```
$('#dataTable').dataTable({    
... 
```

在页面加载时获取 myDate 值并将该值发送到控制器。这可以。问题是当页面加载用户选择其他日期后，我想再次将此数据值发送到 `$('#dataTable').dataTable({..`

希望这有帮助，谢谢

```
 function getDate() {
            var date = $('input[name="myDate"]').val();
            return date;
        };

        $('#myDate').click(function () {
            var date = getDate();            
            return date;
        });

        $('#dataTable').dataTable({
            "bServerSide": true,
            "sAjaxSource": "/Home/Ajax",
            "fnServerParams": function (aoData) {
                var date = getDate();
                aoData.push({ "name": "myDate", "value": date });
            }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:11:07.667

也许是这样的？

```
function getDate() {
    var date = $('input[name="myDate"]').val();
    return date;
}

$('#myDate').click(updateDate);

function updateDate() { 
    $('#dataTable').dataTable({
        "bServerSide": true,
        "sAjaxSource": "/Home/Ajax",
        "fnServerParams": function (aoData) {
            var date = getDate();
            aoData.push({ "name": "myDate", "value": date });
        },
        //... I assume there's more
}

updateDate(); 
```

# c - 如何删除字符串中的换行符

> ID：12449664
> 
> 赞同：0
> 
> 时间：2012-09-16T18:47:40.000
> 
> 标签：c, string

我想删除字符串中的换行符 '\n'。

```
 char *string ="hallo\n";

    int i=0;
    int length = sizeof(string);

    while(i<length)
    {
        if(string[i+1] == '\n')
        {
            string[i+1] = '\0';
            break;
        }   
        i++;
    }

    printf("%s",string);
    printf("world"); 
```

我知道我可以生成一个新数组，它的工作原理是这样的

```
char *string ="hallo\n";

int i=0;
int length = sizeof(string);
int lengthNew = length -1;
 char newStr[lengthNew];
    while(i<length)
    {
        printf("Char ist %c:",string[i]);
        newStr[i] = string[i];
        if(string[i+1] == '\n')
            break;
        i++;
    } 
```

但是，如果我只能替换旧数组中的一个字符，为什么还要使用堆栈呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:07:15.300

根据您的评论，我提供了一个完全不同但更好的解决方案[`strftime`](http://linux.die.net/man/3/strftime)：

```
time_t clock = time(NULL);

char buf[1024];

strftime(buf, sizeof buf, "%c", localtime(&clock);

printf("The date is: %s\n", buf); 
```

格式与 使用的`%c`相同`ctime`，但`strftime`更灵活。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T18:53:48.427

如果换行符始终是字符串的最后一个字符，则可以像描述的那样对其进行编码。

否则，您必须创建第二个字符缓冲区并将字符复制到第二个缓冲区。原因是在 C 中，`\0`字符标记了字符串的结尾。

如果您有这样的字符串：`"this \n is \n a \n test"`，那么替换后的内存将如下所示：`"this \0 is \0 a \0 test"`。大多数 C 程序将简单地将其解释为字符串`"this "`并忽略第一个 null 之后的所有内容。

**编辑** 正如其他人指出的那样，您的代码也存在其他问题。sizeof() 将返回字符指针的大小，而不是字符串的长度。也无法修改只读字符串文字。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-16T18:54:27.753

```
char *string = ctime(&myTimeT);
char *c = strrchr(string, '\n');

if (c != NULL)
    *(c) = '\0'; 
```

# iphone - SQLite 核心数据性能随时间变化

> ID：12449667
> 
> 赞同：1
> 
> 时间：2012-09-16T18:48:09.410
> 
> 标签：iphone, ios, performance, sqlite, core-data

我正在为我目前正在开发的 iPhone 应用程序使用 SQLite 支持的核心数据存储。

我想知道如何在 iPhone 上使用 SQLite 处理数据库维护？基于服务器的 RDBMS 系统通常需要定期进行碎片整理和统计更新等，以确保一致的性能。我不确定这在移动设备上是如何处理的。

这在 iOs 和 SQLite 中是如何处理的？开发人员有什么需要做的，还是全部自动处理？

我的数据库最多包含 100,000 条记录，每天大约有 500 次插入或删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T23:32:18.967

SQLite 具有[`ANALYZE`](http://www.sqlite.org/lang_analyze.html)更新统计信息的命令，但它不太可能在像您这样的小型数据库中产生太大影响。您可以检查[`EXPLAIN QUERY PLAN`](http://www.sqlite.org/eqp.html)是否有任何区别。（无论如何，它不会受到伤害。）

要进行碎片整理，您可以使用该[`VACUUM`](http://www.sqlite.org/lang_vacuum.html)命令。但是，在基于闪存的存储上，碎片问题远比数据库因完全重组而阻塞的问题要小得多。

在实践中，数据库维护几乎不值得在手持设备上费心。

# php - $this 不在数据库连接基类的对象上下文中

> ID：12449668
> 
> 赞同：0
> 
> 时间：2012-09-16T18:48:11.073
> 
> 标签：php, mysql, oop, this

我试图让它工作，但它一直给我一个关于 $this 不在该行的对象上下文中的错误：

```
echo $this->db->query("SELECT * FROM enquiries") ; 
```

我哪里错了？:(

```
class CoreModel {
protected $db ;

function __construct()
{
    try{
        $this->db = new PDO("mysql:host=localhost;dbname=database", "user", "pass") ;
        $this->db->exec('set names utf8') ;
        $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_WARNING);
        $this->db->setAttribute(PDO::ATTR_PERSISTENT, TRUE) ;
    }
    catch(PDOEXCEPTION $e)
    {
        echo $db->errorCode ;
        die() ;
    }
}

function test()
{
    echo $this->db->query("SELECT * FROM enquiries") ;
}

function __destruct()
{
    $this->db = NULL ;
}
}

echo CoreModel::test() ; 
```

* * *

谢谢，我知道我错过了一些明显的东西！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T18:50:26.527

如果你`$this`不创建 CoreModel 类的实例，你就没有。您不能静态调用此函数。

使用运算符创建实例`new`：

```
$db = new CoreModel();
$db->test(); 
```

# r - 使用 RJSONIO 在 R 中解析深度嵌套的 JSON 结构

> ID：12449670
> 
> 赞同：5
> 
> 时间：2012-09-16T18:48:18.023
> 
> 标签：r

我怀疑我在这里遗漏了一些明显的东西，但是如何使用 R 解析深度嵌套的结构`RJSONIO`？

例如 - 假设我想直接引用 $familyName in `results.data.json$MRData$RaceTable$Races[[1]]$Results[[8]]$Driver`as 使用以下代码段抓取：

```
require(RJSONIO)
resultsURL='http://ergast.com/api/f1/2012/1/results.json'
results.data.json=fromJSON(resultsURL) 
```

`RJSONIO`似乎不想将`..$Results[[i]]`数据解析为结构化元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T08:03:18.123

```
require(RJSONIO)

somedata1<-list(a=1,b='w')
fromJSON(toJSON(somedata1))
# $a
# [1] 1

# $b
# [1] "w"

somedata2<-list(a=1,b=2)
fromJSON(toJSON(somedata2))
# a b 
# 1 2 

somedata3<-list(a='v',b='w')
fromJSON(toJSON(somedata3))
#  a   b 
# "v" "w" 

fromJSON(toJSON(somedata3),simplify=StrictNumeric)
# $a
# [1] "v"

# $b
# [1] "w"

fromJSON(toJSON(somedata2),simplify=FALSE)
# $a
# [1] 1

# $b
# [1] 2

fromJSON(toJSON(somedata3),simplifyWithNames = FALSE)
# $a
# [1] "v"

# $b
# [1] "w"

fromJSON(toJSON(somedata2),simplifyWithNames = FALSE)
# $a
# [1] 1

# $b
# [1] 2 
```

默认情况下，从上面的示例中，RJSON 将“同质标量元素的集合/数组简化为 R 向量”。可以使用`simplify`或来控制这种简化`simplifyWithNames`。在您的示例中，您可以执行以下任何操作来访问所需的元素：

```
require(RJSONIO)
resultsURL='http://ergast.com/api/f1/2012/1/results.json'
results.data.json=fromJSON(resultsURL)
results.data.json$MRData$RaceTable$Races[[1]]$Results[[8]]$Driver['familyName']
# familyName 
#    "Pérez" 

results.data.json=fromJSON(resultsURL,simplify=FALSE)
results.data.json$MRData$RaceTable$Races[[1]]$Results[[8]]$Driver$familyName
# [1] "Pérez"

results.data.json=fromJSON(resultsURL,simplify=StrictNumeric)
results.data.json$MRData$RaceTable$Races[[1]]$Results[[8]]$Driver$familyName
# [1] "Pérez"

results.data.json=fromJSON(resultsURL,simplifyWithNames = FALSE)
results.data.json$MRData$RaceTable$Races[[1]]$Results[[8]]$Driver$familyName
# [1] "Pérez" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T08:39:42.473

该`jsonlite`包是一个分支，`RJSONIO`它尝试在 R 和 JSON 结构之间使用更智能的映射。我认为这可能会让你的生活更轻松：

```
> x = fromJSON('http://ergast.com/api/f1/2012/1/results.json')
> x$RaceTable$Races$MRData$Results[[1]]$Driver
             driverId code                                                   url
1              button  BUT            http://en.wikipedia.org/wiki/Jenson_Button
2              vettel  VET         http://en.wikipedia.org/wiki/Sebastian_Vettel
3            hamilton  HAM           http://en.wikipedia.org/wiki/Lewis_Hamilton
4              webber  WEB              http://en.wikipedia.org/wiki/Mark_Webber
5              alonso  ALO          http://en.wikipedia.org/wiki/Fernando_Alonso
6           kobayashi  KOB          http://en.wikipedia.org/wiki/Kamui_Kobayashi
7           raikkonen  RAI http://en.wikipedia.org/wiki/Kimi_R%C3%A4ikk%C3%B6nen
8               perez  PER        http://en.wikipedia.org/wiki/Sergio_P%C3%A9rez
9           ricciardo  RIC         http://en.wikipedia.org/wiki/Daniel_Ricciardo
10              resta  DIR            http://en.wikipedia.org/wiki/Paul_di_Resta
11             vergne  VER    http://en.wikipedia.org/wiki/Jean-%C3%89ric_Vergne
12            rosberg  ROS             http://en.wikipedia.org/wiki/Nico_Rosberg
13          maldonado  MAL         http://en.wikipedia.org/wiki/Pastor_Maldonado
14              glock  GLO               http://en.wikipedia.org/wiki/Timo_Glock
15                pic  PIC              http://en.wikipedia.org/wiki/Charles_Pic
16        bruno_senna  SEN              http://en.wikipedia.org/wiki/Bruno_Senna
17              massa  MAS             http://en.wikipedia.org/wiki/Felipe_Massa
18         kovalainen  KOV        http://en.wikipedia.org/wiki/Heikki_Kovalainen
19             petrov  PET            http://en.wikipedia.org/wiki/Vitaly_Petrov
20 michael_schumacher  MSC       http://en.wikipedia.org/wiki/Michael_Schumacher
21           grosjean  GRO          http://en.wikipedia.org/wiki/Romain_Grosjean
22         hulkenberg  HUL     http://en.wikipedia.org/wiki/Nico_H%C3%BClkenberg
23               rosa  DLR         http://en.wikipedia.org/wiki/Pedro_de_la_Rosa
24        karthikeyan  KAR       http://en.wikipedia.org/wiki/Narain_Karthikeyan
   givenName  familyName dateOfBirth nationality
1     Jenson      Button  1980-01-19     British
2  Sebastian      Vettel  1987-07-03      German
3      Lewis    Hamilton  1985-01-07     British
4       Mark      Webber  1976-08-27  Australian
5   Fernando      Alonso  1981-07-29     Spanish
6      Kamui   Kobayashi  1986-09-13    Japanese
7       Kimi   Räikkönen  1979-10-17     Finnish
8     Sergio       Pérez  1990-01-26     Mexican
9     Daniel   Ricciardo  1989-07-01  Australian
10      Paul    di Resta  1986-04-16    Scottish
11 Jean-Éric      Vergne  1990-04-25      French
12      Nico     Rosberg  1985-06-27      German
13    Pastor   Maldonado  1985-03-09  Venezuelan
14      Timo       Glock  1982-03-18      German
15   Charles         Pic  1990-02-15      French
16     Bruno       Senna  1983-10-15   Brazilian
17    Felipe       Massa  1981-04-25   Brazilian
18    Heikki  Kovalainen  1981-10-19     Finnish
19    Vitaly      Petrov  1984-09-08     Russian
20   Michael  Schumacher  1969-01-03      German
21    Romain    Grosjean  1986-04-17      French
22      Nico  Hülkenberg  1987-08-19      German
23     Pedro  de la Rosa  1971-02-24     Spanish
24    Narain Karthikeyan  1977-01-14      Indian 
```

# crystal-reports - 如何在 Crystal Reports 中抑制子报表

> ID：12449677
> 
> 赞同：1
> 
> 时间：2012-09-16T18:48:40.610
> 
> 标签：crystal-reports, subreport, suppress

我还是 Crystal Reports 的新手，完全被难住了。我有一个包含 100 个帐户的表（字段是 acct_id 和 sub_ind，对于所有 100 个帐户来说都是“1”）。仅当帐户在桌面上时，我才想取消子报告。我在抑制公式（x-2）中尝试了多种可能性。除了桌面上的帐户之外，我已经为所有人隐藏了整个报告；我已经取消了子报告，除了在子报告所在的位置出现一个框。是否有一种解决方案可以仅针对表中的帐户禁止子报表？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:05:47.227

如果您看到黑框轮廓，请右键单击子报表，转到格式化子报表，单击边框选项卡。将所有线条样式设为“无”。

如果您在自己的部分中有子报告，您可以右键单击屏幕左侧的灰色部分，转到“部分专家”，然后在这些部分下找到子报告所在的部分并单击它。在大约 1/2 处的常用选项卡上，您会看到“抑制空白部分”，单击复选框。

希望这可以帮助。

# c# - 设置 SharePoint Developer 虚拟机

> ID：12449686
> 
> 赞同：1
> 
> 时间：2012-09-16T18:49:48.523
> 
> 标签：c#, .net, sharepoint, windows-7, sharepoint-2010

我是 sharepoint 2010 开发的新手，需要帮助设置开发环境（虚拟机设置）。我有一台新的 Windows 7 笔记本电脑（64 位和 4GB 内存）。

我已经从微软网站下载了 vhd 文件（2010-10a.part01.exe 等）。

我不确定下一步是什么。接下来我需要安装 windows server 2008 r2 吗？这可以在笔记本电脑上使用吗？

我要问的是我需要在我的笔记本电脑上安装“windows server 2008 r2”吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:13:13.353

这是我们用来安装 SharePoint 2010 开发环境的替代指南，如果您愿意，甚至可以在 Windows 7 上完成...

[http://msdn.microsoft.com/en-us/library/ee554869.aspx](http://msdn.microsoft.com/en-us/library/ee554869.aspx) （我们只是在我们的开发环境中使用我们公司的 AD 来处理用户，我猜这不是最佳实践，但从 SharePoint 开始是一个巨大的麻烦 IMO，所以我建议首先选择最简单的解决方案）

您将不需要更多 RAM 用于 VM 开发人员设置。我个人使用 8GB 以上的内存（和 SSD）来运行我正在运行的 Developer VM。

显然，SharePoint 开发（回滚等）可能非常需要虚拟环境。所以使用虚拟机并不是一个糟糕的选择，你的机器不会像现在这样很好地处理它......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T05:25:54.303

一些东西：

首先，他们引用和谈论的虚拟映像需要服务器 2008 hyper-V。因此，您可以在笔记本电脑上临时使用这些图像。（除非您破坏现有操作系统，并在其上安装 hyper-V，并在 hyper-v 之上安装 windows + windows server 2008）。Windows 8 将有一些带有 hyper-v 的版本，但我们暂时不要走这条路。

接下来，值得注意的是，这些基于服务器的系统需要相当多的内存。运行整个 SharePoint 服务器确实是一个非常大的系统。该系统必须有 SQL 服务器，必须运行 Web 服务器，然后有大量需要启动和运行的附加服务，例如工作流、Excel 服务、访问服务、索引服务和多个 Web 服务器，例如管理站点. - 这是短名单！

您至少需要 4 gig 的 ram 才能安装 + 安装 + 设置 SharePoint 2010。事实上，最低要求是 8 gig，但它在 4 gig 中运行得非常好用于测试。

接下来，如前所述，您不能在笔记本电脑上使用免费版 Virtual PC 来运行诸如 2008 r2 这样的虚拟系统，因为 VPC 仅支持 x32 位操作系统作为来宾，并且您需要一个 x64 位 VM 来运行服务器 2008然后 SharePoint 在其上运行。

假设您将您的笔记本电脑提高到 8 个演出，那么您肯定可以免费获得像 Oracle/Suns Virtual box 之类的东西，它确实支持 x64 系统。然后此设置将运行 SharePoint 2010，但您不能使用这些提供的图像，因为它们与 v-box 不兼容（未查看，但 v-box 确实支持来自 VPC 的 VHD 图像，并且它们通常还有其他图像。

可能有一些转换实用程序，但这是另一个问题。

因此，除非您有 8 个演出，并且除非您运行 hyper-V（服务器 2008）作为您的主机系统，否则您不能在笔记本电脑上使用这样的 VM 设置。

使用更多内存，您必须在笔记本电脑上安装 + 设置 hyper-V。

使用您当前的设置，您可以考虑在您的笔记本电脑上安装 + 设置 SharePoint，但是如此大规模的安装将永远对您的笔记本电脑造成如此多的更改，以至于我无论如何都不会考虑在开发盒上进行这样的设置。同样，如果您选择不使用此想法所建议的 VM 技术，则不能使用这些 VM 映像在您的笔记本电脑上进行此类设置和安装。

公平地说，你永远不会解开这样一个带有 GAZILLION 服务等的大型服务器系统的混乱系统，无论如何都要安装。换句话说，我会从计算机墓地中建造一个盒子并使用它！

所以这些虚拟机不是为你的笔记本电脑环境设置的。如果你有 8 个演出，那么更远的情况是，磁盘 vm 映像可以与 v-box 之类的东西一起使用（因为它支持 x64 VM，你需要这种能力）。

无论如何，你需要更多的硬件，使用上面的图片表明你必须在你的笔记本电脑上安装 hyper-v。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T18:56:55.217

如果你看一下[这个](http://www.microsoft.com/en-us/download/details.aspx?id=27417#system-requirements)网站，在概述中它指出虚拟机 A 是 Windows 2008 R2 安装，上面已经有 sharepoint。

B是win2008 R2带交换

C 是 2008，安装了 lync。

但是我认为您需要至少 8GB 的​​内存才能执行此操作...我不知道您拥有什么处理器，但它至少必须是 I7 第二代或第三代。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T02:04:35.337

我试过一次只有 4GB RAM 的 VM 设置，太糟糕了。我赞同其他说法，你需要一台功能强大的 PC 才能走这条路。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T10:01:56.860

我要重申人们对 8GB RAM 的许多看法。该线程解释了运行您已经拥有的下载的其他选项

[https://sharepoint.stackexchange.com/questions/10461/sharepoint-2010-vhd-for-vmware](https://sharepoint.stackexchange.com/questions/10461/sharepoint-2010-vhd-for-vmware)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-15T07:06:41.890

您也可以试用[Cloudshare](http://www.cloudshare.com)服务 14 天。它是一个功能齐全的 Sharepoint 服务器环境，您可以通过 RDC 访问它。

# vim - 根据文件类型执行vim命令？

> ID：12449688
> 
> 赞同：3
> 
> 时间：2012-09-16T18:50:23.253
> 
> 标签：vim, command, file-type

我正在尝试使用命令

```
 let b:match_words='<:>,<\@<=\([^/][^ \t>]*\)[^>]*\%(>\|$\):<\@<=/\1>' 
```

每次打开 html 文件时运行。我试着把线

```
 autocmd FileType html let b:match_words='<:>,<\@<=\([^/][^ \t>]*\)[^>]*\%(>\|$\):<\@<=/\1>' 
```

在我的 ftdetect 和 ftplugin 文件夹中名为 html.vim 的文件中，什么也没发生。每次我在 html 文件中时如何运行命令？

该命令是更改 matchit btw 的匹配行为。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T19:08:15.927

一般来说，你的 autocmd 没问题；问题是您正在尝试重新`b:match_words`定义 done 中的定义`$VIMRUNTIME/ftplugin/html.vim`，因此执行顺序变得很重要。

这些自定义的位置在*after*目录中，即`~/.vim/after/ftplugin/html.vim`; 只需创建一个新文件并将`:let`命令放在那里。

您可以通过 观察源脚本的顺序`:scriptnames`。在其他情况下，当您不覆盖默认行为时，这`:autocmd FileType`很好，但我更喜欢将这些（例如自定义映射）放入`~/.vim/ftplugin/html_mymappings.vim`中，因为它提供了更好的分离并有助于保持`.vimrc`简短易懂。

ftdetect子目录*用于*文件类型检测，即检查文件路径/名称/内容以确定正确的文件类型。它不适用于此处，因为文件类型是`html`.

# sql - 使用 sql 使用具有相同标签的 xml CLOB 中的值执行计算

> ID：12449694
> 
> 赞同：0
> 
> 时间：2012-09-16T18:50:28.047
> 
> 标签：sql, xml, xml-parsing

我有一个表（event_archive），其中一个列（event_xml）具有 xml 格式的 CLOB 数据，如下所示。有没有办法使用 SQL 来汇总“xx”标签的值？请帮忙，因为我完全困惑。即使简单地提取值也是一个问题，因为在同一个根中有 2 个“xx”标签。提前致谢。

```
<?xml version="1.0" encoding="UTF-8"?>
<event type="CALCULATION">
    <source_id>INTERNAL</source_id>
    <source_participant/>
    <source_role/>
    <source_start_pos>1</source_start_pos>
    <destination_participant/>
    <destination_role/>
    <event_id>123456</event_id>
    <payload>
        <cash_point reference="abc12345">
            <adv_start>20120907</adv_start>
            <adv_end>20120909</adv_end>
            <conf>1234</conf>
            <profile>3</profile>
            <group>A</group>
            <patterns>
                <pattern id="00112">
                   <xx>143554.1</xx>
                   <yyy>96281.6</yyy>
                   <adv>875</adv>
                </pattern>
                <pattern id="00120">
                   <xx>227606.1</xx>
                   <yyy>97539.8</yyy>
                   <adv>18181</adv>
                </pattern>
             </patterns>
         </cash_point>
</payload>
</event> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:54:15.697

不同的数据库以不同的方式处理 XML。没有通过原始标准 SQL 处理 XML 有效负载的标准方法。因此，您需要查看您的实际数据库实现，以了解它们有哪些支持。

# matlab - 在 MATLAB 中使用双退化圆锥进行度量校正

> ID：12449695
> 
> 赞同：1
> 
> 时间：2012-09-16T18:50:37.780
> 
> 标签：matlab, computer-vision, svd

我正在以下列方式对具有投影失真的图像进行度量校正：

*   从原始图像中，我找到了两组平行线并找到了它们的交点（无穷远处的消失点）。
*   我正在选择一个圆上的五个非共线点来拟合圆锥曲线，然后我正在使用上述点检查该圆锥曲线在无穷远处与直线相交的位置。
*   我使用这些点来找到扭曲的双退化圆锥曲线。

理论上，由于扭曲的二次曲线由 C*'=HC*H' 确定（C* 是对偶退化二次曲线，' 是转置，H 是我的单应性），我应该能够运行 SVD 来确定 H。未失真，C * 是一个 3x3 单位矩阵，最后一个元素位于对角线零上。但是，如果我运行 SVD，我不会在对角矩阵中得到。对于某些矩阵，我可以通过使用 Cholesky 因式分解来避免这种情况（哪些因素是 C*'=HH' 的因素，至少对于这个来说，这基本上是可以的），但这需要一个正定矩阵。有没有办法将 SVD 中返回的对角矩阵内的比例平均分配到 U 和 V' 矩阵中，同时保持它们相同？（例如 U = V）。

我为此使用 MATLAB。我确定我错过了一些明显的东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T03:12:41.527

结果矩阵缺乏正定性是由于噪声，因为使用的图像具有太多的径向失真渲染，即使在这种方法中选择圆上的许多点也相当无用。

SVD 方法中遗漏的一点是通过左右乘以对角矩阵的平方根（将最后一个对角元素设置为 1，因为奇异值应该为零但零分量）从对角分量中删除比例不会产生正确的结果）。

# jquery - 将 jQuery ajax 与 Wicket 集成时的奇怪行为

> ID：12449700
> 
> 赞同：1
> 
> 时间：2012-09-16T18:51:59.463
> 
> 标签：jquery, ajax, wicket

我试图将 jQuery ajax 请求与 Wicket 结合起来，但我面临一个小问题......

请求第一次有效，但第二次失败。js 控制台说它是由于语法错误“意外令牌”而发生的。用 firedebug 查看请求，第一次看起来是正确的，但第二次没有响应。

第一次按下按钮时，“onRequest”和“neforeRender”都被调用，第二次虽然只有“beforeRender”被调用。

我不确定它的 jQuery 或 Wicket 是否是这里的恶棍......事实上，“onBeforeRender”被称为两个 tiems 似乎表明请求正在通过，但同时“onRequest”没有被调用，即使 firedebug确认数据已发送...

这里有人对问题所在有线索或理论吗？

下面是在提交按钮上的“onClick”事件上调用的 jQuery 代码。

```
function getTestValue() 
{
var testArray = [ 1, 2, 3, 4, 5 ];
$.ajax({
    url : $('#mark').attr('json:callback.url'),
    type : 'post',
    cache : false,

    data : JSON.stringify(testArray),
    contentType : 'application/json',
    dataType : 'json',
    success: function(responseData) 
    {
        var values = responseData.sumPerTimeUnit;
        var labels = responseData.labels;
    },
    error: function(XMLHttpRequest, textStatus, errorThrown) 
    {
        alert($('#mark').attr('json:callback.url'));
        console.log(XMLHttpRequest);
        console.log(textStatus);
        console.log(errorThrown);
    },
});
} 
```

按下按钮时会调用面板“onBeforeRender”，即使请求失败也是如此。

```
public class AbstractJSONHandlerPanel extends Panel
{
private static final long    serialVersionUID = 1L;

private AbstractJSONBehavior JSONBehavior;

private Form mMarkUp;

public AbstractJSONHandlerPanel(String id)
{
    super(id);

    JSONBehavior = new AbstractJSONBehavior();

    mMarkUp = new Form("markupid")
    {
        @Override
        protected void onComponentTag(ComponentTag tag) {
            super.onComponentTag(tag);
            tag.put("json:callback.url", JSONBehavior.getCallbackUrl());
        }
    };
    mMarkUp.setMarkupId("mark");

    add(JSONBehavior);

    Button n = new Button("dummyButton");
    n.add(AttributeModifier.replace("onclick", "getTestValue();"));

    mMarkUp.add(n);
    add(mMarkUp);
}

@Override
protected void onBeforeRender()
{
    System.out.println("BEFORE RENDER");

    String callbackUrl = JSONBehavior.getCallbackUrl().toString();
    mMarkUp.add(AttributeModifier.replace("json:callback.url", callbackUrl));

    super.onBeforeRender();
}
} 
```

“onRequest”仅在第一次按下按钮时被调用。

```
public class AbstractJSONBehavior extends AbstractAjaxBehavior
{
private static final long serialVersionUID = 1L;

public void onRequest()
{
    System.out.println("REQUEST");

    RequestCycle requestCycle = RequestCycle.get();
    readRequestData(requestCycle);
    writeResponseData(requestCycle);
}

private void readRequestData(final RequestCycle requestCycle)
{
    WebRequest wr = (WebRequest) requestCycle.getRequest();

    HttpServletRequest hsr = (HttpServletRequest) wr.getContainerRequest();

    try
    {
        BufferedReader br = hsr.getReader();

        String jsonString = br.readLine();
        if( (jsonString == null) || jsonString.isEmpty() )
        {
            System.out.println(" no json found");
        }
        else
        {
            System.out.println(" json  is :" + jsonString);
        }

        br.close();
    }
    catch( IOException ex )
    {
        throw new RuntimeException(ex);
    }
}

private void writeResponseData(RequestCycle requestCycle)
{
    WebResponse wr = (WebResponse) requestCycle.getResponse();

    HttpServletResponse hsr = (HttpServletResponse) wr
            .getContainerResponse();

    try
    {
        PrintWriter br = hsr.getWriter();

        List<Integer> data = new ArrayList<Integer>(6);
        data.add(350);
        data.add(421);
        data.add(976);
        data.add(1521);
        data.add(432);
        data.add(121);

        List<String> labels = new ArrayList<String>(6);
        labels.add("Jan");
        labels.add("Feb");
        labels.add("Mar");
        labels.add("Apr");
        labels.add("Maj");
        labels.add("Jun");

        StatisticsResponse resp = new StatisticsResponse(data, labels);

        Gson mGsonParser = new Gson();
        String json = mGsonParser.toJson(resp);

        System.out.println("RESPONSE: " + json);

        br.write(json);

        br.flush();
        br.close();
    }
    catch( IOException ex )
    {
        throw new RuntimeException(ex);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:38:13.390

如果您有 javascript 异常，我发现新的 Wicket 6 实现不起作用（ajax 仅在第一次起作用）。就我而言，它是 AutoCompleteField 添加了 js 并抛出：

```
TypeError: obj is null
[Break On This Error]
objonkeydown=obj.onkeydown; 
```

wicket-autocomplete...js 的完整片段

```
function initialize(){
var isShowing = false;
// Remove the autocompletion menu if still present from
// a previous call. This is required to properly register
// the mouse event handler again (using the new stateful 'mouseactive'
// variable which just gets created)
var choiceDiv = document.getElementById(getMenuId());
if (choiceDiv !== null) {
isShowing = choiceDiv.showingAutocomplete;
choiceDiv.parentNode.parentNode.removeChild(choiceDiv.parentNode);
}
var obj = Wicket.$(elementId);
initialElement = obj;
objonkeydown=obj.onkeydown; 
```

我只是删除它，它现在可以工作了

# ios5 - 故事板不重用单元格。如何强制它重用uitableview中的单元格？

> ID：12449701
> 
> 赞同：0
> 
> 时间：2012-09-16T18:52:00.253
> 
> 标签：ios5, xcode4.2, storyboard

我正在使用带有模拟器的 XCode 4.2 和 iOS 5.0。出于测试的目的，我创建了一个新的空项目并将其链接到情节提要中的表格视图，为单元格分配了一个标识符并从 cellForRowAtIndexPath 调用该单元格。在 cellForRowAtIndexPath 内部，我创建了一个日志行来测试这一点，问题是每次向上或向下滚动都会创建一个新单元格。

如何强制它重用单元格而不是每次滚动时都生成一个新单元格？

我拥有的唯一方法是在子类化 UITableViewController 时由 xcode 生成的默认方法（因此 initWithStyle、viewDidLoad、viewDidUnload、numberOfSectionsInTableView、numberOfRowsInSection 和 cellForRowAtIndexPath）

非常感谢。爱德华多。

# iphone - 如何访问安装在 gphoto2://[usb:001,003]/ 的 iPhone？

> ID：12449705
> 
> 赞同：2
> 
> 时间：2012-09-16T18:52:23.057
> 
> 标签：iphone, bash, mount

我需要cp（或dd）一些文件。我试过这个：[https](https://superuser.com/questions/281986/bashterminal-access-to-camera-files-mounted-as-gphoto2-usb001-003-dcim?answertab=active#tab-top) ://superuser.com/questions/281986/bashterminal-access-to-camera-files-mounted-as-gphoto2-usb001-003-dcim?answertab=active#tab-top ；但是，文件夹 (.gvfs) 是空的。

```
Volume(0): iPhone
  Type: GProxyVolume (GProxyVolumeMonitorGPhoto2)
  ids:
   unix-device: '/dev/bus/usb/001/003'
  activation_root=gphoto2://[usb:001,003]/
  themed icons:  [camera-photo]
  can_mount=1
  can_eject=0
  should_automount=1
  Mount(0): iPhone -> gphoto2://[usb:001,003]/
    Type: GProxyShadowMount (GProxyVolumeMonitorGPhoto2)
    default_location=gphoto2://[usb:001,003]/
    themed icons:  [camera-photo]
    x_content_types: x-content/image-dcf
    can_unmount=1
    can_eject=0
    is_shadowed=0
Mount(1): iPhone -> gphoto2://[usb:001,003]/
  Type: GDaemonMount
  default_location=gphoto2://[usb:001,003]/
  themed icons:  [camera-photo]  [camera]
  x_content_types: x-content/image-dcf
  can_unmount=1
  can_eject=0
  is_shadowed=1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T22:15:34.493

从 Ubuntu 12.10 开始，GVFS 挂载现在位于`/run/user/<your_username>/gvfs/`而不是`~/.gvfs/`. 所以你应该在这个新目录下找到你的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-21T22:05:54.307

在 Xubuntu 13.10 中，我在以下位置找到了我的 Canon Powershot

/运行/用户/1000/gvfs/。. .

很难找到这些信息；希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T22:11:11.543

如果您打算使用“dd”，则不需要安装。只需使用块设备。

`/dev/bus/usb/001/003`

如果你

`dd if=/dev/bus/usb/001/003 of=~/images.img`你最终会得到一个平面文件系统，但是你仍然需要安装它才能使用图片。

# php - LEFT JOIN 两次形成同一张表

> ID：12449708
> 
> 赞同：1
> 
> 时间：2012-09-16T18:52:38.647
> 
> 标签：php, mysql, left-join

我正在尝试将同一张表中的 4 个字段与一张表连接两次。我尝试使用两个 LEFT JOIN 和两个 WHERE 语句，如下所示。目前我只是没有得到 g2.address、g2.latitude、g2.longitude、g2.method 的任何结果。不确定我是否对声明做错了，或者只是与我的数据相关的其他一些明显错误。任何帮助，将不胜感激。

**第一次尝试：**

```
SELECT p.q_id, p.first_name, p.surname, p.gender, p.age, p.race, 
       p.q2_7, p.q2_8_1, p.q2_8_2, p.q2_8_3, p.q2_8_4, p.q2_8_5, 
       p.q2_8_6, p.q2_8_7, p.q2_8_8, p.q2_9, p.q2_10, p.q2_11, 
       p.q2_11_1_1, p.q2_11_1_2, p.q2_11_1_3, p.q2_11_1_4, 
       p.q3_1, p.q3_2, p.q3_2_1, p.q3_3, p.q3_4, p.q3_5, 
       g1.address, g1.latitude, g1.longitude, g1.method, 
       p.q3_7, p.q3_8, p.q3_9, p.q3_10, p.q3_11_1, p.q3_11_2, 
       p.q3_11_3, p.q3_12, p.q3_13, p.q4_1, 
       g2.address, g2.latitude, g2.longitude, g2.method, 
       p.q4_3, p.q4_4, p.q4_5, p.q5_0_1, p.q5_0_2, p.q5_0_3, 
       p.q5_1, p.q5_2, p.q5_3
  FROM people AS p 
  LEFT JOIN gmap_address_list AS g1 ON p.q3_6 = g1.id 
  LEFT JOIN gmap_address_list AS g2 ON p.q4_2 = g2.id 
 GROUP BY p.q_id 
```

**第二次尝试**

```
SELECT p.q_id, p.first_name, p.surname, p.gender, p.age, p.race, 
       p.q2_7, p.q2_8_1, p.q2_8_2, p.q2_8_3, p.q2_8_4, p.q2_8_5, 
       p.q2_8_6, p.q2_8_7, p.q2_8_8, p.q2_9, p.q2_10, p.q2_11, 
       p.q2_11_1_1, p.q2_11_1_2, p.q2_11_1_3, p.q2_11_1_4, p.q3_1, 
       p.q3_2, p.q3_2_1, p.q3_3, p.q3_4, p.q3_5, 
       g1.address, g1.latitude, g1.longitude, g1.method, 
       p.q3_7, p.q3_8, p.q3_9, p.q3_10, p.q3_11_1, p.q3_11_2, 
       p.q3_11_3, p.q3_12, p.q3_13, p.q4_1, 
       g2.address, g2.latitude, g2.longitude, g2.method, 
       p.q4_3, p.q4_4, p.q4_5, p.q5_0_1, p.q5_0_2, p.q5_0_3, 
       p.q5_1, p.q5_2, p.q5_3
  FROM people p, gmap_address_list g1, gmap_address_list g2 
 WHERE p.q3_6 = g1.id AND p.q4_2 = g2.id 
 ORDER BY p.q_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:15:33.757

如果不确切了解 p.q3_6 和 p.q4_2 是如何填充的，很难猜出为什么您的第二个 LEFT JOIN 可能不匹配任何内容。但是，您的查询结果集中确实有一些重复的列名；这可能会困扰 php 中的数组加载内容。您可以尝试以下方法：

```
SELECT ... ,
       g1.address AS g1_address, g1.latitude AS g1_latitude, 
       g1.longitude AS g1_longitude, g1.method AS g1_method, 
       ... ,
       g2.address AS g2_address, g2.latitude AS g2_latitude, 
       g2.longitude AS g2_longitude, g2.method AS g2_method, 
       ... 
```

请注意，您的第二个查询：对左连接没有好处。坚持第一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:17:36.057

通过更改为：

```
g2.address AS address_2, g2.latitude AS latitude_2, g2.longitude AS longitude_2, g2.method AS method_2 
```

我正在使用`$row = mysql_fetch_array($result_people, MYSQL_ASSOC)`导致地址、纬度、经度、方法的重复条目

# python - 没有 sudo 无法在 python 中导入模块 - ubuntu 12.04

> ID：12449711
> 
> 赞同：2
> 
> 时间：2012-09-16T18:53:07.020
> 
> 标签：python, permissions, ubuntu-12.04

自从我升级到 ubuntu 12.04 后，我觉得这是一个新问题。

现在，如果我进入交互式 shell 并导入一个标准模块，如`urllib2`，我会收到以下错误：

```
$ python
Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import urllib2
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/urllib2.py", line 94, in <module>
   import httplib
  File "/usr/lib/python2.7/httplib.py", line 79, in <module>
   import mimetools
  File "/usr/lib/python2.7/mimetools.py", line 6, in <module>
   import tempfile
  File "/usr/lib/python2.7/tempfile.py", line 34, in <module>
   from random import Random as _Random
  File "/usr/lib/python2.7/random.py", line 47, in <module>
   from os import urandom as _urandom
  ImportError: cannot import name urandom
Error in sys.excepthook:
Traceback (most recent call last):
  File "/usr/lib/python2.7/dist-packages/apport_python_hook.py", line 66, in     apport_excepthook
    from apport.fileutils import likely_packaged, get_recent_crashes
  File "/usr/lib/python2.7/dist-packages/apport/__init__.py", line 1, in <module>
    from apport.report import Report
  File "/usr/lib/python2.7/dist-packages/apport/report.py", line 12, in <module>
    import subprocess, tempfile, os.path, urllib, re, pwd, grp, os
  File "/usr/lib/python2.7/tempfile.py", line 34, in <module>
    from random import Random as _Random
  File "/usr/lib/python2.7/random.py", line 47, in <module>
    from os import urandom as _urandom
    ImportError: cannot import name urandom

Original exception was:
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/urllib2.py", line 94, in <module>
    import httplib
  File "/usr/lib/python2.7/httplib.py", line 79, in <module>
    import mimetools
  File "/usr/lib/python2.7/mimetools.py", line 6, in <module>
    import tempfile
  File "/usr/lib/python2.7/tempfile.py", line 34, in <module>
    from random import Random as _Random
   File "/usr/lib/python2.7/random.py", line 47, in <module>
from os import urandom as _urandom
ImportError: cannot import name urandom
>>> 
```

如果我在进入交互式 shell 之前运行 sudo ，一切都很好，它导入时不会出错。

我不想只 chmod 755 我的整个 /usr/lib/python2.7 目录，那么我该怎么做才能让事情以更明智的方式更顺利地运行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T17:21:50.900

使用虚拟机。这将为您提供一个不受过去安装影响的干净环境。

# php - 安装 PHP 脚本后的错误

> ID：12449712
> 
> 赞同：0
> 
> 时间：2012-09-16T18:53:08.000
> 
> 标签：php

所有这一切都是全新的，并试图安装我的 PHP 脚本。当我输入我的网址时，我收到以下错误：

> 警告：mysql_pconnect() [function.mysql-pconnect]：在 /home/cbstacy/public_html/dirtytwenty.com/libraries/adodb/drivers/adodb- 中用户 'god'@'localhost' 的访问被拒绝（使用密码：YES） mysql.inc.php 在第 227 行
> 
> 警告：mysql_real_escape_string() [function.mysql-real-escape-string]：/home/cbstacy/public_html/dirtytwenty.com/include/config 中的用户 'cbstacy'@'localhost' 的访问被拒绝（使用密码：NO）。第 140 行的 php
> 
> 警告：mysql_real_escape_string() [function.mysql-real-escape-string]：无法在第 140 行的 /home/cbstacy/public_html/dirtytwenty.com/include/config.php 中建立到服务器的链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T18:55:55.947

这只是“用户名或密码错误”的情况。查看您的数据库连接数据。

奇怪的是，您的脚本似乎也在尝试使用两个不同的用户连接到数据库。

# javascript - javascript显示/隐藏表格

> ID：12449714
> 
> 赞同：0
> 
> 时间：2012-09-16T18:53:10.913
> 
> 标签：javascript

```
<tr>
        <td><form:checkbox path="ftpScanEvents" id="chk" onclick="showMe('div1',this);"/>
            <input type="hidden" value="1" name="_ftpScanEvents"/>
            FTP Scan Events</td>
    </tr>           
    <tr><td colspan="4">
        <table id="div1" style="display:none">
        <tr><td>Host Name</td><td>Directory</td><td>User Name</td><td>Password</td></tr>
        <tr><td><form:input path="hostName" size="30" maxlength="200"/></td>
            <td><form:input path="directory" size="30" maxlength="200"/></td>
            <td><form:input path="userName" size="20" maxlength="20"/></td>
            <td><form:input path="password" size="20" maxlength="20"/></td>
        </tr>
        </table>
        </td></tr> 
```

javascript:

```
function showMe (it, chkbox) {
          var rr = (chkbox.checked) ? "block" : "none";
          document.getElementById(it).style.display = rr;
        } 
```

我可以在复选框选择时隐藏/显示它。但是，我需要的是页面加载，如果选中复选框，则显示它，否则隐藏...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T18:56:02.690

您需要一个 onload 事件。将此添加到 HTML 的底部。

```
<script type="text/javascript">
    window.onload = function() {
        showMe('div1',document.getElementById('chk'));
    }
</script> 
```

# android - 如何在动画效果之间提供延迟

> ID：12449716
> 
> 赞同：3
> 
> 时间：2012-09-16T18:53:26.040
> 
> 标签：android, android-animation

我做了一个xml布局，布局基本上有四个按钮，这些按钮会有动画效果，他们会被刷进去，当他们相应的活动开始时，现在动画部分很简单，我遇到的问题是如何我在每个动画之间创建了一个延迟？我的意思是每次按钮滑动时，在那之后应该有一些时间延迟。在这里使用线程是一个选项吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T00:48:28.183

你可能正在寻找这样的东西？

[http://developer.android.com/reference/android/view/animation/Animation.html#attr_android:startOffset](http://developer.android.com/reference/android/view/animation/Animation.html#attr_android:startOffset)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T19:40:49.047

您始终可以使用“假”动画来实现延迟，例如，将 alpha 从 100% 更改为 100%，持续时间为 1 秒。它实际上什么都不做，但动画需要时间，这就是你想要的。希望这可以帮助。

# c# - 从 jQuery 向 asp.net 页面方法传递数据失败

> ID：12449722
> 
> 赞同：0
> 
> 时间：2012-09-16T18:54:23.267
> 
> 标签：c#, jquery, asp.net

此 jQuery 调用不断失败，并显示以下错误消息：`"Cannot convert object of type 'System.String' to type 'System.Collections.Generic.IDictionary`2[System.String,System.Object]'"`

jQuery：

```
$('input, select').blur(function ()
                {
                    var categoryId = $('#IncidentCategoryEnhancedDropDownList').val();
                    var latitude = $('#LatitudeHidden').val();
                    var longitude = $('#LongitudeHidden').val();
                    var dateTime = $('#DateEnhancedTextBox').val();

                    if (categoryId == '--Select--')
                    {
                        return;
                    }

                    if (!latitude.length || !longitude.length)
                    {
                        return;
                    }

                    if (!dateTime.length)
                    {
                        return;
                    }

                    $.ajax({
                        type: "POST",
                        url: "ReportIncident.aspx/GetIncidentsNearBy",
                        data: $.toJSON('{categoryId:"' + categoryId + '",latitude:' + latitude + ',longitude:' + longitude + ',dateTime:"' + dateTime + '"}'),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg)
                        {
                            console.log(msg.d);
                            // $("#Result").text(msg.d);
                        }

                    });
                }); 
```

页面方法：

```
 [WebMethod]
        public static IList<IncidentDTO> GetIncidentsNearBy(int categoryId, float latitude, float longitude, DateTime dateTime)
        {
            var incidents = new MendixIncidentDAO().GetIncidents()
                .Where(i => i.IncidentTypeId == categoryId)
                .Where(i => i.Date >= dateTime.AddHours(-1) && i.Date <= dateTime.AddHours(1))
                .Where(
                    i =>
                    SpatialHelpers.DistanceBetweenPlaces((double) longitude, (double) latitude, (double) i.Longitude,
                                                         (double) i.Latitude) < 1)
                .Select(
                    i =>
                    new IncidentDTO
                        {
                            Id = i.IncidentId,
                            IncidentCategory = i.IncidentType,
                            Address = i.Address,
                            FormattedDate = i.FormattedDate
                        });
            return incidents.ToList();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T21:09:25.993

问题出在 Ajax 调用中，特别是 data:$.toJSON(...) 部分。下面的代码现在可以完美运行。

```
$.ajax({
                        type: "POST",
                        url: "ReportIncident.aspx/GetIncidentsNearBy",
                        data:"{categoryId:" + categoryId+",latitude:"+latitude+",longitude:"+longitude+",dateTime:'"+dateTime+ "'}", 
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg)
                        {
                            console.log(msg.d);                           
                            $("#Result").text(msg.d);
                        }
                    }); 
```

# php - 将选定选项从选择框传递到不同的 php 文件

> ID：12449724
> 
> 赞同：0
> 
> 时间：2012-09-16T18:54:32.127
> 
> 标签：php, javascript, ajax

在深入研究代码之前，我正在寻找一些关于如何将选定选项从选择框传递到不同的 php 文件，然后根据传递的选项（用户选择哪个选项）运行特定 mySQL 查询的好建议）。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:42:17.737

这是 jquery ajax 的最简单示例。

让您的目标是从选择框中选择一个国家/地区中的一个国家/地区的城市，并将结果显示在一个 div 中。

## HTML

1.  下载并包含“jquery”到您的 html 页面。
2.  让这是您的选择框。

    <选择名称="国家" id="国家">

    <option value="1">Country1</option>

    <option value="2">国家2</option>

    </选择>

3.  div 显示结果

    <div id="city"></div>

您应该更正 html 代码中的空格，我在标签中放置了空格，因为 stackoverflow 没有显示 html 代码（或者我不知道如何放置）。

## jQuery

```
<script>
$('#country').live('change', function() {
    $.post("ajax.php",{country_value: $(this).val()},
    function(data){
        $("#city").html(data.cities);
    },"json");
});
</script> 
```

## PHP

文件 >> ajax.php

```
$country_value = $_POST['country_value'];
$sql = "SELECT `city_name` from `city` WHERE `country_value` = $country_value";
$data = mysql_query($sql);
$output = "";
if($data && mysql_num_rows($data)>0)
{
    while($cities = mysql_fetch_array($data))
    { $output .= $cities['city_name'] .","; }
}
echo json_encode(array("cities"=>$output)); 
```

# android - 如何在android中保存用户项目？

> ID：12449726
> 
> 赞同：0
> 
> 时间：2012-09-16T18:54:37.057
> 
> 标签：android, save, android-file

我正在尝试创建一个应用程序，让用户可以选择创建新项目或选择现有项目。这些项目将包含一个名称（标题）和一组允许他们拍摄的图像。基本上是一张专辑。我能想到的唯一方法是将项目名称和他们为该项目选择的每张图片的一堆 id 写入文件。将其存储在一个数组中，并在每次启动应用程序时重新加载。这是做这件事的好方法还是有更雄辩的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:25:55.277

Viperbone 的回答很好。我可以鼓励你添加一些额外的东西吗？

创建一个代表您的项目的类。使这个类可序列化。在这个类中，创建“保存”和“加载”方法。最初，您的保存方法可能使用 SQLite，但在未来，您可能有很多原因要更改它（保存到 Dropbox？导出？ - 因此是序列化）。

如果您隔离保存项目的方式，您可以将底层存储机制更改为您想要的任何内容，理论上无需更改其余代码。

您可以更进一步，将保存/加载方法与您定义的接口放在一个单独的类中。这样，您甚至可以拥有多个保存方法，并且只需添加使用相同接口的新类即可轻松添加新方法。

随着应用程序的发展，建立这种灵活性通常会多次收回初始投资。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:01:25.633

您可以使用 sqlite 数据库将项目存储在一个表中，并在另一个表中存储图像列表，并在第三个表中存储哪个图像属于哪个项目的列表。

您可以使用下表：

项目表

> * * *
> 
> ID - AutoInt
> 
> 标题 - varchar(255)
> 
> * * *

图像表

> * * *
> 
> ID - AutoInt
> 
> ImageID - 整数
> 
> * * *

项目形象关系表

> * * *
> 
> ID - AutoInt
> 
> 项目 ID - 整数
> 
> ImageID - 整数
> 
> * * *

看看这个 sqlite 数据库教程： [http ://www.androidhive.info/2011/11/android-sqlite-database-tutorial/](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

或者这个： [http ://android-er.blogspot.ch/2011/06/simple-example-using-androids-sqlite_02.html](http://android-er.blogspot.ch/2011/06/simple-example-using-androids-sqlite_02.html)

# javascript - .append jQuery 函数

> ID：12449728
> 
> 赞同：2
> 
> 时间：2012-09-16T18:55:03.560
> 
> 标签：javascript, javascript-events, jquery

应在操作后生成的 HTML。

```
<div class="comments_action_207">
   <div class="list_item_comments list_item_comments_207">
      <div class="comment_separator">text goes here</div>
   </div>
</div> 
```

操作前的 HTML

```
<div class="comments_action_207"></div>
<div class="list_item_comments list_item_comments_207"><div class="comment_separator">text goes here</div></div> 
```

允许我进行上述操作的 JavaScript 是

```
$(function() {
    $('.comments_action_207').click(function() {
        var num = this.className.split('_').pop();
        $('</div>',{'class':'list_item_comments list_item_comments_' + num})
            .append('<div class="comment_separator">text goes here</div>')
            .appendTo(this);
    });
}); 
```

我测试了上面的 JavaScript，它工作正常。但我不明白的是为什么我不必传递如下的**开始 div**标签。如果我通过了一个开放的 div 标记代码就不能按我的意图工作。

```
$('<div></div>',{'class':'list_item_comments list_item_comments_' + num}). 
```

如果可以的话，请逐行解释，这样我更容易理解。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T18:59:34.710

您`<div>`没有正确关闭：

```
$('<div><div/>'
            ^ 
```

jQuery 接受`<div />`,`<div>`和`<div></div>`，但*没有别的*（即没有 HTML 属性）：[http ://api.jquery.com/jQuery/#jQuery2](http://api.jquery.com/jQuery/#jQuery2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:17:37.643

请试试这个...它会工作

```
$('<div></div>',{'class':'list_item_comments list_item_comments_' + num}) 
```

# c# - 无法使用 html-agility-pack 从 HTML 代码中获取值

> ID：12449730
> 
> 赞同：0
> 
> 时间：2012-09-16T18:55:25.347
> 
> 标签：c#, web-scraping, html-agility-pack

我想从 HTML 代码中获取一个值，我正在使用这个 C# 代码来使用*HtmlAgilityPack*从这个 HTML 代码中获取值。

我只想要地址和电话号码

```
<div class="company-info">
    <div id="o-company" class="edit-overlay-section" style="padding-top:5px; width: 400px;">
        <a href="http://www.manta.com/c/mm23df2/us-cellular" class="company-name">
            <h1 class="profile-company_name" itemprop="name">US Cellular</h1>
        </a>
    </div>      
    <div class="addr addr-co-header-gamma" itemprop="address"itemscope=""itemtype="http://schema.org/PostalAddress">
        <em>United States Cellular Corporation</em>
        <div class="company-address">   
        <div itemprop="streetAddress">2401 12th Avenue NW # 104B</div>
            <span class="addressLocality" itemprop="addressLocality">Ardmore</span>,
            <span class="addressRegion" itemprop="addressRegion">OK</span>      
            <span class="addresspostalCode" itemprop="postalCode">73401-1471</span>
        </div>
        <dl class="phone_info"><dt>Phone:</dt>
        <dd class="tel" itemprop="telephone">(580) 490-3333</dd>
... 
```

C#代码：

```
private HtmlDocument ParseLink(string URL)
{ 
    HtmlDocument hDoc = new HtmlDocument();
    try
    {
        WebClient wClient = new WebClient();

        byte[] bData = wClient.DownloadData(pageurl);

        hDoc.LoadHtml(ASCIIEncoding.ASCII.GetString(bData));
        Response.Write("<table><tr><td>");

        foreach (HtmlNode hNode in hDoc.DocumentNode.SelectNodes("//div[@itemprop='company-address']"))
        {
            Response.Write(hNode.InnerText.ToString());
        }
        Response.Write("</tr></td><td>");

        foreach (HtmlNode hNode in hDoc.DocumentNode.SelectNodes("//span[@itemprop='addressLocality']"))
        {

            Response.Write(hNode.InnerText.ToString());
        }
        Response.Write("</tr></td><td>");   

        foreach (HtmlNode hNode in hDoc.DocumentNode.SelectNodes("//span[@itemprop='addressRegion']"))
        {
            Response.Write(hNode.InnerText.ToString());
        }

        Response.Write("</tr></td><td>");

        foreach (HtmlNode hNode in hDoc.DocumentNode.SelectNodes("//span[@itemprop='postalCode']"))
        {
            Response.Write(hNode.InnerText.ToString());
        }

        Response.Write("</tr></td><td>"); 

        foreach (HtmlNode hNode in hDoc.DocumentNode.SelectNodes("//dd[@itemprop='telephone']"))
        {
            Response.Write(hNode.InnerText.ToString());
        }
        Response.Write("</td>");
        Response.Write("</tr></table>");

    }
    catch (Exception ex)
    {
        Response.Write(ex.Message);
        hDoc.LoadHtml("");
    }

    return hDoc;
} 
```

但是，当编译此代码时，我会收到此错误：

```
"Object reference not set to an instance of an object" 
```

有谁能帮助我吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:53:39.370

您需要提供有关您收到的异常的更多信息（例如抛出异常的哪一行），但是......

*如果没有找到与XPath*表达式匹配的项目，则该`SelectNodes`方法将返回，这意味着您必须在迭代节点之前检查返回的值是否存在。就像是：`null`*`null`*

 *```
var companyAddressNodes = hDoc.DocumentNode.SelectNodes("//div[@itemprop='company-address']");

if (companyAddressNodes == null) {
    //Throw properly exception here, log the error, or do anything you want...
    throw new Exception("No company address node found. Perhaps the page layout changed?");
}

foreach (HtmlNode hNode in )
{
    Response.Write(hNode.InnerText.ToString());
} 
```*

# django - 即使缺少所需的值，Django 验证也会调用 clean()

> ID：12449736
> 
> 赞同：6
> 
> 时间：2012-09-16T18:56:07.763
> 
> 标签：django, forms, validation

我是 Django 新手，对表单处理期间的验证步骤有些困惑。我知道默认情况下需要所有表单字段类型（在我的情况下为 ModelForm）。*我假设如果未*调用表单的 clean 方法而将所需的表单字段留空，Django 会引发 VaidationError 。

这就是为什么我没有检查以下`clean()`方法中是否设置了任何数据：

```
def clean(self):
    date =  self.cleaned_data.get('date')
    time_start = self.cleaned_data.get('time_start')
    time_end = self.cleaned_data.get('time_end')
    user_type = self.cleaned_data.get('user_type')

    if Event.objects.filter(user_type=user_type, date=date, 
                            time_start__lt=time_start, 
                            time_end__gt=time_start).exclude(pk=self.instance.pk).count():
        raise forms.ValidationError("Overlapping with another event.") 
```

在将所有字段留空的情况下提交表单会导致

> ValueError：不能使用 None 作为查询值。

如果我删除我的`clean()`方法，我将得到`ValidationErrors`未填写必填字段的预期 - 这是我在该`clean()`方法仍然存在时所期望的。

知道什么会导致这种情况发生吗？如果 Django 在调用 clean*之前*不检查所需的值，我会感到惊讶。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T19:09:18.857

这很奇怪，因为字段的验证是在调用表单`clean`方法之前执行的。此外，从字段引发的错误存储在，`form.my_field.errors`而从表单的 clean 方法返回的错误累积在`form.non_field_errors`.

以下是表单中执行验证的顺序：

> ```
> full_clean()
>     |
> Field clean() [field's built-in clean method]
>     |
> Form clean_*() [custom validation method for field]
>     |
> Form clean() [form's clean method]
>     |
> cleaned_data/errors 
> ```

# c++ - 以编程方式获取 C++ 中的转义字符串表示

> ID：12449737
> 
> 赞同：0
> 
> 时间：2012-09-16T18:56:13.880
> 
> 标签：c++, string, escaping

有时，我想获得一个字符串的转义字符串表示。在这种情况下，我想将输出打印到控制台，但输出可以包含任何字符（制表符、NL、CR 等），我宁愿输出这些字符的转义序列以使其更具可读性（并且在一个线）。

例如`escape("hello\tworld\n") == "hello\\tworld\\n"`

我是否必须为此编写自己的函数？我怀疑我有。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T20:03:06.673

在 C++11 之前的 C++ 中，您需要自己执行此操作。在 C++11 中，有一种“原始字符串”类型可以保留所有内容。参见例如：[https ://en.wikipedia.org/wiki/C%2B%2B11](https://en.wikipedia.org/wiki/C%2B%2B11)

原始字符串由 <delim> 表示，`R"<delim>(<text>)<delim>"`其中 <delim> 可以是最多 16 个字符的字符串序列（包括空字符串）。请注意，<delim> 中的字符有一些限制，但这应该不是问题，因为无论如何您都希望它可读。

所以你的例子是：

```
char const* str = R"(hello\tworld\n)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T04:31:28.780

这是我写的一个基于流的解决方案（如果流是预期的目的地，您可以相应地修改）：

```
std::string escape(std::string const &str) {
    std::ostringstream result;
    for (string::const_iterator it = str.begin(); it != str.end(); it++) {
        if (' ' <= *it && *it <= '~') {
            result << *it;
        } else {
            result << "\\x" << std::setw(2) << std::hex << std::setfill('0') << *it;
        }
    }
    return result.str();
} 
```

这是另一个使用与 C/C++ 相同的常见不可打印转义码：

```
std::string escape(std::string const &str) {
    std::ostringstream result;
    for (string::const_iterator it = str.begin(); it != str.end(); it++) {
        if (' ' <= *it && *it <= '~') {
            result << *it;
        } else {
            switch (*it) {
            case '\a':
                result << "\\a";
                break;
            case '\b':
                result << "\\b";
                break;
            case '\f':
                result << "\\f";
                break;
            case '\n':
                result << "\\n";
                break;
            case '\r':
                result << "\\r";
                break;
            case '\t':
                result << "\\t";
                break;
            case '\v':
                result << "\\v";
                break;
            default:
                result << "\\x" << std::setw(2) << std::hex << std::setfill('0') << *it;
        }
    }
    return result.str();
} 
```

# php - PHP - 登录到另一个网站，执行搜索和检索结果

> ID：12449738
> 
> 赞同：0
> 
> 时间：2012-09-16T18:56:22.927
> 
> 标签：php, asp.net, html, curl

您好我正在开发一个网站，其功能之一是能够登录网站并执行搜索。然后搜索结果将被发送回给我，我可以在我的页面中使用它们。为了更清楚地说明这一点，我有一张来自我想要执行搜索的网站的表单图像。这是图片：

[[ ![imagebam.com](../Images/9b8e0be6c945d9ebcbf179c820578825.png)]](http://www.imagebam.com/image/24d7af210938187) [3](http://www.imagebam.com/image/24d7af210938187)

基本上，一旦我登录，它就会到达该页面。然后我想搜索 ISBN。结果立即显示在正确的框中。我想获取这些结果，然后能够在我的网站中使用它。我一直在搜索使用 cURL，但我不知道如何一次性登录、搜索和检索。我也不确定如何接收每个结果，例如标题、作者等，因为我想在页面的不同部分显示它们。如果有帮助，我需要从中获取数据的网站将 .aspx 用于登录表单和搜索页面

# c# - 在内存中存储 MySQL 或 JSON 数据的有效方法？

> ID：12449739
> 
> 赞同：0
> 
> 时间：2012-09-16T18:56:39.517
> 
> 标签：c#, .net, memory, types, formats

在默认支持和推荐无类型数据数组的 Javascript、AS3 和 Python 等平台中，数组通常是在内存中存储任意用户数据的最简单、最有效的方式。（表格数据、来自 CSV 的数据、来自 JSON 的数据等）

然而，.NET 喜欢强类型格式的所有内容；您只是不能将任何内容转储到`List<object>`数组中，尽管它可以工作，但处理起来会更慢且更笨拙（类型检查，每次使用都进行类型转换）。因此，通常您最终将数据模式定义为一个类，其属性对应于列，并将数据存储在该类的实例中。

那么在内存中存储任意数据的推荐方法是什么，尤其是当架构不断升级（例如 CSV 或 JSON）时，您在开发时无法“硬编码”。

**编辑：**此类数据可能包括数字（整数/浮点数）、字符串、日期、时间、单位、地理空间数据、几何数据、嵌入式文件，基本上是 MySQL 数据库或 JSON 文件可以存储的所有内容。

**编辑：**在内存中，这些数据可以并且将用于各种处理；生成图表的计算，通过子字符串搜索数据的字符串处理，地理空间/3D数据的数字运算算法等，验证脏数据和优化冗余数据的优化算法等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:02:44.493

一种可能的方法是使用`Dictionary<string,object>`或考虑（4.0+）使用动态对象来存储单个项目。比再次将项目放入 List 或 Array 或 Dictionary 中。

在以太情况下，您可能还需要某种关于对象的元数据。即属性名称到{类型、限制、验证规则、其他}的映射。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T19:15:53.080

我不同意问题中的一些陈述。

首先，“你不能在里面倾倒任何东西`object[]`”。错误的！你可以倾倒任何东西，`object[]`因为一切都是对象。你必须只能将它转换回你需要的任何东西。

二是“慢”。又造假了！只要您知道在哪里查找，普通的旧数组是访问速度最快的集合。访问数组中的特定元素需要 O(1)。

如果您需要将 CSV 存储在您可以考虑的 C# 类中，`System.Data.DataTable`但最通用的绝对是 CSV `object[]`，其中每个元素本身都可以是另一个`object[]`达到您想要的深度级别的元素。

如果您确实需要随机访问，则必须`Dictionary<string,object>`按照 Alexei 的说明进行

**编辑**：这是一个例子

```
void ScanCollection(object[] collection)
{
    foreach (object item: collection)
    {
        if (item is string)
        ///Treat as string
        else if (item is float)
        ///Treat as float
        else if (item is SomethingElse)
        ///Treat as SomethingElse class

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:31:40.220

在 .NET 中，您在哪里遇到过对象数组失败？

由于一个对象只支持 5 种方法，所以没有多少肉。

[对象成员](http://msdn.microsoft.com/en-US/library/system.object_members%28v=vs.90%29.aspx)

据我所知，所有的收藏支持对象。

```
 List<Object> lObjs = new List<object>();
    HashSet<Object> hObjs = new HashSet<object>();
    Dictionary<int, Object> dObjs = new Dictionary<int, object>();
    Object[] aObjs = new Object[10];

    aObjs[0] = "string";
    aObjs[1] = 1d;
    aObjs[2] = new object(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T21:18:39.160

可能有几种方法可以到达这里。

您可以通过反射以编程方式创建类。

[如何在 C# 中动态创建一个类？](https://stackoverflow.com/questions/3862226/dynamically-create-a-class-in-c-sharp)

然后使用泛型集合和一些 LINQ to Objects 来查询数据。

或者，您可以从任何数据源即时使用或创建自己的数据源或数据表，并根据您的逻辑使其成为您喜欢的类型，如果它是数据库，您可以检查数据表列的类型。然后您可以使用数据表对象的 select 方法查询数据表。

# python - bitarray.to01() 不只返回字符串中的 0 和 1（Python）

> ID：12449741
> 
> 赞同：0
> 
> 时间：2012-09-16T18:56:47.640
> 
> 标签：python, string, hex, bitarray

我使用该库`bitarray`来管理我的位转换并用 Python 编写二进制文件。写入文件之前的 bitarray.to01() 是 length `4807100171`。出于某种原因，我无法理解，在从文件 ( `b.fromfile(file)`) 获取位然后用 转换为 0 和1 的字符串之后，`to01()`我的字符串 () 中不仅有 0 和 1，`\x00`然后，当我使用它时，我得到这个错误：

```
ValueError: invalid literal for int() with base 2: '0000000000000000\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00' 
```

我想知道来自文件的字符串是否有大小限制或某些问题。如果是这样，我还没有找到任何关于它的东西......

编辑：

这是重现问题的一种方法：

```
import re
from bitarray import bitarray 

b = bitarray(4807100171)
b.setall(False) 

if re.match("^[\d]+$", b.to01()):
    print "there is only digits in this string."
else:
    print "there is not only digits in this string." 
```

** 编辑#2：

但是，如果我使用`platform.architecture()`and检查我的机器`sys.maxint`，我会得到：

```
In [1]: import platform, sys
In [5]: platform.architecture(), sys.maxint
Out[5]: (('64bit', ''), 9223372036854775807) 
```

所以，这大约是 2^63。为什么它会在 2^32 处截断？我有 4GB 的内存。我得到了 2^32*1.16415e-10*8 （因为我将它转换为字符串）~= 4GB ......但是这是一台 64 位机器的事实呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:24:52.607

您的机器上没有内存来在`to01`该大小的位数组上运行该方法。该字符串将使用每个数字一个字节（至少） - 你有超过 2**32 位数字。由于您不是swappign或内存不足错误，您可能在bitarray中遇到了一些错误——但是......退后一步！

为什么你会想要一个由“0”和“1”组成的 40 亿位数字字符串？为自己打印一个以 Matrix 为主题的赛道？？

如果您需要将几十万位数字转换为 0s 和 1s ，以寻找某种模式，或者其他什么，您最好以交互方式进行，一次转换几个字节，而不是在那里尝试。

# iphone - UILabel.layer 没有被保留在 for 循环范围之外

> ID：12449744
> 
> 赞同：1
> 
> 时间：2012-09-16T18:57:05.710
> 
> 标签：iphone, ios, core-animation, calayer, quartz-graphics

我有一个循环制作一些 UILabel 并将它们的 .layers 添加到 CALayer 我正在将屏幕外渲染到我稍后呈现的 UIImage 的上下文中（顺便说一句：我在传递回 main.js 之前在另一个队列上进行此渲染。 )

如果我在这样的循环中这样做：

```
for (i=0; i<offlineModel.modelArray.count; i++) {

    UILabel *newLabel = [[UILabel alloc] init];
    [newLabel setFont:[UIFont fontWithName:@"Arial-BoldMT" size:9.0]];
    [newLabel setTextColor:[UIColor colorWithRed:76/255.0 green:76/255.0 blue:78/255.0 alpha:1.0]];
    [newLabel setShadowColor:[UIColor whiteColor]];
    [newLabel setShadowOffset:CGSizeMake(1, 1)];
    [newLabel setBackgroundColor:[UIColor greenColor]];
    [newLabel setTextAlignment:UITextAlignmentCenter];
    [newLabel setNumberOfLines:0];

    [newLabel setText:[(LVBarGraphModelPair *)[offlineModel.modelArray objectAtIndex:i] xValue]];
    [newLabel setBounds:CGRectMake(0, 0, barWidth+barSpacing, 3*8.0)];
    [newLabel setAdjustsFontSizeToFitWidth:NO];
    [newLabel sizeToFit];

    CGPoint center = CGPointMake((((offlineModel.modelArray.count-i-1)*barSpacing)+placeholderBarContainerLayerRect.origin.x+(.5*barWidth)), placeholderBarContainerLayerRect.size.height);

    [newLabel setCenter:center];
    [newLabel setFrame:CGRectMake(lroundf(newLabel.frame.origin.x), lroundf(placeholderBarContainerLayerRect.origin.y + placeholderBarContainerLayerRect.size.height+LVBARGRAPH_BAR_ANIMATION_XAXIS_LABELS_OFFSET_X), newLabel.frame.size.width, newLabel.frame.size.height)];

    [layer addSublayer:newLabel.layer];
} 
```

我在标签应该在的地方得到黑色矩形： ![黑色矩形而不是标签](../Images/ef66e7582c0803657992d29e52a43a74.png) 因此，为了解决问题，我只需删除循环（相同的代码）就可以制作一个而不是 6 个：

```
 UILabel *newLabel = [[UILabel alloc] init];
    [newLabel setFont:[UIFont fontWithName:@"Arial-BoldMT" size:9.0]];
    [newLabel setTextColor:[UIColor colorWithRed:76/255.0 green:76/255.0 blue:78/255.0 alpha:1.0]];
    [newLabel setShadowColor:[UIColor whiteColor]];
    [newLabel setShadowOffset:CGSizeMake(1, 1)];
    [newLabel setBackgroundColor:[UIColor greenColor]];
    [newLabel setTextAlignment:UITextAlignmentCenter];
    [newLabel setNumberOfLines:0];

    [newLabel setText:[(LVBarGraphModelPair *)[offlineModel.modelArray objectAtIndex:i] xValue]];
    [newLabel setBounds:CGRectMake(0, 0, barWidth+barSpacing, 3*8.0)];
    [newLabel setAdjustsFontSizeToFitWidth:NO];
    [newLabel sizeToFit];

    CGPoint center = CGPointMake((((offlineModel.modelArray.count-i-1)*barSpacing)+placeholderBarContainerLayerRect.origin.x+(.5*barWidth)), placeholderBarContainerLayerRect.size.height);

    [newLabel setCenter:center];
    [newLabel setFrame:CGRectMake(lroundf(newLabel.frame.origin.x), lroundf(placeholderBarContainerLayerRect.origin.y + placeholderBarContainerLayerRect.size.height+LVBARGRAPH_BAR_ANIMATION_XAXIS_LABELS_OFFSET_X), newLabel.frame.size.width, newLabel.frame.size.height)];

    [layer addSublayer:newLabel.layer]; 
```

![没有循环它就会出现！](../Images/a233cd53689cadc35bc33cb287ea8b1e.png)

它就在那里！到底是怎么回事？

我需要循环，所以我可以拥有可变数量的这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:49:28.310

您应该尝试使用[`CATextLayer`](http://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CATextLayer_class/Introduction/Introduction.html)而不是创建`UILabel`和使用它们的层。

# github - Git排除文件没有正确忽略文件

> ID：12449745
> 
> 赞同：1
> 
> 时间：2012-09-16T18:57:06.493
> 
> 标签：github

在我的`/.git/info/exclude`文件中，我放置了两个目录和一个文件：

```
workspace
data
config.php 
```

所有这些都在根中。当“工作区”和“数据”被忽略时，config.php 正在推送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:18:08.610

# mysql - 在重定向页面中提交表单时出现 SQL 错误

> ID：12449747
> 
> 赞同：0
> 
> 时间：2012-09-16T18:57:14.017
> 
> 标签：mysql, sql, pdo, php

> **可能重复：**
> [警告：PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens in](https://stackoverflow.com/questions/2713566/warning-pdostatementexecute-sqlstatehy093-invalid-parameter-number-num)

我尝试提交具有不同广告类型选项的广告表单，但是当我提交给出此错误的表单时：

> 错误：SQLSTATE[HY093]：无效的参数号：绑定变量的数量与标记的数量不匹配

SQL 代码：

```
try
{
$pdo_options[PDO::ATTR_ERRMODE] = PDO::ERRMODE_EXCEPTION;
$bdd = new PDO('mysql:host=localhost;dbname=test', 'root', '', $pdo_options);
$req = $bdd->prepare('INSERT INTO ads (kind, kind2, kindsale, titre, price, money, country, state, county, city, adress, phone, message, image, image2, image3, image4, image5, image6, inputid, date, ldesc, email, account, room, area, uarea, file, mark, miles, mi) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)');
$req->execute(array($_POST['kind'], $_POST['kind2'], $_POST['kindsale'], $_POST['titre'], $_POST['price'], $_POST['money'], $_POST['country'], $_POST['state'], $_POST['county'], $_POST['city'], $_POST['adress'], $_POST['phone'], $_POST['message'], '1'.$name.$name6.$_FILES['image']['name'], '2'.$name2.$name5.$_FILES['image2']['name'], '3'.$name3.$name4.$_FILES['image3']['name'], '4'.$name4.$name3.$_FILES['image4']['name'], '5'.$name5.$name2.$_FILES['image5']['name'], '6'.$name6.$name.$_FILES['image6']['name'], $_POST['inputid'], $_POST['date'], $_POST['ldesc'], $_POST['email'], $_POST['taccount'], $_POST['room'], $_POST['area'], $_POST['uarea'].$name3.$name4.$_FILES['file']['name'], $_POST['mark'], $_POST['mileage'], $_POST['mi']));
header('Location: index.php');
}
catch(Exception $e)
{
    die('Error: '.$e->getMessage());
} 
```

表单中的一些数据用 $('.thing').hide(); 隐藏。在 jquery 中，但我认为即使隐藏这些也提交为 void 所以存在。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:01:11.247

哦不不不.. 尝试赶上您称为*[数据库规范化](http://databases.about.com/od/specificproducts/a/normalization.htm)*的设计，您的表`ads`正在为它尖叫。其次，您的错误与查询中的问号`?`或占位符的数量没有足够的参数（或太多）有关。只需数一数，看看哪里缺少一两个（或更多）（或太多）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:02:33.570

您提供的参数数量少于 SQL 语句中的参数数量。也就是说，您在 SQL 语句中有 32 个问号，这意味着您必须提供 32 个值。如果我的计数是正确的，你只提供了 30 个。

# c# - 尝试使用 datatable.select 获取不同的值

> ID：12449748
> 
> 赞同：0
> 
> 时间：2012-09-16T18:57:28.037
> 
> 标签：c#, xml, winforms, ado.net

我正在尝试从 xml 文件中获取数据，然后使用 datatable.Select() 进行过滤以在组合框中添加值。

但是我得到了重复的值，所以我需要应用 DISTINCT 排序。试过 dt1.DefaultView.ToTable 但没有运气。仍然在组合框中添加重复的项目。下面是我正在使用的代码片段：

```
DataTable dt1 = XMLCategory.ds.Tables["AgencyInfo"];

DataRow[] foundRows;
foundRows = dt1.Select("AgencyRegion='" + cmbAgPr_Region.Text + "'");
DataTable dt2 = dt1.DefaultView.ToTable(true, "AgencyMarket");
for (int i = 0; i < foundRows.Length; i++)
{
    cmbAgPr_Market.Items.Add(foundRows[i][1]);
} 
```

任何帮助..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:37:33.513

您可以使用 LINQ with`GroupBy`来获得不同。下面的示例代码假设您需要在“columnName”列中区分`string`类型：

```
 var foundRows = dataTable.Select("...")
                  .GroupBy(row => row.Field<string>("columnName"), 
                           (key, group) => group.First())
                  .ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:16:06.000

**编辑：小错误已修复。**

您应该使用 dt2 中的行填充列表框，而不是 dt1。您的 ToTable 返回到 dt2，但 foundRows 来自 dt1。这应该可以解决问题，如下所示。

```
DataRow[] distinctRows = dt2.Select();
for (int i=0; i < distinctRows.Length; i++)
{
   cmbAgPr_Market.Items.Add(distinctRows[i][1]); 
} 
```

只是为了完整起见，您可以对 distinctRows 中的行进行 foreach 作为替代构造：

```
foreach(Row currentRow in distinctRows)
{
   cmbAgPr_Market.Items.Add(currentRow[1]);
} 
```

# java - 从 AsyncTask 将数据返回到活动的问题

> ID：12449750
> 
> 赞同：0
> 
> 时间：2012-09-16T18:57:56.257
> 
> 标签：java, android

我无法从单独的类文件中的异步任务中将数据返回到我的主要活动中。

这是我的主要活动：

```
public class Main extends Activity {
EditText searchOne;
EditText searchTwo;

Button findMovies;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.totlayout);

    //set the UI elements
    searchOne = (EditText) findViewById(R.id.searchOne);
    searchTwo = (EditText) findViewById(R.id.searchTwo);

    findMovies = (Button) findViewById(R.id.findMovies);

}
public void displayResults(View view){
    //do something in response to button
    Intent intent = new Intent(this, DisplayResultsActivity.class);

    //make person search url1
    final StringBuilder personSearchURLOne = new StringBuilder(getName.getName1(searchOne)); 
    final String searchURLOne = personSearchURLOne.toString();
    Log.d("searchurlone", searchURLOne.toString());

    //make person search url2
    final StringBuilder personSearchURLTwo = new StringBuilder(getName.getName2(searchTwo));
    final String searchURLTwo = personSearchURLTwo.toString();

    //get ID 1 this needs to get data back from asynctask in the type string to be passed to buildCreditURL
    new getFirstID().execute(searchURLOne);

    //get ID 2
    new getFirstID().execute(searchURLTwo);

    //make credit search url1
    final StringBuilder creditURLOne = new StringBuilder(buildCreditURL.getCreditURLOne(firstID)); 
```

这是包含我的 AsyncTask 的单独类文件：

```
package com.tot.tipofthetongue;

import android.os.AsyncTask;

import android.util.Log;

import org.json.JSONArray;
import org.json.JSONException;

import org.json.JSONObject;

public class getFirstID extends AsyncTask<String, Void, String> {

public static String TAG_ID = "id";
public static String TAG_RESULTS = "results";

String personOne = null;
static String firstID = null;

@Override
protected String doInBackground(String... personSearchURLOne) {
    Log.d("personSearchURLOne in getFirstID containts", personSearchURLOne[0]);

    JSONArray results = null;

    JSONParser jParser = new JSONParser();

    JSONObject jSon = jParser.doInBackground(personSearchURLOne[0]);

    try{
        results = jSon.getJSONArray(TAG_RESULTS);

        for(int i = 0; i < results.length(); i++){
            JSONObject r = results.getJSONObject(i);
            firstID = r.getString(TAG_ID);

        }

    }
    catch(JSONException e){
        Log.e("Error", e.toString());
    }
            /need this value as string to be passed back to the main activity
    return firstID;

}

} 
```

如何将 firstID 作为字符串输出到我的主要活动中，以便可以在属于另一个单独的类文件的另一个方法中使用它。

更新的 getFirstID：

```
package com.tot.tipofthetongue;

import android.os.AsyncTask;

import android.util.Log;

import org.json.JSONArray;
import org.json.JSONException;

import org.json.JSONObject;

 public class getFirstID extends AsyncTask<String, Void, String> {

public static String TAG_ID = "id";
public static String TAG_RESULTS = "results";

String personOne = null;
static String firstID = null;

@Override
protected String doInBackground(String... personSearchURLOne) {

    Log.d("personSearchURLOne in getFirstID containts", personSearchURLOne[0]);

    JSONArray results = null;

    JSONParser jParser = new JSONParser();

    JSONObject jSon = jParser.doInBackground(personSearchURLOne[0]);

    try{
        results = jSon.getJSONArray(TAG_RESULTS);

        for(int i = 0; i < results.length(); i++){
            JSONObject r = results.getJSONObject(i);
            firstID = r.getString(TAG_ID);

        }

    }
    catch(JSONException e){
        Log.e("Error", e.toString());
    }
    return firstID;

}
@Override
public void onPostExecute(String firstID){

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:06:14.787

覆盖类中的`onPostExecute(String result)`方法`getFirstID`：

```
@Override protected void onPostExecute(String result) {
    // Invoke method on Main activity or do other action.
} 
```

该方法由 UI 线程执行，可以更新视图。您可以通过在构造函数中将其`MainActivity`设置在类的字段中来添加对 的引用。`getFirstID`

希望能帮助到你！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-16T19:06:58.547

一个非常简单的方法是这样做。

```
public class getFirstID extends AsyncTask<String, Void, Pair<String, String>> {
    public static interface MyAsyncCallback {
        /**
         * Called when the AsyncTask is finished processing the url.
         * @param url the url that the firstId was from
         * @param firstId the id that was parsed out of the json object
         */
        public void setFirstId(String url, String firstId);
    }

    private final MyAsyncCallback mCallback;

    public getFirstID(MyAsyncCallback callback) {
       mCallback = callback;
    }

   public Pair<String,String> doInBackground(String... params) {
       String firstID = parseJsonForID(params); // I am not going to copy your alg into here.
       return Pair.create(params[0], firstId);
   }

   public void onPostExecute(Pair<String,String> urlAndFirstId) {
     mCallback.setFirstId(urlAndFirstId.first, urlAndFirstId.second);
   }
}

public class Main extends Activity implements MyAsyncCallback {
  ....

 public void setFirstId(String url, String firstID) {
      // Example
      Intent intent = new Intent(this, OtherActivity.class);
      intent.putExtra("firstId", firstId);
      intent.putExtra("url", url);
      startActivity(intent);
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:05:55.553

您可以使用意图将内容发送到另一个活动。

```
Intent intent = new Intent(this, YourActivity.class);
intent.putExtra("name", string); 
```

[在这里](http://developer.android.com/training/basics/firstapp/starting-activity.html)阅读

或者你可以把你的 AsyncTask 类放在你的活动类中。

```
public class Main extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.get_data);

}

private class Download extends AsyncTask <Void, Void, String> {

    protected String doInBackground(Void...params) {

    }

    @Override
    protected void onPostExecute(String result) {

    }

    @Override
    protected void onPreExecute() {

    }

}

} 
```

# android - 带有警报的未决意图在后台服务中不起作用

> ID：12449752
> 
> 赞同：0
> 
> 时间：2012-09-16T18:59:03.797
> 
> 标签：android, service, alarmmanager, android-pendingintent

我有几个待定意图，我想在广播接收器启动操作运行时创建它们。每个意图都会在给定时间触发警报。我能够在活动中做到这一点，但它在服务中不起作用。

这很奇怪，因为 logcat 显示数据正在处理到 for 循环和函数中，但是到达时间时警报并没有响起。

你能看看我的代码，让我知道我缺少什么吗？

```
public class AlarmsService extends Service {

    DatabaseSqlite db = new DatabaseSqlite(this);
    List<Alerts> listAlerts;

    PendingIntent sender;
    Intent intent;
    AlarmManager am;
    int id;
    private int intHour=0;
    private int intMin=0;
    private int intDay=0;
    private int intMonth=0;
    private int intYear=0;

    String alertInMills;
    String alertDuration;
    String eventName ;
    int eventState;

    private String sAlertInMillis;

    String tag = "alerttService";

    @Override
    public void onCreate() {
        super.onCreate();
        Toast.makeText(this, "Created from Alerts service ...",
                Toast.LENGTH_LONG).show();
        Log.i(tag, "Service created...");

    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.d("TAG", "started onstart command Created from Alerts service .");
        return super.onStartCommand(intent, flags, startId);// START_STICKY;
    }

    @Override
    public void onStart(final Intent intent, int startId) {
        super.onStart(intent, startId);

        Toast.makeText(this, "Created service started...",
                Toast.LENGTH_LONG).show();
        Log.i(tag, "Service started...");

        Thread thread = new Thread() {

            public void run() {
                System.out.println("SERVICE -----start thread");
                Boolean x = true;
                while (x) {

                    db.open();
                    listAlerts = db.getAlertsforService();
                    db.close();
                    int alerts=listAlerts.size();

                    for (int i = 0; i < alerts; i++) {
                        Alerts item = listAlerts.get(i);

                     id =item.getRowId();                   
                     alertInMills = item.getAlertTime();
                     alertDuration = item.getAlertMinutes();
                     eventName = item.getEventName();
                     eventState=item.getEventState();

                     System.out.println("SERVICE ----eventName from service "+ eventName);
                     System.out.println("SERVICE ----id from service "+ id);
                     System.out.println("SERVICE ----alertDuration from service "+ alertDuration);
                     System.out.println("SERVICE ----alert UTC Time from alertInMills "+ alertInMills);
                     System.out.println("SERVICE ---- eventState from service "+  eventState);

                    resetAlarm(alertInMills,alertDuration);

                    }

                    x = false;

                }

            }
        };

        thread.start();

    }

    public void resetAlarm(String getAlertInMillisFromDB,
            String getAlertInMinutesFromDB) {

        // extract the military time from the UTC format
        String alertsMilitaryTime = formatUpdateAlertToMilitaryTime(getAlertInMillisFromDB);

        // find the hour and minute
        updateAlertHourAndMinute(alertsMilitaryTime);

        // extract date from the UTC format
        formatUpdateAlertYearMonthDay(getAlertInMillisFromDB);

        int intHour = getHour();
        int intMin = getMin();
        int intDay = getDay();
        int intMonth = getMonth();
        int intYear = getYear();
        String alertStringInMills = getStringAlertInMillis();

        System.out.println("SERVICE --- resetAlarm");
        System.out.println("SERVICE --- year "+intYear);
        System.out.println("SERVICE --- month "+intMonth);
        System.out.println("SERVICE --- day "+intDay);
        System.out.println("SERVICE --- hour "+intHour);
        System.out.println("SERVICE --- min "+intMin);

        updateAlert(id, eventName, getAlertInMinutesFromDB,
                getAlertInMillisFromDB, intYear, intMonth, intDay, intHour,
                intMin);

    }

    public void updateAlert(int id, String name,
             final String minutes,
            final String alertTime, int intYear, int intMonth, int intDay,
            int intHour, int intMin) {

          Intent osa = new Intent(AlarmsService.this.getApplicationContext(), OneShotAlarm.class);
          String idStringFormat=""+id+"";
          String warning="In "+ minutes +" Minutes";
          osa.putExtra("name", name);
          osa.putExtra("text", warning);
          osa.putExtra("id", idStringFormat);                 
          sender = PendingIntent.getBroadcast(AlarmsService.this.getApplicationContext(), id, osa, 0);
          am = (AlarmManager) getSystemService(ALARM_SERVICE);

        Calendar calendar = Calendar.getInstance();

        calendar.setTimeInMillis(System.currentTimeMillis());
        System.out.println( "SERVICE --- current time in millis" +calendar.getTimeInMillis());
        calendar.clear();
        //
        TimeZone timeZone = calendar.getTimeZone();
        calendar.setTimeZone(timeZone);

        calendar.set(intYear, intMonth, intDay, intHour, intMin, 0);

        System.out.println( "SERVICE --- Alert time in millis" +calendar.getTimeInMillis());

        am.cancel(sender);
        am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), sender);

    }} 
```

广播接收器：

```
package com.google.android.gcm.demo.app.Alerts;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class AlarmsBroadcastReceiver extends BroadcastReceiver {

    private static final String TAG = "BootReceiver";

    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)) 
        {
//      if (intent.getAction().equals("android.intent.action.BOOT_COMPLETED")) {

        Intent  startServiceIntent = new Intent(context, AlarmsService.class);
              context.startService(startServiceIntent);
                Log.d("TAG", "TestBroadcastReceiver");

               System.out.println( "test broadcast reciver...");   

        }

    }

} 
```

日志猫：

```
09-16 14:29:10.270: D/Exchange(263): BootReceiver onReceive
09-16 14:29:10.280: D/EAS SyncManager(263): !!! EAS SyncManager, onCreate
09-16 14:29:10.381: D/EAS SyncManager(263): !!! EAS SyncManager, onStartCommand
09-16 14:29:10.410: D/EAS SyncManager(263): !!! EAS SyncManager, stopping self
09-16 14:29:10.510: D/dalvikvm(203): GC_FOR_MALLOC freed 4559 objects / 383904 bytes in 66ms
09-16 14:29:10.551: I/CheckinService(203): Preparing to send checkin request
09-16 14:29:10.574: D/Eas Debug(263): Logging: 
09-16 14:29:10.580: D/EAS SyncManager(263): !!! EAS SyncManager, onDestroy
09-16 14:29:10.641: I/EventLogService(203): Accumulating logs since 1347819701556
09-16 14:29:11.040: D/dalvikvm(116): GC_EXTERNAL_ALLOC freed 3626 objects / 202712 bytes in 83ms
09-16 14:29:11.350: I/ActivityManager(58): Start proc com.android.alarmclock for broadcast com.android.alarmclock/.AlarmInitReceiver: pid=277 uid=10035 gids={}
09-16 14:29:11.390: D/MediaScannerService(224): start scanning volume internal
09-16 14:29:11.760: I/ActivityThread(277): Publishing provider com.android.alarmclock: com.android.alarmclock.AlarmProvider
09-16 14:29:11.900: I/ActivityManager(58): Start proc com.google.android.gcm.demo.app for broadcast com.google.android.gcm.demo.app/.Alerts.AlarmsBroadcastReceiver: pid=285 uid=10040 gids={3003, 1015}
09-16 14:29:12.200: D/TAG(285): TestBroadcastReceiver
09-16 14:29:12.200: I/System.out(285): test broadcast reciver...
09-16 14:29:12.280: I/alerttService(285): Service created...
09-16 14:29:12.280: D/TAG(285): started onstart command Created from Alerts service .
09-16 14:29:12.300: I/alerttService(285): Service started...
09-16 14:29:12.330: I/System.out(285): SERVICE -----start thread
09-16 14:29:12.480: I/System.out(285): database opened android.database.sqlite.SQLiteDatabase@44f27188
09-16 14:29:12.510: I/System.out(285): database closed 
09-16 14:29:12.510: I/System.out(285): SERVICE ----eventName from service Super GALS 1-4
09-16 14:29:12.510: I/System.out(285): SERVICE ----id from service 1
09-16 14:29:12.510: I/System.out(285): SERVICE ----alertDuration from service 30
09-16 14:29:12.510: I/System.out(285): SERVICE ----alert UTC Time from alertInMills 2012-09-16T08:30:00.000-04:00
09-16 14:29:12.510: I/System.out(285): SERVICE ---- eventState from service 0
09-16 14:29:12.510: I/System.out(285): SERVICE --- resetAlarm
09-16 14:29:12.510: I/System.out(285): SERVICE --- year 2012
09-16 14:29:12.510: I/System.out(285): SERVICE --- month 9
09-16 14:29:12.510: I/System.out(285): SERVICE --- day 16
09-16 14:29:12.510: I/System.out(285): SERVICE --- hour 8
09-16 14:29:12.510: I/System.out(285): SERVICE --- min 30
09-16 14:29:12.560: I/System.out(285): SERVICE --- current time in millis1347820152568
09-16 14:29:12.630: I/System.out(285): SERVICE --- Alert time in millis1350390600000
09-16 14:29:12.630: I/System.out(285): SERVICE ----eventName from service Super GALS 1-4
09-16 14:29:12.640: I/System.out(285): SERVICE ----id from service 2
09-16 14:29:12.640: I/System.out(285): SERVICE ----alertDuration from service 20
09-16 14:29:12.640: I/System.out(285): SERVICE ----alert UTC Time from alertInMills 2012-09-16T08:40:00.000-04:00
09-16 14:29:12.640: I/System.out(285): SERVICE ---- eventState from service 0
09-16 14:29:12.640: I/System.out(285): SERVICE --- resetAlarm
09-16 14:29:12.640: I/System.out(285): SERVICE --- year 2012
09-16 14:29:12.640: I/System.out(285): SERVICE --- month 9
09-16 14:29:12.640: I/System.out(285): SERVICE --- day 16
09-16 14:29:12.640: I/System.out(285): SERVICE --- hour 8
09-16 14:29:12.640: I/System.out(285): SERVICE --- min 40
09-16 14:29:12.640: I/System.out(285): SERVICE --- current time in millis1347820152650
09-16 14:29:12.650: I/System.out(285): SERVICE --- Alert time in millis1350391200000
09-16 14:29:12.650: I/System.out(285): SERVICE ----eventName from service Teeny Witches
09-16 14:29:12.650: I/System.out(285): SERVICE ----id from service 3
09-16 14:29:12.650: I/System.out(285): SERVICE ----alertDuration from service 30
09-16 14:29:12.650: I/System.out(285): SERVICE ----alert UTC Time from alertInMills 2012-09-16T02:36:00.000-04:00
09-16 14:29:12.650: I/System.out(285): SERVICE ---- eventState from service 0
09-16 14:29:12.650: I/System.out(285): SERVICE --- resetAlarm
09-16 14:29:12.650: I/System.out(285): SERVICE --- year 2012
09-16 14:29:12.650: I/System.out(285): SERVICE --- month 9
09-16 14:29:12.650: I/System.out(285): SERVICE --- day 16
09-16 14:29:12.650: I/System.out(285): SERVICE --- hour 2
09-16 14:29:12.650: I/System.out(285): SERVICE --- min 36
09-16 14:29:12.661: I/System.out(285): SERVICE --- current time in millis1347820152662
09-16 14:29:12.661: I/System.out(285): SERVICE --- Alert time in millis1350369360000
09-16 14:29:12.661: I/System.out(285): SERVICE ----eventName from service Parents and Anime
09-16 14:29:12.661: I/System.out(285): SERVICE ----id from service 4
09-16 14:29:12.661: I/System.out(285): SERVICE ----alertDuration from service 10
09-16 14:29:12.661: I/System.out(285): SERVICE ----alert UTC Time from alertInMills 2012-09-16T01:50:00.000-04:00
09-16 14:29:12.661: I/System.out(285): SERVICE ---- eventState from service 0
09-16 14:29:12.661: I/System.out(285): SERVICE --- resetAlarm
09-16 14:29:12.661: I/System.out(285): SERVICE --- year 2012
09-16 14:29:12.661: I/System.out(285): SERVICE --- month 9
09-16 14:29:12.661: I/System.out(285): SERVICE --- day 16
09-16 14:29:12.661: I/System.out(285): SERVICE --- hour 1
09-16 14:29:12.661: I/System.out(285): SERVICE --- min 50
09-16 14:29:12.670: I/System.out(285): SERVICE --- current time in millis1347820152673
09-16 14:29:12.670: I/System.out(285): SERVICE --- Alert time in millis1350366600000
09-16 14:29:12.670: I/System.out(285): SERVICE ----eventName from service Mobile Suit Gundam Movie 1
09-16 14:29:12.670: I/System.out(285): SERVICE ----id from service 5
09-16 14:29:12.670: I/System.out(285): SERVICE ----alertDuration from service 50
09-16 14:29:12.670: I/System.out(285): SERVICE ----alert UTC Time from alertInMills 2012-09-16T14:10:00.000-04:00
09-16 14:29:12.670: I/System.out(285): SERVICE ---- eventState from service 0
09-16 14:29:12.696: I/System.out(285): SERVICE --- resetAlarm
09-16 14:29:12.696: I/System.out(285): SERVICE --- year 2012
09-16 14:29:12.696: I/System.out(285): SERVICE --- month 9
09-16 14:29:12.696: I/System.out(285): SERVICE --- day 16
09-16 14:29:12.696: I/System.out(285): SERVICE --- hour 14
09-16 14:29:12.696: I/System.out(285): SERVICE --- min 10
09-16 14:29:12.700: I/System.out(285): SERVICE --- current time in millis1347820152704
09-16 14:29:12.700: I/System.out(285): SERVICE --- Alert time in millis1350411000000
09-16 14:29:12.700: I/System.out(285): SERVICE ----eventName from service To Love Ru 1-4
09-16 14:29:12.700: I/System.out(285): SERVICE ----id from service 6
09-16 14:29:12.700: I/System.out(285): SERVICE ----alertDuration from service 10
09-16 14:29:12.700: I/System.out(285): SERVICE ----alert UTC Time from alertInMills 2012-09-16T14:50:00.000-04:00
09-16 14:29:12.700: I/System.out(285): SERVICE ---- eventState from service 0
09-16 14:29:12.700: I/System.out(285): SERVICE --- resetAlarm
09-16 14:29:12.700: I/System.out(285): SERVICE --- year 2012
09-16 14:29:12.710: I/System.out(285): SERVICE --- month 9
09-16 14:29:12.710: I/System.out(285): SERVICE --- day 16
09-16 14:29:12.710: I/System.out(285): SERVICE --- hour 14
09-16 14:29:12.710: I/System.out(285): SERVICE --- min 50
09-16 14:29:12.710: I/System.out(285): SERVICE --- current time in millis1347820152717
09-16 14:29:12.710: I/System.out(285): SERVICE --- Alert time in millis1350413400000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:10:36.470

也许是因为你得到了一个`Broadcast Pending intent`而不是`Service Pending intent`

代替

```
PendingIntent.getBroadcast 
```

采用

```
PendingIntent.getService 
```

您当前时间和设定时间之间的差异也接近 29 天。你确定它是正确的。

在 calendar 中，当您设置月份时，月份从 0 而不是从 1 开始。[九月](http://developer.android.com/reference/java/util/Calendar.html#SEPTEMBER)是 8 而不是 9，这看起来是您设置的值。

# ios - stringByReplacingOccurrencesOfString 删除附加字符

> ID：12449756
> 
> 赞同：1
> 
> 时间：2012-09-16T18:59:37.410
> 
> 标签：ios, nsstring

尝试`UITextField`使用货币（我在 Stackoverflow 上看到的所有示例仅适用于美国区域设置，但在其他设置中失败）。

所以，我想从中删除货币符号`NSString`，

```
 NSLog(text);
    text = [textField.text stringByReplacingOccurrencesOfString:numberFormatter.currencySymbol withString:@""];
    NSLog(text); 
```

但是在输出中，我不仅删除了货币符号（ kr），而且还删除了字符（5）：

```
0 kr5
0 
```

# php - PHP foreach POST php 表单中的复选框

> ID：12449758
> 
> 赞同：0
> 
> 时间：2012-09-16T19:00:09.327
> 
> 标签：php, forms, loops

我使用该`foreach($_POST)`技术制作了可以使用单个提交按钮更新整个选项列表的动态表单，但是由于某种原因，我在使用复选框输入实现相同的事情时遇到了问题。

无论我取消选择哪些复选框，评估复选框并将表单中的最后一行视为我取消选择的行的脚本。换句话说，无论我取消选择哪个复选框，POST 脚本都会确定最后一个复选框被取消选中。这是我以前从未见过的非常奇怪的效果。

例如，这个 PHP 数组获取生成带有隐藏项目选项的库存项目行。

****请注意，我还没有采取安全措施。当我在逻辑上看到这项工作时，我会清理一切。目前我什至不想使用 REQUEST，但我想先看看这项工作。

```
<form action="update.php" method="post">
while($row=mysql_fetch_array($histresult))
    {
                echo '<tr height = "50px">';
                //We grab the product id as well as everything else we need.
                $customer_id= $row['customer_id'];
                $product_id= $row['product_id'];
                $link = $row['image_path'];
                $name = $row['name'];
                $sku_item_number = $row['sku_item_number'];
                $suggested_quantity = $row['suggested_quantity'];
                $sales_info = $row['sales_info'];
                $item_id = $row['id_product_customer_suggested_qty'];
                $customer_level = $row['level'];

                //Visibility Option Goes here
                echo '<td>';
                echo '<input name="i" type="hidden" value="'.$i.'">
                <input name="product_id[]" type="hidden" value="'.$product_id.'">
                <input name="customer_id[]" type="hidden" value="'.$customer_view.'">
                <input name="customer_level[]" type="hidden" value="'.$customer_level.'">';

                echo '<input name="cart_visible[]" type="checkbox" value = "1"';
                if (!in_array($product_id, $hidden))
                {
                    echo 'checked = "checked"';
                }
                echo '></td>';
                echo '<td>';
                echo '<a href="displayitem.php?product_id='.$product_id.'">'.$name.'</a>';
                 echo '</td>';
                 echo '<td>'.$sku_item_number.'</td>';
                 echo '<td>'.$product_id.'</td>';
                 echo '<td>'.$sales_info.'</td>';
                 echo '<td>'.$suggested_quantity.'</td>';
                         echo '</tr>';
<input type="submit" name="button" id="button" value="Submit">
</form>

//And then update.php looks like this:

$j=0;
foreach($_REQUEST['product_id'] as $key=>$product_id)
{ 
    echo 'j value is '.$j.'<br>';
    $customer_id = $_REQUEST['customer_id'][$key];
    $customer_level = $_REQUEST['customer_level'][$key];
    $price_level_id = $_REQUEST['price_level_id'][$key];
    $cart_visible = $_REQUEST['cart_visible'][$key];

    if ($cart_visible != 1)
    {
        $cart_visible = 0;
    }
    //echo 'Customer ID is '.$customer_id.'<br>';
    echo 'Testing - Product ID is '.$product_id.'<br>';
    //echo 'Customer Level is '.$customer_level.'<br>';
    //echo 'Price Level ID is '.$price_level_id.'<br>';
    echo 'Cart visibility selection is '.$cart_visible.'<br>';
} 
```

回显的调试行表明，无论我取消选择哪些行，它都会将表单中的最后一行视为被取消选择的行。例如，如果有 10 行并且我取消选中第 1、3 和 8 行的复选框，则表单将像用户取消选中第 8、9 和 10 个复选框一样。为什么它会专门为复选框执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:10:53.287

当您发布取消选中的复选框时，它不会发送其“值”，因此不在 POST 中。

如果复选框是数组名称的一部分，并且有 10 个复选框，其中 3 个被取消选中，则 POST 中的结果数组将仅具有 7 个索引 0 到 6。

要解决此问题，请为复选框名称指定数组的值。

我可能没有正确理解您的代码，但是像这样

```
$ite=0;    
while($row=mysql_fetch_array($histresult)){
      //....
      echo '<input name="cart_visible['.$ite.']" type="checkbox" value = "1"';
      //....
      $ite++;
} 
```

现在，假设您取消选中了第 3 个复选框，这意味着第三个索引将不存在。$cart_visible 部分代码应该是这样的

```
//if checkbox value exists, make $cart_visible to that value, else make $cart_visible to 0
$cart_visible = isset($_REQUEST['cart_visible'][$key])?$_REQUEST['cart_visible'][$key]:0; 
```

并删除 $cart_visible 的 if 语句

# winapi - SendMessage() 到 Spotify 不工作 (C++)

> ID：12449760
> 
> 赞同：0
> 
> 时间：2012-09-16T19:00:24.197
> 
> 标签：winapi, visual-c++, spotify, handle

我想使用 C++将[WM_APPCOMMAND发送到 Spotify](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646275%28v=vs.85%29.aspx)

我当前的代码如下所示：

```
DWORD dwThreadId = GetCurrentThreadId();
HDESK hDesktop = GetThreadDesktop(dwThreadId);
EnumWindows((WNDENUMPROC)&WndEnumProc, 0); 
```

还有：

```
BOOL CALLBACK Remote::WndEnumProc(HWND hwnd, LPARAM lParam) 
{
    TCHAR className[MAX_PATH];
    GetClassName(hwnd, className, sizeof(className));
    string name = className;
    if (name.compare("SpotifyMainWindow") == 0) {
        cout << SendMessage(hwnd, WM_APPCOMMAND, 0, APPCOMMAND_MEDIA_PLAY_PAUSE) << name << endl;
    }
    return TRUE; 
} 
```

头文件：

```
class Remote
{
public:
    static BOOL CALLBACK WndEnumProc(HWND, LPARAM);
}; 
```

问题是它返回**0SpotifyMainWindow**。它打印 1 或 0（SendMessage() 的返回值）和句柄的类。总而言之，这意味着它尝试将消息发送到 SpotifyMainWindow 但无法发送。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T21:31:40.970

该`WM_APPCOMMAND`消息希望以 的高位字提供“命令” `lParam`，您需要执行以下操作：

```
SendMessage(hwnd, WM_APPCOMMAND, 0, MAKELPARAM(0,APPCOMMAND_MEDIA_PLAY_PAUSE)); 
```

# android - 将文本字符串从 android 应用程序发送到网站上的表单？

> ID：12449761
> 
> 赞同：1
> 
> 时间：2012-09-16T19:00:29.577
> 
> 标签：android, html-input

我正在尝试将字符串从我的应用程序粘贴到网站。

我的应用程序如下所示：一个 EditText 和一个 Button。我的按钮打开一个带有打开文本框的网站。

```
<input name="FreeTextBox" type="text" id="FreeTextBox" style="width:64px;"> 
```

这是网站上的文本框

我的应用程序的 EditText id 是java`et2`中的变量`klass`。 `klassen = klass.getText().toString();`然后将 klass 变量制成一个字符串，称为`klassen`

当我点击我的按钮时，我打开了一个网站，然后我希望我的应用程序自动将我在 EditText 中写的任何内容输入到网站上的 FreeTextBox 中。

请给我建议如何做到这一点。这是我的第一个应用程序，所以我真的可以使用一些帮助。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T20:24:11.903

你对网站有控制权吗？如果没有，那么您将需要获取更多信息，例如表单操作和输入名称

```
<form name="input" action="html_form_action.php" >
Username: <input type="text" name="user" />
<input type="submit" value="Submit" />
</form> 
```

如果表单类似于上面的表单，我喜欢使用[JSOUP](http://jsoup.org)（下载并导入到您的项目中）

然后我会使用这样的代码：

```
Jsoup.connect("http://****/html_form_action.php").data("user",yourTextString).post(); 
```

此代码的效果与您将字符串粘贴到网站然后点击提交按钮的效果相同。但同样，这可能不是你要找的，所以请更具体（表单源代码和东西）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:24:38.453

```
 Use This Code

  // Getting String from EditText
   String url=editTextObj.getText().toString();

    /// Declear Intent For open browser**/

  Intent i = new Intent(Intent.ACTION_VIEW);

    /// pass url which i want to send or get from edittext**/
  i.setData(Uri.parse(url));
    // fire intent
  startActivity(i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:37:28.767

我认为您可以将文本添加到 HTTP 请求的 GET 参数或 POST 参数中。

如果您选择**GET**选项（安全性较低，但最简单），您只需执行以下操作：

```
String url = "http://www.mysite.com/myPage.php?parameter=value" 
```

如果您使用的是 PHP，$_GET['parameter'] 将等于“value”，那么您可以使用您的 PHP 代码设置您想要的字段。

现在，如果您想使用**POST**方式，则必须查看文档。实际上，Rishabh 的回答是一个很好的开始。

*（请不要忘记接受对您有帮助的答案;-)）*

# java - Java Sorting：按属性对对象数组进行排序，对象不允许使用Comparable

> ID：12449766
> 
> 赞同：19
> 
> 时间：2012-09-16T19:01:14.337
> 
> 标签：java, arrays, sorting, properties, comparable

我有一个类 Library，它包含 Book 对象数组，我需要根据 Book 的属性（Title 或 PageNumber）对数组进行排序。问题是我不允许将 Comparable 类与 Book 一起使用。你会如何推荐我对图书馆中的书籍数组进行排序？写我自己的排序？或者有没有更简单的方法？如果您需要代码片段，请询问！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-16T19:04:28.470

您可以提供一个`Comparator`用于比较您希望的任何类型，`Comparable`或者以其他方式。

对于您使用的数组和集合

```
Arrays.sort(array, myComparator);
Collections.sort(list, myComparator); 
```

甚至像 TreeSet 这样的排序集合也可以使用自定义 Comparator

例如

```
Collections.sort(books, new Comparator<Book>() {
   public int compare(Book b1, Book b2) {
      return if b1 is greater return +1, if b2 is smaller return -1 otherwise 0
   }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-16T19:47:17.157

如果您可以使用`Comparators`，请为您需要的每种排序类型编写一个，例如，升序表示书名，降序表示页码。如果第一个参数大于第二个参数，则a的`compare`方法必须返回正数，如果第一个参数小于第二个参数，则返回负数，如果它们相等，则返回零。`Comparator`

```
import java.util.Comparator;
import java.util.List;
import java.util.Arrays;

class Book{
    String title;
    int pageNumber;

    public Book(String title, int pageNumber){
        this.title = title;
        this.pageNumber = pageNumber;
    }

    String getTitle(){ return title; }
    int getPageNumber(){ return pageNumber; }

    public String toString(){
        return "(" + title + ", " + pageNumber + " pages)";
    }
}

public class Library{

    // These variables are static because you don't need multiple copies
    // for sorting, as they have no intrinsic state.
    static private Comparator<Book> ascTitle;
    static private Comparator<Book> descPageNumber;

    // We initialize static variables inside a static block.
    static {
        ascTitle = new Comparator<Book>(){
            @Override
            public int compare(Book b1, Book b2){
                return b1.getTitle().compareTo(b2.getTitle());
            }
        };

        descPageNumber = new Comparator<Book>(){
            @Override
            public int compare(Book b1, Book b2){
                // Java 7 has an Integer#compare function
                return Integer.compare(b1.getPageNumber(), b2.getPageNumber());
                // For Java < 7, use 
                // Integer.valueOf(n1).compareTo(n2);
                // DO NOT subtract numbers to make a comparison such as n2 - n1.
                // This can cause a negative overflow if the difference is larger 
                // than Integer.MAX_VALUE (e.g., n1 = 2^31 and n2 = -2^31)
            }
        };
    }

    private Book[] books;
    public Book[] getBooks(){ return books; }

    public void sortAscTitle(){
        Arrays.sort(books, ascTitle);
    }

    public void sortDescPageNumber(){
        Arrays.sort(books, descPageNumber);
    }

    public Library(Book[] books){
        this.books = books;
    }

    public static void main(String[] args){
        Library library = new Library( new Book[]{
            new Book("1984", 123), 
            new Book("I, Robot", 152), 
            new Book("Harry Potter and the Philosopher's Stone", 267),
            new Book("Harry Potter and the Goblet of Fire", 759),
            new Book("The Bible", 1623)
        });

        library.sortAscTitle();
        System.out.println(Arrays.toString(library.getBooks()));

        library.sortDescPageNumber();
        System.out.println(Arrays.toString(library.getBooks()));
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:07:42.603

将其粘贴到您的库中：

```
java.util.Collections.sort(bookList, bookComparator); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-05T13:08:09.327

扩展@PeterLawrey 对 Java 8 的回答，您现在可以使用[Lambda 表达式](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)而不是`Comparable<T>`委托：

```
Collections.sort(books, (firstBook, secondBook -> b1 is greater return +1, 
                                                  if b2 is smaller return -1 otherwise 0)); 
```

# java - java上的便携式应用程序与网络摄像头一起使用

> ID：12449769
> 
> 赞同：2
> 
> 时间：2012-09-16T19:01:25.803
> 
> 标签：java, windows, webcam

如果我能就我的问题获得建议，那就太好了：我正在使用一个应用程序，该应用程序应该向用户显示连接的 PC 摄像头列表。例如，使用我的笔记本电脑，我有一个内置网络摄像头和一个 USB 摄像头。运行应用程序时，用户应该能够选择所需的设备并使用它创建照片。

我已经处理这个问题好几天了，并使用以下现有框架进行了研究：JMF、FMJ、VLCJ、Xuggler、JMyron、JavaFX、JavaCV。

其中一些已被弃用；其他需要为每台客户端 PC 安装 SDK。然而，我的应用程序的主要要求是可移植性，这让我厌倦了使用外部 SDK。

是否可以仅使用 Java 完成此任务？

现在我的应用程序应该只能在 Windows 操作系统上运行。

那么，我能否就如何解决我的问题提供一些建议？

问候， 叶夫根尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:33:47.270

很抱歉我这么早就发布了这个问题。我刚刚解决了这个问题。我使用了 LTI-CIVIL。它已经 5 年没有更新了……无论如何，它适用于我所有的网络摄像头。我已经更改了一些使用示例以在现有设备之间切换。这是我的代码：

```
 public class CaptureFrame extends ImageFrame
{
private Map <String, String>cams = new HashMap<String, String>();
public static void main(String[] args) throws CaptureException
{
    new CaptureFrame(DefaultCaptureSystemFactorySingleton.instance()).run();
}

private CaptureSystem system;
private CaptureStream captureStream;
private final CaptureSystemFactory factory;
private volatile boolean disposing = false;

public CaptureFrame(CaptureSystemFactory factory)
{   
    super("LTI-CIVIL");
    this.factory = factory;
}

public void run() throws CaptureException
{
    initCapture();

    setLocation(200, 200);
    addWindowListener(new WindowAdapter()
    {
        public void windowClosing(WindowEvent e)
        {
            try
            {
                disposeCapture();
            } catch (CaptureException e1)
            {
                e1.printStackTrace();
            }
            System.exit(0);
        }
    });
    setVisible(true);
    pack();

    system = factory.createCaptureSystem();
    system.init();
    List <CaptureDeviceInfo>list = system.getCaptureDeviceInfoList();
    String[] possibilities = new String[list.size()];
    int i=0;
    for (CaptureDeviceInfo info : list){
        possibilities[i] = info.getDescription();
        cams.put(info.getDescription(), info.getDeviceID());
        i++;
    }
    String s = (String) JOptionPane.showInputDialog(
            this,
            "Please, choose needed web camera:\n",
            "Select one...",
            JOptionPane.PLAIN_MESSAGE,
            null,
            possibilities, null);
    captureStream = system.openCaptureDeviceStream(cams.get(s));
    captureStream.setObserver(new MyCaptureObserver());
    setSize(captureStream.getVideoFormat().getWidth(), captureStream.getVideoFormat().getHeight());
    startCapture();
}

public void initCapture() throws CaptureException
{
    system = factory.createCaptureSystem();
    system.init();
}

public void startCapture() throws CaptureException
{
    captureStream.start();
}

public void disposeCapture() throws CaptureException
{
    disposing = true;
    if (captureStream != null)
    {   System.out.println("disposeCapture: stopping capture stream...");
        captureStream.stop();
        System.out.println("disposeCapture: stopped capture stream.");
        captureStream.dispose();
        captureStream = null;
    }
    if (system != null)
        system.dispose();
    System.out.println("disposeCapture done.");
}

class MyCaptureObserver implements CaptureObserver
{
    public void onError(CaptureStream sender, CaptureException e)
    {   
        e.printStackTrace();
    }

    public void onNewImage(CaptureStream sender, com.lti.civil.Image image)
    {   
        if (disposing)
            return;
        try
        {
            setImage(AWTImageConverter.toBufferedImage(image));
        }
        catch (Throwable t)
        {   t.printStackTrace();
        }
    }
}
} 
```

此外，我的项目的大小只有 3 MB 左右，所有适用于 Windows 操作系统的 .dll 库

我希望它会帮助某人。

问候， 叶夫根尼

# c# - 查看和查看模型重用以添加和编辑实体

> ID：12449770
> 
> 赞同：0
> 
> 时间：2012-09-16T19:01:33.633
> 
> 标签：c#, wpf, mvvm

我在打开的窗口中有一个表单以添加实体的新实例。要稍后编辑此实体，除了预先填充字段外，呈现相同表单的最佳方式是什么？

如果没有肮脏的 hack（沿着设置状态 [添加/编辑] 的路线）和违反单一责任原则，我发现很难重用相同的视图和视图模型。我目前正在考虑从包含所有重复 VM 代码的基本视图模型继承，但是我仍然坚持使用相同形式的 2 个版本。在保持干燥的同时做到这一点的最佳方法是什么？

我对 WPF 相当陌生，我正在使用 MVVM Light 框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:06:32.540

使用 Automapper，它基本上会让你的实体和视图模型之间的映射变得轻松。检索有问题的实体，并将其映射到视图模型以显示在您的表单上。您可以创建一个新的视图模型并将其绑定到您的视图，或者只要您清除现有字段，就可以重新使用相同的视图模型。

我建议在您的视图模型上设置一个状态，告诉您的 UI 是处于“创建”还是“编辑”模式。在我看来，这并不违反单一责任；视图模型告诉 UI 它应该如何显示自己。实际的编辑和创建功能应该包含在单独的 Command 对象中。

[http://automapper.org/](http://automapper.org/)

# c# - 是否存在递归迭代或反之亦然算法？

> ID：12449775
> 
> 赞同：2
> 
> 时间：2012-09-16T19:02:15.803
> 
> 标签：c#, algorithm, recursion, iteration

是否存在具有最高效率输出和尾递归的迭代递归或反之亦然算法？

首选的语言是 C#。

例如：在输入这​​个算法得到下一个简单的函数：

```
public static ulong Factorial(ulong n)
{
    return n == 0 ? 1 : n * Factorial(n - 1);
} 
```

并在处理返回后：

```
public static ulong Factorial(ulong n)
{
    ulong result = 1;
    for (ulong i = 1; i <= n; i++)
        result = result * i;
    return result;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:11:53.007

是的，总是可以从递归算法创建迭代版本。我不知道 C# 是否存在用于执行此操作的程序/代码重写器。这种技术已经得到了很好的研究，您可以找到一般参考资料，例如[从递归到迭代：优化是什么？（pdf文件）](http://www.cs.stonybrook.edu/~liu/papers/RecToItr-PEPM00.pdf)。
最坏的情况是简单地“模拟”堆上的堆栈以保存函数的状态以供将来使用。最简单的情况可能是尾递归循环。有很多关于这个主题的文章。
另一方面，从通用迭代算法创建递归版本的研究较少，但它确实存在，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:12:56.563

我唯一知道的是，递归可以同样转换为非递归`stack`，因为它实际上是这样做的，你可以自己做。

顺便说一句，您可能会想到某些无法转换为简单迭代的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:23:05.117

我不知道进行这种转换的算法的简单通用实现，但是使用非常通用的[动态编程方法](http://en.wikipedia.org/wiki/Dynamic_programming)**优化**递归算法是微不足道的。

例如，如果您将每个调用的结果**缓存**`Factorial`在字典中（来自`n`->的映射`Factorial(n)`），您将获得等于迭代的算法复杂度（但！只有时间复杂度。此方法使用更多内存） . 请注意，简单地“模仿”您自己的堆栈在算法复杂性方面并没有给您带来任何好处。

缓存非常容易实现和应用，适用于广泛的算法。

Wikipedia 页面上有关于您的示例算法的特定[条目。](http://en.wikipedia.org/wiki/Dynamic_programming#Fibonacci_sequence)

# objective-c - 从函数objective-c中无法访问变量

> ID：12449784
> 
> 赞同：0
> 
> 时间：2012-09-16T19:03:21.917
> 
> 标签：objective-c, xcode, cocoa-touch

我已经为 textview 创建了一个出口，我试图在一个函数中使用它，在它工作正常的函数之外，在它未声明的内部。当我将它与 StartFunction(textBox) 之类的函数一起传递时，它可以正常工作，但是该函数还必须与许多其他类似的东西一起使用，而且我不喜欢只使用函数传递所有内容的想法。

什么是更好的选择？

```
// Header File
- (IBAction)startButton_clicked:(id)sender;
@property (strong, nonatomic) IBOutlet UITextView *textBox;

// Main file
- (IBAction)startButton_clicked:(id)sender {
    if (currentlyOn == false) StartFunction(headLabel);
        else textBox.text = @"Already Started"; // Works fine here
            }

void StartFunction(UILabel *_headLabel)
{
    _headLabel.text = @"This works fine because it's passed with the function";
    textBox.text = @"textBox is undeclared here";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:09:24.720

函数不是类的一部分，它们无权访问实例变量。为什么不把这个函数变成一个实例方法呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:09:39.967

普通的 C 函数不能用作 Objective-C 类的成员。

在您的实现中声明它不会改变这一点。

使用 Objective-C 方法，或将对象传递给您的 C 函数（如果它们具有公共 iVar，这通常是糟糕的设计，或者如果您可以使用属性）。

第一个解决方案总是更好。如果您不希望方法的原型出现在您的公共头文件中，您可以使用类扩展。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:18:05.337

听起来您需要针对您的情况使用*方法*而不是*函数*。

*方法*实际上是一种函数*，*它默默地传递对自身实例的*引用*`self`，这被命名为。使用该引用，该方法可以访问*实例变量*、*方法*和*属性*。的用法`self`也经常为您默默添加。

因此，假设您的代码是`myClass`您方法的一部分，`startButton_clicked`则与函数**大致**相同（我们忽略了一些细节）：

```
IBAction startButton_clicked(myClass *self, id sender)
{
    if (currentlyRecording == false)
       StartRecordingAudio(headLabel);
    else
       self.textBox.text = @"Already Started"; // Works fine here
} 
```

注意额外的参数和`self`赋值中的使用。方法调用：

```
[someInstanceOfMyClass startButton_clicked:theSender]; 
```

大约**相当于**：

```
startButton_clicked(someInstanceOfMyClass, theSender); 
```

这就是默默传递`self`的来源。

*函数*根本不以这种方式处理，没有传递隐藏的参数，也缺少访问实例变量、属性和方法的静默方式。

方法和功能都有其用途，您可以根据需要进行选择。在您的情况下，听起来您需要一种方法来访问实例。

HTH。

# java - 实现 ItemListener

> ID：12449792
> 
> 赞同：1
> 
> 时间：2012-09-16T19:03:51.043
> 
> 标签：java, swing, jframe, jpanel, itemlistener

我在 itemStateChanged 部分遇到了问题。当我编译程序时，我得到“找不到变量”错误，我似乎无法找出我做错的地方。任何帮助深表感谢。谢谢你。

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Postcode extends JFrame implements ItemListener {

    public static void main(String[] arg) {
        JFrame fr = new JFrame("Melaka Postcode");
        fr.setSize(240, 125);
        fr.setVisible(true);
        fr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public Postcode() {
        String[] code = {"75450", "77000", "78000"};
        JLabel lb1 = new JLabel("Postcode");
        JLabel lb2 = new JLabel("District?");
        JPanel p1 = new JPanel();
        JPanel p2 = new JPanel();
        JComboBox cb = new JComboBox(code);
        cb.addItemListener(this);
        Font f = new Font("Verdana", Font.BOLD, 14);
        lb2.setFont(f);
        p1.add(lb1);
        p1.add(cb);
        p2.add(lb2);
    }

    public void itemStateChanged(ItemEvent e) {
        if (code.getSelectedItem().equals("75450")) {
            lb2.setText = "Bukit Beruang";
        }
        if (code.getSelectedItem().equals("77000")) {
            lb2.setText = "Jasin";
        }
        if (code.getSelectedItem().equals("75450")) {
            lb2.setText = "Alor Gajah";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T19:25:41.753

你的代码有很多问题，所以我必须在这里完全发布解决方案。修复：

将变量声明为成员变量

`getSelectedItem()`在 上调用`combobox`，而不是在 String 的数组上调用

`JLabel.setText()`正确使用

```
import java.awt.Font;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Postcode extends JFrame implements ItemListener {
    String[] code = { "75450", "77000", "78000" };

    JLabel lb1 = new JLabel("Postcode");

    JLabel lb2 = new JLabel("District?");

    JPanel p1 = new JPanel();

    JPanel p2 = new JPanel();

    JComboBox cb = new JComboBox(code);

    public static void main(String[] arg) {
        JFrame fr = new JFrame("Melaka Postcode");
        fr.setSize(240, 125);
        fr.setVisible(true);
        fr.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    }

    public Postcode() {
        cb.addItemListener(this);

        Font f = new Font("Verdana", Font.BOLD, 14);

        lb2.setFont(f);

        p1.add(lb1);
        p1.add(cb);

        p2.add(lb2);

    }

    public void itemStateChanged(ItemEvent e) {
        if (cb.getSelectedItem().equals("75450"))
            lb2.setText("Bukit Beruang");
        if (cb.getSelectedItem().equals("77000"))
            lb2.setText("Jasin");
        if (cb.getSelectedItem().equals("75450"))
            lb2.setText("Alor Gajah");
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:23:04.287

在 itemStateChanged 中，您正在调用`.getSelectedItem()`一个不知道的范围的变量`itemStateChanged()`，其次我认为您不想在 String 数组 ( `code`) 上调用此方法，我认为您使用`e.getItem()`or`e.getItemSelectable`代替。

请参阅有关[ItemEvent的文档](http://docs.oracle.com/javase/1.4.2/docs/api/java/awt/event/ItemEvent.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-22T11:34:13.187

编辑：刚刚在我自己的代码中发现了类似的奇怪行为。尝试使用 switch 语句而不是多个 if 语句来重写您的代码。

```
public void itemStateChanged(ItemEvent e) {
switch(cb.getSelectedItem().toString()){

case "75450":
lb2.setText("Bukit Beruang");
break;

case "77000":
lb2.setText("Jasin");
break;
case "75451":                 //Changed this into a unique value
lb2.setText("Alor Gajah");    //because the switch statements 
break;                        //will throw error when supplied
}                                 //with repeated values

} 
```

让我知道它是否对您有用！

# android - ivona tts 以及如何以编程方式获取所有已安装声音的列表？

> ID：12449801
> 
> 赞同：2
> 
> 时间：2012-09-16T19:05:06.067
> 
> 标签：android, text-to-speech

我安装了[https://play.google.com/store/apps/details?id=com.ivona.tts](https://play.google.com/store/apps/details?id=com.ivona.tts)和他们所有的声音。如何以编程方式从 ivona tts 获取所有已安装声音的列表？

android SDK 8中是否有任何命令？

我可以以编程方式更改 ivona tts 的 pico tts 吗？不适合我的程序的整个手机？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T12:10:01.680

要获取已安装 TTS 引擎的列表，您应该获取*com.ivona.tts*包的 uid：http:
[//developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationInfo (java.lang.String,% 20int%29](http://developer.android.com/reference/android/content/pm/PackageManager.html#getApplicationInfo(java.lang.String,%20int%29)
然后向**PackageManager**询问共享此 uid 的所有应用程序：http:
[//developer.android.com/reference/android/content/pm/PackageManager.html#getPackagesForUid (int%29](http://developer.android.com/reference/android/content/pm/PackageManager.html#getPackagesForUid(int%29)

要更改 TTS 引擎，请使用此方法： http:
[//developer.android.com/reference/android/speech/tts/TextToSpeech.html#setEngineByPackageName (java.lang.String%29](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#setEngineByPackageName(java.lang.String%29)

（请注意，此方法已弃用，在较新的 API 级别上，您应该使用以下构造函数：http:
[//developer.android.com/reference/android/speech/tts/TextToSpeech.html#TextToSpeech (android.content.Context ,%20android.speech.tts.TextToSpeech.OnInitListener,%20java.lang.String%29](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#TextToSpeech(android.content.Context,%20android.speech.tts.TextToSpeech.OnInitListener,%20java.lang.String%29) )

最后要设置特定的 Ivona 语音，您必须从语音包名称中解析语言/国家/地区/名称并将其传递给：http:
[//developer.android.com/reference/android/speech/tts/TextToSpeech.html#setLanguage (java.util .Locale%29](http://developer.android.com/reference/android/speech/tts/TextToSpeech.html#setLanguage(java.util.Locale%29) 例如选择 com.ivona.tts.voicebeta.eng.gbr.amy 你应该使用：

```
tts.setLanguage(new Locale("eng", "gbr", "amy")); 
```

这是将可用语音打印到 logcat 的示例 Activity：

```
package com.example.com.ivona.tts.test;

import java.util.regex.Matcher;
import java.util.regex.Pattern;

import android.app.Activity;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.util.Log;

public class TTSActivity extends Activity implements TextToSpeech.OnInitListener {
    private static final String TAG = "TTSActivity";
    private TextToSpeech tts;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        tts = new TextToSpeech(TTSActivity.this, TTSActivity.this);
    }

    @Override
    public void onInit(int status) {
        PackageManager pm = getPackageManager();

        ApplicationInfo ai = null;
        try {
            ai = pm.getApplicationInfo("com.ivona.tts", 0);
        } catch (NameNotFoundException e) {
            e.printStackTrace();
            return;
        }

        String[] ivonaVoices = pm.getPackagesForUid(ai.uid);

        Log.d(TAG, "Possible tts.setLanguage() usage:");
        Pattern p = Pattern.compile("^com\\.ivona\\.tts\\.voicebeta\\.([^.]+)\\.([^.]+)\\.([^.]+)$");
        for (String voice: ivonaVoices) {
            Matcher m = p.matcher(voice);
            if (m.matches())
                Log.d(TAG, String.format("tts.setLanguage(\"%s\", \"%s\", \"%s\")", m.group(1), m.group(2), m.group(3)));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T17:27:17.847

也许更简单的方法是使用任何活动类中的以下代码：

```
final int TTS_CHECK_DATA = 977; // arbitrary number
private ArrayList<String> myVoices = null; 
```

在某些活动类方法中：

```
Intent in = new Intent(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
// if you want specific, non-default TTS Engine also set package, else skip:
in = in.setPackage("com.acapelagroup.android.tts"); // or whatever package you want
startActivityForResult(in, TTS_CHECK_DATA); 
```

然后在 onActivityResult() 中：

```
@Override protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == TTS_CHECK_DATA && data != null) {
        myVoices = data.getStringArrayListExtra(TextToSpeech.Engine.EXTRA_AVAILABLE_VOICES);
    }
} 
```

现在 myVoices 充满了语言环境字符串（lang-country-variant），例如对于 Acapela，我得到：

```
pol-POL-Ania
eng-USA-Heather
eng-GBR-Rachel
rus-RUS-Alyona 
```

每个声音只有一个扬声器的 TTS 引擎可能不会给您第三个（变体）组件，例如 Ivona 现在只给您“eng-USA”、“eng-GBR”、“fra-FRA”等。

格雷格

# jquery - 使用 Jquery 将当前 url 复制到表单文本框中

> ID：12449802
> 
> 赞同：0
> 
> 时间：2012-09-16T19:05:12.450
> 
> 标签：jquery, forms

想将当前 url 复制到一个文本框中并在它之前创建一个提示

我已将课程分配给表单中的文本框

有没有办法使用接近以下的东西来完成这项工作？

```
$('.txtbox').val(window.location.pathname); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:13:52.123

这应该有效：

```
$('.txtbox').val(window.location.href); 
```

# c# - 如何禁用面板的上下文菜单

> ID：12449803
> 
> 赞同：0
> 
> 时间：2012-09-16T19:05:14.180
> 
> 标签：c#

我有两个面板 - panel1 和 panel2

我希望我的上下文菜单仅适用于 panel1 而不是 panel2。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:09:15.880

将面板的上下文菜单设置为 null

```
panel1.ContextMenu = null; 
```

如果您想要一个具有上下文菜单的面板，您应该将您的上下文菜单设置为该面板。因此，如果您不想要该面板上的上下文菜单， **请不要设置它**。

# jquery - 在 document.ready 上将 HTML 选项设置为选中

> ID：12449808
> 
> 赞同：0
> 
> 时间：2012-09-16T19:05:52.713
> 
> 标签：jquery, html

我在尝试将选择选项设置为“已选择”时遇到问题，它似乎不起作用

**jQuery**

```
<script>
   $(function(){
      $(document).ready(function(){
         $("select[name=searchType] option[value=title]").attr("selected", "selected");
       });
   });
</script> 
```

**html 标记**

```
<select name="searchType">
   <option value="isbn">ISBN</option>
   <option value="title">Title</option>
   <option value="author">Author</option>
</select> 
```

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:12:59.700

尝试

```
$('select[name="searchType"] option[value="title"]').prop('selected', true); 
```

另外，检查您的选择器是否返回元素

```
console.log($('select[name="searchType"] option[value="title"]')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:13:03.687

考虑`selected`直接在标记中使用属性：

```
<select name="searchType">
   <option value="isbn">ISBN</option>
   <option value="title" selected="selected">Title</option>
   <option value="author">Author</option>
</select> 
```

# vb.net - Sub提前结束了？

> ID：12449813
> 
> 赞同：2
> 
> 时间：2012-09-16T19:06:20.793
> 
> 标签：vb.net

```
 For i As Integer = 0 To _rows.Count
        If (_rows(i).LeftOffset > largestOffset) Then
            largestOffset = _rows(i).LeftOffset
        End If
    Next i

    For i As Integer = 0 To _rows.Count 
```

这段代码永远不会到达第二个，我可以在 End If 上放一个断点，它会像它应该那样触发 _rows.Count ，但是如果第二个 for 或之后的任何断点永远不会到达。没有错误消息，程序没有冻结或任何东西，它的行为就像我做的一样：

```
 For i As Integer = 0 To _rows.Count
        If (_rows(i).LeftOffset > largestOffset) Then
            largestOffset = _rows(i).LeftOffset
        End If
    Next i

    Return

    For i As Integer = 0 To _rows.Count 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:09:55.643

它应该是 _rows.Count-1 作为上限。最后一次循环将因 IndexOutOfRangeException 而失败。

我发现在 VB.net 的一些地方，特别是在 Form_Load 中，调试器没有显示错误，Sub 只是默默地退出，程序继续运行。但是，它周围的 try...catch 块会捕获异常。

# javascript - 选择框选定索引更改后清除输入文本框字段

> ID：12449814
> 
> 赞同：0
> 
> 时间：2012-09-16T19:06:23.537
> 
> 标签：javascript, jquery

我正在尝试清除`Input`字段的当前值，`totalA`并且`qtyA`当一个`select`框的选定值`acct`已更改时。

到目前为止我有这段代码，但不确定在哪里清除这些值。

```
<script language="javascript">
$(document).ready(function() {
    $("#acct").on('change', function() {
        var selVal = $(this).val();
        if (selVal == 'Full-Time') { // Full Time
            $('.parttime').hide();
            $('.fulltime').show();
            $('.agent').show();
            $('.error').hide();
        }
        else if (selVal == 'Part-Time') { // Part Time
            $('.parttime').show();
            $('.fulltime').hide();
            $('.agent').show();
            $('.error').hide();
        }
        else {
            $('.parttime').hide();
            $('.fulltime').hide();
            $('.agent').hide();
            $('.error').show();
        }
    });

    $('#qtyA').on('change', function() {
        var selVal = $("#acct").val();
        if (!isNaN($(this).val())) {
            var total = 0;
            if (selVal == 'Full-Time') {
                total = parseInt($(this).val()) * 1280;
            }
            else if (selVal == 'Part-Time') {
                total = parseInt($(this).val()) * 720;
            }
            $('#totalA').val(total.toFixed(2));
        }
        else {
            $(this).val('0');
             $('#totalA').val('0.00');
        }
    });
});
</script> 
```

`select`箱码：

```
<p>
   <label for="acct" style="margin-right:45px;"><strong />Account Type<strong><font color="red" size="3"> * </font></strong></label>
   <select name="acct" style="background-color:white;"  id="acct" value="" class="validate[custom[cname]] text-input">
      <option value="Full-Time">Full-Time</option>
      <option value="Part-Time">Part-Time</option>
      <option selected="selected" value=""></option>
   </select>
</p> 
```

`Input`字段：

```
<p>
<table class="agent">
    <tr>
        <td>
            <lable style="margin-right:89px;"># of Agent(s)<font color="red" size="3"> * </font></lable>
        </td>
        <td>
            <input style="width:25px; margin-left:5px;" type="text" name="qtyA" id="qtyA" />
        </td>
        <td>
            X  &nbsp; $<label id="acctFull Time" class="desc fulltime" style="display:none">1280</label>
            <label id="acctPart Time" class="desc parttime" style="display:none">720</label> = &nbsp;
        </td>
        <td>
            $<input style="width:65px; margin-left:5px;" type="text" readonly="readonly" name="totalA" id="totalA" onchange="calculate()" />
        </td>
    </tr>
</table>
</p>
<p class="error" align="center">Please select an Account Type.</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:43:47.910

我希望我确实让您正确...您想在和**onChange** of中**重置值**？如果我是对的，你可以试试这个：`#totalA``#qtyA` **`#acct`**

 **```
$(document).ready(function() {
  $("#acct").on('change', function() {
    resetValues();

    var selVal = $(this).val();
    if (selVal == 'Full-Time') { // Full Time
        $('.parttime').hide();
        $('.fulltime').show();
        $('.agent').show();
        $('.error').hide();
    }
    else if (selVal == 'Part-Time') { // Part Time
        $('.parttime').show();
        $('.fulltime').hide();
        $('.agent').show();
        $('.error').hide();
    }
    else {
        $('.parttime').hide();
        $('.fulltime').hide();
        $('.agent').hide();
        $('.error').show();
    }
  });

  $('#qtyA').on('change', function() {
    var selVal = $("#acct").val();
    if (!isNaN($(this).val())) {
        var total = 0;
        if (selVal == 'Full-Time') {
            total = parseInt($(this).val()) * 1280;
        }
        else if (selVal == 'Part-Time') {
            total = parseInt($(this).val()) * 720;
        }
        $('#totalA').val(total.toFixed(2));
    }
    else {
        resetValues();
    }
  });

  function resetValues()
  {
     $('#qtyA').val('0'); // or set empty
     $('#totalA').val('0.00');   // or set empty
  }
}); 
```

正如您在**输入无效值时重置值一样，**`#qtyA`我*创建了一个函数*，并在更改开始时**添加了**对它的调用*eventHandler*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:13:19.960

```
<script language="javascript">
$(document).ready(function() {
    $("#acct").on('change', function() {
        var selVal = $(this).val();
        if (selVal == 'Full-Time') { // Full Time
        $('#qtyA').val('0'); // or set empty
            $('#totalA').val('0.00');   // or set empty
            $('.parttime').hide();
            $('.fulltime').show();
            $('.agent').show();
            $('.error').hide();
        }
        else if (selVal == 'Part-Time') { // Part Time
        $('#qtyA').val('0'); // or set empty
            $('#totalA').val('0.00');   // or set empty
            $('.parttime').show();
            $('.fulltime').hide();
            $('.agent').show();
            $('.error').hide();
        }
        else {
        $('#qtyA').val('0'); // or set empty
            $('#totalA').val('0.00');   // or set empty
            $('.parttime').hide();
            $('.fulltime').hide();
            $('.agent').hide();
            $('.error').show();
        }
    }); 
```

我没有把它放在 onchange 函数上，而是在 ready 函数中添加了脚本，所以当用户选择 div 时它会改变**

# jakarta-ee - Maven tomcat7-maven-plugin not found 错误

> ID：12449816
> 
> 赞同：8
> 
> 时间：2012-09-16T19:06:28.843
> 
> 标签：jakarta-ee, tomcat, maven, maven-3

我是使用 Maven 的新手。搜索了很多，但没有成功。尽力了。有人向我解释如何解决这个问题。您当前使用 struts2 和 tomcat 7 的任何 pom 都将非常有帮助。

我正在使用 maven3

**错误**

*插件 'org.apache.tomcat.maven:tomcat7-maven-plugin:2.0-SNAPSHOT' 未找到*

我在[http://people.apache.org/repo/m2-snapshot-repository/org/apache/tomcat/](http://people.apache.org/repo/m2-snapshot-repository/org/apache/tomcat/)看到这个插件。从这里获得链接[http://tomcat.apache.org/tomcat-7.0-doc/maven-jars.html#Using_Tomcat_libraries_With_Maven](http://tomcat.apache.org/tomcat-7.0-doc/maven-jars.html#Using_Tomcat_libraries_With_Maven)

**我的 pom.xml**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>Struts2_Maven_Web</groupId>
    <artifactId>Struts2_Maven_Web</artifactId>
    <packaging>war</packaging>
    <version>1.0</version>
    <name>Struts2_Maven_Web Maven Webapp</name>
    <url>http://maven.apache.org</url>
    <dependencies>

        <dependency>
            <groupId>org.apache.struts</groupId>
            <artifactId>struts2-core</artifactId>
            <version>2.3.4.1</version>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>3.8.1</version>
            <scope>test</scope>
        </dependency>

    </dependencies>

    <repositories>
        <repository>
            <id>apache.snapshots</id>
            <url>http://repository.apache.org/content/groups/snapshots-group/</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </repository>
    </repositories>

    <pluginRepositories>
        <pluginRepository>
            <id>apache.snapshots</id>
            <name>Apache Snapshots</name>
            <url>http://repository.apache.org/content/groups/snapshots-group/</url>
            <releases>
                <enabled>false</enabled>
            </releases>
            <snapshots>
                <enabled>true</enabled>
            </snapshots>
        </pluginRepository>
    </pluginRepositories>

    <build>
        <finalName>Struts2_Maven_Web</finalName>

        <plugins>

            <plugin>
                <groupId>org.apache.tomcat.maven</groupId>
                <artifactId>tomcat7-maven-plugin</artifactId>
                <version>2.0-SNAPSHOT</version>
                <configuration>
                    <path>/</path>
                </configuration>
            </plugin>
        </plugins>

    </build>

</project> 
```

**已编辑* *** ** *** ***

我刚刚找到了 2.0 版，并且解决得很好。

*我应该使用这个。2.0 和 2.0-SNAPSHOT 之间的区别。任何人？.*

```
 <plugin>
          <groupId>org.apache.tomcat.maven</groupId>
          <artifactId>tomcat7-maven-plugin</artifactId>
          <version>2.0</version>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-16T19:28:02.700

您需要使用不带 SNAPSHOT的**2.0版本。**

这是因为该插件是在 9 月 10 日发布的，据我所知，当发布插件或依赖项时，快照版本会从存储库中删除。

# mysql - 从每个类别中选择几个小 id

> ID：12449819
> 
> 赞同：0
> 
> 时间：2012-09-16T19:06:48.437
> 
> 标签：mysql

例如给定这张表

## 编号 | 类别

1 | 10

2 | 10

3 | 10

4 | 10

5 | 20

6 | 20

7 | 20

8 | 30

9 | 30

10 | 30

11 | 30

我们想从每个类别中获取前 2 个小 id，也就是我们需要这个结果

1

2

5

6

8

9

我写了这个查询和他的作品

```
 SELECT MIN(id) AS id FROM mytable GROUP BY category  
        UNION 
        SELECT MIN(id) AS id FROM mytable WHERE 
        id NOT IN (SELECT MIN(id) AS id FROM mytable GROUP BY category) GROUP BY category

        ORDER BY id 
```

但这里有一个问题，如果我们想要每个类别的前 2 个 id，这可行，但如果我们想要每个类别的更多第一个小 id（例如 7），查询将非常困难。有人有想法，如何使这变得容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T09:48:13.467

@Quassnoi 写了几篇关于这个主题的非常有用的[博客文章](http://explainextended.com/2009/03/06/advanced-row-sampling/)，得出的结论是，如果你有一个复合索引，以下内容将非常高效`(category, id)`：

```
SELECT mytable.*
FROM   mytable JOIN (
  SELECT category, (
    SELECT   id
    FROM     mytable
    WHERE    mytable.category = categories.category
    ORDER BY id
    LIMIT    1, 1
  ) AS id
  FROM (
    SELECT DISTINCT category
    FROM   mytable
  ) AS categories
) AS limits ON mytable.category  <= limits.category
           AND mytable.category  >= limits.category
           AND IFNULL(mytable.id <= limits.id, TRUE) 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/dd27e/1/0)上查看。

要选择前 4 条记录，请更改`LIMIT 1,1`为`LIMIT 3,1`。更一般地说：要选择前*n*条记录，请更改`LIMIT 1,1`为.`LIMIT *n-1*,1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:10:15.597

要从每个组中找到前 N 个，请尝试以下指南：[http ://thenoyes.com/littlenoise/?p=36](http://thenoyes.com/littlenoise/?p=36)

# perl - Perl 内置函数查找指向列表中唯一条目的索引列表

> ID：12449823
> 
> 赞同：1
> 
> 时间：2012-09-16T19:07:23.333
> 
> 标签：perl, built-in

假设我有一个可能重复的字符串列表。我正在尝试查找该列表的排序索引列表，该列表包含字符串列表中的唯一条目。

例如给定：

```
my @string_list = ("hello", "world", "hello", "how", "are", "world"); 
```

带有索引列表的输出将是：`[0, 1, 3, 4]`对应于单词`"hello"`、`"world"`和。`"how"``"are"`

为此，我可以遍历输入列表并跟踪我在包含这些索引的字典中的列表中看到的元素，并稍后使用这些索引来获取唯一项的列表。

但是，我想知道 Perl 中是否还有其他内置函数、函数或数据结构可以促进这项任务，并且可能避免在循环中编写它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:21:47.357

这种概念没有内置的，因为它不是一件很普遍的事情。然而，它只有几行代码：

```
use strict;
use warnings;

my @string_list = qw( hello world hello how are world );

my @indices = do {
  my %seen;
  map { $seen{$string_list[$_]}++ ? () : ($_) } 0 .. $#string_list;
};

printf "[%s]\n", join ', ', @indices; 
```

**输出**

```
[0, 1, 3, 4] 
```

# mysql - Liquibase - 如何为现有数据库生成变更日志

> ID：12449824
> 
> 赞同：14
> 
> 时间：2012-09-16T19:07:26.733
> 
> 标签：mysql, liquibase

我正在尝试使用 liquibase 来生成 changeLog，首先是对我的数据库的当前状态进行快照。

环境细节：

*   操作系统：Windows 7 32 x86，
*   Java JDK 1.7，
*   来自 MySQL 的 mysql jdbc 驱动程序
*   液基 2.0.5。

我从命令行运行以下命令：

```
liquibase --driver=com.mysql.jdbc.Driver --changeLogFile=./structure.xml --url="jdbc:mysql://mysql.mysite.com" --username=<myuser> --password=<mypass> generateChangeLog 
```

它运行良好，并生成了输出文件。但输出文件只包含：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd"/> 
```

并且在我的数据库上没有创建任何表（我期待用于跟踪的两个表）。

我错过了什么？

* * *

编辑

是的，我指的是 liquibasechanlog 和 liquibasechangelock 表。我知道它们应该自动出现在数据库中。我的问题是为什么他们不在那里。是的，提供的用户有权执行此类任务。

而且它不是一个空的数据库。它有近 20 个表、10 个视图、数据......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-20T14:50:37.727

只需使用*ZNK*`--url`所说的标志指定数据库名称：

 *```
 --url="jdbc:mysql://mysql.mysite.com/database_name_here" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-11-23T16:37:06.820

在为 postgresql 数据库生成 changelog xml 时，我遇到了类似的问题。如果它可以帮助某人，我会在这里发布。`--defaultSchemaName`除了上述参数外，我还必须指定。所以在mysql中你会有类似的选择：

最终命令将如下所示：

```
liquibase --driver=org.postgresql.Driver --changeLogFile=db.changelog.xml  --classpath=postgresql-9.4-1201-jdbc41.jar --url="jdbc:postgresql://localhost:5432/wms"  --username=<USER_NAME> --password=<PASSWD> --defaultSchemaName=<SCHEMA_NAME> generateChangeLog 
```*

# php - 缩小其中嵌入了 PHP 的 HTML

> ID：12449826
> 
> 赞同：0
> 
> 时间：2012-09-16T19:07:36.190
> 
> 标签：php, html, minify

我知道这是一个*非常小*的性能调整，但我想缩小一个嵌入了 PHP 的 HTML 文档。

例如：

```
<div id="header">
  <?php
    echo "<ul>\n<li>";
    echo $somevar;
    echo "</li>\n<ul>\n";
  ?>
</div> 
```

将产生以下输出：

```
<div id="header">
  <ul>
    <li>Foobar</li>
  <ul>
</div> 
```

但我希望缩小输出。我可以从 PHP 输出中手动删除空格和行尾，所以它看起来像这样：

```
<div id="header">
  <ul><li>Foobar</li><ul></div> 
```

但是周围的 HTML 文档也需要缩小。如何才能做到这一点？（在更大的文档上下文中想象这个示例。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:12:40.513

您可以使用简单的正则表达式删除所有不必要的空格：

```
preg_replace('#>\s+<#s', '><', $html); 
```

`>`（这将删除和字符之间的所有空格`<`。）

现在要对生成的 html 代码执行此操作，可以使用输出缓冲：

```
<?php
ob_start();
// everything bellow is captured and not echoed
?>
<div id="header">
    ...
</div>
<?php
// get generated html and stop buffering
$html = ob_get_clean();
echo preg_replace('#>\s+<#s', '><', $html);
?> 
```

# python - 使用基于类的视图传递请求对象以形成实例

> ID：12449828
> 
> 赞同：2
> 
> 时间：2012-09-16T19:07:51.903
> 
> 标签：python, django, django-forms

嗨，我想使用基于类的视图的[片段](http://djangosnippets.org/snippets/158/)，但是这种形式的实例必须传递一个`User`对象 ex。

```
theform = forms.PasswordReset(request.user,request.POST) 
```

这是一个问题，如何使用基于类的视图来做到这一点：

```
class UserChangePassword(FormView):
    form_class = PasswordReset
    template_name = 'profile/change_password.html'
    success_url = reverse_lazy('user_account') 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T19:26:05.760

您在这里有两个选择：

编写自己的`get_form`方法。

```
def get_form(self, form_class):
    return form_class(self.request.user, self.request.POST) 
```

编写您自己的`get_form_kwargs`并更新表单的代码。

```
def get_form_kwargs(self):
    kwargs = super(UserChangePassword, self).get_form_kwargs()
    kwargs.update({'user': self.request.user, 'post': self.request.POST})
    return kwargs 
```

在这种情况下，您还需要更新表单以与`kwargs`对正常工作。

# c# - 如何在 Windows Phone 中停止情节提要动画？

> ID：12449834
> 
> 赞同：0
> 
> 时间：2012-09-16T19:09:04.347
> 
> 标签：c#, silverlight, windows-phone-7

我在 Blend 中用故事板制作了动画。动画在 MainPage 中，非常简单。

1）当我的应用程序启动时，屏幕底部的图像在屏幕顶部移动。

2) 我在 MainPage 也有一个按钮。当我按下它时，它会从 MainPage 转到 SecondPage。

当我在 SecondPage 上并按下后退按钮（我手机上的硬键）时，它转到 MainPage，动画再次开始。我怎么能阻止这个？我希望动画仅在我从头开始启动应用程序时播放。提前致谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:12:19.577

在您的项目中找到 App.xaml.cs 并编辑此函数内的代码

```
 private void Application_Launching(object sender, LaunchingEventArgs e)
    {
    } 
```

在此处添加一个布尔变量，例如 showanimation。并将其设置为真。

在主页上，在后面的代码中，覆盖 OnNavigatedTo 函数并检查布尔值，如果为真则启动动画，否则什么也不做。也不要忘记在开始动画后将变量设置为 false。希望能帮助到你 ：）

# ruby - Macports Ruby19 安装问题

> ID：12449835
> 
> 赞同：0
> 
> 时间：2012-09-16T19:09:07.283
> 
> 标签：ruby, macports, ruby-1.9.3

我正在学习 Rails，对 Macports 还很陌生。

`rails server`为我的项目运行时收到以下错误：

`/...config/initializers/session_store.rb:3: syntax error, unexpected ':', expecting $end`

我相信这个语法错误是由于运行低于 1.9.0 的 Rails 版本造成的，因为`ruby -v`给了我`ruby 1.8.7`.

问题是我确定我已经安装了 ruby​​ 1.9.3

我已经运行`port clean ruby19`和各种组合来安装 ruby​​ 1.9.3

`port install ruby19`

`port install ruby19 -nosuffix`

两者都给我以下错误：

`Error: org.macports.activate for port ruby19 returned: Image error: /opt/local/bin/erb is being used by the active ruby port. Please deactivate this port first, or use 'port -f activate ruby19' to force the activation.`

如果我运行，`port -f activate ruby19`我会收到此错误：

```
--->  The following versions of ruby19 are currently installed:
--->      ruby19 @1.9.3-p194_3+doc (active)
--->      ruby19 @1.9.3-p194_3+doc+mactk
--->      ruby19 @1.9.3-p194_3+doc+nosuffix
Error: port activate failed: Registry error: Please specify the full version as recorded in the port registry. 
```

我从这里去哪里？！

我基本上想要最快最简单的解决方案来启动和运行这个项目——我不需要在我的机器上安装多个版本的 ruby​​。

来吧，我知道我不能成为第一个遇到这个问题的人！RVM 真的是人们这样做的唯一方法吗？

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:27:21.307

使用[rvm](http://rvm.io)会少很多麻烦，可以在本地工作并且更新更频繁。您还可以使用 rbenv 或任何其他 ruby​​ 安装程序。节省一些时间并使用这些安装程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T07:28:15.690

事实证明我已经安装了 ruby​​ (1.8.7) 的 macports。

我卸载了我所有的 macports ruby​​19 版本`sudo port uninstall ...`

停用活动版本`sudo port -f deactivate ruby`

并安装了不带后缀的 1.9.3 版本

`sudo port install ruby19 +nosuffix`

我收到了这个错误：

`Image error: /opt/local/bin/gem is being used by the active rb-rubygems port. Please deactivate this port first, or use 'port -f activate ruby19' to force the activation.`

所以跑了`sudo port -f activate ruby19`

现在当我跑步时，`rails server`我得到：

```
/opt/local/lib/ruby1.9/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find railties (>= 0) amongst [bigdecimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError)
from /opt/local/lib/ruby1.9/1.9.1/rubygems/dependency.rb:256:in `to_spec'
from /opt/local/lib/ruby1.9/1.9.1/rubygems.rb:1231:in `gem'
from /opt/local/bin/rails:22:in `<main>' 
```

然后我更新了我的 gem 包和 rails：

```
sudo gem update --system
sudo gem uninstall rubygems-update
sudo gem install rails
sudo bundle install 
```

结果：

```
Your bundle is complete! Use 'bundle show [gemname]' to see where a bundled gem is installed.
Post-install message from rdoc:
Depending on your version of ruby, you may need to install ruby rdoc/ri data:

<= 1.8.6 : unsupported
  = 1.8.7 : gem install rdoc-data; rdoc-data --install
  = 1.9.1 : gem install rdoc-data; rdoc-data --install
 >= 1.9.2 : nothing to do! Yay! 
```

关于 macports 和 ruby​​ 路径的有用讨论：[MacPorts 如何安装软件包？如何激活通过 MacPorts 完成的 Ruby 安装？](https://stackoverflow.com/questions/1333569/how-does-macports-install-packages-how-can-i-activate-a-ruby-installation-done)

很多人推荐 RVM [https://rvm.io/](https://rvm.io/)，但对我来说，我现在只需要运行 1.9.2。

# javascript - 如何使用 requireJS 访问模块变量？

> ID：12449845
> 
> 赞同：10
> 
> 时间：2012-09-16T19:10:09.947
> 
> 标签：javascript, design-patterns, requirejs, amd, modular

我使用 Javascript 已经有一段时间了，我只是第一次尝试使用模块和 requireJS，我很难理解新的设计模式！

这是我的第一次尝试：

```
require([
    "jquery",
    "testModule"
], function ($, testModule) {
    $(function () {
        var testInstance1 = testModule;
        testInstance1.setID(11);
        alert(testInstance1.id);
    });
}); 
```

和 testModule.js

```
define([
  'jquery'
], function ($) {

    var id = 0;

    var setID = function (newID) {
        id = newID;
        return id;
    };
    return {
        setID: setID,
        id:id
    };
}); 
```

这返回 0，我期待 11。我错过了什么？

当然，这也是一个简化的例子。我想创建多个对象，每个对象都应该保持自己的变量处于状态。例如，如果我想要一个模块将列表附加到容器`DIV`，但还包含添加、清除或查询该列表中数据的函数，我应该如何构造模块函数，以便每个实现保持自己的状态。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T19:45:00.947

你实际上并没有错过任何与这里相关的 requireJS 。问题是只有对象是通过引用传递的（也许数组..现在无法确定）。数字不是。因此，当您返回 {setID: setID, id: id} 时，'id' 被设置为 'id' 的*值*，不再更新。您要做的是使用诸如“getID”之类的函数，它将引用原始*变量*，而不是原始变量的*值*：

```
return {
    setID: setID,
    getID: function () {return id;}
}; 
```

接着...

```
testInstance1.setID(11);
alert(testInstance1.getID()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-19T07:34:56.630

如果您想拥有两个 testModule 实例，则需要将 testModule 作为函数返回。然后，当您需要它时，您可以使用`new`.

### 示例 1

测试模块.js

```
define([
  'jquery'
], function ($) {

    function TestModule() {
        var self = this;
        // anything attached to self or this will be public
        self.id = 0;
        self.setID = function (newID) {
            self.id = newID;
            return self.id;
        };
    }

    return TestModule;
}); 
```

main.js

```
require([
    "jquery",
    "testModule"
], function ($, TestModule) {
    $(function () {
        var testInstance1 = new TestModule();
        var testInstance2 = new TestModule();
        testInstance1.setID(11);
        testInstance2.setID(99);
        alert(testInstance1.id); // Should return 11
        alert(testInstance2.id); // Should return 99
    });
}); 
```

* * *

或者，如果你想变得花哨，你可以保护 testModule 中的某些属性或函数。

### 示例 2

测试模块.js

```
define([
  'jquery'
], function ($) {

    function TestModule() {
        var self = this;
        var privateID = 0;
        function privateToString() {
            return 'Your id is ' + privateID;
        }
        // anything attached to self or this will be public
        self.setID = function (newID) {
            privateID = newID;
        };
        self.getID = function () {
            return privateID;
        };
        self.toString = function () {
            return privateToString();
        };
    }

    return TestModule;
}); 
```

main.js

```
 require([
        "jquery",
        "testModule"
    ], function ($, TestModule) {
        $(function () {
            var testInstance1 = new TestModule();
            var testInstance2 = new TestModule();
            testInstance1.setID(11);
            testInstance2.setID(99);
            alert(testInstance1.getID()); // Should return 11
            alert(testInstance2.getID()); // Should return 99
            alert(testInstance1.privateID); // Undefined
            alert(testInstance1.toString()); // Should return "Your id is 11"
        });
    }); 
```

* * *

如果您只想要一个像单例这样的单个实例，您可以使用`new`关键字返回 TestModule。

### 示例 3

测试模块.js

```
define([
  'jquery'
], function ($) {

    function TestModule() {
        var self = this;
        // anything attached to self or this will be public
        self.id = 0;
        self.setID = function (newID) {
            self.id = newID;
            return self.id;
        };
    }

    return new TestModule();
}); 
```

main.js

```
require([
    "jquery",
    "testModule"
], function ($, testModule) {
    $(function () {
        var testInstance1 = testModule;
        var testInstance2 = testModule;
        testInstance1.setID(11);
        testInstance2.setID(99);
        alert(testInstance1.id); // Should return 99
        alert(testInstance2.id); // Should return 99
    });
}); 
```

# javascript - 可以使用jquery代理来避免闭包内存泄漏吗？

> ID：12449851
> 
> 赞同：0
> 
> 时间：2012-09-16T19:10:56.673
> 
> 标签：javascript, jquery, memory-leaks

我正在阅读 Google 的关于关闭的 Javascript 样式指南（http://google-styleguide.googlecode.com/svn/trunk/javascriptguide.xml#Closures），我想知道使用 jquery 代理在不跌倒时执行回调是否安全进入内存泄漏陷阱？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:20:02.727

关于任何托管内存环境中的闭包，要记住的是垃圾收集器是如何工作的。它从诸如“window”之类的根对象开始，并遵循每个可能的内存引用。如果它可以找到一个对象，那么该对象就不能被回收。

关键是在您不再需要关闭时切断所有可能的路径。这包括闭包引用函数、引用该函数的所有对象以及拥有该函数的对象。这将包括任何代理；也取消对这些的引用。

# java - Android 应用程序无法在模拟器中启动，错误日志中没有错误

> ID：12449852
> 
> 赞同：1
> 
> 时间：2012-09-16T19:11:06.980
> 
> 标签：java, android, eclipse

我是编程新手，在这个问题上需要一些帮助。我有一个简单的 android 应用程序无法启动并显示此消息：“不幸的是，该项目已停止。” 项目中没有可见的错误，错误聊天日志中也没有错误。

非常感谢一些帮助/建议，如果可以，请帮助我，谢谢。

# java - Java 垃圾收集会影响方法吗？

> ID：12449854
> 
> 赞同：4
> 
> 时间：2012-09-16T19:11:09.477
> 
> 标签：java, garbage-collection

我的AP计算机科学老师告诉我不要使用静态方法，因为Java垃圾回收只影响非静态方法，因此不再使用的静态方法会占用额外的内存。我几乎肯定 GC 永远不会影响任何方法，只影响对象，但在我说任何话之前我想确定一下。那么GC和方法有关系吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T19:15:10.897

假设她真的说的是方法而不是领域，那么你的老师在这种情况下是错误的。正如您所说，垃圾收集是从已分配的对象中回收内存的过程，分配它们的方法的范围无关紧要。

作为旁注，静态*字段*是另一回事。将对象保存在静态字段中（通常）确实会阻止垃圾收集器做它的事情，因为该类将始终持有对它的引用，因此它没有资格被收集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:13:54.347

> 使用静态方法，因为Java垃圾回收只影响非静态方法，因此不再使用的静态方法会占用额外的内存。

我想你想念他/她说的话。一个方法只有在它的 ClassLoader 被卸载时才会被卸载，在大多数 Java SE 程序中，永远不会。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:20:48.817

我觉得你的老师错了。问他/她是否认为克隆对象时方法也会被复制？如果他/她说是，那么他/她就真的错了。

方法是代码，代码是静态的，即当类存在时，它始终存在于一个实例中。

# javascript - Javascript/jQuery 在 IE 中不起作用

> ID：12449855
> 
> 赞同：0
> 
> 时间：2012-09-16T19:11:34.913
> 
> 标签：javascript, jquery, internet-explorer, cross-browser

此代码适用于除 IE 之外的所有浏览器。我能做些什么来增加对它的支持？

```
<script type="text/javascript">
$(document).ready(function() {
  var currentArrayNum = 2;
  $('#names').on({
    blur: function() {
        currentArrayNum += 1;
        var name = $("<p><input class='input' type='text' name='guests[]' value='' /></p>");

        var nullFields = 0;
        $(this).closest('div#names').find('input.input').each(function(){
            if($(this).val() == ""){
                nullFields++;
            }
        });
        console.log(nullFields);

        if(nullFields <= 1){
          $('#names').append(name.fadeIn(500));
          $('#leftbox').scrollTop($('#leftbox')[0].scrollHeight);
        }
    }
}, 'input');
 });
</script> 
```

这应该意味着添加了额外的输入字段。[您可以在此处](http://cambridge.guestvibe.com)的“输入来宾列表的名称”下查看它的运行情况（在 FF、Chrome、Safari 等中）。

**编辑**

在 IE9 中测试，但对我不起作用。

我还应该问是否有一种方法可以在 Mac 上测试不同版本的 IE（和其他浏览器）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T19:15:04.043

请注意，在某些（所有？）版本的 IE 中，您需要打开开发人员（“F12”）工具`console.log`才能工作，否则`console`未定义并因此`console.log()`引发错误。

那可能是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T21:17:22.843

我知道您的问题大约有一周的时间，但我不确定您是否找到了解决方案或跨浏览器问题的原因。我最近正在开发一个自定义模式弹出窗口，我需要找到我的 scrollTop。相信我，我爱 jQuery 到死，我每天都在使用它，但有时你需要使用一些好的 ol' javaScript。IE 访问`body`DOM 的方式与 Chrome 或 FF 不同。

```
//I.E.
document.documentElement.scrollTop;

//Chrome, FF, etc.
document.body.scrollTop; 
```

基本上，创建一个检测用户浏览器的脚本，然后包含一个条件语句，该语句将以适当的方式分配值。

```
//Detect Browser
if (clientBrowser == "IE") {

    currTopPos = document.documentElement.scrollTop;
} else {

    currTopPos = document.body.scrollTop;
} 
```

我为我正在进行的当前项目之一创建了一个脚本，如果你想看看它，请告诉我。

# ios - 用于注释和覆盖的 ASSIHTTPRequest - Map View iOS

> ID：12449856
> 
> 赞同：0
> 
> 时间：2012-09-16T19:11:35.750
> 
> 标签：ios, asihttprequest, mkannotation, mkoverlay

想象一下，您从不同的两个 URL 获取日期，一个用于地图叠加，另一个用于注释，如下所示。有两种方法（plotAnnotations 和 plotOverlays）处理 JSON 数据并将它们绘制在地图视图上。我只是想确定一下，还有其他方法吗？如何检查/知道注释和覆盖是否同时出现？我很高兴听到任何反馈或意见。提前致谢。

```
_weak ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];
[request1 setCompletionBlock:^{
    NSString *responseString = [request1 responseString];
    [self plotAnnotations:responseString];

}];
[request1 setFailedBlock:^{
    NSError *error=[request1 error];
    NSLog(@"Error: %@", error.localizedDescription);
}];
[request1 startAsynchronous];

 __weak ASIHTTPRequest *request2 = [ASIHTTPRequest requestWithURL:url2];
[request2 setCompletionBlock:^{
    NSString *responseString2 = [request2 responseString];
    [self plotOverlays:responseString2];
}];
[request2 setFailedBlock:^{
    NSError *error=[request2 error];
    NSLog(@"Error: %@", error.localizedDescription);
}]; 

   [request2 startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:25:00.953

你应该看看 GCD (Grand Central Dispatch)。 [GCD 文档](https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)。创建一个包含您的请求的调度组，当它们都完成下载后，您可以使用它来处理您的注释和覆盖 - 假设这是您想要做的，它并不完全清楚，但这就是您的评论似乎意味着。

# wordpress - @font-face 在带有 wordpress 的 Firefox 中不起作用

> ID：12449857
> 
> 赞同：1
> 
> 时间：2012-09-16T19:11:35.423
> 
> 标签：wordpress, firefox, font-face

我的@font-face 可以在除 Firefox 之外的所有浏览器中使用。我在某处读到将 IE .eot 版本放在顶部并将它们包装在条件标签中会起作用，但它不适合我。一切都在本地运行 mamp 但是当我上传它时 FF 没有读取字体。这是一个wordpress网站。我尝试遵循这些建议，但一无所获： [http ://wordpress.org/support/topic/plugin-w3-total-cache-font-face-not-working-in-firefox?replies=21](http://wordpress.org/support/topic/plugin-w3-total-cache-font-face-not-working-in-firefox?replies=21)

```
@font-face {
font-family: 'ColaborateThinRegular';
src: url("../fonts/Colaborate-fontfacekit/ColabThi-webfont.eot");
src: url("../fonts/Colaborate-fontfacekit/ColabThi-webfont.eot?#iefix") 
format("embedded-opentype"), 
url("../fonts/Colaborate-fontfacekit/ColabThi-webfont.woff") format("woff"), 
url("../fonts/Colaborate-fontfacekit/ColabThi-webfont.ttf") format("truetype"), 
url("../fonts/Colaborate-fontfacekit/ColabThi-webfont.svg#ColaborateThinRegular") format("svg");
font-weight: normal;
font-style: normal; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T00:44:39.137

为了回答这个问题，根据您在上述评论中的回复，我会说您的问题是由 W3 Total Cache 在没有 Firefox 工作的情况下“保存”您的页面版本引起的。

当您将来进行前端更改/ css 更改时，请确保您点击**“清空所有缓存”**按钮。

有关更多信息，请确保查看[W3 Total Cache 文档](http://wordpress.org/extend/plugins/w3-total-cache/)，我建议您也观看[教程视频](http://www.youtube.com/watch?feature=player_embedded&v=rkmrQP8S5KY)。

如果问题再次出现（特别是在 firefox 中）下载并安装[Firebug 插件](http://getfirebug.com/)并检查您的页面是否有错误等。

希望这有帮助。

# jquery - 使用jquery在div中加载页面但不起作用

> ID：12449861
> 
> 赞同：1
> 
> 时间：2012-09-16T19:11:52.650
> 
> 标签：jquery

我是 jQuery 新手，我使用了这段代码，但它不起作用：

```
<script type="text/javascript" src="jquery.js" ></script>
<script>
    $(document).ready(function(){
        $("#add_cl").click(function(){
            $("#formtag").load("main.php");
        });
    });
</script> 
```

单击`id="add_cl"`想要像ajax一样加载`main.php`的按钮。`#formtag`单击它时，它将`main.php`在 Dreamweaver 中以实时视图显示页面，但在 Chrome 和 Firefox 中则不显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:19:00.893

*   我想你正在使用 Chrome。您应该使用 Xampp 之类的本地服务器来使其在本地工作。或者将其上传到您的在线服务器进行测试。应该管用！
*   而不是使用`localhost`try ：`127.0.0.1`
*   由于同源策略或与之相关的原因，Chrome 使用 AJAX 解决了一个错误，所以不要生气并使用其他浏览器。PS：我使用 XAMPP 和 Chrome，AJAX 效果很好。希望能帮助到你

**与您的评论相关：**
要在同一元素中加载不同的页面，请尝试使用该`data`属性来存储您的 URL：

```
<button class="loader" data-loadpage="main.php"> Load main.php </button>
<button class="loader" data-loadpage="about.php"> Load about.php </button>
<button class="loader" data-loadpage="contact.php"> Load contact.php </button> 
```

```
$(document).ready(function(){
    $(".loader").click(function(){
        $("#formtag").load( $(this).data('loadpage') );
    });
}); 
```

此外，您还可以尝试`.empty()`从您的`#formtag`：
`$("#formtag").empty().load( $(this).data('loadpage') );`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:24:23.063

[http://jsfiddle.net/bozdoz/uZ5XS/](http://jsfiddle.net/bozdoz/uZ5XS/)

HTML：

```
<span id="load">Click to Load content</span>
<div id="test"></div>
<div id="loadingGif">LOADING GIF!!!!</div>​ 
```

脚本：

```
$('#load').click(function() {
    $('#test').html('');
    $('#loadingGif').show();
    $('#test').load('http://fiddle.jshell.net/bozdoz/2XgVd/show/ a', function() {
        $('#loadingGif').hide();
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:35:04.330

回调函数

如果提供了“完成”回调，则在执行后处理和 HTML 插入后执行。回调会为 jQuery 集合中的每个元素触发一次，并依次设置为每个 DOM 元素。

```
<script type="text/javascript" src="jquery.js" ></script>
<script>
    $(document).ready(function() {
        $("#add_cl").click(function() {
            $("#formtag").load("main.php", function(response, status, xhr) {
                if (status == "error") {
                    var msg = "Sorry but there was an error: ";
                    alert(msg + xhr.status + " " + xhr.statusText);
                }
            });
        });
    });​
</script> 
```

当您在浏览器上进行测试时，还请检查“main.php”是否仍与该页面的 html 位于同一文件夹中？您还可以通过添加回调函数并记录服务器的响应来检查 ajax 错误

# jquery - jquery - 未读取文本框

> ID：12449866
> 
> 赞同：0
> 
> 时间：2012-09-16T19:12:39.900
> 
> 标签：jquery, autosuggest

我正在尝试为多个文本框制作自动建议搜索框的基础知识。我已经有一个脚本来添加/删除文本框，它工作正常。但是我遇到的问题是能够获取页面上的所有文本框，当一个键被按下（基本上是onkeyup）时，它会提醒文本框的值。我能够让它适用于我在 html 中添加自己的文本框，但使用 jquery 添加的任何文本框都不起作用。

这是jQuery：

```
 $(document).ready(function(){
    $counter = 0; // initialize 0 for limitting textboxes
    $('#buttonadd').click(function(){
        if ($counter < 10)
        {
            $counter++;
            $('#buttondiv').append('<div><label>Textbox #'+$counter+'</label><input type="text" name="textbox[]" class="textbox" value="" id="country"/></div>');
        }else{
            alert('You cannot add more than 10 textboxes');
        }
    });

    $('#buttonremove').click(function(){
        if ($counter){
            $counter--;
            $('#buttondiv .textbox:last').parent().remove(); // get the last textbox and parent for deleting the whole div
        }else{
            alert('No More textbox to remove');
        }
    });

    $('#buttonget').click(function(){
        alert($('.textbox').serialize()); // use serialize to get the value of textbox
    });

    $('input').bind('keyup', function() {
        alert($(this).val());
    });

    $('#dropdownadd').change(function(){
        $('#dropdowndiv').html(""); // when the dropdown change set the div to empty
        $loopcount = $(this).val(); // get the selected value
        for (var i = 1; i <= $loopcount; i++)
        {
            $('#dropdowndiv').append('<div><label>Textbox #'+i+'</label><input type="text" name="textbox2[]" class="textbox2" value="" /></div>');
        }
    });
}); 
```

这是html：

```
<div id="buttondiv">
<!-- this is where textbox will appear -->
</div>
<div class="choices">
    <span>Adding Textbox using Button</span>
    <input type="button" id="buttonadd" value="Add Textbox"/>
    <input type="button" id="buttonremove" value="Remove Textbox"/>
    <input type="button" id="buttonget" value="Get Textbox" />
</div>

<input id="country" size="25" type="text" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:28:43.770

尝试使用`on`而不是`click`

[http://api.jquery.com/on/](http://api.jquery.com/on/)

这应该适用于通过委托动态添加的元素。我添加了一个 div 来包装元素，手动和动态添加，然后您可以应用它

```
$('#container').on('keyup', 'input', function() {
    alert($(this).val());
}); 
```

看到这个[工作小提琴](http://jsfiddle.net/MGy5U/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:37:25.033

发生这种情况是因为在生成文本框之前调用了 keyup 的绑定函数。因此，每次创建新文本框时都运行绑定代码（如下）。

```
$('input').bind('keyup', function() {
        alert($(this).val());
    }); 
```

或者更好的方法是使用纯 JavaScript onkeyup 属性来调用您定义的函数。例如

```
$('#buttondiv').append('<div><label>Textbox #'+$counter+'</label><input type="text" name="textbox[]" class="textbox" onkeyup="function_abc(this);" value="" id="country"/></div>'); 
```

# linux - 进行内核模块编程的最佳 Linux 发行版

> ID：12449868
> 
> 赞同：8
> 
> 时间：2012-09-16T19:12:46.543
> 
> 标签：linux, kernel-module, linux-from-scratch, linux-distro

我想做内核模块编程。但是，所有消息来源都告诉 Linux 发行版修补了原始内核，并且模块代码可能无法在它们上运行。如果这是真的，我该怎么办。我尝试使用 ubuntu 制作 lfs，但几乎每一步都会出现错误。我在某处看到，在安装过程中没有选择任何软件包的 arch、gentoo、Ubuntu Server、slackware、susestudio 等都是香草发行版。那么，我可以将它们用于模块编程吗？

请记住，我在发行版中需要一个 GUI。

[这](http://lightlinux.blogspot.in/2008/06/top-10-of-lightweight-linux_24.html)能跟得上吗？
PS：我有一个英特尔酷睿 i3 处理器，将在 vmware 工作站上运行发行版。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T01:37:39.790

如果您想对内核模块进行编程，那么您选择哪个发行版都没有关系。您需要能够从源代码重新编译内核并自己安装新内核。即使只是一个内核模块，您也希望能够编译最新的内核并针对它进行开发，否则您将无法让该模块被主线接受。

如果不发布模块，另一种方法是针对特定内核版本进行开发。在这种情况下，分发的选择应该基于模块的目标——而不是开发环境。

所以根据你的喜好选择一个发行版：1）桌面 -（GNOME、KDE、其他）2）易用性 -（Ubuntu、Fedora 等 vs Arch、Gentoo）3）尖端 vs 稳定版（Arch、Fedora vs Ubuntu与 Debian、红帽、CentOS）

然后前往[kernelbewbies](http://www.kernelnewbies.org)学习一些关于内核编程的入门知识（从哪里获取源代码，如何编译它）。然后阅读 Greg Kroah-Hartman 关于 linux 设备驱动程序的优秀书籍。接口将发生变化（它是关于 2.6 版内核的，目前正在开发 3.6 版）。可以在[这里在线找到](http://lwn.net/Kernel/LDD3/)

您还需要学习如何使用 git。更重要的是如何使用 git 生成补丁并通过电子邮件发送而不弄乱它！我没有这方面的网站，但有点谷歌搜索会有所帮助。

# sql - 完成给定的 SQL 语句，以便在最后显示另一列

> ID：12449879
> 
> 赞同：1
> 
> 时间：2012-09-16T19:13:20.413
> 
> 标签：sql, multiple-columns

我得到以下声明：

```
SELECT id FROM record_database WHERE id = <up to me to complete the statement> 
```

记录数据库有不同的字段，其中有id和name。

我应该完成这个 select 语句，以便它并排显示所有 id 和所有相应的名称，这应该使用这一行 SQL 代码来完成。给出了可以使用 UNION 或 OR 的提示。

我尝试了以下变体：

```
SELECT id FROM record_database WHERE id = '*'
UNION
SELECT name FROM record_database WHERE name = '*'; 
```

但这些都不起作用。我尝试使用 AND 执行此操作，尝试使用显示列，但这些也不起作用。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:26:36.777

这闻起来很像家庭作业，所以我不会提供完整的答案，但你不能只是联合查询返回不同的结果集。我推断 ID 是一个整数，而 NAME 是一些 varchar，它不会像您在提示中列出的那样联合。

当您说“完成”时，您是否仅限于将内容添加到末尾？如果是这样，它是一个非首发。您不能仅通过向“WHERE”子句添加内容来增加返回的字段列表。您需要将内容添加到实际的字段列表中以使其返回，因此您可能会澄清您是否真的仅限于附加到您给出的查询中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T06:51:44.367

作弊。使选择返回 0 行并添加另一个将显示 2 列的行。都在同一行：

```
SELECT id FROM record_database WHERE id = NULL;SELECT id,name FROM record_database; 
```

不应再将时间浪费在此类愚蠢的问题上。

* * *

如果两者`id`都是`name`char（或 varchar），您也可以这样做，将两列合并为一列：

```
SELECT id FROM record_database WHERE id = NULL
UNION ALL
SELECT id || '--' || name FROM record_database ; 
```

该`id || '--' || name`部分与一个 DBMS 不同。在某些情况下，`+`是 concat 运算符，在其他情况下，还有特殊功能。所以你可能需要使用：

```
id  + '--'  + name 
```

或者：

```
CONCAT(id, '--', name) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T21:38:16.207

如果您正在寻找：

```
id
name
id next
name next 
```

然后使用这个技巧：

```
SELECT col2 
FROM (
    SELECT id, col2=convert ( varchar (size of name field),id) 
    FROM table 
    WHERE ....

    UNION ALL

    SELECT id, name 
    FROM table 
    WHERE ....
     ) 
ORDER BY id 
```

这`order by`将使 id 和 name 并排显示，col2 将在第一行包含 id，在第二行包含 name。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T19:31:30.087

尝试这个

```
SELECT * FROM record_database WHERE id = '*' OR name = '*' 
```

# java - Android Bug(?): onKey after while 声明它是 KeyEvent.ACTION_UP

> ID：12449885
> 
> 赞同：1
> 
> 时间：2012-09-16T19:13:57.180
> 
> 标签：java, android

> **可能重复：**
> [OnTouchListener，ACTION_UP 在 30 秒超时后自动触发](https://stackoverflow.com/questions/4168687/ontouchlistener-action-up-fires-automatically-after-30-second-timeout)

我使用以下代码检查是否单击了某个键：

```
@Override
    public boolean onKey(View v, int keyCode, KeyEvent event) {

        // Little method to allow the sound to be changed 
        if(keyCode == 24 || keyCode == 25) {
            return false;
        }

        if(event.getAction() == KeyEvent.ACTION_DOWN) {
            //  if(resetKeyPress != true) {
            this.keyCode = keyCode;
            //  resetKeyPress = true;
            if(this.logGameEngineInputLog == true) {
                gameEngineLog.d(classTAG, "Pressed down " + this.keyCode);
            }
            //  }
        }
        else if(event.getAction() == KeyEvent.ACTION_UP){
            //waitUntilReleased = false;
            //this.changeKeyCode(null);
            if(this.logGameEngineInputLog == true) {
                gameEngineLog.d(classTAG, "Released key " + this.keyCode);

            }

            this.keyCode = null;

            //  resetKeyPress = false;

        }

        return true;
    } 
```

当我长时间点击一个按钮时，它一直说按下了一个按钮，但是过了一会儿它说键已被释放，即使我仍然按住键。为什么要这样做？有没有办法防止这种情况？这是由 Android 操作系统故意完成的，如果是，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:51:42.647

我们不知道处理这个事件的类型是什么：View、Activity？

在 View 案例中，onKey 仅处理硬件按键事件（根据文档：[Android Reference - View.KeyEventListener](http://developer.android.com/reference/android/view/View.OnKeyListener.html#onKey%28android.view.View,%20int,%20android.view.KeyEvent%29)）

此外，如果您查看此线程：[如何区分长按键和常规按键？](https://stackoverflow.com/questions/8226771/how-to-differentiate-between-long-key-press-and-regular-key-press)，您可以看到 Activity.onKeyLongPress() 方法的实现，以及您不应该犯的错误。

# jquery - 如何将 css3 过渡缓动转换为 jquery 缓动功能？

> ID：12449887
> 
> 赞同：7
> 
> 时间：2012-09-16T19:14:19.007
> 
> 标签：jquery, css, css-transitions, easing

我也为现代浏览器和旧浏览器制作了一个滑块。我使用 translate3d 和 transition 在支持 css3 的现代浏览器中制作动画。我为旧浏览器使用 2d 顶部、左侧和缓动功能。我从这里使用 css3 缓动：

[http://matthewlein.com/ceaser/](http://matthewlein.com/ceaser/)

我想将其转换为 javascript 函数以便在旧浏览器上使用。我知道那里有很多缓动函数，但我只想知道如何转换。是否可以？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T19:53:57.013

您可以在 jQuery 中为 Cubic Bezier Easings 使用[jQuery Bez](https://github.com/rdallasgray/bez)插件：

演示：http: [//jsfiddle.net/SO_AMK/sbZ7a/](http://jsfiddle.net/SO_AMK/sbZ7a/)

jQuery：

```
$("#box").click(function() {
    $(this).animate({
        "margin-left": 200
    }, 2000, $.bez([0.685, 0.595, 0.020, 0.720]));
});

// Take the Ceaser output and put the values in, in order, like above. i.e. cubic-bezier(0.685, 0.595, 0.020, 0.720) would end up as the above value​ 
```

插件：[https ://github.com/rdallasgray/bez](https://github.com/rdallasgray/bez)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T07:06:38.890

我知道答案已经被接受，但我想分享另一个适用于缓动动画的优秀 jQuery 插件。

[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

# java - 如何使用 Java 压缩/上压缩文件夹及其所有文件和子目录？

> ID：12449888
> 
> 赞同：1
> 
> 时间：2012-09-16T19:14:24.117
> 
> 标签：java, file, compression, directory, zipfile

我正在阅读这篇文章以了解如何使用 Java 压缩/解压缩文件。我用[它](http://www.oracle.com/technetwork/articles/java/compress-1565076.html)来指导我，它在将所有文件压缩到一个文件夹中时效果很好，但是当我用一个包含更多文件夹的文件夹对其进行测试时，它不起作用，它抛出了以下错误：

```
java.io.FileNotFoundException: assets (Access is denied) //assets is the name of the folder I tried to zip
        at java.io.FileInputStream.open(Native Method)
        at java.io.FileInputStream.<init>(Unknown Source)
        at java.io.FileInputStream.<init>(Unknown Source)
        at Zip.main(Zip.java:24) 
```

这是我正在使用的类，您将看到它与上一个链接中的**代码示例 4：Zip.java**类代码相同：

```
import java.io.*;
import java.util.zip.*;

public class Zip {
   static final int BUFFER = 2048;
   public void zip() {
      try {
         BufferedInputStream origin = null;
         FileOutputStream dest = new 
           FileOutputStream("H:\\myfigs.zip");
         CheckedOutputStream checksum = new 
           CheckedOutputStream(dest, new Adler32());
         ZipOutputStream out = new 
           ZipOutputStream(new 
             BufferedOutputStream(checksum));
         //out.setMethod(ZipOutputStream.DEFLATED);
         byte data[] = new byte[BUFFER];
         // get a list of files from current directory
         File f = new File(".");
         String files[] = f.list();

         for (int i=0; i<files.length; i++) {
            System.out.println("Adding: "+files[i]);
            FileInputStream fi = new 
              FileInputStream(files[i]);
            origin = new 
              BufferedInputStream(fi, BUFFER);
            ZipEntry entry = new ZipEntry(files[i]);
            out.putNextEntry(entry);
            int count;
            while((count = origin.read(data, 0, 
              BUFFER)) != -1) {
               out.write(data, 0, count);
            }
            origin.close();
         }
         out.close();
         System.out.println("checksum: "+checksum.getChecksum().getValue());
      } catch(Exception e) {
         e.printStackTrace();
      }
   }
} 
```

应该进行哪些更改，以便此代码可以将文件夹内的文件夹及其所有文件压缩到一个 zip 文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T19:50:05.420

zip 条目需要指定存档中文件的路径。您不能将文件夹添加到 zip 存档 - 您只能添加文件夹中的文件。

命名约定是使用正斜杠作为路径分隔符。如果您正在压缩包含以下文件/子目录的文件夹：

```
c:\foo\bar\a.txt
c:\foo\bar\sub1\b.txt
c:\foo\bar\sub2\c.txt 
```

zip 条目名称为：

```
a.txt
sub1/b.txt
sub2/c.txt 
```

因此，要修复您的算法，请在 for 循环中添加 isDirectory()，然后递归地将任何子目录中的文件添加到 zip。可能最好的方法是有一个方法：

```
addDirectoryToZip(String prefix, File directory, ZipOutputStream out) 
```

这是该问题的解决方案：[java.util.zip - Recreating directory structure](https://stackoverflow.com/questions/1399126/java-util-zip-recreating-directory-structure)

# java - 什么是 Java 混合 - Applet + 应用程序？

> ID：12449889
> 
> 赞同：4
> 
> 时间：2012-09-16T19:14:34.117
> 
> 标签：java, applet, desktop-application

我怎么写一个？

从评论到我的[回复](https://stackoverflow.com/a/12447764/166390)，接下来是：

> “我们过去拥有的东西——小程序和应用程序——不再可用。”

并反驳：

> 垃圾。它 [An Applet and Application] 被称为混合体，并且活得很好。如果您想澄清，请提出一个单独的问题。

我想问**一下这个Java Hybrid是什么？**

我已经搜索过，但由于某种原因，找不到任何关于“活得很好”的有用信息。我使用的关键字可能略有偏差，所以这可能是一个原因。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-16T19:22:41.377

*混合*小程序/应用程序只是抽象[两个顶级容器](http://docs.oracle.com/javase/tutorial/uiswing/components/toplevel.html)的初始化，`JFrame`和`JApplet`。示例见[这里](https://stackoverflow.com/a/11372932/230513)、[这里](https://sites.google.com/site/drjohnbmatthews/subway)和[这里](http://mindprod.com/jgloss/applet.html)。

附录：*它是如何工作的？*

*   第[一个](https://stackoverflow.com/a/11372932/230513)示例公开了一个工厂方法，`createGUI()`并将返回的面板添加到现有的顶级容器中。
*   第二[个](https://sites.google.com/site/drjohnbmatthews/subway)提供了一个静态`initContainer()`方法，将封闭的顶级容器作为参数传递。
*   第三[个](http://mindprod.com/jgloss/applet.html)创建[`class Hybrid`](http://mindprod.com/jgloss/hybrid.html)具有静态`fireup()`方法和`WindowListener`用于错误报告的 a。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T19:27:29.950

Java 混合应用程序可以作为应用程序或小程序运行。主应用程序类派生自`java.awt.Applet`或`javax.swing.JApplet`。

由于该`main`方法是在应用程序“模式”下运行时的入口点，因此它不会被小程序容器调用。

方法

```
public void init() 
```

由小程序容器自动调用，但必须从`main`方法中手动调用（作为应用程序运行时）。

# javascript - 以模式重新加载内容（推特引导程序）

> ID：12449890
> 
> 赞同：100
> 
> 时间：2012-09-16T19:14:44.983
> 
> 标签：javascript, twitter-bootstrap

我正在使用 twitter bootstrap 的模态弹出窗口。

```
<div id="myModal" class="modal hide fade in">
    <div class="modal-header">
        <a class="close" data-dismiss="modal">×</a>
        <h3>Header</h3>
    </div>
    <div class="modal-body"></div>
    <div class="modal-footer">
        <input type="submit" class="btn btn-success" value="Save"/>
    </div>
</div> 
```

我可以使用带有此 a 元素的 ajax 加载内容：

```
<a data-toggle="modal" data-target="#myModal" href="edit.aspx">Open modal</a> 
```

现在我必须打开相同的模式，但使用不同的 url。我正在使用此模式从我的数据库中编辑一个实体。因此，当我在实体上单击编辑时，我需要加载带有 ID 的模式。

```
<a data-toggle="modal" data-target="#myModal" href="edit.aspx?id=1">Open modal</a>
<a data-toggle="modal" data-target="#myModal" href="edit.aspx?id=2">Open modal</a>
<a data-toggle="modal" data-target="#myModal" href="edit.aspx?id=3">Open modal</a> 
```

如果我单击链接号 1，它工作正常。但是，如果我然后单击链接号 2，则模式内容已经加载，因此它将显示链接号 1 中的内容。

如何在 twitter 引导模式弹出窗口中刷新或重置 ajax 加载的内容？

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-09-20T12:56:30.717

我遇到了同样的问题，我想这样做的方法是删除 data-toggle 属性并为链接提供一个自定义处理程序。

类似的东西：

```
$("a[data-target=#myModal]").click(function(ev) {
    ev.preventDefault();
    var target = $(this).attr("href");

    // load the url and show modal on success
    $("#myModal .modal-body").load(target, function() { 
         $("#myModal").modal("show"); 
    });
}); 
```

稍后将尝试并发表评论。

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-08-27T07:16:01.233

要在模式关闭时卸载数据，您可以将其与 Bootstrap 2.x 一起使用：

```
$('#myModal').on('hidden', function() {
    $(this).removeData('modal');
}); 
```

在 Bootstrap 3 ( [https://github.com/twbs/bootstrap/pull/7935#issuecomment-18513516](https://github.com/twbs/bootstrap/pull/7935#issuecomment-18513516) ) 中：

```
$(document.body).on('hidden.bs.modal', function () {
    $('#myModal').removeData('bs.modal')
});

//Edit SL: more universal
$(document).on('hidden.bs.modal', function (e) {
    $(e.target).removeData('bs.modal');
}); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-09-22T22:49:12.847

您可以通过在 Modal 插件的 hide 方法末尾添加此行来强制 Modal 刷新弹出窗口（如果您使用的是 bootstrap-transition.js v2.1.1，它应该在第 836 行）

```
this.$element.removeData() 
```

或者使用事件监听器

```
$('#modal').on('hidden', function() {
    $(this).data('modal').$element.removeData();
}) 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-12-12T04:10:17.947

使用 Bootstrap 3，您可以使用 'hidden.bs.modal' 事件处理程序来删除任何与模式相关的数据，从而强制下次重新加载弹出窗口：

```
$('#modal').on('hidden.bs.modal', function() {
    $(this).removeData('bs.modal');
}); 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2014-07-28T19:14:03.123

基于其他答案（谢谢大家）。

我需要调整代码以使其正常工作，因为只需调用 .html 即可擦除整个内容，并且在我执行此操作后模态不会加载任何内容。所以我只是寻找模式的内容区域并在那里应用了 HTML 的重置。

```
 $(document).on('hidden.bs.modal', function (e) {
        var target = $(e.target);
        target.removeData('bs.modal')
              .find(".modal-content").html('');
    }); 
```

仍然可能会接受公认的答案，因为我在模态加载之前得到了一些难看的跳跃，因为控件是使用 Bootstrap 进行的。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-01-12T07:02:16.560

比上面接受的示例更压缩。从当前单击的任何带有 data-toggle=modal 的数据目标中获取目标。这使得您不必知道目标模式的 id 是什么，只需重用同一个！更少的代码=赢！如果你愿意，你也可以修改它来为你的模态加载标题、标签和按钮。

```
 $("[data-toggle=modal]").click(function(ev) {
    ev.preventDefault();
    // load the url and show modal on success
    $( $(this).attr('data-target') + " .modal-body").load($(this).attr("href"), function() { 
         $($(this).attr('data-target')).modal("show"); 
    });
}); 
```

示例链接：

```
<a data-toggle="modal" href="/page/api?package=herp" data-target="#modal">click me</a>
<a data-toggle="modal" href="/page/api?package=derp" data-target="#modal">click me2</a>
<a data-toggle="modal" href="/page/api?package=merp" data-target="#modal">click me3</a> 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-10-24T12:10:14.847

[我对Softlion](https://stackoverflow.com/questions/12449890/reload-content-in-modal-twitter-bootstrap#answer-18459248)的回答做了一个小改动，所以我所有的模态都不会在隐藏时刷新。具有 data-refresh='true' 属性的模态仅刷新，其他的照常工作。这是修改后的版本。

```
$(document).on('hidden.bs.modal', function (e) {
    if ($(e.target).attr('data-refresh') == 'true') {
        // Remove modal data
        $(e.target).removeData('bs.modal');
        // Empty the HTML of modal
        $(e.target).html('');
    }
}); 
```

现在使用如下所示的属性，

```
<div class="modal fade" data-refresh="true" id="#modal" tabindex="-1" role="dialog" aria-labelledby="#modal-label" aria-hidden="true"></div> 
```

这将确保仅刷新 data-refresh='true' 的模式。而且我还在重置模态 html，因为旧值会一直显示，直到新值被加载，从而使 html 为空修复了该值。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-10-01T14:26:29.423

这是一个对我有用的咖啡脚本版本。

```
$(document).on 'hidden.bs.modal', (e) ->
  target = $(e.target)
  target.removeData('bs.modal').find(".modal-content").html('') 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-09-26T13:50:10.617

它适用于所有版本的 twitterbootstrap

Javascript代码：

```
<script type="text/javascript">
/* <![CDATA[ */
(function(){
   var bsModal = null;
   $("[data-toggle=modal]").click(function(e) {
      e.preventDefault();
      var trgId = $(this).attr('data-target'); 
      if ( bsModal == null ) 
       bsModal = $(trgId).modal;
      $.fn.bsModal = bsModal;
      $(trgId + " .modal-body").load($(this).attr("href"));
      $(trgId).bsModal('show');
    });
 })();
/* <![CDATA[ */
</script> 
```

模态链接是

```
<a data-toggle="modal" data-target="#myModal" href="edit1.aspx">Open modal 1</a>
<a data-toggle="modal" data-target="#myModal" href="edit2.aspx">Open modal 2</a>
<a data-toggle="modal" data-target="#myModal" href="edit3.aspx">Open modal 3</a> 
```

弹出模态

```
<div id="myModal" class="modal hide fade in">
<div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Header</h3>
</div>
<div class="modal-body"></div>
<div class="modal-footer">
    <input type="submit" class="btn btn-success" value="Save"/>
</div> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-01-15T12:45:40.083

我也被困在这个问题上，然后我看到模态的*id*是相同的。如果您想要多个模态，则需要不同的模态*ID 。*我使用了动态*id*。这是我的代码`haml`：

```
.modal.hide.fade{"id"=> discount.id,"aria-hidden" => "true", "aria-labelledby" => "myModalLabel", :role => "dialog", :tabindex => "-1"} 
```

你可以这样做

```
<div id="<%= some.id %>" class="modal hide fade in">
  <div class="modal-header">
    <a class="close" data-dismiss="modal">×</a>
    <h3>Header</h3>
  </div>
  <div class="modal-body"></div>
  <div class="modal-footer">
    <input type="submit" class="btn btn-success" value="Save" />
  </div>
</div> 
```

你的模态链接将是

```
<a data-toggle="modal" data-target="#" href='"#"+<%= some.id %>' >Open modal</a>
<a data-toggle="modal" data-target="#myModal" href='"#"+<%= some.id %>' >Open modal</a>
<a data-toggle="modal" data-target="#myModal" href='"#"+<%= some.id %>' >Open modal</a> 
```

我希望这对你有用。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-12-04T15:22:38.470

你可以试试这个：

```
$('#modal').on('hidden.bs.modal', function() {
    $(this).removeData('bs.modal');
}); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-01-20T21:36:27.787

我希望在模态关闭时删除 AJAX 加载的内容，所以我调整了其他人建议的行（coffeescript 语法）：

```
$('#my-modal').on 'hidden.bs.modal', (event) ->
  $(this).removeData('bs.modal').children().remove() 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-05-24T13:26:59.303

第 1 步：为名为`clone-modal-wrapper`.

第 2 步：创建一个名为`modal-wrapper`.

第 3 步：将模态元素从 复制`clone-modal-wrapper`到 `modal-wrapper`。

第4步：切换模式`modal-wrapper`。

```
<a data-toggle="modal" class='my-modal'>Open modal</a>

<div class="clone-modal-wrapper">
   <div class='my-modal' class="modal fade">
      <div class="modal-dialog">
         <div class="modal-content">
            <div class="modal-header">
               <a class="close" data-dismiss="modal">×</a>
               <h3>Header</h3>
            </div>
            <div class="modal-body"></div>
            <div class="modal-footer">
               <input type="submit" class="btn btn-success" value="Save"/>
            </div>
         </div>
      </div>
   </div>
</div>

<div class="modal-wrapper"></div>

$("a[data-target=#myModal]").click(function (e) {
    e.preventDefault();
    $(".modal-wrapper").html($(".clone-modal-wrapper").html());
    $('.modal-wrapper').find('.my-modal').modal('toggle');
}); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-01-12T08:16:02.713

var $table = $('#myTable2');
$table.bootstrapTable('destroy');

为我工作

# jquery - 了解 jQuery 可拖动

> ID：12449891
> 
> 赞同：0
> 
> 时间：2012-09-16T19:14:55.130
> 
> 标签：jquery

```
$(".item").draggable({
    revert: true            
});
$("#cart_items").draggable({
    axis: "x"
});

$("#cart_items").droppable({

    drop: function(event, ui) {
        var item = ui.draggable.html();
            console.log(item);

        var html = '<div class="item icart">';
        html = html + '<div class="divrm">';
        html = html + '<a onclick="remove(this)" class="remove">&times;</a>';
        html = html + '<div/>'+item+'</div>';
        $("#cart_items").append(html);+ 
```

我知道`var html`我正在创建所有 html 并将其附加到 DOM，但为什么我需要这个？`var item = ui.draggable.html();`代表什么`ui.draggable`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:29:20.620

在函数中，`ui`是传入的对象。`ui`恰好是一个事件。这个事件有一个属性`draggable`。最后`.html()`获取对象的内部 HTML。

线`var item = ui.draggable.html();`相当于：

`item`等于对象`ui`的 property`draggable`的内部 HTML 内容。

从函数的结构来看，我假设`ui`事件是一个拖放操作，并且`draggable`内容是电子商务购物车的一个项目。

# visual-c++ - 带有 LPCWSTR 向量的损坏的向量条目

> ID：12449892
> 
> 赞同：0
> 
> 时间：2012-09-16T19:14:56.443
> 
> 标签：visual-c++, vector, iteration, corrupt, lpcwstr

我有以下一段代码。我得到一个正确填充的向量。但我无法打印或使用来自目录的文件名的矢量内容。一旦我进入第一次迭代。一切都会丢失。我究竟做错了什么？

```
wprintf - This works OK

wcout-- here is where everything ends up corrupted

#include <windows.h>
#include <sstream>
#include <string>
#include <vector>
#include<iostream>
void GetAllFiles(vector<LPCWSTR>&, wstring);
using namespace std;
void main (void)
{
    vector<LPCWSTR> files(0);
    wstring path = L"Datasets\\Persons\\";
    wstring ext = L"*.*";
    wstring fullPath = path+ext;
    GetAllFiles(files,fullPath);    
    for (unsigned i=0; i<files.size() ; i++)
    {
        try
        {
            wcout<<"::\n"<<files[i];
        }
        catch(exception &ex)
        {
            cout<<"Error:"<<ex.what();
        }
    }

}

void GetAllFiles(vector<LPCWSTR>& fileNames,wstring dir)
{

    WIN32_FIND_DATA search_data;
    memset(&search_data, 0, sizeof(WIN32_FIND_DATA));
    HANDLE handle = FindFirstFile(dir.c_str(),&search_data);
    while(handle != INVALID_HANDLE_VALUE)
    {
        wprintf(L"Found file: %s\r\n", search_data.cFileName);
        fileNames.push_back(search_data.cFileName);
        if(FindNextFile(handle, &search_data) == FALSE)
            break;
    }   
} 
```

我附上了输出的屏幕截图。

![在 GetAllFiles(...) 中读取磁盘时更正](../Images/9f2d16ce95853d31744fe379086b0f6d.png)

![循环第一次迭代完成后立即损坏](../Images/eee0674c1f6ef3552804e13c1d6a2720.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:31:43.597

`search_data.cFileName`是一个指向由`FindFirstFile`/ `FindNextFile`iterator 接口控制的内存的指针；您不能存储此指针值，因为指向的内存可能会在迭代之间发生变化（甚至在迭代完成后被释放）。

相反，您必须复制字符串以放入您的向量中，例如使用`wcsdup`. 更好的是，将您的向量定义为 a `vector<wstring>`，以便`push_back(search_data.cFileName);`创建 a`wstring`的内容`search_data.cFileName`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-16T19:31:57.027

这可能是因为您将局部变量传递给 push_back()。我不确定这里，但这里会发生什么：push_back 需要 LPCWSTR 类型的对象，而你传递的是 char*。我不知道，这种转换是如何完成的，但可能只是复制了指针，当你从函数返回时，这个指针的值变得无效 - 在将字符串传递给 push_back 之前尝试显式复制字符串。

# matlab - 在背景中绘制多个图形

> ID：12449896
> 
> 赞同：1
> 
> 时间：2012-09-16T19:15:09.893
> 
> 标签：matlab, matlab-figure, figure

我有一个 MATLAB 代码，可以同时绘制多个图形。实现相同目的的一般技巧是调用`figure(figHandle)`然后调用`plot`，例如

```
figure(h1);
plot(...args...);
figure(h2);
plot(...args...); 
```

但是，我想在每次调用`figure(figHandle)`. 我要做的就是同时绘制多个图形而不使它们可见，最后将它们导出到 Excel 工作表（我已经想出导出到 Excel 工作表部分）。

问题是数字太多（大约 100 个），我必须手动关闭它们。最后，我想要的只是一张带有导出数据的 Excel 表格。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T19:25:45.293

如果问题是关闭所有数字，您可以使用命令`close all`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T01:54:13.847

我同意 mola (+1) 的解决方案。但是，如果您出于某种原因希望在导出到 excel 后保持图形可用，但不希望它们在屏幕上可见，只需在创建图形时将图形的 visible 属性设置为 off：

```
fig1 = figure('visible', 'off') 
```

如果您突然决定需要查看它：

```
set(fig1, 'visible', 'on') 
```

**编辑**：我突然想到，如果您不关心在 matlab 中看到这些数字，那么您绝对应该在创建图形时将其可见属性设置为关闭。这应该会显着加快代码的运行时间。例如：

```
x = (1:100)';
tic
for i = 1:1:10
    fig1 = figure('visible', 'off');
    plot(x);
end
close all
toc 
```

在我的机器上运行需要 0.27 秒，但如果我切换 `'off'`到`'on'`，运行时间会增加到 0.65 秒。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-05T04:46:46.193

分配图形句柄，例如

```
fig1 = figure 
```

跑

```
close figure1 
```

完成后关闭图1。此外，如果您想通过平铺在一个图形中绘制多个事物，请使用[subplot](http://www.mathworks.com/help/matlab/ref/subplot.html)函数。

当我从终端运行 Matlab 并且我想生成一堆要保存在 html 文件中的图时，我运行我编写的这个函数，将感兴趣的脚本作为参数传递，然后简单地设置它并忘记它：

```
function directoryOutput = cliPub(scriptName)
clc;
close all;
fprintf('Publishing...\n\n');
directoryOutput = publish(fullfile(pwd, scriptName), 'figureSnapMethod', 'getframe', 'useNewFigure', false);
close all; 
```

# mysql - 即使没有结果也返回一个值

> ID：12449899
> 
> 赞同：68
> 
> 时间：2012-09-16T19:15:26.227
> 
> 标签：mysql

我有这种简单的查询，它为给定的 id 返回一个非空整数字段：

```
SELECT field1 FROM table WHERE id = 123 LIMIT 1; 
```

问题是如果找不到 id，则结果集为空。我需要查询始终返回一个值，即使没有结果。

我有这个东西工作，但我不喜欢它，因为它运行 2 次相同的子查询：

```
SELECT IF(EXISTS(SELECT 1 FROM table WHERE id = 123) = 1, (SELECT field1 FROM table WHERE id = 123 LIMIT 1), 0); 
```

如果该行存在，则返回 field1，否则返回 0。有什么方法可以改进吗？

谢谢！

**编辑以下一些评论和答案**：是的，它必须在**单个查询语句中**，我不能使用计数技巧，因为**我只需要返回 1 个值**（仅供参考，我使用 Java/Spring 方法 SimpleJdbcTemplate.queryForLong() 运行查询）。

* * *

## 回答 #1

> 赞同：137
> 
> 时间：2012-09-16T20:12:04.140

如果结果为空，MySQL 有一个返回值的函数。您可以在整个查询中使用它：

```
SELECT IFNULL( (SELECT field1 FROM table WHERE id = 123 LIMIT 1) ,'not found'); 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-02-23T11:10:44.830

当您正在寻找 1 条记录时，(LIMIT 1) 那么这将起作用。

```
(SELECT field1 FROM table WHERE id = 123) 
UNION 
(SELECT 'default_value_if_no_record')
LIMIT 1; 
```

可以是显示默认值或指示未找到结果的便捷方式。我用它来做报告。

另请参阅[http://blogs.uoregon.edu/developments/2011/03/31/add-a-header-row-to-mysql-query-results/](http://blogs.uoregon.edu/developments/2011/03/31/add-a-header-row-to-mysql-query-results/)了解使用它在报告中创建标题的方法。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-09-16T19:24:31.720

您可以包括计数（id）。那总会回来的。

```
select count(field1), field1 from table where id = 123 limit 1; 
```

[http://sqlfiddle.com/#!2/64c76/4](http://sqlfiddle.com/#!2/64c76/4)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-02-08T10:54:16.107

您可以使用[COALESCE](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

```
SELECT COALESCE(SUM(column),0)
FROM   table 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-22T06:11:49.043

如果有人希望使用它来将结果插入到变量中，然后在存储过程中使用它；你可以这样做：

```
DECLARE date_created INT DEFAULT 1;
SELECT IFNULL((SELECT date FROM monthly_comission WHERE date = date_new_month LIMIT 1), 0) 
INTO date_created 
WHERE IFNULL((SELECT date FROM monthly_comission WHERE date = date_new_month LIMIT 1), 0) = 0; 
```

有了这个，您将存储在变量 'date_created' 1 或 0 中（如果没有返回任何内容）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-16T19:26:45.263

用 搜索`LEFT OUTER JOIN`。我不知道 MySQL 是否允许`VALUES`在连接子句中内联，但您可以为此目的使用预定义的表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-05-21T01:48:17.520

kaf 的答案适用于选择一列，如果选择多列，我们可以。

```
DECLARE a BIGINT DEFAULT 1;
DECLARE b BIGINT DEFAULT "name";

SELECT id, name from table into a,b; 
```

然后我们只需要检查 a,b 的值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-07-23T13:42:01.853

如果您希望两者始终返回值但从不为空值，则可以将 count 与 coalesce 结合使用：

```
select count(field1), coalesce(field1,'any_other_default_value') from table; 
```

因为 count，将强制 mysql 始终返回一个值（如果没有要计数的值，则为 0），并且 coalesce 将强制 mysql 始终放置一个不为空的值

# c# - 放大时的双精度问题

> ID：12449902
> 
> 赞同：3
> 
> 时间：2012-09-16T19:15:57.170
> 
> 标签：c#, double-precision

我有这个算法可以计算点 (x0,y0) 的 mandelbrot 值（我认为 x0 和 y0 介于 -1 和 1 之间，不是很重要）。`scale`当不是太大时，这一切都很顺利，但是在较高的值时`scale`，返回的值非常不准确，我的图形输出开始变得怪异。我如何预测`scale`会发生什么价值？

```
 public static byte CalculateMandelbrot(double x0, double y0,double scale)
    {
        x0 /= scale;
        y0 /= scale;
        double y = 0;
        double x = 0;
        byte i = 0;
        while (x * x + y * y < 4)
        {
            double tx = x;
            x = x * x - y * y + x0;
            y = 2 * tx * y + y0;
            i++;
            if (i == 0xFF) break;
        }

        return i;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:05:02.937

双精度数为 53 位。这相当于大约 16 位小数。

如果将分形放大 10^13 倍，并制作 1000x1000 像素的图片，则精度与屏幕分辨率大致相同：双精度可能的最小变化是屏幕上一个像素的步长。

但在那之前你会遇到麻烦，因为你在同一个数字上迭代了 mandelbrot 公式一百次。每次计算都会增加大约 1/10^16 的舍入误差（可能是多个）。有可能（尽管很乏味）预测何时会引起注意。

FPU 内部具有比标准双精度更高的位数，这将减少上述影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:44:25.317

这是经典的“十进制与双倍”陷阱。尝试对所有变量使用“十进制”，看看它是否点击。

从[C# 参考](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.80%29.aspx)页面：

> 与浮点类型相比，十进制类型的精度更高，范围更小

还有像[BigFloat Class](http://www.extremeoptimization.com/Documentation/Reference/Extreme.Mathematics.BigFloat.aspx)这样的任意精度实现。

# javascript - 如何在 HTML5 Canvas 中使用“Helvetica Neue Bold Condensed”

> ID：12449904
> 
> 赞同：1
> 
> 时间：2012-09-16T19:16:10.170
> 
> 标签：javascript, html, canvas

所以问题是，如何在 HTML5 Canvas 中使用“Helvetica Neue Bold Condensed”。

* * *

我试过了：

```
context.font = "20pt 'HelveticaNeue-BoldCondensed'";
context.font = "20pt 'HelveticaNeue-CondensedBold'";
context.font = "20pt 'Helvetica Neue Bold Condensed'"; 
```

它们都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:45:59.277

有几个不同的事情可能是错误的：

1.  您是否**包括**网络字体（如果您不假设它在您自己的计算机上）？`font-family`您可以通过将 设置为另一个纯 HTML 元素来仔细检查它，看看它是否有效。
2.  [您的浏览器/版本](https://stackoverflow.com/questions/12360592/custom-web-font-not-working-in-ie9/12361841#12361841)是否有正确格式的正确文件？
3.  你不是用它的“实际”字体家族名称来称呼它。有时这些可能很奇怪，因此您可能需要使用[字体查看器](http://www.dafont.com/soft.php#1)或[在线服务](http://www.fontsquirrel.com/fontface/generator)进行检查。
4.  [老男人 Miedinger](http://www.linotype.com/522/maxmiedinger.html)困扰着你，因为你正在窃取他最伟大的作品。

**我鼓励您不要使用没有合法许可的字体用作网络字体。** `:)` [谷歌](http://www.google.com/webfonts)和[其他供应商](http://www.fontsquirrel.com/fontface)有很多免费的好东西。使用*那个*.

`font-weight`省略or显然无关紧要`font-style`，尽管您需要确保并匹配定义中的`font-weight`and 。`font-style``@font-face`

然而，奇怪的是你最终会得到一些奇怪的结果：

```
context.font = '40px Griffy';
context.fillText("StackOverflow", 20, 50);
context.fill();

context.font = 'normal Rye';
context.fillText("StackOverflow", 20, 100);
context.fill(); 
```

[http://jsfiddle.net/userdude/tceh5/1/](http://jsfiddle.net/userdude/tceh5/1/)

您会认为它仍然可以使用，但这给出了：

![在此处输入图像描述](../Images/bc6c9851720c741659ae6152a72c1ca7.png)

让我相信你需要小心，并且可能尽可能描述。它[*显然可以使用`40pt Rye`*](http://jsfiddle.net/userdude/tceh5/2/)，而`normal Griffy`只是被默认忽略`10px Sans-Serif`。

**HTML**

```
<canvas id="mycanvas" width="400" height="300"></canvas>​ 
```

**CSS**

```
@font-face {
    font-family: 'Griffy';
    font-style: normal;
    font-weight: 400;
    src: local('Griffy'),
         local('Griffy-Regular'),
         url(http://themes.googleusercontent.com/static/fonts/griffy/v1/f4FUXlL5FPqftKJ2T0mqXg.woff) format('woff');
}
@font-face {
    font-family: 'Rye';
    font-style: normal;
    font-weight: 400;
    src: local('Rye Regular'),
         local('Rye-Regular'),
         url(http://themes.googleusercontent.com/static/fonts/rye/v1/o1b_1mvE63vyDpMCbEPL_A.woff) format('woff');
}
@font-face {
    font-family: 'Jolly Lodger';
    font-style: normal;
    font-weight: 400;
    src: local('Jolly Lodger'),
         local('JollyLodger'),
         url(http://themes.googleusercontent.com/static/fonts/jollylodger/v1/RX8HnkBgaEKQSHQyP9itiXhCUOGz7vYGh680lGh-uXM.woff) format('woff');
}​ 
```

**Javascript**

```
var canvas = document.getElementById("mycanvas");
var context = canvas.getContext("2d");

context.font = 'normal 40px Griffy';
context.fillText("StackOverflow", 20, 50);
context.fill();

context.font = 'normal 40px Rye';
context.fillText("StackOverflow", 20, 100);
context.fill();

context.font = 'normal 40px "Jolly Lodger"';
context.fillText("StackOverflow", 20, 150);
context.fill();​ 
```

[http://jsfiddle.net/userdude/tceh5/](http://jsfiddle.net/userdude/tceh5/)

# c# - C#什么时候需要锁？

> ID：12449905
> 
> 赞同：0
> 
> 时间：2012-09-16T19:16:30.793
> 
> 标签：c#, multithreading

我已经阅读了一些关于线程安全的内容，但我想了解我需要哪些操作来加锁。

例如，假设我想要一个线程安全队列/如果出队操作将返回第一个元素（如果有的话），我什么时候需要锁？可以说我正在为条目使用抽象链表。

应该锁定写操作吗？还是读书的？或两者？

希望有人可以向我解释或给我一些链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:25:42.670

并发场景中的同步是一个非常广泛的话题。本质上，只要两个或多个线程在它们之间具有某种共享状态（计数器、数据结构），并且其中至少一个在读取或来自不同线程的另一个突变的同时改变这种共享状态，结果可能会不一致。在这种情况下，您将需要使用某种形式的同步（其中锁是一种风格）。

现在转到您的问题，执行出队的典型代码如下（伪代码）：

```
if(queue is not empty) 
    queue.dequeue 
```

它可以由多个线程同时执行。尽管一些队列实现在内部同步了`queue is not empty`操作和`queue.dequeue`操作，但这还不够，因为执行上述代码的线程可能会在检查和实际出队之间被中断，所以一些线程可能会在到达出队时发现队列为空即使检查返回 true。需要锁定整个序列：

```
lock(locker)
{
    if(queue is not empty) 
        queue.dequeue
} 
```

请注意，以上内容可能由某些数据结构实现为单线程安全操作，但我只是想在这里说明一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T07:20:11.073

我找到的关于锁定和线程的最佳指南是这个页面（这是我在使用锁定和线程时参考的文本）：

[http://www.albahari.com/threading/](http://www.albahari.com/threading/)

你想要“锁定和线程安全”这一段，但也要阅读其余部分，它写得很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T07:10:12.273

锁定的基本规则

*   同时改变同样的东西不会飞
*   阅读正在改变的东西不会飞
*   同时阅读相同的东西确实会飞
*   同时改变不同的东西可能会飞

锁定需要防止出现不飞行的情况。这可以通过多种方式完成。C#为此提供了很多工具。除了 Concurrent<> 集合类型，如 ConcurrentDictionary、ConcurrentQueue 等，还有 ReaderWriterLockSlim 等。

您可能会发现这个来自 microsoft 的免费 .pdf 文件很有用。它被称为“C# 线程编程简介”

[http://research.microsoft.com/pubs/70177/tr-2005-68.pdf](http://research.microsoft.com/pubs/70177/tr-2005-68.pdf)

这个有点幽默的接力

[http://www.codeproject.com/Articles/114262/6-ways-of-doing-locking-in-NET-Pessimistic-and-opt](http://www.codeproject.com/Articles/114262/6-ways-of-doing-locking-in-NET-Pessimistic-and-opt)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T19:48:54.393

作为最简单的经验法则，所有**共享的可变数据**都需要在您访问它时锁定一个锁。

写入时需要锁，因为您需要确保没有人同时写入相同的字段。

读取时需要加锁，因为另一个线程可能正在写入数据，所以它可能处于不一致的状态。不一致的数据会产生不正确的输出或崩溃。

锁有自己的一系列相关问题，（谷歌为“哲学家就餐”）所以我倾向于尽可能避免使用显式锁。更高级别的构建块，例如 ConcurrentQueue<> 不太容易出错，但您仍应阅读文档。

另一种避免锁定的简单方法是为后台进程制作输入数据的副本。或者更好的是，使用不可变的输入（不能改变的数据）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T19:21:39.680

有关基本概述，请参阅[MSDN：线程同步](http://msdn.microsoft.com/en-us/library/ms173179.aspx)。有关更详细的介绍，我建议阅读[Amazon：Windows 上的并发编程](http://www.amazon.de/gp/product/032143482X/)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-16T19:21:50.903

您需要锁定受非原子操作影响的对象。

将对象添加到列表 -> 非原子

给一个字节或一个 int -> atomic 赋值

# java - 我需要使用具有多对一关系的@Access=FIELD 注释吗？

> ID：12449906
> 
> 赞同：0
> 
> 时间：2012-09-16T19:16:50.220
> 
> 标签：java, hibernate, annotations, getter, hibernate-onetomany

我有分为几类的实体。每个实体可以属于许多类别，所以我有一对多的关联。

下面的 ORM 编辑是否正确：

```
@OneToMany
@Access(AccessType.FIELD)
private Set<Category> parents = new HashSet<Category>();
public Set<Category> getParents() {
    return parents;
}
public boolean addParent(Category parent) {
    return parents.add(parent);
}
public boolean removeParent(Category parent) {
    return parents.remove(parent);
} 
```

我的具体问题是我是否需要使用 @Access 注释？如果我不使用它，那么 Hibernate 将如何知道不映射`getParents`getter？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T19:27:56.620

我不知道您是否需要`@Access(AccessType.FIELD)`注释，因为这取决于一些默认值（见下文）。但是如果你使用 Field 访问类型（默认或 by `@Access(AccessType.FIELD)`），那么 Hibernate 将直接访问 FIELD 而不是使用 getter 或 setter！

请参阅[Hibernate 参考，第 5.1.4.1.2 章。访问类型](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/)，有关访问类型确定算法的更多详细信息。

> 默认情况下，类层次结构的访问类型由 @Id 或 @EmbeddedId 注释的位置定义。如果这些注释在字段上，则仅考虑字段以进行持久性，并通过字段访问状态。如果 getter 上有注释，那么只有 getter 被认为是持久性的，并且通过 getter/setter 访问状态。这在实践中效果很好，是推荐的方法。

# jquery - JQuery 数据表添加行

> ID：12449907
> 
> 赞同：0
> 
> 时间：2012-09-16T19:17:06.773
> 
> 标签：jquery, html, plugins, datatables, dynamic-tables

我正在尝试创建一个用户可以在其中添加、编辑和删除元素的表。我正在使用数据表插件。这是我想做的[教程。](http://editor.datatables.net/tutorials/api_manipulation)这是我的html代码：

```
<p><button class="editor_create">Add new person</button></p>
    <table cellpadding="0" cellspacing="0" border="0" class="display" id="reg_more" width="100%">
        <thead>
            <tr>
                <th width="30%">First Name</th>
                <th width="18%">Last Name</th>
                <th width="18%">Phone</th>
                <th width="18%">Email</th>
                <th width="18%">Ethnicity</th>
                <th>Edit</th>
                <th>Delete</th>
            </tr>
        </thead>
    </table> 
```

这是jquery代码：

```
$(document).ready(function(e) {
$('#reg_more').dataTable({
                "bLengthChange": false,
                "bInfo": false,
                "bPaginate": false,
                "bStateSave": true,
                "rowHeight": 'auto',
                "bFilter": true,
                "bSort": false,
                "bAutoWidth": false,

                "aoColumns": [
                    { "mDataProp": "First Name" },
                    { "mDataProp": "Last Name" },
                    { "mDataProp": "Phone" },
                    { "mDataProp": "Email", "sClass": "center" },
                    { "mDataProp": "Ethnicity", "sClass": "center" },
                    {
                        "mDataProp": null, 
                        "sClass": "center",
                        "sDefaultContent": '<a href="" class="editor_edit">Edit</a>',
                        "bSortable": false,
                        "bSearchable": false
                    },
                    {
                        "mDataProp": null, 
                        "sClass": "center",
                        "sDefaultContent": '<a href="" class="editor_remove">Delete</a>',
                        "bSortable": false,
                        "bSearchable": false
                    }
                ]
            }); 
        }
        $("#submit").show();
        window.scrollTo(0,document.body.scrollHeight);
    });

    var editor = new $.fn.dataTable.Editor( {
        "domTable": "#reg_more"
    } );

    //style="display:none;"
    //$("#addbtn").click(addrow);

    editor.add( [ 
      {
          "label": "First Name:",
          "name": "fname"
      }, {
          "label": "Last Name:",
          "name": "lname"
      }, {
          "label": "Phone:",
          "name": "phone"
      }, {
          "label": "Email:",
          "name": "email"
      }, {
          "label": "Ethnicity:",
          "name": "ethnicity"
      }
    ] );

    $('button.editor_create').on('click', function (e) {
        e.preventDefault();

        editor.create(
            'Add new person',
            {
                "label": "Add",
                "fn": function () {
                    editor.submit()
                }
            }
        );
    } );

    $('#reg_more').on('click', 'a.editor_edit', function (e) {
        e.preventDefault();

        editor.edit(
            $(this).parents('tr')[0],
            'Edit record',
            {
                "label": "Update",
                "fn": function () { editor.submit(); }
            }
        );
    } );

    $('#reg_more').on('click', 'a.editor_remove', function (e) {
        e.preventDefault();

        editor.message( "Are you sure you want to remove this row?" );
        editor.remove(
            $(this).parents('tr')[0],
            'Delete row', 
            {
                "label": "Update",
                "fn": function () {
                    editor.submit()
                }
            }
        );
    } );
}); 
```

添加按钮最终提交表单，而不是打开一个用户可以输入所有信息的小表单。如何让它弹出一个小窗口，就像教程中的“创建新记录”按钮打开一个表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:43:20.963

更改此部分：

```
 }
    $("#submit").show();
    window.scrollTo(0,document.body.scrollHeight);
}); 
```

对此：

```
 $("#submit").show();
    window.scrollTo(0,document.body.scrollHeight); 
```

（删除多余的`}`和`});`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-12-11T22:59:14.937

```
.ui-dialog 
{ 
    margin-top:-300px;margin-left:400px;
} 
```

# asp.net-mvc-3 - mvc3 控制器不工作 - 路径映射错误

> ID：12449911
> 
> 赞同：0
> 
> 时间：2012-09-16T19:17:19.987
> 
> 标签：asp.net-mvc-3, maproute

这是我的代码：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Default", // Route name
                "{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
            );

            routes.MapRoute(
                "Admin", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Admin", action = "Index", id = UrlParameter.Optional } 
            );  
        } 
```

对于第一个链接，如果我转到：localhost/song localhost/date 等它会很好地打开主控制器下的所有链接。

但是对于第二个 maproute：localhost/admin localhost/admin/index - 这些链接不起作用？谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:27:42.180

首先，您的默认路由必须是列表中的最后一个，而不是第一个。

其次，您有两条默认路由。MVC 无法知道使用哪个，所以它总是选择第一个匹配的。相反，您的管理员网址应该是`"Admin/{action}/{id}"`

# regex - perl 哈希数组从文件中读取

> ID：12449914
> 
> 赞同：0
> 
> 时间：2012-09-16T19:17:37.773
> 
> 标签：regex, perl, foreach, hashtable

我正在尝试读取具有相同格式的多个文件，并希望根据正则表达式进行一些统计。

即我想计算[]内的类似项目

```
 NC_013618 NC_013633 ([T(nad6 trnE ,cob trnT ,)])
C_013481 NC_013479 ([T(trnP ,rrnS trnF trnV rrnL nad1 trnI ,)])
NC_013485 NC_003159 ([T(trnC ,trnY ,)])
NC_013554 NC_013254 ([T(trnR ,trnN ,)])
NC_013607 NC_013618 ([T(nad6 trnE ,cob trnT ,)]) 
```

问题是我没有得到正确的值，下面是我的代码：

```
 use strict;
 use warnings;

my %data;
@FILES = glob("../mitos-crex/*.out");
foreach my $file (@FILES) {
    local $/ = undef;
    open my $fh, '<', $file;
    $data{$file} = <$fh>;
}

my @t;
my $c = 0;
foreach my $line (keys %data) {
    foreach my $l ($data{$line}) {
         print $l."\n";
        ($t[$c]) = $l =~ m/(\[.*\])/;

        $c++;
    }
}

#the problem is here the counter is not giving the right value

print $c;
my %counts;
$counts{$_}++ for @t; 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:46:15.080

首先，*总是* `use strict`和`use warnings`。此措施对所有编程都至关重要，因为它会迅速揭示简单的问题，否则您可能会忽略或浪费时间进行调试。如果您在程序中寻求其他人的帮助，这尤其正确且简单的礼貌

您似乎在将整个文件*吞入*单个字符串和一行行之间感到困惑。您编写它的方式，每个元素`$data{file}`都是一个包含所有文件数据的单个标量值，然后您尝试迭代它只`foreach $l ($data{$line}) { ... }`执行一次，因此只找到`[...]`文件中的第一个字符串

通常我会说您不应该以这种方式读取所有文件数据，因为问题可能有更好的流式解决方案，但我不知道您还想将捕获的数据用于什么，所以我的解决方案遵循您自己的设计

我认为您需要将数据放入虚拟数组而不是标量中，然后在循环中对其进行迭代。您必须保留`$/`定义，以便按行读取文件，并使用`[ <$fh> ]`. 然后你可以用`foreach my $line (@{ $data{$file} }) { ... }`

```
use strict;
use warnings;

my %data;

my @files = glob("../mitos-crex/*.out");

foreach my $file (@files) {
    open my $fh, '<', $file or die $!;
    $data{$file} = [ <$fh> ];
}

my $c = 0;
my @t;
foreach my $file (keys %data) {
    foreach my $line (@{ $data{$file} }) {
        ($t[$c]) = $line =~ /(\[.*\])/;
        $c++;
    }
}

print $c;
my %counts;
$counts{$_}++ for @t; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:30:42.160

计数器给出了正确的值。您的问题是您正在吞食文件（一次全部读取），但只存储找到的第一个值：

```
($t[$c]) = $data{$line} =~ m/(\[.*\])/;  # only finds first value in file 
```

要么正确循环每个文件，并为每一行使用上面的正则表达式，或者执行以下操作：

```
push @t, ($data{$line} =~ m/(\[.*\])/g); 
```

您应该始终使用

```
use strict;
use warnings; 
```

并解决导致的错误/警告。不这样做是个坏主意，而且只是将问题隐藏在代码中——而不是解决它们。

此外，您应该知道此声明：

```
foreach $l ($data{$line}) { 
```

只迭代*一次*，因为这里的每一“行”都是一个完整的文件，并且`$data{$line}`除了一个标量值之外。此外，您将 using`$l`作为别名进行迭代，但您仍然`$data{$line}`在循环内部使用，这使得循环完全多余。

# php - 解析 XML 文件 (RSS) 时转义单引号

> ID：12449915
> 
> 赞同：0
> 
> 时间：2012-09-16T19:17:52.343
> 
> 标签：php, xml, parsing, xml-parsing

我有一个要解析的 XML 文件..我没有生成 XML ..我在解析文件时遇到了问题...有一个带有`'`单引号的节点..这会产生错误..

我尝试使用`addslashes()`和`htmlentities()`使用时，`simplexml_load_file()`但没有任何反应！..有没有办法解决这个问题并用引号解析文件？

```
Warning: simplexml_load_file() [function.simplexml-load-file]: THE URL:853: parser error : Input is not proper UTF-8, indicate encoding ! Bytes: 0xE2 0x20 0x20 0x6C in /****/parseXML.php on line 7 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:27:27.103

听起来你有编码问题。单引号可能不是在键盘上找到的单引号字符，而是由单词按压程序生成的更高级的字符。结果很可能是您的输入文件不是 UTF-8，而是另一个多字节字符集。

您要么需要使用文本编辑器将编码转换为完全 UTF-8，要么使用 PHP 的[iconv](http://uk3.php.net/manual/en/function.iconv.php)将文件的编码（可能是 ISO-8859-1）转换为 UTF-8 编码，然后加载它[simplexml_load_string](http://www.php.net/manual/en/function.simplexml-load-string.php)。

# dynamic - 为 jqgrid 设置页码

> ID：12449919
> 
> 赞同：0
> 
> 时间：2012-09-16T19:18:17.013
> 
> 标签：dynamic, jqgrid, pager

我在动态设置 jqgrid 的页码时遇到问题。我是这个 jqgrid 的新手，希望得到帮助以快速学习它。

我有一个场景，如果有人能回答，那对我来说非常好。

1.  我有一个应用程序，它可以在单个查询输出中带来数百万条记录。
2.  为此，我想要分页数据块而不是一次获取所有数据（无论如何都不会发生）
3.  为此，我会第一次访问服务器并找出要显示的总记录，但只返回其中的 2000 条。
4.  一旦用户使用分页下一个按钮并到达最后一条记录，单击下一个按钮，将调出服务器的下 2000 条记录。
5.  这里的问题是寻呼机显示只有 20 页（我在一个页面中设置了 100 个总记录），并且一旦访问第 20 页，它就会禁用下一步按钮，从而停止从服务器获取新的数据集
6.  即使不知何故，我得到了下一组数据，页面应该只显示 20 条初始记录。我希望页面首先显示总记录/页面大小，尽管只有 2000 条记录，以便可以自由使用下一个、上一个、第一个和最后一个按钮，并且可以在需要时从服务器获取数据。

有人做过这样的事情吗？我真的坚持这个要求超过 2 周了。提前感谢大家。希望能尽快得到答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T05:33:25.810

我已经使用 localreader 让它工作了，它可以帮助我将总数、记录和页数设置为正确的值。

# r - 在 ggplot2 中分组条形图

> ID：12449924
> 
> 赞同：3
> 
> 时间：2012-09-16T19:06:51.323
> 
> 标签：r, ggplot2, dataframe

> **可能重复：**
> [ggplot2条形图中的顺序条](https://stackoverflow.com/questions/5208679/order-bars-in-ggplot2-bar-graph)

我有一个数据集，我想要一个 ggplot 条形图来描述其中一个变量的比例，并根据另一个变量对条形图进行排序或排序。这是数据集的示例。

```
grouping,category,domain
6,W,ced0.11
1,none,ced1.1
2,none,ced1.1
3,Z,ced1.5
2,Z,ced1.7
3,Z,ced1.3
3,none,ced1.6
2,none,ced1.1
1,Z,ced1.1
4,none,ced0.8
4,W,ced0.6
4,W,ced0.6
2,Z,ced1.5
2,W,ced1.6
4,Y,ced0.16
3,Z,ced1.5
4,Y,ced0.15
4,W,ced0.15
4,Y,ced0.24
6,W,ced0.8
4,Y,ced0.4
4,none,ced0.19
4,W,ced0.5
4,W,ced0.10
4,W,ced0.9
4,W,ced0.3
1,Z,ced1.6
4,W,ced0.9
4,W,ced0.15
1,Z,ced1.1
4,Y,ced0.19
6,W,ced0.4
4,W,ced0.16
4,W,ced0.6
4,W,ced0.5
2,Z,ced1.7
4,W,ced0.9
4,Y,ced0.1
4,W,ced0.2
4,Y,ced0.21
2,W,ced0.3
4,Y,ced0.21
4,W,ced0.10
1,Z,ced1.2
4,Y,ced0.16
1,Z,ced1.2
1,Z,ced1.2
5,W,ced0.23
4,Y,ced0.1 
```

以及下面用于导入和显示条形图的代码。

```
library(ggplot2)
ex1.dta <- read.csv("../../Datasets/ex1.txt",sep=",",header=TRUE)

#sort the data frame
ex1.dta2 <- transform(ex1.dta,domain=reorder(domain,category))

ggplot(ex1.dta2,aes(domain,fill=category)) +
  geom_bar(position="fill") + 
  scale_y_continuous(name="Proportion") + 
  scale_x_discrete(name="domains") +
  scale_fill_manual(values=c("#841108","#16a4e9","#a4a42a","#eb96ed","grey"),name="category") + 
  theme_bw() +
  opts(
    axis.text.x=theme_text(angle=-90,hjust=0),
    axis.line = theme_segment(colour = "black"),
    panel.grid.major = theme_blank(),
    panel.grid.minor = theme_blank(),
    panel.border = theme_blank()) +
  geom_vline(xintercept = 0) 
```

![在此处输入图像描述](../Images/30abd36d68faec13edaf3e322d74a75b.png)

当我使用转换对数据框进行排序时，我收到警告并且不执行排序/排序。我真正想要的是排序，使每个类别的条沿 x 轴组合在一起（并按降序排列）。（所有棕色条一起，浅蓝色一起并以“分层方式”等等。）

我怎样才能做到这一点？我需要多次订购吗？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T20:48:58.313

我不完全确定你真正想要什么顺序，但你可以尝试这样的事情：

```
ex1.dta2 <- transform(ex1.dta,domain=reorder(domain,category,FUN = function(x){ min(as.numeric(x)) })) 
```

结果将取决于级别的`category`排列方式，因此如果这不是您想要的确切顺序，您应该进行调整。在这种情况下，我得到以下图表：

![在此处输入图像描述](../Images/0967c82bc53d4b7a62757461869c5d7c.png)

这里发生的事情是因子在内部存储为整数代码和标签集。因此，要根据因子重新排序，`category`我只需传递一个匿名函数，该函数将转换为整数代码，然后选择最小值。

# routing - Flask url_for 在模块化应用程序中路由时出错

> ID：12449926
> 
> 赞同：5
> 
> 时间：2012-09-16T19:19:33.470
> 
> 标签：routing, flask, jinja2, build-error, url-for

我正在 Flask 中构建模块化应用程序，如果我从当前蓝图中引用另一个蓝图中的函数，我会不断收到构建错误，例如我有一个文件 userProfiles.py

```
@userP.route('/myProfile/', methods=['GET']) 
def showProfile():
     ..... 
```

在另一个文件 userAccounts.py 我有

```
@userA.route('/login/', methods=['GET', 'POST'])
def login():
     ..... 
```

然后我有一个 main.py 注册所有蓝图并执行 app.run()

现在我正在尝试从我的 showProfile 函数中执行 url_for('userA.login) 但我不断收到 - werkzeug.routing.BuildError - 。我无法解决这个问题，并且没有在线解决方案对我有帮助。

PS url_for 函数在我的模板中也不起作用，由于某种原因，它只是不能使用这些函数，我别无选择，只能href 到路径。

只是为了添加更多信息，我根本没有重复的函数，所有函数及其名称都是唯一的，并且 url_for 路由在每个蓝图中都可以正常工作

这是回溯：

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1701, in __call__
    return self.wsgi_app(environ, start_response)
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1689, in wsgi_app
    response = self.make_response(self.handle_exception(e))
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1687, in wsgi_app
    response = self.full_dispatch_request()
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1360, in full_dispatch_request
    rv = self.handle_user_exception(e)
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1358, in full_dispatch_request
    rv = self.dispatch_request()
  File "/usr/local/lib/python2.7/dist-packages/flask/app.py", line 1344, in dispatch_request
    return self.view_functions[rule.endpoint](**req.view_args)
  File "/home/cevdet/PycharmProjects/FlaskProjects/jobperfect/userProfiles.py", line 126, in showProfile
    else: return redirect(url_for('userA.login'))
  File "/usr/local/lib/python2.7/dist-packages/flask/helpers.py", line 361, in url_for
    return appctx.app.handle_url_build_error(error, endpoint, values)
  File "/usr/local/lib/python2.7/dist-packages/flask/helpers.py", line 354, in url_for
    force_external=external)
  File "/usr/local/lib/python2.7/dist-packages/werkzeug/routing.py", line 1607, in build
    raise BuildError(endpoint, values, method)
BuildError: ('userA.login', {}, None)
127.0.0.1 - - [17/Sep/2012 23:55:12] "GET /myP 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-01-27T09:23:21.930

你是如何宣布你的蓝图的`userA`？

当您使用`url_for()`蓝图时，端点字符串的前缀（作为蓝图标识符）必须是您为第一个参数传递的蓝图*名称*，而不是蓝图分配给的变量名称。

```
subapp = Blueprint('profile', __name__)

@subapp.route('/<username>')
def fetch_profile(username):
    pass 
```

如果你像上面那样声明了蓝图，你应该`url_for()`像下面这样调用：

```
url_for('profile.fetch_profile', username=arg) 
```

# php - 尝试设置上传文件夹时奇怪的不合语法的 PHP 错误消息

> ID：12449930
> 
> 赞同：0
> 
> 时间：2012-09-16T19:20:25.253
> 
> 标签：php, upload

我一直收到这个错误，逐字逐句：

> // PHP 设置 编辑 php.ini（尝试 /usr/local/php5/lib/php.ini 搜索“tmp”并确保文件上传是，并且您具有该名称的 tmp 主管，并设置了权限。要加载新的php.ini，重启apache：apachectl restart

奇怪的是，除了语法缺陷之外，无论我在 php.ini 中将 upload_tmp_dir 设置为什么......或者即使我完全删除了 php.ini，我都能得到它。

*   每次更改后我都会重新启动 apachectl。我也试过重启。
*   我相信我正在编辑正确的 php.ini，因为它是我执行 phpinfo() 时列出的一个：/usr/local/php5/lib/php.ini。它列出了我在其中编辑的任何上传目录。
*   这会在 Mac Lion 下同时使用 Chrome 和 Firefox
*   phpinfo 告诉我我正在运行 PHP 版本 5.4.6
*   我是专家的反面。

谢谢你能给我的任何帮助。我正准备打自己一巴掌。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:06:27.223

这确实是隐藏文件中的评论。啊啊啊啊！感谢那些提供建议的人。我同样感激和尴尬。

# c - 这个基本代码有什么问题？

> ID：12449932
> 
> 赞同：3
> 
> 时间：2012-09-16T19:20:45.777
> 
> 标签：c

我不知道为什么这段代码是错误的：

```
int sum = 0;

// take sum of every other digit starting with second-to-last and add to sum variable            
for (int i = length; i > 0; i -= 2)
{   
     sum += cardString[i];
     printf("%c | %i\n", cardString[i], sum);
} 
```

假设长度为 15，“cardString”字符串为 378282246310005，以下是该程序的输出：

```
 | 0

0 | 48

0 | 96

3 | 147

4 | 199

2 | 249

2 | 299

7 | 354 
```

老实说，我不知道为什么会这样。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-16T19:22:53.313

问题：

*   您所做的是添加数字的 ASCII 代码，而不是数字本身。
*   您添加的第一个数字是终止字符串的 acutally 空字符

改变

```
sum += cardString[i]; 
```

至

```
sum += cardString[i] - '0'; 
```

应该解决第一个问题。

第二个问题可以通过从正确的位置开始来解决，即在终止字符之前的两个字符：

```
for (int i = length - 2; i >= 0; i -= 2) 
```

查看此图以更好地理解：

```
378282246310005X  <-- last character is null
^            ^ ^
|            | |
0            | length
             |
           length - 2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T19:22:40.813

您需要将*字符串*中的字符转换为等效的数字。改变：

```
sum += cardString[i]; 
```

至：

```
sum += cardString[i] - '0'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-16T19:23:48.383

```
sum += cardString[i]; 
```

不会做你认为它做的事——它不会为 0 添加 0、为 1 添加 1 等——而是添加其 ASCII/Unicode/无论您的系统具有该字符的字符代码的哪种编码。尝试

```
sum += cardString[i] - '0'; 
```

反而。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T19:27:05.417

cardString 是一个字符串，包含“378282246310005”，即 char {51,55,56,50,56,50,50,52,54,51,49,48,48,48,53,0}。第一个元素是字符“3”，其值为 51（ascii 代码）。您添加 ascii 代码而不是您期望的值。
要获得数字的值，只需减去 48（即“0”）。
注意循环中的边界，您访问的第一个字符似乎是最终的 nul 字符：记住数组在 C 中是 0。

```
cardString[0]='3' = 51
cardString[1]='7' = 55
and so on ...
cardString[14]='5' = 53
cardString[15]='\0' = 0 
```

我猜你的长度是15...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-16T19:23:22.067

您正在总结字符串的字符值，而不是它们所代表的数字。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-16T19:24:13.263

您正在添加字符的 ASCII 代码，而不是数字值。

所以每个数字都有一个 48 的偏移量：'0' == 48

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-16T19:31:54.563

a 的整数表示`char`不必是您在字符串中看到的字符的以 10 为基数的表示，而且通常不是*。*您会看到字符的 ASCII 整数值，例如 ASCII 值为`'0'`48 *，*因此您的初始值为*48, 96*。有关您的输出的说明，请参阅[此处](http://en.wikipedia.org/wiki/ASCII)的可打印字符的 ASCII 图表。

您需要将字符显式转换为整数值。一个技巧是`0`从表示数字的字符中减去 的整数值，以获得整数转换，例如`'5' - '0'`yield `5`。

*您的代码还有另一个问题：循环从字符串末尾*的一个索引开始，在空字符处。这就是为什么你的初始值为零。大概您*不想*在总和中包含该值，但如果您这样做，如您所见，它不会影响总和，因为空字符也具有零整数值。更准确地说，您的代码将从 开始`length - 2`，因为您说要从*倒数第二个*字符开始。

# asp.net - IE10 中的 LinkBut tons 不执行回发

> ID：12449934
> 
> 赞同：9
> 
> 时间：2012-09-16T19:21:24.873
> 
> 标签：asp.net, internet-explorer-10

我正在尝试向`LinkButton`ASP.NET 4 页面添加一个简单的页面，但它没有`postback`在 IE10 中调用。代码如下所示。

HTML：

```
<form id="form1" runat="server">
<div>
  <asp:LinkButton ID="LinkButton1" runat="server"
    OnClick="LinkButton1_Click">LinkButton</asp:LinkButton>
  <br />
  <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
</div>
</form> 
```

C＃：

```
protected void Page_Load(object sender, EventArgs e) { }

protected void LinkButton1_Click(object sender, EventArgs e)
{
  Label1.Text = DateTime.Now.ToString();
} 
```

如您所见，它只是一个普通页面。但是，自从升级到 Win8 和 IE10 后，我无法`LinkButton`调用该方法。这适用于 Firefox。

有什么想法我需要做什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-06T21:31:21.693

这是服务器修补/更新问题。ASP.NET 没有发出正确的 JavaScript 供您的浏览器运行。它不知道比 IE9 更新的 IE 版本。

请参阅 Scott Hanselman 的帖子：

[ASP.NET 无法检测 IE10 导致 _doPostBack is undefined JavaScript 错误或保持 FF5 滚动条位置](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

Scott 在这篇 2011 年的帖子中指出，应该通过 Windows Update 分发修复程序。确保您的服务器使用来自 Windows 更新的 .NET Framework 服务更新是最新的。如果没有，[您可以下载补丁](http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2600088)或[阅读 Microsoft KB 上的更多详细信息](http://support.microsoft.com/kb/2600088)。

该修复程序将更新那些`.browser`允许 ASP.NET 发出正确标记和 JavaScript 的文件。

> %WinDir%\Microsoft.NET\Framework(64?)\v4.0.30319\CONFIG\Browsers\ie.browser

这将包含这样的项目：

```
 <!-- Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0) -->
  <browser id="IE10Plus" parentID="IE6Plus">
    <identification>
      <capability name="majorversion" match="\d{2,}" />
    </identification>
    <capabilities>
      <capability name="jscriptversion" value="6.0" />
    </capabilities>
  </browser> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T17:09:24.847

关于错误的解释：

[http://support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088)

如果你想直接下载（Framework 4.0）到 Hotfix 是：

[http://hotfixv4.microsoft.com/.NET%20Framework%204.0%20-%20Windows%20XP,%20Windows%202003,%20Windows%20Vista,%20Windows%20Server%202008,%20Win7,%20Windows%20Server%202008 %20R2%20(MSI)/nosp/DevDiv953277/30319.504/free/436907_intl_x64_zip.exe](http://hotfixv4.microsoft.com/.NET%20Framework%204.0%20-%20Windows%20XP,%20Windows%202003,%20Windows%20Vista,%20Windows%20Server%202008,%20Win7,%20Windows%20Server%202008%20R2%20(MSI)/nosp/DevDiv953277/30319.504/free/436907_intl_x64_zip.exe)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-16T19:59:09.977

您有补丁，该补丁在 Internet Explorer 和 Mozilla Firefox 的浏览器定义文件中引入了更新的定义。浏览器定义文件存储在以下文件夹中，具体取决于 Microsoft Framework le.NET 的安装版本：

对于 32 位版本的 Framework 4.0.NET

%WinDir%\Microsoft.NET\Framework\v4.0.30319\CONFIG\浏览器

对于 64 位版本的 Framework 4.0.NET

%WinDir%\Microsoft.NET\Framework64\v4.0.30319\CONFIG\浏览器

在此处下载补丁：http: [//support.microsoft.com/hotfix/KBHotfix.aspx ?kbnum=2600088&kbln=fr](http://support.microsoft.com/hotfix/KBHotfix.aspx?kbnum=2600088&kbln=fr)

链接： http: [//support.microsoft.com/kb/2600088](http://support.microsoft.com/kb/2600088)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T12:34:14.777

您应该安装 .Net Framework 4.5，它对我有用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-17T15:24:53.863

这是由于 IE10 中的安全设置。由于某种原因，我的本地 Intranet 设置比公共网站更严格。所以我不能点击超链接，但我可以点击提交表单的按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-13T12:15:38.640

您需要为此安装修补程序。Scott Hanselman 在他的博客上解释了这一点。

[http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx](http://www.hanselman.com/blog/BugAndFixASPNETFailsToDetectIE10CausingDoPostBackIsUndefinedJavaScriptErrorOrMaintainFF5ScrollbarPosition.aspx)

# apache - 将 int 拆分为文件夹

> ID：12449935
> 
> 赞同：0
> 
> 时间：2012-09-16T19:21:24.760
> 
> 标签：apache, rewrite

我需要创建一些 http_rewrite ：

我会有要求`some.url/123456`

我必须做一些事情将此网址拆分为：

```
/{directory1}/{directory2}/{directory3}/{directory4}/123456.jpg 
```

在哪里

```
directory1 = 1
directory2 - 12
directory3 = 123
directory4 = 1234 
```

所以它将是：

```
/1/12/123/1234/123456.jpg 
```

所以这个数字必须分成几个文件夹

你可以帮帮我吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T19:28:02.720

在文档根目录的 htaccess 文件中，尝试：

```
RewriteEngine On

RewriteRule ^((((([0-9])[0-9])[0-9])[0-9])[0-9]+)\.(jpe?g|gif|png)$ /$5/$4/$3/$2/$1.$6 [L] 
```

`,R=301`如果要重定向浏览器，可以在方括号中添加 a ，以便地址栏中的 URL 显示`http://some.url/1/12/123/1234/123456.jpg`

如果要将这些规则放在服务器/虚拟主机配置中，请在重写规则的正则表达式中添加`/`一个`^`。

# xslt - xsl:sort：按数值排序

> ID：12449939
> 
> 赞同：4
> 
> 时间：2012-09-16T19:21:39.627
> 
> 标签：xslt, sorting, numerical

我必须按数字顺序整理代码。代码有四个字符和四个数字。

例如，

```
COMP2100
COMP2400
COMP3410
LAWS2202
LAWS2250 
```

当我这样做时`<xsl:sort select="code" order="ascending" />` ，它会显示上面的结果。

但是，我希望它是“数字顺序”，即

```
COMP2100
LAWS2202
COMP2250
COMP2400
COMP3410 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-16T19:33:01.177

**注意：OP 现在提供了示例 XML。下面的理论可以很容易地适应这个 XML。**

**一、XSLT 1.0（第 1 部分）**

**这是一个简单的解决方案，假设您的断言（“代码有四个字符和四个数字”）总是如此：**

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:variable name="vNums" select="'1234567890'" />

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <t>
      <xsl:apply-templates>
        <xsl:sort select="substring(., 5)"
          data-type="number" />
      </xsl:apply-templates>
    </t>
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于想象中的 XML 文档，随机排列：**

```
<?xml version="1.0" encoding="utf-8"?>
<t>
  <i>COMP3410</i>
  <i>LAWS2202</i>
  <i>COMP2400</i>
  <i>COMP2100</i>
  <i>LAWS2250</i>
</t> 
```

**...产生了正确的结果：**

```
<?xml version="1.0" encoding="utf-8"?>
<t>
  <i>COMP2100</i>
  <i>LAWS2202</i>
  <i>LAWS2250</i>
  <i>COMP2400</i>
  <i>COMP3410</i>
</t> 
```

**解释：**

*   —— XSLT*中*[`Identity Transform`](http://www.dpawson.co.uk/xsl/sect2/identity.html)（如果不是）最基本的设计模式之一—— 将源 XML 文档中的所有节点按原样复制到结果 XML 文档中。
**   `<t>`一个模板通过根据字符串中从位置 5 到字符串末尾的字符对 的所有子项进行排序来覆盖身份转换。*

 *同样，请注意，此解决方案假定您的原始断言——“代码有四个字符和四个数字”——是（并且永远是）正确的。

* * *

**二、XSLT 1.0（第 2 部分）**

`<i>`一个（可能）更安全的解决方案是假设节点内的不同位置可能有许多非数字字符。在这种情况下，这个 XSLT：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes" />
  <xsl:strip-space elements="*" />

  <xsl:variable name="vNums" select="'1234567890'" />

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <t>
      <xsl:apply-templates>
        <xsl:sort select="translate(., translate(., $vNums, ''), '')"
          data-type="number" />
      </xsl:apply-templates>
    </t>
  </xsl:template>
</xsl:stylesheet> 
```

...提供相同的结果：

```
<?xml version="1.0" encoding="utf-8"?>
<t>
  <i>COMP2100</i>
  <i>LAWS2202</i>
  <i>LAWS2250</i>
  <i>COMP2400</i>
  <i>COMP3410</i>
</t> 
```

**解释：**

*   [`Identity Transform`](http://www.dpawson.co.uk/xsl/sect2/identity.html)再次使用。
*   在这种情况下，附加模板使用所谓的[`Double Translate Method`](https://stackoverflow.com/questions/7337097/how-to-get-only-numbers-from-string-with-xpath)（首先由 Michael Kay 提出并由 Dimitre Novatchev 首次向我展示）`<i>`在排序之前从每个元素的值中删除所有非数字字符。

* * *

**三、XSLT 2.0 解决方案**

**这是一个可能的 XSLT 2.0 解决方案，与 XSLT 1.0 解决方案的第 2 部分非常相似；它只是用 XPath 2.0 处理正则表达式的能力替换了 Double Translate Method：**

```
<xsl:sort select="replace(., '[^\d]', '')" data-type="number" /> 
```

请注意，您绝不*需要*在 XPath 2.0 中使用正则表达式。Double Translate Method 与 XPath 1.0 中的效果一样好。然而，该`replace()`方法很可能更有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-16T20:27:47.980

**提供的 XSLT 代码中有两个明显的错误**：

1.  用于选择元素的命名空间与提供的 XML 文档的默认命名空间不同。只需更改：`xmlns:xsi="file://Volumes/xxxxxxx/Assignment"`到`xmlns:xsi="file://Volumes/xxxxxxx/Assignment"`.

2.  目前的排序不是数字的。改变：

    `<xsl:sort select="xsi:code" order="ascending" />`

到：

```
 <xsl:sort select="substring(xsi:code, 5)" data-type="number" /> 
```

**完整的转换变为**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:fn="http://www.w3.org/2005/xpath-functions"
 xmlns:xsi="file://Volumes/u4783938/Assignment">
<xsl:template match="/">
    <html>
    <head>
        <title> Course Catalogue </title>
    </head>
    <body bgcolor="#FF9999">
        <h1> <div style="text-align:center"> Course Catalogue </div> </h1>
        <xsl:for-each select="xsi:catalogue/xsi:course">
        <xsl:sort select="substring(xsi:code, 5)"
         data-type="number" />
        <div style="width:1000px;margin-bottom:4px;color:white;background-color:#F36;text-align:justify;border:outset;margin-left:auto;margin-right:auto;">
            <xsl:apply-templates select="xsi:code" />
            <br />
            <xsl:apply-templates select="xsi:title" />
            <br />
            <xsl:apply-templates select="xsi:year" />
            <br />
            <xsl:apply-templates select="xsi:science" />
            <br />
            <xsl:apply-templates select="xsi:area" />
            <br />
            <xsl:apply-templates select="xsi:subject" />
            <br />
            <xsl:apply-templates select="xsi:updated" />
            <br />
            <xsl:apply-templates select="xsi:unit" />
            <br />
            <xsl:apply-templates select="xsi:description" />
            <br />
            <xsl:apply-templates select="xsi:outcomes" />
            <br />
            <xsl:apply-templates select="xsi:incompatibility" />
        </div>
        </xsl:for-each>
    </body>
    </html>
</xsl:template>
</xsl:stylesheet> 
```

**当应用于此 XML 文档时**：

```
<catalogue xmlns="file://Volumes/u4783938/Assignment"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="file://Volumes/u4443554/Assignment/courses.xsd">
    <course>
        <code>ABCD3410</code>
        <title> Information Technology in Electronic Commerce </title>
        <year>later year</year>
        <science>C</science>
        <area> Research School of Computer Science </area>
        <subject> Computer Science </subject>
        <updated>2012-03-13T13:12:00</updated>
        <unit>6</unit>
        <description>Tce </description>
        <outcomes>Up trCommerce. </outcomes>
        <incompatibility>COMP1100</incompatibility>
    </course>
    <course>
        <code>COMP2011</code>
        <title> Course 2011 </title>
        <year>Year 2011</year>
        <science>C++</science>
        <area> Research School of Computer Science </area>
        <subject> Computer Science </subject>
        <updated>2012-03-13T13:12:00</updated>
        <unit>6</unit>
        <description>Tce </description>
        <outcomes>Up trCommerce. </outcomes>
        <incompatibility>COMP1100</incompatibility>
    </course>
</catalogue> 
```

**生成的结果现在按课程代码的数字部分正确排序：**

```
<html xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:xsi="file://Volumes/u4783938/Assignment">
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

      <title> Course Catalogue </title>
   </head>
   <body bgcolor="#FF9999">
      <h1>
         <div style="text-align:center"> Course Catalogue </div>
      </h1>
      <div style="width:1000px;margin-bottom:4px;color:white;background-color:#F36;text-align:justify;border:outset;margin-left:auto;margin-right:auto;">COMP2011<br> Course 2011 <br>Year 2011<br>C++<br> Research School of Computer Science <br> Computer Science <br>2012-03-13T13:12:00<br>6<br>Tce <br>Up trCommerce. <br>COMP1100
      </div>
      <div style="width:1000px;margin-bottom:4px;color:white;background-color:#F36;text-align:justify;border:outset;margin-left:auto;margin-right:auto;">ABCD3410<br> Information Technology in Electronic Commerce <br>later year<br>C<br> Research School of Computer Science <br> Computer Science <br>2012-03-13T13:12:00<br>6<br>Tce <br>Up trCommerce. <br>COMP1100
      </div>
   </body>
</html> 
```*

# c# - 如何在 C# 中将 MaxLength 应用于 watermarkControl:WatermarkPasswordBox？

> ID：12449942
> 
> 赞同：0
> 
> 时间：2012-09-16T19:22:02.753
> 
> 标签：c#, xaml, windows-phone, maxlength

所以，我可以利用你的帮助为这个 watermarkpasswordbox 应用 MaxLength="10"

```
<watermarkControls:WatermarkPasswordBox  
    x:Name="passwordLoginTextBox"  
    WatermarkText="{Binding Path=LocalizedResources.PasswordWatermark, 
                            Source={StaticResource LocalizedStrings}}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:36:33.493

简单地说，在您的代码隐藏文件中，添加以下内容：

```
passwordLoginTextBox.MaxLength = 10; 
```

# php - 无法在我的 Mac 上安装 magento

> ID：12449943
> 
> 赞同：1
> 
> 时间：2012-09-16T19:22:10.583
> 
> 标签：php, macos, magento

我正在尝试在 Mountain Lion 10.8 上安装 Magento CE 1.7.0.2

我可以使用 MAMP 做到这一点，但问题是我需要将我的数据库文件移动到不同的位置，而 MAMP 不允许这样做。

我切换到全新安装的 Mountain Lion，并使用自制软件安装 mcrypt。

我几乎启用了所有功能，但是当我运行 domain/magento-check.php 文件以确保满足要求时，我得到了一个乱码的 php 输出。

这就是我所看到的。有谁知道这可能是什么原因？

谢谢。

![在此处输入图像描述](../Images/c93dd6c1ed4ca446f19cf3722c037b10.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T06:03:40.307

我最终只使用了 MAMP，但将 mysql 目录移动到一个新位置并对该位置进行符号链接。似乎已经成功了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-23T01:14:09.423

magento-check.php 的问题在于开始标签`<?`不是`<?php`- 只需修复它，您就可以正常运行 magento-check.php。

# c# - 在带有实体框架的 ViewModel 上使用 DependencyProperty

> ID：12449947
> 
> 赞同：5
> 
> 时间：2012-09-16T19:22:35.327
> 
> 标签：c#, wpf, entity-framework, dependency-properties, inotifypropertychanged

我正在使用带有实体框架模型的 MVVM 模式在 C# 中编写桌面应用程序。我倾向于在我的 VM 中使用 DependencyProperties，并且（通常）更喜欢这个系统而不是实现 INotifyPropertyChanged。我想保持一致。我的虚拟机访问模型中的实体，并且我设法将事情分开 - 除了绑定和命令名称之外，视图对虚拟机一无所知，而模型对虚拟机有知识。

在 VM 中使用 INotifyPropertyChanged，更新模型中的实体似乎很容易：

```
public string Forename
    {
        get { return CurrentPerson.Forename; }
        set
        {
            if (Forename != value)
            {
                CurrentPerson.Forename = value;
                NotifyPropertyChanged("Forename");
            }
        }
    } 
```

...其中 CurrentPerson 是由实体数据模型自动创建的 Person 对象。因此，没有专门为存储名字而创建的私有字段。

使用 DependencyProperties，看来我必须创建一个 DP，使用 GetValue 和 Setvalue 添加默认属性，然后使用 PropertyChangedCallback 来更新 CurrentPerson 实体。为了与我的其他 VM 保持一致，在这种情况下调用回调似乎会增加开销。

因此，问题是这些方法中的一种或另一种是我*应该*做事的方式吗？在这种情况下，我应该使用 DependencyProperty 还是 INotifyPropertyChanged？应该指出的一件事是，这可能是一个非常大规模的项目（带有插件和来自不同机器的大量数据库访问），并且所有东西都应该是可重用的，并且模块尽可能“断开连接” .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:59:43.910

我建议使用 INotifyPropertyChanged 而不是 DependencyProperty。我远离 ViewModels 中的 DependencyProperty 的主要原因是 DependencyProperty 位于 WindowsBase.dll 中。这将您与 Windows UI 联系得太紧密了（至少恕我直言）。

使用 INotifyPropertyChanged 更容易维护，因为它允许各种插件以他们想要的方式实现它。如果强制依赖属性，所有视图模型都需要从 DependencyObject 继承。

有关使用 INotifyPropertyChanged 和 DependencyProperty 的更多详细信息，请参阅本文：http: [//kentb.blogspot.com/2009/03/view-models-pocos-versus.html](http://kentb.blogspot.com/2009/03/view-models-pocos-versus.html)

另一个支持答案：[https ://stackoverflow.com/a/783154/27669](https://stackoverflow.com/a/783154/27669)

# java - 使用 Either 处理失败 -> 堆栈跟踪在哪里？

> ID：12449950
> 
> 赞同：10
> 
> 时间：2012-09-16T19:22:44.587
> 
> 标签：java, scala, exception, exception-handling, either

我从一些人那里听说，在 Scala 中，我们倾向于（像其他函数式语言一样）不破坏控制流......相反，按照惯例，我们在`Either` `Left`.

但是我们如何从那个异常中得到 stracktrace 呢？现在我在左侧返回一个简单的`Error`案例类，其中包含代码、消息和原因（`Error`也）。但是，如果我有错误，我无法获得堆栈跟踪。如果我的应用程序变得复杂，可能很难找到返回的代码块`Error`......根本原因是必不可少的。

* * *

那么我们在实践中该怎么做呢？

我应该返回，而不是自定义`Error`的 java 类型`Exception`还是`Throwable`我的`Left`？在不丢失堆栈跟踪和原因等重要信息的情况下，Scala 异常处理的最佳实践是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-16T19:57:46.110

我建议使用`Either[java.lang.Throwable, A]`（[`Throwable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html)仍然可以让您访问堆栈跟踪），并且（通常）使您的自定义错误类型扩展`java.lang.Exception`.

这是[Dispatch 0.9](http://dispatch.databinder.net/Dispatch.html)使用的做法，例如 where`Either[Throwable, A]`用于表示可能失败的计算，自定义错误类型如下所示：

```
case class StatusCode(code: Int)
  extends Exception("Unexpected response status: %d".format(code)) 
```

[Scalaz 7](http://code.google.com/p/scalaz/)`Validation.fromTryCatch(a: => T)`还返回 a ，`Validation[Throwable, T]`其中`Validation`大致相当于`Either`.

# eclipse - 在 Eclipse 中按编码或按文件更改字体

> ID：12449955
> 
> 赞同：1
> 
> 时间：2012-09-16T19:23:06.303
> 
> 标签：eclipse, encoding, fonts, ide

有没有办法在每个文件或每个编码的基础上更改 Eclipse 中编辑器使用的字体？

例如：

*   有一个资源文件具有某些 Unicode 字体不支持的字形，我希望对于这个特定文件使用不同的字体，或者
*   我将资源文件的编码设置为默认字体不支持的编码。我想使用实际支持编码的字体打开这些文件。

有没有办法在 Eclipse 中配置这样的东西？当默认字体不支持文件的编码时，我不知何故记得 Eclipse 更改了字体，但这似乎不再发生。

# java - 实例名称是什么意思？

> ID：12449956
> 
> 赞同：0
> 
> 时间：2012-09-16T19:23:06.450
> 
> 标签：java, sql-server, sql-server-2005, netbeans

什么是*sql server 实例*？这是什么意思，为什么需要它？

我需要这里：

![在此处输入图像描述](../Images/9da7e658582bdf7578a2c19947a6399d.png)

实例名称是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:26:04.280

在这种情况下，它是 SQL Server 的“实例”的名称或唯一连接字符串。

安装软件时，您可以创建一个或多个数据集实例。每个实例以及允许您联系该实例的不同主机名和端口。

没有它，您将无法联系数据库。

# c# - Response.Redirect 带有 url 中的子目录

> ID：12449958
> 
> 赞同：2
> 
> 时间：2012-09-16T19:23:27.480
> 
> 标签：c#, asp.net, url, redirect, subdirectory

我在 ASP.NET (C#) 中的重定向有一点问题

我刚得到一个看起来像这样的域：`http://www.example.com/subdirectory`

因此，当我打开我的 asp.net 起始页时，网址如下所示：`http://www.example.com/subdirectory/Startpage/Startpage.aspx`

那是我在后面代码中的重定向：

```
Response.Redirect("~/UserSite/UserSite.aspx") 
```

现在的问题是，当我单击该按钮时，我被重定向到

`http://www.example.com/UserSite/UserSite.aspx`

代替

`http://www.example.com/subdirectory/UserSite/UserSite.aspx`

如何让我的网页注意到 url 中的子目录？

如果有人可以帮助我，那就太好了。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:35:33.700

这可能是因为您的子目录下的网站尚未设置为 IIS7 中的自己的应用程序。

您可以通过以下方式做到这一点：

1.  打开 IIS 管理器
2.  打开网站并右键单击子目录
3.  点击“转换为应用程序”
4.  然后，如果您希望拥有一个专用的应用程序池，则可以更改应用程序池，否则只需单击确定。

Response.Redirect("~/UserSite/UserSite.aspx") 那么应该明白 /subdirectory/ 是默认的网站目录

# html - 使用 Twitter Bootstrap 将 Hero-Unit 设为 100% 宽度

> ID：12449959
> 
> 赞同：4
> 
> 时间：2012-09-16T19:23:46.103
> 
> 标签：html, css, twitter-bootstrap

我正在努力让自己对 Twitter BS 感到满意。

有没有办法让浏览器的英雄单元宽度为 100%，同时包含固定宽度的列？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-16T19:41:39.653

包裹`.hero-unit`和（或什`.container-fluid`至`.row-fluid`不包裹任何东西）。Bootstrap 术语中的“流动”意味着将占据浏览器窗口的 100% 宽度。将您的其他内容包装在“固定”`.container`和`.row`.

看看我是如何在[我的小提琴](http://jsfiddle.net/dAy3g/1/)中做到这一点的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-18T17:10:22.493

请注意，从 Bootstrap 3 开始，英雄单位被重命名为`jumbotron` [http://getbootstrap.com/components/#jumbotron](http://getbootstrap.com/components/#jumbotron)

> 要使 jumbotron 全宽且没有圆角，请将其放在所有 .containers 之外，然后在其中添加一个 .container。

```
<div class="jumbotron">
  <div class="container">
    ...
  </div>
</div> 
```

# php - 显示 mysql 数据库的统计信息

> ID：12449961
> 
> 赞同：0
> 
> 时间：2012-09-16T19:23:49.413
> 
> 标签：php, mysql

我有一个数据库表。它包含以下列：

分类 | 优先 |

是否有完成的脚本或显示这些列的统计信息的方法？

基本上我要做的是显示这些列的统计信息。

例如，

> 类别可以有不同的值，例如：（大陆、国家、城市、街道）。
> 优先级可以包含 1-10 之间的值。

所以我需要显示有多少行，每行的不同值。

例如：

```
4 of the priority 8 rows have 'continent' as catheogry,
43 of the priority 8 rows have 'country' as cathegory,
329 of the priority 8 rows have 'city' as cathegory 
```

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:29:45.817

没有内置脚本可以为您执行此操作，但您可以使用 SQL 获取所有此类信息，这是关系数据库的基本思想。

表中的行数

```
select count(*) from table; 
```

这个例子

```
select cathegory, count(cathegory) nbr_of_cathegories_for_prio_8 from table where priority = 8 group by cathegory; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:51:46.933

在你的例子中： `329 of the priority 8 rows have 'city' as cathegory`

我假设：

> 8 - 是优先级值。
> 329 - 为特定类别的特定优先级重复优先级多少次。

PHP implimentation 看起来像：

```
<?php

$sql = "
       SELECT Priority, COUNT(Priority) as nbr_of_Priorities, cathegory, 
       FROM table_Name
       GROUP BY Priority, cathegory
    ";

$result = mysql_query($sql);
while($row = mysql_fetch_array($result))
{
         echo $row['nbr_of_Priorities'].'of the priority'.$row[' Priority'];
         echo 'has'.$row['cathegory'].'as catheogry';
}
?> 
```

# objective-c - 表视图控制器测试程序

> ID：12449964
> 
> 赞同：-5
> 
> 时间：2012-09-16T19:24:11.603
> 
> 标签：objective-c, ios, uitableview

我有这个目标 C 程序和错误打印输出：

```
#import <UIKit/UIKit.h>

@interface TableViewController : UITableViewController

@end

------

#import "TableViewController.h"

@interface TableViewController ()

@end

@implementation TableViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1; 
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return 50; 
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    cell.textLabel.text = [NSString stringWithFormat:@"Zeile nummer %i",indexPath.row];
    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}

@end 
```

ErrorCode: 2012-09-16 21:05:36.204 renetest2[1176:fb03] *** 断言失败 -[UITableView _createPreparedCellForGlobalRow:withIndexPath:], /SourceCache/UIKit_Sim/UIKit-1914.84/UITableView.m:6061 2012-09-16 21:05:36.206 renetest2[1176:fb03] ***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“UITableView 数据源必须从 tableView:cellForRowAtIndexPath: 返回一个单元格：”*** 第一次抛出调用堆栈：(0x14b4022 0xeb4cd6 0x145ca48 0x9ae2cb 0xb1d28 0xb23ce 0x9dcbd 0xac6f1 0x55d21 0x14b5e42 0x1d85679 0x1d8f579 0x1d144f7 0x1d163f6 0x1da3160 0x15e84 0x16767 0x25183 0x25c38 0x19634 0x139eef5 0x1488195 0x13ecff2 0x13eb8da 0x13ead84 0x13eac9b 0x15c65 0x17626 0x1cad 0x1c15 0x1) terminate called throwing an exception(lldb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T19:36:20.073

尝试了解错误并查看方法`tableView:cellForRowAtIndexPath`。而不是`// Configure the cell...`你应该分配/初始化你的单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:41:27.143

从上面的示例中，如果出队的单元格为 nil，则不会创建单元格。函数 cellForRowAtIndexPath 需要如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier: CellIdentifier];
    }

    // Configure the cell...
    cell.textLabel.text = [NSString stringWithFormat:@"Zeile nummer %i",indexPath.row];
    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:43:49.480

错误在这里：

`UITableView dataSource must return a cell from tableView:cellForRowAtIndexPath:`

这意味着该行

`UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];`

无法将单元格实例出列，因此该方法正在返回`nil`.

您需要检查是否`cell`为 nil，然后创建一个新实例，如果它是：

```
if (nil == cell) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
} 
```

然后，您将能够配置新`UITableViewCell`实例。

# c# - 在大字符串中查找/替换的最快方法

> ID：12449968
> 
> 赞同：0
> 
> 时间：2012-09-16T19:24:29.240
> 
> 标签：c#, string, performance, replace, stringbuilder

我有一个函数可以使用正则表达式和其他字符串处理函数对字符串进行大量查找和替换。本质上，我正在遍历一个字符串，并将结果数据添加到 a 中`StringBuilder`，因此它比修改字符串本身更快。有更快的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:40:49.390

> 本质上，我正在遍历一个字符串，并将结果数据添加到 StringBuilder 中，因此它比修改字符串本身更快。有更快的方法吗？

*   [`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder.aspx)当您想将一些字符串连接到一个循环中时，类会更快。

*   如果你连接一个数组[`String.Concat()`](http://msdn.microsoft.com/en-us/library/xb636w5t.aspx)会更快，因为它有一些接受数组的重载。

*   否则，`+`如果您必须执行以下操作，请仅使用运算符：`string s = "text1" + "text2" + "text3";`或使用`String.Concat("text1", "text2", "text3");`.

有关更多信息，请参见此处：[高效连接字符串](http://www.yoda.arachsys.com/csharp/stringbuilder.html)。

**编辑 ：**

操作员在他的评论中编译为对*usr*的`+`调用。`String.Concat()`

# android - 如何纠正模拟器中的套接字异常

> ID：12449974
> 
> 赞同：0
> 
> 时间：2012-09-16T19:24:53.920
> 
> 标签：android, sockets, exception, android-emulator

我已经在android中编写了客户端和服务器连接的代码。当我在模拟器中运行时，它显示09-16 19:04:14.783: E/ClientActivity(407): java.net.ConnectException: /10.0.2.15:8080 - Connection denied .我推荐了许多developer.android进行重定向。但它不起作用。有人能说出这个异常的原因以及如何解决这个问题吗？服务器活动.java

```
 package com.example.network;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.Inet4Address;
import java.net.InetAddress;
import java.net.NetworkInterface;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketException;
import java.util.Enumeration;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;

public class ServerActivity extends Activity {

    private TextView serverStatus;

    // default ip
    public static String SERVERIP = "";

    // designate a port
    public static final int SERVERPORT = 8080;

    private Handler handler = new Handler();

    private ServerSocket serverSocket;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_server);
        serverStatus = (TextView) findViewById(R.id.textView1);

        SERVERIP = getLocalIpAddress();

        Thread fst = new Thread(new ServerThread());
        fst.start();
    }

    public class ServerThread implements Runnable {

        public void run() {
            try {
                if (SERVERIP != null) {
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
        //                  Toast.makeText(getApplicationContext(), i.getHostAddress.toString(),Toast.LENGTH_LONG ).show();
                            serverStatus.setText("Listening on IP: " + SERVERIP);
                        }
                    });
                    serverSocket = new ServerSocket(SERVERPORT);
                    while (true) {
                        // listen for incoming clients
                        Socket client = serverSocket.accept();
                        handler.post(new Runnable() {
                            @Override
                            public void run() {
                                serverStatus.setText("Connected.");
                            }
                        });

                        try {
                            BufferedReader in = new BufferedReader(new InputStreamReader(client.getInputStream()));
                            String line = null;
                            while ((line = in.readLine()) != null) {
                                Log.d("ServerActivity", line);
                                handler.post(new Runnable() {
                                    @Override
                                    public void run() {
                                        // do whatever you want to the front end
                                        // this is where you can be creative
                                    }
                                });
                            }
                            break;
                        } catch (Exception e) {
                            handler.post(new Runnable() {
                                @Override
                                public void run() {
                                    serverStatus.setText("Oops. Connection interrupted. Please reconnect your phones.");
                                }
                            });
                            e.printStackTrace();
                        }
                    }
                } else {
                    handler.post(new Runnable() {
                        @Override
                        public void run() {
                            serverStatus.setText("Couldn't detect internet connection.");
                        }
                    });
                }
            } catch (Exception e) {
                handler.post(new Runnable() {
                    @Override
                    public void run() {
                        serverStatus.setText("Error");
                    }
                });
                e.printStackTrace();
            }
        }
    }

    // gets the ip address of your phone's network
    private String getLocalIpAddress() {
        try {
            for (Enumeration<NetworkInterface> en =               NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
                NetworkInterface intf = en.nextElement();
                for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                    InetAddress inetAddress = enumIpAddr.nextElement();
                    if (!inetAddress.isLoopbackAddress()) { return inetAddress.getHostAddress().toString(); }
                }
            }
        } catch (SocketException ex) {
            Log.e("ServerActivity", ex.toString());
        }
        return null;
    }

    @Override
    protected void onStop() {
        super.onStop();
        try {
             // make sure you close the socket upon exiting
             serverSocket.close();
         } catch (IOException e) {
             e.printStackTrace();
         }
    }

}
ClientActivity.java
        package com.example.network;

import java.io.BufferedWriter;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;
import java.net.InetAddress;
import java.net.Socket;

import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;

public class ClientActivity extends Activity {

    private EditText serverIp;

    private Button connectPhones;

    private String serverIpAddress = "";

    private boolean connected = false;

    private Handler handler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_client);

        serverIp = (EditText) findViewById(R.id.editText1);
        connectPhones = (Button) findViewById(R.id.button1);
        connectPhones.setOnClickListener(connectListener);
    }

    private OnClickListener connectListener = new OnClickListener() {

        @Override
        public void onClick(View v) {
            if (!connected) {
                serverIpAddress = serverIp.getText().toString();
                if (!serverIpAddress.equals("")) {
                    Thread cThread = new Thread(new ClientThread());
                    cThread.start();
                }
            }
        }
    };

    public class ClientThread implements Runnable {

        public void run() {
            try {
                InetAddress serverAddr = InetAddress.getByName(serverIpAddress);
                Log.d("ClientActivity", "C: Connecting...");
                Socket socket = new Socket(serverAddr, ServerActivity.SERVERPORT);
                connected = true;
                while (connected) {
                    try {
                        Log.d("ClientActivity", "C: Sending command.");
                        PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket
                                    .getOutputStream())), true);
                            // where you issue the commands
                            out.println("Hey Server!");
                            Log.d("ClientActivity", "C: Sent.");
                    } catch (Exception e) {
                        Log.e("ClientActivity", "S: Error", e);
                    }
                }
                socket.close();
                Log.d("ClientActivity", "C: Closed.");
            } catch (Exception e) {
                Log.e("ClientActivity", "C: Error", e);
                connected = false;
            }
        }
    }
} 
```

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="org.apache.android.xmpp">

    <uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.INTERNET"/>

    <application  android:name="XMPPDemosApplication"
            android:label="XMPP Demo">
        <activity android:name=".XMPPClient" android:label="XMPPClient">
            <intent-filter>
                <action android:name="android.intent.action.MAIN"/>
                <category android:name="android.intent.category.LAUNCHER"/>
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T17:21:56.977

您需要添加重定向才能在两个模拟器之间工作 da！
在 Windows 中，打开命令提示符并输入 - telnet localhost 5554（此 5554 是您的接收模拟器正在运行的端口）
现在您的 Telnet 已连接到此模拟器。现在输入这个命令： redir add tcp:src_port:dst port
src 端口是指机器端口，dst 端口是指你想要重定向的模拟器端口。这对我来说很好:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T03:22:07.370

此外，如果您在笔记本电脑上工作，并从一个网络移动到另一个网络，则通常需要重新启动模拟器才能在新网络上选择正确的网络设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T02:20:31.517

如果您使用的是模拟器，我建议您检查防火墙设置并确保模拟器是例外

# ruby-on-rails - heroku run db:migrate 因 rake 中止而失败

> ID：12449977
> 
> 赞同：2
> 
> 时间：2012-09-16T19:25:23.360
> 
> 标签：ruby-on-rails, heroku, dbmigrate

在推送我的最新代码之后 Heroku 不会改变表格。当我运行“heroku rake db:migrate”时，我的 rake 中止了！

它说语法错误，但我不知道错误在哪里

```
syntax error on line 4, col 586: `      state: ["σלקµ╡╖Θבף","Θ¥עµú«τ£ל","σ▓⌐µיכτ£ל","σ««σƒמτ£ל","τºכτפ░τ£ל","σ▒▒σ╜óτ£ל","τªןσ│╢τ£ל","Φל¿σƒמτ£ל","µáדµ£¿τ£ל","τ╛ñΘª¼τ£ל","σƒ╝τמיτ£ל","σםדΦסיτ£ל","µ¥▒Σ║¼Θד╜","τÑ₧σÑטσ╖¥τ£ל","µצ░µ╜ƒτ£ל","σ»לσ▒▒τ£ל","τƒ│σ╖¥τ£ל","τªןΣ║ץτ£ל","σ▒▒µó¿τ£ל","Θץ╖Θחמτ£ל","σ▓נΘר£τ£ל","Θ¥שσ▓íτ£ל","µה¢τƒÑτ£ל","Σ╕יΘחםτ£ל","µ╗כΦ│אτ£ל","Σ║¼Θד╜σ║£","σñºΘר¬σ║£","σו╡σ║½τ£ל","σÑטΦי»τ£ל","σעלµ¡לσ▒▒τ£ל","Θ│Ñσןצτ£ל","σ│╢µá╣τ£ל","σ▓íσ▒▒τ£ל","σ║דσ│╢τ£ל","σ▒▒σןúτ£ל","σ╛│σ│╢τ£ל","Θªשσ╖¥τ£ל","µה¢σ¬¢τ£ל","Θ½רτƒÑτ£ל","τªןσ▓íτ£ל","Σ╜נΦ│אτ£ל","Θץ╖σ┤מτ£ל","τזךµ£¼τ£ל","σñºσטזτ£ל","σ««σ┤מτ£ל","Θ╣┐σונσ│╢τ£ל","µ▓צτ╕הτ£ל"]'
/usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
/usr/local/lib/ruby/1.9.1/syck.rb:135:in `load'
/usr/local/lib/ruby/1.9.1/syck.rb:146:in `block in load_file'
/usr/local/lib/ruby/1.9.1/syck.rb:145:in `open'
/usr/local/lib/ruby/1.9.1/syck.rb:145:in `load_file'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/base.rb:172:in `load_yml'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/base.rb:157:in `load_file'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/base.rb:15:in `block in load_translations'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/base.rb:15:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/base.rb:15:in `load_translations'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/simple.rb:57:in `init_translations'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/simple.rb:71:in `lookup'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/base.rb:26:in `translate'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/fallbacks.rb:44:in `block (2 levels) in translate'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/fallbacks.rb:43:in `catch'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/fallbacks.rb:43:in `block in translate'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/fallbacks.rb:42:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n/backend/fallbacks.rb:42:in `translate'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n.rb:156:in `block in translate'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n.rb:152:in `catch'
/app/vendor/bundle/ruby/1.9.1/gems/i18n-0.6.1/lib/i18n.rb:152:in `translate'
/app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.1.1/lib/active_record/railtie.rb:102:in `block in <class:Railtie>'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:34:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:34:in `execute_hook'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:42:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/lazy_load_hooks.rb:42:in `run_load_hooks'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/application/finisher.rb:56:in `block in <module:Finisher>'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/initializable.rb:30:in `instance_exec'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/initializable.rb:30:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/initializable.rb:55:in `block in run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/initializable.rb:54:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/initializable.rb:54:in `run_initializers'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/application.rb:96:in `initialize!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/railtie/configurable.rb:30:in `method_missing'
/app/config/environment.rb:5:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in `require'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in `block in require'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in `block in load_dependency'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:640:in `new_constants_in'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:223:in `load_dependency'
/app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.1.1/lib/active_support/dependencies.rb:240:in `require'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/application.rb:83:in `require_environment!'
/app/vendor/bundle/ruby/1.9.1/gems/railties-3.1.1/lib/rails/application.rb:193:in `block (2 levels) in initialize_tasks'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/usr/local/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/app/vendor/bundle/ruby/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `load'
/app/vendor/bundle/ruby/1.9.1/bin/rake:19:in `<main>'
Tasks: TOP => db:version => environment 
```

**任何想法有什么问题？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T23:48:59.350

我刚刚遇到了完全相同的情况

/usr/local/lib/ruby/1.9.1/syck.rb:135:in `load': 第 4 行语法错误，第 586 列：

第 4 行第 586 列语法错误：` state: ["北海道","青森県","岩手県","宫城県","秋田県","山形県","福岛県","茨城県" ","栃木県","群马県","埼玉県","千叶県","东京都","神奈川県","新泻県","富山県","石川県","福井県" “”、“山梨県”、“长野県”、“岐阜県”、“静冈県”、“爱知県”、“三重県”、“滋贺県”、“京都府”、“大阪府”、兵库県","奈良県","和歌山県","鸟取県","岛根県","冈山県","広島県","山口県","德岛県","香川県","爱県","高知県","福冈県","佐贺県","长崎県","熊本県","大分県","宫崎県","鹿児岛県","冲縄県"]'

我的一些本地 /tmp/asset 二进制文件与 grep 语句匹配。我运行“heroku run grep -R”state:“*”，发现文件“vendor/bundle/ruby/1.9.1/gems/faker-1.1.0/lib/locales/ja.yml”与我的问题行匹配. 我的工作正常，但显然 Faker gem 在 Heroku 上存在问题。

# c# - VS 2012 WPF XAML 设计器空白

> ID：12449994
> 
> 赞同：3
> 
> 时间：2012-09-16T19:27:11.907
> 
> 标签：c#, wpf

我最近将一个 VS 2010 WPF 项目转换为 VS 2012。但是，在 VS 2012 中，WPF 设计器是空白的。没有控件，只有一个空窗口的轮廓。

# objective-c - 如何防止在目标c中使用双打的科学记数法？

> ID：12449995
> 
> 赞同：0
> 
> 时间：2012-09-16T19:27:11.430
> 
> 标签：objective-c

从双变量设置 UITextfield 文本值时，如何防止科学记数法？我尝试使用“%f”对其进行格式化，但随后将 -0 显示为 -0.00000。使用 "%g" 格式化使其显示指数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T19:31:09.840

```
%.0f 
```

表示带有 0 个小数位的浮点数。

**编辑**

看起来您仍然需要一些精度，您应该使用一个[`NSNumberFormatter`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html)更灵活的实例。

你可以使用[`-setMinimumFractionDigits:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumberFormatter/setMinimumFractionDigits%3a)and [`-setMaximumFractionDigits:`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSNumberFormatter_Class/Reference/Reference.html#//apple_ref/occ/instm/NSNumberFormatter/setMaximumFractionDigits%3a)，所以零将是`0`，但你仍然可以有精度：

```
NSNumberFormatter * fmt;

fmt = [ [ NSNumberFormatter new ] autorelease ];

[ fmt setMinimumFractionDigits: 0 ];
[ fmt setMaximumFractionDigits: 2 ];
[ fmt setMinimumIntegerDigits:  1 ];

NSLog( @"%@", [ fmt stringFromNumber: [ NSNumber numberWithFloat: ( float )0 ] ] );
NSLog( @"%@", [ fmt stringFromNumber: [ NSNumber numberWithFloat: ( float )0.42 ] ] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:31:43.240

您可以限制格式字符串中的小数位数：

```
%.0f 
```

将四舍五入为整数，

```
%.1f 
```

将四舍五入到小数点后 1 位等，分别将 -0 打印为`-0`或`-0.0`。

# ruby - Ruby 中是否有“while...else”？

> ID：12449998
> 
> 赞同：1
> 
> 时间：2012-09-16T19:27:27.330
> 
> 标签：ruby

我有一个哈希值，其中键名是猫名，值是猫名。有没有办法做到这一点，当人们键入`response`不在`cats`哈希键中的 a 时，终端可以重新打印`puts "Which cat would you like to know about?"`问题或键入：“再试一次”？我想我是在要求某种“同时……其他”。

```
puts "Which cat would you like to know about?"
puts cats.keys
response = gets.chomp

while cats.include?(response)
  puts "The cat you chose is #{cats[response].age} old"
  puts "The cat you chose is named #{cats[response].name}"
  puts "The cat you chose is a #{cats[response].breed} cat"
  puts "Is there another cat would you like to know about?"
  response = gets.chomp
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-16T19:38:47.897

据我所知，没有“while...else”。如果您不介意循环继续，无论响应是否是有效的猫名，也许这对您有用：

```
puts "Which cat would you like to know about?"
puts cats.keys

while true
  response = gets.chomp
  if response.empty?
    break
  elsif cats.include?(response)
    puts "The cat you chose is #{cats[response].age} old"
    puts "The cat you chose is named #{cats[response].name}"
    puts "The cat you chose is a #{cats[response].breed} cat"
    puts "Is there another cat would you like to know about?"
  else
    puts "There is no cat with that name. Try again."
  end
end 
```

这将反复提示用户输入猫名，直到用户以空字符串响应，此时它将跳出循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T19:42:59.950

你可以用一个额外的问题重新排列你的代码：

```
cats = {'a' => 1} #testdata
continue = true   #set a flag

while continue
  puts "Which cat would you like to know about?"
  response = gets.chomp
  while cats.include?(response)
    puts cats[response]
    puts "Is there another cat would you like to know about?"
    response = gets.chomp
  end
  puts "Try another? (Y for yes)"
  continue = gets.chomp =~ /[YyJj]/ #Test for Yes or yes, J for German J...
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-16T19:43:42.460

自从我玩 Ruby 以来已经有一段时间了，但我想到了这样的事情：

```
def main
   print_header
       while true
           resp = get_response
           if cats.include?(resp)
              print_info(resp)
           else
              print_header
       end
end

def get_response
    puts cats.keys
    response = gets.chomp
end

def print_header
    puts "Which cat would you like to know about?"
end

def print_info response
  puts "The cat you chose is #{cats[response].age} old"
  puts "The cat you chose is named #{cats[response].name}"
  puts "The cat you chose is a #{cats[response].breed} cat"
  puts "Is there another cat would you like to know about?"
end 
```

请注意，您将需要一个终点。如果`get_response`返回“否”，则退出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-16T20:15:19.817

```
continuous = false
loop do
  unless continuous
    puts "Which cat would you like to know about?", cats.keys
  else
    puts "Is there another cat would you like to know about?"
  end
  if cat = cats[gets.chomp]
    puts "The cat you chose is #{cat.age} old"
    puts "The cat you chose is named #{cat.name}"
    puts "The cat you chose is a #{cat.breed} cat"
    continuous = true
  else
    continuous = false
  end
end 
```