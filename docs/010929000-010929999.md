# StackOverflow 问答 10929000-10929999

# xsd - 在 SDL Tridion 2011 SP1 中为多值架构字段添加多个默认值

> ID：10929003
> 
> 赞同：3
> 
> 时间：2012-06-07T09:19:35.903
> 
> 标签：xsd, tridion, tridion-2011

我在我的 SDL Tridion 2011 Web 模式中定义了一个多值单行文本字段。该字段是强制性的 (minOccurs=1) 并且可以重复两次 (maxOccurs=2)。我已经设法为该字段的第一个实例设置了默认值，是否可以为第二个实例设置默认值？

我试着像这样添加它。

```
<xsd:element name="name" minOccurs="1" maxOccurs="2" type="xsd:normalizedString">
    <xsd:annotation>
        <xsd:appinfo>
            <tcm:ExtensionXml xmlns:tcm="http://www.tridion.com/ContentManager/5.0"/>
            <tcm:DefaultTextValue xmlns:tcm="http://www.tridion.com/ContentManager/5.0">ABCD</tcm:DefaultTextValue>
            <tcm:DefaultTextValue xmlns:tcm="http://www.tridion.com/ContentManager/5.0">ALL</tcm:DefaultTextValue>
        </xsd:appinfo>
    </xsd:annotation>
</xsd:element> 
```

但是当模式被保存时，它正在删除重复的**tcm:DefaultTextValue**。

有没有办法在 Tridion 中实现它或不可能？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:58:21.733

正如@Nuno 所建议的那样-这似乎是不可能的-尽管我注意到您有`minOccurs = 1`and `maxOccurs = 2`，这意味着它们必须始终是 1 或 2 值。你能不能只用不同的默认值创建 2 个字段？

我不相信你所要求的在任何 W3C 模式中都是可能的——也许也将它作为 XSD 标记的问题发布。

# python - 如何限制在构造函数之外设置属性？

> ID：10929004
> 
> 赞同：11
> 
> 时间：2012-06-07T09:19:51.417
> 
> 标签：python, variable-assignment, setattr

我想在初始化后禁止对类的某些属性进行进一步的分配。例如; 在 Person 实例“p”初始化后，没有人可以显式地为“ssn”（社会安全号码）属性分配任何值。**_ *setattr* _在****_ *init* _**方法中分配值时也被调用，因此这不是我想要的。我只想限制进一步的任务。我怎样才能做到这一点？

```
class Person(object):
    def __init__(self, name, ssn):
        self.name = name
        self._ssn = ssn

    def __setattr__(self, name, value):
        if name == '_ssn':
            raise AttributeError('Denied.')
        else:
            object.__setattr__(self, name, value)

>> p = Person('Ozgur', '1234')
>> AttributeError: Denied. 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-07T09:24:53.903

通常的方法是使用以下划线开头的“私有”属性和公共访问的只读属性：

```
import operator

class Person(object):
    def __init__(self, name, ssn):
        self.name = name
        self._ssn = ssn
    ssn = property(operator.attrgetter("_ssn")) 
```

请注意，这并不真正妨碍任何人更改属性`_ssn`，而是`_`表明该属性是私有的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-08-31T22:42:09.440

Python 不支持私有或受保护的属性。您需要改为实现描述符协议。标准库提供了简洁的装饰器。

**只需在init**方法中声明属性前面有两个下划线即可。它被称为名称修改并阻止属性通过 __ssn 访问，尽管在这种情况下它仍然可以由 _Person__ssn 访问和修改。但是，如果您没有显式定义 setter，它将引发 AttributeError。

当然，如果有人有意滥用 API，如果他非常有意图，他就可以。但这不会偶然发生。

```
import re

class Person:
    """Encapsulates the private data of a person."""

    _PATTERN = re.COMPILE(r'abcd-efgh-ssn')

    def __init__(self, name, ssn):
       """Initializes Person class with input name of person and
       his social security number (ssn).
       """
       # you can add some type and value checking here for defensive programming
       # or validation for the ssn using regex for example that raises an error
       if not self._PATTERN.match(ssn):
           raise ValueError('ssn is not valid')
       self.__name = name
       self.__ssn = snn

    @property
    def name(self):
        return self.__name

    @name.setter
    def name(self, value):
        self.__name = value

    @property
    def ssn(self):
        return self.__ssn

>>> p = Person('aname', 'abcd-efgh-ssn')
>>> p.ssn
'abcd-efgh-ssn'
>>> p.ssn = 'mistake'
AttributeError: 'can't set attribute' 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-08-15T06:59:45.293

只是指出我们仍然可以修改`_ssn`.

对象具有特殊属性，`__dict__`即一个字典，它将对象的所有实例属性与其对应的值映射。我们可以通过修改对象的属性直接添加/更新/删除实例属性`__dict__`。

我们仍然可以`_snn`这样修改：

```
p = Person('Ozgur', '1234')

p.__dict__.get('_ssn') # returns '1234'

p.__dict__['_ssn'] = '4321'

p.__dict__.get('_ssn') # returns '4321' 
```

正如我们所见，我们仍然能够改变 的值`_ssn`。按照设计，没有直接的方法（如果有的话）可以在所有情况下规避 Python 中的属性访问。

我将展示一种使用[property()](https://docs.python.org/3/library/functions.html#property)作为装饰器来限制属性访问的更常见方法：

```
class Person(object):
    def __init__(self, name, ssn):
        self.name = name
        self._ssn = ssn

    @property
    def ssn(self):
        return self._ssn

    @ssn.setter
    def ssn(self, value):
        raise AttributeError('Denied')

>> p = Person('Ozgur', '1234')
>> p.ssn
>> '1234'
>> p.ssn = '4321'
>> AttributeError: Denied 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-16T00:33:32.300

您可以通过直接分配给构造函数中的实例字典来绕过**setattr 。**当然，这个技巧总是可以用来欺骗你用来使 _ssn 只读的任何其他箍（在初始写入之后）

```
 class Person(object): 
    def __init__(self, name, ssn):    
        self.name = name
        self.__dict__['_ssn'] = ssn 

    def __setattr__(self, name, value):
        if name == '_ssn':
            raise AttributeError('Denied.')
        else:
            object.__setattr__(self, name, value) 
```

# asp.net - 使用 json 内容类型关闭 streamwriter 时出错

> ID：10929005
> 
> 赞同：0
> 
> 时间：2012-06-07T09:19:52.953
> 
> 标签：asp.net, json, rest, streamwriter

将 json 内容写入流写入器后，我在关闭流写入器时出错。以下是我正在使用的代码。找不到什么问题。它正在写入 REST 服务。

```
WebRequest request = WebRequest.Create(String.Format("{0}/EventLog", restPath));
            request.ContentType = "application/json";
            request.Method = "POST";
            request.ContentLength = jsonstring.Length;                
            System.IO.StreamWriter sw = new System.IO.StreamWriter(request.GetRequestStream());
            sw.Write(jsonstring);                
            sw.Close();
            sw.Dispose();
            HttpWebResponse res = (HttpWebResponse)request.GetResponse(); 
```

例外：“在写入所有字节之前无法关闭流。”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:40:41.953

确保`request.ContentLength`真的*等于*内容长度（以字节为单位）。

这会引发相同的错误：

```
string data = "mydata";

WebRequest request = WebRequest.Create("http://google.de/");
request.ContentType = "application/json";
request.Method = "POST";
request.ContentLength = data.Length + 1;
System.IO.StreamWriter sw = new System.IO.StreamWriter(request.GetRequestStream());
sw.Write(data);
sw.Close();
sw.Dispose();
HttpWebResponse res = (HttpWebResponse)request.GetResponse(); 
```

# tinymce - 这可以在javascript的tinymce编辑器中设置语言吗？

> ID：10929006
> 
> 赞同：4
> 
> 时间：2012-06-07T09:19:55.323
> 
> 标签：tinymce, google-translate

我为我的 asp.net 应用程序使用 tinymce 文本编辑。现在我添加了语言包。现在我想以编程方式为文本编辑器设置语言包。并且还从可见状态隐藏语言包栏。

![在此处输入图像描述](../Images/16b1b46f8cead983ab13b478955fccfc.png)

例如：我想以编程方式设置文本编辑器的语言是印地语。请指导我摆脱这种情况......

每当用户单击我的网络表单中的翻译按钮时，我已经初始化了这个字符串变量。然后我想以编程方式设置 tinymce 编辑器语言。

字符串 lang="印地语";

**ptp.js**

```
function LoadTypePad()
{
    // Initialize pad

    tinyMCE.init({
        // General options
        mode : "textareas",
        theme : "advanced",
        skin : "o2k7",
        skin_variant : "silver",
        plugins : "safari,style,table,advhr,advimage,advlink,inlinepopups,insertdatetime,preview,media,searchreplace,print,paste,fullscreen,indicime,aksharspellchecker",

        // Theme options
        theme_advanced_buttons1 : "newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,formatselect,fontsizeselect,fontselect,aksharspellchecker,indicime, indicimehelp",
        theme_advanced_buttons2 : "selectall,cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,media,advhr,|,print",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : true,
        spellchecker_rpc_url:"http://service.vishalon.net/spellchecker.aspx",
        // Example content CSS (should be your site CSS)
        content_css : "css/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url : "lists/template_list.js",
        external_link_list_url : "lists/link_list.js",
        external_image_list_url : "lists/image_list.js",
        media_external_list_url : "lists/media_list.js",
        width : "100%",
        init_instance_callback : "afterInit"
    });
}

function showPleaseWait()
{
    var mainMessage = document.getElementById("message").innerHTML;
    document.getElementById("message").innerHTML = pleaseWait;
    pleaseWait = mainMessage;
}

// This function finds absolute position of the element in screen and returns array.
function findPos(obj) {
    var curleft = curtop = 0;
    if (obj.offsetParent) {
        do {
            curleft += obj.offsetLeft;
            curtop += obj.offsetTop;
        } while (obj = obj.offsetParent);
        return [curleft,curtop];
    }
}
// id= outer most id for show/hide. baseid = reference id for pointer
function showPopup(id, baseid)
{
    toggle_menu(id);
    var base = document.getElementById(baseid);
    var l = findPos(base);
    var obj = document.getElementById(id + 'content');
    var im = document.getElementById(id + 'img');
    var left = im.src.indexOf('left.gif') > 0;

    obj.style.top = (l[1] - obj.offsetHeight - 20) + "px";
    obj.style.left = (l[0] + (base.offsetWidth/2) - (left?obj.offsetWidth:0)) + "px";

    l = findPos(obj);
    im.style.top = (l[1] + obj.offsetHeight - 1) + "px";
    im.style.left = (l[0] + (left?obj.offsetWidth - 26:0)) + "px";
}

function closePopup()
{
    // hide popup
    var elem = document.getElementById("step1");
    elem.style.display = "none";
    elem = document.getElementById("step2");
    elem.style.display = "none";
    elem = document.getElementById("step3");
    elem.style.display = "none";
}
// Once tinymce is fully loaded
function afterInit()
{
    // Find search string from referral
    var term = document.referrer;
    var re = /bengali|gujarati|gujrati|hindi|marathi|devnagari|devanagari|punjabi|gurmukhi|kannada|malayalam|tamil|telugu|thelugu|thamil/gi ; 
    var m = re.exec(term);
    var result ='';
    if (m != null && m.length > 0)
        result = "<strong>" + m[0] + "</strong>";
    else
        result = "your favourite Indic Script";
    // Create popup
    CreatePopup("step1", "Step 1", "Click here to erase existing contents", "right");
    CreatePopup("step2", "Step 2", "Select " + result + " from this dropdown list and start typing.", "left");
    CreatePopup("step3", "Step 3", "Click here to get a help for typing once you selected script in Step 2", "right");

    // Restore the message from please wait to spell checker
    document.getElementById("message").innerHTML = "Now Akshar Spell Checker for Gujarati is available!!! Click on <img src=\"tiny_mce/plugins/aksharspellchecker/img/aksharspellchecker.gif\"> to check Gujarati spelling";

    // Initialize for google search
    pph = new PramukhPhoneticHandler();
    pph.convertToIndicIME("q");
    pph.onScriptChange("q", indicChange);

    // Open up popups
    showPopup("step1","elm1_newdocument");
    showPopup("step2","elm1_indicime");
    showPopup("step3","elm1_indicimehelp");

    // Close popup after xx seconds.
    setTimeout("closePopup();",15000);
}

function toggle_menu(id)
{
    var elem = document.getElementById(id);
    elem.style.display = elem.style.display=="none"? "":"none";
}

function CheckNewVersion()
{
    var JSONRequest = tinymce.util.JSONRequest;
    try {
        netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead");
    } catch (e) {
// do nothing
    }
    JSONRequest.sendRPC({
            url : "http://service.vishalon.net/pramukhtypepadmessage.aspx?v=2.5.00",
            method : "",
            params : "",
            type: "GET",
            success : function(r){
                var message = r.substring(r.indexOf(",")+1);
                if (message != "")
                    document.getElementById("message").innerHTML = "<img src='img/info.jpg' >" + message + "<br><br>";
                },
                error : function(e, x) {
                    // do nothing 
                }
            });
}
function indicChange(id, lang)
{
    var s = document.getElementById('language');
    s.value = lang;
    if (lang == null || lang == "")
        lang = 'english';
    pph.setScript(id, lang);
}
function CreatePopup(id, title,content, dir)
{
    var holder = document.getElementById("plholder");
    holder.innerHTML += "<div id='" +id + "' style='display:none;'>"+
        "<div class='popupbody' id='" +id + "content'>" +
    "<div style='float:right;'><img src='img/close.gif' style='cursor:pointer;cursor:hand;' onclick='toggle_menu(\"" + id + "\");'/></div>"+
    "<div><strong>" + title + "</strong></div>"+
    "<div style='clear:both'></div>"+
    "<div>" + content + "</div>"+
    "</div>"+
    "<img src='img/" + dir + ".gif' id='" + id + "img' style='position:absolute;'/>"+
    "</div>";
}

var pph, pleaseWait = "Please wait while Pramukh Type Pad is loading... <img src='img/progress.gif' /> &nbsp;&nbsp;(Loading problem??? Get <a href=\"pramukhlibex.htm\">Simple Pramukh Type Pad</a> )"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:52:58.497

您必须下载[语言包](http://www.tinymce.com/i18n/index.php?ctrl=lang&act=download)并解压缩。
然后，您必须将每个 js 文件放在 tinymce 文件夹的相应文件夹中。
您还必须指定[语言](http://www.tinymce.com/wiki.php/Configuration%3alanguage)。
如果您使用的是[TinyMCE - jQuery 插件](http://www.tinymce.com/wiki.php/jQuery_Plugin)，您必须执行以下操作：

```
// Initializes all textareas with the tinymce class
$(document).ready(function() {
   $('textarea.tinymce').tinymce({
      script_url : '../js/tinymce/jscripts/tiny_mce/tiny_mce.js',
      theme : "advanced",
      language: "hi",
      ...
   });
}); 
```

如果你想从你的文本区域中删除 tinyMCE（如果你想重置语言，我想你必须这样做）你可以使用这个代码：

```
tinyMCE.execCommand('mceRemoveControl', false, 'mycontrol_id'); 
```

[在这里](http://www.tinymce.com/wiki.php/Command_identifiers)指定。

您可以使用相同的代码重新创建它。您可以将所有内容包装在一个函数中并传递语言参数：

```
function setup(language) {
   tinyMCE.init({
      mode : "textareas",
      theme : "advanced",
      language: language,
      plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",
      theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
      theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,outdent,indent,blockquote,|,undo,redo,|,link,unlink,anchor,image,cleanup,help,code,|,insertdate,inserttime,preview,|,forecolor,backcolor",
      theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,|,charmap,emotions,iespell,media,advhr,|,print,|,ltr,rtl,|,fullscreen",
      theme_advanced_buttons4 : "insertlayer,moveforward,movebackward,absolute,|,styleprops,|,cite,abbr,acronym,del,ins,attribs,|,visualchars,nonbreaking,template,pagebreak",
      theme_advanced_toolbar_location : "top",
      theme_advanced_toolbar_align : "left",
      theme_advanced_statusbar_location : "bottom",
      theme_advanced_resizing : true
   });
} 
```

如果要从工具栏中删除[按钮](http://www.tinymce.com/wiki.php/Configuration%3atheme_advanced_buttons_1_n)，则必须处理这些行：

```
theme_advanced_buttons1 
theme_advanced_buttons2
... 
```

删除那些你不需要的。[这里](http://www.tinymce.com/wiki.php/Buttons/controls)
有所有按钮和插件的列表。 如果您想添加自己的按钮，您可以在[此处](http://www.tinymce.com/tryit/custom_toolbar_button.php)找到示例。

**更新**：

由于您使用了自己的插件，我猜您已经在插件部分定义了它：

```
tinyMCE.init({
    mode : "textareas",
    theme : "advanced",
    language: 'hi',
    plugins : "myPlugin, pagebreak ... ",
    theme_advanced_buttons1 : "save,newdocument,|,bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,styleselect,formatselect,fontselect,fontsizeselect",
    theme_advanced_buttons2 : "myPlugin",
    ...
    }); 
```

如果您不想显示它，只需将其从**theme_advanced_buttons2**中删除。

# iphone - 如何增加iphone中特定单元格的行高并将按钮添加到增加的单元格

> ID：10929007
> 
> 赞同：0
> 
> 时间：2012-06-07T09:20:05.263
> 
> 标签：iphone, objective-c

我有一个应用程序，我在 tableview 单元格上添加嵌入式 youtube 视频。在 tableview 的左侧有一个复选框可以选择特定视频。当我单击单元格播放特定视频通过嵌入视频播放的视频时.但我希望当我点击 youtube webview 的完成按钮时，它应该返回到相同的列表页面，并且该特定单元格的行高应该增加高度，其中包含 2 个按钮。当我点击完成按钮时，我是能够返回到相同的 tableview 页面，但问题是播放的视频的行高没有增加，按钮也不可见。请帮我解决这个问题。谢谢。这是我返回的代码单击视频的完成按钮时相同的 tableview 页面：

```
-(void)playVideo:(NSString *)urlString frame:(CGRect)frame
{
    NSString *embedHTML = @"\ <html><head>\ <style type=\"text/css\">\ body {\ background-color: transparent;\ color: red;\ }\ </style>\ </head><body style=\"margin:0\">\ <embed id=\"yt\" src=\"%@\" type=\"application/x-shockwave-flash\" \ width=\"%0.0f\" height=\"%0.0f\"></embed>\ </body></html>";
    NSString *html = [NSString stringWithFormat:embedHTML, urlString, frame.size.width, frame.size.height];
    videoView = [[UIWebView alloc] initWithFrame:frame];
    [videoView loadHTMLString:html baseURL:nil];

}

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"Cell";
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil)
        {
            cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];

        }

        ArchiveModal *AM = (ArchiveModal*)[DatafromArchModal objectAtIndex:indexPath.row] ;

        NSLog(@"%i",AM.VideoId);
        [self playVideo:AM.ArchUrl frame:CGRectMake(60, 20, 200, 100)];
        //this function is for embedding video and playing video 
             [[NSNotificationCenter defaultCenter]
         addObserver:self
         selector:@selector(windowNowVisible:)
         name:UIWindowDidBecomeVisibleNotification
         object:self.view.window
         ];

        [[NSNotificationCenter defaultCenter]
         addObserver:self
         selector:@selector(windowNowHidden:)
         name:UIWindowDidBecomeHiddenNotification
         object:self.view.window
         ];

}

-(void)didselectrowAtindexPath
{

    [self playVideo:AM.ArchUrl frame:CGRectMake(60, 20, 200, 100)];

} 
```

//这是单击完成按钮时调用的通知。这里我在单击完成按钮时调用相同的tableview列表页面。但是我希望当单击完成按钮时应该调用相同的页面但行高已播放的特定单元格的高度应增加，并且还应将 2 个按钮添加到该特定行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:54:26.803

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
   [self addButton];
   return 50; //returns height of row
} 
```

**创建按钮：**

```
-(void)addButton
{
  UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
  [button addTarget:self action:@selector(callYourMethod:) forControlEvents:UIControlEventTouchDown];
  [button setTitle:@"Show View" forState:UIControlStateNormal];
  button.frame = CGRectMake(80.0, 210.0, 160.0, 40.0);
  [view addSubview:button];
  [button release];
} 
```

# google-app-engine - 网站在 IE 上工作，但在 Firefox 上不工作

> ID：10929009
> 
> 赞同：0
> 
> 时间：2012-06-07T09:20:16.260
> 
> 标签：google-app-engine, firefox, internet-explorer-9

第一个计时器。我正在使用 Google-app-engine 开发 Web 应用程序。代码主要是servlet和jsp。当我运行本地服务器并尝试使用 IE9 浏览该站点时，它看起来很棒。但是，当尝试使用 firefox10,11 或 GC 时，我得到的只是空白页。我将一页部署到服务器，问题再次出现。

如果需要，我将添加源代码或链接到页面，但目前我什么都没有。有任何想法吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:29:27.790

感谢您的评论。在成为忠实读者几年后，我仍然在这里学习我的方式。不管怎样，我找到了。我花了大约2个月，但我做到了。就这么简单：似乎 IE 更灵活一些，但 FF 和 GC 无法解析带有 '/' 而不是 '\' 的路径。我在为 firefox 安装 Firebug 时得到了它，它运行了代码并暗示图像的 URL 无效。对该错误消息的简短查找让我得出了这个结论。

非常感谢！

# java - DI 与 Java 6？

> ID：10929011
> 
> 赞同：1
> 
> 时间：2012-06-07T09:20:18.453
> 
> 标签：java, dependency-injection, java-ee-6, java-6

我使用 Java 6 阅读了一些关于 DI 的文档，但我不确定是否完全理解。我有以下类，我想在其中注入服务：

```
@ManagedBean
@RequestScoped
public class MyBean implements Serializable {

    private static final long serialVersionUID = 1L;

    @Inject
    private MyService myService;
    private List<SomeObject> someObjects;

    // Getter and setter

    public List<SomeObject> getSomeObjects() {
        if (someObjects == null) {
            someObjects = myService.find();
        }
        return someObjects;
    }

} 
```

服务：

```
public class MyServiceImpl implements MyService {

    public MyServiceImpl() {
    }

} 
```

运行此代码时，不会注入 myService。请问，我做错了什么？

PS：我使用的是Tomcat 7

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:16:32.880

Java 6 没有内置依赖注入，Tomcat 7 AFAIK 也没有。您在考虑 Java EE 6 吗？然后，您必须在与 Java EE 6 兼容的应用服务器（如 TomEE 或 GlassFish）中运行您的代码。

如果你想继续使用 Tomcat 7，你可以考虑 Spring 或 Guice。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:44:35.093

您只需要在（META-INF/beans.xml 或 WEB-INF/beans.xml）中添加 beans.xml 文件。这是示例 beans.xml 文件，

```
 <?xml version="1.0" encoding="UTF-8"?>
      <beans xmlns="http://java.sun.com/xml/ns/javaee"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="
            http://java.sun.com/xml/ns/javaee 
            http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
      </beans> 
```

阅读这篇[文章](http://java.dzone.com/articles/cdi-di-p1)，它解释了 DI 的详细用法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T10:13:57.197

使用 @Named 注释对 MyServiceImpl 进行注释。

# php - 使用条件计算总加班时间

> ID：10929016
> 
> 赞同：0
> 
> 时间：2012-06-07T09:20:49.663
> 
> 标签：php, javascript

我的案子需要你的帮助。

如何使用条件计算总加班时间？例子 ：

使用输入类型，

```
OT From <input type="text" name="ot_from">
OT To <input type="text" name="ot_to">
Total Hours <input type="text" name="total_hours"> 
```

工作日：08.00 - 17.00（正常工作日） 如果我工作到 19.00，应该算我加班 2 小时。

在我的规则中，从 18.00 到 18.30 不计算加班时间，因为那是休息时间。所以我的总加班时间应该是 1.5 小时而不是 2 小时。

有人可以给我一个解决方案吗？感谢你的帮助。

谢谢你。大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:38:46.017

这是你应该做的：

1 将小时和分钟拆分为总分钟数。

`str = "1:23" or other time value`

`time = parseInt(str.split(":")[0], 10)*60+parseInt(str.split(":")[1], 10)`

2 从开始时间中减去结束时间 - 这将为您提供最后时间。

3 要将分钟转换为小时，请执行以下操作：

`minutes = time%60`

`hours = parseInt(time/60, 10)`

您实际上并不需要 PHP - 只要您不希望将数据存储在数据库或任何东西中，这一切都可以使用 Javascript 完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:46:31.333

如果要确保用户的输入始终相等，则应将输入字段替换为选择框。然后，您可以为小时制作一个选择框，为分钟制作一个选择框。

要计算工作时间，您可以进行如下基本计算：

```
<?php
// Vars of the POST form
$otfrom_hours   = $_POST['ot_from_hours'];
$otfrom_minutes = $_POST['ot_from_minutes'];
$otto_hours     = $_POST['ot_to_hours'];
$otto_minutes   = $_POST['ot_to_minutes'];

// Make a full string for strtotime
$otfrom_string  = $otfrom_hours.":".$otfrom_minutes;
$otto_string    = $otto_hours.":".$otto_minutes;

// Basic calculation
$start          = strtotime($otfrom_string);
$end            = strtotime($otto_string);
$elapsed        = $end - $start;
echo date("H:i", $elapsed);
?> 
```

希望它会有用！

# php - 将输入的名称与先前存储的名称配对

> ID：10929018
> 
> 赞同：0
> 
> 时间：2012-06-07T09:20:52.167
> 
> 标签：php, mysql

我目前有这张桌子。

**名称**

两个字段，ID 和名称。示例数据为 1 | 哈利。

现在我打算做的是，如果有人在我的表格中输入像亨利这样的东西，它会在我的数据库中搜索以“H”开头的结果然后如果他们有多个结果，它将查看是否有任何结果是“他”，如果不是，它将回退到“H”的先前结果。

我唯一能想到的就是这个

```
$inputted_name = "Henry";
$query = mysql_query("SELECT `name` FROM `names`");
while($row = mysql_fetch_array($query)){
    $stored_name = $row['name'];
    if($stored_name[0] == $inputted_name[0]){
        if($stored_name[1] == $inputted_name[1]){
            $result = $stored_name;
            break;
        }   else   {
            // continue looking but then return the first result that matched one letter?
        }
    }
} 
```

现在我确信这不是最好的方法。可以在查询中吗？我真的不确定在哪里可以找到一个明智的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:25:05.627

更改 mysql_query("SELECT `name`FROM `names`");

到 mysql_query("SELECT `name`FROM `names`WHERE NAME='".$inputted_name."'");

并检查您是否有多个答案。

请注意，如果您的名称来自非受控源（例如网页），这是一种不好的方法，因为它允许 SQL 注入，然后您需要参数，但对于您的示例，它会起作用。

编辑：现在我再次阅读了您的问题，是的，您需要参数或转义，例如：

```
$name = mysql_real_escape_string($inputted_name);
mysql_query("SELECT `name` FROM `names` WHERE NAME='".$=name."'"); 
```

此外，不要尝试在代码中执行数据库可以轻松完成的操作（例如搜索字符）。您的代码几乎总是会比数据库更糟糕，因为它可以进行搜索，将其留给数据库。

# matlab - 去掉图标题中的“图一”

> ID：10929020
> 
> 赞同：15
> 
> 时间：2012-06-07T09:20:57.393
> 
> 标签：matlab, matlab-figure

我有一个人物，我希望他的名字是`Step 2 of 3: Simulation Plot Window`，但它的名字是：`figure 2: Step 2 of 3: Simulation Plot Window`。

我怎样才能把他的名字改成我想要的名字？

我不知道是否有必要，但在我写的代码的开头：

```
hFig = figure('Name','window 1','Visible','Off'); 
```

在我的代码结束时，我写道：

```
hFig = figure('Name','Step 2 of 3: Simulation Plot Window','Menubar','none', 'Resize','off', ...
    'WindowStyle','modal', 'Position',[300 300 1150 600]); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-07T09:27:49.343

在标题中显示数字是图形的属性之一。默认情况下，它设置为`on`，除非您使用`GUIDE`.

无论如何，为了删除它，请使用

```
set(gcf,'NumberTitle','off'); 
```

`figure`更好的方法是使用从函数调用中获得的句柄：

```
hFig = figure('Name','window 1','Visible','Off');
set(hFig,'NumberTitle','off'); 
```

`figure`此外，（正如@GuntherStruyf 也提到的），可以在调用函数本身时做到这一点：

```
hFig = figure('Name','window 1','Visible','Off','NumberTitle','off'); 
```

# sql - 多行匹配，但我只想要一个？

> ID：10929021
> 
> 赞同：0
> 
> 时间：2012-06-07T09:21:03.623
> 
> 标签：sql, sql-server

有时我希望执行连接，从而获取一列的最大值。这样做我必须执行 max() 和 groupby- 这会阻止我从最大的行中检索其他列（因为它们不包含在 GROUP BY 或聚合函数中）。

为了解决这个问题，我将最大值加入原始数据源，以获取其他列。但是，我的问题是这有时会返回不止一行。

所以，到目前为止，我有类似的东西：

```
SELECT * FROM
    (SELECT Col1, Max(Col2) FROM Table GROUP BY Col1) tab1
JOIN
    (SELECT Col1, Col2 FROM Table) tab2
ON tab1.Col2 = tab2.Col2 
```

如果上面的查询现在返回三行（与 column2 的最大值匹配），我有点头疼。

如果有一个额外的列 - col3 并且对于上述查询返回的行，我只想返回一个，例如最小 Col3 值 - 我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:25:11.667

如果您使用的是 SQL Server 2005+。然后你可以这样做：

**CTE方式**

```
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY Col1 ORDER BY Col2 DESC) AS RowNbr,
        table.*
    FROM
        table
)
SELECT
    *
FROM
    CTE
WHERE
    CTE.RowNbr=1 
```

**子查询方式**

```
SELECT
    *
FROM
    (
    SELECT
        ROW_NUMBER() OVER(PARTITION BY Col1 ORDER BY Col2 DESC) AS RowNbr,
        table.*
    FROM
        table
    ) AS T
WHERE
    T.RowNbr=1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:26:04.760

据我所知，它可能是这样的

```
SELECT * FROM
    (SELECT Col1, Max(Col2) FROM Table GROUP BY Col1) tab1
JOIN
    (SELECT Col1, Col2 FROM Table) tab2
ON tab1.Col2 = tab2.Col2 and Col3 = (select min(Col3) from table ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:28:14.493

假设您使用的是 SQL-Server 2005 或更高版本，您可以在此处使用[Window 函数](http://msdn.microsoft.com/en-us/library/ms189461.aspx)。我选择了[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)但这不是唯一的选择。

```
;WITH T AS
(   SELECT  *,
            ROW_NUMBER() OVER(PARTITION BY Col1 ORDER BY Col2 DESC) [RowNumber]
    FROM    Table
)
SELECT  *
FROM    T
WHERE   RowNumber = 1 
```

inside子句相当于子查询`PARTITION BY`中`OVER`的 group by，然后您`ORDER BY`确定开始对行进行编号的顺序。在这种情况下`Col2 DESC`，从 col2 的最高值开始（相当于您的`MAX`声明）。

# wso2 - URL 重写中介 WSO2 ESB

> ID：10929025
> 
> 赞同：0
> 
> 时间：2012-06-07T09:21:16.903
> 
> 标签：wso2, wso2esb

我希望每当用户键入`http://localhost:8280/services/Facebook/sea`实际请求时应该是`http://localhost:8280/services/Facebook/search?q=jack`. 这是代理服务 Facebook 的 synapse.xml 配置的一部分。但它不起作用，配置有什么问题？

```
<proxy name="Facebook" transports="https http" startOnLoad="true" trace="disable">
        <target>
            <endpoint>
                <address uri="http://graph.facebook.com"/>
            </endpoint>
            <inSequence>
                <rewrite>
                    <rewriterule>
                        <action value="search?q=jack" regex="sea" type="replace" fragment="host"/>
                    </rewriterule>
                </rewrite>
                <log level="full"/>
            </inSequence>
            <outSequence>
                <send/>
            </outSequence>
        </target>
    </proxy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:16:20.163

需要替换的部分在 URL 的路径中。所以你应该将片段属性设置为“路径”。查询部分应使用单独的操作进行设置：

```
 <rewrite>
             <rewriterule>
                <action value="search" regex="sea" type="replace" fragment="path"/>
                <action value="q=jack" type="set" fragment="query"/>
             </rewriterule>
        </rewrite> 
```

# javascript - 使用 node.js 发布回复不起作用

> ID：10929029
> 
> 赞同：0
> 
> 时间：2012-06-07T09:21:33.977
> 
> 标签：javascript, html, http, node.js, post

我一直在为一个项目开发基于 node.js 的服务器。目前，我在 html 页面上有一个脚本，该脚本将数据发布到同一服务器上的 jsp 页面 - 这很有效。但是，我似乎无法将数据发送回管道。我已经注意到各种 node.js 发布脚本也是如此。

编辑：我说 JSP，我只是指标准的 javascript；我刚刚制作了带有 .jsp 扩展名而不是 .js 的页面，所以我仍然可以将脚本作为 .js 发送。

编辑 2：标题 /do/ 被发送。看起来 response.write() 或 reponse.end() 并没有真正发送任何东西。我尝试压缩数据并更改传输编码标头以匹配但没有运气。想我可能会对其进行wireshark。

编辑 3：Wireshark 由于某种原因无法检测到 POST >.>

编辑 4：注意到 response.write() 返回错误。不知道如何调试。我将在最后添加更多代码。

这是 JSP 页面的代码。

```
/**
 * This POST parser takes XML data and translates it as follows..
 * 
 * XML -> JS Object -> XML
 * 
 * This is so I can test some libraries.
 */

// Eyes, to inspect variables
var inspect = require('eyes').inspector({maxLength: false});

// This is an XML parser, that parses XML into standard JS arrays
var xml2js = require('xml2js');

// This one converts JSON (Or JS objects) to XML.
var jsontoxml = require('jsontoxml');

exports.seperateHeader = false; // We have no separate header function
exports.separateEnd = true;

exports.GET = function(query, request, response) { // Our GET function.

    response.writeHead(200, { // Write the header
        'Content-Type': 'text/plain; charset=utf-8'
    });

    response.end("No POST data here!"); // Tell the user that there was no POST data.
}

exports.POST = function(query, postdata, request, response) { // Out POST function.

    var rootnode = undefined;
    var realdata = undefined;
    var result = undefined;

    if( postdata["data"].startsWith("<?xml") ) // It's XML, parse it
    {
        console.log("      | Detected XML.");
        var parser = new xml2js.Parser(); // Create an XML parser
        parser.parseString(postdata["data"], function (err, data) { // Parse the XML from the POST data
            if(err){
                inspect(err); // If we have an error, inspect it with eyes
            }
            else
            {
                // inspect(result); // Removed; printed the XML data as an array

                for (var prop in data) { // Get the root node of our XML; this is the command
                    rootnode = prop;
                    break;
                }

                realdata = data[rootnode]; // Get the data without the root node
                result = data;
            }
        });
    }
    else // Try to parse it as JSON
    {
        console.log("      | Detected JSON.");
        result = JSON.parse(postdata["data"]);
        for (var prop in result) { // Get the root node of our JSON; this is the command
            rootnode = prop;
            break;
        }

        realdata = result[rootnode]; // Get the data without the root node
    }
    console.log("      | Before: ")
    inspect(postdata["data"]); // Inspect the data we've got (XML or JSON)
    console.log("      | Native object: ")
    inspect(result); // Inspect the data that's been parsed to an object
    console.log("      | XML: ")
    xmldata = jsontoxml.obj_to_xml(result) // Object -> XML
    xmldata = '<?xml version="1.0" encoding="UTF-8"?><Request>' + xmldata + "</Request>"; // WUPOS extra XML stuff and the XML header
    inspect(xmldata); // Inspect the XML created from the object

    response.writeHead(200, { // Write the header
        'Content-Type':   'text/plain; charset=utf-8',
        'Content-Length': xmldata.length
    });

    response.write(xmldata); 
} 
```

这是http响应的内部代码..

```
var fs = require('fs');
var url = require('url');
var path = require('path');
var querystring = require("querystring")

var ext = require("./ext.js").ext // For getting MIME types (I know, there's another module for this)

// Logging function
function Log(message, prefix, isSecure)
{
    if (!prefix)
    {
        prefix = "     ";
    }
    else
    {
        if (isSecure)
        {
            prefix = "HTTPS";
        }
        else
        {
            prefix = "HTTP ";
        }
    }

    console.log(prefix + " | " + message);
}

exports.Log = Log;

// httpRequest; this function serves standard HTTP requests
function httpRequest(request, response, isSecure) {
    request.setEncoding('utf-8'); // Set the encoding
    requrl = url.parse(request.url, true); // Parse the URL
    reqhost = request.connection.address();// Get the IP and port of the user

    if (requrl.pathname == "/") // If they were requesting the root..
    {   
        if (path.existsSync("../html/index.jsp")) // If index.jsp exists..
        {   
            reqfile = "/index.jsp"; // Remember that we want that file
        }
        else // Otherwise, index.html
        {
            reqfile = "/index.html"; 
        }
        // Log it
        if (requrl.search) { 
            Log( 
                "[" + reqhost.address + ":" + reqhost.port + "] " + request.method + " " + reqfile + requrl.search + " (Redirected from \"/\")", 
                true, isSecure
            ); 
        }
        else { 
            Log( 
                "[" + reqhost.address + ":" + reqhost.port + "] " + request.method + " " + reqfile + " (Redirected from \"/\")", 
                true, isSecure
            ); 
        }
    }
    else // If not,
    {   // Log it,
        Log( 
            "[" + reqhost.address + ":" + reqhost.port + "] " + request.method + " " + requrl.href
            , true, isSecure
        );
        reqfile = requrl.pathname; // Remember which file was requested
    }

    if (reqfile.endsWith(".jsp")) { // If the file is a JS page
        try { // Try..
            reqjs = require("../html/" + reqfile); // ..to import the code from our script
            if (reqjs.separateHeader) { // If the script has a separate function for sending the header..
                reqjs.headers(request, response); // Send it
            }
            if (request.method == 'GET') // If we have a GET
            {
                reqjs.GET(requrl.query, request, response); // Run the script's GET function
            }
            else if (request.method == 'POST') // If we have a POST
            {
                // Grab all the POST data
                var fullBody = '';

                request.on('data', function(chunk) {
                    if(fullBody.length > 1e6) // If we're getting a massive amount of data, kill the connection
                    {
                        Log("POST flood attack / faulty client detected. Connection closed.", false, isSecure);
                        request.connection.destroy();
                        return;
                    }
                    fullBody += chunk.toString();
                });

                request.on('end', function() {
                    var postdata = querystring.parse(fullBody); // Parse the POST data
                    if (reqjs.POST) // If the script has a POST function,
                    {
                        reqjs.POST(requrl.query, postdata, request, response); // Call it
                    }
                    else
                    {   // Otherwise, just call the GET function
                        reqjs.GET(requrl.query, request, response);
                    }
                });
            }
        }
        catch(e) // If there's an error..
        {
            response.writeHead(500, {
                'Content-Type': 'text/plain'
            });
            response.write("Error: " + e); // Send it to the browser
            Log("Error: " + e, false, isSecure); // Log it
        }
        response.end(); // Finish the response
    }
    else // If the file is not a JS page,
    {
        fs.readFile("html" + reqfile, function(err, data) { // Read the file in
            if(err) { // If there's an error..
                errortype = err.message.split(",")[0]; // ..get the error's code
                if (errortype == "ENOENT") // File not found
                {
                    response.statusCode = 404;
                    response.end("File not found: " + reqfile); // Send them a 404
                    Log("File not found.", false, isSecure); // Log it
                }
                else if (errortype == "EISDIR") // File is actually a directory
                {   
                    if (path.existsSync("html" + reqfile + "/index.jsp")) // If there's an index.jsp file here..
                    {   // Redirect the browser
                        Log("Found index.jsp", false, isSecure);
                        response.writeHead(301, "Moved Permanently", {
                            "Location" : reqfile + "/index.jsp"
                        });
                        response.end("<a href=\"" + reqfile + "/index.jsp" + "\">Please click here.</a>") 
                        return; // Return, so we don't have to wrap the next section of code in braces
                    }
                    else if (path.existsSync("html" + reqfile + "/index.html")) // Or, if there's an index.html file here..
                    {   // Redirect the browser
                        Log("Found index.html", false, isSecure);
                        response.writeHead(301, "Moved Permanently", {
                            "Location" : reqfile + "/index.html"
                        });
                        response.end("<a href=\"" + reqfile + "/index.html" + "\">Please click here.</a>")
                        return; // Return, so we don't have to wrap the next section of code in braces
                    }
                    // If we don't have those files, list them
                    Log("Listing files in html/"+reqfile, false, isSecure); // Log it

                    response.statusCode = 200; // Use Node.js's standard "OK" header
                    // Write out some HTML
                    response.write("<html><head></head><body>\n");
                    response.write("<h1>Directory listing: " + reqfile + "</h1>\n");
                    response.write("<ul>\n");
                    // List off the files
                    var filelist = fs.readdirSync("html" + reqfile);

                    // For every file..
                    for (element in filelist)
                    {
                        // Compile some HTML
                        var datastr = "";
                        datastr += "<li>";
                        datastr += "<a href=\"" + reqfile + "/" + filelist[element] + "\">";
                        if (filelist[element].endsWith(".jsp") || filelist[element].endsWith(".html"))
                        {   // If it ends in html or js, it's a normal page, so colour it green
                            datastr += "<span style=\"color: green;\">";
                            datastr += filelist[element];
                            datastr += "</span></a>";
                        }
                        else
                        {   // Otherwise, just put it in the list
                            datastr += filelist[element];
                            datastr += "</a>";
                        }

                        datastr += "</li>\n";
                        response.write(datastr); // Write out the HTML and go around again
                    }
                    response.end("</ul></body></html>"); // Finish the response
                }
                else
                {   // There was some other problem when opening the file
                    Log("Could not open file: " + err, false, isSecure); // Log it
                    response.statusCode = 501 // Internal server error code
                    response.end("Could not open file: " + err.message); // Tell the browser
                }
            }
            else
            {   // No problems or anomalies. Serve it!
                var contenttype = ext.getContentType(ext.getExt(reqfile).replace(".", "")); // Get the MIME type
                Log("Content-Type: " + contenttype, false, isSecure); // Log it
                response.writeHead(200, "OK", {
                    'Content-Type': contenttype
//                  'Access-Control-Allow-Origin': 'http://b.localhost:25566',
//                  'Access-Control-Allow-Methods': 'POST, GET',
//                  'Access-Control-Allow-Headers': 'Content-Type'
                });
                response.write(data); // Send the data (TODO: Send in chunks?)
                response.end() // End
            }
        });
    }
}

exports.httpRequest = httpRequest; 
```

以及html页面的代码..

```
<html>

<head>
    <title>JS test A</title>
    <script src="js/jquery.js"></script>
</head>

<body style="margin-left: 30%; margin-right: 30%;">
    <div id="tests" style="float:left; width=40%;">
        <a href="#" id="a">Test A</a>
    </div>

    <div id="output" style="float:right; width=60%;">
        <form id="form">
            <textarea id="output" name="output"></textarea>
        </form>
    </div>

    <script>
        $(document).ready(function(){
            $("a#a").click(function(event){
                text = $("textarea").val();
                $("textarea").val(text + "POST test.\n");
                text = $("textarea").val();
                var http = new XMLHttpRequest();

                jsonobj = {
                    array: {
                        obj1: "obj1",
                        obj2: "obj2"
                    },
                    obj3: "obj3"
                }

                var url = "postTest3.jsp";
                var params = "data="+JSON.stringify(jsonobj);
                http.open("POST", url, true);

                //Send the proper header information along with the request
                http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

                http.onreadystatechange = function() {//Call a function when the state changes.
                    if(http.readyState == 4 && http.status == 200) {
                        $("textarea").val(text + http.responseText);
                    }
                    else
                    {
                        $("textarea").val(text + "Repsponded: " + http.status + "\n");
                    }
                }
                http.send(params);  

            });
        });

    </script>
</body>

</html> 
```

编辑 4：附加代码

```
{
                // Grab all the POST data
                var fullBody = '';

                request.on('data', function(chunk) {
                    if(fullBody.length > 1e6) // If we're getting a massive amount of data, kill the connection
                    {
                        Log("POST flood attack / faulty client detected. Connection closed.", false, isSecure);
                        request.connection.destroy();
                        return;
                    }
                    fullBody += chunk.toString();
                });

                request.on('end', function() {
                    var postdata = querystring.parse(fullBody); // Parse the POST data
                    if (reqjs.POST) // If the script has a POST function,
                    {
                        postout = reqjs.POST(requrl.query, postdata, request, response); // Call it
                        if (postout) {
                            inspect(response.write(postout, 'utf8'));
                        }
                    }
                    else
                    {   // Otherwise, just call the GET function
                        reqjs.GET(requrl.query, request, response);
                    }
                });
            } 
```

有人对此有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:30:27.553

好的，所以，我解决了这个问题。以为我会在这里分享我的解决方案。

基本上，在添加了一些 inspect() 调用之后，结果是因为 reponse.write() 是异步执行的，而 response.end() 不是，所以首先调用 response.end()。这就是 response.write() 返回 false 的原因。

我通过将 response.end() 移动到我的异步块中来修复它。

# java - 在方法上同时使用 @RequestMapping 和 @ModelAttribute

> ID：10929030
> 
> 赞同：0
> 
> 时间：2012-06-07T09:21:34.887
> 
> 标签：java, ajax, jsp, spring-mvc

是否可以在 Spring MVC 控制器中的同一方法上同时使用`@RequestMapping`和`@ModelAttribute`注释？

例如，我想获得类似的东西：

```
@ModelAttribute("export_profiles")
@RequestMapping(value = "/profiles_list", method = RequestMethod.GET)
public @ResponseBody
ExportProfile[] getExportProfilesList() {
    edService.getProfiles();
} 
```

我想使用这种方法，因为在我的页面中，我必须将 s 列表加载到s`ExportProfile`中。在同一页面中，我可以创建/删除导出配置文件，因此我必须在我的选择中刷新配置文件列表，并且我想使用对同一方法的 ajax 调用异步执行此操作。`option``select`

是否可以使用单一方法来设置模型属性并处理异步请求？还是我必须使用两种不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:08:01.490

> 我想要做的是将 ExportProfile 数组设置为模型属性，以在我第一次加载页面时填充选择

您可以像这样设置页面的属性...

```
public String myMethodThatInitiatesPage(Model model) {
  model.addAttribute("exportProfiles", edService.getProfiles())
return "yrViewName";
} 
```

# php - flash as3和php之间的无限连接

> ID：10929032
> 
> 赞同：1
> 
> 时间：2012-06-07T09:21:47.253
> 
> 标签：php, actionscript-3, flash, connection, infinite-loop

我有一个大网站，我希望它在添加到数据库后加载新内容。`Javascript's setInterval()`不可接受，因为连接太多，`node.js`不适用于 my `web hosting`，所以我想知道是否可以在`flash as3`和之间保持连接`php`。

*我如何想象它：*

*   首先，我们的网站加载了基本内容..

*   Flash AS3 连接到 php 并保持连接状态..

*   当用户添加新信息时，AS3 调用 Javascript 并向网站添加新信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:39:42.993

仅当您的网络托管允许实时可执行文件充当永久服务器时才有可能。

否则，您可以使用 Comet 触发对服务器的异步请求。

[http://www.zeitoun.net/articles/comet_and_php/start](http://www.zeitoun.net/articles/comet_and_php/start)

# java - Java 连接超时异常（服务器在虚拟机中）

> ID：10929036
> 
> 赞同：2
> 
> 时间：2012-06-07T09:22:08.103
> 
> 标签：java, exception, get, centos, vmware

我有这种情况。我有在 CentOS 中运行的服务器（CentOS 在我的虚拟机 VMware 中）。在主机（win7）中，我有需要在 CentOS 上创建 GET 方法到服务器的 java 程序。我已经管理了主机和虚拟机之间的连接，并且事情可以通过 CentOS 中的浏览器和 java 程序以及主机（win7）中的浏览器运行，但不能从我需要的主机中的 java 程序运行。如果我关闭虚拟机，我仍然会收到超时异常。我已经在 win7 上关闭了防火墙，但我无法在 CentOS 中关闭它，因为我没有管理员权限。

这是我的 GET 方法的 java 代码（192.168.11.128 是虚拟机的 IP）：

```
private static void getMethod(){
    // Create a method instance.
    GetMethod method = new GetMethod("http://192.168.11.128");

    // Provide custom retry handler is necessary
    method.getParams().setParameter(HttpMethodParams.RETRY_HANDLER,
            new DefaultHttpMethodRetryHandler(3, false));

    try {
      // Execute the method.
      int statusCode = client.executeMethod(method);

      if (statusCode != HttpStatus.SC_OK) {
        System.err.println("Method failed: " + method.getStatusLine());
      }

      // Read the response body.
      byte[] responseBody = method.getResponseBody();

      // Deal with the response.
      // Use caution: ensure correct character encoding and is not binary data
      System.out.println(new String(responseBody));

    } catch (HttpException e) {
      System.err.println("Fatal protocol violation: " + e.getMessage());
      e.printStackTrace();
    } catch (IOException e) {
      System.err.println("Fatal transport error: " + e.getMessage());
      e.printStackTrace();
    } finally {
      // Release the connection.
      method.releaseConnection();
    }
} 
```

谢谢你的帮助！

# c# - 如何将数据从 datagridview 保存到 SQL Server 2008 R2

> ID：10929037
> 
> 赞同：0
> 
> 时间：2012-06-07T09:22:25.093
> 
> 标签：c#, datagridview, sql-server-2008-r2

我正在创建一个 C# 程序，我可以在其中添加系统中的数据并保存到数据库中。我正在使用 SQL Server 2008 R2。我有一个数据网格视图，其中有 2 个表，名称和地址。我想要做的是输入所需的信息后，我希望在单击保存按钮后将其保存在我的数据库中。

这是我的数据网格视图的屏幕截图：

![在此处输入图像描述](../Images/22dcbba8fd77ea8f908e757316b3fad0.png)

我有一个代码可以将文本框中的数据保存到我的数据库中。但是我在上面使用了文本框，我不知道如何使用数据网格视图而不是文本框来执行相同的过程（将数据保存到我的数据库中）。请帮忙。谢谢。

这是我在将数据从文本框保存到数据库时使用的代码。：

```
string connectionString = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;
try
{
    using (SqlConnection connect = new SqlConnection(connectionString))
    {
        SqlCommand command = new SqlCommand();
        command.Connection = connect;
        command.CommandText = "insert into customer(name, address) values(@name, @address)";
        command.Parameters.Add(new SqlParameter("@name", SqlDbType.VarChar));
        command.Parameters.Add(new SqlParameter("@address", SqlDbType.VarChar));
        command.Parameters["@name"].Value = name.Text.ToLower();
        command.Parameters["@address"].Value = address.Text.ToLower();
        connect.Open();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:30:32.077

您需要迭代 DataGridView.Rows 集合（我假设 DataGridView 是无界的）。

```
using (SqlConnection connect = new SqlConnection(connectionString))
    {
      using(SqlCommand command = new SqlCommand())
       {
        command.Connection = connect;
        command.CommandText = "insert into customer(name, address) values(@name, @address)";

        command.Parameters.Add(new SqlParameter("@name", SqlDbType.VarChar));
        command.Parameters.Add(new SqlParameter("@address", SqlDbType.VarChar));
        connect.Open();
        foreach (DataGridViewRow row in dataGridView1.Rows)
         {
          if(!row.IsNewRow)
           {
             command.Parameters["@name"].Value = row.Cells[0].Value;
             command.Parameters["@address"].Value = row.Cells[1].Value;
             command.ExecuteNonQuery();
           }
         }
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:32:27.783

您的 GridView 是否绑定到数据源？

如果是这样，您可以使用“updatecommand”或“insertcommand”来定义一个 SQL 查询字符串，当 gridview 识别出这些操作中的任何一个时，您都应该小心。

这里有一个在 gridview MSDN 页面上使用“updatecommand”的好例子：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowupdated](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowupdated)

此外，查看 insert 方法的 SqlDataSource 以了解哪些事件正在发生，您可以将它们绑定到哪些事件中：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.insert](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.insert)

# ruby-on-rails - 使用 Sprockets 生成 javascript 清单

> ID：10929039
> 
> 赞同：2
> 
> 时间：2012-06-07T09:22:27.833
> 
> 标签：ruby-on-rails, sprockets, actionpack

我们经常需要从我们的 Javascript 中引用 Rails 应用程序资产。我已经看到了创建 assets.js.erb 文件并在其中包含对资产的引用的方法。与此处的示例类似：[通过构建所有资产路径值来避免 *.js.erb 文件](https://stackoverflow.com/questions/8522878/avoid-js-erb-files-by-building-all-the-asset-path-values)

我认为这很混乱，我想加入清单生成并同时生成 manifest.js。我想出了以下方法来做到这一点[https://gist.github.com/49d3f12bed298f0685a1](https://gist.github.com/49d3f12bed298f0685a1)

当您运行 assets:precompile 时，这可以正常工作，但是，对于开发，我需要动态生成这个 manifest.js。我找不到合适的地方来做这件事。是否有一些中间件在开发模式下将请求路由到 /assets/* 到 /app/assets/ */*，在那个阶段加入是否合适？

欢迎大家提出意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T16:49:25.677

在阅读了 sprockets 源代码和一些 actionpack sprockets 的东西之后，我一直在努力解决这个问题，我想出了这种方法。只需将它放在 app/assets/javascripts/assets.js.erb 或类似的地方。它使用 Sprockets::Environment 中的 each_logical_path 方法迭代所有资产文件，然后使用该路径实例化一个资产对象。根据是否为您的 rails env 启用资产摘要，返回正确的资产路径。

```
<%
  manifest = {}
  app = Rails.application
  env = app.assets
  env.each_logical_path do |logical_path|
    if File.basename(logical_path)[/[^\.]+/, 0] == 'index'
      logical_path.sub!(/\/index\./, '.')
    end

    # grabbed from Sprockets::Environment#find_asset
    pathname = Pathname.new(logical_path)
    if pathname.absolute?
      return unless stat(pathname)
      logical_path = attributes_for(pathname).logical_path
    else
      begin
        pathname = resolve(logical_path)
      rescue Sprockets::FileNotFound
        return nil
      end
    end

    asset = Sprockets::Asset.new(env, logical_path, pathname)
    manifest[logical_path] = app.config.assets.digest ? asset.digest_path : asset.logical_path
  end
%>

!function(window, document, undefined){

  var assets = <%= ActiveSupport::JSON.encode(manifest) %>;

  var asset_path = function(path){
    if(assets.hasOwnProperty(path)){
      return '/assets/' + assets[path];
    }
    else{
      throw Error('missing asset: ' + path);
    }
  };
  window.asset_path = asset_path;
  window.asset_url = function(path){ return window.location.protocol + '//' + window.location.host + asset_path(path); };
}(window, document); 
```

这仍然需要一些工作，但我认为我在正确的轨道上。

# ruby-on-rails - 保存前确认乘法数据

> ID：10929043
> 
> 赞同：1
> 
> 时间：2012-06-07T09:22:43.270
> 
> 标签：ruby-on-rails, import

在我的应用程序中，有时我需要导入一些 CSV 数据，并且我想在保存导入的数据之前显示一个视图，以便用户检查数据是否正确。如何在 Rails 中实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:29:15.440

在第一个表单字段中，有一个隐藏字段名称“确认”，值为 0。

在 rails 控制器中，如果确认为 0，您只需使用 csv 数据填充，再次使用确认 = 1 显示表单

如果确认为 1，则表示用户看到了 csv，因此您可以保存它。

奖励积分 - 不是显示 csv，而是从每个 csv 单元格中创建一个文本字段 - 用户将能够更新字段，而不仅仅是检查数据*是否*正确。

# php - 如何使用 PDO 避免 mysql 注入

> ID：10929047
> 
> 赞同：0
> 
> 时间：2012-06-07T09:22:48.023
> 
> 标签：php, mysql, pdo, code-injection

如何避免mysql注入？这是我现在拥有的 PHP 文件

```
<?php
include 'config.php';

$Name = $_GET['Name'] ;

$sql = "Select * from tables where names =\"$Name\"";

try {
    $dbh = new PDO("mysql:host=$dbhost;dbname=$dbname", $dbuser, $dbpass);
    $dbh->query('SET CHARACTER SET utf8');
    $dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $stmt = $dbh->query($sql);  
    $names = $stmt->fetchAll(PDO::FETCH_OBJ);
    $dbh = null;
    echo '{"key":'. json_encode($names) .'}'; 
} catch(PDOException $e) {
    echo '{"error":{"text":'. $e->getMessage() .'}}'; 
}

?> 
```

当我`$stmt = $dbh->query($sql); $stmt->execute(array(':name' => $name));`输入代码时，它不起作用。那么我该怎么做呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T09:27:43.490

阅读[pdo 准备好的语句](http://php.net/manual/en/pdo.prepared-statements.php)

这是一个例子

```
$stmt = $dbh->prepare("SELECT * FROM tables WHERE names = :name");
$stmt->execute(array(':name' => $name)); 
```

# .net - 在 .NET 中创建的 OpenXML 电子表格无法在 iPad 中打开

> ID：10929054
> 
> 赞同：6
> 
> 时间：2012-06-07T09:23:26.233
> 
> 标签：.net, ios, ipad, openxml, relative-path

我正在尝试在 .NET 中生成一个电子表格，当他不在办公室时，我的经理将在他的 iPad 上打开该电子表格。

电子表格在 Windows PC 上可以正常打开，但在 iPad 上打开时显示“读取文档时出错”（非常有用！）

通过使用 OpenXML SDK Productivity 工具上的“比较”功能与在 iPad 上打开的文档，**并**通过在记事本中手动编辑错误文档的 XML 文件，我将其缩小到文件**xl/_rels/workbook .xml.rels**存储工作簿中各部分的关系。

这是我用来生成 WorkbookPart 和引用的代码

```
 WorkbookPart workbookPart1 = document.AddWorkbookPart();

    WorkbookStylesPart workbookStylesPart1 = workbookPart1.AddNewPart<WorkbookStylesPart>("rId3");
    ThemePart themePart1 = workbookPart1.AddNewPart<ThemePart>("rId2");
    WorksheetPart worksheetPart1 = workbookPart1.AddNewPart<WorksheetPart>("rId1"); 
```

我的代码生成以下输出，但在 iPad 上无法打开。

```
 <?xml version="1.0" encoding="utf-8" ?> 
      <Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
          <Relationship Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="/xl/styles.xml" Id="rId3" /> 
          <Relationship Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="/xl/theme/theme.xml" Id="rId2" /> 
          <Relationship Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="/xl/worksheets/sheet.xml" Id="rId1" /> 
      </Relationships> 
```

如果我将 Target 属性的值更改为使用相对引用路径，并给出以下输出，那么它确实会在 iPad 上打开。

```
 <?xml version="1.0" encoding="utf-8" ?> 
      <Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">
          <Relationship Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles" Target="styles.xml" Id="rId3" /> 
          <Relationship Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme" Target="theme/theme.xml" Id="rId2" /> 
          <Relationship Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet" Target="worksheets/sheet.xml" Id="rId1" /> 
      </Relationships> 
```

所以问题是：
如何更改我的 .NET 代码，以便它输出带有相对路径的 XML 的第二个版本。

感谢所有帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-21T15:08:25.017

我花了很多时间研究这个，并认为我会分享我的结果。OpenXML 似乎在做两件事。1\. content_types.xml 文件缺少工作簿条目 2\. xl/_rels/workbook.xml.rels 文件使用完全相对路径。

Excel 本身可以很好地打开文件，但我在 iPad 上尝试了各种应用程序，但都失败了。所以我不得不使用以下代码自己手动修复文件。它假定文件的全部内容作为流传入并使用 DotNetZip 打开和操作。希望此代码对其他人有所帮助！

```
 private Stream ApplyOpenXmlFix(Stream input)
    {
        const string RELS_FILE = @"xl/_rels/workbook.xml.rels";
        const string RELATIONSHIP_ELEMENT = "Relationship";
        const string CONTENT_TYPE_FILE = @"[Content_Types].xml";
        const string XL_WORKBOOK_XML = "/xl/workbook.xml";
        const string TARGET_ATTRIBUTE = "Target";
        const string SUPERFLUOUS_PATH = "/xl/";
        const string OVERRIDE_ELEMENT = "Override";
        const string PARTNAME_ATTRIBUTE = "PartName";
        const string CONTENTTYPE_ATTRIBUTE = "ContentType";
        const string CONTENTTYPE_VALUE = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml";

        XNamespace contentTypesNamespace = "http://schemas.openxmlformats.org/package/2006/content-types";
        XNamespace relsNamespace = "http://schemas.openxmlformats.org/package/2006/relationships";
        XDocument xlDocument;
        MemoryStream memWriter;

        try
        {
            input.Seek(0, SeekOrigin.Begin);
            ZipFile zip = ZipFile.Read(input);

            //First we fix the workbook relations file
            var workbookRelations = zip.Entries.Where(e => e.FileName == RELS_FILE).Single();
            xlDocument = XDocument.Load(workbookRelations.OpenReader());

            //Remove the /xl/ relative path from all target attributes
            foreach (var relationship in xlDocument.Root.Elements(relsNamespace + RELATIONSHIP_ELEMENT))
            {
                var target = relationship.Attribute(TARGET_ATTRIBUTE);

                if (target != null && target.Value.StartsWith(SUPERFLUOUS_PATH))
                {
                    target.Value = target.Value.Substring(SUPERFLUOUS_PATH.Length);
                }
            }

            //Replace the content in the source zip file
            memWriter = new MemoryStream();
            xlDocument.Save(memWriter, SaveOptions.DisableFormatting);
            memWriter.Seek(0, SeekOrigin.Begin);
            zip.UpdateEntry(RELS_FILE, memWriter);

            //Now we fix the content types XML file
            var contentTypeEntry = zip.Entries.Where(e => e.FileName == CONTENT_TYPE_FILE).Single();
            xlDocument = XDocument.Load(contentTypeEntry.OpenReader());

            if (!xlDocument.Root.Elements().Any(e =>
                e.Name == contentTypesNamespace + OVERRIDE_ELEMENT &&
                e.Attribute(PARTNAME_ATTRIBUTE) != null &&
                e.Attribute(PARTNAME_ATTRIBUTE).Value == XL_WORKBOOK_XML))
            {
                //Add in the missing element
                var overrideElement = new XElement(
                    contentTypesNamespace + OVERRIDE_ELEMENT,
                    new XAttribute(PARTNAME_ATTRIBUTE, XL_WORKBOOK_XML),
                    new XAttribute(CONTENTTYPE_ATTRIBUTE, CONTENTTYPE_VALUE));

                xlDocument.Root.Add(overrideElement);

                //Replace the content
                memWriter = new MemoryStream();
                xlDocument.Save(memWriter, SaveOptions.DisableFormatting);
                memWriter.Seek(0, SeekOrigin.Begin);
                zip.UpdateEntry(CONTENT_TYPE_FILE, memWriter);
            }

            Stream output = new MemoryStream();

            //Save file
            zip.Save(output);

            return output;
        }
        catch
        {
            //Just in case it fails, return the original document
            return input;
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T07:17:51.183

Comradsky 的发送 pdf 的答案是一个好主意，但如果有人需要能够解决这个问题，我想出了一个解决方案。我知道这是一个可怕的黑客，但它有效，我花了几个小时试图找到一种“合法”的方法，但无济于事。

它涉及打开 .rels 文件并在文档关闭后直接编辑文件中的 xml。

```
 public static void MakeRelativePaths(string filepath)
    {
        // Get the namespace strings
        const string documentRelationshipType = "http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument";
        const string relationshipSchema = "http://schemas.openxmlformats.org/package/2006/relationships";

        string documentUri = null;
        string documentDirectory = null;
        string documentName = null;

        Uri relDocUri = null;

        XName targetAttributeName = null;
        string targetValue = null;

        //  Open the package
        using (Package xlPackage = Package.Open(filepath, FileMode.Open, FileAccess.ReadWrite))
        {
            // Get the directory and filename of the main document part (e.g. /xl/workbook.xml).
            foreach (System.IO.Packaging.PackageRelationship relationship in xlPackage.GetRelationshipsByType(documentRelationshipType))
            {
                documentUri = relationship.TargetUri.ToString();

                documentName = System.IO.Path.GetFileName(documentUri);
                documentDirectory = documentUri.Substring(0, documentUri.Length - documentName.Length);

                //  There should only be document part in the package, but break out anyway.
                break;
            }

            // Load the relationship document
            relDocUri = new Uri(documentDirectory + "_rels/" + documentName + ".rels", UriKind.Relative);
            XDocument relDoc = XDocument.Load(xlPackage.GetPart(relDocUri).GetStream());

            // Loop through all of the relationship nodes
            targetAttributeName = XName.Get("Target");
            foreach (XElement relNode in relDoc.Elements(XName.Get("Relationships", relationshipSchema)).Elements(XName.Get("Relationship", relationshipSchema)))
            {
                // Edit the value of the Target attribute
                targetValue = relNode.Attribute(targetAttributeName).Value;

                if (targetValue.StartsWith(documentDirectory))
                    targetValue = targetValue.Substring(documentDirectory.Length);

                relNode.Attribute(targetAttributeName).Value = targetValue;
            }

            // Save the document
            relDoc.Save(xlPackage.GetPart(relDocUri).GetStream());
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-20T13:01:30.193

我也一直在努力解决与此类似的问题。我终于想出了一个可行的解决方案。这是我为解决问题而编写的代码

```
 // Add a new worksheet part to the workbook.
        WorksheetPart newWorksheetPart = _document.WorkbookPart.AddNewPart<WorksheetPart>();
        newWorksheetPart.Worksheet = new DocumentFormat.OpenXml.Spreadsheet.Worksheet(new SheetData());

        Sheets sheets = _document.WorkbookPart.Workbook.GetFirstChild<Sheets>();
        string relationshipId = _document.WorkbookPart.GetIdOfPart(newWorksheetPart);

        //This bit is required for iPad to be able to read the sheets inside the xlsx file. The file will still work fine in Excel
        string relationshipType = "http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet";
        _document.Package.GetPart(_document.WorkbookPart.Uri).CreateRelationship(new Uri(newWorksheetPart.Uri.OriginalString.Replace("/xl/", String.Empty).Trim(), UriKind.Relative), TargetMode.Internal, relationshipType);
        _document.Package.GetPart(_document.WorkbookPart.Uri).DeleteRelationship(relationshipId);
        PackageRelationshipCollection sheetRelationships = _document.Package.GetPart(_document.WorkbookPart.Uri).GetRelationshipsByType(relationshipType);

        relationshipId = sheetRelationships.Where(f => f.TargetUri.OriginalString == newWorksheetPart.Uri.OriginalString.Replace("/xl/", String.Empty).Trim()).Single().Id;

        // Get a unique ID for the new sheet.
        uint sheetId = 1;
        if (sheets.Elements<Sheet>().Count() > 0)
            sheetId = sheets.Elements<Sheet>().Max(s => s.SheetId.Value) + 1;

        // Append the new worksheet and associate it with the workbook.
        Sheet sheet = new Sheet() { Id = relationshipId, SheetId = sheetId, Name = sheetName };
        sheets.Append(sheet);

        _worksheets.Add(new Worksheet(newWorksheetPart.Worksheet, sheetId)); 
```

_document 和 _worksheets 是我的解决方案类中的私有变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T13:24:57.917

您可以尝试在创建 OpenXML 电子表格后对其进行验证：

```
using System;
using System.Collections.Generic;
using DocumentFormat.OpenXml.Packaging;
using DocumentFormat.OpenXml.Validation;

using (OpenXmlPackage document = SpreadsheetDocument.Open(spreadsheetPathToValidate, false))
{
    var validator = new OpenXmlValidator();
    IEnumerable<ValidationErrorInfo> errors = validator.Validate(document);
    foreach (ValidationErrorInfo info in errors)
    {
        try
        {
            Console.WriteLine("Validation information: {0} {1} in {2} part (path {3}): {4}",
                        info.ErrorType,
                        info.Node.GetType().Name,
                        info.Part.Uri,
                        info.Path.XPath,
                        info.Description);
        }
        catch (Exception ex)
        {
            Console.WriteLine("Validation failed: {0}", ex);
        }
    }
} 
```

希望有帮助，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-10T13:41:44.603

我遇到过同样的问题。在 Cell 上填写 CellReference 属性后，它开始为我工作。在 CellReference 中，您只需输入单元格的名称，例如“A1”、“B1”、...、“C123”

# django-forms - Django 表单标签

> ID：10929056
> 
> 赞同：0
> 
> 时间：2012-06-07T09:23:35.013
> 
> 标签：django-forms

我想以这种方式自定义 django 表单标签：

* * *

```
 ____
Time: |____| (min) 
```

* * *

我怎样才能做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:25:40.703

尝试 help_text 字段：[https ://docs.djangoproject.com/en/dev/ref/forms/fields/#help-text](https://docs.djangoproject.com/en/dev/ref/forms/fields/#help-text)

# javascript - 将多个画布转换为 html5 中的 dataURL

> ID：10929067
> 
> 赞同：5
> 
> 时间：2012-06-07T09:24:06.933
> 
> 标签：javascript, html

我想加入多个画布以制作单个图像。那么有什么方法可以将多个画布转换`toDataURL`为单个图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-06-22T06:13:15.117

创建一个接受多个参数（画布元素）的函数，将它们放在一个空白画布上，然后返回新制作的画布的 dataurl。

```
var getImadeData = function () {
    var i = arguments.length,
        tempCanvas = document.createElement("canvas"),
        ctx = tempCanvas.getContext("2d");
     while (i--) {
        ctx.drawImage(arguments[i], 0, 0);
    };
    return tempCanvas.toDataURL();
}; 
```

现在只需像这样将要放入一个 dataurl 中的多个画布元素提供给函数。

```
var newData = getImageData(canvas1, canvas2, canvas3); 
```

在此示例中，最后一个画布首先放置在空白画布上，因此请确保正确排列画布元素。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T09:36:46.177

是的，`drawImage`画布 2d 渲染上下文中的方法接受画布元素作为图像元素。所以你所要做的就是：

*   创建一个新画布
*   获取它的上下文
*   绘制所有其他画布到它`drawImage`
*   从这个新画布中提取最终图像

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T10:04:01.067

试试这个例子希望它会帮助看到[这里](http://www.html5canvastutorials.com/tutorials/html5-canvas-image-loader/)

```
 //html block

                <canvas id="myCanvas" width="200" height="100" style="border:1px solid #c3c3c3;">

                </canvas>
                <canvas id="myCanvas1" width="200" height="100" style="border:1px solid #c3c3c3;">
                Your browser does not support the canvas element.
                </canvas>

                <canvas id="Canvasimage" width="500" height="100" style="border:1px solid #c3c3c3;">
                Your browser does not support the canvas element.
                </canvas>
    <img id="finalimage" width="500" height="100"  style="border:1px solid #c3c3c3;"/>

                //script block
                function loadImages(sources, callback) {
                    var images = {};
                    var loadedImages = 0;
                    var numImages = 0;
                    // get num of sources
                    for (var src in sources) {
                        numImages++;
                    }
                    for (var src in sources) {
                        images[src] = new Image();
                        images[src].onload = function () {
                            if (++loadedImages >= numImages) {
                                callback(images);
                            }
                        };
                        images[src].src = sources[src];
                    }
                }

                window.onload = function (images) {

            //Canvas first  here
                    var c = document.getElementById("myCanvas");
                    var ctx = c.getContext("2d");
                    ctx.fillStyle = "#FF0000";
                    ctx.fillRect(0, 0, 200, 100);
                 //Canvas second here
                    var c1 = document.getElementById("myCanvas1");
                    var ctx1 = c1.getContext("2d");
                    ctx1.fillStyle = "#00FF00";
                    ctx1.fillRect(0, 0, 200, 100);

               //Canvas final here.
                    var canvas = document.getElementById("Canvasimage");
                    var context = canvas.getContext("2d");

                    var sources = {
                        darthVader: c.toDataURL("image/png"),
                        yoda: c1.toDataURL("image/png")
                    };

                    loadImages(sources, function (images) {
                        context.drawImage(images.darthVader, 100, 30, 200, 137);
                        context.drawImage(images.yoda, 350, 55, 93, 104);
//finalimage  here which has two canvas data
                var finalimage = document.getElementById("finalimage");
        finalimage.src = canvas.toDataURL("image/png"); 
                    });
                }; 
```

# c - Valgrind 无效读取

> ID：10929069
> 
> 赞同：2
> 
> 时间：2012-06-07T09:24:19.920
> 
> 标签：c, valgrind

我在 valgrind 中遇到了几个错误，指的是我的代码的一部分。基本上我有一个充当队列的结构链接列表。这是我的入队功能：

```
PcbPtr enqPcb(PcbPtr *headofQ, PcbPtr process){
    PcbPtr c = *headofQ;
    PcbPtr d = c;
    if (!*headofQ) {
        *headofQ = process;
        return *headofQ;
    }
    while (c->next) {
        c = c->next;
    }
    c->next = process;
    return d;
} 
```

PcbPtr 是指向结构的指针。Valgrind 在 while 循环中给了我各种各样的东西“条件跳转或移动取决于未初始化的值”等。这有什么明显的错误，还是超出了我所包含的范围？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:36:07.857

您可以考虑初始化所指内容的`next`成员`process`（如果在调用之前尚未完成`enqPcb()`）：

```
PcbPtr enqPcb(PcbPtr *headofQ, PcbPtr process){
  PcbPtr c = *headofQ;
  PcbPtr d = c;
  process->next = NULL;

  ... 
```

# c# - 即使我锁定它，我的列表也不是线程安全的

> ID：10929072
> 
> 赞同：2
> 
> 时间：2012-06-07T09:24:31.247
> 
> 标签：c#, multithreading, list, locking, sync

我正进入（状态：

此行中的“集合已修改枚举操作可能无法执行”：

```
foreach (Message msg in queue) 
```

过了一会儿。

**我必须使用 .NET 2.0。**

我对名为“queue”的私有 List<> 进行的两个操作如下：

```
// 1st function calls this
lock (queue)
{
      queue.Add(msg);
}

// 2nd function calls this
lock (queue)
{
      using (StreamWriter outfile = new StreamWriter("path", true)
      {
             foreach (Message msg in queue) // This is were I get the exception after a while)
             {
                  outfile.WriteLine(JsonConvert.SerializeObject(msg)); 
             }

              queue = new List<Message>();
      }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:40:40.577

（下面；好吧，我想不出会导致这种情况的比赛条件......但是：谁知道......）

~~首先，您**确实**需要寻找与列表对话的其他代码；问题不在您发布的代码中。我怎么知道这个？因为在您枚举 ( `foreach (Message msg in queue)`) 时，您有一个锁`queue`，并且我们没有对锁对象的（非常狡猾但不相关的）重新分配做任何事情。~~

对于这个`foreach`错误意味着**其他东西**正在改变列表。首先要做的事情很简单，就是重命名列表字段。如果其他代码触及列表，这将非常快速地向您显示。还要检查您是否从不在此代码之外**公开**列表，即从不`return queue;`从任何地方公开。

~~问题**似乎不在您显示的代码中**。重新分配锁对象是不好的做法，你不应该这样做 - 但是：我看不到它实际上会*破坏*它的场景（显示代码）。~~

* * *

列表在这里不是最好的模型，重新分配锁对象**也不**是一个好主意。*如果只有一个内置类型设计来表示一个队列*......

```
private readonly Queue<Message> queue = new Queue<Message>();
...
lock (queue) {
    queue.Enqueue(msg);
}

// 2nd function calls this
lock (queue) {
    if(queue.Count == 0) continue; // taken from comments

    using (StreamWriter outfile = new StreamWriter("path", true) {
        while(queue.Count != 0) {
            Message msg = queue.Dequeue();
            outfile.WriteLine(JsonConvert.SerializeObject(msg)); 
        }
    }
} 
```

无需清除，因为`Dequeue`它本质上和有效地做到了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:33:56.737

lick 语句使用的参数应该是只读的。看到这个[链接](http://www.dotnetperls.com/lock)

使用`readonly private object`代替`queqe`

代码应该是

```
eadonly object _object = new object();
// 1st function calls this
lock (_object)
{
      queue.Add(msg);
}

// 2nd function calls this
lock (_object)
{
      using (StreamWriter outfile = new StreamWriter("path", true)
      {
             foreach (Message msg in queue) // This is were I get the exception after a while)
             {
                  outfile.WriteLine(JsonConvert.SerializeObject(msg)); 
             }

              queue = new List<Message>();
      }
} 
```

# php - gzip 不适用于内部 css 和 javascript

> ID：10929073
> 
> 赞同：0
> 
> 时间：2012-06-07T09:24:32.337
> 
> 标签：php, javascript, css, gzip, http-compression

我按照此[链接](http://betterexplained.com/articles/how-to-optimize-your-site-with-gzip-compression/)对我的 php 驱动网站进行 gzip 它工作正常，但发生的事情是我在此链接中检查了我的网站，`http://gzipwtf.com/`并在 mozila 的 Web 开发人员工具栏中检查了它是否对 css 和 javascripts 进行了 gzip 压缩，我发现只有外部 css和 javascripts 被压缩，而内部 css 和 javascripts 未被压缩。我不知道出了什么问题。

更新：

内部 CSS 和 javascript 等`http://www.myserver.com/style.css`不被 gzip 压缩，而外部 css 和 javascipt 等`https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js`被 gzip 压缩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:27:47.590

jQuery JS 是从 Google 的服务器加载的，它会对其进行 gzip 压缩。您需要将服务器配置为 gzip 服务器上的静态文件 (JS/CSS)。

在“[插入服务器名称] gzip”上进行谷歌搜索，您可能会找到无数的教程:)

# xslt - 在 Java 中将 XML 转换为 XML 的更好方法/技术是什么？

> ID：10929078
> 
> 赞同：0
> 
> 时间：2012-06-07T09:24:54.480
> 
> 标签：xslt

我需要使用 Java 将 XML 转换为 XML。我用谷歌搜索，发现以下技术很少

1.  JAXB
2.  阿帕奇茧
3.  XSLT

谁能从上面的列表中向我推荐更好的方法/技术？请让我知道是否还有其他更好的选择。

注意：要避免编写 XSLT。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:36:15.823

创建 XSLT 是为了将 XML 转换为某种东西，并且在转换为 XML 方面表现出色。

*   根据您的要求，纯 XSLT 就足够了；
*   如果您的要求超出了本机 XSLT 功能，使用**Apache Xalan**，您可以在 java 中编写自己的扩展函数。

Apache Cocoon 是一款出色的软件，具有链接处理单元的功能。但这可能是矫枉过正。最后，您可能必须编写 XSLT 以供 Cocoon 处理。

很抱歉，我没有**JAXP**的经验（**SAX**和**JDOM**选项都没有），并且无法为您提供它的优缺点……除了一件好事是它提供了第三种选择：XSLT ;-)

如果您真的不想使用 XSLT，不妨看看**Groovy**，它编译为 java 类，据说可以自动将 XML 转换为对象图，并将对象图转换为 XML。请查看以下主题以获得快速概览：

*   [Groovy 从 xml 读取值](https://stackoverflow.com/questions/10028342/groovy-read-values-from-xml)（关于 XML 到对象）
*   [Groovy - XmlNodePrinter 打印空白文件](https://stackoverflow.com/questions/9977493/groovy-xmlnodeprinter-prints-blank-file)（对象到 XML）

最后，也许看看这个非常相似的问题（及其答案）：

*   [使用 Java 转换 XML 的不同方法是什么？](https://stackoverflow.com/questions/9463405/what-are-the-different-approaches-for-transforming-xml-with-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:15:28.843

确实存在与 XSLT 相关的学习曲线。确实，它是这项工作的最佳工具。咬紧牙关，开始学习。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:31:18.107

如果你想要通用的、复杂的转换，那么 XSLT 就是你要走的路——AFAIK 它是这项工作最强大的工具。

对于许多更简单的任务，它可能不是必需的。如果您只是填写或多或少统一的文档，例如电子邮件或报告，请尝试使用[freemarker 之](http://freemarker.sourceforge.net/)类的模板框架。

我对 Cocoon 不熟悉，也不确定如何使用 JAXB 进行 XML 转换。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T18:18:50.483

我发现 saxon 是一个出色的 xslt 处理器，能够支持 xslt 2.0。xslt 1.0 和 2.0 之间存在巨大差异。我相信它也可以在 Java 中扩展。

# php - 从构造函数获取调用者变量名

> ID：10929081
> 
> 赞同：0
> 
> 时间：2012-06-07T09:25:04.043
> 
> 标签：php

我想知道调用对象的变量名。

例如：

```
ClassObj $var = new ClassObj(); 
```

`$var`是否可以从 ClassObj 中的构造函数中获取变量名？

# file-io - 如何从外部 CSV 或文本文件中将网络设备名称读入脚本？

> ID：10929085
> 
> 赞同：1
> 
> 时间：2012-06-07T09:25:09.837
> 
> 标签：file-io, tcl, expect

我已经用 Exepct 语言完成了以下示例脚本来备份我的网络设备配置（cisco 设备）

```
#!/usr/bin/expect -f

# ---------------- configuration ---------------- #

set device 192.168.244.20   
set user go00080         
set pass password        
set tftp 192.168.244.243              
set timeout 60

# -------------- core -------------- #
spawn telnet $device
expect "Username:"
send "$user\n"
expect "Password:"
send "$pass\n"
send "copy running-config tftp://192.168.244.243\r"
expect "Address or name of remote host"
send "\r"
expect "Destination filename "
send "\r"
expect "secs"
send "exit\r"
close
exit 0 
```

现在，我希望我的脚本从 csv 或更简单的 txt 文件中加载 $device；我的意思是，假设我的 txt 文件以下列方式包含所有 cisco ip 地址：

```
192.168.244.20
192.158.244.21
...
192.168.244.245 
```

我希望该脚本一旦加载 txt 文件，每次加载一个 IP 地址，将该 IP 地址分配给 $device 变量，然后执行命令“copy running-config ...”我该怎么办？任何人都可以帮助我

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:28:27.113

```
# -------------- core -------------- #
set file_handle [open text.txt r]
while {[gets $file_handle device] != -1} {
    spawn telnet $device
    #... same as above
    send "exit\r"
    expect eof
}
close $file_handle 
```

有关特定命令的帮助，请参阅[http://tcl.tk/man/tcl8.5/TclCmd/contents.htm](http://tcl.tk/man/tcl8.5/TclCmd/contents.htm)

# ruby-on-rails - rails 不返回 gemfile

> ID：10929093
> 
> 赞同：0
> 
> 时间：2012-06-07T09:25:26.117
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

发出后我在想

`rails new myapp`

我会有一个准备好的 MVC myapp 目录，但是我的 rails 返回一个`new`没有 gemfile 的文件夹。我很困惑这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:45:09.003

如果创建另一个应用程序，有相同的吗？

Gemfiles 在生成新的 Rails 3 应用程序时会自动创建，但在早期版本 (2.x) 中不会。

# iphone - ChartBoost 广告未显示在我的视图中

> ID：10929099
> 
> 赞同：4
> 
> 时间：2012-06-07T09:25:47.557
> 
> 标签：iphone, ios, ios4

我正在开发 iPhone 应用程序。在那我想使用chartboost。我是这个概念的新手，所以我使用了该网站中给出的代码，但它仍然无法正常工作。我在 appdelegate.m 文件中使用了上述编码。并添加了 SystemConfiguration.framework 和 QuartzCore.framework。我还有什么需要做的吗？

```
#import "Chartboost.h"
- (void)applicationDidBecomeActive:(UIApplication *)application {
// Configure ChartBoost
ChartBoost *cb = [ChartBoost sharedChartBoost]; cb.appId = @"APP_ID";
cb.appSignature = @"APP_SIGNATURE";
// Notify the beginning of a user session
[cb startSession];
// Show an interstitial
[cb showInterstitial]; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T17:39:05.693

我也面临同样的问题，解决方案是我们需要在图表提升帐户中创建测试活动。[这里](http://chartboost.com/campaign/marketplace_publisher)

[这是我关于图表提升的主题](https://stackoverflow.com/questions/11412496/chartboost-in-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T15:27:50.340

我实现的方法来初始化 Chartboost

```
- (void) initChartboost {

    Chartboost *cb = [Chartboost sharedChartboost];

    // Add your own app id & signature. These can be found on App Edit page for your app in the Chartboost dashboard
    cb.appId = @"YOUR APP ID FROM CB";
    cb.appSignature = @"APP SIGNATURE";

    // Begin a user session. This should be done once per boot
    [cb startSession];

    // Cache an interstitial at the default location
    [cb cacheInterstitial];

    // Cache the more apps page so it's ready & loaded
   [cb cacheMoreApps];
} 
```

另请注意，您将在模拟器上正确看到插页式广告，但要在设备上看到它们，您必须将您的设备 UDID 添加到 Chartboost，如此[处所述。](https://chartboost.tenderapp.com/kb/ios-integration/how-do-test-devices-work)

# asp.net - 从下载窗口禁用保存选项？在 Asp.net 中？

> ID：10929101
> 
> 赞同：0
> 
> 时间：2012-06-07T09:25:53.577
> 
> 标签：asp.net

在 Web 应用程序中，当用户单击下载选项时，我试图禁用或删除保存对话框。你能帮助我吗。谢谢你。Like 你想打开还是保存这个文件？在这个选项中，我只想要打开选项而不是保存选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:39:28.890

**解决方案 1：客户端 javascript** 您可以使用客户端 onclick 功能禁用该按钮

像这样的代码

> button runat='server' onlick="this.enabled = false;return true;"

这种情况将使您的保存执行并禁用该按钮。

**解决方案2：服务器端** 您可以使用更新面板并将按钮放在其中。

接下来，您可以在服务器按钮单击方法上禁用该按钮或隐藏它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:23:22.567

我试图删除下载对话框中的“打开”选项，但我无法禁用“保存”选项。是否可以在下载对话框中禁用保存选项。我的代码是这样的。

```
Response.AddHeader("Content-disposition", "attachment; filename=" + Path.GetFileName(Filename));
        Response.AddHeader("X-Download-Options", "noopen");
        Response.ContentType = "application/octet-stream"; 
```

# wordpress - Wordpress 元键搜索

> ID：10929102
> 
> 赞同：1
> 
> 时间：2012-06-07T09:25:58.917
> 
> 标签：wordpress

我对 wordpress 元键关系和搜索参数有一些问题。我无法让它工作：

```
?meta_value=Dažādi&id=32&cp_city=Cēsis 
```

搜索结果仅按 meta_value 过滤，而不是 cp_city 和 meta_value。

cp_city 也是元键值。

但这个电话正在工作和过滤：

```
?meta_value=Pārdod&id=32 
```

我需要按两个或三个参数过滤。

这是要过滤的功能代码。

```
<?php

if (empty($pilseta)) {
     $args=array(
    'post_type'          => 'ad_listing',
    'post_status'        => 'publish',
    'meta_key'           => 'cp_tips',
    'meta_value'         => $meta,
    'paged'              => $paged,
    'tax_query'          => array(
        array(
            'taxonomy' => 'ad_cat',
            'terms' => $cat_id,      
            'field' => 'id'
        )
    )
);
}
else {
    $args=array(

    'post_type'          => 'ad_listing',
    'post_status'        => 'publish',
    'meta_query' => array(
        array(
            'meta_key'           => 'cp_tips',
            'meta_value'         => $meta
        ),
         array(
            'meta_key'           => 'cp_city',
            'meta_value'         => $pilseta
        ),
    ),
    'paged'              => $paged,
    'tax_query'          => array(
        array(
            'taxonomy' => 'ad_cat',
            'terms' => $cat_id,      
            'field' => 'id'
        )
    )
);
}

query_posts($args); 
```

?>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:41:11.943

您是否看到了 Wordpress 生成的 SQL 查询以了解是否正常？

在 query_posts 调用之后，把这个：

```
<?php global $wpdb; echo $wpdb->last_query; ?> 
```

如果 WP 正在编写意外查询，我建议您使用带有 get_posts 的[post_where](http://codex.wordpress.org/Plugin_API/Filter_Reference/posts_where)过滤器而不是 query_posts

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:53:51.007

更改下面的 meta_key args 文件并尝试：

```
'meta_query' => array(
        array(
            'key' => 'cp_tips',
            'value'=> $meta
        ),
         array(
            'key'=> 'cp_city',
            'value'=> $pilseta
) 
```

# c++ - 传递指针 - 用于写入流

> ID：10929104
> 
> 赞同：2
> 
> 时间：2012-06-07T09:26:08.950
> 
> 标签：c++, pointers, reference, stream

请原谅我的无知..我知道一些，但不知何故仍然对基础知识感到模糊！？！你能考虑这个简单的例子并告诉我将日志消息传递给'writeLogFile'的最佳方法吗？

```
void writeLogFile (ofstream *logStream_ptr) 
{  
    FILE* file;
    errno_t err;

    //will check this and put in an if statement later..
    err = fopen_s(&file, logFileName, "w+" );

    //MAIN PROB:how can I write the data passed to this function into a file??

    fwrite(logStream_ptr, sizeof(char), sizeof(logStream_ptr), file);

    fclose(file);

}

int _tmain(int argc, _TCHAR* argv[])
{

    logStream <<"someText";

    writeLogFile(&logStream); //this is not correct, but I'm not sure how to fix it

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:38:00.653

而不是`ofstream`你需要使用`FILE`类型。

```
void writeLogFile ( FILE* file_ptr, const char* logBuffer ) 
{  
   fwrite(logBuffer,1, sizeof(LOG_BUF_MAX_SIZE), file);
}

int _tmain(int argc, _TCHAR* argv[])
{
    writeLogFile(m_pLogFile, "Output"); 
    return 0;
} 
```

在别处

```
m_pLogFile = fopen("MyLogFile.txt", "w+"); 
```

**或者您只能使用 ofstreams。**

```
void writeLogFile ( const char* logBuffer ) 
{  
   m_oLogOstream << logBuffer << endl;
}

int _tmain(int argc, _TCHAR* argv[])
{
    writeLogFile("Output"); 
    return 0;
} 
```

在别处

```
m_oLogOstream( "MyLogFile.txt" ); 
```

**根据下面的评论**，您似乎想要做的是：

```
void writeLogFile ( const char* output) 
{  
    fwrite(output, 1, strlen(output), m_pFilePtr);
}

int _tmain(int argc, _TCHAR* argv[])
{
    stringstream ss(stringstream::in);
    ss << "Received " << argc << " command line args\n";
    writeLogFile(m_pLogFile, ss.str().c_str() ); 
    return 0;
} 
```

请注意，您确实需要比我这里更多的错误检查，因为您正在处理 c 样式的字符串和原始指针（指向字符和文件）。

# iphone - IOS - UISaveVideoAtPathToSavedPhotosAlbum 如何返回保存的视频路径？

> ID：10929107
> 
> 赞同：5
> 
> 时间：2012-06-07T09:26:16.937
> 
> 标签：iphone, ios, video

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {

    NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];

    //get the videoURL 
    NSString *tempFilePath = [videoURL path];

    if ( UIVideoAtPathIsCompatibleWithSavedPhotosAlbum(tempFilePath))
    {
      // Copy it to the camera roll.
      UISaveVideoAtPathToSavedPhotosAlbum(tempFilePath, self, @selector(video:didFinishSavingWithError:contextInfo:), tempFilePath);
    } 
} 
```

我使用 UISaveVideoAtPathToSavedPhotosAlbum 来保存录制的视频。我想知道我保存录制视频的专辑中的绝对路径。

我怎样才能得到保存的路径？UISaveVideoAtPathToSavedPhotosAlbum 不返回任何内容。

并且在回调函数 video:didFinishSavingWithError:contextInfo: 中仍然没有路径信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T15:21:56.337

据我所知..您无法获取相册中保存的视频的路径。如果您希望从您的应用程序重播文件列表。您可以在应用程序中包含所有视频。

以下是您放入 didFinishPickingMedia 以将视频存储在辅助文档中的示例代码。这样您就可以跟踪它。

```
 NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
    NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
    NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%d", 1]];
    NSString *fileName = [NSString stringWithFormat:@"%@ :%@.%@", itsIncidentType, [dateFormatter stringFromDate:incidentDate], @"mp4"];
    [dateFormatter release];
    if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath])
        [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error]; //Create folder
    NSURL *videoURL = [imageInfo objectForKey:UIImagePickerControllerMediaURL];
    NSData *webData = [NSData dataWithContentsOfURL:videoURL];
    self.itsVideoName = fileName;
    [webData writeToFile:[NSString stringWithFormat:@"%@/%@",dataPath,fileName] atomically:TRUE]; 
```

希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-15T08:27:34.333

我最近遇到了类似的问题并以这种方式解决了。

使用两种方法创建 PHAsset 类别

`PHAsset+Picking.h`

```
#import <Photos/Photos.h>

@interface PHAsset (Picking)

+ (PHAsset *)retrievePHAssetWithLocalIdentifier:(NSString *)identifier;

+ (void)saveVideoFromCameraToPhotoAlbumWithInfo:(NSDictionary *)info
                                     completion:(void(^)(PHAsset * _Nullable asset))completion;

@end 
```

`PHAsset+Picking.m`

```
@implementation PHAsset (Picking)

+ (PHAsset *)retrievePHAssetWithLocalIdentifier:(NSString *)identifier {
    PHAsset *asset = nil;
    if (identifier) {
        PHFetchResult *result = [PHAsset fetchAssetsWithLocalIdentifiers:@[identifier] options:nil];
        asset = result.firstObject;
    }

    return asset;
}

+ (void)saveVideoFromCameraToPhotoAlbumWithInfo:(NSDictionary *)info 
                                     completion:(void(^)(PHAsset * _Nullable asset))completion
{
    // get URL to file from picking media info
    NSURL *url = info[UIImagePickerControllerMediaURL];
    __block PHAssetChangeRequest *changeRequest = nil;
    __block PHObjectPlaceholder *assetPlaceholder = nil;
    // save video file to library
    [[PHPhotoLibrary sharedPhotoLibrary] performChanges:^{
        changeRequest = [PHAssetChangeRequest creationRequestForAssetFromVideoAtFileURL:url];
        assetPlaceholder = changeRequest.placeholderForCreatedAsset;
    } completionHandler:^(BOOL success, NSError *error) {
        if (success) {
            // get saved object as PHAsset 
            PHAsset *asset = [PHAsset retrievePHAssetWithLocalIdentifier:assetPlaceholder.localIdentifier];
            completion(asset);
        } else {
            completion(nil);
        }
    }];
}

@end 
```

然后在里面使用方法**saveVideoFromCameraToPhotoAlbumWithInfo**

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
    if ([mediaType isEqualToString:(NSString *)kUTTypeMovie]) {
        Weakify(self);
        void (^processAsset)(PHAsset *, NSDictionary *) = ^void(PHAsset *asset, NSDictionary *mediaInfo) {
            [PHImageManager.defaultManager requestAVAssetForVideo:asset
                                                      options:nil
                                                resultHandler:^(AVAsset *asset,
                                                                AVAudioMix *audioMix,
                                                                NSDictionary *assetInfo)
             {
                 Strongify(self);
                 if ([asset respondsToSelector:@selector(URL)]) {

                     // URL to video file here -->
                     NSURL *videoURL = [asset performSelector:@selector(URL)];
                     // <--

                 } else {
                     // asset hasn't property URL
                     // it is can be AVComposition (e.g. user chose slo-mo video)
                 }
             }];
        };

        if (UIImagePickerControllerSourceTypeCamera == picker.sourceType) {
            // save video from camera
            [PHAsset saveVideoFromCameraToPhotoAlbumWithInfo:info completion:^(PHAsset *asset) {
                // processing saved asset
                processAsset(asset, info);
            }];
        } else {
            // processing existing asset from library
            processAsset(info[UIImagePickerControllerPHAsset], info);
        }
    } else {
        // image processing
    }
} 
```

# sql - 在 Oracle 中使用聚合旋转/透视表

> ID：10929108
> 
> 赞同：4
> 
> 时间：2012-06-07T09:26:21.807
> 
> 标签：sql, oracle, pivot, pivot-table

我想在 Oracle 11g 中旋转一个表。枢轴选项需要聚合。这是我原来的表：

```
project | attribute | value
===========================
'cust1' | 'foo'     | '4'
'cust2' | 'bar'     | 'tbd'
'cust3  | 'baz'     | '2012-06-07'
'cust1' | 'bar'     | 'tdsa'
'cust4' | 'foo'     | '22'
'cust4' | 'baz'     | '2013-01-01' 
```

旋转后，表格应如下所示：

```
project | foo | bar | baz
=========================
'cust1' | '4' |'tdba'| NULL
'cust2' | NULL|'tbd' | NULL
'cust3' | NULL| NULL | '2012-06-07'
'cust4' | '22'| NULL | '2013-01-01' 
```

现在，如您所见，分组应该发生在项目列上。不需要折叠或计算任何值。只需轮换一次。那么，枢轴选择是否正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T09:35:53.420

是的，我想是这样。`MAX`使用聚合很容易做这样的数据透视：

```
SELECT
    *
FROM
(
    SELECT
        project,
        attribute,
        value
    FROM
        table1
) AS SourceTable
PIVOT
(
    MAX(value)
    FOR attribute IN ([foo],[bar],[baz])
) AS pvt 
```

否则，您必须在 a max 聚合中执行 case 语句。像这样：

```
SELECT
    MAX(CASE WHEN attribute='foo' THEN value ELSE NULL END) AS foo,
    MAX(CASE WHEN attribute='bar' THEN value ELSE NULL END) AS bar,
    MAX(CASE WHEN attribute='baz' THEN value ELSE NULL END) AS baz,
    project
FROM
    table1
GROUP BY
    project 
```

这几乎与做`PIVOT`. 但我宁愿做的`PIVOT`在`CASE WHEN MAX`..

# c# - 从剪贴板保存 OLE 对象

> ID：10929110
> 
> 赞同：0
> 
> 时间：2012-06-07T09:26:27.057
> 
> 标签：c#, .net, mfc, clipboard

我在剪贴板中有非托管 OLE 对象。我通过下一个代码将其放入剪贴板：

```
[DllImport("mfc80u.dll", CallingConvention = CallingConvention.ThisCall, EntryPoint = "#1532")]
public static extern void COleClientItem_CopyToClipboard(IntPtr thisClientItem, int bIncludeLink); 
```

我如何知道它是谁的对象（例如 Word、Excel 或图像）以及如何通过 C# 将其保存在文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:21:26.180

I don't know how you do it in C#. I do know that you need to try and get the CF_OBJECTDISCRIPTOR clipboard format and inspect the resulting OBJECTDESCRIPTOR object's clsid member. From the CLSID, you can see if it matches Word, Excel, etc.

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms683735(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683735(v=vs.85).aspx)

# c# - 在创建用户时测试 ASP.NET 成员资格提供程序 Duplicate Email

> ID：10929118
> 
> 赞同：2
> 
> 时间：2012-06-07T09:26:58.007
> 
> 标签：c#, asp.net-mvc-3, tdd, membership-provider

我正在尝试使用成员资格和角色提供者方法。到目前为止一切顺利，但我目前被困在提交重复电子邮件的创建用户上。

```
 [Test]
    public void can_create_user_with_given_duplic_Email()
    {
        MembershipCreateStatus status = new MembershipCreateStatus();
        provider.CreateUser("FirstUser", _Password, _Email, null, null, true, Guid.NewGuid(), out status);
        provider.CreateUser("SecondUser", _Password, _Email, null, null, true, Guid.NewGuid(), out status);

        Assert.AreEqual(MembershipCreateStatus.DuplicateEmail, status);
    } 
```

如您所见，我期待来自 MembershipCreateStatus 的重复电子邮件消息。

我在运行此测试时实际收到的错误消息如下

```
can_create_user_with_given_duplic_Email has failed:
  Expected: DuplicateEmail
  But was:  ProviderError 
```

只是提到 provider.CreateUser() 没有问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-22T19:21:23.933

您可以使用`requiresUniqueEmail="false"`允许重复的电子邮件。

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <clear/>
    <add name="DefaultMembershipProvider" 
         type="System.Web.Providers.DefaultMembershipProvider, 
                  System.Web.Providers, Version=1.0.0.0, 
                  Culture=neutral, 
                  PublicKeyToken=31bf3856ad364e35" 
         connectionStringName="SqlConnection" 
         enablePasswordRetrieval="false" 
         enablePasswordReset="true" 
         requiresQuestionAndAnswer="false" 
         requiresUniqueEmail="false"
         maxInvalidPasswordAttempts="5" 
         minRequiredPasswordLength="6" 
         minRequiredNonalphanumericCharacters="0" 
         passwordAttemptWindow="10" 
         applicationName="MyApp"/>
  </providers>
</membership> 
```

# wicket - Wicket Page构造函数被调用两次

> ID：10929125
> 
> 赞同：0
> 
> 时间：2012-06-07T09:27:34.007
> 
> 标签：wicket

我正在使用 wicket 1.4.17 和 IE8。我遇到了 HomePage 构造函数被调用两次的问题。我读了一些其他线程，这是由于标签。我已经处理了这个图像标签，但仍然看到问题。

请建议如何解决。

请提供您对这个问题的看法。我有一个 url 参数，我需要从我的主页进一步传递它。但是，由于我的主页构造函数被调用了两次，我无法读取 url 参数（对构造函数的第二次调用没有任何参数）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:54:38.397

看起来您可能已经尝试在您的`WebApplication`:

```
@Override
protected void init()
{
  super.init();
  ...
  getRequestCycleSettings().setRenderStrategy(
   org.apache.wicket.settings.IRequestCycleSettings.RenderStrategy.ONE_PASS_RENDER);
} 
```

我再次遇到与您相同的问题，因为我现在需要通过 POST 访问页面 URL，并在同一个 Web 请求上进行处理，而不是等待用户单击“确定”按钮，这我用于电子邮件地址验证页面。

**更新** 请在 Nabble 上查看 Wicket 用户论坛的帖子“Wicket Page 构造函数被调用两次”，网址为

[http://apache-wicket.1842946.n4.nabble.com/Wicket-Page-constructor-getting-called-twice-tp4650225.html](http://apache-wicket.1842946.n4.nabble.com/Wicket-Page-constructor-getting-called-twice-tp4650225.html)

获得帮助您调试和定位问题的提示。

我希望这个对你有用。

# android - WebView 在 Android 2.3 上不显示内容

> ID：10929128
> 
> 赞同：2
> 
> 时间：2012-06-07T09:27:49.323
> 
> 标签：android, android-webview

我创建了一个项目来测试为什么在 Android 2.3 及更低版本的 WebView 上没有显示网页（空白页）。必须加载的网址是： [https ://www.geotrackline.com/android/middleware/TabletGeoFrame.php?user_id=503&method=load](https://www.geotrackline.com/android/middleware/TabletGeoFrame.php?user_id=503&method=load)

那应该返回一个显示地图的网络。关键是该应用程序在 Android 3.0（在 GalaxyTab 中测试）及更高版本（在 Galaxy Nexus 中测试）运行良好。

这是我的 Java 代码：

**WebViewTestActivity.java：**

```
WebView wb;
private static String MAP_URL = "https://www.geotrackline.com/android/middleware/TabletGeoFrame.php?user_id=503&method=load";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.main);

    wb = (WebView)findViewById(R.id.webView);

    WebSettings settings = wb.getSettings();

    settings.setJavaScriptEnabled(true);
    settings.setDomStorageEnabled(true);
    settings.setJavaScriptCanOpenWindowsAutomatically(true);
    settings.setBuiltInZoomControls(true);
    settings.setSupportZoom(true);
    settings.setGeolocationEnabled(true);

    wb.loadUrl(MAP_URL);
    wb.setWebChromeClient(new WebChromeClient(){

            public boolean onConsoleMessage(ConsoleMessage cm) {
                Log.e("onConsoleMessage", cm.message() + " -- From line "
                                     + cm.lineNumber() + " of "
                                     + cm.sourceId());
                return true;
            }
     }); 
```

控制台消息显示下一个：

```
06-07 11:15:36.480: E/onConsoleMessage(21930): Uncaught SyntaxError: Unexpected token for -- From line 573 of https://www.geotrackline.com/android/middleware/js/GeoTracking.js
06-07 11:15:36.500: E/onConsoleMessage(21930): Uncaught ReferenceError: GeoTracking is not defined -- From line 15 of https://www.geotrackline.com/android/middleware/TabletGeoFrame.php?user_id=503&method=load
06-07 11:15:36.530: E/onConsoleMessage(21930): Uncaught TypeError: Cannot call method 'sendAJAX' of undefined -- From line 27 of https://www.geotrackline.com/android/middleware/TabletGeoFrame.php?user_id=503&method=load 
```

这是我从 Android 2.3 及以下版本的 url 得到的响应：

```
<html>
    <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title> :: geotracking :: </title>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?libraries=geometry&sensor=false"></script>
        <script language="javascript1.5" src="js/GeoTracking.js" ></script>
        <script>
            var user_id = '503';
            var postn_id = "1323014511956";
            var method="load";
            var func="";
            var map = new GeoTracking("content","","","");
        </script>
        <style>
            body { margin:0; padding:0; }
        </style>
    </head>
    <body onLoad='map.sendAJAX (method, user_id);'>
        <div id="content" style="width:100%; height:100%"></div>
    </body>
</html> 
```

知道发生了什么吗？

提前谢谢，对不起我的英语

# apache-flex - 重复会话错误命中 AWS 实例

> ID：10929136
> 
> 赞同：0
> 
> 时间：2012-06-07T09:28:21.523
> 
> 标签：apache-flex, amazon-web-services, blazeds

我们有一个带有 Java 后端的[Flex 应用程序](http://www.dekho.com.au/help/32/ImagesExt/image17_7.jpg)，我们在中间使用了 BlazeDS。
我们使用 Tomcat 作为 Java 应用程序服务器，它适用于在物理或虚拟服务器上自行托管应用程序的客户群。

我们已经在 AWS 上的一个新实例上设置了部署。我们可以从实例本身很好地访问应用程序，但是通过我的家庭和工作机器上的浏览器上的公共 DNS 访问它，我收到以下消息：

> 检测到重复的基于 HTTP 的 FlexSession，通常是由于远程主机禁用了会话 cookie。必须启用会话 cookie 才能正确管理客户端连接。

我们的客户端日志记录有更多信息，您可以看到它在收到错误之前进行了 2 次调用：

```
6:58:01:542 pm  [INFO] au.com.esriau.dekho.business.AbstractDelegate  - calling SessionService.getSessionInfo
6:58:01:543 pm  [DEBUG] au.com.esriau.dekho.business.AbstractDelegate  - args: (Array)#0
  [0] "0A86A336:0137C62A4BBD:ADB6:1191EBC5"
6:58:01:544 pm  [INFO] au.com.esriau.dekho.view.original.CoordinatesView  - initilization
6:58:01:545 pm  [INFO] au.com.esriau.dekho.business.AbstractDelegate  - calling ConfigurationService.getCoordinateSystems
6:58:01:545 pm  [DEBUG] au.com.esriau.dekho.business.AbstractDelegate  - args: (Array)#0
  [0] "0A86A336:0137C62A4BBD:ADB6:1191EBC5"
6:58:01:546 pm  [INFO] au.com.esriau.dekho.view.original.ScaleView  - initilization
6:58:01:991 pm  [ERROR] au.com.esriau.dekho.utilities.AlertUser  - a fault has occurred
    - Fault Details:
    - Fault Code: Server.Processing.DuplicateSessionDetected
    - Fault String: Detected duplicate HTTP-based FlexSessions, generally due to the remote host disabling session cookies. Session cookies must be enabled to manage the client connection correctly. 
```

我通过 SE-SO 找到了一些很棒的链接，这[很好地解释](http://www.alexglosband.com/2010/03/avoiding-duplicate-session-detected-errors-in-lcds-and-blazeds/)了这个错误。

*   我的浏览器没有禁用 Cookie，因此可以排除这种情况。
*   我根本没有在 AWS 上实现负载平衡，它只是我遇到的一个实例。
*   通过查看 Firebug 和客户端日志，我看不到任何 Flex App 发出两个请求的痕迹。

因此，我不确定为什么这个问题特别发生在 AWS 上，但不会发生在我们的实验室或我们的任何客户自托管机器上，或者我们在[IBM 的 Iaas](http://www-03.ibm.com/systems/au/solution/cloud_progression/longhaus.html)平台上的实例上。

**以前有没有人见过这种情况（特别是与 AWS 混合使用）并看到过解决方法？**

仅供参考：我是测试人员而不是开发人员，但如果需要，可以获取更多信息。请通过评论询问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T02:50:51.750

你有跨域吗？这可能是问题所在。此外，似乎虽然第一个请求还没有结束，但已经提出了一个新请求，这将导致重复会话问题。

# asp.net-mvc-3 - 使用 RavenDB 调试模型持久性的任何技巧

> ID：10929142
> 
> 赞同：1
> 
> 时间：2012-06-07T09:28:41.117
> 
> 标签：asp.net-mvc-3, knockout.js, viewmodel, ravendb

伙计们，我目前正在研究的一个系统由许多 JavaScript 工具组成，这些工具将 JSON 数据作为字符串保存在 SQL Server 中。我正在考虑实现一个解决方案，其中 Knockout ViewModels 作为 c# ViewModels 传递回 MVC 控制器，然后持久化到 RavenDB。其中一些 Viewmodel 非常复杂，我在尝试保存到 DocumentStore 时遇到异常。

是否有任何关于视图模型设计最佳实践的建议，在持久化到 RavenDB 的模型中允许和不允许什么？

另外，调试失败模型的最佳方法是什么？例如，我收到诸如“无法将 'System.Object' 类型的对象大小写为 'System.Dynamic.IDynamicMetaObjectProvider' Source=Raven.Abstractions 之类的错误。我需要更多信息。

我想我想知道为什么与 Knockout ViewModel 一起使用并且与 c# ViewModel 正确绑定的 JSON 在持续到 Raven 时会导致问题。

我有大约 100 个这样的 JSON ViewModel 需要实现，所以我需要一个好的调试过程和一个可接受的模型结构指南，以实现 RavenDB 持久性。

# c++ - 使用 IPSITables 检索 DVB 数据表

> ID：10929144
> 
> 赞同：2
> 
> 时间：2012-06-07T09:28:46.803
> 
> 标签：c++, video-streaming, directshow, dvb

我正在尝试使用未弃用的接口 IPSITables 从 DVB 流中提取 EIT 表。除了 msdn 文档[http://msdn.microsoft.com/en-us/library/windows/desktop/dd694841%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd694841%28v=vs.85%29.aspx)之外，我还没有找到有关如何使用 getTable 方法的文档。

问题是我不知道如何获取*dwHashedVer [in]*参数（标识表内容的哈希值）。

有人用过这个界面吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:34:29.650

我阅读了[ETSI 301-192 规范](http://www.etsi.org/deliver/etsi_en/301100_301199/301192/01.04.02_60/en_301192v010402p.pdf)。微软文档或这个 API 几乎不存在。我在这里在黑暗中拍摄，所以请多多包涵。在表 8.4.4 中有一个`platform_id_hash`从平台 id 生成的字段。获取此哈希的方法也在规范中进行了说明。平台 id 定义为

```
platform_id: This is a 24 bit field which serves as a label to identify a given IP/MAC platform. Allocation of the value
of this field are found in the TR 101 162 [21]. 
```

希望这可以帮助

# servlets - javaee6 读取动态#的帖子表单字段并重定向到新页面

> ID：10929145
> 
> 赞同：0
> 
> 时间：2012-06-07T09:28:49.153
> 
> 标签：servlets, paypal, java-ee-6

我想知道发布动态表单字段的最佳方法是什么，然后重定向到新页面。

我的要求就像在贝宝中结帐，从商家商店单击结帐，它会重定向到贝宝，显示您结帐的所有项目，并要求您登录。

这对于 jersey 是不可能的，因为它不打开页面，只处理 web servlet 请求。所以我被 servlet 困住了？servlet doPost（读取发布的数据并存储到数据库）然后 response.sendRedirect 到登录页面（重新查询数据以进行显示）是最佳方法吗？

所以：

```
merchant store->checkout.click->servlet.doPost(savePostedData) + servlet.sendRedirect(newUrl)->newUrl.queryData().showOnPage? 
```

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:23:20.700

通过使用 Servlet，我能够实现上述功能。例如，我有结帐 servlet，这就是我所做的：

```
public class CheckoutServlet extends HttpServlet implements Servlet {
    private static final long serialVersionUID = -64282312915404473L;
    @Inject
    private Logger log;

@Override   
protected void doGet(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    doPost(request, response);
}

@Override
protected void doPost(HttpServletRequest request,
        HttpServletResponse response) throws ServletException, IOException {

    Enumeration<String> fields = request.getParameterNames();
    while (fields.hasMoreElements()) {
        String name = fields.nextElement();
        log.debug("field {}={}", name, request.getParameter(name));
    }

    response.sendRedirect("http://www.google.com");
}

} 
```

# jquery - IE 中的 jQuery ajax 调用 - 编码

> ID：10929151
> 
> 赞同：2
> 
> 时间：2012-06-07T09:29:26.157
> 
> 标签：jquery, ajax, post, internet-explorer-9, urlencode

我有一个 ajax POST 请求，其中一些数据被传递到服务器端。这在所有浏览器上都运行良好，但如果我有一些特定的字符，它在 IE9 中会失败。例如，通过 POST 发送“John Smith”可以正常工作，但如果我在 IE9 中尝试“Rafał Szukała”（请注意特定的*l*字母），浏览器无法正确传递它们，因此我最终会收到 band 服务器响应。顺便说一句，Mozilla 可以很好地处理这个字符串。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:38:41.657

我看到您正在通过问题上的标签使用 jquery。因此，如果这是您正在进行的[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)调用，您可以使用`contentType`属性指定数据的内容类型。您需要像 UTF-8 这样的 unicode 类型。

然后需要在服务器端正确解码。

至少这是我最好的猜测。:P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:22:39.767

对我有用的解决方案与 Joseph Marikle 提到的非常接近，还有更多细节：

```
contentType: "application/x-www-form-urlencoded; charset=UTF-8", 
```

# ruby-on-rails - ROR + ActiveAdmin + Carrierwave，上传多张图片后编辑

> ID：10929153
> 
> 赞同：4
> 
> 时间：2012-06-07T09:29:28.940
> 
> 标签：ruby-on-rails, carrierwave, activeadmin

我有一个运行 ActiveAdmin 并使用 CarrierWave 上传图像的 ROR 应用程序。我有一个模型：Product，它允许多个 ProductImage。仅添加新产品并选择要上传的几张图像时，一切似乎都很好。但是，一旦我想编辑该产品，图像似乎并没有实际上传，而且我收到以下错误：

```
undefined method `image_changed?' 
```

我的假设是初始上传并没有做太多，因此最终在编辑时为空。

这是管理员表单的片段：

```
ActiveAdmin.register Product do
  form(:html => {:multipart => true}) do |f|
    f.inputs "Details" do
        f.input :name
        f.input :descr, :label => "Description"
        f.input :brand, :as => :select, :collection => Brand.all, :member_label => :name, :label => "Brand"

      # tags
      f.autocomplete_field :tag_list, '/products/autocomplete_tag_name', :"data-delimiter" => ', '
      f.input :tag_list, :hint => "Comma delimited tags"
    end

    f.has_many :product_images do |pi|
      pi.inputs "Product Images" do
        if !pi.object.nil?
          pi.input :_destroy, :as => :boolean, :label => 'Destroy?'
        end
        pi.input :image_name
        pi.input :image
      end
    end
    f.buttons
  end
end 
```

*编辑*

我还知道一件事，图片确实是在创建帖子时上传的，它的编辑来自那个动作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:58:08.617

不久前我遇到了同样的问题（但使用的是回形针）。解决方案（不明显）是如果用户未在编辑表单中提供密码以确认更新，则图像未更新。

因此，如果您没有尝试此操作，可能值得：在编辑产品时要求用户输入密码，然后查看图像是否正确更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T07:25:08.033

我最近遇到了这个问题。请更新您的表单字段，如下所示。您必须将输入字段设置为文件。

```
pi.input :image, :as => :file 
```

# graphics - 将三角多边形划分为较小的多边形

> ID：10929155
> 
> 赞同：1
> 
> 时间：2012-06-07T09:29:34.230
> 
> 标签：graphics, geometry, triangulation

我有一个多边形，它有 X 个顶点。多边形已经被三角化成 X-2 个三角形。假设多边形有 100000 个顶点。如何将其划分为 2 个多边形，因此其中一个的顶点数为 65535 或更少（不能更大）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:46:09.273

对偶图（每个三角形的节点，相邻三角形的弧）是一棵树。您可以遍历这棵树并跟踪每个节点确定的子树中有多少节点。因为节点的度数最多为三，所以您应该能够实现三分之二的目标。

# c# - 如何在遍历列表时比较 DateTime 对象？

> ID：10929156
> 
> 赞同：0
> 
> 时间：2012-06-07T09:29:35.710
> 
> 标签：c#, datetime, comparison

我正在尝试遍历包含两个字段的列表（csv）；姓名和日期。列表中有各种重复的名称和各种日期。我试图推断列表中的每个名称，其中有多个相同名称的实例，对应的日期是最新的。

通过查看另一个答案，我意识到我需要使用 DateTime.Compare 方法，这很好，但我的问题是确定哪个日期更晚。一旦我知道这一点，我需要生成一个具有唯一名称和与之相关的最新日期的文件。

这是我的第一个问题，这使我成为新手。

编辑：

最初，我认为将 LatestDate 对象设置为不会显示在我的文件中的日期是“可以的”，因此将文件中的任何较晚日期设为 LatestDate。

到目前为止，这是我的编码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace flybe_overwriter
{
class Program
{
    static DateTime currentDate;
    static DateTime latestDate = new DateTime(1000,1,1);
    static HashSet<string> uniqueNames = new HashSet<string>();

    static string indexpath = @"e:\flybe test\indexing.csv";
    static string[] indexlist = File.ReadAllLines(indexpath);
    static StreamWriter outputfile = new StreamWriter(@"e:\flybe test\match.csv");

    static void Main(string[] args)
    {

        foreach (string entry in indexlist)
        {

            uniqueNames.Add(entry.Split(',')[0]);

        }

        HashSet<string>.Enumerator fenum = new HashSet<string>.Enumerator();
        fenum = uniqueNames.GetEnumerator();

        while (fenum.MoveNext())
        {
            string currentName = fenum.Current;

            foreach (string line in indexlist)
            {
                currentDate = new DateTime(Convert.ToInt32(line.Split(',')[1].Substring(4, 4)), 
                                           Convert.ToInt32(line.Split(',')[1].Substring(2, 2)), 
                                           Convert.ToInt32(line.Split(',')[1].Substring(0, 2)));

                if (currentName == line.Split(',')[0])
                { 
                    if(DateTime.Compare(latestDate.Date, currentDate.Date) < 1)
                    {
                      //  Console.WriteLine(currentName + " " + latestDate.ToShortDateString() + " is earlier than " + currentDate.ToShortDateString());
                    }
                    else if (DateTime.Compare(latestDate.Date, currentDate.Date) > 1)
                    {
                     //   Console.WriteLine(currentName + " " + latestDate.ToShortDateString() + " is later than " + currentDate.ToShortDateString());
                    }
                    else if (DateTime.Compare(latestDate.Date, currentDate.Date) == 0)
                    {
                     // Console.WriteLine(currentName + " " + latestDate.ToShortDateString() + " is the same as " + currentDate.ToShortDateString());
                    }

                }
            }

        }

    }
} 
```

}

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:39:42.523

合而为一，在您的 Datetimes 上使用 Max() 函数，而不是进行自己的测试。

```
var result = indexList
        //"transform" your initial list of strings into an IEnumerable of splitted strings (string[])
        .Select(list => list.Split(','))
        //in this new List of string[], select the first part in text, select and Convert the second part in DateTime. 
        //We now have an IEnumerable of anonymous objects, composed of a string and a DateTime Property
        .Select(splittedList => new
                                    {
                                        text = splittedList[0],
                                        date = new DateTime(Convert.ToInt32(splittedList[1].Substring(4, 4)),
                                                            Convert.ToInt32(splittedList[1].Substring(2, 2)),
                                                            Convert.ToInt32(splittedList[1].Substring(0, 2)))
                                    })
        //group that new List by the text Property (one "entry" for each distinct "text"). 
        //GroupBy creates an IGrouping<out TKey, out TElement>, kind of special dictionary, with an IEnumerable<TResult> as "value" part 
        //(here an IEnumerable of our anonymous object)
        .GroupBy(textDateTimeList => textDateTimeList.text)
         //from this grouping, take the "key" (which is the "distinct text", and in the IEnumerable<anonymousObject>, take the Max Date. 
         //We now have a new List of anonymous object, with a string Property and a DateTime Property
        .Select(group => new
                             {
                                 stringField = group.Key,
                                 maxDateField = group.Max(dateField => dateField.date)
                             }); 
```

# .net - 从大型 MS-Access 数据库迁移到新平台

> ID：10929161
> 
> 赞同：1
> 
> 时间：2012-06-07T09:29:54.317
> 
> 标签：.net, wpf, winforms, entity-framework, ms-access

目前我们有一个使用大型 MS Access 数据库作为前端和 SQL Server 后端的应用程序。这种情况已经持续了 10 多年，Access 数据库变得缓慢、笨重且难以维护。

我们计划使用不同的平台创建一个新的前端。计划是在软件中创建一个基本框架，然后在 2-3 年的时间内将每个模块一次一个地慢慢转移到新程序中。

要求

*   快速数据输入——最大的要求，通过电话接单并且数据输入需要尽可能快。
*   报告生成——发票、交货单、管理报告。
*   EPOS 设备和帐户包的链接
*   未来证明——尽可能
*   未来可能用于移动设备和触摸屏，用于生产/发货/盘点。
*   从 XP 开始在 Windows 平台上运行。

经验

*   Windows 窗体
*   VB.Net 3.5
*   SQL 服务器

鉴于要求和我们作为一家公司的经验，我想知道人们认为什么是最好的技术？你会使用 Windows 窗体吗？WPF？实体框架？.Net 4.0？

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:32:08.787

我绝对喜欢 WPF 而不是 Forms。XAML 有点学习曲线，但对我来说更容易编码和维护。如果您有一个大型团队（甚至是小型团队），请考虑使用 MVVM。对 EF 不予置评。像现在一样检查您的 SQL 表设计，如果需要进行任何调整。WCF - 你要去 3 层？

# python - 导入 F2Py 模块时如何“捕获”段错误？

> ID：10929162
> 
> 赞同：3
> 
> 时间：2012-06-07T09:30:09.807
> 
> 标签：python, import, module, segmentation-fault, f2py

**一些背景，其相关性可能会波动：**

我目前拥有一些 F2Py 库 - 由 F2Py 从一些 Fortran 代码编译的 Python 模块。出于所有意图和目的，您可以将这些模块视为“第三方”；我目前无权访问 Fortran 源代码，也不负责编译过程。

模块本身被导入到我正在帮助开发的程序中，该程序具有 Python 脚本支持并在多个平台上运行。

我试图防止将来由于编译机器上的库版本和用户机器不同步而导致的兼容性问题引起的崩溃。一个问题已经发生，我们用户的一台机器已更改为不兼容的 numpy 版本，这导致在导入模块时启动时出现不可接受的 seg 错误。

**问题：**

我正在寻找一种导入 F2Py 模块的方法，但是这样我就可以处理由于模块可能依赖的库版本不兼容而可能发生的任何 seg 错误。我目前在调用导入之前检查 numpy 版本，但我宁愿先导入，然后再“捕获”任何问题：

```
try:
    import module_name
except SegFault:
    # Deal with it. 
```

是否有可能捕获 seg 错误 -*特别是由于导入而导致的*错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:41:13.570

Segfault 也不例外，它是一个[信号](http://docs.python.org/library/signal.html)。您可以通过为信号分配处理程序来“捕获”信号。

```
import signal

def sig_handler(signum, frame):
    #deal with the signal.. 

signal.signal(signal.SIGSEGV, sig_handler) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:21:45.143

尝试在子进程中导入模块怎么样？

例如 subprocess.call("python -c 'import module_or_modules_in_question'")

或者您可以启动一个多处理作业并在单独的作业中一个一个地导入模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-29T10:55:34.750

如[vartecs answer](https://stackoverflow.com/a/10929333/974555)中所述，您通常无法捕获分段错误。但是，如果您正在寻找因分段错误而失败的代码并且您不确定它发生在哪里，您可以使用[`faulthandler`](https://docs.python.org/dev/library/faulthandler.html)从 Python 3.3 开始可用的模块。这不会捕获错误，但它至少会显示回溯，这可能会帮助您查明原点。从文档中：

> ```
> $ python3 -c "import ctypes; ctypes.string_at(0)"
> Segmentation fault
> 
> $ python3 -q -X faulthandler
> >>> import ctypes
> >>> ctypes.string_at(0)
> Fatal Python error: Segmentation fault
> 
> Current thread 0x00007fb899f39700 (most recent call first):
>   File "/home/python/cpython/Lib/ctypes/__init__.py", line 486 in string_at
>   File "<stdin>", line 1 in <module>
> Segmentation fault 
> ```

# .net - 为什么 COM 互操作优先于 .NET 中的 P/Invoke？

> ID：10929164
> 
> 赞同：8
> 
> 时间：2012-06-07T09:30:25.860
> 
> 标签：.net, com, interop, pinvoke

在我们的项目中，我们在我们的 asp.net 应用程序中通过 COM 重用了很多 Delphi 代码。

像这样：legacy delphi dll => delphi COM wrapper => .Net interop => asp.net (mvc)

我们在访问冲突、dll 卸载等方面存在一些问题......我现在已经移植了一些以直接通过 P/Invoke 代码使用旧版 dll。

当我查看有关 COM 和 P/Invoke 的资源时，人们几乎总是建议使用 COM。这是为什么？P/Invoke 没有以下好处：

*   签出的代码将始终使用正确的 dll，而不是最后注册的 COM
*   多个版本可以在服务器上并行运行（例如：DEV、TEST 和 QA）
*   没有更多的 COM 注册麻烦
*   比 COM 通信快得多（我读过的文章表明速度提高了 30%）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T10:34:39.330

PInvoke 是一个非常好的工具，但它肯定不能替代 COM。PInvoke 仅支持具有 C 语法的简单函数；COM 允许您实现对象模型。以`Microsoft.Office.Interop`命名空间中的类为例——它们都是没有包装器的纯 COM 类。使用 PInvoke 进行 Office 互操作将非常痛苦。

PInvoke 的另一个核心问题是，编写声明通常是客户端程序员（最不可能正确处理它们的人）的负担。COM 作者可以发布自动生成的类型库，就像 .NET 程序集中的元数据一样，极大地消除了出错的可能性，并且客户端程序员无需在 Project > Add Reference 之外进行任何工作。

解决你的子弹：

*   签出的代码将始终使用正确的 DLL，而不是最后注册的 COM
    您仍然受制于 Windows 的变幻莫测，无法找到正确的 DLL。避免意外的唯一好方法是将DLL与EXE存储在同一目录中，这在COM中也很可能；您所要做的就是创建一个名为的空文件`yourapp.exe.local`

*   多个版本可以在服务器上并行运行（例如：DEV、TEST 和 QA）
    在 COM 中也不是问题，使用上述技术或使用无注册清单。

*   没有更多的 COM 注册麻烦
    使用无注册清单，因此不需要注册。做起来很简单——只需将`Isolated`引用的属性设置为`True`.

*   比 COM 通信快得多（我读过的文章表明速度提高了 30%）
    它比 COM*慢得多。*通过 ; 进行后期绑定的 COM 调用可能会产生额外费用`IDispatch`；这与使用反射进行调用的成本大致相同。

* * *

还有第三种实现本机代码互操作的方法：用 C++/CLI 语言编写托管类包装器。该技术在 .NET 框架中大量使用，特别是在 mscorlib.dll、System.Data 和 PresentationFramework 中，这些程序集对本机代码具有很强的依赖性。但是，不太适合 Delphi；它最适合可以从 C 或 C++ 轻松调用的本机代码。

# java - 无法使用 asmack.jar 启动活动

> ID：10929169
> 
> 赞同：1
> 
> 时间：2012-06-07T09:30:47.107
> 
> 标签：java, android, eclipse

我有以下奇怪的问题。

我的主要活动如下所示：

```
public class CityGame extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent myIntent = new Intent(this, XMPPClient.class);
    startActivity(myIntent);

 }
} 
```

我删除了代码以找出问题所在。上面的代码只是直接跳转到 XMPPClient 活动。XMPPClient 活动正在使用 asmack.jar 库，并且该库已添加到我的 Eclipse 构建路径中。

XMPPClient 活动代码：

```
public class XMPPClient extends Activity {

/**
 * Called with the activity is first created.
 */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.i("XMPPClient", "onCreate called");

    //Create a connection to the jabber.org server.
    Connection conn1 = new XMPPConnection("jabber.org");
    try {
        conn1.connect();
    } catch (XMPPException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}
} 
```

当我从 asmack.jar 库中调用函数时会出现问题。例如，`conn1.connect();`我的应用程序一次又一次地崩溃。我收到如下错误：

```
06-07 09:05:03.085: E/AndroidRuntime(538): FATAL EXCEPTION: main
06-07 09:05:03.085: E/AndroidRuntime(538): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.joop.citygame/com.joop.citygame.XMPPClient}: android.os.NetworkOnMainThreadException
06-07 09:05:03.085: E/AndroidRuntime(538):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1955)
06-07 09:05:03.085: E/AndroidRuntime(538):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1980)
06-07 09:05:03.085: E/AndroidRuntime(538):  at android.app.ActivityThread.access$600(ActivityThread.java:122) 
```

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.joop.citygame"
android:versionCode="1"
android:versionName="1.0" >

<uses-permission android:name="android.permission.INTERNET" />

<uses-sdk android:minSdkVersion="14" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name" 
        android:name=".CityGame" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:label="@string/app_name"
        android:name=".XMPPClient" >
        <intent-filter>
            <action android:name="com.joop.citygame.XMPPClient" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

有人知道我做错了什么吗？

信息：API 级别 14

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:46:13.823

// 你需要在你的 manifest 文件中添加 XMPPClient 这个活动

并添加网络权限

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

//需要提到like this not like`("jabber.org")`

```
Connection conn1 = new XMPPConnection("http://www.jabber.org"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:52:37.213

建立远程连接可能需要很长时间。您正在尝试直接从活动建立连接，默认情况下，此活动绑定到 UI 线程。

结果，只要您的活动试图建立连接，用户界面就会被阻止。用户无法按下任何按钮，屏幕被冻结。

通过抛出[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html)，android 操作系统会强制您更改实现并强制您从另一个线程建立连接。

总而言之，您不应该尝试从 UI 线程建立远程连接。尝试从[IntentService](http://developer.android.com/reference/android/app/IntentService.html)或[Service](http://developer.android.com/reference/android/app/Service.html)建立它。如果您真的想从活动中建立它，请尝试使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)或[HandlerThread](http://developer.android.com/reference/android/os/HandlerThread.html)。

**编辑：**看看android [StrictMode](http://developer.android.com/reference/android/os/StrictMode.html)：

> StrictMode 最常用于捕获应用程序主线程上的意外磁盘或网络访问，其中接收 UI 操作并发生动画。

它可能已为您的应用程序启用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T20:40:13.823

主线程中不允许 IO。您需要创建一个 AsyncTask 并在那里运行您的连接代码。

# regex - 使用正则表达式捕获 slug1/slug2/slug3 页面的正确方法？

> ID：10929170
> 
> 赞同：1
> 
> 时间：2012-06-07T09:30:50.463
> 
> 标签：regex, nested-urls

我正在尝试使用此重新模式从文本`r'\({2}.+?\){2}'` 中捕获表达式。`((slug1/slug2/slug3 someword))`

它给了我整个表达本身，即`'((slug1/slug2/slug3 someword))'`。然后我用它来解析它`Python:split`来获取`slug1/slug2/slug3`和`someword`分开。

如何使用带有组的纯正则表达式模式获得相同的结果。应该是什么模式？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:07:57.770

假设 slug 不能包含空格：

```
\({2}(\S*)\s(.*?)\){2} 
```

更明确地说：

```
\({2}  # two literal '(' characters
(\S*)  # any number of non-whitespace characters, captured in group 1
\s     # any whitespace character
(.*?)  # any number of characters, reluctantly, captured in group 2
\){2}  # two literal ')' characters 
```

所以`slug1/slug2/slug3`将在第 1 组和`someword`第 2 组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:08:17.893

我想出了这个正则表达式：

```
/([\w\/]+) (\w+)/ 
```

它使用以下命令正确评估：

```
perl -e '$a="((slug1/slug2/slug3 someword))"; if ($a =~ /([\w\/]+) (\w+)/) {print "$1 $2"}' 
```

# iphone - 当我调用 UIDocumentInteractionController 方法“presentOpenInMenuFromRect:inView:animated:”时 iPad 应用程序崩溃

> ID：10929172
> 
> 赞同：2
> 
> 时间：2012-06-07T09:30:56.377
> 
> 标签：iphone, ios, ipad

这是我的代码： 在 iPad 中，它在 iPhone 中崩溃，列表正在出现，但所选应用程序没有打开。

```
- (void)openIn:(NSURL *)fileFullPath {
    docController = [UIDocumentInteractionController interactionControllerWithURL:fileFullPath];
    [docController setDelegate:self];

    BOOL isOpen = [docController presentPreviewAnimated:YES];

    if (isOpen == NO) {
        BOOL isOpenIn = [docController presentOpenInMenuFromRect:CGRectMake(300, 300, 100, 100) inView:self.view animated:NO];

        if(isOpenIn == NO) {
            return ;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T22:21:18.970

根据 Lupos 的回答，为我的 docController 定义一个实例变量解决了您所看到的相同问题。

我没有足够的声誉来评论他的回答。

```
// In your .h file
@property (nonatomic, strong) UIDocumentInteractionController *docController;

// When calling in your .m
docController = [UIDocumentInteractionController interactionControllerWithURL:fileFullPath]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T15:45:06.867

如果它仍然相关，则问题可能是 UIDocumentInteractionController 已从内存中释放。尝试将其定义为实例变量。

# php - 连接到 MySQL 数据库的安全方式

> ID：10929177
> 
> 赞同：1
> 
> 时间：2012-06-07T09:31:08.750
> 
> 标签：php, mysql

我正在为一小部分人（50-60 岁）管理一个网站。该网站有一个简单的登录，所有用户数据都存储在 MySQL 数据库中，并且该网站由著名的 webhotel 托管。

我现在连接数据库的方式是通过单个用户帐户，在数据库中指定具有读取和更改权限，以确保每个用户都可以更改自己的密码。脚本 (mysql_conn.php) 包含在所需的页面中，如下所示：

```
$server = "server_name";
$username_sql = "user@servername"; // This format is specific for that webhotel
$password_sql = "A_strong_password";    // Hard coded in the file

$conn = mysql_connect($server, $username_sql, $password_sql);
$db = mysql_select_db("user_list", $conn);
mysql_query("SET NAMES Utf8");
if(!$db) {
    echo "Error message";
exit();
} 
```

从技术上讲，它就像一个魅力，但我不确定这是最好的方法，尤其是密码。另外，我是否应该在每页末尾包含某种数据库断开连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:44:16.550

首先，不建议对新代码使用 mysql_*，请参阅[PHP Introduction ot MySQL](http://www.php.net/manual/en/intro.mysql.php) 如果可能，请考虑切换到 PDO。

其次，在 PHP 中存储密码非常安全，甚至比将密码保存为 xml 或 ini 等纯文本更安全。除非您的 Web 服务器出现故障并且无法提供 PHP 页面，否则直接运行您的 PHP 脚本（或通过 Web 访问它）浏览器）永远不会公开密码（与 xml/ini 文件相反）。

考虑将密码存储在一些无法从 Web 浏览器访问的 config.php 中（即位于公共根目录之上的某个位置）。

唯一可能劫持您的密码的情况是您的网络服务器被黑客入侵，但在这种情况下，无论您如何保存密码（除非其加密），它都会被劫持。

如果您决定切换到 PDO，请注意，如果连接失败，则 PDO 会抛出[PDOException](http://www.php.net/manual/en/class.pdoexception.php)，如果 php 配置为显示错误，则会泄露您的密码。请参阅[相关的错误](https://bugs.php.net/bug.php?id=34628)。所以请谨慎使用！

祝你好运 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:37:07.377

我会将登录数据外包到一个名为“dbConnection.inc.php”之类的文件中，并将其存储在一个无法从外部访问的目录中。

在极端情况下，您的提供商可能会以纯文本形式提供 .php 页面。如果发生这种情况，访问者可能会看到您的密码。但如果它被超越，你会阻止它......

# spring - 加载资源包：Spring

> ID：10929179
> 
> 赞同：2
> 
> 时间：2012-06-07T09:31:16.397
> 
> 标签：spring, resourcebundle

我正在尝试在 Spring 中使用 ResourceBundleMessageSource。这是我的项目结构： ![在此处输入图像描述](../Images/cb14aea76d2319ffec08a7841c22f723.png)

这是xml配置：

```
<bean name="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
    <property name="basename">
        <value>messages</value>
    </property>
</bean> 
```

当我尝试加载应用程序上下文时，出现以下异常：

```
Jun 7, 2012 2:44:00 PM org.springframework.context.support.ResourceBundleMessageSource getResourceBundle
WARNING: ResourceBundle [messages] not found for MessageSource: Can't find bundle for base name messages, locale en_US
Exception in thread "main" org.springframework.context.NoSuchMessageException: No message found under code 'user.welcome' for locale 'en_US'.
    at org.springframework.context.support.AbstractMessageSource.getMessage(AbstractMessageSource.java:135)
    at org.springframework.context.support.AbstractApplicationContext.getMessage(AbstractApplicationContext.java:1192)
    at com.pramati.core.MessageResolver.getMessage(MessageResolver.java:19) 
```

如果我将资源包文件直接放在资源文件夹下，则不会出现此错误。它工作正常。有人可以告诉我如何通过将资源包放在 src/main/resources 的子目录中来完成这项工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T09:34:33.600

您需要在此处提供文件夹名称 -

```
<property name="basename">
      <value>resourceBundles/messages</value>
</property> 
```

# powershell - 不同的结果集 search-adaccount 和 get-aduser

> ID：10929181
> 
> 赞同：0
> 
> 时间：2012-06-07T09:31:17.690
> 
> 标签：powershell

我正在构建一个创建 4 个列表的脚本：AD 用户和已停用 x 天的计算机以及已禁用 x 天的用户和计算机。

我已经在 vbscript 中有这样的脚本，但目前我正在 Powershell 中重写它，我的结果与“已禁用 x 天的用户和计算机”不同。

我使用 Search-ADAccount 来查找我的结果。事实证明 LastModifiedDate 的返回值不正确。（我用它来检查“禁用天数”值）。我用 Get-ADUser 构建了一个命令，它应该返回相同的数据集。该结果集确实具有 LastModifiedDate 的正确值。

所以我将重写我的脚本以使用 Get-ADUser 和 Get-ADComputer 而不是 search-adaccount。但我想知道为什么它不同。如果我在我的工作站或服务器上运行它也没关系。（所以这不是客户问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T18:17:18.263

Search-ADAccount 需要指定时间参数。在此处查看有关搜索非活动帐户的详细信息：[http ://technet.microsoft.com/en-us/library/ee617247.aspx](http://technet.microsoft.com/en-us/library/ee617247.aspx)

我没有使用过这个 cmdlet，但我使用 Get-ADUser 取得了相当大的成功。

无论如何，我想还需要指定 -timedate 或 -timespan 参数来搜索 LastModifiedDate 属性。我不确定。只是一个想法。

# debugging - 我遇到的最奇怪的事情：ESI 寄存器在赋值后立即得到一个无效值

> ID：10929183
> 
> 赞同：1
> 
> 时间：2012-06-07T09:31:18.377
> 
> 标签：debugging, assembly, crash-dumps, cpu-registers

我们有一个在 Windows 7 上运行的服务器进程，它用 C++ 编写，具有多个线程。我们只是在一个简单的任务中随机崩溃，请参阅以下说明：

```
--- some function without the source:
0136E0F0  mov         eax,dword ptr [esp+8]
0136E0F4  mov         edx,dword ptr [esp+0Ch] 
0136E0F8  push        esi  
0136E0F9  mov         esi,dword ptr [ecx+10h]          << read a member variable to esi
0136E0FC  add         dword ptr [ecx+esi*8+30h],eax    << access violation here!
...
... 
```

奇怪的是，当崩溃发生时，[ecx+10h] 的值为 0 但 ESI 是一个非零的无效值！然后最后一条指令尝试写入无效内存！（我们从故障转储文件中检查了它们）。**这意味着，ecx 的对象是有效的，但寄存器已损坏！！！**也许我错了，但操作系统会在切换线程时保留所有寄存器，对吧？

所以我的问题是，这里到底发生了什么以及如何解决它？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T18:19:33.753

还有什么其他代码在 ecx+10h 处弄乱了数据？

从内存到 esi 的 mov 和后来的 esi 使用之间有很大的空间，因为内存已经改变了。然后看起来好像 esi 应该有一个很好的价值。

想象一下，在从该位置读取 0(?) 之后，一个不同的线程或中断介入以在 ecx+10h 处放置有效的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T12:49:21.303

这些“不可能的”错误有一个很常见的原因：硬件故障。CPU可能会失败或太热。

这种情况发生的频率比人们想象的要多。硬件不工作或不工作。除了 1e10 机会中的一种情况外，它可以大部分工作。

# java - JVM 是否有能力检测并行化机会？

> ID：10929184
> 
> 赞同：14
> 
> 时间：2012-06-07T09:31:22.570
> 
> 标签：java, multithreading, parallel-processing, jvm

Java Hotspot 可以很好地优化顺序代码。但我猜测随着多核计算机的出现，运行时的信息是否可以用于检测在运行时并行化代码的机会，例如检测软件流水线是否可能在循环和类似的事情中。

在这个主题上做过任何有趣的工作吗？还是研究失败或一些难以解决的停滞问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T10:08:00.607

[我认为Java 内存模型](http://en.wikipedia.org/wiki/Java_Memory_Model)的当前保证使得很难在编译器或 VM 级别上做很多（如果有的话）自动并行化。Java 语言没有语义来保证任何数据结构甚至是有效的不可变的，或者任何特定的语句都是纯粹的并且没有副作用，因此编译器必须自动计算出这些以实现并行化。在编译器中可以推断出一些基本的机会，但一般情况将留给运行时，因为动态加载和绑定可能会引入编译时不存在的新突变。

考虑以下代码：

```
for (int i = 0; i < array.length; i++) {
    array[i] = expensiveComputation(array[i]);
} 
```

并行化是微不足道的，如果`expensiveComputation`是一个[纯函数](http://en.wikipedia.org/wiki/Pure_function)，它的输出只取决于它的参数，如果我们可以保证`array`在循环期间不会改变（实际上我们正在改变它，设置`array[i]=...`，但在这种特殊情况下`expensiveComputation(array[i])`总是首先被调用，所以在这里没关系 - 假设它`array`是本地的并且没有从其他任何地方引用）。

此外，如果我们像这样改变循环：

```
for (int i = 0; i < array.length; i++) {
    array[i] = expensiveComputation(array, i);
    // expensiveComputation has the whole array at its disposal!
    // It could read or write values anywhere in it!
} 
```

那么并行化不再是微不足道的，即使`expensiveComputation`是纯粹的并且不会改变它的论点，因为并行线程*会*`array`在其他人正在阅读它的时候改变它的内容！并行器必须确定在各种条件下引用数组的*哪些部分，并相应地进行同步。*`expensiveComputation`

也许检测所有可能发生的突变和副作用并在并行化时将其考虑在内并非完全*不可能，但肯定会**非常*困难，在实践中可能不可行。这就是为什么并行化以及确定一切仍然正常工作是 Java 程序员最头疼的原因。

函数式语言（例如 JVM 上的 Clojure）是这个主题的热门答案。纯粹的、无副作用的函数与[持久](http://en.wikipedia.org/wiki/Persistent_data_structure)（“有效地不可变”）数据结构一起可能允许隐式或几乎隐式并行化。让我们将数组的每个元素加倍：

```
(map #(* 2 %) [1 2 3 4 5])
(pmap #(* 2 %) [1 2 3 4 5])  ; The same thing, done in parallel. 
```

这是透明的，因为有两件事：

1.  这个函数`#(* 2 %)`是纯粹的：它接受一个值并给出一个值，就是这样。它不会改变任何东西，它的输出只取决于它的论点。
2.  向量`[1 2 3 4 5]`是不可变的：无论谁在看它，或者什么时候看，它都是一样的。

可以在 Java 中创建纯函数，但是 2) 不变性是这里的致命弱点。*Java 中没有不可变的数组。*学究起来， Java 中*没有什么*是不可变的，因为甚至`final`可以使用反射来更改字段。因此，不能保证计算的输出（或输入！）不会因并行化而改变 -> 因此自动并行化通常是不可行的。

由于不变性，愚蠢的“加倍元素”示例扩展到任意复杂的处理：

```
(defn expensivefunction [v x]
  (/ (reduce * v) x))

(let [v [1 2 3 4 5]]
  (map (partial expensivefunction v) v)) ; pmap would work equally well here! 
```

# algorithm - 两个数组是否相互排列？

> ID：10929185
> 
> 赞同：5
> 
> 时间：2012-06-07T09:31:30.297
> 
> 标签：algorithm, math

> **可能重复：**
> [检查数组 B 是否是 A 的排列](https://stackoverflow.com/questions/10639661/check-if-array-b-is-a-permutation-of-a)

给定 2 个大小相等的`a`未排序整数数组。`b`确定是否`b`是 的排列`a`。这可以在`O(n) time`and中完成`O(1) space`吗？

我想到的第一个解决方案是使用`XOR`, 即`XOR all the elements of a and b and if the resultant is 0 which means that b is a permutation of a`. 但他给出了这种方法失败的例子。例如 -

```
a: [1 6 0 0 4] -- b: [1 0 6 1 5]
a: [1 6 0 0 5] -- b: [1 0 6 1 4] 
```

任何人有任何想法，如何做到这`O(n) time`一点`O(1) space`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:10:20.887

在整数的有界范围的情况下 - 让该范围可以`[n,m]`使您可以使用[就地基数排序](http://en.wikipedia.org/wiki/Radix_sort#In-place_MSD_radix_sort_implementations)`m-n = U`对数组进行排序，也在[这篇精彩的帖子](https://stackoverflow.com/questions/463105/in-place-radix-sort)中进行了讨论。

在你有两个排序数组之后 - 对两者的简单迭代可以给你答案 - 当且仅当排序数组相同时，原始数组是彼此的排列。

**注意：**
这个答案中有一些“作弊”[因此我没有发布它，直到 OP 在评论中要求它..]，因为它的时间复杂度是`O(nlogU)`，而空间是`O(logU)`. 然而，对于有界范围——我们可以假设`O(logU) = O(1)`，对于这些情况，我们得到`O(n)`时间和`O(1)`空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:33:47.380

您的异或解决方案基本上是基于散列的解决方案，但使用质量较差的散列函数。

你想要的是一个哈希函数......

1.  给出*极*不可能发生冲突的哈希值，因此它们可以被视为整数的唯一标识符。Git 使用 SHA-1 哈希来识别源代码版本，冲突的概率非常低，可以忽略不计。

2.  可交换（如 xor 和 plus）并且可能是关联的，因此项目的顺序不会改变生成的哈希值。

第二个要求可能是尴尬的。我在谷歌呆了一点时间，但只是害怕“准群”之类的词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:44:19.730

如果您的 set 元素是非负数，并且您有可用的无界整数类型（a`BigInteger`或类似），则可以在 set 上定义一个函数`A`：

`C(A) = product(p_(a+1)))`对于每个`a`在`A`

哪里`p_n`是第`n`th 素数。然后`C`仅取决于 中的*值*，`A`而不是它们的顺序；并且对值的任何更改都会更改`C`。

例如，

```
C([1 6 0 0 4]) = p_2.p_7.p_1.p_1.p_5 = 3.17.2.2.11 = 2244 
```

（显然任何具有相同元素的集合都具有相同的`C`，无论顺序如何），并且

```
C([1 6 0 1 4]) = p_2.p_7.p_1.p_2.p_5 = 3.17.2.3.11 = 3366 
```

所以我们知道这些集合是不同的。这使用了算术基本定理，该定理指出任何大于 1 的整数都可以写成素数的唯一乘积（直到因子的排序）。或者它使用了一个推论。这个方法我刚编出来的，可能行不通。这篇文章并不是试图证明其正确性......

# html - 将单独的 div 置于彼此之上的正确方法？

> ID：10929186
> 
> 赞同：0
> 
> 时间：2012-06-07T09:31:34.643
> 
> 标签：html, css, positioning

我正在尝试改变它：

[http://jsfiddle.net/pljehyun/jqUg3/](http://jsfiddle.net/pljehyun/jqUg3/)

进入这个：

![在此处输入图像描述](../Images/b3bad820dcef920e31e64c2de85eb72e.png)

（这个问题主要关心的是div的定位）

到目前为止，我已经完成了各个元素并遇到了一些问题：

类似问题的回答者说我需要对悬停的 div 进行绝对定位，但我也计划更改“外部”div 的不透明度。如果我嵌套了 div，这将导致表单的输入字段也变得半透明，因为它是孩子。

我应该如何分层两个单独的 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:19:53.253

看到这个更新[的 jsfiddle](http://jsfiddle.net/jqUg3/1/)，我将编辑我的答案以稍后放置代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:57:40.803

你必须坚持你的 HTML 还是你可以改变它？

你应该定义。确保至少使用正确的 HTML（请参阅`span`永远不会关闭的标签）。

我不确定这是否是您尝试实现的目标，但这似乎是一种更简单的方法来获得看起来像您图片的结果：

[http://jsfiddle.net/jqUg3/6/](http://jsfiddle.net/jqUg3/6/)

编辑：还添加了一个样式为 +/- 的示例，如您的图片：

[http://jsfiddle.net/jqUg3/8/](http://jsfiddle.net/jqUg3/8/)

# php - 打印后如何更改表格属性

> ID：10929187
> 
> 赞同：0
> 
> 时间：2012-06-07T09:31:35.240
> 
> 标签：php, css, html-table

我正在使用以下 PHP 代码打印表格：

```
echo '<table> ';

echo '<tr>';

echo '<td> Cell 1';
echo '</td>';

echo '<td '.$myStyle.'> Cell 2';
echo '</td>';

echo '</tr>';

echo '</table> ';

$myStyle = 'style="color:red"'; 
```

我的问题是`$myStyle`单元格属性没有赋予单元格，除非它放在它之前。有没有办法在设置后刷新表格`$myStyle`以便采用新属性？我希望它以一种我保持`$myStyle`变量的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:35:49.087

在客户端使用`jquery`OR来完成此操作。`Javascript`

设置目标的 ID 或类属性，`td`然后应用以下 jquery，如

html:

```
echo '<td id="mytd"> Cell 2 </td>'; 
```

jQuery：

```
$(document.ready(function(){
$("#mytd").css("color","red");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:56:45.370

如果您在生成表格时不知道单元格使用哪种样式设置，那么最好修改页面生成，可能使用输出缓冲（笨拙的解决方案）。如果做不到这一点，您可以只`<td class=foo>`在标记中生成，然后，当您知道为单元格设置的内容时，生成一个 HTML 元素，例如

```
<style>
.foo { color: red; }
</style> 
```

这违反了 HTML 语法规则，因为`style`元素将在`body`元素内部，但它实际上在浏览器中有效——这样的元素中的设置会影响文档，甚至影响它之前的元素。

但这当然只是一个丑陋的解决方法，适用于体面的解决方案不适用的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:48:47.530

使用`error_reporting(E_ALL)`，你会看到

```
Notice: Undefined variable: myStyle in/ss.php on line 10
Cell 1  Cell 2 
```

**将此变量放在脚本的顶部**

```
<?php
error_reporting(E_ALL);

$myStyle = 'style="color:red"';

echo '<table> ';

echo '<tr>';

echo '<td> Cell 1';
echo '</td>';

echo '<td '.$myStyle.'> Cell 2';
echo '</td>';

echo '</tr>';

echo '</table> '; 
```

# c# - 在 .dlls 中嵌入 .dlls - 在 C# 中解析程序集

> ID：10929188
> 
> 赞同：2
> 
> 时间：2012-06-07T09:31:36.850
> 
> 标签：c#, dll, embedded-resource

作为[该](https://stackoverflow.com/questions/10927402/embedding-dlls-assembly-resolving-in-c-sharp)线程的后续，是否可以将 .dll 作为嵌入式资源嵌入到 .dll 中？

也就是说，如果Wrapper.dll依赖Wrapped.dll，而Wrapper.dll是Game.exe的内嵌资源，那么是否可以让Wrapped.dll成为Wrapper.dll中的内嵌资源呢？

或者，如果不可能，是否有一个可接受的替代品使用不需要 Game.exe 了解 Wrapped.dll 的嵌入式资源？

专门寻找使用嵌入式资源的方法；这在一定程度上是一种学习练习。

这个线程：

[将一个 dll 作为嵌入式资源嵌入到另一个 dll 中，然后从我的代码中调用它](https://stackoverflow.com/questions/96732/embedding-one-dll-inside-another-as-an-embedded-resource-and-then-calling-it-fro)

似乎表明 Wrapped.dll 将使用该线程前驱中讨论的方法自动加载为嵌入式资源 .dll。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:40:40.010

我不认为它会像你想要的那样工作。首先，我认为您必须尝试将程序集提取为二进制数据并将其写入您的 bin，以便融合引擎实际上可以找到并加载程序集。所有这一切都在任何尝试引用嵌入式 DLL 中的类型之前。

您可以改用[ILMerge](http://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)将多个程序集合并为一个。无需资源，无需费力尝试将程序集加载到应用程序域中。

# ios - IOS：捷克国家代码错误

> ID：10929189
> 
> 赞同：0
> 
> 时间：2012-06-07T09:31:48.080
> 
> 标签：ios, country-codes

我想我在 iOS 捷克语联系人中发现了一个错误。我创建了一个捷克联系人（与*捷克共和国*国家），我在我的应用程序中使用 ABPeoplePickerNavigationController 选择了该联系人。

ABPeoplePickerNavigationController 返回给我的地址日志是：

```
"Country" : "Czech Republic"
"Street" : "A street"
"CountryCode" : "cs"
"City" : "A city"
"ZIP" : "12345" 
```

所以国家代码是CS。但是当我尝试检索相应的名称时，

```
NSString *countryCode = [address objectForKey:(NSString *)kABPersonAddressCountryCodeKey];
if (countryCode != nil) {
    NSString *countryName = [[NSLocale currentLocale] displayNameForKey:NSLocaleCountryCode value:countryCode];
    name = [[applicationDelegate dataManager] objectForEntityForName:@"Name" withValue:countryName forKey:@"name"];
} 
```

`name`给我：“塞尔维亚和黑山”！

根据[http://countrycode.org/](http://countrycode.org/)，捷克国家代码是CK，根据[http://xml.coverpages.org/country3166.html，CS](http://xml.coverpages.org/country3166.html)是捷克斯洛伐克，但“不再存在”

我在 Apple 怎么讲？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:01:06.970

您正在混淆国家代码 (ISO 3166-X) 和语言代码 (ISO 639-X)。根据 ISO 639-1，捷克语的语言代码是“CS”。

[http://en.wikipedia.org/wiki/List_of_ISO_639-2_codes](http://en.wikipedia.org/wiki/List_of_ISO_639-2_codes)

注意：很久以前，这也曾经是 ISO 3166-1 中前“捷克斯洛伐克”的国家代码，但由于以下原因，它已多次更改和重新分配（例如，塞尔维亚和黑山，现在是“YU”）政治变化。

# java - 如何确定已传递的消息使用 Eclipse paho for MQTT 客户端。

> ID：10929190
> 
> 赞同：1
> 
> 时间：2012-06-07T09:31:51.313
> 
> 标签：java, mqtt

通过使用 paho(java) 构建我自己的 MQTT 客户端。我想在消息传递时执行相同的操作。所以我想实现`MqttCallBack`和使用方法`deliveryComplete`。但是我发现应该将`MqttMessage`in`MqttDeliveryToken`设置为`null`一旦消息已经传递.

所以我的问题是有什么方法可以确定发送了哪条消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:43:58.387

见：[http ://dev.eclipse.org/mhonarc/lists/paho-dev/msg00099.html](http://dev.eclipse.org/mhonarc/lists/paho-dev/msg00099.html)

# azure - 使用 HTTP 访问容器并列出内容

> ID：10929191
> 
> 赞同：1
> 
> 时间：2012-06-07T09:31:53.920
> 
> 标签：azure, azure-storage, azure-blob-storage

如何在 Windows azure 中访问容器并使用 http 列出 blob？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:39:57.967

试试`myblobstorage.blob.core.windows.net/mycontainer?restype=container&comp=list`。

请查看[此参考文章](http://msdn.microsoft.com/en-us/library/windowsazure/dd135734.aspx)，了解有关 List Blob API 的更多信息。

# asp.net - ASP.NET razor web 应用程序和 aspx web 应用程序的区别

> ID：10929192
> 
> 赞同：1
> 
> 时间：2012-06-07T09:32:20.663
> 
> 标签：asp.net, asp.net-mvc, razor

正如我读到很多关于剃须刀的内容，大多数人都说剃须刀应用程序代码更具可读性、干净和清晰，但是何时以及为什么需要它我的意思是说微软在 razor Web 应用程序和 mvc razor 应用程序背后还有其他目的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:47:10.190

我相信你误解了 Razor 背后的原因。你更喜欢什么只是口味问题。有些人不喜欢传统的 aspx 语法，所以他们想出了带有简化语法的 Razor。

[http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx)

不要相信还有什么比性能方面或类似的东西......它只是不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:53:51.283

## Razor 只是语法

与其写那些多余的`<% ... %>`，不如直接写`@...`。Razor 视图引擎会自动解析视图的可执行部分。

这就是 Razor 视图通常比 Web 表单视图短的原因。但正如@walther 所说，这是一个品味问题，虽然你很快就被 Razor 迷住了，并且在使用一段时间后不想回去。

## 应用？

没有 Razor Web 应用程序之类的东西。它可以是带有 Razor 视图的 Asp.net MVC 应用程序，也可以是带有 Razor 语法的 Asp.net 网页......它们中的每一个都可以与长期存在的 Web 表单视图引擎一起使用......

## 比喻

想象一下在纸上或 iPad 上阅读杂志。您会阅读相同的内容，但体验会有所不同。这就是 Razor 的全部意义所在。应用平台相同。只是视图引擎不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:52:31.703

1) aspx 应用程序架构已预先配置好使用的所有内容，而且很重。asp.net razor 或 asp.net MVC 预先配置了最少的项目以供使用，并且
使用效率更高。您在 MVC 中需要时加载项目

2）aspx 具有不可测试的视图。但是 MVC 的视图是可测试的。

3）mvc 在您用于开发的基本 razor \ mvc 标签中有更多内置验证，因此可以比 aspx 更干净

4）aspx 不会强迫您制作结构化的最终产品，但 MVC 会迫使您遵循结构，因此使最终产品更加干净和有条理。结构化编程总是有很多优点。

等等..

# javascript - 如何在同一循环中按 Id 定位循环元素？

> ID：10929196
> 
> 赞同：1
> 
> 时间：2012-06-07T09:32:28.620
> 
> 标签：javascript, javascript-events

这就是我想要做的：

```
var numArray = ["One","Two","Three","For","Five","Six"];

for (i = 0, i < numArray.length; i++) {
   document.getElementById('results').innerHTML += <div id='listResult_"+[i]+"'></div><br>;

   var target = document.getElementById('listResult_'+[i]);
   document.addDomListener(target, 'mouseover', function() {
      alert("listResult_"+[i]);
   });
} 
```

它仅向最后一个目标 ID (listResult_5) 发出警报。如何单独针对所有六个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:14:11.063

尝试：

```
for (i = 0, i < numArray.length; i++) {
   document.getElementById('results').innerHTML += "<div id='listResult_"+[i]+"'></div><br>";

   var target = document.getElementById('listResult_'+[i]);    

    (function(e) {
       document.addDomListener(target, 'mouseover', function() {
         alert("listResult_"+[e]);
       });
    })(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:13:28.677

每次你分配任何东西时，`innerHTML`你都会**破坏**那里的元素。由于您正在使用`+=`您，因此您可以创建新元素……但是您附加到它们的事件处理程序已经丢失。改为使用标准 DOM 方法创建和附加元素。

此外，`i`是一个变量。它将是循环完成时分配的最后一个值。

而是从上下文中获取数据。

您的`for`循环语法也不正确。

`addDomListener`似乎是谷歌地图的一项功能。用于`addEventListener`HTML。

```
var numArray = ["One","Two","Three","For","Five","Six"];

for (var i = 0; i < numArray.length; i++) {
   var myDiv = document.createElement('div');
   myDiv.id = "listResult_"+[i];
   myDiv.appendChild(document.createTextNode(myDiv.id));
   document.getElementById('results').appendChild(myDiv);
   // Don't append a line break between block containers. Use CSS isntead.
   myDiv.addEventListener('mouseover', function() {
      alert(this.id);
   });
}​ 
```

# list - 处理 Prolog 中的列表（删除元素）

> ID：10929198
> 
> 赞同：1
> 
> 时间：2012-06-07T09:32:30.613
> 
> 标签：list, lambda, prolog

如何从可以除以 3（即`x % 3 == 0`）的列表中删除所有元素？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:13:52.223

这是一个谓词 removemod(+List,+Mod,?Result)：

```
removemod([],_,[]).
removemod([H|T],M,[H|T2]):-
    H mod M =\= 0,
    removemod(T,M,T2).
removemod([H|T],M,T2):-
    H mod M =:= 0,
    removemod(T,M,T2). 
```

似乎工作：

```
15 ?- removemod([3,7,5,12,8,2,16,13,9,11,27],3,L).
L = [7, 5, 8, 2, 16, 13, 11] .

16 ?- removemod([66933],3,L).
L = []. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T09:27:15.870

这样做的惯用方法是使用更高的顺序，例如在 SWI 中，有一个很好的谓词称为 `exclude/3`，它完全符合您的要求（基于谓词删除元素）：

```
clean(List, FilteredList) :-
    exclude(mod3, List, FilteredList).

mod3(X) :-
    X mod 3 =:= 0. 
```

[使用lambda 库](http://www.complang.tuwien.ac.at/ulrich/Prolog-inedit/ISO-Hiord)，更高阶的方式更优雅：

```
:- use_module(lambda).

filterMod3(List, FilteredList) :-
    exclude(\X^(X mod 3 =:= 0), List, FilteredList). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:41:25.083

或者更简单`findall(X,(member(X,[1,2,3,4,5,6,7,8,9,10]),0 =:= X mod 3),Y).`

# java - Maven：程序集插件根本没有运行

> ID：10929199
> 
> 赞同：11
> 
> 时间：2012-06-07T09:32:35.763
> 
> 标签：java, maven, packaging

我对 Maven 很陌生，之前曾尝试学习过几次，并认为没有 Maven 会更好。现在，（不）幸运的是，我必须在我想贡献的项目中使用 Maven。我此时的问题是关于包装。我想制作一个包含所有依赖项的自包含（又名“胖”）jar，一位玩过 Maven 的同事帮我解决了 pom 文件。

我已经检查了他的 pom 文件，以及 SO 上的示例。xml 看起来合法，但插件根本没有运行。请注意，我没有收到任何错误，一切都很好，除了我没有收到“fatjar”。有什么想法可能是导致此问题的原因吗？

以下是 pom.xml 的相关部分。我已经看到关于定位`<configuration>`和`<executions>`标签的相互矛盾的代码示例，几乎尝试了我发现的所有变体，仍然没有乐趣。

```
<plugin>
  <artifactId>maven-assembly-plugin</artifactId>
  <version>2.3</version>
  <executions>
    <execution>
        <id>make-jar-with-dependencies</id> <!-- this is used for inheritance merges -->
        <phase>package</phase> <!-- bind to the packaging phase -->
        <goals>
            <goal>single</goal>
        </goals>
    </execution>
  </executions>
  <configuration>
    <finalName>ProjectName</finalName>
    <appendAssemblyId>true</appendAssemblyId>
    <descriptorRefs>
      <descriptorRef>jar-with-dependencies</descriptorRef>
    </descriptorRefs>
    <archive>
      <manifest>
        <mainClass>org.mydomain.ProjectName</mainClass>
        <addClasspath>true</addClasspath>
      </manifest>
    </archive>
  </configuration>
</plugin> 
```

**Edit_1 @khmarbaise**`mvn clean package`要求的控制台输出

```
[INFO] 
[INFO] --- maven-clean-plugin:2.4.1:clean (default-clean) @ myproject ---
[INFO] Deleting /home/user/workspace/project/target
[INFO] 
[INFO] --- maven-resources-plugin:2.5:resources (default-resources) @ myproject ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] Copying 41 resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:compile (default-compile) @ myproject ---
[WARNING] File encoding has not been set, using platform encoding UTF-8, i.e. build is platform dependent!
[INFO] Compiling 292 source files to /home/user/workspace/project/target/classes
[INFO] 
[INFO] --- maven-resources-plugin:2.5:testResources (default-testResources) @ myproject ---
[debug] execute contextualize
[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory /home/user/workspace/project/src/test/resources
[INFO] 
[INFO] --- maven-compiler-plugin:2.3.2:testCompile (default-testCompile) @ myproject ---
[INFO] Nothing to compile - all classes are up to date
[INFO] 
[INFO] --- maven-surefire-plugin:2.10:test (default-test) @ myproject ---
[INFO] No tests to run.
[INFO] Surefire report directory: /home/user/workspace/project/target/surefire-reports

-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Results :
Tests run: 0, Failures: 0, Errors: 0, Skipped: 0
[INFO] 
[INFO] --- maven-jar-plugin:2.3.2:jar (default-jar) @ myproject ---
[INFO] Building jar: /home/user/workspace/project/target/myproject-2.0.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 12.210s
[INFO] Finished at: Thu Jun 07 11:45:14 CEST 2012
[INFO] Final Memory: 18M/184M
[INFO] ------------------------------------------------------------------------ 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-07T09:35:19.677

我建议使用[maven-shade-plugin](http://maven.apache.org/plugins/maven-shade-plugin/)创建一个 uberjar ，因为它的意图正是这个目的。您也可以使用 maven-assembly-plugin 来做到这一点。

So after taking a look into your pom i understand the problem. First you defined the maven-assembly-plugin in the pluginManagement block which will **NOT** execute a plugin furthermore you have defined the maven-assembly-plugin as a dependency separately which is superfluous. Which means simply remove the following from your pom:

```
<dependency>
   <groupId>org.apache.maven.plugins</groupId>
   <artifactId>maven-assembly-plugin</artifactId>
   <version>2.3</version>
   <type>maven-plugin</type>
</dependency> 
```

You should define the maven-assembler-plugin like this:

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            ...all your configuration here..
        </plugin>
    </plugins>
</build> 
```

Furthermore i've seen many repository definition which should be handled by repository manager instead. About the repositories in your pom i can recommend reading the [sonatype information](http://www.sonatype.com/people/2009/02/why-putting-repositories-in-your-poms-is-a-bad-idea/) furthermore you should think about some else will use the project behind a proxy etc. than he has to change you pom to get i working or can't use it cause you defined repositories in your pom he can't reach.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-02-20T13:43:02.170

I had one other view on this problem, that helped me to resolve the %subj%. If you dig the articles about how to make executable jar and jar with dependencies, they usually provide code snippets, that a newbie tries to copy paste to their pom.xml. Those, that do not know much about the actual structure of pom.xml file (aka me) it is quite difficult task. I ended with this (not working) solution:

```
 <project>
  ......

 <build>
   <pluginManagement>
      <plugins>
        <plugin>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>3.2.0</version>
          <configuration>
            ............
          </configuration>

          <executions>
            ..............
          </executions>
        </plugin>
      </plugins>
   </pluginManagement>
  </build>
</project> 
```

If you know what [pluginManagement](https://maven.apache.org/pom.html#Plugin_Management) does, you would not do the same mistake. But for me it was a big unknown and if you never used parent projects, make sure you do not fall into the same trap. With some adjustments here is a working maven-assembly-plugin setup (with the right context in pom.xml)

```
<?xml version="1.0" encoding="UTF-8"?>

<project>
  <modelVersion>4.0.0</modelVersion>

  <groupId>com.blah.blah</groupId>
  <artifactId>some-artifact</artifactId>
  <version>1.0-SNAPSHOT</version>

  <dependencies>
   ...
  </dependencies>

  <build>
      <plugins>
        <plugin>
          <artifactId>maven-assembly-plugin</artifactId>
          <version>3.2.0</version>
          <configuration>
            <appendAssemblyId>false</appendAssemblyId> <!-- nicer looking jar name -->
            <archive>
              <manifest>
                <addClasspath>true</addClasspath>
                <mainClass>com.blah.blah.YourMainClass</mainClass>
              </manifest>
            </archive>
            <descriptorRefs>
              <descriptorRef>jar-with-dependencies</descriptorRef>
            </descriptorRefs>
          </configuration>

          <executions>
            <execution>
              <id>make-assembly</id> 
              <phase>package</phase>
              <goals>
                <goal>single</goal>
              </goals>
            </execution>
          </executions>
        </plugin>
      </plugins>
  </build>
</project> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-27T04:17:27.853

I want to offer one more suggestion of an error that I had: My xml looked like this:

```
<plugins>
    <plugin>
        <groupId>org.maven...</groupId>
        <artifactId>myArtifact</artifact>
        <configuration>
            <descriptorRefs>....</descriptorRefs>
            ...
            <executions>
                <execution>
                    <phase>package</phase>
                    ....
                </execution>
            </executions>
        </configuration>
    </plugin>
</plugins> 
```

Whereas the `<executions>` block should be a sibling of the `<configuration>` block, not a child. Soon as I fixed that, my plugin started executing within my build again.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T10:07:52.613

Maybe you can use the **shade** plugin instead (that's the one I use).

**Note the dependencies are included in the final JAR.**

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-shade-plugin</artifactId>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>shade</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <finalName>standalone-${artifactId}</finalName>
                <archive>
                    <manifest>
                        <mainClass>com.mypckg.Launcher</mainClass>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
    </plugins>
</build> 
```

Regards

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T09:45:27.963

the dependency looks like

```
 <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <descriptors>
                    <descriptor>src/main/assembly/assembly.xml</descriptor>
                </descriptors>
            </configuration>
            <executions>
                <execution>
                    <phase>package</phase>
                    <goals>
                        <goal>attached</goal>
                    </goals>
                </execution>
            </executions>
    </plugin> 
```

also you need to define a assembly.xml , here is a example

```
<assembly>
    <formats>
        <format>zip</format>
    </formats>
    <includeBaseDirectory>false</includeBaseDirectory>
    <dependencySets>
        <dependencySet>
            <outputDirectory>/lib</outputDirectory>
        </dependencySet>
    </dependencySets>
    <fileSets>
        <!-- move all the .jar from target to /lib -->
        <fileSet>
            <directory>target</directory>
            <outputDirectory>/lib</outputDirectory>
            <includes>
                <include>*.jar</include>
            </includes>
            <!--  include *.jar places the same version of >App.jar
            twice in the lib, we need remove one -->
            <excludes>
                <exclude>App*.jar</exclude>
            </excludes>

        </fileSet>
        <!-- move .bat from scripts to /scripts -->
        <fileSet>
            <directory>src/main/assembly/scripts</directory>
            <outputDirectory>/bin</outputDirectory>
            <includes>
                <include>*.bat</include>
            </includes>
        </fileSet>
    </fileSets>
</assembly> 
```

# vb.net - 将字段重构为属性

> ID：10929201
> 
> 赞同：0
> 
> 时间：2012-06-07T09:32:43.803
> 
> 标签：vb.net, properties, encapsulation

我目前正在为我的新工作学习 vb.net，我对公共领域的感受很复杂。我看到许多关于它们损害封装的论点。在 python 中，通常的做法是保持简单，并在足够的情况下使用字段。如果我们想稍后添加逻辑，我们只需将它们重构为一个属性，而不会破坏客户端代码的任何内容。

在我正在使用的代码库中，我看到包含十几个属性的巨大类，例如：

```
Private __GetDescriptionMode As Boolean
<DefaultValue(False)> _
 Public Property GetDescriptionMode() As Boolean
    Get
        GetDescriptionMode = __GetDescriptionMode
    End Get
    Set(ByVal Value As Boolean)
        __GetDescriptionMode = Value
    End Set
End Property 
```

那是 10 行代码，里面没有什么价值。在我的视觉工作室窗口中，我几乎看不到其中的 3 个。所以我有两个问题：

*   是否有正当理由不简单地定义字段并在需要时将它们重构为属性？
*   OOP 原则对牺牲如此多的可读性如此重要吗？（我可以看更少的东西，我必须解析属性以确保它们没有做任何特别的事情等）

**编辑** 澄清我的第一个问题：如果我将字段更改为微不足道的属性，我是否有机会破坏客户端代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:46:39.000

创建属性而不是字段是个好主意。

*   如果将公共字段更改为公共属性，则可以破坏客户端代码。
*   您只能将数据绑定与属性一起使用。
*   字段不能在接口中使用
*   如果将公共字段更改为公共属性，您将破坏二进制序列化代码。
*   如果您使用反射，稍后将字段更改为属性可能会破坏您的反射代码。

从Vb.Net 团队的这篇[博客文章](http://blogs.msdn.com/b/vbteam/archive/2009/09/04/properties-vs-fields-why-does-it-matter-jonathan-aneja.aspx)中阅读更多信息，或者从[Jon Skeet](http://csharpindepth.com/Articles/Chapter8/PropertiesMatter.aspx)那里阅读关于 C# 中相同问题的更多信息

在 Visual Basic 2010 及更高版本中，使用自动属性

```
Public Property GetDescriptionMode As Boolean 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:42:17.243

恕我直言，首先设置属性总是值得的：

*   当别人需要这些房产时，你很可能会让他们的生活更加艰难。
*   也可能意味着对具有许多依赖项的项目进行不必要的修改。
*   如果您不喜欢属性占用的空间，请将其包装在`Region`
*   诸如反射/数据绑定等各种事情可能与字段有关。

值得一提的是，从 VS2010 开始，这个问题在很大程度上随着自动属性的出现而消失。以上将浓缩为：

```
Public Property GetDescriptionMode As Boolean 
```

# c++ - 用一个范围（一对迭代器）初始化 std::array

> ID：10929202
> 
> 赞同：21
> 
> 时间：2012-06-07T09:32:47.290
> 
> 标签：c++, arrays, c++11, stdvector, range

如何`std::array`从一个范围（由一对迭代器定义）初始化一个？

像这样的东西：

```
vector<T> v;
...
// I know v has exactly N elements (e.g. I just called v.resize(N))
// Now I want a initialized with those elements
array<T, N> a(???);  // what to put here? 
```

我以为`array`会有一个构造函数采用一对迭代器，这样我就可以做到`array<T, N> a(v.begin(), v.end())`，但它似乎根本没有构造函数！

我知道我可以`copy`将向量放入数组中，但我宁愿直接用向量内容初始化数组，而不是先默认构造它。我怎样才能？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-07T10:33:27.987

使用随机访问迭代器，并在编译时假设某个大小，您可以使用一[组索引](http://loungecpp.wikidot.com/tips-and-tricks%3aindices)来执行此操作：

```
template <std::size_t... Indices>
struct indices {
    using next = indices<Indices..., sizeof...(Indices)>;
};
template <std::size_t N>
struct build_indices {
    using type = typename build_indices<N-1>::type::next;
};
template <>
struct build_indices<0> {
    using type = indices<>;
};
template <std::size_t N>
using BuildIndices = typename build_indices<N>::type;

template <typename Iterator>
using ValueType = typename std::iterator_traits<Iterator>::value_type;

// internal overload with indices tag
template <std::size_t... I, typename RandomAccessIterator,
          typename Array = std::array<ValueType<RandomAccessIterator>, sizeof...(I)>>
Array make_array(RandomAccessIterator first, indices<I...>) {
    return Array { { first[I]... } };
}

// externally visible interface
template <std::size_t N, typename RandomAccessIterator>
std::array<ValueType<RandomAccessIterator>, N>
make_array(RandomAccessIterator first, RandomAccessIterator last) {
    // last is not relevant if we're assuming the size is N
    // I'll assert it is correct anyway
    assert(last - first == N); 
    return make_array(first, BuildIndices<N> {});
}

// usage
auto a = make_array<N>(v.begin(), v.end()); 
```

这假定编译器能够删除中间副本。我认为这个假设并不是一个很大的延伸。

实际上，它也可以使用输入迭代器来完成，因为花括号初始化列表中每个元素的计算在下一个元素的计算之前进行排序（第 8.5.4/4 节）。

```
// internal overload with indices tag
template <std::size_t... I, typename InputIterator,
          typename Array = std::array<ValueType<InputIterator>, sizeof...(I)>>
Array make_array(InputIterator first, indices<I...>) {
    return Array { { (void(I), *first++)... } };
} 
```

由于其中`*first++`没有任何`I`内容，因此我们需要一个假人`I`来引发包扩展。逗号运算符来救援，可以`void()`消除有关缺乏效果的警告，并防止逗号过载。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T09:57:38.810

正如您所注意到的，std::array 根本没有构造函数（编译器生成的默认构造函数除外）。

这是故意完成的，因此它可以像 C 数组一样被静态初始化。如果要在没有静态初始化程序的情况下填充数组，则必须复制数据。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T12:31:16.833

您可以[`BOOST_PP_ENUM`](http://www.boost.org/doc/libs/1_46_1/libs/preprocessor/doc/ref/enum.html)用作：

```
include <boost/preprocessor/repetition/enum.hpp>

#define INIT(z, i, v) v[i] 

std::vector<int> v;

//fill v with at least 5 items 

std::array<int,5> a = { BOOST_PP_ENUM(5, INIT, v) };  //MAGIC 
```

在这里，最后一行扩展为：

```
std::array<int,5> a = {v[0], v[1], v[2], v[3], v[4]}; //EXPANDED LINE 
```

这就是你想要的。

# wpf - WPF 数据绑定中的元素名称属性

> ID：10929203
> 
> 赞同：0
> 
> 时间：2012-06-07T09:32:49.363
> 
> 标签：wpf

WPF数据绑定中元素名称属性的用途是什么。

例如

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300" Name="win">
    <TextBox x:Name="txtData" width="100" height="26" Text={Binding ElementName=win,Mode=TwoWay,Path=Data}/>
<Window> 
```

问候， 普里扬克·塔卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:36:14.567

它用于绑定到应用程序中的另一个元素 - 请参阅[http://msdn.microsoft.com/en-us/library/system.windows.data.binding.elementname.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.binding.elementname.aspx)

在您的情况下，您正在尝试绑定到名为**win**`Window`的元素。

# objective-c - 使用 NSKeyedArchiver 存储自定义数据模型

> ID：10929204
> 
> 赞同：10
> 
> 时间：2012-06-07T09:32:51.167
> 
> 标签：objective-c, ios

我正在开发一个 RSS 阅读器。它只是一个表格视图，每个单元格显示一个自定义数据模型 RSSEntry。我有一个 NSMutableArray allEntries，其中包含我从服务器获得的所有 RSSEntry。这是 RSSEntry 的样子：

```
 @interface RSSEntry : NSObject <NSCoding> {
        NSString *_blogTitle;
        NSString *_articleTitle;
        NSString *_articleUrl;
        NSDate *_articleDate;
    } 
```

我想从本地存档中恢复数据，因此当我退出并再次打开此应用程序时，表格视图会在上次刷新时填充数据。

我已经阅读了“开始 iOS5 编程”中的示例，但它只存储和恢复一个数据模型。所以我不知道如何存储这个充满我的自定义数据模型的可变数组并恢复它。

我使用以下代码来存储和恢复数据：

```
// STORE
NSMutableData *data = [[NSMutableData alloc] init]; 
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:data];
[archiver encodeObject:entry forKey:kDataKey];
[archiver finishEncoding];

// RESTORE
NSData *data = [[NSMutableData alloc] initWithContentsOfFile:[self dataFilePath:kFilename]];
NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:data];
RSSEntry *entries = [unarchiver decodeObjectForKey:kDataKey];
[unarchiver finishDecoding]; 
```

我只能以这种方式存储和恢复一个数据模型。

谁能帮我一把。我是 iOS 编程新手，可能有点乏味。抱歉。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-07T11:20:06.603

将您要存储的所有条目放入`NSArray`并使用以下代码：

```
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:entries]; 
```

`entries`您的条目数组在哪里。简单易用，只需一行代码。

要取消归档，只需使用

```
NSArray *entries = [NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

`NSKeyedArchiver`**能够将实现`NSCoding`协议**的 Objective-C 对象的任何数据结构，甚至是非常复杂的数据结构，包括嵌套`NSArray`的 s、`NSDictionary`s 和自定义对象，归档到文件中。`NSKeyedUnarchiver`做相反的事情，获取`NSKeyedArchiver`由归档的原始对象图产生的任何数据并重新建立。从技术上讲，它们可能只是一个类，但 Apple 决定按功能将它们分开，因为这在语法上更正确或其他什么:)

我假设您能够将生成的`NSData`对象写入文件，然后再次读回。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T09:39:09.450

您可以按以下方式存储 NSDictionary

```
NSDictionary *Your_NSDictionary = [NSDictionary dictionaryWithObjectsAndKeys:
                               @"Obj1", @"Key1",
                               @"Obj2", @"Key2", nil];
//store dictionary
NSMutableData *yourData = [[NSMutableData alloc] init];
NSKeyedArchiver *archiver = [[NSKeyedArchiver alloc] initForWritingWithMutableData:yourData];
[archiver encodeObject:Your_NSDictionary forKey: @"key"];
archiver finishEncoding];
[yourData writeToFile:@"FilePath" atomically:YES];
[yourData release];
[archiver release];

//Load dictionary

NSData *yourData = [[NSMutableData alloc]initWithContentsOfFile:@"FilePath"];
NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:yourData];
Your_NSDictionary = [unarchiver decodeObjectForKey: @"key"];
[unarchiver finishDecoding];
[unarchiver release];
[yourData release]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-16T16:02:21.427

对于 iOS 12：

对于`archivedDataWithRootObject`：

```
NSData *myDicData = [NSKeyedArchiver archivedDataWithRootObject:AllDataDic 
                                     requiringSecureCoding:YES error:nil];
[[NSUserDefaults standardUserDefaults] setObject:myDicData forKey:@"Yourkey"]; 
```

对于`unarchivedObjectOfClass`：

```
NSData *tempData = [[NSUserDefaults standardUserDefaults] valueForKey:@"Yourkey"];
NSDictionary *myDicProfile = [NSKeyedUnarchiver unarchivedObjectOfClass:[NSDictionary class] 
                                                fromData:tempData error:nil]; 
```

# android - 安卓c2dm注册不成功

> ID：10929205
> 
> 赞同：0
> 
> 时间：2012-06-07T09:32:55.800
> 
> 标签：android, android-c2dm

当我从 c2dm 收到响应时，意图对象请求代码中出现错误：

```
Intent registrationIntent = new Intent("com.google.android.c2dm.intent.REGISTER");
registrationIntent.putExtra("app", PendingIntent.getBroadcast(this, 0, new Intent(), 0)); 
registrationIntent.putExtra("sender", "achalrajpoot1@gmail.com"); 
```

当我得到响应时出现错误：

```
public void onReceive(Context context, Intent intent) 
{
    if (intent.getStringExtra("error") == null) 
    {
        System.out.println("Error in registration ");
    }
} 
```

if() 条件为真，为什么？

此错误的可能原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:37:09.170

从[getStringExtra()](http://developer.android.com/reference/android/content/Intent.html#getStringExtra%28java.lang.String%29)文档：

> 返回先前使用 putExtra() 添加的项目的值，如果未找到 String 值，则返回 null。

也许您想测试字符串是否不为空？

```
if (intent.getStringExtra("error") != null) {
        System.out.println("Error in registration ");
} 
```

# php - 有什么方法可以绕过强制文件下载？

> ID：10929209
> 
> 赞同：0
> 
> 时间：2012-06-07T09:33:51.137
> 
> 标签：php, html, apache

有没有办法避免强制下载文件？

我正在将文件上传到服务器，但我希望在访问该文件时执行该文件，而不是下载该文件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T17:16:53.913

如果您希望执行的文件正在自动下载，这意味着您没有为您的文件类型添加任何规则，因此 Apache 不知道是否应该执行它。

打开你的 apache httpd.conf 文件，添加

```
<FilesMatch \.php$>
      SetHandler application/x-httpd-php
 </FilesMatch> 
```

用任何文件扩展名/类型替换“.php”。例如 - .cgi 文件扩展名。

```
<FilesMatch \.cgi$>
      SetHandler application/x-httpd-php
 </FilesMatch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:38:12.797

如果您正在上传一个 PHP 文件并期望它执行而不是下载，这听起来好像您的 Web 服务器配置不正确。确保您的服务器上安装了 PHP，并且 Apache 已配置为运行脚本。根据您所在的平台，您会找到大量的说明来执行此操作。

# css - cas3中重叠div标签的问题

> ID：10929213
> 
> 赞同：0
> 
> 时间：2012-06-07T09:34:04.683
> 
> 标签：css, tags, overlapping

我正在为一个项目制作一个新模板，但有一件事我似乎做错了。我希望一个盒子与另一个盒子重叠，并且不管屏幕大小都呆在那里。到目前为止，我已经放置了两个大盒子，但是第三个（标有灰色，只是不断地跳来跳去。有什么建议吗？我已经添加了图片的链接，希望有人理解我想要做什么 [。http： //folk.uio.no/paulkj/Benoit/csstroubble.jpg](http://folk.uio.no/paulkj/Benoit/csstroubble.jpg)

谢谢！

代码：

```
body{
    background-color: #2F2727;
    background: -moz-radial-gradient(circle, #1a82f7, #2F2727);

}
#wrapper{
    text-align:center;
    font-family: Arial;
    font-size: 14px;
}
#header {
    width:900px;
    height:100px;
    margin:50px auto;
    border: 2px solid;
    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
    -khtml-border-radius: 20px;
    border-radius: 20px;
}   

#maincontent{
    position:relative;
    width:900px;
    margin: 20px auto;
    border: 2px solid;
    -moz-border-radius: 20px;
    -webkit-border-radius: 20px;
    -khtml-border-radius: 20px;
    border-radius: 20px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:40:03.193

您应该为灰色框设置更高的 z-index。参考这个

[http://www.w3schools.com/cssref/pr_pos_z-index.asp](http://www.w3schools.com/cssref/pr_pos_z-index.asp)

请记住还要为您的灰色框声明位置属性，否则 z-index 将不起作用

# c# - 检查数组是否是具有递归的子数组

> ID：10929215
> 
> 赞同：0
> 
> 时间：2012-06-07T09:34:10.217
> 
> 标签：c#, recursion

我需要编写一个方法，该方法将 2 个数组作为参数，如果第二个数组是第一个数组的子数组，则返回 true，否则返回 false。我只需要使用没有循环的递归，但我可以使用私有方法。

到目前为止，这是有的：

```
public static bool findSequence(char[] findIn, char[] toFind)
{
    return compare(findIn, toFind, num);
}

private static int num = 0;

private static bool compare(char[] findIn, char[] toFind, int num)
{
    for (int i = 0; i < findIn.Length; i++)
    {
        if (toFind[i] != findIn[num])
        {
            num++;
            return false;
        }
    }

    num++;
    return true;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:00:25.903

您走错了路，因为您必须使用递归并避免循环，并且您的代码有循环且没有递归。我认为你应该更努力一点，因为这是非常有用的大脑健身。无论如何，这应该有效（甚至理解这可能是一个很好的练习:-)）：

```
 public static bool FindSequence(char[] findIn, char[] toFind)
    {
        return FindSequence(findIn, toFind, 0, 0);
    }

    private static bool FindSequence(char[] findIn, char[] toFind, int posInFindIn, int posInToFind)
    {
        if (findIn.Length - posInFindIn < toFind.Length - posInToFind)
            return false;
        if (findIn[posInFindIn] == toFind[posInToFind])
        {
            if (posInToFind == toFind.Length - 1)
                return true;
            else
                if (FindSequence(findIn, toFind, posInFindIn + 1, posInToFind + 1))
                    return true;
        }
        return FindSequence(findIn, toFind, posInFindIn + 1, 0);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T16:44:19.430

这是用于检查是否在其*开头*（而不是沿其长度的任何位置）`findIn`包含子数组的代码的简化版本：`toFind`

 *```
public static bool FindSequence(char[] findIn, char[] toFind)
{
    return findIn.Length >= toFind.Length &&
           FindSequence(findIn, toFind, 0);
}

private static bool FindSequence(char[] findIn, char[] toFind, int pos)
{
    return pos < toFind.Length &&
           findIn[pos] == toFind[pos] &&
           FindSequence(findIn, toFind, pos + 1);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T16:01:54.487

这是使用类构造和队列来查找子数组的确切索引的答案。

```
namespace Alogrithms
{
  public class ArraySearch
  {
    int[] pattern;
    Queue<int> indices = new Queue<int>();  
    int[] source;
    public ArraySearch( int[] pattern, int[] source)
    {
      this.source = source;
      this.pattern = pattern;
    }
    public int[] Pattern
    {
      get { return pattern; }
      private set { pattern = value; }
    }
    public Queue<int> Indices
    {
      get { return indices; }
      private set { indices = value; }
    }
    public int SearchForSubArray(int patternIndexPtr,int sourceIndexPtr, ref int[] source)
    {
      int end  = source.Length;
      if(patternIndexPtr >= pattern.Length || sourceIndexPtr >= end )
        return patternIndexPtr;

      if(pattern[patternIndexPtr] == source[sourceIndexPtr])
      {
        indices.Enqueue(sourceIndexPtr);
        return SearchForSubArray(patternIndexPtr + 1,sourceIndexPtr+1, ref source);
      }
      else
      {
        indices.Clear();
        patternIndexPtr = 0;
        return SearchForSubArray(patternIndexPtr, sourceIndexPtr + 1, ref source);
      }
    }
  }
} 
```

类用法：

```
 int [] randomArray = new int[]{9,8,9,6,5,6,4,7,8,5,4,5,6,3,2,1,3,5,6,5,5,9,6,3,4,5,7,6,8,9,6,7,8,9,9,9,8,2,1,3,5,6,5,5,9,6,3,4,5,7,6,8,9,9,9,9,8};
      int[] pattern = new int[] { 6, 7, 8 };
      ArraySearch sequence = new ArraySearch(randomArray,pattern);
      int found = sequence.SearchForSubArray(0, 0, ref randomArray);
      Console.WriteLine("found : " + found);
      Console.WriteLine("Pattern is : " + String.Join(",", sequence.Pattern));
      foreach(int point in sequence.Indices)
      {
        Console.WriteLine(point);
      }
      if ( sequence.Indices.Count == 0 )
      {
        Console.WriteLine("Sequence not found.");
      }
      Console.ReadLine(); 
```*

# asp.net-mvc - 允许使用 mvc 3 和 Forms Authentication 中的参数访问特定视图

> ID：10929216
> 
> 赞同：1
> 
> 时间：2012-06-07T09:34:13.180
> 
> 标签：asp.net-mvc, forms-authentication

我可以查看参数，例如使用参数键重置密码

```
 public ActionResult ResetPassword(string Email,string Key)
       {
            //Do some thing
            return View();
        } 
```

我正在使用表单身份验证。我想要的是允许未经授权的用户访问这个视图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:16:55.787

默认情况下，每个人都可以访问控制器操作。所以我想，你已经设置了一个`AuthorizeAttribute`更高的地方，现在你想在特定的 action 上抑制它`ResetPassword`。为此，有属性`[AllowAnonymous]`

```
[AllowAnonymous]
public ActionResult ResetPassword(string Email,string Key)
{
    //Do some thing
    return View();
} 
```

**更新：** 正如 Muhammad Adeel Zahid 指出的那样，这仅适用于版本 4 及更高版本：-/ 对于 MVC 3，您可以使用此处描述的方法：[保护您的 ASP.NET MVC 3 应用程序](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:58:53.153

## 采用`AuthorizeAttribute`

这将使得只有经过身份验证的用户被授权执行这个特定的控制器操作成为可能。请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)。

```
[Authorize]
public ActionResult ResetPassword(string Email,string Key)
{
    //Do some thing
    return View();
} 
```

> ***注意**`Principal`：这适用于您可能正在使用的任何身份验证方法（如果编写正确，即使是自定义方法）只要`User`正在填充对象实例。默认的开箱即用身份验证方法会填充它们，如果您使用一些自定义身份验证方法，请确保它们被填充。*

## 始终安全 - 选择退出

但显然，您的整个控制器或整个应用程序都由`AuthorizeAttribute`. 在这种情况下，您应该*选择退出*特定的控制器操作。正如 Juraj 在 MVC 4 中所说，您应该简单地使用，但在旧版本中，您可以[按照此页面上的说明](http://blogs.msdn.com/b/rickandy/archive/2011/05/02/securing-your-asp-net-mvc-3-application.aspx)`AllowAnonymousAttribute`编写自己的。

这是您应该遵循的 Microsoft 首选方​​法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:33:07.660

解决方案是在 web.Config 中添加位置并设置 allowOverride="false" 之类的

```
<location path="reset.password" allowOverride="false">    
    <system.web>
      <authorization>
        <allow users="*"/>
      </authorization>
    </system.web>
  </location> 
```

这解决了我的问题。谢谢大家:)

# linux - 了解linux上次重启命令结果

> ID：10929217
> 
> 赞同：3
> 
> 时间：2012-06-07T09:34:13.693
> 
> 标签：linux, shell

当我在 linux 上运行最后一个重启命令时，我收到以下结果

> reboot system boot 2.6.32-38-server Thu Jun 7 10:54 - 15:22 (04:27)

我需要知道时间 04:27 是什么意思？重新启动花了 4 小时 27 分钟还是什么？

我尝试搜索最后一个命令结果的描述，但没有运气。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:46:53.673

如果您使用该`-F`标志，则很明显它在显示的时间间隔内显示系统正常运行时间。这类似于使用`last username`which 显示登录会话持续了多长时间。由于`reboot`是 wtmp 文件中的伪用户，因此这是为真实用户并行输出的合理方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:44:01.420

大致是 10:54 和 15:22 之间的时间差。

# javascript - ExtJS4：带有锁定列和摘要的网格

> ID：10929220
> 
> 赞同：1
> 
> 时间：2012-06-07T09:34:31.023
> 
> 标签：javascript, extjs, extjs4

我有锁定列的网格。我想在那里查看摘要功能。

网格配置：

```
 ...
features: [Ext.create("Ext.grid.feature.Summary")],
...
var columns = [
            {
                header:"Somecolumn",
                width:425,
                locked:true,
... 
```

我在这里看不到摘要，但是在我将列的锁定属性设置为 false 时，会出现摘要。如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T09:38:17.017

当您将锁定列添加到网格 ext 时，会创建 2 个不同的网格，1 个用于锁定列，1 个用于其他网格。

创建此格网时，它不会将要素传递给创建的格网。要解决此问题，您必须覆盖`Ext.grid.Lockable.injectLockable`方法并将特征复制到创建的网格。

这里是 4.0.7 的修复

```
Ext.override(Ext.grid.Panel, {
    normalCfgCopy: ['invalidateScrollerOnRefresh', 'verticalScroller', 'verticalScrollDock', 'verticalScrollerType', 'scroll', 'features'],
    lockedCfgCopy: ['invalidateScrollerOnRefresh', 'features']
}); 
```

# apache - apache Web 服务器目录隐藏文档

> ID：10929221
> 
> 赞同：0
> 
> 时间：2012-06-07T09:34:31.870
> 
> 标签：apache, apache2, security, directory-structure

我有一个 apache 服务器，我在其中禁用了读取指定目录路径的目录内容的功能，即。[http://www.domain.com/目录](http://www.domain.com/directory)

我已将一个未与任何 html 页面链接的目录重命名为非常长且随机的目录，并插入了一系列 PDF。

从我的角度来看，除非有人知道目录的名称和 pdf 的名称，否则他们没有机会查看 PDF？这是一个有点安全的假设吗？是否有脚本小脚本小子可以远程运行以查看根 web 目录下的目录，然后查看内容，或者这是否相当安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:31:00.527

这些PDF的内容是什么。如果它们包含敏感或个人数据，那么您的解决方案可能并不可取，即如果数据受到损害，您需要进行影响评估。

在您的场景中，您应该确保配置中没有任何内容可以启用上述目录的目录列表，因此请检查任何选项指令。其次，如果您支持将数据发布到序号 url（即目录）的请求，那么请确保您不要让用户发布包含配置启用目录列表的 .htaccess 文件。

# php - PHP 在打印上使用 echo 的实际优势

> ID：10929223
> 
> 赞同：3
> 
> 时间：2012-06-07T09:34:37.190
> 
> 标签：php, performance, echo

> **可能重复：**
> [参考：比较 PHP 的打印和回显](https://stackoverflow.com/questions/7094118/reference-comparing-phps-print-and-echo)

我想知道使用而不是将输出写入屏幕的*实际*和*真正*优势和原因。`echo``print`

在我的代码的许多领域，我都有这样的事情：

```
PRINT("<b>".$course_id."</b>"); 
```

我知道`print`返回一个值而`echo`没有，但是我很想知道是否有任何真正的理由来替换我的代码中的实例（不幸的是有一些`print`）`echo`？

在这种情况下使用只是不好的做法，`print`还是有理由和好处避免它？

我正在使用 PHP 5.3.13。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T09:40:57.300

从[phpbench 来看](http://www.phpbench.com/)，`echo()`比`print()`. 但我认为没有人会注意到您的代码是否慢了几微秒。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T09:57:11.437

与 'echo' 相比，打印返回一个值，所以

```
touch ($file) || print "Could not create $file"; 
```

是允许的，但

```
touch ($file) || echo "Could not create $file"; 
```

不是。

根据 Fabien Potencier 的说法，“打印”使用了更多操作码，因为它实际上返回了一些东西：http: [//fabien.potencier.org/article/8/print-vs-echo-which-one-is-faster](http://fabien.potencier.org/article/8/print-vs-echo-which-one-is-faster)

所以'echo'应该比'print'快一点。我认为大多数开发人员更喜欢使用 echo 来打印，因为如果您只想渲染文本，使用 echo 会更灵活一些。

如果您愿意，可以用 IDE 和正则表达式的搜索和替换功能替换“打印”调用，但我认为常见应用程序的大多数性能瓶颈都在其他地方找到。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T09:43:13.753

差距是可以忽略不计的。没有理由重构 print() 函数的使用。

# javascript - jQuery :disabled 选择器不能正常工作？

> ID：10929224
> 
> 赞同：1
> 
> 时间：2012-06-07T09:34:41.497
> 
> 标签：javascript, jquery, html, css

我有这个 HTML

```
<form>
    <input type="text" id="text1" value="text1">
    <input type="text" id="text2" value="text2" disabled>
    <input type="text" id="text3" value="text3" readonly>
</form> 
```

我想将*ui-state-disabled*类添加到所有禁用的输入中，我使用：

```
$('form input:disabled').addClass('ui-state-disabled'); 
```

但是， text3 没有得到类。如何更改我的选择器以包含它？（因为 readonly 与我的应用程序要求中的 disabled 相同）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:36:15.660

您应该添加一个属性选择器

```
$('form input:disabled, form :input[readonly]').addClass('ui-state-disabled'); 
```

[演示](http://jsfiddle.net/yQem9/)

# javascript - 如何让jquery mobile controlgroup宽度100%？

> ID：10929226
> 
> 赞同：7
> 
> 时间：2012-06-07T09:34:49.810
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 jquery mobile 进行演示...我想让 localnav 的宽度为 100%...但我不知道该怎么做...代码在这里...

```
<ul data-role="controlgroup" data-type="horizontal" class="localnav">
    <li><a href="#" data-role="button" data-transition="fade" class="ui-btn-active">111</a></li>
    <li><a href="#" data-role="button" data-transition="fade">222</a></li>
    <li><a href="#" data-role="button" data-transition="fade">333</a></li>
</ul> 
```

请帮助我...谢谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-05T19:12:55.283

这就是我所做的。工作得很好。

CSS：

```
<style>
    .ui-grid-a, .ui-grid-a .ui-controlgroup-controls {width: 100%}
    #homePageButton {width:49%;float:left;margin-left:1%}
    #logOutButton {width:49%}
    #footer {height:45px}
</style> 
```

HTML：

```
<div data-role="footer" data-position="fixed" id="footer">
    <div data-role="controlgroup" data-type="horizontal" class="ui-grid-a">
        <a href="#" data-role="button" data-icon="home" id="homePageButton">Home Page</a>
        <a href="#" data-role="button" data-icon="forward" data-iconpos="right" id="logOutButton">Log Out</a>
    </div>
</div> 
```

结果： ![在此处输入图像描述](../Images/d85659fcbd38750c3702918d7b6aca0b.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-30T17:35:03.587

看看[JQuery Mobile 的导航栏](http://jquerymobile.com/demos/1.2.0/docs/toolbars/docs-navbar.html) 虽然它通常用于页眉/页脚，但也可以在其他地方使用。它将生成一个包含您的按钮的全宽条。

```
 <div data-role="navbar">
            <ul>
                <li><a href="#" data-icon="plus" data-role="button">Button1</a></li>
                <li><a href="#" data-icon="minus" data-role="button">Button2</a></li>
                <li><a href="#" data-icon="check" data-role="button">Button3</a></li>
            </ul>
        </div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T09:49:35.610

不知道为什么要尝试将 a 包装`<ul>`为控制组。但是您可以通过以下方法拥有一个全宽 ControlGroup：

```
<div data-role="controlgroup" data-type="horizontal" class="localnav">
    <a href="#" data-role="button" data-transition="fade" class="ui-btn-active">111</a>
    <a href="#" data-role="button" data-transition="fade">222</a>
    <a href="#" data-role="button" data-transition="fade">333</a>
</div> 
```

在 CSS 中，将宽度平均分配给`<a>`元素数量：

```
a{width:33%;} 
```

示例 jsfiddle：http: [//jsfiddle.net/pAuqm/1/](http://jsfiddle.net/pAuqm/1/)

如果您想继续使用`<ul>`基础结构；您可以拥有具有以下 CSS 的全宽控制组：

```
li{
    display: inline;
}
a{width:33%;} 
```

示例 jsfiddle：http: [//jsfiddle.net/pAuqm/3/](http://jsfiddle.net/pAuqm/3/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T20:30:01.707

我正在使用网格来执行此操作，以及一个额外的 css 规则：

```
.ui-controlgroup-horizontal > div > .ui-btn {
    width: 99%
}​​​​​​​​​ 
```

我这样做的原因是这样的标记：

```
<div class="ui-grid-a" data-role="controlgroup" data-type="horizontal">
    <div class="ui-block-a">
         <button type="submit" data-theme="c">Cancel</button>
    </div>
    <!-- etc -->
</div> 
```

由 jquery 转换成这样的标记（在 Chrome 或 Firebug 中检查）：

```
 <div class="ui-grid-a ui-corner-all 
       ui-controlgroup ui-controlgroup-horizontal" 
       data-role="controlgroup" data-type="horizontal">
       <div class="ui-block-a">
           <div data-corners="true" data-shadow="true" 
             data-iconshadow="true" data-inline="null" 
             data-wrapperels="span" data-icon="null" data-iconpos="null" 
             data-theme="c" data-mini="false" 
             class="ui-btn ui-btn-up-c ui-corner-left" 
             aria-disabled="false">
               <span class="ui-btn-inner ui-corner-left">
                   <span class="ui-btn-text">Cancel</span>
               </span>
               <button type="submit" data-theme="c" class="ui-btn-hidden" aria-disabled="false">Cancel</button>
           </div>
       </div>
       <!-- etc -->
   </div> 
```

如您所见，`.ui-btn`我们想要 100% 的宽度在内部`ui-block-a`（或`ui-block-b`,`ui-block-c`等），而我们的水平控制组已经获得了 class `.ui-controlgroup-horizontal`，因此规则：`.ui-btn`children of `divs`children的 children`.ui-controlgroup-horizontal`是（几乎）100%。我没有达到 100%，因为这为我切断了右侧按钮上的圆角。通过`.ui-controlgroup-horizontal`在顶级类上使用，而不是（比如说）`ui-grid-a`，这条规则适用于不同的网格大小。

# unix - 在 OCaml 源代码中使用 Unix 函数

> ID：10929228
> 
> 赞同：4
> 
> 时间：2012-06-07T09:34:54.730
> 
> 标签：unix, ocaml

我有一个使用函数*time.ml中的 unix* *gettimeofday()*获取当前时间的函数。该文件通过以下方式访问该函数：

 *```
open Unix; (*declared at the top of the file*)

let get_time ()  = Unix.gettimeofday () 
```

*.mli*文件中对应的条目是这样的：

```
val get_time : unit -> float 
```

但是在编译它们时会抛出一个错误：

```
File "_none_", line 1, characters 0-1:
No implementations provided for the following modules:
Unix referenced from time.cmx 
```

*我已检查/lib/ocaml*目录中是否存在以下文件：

```
unix.cmi, unix.a unix.cma unix.cmx unix.cmxa unix.cmxs unix.mli 
```

*并且在.bashrc*文件中正确设置了路径。

```
LD_LIBRARY_PATH=~/lib 
```

*尽管位于相同的/lib/ocaml*目录中，但来自*Printf*模块的*fprintf*等其他功能也可以正常工作。

 **有什么想法可能是错的吗？我做错了什么还是我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T09:54:05.260

你必须像这样编译：

```
ocamlc unix.cma -c time.mli time.ml (* bytecode *) 
```

或者

```
ocamlopt unix.cmxa -c time.mli time.ml  (* native code *) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-08T08:38:25.313

如果您有正确配置的 findlib，

`ocamlfind ocamlopt -package Unix -linkpkg time.ml`

将为您省去选择 .cma 或 .cmxa 版本的麻烦。***

# android - 菜单替换为 ActionBar

> ID：10929229
> 
> 赞同：0
> 
> 时间：2012-06-07T09:35:01.710
> 
> 标签：android

谷歌文档说菜单在 3.0 中被 ActionBar 取代，并且菜单将成为 ActionBar 本身。所以我启动了 3.0 和 4.0 的模拟器，但菜单仍然显示为菜单。我错过了什么吗？

编辑：我使用的是 minSdkVersion 4，那么在 3.0 或更高版本的设备中会出现问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:41:13.130

您需要使用 API 级别 15 或更高级别来构建应用程序。为此，请在您的清单中使用以下内容：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

minSdkVersion 定义了与您的应用程序兼容的最低 API，在该 API 上菜单仍将显示为菜单。在 Android 3.0 或更高版本上，菜单将在操作栏上显示溢出按钮。

另外，您可以使用以下内容将 MenuItem 显示为操作：

```
if (VERSION.SDK_INT >= 11){
    theMenuItem.setShowAsAction(SHOW_AS_ACTION_IF_ROOM);
} 
```

或在 xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/the_menu_item"
          android:title="@string/the_item"
          android:showAsAction="ifRoom"/>
</menu> 
```

此代码只会在 Honeycomb 或更高版本上执行。

# java - 查看已删除的控制台输出

> ID：10929235
> 
> 赞同：5
> 
> 时间：2012-06-07T09:35:35.473
> 
> 标签：java, eclipse, console

我正在运行多个 Junit 测试，在控制台中运行测试结果被清除并填充当前测试的日志。包含先前测试日志的日志文件将存储在哪里。eclipse中有什么方法可以看到这些已删除的日志。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T12:09:09.037

尝试以下操作：

*   打开你的运行配置
*   选择选项卡`Common`
*   在`Standard Input and Output`组中激活`File`并设置一个文件
*   选择`Append`复选框
*   运行你的配置

这样打印到控制台的所有内容也将打印到该文件中。

# java - 带有 Java 7 的 ProGuard + Maven

> ID：10929236
> 
> 赞同：18
> 
> 时间：2012-06-07T09:35:39.333
> 
> 标签：java, maven, proguard

我正在尝试让 ProGuard 成为我们 Maven 构建过程的一部分。问题是官方的 Maven 插件使用的是 ProGuard 4.3，它不支持 Java 7。有没有简单的方法让插件使用 Proguard 4.8 代替？

我已经尝试为插件指定依赖项，但 ProGuard 似乎有一个新的 Maven 模块结构（proguard-base、proguard-parent 等），所以插件不能使用任何 >4.4 的版本。这是我当前的 pom 的外观：

```
 <plugin>
                <groupId>com.pyx4me</groupId>
                <artifactId>proguard-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <phase>package</phase>
                        <goals>
                            <goal>proguard</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <proguardVersion>4.8</proguardVersion>
                    <obfuscate>true</obfuscate>
                    <options>
                        <option>-allowaccessmodification</option>
                        <option>-keep public class com.degoo.ui.ClientBackendStarter { public *; public static *; }</option>
                    </options>
                    <injar>${project.build.finalName}.jar</injar>
                    <outjar>${project.build.finalName}-small.jar</outjar>
                    <outputDirectory>${project.build.directory}</outputDirectory>
                    <libs>
                        <lib>${java.home}/lib/rt.jar</lib>
                        <lib>${java.home}/lib/jsse.jar</lib>
                    </libs>
                    <addMavenDescriptor>false</addMavenDescriptor>
                </configuration>
                <dependencies>
                    <dependency>
                        <groupId>net.sf.proguard</groupId>
                        <artifactId>proguard</artifactId>
                        <version>4.8</version>
                        <scope>runtime</scope>
                    </dependency>
                </dependencies>
            </plugin> 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-10T23:24:44.273

我使用来自`com.github.wvengen`. 注意不同`groupId`。这样我就可以使用最新的`proguard-base`神器 5.0。两者都在 Maven 中心。这是我的 pom.xml 中的 proguard-base 部分现在的样子：

父 pom.xml：

```
<build>
    <pluginManagement>
        <plugins>
            <plugin>
                <groupId>com.github.wvengen</groupId>
                <artifactId>proguard-maven-plugin</artifactId>
                <version>2.0.8</version>
                <dependencies>
                    <dependency>
                        <groupId>net.sf.proguard</groupId>
                        <artifactId>proguard-base</artifactId>
                        <version>5.0</version>
                        <scope>runtime</scope>
                    </dependency>
                </dependencies>
            </plugin>
[...] 
```

这是我的孩子 pom.xml 的其余部分，但您可能想要修改它：

```
 <build>
    <plugins>
        <plugin>
            <groupId>com.github.wvengen</groupId>
            <artifactId>proguard-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>process-classes-with-proguard</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>proguard</goal>
                    </goals>
                    <configuration>
                        <maxMemory>256m</maxMemory>
                        <injar>classes</injar>
                        <libs>
                            <lib>${rt.jar.path}</lib>
                            <lib>${jsse.jar.path}</lib>
                        </libs>
                        <obfuscate>true</obfuscate>
                        <attach>true</attach>
                        <addMavenDescriptor>false</addMavenDescriptor>
                        <proguardInclude>${project.basedir}/proguard.conf</proguardInclude>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

**更新：**对于我的 Android 项目，我没有使用像 proguard-maven-plugin 这样的专用 Proguard 插件，因为 android-maven-plugin 处理 ProGuard 混淆本身，并且更好地集成到 Android 的构建过程中。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-03T12:59:38.280

有一个原始[proguard-maven-plugin](http://pyx4me.com/pyx4me-maven-plugins/proguard-maven-plugin/)的分支。它是[git-hubed](https://github.com/wvengen/proguard-maven-plugin)。请看[你是怎么做](http://jinahya.wordpress.com/2011/11/04/profiling-the-bootstrap-classes-for-proguard-in-maven/)的。

**[这](http://jinahya.wordpress.com/2013/08/02/proguard-with-maven/)**是我们如何做到这一点的最新示例。**不再需要配置文件。**

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T10:00:42.213

我在这里找到了解决方案：[https](https://groups.google.com/forum/?fromgroups#!topic/pyx4me-users/NUZi1oySvQE) ://groups.google.com/forum/?fromgroups#!topic/pyx4me-users/NUZi1oySvQE 。基本上我必须下载 ProGuard 并将其安装到我的本地仓库。

# python - Python的多处理。程序没有完成 join()

> ID：10929237
> 
> 赞同：0
> 
> 时间：2012-06-07T09:35:47.743
> 
> 标签：python, multiprocessing

我有一个非常有用的程序。因此，我希望让它更快并尝试进行多处理。当我让程序使用低分辨率时，它工作得很好（我正在做一个功率谱；低分辨率意味着它会很快完成，但它不会很准确）。我的速度提高了约 2 倍，但是在进行高分辨率时，我在它完成之前终止了它，在它运行了比使用单处理器更长的时间之后。

我的主文件是这样的（我已经定义了`f_min,f_max,df,t,f`）

```
import multiprocessing as mp
from ast_power import power_spectrum

tasks = mp.cpu_count()
bound = mp.Queue()
res   = mp.Queue()
mint  = [mp.Process(target=power_spectrum,args=(t,f,bound,res)) for i in range(tasks)]

DF = (f_max-f_min)/tasks
for i in mint:
    i.start()
for i in range(1,tasks+1):
    a = i*f_min
    b = a+DF
    c = df
    d = 1
    bound.put([a,b,c,d])
for i in mint:
    i.join()
fr,p = [],[]
while tasks:
    frp,pp = res.get()
    frp,pp = list(frp),list(pp)
    fr += frp
    p  += pp
    tasks -= 1 
```

我的`ast_power`样子是这样的

```
import numpy as np
def power_spectrum(time, data, param, R='None' ):

    if R == 'None': #Normal
        f_min = param[0]
        f_max = param[1]
        df    = param[2]
        w     = param[3]
    else: # Multiprocessing
        f_min,f_max,df,w = param.get()
    freq = np.arange(f_min,f_max,df)    

    for i in xrange( len(freq) ):
        # Do the power spectrum...
        # will produce; power, alfa, beta

    if R == 'None': #Normal
        return freq,power,alfa,beta
    else: #Multiprocessing
        R.put([freq,power,alfa,beta]) 
```

我做得对吗？我认为它适用于高分辨率`df`（低分辨率）而不适用于低`df`（高分辨率）是非常奇怪的。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:41:29.250

join() 调用将阻塞进程直到它完成。如果您在运行下一个进程之前等待每个进程完成，您将失去多处理的好处！使用 start() 让进程独立运行。

# c# - 执行选择查询时出错

> ID：10929241
> 
> 赞同：0
> 
> 时间：2012-06-07T09:36:01.823
> 
> 标签：c#, sql-server, tsql, exception-handling, ado.net

我有一个简单的选择查询，但执行它会给我一个错误：

> 等于运算符中的数据类型 text 和 varchar 不兼容

这是代码：

```
string query = String.Format("Select SupplierId from tbl_Supplier where SupplierName ='" + cmbSupplierName.Text +"'");

SqlCommand cmd = new SqlCommand(query, connection);
SqlDataReader sdr = cmd.ExecuteReader();

while (sdr.Read())
{
   MessageBox.Show(sdr["SupplierId"].ToString());
} 
```

的数据类型`SupplierName`在`TEXT`数据库中。我不明白为什么它会给我错误`varchar`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:40:23.227

也许我错过了一些东西，但第一件事是：

1.  在使用之前打开您的 Connection

除此之外，

*   使用参数来避免 SQL 注入
*   用于`using-statement`处理/关闭连接和命令（任何实现`IDispoable)`
*   如果最大长度小于 8000 个字符，则使用代替，否则您需要使用代替`VARCHAR`（或将其转换为）`TEXT``LIKE``=``VARCHAR`

> “比较运算符测试两个表达式是否相同。比较运算符可用于除 text、ntext 或 image 数据类型的表达式之外的所有表达式。下表列出了 Transact-SQL 比较运算符。”

[http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/6bd4c661-ea0b-435f-af78-097e61549d41/](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/6bd4c661-ea0b-435f-af78-097e61549d41/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:41:11.507

如果 SupplierName 真的是一个文本字段，请尝试：

```
cast(SupplierName as varchar(max)) = '...' 
```

文本是一种[旧的且已弃用的列类型](http://msdn.microsoft.com/en-us/library/ms187993.aspx)。在过去，它可能包含 8000 多个字符，超过`varchar`. 自 SQL Server 2005 起，该角色由`varchar(max)`.

这将是一个了不起的供应商，尽管它的名称有 8000 多个字符。

# jquery - 文本切换动画跳跃

> ID：10929247
> 
> 赞同：1
> 
> 时间：2012-06-07T09:36:16.977
> 
> 标签：jquery, text, jquery-animate

我有一个问题，我不知道如何解决，因为它看起来像一个 jQuery 错误，但我不确定。我试图在我的网站头部制作一个漂亮的动画，但它失败了，并且 2 个字母（B，S）跳下来，而动画正在进行中。我不知道它为什么这样做。

有网站，我在哪里测试它：http: [//ihaveaproblem.brownstyle.eu/](http://ihaveaproblem.brownstyle.eu/)

请帮帮我，我该怎么办？我希望你能帮帮我 ：）

PS：这些问题只存在于 IE 和 Firefox 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:07:20.637

我添加了这个 CSS

```
.top {
    vertical-align: top;
} 
```

并将其应用于

```
<a class="atmenetes-betu top" href="#">B</a>

<a class="atmenetes-betu top" href="#">B</a> 
```

它在火狐上工作

也适用于 IE8

# php - 如何从php连接ireports

> ID：10929248
> 
> 赞同：0
> 
> 时间：2012-06-07T09:36:21.393
> 
> 标签：php

我正在使用 PHP 和 MySQL 开发一个 Web 应用程序。现在我面临选择报告工具的问题。我正在 Windows XP 环境中开发。但是托管服务器是Linux。因此我选择了 iReports，因为它也有 Linux 版本。

我想点击前端的按钮（用 PHP 编写），应该生成 Jasper 报告。但是如何将 iReport 与 PHP 代码连接起来呢？

我了解到 iReport 可以将 MySQL 与 JasperServer 连接（还不知道如何），但需要帮助才能从 PHP 前端连接它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T03:43:30.547

我使用 JasperServer CE 生成从 iReport 设计的报告。[我在这里](http://sneakybits.blogspot.com/2008/11/php-client-for-jasperserver-via-soap.html)使用 PHP 代码向 JasperServer 发出 SOAP 请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T18:36:57.957

在服务器上托管报告后，您可以查看[JasperForge 网站](http://jasperforge.org/scm/viewvc.php/trunk/samples/php-sample/rest/?root=jasperserver)上的 PHP REST 客户端。

使用此包，您可以显示来自服务器的报告，如下所示：

```
<?php
require_once('client/JasperClient.php');

$jc = new Jasper\JasperClient('hostname', '8080', 'username', 'password', 
                              '/jasperserver');
$report = $jc->runReport('/location/of/report/in/repository', 'html');

echo $report;
?> 
```

客户端附带的一些[文档](http://jasperforge.org/scm/viewvc.php/trunk/samples/php-sample/rest/docs/?root=jasperserver)也应该很有用。

# php - 从发票 PDF 中删除“product_options”（magento）

> ID：10929253
> 
> 赞同：0
> 
> 时间：2012-06-07T09:36:42.093
> 
> 标签：php, magento, pdf

我想`product_options`从发票 PDF 中删除。我找到了设置项目的位置（`$this->_drawItem($item, $page, $order);`在 Invoice.php (line148~) 中）；我尝试更改`product_options`手动使用`$item['product_options'] = "";`，但这无法进行任何更改。

有没有办法做到这一点？我需要改变什么才能做到这一点？我只需要在 PDF 中更改它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T14:08:14.693

未经测试，而不是`$item['product_options'] = "";`尝试`$item->setProductOptions('');`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-03-03T22:56:58.090

我最终将这一行从：更改`if ($option['value']) {`为：`if ($option['']) {`

# c# - C# - 使用 Lambda 创建多个线程

> ID：10929258
> 
> 赞同：3
> 
> 时间：2012-06-07T09:37:14.647
> 
> 标签：c#, multithreading, lambda

```
public void GatherDataFromSwitches(Device[] switches)
{
    List<Thread> workerThreads = new List<Thread>();
    for(int i = 0; i < switches.Length - 1; i++)
    {
        Thread t = new Thread(unused => GatherDataFromSwitch(switches[i]));
        workerThreads.Add(t);
        t.Start();
    }
    foreach (Thread d in workerThreads) d.Join(); //wait for all threads to finish
} 
```

如果我在运行该方法后循环通过交换机，我会注意到有些交换机没有添加数据，而有些交换机从多个交换机添加了数据。所以将引用传递给工作线程时出了点问题。我仍然不确定到底是什么，但我通过添加解决了这个问题

```
Thread.Sleep(100); 
```

紧接着

```
t.Start(); 
```

我假设这是可行的，因为现在新创建的线程在创建下一个线程之前有一些时间进行初始化。但这是一种解决方法，而不是修复方法。是因为 lambda 表达式的工作原理吗？

我该如何正确解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:39:59.847

问题是`i`在 lambda 中捕获的方式。在循环内制作一个本地副本，让每个 lambda 捕获一个不同的值：

```
public void GatherDataFromSwitches(Device[] switches)
{      
    List<Thread> workerThreads = new List<Thread>();
    for(int i = 0; i < switches.Length ; i++)
    {
        int j = i; // local i
        Thread t = new Thread(unused => GatherDataFromSwitch(switches[j]));
        workerThreads.Add(t);
        t.Start();
    }
    foreach (Thread d in workerThreads) d.Join(); //wait for all threads to finish
} 
```

或者`i`显式地作为参数传递给线程：

```
public void GatherDataFromSwitches(Device[] switches)
{      
    List<Thread> workerThreads = new List<Thread>();
    for(int i = 0; i < switches.Length ; i++)
    {
        Thread t = new Thread(param => { j = (int)param; GatherDataFromSwitch(switches[j]); });
        workerThreads.Add(t);
        t.Start(i);
    }
    foreach (Thread d in workerThreads) d.Join(); //wait for all threads to finish
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:41:00.747

```
public void GatherDataFromSwitches(Device[] switches) {
     List<Thread> workerThreads = new List<Thread>();
     for(int i = 0; i < switches.Length ; i++)
     {
         int j = i;
         Thread t = new Thread(unused => GatherDataFromSwitch(switches[j]));
         workerThreads.Add(t);
         t.Start();
     }
     foreach (Thread d in workerThreads) d.Join(); //wait for all threads to finish 
} 
```

`i`注意to的复制`j`。如果你有 resharper，你的代码会产生警告，更多关于这个问题的[Access to Modified Closure](https://stackoverflow.com/questions/235455/access-to-modified-closure)

# asp.net-mvc-3 - 如何过滤 Mvc Url Request 中的特殊字符？

> ID：10929262
> 
> 赞同：3
> 
> 时间：2012-06-07T09:37:40.993
> 
> 标签：asp.net-mvc-3, model-view-controller, special-characters

抱歉，我不知道如何描述我的问题。

我的 SEO 页面是这样的：localhost:24099/car/detail/2023/セドリック/グロリア%20ワゴン</p>

```
 routes.MapRoute("Car",
          "car/{id}/{name}",
          new { controller = "car", action = "id", name = UrlParameter.Optional },
          new { id = @"\d+" },
          new string[] { "SphereLight.Controllers" }
          ); 
```

car/detail/2023 是正确的 url，但是，セドリック/グロリア％20ワゴン 是特殊字符，页面

(car/detail/2023/セドリック/グロリア%20ワゴン) 重定向到自定义错误页面。

我怎样才能解决这个问题 ？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:59:32.113

看起来您忘记了路线中的动作……应该是：

```
routes.MapRoute("Car",
      "car/detail/{id}/{name}",
      new { controller = "car", action = "detail", id = 0, name = UrlParameter.Optional },
      new { id = @"\d+" },
      new string[] { "SphereLight.Controllers" }
      ); 
```

# java - 获取一个类的所有类依赖项（包括泛型）？

> ID：10929263
> 
> 赞同：2
> 
> 时间：2012-06-07T09:37:43.153
> 
> 标签：java, generics, bytecode, introspection

我想`Class`从给定中提取所有依赖项`Class`（以便使用我的类及其所有依赖项创建[Arquillian测试）。](http://www.jboss.org/arquillian.html)

我很难做到这一点（使用[`CtClass.getRefClasses()`](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/html/javassist/CtClass.html#getRefClasses%28%29)来自[Javassist](http://www.csg.ci.i.u-tokyo.ac.jp/~chiba/javassist/)），但我坚持使用泛型（似乎 Javassist 正确解析泛型，[但没有任何 API 来获取它们](http://www.csg.is.titech.ac.jp/~chiba/javassist/tutorial/tutorial3.html#generics)）。

这是我`inspect`目前递归方法的核心：

```
for (String className : (Iterable<String>)ClassPool.getDefault().get(klass.getName()).getRefClasses()) {
    try {
        inspect(Class.forName(className), classSet); // recursion
    } catch ( // ClassNotFoundException and NoClassDefFoundError handling
    }
} 
```

该迭代似乎可以正常工作以获取所有`Class`es 依赖项，但如果`Class`我要检查的操作例如 a `List<MyClass>`，我将不会`MyClass`从`Collection`返回的 by中获得`getRefClasses()`。

我检查了`.class`文件，字节码有该信息（`Ljava/util/List<Lmy/company/MyClass;>;`）。

你知道另一个 API 可以用来从给定的 es中提取**所有**使用的 es吗？`Class``Class`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:50:41.723

您可以使用[ASM](http://asm.ow2.org/)并实现一个访问者，该访问者在访问类型指令或变量声明等时记录所有类。您还可以获得*签名描述符*（即`Ljava/util/List<Lmy/company/MyClass;>;`）。

但是，并非所有依赖项都会出现在类文件中。假设您创建 a`new ArrayList<MyClass>`并且不将其分配给变量，那么类型参数信息[将丢失](https://stackoverflow.com/a/9098869/774444)。

# c# - 不支持多获取 Enyim Memcached C#

> ID：10929264
> 
> 赞同：0
> 
> 时间：2012-06-07T09:37:44.867
> 
> 标签：c#, memcached, enyim

我目前正在尝试使用 Enyim C# 客户端提出的多 Get 方法：

```
Enyim.Caching.MemcachedClient.Get(IEnumerable keys) 
```

应该返回键/结果对的字典。

不幸的是，该调用最终返回了一个不受支持的方法异常:-(

Enyim 不支持这个基本功能看起来很奇怪，有没有人遇到过同样不愉快的情况？

非常感谢

登记

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T10:13:07.613

仅供参考，我终于发现出了什么问题：

Multi-get 只支持**二进制协议**的 Enyim ，不支持**文本协议**。

登记

# jquery - 拖放 - 在数据库中存储拖动位置

> ID：10929265
> 
> 赞同：0
> 
> 时间：2012-06-07T09:37:46.867
> 
> 标签：jquery

是否有任何 JQuery 插件可用于将图像拖放到表格布局并将表格 div 位置保存到数据库？

我有一个网页，左侧和右侧有几张图片。我想使用 JQuery 拖放方法对其进行配置。我的意思是我应该有一个 JQuery 插件，在其中我将图像拖放到网页的左侧和右侧，这个位置将被保存到数据库，这样当用户登录时，他们可以在配置的位置看到图像。

这是用于配置网页中的图像位置。

注意：我不想要数据库脚本。我已经有一个方法“SavePositionToDB(string ImagePath, int tableRow,int TableColumn)”

JQuery 事件应该调用这个方法，就是这样。

提前感谢迪帕克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:46:43.173

分析给定的链接，也用例子，你会找到你想要的，

但是在获取位置坐标后，您必须做一些额外的事情，即通过 ajax 请求将该坐标传递给数据库。

[这是可拖放](http://www.elated.com/articles/drag-and-drop-with-jquery-your-essential-guide/)的链接

希望对你有帮助

# codeigniter - 相应页面上的codeigniter set_value

> ID：10929268
> 
> 赞同：0
> 
> 时间：2012-06-07T09:38:01.463
> 
> 标签：codeigniter

我正在构建一个标题搜索功能，该功能发布到包含“高级搜索”位的列表视图页面。我想做的是在加载新视图之前使用搜索的原始值在列表页面上的“高级搜索”位中设置名为 name 的输入字段的值。

所以简单总结一下：

我有一个出现在每个页面上的搜索功能（这是在模板标题位中）。我想捕获该搜索值并将该值设置在列表页面的高级搜索位上。

这些功能的工作原理如下：

它发布到我的站点控制器（站点/搜索）中的搜索功能。这反过来将搜索结果发送到列表视图（站点/列表）。

任何有关如何实现这一点编码的建议将不胜感激。问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T12:22:47.667

好吧`redirect('site/listing?q='.$this->input->post('search'))`

或者

```
$this->load->helper('url');
$this->load->library('session'); // Need configuration

$this->session->set_userdata('search', $this->input->post('search'));
redirect('site/listing'); 
```

并通过读取列表控制器中的搜索短语`$this->session->userdata('search')`

这很简单。

`listing`基本上在控制器中计算结果，而不是`search`. 当您可以通过引用获取数据时，发送这么多数据是没有意义的。

# python - 如何从未连接的图中随机选择两个节点（节点对），Python，networkx

> ID：10929269
> 
> 赞同：6
> 
> 时间：2012-06-07T09:38:05.870
> 
> 标签：python, nodes, networkx

我想从图中提取两个节点，但问题是它们不应该连接，即它们之间不存在直接边。我知道我可以使用“random.choice(g.edges())”获得随机边，但这会给我连接的随机节点。我想要一对未连接的节点（一对未连接的边）。帮帮我...谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T15:23:49.440

Simple! :)

Grab a random node - then pick a random node from the list of nodes excluding neighbours and itself. Code to illustrate is below. :)

```
import networkx as nx
from random import choice

# Consider this graph
#
#     3
#     |
# 2 - 1 - 5 - 6
#     | 
#     4

g = nx.Graph()
g.add_edge(1,2)
g.add_edge(1,3)
g.add_edge(1,4)
g.add_edge(1,5)
g.add_edge(5,6)

first_node = choice(g.nodes())                  # pick a random node
possible_nodes = set(g.nodes())
neighbours = g.neighbors(first_node) + [first_node]
possible_nodes.difference_update(neighbours)    # remove the first node and all its neighbours from the candidates
second_node = choice(list(possible_nodes))      # pick second node      

print first_node, second_node 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-05T14:12:01.597

到目前为止，这里提出的解决方案都不会对非边缘 (v1,v2) 进行均匀采样。考虑具有 4 个节点和 2 条边的示例图：

```
1 —— 2
|
3    4 
```

有 4 个非边可供选择：(1,4),(2,3),(2,4),(3,4)。使用 Maria 或 Philip 的方法，从所有 4 个顶点中随机选择第一个顶点，然后从受限顶点集中选择第二个顶点，以免创建任何边（或自环），将为每个非-要选择的边缘：

p(1,4) = 1/4 * 1 + 1/4 * 1/3 = 8/24

p(2,3) = 1/4 * 1/2 + 1/4 * 1/2 = 6/24

p(3,4) = p(2,4) = 1/4 * 1/2 + 1/4 * 1/3 = 5/24

所以程序不统一。

这意味着如果您想要均匀采样的非边，则必须选择不受限制的两个顶点并在它们形成现有边（或相等）时拒绝样本（两个顶点）。在 NetworkX 中：

```
v1 = np.random.choice(G.nodes())
v2 = np.random.choice(G.nodes())

while G.has(edge(v1,v2)) or v1==v2:
  v1 = np.random.choice(G.nodes())
  v2 = np.random.choice(G.nodes()) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T14:42:06.773

我不知道那个图书馆，但我猜你可以做以下事情：

```
 n1 = random.choice(g.nodes())
  n2 = random.choice(g.nodes()) 
  while (n1 == n2 or any of the edges of n1 lead to n2):
    n2 = random.choice(g.nodes())
  enjoy(yourNodes) 
```

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-07T05:22:41.993

If the graph is small, you can collect `nx.non_edges()` into an `np.array` and `random.choice` from it:

```
non_edges = np.array(nx.non_edges(graph))

sample_num = 10000
sample = non_edges[np.random.choice(len(non_edges), sample_num, replace=False)] 
```

Beware that `non_edges()` itself returns you the generator, not the actual list. But if you turn it into an `np.array` you acutally collects all the items in the generator. If your graph is large and sparse, this may raise a memory error, but for small graphs it would the most straightforward way to do it.

# iphone - 导航栏在推送视图控制器时不显示

> ID：10929273
> 
> 赞同：3
> 
> 时间：2012-06-07T09:38:19.363
> 
> 标签：iphone, objective-c, uinavigationcontroller, uinavigationbar, viewwillappear

我正在开发导航基础应用程序。我的问题是，当我将其他视图控制器推入导航控制器时，未调用视图控制器 viewWillAppear。

`TestCategoryHistory *testVC = [[TestCategoryHistory alloc] initWithNibName:@"TestCategoryHistory" bundle:nil];`

```
[self.navigationController pushViewController:testVC animated:YES];
[testVC release];` 
```

这里没有调用测试的 viewWillAppear。而且导航栏也没有显示..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:45:46.623

确保您当前的视图控制器“在”导航控制器中。只有这样，您才能推送另一个视图控制器来显示。

# javascript - JavaScript OO - 如何制作一个巨大的面向对象的应用程序并使用静态成员

> ID：10929281
> 
> 赞同：0
> 
> 时间：2012-06-07T09:38:58.763
> 
> 标签：javascript, oop, static

我正在尝试用 javascript 做一个巨大的 web 应用程序，如果我不想搞砸一切，我认为我必须以面向对象的方式来做。所以，我搜索了很多，发现了很多不同的方法来声明类和在 JS 中创建实例，比如环境变量、函数、函数中的函数......我想知道实现大型面向对象结构的最佳方法是什么（有点像 Java/C# 或其他强面向对象的语言），更准确地说，如何声明我可以在类的所有实例中访问的静态成员。非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:42:41.913

阅读“JavaScript - The Good Parts”并牢记模块模式：

[http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth](http://www.adequatelygood.com/2010/3/JavaScript-Module-Pattern-In-Depth)

# bash - 在 Bash 中获取精确的带引号的字符串参数

> ID：10929282
> 
> 赞同：4
> 
> 时间：2012-06-07T09:39:04.420
> 
> 标签：bash, sh

# 问题

*我想按原样*使用给脚本的参数- 带引号和所有内容。到目前为止，我发现的所有解决方案都去掉了引号，或者做一些微妙的不同。

# 设想

例如，我有一个接受字符串作为命令行参数的工具

```
./tool --formula="AG EF phi;" 
```

我还有一个应该调用脚本的包装脚本。它的调用应该是

```
wrap.sh ./tool --formula="AG EF phi;" 
```

这个脚本做了类似的事情

```
# preparation phase
# ...

# call tool and remember exit code
$*
result=$?

# evaluation phase
# ...

exit $result 
```

不幸的是，该工具随后被称为

```
./tool --formula=AG EF phi; 
```

这与上面不同，会产生语法错误。我发现的唯一黑客会给我类似的东西

```
./tool "--formula=AG EF phi;" 
```

这也是错误的。

# 细节

具体来说，这里有一些虚拟代码来举例说明这个问题：

首先，C程序“tool.c”。

```
#include <stdio.h>

int main(int argc, char** argv) {
    int i;
    for (i = 0; i < argc; i++) {
        printf("%d: %s\n", i, argv[i]);
    }
    return 0;
} 
```

然后，包装脚本“wrap.sh”：

```
#!/bin/bash
echo $*
$*
exit $? 
```

现在这是我尝试过的：

```
$ ./tool --formula="Foo bar"
0: ./tool
1: --formula=Foo bar

$ ./wrap.sh ./tool --formula="Foo bar"
./tool --formula=Foo bar
0: ./tool
1: --formula=Foo
2: bar

$ ./wrap.sh ./tool --formula="\"Foo bar\""
./tool --formula="Foo bar"
0: ./tool
1: --formula="Foo
2: bar"

$ ./wrap.sh ./tool --formula="\"Foo bar\""
./tool --formula="Foo bar"
0: ./tool
1: --formula="Foo
2: bar"

$ ./wrap.sh "./tool --formula=\"\\\"Foo bar\\\"\""
./tool --formula="\"Foo bar\""
0: ./tool
1: --formula="\"Foo
2: bar\"" 
```

这就是我想要的（对于包装脚本中的任何必要更改）：

```
$ ./wrap.sh ./tool --formula="Foo bar"
0: ./tool
1: --formula=Foo bar 
```

# 提案

## 转义行情

当我转义像[Shabaz 提议](https://stackoverflow.com/a/10929367/266378)的引号时，变量`$*`包含正确引用的字符串，例如：

```
wrap.sh ./tool --formula="\"AG EF phi;\"" 
```

然后在`wrap.sh`代码中：

```
echo $* 
```

会产生

```
./tool --formula="AG EF phi;" 
```

但是，执行`$*`会产生如上的确切错误：参数 of`formula`在“AG”之后被剥离。此外，最好不要转义引号。

不同的外壳有帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:16:53.757

请参阅[BashFAQ/050](http://mywiki.wooledge.org/BashFAQ/050)（“我正在尝试将命令放入变量中，但复杂的情况总是失败！”）。

为了保留空格并正确处理参数传递，您应该使用它来执行包装脚本的参数：

```
"$@" 
```

使用此方法，您无需在运行包装器时进行任何额外的引用。

```
$ cat ./wrap.sh
#!/bin/bash
echo "$@"
"$@"
result=$?
exit $result
$ ./wrap.sh ./tool --formula="Foo bar"
./tool --formula=Foo bar
0: ./tool
1: --formula=Foo bar 
```

使用`$@`或不加`$*`引号或加引号`$*`会使字符串变平，以便将其视为丢失所需分组的单词序列。

来自[`man bash`](http://tiswww.case.edu/php/chet/bash/bash.html#lbAV)：

```
 *      Expands  to  the positional parameters, starting from one.  When
          the expansion occurs within double quotes, it expands to a  sin‐
          gle word with the value of each parameter separated by the first
          character of the IFS special variable.  That is, "$*" is equiva‐
          lent to "$1c$2c...", where c is the first character of the value
          of the IFS variable.  If IFS is unset, the parameters are  sepa‐
          rated  by  spaces.   If  IFS  is null, the parameters are joined
          without intervening separators.
   @      Expands to the positional parameters, starting from  one.   When
          the  expansion  occurs  within  double  quotes,  each  parameter
          expands to a separate word.  That is, "$@" is equivalent to "$1"
          "$2"  ...   If the double-quoted expansion occurs within a word,
          the expansion of the first parameter is joined with  the  begin‐
          ning  part  of  the original word, and the expansion of the last
          parameter is joined with the last part  of  the  original  word.
          When  there  are no positional parameters, "$@" and $@ expand to
          nothing (i.e., they are removed). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:21:47.483

您可以使用此脚本来保留所需的空格：

```
#!/bin/bash
exec bash -c "$*"
ret=$?
exit $ret 
```

使用此命令行执行上述脚本：

```
./wrap.sh ./tool --formula="\"Foo bar baz\"" 
```

### 输出：

```
0: ./tool
1: --formula=Foo bar baz 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:43:41.837

你应该`"`用`\`. 但是，要将它们保存在一个字符串中，您应该再次将它们括在`"`. 那是：

```
./tool --formula="\"AG EF phi;\"" 
```

Bash 会自动将 any 转换`"text"`为`text`一个单词，即使它包含空格。它像任何其他非特殊字符一样威胁转义字符。因此，要实际编写`"`您需要使用的字符`\"`。这两点的组合（`"`用于将空格分隔的单词保持为一个单词并需要输入`"`自身）导致了上面的行。

现在你想让你的脚本执行这一行，但是你将它作为 bash 本身的参数传递给脚本。因此，这种特殊字符的分析和替换/删除需要进行两次。因此，您需要以这样的方式将参数传递给脚本，以便在此分析之后，它将产生上面的行。所以：

```
./wrap.sh "./tool --formula=\"\\\"AG EF phi;\\\"\"" 
```

请注意 every`"`现在是如何变成`\"`和 every `\`into`\\`的。整件事都用引号括起来。

PS你可以用回声测试这个：

```
$ echo "a b c"
a b c
$ echo "\"a b c\""
"a b c"
$ echo "echo \"\\\"a b c\\\"\""
echo "\"a b c\"" 
```

# python - 如何简单地创建一个 CheckBox 列表，该列表具有像带有 PyQt 的 ComboBox 的下拉列表？

> ID：10929285
> 
> 赞同：0
> 
> 时间：2012-06-07T09:39:09.730
> 
> 标签：python, qt, checkbox, combobox, pyqt

我是 PyQt 的新手，我必须开发一个使用它的应用程序。目前，我没有任何问题，但我遇到了一些问题。我必须创建一个“组合框，其项目可检查，如 CheckBox”。这个 ComboBox 应该包含许多图像格式，如“jpg”、“exr”或“tga”，我将不得不拿起选中选项的文本并将其放入变量中。问题是我找不到关于使用 ComboBox 使项目可检查的事情（如果你知道如何，它会很乐意帮助我！）

因为我不能用 ComboBox 来做，也许我可以用我认为的 QList 来做，但我也找不到像我这样的初学者可以理解的任何东西。我已经阅读了有关标志和“Qt.ItemIsUserCheckable”的内容，但我不知道如何以简单的方式使用它:(

你能帮助我吗 ？谢谢 ！

PyQt 版本：4.4.3 Python 版本：2.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:22:42.053

您可以使用模型-> 视图框架来执行此操作，但这意味着实现自定义模型以支持可检查数据。

您可以通过继承 QAbstractItemModel 来创建自定义模型。这为 QComboBox 提供了一个 API，用于访问底层数据。在我的脑海中，我认为您需要实现 flags 方法以指示您支持 ItemIsUserCheckable 用于您希望能够检查的索引。您还需要实现 data() 从基础数据报告数据状态，以及 setData() 接受来自 QComboBox 的输入并更改基础数据。

然后使用 setModel() 将其设置为 QComboBox 的模型。

这不是真正的初学者，但 Qt 中的模型-> 视图框架是它最重要和最有价值的特性之一，非常值得掌握。

# android - 我可以使用兼容包 v4 创建 Fragment ListActivity 吗？

> ID：10929287
> 
> 赞同：11
> 
> 时间：2012-06-07T09:39:22.780
> 
> 标签：android, android-listview, android-fragments

我一直在尝试完成专为 android 3.0+ 设计的教程“使用片段”

为了完成我正在使用兼容性包 v4（因为我的 API 是 7）。但是我被困在名单上。我找不到直接的答案。

我得到一个 ClassNotFoundException。我从 FragmentActivity 继承了片段类，但是我的 ListActivity 呢？没有 FragmentListActivity 这样的东西，我认为它一直在崩溃。

我可以使用兼容包 v4 创建 Fragment ListActivity 吗？或者根本不可能？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-04T15:28:24.040

不，不存在。愚蠢的支持库。

该解决方案易于创建，但维护起来很繁琐。只需将本[机`ListActivity`类](https://raw.github.com/android/platform_frameworks_base/d6c1919779acb042392615637b9007e0c4b89023/core/java/android/app/ListActivity.java)复制到您的项目中，将其重命名为“ `FragmentListActivity`”，然后让它扩展`FragmentActivity`而不是`Activity`. 不需要其他调整，复制很容易。如果你不确定你可以在我的代码中[达到峰值](http://bazaar.launchpad.net/~pjv/collectionista/ics-main/view/head:/collectionista-library/src/net/lp/collectionista/util/FragmentListActivity.java)，但最好还是获得最新的。

`GridActivity`我会说也是一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-02T01:22:24.147

看这个问题： [ListActivity/MapActivity 使用兼容库转换为 Fragments 时该怎么办？](https://stackoverflow.com/questions/6497121/what-to-do-about-listactivity-mapactivity-when-converting-to-fragments-using-the)

有一个**ListFragment**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:15:20.103

是的，您可以创建与 viewpager 包 v4 兼容的 Fragment ListActivity

这是[示例](http://blog.stylingandroid.com/archives/542)

另一个[例子](http://manishkpr.webheavens.com/android-viewpager-example/)

# iphone - 在 UITableView 中显示节数据

> ID：10929299
> 
> 赞同：2
> 
> 时间：2012-06-07T09:39:52.383
> 
> 标签：iphone, xcode, uitableview

我是分段 UITableVIew 的新手。我的问题是我有一个名为 stringsArray 的数组，它的字符串如下

```
NSMutableArray *dataArray = [[NSMutableArray alloc] initWitObjects:@"apple1",@"apple2",@"ball",@"cat",@"cat2",nil]; //I have many strings. 
```

我需要显示如下数据

我需要在 A 部分下显示 apple1,apple2 我需要像这样在 B 部分下显示球。

任何机构都可以帮助我做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:44:35.507

基本上，您需要在数组 stringsForSection1 和 stringsForSection2 中获取您的字符串。根据自己的喜好更改名称；）然后实现 UITableViewDataSourceProtocol。您需要实现 2 种方法：

-tableView:numberForRowsInSection:

-tableView:cellForRowAtIndexPath:

这是参考的链接： [http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDataSource_Protocol/Reference/Reference.html) 在 tableView:cellForRowAtIndexPath 中， (NSIndexPath *)indexPath 将包含一个section- 和 row- 属性。根据这些值，您可以从 stringsForSection1 或 stringsForSection2 加载数据，如下所示：

```
if(indexPath.section==1){
    cell.textLabel.text = [stringsForSection1 objectAtIndex:indexPath.row];
}else if(indexPath.section==2){
    cell.textLabel.text = [stringsForSection2 objectAtIndex:indexPath.row];
} 
```

玩得开心

# jquery - 如何使用效果和循环使用 Jquery 更改图像源？

> ID：10929300
> 
> 赞同：0
> 
> 时间：2012-06-07T09:39:53.117
> 
> 标签：jquery

我想将图像源从更改`image1.png`为`image2.png`（使用`fade`）并循环。我在下面有这段代码，但这不是循环到 image1.png。

**我的代码**

```
setInterval(function(){
    $('.class')
             .attr('src','image2.png')
             .stop(true,true).hide()
             .fadeIn('slow');
}, 1000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:43:06.297

```
setInterval(function(){
  var image = $('.class');
  var src = image.attr('src') === 'image1.png' ? 'image2.png' : 'image1.png';
  image.attr('src', src).stop(true,true).hide().fadeIn('slow');
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:43:23.803

```
setInterval(function(){
    var source = jQuery('.class').attr('src') == 'image2.png' ? 'image1.png' : 'image2.png'
    $('.class').attr('src',source ).stop(true,true).hide().fadeIn('slow'); 
},1000); 
```

# javascript - 加载 facebook wall feed JSON 问题

> ID：10929308
> 
> 赞同：3
> 
> 时间：2012-06-07T09:40:09.350
> 
> 标签：javascript, facebook, json, jquery

我正在尝试在我的网站客户端使用 jQuery 加载 facebook 墙提要。我用于 facebook 请求的提要是：

> [http://www.facebook.com/feeds/page.php?format=json&id=40796308305](http://www.facebook.com/feeds/page.php?format=json&id=40796308305)

我尝试了以下方法：

1.

```
$.getJSON('http://www.facebook.com/feeds/page.php?format=json&id=40796308305',function(data){
   console.log(data)

}); 
```

返回错误：

> XMLHttpRequest 无法加载[http://www.facebook.com/feeds/page.php?format=json&id=40796308305](http://www.facebook.com/feeds/page.php?format=json&id=40796308305)。Access-Control-Allow-Origin 不允许来源[http://xxxx.local 。](http://xxxx.local)

2.

```
$.ajax({
    url: 'http://www.facebook.com/feeds/page.php',
    type: 'GET',
    dataType: 'json',
    data: {
        id: '40796308305',
        format: 'json'
    },
    success: function(data, textStatus, xhr) {
        console.log(data);
    }
}); 
```

返回相同的错误。

3.

```
$.ajax({
    url: 'http://www.facebook.com/feeds/page.php',
    type: 'GET',
    dataType: 'json',
    data: {
        id: '40796308305',
        format: 'jsonp'
    },
    success: function(data, textStatus, xhr) {
        console.log(data);
    }

}); 
```

回报：

> Uncaught SyntaxError: Unexpected token :

并且似乎正在解析提要。

如何加载 facebook json 提要，以便我可以像访问数组一样访问它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:53:10.393

由于跨域策略限制，您不能仅对客户端执行此操作。

您可能需要为该数据创建自己的代理（此页面数据端点不支持 JSONP 并且不能与`callback`参数一起使用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:50:54.620

将数据类型从 更改`json`为`jsonp`，因为它是跨域调用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:50:49.150

我看到这个线程已经快 6 个月了，所以希望还不算太晚。

```
function fbInfo(user, id) {
    var jurl = "https://graph.facebook.com/"+user+"&callback=?";
    console.log(jurl);
    $.getJSON(jurl, function(data) {
           //do stuff
});
} 
```

我在我的 html 页面中调用该函数并将 facebook 页面的用户名（“用户”）传递给 url 变量“jurl”

使用 $.getJSON 方法，然后随意操作数据。

这绝对有效，因为我目前正在使用它将业务信息从 Facebook 页面提取到我的网站。

# facebook - 评论标题中的链接错误。我可以改变它吗？

> ID：10929310
> 
> 赞同：-1
> 
> 时间：2012-06-07T09:40:17.070
> 
> 标签：facebook, hyperlink, comments, facebook-comments

我有网上商店，并在那里添加了 FB 评论。一切正常，但页面名称链接“用户名评论页面名称”是错误的。评论产品的网址是[http://www.domain.com/store/product_info.php?products_id=27](http://www.domain.com/store/product_info.php?products_id=27)但链接显示它[http://www.domain.com/?products_id=27](http://www.domain.com/?products_id=27)。

我可以将缺少的部分 (store/product_info.php) 添加到链接中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:22:33.860

[使用Facebook 调试器](https://developers.facebook.com/tools/debug)检查您的URL——它会告诉您 FB 实际读取的页面。常见的错误是设置了错误的规范 URL 或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:46:44.447

您应该通过在[评论社交插件](https://developers.facebook.com/docs/reference/plugins/comments/)`href`的/`data-href`属性中使用页面的实际 URL 来更正该链接

**注意：**即使您使用错误的 URL（甚至可能使用不存在的 URL），评论插件也可以工作，并且评论将与使用的 URL 链接，如果您更改它，您将丢失所有现有的评论！

# ios - CAEmitterLayer如何在短时间内重复发射

> ID：10929316
> 
> 赞同：12
> 
> 时间：2012-06-07T09:40:26.333
> 
> 标签：ios, uiview, core-animation, calayer, caemitterlayer

我正在玩 CAEmitterLayer，现在我遇到了一些问题:(

例如，我需要一个短粒子效果——比如撞击或爆炸——在一个地方（所以我在这个地方有一个小的 UIView）。我该怎么做？

1，我有一个想法——用它的粒子创建emitterLayer并将lifeTime设置为0。例如，当我需要它时，我将lifeTime设置为1，过了一会儿我可以将它设置回0。 - 但它没有做任何事情:(

2、第二个想法是每次需要时都创建[CAEmitterLayer layer]并将其添加为layers sublayer。但是我在想当我重复它十次时会发生什么……我有 10 个子层，其中一个活跃，9 个“死”？一般如何停止发射？一段时间后我有 performSelector 将生命周期设置为 0 和其他具有更长间隔的选择器来 removeFromSuperlayer ......但它并不像我想要的那样漂亮:( 还有另一种“正确”的方式吗？

我认为子层太多与我的另一个问题有关……我只想发射一个粒子。当我这样做时，它会起作用。但有时它会发出三个粒子，有时是两个……这让我很生气。当我不停止发射器时，它每次都会给出正确数量的粒子......

所以问题...</p>

如何在短时间内发射粒子。如何使用它们 - 比如停止，从父层移除，......如何发射精确数量的粒子

编辑：

```
emitter = [CAEmitterLayer layer];
emitter.emitterPosition = CGPointMake(self.view.bounds.size.width/2, self.view.bounds.size.height/2);
emitter.emitterMode = kCAEmitterLayerPoints;
emitter.emitterShape    = kCAEmitterLayerPoint;
emitter.renderMode      = kCAEmitterLayerOldestFirst;
emitter.lifetime = 0;

particle = [CAEmitterCell emitterCell];
[particle setName:@"hit"];
particle.birthRate      = 1;
particle.emissionLongitude  = 3*M_PI_2;//270deg
particle.lifetime       = 0.75;
particle.lifetimeRange      = 0;
particle.velocity       = 110;
particle.velocityRange      = 20;
particle.emissionRange      = M_PI_2;//PI/2 = 90degrees
particle.yAcceleration      = 200;
particle.contents       = (id) [[UIImage imageNamed:@"50"] CGImage];
particle.scale          = 1.0;
particle.scaleSpeed     = -0.5;
particle.alphaSpeed     = -1.0;

emitter.emitterCells = [NSArray arrayWithObject:particle];
[(CAEmitterLayer *)self.view.layer addSublayer: emitter]; 
```

然后在与按钮链接的方法中，我这样做：

```
emitter.lifetime = 1.0;

dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.9 * NSEC_PER_SEC), dispatch_get_current_queue(), ^{
    emitter.lifetime = 0;
}); 
```

更改为@David Rönnqvist 态度后已编辑和更新

```
CAEmitterCell *dustCell = [CAEmitterCell emitterCell];
[dustCell setBirthRate:1];
[dustCell setLifetime:1.5];
[dustCell setName:@"dust"];
[dustCell setContents:(id) [[UIImage imageNamed:@"smoke"] CGImage]];
[dustCell setVelocity:50];
[dustCell setEmissionRange:M_PI];
// Various configurations for the appearance...
// This is the only cell with configured scale, 
// color, content, emissionLongitude, etc...

[emitter setEmitterCells:[NSArray arrayWithObject:dustCell]];
[(CAEmitterLayer *)self.view.layer addSublayer:emitter];

// After one burst, change the birth rate of the cloud to 0
// so that there is only one burst per side.
double delayInSeconds = 0.5; // One cloud will have been created by now, but not two
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void) {

    [emitter setLifetime:0.0];
    [emitter setValue:[NSNumber numberWithFloat:0.0] 
               forKeyPath:@"emitterCells.dust.birthRate"];
}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T11:14:24.567

您可以通过一次配置所有内容（不要每次都添加新的发射器单元）并将其设置`birthRate`为 0（不会创建任何粒子）来做到这一点。然后，当您要创建粒子时，您可以将 设置为`birthRate`每秒要创建的粒子数。一段时间后，您将`birthRate`back 设置为 0，以便发射停止。你可以使用类似的东西`dispatch_after()`来做这个延迟。

* * *

我不久前做了类似的事情并像这样解决了它。以下将创建一个快速的粒子爆发。下次您希望粒子发射时，将“云”的出生率更改回 1。

```
CAEmitterCell *dustCell = [[CAEmitterCell alloc] init];
[dustCell setBirthRate:7000];
[dustCell setLifetime:3.5];
// Various configurations for the appearance...
// This is the only cell with configured scale, 
// color, content, emissionLongitude, etc...

CAEmitterCell *dustCloud = [CAEmitterCell emitterCell];
[dustCloud setBirthRate:1.0]; // Create one cloud every second
[dustCloud setLifetime:0.06]; // Emit dustCells for 0.06 seconds
[dustCloud setEmitterCells:[NSArray arrayWithObject:dustCell]];
[dustCloud setName:@"cloud"]; // Use this name to change the birthRate later

[dustEmitter setEmitterPosition:myPositionForDustEmitter];
[rightDustEmitter setEmitterCells:[NSArray arrayWithObject:dustCloud]];

// After one burst, change the birth rate of the cloud to 0
// so that there is only one burst per side.
double delayInSeconds = 0.5; // One cloud will have been created by now, but not two
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void) {

    // For some reason, setting the birthRate of the "cloud" to 0
    // has a strange side effect that when you set it back to 1 all
    // the missed emissions seems to happen at once during the first
    // emission and then it goes back to only emitting once per
    // second. (Thanks D33 for pointing this out).
    // By instead changing the birthRate of the "dust" particle
    // to 0 and then back to (in my case) 7000 gives the visual
    // effect that I'm expecting. I'm not sure why it works
    // this way but at least this works for me...
    // NOTE: This is only relevant in case you want to re-use
    // the emitters for a second emission later on by setting
    // the birthRate up to a non-zero value.
    [dustEmitter setValue:[NSNumber numberWithFloat:0.0] 
               forKeyPath:@"emitterCells.cloud.emitterCells.dust.birthRate"];
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-30T09:20:07.243

感谢铸造厂[在这里](https://stackoverflow.com/a/15995745/159991)的出色回答，我解决了一个与此非常相似的问题。它不涉及隐藏任何视图。简而言之，它是这样的：

像往常一样设置您的发射器，命名发射器单元并将它们的出生率值设为零：

```
-(void) setUpEmission {
  # ...
  # snip lots of config
  # ...
  [emitterCell1 setBirthrate:0];
  [emitterCell1 setName:@"emitter1"];
  [emitterCell2 setBirthrate:0];
  [emitterCell2 setName:@"emitter2"];
  emitterLayer.emitterCells = @[emitterCell1, emitterCell2];
  [self.view.layer addSublayer:emitterLayer];
} 
```

然后创建一个在片刻后自动关闭发射的 start 方法和一个 stop 方法：

```
-(void) startEmission {
  [emitterLayer setValue:@600 forKeyPath:@"emitterCells.emitter1.birthRate"];
  [emitterLayer setValue:@250 forKeyPath:@"emitterCells.emitter2.birthRate"];
  [NSTimer scheduledTimerWithTimeInterval:0.2 target:self selector:@selector(stopEmission) userInfo:nil repeats:NO];
}

-(void) stopEmission {
  [emitterLayer setValue:@0 forKeyPath:@"emitterCells.emitter1.birthRate"];
  [emitterLayer setValue:@0 forKeyPath:@"emitterCells.emitter2.birthRate"];
} 
```

在此示例中，我将出生率设置为 600 和 250。计时器会在 0.2 秒后关闭发射，但请使用您认为合适的任何值。

最佳解决方案是如果 Apple 实施了启动/停止方法，但除此之外，我发现这是一个令人满意的解决方案。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-01T14:16:56.423

我也在寻找解决方案并找到了这篇[文章](http://blog.argteam.com/coding/better-effects-3-simple-ios-5-particle-systems-by-example/)。

看看这个[Gist](https://gist.github.com/3731696)的五彩纸屑粒子及其`Stop Emitting`方法。

它的作用是：

1.  将粒子视图添加到您的显示视图。
2.  让粒子随心所欲地运行。
3.  停止新粒子的发射`confettiEmitter.birthRate = 0.0;`。
4.  等待几秒钟。
5.  删除粒子视图。

希望它可以提供帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-13T12:15:19.190

`CAEmitter.birthRate`是动画的。假设您已`CAEmitterLayer`在视图中添加了几个 s，您可以执行此操作以动画化出生率的衰减，然后在几秒钟后重新开始：

```
- (void) startConfetti{
  for (CALayer *emitterLayer in self.layer.sublayers) {
    if ([emitterLayer isKindOfClass: [CAEmitterLayer class]]) {
      ((CAEmitterLayer *)emitterLayer).beginTime = CACurrentMediaTime();
      ((CAEmitterLayer *)emitterLayer).birthRate = 6;

      // Decay over time
      [((CAEmitterLayer *)emitterLayer) removeAllAnimations];

      [CATransaction begin];
      CABasicAnimation *birthRateAnim = [CABasicAnimation animationWithKeyPath:@"birthRate"];
      birthRateAnim.duration = 5.0f;
      birthRateAnim.fromValue = [NSNumber numberWithFloat:((CAEmitterLayer *)emitterLayer).birthRate];
      birthRateAnim.toValue = [NSNumber numberWithFloat:0.0f];
      birthRateAnim.repeatCount = 0;
      birthRateAnim.autoreverses = NO;
      birthRateAnim.fillMode = kCAFillModeForwards;
      [((CAEmitterLayer *)emitterLayer) addAnimation:birthRateAnim forKey:@"finishOff"];
      [CATransaction setCompletionBlock:^{
        ((CAEmitterLayer *)emitterLayer).birthRate = 0.f;
        [self performSelector:@selector(startConfetti) withObject:nil afterDelay:10];
      }];
      [CATransaction commit];
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-10T09:59:04.217

好的，最后，经过数小时的测试和尝试不同的风格（初始化、删除、配置发射器），我得出了最终的结果......实际上这让我非常沮丧......

- -这不可能！ - -

即使我每次需要它时都创建发射器及其粒子，如果我只设置一个粒子发射，它在大多数情况下都会给我一个粒子......但它不是 100%，有时它只发射三个或两个粒子。 .. 这是随机的。这是非常糟糕的。因为它是视觉效果... :(

无论哪种方式，如果有人有提示如何解决这个问题，请告诉我......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-01T01:51:36.883

您是否考虑过利用 CALayers 的动画属性？

```
 func setEmitterProperties() {

    backgroundColor = UIColor.clearColor().CGColor
    birthRate = kStandardBirthRate
    emitterShape = kCAEmitterLayerLine
    emitterCells = [typeOneCell, typeTwoCell, typeOneCell]
    preservesDepth = false

    let birthRateDecayAnimation = CABasicAnimation()
    birthRateDecayAnimation.removedOnCompletion = true
    birthRateDecayAnimation.timingFunction = CAMediaTimingFunction(name: kCAMediaTimingFunctionEaseIn)
    birthRateDecayAnimation.duration = CFTimeInterval(kStandardAnimationDuration)
    birthRateDecayAnimation.fromValue = NSNumber(float: birthRate)
    birthRateDecayAnimation.toValue = NSNumber(float: 0)
    birthRateDecayAnimation.keyPath = kBirthRateDecayAnimationKey
    birthRateDecayAnimation.delegate = self

  } 
```

1.  如果您不想在完成时执行任何操作，委托属性也可以为 nil，如*animationDidStop:finished：*

2.  常量 kBirthRateDecayAnimationKey 和 kStandardAnimationDuration 使用我的约定，而不是 Apple 的。

# android - 在 android 中登录的 SharedPreferences

> ID：10929319
> 
> 赞同：0
> 
> 时间：2012-06-07T09:40:36.313
> 
> 标签：android, login, sharedpreferences

我正在开发需要登录的 android 应用程序。我想检查用户何时按下 PostIdea 活动按钮，然后检查用户是否登录，如果没有，则重定向到登录页面，否则继续执行任务。

在这里，我为此使用 SharedPreferences。现在，当我按下登录按钮时，将用户名和密码添加到 SharedPreferences 中，当按下 PostIdea Activity 时，我得到了用户名和密码。

**但我的问题**是，当我重新启动应用程序并在没有登录的情况下进入 PostIdea 活动时，它会记住 SharedPreferences 数据的最后一次登录（用户名/密码）。如何从 SharedPreferences 中删除该数据，以便我的应用程序正常工作。让我知道我在哪里做错了，或者我的问题还有其他解决方案。

谢谢。

登录活动类

```
public class LoginActivity extends CheerfoolznativeActivity {

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_login);
    setHeader("Login");

    editUser = (EditText) findViewById(R.id.login_useredit);
    editPass = (EditText) findViewById(R.id.login_passedit);
    txterror = (TextView) findViewById(R.id.login_error);
    textlogin = (TextView) findViewById(R.id.login_postidea_textView);
    btngotoregister = (Button) findViewById(R.id.login_btnLinkToRegisterScreen);
    btnlogin = (Button) findViewById(R.id.login_button);
    pgb = (ProgressBar) findViewById(R.id.login_progressBar);

    btnlogin.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            new Login().execute();

        }
    });

}

public class Login extends AsyncTask<Void, Void, Void> {

    int i = 0;
    String uName ;
    String Password;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();

        uName = editUser.getText().toString().trim();
        Password = editPass.getText().toString().trim();

        if (uName.equals("") | Password.equals("")) {
            Toast.makeText(getApplicationContext(), "Enter the Data",
                    Toast.LENGTH_SHORT).show();

            if (editUser.length() == 0) {
                editUser.setError("Enter Username");
            }
            if (editPass.length() == 0) {
                editPass.setError("Enter Password");
            }
        } else {

            pgb.setVisibility(View.VISIBLE);
        }

    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub

            String loginURL = "http://www.cheerfoolz.com/rest/user/login";

            strResponse = util.makeWebCall(loginURL, uName, Password);

        return null;
    }

    @Override
    public void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

    txterror.setText("");

            try {
                if (strResponse.substring(KEY_SUCCESS) != null) {
                    txterror.setText("");

                    // SharedPreferences Logic
                    SharedPreferences userDetails =getSharedPreferences("userdetails", MODE_PRIVATE);
                    Editor edit = userDetails.edit();
                    edit.clear();
                    edit.putString("username", uName);
                    edit.putString("password", Password);
                    edit.commit();

                    new FetchUserProfileTask().execute();

                } else {
                    txterror.setText("Username and Password Not valid !!!");
                }
            } catch (Exception e) {
                // TODO: handle exception
            }

    }

}

public class FetchUserProfileTask extends AsyncTask<Void, Void, Void> {

    int i = 0;

    @Override
    protected void onPreExecute() {
        // TODO Auto-generated method stub
        super.onPreExecute();

    }

    @Override
    protected Void doInBackground(Void... params) {

        //logic for the featch user profile data

    return null;
    }

    @Override
    public void onPostExecute(Void result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);

         pgb.setVisibility(View.GONE);
        displayProfile();

    }
}

public void displayProfile() {

    Intent in1 = new Intent(LoginActivity.this, post_myprofile.class);
    in1.putExtra("loginObject", bean);
    startActivity(in1);
}

} 
```

Post_idea_Activity.class

```
public class Post_idea_Activity extends CheerfoolznativeActivity {

TextView txtwelcome;
String Uname="";
String pass = ""; 
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    SharedPreferences userDetails = getSharedPreferences("userdetails", MODE_PRIVATE);
    System.out.println("value of the userdertails ==========>"+ userDetails);
    //String Uname="";
    //String pass= ""; 

    Uname = userDetails.getString("username", "");
    pass = userDetails.getString("password", "");

    Toast.makeText(getApplicationContext(),"username : "+Uname +" \n password :"+pass, Toast.LENGTH_SHORT).show();

    if (Uname.equals(null)) 
    {
        Intent in1 = new Intent(this, LoginActivity.class);
        in1.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(in1);

    }
    else {

        setContentView(R.layout.post_idea);
        setHeader("Post idea");

        txtwelcome =(TextView)findViewById(R.id.post_welcome_text);
             }

       }

   //  coding for the layout
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:50:21.420

清除初始屏幕中的共享首选项 在初始屏幕中使用以下代码，这意味着您的应用程序的第一个活动

```
SharedPreferences userDetails =getSharedPreferences("userdetails", MODE_PRIVATE);
                    Editor edit = userDetails.edit();
                    edit.clear();
                    edit.putString("username", "");
                    edit.putString("password", "");
                    edit.commit(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:56:25.290

在您的应用启动时清除您的共享偏好。

```
SharedPreferences userDetails =getSharedPreferences("userdetails", MODE_PRIVATE);
Editor edit = userDetails.edit();
edit.clear();
edit.commit(); 
```

您可以在应用程序的应用程序类中编写它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T10:01:33.147

```
 Write in login page.....
    //variables
    String PREFS_USER_ID = "USER_ID";
    String  PREF_NAME = "Pref";
    String  USER_ID;
    //write in where u want to store data....
    setPreferences(PREF_NAME, PREFS_USER_ID, USER_ID);
    // methods
    private void setPreferences(String preferenceName, String key, String value)
    {
            SharedPreferences settings = getSharedPreferences(preferenceName, 0);
            SharedPreferences.Editor editor = settings.edit();
            editor.putString(key, value);
            editor.commit();
    }
    private String getSharedPreferences(String preferenceName, String key)
    {
            // Restore preferences
            SharedPreferences settings = getSharedPreferences(preferenceName, 0);
            String value = settings.getString(key, null);
            return value;
    }
    in the other activity u get user name and password.........
    String userid=getSharedPreferences(PREF_NAME, PREFS_USER_ID);
    //method
    private String getSharedPreferences(String preferenceName, String key)
    {
        // Restore preferences
            SharedPreferences settings = getSharedPreferences(preferenceName, 0);
            String value = settings.getString(key, null);
            return value;
    }
// for delete  or remove the data from sharepreferences
SharedPreferences wmbPreference = PreferenceManager.getDefaultSharedPreferences(this);
    SharedPreferences.Editor editor = wmbPreference.edit();
    editor.clear();
    editor.commit(); 
```

# php - php函数返回指向另一个函数的指针

> ID：10929328
> 
> 赞同：0
> 
> 时间：2012-06-07T09:41:01.183
> 
> 标签：php, function

我想做一个 php 函数，它将返回指向另一个函数的指针。这就是我想做的

```
<?php

function modeMaker() {

return function myMax() {
 echo "max function";
};
}

$as=modeMaker();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:09:19.913

PHP 没有“指针”，尤其是函数。你有两个选择：

1.  `return`常规函数的*名称：*

    ```
    function myMax() {
        echo "max function";
    };

    function modeMaker() {
        return 'myMax';
    }

    $as = modeMaker();
    $as(); 
    ```

2.  `return`一个匿名函数，如果你在 PHP 5.3+ 上运行：

    ```
    function modeMaker() {
        return function () {
            echo "max function";
        };
    }

    $as = modeMaker();
    $as(); 
    ```

# abap - 如何使用 CS_BOM_EXPL_MAT_V2 为 BOM 爆炸获取正确数量的组件？

> ID：10929329
> 
> 赞同：3
> 
> 时间：2012-06-07T09:41:01.913
> 
> 标签：abap, sap-erp

我的程序有问题。我正在使用功能模块`CS_BOM_EXPL_MAT_V2`来获取材料的 BOM。例如，我有一个`MAT1`具有 ff 的材料。BOM 爆炸。

```
MAT1
- COMP1 with Qty 2
- COMP2 with Qty 1
- COMP3 with Qty 1 
```

然后，对于 component `COMP1`，它也有子组件：

```
COMP1
- SUBCOMP1 with Qty 1
- SUBCOMP2 with Qty 1 
```

所以我期望在我的程序中使用`CS_BOM_EXPL_MAT_V2`，是让报告的数量为`SUBCOMP1`= 2 和`SUBCOMP2`= 2（因为`MAT1`使用 2 个数量`COMP1`）。但是我得到的是`SUBCOMP1`= 1 qty 和`SUBCOMP2`= 1 qty，因为我认为它只考虑了 BOM并且没有考虑`COMP1`数量。`COMP1`

运行 transaction`CS12`时，material 的输出是正确的 ( `SUBCOMP1`= 2, `SUBCOMP2`= 2) `MAT1`。

那么，我如何进行`CS_BOM_EXPL_MAT_V2`工作以使其尊重组件的计数，在这种情况下`COMP1`为 Qty 2，并将值级联到子组件，在这种情况下为`SUBCOMP1`and `SUBCOMP2`，并将其相乘，以便返回正确的数量，在这种情况下，两个子组件都应该有数量 2，就像在交易中一样`CS12`？

如果 FM 无法做到这一点`CS_BOM_EXPL_MAT_V2`，请提出其他方法来实现这一点。

这是我的 FM 目前的样子：

```
CALL FUNCTION 'CS_BOM_EXPL_MAT_V2'
  EXPORTING
    aumgb                 = 'X'
    capid                 = 'PP01'
    datuv                 = v_datuv "date input in selection screen
    endhl                 = '1'
    mehrs                 = 'X'
    mmory                 = '1'
    mtnrv                 = v_matnr "material input in selection screen
    stlal                 = v_stlal "alternative BOM input in selection screen
    stpst                 = 0 "Level in multi-bom expl.
    svwvo                 = 'X'
    werks                 = v_werks "plant input in selection screen
    vrvso                 = 'X'
  IMPORTING
    topmat                = gs_top
  TABLES
    stb                   = gt_stb
    matcat                = gt_matca
  EXCEPTIONS
    alt_not_found         = 1
    call_invalid          = 2
    material_not_found    = 3
    missing_authorization = 4
    no_bom_found          = 5
    no_plant_data         = 6
    no_suitable_bom_found = 7
    conversion_error      = 8
    OTHERS                = 9. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-18T14:31:10.867

这是 Laurent Fournier 在 snc.sap.com 上给出的答案。这对我很有帮助，因此我想把它保存在这里。

```
I think that you must set multilevel indicator. Take a look at the following code and see if this can help you.

FORM EXPLODE_BOM  USING U_DATE
                        U_MATNR
                        U_MENGE
                        U_WERKS
                        U_MULTI
                CHANGING   C_SUCCESS.

  CLEAR : C_SUCCESS.

  CALL FUNCTION 'CS_BOM_EXPL_MAT_V2'
    EXPORTING
*   FTREL                       = ' '
*   ALEKZ                       = ' '
*   ALTVO                       = ' '
*   AUFSW                       = ' '
    AUMGB                       = 'X'
*   AUMNG                       = 0
    AUSKZ                       = ' '
*   AMIND                       = ' '
*   BAGRP                       = ' '
*   BEIKZ                       = ' '
*   BESSL                       = ' '
*   BGIXO                       = ' '
*   BREMS                       = ' '
    CAPID                       = 'PP01'
*   CHLST                       = ' '
*   COSPR                       = ' '
*   CUOBJ                       = 000000000000000
*   CUOVS                       = 0
*   CUOLS                       = ' '
    DATUV                       = U_DATE
*   DELNL                       = ' '
*   DRLDT                       = ' '
*   EHNDL                       = ' '
*   EMENG                       = 0
*   ERSKZ                       = ' '
*   ERSSL                       = ' '
*   FBSTP                       = ' '
*   KNFBA                       = ' '
*   KSBVO                       = ' '
*   MBWLS                       = ' '
*   MKTLS                       = 'X'
*   MDMPS                       = ' '
    MEHRS                       = U_MULTI
*   MKMAT                       = ' '
*   MMAPS                       = ' '
*   SALWW                       = ' '
*   SPLWW                       = ' '
*   MMORY                       = ' '
    MTNRV                       = U_MATNR
*   NLINK                       = ' '
*   POSTP                       = ' '
*   RNDKZ                       = ' '
*   RVREL                       = ' '
*   SANFR                       = ' '
*   SANIN                       = ' '
*   SANKA                       = ' '
*   SANKO                       = ' '
*   SANVS                       = ' '
*   SCHGT                       = ' '
*   STKKZ                       = ' '
*   STLAL                       = '1'
*   STLAN                       = '1'
    STPST                       = 0
*   SVWVO                       = 'X'
    WERKS                       = U_WERKS
*   NORVL                       = ' '
*   MDNOT                       = ' '
*   PANOT                       = ' '
*   QVERW                       = ' '
*   VERID                       = ' '
*   VRSVO                       = 'X'

*  IMPORTING
*   TOPMAT                      =
*   DSTST                       =
    TABLES
    STB                         = BOM_EXPL
*   MATCAT                      =

   EXCEPTIONS
    ALT_NOT_FOUND               = 1
    CALL_INVALID                = 2
    MATERIAL_NOT_FOUND          = 3
    MISSING_AUTHORIZATION       = 4
    NO_BOM_FOUND                = 5
    NO_PLANT_DATA               = 6
    NO_SUITABLE_BOM_FOUND       = 7
    CONVERSION_ERROR            = 8
    OTHERS                      = 9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-04T08:35:34.593

我认为如果你用 X 标记 AUMGB ( [Ausschussmenge berechnen](https://www.sapdatasheet.org/abap/func/cs_bom_expl_mat_v2_rfc.html) ) 字段，你应该在结果中得到计算的数量。检查名为 STB 的表（[表类型 STPOX [为列表显示扩展的 BOM 项目]](https://www.sapdatasheet.org/abap/tabl/stpox.html)）字段 MNGLG（以基本计量单位计算的组件数量）。场门格应携带基础数量。

# java - A* 图搜索良好的启发式

> ID：10929330
> 
> 赞同：1
> 
> 时间：2012-06-07T09:41:01.963
> 
> 标签：java, path-finding, heuristics

我正在为具有不同距离的简单多出口迷宫实现 A* 路径查找算法，但是我无法找到合适的启发式算法，它似乎执行广度优先搜索。

成本初始设置为 1

这是我的尝试：

```
public void search(Node startNode, Node goalNode){
    System.out.println("Search Started");
    boolean found = false;
    boolean noPath = false;

    Queue<Node> open = new PriorityQueue<Node>(10,new Comparator<Node>(){

        @Override
        public int compare(Node t, Node t1) {
            return Double.compare(t.getCost(), t1.getCost());
        }
    });

    visited[startNode.getX()][startNode.getY()] = true;
    order[startNode.getX()][startNode.getY()] = 0;
    startNode.setCost(h(startNode, goalNode));
    open.add(startNode);

    while (found == false && noPath == false) {
        if (open.isEmpty()) {
            noPath = true;

        }else{

             Node current = open.remove();

            if(current.getX() == goalNode.getX() && current.getY() == goalNode.getY()){

                System.out.println("found Node");
                printOrder();
                found = true;
                break;

            }else{
                for (int i = 0; i < 4; i++){
                    Node nextNode = getAction(current.getX(),current.getY());
                    System.out.println("getting node:" + nextNode.getX() + " " + nextNode.getY());
                    int g2 = current.getCost()+cost+h(current, goalNode);
                    System.err.println(g2);
                    nextNode.setCost(g2);

                    if (nextNode.getX() != -1) {
                      count++;
                      visited[nextNode.getX()][nextNode.getY()] = true;
                      order[nextNode.getX()][nextNode.getY()] = count;
                      open.add(nextNode);

                    }
                }    
            }                
        }
    }
} 
```

启发式函数

```
public int h(Node current, Node goal){

    return (goal.getX() - current.getX()) + (goal.getY() - current.getY());

} 
```

帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:47:27.280

对于典型的迷宫 - 一个出口，只有一条路径，路径宽度 = 1 - A* 与广度优先相比没有优势。它的区别仅在地图上可见，就像您在战略游戏中看到的那样，尝试在目标的空中方向上行走具有优势，并且先前行进的距离很重要。如果您愿意，请查看其他算法：

[https://en.wikipedia.org/wiki/Maze_solving_algorithm](https://en.wikipedia.org/wiki/Maze_solving_algorithm)

# iphone - self.navigationController == nil

> ID：10929335
> 
> 赞同：1
> 
> 时间：2012-06-07T09:41:18.567
> 
> 标签：iphone, objective-c, ios

我尝试制作一个简单的切换视图功能，但它不起作用，然后我尝试查看是否分配了第二个视图并且它很好。问题是我`self.navigationControler`的`nil`。我该如何解决？

```
ViewController2 *hs=[self.storyboard instantiateViewControllerWithIdentifier:@"Highscore"];
if(self.navigationController==nil)
{

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"YOur Message" message:@"Your description"
                                                   delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];
    [alert show];
}

    [self.navigationController pushViewController:hs animated:YES]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:44:53.207

您将需要从 UINavigationController 呈现当前视图控制器

```
UINavigationController *controller = [[UINavigationController alloc] initWithRootViewController:Your_Current_View_Controller];

//Now present controller in any way you want 
```

之后，您的 self.navigationController 将不再为零

# javascript - firefox 13.0 跨域localStorage访问：错误：操作不安全

> ID：10929337
> 
> 赞同：4
> 
> 时间：2012-06-07T09:41:21.663
> 
> 标签：javascript, firefox

今天我将我的 Firefox 升级到 13.0。但是我的 javascript 代码出了点问题。

有一个网页A（www.xx.com）和网页B（webim.xx.com）。*我使用iframe*标记将 B 嵌入到 A 中。

**网页A**

首先将域设置为“xx.com”

```
<script>document.domain = 'xx.com';</script> 
```

然后创建一个 iframe 来加载网页 B。

```
<script>
var iframe = document.createElement('iframe');
document.body.insertBefore(iframe, document.body.firstChild)
iframe.src = 'http://webim.xx.com';
</script> 
```

**网页 B** 将域设置为 'xx.com'

```
<script>document.domain = 'xx.com';</script> 
```

然后我访问网页B的localStorage。

在网页A上，执行代码：

```
window.iframe.contentWindow.localStorage.setItem('a', 'a') 
```

然后会报错：

```
Error: The operation is insecure. 
```

在以前的版本或其他浏览器中，代码可以正常执行。

有人知道为什么吗？

这是一个错误？

和..如何解决这个问题？谢谢。

* * *

刚才我找到了解决这个问题的方法。

我不能直接访问localStorage，但是我可以调用***iframe的函数，***它可以调用自己网页的localStroage。

```
/// webpage B
<script>
document.domain = 'xx.com';
var ls = { ///< ls is short for localStorage.
    setItem: function(k, v) {
        return localStorage.setItem(k, v);
    },
    getItem: function(k) {
        return localStorage.getItem(k);
    },
    removeItem: function(k) {
        return localStorage.removeItem(k);
    },
    clear: function(){
        return localStorage.clear();
    }
}
</script> 
```

然后我调用***ls.setItem***等来访问 iframe 的 localStorage。

```
/// webpage A
<script>iframe.ls.setItem('a', 'b');</script> 
```

即使我可以解决这个问题，为什么firefox 13.0会导致这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T15:08:37.957

旧的 Firefox 行为是错误的，并且该错误已得到修复。根据规范，设置 document.domain 应该对 localStorage 的行为绝对没有影响，因此在您的情况下，您尝试为不同的域设置 localStorage，这是不允许的。

有关详细信息，请参阅[https://bugzilla.mozilla.org/show_bug.cgi?id=495337](https://bugzilla.mozilla.org/show_bug.cgi?id=495337)和 localStorage 规范。

# java - 将 pom 作为依赖项有什么好处？

> ID：10929338
> 
> 赞同：0
> 
> 时间：2012-06-07T09:41:25.907
> 
> 标签：java, maven, pom.xml

Maven 最佳实践页面描述了在另一个 pom 中包含一个 pom 作为依赖项的单一用途；包括共享的依赖组：

[http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html](http://www.sonatype.com/books/mvnref-book/reference/pom-relationships-sect-pom-best-practice.html)

我希望您可以做其他事情 - 例如定义特定的存储库或插件，这些存储库或插件将由您包含的 pom “继承”，但这似乎不起作用。

通过将 pom 作为依赖项包含在另一个 pom 中，您还可以完成哪些其他用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:05:42.107

如果您想定义存储库等或问题跟踪系统、开发人员等，这可以通过使用定义所有这些东西的父 pom 来简单地实现。并且任何将使用这个 pom 作为父级的项目都会自动继承所有这些信息（这通常称为公司 pom）。让生活更轻松。您可以在其中定义插件、依赖项等的版本。将 pom 包含为依赖项的用例是通过一个单一的依赖点定义一组依赖项，在这种情况下，pom 本身包含大量依赖项，这使得有时仅通过添加单个 pom 即可轻松使用这些依赖项而不是几个依赖项。但通常我更愿意在我的项目的dependencyManagement 部分中定义这些依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:06:11.523

AFAIK，包括 pom 作为依赖项只会影响依赖项。如果你想重用其他东西，你必须将它指定为父 POM。

注意：我建议在 Maven 存储库管理器（例如 Nexus）中管理您的存储库，而不是在 POM 中。

[http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html](http://www.sonatype.com/books/nexus-book/reference/maven-sect-single-group.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:24:00.773

问题中提到的链接本身记录了好处。正如其他人所回答的那样，它不能用于`other`目的。剪切/粘贴以供参考：

> *   合并相关依赖项是减少*pom.xml*文件长度的好方法，因为这些文件开始不得不依赖大量依赖项。
>     
>     
> *   如果需要在项目间共享大量依赖，也可以只建立项目间的父子关系，将所有常见的依赖重构到父项目，但是父子方式的缺点是一个项目只能有一位家长。
>     
>     
> *   有时将相似的依赖组合在一起并引用 pom 依赖会更有意义。这样，您的项目可以根据需要引用尽可能多的这些合并依赖项 POM。

[maven依赖机制](http://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#Importing_Dependencies)文档中有相关示例。

# bash - 如何正确处理 Bash 脚本中的 IO？

> ID：10929346
> 
> 赞同：0
> 
> 时间：2012-06-07T09:41:55.203
> 
> 标签：bash

我想在 Bash 脚本中进行大量过滤，以使我的过滤命令更短一些：

```
#before:
$ cat unreadable.log | grep "bla" |[...]| sed "s/blubb//" >>readable.log
#after:
$ cat unreadable.log | the_script_I_m_writing.sh >>readable.log 
```

但是如何正确处理 bash 脚本中的 IO，该`after`行可以如图所示执行？正如您在 bash 脚本中看到的那样，将有很多简单的命令通过管道连接在一起。所有这些管道都应该开始`stdin`并将最终结果发送到`stdout`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:51:30.207

`cat`如果没有给出文件参数，则从标准输入读取。

```
#!/usr/bin/env bash
cat | grep "bla" | sed 's/blubb//' 
```

* * *

或者，只需编写一个接受源文件名作为参数的脚本。

```
#!/usr/bin/env bash
cat "$1" | grep "bla" | sed 's/blubb//' 
```

用途：`./script unreadable.log`。

* * *

在这个简单的例子中，您也可以跳过`cat`，而直接从`grep`.

```
#!/usr/bin/env bash
grep "bla" | sed 's/blubb//' 
```

采用：

```
# unnecessary cat if it's just a file
cat file | ./script.sh

# get stdin from file
./script.sh < file 
```

# c++ - 为什么 CPPUNIT_ASSERT_MESSAGE 会导致 OpenMP 出错？

> ID：10929347
> 
> 赞同：1
> 
> 时间：2012-06-07T09:41:56.597
> 
> 标签：c++, openmp, cppunit, bjam, boost-build

操作系统 = Ubuntu。

bjam 用法 = 真。

我想在 OpenMP 的帮助下优化我的单元测试系统。

bjam 脚本文件：

```
lib my_lib
    :
        [ glob sources/*.cpp ]
    :
        <link>static
    ;

    ...

explicit my_project ;
unit-test my_project
    :
        [ glob UnitTests/*.cpp ]        
        my_lib
    :
    <linkflags>-fopenmp
    <cflags>-fopenmp
    ; 
```

我的代码部分：

```
 for(j = 0; j < AMOUNT; j++)
   {
      #pragma omp parallel for
      for(i = 0; i < 0x10000; ++i)
      {
         ...
         try
         {
            variable1 = func1();
            variable2 = func2();
        //variable1 and variable 2 must be equal
            CPPUNIT_ASSERT_MESSAGE("OLOLO", variable1 == variable2);

         }
         catch (const std::logic_error& exception)
         {
            std::cerr << exception.what() << std::endl;
            CPPUNIT_ASSERT_MESSAGE("OLOLO", 0);
         }
         catch (const std::runtime_error & exception)
         {
            std::cerr << exception.what() << std::endl;
            CPPUNIT_ASSERT_MESSAGE("OLOLO", 0);
         }

      }

   } 
```

当我启动我的测试系统时，它退出并出现错误：

```
terminate called without an active exception
Aborted 
```

我评论 CPPUNIT_ASSERT_MESSAGE 行：

```
 for(j = 0; j < AMOUNT; j++)
   {
      #pragma omp parallel for
      for(i = 0; i < 0x10000; ++i)
      {
         ...
         try
         {
            variable1 = func1();
            variable2 = func2();
            //CPPUNIT_ASSERT_MESSAGE("OLOLO", variable1 == variable2);

         }
         catch (const std::logic_error& exception)
         {
            std::cerr << exception.what() << std::endl;
            //CPPUNIT_ASSERT_MESSAGE("OLOLO", 0);
         }
         catch (const std::runtime_error & exception)
         {
            std::cerr << exception.what() << std::endl;
            //CPPUNIT_ASSERT_MESSAGE("OLOLO", 0);
         }

      }

   } 
```

它以我需要的方式工作。但是我需要 CPPUNIT_ASSERT_MESSAGE 来输出信息以防出现错误结果。为什么 CPPUNIT_ASSERT_MESSAGE 会导致错误，我应该怎么做才能摆脱这些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T16:14:52.873

CPPUNIT 通过在遇到错误时停止程序来工作。要在出现错误结果时输出信息而不是停止程序，那么您必须配置 XmlOutputter 并创建一个使用它的 TestRunner。

例如：

```
// Create the event manager and test controller
CPPUNIT_NS::TestResult controller;

// Add a listener that colllects test result
CPPUNIT_NS::TestResultCollector result;
controller.addListener( &result );

// Add a listener that print dots as test run.
CPPUNIT_NS::BriefTestProgressListener progress;
controller.addListener( &progress );

// Add the top suite to the test runner
CPPUNIT_NS::TextUi::TestRunner runner;
CPPUNIT_NS::Test *suite = CPPUNIT_NS::TestFactoryRegistry::getRegistry().makeTest();
runner.addTest( suite );

runner.setOutputter( new CppUnit::XmlOutputter( &runner.result(),
                                                       std::cerr ) );

runner.run( testPath, false, true, true );

std::cout << "Test done" << std::endl;
exit( result.wasSuccessful() ? 0 : 1 ); 
```

这样，您就有了一个输出到 xml 流而不是停止测试的测试运行器。

希望能帮助到你

# erlang - Erlang 中的仅订单应用程序依赖项

> ID：10929348
> 
> 赞同：3
> 
> 时间：2012-06-07T09:41:58.907
> 
> 标签：erlang

我有一个依赖于其他两个应用程序之一的应用程序——也就是说，我的应用程序中的一个配置参数指定了它期望运行的一个。为了避免依赖 my 中的行顺序`reltool.config`，我希望能够指定一个仅顺序依赖项，以便如果依赖的应用程序存在于发行版中，它会在我的应用程序之前加载并启动，但是如果它不存在，它就会被忽略。

那可能吗？还是有另一种方法来完成我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:32:20.383

该功能似乎仍在开发中，以消除执行行为中的一些错误。

有关问题的描述，请参见[此处，以及 Ulf](http://erlang.org/pipermail/erlang-bugs/2012-January/002741.html) [Wiger](http://comments.gmane.org/gmane.comp.lang.erlang.bugs/2770)的原始博客文章。

如果您需要更多信息，请告诉我。

# jsf - p：ui中的对话：重复

> ID：10929351
> 
> 赞同：1
> 
> 时间：2012-06-07T09:42:12.650
> 
> 标签：jsf, primefaces, uirepeat

我在 xhtml jsf 页面的支持 bean 中显示来自列表的消息。

我使用 ui:repeat 循环和每条消息的回复按钮。在回复按钮上，我正在调用一个对话框，其中显示了 xhtml 页面上显示的用户名。但它总是显示列表中最后一个消息发件人的姓名。

看看我的 xhtml 代码

```
<h:form>
                            <div id="messages">

                                <ui:repeat var="userMsg" value="#{messagesManagedBean.userInboxMsgs}">

                                    <p:dialog modal="true" widgetVar="messageDialog" resizable="false"  width="750" height="200" header="New Message" >  

                                        <h:panelGrid columns="2">
                                            <p:column>
                                                <h:outputLabel for="msgRecepient"  value="To"/>
                                            </p:column>
                                            <p:column>
                                                <h:outputLabel id="msgRecepient" value="#{userMsg.userFullname}"  >

                                                </h:outputLabel>
                                            </p:column>
                                            <p:column>
                                                <h:outputLabel for="msgContents"  value="Message"/>
                                            </p:column>
                                            <p:column>
                                                <p:inputTextarea id="msgContents" value="#{messagesManagedBean.msg.message}" cols="65" rows="3" />

                                            </p:column>

                                            <p:column>
                                                <p:commandButton id="msgSend" value="Send"  action="#{messagesManagedBean.sendMessage(userMsg.userId,'reply')}"   oncomplete="messageDialog.hide()"  /> 
                                            </p:column>

                                        </h:panelGrid>

                                    </p:dialog>

                                    <center><img class="h-diff" src="../images/differentiator-profile.jpg" width="437" height="1" /></center>
                                    <div class="message">
                                        <div id="senderImg">
                                            <img class="senderImg" src="../images/profile-pic.jpg" width="50" height="50" />
                                        </div>
                                        <div id="message-txt-area">

                                            <div id="senderName">
                                                <p:commandLink styleClass="senderName" value="#{userMsg.userFullname}" action="#{myProfileManagedBean.loadProfileFrontInformation(userMsg.userId)}"></p:commandLink>
                                            </div>
                                            <div class="message-txt">
                                                #{userMsg.message}
                                            </div>
                                            <div class="reply-btn">
                                                <a href="#" onclick="messageDialog.show()">Reply</a>
                                            </div>

                                        </div>
                                    </div>

                                </ui:repeat>

                            </div>
                        </h:form> 
```

现在的问题是，当我单击回复时，它会显示对话框，但“收件人”部分包含列表中最后一条消息的发件人名称。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T12:14:32.240

我认为 widgetVar 被覆盖，因为您没有为 widgetVar 指定任何动态值，它始终保持为 messageDialog 值。

我认为将对话置于循环中是一种不好的做法。我建议通过使用标签作为参数传递的变量值`<p:dialog>`调用来重用：`<p:commandLink>``<f:param>`

```
<ui:repeat var="userMsg" value="#{messagesManagedBean.userInboxMsgs}">
    ...
    <p:commandLink value="Reply" onclick="messageDialog.show()">
        <f:param name="userMsg" value="#{userMsg}" />     
    </p:commandLink>
    ...
</ui:repeat>

<p:dialog modal="true" widgetVar="messageDialog" resizable="false"
          width="750" height="200" header="New Message">
    <h:panelGrid columns="2">
        <p:column>
            <h:outputLabel for="msgRecepient" value="To"/>
        </p:column>
        <p:column>
            <h:outputLabel id="msgRecepient" value="#{userMsg.userFullname}" />
        </p:column>
        <p:column>
            <h:outputLabel for="msgContents" value="Message"/>
        </p:column>
        <p:column>
            <p:inputTextarea id="msgContents" cols="65" rows="3"
                             value="#{messagesManagedBean.msg.message}" />
        </p:column>
        <p:column>
            <p:commandButton id="msgSend" value="Send" 
            action="#{messagesManagedBean.sendMessage(userMsg.userId,'reply')}"
            oncomplete="messageDialog.hide()" />
        </p:column>
    </h:panelGrid>
</p:dialog> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:09:38.333

您看到的是预期行为，因为您做错了。
首先，将对话框移到 ui:repeat 之外。
然后设置对话框内的 h:panelGrid 的 ID（例如：“dialogGrid”）
在托管 bean 中添加一个属性，该属性将成为选定的消息。
替换`<a href="#" onclick="messageDialog.show()">Reply</a>`为以下内容：

```
<p:commandLink value="Reply" update="dialogGrid" oncomplete="messageDialog.show()" >
        <f:setPropertyActionListener target="#{messagesManagedBean.selectedMsg}" value="#{userMsg}" />
</p:commandLink> 
```

最后，在对话框中，不要使用 #{userMsg} 来引用选定的消息，而是使用`#{messagesManagedBean.selectedMsg}`

# jquery - 如果元素具有类将元素“文本”替换为“某些文本”

> ID：10929352
> 
> 赞同：0
> 
> 时间：2012-06-07T09:42:16.287
> 
> 标签：jquery

我有一个标签元素：

```
<form id="new_user">
<div id="first-name">
<label for="user_profile_attributes_first_name"><abbr title="required">*</abbr> First name</label>
</div>
</form> 
```

当#new_user 有.team-registration 时，我想用团队名称替换文本名字。这样做会更好吗？

```
 if $('#new_user').hasClass('team-registration') {
    ....
  } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:46:13.003

你不能在一个选择器中结合这两个条件吗？至于实际的替换，[`$.html`](http://api.jquery.com/html/)也接受函数（从 jQuery 1.4 开始）：

```
$("#new_user.team-registration").html(function(i, html) {
    return html.replace("First name", "Team name");
}); 
```

这是一个[小提琴](http://jsfiddle.net/MattiasBuelens/4m4sa/)！

注意：我正在使用`html`而不是`text`看起来`#new_user`包含其他元素。`text`将删除这些标签并为您提供纯文本，而`html`对实际的`innerHTML`.

注意：`string.replace(string, string)`仅替换第*一次出现*的. 如果您需要替换*所有匹配项*，请使用正则表达式：

```
 return html.replace(/First name/g, "Team name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:44:34.410

我建议：

```
if $('#new_user').hasClass('team-registration') {
    var text = $(this).text();
    $(this).text(text.replace('First','Team')
} 
```

在上面我选择只替换字符串'First'，因为第二个单词（'name'）在两者之间是一致的。

当然，我会注意到`id="new_user"`您提供的标记中没有元素，所以我强烈建议您确保使用正确的`id`选择器，因为这种方法将替换匹配元素中的文本，它*不会*尝试在匹配元素的后代元素中搜索要替换的字符串。

参考：

*   [`replace()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/replace).
*   [`text()`](http://api.jquery.com/text/).

# php - 谷歌地图，点击使用集群的标记

> ID：10929355
> 
> 赞同：1
> 
> 时间：2012-06-07T09:42:33.613
> 
> 标签：php, javascript, google-maps, google-maps-markers, markerclusterer

这是我的第一个问题。我个人觉得这个网站很棒，帮了我很多次:)

现在我有一个未解决的问题：P

我正在使用谷歌地图 API 开发一个网站。预计将来我的标记会太多，所以我想了2种方法来解决它：

1.  每次有人点击地图时添加一个事件，更新通过 PHP 文件显示的标记（从 Javascript 异步调用文件）
2.  添加文件集群（按照此步骤[http://www.svennerberg.com/2009/01/handling-large-amounts-of-markers-in-google-maps/](http://www.svennerberg.com/2009/01/handling-large-amounts-of-markers-in-google-maps/)）

我试着做他们两个，我都有问题

1.  我不知道如何从 Javascript 调用 PHP 文件来更新我地图上的标记
2.  如果我使用markerclusterer，它可以正常工作，但是当我按下单个标记时我无法打开html窗口

    ```
     for(var i = 0; i < 50; i += 0.1) {
           var marker = new GMarker(new GLatLng(59.0 + i, 13.80 + i));
           markers.push(marker);
        } 
    ```

这是我用于将标记推入数组的代码，因此我无法添加事件，好吧，我可以但仅适用于最后一个。

任何想法？

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:20:35.267

尝试这样的方法来获取单击时单个标记的内容。您只需要将标记添加到集群中就可以了。

```
function load_content(marker, id){
    $.ajax({
        url: '/map/getMarkerWindow/' + id,
        success: function(data){
            infowindow.setContent(data);
            infowindow.open(map, marker);
        }
    });
}

for(var i = 0; i < 50; i += 0.1) {
       var marker = new GMarker(new GLatLng(59.0 + i, 13.80 + i));

        marker = new google.maps.Marker({
            position: new google.maps.LatLng(59.0 + i, 13.80 + i),
            clickable: true,
            id:i
        });

        google.maps.event.addListener(marker, "click", function() {
            infowindow.close();
            load_content(this, this.id);
        });

       markers.push(marker);
    } 
```

# jquery - 使用 jQuery 将表单数据发布到 ASP.NET ASMX Web 服务

> ID：10929361
> 
> 赞同：0
> 
> 时间：2012-06-07T09:43:00.517
> 
> 标签：jquery, web-services, post, asmx

我尝试开发一个简单的登录表单，在 asmx 文件中将按钮发布表单数据提交给我的方法。
问题是，当我尝试从表单标签内发布时，我会收到错误消息。
**发布外部表单标签效果很好。**
我提供了一个简化的问题示例：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
<title></title>
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script type="text/javascript">

$(document).ready(function () {

    $("#submitOutsideForm").click(function () {
        AjaxPost();
    });

    $("#submitInsideForm").click(function () {
        AjaxPost();
    });
});

function AjaxPost() {
    try {
        $.ajax({
            type: "POST",
            url: "dummyWS.asmx/HelloToYou",
            data: "{'name': '" + $('#name').val() + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                AjaxSucceeded(msg);
            },
            error: AjaxFailed
        });
    }
    catch (e) {
        alert("Exception in ajaxCall2Func: " + e.name + ".\n Error messege: " + e.message);
    }
}

function AjaxSucceeded(result) {
    alert(result.d);
}

function AjaxFailed(result) {
    alert(result.status + ' ' + result.statusText);
}
</script>  
</head>
<body>

Enter your name: 
<input id="name" />

<form id="form1" runat="server" style="border:1px solid green;">
<div>
    <label for="email">some other form controls</label>
</div>
<input id="submitInsideForm" type="submit" value="Submit Inside Form" />
</form>
<input id="submitOutsideForm" type="submit" value="Submit Outside Form" />
</body>
</html> 
```

在服务器端，我有这个简单的虚拟 WebService

```
<%@ WebService Language="C#" CodeBehind="~/App_Code/dummyWS.cs" Class="dummyWS" %> 
```

…以及后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;

[WebService(Namespace = "http://tempuri.org/")]
[WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
[System.Web.Script.Services.ScriptService]
public class dummyWS : System.Web.Services.WebService {

  [WebMethod()]
  public string HelloToYou(string name)
  {
      return "Hello " + name;
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T21:38:06.153

尝试将您的 HelloToYou 方法设置为静态。

```
[WebMethod()]
public static string HelloToYou(string name)
{
   return "Hello " + name;
} 
```

# c# - 水晶报表每页如何显示20条记录？

> ID：10929362
> 
> 赞同：0
> 
> 时间：2012-06-07T09:43:03.853
> 
> 标签：c#, visual-studio, crystal-reports

我是水晶报表的新手，我需要每页打印 20 行数据。我在网上找到了这个，但它在我的系统上不起作用。

```
if Remainder(Recordnumber,20)=0 then true else false 
```

我的系统每页只打印一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:05:42.667

会不会像你`RecordNumber`的`Recordnumber`代码那样迂腐？

```
if Remainder (RecordNumber, 20) = 0 then true else false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:22:51.727

要使其每页显示 10 条记录，请执行以下操作

1.  在设计视图中打开报表

2.  右键单击详细信息部分并选择部分专家

3.  确保在“部分专家”对话框中选择了“详细信息”部分。选中“之后新建页面”复选框</p>

4.  单击复选框右侧的公式编辑器按钮。

5.  输入以下公式

`if Remainder (RecordNumber, 10) = 0 then true else false`

1.  单击保存并关闭，然后单击确定。

如果您运行报告，它应该在每 10 行后中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T14:15:36.203

如果您使用的是 Crystal 报表 2008/2011，则部分专家的详细信息部分属性中有一个新选项 - “之后的新页面：X 可见记录”：

![示例图片](../Images/bab32bce8a2f51c2949b350ea7fea681.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T12:21:44.407

要每页显示 20 条记录，请执行以下操作

1.  在设计视图中打开报表

2.  右键单击详细信息部分并选择部分专家

3.  确保在“部分专家”对话框中选择了“详细信息”部分。选中“之后新建页面”复选框</p>

4.  单击复选框右侧的公式编辑器按钮。

5.  输入以下公式

    if Remainder (RecordNumber, 20) = 0 then true else false

6.  单击保存并关闭，然后单击确定。

# php - 私聊系统MYSQL查询ORDERBY和GROUPBY

> ID：10929366
> 
> 赞同：0
> 
> 时间：2012-06-07T09:43:33.307
> 
> 标签：php, mysql, database

我在 php/mysql 中创建私人消息系统。

我创建了消息表：

```
messages(message_id|sender_id|receiver_id|message_text|created_time) 
```

这是表中的数据

```
message_id|sender_id||receiver_id|message_text|   created_time
   1         101          102       Message A    2012-06-07 08:07:18
   2         101          102       Message B    2012-06-07 08:10:20
   3         103          102       Message C    2012-06-07 08:12:43 
```

我想要的输出是：

```
 sender_id|message_text |   created_time
       101      Message B     2012-06-07 08:10:20
       103      Message C     2012-06-07 08:12:43 
```

就像是：

```
SELECT sender_id,message_text,created_time from messages
WHERE receiver_id='102'
GROUP BY sender_id
ORDERBY BY created_time 
```

我想显示任何用户的最后一条消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:50:58.353

也许是这样的：

```
SELECT
    messages.sender_id,
    messages.message_text,
    messages.created_time
FROM
    messages
    JOIN
        (
            SELECT
                MAX(created_time) AS LatestCreated,
                t.sender_id
            FROM
                messages AS t
            GROUP BY
                t.sender_id
        ) AS Latest
        ON Latest.sender_id=messages.sender_id
        AND Latest.LatestCreated=messages.created_time
WHERE
    messages.receiver_id=102
ORDER BY
    messages.created_time 
```

## [演示](http://sqlfiddle.com/#!2/183e7/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:16:27.003

```
SELECT sender_id, MESSAGE_TEXT, created_time
FROM messages
WHERE receiver_id = 102
  AND created_time IN
    (SELECT MAX(created_time)
     FROM messages
     GROUP BY sender_id); 
```

## [演示](http://sqlfiddle.com/#!2/183e7/5)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T09:49:09.563

你很接近 - 你输入“ORDER BY”作为“ORDERBY BY”。您将使用已有的 WHERE 子句获得正确的数据。您还需要按降序排列日期以显示最新的第一个（如下所示）。

我可以看到您要求以某种方式聚合数据，但我不太明白*为什么*每一行都是独一无二的。

## 解决方案

```
SELECT sender_id, message_text, created_time FROM messages
WHERE receiver_id = 102
ORDER BY created_time DESC 
```

# java - 如何从java执行多个SQL语句

> ID：10929369
> 
> 赞同：30
> 
> 时间：2012-06-07T09:43:50.277
> 
> 标签：java, jdbc

我想一次执行多个查询或作业。像这样的东西，例如：

```
String query="select * from tab1;insert into tab1 values(...);update tab1..;delete from tab1...;"
Statement st = con1.createStatement();
ResultSet rs = st.executeQuery(query); 
```

或多个选择查询。查询将是动态的。

但我无法做到这一点。运行以分号分隔的多个查询的方法是什么。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-07T09:45:48.010

您可以使用以下示例来实现这一点：使用 addBatch 和 executeBatch 命令同时执行多个**SQL**命令。

批处理允许您将相关的 SQL 语句分组到一个批处理中，并通过一次调用数据库来提交它们。[参考](http://www.tutorialspoint.com/jdbc/jdbc-batch-processing.htm)

一次向数据库发送多个 SQL 语句时，可以减少通信开销，从而提高性能。

*   不需要 JDBC 驱动程序来支持此功能。您应该使用该`DatabaseMetaData.supportsBatchUpdates()`方法来确定目标数据库是否支持批量更新处理。如果您的 JDBC 驱动程序支持此功能，则该方法返回 true。
*   Statement、PreparedStatement 和 CallableStatement的**[addBatch](http://docs.oracle.com/javase/1.3/docs/api/java/sql/PreparedStatement.html#addBatch%28%29) ()**方法用于将单个语句添加到批处理中。`executeBatch()`用于开始执行组合在一起的所有语句。
*   **[executeBatch](http://docs.oracle.com/javase/1.3/docs/api/java/sql/Statement.html#executeBatch%28%29) ()**返回一个整数数组，数组的每个元素代表各自更新语句的更新计数。
*   就像您可以将语句添加到批处理中以进行处理一样，您可以使用**[clearBatch](http://docs.oracle.com/javase/1.3/docs/api/java/sql/Statement.html#clearBatch%28%29) ()**方法删除它们。此方法会删除您使用该`addBatch()`方法添加的所有语句。但是，您不能有选择地选择要删除的语句。

**例子：**

```
import java.sql.*;

public class jdbcConn {
   public static void main(String[] args) throws Exception{
      Class.forName("org.apache.derby.jdbc.ClientDriver");
      Connection con = DriverManager.getConnection
      ("jdbc:derby://localhost:1527/testDb","name","pass");

      Statement stmt = con.createStatement
      (ResultSet.TYPE_SCROLL_SENSITIVE,
      ResultSet.CONCUR_UPDATABLE);
      String insertEmp1 = "insert into emp values
      (10,'jay','trainee')";
      String insertEmp2 = "insert into emp values
      (11,'jayes','trainee')";
      String insertEmp3 = "insert into emp values
      (12,'shail','trainee')";
      con.setAutoCommit(false);
      stmt.addBatch(insertEmp1);//inserting Query in stmt
      stmt.addBatch(insertEmp2);
      stmt.addBatch(insertEmp3);
      ResultSet rs = stmt.executeQuery("select * from emp");
      rs.last();
      System.out.println("rows before batch execution= "
      + rs.getRow());
      stmt.executeBatch();
      con.commit();
      System.out.println("Batch executed");
      rs = stmt.executeQuery("select * from emp");
      rs.last();
      System.out.println("rows after batch execution= "
      + rs.getRow());
   }
} 
```

参考[http://www.tutorialspoint.com/javaexamples/jdbc_executebatch.htm](http://www.tutorialspoint.com/javaexamples/jdbc_executebatch.htm)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T10:14:06.190

我不确定您是否要在一个请求语句中发送两个 SELECT 语句，因为您可能无法同时访问这两个`ResultSet`s。数据库可能只返回最后一个结果集。

**多个结果集**

但是，如果您正在调用一个您知道可以返回多个结果集的存储过程，那么这样的事情将起作用

```
CallableStatement stmt = con.prepareCall(...);
try {
...

boolean results = stmt.execute();

while (results) {
    ResultSet rs = stmt.getResultSet();
    try {
    while (rs.next()) {
        // read the data
    }
    } finally {
        try { rs.close(); } catch (Throwable ignore) {}
    }

    // are there anymore result sets?
    results = stmt.getMoreResults();
}
} finally {
    try { stmt.close(); } catch (Throwable ignore) {}
} 
```

**多条 SQL 语句**

如果您正在谈论多个 SQL 语句并且只有一个 SELECT，那么您的数据库应该能够支持`String`SQL 之一。例如，我在 Sybase 上使用过类似的东西

```
StringBuffer sql = new StringBuffer( "SET rowcount 100" );
sql.append( " SELECT * FROM tbl_books ..." );
sql.append( " SET rowcount 0" );

stmt = conn.prepareStatement( sql.toString() ); 
```

这将取决于您的数据库支持的语法。在此示例中，请注意`spaces`语句的附加填充，以便语句之间有空格。

# javascript - 在 JavaScript 中从 Object 创建 DOM 元素

> ID：10929370
> 
> 赞同：4
> 
> 时间：2012-06-07T09:43:57.940
> 
> 标签：javascript, dom, object, element

嗨，我正在尝试了解如何制作 Dom elemnt，让我们说“div”形成我的数据对象。我做了一个这样的对象：

```
var div = {

        style : {
            width: Math.floor(Math.random() * 100),
            height: Math.floor(Math.random() * 100),
            position: "relative",
            top:Math.floor(Math.random()*500)
        },

        sayHi: function () {
            alert("Hello");
        },

    } 
```

我现在需要做的是使用这些 css 参数使其成为 DOM 中的实时元素？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:45:42.937

要创建 DOM 元素，请使用`document.createElement`，如下所示：

```
var elm = document.createElement('div'); 
```

那`elm`将已经有一个名为`style`;的属性。然后你可以分配给它的成员，例如：

```
elm.style.width = div.style.width + "px"; // Remember this is CSS, you need units 
```

你的一个[`for..in`循环](http://blog.niftysnippets.org/2010/11/myths-and-realities-of-forin.html)`div.style`可能在那里有用，但一定要处理单位的事情。

要将事件处理程序附加到它，您可以执行分配给`onXyz`属性的旧 DOM0 事情，如下所示：

```
elm.onclick = div.sayHi; 
```

...这将使它`sayHi`在点击时运行该功能，但更现代的方式是通过`addEventListener`：

```
elm.addEventListener('click', div.sayHi, false); 
```

旧版本的 IE 没有`addEventListener`，但它们确实有其仅限 MS 的前身，`attachEvent`：

```
elm.attachEvent('onclick', div.sayHi); 
```

注意事件名称的不同，它没有第三个参数。

所有这些都是学术性的，除非你`elm`在页面的某个地方添加。:-) 您可以通过获取对页面上另一个元素的引用，然后调用`appendChild`：

```
someOtherElement.appendChild(elm); 
```

更多探索：

*   [DOM2 核心](http://www.w3.org/TR/DOM-Level-2-Core/)
*   [DOM2 HTML](http://www.w3.org/TR/DOM-Level-2-HTML/)
*   [DOM3 核心](http://www.w3.org/TR/DOM-Level-3-Core/)
*   [HTML5 Web 应用程序 API](http://www.w3.org/TR/html5/webappapis.html#webappapis)

* * *

由于`addEventListener`/`attachEvent`浏览器不兼容和其他各种小问题，并且因为它们提供了许多预打包的实用程序功能，很多人（包括我）使用 JavaScript 库，如[jQuery](http://jquery.com)、[YUI](http://developer.yahoo.com/yui/)、[Closure](http://code.google.com/closure/library)或[任何几个其他人](http://en.wikipedia.org/wiki/List_of_JavaScript_libraries)来帮助这些东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T09:49:07.660

试试这个

```
var DOMdiv = document.createElement("div");
for(var key in div) {
    if(key === "style") {
        for(var cssstyle in div[key]) {
            DOMdiv.style[cssstyle] = div[key][cssstyle];
        }
    } else {
        DOMdiv[key] = div[key];
    }
}
document.body.appendChild(DOMdiv); 
```

但请记住，这个 Div 现在有一个名为`sayHi()`附加的函数。没有启动事件处理程序或任何事情。如果您想拥有一些事件处理程序，请像这样更改您的对象：

```
var div = {

     [...]

     onclick: function() {
         alert("Hi");
     }

 }; 
```

# android - 将 ActionBarSherlock 与 roboguice2.0 一起使用

> ID：10929371
> 
> 赞同：0
> 
> 时间：2012-06-07T09:44:00.340
> 
> 标签：android, actionbarsherlock, android-actionbar, roboguice

我正在尝试 ActionBarSherlock 库中的示例 roboguice 项目。它使用 roboguice2.0b4.jar （测试版），但是当我用稳定版 roboguice2.0.jar 替换它时，我得到了

```
java.lang.IllegalArgumentException: com.actionbarsherlock.sample.roboguice.activity.AstroboyMasterConsole@40533b68 does not appear to be a RoboGuice context (instanceof RoboContext) 
```

可以做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:52:38.467

您的活动 (AstroboyMasterConsole) 必须实现 RoboContext 接口，这意味着您必须从以下类之一扩展它：

![RoboContext 实现者](../Images/5b456fad0ddb740c2869a425c6306fed.png)

# mysql - MATCH ... AGAINST 没有找到行

> ID：10929375
> 
> 赞同：1
> 
> 时间：2012-06-07T09:44:13.923
> 
> 标签：mysql

我正在尝试使用 进行搜索`MATCH ... AGAINST`，但它没有给我任何结果。我已经设置`ft_min_word_len`了 to`2`和`ft_stopword_file`to `""`。

这是我的桌子：

```
CREATE TABLE `rw_jam_search` (
  `jam` int(10) unsigned NOT NULL,
  `name` varchar(100) DEFAULT NULL,
  PRIMARY KEY (`jam`),
  KEY `name` (`name`),
  FULLTEXT KEY `name_ft` (`name`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8 
```

我在表中的数据：

```
jam name
53  Say Yes
54  testing
55  poijoik
56  stdd
57  Spartaaa!
58  Fearless
59  Mr. Mysterious
60  testmys
61  hello worlds 
```

为什么我找不到此查询的“Say Yes”行？如果我使用`LIKE js.name = 'say%'`.

```
SELECT *
FROM rw_jam_search js
WHERE MATCH(js.name) AGAINST ('say*' IN BOOLEAN MODE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:00:02.980

默认缓存字的最小长度为`3`，可在配置文件中更改：

```
[mysqld]
ft_min_word_len=3 
```

所以“say”这个词不会被全文搜索索引。如果您有权访问 mySQL 的存储文件，则可以使用：

```
myisam_ftdump rw_jam_search.MYI 0 
```

列出将包含在全文搜索中的所有索引词。

因此，如果您尝试此查询，它应该可以正常工作：

```
SELECT * FROM rw_jam_search
WHERE MATCH(`name`) AGAINST('worlds') 
```

**编辑：**`AGAINST()`星号（*）与检查[文档](http://dev.mysql.com/doc/refman//5.5/en/fulltext-boolean.html)一起使用时完全不同

# windows - 将 Postscript 数据渲染到 HDC

> ID：10929380
> 
> 赞同：0
> 
> 时间：2012-06-07T09:44:28.473
> 
> 标签：windows, winapi, gdi, postscript

我正在开发一个 win32 应用程序。在这个应用程序中，我想在窗口 DC 上显示 postscript 数据。

拜托，有人能建议怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T12:05:31.453

PostScript 是一种解释型编程语言，因此您不能“显示 PostScript 数据”。您需要使用 PostScript 解释器来执行程序。

您使用哪种 PostScript 解释器取决于您，这取决于您是否准备为商业解释器付费，或者是否可以遵守 GPL 开源许可证。

如果您乐于使用 GPL 软件，那么我建议您使用 Ghostscript，这个适用于 Windows 的简单应用程序甚至使用 win32 API 调用来完成我认为您想要的几乎所有操作，因此您可以将其用作工作示例。

# android - 在 Windows 中使用三星 Galaxy S3 进行硬件调试

> ID：10929386
> 
> 赞同：26
> 
> 时间：2012-06-07T09:44:48.113
> 
> 标签：android, adb

在发布时拿起了我的 S3，并想开始学习使用 Eclipse 为 android 开发。到目前为止，我玩得很开心！

但是，我希望能够在手机硬件本身上调试我的应用程序，而不仅仅是在 AVD 中。我的问题是我找不到合适的 USB 设备驱动程序。三星支持网站是垃圾，Windows 更新告诉我“去哪里”。

有没有人有这个工作呢？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-07T18:12:17.927

对于那些仍在寻找的人，您无需安装膨胀。访问：http: [//www.samsung.com/us/support/owners/product/SCH-I535RWBVZW](http://www.samsung.com/us/support/owners/product/SCH-I535RWBVZW)

单击或滚动到“手册和下载”，然后 USB（驱动程序）在“下载”下可用。

直接下载链接：[Samsung USB Driver - 1.5.45.00](http://downloadcenter.samsung.com/content/DR/201602/20160217043054798/SAMSUNG_USB_Driver_for_Mobile_Phones_v1.5.45.00.exe)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-08T07:45:11.050

原来你必须安装三星凯斯才能获得 USB 驱动程序。类似于 iPhone。我想避免这种不必要的膨胀（我把手机插上电源，它抛出了 WPF 异常......），谢天谢地，你可以在不卸载驱动程序的情况下卸载 Kies。结果。

之后，ADB 可以看到手机完全没有问题，我可以在设备上完美调试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T09:52:53.917

你需要它的usb驱动程序。安装完成后，只需通过 USB 将手机连接到您的机器，启动 eclipse，如果驱动程序安装正确，adb 将获取设备。试试这个链接，其中一个可能会有驱动程序。[三星 Galaxy S3 下载](http://www.samsung.com/uk/support/model/GT-I9300MBDBTU-downloads?isManualDownload=true)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-09T19:55:49.750

可以在以下链接下载

[http://www.samsung.com/uk/support/usefulsoftware/ASPS/JSP](http://www.samsung.com/uk/support/usefulsoftware/ASPS/JSP)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-31T13:56:14.433

不需要 KIES 或其他臃肿！

有一个非常有用的工具包，它比凯斯做得更多，它可以在这里找到：

[http://forum.xda-developers.com/showthread.php?t=1703488](http://forum.xda-developers.com/showthread.php?t=1703488)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-09-26T08:05:10.867

三星下载部分的直接链接：http: [//org.downloadcenter.samsung.com/downloadfile/ContentsFile.aspx ?CDSite=US&CttFileID=5301407&CDCttType=SW&ModelType=C&ModelName=SCH-I535RWBVZW&VPath=SW/201211/20121110030255344/Samsung_USB_Driver_for_Mobile_Phones_v.51.4 。可执行程序](http://org.downloadcenter.samsung.com/downloadfile/ContentsFile.aspx?CDSite=US&CttFileID=5301407&CDCttType=SW&ModelType=C&ModelName=SCH-I535RWBVZW&VPath=SW/201211/20121110030255344/Samsung_USB_Driver_for_Mobile_Phones_v1.5.14.0.exe)

# jquery - 如何验证生成的 html 表（网格）中的文本框

> ID：10929389
> 
> 赞同：0
> 
> 时间：2012-06-07T09:45:03.133
> 
> 标签：jquery, asp.net-mvc-3

我需要验证生成的 html 表（网格）中每个文本框的值。当我单击保存按钮时，它将查看所​​有文本框控件并验证它是否包含值。任何帮助都非常感谢。

HTML 代码

```
<table class="dynamictable">
            <thead>
                <tr>
                    <th style="display: none"></th>
                    <th>Package Name</th>
                    <th>Package Cost</th>
                    <th>No. of Attendees</th>
                    <th>Delete</th>
                </tr>
            </thead>
            <tbody>
                <tr class="prototype">
                    <td style="display: none"><input type="hidden" name="id[]" value="0" class="id" /></td>
                    <td><input type="text" name="packagename[]" value="" /></td>
                    <td><input type="text" name="packagecost[]" value="" /></td>
                    <td><input type="text" name="noofattendees[]" value="" /></td>
                    <td>@Html.ActionImage("", null, "~/Content/Images/delete.gif", "Delete", new { @class = "deleterows" }) </td>
                </tr>
            </tbody>
        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:48:36.217

使用简单的 javascript 你就可以做到。

```
var a=document.getElementsByTagName("input");
for(var i=0;i<a.lenth;i++){
    if(a[i].type=="text"){
        if(a[i].value == ""){
            alert("Please enter value");
            a[i].focus();
            return false;
        }
    }
}

return true; 
```

# javascript - JQuery解析JSON的错误处理

> ID：10929391
> 
> 赞同：5
> 
> 时间：2012-06-07T09:45:18.377
> 
> 标签：javascript, jquery, json, parsing, error-handling

好的，我有以下代码，它使用 jquery 的 $.parseJSON 从 ajax 响应中解析 JSON

```
try{
   var indata = $.parseJSON(rsp);
}catch(err){
   alert("an error occured");
} 
```

现在，由于我想优雅地涵盖任何可能的错误，我尝试进行一些错误处理，通常`try and catch`现在这段代码不起作用。我故意做了一些格式错误的 JSON 并将其传递给，`$.parseJSON`但它并没有真正起作用。现在我的问题是如何优雅地处理这个错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T09:48:22.733

我建议在 jquery ajax 错误回调中处理错误。如果您指定`dataType`as json，您应该在`error`回调中结束，而不是`success`如果 json 字符串格式不正确

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-21T05:43:29.500

代码很好，它应该可以工作，如果不尝试用 'jQuery' 代替 '$'。例如

```
try{
  var indata = jQuery.parseJSON(rsp);
}catch(err){
  alert("an error occured");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-30T20:11:35.093

从[jQuery API 文档](http://api.jquery.com/jQuery.parseJSON/)：

> 在 jQuery 1.9 之前，如果 $.parseJSON 传递一个空字符串、null 或 undefined，则返回 null 而不是抛出错误，即使这些不是有效的 JSON。

您使用的是 1.9 之前的 jQuery 版本吗？

# java - 需要将数据库中的列表类型数据写入不同的excel表

> ID：10929398
> 
> 赞同：-1
> 
> 时间：2012-06-07T09:45:34.683
> 
> 标签：java, apache-poi

我有一个从数据库返回的列表类型数据，我想将其写入电子表格。查询中的 Order By 子句按 A、B、C 排序。我想将此有序数据写入同一个 Excel 工作簿中的不同工作表中。请让我知道我该怎么做。我正在使用 POI 将数据写入 Excel。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:18:03.240

我想您可以写入 xls 文件。

因此，您可以像这样定义工作表：

```
public static void exportToXls()
{
  Workbook wb = new HSSFWorkbook();
  ...
  Sheet sheetA = wb.createSheet("sheetA"); 
  Sheet sheetB = wb.createSheet("sheetB");
  Sheet sheetC = wb.createSheet("sheetC");
  ...
  // export the appropriate list to the appropriate sheet
  for (YourObject item : listOrderedByA)
  { 
    rowNo++;
    row = sheetA.createRow((short)rowNo); 
    ...
    // define the columns
  }
  // and similarly for the other lists (ordered by B or C) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T03:56:20.597

谢谢你的回复，但我真正需要的是，如果我的数据是按A、B、C排序的，我需要创建一个新的工作表A、B或C，并在每次我的数据根据按子句排序。这其中也涉及到更多的问题。最后，我最终做的是，我在我的数据库查询中添加了一个变量 -

```
select distinct CASE WHEN color = 'Red' THEN 'A' WHEN color = 'Blue' THEN 'B' WHEN color = 'Green' THEN 'C' END AS sheetName, <other fetches from DB>.... 
```

因此，通过这种方式，我可以检查我的代码是否更改了 sheetName 并据此创建一个新工作表。

谢谢，拉兹

# dynamic - corba 中的动态参数传递

> ID：10929407
> 
> 赞同：0
> 
> 时间：2012-06-07T09:46:04.860
> 
> 标签：dynamic, arguments, corba

我是构建 corba 应用程序的新手。目前我正在用java开发一个corba应用程序。我遇到的问题是我应该编写一个方法来接收类的名称、方法和参数以作为字符串传递给 corba 服务器。在调用远程方法之前，我必须解析字符串并获取所有必要的信息（类、方法、参数）这里没有问题。但是现在关于论点，我现在不预先知道论点的类型，所以我应该能够通过获取它的类型来转换一个论点并将其插入到要发送的任何对象中，这可能吗？如果提前知道诸如 seq.insert_string("bum") 之类的类型，它可以工作，但我想动态地做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T18:04:36.643

如果您的 ORB 支持，请使用 DynAny 接口。他们可以做你想做的事。来自[CORBA 的简单解释](http://www.ciaranmchale.com/corba-explained-simply/meta-information-programming.html#toc74)：

> `any` 如果应用程序想要在不使用相关存根代码编译的情况下操作嵌入在 . 中的数据，则应用程序必须`any`将`DynAny`. 每个 IDL 构造都有 DynAny 的子类型。例如，有称为 DynStruct、DynUnion、DynSequence 等的类型。
> 
> DynAny 接口上的操作允许程序员 **递归地深入到**包含在 DynAny 中的复合数据结构中，并在此过程中将复合类型分解为其作为内置类型的单独组件。DynAny 接口上的操作也可用于从内置类型递归地构建复合数据结构。

# javascript - 在这种情况下如何使用参数添加回调？

> ID：10929410
> 
> 赞同：0
> 
> 时间：2012-06-07T09:46:13.623
> 
> 标签：javascript, callback

我有一个表 dom 元素

```
<table id='acc001'>...</table> 
```

我创建了一个弹出菜单来在单击该 tr 元素后获取 tr 数据

```
 var tr = $('<tr>').appendTo('#acc001');
  popupMenu.draw_menu(tr);

  var popupMenu = {
    menu : [
      {'string':'add data','type':'input','callback':function(tr){console.log(tr);}},
      {'string':'edit data','type':'input','callback':function(tr){console.log(tr);}}
    ],
    draw_menu : function(tr){
        for(i in this.menu)
        {
          var div = $('<div>',{'text':this.menu[i].string}).appendTo('#infoDiv');
          $(div).bind('click',this.menu[i].callback); // i cannot send param for this callback
        }
    }
  } 
```

问题出在创建菜单之后，但单击它们后我无法获得 tr 内容。所有 console.log 都无法显示..

1.  那么如何为这个回调添加和发送参数呢？
2.  还有其他方法可以正确执行此代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:49:27.383

将其包装在一个函数中并传递`tr`给回调：

```
$(div).bind('click',(function(callback) {
    return function() { callback(tr) }
})(this.menu[i].callback)); 
```

（已编辑：`this`不会来自事件处理程序内的适当上下文；再次修复）

# django - 带有 S3 URL Heroku 的 Django 压缩器

> ID：10929418
> 
> 赞同：5
> 
> 时间：2012-06-07T09:46:27.660
> 
> 标签：django, django-storage, django-compressor

我目前正在使用 django 压缩器和 django 存储从 s3 运行我的静态媒体。我的文件如下：

根据文档，我的存储是：

```
from django.core.files.storage import get_storage_class
from storages.backends.s3boto import S3BotoStorage

class CachedS3BotoStorage(S3BotoStorage):
    """
    S3 storage backend that saves the files locally, too.
    """
    def __init__(self, *args, **kwargs):
        super(CachedS3BotoStorage, self).__init__(*args, **kwargs)
        self.local_storage = get_storage_class(
            "compressor.storage.CompressorFileStorage")()

    def save(self, name, content):
        name = super(CachedS3BotoStorage, self).save(name, content)
        self.local_storage._save(name, content)
        return name 
```

我的设置是：

```
# S3 Storage Section
DEFAULT_FILE_STORAGE = 'storages.backends.s3boto.S3BotoStorage'
STATICFILES_STORAGE = DEFAULT_FILE_STORAGE
AWS_ACCESS_KEY_ID = os.environ['AWS_ACCESS_KEY_ID']
AWS_SECRET_ACCESS_KEY = os.environ['AWS_SECRET_ACCESS_KEY']
AWS_STORAGE_BUCKET_NAME = os.environ['AWS_STORAGE_BUCKET_NAME']
# AWS_S3_SECURE_URLS = False #turns off https for static files (necessary)

# Used to make sure that only changed files are uploaded with collectstatic
AWS_PRELOAD_METADATA = True

# Django compressor settings
STATICFILES_FINDERS += (
                        'compressor.finders.CompressorFinder',
                        )
COMPRESS_ENABLED = True
COMPRESS_OFFLINE = True
COMPRESS_URL = STATIC_URL
COMPRESS_ROOT = STATIC_ROOT
COMPRESS_STORAGE = 'erp.storage.CachedS3BotoStorage'
STATICFILES_STORAGE = 'erp.storage.CachedS3BotoStorage'
AWS_LOCATION = 'static'
AWS_QUERYSTRING_EXPIRE = 7200

COMPRESS_JS_FILTERS = [
    'compressor.filters.template.TemplateFilter',
] 
```

有很多媒体要压缩，这就是为什么我选择使用离线压缩并运行 manage.py compress 命令而不是在 dyno 重新启动时运行 collectstatic ，因为它只是太慢了。

Django 压缩器为我提供了一个很棒的查询字符串，但它包含不加载的 html。IE

```
<link rel="stylesheet" href="site-url/static/CACHE/css/da0c0fa8dd51.css?Signature=Signature&amp;Expires=Expires&amp;AWSAccessKeyId=key 
```

两个放大器；项目不应该在那里。我宁愿让它安全，但我也在设置中尝试了 AWS_S3_SECURE_URLS = False，这似乎并没有改变让我认为有问题的事情。

我正在使用 django 1.4，所以可能有一些不兼容的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-07T15:18:13.850

您可以在 settings.py 中使用 AWS_QUERYSTRING_AUTH = False 来阻止那些查询字符串项目

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-07T11:47:59.600

我可以确认，如果使用压缩管理命令，您需要重做文件清单。我是手动完成的，但我确信有更好的方法。很小的问题，但我花了一些时间在这上面，也许它会为别人节省一些时间。

# c++ - 使用 OpenCV 丢弃细胞图像中的异常值 SIFT 关键点

> ID：10929422
> 
> 赞同：6
> 
> 时间：2012-06-07T09:46:51.193
> 
> 标签：c++, opencv, computer-vision, sift

我正在处理生物信息学的任务，需要从一些细胞图像中提取一些特征。

如图所示，我使用 SIFT 算法提取图像内部的关键点。

![在此处输入图像描述](../Images/20f27f86fcb1299b60ed49fdc9147d4a.png)

正如您在图片中看到的（以红色圈出），一些关键点是异常值，我不想计算它们的任何特征。

我`cv::KeyPoint`使用以下代码获得了向量：

```
const cv::Mat input = cv::imread("/tmp/image.jpg", 0); //Load as grayscale

cv::SiftFeatureDetector detector;
std::vector<cv::KeyPoint> keypoints;
detector.detect(input, keypoints); 
```

但我想从`vector`所有那些关键点中丢弃，例如，在图像中以它们为中心的某个感兴趣区域 (ROI) 内的关键点少于 3 个。

因此，我需要实现一个函数，返回作为输入给出的某个 ROI 内的关键点数：

```
int function_returning_number_of_key_points_in_ROI( cv::KeyPoint, ROI );
   //I have not specified ROI on purpose...check question 3 
```

我有三个问题：

1.  是否有任何现有的功能做类似的事情？
2.  如果不能，你能给我一些帮助来理解如何自己实现它吗？
3.  你会为这个任务使用圆形还是矩形 ROI？你会如何在输入中指定它？

笔记：

我忘了指定我想要一个有效的函数实现，即检查每个关键点的所有其他点相对于它的相对位置不是一个好的解决方案（如果存在另一种方法）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T14:17:35.840

我决定采用统计路线，但如果您看到多个单元格，这可能行不通。

我的解决方案相当简单：

1.  计算关键点位置
2.  找到关键点空间位置的质心
3.  计算所有点到质心的欧几里得距离
4.  过滤原始关键点`distance < mu + 2*sigma`

这是我使用此算法得到的图像（关键点 == 绿色，质心 == 红色）：

![在此处输入图像描述](../Images/b57f1dfdefbd2cb2ba0d737744822a55.png)

最后，这是我如何做到的代码示例：

```
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/features2d/features2d.hpp>

#include <iostream>
#include <vector>

using namespace cv;
using namespace std;

void distanceFromCentroid(const vector<Point2f>& points, Point2f centroid, vector<double>& distances)
{
    vector<Point2f>::const_iterator point;
    for(point = points.begin(); point != points.end(); ++point)
    {
        double distance = std::sqrt((point->x - centroid.x)*(point->x - centroid.x) + (point->y - centroid.y)*(point->y - centroid.y));
        distances.push_back(distance);
    }
}

int main(int argc, char* argv[])
{
    Mat input = imread("cell.jpg", 0); //Load as grayscale

    SiftFeatureDetector detector;
    vector<cv::KeyPoint> keypoints;
    detector.detect(input, keypoints);

    vector<Point2f> points;
    vector<KeyPoint>::iterator keypoint;
    for(keypoint = keypoints.begin(); keypoint != keypoints.end(); ++keypoint)
    {
        points.push_back(keypoint->pt);
    }

    Moments m = moments(points, true);
    Point2f centroid(m.m10 / m.m00, m.m01 / m.m00);

    vector<double> distances;
    distanceFromCentroid(points, centroid, distances);

    Scalar mu, sigma;
    meanStdDev(distances, mu, sigma);

    cout << mu.val[0] << ", " << sigma.val[0] << endl;

    vector<KeyPoint> filtered;
    vector<double>::iterator distance;
    for(size_t i = 0; i < distances.size(); ++i)
    {
        if(distances[i] < (mu.val[0] + 2.0*sigma.val[0]))
        {
            filtered.push_back(keypoints[i]);
        }
    }

    Mat out = input.clone();
    drawKeypoints(input, filtered, out, Scalar(0, 255, 0));

    circle(out, centroid, 7, Scalar(0, 0, 255), 1);

    imshow("kpts", out);
    waitKey();

    imwrite("statFilter.png", out);

    return 0;
} 
```

希望有帮助！

# java - 抛出 Swing 异常时显示对话框

> ID：10929425
> 
> 赞同：0
> 
> 时间：2012-06-07T09:47:01.933
> 
> 标签：java, multithreading, swing, exception, jdialog

我有一个使用 swing 的 Java 应用程序。我找到了一种在应用程序中捕获所有未捕获异常的方法（见下文）。我想记录一条消息，为用户显示一个带有消息的对话框并终止应用程序。问题是，我试图捕捉的是一些摆动异常。在 UncaughtExceptionHandler 中捕获异常后尝试显示对话框是不可能的，因为 Swing 线程已停止。有什么办法可以显示一个对话框吗？创建一个新的摆动线程或类似的东西？

谢谢！

```
Thread.setDefaultUncaughtExceptionHandler(new Thread.UncaughtExceptionHandler() {
    boolean alreadyCaught = false;

    public void uncaughtException(Thread t, Throwable e) {
        if (alreadyCaught)
            return;

        alreadyCaught = true;
        e.printStackTrace();

        //show Dialog
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:55:02.500

完全有可能从默认的未捕获异常处理程序中显示一个对话框。我们的其中一款产品在过去 5 年中一直使用这种机制，没有出现任何问题。

当 EDT 由于异常杀死当前 EDT 而被替换时，我们有一个解决方法。我们不使用常规`SwingUtilities#invokeLater`来显示对话框，而是使用

```
new Thread( new Runnable() {
      public void run() {
        EventQueue.invokeLater( aRunnable );
      }
    } ).start(); 
```

这允许 EDT 被新的替换，并`Runnable`在新创建的 EDT 上运行。

# jquery - 使用 Telerik 控件多次调用相同的编辑器模板时出现问题

> ID：10929428
> 
> 赞同：1
> 
> 时间：2012-06-07T09:47:10.220
> 
> 标签：jquery, asp.net-mvc-3, telerik-mvc, mvc-editor-templates

我的工作是在带有 Razor 的 MVC3 上，所以这是
我有一个编辑器模板的场景，其中有一个 Telerik DropDownList 控件。
我的要求是通过调用编辑器模板多次显示相同的 Telerik DropDownList

```
EditorFor(m=>m.Assignee.Options,"OptionsList")
EditorFor(m=>m.Assignee.Options,"OptionsList") 
```

因此，如果我这样做，两个控件的样式都会正确呈现，但是 Telerik DDL 的“功能”会受到第二个控件的影响（它根本不会下降），第一个可以正常工作。

之后，我尝试使用其他一些控件（这里控件的工作也是基于 jQuery，就像 Teleriks 一样），我重复了上述场景。同样的结果。
第一个控件被渲染并正常工作，其余的重复控件坏了。
我发现问题在于编辑器模板中的控件使用的脚本（jQuery）。
我的问题是，是否可以**在编辑器模板中使用基于 jQuery 的控件**并使其在同一页面中**多次工作？**
如果是这样，我可以参考任何解决方案或链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T17:15:53.970

我认为这是由于您的 name 和 id 属性具有相同的值。

在您的编辑器模板中尝试使名称和 id 属性唯一。

```
@(Html.Telerik().DropDownList()
  .Name(ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty))   //unique
  .HtmlAttributes(new { id = ViewData.TemplateInfo.GetFullHtmlFieldName(string.Empty) + "_wrapper" })  //unique
  .SelectedIndex(...)
  .BindTo(...)
) 
```

# javascript - window.onblur 事件在使用 IE8 时也会触发 window.onfocus 事件

> ID：10929432
> 
> 赞同：1
> 
> 时间：2012-06-07T09:47:19.863
> 
> 标签：javascript, jquery, internet-explorer-8

这两个事件都在 onblur 事件时被触发。

```
<%@ Page Language="C#" MasterPageFile="~/Site1.Master" AutoEventWireup="true"  CodeBehind="WebForm1.aspx.cs"
Inherits="WebApplication1.WebForm1" Title="Untitled Page" %>
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
    <script src="js/jquery-1.7.2.js" type="text/javascript"></script>
    <script language="javascript" type="text/javascript">
        window.onfocus = function() {
            $('#msg').html($('#msg').html() + '<br/> focus');
        };
        window.onblur = function() {
            $('#msg').html($('#msg').html() + '<br/> Blur');
        };
    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">   
    <div id="msg">
    </div>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T15:28:06.227

终于解决了。谢谢大家的帮助！

```
$(window).bind("load", function() {
        pageLoad();
    });

    var activeElement;

    function pageLoad() {
        activeElement = document.activeElement;
        document.onfocusout = logWindow;
    }

    function logWindow() {
        if (activeElement != document.activeElement) {
            activeElement = document.activeElement;
        }
        else {
            $('#msg').html($('#msg').html()+'<br/> Focus');
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T12:01:23.267

```
 window.onblur = function() { 
      $('#msg').html($('#msg').html() + '<br/> Blur');     
      return false;
 }; 
```

可能是事件正在冒泡。

# coffeescript - Require.JS 和 JS 测试驱动程序：意外的令牌 <

> ID：10929435
> 
> 赞同：2
> 
> 时间：2012-06-07T09:47:29.990
> 
> 标签：coffeescript, requirejs, js-test-driver

我正在尝试测试通过 RequireJS 加载的简单主干模型：

```
define ["backbone"], (Backbone)->

    class Todo extends Backbone.Model 
        defaults:
            title: ''
            priority: 0
            done: false

        validate: (attrs) -> 
            errs = {}
            hasErrors = false

            if (attrs.title is "")
                hasErrors = true
                errs.title = "Please specify a todo"

            if hasErrors
                return errs

        toggleDone: ->
            @save("done", !@get("done"))

    return Todo 
```

我的测试看起来像：

```
requirejs.config 
    baseUrl: "js/"
    paths: 
        jquery: "https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min"
        jqueryui: "https://ajax.googleapis.com/ajax/libs/jqueryui/1/jquery-ui.min"
        json2: "http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2"
        underscore: "http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.3.3/underscore-min"
        backbone: "http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.9.2/backbone-min"
        backboneLocalStorage: "https://raw.github.com/jeromegn/Backbone.localStorage/master/backbone.localStorage-min"
    shim: 
        "underscore":
            exports: "_"
        "backbone": 
            deps: ["jquery", "underscore", "json2"]
            exports: "Backbone"
        "jqueryui": 
            deps: ["jquery"]
        "backboneLocalStorage":
            deps: ["backbone"]
            exports: "Backbone.LocalStorage"

require ["models/todo"], (Todo) ->

    console.log Todo

    TodoTests = TestCase("TodoTests")

    TodoTests::testCreateTodo = -> 
        todo = new Todo({ title: "Hello" })
        assertEquals "Hello", todo.get("title")
        assertEquals 0, todo.get("priority")
        assertEquals false, todo.get("done") 
```

JS 测试驱动程序配置：

```
server: http://localhost:3001

load:
  - ../public/js/libs/require.js
  - ../public/js/tests.js

serve:
  - ../public/js/models/*
  - ../public/js/collections/*
  - ../public/js/views/* 
```

从 Chrome 控制台上的 JS 测试驱动程序监听页面看到的问题：

> 未捕获的 SyntaxError：意外的令牌 <

从 Chrome 中查看 Todo.js，

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Console Runner</title><script type="text/javascript">var start = new Date().getTime();</script>
Uncaught SyntaxError: Unexpected token <
<script src="/static/lib/json2.js" type="text/javascript"></script><script src="/static/lib/json_sans_eval.js" type="text/javascript"></script><script src="/static/jstestdrivernamespace.js" type="text/javascript"></script><script src="/static/lib/jquery-min.js" type="text/javascript"></script><script src="/static/runner.js" type="text/javascript"></script><script type="text/javascript">jstestdriver.runConfig = {'debug':false};</script>
<script type="text/javascript">jstestdriver.console = new jstestdriver.Console(); 
```

注意它是一个 HTML 页面，而不是我的实际 JS。也`console.log(Todo)`返回`undefined`，因为返回的是 HTML 页面而不是 JS。我配置错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-07T04:25:08.187

我为此苦苦挣扎了好几天，并无休止地用谷歌搜索，直到我终于发现 JsTestDriver 在做什么。在您的`requirejs.config`, 为了您的测试正常运行，您`baseUrl`需要：

```
baseUrl: /test/path/to/your/stuff 
```

原因是当 JsTestDriver 创建它的服务器时，它会`/test/`添加到所有目录。如果`baseUrl`设置不正确，它会开始尝试向本地发回我认为的对窗口的引用。

我看到您可能遇到的唯一另一个问题是使用 require 语句作为第一行运行测试。我有 Jasmine 并将我的 require() 放在我的测试顶部导致它们永远不会运行，所以我必须在我的 beforeEach 中为我的测试执行它并在它们运行之前获取对象。

尽管我看到无数其他人声称 Jasmine 中的 require 语句有效，但我可能做错了什么，所以我的追捕仍在继续。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T10:29:03.173

你检查过你的ajax响应吗？我只是有同样的事情，'<'来自资源 404 时返回的打开 doctype 标记......

# java - 在类路径中创建带有多个库的自定义清单的 jar

> ID：10929438
> 
> 赞同：5
> 
> 时间：2012-06-07T09:47:53.500
> 
> 标签：java, eclipse, jar, manifest

我正在尝试从我的 Eclipse 创建一个 jar，并且为了能够使用外部 .jar，我在类路径中使用了这个带有多个 .jar 的清单：

```
Manifest-Version: 1.0
Sealed: true
Main-Class: src.BatchTester
Class-Path: . P:/Tools/xstream/1.4.2/lib/kxml2-2.3.0.jar P:/Tools/xstream/1.4.2/lib/xstream-1.4.2.jar P:/Tools/StringTemplate/4.0.5/lib/antlr-3.3-complete.jar P:/Tools/StringTemplate/4.0.5/lib/ST-4.0.5.jar P:/Tools/Jdbc/lib/sqljdbc4.jar 
```

显然，如果我不将库放在类路径中，则会出现以下错误：

```
java.lang.NoClassDefFoundError: com/thoughtworks/xstream/XStream 
```

但是当我将它们放在类路径中时，错误变为：

```
java.lang.NoClassDefFoundError: src/BatchTester 
```

所以它似乎找不到我的主要课程。我在类路径中尝试了几种可能性，例如添加或删除`.`类路径，但无法使其工作。

知道如何解决这个问题吗？？？

感谢您的时间和精力，

* * *

PS：创建 .jar 后，清单中的类路径如下所示：

```
Class-Path: . P:/Tools/xstream/1.4.2/lib/kxml2-2.3.0.jar P:/Tools/xstr
 eam/1.4.2/lib/xstream-1.4.2.jar P:/Tools/StringTemplate/4.0.5/lib/ant
 lr-3.3-complete.jar P:/Tools/StringTemplate/4.0.5/lib/ST-4.0.5.jar P:
 /Tools/Jdbc/lib/sqljdbc4.jar 
```

使用新的行和空格，但即使将其更改为“正确”格式，我也遇到了同样的问题。

PS2：我知道使用 Fat-Jar 之类的插件可以让它工作，但我不想在我的 .jar 中插入比需要更多的数据

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T13:21:50.410

最后，我将所有库复制到 /lib 文件夹中，并将它们添加到带有 ant 目标的 .jar 中，因为 IT 人员似乎没问题（因为它是一个小应用程序）。

这是蚂蚁（以防对某人有用）：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="BatchTester" default="compile" basedir=".">
    <property name="external" value="lib/external-libs.jar"/>
    <target name="compile">
        <javac srcdir="jav"
               source="1.6"
        />
        <echo>Creating jar File</echo>
        <!--create a new .jar with all the external jars in /lib-->
        <jar jarfile="${external}">
            <zipgroupfileset dir="lib/">
                <include name="**/*.jar"/>
            </zipgroupfileset>
        </jar>
        <!--<sleep seconds="1"/>-->
        <!--create .jar file-->
        <jar jarfile="BatchTester.jar" index="true" filesetmanifest="mergewithoutmain">
            <fileset dir=".">
                <include name="**/jav/**/*.class"/>
                <exclude name="**/jav/**/*.java"/>
            </fileset>
            <zipfileset src="${external}">
                <exclude name="META-INF/*.SF"/>
            </zipfileset>
            <manifest>
                <attribute name="Main-Class" value="jav.BatchTester"/>
            </manifest>
        </jar>
        <!--delete previously created extern .jar-->
        <delete file="${external}"/>
    </target>
</project> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T12:19:58.017

对不起，如果我的问题对你来说很明显。

* * *

***启动命令 ***

为了排除任何疑问，您没有尝试使用这种命令启动您的 jar 吗？

```
java -jar myJar.jar -cp ./lib 
```

如果您使用类路径选项，您可能没有;)。选项 --classpath（或 -cp）和 -jar 不能一起使用。

也更喜欢使用相对路径，例如 ./lib 而不是 P:/Tools/... 但是，无论如何，这不会解决您的问题。

* * *

***包裹位置 ***

正如 brimborium 所说，你真正的包裹是什么？src 听起来很奇怪。我们怀疑这是一个错误。

在您的 BatchTester 课程中，您为 package 指令写了什么？什么都没有（即不推荐的默认包？）？

你上课是从（摆脱评论）开始的吗？

```
public class BatchTester { 
```

在这种情况下，当然不应该提及 src 。

这是一个对我有用的清单示例。

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Built-By: jrRevy
Build-Jdk: 1.6.0_31
Main-Class: com.sopragroup.training.dojo1.MainSwingApp
Class-Path: dojo1-0.5.0-SNAPSHOT-lib/spring-core-3.1.1.RELEASE.jar doj
 o1-0.5.0-SNAPSHOT-lib/spring-asm-3.1.1.RELEASE.jar [blablabla] 
```

具有以下执行结构

```
/
|
+ --dojo1-0.5.0-SNAPSHOT.jar
|
+ --dojo1-0.5.0-SNAPSHOT-lib/
    |
    + --spring-core-3.1.1.RELEASE.jar 
```

显然，我使用 maven 来构建我的应用程序，但主要思想是。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-07T08:24:53.123

清单不允许在*Class-Path:*标记中使用绝对路径。您有两种选择：

*   使用您在自己的答案中已经提到的相对路径

*   通过*文件*协议使用绝对路径。这也已在其他地方得到解答，它[在 jar 清单中使用绝对路径名与相对路径名](https://stackoverflow.com/questions/47961942/absolute-versus-relative-path-names-in-jar-manifest)

    类路径：file:///P:/Tools/xstream/1.4.2/lib/kxml2-2.3.0.jar

此外，您不应在不了解以下限制的情况下手动编辑 manifest.mf：

*   行的最大长度不得超过 72 个字符，并且在换行后必须在第一列中插入一个空格。
*   最后一行后面必须有回车，否则无法正确解析文件

# iphone - 在 iOS 上创建不同宽度单元格的滚动网格

> ID：10929439
> 
> 赞同：0
> 
> 时间：2012-06-07T09:47:55.727
> 
> 标签：iphone, objective-c, ios, quartz-2d

我是 iOS/Mac 和 ObjectiveC 开发的新手，如果有人能这么好，我需要一些指导，所以请原谅我的无知。

我遇到的问题是我需要为电视指南创建一个网格视图，其中左侧有一个垂直的频道徽标列表，可以上下滚动，而在它的右侧，我们有一个水平和垂直滚动的网格。水平滚动不会移动固定在屏幕上的频道徽标，但垂直滚动网格也会像您期望的那样滚动徽标。

现在是 ObjC 和 iOS 框架的新手，我想知道应该使用哪些方法来实现它，也许是 Quartz2D？还是他们的替代方法更简单？

无论使用哪种方法，它都需要在多达 600 行中包含数千个“单元格”；它还必须具有内存效率，并根据需要处理/重用视野之外的单元。

我不一定要特定的代码（虽然那会很好，哈哈），只是一些关于使用什么方法的建议，这样我就可以将我的教育集中在这些领域；如果可能的话

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:12:32.113

似乎您并不真的需要左右两个不同的滚动视图/表格视图，因为两侧应该始终相互滚动。

因此，只需将 a与左侧有徽标`UITableView`的自定义单元格（子类）一起使用，右侧有另一个滚动视图（用于水平滚动）。`UITableViewCell`

阅读 Apple 的[Table View Programming Guide](http://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html#//apple_ref/doc/uid/TP40007451)，您就可以上路了。

# android - setText() 上的 Android 空指针

> ID：10929440
> 
> 赞同：0
> 
> 时间：2012-06-07T09:47:56.257
> 
> 标签：android, nullpointerexception

我的活动中有一个调用 setText() 的方法，但它在 textView 上返回了一个 nullpointerexception。谁能告诉我为什么？

请参阅下面的片段：

```
 @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playing); 
```

...

```
 songArtistAlbumLabel = (TextView) findViewById(R.id.songArtistAlbumLabel); 
```

...

```
static void displaySong(String currentArtist, String currentAlbum,
        String currentTitle, String totalDuration, Uri currentSongUri) {
    songArtistAlbumLabel.setText((currentArtist) + " - " + (currentAlbum));
        } 
```

...

由于各种原因，我需要将方法 displaySong 保持为静态，所以我不能把

```
 songArtistAlbumLabel = (TextView) findViewById(R.id.songArtistAlbumLabel); 
```

在方法内部.. AFAIK。此外，nullpointerexception 发生在该行

```
songArtistAlbumLabel.setText((currentArtist) + " - " + (currentAlbum)); 
```

方法里面。

非常感谢任何建议。

- 编辑 -

完整代码：

```
package awesome.music.player;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;

public class MusicPlayer extends Activity implements OnSeekBarChangeListener {

    public ImageButton play;
    public ImageButton next;
    public ImageButton previous;

    public static ImageView albumArt;

    static TextView songArtistAlbumLabel;
    static TextView songTitleLabel;
    static TextView currentDurationLabel;
    static TextView totalDurationLabel;

    static String serviceStatus;

    private SeekBar seekBar;

    private int seekMax;

    boolean mBroadcastIsRegistered;

    public static Utilities utils;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.playing);

        play = (ImageButton) findViewById(R.id.playButton);
        next = (ImageButton) findViewById(R.id.nextButton);
        previous = (ImageButton) findViewById(R.id.previousButton);
        albumArt = (ImageView) findViewById(R.id.imageView1);

        songArtistAlbumLabel = (TextView) findViewById(R.id.songArtistAlbumLabel);

        play.setOnClickListener(playListener);
        next.setOnClickListener(nextListener);
        previous.setOnClickListener(previousListener);

        seekBar = (SeekBar) findViewById(R.id.seekBar);
        seekBar.setOnSeekBarChangeListener(this);

        intent = new Intent(BROADCAST_SEEKBAR);

        if (mBroadcastIsRegistered != true) {
            registerReceiver(broadcastReceiver, new IntentFilter(
                    MusicService.BROADCAST_ACTION));;

            mBroadcastIsRegistered = true;
        }

    }

    private OnClickListener playListener = new OnClickListener() {
        public void onClick(View v) {
            MusicService.playSong();

        }
    };

    private OnClickListener nextListener = new OnClickListener() {
        public void onClick(View v) {
            MusicService.playNext();
        }
    };

    private OnClickListener previousListener = new OnClickListener() {
        public void onClick(View v) {
            MusicService.playPrevious();
        }
    };

    public static final String BROADCAST_SEEKBAR = "awesome.music.player.sendseekbar";
    Intent intent;

    private BroadcastReceiver broadcastReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent serviceIntent) {
            updateUI(serviceIntent);
        }
    };

    static void displaySong(String currentArtist, String currentAlbum,
            String currentTitle, String totalDuration, Uri currentSongUri) {

        songArtistAlbumLabel.setText(currentArtist + " - " + currentAlbum);

        songTitleLabel.setText(currentTitle);

        totalDurationLabel.setText(totalDuration);

        albumArt.setImageURI(currentSongUri);

    }

    private void updateUI(Intent serviceIntent) {
        String counter = serviceIntent.getStringExtra("counter");
        String mediamax = serviceIntent.getStringExtra("mediamax");
        String strSongEnded = serviceIntent.getStringExtra("song_ended");
        int seekProgress = Integer.parseInt(counter);
        seekMax = Integer.parseInt(mediamax);
        Integer.parseInt(strSongEnded);
        seekBar.setMax(seekMax);
        seekBar.setProgress(seekProgress);
    }

    public void onProgressChanged(SeekBar seekBar, int progress,
            boolean fromUser) {
        if (fromUser) {
            int seekPos = seekBar.getProgress();
            intent.putExtra("seekpos", seekPos);
            sendBroadcast(intent);
        }

    }

    public void onStartTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

    public void onStopTrackingTouch(SeekBar seekBar) {
        // TODO Auto-generated method stub

    }

} 
```

--编辑2--

添加了xml：

```
<?xml version="1.0" encoding="utf-8"?>
<AbsoluteLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <SeekBar
        android:id="@+id/seekBar"
        android:layout_width="296dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="20dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_x="10dp"
        android:layout_y="446dp"
        android:paddingLeft="6dp"
        android:paddingRight="6dp"
        android:progressDrawable="@drawable/seekbar_progress"
        android:thumb="@drawable/seek_handler" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="37dp"
        android:layout_height="37dp"
        android:layout_x="6dp"
        android:layout_y="397dp"
        android:src="@drawable/ic_tab_albums_white" />

    <TextView
        android:id="@+id/songTitleLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="55dp"
        android:layout_y="395dp"
        android:text="Song Label"
        android:textSize="20sp" />

    <TextView
        android:id="@+id/songArtistAlbumLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="55dp"
        android:layout_y="417dp"
        android:text="Artist - Album Label"
        android:textSize="15sp" />

    <TextView
        android:id="@+id/currentDurationLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="10dp"
        android:layout_y="481dp"
        android:text="0:00" />

    <TextView
        android:id="@+id/totalDurationLabel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="281dp"
        android:layout_y="477dp"
        android:text="3:30" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_x="41dp"
        android:layout_y="312dp"
        android:gravity="center_horizontal" >

        <ImageButton
            android:id="@+id/previousButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_x="132dp"
            android:layout_y="308dp"
            android:src="@drawable/ic_previous" />

        <ImageButton
            android:id="@+id/playButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginLeft="50sp"
            android:layout_marginRight="50sp"
            android:src="@drawable/ic_pause" />

        <ImageButton
            android:id="@+id/nextButton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/ic_next" />
    </LinearLayout>

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="287dp"
        android:layout_height="272dp"
        android:layout_x="16dp"
        android:layout_y="13dp"
        android:background="@drawable/dummy_album_art"
        android:scaleType="fitXY" />

</AbsoluteLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:35:21.373

`nullpointerexception`不是这里的主要问题。问题在于你的设计。

我假设您将`displaySong()`方法设为静态，以便能够从您的活动之外调用它。您`TextView songArtistAlbumLabel`在其中使用它，因此您也必须使其成为静态的。但这是设计上的一个重大缺陷，因为静态字段不属于类实例，它们属于类。`songArtistAlbumLabel`但是，显然应该属于 Activity 实例。这是一个可能的场景 - 你调用`displaySong()`方法，而 Activity 从未启动，所以`displaySong`你`null`得到了`npe`. 这是另一种可能的情况 - 您`displaySong()`在 Activity 被销毁并且`songArtistAlbumLabel`屏幕上没有任何位置后调用，但您仍在尝试为其设置标签。

有一个肮脏的技巧 - 您可以使用公共 getter 方法（有点像单例）将 Activity 实例的引用存储在另一个静态字段中，并在您的静态方法中将其引用到`findViewById()`. 但这并没有让事情变得更好。

解决方案是使用[Intents](http://developer.android.com/reference/android/content/Intent.html)`onCreate()`从外部将消息传递给活动，并通过方法检查它们并在活动的[onNewIntent()](http://developer.android.com/reference/android/app/Activity.html#onNewIntent%28android.content.Intent%29)方法中`getIntent()`收听它们

**编辑**如果您只打算从服务中调用它，请查看[The Busy Coder's Guide to Android Development](http://commonsware.com/Android/)`The Music Player`中的部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:54:01.813

假设您`displaySong()`在设置后调用`songArtistAlbumLabel`，最可能的解释是`R.id.songArtistAlbumLabel`与您布局中的任何 id 都不匹配。

# node.js - NodeJS + MongoDB：使用 findOne () 从集合中获取数据

> ID：10929443
> 
> 赞同：16
> 
> 时间：2012-06-07T09:48:34.073
> 
> 标签：node.js, mongodb, express

我有一个包含多个对象的集合“公司”。每个对象都有“_id”参数。我正在尝试从 db 获取此参数：

```
app.get('/companies/:id',function(req,res){
db.collection("companies",function(err,collection){
    console.log(req.params.id);
    collection.findOne({_id: req.params.id},function(err, doc) {
        if (doc){
            console.log(doc._id);
        } else {
            console.log('no data for this company');
        }
    });
});
}); 
```

因此，我请求 company/4fcfd7f246e1464d05000001 （4fcfd7f246e1464d05000001 是我需要的对象的_id-parma）并且 findOne 什么也没返回，这就是为什么 console.log('no data for this company'); 执行。

我绝对确定我有一个 _id="4fcfd7f246e1464d05000001" 的对象。我做错了什么？谢谢！

**但是，我刚刚注意到 id 不是典型的字符串字段。这就是 mViewer 显示的内容：**

```
"_id": {
        "$oid": "4fcfd7f246e1464d05000001"
    }, 
```

好像有点奇怪……

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-06-07T10:06:27.393

您需要构造 ObjectID 而不是将其作为字符串传递。像这样的东西应该工作：

```
var BSON = require('mongodb').BSONPure;
var obj_id = BSON.ObjectID.createFromHexString("4fcfd7f246e1464d05000001"); 
```

然后，尝试在你的 find/findOne 中使用它。

[编辑：正如Ohad](https://stackoverflow.com/users/455262/ohad-kravchick)在评论中指出的那样（感谢 Ohad！），您还可以使用：

```
new require('mongodb').ObjectID(req.params.id) 
```

而不是`createFromHexString`如上所述。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T10:25:06.490

那是因为`_id`mongo 中的字段不是`string`类型（作为你的`req.params.id`）。正如其他答案中所建议的，您应该明确转换它。

试试[mongoskin](https://github.com/kissjs/node-mongoskin)，你可以像 node-mongodb-native 驱动程序一样使用它，但要加一些糖。例如：

```
// connect easier
var db = require('mongoskin').mongo.db('localhost:27017/testdb?auto_reconnect');

// collections
var companies = db.collection('companies');

// create object IDs
var oid = db.companies.id(req.params.id);

// some nice functions…
companies.findById();

//… and bindings
db.bind('companies', {
  top10: function(callback) {
    this.find({}, {limit: 10, sort: [['rating', -1]]).toArray(callback);
  } 
});

db.companies.top10(printTop10); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T11:01:31.727

您可以使用`findById()`which 将为您处理 id 转换。

```
company = Company.findById(req.params.id, function(err, company) {
    //////////
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-22T19:04:01.540

如果这些对你不起作用，这对我访问博客文章有用：

```
const getSinglePost = async (req, res) => {

    let id = req.params.id;
    var ObjectId = require('mongodb').ObjectId;
    const db = await client.db('CMS');

    const data = await db.collection("posts").findOne({ _id: ObjectId(id) })

    if (data) {
        res.status(200).send(data)
    } else res.status(400).send({ message: "no post found" })

} 
```

# xsd - 在正则表达式中使用枚举限制类型

> ID：10929446
> 
> 赞同：2
> 
> 时间：2012-06-07T09:48:46.630
> 
> 标签：xsd

我有一个 XSD 文件，我在其中定义了一个受此类枚举限制的简单类型。

```
<xs:simpleType name="myEnumStrings">
    <xs:restriction base="xs:string">
        <xs:enumeration value="first"/>
        <xs:enumeration value="second"/>
        ...
        <xs:enumeration value="last"/>
    </xs:restriction>
</xs:simpleType> 
```

我有第二种简单类型，它的值取决于 myEnumStrings 的可能值，这种复杂的方式我只能用一种模式来描述。

```
<xs:simpleType name="patternRestrictedType">
    <xs:restriction base="xs:string">
        <xs:pattern value="..."/>
    </xs:restriction>
</xs:simpleType> 
```

目前我正在使用字符串复制正则表达式中的信息

```
(first|second|...|last) 
```

每当我想引用 myEnumStrings 时。虽然这是一个麻烦制造者和错误的来源，因为当我修改 myEnumStrings 类型时，我需要使所有正则表达式保持最新。

有没有办法在正则表达式中引用 myEnumStrings 的可能值以避免这种重复？如果这是不可能的，有没有办法全局定义要在正则表达式中重用的字符串（first|second|...|last），以限制仅在两个地方重复并使正则表达式更具可读性?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:16:52.710

XSD 不擅长它，如“优雅”。唯一可能有帮助的是使用工会；它可以根据您的特定模式工作，但它可能无法根据您未描述的其他内容工作。

这个想法是重用枚举。为此，您创建简单的类型来封装您希望重用的枚举。只是一个观察，具有多个枚举值在技术上等同于其值的析取（就模式而言）。

```
<?xml version="1.0" encoding="utf-8" ?>
<xsd:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <xsd:simpleType name="myEnumStrings-1">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="first"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:simpleType name="myEnumStrings-2">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="second"/>
        </xsd:restriction>
    </xsd:simpleType>
    <xsd:simpleType name="myEnumStrings-n">
        <xsd:restriction base="xsd:string">
            <xsd:enumeration value="last"/>
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:simpleType name="myEnumStrings">
        <xsd:union memberTypes="myEnumStrings-1 myEnumStrings-2 myEnumStrings-n"/>
    </xsd:simpleType>

    <xsd:simpleType name="patternRestrictedType">
        <xsd:union memberTypes="myEnumStrings-1 myEnumStrings-2"/>
    </xsd:simpleType>

    <xsd:element name="root-a" type="myEnumStrings"/>
    <xsd:element name="root-b" type="patternRestrictedType"/>
</xsd:schema> 
```

以上实现了枚举的重用，或者您定义为联合成员约束的任何其他内容。

root-a 的有效 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<root-a xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd">last</root-a> 
```

root-b 的有效 XML：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<root-b xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd">second</root-b> 
```

虽然 root-b 的内容适用于 root-a，但反之则不然。

正如我所说，当您想到大系列时，可能并不那么优雅；但是，它应该严格回答我认为您提出的问题，并可能为您提供其他方法的指示。

# c++ - 如何在不使用 C++ 中的任何库的情况下检测图像中的对象？

> ID：10929449
> 
> 赞同：1
> 
> 时间：2012-06-07T09:49:06.247
> 
> 标签：c++, qt, image-processing

我正在编写一个`C++`需要一点图像处理的应用程序。由于我对这个领域完全陌生，我不知道从哪里开始。

基本上我有一个图像，其中包含一个带有几个框的矩形。我想要的是能够隔离它`rectangle (x, y, width, height)`并获得里面每个盒子的中心坐标（总共 18 个）。

我正在考虑使用一个简单的 for 循环遍历图像中的像素，直到找到一个模式，但我想知道是否有更有效的方法。我还想看看我是否可以在不使用大型库的情况下有效地做到这一点`OpenCV.`

这是几个示例图像，任何帮助将不胜感激：

![在此处输入图像描述](../Images/c008b48f933e4762a18f2389dfc4e106.png)

另外，有哪些好的资源可以让我了解更多关于这样的图像处理的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:18:24.600

这里的检测算法可以相当简单。您的方块 (BOS) 始终与图像的边缘对齐，并且具有简单的结构。这就是我的处理方式。

1.  选择一个色彩空间。假设 RGB 现在还可以，但在其他方面可能会更好。

2.  对于每一行

    1.  对于每个像素，计算该像素与其正下方的像素之间的幅度差。幅度差异只是 sqrt((Xx)^2+(Yy)^2+(Zz)^2))，其中 X,Y,Z 是第一个像素的颜色坐标，x,y,z 是颜色坐标它下面的像素。对于 RGB，当然 XYZ=RGB。

    2.  计算低于某个阈值*magThresh*的连续差异幅度的最大运行长度。您也可以选择一个宽容的版本：最大运行长度，但允许长达 intrLen 像素的入侵，*之后*必须跟随长达*contLen*像素的长时间运行。这是为了处理正方形边缘可能存在的线间差异。

3.  找到最大运行长度高于*minWidth*和低于*maxWidth*的最大连续行集。

这样你就找到了包含盒子的行，通过重新计算上面2.1中的数据，你会知道盒子在水平坐标中的位置。

检测框边缘是通过重复相同的操作但在框内从左到右扫描来完成的。此时，您将拥有近似的框形心，不会注意到像素之间的出血。

我认为，这可以通过通过各种卷积核重复运行图像然后进行阈值处理来完成。好消息是这两个操作都有非常快的库实现。您不想手动重新实现它们，它可能会明显变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:03:35.707

如果你坚持自己做（我个人会使用`OpenCV`，它是工业级的并且免费的），你首先需要一个边缘检测算法。互联网上有很多，但要为一些可怕的数学做好准备......

许多涉及迭代每个像素，并将其及其邻居的值提升到矩阵中，然后与内核矩阵进行卷积。请注意，必须对每个像素（但原则上，在您的情况下，您可以在第一个发现的矩形处停止）和每个颜色通道执行此操作 - 因此强烈建议将其推送到 GPU 上。

# bash - 逐行读取文件，将值分配给变量

> ID：10929453
> 
> 赞同：868
> 
> 时间：2012-06-07T09:49:09.860
> 
> 标签：bash

我有以下 .txt 文件：

```
Marco
Paolo
Antonio 
```

我想逐行阅读它，并且对于每一行我想将一个 .txt 行值分配给一个变量。假设我的变量是`$name`，流程是：

*   从文件中读取第一行
*   分配`$name`=“马可”
*   做一些任务`$name`
*   从文件中读取第二行
*   分配`$name`=“保罗”

* * *

## 回答 #1

> 赞同：1557
> 
> 时间：2012-06-07T09:53:38.333

下面逐行读取作为参数传递的文件：

```
while IFS= read -r line; do
    echo "Text read from file: $line"
done < my_filename.txt 
```

这是在循环中从文件中读取行的[标准形式](http://mywiki.wooledge.org/BashFAQ/001)。解释：

*   `IFS=`（或`IFS=''`）防止前导/尾随空格被修剪。
*   `-r`防止反斜杠转义被解释。

或者你可以把它放在一个 bash 文件帮助脚本中，示例内容：

```
#!/bin/bash
while IFS= read -r line; do
    echo "Text read from file: $line"
done < "$1" 
```

如果将以上内容保存到具有 filename 的脚本中`readfile`，则可以按如下方式运行：

```
chmod +x readfile
./readfile filename.txt 
```

如果文件不是[标准的 POSIX 文本文件](https://stackoverflow.com/a/729795/1968)（= 不是由换行符终止），则可以修改循环以处理尾随部分行：

```
while IFS= read -r line || [[ -n "$line" ]]; do
    echo "Text read from file: $line"
done < "$1" 
```

在这里，`|| [[ -n $line ]]`如果最后一行不以 a 结尾，则防止它被忽略`\n`（因为`read`在遇到 EOF 时返回非零退出代码）。

如果循环内的命令也从标准输入读取，则使用的文件描述符`read`可能会变成其他东西（避免使用[标准文件描述符](https://en.wikipedia.org/wiki/File_descriptor)），例如：

```
while IFS= read -r -u3 line; do
    echo "Text read from file: $line"
done 3< "$1" 
```

（非 Bash shell 可能不知道`read -u3`；请`read <&3`改用。）

* * *

## 回答 #2

> 赞同：334
> 
> 时间：2012-06-07T10:24:31.930

我鼓励您使用以下`-r`标志`read`：

```
-r  Do not treat a backslash character in any special way. Consider each
    backslash to be part of the input line. 
```

我引用自`man 1 read`.

另一件事是将文件名作为参数。

这是更新的代码：

```
#!/usr/bin/bash
filename="$1"
while read -r line; do
    name="$line"
    echo "Name read from file - $name"
done < "$filename" 
```

* * *

## 回答 #3

> 赞同：145
> 
> 时间：2012-06-07T09:55:10.487

使用以下 Bash 模板应该允许您一次从文件中读取一个值并对其进行处理。

```
while read name; do
    # Do what you want to $name
done < filename 
```

* * *

## 回答 #4

> 赞同：89
> 
> 时间：2016-01-12T11:25:30.863

```
#! /bin/bash
cat filename | while read LINE; do
    echo $LINE
done 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2014-04-17T20:40:27.633

采用：

```
filename=$1
IFS=$'\n'
for next in `cat $filename`; do
    echo "$next read from $filename" 
done
exit 0 
```

如果你有`IFS`不同的设置，你会得到奇怪的结果。

* * *

## 回答 #6

> 赞同：21
> 
> 时间：2016-10-16T10:30:40.243

许多人发布了一个过度优化的解决方案。我不认为这是不正确的，但我谦虚地认为，一个不太优化的解决方案将是可取的，让每个人都可以轻松地理解它是如何工作的。这是我的建议：

```
#!/bin/bash
#
# This program reads lines from a file.
#

end_of_file=0
while [[ $end_of_file == 0 ]]; do
  read -r line
  # the last exit status is the 
  # flag of the end of file
  end_of_file=$?
  echo $line
done < "$1" 
```

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2016-02-01T12:58:05.137

如果您需要同时处理输入文件和用户输入（或来自标准输入的任何其他内容），请使用以下解决方案：

```
#!/bin/bash
exec 3<"$1"
while IFS='' read -r -u 3 line || [[ -n "$line" ]]; do
    read -p "> $line (Press Enter to continue)"
done 
```

基于[接受的答案](https://stackoverflow.com/a/10929511/1266605)和[bash-hackers 重定向教程](http://wiki.bash-hackers.org/howto/redirection_tutorial)。

在这里，我们打开作为脚本参数传递的文件的文件描述符 3，并告诉`read`使用这个描述符作为输入 ( `-u 3`)。因此，我们将默认输入描述符 (0) 附加到终端或另一个输入源，以便能够读取用户输入。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2017-12-21T19:49:52.753

对于正确的错误处理：

```
#!/bin/bash

set -Ee    
trap "echo error" EXIT    
test -e ${FILENAME} || exit
while read -r line
do
    echo ${line}
done < ${FILENAME} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-07-23T19:50:11.723

使用 bash 中的 IFS（内部字段分隔符）工具，定义用于将行分隔为标记的字符，默认包括 < **tab** > /< **space** > /< **newLine** >

**第 1 步**：加载文件数据并插入列表：

```
# declaring array list and index iterator
declare -a array=()
i=0

# reading file in row mode, insert each line into array
while IFS= read -r line; do
    array[i]=$line
    let "i++"
    # reading from file path
done < "<yourFullFilePath>" 
```

**第 2 步**：现在迭代并打印输出：

```
for line in "${array[@]}"
  do
    echo "$line"
  done 
```

**回显数组中的特定索引**：访问数组中的变量：

```
echo "${array[0]}" 
```

* * *

## 回答 #10

> 赞同：-7
> 
> 时间：2019-01-09T17:16:40.960

以下将仅打印出文件的内容：

```
cat $Path/FileName.txt

while read line;
do
echo $line     
done 
```

# java - 当 URL 以“file://”开头时，URL.openstream 不起作用

> ID：10929456
> 
> 赞同：4
> 
> 时间：2012-06-07T09:49:34.500
> 
> 标签：java, url

以下代码引发以下异常：

```
URL u = new URL("file://D:/abc.xml");
InputStream input = u.openStream(); 
```

抛出异常：

```
Exception in thread "main" java.net.UnknownHostException: D
at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:177)
at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:366)
at java.net.Socket.connect(Socket.java:529)
at java.net.Socket.connect(Socket.java:478)
at sun.net.NetworkClient.doConnect(NetworkClient.java:163)
at sun.net.NetworkClient.openServer(NetworkClient.java:118)
at sun.net.ftp.FtpClient.openServer(FtpClient.java:488)
at sun.net.ftp.FtpClient.openServer(FtpClient.java:475)
at sun.net.www.protocol.ftp.FtpURLConnection.connect(FtpURLConnection.java:270)
at sun.net.www.protocol.ftp.FtpURLConnection.getInputStream(FtpURLConnection.java:352)
at java.net.URL.openStream(URL.java:1010)
at com.nuance.nlu.JavaApiExmaple.main(Exmaple.java:191)
ERROR: JDWP Unable to get JNI 1.2 environment, jvm->GetEnv() return code = -2
JDWP exit error AGENT_ERROR_NO_JNI_ENV(183):  [../../../src/share/back/util.c:820] 
```

但是，如果我使用：

*   `URL u = new URL("file:///D:/abc.xml");`（文件后 3 个斜线），或：
*   `URL u = new URL("file:/D:/abc.xml");`（文件后的 1 个斜杠：）

这行代码`InputStream input = u.openStream();` 执行得很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T09:53:41.893

首先看看：[文件 URL 以三个斜杠开头的原因是什么：“file:///”等？](https://superuser.com/questions/352133)详细说明。

摘自该答案：

> 完整的语法是`file://host/path`.
> 
> 如果主机是`localhost`，则可以省略，导致`file:///path`.

# css - Sass - 将 Hex 转换为 RGBa 以获得背景不透明度

> ID：10929458
> 
> 赞同：249
> 
> 时间：2012-06-07T09:49:44.983
> 
> 标签：css, sass, background-color, mixins, rgba

我有以下 Sass mixin，它是对**RGBa 示例**的半完整修改：

```
@mixin background-opacity($color, $opacity: .3) {
    background: rgb(200, 54, 54); /* The Fallback */
    background: rgba(200, 54, 54, $opacity);
} 
```

我已经申请`$opacity`好了，但现在我被这`$color`部分卡住了。我将发送到 mixin 的颜色将是 HEX 而不是 RGB。

我的示例使用将是：

```
element {
    @include background-opacity(#333, .5);
} 
```

如何在这个 mixin 中使用 HEX 值？

* * *

## 回答 #1

> 赞同：472
> 
> 时间：2012-06-07T21:00:24.603

[rgba() 函数](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#rgba-instance_method)可以接受单个十六进制颜色以及十进制 RGB 值。例如，这可以正常工作：

```
@mixin background-opacity($color, $opacity: 0.3) {
    background: $color; /* The Fallback */
    background: rgba($color, $opacity);
}

element {
     @include background-opacity(#333, 0.5);
} 
```

但是，如果您需要将十六进制颜色分解为 RGB 分量，则可以使用[red()](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#red-instance_method)、[green()](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#green-instance_method)和[blue()](http://sass-lang.com/docs/yardoc/Sass/Script/Functions.html#blue-instance_method)函数来执行此操作：

```
$red: red($color);
$green: green($color);
$blue: blue($color);

background: rgb($red, $green, $blue); /* same as using "background: $color" */ 
```

* * *

## 回答 #2

> 赞同：149
> 
> 时间：2015-08-31T09:26:32.900

有一个内置的mixin：`transparentize($color, $amount);`

```
background-color: transparentize(#F05353, .3); 
```

金额应在 0 到 1 之间；

[官方 Sass 文档（模块：Sass::Script::Functions）](http://sass-lang.com/documentation/Sass/Script/Functions.html#transparentize-instance_method)

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2017-05-04T22:48:11.603

SASS 有一个内置的[rgba() 函数](http://sass-lang.com/documentation/Sass/Script/Functions.html#rgba-instance_method)来评估值。

```
rgba($color, $alpha) 
```

例如

```
rgba(#00aaff, 0.5) => rgba(0, 170, 255, 0.5) 
```

使用您自己的变量的示例：

```
$my-color: #00aaff;
$my-opacity: 0.5;

.my-element {
  color: rgba($my-color, $my-opacity);
} 
```

输出：

```
.my-element {
  color: rgba(0, 170, 255, 0.5);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-07T10:06:16.640

你可以试试这个解决方案，是最好的... url( [github](http://gist.github.com/1949202) )

```
// Transparent Background
// From: http://stackoverflow.com/questions/6902944/sass-mixin-for-background-transparency-back-to-ie8

// Extend this class to save bytes
.transparent-background {
  background-color: transparent;
  zoom: 1;
}

// The mixin
@mixin transparent($color, $alpha) {
  $rgba: rgba($color, $alpha);
  $ie-hex-str: ie-hex-str($rgba);
  @extend .transparent-background;
  background-color: $rgba;
  filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#{$ie-hex-str},endColorstr=#{$ie-hex-str});
}

// Loop through opacities from 90 to 10 on an alpha scale
@mixin transparent-shades($name, $color) {
  @each $alpha in 90, 80, 70, 60, 50, 40, 30, 20, 10 {
    .#{$name}-#{$alpha} {
      @include transparent($color, $alpha / 100);
    }
  }
}

// Generate semi-transparent backgrounds for the colors we want
@include transparent-shades('dark', #000000);
@include transparent-shades('light', #ffffff); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-01T10:06:06.810

如果您需要混合来自变量和 alpha 透明度的颜色，并且使用包含`rgba()`函数的解决方案，您会收到类似的错误

```
 background-color: rgba(#{$color}, 0.3);
                       ^
      $color: #002366 is not a color.
   ╷
   │       background-color: rgba(#{$color}, 0.3);
   │                         ^^^^^^^^^^^^^^^^^^^^ 
```

像这样的东西可能有用。

```
$meeting-room-colors: (
  Neumann: '#002366',
  Turing: '#FF0000',
  Lovelace: '#00BFFF',
  Shared: '#00FF00',
  Chilling: '#FF1493',
);
$color-alpha: EE;

@each $name, $color in $meeting-room-colors {

  .#{$name} {

     background-color: #{$color}#{$color-alpha};

  }

} 
```

# jquery - 用 jquery 触发悬停 - 吸盘鱼

> ID：10929460
> 
> 赞同：0
> 
> 时间：2012-06-07T09:49:51.520
> 
> 标签：jquery, triggers, focus, hover, suckerfish

所以我尝试使用 jquery 触发悬停事件，jquery 检测到具有焦点的元素并添加一个类

```
$(document).ready(function() {
$('a').attr('tabindex', 0);
$('ul#main-nav li a').first().focus().addClass('hovered');
}); 
```

然后是css声明

```
 #main-nav li:hover  ul,  #main-nav li a.level1:hover ul,  #main-nav li a.hovered ul{
    left: auto;
    width:auto;
    display: block;
    top:55px;
    border-left: 2px solid #fff;
    border-right: 2px solid #fff;

    padding: 0px 20px 5px 20px;
    z-index: 2;
    border-top:2px solid #fff;
    box-shadow:-5px 8px 15px -5px #000; 
```

}

这在理论上应该可行，但也许我错过了显而易见的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:51:49.427

我认为您正在为此尝试：

```
$('ul#main-nav li a').first().focus(function() {
  $(this).addClass('hovered');
}); 
```

# android - 使用 ActionBar Sherlock 的首选项屏幕

> ID：10929461
> 
> 赞同：39
> 
> 时间：2012-06-07T09:49:56.630
> 
> 标签：android, preferences, actionbarsherlock

我正在使用`ActionBarSherlock`. 我的问题是制作偏好屏幕。类上的`onBuildHeader()`方法`SherlockPreferenceActivity`是神经调用。

这是我的代码

首选项_headers.xml

```
<preference-headers xmlns:android="http://schemas.android.com/apk/res/android" >
<header
    android:fragment="package.fragments.MyPreferenceFragment"
    android:icon="@drawable/bulle"
    android:summary="An example of some preferences."
    android:title="title" />

</preference-headers> 
```

首选项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    android:title="@string/options" >

    <PreferenceCategory>
        <SwitchPreference
            android:id="@+id/cb_notif"
            android:defaultValue="false"
            android:key="com.vincent.HTC_Dev.pref.notif"
            android:summaryOff="@string/notifications_off"
            android:summaryOn="@string/notifications_on"
            android:title="@string/notifications" />
    </PreferenceCategory>

</PreferenceScreen> 
```

我的偏好活动

```
public class MyPreferenceActivity extends SherlockPreferenceActivity {

    @Override
    public void onBuildHeaders(List<Header> target) {
        super.onBuildHeaders(target);

        loadHeadersFromResource(R.xml.preference_headers, target);
    }

} 
```

我的偏好片段

```
public class MyPreferenceFragment extends PreferenceFragment implements OnSharedPreferenceChangeListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.preferences);
        getPreferenceScreen().getSharedPreferences().registerOnSharedPreferenceChangeListener(this);
    }

    @Override
    public void onSharedPreferenceChanged(SharedPreferences sharedPreferences,
            String key) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-25T10:46:55.780

`onBuildHeaders()`只有在 API 级别 11 或更高级别上运行时才会调用。在旧设备上，您又回到了经典`addPreferencesFromResource()`方法。

有关支持API 级别 11+ 和旧版本 Android 的经典首选项的示例，请参阅[此示例项目。](http://github.com/commonsguy/cw-omnibus/tree/master/Prefs/FragmentsBC)`PreferenceFragment`

具体来说，它`SherlockFragmentActivity`看起来像：

```
package com.commonsware.android.preffragsbc;

import java.util.List;
import android.os.Build;
import android.os.Bundle;
import com.actionbarsherlock.app.SherlockPreferenceActivity;

public class EditPreferences extends SherlockPreferenceActivity {
  @SuppressWarnings("deprecation")
  @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (Build.VERSION.SDK_INT<Build.VERSION_CODES.HONEYCOMB) {
      addPreferencesFromResource(R.xml.preferences);
      addPreferencesFromResource(R.xml.preferences2);
    }
  }

  @Override
  public void onBuildHeaders(List<Header> target) {
    loadHeadersFromResource(R.xml.preference_headers, target);
  }
} 
```

*仅*当我们使用较旧的设备*时，*`onCreate()`我们才需要这样做。在这种情况下，我的示例有两个首选项标头，因此有两个首选项 XML 文件，因此我们调用它们。在较新的设备上，除了链接到超类之外什么都不做，这将触发对.*`addPreferencesFromResource()` *`addPreferencesFromResource()``onCreate()``onBuildHeaders()`**

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-21T18:51:35.007

> 只有在 API 级别 11 或更高级别上运行时才会调用 onBuildHeaders()。请参阅 github.com/commonsguy/cw-omnibus/tree/master/Prefs/FragmentsBC 以获取在 API 级别 11+ 上支持 PreferenceFragment 以及在旧版本 Android 上支持经典首选项的示例。
> – CommonsWare 2012 年 6 月 7 日 11:06

@CommonsWare 您能否在回答时发布此内容，以便我删除您的答案副本。**

# .htaccess - mod_rewrite .php 被添加到末尾，如何更改为第一个斜杠之前？

> ID：10929463
> 
> 赞同：0
> 
> 时间：2012-06-07T09:50:09.943
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在尝试从我的网址中删除 .php ，因此我正在使用此 htaccess 代码：

```
RewriteEngine on
Options +SymlinksIfOwnerMatch +MultiViews
RewriteBase /
RewriteRule ^(([^/]+/)*[^.]+)$ /$1.php [L] 
```

这适用于这样的网址`mydomain.com/news`

但是对于这样的 url，`mydomain.com/news/1/news_title`它正在被重写，`mydomain.com/news/1/news_title.php`这显然会产生 404 错误。谁能帮我更改 RewriteRule 以添加`.php`到第一个正斜杠之后而不是末尾，以便重写 url `mydomain.com/news.php/1/news_title`？

非常感谢任何帮助和建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:06:29.230

我希望这对你有用：

```
RewriteEngine on
Options +SymlinksIfOwnerMatch +MultiViews
RewriteBase /
RewriteRule ^([^/]+)(.*) /$1.php$2 [L] 
```

# java - 从本机代码访问 DoubleBuffer

> ID：10929468
> 
> 赞同：0
> 
> 时间：2012-06-07T09:50:37.073
> 
> 标签：java, java-native-interface

我有一个直接的 ByteBuffer，它应该保存 15 个按以下方式创建的双精度值

```
DoubleBuffer buff = ByteBuffer.allocateDirect(15*8).asDoubleBuffer(); 
```

我想从本机代码访问这个缓冲区，为了简单起见，只需在其中写入从 1.0 到 15.0 的数字。从java方面来看，方法是

```
native public static void write(DoubleBuffer buff, int len); 
```

然后我的 C++ 代码是

```
JNIEXPORT void JNICALL Java_ByteBufferTest_write(JNIEnv *env, jclass cl, jobject buff, jint len)
{
    double* arr = (double*) env->GetDirectBufferAddress(buff);
    for(int i=0; i<15; i++){
        arr[i] = (double) i;
    }
} 
```

在java中调用以下

```
write(buff, 15);

for(int i=0; i<15; i++){
    System.out.println(buff.get(i));
} 
```

只是打印垃圾。

问题是，我是否正确分配了 DoubleBuffer？写会不会更好

```
DoubleBuffer s = ByteBuffer.allocateDirect(15 * Double.SIZE/8).asDoubleBuffer(); 
```

还是有更好的方法？

第二个问题是，为什么这不起作用？`double*`JNI 代码中的转换是否错误？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:54:28.240

默认情况下，Java 的 XxxxBuffer 是大端。如果您使用的是 Intel/AMD 或某些 ARM 处理器之一，默认情况下它将是 little endian。

尝试使用

```
DoubleBuffer buff = ByteBuffer.allocateDirect(15*8)
                              .order(ByteOrder.nativeOrder()).asDoubleBuffer(); 
```

顺便说一句：使用 nativeOrder() 通常也更快。;)

# java - 从 Hibernate 子列表结果

> ID：10929477
> 
> 赞同：0
> 
> 时间：2012-06-07T09:51:08.710
> 
> 标签：java, sql, hibernate, jpa

我正在对休眠的一组结果进行分页。目前我正在做

```
long count = getCountResultForNamedQuery();
List result = getResultForNamedQuery() 
```

这两个查询类似于

```
select count(*) from addresses where country = 'USA'; 
```

和

```
select * from addresses where country = 'USA'; 
```

对于分页，我通常会更新 getResultForQuery 以便设置 .setFirstResult 和 setMaxResult 。这将只返回我想要的部分。我必须进行计数，以便知道要在页面的分页部分显示多少页。

我想知道我是否可以更有效率。我能不能

```
List result = getResultForQuery();
int count = result.size();
List subResult = result.subList(start, end); 
```

这有意义吗？如果可能，我试图只调用一个查询。问题是hibernate有多聪明？当我调用 size 时，它​​会计算它返回的对象外壳还是尝试解决所有问题然后访问数据库？使用哪种模式更好？

如果示例不够清楚，请致歉。我试图尽可能地简化它，可能已经简化得太多了！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:17:57.997

您的第二个解决方案是有道理的，但可能会导致性能灾难，因为它会将来自美国的所有地址加载到内存中，而您只对它们的数量和这些地址的一小部分感兴趣。执行查询时，查询会返回一个列表，该列表会填充查询的所有结果。这就是为什么 setFirstResult 和 setMaxResults 很有用。

如果您不关心绝对准确的计数，您可以只执行一次计数查询，并为每个页面执行“结果”查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:08:01.643

您可以执行以下操作 -

```
Query query = getSession().createQuery("your Query").setFirstResult(start_Index).setMaxResults(Number_Of_Records_You_Want_to_Display_on_page); 
```

例如 -

```
Query query = getSession().createQuery("select * from employee").setFirstResult(101).setMaxResults(100); 
```

# java - 抛出 Microsoft.SharePoint.SoapServer.SoapServerException 的 SharePoint Web 服务

> ID：10929479
> 
> 赞同：3
> 
> 时间：2012-06-07T09:51:19.087
> 
> 标签：java, web-services, sharepoint, sharepoint-2010

我正在编码使用 Netbeans 在 Java 中使用 Sharepoint 2010 Web 服务。我可以使用提供的向导从 WSDL 创建 Web 服务客户端。当我调用以下代码时，我得到`Microsoft.SharePoint.SoapServer.SoapServerException`

```
import java.net.Authenticator;
import java.net.URL;

import javax.xml.namespace.QName;
import javax.xml.ws.BindingProvider;

import proxy.webs.GetWebCollectionResponse;
import proxy.webs.GetWebResponse;
import proxy.webs.Webs;
import proxy.webs.WebsSoap;

public class AccessLists {

    public static void main(String[] args) throws Exception {
        String username = "domain\\Administrator";
        char[] password = "password".toCharArray();
        NtlmAuthenticator ntlmAuth = new NtlmAuthenticator(username, password);
        Authenticator.setDefault(ntlmAuth);

        Webs websService = new Webs(new URL("http://servername:7766/_vti_bin/Webs.asmx?wsdl"));
        WebsSoap webPort = websService.getWebsSoap();
        GetWebResponse.GetWebResult webRes = webPort.getWeb("http://servername/sites/Test1");
        System.out.println(webRes);
    }
} 
```

该站点`http://servername/sites/Test1`存在，我可以在浏览器中打开它。

更新 1：C# 代码发生了类似的事情，我在与 Sharepoint 2010 相同的机器上运行它：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Webs webService = new Webs();
            webService.Credentials = System.Net.CredentialCache.DefaultCredentials;
            Object o = webService.GetWeb("http://servername/sites/Test1");
            Console.WriteLine(o.ToString());
        }
    }
} 
```

我想这是设置的问题，而不是代码的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T20:22:57.433

我为 Web 服务使用了错误的端点。对于 Sharepoint 站点`http://servername/sites/Test1`，端点也应该是`http://servername/sites/Test1/_vti_bin/Webs.asmx?wsdl`

# jquery - JQuery在给定列名的情况下添加列的值

> ID：10929480
> 
> 赞同：2
> 
> 时间：2012-06-07T09:51:22.690
> 
> 标签：jquery, html-table

假设我有一张桌子：

```
 <table id="myTable">
    <thead>
    <th> Col1 </th>
    <th> Col2 </th>
    </thead>
    <tbody>
       <tr><td>1</td><td>2</td></tr>
       <tr><td>1</td><td>2</td></tr>
    </tbody>
    </table> 
```

我想在名为**Col2**的列中添加值，即 4。我不想按列的位置添加值，这[在此处回答](http://naspinski.net/post/Use-jQuery-to-add-all-the-values-in-a-table-column_.aspx)，因为列的位置是可变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:55:19.410

我建议如下：

```
var colNum = $('th').filter(function(){
                 return $(this).text().trim() == 'Col2';
             }).index(),
    sum = 0;

$('tbody tr').each(
    function(i){
        colValue = $(this).find('td').eq(colNum).text();
        sum += parseInt(colValue);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/gcLqL/)。

参考：

*   [`each()`](http://api.jquery.com/each/).
*   [`eq()`](http://api.jquery.com/eq/).
*   [`filter()`](http://api.jquery.com/filter/).
*   [`find()`](http://api.jquery.com/find/).
*   [`index()`](http://api.jquery.com/index/).
*   [`parseInt()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseInt).
*   [`text()`](http://api.jquery.com/text/).
*   [`trim()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/Trim).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:01:20.580

您可以使用

```
var columnIndex = $("#myTable th").index(":contains('Col2')"); 
```

从那里，您可以使用您在问题中链接的代码段来收集总和并将结果输出到某个总单元格。

```
var sum = 0;
$("#myTable tbody tr").each(function() {
    var td = $("> td", this).eq(columnIndex);
    sum += td.text() | 0;
}); 
```

注意：`x | 0`是转换为整数的一个小技巧。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T10:04:12.073

```
var index = $('table th:contains(Col2)').index(),   // get index of th
    sum = 0;
$('table tbody tr').each(function() {
    sum += parseInt( $.trim( $('td:eq('+ index +')', this).text() ), 10);
}); 
```

### 一点解释

* * *

*   `$('td:eq('+ index +')', this).text()`获取对应td的文本

*   `$.trim( $('td:eq('+ index +')', this).text() )`从文本中删除空格

*   `parseInt( $.trim( $('td:eq('+ index +')', this).text() ), 10)`转换整数的值

*   `sum += parseInt( $.trim( $('td:eq('+ index +')', this).text() ), 10);`执行总和。

**[演示](http://jsfiddle.net/h3nVH/1/)**

# iphone - 如何在 iphone 中使用 avFoundation 像 Instagram 应用一样拍摄方形照片？

> ID：10929481
> 
> 赞同：9
> 
> 时间：2012-06-07T09:51:27.927
> 
> 标签：iphone, camera, uiimage, avfoundation, instagram

我正在使用 AVFoundation 拍照，如下所示： [http ://red-glasses.com/index.php/tutorials/ios4-take-photos-with-live-video-preview-using-avfoundation/](http://red-glasses.com/index.php/tutorials/ios4-take-photos-with-live-video-preview-using-avfoundation/)

一个片段：

```
[stillImageOutput captureStillImageAsynchronouslyFromConnection:videoConnection completionHandler: ^(CMSampleBufferRef imageSampleBuffer, NSError *error)
 {
     CFDictionaryRef exifAttachments = CMGetAttachment( imageSampleBuffer, kCGImagePropertyExifDictionary, NULL);
     if (exifAttachments)
     {
         // Do something with the attachments.
         NSLog(@"attachements: %@", exifAttachments);
     }
     else
         NSLog(@"no attachments");

     NSData *imageData = [AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:imageSampleBuffer];
     UIImage *image = [[UIImage alloc] initWithData:imageData]; 
```

据我所知，图片大小在这里设置：

```
 AVCaptureSession *session = [[AVCaptureSession alloc] init];  
   session.sessionPreset =AVCaptureSessionPresetMedium; //medium on my iphone4 is 640*480 
```

但这里只有少数可能的设置，不能设置为自定义大小。

如果可能的话，我希望拍摄的照片具有 1:1 的纵横比，例如 400x400 像素（方形图片）。似乎 instagram 正在这样做（或者他们正在裁剪图像？）。

如何指定拍摄照片的大小为正方形？我知道如何在手机上更改尺寸，但是如果拍摄的照片不是方形的，效果就不好。

任何想法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T10:24:15.723

您可能应该通过创建新上下文来调整 UIImage 的大小。下面的例子

```
.....
UIImage *image = [[UIImage alloc] initWithData:imageData];
UIImage *tempImage = nil;
CGSize targetSize = CGSizeMake(400,400);
UIGraphicsBeginImageContext(targetSize);

CGRect thumbnailRect = CGRectMake(0, 0, 0, 0);
thumbnailRect.origin = CGPointMake(0.0,0.0);
thumbnailRect.size.width  = targetSize.width;
thumbnailRect.size.height = targetSize.height;

[image drawInRect:thumbnailRect];

tempImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

// tmpImage is resized to 400x400 
```

希望这可以帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:34:56.053

我找到了一个使用 AVCaptureSession 拍照的代码，[这是“JJob”的一个很棒的教程](http://www.musicalgeometry.com/?p=1297)。是最好的关于 AVCaptureSession 的教程；请阅读本网站的所有评论和以前的教程，这将对您有很大帮助。[您可以从此处](https://github.com/jj0b/AROverlayImageCapture)下载工作示例代码。

# javascript - 从android中的listviews搜索功能

> ID：10929495
> 
> 赞同：1
> 
> 时间：2012-06-07T09:52:32.923
> 
> 标签：javascript, android, cordova

我有 android 平板电脑应用程序，其中包含 2 个列表视图，其中包含近 50 个不同的用户名，并且在该页面的顶部我有一个搜索栏。在那个搜索栏中，如果我输入用户名或 ID，它应该从 2 个列表视图中搜索输入的数据，并应该向我显示那些属于数据的项目。我想使用 javascript 来获取它，我不想使用 jquery，因为我jquery mobile 的 1.0.1.min.css 文件有问题，即这个 css 正在干扰我现有的 UI，所以我想使用 javascript 来实现这一点。谁能帮我解决这个问题？任何工作示例都对我很有帮助。

谢谢你。

# android - 在 Android Webview 评论框未完全显示

> ID：10929499
> 
> 赞同：2
> 
> 时间：2012-06-07T09:52:44.043
> 
> 标签：android, webview, facebook-comments

这是我的代码：

```
public class SampleFB1Activity extends Activity {

WebView web2,childView =null;
private LinearLayout parentLayout;
private Activity MyActivity;
private String requestUrl="http://example.com/test.html";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.getWindow().requestFeature(Window.FEATURE_PROGRESS);
    setContentView(R.layout.main);

    getWindow().setFeatureInt(Window.FEATURE_PROGRESS,Window.PROGRESS_VISIBILITY_ON);
    parentLayout =(LinearLayout)findViewById(R.id.parentlayout);
    MyActivity = this;

    web2 = new WebView(this);
    web2.setLayoutParams(getLayoutParams());

    web2.setWebViewClient(new FaceBookClient());
    web2.setWebChromeClient(new MyChromeClient());
    web2.getSettings().setJavaScriptEnabled(true);
    web2.getSettings().setAppCacheEnabled(true);
    web2.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    web2.getSettings().setSupportMultipleWindows(true);
    web2.getSettings().setSupportZoom(true);
    web2.getSettings().setBuiltInZoomControls(true);

    parentLayout.addView(web2);
    web2.loadUrl(requestUrl);

}

private LayoutParams getLayoutParams() {
    // TODO Auto-generated method stub
    return new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT); 
}

final class MyChromeClient extends WebChromeClient{
    @Override
    public boolean onCreateWindow(WebView view, boolean dialog,
            boolean userGesture, Message resultMsg) {
        childView = new WebView(SampleFB1Activity.this);
        childView.getSettings().setJavaScriptEnabled(true);
        childView.getSettings().setSupportZoom(true);
        childView.getSettings().setBuiltInZoomControls(true);
        childView.setWebViewClient(new FaceBookClient());
        childView.setWebChromeClient(this);
        childView.setLayoutParams(new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT));

        parentLayout.addView(childView);

        childView.requestFocus();
        web2.setVisibility(View.GONE);

        WebView.WebViewTransport transport =(WebView.WebViewTransport)resultMsg.obj;
        transport.setWebView(childView);
        resultMsg.sendToTarget();
        return true;
    }

    @Override
    public void onProgressChanged(WebView view, int newProgress) {
        MyActivity.setProgress(newProgress*100);
    }

    @Override
    public void onCloseWindow(WebView window) {
        parentLayout.removeViewAt(parentLayout.getChildCount()-1);
        childView =null;
        web2.setVisibility(View.VISIBLE);
        web2.requestFocus();
    }
}

    private class FaceBookClient extends WebViewClient{
     @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        Log.i("REQUEST URL",url);
        return false;
    }   
}

    @Override
    public void onBackPressed() {
    if(childView != null && parentLayout.getChildCount()==2){
        childView.stopLoading();
        parentLayout.removeViewAt(parentLayout.getChildCount()-1);
        if(web2.getVisibility() == View.GONE)
            web2.setVisibility(View.VISIBLE);
    }else{          
        super.onBackPressed();
    }
} 
```

在第 3 版中，我只能看到一半的评论框，在第 4 版中，它显示的是按钮（登录到 facebook 发表评论）而不是评论框，但不会显示评论框。请帮忙...

# c - 使用 pthread_exit() 访问返回值

> ID：10929503
> 
> 赞同：0
> 
> 时间：2012-06-07T09:52:56.820
> 
> 标签：c, multithreading, pthreads, segmentation-fault, double-pointer

我已经完成了以下代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>

struct foo
{
   int a;
   int b;
};

void* thread_func1(void *arg)
{
   struct foo *temp = (struct foo*)malloc(sizeof(struct foo));

   temp->a = 10;
   temp->b = 20;

   pthread_exit(temp);
}

void* thread_func2(void *arg)
{
   pthread_exit((void*)100);
}

int main()
{
   pthread_t tid1, tid2;
   int err;
   struct foo *f;
   void *ret;

   err = pthread_create(&tid1, NULL, thread_func1, NULL);
   err = err | pthread_create(&tid2, NULL, thread_func2, NULL);

   if(err != 0)
   {
      perror("pthread_create()");
      exit(-1);
   }

   err = pthread_join(tid1, (void**)&f);
   if(err != 0 )
   {
      perror("pthread_join1");
      exit(-1);
   }

   printf("a = %d, b = %d\n", f->a, f->b); //Line1

   err = pthread_join(tid2, &ret);
   if(err != 0 )
   {
      perror("pthread_join2");
      exit(-1);
   }

   printf("ret = %d\n", *(int*)ret); //Line2

   return 0;

} 
```

我在 Line2 上遇到分段错误。Line2有什么问题

如果我将 Line2 修改为

> printf("ret = %d\n", (int)ret);

没有分段错误，它打印正确的值（即 100）。我不明白为什么修改有效。我相信我对双指针的使用有错误的概念。我想纠正它。

分段错误的原因是什么以及为什么修改有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T09:57:36.260

那是因为您返回的是实际整数，而不是指针，而是将其作为指针访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:59:49.440

您从线程返回一个数字。在第一个线程中，该数字是`struct foo *`. 因此，如果你说

```
pthread_join(tid1, &ret); 
```

然后`ret`将包含该指针（**不是**双指针）。

同样，在第二种情况下，`100`即使您将其视为`void *`. 尽管如此，价值仍然存在`100`！

因此，当你写

```
pthread_join(tid2, &ret); 
```

`ret`将包含`100`，它不是一个指针，而只是一个整数。这就是为什么您也应该将其转换为`int`.

您遇到分段错误的原因是您将其`100`视为一个`int *`然后尝试取消引用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T09:57:50.330

这是因为您试图取消引用地址为 100 的指针。

与其查看返回值，不如在 thread_funcs 中传递一个指向要分配的指针？也就是说，使用 thread_func1() 和 thread_func2() 的“void *arg”参数

像这样：

```
void* thread_func1(void *arg)
{
   struct foo **fooPtrPtr = (struct foo**) arg;
   *fooPtrPtr = (struct foo*)malloc(sizeof(struct foo));

   ...
}

void* thread_func2(void *arg)
{
   int *intPtr = arg;
   *intPtr = 100;
   ...
}

int main()
{
   pthread_t tid1, tid2;
   int err;
   struct foo *f;
   int ret;

   err = pthread_create(&tid1, NULL, thread_func1, &f);
   err = err | pthread_create(&tid2, NULL, thread_func2, &ret);
   ...
   printf("a = %d, b = %d\n", f->a, f->b); //Line1
   ...
   printf("ret = %d\n", ret); //Line2
   ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T10:03:33.980

`pthread_exit((void*)100);`导致整数`100`成为线程的退出状态。它只是滥用类型转换，所以这`void*`就是它的类型。如果要检索此值，则还必须在主线程中使用相同的类型转换滥用：

```
int ret;
err = pthread_join(tid2, (void**) &ret);
// here you can work with ret as with any other integer 
```

我还建议您使用`return`而不是`pthread_exit`. 另请注意，通过 using 动态分配的内存`malloc`应通过调用`free`. 而这里的返回值类型转换`malloc`是多余的，可以省略。

这个问题也可以帮助你：[Close a thread when done with it](https://stackoverflow.com/q/10821618/1168156)

# iphone - NSUserDefaults 值更改

> ID：10929506
> 
> 赞同：0
> 
> 时间：2012-06-07T09:53:25.790
> 
> 标签：iphone, objective-c, ios, xcode, nsuserdefaults

我在 NSUserDefaults 中保存一个 bool 值，如下所示：

```
[[NSUserDefaults standardUserDefaults]setBool:NO forKey:@"password"]; 
```

然后我像这样同步默认值：

```
[[NSUserDefaults standardUserDefaults]synchronize]; 
```

但是当我的应用程序进入后台然后进入前台时，我的 bool 将值更改为`YES`

为什么会这样？我将我的 bool 设置为`YES`仅在程序中的一个位置，当我的应用程序离开/进入前台时，它无法管理。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:10:11.287

只需执行一个简单的测试，您将 bool 保存为

```
[[NSUserDefaults standardUserDefaults]setBool:NO forKey:@"password"];
[[NSUserDefaults standardUserDefaults]synchronize];
NSLog(@"%d",[[NSUserDefaults standardUserDefaults] boolForKey:@"password"]); 
```

看看有什么价值。。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:09:26.600

您的检索代码应如下所示。

```
if(![[NSUserDefaults standardUserDefaults] boolForKey:@"password"]) {
    //False
} else {
    //True
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:05:45.017

检索布尔值时，请确保您拥有正确的键字符串（`@"password"`在您的情况下）。它区分大小写。

```
[[NSUserDefaults standardUserDefaults] boolForKey:@"password"]; 
```

在你的整个项目中对这个键进行文本搜索，你会发现有问题的代码。

# actionscript-3 - 如果像 Adob e 那样使用 Adob e AIR，我该如何创建扩展功能？

> ID：10929509
> 
> 赞同：0
> 
> 时间：2012-06-07T09:53:34.730
> 
> 标签：actionscript-3

基本上，我想根据是否使用 Adob​​e AIR 创建函数和导入类。我已经看到 Adob​​e 用几个类来做到这一点。因此，如果您没有运行 Adob​​e AIR，那没关系，但使用 Adob​​e AIR，您可以使用更多功能

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:57:57.100

您在编译时就知道您的目标平台。所以基本上我会创建两个构建，一个用于网络，一个用于空气，其中包括所需的依赖项。当实现应用程序而不仅仅是库时，您可以轻松地为您的应用程序实现不同的上下文或引导程序（明智地实现接口，而不是类）。

# ios - 是否有适用于 iOS 且无需 copyleft 许可的免费 EAN 条码扫描库？

> ID：10929513
> 
> 赞同：1
> 
> 时间：2012-06-07T09:53:45.603
> 
> 标签：ios, barcode-scanner

我正在寻找一个库来扫描 iOS 中的 EAN 代码。到目前为止，我遇到过

*   [zxing](http://code.google.com/p/zxing/)但 iOS 端口只扫描 QR
*   [zbar](http://zbar.sourceforge.net/)是 copyleft 许可的
*   仅生成代码[的 Cocoa-Touch-Barcode](https://github.com/netshade/Cocoa-Touch-Barcodes)
*   像[shopsavvy的scannerkit这样的商业图书馆](http://shopsavvy.mobi/category/scannerkit-sdk/)

但是，我需要的是一个没有版权限制的免费使用库。有这样的事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T00:19:27.163

[这个](https://github.com/TheLevelUp/ZXingObjC)端口似乎还活着并更新到 ZXing 2.0 ！

# java - MongoDB如何使用morphia加载参考文档的两个属性

> ID：10929516
> 
> 赞同：1
> 
> 时间：2012-06-07T09:54:00.393
> 
> 标签：java, mongodb, morphia

如何使用 morphia 加载参考文档/实体的两个属性

我有一个班级人物和学校，就像这个
人物班级

```
@Entity
public class Person {
  @Id private ObjectId id;
  private String name;
  @Embedded private PersonEducation schoolInfo;
}
@Embedded
public class PersonEduction {
  @Reference private School school;
  private String year;
  private String degree;
} 
```

学校班

```
@Entity
public class School {
   @Id private ObjectId id;
   private String name;
   private String address;
   private String description;
} 
```

我如何在 Person 类示例中获取 School 的 id 和 name 字段当我想找人时

```
Person person = datastore.find(Person.class).field("name").equals("xyz").get();
person.gerSchoolInfo(); 
```

响应（不想要所有 School 类字段）

```
{school:{_id:ObjectId("4fcef3e20364a375e7631fb0"), name:"SchoolA"}, year:"1990", degree:"MBA" } 
```

如果我查询 _id=ObjectId("4fcef3e20364a375e7631fb0") 的学校，我会得到所有学校字段

```
{_id:ObjectId("4fcef3e20364a375e7631fb0"), name:"xyz", address="some add", description="some desc"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:02:15.063

而不是使用`@Reference`你应该使用

```
key<School> school; 
```

并使用自定义查询来加载它。

```
datastore.createQuery(School.class).retrivedFields(true, "id","name"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:47:36.653

要替代 mtariq，请替换

```
@Reference private School school; 
```

和

```
private ObjectId schoolId; 
```

并自己取。但是，由于您的 School 课程非常简单，我认为您最好使用延迟加载，所以：

```
@Reference @Lazy private School school; 
```

这只会在/如果被引用时加载学校对象。

# php - 测试空嵌套数组

> ID：10929517
> 
> 赞同：3
> 
> 时间：2012-06-07T09:54:01.173
> 
> 标签：php

我有以下数组：

```
array(4) {
  [29] => NULL
  [31] => NULL
  [33] => NULL
  [35] => NULL
} 
```

如果所有键都包含 NULL 值，我想测试所有键。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:02:29.070

```
if(count(array_filter($input, 'is_null')) == count($input)) { 

} 
```

应该是你要找的:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T09:57:46.180

```
// need php version >= 5.3 or you need to define a function, or just use a loop to check.
if (!count(array_filter($your_array, function($var){return $var !== null}))) {
  // all values is null.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:05:52.220

超级简单的方法：

```
function allNULL($array){
  foreach($array as $i)
   if($i!=null) 
    return FALSE;
  return TRUE;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T10:10:08.540

```
<?php
    $filternull = function( $value ) {
       return $value !== null;
    }

    $remaining = array_filter( $yourarray, $filternull );

    echo count( $remaining ); 
    // === 0, if all were "null";
?> 
```

# javascript - javascript表单验证不起作用，无法找到原因

> ID：10929523
> 
> 赞同：0
> 
> 时间：2012-06-07T09:54:15.120
> 
> 标签：javascript, forms

所以我有这个html：

```
<form action="insert.php" method="post" onsubmit="return validateForm(this)">
<label for="FUP start date">FUP start date:</label> 
<input type="text" name="inputField" id="inputField"/>
</br>
</br>
<label for="FUP end date">FUP end date:&nbsp;</label> 
<input type="text" name="inputField2" id="inputField2" />
</br>
</br>
<label for="Allowed traffic">Allowed traffic:</label>
<input type="text" name="Allowed_traffic" id="Allowed_traffic"/>
</br>
</br>
<label for="Frequency">Frequency:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</label>
<input type="text" name="Frequency" id="Frequency" />
</br>
</br>
<input type="submit" value="submit">
</form> 
```

而这个用于密码的javascript（Parola）：

```
<script>
function validateForm(formElement) {
  if (formElement.Allowed_traffic.length < 5) {
  alert('aaaPlease enter a password that is at least 5 characters long');
  return false;
}
if (formElement.Allowed_traffic.length > 10) {
  alert('Please enter a password that is less than 10 characters long');
  return false;
}
}

</script> 
```

我究竟做错了什么？我想在提交时检查密码是否包含 5 到 10 个字符。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T09:58:20.190

替换`.length`为`.value.length`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T09:59:00.037

您当前正在查看元素本身的`length`属性`<input>`（可能不存在）。您要查看的是元素**值**的`length`属性，因此请执行以下操作：**`<input>`**

 **```
if (formElement.Allowed_traffic.value.length < 5) {
    alert('aaaPlease enter a password that is at least 5 characters long');
    return false;
}
else if (formElement.Allowed_traffic.value.length > 10) {
    alert('Please enter a password that is less than 10 characters long');
    return false;
} 
```

请注意，我已将其更改为 an，`if ... else if`因为如果第一个条件为真，则第二个条件不成立。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T09:59:57.770

尝试使用

```
 var Allowed_traffic = document.getElementById("Allowed_traffic"); 
```

代替

```
formElement.Allowed_traffic 
```**

# java - 如何在java中将文本添加到图像中？

> ID：10929524
> 
> 赞同：59
> 
> 时间：2012-06-07T09:54:20.000
> 
> 标签：java, string, image, text, graphics

我需要向现有的表格图像 (png) 添加一些文本。这意味着我需要在图像上“写”并且我需要选择文本位置的选项。我该怎么做？

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-06-07T09:57:44.013

这很简单，只需`Graphics`从图像中获取对象并将字符串绘制到图像上即可。这个例子（和输出图像）正在这样做：

```
public static void main(String[] args) throws Exception {
    final BufferedImage image = ImageIO.read(new URL(
        "http://upload.wikimedia.org/wikipedia/en/2/24/Lenna.png"));

    Graphics g = image.getGraphics();
    g.setFont(g.getFont().deriveFont(30f));
    g.drawString("Hello World!", 100, 100);
    g.dispose();

    ImageIO.write(image, "png", new File("test.png"));
} 
```

输出（`test.png`）：

![输出](../Images/fee00ec6650b0316bf91e73624a5528d.png)

# android - 使用 ksoap2 Android 从 Web 服务获取多个值

> ID：10929531
> 
> 赞同：0
> 
> 时间：2012-06-07T09:55:26.790
> 
> 标签：android, web-services, android-ksoap2

我需要在我的 android 应用程序中访问 .NET 网络服务。我是使用 ksoap2 库完成的。我设置了连接和一切，但我无法从服务中取回数据。该服务应该发回一组值。我如何捕捉这些价值观？

这是我访问 Web 服务的 java 代码。

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
    SoapSerializationEnvelope envelope = 
        new SoapSerializationEnvelope(SoapEnvelope.VER11); 
    envelope.dotNet = true;
    envelope.setOutputSoapObject(request);

    AndroidHttpTransport androidHttpTransport = new AndroidHttpTransport(URL);

    try {
        androidHttpTransport.call(SOAP_ACTION, envelope);

        //code to get back the values here. This is my doubt. 
                    //What code do I write here to get the values from the service ?

    } catch (Exception e) {
        e.printStackTrace();
    } 
```

这是服务响应的格式。

```
HTTP/1.1 200 OK
Content-Type: text/xml; charset=utf-8
Content-Length: length

<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"       xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
  <soap:Body>
    <GetControlResponse xmlns="http://tempuri.org/">
      <GetControlResult>
    <Id>int</Id>
    <Belt>boolean</Belt>
    <Lighting>boolean</Lighting>
    <AutoSpeed>boolean</AutoSpeed>
    <ManualSpeed>short</ManualSpeed>
    <Projector>boolean</Projector>
    <ProjecterPattern>short</ProjecterPattern>
  </GetControlResult>
</GetControlResponse>
 </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:05:55.997

检查[这个](http://adrianandroid.blogspot.com/2012/05/access-c-net-web-service-in.html)。它是在 android 中访问 ksoap2 Web 服务的好教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T08:44:42.757

您可以使用以下代码完成这项工作：

```
SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;
envelope.setOutputSoapObject(request);
System.out.println(request);
envelope.encodingStyle = SoapSerializationEnvelope.XSD;
HttpTransportSE httpTransportSE = new HttpTransportSE(URL);
httpTransportSE.debug = true;
try {
    httpTransportSE.call(SOAP_ACTION, envelope);

} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (XmlPullParserException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

String ss = httpTransportSE.requestDump;
Log.d("Result", ss);
System.out.println(ss); 
```

# java - 春天的xml文件

> ID：10929532
> 
> 赞同：1
> 
> 时间：2012-06-07T09:55:31.917
> 
> 标签：java, spring, saxparseexception

我使用spring 3.1.0。我将我的 xml 文件编写如下，但属性有一个下划线。

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:util="http://www.springframework.org/schema/util"

    xsi:schemaLocation="http://www.springframework.org/schema/beans
     http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/aop 
        http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
        http://www.springframework.org/schema/util 
        http://www.springframework.org/schema/util/spring-util-3.1.xsd
        ">
    <bean id="basic" class="first.BasicBean" />
    <**property** name="msg" value="hello spring"/>

</beans> 
```

我应该在上面的代码中添加什么？

基本豆：

```
package first;

public class BasicBean {
    private String msg=null;
    public String getMessage()
    {
        return msg;
    }
    public void setMessage(String msg)
    {
        this.msg=msg;
    }
} 
```

我的测试代码是：

```
package first;
import org.springframework.beans.factory.*;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class BasicBeanTest {
    public static void main(String[] args)
    {
        BeanFactory beanfactory=new ClassPathXmlApplicationContext("context.xml");
        BasicBean bean=(BasicBean) beanfactory.getBean("basic");
        System.out.println(bean.getMessage());
    }
} 
```

我的错误：

```
Exception in thread "main" org.springframework.beans.factory.xml.XmlBeanDefinitionStoreException: Line 10 in XML document from class path resource [context.xml] is invalid; nested exception is org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 44; cvc-complex-type.2.4.a: Invalid content was found starting with element 'property'. One of '{"http://www.springframework.org/schema/beans":import, "http://www.springframework.org/schema/beans":alias, "http://www.springframework.org/schema/beans":bean, WC[##other:"http://www.springframework.org/schema/beans"], "http://www.springframework.org/schema/beans":beans}' is expected.
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:396)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:127)
    at org.springframework.context.support.AbstractXmlApplicationContext.loadBeanDefinitions(AbstractXmlApplicationContext.java:93)
    at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicationContext.java:131)
    at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:522)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:436)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)
    at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:83)
    at first.BasicBeanTest.main(BasicBeanTest.java:8)
Caused by: org.xml.sax.SAXParseException; lineNumber: 10; columnNumber: 44; cvc-complex-type.2.4.a: Invalid content was found starting with element 'property'. One of '{"http://www.springframework.org/schema/beans":import, "http://www.springframework.org/schema/beans":alias, "http://www.springframework.org/schema/beans":bean, WC[##other:"http://www.springframework.org/schema/beans"], "http://www.springframework.org/schema/beans":beans}' is expected.
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(Unknown Source)
    at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.emptyElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source)
    at org.springframework.beans.factory.xml.DefaultDocumentLoader.loadDocument(DefaultDocumentLoader.java:75)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:388)
    ... 14 more 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T09:57:42.603

`<property>`标签应该在标签内`bean`。请注意，您`/>`在嵌套`<property>`标签之前已将其关闭。

```
<beans ...>

    <bean id="basic" class="first.BasicBean">
        <property name="msg" value="hello spring"/>
    </bean>

    ...

</beans> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:11:56.730

您的 BasicBean 类中存在问题。它不遵循 pojo 类的 java 命名约定。您的 peroperty msg 的 getter 和 setter 方法是错误的。您需要进行以下更改。

将属性名称更改为，`messsage`而不是`msg`。

我认为这将解决您的问题。干杯。

# php - 在 ssl 要求之前重定向到“www”

> ID：10929534
> 
> 赞同：12
> 
> 时间：2012-06-07T09:55:47.523
> 
> 标签：php, redirect, ssl

**问题**

我目前遇到的问题是[https://domain.com](https://domain.com)没有重定向到[https://www.domain.com](https://www.domain.com)并显示不受信任的 ssl 证书。

[这与在 force_ssl 之前重定向到“www”的 ruby​​-on](https://stackoverflow.com/questions/7506954/redirect-to-www-before-force-ssl) -rails 解决方案 有关

**问题**

有没有办法在 SSL 要求生效之前重定向到 www 域？

我正在使用 PHP。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-07T11:33:26.973

HTTPS 是基于 TLS/SSL 的 HTTP（请参阅[RFC 2818](https://www.rfc-editor.org/rfc/rfc2818)），它首先在发送任何 HTTP 流量之前建立 SSL/TLS 连接。任何重定向（通过`mod_rewrite`、自定义 PHP 代码或其他）将始终在 SSL/TLS 连接建立后应用。

不这样做实际上是一个安全问题，因为攻击者可以在证书验证之前重写和重定向客户端。

如果要从 重定向`https://domain.com`到`https://www.domain.com`，则获得的证书`https://domain.com`必须对 有效`domain.com`（然后，获得的证书`https://www.domain.com`必须对 有效`www.domain.com`）。

（如果两个主机在同一个 IP 地址上提供服务，您可以使用两个不同的证书和服务器名称指示，但这相当复杂。）

最简单的方法是获取对`domain.com`和都有效的证书`www.domain.com`。这可以使用具有多个主题备用名称条目的单个证书来完成。大多数 CA 应该能够颁发此类证书。有些人这样做不收取额外费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:03:17.500

通过 HTTP 协议发出重定向响应。为了接收这样的响应/命令，客户端首先需要建立一个 HTTP 连接。如果客户端尝试建立 HTTP_S_ 连接，则 SSL 协商需要先完成。

换句话说，没有。该 URL`https://domain.com`对您的应用无效。任何客户都不应该知道这个特定的地址，因此不应该尝试访问它。您应该避免在任何地方提供此 URL，以免客户端尝试访问它。事实上，您似乎不想为该域运行 HTTPS 服务器，因此您应该将其关闭，这样客户端将根本无法`domain.com`通过 HTTPS 连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-29T21:22:19.567

* * *

我发现的最佳解决方案是简单地购买带有主题替代名称的新 SSL 证书，这样您就可以在同一个证书中拥有 www 和非 www 并且两者都是有效的。通过这种方式，您可以安全地将[https://www](https://www)重定向到 https://，并且不会出现任何证书错误。

# javascript - 在 Android 浏览器中检测捏合

> ID：10929536
> 
> 赞同：0
> 
> 时间：2012-06-07T09:55:51.483
> 
> 标签：javascript, jquery, android-browser

因此，这似乎很少。我需要能够使用 Javascript 检测 Android 浏览器中的捏合。不使用插件（jQuery 除外）。我见过的唯一网站是谷歌地图。

让我们现在说我希望能够在 div 内部进行捏合，并且当我这样做时它会记录下来。

努力寻找任何例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T15:01:43.607

检查hammer.js [http://eightmedia.github.com/hammer.js/](http://eightmedia.github.com/hammer.js/)看起来`transform`手势可以做你想做的事。

# c# - C# 延迟（异步）执行，重启后不可靠

> ID：10929538
> 
> 赞同：2
> 
> 时间：2012-06-07T09:55:56.277
> 
> 标签：c#, multithreading, .net-4.0, asynchronous

> **可能重复：**
> [在c#中延迟任务启动的正确方法是什么](https://stackoverflow.com/questions/4990602/what-is-the-correct-way-to-delay-the-start-of-a-task-in-c-sharp)

我需要安排将来执行的小任务（延迟总是<1分钟）。在 .NET 4.0 运行时上的 .NET 中实现。异步 ctp 是一个选项，尽管我暂时看不到附加值。

*   调度需要是异步的
*   调度分辨率以秒为单位
*   任务执行是隐式异步的（我认为）
*   计划任务的数量可能在数百甚至数千
*   有可能，但不太可能，两个任务将被安排在完全相同的时间

我目前的解决方案是这样的：

```
internal class TimerState
{
    internal Timer Timer { get; set; }
    internal object Payload { get; set; }
    internal Action<object> Action { get; set; }
}

public class TimerModule
{
    public static void ScheduleTask(object input, Action<object> action, TimeSpan delay)
    {
        //create state to pass to timer method
        var state = new TimerState { Payload = input, Action = action };

        //schedule timer without firing 
        var t = new Timer(HandleScheduleTimer, state, -1, -1);

        //add timer to state to be able to dispose it
        state.Timer = t;

        //schedule timer to fire in delay time
        t.Change(delay, TimeSpan.FromMilliseconds(-1));
    }

    private static void HandleScheduleTimer(object state)
    {
        var s = state as TimerState;

        Task.Factory.StartNew(s.Action, s.Payload, CancellationToken.None,
                              TaskCreationOptions.PreferFairness, TaskScheduler.Current);

        //dispose the timer immediately
        if(s.Timer != null)
            s.Timer.Dispose();
    }
} 
```

我已经使用性能计数器（.NET 物理线程）进行了一些测试，但我看不到有多少线程同时运行，即使我几乎同时安排了数千个任务。

有一个更好的方法吗？

是否有任何经过验证的设计模式？

大多数情况下，我发现调度在重新启动时是可靠的，但我不需要，我可以在崩溃后重播系统中的数据并补偿未执行的计划任务。

**编辑**：我并不是说我*想*看到成千上万的线程同时运行。我知道这可能会由线程池处理。就像我在评论中说的那样，一个跨越 100 秒的 500 万个任务的测试只看到物理线程增加了 20 个。

我的主要问题是：有没有更好的方法来延迟任务执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:40:50.620

您正在寻找的解决方案是 Quartz。

[http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

它是一个非常强大的调度器，能够处理与不同调度相关的不同作业。它比计时器可靠得多。如果出现任何问题，它具有故障转移功能。

这些计划要么使用 CRON 间隔，要么可以在特定日期运行。我听说过有数千个工作的实例。如果需要，Quartz 可以集群化，并且可以运行有状态（保持先前实例的知识）和无状态作业。根据它们的配置方式，它们可以同时运行或在队列中运行。大多数线程和线程安全问题都已为您解决，您可以自由地编写作业类而不会感到头疼。

设置很简单（安装服务和配置），创建石英作业更加简单。创建一个继承自 IJob 的类，应用您的逻辑，并将其添加到石英配置中。Config 可以是 xml 文件、sql server 数据库，也可以创建自己的解决方案。我正在为 RavenDB 开发一个。

# javascript - 拖动时自动滚动

> ID：10929540
> 
> 赞同：1
> 
> 时间：2012-06-07T09:55:56.853
> 
> 标签：javascript, jquery-ui, jquery-ui-sortable

jQuery UI Draggable 插件使选定的元素可以通过鼠标拖动。
这里举个[例子](http://jqueryui.com/demos/draggable/sortable.html)。

假设列表比垂直屏幕尺寸长。
“滚动条”允许您查看网页中未显示在屏幕上的其他部分。

如果您在页面底部单击并拖动一个项目，我希望垂直滚动条移动以查看隐藏的项目列表。
如何使用 jQuery UI Draggable 或一段 javascript 代码来实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T08:21:33.283

默认情况下，根据[jqueryui 文档](http://jqueryui.com/demos/sortable/)，滚动选项设置为`true`.

代码示例：

```
// if you want to disable the scroll option
$( ".selector" ).sortable({ scroll: false }); 
```

如果它不起作用，则问题应该出在其他问题上，例如您的 html/css/javascript 代码。
你能在[http://jsfiddle.net/](http://jsfiddle.net/)上重现这个问题吗？

# php - Facebook 注册插件异步验证表单（检查用户名可用性）

> ID：10929543
> 
> 赞同：2
> 
> 时间：2012-06-07T09:56:31.407
> 
> 标签：php, mysql, facebook, json, asynchronous

好的，所以我让谷歌解决了这个问题，[FB 高级注册](https://developers.facebook.com/docs/plugins/registration/advanced/)文档也没有帮助。我想要一个 Facebook 注册，用户可以像这样选择（并检查可用性）他的用户名：（
我计划做但未能做的截图，因为我不能直接在这个问题中发布图片） [截图的链接我想要的](https://lh3.googleusercontent.com/-AslFHlhW2TA/T9B52EjzpOI/AAAAAAAAALU/mD4wGeQdi1w/s683/prob.PNG)！

我计划使用 PHP 在 mysql 中检查我的数据库中用户名的可用性，但我被这个奇怪的 JSON 回调所困扰，我无法理解。我的注册插件看起来像这样

```
<fb:registration 
fields='[{"name":"name"},{"name":"username","description":"Username","type":"text"}]' 
onvalidate="validate_async"    
redirect-uri="http://mysite.com/loginFB.php"
fb_only="false"
width="530">

</fb:registration>    

 <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
 <script> 
 function validate_async(form, cb) {
 // $.getJSON('https://graph.facebook.com/' + form.username + '?callback=?',//CODE obtained from FB documentation 
    $.getJSON('https://mysite.com/checkUsername.php?username=' + form.username + '?callback=?',
        function(response) {
          if (response.error== "false") {
        // Username isn't taken, let the form submit
        cb();
      }
      cb({username: 'That username is taken, Sorry!'});
  });
}
 </script> 
```

我想知道我在**checkUsername.php**中到底写了什么。
现在，我为 checkUsername.php 提供了以下代码，但它不起作用：

```
 <?php 
 $conn = dbconnect(GLOBAL_Db);
$username = $_GET['username'];
$data = array();
$table = mysql_real_escape_string(GLOBAL_Db. "." . GLOBAL_Users);
 $sqlCommand = "SELECT * FROM ".$table." WHERE username='$username'";
 $query = mysql_query($sqlCommand) or die (mysql_error());
 $num_rows = mysql_num_rows($query);

if($num_rows>0){
    $data['error'] = "true";
} else {
$data['error'] = "false";
}
echo json_encode($data);
?> 
```

这段代码没有告诉我*“用户名已被占用，对不起”*消息，为什么？？？
如果有人真的可以帮助我解决脚本中的这个 getJSON 函数，我将非常感激，并且还可以帮助我解决 checkUsername.php，因为我对 JSON、（JSONP）等有非常粗略的了解！很高兴能付出更多的努力来解释我的问题，因为这已经困扰了我一个星期了！很高兴接受你们的一些宝贵帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:31:52.543

```
$username = $_GET('username'); 
```

$_GET 不是一个函数……也许你应该先熟悉一些 PHP 基础知识？

除此之外，你的脚本逻辑看起来有点奇怪……</p>

```
if($num_rows>0){
    $data['error'] = "true";
} else {

    $data['username'] = $row['username'];
} 
```

如果现在找到行，那么您想访问*不存在的行中的*用户名字段吗？

（而且你甚至没有引用你得到的用户名作为 GET 参数，OMG ......）

* * *

根据是否有行将错误设置为真或假。

然后，在你的 JS 函数中，如果 error=true，则给出“用户名被占用”消息。

# android - Android & 当前 API 没有的调用方法

> ID：10929546
> 
> 赞同：0
> 
> 时间：2012-06-07T09:56:48.303
> 
> 标签：android, api, dalvik

如果我想获得这样的外部路径，并且设备具有 Android 2.1 (api 7)

```
 File f;
        int sdkVersion = Integer.parseInt(Build.VERSION.SDK);
        if (sdkVersion >= 8) {
            System.out.println(">=8");
            f = getApplicationContext().getExternalFilesDir(null);
        } else {
            System.out.println("<=7");
            f = Environment.getExternalStorageDirectory();
        } 
```

LogCat 将显示：

```
05-25 15:44:08.355: W/dalvikvm(16688): VFY: unable to resolve virtual method 12: Landroid/content/Context;.getExternalFilesDir (Ljava/lang/String;)Ljava/io/File; 
```

，但应用程序不会粉碎。我想知道什么是VFY？虚拟机 dalvik 中是否有一些东西可以检查被调用方法中的代码是否有效？因为当前项目是针对 Android 2.2 编译的，所以 Eclipse 没有抱怨.. 但在运行时，我得到了 LogCat 条目

PS：我真的不使用这样的方法，我有一个 Helper 类，它为 API<=7 或另一个为 API>=8 初始化一个类。但仍然请回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:14:43.427

是的，`VFY`错误是从 dalvik 中的 dex 验证程序记录的。

您正面临此问题，因为您正在对 SDK 版本执行运行时检查并调用 API 方法。问题是即使方法调用在`if(){}`可能永远不会在较低 API 级别执行的块内，符号信息也存在于生成的字节码中。如果需要执行特定于平台的函数调用，则需要使用反射。

```
File f;
int sdkVersion = Integer.parseInt(Build.VERSION.SDK);
if (sdkVersion >= 8) {
    System.out.println(">=8");
    try {
        Method getExternalFilesDir = Context.class.getMethod("getExternalFilesDir",  new Class[] { String.class } );
        f = (File)getExternalFilesDir.invoke(getApplicationContext(), new Object[]{null});                  
    } catch (Exception e) {
        e.printStackTrace();
    } 

} else {
    System.out.println("<=7");
    f = Environment.getExternalStorageDirectory();
} 
```

# r - 使用 r 从系统命令 mv 文件

> ID：10929551
> 
> 赞同：0
> 
> 时间：2012-06-07T09:56:59.343
> 
> 标签：r, system, mv

我有一个目录，其中有 5 个文件，名称如下

```
A.abcd (1).txt
B.abcd (1).txt
C.abcd (1).txt
D.abcd (1).txt
E.abcd (1).txt 
```

我想更改文件的名称，使它们变成这样：

```
A.defg.txt
B.defg.txt
C.defg.txt
D.defg.txt
E.defg.txt 
```

简而言之，我想更改`abcd (1) to defg`文件。

我试图从 R 控制台运行系统命令。

```
system("mv A.abcd (1).txt A.defg.txt") 
```

但我必须一件一件地去做。

有什么办法可以通过 R 一次性完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T09:59:10.917

您可以使用`file.rename()` 重命名文件。并`sub`与正则表达式一起用于文本操作。

```
x <- c("A.abcd (1).txt", "B.abcd (1).txt", "C.abcd (1).txt", "D.abcd (1).txt", "E.abcd (1).txt")
newx <- sub("abcd \\(1\\)", "defg", x)
newx
[1] "A.defg.txt" "B.defg.txt" "C.defg.txt" "D.defg.txt" "E.defg.txt"

## The following is untested
file.rename(x, newx) 
```

* * *

请参阅`?files`有关此功能和其他基本 R 文件操作功能的帮助。

# c++ - 如何使用boost将目录树保存在文件中

> ID：10929556
> 
> 赞同：0
> 
> 时间：2012-06-07T09:57:12.790
> 
> 标签：c++, boost, filesystems

我想将目录树保存在文件中，然后恢复目录树。为此，我需要用于子目录和文件的普通树容器。我确信这可以在不添加容器的情况下仅使用 boost 文件系统来完成，但我不知道如何仅使用 boost

# android - 带有递归 Android 的 ListActivity

> ID：10929558
> 
> 赞同：-2
> 
> 时间：2012-06-07T09:57:15.290
> 
> 标签：android

我的问题是下一个：

我想使用带有递归的 ListActivity，因此它被称为“x”次，每次我点击列表中的一篇文章时，它都会再次调用同一个 Activity，但它正在加载不同的数据，导致我想要的要做的是制作菜单和子菜单，而expandableList对我来说是不够的，因为会有n级（我会知道...）。

任何人都知道我该如何实现它？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:34:37.663

将每个数据存储在某种 N 级 ArrayList 中。编写您的 Adapter 类以接受此列表的级别。单击项目时，它会传递到 ArrayList 的下一个级别，并且您在列表中调用 notifyDataSetChanged()。

# apache-flex - Flex：菜单项不显示

> ID：10929559
> 
> 赞同：0
> 
> 时间：2012-06-07T09:57:21.750
> 
> 标签：apache-flex, menu

这是我的代码，预期的菜单将显示祖父母 > 父母 > 孩子。但是，没有显示“父”项，而是直接在“祖父”下方显示“子”。

```
<mx:Script>
    <![CDATA[
        // Import the Menu control.
        import mx.controls.Menu;

        // Create and display the Menu control.
        private function createAndShow():void {
            var myMenu:Menu = Menu.createMenu(null, myMenuData, false);
            myMenu.labelField="@label";
            myMenu.show(10, 10);
        }
    ]]>
</mx:Script>

<!-- Define the menu data. -->
<mx:XML format="e4x" id="myMenuData">
    <root>
        <menuitem label="grandparent">
            <menuitem label="parent">
                <menuitem label="child"/>
            </menuitem>
        </menuitem>
    </root>
</mx:XML>

<mx:VBox>
    <!-- Define a Button control to open the menu -->
    <mx:Button id="myButton" 
               label="Open Menu" 
               click="createAndShow();"/>
</mx:VBox> 
```

有趣的是，当我添加第二个父母时，它确实正确显示了菜单。谁能解释这里发生了什么以及我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:23:13.570

试试下面的一些东西： -

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <fx:XML id="myMenuData" >
                <menuitem label="grandparent">
                    <menuitem label="Uparent">
                        <menuitem label="child"/>
                    </menuitem>
                </menuitem>
        </fx:XML>
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
        // Import the Menu control.
            import mx.controls.Menu;

            // Create and display the Menu control.
            private function createAndShow():void {
                var myMenu:Menu = Menu.createMenu(null, myMenuData, true);
                myMenu.labelField="@label";
                myMenu.show(10, 10);
            }
        ]]>
    </fx:Script>

    <!-- Define the menu data. -->

    <mx:VBox>
        <!-- Define a Button control to open the menu -->
        <mx:Button id="myButton" 
                   label="Open Menu" 
                   click="createAndShow();"/>
    </mx:VBox>

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:12:22.510

我拿了你的代码，把它扔到我自己的项目中，得到了和你一样的结果。然后我将另一个父级添加到您的 XML 中，一切正常。我猜如果你只有一个父节点，真的不需要显示它，所以它会跳到子节点。在下面添加了第二个父级：

```
<root>
    <menuitem label="grandparent">
        <menuitem label="parent1">
            <menuitem label="child"/>
        </menuitem>
        <menuitem label="parent2">
            <menuitem label="child"/>
        </menuitem>
    </menuitem>
</root> 
```

# magento - Magento 产品加载 - loadByAttribute 和加载方法之间的区别

> ID：10929563
> 
> 赞同：14
> 
> 时间：2012-06-07T09:57:32.170
> 
> 标签：magento

今天我又和 Magento 打架了 :) 我发现了两者之间的区别

```
$product = Mage::getModel('catalog/product')->loadByAttribute('sku', $product_sku); 
```

和

```
$product = Mage::getModel('catalog/product')->load($product_id); 
```

谁能解释一下这两种方法之间的区别？我发现，当我通过 sku 加载产品时，当我尝试使用更改的数据重新保存它时，我收到错误异常 'Varien_Exception' 并显示消息 'Invalid method Varien_Object::save in app\code\core\Mage \CatalogInventory\Model\Observer.php(153): Varien_Object->__call('save', Array) 这是真的，因为一旦您尝试按 sku 加载，然后另一个观察者将产品的库存项目设置为 Varien_Object，这看起来像陷阱或者我只是不够了解，但是

我从一开始就每天进行 Magento 开发，所以我对系统了解很多，这对我来说是新的。在此先感谢，雅罗。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-07T15:01:38.297

有趣的。虽然这两种方法都会为您提供一个带有完全加载的 EAV 数据的单个产品模型实例（前提`loadByAttribute()`是未传递或 is的第三个参数`*`），但添加库存相关数据的观察者对于产品与产品集合是不同的，但两者都是库存信息对象被添加到产品数据键“stock_item”。这是有争议的，但这感觉就像一个错误。我会认为`Mage_CatalogInventory_Model_Observer::saveInventoryData()`或`Mage_CatalogInventory_Model_Observer::_prepareItemForSave()`会处理这个。

`stock_item`您可以通过使用该对象在您的产品实例上完全设置产品库存项目来解决此问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-24T23:25:27.120

`loadByAttribute`在我看来是一个严重的误称，因为它实际上并没有触发`load()`; 而是它使用`getResourceCollection()`：

```
public function loadByAttribute($attribute, $value, $additionalAttributes = '*')
{
    $collection = $this->getResourceCollection()
        ->addAttributeToSelect($additionalAttributes)
        ->addAttributeToFilter($attribute, $value)
        ->setPage(1,1); 
```

因为它不会触发与之关联的观察者事件，`load()`这意味着生成的产品对象不包含您可能想要的完整产品数据集。在我的情况下，我需要“描述”属性，但它不包括在内。

有几种方法可以解决这个问题：

*   使用不同的方法按 SKU 加载：

    ```
     $product = Mage::getModel("catalog/product");
      $product->load($product->getIdBySku("whatever")); 
    ```

*   `Magento Admin > Catalog > Attributes > Edit attribute > "Used in Product Listing" = "Yes"`通过访问然后重新索引，强制将所需的属性数据包含在默认产品资源数据中。然后，您应该能够使用属性数据（至少在前端）使用`loadByAttribute()`.

另请参阅[https://magento.stackexchange.com/a/197286/18855](https://magento.stackexchange.com/a/197286/18855)

# javascript - 如何在提交信息之前显示弹出窗口

> ID：10929564
> 
> 赞同：1
> 
> 时间：2012-06-07T09:57:35.713
> 
> 标签：javascript, asp.net

我正在使用 Asp.Net/C#，我有一个要求，其中我想在提交数据之前显示确认，如果用户单击确定按钮，然后继续，或者取消提交。我知道 javascript 确认框会这样做，但是就我而言，我需要显示我自己的弹出窗口，任何人都可以建议我如何实现这一点。我不想在这里使用任何插件。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:01:06.960

您可以创建如下：

```
function createPopup() {
    //Get the data from the form fields
    var background = document.custom.back.value;
    var title = document.custom.title.value;
    var text = document.custom.text.value;

    //Now create the HTML code that is required to make the popup
    var content = "<html><head><title>"+title+"</title></head>\
<body bgcolor='"+background+"'><h1>"+title+"</h1>"+text+"<br />\
<a href='javascript:window.close()'>Close the popup</a></body></html>";

    //Create the popup
    var popup = window.open("","window","resizeable,width=400,height=300");
    popup.document.write(content); //Write content into it.
    pops.document.close();
} 
```

逻辑应该如下：我没有执行和测试只是看到逻辑忽略小错误如果有的话..还设置布局，边框看起来像确认窗口。

```
 function popup() {
    alert('popup called');

    //Now create the HTML code that is required to make the popup
    var content = "<html><head><title>ConfirmBox</title></head><body >Do you want to continue ? <br />
    <input type='button' value='ok' onclick='return true'/>
    <input type='button' value='cancel' onclick='return false'/>    <a href='javascript:window.close()'>Close the popup</a></body></html>";

    //Create the popup
    var popup = window.open("","window","resizeable,width=400,height=300");
    popup.document.write(content); //Write content into it.
    pops.document.close();
} 
```

参考[http://www.openjs.com/tutorials/advanced_tutorial/popup.php](http://www.openjs.com/tutorials/advanced_tutorial/popup.php)

# forms - HTML 表单在提交时重置

> ID：10929570
> 
> 赞同：1
> 
> 时间：2012-06-07T09:57:45.397
> 
> 标签：forms, security, submit, antivirus

我有一个超过 500,000 人使用的网站，但只有极少数人（大约 20 人）报告说单击“提交”时其中一个表单会重置。

我已经去掉了其他代码，但是 FORM 标记中的 HTML 是完整的：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
<body>
<form id="fProfile" action="/cv.html" method="post" enctype="multipart/form-data">
    <div class="row"><label for="fName">Your Name:</label><input type="text" id="fName" name="text" /></div>
    <div class="row"><label for="fEmail">Your Email:</label><input type="text" id="fEmail" name="email" /></div>
    <div class="row"><label for="fCvFile">Your CV:</label><input type="file" id="fCvFile" name="cv" /><em>Please only attach a CV, up to 200kb in size.</em></div>
    <input type="submit" class="submit" name="go" value="Save CV" />
</form>
</body>
</html> 
```

不涉及 JavaScript，表单再简单不过了！

反馈有限，但据报道这发生在 MSIE/Chrome/Firefox 上。必须是第三方软件中断了表格，但报告来自装有 McAfee/AVG/Avast 的计算机。除了 HTML 之外，我找不到一个共同的因素......

所有报告都说表单在单击提交“保存简历”按钮时会重置，而不会尝试加载页面，但我无法复制它。

我从来没有遇到过这样的事情，我希望你们中的一个人有！

感谢您的任何帮助或指导。

编辑：我也添加了一个姓名/电子邮件输入表单，以表明它只是正在重置的*type=file输入。*表单的其余部分保留输入的文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:02:15.883

它说您正在发布到 HTML 页面 - 当然您需要发布到 PhP 页面或类似页面。

所以基本上当你点击提交时，页面只是令人耳目一新。同样在您的 HTML 页面中，您应该始终有一个 head 标签。

# android - 如何在 Android 2.1 中检查手机是否有硬件菜单按钮？

> ID：10929579
> 
> 赞同：4
> 
> 时间：2012-06-07T09:58:30.127
> 
> 标签：android, button, menu, hardware, popupmenubutton

我试图弄清楚Android手机是否有硬件菜单按钮，我已经搜索并找到了这个方法：

```
ViewConfiguration.get(getApplicationContext()).hasPermanentMenuKey(); 
```

但这似乎不适用于 Android 2.1，我正在尝试创建一个适用于 Android 2.1 及更高版本的应用程序。安卓版本低于3.0的手机是否可以检测到是否有硬件按键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:05:21.827

每个兼容的 2.1 android 设备都有一个菜单键，因为它是 CDD 的一部分：

[http://source.android.com/compatibility/2.1/android-2.1-cdd.pdf](http://source.android.com/compatibility/2.1/android-2.1-cdd.pdf)

见第 8.7 节：

“Home、Menu 和 Back 功能对于 Android 导航范例至关重要。无论应用程序处于何种状态，设备实现都必须让用户始终可以使用这些功能。”

因此，如果设备运行的是 android 2.1，则可以安全地假设它具有菜单键。如果它运行的是更高版本，您可以使用您找到的 API。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:07:40.227

`hasPermanentMenuKey()`从 API 级别 14 开始引入，因为从 Android 3.0 开始，设备被允许没有菜单键。所以我假设您可以放心地假设 2.1 设备将具有菜单键。检查有关此的 android 文档以获取更多信息。[Android视图配置有PermanantMenuKey](http://developer.android.com/reference/android/view/ViewConfiguration.html#hasPermanentMenuKey%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:07:51.510

`hasPermanentMenuKey()`在 API 级别 14 (3.0) 上可用。我相信可以安全地假设在 3.0 以下运行的设备上有一个密钥。3.0以上可以调用这个方法来判断是否需要提供替代方法。

# ruby-on-rails-3 - Rails 想要保存一个 attr_accessor 属性

> ID：10929583
> 
> 赞同：0
> 
> 时间：2012-06-07T09:59:02.933
> 
> 标签：ruby-on-rails-3

在我的模型中有一些自定义的 attr_accessor。

当我尝试使用 params[:model] 创建新模型时，出现此错误：

```
ActiveModel::MassAssignmentSecurity::Error (Can't mass-assign protected attributes: entity_select, office_select):

class Expedient < ActiveRecord::Base

  belongs_to :enterprise
  has_many :document

  attr_accessor :entity_select
  attr_accessor :office_select

... 
```

我想 Rails 知道那些是 att_accessor 并且不应该保存在数据库中的模型上。

或不 ？

我正在使用这个 attr_accessor 创建一些使用 simple_form 的帮助字段：

```
<%= f.input :entity_select,:label => 'Entity', :input_html => {:class => "span2"}, :wrapper => :prepend do %>
  <span class="add-on"><i class="icon-search"></i></span><%= f.input_field :entity_select, :class => "span2 typeahead_entity", :id_selected => '99', :id => 'typeahead_centre'%>
<%end%> 
```

我需要一个特殊的文本输入来输入类型，但我想使用 simple_form 创建这个输入，就像其他“真实”字段一样，这就是我使用“非真实属性”的原因......

谢谢，

## 编辑：

错误不是在保存之前，在此处将参数分配给模型属性时：

```
 @expedient=Expedient.new.attributes=params[:expedient] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:28:07.877

使`entity_select`and`office_select`属性可访问：

```
class Expedient < ActiveRecord::Base
  # Add:
  attr_accessible :entity_select, :office_select 
```

# c# - 从 ihttp 处理程序获取参数值

> ID：10929584
> 
> 赞同：0
> 
> 时间：2012-06-07T09:59:06.727
> 
> 标签：c#, .net, servlet-filters

让我们考虑一个示例网站应用程序并在本地 host.say 中运行，例如**www.asdf.com**。当用户在浏览器中点击 url

1.  可以通过继承ihttp处理程序或者ihttp模块到我们的类来捕获吗

2.  如果通过更改**www.asdf.com?t=value 访问**了 url，是否可以采用该值。

在java中，这个概念被用作servelet过滤器。dotnet中是否有类似的东西

等待您的回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:15:23.363

模块和处理程序做两种不同的事情。

1.  模块插入应用程序和请求生命周期，并在此过程中响应任意数量的事件，以影响每个请求的某些功能。通常，它用于安全、日志记录、压缩等方面。例如，在每个请求期间`FormsAuthenticationModule`响应`AuthorizeRequest`（以及其他）事件，它检查是否有身份验证票证，验证它，然后指示当前用户是否经过身份验证（以及谁）的上下文。
2.  处理程序旨在等待对某些路径或扩展的请求并做一些有用的事情。例如，对 .ASPX 文件的请求由`Page`处理程序处理，该处理程序解析并执行 ASPX 及其关联的代码隐藏（如果有的话）。

模块和处理程序都可以访问`HttpContext`对象，这允许它们检查并在许多情况下操纵当前应用程序、当前请求和响应、用户等。所以是的，它们都可以访问请求期间提供的查询字符串值。

我相信模块最类似于 servlet 过滤器。

该模块查找`t`查询字符串并在每个请求的开头回显它。

```
public class MyModule : IHttpModule {
    public String ModuleName { 
        get { return "MyModule"; } 
    }    

    public void Init(HttpApplication application) {
        application.BeginRequest += (new EventHandler(this.Application_BeginRequest));
    }

    private void Application_BeginRequest(Object source, EventArgs e) {
        HttpApplication application = (HttpApplication)source;
        HttpContext context = application.Context;
        context.Response.Write(string.Format("The value of \"t\" is {0}", context.Request.QueryString["t"]);
    }        

    public void Dispose() 
    {
    }
} 
```

# cocoa - 如何构建 Cocoa 项目

> ID：10929585
> 
> 赞同：1
> 
> 时间：2012-06-07T09:59:09.083
> 
> 标签：cocoa, code-organization

当我用 Python 编写代码时，我可以将我的源代码构建为多个文件和文件夹，从而有效地创建模块。然后我可以导入一个模块，一个文件可以有多个类，等等。

如何构建一个用 Cocoa 编写的项目？一个`.m`文件可以实现多个类吗？有“模块”的概念吗？“框架”到底是干什么用的？是否可以创建我的框架？如何将其“导入”到另一个项目中？在编译时会发生什么，编译器是将框架嵌入到一个巨大的可执行文件中，还是它们位于可执行文件旁边，只是被复制到捆绑文件夹中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:53:37.557

听起来您确实应该从一些 Apple 资源开始，例如[Your First Mac App](https://developer.apple.com/library/mac/referencelibrary/GettingStarted/RoadMapOSX/books/RM_YourFirstApp_Mac/Articles/Introduction.html)和[What is Frameworks？](http://developer.apple.com/library/mac/#documentation/MacOSX/Conceptual/BPFrameworks/Concepts/WhatAreFrameworks.html#//apple_ref/doc/uid/20002303)

具体回答您的问题 - .m 可以包含多个类实现；框架是一组共享资源；框架是一个可重用的库；您可以创建自己的框架；在典型的 Mac 应用程序包中，框架被复制到[应用程序包](http://developer.apple.com/library/mac/#documentation/CoreFoundation/Conceptual/CFBundles/BundleTypes/BundleTypes.html#//apple_ref/doc/uid/10000123i-CH101-SW13)中。

还有很多关于 Cocoa 应用程序的结构和设计的好资源——我特别喜欢这篇[Cocoa With Love](http://cocoawithlove.com/2010/06/design-of-every-mac-application.html)帖子。

# c# - for 和 foreach 有什么区别？

> ID：10929586
> 
> 赞同：21
> 
> 时间：2012-06-07T09:59:10.797
> 
> 标签：c#, for-loop, foreach

`for`和`foreach`循环之间的主要区别是什么？

在哪些场景中我们可以使用`for`而不是`foreach`，反之亦然。

可以用一个简单的程序显示吗？

两者在我看来都一样。我无法区分它们。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-07T10:02:09.897

循环是一种`for`结构，表示“执行此操作**n. 次**”。

循环是一个`foreach`结构，它说“对这个 IEnumerable中的**每个值/对象执行这个操作”**

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-07T09:59:59.840

`foreach`如果要迭代的对象实现了`IEnumerable`接口，则可以使用。`for`如果只能通过索引访问对象，则需要使用。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-07T10:07:46.550

我将尝试以更一般的方式回答这个问题：

`foreach``IEnumerable`用于以预定义的方式迭代给定集合或列表（任何实现）的每个元素。您不能影响确切的顺序（除了跳过条目或取消整个循环），因为这是由容器决定的。

```
foreach (String line in document) { // iterate through all elements of "document" as String objects
    Console.Write(line); // print the line
} 
```

`for`只是另一种编写循环的方法，该循环在进入循环之前和每次迭代之后执行一次代码。它通常用于循环代码给定次数。与`foreach`此处相反，您可以影响当前位置。

```
for (int i = 0, j = 0; i < 100 && j < 10; ++i) { // set i and j to 0, then loop as long as i is less than 100 or j is less than 10 and increase i after each iteration
    if (i % 8 == 0) { // skip all numbers that can be divided by 8 and count them in j
        ++j
        continue;
    }
    Console.Write(i);
}
Console.Write(j); 
```

如果可能且适用，请始终使用`foreach`而不是`for`（假设有一些数组索引）。根据内部数据组织，`foreach`可能比使用`for`索引快得多（尤其是使用链表时）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-06-07T10:32:10.200

关于foreach，每个人都给了你正确的答案，即它是一种循环遍历实现IEnumerable 的元素的方法。

另一方面， for 比其他答案中显示的灵活得多。实际上，for 用于在指定条件为真时执行一个语句块。

来自微软文档：

```
for (initialization; test; increment)
     statement 
```

初始化 必需。一种表达。这个表达式只执行一次，在循环执行之前。

测试 必需。一个布尔表达式。如果 test 为真，则执行语句。如果测试为假，则终止循环。

增量 必需。一种表达。递增表达式在每次循环结束时执行。

声明 可选。如果测试为真，则要执行的语句。可以是复合语句。

这意味着您可以以多种不同的方式使用它。经典的学校例子是从 1 到 10 的数字之和：

```
int sum = 0;
for (int i = 0; i <= 10; i++)
    sum = sum + i; 
```

但是您也可以使用它来对数组中的数字求和：

```
int[] anArr = new int[] { 1, 1, 2, 3, 5, 8, 13, 21 };
int sum = 0;
for (int i = 0; i < anArr.Length; i++)
    sum = sum + anArr[i]; 
```

（这也可以通过 foreach 完成）：

```
int[] anArr = new int[] { 1, 1, 2, 3, 5, 8, 13, 21 };
int sum = 0;
foreach (int anInt in anArr)
    sum = sum + anInt; 
```

但是您可以将它用于从 1 到 10 的偶数之和：

```
int sum = 0;
for (int i = 0; i <= 10; i = i + 2)
    sum = sum + i; 
```

你甚至可以发明一些像这样的疯狂的东西：

```
int i = 65;
for (string s = string.Empty; s != "ABC"; s = s + Convert.ToChar(i++).ToString()) ;
    Console.WriteLine(s); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-11T13:17:19.140

**foreach**几乎等同于：

```
var enumerator = list.GetEnumerator();
var element;
while(enumerator.MoveNext()){
  element = enumerator.Current;
} 
```

为了实现“foreach”兼容模式，这需要提供一个类，该类具有一个**GetEnumerator()**方法，该方法返回一个具有**MoveNext()**方法、**Reset()**方法和**Current**属性的对象。

实际上，您不需要实现 IEnumerable 和 IEnumerator。

一些派生点：

*   `foreach`不需要知道集合长度，因此允许遍历“流”或一种“元素生产者”。
*   `foreach`在迭代器上调用虚拟方法（大多数情况下），因此性能不如`for`.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-07T10:19:11.113

for循环：

```
 1) need to specify the loop bounds( minimum or maximum).

  2) executes a statement or a block of statements repeatedly 
    until a specified expression evaluates to false. 
```

## 例1：-

```
int K = 0;

for (int x = 1; x <= 9; x++){
        k = k + x ;
} 
```

foreach 语句：

```
1)do not need to specify the loop bounds minimum or maximum.

2)repeats a group of embedded statements for 
     a)each element in an array 
  or b) an object collection. 
```

## 例 2：-

```
int k = 0;

int[] tempArr = new int[] { 0, 2, 3, 8, 17 };

foreach (int i in tempArr){
    k = k + i ;
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-05-12T11:01:45.093

这取决于你在做什么，以及你需要什么。

如果您正在遍历项目集合，并且不关心索引值，那么 foreach 更方便、更容易编写且更安全：您不会弄错项目数。

例如，如果您需要处理集合中的每隔一个项目，或者以相反的顺序处理它们，那么 for 循环是唯一实用的方法。

最大的区别在于，foreach 循环依次处理集合中每个元素的实例，而 for 循环可以处理任何数据，并且不仅限于集合元素。这意味着 for 循环可以**修改**集合 - 这是**非法的，并且会导致 foreach 循环中的错误**。

有关更多详细信息，请参阅 MSDN：[foreach](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=vs.90%29.aspx)和[for](http://msdn.microsoft.com/en-us/library/ch45axte.aspx)

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-11-21T07:28:43.430

C# 中 For 和 For Each 循环的区别

1.  For 循环执行一段代码，直到表达式返回 false，而 ForEach 循环通过对象集合中的项目执行一段代码。

2.  For 循环可以执行对象集合或不执行任何对象集合，而 ForEach 循环只能执行对象集合。

3.  for 循环是一个普通的循环结构，可用于多种用途，其中 foreach 旨在仅在 Collections 或 IEnumerables 对象上工作。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-07T10:02:53.653

如果您有一个数组或其他 IEnumerable 数据集合，则 foreach 很有用。但是 for 可用于访问可以通过索引访问的数组的元素。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-06-08T19:12:01.007

当您提前知道或确定您希望循环运行多少次时，for 循环很有用。例如，如果您需要为一周中的每一天执行一个流程，您知道您需要 7 个循环。

foreach 循环是当您想要对集合或数组的所有部分重复一个过程时，但具体循环运行多少次并不重要。例如，您正在为用户格式化最喜欢的书籍列表。每个用户可能有不同数量的书籍，或者没有书籍，我们并不关心它有多少，我们只是希望循环对所有书籍起作用。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-11-21T08:21:31.337

![](../Images/cb165a04730a1e0a05df8309374286bd.png)

**for**循环重复执行一条语句或语句块，直到指定表达式的计算结果为 false 。

需要指定循环边界（最小或最大）。下面是一个从 0 到 <= 5 的简单 for 循环的代码示例。

我们详细看一下**foreach**。外表看起来很简单的循环，其实是一个复杂的数据结构，叫做枚举器：

枚举器是具有**Current**属性、**MoveNext**方法和**Reset**方法的数据结构。**Current**属性保存当前元素的值，每次调用**MoveNext**都会将枚举数推进到序列中的下一项。

枚举器很棒，因为它们可以处理任何迭代数据结构。事实上，它们是如此强大，以至于所有的 LINQ 都建立在枚举数之上。

但枚举器的缺点是它们需要为序列中的每个元素调用**Current**和**MoveNext**。所有这些方法调用加起来，尤其是在关键任务代码中。

相反，for 循环只需为列表中的每个元素调用**get_Item**。这是一个比 foreach 循环少的方法调用，差异确实显示出来了。

那么什么时候应该使用foreach循环，什么时候应该使用for循环呢？

这是您需要做的：

当你使用 LINQ 时，使用 foreach
当你处理非常大的计算值序列时，使用 foreach
当性能不是问题时，使用 foreach
但是如果你想要最高性能，使用 for 循环代替

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-10-22T05:12:04.360

就性能而言，我更喜欢 FOR 循环。当您处理更多项目时，FOREACH 会有点慢。

如果您使用实例执行更多业务逻辑，则 FOREACH 执行得更快。

**演示：** 我创建了一个包含 10000000 个实例的列表，并使用 FOR 和 FOREACH 进行循环。

**循环所用时间：**

*   FOREACH -> 53.852ms
*   FOR -> 28.9232ms

下面是示例代码。

```
class Program
{

    static void Main(string[] args)
    {
        List<TestClass> lst = new List<TestClass>();
        for (int i = 1; i <= 10000000; i++)
        {
            TestClass obj = new TestClass() {
                ID = i,
                Name = "Name" + i.ToString()
            };
            lst.Add(obj);
        }

        DateTime start = DateTime.Now;
        foreach (var obj in lst)
        {
            //obj.ID = obj.ID + 1;
            //obj.Name = obj.Name + "1";
        }
        DateTime end = DateTime.Now;
        var first = end.Subtract(start).TotalMilliseconds;

        start = DateTime.Now;
        for (int j = 0; j<lst.Count;j++)
        {
            //lst[j].ID = lst[j].ID + 1;
            //lst[j].Name = lst[j].Name + "1";
        }
        end = DateTime.Now;
        var second = end.Subtract(start).TotalMilliseconds;
    }
}

public class TestClass
{
    public long ID { get; set; }
    public string Name { get; set; }
} 
```

如果我取消注释循环内的代码： **然后，循环需要时间：**

*   FOREACH -> 2564.1405ms
*   FOR -> 2753.0017ms

**结论**
如果你对实例做更多的业务逻辑，那么推荐使用 FOREACH。如果您没有对实例做太多逻辑，那么建议使用 FOR。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-11-06T12:15:15.580

许多答案已经存在，我只需要确定一个不存在的差异。

for 循环是故障安全的，而 foreach 循环是故障快速的。

`ConcurrentModificationException`如果在对象中同时进行迭代和修改，则会抛出快速失败的迭代。

但是，即使迭代进入无限循环，故障安全迭代也可以确保操作不会失败。

```
public class ConcurrentModification {
    public static void main(String[] args) {
        List<String> str = new ArrayList<>();

        for(int i=0; i<1000; i++){
            str.add(String.valueOf(i));
        }

        /**
         * this for loop is fail-safe. It goes into infinite loop but does not fail. 
         */
        for(int i=0; i<str.size(); i++){
            System.out.println(str.get(i));
            str.add(i+ "  " + "10");
        }

        /**
         * throws ConcurrentModificationexception 
        for(String st: str){
            System.out.println(st);
            str.add("10");
        }
        */

        /* throws ConcurrentModificationException 
         Iterator<String> itr = str.iterator();
        while(itr.hasNext()) {
            System.out.println(itr.next());
            str.add("10");
        }*/
    }
} 
```

希望这有助于通过不同的角度理解 for 和 foreach 循环之间的区别。

如果有人感兴趣，我找到了一个[很好的博客](https://javahungry.blogspot.com/2014/04/fail-fast-iterator-vs-fail-safe-iterator-difference-with-example-in-java.html)来了解故障安全和快速故障之间的区别：

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-09-05T13:37:06.910

c# 中 for 和 foreach 循环之间的主要区别我们通过它的工作来理解：

for 循环：

1.  for 循环的变量总是只有整数。
2.  For 循环重复执行语句或语句块，直到指定表达式的计算结果为 false。
3.  在 for 循环中，我们必须指定循环的边界（最大值或最小值）。-------->我们可以说这是 for 循环的限制。

foreach 循环：

1.  在 foreach 循环的情况下，循环的变量 while 与数组下的值的类型相同。

2.  Foreach 语句为数组或对象集合中的每个元素重复一组嵌入语句。

3.  在 foreach 循环中，您不需要指定循环边界的最小值或最大值。---> 这里我们可以说这是 for each 循环的优点。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-02-11T12:49:54.780

for 和 foreach 之间的简单区别

```
 for loop is working with values.it must have condition then increment and intialization also.you have to knowledge about 'how many times loop repeated'.

 foreach is working with objects and enumaretors. no need to knowledge how many times loop repeated. 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-08-23T11:21:40.413

您可以将 foreach 用于一个简单的数组，例如

```
int[] test = { 0, 1, 2, 3, ...}; 
```

当你有一个二维数组时，你可以使用 for

```
int[][] test = {{1,2,3,4},
                {5,2,6,5,8}}; 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-06-03T03:41:57.303

**foreach**语法快速简单。**for**语法稍微复杂一些，但也更灵活。

**当迭代集合中的所有项目时， foreach**很有用。**for**在迭代整个项目或项目子集时很有用。

提供每个集合项的**foreach**迭代*变量*是只读的，因此我们不能在迭代时修改这些项。使用**for**语法，我们可以根据需要修改项目。

底线 - 使用**foreach**快速迭代集合中的所有项目。用于迭代集合的项目的子集或在迭代时修改项目**。**

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2014-01-27T18:05:45.030

foreach 语句为实现 System.Collections.IEnumerable 或 System.Collections.Generic.IEnumerable 接口的数组或对象集合中的每个元素重复一组嵌入语句。foreach 语句用于遍历集合以获取您想要的信息，但不能用于从源集合中添加或删除项目以避免不可预知的副作用。如果您需要从源集合中添加或删除项目，请使用 for 循环。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2020-05-11T15:32:38.603

**与foreach**相关的一件重要事情是，foreach 迭代变量不能在循环体中更新（或分配新值）。

例如 ：

```
List<string> myStrlist = new List<string>() { "Sachin", "Ganguly", "Dravid" };
              foreach(string item in myStrlist)

              {

                  item += " cricket"; // ***Not Possible*** 

              } 
```

# facebook - Facebook 应用加载空白页面

> ID：10929588
> 
> 赞同：-1
> 
> 时间：2012-06-07T09:59:11.003
> 
> 标签：facebook

我在 facebook 上为我的网站创建了一个应用程序。现在它为我加载但不为其他任何人加载，它只是加载一个空白页面，所以显然我做错了什么，但我不知道有什么帮助会很棒

这是应用程序的链接 [http://apps.facebook.com/112963092176394/?fb_source=search&ref=ts](http://apps.facebook.com/112963092176394/?fb_source=search&ref=ts)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:29:07.377

您的页面没有通过 HTTPS 提供的安全版本，因此对于在 Facebook 上使用“安全浏览”选项的每个人来说都失败了。

注意：自 2011 年 10 月起，SSL 证书是一项要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:29:28.770

Firefox 在尝试连接到[https://www.exoticsworld.co.uk/?fb_source=search&ref=ts](https://www.exoticsworld.co.uk/?fb_source=search&ref=ts)时会给出以下有关您的 SSL 证书的消息：

> **安全连接失败**
> 
> 连接到 www.exoticsworld.co.uk 时出错。
> 
> SSL 收到超过最大允许长度的记录。
> 
> （错误代码：ssl_error_rx_record_too_long）

所以请注意你会得到修复。如果您不知道这是怎么回事，请询问您的服务器管理员（或为您安装该证书的人）。

# asp.net-mvc - MVC Razor .CheckboxFor 未按预期绑定

> ID：10929596
> 
> 赞同：1
> 
> 时间：2012-06-07T10:00:01.500
> 
> 标签：asp.net-mvc, razor

我已经尝试过 CheckboxFor 和 EditorFor 将复选框绑定到模型。问题是它总是未经检查，它似乎没有反映模型的真/假值。

看法

```
@Html.CheckBoxFor(x => x.IsConfirmed) 
```

结果在浏览器中

```
<input name="IsConfirmed" id="IsConfirmed" type="checkbox" value="true"/>
<input name="IsConfirmed" type="hidden" value="false"/> 
```

看法

```
@Html.EditorFor(x => x.IsConfirmed) 
```

结果在浏览器中

```
<input name="IsConfirmed" class="check-box" id="IsConfirmed" type="checkbox" data-val="true" value="true"/>
<input name="IsConfirmed" type="hidden" value="false"/> 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:09:30.777

正如@musefan 评论的那样，问题在于我的观点，而不是 HtmlHelper。

问题归结为“事件链”。视图由 ajax 绑定后加载，并且未为此调用设置复选框的值。

# android - Android 通过蓝牙共享文件

> ID：10929597
> 
> 赞同：1
> 
> 时间：2012-06-07T10:00:09.237
> 
> 标签：android

我需要在蓝牙上列出所有可用设备并将任何文件从 android 设备共享到选定设备。我尝试使用下面的代码

```
 private void sharefile(String deviceAddress,String filePath){
        File f =  new File(filePath);
        BluetoothAdapter objBluetoothAdapter = BluetoothAdapter
                        .getDefaultAdapter();

                BluetoothDevice device = objBluetoothAdapter
                        .getRemoteDevice(deviceAddress);
                Log.v("Device", "" + device.getName());

                final UUID uuid = UUID
                        .fromString("00001101-0000-1000-8000-00805F9B34FB");

                try {
                    byte[] buffer = new byte[(int) f.length()];
                    FileInputStream fis = new FileInputStream(f);
                    BufferedInputStream bis = new BufferedInputStream(fis);
                    bis.read(buffer, 0, (int) f.length());

                    BluetoothSocket socket = device
                            .createRfcommSocketToServiceRecord(uuid);

                    OutputStream os = socket.getOutputStream();
                    os.write(buffer, 0, buffer.length);
                    os.flush();
                    os.close();
                    socket.close();   
                } catch (SecurityException e) {
                    e.printStackTrace();
                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }

    } 
```

执行上述代码时，Logcat 上显示**传输端点未连接**消息。

**06-11 18:26:49.960: W/System.err(9812): java.io.IOException: 传输端点未连接 06-11 18:26:49.960: W/System.err(9812): 在 android。 bluetooth.BluetoothSocket.writeNative(Native Method) 06-11 18:26:49.960: W/System.err(9812): at android.bluetooth.BluetoothSocket.write(BluetoothSocket.java:346) 06-11 18:26:49.960 : W/System.err(9812): 在 android.bluetooth.BluetoothOutputStream.write(BluetoothOutputStream.java:85) 06-11 18:26:49.960: W/System.err(9812): 在 com.cit.bt。 ShareMessageActivity.connectDevice(ShareMessageActivity.java:138) 06-11 18:26:49.960: W/System.err(9812): at com.cit.bt.ShareMessageActivity.shareFile(ShareMessageActivity.java:83) 06-11 18: 26:49.960: W/System.err(9812): 在 com.cit.bt.ShareMessageActivity.onListItemClick(ShareMessageActivity.java:73) 06-11 18:26:49.960: W/System.err(9812):在 android.app.ListActivity$2.onItemClick(ListActivity.java:319) 06-11 18:26:49.960: W/System.err(9812): 在 android.widget.AdapterView.performItemClick(AdapterView.java:284) 06 -11 18:26:49.960: W/System.err(9812): 在 android.widget.ListView.performItemClick(ListView.java:3736) 06-11 18:26:49.960: W/System.err(9812):在 android.widget.AbsListView$PerformClick.run(AbsListView.java:1974) 06-11 18:26:49.960: W/System.err(9812): 在 android.os.Handler.handleCallback(Handler.java:587) 06-11 18:26:49.960: W/System.err(9812): 在 android.os.Handler.dispatchMessage(Handler.java:92) 06-11 18:26:49.960: W/System.err(9812) : 在 android.os.Looper.loop(Looper.java:130) 06-11 18:26:49.960: W/System.err(9812): 在 android.app.ActivityThread.main(ActivityThread.java:3687) 06 -11 18:26:49.960：W/System.err(9812)：在 java.lang.reflect。Method.invokeNative(Native Method) 06-11 18:26:49.960: W/System.err(9812): at java.lang.reflect.Method.invoke(Method.java:507) 06-11 18:26:49.960 : W/System.err(9812): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867) 06-11 18:26:49.960: W/System.err(9812): 在com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625) 06-11 18:26:49.960: W/System.err(9812): at dalvik.system.NativeStart.main(Native Method)错误（9812）：在 dalvik.system.NativeStart.main（本机方法）错误（9812）：在 dalvik.system.NativeStart.main（本机方法）**

并且还尝试使用以下替代代码连接设备，它连接设备但无法传输文件。

```
BluetoothDevice hxm = BluetoothAdapter.getDefaultAdapter()
                .getRemoteDevice(deviceAddress);
        Method m;

            m = hxm.getClass().getMethod("createRfcommSocket",
                    new Class[] { int.class });
            BluetoothSocket socket = (BluetoothSocket) m.invoke(hxm,
                    Integer.valueOf(1));
            socket.connect(); 
```

我也在 android manifest 中提供了所需的权限，但它无法连接。任何人都可以帮我解决这个问题。

谁能给我提供来自 Android 市场的蓝牙文件传输背后的逻辑。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:37:49.187

那个蓝牙 HMX 设备不会是心率监测器吗？无论哪种方式，我们都发布了一个很好的示例（源于 Google 蓝牙聊天示例）。它比他们的例子要精简一些，希望你会发现它有帮助。

[http://ww2.cs.fsu.edu/~sposaro/mobile/resources/BeatConnect.zip](http://ww2.cs.fsu.edu/~sposaro/mobile/resources/BeatConnect.zip)

# javascript - 用单个图像替换单选按钮，包括悬停和选择...几乎在那里

> ID：10929605
> 
> 赞同：0
> 
> 时间：2012-06-07T10:00:44.727
> 
> 标签：javascript, jquery, radio-button

我们正在尝试用一组四个图像替换一组四个单选按钮，每个图像都有自己的悬停和选定图像。

我们已经使用 CSS 将单选按钮发送到屏幕之外，创建了显示为标签的主图像并设置了悬停，但是我们遇到了我们使用的 Javascript/jQuery 的问题，它为按钮添加了一个“选定”类。它适用于第一个按钮，但我不知道如何为其他三个按钮复制它 - 您对此提出的建议将不胜感激。

可以在这里看到 JS Fiddle：

[http://jsfiddle.net/HVk7d/8/](http://jsfiddle.net/HVk7d/8/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:10:03.413

设法让它最终工作 - 这是代码：http: [//jsfiddle.net/HVk7d/18/](http://jsfiddle.net/HVk7d/18/) 一切顺利，

马修

# jquery - 使用 Jquery Mobile 在移动端显示图表（d3js）

> ID：10929606
> 
> 赞同：0
> 
> 时间：2012-06-07T10:00:48.770
> 
> 标签：jquery, ajax, html, jquery-mobile

我正在使用 Jquery Mobile 创建一个 HTML5 移动应用程序，它能够显示使用[d3js](http://d3js.org/)创建的图表。这些图表将在客户端创建，但数据将通过服务器检索。JQM 页面是静态 HTML 页面，它会从服务器请求数据并创建即兴图表。但是，我很难理解 JQM ajax/哈希映射。当我将请求重定向到另一个页面时，它无法在该页面上运行 javascript。因此，我习惯于`window.location.href = a.html` 更改页面而不是 $.mobile.changePage(a.html)。

每个数据页面都有一个 id 以便可以缓存它，然后我如何创建一个新的页面链接并为其提供数据。

我有 2 个文件：`index.html`其中包含用户可以选择查看的数据列表，然后是另一个文件，`chart.html`其中包含有关如何使用 Javascript Ajax 创建图表以从服务器获取数据的信息。这怎么可能使用 JQM。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:13:42.407

我希望您已经通过[JQM Page Links](http://jquerymobile.com/demos/1.1.0/docs/pages/page-links.html)和[JQM Page Scripting](http://jquerymobile.com/test/docs/pages/page-scripting.html)

由于 JQM 通过 (Hi)Ajax 获取所有后续页面并将其`<body>`标签插入当前 DOM；`<script>`您后续页面上定义的s 不会执行。

您需要在`<head>`第一页的 index.html中包含所有脚本

用于在页面之间传递参数；[您可以简单地使用JQM 页面脚本](http://jquerymobile.com/test/docs/pages/page-scripting.html)页面底部提到的插件

虽然我个人只是使​​用 $.data() 函数：D

# c# - 如何在给定日期前 14 天避免假期

> ID：10929608
> 
> 赞同：4
> 
> 时间：2012-06-07T10:01:00.153
> 
> 标签：c#, sql-server-2008

在我的系统中，账单的到期日必须是开具日期后的 14 天。
我有截止日期，我想知道发布日期。
我必须计算：

```
issued date = 14 days prior to the due date 
```

但 **14 天必须是工作日，而不是节假日。**
假期存储在像这样的表'tblHolidayMaster'中，

> > 日期 说明
> > 2012/05/13 母亲节
> > 2012/06/02 星期六 2012/12/25
> > 圣诞节

如何计算避开节假日的签发日期？
感谢大家的关注和回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:20:09.960

我将使用如下函数（我使用的函数）计算日期

```
public static DateTime AddBusinessDays(DateTime date, int days)
 {
    if (days == 0) return date;

   if (date.DayOfWeek == DayOfWeek.Saturday)
   {
    date = date.AddDays(2);
    days -= 1;
  }
  else if (date.DayOfWeek == DayOfWeek.Sunday)
  {
    date = date.AddDays(1);
    days -= 1;
  } 

 date = date.AddDays(days / 5 * 7);
 int extraDays = days % 5;

 if ((int)date.DayOfWeek + extraDays > 5)
 {
    extraDays += 2;
 }

int extraDaysForHolidays =-1;
//Load holidays from DB into list
List<DateTime> dates = GetHolidays();

while(extraDaysForHolidays !=0)
{

 var days =  dates.Where(x => x >= date  && x <= date.AddDays(extraDays)).Count;
 extraDaysForHolidays =days;
 extraDays+=days;  
}

return date.AddDays(extraDays); 
```

}

没有测试过假期的 ast 部分

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:12:37.217

我采用了直接循环解决方案，因此长时间间隔会很慢。但是对于像 14 天这样的短时间间隔，它应该是相当快的。

您需要在构造函数中传递假期。的实例`BusinessDays`是不可变的，可以重用。在实践中，您可能会使用 IoC 单例或类似的构造来获取它。

`AddBusinessDays`如果开始日期是非工作日，则抛出一个`ArgumentException`，因为您没有指定如何处理这种情况。特别是`AddBusinessDays(0)`在非工作日会有奇怪的属性，否则。它要么打破时间反转对称性，要么返回非工作日。

```
public class BusinessDays
{
    private HashSet<DateTime> holidaySet;
    public ReadOnlyCollection<DayOfWeek> WeekendDays{get; private set;}

    public BusinessDays(IEnumerable<DateTime> holidays, IEnumerable<DayOfWeek> weekendDays)
    {
        WeekendDays = new ReadOnlyCollection<DayOfWeek>(weekendDays.Distinct().OrderBy(x=>x).ToArray());
        if(holidays.Any(d => d != d.Date))
            throw new ArgumentException("holidays", "A date must have time set to midnight");
        holidaySet = new HashSet<DateTime>(holidays);
    }

    public BusinessDays(IEnumerable<DateTime> holidays)
        :this(holidays, new[]{DayOfWeek.Saturday, DayOfWeek.Sunday})
    {
    }

    public bool IsWeekend(DayOfWeek dayOfWeek)
    {
        return WeekendDays.Contains(dayOfWeek);
    }

    public bool IsWeekend(DateTime date)
    {
        return IsWeekend(date.DayOfWeek);
    }

    public bool IsHoliday(DateTime date)
    {
        return holidaySet.Contains(date.Date);
    }

    public bool IsBusinessDay(DateTime date)
    {
        return !IsWeekend(date) && !IsHoliday(date);
    }

    public DateTime AddBusinessDays(DateTime date, int days)
    {
        if(!IsBusinessDay(date))
            throw new ArgumentException("date", "date bust be a business day");
        int sign = Math.Sign(days);
        while(days != 0)
        {
            do
            {
              date.AddDays(sign);
            } while(!IsBusinessDay(date));
            days -= sign;
        }
        return date;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T03:47:30.880

我仅从您的表“tblHolidayMaster”计算发布日期避免您的假期。

```
 int addDay = -14;
  DateTime dtInputDay = System.DateTime.Now;//Your input day
  DateTime dtResultDate = new DateTime();
  dtResultDate = dtInputDay.AddDays(addDay);
  bool result = false;
  string strExpression;
  DataView haveHoliday;
  while (!result) {
      strExpression = "Date >='" + Convert.ToDateTime(dtResultDate.ToString("yyyy/MM/dd")) + "' and Date <='" + Convert.ToDateTime(dtInputDay.ToString("yyyy/MM/dd")) + "'";
      haveHoliday = new DataView(tblHolidayMaster);
      haveHoliday.RowFilter = strExpression;
      if (haveHoliday.Count == 0) {          
        result = true;
      } else {
          addDay = -(haveHoliday.Count);
          dtInputDay = dtResultDate.AddDays(-1);
          dtResultDate = dtResultDate.AddDays(addDay);
      }
  } 
```

您的签发日期是 dtResultDate

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T11:26:20.783

我认为这就是你所需要的。它很简单，我已经对其进行了测试，它正在工作......在数据库中编写函数或 SP 而不是在 C# 中编写复杂代码......（更改日期的列名，如您的D b。）

让它发挥你想要的功能或 SP。

**注意：**注释“星期六”和“星期日”的检查。如果它已经添加到您的表记录中。

```
declare @NextWorkingDate datetime
declare @CurrentDate datetime
set @CurrentDate = GETDATE()
set @NextWorkingDate = @CurrentDate 
declare @i int = 0
While(@i < 14)
Begin
    if(((select COUNT(*) from dbo.tblHolidayMaster where convert(varchar(10),[Date],101) like convert(varchar(10),@NextWorkingDate,101)) > 0) OR DATENAME(WEEKDAY,@NextWorkingDate) = 'Saturday' OR DATENAME(WEEKDAY,@NextWorkingDate) = 'Sunday')
    Begin
        print 'a '  
        print @NextWorkingDate
        set @NextWorkingDate = @NextWorkingDate + 1
        CONTINUE
    End
    else
    Begin
        print  'b ' 
        print @NextWorkingDate
        set @NextWorkingDate = @NextWorkingDate + 1
        set @i = @i + 1
        CONTINUE
    End
End
print @NextWorkingDate 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T10:05:00.410

试试下面的链接，

[http://www.c-sharpcorner.com/uploadfile/tirthacs/difference-between-two-dates- exclude-weekends/](http://www.c-sharpcorner.com/uploadfile/tirthacs/difference-between-two-dates-excluding-weekends/)

# asp.net - 在 ASP.NET 中为基本用户屏蔽页面的一部分

> ID：10929612
> 
> 赞同：2
> 
> 时间：2012-06-07T10:01:14.727
> 
> 标签：asp.net, authorization, administration

我会给你看一些截图，它会更容易解释。

这就是我所拥有的： [http](http://www.noelshack.com/2012-23-1339063050-SiteWebV3.png)
://www.noelshack.com/2012-23-1339063050-SiteWebV3.png 使用我的“root”帐户，我可以访问整个页面。

这就是我想要的： [http](http://www.noelshack.com/2012-23-1339063050-SiteWebV3LimitedAccess.png)
://www.noelshack.com/2012-23-1339063050-SiteWebV3LimitedAccess.png 我想限制对非 root 用户的访问。

我知道如何禁止访问整个页面，但我不知道（如果可能的话）如何屏蔽我的页面的一部分。

我查看了此[页面](http://support.microsoft.com/kb/316871)，但它对我想做的事情没有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:16:58.497

您可以制作两个`WebUserControls`并可以根据父 Page_Load 事件中的用户类型有条件地加载它们，或者您可以选择制作一个`WebUserControl`并将用户特定控件的可见性设置为只读/可见 = false，只需公开其公共属性`UserControl`并设置它以`Page_load`事件为基础`UserType`。

你也可以这样做

```
 <% if (this.UserType== "root") { %>
    Loading user control with root user options
    <CTRL:A runat="server" />
<% } else { %>
    Loading user control with Non root User rights
    <CTRL:A runat="server" />
<% } %> 
```

希望它对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T14:07:00.257

如果有人感兴趣，我发现了一种更简单（最简单？）的方法：

```
protected void Page_Load(object sender, EventArgs e)
    {
            if (Convert.ToString(User.Identity.Name) == "root")
            {
              //Your code if you're root
            }
            else
            {
             //Your code if you aren't
            }
   } 
```

当然，您可以通过管理员的用户名更改“Root”，或者添加许多这样的登录名：

```
if (Convert.ToString(User.Identity.Name) == "root" || Convert.ToString(User.Identity.Name) == "AnotherLogin" || Convert.ToString(User.Identity.Name) == "Etc")
{
  //Blah blah
} 
```

希望能帮助到你 ：）

# eclipse - 如何在运行时更改 Eclipse RCP 的标题？

> ID：10929616
> 
> 赞同：4
> 
> 时间：2012-06-07T10:01:43.833
> 
> 标签：eclipse, eclipse-rcp

我想在运行时更改我的 Eclipse RCP 应用程序的名称，以便包含用户正在处理的项目的名称。

这似乎是一个非常简单的问题，但我只能找到一种静态设置名称的方法（在文章“品牌化您的应用程序”中）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-20T10:06:20.810

有一种更简单的方法可以做到这一点，在我尝试按照此处的建议进行操作之后，我在获取`Application`or时遇到了问题`WorkbenchWindowAdvisor`。解决方案只是获取工作台窗口的外壳，然后`setText`：

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getShell().setText("My new title"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T10:58:58.227

在您`ApplicationWorkbenchWindowAdvisor`获取`IWorkbenchWindowConfigurer`并在那里设置标题。例如：

```
public void preWindowOpen() 
{
    IWorkbenchWindowConfigurer configurer = getWindowConfigurer();        
    configurer.setTitle("Custom Name..."); 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-20T15:24:32.617

您可以随时通过深入了解 Application 对象来更新标题：

```
Application.getApplication().getWorkbenchAdvisor().getWorkbenchWindowAdvisor().setTitle(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T10:49:37.150

我做同样的事情。我持有 getWindowConfigurer(); 在一些静态参考中。

```
Utility.configurer = getWindowConfigurer(); 
```

然后在任何地方使用此引用来更新应用程序标题。

```
Utility.configurer.setTitle("My New Title"); 
```

# java - 多线程Java应用程序中的数据缓冲

> ID：10929617
> 
> 赞同：5
> 
> 时间：2012-06-07T10:01:47.067
> 
> 标签：java, java.util.concurrent

我有一个多线程应用程序，它有一个生产者线程和几个消费者线程。数据存储在共享线程安全集合中，并在缓冲区中有足够数据时刷新到数据库。

从 javadocs -

```
BlockingQueue<E> 
```

一个队列，它还支持在检索元素时等待队列变为非空，并在存储元素时等待队列中的空间变为可用的操作。

```
take() 
```

检索并删除此队列的头部，如有必要，等待元素可用。

我的问题-

> 1.  是否有另一个具有 E[] take(int n) 方法的集合？即阻塞队列一直等到一个元素可用。我想要的是它应该等到 100 或 200 个元素可用。
> 2.  或者，是否有另一种方法可以在不进行轮询的情况下解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:08:27.463

该`drainTo`方法并不完全是您正在寻找的，但它会达到您的目的吗？

[http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#drainTo(java.util.Collection](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html#drainTo(java.util.Collection) , int)

*编辑*

`take`您可以使用和的组合来实现性能稍高的批处理阻塞 takemin `drainTo`：

```
public <E> void drainTo(final BlockingQueue<E> queue, final List<E> list, final int min) throws InterruptedException
{
  int drained = 0;
  do 
  {
    if (queue.size() > 0)
      drained += queue.drainTo(list, min - drained);
    else
    {
      list.add(queue.take());
      drained++;
    }
  }
  while (drained < min);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:16:24.610

我认为唯一的方法是扩展某些实现`BlockingQueue`或使用以下方法创建某种实用程序方法`take`：

```
public <E> void take(BlockingQueue<E> queue, List<E> to, int max) 
        throws InterruptedException {

    for (int i = 0; i < max; i++)
        to.add(queue.take());
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T10:08:22.050

我不确定标准库中是否有类似的类具有`take(int n)`类型方法，但是您应该能够包装默认值`BlockingQueue`以添加该函数而无需太多麻烦，您不觉得吗？

替代方案是触发将元素放入集合中的操作，您设置的阈值将触发刷新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T10:18:19.667

所以这应该是一个线程安全的队列，可以让你阻止获取任意数量的元素。欢迎更多的眼睛来验证线程代码是否正确。

```
package mybq;

import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;

public class ChunkyBlockingQueue<T> {
    protected final LinkedList<T> q = new LinkedList<T>();
    protected final Object lock = new Object();

    public void add(T t) {
        synchronized (lock) {
            q.add(t);
            lock.notifyAll();
        }
    }

    public List<T> take(int numElements) {
        synchronized (lock) {
            while (q.size() < numElements) {
                try {
                    lock.wait();
                } catch (InterruptedException e) {
                    Thread.currentThread().interrupt();
                }
            }
            ArrayList<T> l = new ArrayList<T>(numElements);
            l.addAll(q.subList(0, numElements));
            q.subList(0, numElements).clear();
            return l;
        }
    }
} 
```

# java-me - 更改 LWUIT 对话框的背景

> ID：10929619
> 
> 赞同：1
> 
> 时间：2012-06-07T10:02:04.290
> 
> 标签：java-me, background, dialog, lwuit

我无法将 Dialog 的背景颜色从白色更改为任何颜色。我尝试了以下代码片段，但没有用。

```
dialog.getDialogStyle().setBgColor(0xffce78, true);
    dialog.getUnselectedStyle().setBgImage(Image.createImage("/main_bg.png"));
        dialog.getPressedStyle().setBgImage(Image.createImage("/main_bg.png"));
        dialog.getSelectedStyle().setBgImage(Image.createImage("/main_bg.png")); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T11:10:52.923

您需要使用对话框样式`getDialogStyle()`。

无论您的代码创建 3 个独立但相同的图像，这**真的很糟糕！**您将相同的图像加载到内存中 3 次！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:32:03.337

你的图片在根目录吗？你应该使用 src 文件夹中的完整路径，我的意思是，如果你的图像在“images”包中，你应该把这个路径放在“/images/main_bg.png”。如果它在默认包中......“main_bg.png”

# mysql - 用户权限是否会影响我的 mysql 查询的执行时间

> ID：10929624
> 
> 赞同：1
> 
> 时间：2012-06-07T10:02:22.467
> 
> 标签：mysql

假设我们有 2 个用户，一个 mysql DB 客户的 A 和 B。

用户 A 拥有特定数据库的所有权限，而用户 B 拥有一些复杂的特定权限，例如

```
GRANT SELECT,INSERT
    ->     ON customer.Table1
    ->     TO 'user B'@'server.domain'
    ->     IDENTIFIED BY 'pwrd'; 
```

现在，如果我在 Table1 表上的客户数据库上运行查询，那么当分别通过 User A 和 User B 运行时，查询的执行时间会有什么不同吗？

以及如何在查询执行时实际检查权限，或者在建立连接时检查权限并将其存储在其他地方？

我所知道的是权限存储在名为**'user (Host,User,Password)' 的**表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:04:57.270

在执行 sql 语句之前，在 sql 语句的编译时检查登录用户的权限。

仅检查该特定 sql 语句中使用的资源（例如表、视图、存储过程、函数）的权限。

用户的权限或用户级别不影响执行时间。

当用户尝试连接到数据库时，MySQL 会检查该特定用户名/主机/密码组合是否具有连接权限。一旦建立连接，在执行任何操作之前，MySQL 会再次检查用户/主机组合是否具有执行该操作的正确访问级别。用户表是 MySQL 检查的第一个表。在授予任何访问权限之前，必须在此表中列出所有用户/主机/密码组合。

# ipad - PhoneGap：如何在 html 中使用滑动手势来制作图片库？

> ID：10929628
> 
> 赞同：2
> 
> 时间：2012-06-07T10:02:48.943
> 
> 标签：ipad, html, cordova

当用户从左或右滑动图像相应更改时如何显示图像库？

这是否可以通过 Phonegap 制作 iPad 应用程序。

任何人都可以给我提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:20:25.407

```
<script>
$("ul").delegate("li", "swiperight", function() {
 // The user has swiped to the right on a list view item. Show an edit menu.
//$(this).find(".menu-edit").show();//change here according to your need.
})
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:44:34.990

您可以使用现有的众多 Carousel/Slide 画廊之一。我使用了来自 Bootstrap [http://twitter.github.com/bootstrap/javascript.html#carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)的轮播，它很好。

然后，您可以将其与@vikky 提到的 jQuery Mobile 事件结合使用。这提供了 swipeleft 和 swiperight ，您可以使用它们来触发您选择的轮播上的下一个/上一个方法。 [http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

# mysql - 如何同时使用 distinct 和 limit

> ID：10929631
> 
> 赞同：0
> 
> 时间：2012-06-07T10:02:59.320
> 
> 标签：mysql

我有一个mysql查询。我需要从表中的 Lat、Lng 列中获取最后一个值，但 serial_number 列需要不同。

如何进行这样的查询？

这是需要的，因为我正在使用此坐标将其加载到 Google 地图。因此，当谷歌地图加载时，我需要在车辆所在的每个最后一个坐标上都有一个标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:14:46.340

```
SELECT  m.*
FROM    (
        SELECT  DISTINCT serial_number
        FROM    mytable
        ) md
JOIN    mytable m
ON      m.id =
        (
        SELECT  id
        FROM    mytable mi
        WHERE   mi.serial_number = md.serial_number
        ORDER BY
                mi.time DESC, mi.id DESC
        LIMIT   1
        ) 
```

为此创建一个索引以`(serial_number, time, id)`使其快速工作。

如果要检索某个序列号的最后一条记录，只需使用以下命令：

```
SELECT  *
FROM    mytable
WHERE   serial_number = :my_serial_number
ORDER BY
        time DESC, id DESC
LIMIT   1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:29:41.453

1#假设max ID总是给你最后的lat和lon，查询变得非常简单-

```
SELECT t2.*
FROM table t2
where t2.id IN 
 (
   SELECT max(t1.id)
   FROM table t1
   GROUP BY t1.serial_number
 ) 
```

* * *

2#如果你还需要考虑时间，那么你需要这样做。这里，在内部查询中，获得了每个serial_number 的max_time。然后这个 max_time 和 serial_number 分别与外部表 time 和 serial_number 连接，以获得最后一个 lat 和 lon 的不同记录。

```
SELECT *
FROM table t2, 
 (
   SELECT max(t1.time) max_time, t1.serial_number
   FROM table t1
   GROUP BY t1.serial_number
 ) new_table
WHERE t2.time=new_table.max_time
AND t2.serial_number=new_table.serial_number 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T10:20:08.227

试试这个

```
select distinct serial_number, *
from table t
inner join table t1 on t1.serial_number = t.serial_number and t1.id = (select max id from table t2 where t2.serial_number = t1.serial_number) 
```

# windows-phone-7 - windows phone 7 导航 Uri

> ID：10929632
> 
> 赞同：0
> 
> 时间：2012-06-07T10:03:01.163
> 
> 标签：windows-phone-7

在我**的 MainPage.xaml 的构造函数**中，我做了一些控件并希望在某些情况下导航到主页：

```
 NavigationService.Navigate(new Uri("/Home.xaml", UriKind.Relative)); 
```

但我将**NullReferenceException**置于代码行之上。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:12:48.823

我怀疑调用构造函数时导航服务设置不正确。尝试将导航代码移动到 OnNavigatedTo() 方法。

# javascript - 简单的 jQuery 滚动条 - 如何让它无限？

> ID：10929634
> 
> 赞同：0
> 
> 时间：2012-06-07T10:03:18.560
> 
> 标签：javascript, jquery, html, css, web

嘿伙计们，这是我的代码：

```
function scroll(obj) {
  $(obj).animate({top:'-'+$('li:nth-child(1)', obj)
        .outerHeight(true)}, 15000, 'linear', function(){
            $(obj).css({top:0});scroll(obj);
        });
} 
```

只是想知道如何让它无限（要么继续循环，要么继续从上到下），而不是仅仅跳回顶部。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:08:46.823

```
function scrollDown(obj){
    obj.animate({top:'-'+$('li:nth-child(1)', obj).outerHeight(true)}, 15000, 'linear', function(){scrollUp($(this));});
}

function scrollUp(obj){
    obj.animate({top:0)}, 15000, 'linear', function(){scrollDown($(this));});
}

scrollDown($("#myObject")); 
```

# c# - 如何以专业可 靠的方式以编程方式发送短信？

> ID：10929635
> 
> 赞同：3
> 
> 时间：2012-06-07T10:03:19.897
> 
> 标签：c#, .net, sms

对于我正在工作的项目，我需要以可靠的方式发送 SMS 消息，因为这是一个生产应用程序。我遇到的问题是应用程序在云上运行，我不能使用像 SMS 网关这样的额外硬件。

我使用的提供商不提供典型的邮件到 SMS 网关，我觉得它不太可靠。有什么严肃的解决办法吗？

谢谢。

PD：我不是在寻找免费服务，而是寻找可靠的服务。

PD：我需要为西班牙提供的服务，并且只发送消息，而不是接收消息。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T12:46:00.373

您关于可靠性的具体问题可能取决于您发送到的地理区域。希望更多的开发者可以提供真实的生活体验。Twilio 确实拥有庞大的用户群，通常这表明该服务很好[http://techcrunch.com/2012/06/05/twilio-passes-a-milestone-100000-developers-for-its-voip-sms-platform /](http://techcrunch.com/2012/06/05/twilio-passes-a-milestone-100000-developers-for-its-voip-sms-platform/) 另请参阅此之前的 SO 条目[https://stackoverflow.com/questions/2528919/sms-gateway-service-provider-with-php-api](https://stackoverflow.com/questions/2528919/sms-gateway-service-provider-with-php-api)

选择提供商还取决于您需要覆盖哪些国家、是否需要发送和接收能力以及是否需要专用短代码。有很多公司提供基于 Web 的 API 来发送 SMS，其中包括提供服务的运营商。这些往往提供不同的国际覆盖范围，其中大多数在特定地区具有最佳覆盖范围。服务的成本也因公司之间的设置费用而异，并且取决于您是否需要设置专用的短代码。

以下是一些提供 SMS Web API 服务的知名公司

[Twilio](http://www.twilio.com/) - 美国覆盖发送和接收，但目前正在运行国际测试版计划[https://www.twilio.com/international-sms](https://www.twilio.com/international-sms)，标准服务没有安装费或最低合同，但如果您愿意，至少 3 个月使用短代码。

~~[Tropo](https://www.tropo.com) - 美国的发送和接收覆盖范围，可以向国际号码发送 SMS 消息但不能接收。~~

~~[Zeep](http://www.zeepmobile.com/) - 仅覆盖美国且仅发送，每月最低消费并使用 Zeep 短代码。~~

[Nexmo](http://nexmo.com/) - 无安装费或最低月费。提供国际覆盖，目前在美国发送 SMS 的费率较低。接收短信的国家覆盖范围有限。

[MediaBurst](http://www.mediaburst.co.uk/) - 总部位于英国的公司，具有发送和接收 SMS API 的国际覆盖范围。请注意，“国际覆盖”不一定包括所有美国运营商（例如），而是大多数。他们以批量定价为每条短信提供 0.05 英镑的固定价格。似乎不支持自定义短代码。

还有一些运营商提供基于 Web 的 API 用于通过其网络发送 SMS，包括：

[Bluevia](https://bluevia.com/en/)提供独特的利润分享模式，开发者分享发送（或接收）短信的利润，但覆盖范围仅限于一些欧洲和南美国家的 Telefonica 网络（请参阅[https://bluevia.com/en/page /tech.overview.countries](https://bluevia.com/en/page/tech.overview.countries)）。他们还提供支付和位置 API。

最近推出的[OneAPI](http://oneapi-gw.gsma.com/)可在加拿大的三大运营商上使用，并将很快推广到不同的国家。这允许访问发送和接收 SMS 以及其他一些东西，如付款和位置。发送和接收 SMS 的费用取决于运营商。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:14:45.730

我一直在使用[Twilio](http://www.twilio.com/)，到目前为止它一直很可靠——他们的 c# 库很容易使用（我只有一个我发现它缺乏的功能）。而且我发现租用号码、发送/接收短信的成本非常低。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T16:40:28.160

您正在寻找可靠和国际化的东西 - 我建议[Nexmo](http://nexmo.com) *（免责声明：我为他们做了一些开发人员宣传）*。

*   Nexmo 可以运送到西班牙（以及许多其他国家）
*   Nexmo[直接与运营商合作](http://blog.nexmo.com/post/4690069179/directsms)，因此您可以缩短交付路径 - 这使其具有成本效益和可靠性。

您将使用简单的 HTTP 请求发送消息，并且（尽管您现在不需要它），您会收到作为 HTTP 请求的消息到您的服务器。

[您甚至可以使用QoD 仪表板](http://dashboard.nexmo.com/ratios/public/AO)检查特定目的地的交付统计信息，只需注意较低的“成功率”是错误数字的指标，“DLR 率”是 Nexmo 执行情况的指标（例如，如果您向无效号码发送消息，这会影响成功率，但不会影响 DLR 比率 - 因为 Nexmo 将提供指示无法传递消息的送达回执）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T10:14:18.187

有很多公司允许使用 HTML POST 或 GET 发送 SMS，或者使用 XML 或 JSON 可通过 SOAP 访问的 Web 服务。

因此，您需要联系其中一家公司并获取详细信息。

例如，看看这个：

*   [我的酷短信](http://www.my-cool-sms.com/en/documentation-sms-api-sms-gateway-sms-program-sms-service-sms-php-sms-java)
*   [1条消息](http://www.1message.com/downloads/1message_webservice_Interface.pdf)

如果您的提供者是认真的，应该有两种服务：

*   您将公开用于发送消息的一种
*   其他，由您的服务器公开，您的 SMS 提供商将使用它来向您发送通知（已发送/已读取/无法发送）等等

这是此类服务的一个示例：

*   [连接软件](http://www.csoft.co.uk/sms/api/soap_to_sms.htm)

前段时间有一个类似的标准，很多公司都在使用，但是现在找不到了。

# javascript - 引导选项卡损坏

> ID：10929639
> 
> 赞同：0
> 
> 时间：2012-06-07T10:03:40.620
> 
> 标签：javascript, jquery, tabs, twitter-bootstrap

我有一个使用 twitter 引导选项卡的小型 Web 应用程序。最近它已经停止工作。

在对此进行调查时，似乎引导程序自己的演示页面上的基本选项卡也不起作用。见：http: [//twitter.github.com/bootstrap/components.html#navs](http://twitter.github.com/bootstrap/components.html#navs)

我已经在 Firefox、Chrome 和 IE 中对此进行了测试。在多台机器上。引导选项卡全面损坏。

有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T17:27:09.553

您提到的页面上的选项卡只是视觉元素；他们没有任何逻辑来隐藏和显示替代选项卡内容。为此，您需要[Javascript 插件](http://twitter.github.com/bootstrap/javascript.html#tabs "Javascript 插件")页面上所示的 javascript。

# c# - Telerik MVC 菜单“MenuItem.Action()”呈现错误的 url

> ID：10929640
> 
> 赞同：0
> 
> 时间：2012-06-07T10:03:42.163
> 
> 标签：c#, asp.net-mvc-3, telerik-mvc

我正在使用 Telerik MVC Menu 来呈现我的主菜单。以下代码是构建某个菜单项的行：

```
item.Add().Text("Address").ImageUrl("~/Content/Images/Icons/house.png").Action("index", "basicdata", new {basicdatatype=BasicDataType.ADDRESS}); 
```

我希望网址变成：`localhost/basicdata/address` 但它实际上呈现：`localhost/basicdata?basicdatatype=address`

我想在我的控制器中获取该枚举：

```
public ActionResult Index(BasicDataType basicDataType)
{
     //Code here
} 
```

但它不起作用，因为 URL 的格式不正确。有人可以帮忙吗？

* * *

**编辑：**

即使以下呈现错误的网址：

```
item.Add().Text("Test").Action<BasicDataController>(o => o.Index(BasicDataType.PROJECT)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:23:39.223

当您使用区域时，您必须在从外部链接到该区域时指定该区域：

```
@{ Html.Telerik().Menu()
     .Name("Menu")
     .Items(menu =>
     {
       menu.Add()
       .Text("Address")
       .Action("index",
               "basicdata",
               new { basicdatatype = BasicDataType.ADDRESS,
                     area = "basicdata" });
     }).Render();
 } 
```

# c# - 如何在 asp.net 中使用 updatePanel 而不刷新所有页面？

> ID：10929644
> 
> 赞同：17
> 
> 时间：2012-06-07T10:04:04.527
> 
> 标签：c#, asp.net, updatepanel

我想设计一个网站，其中包含 asp.net(c#) 中的产品子类别。当我单击子类别时，必须显示产品图像并且不应刷新主页。我怎样才能成功？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-07T10:12:49.477

阅读这些教程[Asp.net 更新面板](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)和[UpdatePanel 控件简介](https://msdn.microsoft.com/en-us/library/bb399001.aspx)

简单易懂

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T10:10:04.113

请参阅下面的 Ajax 概述：

[http://msdn.microsoft.com/en-us/library/bb386454.aspx](http://msdn.microsoft.com/en-us/library/bb386454.aspx)

# eclipse - FindBugs 找不到错误

> ID：10929648
> 
> 赞同：2
> 
> 时间：2012-06-07T10:04:56.143
> 
> 标签：eclipse, nullpointerexception, findbugs

我想使用 FindBugs 创建有关应用程序的报告。

我运行它并没有发现像这样的潜在错误：

```
public List<String> getListTrace(A object) {

    String arg = object.getArg();
    ...
} 
```

如果对象为空，我的应用程序将关闭。

为什么 FindBugs 不发出警报？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:39:18.733

Findbugs 不知道 object 是否允许为空。您可以通过使用注释来告诉它：

```
import javax.annotation.Nullable;
...
public List<String> getListTrace(@Nullable A object) { 
```

这告诉 Findbugs（和阅读代码的人）可以将 null 作为参数传递给 getListTrace。因此，如果您取消引用对象而不检查 null，Findbugs 会警告您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:16:15.390

该代码看起来没有错误。

如果您更改代码以检查是否`object`为空，您会怎么做？最合理的动作可能是抛出一个`NullPointerException`，对吧？

这正是您的代码片段所做的；它只是让java在访问方法时自动进行测试。

此函数不检查空指针不是错误。如果有人将空指针传递给您的函数并且没有准备好引发`NullPointerException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:49:44.767

Findbug 无法检测*潜在*的空指针访问。但是，如果您在首选项中激活相应的编译器警告，Eclipse 会针对潜在的空指针访问向您发出警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-23T06:21:15.377

在这种情况下提出错误报告会导致非常大的噪音。您会在完全正确的代码中收到数千条不相关的错误消息。实际上 FindBugs 做了更聪明的事情。如果它发现该方法在没有进行空检查的情况下取消引用该参数，它会在内部将此方法参数标记为`@Nonnull`. 如果您有`TimK`与此相矛盾的明确注释（如答案），您将收到警告。否则 FindBugs 假定没有人使用此方法和可能为空的参数。当有人实际这样做时，您会在呼叫站点上收到相应的警告。这是一个例子：

```
import java.util.Collections;
import java.util.List;

public class FBNull {
    static class A {
        String getArg() {
            return "str";
        }
    }

    public static List<String> getListTrace(A object) {
        String arg = object.getArg();
        return Collections.singletonList(arg);
    }

    public void callSite(A a) {
        if (a == null) {
            System.out.println("a is null");
        }
        System.out.println(getListTrace(a)); // NP_NULL_PARAM_DEREF 
    }
} 
```

从 FindBugs 的观点来看`getListTrace()`方法是可以的。但是该`callSite`方法有一个错误。它显式检查其参数`null`，因此由于应用程序逻辑，它可能为空。但是，它稍后被传递给`getListTrace()`which 立即取消引用该参数。因此，您在方法中有一个错误警告`getListTrace()`说：

> `getListTrace(FBNull$A)`错误：为in的非空参数传递空值`FBNull.callSite(FBNull$A)`
> 
> 此方法调用为非空方法参数传递空值。要么将参数注释为应始终为非空的参数，要么分析表明它将始终被取消引用。

因此，如果您实际上可以传递空值，则可以在调用站点上检测到它。

# android - 当我在非 Activity 类的静态方法中时如何启动 Activity

> ID：10929649
> 
> 赞同：-2
> 
> 时间：2012-06-07T10:04:56.237
> 
> 标签：android, android-activity

```
public class Myclass{
public static void Mymethod{

//i want to go to an Activity from here

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:07:40.250

这简单！

按 Activity 的类型向静态类添加静态字段。

当您的活动创建时，将此指针放在其他类的静态字段中：

```
public class MyActivity extends Activity
{
     public void onCreate()
     {
           Myclass.myactivity = this;
     }
} 
```

只需设置：Myclass.myActivity = this; 然后从 Myclass.Mymethod 访问它

```
public class Myclass{
public static Activity myActivity = null;
public static void Mymethod{

//i want to go to an "myActivity" from here

}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:22:55.153

很简单，您可以将 Context 对象从您的 Activity 类传递给您的 Non Activity 类，并使用它启动一个新的 Activity。

```
Intent i=new Intent(contextObj, ClassName.class);
contextObj.startActivity(i); 
```

# ruby-on-rails - 在 rake db:create 上初始化 Rails 应用程序的简单方法

> ID：10929652
> 
> 赞同：1
> 
> 时间：2012-06-07T10:05:02.823
> 
> 标签：ruby-on-rails

我写了我的rails（3.2.3）应用程序......

配置/应用程序.rb：

```
# ...

class MyWebApp
  class Application < Rails::Application

    # ...

    config.before_initialize do
      $my_config = MyConfig.new
    end
  end
end 
```

配置/数据库.yml：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: true
  database: <%=$my_config.config['db']['basename']%>_development
  pool: 5
  username: <%=$my_config.config['db']['username']%>
  password:
  socket: /var/run/mysqld/mysqld.sock 
```

然后， rake db:create 引发：

```
rake aborted!
undefined method `config' for nil:NilClass
(erb):15:in `<main>'
/home/sn/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/erb.rb:838:in `eval'
/home/sn/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/erb.rb:838:in `result'
/home/sn/dev/mywebapp/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application/configuration.rb:115:in `database_configuration'
... 
```

在我手动创建数据库后， rake db:migrate 成功。所以我阅读了 databases.rake 并发现 db:migrate 调用 :environment task 但 db:create 没有。

activerecord-3.2.3/lib/active_record/railties/databases.rake：

```
task :create => :load_config do
  configs_for_environment.each { |config| create_database(config) }
  ActiveRecord::Base.establish_connection(configs_for_environment.first)
end

task :migrate => [:environment, :load_config] do
  ActiveRecord::Migration.verbose = ENV["VERBOSE"] ? ENV["VERBOSE"] == "true" : true
  ActiveRecord::Migrator.migrate(ActiveRecord::Migrator.migrations_paths, ENV["VERSION"] ? ENV["VERSION"].to_i : nil) do |migration|
    ENV["SCOPE"].blank? || (ENV["SCOPE"] == migration.scope)
  end
end 
```

您知道在 rake db:create 上正确初始化 $my_config 变量的任何简单方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:04:41.940

您可以向任务添加依赖项，尝试将此行放在 Rakefile 的末尾：

```
namespace :db do 
  task :create => [:environment, :load_config]
end 
```

# linux - 如何使用 fw1-loggrabber 客户端

> ID：10929665
> 
> 赞同：0
> 
> 时间：2012-06-07T10:06:15.640
> 
> 标签：linux, checkpoint

在尝试运行 fw1-leggrabber 客户端时

```
fw1.loggrabber -l lea.conf --debug-level 3 
```

我收到以下调试消息：[调试消息](http://pastebin.com/9U6rggjv "调试信息")

我已经安装了 CheckPointR75.20 Splat。我使用 SmartDashBoard 客户端创建了一个新的 OPSEC 应用程序。它生成了一个**Client DN**。配置检查点服务器后，我得到了**Server DN**。现在在**lea.conf**文件中，我的条目为

```
opsec_sic_name "CN=FinalShot,O=cpmodule..gy9quu"  (while creating OPSEC Application via Smart DashBoard)
lea_server opsec_entity_sic_name "o=cpmodule..gy9quu" (obtained from the server) 
```

这是我从上述步骤中获得的。

我得到的错误是：

```
ERROR: SIC ERROR 111 - SIC Error for ssl_opsec: Peer sent wrong DN: cn=cp_mgmt,o=cpmodule..gy9quu 
```

可能是什么问题？

我看到值**DN: cn=cp_mgmt,o=cpmodule..gy9quu****在**文件$ **CPDIR/registry/HKLM_registry.data的 MySicName 部分中**

在 lea.conf 文件中，我应该放置服务器 DN，即**o=cpmodule..gy9quu**。我不知道这里有什么问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:47:25.573

我做了以下事情来解决这个问题：

我更改了文件中的行：

```
$CPDIR/registry/HKLM_registry.data 
```

包含

```
MySicName: cn=cp_mgmt,o=cpmodule..gy9quu 
```

到

```
MySicName: o=cpmodule..gy9quu 
```

无论如何谢谢 ：）

# java - 线程“AWT-EventQueue-1”java.lang.UnsatisfiedLinkError 中的异常：java.library.path 中没有 jcom

> ID：10929669
> 
> 赞同：-1
> 
> 时间：2012-06-07T10:06:26.207
> 
> 标签：java, java.library.path

我正在运行用 java 1.4 版本编码的 java 桌面应用程序。我使用 eclipe 作为我的 ide，并尝试在该项目中以 java 1.6 版本运行该应用程序，他们使用 jcom jar 文件将数据导出到 Excel 表。当我尝试单击桌面应用程序中的 excel 按钮时。该功能不起作用并抛出异常。但我在我的项目资源管理器中正确构建路径 jcom jar 存在于引用的库中。任何人都可以帮助我解决这个异常。提前致谢。

线程“AWT-EventQueue-1”中的异常 java.lang.UnsatisfiedLinkError：java.lang.ClassLoader.loadLibrary(Unknown Source) at java.lang.Runtime.loadLibrary0(Unknown Source) 的 java.library.path 中没有 jcom .lang.System.loadLibrary(Unknown Source) at jcom.IDispatch.(IDispatch.java:287) at .StockManager.BusinessSheets.exportToExcel(BusinessSheets.java:2302) at .StockManager.BusinessSheets$BusinessSheetPanel$3.mouseClicked(BusinessSheets.java :439) 在 java.awt.AWTEventMulticaster.mouseClicked(Unknown Source) at java.awt.Component.processMouseEvent(Unknown Source) at javax.swing.JComponent.processMouseEvent(Unknown Source) at java.awt.Component.processEvent(Unknown Source) ) 在 java.awt.Container.processEvent(Unknown Source) 在 java.awt.Component.dispatchEventImpl(Unknown Source) 在 java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source) at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source) at java.awt。 LightweightDispatcher.dispatchEvent(Unknown Source) at java.awt.Container.dispatchEventImpl(Unknown Source) at java.awt.Window.dispatchEventImpl(Unknown Source) at java.awt.Component.dispatchEvent(Unknown Source) at java.awt.EventQueue。 dispatchEventImpl(Unknown Source) at java.awt.EventQueue.access$000(Unknown Source) at java.awt.EventQueue$1.run(Unknown Source) at java.awt.EventQueue$1.run(Unknown Source) at java.security.AccessController java.security.AccessControlContext$1 处的 .doPrivileged(Native Method)。doIntersectionPrivilege(Unknown Source) at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue$2.run(Unknown Source) at java.awt.EventQueue$2.run(Unknown Source) at java.security.AccessController .doPrivileged(Native Method) at java.security.AccessControlContext$1.doIntersectionPrivilege(Unknown Source) at java.awt.EventQueue.dispatchEvent(Unknown Source) at .StockManager.WaitCursorEventQueue.dispatchEvent(WaitCursorEventQueue.java:23) at java.awt。 EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread。java.awt.EventDispatchThread.run（未知源）上的 pumpEvents（未知源）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:20:38.047

**情况 1：** `jcom.dll`不在路径中。

**`jcom.dll`解决方案**：** 放入`C:/Windows/System32`**

 ****情况2：** `jcom.dll`被其他进程使用

**解决方案：** 尝试找到该进程并将其杀死。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:14:11.350

用于 JNI 共享库，`java.library.path`例如`DLLs`或`.so`文件。看来您的`jcom.jar`（您可以看到它正在加载到堆栈的第三行，以便它找到 JAR）需要一个`jcom.dll`. 在 Windows 上，这必须在您的 PATH 或 java.library.path 中**

# symfony - 无效的实体或超级基类

> ID：10929675
> 
> 赞同：0
> 
> 时间：2012-06-07T10:06:45.623
> 
> 标签：symfony, fosuserbundle

我使用过 Symfony 2 并且已经成功配置**FOSUserBundle**。

**我的应用程序在生产**和**开发**模式下都可以在 Windows 机器上正常工作

但是当我将它部署在 Linux 机器上时，它在开发模式下运行良好，但在生产模式下却给出了一个空白页面。当我检查错误日志文件时，它有以下错误：

```
request.CRITICAL: Doctrine\ORM\Mapping\MappingException: Class \Entity\User is not a  
valid entity or mapped super class. (uncaught exception)

request.CRITICAL: Exception thrown when handling an exception 
(Doctrine\ORM\Mapping\MappingException: Class \Entity\User is not a valid entity or 
mapped super class.) [] [] 
```

看看我的用户实体类：

```
/**
 * @ORM\Entity(repositoryClass="\Repository\UserRepository")
 * @ORM\Table(name="user")
 */
class User extends BaseUser
{
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length="255")
     *
     * @Assert\NotBlank(message="Please enter your name.", groups={"Registration",     "Profile"})
     * @Assert\MinLength(limit="3", message="The name is too short.", groups={"Registration", "Profile"})
     * @Assert\MaxLength(limit="255", message="The name is too long.", groups={"Registration", "Profile"})
     */
    protected $name;

    /**
     * @ORM\Column(type="date", length="255", nullable=true)
     *
     * @Assert\NotBlank(message="Please select your Date Of Birth.", groups={"Registration", "Profile"})
     */
    protected $dob;

    /**
     * @ORM\Column(type="string", length="255")
     *
     * @Assert\NotBlank(message="Please select your Date Of Birth.", groups={"Registration", "Profile"})
     */
    protected $gender;

    /**
     * Override $email so that we can apply custom validation.
     * 
     * @Assert\Email(groups={"AppRegistration"})
     */
    protected $email;

    /**
     * @var string $firstName
     *
     * @ORM\Column(name="first_name", type="string", length=20, nullable=true)
     */

    protected $firstName;

    /**
     * @var string $lastName
     *
     * @ORM\Column(name="last_name", type="string", length=20, nullable=true)
     */
    protected $lastName;

/**
     * @var datetime $createdAt
     *
     * @ORM\Column(name="created_at", type="datetime", nullable=true)
     */
    protected $createdAt;

    /**
     * @ORM\Column(type="string", length="255", nullable=true)
     * @var string
     */
    protected $facebookID;

    /** 
     * @ORM\Column(type="string", length="255", nullable=true)
     * @var string
     */
    protected $twitterID;

    /** 
     * @ORM\Column(type="string", length="255", nullable=true)
     * @var string
     */
    protected $twitter_username;

    /** 
     * @ORM\Column(type="string", length="255", nullable=true)
     * @var string
     */
    protected $image_path;

    /** 
     * @ORM\Column(name="home_town",type="string", length="255", nullable=true)
     * @var string
     */
    protected $homeTown;

    /** 
     * @ORM\Column(name="location",type="string", length="255", nullable=true)
     * @var string
     */
    protected $location;

    /** 
     * @ORM\Column(name="interest",type="string", length="255", nullable=true)
     * @var string
     */
    protected $interest;

    /** 
     * @ORM\Column(name="friend",type="string", length="255", nullable=true)
     * @var string
     */
    protected $friend;

/**
     * @var smallint $age
     *
     * @ORM\Column(name="age", type="smallint", nullable=true)
     */
    protected $age;

    /**
     * @var string $country
     * @ORM\ManyToOne(targetEntity="Country", inversedBy="user")
     * @ORM\JoinColumn(name="country_id", referencedColumnName="id")
     * @ORM\Column(name="country_id", type="string", length=25, nullable=true)
     */
    protected $countryId;

    /**
     * @ORM\OneToMany(targetEntity="ProfileViewer", mappedBy="viewer")
     */
    protected $viewers;

    .................. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:13:22.117

我认为您需要将实体命名`User`为任何其他名称，例如`Users`.

因为 User 是数据库中的保留关键字。更改此设置并再次构建架构。可能这是错误吗？

# android - Android requestLocationUpdates 不稳定

> ID：10929676
> 
> 赞同：2
> 
> 时间：2012-06-07T10:06:50.420
> 
> 标签：android, location

我在我的应用程序中使用以下代码（来自教程等），以从 GPS（或者如果 GPS 未打开，则网络）获得最佳位置修复，然后将其显示在文本字段中。

```
crit = new Criteria();
context = Context.LOCATION_SERVICE;
locationManager = (LocationManager) this.getSystemService(context);
crit.setAccuracy(Criteria.ACCURACY_FINE);
crit.setPowerRequirement(Criteria.POWER_LOW);
crit.setAltitudeRequired(false);
crit.setBearingRequired(false);
crit.setSpeedRequired(false);
crit.setCostAllowed(false);
try {
    bestProvider = locationManager.getBestProvider(crit, true);
    loc = locationManager.getLastKnownLocation(bestProvider);
    locationManager.requestLocationUpdates(bestProvider, 0, 0,
            new GeoUpdateHandler());
} catch (java.lang.RuntimeException run) {
    Toast.makeText(getBaseContext(),
    "Waiting for location fix...", Toast.LENGTH_SHORT).show();
} 
```

我的问题是在不同地点之间移动。我开始在诺福克使用我的应用程序并确定位置。第二天，我在康沃尔（相距 100 英里），当我打开我的应用程序（此时它应该已被 Android 关闭/销毁）时，它仍然向我显示诺福克的位置。我发现如果我退出我的应用程序并重新启动它，它就会选择新的位置。我可以轻松做到这一点，但我的用户发现它真的很痛苦。

我的假设是，如果 GPS/网络可用，那么我启动应用程序，从最后一个已知位置创建 LOC，然后 locationManager 立即更新（应该立即更新 LOC？）使用：

```
public class GeoUpdateHandler implements LocationListener {
  public void onLocationChanged(Location location) {
    loc = location;
  }
  public void onProviderDisabled(String provider) { }
  public void onProviderEnabled(String provider) {  }
  public void onStatusChanged(String provider, int status, Bundle extras) { }
} 
```

显然这个更新没有发生。

谁能告诉我我的代码是否愚蠢，或者提供更好的方法来确保我始终处理当前位置？谢谢。抱歉，如果这个问题得到解答，很难在所有关于位置和 requestLocationUpdates 标签的帖子中找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T14:52:01.280

在聊天中讨论后，我提出以下建议：

您需要打电话`requestLocationUpdates()`，然后向用户显示一个对话框，上面写着“获取您的位置”之类的内容。稍后，您应该会收到`onLocationChanged()`带有最新位置的回调。此时，您可以关闭对话框并更新文本字段以及您想向用户显示的任何其他内容。`removeUpdates()`一旦你有一个最新的位置，你也应该打电话，这样你就不会耗尽用户的电池。

# php - 如何在ajax中获取json响应？

> ID：10929678
> 
> 赞同：-2
> 
> 时间：2012-06-07T10:06:53.650
> 
> 标签：php, javascript, jquery

网址：`http://localhost/test-mobile/log.php?username=&password=pass`

```
$.ajax({
       url:url,
       type:'POST',
       data:{message:message},
       dataType:'json',
       json:'members',
       success:successData,
       error:function(){
        alert("error")
       }
      });
      function successData(data){
    var response=data.message;
    alert(response);
} 
```

json响应是`{"members":{"httpCode":"400","message":"Username missing"}}`

PHP代码如下：

```
<?php
    require_once("class/clsdatabase.php"); //Connect to SQL 

$username = $_GET['username'];
$password = $_GET['password'];

    //Check Username
    if($username == '') {
        $user = 'Username missing';
        $success = true;
        $status = array("httpCode"=>"400", "message"=>$user);
        //return $status;
    }

    //Check Password
    if($password == '') {
        $pass = 'Password missing';
        $success = true;
    }

    //Create SELECT query
    $qry = "select * from user_register where emp_code='$username' AND emp_password='$password' AND active='1';";

    $result = mysql_query($qry);
    $te = mysql_num_rows($result);

    if($te == 0 && $username != '' && $password != '') {
        $both = 'Invalid username or password';
        $success = true;
    }

    //If there are input validations, redirect back to the registration form
    if($te != 0 && $username != '' && $password != '') {

        $row = mysql_fetch_assoc($result);
        $name = $row['emp_code'];
        $success = true;
        $status = array("httpCode"=>"400", "message"=>$name);
        //return $status;
    }

//echo $_GET['callback']. '(' . json_encode($status) . ');';    
echo '{"members":'.json_encode($status).'}';

?> 
```

提醒 json 响应

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T11:00:17.387

我会将页面分成两部分。一个名为 ajax.php 的文件和另一个名为 index.php 的文件。

你的 index.php 看起来像。

```
<html>
<head>
  <script type="text/javascript">

     postData={ajax:"testing",id:'123'};

     $.post('ajax.php', postData , function (data) {
       alert(data);
     });

  </script>
</head>
<body>

</body>
</html> 
```

你的 ajax.php 文件看起来像

```
<?php

// its important that this file only outputs json or javascript 
// content and nothing else.

if(isset($_REQUEST['ajax'])){

  $ajaxRequest =  $_REQUEST['ajax'];

  if($ajaxRequest == 'testing'){

  // do some php stuff here -- if you look at the above example we sent an id variable
  $sql = "SELECT FROM table WHERE id = {$_REQUEST['id']}";

  $results = query($sql);

  echo json_encode($results);
  exit; // exit the script here so that only the ajax stuff is output

  }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T18:41:21.527

如果设置了 dataType:'json' 参数（在他的查询中），jQuery .ajax 函数会自动解码 JSON 对象。所以传递给success()函数的'data'变量已经是一个javascript对象了。

要访问“消息”值，您将使用“data.members.message”，因为“成员”对象包含“消息”值。

# android - 我的应用程序应该只在 Android 中由特定国家/地区下载？我能怎么做？

> ID：10929682
> 
> 赞同：2
> 
> 时间：2012-06-07T10:07:19.150
> 
> 标签：android

我已经开发了一个应用程序，我将在 Android Market 中发布它。但我需要说明的是，某些特定国家只能下载我的应用程序。我怎样才能做到这一点..？乐于助人的人表示赞赏。请尽快回答这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:09:06.340

在 Google Play 商店中提交您的应用程序时，您可以选择该应用程序在哪些国家/地区可用。在发布选项下，定价，然后在国家/地区打勾

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:12:03.287

是的，Google 已提供此选项来选择可以购买或下载您的应用的国家/地区。这是它的屏幕截图。您只需启用它们即可轻松选择国家/地区。这可以在将您的应用程序上传到 Android 市场（即 Google Play）时完成。

![在此处输入图像描述](../Images/767555d44a6261a97fd2da8af65f8e1d.png)

# ruby - Watir Webdriver：迭代表并将其内容存储在数组中

> ID：10929687
> 
> 赞同：4
> 
> 时间：2012-06-07T10:07:33.993
> 
> 标签：ruby, automation, watir, watir-webdriver

我正在尝试自动化出现在网站上的块并通过 CMS 表比较其内容。问题是我已经设法自动化出现在 UI 上的块，但是当我以管理员身份登录并尝试使用迭代将表的内容保存在数组中时，我没有做到这一点。

```
<table id="nodequeue-dragdrop" class="nodequeue-dragdrop sticky-enabled tabledrag-processed sticky-table">
<thead class="tableHeader-processed">
<tbody>
  <tr class="draggable odd">
    <td>
      <a class="tabledrag-handle" href="#" title="Drag to re-order">
      <a href="/car-news/moscow/new-text-1">New Text 1</a>
    </td>
    <td>
    <td>2012-06-06 10:24</td>
    <td style="display: none;">
    <td>
    <td>
    <td class="position">1</td>
  </tr>
  <tr class="draggable even">
    <td>
      <a class="tabledrag-handle" href="#" title="Drag to re-order">
      <a href="/car-news/new-cars/text-2">Text 2 </a>
    </td>
    <td>
    <td>2012-06-06 10:29</td>
    <td style="display: none;">
    <td>
    <td>
    <td class="position">2</td>
  </tr>
  <tr class="draggable odd">
    <td>
      <a class="tabledrag-handle" href="#" title="Drag to re-order">
      <a href="/car-news/new-cars/this-is-text-3">This is Text 3</a>
    </td>
    <td>
    <td>2012-06-05 12:55</td>
    <td style="display: none;">
    <td>
    <td>
    <td class="position">3</td>
  </tr> 
```

我正在使用的代码是

```
@text = Array.new
  x = 1
  y = 0

  until x == 10
    y = x -1

   until y == x
    @text[y] = @browser.table(:id,'nodequeue-dragdrop').tbody.row{x}.cell{1}.link(:href =>/car-news/).text

    puts @text[y]
    y=y+1  
   end

  x=x+1
 end 
```

问题是脚本运行成功，但即使我设置了迭代，脚本也只读取第一个元素并显示它的文本，并没有转到第二个第三个......等等元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T06:21:35.123

Justin 正朝着正确的方向前进，使用 ruby​​ 的内置方法来迭代集合。但是考虑一下，如果我正确地阅读了您的代码，您就知道您是在特定链接中的文本之后，那么当您可以制作匹配链接的集合时，为什么要遍历行呢？

```
link_text_array = Array.new
@browser.table(:id,'nodequeue-dragdrop').links(:href => /car-news/) do |link|
  link_text_array << link.text
end 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T13:29:14.433

有内置的方法可以遍历行/列。尝试这个：

```
table_array = Array.new
table = @browser.table(:id,'nodequeue-dragdrop')
table.rows.each do |row|
    row_array = Array.new
    row.cells.each do |cell|
        row_array << cell.text
    end
    table_array << row_array
end
puts table_array  # This will be an array (row) of arrays (column) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T10:07:59.107

找到了我的问题的解决方案

而不是 rows{} 我使用 tds{} 即我将代码更改为

```
@text[y] = @browser.table(:id,'nodequeue-dragdrop').tbody.tds{x}.cell{1}.link(:href =>/car-news/).text 
```

它按我的意愿工作..

# mysql - 避免创建高于零的重复条目

> ID：10929688
> 
> 赞同：1
> 
> 时间：2012-06-07T10:07:34.463
> 
> 标签：mysql, constraints, unique

是否可以创建数据库级别的限制以防止创建具有`x INT`已存在且大于 0 的值的列的行？

有没有办法`CONSTRAINT`用于此目的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:26:56.217

一个可能的解决方案是执行以下操作：

```
CREATE TABLE test
(
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    myfield INT,
    CONSTRAINT check_myfield UNIQUE ( myfield )
); 
```

现在，该列`myfield`可能为 NULL。所以当我们做以下的时候，一共会出现0个错误。

```
INSERT INTO `test` VALUES ( '', '1' );
INSERT INTO `test` VALUES ( '', '0' );
INSERT INTO `test` VALUES ( '', '5' );
INSERT INTO `test` VALUES ( '', '7' );
etc, you get the point... 
```

每一行在 column 中都有一个唯一的值`myfield`，但是仍然有可能创建该特定列中的值`NULL`几乎正是我想要的值的行。我希望所有高于 0 的值都是唯一的，这都是上面的`NULL`。这个解决方案的美妙之处在于它感觉更“专业”，没有不必要的逻辑。

# iphone - 在 Xcode 4 中检查僵尸的不同方法是否有区别

> ID：10929695
> 
> 赞同：2
> 
> 时间：2012-06-07T10:07:52.457
> 
> 标签：iphone, ios, xcode4, nszombie, zombie-process

据我了解，有两种检查`Zombies`in的方法，第一种是在 中设置的`Xcode 4`传统方式，并将其设置为“YES”，另一种方式是在a 方案的部分中。`NSZombieEnabled``Environment Variables``Enabling Zombie Objects``Diagnostics`

这两种方式有什么区别吗？

谢谢礼萨

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:18:34.017

不，没有区别，它们几乎相同，选中复选框`Enabling Zombie Objects`即可`NSZombieEnabled = YES`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:22:37.050

另一种方式是通过仪器。Cmd-I 用于 Profile 操作，选择 Zombies 工具。无需手动管理僵尸开关 - 配置文件操作 (Cmd-I) 为您处理。

# c - 在 TCP 服务器中处理哪些信号更好？

> ID：10929697
> 
> 赞同：2
> 
> 时间：2012-06-07T10:07:59.633
> 
> 标签：c, tcp, signals, handle

我正在编写一个 TCP 服务器。它所要做的就是向/从 TCP 套接字读取/写入文本，并将此文本读取/写入到/从服务器运行的文件系统上的文本文件中。

如果连接出现问题（例如客户端关闭套接字），则在读/写时阻塞的服务器会收到 SIGPIPE 信号。我想忽略它：服务器只是关闭其套接字的末端，因为现在无法进行通信。这是一个好方法吗？

我还需要考虑其他信号吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T10:13:35.580

许多服务器程序选择忽略`SIGPIPE`，并使用`read`/的返回码`write`来更好地理解断开连接。例如，`read`/在与另一端正确断开连接时`recv`返回，并且在设置为多个备选方案之一时出错。`0``-1``errno`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:20:18.760

您还可以实现一个中断处理程序，以防服务器崩溃，您可能希望在关闭之前执行一些操作。

例如[信号](http://en.wikipedia.org/wiki/SIGINT_%28POSIX%29)

```
void interrupt_handler(int sig){
    endloop = 1;
    close(sd);
    printf("Interrupt recieved: shutting down server!\n");
    return;
}

int main(int argc, char** argv){

    //all typical TCP socket functions

    signal(SIGINT, interrupt_handler);

    while(!endloop){

      //service loop

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:41:37.450

如果服务器是一个守护进程，通常的做法是使用`SIGHUP`重新启动或重新初始化服务器。但是，@Joachim 的回答是最重要的：客户端行为不应导致服务器终止。

**注意：**由于是异步的，信号*处理程序*可以安全地做什么是有[限制的。](http://www.ibm.com/developerworks/linux/library/l-reent/index.html)

# ruby-on-rails-3 - Twitter Bootstrap 中的边距

> ID：10929701
> 
> 赞同：1
> 
> 时间：2012-06-07T10:08:11.347
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我对 Bootstrap 中的网格系统有疑问。我似乎工作得很好，但“盒子”之间没有边距。例如，如果我有这个：

```
<div class="column">

  <div class="span11"> 

  </div>

  <div class="span11">

  </div>

</div> 
```

这很好用。但这之间没有空间。那么我是否分配一个“id”并通过 CSS 代码自己编辑它？这是正确的方法吗？例如：

```
<div class="column">

  <div id="box_1" class="span11"> 

  </div>

  <div id="box_2" class="span11">

  </div>

</div> 
```

还有一件事，至于边框，颜色，我也这样做吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T15:00:07.830

首先，twitter bootstrap 中没有 .column 但 .row

如果您想要左/右边距，请使用带有 offset1 的 span10

如果您想要顶部/底部边距，请创建一个新的 .row 并应用类似 .show-grid 的类

对于边框和颜色，对通用类使用类，对特定类使用 id。

您可以像这样在 jsFiddle 上创建模型[http://jsfiddle.net/baptme/EHutn/](http://jsfiddle.net/baptme/EHutn/)

```
<!DOCTYPE html>
<html lang="en">
<head>
<link href="css/bootstrap.css" type="text/css" rel="stylesheet">
<style>
.show-grid {
margin-bottom: 20px;
margin-top: 10px;
}
.show-grid [class*="span"] {
background-color: #EEEEEE;
border-radius: 3px 3px 3px 3px;
line-height: 30px;
min-height: 30px;
text-align: center;
}
</style>
</head>
<body>
<div class="container">
<div class="row show-grid">
<div class="span10 offset1"> 
<p>bla bla bla</p>
</div>
</div>
<div class="row show-grid">
<div class="span10 offset1">
<p>bla bla bla</p>
</div>
</div>
</div>
</body> 
</html> 
```

# python - 如何通过python脚本读取用户登录密码？

> ID：10929708
> 
> 赞同：1
> 
> 时间：2012-06-07T10:08:38.057
> 
> 标签：python

我已经使用 .py 文件中的以下命令编写了用于在特定时间关闭/打开显示器的 python 脚本。

```
passwd='Mypassword'    
subprocess.call('echo %s|sudo -S vbetool dpms on' % passwd, shell=True) 
```

它工作正常，但在这里我需要手动定义我的密码，但我需要系统自动检索密码。

有没有相同的选项，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:15:12.007

以 sudo 身份运行脚本。在尝试执行命令之前，您可以检查用户是否为 sudo：

```
import os, sys

if not os.geteuid()==0:
    sys.exit("Please run as root")

os.system("vbetool dpms on") 
```

# html - .Net 中推荐的 HTML 可读性转码库

> ID：10929711
> 
> 赞同：3
> 
> 时间：2012-06-07T10:09:04.063
> 
> 标签：html, .net, readability

**背景**
我正在尝试阅读和分析网页内容，重点关注页面的主要内容——没有菜单、侧边栏、脚本和其他 HTML 混乱。

**[我尝试了什么？](http://whathaveyoutried.com/)**

*   我试过[NReadability](https://github.com/marek-stoj/NReadability)，但它会抛出异常并在太多情况下失败。除此之外，这是一个很好的解决方案。
*   HTML Agility Pack 不是我在这里需要的，因为我也想摆脱非内容代码。

编辑：我正在寻找一个真正筛选内容的库，并且只给我页面中的“相关”文本（即对于这个页面，单词“review”、“chat”、“meta”、“about” ，并且顶部栏中的“常见问题解答”以及“许可下的用户贡献”**将不会显示。**

那么，您知道其他任何用于从网站中提取内容的稳定 .Net 库吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-26T22:49:10.790

我不知道这是否仍然相关，但这是一个我经常遇到的有趣问题，而且我在网络上没有看到太多涵盖它的材料。

我自己在几个月的时间里实现了一个工具，可以做到这一点。出于合同义务，我不能随意分享这个工具。但是，我可以自由地分享一些关于您可以做什么的建议。

## 悲哀的事实 ：（

我可以向您保证，在自己承担创建可读性工具的任务之前，我们已经尝试了所有选项。目前还没有这样的工具可以满足我们的需求。

## 那么，您要提取内容吗？

伟大的！你需要一些东西

1.  用于处理页面 HTML 的工具。我使用[CsQuery](https://github.com/jamietre/CsQuery)，这是 Jamie 在上面的答案中建议的。它非常适合选择元素。
2.  一种编程语言（在本例中为 C#，任何 .NET 语言都可以！）
3.  一种工具，可让您自行下载页面。`CsQuery`它独立于`createFromUrl`. 如果您想对页面进行预处理并获得对标题的更细粒度的控制，您可以创建自己的帮助程序类来下载页面。（尝试使用用户代理，寻找移动版本等）

## 好的，我都准备好了，接下来呢？

令人惊讶的是，在内容提取领域的研究很少。一个突出的部分是[Boilerplate Detection using Shallow Text Features](https://code.google.com/p/boilerpipe/wiki/WSDM2010Paper)。您还可以在 StackOverflow 中从论文作者那里阅读[此答案](https://stackoverflow.com/a/4240037/1348195)，以了解 Readability 是如何工作的以及一些方法是什么。

这里还有一些我喜欢的论文：

*   [使用最大子序列分割从 Web 中提取文章文本](http://www.www2009.org/proceedings/pdf/p971.pdf)
*   [通过文本标签比从 Web 中提取文本](http://web.engr.illinois.edu/~weninge1/pubs/WH_TIR08.pdf)
*   [从 HTML 中提取文本的简单方法](http://ai-depot.com/articles/the-easy-way-to-extract-useful-text-from-arbitrary-html/)

## 我读完了，实践中做了什么

根据我的经验，以下是提取内容的好策略：

*   **简单启发式**：过滤`<header>`和`<nav>`标记，删除仅包含链接的列表。删除整个`<head>`部分。根据元素的名称给予负/正分数并删除分数最低的元素（例如，具有包含名称的类的 div`navigation`可能会得到较低的分数）。这就是可读性的工作原理。

*   **元内容**。分析文本链接的密度，这本身就是一个强大的工具，您可以将链接文本的数量与 html 文本进行比较并使用它，最密集的文本通常是内容所在的位置。`CsQuery`让您可以轻松地将文本数量与嵌套链接标签中的文本数量进行比较。

*   **模板**。在同一个网站上爬取几个页面并分析它们之间的差异，常量通常是页面布局、导航和广告。您通常可以根据相似性进行过滤。这种基于“模板”的方法*非常*有效。诀窍是提出一种有效的算法来跟踪模板并检测模板本身。

*   **自然语言处理**。这可能是这里最先进的方法，使用自然语言处理工具来检测段落、文本结构以及实际内容的开始和结束位置相对简单。

*   **学习**，学习对于这类任务来说是一个非常强大的概念。在最基本的形式中，这涉及创建一个程序，该程序“猜测”要从网站上删除的一组预定义结果中的 HTML 元素，并了解哪些模式可以删除。根据我的经验，这种方法在每个站点的机器上效果最好。

*   **修复了选择器列表。**令人惊讶的是，这是非常有效的，人们往往会忘记它。如果您使用选择器从特定的几个站点抓取并手动提取内容可能是最快的事情。如果可以的话，保持简单:)

## 在实践中

混搭，一个好的解决方案通常涉及多个策略，结合几个。我们最终得到了一些非常复杂的东西，因为我们将它用于复杂的任务。在实践中，内容提取是一项*非常*复杂的任务。不要尝试创建非常笼统的东西，坚持*你*需要抓取的内容。大量测试，单元测试和回归对于这类程序*非常*重要，总是比较和阅读可读性的代码，它非常简单，它可能会让你开始。

祝你好运，让我知道这是怎么回事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T18:11:22.293

CsQuery：[https ://github.com/jamietre/csquery](https://github.com/jamietre/csquery)

这是一个 .NET 4 jQuery 端口。摆脱非内容节点可以通过多种方式完成：将`.Text`所有内容作为字符串抓取的方法；或过滤文本节点，例如

```
var dom = CQ.CreateFromUrl(someUrl); 
// or var dom = CQ.Create(htmlText);

IEnumerable<string> allTextStrings = dom.Select("*")
            .Contents()
            .Where(el => el.NodeType == NodeType.TEXT_NODE)
            .Select(el => el.NodeValue); 
```

它的工作原理与 jQuery 相同，当然，除了您还拥有 .NET 框架和 LINQ 来让您的生活更轻松。`Select`选择 DOM 中的所有节点，然后选择`Contents`每个节点的所有子节点（包括文本节点）。CsQuery 就是这样；然后使用 LINQ`Where`过滤器仅用于文本节点，并`Select`从每个节点中获取实际文本。

这将包括很多空格，它会返回所有内容。如果您只是想要整个页面的文本块，只需

```
string text = dom.Select("body").Text(); 
```

会做的。该`Text`方法合并空白，因此每条实际文本之间将有一个空格。

# actionscript-3 - “灵活”：无法在数据网格中动态更改搜索功能

> ID：10929713
> 
> 赞同：0
> 
> 时间：2012-06-07T10:09:06.530
> 
> 标签：actionscript-3, flex4, flexbuilder, flexicious

“Flexicious”是为处理 DataGrid 中非常大的数据集而构建的第三方组件库，问题是，我无法在数据网格中动态更改搜索功能。

```
 <flxs:FlexDataGridColumn id="multiselect" dataField="Name" headerText="Name"
        filterControl="NumericTextInput"  headerAlign="center">                                 
        <flxs:headerRenderer>
        <fx:Component>
        <controls:ComboBox change="changeSel(event)" width="10" height="41" dataProvider="outerDocument.searchArray}">                          

<fx:Script>                                             

<![CDATA[
    import com.flexicious.controls.ComboBox;

    import mx.controls.Alert;                               

    public function changeSel(event:Event):void{                                    

    var cbox:ComboBox = event.currentTarget as ComboBox;                                

    if(cbox.selectedItem=="Less Than"){                                         

    outerDocument.multiselect.filterOperation="LessThanEquals";                                 

    //Alert.show(""+outerDocument.multiselect.filterOperation);                             

    }else if(cbox.selectedItem=="Greator Than"){                                        

    outerDocument.multiselect.filterOperation="GreaterThanEquals";                              

    //Alert.show(""+outerDocument.multiselect.filterOperation);                         

    }else if(cbox.selectedItem=="Equal To"){                                        

    outerDocument.multiselect.filterOperation="Equals";                                     

    //Alert.show(""+outerDocument.multiselect.filterOperation);                         

    }else  if(cbox.selectedItem=="Begins With"){                                        

    outerDocument.multiselect.filterOperation="BeginsWith";                                     

    //Alert.show(""+outerDocument.multiselect.filterOperation);                         

    }                                                   

    }                                                   

    ]]>                                         

    </fx:Script>                                        

    </controls:ComboBox>
    </fx:Component> 
    </flxs:headerRenderer>
    </flxs:FlexDataGridColumn> 
```

现在，当我从呈现的组合框中选择任何选项时，我无法更改过滤器选项，但是当我更改过滤器操作时，它会向我显示更改后的操作，但在功能上它不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T16:01:47.283

您应该在更改 filterOperation 后调用 grid.rebuildFilter()

# c# - 如何在 Metro 风格的 App 中验证网站成员

> ID：10929714
> 
> 赞同：0
> 
> 时间：2012-06-07T10:09:08.493
> 
> 标签：c#, .net, security, webmatrix, asp.net-webpages

我有一个使用 WebMatrix 用户身份验证（登录/注册页面）的网站，我正在 Windows 8 发布预览版中制作一个应用程序，并且想知道是否可以对我的应用程序的用户进行身份验证（让我的应用程序的用户登录到我的应用程序）如果他们是我网站的注册会员？如果他们不是，允许他们通过我的应用程序注册 - 但似乎在 Metro 应用程序中大多数数据库连接是不可能的 - 所以我不知道该怎么做。有人可以帮忙吗？

我已经搜索了数周，但仍然没有大量的官方文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:19:57.230

您**永远不**应该允许任何客户端或用户程序直接访问您的数据库（甚至不允许读取访问权限）。人们会以一种或另一种方式滥用它，如果他们的访问权限仅限于阅读，他们可能会尝试利用漏洞来获得写访问权限。如果你想要一个突出的例子，Super Meat Boy 正是这样做的，他们在去年的圣诞节期间遇到了很多数据库问题和滥用行为（当时有游戏在 (Steam) 销售，所以他们有很多额外的沮丧玩家！ ）。

我从来没有使用过 WebMatrix，所以我可能有点离题，但总的来说，你应该有几种可能的方法——所有这些方法都比直接访问数据库要好：

*   使用一些提供的远程访问（这可能是一些额外的类或插件或其他；如果可用）。
*   编写您自己的远程访问工具。这本质上是一些特殊的网站，接受/返回由您的程序解释的文本或数据。例如，您可以在 HTTP POST 请求中发布登录凭据，它可以返回`ok`或`failed`类似的东西。
*   本质上是伪造一个 Web 浏览器并访问 WebMatrix 提供的标准 URL/脚本/系统。

# c# - 如何优化从 ASP.NET MVC 3 中下载的文件创建内存 zip 存档

> ID：10929721
> 
> 赞同：1
> 
> 时间：2012-06-07T10:09:53.063
> 
> 标签：c#, asp.net, .net, asp.net-mvc

我正在制作一个控制器，它应该返回从另一台服务器下载的文件的压缩列表（放置在同一个数据中心）

我为这一刻做了什么：

```
/// <summary>
/// Enables processing of the result of an action method by a custom type that inherits from the <see cref="T:System.Web.Mvc.ActionResult"/> class.
/// </summary>
/// <param name="context">The context in which the result is executed. The context information includes the controller, HTTP content, request context, and route data.</param>
public override void ExecuteResult(ControllerContext context)
{
    context.HttpContext.Response.ContentType = "application/zip";
    context.HttpContext.Response.CacheControl = "private";
    context.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
    context.HttpContext.Response.AddHeader("content-disposition", string.Format("attachment; filename=\"{0}\"", this.ResultFileName));

    var buffer = new byte[BufferSize];

    using (var zippedUploadStream = new ZipOutputStream(context.HttpContext.Response.OutputStream))
    {
        zippedUploadStream.SetLevel(0);

        foreach (var url in this.Urls)
        {
            var request = WebRequest.Create(url);
            var response = request.GetResponse();
            var downloadStream = response.GetResponseStream();

            if (downloadStream != null)
            {
                var zipEntry = new ZipEntry(Path.GetFileName(response.ResponseUri.ToString()));
                zippedUploadStream.PutNextEntry(zipEntry);

                int read;
                while ((read = downloadStream.Read(buffer, 0, buffer.Length)) > 0)
                {
                    zippedUploadStream.Write(buffer, 0, read);
                    context.HttpContext.Response.Flush();
                }
            }

            if (!context.HttpContext.Response.IsClientConnected)
            {
                break;
            }
        }

        zippedUploadStream.Finish();
    }

    context.HttpContext.Response.Flush();
    context.HttpContext.Response.End();
} 
```

让我害怕的是，所有操作都是同步的。

如果我离开这个实现，对性能的影响会有多大？

是否可以从另一个线程访问 context.HttpContext.Response 对象？

可以使用异步调用优化此代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T04:52:04.173

您真的不想在 Web 请求线程中执行这样的任务。这些类型的长时间运行、系统资源密集型任务最好使用某种排队或消息总线系统来执行。我推荐类似[NServiceBus](http://nservicebus.com/ "服务总线")的东西来完成这项任务。您可以使用 NServiceBus 将消息排入队列，而不是从单个 Web 请求线程中同步创建多个 Web 请求。然后，NServiceBus 将获取这些消息中的每一个（可能是异步的，取决于配置）并分别处理它们。这样做的好处是您可以获得 MSMQ 的可靠性和持久性优势，NServiceBus 将其用作其消息队列。

# python - 在python中遍历列表的最有效方法是什么？

> ID：10929724
> 
> 赞同：33
> 
> 时间：2012-06-07T10:09:57.080
> 
> 标签：python, performance, list

假设我有一个项目列表：

```
x = [1, 2, 3, 4, 5] 
```

我需要为这些项目中的每一个执行一些功能。在某种情况下，我需要返回一个项目的索引。

哪个是最好和最有效的方法？

```
for item in list:
    .... 
```

或者

```
for i in range(len(list)):
    .... 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-07T10:11:15.410

```
for item in list: 
```

它显然是函数调用较少的一个。

如果您想随时获取项目的索引，请使用[enumerate](http://docs.python.org/library/functions.html#enumerate)像这样

```
for pos, item in enumerate(collection): 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-07T10:37:47.793

```
def loop_1(data):
    for i in range(len(data)):
        print(data[i])

def looper_2(data):
    for val in data:
        print(val) 
```

用[dis](http://docs.python.org/library/dis.html)检查给我们以下 loop_1 的字节码：

```
 12       0 SETUP_LOOP              40 (to 43)
          3 LOAD_GLOBAL              0 (range)
          6 LOAD_GLOBAL              1 (len)
          9 LOAD_FAST                0 (data)
         12 CALL_FUNCTION            1
         15 CALL_FUNCTION            1
         18 GET_ITER            
    >>   19 FOR_ITER                20 (to 42)
         22 STORE_FAST               1 (i)

13       25 LOAD_GLOBAL              2 (print)
         28 LOAD_FAST                0 (data)
         31 LOAD_FAST                1 (i)
         34 BINARY_SUBSCR       
         35 CALL_FUNCTION            1
         38 POP_TOP             
         39 JUMP_ABSOLUTE           19
    >>   42 POP_BLOCK           
    >>   43 LOAD_CONST               0 (None)
         46 RETURN_VALUE 
```

loop_2 的字节码如下所示：

```
17        0 SETUP_LOOP              24 (to 27)
          3 LOAD_FAST                0 (data)
          6 GET_ITER            
    >>    7 FOR_ITER                16 (to 26)
         10 STORE_FAST               1 (val)

18       13 LOAD_GLOBAL              0 (print)
         16 LOAD_FAST                1 (val)
         19 CALL_FUNCTION            1
         22 POP_TOP             
         23 JUMP_ABSOLUTE            7
    >>   26 POP_BLOCK           
    >>   27 LOAD_CONST               0 (None)
         30 RETURN_VALUE 
```

第二个版本显然更好。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T12:57:56.533

另一种可能的解决方案是使用`numpy`非常有效的方法，对于大型列表可能甚至比列表理解或 for 循环更有效。

```
import numpy as np

a = np.arange(5.0)   # a --> array([0., 1., 2., 3., 4.])

# numpy operates on arrays element by element 
#
b =3.*a              # b --> array([0., 3., 6., 9., 12.]) 
```

这是一个非常简单的操作，但您可以使用数组作为公式中的简单参数来获得更复杂的操作。对于大型数组，这可能比列表解析要快得多，并且它使代码更清晰，更易于阅读（无需创建函数来映射列表解析）。您还可以使用索引和切片来定制您想要做的事情：

如果您想访问实际的索引位置，请使用 ndenumerate

```
# b is as above
for i, x in np.ndenumerate(b):
    print i, x 
```

这个 for 循环的输出是：

```
(0,) 0.0 
(1,) 3.0 
(2,) 6.0 
(3,) 9.0 
(4,) 12.0 
```

注意： numpy 以元组形式返回的索引以处理其他维度。在这里，我们只有一个维度，因此您必须解包元组才能获取元素的索引。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-07T11:23:49.400

显然`for i in range(len(list)):`会更慢 - 在 python 2 中，它相当于：

```
list2 = range(len(list))

for i in list2:
    ... 
```

如果这样更快，那么这将更快，对吧？

```
list2 = range(len(list))
list3 = range(len(list2))
list4 = range(len(list3))

for i in list4:
    ... 
```

# php - 如何在通过php存储在文件夹中时更改图像名称

> ID：10929726
> 
> 赞同：1
> 
> 时间：2012-06-07T10:10:00.230
> 
> 标签：php, mysql, html, database, image

我正在一个网站上工作，每个用户都可以上传多个图像..我能够上传图像并存储在一个文件夹中，但是当两个不同的用户具有相同的图像名称时我遇到了问题，因为我将图像存储在一个文件夹。在我存储信息的数据库中，序列号是唯一键..我想通过添加序列号来重命名图像。使用图像名称使其独一无二...请帮助我..去做..

```
my form is as:-

<form action="upload_file.php" method="post" enctype="multipart/form-data">
<input type="file" name="file" id="file" /> </br><br/>
<input id="submit" type="submit" value="submit" /> 
```

和 upload_file.php 是： -

```
require_once('dbconnect.inc.php');
$db_name="uploaddata";
$tbl_name="data";
$db_selected=mysql_select_db("$db_name")or die("cannot select DB");
if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/pjpeg"))
    && ($_FILES["file"]["size"] > 0))
 {
  if ($_FILES["file"]["error"] > 0)
    {
    echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
    }
  else
    {
    $Image_name=$_FILES["file"]["name"];
    $Image_type=$_FILES["file"]["type"];
     //upload is the folder of storing images       
     if (file_exists("upload/" . $_FILES["file"]["name"]))
      {
     $_SESSION['response'] = " already exists please give some different name ";
     header("Location: testimage.php");
      }
    else
      {

      move_uploaded_file($_FILES["file"]["tmp_name"],
      "upload/" . $_FILES["file"]["name"]);
             $login_data="INSERT INTO $tbl_name(Image_name,Image_type) VALUES('$Image_name','$Image_type')";

        $login_result=mysql_query($login_data) or die(mysql_error());
        header("Location: abc.php");
          }
    }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:26:45.160

您可以使用 move_uploaded_file 函数来更改目标文件的名称，例如

```
move_uploaded_file($_FILES["file"]["tmp_name"], "upload/" . $serial_number . '_' . $_FILES["file"]["name"] . ); 
```

您也可以使用此[功能](http://php.net/manual/en/function.rename.php)

```
bool rename ( string $oldname , string $newname [, resource $context ] ); 
```

# php - 使用 javascript 检测浏览器/版本与在服务器端检测？

> ID：10929727
> 
> 赞同：0
> 
> 时间：2012-06-07T10:10:00.273
> 
> 标签：php, javascript, html, apache, http

我们正在构建一个书签，我们想知道我们是否可以在客户端使用 JavaScript 检测浏览器和版本号，而不是使用代理在服务器端进行检测。

我们会将检测结果推送到主请求的服务器。

问题是，这种方法能否更好、更准确？或者两者都可以犯同样的错误，JavaScript 本身从用户代理计算（可以通过插件/代理更改）。

**重要的**

请不要忘记我们正在构建一个**书签**，因此我们无法加载像 Modernizr 和 JQuery 这样的花哨的工具，因为它不能快速运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:21:20.157

我可能错了，但我认为 JS 也使用了用户代理。到目前为止，我还没有看到不是从用户代理计算的 JS 浏览器检测代码。如果我错了，请纠正我。如果这有助于您尝试使用 JQuery`$.support`属性来检测/支持您需要的特定功能，而不是依赖于浏览器名称和版本。伪造您的用户代理很容易。

根据[this](http://www.javascriptkit.com/javatutors/navigator.shtml)对象使用`navigator`用户代理标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:42:35.733

为什么要检测用户代理？您是否要根据用户代理运行不同的 javascript？JQuery 和/或 Mootools 提供了一个抽象层来处理不同的浏览器 JS。此外，媒体查询和其他 API 可以检测视口大小、分辨率等以促进内容适应。如果您想为不同的用户代理提供完全不同的资源，那么服务器端内容协商是更可取的。在这种情况下，您可以使用 Apache Mobile Filter（基于 WURFL 设备存储库构建）之类的东西从用户代理字符串中检测浏览器功能。

最后，如果您想确保网络/代理不会篡改您的请求，请在以下 HTTP 请求和响应标头中使用以下指令：

```
Cache-Control: no-transform 
```

这可以在使用 JQuery 的 AJAX 请求之前设置（或简单地在 XmlHttpRequest 对象上设置），也可以在您的 Apache 配置中为响应设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:50:55.933

你真的不应该检测浏览器，而是检测可用的功能，除非你的整个任务归结为完全一样 - 比如从某些统计目的检测浏览器，或者某些浏览器存在一些特定问题，成功报告支持某个功能，但不真的支持它还是有缺陷的（想想 IE6 的 PNG 支持）。如果您不想手动编码，[Modernizr等可以帮助您进行特征检测。](http://modernizr.com/)

如果您仍然想要浏览器检测，那么是的，您从客户端 JS 获得的机会比从服务器获得的机会多。在服务器上，您只限于分析可以被代理或客户端本身剥离或损坏的 User-Agent 标头，但在 JS 中，除了检查用户代理字符串外，您还可以检测环境中浏览器特定对象的存在或在某些功能的实现中检查特定于浏览器的怪癖，以准确检测您真正使用的浏览器。但唯一的缺点是，自然地，用户必须启用 JS。

As a simple example, checking if you have access to `ActiveXObject`, will tell you that you're in Internet Explorer and checking if there's native `JSON.parse` available can show if it is version 7 in standard mode or older/compatibility mode instead, no matter what how much user agent string is mangled.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T10:20:29.440

也许这会有所帮助

```
<div id="example"></div>

<script type="text/javascript">

txt = "<p>Browser CodeName: " + navigator.appCodeName + "</p>";
txt+= "<p>Browser Name: " + navigator.appName + "</p>";
txt+= "<p>Browser Version: " + navigator.appVersion + "</p>";
txt+= "<p>Cookies Enabled: " + navigator.cookieEnabled + "</p>";
txt+= "<p>Platform: " + navigator.platform + "</p>";
txt+= "<p>User-agent header: " + navigator.userAgent + "</p>";

document.getElementById("example").innerHTML=txt;

</script> 
```

参考：[http ://www.w3schools.com/js/js_browser.asp](http://www.w3schools.com/js/js_browser.asp)

# php - PHP和jQuery之间的通信问题

> ID：10929730
> 
> 赞同：1
> 
> 时间：2012-06-07T10:10:06.270
> 
> 标签：php, jquery

我有一个从 PHP 生成的页面，如下所示：

```
<?php
    //In my original code, this is retrieved from databas..
    $users = array(
        array('id'=>1, 'login'=>'login1', 'email'=>'email1')
    );  
    foreach($users as $user){
        echo '<tr><td>'.$user['login'].'</td><td>'.$user['email'].'</td><td><button class="button-delete">Delete</button></td></tr>';
    }
?> 
```

然后，在前面我有这个脚本：

```
$('.button-delete').click(function(){
    var id=0;
    alert(id);
}); 
```

我的目标是让删除按钮执行 ajax 调用来删除用户。直到现在我还没有到那里，我的问题是如何获取用户 ID？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T10:12:16.767

**[您可以在按钮数据](http://api.jquery.com/data/)**中发送 id并在之后轻松获取它。

```
<?php
    //In my original code, this is retrieved from databas..
    $users = array(
        array('id'=>1, 'login'=>'login1', 'email'=>'email1')
    );  
    foreach($users as $user){
        echo '<tr><td>'.$user['login'].'</td><td>'.$user['email'].'</td><td><button class="button-delete" data-id="'.$user['id'].'">Delete</button></td></tr>';
    }
?>

$('.button-delete').click(function(){
    var id=$(this).data('id');
    alert(id);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:21:40.240

我通常会这样做：

```
<?php
    //note the change from button tag to anchor tag
    $users = array(
        array('id'=>1, 'login'=>'login1', 'email'=>'email1')
    );  
    foreach($users as $user){
        echo '<tr><td>'.$user['login'].'</td><td>'.$user['email'].'</td><td><a href="/link/to/delete/id/'.$user['id'].'/" class="button-delete">Delete</a></td></tr>';
    }
?> 
```

然后在 jQuery 中

```
$(document).ready(function(){
    $('.button-delete').click(function(){
        var $this = $(this);
        //Make an AJAX request to the delete script using the href attribute as url
        $.get($this.attr('href'), function(response) {
            //Inside your php script echo out 1 if the delete was successful.
            if(response) {
                //remove the parent row
                $this.parents('tr').fadeOut(1000, function(){
                    $(this).remove();
                });
            }
        });
        return false;
    });
}); 
```

我还没有测试过代码，但它应该可以工作。请记住，有很多方法可以做到这一点，这是我的首选方式。**我的观点是，您不一定需要将 id 作为单个变量。**

# r - R中向量中相似元素的加权平均值

> ID：10929732
> 
> 赞同：2
> 
> 时间：2012-06-07T10:10:09.710
> 
> 标签：r, weighted-average

我有两个向量`x`和`w`。 `w`是权重的数值向量，其长度与`x`赋予 的元素使用的权重相同`x`。

我想给出向量`x`中差异很小的元素的加权平均值（例如 1e-1 或 1e-2），以减少向量的长度`x`。例如，这些向量如下：

```
 w =c(1.459032e-01, 1.535375e-04, 1.829973e-04, 1.057226e-01, 2.833444e-04,
         2.559756e-04, 6.440060e-03, 6.294748e-02, 5.984383e-04, 2.772186e-04,
         4.869825e-05, 8.212092e-04, 1.233256e-01, 2.558964e-04, 3.990816e-03,
         1.665515e-01, 5.760450e-02, 5.803227e-04, 1.738252e-02, 2.431885e-02,
         1.280266e-03, 1.000000e-03, 1.000117e-03, 2.750921e-03, 3.588227e-03,
         3.489142e-04, 5.117452e-04, 5.117502e-04, 3.262697e-01, 3.060975e-01,
         3.089723e-02, 8.603438e-04, 8.603438e-04, 2.558906e-04, 2.558906e-04,
         7.559512e-04, 1.054060e-03, 8.318323e-04, 8.602753e-04, 8.603439e-04,
         8.269244e-04, 8.602833e-04, 8.979898e-04, 7.745014e-04, 5.117474e-04,
         5.691315e+00, 1.780994e+00, 2.416622e-03, 2.441406e-07, 2.441406e-07,
         3.065381e-05, 2.441406e-07, 2.441328e-07, 2.441324e-07, 2.884505e-07,
         2.441409e-07, 2.441411e-07, 2.441399e-07, 2.441406e-07, 2.441400e-07,
         2.441397e-07, 2.441406e-07, 2.441406e-07, 2.441406e-07, 2.441406e-07,
         2.441406e-07, 2.441406e-07, 2.441404e-07, 2.441406e-07, 1.920616e-03)

     x =c(0.3585121, 0.4399527, 0.5643820, 0.6776966, 0.7542579, 0.8374223, 0.9130900,
          0.9999472, 1.0793771, 1.1249381, 1.1700218, 1.2630534, 1.4131273, 1.4795500,
          1.5388979, 1.6587155, 1.7106946, 1.8248076, 1.9035620, 1.9512584, 2.0362027,
          2.1065388, 2.1525816, 2.2617268, 2.6090246, 2.7180285, 2.7704006, 2.8768953,
          2.9358206, 3.0000000, 3.0655239, 3.1266109, 3.1730078, 3.2681434, 3.3125953,
          3.3620683, 3.4191661, 3.4851182, 3.5373484, 3.5998778, 3.6622245, 3.7306358,
          3.8066598, 3.8726307, 3.9614728, 4.0515907, 4.0998298, 4.1870790, 0.4429813,
          0.5619184, 0.6437753, 0.6856169, 1.1212656, 1.2513217, 1.7290070, 1.9762596,
          2.0103108, 2.0440587, 2.2404542, 2.2742832, 2.5947769, 3.1292874, 3.1730608,
          3.4075734, 3.4651103, 3.5266852, 3.5886457, 3.7197153, 3.7967120, 4.0553866) 
```

我知道如何根据权重对向量 x 进行排序，但是如何识别向量 x 中的相似值，然后得到它们的加权平均值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:35:39.843

**更新的答案**

像这样的东西怎么样...？（见下面的代码）

我将您的原始向量称为 origx 和 origw，因此重新排序的向量是 x 和 w。该代码适用于被破坏的 x 和 w（称为 xtemp 和 wtemp）的临时副本，并在变量 xnew 和 wnew 中构建新的 x 和 w（即您寻找的“较短”向量）。

简单来说，代码查看 xtemp 并找到第一个超过阈值大小（例如 0.05）的间隙，并将从 xtemp 开始运行到那个“大”间隙的所有元素组合在一起。（如果没有这样的差距，则将整个 xtemp 视为一个组。）然后该代码将该组转换为称为 wgroup 的单个权重（组权重的总和）和称为 xgroup 的单个代表性 x 值（例如 xgroup* wgroup 与所有组元素的加权和相同）。然后我们将 xgroup 和 wgroup 保存到向量 xnew 和 wnew 中，清除当前组（通过从 xtemp 和 wtemp 中消除它），然后以相同的方式继续操作，直到所有内容都被分组。

给它一个测试运行，看看你的想法:)

```
origw = c(1.459032e-01, 1.535375e-04, 1.829973e-04, 1.057226e-01, 2.833444e-04,
          2.559756e-04, 6.440060e-03, 6.294748e-02, 5.984383e-04, 2.772186e-04,
          4.869825e-05, 8.212092e-04, 1.233256e-01, 2.558964e-04, 3.990816e-03,
          1.665515e-01, 5.760450e-02, 5.803227e-04, 1.738252e-02, 2.431885e-02,
          1.280266e-03, 1.000000e-03, 1.000117e-03, 2.750921e-03, 3.588227e-03,
          3.489142e-04, 5.117452e-04, 5.117502e-04, 3.262697e-01, 3.060975e-01,
          3.089723e-02, 8.603438e-04, 8.603438e-04, 2.558906e-04, 2.558906e-04,
          7.559512e-04, 1.054060e-03, 8.318323e-04, 8.602753e-04, 8.603439e-04,
          8.269244e-04, 8.602833e-04, 8.979898e-04, 7.745014e-04, 5.117474e-04,
          5.691315e+00, 1.780994e+00, 2.416622e-03, 2.441406e-07, 2.441406e-07,
          3.065381e-05, 2.441406e-07, 2.441328e-07, 2.441324e-07, 2.884505e-07,
          2.441409e-07, 2.441411e-07, 2.441399e-07, 2.441406e-07, 2.441400e-07,
          2.441397e-07, 2.441406e-07, 2.441406e-07, 2.441406e-07, 2.441406e-07,
          2.441406e-07, 2.441406e-07, 2.441404e-07, 2.441406e-07, 1.920616e-03)

origx = c(0.3585121, 0.4399527, 0.5643820, 0.6776966, 0.7542579, 0.8374223, 0.9130900,
          0.9999472, 1.0793771, 1.1249381, 1.1700218, 1.2630534, 1.4131273, 1.4795500,
          1.5388979, 1.6587155, 1.7106946, 1.8248076, 1.9035620, 1.9512584, 2.0362027,
          2.1065388, 2.1525816, 2.2617268, 2.6090246, 2.7180285, 2.7704006, 2.8768953,
          2.9358206, 3.0000000, 3.0655239, 3.1266109, 3.1730078, 3.2681434, 3.3125953,
          3.3620683, 3.4191661, 3.4851182, 3.5373484, 3.5998778, 3.6622245, 3.7306358,
          3.8066598, 3.8726307, 3.9614728, 4.0515907, 4.0998298, 4.1870790, 0.4429813,
          0.5619184, 0.6437753, 0.6856169, 1.1212656, 1.2513217, 1.7290070, 1.9762596,
          2.0103108, 2.0440587, 2.2404542, 2.2742832, 2.5947769, 3.1292874, 3.1730608,
          3.4075734, 3.4651103, 3.5266852, 3.5886457, 3.7197153, 3.7967120, 4.0553866)

reord = order(origx)
x = origx[reord]
w = origw[reord]

xnew = wnew = c()

thresh = 0.05
xtemp = x
wtemp = w
while (length(xtemp) > 0) {
nextgap = which(diff(xtemp) > thresh)[1]
if (!is.na(nextgap)) {
    group = seq_len(nextgap)
} else {
    group = seq_along(xtemp)
}
xgroup = sum((xtemp*wtemp)[group])/sum(wtemp[group])
wgroup = sum(wtemp[group])
xnew = c(xnew, xgroup)
wnew = c(wnew, wgroup)
xtemp = xtemp[-group]
wtemp = wtemp[-group]
} 
```

**OLD RESPONSE IS BELOW（已被上述内容取代...）**

我建议重新排序 x 和 w 以使 x 严格按照数字顺序排列，然后使用以下`diff`函数：

```
reord = order(x)
x2 = x[reord]
w2 = w[reord]
which(diff(x2)<0.01) 
```

上面的最后一个命令指示`x2`（的排序版本`x`）中的哪些元素在下一个最高元素的 0.01 范围内。第一个值是 2，因为 x2 的元素 2 和 3 就是这样一个例子：`x2[2]=0.4399527`和`x2[3]=0.4429813`.

另外，如果你这样做

```
sort(diff(x2)) 
```

您可以看到按数字顺序排列的所有差异，这可能有助于您确定合适的截止值。

# javascript - gmap3清除标记在chrome中不起作用

> ID：10929736
> 
> 赞同：0
> 
> 时间：2012-06-07T10:10:19.010
> 
> 标签：javascript, jquery

请帮助解决此问题。

清除标记在 FF 和 IE 中有效，但在 chrome 中无效？

```
 function addMarker(lati, longi, id, name) {
    $('#dispatcher').gmap3(
      { action: 'addMarker',
        lat: lati,
        lng: longi,
        tag: name,
        options: {
            icon: new google.maps.MarkerImage('img/pin.png')
        }
      }
      );
}

function clearMarker(name) {
        $('#dispatcher').gmap3({ 
            action: 'clear',
            tag: name
        });

 } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:15:32.397

清除了 chrome 中的缓存 - 已修复.. 抱歉

# css - 不能将 @font-face 与 Font Squirrel 转换一起使用

> ID：10929744
> 
> 赞同：0
> 
> 时间：2012-06-07T10:11:23.750
> 
> 标签：css

我一直在尝试在我的网页上添加我自己的字体，但我仍然不知道如何使用 Font Squirrel 转换器。我下载了一个免费的 .ttf 字体，并使用生成器进行了转换，如下所示：

```
@font-face 
{
font-family: 'AbiteRegular';
src: url('fonts/abite-webfont.eot');
src: url('fonts/abite-webfont.eot?#iefix') format('embedded-opentype'),
     url('fonts/abite-webfont.woff') format('woff'),
     url('fonts/abite-webfont.ttf') format('truetype'),
     url('fonts/abite-webfont.svg#AbiteRegular') format('svg');
font-weight: normal;
font-style: normal;
} 
```

fonts是我转换 .ttf 文件的文件夹*。*我像这样使用它：

```
body 
{
font-family: 'AbiteRegular';
} 
```

所有这些配置都在 .css 文件中。但正文忽略了这一点。你知道为什么会发生吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:15:16.947

你的字体可能有问题`URL`

```
url('fonts/abite-webfont.eot');... 
```

或者您使用的浏览器不支持动态字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:21:45.060

你检查过其他浏览器吗？检查 IE、Firefox、Chrome。如果甚至没有一个浏览器显示字体，那么您的文件夹结构可能是错误的。

你有这样的文件夹结构吗？包含`@font-face`声明（比如`font.css`）的 css 文件应该以这样的方式放置，即它旁边有一个文件夹，命名`fonts`并且字体文件应该在该文件夹内。

```
/font.css
/fonts/abite-webfont.eot
/fonts/abite-webfont.woff
/fonts/abite-webfont.ttf
/fonts/abite-webfont.svg 
```

这应该适用于所有浏览器，包括 IE 6、IE 7 和 IE 8。只要确保路径正确即可。而且，`body`声明应该在`font.css`声明之后，即`font.css`应该包含在任何样式之前。

希望这可以帮助！:)

# windows - NtQueryInformationProcess 的替代方法来获取命令行

> ID：10929745
> 
> 赞同：3
> 
> 时间：2012-06-07T10:11:27.627
> 
> 标签：windows, windows-7, device-driver, minifilter

您好，我正在使用**[NtQueryInformationProcess(](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684280%28v=vs.85%29.aspx) ) 在 Windows 7 上检索当前进程的命令行**（通过 NtQueryInformationProcess() 返回的 PEB 中的 RTL_USER_PROCESS_PARAMETERS）。

但问题是这个**NtQueryInformationProcess 函数及其返回的结构是**操作系统内部的，并且**可能会从一个版本的 Windows 更改为另一个版本**

所以请提出一些**相同的替代方案以保持应用程序的兼容性**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:51:40.227

对于当前进程很容易（在用户模式下），只需使用[GetCommandLine](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683156%28v=vs.85%29.aspx)。对于不同的进程，您必须在 Win32 API 之外进行：

WMI：[Win32_Process.CommandLine](http://msdn.microsoft.com/en-us/library/aa394372.aspx)

另见：[旧新事物](http://blogs.msdn.com/b/oldnewthing/archive/2009/02/23/9440784.aspx)

# c# - 如何读取轨迹

> ID：10929751
> 
> 赞同：1
> 
> 时间：2012-06-07T10:11:56.693
> 
> 标签：c#

我有一个 snipnet，它写入要跟踪的用户名。

```
Trace.WriteLine("Current User: " + userIdentity.Name); 
```

如何阅读此信息。我在网上做了很好的搜索，没有运气。我们可以读取默认跟踪吗？

预先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:15:28.997

**默认跟踪侦听器写入控制台。** 您可以使用 CTRL+W ,O (View->Output) 在调试器中查看其输出

你需要一个合适的 Trace 监听 [器 http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.tracelistener.aspx)

当您使用`Trace.WriteLine()` 所有跟踪侦听器时，请捕获并编写

我个人最喜欢的是[XmlWriterTraceListener](http://msdn.microsoft.com/en-us/library/system.diagnostics.xmlwritertracelistener.aspx)

就这样做

`Trace.Listener.Add(new XmlTraceListener (tracefilepath));`

使用`Trace.WriteLine()`并观察它如何创建一个可以使用[服务跟踪查看器工具 (SvcTraceViewer.exe)轻松查看的漂亮 xml 文件](http://msdn.microsoft.com/en-us/library/ms732023.aspx)

# php - 使用 TortoiseGit 克隆存储库时得到奇怪的文件名

> ID：10929754
> 
> 赞同：0
> 
> 时间：2012-06-07T10:11:59.587
> 
> 标签：php, version-control, repository, tortoisegit

嗨，我一直在使用 Tortoise 从朋友站点克隆存储库 - 出于某种原因，即使我可以看到所有文件都是 0kb 并且都以 .i 结尾 - 例如 index.php 现在是 index.php.i

谁能解释克隆发生了什么 - 我在设置它时犯了错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T16:37:39.403

已修复：删除并重新克隆，所有文件似乎都可以使用。

# php - 建立文件管理系统

> ID：10929757
> 
> 赞同：0
> 
> 时间：2012-06-07T10:12:09.737
> 
> 标签：php, mysql, architecture, scalability

客户希望为他们的公司提供一个基于 Web 的文档管理系统，该系统由多个部门组成。我以前从未建造过这样的东西，所以有点迷失从哪里开始。我打算使用 php，mysql 和 codeiginter 构建它他们的要求包括

*   网页界面
*   主要是办公文档；单词，pdf，文本
*   多用户访问文档
*   版本控制
*   入住和退房

我将不胜感激任何指向正确方向的信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-04-20T09:54:15.167

我对如何构建软件有一点了解，但我知道可以满足客户所有需求的软件。在市场上，有更多的软件供应商，如项目管理、计费软件、发票软件、会计软件等。

根据您客户的需求，“文件管理系统软件”将是最合适的。

1.  网页界面
2.  项目清单
3.  主要是办公文档；单词，pdf，文本
4.  多用户访问文档版本控制
5.  入住和退房

**网页界面**

文档管理系统是在线工具，您可以在其中通过 Internet 或 Web 界面访问软件。文档管理系统的另一个好处是您可以从不同的位置登录软件并查看正在进行的、已完成的和未完成的任务

**项目清单**

您可以轻松地以排列格式列出您的产品或服务的项目。此外，您可以列出正在进行和已完成的任务

**主要是Office Docs、Word、PDF、Text**

DMS 软件中的所有文件都是 MS office 格式，如 word、PDF、PTP 和文本格式（根据您的客户的需求）

**多用户登录访问**

在 DMS 系统中，您可以轻松创建具有有限访问权限的多个用户登录

**入住和退房**

签入和签出不是 DMS 系统的一部分，但您可以在软件中添加这些内容。

**如果您有兴趣获得该软件，您可以获得 Laserfiche 文档管理系统**

# asp.net-mvc - 自动完成 jQuery 仅在浏览器重启后有效

> ID：10929759
> 
> 赞同：1
> 
> 时间：2012-06-07T10:12:24.050
> 
> 标签：asp.net-mvc, jquery-autocomplete

我在 ASP.NET MVC4 中使用 jQuery Autocomplete。我第一次尝试自动完成时，它不起作用。（在控制器中设置断点，但没有命中）然后我重新启动浏览器，一切正常。这是我的代码：

```
 <div class="ui-widget">
        <input type="search" name="Gemeente" class="ui-autocomplete" placeholder="Gemeente" />
    </div>

  <script type="text/javascript" language="javascript">
        $(document).ready(function () {
            $('.ui-autocomplete').autocomplete({
                source: '@Url.Action("../RelatieZoeken/AutocompleteGemeenten")',
                minLength: 2,
                delay: 10
            });
        });
    </script>

public ActionResult AutocompleteGemeenten(string term)
    {
        List<string> items = new List<string>();

        items = _zoekClient.GetGemeenten();

        List<string> filteredItems = new List<string>();

        filteredItems = items.Where(test => test != null && test.ToLower().StartsWith(term.ToLower())).Take(5).ToList();

        return Json(filteredItems, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:07:53.707

尝试修改**minLength = 1**：

minLength ：在自动完成激活之前用户必须输入的最少字符数。零对于只有几个项目的本地数据很有用。当有很多项目时应该增加，其中单个字符将匹配几千个项目。

例如。

```
 <script type="text/javascript" language="javascript">
        $(document).ready(function () {
            $('.ui-autocomplete').autocomplete({
                source: '@Url.Action("../RelatieZoeken/AutocompleteGemeenten")',
                minLength: 1,
                delay: 10
            });
        });
    </script> 
```

# c# - 对也具有对象类型成员的实例的字符串字段使用 UniqueFieldValueConstraint 时出现 db4o 错误？

> ID：10929761
> 
> 赞同：1
> 
> 时间：2012-06-07T10:12:32.183
> 
> 标签：c#, exception, stack-overflow, db4o

我想我可能在 db4o 8.0 for .NET 中遇到了一个可能的错误，因为下面会产生 StackOverFlow 异常。

```
public static void Test() {
    var config = Db4oEmbedded.NewConfiguration();
    var field = "ID";
    config.Common.ObjectClass(typeof(TestClass)).ObjectField(field).Indexed(true);
    config.Common.Add(new UniqueFieldValueConstraint(typeof(TestClass), field));
    var db = Db4oEmbedded.OpenFile(config, "test.yap");
    db.Store(new TestClass());
    db.Commit();
}

public class TestClass {
    //[NonSerialized]
    public object DataMember = new object();

    public string ID;
} 
```

就我而言，我能够将 DataMember 标记为 Transient ([NonSerialized]) 并避免该问题。

然而，这使得在谓词中使用 DataMember 成为不可能（在我的情况下，DataMember 是一个简单的对象，用作所有属性中的锁，但就像没有调用 TestClass 的构造函数，因为 DataMember 在谓词中为空） .

你知道为什么它不起作用吗？我要提交错误报告吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:40:22.910

我已经提交了一个被认为是主要的错误：http: [//tracker.db4o.com/browse/COR-2296](http://tracker.db4o.com/browse/COR-2296)。

# c++ - NULL 的非指针等价物是什么？

> ID：10929764
> 
> 赞同：13
> 
> 时间：2012-06-07T10:12:36.077
> 
> 标签：c++, null

为我的不当术语道歉。

如果条目不存在，我有一段代码返回 NULL 指针：

```
ObjectType * MyClass::FindObjectType( const char * objectTypeName )
{
    if ( objectTypeMap.find( objectTypeName ) == objectTypeMap.end() )
    {
        Msg( "\n[C++ ERROR] No object type: %s", objectTypeName );
        return NULL;
    }
    else
        return &objectTypeMap[ objectTypeName ];
} 
```

我想做同样的事情，但这次返回一个对象而不仅仅是一个指针。以下代码没有给我任何编译器错误（这让我感到惊讶）：

```
ObjectType MyClass::FindObjectType( const char * objectTypeName )
{
    if ( objectTypeMap.find( objectTypeName ) == objectTypeMap.end() )
    {
        Msg( "\n[C++ ERROR] No object type: %s", objectTypeName );
    }
    else
        return objectTypeMap[ objectTypeName ];
} 
```

使用指针，我可以检查是否找不到条目，​​如下所示：

```
if ( FindObjectType( objectType ) == NULL )
    //Do something 
```

如何对返回的对象执行等效检查？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T10:13:51.470

对象没有语言级别的等价物。

一种选择是创建一个“哨兵”对象，该对象保证与任何“真实”对象比较不相等，并返回：

```
class ObjectType {
public:
    static const ObjectType null;

    bool operator==(const ObjectType &rhs) const { /* need an appropriate comparison test */ }

    ...
};

ObjectType ObjectType::null(/* something unique */);

...

ObjectType foo(const char *objectTypeName) {
    if (cond) {
        return objectTypeMap[objectTypeName];
    } else {
        return ObjectType::null;
    }
}

...

if (foo(objectType) == ObjectType::null) {
    std::cout << "Returned the null object\n";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T11:49:50.697

以下代码没有给出错误，因为标准非常保守。

一些代码结构非常复杂，编译器无法知道是否可以到达函数的末尾。因此标准说编译器不必证明函数正确返回值......

**然而**，标准确实说如果函数正常结束（无异常）而没有返回值，则调用**未定义的行为**（即，任何事情都可能发生，很可能是崩溃）。因此，大多数编译器都会对这种情况*发出警告*，对于 gcc 和 Clang，您可以使用`-Wreturn`.

* * *

现在，nullity 或*sentinel values*的原则并不新鲜，空指针只是*一种*化身（在众多中）。

如果您的对象可以为空没有意义（它很少这样做，但可能是一种权宜之计），那么您有两种选择：

*   `throw`发出错误信号的异常
*   `boost::optional<ObjectType>`返回一个可能为 null的包装类（例如）

在这种情况下，由于预计`Find`可能找不到任何东西，我一般建议后者。

用法很简单：

```
boost::optional<ObjectType> MyClass::FindObjectType(char const* objectTypeName )
{
    if ( objectTypeMap.find( objectTypeName ) == objectTypeMap.end() ) {
        // do not print anything, it is up to the caller to decide what to do
        return boost::none;
    }

    return objectTypeMap[ objectTypeName ];
} 
```

然后调用者写道：

```
int main(int argc, char* argv[]) {
    if (boost::optional<ObjectType> o = MyClass::FindObject(argv[1])) {
        o->foo();

        return 0;
    }

    Msg( "\n[C++ ERROR] No object type: %s", argv[1]);
    return 1;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-26T06:27:32.250

# C++17 更新

C++17`std::optional`作为标准库的一部分引入了语言中最接近空对象的东西，类似于其他编程语言中的“可能”。它的工作原理[与上一个答案](https://stackoverflow.com/a/10931200/14141690)`boost::optional`中的描述非常相似。它旨在解决的用例之一是从函数返回一个可选值。

```
#include <iostream>
#include <optional> // Defines std::optional

std::optional<int> f(bool test) {
    if (test) {
        return 1;
    } else {
        return std::optional<int>();
    }
}

int main()
{
    auto ret = f(true);

    // std::optional can be used as a bool
    if (ret) {
        std::cout << "Value for first test: " << ret.value() << '\n';
    } else {
        std::cout << "Value for first test: " << 0 << '\n';
    }

    std::cout << "Value for second test: " << (f(true)).value_or(0) << '\n';
    std::cout << "Value for third test: " << (f(false)).value_or(0) << '\n';

    return 0;
} 
```

输出：

```
Value for first test: 1
Value for second test: 1
Value for third test: 0 
```

# java - 通过蓝牙从 Java 服务器向 Android 客户端发送文本

> ID：10929767
> 
> 赞同：25
> 
> 时间：2012-06-07T10:12:47.917
> 
> 标签：java, android, sockets, bluetooth, bluecove

首先...不要将我重定向到蓝牙聊天，我已经完全阅读了它。

我有一个 Android 客户端，它可以正确地与服务器建立连接，最重要的是我可以在我的电脑中向服务器发送文本并正确显示，但我不能做相反的动作，从服务器发送一个简单的字符串到客户端并将其显示在我的 android 应用程序中。

我不想实现聊天只是为了展示 Java 服务器和 Android 客户端之间的 BT 通信是如何工作的。

为方便起见：

**我在服务器类的 startServer() 方法的末尾发送文本。**

**我尝试在 onPause() 开始时从服务器读取文本。**

**

## [已解决] 解决方法如下

**。

代码如下：

安卓BT客户端：

```
/*...libraries here...*/
  public class ConnectTest extends Activity {
  TextView out;
  private static final int REQUEST_ENABLE_BT = 1;
  private BluetoothAdapter btAdapter = null;
  private BluetoothSocket btSocket = null;
  private OutputStream outStream = null;

  // Well known SPP UUID
  private static final UUID MY_UUID =
      UUID.fromString("00001101-0000-1000-8000-00805F9B34FB");

  // Insert your server's MAC address
  private static String address = "00:10:60:AA:B9:B2";

  /** Called when the activity is first created. */
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    out = (TextView) findViewById(R.id.out);

    out.append("\n...In onCreate()...");

    btAdapter = BluetoothAdapter.getDefaultAdapter();
    CheckBTState();
  }

  public void onStart() {
    super.onStart();
    out.append("\n...In onStart()...");
  }

  public void onResume() {
    super.onResume();

    out.append("\n...In onResume...\n...Attempting client connect...");

    // Set up a pointer to the remote node using it's address.
    BluetoothDevice device = btAdapter.getRemoteDevice(address);

    // Two things are needed to make a connection:
    //   A MAC address, which we got above.
    //   A Service ID or UUID.  In this case we are using the
    //     UUID for SPP.
    try {
      btSocket = device.createRfcommSocketToServiceRecord(MY_UUID);
    } catch (IOException e) {
      AlertBox("Fatal Error", "In onResume() and socket create failed: " + e.getMessage() + ".");
    }

    // Discovery is resource intensive.  Make sure it isn't going on
    // when you attempt to connect and pass your message.
    btAdapter.cancelDiscovery();

    // Establish the connection.  This will block until it connects.
    try {
      btSocket.connect();
      out.append("\n...Connection established and data link opened...");
    } catch (IOException e) {
      try {
        btSocket.close();
      } catch (IOException e2) {
        AlertBox("Fatal Error", "In onResume() and unable to close socket during connection failure" + e2.getMessage() + ".");
      }
    }

    // Create a data stream so we can talk to server.
    out.append("\n...Sending message to server...");
    String message = "Hello from Android.\n";
    out.append("\n\n...The message that we will send to the server is: "+message);

    try {
      outStream = btSocket.getOutputStream();
    } catch (IOException e) {
      AlertBox("Fatal Error", "In onResume() and output stream creation failed:" + e.getMessage() + ".");
    }

    byte[] msgBuffer = message.getBytes();
    try {
      outStream.write(msgBuffer);
    } catch (IOException e) {
      String msg = "In onResume() and an exception occurred during write: " + e.getMessage();
      if (address.equals("00:00:00:00:00:00")) 
        msg = msg + ".\n\nUpdate your server address from 00:00:00:00:00:00 to the correct address on line 37 in the java code";
      msg = msg +  ".\n\nCheck that the SPP UUID: " + MY_UUID.toString() + " exists on server.\n\n";

      AlertBox("Fatal Error", msg);       
    }
  }

  public void onPause() {
    super.onPause();

    //out.append("\n...Hello\n");
    InputStream inStream;
    try {
        inStream = btSocket.getInputStream();
        BufferedReader bReader=new BufferedReader(new InputStreamReader(inStream));
        String lineRead=bReader.readLine();
        out.append("\n..."+lineRead+"\n");

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    out.append("\n...In onPause()...");

    if (outStream != null) {
      try {
        outStream.flush();
      } catch (IOException e) {
        AlertBox("Fatal Error", "In onPause() and failed to flush output stream: " + e.getMessage() + ".");
      }
    }

    try     {
      btSocket.close();
    } catch (IOException e2) {
      AlertBox("Fatal Error", "In onPause() and failed to close socket." + e2.getMessage() + ".");
    }
  }

  public void onStop() {
    super.onStop();
    out.append("\n...In onStop()...");
  }

  public void onDestroy() {
    super.onDestroy();
    out.append("\n...In onDestroy()...");
  }

  private void CheckBTState() {
    // Check for Bluetooth support and then check to make sure it is turned on

    // Emulator doesn't support Bluetooth and will return null
    if(btAdapter==null) { 
      AlertBox("Fatal Error", "Bluetooth Not supported. Aborting.");
    } else {
      if (btAdapter.isEnabled()) {
        out.append("\n...Bluetooth is enabled...");
      } else {
        //Prompt user to turn on Bluetooth
        Intent enableBtIntent = new Intent(btAdapter.ACTION_REQUEST_ENABLE);
        startActivityForResult(enableBtIntent, REQUEST_ENABLE_BT);
      }
    }
  }

  public void AlertBox( String title, String message ){
    new AlertDialog.Builder(this)
    .setTitle( title )
    .setMessage( message + " Press OK to exit." )
    .setPositiveButton("OK", new OnClickListener() {
        public void onClick(DialogInterface arg0, int arg1) {
          finish();
        }
    }).show();
  }
} 
```

和 Java BT 服务器：

```
 import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStream;
import java.io.OutputStreamWriter;
import java.io.PrintWriter;

import javax.bluetooth.*;
import javax.microedition.io.*;

/**
* Class that implements an SPP Server which accepts single line of
* message from an SPP client and sends a single line of response to the client.
*/
public class SimpleSPPServer {

    //start server
    private void startServer() throws IOException{

        //Create a UUID for SPP
        UUID uuid = new UUID("1101", true);
        //Create the servicve url
        String connectionString = "btspp://localhost:" + uuid +";name=Sample SPP Server";

        //open server url
        StreamConnectionNotifier streamConnNotifier = (StreamConnectionNotifier)Connector.open( connectionString );

        //Wait for client connection
        System.out.println("\nServer Started. Waiting for clients to connect...");
        StreamConnection connection=streamConnNotifier.acceptAndOpen();

        RemoteDevice dev = RemoteDevice.getRemoteDevice(connection);
        System.out.println("Remote device address: "+dev.getBluetoothAddress());
        System.out.println("Remote device name: "+dev.getFriendlyName(true));

        //read string from spp client
        InputStream inStream=connection.openInputStream();
        BufferedReader bReader=new BufferedReader(new InputStreamReader(inStream));
        String lineRead=bReader.readLine();
        System.out.println(lineRead);

        //send response to spp client
        OutputStream outStream=connection.openOutputStream();
        BufferedWriter bWriter=new BufferedWriter(new OutputStreamWriter(outStream));
        bWriter.write("Response String from SPP Server\r\n");

        /*PrintWriter pWriter=new PrintWriter(new OutputStreamWriter(outStream));
        pWriter.write("Response String from SPP Server\r\n");
        pWriter.flush();
        pWriter.close();*/

        streamConnNotifier.close();

    }

    public static void main(String[] args) throws IOException {

        //display local device address and name
        LocalDevice localDevice = LocalDevice.getLocalDevice();
        System.out.println("Address: "+localDevice.getBluetoothAddress());
        System.out.println("Name: "+localDevice.getFriendlyName());

        SimpleSPPServer sampleSPPServer=new SimpleSPPServer();
        sampleSPPServer.startServer();

    }
} 
```

*解决方案*：这只是服务器端的一个小改动。我不知道为什么，但不是使用 BufferedWrite 在套接字中写入，我们需要使用 PrinterWriter 这样做。我添加了修改后的那段代码：

英国电信服务器：

```
 ....
    //read string from spp client
    InputStream inStream=connection.openInputStream();
    BufferedReader bReader=new BufferedReader(new InputStreamReader(inStream));
    String lineRead=bReader.readLine();
    System.out.println(lineRead);

    //send response to spp client
    OutputStream outStream=connection.openOutputStream();
    PrintWriter pWriter=new PrintWriter(new OutputStreamWriter(outStream));
    pWriter.write("Response String from SPP Server\r\n");
    pWriter.flush();

    pWriter.close();

    streamConnNotifier.close();
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T16:54:00.943

看起来您的 BufferedWriter 缓存没有被刷新，数据只是保留在缓冲区中而没有被发送。`bWriter.flush()`在您`bWriter.write()`应该解决问题并导致数据刷新到输出流之后调用。您还可以考虑更改代码以遵循以下原则：

```
PrintWriter pWriter = new PrintWriter(new BufferedWriter(new OutputStreamWriter(outStream))); 
```

这将导致 PrintWriter 输出被缓冲，而不是立即写入输出流，这可能是低效的。

不过，出于您的目的，省略 BufferedWriter 应该没问题，因为您很可能希望立即刷新到输出流（PrintWriter 会这样做）。

# java - 打印（使用 lpr）从命令行工作，但不能从 Java

> ID：10929768
> 
> 赞同：2
> 
> 时间：2012-06-07T10:12:48.877
> 
> 标签：java, printing

所以，首先，我们不能使用`javax`打印服务，因为它非常慢，因为我们在一台机器上安装了超过 20,000 台打印机（查找使用 lpstat，这非常慢）。所以，我们正在使用 lpr。

当我这样做时：

```
cat myfile.pdf | lpr -P "MyPrinter" 
```

它将文件完美地打印到打印机名称`MyPrinter`。为了在 Java 中做同样的事情，我这样做：

```
cmd = String.format("lpr -P \"%s\"", "MyPrinter");

Process p = Runtime.getRuntime().exec(cmd);

OutputStream out = p.getOutputStream();

/*
 This essentially runs a thread which reads from a stream and
 outputs it to the STDOUT. This is what I've written to help with
 debugging
*/
StreamRedirect inRed = new StreamRedirect(p.getInputStream(), "IN");
StreamRedirect erRed = new StreamRedirect(p.getErrorStream(), "ER");

inRed.start();
erRed.start();

/*
 This is where I write to lprs STDIN. `document` is an InputStream
*/

final byte buf[] = new byte[1024];
int len;

while((len = document.read(buf)) > 0) {
    out.write(buf, 0, len);
}

out.flush();
out.close(); 
```

但是，我收到以下错误：

```
SR[ER]>>lpr: The printer or class was not found. 
```

这里，`SR[ER]`只是一个以 . 为前缀的自定义标签`StreamRedirect`。为什么会这样？为什么当我从命令行运行它时它能够找到打印机，但不是这样？

此外，我尝试`whoami`从 Java 程序中运行它，它说我正在以我登录的同一用户（我`lpr`在命令行上执行的同一用户）运行它。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T10:20:25.267

您需要将命令和参数放在字符串数组中

```
String[] cmd = new String[] { "lpr" , "-P", "MyPrinter" };

Process p = Runtime.getRuntime().exec(cmd); 
```

您可能还想使用较新的[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-30T12:56:04.397

`cups-bsd`包括`lpr`用于 Java 的。

一定要执行`apt-get remove lpr`and `apt-get install cups-bsd`。

# sql-server - 是否使用 blob，性能问题

> ID：10929771
> 
> 赞同：3
> 
> 时间：2012-06-07T10:12:50.417
> 
> 标签：sql-server, performance, parsing

首先，我不是数据库专家，而是承包商。我聘请了一位（优秀的）程序员，但由于我们遇到的一些问题以及我正在阅读的所有信息，我现在对数据库设计的某个部分有一些疑问。开始吧。

我们构建了一个住宅站点，该站点使用解析器来处理所有数据并将其存储在 ms-sql 数据库中。每天提要包含大约 70.000 条记录，其中大多数还附有图片（平均 3 张）。图片大小从 30kb 到 400kb 不等。数据库有大约相同数量的记录。大约有 400 个新对象需要处理。这意味着每天都必须输入数据库中的所有记录，以查看数据是否已更改、对象是否已删除或是否为新对象并因此必须插入。图片存储在数据库中。提要在具有 32GB 内存和 SSA 磁盘的双四核机器上处理。数据库现在大小为 600GB。

目前，我们每天有大约 3000 名用户查看 6 所房子，平均每个用户查看 10 张图片。

这是我们所经历的： - 整个解析过程大约需要13个小时。- 我们在日志中收到很多超时错误 - 我们退出了一些死锁错误 - Google 抱怨超时错误，因此索引的页面不多。- 由于某些目录的加载时间超过 10 秒，谷歌将该网站评为缓慢。

我个人认为这与数据库中的图片和一些错误的查询有关。但在我开始向我的程序员抱怨之前，我想听听你对此的看法。在此先感谢您的时间。

来自我的程序员的更新：这是有关表结构的一些信息。图像有 2 个表，1 个称为 imageinfo，用于查询图像（例如获取图像 ID 和内容类型的列表）和一个包含图像 ID 和 BLOB 的图像表。imageinfo 表与图像表具有相同的 id（1:1 关系），并具有一些额外的信息，例如图像的名称、类型和哈希值。该散列在解析器过程中用于确定图像是否已更改。因此，只有在解析器进行插入/更新/删除并且站点访问图像时才会触摸图像表。访问和下载一张图像所需的时间约为 350 毫秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:59:28.670

你告诉我们两个问题：

1.  导入很慢
2.  浏览网站很慢

(2) 很简单：您可能需要了解您的读取查询并为它们编制索引。这绝对是可以解决的。

(1) 没有更多细节就很难说。我知道您需要比较很多 blob - 除了实际数据之外，您还可以存储这些博客的紧凑散列。这样您就不需要检索 blob 进行比较，甚至可以索引散列。

**你应该在数据库中有图像吗？**

最大的*优点*是：一致且简单的备份，开发人员的便利。最大的*缺点*是潜在的滥用。一般来说，您真的不能说图像属于文件系统。数据库通常对他们来说很好，除非有具体和具体的理由将他们放在其他地方。

我的猜测是您对这些博客的使用被误用了，如果文件存储在文件系统中，您也会遇到同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:17:52.477

你真的需要衡量性能在哪里伤害了你。如果不知道到底什么是慢的，你就不能指望开始修复它。

但是，如果您正在寻找从哪里开始测量的想法，那么我会说看看导入过程，看看它在 RBAR 样式中做了什么。RBAR 代表“Row By Agonizing Row”，它恰当地描述了在单行上运行的过程，而这些过程在集合中工作的效率要高得多。

我要检查的另一件事是，您实际上并没有检查每个图像的内容以确保它没有改变。如果您正在对该数据进行二进制比较，我可以想象它会非常缓慢。如果您为其计算校验和并比较校验和，则

a) 您可以在 SQL Server 进程之外计算该校验和，最好在另一个盒子上计算。
b) 您将能够在更精简的过程中检查更新的图像，特别是如果该校验和是`INCLUDE`合适索引上的列。

但是，正如评论的那样，将图像存储在数据库中并不是最聪明的想法。

# php - 命名空间未从 php 中的字符串加载

> ID：10929772
> 
> 赞同：0
> 
> 时间：2012-06-07T10:12:52.277
> 
> 标签：php, namespaces, instagram

我正在使用这个 php instagram 库：[https ://github.com/galen/PHP-Instagram-API](https://github.com/galen/PHP-Instagram-API)

它大量使用了我并不熟悉的命名空间，而且我一直遇到一个问题，看起来它应该是一个简单的修复，但我无法弄清楚。

我不断收到此错误：

> 致命错误：在第 120 行的 \Instagram\Collection\CollectionAbstract.php 中找不到类 '\Instagram\Tag'

第 120 行是 return new $object( $c ); 在下面的代码中：

```
protected function convertData( $object ) {
    $this->data = array_map(
        function( $c ) use( $object ) {
            return new $object( $c );
        },
        $this->data
    );
} 
```

如果我`echo $object`在屏幕上显示它正在尝试调用的类的字符串。

如果我尝试这个，它会为那个特定的类分叉：

```
protected function convertData( $object ) {
    $this->data = array_map(
        function( $c ) use( $object ) {
            if($object == '\Instagram\Tag') {
                return new \Instagram\Tag($c);
            }
            return new $object( $c );
        },
        $this->data
    );
} 
```

但是，然后我遇到了所有其他类的问题。

如果有人有任何想法，请提前致谢。

# mysql - 在一个查询中获取每周、每月、每年的数据

> ID：10929773
> 
> 赞同：0
> 
> 时间：2012-06-07T10:13:07.863
> 
> 标签：mysql, time

我有一个显示用户统计信息的页面，我想知道从表中获取每周、每月、每年和所有时间统计信息的最佳方法是在一个查询中吗？

目前我正在使用单独的查询来检查每个日期范围内的结果，但必须有更好的方法。例如，我想计算过去一个月、一周和一年中“投票”=“1”的所有行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:17:03.073

```
SELECT
   user_id,
   SUM(IF(ts>CURRENT_DATE - INTERVAL 1 WEEK,votes,0)) votes_weekly,
   SUM(IF(ts>CURRENT_DATE - INTERVAL 1 MONTH,votes,0)) votes_monthly,
   SUM(IF(ts>CURRENT_DATE - INTERVAL 1 YEAR,votes,0)) votes_yearly
FROM table
WHERE ts>CURRENT_DATE - INTERVAL 1 YEAR
GROUP BY user_id; 
```

# java - 从路径列表中表示文件系统（文件/目录）的 Java 树

> ID：10929775
> 
> 赞同：21
> 
> 时间：2012-06-07T10:13:12.413
> 
> 标签：java, data-structures, tree, filesystems

我有一个这样的路径列表

```
/mnt/sdcard/folder1/a/b/file1
/mnt/sdcard/folder1/a/b/file2
/mnt/sdcard/folder1/a/b/file3
/mnt/sdcard/folder1/a/b/file4
/mnt/sdcard/folder1/a/b/file5
/mnt/sdcard/folder1/e/c/file6
/mnt/sdcard/folder2/d/file7
/mnt/sdcard/folder2/d/file8
/mnt/sdcard/file9 
```

因此，从这个路径列表（Stings）中，我需要创建一个 Java 树结构，其中文件夹作为节点，文件作为叶子（不会有空文件夹作为叶子）。

我认为我需要的是 add 方法，我将一个字符串（文件的路径）传递给他们，并将其添加到树中的正确位置，如果它们不存在，则创建正确的节点（文件夹）

当我在节点和叶子列表上时，这个树结构将需要我获取节点列表（但我认为这将是树的正常特征）

我将始终将字符串作为路径，而不是真正的文件或文件夹。有什么东西可以使用或有源代码可以开始吗？

非常感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-07T15:38:00.713

谢谢你所有的回答。我做了我的工作实施。我认为我需要改进它，以便在向树结构添加元素时通过更多缓存更好地工作。

正如我所说，我需要的是一种结构，使我能够对 FS 进行“虚拟”表示。

MXMTree.java

```
public class MXMTree {

    MXMNode root;
    MXMNode commonRoot;

    public MXMTree( MXMNode root ) {
        this.root = root;
        commonRoot = null;
    }

    public void addElement( String elementValue ) { 
        String[] list = elementValue.split("/");

        // latest element of the list is the filename.extrension
        root.addElement(root.incrementalPath, list);

    }

    public void printTree() {
        //I move the tree common root to the current common root because I don't mind about initial folder
        //that has only 1 child (and no leaf)
        getCommonRoot();
        commonRoot.printNode(0);
    }

    public MXMNode getCommonRoot() {
        if ( commonRoot != null)
            return commonRoot;
        else {
            MXMNode current = root;
            while ( current.leafs.size() <= 0 ) {
                current = current.childs.get(0);
            }
            commonRoot = current;
            return commonRoot;
        }

    }

} 
```

MXMNode.java

```
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

public class MXMNode {

    List<MXMNode> childs;
    List<MXMNode> leafs;
    String data;
    String incrementalPath;

    public MXMNode( String nodeValue, String incrementalPath ) {
        childs = new ArrayList<MXMNode>();
        leafs = new ArrayList<MXMNode>();
        data = nodeValue;
        this. incrementalPath = incrementalPath;
    }

    public boolean isLeaf() {
        return childs.isEmpty() && leafs.isEmpty();
    }

    public void addElement(String currentPath, String[] list) {

        //Avoid first element that can be an empty string if you split a string that has a starting slash as /sd/card/
        while( list[0] == null || list[0].equals("") )
            list = Arrays.copyOfRange(list, 1, list.length);

        MXMNode currentChild = new MXMNode(list[0], currentPath+"/"+list[0]);
        if ( list.length == 1 ) {
            leafs.add( currentChild );
            return;
        } else {
            int index = childs.indexOf( currentChild );
            if ( index == -1 ) {
                childs.add( currentChild );
                currentChild.addElement(currentChild.incrementalPath, Arrays.copyOfRange(list, 1, list.length));
            } else {
                MXMNode nextChild = childs.get(index);
                nextChild.addElement(currentChild.incrementalPath, Arrays.copyOfRange(list, 1, list.length));
            }
        }
    }

    @Override
    public boolean equals(Object obj) {
        MXMNode cmpObj = (MXMNode)obj;
        return incrementalPath.equals( cmpObj.incrementalPath ) && data.equals( cmpObj.data );
    }

    public void printNode( int increment ) {
        for (int i = 0; i < increment; i++) {
            System.out.print(" ");
        }
        System.out.println(incrementalPath + (isLeaf() ? " -> " + data : "")  );
        for( MXMNode n: childs)
            n.printNode(increment+2);
        for( MXMNode n: leafs)
            n.printNode(increment+2);
    }

    @Override
    public String toString() {
        return data;
    }

} 
```

Test.java 用于测试代码

```
public class Test {

    /**
     * @param args
     */
    public static void main(String[] args) {

        String slist[] = new String[] { 
                "/mnt/sdcard/folder1/a/b/file1.file", 
                "/mnt/sdcard/folder1/a/b/file2.file", 
                "/mnt/sdcard/folder1/a/b/file3.file", 
                "/mnt/sdcard/folder1/a/b/file4.file",
                "/mnt/sdcard/folder1/a/b/file5.file", 
                "/mnt/sdcard/folder1/e/c/file6.file", 
                "/mnt/sdcard/folder2/d/file7.file", 
                "/mnt/sdcard/folder2/d/file8.file", 
                "/mnt/sdcard/file9.file" 
        };

        MXMTree tree = new MXMTree(new MXMNode("root", "root"));
        for (String data : slist) {
            tree.addElement(data);
        }

        tree.printTree();
    }

} 
```

如果您对改进有一些好的建议，请告诉我:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-12-07T09:11:27.843

我自己实现了挑战的解决方案，它[可以作为 GitHubGist 使用](https://gist.github.com/SchulteMarkus/1a67f4e6081d0f2f4e0481bf967fd17f "演示如何将文件系统层次结构列表转换为数据结构 Raw")。

我代表 DirectoryNode 中文件系统层次结构的每个节点。辅助方法*createDirectoryTree(String[] filesystemList)*创建一个目录树。

这是使用示例，包含在[GitHubGist](https://gist.github.com/SchulteMarkus/1a67f4e6081d0f2f4e0481bf967fd17f "演示如何将文件系统层次结构列表转换为数据结构 Raw")中。

```
final String[] list = new String[]{
  "/mnt/sdcard/folder1/a/b/file1.file",
  "/mnt/sdcard/folder1/a/b/file2.file",
  "/mnt/sdcard/folder1/a/b/file3.file",
  "/mnt/sdcard/folder1/a/b/file4.file",
  "/mnt/sdcard/folder1/a/b/file5.file",
  "/mnt/sdcard/folder1/e/c/file6.file",
  "/mnt/sdcard/folder2/d/file7.file",
  "/mnt/sdcard/folder2/d/file8.file",
  "/mnt/sdcard/file9.file"
};

final DirectoryNode directoryRootNode = createDirectoryTree(list);

System.out.println(directoryRootNode); 
```

*System.out.println* -输出是：

```
 {value='mnt', children=[{value='sdcard', children=[{value='folder1', 
  children=[{value='a', children=[{value='b', children=[{value='file1.file', 
  children=[]}, {value='file2.file', children=[]}, {value='file3.file', 
  children=[]}, {value='file4.file', children=[]}, {value='file5.file', 
  children=[]}]}]}, {value='e', children=[{value='c', 
  children=[{value='file6.file', children=[]}]}]}]}, 
  {value='folder2', children=[{value='d', children=[{value='file7.file', 
  children=[]}, {value='file8.file', children=[]}]}]}, 
  {value='file9.file', children=[]}]}]} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T13:22:02.523

似乎您可以调整[Trie](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/Trie.java) / [Radix Trie](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/RadixTrie.java)或二[叉搜索树](http://code.google.com/p/java-algorithms-implementation/source/browse/src/com/jwetherell/algorithms/data_structures/BinarySearchTree.java)以在任何一种情况下工作。您可以扩充 Trie 以将“文件夹”存储为内部节点（而不是像常规 Trie 中的字符），或者您可以扩充二叉搜索树以将“文件夹”存储为内部节点（只要它们实现可比较的接口）和“文件”作为叶节点。

我对这些结构的实现链接在上面的文本中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:14:23.613

我建议阅读[数据结构](http://en.wikipedia.org/wiki/Data_structure)，尤其是[树](http://en.wikipedia.org/wiki/Tree_%28data_structure%29)。在 Java 中，您可以通过创建具有对其他节点的引用的节点类来表示这些。例如：

```
public class Node {
    private Node[] children;
    /* snip other fields */
    public boolean isFile() {
         return children.count == 0;
    }
} 
```

显然，您可以随心所欲地存储节点引用——数组或集合将与非二叉树一起使用。

给定您的文件列表，您可以阅读这些文件并填充您的树结构。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T13:09:12.500

看看新的[Java 7-nio2 包](http://docs.oracle.com/javase/tutorial/essential/io/fileio.html)。你所需要的就在里面。

# android - 如何测试蓝牙聊天应用程序

> ID：10929777
> 
> 赞同：-2
> 
> 时间：2012-06-07T10:13:17.417
> 
> 标签：android, eclipse, emulation

我想运行蓝牙聊天应用程序（[http://developer.android.com/resources/samples/BluetoothChat/index.html](http://developer.android.com/resources/samples/BluetoothChat/index.html)上给出的示例代码）但我无法在模拟器上测试它。我有智能手机（android 2.3），但该代码中给出的操作栏仅支持 11 以上的 API 级别。至少应该启动模拟器活动，但它给了我

致命异常运行时错误

所以我该怎么做..？

请帮忙

thnxxx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:16:14.900

模拟器不支持蓝牙，您必须检查真实设备上的蓝牙应用程序

粘贴你的错误

检查它的清单文件 minsdk 是 6

```
<uses-sdk minSdkVersion="6" /> 
```

所以它将在 api 11 以下的设备上运行

添加操作栏

从 Android 3.0（API 级别 11）开始，操作栏包含在使用 Theme.Holo 主题（或其后代之一）的所有活动中，当 targetSdkVersion 或 minSdkVersion 属性设置为“11”时，这是默认主题"或更大。例如：

```
<manifest ... >
    <uses-sdk android:minSdkVersion="4"
              android:targetSdkVersion="11" />
    ...
</manifest> 
```

在此示例中，应用程序需要 API 级别 4 (Android 1.6) 的最低版本，但它也以 API 级别 11 (Android 3.0) 为目标。这样，当应用程序在Android 3.0或更高版本上运行时，系统会将全息主题应用于每个活动，因此每个活动都包含操作栏。

[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

如果您已通过 sdk 管理器安装示例应用程序，请转到您的计算机上的此路径

```
C:\Program Files\Android\android-sdk-windows\samples\android-8\BluetoothChat 
```

# binding - MonoTouch MVVMCross 绑定到实例变量

> ID：10929779
> 
> 赞同：1
> 
> 时间：2012-06-07T10:13:22.527
> 
> 标签：binding, xamarin.ios, mvvmcross

这可能听起来很愚蠢，但我只是无法绑定到实例变量（字符串类型）来工作。

在我视图的 xib 中，我在 IB 中创建了一个文本字段作为插座，然后我可以将它绑定到我的 viewModel 的字符串属性。但是，它不会让我以相同的方式将视图的字符串变量绑定到 viewModel 的属性。

有谁知道这是设计使然，还是我遗漏了什么？绑定代码是 -

```
this.AddBindings(
     new Dictionary<object, string>()
     {
          { TextFieldTemp, "{'Text':{'Path':'AboutText'}}" },
     }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:20:15.823

通过阅读您的问题，我认为您所说的是 View 本身具有字符串类型的字段...

你的代码：

```
this.AddBindings(
     new Dictionary<object, string>()
     {
          { StringTemp, "{'Text':{'Path':'AboutText'}}" },
     }); 
```

正在尝试将所`Text`引用的对象上的属性绑定到 ViewModel`StringTemp`中的任何内容。`AboutText`

* * *

要设置`StringTemp`字符串本身，您应该能够使用以下方式绑定到它：

```
 this.AddBindings(
      new Dictionary<object, string>()
      {
           { this, "{'StringTemp':{'Path':'AboutText'}}" },
      }); 
```

* * *

只是为了解释: 中的部分`{ this, "{'StringTemp':{'Path':'AboutText'}}" }`，这些可以被认为是`{ TargetObject, "{'TargetPropertyName':{'Path':'SourcePropertyName'}}" }`：

*   TargetObject ( `this`) 是您要设置属性值的对象
*   TargetPropertyName ( `StringTemp`) 是您要设置的名称属性
*   SourcePropertyName ( `AboutText`) 是将作为值的来源的属性的名称

请注意，Mvx 使用属性——而不是字段——所以`private string StringTemp {get;set;}`是可绑定的，但`private string StringTemp;`不是。

* * *

如果您愿意，您也可以为此字符串引用进行双向绑定...但是您需要设置一些自定义绑定信息来执行此操作 - 需要触发和捕获一些事件才能更新 ViewModel (我将把它留到另一天！）

* * *

对于直接绑定不是您想要的情况，您可以随时订阅 PropertyChanged 并以更详细的代码处理通知......例如：

```
ViewModel.PropertyChanged += (s,e) => 
{
    if (e.PropertyName == "AboutText")
    {
         // do something complicated here with the new ViewModel.AboutText value
    }
}; 
```

...但我个人倾向于尽可能避免使用这种类型的代码...

# ruby-on-rails - Rails clear_helpers 仅用于特定的控制器操作？

> ID：10929781
> 
> 赞同：2
> 
> 时间：2012-06-07T10:13:27.493
> 
> 标签：ruby-on-rails, ruby

我目前正在开发一个 Rails 项目，我正在使用 json_builder 构建一个视图以与 Layar API 一起使用，如下所示：

```
layer "Layer name"
errorString "ok"
errorCode 0
hotspots @inspections do |inspection|
    id inspection.slug
    anchor do
        geolocation do
            lat inspection.lat
            lon inspection.lng
        end
    end
    text do
        title inspection.name
        description "#{inspection.rating} out of 5"
        imageURL "http://my-url.com/assets/rating#{inspection.rating}.png"
    end
end 
```

但是，当我在浏览器中加载此视图时，`title`我的 JSON 部分没有出现。我已经设法将其缩小到我的`layout_helper`文件中的一个辅助方法（我一直在使用漂亮的生成器），也命名为`title`. 由于我不需要这个助手，有没有办法`clear_helpers`只为这个特定的控制器动作运行？或者有没有更简洁的方法来做到这一点？（我对 Rails 很陌生，你可能知道！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:35:27.893

理论上，您应该能够在控制器中执行以下操作：

```
class SomethingController < ApplicationController
  helper :layout, :except => :show # Or whatever action you want to skip here 
```

**编辑：**

与所有类似的方法不同，显然 Rails 不支持辅助方法。不幸的是，实际上似乎没有办法改变每个动作加载哪些助手。我正在玩弄的一个想法是强制取消注册每个控制器操作的特定助手，但这并不漂亮。

相关 API 文档：[http ://api.rubyonrails.org/classes/AbstractController/Helpers/ClassMethods.html](http://api.rubyonrails.org/classes/AbstractController/Helpers/ClassMethods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:13:12.567

我最终将有问题的辅助方法重命名为`pagetitle`并改变了我的观点。有时最简单的解决方案是最简单的！

# ios - 表视图 xcode

> ID：10929783
> 
> 赞同：-3
> 
> 时间：2012-06-07T10:13:29.883
> 
> 标签：ios, xcode, uitableview

在我的应用程序中，我有两个表格视图。第一张桌子有效。以下是相关方法：

```
- (void)viewDidLoad
{
    NSURL *url = [NSURL URLWithString:@"http://gdata.youtube.com/feeds/api/users/ruflixnet/playlists?v=2&alt=jsonc"];
    NSData *jsonData = [NSData dataWithContentsOfURL:url];
    NSError *error = nil;
    id result = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];
    NSLog(@"%@",result);
    NSDictionary *objsize = [[NSDictionary alloc] initWithObjectsAndKeys:[[result objectForKey:@"data"] objectForKey:@"totalItems"],@"objsize", nil];
    NSString *size = [objsize objectForKey:@"objsize"];
    _objects = [[ NSMutableArray alloc] init];
    for (int i=1; i<size.integerValue+1; i++) {
        NSDictionary * obj1 = [[NSDictionary alloc] initWithObjectsAndKeys:[[[[result objectForKey:@"data"] objectForKey:@"items"] objectAtIndex:i-1] objectForKey:@"title"],@"title",[[[[result objectForKey:@"data"] objectForKey:@"items"] objectAtIndex:i-1] objectForKey:@"id"],@"detail", nil];
        [_objects  addObject: obj1];}

}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return _objects.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    cell.textLabel.text = [[_objects objectAtIndex:indexPath.row] objectForKey:@"title"];
    cell.detailTextLabel.text = [[_objects objectAtIndex:indexPath.row]objectForKey:@"detail"];

    return cell;
}

- (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Set the batch size to a suitable number.
    [fetchRequest setFetchBatchSize:20];

    // Edit the sort key as appropriate.
    NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"timeStamp" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];

    [fetchRequest setSortDescriptors:sortDescriptors];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
         // Replace this implementation with code to handle the error appropriately.
         // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
}    

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    NSManagedObject *object = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = [[object valueForKey:@"timeStamp"] description];
}

@end 
```

在第二个表格视图中，当我添加 FetchedResultsController 时，表格视图中没有任何单元格。

```
#import "Videos.h"
#import "DetailViewController.h"

@interface Videos (){
    NSMutableArray *_objects2;
}
@end

@implementation Videos
@synthesize detailViewController = _detailViewController;

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSURL *url = [NSURL URLWithString:@"http://gdata.youtube.com/feeds/api/playlists/A99C8B779B3B098F?v=2&alt=jsonc&max-results=50"];
    NSData *jsonData = [NSData dataWithContentsOfURL:url];
    NSError *error;
    id result = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error:&error];
    NSLog(@"%@",error);
    NSDictionary *objsize = [[NSDictionary alloc] initWithObjectsAndKeys:[[result objectForKey:@"data"] objectForKey:@"totalItems"],@"objsize", nil];
    NSString *size = [objsize objectForKey:@"objsize"];
    _objects2 = [[ NSMutableArray alloc] init];
   for (int i=1; i<size.integerValue+1; i++) {
        NSDictionary * obj1 = [[NSDictionary alloc] initWithObjectsAndKeys:[[[[[result objectForKey:@"data"] objectForKey:@"items"] objectAtIndex:1] objectForKey:@"video"] objectForKey:@"title"],@"title",[[[[[result objectForKey:@"data"] objectForKey:@"items"] objectAtIndex:1] objectForKey:@"video"] objectForKey:@"id"],@"detail", nil];
       [_objects2  addObject: obj1];} }

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 0;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    return _objects2.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *MyIdentifier = @"MyIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:MyIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyIdentifier] ;
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    cell.textLabel.text = [[_objects2 objectAtIndex:indexPath.row] objectForKey:@"title"];
    cell.detailTextLabel.text = [[_objects2 objectAtIndex:indexPath.row]objectForKey:@"detail"];

    return cell;
}

- (void)configureCell:(UITableViewCell *)cell atIndexPath:(NSIndexPath *)indexPath
{
    cell.textLabel.text = [[_objects2 objectAtIndex:indexPath.row] objectForKey:@"title"];
    cell.detailTextLabel.text = [[_objects2 objectAtIndex:indexPath.row]objectForKey:@"detail"]; }

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T10:33:30.033

您`numberOfSections..`在第二个代码转储中的数据源方法中返回 0。这将停止您的表格视图显示任何单元格。

# jquery - 使用 .each() JQuery 添加到现有值

> ID：10929786
> 
> 赞同：2
> 
> 时间：2012-06-07T10:13:39.677
> 
> 标签：jquery, function, loops, each

我有一个`.each()`函数可以测量. 类中每个图像的宽度`.item`。我需要测量所有宽度，然后将其添加到变量中。然后需要将变量传递出函数。下面这个功能只完成了一半，我只是不知道如何完成它。

非常感谢任何帮助。

```
$('.item img').each(function () {

    var i = $(this).width();

});

$('.overview').css('width', i); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T10:15:50.033

```
var i = 0;

$('.item img').each(function () {

    i = i + $(this).width();

});

$('.overview').css('width', i); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T10:16:15.617

```
var i = 0;

$('.item img').each(function () {
    i += $(this).width();
});

$('.overview').css('width', i); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T10:15:45.543

您正在遍历项目，但宽度被覆盖而不是相加。

```
var i = $(this).width(); 
```

这将是

```
var i += $(this).width(); 
```

还定义 I 外部函数以在函数调用之间保留其值。变量名 i 在这里不太合适，可能类似于 totalImagesWidth

尝试这个

```
var i = 0;
$('.item img').each(function () {

    i += $(this).width();

});

$('.overview').css('width', i);

// you can pass this to some other function as well
somefunction(i); 
```

# java - SAXParseException XML-20221 文本中的字符无效

> ID：10929790
> 
> 赞同：5
> 
> 时间：2012-06-07T10:13:49.590
> 
> 标签：java, jaxb, xml-parsing

对于独立的 Java 应用程序，我们看到非常罕见的错误，其中包含有效 XML 内容的字符串导致 JAXB 抛出异常，例如：

```
javax.xml.bind.UnmarshalException
 - with linked exception:
[org.xml.sax.SAXParseException: 
    <Line 1, Column 129>: XML-20221: (Fatal Error) Invalid char in text.] 
```

这是一个非常古老的 Java 应用程序，它是为旧版本的 Java 编写的，我们有一个现有的依赖项：

```
<dependency>
    <groupId>com.oracle</groupId>
    <artifactId>xdb-xmlparser</artifactId>
    <version>10.2.0.3.0</version>
</dependency> 
```

错误代码始终为 XML-20221，但原因可能会有所不同，例如：

```
XML-20221: (Fatal Error) Invalid char in text.

XML-20100: (Fatal Error) Expected '?>'.]

XML-20121: (Fatal Error) End tag does not match start tag 'TotalDepositReqd'. 
```

堆栈跟踪的其余部分也有所不同，但通常如下所示：

```
at oracle.xml.parser.v2.XMLError.flushErrorHandler(XMLError.java:415)
at oracle.xml.parser.v2.XMLError.flushErrors1(XMLError.java:284)
at oracle.xml.parser.v2.NonValidatingParser.parseEndTag(NonValidatingParser.java:1359)
at oracle.xml.parser.v2.NonValidatingParser.parseElement(NonValidatingParser.java:1304)
at oracle.xml.parser.v2.NonValidatingParser.parseRootElement(NonValidatingParser.java:326)
at oracle.xml.parser.v2.NonValidatingParser.parseDocument(NonValidatingParser.java:293)
at oracle.xml.parser.v2.XMLParser.parse(XMLParser.java:209)
at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:211) 
```

我们的 Java 版本是：

```
java version "1.6.0_16"
Java(TM) SE Runtime Environment (build 1.6.0_16-b01)
Java HotSpot(TM) Server VM (build 14.2-b01, mixed mode) 
```

我们当前的命令行是：

```
java
-server
-Xmx2048m
-Xms2048m
-XX:MaxPermSize=128m
-XX:+UseConcMarkSweepGC
-Dsun.rmi.dgc.server.gcInterval=0x2932E00
-Dsun.rmi.dgc.client.gcInterval=3600000
-verbosegc
-Xloggc:/path/to/file
-gc.log
-XX:+PrintGCDetails
-XX:+PrintGCDateStamps
-Djavax.xml.transform.TransformerFactory=org.apache.xalan.processor.TransformerFactoryImpl
-Djavax.xml.parsers.DocumentBuilderFactory=com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl
-Djava.endorsed.dirs=/path/to/endorsed
-Duser.country=GB
-Duser.language=en
-Dhttp.keepAlive=false foo.ListenerServer 
```

* * *

通常我们会在几秒钟的小突发中看到这些，这向我表明**某些内部缓冲区已损坏**？JVM 运行的时间越长，这些异常就越常见。JVM 的反弹解决了几天的问题。

*   有没有其他人见过类似的东西？
*   如果是这样，您是否设法解决了这个问题？
*   也许我们应该转向不同的 JAXB/JAXP 实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T11:04:58.637

`Unmarshaller`当开发人员缓存实例并在不同线程之间共享它时，我已经看到了类似的问题（解组期间的零星异常） 。根据文档，这`Unmarshaller`不是线程安全的。

# c# - 下拉和单选按钮列表选择更改了事件处理

> ID：10929796
> 
> 赞同：1
> 
> 时间：2012-06-07T10:14:07.847
> 
> 标签：c#, asp.net

我有一个单选按钮列表和一个下拉列表，我已经处理了两个事件`rbTypeOfUser_SelectedIndexChanged`和`ddlCountry_SelectedIndexChanged`. 我已将 `autoPostBack`这两个控件设置为 true。

但是在单击单选按钮列表时，我的两个事件即`rbTypeOfUser_SelectedIndexChanged`和`ddlCountry_SelectedIndexChanged`都已处理，并且`ddlCountry_SelectedIndexChanged`在下拉选择更改时未得到处理。

可能是什么问题？

```
protected void rbTypeOfUser_SelectedIndexChanged(object sender, EventArgs e)
    {
        //ViewState["TypeOfUser"] = rbTypeOfUser.SelectedItem.ToString();
        if (rbTypeOfUser.SelectedValue == "Free")
        {
            trmembership.Visible = false;
            //DDLMembershipPlan.Visible = false;
        }
        else
        {
            trmembership.Visible = true;
            //DDLMembershipPlan.Visible = true;
            //Label8.Visible = true;
            MembershipPlan();
        }

    }

protected void ddlCountry_SelectedIndexChanged(object sender, EventArgs e)
    {
        Parameterised_SQL_Dentry pm = new Parameterised_SQL_Dentry(0,   CommonStrings.ConnectionString);

        //Dentry de=new Dentry();
        string strState = "select vcrState,intState_id from exp_mst_state where intCountry_id='" + ddlCountry.SelectedValue + "' order by vcrState ";

        //de.FillCombo(ddlState,strState,"vcrState","intState_id");
        pm.FillCombo(ddlState, strState, "vcrState", "intState_id");
        ddlState.DataBind();
         ddlState.Enabled = true;
        ddlState.Items.Insert(0, new ListItem("Select State", "0"));

    }

<asp:RadioButtonList align="Center"  ID="rbTypeOfUser" runat="server"     RepeatDirection="Horizontal"  Width="350px" AutoPostBack="True"  onselectedindexchanged="rbTypeOfUser_SelectedIndexChanged" CssClass="checkbox_padd" TabIndex="1"  >
<asp:ListItem   Value="Free" Selected="True"><span class="mmovehead">&lt;span class=&quot;mmovehead&quot;&gt;Free&lt;/span&gt;</span></asp:ListItem>
<asp:ListItem  Value="Paid"><span class="mmovehead">&lt;span 
```

class="mmovehead">付费</span>

```
<asp:DropDownList ID="ddlCountry" runat="server" AutoPostBack="True"   ValidationGroup="Registration" Width="300px" TabIndex="3" onselectedindexchanged="ddlCountry_SelectedIndexChanged"  >
</asp:DropDownList> 
```

# java - EJB 中的 getGeneratedKeys

> ID：10929801
> 
> 赞同：2
> 
> 时间：2012-06-07T10:14:31.013
> 
> 标签：java, ejb-3.1

我想获取持久对象的 id。我正在使用 EJB 3.1。

我正在使用准备好的语句来执行此操作，并且效果很好。

```
ResultSet generatedKeys = statement.getGeneratedKeys();
if (generatedKeys.next()) {
    myId = generatedKeys.getLong(1);
} 
```

我一直在搜索，但没有发现如何在 EJB 中进行这项工作。这是我用于将对象持久保存到数据库的方法：

```
public void create(T entity) {
    getEntityManager().persist(entity);
    //Something to return entity's id???
} 
```

我正在使用的持久性提供程序是：

```
org.eclipse.persistence.jpa.PersistenceProvider 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:31:19.457

试试这个：

```
public [id_type] create(T entity) {
    getEntityManager().persist(entity);
    getEntityManager().flush();
    getEntityManager().refresh(entity);
    return entity.getId();
} 
```

# iphone - TTImageview requestDidFinishLoad 仅在滑动后调用

> ID：10929802
> 
> 赞同：1
> 
> 时间：2012-06-07T10:14:40.860
> 
> 标签：iphone, objective-c, xcode, cocoa-touch, three20

我的应用程序中有一个`TTImageview`。我用正确的网址分配它：

```
myImage.urlPath = @"http://shoppa.itiul.co.il/Media/StoreImages/40/40_276x186.jpg"; 
```

但是在`requestDidFinishLoad`我滑动屏幕之前，图像不会显示（未被调用）。

可能是什么问题呢？

提前致谢，

旅大

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:14:33.490

发现问题：我在使用 TTImageview 的控制器中重写了 viewWillAppear 方法，但忘记调用 super 方法。

# java - JFormattedTextField 文本消失

> ID：10929805
> 
> 赞同：0
> 
> 时间：2012-06-07T10:14:44.577
> 
> 标签：java, swing, jformattedtextfield

如果焦点在该 JFormattedTextField 上丢失，则文本消失。我不知道为什么......我希望你们中的任何人都会看到我的错误。看来，方法 classduration 不会完成，或者没有被调用.....虽然我没有得到任何异常。这对我来说很奇怪。

```
classdurationField = new JFormattedTextField(createFormatter("###"));
    classdurationField.addFocusListener(new FocusAdapter() {
        @Override
        public void focusLost(FocusEvent e) {
            if(classdurationField.getText() != null & !classdurationField.getText().equals("   "))
            {
                classduration();
                if(firstopening) checkifallinserted();
            }
        }
    });
    classdurationField.addKeyListener(new KeyAdapter() {
        @Override
        public void keyReleased(KeyEvent e) {
            if(e.getKeyCode() == KeyEvent.VK_ENTER)
            {
                if(classdurationField.getText() != null & !classdurationField.getText().equals("   "))
                {
                    classduration();
                    if(firstopening) checkifallinserted();
                }
            }
        }
    });
    panel.add(classdurationField, "cell 2 9,growx");
    classdurationField.setColumns(10); 
```

和classdurarion：

```
public void classduration()
{
    try {
        String temp = classdurationField.getText();
        temp = temp.trim();
        fkSchedule.changeclassduration(Integer.parseInt(temp));
    } catch (Exception e) {
        JOptionPane.showMessageDialog(this, e.getMessage());
    }
} 
```

//编辑：格式化的文本字段出现并且可见等。只是文本消失了

*我应该发布整个代码（它很多......）？*

# mysql - 为什么 MySQL 不在 WHERE IF 子句中使用索引？

> ID：10929808
> 
> 赞同：9
> 
> 时间：2012-06-07T10:14:47.873
> 
> 标签：mysql, indexing, where-clause

因为这个设置：

```
mysql> show global variables like '%indexes';
+-------------------------------+-------+
| Variable_name                 | Value |
+-------------------------------+-------+
| log_queries_not_using_indexes | ON    | 
+-------------------------------+-------+ 
```

慢查询日志不断收到：

```
# Time: 120607 16:58:30
# User@Host: xbtit[xbtit] @  [123.30.53.244]
# Query_time: 0  Lock_time: 0  Rows_sent: 1  Rows_examined: 16006
SELECT * FROM xbtit_files WHERE IF(soha_id is null OR soha_id = '', info_hash, soha_id)='6d63dd4ab199190b531752067414d4d6e6568f90'; 
```

试图解释这个查询：

```
mysql> EXPLAIN SELECT * FROM xbtit_files WHERE IF(soha_id is null OR soha_id = '', info_hash, soha_id)='6d63dd4ab199190b531752067414d4d6e6568f90';
+----+-------------+-------------+------+---------------+------+---------+------+-------+-------------+
| id | select_type | table       | type | possible_keys | key  | key_len | ref  | rows  | Extra       |
+----+-------------+-------------+------+---------------+------+---------+------+-------+-------------+
|  1 | SIMPLE      | xbtit_files | ALL  | NULL          | NULL | NULL    | NULL | 16006 | Using where | 
+----+-------------+-------------+------+---------------+------+---------+------+-------+-------------+ 
```

令我惊讶的是为什么 MySQL 不使用索引：

```
mysql> show index from xbtit_files;
+-------------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| Table       | Non_unique | Key_name  | Seq_in_index | Column_name | Collation | Cardinality | Sub_part | Packed | Null | Index_type | Comment |
+-------------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+
| xbtit_files |          0 | PRIMARY   |            1 | info_hash   | A         |       16006 |     NULL | NULL   |      | BTREE      |         | 
| xbtit_files |          1 | filename  |            1 | filename    | A         |       16006 |     NULL | NULL   | YES  | BTREE      |         | 
| xbtit_files |          1 | category  |            1 | category    | A         |           1 |     NULL | NULL   |      | BTREE      |         | 
| xbtit_files |          1 | uploader  |            1 | uploader    | A         |          16 |     NULL | NULL   |      | BTREE      |         | 
| xbtit_files |          1 | bin_hash  |            1 | bin_hash    | A         |       16006 |       20 | NULL   |      | BTREE      |         | 
| xbtit_files |          1 | ix_sohaid |            1 | soha_id     | A         |       16006 |     NULL | NULL   | YES  | BTREE      |         | 
+-------------+------------+-----------+--------------+-------------+-----------+-------------+----------+--------+------+------------+---------+ 
```

`FORCE INDEX`也不起作用：

```
mysql> EXPLAIN SELECT * FROM xbtit_files force index (PRIMARY) WHERE IF(soha_id is null OR soha_id = '', info_hash, soha_id)='6d63dd4ab199190b531752067414d4d6e6568f90';
+----+-------------+-------------+------+---------------+------+---------+------+-------+-------------+
| id | select_type | table       | type | possible_keys | key  | key_len | ref  | rows  | Extra       |
+----+-------------+-------------+------+---------------+------+---------+------+-------+-------------+
|  1 | SIMPLE      | xbtit_files | ALL  | NULL          | NULL | NULL    | NULL | 16006 | Using where | 
+----+-------------+-------------+------+---------------+------+---------+------+-------+-------------+ 
```

我必须将此查询拆分为 2 个操作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T13:26:10.630

在`MySQL`中，您不能在表达式上创建索引，并且优化器不够聪明，无法针对两个索引拆分您的查询。

用这个：

```
SELECT  *
FROM    xbtit_files 
WHERE   soha_id = '6d63dd4ab199190b531752067414d4d6e6568f90'
UNION ALL
SELECT  *
FROM    xbtit_files 
WHERE   soha_id = ''
        AND info_hash = '6d63dd4ab199190b531752067414d4d6e6568f90'
UNION ALL
SELECT  *
FROM    xbtit_files 
WHERE   soha_id IS NULL
        AND info_hash = '6d63dd4ab199190b531752067414d4d6e6568f90' 
```

每个查询都使用自己的索引。

您可以将其组合成一个查询：

```
SELECT  *
FROM    xbtit_files 
WHERE   (
        soha_id = '6d63dd4ab199190b531752067414d4d6e6568f90'
        OR
        (soha_id = '' AND info_hash = '6d63dd4ab199190b531752067414d4d6e6568f90')
        OR
        (soha_id IS NULL AND info_hash = '6d63dd4ab199190b531752067414d4d6e6568f90')
        ) 
```

并为此创建一个复合索引以`(soha_id, info_hash)`使其快速工作。

`MySQL`还能够使用 将来自两个索引的结果合并在一起，`index_merge`因此即使您没有创建复合索引，您也有可能在第二个查询的计划中看到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T11:26:17.540

您可以阅读[本文](http://www.sqlite.org/optoverview.html)以了解为什么`OR`运算符不适用于索引数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T10:56:33.507

因为函数是黑盒子：[http ://use-the-index-luke.com/sql/where-clause/functions/case-insensitive-search](http://use-the-index-luke.com/sql/where-clause/functions/case-insensitive-search)

**编辑**- 给你的上下文太少了，抱歉。

相关部分是：

```
It is a trap we all fall into. We instantly recognize the relation between 
LAST_NAME and UPPER(LAST_NAME) and expect the database to “see” it as well.
In fact, the optimizer’s picture is more like that:

SELECT first_name, last_name, phone_number
  FROM employees
 WHERE BLACKBOX(...) = 'WINAND';

The UPPER function is just a black box. The parameters to the function are
not relevant because there is no general relationship between the function’s
parameters and the result. 
```

这适用于所有函数：UPPER、IF 等等……

MySQL 被划掉是因为该问题的解决方案（在页面下方进行了描述）不适用于 MySQL。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T13:21:11.323

在可能会降低性能的地方使用函数（`LEFT`函数除外）。试试这个查询

```
SELECT * FROM xbtit_files WHERE 
((soha_id is null OR soha_id = '') AND (info_hash='6d63dd4ab199190b531752067414d4d6e6568f90')) OR
( (soha_id='6d63dd4ab199190b531752067414d4d6e6568f90')) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T18:38:00.247

主键基于 torrent 的哈希值，但您可以添加字段 id 并使用主键定义它，
如下所示：

```
ALTER TABLE `xbtit_files` DROP PRIMARY KEY;
ALTER TABLE `xbtit_files` ADD `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY FIRST;
ALTER TABLE `xbtit_files` ADD UNIQUE (`info_hash`); 
```

不要忘记将字段 info_hash 放入`UNIQUE`

# c# - Outlook 插件项目保存

> ID：10929811
> 
> 赞同：2
> 
> 时间：2012-06-07T10:15:09.627
> 
> 标签：c#, outlook, save, listener

我正在尝试编写一个插件来通知约会何时保存并执行一些数据。为此，我需要检查当活动检查器关闭时，该项目是否已保存。

我的问题是：当尝试将`WriteEvent`-listener 绑定到`FormRegionShowing`-method 中的当前项目时，我需要`ActiveInspector`to 事件获取当前项目。但是，当到达`ActiveInspector`那里时`null`，可能是因为在活动检查器实际活动之前调用了该方法。

但是，当尝试在 - 方法中绑定它时`FormRegionClosed`，write 事件永远不会触发。那么，我怎么知道`AppointmentItem`用户何时实际保存了一个？

编辑：我设法在`FormRegionShowing`-method 中绑定了 write 事件，但它仍然不会触发：

```
private void ADDIN_NAME_FormRegionShowing(object sender, System.EventArgs e){

    Outlook.AppointmentItem currentItem = (Outlook.AppointmentItem)this.OutlookItem;

    currentItem.Write += new Outlook.ItemEvents_10_WriteEventHandler(currentItem_Write);

    currentItem.AfterWrite += new Outlook.ItemEvents_10_AfterWriteEventHandler(currentItem_AfterWrite);

    MessageBox.Show("added handlers");

}

void currentItem_AfterWrite(){
    MessageBox.Show("item has been saved");
}

void currentItem_Write(ref bool Cancel){
    MessageBox.Show("item being saved");
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T13:04:37.930

您需要移动`Outlook.AppointmentItem`到类级别变量。在 COM 中，当函数超出范围时，RCW 将被垃圾回收。如果您想在 Office 中使用事件，您需要确保[查看事件模型](http://social.msdn.microsoft.com/Forums/en-US/vsto/thread/2debdd37-daf0-4966-8e12-f5eec01849e0)。另请参阅[相关的 SO 帖子](https://stackoverflow.com/a/10881641/175679)。

```
private Outlook.AppointmentItem currentItem; // keep events from getting GC'd

private void ADDIN_NAME_FormRegionShowing(object sender, System.EventArgs e){
    currentItem = (Outlook.AppointmentItem)this.OutlookItem;
    currentItem.Write += new Outlook.ItemEvents_10_WriteEventHandler(currentItem_Write);
    currentItem.AfterWrite += new Outlook.ItemEvents_10_AfterWriteEventHandler(currentItem_AfterWrite);
} 
```

# c# - LINQ 方法链接和细粒度错误处理

> ID：10929817
> 
> 赞同：6
> 
> 时间：2012-06-07T10:15:23.740
> 
> 标签：c#, linq, chaining, method-chaining

我有一个可以通过方法链很好地编写的方法：

```
return viewer.ServerReport.GetParameters()
    .Single(p => p.Name == Convention.Ssrs.RegionParamName)
    .ValidValues
    .Select(v => v.Value); 
```

但是，我希望能够在每个点进行一些检查，因为如果任何链接方法返回意外结果，我希望提供有用的诊断信息。

为了实现这一点，我需要打破我所有的链接，并在每个调用后面加上一个`if`块。它使代码的可读性降低了很多。

理想情况下，我希望能够编织一些链式方法调用，这将允许我在每个点处理意外结果（例如，抛出一个有意义的异常，例如`new ConventionException("The report contains no parameter")`第一个方法返回一个空集合）。任何人都可以提出一个简单的方法来实现这样的事情吗？

**编辑：**

这是使用@JeffreyZhao 的答案的结果：

```
return viewer.ServerReport.GetParameters()
    .Assert(result => result.Any(), "The report contains no parameter")
    .SingleOrDefault(p => p.Name == Convention.Ssrs.RegionParamName)
    .Assert(result => result != null, "The report does not contain a region parameter")
    .ValidValues
    .Select(v => v.Value)
    .Assert(result => result.Any(), "The region parameter in the report does not contain any valid value"); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T10:18:38.253

也许你可以使用这种方法。

```
static T Check<T>(this T value)
{
    if (...) throw ...;

    return value;
} 
```

然后：

```
xxx.Single(...).Check().Select(...).Check()... 
```

**更新：**

你甚至可以：

```
static T Validate<T>(this T value, Func<T, bool> validate, string errorMessage)
{
    if (!validate(value)) 
        throw new ValidationFailedException(errorMessage);

    return value;
} 
```

然后：

```
xxxx.Single()
    .Validate(v => v > 0, "Must be greater than zero")
    .NextStep()
    .Validate(...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:33:26.117

考虑使用[代码契约](http://research.microsoft.com/en-us/projects/contracts/)（例如添加后置条件以`ServerReport.GetParameters`确保方法不会返回空集合）。它们允许以更优雅的方式做你想做的事，而不是编写你自己的检查逻辑。

```
class ReportParameter { }
class ServerReport
{
    public ReportParameter[] GetParameters()
    {
        Contract.Ensures(Contract.Result<ReportParameter[]>() != null && Contract.Result<ReportParameter[]>().Length > 0,
            Resource1.Oops);

        // here's some logic to build parameters array...
        return new ReportParameter[0];
    }
} 
```

用法：

```
// Oops! I need at least one parameter!
var parameters = new ServerReport().GetParameters(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T10:25:15.900

您可以使用局部变量轻松地将过程拆分为单独的步骤：

```
var result1 = viewer.ServerReport.GetParameters();
var result2 = result1.Single(p => p.Name == Convention.Ssrs.RegionParamName);
var result3 = result2.ValidValues;
var result4 = result3.Select(v => v.Value);
return result4; 
```

现在您可以在步骤之间进行任何您想要的检查。

但是请注意，某些结果实际上并没有做任何工作。例如，最后一步不会产生一个列表作为结果，它会产生一个从 读取的枚举`ValidValues`，因此当您使用结果时，该步骤中的任何错误都会发生，而不是在此方法中。您可能希望`.ToList()`在某些步骤的末尾添加以实现结果。

# image-processing - 如何训练 HOG 描述符？LOGO识别/标志识别..

> ID：10929828
> 
> 赞同：0
> 
> 时间：2012-06-07T10:15:44.400
> 
> 标签：image-processing, opencv, object-detection

我正在寻找一些可以为某些对象训练 HOG 描述符的工具/软件。或者如果有任何直接的教程可以做到这一点，请提供它的链接。或建议我如何训练猪描述符。基本上我的目标是从电视图像中检测频道的标志。节目的图像（上电视）是从相机拍摄的。.. 这个图像是我们程序的输入，用于识别拍摄图像的通道。我尝试了基于 surf/shift 的功能，但这些对于匹配模式与 3000 个图像（每个频道 10 个图像）的模式非常慢。而基于 haar 的功能需要大量时间来训练超过 300 个电视频道。我们需要接近实时（< 2 秒）的程序性能..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T12:20:45.007

[HOG 用于“检测对象”opencv](https://stackoverflow.com/questions/7642296/hog-for-detecting-object-opencv)

阅读这篇文章，我的建议是请在这个论坛上查看相同的问题，准备好很多人回答了相同的问题。

无论如何，如果您仍然不理解任何人的答案，我会给您整个训练和测试代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-24T10:19:49.830

你可以试试这个有用的工具 [http://classifieropencv.codeplex.com/](http://classifieropencv.codeplex.com/)

# sql-server - MSSQL 合并复制 自动身份范围管理

> ID：10929829
> 
> 赞同：3
> 
> 时间：2012-06-07T10:15:45.017
> 
> 标签：sql-server, constraints, replication

我在大型数据库上设置了 MSSQL 合并复制。其中一个表有 15 亿条记录，并导致快照代理在此表上超时。所以首先我将表的数据导出到 .csv 文件，截断表，然后再次运行快照代理。现在成功了。制作快照并同步订阅者后，我想从 .csv 文件重新导入数据。但是，合并复制使用具有我无法更改的固定值的自动“身份范围管理”。这些值之一包含下一个起始值。插入表中的每条新记录都将从该值开始递增 1。但是，导出的数据当然已经有了它们的 ID 值，我也想再次导入这些对应的 ID。

我将如何通过自动身份范围管理重新导入这些数据？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-26T16:43:58.400

您可以执行以下操作：

1.  确保 .CSV 文件中的 ID 在分配给 Publisher 的范围内。

2.  运行`SET IDENTITY_INSERT <Table Name> ON`- 这将允许插入标识值

3.  将数据插入表中。有两种方法可以做到：

    *   一次性插入整个文件

或者

*   插入行的子集，然后确保它被复制：创建 SSIS 包，每 100k 或 1M 行将插入它们，然后运行复制代理。

这是一个技巧：插入的行`Bulk_Insert`或`BCP`不被复制代理拾取。因此，在运行复制代理之前，请执行或运行带有选项`sp_addtabletocontents Table_Name`的 BCP 。`FIRE_TRIGGERS`

4\. 运行 SET IDENTITY_INSERT OFF` - 禁止插入标识值

您可以在 10 个样本行上对其进行测试，然后重置两个系统。

# java - 编写优雅的点击处理程序

> ID：10929831
> 
> 赞同：2
> 
> 时间：2012-06-07T10:15:47.433
> 
> 标签：java, android, gwt

**我们通常通过以下方式（方式 1** ）在按钮（在 GWT 或 Swing 或 Android 中）上编写点击处理程序。

```
class A {

    public void myMethod() {

        int count = 0 ;

        Button myButton = new Button("x");
        myButton.addClickHandler(new ClickHandler() {
          public void onClick(ClickEvent event) {
              count = 1 ;
          }

        });

    }
} 
```

但是，我们也可以为点击处理程序编写一个不同的类并像下面这样实现它（**方式 2**）：

```
class A implements ButtonClickInterface {

    int count ;
    public void myMethod() {

        count = 0 ;

        Button myButton = new Button("x");
        myButton.addClickHandler(new MyClickHander(this));

    }

    @Override
    public void buttonClicked() {
        count = 1 ;        
    }
}

interface ButtonClickInterface {
    public void buttonClicked() ;
}

class MyClickHandler implements ClickHandler {

    ButtonClickInterface buttonClickInterface ;

    public MyClickHandler(ButtonClickInterface buttonClickInterface) {
        this.buttonClickInterface = buttonClickInterface ;
    }

    @Override
    public void onClick(ClickEvent event) {
        buttonClickInterface.buttonClicked() ;         
    }

} 
```

在这里，我必须将`count`其作为类变量。这有什么缺点吗？上述实现方式还有其他缺点吗？我实现 ClickHandler 的两种方式在复杂性、耦合性、创建的对象数量和代码可读性方面如何相互对抗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:53:07.150

您还可以在 xml 中定义 clickHandler。

把它放在你的 Activity 类中：

```
public void myClickEvent(View view) {
    //Do something
} 
```

并将其放入您的布局 .xml 中：

```
<Button
        android:id="@+id/myId"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button1"
        android:onClick="myClickEvent"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:36:24.400

您的第二个解决方案太复杂了。

我经常在 Android 上这样做（伪代码）：

```
class A implements OnClickListener {

    onCreate() {
        myButton.setOnClickListener(this);
    }

    @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.myButtonId:
                // do something
                break;
            // more cases
            default: 
                Log.w(LOG_TAG, "not implemented");
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T10:56:15.713

当点击处理程序仅用于一个地方的单个按钮时，我宁愿选择

```
Button myButton = new Button("x");
myButton.addClickHandler(new ClickHandler() {
          public void onClick(ClickEvent event) {
              count = 1 ;
          }

}); 
```

将单击处理程序放在单独的类中仅在处理程序可以被其他控件重用时才有用。至于你的问题，我通常会选择 options `1`。选项`2`太复杂了，并且引入了另一种并不真正需要的间接方式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T12:24:57.063

使用 GWT 并使用 UiBinder，您还可以使用`@UiHandler`方法：

```
@UiField Button myButton; // will be injected by UiBinder

@UiHandler("myButton") // will be bound to my Button as ClickHandler by UiBinder
void incrementClick(ClickEvent event) {
  count += 1;
} 
```

# c# - MVC3 JSCOLOR 值

> ID：10929834
> 
> 赞同：1
> 
> 时间：2012-06-07T10:15:55.737
> 
> 标签：c#, asp.net-mvc-3, jscolor

我对 MVC 很陌生，在我看来，我试图从 JScolor 中获取价值，但我遇到了障碍，而且似乎没有任何信息，那么它是如何完成的？我应该添加我正在视图中执行此操作，并尝试通过 EF4.1 进行更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:25:56.003

如果您在此视图中使用模型。你可以简单地写

```
@Html.TextBoxFor(m => m.selectedColor, new { @class = "Color" }) 
```

其中 selectedColor 是模型中的一个属性

在控制器中，您可以很好地获得该模型的属性

示例控制器代码

```
 public ActionResult SaveColor(SelColor model){

 string myColor =  SelColor.selectedColor; 
 ...
 ..
 } 
```

在上面的代码中，SelColor 是模型的名字 SaveColor 是控制器的 Action

在视图中，使用 Html.BeginForm() 调用所需控制器的操作。

# c - goto 构造是否创建新变量

> ID：10929835
> 
> 赞同：1
> 
> 时间：2012-06-07T10:15:56.687
> 
> 标签：c, goto

在下面的一段代码中

```
label:
int a;
goto label; 
```

它是创建新变量还是使用相同的变量
当我们使用 goto 一次又一次调用函数时会发生什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T11:53:12.973

首先，这不会建立，因为标签必须后跟*语句*，而声明不是语句：

> ### 6.8.1 标记语句
> 
> **句法**
> 
> ```
> 1 标记语句：
>         *标识符* ： *语句*
>         case *常量表达式* ： *语句*
>         默认值 ： *语句*
> ```

其次，这*不应该*创建一个新变量。 `goto`不会引入新范围，因此不会为`a`每次迭代创建新实例。甚至在您引入新范围的情况下*，*例如

```
for (;;) {int a; ... } 
```

的空间`a`（通常）只分配一次；即使*从逻辑上讲*，您正在处理`a`每个循环迭代的新实例，但在*物理上*，您（通常）正在回收相同的内存位置。任何在物理上创建新空间`a` *而不回收先前空间的*编译器都将严重破坏 IMO。

只是为了咯咯笑，我写了以下内容：

```
#include <stdio.h>

#ifdef __STDC_VERSION__
  #if __STDC_VERSION__ >= 199901L
    #define C99
  #endif
#endif

int main(void)
{
label:
  #ifdef C99
    ;
  #endif
  int a;
  printf("&a = %p\n", (void *) &a); 
  goto label;

  return 0; 
} 
```

用 构建它`gcc -std=c99 -pedantic -Wall -Werror`，我得到以下输出：

```
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c
&a = 0xbf98ad8c

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:42:01.887

这个问题也可以是“编译器如何以及何时分配局部变量？”，因为这就是这里的问题。

假设我们有这样的代码：

```
{
  lots_of_code();

  int x;

  lots_of_code();

  x = 5 + something;

  lots_of_code_not_using_x();

  return x;
} 
```

此代码在本地范围内。在这种情况下，它看起来像函数的内部，但相同的规则将适用于 if 语句、for 循环等的内部。遇到此代码时，编译器会问自己一些问题：

*   我是否需要分配 x 或者我可以优化它吗？不，在这种情况下 x 不能在不改变代码含义的情况下被优化掉。
*   分配 x 的最佳位置在哪里？这完全是特定于 CPU 的：x 可以分配在堆栈或 CPU 寄存器等中。
*   我什么时候分配 x？对此的回答始终是：“第一次使用时”。在这种情况下，在执行该行之前肯定不会分配 x `x = 5 + something;`。即使这样也不一定分配，编译器也可以重新排序指令，选择首先执行`lots_of_code_not_using_x();`，如果这样更有效并且不会改变代码的含义。在这种情况下，当代码到达 return 语句时分配 x。

x 由标准保证从*进入范围*开始一直有效，直到范围结束。9899:2011 6.2.4

> “5 其标识符被声明为没有链接且没有存储类说明符 static 的对象具有自动存储持续时间，某些复合文字也是如此......” /--/
> 
> “6 对于这样一个没有可变长度数组类型的对象， **它的生命周期从进入与其关联的块开始，直到该块的执行以任何方式结束**。（进入封闭的块或调用函数暂停，但不结束，执行当前块。）如果递归进入块，每次都会创建一个新的对象实例。对象的初始值是不确定的。如果为对象指定了初始化，它是在块的执行中每次到达声明或复合文字时执行；否则，每次到达声明时值变得不确定。"

所以回答这个问题：不，你的 goto spaghetti 丝毫不会影响变量的分配方式。例如，如果有任何代码使用该变量，`int a = 0;`那么该代码可能会一遍又一遍地执行，这取决于编译器优化整个 goto 混乱的智能程度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T10:56:04.430

否 它不会再次声明该变量并为其分配任何内存。它将使用相同的变量。

而且你的程序是错误的，标签不能在任何声明之前，它必须在语句之前，并且声明不是语句。因此，要更正它，请在标签后加一个分号。

# mysql - utf8_bin 与 utf_unicode_ci

> ID：10929836
> 
> 赞同：45
> 
> 时间：2012-06-07T10:15:57.623
> 
> 标签：mysql, database, collation, relation

我的餐桌网站

```
Website_Name//column name
Google
Facebook
Twitter
Orkut
Frype
Skype
Yahoo
Wikipedia 
```

我使用 utf8_bin 排序规则，然后我在网站中搜索维基百科的查询是

```
Select Website_Name from Website where lower(Website_Name)='wikipedia' 
```

如果我使用 utf8_unicode_ci 那么我在网站中搜索维基百科的选择查询是

```
Select Website_Name from Website where Website_Name='wikipedia' 
```

现在我想根据以下查询知道哪种排序规则最好

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-07T10:20:14.280

这取决于你需要什么。

`utf8_bin`排序规则纯粹基于字符串的 Unicode代码[点](http://en.wikipedia.org/wiki/Code_point)值来比较字符串。如果所有代码点都具有相同的值，则字符串相等。但是，当您有用于组合标记（组合与分解）的字符串具有不同组合的字符串或规范等效但不具有相同代码点值的字符时，这就会分崩离析。在某些情况下，使用`utf8_bin`会导致字符串与您期望的不匹配。从理论上讲，`utf8_bin`这是最快的，因为没有对字符串应用 Unicode 规范化，但它可能不是您想要的。

`utf8_general_ci`使用特定于语言的规则应用 Unicode 规范化并不区分大小写地比较字符串。`utf8_general_cs`做同样的事情，但区分大小写比较字符串。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-07T10:40:57.077

`utf8_unicode_ci`如果您认为字母大小写通常对于您想要查找的结果并不重要，我个人会选择。

排序规则不仅在运行时使用，而且在 MySQL 构建索引时使用。因此，如果这些列中的任何一个出现在索引中，根据该排序规则的比较规则查找数据将几乎与以往一样快。

在那些您不想要不区分大小写的匹配的情况下，不要应用大写或小写。相反，`BINARY`在 utf8 列前面应用关键字来强制进行文字代码点比较，而不是根据排序规则进行比较。

```
mysql> create table utf8 (name varchar(24) charset utf8 collate utf8_general_ci, primary key (name));
Query OK, 0 rows affected (0.14 sec)

mysql> insert into utf8 values ('Roland');
Query OK, 1 row affected (0.00 sec)

mysql> insert into utf8 values ('roland');
ERROR 1062 (23000): Duplicate entry 'roland' for key 'PRIMARY'
mysql> select * from utf8 where name = 'roland';
+--------+
| name   |
+--------+
| Roland |
+--------+
1 row in set (0.00 sec)

mysql> select * from utf8 where binary name = 'roland';
Empty set (0.01 sec) 
```

这应该比使用 lower 或 upper 快得多，因为在这些情况下，MySQL 首先需要复制列值并修改其字母大小写，然后应用比较。使用 BINARY 时，它将首先使用索引来查找匹配项，然后逐个代码点进行代码点比较，直到发现值不相等，这通常会更快。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-02-18T13:24:25.813

我使用的是默认的'utf8_unicode_ci'，我不得不将其更改为：

```
 * @ORM\Table(name = "Table", options={"collate"="utf8_bin"}) 
```

因为我的一些复合主键由文本字段组成。可悲的是，'utf8_unicode_ci' 将“poistný”和“poistny”解析为相同的主键值，并在插入刷新时以崩溃告终。我不能简单地更改复合主键的一部分的排序规则，必须删除表并重新创建。希望它可以节省其他人的时间..

# android - 应用程序在没有 Wi-Fi 连接的情况下无法运行

> ID：10929847
> 
> 赞同：0
> 
> 时间：2012-06-07T10:16:49.697
> 
> 标签：android, connection, wifi

我有一个问题要问你，如果 wi-fi 不可用，我在 seea 中，或者如果它被禁用，应用程序崩溃的可能性：

我对网络的申请许可一般是：

```
android.permission.ACCESS_WIFI_STATE
android.permission.ACCESS_NETWORK_STATE
android.permission.INTERNET
android.permission.CHANGE_WIFI_STATE
android.permission.CHANGE_NETWORK_STATE 
```

一些用户抱怨如果没有 Wi-Fi 连接，我的应用程序将无法运行。

我从来没有关于这个问题的经验。

自然，我的应用程序不仅仅提供网络服务。

谢谢并恭祝安康

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:24:36.843

在进行网络请求之前，您应该始终检查您的网络连接。要检查您是否有网络连接，您可以使用以下代码段：

```
 public static boolean isOnline(Context applicationContext){
    ConnectivityManager cm = (ConnectivityManager) applicationContext.getSystemService(Context.CONNECTIVITY_SERVICE);
    try{ 
        return cm.getActiveNetworkInfo().isConnectedOrConnecting();
    }
    catch(NullPointerException npe){

        return false; //Airplane mode is on
    }
} 
```

# php - CSS 取决于结果 PHP if 语句

> ID：10929852
> 
> 赞同：0
> 
> 时间：2012-06-07T10:17:06.220
> 
> 标签：php, css

我写了一个小脚本，只要将某个值设置为 0，项目就应该是**粗体**。但我觉得我在重复自己……有没有办法避免这种重复？

```
$output .= '<td>';
if ('0' == $value['treated']) {
    $output .= '<b>';
}
$output .= $value['from'];
$output .= substr($value['message'], 20);
if ('0' == $value['treated']) {
     $output .= '</b>';
}
$output .= '</td>'; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:18:20.850

你可以设置一个类吗？

```
$output .= '<td' . ('0' == $value['treated'] ? ' class="bold"' : '') . '>';
$output .= $value['from'];
$output .= substr($value['message'], 20);
$output .= '</td>'; 
```

然后你需要做的就是添加

```
.bold { font-weight: bold; } 
```

到你的 CSS 文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:19:50.903

```
$output = $value['from'] . substr($value['message'], 20);

if ('0' == $value['treated']) {
    $output = "<b>$output</b>";
}

$output = "<td>$output</td>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:21:05.783

我不知道这是否是您要查找的内容，但您可以缓冲内容：

```
$output .= "<td>";
$buffer = $value['from'];
$buffer = substr($value['message'], 20);
$output .= ('0' == $value['treated'])
    ? "<b>" . $buffer . "</b>"
    : $buffer; 
```

编辑：我看到 deceze 是第一个 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T10:23:04.217

这是您可以实现的简单方法

```
$output .= '<td>';
        $bs = '';
        $be = '';
        if ('0' == $value['treated']) {
            $bs = '<b>';
            $be = '</b>';
        }
        $output .= $bs;
        $output .= $value['from'];
        $output .= substr($value['message'], 20);
        $output .= $be;
    $output .= '</td>'; 
```

或者

```
$output .= '<td';
    if ('0' == $value['treated']) {
        $output .=' style="font-weight:bold;"';
    }
    $output .= '>';
    $output .= $value['from'];
    $output .= substr($value['message'], 20);
$output .= '</td>'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T13:10:09.497

```
$dom = new DOMDocument;
$dom->loadHTML('<html/>');
$body = $dom->documentElement->appendChild($dom->createElement('body'));
for ( $i = 0; $i < 100; ++$i ) {
    $div = $body->appendChild($dom->createElement('div'));
    if ( rand() % 2 ) {
        $div->setAttribute('class', 'highlighted');
        $div->nodeValue = 'bold';
    } else {
        $div->nodeValue = 'normal';
    }
}
die($dom->saveHTML()); 
```

# jquery-mobile - 在 jQuery Mobile 页面中显示和隐藏内容

> ID：10929854
> 
> 赞同：1
> 
> 时间：2012-06-07T10:17:15.440
> 
> 标签：jquery-mobile

我的 jQuery 移动应用程序中有两个页面。当第一页上的列表项被点击时，用户将被带到第二个 html 页面。第二页有一个导航栏，它有两个按钮。我希望这两个导航栏按钮在页面的内容区域中显示/隐藏一个 div。我找不到要使用的事件处理机制。document.ready 不起作用，pageinit 也不起作用。有人可以指导我样品吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T17:26:48.480

如果您的意思是您有两个（或更多）单独的 HTML 文件，您需要了解如何在 jQM 中正确处理事件，所以这里有一个快速介绍。

1.  jQM 甚至将单独的 HTML 文件添加到单个 DOM 中，通过 AJAX 加载它们

2.  通过 AJAX 加载的每个页面都会触发一个`pageinit`和一个`pageshow`事件，不同之处在于当您导航回页面时 pageshow 会重新触发

3.  第一个页面之后的每个页面只加载元素内的`<div data-role="page/dialog"></div>`内容，因此如果您的后续页面中有 JS`<head/>`没有被拉入，那么您的第二个页面中**可能有您的第二个页面的导航栏 JS 代码，这是需要注意的一件大事**

4.  那么你如何管理你的 JS 并使其保持井井有条呢？在我们的生产 jQM 应用程序中，我们一开始就加载了所有的 JS，无论如何它并没有太大缩小。我们有一个入口点，每个页面都包含 JS 代码，因此无论您从哪个页面输入，我们只需要一次加载我们需要的所有 JS - 不再加载 JS。**警告如果你有 JS，`<div data-role="page"/>`它会在你每次访问页面时重新触发，**只有在你知道它的行为时才这样做

5.  您的入口点应该是一个函数，现在加载的每个页面/对话框都将触发此事件处理程序，您可以通过添加数据属性或类或您想要的任何内容`$(document).on('pageinit pageshow', 'div:jqmData(role="page"), div:jqmData(role="dialog")', function(event){`来确定它是`pageinit`或`pageshow`基于AND 加载的页面- 然后只需使用 switch 语句来处理所有情况。`event.type``<div data-role="page" data-pageIdentifier="home etc.."></div>`

6.  您现在拥有所需的所有信息，并且`this`是对当前页面的方便引用，将事件侦听器与`.on`函数绑定，因此您在页面而不是文档根目录（例如导航栏的内容）进行侦听。- 如果你使用`.live`它，它将监听整个文档（尽管并非所有页面都被 DOM 缓存），不管这对性能不利！**实际上在一个页面中，我们总是`.find`从页面开始使用，例如 $this.find('div.something')，我们从不使用 $('div.something)，它会爬取你的整个 DOM，可能会碰到其他页面，更糟糕的是给您的错误结果不在当前页面内**，所以另一个大错误是执行类似的操作`$('img.selectItem').bind('click'...`你可能在另一个 DOM 缓存页面中有一个 img.selectItem，所以你会绑定到比你想要的更多的东西 - 我会做类似的事情`$this.find('img.selectItem').bind(` *（其中 $this 是当前页面）*

*显然我们最终有很多代码，所以我们编写了一个处理程序对象来调用其他 JS 文件中的函数 - 你可以使用 RequireJS 但我们从来不需要*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T11:44:06.227

检查这个 jsfiddle 上的代码：http: [//jsfiddle.net/nirmaljpatel/6UbGp/](http://jsfiddle.net/nirmaljpatel/6UbGp/)

# sql-server-2008 - EF 或存储过程安全

> ID：10929856
> 
> 赞同：1
> 
> 时间：2012-06-07T10:17:36.453
> 
> 标签：sql-server-2008, entity-framework

我试图说服我的团队使用像实体框架这样的 ORM 层，而不是使用从存储过程创建数据表的老式方法。

他们认为存储过程更安全，因为您可以确保修改数据库的唯一方法是通过存储过程。我们拥有数据库，应用程序可以在内部或由第三方构建。

担心的是，如果我们使用实体框架，我们将不得不放松数据库的安全性，第三方可能会开始编写代码来直接修改数据库。

你能告诉我们是否可以控制数据库的安全性，使得数据库只能由 EF 修改，而不能直接修改。或者，如果我们可以控制 EF，使 EF 只能进行选择，而不能进行插入或删除。

对不起，如果我听起来有点模棱两可，但我在数据库安全方面不是很擅长。我们使用的是 SQL Server 2008。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:31:16.893

数据库安全性仍然存在于数据库中。您仍然可以控制用户是否只能选择数据或执行任何其他操作。那是与EF无关的东西。

使用 EF，您甚至可以使用当前模型 - 您可以映射存储过程（仅允许使用 EDMX）以对每个实体进行更新、插入和删除操作，并且只允许选择数据并执行那些映射的存储过程。如果您需要更高级别的安全性，您甚至可以将数据库视图映射到 EF 并使用映射的存储过程进行插入、删除和更新，而无需直接访问数据库表。

顺便提一句。可以根据连接到数据库的用户/角色来控制数据库安全性，因此您的应用程序可以具有与第三方应用程序不同的权限。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:31:41.657

不，您不能使不受信任的应用程序受信任。应用程序只是将 SQL 字符串发送到数据库，即使在使用 EF 时也是如此。SQL Server 对 EF 一无所知。它无法确保使用了 EF。

我会通过代码审查和数据库权限来解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T14:14:58.587

找到一个有用的链接：

[http://msdn.microsoft.com/en-us/magazine/ff898427.aspx](http://msdn.microsoft.com/en-us/magazine/ff898427.aspx)

# ruby - 在 vim 中看不到自动完成和代码提示

> ID：10929858
> 
> 赞同：1
> 
> 时间：2012-06-07T10:17:41.717
> 
> 标签：ruby, linux, vim, autocomplete, code-hinting

在 vim 中编写 ruby​​ 代码时，它不会自动完成代码[，如此处所示](http://cx4a.org/software/rsense/manual.html#Vim)。我也没有看到代码提示。这是为什么 ？

我为安装 RSense 和 Vim 插件执行的步骤。所有操作均以 root 身份执行。[我完全按照手册中的规定做了。](http://cx4a.org/software/rsense/manual.htm)

```
su
password : ************
$ cp -av rsense-0.3 ~/opt
$ cd /root/opt/
$ chmod +x bin/rsense
$ bin/rsense version
Rsense 0.3
$ ruby etc/config.rb > ~/.rsense
$ cat ~/.rsense
$ mkdir -p ~/.vim/plugin
$ cp etc/rsense.vim ~/.vim/plugin 
```

以下是我添加到`vimrc`文件中的两行：

```
let g:rsenseHome = "/root/opt/"
let g:rsenseUseOmniFunc = 1 
```

我错过了什么吗？那是什么 ？[与手册](http://cx4a.org/software/rsense/manual.html#Install_Vim_Plugin)中给出的`let g:rsenseHome = "/root/opt/"`相比还可以。`let g:rsenseHome = "$RSENSE_HOME"`

我`Rsense`在阅读[文档](http://www.ruby-lang.org/en/documentation/)后使用过。

选择目录中的 RSense 0.3：

![在此处输入图像描述](../Images/402734f07d8c8b0c274b1b21e34021a0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-08T18:37:21.653

绝对不要以 root 身份放入，但除此之外，使用`<C-x><C-u>`组合键打开自动完成

要获得“键入时”自动完成，您将需要另一个插件，例如[YouCompleteMe](https://github.com/Valloric/YouCompleteMe)

# javascript - javascript innerHTML 替代方案

> ID：10929859
> 
> 赞同：0
> 
> 时间：2012-06-07T10:17:52.543
> 
> 标签：javascript, dom

我正在使用 innerHTML 为页面上的某些元素分配更新的值。但是innerHTML导致页面上的jquery停止工作，页面的css用完了。

所以我尝试用 DOM 元素替换，但它不起作用。知道如何解决这个问题吗？谢谢 ！

```
var names =['id','name','quantity','description']; 
    var len = names.length;
    for (var i = 0; i < len; i++){
        var el = document.getElementById(\'product_\'+names[i]+\'_main\');  
        var el2 = document.getElementById(\'product_\'+names[i]+selection);
       if(el.hasChildNodes()) {                                 
         el.replaceChild(el2.firstChild.nodeValue, el.firstChild);
       } 
      if(el && el2) el.innerHTML=el2.innerHTML; /* this part works, but it caused the page CSS to run and jquery no longer working */
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:21:28.090

由于您已经在使用 jQuery，您可以使用它的 .html() 方法：

```
e1.html( e12.html() ); 
```

这应该与此相同：

```
el.innerHTML=el2.innerHTML; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:25:25.910

如果您已经在页面中加载了 JQuery，则可以使用 JQuery 选择器和 $(element).html() 来获取 innerHTML。

```
var names =['id', 'name', 'quantity', 'description']; 

for (var i = 0; i < names.length; i++){
    var el = $("#product_"+names[i]+"_main");  
    var el2 = $("#product_"+names[i]+selection);

    if (el.children().size() > 0) {                                 
        // Your code here
    } 

    if (el && el2) {
        el.html() = el2.html();
    }
} 
```

未经测试的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:28:11.490

```
el.replaceChild(el2.firstChild.nodeValue, el.firstChild); 
```

咦，你在那里做什么？您不能替换 nodeValue，只能替换节点：

```
el.replaceChild(el2.firstChild, el.firstChild); 
```

this will move the `firstChild` of `el2` into `el`. If you want to copy it, you'd need to clone it before. If you want all of the children, you'd need to loop over them.

If that `firstChild` is a text node, you can easily (re)set its value, and copy those of el2:

```
if (el.firstChild && el.firstChild.nodeType == 3
  && el2.firstChild && el2.firstChild.nodeType == 3)
    el.firstChild.nodeValue = el2.firstChild.nodeValue; 
```

# jquery - 将输入限制为具有最大值的整数

> ID：10929863
> 
> 赞同：2
> 
> 时间：2012-06-07T10:18:01.727
> 
> 标签：jquery, jquery-plugins

我有一个输入字段，我想将值限制为仅整数。

我正在使用[插件 TexoTela jQuery numeric](http://www.texotela.co.uk/code/jquery/numeric/)来执行此操作，效果很好。

不过，我理想中想要的是将此值限制为 let say `30`，因此用户不能输入高于此值的值。（只能输入 0 到 30 之间）

我可以用 jQuery 做到这一点吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:30:25.137

使用 HTML5，您可以使用`input`type 的元素`number`：

```
<input type="number" name="quantity" min="1" max="30" />​ 
```

[**-- 看演示 --**](http://jsfiddle.net/P9cRZ/)

或者，如果您需要支持 HTML5 之前的浏览器，正如[您的评论之一所](https://stackoverflow.com/questions/10929863/restricting-input-to-an-integer-with-max-value/10930039#comment14257978_10929863)建议的，您可以使用一个`select`元素：

```
<select>
    <option>1</option>
    .....
    <option>30</option>
</select>​ 
```

[**-- 看演示 --**](http://jsfiddle.net/P9cRZ/1/)

# macos - NSView 和 NSViewController 的区别

> ID：10929866
> 
> 赞同：2
> 
> 时间：2012-06-07T10:18:16.490
> 
> 标签：macos, cocoa, xcode4, osx-lion

NSView 和 NSViewController 有什么区别是 XCode 4 Cocoa 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:30:28.897

NSView 只是 MVC 中的视图。NSViewController 有一个 NSView（或 NSView 的子类），并且还包含 MVC 模型中控制器的代码。

我可能是错的，因为我是从我对 iOS 的经验中得出的答案，但我认为对于 OSX 来说应该是差不多的。

# c - 使用来自非 C 程序的 C 库：是否有必要显式初始化“幕后”C 库？

> ID：10929870
> 
> 赞同：4
> 
> 时间：2012-06-07T10:18:25.500
> 
> 标签：c, startup, libc, crt

我知道当你编译和链接一个 C 程序时，你把它链接到

1.  C 库
2.  C 运行时启动代码

我想知道我是否编写了一个程序（用一种新语言，或者只是 C 而没有链接到这个代码）并将它直接链接到一个 C 代码共享库（比如 zlib 或 gsl 或 fftw 之类的）并省略 C 库和 C 启动代码（假设我的程序将使用它的魔法加载外部库本身），这会“正常工作”吗？

我知道 CRT 启动中有一些初始化代码，所以我想知道如何在不让我的应用程序本身依赖于 C 库的情况下调用所需的函数：因此加载外部 C 库将调用必要的初始化代码（如果任何，这是问题），否则只需加载操作系统库/接口。

我问的原因是我想用一个标准库编写一种语言，它直接连接到 OS API，不像大多数 C++ 实现，它是建立在 C 库之上的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:23:46.730

我使用了许多其他语言的 C 共享库。是否必须显式初始化共享库取决于库。通常，它会在加载时被隐式初始化，但有些库需要额外的初始化。阅读文档。

当然，我的程序（C 或其他语言）的代码也必须初始化，但这是编译器/链接器通常会处理的事情，默认情况下链接到启动代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T17:48:55.097

看看这里[https://blogs.oracle.com/ksplice/entry/hello_from_a_libc_free](https://blogs.oracle.com/ksplice/entry/hello_from_a_libc_free)
这样你就可以在不依赖任何包含 libc 的库的情况下启动程序，然后可以根据需要加载和使用库。

# c - 中断与对设备进行轮询

> ID：10929875
> 
> 赞同：2
> 
> 时间：2012-06-07T10:18:44.977
> 
> 标签：c, windows-7, embedded

在我的申请中没有。的设备（相机、A/D、D/A 等）正在与服务器通信。我有两个选项可以节省设备的功耗，因为并非所有设备都必须始终工作：

1- 进行轮询，即每个设备定期继续查看文件的内容，并在其中获得唤醒或睡眠的值。如果它发现唤醒，那么它就会醒来并完成它的工作。

在这种情况下，实际上设备将处于睡眠状态，但驱动程序将处于活动状态并进行轮询。

2-使用中断，我可以在需要时唤醒设备。

我无法决定走哪条路以及为什么。有人可以在这方面启发我吗？

**平台：Windows 7，32 位，在 Intel Core2Duo 上运行**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T10:26:40.327

轮询本质上是不精确的。你的目标精度越高，轮询就越浪费。理想情况下，仅当您无法对中断进行某些操作时才应考虑轮询；否则，应该首选使用中断。

此规则的一个例外是，如果您想有意地“限制”某事，例如，当您可能每秒获得多个事件，但您希望每分钟只对一个事件做出反应时。在这种情况下，您经常使用轮询和中断的组合，其中中断设置一个标志，轮询完成真正的工作，但仅在设置标志时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T12:02:16.227

如果要定期唤醒您的设备，我会以适当的频率进行轮询（这总是更容易设置，因为它只是在看一点）。如果唤醒事件是异步的，我宁愿选择中断驱动的架构，尽管有代码和电子开销。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T06:22:28.183

好吧，这取决于您的硬件和软件结构以及软件的复杂性。选择中断机制而不是轮询总是更好。

与轮询一样，您的控制器将忙于不断地轮询硬件以检查所需的值是否可用。

虽然使用中断机制将释放控制器以执行其他任务，并且当中断出现时，您的 ISR 可以执行特定需要的任务。

# jquery - IFRAME javascript 关闭（）？

> ID：10929877
> 
> 赞同：2
> 
> 时间：2012-06-07T10:18:52.493
> 
> 标签：jquery

我似乎无法让 self.close() 在 iframe 上工作。我知道它们不是弹出窗口，所以它们没有弹出窗口很正常，但是有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:26:39.470

关闭 iFrame 是父母应该做的事情。例如，只需将其删除，就像[Frank Astin在他的](https://stackoverflow.com/users/886499/frank-astin)[链接](http://jsfiddle.net/8CQJG)中演示的那样。

# asp.net-web-api - 我在哪里可以找到 ASP.NET Web Api Beta 版本的代码？

> ID：10929878
> 
> 赞同：0
> 
> 时间：2012-06-07T10:18:54.000
> 
> 标签：asp.net-web-api

对于故障排除，我想查看并调试 asp.net web api 的代码，我想它来自这里：

[http://aspnetwebstack.codeplex.com/](http://aspnetwebstack.codeplex.com/)

但是找不到 web api 代码版本 BETA 与 MVC 4 beta 集成的分支，最新代码与 beta 版本不同

编辑：MVC 4 RC 刚刚发布，看来我也需要找到 MVC 4 RC 的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T13:11:54.060

不幸的是，我们实际上并没有为 beta 创建一个分支——我们是从 RC 开始的。是的，有一些变化（见这里 [0]）——您可以在 [1] 找到一些关于如何处理它们的信息。这里还有对 RC NuGet 包的描述 [2]

谢谢，

亨里克

[0] [http://weblogs.thinktecture.com/cweyer/2012/06/aspnet-web-api-changes-from-beta-to-rc.html](http://weblogs.thinktecture.com/cweyer/2012/06/aspnet-web-api-changes-from-beta-to-rc.html)

[1] [http://kamranicus.com/Blog/Posts/48/tips-for-updating-from-webapi-beta-to-webapi-rc](http://kamranicus.com/Blog/Posts/48/tips-for-updating-from-webapi-beta-to-webapi-rc)

[2] [http://blogs.msdn.com/b/henrikn/archive/2012/06/01/asp-net-mvc-web-api-and-web-pages-nuget-packages.aspx](http://blogs.msdn.com/b/henrikn/archive/2012/06/01/asp-net-mvc-web-api-and-web-pages-nuget-packages.aspx)

# javascript - 幻灯片横幅 .js +index+

> ID：10929879
> 
> 赞同：2
> 
> 时间：2012-06-07T10:18:57.667
> 
> 标签：javascript

说到 JAVA 脚本，我有点菜鸟，我几乎可以阅读它。

我有一个幻灯片库的脚本，代码如下。它有带数字的导航按钮。当我需要它们从 0 - 5 开始时，这一切都很好。我找到了设置它的代码，它使用了一个“+index+”选项，我猜它只是从 0 开始计数。如何将它设置为从 1 而不是 0 开始？我尝试了 +index+1、& (+1) 和其他几个，但它停止了它的工作。下面的代码...

```
if(pager.length) {
    pager.eq(current).addClass('active');
} else if(o.pager){
    obj.append('<ul class="bbpager"></ul>');
    slides.each(function(index) {
    $('.bbpager', obj).append('<li class="pagerButton"><a href="#">
                         <span>'+index+'</span></a></li>')
    });
    pager = $('.bbpager li', obj);
    pager.eq(current).addClass('active');
} 
```

我试图只添加 var index = 1; 也在下面

```
if ( index === null){
     index = 1 localStorage.setItem("index",index); 
} 
```

从来没有工作过。知道如何对输出的标签 +1 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T04:44:32.353

将 index+1 括在括号中应该可以得到你想要的。

```
$('.bbpager', obj).append('<li class="pagerButton"><a href="#"><span>'+(index+1)+'</span></a></li>'); 
```

如果需要，可以将该基于 1 的索引保存到它自己的变量中：

```
var display_index = index + 1;
$('.bbpager', obj).append('<li class="pagerButton"><a href="#"><span>'+ display_index +'</span></a></li>'); 
```

index+1 不能自己工作的原因是因为它的作用是从左到右相加并将所有数字转换为字符串。

所以你最终会得到的是：

```
'<li class="pagerButton"><a href="#"><span>{index}1</span></a></li>' 
```

添加括号将强制索引在开始构造组合字符串之前增加 1。

# java - SWT 组件闪烁

> ID：10929882
> 
> 赞同：0
> 
> 时间：2012-06-07T10:19:07.100
> 
> 标签：java, swing, swt, jxbrowser

我正在开发一个具有嵌入式浏览器的应用程序，并在该浏览器的一角显示一个摄像头窗口，如图所示。为了在下方显示浏览器和在上方显示相机窗格，我使用 JDesktopPane 创建了两个图层，一个用于浏览器，另一个用于相机窗口。我使用 jxBrowser 来显示浏览器和摄像头窗口基本上是 AWT Pannel。添加浏览器的代码如下。一切都很好，但问题是当我滚动网页时，相机窗格会闪烁，甚至会在网页上留下痕迹，如第二张图片所示。我不知道如何处理这个问题。

```
m_LayeredPane = new JDesktopPane();
m_LayeredPane.setLayer(browser.getComponent(), JLayeredPane.DEFAULT_LAYER);
m_LayeredPane.add(browser.getComponent());
m_LayeredPane.setLayer(camContainer, JLayeredPane.POPUP_LAYER);
m_LayeredPane.add(camContainer); 
```

![在此处输入图像描述](../Images/ca85471002c9b50273bad915f2c996ff.png)

![在此处输入图像描述](../Images/9d10d19c2fce2637e4a3242310a97cc0.png)

# jquery - 如何在div中动态添加滚动条？

> ID：10929886
> 
> 赞同：2
> 
> 时间：2012-06-07T10:19:38.517
> 
> 标签：jquery, android, cordova, scrollbar

您好我需要动态添加滚动条。我试过[http://www.w3schools.com/cssref/tryit.asp?filename=trycss_overflow](http://www.w3schools.com/cssref/tryit.asp?filename=trycss_overflow)，但它不起作用。任何人都请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-30T16:47:22.233

您可以使用 jQuery 向 div 动态添加滚动条。执行此操作的代码与我在我的另一个答案中使用的代码完全相同（代码也在下面）： [https ://stackoverflow.com/a/25572315/2512022](https://stackoverflow.com/a/25572315/2512022)

```
jQuery('#mydiv').css("overflow-y", "scroll"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:29:13.150

设置高度和宽度属性以使其工作。只有在超过指定的高度和/或宽度大小后才会出现滚动。根据您希望它滚动的方式（垂直/水平滚动），相应地设置属性

# c# - 如何在c#.net中将html代码转换为jpeg图像

> ID：10929887
> 
> 赞同：-1
> 
> 时间：2012-06-07T10:19:41.150
> 
> 标签：c#, asp.net, .net

我在我的项目中使用 asp.net 和 c#，我正在尝试将 HTML 代码转换为 JPEG 图像。我正在创建 HTML 代码，但如何将该 HTML 代码转换为图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:30:52.043

根据我对您的问题的理解，您希望将 html 字符串保存为任何图像格式。检查以下链接。会对你有所帮助

[http://forums.asp.net/t/1692392.aspx/1](http://forums.asp.net/t/1692392.aspx/1)

# zend-framework - 使用 Zend_Filter_ImageSize() 后删除原始文件

> ID：10929889
> 
> 赞同：0
> 
> 时间：2012-06-07T10:19:49.220
> 
> 标签：zend-framework, delete-file

我正在使用 Zend 并使用 Zend_Filter_ImageSize() 创建缩略图。一切正常，但在创建拇指后，原始文件被保留。我浏览了这些文件，没有发现任何可能触发删除原始文件的内容。基本上这就是我正在做的事情：

```
$filter = new Zend_Filter_ImageSize(); 
    $output = $filter->setHeight(200) 
             ->setWidth(200)
             ->setThumnailDirectory('./uploads/thumb/')
                     ->setStrategy(new Zend_Filter_Imagesize_Strategy_Crop())
                    ->filter("./uploads/$img"); 
```

有没有办法只保留拇指并摆脱原来的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:26:46.667

目前，它不支持删除原始文件。

**所以你可以这样做**
- 你可以向该类添加删除功能，但我不建议这样做。
- 您可以扩展类并向其添加功能。

# javascript - 在 sencha touch 2 中使用 oAuth 连接 facebook

> ID：10929901
> 
> 赞同：3
> 
> 时间：2012-06-07T10:20:23.703
> 
> 标签：javascript, facebook, oauth, extjs

sencha touch 2 没有提供任何功能/库来连接 facebook。

到目前为止，我的线索少了

我们可以在 sencha touch 中使用 facebook javascript sdk 吗？

我发现以下教程很好，我们可以将它与 extjs mvc 合并

[http://thinkdiff.net/facebook/new-javascript-sdk-oauth-2-0-based-fbconnect-tutorial/](http://thinkdiff.net/facebook/new-javascript-sdk-oauth-2-0-based-fbconnect-tutorial/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T11:32:45.760

取决于你想如何连接我猜。对我来说，我只需要连接并显示 Facebook 页面的墙贴即可在我的 iPad 上显示。我这样做的方式如下：登录到facebook开发人员并创建一个应用程序。给它一个名字，例如 Senchatouch App。它将生成一个 appID 和密钥。

然后，您需要通过查询此链接找到您的 Facebook 用户名 ID：

https://graph.facebook.com/[用户名]

一旦你有了它，你必须去 Facebook Graph API explorer 并输入那个 ID，你可以看到一个示例响应。

然后您需要将访问令牌附加到此链接：

[https://graph.facebook.com/51539791474/feed?access_token=ACCESS_TOKEN](https://graph.facebook.com/51539791474/feed?access_token=ACCESS_TOKEN)

所以你有类似的东西：

[https://graph.facebook.com/51539791474/feed?access_token=AAAFnhgQ0ZAHIBAAbiopuvZAa8zlEmRyxKtZBTcgspJIJ21tVwI17xZCJEbgtNRaMUCnGBVwUa1zE7s6ZBRzg6rJ5UGIEBhZAQfMsCrrT0GVQZDZD](https://graph.facebook.com/51539791474/feed?access_token=AAAFnhgQ0ZAHIBAAbiopuvZAa8zlEmRyxKtZBTcgspJIJ21tVwI17xZCJEbgtNRaMUCnGBVwUa1zE7s6ZBRzg6rJ5UGIEBhZAQfMsCrrT0GVQZDZD)

这是您可以在 sencha touch 2 中的普通 JSONP 代理中使用的链接。

我的店铺代码：

```
Ext.define('TCApp.store.Facebook', {
extend: 'Ext.data.Store',
requires: [
    'TCApp.model.Facebook'
],

config: {
    autoLoad: true,
    model: 'TCApp.model.Facebook',
    storeId: 'Facebook',
    proxy: {
        type: 'jsonp',
        url: 'https://graph.facebook.com/51539791474/feed?access_token=AAACEdEose0cBAAJt7hcZCdkHHK8hOjZBDFd8GSfg2xkI6hj5AghswWn7MvBTz4B4xooN4t2fXvMmTZCrxAq4t5ofnnPIY7oZBebnbuB5wQZDZD',
        reader: {
            type: 'json',
            rootProperty: 'data'
        }
    }
}
}); 
```

和我的模型：

```
Ext.define('TCApp.model.Facebook', {
extend: 'Ext.data.Model',
config: {
    fields: [
        {
            name: 'message'
        },
        {
            name: 'picture'
        },
        {
            name: 'link'
        },
        {
            name: 'description'
        }
    ]
}
}); 
```

然后我使用这个 itemTpl 将它绑定到一个简单的列表：

```
'<div class="wholeitem"><img src="{picture}" class="facebookthumb" />{message}</div>',
    '<div class="smalltext">{description}</div></div>', 
```

我遇到的唯一问题是到期，似乎每个访问令牌都有 2 小时的到期时间。我还没有想出如何扩展它，如果你发现请发布解决方案或链接到它。谢谢

:-)

# oracle - Oracle 存储过程 - NOT IN (SUBQUERY) 消耗大量时间

> ID：10929907
> 
> 赞同：1
> 
> 时间：2012-06-07T10:20:41.677
> 
> 标签：oracle, plsql, oracle-sqldeveloper

我有 Oracle 程序，它的工作与以下相同：

```
create or replace
PROCEDURE My_TEST_PROCEDURE
(
   cur out sys_refcursor
)
AS
BEGIN
  open cur for
   SELECT * FROM MYTABLE1
   WHERE MYTABLE1.SOMEROWNAME NOT IN 
        (SELECT SOMEROWNAME FROM MYTABLE2);
END My_TEST_PROCEDURE; 
```

但这两张表中的数据很多，每张大约有 300000 行。所以需要很长时间才能完成。我能做些什么来减少那段时间。我尝试声明一个 sys_refcursor 并将数据读入此游标，如下所示：

```
create or replace
PROCEDURE My_TEST_PROCEDURE
(
   cur out sys_refcursor
)
IS
DECLARE EXISTING_ITEMS SYS_REFCURSOR;
BEGIN
  OPEN EXISTING_ITEMS FOR
    SELECT SOMEROWNAME FROM MYTABLE2;
  open cur for
   SELECT * FROM MYTABLE1
   WHERE MYTABLE1.SOMEROWNAME NOT IN 
        EXISTING_ITEMS;
END My_TEST_PROCEDURE; 
```

但这一次发生了 ORA-00932 错误。我能做些什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:25:54.400

使用如下连接查询：

```
SELECT MYTABLE1.* 
FROM   MYTABLE1 
       left join MYTABLE2 
              ON MYTABLE1.SOMEROWNAME = MYTABLE2.SOMEROWNAME 
WHERE  MYTABLE2.SOMEROWNAME IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T10:26:33.023

避免使用 *，指定列名。

为什么你使用游标？您正在做的事情可以使用 b.mycolumn 为空的左外连接来实现

此致。

# javascript - 如何仅附加大写文本？

> ID：10929908
> 
> 赞同：0
> 
> 时间：2012-06-07T10:20:49.113
> 
> 标签：javascript, jquery

我有一个`<h2>`基于图像的替代文本生成的标签。我想为文本的大写部分添加样式。

我的计划是使用 javascript / jquery 查找大写文本并将其包装在`<strong>`标签中，然后使用 css 对其进行样式设置。

任何想法如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:04:17.813

`sometext.match(/[A-Z]+/g)`给你一个字符串中所有大写文本的数组，所以循环添加样式。

要匹配至少 2 个大写字符，请使用`.match(/([A-Z]+){2}/g)`

要使用（例如）在字符串中包围长度 >= 2 的所有大写字符串部分，请`<b></b>`使用：

```
sometext.replace(/([A-Z]+){2}/g,function(a){return '<b>'+a+'</b>';}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:17:54.130

```
function findUC() {
    var h2 = $('h2').text();
    var exploded = h2.split(' ');
    var pattern = new RegExp('[^A-Z]');
    var i;
    var style = '';
    for (i = 0; i < exploded.length; i++) {
       if (!exploded[i].match(pattern)) {
           style += '<span style="color:blue;">' + exploded[i] + '<span>';
       } else {
           style += exploded[i];
       }
    }
    $('h2').text(style);
}
findUC();​ 
```

这将对您有所帮助。根据您的要求进行修改。工作[小提琴在这里](http://fiddle.jshell.net/bvjebin/VpUs4/)

对于您提到的要求，我正在编辑此答案。

```
function findUC() {
var h2 = $('h2').text();
var exploded = h2.split(' ');
var pattern = new RegExp('[^A-Z]');
var i, j;
var style = '';
var character = '';
for (i = 0; i < exploded.length; i++) {
    if (!exploded[i].match(pattern)) {
        var firstletter = exploded[i].substr(0,1);
        var lastletter = exploded[i].substr(1, exploded[i].length);
        style += firstletter;
        style += '<span style="color:blue;">' + lastletter + '<span>';
    } else {
        style += " "+exploded[i]+" ";
    }
}

   $('h2').text(style);
}
findUC();​ 
```

我在上一条评论中提到了小提琴。试试看。

编辑 3：正如你在评论中提到的，我修改了小提琴：试试这个[小提琴](http://fiddle.jshell.net/bvjebin/VpUs4/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T11:08:54.523

您可以使用正则表达式来查找大写段落。只是一些正则表达式，例如`/[A-Z]{2,}/g`. 由于`{2,}`这只会匹配至少两个彼此跟随的大写字符。作为替代方案，`/\b[A-Z]+\b/g`如果您想排除诸如`HELlo`. 获得职位后，您可以使用不同的方法来连接/创建 HTML 代码，例如`$('<div/>').append(...)`.

# javascript - 将 Raphael 论文分类为 20x20 的部分

> ID：10929910
> 
> 赞同：0
> 
> 时间：2012-06-07T10:21:08.960
> 
> 标签：javascript, raphael

我有一张尺寸为 400 x 500 的纸。我正在尝试使用以下代码将其划分为 20 x 20 像素

```
var dpH = 500, dpW = 400, drawPad = new Raphael(document.getElementById('p'),
        dpW, dpH);
for ( var i = 0; i <= dpH / 20; i++) {
    drawPad.path("M" + 1 + " " + ((i * 20) + 1) + "L" + dpW + " "
            + ((i * 20) + 1));
}
for ( var j = 0; j <= (dpW / 20); j++) {
    drawPad.path("M" + ((j * 20) + 1) + " " + 1 + "L" + ((j * 20) + 1) + " "
            + dpH);
} 
```

HTML标记如下

```
<div id="p" style="background-image:url(image.png)"> </div> 
```

背景图像的高度和宽度相同。

我最初的要求是将 image.png 制作为 Rapheal 纸。但我没有做到这一点。所以我把它作为 DIV#P 的背景图像。然后将 DIv 转换为 Paper。
这是我与上述相关的问题

1.  Background-Image 和 DIV 的所有像素是否相互匹配？
2.  我上面所做的方法是将整张纸分类为 20x20 像素的分区。这是正确的做法吗？
3.  画线的宽度是多少？

请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T15:34:51.650

好的，如果我理解正确的话；您真正想要的是获取 20x20 正方形图像的原始图像数据。

以下是使用 Canvas 提取图像数据的方法（[也在 jsFiddle 上](http://jsfiddle.net/LzrN9/3/)）：

```
var dpH = 500,
    dpW = 400,
    ctx = document.getElementById('p').getContext('2d'),
    exportData = function() {
        var data;
        for (var y=0, yl=dpH/20; y<yl; y++) {
            for (var x=0, xl=dpW/20; x<xl; x++) {
                imgData = ctx.getImageData(x*20, y*20, 20, 20).data;
                console.log("Image data for " + x*20 + ", " + y*20, imgData);
                // data is an array with 4 values pr pixel
                // Top left pixel in the 20x20 square
                r = imgData[0]; // red
                g = imgData[1]; // green
                b = imgData[2]; // blue
                a = imgData[3]; // alpha
                console.log("RGBa of " + x*20 + ", " + y*20 + ": ", r, g, b, a);
            }
        }
    },
    drawImage = function() {
        ctx.drawImage(this, 0, 0);
        exportData(this);
    };

var img = new Image();
img.onload = drawImage;
img.src = "image.png"; // has to be on the same domain 
```

* * *

**原始答案**

1.  结果是一个 DIV，里面有一个 SVG 元素，后面有一个背景图像。浏览器（[如果它支持 SVG](http://caniuse.com/svg)的话）会将它们呈现在彼此之上。你想提取像素值吗？如果是这样，您必须通过 HTML5 Canvas 而不是 SVG 来执行此操作。

2.  对不起，我不明白。你想达到什么目的？您想要 20x20 正方形的像素数据吗？使用拉斐尔，您只是在图片上画线。

3.  路径的默认值为 1 个像素。您可以通过在路径上设置[属性](http://raphaeljs.com/reference.html#Element.attr)来更改此设置。示例（[也在 jsfiddle.net 上](http://jsfiddle.net/LzrN9/)）：

```
var dpH = 500,
    dpW = 400,
    drawPad = Raphael(document.getElementById('p'), dpW, dpH),
    style = {
        "stroke"       : "#fff", // white
        "stroke-width" : 2 // default 1
    };

for ( var i = 0; i <= dpH / 20; i++) {
    drawPad.path("M" + 1 + " " + ((i * 20) + 1) + "L" + dpW + " "
            + ((i * 20) + 1)).attr(style);
}
for ( var j = 0; j <= (dpW / 20); j++) {
    drawPad.path("M" + ((j * 20) + 1) + " " + 1 + "L" + ((j * 20) + 1) + " "
            + dpH).attr(style);
}​ 
```

# android - 网页视图可以访问吗？

> ID：10929912
> 
> 赞同：0
> 
> 时间：2012-06-07T10:21:24.727
> 
> 标签：android, accessibility

android中的WebViews可以访问吗？我的意思是屏幕阅读器可以阅读网页视图中的内容。我在某处读到无法访问默认的 android 浏览器。但这对 webview 也意味着同样的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:43:30.257

Webviews 只能在 Android 4.0 及更高版本中访问。

# apache - 如何在 Apache Ace 中配置通过 HTTP API 提交的捆绑包

> ID：10929914
> 
> 赞同：0
> 
> 时间：2012-06-07T10:21:29.053
> 
> 标签：apache, repository, bundle, target, apache-ace

我正在使用 HTTP API 向 Apache Ace 存储库提交一个包（比如 Test.jar）`http://<Ace Host>/repository/commit?customer=apache&name=shop&version=2`，. 在此之后，我如何将此捆绑包提供给目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:38:14.933

我对您的问题感到有些困惑，因为您提到的存储库包含描述工件（包或其他文件）、功能和分发之间关系的元数据（XML 格式）。您不应该向它提交捆绑包。捆绑包进入 OBR，如果您想以编程方式上传它们，它有自己的 REST API。

要使用 Web UI 将捆绑包配置到目标，您：

1.  将捆绑包作为新工件上传。它将被发送到 OBR 并显示在工件列中。
2.  将工件与功能相关联，并将功能与分布相关联。
3.  启动一个新目标并观察它显示在 UI 中（您可能需要“检索”当前配置以实现该目标）。
4.  将分布与目标相关联。
5.  承诺一切。

# emacs - 如何自动回答 y（kill-matching-buffers 询问我是否应该杀死修改后的缓冲区）？

> ID：10929915
> 
> 赞同：8
> 
> 时间：2012-06-07T10:21:35.037
> 
> 标签：emacs, buffer

在 Emacs - 我如何杀死匹配正则表达式的缓冲区？

**编辑**：

我如何`y`自动回答（`kill-matching-buffers`询问我是否应该杀死修改后的缓冲区）？

像这样的东西？

```
(defun bk-kill-buffers (bfrRgxp)
  (interactive)
  (kill-matching-buffers bfrRgxp)
  [return]) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T11:49:04.400

> 如何自动回答 y（kill-matching-buffers 询问我是否应该杀死修改后的缓冲区）？

`kill-matching-buffers`呼叫`kill-buffer-ask`哪个呼叫`yes-or-no-p`。您可以暂时重新定义后者，但出于安全原因，我倾向于不这样做——杀死给定的缓冲区可能会触发其他需要询问是或否问题的功能。

重新定义`kill-buffer-ask`似乎是一个更安全的选择（或者只是复制和修改`kill-matching-buffers`函数本身）。

```
(require 'cl)
(defun bk-kill-buffers (regexp)
  "Kill buffers matching REGEXP without asking for confirmation."
  (interactive "sKill buffers matching this regular expression: ")
  (flet ((kill-buffer-ask (buffer) (kill-buffer buffer)))
    (kill-matching-buffers regexp))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-06-02T04:51:52.853

对于 Emacs 版本 >=24，**ELPA**存储库中的 kmb.el 库完全可以使用命令`kmb-kill-matching-buffers-no-ask`.

它还提供了命令`kmb-delete-process-and-kill-buffer-no-ask`，该命令会杀死当前缓冲区（无需确认）。

我将后一个命令绑定如下：

```
(global-set-key (kbd "H-M-<delete>") 'kmb-delete-process-and-kill-buffer-no-ask) 
```

这样我就不会意外调用它，就在我需要它的时候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-22T18:20:11.713

您可以使用`kill-matching-buffers`. 下面的代码实际上表现得好像`kill-buffer`（在杀死之前不询问）被调用而不是`kill-buffer-ask`：

```
(defun kill-matching-buffers-just-do-it ()
  "Kill buffers whose names match REGEXP, without asking."
  (interactive)
  (cl-letf (((symbol-function 'kill-buffer-ask) #'kill-buffer))
    (call-interactively #'kill-matching-buffers))) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T10:32:29.763

```
M-x kill-matching-buffers 
```

这将提示输入正则表达式，请查看文档以获取详细信息。

# java - 如何在java代码中从数据库表中获取Max id

> ID：10929918
> 
> 赞同：7
> 
> 时间：2012-06-07T10:21:42.440
> 
> 标签：java, sql, database, oracle

我想编写从表中给出最大 id 的代码，但它会抛出错误。

代码：

```
Class.forName("oracle.jdbc.driver.OracleDriver");
Connection con = DriverManager.getConnection("XXXXX", "XXXX", "XXX");
Statement st2 = con.createStatement();
ResultSet idMax = st2.executeQuery("select nvl(max(work_id),0) from workdetails");
int id2 = idMax.getInt(0);  // throw error: Invalid column index

System.out.println(id2);

// ****************************
int id2 = idMax.getInt("work_id");
System.out.println(id2);   // throw error: ResultSet.next was not called 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T10:24:19.923

结果集从一个虚拟记录开始，应该通过调用`next`方法推进到真正的第一条记录：

```
ResultSet idMax = st2.executeQuery("select nvl(max(work_id),0) max_id from workdetails");
int id2 = -1;
if (idMax.next()) {
   id2 = idMax.getInt("max_id");  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T10:30:43.883

你错过了

```
idMax.next(); 
```

这会将指针设置为第一行。那么只有你必须使用

```
idMax.get ( 1 ); 
```

因此，您的代码如下所示：

```
ResultSet idMax = st2.executeQuery("select nvl(max(work_id),0) from workdetails");
int id2 = 0; 
if ( idMax.next() ){
   id2 = idMax.getInt(1);  
}
System.out.println(id2); 
```

# asp.net - ASP.NET IIS - 请求何时排队？

> ID：10929922
> 
> 赞同：34
> 
> 时间：2012-06-07T10:22:14.593
> 
> 标签：asp.net, multithreading, iis, iis-6

Thomas Marquardt的[以下](http://blogs.msdn.com/b/tmarq/archive/2007/07/21/asp-net-thread-usage-on-iis-7-0-and-6-0.aspx)文章描述了 IIS 如何处理 ASP.Net 请求、可配置为运行的最大/最小 CLR 工作线程/托管 IO 线程、涉及的各种请求队列及其默认大小。

现在根据文章，在 IIS 6.0 中发生以下情况：

1.  ASP.NET 从 IIS IO 线程获取请求并将“HSE_STATUS_PENDING”发布到 IIS IO 线程
2.  请求被移交给 CLR Worker 线程
3.  如果请求具有高延迟并且所有线程都被占用（线程数接近 httpRuntime.minFreeThreads），则将请求发布到应用程序级请求队列（此队列是每个 AppDomain）
4.  ~~ASP.NET 还检查并发执行请求的数量。文章指出“如果并发执行的请求数太高”，它将传入请求排队到 ASP.NET 全局请求队列（这是每个工作进程）~~（请检查更新 2）

我想知道什么是“阈值”，此时 ASP.NET 认为当前执行它的请求数太高，然后开始将请求排队到全局 ASP.NET 请求队列？

我认为这个阈值将取决于最大工作线程数的配置，但可能有一些公式基于 ASP.NET 将确定并发执行的请求数过高并开始将请求排队到 ASP.NET全局请求队列。这个公式可能是什么？或者这个设置是可配置的？

* * *

**更新**
我再次通读了这篇文章，在评论部分我发现了这个：

> 1) 在 IIS 6 和 IIS 7 经典模式下，每个应用程序 (AppDomain) 都有一个队列，用于维护工作线程的可用性。如果可用工作线程数低于 httpRuntime minFreeThreads 指定的限制，则此队列中的请求数会增加。当超过 httpRuntime appRequestQueueLimit 指定的限制时，请求将被拒绝并返回 503 状态代码，并且客户端会收到带有消息“服务器太忙”的 HttpException。还有一个 ASP.NET 性能计数器“应用程序队列中的请求”，它指示队列中有多少请求。是的，CLR 线程池是 .NET ThreadPool 类公开的。
> 
> 2) requestQueueLimit 命名不当。它实际上限制了 ASP.NET 可以同时处理的最大请求数。这包括排队的请求和正在执行的请求。如果“Requests Current”性能计数器超过 requestQueueLimit，新的传入请求将被拒绝并返回 503 状态代码。

~~所以本质上 requestQueueLimit 限制了排队的请求数（我假设它将在应用程序队列中排队的请求数加上全局 ASP.Net 请求队列加上当前正在执行的请求数）并正在执行。尽管这并不能回答最初的问题，但它确实提供了有关由于大量并发请求/高延迟请求而我们何时可能收到 503 服务器繁忙错误的信息。~~ （检查更新 2）

* * *

**更新2** 我的理解有误。我混淆了 IIS 6 和 IIS 7 的描述。
本质上，当 ASP.NET 以集成模式托管在 IIS 7.5 和 7.0 上时，应用程序级队列不再存在，ASP.NET 维护一个全局请求队列。
因此，如果执行请求的数量被认为很高，IIS 7/7.5 将开始将请求排队到全局请求队列。这个问题更多地适用于 IIS 7/7.5 而不是 6。

就***IIS 6.0***而言，没有全局 ASP.NET 请求队列，但以下情况是正确的：
1\. ASP.NET 从 IIS IO 线程中获取请求并将“HSE_STATUS_PENDING”发布到 IIS IO 线程
2。请求被移交给 CLR 工作线程
3\. 如果请求延迟高且所有线程都被占用（线程数接近 httpRuntime.minFreeThreads），则将请求发布到应用程序级请求队列（此队列是每个 AppDomain）
4\. ASP.NET 也检查在接受新请求之前排队和当前正在执行的请求数。如果此数字大于 processModel.requestQueueLimit 指定的值，则传入请求将被拒绝，并出现 503 服务器繁忙错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T00:40:19.550

[本文](http://msdn.microsoft.com/en-us/library/ms998549.aspx#scalenetchapt06_topic8)可能有助于更好地理解设置。

> **minFreeThreads：**如果线程池中的可用线程数低于此设置的值，则工作进程使用此设置对所有传入请求进行排队。此设置有效地将可以同时运行的请求数限制为 maxWorkerThreads minFreeThreads。将 minFreeThreads 设置为 88 * # of CPUs。这将并发请求的数量限制为 12（假设 maxWorkerThreads 为 100）。

**编辑：**

在这篇[SO 帖子](https://stackoverflow.com/a/4809336/135787)中，Thomas 提供了集成管道中请求处理的更多细节和示例。请务必阅读答案的评论以获取更多解释。

> 本机回调（在 webengine.dll 中）在 CLR 工作线程上获取请求，我们将**maxConcurrentRequestsPerCPU * CPUCount**与总活动请求进行比较。如果我们超过了限制，请求被插入到全局队列中（本机代码）。否则，它将被执行。如果它已排队，它将在其中一个活动请求完成时出列。

# php - PHP & MySQL - 更新但不插入

> ID：10929923
> 
> 赞同：0
> 
> 时间：2012-06-07T10:22:14.983
> 
> 标签：php, mysql

希望你能帮忙。

我有一个运行 2 个部分的脚本。顶部要么不返回任何行，如果返回，则运行 INSERT 和 UPDATE 查询。

第二部分做同样的事情，逻辑明智。

如果顶部不返回任何行，则脚本的第二部分可以正常工作

但

如果顶部返回行，则在脚本的第二部分中仅发生 UPDATE 查询，但不发生 INSERT（并且它不会给出任何错误）

可能是什么问题？这真的开始困扰我了。

这是脚本

```
<?php

  require_once('function.sendtxt.php');

  $now = time();
  $received = date("Y-m-d H:i:s", $now);

  mysql_connect("x", "x", "x") or die(mysql_error());
  //echo "Connected to MySQL<br />";
  mysql_select_db("x") or die(mysql_error());
  //echo "Connected to Database<br />";

  //$a = array();
  //$a[] = array("id=0", "text");
  $txt = 'We have cancelled your order as we have not heard back from you in a while. To order, please resend your request';

  // those orders not complete over 30 minutes
  $select = mysql_query("
    SELECT id, received, txtus, link, sender
    FROM incoming_texts
    WHERE id IN (
      SELECT i3.id FROM (
        SELECT DISTINCT i2.link as link, max(i2.id) as id
        FROM incoming_texts i1
        JOIN incoming_texts i2 ON i1.id = i2.link
        WHERE (i1.link = 0)
        GROUP BY i2.link ASC
      ) i3
    )
    AND TIMESTAMPDIFF(MINUTE, received, now()) > 30
  ") or die(mysql_error());

  if (mysql_num_rows($select) > 0) {
    while ($row = mysql_fetch_array($select)) {
      // id, received, txtus, link, sender
      $id .= "," . $row["id"];
      $txtus = $row["txtus"];
      $link = $row["link"];
      $from = $row["sender"];
      //$received = $row["received"];

      //echo $id;

      // cancel the row
      mysql_query("
        INSERT INTO incoming_texts
          (txtus, sender, msg, received, this_step, next_step, link)
        VALUES
          (".$txtus.", ".$from.", 'cancel_inactive_text_orders.php 1', '".$received."', 'cancel', 'order', $link)
      ") or die('Error: ' . mysql_error());
      //sendtxt($txtus, $from, $txt);
    }
    // -2 = cancelled
    mysql_query("
      UPDATE incoming_texts
      SET link = -2
      WHERE link IN (00".$id.")
    ") or die(mysql_error());
  }

  /*
    below is the second part
  */

  $link0 = mysql_query("
    SELECT id, received, txtus, link, sender
    FROM incoming_texts
    WHERE (
      link = 0
      AND TIMESTAMPDIFF(MINUTE, received, now()) > 30
    )
  ") or die(mysql_error());

  if (mysql_num_rows($link0) > 0) {
    while($row = mysql_fetch_array($link0)) {
      // id, received, txtus, link, sender
      $id = $row["id"];
      $txtus = $row["txtus"];
      $link = $id;
      $from = $row["sender"];
      //$received = $row["received"];

      $link0rows = mysql_query("
        SELECT id
        FROM incoming_texts
        WHERE link = ".$id."
        LIMIT 1
      ") or die(mysql_error());

      if (mysql_num_rows($link0rows) < 1) {
        mysql_query("
          UPDATE incoming_texts
          SET link = -2
          WHERE (id = $id)
        ") or die(mysql_error());
        mysql_query("
          INSERT INTO incoming_texts
            (txtus, sender, msg, received, this_step, next_step, link)
          VALUES
            (".$txtus.", ".$from.", 'cancel_inactive_text_orders.php 2', '".$received."', 'cancel', 'order', $id)
        ") or die(mysql_error());

        //echo $id . " ";
        //sendtxt($txtus, $from, $txt);

      } // if
    } // while
  } // if

  mysql_close();

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:41:05.710

一切看起来都很好，除了这个......参数`$txtus`并且`$from`没有正确引用

```
 mysql_query("INSERT INTO incoming_texts 
   (txtus, sender, msg, received, this_step, next_step, link) 
    VALUES ('".$txtus."', '".$from."', 'cancel_inactive_text_orders.php 
    1', '".$received."', 'cancel', 'order',$link) ") 
    or die('Error: ' . mysql_error()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:50:13.763

尝试先将查询放入变量中并打印出来，这样您就知道查询实际上是正确的。

我相信您很可能在插入中的某些字符串周围缺少引号，例如 $txtus 和 $from

# ios - 在 Apple 的增强现实示例代码“pARk”中使用四元数

> ID：10929924
> 
> 赞同：2
> 
> 时间：2012-06-07T10:22:20.007
> 
> 标签：ios, augmented-reality, quaternions, core-motion, projection-matrix

我正在使用适用于 iOS 的 AR 应用程序在相机视图上显示注释 - 就像我们从 wikiitude、junaio 等中都知道的那样。我是这个主题的新手，很抱歉我的愚蠢问题 :)

我在这里从苹果下载了“pARk”示例代码，以研究如何使用另一种技术来可视化注释，而不是使用俯仰、偏航、滚动和方位角进行复杂计算：http: [//developer.apple.com/library/ios/ #samplecode/pARk/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011083](http://developer.apple.com/library/ios/#samplecode/pARk/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011083)

Apple 在这个示例中使用了旋转矩阵，我想转移它，所以它使用四元数。我怎样才能做到这一点？我了解坐标到 ECEF 和 ENU 的转换...我必须更改此转换吗，我认为不是（对吗？）。

我看到将投影矩阵（截锥体）表示为四元数的问题......这是不可能的，对吧？

也许有人可以给我提示，我必须改变什么以及如何改变这个例子才能得到我想要的。

感谢所有答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T09:04:24.673

已解决，此示例中没有实际使用四元数。如果我将旋转与旋转相乘，我只需要它们。

# c# - 类未注册来自 PHP 的错误

> ID：10929925
> 
> 赞同：4
> 
> 时间：2012-06-07T10:22:24.847
> 
> 标签：c#, php, com, comvisible

我们创建了一个 C# 类库程序集并使其 COM 可见，以便能够从 PHP 调用其方法。这曾经可以正常工作，但现在我们想将它安装在 Windows Server 2008 服务器上，并且我们一直遇到错误“类未注册”。

为了排除任何依赖问题，我在 C# 中制作了一个很小的测试类库。类库是为任何 CPU 构建的，它是 COM 可见的（在 AssemblyInfo.cs 中也将 COMVisible 设置为 true）。测试类库只包含一个类和一种方法。该类称为TestLib，命名空间也称为TestLib。该方法称为 Test 并且只返回一个字符串。

我们所做的如下： - 构建 TestLib.dll - 将其复制到 Windows Server 2008 机器 - 将 dll 注册为：regasm /codebase TestLib.dll - regasm 工具返回成功消息 - 在 PHP 中，我们只是尝试创建一个新的 COM 实例：

```
try
{
   $test = new COM("TestLib.TestLib");
}
catch (Exception $e)
{
   die($e->getMessage());
} 
```

*   当我们从浏览器或命令行 (php -f test.php) 调用此测试脚本时，在这两种情况下都会出现错误“未注册类”

我还尝试使用 gacutil -i 将 TestLib 添加到 GAC，但无济于事；仍然类未注册错误。

然后我尝试使用 .NET 2.0 而不是 4.0 作为目标框架编译测试库，结果相同。.NET framework 4.0 顺便安装在服务器上。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:37:25.143

好的，所以经过更多研究后，我想通了。php.exe 进程是 32 位的。COM 可见程序集是为任何 CPU 编译的，因此 32 位和 64 位应用程序都应该可以访问它。

问题是在 64 位操作系统 php.exe 和任何 32 位进程上，搜索 HKEY_CLASSES_ROOT\Wow6432Node\CLSID 而不是 HKEY_CLASSES_ROOT\CLSID 和 HKEY_LOCAL_MACHINE\Software\Classes\Wow6432Node\CLSID 而不是 HKEY_LOCAL_MACHINE\Software \类\CLSID。Wow6432 键中的注册表项不是由 Windows Server 2008 上的 .NET framework v4 附带的 regasm 创建的。在 Windows 7 上它们是创建的，不要问我为什么。

事实证明，如果我为 .NET v2.0 创建一个小测试程序集并将其注册到 .NET framework v2.0 附带的 regasm 中，它确实会在 Windows 2008 上创建 Wow6432Node 条目。奇怪。

所以我的解决方案是在服务器上创建一个基本的注册表文件：

```
regasm /regfile MyClassLib.dll 
```

这将创建一个 MyClassLib.reg 文件，其中只有“正常”64 位条目。然后我从 Windows 7 机器导出 Wow6432Node 密钥并将其添加到该 .reg 文件中。现在，当我将该 reg 文件导入 Windows 2008 上的注册表时，一切正常。

有关 Wow6432Node 条目的更多信息，请查看：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms724072%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724072%28v=vs.85%29.aspx)

希望这可以节省其他人一些时间和头痛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-28T06:06:33.653

如果您尝试`32-bit COM DLL`在 64 位 Windows 上调用，则需要注册它。

1.  将 32 位 DLL 复制到 C:\Windows\sysWOW64
2.  跑`C:\Windows\sysWOW64\regsvr32.exe your_com_32.dll`

更多[信息与截图](http://flummox-engineering.blogspot.com/2014/08/register-32bit-com-dll-on-64bit-windows.html)。

# iphone - IndexOfObject 返回 2147483647

> ID：10929929
> 
> 赞同：12
> 
> 时间：2012-06-07T10:22:34.613
> 
> 标签：iphone, nsarray, nsrangeexception

我有一个包含 10 个项目的数组。当我为 9 号元素和 10 号元素调用“ `IndexOfObject`”时，Xcode 返回异常：“ `NSRangeException`”

> 原因：'_[_NSCFArray objectAtIndex:] index:2147483647 超出界限（10）'。

从以前的`NSLog`中，我看到这两个元素存在于数组中但`indexOfObject`没有找到它们。为什么？

我的代码是：

```
 NSDictionary * headConfig =[avatarDictionaryToSave objectForKey:@"head_dictionary"];
    NSString * headImage =[headConfig objectForKey:@"layer_key"];
    NSString * pathFace =[[NSBundle mainBundle]pathForResource:@"Face" ofType:@"plist"];
    NSLog(@"%@", headImage);

    NSArray *arrayFace =[NSArray arrayWithContentsOfFile:pathFace];
    NSLog(@"the  elements are: %@", arrayFace);//here headImage is present
    int index =[arrayFace indexOfObject:headImage];
    NSLog(@"the index is %d", index); 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-07T10:29:51.813

`indexOfObject:``NSNotFound`当对象不存在于数组中时返回。`NSNotFound`定义为`NSIntegerMax`（在 iOS 32 位上 == 2147483647）。

因此，您正在寻找的对象似乎不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-07T20:06:57.247

```
 Please change the coding of adding the array values as I mentioned below.
    //  [arr_values addObject:[dictionary valueForKey:@"Name"]];
     [arr_values addObject:[NSString stringWithFormat:@"%@",[dictionary valueForKey:@"Name"]]];

   When target array elements are not in string format then while we using the 
indexOfObject then that value can't able to find in the target array. So please try to 
change the value of object as mentioned above while adding into array. 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T18:27:14.153

默认情况下，假定整数是有符号的。

换句话说，编译器假定将调用一个整数变量来存储负数或正数。这限制了范围可以在任一方向上达到的范围。

例如，32 位 int 的范围为`4,294,967,295`. 在实践中，因为该值可能是正数或负数，所以范围实际上是`−2,147,483,648`到`+2,147,483,647`。

如果我们知道永远不会调用变量来存储负值，我们可以将其声明为无符号，从而将（正）范围扩展到`0`to `+4,294,967,295`。

无符号整数指定如下：

```
unsigned int myint; 
```

# java - 如何使用 setLayout(null) 和背景图像将 JPanel 绝对定位在另一个 JPanel 上？

> ID：10929931
> 
> 赞同：2
> 
> 时间：2012-06-07T10:22:43.357
> 
> 标签：java, swing, jpanel, layout-manager, absolutelayout

我正在使用 Java 中的 JFrame，特别是使用需要重叠的绝对定位元素。我知道要覆盖组件，应该制作一个 JPanel（使用`setOpacity(false);`），并使用`setBounds(x,y,x2,y2);`或`setPosition(x,y)`&定位它`setSize(x,y)`。不幸的是，面板的行为就像 CSS 的`inline-divs`；它们只占用生产线上所需的空间，并且不堆叠。

这是我到目前为止的代码，但它似乎不像我想象的那样：

```
class Login extends JFrame {
    private JPanel         backgroundpanel;
    private JPanel         panel;
    private JPanel         panel2;
    private JTextField     usernameBox;
    private JPasswordField passwordBox;
    private JButton        button;
    private int            height = 319;
    private int            width  = 452;
    private ImageIcon      ii     = new ImageIcon("special-window-BG.png");
    private JLabel         image;

    public Login() {
        setLayout(null);
        setTitle("Login");
        setSize(width,height);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(null);

        buildPanel();

        add(backgroundpanel);
        setVisible(true);
    }

    private void buildPanel() {
        usernameBox = new JTextField(20);
        passwordBox = new JPasswordField(20);
        button = new JButton("Login");
        image = new JLabel(ii);

        backgroundpanel = new JPanel();
        panel = new JPanel();
        panel2 = new JPanel();

        backgroundpanel.add(panel);
        backgroundpanel.add(panel2);
        backgroundpanel.add(image);

        panel.setBackground(Color.red);
        panel.setBounds(0, 0, 10, 10);
        panel.setOpaque(false);

        panel2.setBackground(Color.blue);
        panel2.setBounds(0, 0, 10, 10);
        panel2.setOpaque(false);

        panel.add(passwordBox);
        panel2.add(button);

        backgroundpanel.setOpaque(false);
        backgroundpanel.isOptimizedDrawingEnabled();
        backgroundpanel.setBounds(0, 0, width, height); 
```

... cot'd，但没有必要。

所以基本上，我想知道如何将 JPanel（或 JComponents，如果更简单的话）绝对定位在带有背景图像的 JPanel 上。

感谢您查看此问题，我在此方法上花费了太多时间；注释掉的代码通过我发布的内容扩展了近 500 行，所以我无处可去。下图显示了我正在尝试完成的粗略说明，我不确定我是否真的接近完成它，因为有时 JComponents 似乎消失了，就好像它们在背景图像后面一样，但是我想找到最有可能就在我眼前的简单解决方案！

[http://i.stack.imgur.com/revz8.jpg](http://i.stack.imgur.com/revz8.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T11:27:58.533

> 我想找到最有可能就在我眼前的简单解决方案！

像这样的东西？

![登录面板](../Images/6cf9e3bd927f97fd230caefd4a96372f.png)

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.net.URL;

import javax.imageio.ImageIO;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class LoginPanel extends JPanel {

    private static final long serialVersionUID = 1L;

    BufferedImage image;

    LoginPanel(BufferedImage image) {
        super(new GridBagLayout());

        this.image = image;

        JPanel controls = new JPanel(new BorderLayout(15,35));
        controls.setOpaque(false);
        controls.setBorder(new EmptyBorder(110,0,0,0));

        JPanel fields = new JPanel(new GridLayout(0,1,30,30));
        fields.setOpaque(false);
        controls.add(fields, BorderLayout.CENTER);
        fields.add(new JTextField(20));
        fields.add(new JPasswordField(20));

        JPanel button = new JPanel(new GridBagLayout());
        button.setOpaque(false);
        controls.add(button, BorderLayout.PAGE_END);
        button.add(new JButton("Log In"));

        Dimension prefSize = new Dimension(image.getWidth(),image.getHeight());
        setPreferredSize(prefSize);

        add(controls);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(image, 0, 0, getWidth(), getHeight(), this);
    }

    public static void main(String[] args) throws Exception {
        URL url = new URL("http://i.stack.imgur.com/revz8.jpg");
        final BufferedImage image = ImageIO.read(url); 
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                LoginPanel p = new LoginPanel(image);
                JOptionPane.showMessageDialog(null, p);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T11:23:45.420

您正在设置`setLayout(null)`您的`JFrame`但不是在“背景面板”（默认设置为`FlowLayout`）。

您不应该设置`Login`框架的布局 - 因为它默认设置为`BorderLayout`- 没关系（您希望“背景面板”增长以匹配父级）。而是`setLayout(null)`在您的`JPanel`“背景面板”上添加任意定位的面板。

# bing - 必应应用程序 ID

> ID：10929936
> 
> 赞同：5
> 
> 时间：2012-06-07T10:23:04.987
> 
> 标签：bing, bing-api

我无法`Bing.com`使用他们的搜索 api 获得应用程序 ID。请帮忙，告诉我如何在 Bing.com 上获取应用程序 ID 以供使用`bing search api`？

请写下所有步骤，如何获取应用程序ID？

谢谢。

我遵循的步骤： [https](https://ssl.bing.com/webmaster/legacy/developers/appids.aspx) ://ssl.bing.com/webmaster/legacy/developers/appids.aspx - 去这里

**第二步**- [https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44](https://datamarket.azure.com/dataset/5BA839F1-12CE-4CCE-BF57-A49D98D29A44) `sign up`
**第三步** https://datamarket。天蓝色。com /account/ info 尝试使用“主要帐户密钥”，因为在他们的文档中我发现我可以将主要 cay 用作应用程序 ID。但是我找不到我可以注册我的应用程序 ID 的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T20:51:19.427

AppId 已弃用。使用访问令牌作为值或客户端密钥。首先看这里： [https ://github.com/openlabs/Microsoft-Translator-Python-API/blob/master/__init__.py](https://github.com/openlabs/Microsoft-Translator-Python-API/blob/master/__init__.py)

最后在这里： [urllib2.HTTPError: HTTP Error 401 while querying using the new Bing API (in azure marketplace)](https://stackoverflow.com/questions/11728256/urllib2-httperror-http-error-401-while-querying-using-the-new-bing-api-in-azu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T15:35:35.983

此 URL 用于注册应用程序 UI

[https://datamarket.azure.com/developer/applications/](https://datamarket.azure.com/developer/applications/)

# python - 在烧瓶中制作拖放上传器

> ID：10929941
> 
> 赞同：4
> 
> 时间：2012-06-07T10:23:28.977
> 
> 标签：python, flask

我正在尝试制作接受请求并将文件存储在烧瓶中的“静态”文件夹中的上传站点。当我尝试发送“POST”请求时，我总是收到错误的请求。我需要它的唯一原因是测试我的拖放 javascript 上传器。有人可以指出我正确的方向吗？

```
import os
from flask import Flask, request, redirect, url_for
from werkzeug import secure_filename

UPLOAD_FOLDER = 'static'
ALLOWED_EXTENSIONS = set(['txt', 'pdf', 'png', 'jpg', 'jpeg', 'gif'])

app = Flask(__name__)
app.config['UPLOAD_FOLDER'] = UPLOAD_FOLDER

def allowed_file(filename):
    return '.' in filename and \
           filename.rsplit('.', 1)[1] in ALLOWED_EXTENSIONS

@app.route('/', methods=['GET', 'POST'])
def upload_file():
    if request.method == 'POST':
        file = request.files['xhr2upload'] # [0]
        if file and allowed_file(file.filename):
            filename = secure_filename(file.filename)
            file.save(os.path.join(app.config['UPLOAD_FOLDER'], filename))
            return redirect(url_for('uploaded_file',
                                    filename=filename))
    return '''
    <!doctype html>
    <title>Upload new File</title>
    <h1>Upload new File</h1>
    <form action="" method=post enctype=multipart/form-data>
      <p><input type=file name=file>
         <input type=submit value=Upload>
    </form>
    '''

if __name__ == '__main__':
    app.run() 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-08T00:11:15.850

这是 Flask 早期的一个常见问题 - 当您尝试访问[`request.args`](http://flask.pocoo.org/docs/api/#flask.Request.args),时[`request.form`](http://flask.pocoo.org/docs/api/#flask.Request.form)，如果其中不存在密钥[`request.values`](http://flask.pocoo.org/docs/api/#flask.Request.values)，[`request.files`](http://flask.pocoo.org/docs/api/#flask.Request.files)它们将抛出 a - 就像 Python 中的普通字典一样（尝试在任何 Python 解释器中尝试）。Flask 在字典中添加了一点糖——它实际上是一个子类，如果没有被捕获，则会引发 400 Bad Request。（请参阅[快速入门文档的这一部分](http://flask.pocoo.org/docs/quickstart/#the-request-object)）[`KeyError`](http://docs.python.org/dev/library/exceptions.html#KeyError)`{}["test"]``request``KeyError`[`HTTPException`](http://werkzeug.pocoo.org/docs/exceptions/#werkzeug.exceptions.BadRequest)

导致此问题的行是`request.files['xhr2upload']`. 您没有在页面上包含任何 JavaScript，并且`<input type="file">`您在页面上的唯一名称是“file”，而不是“xhr2upload”。更改`request.files['xhr2upload']`为`request.files['file']`或将 ajax 上传器加载到您的页面中，并使用该`xhr2upload`名称发布您的文件。

如果您有一个*可能*有一个字段的表单，并且您想检查*是否*定义了一个字段而不引发 a`KeyError`那么您可以使用以下`.get`方法：

```
request.form["not_here"] # KeyError -> 400 Bad Request

request.form.get("might_be_here") # Value if provided, else None 
```

# android - 从快照启动时，Android 模拟器内存 不足错误

> ID：10929944
> 
> 赞同：2
> 
> 时间：2012-06-07T10:23:36.507
> 
> 标签：android, eclipse, android-emulator, adt

我正在使用 Android 模拟器来测试我的应用程序。我制作了启用快照的 AVD，如图所示设置：

![](../Images/ca696ab790791c728020893bbfdf5e91.png)

当我第一次运行该应用程序时，一切正常。当我更新我的应用程序并重新运行它时，模拟器上的应用程序更新没有问题。

但是，当我关闭模拟器（保存到快照），然后从快照启动时，只有以前版本的应用程序可以工作。当我更新应用程序并尝试重新运行时，我收到此错误：

```
Failed to install HelloAndroid.apk on device 'emulator-5554': Out of memory
com.android.ddmlib.SyncException: Out of memory
Launch canceled! 
```

随时问我任何问题，请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:08:38.037

当您更新代码时，您会定期将其打包并安装在模拟器上。模拟器将应用程序及其状态数据保存在用户数据磁盘分区中重新启动。为确保应用程序在更新时正常运行，您可能需要删除模拟器的用户数据分区。为此，请使用 -wipe-data 选项启动模拟器。有关用户数据分区和其他模拟器存储的更多信息，请参阅使用模拟器磁盘映像。：http: [//developer.android.com/tools/devices/emulator.html#apps](http://developer.android.com/tools/devices/emulator.html#apps)

# iphone - 如何制作像 UIDatePicker 一样的 UIPickerView？

> ID：10929951
> 
> 赞同：1
> 
> 时间：2012-06-07T10:24:18.963
> 
> 标签：iphone, ios, objective-c, ipad, uipickerview

我有一个自定义 UIViewController 子类，它充当 UIPickerView 的 Datasource 和 Delegate ，我想服务于两个不同的目的，因为每个目的都很简单，并且并不真正保证单独的文件。一项操作必须作为自定义选择器，这可以正常工作。但是，对于其他操作，我希望它像 UIDatePicker 一样工作。

问题是，UIDatePicker 是 UIControl 的子类，而不是 UIPickerView。是否可以在方法（或其他方式）中设置任何类型的枚举值，将 UIPickerView 设置为日期选择器？还是我必须制作两个完全不同的课程并以不同的方式使用它们（屁股痛）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:36:59.127

拥有一个 UIPicker 和一个 UIDatePicker 会简单得多，然后隐藏你不需要的那个。UIDatePicker 具有处理您不想重新发明的国际日期格式和日历的各种复杂性。

# salesforce - 未创建所有记录

> ID：10929954
> 
> 赞同：0
> 
> 时间：2012-06-07T10:24:29.497
> 
> 标签：salesforce, apex-code

在顶点代码中，我编写了 2 个触发器。我有 2 个对象 A 和 B。创建 A 对象时，我需要创建 B 对象的记录。例如：当创建对象 A 的 1 条记录时，然后创建对象 B 的 4 条记录。我写了 2 个触发器 1 默认情况下是创建 A 对象时 B 对象中的某些字段（这是在插入之前，更新之前）触发器和2触发器是在创建A的记录时创建对象B的记录（这是在插入之后，在更新之后）触发器。

但是当我创建对象 A 的记录时，创建了 4 个记录 ID。但是，当使用 Apex Data Loader 创建对象 A 的记录时，当时为 A 创建了 2 条记录，但为 B 对象只创建了 4 条记录。这是为 A 对象的第二条记录创建的。

我将代码更改为

for（对象 e：Trigger.new）{

for(){ 为 B 对象创建 4 条记录 }}

当我这样做时，我收到了这个错误

插入失败。第 0 行的第一个异常，ID 为 abcdef12345；第一个错误：INVALID_FIELD_FOR_INSERT_UPDATE，无法在插入调用中指定 Id：[Id]

任何机构都可以帮助我解决问题。谢谢阿努

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:55:03.360

在插入前触发器期间尚未填充 ID，因此您可能过早引用它，可能试图将 B 记录指向 A 记录。另一个问题是尝试为 B.Id 分配一个值。两个代码问题如下图所示：

```
trigger trigA on A__c (before insert) {
    List<B__c> listB = new List<B__c>();
    for (A__c a : trigger.new) {
        B__c b = new B__c();
        B__c.reference_to_A__c = a.Id; // <-- Wrong! a.Id isn't populated yet in before insert
        B__c.Id = '...'; // <-- Wrong! Salesforce generates the Id field for you
        listB.add(b);
    }
    insert listB;
} 
```

查看更多代码会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T15:49:33.750

错误消息告诉您无法为 ID 字段分配值。ID 字段受保护，其值由 Salesforce.com 自动生成。

从您的插入语句中删除 ID 字段。

# validation - grails 域对象在验证期间意外保存

> ID：10929958
> 
> 赞同：2
> 
> 时间：2012-06-07T10:24:42.917
> 
> 标签：validation, grails, grails-orm, grails-domain-class, grails-validation

考虑以下域类：

```
class EnrichmentConfig {

    String name
    String description
    String concept
    List fields = []

    static hasMany = [fields: FieldConfig]

    static constraints = {
        name(maxSize: 60, blank: false, nullable: false, unique: true)
        concept(maxSize: 255, blank: false, nullable: false)
        description(nullable: true, blank: true)
        fields(nullable: false, validator: { fields, enrichmentConfig ->
            if (fields?.isEmpty()) {
                return ['empty']
            } else {
                return true
            }
        })
    }

    static mapping = {
        description(type: 'text')
        fields(cascade: "all-delete-orphan")

        sort('name')
    }
} 
```

和

```
class FieldConfig {

    List providers = []

    static hasMany = [providers: String]

    static belongsTo = [mainConfig: EnrichmentConfig]

    static constraints = {

        providers(nullable: false, validator: { providers, fieldConfig ->
            // some custom validation
        })
    }

    static mapping = {
        providers(cascade: 'all-delete-orphan', lazy: false)
    }
} 
```

这里是我用来更新`EnrichmentConfig`关联控制器中的实例的代码：

```
def update = {

    def enrichmentConfig = EnrichmentConfig.get(params.long('id'))
    if (enrichmentConfig) {

        enrichmentConfig.properties = params

        if (enrichmentConfig.validate()) {
            if (enrichmentConfig.save(flush: true, failOnError: true)) {
                    flash.message = "${message(code: 'enrichmentConfig.updated.message', args: [enrichmentConfig.name])}"
                    redirect(controller: 'enrichment')
                }
        } else {
            // re-validation to attach an error object to each eroneous fieldConfig
            enrichmentConfig.fields?.each { it.validate() }
        }
        render(view: 'fields', model: getFieldsModel(enrichmentConfig))
        return
    } else {
        flash.message = "${message(code: 'enrichmentConfig.not.found.message', args: [params.id])}"
        redirect(controller: 'enrichment')
    }
} 
```

我注意到，当我验证`EnrichmentConfig`要更新的实例时，关联`FieldConfig`的实例会意外保存在数据库中，即使它们是无效的。事实上，在 debug ste-by-step 模式下，`enrichmentConfig.validate()`执行 while 时，控制台中会出现以下内容：

```
 Hibernate: 
    update
        field_config_providers 
    set
        providers_string=? 
    where
        field_config_id=? 
        and providers_idx=? 
```

这怎么可能发生？我究竟做错了什么？我应该指定我使用 grails 1.3.7。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:12:32.903

这只是一个猜测，但可能从某个地方开始。当 Hibernate 决定刷新会话并部分保存数据等时，我不会假装理解。但我所知道的是，将所有与写入相关的调用放在一个服务中会随着时间的推移为我节省大量的悲伤。

尝试将一些更新方法移动到服务中，看看是否有更好的运气。我的直觉是，hibernate 可能需要保留一些数据来做其他事情，如果它在事务服务中，一旦抛出 RuntimeException，写入就会回滚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:05:07.537

我建议使用服务来保存您的对象。首先，使用 validate() 方法检查所有对象的有效性。

然后，按照它们依赖的顺序或它们遵循的层次结构保存对象。

# javascript - 需要在java脚本中保留空格

> ID：10929960
> 
> 赞同：1
> 
> 时间：2012-06-07T10:24:52.733
> 
> 标签：javascript, whitespace, retain

我有一个关于 java 脚本的查询。

我有一个函数 addOptions

```
function addOption(selectbox,text,value )
{
    var optn = document.createElement("OPTION");    
    optn.textContent = text;
    optn.value = value;
    selectbox.options.add(optn);
} 
```

其中参数“text”包含空格，当我这样做时 optn.textContent = text; 那些空白被截断。但是我想保留那些空白，因为这是一个要求。我尝试使用 optn.text = text; 也但不工作我正在使用 FF 3.6.25

有人可以在这里帮忙吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T10:29:41.500

您是否尝试过将空格设置`innerHTML`和更改为不间断空格：

```
optn.innerHTML = text.replace(/\s/g,"&nbsp;"); 
```

演示：http: [//jsfiddle.net/eNDKv/](http://jsfiddle.net/eNDKv/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T11:18:43.647

```
optn.appendChild(document.createTextNode(text)); 
```

将工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T10:33:20.280

尝试以下操作：

```
function addOption(selectbox,text,value )
{    
    selectbox.add(new Option(text, value), null) //add new option to end of "sample"
} 
```

以上适用于 FireFox 12.0。

# c# - SugarCrm REST .Net 包装器

> ID：10929961
> 
> 赞同：0
> 
> 时间：2012-06-07T10:24:55.693
> 
> 标签：c#, rest, sugarcrm

我打算编写一个简单的 SugarCrm .Net 客户端。

谁能给我一个指向 SugarCrm REST api 的 .Net 包装器/库的指针？

//lasse

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-06T00:14:49.183

意识到这是旧的，但如果有人偶然发现这个为新版本的 Web 服务（SugarCRM > 6.7）寻找 .NET 包装器，这是我目前正在构建的包装器[https://github.com/dlively1/SugarSharp](https://github.com/dlively1/SugarSharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T13:59:47.483

有一个使用 SOAP 的包装器，称为 CandyWrapper，它有点旧，但可以帮助您从构建自己的起点开始。

[http://developers.sugarcrm.com/wordpress/2011/08/10/web-services-in-your-own-language-part-6-candywrapper-for-net/](http://developers.sugarcrm.com/wordpress/2011/08/10/web-services-in-your-own-language-part-6-candywrapper-for-net/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2016-12-13T00:03:42.463

我也意识到这是旧的，但是对于 SugarCRM CE 6.x，我创建了 SugarRestSharp。我在下面给出的示例是 json 格式的，但请求是 C# 模型中的。这实现**了 get_entry_list** SugarCrm Rest API 方法。

将请求传递给 RestSharp：

```
    动态数据 = 新
    {
        会话 = 会话 ID，
        模块名称 = 模块名称，
        查询 = 查询字符串，
        order_by = string.Empty,
        偏移量 = 0，
        select_fields = 选择字段，
        link_name_to_fields_array = string.Empty,
        max_results = maxCountResult,
        删除 = 0,
        最爱=假
    };

    var client = new RestClient(url);

    var request = new RestRequest(string.Empty, Method.POST);
    字符串 jsonData = JsonConvert.SerializeObject(data);

    request.AddParameter("方法", "get_entry_list");
    request.AddParameter("input_type", "json");
    request.AddParameter("response_type", "json");
    request.AddParameter("rest_data", jsonData);

    var response = client.Execute(request);

```

json 格式的请求

```
    {
      “会话”：“olgg6hf5sqi6hk9u3tgpafbn66”，
      "module_name": "账户",
      “询问”： ””，
      "order_by": "",
      “偏移”：0，
      “选择字段”：[
        “姓名”，
        “行业”，
        “网站”，
        “运输地址城市”，
        “ID”
      ],
      “link_name_to_fields_array”：“”，
      “最大结果”：10，
      “已删除”：0，
      “最爱”：假
    }

```

json 格式的响应

```
    {
      “结果计数”：10，
      "total_count": "58",
      “下一个偏移量”：10，
      “条目列表”：[
        {
          “id”：“1e0eec64-8cc6-58ff-57f1-58533731b145”，
          "module_name": "账户",
          “name_value_list”：{
            “姓名”： {
              “名称”：“名称”，
              “值”：“新 SugarRestSharp 帐户 1 10397”
            },
            “行业”： {
              “名称”：“行业”，
              “价值”：“制造”
            },
            “网站”： {
              “名称”：“网站”，
              “价值”：“www.sugarrestsharp1.com”
            },
            “运输地址城市”：{
              "name": "shipping_address_city",
              “价值”：“洛杉矶”
            },
            “ID”： {
              “姓名”：“身份证”，
              “价值”：“1e0eec64-8cc6-58ff-57f1-58533731b145”
            }
          }
        },
       .........（其他 9 项被截断）
      ],
      “关系列表”：[

      ]
    }

```

有关更多实施和 wiki 检查 SugarRestSharp：[https ://github.com/mattkol/SugarRestSharp](https://github.com/mattkol/SugarRestSharp)

# database-design - 关于嵌入式内容的 mongodb 数据库设计？

> ID：10929965
> 
> 赞同：0
> 
> 时间：2012-06-07T10:25:10.593
> 
> 标签：database-design, mongodb, relation

我对 mongoDB 中的嵌入式关系有疑问。

例如，如果我有这样的数据结构：

```
company
- company_members
- company_clients
- company_templates
-- company_templates_items 
```

我应该在这里使用嵌入，因此成员、客户和模板嵌入在公司集合中，并且模板项目嵌入在 company_templates 中，还是应该在这里使用引用关系？

我在问这个，因为我想知道嵌入所有内容时数据库查询响应是否太大？

有什么建议吗？

谢谢！

**编辑：**

该表的内容将是例如 100 家公司，每家公司有 15 个客户、20 个成员和 4 个模板，每个模板包含 10 个项目。

一切都是文字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:18:59.627

即使有来自您编辑的附加信息，也很难判断。我们需要知道你想要完成什么。我将向您展示两种选择来解释我的意思，我认为您可以从中推断出适合您的方式。

## 前任。A：你正在建立一种黄页网站

假设您要构建一个网页，列出公司及其一些客户，以及他们的工作样本。数据将主要被读取。唯一可以更改信息的是客户（相应公司的员工），他们可以登录并更改一些数据。更改不会经常发生，并且没有版本冲突。

在这种情况下，嵌入很好。由于您可能希望将这些信息一起显示，因此信息量不是杀手，而且只有一个作者。

## 前任。B：您正在构建一个 SaaS 项目管理解决方案

公司员工可以登录和管理客户端，添加或删除用户，创建/读取/更新/删除（CRUD）项目模板。多人可以同时登录。

在这种情况下，除了可能`company_templates_items`应该嵌入之外，以上都不是。

* * *

作为指导，请考虑以下几点：如果集合项可以由不同的用户进行 CRUD 操作，并且可以同时编辑不同的对象而没有问题（在业务意义上），请不要嵌入。例如，Jim 添加一个新客户，而 Jane 编辑一个新客户，Mike 创建一个新项目，这并没有错。如果所有这些操作都必须写入同一个对象，那么您必须非常非常小心地编写代码，以确保不会丢失、覆盖或添加两次。

您可以使用`$push`,`$pull`等使这些操作成为原子操作，但排序、搜索和更新更复杂。通常，集合比嵌入文档具有更多的功能。

# performance - JBoss 上 Liferay Portal 的要求

> ID：10929966
> 
> 赞同：2
> 
> 时间：2012-06-07T10:25:11.850
> 
> 标签：performance, jsp, jboss, liferay

我在两台不同的机器上测试了 Liferay：一台具有 1GB RAM 的虚拟服务器，另一台具有 3GB 的 RAM。1GB Liferay 的速度非常慢。在第二个（3GB RAM）上，它运行得很好。

我的测试环境只有一个组织/社区和一个用户（我）。想象一下我将建立一个门户网站的情况。总共 15 个组织和 400 个用户（每个组织 30 个用户）。具有 3GB RAM 的服务器是否足以快速运行？

由于财务方面的原因，这对我来说是非常重要的问题。我不想每月花费 200 美元进行托管。:-)

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:34:57.770

它更多地取决于并发用户的数量而不是系统上的用户数量。恕我直言 Liferay 在您的 1GB 服务器上运行缓慢，因为很可能您没有使用默认内存设置进行调整和运行 - 这很可能会导致交换介入，从而降低性能。

Tipp：下载[性能白皮书](https://www.liferay.com/documentation/additional-resources/whitepapers)，阅读并理解其中的场景。此外，您可以轻松地在本地计算机上进行初始（经验法则）测量，并查看 JVM 必须拥有多少内存才能顺利运行。尤其是在内存紧张的情况下，您肯定希望微调您的 VM 设置以匹配您的硬件。

您会在性能白皮书中找到粗略的数字和数量级。查看最适合您的用例的内容。

请记住，相同的参数适用于您的数据库和您碰巧拥有的其他组件。根据我假设您的尺寸要求（根据您提供的一些细节），您应该让 Liferay 在服务器上以远低于 200 美元/月的**价格**运行

# mysql - 在mysql中执行命令所花费的时间

> ID：10929969
> 
> 赞同：0
> 
> 时间：2012-06-07T10:25:23.353
> 
> 标签：mysql, performance, time

我想找出mysql执行命令所花费的时间。当我浏览其他帖子时，我发现了这一点。

> “mysql 有一个内置的分析器。您可以通过发出 set profiling=1; 来启用分析；并使用 show profiles; 来获取执行时间。”

但这不是很有效。请帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:28:26.430

您可以运行查询

```
 show processlist 
```

在执行你的程序时

# android - 如何在列表视图中添加 EditText 并在所有行中动态获取其值？

> ID：10929971
> 
> 赞同：11
> 
> 时间：2012-06-07T10:25:29.770
> 
> 标签：android, listview, checkbox, scroll, android-edittext

我在 listView 中有 Checkbox 和 EditText 以及 Textview。它从列表中获取文本视图的值。复选框将被动态检查。同样，EditText 也可以动态输入。现在我的问题是，当我在编辑文本中输入文本后滚动列表视图（上下）时，我无法获得键入的值。我也这样检查复选框。但是使用该位置，我将其设置正确。我不知道如何正确地将 EditText 值设置为列表。请帮我。这是我的代码：

main.xml：（用于启动的主要 xml）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
android:id="@+id/my_list"
android:layout_width="fill_parent"
android:layout_height="250px" />
<Button 
android:text="Save" 
android:id="@+id/btnSave" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content"/>

</LinearLayout> 
```

row.xml：（列表视图行）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal" >

<TextView
android:id="@+id/label"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="@+id/label"
android:textSize="30sp"/>

<CheckBox
android:id="@+id/check"
android:layout_width="wrap_content"
android:layout_height="wrap_content"/>
<EditText 
android:text=""
android:id="@+id/txtAddress"
android:layout_width="150px"
android:layout_height="wrap_content"/>
</LinearLayout> 
```

Model.Java：（是POJO类）

```
package com.checkboxlistview;

public class Model {

private String name;
private boolean selected;
private String address;

public String getAddress() {
    return address;
}

public void setAddress(String address) {
    this.address = address;
}

public void setName(String name) {
    this.name = name;
}

public Model(String name) {
    this.name = name;
}

public String getName() {
    return name;
}

public boolean isSelected() {
    return selected;
}

public void setSelected(boolean selected) {
    this.selected = selected;
}

} 
```

MyAdapter.Java：（这用于使用转换器和持有者在列表视图中保存视图）

```
package com.checkboxlistview;

import java.util.List;
import android.app.Activity;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.EditText;
import android.widget.TextView;

public class MyAdapter extends ArrayAdapter<Model> implements TextWatcher {

private final List<Model> list;
private final Activity context;
int listPosititon;

public MyAdapter(Activity context, List<Model> list) {
    super(context, R.layout.row, list);
    this.context = context;
    this.list = list;
}

static class ViewHolder {
    protected TextView text;
    protected CheckBox checkbox;
    protected EditText address;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    listPosititon = position;
    ViewHolder viewHolder = null;
    if (convertView == null) {
        LayoutInflater inflator = context.getLayoutInflater();
        convertView = inflator.inflate(R.layout.row, null);
        viewHolder = new ViewHolder();
        viewHolder.text = (TextView) convertView.findViewById(R.id.label);
        viewHolder.checkbox = (CheckBox) convertView
                .findViewById(R.id.check);
        viewHolder.address = (EditText) convertView
                .findViewById(R.id.txtAddress);
        viewHolder.checkbox
                .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

@Override
public void onCheckedChanged(CompoundButton buttonView,
boolean isChecked) {
int getPosition = (Integer) buttonView.getTag(); 
//Here we get the position that we have  set for the checkbox using setTag.
list.get(getPosition).setSelected(
buttonView.isChecked()); 
// Set the value of checkbox to maintain its state.
}
});
        viewHolder.address.addTextChangedListener(this);

        convertView.setTag(viewHolder);
        convertView.setTag(R.id.label, viewHolder.text);
        convertView.setTag(R.id.check, viewHolder.checkbox);
        convertView.setTag(R.id.txtAddress, viewHolder.address);
    } else {
        viewHolder = (ViewHolder) convertView.getTag();
    }
    viewHolder.checkbox.setTag(position); // This line is important.

    viewHolder.text.setText(list.get(position).getName());
    viewHolder.checkbox.setChecked(list.get(position).isSelected());
    if (list.get(position).getAddress() != null) {
        viewHolder.address.setText(list.get(position).getAddress() + "");
    } else {
        viewHolder.address.setText("");
    }

    return convertView;
}

@Override
public void afterTextChanged(Editable s) {
    list.get(listPosititon).setAddress(s.toString());
}

@Override
public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
        int arg3) {
    // TODO Auto-generated method stub

}

@Override
public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
    // TODO Auto-generated method stub

}
} 
```

MainActivity.java（这是活动）：

```
package com.checkboxlistview;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;
import android.widget.Toast;

public class MainActivity extends Activity { 
 ListView listView;
 Button btnSave;
    ArrayAdapter<Model> adapter;
    List<Model> list = new ArrayList<Model>();

    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        listView = (ListView) findViewById(R.id.my_list);
        btnSave = (Button)findViewById(R.id.btnSave);
        adapter = new MyAdapter(this,getModel());
        listView.setAdapter(adapter);
        btnSave.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {

                for (int i = 0; i < list.size(); i++) {
                    Toast.makeText(getBaseContext(), "Name : "+list.get(i).getName() +" Selected: "+list.get(i).isSelected(), Toast.LENGTH_SHORT).show();

                }
            }
        });
    }

    private List<Model> getModel() {
        list.add(new Model("Linux"));
        list.add(new Model("Windows7"));
        list.add(new Model("Suse"));
        list.add(new Model("Eclipse"));
        list.add(new Model("Ubuntu"));
        list.add(new Model("Solaris"));
        list.add(new Model("Android"));
        list.add(new Model("iPhone"));
        list.add(new Model("Java"));
        list.add(new Model(".Net"));
        list.add(new Model("PHP"));
        return list;
    }
} 
```

代码中没有错误。它运行良好。即使我上下滚动，我也可以保持复选框位置并显示在同一位置。但我无法正确获取和设置 EditText 值。请帮帮我。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:28:35.137

您可以使用自定义列表视图来实现此目的。

找到带有edittext的listview示例在[这里](http://vikaskanani.wordpress.com/2011/07/27/android-focusable-edittext-inside-listview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-26T06:00:09.743

只要保持 viewHolder.address.setTag(position) 就可以完美地干杯。

适配器类：

```
package com.qzick.adapter;

import java.util.ArrayList;
import android.content.Context;
import android.text.Editable;
import android.text.TextWatcher;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.EditText;
import android.widget.TextView;

import com.example.qzick.R;
import com.qzick.model.Get_All_Class_Model;

public class Get_Class_Adapter extends BaseAdapter {
    protected ArrayList<Get_All_Class_Model> get_class_details;
    LayoutInflater inflater;
    Context context;
    private int x = 1;

    public Get_Class_Adapter(Context context,
            ArrayList<Get_All_Class_Model> get_class_details) {
        this.get_class_details = get_class_details;
        this.inflater = LayoutInflater.from(context);
        this.context = context;

    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return get_class_details.size();
    }

    @Override
    public Object getItem(int position) {
        // TODO Auto-generated method stub
        return get_class_details.get(position);
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ViewHolder holder;
        if (convertView == null) {
            holder = new ViewHolder();
            convertView = this.inflater.inflate(
                    R.layout.activity_adapter_class_ll, parent, false);

            holder.textclass = (TextView) convertView
                    .findViewById(R.id.text_class_ll);

            holder.txtid = (TextView) convertView.findViewById(R.id.text_id_ll);

            holder.checkclass = (CheckBox) convertView
                    .findViewById(R.id.check_class_LL);

            holder.edtsection = (EditText) convertView
                    .findViewById(R.id.edttxt_addsection_ll);

            holder.checkclass
                    .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(CompoundButton buttonView,
                                boolean isChecked) {

                            int getPosition = (Integer) buttonView.getTag();

                            get_class_details.get(getPosition).setChecked(
                                    buttonView.isChecked());

                            notifyDataSetChanged();
                        }
                    });

            convertView.setTag(holder);
            convertView.setTag(R.id.check_class_LL, holder.checkclass);
            convertView.setTag(R.id.edttxt_addsection_ll, holder.edtsection);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.checkclass.setTag(position);
        holder.edtsection.setTag(position);

        holder.edtsection.addTextChangedListener(new TextWatcher() {

            @Override
            public void onTextChanged(CharSequence s, int start, int before,
                    int count) {
                int pos = (Integer) holder.edtsection.getTag();

                get_class_details.get(pos).setEdtsections(s.toString());

            }

            @Override
            public void beforeTextChanged(CharSequence s, int start, int count,
                    int after) {

            }

            @Override
            public void afterTextChanged(Editable s) {

            }
        });

        holder.txtid.setText(get_class_details.get(position).getId());
        holder.textclass.setText(get_class_details.get(position).getText());
        holder.edtsection.setText(get_class_details.get(position)
                .getEdtsections());

        holder.textclass.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                x++;

                if (x % 2 == 0) {
                    holder.checkclass.setChecked(false);

                } else {
                    holder.checkclass.setChecked(true);
                }

            }
        });

        holder.checkclass.setChecked(get_class_details.get(position)
                .isChecked());
        return convertView;
    }

    private class ViewHolder {
        TextView textclass, txtid;`enter code here`
        CheckBox checkclass;
        EditText edtsection;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-13T13:06:38.800

使用 listView 处理 EditText 的简单而美观的解决方案：（不需要 holder 或 RecycleView 或其他任何东西）

简要说明：

1) 在 getView 方法中，当您膨胀视图时，将 myTextWatcher 应用于 editText。将此 EditText 传递给 myTextWatcher()

2) 在getView 方法中找到那个EditText 并将位置设置为editText.setTag [每次。不仅在视图被夸大的时候。]

3) 定义 MyTextWatcher。它应该引用应用它的 EditText。

4) myTextWatcher.onTextChanged() 将读取设置为 editText 的标签并执行所需的工作

修改 Adapter 类的 getView() 方法：

```
@Override
public View getView(int position, View convertView, final ViewGroup parent) {

        if(convertView==null){
            convertView = LayoutInflater.from(getContext()).inflate(R.layout.single_row_layout,parent,false);
            EditText et = convertView.findViewById(R.id.idEditText);
            et.addTextChangedListener(new MyTextWatcher(et));
        }

    //This is again required to find reference to EditText... so that 'position' can be applied on to it as 'tag' EACH time.    
    EditText editText = (EditText) convertView.findViewById(R.id.idEditText);;

    //This tag will be used inside onTextChanged()
    editText.setTag(position);

} 
```

将您的 MyTextWatcher 类定义为：

```
private class MyTextWatcher implements TextWatcher{
    //int position;
    EditText et;
    public MyTextWatcher(EditText editText){
        this.et = editText;
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {

    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        if(et.getTag()!=null){
            // This is required to ensure EditText is edited by user and not through program
            if(et.hasFocus()){
                 int position = (int)et.getTag();
                 String newText = et.getText()+"";
                 //Implement your actions here........
                 //you can get require things/ views from listView.getChildAt(position).. 
            }

        }

    }

    @Override
    public void afterTextChanged(Editable s) {

    }
} 
```

# c# - 多线程访问时静态方法变慢

> ID：10929973
> 
> 赞同：1
> 
> 时间：2012-06-07T10:25:35.090
> 
> 标签：c#, .net, task-parallel-library

我有一种情况，我的 .Net 4 的 C# 应用程序正在访问静态类中的静态方法，使得该方法的执行速度比单线程访问时要慢。例如，如果该方法由单个线程调用，则大约需要 1.5 分钟才能完成，而当由 2 个线程调用时，则需要 4 分钟才能完成。

任何提高性能的想法/建议/最佳实践都受到高度赞赏。提前感谢您的回复。

更多信息：这是一个应用程序，它之前使用线程池在某些部分执行线程。我介绍了并行任务。因此，它是 TPL 和旧线程池的混合体。例如，一个并行任务可以有多个线程。该机器有 24 个 CPU 内核和 64GB RAM。我运行了 2 个进程，这些进程将拆分为 5 个线程，每个线程总共最多 10 个线程。在此过程中，过程变慢了。我将代码粘贴在这里，供那些想要检查它并提供建议的人使用。抱歉粘贴长代码。该代码可能不具有所有当前最新功能，因为这是几年前编码的。再次感谢。

```
public static class Property11
{
    /// <summary>
    /// Splits agg rows to separate commands where the reference parameters are included for each command.
    /// </summary>
    /// <param name="worksheetID">The current worksheet ID.</param>
    /// <param name="propertyID">The current property ID.</param>
    /// <param name="ccrFormObj">The ccr form object.</param>
    public static void SplitAggregateIncludeReferenceParameterCCRToDTH(PropertyCall propertyCallObj)
    {
        string worksheetID = propertyCallObj.WorksheetID;
        int propertyID = propertyCallObj.PropertyID;
        IDClass nextIDObj = propertyCallObj.NextIDObj;
        CCRFormStructure ccrFormObj = propertyCallObj.CCRFormObj;
        List<CCRFormStructure> ccrFormObjsToAdd = propertyCallObj.CCRFormObjToAddList;

        DateTime dtProp = DateTime.Now;
        System.Diagnostics.Debug.Print("Start time property = " + propertyCallObj.PropertyID + ", worksheet = " + propertyCallObj.WorksheetID + ": " + dtProp.ToString());

        try
        {
            // Get all rows for worksheet
            List<WorksheetRow> rowListForWorksheet =
                (from wr in ccrFormObj.myWorksheetRowList
                 where wr.WorksheetID == worksheetID
                 select wr).ToList();

            // Get all parameters for worksheet
            List<WorksheetRowParameter> rowParameterListForWorksheet =
                (from wrp in ccrFormObj.myWorksheetRowParameterList
                 join wr in rowListForWorksheet
                 on wrp.WorksheetRowID equals wr.ID
                 select wrp).ToList();

            // Get all agg rows in worksheet
            List<AggRow> aggRowsInWorksheet =
                (from ar in ccrFormObj.myAggRowList
                 join wsrp in rowParameterListForWorksheet
                 on ar.WorksheetRowParameterID equals wsrp.ID
                 select ar).ToList();

            // Get all agg row parameters in worksheet
            List<AggRowParameter> aggParametersInWorksheet =
                (from arp in ccrFormObj.myAggRowParameterList
                 join ar in aggRowsInWorksheet
                 on arp.AggRowID equals ar.ID
                 select arp).ToList();

            // Get all command mappings for worksheet
            List<CommandMappingObj> commandMappingListForWorksheet =
                (from cm in ccrFormObj.commandMappingList
                 join wr in rowListForWorksheet
                 on cm.WorksheetRowID equals wr.ID
                 select cm).ToList();

            // Get all parameter mappings for worksheet
            List<ParameterMappingObj> parameterMappingListForWorksheet =
                (from pm in ccrFormObj.parameterMappingList
                 join cm in commandMappingListForWorksheet
                 on pm.CommandMappingObjID equals cm.ID
                 select pm).ToList();

            // Get all property objects for  worksheet
            List<ParameterPropertyObj> propertyList =
                (from ppo in ccrFormObj.parameterPropertiesList
                 where ppo.ID == propertyID && ppo.WorksheetID == worksheetID
                 select ppo).ToList();

            //List<WorksheetRow> rowsToRemove = new List<WorksheetRow>();  
            WorksheetRowParameter currentWorksheetRowParameter;
            AggRow currentAggRow;
            AggRowParameter currentAggRowParameter;
            AggRow currentSteeringAggRow;
            AggRowParameter currentSteeringAggRowParameter;
            int newIDIndex = 0;
            List<string> worksheetRowsWithoutTooLongCommandRows = new List<string>();
            WorksheetRow newWSR = new WorksheetRow();
            CommandMappingObj newCMO = new CommandMappingObj();
            WorksheetRow newWSRForOrigRow = new WorksheetRow();
            CommandMappingObj newChangeCMO = new CommandMappingObj();
            List<string> steeringParameters;
            IEnumerable<WorksheetRowParameter> parameterListForRow;
            IEnumerable<WorksheetRowParameter> currentSteeringParameters;
            string newCMOID;
            ParameterMappingObj newPMO;
            WorksheetRowParameter newWSRP;
            string newWSRID;
            string newID;
            IEnumerable<string> commandsWithPropertyParameterForRow;
            Hashtable htPropertyParamAndSteeringParameters = new Hashtable();
            List<string> steeringParametersForProperty;
            WorksheetRowParameter currentWorksheetRowPropertyParameter;
            bool removeOrigRow = false;
            bool firstRowForAggCreated = false;
            List<WorksheetRowParameter> propParamListForFirstCreatedRow = new List<WorksheetRowParameter>();
            List<string> propParamUsedAsSteeringList = new List<string>();

            foreach (ParameterPropertyObj propertyParameter in propertyList)
            {
                if (propertyParameter.SecondaryPropertyInfo != null && propertyParameter.SecondaryPropertyInfo != "")
                {
                    steeringParameters = propertyParameter.SecondaryPropertyInfo.Split(",".ToCharArray()).ToList();
                }
                else
                {
                    steeringParameters = new List<string>();
                }

                htPropertyParamAndSteeringParameters.Add(propertyParameter.Parameter, steeringParameters);
            }

            var aggListForRow =
                from ar in aggRowsInWorksheet
                join arp in aggParametersInWorksheet
                on ar.ID equals arp.AggRowID
                select new
                {
                    AggRow = ar,
                    AggRowParameter = arp
                };

            var worksheetRowsWithRepParam =
                from wrp in rowParameterListForWorksheet
                where htPropertyParamAndSteeringParameters.Contains(wrp.Parameter)
                join al in aggListForRow
                on wrp.ID equals al.AggRow.WorksheetRowParameterID
                into aggList
                where aggList.Count() > 0
                select new
                {
                    WorksheetRowParameter = wrp,
                    AggList = aggList
                };

            foreach (WorksheetRow worksheetRow in rowListForWorksheet.ToList())
            {
                var worksheetRowWithRepParam =
                    worksheetRowsWithRepParam.Where(wrp => wrp.WorksheetRowParameter.WorksheetRowID == worksheetRow.ID);

                if (worksheetRowWithRepParam.Count() > 0)
                {
                    firstRowForAggCreated = false;

                    var currentMappingList =
                        from cmo in commandMappingListForWorksheet
                        where cmo.WorksheetRowID == worksheetRow.ID
                        join pmo in parameterMappingListForWorksheet
                        on cmo.ID equals pmo.CommandMappingObjID
                        into parameterMappingList
                        select new
                        {
                            CommandMapping = cmo,
                            ParameterMappingList = parameterMappingList
                        };

                    IEnumerable<ParameterPropertyObj> sortedPropertyList =
                        from wrwrp in worksheetRowWithRepParam
                        join ppo in propertyList
                        on wrwrp.WorksheetRowParameter.Parameter equals ppo.Parameter
                        orderby wrwrp.AggList.Count() descending
                        select ppo;

                    propParamUsedAsSteeringList.Clear();

                    foreach (ParameterPropertyObj ppo in sortedPropertyList)
                    {
                        if (!propParamUsedAsSteeringList.Contains(ppo.Parameter))
                        {
                            var currentWorksheetRowsWithRepParam =
                                worksheetRowWithRepParam.Where(p => p.WorksheetRowParameter.Parameter == ppo.Parameter);

                            if (currentWorksheetRowsWithRepParam.Count() == 0)
                            {
                                continue;
                            }

                            var currentWorksheetRowWithRepParam = currentWorksheetRowsWithRepParam.ElementAt(0);

                            var currentAggList = currentWorksheetRowWithRepParam.AggList;

                            if (!firstRowForAggCreated)
                            {
                                currentWorksheetRowPropertyParameter = currentWorksheetRowWithRepParam.WorksheetRowParameter;
                            }
                            else
                            {
                                currentWorksheetRowPropertyParameter = propParamListForFirstCreatedRow.Where(p => p.Parameter == ppo.Parameter).ElementAt(0);
                            }

                            if (currentAggList.Count() > 1)
                            {
                                removeOrigRow = true;

                                steeringParametersForProperty = (List<string>)htPropertyParamAndSteeringParameters[ppo.Parameter];

                                currentSteeringParameters =
                                    from wrp in rowParameterListForWorksheet
                                    where wrp.WorksheetRowID == worksheetRow.ID
                                    && steeringParametersForProperty.Contains(wrp.Parameter)
                                    select wrp;

                                commandsWithPropertyParameterForRow =
                                    from cml in currentMappingList
                                    where cml.ParameterMappingList.Count(pmo => pmo.Name == ppo.Parameter) > 0
                                    select cml.CommandMapping.Name;

                                propParamUsedAsSteeringList.AddRange(
                                    from sp in sortedPropertyList
                                    where sp.Parameter != ppo.Parameter
                                    join csp in currentSteeringParameters
                                    on sp.Parameter equals csp.Parameter
                                    select csp.Parameter);

                                // CREATE NEW WORKSHEET ROWS FOR EACH BUT THE FIRST AGG ROW PARAMETER
                                for (int i = 0; i < currentAggList.Count(); i++)
                                {
                                    currentAggRow = currentAggList.ElementAt(i).AggRow;
                                    currentAggRowParameter = currentAggList.ElementAt(i).AggRowParameter;

                                    if (i == 0)
                                    {
                                        currentWorksheetRowPropertyParameter.Value = currentAggRowParameter.Value;

                                        if (!firstRowForAggCreated)
                                        {
                                            propParamListForFirstCreatedRow.Clear();

                                            newWSRID = newIDIndex.ToString().PadLeft(3, '0');
                                            newID = newWSRID;

                                            if (!worksheetRow.ID.Contains(','))
                                            {
                                                newID = "," + newWSRID;
                                            }

                                            newWSRForOrigRow = new WorksheetRow
                                            {
                                                ID = worksheetRow.ID + newID,
                                                OriginalWorksheetRowID = worksheetRow.OriginalWorksheetRowID,
                                                WorksheetID = worksheetRow.WorksheetID
                                            };

                                            ccrFormObj.myWorksheetRowList.Add(newWSRForOrigRow);

                                            parameterListForRow =
                                                from wrp in rowParameterListForWorksheet
                                                where wrp.WorksheetRowID == worksheetRow.ID
                                                select wrp;

                                            foreach (WorksheetRowParameter currentParameter in parameterListForRow)
                                            {
                                                newID = "";

                                                if ((currentParameter.ID != null) && (!currentParameter.ID.Contains(',')))
                                                {
                                                    newID = ",";
                                                }

                                                newID += newIDIndex.ToString().PadLeft(3, '0');

                                                newWSRP = new WorksheetRowParameter
                                                {
                                                    ID = currentParameter.ID + newID,
                                                    OriginalParameterID = currentParameter.OriginalParameterID,
                                                    WorksheetRowID = newWSRForOrigRow.ID,
                                                    Parameter = currentParameter.Parameter,
                                                    Value = currentParameter.Value,
                                                    Disabled = currentParameter.Disabled
                                                };

                                                if (htPropertyParamAndSteeringParameters.Contains(newWSRP.Parameter)
                                                    && newWSRP.Parameter != ppo.Parameter)
                                                {
                                                    // TODO: IF AGG, TAKE AGG POS VALUE

                                                    var steeringParamAggList =
                                                        from wrwrp in worksheetRowWithRepParam
                                                        where wrwrp.WorksheetRowParameter.Parameter == newWSRP.Parameter
                                                        select wrwrp.AggList;

                                                    if (steeringParamAggList.Count() > 0)
                                                    {
                                                        if (steeringParamAggList.ElementAt(0).Count() > i)
                                                        {
                                                            currentSteeringAggRow = steeringParamAggList.ElementAt(0).ElementAt(i).AggRow;
                                                            currentSteeringAggRowParameter = steeringParamAggList.ElementAt(0).ElementAt(i).AggRowParameter;

                                                            newWSRP.Value = currentSteeringAggRowParameter.Value;

                                                            ccrFormObj.myAggRowParameterList.Remove(currentSteeringAggRowParameter);
                                                            ccrFormObj.myAggRowList.Remove(currentSteeringAggRow);

                                                            ccrFormObj.myWorksheetRowParameterList.Add(newWSRP);
                                                        }
                                                    }
                                                    else
                                                    {
                                                        ccrFormObj.myWorksheetRowParameterList.Add(newWSRP);
                                                    }

                                                    propParamListForFirstCreatedRow.Add(newWSRP);
                                                }
                                                else
                                                {
                                                    ccrFormObj.myWorksheetRowParameterList.Add(newWSRP);
                                                }
                                            }

                                            foreach (var currentMapping in currentMappingList)
                                            {
                                                // Re-point original command mapping to new row
                                                newCMOID = newIDIndex.ToString().PadLeft(3, '0');

                                                if (!currentMapping.CommandMapping.ID.Contains(','))
                                                {
                                                    newID = "," + newCMOID;
                                                }

                                                // Create new command mapping object
                                                newCMO = new CommandMappingObj
                                                {
                                                    ID = currentMapping.CommandMapping.ID + newID,
                                                    Name = currentMapping.CommandMapping.Name,
                                                    WorksheetRowID = newWSRForOrigRow.ID
                                                };

                                                ccrFormObj.commandMappingList.Add(newCMO);

                                                foreach (ParameterMappingObj pmo in currentMapping.ParameterMappingList)
                                                {
                                                    newPMO = new ParameterMappingObj
                                                    {
                                                        Name = pmo.Name,
                                                        CommandMappingObjID = newCMO.ID
                                                    };

                                                    ccrFormObj.parameterMappingList.Add(newPMO);
                                                }
                                            }

                                            firstRowForAggCreated = true;
                                        }
                                    }
                                    else
                                    {
                                        newWSRID = newIDIndex.ToString().PadLeft(3, '0');
                                        newID = newWSRID;

                                        if (!worksheetRow.ID.Contains(','))
                                        {
                                            newID = "," + newWSRID;
                                        }

                                        newWSR = new WorksheetRow
                                        {
                                            ID = worksheetRow.ID + newID,
                                            OriginalWorksheetRowID = worksheetRow.OriginalWorksheetRowID,
                                            WorksheetID = worksheetRow.WorksheetID
                                        };

                                        ccrFormObj.myWorksheetRowList.Add(newWSR);

                                        foreach (WorksheetRowParameter currentSteeringParameter in currentSteeringParameters)
                                        {
                                            newID = "";

                                            if ((currentSteeringParameter.ID != null) && (!currentSteeringParameter.ID.Contains(',')))
                                            {
                                                newID = ",";
                                            }

                                            newID += newIDIndex.ToString().PadLeft(3, '0');

                                            newWSRP = new WorksheetRowParameter
                                            {
                                                ID = currentSteeringParameter.ID + newID,
                                                OriginalParameterID = currentSteeringParameter.OriginalParameterID,
                                                WorksheetRowID = newWSR.ID,
                                                Parameter = currentSteeringParameter.Parameter,
                                                Value = currentSteeringParameter.Value,
                                                Disabled = currentSteeringParameter.Disabled
                                            };

                                            var steeringParamAggList =
                                                from wrwrp in worksheetRowWithRepParam
                                                where wrwrp.WorksheetRowParameter.Parameter == newWSRP.Parameter
                                                select wrwrp.AggList;

                                            if (steeringParamAggList.Count() > 0)
                                            {
                                                if (steeringParamAggList.ElementAt(0).Count() > i)
                                                {
                                                    currentSteeringAggRow = steeringParamAggList.ElementAt(0).ElementAt(i).AggRow;
                                                    currentSteeringAggRowParameter = steeringParamAggList.ElementAt(0).ElementAt(i).AggRowParameter;

                                                    newWSRP.Value = currentSteeringAggRowParameter.Value;

                                                    ccrFormObj.myAggRowParameterList.Remove(currentSteeringAggRowParameter);
                                                    ccrFormObj.myAggRowList.Remove(currentSteeringAggRow);

                                                    ccrFormObj.myWorksheetRowParameterList.Add(newWSRP);
                                                }
                                            }
                                            else
                                            {
                                                ccrFormObj.myWorksheetRowParameterList.Add(newWSRP);
                                            }
                                        }

                                        // Add rep param
                                        newID = "";

                                        if ((currentWorksheetRowPropertyParameter.ID != null) && (!currentWorksheetRowPropertyParameter.ID.Contains(',')))
                                        {
                                            newID = ",";
                                        }

                                        newID += newIDIndex.ToString().PadLeft(3, '0');

                                        newWSRP = new WorksheetRowParameter
                                        {
                                            ID = currentWorksheetRowPropertyParameter.ID + newID,
                                            OriginalParameterID = currentWorksheetRowPropertyParameter.OriginalParameterID,
                                            WorksheetRowID = newWSR.ID,
                                            Parameter = currentWorksheetRowPropertyParameter.Parameter,
                                            Value = currentAggRowParameter.Value,
                                            Disabled = currentWorksheetRowPropertyParameter.Disabled
                                        };

                                        ccrFormObj.myWorksheetRowParameterList.Add(newWSRP);

                                        foreach (var currentMapping in currentMappingList)
                                        {
                                            if (commandsWithPropertyParameterForRow.Contains(currentMapping.CommandMapping.Name))
                                            {
                                                newCMOID = newIDIndex.ToString().PadLeft(3, '0');

                                                if (!currentMapping.CommandMapping.ID.Contains(','))
                                                {
                                                    newID = "," + newCMOID;
                                                }

                                                // Create new command mapping object
                                                newCMO = new CommandMappingObj
                                                {
                                                    ID = currentMapping.CommandMapping.ID + newID,
                                                    Name = currentMapping.CommandMapping.Name,
                                                    WorksheetRowID = newWSR.ID
                                                };

                                                ccrFormObj.commandMappingList.Add(newCMO);

                                                foreach (ParameterMappingObj pmo in currentMapping.ParameterMappingList)
                                                {
                                                    if ((pmo.Name == ppo.Parameter) || (currentSteeringParameters.Count(p => p.Parameter == pmo.Name) > 0))
                                                    {
                                                        newPMO = new ParameterMappingObj
                                                        {
                                                            Name = pmo.Name,
                                                            CommandMappingObjID = newCMO.ID
                                                        };

                                                        ccrFormObj.parameterMappingList.Add(newPMO);
                                                    }
                                                }
                                            }
                                        }
                                    }

                                    newIDIndex++;

                                    ccrFormObj.myAggRowParameterList.Remove(currentAggRowParameter);
                                    ccrFormObj.myAggRowList.Remove(currentAggRow);
                                }
                            }
                            else
                            {
                                currentAggRow = currentAggList.ElementAt(0).AggRow;
                                currentAggRowParameter = currentAggList.ElementAt(0).AggRowParameter;
                                currentWorks 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:29:23.000

当被多个线程访问时，静态方法没有任何*内在*的东西会使其变慢，除非例如：

*   您有一些共享资源正在成为一个节流阀，例如 shared`lock`或转到单个 UI 线程
*   你有比可用 CPU 内核更多的线程，它只需要进行大量切换
*   您正在最大化其他一些资源，例如磁盘 IO、网络 IO 等

由于您尚未发布任何代码，我们只能猜测。

# jquery - Jquery Timer Plugin - Ajax 调用问题

> ID：10929979
> 
> 赞同：0
> 
> 时间：2012-06-07T10:26:19.313
> 
> 标签：jquery, ajax, asp.net-mvc-3, timer

我正在使用 Matt Schmidt 的 jQuery Timer 插件

```
/*
*
*  jQuery Timer plugin v0.1
*    Matt Schmidt [http://www.mattptr.net]
*
*  Licensed under the BSD License:
*    http://mattptr.net/license/license.txt
*
*/

jQuery.timer = function (interval, callback) {
    /**
    *
    * timer() provides a cleaner way to handle intervals  
    *
    *  @usage
    * $.timer(interval, callback);
    *
    *
    * @example
    * $.timer(1000, function (timer) {
    *   alert("hello");
    *   timer.stop();
    * });
    * @desc Show an alert box after 1 second and stop
    * 
    * @example
    * var second = false;
    *  $.timer(1000, function (timer) {
    *    if (!second) {
    *      alert('First time!');
    *      second = true;
    *      timer.reset(3000);
    *    }
    *    else {
    *      alert('Second time');
    *      timer.stop();
    *    }
    *  });
    * @desc Show an alert box after 1 second and show another after 3 seconds
    *
    * 
    */

    var interval = interval || 100;

    if (!callback)
        return false;

    _timer = function (interval, callback) {
        this.stop = function () {
            clearInterval(self.id);
        };

        this.internalCallback = function () {
            callback(self);
        };

        this.reset = function (val) {
            if (self.id)
                clearInterval(self.id);

            var val = val || 100;
            this.id = setInterval(this.internalCallback, val);
        };

        this.interval = interval;
        this.id = setInterval(this.internalCallback, this.interval);

        var self = this;
    };

    return new _timer(interval, callback);
}; 
```

我在以下链中使用它：

```
$(document).ready(function () {
        // Get the requestId
        var requestId = $('#RequestId').val();
        var timerInterval = 10000;
        // On document load create a timer which will poll the controller every second
        $.timer(timerInterval, function (timer) {
            $.ajax(
                {
                    type: 'GET',
                    url: "/CreateFIS/GetRequestStatus",
                    data: { strRequestId: requestId },
                    success:
                        function (response) {
                            alert(response);
                            if (response != null) {
                                switch (response.toString()) {
                                    case 'Pending':
                                        // The request is still currently awaiting processing
                                        $('#InformationSpan').html('The request is currently Pending. Please Wait...');
                                        timer.stop();
                                        timer.reset(timerInterval);
                                        break;
                                    case 'Cancelled':
                                        // The request has been cancelled
                                        $('#InformationSpan').html('The request has been cancelled.');
                                        timer.stop();
                                        break;
                                    case 'Error':
                                        // There was an error with the request
                                        $('#InformationSpan').html('There has been an error generating the request. Please contact the administrator regarding this error.');
                                        break;
                                    case 'In Progress':
                                        // Generation is in progress
                                        $('#InformationSpan').html('The request is currently in progress, and will be with you shortly. Please Wait...');
                                        timer.stop();
                                        timer.reset(timerInterval);
                                        break;
                                    case 'Generated':
                                        // Generation has finished
                                        $('#InformationSpan').html('The request has finished generating.');
                                        timer.stop();
                                        //Todo redirect to viewer
                                        break;
                                    default:
                                        break;
                                }
                            }
                        },
                    error: function (req, status, error) {
                        alert(req);
                        alert(status);
                        alert(error);
                    }
                });
        });
    }); 
```

我的问题是，ajax 调用实际上只执行一次，我希望每次达到计时器间隔时都执行一次。我曾尝试在调用 reset() 之前删除对 stop() 的调用，但这没有区别。

我错过了一些明显的东西吗？

编辑：我认为这并不重要，但这是我控制器上的方法：

```
public JsonResult GetRequestStatus(string strRequestId)
        {
            Guid requestId;
            bool result = Guid.TryParse(strRequestId, out requestId);
            if(!result)
            {
                // TODO handle error here
                return null;
            }
            FISServiceClient fisServiceClient = new FISServiceClient();
            var status = fisServiceClient.GetFISRequestStatus(requestId);
            if (status == null) return null;
            return Json(status.FISRequestStatusName, JsonRequestBehavior.AllowGet);

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T11:09:12.353

您的时间间隔设置为每 10 秒运行一次，**而不是**您的评论指出的每秒运行一次。我已将毫秒数更新为正确的 1,000，并在此处创建了一个 jsFiddle：

[http://jsfiddle.net/ySHUQ/](http://jsfiddle.net/ySHUQ/)

一切似乎都正常工作（显然每秒都会收到错误警报，因为 URL 不存在）。也许你只是没有等待足够长的时间？

# javascript - highcharts 上的导出按钮以打开新选项卡

> ID：10929987
> 
> 赞同：1
> 
> 时间：2012-06-07T10:27:02.850
> 
> 标签：javascript, zend-framework, highcharts

我在页面上有一个渲染图表，我正在将高图表导出链接覆盖到要与 Zend 视图一起使用的自定义链接。

我是 javascript 新手，我不确定如何导出到新标签：

```
data.chartOptions.exporting.buttons.printButton = {
                    onclick : function() {

                        var win=window.open('','','location=0,titlebar=0,status=0,width=780,height=350');
                        win.focus();
                        this.exportChart({
                            url: ***.zendLink({
                                param1:***,
                                param2:***,
                                controller:"spm",
                                id:data.id,
                                action:"view",
                                format:"print"
                            })
                        });
                    }

                } 
```

这似乎不起作用，该窗口已打开，并且在第一个窗口上跟随链接，例如不在新窗口中。我该怎么做呢？

我需要将 javascript 加载到新窗口中吗？

如果您想了解更多信息，请询问。我不确定您需要多少代码。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:32:35.557

您正在将它们作为两件不同的事情来做。
1) 打开一个窗口。
2）调用exportChart。

您应该在您的站点中打开某个页面并在那里呈现图表。所以也应该为此加载导出图表源。

您可以像这样在新标签中打开一个窗口

```
window.open('http://www.google.com', '_blank', 'toolbar=0,location=0,menubar=0'); 
```

但是，它会在新选项卡中打开一个 URL。

您应该在该页面中有一个图表脚本，并且在加载该页面时您应该调用此方法

```
this.exportChart 
```

# objective-c - 使用核心数据在 ios 中建立一对多关系

> ID：10929989
> 
> 赞同：0
> 
> 时间：2012-06-07T10:27:15.010
> 
> 标签：objective-c, ios, xcode, core-data, ios5

我有两个模型：

```
Card with has_many relation to Works 
```

我的意思是我的数据库中有 7 个静态作品，我可以在创建卡片时选择其中的一些。

我定义了这样的 has_many 关系：

![有很多关系](../Images/2567848fc17e846bcbc04167e289cb0e.png)

我的问题很奇怪......它似乎可以工作，但是当我浏览我的 sqlite 文件时，我看不到 Card 和 Work 之间的任何表关系。

我期待一张带有 card_id 和 work_id 的表。

核心数据存储有多少关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T10:46:14.350

首先，我要提醒您不要打开 Core Data 吐出的 sqlite 文件并试图从中推断出一些东西。它意味着一种不透明的格式：您只应该通过 Core Data API 与 Core Data 持久存储交互。

但是，要回答您的问题：通常在数据库设计中，您不会像描述的那样将链接表用于一对多关系，而仅用于多对多。对于一对多，您将在“一”端的表中有一个外键字段，并且该字段的内容是另一个表的主键。例如（对不起，我在 Google 上找到的随机示例）：

![一对多](../Images/3c738d9febd5b05f7dceffaf105f06da.png)

`tblOrder`与 是一对多的关系`tblOrderDetails`。这是通过`Order#`在关系的多对多方中有一个字段来实现的，该字段是引用`tblOrder`表的主键的外键。如您所见，不需要链接表。

多对多关系*需要*链接表，但一对多不需要。

最后一点：我在您的屏幕截图中注意到，您没有为您的`works`or关系设置反向`customer`关系。Core Data 要求所有关系都具有逆向关系，否则您的数据可能会损坏。（这有点简化了，因为还有其他方法可以解决它，但一般来说做逆是最简单的。）

# grails - 如何使用文本字段下拉年份

> ID：10929991
> 
> 赞同：3
> 
> 时间：2012-06-07T10:27:19.767
> 
> 标签：grails

我正在 grails 中创建一个名为 HOLIDAY 的域类。我需要在我的假期年份字段中有一个年份下拉列表。听到是我的域：-

```
class Holiday extends CategoryMaster {

    String holidayName
    Date startDate
    int year
    Date dateCreated

    static constraints = {
        holidayName(blank:false, nullable:false)        
    }
} 
```

我需要年份字段中的年份下拉列表，它是否应该动态地来自一个域方法，该方法将丢弃月份和日期并在该下拉列表中仅反映年份添加 +50 -50？...我怎样才能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T10:36:57.970

`Holiday`假设您有一个在范围内命名的实例`holiday`，您可以使用以下内容创建下拉列表：

```
<g:select name="year" from="${holiday.year - 50..holiday.year + 50}"
    value="${holiday.year}"/> 
```

这会将下拉列表的当前值设置为`holiday.year`并提供 50 年的范围。

顺便说一句，如果`year`是 的年份`startDate`，则无需将其存储为单独的字段，因为它可以通过以下方式轻松计算：

```
startDate[Calendar.YEAR] 
```

# mysql - 将两行合二为一 - My Sql

> ID：10929997
> 
> 赞同：2
> 
> 时间：2012-06-07T10:28:08.707
> 
> 标签：mysql, sql

我发现了一些类似的帖子，但我没有发现它们有用。但我不知道如何将它们分组。

我想将“否”和“未设置”加到一行，并丢失“未设置”行。

所以：“否”=“否”+“未设置”

我有这样的事情：

```
TEST           TestCount        Month
'Yes'          123              March
'No'           432              March
'Not Set'      645              March
'Yes'          13               April
'No'           42               April
'Not Set'      45               April
'Yes'          133              May
'No'           41               May
'Not Set'      35               May
.... 
```

我想要这样的东西：

```
TEST           TestCount        Month
'Yes'          423              March      (Should be  123? - @Dems)
'No'           410              March      (Should be 1077? - @Dems)
'Yes'          154              April      (Should be   13? - @Dems)
'No'           192              April      (Should be   87? - @Dems)
'Yes'          130              May        (Should be  133? - @Dems)
'No'           149              May        (Should be   76? - @Dems) 
```

……

任何人都可以帮我解决这个问题，提前 tnx

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:31:15.690

```
SELECT  CASE test WHEN 'Not Set' THEN 'No' ELSE test END AS newtest,
        month, SUM(testCount)
FROM    mytable
GROUP BY
        newtest, month 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T10:36:55.990

[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/3f642/12)

```
SELECT CASE WHEN test = 'Not Set' THEN 'No' ELSE test END AS testvalue
  , SUM(testCount) as TestCount
  , month
FROM    test
GROUP BY testvalue, month 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T11:11:03.740

```
SELECT TEST, TestCount, Month
FROM (
        (SELECT 'No' AS TEST, SUM(TestCount) AS TestCount, Month
         FROM mytable
         WHERE TEST = 'No'
           OR TEST = 'Not Set'
         GROUP BY MONTH)
      UNION
        (SELECT TEST, TestCount, Month
         FROM mytable
         WHERE TEST = 'Yes')) AS newtable
GROUP BY Month, TEST; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T11:54:04.403

```
SELECT TEST, TestCount, Month  
FROM   
       (SELECT 'No' AS TEST, SUM(TestCount) AS TestCount, Month  
        FROM testEntity  
        WHERE TEST = 'No' OR TEST = 'Not Set'  
        GROUP BY MONTH)  
    UNION  
       (SELECT TEST, TestCount, Month  
        FROM testEntity  
        WHERE TEST = 'Yes')  
AS newtable  
GROUP BY Month, TEST, TestCount; 
```

testCount 也应该包含在 Group by 子句中。

# iphone - 如何使用 NSThread 和 UILocalNotification 来显示自定义视图？

> ID：10929998
> 
> 赞同：-1
> 
> 时间：2012-06-07T10:28:14.167
> 
> 标签：iphone

我正在开发**假来电**的应用程序。

为此，我现在正在使用本地通知。

我按照设定的时间收到通知，但它给了我弹出窗口，就像默认通知一样。

相反，我必须从 XIB 或通过编码显示视图。

那么，有没有办法用localnotification设置自定义视图呢？

或者我可以使用 NSThread 来获得上述输出吗？

如果有任何其他方法可以获得disered输出，请告诉我。

提前致谢

* * *

这就是我正在做的设置通知。

```
-(void)addNotification
{

        UILocalNotification *localNotification = [[UILocalNotification alloc] init];
        [localNotification setFireDate:[NSDate dateWithTimeIntervalSinceNow:5]];
        [localNotification setAlertAction:@"Answer"];

        [localNotification setAlertBody:[NSString stringWithFormat:@"%@\n\n %@",[txt_CallerName text],[txt_CallerNumber text]]];
        [localNotification setHasAction: YES];
        [localNotification setApplicationIconBadgeNumber:[[UIApplication sharedApplication] applicationIconBadgeNumber]];

        [[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; //Schedule the notification with the system

    [alertNotification setHidden:NO];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T11:43:42.883

`UILocalNotification`目前无法在接收 a 时显示自定义界面。`UILocalNotification`如果您的应用程序在前台时碰巧收到了，则有可能。但如果它在前台，则无论如何您都可以显示您的自定义界面。

您捕获本地通知触发并在发生这种情况时执行某些操作的方式是`-application:didReceiveLocalNotification:`在`UIApplicationDelegate`. 可以说，这是您问题的答案，但它无法实现您明确寻找的目标，即通过显示自定义 UI 在特定时间点启动您的应用程序，因为它只会在应用程序运行时发生已经在前台。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T11:36:13.683

您可以使用 NSNotificationCenter 来引发通知和事件发生，只需调用通知方法并显示您的自定义视图。

1.注册通知如下：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(displayCustomView) name:@"EventNotification" object:nil]; 
```

2.当事件发生时，通知方法如下：

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"EventNotification" object:nil]; 
```

3.在通知方法中显示您的自定义视图，如下所示：

```
-(void)displayCustomView
{
   //initialize custom view and display as required.
} 
```

# windows-phone-7 - MainPage 上的加载事件在应用程序启动时被调用两次

> ID：10929999
> 
> 赞同：1
> 
> 时间：2012-06-07T10:28:24.680
> 
> 标签：windows-phone-7

我的 MainPage 上的加载事件在应用程序启动时被调用两次。

页面的构造函数只获取一次，我很确定我也只分配了一次事件处理程序。到底是怎么回事？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T10:28:25.320

我花了一段时间才弄清楚发生了什么，但事实证明加载的事件不应该在页面上用于初始化任务，因为不能保证只调用一次。

**应始终**使用OnNavigatedTo 。请参阅下面的 MSDN 文章。

> 通常，您使用 OnNavigatedTo 方法而不是为 Loaded 事件创建事件处理程序。OnNavigatedTo 方法更可取，因为每次页面变为活动状态时它只调用一次。每次将元素添加到可视化树时，Silverlight 框架都会引发 Loaded 事件，*这在激活页面时可能会发生不止一次。*