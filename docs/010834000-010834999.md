# StackOverflow 问答 10834000-10834999

# haml - Haml.js：有没有办法插入动态属性值？

> ID：10834001
> 
> 赞同：0
> 
> 时间：2012-05-31T12:51:12.177
> 
> 标签：haml

这就是我想做的：

```
%input.current-page( type="text" value=currentPageNum ) 
```

其中**currentPageNum**是动态的。

这就是我调用这个模板的方式：

```
@$el.html( Haml.render( @template, { locals: { currentPageNum: @currentPageNum } } ) ) 
```

**这个问题是关于haml.js，但我没有足够的声誉在这里创建新标签**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:30:33.933

我找到了答案：

`%input.current-page{ type: "text", value: "#{currentPageNum}" }`

进一步阅读：

[https://github.com/creationix/haml-js/blob/master/test/embedded_code.haml](https://github.com/creationix/haml-js/blob/master/test/embedded_code.haml)

比较

[https://github.com/creationix/haml-js/blob/master/test/embedded_code.html](https://github.com/creationix/haml-js/blob/master/test/embedded_code.html)

# javascript - 在 webgl 中进行全屏手绘的正确方法是什么？

> ID：10834002
> 
> 赞同：1
> 
> 时间：2012-05-31T12:51:16.617
> 
> 标签：javascript, webgl, three.js

为了在 webgl 中实现鼠标手势，我想允许用户“在屏幕上绘图”徒手模式。在 3D webgl 中执行此操作将允许对正在使用的画笔产生很好的着色器效果，例如火焰效果、发光或其他很酷的图形糖果。

当前在 webgl 中有效地在屏幕上绘制的推荐方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:12:38.613

您有 2 个选项。

您可以绘制到 fbo，然后将 fbo 绘制到画布上

或者

您可以在创建 webgl 上下文时请求“preserveDrawingBuffer: true”。

```
var canvas = document.getElementById("canvas");
var gl = canvas.getContext("webgl", {preserveDrawingBuffer:true});

program = twgl.createProgramFromScripts(gl, ["2d-vertex-shader", "2d-fragment-shader"]);
gl.useProgram(program);

var positionLoc = gl.getAttribLocation(program, "v_position");
var offsetLoc = gl.getUniformLocation(program, "u_offset");

var res = 1;
setupQuad(gl, res, positionLoc);

canvas.addEventListener('mousemove', draw, false);

function draw(event) {
  var m = getNoPaddingNoBorderCanvasRelativeMousePosition(event);
  // convert mouse coords to clip space since that's what this
  // particular shader is using. See 
  // https://webglfundamentals.org
  // for how to use pixels instead of clip space. 
  var x = m.x / gl.canvas.width * 2 - 1;
  var y = m.y / gl.canvas.height * -2 + 1;  // flip y

  drawBrush(x, y);
}

function drawBrush(x, y) {
  gl.uniform2f(offsetLoc, x, y);

  gl.drawElements(gl.TRIANGLES, res * res * 6, gl.UNSIGNED_SHORT, 0);
}

drawBrush(0, 0);

function setupQuad(gl, gridRes, positionLoc) {
  var scale = 0.05;
  var objects = [];

  var vertsAcross = gridRes + 1;
  var numVerts = vertsAcross * vertsAcross;
  var positions = new Float32Array(numVerts * 2);
  var indices = new Uint16Array(6 * gridRes * gridRes);
  var poffset = 0;

  for (var zz = 0; zz <= gridRes; ++zz) {
    for (var xx = 0; xx <= gridRes; ++xx) {
      var u = xx / gridRes;
      var v = zz / gridRes;
      positions[poffset + 0] = (-1 + 2 * u) * scale;
      positions[poffset + 1] = (-1 + 2 * v) * scale;
      poffset += 2;
    }
  }

  var tbase = 0;
  for (var zz = 0; zz < gridRes; ++zz) {
    var index = zz * vertsAcross;
    for (var xx = 0; xx < gridRes; ++xx) {
      indices[tbase + 0] = index + 0;
      indices[tbase + 1] = index + 1;
      indices[tbase + 2] = index + vertsAcross;
      indices[tbase + 3] = index + vertsAcross;
      indices[tbase + 4] = index + 1;
      indices[tbase + 5] = index + vertsAcross + 1;
      index += 1;
      tbase += 6;
    }
  }

  function makeBuffer(data, type, size, loc) {
    var buf = gl.createBuffer();
    gl.bindBuffer(type, buf);
    gl.bufferData(type, data, gl.STATIC_DRAW);
    if (type == gl.ARRAY_BUFFER) {
      gl.enableVertexAttribArray(loc);
      gl.vertexAttribPointer(loc, size, gl.FLOAT, false, 0, 0);
    }
    return buf;
  }

  objects.push(makeBuffer(positions, gl.ARRAY_BUFFER, 2, positionLoc));
  objects.push(makeBuffer(indices, gl.ELEMENT_ARRAY_BUFFER));

  return objects;
};

function getRelativeMousePosition(event, target) {
  target = target || event.target;
  var rect = target.getBoundingClientRect();

  return {
    x: event.clientX - rect.left,
    y: event.clientY - rect.top,
  }
}

// assumes target or event.target is canvas
function getNoPaddingNoBorderCanvasRelativeMousePosition(event, target) {
  target = target || event.target;
  var pos = getRelativeMousePosition(event, target);

  pos.x = pos.x * target.width  / canvas.clientWidth;
  pos.y = pos.y * target.height / canvas.clientHeight;

  return pos;  
}
```

```
canvas { border: 1px solid black; }
```

```
<script src="https://twgljs.org/dist/twgl.min.js"></script>
<script id="2d-vertex-shader" type="x-shader/x-vertex">
attribute vec2 v_position;
uniform vec2 u_offset;

void main() {
    gl_Position = vec4(v_position + u_offset, 0, 1);
}
</script>
<script id="2d-fragment-shader" type="x-shader/x-fragment">
precision mediump float;
void main() {
    gl_FragColor = vec4(0, 1, 0, 1);  
}
</script>
<canvas id="canvas" width="400" height="300"></canvas>
```

# iphone - iOS 应用程序与 iTunes 同步

> ID：10834003
> 
> 赞同：0
> 
> 时间：2012-05-31T12:51:20.487
> 
> 标签：iphone, ios, sqlite, itunes, icloud

我为 iPad 开发了一个应用程序，我还允许该应用程序与 iTunes 同步数据。该应用程序正确显示在 iTunes 的文件共享部分。但是我注意到该应用程序没有与 iTunes 同步。我的意思是它没有复制到我的 mac，所以如果我删除它并再次将我的设备与 iTunes 同步没有任何反应，我必须通过使用 Xcode 编译它来安装应用程序。我想这与配置文件有关，例如临时分发或类似的东西，有什么线索吗？！

我需要它，因为我需要一个快速的解决方案来备份我的应用程序的 SQLite 数据库。共享它的数据库文件允许我在最坏的情况下使用最新版本的数据库重新安装应用程序，只要用户定期同步他的设备。

下一步是使用 dropbox 或 couchdb 以无缝方式备份/同步数据库。我不会选择 iCloud，因为我需要使用核心数据，而且我的应用程序已经有一个 SQLite 数据库，所以它意味着要改变我迄今为止所做的工作。此外，我需要创建用户“组”。我的意思是同一个应用程序可以被多个共享他们“自己的”数据库的用户使用。我猜想 iCloud 不是为了这个目的。有人用过Dropbox或couchdb吗？！提前致谢

# objective-c - 如何从 CCLayer 访问属性？

> ID：10834010
> 
> 赞同：0
> 
> 时间：2012-05-31T12:51:39.540
> 
> 标签：objective-c, properties, cocos2d-iphone, cclayer

`doneInitializing`我正在向我的场景添加一个图层，我想通过在我的初始化调用后设置一个布尔值来检查它何时完全加载`YES`。但我需要以某种方式访问​​它......我该怎么做？

**加载屏幕.h**

```
@interface LoadingScreen : CCLayerColor{
    CCLayer *hWL;
} 
```

**加载屏幕.m**

```
hWL = [HelloWorldLayer node];

[self addChild:hWL];

if(hWL.doneInitializing == YES){ // that is where I get stuck
//do something

} 
```

我无法访问变量`doneInitializing`...为什么？

**HelloWorldLayer.h**

```
@interface HelloWorldLayer : CCLayer
{   
    BOOL doneInitializing;
}

@property (nonatomic,readwrite) BOOL doneInitializing; 
```

**HelloWorldLayer.m**

```
@synthesize doneInitializing; 
```

有没有更好的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:42:16.493

只需更改此部分：

```
@interface LoadingScreen : CCLayerColor{
    CCLayer *hWL;
} 
```

对此：

```
@interface LoadingScreen : CCLayerColor{
    HelloWorldLayer *hWL;
} 
```

或者改用这一行：

```
if(((HelloWorldLayer *)hWL).doneInitializing == YES){ 
```

编译器和运行时需要知道您获得的是.`HelloWorldLayer`而不是`CCLayer`. 尽管您正在分配`hWL = [HelloWorldLayer node]`,`hWL`已被声明为普通`CCLayer`的并且带有的行`hWL.doneInitializing`会遇到麻烦，因为据运行时所知， a`CCLayer`没有名为 的属性`doneInitializing`。您需要通过将其声明`hWL`为`HelloWorldLayer`或将其强制转换为该类来告诉运行时“老兄，hWL 是一个 HelloWorldLayer”。

# jquery - 宝石依赖错误

> ID：10834014
> 
> 赞同：0
> 
> 时间：2012-05-31T12:51:59.490
> 
> 标签：jquery, ruby-on-rails-3, gem

我正在关注 Michael Hartl 的 RoR 教程。在第 3 章（sample_app）中，我尝试通过“bundle install --without production 命令”安装 gem，但我一直遇到以下问题：

```
Bundler could not find compatible versions for gem "railties":
  In Gemfile:
    rails (= 3.2.3) ruby depends on
      railties (= 3.2.3) ruby

    jquery-rails (= 2.0.0) ruby depends on
      railties (3.2.4.rc1) 
```

在使用终端安装jquery-rail，即“gem install jquery-rails -v '2.0.0'”时，我安装成功。但是在我执行“捆绑安装”之后，同样的依赖问题出现了。

另一件事，我的本地 gem 文件显示我确实有“railties -v 3.2.3”，那么为什么会出现错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:30:33.563

您是否在 gemfile 中指定版本号？（为了将来参考，粘贴 gemfile 中的行将帮助我们解决问题。）

尝试删除 jquery-rails 的 gemfile 中的版本号或使用 ~> 像这样：

```
gem 'jquery-rails', '~> 2.0.0' 
```

FWIW，除了 jquery-rails 是 2.0.1 之外，它在我的机器上都可以使用相同的版本。

# android - 如何更改 sql server 中的图像名称以将它们保存在 android drawable 文件夹中？

> ID：10834015
> 
> 赞同：0
> 
> 时间：2012-05-31T12:52:00.430
> 
> 标签：android

在我的项目中，我需要**显示图像**。我们在数据库中有图像名称，我需要将这些图像保存在可绘制文件夹中。**但是在将这些图像保存在可绘制文件夹中之前，图像名称包含特殊符号、大写字母等。**因此，当我尝试将这些图像复制到可绘制文件夹中时，它不支持那些特殊字符和空格。所以我需要更改图像名称，这不是问题。**但我的问题是，如果我更改图像名称，我还应该更改数据库中的这些名称。** 我的图像数量超过 800 张。那么是否有任何解决方案或手动更改所有内容是唯一的解决方案？请帮我重新评价这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:56:07.777

您必须考虑一种好的算法来保留 res 中的图像和 db 中的图像之间的链接。

例如

DB NAME: My_Image_Number_3_.jpg -> RES NAME: my_image_number_3.jpg 在这个简单的例子中，转换只是一个 toLoweCase

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:57:52.820

可绘制资源（或任何其他 XML 资源）**不**支持大写字母。您需要将图像存储在 SD 卡、网络服务器或[Assets](http://developer.android.com/reference/android/content/res/AssetManager.html)文件夹中。

老实说，在 Drawable 文件夹中存储 800 张图像似乎是一个非常糟糕的主意。同样，如果您将其存储在 Assets 文件夹中，它很可能会使您的应用程序变得非常大。除非图像*非常*小，否则我建议在用户第一次安装并运行应用程序后将它们从网络服务器下载到 SD 卡上。这将使您的 .apk 文件变小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:10:24.250

这是我在最近的一个项目中使用的“快速而肮脏”的 C# 算法，用于为 Android 重命名 >1000 个资源。我遍历了项目文件夹中的每个文件，并为每个文件名调用了这个方法来重命名它。这是一段“扔掉”的代码，所以我没有费心使用字符串生成器等。可能会更好，但它确实有效！

```
private String formatName(String name) 
    {
        String result = name.ToLower();

        result = result.Replace("?", "");
        result = result.Replace("'", "");
        result = result.Replace("`", "");
        result = result.Replace(" ", "_");
        result = result.Replace("-", "_");

        if (Char.IsDigit(result.ToCharArray()[0])){
            result = "num" + result;
        }

        return result;
    } 
```

您可以在 SQL 查询中运行相同的字符串替换来更新您的数据库。

# c# - 为什么我得到“不一致的可访问性：属性类型 xxx...”？

> ID：10834018
> 
> 赞同：3
> 
> 时间：2012-05-31T12:52:11.430
> 
> 标签：c#

这有什么问题？：

```
public abstract class EFNLBaseRepository:IDisposable
{

    NLSubscriberDBContext _dbContext;
    protected internal NLSubscriberDBContext dbContext
    {
     get
      {...}

    }
...
}

internal class NLSubscriberDBContext : DbContext
{
  ...
} 
```

当然，这两个类都在同一个程序集中。这是我得到的编译错误：

> 错误 1 ​​可访问性不一致：属性类型 'NLSubscriber.Core.Service.Repository.EFDAL.NLSubscriberDBContext' 比属性 'NLSubscriber.Core.Service.Repository.EFDAL.EFNLBaseRepository.dbContext' C:\Data\Projects\Neticon\TFS 更难访问\NLSubscriber - Newsletter\NLSubscriber-newsletter\NLSubscriber.Core\Service\Repository\EFDAL\EFNLBaseRepository.cs 12 50 NLSubscriber.Core

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:57:24.827

`protected internal`允许所有子类访问该属性，即使子类位于 DLL 之外。这与 属性的类型不一致`internal`，因为它需要外部的子类才能访问内部类型。

考虑这个例子：我`EFNLBaseRepository`从你的 DLL 外部子类化

```
public sealed EFNLSealedRepository : EFNLBaseRepository {
    public DoSomething() {
        // Access to dbContext should be allowed, because it is protected;
        // However, NLSubscriberDBContext should not be accessible.
        // This is an inconsistency flagged by the C# compiler.
        NLSubscriberDBContext context = dbContext;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:58:04.040

问题是另一个程序集可以固有`EFNLBaseRepository`该类，并且这种情况`internal`使得派生类更难访问它。因为那个冲突编译器不允许它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:03:17.993

protected internal ：访问仅限于当前程序集**或**从包含类派生的类型。

[http://msdn.microsoft.com/en-us/library/ba0a1yw2(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/ba0a1yw2%28v=VS.80%29.aspx)

# c++ - C++ SFML 的性能问题

> ID：10834023
> 
> 赞同：3
> 
> 时间：2012-05-31T12:52:41.887
> 
> 标签：c++, sfml

我最近开始使用 SFML 库在 C++ 上开发基于图块的游戏。因为我对 C++ 和 SFML 都没有太多经验，所以我很确定性能问题与我的代码有关。

基本思想是我有一个二维的瓷砖数组，我以这种方式动态创建：

```
Tile tiles**;

tiles = new Tile*[sizeX];

for(int i = 0; i < sizeX; i++)
   tiles[i] = new Tile[sizeY]; 
```

我以这种方式绘制所有内容：

```
for(int x = 0; x < sizeX; x++)
{
   for(int y = 0; y < sizeY; y++)
   {
       tiles[x][y].Draw(app);
   }
} 
```

变量 app 是 sf::RenderWindow，它作为引用传递给函数。

当我绘制 10x10 地图时，它以慢 fps 运行。

对不起，我的英语不好！

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:00:16.933

您的性能问题可能与迭代二维数组无关。可能是因为`Tile::Draw`性能问题，所以尽量优化一下。

但无论如何 - 正如@chris 所说，使用一维向量而不是二维数组可能会更快一些。但这不应该产生*重大*的性能变化。

渲染瓦片贴图的正确方法是创建一个大纹理，然后将瓦片渲染到该纹理上，然后将这个大纹理渲染到屏幕上，而不是像通常在 XNA 中那样渲染每个瓦片。

这是因为 SFML 使用 OpenGL 的方式对大量`Draw()`调用不友好。

# smartgwt - SmartGWT：隐藏分组网格中的列（使组）

> ID：10834024
> 
> 赞同：0
> 
> 时间：2012-05-31T12:52:43.150
> 
> 标签：smartgwt

我有一个 SmartGWT 网格，我想在其中显示一些来自 JBoss-Server 的数据，它按我从 JSON 获取的一个文本字段分组。

所以，但我只希望这个文本字段出现在每个组的标题中。

当我在该字段上执行 .hideField 时，我将失去该组。

```
grid.hideField("pool"); 
```

但是当我将它隐藏在网格标题的上下文菜单中时，该列仍然存在。

知道怎么做吗？

罗马。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T10:03:45.397

有一个简单而干净的解决方法。只需将字段的**宽度**参数设置为“0”。如果你有一个额外的清除**标题**参数（但这仅在一些复杂的 ListGrid 用例中是必需的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T10:52:15.937

您已经在 [这里](https://stackoverflow.com/questions/10834024/smartgwt-hide-a-column-in-a-grouped-grid-which-makes-the-group)发帖，但没有回答那些将您导向 ListGridField 的 setHidden 方法的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T00:45:57.587

实际上，与网格本身相比，我[使用 DataSourceField 隐藏字段是最成功的。](http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/data/DataSourceField.html#setHidden%28java.lang.Boolean%29)

```
DataSource ds = new DataSource() {
    {
        DataSourceTextField field = new DataSourceTextField();
        field.setHidden(true);

        addField(field);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-28T15:40:51.820

干净的方法是隐藏`ListGridField`这样的：

```
 ListGridField groupField = new ListGridField(FLD_CATEGORY, "Group");
    groupField.setHidden(true); 
```

请注意，如果您使用 a `DataSourceField`，您可能需要声明硬编码`ListGridField`定义

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2022-03-01T11:49:34.003

下面的标签将有助于隐藏表格列 listGrid.hideField("field_name");

# html - 图像未与弹出块右对齐

> ID：10834028
> 
> 赞同：-1
> 
> 时间：2012-05-31T12:53:11.640
> 
> 标签：html, css, alignment

你好，

我创建了一个弹出窗口，该弹出窗口的最右侧有一个关闭按钮。我试图通过放置来对齐该图像：

```
position:absolute;
right:0px;
top:0px; 
```

但它没有正确对齐..任何人都可以帮忙.!!!!

这是我的一段代码..

```
 <!DOCTYPE>
    <html>
     <head>
      <title> New Document </title>     
 <style>      
      div.irmGraphPopup{
        border:10px solid black;
        width:1000px;
        height:500px;
        position:absolute;
       }

      div.irmGraphPopup span:{
        position:absolute;
        right:0px;
        top:0px;
      }
       </style>
     </head>

     <body>
      <div class="irmGraphPopup">
          <span> <img src="round_black_close2.png" alt="Close"/></span>
       </div>

     </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:55:24.953

你有一个错字：

```
div.irmGraphPopup span{
   position:absolute;
   right:0px;
   top:0px;
} 
```

去除那个 ：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:00:13.417

它是你的 CSS 选择器

```
 <!DOCTYPE>
    <html>
     <head>
      <title> New Document </title>     
 <style>      
      div.irmGraphPopup{
        border:10px solid black;
        width:1000px;
        height:500px;
        position:absolute;
       }

      #myid{
        position:absolute;
        right:0px;
        top:0px;
      }
       </style>
     </head>

     <body>
      <div class="irmGraphPopup">
          <span id=myid> <img src="round_black_close2.png" alt="Close"/></span>
       </div>

     </body>
    </html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:03:19.910

如果你改正错字，对我来说很好。它应该是

```
div.irmGraphPopup span { 
```

不是

```
div.irmGraphPopup span:{ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:00:51.997

将 div.irmGraphPopup 的位置元素更改为相对。然后跨度相**对于**div**绝对定位。**还要去掉跨度后的冒号（错字？）

 **```
div.irmGraphPopup{
        border:10px solid black;
        width:1000px;
        height:500px;
        position:relative;
} 
```**

# .net - 在单元测试中检测 finalize 异常

> ID：10834034
> 
> 赞同：2
> 
> 时间：2012-05-31T12:53:33.800
> 
> 标签：.net, testing, memory-leaks, finalize

有没有办法强制在单元测试期间创建的所有对象完成？我一直遇到的问题是，由于丢失`GCHandle`实例而导致的任何泄漏似乎只有在进程本身（而不是`AppDomain`！）终止时才最终确定，这是在程序集中的所有测试都已运行（并且可能“通过”）之后。

我在 C# 中最好但不够的尝试：

```
class Foo : IDisposable
{
    ~Foo() { Dispose(); }
    public void Dispose() { throw new Exception(); }
}

[TestClass]
public class Finalise
{
    void bar()
    {
        GCHandle.Alloc(new Foo()); // leak
    }

    [TestMethod]
    public void DetectFinalizeException()
    {
        bar();
        GC.Collect();
        GC.WaitForPendingFinalizers();
    }
} 
```

运行这将导致“通过”测试，但会通知后台线程有未处理的异常。在具有多个测试的装配中，这不太理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:05:16.490

在我看来，您实际上想要测试 Dispose 方法。如果是这样，为什么不直接调用 Dipose 方法呢？

GC 将在调用它的线程上运行。因此，另一种选择是在测试中调用 GC.Collection 方法。

编辑：您是否尝试过在单元测试中调用[GC.Collect ？](http://msdn.microsoft.com/en-us/library/xe0c2357.aspx)我从来不需要完全按照您的要求做，但据我了解，垃圾收集器应该在您的单元测试线程中运行，从而允许您的单元测试捕获任何异常。

# java - AutoBean、数组/列表属性和 JSNI

> ID：10834036
> 
> 赞同：0
> 
> 时间：2012-05-31T12:53:35.817
> 
> 标签：java, gwt, jsni, autobean

我在 Autobeans 的上下文中以某种方式与数组和 JSNI 作斗争。
在我的一个 GWT 项目中，我使用 JSON 从后端检索数据。
在客户端上检索到数据后，我想使用自定义可视化小部件（用 javascript 开发）对其进行可视化。

以下是组件：

**JSON结构**：

```
{'ids':[1,2,3,4],'data':[[1.0],[1.0,2.0],[1.0,2.0,3.0] ... ]} 
```

基本上我的 json 有效负载中有两个数据集。**ids**是一个 ints ( `int[]`) 数组，**data**是一个 float 数组 ( `float[][]`)

当然有不同的方法来解析客户端上的数据。我决定使用 AutoBeans。所以我为我的 json 结构定义了一个接口。

**自动豆**：

```
interface MyData {
   List<Integer> ids;
   List<List<Float>> data;
} 
```

解析数据工作正常。

我的自定义可视化小部件有一个 API 函数来设置如下所示的数据：

```
function api_setData(ids,data) {
   //ids should be an Array of Ints
   //data should be an array of array of Floats.
} 
```

问题是使用 JSNI 我不能使用普通的 Java 数组。我必须使用`JsArray`.

```
public final native void setData(JsArrayInteger ids,JsArray<JsArrayInteger> data /*-{
       this.api_setData(ids,data);
    }-*/; 
```

所以我必须将我的 AutoBean 属性（**data**和**ids**）转换为 JsArray 实例。有没有更好/更好的方法来做到这一点？

或者也许我应该使用`JSONParser`而不是`AutoBeans` 更有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:10:01.543

如果你必须处理 JSNI，而且如果你`MyData`只在客户端使用你的接口，那么不要使用 AutoBeans。改用 JSON 覆盖：

```
public class MyData extends JavaScriptObject {
   protected MyData() { /* required for JSOs */ }

   public final native JsArrayInteger getIds() /*-{ return this.ids; }-*/;

   public final native JsArray<JsArrayNumber> getData() /*-{ return this.data; }-*/;
} 
```

然后解析你的 JSON：

```
MyData data = JsonUtils.safeEval(jsonStr);
customVisualizationWidget.setData(data.getIds(), data.getData()); 
```

* * *

或者，假设您只需要为 setData 解析数据，那么只需使用`JavaScriptObject`.

在您的小部件中：

```
public final native void setData(JavaScriptObject obj) /*-{
   this.api_setData(obj.ids, obj.data);
}-*/; 
```

当您需要解析 JSON 并将其提供给小部件时：

```
customVisualizationWidget.setData(JsonUtils.safeParse(jsonStr)); 
```

# gnuplot - gnuplot - 调整键/图例的大小

> ID：10834037
> 
> 赞同：33
> 
> 时间：2012-05-31T12:53:36.423
> 
> 标签：gnuplot

如何在 gnuplot (4.6.0) 中调整图例的大小？我的意思是线条的大小，*而不仅仅是*字体大小。当我从 pdf 切换到 pdfcairo 终端时，大小突然跳跃并导致键与兴趣点重叠。（我需要 cairo 来启用 unicode。）

我刚刚发明的一个答案是（例如）：

```
set key font ",8"
set key spacing 0.5 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-05-31T13:08:11.773

要调整样本的长度：

```
set key samplen X 
```

（默认为 4）

要调整样本的垂直间距：

```
set key spacing X 
```

（默认为 1.25）

和（为了完整性），调整字体大小：

```
set key font "<face>,<size>" 
```

（默认取决于终端）

当然，所有这些都可以组合成一行：

```
set key samplen 2 spacing .5 font ",8" 
```

请注意，您还可以使用`set key at <position>`或任何一个预定义位置来更改键的位置（我将`help key`在这一点上推迟）

# java - JOptionPane 在不同的行上有多个输入

> ID：10834040
> 
> 赞同：5
> 
> 时间：2012-05-31T12:53:39.140
> 
> 标签：java, swing, layout-manager, joptionpane

我想创建一个`JOptionPane`允许用户选择要连接的 IP 地址和端口。它的结构应该是这样的，

> IP 地址：[此处的文本字段]
> 
> 端口：[此处的文本字段]
> 
> 取消 确定

标签应左对齐，文本字段也应左对齐。我不能在这里真正模拟故事板，但基本上文本字段不应该错位，即使标签和文本字段之间有空格。

每个标签和文本字段对应位于单独的行上，并且“取消确定”按钮应向右对齐，位于文本框下方。

有没有办法在代码中做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T12:59:56.370

请参阅[这个](https://stackoverflow.com/a/10773412/418556)布局似乎相似的示例。

![](../Images/f1d7eafde0ed8c95544fb732aaf8690e.png)

## 这个例子

### 右对齐

使用以下方法右对齐标签中的文本，我认为这看起来更好：

```
labels.add(new JLabel("User Name", SwingConstants.RIGHT)); 
```

对于左对齐文本，将其更改为：

```
labels.add(new JLabel("User Name")); 
```

### 改进

它是使用嵌套布局、和中的`GridLayout`实例来完成的。`WEST``CENTER``BorderLayout`

使用更强大的布局（例如`MigLayout`或更现代的 J2SE 布局（例如`BoxLayout`或`GroupLayout`.

`GroupLayout`可以提供此 UI 所需的对齐类型，同时不会将`CENTER`字段拉伸到相同的宽度（这在上面的嵌套布局中也可以修复，但需要另外 2 个约束面板）。我相信其他两个也可以完成这项工作，但没有太多的经验。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T13:02:04.773

创建自定义对话框 (jdialog) 或使用 JOptionPane.showInputDialog，请参阅本教程：

[http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)

# android - listFragment 在基于 tabHost 的应用程序上没有膨胀

> ID：10834044
> 
> 赞同：0
> 
> 时间：2012-05-31T12:54:15.263
> 
> 标签：android, listview, android-fragments

我有一个基于 tabHost 的应用程序，带有片段，如果我将片段与 LinearLayout 一起使用，它可以正常工作

但我需要在其中一个选项卡视图上列出一个列表 [片段]

但应用程序崩溃，因为没有正确充气：我的班级[标签视图片段]：

```
public class Tab2Fragment extends Fragment { //primera pregunta, lo puedo hacer asi o con FragmentActivity
//public class Tab2Fragment extends ListFragment { //primera pregunta, lo puedo hacer asi o con FragmentActivity

    private FragmentManager fm;
    private ListFragment list;
    private List<Map<String, String>> listItems;
    private String[] froms;
    private int[] viewIds;

    /* (non-Javadoc)
     * @see android.support.v4.app.Fragment#onCreateView(android.view.LayoutInflater, android.view.ViewGroup, android.os.Bundle)
     */

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            // We have different layouts, and in one of them this
            // fragment's containing frame doesn't exist.  The fragment
            // may still be created from its saved state, but there is
            // no reason to try to create its view hierarchy because it
            // won't be displayed.  Note this is not needed -- we could
            // just run the code below, where we would create and return
            // the view hierarchy; it would just never be used.
            return null;
        }
        return (LinearLayout)inflater.inflate(R.layout.tab_frag2_layout, container, false);
    }

} 
```

我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="#00FF00">

        <fragment
        android:name="android.support.v4.app.ListFragment"
        android:id="@+id/List"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>

</LinearLayout> 
```

错误：

```
05-31 22:39:58.412: E/AndroidRuntime(2796): FATAL EXCEPTION: main
05-31 22:39:58.412: E/AndroidRuntime(2796): android.view.InflateException: Binary XML file line #8: Error inflating class fragment
05-31 22:39:58.412: E/AndroidRuntime(2796):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:582)
05-31 22:39:58.412: E/AndroidRuntime(2796):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:618)
05-31 22:39:58.412: E/AndroidRuntime(2796):     at android.view.LayoutInflater.inflate(LayoutInflater.java:407)
05-31 22:39:58.412: E/AndroidRuntime(2796):     at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
05-31 22:39:58.412: E/AndroidRuntime(2796):     at com.orchard.elasto.Tab2Fragment.onCreateView(Tab2Fragment.java:54)
05-31 22:39:58.412: E/AndroidRuntime(2796):     at android.support.v4.app.FragmentManagerImpl.moveToState(FragmentManager.java:870) 
```

那么，如何正确地扩充列表呢？

我应该用fragmentList来做吗，即使tabHost正在指定一个片段？

```
public void onTabChanged(String tag) {
        TabInfo newTab = this.mapTabInfo.get(tag);
        if (mLastTab != newTab) {
            FragmentTransaction ft = this.getSupportFragmentManager().beginTransaction();
            if (mLastTab != null) {
                if (mLastTab.fragment != null) {
                    ft.detach(mLastTab.fragment);
                }
            }
            if (newTab != null) {
                if (newTab.fragment == null) {
                    newTab.fragment = Fragment.instantiate(this,
                            newTab.clss.getName(), newTab.args);
                    ft.add(R.id.realtabcontent, newTab.fragment, newTab.tag);
                } else {
                    ft.attach(newTab.fragment);
                }
            }

            mLastTab = newTab;
            ft.commit();
            this.getSupportFragmentManager().executePendingTransactions();
        }
    } 
```

多谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:17:03.247

你的问题在这里：

```
 android:name="android.support.v4.app.ListFragment" 
```

您告诉它运行该片段的类是 ListFragment。

您需要更改它以引用您的类，并且需要将该类设为 ListFragment 而不是 Fragment。

```
 android:name="your.package.name.Tab2Fragment" 
```

# objective-c - 当用户在 mapview 中点击 pin 时调用另一个视图

> ID：10834047
> 
> 赞同：0
> 
> 时间：2012-05-31T12:54:32.250
> 
> 标签：objective-c, cocoa-touch, mkmapview

我有带有多重注释的地图，我希望用户点击 pin 来调用另一个视图。

我正在使用故事板。

使用 .xib 这将是这样的。

```
...
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{
...
[rightButton addTarget:self
                    action:@selector(showDetails:)
          forControlEvents:UIControlEventTouchUpInside];
}

-(void)showDetails:(UIButton*)sender {

     OfferDetailViewController *detail = [[OfferDetailViewController alloc] init];

     detail.context = context;

     Offers *offer = [arr objectAtIndex:indexPath.row];

     //detail.offer = offer;

    [self.navigationController pushViewController:detail animated:YES];
}

... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:00:17.367

您可以在视图之间创建一个 Segue，并在 StoryBoard 中为其指定一个标识符。然后执行“performSegueWithIdentifier”来触发它。因此，如果您的 Segue 的标识符为“FrameSegue”，则在用户点击调用的方法中，您可以调用“performSegueWithIdentifier”

```
[self performSegueWithIdentifier:@"FrameSegue" sender:sender]; 
```

如果您需要先进行任何设置以将数据传递到另一个视图，您可以在“prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender”中设置转换。

我希望这会有所帮助。

在下面回答您的评论：-

如果您有一个标识为“FrameSegue”的 Segue，并且您想将一个字符串从视图“MyFirstView”传递到名为“MySecondView”的第二个视图，并将其存储在第二个视图的 myData 中。

试试这个：

在 MyFirstView.m 中

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if ([segue.identifier isEqualToString:@"FrameSegue"]) {

        MySecondView *secondView = [segue destinationViewController];
        [secondView setMyData:myString];
    }
}

- (IBAction)tappedThing:(id)sender {

    NSString *myString = @"A String";

    [self performSegueWithIdentifier:@"FrameSegue" sender:sender];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:06:20.350

实现该`mapView:annotationView:calloutAccessoryControlTapped:`方法并将您的`showDetail:`实现放在那里，可能对有问题的注释视图进行一些条件测试。

# git - Git SVN结帐分支在错误的目录中

> ID：10834048
> 
> 赞同：1
> 
> 时间：2012-05-31T12:54:32.953
> 
> 标签：git, svn

我有一个具有以下结构的 SVN 存储库：

```
Root
+ Dir1
+---src1
+ Dir2
+---src2
+ Dir3
+---src3 
```

有一个从 Dir2 创建的分支 mybranch，它只包含 src2。我使用以下命令将分支附加到我的 Git SVN：

```
git config --add svn-remote.mybranch.url url/branches/mybranch
git config --add svn-remote.mybranch.fetch :refs/remotes/mybranch
git svn fetch mybranch
git checkout -b local-mybranch -t mybranch 
```

这一切都顺利通过，但结果并不理想。Dir2 成为 root 并与整个 repo 的 root 合并：

```
Root
+ Dir1
+---src1
+ Dir2
+---src2
+ Dir3
+---src3
+ src2 
```

可以看到 src2 目录放在根目录下，而不是放在 Dir2 里面。

我究竟做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T22:47:54.143

我显然完全误解了 SVN 的理念——我期待与 GIT 提供的相同行为。我认为是一个问题，是SVN的正常行为......

# python - Bash 中任何等效的 * 样式，用于作用于不匹配相同模式的多个文件

> ID：10834054
> 
> 赞同：3
> 
> 时间：2012-05-31T12:54:52.013
> 
> 标签：python

我正在寻找在当前工作目录中的所有文件上迭代脚本*而不*迭代脚本（所以任何扩展名`.py`）。我以前用这个

```
for fileName in os.listdir('.'):
    if fileName != 'autocorrelation1.py':
        with open(fileName, "r") as input:

        REST OF SCRIPT HERE 
```

当我在文件夹中只有一个脚本 autocorrelation.py 时，它起作用了，但是现在我有一些 python 脚本，我想知道是否有 bash 样式的等价物`*`，例如

```
for fileName in os.listdir('.'):
    if fileName != *'.py':
        with open(fileName, "r") as input:

        REST OF SCRIPT HERE 
```

我想我很懒，可以在另一行代码中做到这一点，但只是想知道是否有人知道更有趣的方式！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T12:57:02.867

我推荐使用[fnmatch](http://docs.python.org/library/fnmatch.html#module-fnmatch)模块：

```
for fileName in os.listdir('.'):
    if not fnmatch.fnmatch(fileName, '*.py'):
        print fileName 
```

* * *

[glob](http://docs.python.org/library/glob.html)模块可以帮助您找到匹配的文件，如果这是您想要的：

```
for fileName in glob.glob('*.py'):
    print fileName 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T12:56:58.243

在这种特殊情况下，最简单的解决方案是

```
if not file_name.endswith(".py"): 
```

另一种选择是

```
if not fnmatch.fnmatch(file_name, "*.py"): 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T12:57:19.273

使用带通配符的[glob](http://docs.python.org/library/glob.html)来检查文件集（或子集），并[使用 endswith()](http://docs.python.org/library/stdtypes.html?highlight=endswith#str.endswith)来过滤`.py`文件。

例如，

```
import glob

for fn in glob.glob('*'):  # specify set of files to check
   if not fn.endswith('.py'): 
      print(fn) 
```

根据更新/澄清的问题更新代码。

这个[本周 Python 模块](http://www.doughellmann.com/PyMOTW/glob/)有更多使用 glob 的示例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T12:58:17.007

除了 glob 模块，我建议查看这些[generators](http://www.dabeaz.com/generators/)。特别是这个：

```
# genfind.py
#
# A function that generates files that match a given filename pattern

import os
import fnmatch

def gen_find(filepat,top):
    for path, dirlist, filelist in os.walk(top):
        for name in fnmatch.filter(filelist,filepat):
            yield os.path.join(path,name)

# Example use

if __name__ == '__main__':
    lognames = gen_find("access-log*","www")
    for name in lognames:
        print name 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T12:56:43.160

使用`re`模块，你可以在[这里找到](http://docs.python.org/library/re.html)

```
re.search('^.*py$',str(yourFileName)) 
```

这是输出：

```
>>> import re
>>> 
>>> a = re.search('^.*py$','prova')
>>> a
>>> a = re.search('^.*py$','prova.py')
>>> a
<_sre.SRE_Match object at 0x2b09559c1760> 
```

# silverlight - 哪个是跨平台App最好的轻量级运行时编程框架

> ID：10834065
> 
> 赞同：0
> 
> 时间：2012-05-31T12:55:39.253
> 
> 标签：silverlight, cross-platform

我是 silverlight 开发人员，但微软似乎自 2011 年以来已经放弃了 silverlight。我想至少为（windows xp、7、linux、mac os、也许 ios）开发跨平台应用程序我不喜欢 javascript 或 css3 或html5。我想开发应用程序或 ria 网络应用程序。经过一些研究，我认为 Qt 可能是其中一个，但我不确定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T19:16:22.567

考虑使用[GTK#](http://www.mono-project.com/GtkSharp)的 Mono 。它是跨平台的。它是 C#。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:59:03.547

听起来您正在寻找 Adob​​e Flex。[http://www.adobe.com/products/flex.html](http://www.adobe.com/products/flex.html)

# java - 使用整数表示货币

> ID：10834068
> 
> 赞同：0
> 
> 时间：2012-05-31T12:55:50.267
> 
> 标签：java, int, seam, currency

我正在编写一个程序，使用 seam 和一个 SQL 数据库来存储有关员工的信息。有人告诉我将工资以整数形式存储在数据库中。当用户输入工资时，它被存储为一个字符串，当我为员工对象使用一个 setter 时，它把它变成一个 int。我的问题是我不知道如何将它存储回字符串中，并且小数点就位。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:02:49.440

*通常肯定会*起作用的最简单的事情可能是

```
BigDecimal.valueOf(cents).scaleByPowerOfTen(-2).toString(); 
```

（这具有在紧要关头推广到美分`long`或`BigInteger`美分数量的优势。）

另一个肯定会起作用的解决方案，虽然稍微复杂一些，但类似于

```
return Integer.toString(cents / 100)
     + "."
     + new DecimalFormat("00").format(cents % 100); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:03:08.687

你可以使用类似的东西。

```
int priceInCents = ...
String price = String.format("%.2f", priceInCents / 100.0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T12:59:42.970

如果存储为美分数，则将其格式化为 a`float`然后除以 100。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:22:05.087

像这样的东西会是你正在寻找的东西吗？

```
class Currency {
  int cents;

  public Currency(int cents) {
    this.cents = cents;
  }

  public Currency(String cents) {
    this(Integer.parseInt(cents));
  }

  public int getCents(){
    return cents;
  }

  public double getValue(){
    return cents/100.0d;
  }

  private static final DecimalFormat o = new DecimalFormat("0");
  private static final DecimalFormat oo = new DecimalFormat("00");

  @Override
  public String toString() {
    return o.format(cents / 100) + "." + oo.format(cents % 100);
  }
} 
```

# jquery - jquery mask clean values on invalid

> ID：10834069
> 
> 赞同：1
> 
> 时间：2012-05-31T12:55:58.857
> 
> 标签：jquery, html, validation, mask, jquery-mask

如何让 jQuery 在带有掩码的字段中接受错误的值。

对于下面的代码：

```
$("#element").mask("999.999.999-99"); 
```

如果我将值 444.444.44 放在该字段上，则焦点将被清除。

有没有办法不改变这个值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:22:45.737

我找到了答案！

只需添加“？” 面具前：

```
$('#element').mask('?999.999.999-99'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-10T21:20:35.483

解决此问题的最佳方法是使用 autoclear 选项：

```
$("#element").mask("999.999.999-99", {autoclear: false}); 
```

# ios - Corona SDK 和 Evernote

> ID：10834074
> 
> 赞同：0
> 
> 时间：2012-05-31T12:56:37.973
> 
> 标签：ios, coronasdk, evernote

使用 Corona SDK 访问 Evernote API 的最佳方法是什么。我刚开始使用 Corona（我是 Lua 菜鸟），但 Evernote 还没有适用于这个平台的 sdk ......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-26T19:08:07.907

使用免费的原生开发选项来开发你的 iOS 原生插件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-20T23:16:03.660

除非 Corona 正式支持这一点，否则我认为这是不可能的。

# php - PHP正则表达式问题

> ID：10834082
> 
> 赞同：2
> 
> 时间：2012-05-31T12:56:59.580
> 
> 标签：php, regex

我试图在以下文本中获取包含链接的句子：

```
<p> Referencement PG1 est spécialiste en référencement depuis 2004\. Une recherche sur <a rev="help" dir="rtl" href="http://www.referencement-site-pro.com Mot Clé</a>, aidera de nous trouver. Fascinez le regard avec le film vidéo. Vous demeurerez persistant sur les plateformes Youtube, Dailymotion ... Les images Video apparaissant dans les index de Google appâteront les surfeurs. <img style="padding:5px;float:left" src="http://thumbs.virtual-tour.tv/referencementpage1.jpg Par le appel à la Vidéo, faites-vous connaître. </p> 
```

这意味着这句话：

```
Une recherche sur <a rev="help" dir="rtl" href="http://www.referencement-site-pro.com Mot Clé</a>, aidera de nous trouver. 
```

我使用这个正则表达式：

```
([A-Z][^<]*)<a[^>]*>([^<]*)</a>([^\.!\?]*) 
```

我找不到你为什么它不工作，它给了我一个我需要的 previsou 句子：

```
Referencement PG1 est spécialiste en référencement depuis 2004\. Une recherche sur <a rev="help" dir="rtl" href="http://www.referencement-site-pro.com Mot Clé</a>, aidera de nous trouver. 
```

我错过了什么？谢谢你的帮助=D

编辑（一些代码）：

```
preg_match_all('#([A-Z][^<\.!\?]*)<a[^>]*>([^<]*)</a>(.*[^\.!\?]*)#U', $spinnedText, $matches);
echo "<pre>";
print_r($matches);
echo "</pre>";
foreach($matches[1] as $key=>$value){
//$spinnedText = str_replace($matches[0][$key], "<a {title=\"".$this->url."\"|} {rev=\"{index|help|bookmark|friend}\"|} {dir=\"rtl\"|}{rel=\"{friend|bookmark|help|}\"|} href=\"".$this->url."\">".trim($value)."</a>", $spinnedText);
$spinnedText = str_replace($matches[0][$key], "<a {title=\"".$this->url."\"|} {rev=\"{index|help|bookmark|friend}\"|} {dir=\"rtl\"|}{rel=\"{friend|bookmark|help|}\"|} href=\"".$this->url."\">".$matches[1][$key].$matches[2][$key].$matches[3][$key]."</a>", $spinnedText);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:14:12.747

您的正则表达式仍然与第一句匹配，因为它以大写字母开头。您需要从`\.`or `(?:^|[\.!?])`or 开始，但这对您来说可能是个问题，因为第一句话在某些情况下也可能有效。这些链接是否可以包含多个句子？重要的问题是什么定义了一个句子。

`p>`除了 a 之后的第一句和字符串开头的句子之外，这将适用于您所拥有的内容：

```
preg_match('/
   (?:           # match, but do not capture any of
   ^             # the start of the string
   |p>\s*        # or an opening or closing p tag followed by any number of spaces
   |[\.!?] )     # or sentence punctuation followed by a space
   (             # capture
   [A-Z]         # a capital letter
   .*?           # followed by any characters until
   <\/a>         # a closing anchor tag
   .*?           # followed by any characters until
   [.?!])        # closing punctuation
/x', $item, $matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:21:41.783

您可能希望改为查看 DOM Parser：

例如：[http ://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

他们网站上的例子：

```
// Create DOM from URL or file
$html = file_get_html('http://www.google.com/');

// Find all images
foreach($html->find('img') as $element)
    echo $element->src . '<br>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:09:41.903

这称为“贪婪匹配”。这意味着正则表达式引擎通常匹配正则表达式有效的所有字符。在您的示例中，您必须限制正则表达式的 START 以便它不会贪婪地匹配不同的句子。

尝试这个：

```
[^.!?]*<\s*a[^>]+>([^<]*)</a>[^.?!]*[.?!] 
```

它应该匹配整个句子，仅此而已。

希望这可以帮助。

# ruby-on-rails-3 - Rails 将新记录插入数组

> ID：10834083
> 
> 赞同：0
> 
> 时间：2012-05-31T12:56:59.990
> 
> 标签：ruby-on-rails-3

我在控制器中有 ID 和名称的表修复：

```
@Repairs = Repair.all 
```

如何在所有不在数据库中的记录之前在@Repairs 数组中添加新的 id=0，name="new_name" 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:42:29.993

```
@repairs = Repair.all
@new_repire = Repair.new(:name => "new_name, :other_parameter => "something)
@new_repire.id = 0
@Repairs.unshitf @new_repire 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:22:54.070

尝试

```
@repair = Repair.new(:id => 0, :name => "new_name, :other_parameter => "something) 
```

保存之前真的需要 id 吗？通常最好让 Rails 来处理。

# mongodb - 查询组合键分片 Mongo

> ID：10834089
> 
> 赞同：0
> 
> 时间：2012-05-31T12:57:18.570
> 
> 标签：mongodb, sharding, composite-key

我为 mongo 集合创建了一个复合分片键：{catalog_id:1,category_id:1}

现在，如果我仅通过保证唯一的 catalog_id 查询集合，查询会转到所有分片吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:20:33.940

通常，查询将转到包含该查询相关块范围的任何分片。在您的情况下，如果确实保证 catalog_id 是唯一的，那么对于相同的 catalog_id 范围，您将不会有多个块（例如，您不会有一个范围为 {catalog_id : 12, category : "a"} 的块到 {catalog_id : 12, category : "m"} 和另一个范围为 {catalog_id : 12, category : "n"} 到 {catalog_id : 12, category : "z"} 的块，因为你只能有一个文档使用 {catalog_id : 12}，并且块范围是根据现有文档创建的）。

因此，在您的情况下，查询应该转到单个分片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:29:48.470

在 mongo db 中，如果您有多个字段的复合索引，则可以使用它来查询字段的开始子集。所以如果你有一个索引

```
a,b,c 
```

你可以用它查询

```
a
a,b
a,b,c 
```

不确定 shardng 是否以同样的方式工作。

# c# - C#调用事件处理程序动态

> ID：10834094
> 
> 赞同：2
> 
> 时间：2012-05-31T12:57:40.390
> 
> 标签：c#, asp.net

我正在尝试使用序列化字典（controlId - 字符串，controlValue - 字符串）保存一个 WebForm 中的所有控件。接下来我想反序列化该字典并用它们的值动态填充控件。

问题是我的一些控件具有 AutoPostBack true 和事件处理程序。**有没有办法动态调用这些事件处理程序？**我想通过控件的 id 避免另一个开关。

前任：

```
foreach (KeyValuePair<string, string> kvp in dict)
{
    Control c = findControlRecursive(Page, kvp.Key);
    if (c != null)
    {
        switch (c.GetType().Name)
        {
            case "TextBox":
                ((TextBox)c).Text = kvp.Value;
                if (((TextBox)c).AutoPostBack) ....... 
```

编辑：

假设我有 10 种不同的形式。每个都有大约 50 个控件。我想添加/编辑一组数据。我尽量避免在数据库中使用每个控件的列，这就是我想使用序列化的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:04:14.180

从我的角度来看，您正在尝试重新发明轮子。ASP.NET 提供了 WebUserControl 类，它可以在不同的页面上使用，并作为一组控件的容器。您可以为这些控件定义事件处理程序，无论您在哪个页面上使用它们，它们都会被适当地调用。

因此，我建议您使用基于 WebUserControl 的方法，而无需序列化/反序列化控件。这是一个简单有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T06:02:16.003

后来我找到了……我在找：

if (((TextBox)c).AutoPostBack) **(c as IPostBackDataHandler).RaisePostDataChangedEvent();**

# confluence - Webwork action vs. servlet 和其他插件管理 ui 问题

> ID：10834096
> 
> 赞同：2
> 
> 时间：2012-05-31T12:57:42.980
> 
> 标签：confluence

我正在尝试向我的插件添加配置，但我对我的选项感到很困惑。谁能给我一个 webwork 操作与 servlet 的比较，尤其是在配置 UI 方面。

到目前为止，我的背景是我已经完成了[本教程](https://developer.atlassian.com/display/CONFDEV/Plugin+tutorial+-+Writing+an+Admin+Configuration+Screen)。之后我发现我安装的所有插件都使用了动作，并且查看了一些现有的代码，我发现动作似乎更易于实现和使用（无需实现 JavaScript/REST 接口）。

我很困惑为什么本教程似乎使事情过于复杂，实际上并没有提到做同样事情的更简单的方法。任何人？

最重要的是，我已经看到了至少三种不同的保存设置的方法：使用`PluginSettingsFactory`、`BandanaManager`或`ConfigurationManager`. 更混乱！如今，在融合中保存设置的“现代”方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T11:30:11.847

## Webwork Action 与 Servlet

*   Webwork Action 的优点是您可以使用与 webwork 融合在一起的内置速度模板机制以及 webwork 本身的所有优点。
*   这两种变体都具有通过在 spring webframework 中内置的 confluence 进行依赖注入的优势。
*   使用 servlet 而不是 webwork 操作可以让您独立于所有 atlassian 平台软件，因为并非所有 atlassian 产品都使用 webwork。
*   atlassian-plugin.xml 中的插件描述符允许插件配置页面的两种方法：

* * *

```
<atlassian-plugin key="${project.groupId}.${project.artifactId}" name="${project.name}" plugins-version="2"> 
    <plugin-info>
        <description>${project.description}</description> 
        <version>${project.version}</version>
        <vendor name="${project.organization.name}" url="${project.organization.url}"/>  
        <param name="plugin-icon">images/pluginIcon.png</param>  
        <param name="plugin-logo">images/pluginLogo.png</param>  
        <param name="configure.url">/admin/plugins/PATHTOYOURCONFIGPAGE</param>  
    </plugin-info>  
    ...  
</atlassian-plugin> 
```

## 存储插件设置

如果您查看[PluginSettingsFactory 接口](https://developer.atlassian.com/static/javadoc/sal/2.0/reference/com/atlassian/sal/api/pluginsettings/PluginSettingsFactory.html)和实现该接口的所有已知类的列表，您会发现 ConfluencePluginSettingsFactory。声明了一个`public void setBandanaManager (BandanaManager bandanaManager)`方法。这是 BandanaManager 的依赖注入。这表明[PluginSettingsFactory 接口](https://developer.atlassian.com/static/javadoc/sal/2.0/reference/com/atlassian/sal/api/pluginsettings/PluginSettingsFactory.html)的实现使用 BandanaManager 进行属性持久化。

我个人不知道*ConfigurationManager*的事情。我为我所有的 confluence 插件使用 BandanaManager 来存储可以通过管理设置页面或其他地方设置的属性。

在这里查看最先进的数据持久化方法，如 atlassian 所述：[Persistence in Confluence](https://developer.atlassian.com/display/CONFDEV/Persistence+in+Confluence)。他们也使用 BandanaManager。

# java - 运行单元测试时读取一组不同属性的正确方法是什么

> ID：10834098
> 
> 赞同：3
> 
> 时间：2012-05-31T12:57:44.937
> 
> 标签：java, tdd

我想将某些类（FactoryProviders）配置为在单元测试中使用时表现不同。

```
public class ConnectionFactoryProvider {

    public static IConnectionFactory getConnectionFactory() {
        //return MockConnectionFactory if running in test mode and
        //DefaultConnectionFactory is running in production mode
    }

} 
```

我需要根据代码是在测试模式（单元测试）还是生产模式下运行来返回不同的 ConnectionFactory。

实现这一目标的正确方法是什么？我想到了一些可能的解决方案……但其中有一个是广为流传的成语吗？

*   通过 JVM 参数设置系统属性，以便在生产和测试模式下运行时值会有所不同。
*   将工厂的完全限定名称保存在属性文件中，并确保在测试模式下运行时文件系统上有不同的属性文件可用。这在 Maven 中很容易做到，因为我们可以在测试阶段运行时控制类路径顺序，但我不确定在 Eclipse 中运行单元测试时是否可以实现。
*   在测试设置方法中配置 ConnectionFactoryProvider 使其返回 MockConnectionFactory

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:04:38.760

依赖注入（DI）。您的 ConnectFactories 是依赖项。DI 将允许您发送 ConnectionFactory 的实例作为构造函数参数。这样，单元测试将发送一个 MockConnectionFactory 实例，而实时代码将发送一个 DefaultConnectionFactory 实例。

```
public class ConnectionFactoryProvider {
    public static IConnectionFactory getConnectionFactory(IConnectionFactory connectionFactory) {
    //use the connectionFactory
    }
}

//unit test
ConnectionFactoryProvider cfp = new ConnectionFactoryProvider(aMockConnectionFactoryInstance);

//live code
ConnectionFactoryProvider cfp = new ConnectionFactoryProvider(aDefaultConnectionFactoryInstance); 
```

希望有帮助。

PS 我是一名 C# 开发人员，但我认为 Java 中的语法对你来说或多或少是相同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:58:52.633

我在代码应用程序中使用以下两种方法：

1.  读取可以包含符号名称的系统属性。在生产中，使用默认值。符号名称映射到解释名称含义的配置文件。

    这样，您可以拥有任意数量的配置文件，您可以在运行时添加配置（无需更改代码即可在生产环境中启用更多日志记录以跟踪错误）。

    示例：系统属性的名称是`db.config`。符号名称是`h2`, `it`, `prod`（默认）。配置文件在`${configPath}/db-${db.config}.xml`

2.  根据属性读取配置`user.name`。这使您可以轻松地为每个开发人员提供自己的配置。如果没有具有该名称的配置文件，则读取默认配置（或始终读取默认配置，然后与可选的每个用户配置合并）

# prototypejs - 使用 PrototypeJS 检查 div 的内容

> ID：10834099
> 
> 赞同：0
> 
> 时间：2012-05-31T12:57:48.187
> 
> 标签：prototypejs

我使用 PrototypeJS，我需要检查 a 的内容是否`div`为空。但是下面的代码给出了一个错误。`div`最初不存在。它是通过 AJAX 函数添加的。我怎样才能检查它？

```
if($('lesson-'+tab).innerHTML() == null)
  {
     //do the job
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:59:56.603

您需要等到 Ajax 调用之后检查该 DIV 的内容：

```
new Ajax.Request(url, {
  method: 'get',
  onSuccess: function(transport) {
    if($('lesson-'+tab).innerHTML() == null)
    {
     //do the job
    }
  }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:11:37.867

`innerHTML`是 HTMLElement 的字符串属性，而不是 a`function`所以调用它时会出错。因为它是一个字符串，所以您不检查 null 而是检查字符串是否为空。此外，您可能需要检查该元素是否存在，以防止`$`函数结果为`null`. 而且，正如 John Conde 已经提到的，您需要在 AJAX 调用完成后进行检查：

```
new Ajax.Request(url, {
  onComplete: function(transport) {
    var lessonTab = $('lesson-' + tab)
    if (!lessonTab || lessonTab.innerHTML.length === 0) {
      // do stuff
    }
  }
}) 
```

# code-first - EF Code First 是否支持查询多个数据库？

> ID：10834100
> 
> 赞同：1
> 
> 时间：2012-05-31T12:57:50.193
> 
> 标签：code-first, multiple-databases

我们第一次在我们的组织中使用 Entity Framework Code First。我们的查询之一必须跨越两个数据库。这是一个 SQL 查询：

SELECT t1.col, t2.col FROM DB1..table1 t1 INNER JOIN DB2..table2 t2 ON t1.key = t2.key

从我所有的搜索来看，我不相信 Code First 可以支持这个查询。我读过的两种解决方法是在 DB1 中创建一个读取 DB2.table2 的视图，然后只对 DB1 执行所有查询。另一种选择是对 DB1 和 DB2 进行单独读取，然后在代码中合并数据。

我们担心设置一堆视图，因为它只会使数据库变得混乱，并且我们担心合并数据时的性能。

是否可以通过 Code First 支持上述查询？

谢谢大家。

-特洛伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T20:57:14.420

[从](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/a5e1e545-163d-4c97-aaab-a5f9ce6f58f7/ "从") [我](https://stackoverflow.com/questions/5558309/entity-framework-inserting-entity-with-multiple-models-and-databases/5598664#5598664 "I")[读过的](https://stackoverflow.com/questions/2659942/entity-framework-4-and-multiple-database "have")[所有](http://rachel53461.wordpress.com/2011/05/22/tricking-ef-to-span-multiple-databases/%20%22all) [内容](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/1052345-support-for-multiple-databases "read")来看，答案是“不”，它不支持它（现在？）。除了视图之外，解决这个问题的一种方法是使用指向另一个数据库/模式/表的同义词，它有自己的警告。

创建同义词 (Transact-SQL)

[http://msdn.microsoft.com/en-us/library/ms177544.aspx](http://msdn.microsoft.com/en-us/library/ms177544.aspx)

然后创建您的模型以指向同义词（首先使用数据库时，我必须从“假”表创建模型，或者您可以使用脚本来合并 EDMX xml）和 JOIN、INSERT、UPDATE 等应该都可以工作（如以及在 EF 中）。希望这会有所帮助。可能还有其他选择，但我自己仍在寻找它们。

# performance - 诊断两个 Web 服务器之间的慢速页面“等待时间”

> ID：10834103
> 
> 赞同：3
> 
> 时间：2012-05-31T12:57:54.207
> 
> 标签：performance, optimization, webserver, developer-tools, page-load-time

我们刚刚安装/配置了一个新的 Web 服务器来替换我们过时的服务器。让我们称旧服务器“server1”+新服务器“server2”。它们都运行相同的网站，使用相同的代码，但旧服务器提供网页的速度仍然比新服务器快得多。首先，这是有关服务器规格的更多详细信息：

**服务器 1 配置：**

> Linux server1 2.6.32-25-generic-pae #45-Ubuntu SMP Sat Oct 16 21:01:33 UTC 2010 i686 GNU/Linux
> 
> 内存总量：6180036 kB
> 
> 8 核 Intel(R) Xeon(R) CPU E5620 @ 2.40GHz
> 
> 服务器版本：Apache/2.2.14 (Ubuntu)

**服务器 2 配置：**

> Linux server2 3.2.0-23-generic #36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux
> 
> 内存总量：24682544 kB
> 
> 16 核 Intel(R) Xeon(R) CPU E5620 @ 2.40GHz
> 
> 服务器版本：Apache/2.2.22 (Ubuntu)

主要区别在于 server2 具有 64 位操作系统架构，并且还具有更多的 RAM 和 CPU 能力。

我不了解你，但我希望 server2 能够击败 server1。但是，在提供网页时情况并非如此。

两个服务器页面加载的开发人员工具输出：

![服务器1](../Images/79a3e872e2cfed5e29b49b6e33c50ee0.png) 等待时间：314ms

![服务器2](../Images/e7695f4ffe3aab300663d1ec2582404f.png) 等待时间：5.45s

如您所见，两台机器发出完全相同的文件请求，但 server1 仍然占主导地位。

我已经尝试调查可能影响“等待时间”的几个因素，但我很难缩小花费时间的范围。我查看了 Apache2 配置，两台机器上都应用了完全相同的指令和模块扩展... 区分代码并验证它是相同的...网络/ping/nslookup 时间几乎相同。

谁能解释一下“等待时间”是如何计算的，以及可以用来缩小问题范围的任何做法？

非常感谢， **ns**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:00:23.557

是的，我最终确实找到了它的底部。尽管您的问题的解决方案可能与我的非常不同。“等待时间”是一个相当广泛的术语，可以与在服务器端执行的任何事情相关。

在我的例子中，我不得不以一种相当痛苦的方式手动调试代码，通过`microtime()`在代码周围打印大量语句来找出时间丢失的地方。

事实证明，有一些遗留代码有一个`exec`to `/sbin/route`。

在最初的 32 位系统上，这完全可以立即执行，但在 64 位机器上，它需要超过 5 秒：

```
$ time /sbin/route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         10.10.10.1       0.0.0.0         UG    100    0        0 eth0

real    0m5.007s
user    0m0.000s
sys     0m0.004s 
```

不确定 /sbin/route 是否通常在 64 位机器上执行较慢（如果是这样，很高兴知道原因），或者是否应该归咎于较新的操作系统版本。

# java - Java - 从图像周围的边框创建形状

> ID：10834109
> 
> 赞同：3
> 
> 时间：2012-05-31T12:58:20.160
> 
> 标签：java, image, border, awt, shape

我有一个从 png 图像中绘制形状的类，这样我就可以使用该形状来绘制我的项目所需的自定义按钮的边框。这是该类绘制图像形状的代码：

```
public class CreateShapeClass {
    public static Area createArea(BufferedImage image, int maxTransparency) {
        Area area = new Area();
        Rectangle rectangle = new Rectangle();
        for (int x = 0; x < image.getWidth(); x++) {
            for (int y = 0; y < image.getHeight(); y++) {
                int rgb = image.getRGB(x, y);
                rgb = rgb >>> 24;
                if (rgb >= maxTransparency) {
                    rectangle.setBounds(x, y, 1, 1);
                    area.add(new Area(rectangle));
                }
            }
        }
        return area;
    }
} 
```

但是，这需要很长时间来处理，我认为通过在我的主应用程序中预先绘制形状，然后将它们存储到数组中并传递给其他类，可以减少渲染时间。但是，paintBorder() 方法绘制按钮边框所花费的时间也需要相当长的时间（虽然比绘制形状所需的时间短），因为上面的类生成的形状是填充的，而不是空的。我尝试使用 java2d 绘制形状，例如 Ellipse2D，并且按钮的呈现只需要很短的时间。在这个领域有经验的任何人都可以教我如何生成作为 BufferedImage 边界的形状？我使用上面的类从具有透明背景的 PNG 图像创建形状。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T11:02:59.437

有关提示，请查看[平滑锯齿状](https://stackoverflow.com/questions/7218309/smoothing-a-jagged-path)路径。在最终版本中，获得（粗）轮廓的算法相对较快。创建 a`GeneralPath`比附加`Area`对象快得惊人。

重要的部分是这个方法：

```
public Area getOutline(Color target, BufferedImage bi) {
    // construct the GeneralPath
    GeneralPath gp = new GeneralPath();

    boolean cont = false;
    int targetRGB = target.getRGB();
    for (int xx=0; xx<bi.getWidth(); xx++) {
        for (int yy=0; yy<bi.getHeight(); yy++) {
            if (bi.getRGB(xx,yy)==targetRGB) {
                if (cont) {
                    gp.lineTo(xx,yy);
                    gp.lineTo(xx,yy+1);
                    gp.lineTo(xx+1,yy+1);
                    gp.lineTo(xx+1,yy);
                    gp.lineTo(xx,yy);
                } else {
                    gp.moveTo(xx,yy);
                }
                cont = true;
            } else {
                cont = false;
            }
        }
        cont = false;
    }
    gp.closePath();

    // construct the Area from the GP & return it
    return new Area(gp);
} 
```

# gradle - 本地文件系统上的 Gradle 存储

> ID：10834111
> 
> 赞同：295
> 
> 时间：2012-05-31T12:58:34.230
> 
> 标签：gradle

Gradle 如何将下载的 jar 文件存储在本地文件系统中？Maven 将它们存储在`.m2`目录下`USER_HOME`，但 Gradle 将它们存储在哪里？我检查了`.gradle`那里的文件夹，但只看到编译的脚本。

* * *

## 回答 #1

> 赞同：358
> 
> 时间：2015-10-18T09:42:14.120

在 Mac、Linux 和 Windows 上，即在所有 3 个主要平台上，Gradle 将依赖项存储在：

```
~/.gradle/caches/modules-2/files-2.1 
```

* * *

## 回答 #2

> 赞同：247
> 
> 时间：2012-05-31T13:25:19.733

Gradle 在`USER_HOME/.gradle`文件夹中缓存工件。编译后的脚本通常位于`.gradle`项目文件夹中的文件夹中。

如果找不到缓存，可能是因为您还没有缓存任何工件。您始终可以通过一个简单的脚本查看 Gradle 缓存工件的位置：

```
apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
    compile 'com.google.guava:guava:12.0'
}

task showMeCache doLast() {
    configurations.compileClasspath.each { println it }
} 
```

现在，如果您运行`gradle showMeCache`它，它应该将依赖项下载到缓存中并打印完整路径。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2017-11-17T06:32:55.307

在 Windows 10 PC 中，它保存在：

```
C:\Users\%USERNAME%\.gradle\caches\modules-2\files-2.1\ 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-07-05T13:09:29.217

Gradle 的本地存储库文件夹是：

*   $USER_HOME/.gradle/caches/modules-2/files-2.1

定义的依赖项将从远程存储库加载到 gradle 的本地存储库文件夹中。对于每个加载的文件，gradle 将创建一个以原始文件 (pom,jar,..) 的 md5 值命名的新文件夹。依赖文件的完整路径由：

*   groupid + artifactid + 版本 + **FILE_MD5_VALUE** + FILE_NAME

如果我们定义的依赖是：

*   编译'org.springframework:spring-jdbc:4.3.4.RELEASE'

然后库将被加载到：

*   /$USER_HOME/.gradle/caches/modules-2/files-2.1/org.springframework/spring-jdbc/4.3.4.RELEASE/ **42175d194cf6aa7c716c0887f30255e5c0a5262c** /spring-jdbc-4.3.4.RELEASE.jar

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2018-11-21T10:58:27.107

实际上缓存位置取决于`GRADLE_USER_HOME`环境变量值。默认情况下，它`$USER_HOME/.gradle`基于 Unix-OS 和`%userprofile%.\gradle`Windows。
但是，如果您设置此变量，缓存目录将位于此路径中。

无论如何，您都应该深入`caches\modules-2\files-2.1`研究以找到依赖项。

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2015-05-24T06:21:46.727

如果您希望您的依赖文件位于某个特定文件夹中，您可以简单地使用一个`copy`任务。例如。

```
task copyDepJars(type: Copy) {
  from configurations.compile
  into 'C:\\Users\\athakur\\Desktop\\lib'
} 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2015-06-15T18:36:02.100

我在窗户上，

您应该能够找到里面的依赖项

$USER_HOME.gradle\caches\artifacts-24\filestore

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2019-09-09T15:33:43.803

很多答案都是正确的！我想补充一点，您可以通过以下方式轻松找到下载位置

```
gradle --info build 
```

如[https://stackoverflow.com/a/54000767/4471199](https://stackoverflow.com/a/54000767/4471199)中所述。

新下载的工件将显示在标准输出中：

```
Downloading https://plugins.gradle.org/m2/org/springframework/boot/spring-boot-parent/2.1.7.RELEASE/spring-boot-parent-2.1.7.RELEASE.pom to /tmp/gradle_download551283009937119777bin 
```

在这种情况下，我使用了 docker image `gradle:5.6.2-jdk12`。如您所见，docker 容器`/tmp`用作下载位置。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-04-24T15:21:48.497

您可以使用 gradle 参数`--project-cache-dir "/Users/whatever/.gradle/"`来强制使用 gradle 缓存目录。

通过这种方式，您可以确定您知道正在使用哪个目录（以及为不同的项目创建不同的缓存）

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-10-30T17:48:47.487

我只是在寻找这个答案时偶然发现了这个。如果您使用的是 intellij，则可以导航到文件位置，但在项目资源管理器中打开外部 lib 文件夹，右键单击 jar，然后选择 Open Library Settings。[![在此处输入图像描述](../Images/7fceead45b3d574774a97cd7ed3c0a1c.png)](https://i.stack.imgur.com/IDdps.jpg)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-05-04T06:51:27.220

如果它是一个 Android gradle 项目 - 您可以在 $ANDROID_HOME/extras/android/m2repository 文件夹下找到 android 库

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-06-12T06:59:41.483

在我的安装了“Buildship 2.0.2”插件的 Windows 机器上，依赖项被存储：

$USER_HOME.gradle\caches\modules-2\files-2.1

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-08-11T19:14:27.263

我花了一段时间才意识到这一点，因此有了额外的答案。希望它可以节省人们的时间。请注意，如果您正在运行`sudo gradle`依赖项，则可能不在您的主目录中，即使`sudo echo $HOME`返回`/Users/<my-non-root-user>/`. 在我的 Mac 上，Gradle 将依赖项缓存在`/private/var/root/.gradle/caches/`.

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-05-04T09:57:16.940

在 android studio 中执行以下步骤来检查 gradle 下载的 jar 文件。

1.  将项目结构视图设置为“项目”
2.  在底部可用的外部库部分，展开它。
3.  在这里你可以看到下载的 jar 文件。 [![在此处输入图像描述](../Images/92034dbf724c41a7ae2bbf3a1e39344f.png)](https://i.stack.imgur.com/8NxfB.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-08-11T18:50:57.733

就我而言，我使用的是 Ivy 存储库，我的 Gradle 依赖项存储在`~/.ivy2/`.

# javascript - javascript退出函数

> ID：10834113
> 
> 赞同：0
> 
> 时间：2012-05-31T12:58:35.913
> 
> 标签：javascript

我有一个看起来像这样的函数：

```
function MyFunction() {

  //do some work

  if (SomeCondition === true) {
     //do some work
     FunctionToCall();
  }
  //do some more work
}

function FunctionToCall() {...} 
```

如果我调用 FunctionToCall()，我不想继续使用`do some more work`. 我需要在语句之后放置一个 return true 或 return false`FunctionToCall();`语句吗？它似乎适用于两者。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:00:56.777

正如您所说，您需要`return`在调用`FunctionToCall`. 听上去，你返回什么并不重要（这将返回`undefined`）：

```
if (SomeCondition === true) {
    //do some work
    FunctionToCall();
    return;
} 
```

如果您确实关心 的结果`FunctionToCall`，则可以返回从中返回的值：

```
return FunctionToCall(); 
```

或者，您可以使用`else`, 而不用打扰`return`语句（这也会返回`undefined`）：

```
if (SomeCondition === true) {
    //do some work
    FunctionToCall();
}
else {
    //do some more work
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T13:01:24.223

你可以只做 a `return;`，因为你忽略了函数的返回值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:01:17.493

是的，您必须在像这样调用下一个函数之后或之前放置一个 return 语句

```
return FunctionToCall(); 
```

或者

```
FunctionToCall();
return; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:01:58.980

如果您总是`MyFunction()`在`void`-context 中使用，请使用`return;`

如果`FunctionToCall()`也可以在不同的上下文中调用，我更喜欢放在`return true/false`下一行。

# jquery - 带有动画和显示/隐藏的 Chrome 和 Safari JQuery 错误

> ID：10834114
> 
> 赞同：0
> 
> 时间：2012-05-31T12:58:51.567
> 
> 标签：jquery, google-chrome, safari, jquery-animate, show

我有一个在 FF 和 IE 中运行良好的侧边栏滑块。点击 div，侧边栏滑出；再次单击它会向后滑动。然而，在 Chrome 和 Safari 中，它第一次工作正常（动画宽度向外和动画宽度向后），但第二次，应该滑出的 div 部分出现在要单击的 div 下方。

我已经创建了一个非常简单的问题示例。这是javascript：

```
var slider_state = 'hidden';

function reveal_slider()
{
$('#reveal_div').animate({width:500});
slider_state = 'shown';
}

function hide_slider ()
{
slider_state = 'hidden';
$('#reveal_div').animate({width:0}, function(){
    $('#reveal_div').hide();
    });
}

$(document).ready(function(){
$('#slider_trigger').click(function(){
    if (slider_state == 'hidden')
        {
        reveal_slider();
        }  
        else
        {
        hide_slider();
        }
    });
}); 
```

和CSS：

```
#slider_container
        {
        position:fixed;
        top:350px;
        right:0px;
        z-index:21;
        }
    #slider_trigger
        {
        float:left;
        width:35px;
        height:100px;
        background-color:yellow;
        }
    #reveal_div
        {
        float:left;
        height:200px;
        display:none;
        background-color:blue;
        border:3px black solid;
        } 
```

和html：

```
<body>
<div id='slider_container'>
    <div id='slider_trigger'>
        Click
    </div>  
    <div id='reveal_div' >
    </div>
</div>
</body> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:43:30.133

感谢观看。看起来 MobyD 的建议（在评论中）是关键，即在为其宽度设置动画之前，在要显示的 div 上使用 toggle() 或至少 show()。感谢帮助。

# javascript - 拆分不起作用

> ID：10834115
> 
> 赞同：0
> 
> 时间：2012-05-31T12:58:51.853
> 
> 标签：javascript, jquery

如何拆分十进制数？变量`bidnumber`是`10.70`。

```
var bidnumber = $(this).parent('div').siblings('.advert-details').find('tr:eq(3)').find('.advert-details-col-2').attr('data-bid');
bidnumber.toString().split('.');
var first = bidnumber[0];
var second = bidnumber[1];
alert(bidnumber[0]);
second.substr(0, 1);
var finalnumber = first + '.' + second; 
```

当我提醒`bid[0]`时，它应该提醒`10`..而不是`1`提醒。我不明白我哪里出错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-31T13:01:05.007

`split`您忘记从函数返回数组：

```
bidnumber = bidnumber.toString().split('.'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:06:50.510

*   属性值已经是字符串，因此您不必将其转换为字符串。
*   该`split`方法不会将数组放回变量中。
*   该`substr`方法不会将新字符串放回变量中。

所以：

```
bidnumber = bidnumber.split('.');
var first = bidnumber[0];
var second = bidnumber[1];
second = second.substr(0, 1);
var finalnumber = first + '.' + second; 
```

要不就：

```
bidnumber = bidnumber.split('.');
bidnumber[1] = bidnumber[1].substr(0, 1);
var finalnumber = bidnumber.join('.'); 
```

还考虑将字符串解析为数字并将其四舍五入：

```
var finalnumber = Math.round(parseFloat(bidnumber) * 10) / 10; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:07:28.270

您不应该使用`split`来分隔数字的整数部分和小数部分。

例如，`10.70`当 split （并将 70 转换为 cents）时，`10.7` *即使它们是**相同**的number*也会给出不同的答案。

```
var bidnumber = 10.70;     // ignoring your DOM query for now

var whole = ~~bidnumber;   // quick and nasty 'truncate' operator
var cents = 100 * Math.abs(bidnumber - whole); 
```

最后一行确保即使原始数字是负数，美分数也是正数。

`~~`运算符实际上是运算符的两个实例，`~`它是按位“非”运算符，它将任何数字截断为 32 位有符号值，丢弃任何小数部分。翻转两次给出原始数字，但没有分数。

这是获得“向零舍入”结果的最简单方法，`Math.floor()`实际上可以`-11`输入`-10.70`

# windows-7-x64 - 无法从 Windows 中的 CMD 访问 Postgresql

> ID：10834117
> 
> 赞同：0
> 
> 时间：2012-05-31T12:58:58.573
> 
> 标签：windows-7-x64, postgresql-8.4

我在 Windows 7 中安装了 OpenGeo Suite 2.4.5。我想从 cmd 访问 postgresql，但是当我尝试访问它时，我收到了这个错误：

```
 psql: could not connect to server: Connection refused (0x0000274D/10061)
         Is the server running on host "???" and accepting
         TCP/IP connections on port 5432?
    could not connect to server: Connection refused (0x0000274D/10061)
        Is the server running on host "???" and accepting
        TCP/IP connections on port 5432? 
```

当我尝试通过 QGIS 连接时，即使我遇到同样的错误。我认为 postgresql 服务未列出，这就是我无法访问或连接它的原因。有人可以指导我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T06:12:45.817

终于..找到了答案。.. 在 CMD 上运行： `c:\ psql -p 54321 -U postgres` 并且类似地.. 将端口号更改为`54321`QGIS 以访问它。

# grails - Grails GORM 集合

> ID：10834122
> 
> 赞同：0
> 
> 时间：2012-05-31T12:59:09.633
> 
> 标签：grails, collections, grails-orm

假设我必须使用 Grails 域类：Car 和 Person。

```
class Car {
    String model
    ...
    Person driver
}

class Person {
    String firstName
    String lastName
} 
```

我有一组人：

```
Set < Person > 
```

如何获取具有该集中驱动程序的所有 Car 实例的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:06:49.683

所以我假设你有一组像这样的人对象：

```
def people = [person1, person2, person3] 
```

并且您要检索具有以下 3 个驱动程序之一的所有汽车：

```
def cars = Car.findAllByDriverInList(people) 
```

只要人员列表中的对象是 Person 域的实例，您就可以使用了。

# javascript - PhoneGap - 请告知为什么保存功能不起作用

> ID：10834124
> 
> 赞同：0
> 
> 时间：2012-05-31T12:59:26.423
> 
> 标签：javascript, jquery-mobile, cordova

我用VS2010写了一个phonegap小例子但是我不知道为什么我不能使用window.locaStorage来存储和检索简单的值

请检查并让我知道出了什么问题

```
 <!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>

    <title>Cordova WP7</title>

      <link rel="stylesheet" href="jquery.mobile-1.1.0.css" type="text/css"/>
      <script src="jquery-1.7.2.js" type="text/javascript"></script>

      <script src="jquery.mobile-1.1.0.js" type="text/javascript"></script>

      <script type="text/javascript" charset="utf-8" src="cordova-1.7.0.js"></script>

      <script type="text/javascript">

        document.addEventListener("deviceready",onDeviceReady,false);

        // once the device ready event fires, you can safely do your thing! -jm
        function onDeviceReady()
        {
            //document.getElementById("welcomeMsg").innerHTML += "Cordova is ready! version=" + window.device.cordova;
            console.log("onDeviceReady. You should see this message in Visual Studio's output window.");
            //navigator.notification.alert("Hello World");

        };

        $(function(){

          $("#savebtn").click(function(){
            window.localStorage.setItem("modelname", $("#modelname").val());

          });

        $("#androidpg").live("pageshow", function () {
            var moname = ""
            moname = window.localStorage.getItem("modelname");

          if (moname.length > 0) {
              $("#modelname").val(moname);
          }

        });

      });

      </script>

  </head>
  <body>
    <div data-role="page" id="home">

      <div data-role="header">
        <h1>Home</h1>

      </div>
      <div data-role="content">
        This Demo can run on:
        <ul>
          <li>iOS</li>
          <li>Android</li>
          <li>BlackBerry</li>
          <li>Windows Mobile</li>
        </ul>
        <a href="#androidpg" data-role="button">Goto Android Page</a>

      </div>

      <div data-role="footer" data-position="fixed">
        <h4>All Rights Reserved</h4>

      </div>   

    </div>

    <div data-role="page" id="androidpg">

      <div data-role="header">
        <h1>Android</h1>

      </div>
      <div data-role="content">
        <h1>Android Page</h1>

        <label for="modelname">Enter Model Name:</label>
        <input type="text" name="modelname" id="modelname" value="" />
        <a href="#savebtn" data-role="button">Save</a>

      </div>

      <div data-role="footer" data-position="fixed">
        <h4>All Rights Reserved</h4>

      </div>   

    </div>

  </body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:52:33.470

您可能需要注册一个“tap”或“vclick”处理程序才能让您的处理程序触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:56:41.547

[id-selector](http://api.jquery.com/id-selector/) `#savebtn`查找 id 为 的元素`savebtn`。您的链接`<a href="#savebtn" data-role="button">Save</a>`没有 id `savebtn`（您发布的代码中没有元素）。为您的锚添加一个 id。`<a href="#savebtn" id="savebtn" data-role="button">Save</a>`

# iphone - 支持 ios 5 (storyboard) 的横向和纵向方向

> ID：10834125
> 
> 赞同：0
> 
> 时间：2012-05-31T12:59:33.687
> 
> 标签：iphone, xcode, orientation, storyboard

如何在 ios 5 (StoryBoard) 中支持标签栏应用程序的纵向和横向方向。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:35:43.800

UITabBarController 有一些问题。问题是子视图（选定索引）不自动旋转。

因此，您可以创建一个类别，并添加以下代码。

并且，添加一个#import "UITabBarController+Autorotate.h"

```
#import <Foundation/Foundation.h>

@interface UITabBarController (Autorotate)

@end 
```

* * *

```
#import "UITabBarController+Autorotate.h"

@implementation UITabBarController (Autorotate)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    UIViewController *controller = self.selectedViewController;
    if ([controller isKindOfClass:[UINavigationController class]])
        controller = [(UINavigationController *)controller visibleViewController];
    return [controller shouldAutorotateToInterfaceOrientation:interfaceOrientation];
}

@end 
```

# asp.net - 数据网格中的单选按钮采用不同的组名？

> ID：10834129
> 
> 赞同：1
> 
> 时间：2012-05-31T13:00:07.760
> 
> 标签：asp.net, datagrid, radio-button

我有一个自动生成的列属性为 true 的数据网格。网格的每个单元格都绑定了一个单选按钮。但是不同行中的单选按钮采用不同的组名，因为它们都在同一个组中。谁能解决这个问题？TIA。

```
int j = 0;
foreach(DataGridItem dgItem in dgPhoto.Items) {
    for (int i = 4; i < dgItem.Cells.Count; i++) {
        RadioButton rad = new RadioButton();
        rad.ID = "Photo_" + j.ToString() + i.ToString();
        rad.Text = priceTxt;
        rad.Attributes.Add("name", "priceGrp");
        dgItem.Cells[i].Controls.Clear();
        dgItem.Cells[i].Controls.Add(rad);
    }
    j++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:09:36.353

尝试在您的代码中设置 GroupName 属性：

采用：

```
rad.GroupName = "priceGrp" 
```

# wcf - WCF 唯一标识具有证书问题的客户端

> ID：10834130
> 
> 赞同：0
> 
> 时间：2012-05-31T13:00:08.697
> 
> 标签：wcf, web-services, authentication, certificate

我有这个 WCF 网络服务，它提供了一个非常基本的查找服务（因此在服务器端没有更改任何数据）。该服务提供的信息是保密的，因此我必须采取适当的安全措施。

要做的标准事情是通过在服务绑定中要求有效的客户端证书来提供传输和消息安全性。我创建并颁发这些证书，以便控制谁可以使用此服务。但是（据我说，请在这里证明我错了）没有什么能阻止客户与其他客户（我没有授予他们访问我的服务的权限）交换他们的客户证书。只要提供的客户端证书有效，服务就会接受连接。添加的用户名/密码机制不会改变这一点，因为这些凭据也可以交换。

您可能会说客户在法律上有义务为自己保留证书，但这并不能为我提供足够的安全性。有没有办法专门控制谁与我的服务连接，而不必诉诸基于 IP 的访问控制（因为我的客户端使用 DHCP 颁发的 IP 地址，所以无法将 IP 耦合到客户端/证书）。

我最初的问题是以某种方式使用由在其证书存储中安装客户端证书（如 GUID）的客户端生成的唯一标识符，并在服务器端注册它，以便只有证书主题和该唯一标识符的组合可以访问服务。但我不知道是否有一种机制可以做到这一点。

编辑：由于我无法控制客户端，因此无法通过更改客户端的代码轻松解决此问题。

我真的很感谢任何指示/答案！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:14:46.837

我用`IDispatchMessageInspector`这个。虽然不确定这是否是性能最佳的方法，但事实证明它运行良好。

我的客户使用消息头来发送他们唯一的 GUID。每个 GUID 对应于每个客户端证书，这些证书存储在 Windows 注册表中。GUID 由客户端生成（我使用[UuidCreateSequential()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379322%28v=vs.85%29.aspx)来生成）

我将与您分享我的解决方案。这是我的服务代码：

```
 public object AfterReceiveRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel, System.ServiceModel.InstanceContext instanceContext)
    {
        IList<IIdentity> identities = OperationContext.Current.ServiceSecurityContext.AuthorizationContext.Properties["Identities"] as IList<IIdentity>;
        string clientGuid = request.Headers.GetHeader<string>("Guid", "MyNamespace");
        if (clientGuid == null)
            throw new FaultException("Client GUID not sent!");
        Guid testGuid = Guid.Empty;

        if (!Guid.TryParse(clientGuid, out testGuid))
        {
            throw new FaultException(string.Format("The format of the GUID '{0}' is not valid!", clientGuid));
        }

        IIdentity X509Identity = identities.Where(x => x.AuthenticationType == "X509").SingleOrDefault();
        RegistryKey identityKey = Registry.CurrentUser.CreateSubKey("SOFTWARE\\MySoftware\\Identities");
        string storedSubjectName = (string)identityKey.GetValue(clientGuid);

        if (storedSubjectName == null)
        {
            string[] valueNames = identityKey.GetValueNames();
            for (int idx = 0; idx < valueNames.Count(); idx++)
            {
                string testCN = (string)identityKey.GetValue(valueNames[idx]);
                if (testCN == X509Identity.Name)
                {
                    throw new FaultException(string.Format("Certificate '{0}' has already been registered!", X509Identity.Name));
                }
            }
            identityKey.SetValue(clientGuid, X509Identity.Name, RegistryValueKind.String);
        }
        else
        {
            if (storedSubjectName != X509Identity.Name)
                throw new FaultException(string.Format("Certificate '{0}' used by the user registered with the certificate '{0}'", X509Identity.Name, storedSubjectName));
        }

        identityKey.Close();

        return null;
    } 
```

客户端上的代码：
*在应用启动时*

```
 RegistryKey guidKey = Registry.CurrentUser.CreateSubKey("SOFTWARE\\MySoftware\\Settings");
        string clientGuid = (string)guidKey.GetValue("Guid");
        if (clientGuid == null)
        {
            clientGuid = UUID.mGetNewGUID().ToString();
            guidKey.SetValue("Guid", clientGuid, RegistryValueKind.String);
        } 
```

*感谢[这篇文章，一个帮助类来获取唯一的 UUID](http://www.eigo.co.uk/News-Article.aspx?NewsArticleID=63)*

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Data;
using System.Diagnostics;
using System.Runtime.InteropServices;

static class UUID
{

    // ==========================================================
    // GUID Creation
    // ==========================================================
    private const int RPC_S_OK = 0;
    private const int RPC_S_OUT_OF_MEMORY = 14;
    private const int RPC_S_UUID_NO_ADDRESS = 1739;

    private const int RPC_S_UUID_LOCAL_ONLY = 1824;
    [DllImport("rpcrt4.dll", SetLastError = true)]
    public static extern int UuidCreateSequential(ref Guid guid);

    [DllImport("rpcrt4.dll", SetLastError = true)]
    public static extern int UuidCreate(ref Guid guid);

    /// <summary>
    /// Creates the machine GUID.
    /// </summary>
    public static Guid mGetNewGUID()
    {
        Guid guidMachineGUID = default(Guid);
        int intReturnValue = UuidCreateSequential(ref guidMachineGUID);
        switch (intReturnValue)
        {
            case RPC_S_OK:
                return guidMachineGUID;

            case RPC_S_OUT_OF_MEMORY:
                throw new Exception("UuidCreate returned RPC_S_OUT_OF_MEMORY");
            case RPC_S_UUID_NO_ADDRESS:
                throw new Exception("UuidCreate returned RPC_S_UUID_NO_ADDRESS");
            case RPC_S_UUID_LOCAL_ONLY:
                throw new Exception("UuidCreate returned RPC_S_UUID_LOCAL_ONLY");
            default:
                throw new Exception("UuidCreate returned an unexpected value = " + intReturnValue.ToString());
        }
    }

} 
```

*在`BeforeSendRequest`_`IClientMessageInspector`*

```
 var guidHeader = new MessageHeader<string>(Service.ClientGuid);
        var untypedGuid = guidHeader.GetUntypedHeader("Guid", "MyNamespace");
        request.Headers.Add(untypedGuid); 
```

# php - Apache ant 在 root 中工作而不是在 shell_exec

> ID：10834134
> 
> 赞同：0
> 
> 时间：2012-05-31T13:00:16.860
> 
> 标签：php, shell, ant, ssh, putty

我在 Apache ant 中遇到问题，所有命令都在 ssh 客户端 putty 中运行，但是当我尝试在 shell_exec 中运行时，它给出了错误

**`sh: ant: command not found`**

在 shell_exec 中是否有任何使用权限

我对服务器有 root 访问权限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:03:48.307

PHP 是否尊重您的环境路径？您可能需要限定可执行文件的路径。有关更多路径/shell 信息，请参阅此帖子：[PHP exec $PATH variable missing elements](https://stackoverflow.com/questions/3428647/php-exec-path-variable-missing-elements)

# mysql - 没有任何无效标记的 MySQL 语法错误

> ID：10834139
> 
> 赞同：1
> 
> 时间：2012-05-31T13:00:33.423
> 
> 标签：mysql, syntax-error

我正在尝试创建此过程

```
CREATE PROCEDURE RequestApproval (
  IN occupation enum('professor', 'student', 'pastor'),
  IN organization varchar(500),
  IN lastName varchar(100),
  IN firstName varchar(100),
  IN email varchar(300),
  IN phone varchar(50),
  IN description varchar(10000)
)
BEGIN
INSERT INTO `Discounts`(`Occupation`, 
  `Organization`, 
  `LastName`, 
  `FirstName`, 
  `Email`, 
  `Phone`, 
  `Description`) 
VALUES (occupation, 
  organization, 
  lastName, 
  firstName, 
  email, 
  phone, 
  description);
END ; 
```

我收到了这个错误

> 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 24 行的 '' 附近使用正确的语法

当它只是说空字符串（）附近存在无效语法时，我不知道要更改什么`''`。它不会告诉我无效令牌是什么——我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:04:19.767

看起来您需要设置一个备用分隔符。以下将使用`DELIMITER`关键字与 MySQL 命令行客户端一起使用，但其他客户端有自己的指定分隔符的方法。

```
/* set alternate delimiter $$ */
DELIMITER $$
CREATE PROCEDURE RequestApproval (
  IN occupation enum('professor', 'student', 'pastor'),
  IN organization varchar(500),
  IN lastName varchar(100),
  IN firstName varchar(100),
  IN email varchar(300),
  IN phone varchar(50),
  IN description varchar(10000)
)
BEGIN
/* Use regular delimiter ; in the statement */
INSERT INTO `Discounts`(`Occupation`, `Organization`, `LastName`, `FirstName`, `Email`, `Phone`, `Description`) VALUES (occupation, organization, lastName, firstName, email, phone, description);
/* end the procedure with the alternate delimiter */
END$$
/* reset to ; */
DELIMITER ; 
```

它在第 11 行报告了一个没有特定字符的语法错误，可能是因为它`;`将该行上`END`的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:05:21.467

尝试设置分隔符，过程结束时将使用 DELIMITER 而不是`;`看我的示例我更改插入以使其在我的本地主机中

```
mysql> delimiter \\

jcho360> CREATE PROCEDURE RequestApproval (
    ->   IN occupation enum('professor', 'student', 'pastor'),
    ->   IN organization varchar(500),
    ->   IN lastName varchar(100),
    ->   IN firstName varchar(100),
    ->   IN email varchar(300),
    ->   IN phone varchar(50),
    ->   IN description varchar(10000)
    -> )
    -> BEGIN
    -> INSERT INTO `t1` VALUES (0, lastName, firstName, 0);
    -> END //
Query OK, 0 rows affected (0.00 sec)

jcho360> delimiter ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:08:46.423

If its NOT the delimiter as others have mentioned, and since I don't have MySQL available here, I would hedge to think that it's getting confused with your parameters vs the column names. You are trying to insert into X ( someColumn ) values ( someColumn )... is it interpreting it the "Values" portion as the column name, or the parameter.

I would try changing the parameters to

```
pOccupation, pOrganization, pLastName, etc... 
```

then your insert to be

```
insert into YourTable ( Occupation, Organization, etc... )
   values ( pOccupation, pOrganization, etc... ) 
```

Then no ambiguity of what MIGHT be taking place under the hood.

# iphone - 如何通过 facebook iOS SDK 和 Graph API 邀请朋友加入我的应用程序

> ID：10834140
> 
> 赞同：24
> 
> 时间：2012-05-31T13:00:36.193
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api, facebook-ios-sdk

我正在编写一个 iPhone 应用程序。

我想让用户选择邀请朋友开始通过 Facebook 使用我的应用程序。

更具体地说，我想展示一个对话框，让用户选择要邀请的特定朋友。

我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-02-21T10:12:10.607

很简单，你只需编写下面的代码来个性化消息，你也可以很容易地选择应该向谁发送请求的朋友，这是一种直接而强大的方法。

```
 [FBWebDialogs
 presentRequestsDialogModallyWithSession:nil
 message:NSLocalizedString(@"FBinviteMessage", nil)
 title:nil
 parameters:nil
 handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {}
]; 
```

只需将这六行代码添加到您的 Button 操作方法中，其余的将由 IOS & FaceBook 内置框架完成 :)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-06T07:29:03.853

你可以这样做：

```
Facebook* facebook = 
   [[Facebook alloc] initWithAppId:@"YOUR_FACEBOOK_APP_ID" andDelegate:self];

NSMutableDictionary* params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                       @"My Title", @"title",
                                       @"Come check out my app.",  @"message",
                                       @"FACEBOOK_USER_ID", @"to",
                                       nil]; 

[facebook dialog:@"apprequests" andParams:params andDelegate:self]; 
```

您可以在此页面查看可能的参数列表（向下滚动）：http: [//developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-30T13:01:16.313

Facebook SDK 4.0 引入了“iOS 应用邀请”。看看：[https ://developers.facebook.com/docs/app-invites/ios](https://developers.facebook.com/docs/app-invites/ios)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-01-11T01:24:06.620

今天使用`3.11 version`facebook SDK，您应该使用它来向特定朋友发送应用请求。

```
NSString *facebookID = @"YOUR_FRIEND_FACEBOOK_ID"
NSMutableDictionary* params =
[NSMutableDictionary dictionaryWithObject:facebookID forKey:@"to"];

NSString *message = @"SOME_MESSAGE";
NSString *title = @"TITLE";

FBSession *facebookSession = [PFFacebookUtils session]; //You may changed this if you are not using parse.com

[FBWebDialogs presentRequestsDialogModallyWithSession:facebookSession
                                              message:message
                                                title:title
                                           parameters:params handler:
 ^(FBWebDialogResult result, NSURL *resultURL, NSError *error)
 {

 }]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-03-24T06:18:46.840

确保您的 facebook 应用程序 ID 在开发人员页面和 xcode 中的信息下相同，启用沙盒模式并且必须在开发人员页面中填写画布 url [在 facebook 类别的应用程序下]。

```
NSString *facebookID = @"Your friend facebook id";;
    NSMutableDictionary* params =
    [NSMutableDictionary dictionaryWithObject:facebookID forKey:@"to"];

    NSString *message = @"SOME_MESSAGE";
    NSString *title = @"TITLE";

    [FBWebDialogs presentRequestsDialogModallyWithSession:nil
                  message:message
                title:title
                parameters:params handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
                        if (error)
                    {
                    // Case A: Error launching the dialog or sending request.
                        NSLog(@"Error sending request.");
                    }
                    else
                    {
                        if (result == FBWebDialogResultDialogNotCompleted)
                    {
                    // Case B: User clicked the "x" icon
                        NSLog(@"User canceled request.");
                    }
                    else
                    {
                        NSLog(@"Request Sent. %@", params);
                    }
        }}]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-08T12:17:04.007

要发送 Facebook 应用邀请，您需要先在此处添加应用的详细信息。 [https://developers.facebook.com/quickstarts/?platform=app-links-host](https://developers.facebook.com/quickstarts/?platform=app-links-host)

在 Swift 2.2、XCode 7.3 和 FBSDK 4.1 中

1.  `import FBSDKShareKit` `import FBSDKCoreKit` `import FBSDKLoginKit`

2.  `FBSDKAppInviteDialogDelegate`使用您的 ViewController 类添加。

    ```
    func appInviteDialog(appInviteDialog: FBSDKAppInviteDialog!, didCompleteWithResults results: [NSObject : AnyObject]!) {
        print("Initiation sent")

    }
    func appInviteDialog(appInviteDialog: FBSDKAppInviteDialog!, didFailWithError error: NSError!) {
        print("\(error)")
    } 
    ```

3.  ```
     let content = FBSDKAppInviteContent();
        content.appLinkURL = NSURL(string: "fb link that you get in above developers facebook url"); //"https:// fb.me/1775107252721102" in my case
        FBSDKAppInviteDialog.showFromViewController(self, withContent: content, delegate: self); 
    ```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-12-04T02:50:26.267

```
[FBWebDialogs
 presentRequestsDialogModallyWithSession:nil
 message:@"YOUR_MESSAGE_HERE"
 title:nil
 parameters:nil
 handler:^(FBWebDialogResult result, NSURL *resultURL, NSError *error) {
     if (error) {
         // Error launching the dialog or sending the request.
         NSLog(@"Error sending request.");
     } else {
         if (result == FBWebDialogResultDialogNotCompleted) {
             // User clicked the "x" icon
             NSLog(@"User canceled request.");
         } else {
             // Handle the send request callback
             NSDictionary *urlParams = [self parseURLParams:[resultURL query]];
             if (![urlParams valueForKey:@"request"]) {
                 // User clicked the Cancel button
                 NSLog(@"User canceled request.");
             } else {
                 // User clicked the Send button
                 NSString *requestID = [urlParams valueForKey:@"request"];
                 NSLog(@"Request ID: %@", requestID);
             }
         }
     }
}]; 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2012-05-31T13:18:33.187

您可以使用共享对话框共享链接以将应用程序下载到用户的墙上，或者编写自定义 UI 元素并使用 API 调用来构建您自己的共享模块。尝试使用 Facebook iOS SDK 来简化流程，否则您将有很多工作要做。

# objective-c - UIScrollView 需要触摸才能滚动

> ID：10834141
> 
> 赞同：0
> 
> 时间：2012-05-31T13:00:40.010
> 
> 标签：objective-c, uiscrollview

我的 UIScrollView 有一个非常奇怪的行为。它在滚动之前需要触摸，所以它在第二次触摸时首先滚动。

我在 LayoutSubview 中设置了 ContentSize，因此在加载滚动视图时，我可以看到内容大小大于其大小（它还显示滚动视图指示器）。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:03:07.467

如果我没记错的话，可以通过将内容延迟触摸设置为来修复此行为`NO`。

# c# - 未处理的异常：System.ArgumentException：目标数组不够长？

> ID：10834142
> 
> 赞同：0
> 
> 时间：2012-05-31T13:00:48.850
> 
> 标签：c#, asp.net

我有这个每天在服务器上运行的计划任务，该任务完美运行了 1 年。在服务器更改（将任务移动到新服务器）后，任务开始崩溃，并出现以下异常：

```
Unhandled Exception: System.ArgumentException: Destination array was not long enough.
Check destIndex and length, and the array's lower bounds.
at System.Array.Copy(Array sourceArray, Int32 sourceIndex, Array destinationArray,
Int32 destinationIndex, Int32 length, Boolean reliable)
at System.Collections.ArrayList.ToArray()
at Directory.MessageVector.findMessageById(Int32 msgId)
at Directory.Connection.ReaderThread.Run()
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext,  
ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart() 
```

我在 Internet 上查找了这个错误，但我发现的所有内容都与多线程、并行编程和锁定机制有关。但是我的任务不使用任何这些，它不使用并行编程或锁定机制，它是一项从数据库中检索数据并发送电子邮件的简单任务，并且在服务器更改之前它已经完美运行。

有任何想法吗 ？？？？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:13:21.740

正如您正确地说的那样，大多数在线文章都提到了多线程问题。

你的例外说的事实

```
at System.Threading.ThreadHelper.ThreadStart() 
```

表明事实确实如此。可能值得在您的代码中搜索“System.Threading”的任何实例/引用。或者，如果您确定不是您的代码要求 DLL 源代码或至少是调试版本，以便您附加调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:08:49.360

根据堆栈跟踪`ArrayList.ToArray`正在抛出异常。确实有些大错特错。您的应用程序是多线程的吗？第三方DLL是否支持多线程？如果是这样，有人可能忘记正确同步该特定`ArrayList`的 . 如果没有，您可能必须同步对 DLL 的调用。

例如，请参阅此[问答](https://stackoverflow.com/questions/3188783/argumentexception-when-calling-toarray)。

编辑：我错过了最后几个堆栈帧。多线程确实在这里发挥作用。

# c++ - Select() 不适合我

> ID：10834143
> 
> 赞同：3
> 
> 时间：2012-05-31T13:00:49.817
> 
> 标签：c++, function, select

我有一个问题，`select`当我可以在服务器端读取接收到的数据时，我使用函数等待，但它工作错误，就像我什么也没收到并且超时已过。

**服务器端代码：**

```
 int fd = accept(sockfd, addr, addrlen);
 if(fd > 0)
 {
     struct timeval tv;
     fd_set rfds;
     FD_ZERO(&rfds);
     FD_SET(fd, &rfds);

     tv.tv_sec = 5;
     tv.tv_usec = 0;
     // wait when i can read data
     int ret_select = select(1, &rfds, (fd_set *) 0, (fd_set *) 0, &tv);
     if(ret_select > 0)
     {
         // data ready to be readed. NEVER HERE!
     }
     else
     {
        // nothing. ALWAYS HERE
     }
    } 
```

**客户端：**

```
int ret = connect(s, name, namelen);
if(ret == 0)
{
 struct timeval tv;
 fd_set rfds;
 FD_ZERO(&rfds);
 FD_SET(s, &rfds);

 tv.tv_sec = 5;
 tv.tv_usec = 0;
 // wait when we can write
 int ret_select = select(1, (fd_set *) 0, &rfds, (fd_set *) 0, &tv);
 if(ret_select > 0)
 {
  int sended = send(s, my_data, size_data, 0);
  if(sended > 0)
  {
   // all ok, data sended!
  }
 }
} 
```

但是，如果我在服务器端调用中删除`select`- 一切正常，要读取的数据是存在的，所以我猜`select`我的代码有问题！

我的代码有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:02:59.893

的第一个参数`select()`不是集合*中*文件描述符的数量。这是：

> nfds 是三组中编号最高的文件描述符，加 1。

因此，除非您的套接字文件描述符是数字 0，否则您的参数 1 是错误的。

# xna-4.0 - 添加 GamerServicesComponent 会导致程序启动时间过长

> ID：10834156
> 
> 赞同：1
> 
> 时间：2012-05-31T13:01:37.203
> 
> 标签：xna-4.0, xname

在完成了我正在开发的游戏的原型之后，我开始整合网络和网络代码。整个事情也很好，我唯一的问题是，在将 GamerServicesComponent 添加到游戏后，它需要永远启动。它在合理的时间内编译得很好，但启动应用程序本身需要 5-60 秒（至少我没有等待比这更长的时间，因为我当时决定退出）。在添加组件之前，启动时间在 0.25 到 0.5 秒之间。

我读到了多核 AMD 处理器（我使用的是 X4 Phenom）可能存在的问题，但那篇文章是 2008 年的。我尝试了安装 AMD 多核工具的可能解决方案，但这并没有改变。我什至不确定这是否导致了我的问题。

除了上述之外，我在互联网上没有找到任何关于这个话题的东西，所以我得到这个问题的答案的希望相对较低。另外，为什么 XNA 的记录如此糟糕？似乎只有少数人使用这项技术。

# wcf - WCF 返回 TotalCount -1 但有实体，如何？

> ID：10834160
> 
> 赞同：0
> 
> 时间：2012-05-31T13:01:55.670
> 
> 标签：wcf, silverlight, wcf-ria-services

正如您在下面看到的，有一个提琴手日志。它是一个 WCF 结果并说 TotalCount 是 -1 **(< a: TotalCount > -1 < /a: TotalCount > )**

但是有实体返回。这是什么意思？

**注意：**当我传递参数 take N 时，它说 TotalCount 是 2。但是对于这个查询没有限制取 0 或其他东西。只是存在一个排序。

```
<GetAppointmentsBySearchResponse xmlns="http://tempuri.org/">
<GetAppointmentsBySearchResult xmlns:a="DomainServices" xmlns:i="http://www.w3.or /2001/XMLSchema-instance">
<a:TotalCount>-1</a:TotalCount>
<a:RootResults xmlns:b="http://schemas.datacontract.org/2004/07/AHBSBus.Web.DB">
 <b:APT_APPOINTMENT>
<b:APPOINTMENTDATE>2012-05-31T09:30:00</b:APPOINTMENTDATE>
<b:APPOINTMENTENDDATE>2012-05-31T09:45:00</b:APPOINTMENTENDDATE>
<b:APPOINTMENTSTATUS>46814e8a-30ad-4648-a98d-d0134f8eccc4</b:APPOINTMENTSTATUS>
<b:APPOINTMENTTYPE>e4b7c7c5-83f5-4f0c-8e47-5f04d41d9f68</b:APPOINTMENTTYPE>
<b:ARRIVALDATE i:nil="true">
</b:ARRIVALDATE>
<b:ARRIVALNO i:nil="true">
</b:ARRIVALNO>
<b:ARRIVALSTATUS i:nil="true">
</b:ARRIVALSTATUS>
<b:DEPARTUREDATE i:nil="true">
</b:DEPARTUREDATE>
<b:DOCTORID>20376fd9-2411-46c2-8463-72fb995de038</b:DOCTORID>
<b:ENTRYDATE>2012-05-31T13:52:46.617</b:ENTRYDATE>
<b:ENTRYUSERID i:nil="true">
</b:ENTRYUSERID>
<b:ID>0533cb98-618b-4af0-9227-fd14920501e0</b:ID>
<b:ISACTIVE>true</b:ISACTIVE>
<b:ISCLOSED>false</b:ISCLOSED>
<b:NOTE>ok</b:NOTE>
<b:PATIENTCASETYPE>c088796a-6981-4639-9ba9-776eb1906a8f</b:PATIENTCASETYPE>
<b:PATIENTID>c4ae821d-8c26-4002-b5bc-c3fce3d29b6c</b:PATIENTID>
<b:SOCIALSECURITYNO i:nil="true">
</b:SOCIALSECURITYNO>
<b:SUBJECT>NURŞEN GENÇ</b:SUBJECT>
<b:USERID i:nil="true">
</b:USERID>
</b:APT_APPOINTMENT>
<b:APT_APPOINTMENT>
<b:APPOINTMENTDATE>2012-05-31T12:45:00</b:APPOINTMENTDATE>
<b:APPOINTMENTENDDATE>2012-05-31T16:30:00</b:APPOINTMENTENDDATE>
<b:APPOINTMENTSTATUS>46814e8a-30ad-4648-a98d-d0134f8eccc4</b:APPOINTMENTSTATUS>
<b:APPOINTMENTTYPE>ce8482b1-2cc3-41e5-9d54-9f989d50ad66</b:APPOINTMENTTYPE>
<b:ARRIVALDATE i:nil="true">
</b:ARRIVALDATE>
<b:ARRIVALNO i:nil="true">
</b:ARRIVALNO>
<b:ARRIVALSTATUS i:nil="true">
</b:ARRIVALSTATUS>
<b:DEPARTUREDATE i:nil="true">
</b:DEPARTUREDATE>
<b:DOCTORID>20376fd9-2411-46c2-8463-72fb995de038</b:DOCTORID>
<b:ENTRYDATE>2012-05-31T13:56:50.773</b:ENTRYDATE>
<b:ENTRYUSERID i:nil="true">
</b:ENTRYUSERID>
<b:ID>bb174e0c-4ebb-4d46-9245-dd88b59d89d1</b:ID>
<b:ISACTIVE>true</b:ISACTIVE>
<b:ISCLOSED>false</b:ISCLOSED>
<b:NOTE>akşama kadar çok uğraştırdın!</b:NOTE>
<b:PATIENTCASETYPE>c088796a-6981-4639-9ba9-776eb1906a8f</b:PATIENTCASETYPE>
<b:PATIENTID>1c108f70-f86b-4a1b-b5bd-2e81ded090bd</b:PATIENTID>
<b:SOCIALSECURITYNO i:nil="true">
</b:SOCIALSECURITYNO>
<b:SUBJECT>Perveen Mahmoodi</b:SUBJECT>
<b:USERID i:nil="true">
</b:USERID> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T22:28:05.363

尝试将`IncludeTotalCount`查询的属性显式设置为`true`（在加载之前）：

```
var query = context.GetAppointmentsBySearchQuery();
query.IncludeTotalCount = true;
context.Load(query) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T13:16:18.080

我点击此链接[http://www.telerik.com/community/forums/silverlight/data-pager/raddatapager-displays-just-one-page.aspx](http://www.telerik.com/community/forums/silverlight/data-pager/raddatapager-displays-just-one-page.aspx)并找到了解决方案。

我使用 DomainDataSource 和 RadDataPager。我只是将 DomainService Query Method 赋予 DomainDataSource 的 QueryName 属性。我还在客户端添加了一个排序器（实际上我正在修改 s.one else 的软件）。如此处所示

```
domainDataSource.SortDescriptors.Add
(new SortDescriptor() { PropertyPath = "APPOINTMENTDATE", 
Direction = System.ComponentModel.ListSortDirection.Ascending }); 
```

最后我从 Telerik 的链接中找到了解决方案。据我了解，问题是；在我的第一个查询 Telerik 的组件中，排序有问题。因为我在服务器端运行的查询方法是一个 IQueryable。有趣的是，如果我查询 3 次，它会运行 :)

无论如何，我在服务器端添加了 Orderby 操作并将返回类型更改为 IOrderedEnumerable 一切都返回正常。

# ruby-on-rails-3 - Rails：控制器和动作的路径

> ID：10834161
> 
> 赞同：2
> 
> 时间：2012-05-31T13:01:57.447
> 
> 标签：ruby-on-rails-3

我使用 Rails 3.2。我怎样才能获得指向 GET 动作的路径，只有控制器和动作？

# android - Android AVD wifi 错误

> ID：10834164
> 
> 赞同：1
> 
> 时间：2012-05-31T13:02:08.070
> 
> 标签：android, eclipse

在Android AVD中，我可以通过浏览器上网，但我无法打开wifi，我还设置了使用无线网络和GPS卫星。

有人知道吗？

和：

我已经下载了GPX文件并加载了它，但它确实有效，我应该下载本地GPX文件（中国），不幸的是，我找不到下载它的地方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:05:00.163

您不能在模拟器中使用 WiFi 连接或 GPS。模拟器只是一个用于测试目的的软件。当您在模拟器中打开任何站点时，默认情况下它使用您计算机的互联网连接，这就是您能够在模拟器中打开任何站点的原因。

但是，您可以通过插入包含 lat-lon 详细信息的 .GPX 文件在 Emulator 中模拟 GPS。你可以看到一个gpx 文件的[例子，它是如何工作的。](http://www.backcountrynavigator.com/content/gpx-file-android-gps-app-tracks-and-waypoints)

您可以在 DDMS 窗口中找到 gpx，如下图所示，

> ![在此处输入图像描述](../Images/f6a80a4ed1a83fdabbe04150b25136ee.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:04:10.373

AVD 不包含 Wifi 硬件。如果你想模拟 GPS 然后使用 android Emulator

# c++ - 更改用于绘制位图的像素格式

> ID：10834165
> 
> 赞同：0
> 
> 时间：2012-05-31T13:02:10.050
> 
> 标签：c++, .net, opengl, gdi

我需要在位图像素中交换 RGBA 通道。例如.net 图形将通道写入 BGRA 中的位图，我需要 RGBA。我认为这个顺序由 PIXELFORMATDESCRIPTOR 决定，但我不知道如何。我确实跟随

```
 PIXELFORMATDESCRIPTOR pfd = { 
            sizeof(PIXELFORMATDESCRIPTOR),   // size of this pfd  
            1,                     // version number  
            PFD_DRAW_TO_BITMAP |   // support window  
            PFD_SUPPORT_OPENGL | 
            PFD_NEED_PALETTE,       
            PFD_TYPE_COLORINDEX,         // RGBA type  
            32,                    // 24-bit color depth  
            8, 8, 8, 0, 0, 0,      // color bits ignored  
            8,                     // no alpha buffer  
            0,                     // shift bit ignored  
            0,                     // no accumulation buffer  
            0, 0, 0, 0,            // accum bits ignored  
            32,                    // 32-bit z-buffer  
            0,                     // no stencil buffer  
            0,                     // no auxiliary buffer  
            PFD_MAIN_PLANE,        // main layer  
            0,                     // reserved  
            0, 0, 0                // layer masks ignored  
        }; 

        int  iPixelFormat; 
  ::SelectObject ((HDC)_hdc.ToPointer (), (HBITMAP)_hBitmap.ToPointer ());

        iPixelFormat = ChoosePixelFormat((HDC)_hdc.ToPointer (), &pfd); 
    bool result = ::SetPixelFormat((HDC)_hdc.ToPointer (), iPixelFormat, &pfd); 
```

我试图改变频道的转变，但它什么都不做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:34:11.867

由于您使用的是 .NET 和 windows - 请查看Monogame中的[这段代码。](https://github.com/mono/MonoGame/blob/develop3d/MonoGame.Framework/Graphics/ImageEx.cs)它使用 ColorMatrix 来转置颜色分量。根据我的经验，这种方法快速、可靠且灵活。

对于您的特定问题，尽管看起来您需要一种方法将 VTK 提供的 RGBA 图像转换为 Bitmap 采用的 BGRA。我在这里看到两个选项：

1.  要求 VTK 渲染成 BGRA 位图（VTK 中的某种 SetPixelFormat 调用？）
2.  使用在进行渲染时交换通道的像素着色器。这几乎没有任何相关成本，而且看起来您无论如何都在使用 OpenGL。

希望这可以帮助！

# sql-server - SQL Server 密钥问题

> ID：10834166
> 
> 赞同：2
> 
> 时间：2012-05-31T13:02:19.613
> 
> 标签：sql-server

我是数据库设计的新手，我确实有几个问题要问你们如何创建关系数据库。

我有几个问题：

通过外键连接`Table A`和`Table B`，我在哪里创建一个键`Table A`或`B`？

可以说我确实有桌子`Users`并且`Ranks`有 1 : 1 的关系。

`Users`桌子：

```
 CREATE TABLE [dbo].[Users](
    [ID] [bigint] IDENTITY(1,1) NOT NULL,
    [Email] [nvarchar](89) NOT NULL,
    [Name] [nvarchar](25) NOT NULL,
    [Midname] [nvarchar](25) NOT NULL,
    [Surname] [nvarchar](25) NOT NULL,
    [Phone] [varchar](15) NOT NULL,
    [Country] [smallint] NOT NULL,
    [Manager] [nvarchar](89) NOT NULL,
    [Referrer] [nvarchar](89) NOT NULL,
    [Rank] [tinyint] NOT NULL,
       CONSTRAINT [PK_UsersID] PRIMARY KEY CLUSTERED 
       ([Email] ASC)
    ) 
```

`Ranks`桌子：

```
 CREATE TABLE [dbo].[Ranks](
    [ID] [tinyint] IDENTITY(1,1) NOT NULL,
    [Rank] [nvarchar](50) NOT NULL,
      CONSTRAINT [PK_Rank] PRIMARY KEY CLUSTERED 
      ([ID] ASC)
    ) 
```

我想通过以下方式加入他们：

```
Users.Rank ON Rank.ID 
```

但它不允许我创建密钥，我收到这样的错误：

> Microsoft SQL Server 管理工作室
> 
> 表“用户”中的列与现有主键或唯一约束不匹配。

为什么它告诉我任何主键？我没有触及我正在使用外键的主，我不明白为什么 PK 和 FK 相关。

你能解释一下我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:17:54.063

我可以使用以下方法创建外键：

```
ALTER TABLE dbo.Users ADD CONSTRAINT
    FK_Users_Ranks FOREIGN KEY
    (
    Rank
    ) REFERENCES dbo.Ranks
    (
    ID
    ) 
```

像这样加入他们：

```
select
    *
    from Users           u 
        INNER JOIN Ranks r ON u.rank=r.id 
```

我建议`IDENTITY(1,1)`从 Ranks.ID 中删除。由于值很少（tinyint），最好自己管理 ID。您可以插入 ID 为 10、20、30、40 的等级。稍后如果需要，如果需要在 10 到 20 之间添加新等级，可以添加 15。有了身份，您就被锁定了。

确保如果您的表中当前有数据并尝试添加 FK，则在添加 FK 之前，所有 Users.Rank 值都存在于 Rank.ID 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:09:27.887

**Users.Rank ON Rank.ID** this is correct but if Users.Rank is int, Rank.ID should be int too, or it will generate errors.

Primary key for persons is for example Personal ID, or email, or name+lastname+age or somthing else..., but in databases this ID -is often integer type. if you have person table, you should have columns **personid, name, lastname, ... ,**

when you use that personid in another table it becomes foreign key. for ex. if you have phonenumber table you wiil have these column

numberid, prefix, number, and **personid** - now this personid is FK. **FK type = PK type**

you can do this in database diagram simply: first drag by hand primary key field to the foreign key table: ![drag by hand primary key field to the foreign key table](../Images/e63265b88cbc37d58b40fe127a610408.png) than

than look at the dialog and click ok :) ![enthan look at the dialog and click ok :)e](../Images/b4761fb0f7105ab9a1e1727d1ab20071.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:25:06.777

您是否在“正确的方向”创建外键？根据错误消息，我冒昧地猜测您正在尝试在以下位置创建关系：

*   选择主键表为Users，列为Rank
*   选择外键表为Rank，列为ID

这意味着“键”Users.Rank 将被导出到 Rank 表，这是不可能的，因为 Users.Rank 列不是 Users 表的键。

外键应该在另一个方向：

*   主键表是Rank，列ID
*   外键表是Users,coulmn Rank

这将创建一个一对多的键，其中用户表中的许多行可以具有相同的排名。如果你真的想建立一对一的关系，你必须在 Users.Rank 列上创建一个唯一索引（或约束）。

# coq - 如何在coq中定义一个有限域

> ID：10834168
> 
> 赞同：2
> 
> 时间：2012-05-31T13:02:27.557
> 
> 标签：coq

我正在尝试在证明检查器 coq 中定义一个域。我该怎么做呢？

我正在尝试做相当于`V in [0,10]`.

我已经尝试过这样做`Definition V := forall v in R, 0 <= v /\ v <= 10.`，但这会导致常量出现问题，例如根据 Coq`0`不在其中。`V`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:50:18.623

一个简单的方法可能是这样的，

```
Require Import Omega.

Inductive V : Set :=
  mkV : forall (v:nat), 0 <= v /\ v <= 10 -> V.

Lemma member0 : V.
Proof. apply (mkV 0). omega. Qed.

Definition inc (v:V) : nat := match v with mkV n _ => n + 1 end.

Lemma inc_bounds : forall v, 0 <= inc v <= 11.
Proof. intros v; destruct v; simpl. omega. Qed. 
```

当然，类型`member0`可能不像您希望的那样提供信息。在这种情况下，您可能希望按集合中每个元素`V`的`nat`对应项进行索引。

```
Require Import Omega.

Inductive V : nat -> Set :=
  mkV : forall (v:nat), 0 <= v /\ v <= 10 -> V v.

Lemma member0 : V 0.
Proof. apply (mkV 0). omega. Qed.

Definition inc {n} (v:V n) : nat := n + 1.

Lemma inc_bounds : forall {n:nat} (v:V n), 0 <= inc v <= 11.
Proof. intros n v. unfold inc. destruct v. omega. Qed. 
```

我以前没有使用`Reals`过，但是上面也可以实现`R`。

```
Require Import Reals.
Require Import Fourier.
Open Scope R_scope.

Inductive V : R -> Set :=
  mkV : forall (v:R), 0 <= v /\ v <= 10 -> V v.

Lemma member0 : V 0.
Proof. apply (mkV 0). split. right; auto. left; fourier. Qed.

Definition inc {r} (v:V r) : R := r + 1.

Lemma inc_bounds : forall {r:R} (v:V r), 0 <= inc v <= 11.
Proof. intros r v; unfold inc. 
  destruct v as (r,pf). destruct pf. split; fourier. 
Qed. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T01:55:54.983

我相信这样做的自然方法是使用 sig 类型，Yves 在评论中也提到了这一点。

V 的元素将是来自 R 的数字 x，以及证明它们确实应该在集合 V 中的证明。

```
Require Import Reals Fourier.
Open Scope R_scope.

Definition V_prop (x : R) : Prop := 0 <= x /\ x <= 10.

Definition V : Set := { x : R | V_prop x }.

Lemma V_prop0: V_prop 0.
Proof.
    unfold V_prop; split;
    [right; auto | left; fourier].
Qed.

Definition V0 : V := exist _ 0 V_prop0. 
```

# wpf - 我在哪里可以找到 CommandTarget？

> ID：10834171
> 
> 赞同：2
> 
> 时间：2012-05-31T13:02:46.507
> 
> 标签：wpf, command, icommand, routedevent

我仍在使用 Commands 和 RoutedEvents 进行体验。在不使用 RoutedCommands 的情况下，我尝试实现一个非常简单的程序。

这是我的命令类：

```
public class ColorChanger : ICommand
{
    public static readonly RoutedEvent ChangeMyColor = EventManager.RegisterRoutedEvent("ChangeMyColor", RoutingStrategy.Direct, typeof(RoutedEventHandler), typeof(ColorChanger));

    public void Execute(object parameter)
    {
        RoutedEventArgs eventArgs  = new RoutedEventArgs(ChangeMyColor);
        Keyboard.FocusedElement.RaiseEvent(eventArgs);
    }

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;

    public static void AddChangeMyColorHandler(DependencyObject o, RoutedEventHandler handler)
    {
        ((UIElement)o).AddHandler(ColorChanger.ChangeMyColor, handler);
    }

    public static void RemoveChangeMyColorHandler(DependencyObject o, RoutedEventHandler handler)
    {
        ((UIElement)o).AddHandler(ColorChanger.ChangeMyColor, handler);
    }
} 
```

为了确保我对该命令具有静态访问权限，我创建了一个静态类来保存所有命令：

```
 public static class AppCommands
{
    private static ColorChanger colorChanger = new ColorChanger();

    public static ColorChanger ColorChanger
    {
        get { return colorChanger; }
    }
} 
```

这是您将在我的 MainWindow.xaml 中找到的内容：

```
<StackPanel>
    <Menu>
        <MenuItem Command="{x:Static local:AppCommands.ColorChanger}" Header="ClickMe"
          CommandTarget="{Binding ElementName=mainTextBox}" x:Name="menue1"/>
    </Menu>
    <TextBox Name="mainTextBox"/>
</StackPanel> 
```

我想要的是通过单击menue1-item 'mainTextBox'的背景发生变化。那么让我们看看我的 MainWindow.cs 内部：

```
 public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
        AddHandler(ColorChanger.ChangeMyColor,new RoutedEventHandler(test));
    }

    public void test(object sender, RoutedEventArgs args)
    {
        Control someCtl = (Control) args.OriginalSource;
        someCtl.Background = Brushes.BlueViolet;
    }
} 
```

该程序正在工作 - 但不正确:) 它总是改变 MainWindow 的背景，但不是我的 CommandTarget。

那么 - 我做错了什么？我是不是忘记了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:21:12.113

`OriginalSource`是基于纯命中测试的事件报告源。请参阅：http: [//msdn.microsoft.com/en-us/library/system.windows.routedeventargs.originalsource.aspx](http://msdn.microsoft.com/en-us/library/system.windows.routedeventargs.originalsource.aspx)。

在这种情况下，它会返回您的窗口，因为它不会解析到其可视树中的任何子元素。

要访问您的 CommandTarget，您应该使用`args.Source`.

# arrays - Matlab：计算具有特定内容的结构数

> ID：10834172
> 
> 赞同：1
> 
> 时间：2012-05-31T13:02:47.950
> 
> 标签：arrays, matlab, struct, count

我正在处理 Simulink Design Verifier 并想自己提取一些信息。因此，我想计算目标的数量以及满足了多少目标。

'Objectives' 本身就是一个结构体：Objectives<1x10 struct>

计算目标的数量很容易：

```
length(fieldnames(Objectives)) 
```

“目标”的内容也是结构。每个这样的结构都有以下内容：

```
type

status

label 
```

现在我想计算“目标”中有多少元素满足该属性

```
'status == Satisfied' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:14:00.713

假设您有一个结构数组，请使用以下代码：

```
 nnz(strcmp({Objectives.status},'satisfied')) 
```

如果你有旧的 Matlab 版本，你可以使用：

```
 nnz(strmatch('satisfied',{Objectives.status},'exact')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:59:00.453

您也可以使用 ISMEMBER。例子：

```
%# lets create a sample array-of-structs
v = cellstr( num2str(rand(10,1)>0.5, 'Value %d') );
s = struct('value',v);

%# count number of structs satistying a condition
num = sum( ismember(lower({s.value}), 'value 0') ) 
```

请注意我如何使用 LOWER 函数执行不区分大小写的比较。

# php - Linux 上的 PHP 5.4：如何连接 MS SQL Server 2008？

> ID：10834175
> 
> 赞同：6
> 
> 时间：2012-05-31T13:02:55.353
> 
> 标签：php, sql-server-2008, zend-framework, utf-8

我有一个 Linux 服务器 Debian 6，安装了 Apache 2.2 和 PHP 5.4。我需要将我的应用程序与 MS SQL Server 2008 连接起来。

我的应用程序使用 Zend Framework 1.11 和字符集 UTF-8（我将拥有来自世界各地的用户，他们将使用自己的语言输入数据）。

首先，我尝试使用适用于 Linux 的 Microsoft SQL Server ODBC 驱动程序。它说仅适用于 Red Hat，但我按照以下说明进行安装：

[http://www.codesynthesis.com/~boris/blog/2011/12/02/microsoft-sql-server-odbc-driver-linux/](http://www.codesynthesis.com/~boris/blog/2011/12/02/microsoft-sql-server-odbc-driver-linux/)

我可以连接并对其进行一些选择，但我无法在其上插入数据。我在 pdo 语句上绑定参数时遇到问题。

插入如下数据不起作用：

```
$stmt = $conn->prepare("insert into mar_regions (name) values (:name)");
$resp = $stmt->execute(array(':name' => $param)); 
```

但是如果我像这样使用它，它会起作用：

```
$stmt = $conn->prepare("insert into mar_regions (name) values ('".$param."')");
$resp = $stmt->execute(); 
```

所以我放弃了这个驱动程序，因为如果这样，我的应用程序没有 ZF 1.11 将无法工作。

其次，我尝试使用 PDO Driver for FreeTDS。这个工作正常，我可以在我的 ZF 1.11 应用程序上使用。

但是，我又遇到了一个问题：字符集。我将我的 freeTDS.conf 配置为使用 UTF-8，将我的表更改为使用 VARCHAR 的 NVARCHAR，并且可以像这样插入 utf-8 数据：

```
$stmt = $dbh->prepare("insert into mar_teste (name) values (N'ンから初・配信 € зеленый банан ÀÀÀÀáááááá')");
$resp = $stmt->execute(); 
```

但是，在我的 ZF 1.11 上，我无法在查询中传递这个“N”属性！所以我的应用程序仍然没有工作。

如您所见，我尝试了一切。

**所以我的问题是**：如何在 MS SQL Server 2008 上使用 ZF 1.11 字符集 UTF-8 从 linux 连接？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-01T12:28:31.010

我的问题的答案是：使用 freeTDS！上面有一个字符集参数：

```
[MyDSN]
    host = <<ip>>
    port = <<port>>
    # use 8.0 for newer versions of SQLSERVER
        tds version = 8.0
        # text size don't need to be such a high value, its just an example
        text size = 4294967295
        client charset = UTF-8 
```

在 Zend Framework 上，像这样配置您的连接：

```
;; BANCO DE DADOS LINUX
database.adapter                = PDO_MSSQL
database.params.pdoType         = dblib

database.params.host            = MyDSN
database.params.dbname          = <<dbname>>
database.params.username        = <<username>>
database.params.password        = <<passwd>>
database.params.driver_options.charset = UTF-8

database.isDefaultTableAdapter  = true 
```

它解决了问题！;)

# qt - 在我的窗口的任何地方放置一个动作

> ID：10834188
> 
> 赞同：0
> 
> 时间：2012-05-31T13:03:22.797
> 
> 标签：qt

我创建了几个放置在上下文菜单中的操作。现在我想将这些相同的操作添加到一个小工具栏。问题是工具栏应位于 VerticalLayout 内（在另一个小部件下方），而不是位于停靠区域之一。有没有办法将工具栏移动到自定义位置或将操作放置在另一个容器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T07:32:07.567

`QActions`应该只添加到菜单和工具栏。

如果我把你弄到那里，你会想要`QActions`放置在普通的小部件上，对吧？

一种解决方法是实现您自己的`QPushButton`类。为此类提供一个 addAction 方法，该方法执行以下操作。它将`QAction`作为按钮的成员添加，将 QAction 的文本设置为按钮的标签，并将按钮的信号连接`clicked()`到操作的插槽`trigger()`。

像这样的东西：

```
void my_button::addAction(QAction* p_action)
{
    if( pAction != NULL )
    {
        m_linked_action = p_action;

        setText(m_linked_action->text());

        connect(this,SIGNAL(clicked()),m_linked_action,SLOT(trigger()));
    }
    else
    {
        assert(false);
    }
} 
```

这只是一个非常粗略的例子。您需要考虑很多事情，例如在删除操作时正确断开信号等。您还必须注意对可检查操作和类似内容的特殊处理（按钮也必须是可检查的，并且必须连接信号......）。但我认为这是一个很好的开始方式。

* * *

**替代方案：**
您还可以做的不是连接，而是重新实现`mouseReleaseEvent`您的按钮并`QAction::trigger()`在那里调用。像这样：

```
void my_button::mouseReleaseEvent( QMouseEvent* e )
{
    if( e->button() == Qt::LeftButton )
    {
        if(m_linked_action != NULL)
        {
            m_linked_action->trigger();
        }
    }

    QPushButton::mouseReleaseEvent(e);
} 
```

通过这样做，您可以将按钮放置在任何地方，单击按钮时将触发链接的操作。

* * *

*   [QAction](http://qt-project.org/doc/qt-4.8/qaction.html)
*   [QPushButton](http://qt-project.org/doc/qt-4.8/qpushbutton.html)

# wpf - 我必须使用 CommandTarget 吗？我认为任何集中的元素都会收到命令

> ID：10834190
> 
> 赞同：4
> 
> 时间：2012-05-31T13:03:30.533
> 
> 标签：wpf, xaml, routed-commands

我试图了解如何使用 RoutedCommands。我的印象是，如果我没有在 Button 上指定 CommandTarget，任何有焦点的元素都会收到命令。但由于某种原因，它不起作用。这是不起作用的xaml：

```
<Window x:Class="WpfTest11_Commands2.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBox Height="177" HorizontalAlignment="Left"
            Margin="12,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="233" AcceptsReturn="True" />
        <TextBox Height="177" HorizontalAlignment="Left"
            Margin="258,12,0,0" Name="textBox2" VerticalAlignment="Top" Width="233" AcceptsReturn="True" />
        <Button Content="Cut"
                    Height="23" HorizontalAlignment="Left" Margin="12,195,0,0" Name="button1" VerticalAlignment="Top" Width="75"
                    Command="ApplicationCommands.Cut"/>
    </Grid>
</Window> 
```

如果我将 CommandTarget 添加到 Button 它可以工作，但仅限于指定的文本框。

```
<Window x:Class="WpfTest11_Commands2.MainWindow"
            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
            Title="MainWindow" Height="350" Width="525">
    <Grid>
        <TextBox Height="177" HorizontalAlignment="Left" Margin="12,12,0,0" Name="textBox1" VerticalAlignment="Top" Width="233" AcceptsReturn="True" />
        <TextBox Height="177" HorizontalAlignment="Left" Margin="258,12,0,0" Name="textBox2" VerticalAlignment="Top" Width="233" AcceptsReturn="True" />
        <Button Content="Cut"
                    Height="23" HorizontalAlignment="Left" Margin="12,195,0,0" Name="button1" VerticalAlignment="Top" Width="75"
                    Command="ApplicationCommands.Cut"
                    CommandTarget="{Binding ElementName=textBox1}"/>
    </Grid>
</Window> 
```

如何让任何聚焦元素接收命令？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T13:11:42.987

您必须设置`FocusManager.IsFocusScope`为`True`。

```
<Button Content="Cut"  FocusManager.IsFocusScope="True"         
        Margin="12,195,0,0" 
        Height="23" HorizontalAlignment="Left" Name="button1" VerticalAlignment="Top" Width="75"                     
        Command="ApplicationCommands.Cut"/> 
```

根据[http://msdn.microsoft.com/en-us/magazine/cc785480.aspx](http://msdn.microsoft.com/en-us/magazine/cc785480.aspx)，原因是这样的：

如果`IsFocusScope="False"`，命令调用程序在它自己在可视树中的位置和可视树的根之间查找命令绑定。

如果`IsFocusScope="True"`，命令调用程序还沿着从根到焦点元素的可视树路径查找命令绑定。

# sonarqube - java.lang.ClassNotFoundException: com.mysql.jdbc.Driver 在针对 Jenkins 上的 Maven 项目运行 Sonar 时

> ID：10834193
> 
> 赞同：0
> 
> 时间：2012-05-31T13:03:38.023
> 
> 标签：sonarqube, jenkins-plugins

根据官方网站的说明，我已将 Sonar 1.8 插件安装到 Jenkins，但构建失败，但有以下异常：`java.lang.ClassNotFoundException: com.mysql.jdbc.Driver`

pom.xml 中没有对 Sonar 或 MySql 的依赖。它使用默认设置（Derby DB），但使用 MySql 失败。

我已经创建了指向的 CLASSPATH 系统环境变量，`c:\Program Files (x86)\MySQL\MySQL Connector J\mysql-connector-java-5.1.20-bin.jar`但异常仍然发生。

任何想法如何解决这一问题？也许我需要通过设置一些系统属性指向 jar 文件位置来配置每个作业？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T15:34:04.167

解决方案只是在 sonar.properties 中注释 Derby 设置并取消注释 MySql 设置:)

# sql - SQL 查询多个范围而不使用多个 OR 子句（嵌套 LIKE、BETWEEN）

> ID：10834194
> 
> 赞同：7
> 
> 时间：2012-05-31T13:03:40.003
> 
> 标签：sql, performance, between

我通常必须在一个非常大的表中查询多个变量，每个变量有很多条件。很多时候，一个变量需要查询多个范围。例如，我可能需要 VAR_1 的所有记录，其中 VAR_1 介于 200-300、350-400、450-500 之间。

通常我会这样写，但有人告诉我使用`IN()`而不是多个 OR 会更有效。

```
SELECT * FROM table
WHERE VAR_1 BETWEEN '200' AND '300' OR
      VAR_1 BETWEEN '350' AND '400' OR
      VAR_1 BETWEEN '450' AND '500' 
```

`OR`有什么方法可以压缩这些信息并通过在 中嵌套`LIKE`or`BETWEEN`子句来摆脱s `IN()`？类似于以下内容：

`WHERE VAR_1 IN (BETWEEN '200' AND '300', BETWEEN '350' AND '400', BETWEEN '450' AND '500')`

或者

`WHERE VAR_1 IN ('[200-300]','[350-400]','[450-500]')`

我已经尝试过这样的事情，但语法显然不正确。您可以指出我的任何想法或方向都会很棒，但对于 SQL 来说还是很新的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T12:10:13.050

一些评论否认 IN 子句比使用 OR 更有效——我认为这对于一般情况是不正确的。

它仅取决于数据库的查询优化器。

如果查询优化器足够聪明，它会将 OR 和 IN 子句转换为相同的执行计划（如果它们在语义上相等）。在这种情况下，两个计划的进一步计划处理将具有相同的成本，一个小的差异可能是转换的成本可能会产生小的差异。

另一方面，查询优化器可能不会注意到 OR 谓词的强相关性并在执行计划中独立评估每个范围谓词（每个谓词都是单独的运算符），而 IN 子句可能由所有的查找表处理in 子句中的值（只有一个运算符）导致明显的运行时差异。

所以总体答案是它在很大程度上取决于您的 DBMS，我建议您在系统上的小型基准设置中尝试这两个版本。

对于 SQL-92，没有类似的特殊语法

```
WHERE VAR_1 IN ('[200-300]','[350-400]','[450-500]') 
```

所以确实你只有 OR 或 IN 列表。

请注意，更一般的表示法

```
WHERE VAR_1 IN ( '200', '201' ) 
```

是

```
WHERE VAR_1 = ANY ('200','201' ) 
```

（运算符“=”可以替换为任何其他比较运算符，例如“<=”）

# iphone - Twitter 和 Facebook 按钮在 iPhone Retina 显示屏上显示不同的高度

> ID：10834195
> 
> 赞同：0
> 
> 时间：2012-05-31T13:03:43.473
> 
> 标签：iphone, facebook, twitter, facebook-like, retina-display

恐怕这没有任何解决方案，但也许我错误地实现了按钮。

问题是它们在 iPhone Retina Display 上显示是这样的。有没有办法让它们的高度相同？

![iPhone 4S 视网膜显示屏上的按钮](../Images/72f3701161ef1cce7f31a5376438fde6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:15:56.333

这些按钮的高度并不相同。您可以尝试通过 CSS 更改高度，但它可能不起作用，因为按钮代码很可能会将 iframe 注入您的页面。更改 CSS 可以让您更改按钮的大小，但它可能看起来不漂亮，因为图形可能会被拉伸。

# php - 安全文件下载

> ID：10834196
> 
> 赞同：16
> 
> 时间：2012-05-31T13:03:45.297
> 
> 标签：php, mysql, .htaccess

我想要一个文件夹，我们称之为 docs，其中包含登录用户可以下载的文档。这些有非常敏感的信息。我怎样才能最好地保护文件夹。我来自 PHP 背景，所以想知道我是否忽略了任何东西。

我将使用 .htaccess 保护文件夹，并且当用户单击下载时，他们永远不会显示该文件夹。通过删除文件夹名称的 php 强制下载。

当然，为了保护用户区域，我正在对所有输入字段实施卫生和验证，并注意 SQLInjections。使用 SSL 连接。关闭所有 php 警告。安全区域使用 SESSION 变量来控制访问并重新验证用户以执行特殊任务，例如更改密码。加上 10 分钟的超时功能，之后用户必须重新输入详细信息。

我试图尽可能彻底，所以无论多么小的任何建议都会受到欢迎。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-31T13:06:05.743

将文件放在 webroot 之外。然后使用 PHP 通过脚本传递文件。这样，没有人可以直接链接到文件并绕过您的控制。（当然要确保仅在验证用户有权检索该文件后执行此操作的脚本）。

示例 PHP：

```
<?php
    if (!isset($_SESSION['authenticated'])) {
        exit;
    }
    $file = '/path/to/file/outside/www/secret.pdf';

    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename=' . basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:31:37.217

除了 John Conde，您还可以将 dl url 重写到其他不合理的文件夹中，以蜜罐试图越过其访问权限的用户。

并在您的 htaccess 中添加此类规则

```
Options -Indexes

<files .htaccess>
  order allow,deny
  deny from all
</files>

#Add all file you want to protect except the one you share...
<FilesMatch "\.(htaccess|htpasswd|ini|phps|fla|psd|log|sh)$">
  Order Allow,Deny
  Deny from all
</FilesMatch> 
```

# php - 获取以指定字符开头并以指定字符 php 代码结尾的字符串文本文件

> ID：10834197
> 
> 赞同：0
> 
> 时间：2012-05-31T13:03:45.420
> 
> 标签：php

我有一个长字的文本文件。我只想在 php 中显示这个词的一部分。我的文本文件中的这个词是这样的——

“美国宇航局的任务控制中心很快就向空间站的六人机组人员发出了赞美：**“干得好，伙计们。”一条棕色玩具龙装饰着休斯顿的飞行指挥员的办公桌。几分钟之内，太空舱就完成了。在 NASA 控制的空间站周围的安全区之外，完全由位于**加利福尼亚州霍桑的 SpaceX 团队管辖。”

您可以看到粗体文本，我想要“：”之后的文本并以“团队”一词结尾。任何人都可以帮助我为此提供 php 代码吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:19:15.390

如果文本**永远不会改变**，你可以这样做

```
preg_match('/:(.*?team)/',$text,$hit);
echo $hit[1]; 
```

# iphone - 重新测试 InApp 购买

> ID：10834201
> 
> 赞同：0
> 
> 时间：2012-05-31T13:03:59.353
> 
> 标签：iphone, objective-c, ios, xcode, ipad

我已经在我的应用程序中实现了 InApp 购买，并在 iTunes 中设置了一个测试帐户。

但我只能测试一次。该应用程序的后续启动似乎认为它已经被购买。我试过删除应用程序，执行干净，退出 iTunes。似乎没有任何效果，我认为这是因为购买标志在钥匙串中，但我不确定。

所以，问题是，我如何重新测试我的应用程序的 InApp 部分？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:15:03.187

由于您的测试帐户已经购买了该项目，InApp 购买服务器允许用户恢复那里的购买。

因此，如果您不想再次测试该项目的购买，您将不得不创建一个新的测试帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:17:03.237

出于测试目的，您可以创建一个消耗品，这样您就可以多次购买它。您的产品现在似乎是非消耗品，这意味着您每个测试帐户只能购买一次。

# java - java的while语法

> ID：10834202
> 
> 赞同：2
> 
> 时间：2012-05-31T13:04:01.007
> 
> 标签：java, while-loop, do-while

自从我写了一段时间以来的年龄。

这样做有什么问题

```
int i = 0;
    do { 
        System.out.println(i);
    } while(++i == 500); 
```

我只通过循环一次，IMO 它应该迭代 500 次。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-31T13:05:26.957

你可能是说

```
while (++i < 500); 
```

代替

```
while (++i == 500); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-31T13:07:08.193

它是`do-while`Java 的循环，而不是`repeat-until`Pascal 的循环。它的表达式指定了*继续条件*，而不是*退出条件*。

```
do { 
    System.out.println(i);
} while(++i != 500); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:07:40.297

由于您的情况，它只会迭代一次。`while (++i == 500)` `++i`将是 1 并且永远不会 500，因此它的评估结果为 false 并且不会继续。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T20:25:38.350

```
while(++i != 500)
{
    System.out.println(i);
} 
```

是更好的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-14T11:10:39.967

在您的代码中，最初将打印 i 的值（即 0），因为它是一个 do while 并且循环内的代码应至少执行一次。
然后现在将检查条件。将检查如果 ++i 等于 500（即 1==500），则返回 false，因此循环中断。

而 (++i < 500);

将条件更改为上述语句可能会导致循环继续，直到 i 的值变为 500

# mysql - 表不可编辑的mysql工作台错误

> ID：10834208
> 
> 赞同：1
> 
> 时间：2012-05-31T13:04:11.043
> 
> 标签：mysql, mysql-workbench

我有一个没有主键的表。我想做的就是查看数据。我不想编辑它。然而，每当我运行这个查询......

```
SELECT * FROM TableThatHasNoPrimaryKey 
```

MySQL Workbench（版本 5.2.36 v8542，在 Ubuntu 10.04 64 位上运行）给了我这个错误......

```
table data is not editable because there is no primary key defined for the table 
```

这是一个错误吗？此查询在 MySQL 浏览器上显示数据很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T14:14:07.983

SELECT * FROM (SELECT * FROM TableWithNoPrimaryKey) 作为 tmp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-21T13:28:43.400

另一种解决方法

```
select *, char_length('') from tableName 
```

在 select 语句中使用函数可以解决这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:11:26.937

我在网上找到了这个：

尝试使用以下命令启动工作台：

```
"mysql-workbench --log-level=debug3" 
```

这是一个错误，请看这里：

[http://bugs.mysql.com/bug.php?id=62893](http://bugs.mysql.com/bug.php?id=62893)

如果没有，你将不得不添加一个主键，看看这个论坛

[MYSQL和python错误](https://stackoverflow.com/questions/5723414/mysql-and-python-error)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T11:16:46.207

我将此用作解决方法：

```
DROP TEMPORARY TABLE IF EXISTS TempTableThatHasNoPrimaryKey;

CREATE TEMPORARY TABLE TempTableThatHasNoPrimaryKey
SELECT *
FROM TableThatHasNoPrimaryKey;

SELECT * FROM TempTableThatHasNoPrimaryKey 
```

出于某种奇怪的原因，这有效......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-22T07:04:12.513

*要在mysql 工作台中*以编辑模式打开表，您的表中需要有一个**主键**列。否则它始终只能以读取模式打开。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-22T07:14:39.533

如果您只需要从表中获取数据，您可以`Views`为此创建。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-17T19:01:56.597

重新启动工作台为我修复了它。

# jquery - .draggable 在链接被点击后恢复到原始位置

> ID：10834214
> 
> 赞同：2
> 
> 时间：2012-05-31T13:04:34.000
> 
> 标签：jquery, jquery-ui-draggable, revert

在这里苦苦挣扎，我在 div 上使用 .draggable 效果很好，但我还需要一个链接，这样一旦用户将 div 拖到页面上的任何位置，他们就可以将其“重置”回原来的位置。

```
$(function() {
    if (! /iphone|ipad|ipod|android|blackberry/i.test(navigator.userAgent.toLowerCase())) {
        $( "#race_charts_container" ).draggable({ revert: false, cancel: "#graphs_content"});
    }
        });

$("#btnReset").click(function() {
    $("#race_charts_container").animate({
           left: '+=50px',
           top: '+=50px'
    });
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:19:30.343

看这个**演示**：http: [//jsfiddle.net/M8Ehe/1/](http://jsfiddle.net/M8Ehe/1/)

只需将顶部和左侧设置为 0。

**代码**：

```
$(function() {
    if (! /iphone|ipad|ipod|android|blackberry/i.test(navigator.userAgent.toLowerCase())) {
        $( "#race_charts_container" ).draggable({ revert: false, cancel: "#graphs_content"});
    }
        });

$("#btnReset").click(function() {
    $("#race_charts_container").animate({left:0,top:0});
}); 
```

# javascript - 如何禁用茉莉花测试

> ID：10834215
> 
> 赞同：0
> 
> 时间：2012-05-31T13:04:34.637
> 
> 标签：javascript, jquery, jasmine

如果页面上有一些 DOM 元素，有没有办法禁用 Jasmine 测试？

```
$(function() {

    if ( $('#id').length !== 0 ) {
        describe('some test', function() {
            // tests
        });
    };

}); 
```

上面的例子不起作用。

# php - 在 WordPress 中注销 style.css

> ID：10834216
> 
> 赞同：5
> 
> 时间：2012-05-31T13:04:35.563
> 
> 标签：php, css, wordpress, stylesheet

有谁知道是否可以在 WordPress 中取消注册主题 style.css 的默认样式表？我尝试过 wp_deregister_style('style') 和 wp_deregister_style('style.css')，但似乎都不起作用。

我希望这样做，以便我可以优化我的网站，将我的各种样式表合并为一个，并使用 Ant 脚本将其缩小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-11T19:07:59.163

根据 Wordpress 的行为，注册和注销样式表时需要传递句柄，并且默认样式表“style.css”是使用句柄“screen”注册的，我们应该使用以下代码：

```
wp_dequeue_style('screen');
wp_deregister_style('screen'); 
```

# php - 将表单文本输入验证为整数？

> ID：10834219
> 
> 赞同：1
> 
> 时间：2012-05-31T13:04:39.667
> 
> 标签：php, validation

我 [认为？] 通过 $_POST 发送的所有数据都是一个字符串。因此，如果我希望用户输入一个整数（在我的示例中，我要求用户在一个框中输入小时，在另一个框中输入分钟。他们说 2.5 小时 22 分钟是没有意义的），怎么能我验证？

我已经有一个解决方案是这样的：

```
if(!filter_input(INPUT_POST, 'hours', FILTER_VALIDATE_INT)) {} 
```

有没有其他/更好的方法来做到这一点？

is_numeric/is_int 失败，因为 $_POST 数据是一个字符串。转换值可能会丢失数据/带来自己的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:51:29.003

您应该使用验证库。使用[Respect\Validation](http://documentup.com/Respect/Validation)的示例：

```
<?php

use Respect\Validation\Validator as v;

$isFormValid = v::key('hours', v::int()->between(0,23))
                ->key('minutes', v::int()->between(0,59))
                ->validate($_POST); 
```

该`$isFormValid`变量将具有`true`或`false`取决于结果。

如果你想自己做，[Respect 的 int 验证器](https://github.com/Respect/Validation/blob/develop/library/Respect/Validation/Rules/Int.php)使用这个逻辑：

```
 is_numeric($input) && (int) $input == $input; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:07:48.900

在将整数发送到 PHP 之前验证整数（通过 Javascript/Jquery/另一个库）客户端。[PHP 中的is_numeric](http://www.php.net/manual/en/function.is-numeric.php)应该用于测试字符串变量是否为 .. 数字！这通常是在不强制转换的情况下测试`$_POST/$_GET`变量的数值的标准方法。

每个`$_POST`变量都是一个字符串，并且没有明确地将您需要的字符串转换为 INT，我认为您的方法是一个很好的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:06:27.823

这是确定输入是否为有效整数的好方法。

您是正确的，填充的每个值`$_POST`都是一个字符串。

# .net - 带有 PowerPivot 的 MVC 4 WebApi？

> ID：10834220
> 
> 赞同：6
> 
> 时间：2012-05-31T13:04:43.797
> 
> 标签：.net, odata, asp.net-mvc-4, powerpivot

有谁知道 MVC 4 WebApi 是否可以（或将）在 power-pivot 中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T01:25:44.960

Web API 本身没有内置支持以 OData 格式公开端点。我们计划通过将来发布的插件添加 OData 支持。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:08:24.437

我认为，如果您公开`IQueryable<T>`，它会将其公开为 OData 提要。

我找到了这个。

[http://codebetter.com/johnvpetersen/2012/03/22/bringing-odata-to-your-webapi-just-use-iqueryable/](http://codebetter.com/johnvpetersen/2012/03/22/bringing-odata-to-your-webapi-just-use-iqueryable/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-13T09:04:31.353

它在 Excel 2013 中作为数据源运行良好。在早期版本中，例如 Excel 2010，此处描述了一种解决方法：http: [//aspnetwebstack.codeplex.com/workitem/820](http://aspnetwebstack.codeplex.com/workitem/820)

基本上，默认输出是 JSON，Excel 没有发送正确的 Accept 标头来接收 XML。所以你必须把它添加到你的 Web API 的启动注册函数中：

```
IList<ODataMediaTypeFormatter> odataFormatters 
                                   = ODataMediaTypeFormatters.Create();
var jsonFormatter = odataFormatters
       .First(f => f.SupportedMediaTypes
                    .Contains(MediaTypeHeaderValue.Parse("application/json")));
odataFormatters.Remove(jsonFormatter);
odataFormatters.Add(jsonFormatter);
config.Formatters.InsertRange(0, odataFormatters); 
```

# android - 无法将 var 传递给其他活动

> ID：10834221
> 
> 赞同：1
> 
> 时间：2012-05-31T13:04:49.893
> 
> 标签：android, android-intent

我在将 var 传递给其他活动时遇到问题：这是我获取变量的地方：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.scelta);               
    // l'intent di questa activity
    Intent intent=getIntent();
    String pkg = getPackageName();
    //prendiamo i dati         
    nome=intent.getStringExtra(pkg+".myNome"); 
```

这是我改变活动的地方：

```
public void checkout (View v){
    // l'intent di questa activity
    Intent intent;
    String pkg=getPackageName();
    intent=new Intent(getApplicationContext(), checkout.class);
    //li reinseriamo nell'intent
    intent.putExtra(pkg+".myNome", nome);
    intent.putExtra(pkg+".myId", id);

    Log.d(TAG,"questo è il nome che va ad instargh:"+nome);
    startActivity(intent);
} 
```

感谢日志，我确信“nome”具有我想要的价值。这就是我选择“myNome”的地方

```
public class checkout<targhe> extends ListActivity
{String sId=null;
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.checkout); 
    Intent intent;
    String pkg=getPackageName();                    
    intent=new Intent(getApplicationContext(), scelta.class);
    nome=intent.getStringExtra(pkg+".myNome");
    Log.D(TAG,"name"+nome);} 
```

使用此日志“名称”始终为空。我不明白为什么我不能从意图中获取 myNome ：/

这不是所有代码，而是对我的问题很重要的部分。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:08:27.463

Carefully see your code

in checkout Activity you have written

```
nome=intent.getStringExtra(pkg+".myNome"); 
```

Replace above line of code with following

```
nome=getIntent().getStringExtra(pkg+".myNome"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:11:01.273

在`checkout`，尝试改变

```
Intent intent;                  
intent=new Intent(getApplicationContext(), scelta.class); 
```

至

```
Intent intent = getIntent(); 
```

看看这是否有效。

另外，你`Activity`的两个是在同一个包里吗？如果不是，`getPackageName()`两者都会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-08T10:46:35.217

您应该使用 getIntent().getStringExtra(pkg+".myNome");

# javascript - HTML5部分 touchstart touchmove touchend iOS

> ID：10834222
> 
> 赞同：1
> 
> 时间：2012-05-31T13:04:55.983
> 
> 标签：javascript, html, ios, dom-events, touch-event

请有人帮我解决这个问题：

```
touchStart = function (evt) {
    evt.preventDefault();
    $(this).addClass("touched");
};

touchEnd = function (evt) {
    evt.preventDefault();
    $(this).removeClass("touched");
};

s.ontouchstart = touchStart;
s.ontouchend = touchEnd;
s.ontouchmove = touchEnd; 
```

我有一个部分元素，由 JavaScript (ul > li > section) 动态生成。当我将 touchstart-touchmove-touchend 事件侦听器绑定到此部分元素时，它适用于 Android，但不适用于 iPad/iPod/iPhone。

我尝试使用`onclick="void(0)"`属性生成它，它使部分元素像可点击元素一样“交互”，但它仍然什么都不做。

它在各个方面都适用于 Android，但这种蔬菜现在对我来说似乎有点消耗... =)

提前致谢！=)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T15:28:24.553

没关系，用 jQuery 得到它。这样它到处运行。

```
$(s).bind("touchstart mousedown", function (e) {
    console.log(e.type); // to get the name of the event
}).bind("touchmove mousemove", function (e) {
    // ...
}).bind("touchend mouseup", function (e) {
    // ...
}); 
```

# wpf - 调整子项大小的 WPF 容器

> ID：10834234
> 
> 赞同：1
> 
> 时间：2012-05-31T13:05:14.073
> 
> 标签：wpf, containers, sizing

我需要找到一个 WPF 容器控件，当以固定大小布置时，可以充分调整子控件的大小，以便在容器中创建/添加新项目时减小每个子控件的大小。

所以假设这个控件会有一些像子控件一样的磁贴，假设在某一时刻我的容器有 4 个磁贴 - 16X16 填充整个控件。当我添加下一行图块时，我希望现有的 4 个图块缩小到 12X12，我不希望容器的大小可以容纳，因为我不想达到我的用户滚动的地步穿过容器。

请让我知道是否有人有任何想法......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:13:47.093

我想不出任何方法来使用库存面板，但是编写自己的面板以以最佳网格大小排列会非常简单。也许您可以子类`UniformGrid`化以在添加子项时将行/列设置为适当的值。

一旦你有了它，你就可以把整个东西粘在一个`ViewBox`自动缩放的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:14:19.447

像这样的东西可能会起作用

```
<ItemsControl >
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid  />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <Grid Width="50" Height="70" Background="Red" />
    <Grid Width="50" Height="70" Background="Orange" />
    <Grid Width="50" Height="70" Background="Blue" />
    <Grid Width="50" Height="70" Background="Green" />
    <Grid Width="50" Height="70" Background="Yellow" />
    <Grid Width="50" Height="70" Background="Brown" />
    <Grid Width="50" Height="70" Background="Violet" />
    <Grid Width="50" Height="70" Background="AntiqueWhite" />
    <Grid Width="50" Height="70" Background="DarkGoldenrod" />
    <Grid Width="50" Height="70" Background="Firebrick" />
    <Grid Width="50" Height="70" Background="Thistle" />
</ItemsControl> 
```

# django - Django 同步数据库和迁移

> ID：10834237
> 
> 赞同：14
> 
> 时间：2012-05-31T13:05:22.087
> 
> 标签：django, django-south, syncdb

我正在将 django 网站从一台服务器移动到另一台服务器，我尝试同步数据库，所以我放了`python manage.py syncdb`，我得到了这个输出：

```
Syncing...
Creating tables ...
The following content types are stale and need to be deleted:

    orders | ordercontact

Any objects related to these content types by a foreign key will also
be deleted. Are you sure you want to delete these content types?
If you're unsure, answer 'no'.

    Type 'yes' to continue, or 'no' to cancel: no
Installing custom SQL ...
Installing indexes ...
No fixtures found.

Synced:
 > django.contrib.auth
 > django.contrib.contenttypes
 > django.contrib.sessions
 > django.contrib.sites
 > django.contrib.messages
 > django.contrib.admin
 > django.contrib.admindocs
 > django.contrib.markup
 > django.contrib.sitemaps
 > django.contrib.redirects
 > django_filters
 > freetext
 > sorl.thumbnail
 > django_extensions
 > south
 > currencies
 > pagination
 > tagging
 > honeypot
 > core
 > faq
 > logentry
 > menus
 > news
 > shop
 > shop.cart
 > shop.orders

Not synced (use migrations):
 - dbtemplates
 - contactform
 - links
 - media
 - pages
 - popularity
 - testimonials
 - shop.brands
 - shop.collections
 - shop.discount
 - shop.pricing
 - shop.product_types
 - shop.products
 - shop.shipping
 - shop.tax
(use ./manage.py migrate to migrate these) 
```

下一步是`python manage.py migrate`，这就是我所拥有的：

```
Running migrations for dbtemplates:
 - Migrating forwards to 0002_auto__del_unique_template_name.
 > dbtemplates:0001_initial
 ! Error found during real run of migration! Aborting.

 ! Since you have a database that does not support running
 ! schema-altering statements in transactions, we have had
 ! to leave it in an interim state between migrations.

! You *might* be able to recover with:   = DROP TABLE `django_template` CASCADE; []
   = DROP TABLE `django_template_sites` CASCADE; []

 ! The South developers regret this has happened, and would
 ! like to gently persuade you to consider a slightly
 ! easier-to-deal-with DBMS.
 ! NOTE: The error which caused the migration to fail is further up.
Traceback (most recent call last):
  File "manage.py", line 13, in <module>
    execute_manager(settings)
  File "/usr/lib/python2.6/site-packages/django/core/management/__init__.py", line 438, in execute_manager
    utility.execute()
  File "/usr/lib/python2.6/site-packages/django/core/management/__init__.py", line 379, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/usr/lib/python2.6/site-packages/django/core/management/base.py", line 191, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/usr/lib/python2.6/site-packages/django/core/management/base.py", line 220, in execute
    output = self.handle(*args, **options)
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/management/commands/migrate.py", line 105, in handle
    ignore_ghosts = ignore_ghosts,
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/migration/__init__.py", line 191, in migrate_app
    success = migrator.migrate_many(target, workplan, database)
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/migration/migrators.py", line 221, in migrate_many
    result = migrator.__class__.migrate_many(migrator, target, migrations, database)
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/migration/migrators.py", line 292, in migrate_many
    result = self.migrate(migration, database)
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/migration/migrators.py", line 125, in migrate
    result = self.run(migration)
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/migration/migrators.py", line 99, in run
    return self.run_migration(migration)
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/migration/migrators.py", line 81, in run_migration
    migration_function()
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/migration/migrators.py", line 57, in <lambda>
    return (lambda: direction(orm))
  File "/usr/lib/python2.6/site-packages/django_dbtemplates-1.3-py2.6.egg/dbtemplates/migrations/0001_initial.py", line 18, in forwards
    ('last_changed', self.gf('django.db.models.fields.DateTimeField')(default=datetime.datetime.now)),
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/db/generic.py", line 226, in create_table
    ', '.join([col for col in columns if col]),
  File "/usr/lib/python2.6/site-packages/South-0.7.3-py2.6.egg/south/db/generic.py", line 150, in execute
    cursor.execute(sql, params)
  File "/usr/lib/python2.6/site-packages/django/db/backends/util.py", line 34, in execute
    return self.cursor.execute(sql, params)
  File "/usr/lib/python2.6/site-packages/django/db/backends/mysql/base.py", line 86, in execute
    return self.cursor.execute(query, args)
  File "/usr/lib64/python2.6/site-packages/MySQLdb/cursors.py", line 174, in execute
    self.errorhandler(self, exc, value)
  File "/usr/lib64/python2.6/site-packages/MySQLdb/connections.py", line 36, in defaulterrorhandler
    raise errorclass, errorvalue
_mysql_exceptions.OperationalError: (1050, "Table 'django_template' already exists") 
```

我的问题是我需要从 MySQL`django_template`中删除表吗？`django_template_sites`两张桌子都是空的。

我在 CentOS 6、django 1.3.1、python 2.6 上运行

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-06T14:52:37.377

尝试

```
syncdb --all 
```

因为我有同样的问题，而且 --all 都可以。

我在这里找到了这个解决方案[https://github.com/divio/django-cms/issues/1343](https://github.com/divio/django-cms/issues/1343)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-28T09:11:09.787

这可能会帮助其他人解决同样的问题。

由于现在要创建您的数据库并且不需要迁移，因此在完成 Ahmad 提到的操作之后，还要进行假迁移，因此南会将所有迁移脚本标记为已运行。简而言之，运行这些。

```
syncdb --all
migrate --fake 
```

请注意，如果您的数据库中已有数据，则不应使用 syncdb --all。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-20T00:38:24.260

```
$python manage.py syncdb --migrate 
```

这迁移了必须迁移的内容

*为我工作（django 1.4）*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T13:08:04.220

另一种选择是将第一次迁移标记为已完成：

```
./manage.py migrate dbtemplates --fake 0001 
```

似乎您的数据库中已经有您想要创建的模式。

# sql-server-ce - 带有 SQL Server CE 的 log4net 不将数据保存到表中

> ID：10834238
> 
> 赞同：2
> 
> 时间：2012-05-31T13:05:23.023
> 
> 标签：sql-server-ce, log4net, log4net-configuration, .net-cf-3.5, windows-embedded-compact

**编辑 2**

我现在发现的很奇怪。当我在 Visual Studio 中打开非托管异常时，尝试时出现格式异常

```
log4net.Config.XmlConfigurator.Configure(new System.Uri(config)); 
```

我在插入中添加了一些参数并添加了更多值

```
 <commandText
              value="INSERT INTO [Log] 
              ([Message], [Name]) 
              VALUES 
              (@log_level, @message)" />

  <parameter>
    <parameterName value="@log_level" />
    <dbType value="String" />
    <size value="50" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%level" />
    </layout>
  </parameter>

  <parameter>
    <parameterName value="@message" />
    <dbType value="String" />
    <size value="100" />
    <layout type="log4net.Layout.PatternLayout">
      <conversionPattern value="%message" />
    </layout>
  </parameter> 
```

如果我在参数部分中删除我的 dbType 标记，它似乎在我的代码中会更长一些。但是，然后在尝试记录时出现格式异常。如果我删除其中一个参数（所以我只插入一个值）它会记录下来。我曾尝试一次只插入一个值（消息或 log_level），它工作正常，但一起中断。

如果我只在我的 config-sql 中直接插入 dummy-data，则它适用于这两个值。所以 log4Net 似乎很奇怪。

任何 idvise 不胜感激！

**结束编辑 2**

**编辑**

经过一些试验和错误并得到帮助后，我将缓冲区大小从 100 更改为 0。纠正 SDF 文件似乎有些问题。

在我的虚拟机上重新启动设备后，当我的 sed 文件路径错误时出现日志错误。但是，当我得到正确的结果时，当我尝试登录文件时出现错误，说明“与设备的远程连接已丢失。请验证设备连接并重新启动调试”

**结束编辑**

我正在尝试将一些内容记录到我的 WindowsCE 设备上的 SQL Server CE 数据库中。当我登录到一个文件时，一切都按原样进行，但是使用`AdoNetAppender`它时它将不起作用。

我的 log4net.config 看起来像这样：

```
<appender name="SQLCEAppender" type="log4net.Appender.AdoNetAppender">
  <bufferSize value="0"/>
  <connectionType value="System.Data.SqlServerCe.SqlCeConnection, System.Data.SqlServerCe" />
  <commandText
    value="INSERT INTO [Loging2] 
    ([Val]) 
    VALUES 
    ('1')" />
  <filter type="log4net.Filter.LevelRangeFilter">
    <acceptOnMatch value="true" />
    <levelMin value="INFO" />
    <levelMax value="INFO" />
  </filter>
</appender>

<!-- Define some output appenders -->
<appender name="RollingLogFileAppender" type="log4net.Appender.RollingFileAppender">
  <file value="Log.log" />
  <appendToFile value="true" />
  <maxSizeRollBackups value="10" />
  <maximumFileSize value="100KB" />
  <rollingStyle value="Size" />
  <staticLogFileName value="true" />
  <layout type="log4net.Layout.PatternLayout">
    <header type="log4net.Util.PatternString">
      <conversionPattern value="[Header %property{windowsversion}]%newline" />
    </header>
    <footer value="[Footer]&#13;&#10;" />
    <conversionPattern value="%date [%thread] %-5level %logger [%ndc] - %message%newline" />
  </layout>
  <filter type="log4net.Filter.LevelRangeFilter">
    <acceptOnMatch value="true" />
    <levelMin value="INFO" />
    <levelMax value="INFO" />
  </filter>
</appender>
<root>
    <!--<level value="All" />-->
    <appender-ref ref="DebugAppender" />
    <appender-ref ref="RollingLogFileAppender" />
    <appender-ref ref="SQLCEAppender" />
</root> 
```

我试图只激活文件附加程序和/或 sqldatabase 附加程序，但没有结果。我还将我的 SQL 查询条带化到一个虚拟插入中，只是为了排除键/空值等等。

在我的`app.xaml.cs`（Silverlight 应用程序）中，我有此代码仅用于进行配置并设置`.sdf`文件的正确路径。

```
var codeBase = System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase;
var directory = Path.GetDirectoryName(codeBase);
var path = Path.Combine(directory, "log4Net.config");

log4net.Config.XmlConfigurator.Configure(new Uri(path));

var repo = LogManager.GetRepository();
var appender = repo.GetAppenders()
    .FirstOrDefault(x => x.Name.Equals("SQLCEAppender")) as AdoNetAppender;

appender.ConnectionString = "Data Source=" + Path.Combine(directory, "Log.sdf;Persist Security Info=False;");
appender.ActivateOptions();

ILog log = LogManager.GetLogger(typeof (App));
log.Info("Starting application");
log.Debug("Printing debug"); 
```

我得到了一个很好的调试日志（我的配置中有更多的附加程序）和我的文件。当我查看 appender 对象时，它说它对数据库是开放的，如果我将`.sdf`文件的路径修改为错误，则 appender 并不是说​​连接正常。

我错过了什么？我还设置了`System.Data.SqlServerCe.dll`要复制的，我可以在设备上看到 dll。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:18:02.497

您将 bufferSize 设置为 100。您记录的字符数不要超过 bufferSize。尝试将其设置为0并测试它是否有效。

# jquery - 在 jQuery 中遍历 JSON ......再来一次

> ID：10834245
> 
> 赞同：0
> 
> 时间：2012-05-31T13:05:53.450
> 
> 标签：jquery, json, getjson, loops

这是我的json代码...

```
{
    "login":{
        // ..
    },
    "setup":{
        //...
   },
   "default":{
      // ...
   },
   "custom":{
      "logo":"images\/uploaded\/cne.jpg",
      "tabs":[
         "home",
         "green facts",
         "natural gas"
      ]
   }
} 
```

现在这是我的 jQuery ......

```
function refreshTabs() {
    $.getJSON('admin/settings/config.json', function(data) {
        $('nav ul').empty();    
        $.each(data.custom.tabs, function(i, tab) {
            $('nav ul').append(
            '<li><a href="'+tab.replace(" ", "-")+'.php">'+tab.toUpperCase()+'</a></li>'
            );
        });
    });
} 
```

我必须遍历这个错误，因为返回的是“默认”对象中的选项卡......昨天工作正常，但今天似乎没有工作，不确定我到底改变了什么，但代码应该工作不应该吗？我需要返回“自定义”对象中的选项卡。什么是交易？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:30:35.890

正如之前有人发布的那样，由于某种原因，他们删除了他们的答案。它有效，所以我现在发布它。

```
function refreshTabs() {
    $.getJSON('admin/settings/config.json', function(data) {
        var count = data.custom.tabs.length;
        $('nav ul').empty();    
        for(var i = 0; i < count; i++){
            $('nav ul').append(
            '<li><a href="'+data.custom.tabs[i].replace(" ", "-")+'.php">'+data.custom.tabs[i].toUpperCase()+'</a></li>'
            );
        }
    });
} 
```

# twitter - 带有 Backbone js 的 Twitter

> ID：10834256
> 
> 赞同：0
> 
> 时间：2012-05-31T13:06:36.217
> 
> 标签：twitter, backbone.js

我正在尝试使用 Backbone js 实现 Twitter（尽可能简单）。
有人知道 twitter 模型应该是怎样的吗？

我认为它是这样的。

```
var tweetModel = Backbone.Model.extend({
    default:{           
        screenName  : 'ScName',
        tweets      : [],
        followers   : []     //These ppl shd see the tweets by him
    }
}); 
```

但是在这里，应该绑定到哪个事物视图？
如果我们也将推文作为一个单独的集合，如何通知您关注的人的推文？

谢谢

# opencv - cvReprojectImageTo3D 和 CV_32FC3 的问题

> ID：10834258
> 
> 赞同：0
> 
> 时间：2012-05-31T13:06:41.030
> 
> 标签：opencv, camera-calibration, stereo-3d, 3d-reconstruction, disparity-mapping

我需要你的帮助。我已经使用我的立体声对实现了立体声校准和校正。我有一个非常合理的视差图像。我面临的问题是cvReprojectImageTo3D。我使用了stereobM。并以正确的方式纠正。声明如下

```
 CvMat* disp = cvCreateMat( imageSize.height, imageSize.width, CV_16S );
 CvMat* vdisp = cvCreateMat( imageSize.height,imageSize.width, CV_8U );
 CvMat* Image3D = cvCreateMat(imageSize.height, imageSize.width, CV_32FC3); 
```

disp 是为立体对获得的视差图像。当我运行 Image3D 的 showimage 命令时，我获得了彩色分割。我的疑问是为什么会这样。我附上我的结果
照片的链接如下

[https://plus.google.com/photos/110965556771924534380/albums/5745356738809417329/5748680803335389906](https://plus.google.com/photos/110965556771924534380/albums/5745356738809417329/5748680803335389906)

我的另一个疑问是这个 image3D 是如何存储的。CV_32FC3 是否意味着第一个通道给出 x 值第二个给出 y 而第三个给出 z 或排序或有任何其他表示..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:35:53.560

是的，“输出与 disparity 大小相同的 3 通道浮点图像。_3dImage(x,y) 的每个元素都包含根据视差图计算的点 (x,y) 的 3D 坐标。”

所以它是每个像素坐标处的浮点 x,y,z

见[http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html](http://docs.opencv.org/modules/calib3d/doc/camera_calibration_and_3d_reconstruction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T20:37:41.623

你尝试过类似的东西吗

cvSave("depthmeasure.txt", Image3D);

# java - 詹金斯和Maven的区别

> ID：10834262
> 
> 赞同：66
> 
> 时间：2012-05-31T13:06:50.640
> 
> 标签：java, maven, jenkins

Maven 和 Jenkins 有什么区别？

两者都支持 JUnit 的自动构建和自动执行。

如果是这样，它们是互补的，还是相互排斥的？什么时候应该使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-05-31T13:21:23.737

Maven 正在构建工具/环境。Jenkins 是一个 CI（持续集成）工具。

Maven 更像是 Ant 的替代品。

1.  它通过[插件](https://maven.apache.org/plugins/)帮助构建项目，例如构建和版本控制、JUnit 测试等...
2.  它管理项目的[依赖关系](https://repo1.maven.org/maven2/)。您可以在 pom.xml 文件中定义项目应该如何构建（插件），以及需要哪些库（依赖项）。

Jenkins 作为一个智能作业调度程序，不能帮助您完成版本控制或 JUnit 测试等任务，但是它可以通过调用项目中的 pom.xml 文件间接帮助您完成所有这些工作。Jenkins 让您有权决定何时调用 pom.xml 文件，具体取决于调用的条件以及**您想要对结果执行的操作。**并且 Jenkins 可以监听不同的事件，例如 svn commit、当前时间是午夜等。

这是一个强大的想法。例如，您可以要求 Jenkins 在提交新代码时触发构建或运行所有 JUnit 测试，然后，如果单元测试通过，则在目标机器上部署。或在午夜安排繁重的任务，例如单元测试。这是自动部署或 AKA 持续集成的基本思想。如果您愿意，可以简称为 CI。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-31T13:10:00.087

Maven 是管理依赖项和应用程序生命周期的构建工具。它还有一个插件设计，允许您将其他任务添加到标准编译/测试/包/安装/部署任务。

Jenkins 是一个持续集成套件，它可以从存储库中检查您的代码、构建和打包它，然后将其转储到服务器上以便您可以对其进行测试——所有操作都无需干预。它可以使用 Maven 或 Ant 作为其构建工具。

综上所述，Jenkins 可以使用 Maven 作为其持续集成的构建工具。如果你选择不做 CI，你可以在没有 Jenkins 的情况下使用 Maven。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-14T11:16:10.843

[Jenkins Maven 插件 wiki 页面](http://evgeny-goldin.com/wiki/Jenkins-maven-plugin)的第一段解释了 Jenkins 和 Maven 之间的交互：

> “当 Jenkins 作业很多时，管理 Jenkins 作业并不容易，特别是如果某些参数在许多作业中应该相同。“jenkins-maven-plugin”允许生成 Jenkins 作业，每个作业一个“config.xml”，从一个简单的Maven POM。这样我们可以将所有 Jenkins 作业控制在一个地方，在它们之间重用任意数量的配置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-05T10:04:26.410

Maven是一个构建工具，简单来说就是ant的继承者。它有助于构建和版本控制。

然而 Jenkins 是持续集成系统，在 maven 中用于构建。Jenkins 可用于自动化部署过程。每当提交新代码时，自动运行所有 Junit 测试用例，如果它们通过，则将项目打包并部署到特定位置。

# javascript - 如何解析 JSON 对象中的 JSON 字符串

> ID：10834263
> 
> 赞同：0
> 
> 时间：2012-05-31T13:07:01.990
> 
> 标签：javascript, json

JSON对象中有一个JSON字符串

```
{
 "abc": "{\n  \"_count\": 10,\n  \"_start\": 0,\n  \"_total\": 60\n }",
"success": true
} 
```

我想`abc`在 javascript 中获取作为 JSON 对象的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T15:35:18.313

你会使用这样的东西：

```
var obj = JSON.parse(JSON.parse(the_string).abc); 
```

注意：您的 JSON 无效。请改正。它应该有点像下面：

```
{
 "abc": "{\n  \"_count\": 10,\n  \"_start\": 0,\n  \"_total\": 60\n}",
"success": true
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T16:53:03.967

如果您的对象在一个名为`obj`then的变量中，`obj.abc`则将返回字符串值。由于这是一个对 JavaScript 对象进行编码的 JSON 字符串，因此您需要使用 JSON.parse 对其进行转换：`var abc = JSON.parse (obj.abc);`。您现在可以访问字段vaue`abc._count`和.`abc._start``abc._total`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-23T13:16:53.920

你可以做这样的事情

```
var json = '{"abc": {"_count": 10,"_start": 0, "_total": 60 },"success": true}';
var obj = JSON.parse(json);
console.log(obj.success);
console.log(obj.abc['_count']); 
```

# javascript - jQuery.parseJSON 无法解析序列化的 C# 字典

> ID：10834266
> 
> 赞同：3
> 
> 时间：2012-05-31T13:07:13.300
> 
> 标签：javascript, jquery, json, serialization

我正在使用[本教程](http://weblogs.asp.net/hajan/archive/2010/07/23/javascriptserializer-dictionary-to-json-serialization-and-deserialization.aspx)来序列化 C# 字典。C# 字典被序列化为字符串。这些`@Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ElementDivIDs))`作品就像一个魅力。这是我得到的输出：

```
 var jsonString = {"9":["ele9-tabs-attr9","ele9-tabs-attr48"],"10":["ele10-tabs-attr10"],"11":["ele11-tabs-attr11"],"12":["ele12-tabs-attr12","ele12-tabs-attr49"],"13":["ele13-tabs-attr13"],"14":["ele14-tabs-attr14"]} 
```

我想将其转换为 Javascript 关联数组。但是对**jquery.parseJSON**的调用返回 NULL。

`var dictionaryOfOtherDivs = jQuery.parseJSON( jsonString );`

`dictionaryOfOtherDivs`在此之后为空。

这是我的代码：

```
<script type="text/javascript">
$(document).ready(function () {
     var jsonString = @Html.Raw(new System.Web.Script.Serialization.JavaScriptSerializer().Serialize(ElementDivIDs))
     console.log(jsonString); 
     var dictionaryOfOtherDivs  = jQuery.parseJSON( jsonString ); 
     for(var dictKey in dictionaryOfOtherDivs)
     { 
        console.log("key = " + dictKey + ", value = " + dictionaryOfOtherDivs[dictKey]); 
     }
     //Do some more things
});
</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:09:37.973

那不是 JSON 字符串；那是一个普通的对象文字。

你不需要解析它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:11:24.363

`jQuery.parseJSON`接受一个*字符串*并输出一个*对象*。但是，您决定将 JSON 本身直接注入脚本中，因此 JavaScript 引擎已经将其解析为对象字面量，就好像您自己将整个内容编写为常规代码一样。

简单地说，你已经有了一个解析的对象字面量，你不需要再做任何解析了。

# c# - 读取数据集中的特定列

> ID：10834269
> 
> 赞同：0
> 
> 时间：2012-05-31T13:07:31.107
> 
> 标签：c#, sql

我有一个问题，如何读取特定的列表单数据集....

我有这个代码：

```
cmd_line.CommandText = "SELECT IDOC_NUM, SEG_NUM FROM AGR3PL_LINE WHERE IDOC_NUM = '" + Lidoc_num + "'";

OracleDataAdapter ora_adapter_li = new OracleDataAdapter(cmd_line);
DataSet ds_idoc_li = new DataSet("AGR3PL_LINE");
ora_adapter_li.Fill(ds_idoc_li, "AGR3PL_LINE");

if (ds_idoc_li.Tables[0].Rows.Count == 0)
{
   SEG_NUM_L = 1;
}
else
{
   int var = Convert.ToInt32(ds_idoc_li.Tables["AGR3PL_LINE"]["SEG_NUM"]);
   SEG_NUM_L = var;
   SEG_NUM_L++;
} 
```

首先我选择提取`SEG_NUM`变量，然后检查数据集中是否有任何行，如果没有设置`SEG_NUM = 1`，否则如果有任何数据提取`SEG_NUM`，读取它并将其递增 1。

我对这部分有疑问：

int var = Convert.ToInt32(ds_idoc_li.Tables["AGR3PL_LINE"].Rows[0]["SEG_NUM"]);

如果我有 2 个条目，它工作正常，但如果有超过 2 个条目，我会收到 3 的错误。条目：位置 0 处没有行，计数器总是递增 2。

这部分不对

```
 Convert.ToInt32(ds_idoc_li.Tables["AGR3PL_LINE"].Rows[0]["SEG_NUM"]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:21:30.757

您可以从 as 的[Rows 集合](http://msdn.microsoft.com/en-us/library/system.data.datatable.rows.aspx)中访问[列](http://msdn.microsoft.com/en-us/library/system.data.datatable.columns.aspx)值：`DataTable`

```
Convert.ToInt32(ds_idoc_li.Tables["AGR3PL_LINE"].Rows[indexofRow][columnName or Index]); 
```

试试这个：

```
if (ds_idoc_li.Tables[0].Rows.Count == 0)
{
   SEG_NUM_L = 1;
}
else
{
  foreach(DataRow row in ds_idoc_li.Tables["AGR3PL_LINE"].Rows)
  {
   int var = Convert.ToInt32(row["SEG_NUM"]);
   SEG_NUM_L = var;
   }
   SEG_NUM_L++;  
} 
```

# arrays - Pascal中的记录数组和记录数组

> ID：10834275
> 
> 赞同：1
> 
> 时间：2012-05-31T13:07:59.477
> 
> 标签：arrays, record, pascal

我在创建包含记录数组的记录数组时遇到问题。

```
type
    SubjectsRec = array of record
        subjectName : String;
        grade : String;
        effort : Integer;
    end;
    TFileRec = array of record
        examinee : String;
        theirSubjects: array of SubjectsRec;
    end;

var
    tfRec: TFileRec;
    i: Integer;
begin
    setLength(tfRec,10);
    for i:= 0 to 9 do
    begin
       setLength(tfRec[i].theirSubjects,10);
    end; 
```

在此之后，我希望通过这样做来分配值：

```
tfRec[0].theirSubjects[0].subjectName:= "Mathematics"; 
```

但是，我得到：

> 错误：非法限定符

尝试编译时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:40:47.437

你声明`SubjectsRec`为一个记录数组，然后将该`TheirSubjects`字段声明为一个数组`SubjectRecs`——也`TheirSubjects`就是一个记录数组的数组。

有两种解决方案：

声明`TheirSubjects`为具有类型`SubjectsRec`，而不是`array of subjectsRec`：

```
TFileRec = array of record
  examinee : string;
  theirSubjects: SubjectsRec;
end; 
```

或声明`SubjectsRec`为记录，而不是数组。这是我最喜欢的一个：

```
SubjectsRec = record
  subjectName : String;
  grade : String;
  effort : Integer;
end;
TFileRec = array of record
  examinee : string;
  theirSubjects: array of SubjectsRec;
end; 
```

此外，Pascal 中的字符串由单引号分隔，因此您应该替换`"Mathematics"`为`'Mathematics'`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T01:55:38.487

我认为你应该改变这个：

```
tfRec[0].theirSubjects[0].subjectName:= "Mathematics"; 
```

至

```
tfRec[0].theirSubjects[0].subjectName:= 'Mathematics'; 
```

# vb.net - Silverlight 服务回调返回 null

> ID：10834276
> 
> 赞同：0
> 
> 时间：2012-05-31T13:08:02.660
> 
> 标签：vb.net, silverlight, silverlight-4.0, vb.net-2010

我正在尝试使用以下方法获取数据，但我得到空响应并且无法弄清楚原因。我只是在尝试使用 silverlight 的 wcf 服务的不同方式，但我不明白我应该理解的东西。我希望有人能看到这里出了什么问题:)

这是我的服务代理类：

```
Private Shared m_service As New DataServiceClient

    Public Shared Sub GetSiteLogin(ByVal user As String, ByVal pass As String, callback As System.EventHandler(Of GetSiteLoginCompletedEventArgs))
            AddHandler m_service.GetSiteLoginCompleted, callback
            m_service.GetSiteLoginAsync(user, pass)
        End Sub 
```

这是电话：

```
Dim em As New DataService.Employee
                Dim pass As String = CustomSecurity.Hash.GetSHA1Hash(txtPassword.Password)

                ' Try to get the employee with the login information
                SettingsServiceAgent.GetSiteLogin(txtUsername.Text, pass, Sub(s, r) em = r.Result) 
```

员工对象将保持为空。如果我中断服务调用并执行代码，它会从数据库中找到正确的记录，并且返回语句显示一个具有正确数据的对象，但 silverlight 端的员工对象仍将保持为空。

请提供一些帮助:)谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T12:33:29.977

艰难的我会回答我自己的问题。我发现该服务正在向我返回一个值，但我未能完全理解异步调用的本质。我想要完成的是感觉同步的编码，而实际上是异步的，如果这有意义的话。因此，员工对象为空，因为我不知道该服务已在代理类中返回了某些内容。我仍然需要一种方法来告诉我何时可以使用员工对象。这必须是某种事件，可能是 PropertyChanged 或自定义事件，但无论如何我都需要停止代码，等待员工获得我需要的值，然后继续。不知道如何在不跳转到事件处理程序等的情况下在同一代码块中完成此操作......

感谢我阅读的任何想法或链接。

# jquery - 如何获取数组的第一个元素 - jQuery

> ID：10834287
> 
> 赞同：3
> 
> 时间：2012-05-31T13:08:23.963
> 
> 标签：jquery, arrays, multidimensional-array

我有一个多维，我想获得第二维的第一个元素。

```
myArray[0] 
```

是我的二维。我无法使用

```
myArray[0][0] 
```

因为我不知道第二个维度的密钥（key = userID）。知道如何在不知道密钥的情况下获得第一个元素吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:09:38.000

对象属性（JavaScript 没有真正的多维或关联数组）没有定义的顺序，只能通过它们的字符串键访问。

使用 a 遍历键的`for ( in )`顺序是特定于实现的，因为规范中没有指定顺序。例如，无论添加什么顺序，Chrome 都会对数字键进行排序（作为 V8 的数组相关优化）。

如果你决定不想听我的，想要过着危险的生活，你可以根据 JavaScript 实现来获取第一个属性，使用`var worksExceptWhenItDoesnt = myArray[Object.keys(myArray)[0]]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T15:13:27.957

`Object.keys()`不幸的是，它不是跨浏览器。为了安全起见，请执行以下操作：

```
var firstKey="";
for(firstKey in object) break; 
```

就是这样 - firstKey 具有 firstKey 值。所以：

```
var firstKey="";
for(firstKey in myArray[0]) break; 
```

然后通过以下方式访问：

```
myArray[0][firstKey] 
```

# blackberry - 黑莓地图点击事件

> ID：10834289
> 
> 赞同：2
> 
> 时间：2012-05-31T13:08:25.183
> 
> 标签：blackberry, map

我是黑莓新手。我正在研究黑莓地图。我必须在地图字段上动态标记地图点。

问题是当用户单击地图点时，应该会启动一个新屏幕。

我可以为这个地图点设置一个更改监听器吗？当用户点击一个新屏幕时应该推送

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T07:18:42.837

如果您设法捕获点击（您可以通过多种方式做到这一点，一种是覆盖`navigationClick`），那么您可以使用将字段坐标转换为世界坐标`MapField.convertFieldToWorld`。然后检查是否符合您的任何观点。

检查文档以获取[`MapField`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/lbs/MapField.html). 还可以查看`EmbeddedMapDemo`JDK 中包含的内容。

# iphone - NSURLRequest 不工作

> ID：10834297
> 
> 赞同：0
> 
> 时间：2012-05-31T13:08:37.270
> 
> 标签：iphone, ios

我正在使用 php 和 mysql 数据库开发 iOS Web 应用程序，我的问题是 nsurl 请求获取 php 文件的值没有响应并且不起作用但是，我在命令提示符 url 中打印并复制 url 粘贴并成功更新到浏览器。但是，没有更新，也没有响应 nsurl 请求我的代码有什么问题？谁能帮助我！

```
 NSURL *url = [[NSURL alloc] initWithString:[NSString stringWithFormat:@"http://192.168.1.20:90/inkfreakz/update.php?fname=%@&lname=%@&gender=%@&dob=%@&uname=%@&email=%@&city=%@&zcode=%@&state=%@&count=%@&tattoo=%@&aboutme=%@&id=%@",txt_first.text,txt_last.text,txt_gender.text,txt_birth.text,txt_user.text,txt_email.text,txt_city.text,txt_zip.text,txt_state.text,txt_country.text,txt_tatoo.text,txt_about.text,[results objectAtIndex:13]]];
            NSLog(@"%@",[NSString stringWithFormat:@"http://192.168.1.20:90/inkfreakz/update.php?fname=%@&lname=%@&gender=%@&dob=%@&uname=%@&email=%@&city=%@&zcode=%@&state=%@&count=%@&tattoo=%@&aboutme=%@&id=%@",txt_first.text,txt_last.text,txt_gender.text,txt_birth.text,txt_user.text,txt_email.text,txt_city.text,txt_zip.text,txt_state.text,txt_country.text,txt_tatoo.text,txt_about.text,[results objectAtIndex:14]]);

            NSURLRequest *urlRequest = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:5];

            NSData *urlData;
            NSURLResponse *response;
            urlData = [NSURLConnection sendSynchronousRequest:urlRequest returningResponse:&response error:nil];
            NSString* newStr = [[NSString alloc] initWithData:urlData encoding:NSUTF8StringEncoding];

            if(newStr.length==0)
            {
                lbl_status.text=@"Can't Communicate with Server!";
                lbl_status.hidden=NO;
                [my_scroll_view setContentOffset:CGPointMake(0,0) animated:YES];
            }
            else {
                lbl_status.text=newStr;
                lbl_status.hidden=NO;
                [my_scroll_view setContentOffset:CGPointMake(0,0) animated:YES];
            } 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:37:03.280

我建议使用`– stringByAddingPercentEscapesUsingEncoding:`来构建您的 URL，因为它可能需要一些转义：

```
NSString* urlString = [NSString stringWithFormat:@"http://192.168.1.20:90/inkfreakz/update.php?fname=%@&lname=%@&gender=%@&dob=%@&uname=%@&email=%@&city=%@&zcode=%@&state=%@&count=%@&tattoo=%@&aboutme=%@&id=%@",txt_first.text,txt_last.text,txt_gender.text,txt_birth.text,txt_user.text,txt_email.text,txt_city.text,txt_zip.text,txt_state.text,txt_country.text,txt_tatoo.text,txt_about.text,[results objectAtIndex:13];

NSURL *url = [[NSURL alloc] initWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:39:02.673

试试下面的代码；

```
NSString *urlString = [@"your url addres as string" stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *myUrl = [NSURL URLWithString:urlString];
NSURLRequest *request = [NSURLRequest requestWithURL:myUrl]; 
```

如果您的网址有空格，这将起作用..或者您应该查看 NSString 函数。

# cocoa-touch - Why is there no queue in Cocoa?

> ID：10834299
> 
> 赞同：4
> 
> 时间：2012-05-31T13:08:44.167
> 
> 标签：cocoa-touch, cocoa, data-structures, queue

I recently found out that there is no queue built into Cocoa (Touch, in this case). Why not? A queue is one of the most fundamental data structures in computer programming.

I've seen some people suggesting the use of `NSMutableArray`, but this is extremely inefficient for pops/dequeues, because it requires removing the object at index 0\. That will shift all of the elements down (towards the now empty entry), thus taking O(n) time for each remove operation. Am I missing something or was there just no reason that queues were not added to Cocoa?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T13:13:51.227

> 我见过一些人建议使用`NSMutableArray`，但这对于弹出/出队来说效率极低，因为它需要删除索引 0 处的对象。这会将所有元素向下移动（朝向现在为空的条目），从而占用 O (n) 每次移除操作的时间。

这是不正确的。`NSMutableArray`非常有效地处理头部插入，并且可以用于许多不同的数据结构，包括队列和堆栈。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-31T14:06:15.590

Apple 将 CFTypes 作为 OpenSource 发布——它们是面向对象集合的核心数据类型，如 NSArray、NSDictionary、……（“*免费桥接*”）

因此，如果我们查看[CFArray.c](http://opensource.apple.com/source/CF/CF-476.19/CFArray.c)，我们只需查看 include 即可`#include "CFStorage.h"`。这必须是真正让数据感到痛苦的类型。

好的，看看[CFStorage.h](http://opensource.apple.com/source/CF/CF-476.19/CFStorage.h)，我们在它的评论中找到了这个

> CFStorage 使用平衡树来存储值，并且最适用于可能存储大量值（超过 100 字节的值）并进行大量编辑（插入和删除）的情况。
> 
> 获取一个项目是 O(log n)，尽管缓存最后一个结果通常会将其减少到一个恒定的时间。

**ergo**
名称“NS(Mutable)Array”并没有描述它是如何实现的，而是它在更高级别上是如何工作的。并且实现比数组所暗示的列表要复杂得多。

**注意**
我们不知道，如果苹果在进入封闭源代码时改变了 CFTypes，所以并不是所有的事情都可以通过查看 CFTypes 源代码来解释。

一些数字和图表：[http ://ridiculousfish.com/blog/posts/array.html](http://ridiculousfish.com/blog/posts/array.html)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-31T13:14:29.103

AFAIK NSMutableArray 在内部使用循环缓冲区，所以我认为它可以用于队列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T16:54:57.930

围绕 NSMutableArray 编写一个小包装器并将其用作队列并不难。苹果建议这样做。我有一个我在这里写的实现来做到这一点

[https://github.com/Machx/Zangetsu/blob/master/Source/CWQueue.m](https://github.com/Machx/Zangetsu/blob/master/Source/CWQueue.m)

至于为什么苹果决定不这样做。谁知道呢，这是 Foundation Framework 工程师的问题。

# c# - Webbrowser control throws exception when Form windowstate is minimized

> ID：10834300
> 
> 赞同：1
> 
> 时间：2012-05-31T13:08:45.140
> 
> 标签：c#, winforms, webbrowser-control

I am using WebBrowser control on a WinForm. When my form is minimized the control throws an exception,

> An outgoing call cannot be made since the application is dispatching an input-synchronous call. (Exception from HRESULT: 0x8001010D (RPC_E_CANTCALLOUT_ININPUTSYNCCALL))

I have stated windowstate as,

```
this.WindowState = FormWindowState.Minimized; 
```

Does anyone aware of this issue ?

Thanks in advance,
Vijay

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T13:05:20.527

您想从其他线程修改 UI 的地方使用调用方法

```
 if (control.InvokeRequired)
        { 
            control.Invoke( (MethodInvoker)( ()=> control.updatingfunction() ) ;

        }
        else
        {
            control.updatingfunction();
        } 
```

假设您想对其他线程隐藏一个面板（名为 panel1）。然后你的代码将是

```
 if (panel1.InvokeRequired)
        { 
            panel1.Invoke( (MethodInvoker)( ()=> panel1.Hide() )) ;

        }
        else
        {
            panel1.Hide();
        } 
```

# php - how to get associative indexes of an array which has a specific value

> ID：10834302
> 
> 赞同：0
> 
> 时间：2012-05-31T13:08:48.903
> 
> 标签：php, associative-array

```
 {
    [2012-05-23] => 1
    [2012-05-24] => 1
    [2012-05-25] => 1
    [2012-05-26] => 1
    [2012-05-27] => 1
    [2012-05-28] => 11
    [2012-05-29] => 11
    [2012-05-30] => 12
    } 
```

for example this is my array and i just want to get the indexes of array which has a value greater then 10

so in this case the answer must be sounded like that

```
 {
    [0] => 2012-05-28
    [1] => 2012-05-29
    [2] => 2012-05-30
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:14:49.397

这样的人！

```
$new_array = array();
foreach ($array as $r => $a)
{
    if ($a>10)
    $new_array[] = $r;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:12:19.367

```
$array=//Your array in original post.
$newarray=array();
foreach ($array as $key=>$val) {
    if ($key>10) {
        $newarray[]=$key;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:12:24.937

如果`$array`是您的第一个数组：

```
$new_array = array();
foreach($array as $key => $value) {
    if( $value > 10 ) {
        $new_array[] = $key;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:12:51.563

试试这个（假设数组 in`<pre>`被调用`$dates`）：

```
$result = array();
foreach($dates as $date => $value) {
    if($value > 10) $result[] = $date;
}

print_r($result); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T13:20:30.733

```
$testData = array ('2012-05-23' => 1,
                   '2012-05-24' => 1, 
                   '2012-05-25' => 1,
                   '2012-05-26' => 1, 
                   '2012-05-27' => 1, 
                   '2012-05-28' => 11, 
                   '2012-05-29' => 11, 
                   '2012-05-30' => 12,
                   );
$testNeedle = 10;

$result = array_filter($testData, 
                       function($arrayEntry) use ($testNeedle) {
                           return $arrayEntry > $testNeedle; 
                       }
);
$result = array_keys($result);

var_dump($result); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T13:21:50.837

这段代码将完成这项工作。

```
$array1 = array(
'2012-05-23' => 1,
'2012-05-24' => 1,
'2012-05-25' => 1,
'2012-05-26' => 1,
'2012-05-27' => 1,
'2012-05-28' => 11,
'2012-05-29' => 11,
'2012-05-30' => 12
);
$result = (array_keys(array_filter($array1, "select")));
function select($var)
{    return($var > 10);     } 
```

您还可以在空数组中使用带有 array_push 的 for 循环来跳过回调函数。

# sql - 在Oracle中的计数函数之前附加一个字符串

> ID：10834305
> 
> 赞同：2
> 
> 时间：2012-05-31T13:09:14.387
> 
> 标签：sql, oracle, count

我对以下查询有 2 个问题

1）我想在以下查询的输出之前附加“HDR”

```
select unique count(quote_id)
from    T_CONV 
```

我尝试了各种方法

```
select 'HDR'|| unique count(quote_id)
from    T_CONV

select 'HDR' + unique count(quote_id)
from    T_CONV 
```

但他们都没有工作

请让我知道该怎么做。

2）我还想确保 count 的输出应该在 HDR 之后立即开始，没有任何空格或制表符，因为我尝试了 RPAD 功能，但不适用于 count 功能。

高度赞赏帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:11:02.150

尝试

```
select concat('HDR', count(distinct quote_id)) 
from T_CONV 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:18:18.910

试试这个

```
select 'HDR' || count(quote_id)
from    T_CONV 
```

# javascript - 将 HTML 插入网页

> ID：10834313
> 
> 赞同：-1
> 
> 时间：2012-05-31T13:09:42.103
> 
> 标签：javascript, jquery, facebook-graph-api, firefox-addon, firefox-addon-sdk

我正在尝试将 Facebook SDK 和登录按钮注入网页，但它返回了一个我不明白的错误。我正在使用 Firefox Add-on Builder。**理想的解决方案是能够注入 HTML*文件*而不仅仅是代码，但我不知道该怎么做。**下面是相关代码`main.js`。我知道这是正确的：

```
var pageMod = require("page-mod");
pageMod.PageMod({
    include: "http://www.blogger.com/*",
    contentScriptFile: [self.data.url("jquery-latest.js"),
                        self.data.url("blogger.js")]
}); 
```

这是`blogger.js`：

```
$('body').prepend(
    '<div id="fb-root"></div>' +
    '<script>' +
    '  window.fbAsyncInit = function() {' +
    '    FB.init({' +
    '      appId      : "XXXXXXXXXXXXXXX", // App ID' +
    '      status     : true, // check login status' +
    '      cookie     : true, // enable cookies to allow the server to access the session' +
    '      xfbml      : true  // parse XFBML' +
    '    });' +
    '    // Additional initialization code here' +
    '  };' +
    '  // Load the SDK Asynchronously' +
    '  (function(d){' +
    '     var js, id = "facebook-jssdk", ref = d.getElementsByTagName("script")[0];' +
    '     if (d.getElementById(id)) {return;}' +
    '     js = d.createElement("script"); js.id = id; js.async = true;' +
    '     js.src = "//connect.facebook.net/en_US/all.js";' +
    '     ref.parentNode.insertBefore(js, ref);' +
    '   }(document));' 
    '$("button.blogg-button.blott-primary").click(function() {' +
    '   FB.login(function(response) {' +
    '      if (response.authResponse) {' +
    '          console.log("Welcome!  Fetching your information.... ");' +
    '          FB.api("/me", function(response) {' +
    '          console.log("Good to see you, " + response.name + ".");' +
    '      });' +
    '      } else {' +
    '          console.log("User cancelled login or did not fully authorize.");' +
    '      }' +
    '   }, {scope: "publish_actions,manage_pages"});' +
    '});' +
    '</script>'
    ) 
```

这是错误（来自 Firefox 错误控制台）：

```
Timestamp: 5/31/2012 8:53:28 AM
Error: An exception occurred.
Traceback (most recent call last):
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/addon-kit/lib/page-mod.js", line 195, in onRead
    self._createWorker(window);
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/addon-kit/lib/page-mod.js", line 203, in _createWorke
    onError: this._onUncaughtError
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/traits.js", line 110, in Trai
    return self.constructor.apply(self, arguments) || self._public;
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/content/worker.js", line 403, in Worke
    this._contentWorker = WorkerSandbox(this);
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/traits.js", line 110, in Trai
    return self.constructor.apply(self, arguments) || self._public;
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/content/worker.js", line 202, in WorkerSandbo
    this._importScripts.apply(this, contentScriptFile);
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/content/worker.js", line 260, in _importScript
    load(this._sandbox, String(uri));
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/sandbox.js", line 43, in loa
    return scriptLoader.loadSubScript(uri, sandbox, 'UTF-8');
SyntaxError: missing ) after argument list 
```

编辑：我忘记在行尾添加一个加号，但修复并没有解决问题。但是，错误代码已更改。

```
 '   }(document));' 
    '   }(document));' + 
```

新的错误代码：

```
Timestamp: 5/31/2012 9:12:06 AM
Error: An exception occurred.
Traceback (most recent call last):
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/addon-kit/lib/page-mod.js", line 195, in onRead
    self._createWorker(window);
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/addon-kit/lib/page-mod.js", line 203, in _createWorke
    onError: this._onUncaughtError
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/traits.js", line 110, in Trai
    return self.constructor.apply(self, arguments) || self._public;
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/content/worker.js", line 403, in Worke
    this._contentWorker = WorkerSandbox(this);
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/traits.js", line 110, in Trai
    return self.constructor.apply(self, arguments) || self._public;
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/content/worker.js", line 202, in WorkerSandbo
    this._importScripts.apply(this, contentScriptFile);
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/content/worker.js", line 260, in _importScript
    load(this._sandbox, String(uri));
  File "resource://jid0-nsaawinaml0b6pn0st2hc4vinxi-at-jetpack/api-utils/lib/sandbox.js", line 43, in loa
    return scriptLoader.loadSubScript(uri, sandbox, 'UTF-8');
SyntaxError: missing ; before statement 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:13:46.520

尝试打破`<script>`and `</script>`as`'<sc'+'ript>'`这样`'</sc'+'ript>'`它就不会认为脚本过早结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:16:37.753

好的，我修好了。我很愚蠢，我在修复代码中的错字后不小心将一些文本粘贴到文件中（参见编辑），这导致了语法错误。

# wpf - WPF添加样式资源而无需在后面的代码中键入

> ID：10834321
> 
> 赞同：11
> 
> 时间：2012-05-31T13:10:16.877
> 
> 标签：wpf

我正在从 WPF 应用程序背后的代码生成 xaml，并希望将样式添加到生成的 xaml。我正在使用资源字典来存储我的应用程序将访问的样式信息，并根据资源字典中的键应用于生成的 xaml 中的适当元素。现在我想将特定样式应用于生成的 xaml 中的所有文本框。我要做的是在没有键的资源字典中创建这种样式，我想将此样式资源添加到生成的 xaml 的资源中。我似乎找不到在没有密钥的情况下将特定资源添加到此生成的 xaml 的资源字典的方法。我的问题是，是否可以这样做，即将资源添加到用户控件（或窗口等）的资源字典中，而无需该资源的密钥？

例如，这是我要生成的 XAML：

```
<UserControl>
    <UserControl.Resources>
        <Style TargetType="{x:Type TextBox}">
            <!--The TextBox style-->
        </Style>
    </UserControl.Resources>
</UserControl> 
```

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-31T13:30:13.610

所以，我找到了一种方法来做到这一点。在添加到生成的 xaml 的资源而不是指定字符串键时，我使用了 typeof(TextBox) 并且这似乎有效。

```
UserControl.Resources.Add(typeof(TextBox), styleDictionary["TextBoxStyleKey"]); 
```

这导致：

```
<UserControl.Resources>
    <Style TargetType="TextBox" x:Key="{x:Type TextBox}">
        <!--The Style-->
    </Style>
</UserControl.Resources> 
```

有没有更好的方法（或任何其他方法）来做到这一点？

# module - 删除模块历史 CVS

> ID：10834324
> 
> 赞同：0
> 
> 时间：2012-05-31T13:10:34.797
> 
> 标签：module, cvs, history

我正在寻找一种方法来删除一个模块的完整历史记录。

我正在启动一个项目，并且已经有一个其他人创建的临时模块使用我应该用于该模块的名称。

存储库有一些我不想保留的测试提交和更改。

我希望能够完全删除这个模块及其所有历史记录，但保留其他模块及其历史记录。这是没得商量的！

PS：我知道没有人再使用 CVS，我们正在迁移到 DVCS，但同时我们需要让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T05:57:10.340

如果您绝对确定不再需要该模块，则可以从存储库中删除整个文件夹。如果您*确实*想保留信息，那么您只需重命名文件夹，您就可以使用这个新名称签出模块。

# c# - 如何正确使用实时优先级

> ID：10834329
> 
> 赞同：5
> 
> 时间：2012-05-31T13:11:04.460
> 
> 标签：c#, winforms, multithreading, real-time

我的问题可能不是关于实时处理，但话又说回来，它可能是。

我的应用程序有几个比 GUI 重要得多的线程，但是，我确实希望 GUI 至少可以使用。我不希望它一直被锁定，并且我确实想根据我正在执行的处理结果更新屏幕。

目前，我所有的基本项目都隔离在单独的线程中，我调用我的 GUI 的委托来显示结果。

我的 GUI 工作正常，但如果我更改选项卡或最小化/最大化它，已知会阻碍我的其他线程到无法在 0.1 秒的时间限制内执行操作的地步。

这就是我打电话给我的代表的方法：

```
delegate void FuncDelegate(ResultContainer Result);
FuncDelegate DelegatedDisplay= new FuncDelegate(DisplayResults);
//then later on
Invoke(DelegatedDisplay, Result); 
```

我的大多数关键进程都是在连续循环中运行的线程，从各种缓冲区（ArrayLists 和普通 Lists）中拉出和推入。

每次都会启动我的一个关键线程，使用：

```
Thread mythread = new Thread(new ThreadStart(ProcessResults));
mythread.Start(); 
```

我想这样做的原因，而不是仅仅让一个线程在循环中运行，从列表中提取，是我认为我的时钟时间用完的原因可能是我有一个轮询循环，我担心它会消耗太多资源（尽管每次民意调查结果为负时我都使用 Thread.Sleep(5)）。

每次我需要并发进程时启动一个新线程会花费我宝贵的时间吗？这应该是一个循环吗？我的循环应该受到责备吗？

我可以给一个线程比其他线程更高的优先级，还是使用 Thread.Sleep 是我唯一的选择？如果我确实分配了更高的线程优先级，我怎么能确定其他线程甚至可以生存？

为什么简单的表单事件会如此严重地阻碍我的其他线程？有没有办法给我的 GUI 线程一个分配的、更少的资源？如果其他线程的时钟时间用完，我可以使用 Thread.Sleep 以某种方式阻止 Form 事件吗？

没有回答我所有令人沮丧的问题，是否有某种线程分析器可以用来帮助解决我的问题？我尝试使用“托管堆栈资源管理器”，但不知何故，这并不总是显示我的应用程序有哪些线程。

在这件事上的任何帮助都会对我有很大帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:43:44.230

好吧，这是一个开始：

```
Invoke(DelegatedDisplay, Result); 
```

这意味着您正在使后台线程等到 UI 线程*实际执行*绘图操作，然后继续。从线程的角度来看，这是永恒的。您可能想要调查 UI 的异步更新：

```
BeginInvoke(DelegatedDisplay, Result); 
```

这相当于告诉 UI 线程“当你有机会时，执行这个绘图动作”，然后继续你正在做的工作。

不过，您应该知道，这可能会导致使用 不会发生的线程安全问题`Invoke`。例如，如果在`Result`UI 尝试绘制时后台线程仍在修改，您可能会遇到意外的竞争条件。

请参阅[Control.Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)与[Control.BeginInvoke](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T15:46:14.390

使用`Invoke`和`BeginInvoke`更新 UI 之类的编组技术是问题的一部分。事实上，我很少将封送操作用于 UI 和工作线程交互，因为它不是一个很好的解决方案。好吧，坦率地说，在这种性质的大多数情况下，它可能（并且通常是）最糟糕的解决方案。

我通常做的是让工作线程将其结果或进度发布到共享数据结构，并让 UI 线程使用`System.Windows.Forms.Timer`（或`DispatcherTimer`）在调整为最适合手头情况的时间间隔内对其进行轮询。

这是它可能的样子。

```
public class YourForm : Form
{
  private ConcurrentQueue<ResultContainer> results = new ConcurrentQueue<ResultContainer>();

  public UpdateTimer_Tick(object sender, EventArgs args)
  {
    // Limit the number of results to be processed on each cycle so that
    // UI does not stall for too long.
    int maximumResultsToProcessInThisBatch = 100;

    ResultContainer result;
    for (int i = 0; i < maximumResultsToProcessInThisBatch; i++)
    {
      if (!results.TryDequeue(out result)) break;
      UpdateUiControlsHere(result);
    }
  }

  private void WorkerThread()
  {
    while (true)
    {
      // Do work here.
      var result = new ResultContainer();
      result.Item1 = /* whatever */;
      result.Item2 = /* whatever */;
      // Now publish the result.
      results.Enqueue(result);
    }
  }
} 
```

问题是，人们已经被编程为自动使用`Invoke`或`BeginInvoke`更新 UI，以至于他们忽略了更好的解决方案。[这些编组技术已经到了适合货物崇拜编程](http://en.wikipedia.org/wiki/Cargo_cult_programming)领域的地步。关于这个话题，我可能听起来像是一个破纪录，因为我一直在撕扯它。我上面使用的技术具有以下优点。

*   它打破了编组操作强加的 UI 和工作线程之间的紧密耦合。
*   工作线程不必像`Invoke`.
*   UI 消息队列不会像`BeginInvoke`.
*   您可以在 UI 和工作线程上获得更多吞吐量。
*   UI 线程决定何时以及多久更新一次 UI 线程。
*   您不必使用`Invoke`or`BeginInvoke`调用乱扔代码（我的意思是字面意思）。
*   编组操作很昂贵。
*   代码最终看起来更优雅。

> 每次我需要并发进程时启动一个新线程会花费我宝贵的时间吗？这应该是一个循环吗？我的循环应该受到责备吗？

我会避免随意创建线程。如果你能保持线程在循环中运行会更好。

> 我可以给一个线程比其他线程更高的优先级，还是使用 Thread.Sleep 是我唯一的选择？如果我确实分配了更高的线程优先级，我怎么能确定其他线程甚至可以生存？

在这种情况下，为您的工作线程提供更高的优先级可能会有所帮助。`Thread.Sleep(5)`虽然不会睡 5 毫秒。它只是不那样工作。顺便说一句，您可以将一些特殊值传递给`Thread.Sleep`.

*   Thread.Sleep(0) 让位于任何处理器上具有相同或更高优先级的任何线程。
*   Thread.Sleep(1) 屈服于任何处理器上的任何线程。

> 为什么简单的表单事件会如此严重地阻碍我的其他线程？有没有办法给我的 GUI 线程一个分配的、更少的资源？如果其他线程的时钟时间用完，我可以使用 Thread.Sleep 以某种方式阻止 Form 事件吗？

这是因为您正在使用`Invoke`. 避免编组操作将有很大帮助，因为它可以解耦线程。不要`Thread.Sleep`在 UI 线程上使用。UI 线程*必须*保持畅通，才能正常工作。如果您使用我在上面提出的解决方案，那么限制 UI 线程会容易得多。

# javascript - Javascript 类中的静态变量

> ID：10834332
> 
> 赞同：7
> 
> 时间：2012-05-31T13:11:06.087
> 
> 标签：javascript, object, static-methods, static-members

是否有*正确*的方法来创建无论您创建多少次都不会更改的**私有**`new Obj`静态 javascript 变量（和函数） ？

这是我尝试过的，它似乎*有效*：

```
var ObjClass = (function(){

    var static_var = 0; //private static variable
    var static_fn = function(){ return static_var; }; //private static function

    return function(){
        ++static_var;
        var thisNumber = static_var;
        this.getThisNumber = function(){
             return thisNumber;
        }
        this.getStaticNumber = static_fn; //making static fn public
    }

})();

var obj1 = new ObjClass;
var obj2 = new ObjClass;
var obj3 = new ObjClass;

console.log(obj1.getThisNumber()); //output `1`
console.log(obj1.getStaticNumber()); //output `3`
console.log(obj2.getThisNumber()); //output `2`
console.log(obj2.getStaticNumber()); //output `3`
console.log(obj3.getThisNumber()); //output `3`
console.log(obj3.getStaticNumber()); //output `3`​ 
```

[演示](http://jsfiddle.net/maniator/YFmKm/)

还是有*其他* ***更好***的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:19:32.647

是的，这是创建私有静态变量的正确方法。

但是，我会`static_fn`区别对待。看来你希望它是公开的。

1.  它应该在您的“类”原型上，因为它不与私有实例变量交互
2.  它甚至根本不与实例交互。通常的做法是将这样的函数/变量放在“类”本身，即JS中的构造函数上。由于构造函数是一个`Function`对象，它可以像任何其他 js 对象一样使用属性进行扩展。

```
var ObjClass = (function closure(){

    var static_var = 0; //static private (scoped) variable
    function static_fn(){ return static_var; }; //static private (scoped) function

    function ObjClass() {
        var thisNumber = ++static_var; // private instance variable
        this.getThisNumber = function() { // public instance method
            return thisNumber; // "privileged" to access scoped instance variables
        };
    }
    ObjClass.getStaticNumber = static_fn; // make the static_fn public
    return ObjClass;
})();

var obj1 = new ObjClass;
var obj2 = new ObjClass;
console.log(ObjClass.getStaticNumber()); //output `2`
var obj3 = new ObjClass;
console.log(ObjClass.getStaticNumber()); //output `3`

console.log(obj1.getThisNumber()); //output `1`
console.log(obj2.getThisNumber()); //output `2`
console.log(obj3.getThisNumber()); //output `3` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:42:16.873

我以前使用这种简单的方法来创建静态变量，除了它们是私有的。

```
function MyClass() {

    var static = this.constructor.static = this.constructor.static || {
        var1: defValue,
        ...
    }

    static.var1 = ... ;
} 
```

即只是将静态变量存储为类的主要构造函数的属性。

# iis - 在 WIX 创建的安装程序期间禁止弹出命令窗口

> ID：10834335
> 
> 赞同：0
> 
> 时间：2012-05-31T13:11:16.880
> 
> 标签：iis, wix, window, command

我有在 IIS 中设置应用程序池的命令，在安装过程中，这会弹出命令窗口几秒钟，我不想显示。需要安静地执行它。

以下是用 wix 文件编写的命令。

```
CustomAction Id="XSTAppPool32" Return="check" Directory="TARGETDIR" ExeCommand="[SystemFolder]inetsrv\appcmd set apppool /apppool.name:"XSTAppPool" /managedPipelineMode:Classic /managedRuntimeVersion:v2.0" />

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:10:45.450

请参阅有关[Quite Execution Custom Actions](http://wix.sourceforge.net/manual-wix3/qtexec.htm)的 WiX 文档。您可以尝试以下代码段。您可能需要调整属性 *QXSTAppPool32_Cmd* 因为它包含您要运行的命令。我刚刚根据您的问题调整了 WiX 帮助中的示例，但我的语法可能并不完全正确。

```
<CustomAction Id="QXSTAppPool32_Cmd" Property="XSTAppPool32"
              Value="&quot;[SystemFolder]inetsrv\appcmd&quot; set apppool /apppool.name:&quot;XSTAppPool&quot; /managedPipelineMode:Classic  /managedRuntimeVersion:v2.0" Execute="immediate"/>
<CustomAction Id="XSTAppPool32" BinaryKey="WixCA" DllEntry="CAQuietExec"
              Execute="deferred" Return="check" Impersonate="no"/>
.
.
.
<InstallExecuteSequence>
    <Custom Action="XSTAppPool32_Cmd" After="CostFinalize"/>
    <Custom Action="XSTAppPool32" After="TheActionYouWantItAfter"/>
</InstallExecuteSequence> 
```

# inversion-of-control - 带有asp.net的IoC（spring.net）-ctor在控制器上注入了非单例对象-我在哪里处理？

> ID：10834339
> 
> 赞同：2
> 
> 时间：2012-05-31T13:11:29.530
> 
> 标签：inversion-of-control, asp.net-mvc-4, spring.net

我正在使用 asp.net MVC 4 - 我有 spring.net 设置来在构造我的控制器时注入对象，但有些对象不是单例，所以我不确定如何处理 dispose 方法一旦控制器被释放，这些对象。在控制器类中调用这些对象的 dispose 方法只是感觉不对，因为控制器类没有构造这些对象，我的 IoC 容器做到了。任何帮助将非常感激。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:11:10.953

`Request`考虑为要在 Web 请求结束时处置的实例定义范围。有关详细信息，请参阅Spring 文档中的[Web 对象范围](http://www.springframework.net/doc-latest/reference/html/web.html#web-objectscope)。

# queue - WebSphere MQ - 连接消息并将消息发送到远程队列

> ID：10834341
> 
> 赞同：1
> 
> 时间：2012-05-31T13:11:39.287
> 
> 标签：queue, ibm-mq

我的计算机上有一个 .net mq 客户端，远程服务器上有一个 mq websphere 队列管理器。

*   **如何从远程计算机上的队列发送和接收消息？**

我收到此错误：MQRC_HOST_NOT_AVAILABLE

*   **如何在我的计算机上使用 MQ Explorer 连接到远程队列管理器。**

我得到：

*不允许访问。您无权执行此操作。(AMQ4036) 不允许访问。您无权执行此操作。(AMQ4036)*

===============

我应该如何配置服务器？频道设置？连接设置？当队列管理器在我的计算机上时，我能够在本地连接，但是当它在远程计算机上时，由于身份验证而失败。我知道我应该将我的用户添加到 mqm 组，但远程计算机**没有通过域连接**。

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T04:05:27.823

MQRC_HOST_NOT_AVAILABLE 的原因是您使用的主机名或端口号不正确。

要连接到远程队列管理器，需要以下信息： 队列管理器名称：要连接的队列管理器的名称（区分大小写）。

频道名称：频道名称 - SVRCONN 类型。您可以使用 SYSTEM.DEF.SVRCONN 但建议您创建自己的 SVRCONN 通道

连接名称：hostname(port) - 队列管理器正在运行的主机名/IP 地址以及它正在侦听的端口，例如 remotehost(1414)。

您可以通过多种方式提供上述信息： 1) 通过 MQSERVER 环境变量。`MQSERVER=<SVRCONN channel name>/TCP/<conn name>`. 例如`MQSERVER=MY.SVRCONN.CHN/TCP/remotehost(1414)`. 2) 通过您的应用程序代码。有关更多详细信息，请参阅 nmqput.cs MQ 示例文件。3) 通道定义表。

# c++ - 图像中的对象检测

> ID：10834347
> 
> 赞同：1
> 
> 时间：2012-05-31T13:12:00.780
> 
> 标签：c++, c, opencv, image-processing, object-detection

我有一些这样的示例图像：

![示例图片](../Images/46ee958e6dfc86e44d7d0e51af02e903.png)

现在，当用户将图像上传到我的网站时，我需要检查它是否包含上述图像或非常相似的变体。

我试图训练一个 opencv haar 分类器，但结果似乎并不乐观。不确定我是否错误地生成了分类器。

我使用以下命令生成了 haar 分类器

```
opencv_createsamples -img logo.jpg -num 500 -bg negatives.dat -vec samples.vec -maxxangle 0.6 -maxyangle 0 -maxzangle 0.3 -maxidev 100 -bgcolor 0 -bgthresh 0 -w 209 -h 49

opencv_haartraining -data haarcascade -vec samples.vec -bg negatives.dat -nstages 10 -nsplits 2 -minhitrate 0.999 -maxfalsealarm 0.5 -npos 7000 -nneg 3019 -w 83 -h 35 -nonsym -mem 1024 -mode ALL 
```

我使用了大约 500 张负片图像。

对于我的用例来说，使用 haar 分类器也会过分吗？

我也尝试`cvMatchTemplate`在 opencv 中使用该方法，但结果令人失望。尽管识别出正图像，但误报异常高。

我应该尝试正确训练分类器吗？运行 haar 训练器也需要很长时间。

这是我正在采取的正确方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:14:45.803

在这种情况下，使用**SIFT**可能会获得更好的结果。

这些是一些有趣的参考：

*   [尺度不变特征变换](http://www.aishack.in/2010/05/sift-scale-invariant-feature-transform/)
*   [筛选匹配C++源代码/使用opencv库](http://feelmare.blogspot.com.br/2011/10/sift-matching-c-source-code-using.html)
*   [find-object](http://code.google.com/p/find-object/)：简单的 Qt 接口，用于尝试 SIFT、SURF、FAST、BRIEF 和其他特征检测器和描述符的 OpenCV 实现。

附带说明一下，OpenCV[教程的](http://code.opencv.org/svn/opencv/trunk/opencv/doc/opencv_tutorials.pdf)**第 6 章**展示了如何使用 OpenCV 中的特征点**检测器**、**描述符**和**匹配**框架。

# php - PHP：与下个月相关的日期函数结果不正确（PHP 错误或 sg.else？）

> ID：10834350
> 
> 赞同：3
> 
> 时间：2012-05-31T13:12:15.413
> 
> 标签：php, datetime, date, timestamp

我尝试了一些日期函数，因为我想用 PHP 获取**下个月的一些日期，但我遇到了一些问题。**

作为 MySQL 兼容时间戳 ( `date('Y-m-d H:i:s');`) 的当前日期如下：
`'2012-05-31 14:59:19'`

*   `date('t', strtotime('next month'));`它给出了**下个月的天数，**结果返回**31** ......这是不正确的，因为**6 月仅包含 30 天**（似乎它输出了 7 月的天数）。
*   `date('Y-m-d H:i:s', strtotime('next month'));`，它给出了**下个月的时间戳格式**，返回`'2012-07-01 14:59:19'`，但我希望如下
    `'2012-06-30 14:59:19'`：

所以我尝试了一些代码，这是我的实验，使用[`date()`](http://hu.php.net/manual/en/function.date.php "日期（）")和[`strtotime()`](http://php.net/manual/en/function.strtotime.php "strtotime()")：[`DateTime class`](http://php.net/manual/en/class.datetime.php "约会时间")http: [//pastebin.com/3iaH4iSZ](http://pastebin.com/3iaH4iSZ)

输出如下所示（[您也可以在这里看到它！](http://pastebin.com/tAM9zxrD)）： [![下个月相关的PHP日期函数](../Images/ec9a36047fed36e7a1eeb0954bbf9de1.png)](https://i.stack.imgur.com/mHHRu.png)

这些是 PHP 错误，还是我误解了什么？

* * *

我希望得到与使用 MySQL 的日期函数时相同的结果，仅举几个例子：

```
SELECT NOW( ) 
```

2012-05-31 17:51:15

```
SELECT DATE_ADD(NOW(), INTERVAL 1 MONTH) 
```

2012-06-30 17:51:15

```
SELECT DATE_ADD( '2013-01-30 17:51:15', INTERVAL 1 MONTH ) 
```

2013-02-28 17:51:15

```
SELECT DATE_ADD( '2013-01-31 17:51:15', INTERVAL 1 MONTH ) 
```

2013-02-28 17:51:15

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T01:39:29.613

好的，我想我找到了解决方案，它的行为类似于 MySQL`DATE_ADD`的`INTERNAL 1 MONTH`.
我用所有可能有问题的情况测试了我的功能，它似乎工作正常。
我把它贴在这里，也许有人会觉得它有用。我在这段代码中添加了一些注释，所以我认为它已经足够清楚了。

该函数被调用`getOneMonthLaterTimestamp`。一个例子：

```
echo getOneMonthLaterTimestamp('2012-05-31 17:51:15'); 
```

输出：2012-06-30 17:51:15

## 功能

```
/**
 * Test function for dumping variables in a readable way
 * 
 * @param mixed $stuff
 * @param string $text
 * @return string 
 */
function my_var_export($stuff, $text = '...') {
    return '<p>' . $text . ' (' . gettype($stuff) . '):</p><pre>' . var_export($stuff, TRUE) . '</pre>';
}

/**
 * Get timestamp format of the date one month later 
 * than the date given in the argument/current date if left empty.
 * 
 * Behaves similar to MySQL's DATE_ADD function with INTERVAL 1 MONTH:
 * SELECT DATE_ADD('2012-05-31 17:51:15', INTERVAL 1 MONTH)
 * --> 2012-06-30 17:51:15
 * SELECT DATE_ADD('2013-01-30 17:51:15', INTERVAL 1 MONTH )
 * --> 2013-02-28 17:51:15
 * 
 * these are equivalent to:
 * echo getOneMonthLaterTimestamp('2012-05-31 17:51:15');
 * echo getOneMonthLaterTimestamp('2013-01-30 17:51:15');
 * 
 * You can also call it without an argument. This way, the current date is taken as a basis.
 * echo getOneMonthLaterTimestamp();
 * 
 * @param string $DateTime_param date/time string
 * @see http://www.php.net/manual/en/datetime.formats.php
 * @see http://www.php.net/manual/en/datetime.construct.php
 * 
 * @return string Date one month later as a MySQL-compatible timestamp format
 */
function getOneMonthLaterTimestamp($DateTime_param = NULL) {
    // if argument is left empty, the current date is taken as a basis
    if (empty($DateTime_param)) {
        $DateTime_param = date('Y-m-d H:i:s');
    }

    $lastDayOfNextMonth = new DateTime($DateTime_param);
    $lastDayOfNextMonth->modify('last day of next month');

    $nextMonth = new DateTime($DateTime_param);
    $nextMonth->modify('next month');

    if ($lastDayOfNextMonth->format('n') < $nextMonth->format('n')) {
        $oneMonthLaterTimestamp = $lastDayOfNextMonth->format('Y-m-d H:i:s');
    }
    else {
        $oneMonthLaterTimestamp = $nextMonth->format('Y-m-d H:i:s');
    }

    return $oneMonthLaterTimestamp;
} 
```

## 测试用例

```
$timestamps_to_test_array = array(
  date('Y-m-d H:i:s'),   // 1\. current date
  '2011-01-28 23:59:59', // 2.
  '2011-01-29 23:59:59', // 3.
  '2011-01-30 23:59:59', // 4.
  '2011-01-31 23:59:59', // 5.
  '2012-01-28 23:59:59', // 6.
  '2012-01-29 23:59:59', // 7.
  '2012-01-30 23:59:59', // 8.
  '2012-01-31 23:59:59', // 9.
  '2012-02-29 23:59:59', // 10.
  '2012-03-30 23:59:59', // 11.
  '2012-03-31 23:59:59', // 12.
  '2012-04-30 23:59:59', // 13.
  '2012-05-31 23:59:59', // 14.
  '2012-12-31 23:59:59', // 15.
  '2013-01-31 23:59:59', // 16.
  '2013-02-28 23:59:59', // 17.
);

$i = 1;

foreach ($timestamps_to_test_array as $timestamp_to_test) {
    $oneMonthLaterTimestamp = getOneMonthLaterTimestamp($timestamp_to_test);
    echo my_var_export($timestamp_to_test, '[' . $i . ']. Timestamp to test ($timestamp_to_test)');
    echo my_var_export($oneMonthLaterTimestamp, 'Timestamp + 1 month (getOneMonthLaterTimestamp($timestamp_to_test))');
    echo '<hr />';
    $i++;
} 
```

## 测试用例的输出

我在这里粘贴了输出：http: [//pastebin.com/rY5ZRBs9](http://pastebin.com/rY5ZRBs9)。
这是它的截图：http: [//i.imgur.com/KwlJq.png](http://i.imgur.com/KwlJq.png)

## 获取下个月的天数

```
/**
 * Get number of days in the next month
 *
 * @param string $DateTime_param date/time string
 * @return int Number of days in the next month
 */
function getNumberOfDaysInNextMonth($DateTime_param = NULL) {
    // if argument is empty, the current date is taken as a basis
    if (empty($DateTime_param)) {
        $DateTime_param = date('Y-m-d H:i:s');
    }

    // DateTime instance
    $dateCurrent = new DateTime($DateTime_param);
    $dateCurrent->modify('last day of next month');
    return (int)$dateCurrent->format('t');
}

/**
 * It's identical to getNumberOfDaysInNextMonth()
 *
 * @see getNumberOfDaysInNextMonth
 */
function getLastDayOfNextMonth($DateTime_param = NULL) {
    return getNumberOfDaysInNextMonth($DateTime_param);
} 
```

## 测试用例

```
$lastDayOfNextMonth = getLastDayOfNextMonth('2012-05-31 03:50:27');
echo my_var_export($lastDayOfNextMonth, "Get last day of next month (getLastDayOfNextMonth('2012-05-31 03:50:27'))"); 
```

**输出**：

```
Get last day of next month (getLastDayOfNextMonth('2012-05-31 03:50:27')) (integer):
30 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:18:55.103

至此：

> 获取下个月作为时间戳 [ date('Ymd H:i:s', strtotime('next month')); ]:
> '2012-07-01 14:59:19'
> 
> 使用 DateTime 类 [ $dateObj->add(new >DateInterval('P1M')); 获取下个月的最后一天作为时间戳 $dateObj->format('Ymd H:i:s'); ]:
> '2012-07-01 14:59:19'

很明显，“下个月”输出 7 月的日期......

试试`strtotime('+1 month')`吧。

编辑：**说明：** 今天是 5 月 31 日。如果您称它为`strtotime('next month')`尝试获取不正确的 6 月 31 日的日期，那么它非常正确地输出 7 月 1 日的日期......因此我猜这`strtotime('+1 month')`也会失败......

**所以更好的解决方案是获取当月第 15 天的日期并使用“下个月”或“+1 个月”到该日期......**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:31:39.283

您可以通过一些小的操作来实现您想要的（即，如果我的问题是正确的）

```
$next_month = mktime(0, 0, 0, date("m")+1, 1, date("Y"));
//gets next month
echo "<br />".date("D jS M, Y", $next_month);
//sets the value
echo "<br />".date("t", $next_month);
//number of days next month 
```

这应该可以让您访问您想要的月份，因为每个月都有`first`一天。换句话说，要获得下一年，您只需更改适当的值

# python - 使用python输入扩展名后遍历文件并命名输出文件

> ID：10834352
> 
> 赞同：0
> 
> 时间：2012-05-31T13:12:21.983
> 
> 标签：python, input, loops, file-extension

新手python程序员在这里。我写了一个脚本，想修改 start 让它遍历文件夹中的文件，所以我不必每次都更改输入和输出文件扩展名。

输入文件的文件夹包含'chr1'，'chr2'，'chrx'等染色体文件。我想输出到不同的文件夹和路径，并使用输入文件作为输出文件的基础，同时还添加扩展名例如“窗口统计”。例如，输入文件“chr1”将作为“chr1windowstatistics”输出到不同的文件夹中。

几天来，我一直在尝试解决这个问题，但没有找到可行的解决方案。

目前我有：

```
import os
import glob

path = '/man/genotyping/Conservation/splitbychrom/'
for infile in glob.glob( os.path.join(path, 'Chr*') ):

    inputfile = open(infile, 'r') 
    output = os.rename(inputfile + ".out", 'w') 
```

有谁知道如何使它工作，我不介意它的完成方式是否完全不同，我只想能够运行一次脚本并遍历文件。

请让我知道我是否需要重新表述问题以清楚起见。提前感谢您的所有帮助。真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:26:41.353

只要写下你想要的——我不清楚。

1.  你想重命名吗？然后告诉`os.rename()`您要重命名的内容和名称。在您的情况下，您想将 orognal 文件重命名为一个新名称，当然不是`w`. 就这样吧`os.rename(infile, newfilename)`。

2.  您想处理输出数据并将其放在其他地方吗？然后打开文件进行写入，并使用正确的文件名： do `output = open(infile + ".out", 'w')`.

尤其不要将文件名与文件对象以及函数的工作方式混淆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:21:00.027

重命名文件： os.rename(infile, infile + ".out")

os.rename 有两个字符串：源路径，目标路径。“输出”的分配未使用。

复制文件（在 *nix 中）： os.system ("cp " + infile + " " + infile" + ".out")

# iphone - 如何创建链接到在线/离线数据库的移动应用程序

> ID：10834359
> 
> 赞同：-4
> 
> 时间：2012-05-31T13:12:58.440
> 
> 标签：iphone

我想为 Iphone 和 Androids 编写应用程序，我不知道除了我用谷歌搜索的内容之外还有什么，但我还没有找到一些很好的资源。如果有人可以让我知道哪种语言更简单可靠，还有哪些工具，甚至是我可以购买的一本好书的参考。还有它是如何通过手机连接到在线数据库的。因此，如果有人可以提供一些关于如何去做的参考，那将是创建谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:26:07.843

去看看[Appcelerator](http://www.appcelerator.com/)。它是一个跨平台开发工具，允许您使用 HTML/Javascript 开发本机应用程序（通过 iPhone 上的 UIWebView 运行），还可以查看[Phonegap](http://phonegap.com/)和[Rhomobile](http://rhomobile.com/)。Appcelerator 允许您为 android (java) 编写代码，然后将代码转换为适用于 iPhone 的 iOS。对于数据，我推荐 Appcelerator 云服务。

# facebook - Authenticated Referrals vs. OAuth - 将信息发布到网站？

> ID：10834360
> 
> 赞同：1
> 
> 时间：2012-05-31T13:13:03.233
> 
> 标签：facebook, referrals

目前，我通过创建“通过 facebook 登录”按钮来使用 PHP 服务器端 OAuth-Authentification。由于该应用程序也在侧边栏中，我想使用经过身份验证的推荐来让用户直接访问该应用程序。问题是，即使可以授予访问权限，我也需要将此登录查询字符串获取到我的网站以保存所有访问令牌、信息等。

那么 - 在应用程序获得许可后，我该如何设置 url 以将用户重定向到？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:51:57.870

当用户被发送到您的应用程序时，facebook 也会将身份验证数据与请求一起发送。
在[Auth Dialog 文档的](http://developers.facebook.com/docs/opengraph/authentication)[Authenticated Referrals](http://developers.facebook.com/docs/opengraph/authentication/#referrals)部分中，它说：

> 3\. Auth Token 参数：如果启用了 Authenticated Referrals 并且当用户通过内联 Auth Dialog 授权您的应用程序时，我们将以此处指定的格式向您的应用程序传递 Auth Token。可用格式：
> 
> *   URI 片段：如果您的应用正在使用客户端身份验证
> *   查询字符串：如果您的应用正在使用服务器端身份验证。如果您的应用是画布应用，我们将不使用此设置，并将自动使用“signed_request”作为响应类型。

如果您的应用程序是画布应用程序，您只需使用“signed_request”获取所有需要的数据，否则它将成为查询字符串的一部分。
对于更多用户数据，您只需发出 api 请求。

# iphone - NSURLConnection ios 5.1

> ID：10834364
> 
> 赞同：0
> 
> 时间：2012-05-31T13:13:09.383
> 
> 标签：iphone, ios5, nsurlconnection

所以我有我的联系和方法：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
- (void)connectionDidFinishLoading:(NSURLConnection *)connection 
```

当我在 iPhone 模拟器上运行我的应用程序时，一切正常，但是当我在 iPhone 上运行它时，没有调用这些方法。

有人可以解释一下为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:15:07.783

你检查你的互联网连接了吗？也许您的手机连接到了一个不允许它连接到互联网的东西

# android - Android Phonegap 应用数据库错误

> ID：10834365
> 
> 赞同：0
> 
> 时间：2012-05-31T13:13:10.573
> 
> 标签：android, sqlite, cordova, insert-into

我的问题如下：我正在我的 Phonegap-App 中使用 Javascript 创建一个 sqlite 数据库，并从 eclipse (LogCat) 获得以下信息： sqlite 返回：错误代码 14，msg= 无法打开源文件 25467

这就是我初始化数据库的方式（工作正常）：

```
function initDB() {
  try { 

    if (!window.openDatabase) { 

      alert('doesn't work!'); 

    } else { 

      var shortName = 'name'; 

      var version = '1.0'; 

      var displayName = 'displayname'; 

      var maxSize = 65536; // in bytes 

      var db = window.openDatabase(shortName, version, displayName, maxSize); 

      db.transaction(populateDB, errorCB, successCB);
     }

  } catch(e) { 

    // Error handling code goes here. 

    if (e == INVALID_STATE_ERR) { 

      // Version number mismatch. 

      alert("Invalid database version."); 

    } else { 

      alert("Unknown error "+e+"."); 

    } 

    return; 

  } 

} 
```

所以变量 db 是用我的数据库初始化的。然后我尝试使用以下代码填充数据库：

```
function populateDB(tx) {
  //dropping the table if exists for testing
  tx.executeSql('DROP TABLE IF EXISTS CLIENT');

  //creating a table
  tx.executeSql('CREATE TABLE IF NOT EXISTS CLIENT (id int NOT NULL PRIMARY KEY, name text, adress text, notes text)');  

  //inserting an entry for testing -- SQLITE ERROR 14 HERE!
  tx.executeSql('INSERT INTO CLIENT (name, adress, notes) VALUES ("client1","adress1","note1")');
} 
```

我尝试 INSERT INTO CLIENT 的行不起作用，因此事务调用回调函数 errorCB，它显示“错误处理 SQL：1”，LogCat 说 sqlite 返回错误 14 .. 似乎无法修复它，我'正在给我的应用程序所有权限.. 并且创建表 CLIENT 不会给我任何错误，所以我认为该应用程序有权写入 db 文件？问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:31:34.500

尝试这个...

```
 tx.executeSql('INSERT INTO CLIENT (id,name, adress, notes) VALUES ("1","client1","adress1","note1")'); 
```

请参阅[SQLite 返回错误代码 14](https://stackoverflow.com/questions/7316191/android-sqlite-returned-error-code-14)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:50:10.383

如果您看到错误：

```
I/Database(  362): sqlite returned: error code = 14, msg = cannot open file at source line 25467 
```

你可以放心地忽略它。这很可能是 WebView 组件的实例化。它会在尝试打开 webview.db 时抛出该错误，这完全没有必要。

而不是“id int NOT NULL PRIMARY KEY”尝试“id unique”并在插入时指定id，以确保您的插入正常工作。然后继续在 id 列中添加更多条件。

# html - CSS 上一个元素

> ID：10834369
> 
> 赞同：0
> 
> 时间：2012-05-31T13:13:32.787
> 
> 标签：html, css

有没有办法用**CSS**实现这一点？
**元素高度 = 100% 减去前一个元素高度**

请不要提供 JavaScript 答案，因为我已经有了：

CSS：

```
.mydiv{
    height:100%;
} 
```

JavaScript (jQuery):

```
$('.mydiv').each(function(){
    $(this).css('height', $(this).height() - $(this).prev().height());
}); 
```

实际上，我想仅使用 CSS重现[此演示的第二个效果。](http://jsfiddle.net/Wct6W/)
谢谢

**编辑：**
我到底想要实现什么：我希望两个元素垂直适合它们的父元素，**而不指定第一个元素的高度**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:34:06.127

您可以在不进行数学运算的情况下同时使用`top`和`bottom`

[http://jsfiddle.net/UNnGP/](http://jsfiddle.net/UNnGP/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:38:15.127

使用`display:table`并`display:table-row`通过 CSS 实现这一点

[有demo](http://jsfiddle.net/Wct6W/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:27:19.487

不，有两个原因：

1.  CSS 没有“以前”的概念。有一些选择器会在之后使用元素（例如“+”、“~”），而不是之前。
2.  我在想可能有一些巧妙的方法可以利用 CSS 的继承能力，但我认为这也行不通。您可以将高度设置为其父级的 50%，但您会覆盖其原始高度，因此会破坏执行某类操作的机会`this.height - prev.height`。

简单的答案是否定的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:47:39.537

是的你可以。但是你必须溢出：隐藏在你的容器上。这是一个链接。[http://jsfiddle.net/UNnGP/4/](http://jsfiddle.net/UNnGP/4/)

# java - Gson 和数组

> ID：10834370
> 
> 赞同：1
> 
> 时间：2012-05-31T13:13:34.977
> 
> 标签：java, json, gson

我正在构建一个客户端服务器 Web 应用程序并坚持这一点：

我得到了一组用户“FriendsIDList:”：

```
"data":{
    "name":"anna",
    "BirthDate":"2010-01-01",
    "FriendsIDList":{
        "email":"anna1@gmail.com",
        "email":"anna2@gmail.com"
    }
}} 
```

如果没有数组，我可以毫无问题地读取这样的数据：

```
GsonBuilder gb = new GsonBuilder();
gb.setDateFormat("yyyy-MM-dd");
gson = gb.create();
newUser= gson.fromJson(data, user.class); 
```

我怎样才能读取这个数组？我`LinkedList`在我的用户类中使用：

```
LinkedList FriendsIDList; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T05:07:36.810

[JSON 规范](http://www.ietf.org/rfc/rfc4627)是这样说的：

> 名称是一个字符串。每个名称后面都有一个冒号，将名称与值分开。单个逗号将值与后面的名称分开。**对象中的名称应该是唯一的。**

不幸的是，Gson 本身并不支持名称/值对中的非唯一名称。因此它无法正确处理您的“电子邮件”属性：

```
{"email":"anna1@gmail.com","email":"anna2@gmail.com"} 
```

您可以通过编写自己的[TypeAdapter](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/TypeAdapter.html)来解决此问题。您的实现应该将电子邮件字符串累积到一个列表中。您可能希望在数据模型中使用特殊的包装对象，例如 EmailAddressList 来简化此操作。

```
static class FriendsIDList {
  List<String> emails;
}

static TypeAdapter<FriendsIDList> friendsIDListAdapter
        = new TypeAdapter<FriendsIDList>() {
    ... // code to read and write emails
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:20:57.190

如果您有一个包含 FriendList 的用户，那么您的最后一行将像您提到的那样工作。

尝试按如下方式定义您的 FriendList 属性：

```
LinkedList<Email> FriendList; 
```

并创建电子邮件类：

```
public class Email {
  private String email;
} 
```

# jquery - asp.net 4 Visual Studio 2010 jquery 母版页不工作

> ID：10834371
> 
> 赞同：2
> 
> 时间：2012-05-31T13:13:39.323
> 
> 标签：jquery, asp.net, master-pages

更新：我确实使用谷歌浏览器尝试了这个网站，结果与 IE 相同

更新：我确实将 Default.aspx 脚本更改为

```
$("#btnSearch").click(function () { 
```

和按钮

```
<asp:Button ID="btnSearch" runat="server" Text="Search"  ClientIDMode="Static" /> 
```

我已经使用 Ajax Control Toolkit 好几年了。想玩jQuery。我无法获得一个简单的 jQuery 教程来工作。我正在使用教程学习 jQuery：

[jquery_webforms_Using_Animations](http://www.asp.net/ajaxlibrary/jquery_webforms_Using_Animations.ashx)

在本教程中——我跳到只是试图弹出一个对话框——在这种情况下是一个搜索窗口。

我使用 Visual Studio 2010 创建了一个新网站。Visual Studio 会自动在脚本文件夹中创建母版页、默认页、jquery 脚本等。

我将 ScriptManager 添加到母版页。我从母版页中删除了登录内容——因为我不需要 jquery 教程的额外复杂性。

我删除了 Visual Studio 在 Default.aspx 的“BodyContent”中创建的内容。

我添加了将 jquery 加载到 Default.aspx 的标头内容的脚本命令。我添加了一个简短的脚本，将事件处理程序附加到按钮以弹出对话框。我发出了几个警报，看看是什么在触发。

在内容正文中，我添加了一个将弹出对话框的按钮，并添加了将弹出的对话框。

我编译并运行应用程序，我的 Default.aspx 出现了，我可以单击“搜索”按钮，它确实回发了 - 但没有警报，也没有弹出对话框。

我无法想象一个更简单的例子——但它不起作用。有任何想法吗？谢谢。

母版页：

```
<%@ Master Language="VB" AutoEventWireup="false" CodeFile="Site.Master.vb" Inherits="Site" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head runat="server">
<title></title>
<link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder>
</head>
<body>
<form runat="server">
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<div class="page">
    <div class="header">
        <div class="title">
            <h1>
                My ASP.NET Application
            </h1>
        </div>
        <div class="clear hideSkiplink">
            <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                <Items>
                    <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                    <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                </Items>
            </asp:Menu>
        </div>
    </div>
    <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
    </div>
    <div class="clear">
    </div>
</div>
<div class="footer">

</div>
</form>
</body>
</html> 
```

这是 Default.aspx

```
<%@ Page Title="Home Page" Language="VB" MasterPageFile="~/Site.Master" AutoEventWireup="false"
CodeFile="Default.aspx.vb" Inherits="_Default" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<script src="~/Scripts/jquery-1.4.1.js" type="text/javascript" />
<script type="text/javascript" language="javascript">
    $(document).ready(function () {
        alert("Setting Click event handler");
        $("<%=btnSearch.clientID%>").click(function () {
            alert("Showing dialog");
            $("#searchdialog").slideDown("slow");
        });
    });
</script>
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">
<asp:Button ID="btnSearch" runat="server" Text="Search" />
<div id="searchdialog" style="position: absolute; top: 65px; right: 5px; width: 200px;
    display: none;">
    <div>
        Search For Symbol</div>
    <div>
        Enter a symbol:
        <input type="text" name="txtSymbolSearch" id="txtSymbolSearch" value="" />
        <input type="button" id="btnSymbolSearch" value="Search" />
    </div>
</div>
</asp:Content 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:15:55.690

在 jQuery 中缺少带有 id 的“#”：

```
$("#<%=btnSearch.clientID%>") 
```

尝试这个：

```
 <script type="text/javascript" language="javascript">
        $(document).ready(function () {
            alert("Setting Click event handler");
            $("#<%=btnSearch.clientID%>").click(function () {
                alert("Showing dialog");
                $("#searchdialog").slideDown("slow");
            });
        });
    </script> 
```

# visual-studio-2010 - TFS2010 解决方案 PostBuild 宏值在 Team build 中不同

> ID：10834376
> 
> 赞同：2
> 
> 时间：2012-05-31T13:13:48.823
> 
> 标签：visual-studio-2010, msbuild, tfsbuild

我在单个 TFS 解决方案（shell、comon 库、两个模块和几个测试项目）中有一个 PRISM 应用程序。为了简单起见，我选择了 DirectoryModuleCatalog 并且为了在构建后在本地运行应用程序，向复制的模块项目构建添加了一个后期构建步骤构建 dll 到 GUI 应用程序输出路径的模块子文件夹。

这在本地客户端构建上工作得很好，但是当从 TFS 构建代理触发相同的构建后事件时，它会失败。经检查，这是因为 $(OutDir) 宏是本地相对路径，在 TFS 构建代理 MSBuild 日志中是绝对路径！

引用 MSDN

```
$(OutDir) 

Path to the output file directory, relative to the project directory. 
This resolves to the value for the Output Directory property. 
It includes the trailing backslash '\'. 
```

在本地，这在构建代理上解析为“bin\Debug\”，它解析为“C:\Builds\5\XXXX\Gui.DEV_XXXX7_Iteration0.CI\Binaries\”

鉴于这个原始的本地后期构建定义；

```
mkdir "$(SolutionDir)Gui\$(OutDir)Modules\"
copy "$(TargetPath)" "$(SolutionDir)Gui\$(OutDir)Modules\" 
```

您可以看到为什么它在构建代理上失败，如下所示：

```
mkdir "C:\Builds\4\XXXX\Gui.DEV_Cortex7_Iteration0.CI\Sources\Gui\C:\Builds\4    \XXXX\Gui.DEV_XXXX7_Iteration0.CI\Binaries\Modules\"
copy "C:\Builds\4\XXXX\Gui.DEV_XXXX7_Iteration0.CI\Binaries\Apdcomms.Cortex.Gui.Example2.Module.dll" 
    "C:\Builds\4\XXXX\Gui.DEV_XXXX7_Iteration0.CI\Sources\Gui\C:\Builds\4\XXXX\Gui.DEV_XXXX7_Iteration0.CI\Binaries\Modules\"
The filename, directory name, or volume label syntax is incorrect.
The filename, directory name, or volume label syntax is incorrect.
      0 file(s) copied. 
```

因此，在查看宏的值时，在 TFS 构建代理下构建与在本地模式下构建时，我似乎需要在 postbuild 中使用一组不同的命令，这非常糟糕。

所以问题是：**如何以适用于 locla 客户端构建和 TFS 团队构建的方式将解决方案中一个项目的二进制输出移动到同一解决方案中另一个项目的子文件夹**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:07:35.847

从 TFS 构建时，我个人不喜欢依赖构建后脚本。自定义构建模板会更好。虽然后期构建脚本肯定更容易，但构建模板将更好地管理您的环境（在我看来）。我链接到 Microsoft 文章，为您提供有关如何完成此操作的更多信息。我还粘贴了内容，以便 StackOverflow 可以保持独立。

[http://msdn.microsoft.com/en-us/library/ff977206.aspx](http://msdn.microsoft.com/en-us/library/ff977206.aspx)

默认构建过程（在 DefaultTemplate.xaml 中定义）会将它从所有代码项目编译的二进制文件放到一个目录中。但是，在某些情况下，您希望将二进制文件组织成更细粒度和更有条理的文件夹结构。

您可以使用本主题中的技术创建自定义构建过程，将二进制文件放入您设计的目录结构中。您还可以使用相同的原则以不同的方式自定义构建过程。本主题介绍了以下技术：

自定义构建过程的 Windows 工作流部分。您应该在此部分中进行更改以自定义构建过程的大多数方面，除了编译和处理二进制文件。具体来说，本主题介绍如何执行以下任务：

通过修改默认模板 (DefaultTemplate.xaml) 的副本来创建自定义生成过程。

声明并使用参数将数据传递到工作流中。

声明并使用变量在整个工作流程中收集和传递数据。

修改工作流如何使用 MSBuild 活动来调用 MSBuild。

将文件下载到构建服务器并使用 ConvertWorkspaceItem 活动使该文件可用于构建过程。

自定义构建过程的 MSBuild 部分。通过在此部分中进行更改，您可以更有效地自定义二进制文件的编译和处理方式。具体来说，本主题介绍如何执行以下任务：

将参数传递给 MSBuild，然后在代码项目中使用它们来更改编译的二进制文件的处理方式。

设置您自己的 MSBuild 元素（例如属性组或目标）的集中式公共代码库。通过设置这种类型的库，您可以让您的团队轻松重用和修改构建过程逻辑的关键部分。

# r - ggplot2 保留未使用的级别 barplot

> ID：10834382
> 
> 赞同：117
> 
> 时间：2012-05-31T13:14:15.343
> 
> 标签：r, ggplot2, legend, levels

我想在我的条形图中绘制未使用的级别（即计数为 0 的级别），但是，未使用的级别被删除了，我不知道如何保留它们

```
df <- data.frame(type=c("A", "A", "A", "B", "B"), group=rep("group1", 5))
df$type <- factor(df$type, levels=c("A","B", "C"))

ggplot(df, aes(x=group, fill=type)) + geom_bar() 
```

在上面的例子中，我想看到 C 绘制的计数为 0，但它完全不存在......

感谢您的帮助乌尔里克

编辑：

这做我想要的

```
df <- data.frame(type=c("A", "A", "A", "B", "B"), group=rep("group1", 5))
df1 <- data.frame(type=c("A", "A", "A", "B", "B", "A", "A", "C", "B", "B"), group=c(rep("group1", 5),rep("group2", 5)))

df$type <- factor(df$type, levels=c("A","B", "C"))
df1$type <- factor(df1$type, levels=c("A","B", "C"))
df <- data.frame(table(df))

df1 <- data.frame(table(df1))

ggplot(df, aes(x=group, y=Freq, fill=type)) + geom_bar(position="dodge")
ggplot(df1, aes(x=group, y=Freq, fill=type)) + geom_bar(position="dodge") 
```

猜猜解决方案是使用 table() 计算频率，然后绘制

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2014-04-02T20:23:59.577

您需要在两个刻度（填充和 x）上设置 drop=FALSE，如下所示：

```
library(ggplot2)
df <- data.frame(type=c("A", "A", "A", "B", "B"), group=rep("group1", 5))
df1 <- data.frame(type=c("A", "A", "A", "B", "B", "A", "A", "C", "B", "B"), group=c(rep("group1", 5),rep("group2", 5)))
df$type <- factor(df$type, levels=c("A","B", "C"))
df1$type <- factor(df1$type, levels=c("A","B", "C"))

plt <-  ggplot(df, aes(x=type, fill=type)) + 
          geom_bar(position='dodge') + 
          scale_fill_discrete(drop=FALSE) +
          scale_x_discrete(drop=FALSE)
plt1 <- ggplot(df1, aes(x=type, fill=type)) + 
          geom_bar(position='dodge') + 
          scale_fill_discrete(drop=FALSE) +
          scale_x_discrete(drop=FALSE) 
```

编辑：

我很确定这行得通。忘记将 x 更改为 type 而不是 group 和 position='dodge'！只需粘贴和测试。stat_bin 处理计数为零的 bin。检查[文档](http://docs.ggplot2.org/current/stat_bin.html)。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-05-31T14:31:43.333

这是做你想做的吗？

```
ggplot(df, aes(x=type)) + geom_bar() + scale_x_discrete(drop=FALSE) 
```

![在此处输入图像描述](../Images/bb54094852b951d3a7178ca40fd35133.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-04-03T07:52:50.263

降低水平不起作用。在第一个示例中降低级别

```
library(ggplot2)

df <- data.frame(type=c("A", "A", "A", "B", "B"), group=rep("group1", 5))
df$type <- factor(df$type, levels=c("A","B", "C"))

ggplot(df, aes(x=group, fill=type)) + geom_bar(position="dodge") + scale_x_discrete(drop=FALSE) + scale_fill_discrete(drop=FALSE) 
```

结果在这个图中：

![在此处输入图像描述](../Images/12c1eabb0f90e02c2a71f35937ee88fc.png)

解决方案是在第二个示例中手动计算频率：

```
df <- data.frame(type=c("A", "A", "A", "B", "B"), group=rep("group1", 5))
df1 <- data.frame(type=c("A", "A", "A", "B", "B", "A", "A", "C", "B", "B"), group=c(rep("group1", 5),rep("group2", 5)))

df$type <- factor(df$type, levels=c("A","B", "C"))
df1$type <- factor(df1$type, levels=c("A","B", "C"))

df <- data.frame(table(df))
df1 <- data.frame(table(df1))

df$plot = "A"
df1$plot = "B"

df <- rbind(df, df1)

ggplot(df, aes(x=group, y=Freq, fill=type)) + geom_bar(position="dodge", stat="identity") + facet_wrap( ~ plot, scales="free") 
```

结果如下：

![在此处输入图像描述](../Images/c958bf61c426a540bfdbaa226503fa62.png)

最后一个是信息量最大的，因为空间被其中的类别占用 count = 0

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-05-06T09:24:34.330

您也可以使用“scale_fill_color”，例如：

```
plt <- ggplot(df, aes(x=type, fill=type)) + geom_bar(position='dodge') + scale_x_discrete(drop=FALSE)+
scale_fill_manual(
  values = c(
    "#ff6666",
    "#cc9900",
    "#cc9900",
    ),drop=FALSE) 
```

# php - 在mysql数据库中将组装的var插入Unix时间格式

> ID：10834386
> 
> 赞同：0
> 
> 时间：2012-05-31T13:14:42.857
> 
> 标签：php, mysql

我有一个名为的变量`$eventTimeDate`，它组合了日期 YMD 和时间，这个 var 的当前输出是`2012-05-31 21:00:00`，我已经将这个 var 存储在我的 mysql 数据库中，然后我通过使用选择这个值`SELECT UNIX_TIME() AS time`

我需要的是将此输出转换为这种格式`2332422323`，就像`unix`我插入数据库之前一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:19:12.963

使用 strtotime($eventTimeDate) 参见：[strtotime()](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:20:56.467

尝试使用 UNIX_TIMESTAMP() 函数

```
jcho360> SELECT UNIX_TIMESTAMP('2007-11-30 10:30:19');
+---------------------------------------+
| UNIX_TIMESTAMP('2007-11-30 10:30:19') |
+---------------------------------------+
|                            1196436619 |
+---------------------------------------+
1 row in set (0.00 sec) 
```

如果你想再次转换使用这个

```
jcho360> select from_unixtime(1196436619);
+---------------------------+
| from_unixtime(1196436619) |
+---------------------------+
| 2007-11-30 10:30:19       |
+---------------------------+
1 row in set (0.00 sec) 
```

# symfony - symfony2 应用程序上的 Angularjs

> ID：10834390
> 
> 赞同：73
> 
> 时间：2012-05-31T13:14:52.763
> 
> 标签：symfony, angularjs

我正在开发一个在前端使用大量 javascript 的 SF2 应用程序。

SF2 为我提供了一种构建良好 REST 应用程序的好方法，使用教义管理我的数据库，使用 twig 作为模板等等，但我想使用 Angularjs。

我知道 angularjs 和 SF2 是具有不同方法的 2 个不同框架，但我想知道完成这项工作的最佳方法是什么。

它甚至值得吗？

如果是，您认为更清洁、最有效的解决方案是什么？

也许使用 php 而不是 twig 模板来使用 angularjs 花括号？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-07-13T22:06:13.077

我认为`Symfony2`可以完美地与`AngularJS`. 证明是我一方面使用 Symfony 制作 API，另一方面使用 AngularJS 制作 Web 应用程序。

此外，由于某些原因，我使用`Twig`. `{% verbatim %} {% endverbatim %}`每次我需要在我的视图中使用 Angular 时，我只需将 angular 的花括号嵌入到 twig语句中。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2013-07-09T10:46:20.387

从 Twig 1.12 开始，原始标签被重命名为[verbatim](http://twig.sensiolabs.org/doc/tags/verbatim.html)：

```
{% verbatim %}
    <ul>
    {% for item in seq %}
        <li>{{ item }}</li>
    {% endfor %}
    </ul>
{% endverbatim %} 
```

中间的所有内容都不会被 Twig 引擎解析，并且可以被 AngularJS 使用。

虽然我建议更改 AngularJS 分隔符。否则，在查看模板时可能很难区分 Twig 和 AngularJS 代码。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-20T12:55:59.693

我面临同样的情况，在我的情况下，我决定拆分客户端和服务器项目，我使用 symfony2 作为服务器端，因为它的简单性和可用性以及其他给我带来的优势。另一方面，我用 AngularJS 创建了一个简单的 HTML 项目，这对我很有用，因为我想用相同的客户端文件创建一个 HTML5 移动应用程序。

那样的话，我认为这里问题的核心在于认证和授权过程。您必须在服务器端实施安全防火墙以在 REST 中工作（例如 WSSE: [Symfony2: How to create a custom Authentication Provider](http://symfony.com/doc/current/cookbook/security/custom_authentication_provider.html)）。

然后是客户端（AngularJS）中的相应实现，我发现的最有用的资源： [Github:witoldsz/angular-http-auth](https://github.com/witoldsz/angular-http-auth)。

如果你想对你的 sf2 项目进行更深入的实现，你可以使用 Assetic 的过滤器编译 AngularJS，并在页面加载中获得性能。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-04-29T16:41:08.933

我使用以下代码来更改 AngularJS 分隔符

咖啡脚本：

```
# Change the angular delimiters for twig compatability
# and load module with ngResource
WAFapp2 = angular.module("WAFapp2", ['ngResource'], ($interpolateProvider) ->
  $interpolateProvider.startSymbol "{[{"
  $interpolateProvider.endSymbol "}]}"
)    var WAFapp2; 
```

或 Javascript：

```
var WAFapp2;

WAFapp2 = angular.module("WAFapp2", ['ngResource'], function($interpolateProvider) {
  $interpolateProvider.startSymbol("{[{");
  return $interpolateProvider.endSymbol("}]}");
}); 
```

然后在我的布局顶部：

```
<!DOCTYPE html>
<html lang="en" data-ng-app="WAFapp2">
  <head> 
```

然后稍后在我可以使用的 html 的 body 标记部分：

```
<ul>
{% for item in seq %}
    <li>{[{ item }]}</li>
{% endfor %}
</ul> 
```

我认为这可以让事情变得更干净，并且可以轻松混合树枝和角标签。这似乎对我很有效。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-09-05T21:05:44.630

避免混淆的两个胡须的一个很好的解决方案是基于属性的指令，称为 ng-bind:`<p ng-bind="yourText"></p>`与`<p>{{yourText}}</p>`

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2013-10-02T16:26:55.893

保持角度应用程序分开是更可取的。只需将 Symfony 用作数据检索/持久性的 api 和安全提供程序。

这将允许更大程度地分离视图和数据层。因此，您可以开始在前端工作，而无需考虑后端实现。您只需要模拟 api 调用。

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2013-10-01T06:45:00.260

我一直在尝试使用 Symfony 和 angularjs 构建单页应用程序。我使用 Symfony2 和 FOSRestBundle 来构建一个 Restful API 和 Angularjs 来构建前端。

AngularJs 本身不需要 Symfony2 框架来构建应用程序，只要它有一个 API 可以与之交谈。然而，我发现 Symfony2 在这些领域很有用：

1.  模板中的翻译。API 有效负载中的数据在大多数情况下不需要翻译。使用 Symfony I18N 对模板的支持非常有意义。

2.  加载选项列表。假设您有一个包含 200 多个选项的国家/地区列表。您可以构建一个 API 来填充 angularjs 中的动态下拉列表，但由于这些选项是静态的，您可以简单地在 twig 中构建该列表。

3.  预加载数据/内容。如果您愿意，可以在托管页面中预加载模板或 JSON 数据

4.  利用 Symfony 的身份验证功能。您也可以对应用程序的 API 使用相同的经过身份验证的会话。无需使用 Oauth。

5.  Assetic 包对于 AngularJs 使用的 Javascript 文件的 urglyfy 和缩小非常有用

但是，我确实发现了以下挑战：

1.  多个 Ajax 调用的 PHP 会话锁定。需要一种更好的方法来通过调用“session_write_close()”或使用数据库进行会话来释放 php 会话。Symfony 中调用“session_write_close”函数的最佳位置在哪里，以便我们可以尽快释放会话以进行更多 ajax 调用？

2.  重新加载/同步加载的数据假设您在浏览器中显示了一个项目列表（如 ebay 项目），当列表在服务器端更新时，您希望在客户端的浏览器中更新该列表。您可能需要定期轮询列表或使用 Firebase 之类的东西。在大多数情况下，Firebase 是一种过度杀伤力，轮询对我来说并不好看，但实现这一目标的最佳方法是什么？

请添加您的评论。谢谢

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-02-23T14:00:45.917

您可以使用此[模板](https://github.com/FlyersWeb/angular-symfony)，也可以学习此模板并以此为基础。

是一个模板应用程序，通过 RestFul API 在使用 AngularJS 的客户端部分和使用 Symfony2 的服务器部分之间进行安全通信。

您应该检查的另一个[项目](https://github.com/ivanproskuryakov/Aisel)是 Aisel 是基于 Symfony2 和 AngularJS 的高负载项目的开源 CMS

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-07-15T08:12:45.953

我自己试图让 Symfony 和 AngularJS 一起工作时遇到了很多问题。但是，在处理它时，我学到了一些可能对您有所帮助的东西：

1.  要将 AngularJS 表达式`{{ variable }}`与树枝花括号分开，您有三种选择：

一个）。在 AngularJS 表达式周围使用引号`{{ '{{ variable }}' }}`

乙）。包围你的 AngularJS 代码`{% verbatim %} your code {% endverbatim %}`

C）。使用 AngularJS`interpolateProvider`服务

```
angular.module('myApp', []).config(function($interpolateProvider){
    $interpolateProvider.startSymbol('{[{').endSymbol('}]}');
}); 
```

2.  在 js 文件中，twig 无法为您生成 URL。为此，您可以使用“friendsofsymfony/jsrouting-bundle”。安装后，您可以将其用作： `$http.get(Routing.generate('route_name', {'id':id}));`

这可能不适用于您的提交，为什么？关于 $http.post，您应该知道的一件事是它不会将数据作为“表单数据”发送，而是作为“请求有效负载”发送，这是通过 HTTP POST 传输数据的正常方式。问题是这种“正常方式”并不等同于表单提交，这会导致使用 Symfony Request 对象解释数据时出现问题。

改用这个：

```
$http.put(url, $.param({foo: 'bar'}), {
     headers: {'Content-Type': 'application/x-www-form-urlencoded'}
 }); 
```

3.  当你想知道一个请求是否是控制器内的 AJAX 请求时，我们通常使用 isXMLHttpRequest() 方法。问题是 Angular 没有将其请求识别为 XMLHttpRequest 请求。用这个：

    `var app = angular.module('myModule', []); app.config(['$httpProvider', function($httpProvider) { $httpProvider.defaults.headers.common["X-Requested-With"] = 'XMLHttpRequest'; }]);`

4.  创建表单时，您可以选择通过 AngularJS 显示表单并让 Symfony Form 处理请求。为此，您需要禁用 CSRF 保护：

    `public function setDefaultOptions(OptionsResolverInterface $resolver) { $resolver->setDefaults(array( 'data_class' => '...', 'csrf_protection' => false )); }`

现在你的 symfony 表单可以接收来自自定义 Angular 请求的数据了。

除了所有的事情，我仍然不确定一件事，**是否使用 Symfony 或 AngularJS 显示您的表单**。

希望这可以帮助。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-07-07T23:23:29.367

理论上，你只会从 symfony 渲染你的索引页面，所以你根本不需要使用 twig。您只需要呈现第一页，然后角框架接管。Angularjs 有自己的模板语法和功能。我不认为有必要混合这两个，因为你可以完全分离两个框架。也许，让你的服务器响应 yourdomain.com 上的文件 index.html（你的角度应用程序），来自 symfony 的所有内容都来自 / api 前缀，或类似的东西。试想一下，您的 WebApi 项目是一台服务器，另一台是 angularjs 项目。在我看来，他们只会通过 api 调用进行交谈，根本不需要混合模板。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-10-30T13:12:59.713

通过网络搜索，我遇到了不同的解决方案。例如，您可以如前所述更改角度符号。但是，我更喜欢通过简单地告诉 twig 输出角度符号来使其尽可能简单：

```
{{ '{{entity.property}}' }} 
```

[http://louisracicot.com/blog/angularjs-and-symfony2/](http://louisracicot.com/blog/angularjs-and-symfony2/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-24T18:54:59.757

我遇到过同样的情况，我必须在 Symfony2 之上使用 AngularJS 开发单页应用程序。

如果你可以将两个应用程序分开，那就完美了！！！它将创建模型层和视图层的良好分离。如果不是这样，就像我的应用程序一样，您当然可以将 AngularJS 与 Symfony2 和 TWIG 完美结合使用。

我在 AngularJS 表达式周围使用了引号，例如 -

```
{{ '{{someAngularJsExpression}}' }} 
```

只是需要一些时间来适应它，但是当你这样做时，你不会面临很多问题。Symfony 还允许您使用其他模板引擎，但我不希望这样做。

所以我的建议是要么有两个不同的 AngularJS 和 Symfony 应用程序。如果您没有资源这样做，您可以按照我的方式进行操作。别担心，你会习惯的。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-01-25T09:52:08.530

今天每个人都想要带有 api 和 angular/vue 前端的 symfony 后端——这很好，但是这样我们就失去了前端的所有 symfony 能力。

我成功地将 Angular 与我的 symfony 应用程序一起使用。也许这不是高性能的东西，但它确实有效。

给你的一些提示：

1

阅读有关 $interpolateProvider 的信息

```
angular.module('myApp', [], function($interpolateProvider) {
            $interpolateProvider.startSymbol('{[{');
            $interpolateProvider.endSymbol('}]}');
  }); 
```

这样你就可以改变 {{ }} 的角度来换取别的东西。我正在使用 {[{ 和 }]} ，所以它不会干扰树枝

2

这里第二好的事情是 [https://symfony.com/doc/master/bundles/FOSJsRoutingBundle/index.html](https://symfony.com/doc/master/bundles/FOSJsRoutingBundle/index.html)

这将 symfony 路由与 js 连接起来，因此您在 js 中的所有角度视图/或 ajax 调用都可以由 symfony 生成 - 这为您提供了巨大的可能性

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-11-16T12:48:24.810

`{@ variable @}`在模板中使用。生成模板后，只需用简单的函数`{@`替换`{{`和`@}`替换即可。这种方式很干净，比字符串连接等快得多。`}}``str_replace`

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2014-09-12T11:11:18.473

您可以简单地转义大括号，例如：

```
Hello {{ '{{' }} name {{ '}}' }} 
```

它将被解析为下一个 HTML 代码：

```
Hello {{ name }} 
```

您也可以尝试使用左右大括号 HTML 编码字符集，例如：

```
&#123; name &#125; 
```

但我不确定AngularJS lib是否会理解它:)。

# iphone - NSDictionary 搜索键和更新值

> ID：10834391
> 
> 赞同：0
> 
> 时间：2012-05-31T13:14:53.593
> 
> 标签：iphone, nsarray, nsdictionary

我有一个存储在 plist 中的字典数组。字典键是：globalKey 和moneyKey。

现在我想在数组中搜索特定的键值。如果键值存在，我需要用另一个键的新值更新字典。

示例：我需要在键 @"globalKey" 中搜索值 5。如果值 5 存在，我需要使用键 @"moneyKey" 的新值更新该字典并将其保存到 plist。

最好的方法是什么？

这就是我添加新字典的方式：

```
array = [NSMutableArray arrayWithContentsOfFile:filePath];
NSDictionary *newDict = [[NSDictionary alloc] init];
newDict = [NSDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:month],@"globalKey", [NSNumber numberWithFloat:money], @"moneyKey", nil];
[array addObject:newDict];
[array writeToFile:filePath atomically:YES]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:28:34.357

如果我了解您要正确执行的操作，那么我认为您可以尝试以下操作：

```
NSMutableArray *myArray = [[NSMutableArray alloc] init]; // YOUR STARTING ARRAY OF NSDICTIONARIES

NSMutableIndexSet *indexSet = [[NSMutableIndexSet alloc] init];
NSMutableArray *dictionariesToReplace = [[NSMutableArray alloc] init];

for (int i=0; i < [myArray count]; i++) 
{
    // Pull out the value to check
    int valToCheck = [[[myArray objectAtIndex:i] valueForKey:@"globalKey"] intValue];

    // Check if a match was made
    if (valToCheck == 5) 
    {
        // Make a copy of the existing NSDictionary
        NSMutableDictionary *newDictionary = [[myArray objectAtIndex:i] mutableCopy];
        [newDictionary setValue:@"NEW VALUE" forKey:@"moneyKey"];

        // Add the dictionary to the array and update the indexset
        [dictionariesToReplace addObject:newDictionary];
        [indexSet addIndex:i];
    }
}

// Update the array with the new dictionaries
[myArray replaceObjectsAtIndexes:indexSet withObjects:dictionariesToReplace]; 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:26:04.867

您可以使用 NSPredicate 搜索字典数组，如下所示：

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"globalKey == 5"]; NSArray *predicateArray = [数组过滤数组UsingPredicate：谓词]；

# javascript - 使用 sinon.fakeServer 获取夹具数据

> ID：10834392
> 
> 赞同：2
> 
> 时间：2012-05-31T13:14:54.230
> 
> 标签：javascript, testing, backbone.js, jasmine, sinon

我正在尝试使用`sinon.fakeServer`or`sinon.useFakeXMLHttpRequest`和 require.js 模拟 Backbone.Model.fetch 请求。

这是我无法正常工作的代码 (1)

我的问题是：
如何使用 sinon.fakeServer 获取夹具数据？
请在这段代码末尾的两条评论。

PS：
如果我在获取有关 sinon.fakeServer 的代码的注释时发出请求，它会向服务器发出 get 请求。
如果我使用 sinon.fakeServer 发出获取请求，它不会获取任何东西（服务器和夹具）

* * *

(1)

```
define([
    'js/models/myModel',
    'js/spec/fixtures/myModel.fixture'
], function (MyModel) {

            beforeEach(function () {

        this.myModel = new MyModel();

                console.log("fixtures", this.fixtures.Task, this);
                this.fixture = this.fixtures.Task.valid;
                this.fixtureTask = this.fixture.response;
                this.server = sinon.fakeServer.create();
                this.server.respondWith(
                    "GET",
                    Routing.generate("api_get_tasks"),
                    JSON.stringify(this.fixture)
                );
            });

            afterEach(function () {
                this.server.restore();
            });

            it("should make the correct request", function() {
                this.server.respond();

                this.feeds.fetch();

            console.log(this.fixture); // this response is OK
            console.log(this.myModel.attributes); // it does not take the value from this.fixture

            console.log("fixtures", this.fixtures.Task, this); // see the picture below

             });

}); 
```

![在此处输入图像描述](../Images/6c8e74aa4070aff2913c23cab973d7a3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:40:56.893

您不会`fetch`在模型上调用该方法。

尝试这个：

```
 it("should make the correct request", function() {
        this.myModel.fetch();
        this.server.respond();
        console.log(this.fixture); // this response is OK
        console.log(this.myModel.attributes); // it does not take the value from this.fixture

        console.log("fixtures", this.fixtures.Task, this); // fixtures  Object  jasmine.Spec

 }); 
```

# php - PHP：如何获得一维数组的所有可能组合？

> ID：10834393
> 
> 赞同：34
> 
> 时间：2012-05-31T13:14:55.150
> 
> 标签：php, combinations

> **可能的重复：**
> [算法将采用数字或单词并](https://stackoverflow.com/questions/1256117/algorithm-that-will-take-numbers-or-words-and-find-all-possible-combinations)
> [在 PHP 中找到所有可能的组合组合、配置和排列](https://stackoverflow.com/questions/1679605/combinations-dispositions-and-permutations-in-php)

我已经阅读/尝试了很多关于 SO 的建议答案，但没有一个能解决问题

```
$array = array('Alpha', 'Beta', 'Gamma'); 
```

如何获得所有可能的组合？

预期输出：

```
array('Alpha',
      'Beta',
      'Gamma',
      'Alpha Beta',
      'Alpha Gamma',
      'Beta Alpha',
      'Beta Gamma',
      'Gamma Alpha',
      'Gamma Beta',
      'Alpha Beta Gamma',
      'Alpha Gamma Beta',
      'Beta Alpha Gamma',
      'Beta Gamma Alpha',
      'Gamma Alpha Beta',
      'Gamma Beta Alpha') 
```

注意：我正在寻找的答案应该包括*所有组合和所有不同的安排*。例如：**“Alpha Beta”**和**“Beta Alpha”**是 2 个不同的字符串，两者都应该在输出数组中。

提前致谢

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-31T14:40:40.333

我相信你的教授会对这个解决方案更满意：

```
<?php

$array = array('Alpha', 'Beta', 'Gamma', 'Sigma');

function depth_picker($arr, $temp_string, &$collect) {
    if ($temp_string != "") 
        $collect []= $temp_string;

    for ($i=0, $iMax = sizeof($arr); $i < $iMax; $i++) {
        $arrcopy = $arr;
        $elem = array_splice($arrcopy, $i, 1); // removes and returns the i'th element
        if (sizeof($arrcopy) > 0) {
            depth_picker($arrcopy, $temp_string ." " . $elem[0], $collect);
        } else {
            $collect []= $temp_string. " " . $elem[0];
        }   
    }   
}

$collect = array();
depth_picker($array, "", $collect);
print_r($collect);

?> 
```

这解决了它：

```
Array
(
    [0] =>  Alpha
    [1] =>  Alpha Beta
    [2] =>  Alpha Beta Gamma
    [3] =>  Alpha Beta Gamma Sigma
    [4] =>  Alpha Beta Sigma
    [5] =>  Alpha Beta Sigma Gamma
    [6] =>  Alpha Gamma
    [7] =>  Alpha Gamma Beta
    [8] =>  Alpha Gamma Beta Sigma
    [9] =>  Alpha Gamma Sigma
    [10] =>  Alpha Gamma Sigma Beta
    [11] =>  Alpha Sigma
    [12] =>  Alpha Sigma Beta
    [13] =>  Alpha Sigma Beta Gamma
    [14] =>  Alpha Sigma Gamma
    [15] =>  Alpha Sigma Gamma Beta
    [16] =>  Beta
    [17] =>  Beta Alpha
    [18] =>  Beta Alpha Gamma
    [19] =>  Beta Alpha Gamma Sigma
    [20] =>  Beta Alpha Sigma
    [21] =>  Beta Alpha Sigma Gamma
    [22] =>  Beta Gamma
    [23] =>  Beta Gamma Alpha
    [24] =>  Beta Gamma Alpha Sigma
    [25] =>  Beta Gamma Sigma
    [26] =>  Beta Gamma Sigma Alpha
    [27] =>  Beta Sigma
    [28] =>  Beta Sigma Alpha
    [29] =>  Beta Sigma Alpha Gamma
    [30] =>  Beta Sigma Gamma
    [31] =>  Beta Sigma Gamma Alpha
    [32] =>  Gamma
    [33] =>  Gamma Alpha
    [34] =>  Gamma Alpha Beta
    [35] =>  Gamma Alpha Beta Sigma
    [36] =>  Gamma Alpha Sigma
    [37] =>  Gamma Alpha Sigma Beta
    [38] =>  Gamma Beta
    [39] =>  Gamma Beta Alpha
    [40] =>  Gamma Beta Alpha Sigma
    [41] =>  Gamma Beta Sigma
    [42] =>  Gamma Beta Sigma Alpha
    [43] =>  Gamma Sigma
    [44] =>  Gamma Sigma Alpha
    [45] =>  Gamma Sigma Alpha Beta
    [46] =>  Gamma Sigma Beta
    [47] =>  Gamma Sigma Beta Alpha
    [48] =>  Sigma
    [49] =>  Sigma Alpha
    [50] =>  Sigma Alpha Beta
    [51] =>  Sigma Alpha Beta Gamma
    [52] =>  Sigma Alpha Gamma
    [53] =>  Sigma Alpha Gamma Beta
    [54] =>  Sigma Beta
    [55] =>  Sigma Beta Alpha
    [56] =>  Sigma Beta Alpha Gamma
    [57] =>  Sigma Beta Gamma
    [58] =>  Sigma Beta Gamma Alpha
    [59] =>  Sigma Gamma
    [60] =>  Sigma Gamma Alpha
    [61] =>  Sigma Gamma Alpha Beta
    [62] =>  Sigma Gamma Beta
    [63] =>  Sigma Gamma Beta Alpha
) 
```

# fortran - 如何为 Fortran 95+ 模块库提供显式接口，并隐藏实现

> ID：10834402
> 
> 赞同：4
> 
> 时间：2012-05-31T13:15:12.527
> 
> 标签：fortran, gfortran, fortran95

我正在使用 gfortran 的 95+ 扩展。我有一个实用模块库，我想链接到其他项目，即作为库或共享对象/dll。但是，在 Fortran 中，我不明白如何在不维护模块接口的两个副本的情况下将接口与 Fortran 中的实现分开。

在 C 中，我会将接口与实现分开，例如：

```
 api.h ←includes← impl.h
   ↑                 ↑
includes          includes
   ↑                 ↑
 user.c           impl.c 
```

有没有办法在现代 Fortran 中实现相同的效果？我是否需要向我的库中的用户提供 .mod 文件？

*   显式接口的单一定义
*   只有接口定义暴露给用户代码

**编辑：**总结（我认为是）答案：

*   需要 .mod 文件，因为它们包含显式接口定义

*   模块没有标准的 Fortran ABI——.mod 文件将是特定于编译器的

*   实现隐藏问题的唯一直接类似方法是子模块，它在 Fortran 2008 中定义，gfortran 不支持。

*   除了 @High-Performance-Mark 和 Fedora 页面指出的避免模块之外，最实用的方法是分发仅接口模块的包含文件以及用于实现的预编译 .mods。

*   使用包含有一些众所周知且令人讨厌的问题，包括可能重新定义常见块。

我有点惊讶这里实际上没有一个简单的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:39:16.697

我相信您可以使用 Fortran 2008 编译器[对子模块执行此操作。](http://fortranwiki.org/fortran/show/Submodules)来自 FortranWiki：

> 子模块是 Fortran 2008 的一项功能，它允许模块过程在模块中定义其接口，同时在单独的单元（子模块）中定义过程的主体。

来自[维基百科](http://en.wikipedia.org/wiki/Fortran)（重点是我的）

> [子模块允许] 模块的规范和实现以单独的程序单元表示，这改进了大型库的打包，**允许在发布权威接口的同时保留商业机密**，并防止编译级联。

我对子模块没有任何经验，它们还没有得到广泛的支持，但它们是需要注意的。

**编辑**由于许多编译器不支持子模块，因此讨论其他选项可能会有所帮助。

[此页面](http://jblevins.org/log/library-distribution)提出了与此类似的问题，并且有许多不错的链接。在关于 Google 群组的讨论中特别有用（请特别参阅[这篇文章](https://groups.google.com/d/msg/comp.lang.fortran/3mpu5fNgK9I/m-XL2mXIT3AJ)）。总之，一种选择是：

*   将所有库函数/子例程分组到一个文件中并单独分组（即不是模块的一部分）。

*   创建一个模块，该模块仅包含您想要向最终用户公开的那些子例程的接口。

*   为最终用户提供编译后的模块和库。然后，用户可以`use`在他/她的程序中使用该模块并链接到库。

这允许您“隐藏”您不想向最终用户公开的函数/子例程。

从我链接到的帖子中提取：

> 一些编译器会生成一个 .mod（或编译器赋予它的任何名称）文件和一个库文件。.mod 文件有符号；库文件包含模块中包含的可执行代码。在这种情况下，您必须将这两个文件分发给您的最终用户。
> 
> 此外，一些编译器（特别是 f95）将符号和可执行代码放入单个 .mod 文件中。在这种情况下，您只需向最终用户提供 .mod 文件。

**（最终！）编辑**Fedora wiki 上有一个[有用的页面：](http://fedoraproject.org/wiki/PackagingDrafts/FortranLibraries)

> 理想情况下，可移植的 Fortran 库会避免使用模块。好消息是已经定义了一个子模块规范，它允许模块的接口规范部分与过程源代码分开。On[c]e 这是在 Fortran 编译器中实现的，它应该被所有打包的库使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:01:03.090

另一种将接口与实现分离并且只编写一次的方法，自 FORTRAN77 以来（甚至可能在此之前）已被广泛使用的方法是使用`INCLUDE`一行将一个源文件的文本包含到另一个源文件中。避免 INCLUDE 有很多合理的软件工程原因，并且在使用它们方面有很多实际用途。

我应该补充一点，我喜欢 Chris 已经概述的方法，而不是诉诸 INCLUDE，但有时需要必须......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T16:00:39.140

这取决于你想做什么。如果出于商业机密的目的是为了向人们隐藏代码，您可以编写“接口”并提供预编译的库而不是实际代码。用户将使用接口编译文件，以便能够调用您的程序。

如果您只想练习仅公开必要内容的良好编程实践，您可以使用模块并通过将它们指定为“私有”来指定模块内部的一些过程或模块变量。人们可以使用编辑器查看代码，但在模块之外无法调用过程。您只能向程序的其余部分披露应该使用的程序并隐藏其他程序。您可以使用模块顶部的私有语句将“私有”设置为默认值，并指定需要在“公共”语句中可见的过程。

除非您不希望您的用户看到或编译您的源代码，否则我不会提供 .mod 文件。这就产生了支持各种编译器而不是简单地提供源代码的问题。“private”和“public”语句应该实现您的两个目标，即不重复接口定义和只公开您希望公开的接口。除非您的程序非常大或存在其他问题，否则其他方法对我来说似乎过于复杂。

# delphi - Delphi 2010 将不包含大图标

> ID：10834403
> 
> 赞同：9
> 
> 时间：2012-05-31T13:15:16.980
> 
> 标签：delphi, windows-7, delphi-2010

我们只是在我们的内部应用程序中添加了对 Window 7 的支持，并且我们在为应用程序提供对大图标的支持方面遇到了问题。

我在 IcoFX 中创建了一个包含默认图标范围的 .ico 文件，并将其分配给 Delphi 2010 中的项目。但是，当我运行应用程序时，显示的图标是默认（32x32？）图标。

问题是我在 Windows XP 机器上而不是在 Windows 7 上编译应用程序吗？

[更新] 我已经确认 XE2 在编译时包含所有的图标大小——当然是在 Windows 7 上编译时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T10:08:21.913

它可能来自 Windows IconCache 数据库。这是我在类似情况下遇到的一个问题。一些 Delphi 开发机器仍然显示几年前的图标，因为 IconCache 只存储路径，而不是文件内容的任何散列。

单击此链接了解如何清除 IconCache：
[https ://www.google.com/search?q=reset+iconcache+windows](https://www.google.com/search?q=reset+iconcache+windows)

# php - 使用 PHP 将文本文件写入 Azure 中的 Blob

> ID：10834406
> 
> 赞同：0
> 
> 时间：2012-05-31T13:15:25.120
> 
> 标签：php, azure, azure-storage, azure-blob-storage

我正在尝试将文本文件写入 blob。我知道我必须创建一个容器和一个 blob。我需要写这样的东西：

```
$text = 'some text';
$myFile = "file.txt";
$fh = fopen($myFile, 'w') or die("can't open file c");
fwrite($fh, $json);
fclose($fh); 
```

问题是我想编写这个 php 脚本但使用 blob（我们无权访问系统文件）我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:24:36.750

将文件保存到磁盘后，您需要将其上传到容器：

```
_storageClient->putBlob('mycontainer', 'file.txt', 'file.txt'); 
```

您可以使用 Windows Azure PHP SDK 来做到这一点。按照本教程了解更多信息：**[将 Blob 放入 Blob 容器中](http://www.windowsazure4e.org/learn/labs/lab2_azure_storage/lab2_1_azure_storage_blobs/#task10_1)**

# ruby-on-rails - ActiveRecord find_each 和 Postgres

> ID：10834407
> 
> 赞同：4
> 
> 时间：2012-05-31T13:15:34.637
> 
> 标签：ruby-on-rails, ruby, postgresql, activerecord

我收到以下错误：

```
PGError: ERROR:  operator does not exist: character varying >= integer
LINE 1: ...CT  "games".* FROM "games"  WHERE ("games"."uuid" >= 0) ORDE...
                                                             ^
HINT:  No operator matches the given name and argument type(s). You might need to add explicit type casts.
: SELECT  "games".* FROM "games"  WHERE ("games"."uuid" >= 0) ORDER BY "games"."uuid" ASC LIMIT 1000 
```

当我尝试这样做时：

```
Game.find_each do |game|
  # ...
end 
```

我的模型有一个字符串 (UUID) 主键：

```
class Game < ActiveRecord::Base
  self.primary_key = 'uuid'

  before_create do |game|
    game.uuid = UUIDTools::UUID.timestamp_create().to_s if game.uuid.blank?
  end
end 
```

我不知道 ActiveRecord 为什么要放入该`WHERE`子句，但这是完全没有必要的，也是类型错误的原因（因为它是字符串列，而不是整数列）。

那么，我该如何避免这种情况呢？我应该在我的模型定义中添加一些东西吗？或者我应该避免`find_each`并使用不同的方法？这是一个 rake 任务，它只是遍历所有条目并查找一些附加信息......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:33:00.030

它似乎`find_each`有一个非数字主键的错误：

[https://groups.google.com/group/compositekeys/browse_frm/month/2011-06](https://groups.google.com/group/compositekeys/browse_frm/month/2011-06)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:35:28.137

我认为不带任何参数的 find_each 将导致 find_by_id 其中 id >= 0。即使 ActiveRecord 使用正确的列，在您的情况下，它似乎并不知道该列的类型是 varchar，而不是整数。

您可以尝试使用另一种查找方法，或者尝试在 find_each 中添加一些条件。

这可能与使用字符串作为主键的问题有关：[http ://railsforum.com/viewtopic.php?id=11110](http://railsforum.com/viewtopic.php?id=11110)

干杯

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-18T02:31:43.177

此[博客文章](http://seejohncode.com/2011/09/16/uuids-and-find-in-batches/)修复了您的错误：

在 lib/clean_find_in_batches.rb

```
module CleanFindInBatches

  def self.included(base)
    base.class_eval do
      alias :old_find_in_batches :find_in_batches
      alias :find_in_batches :replacement_find_in_batches
    end
  end

  # Override due to implementation of regular find_in_batches
  # conflicting using UUIDs
  def replacement_find_in_batches(options = {}, &block)
    relation = self
    return old_find_in_batches(options, &block) if relation.primary_key.is_a?(Arel::Attributes::Integer)
    # Throw errors like the real thing
    if (finder_options = options.except(:batch_size)).present?
      raise "You can't specify an order, it's forced to be #{batch_order}" if options[:order].present?
      raise "You can't specify a limit, it's forced to be the batch_size" if options[:limit].present?
      raise 'You can\'t specify start, it\'s forced to be 0 because the ID is a string' if options.delete(:start)
      relation = apply_finder_options(finder_options)
    end
    # Compute the batch size
    batch_size = options.delete(:batch_size) || 1000
    offset = 0
    # Get the relation and keep going over it until there's nothing left
    relation = relation.except(:order).order(batch_order).limit(batch_size)
    while (results = relation.offset(offset).limit(batch_size).all).any?
      block.call results
      offset += batch_size
    end
    nil
  end

end 
```

并在 config/initializers/clean_find_in_batches.rb

```
ActiveRecord::Batches.send(:include, CleanFindInBatches) 
```

# button - Zend 表单删除按钮

> ID：10834410
> 
> 赞同：0
> 
> 时间：2012-05-31T13:15:50.920
> 
> 标签：button, zend-framework, zend-form, factory

好吧，这听起来很容易，但对我来说，这真是令人困惑。我一直在处理一个表单来编辑一个已经存在的数据库条目。一些字段是根据连接表中的记录创建和填充的。

这听起来有点粗略，所以我将尝试说明它。我有一个名为 Content 的表和一个名为 Files 的表，其中包含文件名和位置。我根据提供的内容 ID 获取文件名，然后表单创建字段，然后用文件名填充这些字段。

```
public function setFiles($files) {
    $i = 0;
    foreach ($files as $file) {
        $i++;
        $fieldname = "encloseditemname{$i}";
        $this->addElement('text', $fieldname, array('required'       => true,
                                                        'label'          => 'Enclosed item name (test)',
                                                        'value'          => $file['file_url'],
        ));
    }
} 
```

这工作得很好，但现在我想添加一个按钮，允许我删除一个文件。所以我认为应该做的是`fileDeleteAction()`在控制器中创建一个，然后让按钮重定向到该操作，让它删除数据库中的条目，然后用表单呈现视图。

让动作呈现不同的视图，然后它是标准视图，不是问题。编写代码以删除数据库中的条目，也不是问题。使用 addElements 方法作为工厂创建一个重定向到删除操作的按钮......巨大的问题。这就是我走多远。

```
$this->addElement('button', "deleteencloseditem{$i}", array( ??? )); 
```

如何让此按钮重定向到删除操作，而不会干扰表单底部的提交按钮，该按钮用于提交表单并调用控制器中的 editAction。

我已经研究过使用一些 javascript 来检测按下了哪个按钮，但我还没有使用 javascript，并且无法找出如何找出按下了哪个按钮，因为按钮名称和 id 取决于 setFiles 函数因此可以介于`deleteencloseditem1`并`deleteencloseditem5000`取决于它推送到表单中的文件名的数量。

我怎样才能完成这项工作？任何提示或建议都非常感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T07:49:46.300

一个 HTML`<form>`只能有一个`action`属性，表单在提交时路由到该属性。但是，客户端和服务器端都有解决此问题的方法。

**服务器端**

1.  让所有按钮简单地提交到您的表单`action`（`$this->setAction(...)`在您的表单代码中设置）
2.  `post`在此操作中，通过检查（或`get`）变量来确定单击了哪个按钮
3.  根据单击的按钮重定向到正确的操作

**客户端**

使用按钮的`click`事件来确定单击了哪个按钮。我假设该按钮会`ID`告诉您有关您要删除的文件的信息。假设您给所有删除按钮 a `class="delete"`，您可以使用 jQuery 执行以下操作：

```
$('input.delete').click(function(){
    // remove 'deleteencloseditem' from the button's ID
    // to only keep the file number
    var myFileID = $(this).attr('id').replace('deleteencloseditem', '');
    window.location.href = 'myLocation?fileID=' + myFileID;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:03:59.037

只需使用路由。表单的路由意味着将其定向`action`到相应的路由。您在表单操作中的路径将导致 ZF 中的路由使用关联的控制器和操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:31:44.297

解决此问题的最简单方法是仅使用删除操作的链接，然后将其设置为按钮。

或者，您可以在一个表单中使用两个按钮，您只需对它们进行不同的标记并在 POST 上测试标签名称。

```
if ($this->getRequest()->getPost('submit') == 'Label') 
```

# tumblr - Tumblr exif：焦距错误

> ID：10834415
> 
> 赞同：-1
> 
> 时间：2012-05-31T13:15:59.997
> 
> 标签：tumblr, exif, photography

看来tumblr的exif显示的是35mm等效焦距而不是实际焦距......而且35mm等效应该是50mm * 1.6 = 80mm，它显示的是76mm。我给他们发了邮件，但他们不回。有人有这个问题吗？

[我的微博](http://r0d0t.tumblr.com)

截图： [http ://dl.dropbox.com/u/23176032/wrong_exif.jpg](http://dl.dropbox.com/u/23176032/wrong_exif.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T13:08:44.253

EXIF 数据不能归咎于 Tumblr。它在您上传的文件中。您使用的相机或任何后处理软件都会设置此值。相机通常会添加两个标签，即镜头的实际（物理）焦距和假装相机具有 35 毫米（全画幅）传感器的校正焦距。后者更有用，因为这样您可以比较相机和镜头之间的焦距。傻瓜相机通常具有非常小的传感器和通常小于 10 毫米的小焦距。从您的问题来看，您似乎有一个裁剪传感器 DSLR，正如您所说的，传感器比全画幅小 1.6 *。显然，相机本身的传感器比它大，几乎比全画幅小 1.5*。

然后是后期处理软件。裁剪图像时，一些程序会调整焦距。它会假装你放大了，并且使用了比实际更长的焦距。

要确定 EXIF 会发生什么，您可以使用 Phil Harvey 的精彩 ExifTool。它可以从您的原始相机文件以及您的 PP 软件编辑的文件中输出 EXIF。[你可以在这里](http://owl.phy.queensu.ca/~phil/exiftool/)免费下载。它还允许您编辑 EXIF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T06:04:24.807

我也有这个问题。令人讨厌的是，我用全画幅相机拍摄，它仍然会调整焦距，使其与 35mm 等效。

据我所知，这是一个 Tumblr 特定问题 - 检查我上传的图像上的 EXIF 数据，它显示焦距为 50mm。然后 Tumblr 声称我上传时的焦距是 53 毫米（这让我认为这些更改是特定于相机的）。即使我再次从 Tumblr 下载图像并查看下载图像的 EXIF，它仍显示 50mm。

这让我相信 Tumblr 可能会针对传感器尺寸进行特定于相机的调整。不过有点恼人的是，它看起来好像导致我们俩的焦距不正确（等效 35 毫米）。

# windows-7 - OpenOffice：为所有用户设置为默认值

> ID：10834416
> 
> 赞同：1
> 
> 时间：2012-05-31T13:16:07.330
> 
> 标签：windows-7, openoffice.org, file-association

在我们的办公室里，我们有共享的工作空间（很多人可以坐在同一台电脑前）。我们正在使用 OpenOffice，每次有人第一次坐在车站时，我都必须将文档（Word、Excel 等）与 OpenOffice 相关联。

有没有办法自动将 OpenOffice 与坐在这些站点的任何用户的文档相关联？

我们使用的是 Windows 7 专业版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T15:33:35.017

您是否尝试以管理员身份设置文件关联？

```
As Admin, Open Control Panel > Control Panel Home  > Default Programs > Set Associations.     
Select a file type in the list and click Change Program. 
```

# grails - Grails 命令对象：如何将 request.JSON 加载到其中？

> ID：10834422
> 
> 赞同：12
> 
> 时间：2012-05-31T13:16:22.873
> 
> 标签：grails, grails-controller

**问题**：有没有办法用 request.JSON 数据自动绑定命令对象？

鉴于我的 grails 控制器中的这个简单的 Command 对象：

```
class ProfileCommand{

int id
String companyName

static constraints = {
    companyName blank: false
    id nullable: false
}

@Override
public String toString() {
    return "ProfileCommand{id=$id, companyName='$companyName'}";
}
} 
```

和我的控制器方法签名：

`def update(ProfileCommand command) {...}`

如何将`request.JSON`数据放入我的命令对象？

到目前为止，我能够做到的唯一方法是在`update()`方法中手动创建命令对象，将 request.JSON 作为构造函数参数传入：

```
 def command = new ProfileCommand(request.JSON)

    log.debug "Command object contents: $command" 
```

上面的调试命令产生：

```
Command object contents: ProfileCommand{id=1, companyName='Blub Muckers'} 
```

这正是我想要的（为上述解决方案向 Oliver Tynes 大喊大叫）。不幸的是，在我创建命令后调用`command.validate()`会产生以下异常：

```
Class org.codehaus.groovy.grails.web.taglib.exceptions.GrailsTagException
Message Tag [validate] is missing required attribute [form] 
```

我正在使用 v2.0.3，uris 产生了与 v2.0.4 相同的异常。

***在 grails 邮件列表上更新*** Per Ian Roberts，您需要将`@Validateable`注释添加到命令类才能开始`validate()`工作。谢谢，伊恩！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:50:47.970

我不确定是否有任何配置方式可以进行自动 JSON 参数数据绑定；您可能能够做的一件事是为您的操作编写一个过滤器，该过滤器接受 JSON 请求输入，基本上将 request.JSON 直接重新映射到根参数映射，理论上这应该允许自动数据绑定发生。

就像是：

```
class JSONParamMapFilters {
  def filters = {
     before = {
        remapFilter(controller:'yourController', action:'update') {
           request.JSON.each { k,v ->
               params[k] = v
           }
        }
     }
  }
} 
```

然后，您可以通过正则表达式/命名约定将此过滤器扩展到任何适用的控制器操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T08:22:44.643

你应该`parseRequest=true`在`UrlMappings.groovy`. 例如：

```
"/user/$id/$action?"(controller: "userProfile", parseRequest: true) {
    constraints {
        id matches: /^[0-9]+$/
    }
} 
```

然后您可以`params`在方法参数中使用变量或将 json 绑定到命令对象：

`def index(MyCommand command){...}`

两者都应该工作。但在某些情况下，它会从 json 中丢失一些信息（绑定到地图）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T15:22:38.810

如果您不使用命令对象作为任何控制器操作的参数，那么 Grails 将不会使用 validate 方法自动增强它。您需要使用 @Validateable 注释该类以告诉 Grails 它应该被增强。

[http://grails.org/doc/latest/guide/validation.html#validationNonDomainAndCommandObjectClasses](http://grails.org/doc/latest/guide/validation.html#validationNonDomainAndCommandObjectClasses)

# c++ - 我的字节数组到十六进制字符串转换器有什么问题，或者为什么在写入文件时它会在某个位置后剪切符号？

> ID：10834424
> 
> 赞同：2
> 
> 时间：2012-05-31T13:16:31.983
> 
> 标签：c++, arrays, hex, byte

这就是我所拥有的：

```
std::string GetBytesAsHEX(const char *arr, int arr_size)
{
    BYTE ch = 0x00;
    char pseudo[] = { '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F' };

    std::string ret_val;

    for (int i = 0; i < arr_size; i++)
    {
        ch = (BYTE) (arr[i] & 0xF0);
        ch = (BYTE) (ch >> 4);
        ch = (BYTE) (ch & 0x0F);
        ret_val += pseudo[(int)ch];
        ch = (BYTE) (arr[i] & 0x0F);
        ret_val += pseudo[(int)ch];
        ret_val += ' ';
    }

    return ret_val;
}

int __stdcall Hooked_send(SOCKET s, const char *buf, int len, int flags)
{
    h_send.PreHook();
    //--------------

    int ret_val = send(s, buf, len, flags);

    if (LogPackets)
    {
        FILE *fptr = fopen("packet_log_hex.txt", "a");
        char header[128] = { 0 };
        sprintf(header, "\nSENT %i bytes: ", ret_val);
        fwrite(header, strlen(header), sizeof(char), fptr);
        fwrite(GetBytesAsHEX(buf, ret_val).c_str(), ret_val, sizeof(char), fptr);

        fclose(fptr);

        fptr = fopen("packet_log.txt", "ab");
        fwrite(buf, ret_val, sizeof(char), fptr);
        fclose(fptr);
    }

    //---------------
    h_send.PostHook();

    return ret_val;
}

int __stdcall Hooked_recv(SOCKET s, char *buf, int len, int flags)
{
    h_recv.PreHook(); //restore original recv address

    int ret_val = recv(s, buf, len, flags);

    if (ret_val > 0 && LogPackets)
    {
        FILE *fptr = fopen("packet_log_hex.txt", "a");
        char header[128] = { 0 };
        sprintf(header, "\nRECV %i bytes: ", ret_val);
        fwrite(header, strlen(header), sizeof(char), fptr);
        fwrite(GetBytesAsHEX(buf, ret_val).c_str(), ret_val, sizeof(char), fptr);

        fclose(fptr);

        fptr = fopen("packet_log.txt", "ab");
        fwrite(buf, ret_val, sizeof(char), fptr);
        fclose(fptr);
    }

    h_recv.PostHook(); //replace recv address with Hooked_recv

    return ret_val;
} 
```

这就是我在文件 packet_log_hex.txt 中得到的

```
SENT 16 bytes: 55 47 0C 00 00 0 //this is way not 16 bytes... and why so weird termination?
RECV 32 bytes: 55 47 1C 00 00 00 10 00 03 00 00
RECV 16 bytes: 55 47 0C 00 00 0
SENT 16 bytes: 55 47 0C 00 00 0
RECV 16 bytes: 55 47 0C 00 00 0
SENT 16 bytes: 55 47 0C 00 0B 0
RECV 16 bytes: 55 47 0C 00 00 0
SENT 16 bytes: 55 47 0C 00 10 F
RECV 16 bytes: 55 47 0C 00 00 0
SENT 16 bytes: 55 47 0C 00 C5 E 
```

packet_log.txt（这个包含纯字节）（从十六进制编辑器复制）

```
55 47 0C 00 00 00 00 00 02 00 00 00 01 00 03 02
55 47 1C 00 00 00 10 00 03 00 00 00 2D 04 00 00 50 07 F3 17 1A 37 34 48 81 D2 5E 13 73 21 37 A3
55 47 0C 00 00 00 00 00 12 00 00 00 00 00 00 00
55 47 0C 00 00 00 00 00 12 00 00 00 30 00 00 00
55 47 0C 00 00 00 00 00 12 00 00 00 00 00 00 00
55 47 0C 00 0B 00 00 00 12 00 00 00 40 00 00 00
55 47 0C 00 00 00 00 00 12 00 00 00 00 00 00 00
55 47 0C 00 10 FB 00 00 12 00 00 00 50 00 00 00
55 47 0C 00 00 00 00 00 12 00 00 00 00 00 00 00
55 47 0C 00 C5 EE 00 00 12 00 00 00 60 00 00 00 
```

呃，你看到了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:20:41.363

`ret_val`您在以下行中使用：

```
fwrite(GetBytesAsHEX(buf, ret_val).c_str(), ret_val, sizeof(char), fptr); 
```

是您从`recv()`调用中收到的字节数。这不是您将接收到的字节转换为以空格分隔的十六进制字符串后需要写入文件的字节数。您的电话应该是：

```
std::string hex_str = GetBytesAsHEX(buf, ret_val);
fwrite(hex_str.c_str(), hex_str.length(), sizeof(char), fptr); 
```

至于奇怪的终止，这是由同一件事引起的。通过简单地计算它们，您可以看到您在第一行中准确地写入了 16 个字节，但它是转换后的字符串的 16 个字节：

```
 111111
0123456789012345

55 47 0C 00 00 0 
```

# c++ - 如何定义静态常量成员？

> ID：10834426
> 
> 赞同：7
> 
> 时间：2012-05-31T13:16:38.497
> 
> 标签：c++, g++, constants, static-members

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:21:01.710

Say:

```
Test::Dummy const Test::dummy = { }; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T21:42:57.280

See [http://gcc.gnu.org/wiki/VerboseDiagnostics#uninitialized_const](http://gcc.gnu.org/wiki/VerboseDiagnostics#uninitialized_const) (which gives the relevant reference to the standard) and also the [GCC 4.6 release notes](http://gcc.gnu.org/gcc-4.6/changes.html#cplusplus) which say

> In 4.6.0 and 4.6.1 G++ no longer allows objects of const-qualified type to be default initialized unless the type has a user-declared default constructor. In 4.6.2 G++ implements the proposed resolution of DR [253](http://open-std.org/JTC1/SC22/WG21/docs/cwg_active.html#253), so default initialization is allowed if it initializes all subobjects. Code that fails to compile can be fixed by providing an initializer e.g.

```
struct A { A(); };
struct B : A { int i; };
const B b = B(); 
```

> Use -fpermissive to allow the old, non-conforming behaviour.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:33:00.260

you could also add a default ctor to `class Dummy`:

```
class Dummy { public: Dummy(){} }; 
```

in line 4.

EDIT: It appears that gcc 4.4 fails to generate the default ctor for class `Dummy`. Thus the above overcomes this compiler bug directly.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:36:06.760

With gcc 4.4, use

```
Test::Dummy const Test::dummy = Test::Dummy; 
```

With compilers supporting C++11, you can use uniform initialization syntax:

```
Test::Dummy const Test::dummy = { }; 
```

But I don't think that's supported by gcc 4.4.

# iphone - 如何从 UITableView (iPhone/iPad) 中删除部分

> ID：10834431
> 
> 赞同：4
> 
> 时间：2012-05-31T13:16:54.670
> 
> 标签：iphone, ipad, uitableview

我试图想出一种从表视图中删除部分的好方法（在编码和外观方面）。理想情况下，我想创建一种删除部分的方法，该方法类似于删除 a 的过程`UITableViewCell`（即，按下时显示红色删除按钮的红色减号按钮）。

这个问题有没有预先存在的解决方案？我已经尝试对这些区域进行一些研究，但我真的找不到任何有用的东西。如果没有预先存在的解决方案，我想我可以尝试实施一个。我的计划是为每个部分创建一个自定义标题。在自定义标题中，我将添加删除按钮，其反应方式与删除行时相同。人们认为这会奏效吗？

所以要明确一点，我在问是否有现有的解决方案来删除`UITableView`. 如果没有，那么我想知道人们是否认为我的想法可行，或者我是否忽略了任何问题。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T15:30:54.213

实现自己的 headerView 是要走的路。Apple 不提供用于删除部分的内置用户界面。如果你拉下 iOS 设备的通知区域，你就会知道如何让它看起来不错。

实现也不是很复杂。我用过这样的东西：

```
- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {
    return 21.0f;
}

- (UIView *)tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 21)];
    headerView.backgroundColor = [UIColor lightGrayColor];

    UILabel *headerLabel = [[UILabel alloc] initWithFrame:CGRectMake(8, 0, 250, 21)];
    headerLabel.text = [NSString stringWithFormat:@"Section %d", section];
    headerLabel.font = [UIFont boldSystemFontOfSize:[UIFont systemFontSize]];
    headerLabel.textColor = [UIColor whiteColor];
    headerLabel.backgroundColor = [UIColor lightGrayColor];
    [headerView addSubview:headerLabel];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.tag = section + 1000;
    button.frame = CGRectMake(300, 2, 17, 17);
    [button setImage:[UIImage imageNamed:@"31-circle-x"] forState:UIControlStateNormal];
    [button addTarget:self action:@selector(deleteButtonPressed:) forControlEvents:UIControlEventTouchUpInside];
    [headerView addSubview:button];
    return headerView;
}

- (IBAction)deleteButtonPressed:(UIButton *)sender {
    NSInteger section = sender.tag - 1000;
    [self.objects removeObjectAtIndex:section];
    [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:section] withRowAnimation:UITableViewRowAnimationAutomatic];

    // reload sections to get the new titles and tags
    NSInteger sectionCount = [self.objects count];
    NSIndexSet *indexes = [NSMutableIndexSet indexSetWithIndexesInRange:NSMakeRange(0, sectionCount)];
    [self.tableView reloadSections:indexes withRowAnimation:UITableViewRowAnimationNone];
} 
```

![在此处输入图像描述](../Images/2359054c757236829d707dc243307fc6.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T13:37:30.337

是的，有现有方法可用于删除 tableview 中的部分。您可以使用以下方法：

```
[m_TableView beginUpdates];
[m_TableView deleteSections:[NSIndexSet indexSetWithIndex:1] withRowAnimation:UITableViewRowAnimationTop];
[m_TableView endUpdates]; 
```

但是，当您删除必须修改的部分时，您必须记住一件事：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

因为现在您的节号减少了 1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T14:34:18.410

如果我是正确的，Apple 仅在 UITableView 编辑模式下提供行删除。

我可以想到 3 种添加按钮来删除特定部分的方法。

首先，在部分之外放一个按钮`UITableView`，它不会在里面`UITableView`（我不认为你可以在里面的部分标题之外放一个按钮`UITableView`，或者你可以但我不知道怎么做）。您可以检查是否`UITableView`处于可编辑模式并相应地显示或隐藏您的按钮。

其次，如果你确实想要一个删除按钮`UITableView`，你可以创建自定义 UITableViewCell 并将部分删除按钮放在单元格内。这样，您将在每个 中都有一个按钮`UITableViewCell`，这并不是那么好。

第三个选择是不提供任何按钮，只是让用户以 Apple 默认方式删除单元格。您所做的只是继续跟踪数组中用于填充该部分的对象数量。如果计数为 0，则删除该部分。

这是我之前做的类似事情：

我有一个`NSMutableArray`firstLevelArray 包含几个`NSMutableArray`secondLevelArray 里面每个都包含一些对象。因此，每个 secondLevelArray 将为一个部分提供数据，而 secondLevelArray 中的一个对象将为每个单元格提供数据。在`- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView`，我做`return [firstLevelArray count];`，无论我想删除一个部分，之后`[firstLevelArray removeObjectAtIndex:someIndex]`，我做`[myTableView reloadData]`

希望这可以帮助

# php - php中需要级联吗？

> ID：10834432
> 
> 赞同：0
> 
> 时间：2012-05-31T13:16:55.577
> 
> 标签：php, joomla

我有三个文件`a.php`，`b.php`和`c.php`。

一个.php：`require b.php`

b.php：`require c.php`

我可以使用`c.php`in 中的功能`a.php`吗？这对我不起作用，但我认为我做错了什么。W3 学校、tiztag 等没有帮助。

真实代码
`default.php`：：
`require_once(JPATH_COMPONENT.DS.'controllers'.DS.'easyblog.php');`

`/controllers/easyblog.php`：
`include JPATH_COMPONENT.DS.'helpers'.DS.'easyblog.php'`

`/helpers/easyblog.php`
`function getDefault()`

尝试运行此程序时出现以下错误：
致命错误：在第 43 行的 /helpers/easyblog.php 中调用未定义的方法 xmlrpcHelper::getDefault()

（附录：是否可以使用 require_once 或包含将其搞砸？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:44:03.123

从[手册](http://php.net/manual/en/function.include.php)：

> 当一个文件被包含时，它包含的代码继承了包含发生的行的变量范围。从那时起，调用文件中该行的任何可用变量都将在被调用文件中可用。但是，包含文件中定义的所有函数和类都具有全局范围。

“它对我不起作用”不是错误消息——也许如果你更详细地解释你在做什么以及你认为它失败的原因，你可能会得到一个更具体的回应。

# svn - SVN 仅复制某些文件类型

> ID：10834439
> 
> 赞同：1
> 
> 时间：2012-05-31T13:17:17.827
> 
> 标签：svn

在我的脚本中，我只想将 .csv 文件从我当前的构建复制到另一个文件夹。我目前有...

```
svn copy $repoName/*.csv $targetRepo 
```

但我真的没想到会奏效。然而，这基本上是我想要完成的。SVN 有办法只复制某些类型的文件吗？如果没有，我可以朝哪个方向去做呢？

（有用吗？：这一切都是通过自动 Perl 脚本完成的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:38:15.733

我找到了解决方案。这有点有力，但似乎有效。这是我的 Perl 代码：

```
system("svn list $repoName --depth infinity | find \".csv\" >> csvs.txt");
open FILE, "limits.txt" or die $!;
while (my $line = <FILE>){      
   system("svn copy".$line." $targetRepo");
}   
close FILE;
system("del /s /q csvs.txt"); 
```

我在这里简化了很多，但基本上它只是找到所有.csv，把它们放在一个列表中，然后一个一个地复制这些文件。

# jquery - Jquery动画悬停样式

> ID：10834440
> 
> 赞同：0
> 
> 时间：2012-05-31T13:17:33.463
> 
> 标签：jquery, css, jquery-animate

是否可以在 jquery 中为一般标签`a`或`div`相应的悬停样式设置动画，而无需为每个标签/类声明不同的类？

例如`a`，`a:hover`在 CSS 标准中，我可以让 Jquery 告诉动画到该样式而不是创建两个不同的自定义类吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:20:28.143

不，您不能强制将元素设置为其伪类之一。这些只能由浏览器本身应用。

通常，您会为两者定义悬停样式`:hover`，`.hover`因此您仍然可以使用`addClass('hover')`.

```
a:hover, a.hover {
     // Fancy styling goes here
} 
```

如果你的层次结构更深，你最终会写很多这两个选择器。不幸的是，这是（我知道）这样做的唯一方法。

# testing - 如何开始构建使用 TypeMock ？

> ID：10834442
> 
> 赞同：1
> 
> 时间：2012-05-31T13:17:42.937
> 
> 标签：testing, types, mocking, nunit, typemock

我使用 typemock 进行单元测试。如何开始构建使用 typemock。我只能使用 typemock 和 msbuild 吗？否则我应该使用 nunit-console.exe 吗？

当我开始使用单元测试构建时......我的错误在哪里？

```
<Import Project="C:\Program Files (x86)\Typemock\Isolator\7\TypeMock.MSBuild.Tasks" />

  <Target Name="BeforeTest">
    <TypeMockStart LogPath="C:\TypeMockLogs" LogLevel="9" Target="3.5" />
    <Exec ContinueOnError="false" WorkingDirectory="$(SolutionRoot)" Command="$(NUNIT) \bin\Debug\Business.Tests.dll" />
  </Target>
  <Target Name="AfterTest">
    <TypeMockStop Undeploy="true" />
  </Target>

  <PropertyGroup>
    <TypeMockLocation>C:BuildIsolator</TypeMockLocation>
    <NUNIT>"C:\Program Files (x86)\NUnit 2.6\bin\nunit-console.exe"</NUNIT>
    <TMockRunnerPath>"C:\Program Files (x86)\Typemock\Isolator\7\TMockRunner.exe"</TMockRunnerPath>
    <MSTestPath>"D:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE\MSTest.exe"</MSTestPath>
  </PropertyGroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:17:01.530

为了使用 MSBuild 运行测试，您需要使用 TypeMockStart 和 TypeMockStop 任务，或者使用 TMockRunner。更简单的方法是使用 Start & Stop：

```
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <PropertyGroup>
        <TypeMockLocation>C:\Program Files\TypeMock\Isolator\5.0</TypeMockLocation>
        <NUnit>"C:\Program Files\NUnit\bin\nunit-console.exe"</NUnit>
    </PropertyGroup>

    <Import Project ="$(TypeMockLocation)\TypeMock.MSBuild.Tasks"/>

    <Target Name="TestWithTypeMock">
        <TypeMockStart/>
        <Exec ContinueOnError="true" Command="$(NUnit) Test.dll"/>
        <TypeMockStop/>
    </Target>

</Project> 
```

此示例假定构建代理已安装隔离器。如果不是，你还需要在 Start 之前调用 register 任务，你可以在[这里找到它的文档](http://docs.typemock.com/Isolator/##typemock.chm/Documentation/MSBuild.html.)

```
<TypeMockRegister Company ="TypeMock" License="TypeMockLicense" AutoDeploy="True"/> 
```

*免责声明 - 我在 Typemock 工作*

# javascript - 用javascript写变音符号

> ID：10834443
> 
> 赞同：1
> 
> 时间：2012-05-31T13:17:43.413
> 
> 标签：javascript, utf-8, web

我的标题中有这个

```
<meta charset="utf-8">
<meta http-equiv="Content-type" content="text/html; charset=UTF-8" /> 
```

这在我的htaccess中：

```
# UTF-8 encoding
# ----------------------------------------------------------------------

# Use UTF-8 encoding for anything served text/plain or text/html
AddDefaultCharset utf-8

# Force UTF-8 for a number of file formats
AddCharset utf-8 .css .js .xml .json .rss .atom 
```

我的浏览器是谷歌浏览器。当我在 html 中使用 javascript 变量作为输出时，'ä' 会变成 'Ã¤' 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:19:27.810

您是否还将文档另存为 UTF-8？如果您使用的是 Notepad++，请尝试更改文档的编码，保存并刷新站点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:20:22.317

您应该在`<script>`包含您的文件的标记中设置正确的字符集，或者将纯 ASCII 范围之外的所有符号编码为 un​​icode 实体 - \xNNNN，从而使文件字符集中性。一些 minifiers，比如 Google Closure Compiler，可以为你做这件事。

# c# - 使用 REST Web 服务 API 在 MVC3 应用程序中进行对象映射

> ID：10834449
> 
> 赞同：2
> 
> 时间：2012-05-31T13:17:57.910
> 
> 标签：c#, asp.net-mvc-3, api, rest

我正在尝试使用 RESTful Web 服务 API 并使用返回的数据来构建 MVC3 站点。

我不确定在处理返回的数据时如何最好地进行。我应该为返回数据手动创建类还是有更简单/更安全的方法？

任何人都可以指出一个好的教程的方向吗？

**编辑**

要添加一些背景信息...

我可能会调用 API 以获取某些区域信息。这可能会导致返回一组 depot。深入研究数据，然后我可以请求与站点关联的路线，然后请求与站点关联的驱动程序。

在上面的示例中，我需要为区域、站点和驱动程序创建对象。

有没有一种更简洁的方法来做到这一点（可能来自 WSDL），或者它是一个为每个对象制作属性的打字练习。

我想我可以使用实体框架之类的东西来对对象进行建模，而无需将数据库暴露给我。这样的事情存在吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:23:58.650

如果您的休息服务返回一个`XML`，您可以将其加载到 XMLDocument /XDocument 并通过它解析以获取相关详细信息。您也可以这样做`LINQ TO XML`以使事情变得更容易。

如果它正在返回`JSON`，您可以使用`WebClient.DownloadString`方法以字符串格式获取数据，然后将其反序列化到您的实体。在这种情况下，您需要那些假/代理类。

# android - 拖放线性布局的子视图

> ID：10834457
> 
> 赞同：2
> 
> 时间：2012-05-31T13:18:34.463
> 
> 标签：android, android-layout, drag-and-drop, scrollview

我有 5 个不同子视图的布局，子视图是相对布局，其中包含多个子视图，而且所有视图也不同。因此我使用滚动视图作为根容器，如下所示：

```
<ScrollView android:layout_width="match_parent" android:layout_height="match_parent"
        android:fillViewport="true" android:scrollbars="none">

        <LinearLayout android:layout_width="match_parent" android:layout_height="match_parent"
            android:id="@+id/home_page_scrollview_outer_layout">
         <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:layout_marginLeft="10dip"
            android:layout_marginRight="10dip"
            android:layout_alignParentLeft="true"
            android:background="@drawable/homescreen_yellow" >

            <ImageButton android:id="@+id/hp_imgbtn_listA" android:layout_width="wrap_content" android:layout_height="wrap_content"
                 android:layout_alignParentRight="true" android:src="@drawable/arrow_right">
            </ImageButton>    

            <ListView
                android:id="@+id/listA"
                android:layout_below="@id/hp_txt_listA"
                android:background="@color/home_page_bg"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content">
            </ListView>
     </RelativeLayout>

    <!-- List B layout -->    

        <RelativeLayout     
            android:layout_weight="1"
            android:layout_marginRight="10dip"
            android:background="@drawable/homescreen_cyan"
            android:layout_width="match_parent" 
            android:layout_height="wrap_content">

        </RelativeLayout>

     <!-- List C layout -->   

        <RelativeLayout     
            android:layout_weight="1"
            android:layout_marginRight="10dip"
            android:background="@drawable/homescreen_purple"
            android:layout_width="match_parent" 
            android:layout_height="wrap_content">

    </RelativeLayout>  

     <!-- List D layout -->   

        <RelativeLayout 
            android:layout_weight="1"   
            android:layout_marginRight="10dip"
            android:background="@drawable/homescreen_turqoise"
            android:layout_width="match_parent" 
            android:layout_height="wrap_content">

    </RelativeLayout> 

     <!-- List E layout -->   

        <RelativeLayout 
            android:layout_weight="1"   
            android:layout_marginRight="10dip"
            android:background="@drawable/homescreen_turqoise"
            android:layout_width="match_parent" 
            android:layout_height="wrap_content">

    </RelativeLayout> 
    <LinearLayout>
</ScrollView> 
```

**我想要有拖放效果 LinearLayout 容器。** 知道如何实现 LinearLayout 容器的拖放吗？我有 ListView 的工作示例，我想滚动视图也应该是相同的，**但是滚动视图中只能包含一个子视图。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T16:31:31.170

将此添加到您的 onCreate 中：

```
 yourView.setOnTouchListener(new OnTouchListener() {

        public boolean onTouch(View v, MotionEvent event) {
            // TODO Auto-generated method stub
            drag(event, v);
            return false;
        }
    }); 
```

这对任何方法之外的您的活动类。

```
 public void drag(MotionEvent event, View v)
        {

            RelativeLayout.LayoutParams params = (android.widget.RelativeLayout.LayoutParams) v.getLayoutParams();

            switch(event.getAction())
            {
               case MotionEvent.ACTION_MOVE:
               {
                 params.topMargin = (int)event.getRawY() - (v.getHeight());
                 params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
                 v.setLayoutParams(params);
                 break;
               }
               case MotionEvent.ACTION_UP:
               {
                 params.topMargin = (int)event.getRawY() - (v.getHeight());
                 params.leftMargin = (int)event.getRawX() - (v.getWidth()/2);
                 v.setLayoutParams(params);
                 break;
               }
               case MotionEvent.ACTION_DOWN:
               {
                v.setLayoutParams(params);
                break;
               }
            } 
```

# eclipse - jQuery 移动内容辅助

> ID：10834459
> 
> 赞同：1
> 
> 时间：2012-05-31T13:18:43.483
> 
> 标签：eclipse, jquery-mobile, eclipse-plugin, aptana, content-assist

我到处搜索，有谁知道如何在 Eclipse 中获得 jQuery Mobile 内容辅助。我正在运行 indigo，并且安装了 Aptana 3。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T03:14:51.663

这是我能找到的最接近的帮助。 [http://camcollins.com/2012/01/adventures-in-ios-land-day-1/](http://camcollins.com/2012/01/adventures-in-ios-land-day-1/)

请记住，Titanium Studio 而不是 Aptana 具有 jQuery Mobile 支持。据我所知，Aptana 没有包含这些内容的计划。因此，要么使用带有 Titanium 的 Eclipse 作为插件，要么在此处下载 Studio [http://www.appcelerator.com/platform/titanium-studio](http://www.appcelerator.com/platform/titanium-studio)

# c# - 为 USB 设备 C# 强制刷新文件现金

> ID：10834466
> 
> 赞同：0
> 
> 时间：2012-05-31T13:19:08.650
> 
> 标签：c#, file, caching, usb

所以我一直在做一个项目，它将搜索驱动器，尝试识别特定的 USB 设备，如果找到它，将执行导出到该设备。完成此操作后，我会弹出一个对话框，通知已完成导出到设备，并询问用户是否希望弹出 USB 设备。

下面是处理 USB 设备的部分代码：

```
public class USBController
{
    const int OPEN_EXISTING = 3;
    const uint GENERIC_READ = 0x80000000;
    const uint GENERIC_WRITE = 0x40000000;
    const uint IOCTL_STORAGE_EJECT_MEDIA = 0x2D4808;

    [DllImport("kernel32", SetLastError = true)]
    private static extern int CloseHandle(IntPtr handle);

    [DllImport("kernel32", SetLastError = true)]
    private static extern int DeviceIoControl
        (IntPtr deviceHandle, uint ioControlCode,
          IntPtr inBuffer, int inBufferSize,
          IntPtr outBuffer, int outBufferSize,
          ref int bytesReturned, IntPtr overlapped);

    [DllImport("kernel32", SetLastError = true)]
    private static extern IntPtr CreateFile
        (string filename, uint desiredAccess,
          uint shareMode, IntPtr securityAttributes,
          int creationDisposition, int flagsAndAttributes,
          IntPtr templateFile);

    public static bool EjectDrive(char driveLetter, bool displayMessages)
    {
        string path = "\\\\.\\" + driveLetter + ":";

        IntPtr handle = CreateFile(path, GENERIC_READ | GENERIC_WRITE, 0,
            IntPtr.Zero, OPEN_EXISTING, 0, IntPtr.Zero);

        if ((long)handle == -1)
        {
            int error = Marshal.GetLastWin32Error();
            if (displayMessages)
                MessageBox.Show("Drive may still be in use. Unable to eject drive " + driveLetter + ":\\ \n\nError Code = " + error);

            return false;
        }

        int dummy = 0;

        DeviceIoControl(handle, IOCTL_STORAGE_EJECT_MEDIA, IntPtr.Zero, 0,
            IntPtr.Zero, 0, ref dummy, IntPtr.Zero);

        int returnValue = DeviceIoControl(handle, IOCTL_STORAGE_EJECT_MEDIA, IntPtr.Zero, 0,
            IntPtr.Zero, 0, ref dummy, IntPtr.Zero);

        if (returnValue == 0)
        {
            int error = Marshal.GetLastWin32Error();
            if (displayMessages)
                MessageBox.Show("DeviceIoControl encountered an error. \n\nError Code: " + error);

            return false;
        }

        CloseHandle(handle);
        if (displayMessages)
            MessageBox.Show("OK to remove drive.");

        return true;
    }
public static bool IsReady(char driveLetter)
    {
        DriveInfo[] drives = DriveInfo.GetDrives();

        foreach (DriveInfo drv in drives)
        {
            if (Convert.ToChar(drv.RootDirectory.ToString()[0]) == driveLetter && drv.IsReady)
            {
                return true;
            }
        }
        return false;
    }
} 
```

所以一切正常，代码实际上会弹出一个 USB 设备。问题是导出的文件非常小，通常不到 100kb。文件似乎是在文件缓存系统中，因为写入文件后，我无法通过代码或windows提供的系统托盘中的工具弹出USB驱动器。它说设备仍然很忙。

有没有办法可以强制刷新缓存，或者另一种方法来解决这个问题？我的 IsReady 方法似乎更多地检查设备是否可以访问，不一定准备好弹出。

谢谢

# c++ - 在 Linux C++ 中终止阻塞 IO

> ID：10834469
> 
> 赞同：4
> 
> 时间：2012-05-31T13:19:19.643
> 
> 标签：c++, linux, multithreading, io

我正在使用多线程在 c++ 中的 linux 上进行串行 IO。目前我正在使用阻塞读取。这让我无法停止阻塞 read() 中的线程，除非强制终止或中断线程或使用诸如 pthread 取消之类的东西。现在在整个网络上，我看到人们对人们尖叫，建议他们需要从阻塞 IO 中终止线程。通常它与内存泄漏有关。只要您正确清理，线程中断是否会出现一些神奇的内存泄漏？

```
try
{
    while(true)
    {
        blocking_read(fd,buffer,512);
    }
}catch(interrupt_exception)
{

}
//clean up, close fd, release heap memory, usual stuff 
```

或者是我唯一的替代方案，如下所示，或者实现更高级别的协议，以确保阻塞读取接收签名关闭输入，使其能够自行关闭。

```
try
{
    while(running)
    {
        nonblocking_read(fd,buffer,512);

        if(cancel)
            running = false; //break return etc
    }
}

//clean up, close fd, release heap memory, usual stuff 
```

再说一次，如果你中断线程导致它抛出异常，在 read() 中是否会发生一些神奇的内存泄漏。

还是我应该根本不在乎并让析构函数杀死线程（我假设当您删除持有线程的对象时线程终止）？并在那里清理？像

```
class MyClass{
    int fd;    
    Thread* myThread;
    ~MyClass(){
        delete myThread;
        close(fd);
    }
}; 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T15:44:32.737

`read()`不应该泄漏内存。对于阻塞和非阻塞读取，应用程序代码仍然负责管理作为`buf`参数提供的内存。通过信号中断`read()`不会抛出异常，因此如果使用信号，则需要检查结果和*errno*。

*   如果`read()`在读取数据之前被信号中断，将返回 -1 并将*errno*设置为`EINTR`。
*   如果`read()`在读取某些数据后被信号中断，则 POSIX 允许返回 -1 并将*errno*设置为`EINTR`，或`read()`返回已读取的字节数。

如果使用`pthread_cancel()`，则会引发异常。使用这种方法，您有以下选择：

*   通过使用 注册清理函数来执行清理`pthread_cleanup_push()`。
*   分配动态内存，通过`pthread_setspecific()`.
*   通过`auto_ptr/unique_ptr`.
*   捕获`abi::__forced_unwind`异常，执行清理并重新抛出。

一般来说，考虑避免线程取消。如果可能，最好使用共享标志来跳出循环，并且更易于管理。这允许线程执行任何必要的清理，并防止您的实现依赖于线程库的实现及其任何怪癖。

对于您使用阻塞读取的情况，请考虑轮询 fd 以查看是否可以通过`select()`超时获得数据，并且仅`read()`在 fd 有数据时才调用。这允许您定期检查线程标志是否设置为不再运行，并防止您需要处理中断线程的信号`read()`，因为`read()`不应再阻塞等待数据。

此外，删除线程对象时发生的行为取决于线程库。例如，删除`pthread_t`或`boost::thread`对关联线程的执行没有影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:12:58.630

pthread_cancel 不会直接导致神奇的内存泄漏。如果您的线程期望在明确定义的取消点处停止（有关更多详细信息，请参见 pthread_cancel 手册页），那么可以考虑到这一点进行设计。

以下测试程序显示 valgrind 没有错误，但是请注意，对于 glibc 实现，依赖于线程被取消时生成的异常是不可移植的（请参阅[Cancellation and C++ Exceptions ）。](http://udrepper.livejournal.com/21541.html)

-缺口

```
#include <cstdio>
#include <pthread.h>
#include <unistd.h>

void* thread_func(void*)
{
    try
    {
        char buf[2048];
        read(1, buf, 2048);
    }
    catch(...)
    {
        fprintf(stderr, "thread %lu cancelled\n", pthread_self());
        throw;
    }
    return NULL;
}

int main()
{
    pthread_t thread;
    int res =  pthread_create(&thread, NULL, thread_func, NULL);
    sleep(1);
    pthread_cancel(thread);
    void* tres;
    pthread_join(thread, &tres);
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T10:19:06.417

我真的只是向那个线程发送一个信号，这就是信号的用途。在你的处理程序中设置你的全局`running`，`false`并在你的第二个片段中有一个`while(running)`循环，就是这样。

`read`不会泄漏，它会读入您已经分配并且您知道的缓冲区。它要么成功，要么失败（或阻塞，但信号会解除阻塞）。如果确实成功，请查看您可以对数据做什么（它可能仍然是部分读取或损坏或其他），否则重复直到`running`is `false`。

然后清理，释放你分配的东西，然后优雅地退出线程（......或做任何你想做的事）。

如果我没记错的话，在没有提供的情况下安装处理程序时，根本不会出现关于重新启动系统调用的相当复杂的“接收一些数据之前和之后”的情况`SA_RESTART`。
但即便如此，如果确实出现了，谁在乎 - 最后，系统调用只能失败或成功，并且即使在没有信号的情况下`read`也*总是*可以返回部分数据，因此无论如何您必须始终为此做好准备。因此，您真正感兴趣的只是您是否已经收集了足够的数据以使其有用，或者`running`标志是否`false`由于某种原因“神奇地”变为（该原因将是您的信号处理程序）。

# android - 适用于 Android 的 RDP 客户端

> ID：10834474
> 
> 赞同：0
> 
> 时间：2012-05-31T13:19:43.293
> 
> 标签：android, rdp

我正在搜索 RDP 客户端的代码（Android 的开源 Google 代码）。我正在努力开始，

建议我，如何开始这个项目？库马尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:27:53.827

RDP 协议由微软开发，首先从规范文档入手。

[http://msdn.microsoft.com/en-us/library/cc240445.aspx](http://msdn.microsoft.com/en-us/library/cc240445.aspx)

一旦您了解了规范，您就可以设计您的应用程序以根据目标受众及其特定需求来实施它们。

已经有可用的 RDP 客户端应用程序，例如 Xtralogic，因此您应该询问您是否拥有或能否确定一个真正的差异化因素，将人们带到您的应用程序而不是其他已经完善且功能强大的应用程序？

这是一个巨大的项目，这里的任何人都不能（或可能会）为您编写源代码。不过，我相信他们会帮助解决与整个项目相关的小具体问题。

祝你好运！

# android - Webview 不被视为移动浏览器

> ID：10834478
> 
> 赞同：1
> 
> 时间：2012-05-31T13:19:58.930
> 
> 标签：android

在我的 webview 中，当通过 android 浏览器完成此操作时，我将访问[http://www.nsopw.gov/Core/OffenderSearchCriteria.aspx](http://www.nsopw.gov/Core/OffenderSearchCriteria.aspx) ，它被视为移动站点。

但在我的 webview 应用程序中，它被视为不是移动浏览器，因此不会被重定向到移动版本。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.buttons);
    wb = new WebView(this);
    wb.getSettings().setJavaScriptEnabled(true);
    wb.setWebViewClient(new HelloWebViewClient());
    wb.getSettings().setSupportZoom(true);
    wb.getSettings().setBuiltInZoomControls(true);
    wb.getSettings().setDomStorageEnabled(true);
    String[] loading = getResources().getStringArray(R.array.array_loading);

    Random r = new Random();
    int rN = r.nextInt(12 - 1) + 1;
    progressBar = ProgressDialog.show(Sex_Offenders.this, loading[rN],
            "Loading...");

     final String urlToLoad ="http://www.nsopw.gov/Core/OffenderSearchCriteria.aspx";
    //final String urlToLoad = "http://m.familywatchdog.us/m_v2/msa.asp?es=&l=0&w=0&brtp=html&rstp=xlarge&imgtp=jpg&imgw=310&imgh=320";

    wb.setWebViewClient(new HelloWebViewClient() {
        public void onPageFinished(WebView view, String url) {

            if (progressBar.isShowing()) {
                progressBar.dismiss();
            }
        }
    });

    Context context = getApplicationContext();
    if (Repeatables.isNetworkAvailable(context) == true) {
        wb.getSettings().setCacheMode(WebSettings.LOAD_DEFAULT);
        wb.loadUrl(urlToLoad);
    } else {
        wb.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
        wb.loadUrl(urlToLoad);
        Repeatables.NoConnectionAlert(this);
    }
    setContentView(wb); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:40:08.450

尝试自己强制使用用户代理字符串，因为 webview 用户代理字符串似乎没有将自己标识为移动浏览器。采用

```
webview.getSettings.setUserAgentString(...) 
```

你可以用谷歌搜索用户代理字符串，我用过

```
Mozilla/5.0 (Linux; U; Android 2.2; en-us; Nexus One Build/FRF91) AppleWebKit/533.1 (KHTML, like Gecko) Version/4.0 Mobile Safari/533.1 
```

它与您在网站中提供的链接一起使用并加载了移动版本。

# visual-studio-2010 - Visual Studio ipch 文件夹

> ID：10834480
> 
> 赞同：5
> 
> 时间：2012-05-31T13:20:08.297
> 
> 标签：visual-studio-2010, solution

我需要通过电子邮件发送包含 2 个项目的解决方案。我可以删除ipch文件夹吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:25:18.987

是的，这是 IntelliSense 解析器用来存储预编译头文件的文件夹。它将在接收者的机器上重建。更多在[这个答案](https://stackoverflow.com/questions/3922660/which-visual-c-file-types-should-be-committed-to-version-control/3923352#3923352)中。使用 Build + Clean 避免查看太多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-15T05:02:19.733

在 MSDN 支持论坛中有一个答案：

> 我不仅是 C# 版主，也是 C++ 用户：} ipch 目录和编译器生成的许多新文件可以安全地删除。事实上，对于干净的构建，它们应该被删除（并且可能是）。我自己教一门 C++ 大学课程，这就是我要求我的学生做的事情。在解决方案文件夹中删除所有 bin、obj、ipch、debug 和 release 目录。
> 
> 1.  删除任何 .suo 文件
>     
>     
> 2.  删除任何 .user 文件
>     
>     
> 3.  删除任何 .ncb 文件
>     
>     
> 4.  删除任何 .sbr 文件
>     
>     
> 5.  删除任何 .*log 文件（适用于 VS 2010）
>     
>     
> 
> 压缩整个解决方案目录以供提交。这可确保解决方案和项目结构保持不变。

答案链接： [删除“ipch”文件夹是否安全 - 预编译头文件](http://social.msdn.microsoft.com/Forums/vstudio/en-US/1ef46540-e4b8-4779-8403-49239bc3f7ee/is-it-safe-to-delete-ipch-folder-precompiled-headers)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-25T12:16:01.227

如此处所述：[如何在 Visual Studio 2012 中更改 ipch 路径以](https://stackoverflow.com/questions/14980701/how-to-change-ipch-path-in-visual-studio-2012) 这种方式更改为“始终使用回退位置”，此目录不会在您的解决方案中创建，而是使用系统临时目录。这对我有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-15T13:12:25.833

您可以使用这个简单的 windows 命令删除这些文件：

```
 project_folder> del *.log *.ipch *.suo *.user *.ncb *.sbr *.vc.db *.obj /s /q 
```

# jquery-mobile - 在 jquery-mobile 中调用 .ajax() 的 *right* 事件是什么？

> ID：10834481
> 
> 赞同：0
> 
> 时间：2012-05-31T13:20:19.083
> 
> 标签：jquery-mobile, cordova

我想`listview`用来自服务器的数据填充 a 。

页面生命周期中的正确事件是什么？`pageinit`? `pagebeforeshow`? `pagebeforecreate`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:18:55.233

我认为正确的事件是 pageinit 事件。检查这个链接

[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

# vb6 - 如何在 Visual Basic 中为动态加载的文本框数组分配文本？

> ID：10834486
> 
> 赞同：0
> 
> 时间：2012-05-31T13:20:32.763
> 
> 标签：vb6

如何在 Visual Basic 中为动态加载的文本框数组分配文本。

> ```
> Dim txtStage1() As TextBox
> 
> ReDim Preserve txtStage1(2)
> 
> txtStage1(1).Text ="New" 
> ```

我在`txtStage1(1).Text ="New"`Line 遇到错误。

谁能帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:31:20.020

我找到了我的问题的答案。

在表格上放置 a`TextBox`并为其命名`txtarray`。将 的`Index`属性设置`TextBox`为`0`。

```
Private Sub Form_Load()
    Dim i As Integer

    txtArray(0).Text = "0"

    For i = 1 To 5
        Load txtArray(i)

        With txtArray(i)
            .Text = i
            .Visible = True
            .Top = txtArray(i - 1).Top + 550
        End With
    Next i
End Sub 
```

# apache - htaccess https 用于多个子域

> ID：10834487
> 
> 赞同：1
> 
> 时间：2012-05-31T13:20:38.010
> 
> 标签：apache, .htaccess, web, virtualhost, virtual-hosts

我有虚拟主机

```
<VirtualHost 10.10.10.10:80>
     ServerAdmin webmaster@server.com
     ServerName server.com
     ServerAlias subdomain-a.server.com subdomain-b.server.com subdomain-c.server.com subdomain-d.server.com
     DocumentRoot /srv/www/server.com/public_html/
</VirtualHost>

<VirtualHost 10.10.10.10:443>
     ServerAdmin webmaster@server.com
     ServerName server.com
     ServerAlias subdomain-a.server.com subdomain-b.server.com subdomain-c.server.com subdomain-d.server.com
     DocumentRoot /srv/www/server.com/public_html/
</VirtualHost> 
```

我想强制访问者对子域-a 和子域-c 使用 https。subdomain-b 和 subdomain-d 的访问者可以使用 http 和 https。如何配置.htaccess？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T21:51:32.630

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} ^(subdomain-a|subdomain-c)\.server\.com$ [NC]
RewriteCond %{HTTPS} !=on
RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

# css - WP7 :before and :after

> ID：10834499
> 
> 赞同：0
> 
> 时间：2012-05-31T13:21:19.863
> 
> 标签：css, windows-phone-7, pseudo-element

I have searched the web a while and I can't find the answer to my question.

Does WP7 support pseudo-elements like `:before` and `:after`?

Does anyone have the answer to this question or can someone point me in the right direction?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:25:58.520

Windows Phone 7.0 runs IE Mobile 7 which uses Trident 3.1 (IE's layout engine) which corresponds to a combination of IE7 and IE8 on the desktop. It's not clear whether this means the `:before` and `:after` pseudo-elements are supported, though. [Wikipedia seems to subtly hint at the contrary.](https://en.wikipedia.org/wiki/Trident_%28layout_engine%29)

Windows Phone 7.5 "Mango" runs IE Mobile 9 (there is no IE Mobile 8) which uses Trident 5.0 which corresponds to IE9 on the desktop, so you can at least expect support on IE in that version.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:26:19.107

Windows Phone v. 7.5 (Mango) runs what is essentially IE9\. So you can expect pretty decent support of CSS3\. Older versions run a weird browser that falls somewhere around IE8 levels of compatability.

# javascript - 从 javascript 代码顺序加载 javascript

> ID：10834511
> 
> 赞同：7
> 
> 时间：2012-05-31T13:22:13.097
> 
> 标签：javascript

我有一个通过插入单个脚本标签包含在页面中的 javascript 小部件（因为应用程序应该易于分发）：

```
<script type="text/javascript" src="loadMyWidget.js"></script> 
```

loadMyWidget.js 然后需要加载多个脚本文件，这些文件必须以一定的顺序运行。我尝试通过将脚本元素插入 DOM 来异步加载它们，但这并不能让我控制序列。

我也尝试使用对现代浏览器非常有用的 head.js，但我无法让它在 IE7 和 8 中工作。

不幸的是，将脚本压缩到一个文件中很困难，因为它由来自不同项目的许多文件组成，我不知道何时更新脚本。

看起来很简单，我需要以一定的顺序从 javascript 代码中加载 javascript 文件，并让它在所有浏览器中工作，包括 IE7 和 8。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:28:10.130

如果您正在使用 jQuery.getScript() ，则可以将其用作 $.when() 来推迟执行，直到事情停止加载。

如果通过“顺序执行”表示您需要在执行之前加载必要条件，则以下内容将起作用

```
$(function(){
   $.when(
      $.getScript("/script1"),
      $.getScript("/scirpt2"),
      $.getScript("/script3")
}).done(function(){
    // do stuff with the contents of my new script files
}); 
```

如果通过顺序执行意味着您需要一个接一个地执行文件，请尝试以下操作：

```
$.Deferred()
.then(function () { return $.getScript("/script1"); })
.then(function () { return $.getScript("/scirpt2"); })
.then(function () { return $.getScript("/script3"); })
.resolve(); 
```

当然，这需要 jQuery，在您编辑之后，这可能不适合您。

推荐阅读

*   [http://api.jquery.com/jQuery.getScript](http://api.jquery.com/jQuery.getScript)
*   [http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)
*   [http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T13:57:34.197

如果你需要 vanilla JS，这样的东西可以工作：

```
function loadScripts(scripts, complete) {
    var loadScript = function( src ) {
        var xmlhttp, next;
        if (window.XMLHttpRequest)  {
            xmlhttp = new XMLHttpRequest();
        } else {
            try {
                 xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            } catch(e) {
                return;
            }
        }
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
                eval(xmlhttp.responseText);
                next = scripts.shift();
                if ( next ) {
                    loadScript(next);
                } else if ( typeof complete == 'function' ) {
                    complete();
                }
            }
        }
        xmlhttp.open("GET", src , true);
        xmlhttp.send();
    };

    loadScript( scripts.shift() );
}

loadScripts(['jquery.js','jquery.plugin.js'], function() {
    console.log('loaded');
}); 
```

在 Chrome 中测试，也应该在 IE 中工作。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T14:05:40.107

我遇到了同样的问题并通过以下方式处理：

```
document.write('<script type="text/javascript" src="other1.js"></script>');
document.write('<script type="text/javascript" src="other2.js"></script>');

runSomeCode(); 
```

代码将同步加载和运行。优点：简单、轻便、跨浏览器兼容、无依赖。缺点：丑。

更多详情：[https ://stackoverflow.com/a/3292763/235179](https://stackoverflow.com/a/3292763/235179)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T14:01:33.793

你试过 require.js 吗？[http://requirejs.org/](http://requirejs.org/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-08T15:25:48.363

```
function loadScript(arrayOfUrlStrings, callback) {
  var numScripts = arrayOfUrlStrings.length;
  var count = 0;
  var headElement = document.getElementsByTagName('head')[0]

  function onLoad() {
    count += 1;

    if (count === numScripts) {
      callback();
    } else {
      addScript();
    }
  }

  function addScript() {
    var script = document.createElement('script');
    script.src = arrayOfUrlStrings[count];
    script.onload = onLoad;
    headElement.appendChild(script);
  }

  addScript();
} 
```

# sql - 无法在 Eclipse 中引用 jdbc.SQLServerDriver (ClassNotFoundException)

> ID：10834515
> 
> 赞同：3
> 
> 时间：2012-05-31T13:22:28.653
> 
> 标签：sql, eclipse, jdbc, classpath, classnotfoundexception

我正在尝试将 MSSQL 驱动程序用于 JDBC。我已按照有关如何将外部 JAR 文件添加到 Eclipse Windows IDE 的说明进行操作，如下所示：

- 从此处下载安装[http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx（Microsoft](http://msdn.microsoft.com/en-us/sqlserver/aa937724.aspx) JDBC Driver 4.0 for SQL Server)
- 将 zip 解压缩到我在此处解压缩的文件位置 (c:\MsJDBCforSqlDriver) - 在 Eclipse 包资源管理器中右键单击您的项目 -> 构建路径 -> 配置构建路径 -> Java 构建路径 -> 库选项卡- 添加外部 JAR 文件，然后浏览到“C:\MsJDBCforSqlDriver\sqljdbc_4.0\enu\sqljdbc4.jar”
- 然后查看成功的引用，如下图所示，包括 SQLServerDriver.class

![在此处输入图像描述](../Images/678e658679b5efc9e2b6f47c62923914.png)

当我尝试执行 Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver") 时，我得到一个 ClassNotFound 异常，如下所示：

![在此处输入图像描述](../Images/a1beea3c208cd0591f6e70cc93239568.png)

我尝试了所有可以在 Google 上找到的建议，包括在 Windows 环境变量中设置类路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:41:24.267

在 Run -> Run Configurations 菜单项下，您应该找到与包含您的 main() 方法的类同名的 Java 应用程序条目。

查看类路径选项卡。您应该会在用户条目下找到您的项目。展开它并查看是否列出了 Microsoft JDBC Jar。

用于编译的类路径不必与为运行时选择的路径相同，尽管 Eclipse 通常会将对构建路径的任何更改镜像到任何启动配置。

包名和类名的拼写和大小写看起来正确（Java 对名称区分大小写）。

是的，学习 Java 和 Eclipse 需要付出努力——Eclipse 与其他 IDE 完全不同，需要时间来了解它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T09:14:47.520

我在这里找到了答案：[http](http://code.google.com/p/android/issues/detail?id=27490) ://code.google.com/p/android/issues/detail?id=27490 似乎引用库下的包含在运行时不可用，我看不到如何在我的Eclipse 版本

" 由 fred...@mobileinteraction.se 报告，2012 年 3 月 22 日主机操作系统：Windows 7 x64 SDK 工具版本：17 Eclipse 版本：3.7.2 ADT 插件版本：17.0.0v201203161636-291853 您项目的目标平台： 2,2 模拟器中运行的平台版本：2.2

重现步骤： 1\. 创建一个使用外部 jar 的项目（在我的例子中是 android-support-v4.jar ）。2\. 使用属性 - Java 构建路径 - 添加外部 Jar 添加 android-support-v4.jar。让 Activity 从 FragmentActivity 扩展。3.清理并运行项目

预期结果：应用程序将运行启动 FragmentActivity

观察到的结果：应用程序崩溃，android-support-v4.jar 被放置在“参考库”中，因此 Android 在运行时找不到它。

解决方案：在您的项目中手动创建一个文件夹 /libs，将 android-support-v4.jar 复制到该文件夹​​，ADT 会将其放在“Android Dependencies”下并且它可以工作。

使用 Properties - Java Build Path - Add External Jar 添加的所有外部 jar 都是这种情况。

"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-15T09:54:20.563

在 Eclipse 中添加 MS SQL Server 的 JDBC 驱动：

1.  下载JDBC驱动并解压
2.  二次单击 Eclipse 项目的根目录并转到“属性”。
3.  现在转到“Java 构建路径 - 库”部分，然后单击“添加外部 JAR”。
4.  在解压下载驱动的目录下搜索“sqljdbc.jar”文件，双击y完成按“ok”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-13T17:55:08.033

我遇到了这个问题，然后解决了这个问题，即如果您使用 Tomcat 作为您的 Web 应用程序的服务器，同样的异常会出现，因为驱动程序对项目不可用，后来我把 jar 文件（sqljdbc4-2.0.jar ) 进入 WEB-INF/lib 文件夹然后它正在工作

# ruby-on-rails - collection_selection 在 fields_for 中创建局部变量

> ID：10834519
> 
> 赞同：0
> 
> 时间：2012-05-31T13:22:55.067
> 
> 标签：ruby-on-rails, ruby

我正在尝试构建一个rails表单，该表单将使用collection_select调用将局部变量传递回控制器，并且正在生成我一生都无法解决的错误。

该表单位于 Network#new 视图中。collection_select 应该创建一个现有超级用户的下拉菜单，因此可以在创建时为新网络分配一个超级用户（通过 superuser_id）。Network#create 方法知道如何处理 superuser_id。所以我的表格是这样的：

```
<%= form_for(@network) do |f| %>
  <%=render(partial: 'edit_form', locals: {f: f} ) %>

  <% fields_for 'superuser_id', url: {action: :create} do |su| %>
    <div>
      <%= su.label 'Network Superuser' %>
      <%= su.collection_select( 'superuser_id',@superusers, :id, :user_name)  %>
    </div>
  <% end %>

  <div>
    <%= f.submit %>
  </div> 
```

我得到的错误是：

```
ActionView::Template::Error (undefined method `superuser_id' for {:url=>{:action=>:create}}:Hash):
6:   <% fields_for 'superuser_id', url: {action: :create}  do |su| %>
7:      <div>
8:        <%= su.label 'Network Superuser' %>
9:        <%= su.collection_select( 'superuser_id', @superusers, :id, :user_name)  %>
app/views/networks/new.html.erb:9:in `block (2 levels) in _app_views_networks_new_html_erb__687644901_79475060' 
```

有什么想法我哪里出错了吗？

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:55:01.213

`fields_for`旨在处理关系的子形式，因此通常像`fields_for :supervisor`没有 _id 一样使用它。但是，看起来这是一种`:belongs_to`关系，`fields_for`完全不需要。您没有尝试创建表单来编辑超级用户的属性，您只是将现有 id 分配给网络对象。

尝试：`<%= f.collection_select( 'superuser_id',@superusers, :id, :user_name) %>`没有 fields_for 块

# node.js - 用于与服务器同步数据的 Web 应用程序

> ID：10834520
> 
> 赞同：4
> 
> 时间：2012-05-31T13:22:59.377
> 
> 标签：node.js, web-applications, offline-caching

有没有一种简单的方法可以使用 Web 应用程序管理离线数据，并在有连接时与服务器同步？我一直在看 Meteor、CouchDB 等，但仍然不确定什么是最不痛苦的方式。

我当然可以用套接字或类似的东西自己实现它，但如果已经为此目的制作了一些东西，我看不出有理由再做一次。

我打算使用 Node 作为服务器。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:34:15.990

你说的是两件事；1）如果/离线时如何存储/持久数据（存储机制），以及 2）在线时如何与服务器同步（通信机制）。1 的答案是某种本地存储，根据您的平台，有几种方法可以做到这一点（localstorage、websql、文件系统 API 等）。2 的答案实际上取决于您的同步需求的紧迫程度，但通常您可以将 HTTP 本身与定期（长）轮询、websockets 等一起使用。

除了存储和通信机制之外，还有许多使工作变得更简单的库，例如 Meteor（通信）和 CouchDB（存储），还有更多。甚至还有一些库负责处理实际的同步机制（也可能解决冲突），但这在很大程度上取决于您的实际应用程序。

更新：这个框架看起来很有希望，但我自己还没有测试过：

[http://blog.nateps.com/announcing-racer-experimental-realtime-model](http://blog.nateps.com/announcing-racer-experimental-realtime-model)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T08:04:10.917

您可能还想查看云服务。如果您正在开发一个新的应用程序，这些是最好的，因为它们会将您更多地推向无服务器模型，当然您必须对使用服务感到满意。

[Simperium](https://simperium.com/) ( [simperium](/questions/tagged/simperium "显示标记为“simperium”的问题") ) 是一个有趣的云服务——我今天能找到的唯一一个可以同步的（不像 Firebase 和 Spire.io 在其他方面是相似的），对于 iOS，它包括离线存储，而对于 JavaScript 客户端你会需要使用 HTML5 功能自己覆盖本地存储。Backbone.js 似乎对此有一些支持，并且 Simperium 可以与 Backbone 集成，使用类似的 API 样式。

对于非云服务，[Derbyjs](http://derbyjs.com/) ( [derbyjs](/questions/tagged/derbyjs "显示标记为“derbyjs”的问题") ) 是一个开源项目，其中包括 Racer，一个数据同步库（前面的答案提到过）——两者都在快速开发中，尚未完成，但如果你的时间尺度允许，看起来很有趣，并且不需要云服务。[将 Derbyjs 与 Meteor 进行](http://blog.derbyjs.com/2012/04/14/our-take-on-derby-vs-meteor/)了比较，这很有用——尽管它是由 Derbyjs 开发人员编写的，但并没有太大的偏见。

我还查看了 CouchDB，它具有一些有趣的内置复制功能，但我不喜欢它使用在查询需要时（或通过批处理）延迟更新的索引，我对此不满意将服务器数据库直接暴露给客户端以启用复制/同步。一般来说，我认为最好将客户端本地存储与服务器端 DB 分离，当然对于 Web 应用程序来说，在客户端上使用 CouchDB 会很困难。

# objective-c - Objective-C中的普通铸造与桥梁铸造

> ID：10834522
> 
> 赞同：24
> 
> 时间：2012-05-31T13:23:00.747
> 
> 标签：objective-c, ios, macos, ios4, xcode4.3

有什么不同，

```
(CFDataRef) data 
```

&

```
(__bridge CFDataRef) data 
```

Xcode 要求我将其更改为桥接。是因为ARC吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-31T13:25:27.343

是的，当您在免费桥接类型之间进行转换时，需要向 ARC 提供说明。在这种情况下`__bridge`，告诉 ARC 什么都不做，所以这将与之前的标准转换相同。

您可以阅读[过渡到 ARC 发行说明](http://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/index.html)，了解有关进行桥接转换的不同方法的更多详细信息。

# android - 我的位置没有显示在地图上

> ID：10834523
> 
> 赞同：0
> 
> 时间：2012-05-31T13:23:01.807
> 
> 标签：android, gps

我在地下室使用我的模拟器。此代码正在运行。但地图未显示当前位置。我还尝试从模拟器控件发送 lat long，但模拟器控件显示错误的 lat lon。

```
 package com.maps;
     import com.google.android.maps.GeoPoint;
     import com.google.android.maps.MapActivity;
     import com.google.android.maps.MapController;
     import com.google.android.maps.MapView;
     import android.content.Context;
     import android.location.Location;
     import android.location.LocationListener;
       @Override
       public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        MapView view= (MapView) findViewById(R.id.mapView) ;
        view.setBuiltInZoomControls(true);
        final MapController control=view.getController();
        LocationManager manager=(LocationManager)            this.getSystemService(Context.LOCATION_SERVICE);     
        LocationListener listener=new LocationListener() {          
    public void onStatusChanged(String provider, int status, Bundle extras) {   
            }           
            public void onProviderEnabled(String provider) {
                        }
        public void onProviderDisabled(String provider) {
                // TODO Auto-generated method stub
            }       
    };   
        manager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, listener);
    }
    @Override
    protected boolean isRouteDisplayed()
    {
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:27:25.213

要获取 GPS，您必须在启动应用程序时第一次进入开放区域。地下室是完全覆盖的区域，因此像手机这样的 GPS 硬件很难获取 GPS 位置。然而，汽车中的 GPS 硬件也可以从地下室获取 GPS 信号。

此要求的另一种方法是获取**cell-id**并将其传递给 google 的反向 Api，这将为您提供结果中的 lat-lon。您可以从任何地方获取 cell-id，并且您可以看到地下室也有覆盖。您也可以访问我最近的[回答](https://stackoverflow.com/a/10834224/996493)，了解有关模拟器中 GPS 的更多详细信息。[您也可以从此处](http://columbiariverwatertrail.gotoes.org/GetKayakGPXForGPS.pl)下载示例 GPX 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:25:36.003

您可能没有授予应用程序访问模拟位置权限。

```
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION"> 
```

# network-programming - Windows CE 6.0 中的 WNetOpenEnum

> ID：10834525
> 
> 赞同：1
> 
> 时间：2012-05-31T13:23:07.140
> 
> 标签：network-programming, windows-ce

我在 Windows CE 6.0 中枚举网络资源时遇到问题。在我调用 WNetEnumResource 之前，我无法让 WNetOpenEnum 工作！以这种方式调用，它返回“参数不正确”。我正在调用将 lpNetResource 设置为 NULL 的函数，因为我想从根目录开始。我做错了什么 - 帮助！

PS如果重要的话，我正在通过以太网使用 KITL 调试操作系统。

```
DWORD dwResult;
HANDLE hEnum;
LPVOID lpMsgBuf;

dwResult = WNetOpenEnum(RESOURCE_GLOBALNET, RESOURCETYPE_ANY, 0, NULL, &hEnum);
if (dwResult != ERROR_SUCCESS) {
    FormatMessage(FORMAT_MESSAGE_ALLOCATE_BUFFER | FORMAT_MESSAGE_FROM_SYSTEM | FORMAT_MESSAGE_IGNORE_INSERTS,
                  NULL, GetLastError(), 0, (LPTSTR)&lpMsgBuf, 0, NULL);
    RETAILMSG(TRUE, (L"Error in WNetOpenEnum (GUI):"));
    RETAILMSG(TRUE, ((LPWSTR)lpMsgBuf));
    LocalFree( lpMsgBuf );
    return -1;
} 
```

# svn - 在 Windows 上提交 SVN 时在“db\txn-current-lock”上拒绝访问

> ID：10834526
> 
> 赞同：8
> 
> 时间：2012-05-31T13:23:21.630
> 
> 标签：svn, windows-7, windows-xp, tortoisesvn, visualsvn-server

我在远程服务器（Server 2007 R2）上运行 VisualSVNServer，在我的 Windows 7 机器上运行 Tortoise SVN 1.6.12 x64。我已经在服务器上建立了一个存储库，并且能够重新浏览它并结帐。当我添加文件（它允许我这样做）然后提交时，我收到以下错误

无法打开文件“C:\Repositories\Test\db\txn-current-lock”：访问被拒绝

我已经在 VisualSVNServer 中设置了读/写权限，并让我的用户 ID 完全控制了存储库目录。我已经阅读了如何在 Linux 中解决此问题，但我正在运行 Windows 7。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T10:53:27.023

您需要为运行服务器的用户帐户（递归）分配**读/写**权限（默认为“网络服务”）。`C:\Repositories\Test\`

（在 Windows 资源管理器中，转到“C:\Repositories”，然后右键单击“Test”文件夹 |**属性**|**权限**选项卡）。

请参阅知识库文章[“运行 VisualSVN 服务器所需的权限”](http://www.visualsvn.com/support/topic/00037/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-23T17:20:53.883

我在 Windows XP SP3 上遇到了同样的问题。VisualSVN 服务器服务“登录身份”需要是本地系统，而不是本地服务。

（右键我的电脑 -> 管理 -> 服务和应用程序 -> 服务 -> 双击 VisualSVN 服务器 -> 登录 -> 选择本地系统帐户，然后重新启动服务）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-19T06:44:21.360

我在使用 SVN 一年多后遇到了这个问题。对我们有用的解决方案是在服务器机器上重新启动 SVN 服务。希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-08T06:04:53.870

`Can't open file 'D:\Repositories\learning\txn-current-lock': Access is denied`

在 Windows 资源管理器中，转到`D:\Repositories`您的存储库所在的位置，然后右键单击`Repositories`文件夹，`Properties`然后选择`Edit Permissions`选项卡并允许所有人完全控制。

[![在此处输入图像描述](../Images/f5665b2f112cd3d0896f03aab512713f.png)](https://i.stack.imgur.com/lcHJD.png)

# jasper-reports - iReport - 组织列输出？

> ID：10834529
> 
> 赞同：4
> 
> 时间：2012-05-31T13:23:29.987
> 
> 标签：jasper-reports, ireport

我正在编写一份应如下所示的损益报告： ![在此处输入图像描述](../Images/b4c376113af215db453d00e904935c4b.png)

我的数据表如下所示：
![在此处输入图像描述](../Images/5f7310c0a09187d6f458021740385cbc.png)

对于这个损益表，我有查询 #1，它填充了当前月份和前 3 个月的数据。然后我有查询 #2 来计算 6 个月的滚动平均值，然后查询 #3 来计算年初至今的总数。他们都加入了工会声明。

我想不出在 iReport 中呈现它的最佳方法。现在我正在使用交叉表，并且能够使用 Bekwam 的[“扩展交叉表”技术](http://bekwam.blogspot.com/2011/06/expanding-crosstab-in-jaspersoft.html)将“度量”标签添加到客户列中。

所以我的问题是 - 有没有更简单的方法可以做到这一点？每次向交叉表添加度量时，我都必须重新排列度量标签和字段。如果我在 Excel 中制作了一个数据透视表，我可以单击一个下拉框并选择显示或隐藏某些月份 - 在 iReport 中有没有办法做到这一点？我觉得我一定是错过了什么。如果其他人在这样的列中显示数据，你是怎么做的？如果您在列中设置详细信息带，有什么提示可以组织输出以使其看起来更专业吗？

谢谢，丽莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T13:16:48.813

我决定在详细信息带中创建列。我将度量标签放在第一列中，并将它们设置为仅在该列中打印。然后我在每一列中打印我的度量值。我希望我可以告诉 iReport 打印第 2-n 列中的度量值，但我认为这是不可能的。

有些客户在查询 #1 中每个月都没有值，因此我决定在日历表（日历表左连接查询 #1）上加入查询 #1，以添加空白作为占位符以保留我的格式。

# silverlight - 在 silverlight 和 clientaccesspolicy 304 错误中出现跨域错误

> ID：10834530
> 
> 赞同：3
> 
> 时间：2012-05-31T13:23:33.757
> 
> 标签：silverlight, cross-domain-policy

我需要从 Silverlight 4 应用程序将一些数据写入数据库。

我正在使用启用 Silverlight 的 WCF Web 服务。我已将其发布到 IIS7 并将 ClientAccessPolicy.xml 文件添加到 inetpub/wwwroot （以及其他地方），因此我可以访问 localhost/ClientAccessPolicy.xml 就好了。我还添加了 crossdomain.xml 以防万一。

我还有一个 Silverlight4 客户端应用程序，它可以访问此服务并在开发服务器上通过 VS2010 运行。

当尝试调用 WebService 中的方法时，我收到了跨域错误，尽管我有一个跨域策略并且 Web 服务工作正常。

使用 Fidler 时，我看到客户端应用程序尝试访问 clientaccesspolicy.xml 时出现 304 错误

如果我还将客户端应用程序发布到 IIS7（都在端口 80 下），我可以在同一台机器上使用浏览器运行它，没有问题。但是当我尝试在另一台机器上访问它时，我再次得到一个 crossdaomain 错误。

我尝试了一切，但在任何地方都找不到这个问题的答案！请帮忙！！

## 这就是我的 ClientAccessPolicy.xml 的样子：

```
<?xml version="1.0" encoding="utf-8"?>
<access-policy>
    <cross-domain-access>
        <policy>
            <allow-from http-request-headers="SOAPAction">
                <domain uri="http://*"/> 
            </allow-from>
            <grant-to> 
                <resource path="/" include-subpaths="true"/> 
            </grant-to>
        </policy>
    </cross-domain-access>
 </access-policy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T12:00:11.283

在阅读您的情况之前和之后，我一直在努力解决这个误导性错误“跨域错误”，我可以确定 ClientAccessPolicy.xml 配置不是这里的问题，您应该在其他地方查看。

我会做的几件事

1.  在 silverlight 应用程序上检查我的客户端配置和 Web 服务配置（仔细检查端点、行为和最终绑定协议）。
2.  为您的 wcf 服务启用错误日志记录。
3.  确保将正确的身份验证令牌传递给 Web 服务（为托管 WCF 服务的 Web 应用程序启用匿名身份验证）。

# c# - ASPX 页面上的动态数据加载

> ID：10834533
> 
> 赞同：1
> 
> 时间：2012-05-31T13:23:49.977
> 
> 标签：c#, asp.net

我在我工作的公司中有一个用 C# 编写的内部 Web 服务 (ASP.NET)。其中只有 2 页，其中一页包含 DropDownList。每次当用户从该 DropDownList 中选择一个项目时，我都需要以某种方式将所选项目值传递给一个静态方法，并在页面上的任何位置显示该方法的结果字符串。

我以前从未使用过 ASP.NET 或任何 Web 编程，对如何做有点困惑，甚至不知道从哪里开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:38:44.233

在你的 aspx 文件中，你应该有这个：

```
 <asp:ListBox ID="ListBox1" runat="server" AutoPostBack="True" 
            onselectedindexchanged="ListBox1_SelectedIndexChanged"></asp:ListBox> 
```

请注意**AutoPostBack="True"**在用户更改列表框中的选择后立即返回服务器并触发 selectedindexchanged 事件

在您的代码隐藏（.cs 文件）中，您应该有这个：

```
 protected void ListBox1_SelectedIndexChanged(object sender, EventArgs e)
    {

        // Call static method and pass the ListBox1.SelectedIndex
        // MyStaticMethod(ListBox1.SelectedIndex);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:37:43.997

您可能应该查看微软为新的 .NET 开发人员提供的一些重要资源。它们将非常有助于您入门。她是一些非常好的视频的链接，可以帮助你：[http ://www.asp.net/web-forms/videos](http://www.asp.net/web-forms/videos)

不确定你来自什么语言，如果有的话......但在大多数情况下，网络表单将像其他基于网络的方法一样工作。

您的 ASP.NET 控件（在您的情况下为 DropDownList）具有客户端和服务器端事件。

您可能希望在 DropDownList 上映射服务器端 OnSelectedIndexChanged 事件。

为了在该控件上进行回发，您需要在 DropDownList 上将 AutoPostBack 属性设置为 true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T15:11:41.037

试试这个

在 html 中，

```
 <asp:DropDownList ID="DropDownList1" runat="server" AutoPostBack="True" 
        onselectedindexchanged="DropDownList1_SelectedIndexChanged">
    </asp:DropDownList> 
```

在 aspx.cs 页面中，，

```
 protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
{
    string selctedValue = DropDownList1.SelectedValue;
        /// Call yours static methid here
     YourMethod(selctedValue);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:27:40.220

您可以选择 autoPostBack="true" 并在服务器端处理更改事件，或者使用 jQuery 订阅更改事件并在客户端获取值

# javascript - 隐藏或替换 window.top 值

> ID：10834534
> 
> 赞同：0
> 
> 时间：2012-05-31T13:23:52.257
> 
> 标签：javascript, internet-explorer, iframe

我正在尝试`window.top`从包含在*iframe*中的页面中隐藏该属性。

基本上，我希望这个*iframe*可以访问它的父窗口，`window.parent`并且还可以知道它本身是一个*iframe*，但它必须确信它的父窗口是顶部窗口。

我遇到了[这个问题](https://stackoverflow.com/q/573824/995958)，我使用以下方法实现了预期的行为：

```
Window.prototype.__defineGetter__('top', function() { return window.parent; } ); 
```

这段代码在*iframe*中。我正在开发框架和父级，所以我可以编辑我想要的所有内容。

问题是这不适用于 IE（所有版本）。我不是在搜索该代码的 IE 等效项，我只对最终目标感兴趣。我也对你能想象到的最丑陋的黑客/想法持开放态度。

# html - 页面布局在我的本地主机和 cloudfoundry 上的行为不同

> ID：10834540
> 
> 赞同：0
> 
> 时间：2012-05-31T13:24:14.703
> 
> 标签：html, spring-mvc, css-float, cloud-foundry

我有一个简单的 HTML 页面，其中一个显示 2 个列表。列表中的每个项目都是一个 div 元素（圆角框），其中包含一些数据。现在当我从我的 STS 运行它并在我的浏览器中查看它时：列表显示在另一个旁边。当我将它部署到 canfoundry 并使用我的浏览器查看它时，第二个列表显示在第一个列表下方。这是我的 HTML（我对缺少的缩进表示歉意）：

```
<section title="item List">
    <div class="inner"><h4>ITEMS</h4></div>
    <div class="inner"><h4>OTHERS</h4></div>
    <div style="clear: both"></div>

     <!-- item only list -->
    <div class="container">
    <ul class="plainList">
      <c:forEach items="${itemsFrom.itemsOnly}" var="item" varStatus="status">
        <li><div class="inner">
          <img src="resources/images/${item.id}.png">
          <ul class="plainList">
            <li><h4>${item.title} &trade;</h4></li>
             <li><h5>${item.description}</h5></li>
           </ul>
           <input style="float: right;" type="checkbox" name="itemIds" value="${item.id}" />
          <div style="clear: both"></div>
          </div>
          </li>
        </c:forEach>
     </ul>
    </div>

    <!-- Others only list -->
    <div class="container">
      <ul class="plainList">
     <c:forEach items="${itemsFrom.othersOnly}" var="item" varStatus="status">
       <li><div class="inner">
         <img src="resources/images/${item.id}.png"/>
         <ul class="plainList">
            <li><h4>${item.title} &trade;</h4></li>
            <li><h5>${item.description}</h5></li>
          </ul>
          <input style="float: right;" type="checkbox" name="itemIds" value="${item.id}" />
        <div style="clear: both"></div>
       </div>
       </li>
     </c:forEach>
     </ul>
    </div>
  </section> 
```

这是CSS：

```
body {
    font-size:100%;
    font-family: Comic Sans MS, Georgia, ariel;
}

div.inner  { margin: 0; padding: 10px; border:0; zoom:1; background: #dcdcdc}
div.outer { float: left; margin: 5px; background: #c10506; padding: 8px, width: 26em}

.container {
    margin: 0px;
    padding: 0px;
    float: left
}

ul.plainList {
    list-style-type: none;
    margin: 0px;
    padding: 0px;
    float: left
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T19:30:41.450

HTML 渲染与服务器端没有直接关系。服务器端生成的结果可能会影响页面的动态部分必须显示的内容。因此，例如，如果您在 dev env 与 staging 中查看您的页面，您会看到，由于记录数量最有可能在 stage 中，您的 UI 有所不同。

我想说检查您的持久性，看看您是否可以从 Cloud Foundry 的服务器端向您的客户端发送与您的本地主机相同数量的数据。

再次记住 UI 渲染不会因为您的应用程序部署到 PAAS 环境而改变。这是您在每个环境中拥有的服务器端数据导致您的问题。这也可以简单地发生在您的本地主机上。

# powershell - 无法在 x86 Powershell 中加载 CDO.Message 对象

> ID：10834541
> 
> 赞同：0
> 
> 时间：2012-05-31T13:24:17.487
> 
> 标签：powershell, com

我在使用时遇到了 CDO.Message 的问题：`New-Object -ComObject "CDO.Message"`我收到了一些 com 对象的模板，但没有收到 CDO.Message。这是我总是得到的对象：

```
Name                      MemberType Definition
----                      ---------- ----------
CreateObjRef              Method     System.Runtime.Remoting.ObjRef CreateObjRef(type requestedType)
Equals                    Method     bool Equals(System.Object obj)
GetHashCode               Method     int GetHashCode()
GetLifetimeService        Method     System.Object GetLifetimeService()
GetType                   Method     type GetType()
InitializeLifetimeService Method     System.Object InitializeLifetimeService()
ToString                  Method     string ToString() 
```

奇怪的是，这只发生在 x86 Poweshell 中（由于其他原因我不得不使用它），它在 x64 控制台中正常工作。这是我的设置：

Windows 2008 x64 SP2
Exchange 2007 SP3
Outlook 2007

我已经尝试尽可能安装最新更新，但没有帮助。知道可能出了什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:54:46.223

也许您有一个冲突的别名或命令名称。尝试运行`C:\Windows\SysWOW64\WindowsPowerShell\v1.0\powershell.exe -NoProfile`，看看它是否仍然发生。

附带说明：您是否有任何理由使用 CDO.Message 而不是 .NET 类型或`Send-MailMessage`cmdlet？

# python - 通过 pygame.camera 访问网络摄像头时出现 Ubuntu 11.10/12.04 段错误

> ID：10834551
> 
> 赞同：2
> 
> 时间：2012-05-31T13:24:49.463
> 
> 标签：python, pygame, ubuntu-11.10, ubuntu-12.04

我全新安装了 Ubuntu 12.04，运行了所有更新，然后运行`sudo apt-get install build-essential python-dev libsdl1.2-dev python-pygame`​​. 但是，当我在 python 解释器中运行以下命令时：

```
import pygame
import pygame.camera
pygame.init()
pygame.camera.init()
cam = pygame.camera.Camera("/dev/video0",(640,480))
cam.get_image() 
```

我得到：

```
Fatal Python error: (pygame parachute) Segmentation Fault
Aborted (core dumped) 
```

有什么建议么？

更新：全新安装 11.10 也会发生这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T16:02:58.943

好吧，解决方案非常简单：我`cam.start()`之前忘记打电话了`cam.get_image()`。

# jcl - 使用 jcl 的 pds/ps 的参考信息数据 (i)

> ID：10834552
> 
> 赞同：1
> 
> 时间：2012-05-31T13:24:51.693
> 
> 标签：jcl

我想在我的 JCL 中使用 pds/ps 的引用日期。有什么办法可以做到吗？

我基本上想使用JCL删除过去2个月内没有被引用的几个ps ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:35:04.870

使用 DFDMSdss (PGM=ADRDSSU) 完成此任务。DFDMSdss Storage Administration 一书的第 9 章描述了如何使用 ADRDSSU 来管理 DASD 空间，并有一个特定的部分演示了如何使用 DUMP 命令删除未使用或过时的数据集到 DUMMY DD。在您调整过滤器时，在测试期间使用 PARM='TYPRUN=NORUN'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T11:24:23.640

[参考](http://www.mvsforums.com/helpboards/viewtopic.php?p=10235&sid=8ad1023193463e90e0426634620b693f)

```
//DELETE  EXEC PGM=ADRDSSU,PARM='UTILMSG=YES,TYPRUN=NORUN'
//OUTDD    DD  DUMMY
//SYSPRINT DD  SYSOUT=*
//SYSIN    DD *
DUMp {DATASet | DS}(
               BY((selector,operator,arg){,(selector,operator,arg),...})
                {EXClude(dsn{,dsn,...})} {INClude(dsn{,dsn,...})}
               |
               EXClude(dsn{,dsn,...}) {INClude(dsn{,dsn,...})}
                {BY((selector,operator,arg){,(selector,operator,arg),...})}
               |
               {FILterdd | FDD}(ddn)
               {INDDname | IDD}(ddn) | {INDYnam | IDY}(vol{,unit})
               {OUTDDname | ODD}(ddn{,ddn,...) 
               {DELete} 
```

在上面我可以将我的条件放在 BY 子句中。我现在的查询是我是否需要将包含我需要删除的文件列表的文件名放在 INCLUDE 子句中？

# android - 将 JSON 字符串解析为 SQLite 表的最快方法是什么？

> ID：10834553
> 
> 赞同：6
> 
> 时间：2012-05-31T13:24:52.177
> 
> 标签：android, json, sqlite, gson, sqliteopenhelper

我正在编写一个 Android 应用程序，它偶尔需要下载一个大约 1MB 并包含大约 1000 个元素的 json 字符串，并将每个元素解析到一个 SQLite 数据库中，我用它来填充 ListActivity。

即使下载和解析不是每次与应用程序交互时都需要完成的事情（仅在首次运行或用户选择刷新数据时），我仍然担心解析部分花费的时间太长，大约两到三分钟 - 从手机应用程序的角度来看，这似乎是永恒的！

我目前正在使用 Gson 将每个 json 对象解析为我定义的自定义对象，然后使用 SQLiteOpenHelper 将其输入数据库。

我的问题是 - 有没有更快的方法来实现这个？在不使用 Gson 的情况下直接与 json 交互会明显更快吗？还是我在下面的代码中做了一些愚蠢的事情来减慢速度？

这是我在 AsyncTask 中使用的将 json 解析为 SQLite 的方法：

```
protected Boolean doInBackground(Integer... bType) {

    InputStream source = getJsonInputStream(bTypeString);

    VegDataHandler db = new VegDataHandler(mainActivity, bTypeString);
    Gson gson = new Gson();
    Reader reader = new InputStreamReader(source);

    JsonParser jParser = new JsonParser();
    JsonArray jArray = jParser.parse(reader).getAsJsonArray();

    aLength = jArray.size();
    mCurrProgress = 1;
    publishProgress(mCurrProgress, 0, aLength);

    /* Each array element is of the form { company: {...} } */
    int i = 0;
    mCurrProgress = 2;
    for (JsonElement obj : jArray) {
        Company c = gson.fromJson(obj.getAsJsonObject().getAsJsonObject("company"), Company.class);
        db.addCompany(c);
        i++;
        publishProgress(mCurrProgress, i);
    }
} 
```

这是我的 VegDataHandler 类中的 addCompany 方法，它扩展了 SQLiteOpenHelper：

```
public void addCompany(Company c) {
    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(KEY_ID, c.getCompanyId());
    values.put(KEY_NAME, c.getCompanyName());
    values.put(KEY_RYG, c.getCompanyRedYellowGreen());
    values.put(KEY_COUNTRY, c.getCompanyCountry());
    values.put(KEY_URL, c.getCompanyUrl());
    values.put(KEY_NOTES, c.getCompanyNotes());
    values.put(KEY_EMAIL, c.getCompanyEmail());
    db.insertWithOnConflict(TABLE_COMPANY, null, values, SQLiteDatabase.CONFLICT_REPLACE);
    db.close();
} 
```

这是在添加到 SQLite 之前保存每个 json 元素的类（为简洁起见，我省略了 getter 和 setter）。

```
public class Company {

    public Company() {
    }

    @SerializedName("id")
    public int companyId;

    @SerializedName("company_name")
    public String companyName;

    @SerializedName("red_yellow_green")
    public String companyRedYellowGreen;

    @SerializedName("country")
    public String companyCountry;

    @SerializedName("url")
    public String companyUrl;

    @SerializedName("notes")
    public String companyNotes;

    @SerializedName("email")
    public String companyEmail;

} 
```

提前感谢您的任何回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T17:44:15.557

首先，您需要确定过程中占用时间最多的部分。从您上面的评论看来，JSON 解析是罪魁祸首。

**如果 JSON 解析是问题：**
研究并考虑更快的 JSON 解析器。也许像[json-smart](https://code.google.com/p/json-smart/)这样的东西。

**如果 SQLite/DB 批量插入是问题：**
[请参阅我的答案](https://stackoverflow.com/questions/8752193/fastest-and-most-efficient-way-to-pre-populate-database-in-android/8855122#8855122)

**一般提示：**

*   尽可能多地回收对象（保持**新到**最低限度）
*   至少始终在 DB 批量插入中使用事务
*   不要打开/关闭数据库。在处理的开始/结束时执行一次
*   使用预编译语句！

# ruby-on-rails-3 - 当向本地开发服务器发出请求时，jruby IO.popen 读取挂起

> ID：10834556
> 
> 赞同：0
> 
> 时间：2012-05-31T13:24:57.357
> 
> 标签：ruby-on-rails-3, jruby, popen, wkhtmltopdf

我只想将 wkhtmltopdf 的输出发送给用户。它不应该那么难。

```
def it
    send_pdf "file.pdf"
end

def send_pdf(file)
  url= url_for(params) # Example: http://localhost:3000/report/it
  webkit= Rails.root.join('app', 'bin', 'wkhtmltopdf', 'current')
  cmd= "#{webkit} -q \"#{url_for(params)}\" -"

  data= IO.popen(cmd).read ############### HANGS HERE ###################

  send_data(data, type: "application/pdf", filename: file)
end 
```

为什么会挂起以及如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:41:58.820

我认为这里的线索可能是它是一个本地开发服务器 - 所以它可能一次只能接受一个请求。

要进行测试，请尝试从其他地方获取 html：

```
def send_pdf(file)
  # [...]
  cmd= "#{webkit} -q http://brighterplanet.com -"
  # [...]
end 
```

如果可行，那么您的问题的答案是开发服务器是“单线程”的。

# macos - 在 Mac 中使用安装程序证书进行 CodeSigning pkg 文件

> ID：10834559
> 
> 赞同：0
> 
> 时间：2012-05-31T13:25:06.100
> 
> 标签：macos, installation, certificate, package, codesign

我有一个基于 Mac 桌面 Cocoa 的应用程序，我已通过 mac 证书成功签名。

要生成 .pkg 安装程序文件，我使用以下命令：

> productbuild --component 'App.app' /Applications --sign '3rd Party Mac Developer Installer: Some Name' App.pkg

它通过正确的签名成功生成 .pkg 文件。没有任何抱怨。

但是现在我想在那个 .pkg 中包含一些预检查安装脚本，它可以在安装之前对用户的系统执行一些验证。一旦我已经生成了我的 pkg 怎么办？我可以通过 Package Maker 轻松地将此类脚本包含在包中，然后如何使用安装程序证书对 .pkg 文件进行签名。由于此过程不会签署我的 pkg 文件，因此无法上传到 AppStore

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:17:13.543

首先，我不确定您是否可以首先将此类脚本包含在 App Store 包中。

但是，如果您是，productbuild 的手册页解释了如何使用 --distribution 选项而不是 --component 选项从自定义分发文件生成包。而且，如果您不知道如何编写分发文件，您可以查看任何包中的文件（只需“xar xf App.pkg”即可提取内容，分发将位于顶层）和/或将 productbuild 与 --synthesize 选项一起使用。

# android - 为什么当用户在纵向和横向模式之间切换时系统会销毁并重新启动一个 Activity？

> ID：10834560
> 
> 赞同：2
> 
> 时间：2012-05-31T13:25:06.597
> 
> 标签：android

众所周知，当用户在纵向和横向模式之间切换时，android 会销毁并重新启动 Activity，我们可以通过覆盖`onConfigurationChanged()`回调来防止这种情况发生。谁能向我解释一下系统销毁和启动活动的实际需要是什么？如果我覆盖有任何副作用`onConfigurationChanged()`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:30:26.630

> 虽然这种行为非常强大，但由于您的应用程序会在运行时自动适应设备的配置，因此有时会令新的 Android 开发人员感到困惑，他们想知道为什么他们的活动被销毁和重新创建。面对这个“问题”，一些开发人员选择自己处理配置更改，在我看来，这是一种短期解决方案，当其他设备出现或应用程序变得更加复杂时，这会使他们的生活变得复杂。自动资源处理是一种非常有效且简单的方法，可以使您的应用程序的用户界面适应各种设备和设备配置。但有时它是有代价的。

参考：[http ://android-developers.blogspot.com/2009/02/faster-screen-orientation-change.html](http://android-developers.blogspot.com/2009/02/faster-screen-orientation-change.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:42:19.317

重启Activity的主要目的是因为Android需要改变布局、资源等来适应新的屏幕方向。您可能知道，每个方向（通常）都有自己的[应用程序资源](http://developer.android.com/guide/topics/resources/index.html)。Android 的设计者决定最好简单地重新启动 Activity，因为在更改资源时需要进行大量的返工。

这一点在 Honeycomb 出现[Fragment](http://developer.android.com/guide/topics/fundamentals/fragments.html)之后尤为重要。根据您的方向，您可以显示一组完全不同的片段和相关的数据集。

我强烈建议不要覆盖`onConfigurationChanged()`. 相反，请阅读他的答案中提供的链接 HandlerExploit。它展示了如何使用`onRetainNonConfigurationInstance()`.

# ruby - 将 Ruby 字符串拆分为页面

> ID：10834566
> 
> 赞同：0
> 
> 时间：2012-05-31T13:25:19.447
> 
> 标签：ruby

我一直在考虑这个问题，但不太确定解决这个问题的最佳方法。

在我拥有的 Rails 应用程序中`books`，其中有很多`chapters`，其中有很多`sections`. 章节基本上只是章节的容器，尽管它们本身可能包含文本字符串。这些部分包含大部分书籍文本。

我正计划构建一个在移动浏览器中工作的 HTML 5 电子书阅读器，我不希望用户必须向下滚动——我希望文本在页面末尾中断。

我认为 using`split`可能是要走的路，但我不确定有没有办法定期休息？javascript选项在这里会更好吗？

我看过这个：[在 Ruby on Rails 中使用分页将文本文章分成更小的部分，](https://stackoverflow.com/questions/6648551/dividing-text-article-to-smaller-parts-with-paging-in-ruby-on-rails)但无法在文本中插入手动中断标记，其中一些是 90,000 多个单词。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:32:11.757

我认为这里的主要问题是页面长度将取决于设备（可能还有文本大小，如果这是您的应用程序的功能）。您可能应该一次发送肯定至少有 5 页长的大块，然后让 javascript 进行分页。Rails 无法访问，也不应该访问显示的大小。

文本需要很少的数据，您不必担心传输超出您的需要或在内存中保留太多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:33:43.723

您可以使用空行（“\n”或“
”）作为分隔符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-03T01:41:02.973

我会向下发送足够多的页面内容以轻松填充页面等等，然后在客户端幻灯片上使用 javascript 从页面中删除句子，直到滚动条消失。

[Resize.js](https://gist.github.com/1084223)与我不久前写的类似。我想放大/缩小屏幕上使用的字体大小，直到屏幕填满（对于仪表板监视器）。你的会是相似的，但不是改变字体大小，而是修剪句子。

如果您看不到如何调整此代码，请告诉我。

注意：我还会让 javascript 记录它最终显示的文本数量，并在“下一页”请求中将其传递给服务器，以便服务器知道从哪里开始下一页。

# c# - c# winforms datagridview如何限制单元格输入？

> ID：10834569
> 
> 赞同：2
> 
> 时间：2012-05-31T13:25:29.403
> 
> 标签：c#, winforms, datagridview

防止用户在 datagridveiw 单元格中输入逗号值的最简单方法是什么？c#winforms。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:52:00.887

**试试这个**这将防止在您尝试输入单元格时输入逗号

```
 private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
 {
      e.Control.KeyPress += new KeyPressEventHandler(Control_KeyPress);
 }

 void Control_KeyPress(object sender, KeyPressEventArgs e)
 {
      if (e.KeyChar == 44)
      {
           e.Handled = true;
      }
 } 
```

不要忘记绑定到`EditingControlShowing`DataGridView 的事件

**笔记**

要精确检查和限制控件类型，您可以检查控件类型（例如，对于 TextBox，您可以这样做）

```
 private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
  {
      if (e.Control is TextBox)
      {
          e.Control.KeyPress += new KeyPressEventHandler(Control_KeyPress);
       }
   } 
```

# java - 使用 @batchsize 后 jpa 性能崩溃

> ID：10834573
> 
> 赞同：4
> 
> 时间：2012-05-31T13:25:48.560
> 
> 标签：java, performance, hibernate, jpa

我有一个需要获取大量数据来执行其任务的 java jpa/hibernate 应用程序。我遇到了 n+1 问题，所以我决定使用 hibernate.default_batch_fetch_size (@batchsize) 属性来降低所需的 sql 往返次数。我尝试了一些值，但几乎所有尝试过的值都导致性能崩溃。

批量大小：0 - sqls 发送：14000 - 持续时间：约 1 分钟

批处理大小：4 - sqls 发送：5000 - 持续时间：超过 10 分钟

批量大小：10 - sqls 发送：2700 - 持续时间：约 5 分钟

批量：100 - sqls 发送：400 - 持续时间：约 1 分钟

这是“正常”行为吗？如果不是，可能是什么错误？

我用 log4jdbc 记录了生成的 sql。我注意到每个批处理语句之间大约存在 100-150 毫秒。如果我稍后运行 sql，则每个语句的运行时间不超过 20 毫秒。因此，这似乎不是与 DB（IN 语句）相关的问题。

Java：1.6.0_31、Hibernate 3.6.7、DB Postgres 9.1.1、JDBC postgresql-9.1-901.jdbc4.jar

提前致谢

更新使事情变得清楚：性能损失是在批量获取期间而不是批量更新/插入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-04T14:23:31.180

经过一些调试后，我发现了问题。Hibernate（至少在 3.6.7 版本中）将所有映射的集合存储在一个映射中。您可以使用如下代码访问这些地图：

```
SessionImpl si = ((SessionImpl) entityManager.getDelegate());
PersistenceContext persistenceContext = si.getPersistenceContext();
persistenceContext.getCollectionEntries(); 
```

所以每个集合都会在这张地图中创建一个条目。如果你有很多收藏的 pojo，就像我的例子一样，它会快速增长。例如，每 32 个集合加载 10.000 个 pojo，您就有 320.000 个集合条目。Hibernate 现在只需遍历映射 (org.hibernate.engine.BatchFetchQueue.getCollectionBatch(CollectionPersister, Serializable, int, EntityMode)) 以查找未加载的 Collection id，以便稍后将它们放在 IN 子句中。Hibernate 不会将键的搜索限制在特定类型的集合中，因此情况会变得更糟。

我想我必须清理一些集合，并希望 hibernate 能以更有效的方式找到更高版本的密钥。

更新：对于有同样问题的人来说，这条关于 hibernate jira 的评论可能会很有趣： [https ://hibernate.onjira.com/browse/HHH-1775?focusedCommentId=42686&page=com.atlassian.jira.plugin.system.issuetabpanels:comment -tabpanel#comment-42686](https://hibernate.onjira.com/browse/HHH-1775?focusedCommentId=42686&page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-42686)

更新：这个问题在休眠版本中得到解决：4.1.8

# java - Guava：Iterables.filter VS Collections2.filter，有什么大的区别吗？

> ID：10834577
> 
> 赞同：17
> 
> 时间：2012-05-31T13:26:16.443
> 
> 标签：java, jakarta-ee, guava

我想知道在番石榴中，[`Iterables.filter(Iterable, Predicate)`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/Iterables.html#filter-java.lang.Iterable-com.google.common.base.Predicate-)和[`Collections2.filter(Collection, Predicate)`](https://google.github.io/guava/releases/23.0/api/docs/com/google/common/collect/Collections2.html#filter-java.util.Collection-com.google.common.base.Predicate-)方法之间是否有任何区别？

它们似乎既保持迭代顺序，又提供实时视图。Javadoc 说调用`Collections2.filter().size()`将遍历所有元素。

假设我有一个谓词来过滤项目列表，因此我想要视图中剩余的项目数（或列表，无关紧要）。我应该用什么？`Collections2.filter`由于该`size()`方法由`Collection`s提供，因此使用起来似乎更简单。

但在后台，是否有区别：

```
ImmutableList.copyOf(
    Iterables.filter(lead.getActions(), isRealActionDoneByUserPredicate)
).size(); 
```

和：

```
Collections2.filter(lead.getActions(),isRealActionDoneByUserPredicate).size(); 
```

* * *

顺便说一句，构建一个`ImmutableList`比构建一个正常的更快`ArrayList`吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-31T13:29:56.887

番石榴贡献者在这里。

```
Collections2.filter(elements, predicate).size() 
```

更可取，因为它没有复制——两种`filter`方法都返回一个*视图*——但是

```
Iterables.size(Iterables.filter(elements, predicate)) 
```

本质上是等效的，并且无需任何复制即可找到答案。

至于构建 an`ArrayList`与 an的相对速度`ImmutableList`，取决于您使用的构建方法：

*   `ImmutableList.copyOf(collection)`应该花费几乎完全相同的时间。（它必须检查空值，但这很便宜。）
*   `ImmutableList.builder()....build()`需要更长的时间，因为它必须在`ArrayList`内部使用`Builder`，因为我们事先不知道将添加多少元素。
*   `ImmutableList.of(...)`将具有大约相同的速度。

也就是说，使用的*概念上*的好处`ImmutableList`经常超过小的性能成本，特别是如果你经常传递列表。

# python - 使用python删除重复文件

> ID：10834579
> 
> 赞同：0
> 
> 时间：2012-05-31T13:26:18.563
> 
> 标签：python, file, matching

作为一个个人项目（为了更好地学习 python），我开始研究一个重复文件删除器（特别是对于 .mp3 文件，因为我在尝试组织我的完全重复的音乐收藏时想到了它）。现在，我非常清楚如何继续，匹配文件名并仅提供删除那些具有超过 0.7 相似性比率的文件，并对那些相同但名称完全不同的文件使用 md5 总和（例如：“metallica - 其他都不重要”和“Track1”）。问题是我不知道如何处理那些具有不同名称并且它们彼此有点不同的文件，例如，“没有其他问题”和“Track1”是相同的，除了“ Track1" 结束时有 2 秒的静音。我的问题是：是否有某种方法或算法可以检查文件本身之间的相似性？像字符串匹配但在文件上的东西？不管它是否是一个复杂的算法，越难越好，因为我这样做只是为了学习：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:35:12.507

您可以使用[Chromaprint](http://acoustid.org/chromaprint)来计算一段音乐的指纹。它应该能够找到类似的音乐文件。

如果您想进一步推动这一点，您可以使用[musicbrainz](http://musicbrainz.org/)的 api来查找有关一首音乐的确切信息。

这些库用于我使用的两个伟大的音乐库标记和排序应用程序：[picard](http://musicbrainz.org/doc/MusicBrainz_Picard)和[beets](http://readthedocs.org/docs/beets/en/latest/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T15:30:12.680

你也可以看看win32模块，这里是链接

[http://timgolden.me.uk/python/index.html](http://timgolden.me.uk/python/index.html)

# php - 使用 CSS 问题格式化 PHP

> ID：10834586
> 
> 赞同：0
> 
> 时间：2012-05-31T13:26:37.203
> 
> 标签：php, css

现在我添加了 css，PHP 不会显示的这段代码有什么问题？

```
$args = array(       
'meta_key' => 'anniversary_date',     
 'meta_value' => 0,   
 );    
$user_query = new WP_User_Query( $args );   
 $users = $user_query->get_results();    

 foreach( $users as $user ):      
echo "<div class=\"anniversary-output\">"$user->display_name"</div>";    
 echo "<div class=\"anniversary-output\">will be celebrating their anniversary on </div>";       
echo "<div class=\"anniversary-output\">" get_user_meta( $user->ID, 'anniversary_date', true )"</div>";     
 endforeach; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:32:53.970

```
<?php
$args = array(
    'meta_key' => 'anniversary_date',     
    'meta_value' => 0  
);

$user_query = new WP_User_Query( $args );   
$users = $user_query->get_results();    

foreach( $users as $user ) {
    echo '<div class="anniversary-output">'.$user->display_name.'</div>';
    echo '<div class="anniversary-output">will be celebrating their anniversary on</div>';       
    echo '<div class="anniversary-output">'.get_user_meta($user->ID,'anniversary_date',true).'</div>';     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:32:27.053

您的 php 中有几个错误：

数组中的额外逗号 & 没有 concat`.`的

```
<?php 
$args = array(       
'meta_key' => 'anniversary_date',     
'meta_value' => 0);    
$user_query = new WP_User_Query( $args );   
$users = $user_query->get_results();    

 foreach( $users as $user ):      
   echo "<div class=\"anniversary-output\">".$user->display_name."</div>";    
   echo "<div class=\"anniversary-output\">will be celebrating their anniversary on </div>";       
   echo "<div class=\"anniversary-output\">".get_user_meta( $user->ID, 'anniversary_date', true )."</div>";     
 endforeach; 
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:33:10.113

我添加了串联。试试这个

```
echo "<div class=\"anniversary-output\">".$user->display_name."</div>";    
echo "<div class=\"anniversary-output\">will be celebrating their anniversary on </div>";       
echo "<div class=\"anniversary-output\">".get_user_meta( $user->ID, 'anniversary_date', true )."</div>"; 
```

# android - SurfaceView：dequeueBuffer 在 Android 4.0 上失败

> ID：10834587
> 
> 赞同：0
> 
> 时间：2012-05-31T13:26:41.060
> 
> 标签：android, android-canvas, live-wallpaper, runnable, surfaceholder

我正在构建一个动态壁纸，它有一个全高清分辨率的位图，它被缩小到用户手机屏幕的大小。它在 Android 2.2 和 2.3 上完美运行，但在 4.0 上崩溃。

**编辑 ：**

我使用 try/catch 将问题缩小了一点，发现它从我的 run() 方法开始。使用该 MacGyver 修复程序，它会运行大约 20 秒，淹没以下错误消息，然后崩溃：

```
05-31 20:01:22.590: E/SurfaceTextureClient(1475): dequeueBuffer failed (No such device)
05-31 20:01:22.590: E/BaseSurfaceHolder(1475): Exception locking surface
05-31 20:01:22.590: E/BaseSurfaceHolder(1475): java.lang.IllegalArgumentException
05-31 20:01:22.590: E/BaseSurfaceHolder(1475):  at android.view.Surface.lockCanvasNative(Native Method)
05-31 20:01:22.590: E/BaseSurfaceHolder(1475):  at android.view.Surface.lockCanvas(Surface.java:76)
05-31 20:01:22.590: E/BaseSurfaceHolder(1475):  at com.android.internal.view.BaseSurfaceHolder.internalLockCanvas(BaseSurfaceHolder.java:184)
05-31 20:01:22.590: E/BaseSurfaceHolder(1475):  at com.android.internal.view.BaseSurfaceHolder.lockCanvas(BaseSurfaceHolder.java:157)
05-31 20:01:22.590: E/BaseSurfaceHolder(1475):  at com.pelkkala.test.TestWall$TestMachine.run(TestWall.java:255)
05-31 20:01:22.590: E/BaseSurfaceHolder(1475):  at java.lang.Thread.run(Thread.java:856)
05-31 20:01:22.601: E/ERROR(1475): ERROR IN CODE: java.lang.NullPointerException
05-31 20:01:22.621: W/System.err(1475): java.lang.NullPointerException
05-31 20:01:22.621: W/System.err(1475):     at com.pelkkala.test.TestWall$TestMachine.draw(TestWall.java:233)
05-31 20:01:22.636: W/System.err(1475):     at com.pelkkala.test.TestWall$TestMachine.run(TestWall.java:264)
05-31 20:01:22.636: W/System.err(1475):     at java.lang.Thread.run(Thread.java:856) 
```

这是我的 run() 方法：

```
 public void run() {

        while (running) {
            //perform canvas drawing
            if (!holder.getSurface().isValid()) {
                continue;
            }

            mTimer = System.currentTimeMillis();

            if (mTimer - oldTime > 50) {
                oldTime = mTimer;
                try {
                    Canvas c = holder.lockCanvas();

                    if (!touching) {
                        oscillate(xOrig, yOrig);
                    }
                    if (!touching2) {
                        oscillate2(xOrig2, yOrig2);
                    }

                    draw(c);        
                    holder.unlockCanvasAndPost(c);
                }
                catch (Exception e) {
                    Log.e("ERROR", "ERROR IN CODE: " + e.toString());
                    e.printStackTrace();
                }
            }
        }   
    } 
```

**编辑 2：**

会不会跟模拟器有关系？我现在无法访问 Android 4 设备，所以这就是我所拥有的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T22:56:33.573

我仍然不确定为什么 Android 4 会发生这种情况，但这就是我解决它的方法。

这给我带来了麻烦：

```
class TestEngine extends Engine implements Runnable {} 
```

所以我把它改成这样：

```
class TestEngine extend Engine {

    private final Runnable testRunnable = new Runnable() {
        public void run() {
            drawFrame();
        }
    };

    public void drawFrame() {

        //Draw on canvas and unlock
        ...
        mHandler.postDelayed(testRunnable, 1000 / 50);
    }
} 
```

# java - 如何在我的 Netbeans 项目中包含外部 jar

> ID：10834589
> 
> 赞同：23
> 
> 时间：2012-05-31T13:26:46.253
> 
> 标签：java, netbeans, jar

当我运行“清理并构建”时`.jar`，正在创建的文件仅在`lib`文件夹位于文件的同一文件夹时运行`.jar`。

所以如果我把jar文件移动到桌面，把`lib`文件夹留在文件`dist`夹里，jar文件会给我一个异常。

我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-14T16:53:02.423

我通过只创建一个包含所有库的 jar 文件解决了这个问题，将以下内容添加到 NetBeans 中的 build.xml 文件中：

```
<target name="-post-jar">
  <jar jarfile="dist/Combined-dist.jar">
    <zipfileset src="${dist.jar}" excludes="META-INF/*" />
    <zipfileset src="lib/commons-io-1.4.jar" excludes="META-INF/*" />
    <zipfileset src="lib/ninja-utils-3.2.jar" excludes="META-INF/*" />
    <zipfileset src="lib/unicorn-1.0.jar" excludes="META-INF/*" />
    <manifest>
        <attribute name="Main-Class" value="com.example.mypackage.Main"/>
    </manifest>
  </jar>
</target> 
```

这将创建一个 jar 文件 (Combined-dist.jar)，它是 dist jar 和指定的库 jar（在本例中为 commons-io-1.4.jar、ninja-utils-3.2.jar 和 unicorn-1.0.jar）的组合。罐）。您必须确保为新的 jar 文件指定主类包，否则当您尝试打开它时它不会运行。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-31T13:41:55.370

如果您将 jar 复制到源代码目录中，它们将在您的最终 jar 中。尽管如此，我不确定这是否会 100% 有效。

[java-forum](http://www.java-forums.org/netbeans/12582-netbeans-creating-jar-including-jar-libraries.html)上有一篇很棒的帖子，内容如下：

> 除了少数几种情况，最适合我的是手动合并文件。.jar 基本上是一个带有组织内容的 .zip，您可以在几乎任何支持 .zip 的存档程序中打开它们（我只使用 gnome 的标准存档器 File Roller，它工作得很好）。备份您的 jar 文件并在您选择的存档器中打开它，并对库目录中的每个库 jar 执行相同的操作。将每个库中的工作文件夹（IE，除了 META-INF 目录之外的所有内容）拖放到 jar 的根路径中（与 META-INF 和应用程序的根包一起）。现在将 META-INF/MANIFEST.MF 文件从 jar 拖到桌面或任何其他文件夹。打开它，擦除 Class-Path 和 X-COMMENT 行。不要忘记在文件末尾留一个空白换行符！保存新的清单文件并将其拖回 jar 的 META-INF 目录，覆盖旧的。测试罐子。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-08T08:38:51.013

*将每个依赖库 (*.jar) 打包到一个 myProject.jar 中真的很容易。*

只需按照这些步骤，您最终会将每个依赖库打包到单个 jar 中。如果您使用的是 NetBeans，那么您可以完全按照，否则您需要在项目文件中找到您的**build.xml**文件。

按照以下步骤编辑**build.xml**

1) 单击`Files tab`NetBeans 中项目面板左侧的 。

2）双击`build.xml`文件并在行前添加这些`</project>`行

```
 <target name="package-for-store" depends="jar">
    <property name="store.jar.name" value="myProject"/>
    <property name="store.dir" value="store"/>
    <property name="store.jar" value="${store.dir}/${store.jar.name}.jar"/>
    <echo message="Packaging ${application.title} into a single JAR at ${store.jar}"/>
    <delete dir="${store.dir}"/>
    <mkdir dir="${store.dir}"/>
    <jar destfile="${store.dir}/temp_final.jar" filesetmanifest="skip">
        <zipgroupfileset dir="dist" includes="*.jar"/>
        <zipgroupfileset dir="dist/lib" includes="*.jar"/>
        <manifest>
            <attribute name="Main-Class" value="${main.class}"/>
        </manifest>
    </jar>
    <zip destfile="${store.jar}">
        <zipfileset src="${store.dir}/temp_final.jar"
        excludes="META-INF/*.SF, META-INF/*.DSA, META-INF/*.RSA"/>
    </zip>
    <delete file="${store.dir}/temp_final.jar"/>
</target> 
```

3）根据您的项目名称更改`value`代码的第二行

```
<property name="store.jar.name" value="myProject"/> //<---Just value not name 
```

4) 保存并右键单击**build.xml**并选择**Run Target**和**Other Targets**最后单击**Package-for-store**

5) 到此，你就完成了。现在你可以像`dist`文件夹一样去检查，会有一个`store`文件夹包含你最终的完整jar，包括你所有的依赖库。现在，每当您想更改/添加更多库时，只需按照第 4 步操作即可。

步骤 4 的图片

![在此处输入图像描述](../Images/dfb30c81025f56f122b1bfcc54329375.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-31T13:54:26.813

从 1.7 版开始，您可以使用 Apache Ant 来构建 JAR，而所需的库仅包含在一个文件中。你可以有一个配置文件如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="buildJar">
    <target name="buildJar">
        <!-- Name of jar -->
        <jar destfile="C:/MyJar.jar" filesetmanifest="mergewithoutmain">
            <manifest>
                <!-- Your class with the main method -->
                <attribute name="Main-Class" value="myPackage.MyClass"/>
                <!-- Path in the jar -->
                <attribute name="Class-Path" value="."/>
            </manifest>
            <!-- Dir of compiled class -->
            <fileset dir="C:/NetBeansProjects/MyProject/bin"/>
            <!-- Include required jars -->
            <zipfileset excludes="META-INF/*.SF" 
                src="C:/NetBeansProjects/MyProject/lib/library1.jar"/>
            <zipfileset excludes="META-INF/*.SF" 
                src="C:/NetBeansProjects/MyProject/lib/library2.jar"/>
        </jar>
    </target>
</project> 
```

在 Netbeans 中，将 XML 文件放在您的项目中并使用上下文菜单运行它。

[*在Apache Ant 用户手册*](http://ant.apache.org/manual/)中查看更多信息。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-31T13:35:08.040

**如果您要将您的应用分发到另一台电脑**

您只需将 .jar 与 lib 文件夹一起压缩。

**如果想从你电脑的任何地方运行你的应用程序**

考虑 Maven 这样做的方式 - 创建本地存储库，例如。C:\libs 您的库将存在的位置，并且 .jar 以后可以从您电脑中的任何位置访问它们。

或者你可以只使用 Maven。有一个关于分发具有所有依赖项（库）的应用程序的讨论：[Java：如何构建基于 Maven 的项目的独立分发？](https://stackoverflow.com/questions/1015520/java-how-do-i-build-standalone-distributions-of-maven-based-projects).

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-07T09:04:22.130

将该 jar 文件复制到：

> C:\Program Files\Java\jdk\jre\lib\ext

和

> C:\Program Files\Java\jre\lib\ext

您应该能够在 Netbeans 和手动导入中使用它，就像标准导入一样。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-05-11T16:23:59.620

我在[这里](http://%20oracle.com/technetwork/java/javamail/single-jar-141905.html)找到了解决这个问题的最简单的方法。您只需复制`build.xml`项目文件夹中文件末尾的下一个代码片段。

```
<target name="-post-jar">

    <!-- Change the value to the name of the final jar without .jar -->
    <property name="store.jar.name" value="MyJarName"/>

    <!-- don't edit below this line -->
    <property name="store.dir" value="dist"/>
    <property name="temp.dir" value="temp"/>
    <property name="store.jar" value="${store.dir}/${store.jar.name}.jar"/>

    <echo message="Packaging ${application.title} into a single JAR at ${store.jar}"/>

    <delete dir="${temp.dir}"/>
    <mkdir dir="${temp.dir}"/>

    <jar destfile="${temp.dir}/temp_final.jar" filesetmanifest="skip">
        <zipgroupfileset dir="dist" includes="*.jar"/>
        <zipgroupfileset dir="dist/lib" includes="*.jar"/>

        <manifest>
            <attribute name="Main-Class" value="${main.class}"/>
        </manifest>
    </jar>

    <delete dir="${store.dir}"/>

    <zip destfile="${store.jar}">
        <zipfileset src="${temp.dir}/temp_final.jar"
        excludes="META-INF/*.SF, META-INF/*.DSA, META-INF/*.RSA"/>
    </zip>

    <delete dir="${temp.dir}"/>

</target> 
```

1.  转到项目根目录中的 build.xml 并在`</project>`最后的标记之前添加代码。

2.  现在更改注释的第一个属性字段的值并保存更改。

3.  从现在开始，每次清理和构建项目时，都会在项目 dist 文件夹中生成带有依赖项的完整 jar

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-04-11T13:08:37.783

这对我有用：

我在我的项目中内置了 excel 导出功能。我用于此目的的 2 个外部 .jar 是 jxl.jar end sx.jar

使用 7-Zip 将这 2 个 jar 解压到一个文件夹（java 类）中，无需任何 META 文件。将您的项目 jar 解压到包含 META 文件的同一文件夹中。

使用 JARMaker 重新打包整个 java 类文件夹，在其原始分发文件夹中重新创建您的 Project .jar ......然后就可以了......完整的 excel 功能。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-17T19:33:52.067

user1016588 的解决方案对我有用。有一个错字：这一行应该是 zipfileset src="dist/lib/commons-io-1.4.jar" excludes="META-INF/*"

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-12-27T16:38:14.180

试试这个 - 在 Netbeans IDE 中：

1.  转到工具 --> 库
2.  在对话框中，在左下角单击“新建库”，命名
3.  在右侧，单击“添加 JAR/文件夹”
4.  点击右下角的确定
5.  重新启动IDE并检查。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-04-16T09:52:28.223

请遵循以下步骤：- 1\. 右键单击​​在 netbeans 编辑器中打开的项目 2\. 选择属性 3\. 选择库 4\. 添加 jar 5\. 单击确定

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-06-12T11:43:22.343

您也可以使用它（当库不在“dist/lib”中时），使用 NetBeans 和 ant-contrib 进行测试：

```
 <target name="-post-jar">
		<taskdef resource="net/sf/antcontrib/antlib.xml">
		  <classpath>
			<!-- Path to ant-contrib -->
			<pathelement location="../../Libs/ant-contrib-1.0b3.jar"/>
		  </classpath>
		</taskdef>

		<!-- Change the value to the name of the final jar without .jar -->
		<property name="store.jar.name" value="${application.title}"/>

		<!-- don't edit below this line -->
		<property name="store.dir" value="dist"/>
		<property name="temp.dir" value="temp"/>
		<property name="temp.libs.dir" value="temp/libs"/>
		<property name="store.jar" value="${store.dir}/${store.jar.name}.jar"/>

		<echo message="Packaging ${application.title} into a single JAR at ${store.jar}"/>

		<fileset id="store.jars.absolute" dir="${store.dir}" includes="*.jar"/>		
		<pathconvert property="store.jars.relative" refid="store.jars.absolute" dirsep="/">
			<map from="${basedir}/" to=""/>
		</pathconvert>

		<for list="${store.jars.relative}" param="item">
			<sequential>
				<echo message="Adding @{item} into single JAR at ${store.jar}"/>
			</sequential>
		</for>

		<delete dir="${temp.dir}"/>
		<mkdir dir="${temp.dir}"/>

		<for list="${javac.classpath}" param="item" delimiter=":">
			<sequential>
				<echo message="Adding @{item} into single JAR at ${store.jar}"/>
				<copy file="@{item}" todir="${temp.libs.dir}" overwrite="true" />
			</sequential>
		</for>

		<jar destfile="${temp.dir}/temp_final.jar" filesetmanifest="skip">
			<zipgroupfileset dir="${store.dir}" includes="*.jar"/>
			<zipgroupfileset dir="${temp.libs.dir}" includes="*.*"/>

			<manifest>
				<attribute name="Main-Class" value="${main.class}"/>
			</manifest>
		</jar>

		<delete dir="${store.dir}"/>

		<zip destfile="${store.jar}">
			<zipfileset src="${temp.dir}/temp_final.jar" excludes="META-INF/*.SF, META-INF/*.DSA, META-INF/*.RSA"/>
		</zip>

		<delete dir="${temp.dir}"/>

	</target>
```

# ruby-on-rails - 文件上传，factory_girl & database_cleaner

> ID：10834591
> 
> 赞同：1
> 
> 时间：2012-05-31T13:26:57.240
> 
> 标签：ruby-on-rails, factory-bot, rspec-rails

在我的模型中，我必须选择保存在`editorial_asset`表格中的资产。

```
include ActionDispatch::TestProcess

FactoryGirl.define do
  factory :editorial_asset do
    editorial_asset { fixture_file_upload("#{Rails.root}/spec/fixtures/files/fakeUp.png", "image/png") }
  end
end 
```

所以我在我的模型工厂中附加了一个关联`:editorial_asset`

上传效果很好，但需要太多时间（每个示例 1 秒）

我想知道是否可以在每个示例之前创建一次上传，并在工厂中说：“查找而不是创建”

但是 database_cleaner 的问题，我不能除了表`:transaction`，截断需要 25 秒而不是 40 毫秒！

# 编辑

需要资产的工厂

```
FactoryGirl.define do
  factory :actu do
    sequence(:title) {|n| "Actu #{n}"}
    sequence(:subtitle) {|n| "Sous-sitre #{n}"}

    body Lipsum.paragraphs[3]

    # Associations
    user
    # editorial_asset
  end
end 
```

型号规格

```
require 'spec_helper'

describe Actu do
  before(:all) do
    @asset = create(:editorial_asset)
  end

  after(:all) do
    EditorialAsset.destroy_all
  end

  it "has a valid factory" do
    create(:actu).should be_valid
  end

end 
```

所以一种工作方式是

```
 it "has a valid factory" do
    create(:actu, editorial_asset: @asset).should be_valid
  end 
```

但是没有办法自动注入关联？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:02:20.720

由于您使用的是 RSpec，因此您可以使用一个`before(:all)`块来设置这些记录一次。但是，在 before-all 块中所做的任何事情**都不**被视为事务的一部分，因此您必须在 after-all 块中自己从数据库中删除任何内容。

是的，您的模型工厂可以在创建它之前先尝试找到一个与编辑资产相关联的模型。而不是做`association :editorial_asset`你可以做的事情：

```
editorial_asset { EditorialAsset.first || Factory.create(:editorial_asset) } 
```

您的 rspec 测试可能如下所示：

```
before(:all) do
    @editorial = Factory.create :editorial_asset
end

after(:all) do
    EditorialAsset.destroy_all
end

it "already has an editorial asset." do
    model = Factory.create :model_with_editorial_asset
    model.editorial_asset.should == @editorial
end 
```

在 Rspec GitHub wiki 页面或 Relish 文档中阅读有关之前和之后块的更多信息：

[https://github.com/rspec/rspec-rails](https://github.com/rspec/rspec-rails)

[https://www.relishapp.com/rspec](https://www.relishapp.com/rspec)

# webdriver - selenium IDE 命令“assertTextNotPresent”的 webdriver 等效项是什么？

> ID：10834592
> 
> 赞同：1
> 
> 时间：2012-05-31T13:27:03.027
> 
> 标签：webdriver, selenium-ide

我需要一些帮助！

请在下面找到我的 selenium IDE 代码，该代码在转换为 webdriver 代码时给了我**// 错误：捕获异常 [错误：不支持的命令 [isTextPresent]]**

```
<tr>
    <td>assertTextNotPresent</td>
    <td>//*[@id='collapseComment']/div/div/div[2]/label</td>
    <td>Max. 3072 characters</td>
</tr> 
```

基本上我希望我的测试失败，如果它找到文本字符串' **Max.** 运行时页面上有**3072 个字符**

如果有人可以通过提供我可以使用的 java 等效项来帮助我，我将不胜感激。

干杯山

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T12:16:36.400

我看到的第一件事是 assertTextNotPresent 的 IDE 命令不接受目标和值。它只需要一个包含正在搜索的文本模式的目标。目前，您的测试断言“//*[@id='collapseComment']/div/div/div[2]/label”的文本不在页面上的任何位置。

如果您使用 assertNotText 的 IDE 命令，它将正常工作。assertNotText 需要目标中的定位器和要比较的值。当您使用 IDE 导出到 Java 时，它会正确翻译 assertNotText。

考虑到这一点，在带有 JUnit 4 的 Java 中，答案是：

```
WebDriver driver = new FirefoxDriver();
...
WebElement element = driver.FindElement(By.XPath("//*[@id='collapseComment']/div/div/div[2]/label"));
assertThat("Max. 3072 characters", is(not(element.getText()))); 
```

或者

```
assert(false, element.getText().contains("Max. 3072 characters")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:26:04.303

您没有说您使用的是什么断言/单元测试框架，但这是在 C# 和 NUnit 中：

```
IWebDriver firefoxDriver = new FirefoxDriver();
IWebElement element = firefoxDriver.FindElement(By.XPath("//*[@id='collapseComment']/div/div/div[2]/label"));
Assert.IsFalse(element.Text.Contains("Max. 3072 characters")); 
```

# git - 我如何从另一个 git 分支合并，除了一些提交，并且有健全/容易查询的历史记录？

> ID：10834593
> 
> 赞同：3
> 
> 时间：2012-05-31T13:27:07.817
> 
> 标签：git, git-merge

简短版本：我有一个`master`分支，人们正在努力并致力于。然后我有一个分支`master`，称之为`foo`人们也在努力并致力于的分支。定期，我想带来一些，*但不是全部*，从`foo`back 到`master`. 我希望通过某种方式`master`来查询历史记录的存在和不存在`foo`。这似乎有问题。我该怎么做呢？

长版：创建一个示例 git repo，如下所示：

```
cd /tmp && mkdir gitrepo && cd gitrepo/ && git init
echo "Something shared" > myFile.txt && git add myFile.txt && git commit -m "Added myFile.txt to master"
git checkout -b foo master
echo "Something else shared" > anotherFile.txt && git add anotherFile.txt && git commit -m "Added anotherFile.txt to foo"
echo "Something specific to foo" > foochange.txt && git add foochange.txt && git commit -m "Added foochange.txt to foo"
echo "Something else shared again" > yetAnotherFile.txt && git add yetAnotherFile.txt && git commit -m "Added yetAnotherFile.txt to foo"
git checkout master
echo "Something specific to master" > masterchange.txt && git add masterchange.txt && git commit -m "Added masterchange.txt to master"
echo "Specific to master" > masterchange.txt && git add masterchange.txt && git commit -m "Added masterchange.txt on master" 
```

（从这里开始的所有讨论都假设我们在`master`）

现在我们遇到了`foo`两个提交落后`master`并且自己有三个提交的情况。在这一点上，我想将第一个和第三个提交从`foo`to`master`但不是第二个带回。

根本问题是，提交的父级`foo`是我*不想*合并的提交，但是由于提交的父级是该提交的哈希的一部分，因此无法保留头部提交的哈希也`foo`没有创造一个`git branch --contains foo^`对主人来说是真实的情况。

例如，如果我这样做`git merge foo`了，它将合并所有从`foo`to的提交`master`。在这样做之后，我可以`git branch --contains foo^`说它会说两者`foo`并`master`包含该提交。然后我尝试做一个`git revert foo^`但`git branch --contains foo^`仍然报告`master`包含`foo^`.

如果我`git cherry-pick foo foo^^`有两个相关的修订，那么我有来自`foo`应用的这两个修订的差异的更改`master`，但`git branch --contains foo^`说只有分支`foo`包含该提交。

我在这里尝试实现的是某种查询历史记录的方法（无需手动关联存储为提交消息中的文本的哈希），因此我可以查看哪些提交已合并到主控中，哪些尚未合并到主控中。如前所述，我知道几种方法可以让 master 的*状态*与我想要的一样（cherry-pick、merge+revert、format-patch/am、diff/patch 等）我正在寻找的是某种方式来查询我需要的信息的*历史记录。*我知道这`git branch --contains`可能永远不会以我想要的方式工作，但如果有一些替代方法来查询历史，我没有想到，我全神贯注。

有人有想法么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:46:57.003

我认为`git-cherry`是您正在寻找的命令。

```
git cherry -v master foo 
```

这显示了`foo`尚未（尚未）合并到`master`.

```
$ git cherry -v master foo
+ 1cffcfb1d061d308e8d33c262e30282a26b195cb Added anotherFile.txt to foo
+ fe0599190a6953c970cd3f94e18ff0c282e89e2c Added foochange.txt to foo
+ 1b548eb45ff50e59f3522ee63edd0c177e842645 Added yetAnotherFile.txt to foo

$ git cherry-pick 1cffcfb1d061d308e8d33c262e30282a26b195cb
...

$ git cherry-pick 1b548eb45ff50e59f3522ee63edd0c177e842645
...

$ git cherry -v master foo
- 1cffcfb1d061d308e8d33c262e30282a26b195cb Added anotherFile.txt to foo
+ fe0599190a6953c970cd3f94e18ff0c282e89e2c Added foochange.txt to foo
- 1b548eb45ff50e59f3522ee63edd0c177e842645 Added yetAnotherFile.txt to foo 
```

从手册：

> 在上游分支中已经具有等效更改的以减号 (-) 为前缀，仅在头分支中存在的以加号 (+) 为前缀：

# log4net - 在 log4net 中，是否可以按名称而不是仅按级别静音记录器？

> ID：10834594
> 
> 赞同：1
> 
> 时间：2012-05-31T13:27:16.347
> 
> 标签：log4net

我正在使用一些同事生成的 DLL 构建一个新的 C# 项目。他们在所有级别都有 log4net 语句，数量如此之多，以至于我的日志在大众中几乎看不到......

在 log4net 中，是否可以按名称而不是仅按级别静音记录器？甚至更好，按程序集名称？我想在我使用的 DLL 中静音登录...

谢谢你们的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:09:00.800

应该是在您的配置文件中添加一个部分，例如

```
 <logger name="xxx" additivity="false">
     <level value="OFF" />
 </logger> 
```

如果日志记录使用标准约定，即

```
internal static readonly log4net.ILog log = log4net.LogManager.GetLogger(System.Reflection.MethodBase.GetCurrentMethod().DeclaringType); 
```

那么您需要替换 xxx 可以是您要禁用的命名空间或命名空间的一部分。

如果您的同事使用与您使用的完全相同的命名空间名称，那么您可能需要将 xxx 替换为实际的类名，这可能意味着您最终会在配置文件中使用大量条目来禁用他们每个人的日志记录类。

# opengl - 如何将片段着色器应用于每个像素？

> ID：10834595
> 
> 赞同：1
> 
> 时间：2012-05-31T13:27:17.320
> 
> 标签：opengl, rendering

我将一些透明贴花渲染到单独的帧缓冲区中。现在我正在尝试将此缓冲区与后台缓冲区（活动目标）混合。

我假设我必须将 fbo 的颜色缓冲区作为纹理加载到片段着色器中，并将纹理颜色输出到活动目标。**如何告诉显卡为每个像素执行此操作？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:44:14.763

绘制一个覆盖整个屏幕的四边形或两个三角形。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T19:05:13.643

my code for the fullscreen rectangle/quad this is old method - from OpenGL 1.1, but works :) For new OpenGL 3.* you have to use VBO/Arrays

```
glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();
glMatrixMode(GL_MODELVIEW);
glPushMatrix();
glLoadIdentity();

glBegin(GL_QUADS);
glTexCoord2f( 0,0 );
glVertex3d( -1.0,-1.0, 0 );
glTexCoord2f( 1,0 );
glVertex3d(  1.0,-1.0, 0 );
glTexCoord2f( 1,1 );
glVertex3d(  1.0, 1.0, 0 );
glTexCoord2f( 0,1 );
glVertex3d( -1.0, 1.0, 0 );
glEnd();

glMatrixMode(GL_PROJECTION);
glPopMatrix();
glMatrixMode(GL_MODELVIEW);
glPopMatrix(); 
```

of course you have to setup textures before

# java - 移除使用复杂布局的容器

> ID：10834600
> 
> 赞同：1
> 
> 时间：2012-05-31T13:27:24.307
> 
> 标签：java, swing, applet, gridbaglayout

我正在创建一个（j）小程序，用户可以访问从树中选择的几个不同视图。小程序有一个主要区域，当前视图显示在滚动窗格内，替换之前的任何内容。大多数情况下，这可以正常工作，但是当要替换的视图具有更复杂的布局时，例如大型（约 100 个组件），而不是嵌套的，删除需要几秒钟！大视图的创建速度快如闪电，只是删除速度很慢。这仅在 applet 中很明显，在 JFrame 中运行应用程序仍然和我预期的一样快。我使用 GridBagLayout 作为视图。

经过一些实验，我发现如果我更换

```
contents.remove(view); //contents is the view of the scrollpane. 
```

和

```
view.removeAll();
contents.remove(view); 
```

那么整个过程非常快。

我的猜测是这种行为的原因是 Java 的一些布局“魔法”，虽然我有一个解决方案，但感觉不对，似乎表明我不完全理解发生了什么。所以我的问题是：
有人知道实际发生了什么吗？有没有更好（更清晰）的方法来完成同样的事情？

编辑：SSCCE：[http ://pastebin.com/VC1T7zGv](http://pastebin.com/VC1T7zGv)

```
import java.awt.BorderLayout;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;

import javax.swing.AbstractAction;
import javax.swing.JApplet;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class SSCCE extends JApplet {
    private boolean state;

    public void init() {
        super.init();
        getContentPane().add(setupSwitchPanel(), BorderLayout.NORTH);
        getContentPane().add(setupSimplePanel(), BorderLayout.CENTER);
    }

    private JPanel setupSwitchPanel() {
        JPanel switchPanel = new JPanel();
        switchPanel.add(new JButton(new AbstractAction("Switch panels (slow)") {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                switchComponents();
            }
        }));

        switchPanel.add(new JButton(new AbstractAction("Switch panels (fast)") {
            @Override
            public void actionPerformed(ActionEvent arg0) {
                ((JPanel)getContentPane().getComponent(1)).removeAll();
                switchComponents();
            }
        }));
        return switchPanel;
    }

    private void switchComponents() {
        getContentPane().remove(1);
        if (state)
            getContentPane().add(setupSimplePanel(), BorderLayout.CENTER);
        else
            getContentPane().add(setupComplexPanel(), BorderLayout.CENTER);
        state = !state;
        getContentPane().validate();
    }

    private JPanel setupComplexPanel() {
        JPanel contents = new JPanel();
        contents.setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();
        for (int x = 0; x<10; x++) {
            c.gridx = x;
            for (int y = 0; y<10; y++) {
                c.gridy = y;
                contents.add(new JLabel(x + ", " + y), c);
            }
        }
        return contents;
    }

    private JPanel setupSimplePanel() {
        JPanel contents = new JPanel();
        contents.add(new JLabel("Simple view"));
        return contents;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:33:51.673

*   不要`add / remove`对`JScrollPane`已经可见的东西，（确保您可以尝试调用[setViewportView(Component)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html#setViewportView%28java.awt.Component%29)，但我不建议这样做）

*   把父亲`JPanel`嵌套在另一个`JPanel`s 或`JComponent`s

*   打电话给父亲`JPanel#removeAll()`

*   给父亲 添加一个新`JPanel`的 s 或s`JComponent``JPanel`

*   之后，给父亲打个电话，`JPanel#revalidate()`然后`JPanel#repaint()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T09:24:28.160

替代策略：使用`CardLayout`.

> 我宁愿不要将所有不同的视图都保存在内存中。

为什么？典型的内存可以允许存储数百张带有数百个组件的卡片。

懒惰地创建它们，GUI 在典型的使用运行中可能只有 20-40 张卡。当然，将现有卡片重新用于常见任务，只需更改内容即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-23T09:26:40.590

通常，调用具有许多子级的组件的“removeAll”（例如，考虑具有许多行的 GridBagLayout）可能会非常慢，因为 Swing 会触发大量通知事件并调用多次同步部分（*java.awt.Component.获取树锁（）*）。

一个非常有用的技巧是在调用 removeAll**之前**关闭组件的可见性并再次打开它：

```
 mypanel.setVisible(false);
   mypanel.removeAll();  //<-- it can be very slow!!!
   mypanel.setVisible(true); 
```

移除不可见的组件非常快。

# node.js - Node.js + node-tds + Sql Server

> ID：10834602
> 
> 赞同：2
> 
> 时间：2012-05-31T13:27:27.537
> 
> 标签：node.js, sql-server-2012

我正在尝试遵循 node-tds 示例，了解如何使用 node.js [http://cretz.github.com/node-tds/从 Sql 服务器连接和检索数据](http://cretz.github.com/node-tds/)

连接时没有错误，但是当我尝试检索数据时，我得到以下信息：

```
"Error: Client must be in LOGGED IN state before executing sql
at TdsClient.sqlBatch (C:\Program Files (x86)\nodejs\node_modules\tds\lib\tds-client.js:101:13)
at Statement.<anonymous> (C:\Program Files (x86)\nodejs\node_modules\tds\lib\tds.js:256:37)
at Statement.execute (C:\Program Files (x86)\nodejs\node_modules\tds\lib\tds.js:2:59)
at Object.<anonymous> (C:\Program Files (x86)\nodejs\edas\app.js:67:6)
at Module._compile (module.js:446:26)
at Object..js (module.js:464:10)
at Module.load (module.js:353:31)
at Function._load (module.js:311:12)
at Array.0 (module.js:484:10)
at EventEmitter._tickCallback (node.js:190:38)" 
```

我已经登录了，所以……我不知道发生了什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T15:17:39.713

您应该在连接已经建立时执行您的语句，即

```
var tds = require("tds");

var conn = new tds.Connection({
  host: "localhost",
  port: 1433,
  userName: "user",
  password: "secret",
  database: "MyDb"
});

conn.connect(function(error) {
  if (error != null) {
    console.error("Received error", error);
  } else {
    console.log("Now connected, can start using");
  }
});

conn.on("connect", function() {
    var statement = conn.createStatement("SELECT ProductID, ProductName FROM Products");
    statement.on("row", function(row) {
      console.log("Received row: ", row.getValue(0));
    });
    statement.execute();
}); 
```

# c++ - Cmake麻烦从单独的文件C++链接一个类

> ID：10834606
> 
> 赞同：3
> 
> 时间：2012-05-31T13:27:42.433
> 
> 标签：c++, linux, class, types, cmake

我对 linux 开发很陌生，并且在我的 main.js 文件中使用来自单独文件的类时遇到了麻烦。我在制作时遇到的错误（在使用cmake创建makefile之后）是系统没有命名类型，我认为系统类中的代码是正确的，就好像我编译时没有尝试创建系统类的对象我没有错误，所以我认为这可能与我编写 CMakeLists.txt 文件的方式有关。

这是我的 CMakeLists 文件：

```
 cmake_minimum_required (VERSION 2.6)
    project (GL_PROJECT)

    add_library(system system.cpp)

    include_directories(${GL_PROJECT_SOURCE_DIR})
    link_directories(${GL_PROJECT_BINARY_DIR})

      find_package(X11)

      if(NOT X11_FOUND)
        message(FATAL_ERROR "Failed to find X11")
      endif(NOT X11_FOUND)

       find_package(OpenGL)
      if(NOT OPENGL_FOUND)
        message(FATAL_ERROR "Failed to find opengl")
      endif(NOT OPENGL_FOUND)

    set(CORELIBS ${OPENGL_LIBRARY} ${X11_LIBRARY})

    add_executable(mainEx main.cpp system.cpp)

    target_link_libraries(mainEx ${CORELIBS} system) 
```

我在源目录中有我的 main.cpp、system.h（类定义）和 system.cpp（类实现）

主要：

```
 #include"system.h"

      system sys;

      int main(int argc, char *argv[]) {

      while(1) 
        {
            sys.Run();
        }

      } 
```

X11 和 GL 包括等在 system.h 中，我认为其中的代码是正确的并且不会导致错误（因为如果我不尝试创建类的实例，它会构建得很好）。为简洁起见，我省略了实际的标头和实现，希望这将是 CMakeList 文件中的一个明显错误，但如有必要，我也可以添加这些吗？

有任何想法吗？

提前致谢。

编辑：这是终端中的错误

```
 [tims@localhost build]$ make
    Scanning dependencies of target system
    [ 33%] Building CXX object CMakeFiles/system.dir/system.cpp.o
    Linking CXX static library libsystem.a
    [ 33%] Built target system
    Scanning dependencies of target mainEx
    [ 66%] Building CXX object CMakeFiles/mainEx.dir/main.cpp.o
    /home/tims/Code/GL_Project/main.cpp:5:1: error: ‘system’ does not name a type
    /home/tims/Code/GL_Project/main.cpp: In function ‘int main(int, char**)’:
    /home/tims/Code/GL_Project/main.cpp:11:3: error: ‘sys’ was not declared in this scope
    make[2]: *** [CMakeFiles/mainEx.dir/main.cpp.o] Error 1
    make[1]: *** [CMakeFiles/mainEx.dir/all] Error 2
    make: *** [all] Error 2 
```

编辑2：system.h

```
 #include<stdio.h>
    #include<stdlib.h>
    #include<X11/X.h>
    #include<X11/Xlib.h>
    #include <GL/gl.h>           
    #include <GL/glx.h>                                                                
    #include <GL/glu.h>    

    class system {
    public:
        system(void);

        ~system(void);

        void CreateGLXWindow();

        void Run();

        //Contains information about X server we will be communicating with 
        Display *display;

    XEvent xEvent;

    //Window instance
    Window rootWindow;
    XVisualInfo *xVisInfo;
    XSetWindowAttributes setWindAttrs;
    XWindowAttributes xWindAttrs;

    //GL 
    GLXContext context;
    Colormap  cmap;

    Window window;
private:

}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T16:07:21.650

类名与在中声明的函数`system`冲突，该函数包含在您的. 您要么需要重命名类，要么将其移动到命名空间中，因为在 C++ 中类和函数不能具有相同的名称。`int system(const char*)``stdlib.h``system.h``system`

# salesforce - 更新数据库时 Salesforce 页面自动更新

> ID：10834609
> 
> 赞同：2
> 
> 时间：2012-05-31T13:27:46.073
> 
> 标签：salesforce, apex-code, visualforce

我有以下页面显示来自数据库的文档，我想要完成的是在数据库中添加新文档时自动刷新或更新此页面。有没有办法可以在我的控制器或页面中使用 AJAX 或拉动或其他东西来实现这一目标？

页：

```
 <apex:pageBlockTable value="{!docs}" var="d" rendered="{!NOT(ISNULL(docs))}" Title="Documents">  
        <apex:column headerValue="Name">
               <apex:outputText value="{!d.Name}"/>           
       </apex:column>   
   </apex:pageBlockTable> 
```

控制器

```
 public List<FTPAttachment__c> getDocs()
    {
        docs= [Select Name from FTPAttachment__c where Case__c  = :cse.id];
        return docs;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:58:55.363

听起来您正在寻找`<apex:actionPoller>`标签：

```
<apex:actionPoller action="{!refreshDocs}" rerender="docsTable" interval="5" />
<apex:pageBlockTable id="docsTable" value="{!docs}" var="d" rendered="{!NOT(ISNULL(docs))}" Title="Documents">  
    <apex:column headerValue="Name">
        <apex:outputText value="{!d.Name}"/>           
    </apex:column>   
</apex:pageBlockTable> 
```

您可以让该`refreshDocs()`方法显式地重新填充`docs`列表，但由于您已经在 getter 中执行此操作（将在重新渲染表时调用该方法），因此此方法可以直接返回而无需执行任何特殊操作：

```
public List<FTPAttachment__c> getDocs() {
    return [Select Name from FTPAttachment__c where Case__c  = :cse.id];
}
public PageReference refreshDocs() {
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-03T01:42:08.100

或者，您可以使用流式传输 API。

[http://www.salesforce.com/us/developer/docs/api_streaming/index.htm](http://www.salesforce.com/us/developer/docs/api_streaming/index.htm)

# sql - 向表中插入行的日期

> ID：10834610
> 
> 赞同：2
> 
> 时间：2012-05-31T13:27:46.850
> 
> 标签：sql, sql-server, sql-server-2005

是否可以在 SQL Server 2005 中将行插入表中时找到日期+时间？

SQL Server 是否记录插入命令？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:30:46.923

每当我创建一个表时，我总是包含以下两列：

```
CreatedBy varchar(255) default system_name,
CreatedAt datetime default getdate() 
```

尽管这使用了一些额外的空间，但我发现随着时间的推移，这些信息证明非常非常有用。

你的问题是关于日志的。答案是“是”。但是，能否获取信息取决于您的恢复模式。如果简单，则为下一个事务覆盖记录。如果是bulk 或full，则信息在日志中，至少自上次增量备份以来是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:00:11.750

只要您使用 cdc 创建的函数来提取实际数据记录，就可以导出插入日期。

因此，例如，如果您要拉出类似的东西：

```
DECLARE @from_lsn binary(10), @to_lsn binary(10);                         

SET @from_lsn=sys.fn_cdc_get_min_lsn ( 'name_of_your_cdc_instance_on_cdc_table' );
SET @to_lsn=sys.fn_cdc_get_max_lsn();

SELECT * FROM 
cdc.fn_cdc_get_net_changes_name_of_your_cdc_instance_on_cdc_table
(
    @from_lsn, 
    @to_lsn, 
    N'all'
); 
```

您可以使用 cdc 内置函数`sys.fn_cdc_map_lsn_to_time`将日志序列号转换为日期时间。下面的用例：

```
SELECT sys.fn_cdc_map_lsn_to_time(__$start_lsn),* FROM 
cdc.fn_cdc_get_net_changes_name_of_your_cdc_instance_on_cdc_table
(
    @from_lsn, 
    @to_lsn, 
    N'all'
); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:32:39.147

您可以在表格上有一个 InsertDate 默认 getdate() 列，这将是最简单的方法。

在 SQl Server 2008 上，您可以使用[CDC](http://msdn.microsoft.com/en-us/library/bb522489%28v=sql.105%29.aspx)控制表上更改的数据

> 更改数据捕获记录应用于 SQL Server 表的插入、更新和删除活动。这使得更改的详细信息以易于使用的关系格式提供。为修改的行捕获列信息和将更改应用于目标环境所需的元数据，并将其存储在反映跟踪源表的列结构的更改表中。提供表值函数以允许消费者系统地访问更改数据。

# spring - java.lang.VerifyError org.apache.cxf.transport.servlet.ServletTransportFactory 覆盖最终方法 register.()V？

> ID：10834611
> 
> 赞同：0
> 
> 时间：2012-05-31T13:27:49.457
> 
> 标签：spring, soap, cxf

我正在尝试使用**CXF 和 spring 2.5.6**在我的项目中开发一个新的 SOAP Web 服务，但是当我将 war 文件部署到 tomcat 6 中时，我遇到了这个异常：

```
java.lang.VerifyError org.apache.cxf.transport.servlet.ServletTransportFactory overrides final method register.()V 
```

我已经在 pom.xml、web.xml 和应用程序上下文文件中完成了所有配置。：这是 WS 的 web.xml 添加行：

```
<display-name>CXF Example Webservice</display-name>

<servlet>
    <servlet-name>CXFServlet</servlet-name>
    <servlet-class>org.apache.cxf.transport.servlet.CXFServlet</servlet-class>

</servlet>

<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

我将这些行添加到应用程序上下文文件中：

```
 <import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml" />
<import resource="classpath:META-INF/cxf/cxf-servlet.xml" />

<!-- Spring manage ServiceBean -->
<bean id="savServ" class="com.otn.sav.SavServiceImpl" />

<!-- JAX-WS Service Endpoint -->    
<jaxws:endpoint id="savService" implementor="#savServ" address="/savService" /> 
```

我认为这是“versionig”的问题，这就是java无法加载类的原因：

```
org.apache.cxf.transport.servlet.ServletTransportFactory 
```

我尝试了几次来解决这个异常，但不幸的是，如果有人可以帮助我，我无法解决它，请回答我??????? ps：对不起我的英语不好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:21:10.980

Edit: look if you don't have some older jar on your classpath - this was my case (not sure how it happened but deleting them helped). Still, it produced another problem.

# linq - 如何将 linq 查询结果转换为 arraylist？

> ID：10834614
> 
> 赞同：0
> 
> 时间：2012-05-31T13:28:02.673
> 
> 标签：linq, arraylist

我尝试了以下编码将 LINQ 查询转换为 ArrayList，但出现错误

> '不能将类型 System.Collections.Generic.List 隐式转换为 System.Collections.ArrayList'

编码是，

```
var qry1 = (from a in obj.table1
                       join b in obj.table2
                       on a.id1 equals b.id1                       
                       select new
                       {
                          b.name,
                          b.id
                     });

           ArrayList al = new ArrayList();

           al = qry1.ToList(); 
```

如何将查询结果转换为 ArrayList。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:34:13.950

```
ArrayList al = new ArrayList();

al.AddRange((from a in obj.table1
                       join b in obj.table2
                       on a.id1 equals b.id1                       
                       select new
                       {
                          b.name,
                          b.id
                     }).ToList()); 
```

如果你真的想使用 ArrayList。

# testing - tcp流重放工具

> ID：10834615
> 
> 赞同：13
> 
> 时间：2012-05-31T13:28:03.780
> 
> 标签：testing, networking, tcp, network-programming

我正在寻找一种工具来记录和重放 TCP 流的一侧以进行测试。我看到用于测试防火墙等的记录整个 TCP 流（服务器和客户端）的工具，但我正在寻找的是一个工具，它只记录客户端提交的流量（带有时间信息）然后重新提交它到服务器进行测试。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T16:51:10.927

由于 TCP 处理重传、序列号[`SACK`](http://www.faqs.org/rfcs/rfc2018.html)和窗口化的方式，这可能比您想象的要困难得多。

通常人们使用[tcpreplay](http://tcpreplay.synfin.net/)进行数据包重放；但是，它[不支持同步 TCP 序列号](http://tcpreplay.synfin.net/wiki/usage#SendingTraffictoaServer)。由于您需要有一个双向 TCP 流（这需要同步 seq 编号），请使用以下选项之一：

1.  *如果这是一个非常交互式的客户端/服务器协议*，您可以使用[`scapy`](http://www.secdev.org/projects/scapy/)剥离流的 TCP 内容，解析时间和交互性。接下来使用此信息，打开一个新的 TCP 套接字到您的服务器并将该数据反序列化到新的 TCP 套接字中。`scapy`如果遇到 TCP 重传和窗口动态，解析原始流可能会很棘手。将字节写入新的 TCP 套接字不需要自己处理序列号……操作系统会处理这个问题。

2.  *如果这是一个简单的流并且您可以不使用计时（或想要手动插入计时信息）*，您可以使用 wireshark 从 TCP 流中获取原始字节，而不必担心使用[`scapy`](http://www.secdev.org/projects/scapy/). 获得原始字节后，将这些字节写入新的 TCP 套接字（根据需要考虑交互性）。将字节写入新的 TCP 套接字不需要自己处理序列号……操作系统会处理这个问题。

3.  如果您的流是严格的文本（但不是 html 或 xml）命令，例如 telnet 会话，则类似[Expect](http://en.wikipedia.org/wiki/Expect)的解决方案可能比上述解析更容易。在此解决方案中，您不会直接从代码中打开 TCP 套接字，使用 expect 到`spawn`telnet（或其他）会话并使用`send`/重播文本命令`expect`。您期望的库/底层操作系统将负责 seq 编号。

4.  如果您正在测试 Web 服务，我怀疑模拟真正的 Web 客户端点击链接会容易得多[`Selenium`](http://seleniumhq.org/)或[`Splinter`](http://splinter.cobrateam.info/)。您的 http 库/底层操作系统将负责新流中的 seq 编号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T00:29:08.707

查看 WirePlay [code.google.com/p/wireplay](https://code.google.com/p/wireplay/)或[github.com/abhisek/wireplay](https://github.com/abhisek/wireplay)，它们承诺重播捕获的 TCP 会话的客户端或服务器端，并根据需要修改所有 SYN/ACK 序列号。

我不知道是否有可用的二进制版本，您需要自己编译。

请注意，我自己还没有尝试过，但正在研究它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-27T01:21:04.273

是的，实施这样的工具是一项艰巨的任务。两年前我开始实现这种工具，现在工具已经成熟。尝试一下，也许你会发现它就是你要找的工具。

[https://github.com/wangbin579/tcpcopy](https://github.com/wangbin579/tcpcopy)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-16T03:37:47.833

我想要类似的东西，所以我和 scapy 一起工作了一段时间，并想出了一个对我有用的解决方案。我的目标是重放捕获的 pcap 文件的客户端部分。我有兴趣从服务器获得响应——不一定是时间。下面是我的 scapy 解决方案 - 它绝不是经过测试或完成的，但它完成了我想要它做的事情。希望这是一个如何使用 scapy 重放 TCP 流的好例子。

```
from scapy.all import *
import sys

#NOTE - This script assumes that there is only 1 TCP stream in the PCAP file and that 
# you wish to replay the role of the client

#acks
ACK = 0x10
#client closing the connection
RSTACK = 0x14

def replay(infile, inface):
    recvSeqNum = 0
    first = True
    targetIp = None
    #send will put the correct src ip and mac in
    #this assumes that the client portion of the stream is being replayed
    for p in rdpcap(infile):
        if 'IP' in p and 'TCP' in p:
            ip = p[IP]
            eth = p[Ether]
            tcp = p[TCP]
            if targetIp == None:
                #figure out the target ip we're interested in
                targetIp = ip.dst
                print(targetIp)
            elif ip.dst != targetIp:
                # don't replay a packet that isn't to our target ip
                continue
            # delete checksums so that they are recalculated
            del ip.chksum
            del tcp.chksum
            if tcp.flags == ACK or tcp.flags == RSTACK:
                tcp.ack = recvSeqNum+1
                if first or tcp.flags == RSTACK:
                    # don't expect a response from these
                    sendp(p, iface=inface)
                    first=False
                    continue

            rcv = srp1(p, iface=inface)
            recvSeqNum = rcv[TCP].seq

def printUsage(prog):
    print("%s <pcapPath> <interface>" % prog)

if __name__ == "__main__":
    if 3 != len(sys.argv):
        printUsage(sys.argv[0])
        exit(1)
    replay(sys.argv[1], sys.argv[2]) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-09-07T17:49:27.677

记录完整 TCP 客户端/服务器通信的数据包捕获。然后，您可以使用[tcpliveplay](http://tcpreplay.synfin.net/wiki/tcpliveplay)将通信的客户端重播到真实服务器。tcpliveplay 将生成新的序列号、IP 地址、MAC 地址等，因此通信将正常进行。

# xml - 如何在 Marklogic Server 中加载和查询 word/excel 文档？

> ID：10834616
> 
> 赞同：2
> 
> 时间：2012-05-31T13:28:04.603
> 
> 标签：xml, xquery, marklogic

我想将 MS Office word/excel 文档加载到 Marklogic 中，并希望使用 xquery 查询它们，就像使用 xml 文档一样。但是，当我将 doc 文件加载到 Marklogic 中时，它会将它们加载为二进制格式，并在使用查询控制台查看时显示垃圾字符。我尝试使用以下命令加载：-

```
xdmp:document-load("E:\doc\sample.doc", 
    <options xmlns="xdmp:document-load"
             xmlns:http="xdmp:http">
      <format>xml</format>
    </options>) 
```

但它显示一个错误，说明文档不是 UTF 8 编码的。我想知道 doc 和 xls 文件是否可以按原样加载到 Marklogic 中，或者在加载它们之前必须将它们转换为 xml 或 UTF 8 编码格式。如果是，那么转换它们的过程是什么。如果不是，那么我们如何使用 xquery 查询它们。我还想知道转换过程是否需要安装 MS Office 2007/2010，因为 Office 2007 和 2010 都支持 OOXML 格式。

请给我适当的指导。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T15:16:46.283

如果您正在处理 2007/2010 之前格式的 Office 文档，Grtjn 的回复是正确的。对于 2007/2010 文档，在 CPF 中启用“Office OpenXML ExtractOffice OpenXML Extract”管道并重新加载文档。此管道不需要额外的转换选项。它将按原样加载源 XML。

Office 2007/2010 文档只是包含相关 XML 部分的 .zip 文件。此管道将解压缩任何 .docx、.xlsx、.pptx 文档，并将其组成部分保存在以源文档命名的目录中。该目录将作为源文档的同级保存并链接到源，例如，如果您删除源 .docx，则包含提取部分的目录也将被删除。

确保数据库的自动目录创建设置为 true。（这是 MarkLogic 5.0 和之前版本的默认设置）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T13:53:59.607

它们是二进制的，所以它们应该作为二进制插入。但是您希望它们被转换。MarkLogic 可以自动为您做到这一点。为此，请执行以下操作：

*   打开管理界面
*   转到相应的数据库
*   打开内容处理页面
*   打开安装选项卡，将“启用转换”切换为“真”，然后点击安装
*   检查域的范围以确保您在该范围内插入，例如在以范围 uri 开头的数据库 uri 处插入文档。（这很可能意味着您需要向 xdmp:document-load 添加一个以 / 开头的 uri 选项）
*   检查管道以查看正在自动转换的内容类型以及格式（最常见的是 xhtml 或 docbook）
*   重新运行 xdmp:document-load

内容处理框架将创建包含转换结果的附加文件。这通常由带有文本的 xhtml、单独的图像文件（如果有）、带有布局属性的 css 等组成。

这确实需要带有转换选项的许可证。

！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:48:13.837

# OOXML

`.doc`并且`.xls`是 XQuery 处理器无法直接处理的二进制文件。

像您提到的那样使用[OOXML 。](http://en.wikipedia.org/wiki/Office_Open_XML)将文件另存为压缩的 XML 文件`.docx`（`.xlsx`在 zip 文件夹中包含更多资源，如图像）。也许[Marklogic zip 模块](http://community.marklogic.com/pubs/4.0/apidocs/package.html)可以帮助您提取文件。

# 使用 MS Office 2003

这也可以使用安装了[文件格式兼容包](http://www.microsoft.com/en-us/download/details.aspx?id=3)的 MS Office 2003 来完成。很抱歉，我无法帮助您进行批量转换，但肯定有一些方法可以使用 VBA 来做到这一点 - 如果需要，请提出另一个问题。

# html - 为什么 videojs HTML5 视频不能在 Firefox 中播放声音？

> ID：10834621
> 
> 赞同：2
> 
> 时间：2012-05-31T13:28:16.510
> 
> 标签：html, ogg, webm, video.js

我已将 .mp4 视频转换为 .ogg 和 .webm 格式（使用 ffmpeg）并使用 videojs 创建以下网页，可在所有浏览器（IE6-IE9、safari、chrome、opera、firefox）上播放视频：

[http://tanguay.info/examples/testvideo](http://tanguay.info/examples/testvideo)

但是，Firefox (12.0) 并不总是播放音频，这取决于页面的访问方式：

在 ogg 之前使用**webm**源从**file://**播放，Firefox 可以**正常**播放：

 ****```
<source src="videos/damconnect.mp4" type='video/mp4'>
<source src="videos/damconnect.webm" type='video/webm'>
<source src="videos/damconnect.ogg" type='video/ogg'> 
```

但是在 webm 之前使用**ogg源从****file://**播放，Firefox 播放**时没有音频**：

 ****并且首先使用**ogg**或**webm**从**http://**播放，Firefox 播放**时没有音频**。

 ********如何让 Firefox 通过 http:// 播放音频？**

* * *

## 附录：

另外：如果首先列出了**ogg ，** **Opera**将不会播放视频（只是旋转，不启动）。

 **我注意到我的 tanguay.info 服务器似乎正在发送带有 .webm 视频的文本/纯文本标题，我该如何更改？

![在此处输入图像描述](../Images/4bc8d66ef08a416a07b2b1be65e21fa9.png)

* * *

## 回答：

我将此 .htaccess 文件添加到 index.htm 所在的目录中，从而解决了问题：

```
AddType audio/ogg oga ogg
AddType video/ogg ogv
AddType video/webm webm 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:50:16.427

对于`text/plain`- 编辑您的`mime.types`文件 ( `~www/conf`) 并添加`webm/video webm`

您可能遇到同样的问题，请`ogg/ogv`添加 mime 类型`ogg/video ogg ogv`

还要确保音频编解码器在转换时是正确的。

**编辑**

[好的，我看到你将它添加到`httpd.conf`- 只是阅读这个](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/3/html/Reference_Guide/s1-apache-config.html)

> 10.5.31。TypesConfig TypesConfig 命名设置 MIME 类型映射的默认列表（内容类型的文件扩展名）的文件。默认的 TypesConfig 文件是 /etc/mime.types。添加 MIME 类型映射的推荐方法是使用 AddType 指令，而不是编辑 /etc/mime.types。
> 
> 有关 AddType 的更多信息，请参阅[第 10.5.54 节 AddType。](http://docs.redhat.com/docs/en-US/Red_Hat_Enterprise_Linux/3/html/Reference_Guide/s1-apache-config.html#S2-APACHE-ADDTYPE)

虽然我可以找到任何论据来解释为什么......****************

# html - 需要帮助解决一些验证错误

> ID：10834622
> 
> 赞同：0
> 
> 时间：2012-05-31T13:28:30.013
> 
> 标签：html, css, validation

嘿，我正在通过 W3C 验证器运行我的索引页面，并且遇到 6 个错误，需要一些帮助。错误是： -

```
Line 57, Column5: error parsing attribute name
Line 57, Column 5: attributes construct error
Line 57, Column 5: Couldn't find end of Start Tag div line 56
Line 67, Column 14: Opening and ending tag mismatch: body line 14 and div 
Line 69, Column 11: Opening and ending tag mismatch: html line 4 and body 
Line 70: Extra content at the end of the document 
```

这是我的代码：-

```
<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

<head>

    <link rel="stylesheet" type="text/css" href="CSS/10000658.css" title="default" />
    <link rel="alternate stylesheet" type="text/css" href="CSS/default.css" title="assignment2" />

    <title>The Garden Co. | Home </title>
</head>

<body>
    <div id="wrapper">
        <div id="header">
           <h1>The Garden Co.</h1>
        </div>

             <div id="menu">

                    <h1>Contents</h1>

                    <ul>
                <li><a href="index.html">Home</a></li>
                        <li>
                            <a href="plants_section/index.html">Catalogue</a>
                            <ul>
                                <li><a href="plants_section/plant1.html">Plant 1</a></li>
                                <li><a href="plants_section/plant2.html">Plant 2</a></li>
                                <li><a href="plants_section/plant3.html">Plant 3</a></li>
                            </ul>
                        </li>

                        <li>
                            <a class="section" href="plants_section/index3.html">Report</a>

                        </li>

            <li>
                            <a class="section" href="plants_section/index4.html">Report(2)</a>

                        </li>

                        <li><a class="section" href="plants_section/form.html">Contact</a></li>

                    </ul>

                </div><!-- end menu -->

              <div id="content">
                 <div id="contentWrapper">
                    <h1>Welcome</h1>

                    <div class="text"
                    ***<p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sed eros quis leo sollicitudin tempus.  </p>***

                </div>
            ***</div><!-- end contentWrapper -->***
             </div><!-- end content -->

           <div id="footer">
              <p>&copy; My name, 2012.</p>
           </div>

        </div><!-- end wrapper  -->

***</body>***
***</html>*** 
```

如果有人可以帮助解决这些错误，将不胜感激。编辑：粗线是发现错误的地方

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:31:47.053

您没有`<div>`在第 57 行关闭标签：

```
<div class="text" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:32:09.680

我可以看到您的 DIV 标签未在第 57 行关闭：

应该： `<div class="text">`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:32:15.337

看起来这是大多数问题的原因：

```
<div class="text"
                    <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sed eros quis leo sollicitudin tempus.  </p> 
```

应该是：

```
<div class="text">
    <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sed eros quis leo sollicitudin tempus.  </p>
</div><!--this is already there, just the tabbing is off so it looked like it was missing--> 
```

修复它，然后重新运行它。让我们知道还剩下什么错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T13:32:20.103

从在这里修复您的标签开始：

```
<div class="text"
  <p> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sed eros quis leo sollicitudin tempus.  </p> 
```

需要关闭标签，所以它应该是：（缺少“>”）

```
<div class="text"> 
```

然后重新运行它并让我们知道结果。

# .net - 从实体框架中的模型更新数据库

> ID：10834624
> 
> 赞同：2
> 
> 时间：2012-05-31T13:28:36.020
> 
> 标签：.net, sql-server-2008, entity-framework-4

我创建了一个数据模型，从中生成了一个数据库，如果我必须对模型进行任何更改，如何更新生成的数据库？重新生成过程对我来说没用，因为数据库已经包含数据。我正在使用 Visual Studio 2010、EF 4.0、SQL 2008。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:33:08.273

基本上，您可以手动更改模型和数据库（使用 SQL Managemets Studio 手动创建/更改列和表），只需删除 EdmMetadata 表中的哈希值，EF 将不再跟踪您的数据库是否与模型同步。这是一个快速而肮脏的解决方案，您需要注意手动保持模型与 db 同步。

或者，您可以更新到 EF 4.3 并利用迁移功能。有详细的演练可用：http: [//blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-code-based-migrations-walkthrough.aspx)和[http://blogs .msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)

# ms-word - word 2003 如何重绘窗口？

> ID：10834626
> 
> 赞同：1
> 
> 时间：2012-05-31T13:28:41.640
> 
> 标签：ms-word, ms-office, office-2003, word-2003

抱歉，我知道这应该是一个基本问题，但我似乎找不到答案。

如何在 c# 中重绘 office word 2003 窗口？现在我有窗口最小化和最大化。

谢谢。

# html - 使 Html 元素垂直适合

> ID：10834630
> 
> 赞同：1
> 
> 时间：2012-05-31T13:28:58.163
> 
> 标签：html, css

如何使 Html 元素适合垂直空间？
这就是我想要实现的目标：[DEMO](http://jsfiddle.net/98YRH/)但**没有指定元素 heights**。

PS：我知道如何用 JavaScript 做到这一点，正在寻找 HTML/CSS 解决方案。

谢谢

**回答后编辑：**

我想保持这个效果工作（已经工作）但没有 JavaScript，因为已经消耗了大量的处理器。[效果：标题栏和窗口内容适合我的演示网站](http://ilyeskooli.com/jqdesktop/)
中每个窗口的总窗口空间。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:59:02.827

我发现这行得通。但是您应该更改顶部和底部的百分比以适合您的站点。[http://jsfiddle.net/98YRH/11/](http://jsfiddle.net/98YRH/11/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T14:53:39.910

您正在使用**ba-resize** jQuery 插件，您可以通过增加插件的**延迟**选项来使代码更轻，（默认为 250）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-31T13:36:35.080

我假设通过适合垂直空间您的意思是拉伸浏览器的底部，如果您需要在 css 中编写，

```
html {
    height:100%
} 
```

# asp.net - 仅在调试模式下部署到 Azure 时如何关闭自定义错误

> ID：10834631
> 
> 赞同：12
> 
> 时间：2012-05-31T13:29:03.577
> 
> 标签：asp.net, azure

我正在一个网站上工作，我们使用 Web.Debug.config 和转换 XSLT 来关闭自定义错误

```
<customErrors mode="Off" xdt:Transform="Replace"/>` 
```

但是，在部署到 azure 时似乎没有考虑到这一点。

从

[每个环境的 Azure web.config](https://stackoverflow.com/questions/4734776/azure-web-config-per-environment)

我可以看到 azure 使用 .cscfg 文件，而我要完成的工作可能会涉及这些文件？部署到天蓝色但仅在调试时关闭自定义错误的最简单方法是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-04-20T17:39:11.783

在 Visual Studio 2015 中，对于“应用服务”，打开服务器资源管理器并导航到 Azure -> 应用服务 -> {资源组名称} -> {应用服务名称} -> 文件 -> Web.config。

此时，您可以直接编辑 Web.Config 文件并保存 - 无需发布。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-31T13:34:19.697

> 但是，在部署到 azure 时似乎没有考虑到这一点

可能是因为您的普通 web.config 不包含元素（我今天遇到了同样的问题）。当然，只有在确实要应用某些东西时，才能应用您对“替换”的转换。

> 部署到天蓝色但仅在调试时关闭自定义错误的最简单方法是什么？

有一个调试 web.config 和一个发布 web.config（您可以扩展 web.config）。在发布一中应用生产转换，在调试一中应用调试转换。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-31T20:10:01.073

事实上，您将添加到 web.release.config 或 web.debug.config 中的任何内容都不会包含在最终的 web.config 中，最终的 web.config 将成为部署到 Windows Azure 的应用程序包 (CSPKG) 的一部分。如果您希望将某些 web.config 设置作为 Windows Azure 应用程序的一部分，则必须在 web.config 中显式定义。

要关闭自定义错误，您可以在 web.config 中显式添加以下内容：

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  ......
  <system.web>
   <customErrors mode="Off" xdt:Transform="Replace"/>
  </system.web>
 .....
</configuration> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-01T11:39:26.007

您需要在**web.config中有这一行**

```
<customErrors mode="Off"/> 
```

而在**web.config.release**

```
<system.web>
     <customErrors mode="Off" xdt:Transform="Replace"/> 
    <compilation xdt:Transform="RemoveAttributes(debug)" />    
  </system.web> 
```

当使用一键发布时，它会从 web.config.release 替换为 web.config 所以，如果 web.config 没有 customErrors 标签，它会忽略

# android - DynamicRegistration.scale 缩放限制？

> ID：10834632
> 
> 赞同：3
> 
> 时间：2012-05-31T13:29:05.667
> 
> 标签：android, actionscript-3, apache-flex, flex4.5, pinchzoom

我已经检查了一些以前的问题，例如[this](https://stackoverflow.com/questions/3813119/scale-limits-on-pinch-zoom-of-android)和[another](https://stackoverflow.com/questions/3881187/imageview-pinch-zoom-scale-limits-and-pan-bounds)，但没有一个解决我遇到的问题。我有一个缩放功能：

```
protected function onZoom(e:TransformGestureEvent, img:Image):void
            {
                DynamicRegistration.scale(img, new Point(e.localX, e.localY), img.scaleX*e.scaleX, img.scaleY*e.scaleX);
            } 
```

并且缩放有效（而且很好！），但我想将缩放限制为 2.5x 和 .8x。所以我的第一个想法是尝试这个：

```
protected function onZoom(e:TransformGestureEvent, img:Image):void
            {
                while(img.scaleX <= 2.5 && img.scaleX >= .8)
                    DynamicRegistration.scale(img, new Point(e.localX, e.localY), img.scaleX*e.scaleX, img.scaleY*e.scaleX);
            } 
```

但这放大到了最大极限，没有任何像捏合缩放这样的交互，我假设比例刚刚超过 2.5 倍，并且它不会响应缩放。

我的下一次尝试是：

```
protected function onZoom(e:TransformGestureEvent, img:Image):void
            {
                while(img.scaleX <= 2.5 && img.scaleX >= .8)
                {
                    DynamicRegistration.scale(img, new Point(e.localX, e.localY), img.scaleX*e.scaleX, img.scaleY*e.scaleX);
                    if(img.scaleX > 2.5)
                    {
                        img.scaleX = 2.5;
                        img.scaleY = 2.5;
                    }
                    else if(img.scaleX < .8)
                    {
                        img.scaleX = .8;
                        img.scaleY = .8;
                    }
                }
            } 
```

如果超出限制，则尝试将大小重置为限制范围内，但这只是不成功，但图像什么也不做，并且应用程序锁定并导致强制关闭。

有谁知道如何做到这一点？我喜欢这种缩放方法，因为它很简单，但是可以在实例化缩放边界时使用它吗？

# c++ - 在 C++ 中测试枚举值的另一种方法

> ID：10834633
> 
> 赞同：3
> 
> 时间：2012-05-31T13:29:11.297
> 
> 标签：c++

在 C 中，我可以使用 if/else 语句测试枚举的值。例如：

```
enum Sport {Soccer, Basket};

Sport theSport = Basket;

if(theSport == Soccer)
{
   // Do something knowing that it is Soccer
}
else if(theSport == Basket)
{
   // Do something knowing that it is Basket
} 
```

有没有另一种方法可以用 C++ 完成这项工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T13:30:01.390

是的，您可以使用虚函数作为接口的一部分，而不是使用 if-else 语句。

我给你举个例子：

```
class Sport
{
public:
    virtual void ParseSport() = 0;
};

class Soccer : public Sport
{
public: 
    void ParseSport();
}

class Basket : public Sport
{
public:
    void ParseSport();
} 
```

并以这种方式使用您的对象后：

```
int main ()
{
    Sport *sport_ptr = new Basket();

    // This will invoke the Basket method (based on the object type..)
    sport_ptr->ParseSport();
} 
```

这要归功于 C++ 添加了面向对象的特性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T13:35:43.207

你可以

1 在编译时使用模板魔法对不同的和不相关的类型执行不同的动作；

2 在运行时使用继承和多态对继承相关的类型执行不同的操作（如 gliderkite 和 rolandXu 的答案）；

3 对（或其他整数类型）使用 C 风格的`switch`语句。`enum`

编辑：（非常简单）使用模板的示例：

```
/// class template to be specialised
template<typename> struct __Action;
template<> struct __Action<Soccer> { /// specialisation for Soccer
  static void operator()(const Soccer*);
};
template<> struct __Action<Badminton> { /// specialisation for Badminton
  static void operator()(const Badminton*);
};

/// function template calling class template static member
template<typename Sport> void Action(const Sport*sport)
{
   __Action()(sport);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T13:36:36.760

您仍在测试 C 中的值，即枚举值，而不是 theSport 的类型。C++ 支持运行时类型检查，称为[RTTI](http://en.wikibooks.org/wiki/C++_Programming/RTTI)

# php - wordpress 插件 - dompdf - 标头已发送错误？

> ID：10834634
> 
> 赞同：0
> 
> 时间：2012-05-31T13:29:28.117
> 
> 标签：php, wordpress

这是 dompdf 的链接，[http://code.google.com/p/dompdf/](http://code.google.com/p/dompdf/)

它用于将 html 转换为 pdf 。

当我尝试正常使用它（不使用插件）时，我没有收到错误，它工作正常。当我尝试在 wordpress 插件中使用它时，我收到标头已发送的错误，解决方案是什么？如果你想试验，试试这个代码

```
<?php
require_once("dompdf_config.inc.php");

$html =
'<html><body>'.
'<p>Put your html here, or generate it with your favourite '.
'templating system.</p>'.
'</body></html>';

$dompdf = new DOMPDF();
$dompdf->load_html($html);
$dompdf->render();
$dompdf->stream("sample.pdf");

?> 
```

# java - 向服务器发送 POST 请求

> ID：10834635
> 
> 赞同：0
> 
> 时间：2012-05-31T13:29:29.020
> 
> 标签：java, web-services, jakarta-ee, tomcat, post

我需要`POST`使用 java 发送请求。我试图访问的服务器有一个用户名和密码，我也需要传递这些参数。

1.) 我已经在我的机器上安装了 Tomcat 并配置了开发环境。我正在使用日食。我可以使用 Eclipse 创建不同类型的项目，我需要知道应该为开发我的应用程序创建的最佳项目是什么？

2.) 有人可以给我看一些示例代码或教程来帮助我开发我的任务吗？

我的 Eclipse 版本：Eclipse Java EE、Indigo 服务版本 2

**编辑**

它是 JPA 项目、企业应用程序项目、动态 Web 项目、动态 Web 应用程序、EJB 项目、应用程序客户端项目、静态 Web 项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:32:12.723

如果您想创建一个网站，请使用“动态网络项目”

对于您的问题，这可能有用： [Java - 通过 POST 方法轻松发送 HTTP 参数](https://stackoverflow.com/questions/4205980/java-sending-http-parameters-via-post-method-easily)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:32:46.967

您应该创建 Web 项目。 ![在此处输入图像描述](../Images/9e96b863e2a1d6fd068c3f70ad82e07f.png)

[http://besthowtodo.com/blog/2010/05/how-to-create-dynamic-web-project-in-eclipse.html](http://besthowtodo.com/blog/2010/05/how-to-create-dynamic-web-project-in-eclipse.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:48:32.220

动态 Web 项目应该是执行此操作必须选择的选项。在 Eclipse 中，您可以按照以下链接中提到的步骤执行此操作

[http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.wst.webtools.doc.user%2Ftopics%2Ftwcreprj.html](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.wst.webtools.doc.user/topics/twcreprj.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T14:46:34.367

请查看此链接..希望对您有所帮助..

请阅读第 20 点的链接。一旦您知道如何编写 Web 服务，我们可以安排 Shivang 的培训课程，介绍如何将 Web 服务与 Appian 集成。

[http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T13:43:45.940

来自 Core Servlets的 PDF教程来自[Core Servlets](http://courses.coreservlets.com/Course-Materials/pdf/csajsp2/03-Form-Data.pdf)的 另一个[教程](http://courses.coreservlets.com/Course-Materials/csajsp2.html)

# knockout.js - 自定义绑定处理程序，从字符串模板呈现绑定

> ID：10834641
> 
> 赞同：4
> 
> 时间：2012-05-31T13:29:54.473
> 
> 标签：knockout.js, ko-custom-binding

我使用应该是可选的行模板进行自定义绑定。如果用户没有提供模板 id，我想使用默认的，但它不驻留在正文中的脚本标记中，它只是选项文字上的一个字符串。

如何使用字符串作为模板？

默认模板应该很简单，就像这样

```
<span data-bind="text: name"></span> 
```

我已经尝试过 ko.renderTemplate 但它只需要 id 来编写标签

```
ko.renderTemplate(template, bindingContext.createChildContext(data), null, row, "replaceChildren"); 
```

**更新** 刚收到关于这个问题的通知，看到有人建议将模板注入 dom 并使用标准脚本标签提供程序。但这并没有考虑到用户可以覆盖默认模板源（单板应用程序的常见场景。我使用这种方式，首先尝试默认模板提供程序，然后像这样回退到字符串模板源

```
var engines: {}
var renderTemplate = function (element, template, data, bindingContext) {
    var engine = engines[template];

    var success = false;
    do {
        try {
            ko.renderTemplate(template, bindingContext.createChildContext(data), engine, element, "replaceChildren");
            success = true;
            engines[template] = engine;
        } catch(err) {
            if (engine != null)
                throw "Template engine not found";

            engine = { templateEngine: stringTemplateEngine };
        }

    } while (!success)
}; 
```

完整代码和 stringTemplateEngine 代码可以在这里找到 [https://github.com/AndersMalmgren/Knockout.Combobox/blob/master/src/knockout.combobox.js#L297](https://github.com/AndersMalmgren/Knockout.Combobox/blob/master/src/knockout.combobox.js#L297)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T22:21:34.223

要从字符串呈现模板，您需要按照[此处所述编写自定义模板源。](http://www.knockmeout.net/2011/10/ko-13-preview-part-3-template-sources.html)

希望这可以帮助。

# unity3d - Space Invaders (Unity) 中的 Y 运动

> ID：10834643
> 
> 赞同：2
> 
> 时间：2012-05-31T13:29:57.447
> 
> 标签：unity3d, unityscript

我正在制作一个 Space Invaders 克隆。敌人从屏幕左侧开始，向右然后向下，但我想知道如何停止和向左移动，就像最初的电子游戏一样。谢谢！

```
 #pragma strict

// ESTADOS DEL ESCUADRON

enum TIPOS_MOVIMIENTO{
    ABAJO = 0,
    IZQ = 1,
    DER = 2,
    PARADO = 3
}

var estado : TIPOS_MOVIMIENTO;
private var cacheTransform : Transform;
var limitelateral : int;
var velocidad : float ;
private var vectorMov : Vector3;

function Start () {
    cacheTransform = transform;

}

function Update () {
    ComprobarEstado();
}

function ComprobarEstado(){
    switch(estado){
        case TIPOS_MOVIMIENTO.ABAJO:
            // TODO: mueve abajo el escuadron
            if(cacheTransform.position.x <= limitelateral) {
            vectorMov = Vector3.down * velocidad;
            cacheTransform.Translate(vectorMov * Time.deltaTime);
            } else {
                estado = TIPOS_MOVIMIENTO.IZQ;

            }
        break;
        case TIPOS_MOVIMIENTO.DER:
            // TODO: mueve der el escuadron
            // Si el escuadron esta menor que el limite, mueve derecha
            if(cacheTransform.position.x < limitelateral){
                vectorMov = Vector3.right * velocidad;
                cacheTransform.Translate(vectorMov * Time.deltaTime);
            } else {
                estado = TIPOS_MOVIMIENTO.ABAJO;

            }
        break;
        case TIPOS_MOVIMIENTO.IZQ:
            // TODO: mueve izq el escuadron
            if(cacheTransform.position.x > limitelateral)
            {
                vectorMov = Vector3.left * velocidad;
                cacheTransform.Translate(vectorMov * Time.deltaTime);
            } else {
                estado = TIPOS_MOVIMIENTO.ABAJO;

            }
        break;
        case TIPOS_MOVIMIENTO.PARADO:
            // TODO: detiene el escuadron
            if(cacheTransform.position.y < limitelateral){
                vectorMov = Vector3.down * 0;
                cacheTransform.Translate(vectorMov * Time.deltaTime);
            }
        break;
    }

} 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:54:03.727

将问题分成两部分：创建一个可以绘制所有（幸存的）敌人相对于某个偏移量的方法，并创建一个迭代器来为您提供所有偏移量。

这是迭代器的一些伪代码：

```
init() {
   x = 0
   y = 0

   width = 5
   maxHeight = 5
}

next() {
    x ++
    if( x >= width ) {
        y ++
        x = 0
    }
    return y < maxHeight
}

getX() {
    return ( y & 1 ) ? width - x : x
} 
```

调用`next()`直到它返回 false 并`getX()`获取当前 y 偏移的正确 X 位置

# javascript - 更改下拉菜单时重置单选按钮

> ID：10834646
> 
> 赞同：0
> 
> 时间：2012-05-31T13:30:16.493
> 
> 标签：javascript, forms

我有一个包含下拉菜单（您可以在其中选择要在图表中绘制的参数）和两个单选按钮（用于决定图表是否自动缩放的表单。如果没有，有一个文本框可以在其中定义规模）。当我更改下拉列表中的参数时，图表会自动使用新参数重绘。

但是我希望重置单选按钮，所以如果我选择手动缩放，并且我更改了我的参数，它会变回自动缩放。这可能吗？这是我的表单代码的一部分：

```
<select id="Graf1" onchange="makeChoice5();updateSelect(this,'Graf2');this.form.submit();" name="graf1">
    <option value="other">---------- Kies ---------- </option>
    <option value="1">Temperatuur</option>
    <option value="2">Relatieve vochtigheid</option>
    <option value="3">Straling</option>
    <option value="4">Dendrometer 1</option>
    <option value="5">Dendrometer 2</option>
    </select>
    </br>
    <input type="radio" name="schaal" value="1" checked="checked" onclick="makeChoice();">Automatische schaal </br>
    <input type="radio" name="schaal" value="other" onclick="makeChoice();">Handmatig
    <input type="text" name="schaalmin" size="6" value="---Min---" onclick="clickclear(this, '---Min---')" onkeydown="return ( event.ctrlKey || event.altKey 
        || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false) 
        || (95<event.keyCode && event.keyCode<106) || (event.keyCode==8) 
        || (event.keyCode==9) || (event.keyCode>34 && event.keyCode<40) 
        || (event.keyCode==46)
        || (event.keyCode==110) )">
    <input type="text" name="schaalmax" size="6" value="---Max---" onclick="clickclear(this, '---Max---')"  onkeydown="return ( event.ctrlKey || event.altKey
        || (47<event.keyCode && event.keyCode<58 && event.shiftKey==false) 
        || (95<event.keyCode && event.keyCode<106) || (event.keyCode==8) 
        || (event.keyCode==9) || (event.keyCode>34 && event.keyCode<40) 
        || (event.keyCode==46)
        || (event.keyCode==110) )"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:36:00.280

同名的单选按钮是一个数组，因此您必须遍历每个按钮并清除它们（除非您使用 jQuery 很容易确定选择了哪个并直接清除它）。

清除它们会像这样工作：

```
var r = document.forms[0].schaal
for(var x=0;x<r.length;x++) {
      document.forms[0].schaal[x].checked = false
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:50:30.837

我找到了解决方案，我只是使用了这个简单的小功能，在更改下拉菜单时调用它。这样，当我更改参数时，会选择右侧的单选按钮（而不是尝试取消选择其他单选按钮）：

```
function clearRadios() {
    document.form1.schaal[0].checked = true;
} 
```

# python - 在现有 Cairo 图像表面/上下文上覆盖 matplotlib 命令

> ID：10834648
> 
> 赞同：1
> 
> 时间：2012-05-31T13:30:23.327
> 
> 标签：python, matplotlib, overlay, diagram, cairo

我有一个从 SVG 文件创建并使用[cairosvg](https://github.com/Kozea/CairoSVG)库加载的图表。

我想通过直接 matplotlib 命令以编程方式定义的附加叠加图进一步增强此图。

我正在尝试在内存中执行此操作，而*不是*写出文件并重新加载。仅保存最终文件。

然而，事实证明很难*将*现有的 cairo 与 matplotlib 呈现的结合起来。我认为[这是一个潜在的解决方案](http://sixdegrees.hu/blog/2010/07/plotting-igraph-graphs-in-matplotlib/)，但不确定。

简化示例：

```
import matplotlib
matplotlib.use('Cairo') # Make sure here that our figures will use Cairo!
from cairosvg import surface
from cairosvg import parser
import matplotlib.pyplot as plt
import matplotlib.image as img 
import numpy as np

SVG='\
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="500" height="500">\
<rect id="arena" x="10" y="10" width="480" height="480" fill="#ff5555" fill-opacity="0.5"/>\
</svg>\
'

svg = parser.Tree(bytestring=SVG)

surf = surface.PNGSurface(svg,None,1)
#surf.cairo.write_to_png("test-svg.png") # Can do this to see svg render to file
surf.finish() # Required?
ctx = surf.context # Can get the context here fine..

fig = plt.imshow(ctx) # <----- MAGIC REQUIRED HERE ABOUTS
#fig = plt.figure() # This works like a normal plot - but no svg

ax = fig.gca() # Create some overlay data
x = np.array(np.random.randn(100))
y = np.array(np.random.randn(100))
ax.plot(x,y)

plt.savefig("test-final.png") # Save svg & overlay plot 
```

**编辑：**也一直在尝试以下，基于前面的链接。不过还是不开心。

```
from matplotlib.artist import Artist

class SurfArtist(Artist):
  def __init__(self,surf):
    Artist.__init__(self)
    self._surf = surf

  def draw(self,renderer):
    from matplotlib.backends.backend_cairo import RendererCairo
    if not isinstance(renderer, RendererCairo):
      raise TypeError("backend not supported")
    ctx = renderer.gc.ctx if hasattr(renderer, "gc") else renderer.ctx
    self._surf.context = ctx
    self._surf.cairo.show_page()

...

fig = plt.figure()
ax = fig.gca()
surf_artist = SurfArtist(surf)
surf_artist.set_zorder(float('inf'))
ax.artists.append(surf_artist) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-03T07:48:15.323

下面的代码应该可以工作，首先将表面转换为 numpy 数组，如[https://github.com/Kozea/CairoSVG/issues/57](https://github.com/Kozea/CairoSVG/issues/57)

```
 matplotlib.use('Cairo') # Make sure here that our figures will use Cairo!
from cairosvg import surface
from cairosvg import parser
import matplotlib.pyplot as plt
import matplotlib.image as img 
import numpy as np

# function to convert to array
def surface_to_npim(surface):
    """ Transforms a Cairo surface into a numpy array. """
    im = +np.frombuffer(surface.get_data(), np.uint8)
    H,W = surface.get_height(), surface.get_width()
    im.shape = (H,W, 4) # for RGBA
    return im[:,:,:3]

SVG='\
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="500" height="500">\
<rect id="arena" x="10" y="10" width="480" height="480" fill="#ff5555" fill-opacity="0.5"/>\
</svg>\
'

svg = parser.Tree(bytestring=SVG)

surf = surface.PNGSurface(svg,None,1)
#surf.cairo.write_to_png("test-svg.png") # Can do this to see svg render to file
surf.finish() # Required?

# convert svg and plot
img = surface_to_npim(surf.cairo)
plt.imshow(img)

# Create some overlay data
x = np.array(np.random.randn(100))
y = np.array(np.random.randn(100))
plt.plot(x,y)

plt.savefig("test-final.png") # Save svg & overlay plot 
```

# ipython - 无法连接到远程 ipcluster - TimeoutError

> ID：10834650
> 
> 赞同：6
> 
> 时间：2012-05-31T13:30:25.103
> 
> 标签：ipython

我在远程 linux 服务器上运行 ipcluster，并从 MS Windows PC 远程连接。从外部看不到服务器，因此我需要使用 ssh 隧道通过我在 json 文件中定义的其他机器进行连接。但是，需要多次尝试（和内核重新启动）才能成功连接，通常我得到 TimeoutError

```
rc=Client("ipcontroller_client.json", sshkey="key.txt")

C:\Local\Python27\lib\site-packages\IPython\parallel\client\client.py in __init__(self, url_or_file, profile, profile_dir, ipython_dir, context, debug, exec_key, sshserver, sshkey, password, paramiko, timeout, **extra_args)
    384         self._queue_handlers = {'execute_reply' : self._handle_execute_reply,
    385                                 'apply_reply' : self._handle_apply_reply}
--> 386         self._connect(sshserver, ssh_kwargs, timeout)
    387 
    388     def __del__(self):

C:\Local\Python27\lib\site-packages\IPython\parallel\client\client.py in _connect(self, sshserver, ssh_kwargs, timeout)
    488         evts = poller.poll(timeout*1000)
    489         if not evts:
--> 490             raise error.TimeoutError("Hub connection request timed out")
    491         idents,msg = self.session.recv(self._query_socket,mode=0)
    492         if self.debug:

TimeoutError: Hub connection request timed out 
```

此外，一旦连接，在一段时间不活动（约 15 分钟）后，连接似乎会中断，如果我发出一些需要与集群通信的命令（例如，rc.queue_status()），整个 ipython 会话就会变得无响应。

我在服务器日志中没有发现任何有用的东西，我总是可以看到建立和关闭的初始连接，并且在成功的情况下，在创建各种 ssh 隧道（？）时打开其他连接。

在 linux ssh 服务器上是否需要调整一些特定的设置（sshd_config）？如何保持连接活动（或重新连接）？谢谢你。

# django - 带有遗留数据库的 Django 抽象类

> ID：10834652
> 
> 赞同：1
> 
> 时间：2012-05-31T13:30:27.510
> 
> 标签：django, django-models

假设我在一个遗留但仍处于活动状态的数据库中有三个表（duck、Goose 和 Rooster）。有一个第 3 方应用程序拥有此架构并定期添加/更新/删除条目，我具有只读访问权限。Duck、Goose 和 Rooster 中的 PK 保证是唯一的，即使在桌子之间也是如此。

我想要一个超级类（Bird），我可以将它用作这三个表中任何一个的 ForeignKey。

这是我卡住的地方：

*   我无法创建 Duck、Goose 和 Rooster 继承的抽象类，因为 django 不支持 ForeignKeys 到抽象类
*   我无法创建一个完全填充的 Bird 模型，除非我想在每次发生变化时从子类中复制相关数据（无数的时间问题）
*   我无法将 Duck、Goose 和 Rooster 表更改为单个表，因为它是其他应用程序的活动模式

在这一点上，我最好的解决方案是使用 Bird 抽象类，但忽略 Django API。而不是使用 ForeignKey 来鸟，我只包括唯一的 PK。每当我需要实际对象时，我会使用一些辅助函数，例如检查所有三个子类的“getBirdByPK()”。

这是非常不符合 Python 的，我不喜欢辅助函数需要了解每个子类。

有更好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:00:46.920

我不太了解您的用例，但听起来[通用关系](https://docs.djangoproject.com/en/1.4/ref/contrib/contenttypes/#generic-relations)可能会对您有所帮助。

# php - MySQL按两个值排序

> ID：10834658
> 
> 赞同：5
> 
> 时间：2012-05-31T13:30:39.870
> 
> 标签：php, mysql, sql-order-by

简而言之，我有一个游戏，它的计分板显示了玩家最后的得分 + 他们花了多长时间完成它。我需要对我的 MySQL 结果进行排序，以便最快时间的最高分排在第一位，时间最慢的最低分排在最后，并且两者之间的所有内容都以相同的方式排名。但我不知道该怎么做，这是我的sql：

```
$sql1 = "SELECT * FROM boobmatch_highscores ORDER BY t_score DESC, time ASC"; 
```

任何帮助将不胜感激！

表中数据：

```
Score       Time
23        00:04:32
23        00:04:31
25        00:02:32
16        00:06:32
35        00:04:32
2         00:01:17
-13       00:19:32
-3        00:07:27 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T13:37:25.817

您的查询应该可以完美运行。如果您有任何问题，只需将字段名称括在引号中，如下所示：

```
$sql1 = "SELECT * FROM boobmatch_highscores ORDER BY `t_score` DESC, `time` ASC"; 
```

猜测它是 MySQL，否则引号将不是必需的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-17T08:33:52.677

你应该使用下面的代码..它的工作。

```
$query = "SELECT field1, field2 from tablename ORDER BY field1 DESC, field2 DESC"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-19T08:44:10.070

我认为这是按多值排列顺序的最佳解决方案。

```
 SELECT * FROM hotel   
   WHERE confId=13   
   GROUP BY hotelName   
   ORDER BY CASE
   WHEN rating = '5 Star' THEN 1 WHEN rating = '4 Star' THEN 2   
   WHEN rating = '3 Star' THEN 3 WHEN rating = 'BUDGET & EQUIVALENT HOTELS' THEN 4 
 END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-04T05:23:45.433

您必须使用此查询：

```
select * from boobmatch_highscores order by time ASC, t_score DESC 
```

现在时间按升序显示，分数按降序显示。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T13:42:49.387

您应该使用整数列`time`而不是 varchar，
这意味着转换`00:19:32`为仅 1172 秒，
然后很容易进行排序

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-05-31T13:32:20.333

试试看嘛

```
$sql1 = "SELECT * FROM boobmatch_highscores ORDER BY t_score * time DESC"; 
```

# mocha.js - 为什么 should.js 中的“should.strictEqual”不起作用？

> ID：10834662
> 
> 赞同：2
> 
> 时间：2012-05-31T13:31:07.057
> 
> 标签：mocha.js, should.js

根据[should.js Spec](https://github.com/visionmedia/should.js#equal)这应该有效：

```
should.strictEqual(shape.code, code) 
```

但我得到：

```
TypeError: Object #<Object> has no method 'strictEqual' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:38:00.557

看起来像文档中的错误。[在脚本](https://github.com/visionmedia/should.js/blob/master/lib/should.js)`equal`中定义为“严格相等”：

```
/**
 * Assert strict equal.
 *
 * @param {Mixed} val
 * @param {String} description
 * @api public
 */

equal: function(val, desc){
  this.assert(
      val.valueOf() === this.obj
    , 'expected ' + this.inspect + ' to equal ' + i(val) + (desc ? " | " + desc : "")
    , 'expected ' + this.inspect + ' to not equal ' + i(val) + (desc ? " | " + desc : "")
    , val);
  return this;
}, 
```

...并且`strictEqual`没有出现在脚本中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-21T22:20:29.960

Should.js 提供**.equal** () 来检查身份 (===)，并**提供 .eql** () 来检查相等 (==)。

参考： [https ://github.com/visionmedia/should.js/blob/9feffef939197002ce16708c27036f7f744e8131/lib/should.js#L277-L309](https://github.com/visionmedia/should.js/blob/9feffef939197002ce16708c27036f7f744e8131/lib/should.js#L277-L309)

# c# - 构建前和构建后事件参数

> ID：10834663
> 
> 赞同：9
> 
> 时间：2012-05-31T13:31:10.317
> 
> 标签：c#, visual-studio, build, post-build-event, pre-build-event

在 Visual Studio 中，有人可以指出可用的构建前和构建后事件参数列表吗？
例如。`$(TargetDir)`， ETC。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-02-09T15:23:15.087

此[链接](https://msdn.microsoft.com/en-us/library/42x5kfw4(v=vs.80).aspx)提供完整和更新的列表。但是，如果它中断，则此[答案](https://stackoverflow.com/a/10834699/1476885)将丢失。

目前，对于 VS 2015，我们有：

**$(ConfigurationName)**
当前项目配置的名称，例如“Debug|Any CPU”。

**$(OutDir)**
输出文件目录的路径，相对于项目目录。这将解析为输出目录属性的值。它包括尾部反斜杠“\”。

**$(DevEnvDir)**
Visual Studio 2005的安装目录（定义驱动器和路径）；包括尾随反斜杠“\”。

**$(PlatformName)**
当前目标平台的名称。例如，“AnyCPU”。

**$(ProjectDir)**
项目的目录（用驱动器和路径定义）；包括尾随反斜杠“\”。

**$(ProjectPath)**
项目的绝对路径名（使用驱动器、路径、基本名称和文件扩展名定义）。

**$(ProjectName) 项目**
的基本名称。

**$(ProjectFileName)**
项目的文件名（使用基本名称和文件扩展名定义）。

**$(ProjectExt)**
项目的文件扩展名。它包括“。” 在文件扩展名之前。

**$(SolutionDir) 解决方案**
的目录（由驱动器和路径定义）；包括尾随反斜杠“\”。

**$(SolutionPath) 解决方案**
的绝对路径名（使用驱动器、路径、基本名称和文件扩展名定义）。

**$(SolutionName) 解决方案**
的基本名称。

**$(SolutionFileName) 解决方案**
的文件名（使用基本名称和文件扩展名定义）。

**$(SolutionExt) 解决方案**
的文件扩展名。它包括“。” 在文件扩展名之前。

**$(TargetDir)**
构建的主要输出文件的目录（使用驱动器和路径定义）。它包括尾部反斜杠“\”。

**$(TargetPath)**
构建的主输出文件的绝对路径名（使用驱动器、路径、基本名称和文件扩展名定义）。

**$(TargetName)**
构建的主输出文件的基本名称。

**$(TargetFileName)**
构建的主要输出文件的文件名（定义为基本名称和文件扩展名）。

**$(TargetExt)**
构建的主要输出文件的文件扩展名。它包括“。” 在文件扩展名之前。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-31T13:32:47.353

你去： http: [//msdn.microsoft.com/en-us/library/42x5kfw4 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/42x5kfw4(v=vs.80).aspx)

[VS 2015](https://msdn.microsoft.com/en-us/library/42x5kfw4(v=vs.140).aspx)版

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-12T14:30:25.770

以下是 Visual Studio 2015 的构建前和构建后事件参数（构建命令和属性的常用宏）2018 链接的更新列表：[https://msdn.microsoft.com/en-us/library/c02as0cs。 aspx](https://msdn.microsoft.com/en-us/library/c02as0cs.aspx)

**$（远程机器）**

设置为“调试”属性页上的“**远程机器”属性的值。**有关详细信息，请参阅[更改 C/C++ 调试配置的项目设置](https://msdn.microsoft.com/en-us/library/kcw4dzyf.aspx)。

**$（配置）**

当前项目配置的名称，例如“Debug”。

**$（平台）**

当前项目平台的名称，例如“Win32”。

**$（父名）**

（已弃用。）包含此项目项的项的名称。这将是父文件夹名称或项目名称。

**$(根名称空间)**

包含应用程序的命名空间（如果有）。

**$(IntDir)**

为中间文件指定的目录的路径。如果这是相对路径，则中间文件会转到附加到项目目录的此路径。此路径应该有一个尾部斜杠。这将解析为**中间目录**属性的值。不要使用**$(OutDir)**来定义此属性。

**$(OutDir)**

输出文件目录的路径。如果这是相对路径，则输出文件将转到附加到项目目录的此路径。此路径应该有一个尾部斜杠。这将解析为**输出目录**属性的值。不要使用**$(IntDir)**来定义此属性。

**$(开发环境目录)**

Visual Studio的安装目录（定义为驱动器+路径）；包括尾随反斜杠“\”。

**$(输入目录)**

（已弃用；已迁移。）输入文件的目录（定义为驱动器 + 路径）；包括尾随反斜杠“\”。如果项目是输入，则此宏等效于**$(ProjectDir)**。

**$(输入路径)**

（已弃用；已迁移。）输入文件的绝对路径名（定义为驱动器 + 路径 + 基本名称 + 文件扩展名）。如果项目是输入，则此宏等效于**$(ProjectPath)**。

**$(输入名称)**

（已弃用；已迁移。）输入文件的基本名称。如果项目是输入，则此宏等效于**$(ProjectName)**。

**$(输入文件名)**

（已弃用；已迁移。）输入文件的文件名（定义为基本名称 + 文件扩展名）。如果项目是输入，则此宏等效于**$(ProjectFileName)**。

**$(输入外部)**

（已弃用；已迁移。）输入文件的文件扩展名。它包括“。” 在文件扩展名之前。如果项目是输入，则此宏等效于**$(ProjectExt)**。

**$(项目目录)**

项目的目录（定义为驱动器+路径）；包括尾随反斜杠“\”。

**$(项目路径)**

项目的绝对路径名（定义为驱动器+路径+基本名称+文件扩展名）。

**$(项目名称)**

项目的基本名称。

**$(项目文件名)**

项目的文件名（定义为基本名称 + 文件扩展名）。

**$(项目外部)**

项目的文件扩展名。它包括“。” 在文件扩展名之前。

**$（解决方案目录）**

解决方案的目录（定义为驱动器+路径）；包括尾随反斜杠“\”。

**$（解决方案路径）**

解决方案的绝对路径名（定义为驱动器 + 路径 + 基本名称 + 文件扩展名）。

**$（解决方案名称）**

解决方案的基本名称。

**$(解决方案文件名)**

解决方案的文件名（定义为基本名称 + 文件扩展名）。

**$(解决方案分机)**

解决方案的文件扩展名。它包括“。” 在文件扩展名之前。

**$(目标目录)**

构建的主要输出文件的目录（定义为驱动器+路径）；包括尾随反斜杠“\”。

**$（目标路径）**

构建的主输出文件的绝对路径名（定义为驱动器 + 路径 + 基本名称 + 文件扩展名）。

**$（目标名称）**

构建的主要输出文件的基本名称。

**$(目标文件名)**

构建的主要输出文件的文件名（定义为基本名称 + 文件扩展名）。

**$（目标外部）**

构建的主要输出文件的文件扩展名。它包括“。” 在文件扩展名之前。

**$(VSInstallDir)**

安装 Visual Studio 的目录。

此属性包含目标 Visual Studio 的版本，它可能与宿主 Visual Studio 不同。例如，使用 构建时`$(PlatformToolset) = v110`，**$(VSInstallDir)**包含 Visual Studio 2012 安装的路径。

**$(VCInstallDir)**

安装 Visual C++ 的目录。

此属性包含目标 Visual C++ 的版本，它可能与宿主 Visual Studio 不同。例如，使用 构建时`$(PlatformToolset) = v140`，**$(VCInstallDir)**包含 Visual C++ 2015 安装的路径。

**$(框架目录)**

.NET Framework 的安装目录。

**$(框架版本)**

Visual Studio 使用的 .NET Framework 版本。结合**$(FrameworkDir)**，Visual Studio 使用的 .NET Framework 版本的完整路径。

**$(FrameworkSDKDir)**

安装 .NET Framework 的目录。.NET Framework 可以作为 Visual Studio 的一部分安装或单独安装。

**$(WebDeployPath)**

从 Web 部署根目录到项目输出所属位置的相对路径。[返回与RelativePath](https://msdn.microsoft.com/en-us/library/microsoft.visualstudio.vcprojectengine.vcwebdeploymenttool.relativepath.aspx)相同的值。

**$(WebDeployRoot)**

位置的绝对路径**. 例如，c:\inetpub\wwwroot。**

 ****$(安全父名)**

（已弃用。）有效名称格式的直接父级的名称。例如，表单是 .resx 文件的父级。

**$(安全输入名称)**

（已弃用。）作为有效类名的文件名，减去文件扩展名。

**$(SafeRootNamespace)**

（已弃用。）项目向导将在其中添加代码的命名空间名称。此命名空间名称将仅包含有效 C++ 标识符中允许的字符。

**$(FxCopDir)**

fxcop.cmd 文件的路径。并非所有 Visual C++ 版本都安装了 fxcop.cmd 文件。**

# css - iOS css边框角加入问题

> ID：10834664
> 
> 赞同：1
> 
> 时间：2012-05-31T13:31:11.970
> 
> 标签：css, ios5, border

我正在将 CSS 边框应用于 div，但在 iOS 5 中我没有正确获得边框的角连接，如下图所示。任何帮助将不胜感激...谢谢

![在此处输入图像描述](../Images/9b2405a72e067e78dcf1d8d49b6771f2.png)

以下用于生成 DIV

```
<div id="divSelection" style="position: absolute; border:3px dashed red; z-index: 1000; width: 305px; height: 206px; left: 50px; top: 50px; -webkit-transform: rotate(-10deg); "></div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:03:20.207

发现这个，这是 iOS 5 中的错误，由于某种原因，它没有正确呈现虚线样式的 css 边框。

在 iOS 5 中打开以下链接

[边界测试](http://old.macedition.com/cb/resources/safari/bordertest1.html)

目前看来唯一的解决方案是使用虚线边框属性应用边框半径，然后它将正确渲染角。

# web-applications - 如何在我的 webapp 中处理时区？

> ID：10834665
> 
> 赞同：125
> 
> 时间：2012-05-31T13:31:16.933
> 
> 标签：web-applications, timezone, usability

我正在寻找对以下用户故事的更好理解：

约翰在悉尼工作。早上 9:00，他在苏黎世服务器上运行的 Web 应用程序中记录了一个事件。第二天，他前往纽约参加应讨论该事件的紧急会议。在会议期间，他按日期和时间搜索事件。

在我看来，这里至少有两个问题：

1.  我应该如何将时间戳保存在数据库中
2.  我应该如何在 UI 中呈现它们

当 John 搜索事件时，他会知道事件发生在 9:00，但他应该在 Web 浏览器中输入什么？当他只是输入“9:00”作为时间戳时，他将找不到任何东西，因为那可能是苏黎世或纽约时间（由于尚未找到该事件，该应用程序无法知道它发生在 Sidney，所以它不能自动选择正确的时区）。

向用户询问可能包含时区的时间戳的好方法是什么？

第二个问题是如何显示结果。如果来自全球各地的团队需要讨论该事件（并查找相关事件，请考虑一次针对全球多个站点的黑客攻击）。

显示可能在不同时区创建的时间戳的好例子是什么？

注意：请专注于需求的可用性。我可以自己弄清楚数据库映射。目前，我不确定工作流程。它应该以非侵入性/直观的方式询问/呈现必要的信息。如果可以的话，给一个已经解决这个问题的现有网络应用程序的链接。

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-06-07T02:40:17.537

存储时间戳的问题很简单：将它们存储在 UTC 中。

至于显示它们，采用设备的时区设置并将其用作当前时区是有意义的。也就是说，“时间输入”框旁边应该有一个时区下拉菜单，默认为设备的当前时区，因此用户可以根据需要更改它。

您的大多数用户可能不会或根本不会更改时区。在大多数情况下，您概述的情况并不常见。通过实施具有合适默认值的下拉菜单，您应该能够为那些四处走动的人提供足够的便利（因为他们通常比非旅行者更了解时区）。

事实上，更好的做法是保存您的应用程序首次运行时设备设置的时区，然后查看它是否会更改。如果它确实发生了变化，那么用户可能是一名旅行者，并且可能会从时区下拉列表中受益。否则，只是不显示下拉菜单并默认为设备时区（因为用户不需要知道它们）。无论哪种情况，在应用程序中设置一个允许用户手动显示/隐藏时区下拉菜单的设置。

* * *

总结以上内容：

*   首次运行时，保存设备设置的时区。
*   使用该时区作为默认时区。总是假设那个时区。
*   如果设备切换时区，请添加一个下拉列表以选择事件所在的时区，默认为设备自己的时区。
*   添加选项以手动显示/隐藏此时区下拉菜单。
*   始终以 UTC 格式存储时间戳。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-07T03:13:42.983

在我们的应用程序中，我们一般会在用户第一次注册时存储用户的时区，就像在论坛网站上经常看到的那样，并且**总是以时区显示时间**。

至于存储日期，UTC 是要走的路。转换为 UTC 并将其粘贴到数据库中。检索时，只需将时间转换为为用户设置的时区。

我必须解决一个类似的用例，其中定制的通知，如“新年快乐”，可以发送给网络应用程序的所有用户。由于用户分布在世界各地，我们需要根据时区显示通知。在 UTC 中存储时间戳很好地满足了我们的目的，没有打嗝。

在您的用例中，如果您没有将用户时区存储在某处，那么您将永远无法在不要求用户输入的情况下准确地返回搜索结果，除非您开始使用 gmaps 之类的某种位置检测，但那不是可靠。因此，您每次都需要询问时区，以确保用户知道他在网站中输入的内容。

如果您确实有时区信息，则应使用时区设置运行整个 Web 应用程序。因此，当用户确实搜索 9:00 时，他将使用悉尼时区进行搜索。另一方面，如果他在纽约创建活动，他将使用悉尼时区创建活动。我们通过在显示日期时始终显示时区来解决这种情况。

希望能帮助到你！:)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-06-12T01:10:46.557

1.  世界标准时间。把事情简单化。

2.  使用与用户最相关的时区。

    如果您知道用户将在或前往悉尼参加活动，那么他们在安排前往活动的交通工具时会*考虑*该时区。他们目前在纽约的事实在很大程度上是无关紧要的。当然，如果您的应用程序在多个时区显示日期，它应该始终在日期旁边显示时区，例如*09:00 EST*。

    如果它不会使您的界面过于混乱，您可以在事件时区和本地时区显示日期，例如*2012-06-13 09:00 EST (2012-06-12 19:00 EDT)*。

    我认为搜索是一个类似的问题，但有一个警告：我们可以容忍误报（得到我们不期望的结果），但我们不能忍受误报（没有得到我们期望的结果）。

    同样，我将专注于搜索与用户最相关的时区（例如事件时区），并在搜索结果中优先考虑这些结果，但您也可以返回与用户相关的其他时区匹配的事件（例如当地时间）。如果你这样做，你应该在匹配的时区显示事件日期，特别是如果你突出显示匹配的文本。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-09T20:33:32.677

在这里，我给出了最佳可用性的建议，而不会过多地关注实现的可行性。
1.第一次在db中存储事件，大家都同意用UTC存储。

2.为了给用户最好的体验，保存用户的时区历史。如果您可以保存时区更改的时间戳，那就更好了。这将使我们能够让用户自由查询，而无需每次都明确指定时区。

> 因此，有了这些功能，让我们看看 John 对“9.00”的搜索查询将如何处理：
> 有了上述功能，现在我知道 John 一直在 2 个时区（或获取提到的时间段的时区列表）。所以我会将 9.00 从悉尼时区转换为 UTC，发出查询。还将 9.00 从纽约时区转换为 UTC，触发查询。结果，我将向 John 显示 2 行，显示他在 9 点在悉尼和 9 点在纽约所做的事情。在这种情况下，纽约行将是空白的，但我认为仍然应该向用户显示，只是为了通知他我们也搜索了这个时区。

3.向用户询问可能包含时区的时间戳的好方法是什么？

> 如果最近更改了他的时区，则每当他登录应用程序时，都应该通知您，您的默认时区已更改为本地时区。
> 在创建事件时，假设用户从下拉列表中选择时区。让我们不要通过提供世界所有时区的选项来给用户带来负担。下拉列表的第一个选项应该是用户设备的当前时区。在他的时区历史中的时区之后，然后是UTC，然后是他迄今为止从未使用过的剩余时区。

4.如果来自世界各地的团队需要讨论事件，如何显示结果：

> 我想将此用例划分为 2 个或超过 2个团队。
> 对于只有 2 个团队，我希望每个团队在其本地时区和其他团队的时区看到时间戳。（我个人更喜欢在安排会议时在另一端的人的时区交谈，以方便他安排会议）。对于超过 2 个团队，最好考虑更常见的时区，即 UTC。因此，在这种情况下，每个用户都应该在 2 个时区、UTC 和他的默认时区看到时间戳。

给出这些建议的目的是让用户不需要在本地时间进行任何计算，但同​​时他应该能够在他们喜欢的时区与其他用户流利地交流。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-12T02:52:35.167

好的，我的方法与其他方法不同：

首先，我事先假设了一些事情。

列出事件的人有智能手机（如果它是浏览器，我不必做这些假设）：

1.  全球定位系统

2.  HTML5 能力。

3.  Javascript 能力

> 我应该如何将时间戳保存在数据库中？

**解决方案：**显然**UTC**，我在下面覆盖了程序：

步骤 1\. 使用**Geolocation** API 使用用户的 Geolocation

```
 window.onload = getMyLocation;

    function getMyLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(displayLocation);
        } else {
            alert("Oops, no geolocation support");
        }
    }

    function displayLocation(position) {
        var latitude = position.coords.latitude;
        var longitude = position.coords.longitude;
        var div = document.getElementById("location");
        div.innerHTML = "You are at Latitude: " + latitude + ", Longitude: " + longitude;
    } 
```

步骤 2\. 将 (Long,Lat) 作为一些 (Lat,Long) 到 TimeZone api 的参数，例如[Yahoo API](http://developer.yahoo.com/geo/placefinder/guide/requests.html)（使用标志 R 将纬度转换为时区）以获取用户时区。

=>**用户时区是在没有用户输入的情况下确定的**（我之所以使用它是因为你不能简单地假设用户知道他居住的地方的时区，我只是在几个月后才知道我的时区或某个地方的某事：P，非常愚蠢！ )

每个 Event 表都有`Timezone`, `Event`& 所以也可以有`CityName` 然后创建另一个基于`CityName`s 分类的数据库表。所以这里用户将有两列

```
|---------------------------------------|
|_____NewYork________|______Sydney______|
|                    |                  |
|Event 1             |  Event 2         |
|____________________|__________________| 
```

> 用户界面

=> 使用谷歌日历 API 或一些日历 API

**相关阅读：**

1.  [在不使用 Geonames.org 等 Web 服务的情况下根据纬度/经度确定时区](https://stackoverflow.com/questions/5584602/determine-timezone-from-latitude-longitude-without-using-web-services-like-geona)

2.  [从纬度经度查找时区](https://stackoverflow.com/questions/41504/timezone-lookup-from-latitude-longitude)

我知道它只是为了展示一些如何解决这个问题的想法。**但是，当使用设备 API**确定时区时，看看它对用户来说变得多么准确和轻量级

 **希望能帮助到你！

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-07T04:45:29.507

对于那种特殊情况，我会同时存储**本地**时间和 UTC 时间。UTC 有点重要，用于将时间同步和转换为当前时区。本地用于搜索和其他信息，例如：

你有一个会议：

```
12:00 Monday (UTC)
9:00 Monday (Sydney, creation local time)
11:00 Monday (Zurich, local time) 
```

或类似的东西。另一种方法是存储创建时区，并在运行时转换（这在用户更改会议时间的情况下特别好）。无论哪种方式，主要原因是能够恢复原始创建时间，以便用户可以参考它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-07T21:18:40.040

> 1.  我应该如何将时间戳保存在数据库中

在创建事件时，我会存储 UTC 时间和本地时区（又名`creation time zone`）。我会使用我存储的内容将 UTC 时间转换为本地时间（又名`creation time`）并将其与 UTC 时间和`creation time zone`.

注意：我可以从一开始就存储本地时间，但是当用户搜索事件时，我希望存在到本地时间的转换。我也希望服务器能检测到客户端所在的时区。

> 1.  我应该如何在 UI 中呈现它们

当用户搜索“9:00”时，我会在 UTC**或** `creation time` **或**本地时间搜索包含“9:00”的事件。对于结果，我将在其中显示一个结果表`creation time`（这旨在显示可能已在不同时区创建的时间戳，因为我们假设用户正在寻找他创建事件的时间，无论他身在何处。） ，并在下面显示第二个结果表以及相关结果，可能带有标题“不是您要查找的内容？查看相关结果”（包括剩余的 UTC 和本地时间结果）。

总的来说，我会显示 UTC 时间、本地时间、`creation time`以及`creation time zone`（即创建它的事件的本地时间和时区），按 UTC 时间排序，这样您就可以看到哪个事件先出现，以防两个不同活动安排在两个不同时区的 9:00。**

# wso2 - 为 LinkedIn 指定用于在 Java 中获取 OAuth 令牌的端点

> ID：10834667
> 
> 赞同：1
> 
> 时间：2012-05-31T13:31:25.243
> 
> 标签：wso2, linkedin, wso2esb

我正在使用 WSO2 ESB 代理 LinkedIn 服务。如何在使用 Scribe 获取访问令牌时在 java 中指定端点？当前的端点是[https://www.linkedin.com/uas/oauth/authorize](https://www.linkedin.com/uas/oauth/authorize)但我希望它将其更改为我的 ESB 的地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:18:01.633

得到了答案！端点可以在文件中更改

> LinkedInApi.java

在`/src/main/java/org/scribe/builder/api`文件夹中。

# wso2 - 在默认 WSo2 证书中用作通用名称的“本地主机”创建未找到主题备用名称

> ID：10834673
> 
> 赞同：4
> 
> 时间：2012-05-31T13:31:35.480
> 
> 标签：wso2, wso2esb

我们使用 wso2 esb（版本 4.0.3）来公开我们的 web 服务。我们的 web 服务是使用 wso2 中的管理控制台添加为代理服务的。我们只想通过 https 公开/使用我们的 web 服务。生成存根后，我们完成了以下操作

1.  使用 java keytool 创建一个 jks 文件。
2.  导出 wso2 证书并导入到 jks 文件中。
3.  在调用 web 服务时在代码中添加了以下内容。

> System.setProperty("javax.net.ssl.trustStore", "filename"); System.setProperty("javax.net.ssl.trustStorePassword", "password");

当我们尝试从 java 代码调用 web 服务时做了所有这些之后，它只在 url 与 localhost 一起提供时才有效。它不适用于 127.0.0.1 或机器 IP 地址，即使我们在主机文件中有正确的映射。使用 ip 地址时，我们得到的错误为 `javax.net.ssl.SSLHandshakeException: java.security.cert.CertificateException: No subject alternative names present`. 出现此错误是因为 wso2 提供的默认证书将“localhost”作为公用名。我们可以通过添加以下代码来摆脱这个问题

```
 HttpsURLConnection.setDefaultHostnameVerifier(new HostnameVerifier() {
          public boolean verify(String string, SSLSession ssls) {
                          return true;
          }}); 
```

但这可能会产生安全问题。请建议我们如何解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T12:21:57.690

当主机名与证书的 CN 不匹配时，会出现此错误。我可以为您提供两种解决方案。

*   如果您只需要使用 IP 地址访问服务，则只需生成具有正确 IP 地址的证书作为服务器证书的 CN 值的值。可以使用 Java Keytool。
*   如果要同时使用 IP 地址和主机名来寻址服务，请生成包含主题备用名称 (SAN) 的证书。Java 7 附带的 Java Keytool 能够使用 SAN 生成证书。否则，请使用任何其他工具，例如 OpenSSL 或使用由 SAN 颁发的 CA 证书。

# macos - 在 .net 网络服务和 Mac 网络服务之间传输文件的最佳方式

> ID：10834678
> 
> 赞同：1
> 
> 时间：2012-05-31T13:32:01.567
> 
> 标签：macos, web-services, hudson

DI 在 .net 中有发送文件的网络服务......

**在 MAC**上编写 Web 服务的最佳简单方法是什么，它将接受这些文件，执行操作并将它们自动发送回服务器？

我不能在 .net 上做，所以**选择**什么？

# c# - EF Code First 实体基类

> ID：10834684
> 
> 赞同：1
> 
> 时间：2012-05-31T13:32:14.707
> 
> 标签：c#, entity-framework, ef-code-first, fluent

我们的 Oracle（旧版）数据库中的所有表都具有以下字段：

```
Created_By
Creation_Date
Updated_By
UpdateDate 
```

由触发器控制。我创建了一个包含四个属性的抽象`EntityBase`类，效果很好。但是，我确实需要将四个属性添加到每个配置文件（流利的）（它们在数据库和我的类中具有不同的名称）。我可以为`EntityTypeConfiguration`所有其他配置文件创建一个基本配置文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:35:25.323

这不是当前支持的东西，但它的积压中有一个项目。

# css - 应用一些 CSS 后，Sencha 触摸选择字段看起来很奇怪

> ID：10834686
> 
> 赞同：2
> 
> 时间：2012-05-31T13:32:19.053
> 
> 标签：css, sencha-touch-2

应用了一些 CSS 后，我的选择字段看起来很奇怪。我将我的 CSS 应用于三个组件：

```
cls: 'txtwhite',
labelCls: 'txtwhite',
inputCls: 'sfborder' 
```

我的三个 CSS 类是：

```
.txtwhite {
  font-family:Arial;
  color:white;
  font-size:15px;
  background: #000000;
}

.txtinput {
  font-family:Arial;
  color:white;
  font-size:15px;
  background: #000000;
  border-color: #6E6E6E;
  border-style:solid;
  border-width:2px;
}

.sfborder {
  font-family:Arial;
  color:white;
  font-size:15px;
  background: #000000;
  border-color: #0B4C5F;
  border-style:solid;
  border-width:1px;
  border-radius:10px;
} 
```

我的选择框位于选择字段的标签下方。在选择框的右侧，我看到一个白色的向下箭头（这是从下拉列表中选择内容的箭头）。

我的问题是：为什么那个箭头的颜色和它周围的一些区域是白色的？

# jquery - 自动完成源

> ID：10834688
> 
> 赞同：2
> 
> 时间：2012-05-31T13:32:20.197
> 
> 标签：jquery, asp.net-mvc, jquery-ui, jquery-ui-autocomplete

我的表单上有 2 个自动完成文本框。如果从第一个中选择了一个值，我想要做的是动态更改第二个自动完成文本框中的源。

我的标记片段如下：

```
 $(function () {
    $("#SelectedAddress").autocomplete({
        source: "/CreateFIS/GetProperties",
        select: function(event, ui) {
            if (ui.item) {
                event.preventDefault();
                $('#SelectedAddress').val(ui.item.label);
                $('#SelectedAddressId').val(ui.item.value);
                getPropertyInformation(ui.item.value);
            }
        },
        focus: function(event, ui) {
            if (ui.item) {
                event.preventDefault();
                $('#SelectedAddress').val(ui.item.label);
                $('#SelectedAddressId').val(ui.item.value);
                //getPropertyInformation(ui.item.value);
            }
    }
    });
});

$(function () {
    $("#SelectedScheme").autocomplete({
        source: "/CreateFIS/GetSchemes",
        select: function (event, ui) {
            if (ui.item) {
                event.preventDefault();
                $('#SelectedScheme').val(ui.item.label);
                $('#SelectedSchemeId').val(ui.item.value);
            }
        },
        focus: function (event, ui) {
            if (ui.item) {
                event.preventDefault();
                $('#SelectedScheme').val(ui.item.label);
                $('#SelectedSchemeId').val(ui.item.value);
            }
        }
    });
});

<tr>
                    <td style="width:200px;"><label for="addresses">Please Select A Scheme</label> </td>
                    <td style="width:600px;">@Html.TextBoxFor(model => model.SelectedScheme, new { @class = "largeTextBox" })</td>
                    <td style="width:200px;"> @Html.ValidationMessageFor(model => model.SelectedSchemeId) </td>
                </tr>
                <tr>
                    <td style="width:200px;"><label for="addresses">Please Select A Property </label> </td>
                    <td style="width:600px;">@Html.TextBoxFor(model => model.SelectedAddress, new { @class = "largeTextBox" })</td>
                    <td style="width:200px;"> @Html.ValidationMessageFor(model => model.SelectedAddressId) </td>
                </tr> 
```

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:39:45.130

使用`option`方法更改源：

```
var source = $(".selector").autocomplete("option", "source", "/New/Source"); 
```

# mysql - 按性别获取活跃成员

> ID：10834692
> 
> 赞同：0
> 
> 时间：2012-05-31T13:32:24.050
> 
> 标签：mysql, join

我对这个项目的最终目标是产生正确数量的在职女性员工、在职女性家属、在职男性员工和在职男性家属。我最终将使用散点图或饼图向客户显示此信息

我目前有一个名为 ActiveMemberType 的表，它显示...

```
CC  HID     ID      DOB  Gender Month Total_Paid ActiveType
B11 BLM0    00  1987-07-12  F   2004-09 0.00    Dependent
B11 BLM0    00  1987-07-12  F   2004-10 0.00    Dependent
B11 BLM0    00  1987-07-12  F   2004-11 0.00    Dependent
B11 BLM0    00  1987-07-12  F   2004-12 0.00    Dependent 
```

我有另一个名为 ActiveMembersPerMonth 的表，它显示...

```
CC  ID         GID  Month-Total-Emp-Dep
B11 115 12818   2003-01 24  12  12
B11 115 12818   2003-02 24  12  12
B11 115 12818   2003-03 24  12  12
B11 115 12818   2003-04 24  12  12 
```

也许是为女性支付的总费用，然后我可以隔离活动类型

ID 和 GID 是为了形式，这里真的不需要，CC 是我除了月之外唯一能加入的。

我怎么能让这两张表说给我一些看起来像这样的结果......

```
 CC HID SD  DOB      MONTH Active_Female_Emp Active_Male_Emp Active_Female_Dep Active_Female_Emp 
b11 BLM 0 yyyy-mm-dd  2010-01 7                     7             3               3 
```

我需要实际计数最终等于总数，显然而且......几乎所有这些字段都是静态的，因为它是历史数据，活动是唯一有可能改变的字段。

我的主要问题是我从所有成员那里获得了总报酬，然后除以 SUM(IF(Gender = 'M') 1, 0) 类型的交易，结果非常不理想。

CC HID 和 _ID 是使成员独一无二的原因，所以请记住它不在每月活跃成员表中，所以我可能需要一个子查询......当我到达那里时，我会越过它......让人们头脑风暴！谢谢！

我现在正在做这个项目。请记住，还有其他表，这些是我创建的汇总表，用于存放我需要的特定数据。

这是感谢 Egyal 的更新：

```
SELECT Client_Cd, Holder_Id, _ID,  Incurred_Month,          
SUM(Gender='F' AND Active_Type='Employee' ) AS Active_Female_Emp,          
SUM(Gender='M' AND Active_Type='Employee' ) AS Active_Male_Emp,          
SUM(Gender='F' AND Active_Type='Dependent') AS Active_Female_Dep,          
SUM(Gender='M' AND Active_Type='Dependent') AS Active_Male_Dep,
SUM(Total_Paid) as Total_Paid
FROM ActiveMemberType
WHERE Incurred_Month = '2006-06'
GROUP BY client_Cd, HoldeR_ID, _Id, Incurred_Month; 
```

你显然看不到这一点，但是当我查看我的 ActiveMembersPerMonth 表时

```
B11 115 12818   2006-06 428 180 248 42 
```

没有标题... 428 是我 06-06 月份的活跃总数...

现在有了您的查询，我的计数激增至 2221 个活动...可能是计算错误...

你的结果：

```
B11 BLM0    00  2006-06 2221    619 1468    2223    752371.20 
```

无论如何，我需要一个日期范围内给定月份的按性别和 Active_Type 的 total_paid

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:05:35.227

```
SELECT   Month,
         SUM(IF(Gender='F' AND ActiveType='Employee' , Total_Paid, 0)) AS fEmp,
         SUM(IF(Gender='M' AND ActiveType='Employee' , Total_Paid, 0)) AS mEmp,
         SUM(IF(Gender='F' AND ActiveType='Dependent', Total_Paid, 0)) AS fDep,
         SUM(IF(Gender='M' AND ActiveType='Dependent', Total_Paid, 0)) AS mDep
FROM     ActiveMemberType
GROUP BY Month 
```

# android - android - 垂直和水平居中文本，下方并排有 2 个按钮

> ID：10834708
> 
> 赞同：1
> 
> 时间：2012-05-31T13:33:40.273
> 
> 标签：android, layout, button, views

我有一个看法。我希望图像徽标出现在布局的左上角和布局的中心（水平和垂直）我希望文本下方有 2 个按钮（并排）的文本。这是我所拥有的，但它不起作用......有什么帮助吗？

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/linearlayout"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:fillViewport="true"
  android:background="@drawable/login_background"
>

<ImageView 
       android:id="@+id/imgLogo"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_x="-6px"
       android:layout_y="32px"
       android:background="@drawable/logo"
   />

  <RelativeLayout
    android:layout_width="fill_parent" android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    >
             <TextView android:id="@+id/txt1"
              android:layout_width="wrap_content" 
              android:layout_height="wrap_content" 
              android:text="Welcome to my app. Please select your language"      
              android:textColor="#FFFFFF"
              android:textSize="20sp"
              />

              <LinearLayout
            android:orientation="horizontal"
            android:background="@android:drawable/bottom_bar"
            android:paddingLeft="4.0dip"
            android:paddingTop="5.0dip"
            android:paddingRight="4.0dip"
            android:paddingBottom="1.0dip"
            android:layout_width="fill_parent" android:layout_height="wrap_content"
            android:layout_below="@+id/TextView01"
            android:gravity="center"
            android:layout_centerInParent="true"
            >

                  <Button
                    android:id="@+id/btnEnglish"
                    android:layout_width="0.0dip" android:layout_height="fill_parent" 
                    android:text="English"
                    android:layout_weight="1.0"
                   /> 
                   <Button
                        android:id="@+id/btnSpanish"
                        android:layout_width="0.0dip" android:layout_height="fill_parent"
                        android:text="Spanish"
                        android:layout_weight="1.0"
                   /> 
            </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:50:03.667

我认为这可以满足您的要求：

```
<ImageView
    android:id="@+id/imgLogo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_x="-6px"
    android:layout_y="32px"
    android:background="@drawable/logo" />

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_centerVertical="true"
    android:gravity="center_vertical"
    android:layout_weight="1"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/txt1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Welcome to my app. Please select your language"
        android:textColor="#FFFFFF"
        android:textSize="20sp" />

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/TextView01"
        android:layout_centerInParent="true"
        android:background="@android:drawable/bottom_bar"
        android:gravity="center"
        android:orientation="horizontal"
        android:paddingBottom="1.0dip"
        android:paddingLeft="4.0dip"
        android:paddingRight="4.0dip"
        android:paddingTop="5.0dip" >

        <Button
            android:id="@+id/btnEnglish"
            android:layout_width="0.0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:text="English" />

        <Button
            android:id="@+id/btnSpanish"
            android:layout_width="0.0dip"
            android:layout_height="fill_parent"
            android:layout_weight="1.0"
            android:text="Spanish" />
    </LinearLayout>
</LinearLayout> 
```

# asp.net - 用于跨平台/设备支持的 Asp.net MVC4

> ID：10834710
> 
> 赞同：1
> 
> 时间：2012-05-31T13:33:46.293
> 
> 标签：asp.net, asp.net-mvc, c#-4.0, razor

我们正在开发针对台式机、平板电脑、移动设备的应用程序。是否值得拥有三个不同的页面/UI 来支持不同的设备？

有人提到 MVC 4.0 具有跨平台（设备）支持，我可以编写所有设备都可以查看的单页/解决方案？mvc4.0 是否真的解决了这个问题。如果是这样，我在哪里可以找到更多相关信息？

来自官方页面：

如果桌面浏览器请求主页，应用程序可能会使用该`Views\Home\Index.cshtml`模板。如果移动浏览器请求主页，应用程序可能会返回`Views\Home\Index.mobile.cshtml`模板。

我真的应该为不同的设备编写不同的 cshtml 吗？

默认项目模板的增强功能：- 除了外观上的改进之外，新模板中的功能也得到了改进。该模板采用了一种称为自适应渲染的技术，无需任何自定义即可在桌面浏览器和移动浏览器中看起来都不错。

上面的说的是不同的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:36:31.347

如果您想针对多个设备，您可以做的最好的事情之一就是使用[渐进式增强](http://en.wikipedia.org/wiki/Progressive_Enhancement)和[响应式设计](http://en.wikipedia.org/wiki/Responsive_Web_Design)原则。

这适用于任何 Web 框架，因为它使用 javascript 和 css 根据浏览器的尺寸和功能显示您的网站。

> 渐进增强是一种网页设计策略，它强调可访问性、语义 HTML 标记以及外部样式表和脚本技术。渐进式增强以分层方式使用 Web 技术，允许每个人使用任何浏览器或 Internet 连接访问网页的基本内容和功能，同时还为那些拥有更高级浏览器软件或更好带宽的人提供页面的增强版本.
> 
> 响应式网页设计 (RWD) 本质上表明网站设计为使用级联样式表 3 媒体查询，@media 规则的扩展，具有基于流动比例的网格，以使布局适应查看环境，并且可能还使用灵活的图像。因此，使用各种设备和浏览器的用户将可以访问单一内容源，其布局易于阅读和导航，只需最少的调整大小、平移和滚动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T19:13:50.580

看一下这个。

[http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features](http://www.asp.net/mvc/tutorials/mvc-4/aspnet-mvc-4-mobile-features)

看起来 MVC4 将有一个内置的用户代理检查器，并允许您同时拥有自动切换的桌面和移动视图。

# javascript - w3c 验证内部 javascript

> ID：10834712
> 
> 赞同：3
> 
> 时间：2012-05-31T13:33:58.137
> 
> 标签：javascript, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:37:45.953

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:37:58.470

听起来像 XHTML？将 JavaScript 放在 CDATA 部分：[http](http://en.wikipedia.org/wiki/CDATA) ://en.wikipedia.org/wiki/CDATA告诉解释器，它应该忽略特殊字符，如 < > 和 &。

```
<script>
<![CDATA[
    // ...
]]>
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:38:42.723

如果这是`<script></script>`在 HTML 中的块内，则可能会导致问题：

> 脚本不应包含序列
> 
> `</`因为它可能与`</script>`. 在字符串中的 < 和 / 之间插入反斜杠可以避免该问题。
> 
> `<\/`

[http://javascript.crockford.com/script.html](http://javascript.crockford.com/script.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T19:07:52.927

您可以使用以下任何一种：

```
<script type="text/javascript">
<!--
YOUR JS CODE .........
alert("www.mykitchenroom.com");
// -->
</script> 
```

或者，

```
<script type="text/javascript">
//<![CDATA[
YOUR JS CODE .........
alert("www.scienceanddevelops.com");
//]]>
</script> 
```

W3C 不会检查您的代码。

谢谢和问候， Subhojit Mukherjee

# javascript - 哪种编程语言可以同时从 Web 上抓取数据并进行 api 调用？

> ID：10834721
> 
> 赞同：3
> 
> 时间：2012-05-31T13:34:28.583
> 
> 标签：javascript, python

我的项目处理从没有 API 或调用 API（如果有的话）的网站上抓取大量数据。使用多个线程来提高速度和实时工作。哪种编程语言更好？我对 Python 很满意。但是，线程是一个问题。因此，考虑在 node.js 中使用 JS。因此，我应该选择哪个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:50:00.653

在 python 中，您可以对您的**scrapers**进行多线程处理。我过去用过[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)，但还有其他选择。

*   [刮擦](http://scrapy.org/)
*   [机械化](http://wwwsearch.sourceforge.net/mechanize/)
*   [lxml](http://lxml.de/lxml2.html)

**由于我有使用 Beautiful Soup 的经验，因此下面是一个非常简单的示例，可以使用它对刮刀**进行多处理。

```
from BeautifulSoup import BeautifulSoup
from multiprocessing import Process, JoinableQueue, cpu_count

jobs = []
queue = JoinableQueue()

class scraperClass(Process):
    def __init__(self,queue):
        Process.__init__(self)
        # Other init things

    def run(self):
        # your scraping code here
        # Perhaps save stuff to a DB?

            page = urllib2.urlopen(fullUrl)      # fullUrl can be passed in via the queue, or other possible methods
            soup = BeautifulSoup(page)
            # Read Beautiful Soup docs for how to parse further

def main():
    numProcesses = 2
    for i in xrange(numProcesses):
        p = scraperClass(queue)
        jobs.append(p)
        p.start()           # This will call the scapperClass.run() method

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T13:41:49.150

仅当您想并行计算多个事物时，线程才是 Python 中的一个问题。如果你只是想做很多请求，解释器的限制（只有一个线程一次解释python）不会成为问题。

事实上，要同时发出大量请求，您甚至不必使用大量线程。您可以使用异步请求库，例如[requests.async](http://docs.python-requests.org/en/latest/)。

如果您对请求的结果有一些繁重的计算，您总是可以在 python 中使用[multiprocessing](http://docs.python.org/dev/library/multiprocessing.html)并行化它，这使您能够绕过我之前谈到的线程限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:38:11.003

我进行了快速搜索，发现了一个名为 Scrapy 的 pytohon 抓取框架。它看起来很酷，但我还没有尝试过：[http ://scrapy.org/](http://scrapy.org/)

这是他们教程的引述：

“所以你需要从网站中提取一些信息，但网站没有提供任何 API 或机制来以编程方式访问这些信息。Scrapy 可以帮助你提取这些信息。”

它说它也可以处理 API 调用

# android - 如何为 Galaxy Tab 或 Kindle Fire 制作模拟器？

> ID：10834723
> 
> 赞同：1
> 
> 时间：2012-05-31T13:34:43.763
> 
> 标签：android, android-emulator, kindle-fire, galaxy-tab

如果我查看平板电脑 Galaxy Tab 和 Kindle Fire 的规格，我会发现它们的分辨率为 1024 x 600 像素，7.0 英寸，dpi 约为 170 ppi。如果我根据这些信息（1024x600、170dpi）创建模拟器并通过`ScreenInfo`app 等工具对其进行测试，我会看到它们注册为`Large MDPI`.

真实设备注册为`Large HDPI`. 这意味着这些规范并不代表真实设备的真实状态。

为什么这不一样？如何为这些平板电脑制作一个真正反映真实设备的模拟器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:05:44.027

> 为什么这不一样？

因为有问题的设备制造商选择以这种方式对他们的设备进行分类。

> 如何为这些平板电脑制作一个真正反映真实设备的模拟器？

如评论所示，您可以获得三星建议您使用[的 Tab 模拟器图像。](https://stackoverflow.com/questions/3745491/emulate-samsung-galaxy-tab)

至于 Kindle Fire，您按照[亚马逊的说明](https://developer.amazon.com/help/faq.html#KindleFire)获取他们推荐的模拟器。您不会得到精确匹配，因为 Amazon 的固件与 2.3 库存固件（未完全为平板电脑设置）工作方式不同。

# php - HtAccess - 将请求移动到新子域所需的 ModRewrite 规则

> ID：10834725
> 
> 赞同：2
> 
> 时间：2012-05-31T13:34:59.587
> 
> 标签：php, .htaccess, mod-rewrite

我的 Php mvc 应用程序中有一个目录结构，目前是这样的

```
/site.com
    .htaccess
    index.php
    /models
    /views..
    /controllers..
    /resources..
        /images.. 
            /misc..
                logo.png
            /products..
                product_image1.jpg
        /js..
        /css.. 
```

我想将资源文件夹移动到它自己的子域，因此结构将类似于此

```
/site.com
    .htaccess
    index.php
    /models
    /views..
    /controllers..

/resources.site.com
    /images.. 
        /misc..
            logo.png
        /products..
             product_image1.jpg
        /js..
        /css.. 
```

我需要知道将资源文件夹中任何内容的请求重定向到新子域的重写规则。

我已经尝试过这条规则和其他一些规则，但它不起作用。

```
RewriteEngine On

RewriteBase /resources
RewriteCond %{HTTP_HOST} ^resources$ [NC]
RewriteRule ^(.*)$ http://localhost/resources.site.com/$1 [L] 
```

任何帮助将非常感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:02:45.797

你的规则有点混乱。如果要将资源目录的**请求重写****到**新域，则不希望将条件之一作为对新域的请求。在 htaccess 文件中尝试这样的操作：

```
RewriteEngine On

RewriteCond %{HTTP_HOST} !^resources\.site\.com$ [NC]
RewriteRule ^resources/(.*)$ http://resources.site.com/$1 [R=301,L] 
```

这将使得当您请求[http://site.com/resources/images/misc/logo.png](http://site.com/resources/images/misc/logo.png)时，您将被重定向到[http://resources.site.com/images/misc/logo.png](http://resources.site.com/images/misc/logo.png)

# java - spring 为带注释的方法强制执行事务逻辑

> ID：10834727
> 
> 赞同：2
> 
> 时间：2012-05-31T13:35:05.427
> 
> 标签：java, spring

我有一些用`@Transactional`注释注释的方法。此方法不是通过 spring 生成的代理调用的，但我需要在不使用该代理的情况下以某种方式强制创建事务。

是否可以实施？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:16:58.100

您可以[`TransactionTemplate`](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/transaction/support/TransactionTemplate.html)在提供的代码块/回调中使用手动启动事务：

```
final TransactionTemplate transactionTemplate = new TransactionTemplate(transactionManager);

transactionTemplate.execute(new TransactionCallback<String>()
{
    @Override
    public String doInTransaction(TransactionStatus status)
    {
        //...
        return "Some result";
    }
}); 
```

或者，如果您不需要结果：

```
transactionTemplate.execute(new TransactionCallbackWithoutResult()
{
    @Override
    protected void doInTransactionWithoutResult(TransactionStatus status)
    {
        //...
    }
}); 
```

当然也可以定义`TransactionTemplate`为Spring bean，直接注入。否则，您可以在每次需要时创建它，但是您需要注入事务管理器：

```
@Resource
private PlatformTransactionManager transactionManager; 
```

# python - Python - 如何显示窗口+打印文本？它只打印但不显示窗口

> ID：10834732
> 
> 赞同：1
> 
> 时间：2012-05-31T13:35:10.900
> 
> 标签：python, linux, pyqt, pyqt4

如何显示窗口+打印该文本？如果我有我的while循环，它不再显示窗口。

```
import sys
import datetime
import time
from PyQt4 import QtCore, QtGui

class Main(QtGui.QMainWindow):
  def __init__(self, parent=None):
    super(Main, self).__init__(parent)       
    self.b = QtGui.QPushButton("exit", self, clicked=self.close)
    self.c = QtGui.QLabel("Test", self)

if __name__ == "__main__":
  app=QtGui.QApplication(sys.argv)
  myapp=Main()
  myapp.show()     
  while True:
    time.sleep(2)
    print "Print this + Show the Window???!!!"
  sys.exit(app.exec_()) 
```

试过：

```
import sys
import datetime
import time
from PyQt4 import QtCore, QtGui

class Main(QtGui.QMainWindow):
  def __init__(self, parent=None):
    super(Main, self).__init__(parent)       
    self.b = QtGui.QPushButton("exit", self, clicked=self.close)
    self.c = QtGui.QLabel("Test", self)

  def myRun():
    while True:
      time.sleep(2)
      print "Print this + Show the Window???!!!"      

if __name__ == "__main__":
  app=QtGui.QApplication(sys.argv)
  myapp=Main()
  myapp.show()     

  thread = QtCore.QThread()
  thread.run = lambda self: myRun()
  thread.start()    
  sys.exit(app.exec_()) 
```

输出：

TypeError: () 只需要 1 个参数（给定 0）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:41:38.797

几个问题：1）您没有正确调用或初始化线程。2）您需要告诉您的主线程在另一个线程运行时继续处理事件 3）您的标签悬停在“退出”按钮上，因此您将无法单击它！

```
import sys
import datetime
import time
from PyQt4 import QtCore, QtGui

class Main(QtGui.QMainWindow):
  def __init__(self, parent=None):
    super(Main, self).__init__(parent)       
    self.b = QtGui.QPushButton("exit", self, clicked=self.close)

  def myRun(self):
    while True:
      time.sleep(2)
      print "Print this + Show the Window???!!!"      

if __name__ == "__main__":
  app=QtGui.QApplication(sys.argv)
  myapp=Main()
  myapp.show()     

  thread = QtCore.QThread()
  thread.run = lambda myapp=myapp: myapp.myRun()
  thread.start()    

  app.connect(app, QtCore.SIGNAL("lastWindowClosed()"), app, QtCore.SLOT("quit()"))

  sys.exit(app.exec_())

  while thread.isAlive():
    #Make sure the rest of the GUI is responsive
    app.processEvents() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:36:13.800

`lambda self: myRun()`尝试调用全局函数`myRun()`。尝试

```
lambda myapp=myapp: myapp.myRun() 
```

反而。奇数分配将创建一个默认参数，因为`thread.run()`没有得到一个。

# svn - 出现错误 SVN E195012 无法找到存储库

> ID：10834735
> 
> 赞同：3
> 
> 时间：2012-05-31T13:35:21.627
> 
> 标签：svn, repository

当我试图从我的存储库（SVN）中读取时，我收到了一个错误

> svn：E195012：无法在修订版 409123中找到“ [https://www.SVNURL.com/path/to/my/file ”的存储库位置](https://www.SVNURL.com/path/to/my/file)

我不知道为什么我会得到这个。任何人都可以帮助我吗？

谢谢你的时间。

我正在尝试使用 SVN 命令行界面从存储库中读取它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-11T17:42:00.243

可能路径 'path/to/my/file' 在修订版 409123 发布之前已更改。在这种情况下，一种可能的方法是获取修订的正确路径，然后尝试执行 svn 命令。例如，如果您打算读取“文件”，由于原因，您将无法成功跟随。

```
svn cat -r 409123 https://www.SVNURL.com/path/to/my/root/file 
```

但是您可能会找到以这种方式更改之前的路径。

```
svn info -r 409123 https://www.SVNURL.com/path/to/my/root/ 
```

找到实际路径后，说是“/path/to/previous/root/”，然后你可以像下面这样读取文件。

```
svn cat -r 409123 https://www.SVNURL.com/path/to/previous/root/file 
```

# jquery-mobile - 用于远程服务的 JQuery Mobile 登录表单（无服务器端访问）

> ID：10834737
> 
> 赞同：1
> 
> 时间：2012-05-31T13:35:29.667
> 
> 标签：jquery-mobile, login

我正在尝试创建我们在大学运行的服务的移动版本。问题是我没有任何服务器端访问权限。我所拥有的只是大学的授权，如果我知道如何访问该服务。我在 JQuery Mobile 中创建了界面，但现在它除了导航虚拟数据之外什么都不做。我的主要问题是此时的登录表单，这是代码：

```
 <body>
    <div data-role="page" id="login">
        <div data-role="header" data-theme="e">
            <h1>MobileApp</h1>
        </div>  

<div class="ui-body ui-body-c">
        <div data-role="content">
            <form method="post" rel="external" action="https://somedomain.com/passwordcheck">
                <ul data-role="listview" data-inset="true">
                    <li data-role="list-divider">Login</li>
                    <li data-role="fieldcontain" class="ui-hide-label">
                        <label for="name">User:</label>
                        <input id="username" class="inputB" type="text" name="x_username">
                    </li>

                    <li data-role="fieldcontain" class="ui-hide-label">
                        <label for="name">Password:</label>
                        <input id="password" class="inputB" type="text" name="x_password">
                    </li>
                    <li>
                        <div><button type="submit" value="Login" data-theme="b">Login</button></div>
                    </li>
                </ul>
            </form>
        </div>
    </div>
    </div>
</body> 
```

如您所见，我将用户和密码数据发布到“https://somedomain.com/passwordcheck”，如果数据正确，它会将我重定向到服务的“https://somedomain.com/index”页面。但这不是我想要的。我想要的是进行密码检查，但要打开我自己的移动#index页面。我知道我现在处理这一切都是错误的，但我似乎找不到正确的方法来做这件事。

我想我需要找到一种方法来捕获密码检查响应，然后以某种方式处理它（如果登录正确，则打开#index，如果不正确，则打开其他内容）而不打开，或者至少隐藏原始网页。非常感谢任何帮助。

# asp.net-mvc-3 - Vanity Url，读取输入的字符串而不是 int

> ID：10834738
> 
> 赞同：1
> 
> 时间：2012-05-31T13:35:41.620
> 
> 标签：asp.net-mvc-3, routing, actionresult

我正在尝试允许 Vanity Urls，但我遇到了一个问题，如果我输入

```
XXXX/User/Profile/Test 
```

代替

```
xxxx/User/Profile/224 
```

它无法读取字符串。

我当前的 ActionResult 如下：

```
public ActionResult Profile(int ID = -1, string VanityID = null)
    {
        if (VanityID == null)
        {
            ppUser viewerChoice = DB.ppUser_GetUserByPersonID(ID);
            return View(viewerChoice);
        }
        else
        {
            ppUser viewerChoice = DB.ppUser_GetUserByVanityID(VanityID);
            return View(viewerChoice);
        }
    } 
```

如果在 URL 中输入一个 int，它将采用 int Id，但如果输入一个字符串，则不会输入任何内容并抛出错误，因为 ID 被读取为 -1。

我也一直在尝试使用 2 个操作结果，如下所示：

```
public ActionResult Profile(int ID)
    {
            ppUser viewerChoice = DB.ppUser_GetUserByPersonID(ID);
            return View(viewerChoice);
    }

    public ActionResult Profile(string ID)
    {
        ppUser viewerChoice = DB.ppUser_GetUserByVanityID(ID);
        return View(viewerChoice);
    } 
```

但是当我尝试调用任一 ActionResult 时，它会向我抛出 AmbiguousMatchException 错误。

这就是 routes.Maproute 如果它也有帮助的话。

```
routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }, // Parameter defaults
            new { controller = @"[^\.]*" }, // Parameter constraints
            new string[] { typeof(MvcApplication).Namespace + ".Controllers" }
        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T10:25:07.230

我想你快到了。尝试为 id[设置约束：](http://stephenwalther.com/blog/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)

```
new { ID = @"\d+" } 
```

这将保证，如果您尝试访问 XXXX/User/Profile/Test，您的操作不会被命中，因为 Test 并不是真正的 id。

# javascript - 在 JavaScript 中，为什么在循环中创建函数会造成计算上的浪费的具体原因是什么？

> ID：10834740
> 
> 赞同：4
> 
> 时间：2012-05-31T13:35:46.900
> 
> 标签：javascript, loops, computation

在 JavaScript 中，为什么在循环中创建函数会造成计算上的浪费的具体原因是什么？

在 JavaScript the Good Parts 的第 39 页上，Douglas Crockford 指出，“避免在循环中创建函数。这可能会造成计算上的浪费”。我似乎无法弄清楚为什么在循环中创建函数会比在外部更浪费。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:39:57.507

因为您正在创建多个`Function`对象，而不是仅重用一个对象。

创建相同功能的示例...

```
for (var i = 0; i < 10; i++) {
    // v--creating identical function in each iteration.
    (function(j) {
        var el = document.createElement('a');
        el.onclick = function() { alert(j); };
        document.body.appendChild(el);
    })(i);
} 
```

重用命名函数的示例...

```
for (var i = 0; i < 10; i++) {
    var el = document.createElement('a');
      // ----------v---calling a reusable function
    el.onclick = createHandler(i);
    document.body.appendChild(el);
}

function createHandler(j) {
    return function() { alert(j); };
} 
```

这两个示例具有相同的结果，但第二个示例不需要在循环期间创建两个函数的开销。相反，它只创建一个处理程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:42:21.280

创建一个函数会占用大量资源。由于函数实际上是对象，因此代码每次都必须实际创建一个新的函数对象，不能只创建一次然后重用它。

在循环内创建一个函数通常意味着您将创建很多函数，而不仅仅是在循环外创建一个函数。

因此，如果您可以在循环外执行一次，则只需不在循环内执行资源密集型操作即可。当涉及到函数时，它们通常可以在循环之外创建，而无需更改代码的逻辑。

# java - 如何自动连接指定 SSID 的 WiFi？

> ID：10834741
> 
> 赞同：6
> 
> 时间：2012-05-31T13:35:51.647
> 
> 标签：java, android, android-wifi

有人可以帮我解决这个问题吗？

这是我的代码，`mWifi.enableNetwork(netID, true)`它无法启用网络并且无法自动连接到指定的网络。所以我想知道我在哪里犯了错误？

```
 public class WifiConnActivity extends Activity {
    /** Called when the activity is first created. */
    final String tag = "WifiConn:...";
    EditText txt;
    WifiManager mWifi;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mWifi = (WifiManager)getSystemService(Context.WIFI_SERVICE);

        txt = (EditText)findViewById(R.id.editText1);

        Button b1 = (Button)findViewById(R.id.B1);        
        b1.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View v)
            {

                if (mWifi.startScan())  //scan now
                {
                    Log.d(tag, "startScan()");

                    List<ScanResult> sRet = mWifi.getScanResults();  //scan results.

                    for (int i=0; i<sRet.size(); i++)
                    {
                        ScanResult retS = sRet.get(i); 
                        txt.append("resT: " + retS.SSID +" " + retS.BSSID + "\n");
                        Log.d(tag, "resT: " + retS.SSID +" " + retS.BSSID);

                        if (retS.SSID.equalsIgnoreCase("TEST"))
                        {
                            txt.append("Found: " + retS.SSID +" " + retS.BSSID + "\n");

                            WifiConfiguration wc = new WifiConfiguration();

                            wc.SSID = "\""+retS.SSID+"\"";
                            wc.BSSID = retS.BSSID;
                            wc.status = WifiConfiguration.Status.ENABLED;
                            wc.hiddenSSID = true;

                            int netID = mWifi.addNetwork(wc); // add network
                            txt.append("addNetwork: "+ Integer.toString(netID) +"\n");

                            if(mWifi.enableNetwork(netID, true)) // enable network, but cannot work???????????
                            {
                                txt.append("enableNetwork: true\n");
                            }
                        }
                    }

                }
            }

        });      
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:51:46.157

我认为您需要在`WifiConfiguration.KeyMgmt`WifiConfiguration 对象中添加一个。假设它是一个开放网络：

```
wc.allowedKeyManagement.set(WifiConfiguration.KeyMgmt.NONE); 
```

此外，请谨慎假设在您退出对`startScan()`. 在这种情况下，最好的办法是添加一个 BroadcastReceiver[`WifiManager.SCAN_RESULTS_AVAILABLE_ACTION`](http://developer.android.com/reference/android/net/wifi/WifiManager.html#SCAN_RESULTS_AVAILABLE_ACTION)并从前向添加您的所有代码`mWifi.getScanResults()`。`mWifi.reconnect()`一旦成功，您将需要添加调用`enableNetwork()`。

至于初始化你的`WifiConfiguration wc`，如果你能考虑我的帖子，我会很高兴[的](https://stackoverflow.com/q/10762533/1224741)。最后，另一个很好的答案在[这里](https://stackoverflow.com/q/8818290/1224741)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:51:38.100

尝试添加有关网络的剩余信息，例如允许的密码、密钥管理方案和 PSK（如果您正在使用）

其次，首先检查已配置的网络列表，以确保您不要尝试添加具有相同配置的另一个网络，因为这样做没有意义。

作为建议，不要 startScan() 并等待它完成。注册`SCAN_RESULTS_AVAILABLE_ACTION`并使用从广播接收器到您的活动的回调来处理这些结果。

# ruby - Michael Hartl Tutorial v. 3.2 Chapter 5.1 NoMethodError in Users#new Line 4

> ID：10834746
> 
> 赞同：0
> 
> 时间：2012-05-31T13:36:15.213
> 
> 标签：ruby

我是一个新手，我正在通过 Hartl 慢慢地工作。刚从第五章开始。到 5.1 并将新的样式代码添加到 application.html.erb 中，我得到“浏览器中的 Static_pages#home 中的 NoMethodError”。

这是终端读数：

```
Started GET "/static_pages/home" for 127.0.0.1 at 2012-05-31 14:02:03 +0100
Processing by StaticPagesController#home as HTML
  Rendered static_pages/home.html.erb within layouts/application (0.0ms)
Completed 500 Internal Server Error in 6ms

ActionView::Template::Error (undefined method `full_title' for #<#<Class:0x007f865b6a0160>:0x007f865b5faad0>):
    1: <!DOCTYPE html>
    2: <html>
    3: <head>
    4: <title><%= full_title(yield(:title)) %></title>
    5: <%= stylesheet_link_tag    "application", media: "all" %>
    6: <%= javascript_include_tag "application" %>
    7: <%= csrf_meta_tags %>
  app/views/layouts/application.html.erb:4:in `_app_views_layouts_application_html_erb__2520617125150382104_70107517560200'

  Rendered /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_trace.erb (2.6ms)
  Rendered /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.8ms)
  Rendered /Users/Lagaspi/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/actionpack-3.2.3/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (9.1ms) 
```

static_pages_controller

```
class StaticPagesController < ApplicationController

  def home
  end

  def help
  end

  def about
  end

  def contact
  end
end 
```

成功完成第 3 章没有任何改变。所以我回去，再次工作第 3 章，所有测试都通过绿色并且所有浏览器测试都正常，我跳回第 5 章。将 Hartls 新代码剪切并粘贴到 views/layouts/application.html.erb 中，保存文件，我得到相同的无方法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:42:47.173

看起来这个`full_title`助手是在[第 4 章](http://ruby.railstutorial.org/chapters/rails-flavored-ruby#top)开始时介绍的。

# php - 在 Hero Framework 主题中的 .thtml 文件中执行 php

> ID：10834747
> 
> 赞同：2
> 
> 时间：2012-05-31T13:36:18.387
> 
> 标签：php, html, frameworks, themes

有没有办法在 Hero Framework 的 thtml 文件中执行 php？

只需放置一个

```
<?php echo 'hello world';?> 
```

在 thtml 文件中不起作用。

有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:47:36.253

您必须使用一点`.htaccess`来确保将 html 文件解析为 PHP。

例如：

```
AddHandler application/x-httpd-php5 .html .htm 
```

但是，此命令取决于服务器设置，更多信息可以在[此处](http://www.velvetblues.com/web-development-blog/how-to-parse-html-files-as-php/)找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:45:48.347

我很好奇并做了一些谷歌搜索：

显然，Hero 框架使用**smarty**作为模板引擎，这……很有趣……（Excurse：smarty 现在看起来相当复杂，我知道它甚至在几年前在缓存处理方面做得很好。另一方面，它是您应用程序中的另一层，它是另一种要学习的方言，它是必须由 PHP 解释的代码）

smarty 强烈反对在模板中直接使用纯 php，您可以在此处阅读更多信息：

[聪明的文档](http://www.smarty.net/best_practices)

# wpf - 在表格中可视化 2D 数据

> ID：10834749
> 
> 赞同：2
> 
> 时间：2012-05-31T13:36:29.897
> 
> 标签：wpf, datagrid

我需要一些帮助，需要指出正确的方向。我正在创建一个应该显示二维数据的 WPF 应用程序。它应该像这样显示：

```
-------------------------
|y/x| 1 | 2 | 3 | 4 | 5 |
|  1| 1 | 2 | 3 | 4 | 5 |
|  2| 2 | 4 | 6 | 8 | 10|
|  3| 3 | 6 | 9 | 12| 15|
|  4| 4 | 8 | 12| 16| 20|
|  5| 5 | 10| 15| 20| 25|
------------------------- 
```

一些示例代码：XAML：

```
<Window x:Class="WpfApplication6.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        DataContext="{Binding RelativeSource={RelativeSource Self}}">
    <Grid>
        <!--Place control for 2d data here-->
    </Grid>
</Window> 
```

C＃：

```
 public partial class MainWindow : Window
    {
        string[,] values = new string[5,5];
        string[] x = new string[5];
        string[] y = new string[5];

        public MainWindow()
        {
            InitializeComponent();
            CreateArrays();
        }

        private void CreateArrays()
        {
            for (int i = 0; i < values.GetLength(0); i++)
            {
                for (int j = 0; j < values.GetLength(1); j++)
                {
                    values[i, j] = ((i+1) * (j+1)).ToString();
                }
            }

            for (int i = 0; i < x.GetLength(0); i++)
            {
                x[i] = (i+1).ToString();
            }

            for (int j = 0; j < y.GetLength(0); j++)
            {
                y[j] = (j+1).ToString();
            }

        }
    } 
```

所以第一行必须是 x 值，第一列是 y 值，其余的是值。请注意，左上角的单元格包含“y/x”。我不希望有任何可能对数据进行排序（例如单击标题）。我希望能够一次选择多行或多列以将数据复制到剪贴板。数据不得编辑。还有一些样式会很好，比如第一行和第一列必须有一些不同的背景颜色。

关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:55:14.673

尝试这个：

```
<Grid>
    <ItemsControl x:Name="itemscontrol">
        <ItemsControl.ItemsPanel>
            <ItemsPanelTemplate>
                <UniformGrid Columns="6" Rows="6"  />
            </ItemsPanelTemplate>
        </ItemsControl.ItemsPanel>
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <Grid>
                    <TextBlock Text="{Binding}" Margin="5" />
                </Grid>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Grid> 
```

并且有多种方法可以将数据输入其中 - 例如

```
public MainWindow()
{
    InitializeComponent();
    this.itemscontrol.ItemsSource = new[] {"x/y", "1","2","3","4","5",
                                            "1","1","2","3","4","5",
                                            "2","2","4","6","8","10",
                                            "3","3","6","9","12","15",
                                            "4","4","8","12","16","20",
                                            "5","5","10","15","20","25"};
} 
```

# jquery - Adsense 与 AJAX

> ID：10834751
> 
> 赞同：13
> 
> 时间：2012-05-31T13:36:32.400
> 
> 标签：jquery, ajax, adsense, ads

我读过[这个](https://stackoverflow.com/questions/6161806/desperately-need-a-solution-for-adsense-that-works-with-ajax)，[这个](https://stackoverflow.com/questions/435391/refresh-a-div-that-has-a-google-ad-inside-it#441425)和[这个](https://stackoverflow.com/questions/6394594/how-to-force-advert-to-show-on-ajax-loaded-page-adsense)，但我认为我的情况不同。每次进行 AJAX 调用时，我都不需要刷新广告。

我有一个页面叫它“mypage.php”。打开页面时，我将 Adsense 广告加载到第一个 div 中。我的第二个 div 是空的。

DOM 完全加载后，我发布了一个 AJAX 帖子。并将结果放入“lower_content”div。这会破坏 Adsense TOS 吗？

```
<body>
  <div id="adSense_content>
    <script> adsense script </script>
  </div>

  <div id="lower_content">
    empty in start
  </div>
</body> 
```

我的.js文件：

```
$(document).ready(function() {
  $.ajax({
    type: "POST",
    url: "/getit",
    success: function(data) {
            $("#lower_content").html(data);
        }
  });
} 
```

注意：为什么我在打开页面时不加载第二个内容？因为 AJAX 调用会在 6-7 秒内回复。当服务器负载很高时，响应甚至会在 10-15 秒内出现。为了不让访问者在空白页面等待，甚至从页面跳出。我在开始时向访问者显示布局，并在 AJAX 调用的响应到来时加载内容。

编辑：将广告放到空白页面上违反 Adsense TOS。但是我提到的页面在加载表格数据时是空的。使用 AJAX 加载完整表格后，页面将加载内容。但是在加载 html 页面时会放置广告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-27T19:48:03.920

默认的 google adsense 代码是这样的：

```
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- banner-name -->
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-12345678901234950"
     data-ad-slot="987654321"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> 
```

将代码分成 3 部分，使其适用于 ajax 加载的内容。

将 google 脚本包含在您页面的某处（例如在您的 <head> 中）一次。

```
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> 
```

将谷歌代码放在你的（ajax）内容中你想要横幅的地方

```
<ins class="adsbygoogle"
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-12345678901234950"
     data-ad-slot="987654321"></ins> 
```

在您的内容通过 ajax 更改后触发此功能。（不要忘记在页面加载时也触发此操作，以便在未通过 ajax 加载页面时显示广告。）

```
function displayGoogleAds(){
    $('ins').each(function(){
        (adsbygoogle = window.adsbygoogle || []).push({});
    });
} 
```

附言。我不确定谷歌是否会允许这样做，因为您稍微修改/更改了代码。但我目前正在以这种方式使用它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-02T10:28:24.800

做了一些更多的研究..你的问题没有简单的解决方案。

如果您的网站对大部分内容使用 AJAX，那么您可以考虑实施 Google Ajax-Crawling（又名 Hash-Bang）规范。这将确保 Google bot 和 Adsense bot 抓取您的 AJAX 内容。这将有助于相关广告和搜索结果。 [https://developers.google.com/webmasters/ajax-crawling/docs/specification](https://developers.google.com/webmasters/ajax-crawling/docs/specification)

或者您必须等到 Adsense for Ajax 程序重新启动。[https://developers.google.com/adsense-for-ajax/](https://developers.google.com/adsense-for-ajax/)

**更新：**经过更多研究后更改了答案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-14T23:39:31.040

不幸的是，页面[https://developers.google.com/adsense-for-ajax/](https://developers.google.com/adsense-for-ajax/)说 Google 不再接受 AdSense for AJAX 的新申请

# c# - ASP.net 中的虚荣配置文件 URL

> ID：10834761
> 
> 赞同：2
> 
> 时间：2012-05-31T13:36:58.247
> 
> 标签：c#, asp.net, asp.net-mvc-3, vanity-url

我正在 ASP.net 中创建一个应用程序，其中每个用户都有自己的个人资料，可以与他人共享。

他们个人资料的默认地址是：

```
www.domain.com/User/Profile/[UserID] 
```

当他们指定虚 URL 时，有人可以输入

```
www.domain.com/User/Profile/[Vanity] 
```

并被定向到同一页面。配置文件页面仅与一个函数一起使用，该函数在控制器中使用具有以下功能的 UserID：

```
 public ActionResult Profile(int id)
    {
        ppUser viewerChoice = DB.User_GetUserByPersonID(id);

        return View(viewerChoice);
    } 
```

但是，当我添加另一个带字符串的

```
 public ActionResult Profile(string vanity)
    {
        ppUser viewerChoice = DB.User_GetUserByVanity(vanity);

        return View(viewerChoice);
    } 
```

这会导致 AmbiguousMatch 异常。我将如何确保它调用正确的函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:43:55.550

你有几个选择。

*   您只能捕获字符串参数并读取它，如果它是一个数字，则将其转换为 int。
*   您可以配置2个单独的路由并使用正则表达式来识别参数并相应地处理它
*   对 int 和 string 参数使用单独的操作。

我会非常小心您的方法（相同的操作，不同的参数），因为用户可能会为虚 URL 选择 int（与用户 ID 相同的格式）。你会如何解决这样的冲突？

# jquery - jquery xml解析方法

> ID：10834763
> 
> 赞同：0
> 
> 时间：2012-05-31T13:37:03.337
> 
> 标签：jquery, xml, parsing, highcharts

我们正在努力使用 highcharts 创建一个演示。我们计划以 xml 格式获取数据。这个 xml 的结构不会被修复。基本上 XML 应该以表格格式表示原始数据。因此，如果一个表包含 A、B、C、D 列，那么 xml 将包含一个节点，该节点将代表表中的一行。要在 jquery 中解析 XML，您需要知道标签名称（据我所知），但在这种情况下，我可能不知道标签名称是什么，因为在一种情况下，表可能包含列 A、B、C、D 和在其他情况下，它可能包含列 T、U、V、W、X、Y、Z。那么如何处理这样的xml并向图表提供数据呢？欢迎任何指导，建议。:)

```
e.g. in one case xml wil be - 
<record>-----there will be many such records
<A>...</A>
<B>...</B>
<C>...</C>
</record>
.
.
.
and in other case it can be - 

<record>-----there will be many such records
<u>...</u>
<v>...</v>
<w>...</w>
</record>
.
. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:52:05.633

听起来您可以只使用`$('record').children()`获取子节点的 jQuery 集合，无论它们是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:02:10.977

好的免责声明：我不知道您是否可以为此使用 jQuery，或者它是否可以工作。所以我将这个问题作为一个一般的 DOM 遍历问题来回答，好像它*确实*有效，那么这将适用。

**据我所知：** 您不需要任何标签名称，除非是父标签名或顶级标签名。

jQuery 有很多非常有用和高级的 DOM 遍历方法可以提供帮助 - 例如：

```
$.children();
$.siblings();
$.next();
$.prev();
$.parent();
$.parents();
$.closest();
$.andSelf();
$.not(); 
```

如果您知道要查找的内容，该`$.find('selector');`方法也非常好。

所以一个例子可能是：

```
var r1 = $('record').children(); //returns all child nodes of all <record> tags
var r2 = $('record'); //gets all records
var r3 = r2.children(); //the children of other records 
```

不确定这与您的用例有多接近，但您可以在此处阅读有关 DOM 遍历的更多信息：http: [//api.jquery.com/category/traversing/](http://api.jquery.com/category/traversing/)

希望这可以帮助

# textmate - 在哪里可以找到 Sublime2（或 textMate？）的范围列表

> ID：10834765
> 
> 赞同：56
> 
> 时间：2012-05-31T13:37:10.790
> 
> 标签：textmate, sublimetext

在 .tmTheme 文件中，范围键定义了如何突出显示元素：

```
 <dict>
        <key>name</key>
        <string>HTML: Attribute Values</string>
        <key>scope</key>
        <string>meta.tag string.quoted, meta.tag string.quoted constant.character.entity</string>
        <key>settings</key>
        <dict>
            <key>background</key>
            <string>#FFFFFF</string>
            <key>fontStyle</key>
            <string></string>
            <key>foreground</key>
            <string>#2aa198</string>
        </dict>
    </dict> 
```

我在哪里可以找到这些应用程序支持的所有范围的列表，以便我可以创建自己的样式？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2014-02-20T17:09:15.603

*[从TextMate 语言语法指南](http://manual.macromates.com/en/language_grammars)*的“命名约定”部分的当前版本复制/粘贴（但将 HTML 转换为 Markdown）：

*   `comment`——征求意见。
    *   `line`— 行注释，我们进一步专门化，以便可以从范围中提取注释开始字符的类型。
        *   `double-slash`—`// comment`
        *   `double-dash`—`-- comment`
        *   `number-sign`—`# comment`
        *   `percentage`—`% comment`
        *   *字符*— 其他类型的行注释。
    *   `block`— 多行注释，例如`/* … */`和`<!-- … -->`。
        *   `documentation`— 嵌入式文档。
*   `constant`——各种形式的常数。
    *   `numeric`— 代表数字的那些，例如`42`, `1.3f`, `0x4AB1U`.
    *   `character`— 代表字符的那些，例如`&lt;`, `\e`, `\031`.
        *   `escape`- 转义序列`\e`就像`constant.character.escape`.
    *   `language`— 语言提供的常量（通常）是“特殊的”，例如`true`, `false`, `nil`, `YES`,`NO`等。
    *   `other`— 其他常量，例如 CSS 中的颜色。
*   `entity`— 实体是指文档的较大部分，例如章节、类、函数或标签。我们没有将整个实体限定为`entity.*`（我们`meta.*`用于此）。但我们确实使用`entity.*`较大实体中的“占位符”，例如，如果实体是章节，我们将使用`entity.name.section`章节标题。
    *   `name`——我们正在命名更大的实体。
        *   `function`— 函数的名称。
        *   `type`— 类型声明或类的名称。
        *   `tag`— 标签名称。
        *   `section`— 名称是部分/标题的名称。
    *   `other`——其他实体。
        *   `inherited-class`— 超类/基类名称。
        *   `attribute-name`— 属性的名称（主要在标签中）。
*   `invalid`——“无效”的东西。
    *   `illegal`— 非法，例如 HTML 中的 & 号或小于号字符（不是实体/标签的一部分）。
    *   `deprecated`— 对于已弃用的东西，例如使用已弃用的 API 函数或使用带有严格 HTML 的样式。
*   `keyword`- 关键字（当这些不属于其他组时）。
    *   `control`— 主要与流控制有关，如`continue`, `while`,`return`等。
    *   `operator`— 运算符可以是文本（例如`or`）或字符。
    *   `other`——其他关键词。
*   `markup`— 这适用于标记语言，通常适用于较大的文本子集。
    *   `underline`——带下划线的文字。
        *   `link`- 这是用于链接的，为了方便起见`markup.underline`，如果没有专门针对的主题规则，`markup.underline.link`那么它将继承下划线样式。
    *   `bold`— 粗体文本（强烈且相似的文本最好从该名称派生）。
    *   `heading`— 节标题。可选地提供标题级别作为下一个元素，例如`markup.heading.2.html`在`<h2>…&lt;/h2>`HTML 中。
    *   `italic`— 斜体文本（强调的和类似的文本最好源自该名称）。
    *   `list`— 列出项目。
        *   `numbered`— 编号列表项。
        *   `unnumbered`— 未编号的列表项。
    *   `quote`— 引用（有时是块引用）文本。
    *   `raw`— 逐字逐句的文本，例如代码清单。通常拼写检查是禁用的`markup.raw`。
    *   `other`— 其他标记结构。
*   `meta`— 元范围通常用于标记文档的较大部分。例如，声明函数的整行将是`meta.function`，子集将是`storage.type`,等`entity.name.function`，`variable.parameter`并且只有后者会被样式化。有时，范围的元部分仅用于限制样式化的更通用元素，但大多数情况下元范围用于范围选择器中以激活捆绑项目。例如，在 Objective-C 中，类的接口声明和实现有一个元作用域，允许相同的选项卡触发器根据上下文进行不同的扩展。
*   `storage`——与“存储”有关的事情。
    *   `type`— 某物的类型，`class`, `function`, `int`,`var`等。
    *   `modifier`— 存储修饰符，如`static`, `final`,`abstract`等。
*   `string`——字符串。
    *   `quoted`— 引用的字符串。
        *   `single`— 单引号字符串：`'foo'`.
        *   `double`— 双引号字符串：`"foo"`.
        *   `triple`— 三重引号字符串：`"""Python"""`.
        *   `other`— 其他类型的引用：`$'shell'`, `%s{...}`.
    *   `unquoted`— 对于诸如 here-docs 和 here-strings 之类的东西。
    *   `interpolated`— 被“评估”的字符串：`date`, `$(pwd)`.
    *   `regexp`— 正则表达式：`/(\w+)/`.
    *   `other`— 其他类型的字符串（应该很少使用）。
*   `support`— 框架或库提供的东西应该在下面`support`。
    *   `function`— 框架/库提供的功能。例如`NSLog`在 Objective-C 中是`support.function`.
    *   `class`— 当框架/库提供类时。
    *   `type`— 由框架/库提供的类型，这可能仅用于从 C 派生的语言，它具有`typedef`(and `struct`)。大多数其他语言将引入新类型作为类。
    *   `constant`— 框架/库提供的常量（魔法值）。
    *   `variable`— 框架/库提供的变量。例如`NSApp`在 AppKit 中。
    *   `other`- 以上应该是详尽无遗的，但对于其他一切使用`support.other`.
*   `variable`——变量。并非所有语言都允许轻松识别（并因此标记）这些。
    *   `parameter`— 当变量被声明为参数时。
    *   `language`— 保留的语言变量，如`this`, `super`,`self`等。
    *   `other`— 其他变量，例如`$some_variables`.

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-02-16T05:39:03.623

编辑：*[Phrogz 的回答](https://stackoverflow.com/a/21914803)比我在这里的回答好，因为它更准确地回答了所提出的问题。我建议你检查一下！*

* * *

不幸的是，似乎没有任何如此全面的清单。

但是，如果您`Shift+Ctrl+P`在 SublimeText 2 中按下，屏幕底部的状态栏将显示适用于紧跟光标位置的字符的所有范围键的完整列表。

您可以使用此方法从 SublimeText 中找到您需要的任何内容的范围键。

**更新：**下面的评论者[Will](https://stackoverflow.com/users/1185698/will)和[fregante](https://stackoverflow.com/users/288906/fregante)指出 SublimeText 3 已经改变了。
对于 Windows/Linux，`Shift+Ctrl+Alt+P`是适当的命令，而在 Mac 上，命令是`⌘⌥P`.

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2013-08-16T13:12:05.193

您可以使用几个崇高的文本包来执行此操作。

## 安装包控制

转到[https://sublime.wbond.net/](https://sublime.wbond.net/)并单击“安装”并按照说明安装 sublime text 包管理器。

## 显示当前范围的包

我知道几个崇高的文本包，它们在状态栏中显示当前范围。

*   [ScopeStatus](https://sublime.wbond.net/packages/ScopeStatus)（仅限 Sublime Text 2）
*   [范围猎人](https://sublime.wbond.net/packages/ScopeHunter)
*   [Scope​Always](https://sublime.wbond.net/packages/ScopeAlways)（由我创建）
*   [CurrentScope](https://sublime.wbond.net/packages/Current%20Scope)（仅限 Sublime Text 2）

## 安装上述软件包之一

要使用 sublime text 包管理器安装包，请打开 sublime text 的命令面板 ( `ctrl+shift+p`) 并选择命令`Package Control: Install Package`，然后选择上述包之一。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-06-01T05:05:27.137

范围来自 tmLanguage 文件，每种语法都不同。[您可以在http://manual.macromates.com/en/language_grammars](http://manual.macromates.com/en/language_grammars)找到范围命名约定列表

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-12-18T19:20:58.450

除了已经发布的出色答案之外， [TMTheme 编辑器的](http://tmtheme-editor.herokuapp.com/stats)**Scopes Stats**选项卡还显示了一个有用的列表，其中列出了 236 个颜色主题中的所有范围，最常用的范围位于顶部。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-09-28T14:09:24.433

请参阅下面 sublime 网站上的参考指南：

*   [https://www.sublimetext.com/docs/3/scope_naming.html](https://www.sublimetext.com/docs/3/scope_naming.html)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-11-22T08:23:33.500

每种语法都可以命名自己的范围，但它们都基于[此列表](https://www.sublimetext.com/docs/3/scope_naming.html)。例如，您的语法可能会指定这`function`是`storage.type.function.js`范围。如果您的主题直接支持它，它将使用该颜色，否则它将回退到最后`storage.type.function`尝试在您的主题中找到一种颜色。`storage.type``storage`

由于您正在创建自己的样式，因此我建议您安装[ScopeStatus](https://github.com/willurd/ScopeStatus)（`CTRL`+ `SHIFT`+ `P`，然后是 Install Package，然后是 ScopeStatus）。使用您想要专注的语法查看文件，执行`CTRL`++ ，然后“范围`SHIFT`：`P`在状态栏中显示”。现在您可以将光标移动到各种元素以查看它们提供的范围，您可以使用它们来定义颜色。

您可以检查您的主题以查看它们的作用，转到“首选项->浏览包”以打开存储包的文件夹。我安装了“主题 - Phoenix”，它下面有一个文件夹和一个“配色方案”文件夹。在其中一个主题文件中，我发现了 16 种用于各种范围的颜色：

```
keyword.operator.class, constant.other, source.php.embedded.line
variable, support.other.variable, string.other.link, entity.name.tag, entity.other.attribute-name, meta.tag, declaration.tag
constant.numeric, constant.language, support.constant, constant.character, variable.parameter, punctuation.section.embedded, keyword.other.unit
entity.name.class, entity.name.type.class, support.type, support.class
string, constant.other.symbol, entity.other.inherited-class, markup.heading
keyword.operator, constant.other.color
entity.name.function, meta.function-call, support.function, keyword.other.special-method, meta.block-level
keyword, storage, storage.type, entity.name.tag.css
invalid
meta.separator
invalid.deprecated
markup.inserted.diff, markup.deleted.diff, meta.diff.header.to-file, meta.diff.header.from-file
markup.inserted.diff, meta.diff.header.to-file
markup.deleted.diff, meta.diff.header.from-file
meta.diff.header.from-file, meta.diff.header.to-file
meta.diff.range 
```

不同的主题可能有不同的设置，第一组中的keyword.operator.class可能有自己的颜色或与meta.diff.range相同。

# android - 不同的制造商图标 - android mapview

> ID：10834766
> 
> 赞同：0
> 
> 时间：2012-05-31T13:37:20.717
> 
> 标签：android, icons, overlay, android-mapview, markers

```
public class MapOverlay extends ItemizedOverlay<OverlayItem> {
    ....
    public MapOverlay(Drawable defaultMarker, Context context) {
        //super(defaultMarker);
        super(boundCenterBottom(defaultMarker));
    }
    .... 
```

}

MapOverlay 类可作为构造函数参数绘制。在地图上绘制点时是否可以更改该图像？我想做的是用不同的图标图像编写标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:38:53.240

```
Drawable marker = context.getResources().getDrawable(R.drawable.youricon); 
```

# haskell - 如何在管道中使用导管下降功能？

> ID：10834773
> 
> 赞同：9
> 
> 时间：2012-05-31T13:37:53.300
> 
> 标签：haskell, pipe, conduit

我有一个简单的任务——从一个文件中读取一堆行并对每一行做一些事情。除了第一个 - 这是一些被忽略的标题。

所以我想我会尝试管道。

```
printFile src = runResourceT $ CB.sourceFile src =$= 
    CT.decode CT.utf8 =$= CT.lines =$= CL.mapM_ putStrLn 
```

凉爽的。

所以现在我只想删除第一行......而且似乎有一个功能 -

```
printFile src = runResourceT $ CB.sourceFile src =$= 
    CT.decode CT.utf8 =$= CT.lines =$= drop 1 =$= CL.mapM_ putStrLn 
```

嗯-但现在我注意到 drop 具有类型签名`Sink a m ()`。有人建议我可以将 Monad 实例用于管道并使用 drop 有效地删除一些元素 - 所以我尝试了这个：

```
drop' :: Int -> Pipe a a m ()
drop' n = do
  CL.drop n
  x <- await
  case x of 
    Just v -> yield v
    Nothing -> return () 
```

哪个不进行类型检查，因为管道的 monad 实例仅适用于相同类型的管道 - 接收器的输出为 Void，所以我不能这样使用它。

我快速浏览了管道和管道核心，我注意到管道核心具有我预期的功能，管道是一个最小的库，但文档显示了它是如何实现的。

所以我很困惑-也许我缺少一个关键概念..我看到了这个功能

```
sequence ::  Sink input m output -> Conduit input m output 
```

但这似乎不是正确的想法，因为输出值为 ()

```
CL.sequence (CL.drop 1) :: Conduit a m () 
```

我可能会回去使用lazy-io，因为我真的不需要任何流媒体——但我很想看看正确的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T15:21:19.143

首先，简单的回答：

```
... =$= CT.lines =$= (CL.drop 1 >> CL.mapM_ putStrLn) 
```

更长的解释：实际上有两种不同的方式可以实现`drop`。`n`无论哪种方式，它都会首先从输入中删除元素。接下来有两种选择：

*   说完成了
*   开始从输入流中输出所有剩余的项目

前一种行为是 a`Sink`将执行的（以及我们`drop`实际执行的），而后者是 a 的行为`Conduit`。实际上，您可以通过一元组合从前者生成后者：

```
dropConduit n = CL.drop n >> CL.map id 
```

然后你可以`dropConduit`像你在开始时描述的那样使用。这是展示一元组合和融合之间差异的好方法；前者允许两个函数对同一个输入流进行操作，而后者允许一个函数向另一个函数提供一个流。

我没有进行基准测试，但我相当肯定一元组合会更有效率。

# xcode - 从命令行运行时调试 XCode 内存问题

> ID：10834776
> 
> 赞同：0
> 
> 时间：2012-05-31T13:38:06.603
> 
> 标签：xcode, memory, crash, environment, xcodebuild

我正在尝试在我的应用程序中调试标准的普通“已释放对象的校验和不正确 - 对象可能在被释放后被修改”内存问题。我非常熟悉查找原因的工具（保护 malloc 等），并且过去在 XCode UI 中成功地做到了这一点。

但是我遇到的问题是这个内存问题只发生在 xcodebuild 命令行工具创建的构建中，所以我不能使用 XCode UI 复选框。当我通过 Xcode UI 运行我的程序时，我尝试设置复选框（在 Diagnostics->Memory Management 下的方案中）并查看效果（非常慢的性能），但不幸的是，这里从来没有出现过这个问题。然后我返回并从 xcodebuild-built 二进制文件运行我的程序并出现问题，但性能恢复正常，这意味着在此构建期间没有使用任何 UI 标志。

在运行我的程序之前，我尝试设置一些环境变量，即：

```
MallocGuardEdges=YES
NSZombieEnabled=YES
MallocScribble=YES 
```

但是当我从命令行运行它时，我的 xcodebuild 构建的二进制文件仍然没有影响。

苹果文档似乎暗示我的程序需要使用 GuardMalloc 库支持构建，但是当我在 XCode UI 中设置复选框后使用 xcodebuild 构建程序时，大小没有不同，所以也许我需要在其他地方更改设置为了将这种支持添加到我的二进制文件中？

更新：更正了设置环境变量的命令。

# c# - 使用 RouteValueDictionary 重新路由到视图会导致许多重定向...MVC3

> ID：10834778
> 
> 赞同：0
> 
> 时间：2012-05-31T13:38:11.237
> 
> 标签：c#, asp.net-mvc-3

当会话过期时，我想将用户重定向回登录页面。所以我添加了一个类并从 ActionFilterAttribute 继承，所以我可以随时检查即将执行的操作。作为测试，我将此代码放入：

```
 public class SessionFilters : ActionFilterAttribute
 {
     public override void OnActionExecuting(ActionExecutingContext filterContext)
     {
          var defaults = new RouteValueDictionary {{"Controller", "Home"}, {"Action", "About"}};
          filterContext.Result = new RedirectToRouteResult(defaults);
          base.OnActionExecuting(filterContext);
      }
  } 
```

如您所见，我强制重定向到 About 视图，但在浏览器中出现以下错误：

```
 The webpage at http://localhost:58494/Home/About has resulted in too many redirects.
  Clearing your cookies for this site or allowing third-party cookies may fix the 
  problem. If not, it is possibly a server configuration issue and 
  not a problem with your computer. 
```

如何使用此方法正确重定向到另一个视图？谢谢

**更新**没关系。我有一个荷马辛普森时刻。我定义的是一个无限循环，所以浏览器就像“忘记这个”。代码正在运行..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:28:15.627

确保您没有使用`[SessionFilters]`属性装饰整个 HomeController，而仅使用需要重定向到的操作来装饰 about。如果你用动作过滤器装饰了整个控制器，那么显然这个过滤器适用于所有动作，包括 About 和无限重定向循环。

# php - 在现有语句中添加联接

> ID：10834782
> 
> 赞同：0
> 
> 时间：2012-05-31T13:38:21.587
> 
> 标签：php, mysql, join, inner-join

我有一个带有多个连接的 SQL 语句，它完全没有任何问题

```
$sql = "SELECT ni.*, GROUP_CONCAT(DISTINCT newsletter_item_receivers.value ORDER BY newsletter_item_receivers.value) AS receivers, nf.*, GROUP_CONCAT(DISTINCT nm.mailgroup_name ORDER BY nm.mailgroup_name) AS mailgroups
        FROM newsletter_items ni
        INNER JOIN newsletter_fields nf ON (nf.field_letter_uid = ni.letter_id)                    
        LEFT JOIN newsletter_item_receivers ON (newsletter_item_receivers.letter_id = ni.letter_id)
        INNER JOIN newsletter_mailgroups nm ON (FIND_IN_SET(nm.mailgroup_id, newsletter_item_receivers.value))            
        WHERE nf.field_name = 'letter_headline' AND ni.template = '". $template ."' AND deleted = 0
        GROUP BY ni.letter_id 
```

我想要的是加入来自 newsletter_clickstat 的数据，其中包含有关特定时事通讯上链接的 ifo（例如链接上的点击次数）。

我试图插入

```
LEFT JOIN newsletter_clickstat cs ON (cs.letter_id = ni.letter_id) 
```

但这并没有做任何事情

解决了：

```
 SELECT ni.*, GROUP_CONCAT(DISTINCT newsletter_item_receivers.value ORDER BY newsletter_item_receivers.value) AS receivers, nf.*, GROUP_CONCAT(DISTINCT nm.mailgroup_name ORDER BY nm.mailgroup_name) AS mailgroups, cs.*
    FROM newsletter_items ni
    INNER JOIN newsletter_fields nf ON (nf.field_letter_uid = ni.letter_id)                    
    LEFT JOIN newsletter_item_receivers ON (newsletter_item_receivers.letter_id = ni.letter_id)
    INNER JOIN newsletter_mailgroups nm ON (FIND_IN_SET(nm.mailgroup_id, newsletter_item_receivers.value)) 
    LEFT JOIN newsletter_clickstat cs ON (cs.letter_id = ni.letter_id)                 
    WHERE nf.field_name = 'letter_headline' AND ni.template = '". $template ."' AND deleted = 0
    GROUP BY ni.letter_id 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:09:11.590

（*升级到答案*）

您还需要`newsletter_clickstat`在结果集中选择您想要的列...请记住，您正在执行分组操作，因此需要应用聚合函数或更改您执行分组的列。

# c++ - 将浮点数转换为 LPCWSTR

> ID：10834786
> 
> 赞同：2
> 
> 时间：2012-05-31T13:38:35.497
> 
> 标签：c++, winapi

所以我有，让我们说

```
float x; 
```

我有

```
 LPCWSTR message=L"X is"; 
```

如何使用消息创建 LPCWSTR

> “X 是 [x]”

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:43:19.060

你可以使用[`wstringstream`](http://en.cppreference.com/w/cpp/io/basic_stringstream)：

```
#include <string>
#include <sstream>
#include <iostream>

int main()
{
    float x = 0.1f;
    std::wstringstream s;
    s << L"X is " << x;
    std::wstring ws = s.str();
    std::wcout << ws << "\n";

    return 0;
} 
```

`LPCWSTR`并在需要时从中创建一个，或者只使用`std::wstring`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T13:41:16.543

您将使用类似`[wsprintf()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647550%28v=vs.85%29.aspx)`或更现代（和安全）的替代品，例如`[StringCbPrintf()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms647510%28v=vs.85%29.aspx)`.

关键是您不能只是“转换”，您需要逐个字符地*构建*字符串，即浮点数的文本表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:42:30.387

怎么用`_vsnwprintf`

标题

> `<wchar.h> <stdarg.h>`

[参考](http://msdn.microsoft.com/en-us/library/aa273401%28v=VS.60%29.aspx)

# oracle - 子查询分解：相互内连接

> ID：10834789
> 
> 赞同：0
> 
> 时间：2012-05-31T13:38:46.980
> 
> 标签：oracle, view, oracle11g, subquery-factoring

我有四个 WITH 子句。我想知道是否可以在它们之间使用内部连接。

我在网上搜索，我找不到与此相关的任何内容。

甲骨文版本：11g

****** 编辑 ******

 **```
WITH
    GETDATABYDAY AS
    (
        select column1, column2
        from table1 
        where sales > 2000
     )
    SELECT
      column1,
      column2
    FROM
      GETDATABYDAY;

WITH
    GETDATABYDAY1 AS
    (
        select column3, column2
        from table1 
        where date between 'date1' and 'date2'
    )
    SELECT
        column3,
        column2
    FROM
        GETDATABYDAY1;

Assume that there are two more WITH named: GETDATABYDAY2 and GETDATABYDAY3 
```

是否可以在所有 GETDATABYDAY、GETDATABYDAY1、GETDATABYDAY2 和 GETDATABYDAY3 上使用内部联接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:56:29.690

像这样的东西会起作用：

```
with first_cte as ( 
    select ...
    from ...
), second_cte as (
    select ...
    from first_cte
      join some_table on ...
), third_cte as (
    select ...
    from ...
) fourth_cte as (
    select ...
    from some_other_table
      join second_cte on ...
) 
select ..
from fourth_cte
   join third_cte on .... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:40:14.793

我认为它行不通，因为每个`with clause` 都是完全不同的查询的一部分。

您可以创建`db views`并使用它们而不是 with 子句。**

# hibernate - 休眠一对多单向关联，从父母中选择孩子？

> ID：10834795
> 
> 赞同：1
> 
> 时间：2012-05-31T13:39:07.923
> 
> 标签：hibernate

我对 Hibernate 一对多单向关联有疑问。

```
class Parent{
  int id;
  set <Child> children;
}

class Child{
  int id;
  int name;
  int birthday;
} 
```

父.hbm.xml

```
<hibernate-mapping>
 <class name="Parent" table="parent"/>
 <id name="id" column="id_parent"/>
 <set name="children" inverse="false" cascade="all">
   <key column="id_parent"/>
   <one-to-many class="Child"/>
 </set>

</hibernate-mapping> 
```

Child.hbm.xml

```
<hibernate-mapping>
     <class name="Child" table="parent"/>
     <id name="id" column="id_child"/>
     <property = "birthday"/>    
     <property="name"/>
    </hibernate-mapping> 
```

在映射文件中，我通过设置 inverse="false" 来使用一对多的单向关联。

如何根据姓名、生日和父母 ID 信息选择合适的孩子？

最好的问候谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T17:40:56.273

```
select child from Parent p inner join p.children child
where p.id = :parentId and child.name = :name and child.birthday = :birthday 
```

[在优秀的Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql)中阅读 HQL 。

# javascript - 验证字符串是否为正整数

> ID：10834796
> 
> 赞同：236
> 
> 时间：2012-05-31T13:39:15.610
> 
> 标签：javascript

我想要最简单的故障安全测试来检查 JavaScript 中的字符串是否为正整数。

`isNaN(str)`为所有类型的非整数值返回 true，并`parseInt(str)`为浮点字符串返回整数，例如“2.5”。而且我也不想使用一些 jQuery 插件。

* * *

## 回答 #1

> 赞同：347
> 
> 时间：2012-05-31T13:42:08.480

给你两个答案：

*   基于解析

*   正则表达式

请注意，在这两种情况下，我都将“正整数”解释为 include `0`，即使`0`它不是正数。如果您想禁止，我会附上注释`0`。

### 基于解析

如果您希望它是合理值范围内的规范化十进制整数字符串，您可以这样做：

```
function isInDesiredForm(str) {
    var n = Math.floor(Number(str));
    return n !== Infinity && String(n) === str && n >= 0;
} 
```

或者如果你想允许空格和前导零：

```
function isInDesiredForm(str) {
    str = str.trim();
    if (!str) {
        return false;
    }
    str = str.replace(/^0+/, "") || "0";
    var n = Math.floor(Number(str));
    return n !== Infinity && String(n) === str && n >= 0;
} 
```

实时测试台（不处理前导零或空格）：

```
function isInDesiredForm(str) {
    var n = Math.floor(Number(str));
    return n !== Infinity && String(n) === str && n >= 0;
}
function gid(id) {
    return document.getElementById(id);
}
function test(str, expect) {
    var result = isInDesiredForm(str);
    console.log(
        str + ": " +
        (result ? "Yes" : "No") +
        (expect === undefined ? "" : !!expect === !!result ? " <= OK" : " <= ERROR ***")
    );
}
gid("btn").addEventListener(
    "click",
    function() {
        test(gid("text").value);
    },
    false
);
test("1", true);
test("1.23", false);
test("1234567890123", true);
test("1234567890123.1", false);
test("0123", false); // false because we don't handle leading 0s
test(" 123 ", false); // false because we don't handle whitespace
```

```
<label>
  String:
  <input id="text" type="text" value="">
<label>
<input id="btn" type="button" value="Check">
```

实时测试台（*处理*前导零和空格）：

```
function isInDesiredForm(str) {
    str = str.trim();
    if (!str) {
        return false;
    }
    str = str.replace(/^0+/, "") || "0";
    var n = Math.floor(Number(str));
    return String(n) === str && n >= 0;
}
function gid(id) {
    return document.getElementById(id);
}
function test(str, expect) {
    var result = isInDesiredForm(str);
    console.log(
        str + ": " +
        (result ? "Yes" : "No") +
        (expect === undefined ? "" : !!expect === !!result ? " <= OK" : " <= ERROR ***")
    );
}
gid("btn").addEventListener(
    "click",
    function() {
        test(gid("text").value);
    },
    false
);
test("1", true);
test("1.23", false);
test("1234567890123", true);
test("1234567890123.1", false);
test("0123", true);
test(" 123 ", true);
```

```
<label>
  String:
  <input id="text" type="text" value="">
<label>
<input id="btn" type="button" value="Check">
```

如果您想禁止`0`，只需更改`>= 0`为`> 0`. （或者，在允许前导零的版本中，删除`|| "0"`就`replace`行了。）

这是如何工作的：

1.  在允许空格和前导零的版本中：

*   `str = str.trim();`删除任何前导和尾随空白。
*   `if (!str)`捕获一个空白字符串并返回，其余的工作没有意义。
*   `str = str.replace(/^0+/, "") || "0";`从字符串中删除所有前导 0 - 但如果导致空白字符串，则恢复单个 0。

2.  `Number(str)`：转换`str`为数字；这个数字很可能有一个小数部分，或者可能是`NaN`。

3.  `Math.floor`：截断数字（切掉任何小数部分）。

4.  `String(...)`：将结果转换回正常的十进制字符串。对于非常大的数字，这将采用科学记数法，这可能会破坏这种方法。（我不太清楚拆分在哪里，[详细信息在规范](http://www.ecma-international.org/ecma-262/7.0/index.html#sec-tostring-applied-to-the-number-type)中，但是对于整数，我相信它已经超过 21 位[到那时数字变得非常不精确，如 IEEE-754双精度数只有大约 15 位精度..)

5.  `... === str`：将其与原始字符串进行比较。

6.  `n >= 0`: 看看是不是阳性。

请注意，对于 input `"+1"`、任何在该阶段未转换为相同科学计数法的科学计数法输入`String(...)`，以及 JavaScript 使用的数字类型（IEEE-754 双精度二进制浮点） ，这都会失败无法准确地表示哪些解析更接近于与给定值不同的值（其中包括超过 9,007,199,254,740,992 的许多整数；例如，`1234567890123456789`将失败）。前者很容易解决，后两者就不太容易了。

### 正则表达式

另一种方法是通过正则表达式测试字符串的字符，如果您的目标是只允许（比如说）一个可选`+`的，后跟一个`0`或一个普通十进制格式的字符串：

```
function isInDesiredForm(str) {
    return /^\+?(0|[1-9]\d*)$/.test(str);
} 
```

现场测试台：

```
function isInDesiredForm(str) {
    return /^\+?(0|[1-9]\d*)$/.test(str);
}
function gid(id) {
    return document.getElementById(id);
}
function test(str, expect) {
    var result = isInDesiredForm(str);
    console.log(
        str + ": " +
        (result ? "Yes" : "No") +
        (expect === undefined ? "" : !!expect === !!result ? " <= OK" : " <= ERROR ***")
    );
}
gid("btn").addEventListener(
    "click",
    function() {
        test(gid("text").value);
    },
    false
);
test("1", true);
test("1.23", false);
test("1234567890123", true);
test("1234567890123.1", false);
test("0123", false); // false because we don't handle leading 0s
test(" 123 ", false); // false because we don't handle whitespace
```

```
<label>
  String:
  <input id="text" type="text" value="">
<label>
<input id="btn" type="button" value="Check">
```

这是如何工作的：

1.  `^`: 匹配字符串的开头

2.  `\+?`: 允许一个可选的`+`（如果你不想的话，删除它）

3.  `(?:...|...)`：允许这两个选项之一（不创建捕获组）：

4.  `(0|...)`: 允许`0`自己...

5.  `(...|[1-9]\d*)`: ...或一个以非数字开头`0`并后跟任意数量的十进制数字的数字。

6.  `$`: 匹配字符串的结尾。

如果你想禁止`0`（因为它不是正数），正则表达式就变成了just `/^\+?[1-9]\d*$/`（例如，我们可以失去我们需要允许的交替`0`）。

如果要允许前导零（0123、00524），则只需将替换替换`(?:0|[1-9]\d*)`为`\d+`

```
function isInDesiredForm(str) {
    return /^\+?\d+$/.test(str);
} 
```

如果要允许空格，请`\s*`在 之后`^`和`\s*`之前添加`$`。

将其转换为数字时的注意事项：在现代引擎上使用`+str`或`Number(str)`执行它可能会很好，但较旧的引擎可能会以非标准（但以前允许）的方式扩展这些引擎，即前导零表示*八进制*（以 8 为基数），例如“010” => 8。验证数字后，您可以安全地使用`parseInt(str, 10)`它来确保它被解析为十进制（以 10 为基数）。`parseInt`将忽略字符串末尾的垃圾，但我们确保正则表达式没有任何垃圾。

* * *

## 回答 #2

> 赞同：85
> 
> 时间：2012-05-31T14:05:17.980

# 解决方案 1

如果我们[将](https://stackoverflow.com/a/7179733/1249581)JavaScript 整数视为最大值`4294967295`（即`Math.pow(2,32)-1`），那么以下简短的解决方案将完美地工作：

```
function isPositiveInteger(n) {
    return n >>> 0 === parseFloat(n);
} 
```

**描述：**

1.  [零填充右移运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators#%3E%3E%3E_%28Zero-fill_right_shift%29)做了三件重要的事情：
    *   截断小数部分
        *   `123.45 >>> 0 === 123`
    *   负数的移位
        *   `-1 >>> 0 === 4294967295`
    *   范围内的“作品”`MAX_INT`
        *   `1e10 >>> 0 === 1410065408`
        *   `1e7 >>> 0 === 10000000`
2.  `parseFloat`正确解析字符串数字（`NaN`非数字字符串的设置）

**测试：**

```
"0"                     : true
"23"                    : true
"-10"                   : false
"10.30"                 : false
"-40.1"                 : false
"string"                : false
"1234567890"            : true
"129000098131766699.1"  : false
"-1e7"                  : false
"1e7"                   : true
"1e10"                  : false
"1edf"                  : false
" "                     : false
""                      : false 
```

**演示：http:** [//jsfiddle.net/5UCy4/37/](http://jsfiddle.net/5UCy4/37/)

* * *

# 解决方案 2

另一种方法适用于所有有效到 的数值`Number.MAX_VALUE`，即大约`1.7976931348623157e+308`：

```
function isPositiveInteger(n) {
    return 0 === n % (!isNaN(parseFloat(n)) && 0 <= ~~n);
} 
```

**描述：**

1.  `!isNaN(parseFloat(n))`用于过滤*纯*字符串值，例如`""`, `" "`, `"string"`;
2.  `0 <= ~~n`过滤负数和大的非整数值，例如`"-40.1"`, `"129000098131766699"`;
3.  `(!isNaN(parseFloat(n)) && 0 <= ~~n)``true`如果 value 既是*数字*又是*正*数，则返回；
4.  `0 === n % (...)`检查 value 是否为非浮点型 - 此处`(...)`（参见 3）`0`在 的情况下进行评估，在 . 的情况下`false`进行`1`评估`true`。

**测试：**

```
"0"                     : true
"23"                    : true
"-10"                   : false
"10.30"                 : false
"-40.1"                 : false
"string"                : false
"1234567890"            : true
"129000098131766699.1"  : false
"-1e10"                 : false
"1e10"                  : true
"1edf"                  : false
" "                     : false
""                      : false 
```

**演示：http:** [//jsfiddle.net/5UCy4/14/](http://jsfiddle.net/5UCy4/14/)

* * *

**以前的版本：**

```
function isPositiveInteger(n) {
    return n == "0" || ((n | 0) > 0 && n % 1 == 0);
} 
```

**演示：http:** [//jsfiddle.net/5UCy4/2/](http://jsfiddle.net/5UCy4/2/)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2018-02-01T18:17:32.787

[在 node 和超过 90% 的所有浏览器](https://caniuse.com/#search=isInteger)（IE 和 Opera Mini 除外）中工作的现代解决方案是使用[Number.isInteger](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger)，然后进行简单的肯定检查。

```
Number.isInteger(x) && x > 0 
```

这是[在 ECMAScript 2015 中完成的](https://www.ecma-international.org/ecma-262/6.0/#sec-number.isinteger)。

```
function isPositiveInteger(x) {
    return Number.isInteger(x) && x > 0
} 
```

Polyfil 是：

```
Number.isInteger = Number.isInteger || function(value) {
  return typeof value === 'number' && 
    isFinite(value) && 
    Math.floor(value) === value;
}; 
```

如果您需要支持可能是**字符串**或**数字**形式的输入，那么您可以使用这个函数，在所有现有答案（2/1/2018）在某种形式的输入上失败后，[我编写了一个大型测试套件。](https://github.com/Xeoncross/is-positive-integer)

```
function isPositiveInteger(v) {
  var i;
  return v && (i = parseInt(v)) && i > 0 && (i === v || ''+i === v);
} 
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-05-31T13:41:15.723

看起来正则表达式是要走的路：

```
var isInt = /^\+?\d+$/.test('the string'); 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2020-06-28T11:34:31.007

ES6：

```
Number.isInteger(Number(theNumberString)) && Number(theNumberString) > 0 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-08-20T06:32:21.347

这就是我验证字符串是否为正整数的方式。

```
var str = "123";
var str1 = "1.5";
var str2 = "-123";

console.log("is str positive integer: ", Number.isInteger(Number(str)) && Number(str) > 0)
console.log("is str1 positive integer: ", Number.isInteger(Number(str1)) && Number(str1) > 0)
console.log("is str2 positive integer: ", Number.isInteger(Number(str2)) && Number(str2) > 0)
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-05-31T13:46:53.790

这几乎是一个重复的问题：

[在 JavaScript 中验证十进制数字 - IsNumeric()](https://stackoverflow.com/questions/18082/validate-numbers-in-javascript-isnumeric)

它的答案是：

```
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
} 
```

所以，一个正整数将是：

```
function isPositiveInteger(n) {
  var floatN = parseFloat(n);
  return !isNaN(floatN) && isFinite(n) && floatN > 0
      && floatN % 1 == 0;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-31T13:45:28.270

```
return ((parseInt(str, 10).toString() == str) && str.indexOf('-') === -1); 
```

如果你给出一个像'0001'这样的字符串，那将不起作用

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2015-06-20T07:55:44.310

我的函数检查数字是否为 +ve 并且也可能具有十进制值。

```
 function validateNumeric(numValue){
            var value = parseFloat(numValue);
            if (!numValue.toString().match(/^[-]?\d*\.?\d*$/)) 
                    return false;
            else if (numValue < 0) {
                return false;
            }
            return true;        
        } 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-07-10T06:37:39.347

简单的

```
function isInteger(num) {
  return (num ^ 0) === num;
}

console.log(isInteger(1)); 
```

您还可以扩展 Number 并通过原型将函数分配给它。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-08-14T19:10:58.663

只是建立在上面 VisioN 的答案上，如果您使用的是 jQuery 验证插件，您可以使用它：

```
$(document).ready(function() {
    $.validator.addMethod('integer', function(value, element, param) {
        return (value >>> 0 === parseFloat(value) && value > 0);
    }, 'Please enter a non zero integer value!');
} 
```

然后你可以在你的正常规则集中使用或以这种方式动态添加它：

```
$("#positiveIntegerField").rules("add", {required:true, integer:true}); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-10-22T14:26:37.287

大多数时候，您需要这种类型的数据库使用检查，例如检查字符串是否有效的 userId。因此，不可能有任何奇怪的符号可以被解析为整数。整数也应该在整数的数据库范围内。你只需要像 1,2,3 这样的普通 int 等等。

```
const isStrNormPosInt = (str: string) => {
  return /^([1-9]\d*)$/.test(str) && Number(str) <= 2147483647 // postgres max int
} 
```

如果检查通过，您可以将其转换为数字`Number(str)`

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-05-08T14:58:17.457

如果您使用的是 HTML5 表单，则可`min="0"`以为表单元素使用属性`<input type="number" />`。所有主要浏览器都支持这一点。它不涉及用于此类简单任务的 Javascript，而是集成在新的 html 标准中。它记录在[https://www.w3schools.com/tags/att_input_min.asp](https://www.w3schools.com/tags/att_input_min.asp)

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-04-01T21:49:59.723

`(~~a == a)``a`字符串在哪里。

# visual-studio-2010 - 门户中缺少 Windows Azure VM 角色部署问题和“Beta 程序”

> ID：10834799
> 
> 赞同：1
> 
> 时间：2012-05-31T13:39:31.517
> 
> 标签：visual-studio-2010, azure

我正在尝试按照[此处](http://msdn.microsoft.com/en-us/wazplatformtrainingcourse_vmrolelab_topic2)的教程进行操作。向下滚动到任务 5 – 创建服务模型

在第 4 步，即“4.创建解决方案后，右键单击 MyVMRole 项目中的角色文件夹，指向添加，然后选择新建虚拟机角色。”

我的 VS 上没有出现“新虚拟机角色”选项。这当然是因为，我还没有收到 MS Azure VM Role 测试版的邀请，也没有安装 VS 工具。

我的问题是如何加入测试计划或申请此工具？

我看到一些在线帖子转到 Azure 管理门户 -> 主页 -> Beta 程序。但对我来说，“Beta 程序”文件夹不会出现在门户中。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:42:29.467

我不认为它仍处于测试阶段，您可以在[这里](http://www.windowsazure.com/en-us/pricing/free-trial/?WT.mc_id=src-n-gb--Cdev--&WT.srch=1)注册免费试用。

如果您只需要安装 SDK 进行开发，您只需从[此处下载该 SDK 和工具](http://www.windowsazure.com/en-us/develop/net/tutorials/web-app-with-sql-azure/#setup)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:12:50.663

最近，虚拟机角色注册选项停止显示在门户网站上。访问 VM Role Beta 注册已经有一段时间了。不幸的是，我无法提供删除注册选项的任何原因。

**编辑**：如果您联系支持并提出要求，您仍然应该能够获得访问权限。另外：这只会影响 VM Role Beta 的新注册；现有的访问权限应该不受影响（为了安全起见，我仔细检查了自己的帐户 - 一切都还在，没有任何改变）。

**编辑**随着刚刚推出的新门户更新，您现在可以在[https://account.windowsazure.com/PreviewFeatures找到虚拟机注册](https://account.windowsazure.com/PreviewFeatures)

# spotify - 播放器显示艺术家名称时 API 返回各种艺术家

> ID：10834808
> 
> 赞同：0
> 
> 时间：2012-05-31T13:40:01.800
> 
> 标签：spotify

当我播放包含多个艺术家的曲目时，Spotify 播放器会显示艺术家的姓名，但 API 只会返回“Various Artists”。

示例如下：http: [//open.spotify.com/track/1UhqsS2W93LhBQtA0q9x0x](http://open.spotify.com/track/1UhqsS2W93LhBQtA0q9x0x) Spotify 播放器显示 Michael Stipe；阿莎博斯特

当我使用下面的代码时，我会得到艺术家的各种艺术家：

```
var playerTrackInfo = player.track;
var track = playerTrackInfo.data;
var artist = track.album.artist.name; 
```

是否有另一种方法来检索实际上将返回 Michael Stipe 和 Asha Bostle 而不是“Various Artists”的艺术家？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:00:49.900

该`track`对象有一个`artists`包含对象数组的属性`Artist`：

```
var track = player.track;
var artists = track.artists; 
```

文档[在这里](https://developer.spotify.com/technologies/apps/docs/beta/4f52ebf870.html)。

# emoji - 表情符号版权

> ID：10834811
> 
> 赞同：22
> 
> 时间：2012-05-31T13:40:10.800
> 
> 标签：emoji

我正在开发一个使用表情符号的应用程序并且有一些法律问题。

*   谁拥有 Emoji 的版权？
*   是否有使用图像的许可证？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-05-22T16:02:28.137

表情符号通常通过本地存储的字体在您的设备上呈现，授权给最终用户用于其操作系统。在这种情况下，版权无关紧要，因为您的软件不会分发艺术品，就像我对这个问题的回答是分发 Arial 字体一样。

如果您需要在没有这种字体的系统上渲染 Emoji，那么您正在考虑版权问题，因为您需要分发原创作品。

要在许可的操作系统之外分发字体或从中创建和分发图像文件，将受到操作系统和/或其字体文件附带的许可的约束。

例如[Gemoji](https://github.com/github/gemoji)项目制作了 Apple Emoji 的位图版本，并且是[Apple 的版权](https://github.com/github/gemoji/blob/master/LICENSE)- 这是否意味着您可以使用它们，只要您添加版权声明，我无法告诉您。

相比之下，Android 的 Emoji 字体是在 Apache 2 许可下获得许可的，所以我认为（而且我不是律师）您可以在自己的工作中根据这些条款使用该字体。如果您有兴趣，我在这里使用[Android Emoji 作为网络字体。](http://apps.timwhitlock.info/emoji/tables/unicode)

值得注意的是[Phantom Emoji](http://www.kickstarter.com/projects/374397522/phantom-open-emoji)项目，它正在创建一组开源的全彩色表情符号。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-07T17:55:28.350

如果您从字体中使用这些，则不会，但如果您将这些复制到您的项目资源中 - 在您的“关于”窗口中添加通知。如果你想在 Windows（从 Mac 到 Windows）上使用它们，你必须这样做。

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-05-31T13:43:39.610

表情符号只是花哨的表情符号，最后我检查了一下，表情符号通常不受版权保护（因为它们的体积小；据我所知，您通常不能对单个单词进行版权保护，这就是表情符号/表情符号的等价物。你不过，可以将它们注册为商标）。但是，考虑到它们的通用性/常见用法，我怀疑它们是否可以正确注册商标。标志/等 包含表情符号的可能可能已注册商标（并且几乎可以肯定至少有一个，尽管我想不出任何一个），但我不相信表情符号本身可以。

至少，您在使用表情符号时遇到法律问题的可能性与在引用互联网模因时一样。

# ios - Xcode Simulator：如何删除旧的不需要的设备？

> ID：10834817
> 
> 赞同：249
> 
> 时间：2012-05-31T13:40:49.830
> 
> 标签：ios, xcode, ios-simulator

我正在运行最初仅支持 iOS 5.1 的 Xcode 4.3.1 iOS-Simulator。

我需要使用 iOS 4.3 测试我的代码，所以我使用 Xcode 的“安装”功能来安装它，如[“使用 iOS 4.3 设备模拟器安装 Xcode？”中所述。](https://apple.stackexchange.com/questions/47323)

现在我完成了测试，但找不到卸载 4.3 部分（“iPhone 4.3 Simulator”和“iPad 4.3 Simulator”）的方法。我想减少方案菜单中的混乱。

Apple 的 Xcode listserv 上没有人知道答案！

编辑：请注意，自 Xcode 4.3 以来发生了很大变化，因此建议任何阅读本文的人查看所有答案。最新的，如史蒂夫莫泽的可能对你更有用！

编辑 10/2017：由 Julio Carrettoni 在 Twitter 上发布

> 如果您是 iOS 开发人员，请执行以下操作：
> `$ xcrun simctl delete unavailable`
> 它会删除 Xcode 不再使用的旧模拟器。对我来说是 6Gb 自己没有尝试过......

[另外，我刚刚看到 Russ Bishop 在下面的评论中提到了这一点......]

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2014-09-23T09:14:35.197

在 Xcode 6+ 中，您只需转到 Menu > Window > Devices > Simulators 并删除不需要的模拟器。

* * *

## 回答 #2

> 赞同：187
> 
> 时间：2017-09-20T06:59:19.157

## October 2020 update

As was mentioned, you can use `xcrun` to do a few things:

*   `xcrun simctl list devices` or `xcrun simctl list --json` to list all simulators
*   `xcrun simctl delete <device udid>` to delete specific device
*   `xcrun simctl delete unavailable` to remove old devices for runtimes that are no longer supported

More things you can do with `xcrun` (see code snippet)

```
- `xcrun simctl boot <device udid>` to launch (multiple) simulators
- `xcrun simctl io booted recordVideo — type=mp4 ./test.mp4` to record simulator video
- `xcrun simctl io booted screenshot ./screen.png` to make screenshot of simulator
- `xcrun simctl openurl booted https://google.com` to open URL in simulator
- `xcrun simctl addmedia booted ./test.mp4` to upload photo or video file (for photos app)
- `xcrun simctl get_app_container booted <your apps bundle identifier>` to find the app container (where identifier is like *com.bundle.identifier*)
- `xcrun simctl help` to explore **more** commands
```

## Original Answer

September 2017, **Xcode 9**

### Runtimes

You will find them here:

```
/Library/Developer/CoreSimulator/Profiles/Runtimes 
```

[![enter image description here](../Images/f72c18b25309602f963e669d52b86613.png)](https://i.stack.imgur.com/P7E9C.png)

### Devices

To delete devices go here:

```
~/Library/Developer/CoreSimulator/Devices 
```

Much easier to delete them use Xcode: Xcode->Window->Devices and Simulators [![enter image description here](../Images/6ecabb91aa5815a56228be572b927418.png)](https://i.stack.imgur.com/84SuT.png)

Helping Xcode "forget" about runtimes and prevent from re-installing them - delete .dmg file(s) here:

```
~/Library/Caches/com.apple.dt.Xcode/Downloads 
```

I hope it will help someone

* * *

## 回答 #3

> 赞同：182
> 
> 时间：2012-05-31T14:06:41.970

您是否尝试从 Xcode 包中删除 4.3 SDK？

> /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs

请同时删除相应的.dmg文件

> ~/Library/Caches/com.apple.dt.Xcode/Downloads

以[防止 Xcode 再次重新安装](https://stackoverflow.com/questions/11672945/xcode-4-4-simulator-how-to-remove-older-unneeded-devices/11790983#11790983)相同的包。

* * *

对于 XCode >= 6，请参阅[@praveen-matanam 的答案](https://stackoverflow.com/a/30206853/529977)

* * *

## 回答 #4

> 赞同：168
> 
> 时间：2015-05-13T06:04:40.510

在 Xcode 6 及更高版本中，您可以从路径中找到并删除模拟器`/Library/Developer/CoreSimulator/Profiles/Runtimes`。重新启动 Xcode 以使其生效（可能不需要）。

* * *

## 回答 #5

> 赞同：86
> 
> 时间：2017-03-09T19:25:24.747

Run this command in terminal to remove simulators that can't be accessed from the current version of Xcode (8+?) in use on your machine.

`xcrun simctl delete unavailable`

Also if you're looking to reclaim simulator related space [Michael Tsai](https://twitter.com/mjtsai/status/1022838770494832643) found that deleting sim logs saved him 30 GB.

```
~/Library/Logs/CoreSimulator 
```

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2013-02-01T22:07:38.637

如果您只是删除 SDK，Xcode 4.6 将提示您重新安装任何旧版本的 iOS 模拟器。为避免这种情况，您还必须删除 Xcode 缓存。这样您就不会被迫在启动时重新安装旧版 SDK。

要删除 iOS 5.0 模拟器，请删除这些，然后重新启动 Xcode：

1.  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/PhoneSimulator5.0.sdk
2.  ~/Library/Caches/com.apple.dt.Xcode

例如，在全新安装 Xcode 后，我从 Xcode 首选项安装了 iOS 5.0 模拟器。后来我觉得5.1就够了，但是5.0版本又删不掉了。Xcode 一直强迫我在启动时重新安装它。删除缓存文件和SDK后，不再询问。

* * *

## 回答 #7

> 赞同：25
> 
> 时间：2017-09-07T10:50:23.437

I had the same problem. I was running out of space.

Deleting old device simulators did NOT help.

My space issue was caused by xCode. It kept a copy of every iOS version on my macOS since I had installed xCode.

Delete the iOS version you don't want and free up disk space. **I saved 50GB+ of space.**

[![enter image description here](../Images/0cf83eb03380037b20afbbd7c8d78043.png)](https://i.stack.imgur.com/61mIy.png)

* * *

* * *

**NOTE** -> can't you see `~/Library` inside `Finder`? It is hidden by default. Use `Terminal` and type `cd ~/Library/Developer/Xcode/iOS\ DeviceSupport/` or google how to see hidden folders.

* * *

* * *

**NOTE** -> if you have multiple users on a single macOS machine, make sure to find the directory ONLY with the user account that originally installed xCode.

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2018-12-18T04:18:11.020

following some of the answers here, deleting some simulators from my Xcode Menu > Window > Devices > Simulators did nothing to help my dying disk space: [![enter image description here](../Images/b259e75081cf8e468c3dfcf87f7cbcea.png)](https://i.stack.imgur.com/DQdqA.png)

however, `cd ~/Library/Developer/Xcode/iOS\ DeviceSupport` and running `du -sh *` I got all of these guys:

```
2.9G    10.0.1 (14A403)
1.3G    10.1.1 (14B100)
2.9G    10.3.2 (14F89)
1.3G    10.3.3 (14G60)
1.9G    11.0.1 (15A402)
1.9G    11.0.3 (15A432)
2.0G    11.1.2 (15B202)
2.0G    11.2 (15C114)
2.0G    11.2.1 (15C153)
2.0G    11.2.2 (15C202)
2.0G    11.2.6 (15D100)
2.0G    11.4 (15F79)
2.0G    11.4.1 (15G77)
2.3G    12.0 (16A366)
2.3G    12.0.1 (16A404)
2.3G    12.1 (16B92) 
```

All together that's 33 GB!

A blood bath ensued

see more details [here](https://stackoverflow.com/questions/29930198/can-i-delete-data-from-ios-devicesupport)

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2021-10-18T22:58:36.393

# Update 2021

We can just use the Storage Management tool: CMD + Space and search storage:

Under Developer: you can find Xcode Cache and build files and also old version of iOS support files that you can delete.

[![enter image description here](../Images/033ff784409038b3d5a9fee5b3f6171c.png)](https://i.stack.imgur.com/diMew.png)

Tested on macOS Big Sur

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2015-10-30T05:45:12.163

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-06-13T14:09:20.657

In XCode open Window - Devices, then select and remove the outdated simulators.

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2019-05-11T00:22:10.160

I wrote up one-line bash script that would delete **ALL** your simulators:

```
xcrun simctl list devices | grep -E -o -i "([0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12})" | xargs -L1 xcrun simctl delete 
```

*   `xcrun simctl list devices` will list all the simulators installed on your machine
*   `grep -E -o -i "([0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12})"` will grab the device UUID
*   `xargs -L1 xcrun simctl delete` will attempt to delete the device for each UUID it found

If you want to see everything it'll execute, you can add `echo` before `xcrun`, i.e.

```
xcrun simctl list devices | grep -E -o -i "([0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12})" | xargs -L1 echo xcrun simctl delete 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2019-12-25T15:07:54.023

Some people try to fix it using one way, some the second. Basically, there are 2 issues, which if you check them out & solve both - in 99% it should fix this issue:

1.  Old device simulators located at `YOUR_MAC_NAME` (e.g. `Macintosh`) -> `Users` -> `YOUR_USERNAME` (`daniel`) -> `Library` -> `Developer` -> `Xcode` -> `iOS Device Support`. Leave there, the newest one, as of today this is `13.2.3 (17B111)`, but in future it'll change. The highest number (here `13.2.3`) of the iOS version indicates that it's newer.

2.  After this list your devices in `Terminal` by running `xcrun simctl list devices`. Many of them might be `unavailable`, therefore delete them by running `xcrun simctl delete unavailable`. It'll free some space as well. To be sure that everything is fine check it again by running `xcrun simctl list devices`. You should see devices only from the newest version (here `13.2.3`) like the screenshot below shows.

[![enter image description here](../Images/81d67b44bbed1ed63be13e6e6205a1fb.png)](https://i.stack.imgur.com/XlLMO.png)

As a bonus which is slightly less relevant to this question, but still free's some space. Go to `YOUR_MAC_NAME` (e.g. `Macintosh`) -> `Users` -> `YOUR_USERNAME` (e.g. `daniel`) -> `Library` -> `Developer` -> `Xcode` -> `Archives`. You'll see many archived deployed application, most probably you don't need all of them. Try to delete these ones, which are not being used anymore.

Using these 2 methods and the bonus method I was able to get extra 15 GB of space on my Mac.

PS. Simply deleting simulators from Xcode by going to `Xcode` -> `Window` -> `Devices and Simulators` -> `Simulators` (or simply `CMD` + `SHIFT` + `2` when using keyboard shortcut) and deleting it there won't help. You really need to go for the described steps.

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2013-06-24T18:29:51.300

您可以做的另一件事是将部署目标更改为最高值。这将阻止方案菜单显示旧版本。

为此，请转到：Target->Summary，然后更改部署目标。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2017-04-18T15:38:29.600

I tried all answers. None of them worked for me.

What worked for me on Sierra + Xcode 8.2 was going to:

`/Library/Developer/CoreSimulator/Devices` and deleting all devices.

(Maybe this won't work for you, maybe this *is* a solution as a standalone, or maybe you have to do this in addition to other answers, but I did all solutions here and so not sure what did the deed). Just be aware that some of the answers here are old and the location of simulator has changed. [Snowcrash's answer](https://stackoverflow.com/a/39944791/5175709) seems to be most recent.

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2016-10-09T14:37:07.677

The problem with these answers is that, with every Xcode update, menus and locations will change.

Just go to `/Applications/Xcode.app/Contents/Developer/Platforms` and delete what you don't need. Xcode will start fine. If you're at all concerned then you can simply restore from Trash.

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2020-10-28T05:13:20.117

1.  Open Xcode --> Go to Window (from menu bar) --> Devices and Simulators --> Click on Simulator --> Right-click on the simulator that you want to delete --> Click Delete

2.  To delete any unwanted simulators that you installed in the past as an *extra Component* through Xcode.

*   Open Terminal

*   Type ***open /Library/Developer/CoreSimulator/Profiles/Runtimes***

*   Delete undesired simulators

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-08-17T21:32:23.087

On Mac, check /Library/Developer/Xcode/iOS\ DeviceSupport

![iOS DeviceSupport ](../Images/69fea70aca469c6cc65aadd4ad73a5ac.png)

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-09-08T14:17:56.507

You can use the following snippet to delete unavailable runtimes:

```
echo "rm -rf $(xcrun simctl list runtimes -j |\
      jq ".runtimes[] | select(.isAvailable|not) | .bundlePath" | xargs)" 
```

to execute, remove `echo` or add `| bash` at the end.

If you don't have `jq` command available, you can get it using `brew install jq`

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2017-10-13T03:56:53.753

Command+Space

Type 'simulator'

open the old beta simulator you no longer need.

right-click on it in the dock, then choose Options>'Show in Finder'

Close the app, then remove it from the folder.

:)

# java - Tomcat 在 Linux 上的符号链接后面缓存文件

> ID：10834819
> 
> 赞同：0
> 
> 时间：2012-05-31T13:40:58.837
> 
> 标签：java, linux, tomcat, amazon-ec2

我在 EC2 Fedora8 64 位 2.6.21.7-2.ec2.v1.2.fc8xen 上遇到 Tomcat 6.0.29 的问题。正在运行带有符号链接的静态数据文件夹的 java webapp。像这样的东西：

```
/home/user/tomcat/webapps/my-app/staticdata
/home/user/staticdata 
```

当我从`/home/user/staticdata`. Tomcat 只是看不到这些更改，并继续返回旧文件。虽然当我试图从不同的浏览器获取这些文件时，tomcat 会返回最新的文件。我`cachingAllowed="false"`在 context.xml 中尝试过，但它不起作用。

所以，我想重新部署热数据，而不需要停止 tomcat。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:06:51.567

您应该阅读这篇[文章](https://stackoverflow.com/questions/1177238/change-a-config-properties-file-in-a-jar-war-file-in-runtime-and-hotdeploy-the)，其中另一个人试图按照您的建议进行操作。部署通常应被视为静态的。如果他们需要改变你重新部署。如果正常运行时间是最重要的，您应该考虑启用会话亲和性的负载均衡器。这将允许您在保留飞行会话的同时执行软翻转。

要执行您的建议，您需要一个线程来监视文件系统的更改并定期重新加载静态数据。问题是产生自己的线程是一个主要的容器禁忌。其次，我可以很容易地看到这会导致您吸收所有 perm gen 或类似性质的东西，并最终在不合时宜的时刻使您的 JVM 崩溃。

# iphone - Cocoa Touch 中的协调控制器设计模式

> ID：10834826
> 
> 赞同：4
> 
> 时间：2012-05-31T13:41:14.393
> 
> 标签：iphone, objective-c, ios, design-patterns, cocoa-design-patterns

我正在创建一个带有许多自定义视图的 iOS 应用程序，因此，使用默认的 Cocoa 视图不是一个选项。然后，我决定采用**Coordinating / Mediator Controller**设计模式（在 Apress - Pro Objective-C Design Patterns for iOS 中学习）。

从委托中，我创建了一个 rootViewController 指向我的协调控制器中的视图：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
coordinatingController = [C6CoordinatingController sharedInstance];
self.window.rootViewController = coordinatingController.activeVC;
[self.window makeKeyAndVisible];
return YES; 
```

然后，在协调控制器中，我有单例创建方法：

```
+ (C6CoordinatingController *) sharedInstance{
if (sharedCoordinator == nil){
    C6Log(@"New Shared Coordinator");
    sharedCoordinator = [[super allocWithZone:NULL] init];
    [sharedCoordinator initialize];
}
else {
    C6Log(@"Return Singleton Shared Coordinator");
}
return sharedCoordinator;
}

+ (id) allocWithZone:(NSZone *)zone{
return [self sharedInstance];
}

- (void) initialize{
C6Log(@"");
[self checkDevice];

_mainVC = [C6MainViewController initWithDevice:device];
_activeVC = _mainVC;
[self checkLanguage];
[self chooseFirstView];
} 
```

我还有一个选择器来选择第一个视图（我目前只有两个）：

```
-(void) chooseFirstView{
// If a language was not setted, go to language settings view
if (!language) {
    C6Log(@"Going to Language Settings");
    C6LanguageSettingsViewController *languageVC = [C6LanguageSettingsViewController initWithDevice:device];
    [_mainVC.view addSubview:languageVC.view];
}
else {
    C6Log(@"Going to User Settings", language);
    C6AccountSettingsViewController *accountVC = [C6AccountSettingsViewController initWithDevice:device];
    [_mainVC.view addSubview:accountVC.view];
}
} 
```

然后，我有一个 IBAction 供我的视图使用：

```
- (IBAction) requestViewChangeByObject:(id)object {
int buttonTag = [object tag]; // dividend
int viewTag = buttonTag / divisor; // quotient
int actionTag = buttonTag - (divisor * viewTag); // remainder
C6Log(@"viewTag: %d | actionTag %d", viewTag, actionTag);
switch (viewTag) {
    case LanguageTags:
        C6Log(@"LanguageTags");
        break;
    case AccountTags:
        C6Log(@"AccountTags");
        break;
    default:
        break;
} 
```

在 NIB 中，我创建了一个 Obect（协调控制器）并从那里调用 IBAction。它工作得很好，我可以改变我的观点（它仍然需要实现）…………</p>

但是……我也想改变语言，但是，因为这不是导航问题，我想从 C6LanguageSettingsViewController 而不是从 C6CoodinatingController 来做。

所以，我在 C6LanguageSettingsViewController 中创建了另一个 IBAction：

```
- (IBAction)chooseLang:(id)sender{
UIImage *bt;
[self resetImagesToNormalState];
C6Log(@""); 
C6Log(@"%@", [sender tag]);
C6Log(@"%@", sender);
.
.
. 
```

当我将按钮连接到此 IBAction（通过文件的所有者或通过 LanguageSettingsViewController 对象）时，应用程序中断，有时它没有显示错误，有时它显示**发送到实例**或**EXC_BAD_ACCESS 的无法识别的选择器（代码 = 1，地址 = 0x ... ……)**在 UIApplicationMain 中。

我相信问题是NIB没有找到文件的所有者......但我不知道如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T12:01:31.833

好的……这似乎很荒谬，但我正在回答自己：P

我设法让它工作（最后！），我发现我正在以 BAAAAD 方式管理视图控制器，所以，我更改了协调控制器中的一些代码：

首先，我没有一个“真正的”mainViewController，它不再带有 NIB 和 stuf……</p>

**旧初始化**

```
- (void) initialize{
    C6Log(@"");
    [self checkDevice];
    _mainVC = [C6MainViewController initWithDevice:device];
    _activeVC = _mainVC;
    [self checkLanguage];
    [self chooseFirstView];
} 
```

**新初始化**

```
- (void) initialize{
    C6Log(@"");
    [self checkDevice];
    [self checkLanguage];
    [self chooseFirstView];
} 
```

*checkDevice*验证它是 iPhone 还是 iPad，所以我可以选择正确的 NIB。

*checkLanguage*检查语言的 [NSUserDefaults standardUserDefaults]

最后，我调用了 chooseFirstView：

**OLD 选择FirstView**

```
-(void) chooseFirstView{
    // If a language was not setted, go to language settings view
    if (!language) {
        C6Log(@"Going to Language Settings");
        C6LanguageSettingsViewController *languageVC = [C6LanguageSettingsViewController initWithDevice:device];
        [_mainVC.view addSubview:languageVC.view];
    }
    else {
        C6Log(@"Going to User Settings", language);
        C6AccountSettingsViewController *accountVC = [C6AccountSettingsViewController initWithDevice:device];
        [_mainVC.view addSubview:accountVC.view];
    }
} 
```

**新选择第一视图**

```
-(void) chooseFirstView{
    // If a language was not setted, go to language settings view
    _activeVC = [[UIViewController alloc] init];
    UIImage *bgImage = [UIImage imageNamed:@"bg.png"];
    UIImageView *bgView = [[UIImageView alloc] initWithImage:bgImage];
    [_activeVC.view addSubview:bgView];

    if (!language) {
        C6Log(@"Going to Language Settings");
        languageVC = [C6LanguageSettingsViewController initWithDevice:device];
        [_activeVC.view addSubview:languageVC.view];
    }
    else {
        C6Log(@"Going to User Settings", language);
        accountVC = [C6AccountSettingsViewController initWithDevice:device];
        [_activeVC.view addSubview:accountVC.view];
    }
} 
```

最大的变化是我何时以及如何启动 _activeVC... 以及 _languageVC 和 _accountVC 现在都是全局变量这一事实。

好吧，在此更改之后，NIB 按钮调用两个 IBAction 方法：它是文件的所有者和协调控制器。

使用这种模式的另一件大事是如何在不爆炸 iOS 设备内存的情况下从一个视图更改为另一个视图……这是我在协调控制器中的操作方式：

```
- (IBAction) requestViewChangeByObject:(id)object {
    int buttonTag = [object tag]; // dividend
    int viewTag = buttonTag / divisor; // quotient
    int actionTag = buttonTag - (divisor * viewTag); // remainder
    C6Log(@"ViewTag: %d", viewTag);
    switch (viewTag) {
        case LanguageTags:{
            C6Log(@"LanguageTags - button %d", actionTag);
            accountVC = [C6AccountSettingsViewController initWithDevice:device];
            UIView *fromView = languageVC.view;
            UIView *toView = accountVC.view;
            [self switchFrom:fromView To:toView usingAnimation:AnimationPushFromRigh];
        }
            break;
        case AccountTags:{
            C6Log(@"AccountTags - button %d", actionTag);
            switch (actionTag) {
                case 0:{
                    C6Log(@"Go back");
                    languageVC = [C6LanguageSettingsViewController initWithDevice:device];
                    UIView *fromView = accountVC.view;
                    UIView *toView = languageVC.view;
                    [self switchFrom:fromView To:toView usingAnimation:AnimationPushFromLeft];
                }
                    break;

                default:
                    break;
            }
        }
            break;
        default:
            break;
    }
} 
```

在方法的开始，我做了很多数学运算……我“创建”了一个模式，每个 NIB 的标签都应该以 100 倍数开头……所以，语言以 0 开头，帐户以 100 开头…………</p>

```
#define divisor         100
#define LanguageTags    0
#define AccountTags     1 
```

然后，我从一种观点转变为另一种观点的方式就在那里：

```
-(void) switchFrom:(UIView*) fromView To:(UIView*) toView usingAnimation:(int) animation{
    C6Log(@"");
    /*************** SET ALL DEFAULT TRANSITION SETTINGS ***************/
    // Get the current view frame, width and height
    CGRect pageFrame = fromView.frame;
    CGFloat pageWidth = pageFrame.size.width;
    // Create the animation
    [UIView beginAnimations:nil context:nil];
    // Create the delegate, so the "fromView" is removed after the transition
    [UIView setAnimationDelegate: fromView];
    [UIView setAnimationDidStopSelector:@selector(removeFromSuperview)];
    // Set the transition duration
    [UIView setAnimationDuration: 0.4];

    // Add the "toView" as subview of "fromView" superview
    [fromView.superview addSubview:toView];

    switch (animation) {
        case AnimationPushFromRigh:{
            // Position the "toView" to the right corner of the page            
            toView.frame = CGRectOffset(pageFrame, pageWidth,0);
            // Animate the "fromView" to the left corner of the page
            fromView.frame = CGRectOffset(pageFrame, -pageWidth,0);
            // Animate the "toView" to the center of the page
            toView.frame = pageFrame;
            // Animate the "fromView" alpha
            fromView.alpha = 0;
            // Set and animate the "toView" alpha
            toView.alpha = 0;
            toView.alpha = 1;

            // Commit the animation
            [UIView commitAnimations];
        }
            break;
        case AnimationPushFromLeft:{
            // Position the "toView" to the left corner of the page         
            toView.frame = CGRectOffset(pageFrame, -pageWidth,0);
            // Animate the "fromView" to the right corner of the page
            fromView.frame = CGRectOffset(pageFrame, pageWidth,0);
            // Animate the "toView" to the center of the page
            toView.frame = pageFrame;
            // Animate the "fromView" alpha
            fromView.alpha = 0;
            // Set and animate the "toView" alpha
            toView.alpha = 0;
            toView.alpha = 1;

            // Commit the animation
            [UIView commitAnimations];
        }
            break;
        default:
            break;
    }
} 
```

我真的希望这对尝试使用这种协调控制器模式的人有所帮助：P

# moq - 起订量：如何检索依 赖于其他属性的属性/方法

> ID：10834827
> 
> 赞同：0
> 
> 时间：2012-05-31T13:41:14.997
> 
> 标签：moq

我对模拟环境非常陌生，最近使用 Moq 进行了一些单元测试，并陷入了以下测试实施。

****界面：****

```
public interface IWebServiceWrapper
{
   string _org { get; set; }
   WebService GetWebService();
} 
```

****具体类****

```
public class WebServiceWrapperImpl : IWebServiceWrapper
{
  public string _org {get; set;}
  public WebService GetWebService()
  {
     WebService new_webservice = new WebService();
     new_webservice.org= _org; 
     return new_webservice;
  }
} 
```

****使用最小起订量进行单元测试****

```
[TestMethod]
public void CheckAccount()
{
      Mock<IWebServiceWrapper> mockSrvWrapper = new Mock<IWebServiceWrapper>();
      mockSrvWrapper.Setup(m => m._org).Returns("Some org");
      WebService new_webservice = mockSrvWrapper.Object.GetWebService();
      ............
      ............
 } 
```

这里`new_webservice`填充了空值，原因是 org 为空。即使我通过最小起订量设置了属性，也不确定为什么 org 为空。有人可以给我一个线索我做错了什么。顺便说一句，这里 WebService 认为它可以是任何 Web 服务

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:51:53.423

这能满足您的需要吗？

```
Mock<IWebServiceWrapper> mockSrvWrapper = new Mock<IWebServiceWrapper>();
mockSrvWrapper.SetupProperty(m => m._org, "Some org");
mockSrvWrapper.Setup(m => m.GetWebService()).Returns(
        () => new WebService { org = mockSrvWrapper.Object._org });
WebService new_webservice = mockSrvWrapper.Object.GetWebService(); 
```

# php - PHP嵌套while循环缺少迭代

> ID：10834830
> 
> 赞同：1
> 
> 时间：2012-05-31T13:41:18.170
> 
> 标签：php, sql, loops, nested, while-loop

# 转到此问题的底部以获取答案

我目前正在制作一个表格输出，它基本上会逐行列出用户。表输出上的列将由一个特定的 SQL 列填充，但来自多行（比如 John Smith 有 4 行，但 X 列在此表的每一行上都有不同的值）。

为了给您更多上下文，这是当前表格状态的文本表示。

```
Name  |  Col1  |  Col2  |  Col3
---------------------------------
Name1 |   0    |   X    |   1

Name2 |   3    |   2    |   <--- Value missing

Name3 |   2    |   1    |   <--- Value missing (and this continues through the table.. 
```

正如您在该表上看到的那样，第一行填充得很好 - 但之后的其余行似乎忽略了数据的迭代（因此为什么其余行只填充 2 列。

循环的相关代码如下：

```
while ($row = mysql_fetch_assoc($result)) {

    echo "<tr><td>". $row['forename'] . "</td>
      <td>". $row['status'] ."</td>";

             while ($col = mysql_fetch_assoc($result)) {

                 if ($col['id'] == $row['id']) {

                     echo "<td>" . $col['status'] . "</td>";

                 }

                 else if ($col['id'] != $row['id']){
                     echo "</tr>";
                     break;
                 }
             }
} 
```

有没有人知道为什么会发生这种情况？我希望我已经提供了足够的信息，但如果没有，请告诉我！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:46:14.447

```
if ($col['id'] == $row['id'])
{
     make a td
} 
```

我认为问题在于有时 $col['id'] != $row['id']

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:55:35.857

通过查看您的代码，我可以建议进行调整。

通过调用`mysql_fetch_assoc($result)`内部`WHILE`循环，您正在移动结果对象中的指针（尽管不是有意的）。

您应该使用`$row`在第一个循环中检索到的数组。

如果您真的需要像我看到的那样进行比较，最好的办法是遍历整个结果集，首先将单个记录放入一个数组中，然后您可以在循环中使用，如下所示：

```
$records = array();
//array to hold the retrieved records from the database
while($row = mysql_fetch_assoc($result)){
    //loop through the data
    $records[] = $row;
}
//continue with your processing, this time using $records as your result set
//an looping through it this time as an array -- you don't need mysql_fetch_assoc
..... 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T21:17:53.620

扩展 Okekes 的想法（干杯伙伴）我修改了另一种方法，现在效果很好！

```
//declare new array variable
                $resultSet[] = array();

                //set offset integer
                $i = 0;

                //While loop to return all rows from query, and place into multi dimensional array format
                while ($row = mysql_fetch_assoc($result)) {
                    $resultSet[$i] = $row;
                    $i++;
                }

                //check that the array isn't empty
                if ($resultSet) {

                    $innerCount = "0";

                    //count how many rows are in the array
                    $rowCount = count($resultSet);

                    //loop through the array, each row, then go through inner loop for columns
                    for ($row = 0; $row < $rowCount; $row=$row+$numRows) {

                        //declare variables for the row data
                        $foreName = $resultSet[$row]['forename'];
                        $surName = $resultSet[$row]['surname'];

                        echo "<tr><td>" . $foreName . " " . $surName . "</td>";

                        for ($col = $row; $col < $rowCount; $col++) {

                            if ($innerCount < $numRows) {

                            $innerCount++;
                            $currStatus = $resultSet[$col]['status'];
                            echo "<td>" . $currStatus . "</td>";

                            }

                            else {

                                echo "</tr>";
                                $innerCount = "0";
                                break;
                            }

                        }
                    }
                } 
```

# java - 切换回后 JTabbedPane 内容移动

> ID：10834834
> 
> 赞同：3
> 
> 时间：2012-05-31T13:41:35.743
> 
> 标签：java, swing, jpanel, jtabbedpane

在做一个学校项目时，由于这个星期六，我遇到了我遇到过的最烦人的错误。我似乎无法在万维网上的任何地方找到解决方案。甚至我的好老朋友谷歌似乎也让我失望了。那么，问题来了：

我正在使用 JTabbedPane。在这个 JTabbedPane 中，我将展示不同的 JPanes，每个都显示它们的信息。在其中一个 JPanes 中，我正在绘制条形图。

单独测试条形图时，一切正常。当我在 JTabbedPane 的右侧选项卡中加载我的信息时也会这样做。但是，一旦我切换回此选项卡，条形图就会在绘画过程中向上移动，并且看起来全是扭曲的东西（见图）。

我知道我总是在绘制正确的坐标，所以它一定是我的 JPanel 代替了 JTabbedPane 的选项卡。你们对导致这种奇怪行为的原因有任何想法吗？

![在此处输入图像描述](../Images/bf644456242dcd80c1235e780be5d801.png) 正确的：它应该是怎样的。左：切换回此选项卡后的样子。

我的 BarGraphPanel 类是一个真正的混乱，这里的代码：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package gui;

import java.awt.Color;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.geom.AffineTransform;
import java.text.DecimalFormat;
import java.util.ArrayList;
import javax.swing.JLabel;
import javax.swing.JPanel;

/**
 *
 * @author Scuba Kay
 */
public class BarGraphPanel extends JPanel implements ManagementPanel {

private ArrayList<String[]> info;
    private String infoName;
    private double maxValue;
    private int size;
    private int barWidth;
    private double left;
    private double right;
    private double width;
    private double height;
    private double bottom;
    private double top;
    private int barSpacing;
    private double barPart;
    private double graphHeight;
    private double graphWidth;
    private int cap;

    public BarGraphPanel(){
        super();

        width = 600;
        height = 480;
        setSize((int) width, (int) height);

        // The maximum number of results to show
        cap = 30;

        this.infoName = "Management information";
        this.add(new JLabel("This query is not suited for Bar Graph view: please select another one."));
    }

    /**
     * Sets both x and y, min and max and the info list
     * @author Kay van Bree
     * @param info 
     */
    @Override
    public void setManagementInfo(ArrayList<String[]> info) {
        reset();
        this.info = info;

        // Set important values
        this.maxValue = getMaxValue(info);
        this.size = info.size();

        setSizes();
        repaint();
    }

    /**
     * Resets the panel, taken from TablePanel
     * @author Joepe Kemperman
     */
    public void reset() {
        removeAll();
        invalidate();
        validate();
    }

    /**
     * Set the sizes needed for calculating bar heights etc.
     * @author Kay van Bree
     */
    protected void setSizes(){      
        left = (width / 100) * 7;
        right = width - left*3;
        top = (height / 100) * 7;
        bottom = height - top*3;

        // The dimensions of the graph
        graphHeight = bottom - top;
        graphWidth = right - left;

        // barWidth is... Just guess what it is.
        barWidth = (int) ((double) (graphWidth / size) * 0.95);

        // barSpacing is the space between the bars
        barSpacing = (int) (graphWidth - (barWidth*size)) / size;
        if(barSpacing == 0){ 
            barSpacing++;
            barWidth--;
        }

        // barPart is the height of a bar of value 1
        barPart = graphHeight / maxValue;
    }

    /**
     * Return the max value of the info arraylist
     * @author Kay van Bree
     * @param info 
     */
    private int getMaxValue(ArrayList<String[]> info){
        int max = 0;
        for(String[] row: info){    
            if(Integer.valueOf(row[1]) > max){
                max = Integer.valueOf(row[1]);
            }
        }
        return max;
    }

    /**
     * Draw the damn thing!
     * @author Kay van Bree
     * @param g 
     */
    @Override
    protected void paintComponent(Graphics g){
        super.paintComponent(g);
        if(info != null){
            g.setColor(Color.BLACK);
            drawTitle(g);
            drawBlocks(g);
            if(size <= cap){
                drawBars(g);
            } else {
                drawError(g);
            }
            drawAxes(g);
        } else {
            this.setInformationNotSuitable();
        }
    }

    /**
     * Set an error displaying to many results
     * @author Kay van Bree
     * @param g 
     */
    private void drawError(Graphics g){
        g.setColor(Color.BLACK);
        g.drawString("Too many results to show!", (int)(right-left*2)/2, (int)(bottom-top*2)/2);
    }

    /**
     * Draw the names under the bars
     * @author Kay van Bree
     * @param g 
     */
    private void drawName(Graphics g, String name, int x){
        Graphics2D g2d = (Graphics2D)g;

        // clockwise 90 degrees
        AffineTransform at = new AffineTransform();
        // thanks to M.C. Henle for the bug fix!
        at.setToRotation(Math.PI/2.0, x + (barWidth/4), bottom + 3);
        g2d.setTransform(at);

        g2d.setColor(Color.BLACK);
        g2d.drawString(name, (int) (x + (barWidth/4)), (int) bottom  + 3);

        g2d.setTransform(new AffineTransform());
    }

    /**
     * Draw the lines behind the bars
     * @author Kay van Bree
     * @param g 
     */
    private void drawBlocks(Graphics g){
        g.setColor(Color.lightGray);
        // Ten parts
        double part = maxValue / 10;
        double total = maxValue;

        // Draw the numbers
        for(int i=0; i<10; i++){
            double y = (((bottom-top)/10)*i)+top;
            g.drawLine(((int) left)-5, (int) y, ((int) right), (int) y);
        }
        g.drawLine((int) right, (int) top, (int) right, (int) bottom);
    }

    /**
     * Draw the title of the Graph
     * @author Kay van Bree
     * @param g 
     */
    private void drawTitle(Graphics g){
        int tLeft = 100;
        g.drawString(infoName, tLeft, (int) top / 2);
    }

    /**
     * Draw the axes of this Bar Graph
     * @author Kay van Bree
     * @param g 
     */
    private void drawAxes(Graphics g){
        g.setColor(Color.BLACK);
        // draw lines from (x, y) to (x, y)
        g.drawLine((int) left, (int) top, (int) left, (int) bottom);
        g.drawLine((int) left, (int) bottom, (int) right, (int) bottom);

        // Ten parts
        double part = maxValue / 10;
        double total = maxValue;

        // Draw the numbers
        for(int i=0; i<10; i++){
            double y = (((bottom-top)/10)*i)+top;
            String number = round(total);
            FontMetrics fontMetrics = g.getFontMetrics();
            g.drawString(number, (int) (left * 0.80) - fontMetrics.stringWidth(number), ((int) y)+5);
            total = (total - part);
            g.drawLine(((int) left)-5 , (int) y, ((int) left), (int) y);
        }
    }

    /**
     * Rounds the number to 1 decimal
     * @author Kay van Bree
     * @param number
     * @return 
     */
    private String round(double number){
        DecimalFormat df = new DecimalFormat("#.#");
        Double dubbel = new Double(number);
        return df.format(dubbel);
    }

    /**
     * Round a number, make it int
     * @author Kay van Bree
     * @param number
     * @return 
     */
    private int roundToInt(double number){
        DecimalFormat df = new DecimalFormat("#");
        Double dubbel = new Double(number);
        return Integer.valueOf(df.format(dubbel));
    }

    /**
     * We need info right?
     * Then draw the damn bars already!
     * @author Kay van Bree
     * @param g 
     */
    private void drawBars(Graphics g){      
        double currentX = left + barSpacing + 1;
        for(String[] row: info){
            double value = Integer.valueOf(row[1]);
            double barHeight = (value * barPart);

            System.out.println("Value: " + value + " height: " + barHeight + " top: " + top);
            double barStart = bottom - barHeight;
            System.out.println("Barstart: " + barStart);
            barHeight = ((int) bottom - (int) barStart);
            g.setColor(Color.BLUE);
            g.fillRect((int) currentX, (int) barStart, (int) barWidth, roundToInt(barHeight));
            drawName(g, row[0], (int) currentX);

            currentX = (currentX + barSpacing + barWidth);
        }
    }

    public void setInformationNotSuitable() {
    //      JOptionPane.showMessageDialog(this, "This query is not suited for Bar Graph view. Please select another", "INSANE WARNING!", JOptionPane.WARNING_MESSAGE);
    }
} 
```

一些有用的信息：

JTabbedPane 调用一次 setManagementInformation。在这里它加载所有内容（还有其他选项卡）

***编辑*** Oke，所以至强的回答几乎解决了我的问题。每次我切换回此选项卡时，我的图表条现在都完美对齐。但是，当切换回来时，栏下方的名称仍在移动。这是我更新的代码：

```
/**
 * Draw the names under the bars
 * @author Kay van Bree
 * @param g 
 */
private void drawName(Graphics g, String name, int x){
    Graphics2D g2d = (Graphics2D) g.create();

    // Clockwise 90 degrees
    AffineTransform at = new AffineTransform();
    // Rotate the text
    at.setToRotation(Math.PI/2.0, x + (barWidth/4), bottom + 3);
    AffineTransform prev = g2d.getTransform();
    g2d.setTransform(at);

    g2d.setColor(Color.BLACK);
    g2d.drawString(name, (int) (x + (barWidth/4)), (int) bottom  + 3);

    g2d.dispose();
} 
```

那么，这是否也与 AffineTransform 有关，并且有人有解决此问题的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T18:27:50.367

行。这很棘手：

问题在于`drawName`方法 - 您正在转换`graphics`实例而不是恢复它 - 您只需重置转换矩阵（所有值都为 0）。

你应该恢复它：

```
private void drawName(Graphics g, String name, int x) {
    Graphics2D g2d = (Graphics2D) g;

    // clockwise 90 degrees
    AffineTransform at = new AffineTransform();
    // thanks to M.C. Henle for the bug fix!
    at.setToRotation(Math.PI / 2.0, x + (barWidth / 4), bottom + 3);
    AffineTransform prev = g2d.getTransform();
    g2d.setTransform(at);

    g2d.setColor(Color.BLACK);
    g2d.drawString(name, (int) (x + (barWidth / 4)), (int) bottom + 3);

    g2d.setTransform(prev);
} 
```

或者你甚至可以使用：

```
 Graphics2D g2d = (Graphics2D) g.create();
    ...
    // free to manipulate Graphics2D
    ,,,
    d2d.dispose(); 
```

我建议使用[JFreeChart](http://www.jfree.org/jfreechart/)而不是编写自己的图表库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:35:52.313

在做了一些研究之后，在 Xeon 的回答的帮助下：

```
/**
 * Draw the names under the bars
 * @author Kay van Bree
 * @param g 
 */
private void drawName(Graphics g, String name, int x){
    Graphics2D g2d = (Graphics2D) g.create();

    // Rotate
    g2d.rotate(Math.PI/2.0, x + (barWidth/4), bottom + 3);

    // Print
    g2d.setColor(Color.BLACK);
    g2d.drawString(name, (int) (x + (barWidth/4)), (int) bottom  + 3);

    // Reset transformation
    g2d.dispose();
} 
```

在[OTN 讨论论坛](https://kr.forums.oracle.com/forums/thread.jspa?threadID=1349300)中找到答案：

您忽略了图形上的当前变换，使用以下内容而不是 setTransform()：

```
g2D.rotate(-Math.PI / 2.0, 0, 0); 
```

这解决了我所有的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-22T20:34:07.237

如果有人会`AffineTransform`直接使用，请注意：

```
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    final Graphics2D g2d = (Graphics2D) g;
    final AffineTransform oldT = g2d.getTransform();
    try {
        final AffineTransform t = g2d.getTransform(); // returns a copy! of current transform
        t.concatenate(viewMatrix); // so we can modify it
        g2d.setTransform(t);
        // draw...
    } finally {
        // restoring transform
        g2d.setTransform(oldT);
    }
} 
```

`Graphics2D`在这种情况下不需要处理

# delphi - 在 PascalScript 中导入重载函数

> ID：10834836
> 
> 赞同：2
> 
> 时间：2012-05-31T13:41:38.490
> 
> 标签：delphi, overloading, pascalscript

考虑到函数重载，我如何确定 PascalScript 导入了正确的函数（使用**AddFunction() ）？**

例如，我想导入 system.Random。在 EngineCompile 事件中，我添加了以下内容：

```
AddFunction( @System.Random, 'function Random: Extended;' ); 
```

但是在测试调用*random*的脚本时，我总是得到**NAN**作为结果。

我的测试脚本是

```
Program Script;
Var
  a: Single;
  Check: String;
Begin
  a := Random;
  Check := FloatToStr(a);
  ShowMessage(Check);
End. 
```

我有强烈的感觉 PascalScript 导入了其他版本的**random**。你怎么看 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:31:56.390

在每个可能的重载上放置一个断点（在*System.pas*中，对于这种特殊情况）。执行你的脚本。查看调试器停在哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T12:34:03.633

我是这样做的：

编译：

```
psc.AddDelphiFunction('function Random(const ARange: Integer): Integer');
psc.AddDelphiFunction('function Random2: Extended'); 
```

运行：

```
type TRandom2 = function: Extended;
var Random2: TRandom2;

pse.RegisterDelphiFunction(@Random,'Random',cdRegister);
Random2:=Random;
pse.RegisterDelphiFunction(@Random2,'Random2',cdRegister); 
```

我用类型定义强制“随机：扩展”。

# c# - 在 DataGridView 的特定列中获取值

> ID：10834844
> 
> 赞同：4
> 
> 时间：2012-05-31T13:42:09.747
> 
> 标签：c#, winforms, datagridview

我的 Winforms 应用程序中有一个 datagridview。用户可以单击 datagridview 上的任意位置，然后单击一个按钮以对该数据行执行操作但是，为了做到这一点，我需要从该行恢复 ID 现在请记住，用户可能没有单击 ID 列所以 SelectedCell .Value在这里对我没用

我试过下面的代码

```
DataGridViewRow row = dataIPs.SelectedRows[0];
DataGridViewCell cell = row.Cells[0];
string value = cell.Value.ToString(); 
```

但这会产生越界错误。

无论用户实际选择哪一列，如何从 datagridview 的特定列中获取值。

### 回答

最后对我有用的代码如下：

```
DataGridViewRow row = dataIPs.CurrentCell.OwningRow;
string value = row.Cells["IPID"].Value.ToString(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:52:03.727

`SelectedRows`当未选择任何行时，您似乎正在尝试访问该集合。

的默认选择模式`DataGridView`是`CellSelect`，在此模式下，当您单击单元格时，不会选择任何行。

您需要更改选择模式或以其他方式获取所需的行。

*   您可以更改`FullRowSelect`可以在设计器或代码中完成的选择模式：

    ```
    dataGridView1.SelectionMode = DataGridViewSelectionMode.FullRowSelect; 
    ```

*   或者您可以访问选定的单元格和其中的行：

    ```
    DataGridViewRow row = dataGridView1.Rows[dataGridView1.SelectedCells[0].RowIndex]; 
    ```

    或者像这样：

    ```
    DataGridViewRow row = dataGridView1.CurrentCell.OwningRow; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:43:56.067

尝试从事件参数中获取值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:52:19.133

将 SelectionMode 属性设置为 FullRowSelect。这是 SelectedRow 工作所必需的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:02:25.717

您还可以尝试在 datagridview 中添加带有按钮的列。之后，您可以从 datagridview 中捕获事件“CellContentClick”，该事件在 eventargs 中具有“RowIndex”和“ColumnIndex”属性。

# html - jqxgrid 从 json 字符串中分配列值

> ID：10834845
> 
> 赞同：0
> 
> 时间：2012-05-31T13:42:11.913
> 
> 标签：html, jqxgrid

我正在使用 jqxgrid 在 html 页面的网格中显示数据。

对于从本地 json 数据加载数据，jqxgrid 表示以下代码将起作用。

```
var source ={
               datatype: "json",
               datafields: [{ name: 'name' },{ name: 'type' },
                           { name: 'calories', type: 'int' },
                           { name: 'totalfat' },{ name: 'protein' },],
                    localdata: jsonData
                };
                var dataAdapter = new $.jqx.dataAdapter(source);
                    $("#jqxgrid").jqxGrid(
                    {
                        width: 670,
                        source: dataAdapter,
                        theme: theme,
                        columnsresize: true,
                        columns: [
                              { text: 'Name', datafield: 'name', width: 250 },
                              { text: 'Beverage Type', datafield: 'type', width: 250 },
                              { text: 'Calories', datafield: 'calories', width: 180 },
                              { text: 'Total Fat', datafield: 'totalfat', width: 120 },
                              { text: 'Protein', datafield: 'protein', minwidth: 120 }
                             ]
                    });
                }); 
```

这将起作用。但我的问题是假设我需要动态生成这个数据字段和列值。我为这两个生成 json 字符串并将其存储在 2 个变量中，例如

```
jsonStr = '[{ name: 'name' },{ name: 'type' },{ name: 'calories', type: 'int' },
             { name: 'totalfat' },{ name: 'protein' },]' 
```

和

```
 jsonColsStr='[{ text: 'Name', datafield: 'name', width: 250 },
                  { text: 'Beverage Type', datafield: 'type', width: 250 },
                  { text: 'Calories', datafield: 'calories', width: 180 },
                  { text: 'Total Fat', datafield: 'totalfat', width: 120 },
                  { text: 'Protein', datafield: 'protein', minwidth: 120 }
                 ]' 
```

jqxgrid 加载代码将如下所示。

```
var source ={datatype: "json",
             datafields: jsonStr,
             localdata: jsonData
             };
                var dataAdapter = new $.jqx.dataAdapter(source);
                    $("#jqxgrid").jqxGrid(
                    {
                        width: 670,
                        source: dataAdapter,
                        theme: theme,
                        columnsresize: true,
                        columns: jsonColsStr
                    });
                }); 
```

但这对我不起作用..?？谁能帮我解决这个问题。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T06:34:22.513

你可以试试 ..

```
 jsonColsStr = "[" +
               "  { text: \"Name\", datafield: \"name\", width: 250 }," +
               "  { text: \"Beverage Type\", datafield: \"type\", width: 250 }"
               "]"
 var myColsObject = eval(jsonColsStr);  // change to json object 
```

和 ....

```
 $("#jqxgrid").jqxGrid(
 {
     width: 670,
     source: dataAdapter,
     theme: theme,
     columnsresize: true,
     columns: myColsObject  // use the object
  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T07:37:16.887

我认为“列”设置需要一个数组，但您传递的是一个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-30T06:57:16.573

您需要先转换为 JSON 对象，然后将其传递

```
var jsonStr = '[{ "name" : "name" }, { "name": "type" }, { "name" : "calories", "type" : "int" }, { "name" : "totalfat" }, { "name" : "protein" }]';
var objectJson = JSON.parse(jsonStr);
console.log(objectJson);
var source = {
    datatype: "json",
    datafields: objectJson,
    localdata: jsonData
}; 
```

# node.js - 如何从命令行创建 Express EJS 项目？

> ID：10834849
> 
> 赞同：7
> 
> 时间：2012-05-31T13:42:19.527
> 
> 标签：node.js, express

我努力了

`express -e myproject`

然而，这并没有按预期工作

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-31T21:27:02.713

```
express --help

  Usage: express [options] [path]

  Options:
    -s, --sessions           add session support
    -t, --template <engine>  add template <engine> support (jade|ejs). default=jade
    -c, --css <engine>       add stylesheet <engine> support (stylus). default=plain css
    -v, --version            output framework version
    -h, --help               output help information 
```

so, do >express -t ejs [path]

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-07-31T13:54:48.703

如何使用**express-generator**从命令行安装**express**并使用**EJS 模板引擎**

 ****1) 如果你还没有全局安装 express-generator("-g")

```
npm install express-generator -g 
```

2.1) 检查可用命令

```
express -h 
```

结果（在快速版本中：4.13.4）：

```
 Usage: express [options] [dir]

  Options:
-h, --help          output usage information
-V, --version       output the version number
-e, --ejs           add ejs engine support (defaults to jade)
    --hbs           add handlebars engine support
-H, --hogan         add hogan.js engine support
-c, --css <engine>  add stylesheet <engine> support (less|stylus|compass|sass) (defaults to plain css)
    --git           add .gitignore
-f, --force         force on non-empty directory 
```

2.2) 生成带有所选首选项的 Express 应用程序

```
express --ejs --git my_app_with_ejs_and_gitignore 
```

结果：

```
 create : my_app_with_ejs_and_gitignore
   create : my_app_with_ejs_and_gitignore/package.json
   create : my_app_with_ejs_and_gitignore/app.js
   create : my_app_with_ejs_and_gitignore/.gitignore
   create : my_app_with_ejs_and_gitignore/public
   create : my_app_with_ejs_and_gitignore/public/javascripts
   create : my_app_with_ejs_and_gitignore/public/images
   create : my_app_with_ejs_and_gitignore/public/stylesheets
   create : my_app_with_ejs_and_gitignore/public/stylesheets/style.css
   create : my_app_with_ejs_and_gitignore/routes
   create : my_app_with_ejs_and_gitignore/routes/index.js
   create : my_app_with_ejs_and_gitignore/routes/users.js
   create : my_app_with_ejs_and_gitignore/views
   create : my_app_with_ejs_and_gitignore/views/index.ejs
   create : my_app_with_ejs_and_gitignore/views/error.ejs
   create : my_app_with_ejs_and_gitignore/bin
   create : my_app_with_ejs_and_gitignore/bin/www

   install dependencies:
     $ cd my_app_with_ejs_and_gitignore && npm install

   run the app:
     $ DEBUG=my_app_with_ejs_and_gitignore:* npm start 
```

3）导航到app目录，使用npm安装依赖

```
cd my_app_with_ejs_and_gitignore
npm install 
```

结果：

```
+-- body-parser@1.15.2
| +-- bytes@2.4.0
| +-- content-type@1.0.2
| +-- depd@1.1.0
| +-- http-errors@1.5.0
| | +-- inherits@2.0.1
| | +-- setprototypeof@1.0.1
| | `-- statuses@1.3.0
| +-- iconv-lite@0.4.13
| +-- on-finished@2.3.0
| | `-- ee-first@1.1.1
| +-- qs@6.2.0
| +-- raw-body@2.1.7
| | `-- unpipe@1.0.0
| `-- type-is@1.6.13
|   +-- media-typer@0.3.0
|   `-- mime-types@2.1.11
|     `-- mime-db@1.23.0
+-- cookie-parser@1.4.3
| +-- cookie@0.3.1
| `-- cookie-signature@1.0.6
+-- debug@2.2.0
| `-- ms@0.7.1
+-- ejs@2.4.2
+-- express@4.13.4
| +-- accepts@1.2.13
| | `-- negotiator@0.5.3
| +-- array-flatten@1.1.1
| +-- content-disposition@0.5.1
| +-- cookie@0.1.5
| +-- escape-html@1.0.3
| +-- etag@1.7.0
| +-- finalhandler@0.4.1
| +-- fresh@0.3.0
| +-- merge-descriptors@1.0.1
| +-- methods@1.1.2
| +-- parseurl@1.3.1
| +-- path-to-regexp@0.1.7
| +-- proxy-addr@1.0.10
| | +-- forwarded@0.1.0
| | `-- ipaddr.js@1.0.5
| +-- qs@4.0.0
| +-- range-parser@1.0.3
| +-- send@0.13.1
| | +-- destroy@1.0.4
| | +-- http-errors@1.3.1
| | +-- mime@1.3.4
| | `-- statuses@1.2.1
| +-- serve-static@1.10.3
| | `-- send@0.13.2
| |   +-- http-errors@1.3.1
| |   `-- statuses@1.2.1
| +-- utils-merge@1.0.0
| `-- vary@1.0.1
+-- morgan@1.7.0
| +-- basic-auth@1.0.4
| `-- on-headers@1.0.1
`-- serve-favicon@2.3.0 
```

4）启动服务器

```
DEBUG=my_app_with_ejs_and_gitignore:* npm start 
```

结果：

```
my_app_with_ejs_and_gitignore@0.0.0 start C:\Users\Marian\OneDrive\Documente\Practice\Node\express_generator_2\my_app_with_ejs_and_gitignore
node ./bin/www
Sun, 31 Jul 2016 13:51:25 GMT my_app_with_ejs_and_gitignore:server Listening on port 3000 
```

5) 在浏览器中查看结果
打开浏览器并导航到：**[http://localhost:3000/](http://localhost:3000/)**

该页面应包含以下文本：
Express
Welcome to Express

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-23T07:15:30.317

```
npm install -g express-generator 
```

接着

```
express -e project-name 
```

这将使用 ejs 模板引擎创建一个项目

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-12-06T21:54:17.427

只需使用此命令启动您的项目

```
express --view=ejs appName 
```

不要忘记通过全局安装**express-generator**`npm install -g express-generator`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-20T11:56:51.587

使用的选项取决于安装的 express 版本（检查`express -V`！）

它在版本 3.0.0alpha1 左右的某个地方发生了变化。

以前是：`express -t ejs`，现在是：`express -e`或者`express --ejs`

证明（来自 express Git repo）：

```
git log -S'--ejs' # Search for the change using pickaxe
git show 29508f1 # The commit
git cat-file blob 29508f1:package.json|grep version # express version 
```

士气：NodeJS 模块是移动的目标，*总是*检查他们的文档，尤其是在更新内容之后。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-31T20:21:01.387

1.  全局安装 express`npm install -g express`
2.  在终端中，转到您希望项目所在的目录。如果您在您希望文件所在的目录中，只需键入`express`. 如果要快速为项目创建子文件夹，请键入`express appname`.
3.  要安装 EJS，请使用`npm install ejs`
4.  要在您的 express 项目中配置 EJS，您必须确保您的 app.config 函数中有以下行：

    ```
    app.set('view engine', 'ejs'); 
    ```

编辑：正如 dmh2000 指出的，你也可以这样做`express -t ejs`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-09-19T18:45:59.523

Express 提供了一个发电机（参见下面的说明），但是对于包含电池的发电机，您可以选择我的[express-no-stress](https://github.com/cdimascio/generator-express-no-stress)发电机。

**表达无压力**

> 包括通过 Babel.js 的 ES.next、使用 Pino 的结构化日志记录、通过 Swagger 的 API 验证和交互式文档、使用 dotenv 的基于环境的配置、使用 ESLint 的 linting 以及 Backpack 驱动的构建。

**安装**

`npm install -g yo generator-express-no-stress`

**生成项目**

`yo express-no-stress myapp`

**跑**

`npm run dev`

* * *

或者使用 可以如下使用的**Express Generator ：**

**安装**

`npm install express-generator -g`

**生成项目**

`express myapp`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-10-04T12:03:50.900

对我有用的是

```
npx express-generator --view=ejs 
```

无需预先安装任何东西（当然除了nodeJS）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-09-21T18:54:26.603

确保您安装了 express 生成器：

```
npm install express-generator -g 
```

然后开始一个项目

```
express myproject 
```

显示帮助屏幕

```
express --h 
```

我希望它有帮助

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-05-07T13:35:22.843

执行以下步骤： 1\. 安装 ejs：

```
sudo npm install -g ejs 
```

2.安装node express生成器：

```
sudo npm install -g express-generator 
```

3\. 重启系统 4\. 使用 express generator 创建应用：

```
express --view=ejs myApp 
```****

# sql - 从具有重复项的表生成连接表

> ID：10834850
> 
> 赞同：2
> 
> 时间：2012-05-31T13:42:21.183
> 
> 标签：sql, sql-server, duplicate-data, auto-generate, database-table

我有一个 SQL Server 数据库表（**DuplicateIds**），其中包含另一个表（**Words**）中重复单词的 ID。以下是 DuplicateIds 表中的数据示例：

```
 word_id  |  word
----------------------------------
        244      |  ape
        603      |  ape
       1873      |  ape
        372      |  banana
       3095      |  banana 
```

...等等。通常只有两个或三个重复项，但也有 10 个甚至更多重复项的情况。

现在我想使用这个带有重复项的表来创建一个新表，该表连接相同单词的 ID。我猜新表看起来像这样：

```
 word_id  |  connected_id
----------------------------------
        244      |    603
        244      |   1873
        603      |    244
        603      |   1873
       1873      |    244
       1873      |    603
        372      |   3095
       3095      |    372 
```

使用这张表，我可以使用它的 ID 查找某个单词并获取所有相同单词的 ID。

现在我想知道是否可以使用来自 DuplicateIds 的数据编写一个 (T)SQL 语句来为我生成这个新的连接表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:48:48.470

这应该这样做：

```
SELECT
   di.word_id
  ,di2.word_id  connected_id
 into NewTable
 from DuplicateIds di
  inner join DuplicateIds di2
   on di2.word = di.word
    and di2.word_id <> di.word_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:49:27.190

尝试这个。我不确定在 sql server 中如何不相等。

```
 INSERT INTO DuplicateIds 
 SELECT a.word_id, b.word_id  connected_id
 from Words a,Words b
 where a.word=b.word
 and a.word_id <> b.word_id 
```

# c++ - 随机数：“C1001：编译器发生内部错误”

> ID：10834856
> 
> 赞同：1
> 
> 时间：2012-05-31T13:42:30.367
> 
> 标签：c++, visual-studio-2010, compilation, compiler-errors

我正在开发 VS2010，当我尝试编译包含大约 37-40 个项目的解决方案时，我随机收到此错误消息。并且每次都指向代码中的不同位置：

`2>D:\Sources\XXX\Database\SqlResult.cpp : fatal error C1001: An internal error has occurred in the compiler.
2> (compiler file 'f:\dd\vctools\compiler\utc\src\p2\p2pragma.c', line 160)
2> To work around this problem, try simplifying or changing the program near the locations listed above.
2> Please choose the Technical Support command on the Visual C++
2> Help menu, or open the Technical Support help file for more information`

什么会导致此错误？我该如何避免呢？
如果需要更多信息，请告诉我什么。

谢谢。

# c++ - .NET 查看其他应用程序的内存

> ID：10834857
> 
> 赞同：1
> 
> 时间：2012-05-31T13:42:35.400
> 
> 标签：c++, .net, wpf, memory, memory-management

所以我有两个可以一起工作的应用程序。一种是使用自定义内存管理器用本机 C++ 编写的。此内存管理器管理从起始地址到 startAddress + size 的连续字节块。我还有一个 WPF 应用程序，它读取文本文件（这只是来自内存管理器的字节倒入文本文件）并显示有关它的各种统计信息。我想知道是否有一种方法可以在 WPF 应用程序中实时查看本机 c++ 应用程序的内存。所以一些伪逻辑可能是：

*   本机应用程序可以以一种或另一种方式公开池的起始地址和大小
*   WPF 应用程序从该起始地址获取所有字节到起始地址加上大小

我已经探索了 .NET 中的 Process 类，但我没有看到任何类似 MemoryPool 的东西，而且我认为该对象的 StartAddress 指向应用程序的*最*开始，而不是第一个堆分配。

这里的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T19:45:46.993

Damien_The_Unbeliever 在评论中发布了不可避免的最佳解决方案。我很抱歉没有早点发布这个，以防其他人遇到这个问题。这个想法是使用[内存映射文件](http://msdn.microsoft.com/en-us/library/dd997372.aspx)使一块内存在您的应用程序之外可见。本质上，您创建一个内存块并为其指定一个字符串名称（标识符）。任何其他知道此标识符的应用程序都可以读取该内存块，就好像它是他们自己的一样（假设他们正在使用内存映射文件来查看内存，因为它不仅仅是本质上可见的）。需要注意的是，读取内存的应用程序必须能够解析内存并理解它。

我用它在 C# 中为我的引擎创建了一个实时内存查看器。该引擎有一个底层的分配器和内存管理器，它现在写入一个内存块，该内存块也由一个内存映射文件指向。C# 应用程序以给定的时间间隔读取此内存，并以相关的方式将其显示给用户（开发人员）。最好的部分是，因为原生端根本不需要改变来使用这个实现，这根本不会影响应用程序的性能。

# svn - 从 SVN 永久删除修订

> ID：10834865
> 
> 赞同：1
> 
> 时间：2012-05-31T13:43:09.537
> 
> 标签：svn, backup, backup-strategies

## 前言

我的 SVN 托管由第三方提供，这将我的使用量限制为 300MB。由于该项目规模适中，我从没想过这会是个问题。一旦应用程序投入生产，我意识到我需要某种备份机制。所以我写了一个shell脚本来导出数据库并压缩用户上传的文件。然后我将 .sql 和 .zip 文件都提交到 SVN（SVN 服务器与应用程序不在同一台机器上运行）。

然后今天我注意到我已经超过了配额。我很快意识到这一定是因为备份。

## 最后......问题

因为 .zip 是一个二进制文件，我猜每次提交时都会将整个文件添加到存储库中（而对于文本文件，只添加差异）？.zip 文件目前约为 60MB，因此鉴于备份脚本每天运行，我只能在 SVN 中存储 5 天的备份。

无论如何，我计划通过以下方式改善这种情况：

*   更改备份脚本，以便将 .zip 的大小与 SVN 中的最新 .zip 的大小进行比较，并且仅在它们不同时才提交。如果自上次运行备份以来没有用户上传文件，则两者大小相同

*   从 SVN 中删除所有旧版本的 .zip 文件以释放一些配额。但是，我不知道这是否真的可能？我的理解是，即使我从工作副本中删除文件并提交删除，文件也会从存储库的 HEAD 中删除，但所有之前提交的版本仍然存在（用完我宝贵的配额）。

有什么方法可以永久删除所有旧版本的 .zip，并使用上述更有效的备份策略重新开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:13:33.543

您应该执行以下操作来解决这种情况：

*   如果有可能，请从存储库中删除所有提交的 zip 文件。请参阅SVN 红皮书中的[Filtering Repository History一章。](http://svnbook.red-bean.com/en/1.7/svn-book.html#svn.reposadmin.maint.filtering)
*   以后，请将您的 zip 文件保存在其他位置。即使二进制差异运行良好，将大二进制文件添加到 SVN 存储库也不是一个好主意。

如果包含二进制数据，200 MB 并不多。如果它只是源代码，它可能就足够了。

# c++ - 在 Windows 7 上使用 C++ 程序读取 Windows 注册表

> ID：10834867
> 
> 赞同：1
> 
> 时间：2012-05-31T13:43:17.043
> 
> 标签：c++, registry, key

我想在 Windows 注册表上执行一些基本操作。我编写了一个小型 C++ 程序来读取当前用户密钥。下面是代码片段。老实说，我不确定为什么 RegOpenKeyEx() 没有返回 ERROR_SUCCESS。请指教。

```
#include <Windows.h>

#include <iostream>
using namespace std;

int main(){

    HKEY hkey;

    if(RegOpenKeyEx(HKEY_CURRENT_USER, TEXT("SoftwareDevShed TutorialTest"), 0, KEY_ALL_ACCESS, &hkey) != ERROR_SUCCESS)
        cout<<"Error opening the key"<<endl;
    else 
        cout<<"Success"<<endl;
    system("PAUSE");
    return 0;

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:50:46.847

反斜杠在哪里去了：`TEXT("SoftwareDevShed TutorialTest")`？不应该读`TEXT("Software\\DevShed Tutorial\\Test")`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T05:17:46.660

```
#include <Windows.h>
#include <iostream>

int main(int argc, char *argv[])
{
    DWORD dwType;
    char  szVersion[255];
    DWORD dwDataSize = 255;
    memset(szVersion, 0, 255);

    // open the key for reading.
    HKEY hkeyDXVer;
    long lResult = RegOpenKeyEx(HKEY_CURRENT_USER, "SOFTWARE\\Software Nmae\\", 0, KEY_READ, &hkeyDXVer);

    if(ERROR_SUCCESS == lResult)
    {
       // read the version value
       lResult = RegQueryValueEx(hkeyDXVer, "RegistryValue", NULL, &dwType, (BYTE*)szVersion, &dwDataSize);
       if(ERROR_SUCCESS == lResult)
       {
          std::cout << "Value - " << szVersion << std::endl;
       }
    }

    system("pause");
    return 0;
} 
```

此代码在所有版本的 Windows 上都能完美运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:53:32.603

TEXT() 宏指示可以使用 Unicode 版本打开密钥。

试试

```
RegOpenKeyExA(HKEY_CURRENT_USER, "<your correct Key name with backslashes>", 0, KEY_ALL_ACCESS, &hkey) 
```

# jaxb - 如何使 EclipseLink MOXy (2.3.2) 在我的根元素上省略 xmlns:ns0=""？

> ID：10834870
> 
> 赞同：1
> 
> 时间：2012-05-31T13:43:24.567
> 
> 标签：jaxb, eclipselink, moxy

我尝试编组由 EclipseLink 生成的模型。我得到的 XML 是

```
<?xml version="1.0" encoding="UTF-8"?>
<slipbox xmlns:ns0="" version="1.0">
   <guid>7c555370-ab22-11e1-bfe3-005056c00008</guid>
   <name>demo</name>
   <stocks>
      <stock guid="7c555371-ab22-11e1-bfe3-005056c00008">
         <name>local</name>
         <location>F:/GIT/Git/git/slipbox/org.jessas.slipbox.test/tests/demoslipbox/deliverables</location>
      </stock>
   </stocks>
</slipbox> 
```

我的问题是，如何强制 MOXy JAXB 省略`xmlns:ns0=""`声明，以便 XML 中的第二行读取

```
<slipbox version="1.0"> 
```

对不起，如果这是一个愚蠢的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:42:55.653

基于评论部分的讨论。此问题的解决方案是更新到 EclipseLink 2.3.3。

# javascript - 在 jquery 中访问兄弟姐妹

> ID：10834872
> 
> 赞同：0
> 
> 时间：2012-05-31T13:43:29.523
> 
> 标签：javascript, jquery

我想访问列的兄弟：

```
 <tr>
    <td>1</td>
    <td>2</td>
    <td>3</td>
   </tr> 
```

当我点击 3 时，我如何访问 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T13:44:31.173

你可以使用`.siblings`jquery函数

[http://api.jquery.com/siblings/](http://api.jquery.com/siblings/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:49:47.160

如果我很好理解；

```
var td = $('tr td'), len = td.length;
td.on('click', function() {
    var i = (td.index(this) + 1) % len;
    console.log(td.eq(i));
}); 
```

这将返回

*   `td`当你点击第 1次时，第 2 次`td`
*   3rd`td`当你点击 2nd`td`
*   `td`当你点击第 3 次时第 1次`td`

小提琴示例：http: [//jsfiddle.net/BmYue/2/](http://jsfiddle.net/BmYue/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T13:50:53.103

您可以使用 -

```
$('td:last').on('click', function(){
    $(this).siblings('td:first').css('color', 'red');
}) 
```

**演示**：http: [//jsfiddle.net/RK56q/](http://jsfiddle.net/RK56q/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T13:47:06.427

或者您也可以使用 .parent() 和 .children() 方法来访问它。

```
$(this).parent().children() 
```

但更简单的版本是 .siblings jquery 函数。

[http://api.jquery.com/parent/](http://api.jquery.com/parent/) http://api.jquery.com/children/

# php - 如何在 Mysql 中更新图像

> ID：10834876
> 
> 赞同：3
> 
> 时间：2012-05-31T13:43:40.480
> 
> 标签：php, mysql, image, image-uploading

我有一个将图像上传到文件夹的 php 页面，名称插入到 mysql 表中。现在我想创建一个页面来更新图片并删除目录文件夹中的旧图片或用新图片替换旧图片。

这是不更新图像或其他字段的代码。

```
 <?php
// Start a session for error reporting
session_start();

// Call our connection file
require("includes/conn.php");

// Set some constants

// This variable is the path to the image folder where all the images are going to be stored
// Note that there is a trailing forward slash
$TARGET_PATH = "images/";

// Get our POSTed variables
$name = $_POST['name'];
$description  = $_POST['description '];
$price = $_POST['price'];
$image = $_FILES['image'];
$serial = $_POST['serial'];

// Sanitize our inputs
$name = mysql_real_escape_string($name);
$description = mysql_real_escape_string($description);
$price = mysql_real_escape_string($price);
$image['name'] = mysql_real_escape_string($image['name']);

// Build our target path full string.  This is where the file will be moved do
// i.e.  images/picture.jpg
$TARGET_PATH .= $image['name'];

// Here we check to see if a file with that name already exists
// You could get past filename problems by appending a timestamp to the filename and then continuing
if (file_exists($TARGET_PATH))
{
        $_SESSION['error'] = "A file with that name already exists";
        header("Location: updateproduct.php");
        exit;
}

// Lets attempt to move the file from its temporary directory to its new home
if (move_uploaded_file($image['tmp_name'], $TARGET_PATH))
{
        // NOTE: This is where a lot of people make mistakes.
        // We are *not* putting the image into the database; we are putting a reference to the file's location on the server
        $sql = "UPDATE products SET picture = '$image', description = '$description' ,price = '$price' ,name = '$name'  WHERE serial = '$serial'";

 $result = mysql_query($sql) or die ("Could not insert data into DB: " . mysql_error());
        header("Location: updateproduct.php");
        exit; 

}
else
{
        // A common cause of file moving failures is because of bad permissions on the directory attempting to be written to
        // Make sure you chmod the directory to be writeable
        $_SESSION['error'] = "Could not upload file.  Check read/write persmissions on the directory";
        header("Location: updateproduct.php");
        exit;
}
?> 
```

这是表格

```
 <?php require_once('Connections/shopping.php'); ?>
<?php
$colname_Recordset1 = "1";
if (isset($_POST['serial'])) {
  $colname_Recordset1 = (get_magic_quotes_gpc()) ? $_POST['serial'] : addslashes($_POST['serial']);
}
mysql_select_db($database_shopping, $shopping);
$query_Recordset1 = sprintf("SELECT * FROM products WHERE serial = %s", $colname_Recordset1);
$Recordset1 = mysql_query($query_Recordset1, $shopping) or die(mysql_error());
$row_Recordset1 = mysql_fetch_assoc($Recordset1);
$totalRows_Recordset1 = mysql_num_rows($Recordset1);
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<title>Untitled Document</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
</head>

<body>

<div align="center">
  <form method="post" name="form1" action="updateupload.php">
    <table align="center">
      <tr valign="baseline">
        <td nowrap align="right">Serial:</td>
        <td><?php echo $row_Recordset1['serial']; ?></td>
      </tr>
      <tr valign="baseline">
        <td nowrap align="right">Name:</td>
        <td><input type="text" name="name" value="<?php echo $row_Recordset1['name']; ?>" size="32"></td>
      </tr>
      <tr valign="baseline">
        <td nowrap align="right">Description:</td>
        <td><input type="text" name="description" value="<?php echo $row_Recordset1['description']; ?>" size="32"></td>
      </tr>
      <tr valign="baseline">
        <td nowrap align="right">Price:</td>
        <td><input type="text" name="price" value="<?php echo $row_Recordset1['price']; ?>" size="32"></td>
      </tr>
      <tr valign="baseline">
        <td nowrap align="right">Picture:</td>
        <td><input type="file" name="picture" value="<?php echo $row_Recordset1['picture']; ?>" size="32"></td>
      </tr>
      <tr valign="baseline">
        <td nowrap align="right">&nbsp;</td>
        <td><input name="submit" type="submit" value="Update record"></td>
      </tr>
    </table>
  </form>
</div>
</body>
</html>
<?php
mysql_free_result($Recordset1);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:00:28.250

我想你想念

```
enctype="multipart/form-data" 
```

处理文件。

[http://www.w3schools.com/php/php_file_upload.asp](http://www.w3schools.com/php/php_file_upload.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T14:08:03.633

[取消链接](http://www.php.net/manual/en/function.unlink.php)功能可能正是您想要的

```
if (file_exists($PATH_TO_IMAGE))
{
       unlink($PATH_TO_IMAGE);            
} 
```

# mule - 在 Mule ESB 应用程序启动时恢复持久 vm 队列

> ID：10834877
> 
> 赞同：1
> 
> 时间：2012-05-31T13:43:42.537
> 
> 标签：mule

我正在尝试使用持久队列的 vm 传输；这是连接器配置：

```
<vm:connector 
        name="vmConnector"
        createMultipleTransactedReceivers="true"
        numberOfConcurrentTransactedReceivers="20">
    <vm:queue-profile maxOutstandingMessages="50000">
        <file-queue-store/>
    </vm:queue-profile>
</vm:connector> 
```

传输工作正常并且传输，.msg 文件正在累积在 .mule 的相应子目录中。现在，如果我杀死虚拟机（或定期关闭 mule 实例）然后重新启动 mule 和我的应用程序，我希望队列中当前消息的消耗能够恢复，但事实并非如此。

我是不是理解错了什么？我认为这种行为将是使用持久队列的一个原因。还是我的配置有问题？这是我可以从文档中收集到的全部内容，但我可能遗漏了一些东西。

编辑：经过进一步检查，我在我的应用程序日志中发现了以下投诉：

```
WARN  TransactionalQueueManager [THREAD vmConnector.scheduler.03 THREAD]: Could not commit tx 768d9b5c-ab3a-11e1-a48f-ff62aff02664[committing], rolling back instead
org.mule.util.xa.ResourceManagerException: Deleting ...\mule-enterprise-standalone-3.2.2\.mule\myapp\queuestore\work\0-768b784b-ab3a-11e1-a48f-ff62aff02664.msg failed (org.mule.api.store.ObjectStoreException)
    at org.mule.util.queue.QueueTransactionContext.doCommit(QueueTransactionContext.java:201)
    at org.mule.util.queue.TransactionalQueueManager.doCommit(TransactionalQueueManager.java:173)
    at org.mule.util.xa.AbstractResourceManager.commitTransaction(AbstractResourceManager.java:288)
    at org.mule.util.xa.DefaultXASession.commit(DefaultXASession.java:83)
    at org.mule.transport.vm.VMTransaction.doCommit(VMTransaction.java:59)
    at org.mule.transaction.AbstractTransaction.commit(AbstractTransaction.java:82)
    at org.mule.transaction.AbstractSingleResourceTransaction.commit(AbstractSingleResourceTransaction.java:78)
    at org.mule.transaction.TransactionTemplate.resolveTransaction(TransactionTemplate.java:147)
    at org.mule.transaction.TransactionTemplate.execute(TransactionTemplate.java:117)
    at org.mule.transport.TransactedPollingMessageReceiver.poll(TransactedPollingMessageReceiver.java:138)
    at org.mule.transport.AbstractPollingMessageReceiver.performPoll(AbstractPollingMessageReceiver.java:219)
    at org.mule.transport.PollingReceiverWorker.poll(PollingReceiverWorker.java:85)
    at org.mule.transport.ContinuousPollingReceiverWorker.poll(ContinuousPollingReceiverWorker.java:36)
    at org.mule.transport.PollingReceiverWorker.run(PollingReceiverWorker.java:53)
    at org.mule.work.WorkerContext.run(WorkerContext.java:310)
    at java.util.concurrent.ThreadPoolExecutor$CallerRunsPolicy.rejectedExecution(ThreadPoolExecutor.java:1746)
    at java.util.concurrent.ThreadPoolExecutor.reject(ThreadPoolExecutor.java:767)
    at java.util.concurrent.ThreadPoolExecutor.execute(ThreadPoolExecutor.java:658)
    at org.mule.work.ScheduleWorkExecutor.doExecute(ScheduleWorkExecutor.java:41)
    at org.mule.work.MuleWorkManager.executeWork(MuleWorkManager.java:250)
    at org.mule.work.MuleWorkManager.scheduleWork(MuleWorkManager.java:208)
    at org.mule.transport.PollingReceiverWorkerSchedule.run(PollingReceiverWorkerSchedule.java:35)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRunAndReset(FutureTask.java:317)
    at java.util.concurrent.FutureTask.runAndReset(FutureTask.java:150)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$101(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.runPeriodic(ScheduledThreadPoolExecutor.java:180)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:204)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: org.mule.api.store.ObjectStoreException: Deleting ...\mule-enterprise-standalone-3.2.2\.mule\myapp\queuestore\work\0-768b784b-ab3a-11e1-a48f-ff62aff02664.msg failed
    at org.mule.util.store.QueuePersistenceObjectStore.deleteStoreFile(QueuePersistenceObjectStore.java:310)
    at org.mule.util.store.QueuePersistenceObjectStore.doRemove(QueuePersistenceObjectStore.java:295)
    at org.mule.util.store.AbstractObjectStore.remove(AbstractObjectStore.java:91)
    at org.mule.util.queue.TransactionalQueueManager.doRemove(TransactionalQueueManager.java:191)
    at org.mule.util.queue.QueueTransactionContext.doCommit(QueueTransactionContext.java:193)
    ... 30 more 
```

提到的文件确实仍然存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:40:28.047

这是[一个已知错误](http://www.mulesoft.org/jira/browse/MULE-6102)，已在 3.2.3 EE 和 3.3.0 CE 中修复。

# vb.net - VB.Net 从导航控件提交表单

> ID：10834882
> 
> 赞同：0
> 
> 时间：2012-05-31T13:43:51.503
> 
> 标签：vb.net, forms, postback, form-submit

基本上，我创建了一个搜索工具，它位于每个页面的导航控件内。我的前任将每一页都设置在一个回发表单中。

我需要这些回发来继续工作，但是我需要在提交发布时进行搜索以转到单独的页面并发布数据。我在 ImageButton 上尝试了各种方法，例如“postbackURL”，但它没有做任何事情。

下面是来自我的 navigation.ascx 控件的表单代码示例：

```
 <fieldset>
            <div style="height:8px;"></div>
                <asp:TextBox Width="116px" CssClass="search-textbox" Text="Search" style="height: 25px; background-color: #FFF; z-index: 1; color:#888;" onfocus="inputFocus(this)" onblur="inputBlur(this)" id="txtCriteria" runat="server" />
                <div style="height:10px;"></div>
                <asp:DropDownList Width="150px" CssClass="searchbox" Visible="true" ID="ddlDatatype" runat="server" >
                      <asp:ListItem Text="All" Value="all"></asp:ListItem>
                      <asp:ListItem Text="Title" Value="title"></asp:ListItem>
                      <asp:ListItem Text="Brand" Value="brand"></asp:ListItem>
                      <asp:ListItem Text="Description" Value="desc"></asp:ListItem>
                </asp:DropDownList>
                <div style="height:10px;"></div>
                <asp:DropDownList Width="150px" CssClass="searchbox"  Visible="true" ID="ddlCategory" runat="server"  />
                <div style="height:14px;"></div>
                <asp:ImageButton ID="btnSubmitSearch" runat="server"  style="margin-top: -2px;" ImageUrl="/images/search-go.png" />

            </fieldset> 
```

然后需要提交到另一个页面。任何帮助将不胜感激。谢谢

更新：我已经意识到这段代码现在可以工作了，但是它不会提交并移动到下一页，因为如果所选页面上已经有一个表单正在使用，那么它就会挂起其他表单控件的验证。正在使用的验证示例是：

```
 `<asp:RequiredFieldValidator ID="rfv_txtEmail" runat="server" ControlToValidate="txtEmail" Display="Dynamic">` 
```

如果实际使用的是搜索工具而不是联系表单，是否有机会绕过此表单验证？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:33:34.043

想通了，只需使用`CausesValidation="false"`提交按钮上的属性。

# c# - Log4Net 与 AdoNetAppender - 没有任何反应

> ID：10834884
> 
> 赞同：27
> 
> 时间：2012-05-31T13:43:55.773
> 
> 标签：c#, logging, log4net

## 描述

我在我的程序集中有一个配置文件作为资源，并希望在我的应用程序中以编程方式更改 ConnectionString。

我使用加载配置`log4net.Config.XmlConfigurator.Configure`。

我有一些断点，看到配置加载成功并且连接字符串是`Data Source=localhost\SQLExpress;Initial Catalog=Log;Integrated Security=SSPI;`（本地 SQLExpress）。

## 问题

什么都没有发生，没有异常，也没有日志条目。有任何想法吗。

```
using (Stream stream = System.Reflection.Assembly.GetExecutingAssembly().GetManifestResourceStream("MyNamespace.Properties.log4net.config"))
{ 
    // stream is NOT null
    log4net.Config.XmlConfigurator.Configure(stream);
}

Hierarchy hier = LogManager.GetRepository() as Hierarchy;

if (hier != null)
{
    //get ADONetAppender
    var adoAppender = (AdoNetAppender)hier.GetAppenders().Where(appender => appender.Name.Equals("AdoNetAppender", StringComparison.InvariantCultureIgnoreCase)).FirstOrDefault();

    if (adoAppender != null)
    {
        // update connectionstring
        adoAppender.ConnectionString = configuration.GetConnectionString(ConnectionStringNames.Log).ConnectionString;
        //refresh settings of appender
        adoAppender.ActivateOptions(); 
    }
}

ILog logger = LogManager.GetLogger("MyProject"); 
logger.Warn("Test"); 
```

***log4net.config*文件的内容**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <configSections>
    <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>

  <log4net>
    <appender name="AdoNetAppender" type="log4net.Appender.ADONetAppender">
      <bufferSize value="1" />
      <connectionType value="System.Data.SqlClient.SqlConnection, System.Data,
  Version=1.0.3300.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      <connectionString value="[we will set this automatically at runtime]" />
      <commandText value="INSERT INTO Log ([Date],[Level],[Logger],[Message],[Exception])
  VALUES (@log_date, @log_level, @logger, @message, @exception)" />
      <parameter>
        <parameterName value="@log_date" />
        <dbType value="DateTime" />
        <layout type="log4net.Layout.RawTimeStampLayout" />
      </parameter>
      <parameter>
        <parameterName value="@log_level" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%p" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@logger" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%c" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@message" />
        <dbType value="String" />
        <size value="4000" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%m" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value="@exception" />
        <dbType value="String" />
        <size value="2000" />
        <layout type="log4net.Layout.ExceptionLayout" />
      </parameter>
    </appender>

    <root>
      <level value="ALL" />
      <appender-ref ref="AdoNetAppender" />
    </root>
  </log4net>
</configuration> 
```

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-31T14:16:59.023

您可以通过连接到 log4net DebugAppender 来调试 log4net：

在 app.config 文件中添加 log4net 应用设置：

```
<appSettings>
  <!-- log4net configuration when running in debug mode. -->    
  <add key="log4net.Internal.Debug" value="true" />   
</appSettings> 
```

在 log4net 配置中添加调试附加程序：

```
<appender name="DebugAppender" type="log4net.Appender.DebugAppender">
  <immediateFlush value="true" />
  <layout type="log4net.Layout.SimpleLayout" />
</appender> 
```

将 appender 添加到 log4net 配置根目录：

```
<root>
  <level value="ALL" />
  <appender-ref ref="AdoNetAppender" />
  <appender-ref ref="DebugAppender" />
</root> 
```

当您运行应用程序时，查看 Visual Studio 的输出窗口，您应该会看到 log4net 的所有内部日志记录。如果没有，则永远不会加载 log4net 配置文件。

**编辑**

如果您可以使用 app.config 文件中的连接字符串，则从 log4net AdoNetAppender 中删除连接字符串，然后按名称调用连接字符串：

```
<appender name="AdoNetAppender" type="log4net.Appender.AdoNetAppender">
  <bufferSize value="1" />
  <!-- note: you can use the 4.0 assembly -->
  <connectionType value="System.Data.SqlClient.SqlConnection,
              System.Data, 
              Version=4.0.0.0, 
              Culture=neutral, 
              PublicKeyToken=b77a5c561934e089" />
  <!-- This will retrieve a connection string by name from the app.config -->
  <connectionStringName value="ConnectionStringNameFromAppConfig" />
  <!-- snip -->
</appender> 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-06-19T03:35:45.700

以下是我尝试过的一些对我有用的事情......

*   我没有看到任何东西，因为我`<appender-ref ref="AdoNetAppender" />`没有`<appender name="AdoNetAppender" ... />`在**Web.config**中正确引用我。'AdoNetAppender' 名称需要匹配。

*   添加`<bufferSize value="1" />`到**Web.config**`<appender name="AdoNetAppender" />`的部分

***   我在 SQL 服务器上创建了一个带有密码的用户帐户，而不是使用 Windows 身份验证。授予用户访问权限以在表上执行选择和插入

    *   在**Global.asax.cs**我使用初始化 log4net`log4net.Config.XmlConfigurator.Configure();`

    *   在我的 C# 代码中，我实例化了一个新的 adoAppender 对象并调用`logger.Info("save to db");`** 

 **Apache 网站上的文档也很有帮助... [http://logging.apache.org/log4net/release/config-examples.html#MS%20SQL%20Server](http://logging.apache.org/log4net/release/config-examples.html#MS%20SQL%20Server)

希望这可以节省一些时间和挫败感。谢谢！**

# c - 为什么这个程序没有给出预期的输出？

> ID：10834888
> 
> 赞同：0
> 
> 时间：2012-05-31T13:44:00.360
> 
> 标签：c

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

```
int main()
{
    char *c = "abc";
    *c = 'd';
    printf("%s",c);
    return 0;
} 
```

当我尝试在 C 中运行该程序时，程序崩溃了。我想知道这里的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:45:52.057

因为字符串文字`abc`实际上存储在进程的只读区域中，您不应该修改它。操作系统已将相应的页面标记为只读，并且您尝试在那里写入时会出现运行时异常。

每当您将字符串文字分配给`char`指针时，始终将其限定为`const`使编译器警告您此类问题：

```
const char *c = "abc";
*c = 'd'; // the compiler will complain 
```

如果你真的想修改一个字符串文字（虽然不是直接修改它本身，而是它的副本），我建议使用`strdup`：

```
char *c = strdup("abc");
*c = 'd'; // c is a copy of the literal and is stored on the heap
...
free(c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:45:37.323

`"abc"`是一个字符串文字。

`*c = 'd'`是尝试修改该字符串文字。

您不能修改字符串文字。

# jquery - jquery ajax 获取的链接没有激活对话框

> ID：10834889
> 
> 赞同：0
> 
> 时间：2012-05-31T13:44:01.983
> 
> 标签：jquery, ajax, jquery-ui, dialog

我有一个页面，加载时会激活 jquery-ui 对话框，以便在单击链接时使用。

像这样的东西（简化）：

```
//激活链接
<div id="ckitg">点击激活</div>

//对话框（简化）
<div class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable" tabindex="-1" role="dialog" aria-labelledby="ui-dialog-title-ckitg">
    <div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
        //这里的对话内容
    </div>
</div>

```

然后我使用 AJAX 加载另一个内容。

只是ajax的相关部分。

```
(函数($){

    //将此新方法附加到jQuery
    $.fn.extend({

    //这是你写插件名字的地方
    阿贾克斯：功能（选项）{

        变量默认值 = {}

        var o = $.extend（默认值，选项）；
        返回 this.each(function() {       

        //打开容器
        $(this).click(function(){

            $.ajax({
            类型：“获取”，
            网址：someuri，
            //数据：{id：menuId}，
            缓存：假，
            成功：函数（数据）{
                $('#' + o.output).hide().delay(500).fadeIn('slow').html(data);
            }
            });
        });
        });
    }
    });
//将jQuery传递给函数，
})(jQuery);

```

该内容具有相同的激活链接：

```
  <div id="ckitg">点击激活</div>

```

但是当我尝试拉起对话时，它不起作用。

我通过在 AJAX 内容中“重新生成”对话框来使其工作，但这样我会创建开销并驱动 Opera 疯子。

任何如何在没有开销的情况下应对它的想法将不胜感激。

# android - 在android构建中导致OutOfMemory的相机图像

> ID：10834890
> 
> 赞同：0
> 
> 时间：2012-05-31T13:44:02.187
> 
> 标签：android, android-camera, android-canvas, android-camera-intent

在我的应用程序中，我正在使用相机功能，但是当我使用 5 MP 设备相机单击照片然后在我的构建中使用它然后构建导致 OutOfMemoryError 时，我该如何防止它。当点击图片并按下确定按钮时，我正在使用下面的代码将其带入我的应用程序。

```
case TAKE_P:
if (resultCode == Activity.RESULT_OK)
     {
                        Uri selectedImage = imageUri;
                        getContentResolver().notifyChange(selectedImage, null);
                        // ImageView imageView = (ImageView)
                        // findViewById(R.id.ImageView);
                        ContentResolver cr = getContentResolver();
                        Bitmap bitmap;
                        try {
                            yourselectedimage = android.provider.MediaStore.Images.Media
                                    .getBitmap(cr, selectedImage);
                            Bitmap newBitmap = Bitmap.createScaledBitmap(
                                    yourselectedimage, width1, height1, true);
                            drawabledata = new BitmapDrawable(newBitmap);
                            ll.setVisibility(View.GONE);
                            //gallery.setImageResource(R.drawable.imagegallery);
                            galleryisclicked = true;
                            if (mCanvasView != null)
                                clearcanvas();
                            fillmenu();
                            // imageView.setImageBitmap(bitmap);
                            // Toast.makeText(this, selectedImage.toString(),
                            // Toast.LENGTH_LONG).show();
                        }
                         catch (OutOfMemoryError e) {
                                Log.i("#############", "###############");
                                Timer t = new Timer();
                                t.schedule(new TimerTask() {
                                    public void run() {
                                        System.gc();
                                        System.gc();
                                    };
                                }, 1000);
                                Toast.makeText(this, "Out of Memory", Toast.LENGTH_SHORT)
                                .show();
                            }catch (Exception e) {
                            Timer t = new Timer();
                            t.schedule(new TimerTask() {
                                public void run() {
                                    System.gc();
                                    System.gc();
                                };
                            }, 1000);

                            Toast.makeText(this, "Reload again", Toast.LENGTH_SHORT)
                                    .show();
                            Log.e("Camera", e.toString());
                        }
                    } 
```

# javascript - 克隆 div 并替换 id

> ID：10834893
> 
> 赞同：0
> 
> 时间：2012-05-31T13:44:10.487
> 
> 标签：javascript, jquery

希望这不是一个重复的问题，因为我找不到答案。

我有一个需要克隆的 div。

```
<div class="phoneBookEntriesContainer">
    content here
</div> 
```

之后我必须添加一个 ID...不要问：P。

```
<script type="text/javascript">
var i = 1;
$(".phoneBookEntriesContainer").attr("id","phoneBookEntries" + i);
var doSomething = function(){

    $(".phoneBookEntriesContainer").attr("id","phoneBookEntries" + i);
    $("#phoneBookEntries" + i).clone().insertAfter("#phoneBookEntries" + i);

    i ++;
};
</script> 
```

上面的代码有点工作，但不是给我的 div 唯一的 id，而是用相同的 id 替换所有这些。

所以一开始我会有一个`#phoneBookEntries1`div，在单击按钮运行该功能后，我有两个`#phoneBookEntries2`div 等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T13:47:28.347

`$(".phoneBookEntriesContainer")`返回具有类的所有 DOM 元素的数组`phoneBookEntriesContainer`。因此，当您使用 时`attr`，它会替换所有这些元素上的 id。如果您只想在特定元素上替换它，则需要指定哪一个。

您可以通过以下方式做到这一点：

```
//picks the last instance
$(".phoneBookEntriesContainer").last().attr("id","phoneBookEntries" + i);

//picks the last instance
$(".phoneBookEntriesContainer").first().attr("id","phoneBookEntries" + i);

//picks the 3rd instance
//.eq() is 0-indexed
$(".phoneBookEntriesContainer").eq(2).attr("id","phoneBookEntries" + i); 
```

为了实现你想要的，你应该使用 jQuery 的`.each()`方法遍历所有元素。有关详细信息，请参阅 Hidde 的回答。

如果你想克隆你的 div 并每次都给它一个新的 ID，请使用一个变量来跟踪要附加的数字。

**[在此处查看演示](http://jsfiddle.net/uEZXe/4/)**

这是jQuery代码

```
$(document).ready(function(){

        var currentID = 1;

        $('button').on('click',function(){
            currentID++;
            $('.foobar')
                .first()
                .clone()
                .appendTo('#wrapper')
                .attr('id','span' + currentID)
                .text('This has an ID of ' + currentID);

        });

});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T13:48:54.913

我建议遍历每个`.phoneBookEntriesContainer`：

```
$(".phoneBookEntriesContainer").each (function (i, el) {
    el.attr('id', ('phoneBookEntries' + (i+1)));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T14:45:46.243

您的代码似乎有点混乱，所以我在这里创建了一个非常详细的版本：http: [//jsfiddle.net/SY3aA/2/](http://jsfiddle.net/SY3aA/2/)

单击工作示例中的内容，它会添加另一个内容（您需要修改我认为的内容）

首先，我给你的第一个 ID 属性为 0；我放了一些类添加/删除，这样你就可以看到发生了什么。我出于同样的目的添加了文本以反映添加的元素 id。

```
var i = 1;
$(".phoneBookEntriesContainer").attr("id", "phoneBookEntries0");

var doSomething = function() {
    var myclone = $(".phoneBookEntriesContainer").eq(0).clone();
    $(".phoneBookEntriesContainer").removeClass("lastAdd imprev");

    var myentry = 'phoneBookEntries' + i;
    var myPrevEntry = '#phoneBookEntries' + (i - 1);
    var prev = $(myPrevEntry);
    prev.addClass('imprev');
    myclone.attr('id', myentry).insertAfter(prev);
    $('#' + myentry).text($('#' + myentry).text() + myentry);
    //this toggle seemed confusing so I changed it
    $('#' + myentry).addClass("lastAdd");

    i++;
}

$(document).on("click", '.phoneBookEntriesContainer', function() {
    $(".phoneBookEntriesContainer").removeClass("mydiv");
    $(this).addClass('mydiv');
    doSomething();
}); 
```

使用这个 CSS：

```
.mydiv{border:solid 1px lime;}
.lastAdd{background-color:aqua;}
.imprev{border:solid blue 2px;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T14:05:14.563

```
<div class="content"></div> 
```

javascript：

```
var myFuntion = function(){
   var id = '' + $('.content').children().length;
   $('.content').append("<div class='phoneBookEntriesContainer' id='"+ id +"'></div>");
} 
```

它将在 .content div 中添加您的条目

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T13:59:42.293

您可以使用[length](http://www.w3schools.com/jsref/jsref_length_string.asp)属性来获取元素的总数并将其附加到您的 ID 前缀，如下所示：

**HTML**

```
<div class="phoneBookEntriesContainer">
    content here
</div>

<a href="#" class="cloneDiv">Click to Clone</a> 
```

**JavaScript**

```
// Bind to Clone Button //
$('.cloneDiv').bind('click', function(e){  

    // Prevent Default Action //
    e.preventDefault();

    // Create Clone //
    var $clone = $('.phoneBookEntriesContainer').filter(':last').clone();

    // Create Unique ID using Length //
    var cloneID = 'phoneBookEntries'+$('.phoneBookEntriesContainer').length;

    // Append to Body and Add Unique ID //
    $clone.attr('id', cloneID);
    $('.phoneBookEntriesContainer').filter(':last').after($clone);
});​ 
```

[JSFiddle 这里](http://jsfiddle.net/ex7JF/1/)

我希望这有帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T14:01:32.037

```
// set first container id
$(".phoneBookEntriesContainer").attr("id","phoneBookEntries1");

// on button click
$("#mybutton").click(function(){
    // calculate the new ID as phoneBookEntries count + 1
    var newID = "phoneBookEntries" + ($("div[id^='phoneBookEntries']").size() + 1);
    // insert the new div after the last one
    $("<div id='"+newID+"'></div>").insertAfter($("div[id^='phoneBookEntries']").last());
    // add the class to the divs which doesn't have it
    $("div[id^='phoneBookEntries']").addClass("phoneBookEntriesContainer");
}); 
```

# php - SOAPClient - 为什么我的请求看起来与所需的请求如此不同？

> ID：10834896
> 
> 赞同：0
> 
> 时间：2012-05-31T13:44:18.597
> 
> 标签：php, soap, wsdl

所以我有一个提要，它要求我发送一个标题为“CredentialsHeader”的用户名和密码，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<soap12:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://www.w3.org/2003/05/soap-envelope">
  <soap12:Header>
    <CredentialsHeader xmlns="http://www.property24.com/Services/P24ListingService13">
      <EMail>string</EMail>
      <Password>string</Password>
    </CredentialsHeader>
  </soap12:Header>
  .... 
```

所以为了在我的 PHP 中得到这个，我这样做：

```
$headers = array();
$CredentialObject = new SoapVar(array('EMail' => 'ricky@email.com', 'Password' => 'test'), SOAP_ENC_OBJECT);
$headers[] = new SoapHeader('dto', "CredentialsHeader", $CredentialObject, false
);
$client->__setSoapHeaders($headers);
$client->__soapCall('EchoAuthenticated', array("hello"=>"hi")); 
```

现在我的请求看起来像

```
<?xml version="1.0" encoding="UTF-8"?> 
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://www.property24.com/Services/P24ListingService13" xmlns:ns2="dto">
<SOAP-ENV:Header>
    <ns2:CredentialsHeader>
        <EMail>ricky@email.com</EMail>
        <Password>test</Password>
    </ns2:CredentialsHeader>
</SOAP-ENV:Header>
.... 
```

这使身份验证失败 - 为什么我生成的 SOAP 请求与第一个示例块如此不同？我怎样才能让它看起来一样？

# ios - 在 iPad 视网膜模式下，CAShapeLayer 未在模拟器中绘制

> ID：10834900
> 
> 赞同：4
> 
> 时间：2012-05-31T13:44:34.043
> 
> 标签：ios, ios5, ios-simulator, retina-display, cashapelayer

我有一小段代码，它画了一个圆圈作为 CAShapeLayer：

```
- (void) viewWillAppear:(BOOL)animated {
    CGFloat size = MIN(self.view.frame.size.width, self.view.frame.size.height);
    CAShapeLayer *circleLayer = [CAShapeLayer layer];
    circleLayer.fillColor = [[UIColor redColor] CGColor];
    circleLayer.frame = CGRectMake((self.view.frame.size.width - size) / 2.0 ,(self.view.frame.size.height - size) / 2.0, size, size);
    CGMutablePathRef pathRef = CGPathCreateMutable();
    CGPathAddEllipseInRect(pathRef, NULL, CGRectMake(0, 0, size, size));
    circleLayer.path = pathRef;
    CGPathRelease(pathRef);

    [self.view.layer addSublayer:circleLayer];
} 
```

圆圈在 iPad 2 和非视网膜模式下的模拟器中正确显示。当我将模拟器切换到视网膜模式时，根本不显示圆圈。不幸的是，我还没有真正的 iPad 3，所以我不能说它是否可以在实际设备上运行。谁能解释一下，我做错了什么？

更新：我将此作为错误报告给 Apple。他们告诉我，这个错误是重复的，另一个错误仍然是开放的。一段时间后它关闭了，但在最后一次 XCode 更新后它仍然可以重现

更新 2：在真正的 iPad 3 上检查过。工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T16:20:29.133

的确！使用您的代码，如果`circleLayer`'s`size`为 512 或更高，则圆圈不会显示在模拟器的视网膜 iPad 上...

现在，鉴于我希望今晚能够安然入睡，这里有一个使用 CALayer 的`cornerRadius`属性来解决问题的解决方法：

```
-(void)viewWillAppear:(BOOL)animated{
    [super viewWillAppear:animated]; //always call super

    CGFloat size = MIN(self.view.frame.size.width, self.view.frame.size.height);
    NSLog(@"size: %f", size);

    CALayer *circleLayer = [CALayer layer];
    [circleLayer setBackgroundColor:[UIColor redColor].CGColor];
    circleLayer.frame = CGRectMake((self.view.frame.size.width - size) / 2.0 ,(self.view.frame.size.height - size) / 2.0, size, size);

    circleLayer.cornerRadius = size/2;

    [self.view.layer addSublayer:circleLayer];
} 
```

这也会在 iPad 视网膜模拟器中显示相同的圆圈。

# objective-c - 使用 Obj-C、Xcode 和 libxml2 的简单 libxml2 XML 解析示例？

> ID：10834903
> 
> 赞同：2
> 
> 时间：2012-05-31T13:44:43.993
> 
> 标签：objective-c, ios, xml, sax, libxml2

有人可以给我一个使用 libxml2 解析 XML 文件的例子吗？

```
<item>
    <title>Turtle</title>
    <type>Reptile</type>
</item>
<item>
    <title>Dog</title>
    <type>Mammal</type>
</item> 
```

我花了很多时间寻找解决方案，但我找不到。我已经成功地将框架和标题添加到源路径中。

非常感谢您的任何建议。

# maven - 在 Maven 中修改战争覆盖内的资源

> ID：10834904
> 
> 赞同：9
> 
> 时间：2012-05-31T13:44:44.370
> 
> 标签：maven, overlay, maven-war-plugin

我目前有这个设置：

项目 A 输出一个战争文件 - 有一个配置文件 (WEB-INF/web.xml)。我们已经通过注释掉的配置部分来交付它，当项目部署在特定环境中时，它会手动取消注释。

项目的需求发生了变化——我需要在完全没有该部分配置的情况下构建项目 A；并且我需要使用该配置部分构建另一个项目（项目 B）（启用，未注释掉）。

我希望我可以让项目 B 依赖于项目 A（通过战争覆盖），而不是在两个项目中都存在该文件（双重维护），然后使用 maven-config-processor-plugin 将我的特殊配置添加到 WEB -INF/web.xml，然后重新打包war文件。

这似乎不起作用 - 虽然 - 如果目标已经存在（即在上一次运行之后），配置修改可以工作，但是当我一起运行所有内容时，覆盖和重新打包到新战争中一起发生 - 我可以' t 想办法让 config-processor 插件在中间运行。基本上，默认顺序最终是“config-processor”（由于覆盖尚未发生而失败），然后是“war”（全部作为一个单元）。我不能让配置处理器在覆盖之后但在战争完全打包之前发生。

过去几年，互联网上的多人询问是否有办法在“解包覆盖”和“重新打包战争文件”步骤之间注入插件，但似乎没有人明确回答这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T15:39:17.053

由于战争覆盖和战争包装似乎都是作为单一目标的一部分发生的，我认为没有办法进入其中。作为一种解决方法，您可以`web.xml`在早期阶段提取并处理它。maven-dependency-plugin 可以在项目 B 中用于`web.xml`从项目 A 中提取到工作目录中，然后运行 ​​maven-config-processor-plugin`web.xml`并将结果放在其他地方，然后指示 maven-war-plugin 包含已处理的`web.xml`在覆盖之前。在项目 B 的 POM 中：

```
<plugins>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-dependency-plugin</artifactId>
        <version>2.4</version>
        <executions>
            <!-- Extract web.xml from Project A -->
            <execution>
                <id>unpack-webxml</id>
                <phase>generate-resources</phase>
                <goals>
                    <goal>unpack</goal>
                </goals>
                <configuration>
                    <artifactItems>
                        <artifactItem>
                            <groupId>your.group</groupId>
                            <artifactId>project.a</artifactId>
                            <version>...</version>
                            <type>war</type>
                            <overWrite>true</overWrite>
                            <outputDirectory>${project.build.directory}/myconfig/work</outputDirectory>
                            <includes>WEB-INF/web.xml</includes>
                        </artifactItem>
                    </artifactItems>
                </configuration>
            </execution>
        </executions>
    </plugin>
    <plugin>
        <groupId>com.google.code.maven-config-processor-plugin</groupId>
        <artifactId>maven-config-processor-plugin</artifactId>
        <version>2.0</version>
        <executions>
            <!-- Process extracted web.xml and place in temp build directory -->
            <execution>
                <id>process-webxml</id>
                <goals>
                    <goal>process</goal>
                </goals>
                <configuration>
                    <outputDirectory>${project.build.directory}/myconfig/build</outputDirectory>
                    <transformations>
                        <transformation>
                            <input>${project.build.directory}/myconfig/work/WEB-INF/web.xml</input>
                            <output>WEB-INF/web.xml</output>
                            <!-- your transformation config -->
                        </transformation>
                    </transformations>
                </configuration>
            </execution>
        </executions>
    </plugin>
    <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.1.1</version>
        <configuration>
            <webResources>
                <!-- Instruct war plugin to include temp build directory in webapp -->
                <resource>
                    <directory>${project.build.directory}/myconfig/build</directory>
                    <includes>
                        <include>**</include>
                    </includes>
                </resource>
            </webResources>
            <overlays>
                <!-- Overlay customization if needed -->
            </overlays>
        </configuration>
    </plugin>
</plugins> 
```

据我所知，war插件`webResources`首先包括，然后是`src/main/webapp`，然后是叠加层。

我不熟悉 maven-config-processor-plugin，所以如果我的配置不正确，我深表歉意。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-31T15:40:14.690

您可以使用[maven-dependency-plugin 的 unpack 目标](http://maven.apache.org/plugins/maven-dependency-plugin/unpack-mojo.html)来获取项目 A 以在本地获取 web.xml，然后对其进行转换并将[maven-war-plugin 指向转换后的 web.xml](http://maven.apache.org/plugins/maven-war-plugin/war-mojo.html#webXml)。

```
 <build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <version>2.4</version>
            <executions>
              <execution>
                <id>unpack</id>
                <phase>generate-resources</phase>
                <goals>
                  <goal>unpack</goal>
                </goals>
                <configuration>
                  <artifactItems>
                    <artifactItem>
                      <groupId>org.test</groupId>
                      <artifactId>test-war1</artifactId>
                      <version>0.0.1-SNAPSHOT</version>
                      <type>war</type>
                    </artifactItem>           
                  </artifactItems>
                  <outputDirectory>${project.build.directory}/wars</outputDirectory>
                </configuration>
              </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>com.google.code.maven-config-processor-plugin</groupId>
            <artifactId>maven-config-processor-plugin</artifactId>
            <version>2.0</version>
            <configuration>
                <!-- 
                  configure to transform file
                  ${project.build.directory}/wars/WEB-INF/web.xml
                  into
                  ${project.build.directory}/transformed/web.xml
                 -->
            </configuration>
            <executions>
                <execution>
                    <goals>
                        <goal>process</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
              <warSourceDirectory>src/main/webapp</warSourceDirectory>
              <webXml>${project.build.directory}/transformed/web.xml</webXml>
            </configuration>
        </plugin>
    </plugins>
  </build> 
```

# android - 将数据从 android 提交到服务器的方法（OData 与 CouchDB）

> ID：10834905
> 
> 赞同：0
> 
> 时间：2012-05-31T13:44:48.313
> 
> 标签：android, mysql, couchdb, odata

我正在编写一个 android 应用程序，它从用户那里收集数据并将数据存储在设备上的 SQLite 数据库中。现在我想在服务器上收集这些数据。

因为我的用例非常简单：单向数据提交，我不想在服务器上实现一个 REST 接口来接收我的数据。所以我正在调查是否可以将 SQLite 数据库同步到 MySQL 服务器。我发现 OData 协议在这里提供了一些可能性，因为这里有 PHP 和 MySQL 的库。

一位朋友告诉我应该使用 CouchDB，因为我可以通过 HTTP-PUT/POST 方法将我的数据发布到 CouchDB 中。

现在的问题是，我应该使用什么技术来完成这项任务？

在我看来，OData 协议似乎很有趣，但是 Mysql/PHP 的库看起来非常过时，并且开源项目上没有任何活动。由于我不想切换到 Microsoft World，我害怕在这项技术上投入时间。

在我的服务器上，我可以相对灵活地选择我想使用的技术，我可以毫无问题地安装像 couchdb 这样的花哨的东西。不仅如此，我认为如果我实现更多功能，我会更加灵活。

您认为提交我的数据最简单的方法是什么？我也应该看看 TouchDB 之类的东西吗？

# android - Android中WebView中的半透明背景颜色

> ID：10834914
> 
> 赞同：1
> 
> 时间：2012-05-31T13:45:47.240
> 
> 标签：android, android-webview

我在其中一个布局中有一个 webview，我想让 webview 的背景颜色透明。我尝试了一些不同的方法

`webView.setBackgroundColor(Color.argb(128, 0, 0, 0));`

这个对我有用。但问题是我不能让整个 webview 透明，只有 webview 的右侧有一个小条透明背景，webview 的其余部分有黑色背景。使整个 webview 透明的任何想法？这里我上传了截图，你可以查看我的 xml 和 java 代码。如果您还知道如何使视图具有半径边界，它也可能很好。谢谢

```
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.aboutus);

    String webData = StringHelper.addSlashes("<font color=\"#6495ed\">TEST</font>");

    webView = (WebView) findViewById(R.id.webview);
    webView.loadData(webData, "text/html", "UTF-8");
    webView.setBackgroundColor(Color.argb(128, 0, 0, 0));
}

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="@drawable/bg2"
android:weightSum="100" >

<ImageView 
    android:id="@+id/about_us_header_image"
    android:layout_height="0dip"
    android:layout_width="match_parent"
    android:background="@drawable/header"
    android:layout_weight="20"
    android:visibility="invisible"
    />

<WebView
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="0dip"
    android:layout_weight="80"
    android:layout_margin="20dp"
    />
</LinearLayout> 
```

![在此处输入图像描述](../Images/0de0939b9282f00822bad8d2395bdb95.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T07:46:21.967

在 stackoverflow 上搜索后，我发现它不仅有这个问题，而且我找到了适用于 2.2xx 和 2.3xx 的解决方法，这里是下面的链接..

[这](https://stackoverflow.com/a/10845986/1080954)是我的解决方案的链接。

# android - 插入新联系人时自动联系人聚合不起作用

> ID：10834915
> 
> 赞同：4
> 
> 时间：2012-05-31T13:45:47.580
> 
> 标签：android, contacts, column-aggregation

我使用以下代码将 2 次相同的联系人插入 Android 模拟器（2.3.3）：

```
ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

ops.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI)
   .withValue(RawContacts.AGGREGATION_MODE, RawContacts.AGGREGATION_MODE_DEFAULT)
   .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null)
   .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null).build());

// structuredname
ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
   .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
   .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.StructuredName.CONTENT_ITEM_TYPE)
   .withValue(ContactsContract.CommonDataKinds.StructuredName.DISPLAY_NAME, "Test")
   .withValue(ContactsContract.CommonDataKinds.StructuredName.FAMILY_NAME, "Tester")
   .withValue(ContactsContract.CommonDataKinds.StructuredName.GIVEN_NAME, "Test")
   .build());

// PHONE
ops.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
   .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
   .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
   .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, "0")
   .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, "12345678").build());

try {
  getContentResolver().applyBatch(ContactsContract.AUTHORITY, ops);
} catch (RemoteException e) {
  e.printStackTrace();
} catch (OperationApplicationException e) {
  e.printStackTrace();
} 
```

根据我的理解，Android 通常应该自动聚合联系人，使我的 2 个插入项中的一个条目。但是这不会发生，我可以在拨号器应用程序中看到 2 个具有相同数据的联系人。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-13T17:55:23.923

聚合仅适用于来自不同帐户的插入联系人。如果您插入来自同一帐户的两个原始联系人，它们将不会被聚合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:49:49.373

嗨@nr1，我在向现有联系人添加自定义类型的类似代码时遇到了同样的问题，我意识到如果您向联系人添加两次相同的数据，它就会分开。

正如[API 文档](http://developer.android.com/resources/articles/contacts.html)所说：

自动聚合不是永久的；组成原始联系人的任何更改都可能创建新的聚合**或分解现有**的聚合。

我不知道为什么，但它总是这样，如果你这样做更多次，就会创建更多带有数据的空联系人（在我的情况下）。

我现在查看联系人是否已经存在，因此不会再次添加自定义数据。

# symfony - 如何在创建另一个实体时创建一个实体并将其分配给第一个？

> ID：10834918
> 
> 赞同：0
> 
> 时间：2012-05-31T13:45:57.030
> 
> 标签：symfony, doctrine-orm

我有一个需要默认工作组实体的用户实体。我会在用户创建时创建这个默认工作组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:11:41.133

在用户实体的构造函数中创建工作组怎么样？

如果我对您的问题的理解正确，您可以执行以下操作：

```
class User
{
    // annotations left out

    private $firstName;
    ...
    private $workGroup;

   public function __construct()
   {
       $this->workGroup = new WorkGroup('default');
   }
} 
```

您必须设置用户和工作组之间关系的级联选项，以便自动保留非托管工作组。如果在某些特殊情况下您想在创建时为用户分配另一个工作组，您可以在持久化用户对象之前覆盖它。

```
// user with default workgroup
$user = new User();
$em->persist($user);

// user with special non default workgroup
$specialUser = new User();
$specialUser->setWorkGroup($taskForce);
$em->persist($specialUser); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:35:53.367

SF2 中的表单元素可以是其他表单。因此，您可以在表单中添加一个元素，该元素属于创建工作组的表单类型。如果实体设置正确，它将为您处理设置用户的所有内容。

# javascript - 为什么内联javascript不起作用？

> ID：10834919
> 
> 赞同：-3
> 
> 时间：2012-05-31T13:46:08.580
> 
> 标签：javascript

这段代码在我的 Firefox 12 浏览器上不起作用。

```
javascript:alert("hi"); 
```

但它适用于IE8。

有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:49:37.830

请参阅[http://support.mozilla.org/en-US/questions/876916#answer-248299](http://support.mozilla.org/en-US/questions/876916#answer-248299)

> 您不能再通过 Firefox 6 及更高版本中的位置栏运行 JavaScript 代码。您可以在工具 > 错误控制台中看到错误消息。出于安全原因，该代码现在获得空主体并且没有任何效果（错误 656433）。您需要创建一个（关键字）书签并通过调用该书签来运行代码。
> 
> NoScript 可以让您通过地址栏运行此类代码，请参阅：
> 
> ```
> http://forums.informaction.com/viewtopic.php?f=18&t=6488&p=27991 
> ```

谷歌浏览器有不同的做法，如果你复制粘贴`javascript:`到你的地址栏，它会被默默吞下。只有在地址栏中直接写出来才能运行。

两种浏览器都带有一个内置控制台，可用于运行影响当前页面的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:50:27.220

安装 firebug，您可以在控制台上运行它（通过键入 F12）并且：

```
 alert("hi"); 
```

[Firebug 插件下载页面](https://addons.mozilla.org/ca/firefox/addon/firebug/)

# iphone - 单击搜索按钮后单击 UISearchBar 的十字按钮使应用程序崩溃？

> ID：10834920
> 
> 赞同：0
> 
> 时间：2012-05-31T13:46:12.087
> 
> 标签：iphone, objective-c, ios

大家好，我已经编写了以下代码来实现搜索栏并且工作正常

```
 - (BOOL)searchBarShouldBeginEditing:(UISearchBar *)searchBar
{
 return YES;
}// return NO to not become first responder

- (void)searchBarTextDidBeginEditing:(UISearchBar *)searchBar
{
 isSearchOn=YES;
}

- (void)searchBarCancelButtonClicked:(UISearchBar *)searchBar
{
 searchBar.text=@"";
 isSearchOn=NO;
 [searchBar resignFirstResponder];
}

- (void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText
{
 if ([searchText length]>0) 
  isSearchOn=YES;
 else
  isSearchOn=NO;

 NSLog(@"search text %@",searchText);
 [self searchText:searchText];
 [table reloadData];
}

- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar
{
 isSearchOn=NO;
 [searchBar resignFirstResponder];
}

-(void)searchText:(NSString*)str
{
 NSLog(@"search text");
 [resultArray removeAllObjects];

 if (segmentControl.selectedSegmentIndex==0) {
  for (NSDictionary *CellDix in FriendSuggestion) 
  {
   NSRange titleResultRange =  [[CellDix valueForKey:@"itemid.item"] rangeOfString:str options: (NSCaseInsensitiveSearch | NSLiteralSearch)];

   NSRange titleRangePopular=[[CellDix valueForKey:@"usagecategoryid.usagecategory"] rangeOfString:str options:(NSCaseInsensitiveSearch | NSLiteralSearch)];

   if (titleResultRange.length > 0 || titleRangePopular.length>0)
    [resultArray addObject:CellDix];
  }
 }else
 {
  for (NSDictionary *CellDix in popularSuggestion) 
  {
   NSRange titleResultRange =  [[CellDix valueForKey:@"itemid.item"] rangeOfString:str options: (NSCaseInsensitiveSearch | NSLiteralSearch)];

   NSRange titleRangePopular=[[CellDix valueForKey:@"usagecategoryid.usagecategory"] rangeOfString:str options:(NSCaseInsensitiveSearch | NSLiteralSearch)];

   if (titleResultRange.length > 0 || titleRangePopular.length>0)
    [resultArray addObject:CellDix];
  }
 }

 NSLog(@"cellDics  array  %@",resultArray);
} 
```

但是我遇到的问题是，当我在搜索栏上搜索文本然后单击搜索然后单击搜索栏文本右侧的十字按钮然后应用程序崩溃任何人都知道如何删除此问题。谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:20:06.250

```
Add one more delegate method.

    - (void)searchBarTextDidEndEditing:(UISearchBar *)searchBar
    {
     searchBar.text=@"";
    }

it is not genuine but from this your problem will be solved. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-05T14:48:08.870

您应该检查搜索栏是否是“textDidChange：”方法中的第一响应者。

目标 C

```
 -(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {
    if ([searchText isFirstResponder]) {
      // do whatever you need to do
    }
} 
```

迅速

```
func searchBar(searchBar: UISearchBar, textDidChange searchText: String) {
        if searchBar.isFirstResponder() {
          // do whatever you need to do
        }
} 
```

# django - 在 Django 中使用 ModelForm 添加到数据库

> ID：10834923
> 
> 赞同：5
> 
> 时间：2012-05-31T13:46:21.267
> 
> 标签：django, forms, django-forms

Django 新手，我已经用尽了所有论坛和教程，但我仍然无法将表单数据导入数据库。我有一个简单的模型，它包含一个名称和一个电子邮件字段，我最终将在程序中引用它们。单击提交后我可以加载不同的页面，但我的数据不会发布到数据库。我已经尝试了我能想到的一切，所以我的代码可能在这一点上被劫持了，但在当前的迭代中，这就是我所拥有的：

```
#models.py
    from django.db import models
from django.forms import ModelForm

class Patron(models.Model):
    name = models.CharField(max_length=200)
    email = models.EmailField(max_length=75)

    def _unicode_(self):
        return self.name

class PatronForm(ModelForm):
    class Meta:
        model = Patron

#view.py

from django.shortcuts import render_to_response, get_object_or_404
from patrons.models import Patron 
from django.template import RequestContext
from django.core.context_processors import csrf
from django.core.urlresolvers import reverse
from django.forms import ModelForm

def index(request):
    if request.method == 'POST':
        post = request.POST
        name = post['name']
        email = post['email']
        f = PatronForm(request.Post)
        new_patron = f.save()
    return render_to_response('patrons/index.html',
                               context_instance=RequestContext(request))

#html
 <body>
    <h1>/Picture Taker/</h1>

    <form aciton="." name="patron" method="post" >
    {% csrf_token %}

        <label>
            <div>name</div> <input type="text" name="name" id="name" value="{{name}}">
        </label>
        <label>
            <div>email</div> <input type="text" name="email" id="email" value="{{email}}">
        </label>

        <div class="error">{{error}}</div>
        <input type="submit" value="Submit">
    </form>

</body> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T13:52:49.607

所有的

```
post = request.POST
name = post['name']
email = post['email']
f = PatronForm(request.Post)
new_patron = f.save() 
```

可以重写为（注意 的大小写`request.POST`）：

```
f = PatronForm(request.POST)
new_patron = f.save() 
```

但是您应该在保存之前检查表单中的错误，因此：

```
f = PatronForm(request.POST)
if f.is_valid():
    new_patron = f.save() 
```

您的表单标签中也有错字，它应该是“action”，而不是“aciton”。您在模板中的 {{ error }} 并不引用您视图中存在的任何内容。在调试时，让表单呈现自己可能会有所帮助，例如：

```
{{ form.as_p }} 
```

因此您可以在表单提交中看到任何错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:58:42.813

您不需要“每个论坛和教程”，您只需要官方文档，其中[解释清楚](https://docs.djangoproject.com/en/1.3/topics/forms/#using-a-form-in-a-view)。您在该链接上看到的代码的唯一变化是您需要在`form.save()`“处理数据”位内添加（并且，您应该在 render_to_response 调用中使用 RequestContext，就像您已经做的那样）。

另一件要改变的是，您应该依靠 Django 来呈现模板中的整个字段，而不仅仅是值：

```
<p>
{{ form.name }} 
{{ form.name.errors }}
</p>

<p>
{{ form.email }}
{{ form.email.errors }}
</p> 
```

# visual-studio-2010 - 使用 c# 将 Visual C++ 自动升级到 Visual 2010

> ID：10834924
> 
> 赞同：-2
> 
> 时间：2012-05-31T13:46:44.810
> 
> 标签：visual-studio-2010, visual-c++, upgrade

如何使用 c# 代码将 Visual c++ 6.0 项目升级到 Visual Studio 2010。之后，如何使用 c# 代码自动构建 Visual Studio 2010 项目并记录错误和预热到文件。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:48:53.573

C# 和 C++ 是完全不同的语言，具有极其不同的库。

你永远无法做到这一点；您需要在 C# 中从头开始重写您的项目。（或者只是坚持使用 C++）

# javascript - 限制 ObservableArray 中的项目数

> ID：10834925
> 
> 赞同：1
> 
> 时间：2012-05-31T13:46:46.037
> 
> 标签：javascript, knockout.js

我正在尝试创建一个扩展器来限制可以推入可观察数组的项目数量。我遇到的问题是写入应该发生的时间。我收到关于对象没有“推送”方法的错误。

这是演示我在说什么的小提琴。当您单击任何复选框时，将显示错误。您必须在 Chrome 或 Firefox 中打开开发者工具窗口才能看到错误。

[http://jsfiddle.net/pEzsb/55/](http://jsfiddle.net/pEzsb/55/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:00:28.227

这是一种快速而肮脏的方法。

```
ko.extenders.arrayMaxLength = function(target, length) {
    target.push2 = target.push;
    target.push = function (value) {
        if (this().length < length) {
            this.push2(value);
        }
    };
    return target;
}; 
```

[http://jsfiddle.net/madcapnmckay/2bTra/1/](http://jsfiddle.net/madcapnmckay/2bTra/1/)

它不是很有用，因为它不会停止检查复选框，我认为这是您想要发生的事情，它只是停止将其放入数组的值。

更好的解决方案是编写一个自定义的已检查绑定处理程序，其限制值将阻止它们被检查。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T17:40:07.143

这是我最终做的事情：

[http://jsfiddle.net/zero21xxx/B3RgK/](http://jsfiddle.net/zero21xxx/B3RgK/)

基本上只是控制复选框是否启用。

# java - 如何访问 VariableDeclarationStatement 中的 MethodInvocation

> ID：10834928
> 
> 赞同：2
> 
> 时间：2012-05-31T13:46:55.193
> 
> 标签：java, abstract-syntax-tree, eclipse-jdt, method-invocation

我正在检查使用 JDT 的方法的调用并对其参数执行检查。我正在使用访问 MethodInvocation 节点并执行此操作的 AST 访问者类。我在 Visitor 类中使用以下方法。

```
 public boolean visit(MethodInvocation node) {

        if (node.getName().toString().equals("createQuery")) {

            String argument= node.arguments().get(0).toString();

            // process the argument here

        }

        return true;
    } 
```

但是作为变量声明一部分的调用没有被访问。

例如：如果我正在寻找方法“createQuery”的调用，将访问以下调用。

```
 session.createQuery("some query here"); 
```

但是这个没有被访问过。

```
 Query query = session.createQuery("another query here"); 
```

我怎样才能访问这些陈述并以适当的方式获取论点？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T05:13:38.240

找到了.. 必须访问 AST 中的 VariableDeclarationStatement 节点并返回 true。

```
public boolean visit(VariableDeclarationStatement node) {

    return true;
} 
```

这允许访问 AST 中的 VariableDeclarationStatement 的子项。特定类型的方法调用作为 VariableDeclarationStatement 节点的子节点出现，因此它们也会被访问。

# .net - 存在量词的 Z3 .NET API

> ID：10834934
> 
> 赞同：0
> 
> 时间：2012-05-31T13:47:11.357
> 
> 标签：.net, z3, quantifiers

我正在尝试使用 Z3 .net API 来获取存在量词 expr。以下是我的代码：

```
RealExpr c = ctx.MkRealConst("c");
BoolExpr Eqzero = ctx.MkGt(c,ctx.MkReal(0));    
BoolExpr Gezero = ctx.MkGe(c,ctx.MkReal(0));
BoolExpr Lttwo = ctx.MkLt(c,ctx.MkReal(2));
BoolExpr Gtthree = ctx.MkGt(c,ctx.MkReal(3)); 

BoolExpr b1 = ctx.MkBoolConst("b1");
BoolExpr b2 = ctx.MkBoolConst("b2");
BoolExpr b3 = ctx.MkBoolConst("b3");
BoolExpr b0 = ctx.MkBoolConst("b0");   

RealExpr[] lamb=new RealExpr[1];

lamb[0]=ctx.MkRealConst("lamb");

BoolExpr temp=ctx.MkAnd(
     ctx.MkGt(lamb[0],ctx.MkReal(0)),
     ctx.MkEq(b0,ctx.MkTrue()),
     ctx.MkEq(b1,ctx.MkTrue()),
     ctx.MkGe(ctx.MkAdd(c,lamb[0]),ctx.MkReal(0)),
     ctx.MkLe(ctx.MkAdd(c,lamb[0]),ctx.MkReal(3)),
     ctx.MkGe(c,ctx.MkReal(0)),
     ctx.MkLe(c,ctx.MkReal(3))
                    );   

BoolExpr exist = ctx.MkExists(lamb, temp, 1, null, null, ctx.MkSymbol("Q2"),            ctx.MkSymbol("skid2"));

Console.WriteLine(exist.ToString());
Solver s1 = ctx.MkSolver();
s1.Assert(exist);
if (s1.Check() == Status.SATISFIABLE)
{
  Console.WriteLine("get pre");
  Console.Write(s1);
}
else
{
   Console.WriteLine("Not reach");
}
Console.ReadKey(); 
```

'

对于该程序，我得到以下结果：

```
(exists ((lamb Real))
 (! (and (> lamb 0.0)
      (= b0 true)
      (= b1 true)
      (>= (+ c lamb) 0.0)
      (<= (+ c lamb) 3.0)
      (>= c 0.0)
      (<= c 3.0))
 :skid skid2
 :qid Q2))
 Not reach 
```

我的问题是 1\. 是什么意思！在结果中/ 2\. 我无法获得SAT成绩的原因是什么？3\. 除了Z3网站上的API菜单外，谁能提供一些与Z3 .NET API对应的武术。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:14:02.197

(! ...) 函数的含义是将模式和量词以及 Skolem ID 绑定到表达式的注释。当这条线

```
BoolExpr exist = ctx.MkExists(lamb, temp, 1, null, null, ctx.MkSymbol("Q2"), ctx.MkSymbol("skid2")); 
```

改为

```
BoolExpr exist = ctx.MkExists(lamb, temp, 1); 
```

那么输出中没有 (! ...) 。

我无法复制 UNSAT 结果：当我使用 Z3 4.0 运行此示例时，我得到 SAT 和以下模型：

```
(define-fun lamb!0 () Real  1.0)
(define-fun c () Real  1.0)
(define-fun b1 () Bool true)
(define-fun b0 () Bool true) 
```

# android - 如何使用 Android.mk 构建脚本在 lib/armeabi-v7a 文件夹中创建子目录？

> ID：10834945
> 
> 赞同：2
> 
> 时间：2012-05-31T13:48:02.200
> 
> 标签：android, android-ndk

我有一个通用共享本机库，它与现有的用于各种 ARM 版本和扩展的其他共享库链接。我必须在运行时切换使用哪一个。我的 Android.mk 很简单：

```
include $(CLEAR_VARS)
LOCAL_MODULE := player

LOCAL_SRC_FILES := some_cpp_sources...

LOCAL_LDFLAGS := -L$(LOCAL_PATH)/../bin
LOCAL_LDLIBS := -llog -lz -lm –lplayer_engine
LOCAL_ALLOW_UNDEFINED_SYMBOLS := true

include $(BUILD_SHARED_LIBRARY) 
```

问题是：

*   我必须`player_engine`在链接时指定本机库 ( ) - 主库所依赖的
*   我有更多版本的`player_engine`库
*   库必须具有相同的名称；否则我需要在 Android.mk 脚本中指定所有这些，这会`UnsatisfiedLinkError`在尝试根据 ARM 版本和扩展名仅加载正确的脚本时导致异常
*   构建脚本仅在 libs 文件夹中创建 armeabi 和 armeabi-v7a 子文件夹，任何其他手动创建的子文件夹在创建 apk 后将被删除。

如何解决这个问题呢？

# powershell - 在 Powershell 中检查特定 VM 的多个 Hyper-V 主机

> ID：10834952
> 
> 赞同：0
> 
> 时间：2012-05-31T13:48:33.260
> 
> 标签：powershell, hyper-v

我正在编写一个脚本来使用[Hyper-V 的 PowerShell 管理库](http://pshyperv.codeplex.com/)来管理 Hyper-VM 。由于我们使用了多个 Hyper-V 主机，并且我们的 VM 可以出于性能原因或其他原因更改其主机，因此我需要一个脚本来找出 VM 在哪个主机上运行以执行以下功能。

这是我实现这一目标的尝试：

```
function IdentifyHost
    {
    param
    (
        [parameter(Position=0, Mandatory = $true)]
        [ValidateNotNullOrEmpty()]
        $VM
    )

    [Array]$hosts=Get-VMHost

    if ($hosts.count -eq 0) 
    {
        Write-Warning "No valid hosts found."
    }

    for ([int]$i=0; $i -lt $hosts.count; $i++ )
    {
        try
        {
            $out = Get-VM -Name $VM -Server $hosts[$i] -ErrorAction Stop
        }

        catch [UnauthorizedAccessException]
        {
            Write-Warning "Access to $hosts[$i] denied."
        }

        if ($VM -is [String])
        {
            if ($out.VMElementName -eq $VM )
            {
                return $out.__SERVER
            }
        }

        elseif ($VM.ElementName -ne $null)
        {
            if ($out.VMElementName -eq $VM.VMElementName)
            {
                return $out.__SERVER
            }
        }

    }

    Write-Warning "No Host found for $VM"
} 
```

Get-VMHost 返回局域网中所有可用 Hyper-V 主机的数组。我的问题是，每当第一个元素出现 UnauthorizedAccessException 时，我的函数总是返回 $hosts 数组的第一个元素。

计划如下：如果 VM 存在于主机上，他将返回一个 WMI 对象，表示该 VM，其 VMElementName 属性等于作为参数给出的 VM 名称。如果给 VM 一个表示 VM 的 WMI 对象，则两个对象的 VMElementName 属性是相等的。如果主机上不存在虚拟机，他什么也不返回。如果存在访问问题，则应将其捕获。

但不知何故，它不起作用。

我的问题是：我在代码中做错了什么？我该如何解决？

编辑：函数的输出是 $hosts 数组的第一个元素的访问问题警告，然后是 $hosts 本身的第一个元素。

EDIT2：我通过将脆弱的 $hosts[$i] 的返回更改为 $out.__Server 自己解决了这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T06:36:23.280

好的，所以我找到了解决此问题的可能方法：

我没有返回产生不利结果的 $hosts[$i]，而是返回 $out 的 __Server 属性，假设存在符合条件的有效 $out。

如果你们中的任何人知道这样做的更好或更清洁的方法，请通过我的客人。

# iphone - 无法加载捆绑包

> ID：10834953
> 
> 赞同：0
> 
> 时间：2012-05-31T13:48:36.130
> 
> 标签：iphone, ios

我试图在`NSBundle`对象的帮助下加载一个包，但这个包没有加载到主包代码中：

```
NSBundle *bundle= [NSBundle bundleWithPath:[[NSBundle mainBundle] pathForResource:@"iphone_bundle" ofType:@"bundle"]];
        [bundle load];
       NSLog(@"%d",[bundle load]); 
```

捆绑包的名称是`iphone_bundle`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T14:24:34.407

您可以使用捆绑包中的资源，如下所示。

```
[UIImage imageNamed:@"iphone_bundle.bundle/someImage.png"]; 
```

# iphone - ZXing 读取一维条码 iPhone

> ID：10834956
> 
> 赞同：1
> 
> 时间：2012-05-31T13:48:43.457
> 
> 标签：iphone, ios

我知道适用于 iOS 的 ZXing 库仅读取 QR 码，但是否有某个版本或端口也可以读取 1d 条码？

我似乎找不到一个目前正在工作的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:31:24.500

适用于 iOS 的 ZXing 端口可以解码的不仅仅是二维码。例如，Data Matrix 端口是最新的。

一维码支持不强。您可以打开 1D 支持（查看 ScanTest 代码的示例），它将解码许多 1D 代码，但不如 Java 端口可靠。（如果你这样做，请使用 svn 或 git 镜像中的代码；自上一个版本以来有一个修复崩溃的补丁）。

没有比这更好的 ZXing 端口了。没有人站出来帮助保持一维代码在 C++ 中的状态与在 Java 中一样好。

从问题中不清楚您是否对其他可能具有更好一维支持的开源库开放。[ZBar](http://zbar.sourceforge.net/)是主要选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T11:39:17.853

[ZXing](http://code.google.com/p/zxing/) iphone：iPhone 客户端 + 移植到 Objective C/C++（仅二维码）

但是有人在[这里做到了](https://github.com/TheLevelUp/ZXingObjC)

玩得开心

# python - 如何对映射函数执行多个参数，其中一个在python中保持不变？

> ID：10834960
> 
> 赞同：201
> 
> 时间：2012-05-31T13:48:48.890
> 
> 标签：python

假设我们有一个函数`add`如下

```
def add(x, y):
    return x + y 
```

我们想为数组应用映射函数

```
map(add, [1, 2, 3], 2) 
```

语义是我想向数组的每个元素添加 2。但是该`map`函数也需要第三个参数中的列表。

**注意：**为了简单起见，我`add`举个例子。我原来的功能要复杂得多。当然，设置`y`in`add`函数的默认值的选项是没有问题的，因为每次调用都会更改它。

* * *

## 回答 #1

> 赞同：239
> 
> 时间：2012-05-31T13:50:19.020

一种选择是列表理解：

```
[add(x, 2) for x in [1, 2, 3]] 
```

更多的选择：

```
a = [1, 2, 3]

import functools
map(functools.partial(add, y=2), a)

import itertools
map(add, a, itertools.repeat(2, len(a))) 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2014-11-19T19:28:42.983

文档明确建议这是主要用途`itertools.repeat`：

> 制作一个反复返回对象的迭代器。除非指定了 times 参数，否则无限期运行。用作[`map()`](https://docs.python.org/3/library/functions.html#map)被调用函数的不变参数的参数。也用于[`zip()`](https://docs.python.org/3/library/functions.html#zip)创建元组记录的不变部分。

并且没有理由通过`len([1,2,3])`作为`times`论点；`map`一旦第一个迭代被消耗就停止，所以无限迭代是非常好的：

```
>>> from operator import add
>>> from itertools import repeat
>>> list(map(add, [1,2,3], repeat(4)))
[5, 6, 7] 
```

事实上，这相当于`repeat`文档中的示例：

```
>>> list(map(pow, range(10), repeat(2)))
[0, 1, 4, 9, 16, 25, 36, 49, 64, 81] 
```

这提供了一个很好的惰性函数式语言解决方案，它在 Python 迭代器术语中也完全可读。

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2012-05-31T13:50:03.503

使用列表推导。

```
[x + 2 for x in [1, 2, 3]] 
```

如果你*真的*，*真的*，*真的*想使用`map`，给它一个匿名函数作为第一个参数：

```
map(lambda x: x + 2, [1,2,3]) 
```

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2016-04-19T04:39:07.593

Map 可以包含多个参数，标准方式是

```
map(add, a, b) 
```

在你的问题中，它应该是

```
map(add, a, [2]*len(a)) 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2016-04-27T11:20:08.237

正确答案比你想象的要简单。只需这样做：

```
map(add, [(x, 2) for x in [1,2,3]]) 
```

并更改 add 的实现以获取一个元组，即

```
def add(t):
   x, y = t
   return x+y 
```

这可以处理两个添加参数都是动态的任何复杂用例。

* * *

## 回答 #6

> 赞同：16
> 
> 时间：2015-08-18T11:56:46.300

[有时我使用闭包](https://en.wikipedia.org/wiki/Closure_%28computer_programming%29)解决了类似的情况（例如使用[pandas.apply](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.apply.html)方法）

为了使用它们，您定义了一个函数，该函数为您的函数动态定义并返回一个包装器，从而有效地使其中一个参数成为常量。

像这样的东西：

```
def add(x, y):
   return x + y

def add_constant(y):
    def f(x):
        return add(x, y)
    return f 
```

然后，`add_constant(y)`返回一个可用于添加`y`到任何给定值的函数：

```
>>> add_constant(2)(3)
5 
```

这允许您在一次给定参数的任何情况下使用它：

```
>>> map(add_constant(2), [1,2,3])
[3, 4, 5] 
```

**编辑**

如果您不想在其他地方编写闭包函数，您总是可以使用 lambda 函数动态构建它：

```
>>> map(lambda x: add(x, 2), [1, 2, 3])
[3, 4, 5] 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2012-05-31T13:55:51.747

如果你有它，我会考虑使用 numpy. 这些类型的操作非常快：

```
>>> import numpy
>>> numpy.array([1,2,3]) + 2
array([3, 4, 5]) 
```

这是假设您的实际应用程序正在执行数学运算（可以矢量化）。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2014-10-06T19:35:17.707

如果你真的需要使用 map 函数（就像我在这里的类分配......），你可以使用一个带有 1 个参数的包装函数，将其余的传递给它的主体中的原始函数；IE ：

```
extraArguments = value
def myFunc(arg):
    # call the target function
    return Func(arg, extraArguments)

map(myFunc, itterable) 
```

又脏又丑，还是有用的

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-01-09T01:16:18.850

我相信星图是您所需要的：

```
from itertools import starmap

def test(x, y, z):
    return x + y + z

list(starmap(test, [(1, 2, 3), (4, 5, 6)])) 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-08-29T15:37:13.560

```
def func(a, b, c, d):
 return a + b * c % d 
```

```
map(lambda x: func(*x), [[1,2,3,4], [5,6,7,8]]) 
```

通过使用 lambda 包装函数调用并使用星形解包，您可以使用任意数量的参数进行映射。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-26T04:07:37.713

将多个参数传递给`map`函数。

```
def q(x,y):
    return x*y

print map (q,range(0,10),range(10,20)) 
```

这里**q**是**map()**调用的具有多个参数的函数。确保两个范围的长度，即

```
len (range(a,a')) and len (range(b,b')) are equal. 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-05-23T09:10:10.307

在 ：`nums = [1, 2, 3]`

在 ：`map(add, nums, [2]*len(nums))`

出去：`[3, 4, 5]`

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-05-20T20:50:00.510

您可以将 lambda 与 map 一起包含：

```
list(map(lambda a: a+2, [1, 2, 3])) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-07-19T21:28:34.287

另一种选择是：

```
results = []
for x in [1,2,3]:
    z = add(x,2)
    ...
    results += [f(z,x,y)] 
```

这种格式在调用多个函数时非常有用。

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-08-28T09:24:03.723

```
#multi argument

def joke(r):
     if len(r)==2:
          x, y = r
          return x + y
     elif len(r)==3:
           x,y,z=r
           return x+y+z

#using map

    print(list(map(joke,[[2,3],[3,4,5]]))) 
```

输出 = [6,12]

如果是上述情况并且只想使用功能

```
def add(x,y):
    ar =[]
    for xx in x:
         ar.append(xx+y)
    return ar
print(list(map(add,[[3,2,4]],[2]))[0])
output = [5,4,6] 
```

注意：您可以根据需要进行修改。

# facebook - Facebook 身份验证对话框未显示在页面选项卡中

> ID：10834961
> 
> 赞同：0
> 
> 时间：2012-05-31T13:48:51.700
> 
> 标签：facebook, facebook-php-sdk, facebook-apps, facebook-authentication

在页面选项卡 (iframe) 中查看应用程序时，不会显示 Facebook 身份验证对话框。虽然在外部查看应用程序时它工作正常。

我的 Facebook 应用程序设置是：

```
Site URL: http://domain.com/test
Canvas URL: http://domain.com/test/
Secure Canvas URL: https://domain.com/test/
Page Tab URL: http://domain.com/test/
Secure Page Tab URL: https://domain.com/test/ 
```

我已使用以下链接将应用程序添加到页面选项卡：https://www.facebook.com/dialog/pagetab?app_id=[MY_APP_ID]&next=https://domain.com/test/

我正在使用 php sdk。我在 //domain.com/test/index.php 中的代码如下所示：

```
<?php
require 'facebook-php-sdk/src/facebook.php';

$facebook = new Facebook(array(
   'appId'  => '[MY_APP_ID]',
   'secret' => '[MY_APP_SECRET]',
   ));

// Get User ID
$user = $facebook->getUser();

if ($user) {
   $logoutUrl = $facebook->getLogoutUrl();
} else {
   $loginUrl = $facebook->getLoginUrl();
}

if ($user) {
   try {
      // Proceed knowing you have a logged in user who's authenticated.
      $user_profile = $facebook->api('/me');
   } catch (FacebookApiException $e) {
   error_log($e);
   $user = null;
   }
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Facebook test</title>
</head>

<body>
<p>
<?php if($user) : ?>
   <a href="<?php echo $logoutUrl;?>">Logout</a>
<?php else: ?>
   <a href="<?php echo $loginUrl;?>">Login</a>
<?php endif; ?>
</p>
</body>
</html> 
```

将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:55:24.257

您不能在 iframe 中使用身份验证对话框（为什么？请参见此处： http: [//facebook.stackoverflow.com/a/10831018/1427878](http://facebook.stackoverflow.com/a/10831018/1427878)）。将 target="_blank" 添加到您的链接中，它应该可以工作。或者只是嵌入 JavaScript SDK 并使用 FB.login，如果你想要一个弹出窗口而不需要额外的费用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T01:04:51.330

尝试制作一个更改 iframe 父 URL 的 JS 函数

```
function RedirectTo(installURL){
     window.top.location.href = installURL;
} 
```

并在登录文本的 onClick 事件上调用该函数

```
<?php else: ?>
   <a href="#" onclick='RedirectTo("<?php echo $loginUrl;?>")'>Login</a>
<?php endif; ?> 
```

确保 $loginUrl var 的 RedirectURI 是您的应用程序的 URL

然后你将不得不在你的 facebook 应用程序中更改此设置（https://developers.facebook.com/apps）

**应用程序域：** facebook.com

**带有 Facebook 登录的网站：**您的 Facebook 应用 URL（即：[https ://www.facebook.com/](https://www.facebook.com/) *{FanPageUsername}* ?sk=app_ *{appID}*）

# jquery - 使用 jQuery 手风琴的菜单：使标题的链接工作

> ID：10834966
> 
> 赞同：3
> 
> 时间：2012-05-31T13:49:09.670
> 
> 标签：jquery, ruby-on-rails, callback, accordion

我正在尝试使用 Jquery UI 手风琴模块来创建一个包含对象类别（标题）的侧边栏，单击时会显示子类别（内容）。

手风琴本身工作正常：当我单击一个类别时，它会显示一个新部分，其中包含指向不同子类别页面的链接，但指向主要类别的链接不再起作用。我想点击一个类别来做两件事：适当地改变手风琴并打开链接。

我已经在网上搜索了 2 个小时，我发现的唯一线索是对手风琴的更改事件使用回调，但是我在 jQuery/Javascript 方面非常新手，所以我不知道该怎么做或者如果这是最好的选择。

如果我使用“鼠标悬停”来触发手风琴，那么一切正常：类别上的点击事件仍在打开类别页面。我应该使用鼠标悬停还是有使用点击作为事件的解决方案？（问题是 jquery 生成客户端事件，而链接应该生成服务器端事件）

[您可以在这里](http://young-leaf-5066.heroku.com/)查看我的意思（单击左侧边栏中的“媒体”应该会打开子类别，但也会打开媒体类别中的对象列表，而单击子菜单“书籍”可以正常工作）。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:01:23.130

不要在手风琴标题中使用链接，而是使用手风琴的更改事件。

[http://jqueryui.com/demos/accordion/#event-change](http://jqueryui.com/demos/accordion/#event-change)

```
$( "#accordion" ).accordion({
    changestart: function (event, ui) {
        var href = ui.newHeader.attr( "href" );
        // do something with href
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T14:11:15.230

[http://jqueryui.com/demos/accordion/#option-navigation](http://jqueryui.com/demos/accordion/#option-navigation)

```
$( ".selector" ).accordion({ navigation: true }); 
```

# android - CursorAdapter 的 bindView() 方法中的 NullPointerException

> ID：10834970
> 
> 赞同：-1
> 
> 时间：2012-05-31T13:49:27.480
> 
> 标签：android, layout, textview, nullpointerexception

我的应用程序出现以下错误，我认为这与我处理布局文件或在代码中使用它们的方式有关。

```
05-31 13:39:59.283: E/AndroidRuntime(332): Uncaught handler: thread main exiting due to uncaught exception
05-31 13:39:59.293: E/AndroidRuntime(332): java.lang.NullPointerException
05-31 13:39:59.293: E/AndroidRuntime(332):  at com.dd.qsg.ShowAchievements$AchievementAdapter.bindView(ShowAchievements.java:38)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.CursorAdapter.getView(CursorAdapter.java:186)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.AbsListView.obtainView(AbsListView.java:1274)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.ListView.measureHeightOfChildren(ListView.java:1147)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.ListView.onMeasure(ListView.java:1060)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.View.measure(View.java:7964)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:888)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:619)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:280)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.View.measure(View.java:7964)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.View.measure(View.java:7964)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.LinearLayout.measureVertical(LinearLayout.java:464)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.LinearLayout.onMeasure(LinearLayout.java:278)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.View.measure(View.java:7964)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3023)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.widget.FrameLayout.onMeasure(FrameLayout.java:245)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.View.measure(View.java:7964)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.ViewRoot.performTraversals(ViewRoot.java:763)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1633)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.os.Looper.loop(Looper.java:123)
05-31 13:39:59.293: E/AndroidRuntime(332):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-31 13:39:59.293: E/AndroidRuntime(332):  at java.lang.reflect.Method.invokeNative(Native Method)
05-31 13:39:59.293: E/AndroidRuntime(332):  at java.lang.reflect.Method.invoke(Method.java:521)
05-31 13:39:59.293: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-31 13:39:59.293: E/AndroidRuntime(332):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-31 13:39:59.293: E/AndroidRuntime(332):  at dalvik.system.NativeStart.main(Native Method) 
```

这是`ShowAchievements`课程：

```
package com.dd.qsg;

import android.app.ListActivity;
import android.content.Context;
import android.database.Cursor;
import android.graphics.Color;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CursorAdapter;
import android.widget.TextView;

public class ShowAchievements extends ListActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.achievements);

        DatabaseHandler db = new DatabaseHandler(this);
        Cursor cursor = db.getAchievements(this);
        AchievementAdapter cursorAdapter = new AchievementAdapter(this, cursor);

        this.setListAdapter(cursorAdapter);
    } 

    private class AchievementAdapter extends CursorAdapter {
        public AchievementAdapter(Context context, Cursor c) {
            super(context, c);
        }

        @Override
        public void bindView(View v, Context context, Cursor cursor) {
            if(cursor.getString(cursor.getColumnIndex("completed")).equals("yes")) {
                TextView tv = (TextView) v.findViewById(R.id.achView1);
                tv.setTextColor(Color.GREEN);
            }
        }

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {
            LayoutInflater inflater = LayoutInflater.from(context);
            View v = inflater.inflate(R.layout.achievements, parent, false);
            return v;
        }
    }    
} 
```

这是`getAchievements()`我`DatabaseHandler`课堂上的方法：

```
public Cursor getAchievements(Context context) {
    String selectQuery = "SELECT * FROM achievements ORDER BY _id asc";
    SQLiteDatabase db = this.getWritableDatabase();
    return db.rawQuery(selectQuery, null);
} 
```

这是我的`achievements`布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/android:empty"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text=""/>

</LinearLayout> 
```

这是我的`achievements_item`布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/achView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="" />

</LinearLayout> 
```

我假设这些错误是由我处理 xml 文件的方式引起的。我应该把布局的`achView1` `TextView`内部`achievements`而不是`achievements_item`布局？我应该从中删除空`TextView`的`achievements`吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:51:47.320

`v`为空并且`tv is also null`...所以空指针异常...由于布局文件行的错误xml引用我的意思是item.you应该`R.layout.achievements_item.xml`在膨胀item时使用，在`newView`方法...

```
 View v = inflater.inflate(R.layout.achievements_item, parent, false);
                                    ^^^^^^^^^^^^^^^^^ 

        @Override
        public View newView(Context context, Cursor cursor, ViewGroup parent) {
            LayoutInflater inflater = LayoutInflater.from(context);
            View v = inflater.inflate(R.layout.achievements_item, parent, false);
            return v;
        } 
```

# html - 在 HTML 中仅使用单个列表项标记列表在语义上是否正确？

> ID：10834977
> 
> 赞同：5
> 
> 时间：2012-05-31T13:49:54.870
> 
> 标签：html, html-lists, semantic-markup

用另一个只有一个列表项`ul`的嵌入标记 HTML 中的 a 在语义上是否正确？`ul`

例如，我有一个`ul`带有多个`li`s 的 a，其中一个`li`s 嵌入`ul`了一个s `li`：

```
<ul>
  <li>Example LI 1
    <ul>
        <li>Example LI 1a</li>
    </ul>
  </li>
  <li>Example LI 2</li>
  <li>Example LI 3</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T13:53:37.230

绝对地。列表不是由数量定义的。它是由语义定义的。因此，如果只有一项适用于列表的目的，则列表只能包含一个元素。例如，我今天只使一台计算机崩溃，因此该列表只有一个元素长。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-11T21:06:57.713

是的，如果使用正确，拥有一个包含单个项目的列表在语义上是正确的，即使它确实感觉有点奇怪（如果只有一个项目，它就不是一个真正的列表，因为根据定义，一个列表就是一个*列表*item​<strong> *s*，否则它只是*一个*项目）。

在您提供的示例中，这些项目是占位符并且没有任何意义，因此很难判断它是否适用。它是否正确取决于您*为什么*将其放在子项中。如果它确实是一个列表项，那么拥有一个单项子列表是完全合理的，特别是如果有其他包含多个项的子列表。那样的话，意思就很清楚了。例如，以下内容很好：

```
<h1>Auto Insurance Customers</h1>
<ul>

  <li>
    <strong>#1234</strong>
    <ul>
      <li>2003 Ford Focus</li>
      <li>1998 Ford Escort</li>
    <ul>
  </li>

  <li>
    <strong>#2468</strong>
    <ul>
      <li>1999 Lamborghini Diablo VT Roadster</li>
    </ul>
  </li>
  …

</ul> 
```

这个例子没有任何问题，因为客户拥有一辆车而其他人可能拥有更多是完全合理的。

另一方面，如果您制作单项子列表的原因仅仅是为了创建一个缩进来偏移和突出显示列表项的一部分，那么这是不正确的。

例如，假设您有一个文本段落列表。在其中一个段落中，您有一段需要注意的段落，并且您想缩进和偏移它。虽然将它放在列表中会起作用，但这是不正确的，因为您将样式与结构混合在一起。

完成此操作的正确方法是将该部分包装在另一个标记中（如`<blockquote>`、 styled`<div>`等）并将其留在该列表项的常规流程中。在以下示例中，需要突出显示列表项之一的一部分。将其放入（单项）列表中是错误的做法：

```
<h1>Blog posts or something…&lt;/h1>
<ul>

  <li>
    <strong>Foo</strong>
    <p>Some long paragraph about Foos, what they do, how they work, etc.</p>
    <p>More information about Foos and where they originated.</p>
    <p>Instructions on care and feeding of Foos.</p>
  </li>

  <li>
    <strong>Bar</strong>
    <p>Detailed description of local watering holes for lawyers.</p>
    <p>Anecdotes about experiences of drinking & lawyering.</p>

    <!-- This section is to be highlighted and offset to draw attention to it from the rest of this list item. -->
    <ul>
      <li>
        <p>Highlighted account of the subsequent problems and what happened that one strange night.</p>
      </li>
    </ul>

    <p>Summary of what to not do when out drinking with lawyers.</p>
  </li>

  <li>
    <strong>Baaz Luhrmann</strong>
    <p>A bunch of stuff about a brass-skinned movie director who made a widely-panned film adaptation of a Shakespeare play who turns to stone and traps your sword when he dies.
  </li>

</ul> 
```

相反，您应该为此使用正确的标签。它不仅在语义和结构上正确，而且更清晰，甚至缩小了页面的大小：

```
<style…&gt;
  p.highlight {
    margin : 20px 50px;
    width  : 150px;
  }
</style>

…
  <li>
    <strong>Bar</strong>
    <p>Detailed description of local watering holes for lawyers.</p>
    <p>Anecdotes about experiences of drinking and lawyering.</p>

    <!-- This section is to be highlighted and offset to draw attention to it from the rest of this list item. -->
    <p class="highlight">
      Highlighted account of the subsequent problems and what happened that one strange night.
    </p>

    <p>Summary of what to not do when out drinking with lawyers.</p>
  </li> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T17:50:00.030

根据dictionary.com，[列表](http://dictionary.reference.com/browse/list?s=t)是有意义地分组的项目系列，而[系列](http://dictionary.reference.com/browse/series)是一组相似或相关的项目。（oxforddictionaries.com 和 thefreedictionary.com 的结果相似。）任何仅包含一项的内容都不能包含有意义的分组或内容之间的相似性或相关性。因此，对于单项列表，标记的语义与内容的语义不匹配。

单项列表似乎也不符合人们说“列表”时的意思。（关于这一点，当代词典更注重记录常见用法而不是正确用法（这就是为什么 OED 中出现“bling”的原因）。）

此外，即使它在技术上没有错误，将这样一个简单的语句标记为列表而不是段落似乎也没有太大的编辑价值。在我看来，以下三个示例中的第一个对用户来说是最容易解析和理解的。

```
<p>XYZ is the only computer that crashed.</p>

<p>
     The computer that crashed:
     <ul><li>XYZ</li></ul>
<p>

<ul>
     <li>
          The computer that crashed:
          <ul><li>XYZ</li></ul>
     </li>
<ul> 
```

# iphone - 是否有一个很好的库来替代 UIAlertView

> ID：10834985
> 
> 赞同：2
> 
> 时间：2012-05-31T13:50:20.437
> 
> 标签：iphone, ios

我正在观看[第 105 节课 - 优化您的应用程序](https://developer.apple.com/videos/wwdc/2011/)。他们推荐了这样的方法，以避免在错误可恢复时中断用户的流程。

![网络连接的底部警报视图](../Images/bbf5d2b03cdbc31ace304699c1bb8caf.png)

GitHub上有一个很好的库吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:07:53.330

我建议在 cocoacontrols 站点（它实际上是一个以 iOS 为中心的 github 前端：-）搜索“通知”（例如，使用[此](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=notification)链接）。

从那里的列表中，我个人使用 WPost 和 SVStatusHub

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:21:27.763

你想多了。为什么你需要一个图书馆呢？您可以在 10 分钟内创建自己的 UIView 子类，您可以根据需要进行自定义。

将视图添加到屏幕外，在出现错误时进行动画处理，然后在 5 秒后进行动画处理。简单的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-25T14:30:43.057

我建议~~[TSMessages](https://github.com/toursprung/TSMessages)~~ [消息](https://github.com/donileo/RMessage)。它们看起来不错，而且易于使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-08-15T02:04:53.670

我刚刚完成了一个名为[ALAlertBanner](https://github.com/alobi/ALAlertBanner)的库。如果您仍在市场上使用此功能，请查看并告诉我您的想法！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-31T14:08:07.157

在底部添加一个子视图，当你不想显示它时增加它的框架，当你想使用动画显示它时减少它，像这样

```
//theAlert is a viewController whose nib is as what you desire
            [theAlert.view setFrame:CGRectMake( 0.0f, 0.0f, 480.0f, 50.0f)]; //notice this is OFF screen!and 480 as your view hieght is 480 and alert hieght 50 so it will not show on screen

            [UIView beginAnimations:@"animateToolbar" context:nil];
            [UIView setAnimationDuration:0.8];
            [theAlert.view setFrame:CGRectMake( 0.0f, 0.0f, 430.0f, 50.0f)]; //notice this is ON screen!

            [UIView commitAnimations]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T13:28:15.570

看看 YRDropdownView。我刚刚遇到它，它看起来不错。

[https://github.com/onemightyroar/YRDropdownView](https://github.com/onemightyroar/YRDropdownView)

# java - JAXB 注释将 XML 内容绑定为字符串

> ID：10834986
> 
> 赞同：1
> 
> 时间：2012-05-31T13:50:25.297
> 
> 标签：java, jaxb

我想将 XML 内容作为字符串绑定到该字段。这是我的 xml 的样子：

```
<sample>
    <content>
         <p>here is content <b>with bold</b></p>
    </content>
</sample> 
```

它应该绑定到以下域对象：

```
@Entity
@Table(name="news_table")
@XmlRootElement
class Sample {
     @XmlElement(name="content")
     @Column(name="news_content")
     private String content; 
} 
```

解组后，我想绑定以`<p>`字符串类型开头的内容，以便使用 HTML 标签保留格式化文本，以便：

```
System.out.println(sample.getContent()); 
```

必须给出以下信息：

```
> "<p>here is content <b>with bold</b></p>" 
```

使用@XmlElement 注释，我只能从绑定操作中得到空字符串“”，因为`<p>`根据我的理解，JAXB 将元素以“”开头作为要绑定的对象。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:01:57.123

尝试使用`@XmlAnyElement`带有自定义注释的`DomHandler`. [你可以在这里](http://blog.bdoughan.com/2011/04/xmlanyelement-and-non-dom-properties.html)找到一个例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T14:23:08.720

如果可以选择更改 xml 文件的内容，则可以转义`<`and `>`。然后 JAXB 处理它就好了，你`getContent()`在 java 中调用时也会得到正确的 html 字符串。

这是带有转义内容的 xml 文件：

```
<sample>
 <content>&lt;p&gt;here is content &lt;b&gt;with bold&lt;/b&gt;&lt;/p&gt;</content>
</sample> 
```

# android - 在为 Android 运行 COCOS2D 时 FATAL EXCEPTION: main

> ID：10834988
> 
> 赞同：4
> 
> 时间：2012-05-31T13:50:27.813
> 
> 标签：android, cocos2d-iphone, cocos2d-x

我是 Android 版 COCOS2D 的新手，在尝试运行 cocos2d 提供的示例项目（HelloWorld）时，我得到了“FATAL EXCEPTION: main”，详细信息到达了 LogCat

```
05-31 19:11:46.920: E/AndroidRuntime(7719): FATAL EXCEPTION: main
05-31 19:11:46.920: E/AndroidRuntime(7719): java.lang.ExceptionInInitializerError
05-31 19:11:46.920: E/AndroidRuntime(7719):     at java.lang.Class.newInstanceImpl(Native Method)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at java.lang.Class.newInstance(Class.java:1429)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at android.os.Looper.loop(Looper.java:123)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at java.lang.reflect.Method.invokeNative(Native Method)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at java.lang.reflect.Method.invoke(Method.java:521)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at dalvik.system.NativeStart.main(Native Method)
05-31 19:11:46.920: E/AndroidRuntime(7719): Caused by: java.lang.UnsatisfiedLinkError: Library helloworld not found
05-31 19:11:46.920: E/AndroidRuntime(7719):     at java.lang.Runtime.loadLibrary(Runtime.java:461)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at java.lang.System.loadLibrary(System.java:557)
05-31 19:11:46.920: E/AndroidRuntime(7719):     at org.cocos2dx.application.ApplicationDemo.<clinit>(ApplicationDemo.java:81)
05-31 19:11:46.920: E/AndroidRuntime(7719):     ... 15 more 
```

所以任何人都可以帮助一些想法/解决方案。我再次遵循来自“http://www.multigesture.net/articles/how-to-setup-cocos2d-x-windows-and-android/”的参考

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:55:07.943

我建议您将库更改为 cocos2d-x，因为 cocos2d for android 将不再更新。

Cocos2d-x 在 C++ 中工作，并使用 JNI（Java 原生接口）来工作。[这](https://stackoverflow.com/q/10711047/1077364)是您开始使用它所需的所有信息。

# ghostscript - Ghostscript：将 PDF 转换为 CMYK EPS

> ID：10834991
> 
> 赞同：2
> 
> 时间：2012-05-31T13:50:37.830
> 
> 标签：ghostscript, eps, cmyk

是否可以使用 ghostscript 将 PDF 转换为 CMYK EPS？

以下命令可以正常工作 - 但我猜结果是 RGB：

```
gswin32c.exe -sDEVICE=epswrite -o test.eps test.pdf 
```

这个命令：

```
gswin32c.exe \
   -sDEVICE=epswrite \
   -sProcessColorModel=DeviceCMYK \
   -sColorConversionStrategy=CMYK \
   -o test.eps \
    test.pdf 
```

给我以下错误信息

不可恢复的错误：.putdeviceprops 中的范围检查

谢谢，罗纳德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:17:37.810

目前的答案基本上是否定的。有各种各样的技巧或多或少有用，但没有什么简单可靠的。

我们将修改 pdfwrite/ps2write 中的颜色代码，届时将解决颜色转换问题。

pipitas 我看过这个帖子，但是 myOpenID 又宕机了....

# java - 具有自定义算法的 Keytool

> ID：10834993
> 
> 赞同：7
> 
> 时间：2012-05-31T13:50:40.780
> 
> 标签：java, linux, cryptography, keytool

我正在尝试使用 Keytool 和我的算法创建密钥存储。

我用 SignatureSPI、MessagedigestSPI 和 KeyPairGeneratorSPI 的扩展类组成了自定义 java.security.provider，并静态安装了它。

我遇到的问题是当我尝试使用以下方式创建存储时：

```
keytool -alias something -genkeypair -keyalg GOST2001KeyPairGenerator -sigalg GOST2001Signature -providerclass ru.test.security.test_provider -storetype pkcs12 -keystore test_keystore 
```

我收到调试消息和错误：

```
GOST2001KeyPairGenerator initialize
GOST2001KeyPairGenerator generateKeyPair
GOST2001Signature engineInitSign
keytool error: java.lang.RuntimeException: internal error! unrecognized algorithm name: GOST2001Signature 
```

奇怪的是该算法实际上开始执行但之后被称为无法识别。不知道出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:55:04.327

好吧，如果不能查看程序在您的算法中取得的进展，就很难判断发生了什么。尝试跟踪实际处理调试消息等的程序部分，以便了解哪些有效，哪些无效。

如果有 RuntimeException，它可能会陷入循环。如果算法 GOST2001Signature 无法识别，则可能存在问题。如果它工作一次，也许你不会第二次初始化它。通常，当我编写的程序的一部分工作一次但不是第二次时，我忘记初始化一些导致它改变结果的东西，等等。

祝你好运。我希望我的建议有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-20T15:18:31.507

这是我所做的：

*   您将需要为您的自定义提供程序及其所需的类制作一个 jar。
*   接下来，您需要将该 jar 放入：C:\Program Files\Java\jre6\lib\ext
*   将 security.provider.7=my.package.MyProvider 添加到 java.security（7 是顺序中的下一个 int）。
*   在关键工具命令行上使用选项 -providerName MYPROVIDERNAME
*   如果您打算使用 -providerClass，请确保使用完全限定名称，而不仅仅是类名称。

应该这样做。。

如果不是，在更正选项后，您仍然会收到 NoSuchProviderException（使用 -providerName）或 ClassNotFoundException（使用 -providerClass），请验证您使用的是正确的 keytool 副本。也就是在执行的时候，指定keytool的完整路径，而不是依赖你的PATH变量。确保该路径指向安装您的提供程序的 JRE。许多系统（比如我的）都安装了多个 JRE/JDK。

祝你好运。

# php - Magento 加入不同的表

> ID：10834994
> 
> 赞同：3
> 
> 时间：2012-05-31T13:50:44.210
> 
> 标签：php, mysql, magento, left-join

我的 Grid.php 文件中有以下代码：

```
function _prepareCollection () {
$collection = Mage::getResourceModel($this->_getCollectionClass());
$collection->getSelect()->joinLeft(
    array('sfog' => 'sales_flat_order_grid'),
    'main_table.entity_id = sfog.entity_id',
    array('sfog.shipping_name','sfog.billing_name')
);
$collection->getSelect()->joinLeft(
    array('sfo'=>'sales_flat_order'),
    'sfo.entity_id=main_table.entity_id',
    array(
        'sfo.customer_email',
        'sfo.weight',
        'sfo.discount_description',
        'sfo.increment_id',
        'sfo.store_id',
        'sfo.created_at',
        'sfo.status',
        'sfo.base_grand_total',
        'sfo.grand_total'
    )
); 
```

我也想添加表 sales_order_item，但是如果我添加此表，我会收到此错误：

已存在具有相同 ID“119”的项目 (Mage_Sales_Model_Order)

无论如何围绕这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-06T09:39:16.120

假设你加入了`soi`意义`sales_order_item`，`soi.item_id`通过做分组

```
$collection->getSelect()->group('soi.item_id'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T20:45:54.787

您必须将 sales_flat_order_item 表的 entity_id 列设为集合的 entity_id 列。您还必须重命名 main_table 类的 entity_id 列以避免`entity_id`列冲突

```
$collection->getSelect()->joinLeft(
   array('sfoi' => 'sales_flat_order_item'),
   'sfoi.order_id=sfo.entity_id', 
   array(
      'entity_id' => 'sfoi.item_id',  // Re-assign entity_id column
      'main_table_entity_id' => 'main_table.entity_id'  // Rename original entity_id column
   )
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T23:28:20.130

显然，加入 sales_order_item 会导致每个订单返回多行（不足为奇），并且 Magento 正在尝试将行数据加载到专门用于订单的集合中，其中包含一个检查以确保每个订单只发生一次。该检查正在产生您看到的错误。

要解决此问题，您可以：

*   将集合类更改为“sales/order_item_collection”，它允许每个订单项目一行

-或者-

*   不加入 sales_order_item，而是通过以下方式从每个订单中检索订单商品集`getItemsCollection()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-04T16:11:56.783

这是因为 Auto increment value，它被用作一个`id`，它是**唯一**标识记录的

# vba - 通过选定的文本创建书签？

> ID：10834995
> 
> 赞同：1
> 
> 时间：2012-05-31T13:50:44.490
> 
> 标签：vba, ms-word, bookmarks

我正在尝试创建一个宏，它将在所选文本的位置和名称处创建一个位置书签。

我有下面的代码，它说书签名称不好。

```
 Sub AddBookMark()

 Dim sText As String
 sText = Application.Selection.Text
 sText = Replace(sText, vbCrLf, "")
 sText = Replace(sText, Chr(10), " ")
 sText = Replace(sText, Chr(182), " ")

With ActiveDocument.Bookmarks
    .Add Range:=Selection.Range, Name:=sText
    .DefaultSorting = wdSortByName
    .ShowHidden = False
End With
End Sub 
```

有没有办法根据所选文本将书签名称设置为变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T14:18:22.450

试试这个

使用类似“ **@#$1_qwerty@#@!# _1234** ”的字符串对其进行了测试。该`CleanText`函数会将其更改为“ **qwerty_1234** ”

书签`Name`将接受`a-z/A-Z`作为第一个字符和`a-z/A-Z/0-1/_`其余字符。

```
Option Explicit

 Sub AddBookMark()
    Dim sText As String

    sText = CleanText(Application.Selection.Text)

    If sText = "" Then
        MsgBox "Invalid Name"
        Exit Sub
    End If

    With ActiveDocument.Bookmarks
        .Add Range:=Selection.Range, Name:=sText
        .DefaultSorting = wdSortByName
        .ShowHidden = False
    End With
End Sub

Function CleanText(strInput As String) As String
    Dim i As Long, strTemp As String

    strInput = Trim(strInput)

    Do Until (Asc(Left(strInput, 1)) > 65 And Asc(Left(strInput, 1)) < 90) Or _
    (Asc(Left(strInput, 1)) > 97 And Asc(Left(strInput, 1)) < 122) Or Len(strInput) = 0
        Select Case Asc(Left(strInput, 1))
            Case 65 To 90, 97 To 122
            Case Else: strInput = Mid(strInput, 2)
        End Select
    Loop

    strTemp = Left(strInput, 1)

    For i = 2 To Len(strInput)
        Select Case Asc(Mid(strInput, i, 1))
            Case 65 To 90, 97 To 122, 95, 48 To 57
                strTemp = strTemp & Mid(strInput, i, 1)
        End Select
    Next
ExitF:
    CleanText = strTemp
End Function 
```