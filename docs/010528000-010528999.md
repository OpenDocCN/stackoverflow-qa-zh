# StackOverflow 问答 10528000-10528999

# html - html/html5中的自定义输入文本框

> ID：10528000
> 
> 赞同：4
> 
> 时间：2012-05-10T05:28:58.427
> 
> 标签：html, css

其实我想实现一个如图所示的文本框：![在此处输入图像描述](../Images/b4e8de6ab04879ffcb3a2d0aa2393903.png)

我希望用户应该能够在所需的空间中输入数字。请注意，它将是透明的，以便背景可见。涉及 html5 画布的解决方案也很好。

那么，有可能做到这一点吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-10T05:33:51.493

你试过什么了？您几乎回答了自己的问题，使输入具有透明背景。

```
input {
    border: 0;
    outline: 0;
    background: transparent;
    border-bottom: 2px solid black;
    width: 20px;
} 
```

[jsFiddle](http://jsfiddle.net/9wdUp/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:40:20.027

将`<input>`边框设置为仅底部。[这是演示](http://jsfiddle.net/ijse/8ewq6/)，就像您的图片所示。

# flash - 闪光灯相机翻转错误

> ID：10528001
> 
> 赞同：0
> 
> 时间：2012-05-10T05:29:03.197
> 
> 标签：flash, video, wowza

我正在使用 Wowza 服务器进行视频聊天，在极少数情况下，视频会翻转一秒钟然后恢复。Wowza 支持声称它与服务器无关，并且错误存在于 flash 客户端（标准视频到 NetStream）。任何想法为什么会发生这种情况以及如何防止翻转？我使用 FP11 和 H.263 编解码器。

# mysql - 什么可能导致 Rails 范围抛出 NoMethodError

> ID：10528003
> 
> 赞同：1
> 
> 时间：2012-05-10T05:29:08.160
> 
> 标签：mysql, ruby-on-rails-3, activerecord, scope

什么可能导致 Rails 应用程序在使用范围时出现无方法错误？

我有一个有猫和狗的基本用户类。我需要组合查询并按创建日期对它们进行排序。最终，单个查询将更加复杂。

```
 class User < ActiveRecord::Base
        has_many :dogs
        has_many :cats

       scope :pets, joins(:dogs).joins(:cats).order("created_at desc") 
```

在视图中

```
 <%= render @user.pets%> 
```

导致无方法错误

```
 undefined method `pets' for #<User:0x00000106370cb0> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:05:37.873

范围仅在 ActiveRecord 模型上定义类方法。调用它的正确方法是直接在 User 模型上。`User.pets`而不是 User 的实例`@user.pets`。

您可以做的是创建一个在 User 实例上调用的方法。

```
 def pets
     User.joins(:dogs).joins(:cats).order("created_at desc")
   end 
```

因此，`@user.pets`是允许的。

# jquery-mobile - 检测屏幕是否被触摸

> ID：10528007
> 
> 赞同：1
> 
> 时间：2012-05-10T05:29:28.927
> 
> 标签：jquery-mobile

我有一个 jQuery Mobile 应用程序，第一页上有一堆控件以及空白区域。

我需要检测用户是否在任何地方触摸了屏幕，并在触摸时移动到另一个页面。

有没有办法通过 jQuery Mobile 自然地做到这一点，还是我需要全部编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:45:51.770

您可以检查**点击**事件。::在快速、完整的触摸事件后触发。参考：[jqueryMobile](http://jquerymobile.com/test/docs/api/events.html) 你的意思是这样的吗？

# android - android根据滚动视图内容的高度动态调整线性布局

> ID：10528010
> 
> 赞同：0
> 
> 时间：2012-05-10T05:30:03.807
> 
> 标签：android, dynamic, height, scrollview, android-relativelayout

我有一个滚动视图，其中有一个相对布局。此滚动视图的内容各不相同，您可能无法在第一时间获得全部内容。

例如，在时间0，onCreate完全执行，当前高度为500dip，但是在时间5，因为内容中的一些项目是异步获取结果的，一旦完成，就会显示结果，所以在时间5，内容的高度在滚动视图中可以变成 600dip

我的目标是在滚动视图的内容之上覆盖，它应该完全覆盖视图，即高度应该相同。

因为高度可以在不同的时间以任何大小增长，我认为我不能将叠加层的高度设置为 match_parent

我怎么能在android中做到这一点？

有没有一种方法可以在滚动视图或 relativelayout 的高度增长时得到通知？这样每当它更新到更大的高度时，我也可以动态更改叠加层的高度..？

我也可以考虑任何其他方法

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:48:50.923

`ScrollView`继承自`FrameLayout`并且 FrameLayout 有一个`onSizeChanged()`方法。我会扩展`ScrollView`并覆盖该方法，以便您可以捕获大小变化。这可能对你有用。

# vb.net - Crystal Reports for VS 2010 打印预览期间的页面设置

> ID：10528012
> 
> 赞同：0
> 
> 时间：2012-05-10T05:30:33.900
> 
> 标签：vb.net, crystal-reports, report

在运行时水晶报告的打印预览期间是否可以看到页面设置？

因为有时我们需要设置报表的上边距和下边距。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T03:07:20.630

我不确定报告的边距，但我已经看到了一些可以控制报告的大小百分比的东西。在打印 rpt 之前设置报告的 %size。

# sql - 在 firebird 1 中使用 group by 时出错

> ID：10528016
> 
> 赞同：1
> 
> 时间：2012-05-10T05:30:55.633
> 
> 标签：sql, firebird

我正在尝试运行以下查询，但它不起作用！

```
select extract(month from flight_date_time) mnt from T_PEREXOD where extract( year from flight_date_time)='2012'
group by mnt 
order by mnt 
```

我也尝试过子查询

```
select mnt from (select extract(month from flight_date_time) AS mnt from T_PEREXOD)
group by mnt
order by mnt 
```

但它会弹出一个错误 Invalid token。

```
Dynamic SQL Error.
SQL error code = -104.
Token unknown - line 1, char 18.
select. 
```

这是火鸟版本 1 的问题吗？

如何在没有任何视图、过程、计算域等的情况下进行分组工作？因为我不喜欢改变那个数据库！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T13:50:29.427

首先 - 提取返回一个 smallint 或十进制值，因此您的 where clousure 是错误的。

第二 - 从 1.5 开始支持子查询

尝试在您的第一个查询中更改`SELECT EXTRACT(...) as mnt`（添加为）或尝试使用列索引分组，例如

> 按 1 分组
> 
> 按 1 订购

Firebird 1.0 sql 一致性是您可能感兴趣的东西，但这是我能找到的唯一一个： [http ://www.firebirdsql.org/en/sql-conformance/](http://www.firebirdsql.org/en/sql-conformance/)

如果您有任何机会，我建议您更新到最新版本的 FB

# php - 模型的辅助类

> ID：10528030
> 
> 赞同：0
> 
> 时间：2012-05-10T05:31:50.423
> 
> 标签：php, orm, model, kohana, helper

我现在真的很困惑，希望你能帮我*找到方法*:)

假设我有 2 个模型：

*   用户
*   团体

每个用户可以是一个或多个组的一部分，每个组可以有一个或多个用户。这两个模型都是用 ORM 构建的（我正在使用 Kohana 3.2 进行开发，但框架在这里可能并不那么重要）。

当我想将用户添加到组时，问题就来了，**我只有用户 id 和组 id**。

```
$user = ORM::factory('user', $user_id);
$group = ORM::factory('group', $group_id);
$group->add('user', $user); 
```

*   首先我应该通过 id 加载用户
*   其次，我应该按 id 加载组
*   然后我应该将用户添加到组中

所以我应该有 3 db 请求。但我想用一个**请求**来解决这个问题。

我正在考虑创建一个辅助类：*组*有一个方法 *add_user* 接受 2 个参数（group_id，user_id），在这个方法中，我将发出一个数据库请求，在 *groups_users* 表中插入一条记录，插入组中的用户。

有什么更好的方法呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:38:35.380

3 db 请求是必要的，因为您应该确保提供 id 的用户和组确实存在。ORM 方式使代码更具可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:53:12.563

我是 Kohana 用户。这样做有什么问题：

```
$group = ORM::factory('group');
$group->user_id = $user_id;
$group->group_id = $group_id;
try
{
    $group->save();
} catch(ORM_ValidationException e) {
    //deal with error
} 
```

我可能拼错了验证异常，但你明白了。

# ant - 使用 ant 列出所有文件和子目录

> ID：10528032
> 
> 赞同：7
> 
> 时间：2012-05-10T05:32:11.200
> 
> 标签：ant

我正在尝试`rpm`使用`ant task`我需要创建的包创建一个包，该包`specfile`将具有以下格式的所有文件名

```
%attr(0755, root, root) %dir dir1
%attr(0755, root, root) %dir dir1/dir2
%attr(0755, root, root) %dir dir1/dir2/dir3

%attr(0500, root, root) dir1/file1
%attr(0500, root, root) dir1/dir2/file1 
```

我在构建过程中创建了这样的目录结构，但是使用`ant`我无法列出所有文件和目录，然后我可以将其写入我的`specfile`

以下是我尝试列出的文件，但它不区分文件和目录，此外我需要一些方法来迭代列表。

```
<fileset id="dist.contents" dir="${nativePackageDir}" includes="**"/>                                     |        
        <property name="prop.dist.contents" refid="dist.contents"/>                                               |  <target name="javaobject-library" depends="props">                                                             
        <echo>${prop.dist.contents}</echo> 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-12-27T23:34:09.117

```
<dirset id="dist.contents" dir="${nativePackageDir}" includes="*"/> 
<property name="prop.dist.contents" refid="dist.contents"/>
<echo>${prop.dist.contents}</echo> 
```

使用**dirset**而不是**fileset**应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:43:05.330

您只需[在 java 中编写](http://ant.apache.org/manual/develop.html)一个 ant 任务实现，您将向其提供输入目录和要写入的规范文件的路径作为参数。

我发现在 java 中拥有可重用的 ant 任务而不是拥有巨大的 ant xml 文件更好、更易于管理。

# sharepoint - Sharepoint 初学者

> ID：10528036
> 
> 赞同：0
> 
> 时间：2012-05-10T05:32:39.380
> 
> 标签：sharepoint

我是 Sharepoint 的初学者，我有使用 .Net 框架的经验。问题是如何在 Sharepoint 中使用 Visual Studio 2010 和 Sql server。

它是否有一个 web 配置文件，我们在其中编写这样的 Sql 连接，或者我们必须在 Sharepoint 中使用其他东西。
如何在 sharepoint 中使用存储过程。如何在共享点中使用身份验证和授权过程。在sharepoint中是否有任何使用MVC架构的方式好吧提前感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:50:35.717

如果您学习 Sharepoint，您的所有问题都会得到解答但是，是的，您可以在 Visual Studio 中为 Sharepoint 开发，将其与 SQL Server 连接（Sharepoint 需要数据库），您可以使用存储过程。

我强烈建议您搜索一些资源来帮助您开始使用 Sharepoint 开发和/或管理以获得完整的想法；这里有一些资源（仅举几例）可以帮助您入门：

[http://en.wikipedia.org/wiki/Microsoft_SharePoint](http://en.wikipedia.org/wiki/Microsoft_SharePoint)

[http://sharepointmagazine.net/](http://sharepointmagazine.net/)

[http://www.sharepointsaturday.org/default.aspx](http://www.sharepointsaturday.org/default.aspx)

[http://sharepoint-tutorial.net/](http://sharepoint-tutorial.net/)

[http://www.microsoft.com/atwork/default.aspx](http://www.microsoft.com/atwork/default.aspx)

# nhibernate - 如何在一个步骤中延迟加载子集合

> ID：10528039
> 
> 赞同：1
> 
> 时间：2012-05-10T05:32:58.207
> 
> 标签：nhibernate, fluent-nhibernate

我正在开发一个使用 NHibernate 的遗留应用程序，而没有任何明显的效率考虑。我目前正在逐步执行一种方法，到目前为止，该方法已执行了 200 多个查询。这主要是由于 N+1 问题。

无论如何，当我考虑解决这个问题时，我的问题是：

给定一个实体，比如说，有 10 个子集合，几乎所有这些子集合都将在一次操作中被访问，有没有办法在一次调用中延迟加载每个子集合，而不是让 NHibernate 延迟加载每个单独的子记录它被访问（例如，在一个 foreach 循环中，这就是现在正在发生的事情）。在我看来，一次急切地加载所有这些子集合将是一个庞大的查询，而且性能不是很好。但显然这种 N+1 方法是错误的。我如何告诉 NHibernate 执行一个按需加载整个子集合的查询？这仍然给了我 11 个查询，但它比 200 个要好，也许比我急切加载所有内容时必须做的大量查询要好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T16:06:48.300

您可以使用 NHibernateUtil.Initialize(yourObject.ChildCollection) 方法。此方法强制代理根据您在映射中设置的获取策略加载其数据。资料来源：[NHibernate 文档](http://nhforge.org/doc/nh/en/index.html#performance-fetching-initialization)

# ruby-on-rails - 在carrierwave gem上捆绑安装错误

> ID：10528043
> 
> 赞同：3
> 
> 时间：2012-05-10T05:33:27.657
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, carrierwave

我正在尝试安装 gem(carrierwave)，当我使用命令 bundle install 时出现如下错误：

> [/home/sup1re/superrrr/vendor/bundle/ruby/1.8/specifications/carrierwave-0.6.2.gemspec] 中的无效 gemspec：不正确的要求 ["# 1.1.4"]

和

> 在 [/home/sup1re/superrrr/vendor/bundle/ruby/1.8/specifications/carrierwave-0.6.2.gemspec] 中安装carrierwave（0.6.2）无效的gemspec：错误的要求[“＃1.1.4”]

我也尝试运行“ `gem update --system`”

我得到了这个错误

![在此处输入图像描述](../Images/4e1de11a5abc460095d7a22d9fdf91bb.png)

[[1]：http://i.stack.imgur.com/RUxW9.png](https://i.stack.imgur.com/RUxW9.png)

眼镜：

> ruby 1.8.7 (2011-02-18 补丁级别 334) [x86_64-linux]
> 
> 导轨 3.2.3
> 
> 宝石版本是 1.8.5

我想知道我的 Gemfile 有什么问题。

非常欢迎任何意见。谢谢你。

**这是导致错误的carrierwave-0.6.2.gemspec**

```
# -*- encoding: utf-8 -*-

Gem::Specification.new do |s|
  s.name = %q{carrierwave}
  s.version = "0.6.2"

  s.required_rubygems_version = Gem::Requirement.new(">= 0") if s.respond_to? :required_rubygems_version=
  s.authors = [%q{Jonas Nicklas}]
  s.date = %q{2012-04-12}
  s.description = %q{Upload files in your Ruby applications, map them to a range of ORMs, store them on different backends.}
  s.email = [%q{jonas.nicklas@gmail.com}]
  s.extra_rdoc_files = [%q{README.md}]
  s.files = [%q{README.md}]
  s.homepage = %q{https://github.com/jnicklas/carrierwave}
  s.rdoc_options = [%q{--main}]
  s.require_paths = [%q{lib}]
  s.rubyforge_project = %q{carrierwave}
  s.rubygems_version = %q{1.8.5}
  s.summary = %q{Ruby file upload library}

  if s.respond_to? :specification_version then
    s.specification_version = 3

    if Gem::Version.new(Gem::VERSION) >= Gem::Version.new('1.2.0') then
      s.add_runtime_dependency(%q<activesupport>, [">= 3.2.0"])
      s.add_runtime_dependency(%q<activemodel>, [">= 3.2.0"])
      s.add_development_dependency(%q<mysql2>, [">= 0"])
      s.add_development_dependency(%q<rails>, [">= 3.2.0"])
      s.add_development_dependency(%q<cucumber>, ["#<YAML::Syck::DefaultKey:0x718a860d0a98> 1.1.4"])
      s.add_development_dependency(%q<json>, [">= 0"])
      s.add_development_dependency(%q<rspec>, ["~> 2.0"])
      s.add_development_dependency(%q<sham_rack>, [">= 0"])
      s.add_development_dependency(%q<timecop>, [">= 0"])
      s.add_development_dependency(%q<fog>, [">= 1.3.1"])
      s.add_development_dependency(%q<mini_magick>, [">= 0"])
      s.add_development_dependency(%q<rmagick>, [">= 0"])
    else
      s.add_dependency(%q<activesupport>, [">= 3.2.0"])
      s.add_dependency(%q<activemodel>, [">= 3.2.0"])
      s.add_dependency(%q<mysql2>, [">= 0"])
      s.add_dependency(%q<rails>, [">= 3.2.0"])
      s.add_dependency(%q<cucumber>, ["#<YAML::Syck::DefaultKey:0x718a860d0a98> 1.1.4"])
      s.add_dependency(%q<json>, [">= 0"])
      s.add_dependency(%q<rspec>, ["~> 2.0"])
      s.add_dependency(%q<sham_rack>, [">= 0"])
      s.add_dependency(%q<timecop>, [">= 0"])
      s.add_dependency(%q<fog>, [">= 1.3.1"])
      s.add_dependency(%q<mini_magick>, [">= 0"])
      s.add_dependency(%q<rmagick>, [">= 0"])
    end
  else
    s.add_dependency(%q<activesupport>, [">= 3.2.0"])
    s.add_dependency(%q<activemodel>, [">= 3.2.0"])
    s.add_dependency(%q<mysql2>, [">= 0"])
    s.add_dependency(%q<rails>, [">= 3.2.0"])
    s.add_dependency(%q<cucumber>, ["#<YAML::Syck::DefaultKey:0x718a860d0a98> 1.1.4"])
    s.add_dependency(%q<json>, [">= 0"])
    s.add_dependency(%q<rspec>, ["~> 2.0"])
    s.add_dependency(%q<sham_rack>, [">= 0"])
    s.add_dependency(%q<timecop>, [">= 0"])
    s.add_dependency(%q<fog>, [">= 1.3.1"])
    s.add_dependency(%q<mini_magick>, [">= 0"])
    s.add_dependency(%q<rmagick>, [">= 0"])
  end
end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T06:36:11.207

您需要更新 Rubygems，这不是载波问题。 `sudo gem update --system`或`gem update --system`取决于您的设置。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T08:52:06.640

您需要更新 ruby​​gems，但**首先**您需要修复损坏的 gemspecs。

在编辑器中打开`.../specifications/carrierwave-0.6.2.gemspec`，并删除`#<YAML::Syck::DefaultKey:0x718a860d0a98>`. （或`sed -i 's/#<.*> //' blah.gemspec`。）

然后`gem update --system`按照其他地方的描述运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T11:09:41.097

对我来说，这个问题出现在我与 RVM 一起使用的 Ruby 版本上。当尝试在 ruby​​ 1.8.7 中安装carrierwave gem 时，它失败了，我的应用程序正在使用 ruby​​ 1.9.3。

我通过让`.rvmrc`我的应用程序的根级别中的文件具有我需要的正确版本的 ruby​​ 来解决它：

```
rvm use ruby-1.9.3-p385 
```

# android - Android : 网络信息测量

> ID：10528047
> 
> 赞同：1
> 
> 时间：2012-05-10T05:33:40.327
> 
> 标签：android, telephony, signal-strength

我正在尝试开发 android 应用程序来获取有关网络信息测量的低级信息。

我想知道如何获取这些数据？

3G：-RSCP -ECNO（不是 Eclo）-BER

2G：-RxLevelQuality -RxLevelSub

通话状态：-Handover -Dropped Call -Call Failed

如果有人有想法，请帮助我！

* * *

[呼叫状态] 我从[这里](http://code.google.com/p/sipdroid/source/browse/trunk/src/org/sipdroid/sipua/phone/Connection.java)找到了“DisconnectCause” ，但我认为它总是返回正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:54:13.077

您可以构建自己的固件来收集此信息，然后在您的个人手机上部署此固件。

除了您从中获得的数据之外`TelephonyManager`，Android SDK 应用程序无法访问您请求的其余数据。

> 我从这里找到了“DisconnectCause”，但我认为它总是返回正常。

那不是来自Android操作系统。那是来自第三方 SIP 客户端 SipDroid。

# android - 如何将 SQLite 表值逐行传递到 JSON 中？

> ID：10528054
> 
> 赞同：0
> 
> 时间：2012-05-10T05:34:10.013
> 
> 标签：android, json, sqlite

嗨，我将数据库值传递给 web 服务。但它仅通过重新发送的条目值。我需要将所有行一一传递到 JSON 中。

任何人都可以帮助我提供示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:48:01.810

数据库中的 SQLite

```
 Cursor cursor;
     cursor = myDataBase.rawQuery(" SELECT " + VENDORID + " FROM  " + VENDORINFO_TABLE
                + " WHERE " + CATEGORYID + "  = " + id,null);
        while (cursor.moveToNext())
       {

         id = cursor.getInt(cursor.getColumnIndex(VENDORID));

          // your JSON put Code 
            JSONObject jsMain = new JSONObject();
        try {
            jsMain.put("email", id);
            return jsMain.toString();
        } catch (JSONException e) {
            e.printStackTrace();
            return "";
        }
}
    cursor.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:15:48.230

检查下面的代码尝试这种方式。这只是给你的建议。

```
 Cursor cus = db.selectAll_delete();
            JSONObject jon1 = new JSONObject();
            JSONArray jaa = new JSONArray();
            int i = 0;
            try {
                if (cus.moveToFirst()) {
                    do {
                        String a = cus.getString(1);
                        // Toast.makeText(this, ""+ a,
                        // Toast.LENGTH_LONG).show();
                        JSONObject job_get = getData_b(a);

                        jaa.put(i, job_get);
                        i++;
                    } while (cus.moveToNext());
                }

                jon1.accumulate("details", jaa);
            } catch (Exception e) {
                // TODO: handle exception
            }
              if (cus != null && !cus.isClosed()) {
          cus.close();
                 }

            String js = jon1.toString();
            send_to_server(js);
            Log.d("test json", "" + js); 
```

方法 getData_b();

```
 private JSONObject getData_b(String a) {
                // TODO Auto-generated method stub
                Cursor cus = db.fetchRow(a);
                JSONObject job = new JSONObject();
                try {

                    if (cus.moveToFirst()) {
                        do {
                            job.put("B", cus.getInt(1));
                            job.put("I", cus.getString(2));
                            job.put("O", cus.getString(3));
                            job.put("D", cus.getString(4));
                            job.put("D u", cus.getString(5));
                            job.put("L", cus.getString(6));
                            job.put("B", cus.getString(7));
                            job.put("A", cus.getString(8));
                            job.put("K", cus.getString(9));
                            job.put("A", cus.getString(10));
                            job.put("Time", cus.getString(11));
                            job.put("Upd", cus.getString(12));
                            job.put("Deleted", cus.getString(13));

                        } while (cus.moveToNext());
                    }

                } catch (Exception e) {
                    // TODO: handle exception
                }
                return job;
            } 
```

# android - 是否可以在特定时间段内锁定android设备中的蓝牙

> ID：10528055
> 
> 赞同：2
> 
> 时间：2012-05-10T05:34:11.917
> 
> 标签：android, bluetooth

我可以使用蓝牙 API 的禁用方法禁用蓝牙。但我的要求也是在我的应用程序运行时阻止用户对蓝牙的交互。有没有办法阻止用户交互，即当用户尝试启用蓝牙时应用程序将阻止它。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:13:01.867

这是一小段代码，需要编写以禁用/阻止蓝牙访问。但是，如果您想大量修改功能，则生根是解决方案。但是，这篇文章已经与著名的 ast 相关：[How to enable/disable bluetooth programmatically in android](https://stackoverflow.com/questions/3806536/how-to-enable-disable-bluetooth-programmatically-in-android)

# actionscript-3 - HDividedBox 没有完全拖到 VGroup Flex 的左侧

> ID：10528059
> 
> 赞同：1
> 
> 时间：2012-05-10T05:34:42.323
> 
> 标签：actionscript-3, apache-flex, flex4, flex3

我观察到当我们在 HDividedBox 中使用 VGroup 时，拖动并没有完全移到左侧。当我们完全拖动 hdivider 时，VGroup 中的组件仍然出现。但是当我们在 HDividedBox 中使用 VBox 时，拖动工作正常。这是示例代码

`<mx:HDividedBox id="hdivbox" width="100%" height="100%" liveDragging="true">
<s:VGroup width="50%" height="100%" > <s:ComboBox/> <s:ComboBox/> </s:VGroup> <s:VGroup width="50%" height="100%" > <s:Panel width="100%" height="100%"/> </s:VGroup> </mx:HDividedBox>`

现在，当我们将分隔线完全拖到左侧时，第一个组合框是可见的，但是当我用 VBox 替换相同的代码时，拖动工作正常。谁能在不使用 VBox 的情况下帮助我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:44:22.907

我花了一些时间才明白为什么会发生这种情况，但这真的很有趣，所以谢谢你的提问。如果您只需要修复它，请`clipAndEnableScrolling="true"`在第一个 VGroup 中使用。

问题是在`VBox`属性[clipContent](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/supportClasses/GroupBase.html#clipAndEnableScrolling)中默认为true，但在`VGroup`几乎相同的属性[clipAndEnableScrolling](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/core/Container.html#clipContent)中默认为false。这会导致这种不同的行为。

# android - 为什么图像会在列表视图中重复并自动附加？

> ID：10528060
> 
> 赞同：0
> 
> 时间：2012-05-10T05:34:49.717
> 
> 标签：android, imageview, baseadapter

此类扩展 baseadapter

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (!imagepath[position].toString().equals("no picture")) {
        imageLoader.DisplayImage(imagepath[position], imageview);
    }
}

public void DisplayImage(String url, ImageView imageView) {
    imageViews.put(imageView, url);
    Bitmap bitmap = memoryCache.get(url);
    if (bitmap != null) {
        imageView.setImageBitmap(bitmap);
    } else {
        queuePhoto(url, imageView);
    }
} 
```

假设第一个视图应该首先检查仅显示，但现在检查后显示。

```
if (!imagepath[position].toString().equals("no picture")) {

        titletext.setPadding(imageview.getWidth() + 5, 0, 0, 0);
        datetext.setPadding(imageview.getWidth() + 5, 0, 0, 0);
        imageview.setVisibility(View.VISIBLE);
        imageLoader.DisplayImage(imagepath[position], imageview);
    } else {
        imageview.setVisibility(View.INVISIBLE);
        imageview.setImageDrawable(null);
        titletext.setPadding(0, 0, 0, 0);
        datetext.setPadding(0, 0, 0, 0);
    }

    titletext.setText(title[position].toString());
    categorytext.setText(category[position].toString());
    datetext.setText(date[position].toString()); 
```

我希望 textview setpadding 首先只显示而不是相反。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T05:42:51.583

这是因为`ListView`重用了`Views`, put else 条件

```
public View getView(int position, View convertView, ViewGroup parent) {
    if (!imagepath[position].toString().equals("no picture")) {
        imageLoader.DisplayImage(imagepath[position], imageview);
    }
    else{
        imageview.setImageResource(android.R.color.transparent);
        // OR
        imageview.setImageDrawable(null);
    }
} 
```

# string - 使用 boost::iter_split 拆分时如何避免空标记？

> ID：10528061
> 
> 赞同：1
> 
> 时间：2012-05-10T05:34:54.880
> 
> 标签：string, boost

我有使用 boost 将字符串拆分为标记的代码：

```
boost::algorithm::iter_split(
  result_vector, input, boost::algorithm::first_finder(delimiter)); 
```

什么是最好和最优雅的方法来改变它以使结果不包含空标记？

例如，我的输入可能是：

```
foo.bar.baz. 
```

分隔符在哪里`.`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T04:48:57.120

只需在结果向量上使用 remove_if 和一个测试字符串的 lambda 函数。

```
auto newEndIt = std::remove_if(result_vector.begin(), result_vector.end(), [&](const std::string& it)->bool
{
    return it.empty();
}); 
```

然后只需调整向量的大小

```
result_vector.resize(newEndIt - result_vector.begin()); 
```

# python - 什么是 Python 的“模型对象”？

> ID：10528064
> 
> 赞同：0
> 
> 时间：2012-05-10T05:35:10.993
> 
> 标签：python

这个问题是在面试 Python 开发人员职位时向我提出的。

如果有人可以就 Python 回答这个问题，那将有很大帮助。也欢迎通用定义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T05:44:43.157

阅读关于模型-视图-控制器架构的维基百科。模型类通常指的是领域模型。Martin Fowler 在 MVC 上：“在模拟我们对现实世界的感知的领域对象和作为我们在屏幕上看到的 GUI 元素的表示对象之间进行了明确的划分。领域对象应该是完全自包含的，并且可以在不参考表示的情况下工作，他们还应该能够支持多个演示，可能同时进行。”

在 Django 和其他一些 Web 框架中，这在有限的意义上现在是映射到数据库表的对象的同义词，但作为一个通用概念并不限于。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T05:37:42.837

通常它们是映射到数据库表的对象（它们的实例映射到相应表中的行）。

# jquery - 如何使用 jQuery 在带有滚动条的 html 中创建可调整大小的表格？

> ID：10528065
> 
> 赞同：6
> 
> 时间：2012-05-10T05:35:17.737
> 
> 标签：jquery, html, html-table, scrollbar, resizable

我想在 HTML 中创建一个具有可调整大小列的表。我也想要滚动条到表格，但表格的标题在滚动时应该保持固定。

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:20:57.917

[www.tablefixedheader.com](http://www.tablefixedheader.com/documentation/)

> > 只需创建一个基本的有效 HTML，如下例所示。但请注意，层次结构必须是：
> 
> ```
>  - table > thead > tr > th
>  - table > tbody > tr > td 
> ```

[可调整大小的列的示例](http://www.tablefixedheader.com/fullpagedemo/#ex_4)

```
 $('#4').fixheadertable({ 
    caption     : 'My employees', 
    colratio    : [50, 150, 150, 150, 220, 150], 
    height      : 200, 
    width       : 800, 
    zebra       : true,
    resizeCol   : true,
    minColWidth : 50 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T06:28:58.287

我想，这是你的解决方案。请参阅jsfiddle 上的[演示。](http://jsfiddle.net/VBH8a/)如果要从服务器加载数据，请设置`savedStateLoad: true`. 否则忽略ajax部分，在你的情况下，只需设置`savedStateLoad: false`

感谢他们，代码的原始来源在[这里。](http://reconstrukt.com)

# jakarta-ee - 身份验证：Java EE 6 中最简单的形式

> ID：10528072
> 
> 赞同：1
> 
> 时间：2012-05-10T05:35:43.550
> 
> 标签：jakarta-ee, authentication, jboss, java-ee-6

我知道这个问题不是一个好问题，因为它有无数的答案，但这里是：

我是 Java EE 6（在 JBoss AS 7 上）的新手，我来自 Tomcat + spring 世界。我的第一个真正的 web 应用程序类似于一个简单的 jsf jpa hibernate 和 ejb 的 crud。现在我需要使用最简单的登录表单来保护 URL (/admin/*)。我已经有两个名为“User”（用户名、密码、role_id 和其他数据）和“Role”（代码、名称等等）的表（休眠实体）。我可以制作我自己的 LoginController，会话范围来管理登录相关问题，但我不知道怎么说“嘿，它只适用于 /admin 路径！” 所以....我开始阅读有关 web.xml 配置的内容：安全约束、jdbc 领域等。但是，对不起，我还是达不到一个好的知识点，我太沉迷于教程和边做边学了。

你能帮我找到一个带有简单登录表单的示例项目吗？或者至少有一些关于如何将我的登录表单绑定到我的数据库表的教程或一些建议？我不需要 500 页的准确文档。只是试图使“标准”身份验证工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:21:55.707

行。首先，Java EE 标准没有提供认证机制。只有基于角色的身份验证是规范的一部分。所以每一个应用服务器都必须有其自定义的认证机制，这使我们能够使用数据库、LDAP 等来存储用户凭据。

在 JBoss 的情况下，它看起来如下。

**(1)**您需要在 web.xml 中定义安全约束（有很多教程如何做到这一点）。它告诉哪些 URL 需要登录。您需要定义 login-config 元素以选择用户将如何登录 - 使用浏览器弹出窗口或自定义表单。

**(2)**您需要在 configuration/standalone.xml 中定义 JBoss 端的 security-domain。例如，请参阅[此示例](https://community.jboss.org/thread/168992?_sscc=t)。

**(3)**你需要加入(1)和(2)。这是在 jboss-web.xml 文件中使用应用程序的 WEB-INF 完成的。它看起来或多或少

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-web>
          <security-domain>NAME-OF-DOMAIN-DEFINED-IN-STEP-2</security-domain>
          <context-root>ROOT-OF-YOUR-APP</context-root>
</jboss-web> 
```

我不确定 JBoss 7 的情况如何，但在以前的版本中，您需要添加`java:/jaas/`前缀，因此安全域内容将是`java:/jaas/NAME-OF-DOMAIN-DEFINED-IN-STEP-2`.

此外，如果您了解 Spring Framework，则可以考虑使用 Spring Security，绕过 Java EE 机制。

# vba - Outlook 自动转发设置回复到原始发件人而不是转发者

> ID：10528075
> 
> 赞同：2
> 
> 时间：2012-05-10T05:35:50.107
> 
> 标签：vba, outlook

我有 VBA 代码将电子邮件转发到特定帐户。除了被转发的电子邮件具有转发者的电子邮件地址外，它可以工作。

转发电子邮件后，如何保留原始发件人电子邮件地址作为回复？

```
Sub AutoForwardAllSentItems(Item As Outlook.MailItem)
    Dim strMsg As String
    Dim autoFwd  As Outlook.MailItem

    Set autoFwd = Item.Forward

    autoFwd.Recipients.Add "my_email@domain.com"

    autoFwd.Send

    Set autoFwd = Nothing
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T14:43:28.630

> 所以有没有办法？真的吗？– 迈克 7 小时前

当 Riking 提到 Outlook 不允许您修改电子邮件中包含的标题时，他是正确的。我猜他指的是`.SenderEmailAddress`财产。您不能修改 ，`.SenderEmailAddress`因为此属性是只读的。

话虽如此，您可能还想使用另一个属性。`.SentOnBehalfOfName`更多细节在这里

**主题：SentOnBehalfOfName 属性**

**链接**： http: [//msdn.microsoft.com/en-us/library/aa171998%28v=office.11​​%29.aspx](http://msdn.microsoft.com/en-us/library/aa171998%28v=office.11%29.aspx)

***从上面的链接引用***

> 返回一个字符串，指示邮件的预期发件人的显示名称。此属性对应于 MAPI 属性 PR_SENT_REPRESENTING_NAME。读/写。
> 
> 表达式.SentOnBehalfOfName
> 
> 表达式 必需。返回 MailItem 对象的表达式。

另请参阅此链接

**主题：自动设置新 Outlook 邮件的“发件人”地址**

**链接**：[http ://benchristian.wordpress.com/2005/12/18/automatically-setting-the-from-address-of-a-new-outlook-message/](http://benchristian.wordpress.com/2005/12/18/automatically-setting-the-from-address-of-a-new-outlook-message/)

***从上面的链接引用***

> 如果您为一组用户使用启用了邮件的公用文件夹或分发列表，并且希望他们发送的邮件回复发送到组 smtp 地址而不是发件人的邮箱，则设置备用回复地址特别有用。

高温高压

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:50:08.387

到目前为止，我所看到的一切都支持 Outlook 不允许您修改电子邮件中包含的标题的结论。

对不起。如果您可以选择，我建议您在电子邮件提供商处管理转发。

# swt - 在绘图问题中绘制矩形

> ID：10528080
> 
> 赞同：1
> 
> 时间：2012-05-10T05:36:18.913
> 
> 标签：swt, eclipse-rcp, eclipse-gef, draw2d

我们正在为我们的项目创建一些图形应用程序。我们在项目中使用 Draw2d 和 GEF 技术。我们必须在绘图区域中绘制一个矩形。功能如下。

1.  使用单击工具栏中的矩形按钮。
2.  将光标更改为十字光标符号。
3.  当用户单击该区域并拖动鼠标时，它会根据鼠标的拖动显示矩形。

到目前为止，它工作正常。现在的问题是，我们有放大和缩小功能。当使用放大并绘制矩形时，它没有到达所需的位置。它在该区域的部分下方。然后用户必须滚动并查看矩形。只有当我们使用放大和缩小时才会出现这个问题。

如何解决这个问题？请在下面查看我的代码。

```
package draw2dview;

import org.eclipse.draw2d.ColorConstants;
import org.eclipse.draw2d.FigureCanvas;
import org.eclipse.draw2d.FreeformLayout;
import org.eclipse.draw2d.FreeformViewport;
import org.eclipse.draw2d.IFigure;
import org.eclipse.draw2d.LightweightSystem;
import org.eclipse.draw2d.MouseEvent;
import org.eclipse.draw2d.MouseListener;
import org.eclipse.draw2d.RectangleFigure;
import org.eclipse.draw2d.ScalableFigure;
import org.eclipse.draw2d.ScalableFreeformLayeredPane;
import org.eclipse.draw2d.ToolbarLayout;
import org.eclipse.draw2d.XYLayout;
import org.eclipse.draw2d.geometry.Point;
import org.eclipse.draw2d.geometry.Rectangle;
import org.eclipse.gef.DefaultEditDomain;
import org.eclipse.gef.EditDomain;
import org.eclipse.gef.EditPart;
import org.eclipse.gef.EditPartFactory;
import org.eclipse.gef.GraphicalViewer;
import org.eclipse.gef.editparts.ScalableFreeformRootEditPart;
import org.eclipse.gef.editparts.ScalableRootEditPart;
import org.eclipse.gef.editparts.ZoomManager;
import org.eclipse.gef.ui.actions.ZoomInAction;
import org.eclipse.gef.ui.actions.ZoomOutAction;
import org.eclipse.gef.ui.parts.ScrollingGraphicalViewer;
import org.eclipse.jface.action.Action;
import org.eclipse.jface.action.IToolBarManager;
import org.eclipse.swt.SWT;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.ui.IActionBars;
import org.eclipse.ui.part.ViewPart;

public class View extends ViewPart implements org.eclipse.swt.events.MouseListener {
    public static final String ID = "draw2dview.view";

    private Action drawAction;
    private ScalableFreeformLayeredPane root;
    ScalableRootEditPart editPart = null ;
    private XYLayout layout;
    private ZoomManager zoomManager ;

    EditDomain editDomain = new DefaultEditDomain(null);
    GraphicalViewer graphicalViewer = new ScrollingGraphicalViewer();
    ScalableFreeformRootEditPart rootEditPart = new ScalableFreeformRootEditPart();

    private FigureCanvas createContents(Composite parent){

        root = new ScalableFreeformLayeredPane();
        zoomManager = new ZoomManager(root,new FreeformViewport());
        root.setFont(parent.getFont());
        //layout = new XYLayout();

        layout= new FreeformLayout();
        root.setLayoutManager(layout);

        FigureCanvas figureCanvas = new FigureCanvas(parent,SWT.DOUBLE_BUFFERED);
        figureCanvas.addMouseListener(this);
        figureCanvas.setBackground(ColorConstants.white);
        LightweightSystem lws = new LightweightSystem(figureCanvas);
        lws.setContents(root);
        return figureCanvas ;

    }

    private IFigure createPersonFigure() {
        RectangleFigure rectangleFigure = new RectangleFigure();
        rectangleFigure.setBackgroundColor(ColorConstants.blue);
        rectangleFigure.setLayoutManager(new ToolbarLayout());
        rectangleFigure.setPreferredSize(100, 100);
        return rectangleFigure ;
    }

    /**
     * This is a callback that will allow us to create the viewer and initialize
     * it.
     */
    public void createPartControl(Composite parent) {

    /*  graphicalViewer.createControl(parent);
        editDomain.addViewer(graphicalViewer);
        graphicalViewer.setRootEditPart(rootEditPart);*/

        createContents(parent);
        createAction();
        contributeToActionBars();
    }

    private void contributeToActionBars() {
        IActionBars bars = getViewSite().getActionBars();

        addToToolBar(bars.getToolBarManager());
    }

    private void addToToolBar(IToolBarManager toolBarManager2){
        toolBarManager2.add(drawAction);
        toolBarManager2.add(new ZoomInAction(zoomManager));
        toolBarManager2.add(new ZoomOutAction(zoomManager));

    }

    private void createAction() {
        drawAction = new Action() {
            public void run() {
                System.out.println("execued..");

            }
        };
        drawAction.setText("Draw");
        drawAction.setImageDescriptor(Activator.getImageDescriptor("icons/alt_window_16.gif"));
    }

    /**
     * Passing the focus request to the viewer's control.
     */
    public void setFocus() {
    //  viewer.getControl().setFocus();
    }

    @Override
    public void mouseDoubleClick(org.eclipse.swt.events.MouseEvent e) {

    }

    @Override
    public void mouseDown(org.eclipse.swt.events.MouseEvent e) {

        System.out.println("inside..Mousedeown:: "+e.x+","+e.y);
        IFigure personFigure = createPersonFigure();                
        root.add(personFigure);
        layout.setConstraint(personFigure, new Rectangle(new Point(e.x,e.y),personFigure.getPreferredSize()));
        //layout.setConstraint(personFigure, new Rectangle(new Point(e.x,e.y),personFigure.getPreferredSize()));
    }

    @Override
    public void mouseUp(org.eclipse.swt.events.MouseEvent e) {

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:32:23.113

您需要根据缩放管理器当前使用的缩放级别来缩放鼠标事件坐标。鼠标事件是绝对像素，但您的 ZoomManger 会导致将比例因子应用于您的图形坐标。我认为您还需要考虑 ViewPort 的客户区。

首先，当您在 FigureCanvas 中的 ViewPort 中构造 ZoomManager 时：

```
zoomManager = new ZoomManager(root, figureCanvas.getViewPort()); 
```

然后尝试类似：

```
double scaleFactor = zoomManager.getZoom();
Rectangle r = figureCanvas.getViewport().getClientArea();
layout.setConstraint(personFigure, new Rectangle(new Point((e.x + r.x) * scaleFactor,(e.y + r.y) * scaleFactor),personFigure.getPreferredSize())); 
```

这可能需要调整以使其正确，让我知道....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:01:14.077

您必须将从鼠标事件获得的绝对坐标转换为人物图形父级的相对坐标：

```
@Override
public void mouseDown(org.eclipse.swt.events.MouseEvent e) {
    System.out.println("inside..Mousedeown:: "+e.x+","+e.y);
    IFigure personFigure = createPersonFigure();                
    root.add(personFigure);
    Point p = new PrecisionPoint(e.x,e.y);
    personFigure.translateToRelative(p);
    layout.setConstraint(personFigure, new Rectangle(p,personFigure.getPreferredSize()));
} 
```

有关更多信息，请查看[draw2d 帮助](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.draw2d.doc.isv/guide/coordinates.html&cp=24_0_0_5)

# iphone - iOS GPS定位没有运营商服务也没有wifi连接

> ID：10528081
> 
> 赞同：0
> 
> 时间：2012-05-10T05:36:27.220
> 
> 标签：iphone, geolocation, wifi, carrier

具体来说，这个问题仅适用于 iPhone，基本上问题是 - 当设备没有运营商服务和 wifi 连接时，iOS 定位服务是否仍然提供地理位置（纬度、经度）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:54:29.387

是的，它会使用 GPS 为您提供位置，如果 GPS 信号不存在，它仍会为您提供旧的缓存位置。所以无论如何它都会给你位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:59:10.673

据我所知，最新的型号（从 3 开始？我想？）有一个实际的 GPS，所以只要你能“看到”开阔的天空，它就会变得越来越长。相关应用程序是否能够运行（例如是否可以加载地图）完全是另一回事。

# jquery - 如何防止出现第二个 textarea 编辑器？

> ID：10528084
> 
> 赞同：0
> 
> 时间：2012-05-10T05:37:00.320
> 
> 标签：jquery, editor

这就是我想要完成的事情：我有一个代码可以生成一个段落标记和一个 div 标记，具体取决于单击的按钮。如果我生成一个段落或一个 div，我可以单击其中一个来选择，然后再次单击以取消选择。如果我选择正在生成的段落（背景颜色更改），则会出现一个文本区域编辑器，如果我取消选择，它会隐藏。同样的任务也适用于 div 标签。例如，我遇到的问题是，如果我选择 p 标签，然后尝试选择 div 标签，它只会滑动 textarea 编辑器，我想防止这样：如果选择了元素，则只显示 textarea 编辑器特定元素，直到我取消选择。然后我可以选择另一个元素并继续。

如果您想查看我的项目，这里是一个链接，以便您更好地理解，如果您愿意，可以进行编辑。 [http://jsfiddle.net/RzvV5/97/](http://jsfiddle.net/RzvV5/97/)

jQuery

```
$(document).ready(function(){

$('#Test').on('click', '.test-p', function() {
         editEl = $(this);
         $('#editor-d').hide();
         $('#editor-p').show();
         $('#editor-p textarea').val($(editEl).html());
});
$('#Test').on('click', '.test-d', function() {
         editdiv = $(this);
         $('#editor-p').hide();
         $('#editor-d').show();
         $('#editor-d textarea').val($(editdiv).html());
});

$('#editor-p textarea').change(function() {
$(editEl).html($('#editor-p textarea').val());
});
$('#editor-d textarea').change(function() {
$(editdiv).html($('#editor-d textarea').val());
});
$('#editor-p textarea').change(function() {
$(editEl).html($('#editor-p textarea').val());
});
$('#editor-d textarea').change(function() {
$(editdiv).html($('#editor-d textarea').val());});

var pid = 1;
$("#addP").on({
    click: function(){
        var pr = $('<p />').attr({class:'test-p', 'id':'paragraph_' + pid}).text('This is a paragraph ' + pid);
        var d = $("#Test");
        var pclone = $(pr).clone();
        pclone.on({
            mouseenter: function(){    
                $(this).addClass("inside");
            },
            mouseleave: function(){                             
                $(this).removeClass("inside"); 
            },
                    });
        pclone.appendTo(d);
pid++;
    }
});
var divid = 1;
$("#addDiv").on({
    click: function(){
             var div = $('<div />').attr({'class':'test-d', 'id':'div_' + divid}).text('This is a div ' + divid);  
             var d = $("#Test");
             var pclone = $(div).clone();
             pclone.on({
             mouseenter: function(){    
                $(this).addClass("inside");
             },
             mouseleave: function(){                             
                $(this).removeClass("inside"); 
             },
                    });
        pclone.appendTo(d);
divid++;
    }
});

var div =  $('<div class="customD" id="d"></div>');
var del = $('<a href="#" class="delete" id="erase">Delete</a>');

var flag = false;
$("#Test").on("click", "p, div", function(){ 
    var cur = $(this).css("background-color");

     if(cur=="rgb(255, 255, 255)") { 
          if(flag==false){
               $(this).css("background-color","#FDD").addClass("help insider").after(div);
                flag = true;
          }
    }else { 
     $('#editor-p').hide();
     $('#editor-d').hide();

      $(this).css("background-color","white").removeClass('help insider');
      $(div).remove();
 flag = false;
    }    
    $(div).append(del);  

$(".delete").on("click",function(){
    $(this).parent().prev().remove();
    $(this).remove();
$('#editor-p').hide();

flag = false;

});
}); 
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:55:40.893

您的第二个文本框`<input type ="text" />`在您的 html 中

这是你的意思吗：http: [//jsfiddle.net/RzvV5/97/](http://jsfiddle.net/RzvV5/97/)

如果你想防止其他 div 被点击，你应该使用一个变量，比如 'editingMode=true'，然后在完成编辑时设置为 false。然后在点击事件中添加一个 if 以查看您是否处于编辑模式，例如 if(editingMode){ //点击的东西 //}

希望对您有所帮助，这就是您的想法:)

# android - 通过java重新挂载An droid文件系统

> ID：10528090
> 
> 赞同：2
> 
> 时间：2012-05-10T05:37:21.303
> 
> 标签：android, android-source

我需要将 android 文件系统重新挂载为读写而不是只读。我知道如何通过命令提示符进行操作，也知道如何进行应用程序开发。

但是我正在调整android源代码，如果我使用

```
Process proc=Runtime.getRuntime.exec("su"); 
```

这没用。因此我需要使用`android.os.process`相同的对象，我被困在这里，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:55:30.913

1.  试试这个代码来获得超级用户访问权限（你需要一个安装了超级用户的**手机**）：

    ```
    try {
        // Perform su to get root privledges
        Process p = Runtime.getRuntime().exec("su");

        DataOutputStream os = new DataOutputStream(p.getOutputStream());

        os.writeBytes("<..... here you may write commands ....>\n");

        // Close the terminal
        os.writeBytes("exit\n");
        os.flush();
    } catch (IOException e) {
        toastMessage("not root");
    } 
    ```

2.  拥有超级用户访问权限后，您可以`adbd`使用以下命令开始侦听某个 TCP 端口：

    ```
    setprop service.adb.tcp.port 5555
    adbd &
    setprop service.adb.tcp.port -1 
    ```

3.  打开与所选端口的 TCP 连接并发出`remount`命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:45:01.237

实际上，很难理解你要做什么。但是，如果您正在调整 android 源 (aosp)，那么修改`init.rc`（位于 system/core/rootdir 下）文件以获取系统映像 rw 会更容易。如果要在运行时更改状态，则需要创建自己的本机应用程序（例如，查看 run-as 命令），在其中更改进程的 uid，将其设为 suid，将其嵌入到源中，并从您的应用程序中调用它。

# reporting - AdWords 中最简单的 Ad Hoc 报告请求不会生成任何数据。为什么？

> ID：10528097
> 
> 赞同：2
> 
> 时间：2012-05-10T05:38:08.230
> 
> 标签：reporting, google-ads-api

以下报表定义继续不针对所有帐户生成数据：

```
<reportDefinition xmlns="https://adwords.google.com/api/adwords/cm/v201109">
<selector>
<fields>AccountDescriptiveName</fields>
<fields>AccountId</fields>
</selector>
<reportName>1_91_123_skinny</reportName>
<reportType>ACCOUNT_PERFORMANCE_REPORT</reportType>
<dateRangeType>YESTERDAY</dateRangeType>
<downloadFormat>TSV</downloadFormat>
</reportDefinition> 
```

我没有收到任何错误消息。只是没有来自*看似*完全合法的报告定义的数据？我一直在使用类似的一段时间，没有任何问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T13:34:18.177

核心问题是零印象行为：

[http://googleadsdeveloper.blogspot.com/2011/12/zero-impression-data-in-adwords-api.html](http://googleadsdeveloper.blogspot.com/2011/12/zero-impression-data-in-adwords-api.html)

ACCOUNT_PERFORMANCE_REPORT 不支持零展示次数行，即使您确实有展示次数，也需要确保您请求展示次数字段。

# javascript - 在导航中为活动项目背景设置动画失败

> ID：10528098
> 
> 赞同：0
> 
> 时间：2012-05-10T05:38:24.520
> 
> 标签：javascript, jquery, null, append, offset

我有以下标记：

```
<ul>
    <li><a href="#">first</a></li>
    <li><a href="#">largerWord</a></li>
    <li class="active"><a href="#">third</a></li>
</ul> 
```

项目具有透明背景，但活动类除外，它具有蓝色。

这个想法是，当用户单击（不是活动的）而不是切换背景时，我想移动背景，您可以在此处看到几乎完成的结果，但第一次单击失败（请参阅错误日志的问题结尾）：

[http://jsfiddle.net/FeV55/26/](http://jsfiddle.net/FeV55/26/)

我所做的是动态创建较低的 z-index`<li>`并根据（单击的）项目偏移量和根据（单击的）项目宽度的宽度为左侧设置动画

jQuery代码：

```
$(document).ready(function(){

    $('ul li a').not('.active').click(function(){
        /*caching*/       
        var activa = $('li.active');
        var bg = $('li.back');;
        var list = $(this).closest('ul');
        /*when it's first click the background item doesnt exist*/
        if(bg.length>0 == false){
            list.append('<li class="back"></li>');
        }
        var width = $(this).outerWidth(true);
        var leftUL = list.offset().left;
        var leftThis = $(this).offset().left;
        var left  = leftThis - leftUL;
        /*Remove class to previous active*/
        activa.removeClass('active');
        /*Cancel background even if parent is active*/
        $(this).addClass('noBg');
        /*Update active class*/
        $(this).parent().addClass('active');
        /*Move the background to its offset*/
        bg.animate({'left':left,'width':width});

        /*logs*/
        $('#oUl').text(leftUL);
        $('#ocl').text($(this).offset().left);
        $('#odf').text(left);
        $('#obg').text(bg.offset().left);
    });
}); 
```

但它在第一次点击时失败，萤火虫日志：

```
bg.offset() is null
[Parar en este error]   

$('#obg').text(bg.offset().left); 
```

问题是为什么？无论如何，该项目应该在那时存在..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:43:17.710

请务必`bg`在创建后选择您分配给的元素：

```
 var bg = $('li.back');

 if (bg.length == 0) {
   list.append('<li class="back"></li>');
   bg = $('li.back');
 } 
```

更好的是，将元素创建*为* `bg`：

```
 if (bg.length == 0) {
   bg = $('<li class="back"></li>');
   list.append(bg);
 } 
```

# c# - 试图理解错误信息

> ID：10528101
> 
> 赞同：2
> 
> 时间：2012-05-10T05:38:37.917
> 
> 标签：c#

我在 VisualStudio 中收到一条我自己无法解决的错误消息。消息是：

*可访问性不一致：属性类型“WindowsFormApplication1.ContactFiles.Contact”的可访问性低于属性“WindowsFormApplication1.ContactForm.ContactData”*

```
public ContactFiles.Contact ContactData
    {
        get
        {
            return m_contact;
        }
        set
        {
            if (value != null)
                m_contact = value;
        }
    } 
```

Preciate帮助查找此问题的错误源！谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T05:40:50.270

标记`ContactFiles.Contact`为`public`以解决错误。

您的`public`属性`ContactData`正在返回非公共类型的实例`ContactFiles.Contact`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:54:55.860

Kyle 提出了一种方法，但如果这会导致更多（类似）错误，那么您可以尝试另一种方法：将您的属性设为内部：

```
internal ContactFiles.Contact ContactData
{
    // Code as before
} 
```

如果您*需要*该属性是公共的，那么您需要`Contact`是公共的……这意味着您需要查看 的所有公共属性`Contact`以查看它们是否*引用*内部（或私有）类型等。

基本上你不能让一个*公共*属性返回一个*内部*（或私有嵌套）类型——它实际上是在说“你可以使用它，但你不能知道我将返回什么”，这不是有道理。普通方法的参数和返回类型也是如此。您也不能从内部类派生公共类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:45:45.873

当您尝试在公共可用的方法中返回内部或私有对象时，会发生此异常。如果您尝试将私有已知对象授予公共方法，则会发生相同的异常

# jquery - 压缩 Spring mvc 响应并将其解压缩回 jquery

> ID：10528102
> 
> 赞同：0
> 
> 时间：2012-05-10T05:38:43.523
> 
> 标签：jquery, spring, spring-mvc, spring-security, httpresponse

如何以压缩格式发送 spring MVC 响应，例如 gZip 格式。我将从 jQuery 发送一个 json 请求，并希望得到来自 spring mvc 的压缩响应。得到响应后，jQuery 应该能够以 JSON 等所需格式解压缩此响应。如果我得到样品，我会很高兴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:41:03.600

让网络服务器/浏览器处理它。如果网络服务器对数据进行 gzip 压缩并发送适当的标头，浏览器将自动解压缩它。

您必须为此编写**零**行代码。

# actionscript-3 - 如何从 Flex 移动应用程序中将下拉列表 ID 输入到 sqlite 数据库中？

> ID：10528103
> 
> 赞同：0
> 
> 时间：2012-05-10T05:38:44.467
> 
> 标签：actionscript-3, apache-flex, actionscript, flex4.5, flexbuilder

请帮忙，我无法在我的 flex 移动应用程序中将数据库 ID 输入到 Sqlite 数据库中。以下是我的代码：

```
<fx:Script>
    <![CDATA[

            [Bindable]public var acItem : ArrayCollection = new ArrayCollection(
                [   {ItemName:'ABC',data:0},
                    {ItemName:'XYZ',data:1},
                    {ItemName:'PQR',data:2},

                ]);
            protected function dropdown_changeHandler(e:IndexChangeEvent):void
                {

                selection = e.newIndex;

                }
    ]]>
</fx:Script>
<s:DropDownList id="dropdown" width="150" height="61.35" change="dropdown_changeHandler(event)"
                dataProvider="{acItem}" fontSize="16" labelField="ItemName"
                prompt="SelectDatabase"
                x.landscape="492" y.landscape="380" width.landscape="215"
                height.landscape="31.35"
                x.portrait="243" y.portrait="568" width.portrait="215" height.portrait="31.35">

</s:DropDownList> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:52:41.740

对不起，上面的代码是完全正确的。当我将下拉字符串的值传递到数据库时，我使用了 ","+"dropdown.Id+"," 但它是错误的。然后我再次尝试或使用 ","+"dropdown.selectedIndex "+"," 正常工作。

所以如果有人使用 sqlite 所以使用上面的 decleration 。谢谢，维诺德

# rhomobile - Mac 上的 Rhostudio rhosimulator 崩溃

> ID：10528108
> 
> 赞同：0
> 
> 时间：2012-05-10T05:38:57.960
> 
> 标签：rhomobile, rhodes

我在带有 i5 2.3 GHz 和 4GB Ram 的 Mac Lion 10.7.3 上运行。

应用程序在命令行 rake run:iphone rake run:android 下运行良好

但是当我尝试使用 RhoSimulator 运行同一个应用程序时，应用程序在登录后就崩溃了。

我研究了所有的利弊，但徒劳无功。

首先要做的事情：作为此链接的第一段，建议[http://docs.rhomobile.com/rhodes/simulator](http://docs.rhomobile.com/rhodes/simulator)

“RhoSimulator 允许运行 Rhodes 应用程序而无需冗长的构建过程，并在 RhoStudio 中调试它们。目前 RhoSimulator 仅适用于 Windows。”

这完全可以在 Mac 上运行 rhosimulator 吗？

如果是，那么请找到[崩溃报告](https://groups.google.com/group/rhomobile/attach/1d8679faf377fc28/rho-simulator-crash.txt?part=4&authuser=0)并提出一些建议来解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T12:37:16.400

是的，对我来说也是，无缘无故，就在同一个应用程序在 rhosimulator 中运行前 1 周，但现在得到了与您相同的崩溃报告。

但我可以登录（http异步），但在一页后，rhosimulator崩溃..

-> 卸载所有 gem rhodes，以及多个包 gems 版本.. -> 重新安装 rhodes 3.2.2

-> 遇到同样的崩溃。

-> 获取并安装 rhosimulator 修复包

-> 遇到同样的崩溃

尝试为 iphone 模拟器编译，运行：iphone-> 好的，在 iphone 模拟器中 -> 让应用程序退出同一页面（我想崩溃）..

所以不明白。，这是我使用这个框架的第三个应用程序，我厌倦了修补框架并尝试获得稳定的工作框架......

# facebook - Facebook Graph - 如果真实用户不需要身份验证？

> ID：10528110
> 
> 赞同：1
> 
> 时间：2012-05-10T05:39:22.057
> 
> 标签：facebook, json, http, facebook-graph-api, xmlhttprequest

我只是想用 Facebook Graph 和它的 JSON 响应来解决一点问题，我意识到，如果我通过 Microsoft.XMLHTTP 打开这个 URL，我会得到一个 OAuthException。但是，如果我只是从浏览器中打开这个 url，它会很好地打开 JSON 文件。

Facebook 是否读取了您的 HTTP 标头，然后需要特定标头进行身份验证？

我正在通过这个 URL 尝试它： [http ://graph.facebook.com/426148244069770/photos?limit=10](http://graph.facebook.com/426148244069770/photos?limit=10)

也许你们知道为什么会这样吗？因为我真的很想通过服务器端读出这个 JSON，而不是把它强加给客户端。

最好的，S.

# ruby-on-rails-3 - Rails 停止执行函数

> ID：10528114
> 
> 赞同：1
> 
> 时间：2012-05-10T05:40:07.900
> 
> 标签：ruby-on-rails-3, webbrowser-control, webrick

我有一个名为 send_email_to_all 的方法。现在，假设用户按下“发送电子邮件”按钮，上述功能向 100 人发送电子邮件。但是执行上面的 send_email_to_all 方法要花很多时间。但是如果用户想在执行时停止这个方法，用户将按下每个网络浏览器顶部提供的停止按钮。现在的问题是尽管用户按下了停止，WEBrick 并没有停止执行该功能。什么是解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:17:08.167

你真的不应该让 Rails 通过一个 Web 请求处理这么多电子邮件。您应该提供某种后台进程来管理他们的交付。

[Railscasts.com](http://railscasts.com/?tag_id=32)涵盖了几个流行的后台工作人员，并且这些示例通常演示了如何处理电子邮件传递。

# c# - ASP.NET在哪里解析大的txt文件

> ID：10528120
> 
> 赞同：0
> 
> 时间：2012-05-10T05:40:32.427
> 
> 标签：c#, asp.net

我有一个大的 txt 文件，我想在我的 Web 应用程序中解析。早些时候，我有一个与桌面应用程序相同的应用程序，并且我在加载期间进行了一次解析，并将文件的内容放入内存中。

在 ASP.NET 网站中，我不确定是否应该在 Page_Load() 中执行此操作，因为解析 13Mb 文本文件会使用户每次都变慢。我应该怎么做才能将它一次带入内存，然后对于所有用户，可以查找相同的内存中解析的内容？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:43:17.357

我会将它加载到 Application_Start 事件处理程序的**global.asax中。**然后将其添加到缓存中并根据需要进行检索。

为了降低数据从缓存中删除的可能性，您可以指定它不可删除：

```
HttpContext.Current.Cache.Add(
    "mydatakey",        // key for retrieval
     MyDataObject,      
     null,              // cache dependencies
     DateTime.Now.AddDays(1),      // absolute expiration
     TimeSpan.FromDays(1),         // sliding expiration  
     System.Web.Caching.CacheItemPriority.NotRemovable,       // priority
     new CacheItemRemovedCallback(MyHandleRemovedCallback)
); 
```

有关此缓存方法数据的更多详细信息，请参阅 MSDN（缓存应用程序数据）： http: [//msdn.microsoft.com/en-us/library/6hbbsfk6 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/6hbbsfk6(v=vs.71).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T05:45:01.537

如果所有用户的文件都相同，则可以将其放入 asp.net 提供的缓存中。如果它是特定于用户的，那么会话可能是它的一个地方，但这将获得大量内存并使其几乎具有破坏性。这是您可以[在 asp.net 中缓存文件的方法](http://www.dotnetcurry.com/ShowArticle.aspx?ID=331)

```
string fileContent = Cache["SampleFile"] as string;
if (string.IsNullOrEmpty(fileContent))
{
    using (StreamReader sr = File.OpenText(Server.MapPath("~/SampleFile.txt")))
   {
       fileContent = sr.ReadToEnd();
       Cache.Insert("SampleFile", fileContent, new System.Web.Caching.CacheDependency(Server.MapPath("~/SampleFile.txt")));
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:45:41.567

好吧，如果您必须将 13 mb 的文本文件加载到网站的内存中，那么我建议您使用应用程序变量，您可以在 Global.asax 文件中设置它，这将可供网站内的所有用户使用。

一旦文件在那里，它将一直存在，直到应用程序池从内存中卸载。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:22:42.107

使用 Application["key"] = value。您需要将其缓存在服务器中，并且应用程序应该这样做，就像在 Session 中保存东西一样，例如 Session["userid"] = something。

# hibernate - 使用 struts2 的 OneToMany Hibernate 映射

> ID：10528138
> 
> 赞同：0
> 
> 时间：2012-05-10T05:42:07.360
> 
> 标签：hibernate, struts2, one-to-many

我在使用 struts2 的 Hibernate 中遇到 OneToMany 关系的问题

我有 2 个模型对象 UserDetails 和 Vehicle，我在这 2 个对象之间有一个双向的 OneToMany 关系。问题是我不能持久化 Vehicle Object 而 UserDetails 是持久化的。没有编译或运行时错误......只是车辆表是空的

这是我的课程：

用户详细信息.java

```
 package org.project.model;

/*imports... */

@Entity
@Table(name="user_details")
public class UserDetails {

    private int userId;
    private String userName;
        private Set<Vehicle> vehicle;

    @Id
    @GeneratedValue()
    @Column(name="id")
    public int getUserId() {
        return userId;
    }

    public void setUserId(int userId) {
        this.userId = userId;
    }

    @Column(name="name")
    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }

    @OneToMany(mappedBy="user")
    public Set<Vehicle> getVehicle() {
        return vehicle;
    }

    public void setVehicle(Set<Vehicle> vehicle) {
        this.vehicle = vehicle;
    }   
} 
```

车辆.java

```
 package org.project.model;

/*imports... */

@Entity
@Table(name="vehicle")
public class Vehicle {

    private int vehicleId;
    private String vehicleName;
    private UserDetails user;

    @Id
    @GeneratedValue()
    @Column(name="vehicle_id")
    public int getVehicleId() {
        return vehicleId;
    }

    public void setVehicleId(int vehicleId) {
        this.vehicleId = vehicleId;
    }

    @Column(name="vehicle_name")
    public String getVehicleName() {
        return vehicleName;
    }

    public void setVehicleName(String vehicleName) {
        this.vehicleName = vehicleName;
    }

    @ManyToOne
    @JoinColumn(name="user_details")
    public UserDetails getUser() {
        return user;
    }

    public void setUser(UserDetails user) {
        this.user = user;
    }
} 
```

动作类

```
 package org.project.actions;

    /*imports...*/ 

    public class UserAction extends ActionSupport implements ModelDriven<UserDetails>{

    private static final long serialVersionUID = -2167265047934268752L;

    private UserDetails user = new UserDetails();
    private UserDetailsDao userDao = new UserDetailsDaoImpl( );
    private List<UserDetails> userList = new ArrayList<UserDetails>();

            /** PREVIOUS MISTAKE **/
            private Vehicle vehicle = new Vehicle();

    @Override
    public UserDetails getModel(){
        return user;
    }

    public String add() throws Exception {
                    /** PREVIOUS MISTAKE **/
                    vehicle.setUser(user);
                    user.getVehicle().add(vehicle);

            userDao.saveUser( user );
        return SUCCESS;
    }

    public String list() {
        userList = userDao.listUser();
        return SUCCESS;
    }

    public String details() throws Exception {
        user = userDao.getUser();
        return SUCCESS;
    }

    public String populate() throws InterruptedException{
        //...some population code...
        return "populate";
    }

    public String execute(){
        return SUCCESS;
    }

    public UserDetails getUser() {
        return user;
    }

    public void setUser(UserDetails user) {
        this.user = user;
    }

    public List<UserDetails> getUserList() {
        return userList;
    }

    public void setUserList(List<UserDetails> userList) {
        this.userList = userList;
    }
} 
```

和jsp页面

```
 <!-- Head Section -->

<body>
    <s:form action="saveUser">
        <s:textfield name="userName" label="User Name"/>
        <s:textfield name="vehicle.vehicleName" label="Vehicle Name" />
        <s:submit value="Save"/>
    </s:form>
</body>
</html> 
```

任何想法我的错误在哪里？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T12:00:47.520

谢谢大家。现在我发现了我的错误。我正在实现 ModelDriven 类。所以我有重复的车辆值。一个来自动作类，第二个来自模型本身。并且 struts 无法确定将输入值附加到何处... :)

# windows-8 - 如何在 winrt 应用程序中实现动态导航/组标题定位？

> ID：10528140
> 
> 赞同：2
> 
> 时间：2012-05-10T05:42:42.160
> 
> 标签：windows-8, winrt-xaml

我知道标题有点令人困惑，但描述我所追求的最佳方式是在 Consumer Preview 上运行 Weather Metro 应用程序；当您水平滚动时，您会注意到部分标题会四处移动并停留在相关内容的顶部，然后在您进入新部分时淡出。（第一部分的主要背景也是这样的）

我的问题是，我将如何在我自己的 WinRT 应用程序中复制这种行为？有没有我可以利用的现有控件，或者我必须从根本上重写它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T21:05:09.413

这看起来就像一个 ScrollViewer - 您将处理[ViewChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.scrollviewer.viewchanged.aspx)事件并根据滚动偏移量 - 更改覆盖的静态 TextBlocks 的不透明度，并在您越过特定阈值时完全隐藏滚动的那些。我认为没有类似的东西可以做到，但我可以构建它。

# eclipse - 在eclipse上安装blackberry sdk5.0时出错

> ID：10528144
> 
> 赞同：1
> 
> 时间：2012-05-10T05:42:57.157
> 
> 标签：eclipse, blackberry, blackberry-eclipse-plugin, blackberry-jde

当我尝试从 Eclipse helios 安装 Blackberry 5.0 sdk（使用 BB sdk 7.0 从 BB 站点下载）并下载 sdk jar 时，出现以下错误，然后将其抛出以下错误？

```
An error occurred while collecting items to be installed
session context was:(profile=SDKProfile, phase=org.eclipse.equinox.internal.p2.engine.phases.Collect, operand=, action=).
Unable to read repository at https://swdownloads.blackberry.com/Downloads/auth/contactFormPreload.do?code=DC727151E5D55DDE1E950767CF861CA5&dl=EF73B8E6C5570A3E25806E3C73616BD0.
sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:16:37.607

现在可以从以下位置下载用于 BlackBerry Java 开发的一体化 IDE：

[https://developer.blackberry.com/java/download/eclipse/](https://developer.blackberry.com/java/download/eclipse/)

能够挑选您的 SDK 并与 Eclipse IDE 良好集成，因此不再需要将 SDK 与您自己以前的工作空间环境集成。较新的 IDE 包可以作为独立的 IDE 并与其他 Eclipse 实例一起运行

# android - Android 中的 RTMP 流式传输，无需 Flash

> ID：10528152
> 
> 赞同：0
> 
> 时间：2012-05-10T05:43:31.290
> 
> 标签：android, rtmp

是否可以在没有 Flash 的情况下在 Android 上播放 RTMP 流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:44:01.530

不，它不能在没有闪光灯的情况下播放，因为`rtmp stream`它用于闪光灯。需要 Flash 播放器。

# php - 在 php 中发送电子邮件和构建 Mimes

> ID：10528156
> 
> 赞同：0
> 
> 时间：2012-05-10T05:43:53.957
> 
> 标签：php, email

我正在发送一封带有 php 的电子邮件。这些是我的标题。

```
$headers = array (
'MIME-Version' => '1.0',
'From' => $from,
'To' => $to,
'Return-Path' => 'info@example.com',
'Content-Type'=>  'multipart/alternative',
'boundary'=>$boundary,  
'Subject' => $subject);

 $random_hash = md5(date('r', time())); 
```

那是我的 html/textbody：

```
 $bodyHTML = "
 --PHP-alt-$random_hash 
Content-Type: text/plain; charset=utf-8 
Content-Transfer-Encoding: 7bit
http://example.com/app_dl.php?app_id=$_GET[app_id] to download your $app_name app \n\r\n\r
Want to get tons more hot apps for free! anywhere anytime? Download our app on http://example.com' \n\r\n\r
example.com team
--PHP-alt-$random_hash 
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 7bit
<p><a href='http://example.com/app_dl.php?app_id=$_GET[app_id]'>Click Here</a> to download your $app_name app</p>
<p>Want to get tons more hot apps for free! anywhere anytime? Download our app on <a href='http://example.com'>example.com</a></p>
<br/>
<p>example.com team</p> 
--PHP-alt-$random_hash--"; 
```

我已经被这个问题困扰了很长时间，现在..我错过了什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:52:27.680

尝试删除前导空格并添加换行符：

```
 $boundary = "PHP_alt_$random_hash";
    $bodyHTML = "--$boundary
Content-Type: text/plain; charset=utf-8 
Content-Transfer-Encoding: 7bit

http://example.com/app_dl.php?app_id=$_GET[app_id] to download your $app_name app \n\r\n\r
Want to get tons more hot apps for free! anywhere anytime? Download our app on http://example.com' \n\r\n\r
example.com team

--$boundary 
Content-Type: text/html; charset=utf-8
Content-Transfer-Encoding: 7bit

<p><a href='http://example.com/app_dl.php?app_id=$_GET[app_id]'>Click Here</a> to download your $app_name app</p>
<p>Want to get tons more hot apps for free! anywhere anytime? Download our app on <a href='http://example.com'>example.com</a></p>
<br/>
<p>example.com team</p>

--$boundary--"; 
```

# javascript - 我正在使用两个不同的 jQuery 函数，一个似乎正在取消另一个

> ID：10528161
> 
> 赞同：0
> 
> 时间：2012-05-10T05:44:37.023
> 
> 标签：javascript, jquery

我正在尝试将两块 jquery 用于灯箱，并将滚动器用于我正在构建的单页网站。它们都可以自己正常工作，但是当我将它们放在同一页面上时，滚动条似乎取消了灯箱，使其无效。

这是灯箱代码：

```
<script type="text/javascript" charset="utf-8">
    $(document).ready(function(){
        $("a[rel^='prettyPhoto']").prettyPhoto();
    });
</script> 
```

这是滚动代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<script type="text/javascript">// <![CDATA[
$(document).ready(function() {
    function filterPath(string) {
        return string.replace(/^\//, '').replace(/(index|default).[a-zA-Z]{3,4}$/, '').replace(/\/$/, '');
    }
    $('a[href*=#]').each(function() {
        if (filterPath(location.pathname) == filterPath(this.pathname) && location.hostname == this.hostname && this.hash.replace(/#/, '')) {
            var $targetId = $(this.hash),
                $targetAnchor = $('[name=' + this.hash.slice(1) + ']');
            var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;
            if ($target) {
                var targetOffset = $target.offset().top;
                $(this).click(function() {
                    $('html, body').animate({
                        scrollTop: targetOffset
                    }, 2000);
                    return false;
                });
            }
        }
    });
});​
// ]]></script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:41:33.833

我注意到您的滚动代码包含 jquery.js 但 prettyPhoto 代码不包含。在您的实际网页上，您应该只包含一次 jquery.js，在任何一个`$(document).ready()`.

# perl - 如何在 perl 中为 Expect 的每个 spawn 命令启动新终端

> ID：10528162
> 
> 赞同：2
> 
> 时间：2012-05-10T05:44:39.730
> 
> 标签：perl, terminal, expect

使用 Expect perl 模块，我编写了在本地主机上使用 ssh 命令来模拟终端的脚本。所以考虑下面的场景，我有一个使用 expect 模块的 perl 脚本（比如 script.pl），并且有两个这种类型的命令

```
$ssh = Expect->spawn("ssh -Y $loginname\@$systemname") 
```

所以这里的问题是......我正在使用终端来执行 script.pl 并且我的代码有两个 spawn 命令。我注意到在用于执行 script.pl 的终端中启动了两个 spawn 命令。但我想要两个新终端来执行两个生成命令。所以这里应该有三个终端，一个用于 script.pl，两个用于 script.pl 中的每个 spawn 命令。

有没有办法使用 Expect 从单个 perl 脚本实现两个新终端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:30:48.910

> “有没有办法使用 Expect 从单个 perl 脚本实现两个新终端？？”

当然。但是终端是一个像任何东西一样的应用程序。你必须明确地调用它；你所产卵的只是`ssh`。终端应用程序是异构的，因此您需要弄清楚系统上正在运行什么终端应用程序以及如何让它在启动时启动应用程序。例如，对于 Xfce 终端，类似于：

```
$ssh = Expect->spawn("Terminal -e \"ssh -Y $loginname\@$systemname\""); 
```

应该管用。或者也许更好：

```
$ssh = Expect->spawn("Terminal", ("-e", "ssh -Y $loginname\@$systemname")); 
```

但是，您的终端可能不是 Xfce 终端。如果你在 Windows 上，我相信它是`cmd`. 在 Linux 上，这取决于安装的内容；如果您使用的是发行版默认值，它将是 DE 附带的终端——`gnome-terminal`对于 GNOME、`konsole`KDE ​​等。

但是，如果您以其他方式自动启动终端并让它们在启动时使用 expect/ssh 执行脚本，这可能更有意义。

# function - 将参数从函数传递到函数的最佳方法是什么？

> ID：10528165
> 
> 赞同：0
> 
> 时间：2012-05-10T05:44:50.770
> 
> 标签：function, logic, argument-passing, flow

我正在创建一个函数（），但这个函数（）越来越大，所以我需要把它分解成更小的部分。这是插图：

```
def myfunc(x,y,z):
    out=(x*y*z)+ val
    return out

a,b,c=1,2,3
A=myfunc(a,b,c)
print A 
```

假设我想将 (x*y*z) 分离（分解）成另一个函数，如下所示：

```
def myotherfunc(x,y,z):
    return x*y*z

def myfunc(x,y,z):
    out=myotherfunc(x,y,z) + val
    return out 
```

这是一个简单的故障，但我得到了另一个工作流程如下：

```
def myotherfunc(x,y,z)
    return x*y*z

def myfunc(xx):
    out=xx+val
    return out

a,b,c=1,2,3
A=myfunc( myotherfunc(a,b,c) )
print A 
```

结果相同，但对于更复杂的编程案例，哪种工作流程更可取？为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:17:14.210

答案还应该取决于（潜在的）重用：是否有可能，例如，`myotherfunc`将来会用三个以上的参数调用？如果是这样，更喜欢选项2。

# in-app-billing - 地下城示例应用内计费示例意外停止

> ID：10528167
> 
> 赞同：1
> 
> 时间：2012-05-10T05:44:54.707
> 
> 标签：in-app-billing

我已按照步骤完成地下城示例应用内计费教程。我已经能够将 apk 上传到我的开发控制台和我的手机（HTC Incredible 2，ver. 2.3.4 with Google Play Store ver. 3.5.16）。一旦我在手机上触摸选择应用程序，就会弹出一条吐司消息，上面写着“正在恢复交易”，然后我收到错误消息，它意外停止。我还尝试了[http://blog.blundell-apps.com/simple-inapp-billing-payment/](http://blog.blundell-apps.com/simple-inapp-billing-payment/)上的“简单的应用内结算付款”教程，我收到了相同的错误消息（尽管没有屏幕或 toast弹出，只是错误消息）。

笔记：

-我的测试帐户是我手机的帐户，而不是我的开发帐户电子邮件。

- 不太确定如何从我的手机获取用于调试的 logcat 消息。

-在开发控制台页面上，应用程序不会说“草稿”，而是未发布、激活并填写了所有必要的字段。

附加信息：

-我的目标只是有一个简单的捐赠应用程序，如果顾客愿意，可以在其中捐赠 1 美元或 2 美元，仅此而已。此应用程序内帐单未附加到免费的主要应用程序。

我确定我缺少一些简单的步骤/信息/等。

非常感谢任何帮助。

谢谢，

特罗格

# .net - Debug.Assert(false) 不会在 win8 Metro 应用程序中触发

> ID：10528168
> 
> 赞同：9
> 
> 时间：2012-05-10T05:44:57.000
> 
> 标签：.net, debugging, windows-8, windows-runtime, assert

我注意到 Debug.Assert 不会在 Metro 应用程序中触发，但是，如果项目是控制台或 WinForm 等传统项目，它会触发。是的，我处于调试模式。

是否在 Visual Studio (11 Beta) 中设置不正确？或者 Debug.Assert 打算在 Metro 应用程序中禁用？

我知道在执行 Metro 应用程序期间会吞下许多异常，但 Debug.Assert 非常方便，以至于我想不出应该禁用它的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T16:08:38.230

似乎是一个错误。我会推出自己的断言方法。就像是：

```
[Conditional("DEBUG")]
public static void Assert(bool condition)
{
    if (!condition)
        System.Diagnostics.Debugger.Break();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T01:14:45.967

它*确实会*触发，请查看“输出”窗口。它只是不会自动提示您询问是否需要调试器中断，因此只会继续运行。

DefaultTraceListener.AssertUIEnabled 属性为 false。这是一个实现问题，无法在 Metro UI 上显示消息框。这确实有效，但显示器切换到桌面，当您希望单击“否”时，这是非常不可取的。难以解决，毫无疑问在待办事项列表上。您无法轻松地访问该属性以将其设置为 true，它无法从元数据中访问。Filip 的解决方法听起来还不错。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-05T03:54:42.190

在 VS2013 中，WinRT 中的 F# 也存在同样的问题。该`assert`语句是 的别名`System.Diagnostics.Debug.Assert`，不会引发异常，因此除非您正在查看“输出”窗口，否则您的断言可能会失败而不会被注意到。即使你在看，也很难找到提出断言的地方。

我按照 Filip 的建议编写了一个简短的实用程序，如下所示：

```
namespace MyProj.Infrastructure

module Diagnostics =

    let Assert condition = if not condition then
                                System.Diagnostics.Debugger.Break() 
```

我选择`Debugger.Break`了引发异常，因为它会在断言失败的地方停止调试器。但是，引发异常是一种可接受的替代方法。

我的解决方案中没有任何合适的全局项目或模块，所以我不得不为此创建它们，这很烦人。

# android - 未在 Micro-max funbook 平板电脑 Android 中设置 hdpi 或 x-hdpi 图像

> ID：10528179
> 
> 赞同：1
> 
> 时间：2012-05-10T05:46:08.510
> 
> 标签：android, android-screen-support

我开发了适用于所有设备和平板电脑的应用程序，我已将所有图像放入`ldpi`, `mdpi`，它适用于所有设备`hdpi`，`xhdpi`但它不适用于获取图像`hdpi`或`xhdpi`平板电脑。

我还在 android 清单文件中设置了所有支持屏幕权限。

我如何克服这个问题有人知道请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:00:47.080

你需要把你的图片

```
drawable-large-hdpi for 7" tablet
drawable-large-xhdpi for 10" tablet 
```

它将解决我用于`drawable-large-hdpi`三星 Galaxy 7" 平板电脑的问题。它工作正常。

# javascript - PhoneGap - PhotoSwipe 删除图像

> ID：10528180
> 
> 赞同：0
> 
> 时间：2012-05-10T05:46:12.397
> 
> 标签：javascript, image, cordova, photoswipe

到目前为止，PhotoSwipe 非常棒，只是这些我似乎无法解决的小问题

我初始化 PhotoSwipe 如下

```
formPhoto.gallery = window.Code.PhotoSwipe.attach( images, options); 
```

在图库中，用户可以通过以下方式选择是否删除图像

一旦按下删除按钮，它就会运行

```
formPhoto.gallery.cache.images.splice(e.target.currentIndex,1);
delete formPhoto.activeObj.value[e.target.originalImages[e.target.currentIndex].id];

if(formPhoto.gallery.cache.images.length == 0)
   formPhoto.gallery.hide();
else 
   formPhoto.gallery.carousel.show( 0 ); 
```

现在这几乎可以正常工作，除了 2 种情况。

1.  如果您低于 3 张照片，它会中断幻灯片事件（在幻灯片右侧） - 图像滑到黑屏上。如果您删除并且只剩下 1 张图像，您甚至无法正确查看图像，它只会弹回黑屏。
2.  如果您再次将图像重新添加到图库中，则会再次显示已删除的旧图像

它使用重新启动

```
images = [];
for(var x in formPhoto.activeObj.value)
  images.push({url: formPhoto.activeObj.value[x].file, id:x});

formPhoto.gallery = window.Code.PhotoSwipe.attach( images, options); 
```

如果您愿意，我可以尝试获取正在发生的事情的录音。我不知道如何解决这个问题，我已经在[https://github.com/codecomputerlove/PhotoSwipe/issues](https://github.com/codecomputerlove/PhotoSwipe/issues)和谷歌上环顾四周，但没有任何帮助。

我真正想做的只是从图库中删除图像（仅在独占模式下查看）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:36:24.133

好的，我最终写了一个临时解决方案.. 它有点 hacky，但我只是手动从轮播中删除 DOM

```
 jQuery(formPhoto.gallery.carousel.contentEl).find("[src*=\"" + formPhoto.activeObj.value[e.target.originalImages[e.target.currentIndex].id].file + "\"]").parent().remove();
            //we look for the image that contains the same filename as the one we're trying to delete.
            //so we just remove that.

            formPhoto.gallery.cache.images.splice(e.target.currentIndex,1);

            delete formPhoto.activeObj.value[e.target.originalImages[e.target.currentIndex].id];
            e.target.originalImages.splice(e.target.currentIndex, 1);

            formPhoto.activeObj.object.find("[type=amountadded]").html(formPhoto.activeObj.valueLength() + " photos");

            if(formPhoto.gallery.cache.images.length == 0)
                formPhoto.gallery.hide();
            else   {
                //real hacky job. Atleast it looks like a real cool effect occured.
                formPhoto.galleryInitiate(formPhoto.activeObj, e.target.originalImages);
            } 
```

还修复了图像重新出现的问题，因为新生成的文件具有相同的文件名。同时在文件名中添加了日期组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-28T09:00:55.850

这是删除按钮的处理程序

```
function ps_delete_image(btn) {
    var inst = PhotoSwipe.instances[0];
    var curImg = $photoSwipe.getCurrentImage();
    inst.cache.images.splice(inst.currentIndex, 1);
    inst.originalImages.splice(inst.currentIndex, 1);
    if(inst.cache.images.length == 0) inst.hide();
    else {
        if (inst.currentIndex == inst.cache.images.length) inst.carousel.show(inst.currentIndex - 1);
        else inst.carousel.show(inst.currentIndex);
    }
    // remove delete button if 3 or less is left
    if(inst.cache.images.length <= 3) {
        $(btn).remove();
    }
} 
```

为了克服 3 张或更少图像的问题，我只需删除删除按钮。

# iphone - 使用 GPUImage 编辑某些电影帧

> ID：10528183
> 
> 赞同：3
> 
> 时间：2012-05-10T05:46:32.160
> 
> 标签：iphone, core-image

我想使用 GPUImage 对电影的某些帧应用效果。我已经成功地为整个电影文件添加了效果，那么有没有办法在不同的帧上添加不同的效果？

例如，我想在 5 秒到 10 秒的视频上应用棕褐色效果。所以我需要 0-5 秒作为原始视频，5-10 秒使用棕褐色效果，10-视频总秒数使用原始视频。

另外，我想使用 GPUImage 在某些帧上绘制文本/图像，可以吗？

任何回应将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T13:16:12.533

您可以要求 MPMoviePlayerController 或 AVAssetImageGenerator 在您指定的时间生成缩略图。

[iPhone 使用 AVFoundation 从视频中读取 UIimage（帧）](https://stackoverflow.com/questions/4199879/iphone-read-uiimage-frames-from-video-with-avfoundation)

[AVAssetImageGenerator 提供旋转的图像](https://stackoverflow.com/questions/5347800/avassetimagegenerator-provides-images-rotated)

如果您想要视频而不仅仅是帧，您可以从视频中修剪一部分并对其应用效果。这将获取您的视频的 URL 并将其修剪到指定的时间。

```
 AVURLAsset *videoAsset = [AVURLAsset URLAssetWithURL:videoURL options:nil]; 
    AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:videoAsset presetName:AVAssetExportPresetHighestQuality];
    exportSession.outputURL = [NSURL fileURLWithPath:outputURL];
    exportSession.outputFileType = AVFileTypeQuickTimeMovie;
    CMTimeRange timeRange = CMTimeRangeMake(CMTimeMake(startMilliseconds, 1000), CMTimeMake(endMilliseconds - startMilliseconds, 1000));
    exportSession.timeRange = timeRange;

    [exportSession exportAsynchronouslyWithCompletionHandler:^{
        switch (exportSession.status) {
            case AVAssetExportSessionStatusCompleted:
                 ///
                // Call something to apply the effect
               ///
                break;
            case AVAssetExportSessionStatusFailed:
                NSLog(@"Failed:%@", exportSession.error);
                break;
            case AVAssetExportSessionStatusCancelled:
                NSLog(@"Canceled:%@", exportSession.error);
                break;
            default:
                break;
        }
    }]; 
```

完成后，您将应用您的效果，如果您使用视频剪辑路线，则将它们组合并编码。

[如何使用 AVFoundation 组合具有不同方向的视频剪辑](https://stackoverflow.com/questions/6575128/how-to-combine-video-clips-with-different-orientation-using-avfoundation)

# c# - 从 C# 中的现有数组构造一个数组 - 这会在内存中创建副本吗？

> ID：10528184
> 
> 赞同：2
> 
> 时间：2012-05-10T05:47:02.630
> 
> 标签：c#, memory-management

在我的 C# 代码中，我构造了四个数据数组：

```
double[] values;
DateTime[] timestamps;
long[] qualities;
long[] reasons; 
```

这些数组需要传递给外部 API。API 方法调用有些间接；它的签名看起来像`invokeApiMethod(string apiMethodName, Object[] apiMethodParams)`。

在这种情况下，外部 API 方法调用需要四个我已经构造的数组。

如果我使用以下代码构造 Object[]：

```
Object[] apiMethodParams = { values, timestamps, qualities, reasons }; 
```

这会导致所有四个现有数组都被复制到一个大的连续新内存块中吗？还是 C# 只是将现有数组的引用数组传递给外部 API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T05:51:01.277

> 这会导致所有四个现有数组都被复制到一个大的连续新内存块中吗？还是 C# 只是将现有数组的引用数组传递给外部 API？

后者。它将是一个由四个元素组成的数组，其中每个元素都是一个引用。`values`等的值`timestamps`只是对数组的*引用。*

请注意，如果外部 API 修改了数组内容，并且您想要原始值，您可能*想要*获取部分或全部数组的副本 - 但这不会自动发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:54:33.667

[http://www.mbaldinger.com/post/C-reference-types-are-passed-by-value!.aspx](http://www.mbaldinger.com/post/C-reference-types-are-passed-by-value!.aspx)

[http://answers.yahoo.com/question/index?qid=20090105141923AAt63hD](http://answers.yahoo.com/question/index?qid=20090105141923AAt63hD)

如果您需要传递不同的数组，则需要克隆/复制它，然后传递克隆/复制的数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:21:25.150

它们是参考。复制和创建使用“new”关键字。

# iphone - 每次 update_with_media 的 Twitter 403 错误

> ID：10528185
> 
> 赞同：0
> 
> 时间：2012-05-10T05:47:20.803
> 
> 标签：iphone, ios, ios5, twitter, twitter-oauth

我正在使用 MGTwitterEngine，并且正在使用 update_with_media api 调用来发布状态和图像。它有时可以工作，但现在它给我错误代码 403 的错误消息。

我收到来自推特的消息，

```
equest A281E76C-889C-4E79-B8CE-B8D9B89CAD5D failed with error: Error Domain=HTTP Code=403 "The operation couldn’t be completed. (HTTP error 403.)"

headers for failed response: {
    "Cache-Control" = "no-cache, no-store, must-revalidate, pre-check=0, post-check=0";
    Connection = "Keep-Alive";
    "Content-Encoding" = gzip;
    "Content-Length" = 146;
    "Content-Type" = "application/xml; charset=utf-8";
    Date = "Wed, 09 May 2012 13:59:18 GMT";
    Expires = "Tue, 31 Mar 1981 05:00:00 GMT";
    "Keep-Alive" = "timeout=15, max=100";
    "Last-Modified" = "Wed, 09 May 2012 13:59:17 GMT";
    Pragma = "no-cache";
    Server = hi;
    "Set-Cookie" = "k=121.242.223.26.1336571957410684; path=/; expires=Wed, 16-May-12 13:59:17 GMT; domain=.twitter.com, guest_id=v1%3A133657195794826993; domain=.twitter.com; path=/; expires=Sat, 10-May-2014 01:59:17 GMT, dnt=; domain=.twitter.com; path=/; expires=Thu, 01-Jan-1970 00:00:00 GMT, lang=en; path=/, lang=en; path=/, lang=en; path=/, lang=en; path=/, twid=u%3D309516512%7Ccj5mm3XKJjrOylGjj9dBeiIYQXM%3D; domain=.twitter.com; path=/; secure, _twitter_sess=BAh7CToPY3JlYXRlZF9hdGwrCMWS5TE3AToHaWQiJWIxYTFiNjkyYWFhMzA4%250AN2E3MDZlZmY0MWE4MmZlMDgzIgpmbGFzaElDOidBY3Rpb25Db250cm9sbGVy%250AOjpGbGFzaDo6Rmxhc2hIYXNoewAGOgpAdXNlZHsAOgxjc3JmX2lkIiUzNzg5%250AOGJhN2Q4M2MzY2NkODZiYmI0OGI1MjFkMzI3Ng%253D%253D--d5860bbfc91c1a86b279feeb0a5f6a902809c18a; domain=.twitter.com; path=/; HttpOnly";
    Status = "403 Forbidden";
    Vary = "Accept-Encoding";
    "X-Access-Level" = "read-write";
    "X-Action-Name" = "update_with_media";
    "X-Controller-Class" = "Api::StatusController";
    "X-Frame-Options" = SAMEORIGIN;
    "X-MID" = 10eaf9e95fb949887d309c590873aa70188770d4;
    "X-MediaRateLimit-Class" = photos;
    "X-MediaRateLimit-Limit" = 30;
    "X-MediaRateLimit-Remaining" = 30;
    "X-MediaRateLimit-Reset" = 1336658357;
    "X-Runtime" = "0.07889";
    "X-Transaction" = ecd0661ac173c9ab;
    "X-Transaction-Mask" = a6183ffa5f8ca943ff1b53b5644ef1141757cb62;
} 
```

在这种情况下，我没有得到应该做的事情。

在 twitter 文档中，403 错误是重复的推文，但我是第一次发推文。

先感谢您。

# .net - 使用 .NET 和 SQL Server 创建 Windows Mobile 数据库应用程序

> ID：10528187
> 
> 赞同：0
> 
> 时间：2012-05-10T05:47:23.017
> 
> 标签：.net, sql-server, windows-mobile

我在做一个订单管理系统项目，场景是这样的

医疗代表去一家制药公司，并交付他需要的所有订单。交付完成后，医疗代表必须使用他的windows手机打印账单。这可能吗？？？？

如果可能的话，应该在手机上安装什么所有东西？

我们可以像在电脑上一样在移动设备上安装 sqlserver 吗？

如果我们有一台通过蓝牙的便携式打印机，我们可以从移动设备上打印输出吗？？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:46:02.387

如果您使用 Visual Studio 2008 和 .NET Framework 3.5 创建智能设备项目，那么当您部署应用程序时，SQL Server Compact 3.5 将自动安装在您的移动设备上。

为此，这些链接将对您有用

[http://msdn.microsoft.com/en-us/windowsmobile/bb264318](http://msdn.microsoft.com/en-us/windowsmobile/bb264318)

[http://msdn.microsoft.com/library/bb278115.aspx](http://msdn.microsoft.com/library/bb278115.aspx)

至于印刷，我觉得也可以。

# android - 使用 OpenCV/JavaCV 进行 Android 人脸检测

> ID：10528188
> 
> 赞同：6
> 
> 时间：2012-05-10T05:47:25.407
> 
> 标签：android, opencv, javacv

我想知道如何使用 OpenCV/JavaCV 实现 Android 人脸检测。任何人对此有想法或有代码请对此发表评论或放置代码。我想从电话库中获取面孔并检测它们..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T06:31:29.830

对于人脸检测，您可以使用 Android SDK 中内置的[FaceDetector](http://developer.android.com/reference/android/media/FaceDetector.html)，它会返回 BMP 中的人脸位置和角度。但这不是很快。

您也可以使用 javaCV 人脸检测，但在开始之前，我建议您查看这篇[文章](http://www.smallscreendesign.com/2011/01/25/about-face-detection-on-android-part-1/)，了解您可以使用的一些 API 的优势和约束，并比较性能

![一些](../Images/7bad0f5508e25c2f092416c6d881c2c0.png)

**对于 FaceDetector，您可以看到这些链接**

1.  [链接 1](http://www.developer.com/ws/android/programming/face-detection-with-android-apis.html)
2.  [链接 2](http://trivedihardik.wordpress.com/2011/09/13/android-face-detection-example/)

这是一个使用 FaceDetector 和 OpenGL（绘制矩形）的[实时人脸检测示例，适用于 Android 2.2](http://jjil.googlecode.com/svn/trunk/FaceDetect-Android/)

**您还可以[在 Android 中使用 OpenCV](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android)**

你最好在 Linux 上试试这个（我在 Windows 上试过，但失败了）。

**最后[是JavaCV](http://code.google.com/p/javacv/)**（强烈推荐）

有一个使用相机进行实时人脸检测的示例代码。请参阅下载页面上的“javacv-src-*.zip”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T08:01:04.143

来自 K_Anas 的屏幕截图上的时间数据慢得令人震惊……我在 HTC Desire S 上的应用程序与 OpenCV 库（[此处](http://code.opencv.org/projects/opencv/wiki/OpenCV4Android)）的速度为 4+ fps……

我在 Play 商店 (eurgh) 上的演示应用程序在[这里](https://play.google.com/store/apps/details?id=barry.opencvdemo)。在菜单中，第一项会将您带到[我的网页，以获取](http://www.barrythomas.co.uk/code.html)包含源代码片段的应用程序。1) 安装 OpenCV，2) 运行提供的示例，3) 编辑“Tutorial 2 OpenCVSamples”并将我的代码片段放入帧处理循环中。

我声称该应用程序没有功劳，它只是 OpenCV 库附带的示例的稍微放大和调整的版本。

# jquery - JQuery：计算签入的子项 标签

> ID：10528190
> 
> 赞同：0
> 
> 时间：2012-05-10T05:47:47.917
> 
> 标签：jquery

使用HTML标签的树视图，当检查“TVCheckBox atterent”时，如何计算其所有儿童的“TVCheckbox attr”，其中使用jQuery检查。

```
 <li class="others"><input type="checkbox" value="ALPHABETS" class="tvcheckbox attrParent">ALPHABETS
    <ul>
        <li><input type="checkbox" class="tvcheckbox attr" value="A">A</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="B">B</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="C">C</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="D">D</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="E">E</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="F">F</li>
    </ul>
</li> 
```

我试过

```
 `$('input.tvcheckbox.attrParent:checked').each(function(){
           var len = $(this).parent().children(".checked").length;
    });` 
```

但并不成功。任何人都可以帮忙吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:58:18.700

我想我找到了答案：

```
$(this).parent().find('input.tvcheckbox.attr:checked').length; 
```

不管怎样，谢谢大家的意见。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T05:58:09.723

```
 var len = 0 ;

$('.others').find('li').each(function(){

      if($(this).find('checkbox').is(':checked'))
      { 
          len++;
      }    

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T05:59:31.323

我假设您的其余选择器是正确的。

```
$('input.tvcheckbox.attrParent:checked').each(function(){
   var len = $(this).parent().children(":checked").length;
}); 
```

[在此处](http://api.jquery.com/checked-selector/)阅读有关`:checked`选择器的更多信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:04:18.877

```
$('.tvcheckbox.attrParent').change(function(){
alert($('.tvcheckbox.attr:checked').length)
    });​ 
```

[在 JsFiddle 中查看演示](http://jsfiddle.net/9wfFv/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T06:26:32.297

这是一个工作示例。我没有尝试对这个示例中的复选框进行分组。

```
<html>
  <head>
    <title>Check Test</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $("#btnGet").click(function () {
                var checkedItems = "";
                $("input[type='checkbox']").each(function (i) {
                    if ($(this).attr("checked") == true) {
                        checkedItems += "," + $(this).val();
                    }
                });
                alert(checkedItems.slice(1));
            });
        });
    </script>
  </head>
  <body>
    <input type="checkbox" value="ALPHABETS" class="tvcheckbox attrParent" />ALPHABETS
    <ul>
        <li><input type="checkbox" class="tvcheckbox attr" value="A" />A</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="B" />B</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="C" />C</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="D" />D</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="E" />E</li>
        <li><input type="checkbox" class="tvcheckbox attr" value="F" />F</li>
    </ul>
    <input type="button" value="Get checked" id="btnGet"/>
  </body>
</html> 
```

# javascript - 如何使用 javascript 确定字符串是否仅包含空格？

> ID：10528193
> 
> 赞同：11
> 
> 时间：2012-05-10T05:48:02.270
> 
> 标签：javascript, jquery

如何使用 javascript 确定输入字符串是否仅包含空格？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T05:52:09.397

另一个好帖子：[更快的 JavaScript 修剪](http://blog.stevenlevithan.com/archives/faster-trim-javascript)

您只需要应用[**`trim`**](http://api.jquery.com/jQuery.trim/)函数并检查字符串的长度。如果修剪后的长度为 0 - 则字符串仅包含空格。

```
var str = "data abc";
if((jQuery.trim( str )).length==0)
  alert("only spaces");
else 
  alert("contains other characters"); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-10T05:52:30.410

```
if (!input.match(/^\s*$/)) {
    //your turn...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T05:59:40.813

或者，您可以执行 a[`test()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/test)返回布尔值而不是数组

```
//assuming input is the string to test
if(/^\s*$/.test(input)){
    //has spaces
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T05:54:36.500

```
if(!input.match(/^([\s\t\r\n]*)$/)) {
    blah.blah();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-04T18:48:21.703

最快的解决方案是使用正则表达式原型函数[test()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)并查找任何不是空格或换行符的字符`\S`：

```
if (/\S/.test(str))
{
    // found something other than a space or a line break
} 
```

如果你有一个超长的字符串，它会产生很大的不同。

# amazon-s3 - 为 Amazon S3 创建 IAM 策略

> ID：10528195
> 
> 赞同：4
> 
> 时间：2012-05-10T05:48:22.017
> 
> 标签：amazon-s3

我正在尝试实施一项 IAM 策略，其中用户也只能访问他有权访问的文件夹。我从 Amazon docs 获得了这段代码

允许用户仅列出公司存储桶中其主目录中的对象

此示例建立在上一个示例的基础上，该示例为 Bob 提供了一个主目录。为了让 Bob 能够列出他的主目录中的对象，他需要访问 ListBucket。但是，我们希望结果仅包含他的主目录中的对象，而不是存储桶中的所有内容。为了以这种方式限制他的访问，我们使用名为 s3:prefix 的策略条件键，其值设置为 home/bob/ *。这意味着只有带有前缀 home/bob/ 的对象*才会在 ListBucket 响应中返回。

```
{
  "Statement":[{
    "Effect":"Allow",
    "Action":"s3:ListBucket",
    "Resource":"arn:aws:s3:::my_corporate_bucket",
    "Condition":{
      "StringLike":{
      "s3:prefix":"home/bob/*"
    }
  }]
} 
```

这对我不起作用。当我运行我的代码时，我能够看到所有文件夹和子文件夹。我修改后的代码如下所示：

```
{
  "Statement":[{
    "Effect":"Allow",
    "Action":"s3:ListBucket",
    "Resource":"arn:aws:s3:::Test-test",
    "Condition":{
      "StringLike":{
      "s3:prefix":"Test/*"
    }
  }]
} 
```

当我使用附加到上述策略的用户凭据在 c# 中运行我的代码时，我得到了所有文件夹，而不仅仅是“测试”下的文件夹......非常感谢一些帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T04:33:57.543

我终于让它工作了。尽管我认为 AWS 管理控制台中存在一个错误，或者至少看起来是一个错误。问题是我的策略一直都是正确的，但是当我通过 AWS 管理控制台访问它时，它的行为与 CloudBERry 之类的软件不同。我必须修改的一件事是对象和存储桶的 ACL 设置。如果 AWS 控制台正常工作，这也将在早些时候完成。无论如何，这是我的政策：

```
{
  "Statement": [

    {
      "Effect": "Allow",
      "Action": "s3:ListAllMyBuckets",
      "Resource": "arn:aws:s3:::*",
      "Condition": {}
    },
    {
      "Effect": "Allow",
      "Action": [
        "s3:ListBucket",
        "s3:ListBucketVersions"
      ],
      "Resource": "arn:aws:s3:::pa-test",
      "Condition": {
        "StringLike": {
          "s3:prefix": "test/*"
        }
      }
    },
    {
      "Effect": "Allow",
      "Action": "s3:*",
      "Resource": "arn:aws:s3:::pa-test/test/*",
      "Condition": {}
    }
  ]
} 
```

1) 问题是，当我通过 AWS 控制台访问此 IAM 用户的管理控制台时，当我单击我的存储桶时，我被拒绝访问，尽管当我通过 Cloudberry 登录时，我可以看到我的文件夹。2）我必须修改我的存储桶的 ACL 设置和我的存储桶的对象（文件夹）： Owner : Full Control Authenticated Users : Readonly

对于我的文件夹：所有者：完全控制

现在的问题是您无法在 AWS 控制台中为文件夹（对象）设置 ACl 设置。您可以为文件（对象）设置它们。例如，如果您右键单击存储桶内的文件夹（对象），然后单击属性，则不会显示权限选项卡。但是，如果您右键单击存储桶或文件（例如 test.html）并单击属性，它将显示一个权限选项卡。我不确定其他人是否注意到了这个问题。无论如何，这是我的脚本，它现在正在工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-11T05:54:52.390

您期望从 listBucket 获得的结果不会像那样发生。因为该策略只允许您根据存储桶策略对对象进行允许和拒绝访问。ListBucket 将列出所有对象，但您只能访问前缀文件夹及其内容。

如果您只想列出文件夹，那么您必须像阅读 IAM 策略那样编写代码，然后获取前缀字符串，然后使用该前缀列出，那么您将只获得所需的文件夹。因为到目前为止，亚马逊 s3 还没有提供这样的选项。

# visual-studio-2010 - MSTest 和 TFS 构建 2010

> ID：10528198
> 
> 赞同：0
> 
> 时间：2012-05-10T05:49:05.740
> 
> 标签：visual-studio-2010, build, msbuild, tfsbuild

我在尝试让我的自动构建来编译引用 Microsoft.VisualStudio.QualityTools.UnitTestFramework.dll 的项目时遇到了一些问题。由于某种原因，该项目无法编译抱怨

> 无法解析此引用。找不到程序集“Microsoft.VisualStudio.QualityTools.UnitTestFramework, Version=9.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a, processorArchitecture=MSIL”。检查以确保该程序集存在于磁盘上。

我已经在我的构建服务器上安装了 VS2010 Premium，但这似乎并没有解决问题。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:44:46.127

您的版本`Version=9.0.0.0`是 VS2008 的一部分，因此即使您已经安装了 VS2010，在您的构建服务器上也找不到它是有道理的。

考虑将您的 project-ref 更改为`Version=10.0.0.0`与您当前的 VS 版本相对应的项目。

# ruby-on-rails - 如何在 Ruby on Rails 中为 mongoid 启用批量分配？

> ID：10528200
> 
> 赞同：0
> 
> 时间：2012-05-10T05:49:18.337
> 
> 标签：ruby-on-rails, mongoid

通常你会使用类似的东西`attr_accessible :name, :email`来允许对这些特定字段进行批量分配，但是你如何在 mongoid 中为嵌入式文档执行此操作`:nick_names`？我尝试在末尾标记它，`attr_accesible`但它不起作用。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T20:01:08.483

我会使用标准组合并全部更新。例如：

```
Foo.where(country: nil).update_all(country: "USA") 
```

[http://mongoid.org/docs/querying/modification.html](http://mongoid.org/docs/querying/modification.html)

如果您尝试通过 Rails 更新来做到这一点，那么 @apneadiving 是正确的，因为您需要`accept_nested_attributes_for`在父模型中启用。

# c++ - 如何画线（斜线）？

> ID：10528201
> 
> 赞同：0
> 
> 时间：2012-05-10T05:49:37.323
> 
> 标签：c++, algorithm, line-drawing

如何绘制非正交线？

如果我们有一条正交线，这很容易：

考虑 X1 = 100，Y1 = 80；X2=100，Y2=185；

所以我们在这条线上有这样的东西。

```
for(nRow = Y1; nRow < Y2; nRow++)
{
   for(nCol = X1; nCol < X2; nCol++)
   {
     nPixPos = nRow*nEffectiveWidth+nCol*3;

     Image[nPixPos] = 0 ; /// Image -> unsigned char * (BUFFER) || 0 -> Black COLOR
     Image[nPixPos+1] = 0 ;
     Image[nPixPos+2] = 0 ;
  }
} 
```

如果我想绘制一条非正交线，例如：

X1 = 100 , Y1 = 80 和 X2 = 115 , Y2 = 185

我将如何构建一个循环来绘制这条线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T05:56:12.360

您有几种算法可供选择，如果您不想要抗锯齿，我建议使用[Bresenham 的算法，如果需要，建议使用](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)[Xiaolin-Wu 的](http://en.wikipedia.org/wiki/Xiaolin_Wu%27s_line_algorithm)算法。

# wpf - 如果它是可编辑的，我们如何使组合框中的搜索有效？

> ID：10528203
> 
> 赞同：1
> 
> 时间：2012-05-10T05:49:46.467
> 
> 标签：wpf, combobox

```
<ComboBox Name="cbDesignation" IsEditable="True" TextSearch.TextPath="DesignationName" 
    StaysOpenOnEdit="True" ItemsSource="{Binding Path=DesignationCollection,Mode=TwoWay}" 
    SelectedItem="{Binding Path=SelectedDesignation,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,ValidatesOnDataErrors=True}" 
    VerticalAlignment="Center">
    <ComboBox.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel/>
        </ItemsPanelTemplate>
    </ComboBox.ItemsPanel>
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=DesignationName}" VerticalAlignment="Center" Grid.Column="1" Margin="5,0,0,0"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

如果它是可编辑的，那么它会搜索但我只希望用户输入字母开头的一个项目，那么它将显示这个字母表中的所有列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:10:32.073

代替自动完成文本框怎么样？它还使用建议并为您进行所有过滤。你可以在这里找到一个：
[http](http://wpfactb.codeplex.com/)
://wpfactb.codeplex.com/ （更多信息在这里：http: [//blogs.windowsclient.net/dragonz/archive/2010/02/23/autocomplete-textbox-control-for-wpf .aspx](http://blogs.windowsclient.net/dragonz/archive/2010/02/23/autocomplete-textbox-control-for-wpf.aspx) )

# php - 我的 WAMP 网页使用哪个 PHP Ini 文件？

> ID：10528212
> 
> 赞同：5
> 
> 时间：2012-05-10T05:50:50.367
> 
> 标签：php, wamp, ini

我刚刚在我的“C:\WAMP”服务器中搜索了 PHP.ini 文件，天哪！有这么多 PHP.ini 文件！

您如何知道网页正在使用哪些 ini 文件？

感谢您的任何回复

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-10T05:57:23.000

你可以在 phpinfo() 输出中找到它

创建文件 info.php

```
<?php
phpinfo(); 
```

并从网络服务器调用它

![phpinfo.ini文件](../Images/34de05fe59262fcd07ceb2598f1ef723.png)

# dynamics-crm - service.Create 和 orgContext.AddObject 有什么区别？

> ID：10528216
> 
> 赞同：4
> 
> 时间：2012-05-10T05:51:25.153
> 
> 标签：dynamics-crm, dynamics-crm-2011

我发现至少有两种方法可以在如下实体中创建记录。

**公共部分**

```
var record = new someEntity()
{
    attribute1="test1",
    attribute2="test2" 
};

var service = new OrganizationService("CrmConnectionString"); 
```

**A部分**

```
service.Create(record); 
```

**B部分**

```
var orgContext = new OrganizationServiceContext(service);
orgContext.AddObject(record);
orgContext.SaveChanges(); 
```

有什么区别？哪个更好？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-10T15:19:10.087

A 部分使用组织服务代理的原始创建方法。此操作直接创建记录。

B 部分使用了实现[工作单元模式](http://martinfowler.com/eaaCatalog/unitOfWork.html)的组织服务上下文。在您调用之前，您的操作不会传输到服务器`SaveChanges()`

哪个更好？这取决于您的要求。如果您只想随时随地创建记录 -> 使用该服务。如果您执行多个构成逻辑单元的操作，请使用版本 B。

# mysql - Mysql从数据库中获取数据从第一个表和第二个表3列中的一列

> ID：10528217
> 
> 赞同：0
> 
> 时间：2012-05-10T05:51:29.940
> 
> 标签：mysql, join

我有两张桌子，`optionvalues`& `valprice`。

我在两个表中都有相同的**opt_id**和**prod_id 。**

**表`optionvalues`：**

```
id opt_id item_id  value   value_img
 1    1       5     Big       img1
 2    1       6     Small     img1 
```

**表`valprice`：**

```
price_id    price_dir          price    prod_id        val_id   item_id
  1                +             10        1               1       7
  2                -             5         1               2       7 
```

**我的查询：**

```
SELECT  op.value, vp.price_dir, vp.prod_id, vp.price, vp.val_id
from optionvalues op, valprice vp
where op.opt_id=1 and vp.prod_id=1 
```

**输出：**

```
大+10
大-5
小+10
小-5

```

而我想要这个

```
大+10
小-5

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:00:43.993

您需要告诉 MySQL 应该如何连接表：

```
SELECT op.value, vp.price_dir, vp.prod_id, vp.price, vp.val_id
FROM   optionvalues op JOIN valprice vp ON vp.val_id = op.id
WHERE  op.opt_id=1 AND vp.prod_id=1 
```

阅读[本教程](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)以获取有关 SQL 连接的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:00:32.923

查询应该是

```
SELECT  op.value, vp.price_dir, vp.prod_id, vp.price, vp.val_id
 from optionvalues op, valprice vp
 where op.opt_id=vp.prod_id and op.opt_id=1 
```

# java - 如何创建代理并将其迁移到远程主机？

> ID：10528220
> 
> 赞同：0
> 
> 时间：2012-05-10T05:51:41.880
> 
> 标签：java, agents-jade, taglet

我正在寻找基于集中爬行的多代理系统。我见过不同的移动框架，例如 Aglet、JADE 等。我的工作是想在常驻本地主机上创建一些代理，并希望将其与参数一起移动到常驻远程主机。我的问题是，我应该使用哪个框架来创建代理？以及如何创建代理并通过中间代理将其迁移到远程主机。请给我一些示例代码如何创建代理和迁移它。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T22:19:54.307

看一下[Mobility-RPC](http://code.google.com/p/mobility-rpc/)，首页上有执行此操作的示例。

# networking - 分析进出进程的网络流量

> ID：10528226
> 
> 赞同：1
> 
> 时间：2012-05-10T05:52:17.883
> 
> 标签：networking, tcpdump, nmap

在 Linux 上有什么方法可以详细分析进出进程的网络流量。详细分析是指 tcpdump、wireshark 提供的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T11:24:23.250

如何使用 lsof 获取有关该过程的更多信息？

lsof -c $进程

查看进程使用了​​哪些文件和网络连接。

lsof -i | egrep 'mongod.*LISTEN'

grep 获取到 mongod 进程的所有连接。从这里您可以看到进程正在侦听的端口

$ lsof -i | egrep 'mongod.*LISTEN'

mongod 64223 弗雷德 6u IPv4 0xffffff80298fec20 0t0 TCP *:27017 (LISTEN)

mongod 64223 弗雷德 7u IPv4 0xffffff8017393500 0t0 TCP *:28017 (LISTEN)

mongod 64224 弗雷德 9u IPv4 0xffffff8014038500 0t0 TCP *:27018 (LISTEN)

mongod 64224 弗雷德 10u IPv4 0xffffff801746f880 0t0 TCP *:28018 (LISTEN)

……

……

……

然后在该端口上运行 tcpdump。

！

# python - 我如何打印dict值列表，每个键的列表中都有一个值

> ID：10528228
> 
> 赞同：-2
> 
> 时间：2012-05-10T05:52:24.700
> 
> 标签：python, dictionary

我有这种形式的字典...

```
d={'s1':{'a':[1,2,3],'b':[4,5,6]},'s2':{'d':[77,88,99],'e':[666,333,444]}} 
```

所以我想以这种格式打印

```
s1
a, 1
b,4
s1

s1
a,2
b,5
s1

s1
a,3
b,6
s1

s2
d,77
e,666
s2

s2
d,88
e,333
s2

s2
d,99
e,444
s2 
```

我试过这种方法

```
for k,v in d.items():
    print k
    for key,val in v.items():
        print key,val[0] # But this v[0] should change and key also should changthat i am not getting for same loop
    print k 
```

所以我必须打印所有值的主键，其中值是另一个字典，在那个字典中，每次我应该为每个列表项打印键，任何人都可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:16:04.597

```
>>> from itertools import product, starmap
>>> d={'s1':{'a':[1,2,3],'b':[4,5,6]},'s2':{'d':[77,88,99],'e':[666,333,444]}}
>>> for k,v in sorted(d.items()): # use d.iteritems for py2
        for x,y in zip(*starmap(product,sorted(v.items()))):
            print k
            print '{0},{1}'.format(*x)
            print '{0},{1}'.format(*y)
            print k
            print

s1
a,1
b,4
s1

s1
a,2
b,5
s1

s1
a,3
b,6
s1

s2
d,77
e,666
s2

s2
d,88
e,333
s2

s2
d,99
e,444
s2 
```

**解释**

它使用字典中每个列表的键获取值对，所以

```
{'a':[1,2,3],'b':[4,5,6]} 
```

变成

```
[(('a', 1), ('b', 4)), (('a', 2), ('b', 5)), (('a', 3), ('b', 6))] 
```

这是如何完成的：

第一行遍历 中的每个键和值`d`。这些必须排序，所以我可以按升序遍历，因为字典没有顺序。

键的值是一个类似于下面的字典，它以键值对的元组排序。

```
d = {'a':[1,2,3],'b':[4,5,6]}
>>> sorted(d.items())
[('a', [1, 2, 3]), ('b', [4, 5, 6])] 
```

然后`product`用于获取与每个值配对的键。

```
>>> [product(*x) for x in sorted(d.items())]
# iterates through [('a', 1), ('a', 2), ('a', 3)], [('b', 4), ('b', 5), ('b', 6)] 
```

这可以更简单地使用 来编写，尽管函数的参数（在这种情况下）来自元组`starmap`，但它的构建方式类似于。见[文档](http://docs.python.org/library/itertools.html#itertools.starmap)`map``product`

```
>>> starmap(product,sorted(d.items()))
# iterates through [('a', 1), ('a', 2), ('a', 3)], [('b', 4), ('b', 5), ('b', 6)] 
```

然后列表是`zippped`在一起的。

```
>>> zip(*starmap(product,sorted(d.items())))
[(('a', 1), ('b', 4)), (('a', 2), ('b', 5)), (('a', 3), ('b', 6))] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:11:37.703

这是一种方法：

```
>>> d={'s1':{'a':[1,2,3],'b':[4,5,6]},'s2':{'d':[77,88,99],'e':[666,333,444]}}
>>> for k in sorted(d.keys()):
...   v = d[k]
...   for i in xrange(len(v.values()[0])):
...     print k
...     for k2 in sorted(v.keys()):
...       v2 = v[k2]
...       print "%s,%d" % (k2, v2[i])
...     print "%s\n" % k
... 
```

当我运行它时，它打印：

```
s1
a,1
b,4
s1

s1
a,2
b,5
s1

s1
a,3
b,6
s1

s2
d,77
e,666
s2

s2
d,88
e,333
s2

s2
d,99
e,444
s2 
```

# mysql - 一个月内的日期范围内的 MySQL 天数（预订表）

> ID：10528237
> 
> 赞同：2
> 
> 时间：2012-05-10T05:53:24.427
> 
> 标签：mysql, date, datediff

我正在尝试使用以下信息为住宿服务创建报告：

```
Number of Bookings (Easy, use the COUNT function)
Revenue Amount (Kind of easy).
Number of Room nights. (Rather Hard it seems) 
```

分解为一年中的每个月。

限制 - 我目前正在使用 PHP/MySQL 来创建此报告。我一次将数据从预订系统中提取 1 个月，然后使用 ETL 过程将其放入 MySQL。
因此，当预订在月底拆分时，我有重复的记录。（例如下面的 BookingID = 9216 - 这是因为出于收入目的，我们需要将收入百分比分成相应的月份）。

**问题。**

我如何编写一些 SQL 来： 计算预订到酒店的房晚数并按月分组。考虑到如果预订跨越月末，则入住时的当月间夜数计入当月，退房时的同月间夜数计入当月作为结帐。

起初我使用这个：DATEDIFF(Checkout, Checkin)。但这导致一个月在 31 天的一个月中有 48 个房间夜。（因为 a）它将 1 次预订计为 11 晚，即使它在 2 个月内被拆分，并且 b）因为它出现了两次）。

然后，一旦我有了该语句，我就需要将它重新集成到我的 CrossTab SQL 中以供全年使用。

我找到了一些资源，但似乎无法正常工作（[MySql Query- Date Range within a Date Range](https://stackoverflow.com/questions/6589079/mysql-query-date-range-within-a-date-range) & [php mysql double date range](https://stackoverflow.com/questions/8559653/php-mysql-double-date-range)）

这是表的一个示例：（有大约 100,000 行类似的数据）。

```
CREATE TABLE IF NOT EXISTS `bookingdata` (
`idBookingData` int(11) NOT NULL AUTO_INCREMENT,
`PropertyID` int(10) NOT NULL,
`Checkin` date DEFAULT NULL,
`Checkout` date DEFAULT NULL,
`Rent` decimal(10,2) DEFAULT NULL,
`BookingID` int(11) DEFAULT NULL,
PRIMARY KEY (`idBookingData`),
UNIQUE KEY `idBookingData_UNIQUE` (`idBookingData`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=10472 ;

INSERT INTO `bookingdata` (`idBookingData`, `PropertyID`, `Checkin`, `Checkout`, `Rent`, `BookingID`) VALUES
(5148, 2, '2011-07-02', '2011-07-05', 1105.00, 10612),
(5149, 2, '2011-07-05', '2011-07-13', 2155.00, 10184),
(5151, 2, '2011-07-14', '2011-07-17', 1105.00, 11102),
(5153, 2, '2011-07-22', '2011-07-24', 930.00, 14256),
(5154, 2, '2011-07-24', '2011-08-04', 1832.73, 9216),
(5907, 2, '2011-07-24', '2011-08-04', 687.27, 9216),
(5910, 2, '2011-08-11', '2011-08-14', 1140.00, 13633),
(5911, 2, '2011-08-15', '2011-08-16', 380.00, 17770),
(5915, 2, '2011-08-25', '2011-08-29', 1350.00, 17719),
(5916, 2, '2011-08-30', '2011-09-01', 740.00, 16813); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:22:29.300

你在正确的路线上。您需要将查询与您想要数据的月份表连接起来，该表可以是永久的，也可以是（如下面的示例所示）在`UNION`子查询中动态创建：

```
SELECT   YEAR(month.d),
         MONTHNAME(month.d),
         SUM(1 + DATEDIFF( -- add 1 because start&finish on same day is still 1 day
           LEAST(Checkout, LAST_DAY(month.d)), GREATEST(Checkin, month.d)
         )) AS days
FROM     bookingdata
  RIGHT JOIN (
                   SELECT 20110101 AS d
         UNION ALL SELECT 20110201 UNION ALL SELECT 20110301
         UNION ALL SELECT 20110401 UNION ALL SELECT 20110501
         UNION ALL SELECT 20110601 UNION ALL SELECT 20110701
         UNION ALL SELECT 20110801 UNION ALL SELECT 20110901
         UNION ALL SELECT 20111001 UNION ALL SELECT 20111101
         UNION ALL SELECT 20111201
  ) AS month ON
             Checkin <= LAST_DAY(month.d)
         AND month.d <= Checkout
GROUP BY month.d 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/73cc9/11)上查看。

# jquery - Ajax 调用中的长查询字符串（已超出查询字符串限制）

> ID：10528238
> 
> 赞同：1
> 
> 时间：2012-05-10T05:53:33.017
> 
> 标签：jquery, ajax, iis-7, query-string

我在我的 .net 应用程序中使用以下 ajax 调用。此功能在单击按钮时执行。

```
$.get("PublishIntermediate.ashx",
        { 
          SiteID: "" + SiteID + "",
          PageID: "" + PageIDs + "",
          UserID: "" + UserID + "",
          Location: "" + "website" + ""  
        },
        function(data) 
            {
    //other code    
            }
        );
      return false; 
```

当 PageIDs 变量不太长时，它可以正常工作。但有时“PageIDs”变量变得太长（如果用户有太多页面）并且我从 firebug 检查的 ajax 调用的长度太长并且服务器返回错误。我从 IIS7 中检查了`querystring limit has been exceeded`. 还有其他方法可以执行此任务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T05:57:32.073

GET 方法对数据有限制

> 尽管 HTTP 协议的规范没有指定任何最大长度，但 Web 浏览器和服务器软件会施加实际限制。 [http://www.boutell.com/newfaq/misc/urllength.html](http://www.boutell.com/newfaq/misc/urllength.html)

，在 jquery 中使用 POST 方法，使用 $.post(paras) 而不是 $.get(paras)。

# java - windows 64位操作系统，jdbc无法连接到db2服务器

> ID：10528240
> 
> 赞同：0
> 
> 时间：2012-05-10T05:53:49.073
> 
> 标签：java, jdbc, jboss, 64-bit, db2

> windows 2003 server 64bit。jboss 7.0.1 ,jdk 1.6 64bit。can't connect to db2 server(linux)。</p>

但其他服务器（`windows 2003 server 32bit`）还可以！

为什么？

从`IBM`网站：

> 限制：如果您在 Windows 64 位操作系统上安装 IBM DB2 Driver for JDBC and SQLJ，则无法使用 IBM DB2 Driver for JDBC and SQLJ type 2 连接从以下位置连接到 DB2 Database for Linux, UNIX, and Windows 实例32 位 Java 应用程序。

`jboss7`我的不是什么意思`64bit`？？不知道`jboss 7`分不分`32/64bit`。我无法从[http://jboss.org获得任何信息](http://jboss.org)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:18:11.780

jboss7 应该可以在 64 位操作系统上的 32 位 JVM 中正常运行，因此下载并安装 32 位 JVM，然后将 jboss7 配置为在 32 位 JVM 中运行，而不是在 64 位 JVM 中运行。

# p2p - p2p 软件最初连接到哪里？

> ID：10528241
> 
> 赞同：4
> 
> 时间：2012-05-10T05:53:55.667
> 
> 标签：p2p

在 BitTorrent 中，客户端连接到 .torrent 文件中指定的跟踪器。Tracker 是一种中心化的服务器，它是起点。所以 BitTorrent 不是纯粹的 p2p。

如果我们要开发纯p2p系统，我们应该设计路由覆盖网络。所有节点都会像路由器一样拥有路由表。但是即使在路由覆盖网络中，每个节点最初都应该知道至少一个现有节点（GUID，IP地址）。那么我们如何确定这一点呢？我们是否应该像固定的集中式服务器一样永远保持“一个现有的节点开始连接”？如果是这样，我认为这不是完全去中心化的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-16T17:43:15.933

您描述的解决方案（定义一个具有众所周知的 IP 地址的中央对等点）并不是唯一的解决方案。

另一种解决方案是在网络上众所周知的 URL 中发布一个 html 页面（或 json 文件），并确保该项目包含该对等点可以初始连接的对等点的更新列表。如果对等点出现故障，则可以更新此列表。最终，您可以使用多个 URL。

纯粹的 P2P 系统是一个理论概念，在现实中无法完全实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T05:57:15.860

你可以使用任播。所以第一个其他客户将回答并可能发送这样一个初始“客户列表”。您的客户可以在哪里连接到他们以获取更多列表。

典型地，我会实现一个多播到一个地址并等待其他客户的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-20T09:28:08.583

首先，真正的点对点网络不一定是去中心化的。其次，去中心化并不一定意味着网络不使用本身可能是中心化的辅助服务。

这两个问题的主要问题是网络解决方案的主要资源是否通过相关对等点进行分配。

例如，对等视频会议可以使用中央联系人服务，但仍然是纯对等的，只要对等方在进入真正的对等范围之前解决此类问题。这也将是分散的。

它归结为您试图通过使用点对点来解决的问题。视频会议是一种视频会议 - 它以在一个对等方上录制的视频开始，并以在另一个对等方上观看的视频结束。只要此数据的每个字节都在对等点之间直接传输（即使会议中有数百个对等点，并且无论这些对等点如何找到彼此），它就是真正的点对点视频会议。

请注意，视频对等点仍将在您的典型环中，并且联系人列表可能仍使用节点密钥而不是 IP 来获取位置信息。这仍将是一个网络覆盖，因为它仍将基于 IP 构建，取代它在对等级别的寻址方案，以促进真正的对等网络。

它*真正*归结为网络连接的概念。IP 只是将数据包推送到未指定的路由器，直到它到达特定地址。每个端点之间的“连接”仅存在于更高的软件级别（包括处理 TCP/IP 时）。连接只是软件中用于了解谁是谁以及每个点如何处理数据等的数据。点对点网络覆盖有效地分发了这些数据，消除了每个对等点创建大量连接以进行通信的需要一个巨大的范围。为此不需要去中心化（只要对等通信不是集中式的），并且系统内的辅助服务不一定会限制网络的范围或以其他方式集中实际的对等网络。

因此，为了回答您的问题，它最初连接的位置并不重要，以便被视为点对点，并且不同的点对点服务将根据其服务设计来处理这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-02T15:13:33.627

好的，所以我正在考虑为一个 AI 项目的许多不同服务编写一个 p2p 协议，我想我会来这里看看我是否能获得一些关于如何获得初始连接的想法。

我遇到了几种建立初始连接的方法：

1）您在互联网上有一个静态 IP 地址，可以在其他对等方上分发信息。这不好，因为：a）它是单点故障，服务可能会脱机，阻止任何新连接创建与对等方的初始连接，b）IP 地址可能会更改。这可以通过使用一个域名来缓解，该域名指向提供对等点数据的服务位置的当前 IP 地址，但是理论上这可以被黑客通过欺骗或 arp 中毒、dns 攻击等破坏。

2）您可以强制用户为另一个对等方提供初始 IP 地址或主机名，由用户自行查找主机名/IP 地址/端口号。这很好，但如果有人发布虚假信息，或者他们在谷歌或其他搜索网站上找不到同行，那么显然它是错误的。

3) 你可以把它留给对等方在一个中心位置发布他们自己的存在 - 例如一组 IRC 频道或一组网站。同样，除非它通过一个中央可信域，否则很难确定对等点的真实性。

4）您可以使用某种 nmap 风格的发现算法，通过子网搜索适当的协议。这种方法的问题是它很慢，并且可能会引起防火墙等事物的注意。

5) 这是 3) 的变体，您可以允许同行在网站上宣传自己的信息，然后不必在合适的位置（特定网站或网站组）寻找信息，您可以让google 的搜索算法会找到它，并为您进行发现，但是您可以想象，google 可能需要几天的时间来缓存网站数据以及对等点的信息。同样，您可以提供某种方法来验证广告数据的真实性。

6) 如果您对锁定某些人的专有 p2p 网络感兴趣（例如，您可能想要一个文件共享网络并且您不希望执法部门能够访问它，或者 MPIAA），那么您可以使用 2) 然后有一个推荐系统，您需要初始连接提供推荐人的 IP 地址，然后该服务可以连接到推荐人的 IP 地址并询问推荐人是否确实推荐了推荐人。

这就是我目前所能想到的，但如果有人想出任何其他方法来做到这一点，我会非常感兴趣。

# c - 在串口传输上需要一些帮助

> ID：10528253
> 
> 赞同：2
> 
> 时间：2012-05-10T05:55:39.610
> 
> 标签：c, serial-port, microcontroller, 8051

我目前在 Keil C51 编程中使用 DS89C450 MCU。

我有一个连接到 P3^2 的红外接收器，它是下降沿触发器。每当我按下遥控器上的一个键时，它都会触发中断并将其保存到 xdata X 或 Y 中（逐位然后逐字节保存 500 个字节）。

我正在尝试通过串行端口将数据位（“1”或“0”）从缓冲区传输到超级终端。但是，当我按下遥控器时，我没有显示任何数据。

任何专家都可以告诉我为什么以及如何让它工作吗？

程序在这里：

[http://pastebin.com/hpAw2ipH](http://pastebin.com/hpAw2ipH)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:09:23.447

Google "Terminal by br@y"，它可以在 HEX 中显示串行通信。大多数 UART 不能发送单个位，而是发送 N 位字符，通常为 7 或 8 个，带有开始/停止/奇偶校验位（8 位，无奇偶校验，1 个停止位是通用默认值）。将数据编码为 ASCII 可以让生活变得更轻松，甚至可能使用开始/停止字符，这样您就知道何时获得真实数据。

如需更多详细信息，请使用示波器、BusPirate 或 LogicSniffer（来自 DangerousPrototypes.com）来嗅探通信数据。

# nhibernate - 具有复合ID的类的子类

> ID：10528255
> 
> 赞同：2
> 
> 时间：2012-05-10T05:55:57.290
> 
> 标签：nhibernate, nhibernate-mapping, mapping-by-code

MappingByCode 中是否可以进行以下 hbm.xml 映射？

```
<joined-subclass>
  <key>
    <column name="keypart1"/>
    <column name="keypart2"/>
    <column name="keypart3"/>
  </key> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:38:08.263

我想到了。

```
class JoinedSubclassMapping : JoinedSubclassMapping<Subclass>
{
    public JoinedSubclassMapping()
    {
        Key(key =>
        {
            key.Columns(c => c.Name("keypart1"), c => c.Name("keypart2"), c => c.Name("keypart3"));
        });
    }
} 
```

# c# - jquery自动完成c#列表 作为来源

> ID：10528257
> 
> 赞同：0
> 
> 时间：2012-05-10T05:56:02.470
> 
> 标签：c#, jquery, string, list, jquery-autocomplete

我见过很多例子，其中 JQuery 自动完成从后面的代码中获取 json 响应。将列表转换为 json 然后返回到客户端的字符串数组似乎有点适得其反。我在后面的代码中有一个 Web 方法，它返回我希望自动完成使用的结果列表，有没有办法从 JQuery 调用该方法（我对 JQuery 非常陌生，实际上今晚才开始搞砸它）。

```
 <script type="text/javascript">
    $(document).ready(function () {
        $("#txtbox").autocomplete({
           source : 
```

不知道从这里去哪里...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:10:40.790

在服务器端，

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json)] 
public List<RetUsers> GetSomething()
{
//populate ur list here
  return list;
} 
```

在jQuery中，

```
 $("#txtbox").autocomplete({
           source : 'your url here' 
```

# bash - 使用 bash 仅复制奇数行的内容

> ID：10528261
> 
> 赞同：-1
> 
> 时间：2012-05-10T05:56:28.163
> 
> 标签：bash

我有一个文件包含：
`0x0003ffff`(line 1 , col 2)
`0x0003ffff`(line 2\. col2 )
`0x0000ffff`(line 3, col2)
`0x0000ffff`(line 4, col 2)
这样的行可以有“n”个，但只会从 col 2 开始。

我想复制第 1 行的内容并将其粘贴到另一个文件“lc.txt”的第 35 列第 9 行同样我想复制所有奇数行的内容并将其粘贴到其他文件的特定行和列中逐个。

我如何使用 bash 脚本来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:17:55.817

下面将提取奇数行。

```
awk 'NR%2' input.txt 
```

没有很好地指定粘贴到单独的文件。也许您想就此提出一个单独的问题。但也许是这样的；

```
sed -e "35s/^........./&$(awk 'NR%2' input.txt)" otherfile.txt 
```

# sqlite - iphone字母数字升序

> ID：10528262
> 
> 赞同：0
> 
> 时间：2012-05-10T05:56:33.647
> 
> 标签：sqlite

你能帮我获取字母数字升序的sqlite查询吗？条件：字母数字值应排在第一位，字符应排在第二位

**结果格式如下**

例如：1.apple 2.Orange 8.Banana 15.Mango Animals Vegetables

1.apple、2.Orange、8.Banana、15.Mango ---字母数字动物、蔬菜 ---char

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:58:41.287

它在 SQL 语法中称为 ORDER BY。这很简单： `SELECT my_attr FROM my_table ORDER BY my_attr`

欲了解更多信息检查：[http ://www.sqlite.org/docs.html](http://www.sqlite.org/docs.html)

# jquery - JSF 2.0 中如何处理 AJAX 请求？

> ID：10528270
> 
> 赞同：2
> 
> 时间：2012-05-10T05:57:57.823
> 
> 标签：jquery, jsf-2

我正在尝试类似下面的东西 -

```
<h:commandButton id="btnOK">
     <f:ajax event="action" execute="@this" render="idHeader"       
listener="#{myBean.actionSubmit()}"/>
</h:commandButton> 
```

我希望当该 ajax 请求完成时，在 UI 中进行一些处理。我为此使用以下 jQuery 代码：

```
$(document).ajaxComplete(function() {
    $.modal.close();
}); 
```

但我的问题是 jQuery 方法根本没有被触发。我想知道 JSF ajax 提交是否会触发 ajaxComplete 事件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T13:20:21.227

标准的 JSF impl 不使用 jQuery API 来发送 ajax 请求。JSF 使用它自己的内部 API，您可以在自动包含的`jsf.js`文件中找到它。所以 jQuery`jQuery.ajaxComplete()`永远不会被调用。`$.ajax()`只有在使用 jQuery （及其快捷方式`$.get()`,`$.post()`等）时才会调用它。只有基于 jQuery 的组件库使用它们，例如 PrimeFaces`<p:commandXxx>`和`<p:ajax>`. 对于标准 JSF `<f:ajax>`，您需要使用 JSF 自己的处理`jsf.ajax.addOnEvent()`程序，或者.`onevent``<f:ajax>`

在*您的特定情况下*，我认为该`onevent`属性很简单：

```
<f:ajax ... onevent="btnOKhandler" /> 
```

和

```
function btnOKhandler(data) {
    if (data.status == 'success') {
        $.modal.close();
    }
} 
```

可以有 3个`data.status`值：`begin`和。另请参见[JSF 规范](http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html)的表 14-4 和 14-3 。`complete``success`

### 也可以看看：

*   [每次 Ajax 调用（之前和之后）的 Javascript](https://stackoverflow.com/questions/16463177/javascript-on-before-and-after-every-ajax-call/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-30T08:08:27.560

这对我有用，而不是 $(document).ajaxComplete();

```
RichFaces.jQuery(document).on( 'ajaxcomplete', function(event, xhr, settings){   
     console.log(event, xhr, settings);
      // event, undefined, undefined
}) 
```

# c - 为什么下面的代码给出“取消引用类型双关指针会破坏严格的别名规则”以及如何解决它？

> ID：10528280
> 
> 赞同：1
> 
> 时间：2012-05-10T05:58:35.527
> 
> 标签：c, gcc

```
 int test_malloc(void **ptr, size_t size)
 {
    (*ptr) = malloc(size);
    return 0;
 }

 int test_app()
 {
   char *data = NULL;
   int ret = 0;
   ret = test_malloc((void **)&data, 100);
 } 
```

编译器：gcc 4.1.2

其中，我正在使用 -O2 和 -Wall ，我认为它们正在打开一些检查这一点的选项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:11:48.407

您有一个 type 的变量`char*`，并且`test_malloc`您正在通过 type 的左值对其进行修改`void *`，这违反了严格的别名规则。

你可以这样解决它：

```
 int test_app()
 {
   char *data = NULL;
   void *void_data = NULL;
   int ret = 0;
   ret = test_malloc(&void_data, 100);
   data = (char*)void_data;
 } 
```

但更好的是让 test_malloc 返回`void*`以避免此类问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T06:12:05.267

You cannot do what you're trying to do in C; it's invalid code. If you want to use `void *` to return generic pointers, the only way to do so is the return value. This is because `void *` converts to any pointer type, and any pointer type converts to `void *`, but `void **` **does not** convert to a pointer to some other type of pointer, nor do pointers to other pointer types convert to `void **`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T06:09:38.670

我试着像这个一样工作正常

```
void * test_malloc(int size)
{
    void *mem = malloc(size);
    if (mem == NULL)
    {
        printf("ERROR: test_malloc %d\n", size);
    }
    return mem;
}

 int test_app()
 {
   char *data;
   int ret = 0;
   data = test_malloc(100);

   if(data != NULL)
         free(data);
 } 
```

# rest - 销毁服务器模型不会将 id 更新为 null

> ID：10528286
> 
> 赞同：0
> 
> 时间：2012-05-10T05:59:00.360
> 
> 标签：rest, backbone.js, backbone-relational

在我更改为 Backbone-Relational 后，当我调用 destroy() 时，我的模型停止工作。我必须确保当它在服务器上删除成功时，客户端将不再有 id，所以当我再次尝试保存它时我的模型不会请求 PUT（更新） - 在服务器端抛出 Record Not Found。

咖啡脚本方面

```
save: ->        
    if isBlank @model.get("text")
        @model.destroy() # after success it still with same attributes including id!!
    else
        @model.save() 
```

导轨侧

```
def destroy
    @note = Note.find(params[:id])
    @note.destroy        
    respond_with @note # callback is empty
end 
```

也许来自 Backbone-Relational 的错误？Backbone.js 会在销毁后更新 id 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:54:15.003

Backbone 看起来并没有以任何方式在破坏时修改模型。除非将其从其收藏中删除（如果有）。

[检查代码](http://documentcloud.github.com/backbone/docs/backbone.html#section-59)

它所做的是触发事件`destroy`，因此您可以轻松地侦听此事件并执行您认为正确的销毁行为：

```
// code simplified and no tested
var MyModel = Backbone.Model.extend({
  initialize: function(){
     this.on( "destroy", this.afterDestroy, this );
  },

  afterDestroy: function(){
    this.set( "id", null );
  }
}); 
```

# php - 如何使用 DOM 对 xml 文件进行排序

> ID：10528287
> 
> 赞同：5
> 
> 时间：2012-05-10T05:59:02.183
> 
> 标签：php, xml, sorting

我有一个结构如下的 xml 文件

> ```
> <?xml version="1.0"?>
>  <library>
> <book id="1003">
>     <title>Jquery MVC</title>
>     <author>Me</author>
>     <price>500</price>
> </book>
> <book id="1001">
>     <title>Php</title>
>     <author>Me</author>
>     <price>600</price>
> </book>
> <book id="1002">
>     <title>Where to use IFrame</title>
>     <author>Me</author>
>     <price>300</price>
> </book>
> </library> 
> ```

为了根据书的 id 对这个 xml 进行排序，

[**在从 stackoverflow**](https://stackoverflow.com/questions/1359224/sort-xml-via-attribute-value-php)回顾了这个方法之后[](https://stackoverflow.com/questions/1359224/sort-xml-via-attribute-value-php)

 **我这样编码

```
$dom = new DOMDocument();
$dom->load('DOM.xml');
$library = $dom->documentElement;
$xpath = new DOMXPath($dom);
$result = $xpath->query('/library/book');
function sort_trees($t1,$t2){
    return strcmp($t1['id'], $t2['id']);    
}

usort($result, 'sort_trees');
print_r($result);*/ 
```

但这给了我一个错误

> 警告：usort() 期望参数 1 是数组，对象在第 24 行的 /var/www/html/testphp/phpxml/readxml.php 中给出

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T06:21:23.840

您引用的答案是针对 SimpleXML，但您使用的是 DOMDocument。

如果你想继续使用 DOMDocument，你需要牢记它的 API。

```
$dom = new DOMDocument();
$dom->load('DOM.xml');
$xp = new DOMXPath($dom);

$booklist = $xp->query('/library/book');

// Books is a DOMNodeList, not an array.
// This is the reason for your usort() warning.

// Copies DOMNode elements in the DOMNodeList to an array.
$books = iterator_to_array($booklist);

// Second, your sorting function is using the wrong API
// $node['id'] is SimpleXML syntax for attribute access.
// DOMElement uses $node->getAttribute('id');
function sort_by_numeric_id_attr($a, $b)
{
    return (int) $a->getAttribute('id') - (int) $b->getAttribute('id');
}

// Now usort()
usort($books, 'sort_by_numeric_id_attr');

// verify:
foreach ($books as $book) {
    echo $book->C14N(), "\n";
} 
```

如果您需要创建一个节点排序后的新输出文档，请创建一个新文档，导入根元素，然后按排序顺序导入书籍节点并添加到文档中。

```
$newdoc = new DOMDocument('1.0', 'UTF-8');
$libraries = $newdoc->appendChild($newdoc->importNode($dom->documentElement));
foreach ($books as $book) {
    $libraries->appendChild($newdoc->importNode($book, true));
}

echo $newdoc->saveXML(); 
```

但是，更好的方法是使用 XSLT：

```
<?xml version="1.0" encoding="UTF-8" ?>
<!-- file "sort_by_numeric_id.xsl" -->
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output encoding="UTF-8" method="xml" />

<xsl:template match="node()|@*">
    <xsl:copy><xsl:apply-templates select="node()|@*"/></xsl:copy>
</xsl:template>

<xsl:template match="/*">
    <xsl:copy>
        <xsl:apply-templates select="@*"/>
        <xsl:apply-templates select="*">
            <xsl:sort select="@id" data-type="number"/>
        </xsl:apply-templates>
    </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

然后使用 XSLTProcessor（或`xsltproc`从命令行）：

```
$xsltdoc = new DOMDocument();
$xsltdoc->load('sort_by_numeric_id.xsl');

$xslt = new XSLTProcessor();
$xslt->importStyleSheet($xsltdoc);

// You can now use $xslt->transformTo*() methods over and over on whatever documents you want

$libraryfiles = array('library1.xml', 'library2.xml');

foreach ($libraryfiles as $lf) {
    $doc = new DOMDocument();
    $doc->load($lf);

    // write the new document
    $xslt->transformToUri($doc, 'file://'.preg_replace('/(\.[^.]+)?$/', '-sorted$0', $lf, 1);

    unset($doc); // just to save memory
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T10:53:17.237

（从您的重复问题中复制而来）这有效

```
$dom = new DOMDocument();
$dom->load('dom.xml');
$xp = new DOMXPath($dom);

$booklist = $xp->query('/library/book');
$books = iterator_to_array($booklist);

function sort_by_numeric_id_attr($a, $b)
{
    return (int) $a->getAttribute('id') - (int) $b->getAttribute('id');
}

usort($books, 'sort_by_numeric_id_attr');

$newdom = new DOMDocument("1.0");
$newdom->formatOutput = true;
$root = $newdom->createElement("library");
$newdom->appendChild($root);
foreach ($books as $b) {
    $node = $newdom->importNode($b,true);
    $root->appendChild($newdom->importNode($b,true));
}

$newdom->save('DOM2.xml'); 
```

如您所见，您需要创建一个新的 DOMDocument，并将已排序的子项添加到其中（通过 importNode 将 DOMNodes 从一个 DOMDocument 复制到另一个）。**

# hibernate - 通过 maven 生成 JPA Hibernate 元模型

> ID：10528290
> 
> 赞同：15
> 
> 时间：2012-05-10T05:59:25.423
> 
> 标签：hibernate, jpa

我遵循了 JPA modelgen[指南](http://docs.jboss.org/hibernate/jpamodelgen/1.0/reference/en-US/html_single/#d0e261)，并且能够生成我需要的规范元模型。有了这个 pom 设置：

```
<plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                    <compilerArgument>-proc:none</compilerArgument>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.bsc.maven</groupId>
                <artifactId>maven-processor-plugin</artifactId>
                <version>2.0.6-redhat</version>
                <executions>
                    <execution>
                        <id>process</id>
                        <goals>
                            <goal>process</goal>
                        </goals>
                        <phase>generate-sources</phase>
                        <configuration>
                            <outputDirectory>target/metamodel</outputDirectory>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>1.3</version>
                <executions>
                    <execution>
                        <id>add-source</id>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>add-source</goal>
                        </goals>
                        <configuration>
                            <sources>
                                <source>target/metamodel</source>
                            </sources>
                        </configuration>
                    </execution>
                </executions>
            </plugin> 
```

生成的源在指定目录中正确创建，我必须手动将其指定为 eclipse 项目类路径中的源才能使用它。当我触发 Maven 时，日志会显示`cannot find symbol`，或者`duplicate class`我仍然可以成功构建。所以我的问题是，这是创建元模型的预期/正确行为吗？还是我错过了 cofig 中的某些内容？谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-13T08:52:18.850

我也在使用 JPA 元模型生成器，我没有你描述的问题，也许我的配置可以帮助，我看到了一些差异，第一个是`maven-processor-plugin`

```
<plugin>
  <groupId>org.bsc.maven</groupId>
  <artifactId>maven-processor-plugin</artifactId>
  <version>2.1.0</version>
  <executions>
    <execution>
      <id>process</id>
      <goals>
        <goal>process</goal>
      </goals>
      <phase>generate-sources</phase>
      <configuration>
        <processors>
          <processor>org.hibernate.jpamodelgen.JPAMetaModelEntityProcessor</processor>
        </processors>
      </configuration>
    </execution>
  </executions>
  <dependencies>
    <dependency>
      <groupId>org.hibernate</groupId>
      <artifactId>hibernate-jpamodelgen</artifactId>
      <!--version>1.2.0.Final</version-->
      <version>4.3.4.Final</version>
    </dependency>
  </dependencies>
</plugin> 
```

如您所见，我必须添加`hibernate-jpamodelgen`依赖项和处理器属性。

我不确定是否`build-helper-maven-plugin`有必要将生成的源目录添加到您的源路径。我没有使用它，它对我有用，但也许是因为我使用生成源的默认输出路径。

# javascript - 使用 javascript 添加 CSS 样式

> ID：10528293
> 
> 赞同：2
> 
> 时间：2012-05-10T05:59:57.363
> 
> 标签：javascript, html, css

我正在创建一个 chrome 扩展，其中一些图标显示在空白选项卡中。我正在使用 javascript 在页面中添加图标。以下是代码片段：

HTML：

```
<div id="icons" class="icons"></div> 
```

Javascript：

```
function addIcons() {
  for (var i = 0; i < iconArray.length; i++) {
    var link = document.createElement('a');
    link.href = linkArray[i];

    var icon = document.createElement('img');
    icon.src = "images/" + iconArray[i];
    icon.title = titleArray[i];

    link.appendChild(icon);
    document.getElementById('icons').appendChild(link);
  }
  document.getElementById('icons').style.borderBottom="2px solid blue";
} 
```

问题是边框出现在图标上方（边框应该出现在下方！）。谁能告诉我应该怎么做才能得到想要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:07:49.577

刚刚尝试了您的代码，它可以正常工作。

截图：[https](https://skitch.com/runk/83fes) ://skitch.com/runk/83fes ，最新的 Chrome。

你确定你在页面的其余部分有一个有效的 html 标记吗？可能有问题。

而且我建议不要通过 js 设置 css 样式。

```
<div id="icons" class="icons" style="border-bottom: 2px solid blue"></div> 
```

或使用 css 样式标签（文件）

```
<style>
.icons { border-bottom: 2px solid blue }
</style> 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-10T06:04:59.810

检查[http://reference.sitepoint.com/css/border-bottom](http://reference.sitepoint.com/css/border-bottom)以设置任何 DOM 元素的底部边框。

# java - 阻止 OSX 自动调整 JComboBox 的大小？

> ID：10528296
> 
> 赞同：2
> 
> 时间：2012-05-10T06:00:06.130
> 
> 标签：java, macos, swing, jcombobox, autosize

我创建了一个处理组合框的程序，但遇到了一个 Mac 用户向我展示的问题。即使我设置了宽度，Mac 显然也会调整 JComboBox 和 JButton 的大小。Windows 上所有组合框的宽度都是不同的，因为它们应该是不同的，但在 OSX 上它的宽度和大小都相同，因此无法读取组合框中一半的条目，因为当你尝试时它都被切断了选择一个选项。我该如何解决或防止这种情况？

所以我的问题是，你如何阻止操作系统自动调整摆动工具的大小，或者我如何在 JCombBox 的可读性中做出选择，而不是像“Boxes”而不是“Bo ...”那样被切断？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T09:02:20.010

如图[here](https://stackoverflow.com/q/7229226/230513)，*不要设置宽度*；这是 UI 委托的权限，`com.apple.laf.AquaComboBoxUI`. 取而代之的是，让`JComboBox`程序根据不可避免地从一个平台到另一个平台变化的字体指标来计算它自己的首选大小。

如果您仍有问题，此[示例](https://stackoverflow.com/a/5663782/230513)可能会构成您的[sscce](http://sscce.org/)的基础。

# opengl-es - OpenGL ES 2.0 绘制一圈刻度线/线

> ID：10528299
> 
> 赞同：0
> 
> 时间：2012-05-10T06:00:23.353
> 
> 标签：opengl-es, opengl-es-2.0

在 OpenGL ES 2.0 中绘制一圈刻度线的最佳方法是什么？就像你在车速表中看到的那样。

我尝试重新计算 cos 和 sin 以获得每个点的每个顶点的 x 和 y，但这会导致刻度线出现一些疯狂的闪烁。

我尝试了一种计算成本更低的方法，它只计算一次 cos 因子和 tan 因子，并使用乘法和加法来构建一个圆圈，但对于速度计来说似乎太不准确了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T23:04:40.827

重写更便宜的方法（基于[http://slabode.exofire.net/circle_draw.shtml](http://slabode.exofire.net/circle_draw.shtml)），我设法让它工作。我仍然不确定为什么 sin 和 cos 方法会导致闪烁，除非每帧刷新调用 sin 和 cos 200 次对于处理器或其他东西来说过于激烈。无论哪种方式，每帧调用一次 cos 和 tan 并且只进行 200 次加法和乘法运算现在似乎可以正常工作。

# php - 在 PHP 中使用 API 编辑 PHP 文件

> ID：10528300
> 
> 赞同：-1
> 
> 时间：2012-05-10T06:00:27.517
> 
> 标签：php

我是 PHP 新手，想在 PHP API 中开发一个文件，它可以在单个窗口中编辑我所有的 js 文件、css 文件和 html 文件，而无需登录 webhost。简单我只需浏览那个链接并编辑这些文件并自动保存关于我所做的更改。

每个 js 应该在不同的部分，类似的 css 在一个页面中。它还应该与移动设备兼容，这样我就可以在所有屏幕分辨率下使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:33:51.110

当心！！！如果您使用 PHP 制作支持 PHP、JS、CSS 和 HTML 的文本编辑器并将其用作在线工具，则可能会产生一些安全问题，如果有人访问此编辑器可能会很危险。但是，如果您不允许任何人编辑您服务器中存在的任何 php 文件，甚至不允许使用任何 php 函数。

如果您只关心 PHP、JS、CSS 的语法只是为了检查并让用户知道这一点，那么您需要编写一个词法解析器来分析该语言的语法数据库的代码。

由于这个安全问题，只有客户端应用程序，如 Eclipse、Netbeans、Notepad++ 等编辑器。所以想想这个问题。它不应该伤害你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:37:11.637

如果我正确理解了您的问题，您需要构建 PHP 应用程序来浏览您的站点目录并在简单的纯文本编辑器中打开基于纯文本的文件。

研究方向： **PHP 表单处理**（处理 $_POST 数据，注意 stripslashes() 和 htmlspecialchars() 函数，因为 PHP 处理的纯文本数据会让你头疼） **PHP 文件系统函数**（fopen、fread、fwrite、file_get_contents、scandir , is_dir 函数)

# opengl-es - 读取opengl es 2.0中的特定颜色像素

> ID：10528303
> 
> 赞同：0
> 
> 时间：2012-05-10T06:00:42.580
> 
> 标签：opengl-es, pixels

我有一个绑定到纹理的帧缓冲区对象，它在纹理中分布在不同位置的黑色和白色像素。我创建了相对于新 ipad 分辨率的帧缓冲区对象。从这个 fbo 我只想读取白色像素。我想知道怎么做。我正在使用 glreadpixels 函数，它将读取所有像素。但是？我只想要白色像素。如果有任何方法可以做到这一点，请建议我。我正在使用 OpenGL ES 2.0。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:08:40.513

我不相信有任何 OpenGL 特定的功能会做这样的事情。您只需要流出整个缓冲区并在 CPU 上对其进行迭代。

# sharepoint - 在事件接收器中调用控制台应用程序 (.exe) 并出现错误

> ID：10528307
> 
> 赞同：0
> 
> 时间：2012-05-10T06:01:09.717
> 
> 标签：sharepoint, process, ocr, eventreceiver

我正在使用 SharePoint 基础。我有一个用于运行某些 OCR 进程的控制台应用程序。我正在从 Windows 服务调用控制台应用程序的 exe，它工作正常。我正在尝试从事件接收器调用相同的 exe，但无法调用 exe 并出现一些错误。事件接收器工作正常但无法调用 exe。我试图调用其他exes，如notepad.exe，但得到同样的错误。详情如下：

**代码：**

```
public override void ItemAdded(SPItemEventProperties properties)
{

   try
   {
       base.ItemAdded(properties);
       Log("Event Occured.");
       string OCRedText = string.Empty;
       string Listname = properties.ListTitle;
       string itemName = Convert.ToString(properties.ListItem["Name"]);
       string itemTitle = Convert.ToString(properties.ListItem["Title"]);

       callService(); // Here is the method to call Process                

       SPListItem item = properties.ListItem;
       if (System.Threading.Monitor.TryEnter(myLock, TimeSpan.FromSeconds(100)))
       {
           if (Convert.ToString(item["OCRed"]) == "False")
           {                       
               item["OCRed"] = "True";
               Thread.Sleep(10000);
               item.SystemUpdate();
               Log("Item Added and Updated.");
           }
           else
           {
               Log("Can not update the Item.");
           }
       }
       Log("Event End."+"\r\n");
   }
   catch (Exception ex)
   {
       Log("Error in Item Added Event Receiver.");
       Log(ex.ToString());               
   }
}

public void callService()
{
    Log("Calling Service is not easy.");
    try
    {
        ProcessStartInfo pinfoService = new ProcessStartInfo();
        pinfoService.FileName = @"D:\Khan\khan.exe";
        //pinfoService.FileName = @"C:\Windows\System32\notepad.exe";
        pinfoService.UseShellExecute = false;
        pinfoService.RedirectStandardError = true;
        pinfoService.RedirectStandardInput = true;
        pinfoService.RedirectStandardOutput = true;
        pinfoService.CreateNoWindow = true;
        pinfoService.WindowStyle = ProcessWindowStyle.Hidden;
        Log("FileName: " + pinfoService.FileName);
        Log("Arguments for callService : "+pinfoService.Arguments);
        Process pService = new Process();

        pService.StartInfo = pinfoService;
        Log("Process Before Start.");
        Thread.Sleep(5000);
        pService.Start();
        Thread.Sleep(2000);
        Log("Process Before wait for exit.");
        pService.WaitForExit();
        Log("Process Completed.");
    }
    catch (Exception ex)
    {
        Log("Error in callService(). Please contact your Administrator.");
        Log(ex.ToString());
    }
} 
```

**下面是我遇到的错误`pService.Start();`**

```
=========================================

Info : Process Before Start.

Info : Error in callService(). Please contact your Administrator.

Info : System.ComponentModel.Win32Exception: Not enough quota is available to process this command

   at System.Diagnostics.Process.StartWithCreateProcess(ProcessStartInfo startInfo)

   at OCRonUploadDoc.EventReceiver1.EventReceiver1.callService()

========================================= 
```

我无法弄清楚这个问题。请帮我...！！！

提前致谢。

*   汗阿布巴卡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:46:25.360

I think that the asp.net account under which the application pool runs does not have permissions to start the exe file. You can check this out [http://www.daniweb.com/web-development/aspnet/threads/386380/cannot-run-exe-files-in-asp.net-application](http://www.daniweb.com/web-development/aspnet/threads/386380/cannot-run-exe-files-in-asp.net-application) However if your system will be used by more users you can run into problems really quickly, because every change of a document will spawn a new process. The server will run out of ram and the farm will not be unavailable.

# php - 如何删除天数> 30的数据

> ID：10528310
> 
> 赞同：-3
> 
> 时间：2012-05-10T06:01:43.960
> 
> 标签：php

我是 php 新手，我有一张桌子

```
+-----------------------------------------------------------------+
|                              seeker                             |
+----+-------+----------+---------------+-------------------------+
| id | name  | password | register_date | login_date | limit_date |
+----+-------+----------+---------------+------------+------------+
| 01 | ali   |   ****   |  2012-02-08   | 2012-02-09 | 2012-03-09 |
| 02 | hamza |   ****   |  2012-04-10   | 0000-00-00 | 0000-00-00 |
| 03 | sam   |   ****   |  2012-04-15   | 0000-00-00 | 0000-00-00 |
+----+-------+----------+---------------+------------+------------+ 
```

当限制日期=当前日期时，我必须应用两个查询一个来删除数据

当用户 login_date 为 '0000-00-00' 且其 (register_date - current date) >= 30 时，第二次删除数据

我的第一个查询正在正确实施

在我的第二个查询中，我通过从当前日期中减去 register_date 来找到天数，如果天数大于或等于 30，则删除该用户。

我的问题是，当任何单个用户返回天数 >= 30 时，所有 login_date ='0000-00-00' 的用户都会被删除。这是我的代码

```
 //code for  delete user where (current date - register date)>=30
    $qry="select * from seeker where login_date='0000-00-00'";
    $rs= mysql_query($qry, $con);
     $res=mysql_num_rows($rs);
    echo "total rows of zero dates "."".$res;
    echo "<br>";
    if($res!=0)
    {
        echo "user exist of date='0000-00-00'";
        echo"<br>";
        $qqq="select * from seeker where login_date='0000-00-00'";
            $rsq= mysql_query($qqq, $con);
            while($resq=mysql_fetch_array($rsq))
            //echo $resq;
        {
          $r=$resq['c_date'];
          echo $r;
          $reg_date = strtotime($r); 
          echo "<br>";

    //current date
        $c= date("Y-m-d");
        echo $c;
        //echo "current date".""."<br>";
        $current_date = strtotime($c); 
        echo "<br>";

         //date difference
          $datediff = $current_date - $reg_date;
          $days = floor($datediff/(60*60*24));
          echo "days"."".$days;
          echo "<br>";

        if($days>=30)
        {
        $qry1="delete from seeker where $days = '30'";
        $rs1= mysql_query($qry1, $con);
        echo $qry1;
        echo "<br>";
        echo "<br>";
        }
      }

}
// code for delete user where current date = limit date
$qry3="select * from seeker where current_date = limit_date";
$rs3= mysql_query($qry3, $con);
$res3=mysql_num_rows($rs3);
if($res3!=0)
{

        $q= "delete from seeker where current_date = limit_date";
        $rq=mysql_query($q, $con);
        echo "$q";
        echo "<br>";
} 
```

请告诉我哪里出错了。我只想删除天数 >=30 的用户，但它删除了 login_date ='0000-00-00' 的所有用户

```
for example if current date is 2012-01-10\. it will not delete user
if current date is 2012-05-10.. it must delete only "hamza" but it delets "sam" too 
```

请帮助我，我是 php 的学生和新手。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:26:24.557

请在查询中尝试`DATEDIFF(time1 ,time2)`函数和`NOW()`函数，如下所示

```
DELETE FROM seeker WHERE DATEDIFF( NOW( ) , `register_date` )  >= 30 AND 
`login_date` = '0000-00-00' 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:14:45.597

使用以下查询，

```
DELETE FROM `seeker` 
WHERE `register_date`>DATE_SUB(NOW(), INTERVAL 30 day) 
```

# c# - 当 NetworkStream.Read(byte[], int, int) 需要返回 -1 时，它会中止（）它正在运行的线程吗？

> ID：10528311
> 
> 赞同：2
> 
> 时间：2012-05-10T06:01:45.630
> 
> 标签：c#, networking, stream

```
 NetworkStream stream = socket.GetStream();

        if (stream.CanRead)
        {
            while (true)
            {
                int i = stream.Read(buf, 0, 1024);
                result += Encoding.ASCII.GetString(buf, 0, i);
            }
        } 
```

上面的代码旨在从`TcpClient`在单独线程上运行时检索消息。`Read`方法工作正常，直到它应该返回 -1 表示没有什么可读取的了；相反，它只是在没有任何明显原因的情况下终止它正在运行的线程 - 使用调试器跟踪每个步骤表明它只是在该行之后停止运行。

我也尝试用 a 封装它但`try ... catch`没有多大成功。

这可能是什么原因造成的？

编辑：我试过

```
 NetworkStream stream = socket.GetStream();

    if (stream.CanRead)
    {
        while (true)
        {
            int i = stream.Read(buf, 0, 1024);
            if (i == 0)
            {
                break;
            }
            result += Encoding.ASCII.GetString(buf, 0, i);
        }
    } 
```

感谢@JonSkeet，但问题仍然存在。线程在该`read`行终止。

EDIT2：我修复了这样的代码并且它有效。

```
 while (stream.DataAvailable)
    {
        int i = stream.Read(buf, 0, 1024);
        result += Encoding.ASCII.GetString(buf, 0, i);
    } 
```

我觉得问题很简单，只是我想的不够透彻。感谢大家看这个！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T06:02:45.323

不，[`Stream.Read`](http://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)当没有可读取的内容时返回 0，而不是 -1：

> **返回值**
> 读入缓冲区的总字节数。如果当前没有那么多字节可用，则该字节数可能小于请求的字节数，如果已到达流的末尾，则该字节数为零 (0)。

我的猜测是，实际上，没有抛出异常并且线程没有被中止 - 但它只是永远循环。如果您在调试器中单步执行，您应该能够看到这一点。无论发生什么，你的“快乐”终止条件永远不会被击中......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T06:12:43.300

由于您正在尝试从流中读取 ASCII 字符，因此请查看以下可能更简单的方法：

```
public IEnumerable<string> ReadLines(Stream stream)
{
    using (StreamReader reader = new StreamReader(stream, Encoding.ASCII))
    {
        while (!reader.EndOfStream)
            yield return reader.ReadLine();
    }
} 
```

虽然这可能不是您想要的，但要点是：

*   用a`StreamReader`为你做所有辛苦的工作
*   使用 while 循环`!reader.EndOfStream`来循环流
*   `reader.Read(buffer, 0, 1024)`如果您希望将块读入缓冲区并附加到结果中，您仍然可以使用。请注意，这些将是`char[]`块而不是`byte[]`块，这可能是您想要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T06:11:52.663

在我看来，它只是在*阻塞*- 即在流结束时等待。要让它返回一个非正数，**必须关闭流**，即调用者不仅发送了数据，而且关闭了他们的出站套接字。否则，系统无法区分“等待数据包到达”和“流结束”。

如果调用者只发送一条消息，他们应该在发送后关闭他们的出站套接字（他们可以保持他们的入站套接字打开以进行回复）。

如果调用者发送多条消息，那么您必须使用框架方法来读取各个子消息。对于基于文本的协议，这通常意味着“寻找换行符”。

# php - 如何为自己的网站制作搜索引擎

> ID：10528312
> 
> 赞同：1
> 
> 时间：2012-05-10T06:01:45.897
> 
> 标签：php, mysql, sql

我在互联网上得到了这个语法并修改了一些部分。我想在表格中定位/搜索记录。此语法最终显示为“找不到搜索查询”我无法在此语法中找到问题。你能帮我找出错误吗？这是语法。

```
<?php  // Get the search variable from URL
if(!isset($_GET['q']))
die('Search Query not found'); 
$var = $_GET['q'];
$trimmed = trim($var); //trim whitespace from the stored variable

// rows to return
$limit=10;

// check for an empty string and display a message.
if ($trimmed == ""){
echo "<p>Please enter a search…&lt;/p>";
exit;
}

// check for a search parameter
if (!isset($var)){
echo "<p>We dont seem to have a search parameter!</p>";
exit;
}

//connect to your database ** EDIT REQUIRED HERE **
mysql_connect("localhost","user1","test123");

//specify database ** EDIT REQUIRED HERE **
mysql_select_db("inventory") or die("Unable to select database");
// Build SQL Query
$query = ("SELECT * FROM client WHERE account_name LIKE \"%$trimmed%\" or maintenance_type like \"%$trimmed%\" or ma_status like \"%$trimmed%\" ma_contract_start like \"%$trimmed%\" ma_contract_end like \"%$trimmed%\" ma_reference_no like \"%$trimmed%\" ORDER BY account_name DESC");

// EDIT HERE and specify your table and field names for the SQL query

$numresults=mysql_query($query);
$numrows=mysql_num_rows($numresults);

// If we have no results, offer a google search as an alternative — this is optional

if ($numrows == 0)
{
echo "<h4>Results</h4>";
echo "<p>Sorry, your search: $trimmed returned zero results</p>";

// google
echo "<p><a href=\"http://www.google.com/search?q="
. $trimmed . "\" target=\"_blank\" title=\"Look up
" . $trimmed . " on Google\">Click here</a> to try the
search on google</p>";
}

// next determine if s has been passed to script, if not use ZERO (0) to Limit the output
if (empty($s)) {
$s=0;
}

// get results
$query = " limit $s,$limit";
$result = mysql_query($query) or die("Couldn’t execute query");

// display what the person searched for
echo "<p>You searched for: $var </p>";

// begin to show results set
echo "Results: <br/>";
$count = 1 + $s ;

// now you can display the results returned
while ($row= mysql_fetch_array($result)) {
$name = $row['account_name'];
$mtype = $row['maintenance_type'];
$status = $row['ma_status'];
$start = $row['ma_contract_start'];
$end = $row['ma_contract_end'];
$reference = $row['reference_no'];

echo "$count.> $name $mtype $status $start $end $reference <br/>" ;
$count++ ;
}

$currPage = (($s/$limit) + 1);

//break before paging
echo "<br />";

// next we need to do the links to other results
if ($s>=1) {

// bypass PREV link if s is 0
$prevs=($s-$limit);
print " <a href=\"$PHP_SELF?s=$prevs&q=$var\"><<
Prev 10</a>  ";
}

// calculate number of pages needing links
$pages=intval($numrows/$limit);

// $pages now contains int of pages needed unless there is a remainder from division

if ($numrows%$limit) {
// has remainder so add one page
$pages++;
}

// check to see if last page
if (!((($s+$limit)/$limit)==$pages) && $pages!=1) {

// not last page so give NEXT link
$news=$s+$limit;

echo " <a href=\"$PHP_SELF?s=$news&q=$var\">Next 10 >></a>";
}

$a = $s + ($limit) ;
if ($a > $numrows) { $a = $numrows ; }
$b = $s + 1 ;
echo "<p>Showing results $b to $a of $numrows</p>";

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:08:29.560

您已经提到您收到此错误 **"Search Query not found"**。你写的代码清楚地告诉参数'q'没有在url中设置。

```
if(!isset($_GET['q']))
 die('Search Query not found'); 
```

如果这必须工作，您的网址应该是

```
www.example.com?q=some_value 
```

# php - 使用 Ajax、PHP 和 MySQL 填充 HTML 表单

> ID：10528313
> 
> 赞同：0
> 
> 时间：2012-05-10T06:02:31.137
> 
> 标签：php, jquery, mysql, ajax

我正在创建某种形式，它应该在选择框被选中后使用 ajax 填充。我需要您的建议和建议才能更好地做到这一点；

这是我的脚本；

```
`[HTML] AND [AJAX]`

    <script type="text/javascript">
            function showReportWrite(str)
            {
            if (str.length==0)
            { 
            document.getElementById("txtHint").innerHTML="";
            return;
            }
            if (window.XMLHttpRequest)
            {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
            }
            else
            {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
            }
            xmlhttp.onreadystatechange=function()
            {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                document.getElementById("report_write").innerHTML=xmlhttp.responseText;
                }
            }
            xmlhttp.open("GET","gethint.php?q="+str,true);
            xmlhttp.send();
            }
            </script>

<div id="report_write"></div> 
```

`[PHP]`

```
if($form_name == 'form_report1'){
        //action
    }
    if($form_name == 'form_report2'){
        //action
    }
    if($form_name == 'form_report3'){
        //action
    }

    echo '<div id="accordion">';

    echo '<h3><a href="#">Users Details</a></h3>
                <div>
                    <form class="form" name="form_report1">
                        <fieldset>
                        <legend>Client Details:</legend>    
                            <table border="0" cellspacing="10">
                                <tr>
                                    <td><b>Client Name</b></td>
                                    <td><input type="text" name="name" id="name" /></td>
                                </tr>
                                <tr>
                                    <td><b>Date</b></td>
                                    <td><input type="text" name="email" id="email" /> </td>
                                    <td><input type="text" name="email" id="email" /> </td>
                                </tr>
                            </table>
                        </fieldset>    

                        <fieldset>
                        <legend>Candidate Details:</legend>    
                            <table border="0" cellspacing="10">
                                <tr>
                                    <td><b>Name</b></td>
                                    <td><input type="text" name="name" id="name" /></td>
                                </tr>
                                <tr>
                                    <td><b>Date of Birth</b></td>
                                    <td><input type="text" name="email" id="email" /> </td>
                                </tr>
                                <tr>
                                    <td><b>ID or Passport No.</b></td>
                                    <td><input type="text" name="name" id="name" />  </td>
                                </tr>
                                <tr>
                                    <td><b>Country</b></td>
                                    <td></td>
                                </tr>
                                <tr>
                                    <td><b>Address</b></td>
                                    <td><textarea name="text"></textarea></td>
                                </tr>
                                <tr>
                                    <td><b>Contact Details</b></td>
                                    <td><input type="text" name="name" id="name" />  </td>
                                </tr>
                            </table>
                        </fieldset>
                        <input type="submit" value="Update" id="sendbutton" name="sendbutton"/>
                    </form>
                </div>'; 
```

这个想法是这样的，一旦用户选择了选择框，ajax 将根据条件请求 php 文件，该条件`form_report1`将执行一些操作并回显 html 表单。

我想知道是否还有其他一些方法可以做到这一点，一些 API 可能会提升可能会起作用。我需要你作为专家的建议。因为，我没有在网上找到任何其他选项。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:18:47.283

首先，我将使用 jQuery 或 MooTools 进行 ajax 调用。他们为此具有跨浏览器实现，这是您在发布的第一段脚本中大部分时间都在尝试做的事情。

这些框架还使使用事件处理程序变得容易，我在您的选择框中缺少这些处理程序。

您的 PHP 似乎也不完整，`$form_name`变量显然是凭空出现的。是什么决定了这一点？您如何处理通过`GET`ajax 调用发送的参数？此外，你为什么不`POST`-ing你的表格，因为一个表格基本上是为了发布而*存在*的。

因此，如果您想改进，请获取 jQuery 或 MooTools（或其他 javascript 框架，但这是使用最广泛的两个），阅读这些内容，并阅读有关在 PHP 中处理 ajax 调用的内容。网上真的有*很多*这样的东西。

# java - 如何从一行中只读取特定的字节/字符并转到下一行？

> ID：10528315
> 
> 赞同：-1
> 
> 时间：2012-05-10T06:02:43.777
> 
> 标签：java, linux

我在 java 中为 linux 开发了一个自定义任务管理器。我正在将所需内容写入文件并将其显示在 msgbox 上。但我希望单独显示进程名称、PID、会话名称、会话#、tty。为此，我必须从第一列读取几个字节/字符并跳到下一行以读取接下来的几个字节/字符。我该怎么做呢？请帮忙，因为我是java新手。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:18:38.807

你不能。您必须阅读整行并仅处理您感兴趣的部分。

如果我正确理解您要实现的目标，您可以创建一个矩阵，其中每一行是文件中的一行，每一列是一个字段。例如`data[4][PROCESS_NAME]`将是在第 4 行找到的进程名称（如果从 0 计数，则为 5）。当然`PROCESS_NAME`来自一个`final int PROCESS_NAME = 0;`声明。

# windows - 在应用程序启动之前检查目录的 Windows 批处理文件

> ID：10528318
> 
> 赞同：1
> 
> 时间：2012-05-10T06:02:46.923
> 
> 标签：windows, batch-file

如何在启动应用程序之前检查 NTFS 驱动器是否存在。如果它不存在，我想显示一条错误消息。这就是我所拥有的，但我不擅长编写脚本。

**iTunes.bat**

```
IF EXIST g:\
START "C:\Program Files (x86)\itunes" itunes.exe
ELSE
cscript MessageBox.vbs "Plug in the HDD" 
```

**消息框.vbs**

```
Set objArgs = WScript.Arguments
messageText = objArgs(0)
MsgBox messageText 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:15:25.053

我会尝试以下方法：

```
cd g:\
if errorlevel 1 goto fail
START "C:\Program Files (x86)\itunes" itunes.exe
exit

:fail
cscript MessageBox.vbs "Plug in the HDD" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T11:38:56.813

某些支持可移动媒体的驱动器如果您在未准备好时尝试访问它们，则会在窗口中弹出错误消息。如果使用 VOL 命令，您可以消除窗口错误消息并控制发现过程。

```
2>nul vol g: && (
  START "C:\Program Files (x86)\itunes" itunes.exe
) || (
  cscript MessageBox.vbs "Plug in the HDD"
) 
```

# android - 在运行我的项目时安装了另一个应用程序

> ID：10528319
> 
> 赞同：0
> 
> 时间：2012-05-10T06:02:49.653
> 
> 标签：android

我在运行我的应用程序时开发了应用程序，还安装了另一个应用程序**ContactManager 。**

当我删除**ContactManager**应用程序时，我的应用程序将无法运行并给我这两个错误

*   项目“SipChat”缺少所需的 Java 项目：“ContactManager”sipdroid-read-only Build path Build Path Problem
*   在解决构建路径错误之前无法构建项目

我已经清理了我的项目并签入了我的文件，但我没有找到任何与 ContactManager 相关的导入

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:42:33.837

这意味着您有构建问题，

转到项目属性 -> java Build path -> 你会在 Source 选项中发现一个错误，删除它并尝试清理你的项目，然后再次构建它。

另一件事是您指定的包可能会发生冲突，因此请尝试提供其他包名称。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:02:41.237

我发现该项目附加在项目属性-> java构建路径->项目（构建路径上的必需项目）下。删除该项目。

# c++ - 可能使花括号过载？

> ID：10528320
> 
> 赞同：2
> 
> 时间：2012-05-10T06:02:59.050
> 
> 标签：c++, operators, operator-overloading

我几乎可以肯定不是，但我没有找到一个明确的答案：

是否可以超载花括号？如：

```
class Foo
{
    int i;
    public:
    int operator{}(int _i){return _i+42;};    
};

int main()
{
    Foo f;
    f{2};
    return 0;
} 
```

它从未被提及，既不被允许也不被允许。gcc 4.6 不编译它，但这并不意味着标准不允许它，对吧？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T06:06:07.517

在 C++ 中，花括号`{}`与`[]`(Array subscripting operator) 或`()`(Function call operator) 不同，因此它们不能被重载。

# grails - Groovy/Grails LinkedHashMap 行为怪异

> ID：10528322
> 
> 赞同：4
> 
> 时间：2012-05-10T06:03:17.613
> 
> 标签：grails, groovy, linkedhashmap

我在 grails 2.0.3 中遇到了来自 LinkedHashMap 的一些令人困惑的行为。在 grails 控制台中运行以下脚本：

```
def m = ["smart-1":[stuff:'asdf']]
println m.getClass()

def p = [id:1]
println m."smart-$p.id"
println m["smart-$p.id"]
println m.get("smart-$p.id")

println m.'smart-1'
println m['smart-1']
println m.get('smart-1') 
```

给出输出：

```
class java.util.LinkedHashMap
[stuff:asdf]
[stuff:asdf]
null
[stuff:asdf]
[stuff:asdf]
[stuff:asdf] 
```

在集成测试中，我看到了相反的行为——我只能使用`m.get(GStringImpl)`（相反 `m.get(String)`）获取 HashMap 的内容。

这种行为是预期的还是已知的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-10T06:21:06.087

第一：不要在你的 hashmap 键中使用 GStrings。曾经。您在检索项目时几乎总是会遇到问题，因为[GString*不是*字符串](http://groovy.codehaus.org/Strings+and+GString)（该页面上的红色框），并且没有相同的哈希值。相反，请使用以下选项之一：

```
def key = 'key'
['key': value]
[(key): value]
[("some $key".toString()): value] 
```

这可确保您在使用字符串时始终获得结果。（因此，对于查找，也始终使用字符串。）

我不是 100% 确定你为什么会看到奇怪的行为，但我有一个可靠的猜测。该`get()`方法是 Java 方法，而数组样式（可能还有属性样式）查找是使用`getAt()`Groovy (GDK) 方法实现的。我的猜测是 Groovy 方法知道 GStrings，并默默地处理转换以确保您不会被绊倒。

最简单的解决方案是始终使用`getAt()`，而不是`get`：

```
def m = ['smart-1':[stuff:'asdf']]
println m.getClass()

def p = [id:1]
println m."smart-$p.id"
println m["smart-$p.id"]
println m.getAt("smart-$p.id")

println m.'smart-1'
println m['smart-1']
println m.getAt('smart-1') 
```

哪个工作正常。

更好的解决方案是确保在查找值时使用字符串，如下所示：

```
println m.get("smart-$p.id".toString()) 
```

这也有效。我比较喜欢这个方法，因为直接调用方法的时候，更清楚你的key是String。在使用数组样式或属性样式访问器时，我仍然会使用普通的 GString，因为那是标准的 Groovy 语法。

* * *

> 在集成测试中，我看到了相反的行为——我只能使用 m.get(GStringImpl)（而不是 m.get(String)）来获取 HashMap 的内容。

这很可能是因为您在哈希图中的键是 GString。

如果 GString 没有任何变量，Groovy 编译器会默默地将其转换为 String 字面量（性能更好），这就是为什么上面的示例实际上使用 String 作为键，但查找使用的是 GString。

例如

```
"Hello $name" -> GString('Hello $name')
"Hello Bob"   -> 'Hello Bob' 
```

* * *

最后的想法：只要你在 groovy 中，就不要使用`get()`，因为 Groovy 提供了更简洁`[]`和属性的语法。

# ruby-on-rails - 为什么将表单构建器设置为“只读”不起作用？

> ID：10528323
> 
> 赞同：0
> 
> 时间：2012-05-10T06:03:28.253
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

Rails Noob 在这里。

我的 _form.html.erb 中有以下代码：

```
 <%= f.time_select :slotTime,
  { :readonly => true, :ampm => true, :minute_step => 30} %> 
```

当我在我的网络浏览器中查看该页面时，时间选择器下拉菜单未被禁用。我对其他 text_fields 使用了类似的代码，它可以工作。你知道为什么这可能行不通吗？

我努力了：

```
:readonly => true 
```

和

```
:readonly => "readonly" 
```

正如其他问题所建议的那样。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:23:36.793

您希望`:readonly`最终成为 HTML 属性，并使其成为 HTML 选项；[HTML 选项进入第二个哈希](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_select)，所以我认为你想要这个：

```
<%= f.time_select :slotTime,
  { :ampm => true, :minute_step => 30},
  { :readonly => true }
%> 
```

# android - Android 平板电脑开发在 ICS 上是否容易完成？

> ID：10528329
> 
> 赞同：0
> 
> 时间：2012-05-10T06:04:19.217
> 
> 标签：android, android-3.0-honeycomb, android-4.0-ice-cream-sandwich, backwards-compatibility

我未来的雇主一直告诉我要确保我有一个 Honeycomb 平板电脑来开发一个“Mag+”平板电脑杂志——在网站上它说，“发布到 iPad 和 Android Honeycomb 平板电脑”，这可能只是没有更新。

我的雇主对 Android 一无所知（他是 iOS 专家），我只是想知道我是否要购买新的东芝 Excite 或带有 ICS 的库存产品，如果它向后兼容并且可以按需要工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:16:39.517

由于很难获得库存 HC 平板电脑，我建议您只在 ICS 平板电脑上进行大部分测试和开发。

在您的项目设置中，确保您选择 Android 3.0 配置文件，并将 SDK 目标设置为 11。这（几乎）可以保证您没有使用任何仅在 ICS 中可用的功能，并且在硬件 ICS 设备中进行大部分测试，一次如果您准备好发布，您可以使用 3.0 模拟器来帮助确保它正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:21:06.007

Android上的兼容性主要取决于以下几个因素

1.  隶属于 Google - Google 认证的设备（带有 Play 商店的设备）具有官方的 Google Android 代码库，并且 Google 通常会保留所有功能 - 因此，如果您使用其功能开发蜂窝应用程序，它通常应该在 ICS 上运行。但反过来可能不正确 - ICS 是 Android 的较新的高级版本，可能具有 Honeycomb 不支持的新功能和软件包。许多设备制造商定制了 Android 代码库并拥有自己的 Android 操作系统。确保此类设备上的任何类型的兼容性都是非常冒险的。

2.  调用私有 API - 私有 API 有时不能保证支持所有风格的 Android - 所以当你构建时，请确保你了解它们是如何与不同风格一起工作的。

最好的做法是按照 Xandy 的建议 - 但这里的缺点是您可能会为 Honeycomb 构建最好的应用程序，但不是为 ICS 构建可能的最佳应用程序（因为您没有为该平板电脑使用新功能）

# android - 在 Windows 上使用 Ant for Android 将新构建文件输出到新版本号文件夹

> ID：10528330
> 
> 赞同：1
> 
> 时间：2012-05-10T06:04:21.090
> 
> 标签：android, ant, build

我正在使用 Ant 构建我的 Android 项目。将 Android 项目签入到 Tortoise SVN。现在，当我创建构建时，我希望将 apk 文件理想地生成到 Windows 上的不同文件夹中，说明构建的版本号。例如，在第一次构建（ant release）时，我想拥有文件夹 bin/1.0/sample.apk 和下一个 bin/2.0/sample.apk 所以我不能维护不同的版本。理想情况下，版本号应该是版本号清单（对吗？）。如何才能做到这一点 ？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T06:46:35.253

您可以在项目中有一个 custom_rules.xml 文件，其中包含将您的 apk 复制到`-post-build`目标中所需文件夹的语句。您可以使用该[`copy`](http://ant.apache.org/manual/Tasks/copy.html)任务来处理它。

要从清单中检索版本信息，请在 SO 上遵循[此答案。](https://stackoverflow.com/a/5271349/1321873)

custom_rules.xml 的示例是：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="custom_rules">
    <xmlproperty file="AndroidManifest.xml" prefix="mymanifest" collapseAttributes="true"/>
    <property name="build.dir" value="bin/${mymanifest.manifest.android:versionName}/" />   
    <target name="-post-build">
        <echo>Version is ${mymanifest.manifest.android:versionName}</echo>
        <copy toDir="${build.dir}" >
            <fileset file="${out.final.file}" />
        </copy>
    </target>
</project> 
```

注意：目前，apk 被复制到“bin”文件夹的子文件夹中。您必须考虑另一个目录，因为每次*清理*操作都会删除“bin”文件夹。

# networking - 电网能源效率模拟

> ID：10528334
> 
> 赞同：2
> 
> 时间：2012-05-10T06:04:47.753
> 
> 标签：networking, simulation, simulator, networkstream, energy

我正计划通过数据流在网格网络中进行能源效率的研究生项目。我的计划是模拟数据的移动并计算网络中的能耗。在开始任何编码之前，我想选择一个支持大规模网络数据流和能源问题的模拟工具。我正在考虑使用 ns2 或 GridSim。但在选择一个之前，我想知道我可以使用的任何其他模拟器。支持大规模数据密集型网络的能源问题和数据流的最佳模拟工具是什么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-23T22:39:36.420

我相信 Gridsim 提供了更好的功能。Gridsim 包包含一些关于如何使用 GridSim 工具包的示例。通过这些示例，然后您可以根据您打算做的工作来决定它是否适合您。您可以设计一个非常大的网络，用于发送和接收 gridlet 和 datagridlet，分别用于任何资源（追加、删除、添加等）的作业调度和文件操作。以下是 Gridsim 示例：

gridsim/example01：展示如何用三台机器创建一个网格资源。

gridsim/example02：展示如何创建一个或多个 Grid 用户。一个 Grid 用户包含一个或多个 Gridlet。因此，此示例还展示了如何使用和不使用 GridSimRandom 类来创建 Gridlet。

gridsim/example03：显示两个 GridSim 实体如何相互交互。

gridsim/example04：显示网格用户如何将其 Gridlet 或任务提交给一个网格资源实体。

gridsim/example05：显示网格用户如何将其 Gridlet 或任务提交给许多网格资源实体。

gridsim/example06：显示一个或多个网格用户如何将其 Gridlet 或任务提交给许多网格资源实体。

gridsim/example07：展示如何迁移 Gridlet 和其他东西，例如取消/暂停/恢复。

gridsim/example08：展示了如何制作一个新的简单的网格资源调度器。

gridsim/example09：展示如何创建新的 GridResource 和 GridInformationService 实体。

gridsim/example10：展示如何使用高级预订功能。

gridsim/regionalGIS：展示如何在网络拓扑中创建多个区域 GridInformationService (GIS) 实体。

拍卖：展示了一些如何使用 GridSim 的拍卖扩展的示例。

dataGrid：展示了一些如何使用 GridSim 的 datagrid 扩展的示例。

网络：展示了如何使用 GridSim 的网络扩展的几个示例。

ResFailure：展示如何使用GridSim的资源失败。

WorkloadTrace：展示了一些如何在 GridSim 中使用文件中的工作负载跟踪的示例。

并行：说明如何对处理并行作业的集群/超级计算机进行建模。要运行大多数示例，您需要告知工作负载文件的路径，该文件包含有关提交到集群的作业的信息。例如，为了在 Linux 上运行 EASY 回填示例，您应该使用：

```
java -cp $GRIDSIM/jars/gridsim.jar:. \
        parallel.agressive.ExampleEASY01 parallel/sdsc_blue_01.txt 
```

parallel/util：展示了如何在 GridSim 中为并行作业使用两种不同的工作负载模型。这些工作负载如下： 1\. Lublin 模型：超级计算机的工作负载 2\. DAS2 模型：多集群的工作负载

fta：展示了如何使用故障跟踪存档 (FTA) 来模拟资源故障。提供的包读取故障跟踪的选项卡版本并生成事件列表，显示网格资源中每台机器的可用性/不可用性模式。有关跟踪的更多信息，请参见 FTA 网站：http: [//fta.inria.fr](http://fta.inria.fr)。要运行该示例，您应该使用：

```
java -cp $GRIDSIM/jars/gridsim.jar:. fta.FTAExample01 \
            $GRIDSIM/examples/fta/workload_bot.txt  $GRIDSIM/examples/fta/fta_tab 
```

# dll - TestFlight.dll 错误

> ID：10528335
> 
> 赞同：1
> 
> 时间：2012-05-10T06:04:52.933
> 
> 标签：dll, xamarin.ios, testflight

我遇到了 TestFlight.dll 的问题，并将其绑定到 Monotouch。我已经将 .dll 加载到我的引用中，并将标志添加到其他构建参数中

> -gcc_flags "-L${ProjectDir} -llibTestflight.a -force_load {ProjectDir}/libTestflight.a"

但是在编译时我得到了这个错误：

> ld：找不到文件：/var/folders/z9/sbglbns52gb75xy5c41ck1s40000gn/T/tmp1b28d639.tmp/libTestFlight.a collect2：ld返回1退出状态
> 
> 错误 MT5201：本机链接失败。请查看提供给 gcc 的用户标志：....

非常感谢;）

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T15:37:25.850

如果您`TestFlight.dll`是最近的，则应该使用该`[LinkWith]`属性进行编译。

这意味着您不必提供`gcc_flags`- 工具应该从程序集中提取它们并自动执行此操作（就像`libTestlight.a`从 .dll 中提取一样）。

如果不添加就编译会发生什么`gcc_flags`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:16:22.770

你最后有一个错字，缺少$：

-gcc_flags "-L${ProjectDir} -llibTestflight.a -force_load **$** {ProjectDir}/libTestflight.a"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:36:04.633

我已经解决了问题。。

我不完全知道这个问题，但我重新创建了 TestFlight.dll 并使用了标志：

```
-nosymbolstrip -nostrip -cxx -gcc_flags "-lgcc_eh -L${ProjectDir} -ltestflight -ObjC" 
```

@poupou：没有 gcc_flags 我得到了同样的错误信息。我认为错误是由 TestFlight.dll 引发的

尽管如此，还是要感谢你们俩；）

# r - ggplot2：如何以倒数比例绘制

> ID：10528338
> 
> 赞同：2
> 
> 时间：2012-05-10T06:05:11.357
> 
> 标签：r, ggplot2

我想使用 ggplot 创建散点图，其中 y 缩放为`1/y`（我的 y 都是正数），但标有`y`. 我怎样才能做到这一点？

我试图用绘图`+ scale_y_continuous(trans='recip')`但得到以下错误：

> 获取错误（as.character（FUN），模式=“功能”，环境=环境）：
> 找不到模式“功能”的对象“recip_trans”

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T06:43:31.227

像这样的东西？

```
library(ggplot2)
library(scales)

df = data.frame(x = c(1:46), y = seq(500, 5000, 100))

ggplot(df, aes(x, y)) +
   geom_point() +
    scale_y_continuous(trans = reciprocal_trans(), breaks = c(500, 1000, 2000, 5000)) 
```

![在此处输入图像描述](../Images/f925af435c3f38c4a10ad01d37f376bb.png)

# php - 正则表达式：除拉丁字母外的所有内容

> ID：10528340
> 
> 赞同：1
> 
> 时间：2012-05-10T06:05:26.767
> 
> 标签：php, regex

1）正则表达式怎么说：只有在没有字母的情况下才增加匹配计数器？

我想出了这个：

`"/^[^a-zA-Z]+$/"`

它似乎工作，但我不明白为什么`"/^[^a-zA-Z]+/"`工作时不起作用`"/[^a-zA-Z]+$/"`？

2）这是什么意思？： `"/[a-zA-Z]+/"`我认为这意味着只有当所有元素都在 az 或 AZ 范围内时，匹配计数器才会增加。但测试表明我错了。也试过这个`"/^[a-zA-Z][a-zA-Z]+/"`，但这也给“aa11”一个1。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T06:08:22.917

您发布的唯一正确的正则表达式是`/^[^a-zA-Z]+$/`. 其余的都是错误的。

您需要`^`and`$`将匹配分别[锚定](http://www.regular-expressions.info/anchors.html)到字符串的开头和结尾。

*   `/^[^a-zA-Z]+/`匹配`aaa111`，因为没有字符串结尾的锚点。
*   `/[^a-zA-Z]+$/`匹配`111aaa`，因为没有字符串开头的锚点。
*   `/[a-zA-Z]+/`匹配`111aaa111`，因为没有字符串的开始或结尾锚点。如果字符串中的任何位置有任何字母，则匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:19:47.460

我个人喜欢只用`/^[:alpha:]+$/` 你用一个dilometer 开始正则表达式，它可以是任何东西，所以`#^[:alpha:]+$#`也可以。`^`是输入的开始，`$`也是结束。`+`适用于 1 个或更多的匹配项。[教程/信息](http://weblogtoolscollection.com/regex/regex.php)

# cmd - 将 USB 备份到计算机 - 批处理文件

> ID：10528341
> 
> 赞同：0
> 
> 时间：2012-05-10T06:05:33.833
> 
> 标签：cmd

我正在尝试制作一个批处理文件来备份它所在的 USB 记忆棒，并将 USB 文件的副本放在计算机上。它应该做几件事：

```
>>Make copies of all files and folders on the USB
>>Reside on the top level of the USB stick (not in any folders)
>>Nor should all the other files/folders have to reside in a folder 
(which would be used to just copy that folder)
>>Automatically chooses to overwrite any files that will be replaced 
```

尽管遇到了一些问题，但我尝试使用 XCOPY 执行此操作。首先，我不确定如何让批处理文件从驱动器 x 复制所有文件。USB 可以插入计算机并列为驱动器 G、H、E、X、Y、Z 等等。所以我不能只做

```
XCOPY "G:" "C:\Users\Backup" (usually I add /E and /I parameters) 
```

~~这种方法的第二个问题是，我认为没有任何参数可以让您选择自动“全部覆盖”。它曾经存在，但我认为只有在 Win 2000 中。~~
我对CMD不是很了解，我只是偶尔用它来制作其他备份批处理文件，所以我希望这里有人知道克服这些障碍的方法。
谢谢你的帮助，
AJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:08:22.150

将 /Y 与 xcopy 一起使用

> /Y 禁止提示确认您要覆盖现有的目标文件。

键入`xcopy /?`以查看所有可用的开关

**编辑：**这是讨论[查找 USB 驱动器号](http://social.technet.microsoft.com/Forums/en/ITCG/thread/bc64aef0-e4c0-43fb-ad20-49951f3abde4)的线程。试一试，可能会有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-29T16:22:29.690

我在我的博客上对驻留在我所有笔式驱动器根目录中的备份批处理文件有详细说明：[http ://www.scotthelme.co.uk/blog/backing-up-your-usb-drives/](http://www.scotthelme.co.uk/blog/backing-up-your-usb-drives/)

让我知道它是否有帮助。

# python - Python线程'虽然'没有表现

> ID：10528351
> 
> 赞同：1
> 
> 时间：2012-05-10T06:06:54.523
> 
> 标签：python, multithreading, variables, increment

好的。所以我试图让 2 个线程运行并增加一个值，以便它知道何时停止。我有点迷路了，因为我是 Python 新手，对我来说一切都很好..

```
import threading;
import socket;
import time;

count = 0;

class inp(threading.Thread):
    def run(self):
        while count < 11:
            time.sleep(0.5);
            print("Thread 1!");
            count += 1;

class recv_oup(threading.Thread):
    def run(self):
        while count < 31:
            time.sleep(0.5);
            print("Thread 2!");
            count += 1;

inp().start();
recv_oup().start(); 
```

而且错误很长...

```
Exception in thread Thread-1:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "core.py", line 9, in run
    while count < 11:
UnboundLocalError: local variable 'count' referenced before assignment

Exception in thread Thread-2:
Traceback (most recent call last):
  File "/usr/lib/python2.7/threading.py", line 551, in __bootstrap_inner
    self.run()
  File "core.py", line 16, in run
    while count < 31:
UnboundLocalError: local variable 'count' referenced before assignment 
```

我不知道发生了什么。正如我所说，Python 新手，所以这对我来说都是胡言乱语。任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T06:09:39.903

在 Python 中，如果要修改全局变量，需要使用`global`关键字：

```
class inp(threading.Thread):
    def run(self):
        global count
        while count < 11:
            time.sleep(0.5)
            print("Thread 1!")
            count += 1 
```

否则，Python 会将`count`其视为局部变量并优化对它的访问。这样，*本地* `count`尚未在 while 循环中定义。

另外，去掉分号，Python 不需要它们！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T06:10:01.553

您必须声明您打算使用全局计数，而不是创建新的局部变量：添加`global count`到两个线程中的运行方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T06:10:29.183

由于您正在修改 count 的值，因此您需要将其声明为全局

```
class inp(threading.Thread):
    def run(self):
        global count
        while count < 11:
            time.sleep(0.5)
            print("Thread 1!")
            count += 1

class recv_oup(threading.Thread):
    def run(self):
        global count
        while count < 31:
            time.sleep(0.5)
            print("Thread 2!")
            count += 1 
```

# wix - 使用 Click Once Web 应用程序自我或自动更新

> ID：10528352
> 
> 赞同：0
> 
> 时间：2012-05-10T06:07:16.050
> 
> 标签：wix, clickonce, auto-update, self-updating

我们使用 ASP.NET MVC 编写了 Web 应用程序，该应用程序将托管在我们客户的内部或 Intranet Web 服务器中。

我们没问题，如果客户第一次使用 Wix/Windows 安装程序安装我们的应用程序。在这里，我们对为我们的应用程序提供自我更新或自动更新功能更加好奇。

任何想法，如果我们可以使用 Click-Once。（我们知道 google 的 OMAHA ( [http://code.google.com/p/omaha/](http://code.google.com/p/omaha/) )，但这需要一个新的学习曲线。）

在某些地方，对此的回答是否定的（[Windows Installer 是否提供更新应用程序的方法？](https://stackoverflow.com/questions/2618401/does-windows-installer-provide-a-method-to-update-applications)）。

但我觉得我们应该能够做到这一点，将 Wix 1st Time Installer + ClickOnce 混合用于未来的更新。因为，我们的 Web 应用程序只是与 IIS 网站配置映射的文件夹中的几个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T14:21:05.847

不，你不能这样做。ClickOnce 将文件安装到当前用户配置文件中的混淆文件夹中。您不能让它更新整个文件系统中的文件。

您可以编写一个完全独立的应用程序，该应用程序使用 ClickOnce 部署并使用计划任务启动。该应用程序可以下载更新的文件并将它们复制到您的 IIS 文件夹中。

简而言之，这不是 ClickOnce 的用途，但您可能可以拼凑一些可行的东西。

# java - 我可以从另一个数据库复制一个数据库中的表吗？

> ID：10528354
> 
> 赞同：0
> 
> 时间：2012-05-10T06:07:42.947
> 
> 标签：java, database

我需要将一个表从数据库 A 复制到数据库 B。挑战是我正在使用 struts 并且必须用 Java 编写此代码。我尝试使用复制命令创建运行时进程。但我有一个例外。我使用了以下命令：

```
Runtime Rt;
            Process Prc = null;
            String cmd = "";
            cmd="COPY FROM  id/pass@servicename1 to id/pass@servicename2 CREATE TABLE_C (*) USING (SELECT * FROM PROCESS_LOG )";

            Rt = Runtime.getRuntime();
            Prc = Rt.exec(cmd); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:15:05.497

我想到了。我使用了这个命令，它工作正常。

```
cmd= "sqlplus id/pass@servicename @d:/TEST.SQL"; 
```

在 TEST.SQL 中，我编写了复制命令。

# mongodb - mongofiles：--collection 选项的用法是什么？

> ID：10528355
> 
> 赞同：0
> 
> 时间：2012-05-10T06:07:48.813
> 
> 标签：mongodb, pymongo

我可以使用“-d”选项将文件放入数据库。

```
mongofiles  -d test put file.txt 
```

它按预期工作。我还发现有收集选项。这个选项有什么用以及如何使用它？我无法从手册页或其帮助中获得更多信息。

编辑：从这里[http://www.mongodb.org/display/DOCS/GridFS+Specification](http://www.mongodb.org/display/DOCS/GridFS+Specification)。我相信将创建两个名为“files”和“chunk”的集合，其中包含文件的元数据及其实际数据。当我只是单独使用 -d 选项时。我可以在“测试”数据库下看到这些集合。所以现在，当我使用选项 -c 时，该集合会存储什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:36:20.077

根据[http://api.mongodb.org/python/current/api/gridfs/index.html#gridfs.GridFS](http://api.mongodb.org/python/current/api/gridfs/index.html#gridfs.GridFS) `collection`指定要使用的根集合。

我相信预期的行为完全是内部的，即存储文件的默认集合是`'fs'`. 您可以将其替换为具有自定义集合名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-02-18T10:23:06.067

请参阅[在流星应用程序中使用带有 GridFS 的 mongofiles - 堆栈溢出](https://stackoverflow.com/questions/30172205/using-mongofiles-with-gridfs-in-a-meteor-app)，该`collection`选项实际上是`prefix`->`mongofiles --help`显示此：

```
--prefix=<prefix>     GridFS prefix to use (default is 'fs') (default: fs) 
```

我的例子：

```
mongofiles -d storybook --prefix audio -t audio/mpeg -l=5bd7bd3abfaa44fe2c73754d.mp3 put 5bd7bd3abfaa44fe2c73754d.mp3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-16T14:01:13.833

似乎在 mongo 的新版本中**只使用 fs 集合来存储文件**。我找不到[技术原因](https://jira.mongodb.org/browse/TOOLS-97)。

[Mike O'Brien](https://www.mongodb.com/profile/mike-obrien)建议使用前缀，而不是将文件分成集合 。例如：

```
mongofiles put /tmp/testfile --prefix "customer1" 
```

# javascript - JavaScript 中递归的效果

> ID：10528357
> 
> 赞同：0
> 
> 时间：2012-05-10T06:07:55.380
> 
> 标签：javascript, recursion, stack-overflow

以下代码段演示了使用 JavaScript 的递归调用。

```
function timedCount()
{
document.getElementById('txt').value=c;
c=c+1;
t=setTimeout("timedCount()",1000);
} 
```

来源来自[这里](http://www.w3schools.com/js/js_timing.asp)。

我的问题：这不会导致堆栈堆积并随后导致堆栈溢出吗？我知道这肯定会在 Pascal 和 C/C++ 等语言中崩溃。

感谢您对此的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:09:14.413

这不是真正的递归，因此不会创建深度调用堆栈。

* * *

但是，您**永远不**应该将字符串传递给`setInterval()`or `setTimeout()`。这样做和使用一样糟糕，`eval()`一旦你使用变量，它就会导致潜在的不可读和不安全的代码，因为你需要将它们插入字符串而不是传递实际变量。

正确的解决方案是`setTimeout(function() { /* your code *) }, msecs);`。这同样适用于`setInterval()`。如果只想调用单个函数不带任何参数，也可以直接传递函数名：（`setTimeout(someFunction, msecs);`注意函数名后面**没有）** `()`

所以在你的情况下，使用`t = setTimeout(timedCount, 1000);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:38:52.180

那不是递归，因为您的`timedCount()`函数不是在调用自己，而是在调用`setTimeout()`以要求 JS在指定的延迟后`timeCount()` *异步调用。*后面的行`setTimeout()`- 在这种情况下只是函数的结尾 - 将立即执行，直到超时之后它才会暂停或休眠。因此，当您`timedCount()`从代码中的其他位置调用时，您的代码`timedCount()`将完成执行并且控制权将返回到代码的其他部分，然后稍后将通过超时再次调用该函数，这再次导致另一个函数被安排在以后执行（并且以此类推，无止境）。在任何时候都`timedCount()`不会像实际递归那样等待另一个完成执行。

如果你这样做：

```
function timedCount() {
   // other code here

   timedCount();
} 
```

...那么*这*将是递归并且确实会崩溃，因为没有设置条件来停止递归。如果您添加一些控制逻辑，以便递归停止“合理”数量的深度，那就没问题了。

# php - codeigniter 有哪些可用于支付方式的库？

> ID：10528358
> 
> 赞同：1
> 
> 时间：2012-05-10T06:08:09.310
> 
> 标签：php, jquery, codeigniter, payment

我在一个社交网站上工作。我必须在其中开发支付模块。它有一个订阅按钮。用户可以通过付款订阅我们的附加功能。点击订阅按钮后，它会询问用户借记卡/信用卡、卡号、到期日等。

我能做到？我在哪里可以得到帮助？向我推荐我正在使用 Code-Igniter (PHP) 框架的任何 API/库。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:11:22.147

Github 上有一个项目叫做`PHP Payments`它可以很容易地与 codeigniter 集成

看看这个 [https://github.com/broncha/codeigniter-payments](https://github.com/broncha/codeigniter-payments)和

[https://github.com/broncha/PHP-Payments](https://github.com/broncha/PHP-Payments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T09:12:36.063

试试这些

[Codeignitor 支付模块](https://bitbucket.org/triplethree/codeigniter-reactor-payment-module)

[基于 PHP-Payments 在 CodeIgniter 中统一支付的 Spark。支持 12+ 支付网关。](https://github.com/calvinfroedge/codeigniter-payments)

[基本信息：codeigniter-payments](http://getsparks.org/packages/codeigniter-payments/versions/HEAD/show)

# c - 将十六进制转换为二进制

> ID：10528367
> 
> 赞同：0
> 
> 时间：2012-05-10T06:09:00.233
> 
> 标签：c, binary, hex

```
int hex2bin (int n)
{
  int i,k,mask;
  for(i=16;i>=0;i--)
  {
    mask = 1<<i;
    k = n&mask;
    k==0?printf("0"):printf("1");
  }
  return 0;
} 
```

我需要它来处理我作为输入提供的任何十六进制。含义`hex2bin(0x101)`和`hex2bin(0x04)`应该打印出它们各自的二进制数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:57:58.330

我不明白为什么 for 循环是从 16 到 0。如果 int 在您的操作系统中是 16 位，您应该将 for 循环从 15 设置为 0，否则如果 int 在您的操作系统中是 32 位，您应该设置for 循环从 31 到 0。所以代码是：

```
int hex2bin (int n)
{
  int i,k,mask;
  for(i=sizeof(int)*8-1;i>=0;i--)
  {
     mask = 1<<i;
     k = n&mask;
     k==0?printf("0"):printf("1");
  }
 return 0;
} 
```

如果要显示任何输入（例如“0x10”、“0x4”），可以声明如下函数：

```
int hex2bin (const char *str)
{
char *p;
for(p=str+2;*p;p++)
{
    int n;
    if(*p>='0'&&*p<='9')
    {
        n=*p-'0';
    }
    else
    {
        n=*p-'a'+10;
    }
    int i,k,mask;
    for(i=3;i>=0;i--)
    {
        mask=1<<i;
        k=n&mask;
        k==0?printf("0"):printf("1");
    }

}
return 0;
} 
```

然后，调用 hex2bin("0x101") 将得到 0x101 的确切二进制代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:13:21.587

我已经忘记了其中的大部分，但尝试使用*unsigned*而不是*int*

# c# - C#在特殊端口上自动登录网站

> ID：10528378
> 
> 赞同：0
> 
> 时间：2012-05-10T06:10:29.173
> 
> 标签：c#, login, httpwebrequest, httpwebresponse, autologin

我经常使用一个网站，所以我正在创建一个工具来帮助我使用它并轻松地从中检索数据。我处理的网站是使用 JSP 构建的。

我正在构建的工具将使用 C# 下的 WPF 完成。所以我需要做（但不知道如何）是连接到网站（HttpWebRequest 或类似的东西），登录（用户名和密码以及其他一些参数通过 POST 方法发送）以及请求标头信息，如推荐人等等...

我希望有人指导我如何创建一个连接到网站的应用程序，登录然后导航到两个或三个不同的页面，然后检索一个文件或只是复制 HTML 代码，其余的我会处理。

提前致谢 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T20:41:14.367

从我们在评论中对您的问题的小讨论中，我将您的问题解释为与从 .NET 中进行 Web 请求时如何设置身份验证和 http 动词有关，而不是与安全性相关的问题。对不起，如果我误解了你。

你提到`HttpWebRequest`这也是我要开始的地方。

您在以下位置使用静态`Create`方法创建实例`WebRequest`：

```
 var request = (HttpWebRequest)WebRequest.Create('https://some.url'); 
```

然后，您可以使用任一分配标题

```
 request.Headers[HttpRequestHeader.Authorization] = 'your auth token'; 
```

某些值（如 Date 标头）无法使用上述方法设置，因为它具有专用属性。请参阅 msdn 上的[HttpWebRequest 描述](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)。

要更改动词/方法，您可以简单地使用`Method`string 属性。

使用`GetRequestBody`“GetResponseBody Stream”来编写请求和读取响应正文`methods. They return respectively a write-only/read-only`。这些也存在于异步样式变体中，如果您正在执行多页面加载，这是首选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:19:55.773

我想你基本上回答了你自己的问题。使用 C# 中的 Web 连接库，登录并使用 GetResponse() 提取 HTML 文本。

# jquery - Jquery AJAX 效果

> ID：10528380
> 
> 赞同：0
> 
> 时间：2012-05-10T06:10:38.497
> 
> 标签：jquery, ajax, loader, effect

我正在尝试使用 ajax 加载页面，并且它可以正常工作，但我想添加 fadeIn fadeOut 效果和加载器 gif 动画。

谁能帮我做到这一点。我正在使用下面的代码。

```
$(document).ready(function(){
    // load index page when the page loads
    $("#main").load("content.php");

    $("#home").click(function(){
    // load home page on click
        $("#main").load("content.php");
    });
    $("#mediakit").click(function(){
    // load about page on click
        $("#main").load("mm-media-kit.php");
    });
}); 
```

我对 jquery 没有经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:14:34.347

尝试这样的事情：

**HTML：**

```
<div id='main'></div>
<div id='mainloading'><img src='loading.gif'></div> 
```

**jQuery：**

```
$("#main").fadeOut().load("content.php", function() {
    $(this).fadeIn();
    $('#mainloading').hide();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T06:31:36.420

在这种情况下，您可以使用[http://api.jquery.com/ajaxStart/](http://api.jquery.com/ajaxStart/)和[http://api.jquery.com/ajaxStop/](http://api.jquery.com/ajaxStop/)来显示和隐藏加载图像。像这样

我假设您`loading`在页面某处有一个加载图像 div，其 id 最初是隐藏的。然后你可以像这样使用上面的这两个函数显示加载图像

```
//show the loader at the start of ajax request
$("#loading").ajaxStart(function(){
   $(this).show();
 });
//hide the loader when ajax request Completes
$("#loading").ajaxComplete(function(){
   $(this).hide();
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:14:47.640

您可以在 opacity CSS 属性上使用**动画**来根据需要淡入/淡出。（在加载之前将不透明度设置为零，然后在加载回调时动画回 1。）

```
$("#main").css('opacity', 0).load("mm-media-kit.php", function() {
    $("#main").animate({ opacity: 1}, 'slow');
}); 
```

函数**fadeIn** / **fadeOut**基本上是上述的简写，但我想你真的不想在这种情况下淡出。

# java - 在接口类型列表中对实例进行排序时如何在 Java 中使用比较器？

> ID：10528383
> 
> 赞同：0
> 
> 时间：2012-05-10T06:10:49.950
> 
> 标签：java, generics, comparison

我有一个接口（比如Employee），它有2个实现它的类（比如Assistant和Manager）。我还有一个接口，它有一个返回第一个接口类型列表的方法（比如返回 List 的 EmployeeLogic 接口。有两个类实现了这个接口（比如 AssistantLogic 和 ManagerLogic）。在这两个类中，List 只包含助手（在 AssitantLogic 中）并且只有 Manager（在 ManagerLogic 中）。

问题是我想根据仅存在于子类中的方法对这两个列表进行排序。我该如何编写这样的比较器？

可能代码更容易理解：

```
public interface Employee {
    public int employeeMethod();
}

public class Manager implements Employee {
    public int employeeMehod(){//[...]}
    public int managerMethod(){//[...]}
}

public class Assistant implements Employee {
    public int employeeMehod(){//[...]}
    public String assistantMehod(){//[...]}
}

public interface EmployeeLogic() {
    public List<Employee> getEmployees();
}

public class ManagerLogic implements EmployeeLogic {
    public List<Employee> getEmployees() {

        List<Employee> employees = [...] //or List<? extends Employee> ?
        [...]
        Collections.sort(employees, new Comparator<Manager>() {
            @Override
            public int compare(Manager o1, Manager o2) {
                return o1.managerMethod().compareTo(o2.managerMethod());
            }
        });
        return employees;
    }

}

public class AssistantLogic implements EmployeeLogic {
    public List<Employee> getEmployees() {

        List<Employee> employees = [...] //or List<? extends Employee> ?
        [...]
        Collections.sort(employees, new Comparator<Assistant>() {
            @Override
            public int compare(Assistant o1, Assistant o2) {
                return o1.assistantMehod().compareTo(o2.assistantMehod());
            }
        });
    return employees;
    }
} 
```

有没有办法写这样一个比较器？

我知道一种解决方法（见下文），但上述事情是否可能只用一个列表？

```
public class ManagerLogic implements EmployeeLogic {
        public List<Employee> getEmployees() {

            List<Manager> managers = new ArrayList<Manager>()
            [...]
            Collections.sort(managers, new Comparator<Manager>() {
                @Override
                public int compare(Manager o1, Manager o2) {
                    return o1.managerMethod().compareTo(o2.managerMethod());
                }
            });
            List<Employee> employees = new ArrayList<Employee>();
            employees.addAll(managers);
            return employees;
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:17:13.387

如果我理解正确，您的问题不在于尝试对`Assistant`s 和`Manager`s 的混合进行排序，而是关于您只能对`Assistant`s 列表或 s列表进行排序`Manager`，但您想返回一个`Employee`s。

在这种情况下，您可以做的一件事是`getEmployees()`返回 a `List<? extends Employee>`。如果这不是一个选项，并且您不打算修改返回的列表，则可以执行`return Collections.unmodifiableList(managers)`. 如果您希望返回的列表是可修改的，那么您的解决方案是最干净的方法。

# javascript - Raphael JS Pie：旋转切片

> ID：10528397
> 
> 赞同：2
> 
> 时间：2012-05-10T06:12:33.067
> 
> 标签：javascript, svg, raphael, pie-chart, slice

我试图创建一种带有 4 个切片的圆形旋转木马，通过单击一个切片，它会扩大到大约 2/3 的馅饼，显示它的内容（另一个切片也会同样缩小）基本上我从 raphael“成长馅饼”开始演示[http://raphaeljs.com/growth-pie.html](http://raphaeljs.com/growing-pie.html) 并进行了一些修改以获得这种行为。

但是我坚持最后一步，当单击并展开切片时，它应该旋转并放置在顶部（偏移角度为 0°）...我想我需要知道动画中每个切片的确切角度() 函数和任意更改它，但我不知道该怎么做。

```
function animate(ms) {
var start = 150,
    val;
for (i = 0; i <= 3; i++) {

    val = 360 / total * data[i];

    paths[i].animate({
        segment: [200, 200, 150, start, start += val]
    }, ms || 1500, "bounce");
    paths[i].angle = start - val / 2;
}

rotateCircle(); 
```

}

这里[http://jsfiddle.net/ExFCb/32/](http://jsfiddle.net/ExFCb/32/)有我实际工作的例子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T08:37:51.387

看看更新小提琴[http://jsfiddle.net/ExFCb/72/](http://jsfiddle.net/ExFCb/72/)

基本上你必须`rerotate`在每个周期设置正确的变量。

```
if (i === 0) {
    data = [240, 40, 40, 40];
    rerotate = 0;
} 
```

等等...

# javascript - 未调用 JavaScript 构造函数

> ID：10528399
> 
> 赞同：1
> 
> 时间：2012-05-10T06:12:53.600
> 
> 标签：javascript, inheritance, constructor

我有一个实现继承的功能：

```
inherit = function(base) {
    var child = function() { console.log('Crappy constructor.'); };
    child.prototype = new base;
    child.prototype.constructor = child;
    return child;
} 
```

我以为我可以这样使用它：

```
var NewClass = inherit(BaseClass);
NewClass.prototype.constructor = function() {
    console.log('Awesome constructor.');
} 
```

*但是当我像这样创建NewClass*的新实例时：

```
var instance = new NewClass(); 
```

我收到消息*糟糕的构造函数。*打印到控制台。为什么构造函数不被覆盖？以及如何覆盖它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:18:37.760

你返回`child`，这是一个打印函数`Crappy constructor`。不管怎样，如果你调用那个函数，`Crappy constructor`就会被打印出来。

注意流程：

```
child = function to print 'crappy'
child.prototype.blabla = function to print 'Awesome'
inherit returns child 
```

`NewClass = child`

现在，当你调用 NewClass 时，child 会被调用。

除此之外，我认为您想要 child.constructor.prototype 而不是prototype.constructor。

*编辑：请在*[此处](http://www.crockford.com/javascript/inheritance.html)查看有关 Javascript 继承的更多信息。

# c++ - 用 constexpr 初始化数组？

> ID：10528411
> 
> 赞同：7
> 
> 时间：2012-05-10T06:14:21.070
> 
> 标签：c++, arrays, c++11, constexpr

我想知道是否可以使用 constexpr 函数（使用 C++ 2011）初始化整个数组。在这里，我有一些东西可以说明我想做的事情：

```
template<unsigned int DIM> const unsigned int MyClass<DIM>::_myVar[2][3] = {
{metaFunction(0, 0, DIM), metaFunction(0, 1, DIM), metaFunction(0, 2, DIM)}, 
{metaFunction(1, 0, DIM), metaFunction(1, 1, DIM), metaFunction(1, 2, DIM)}
};

template<unsigned int DIM> inline constexpr unsigned int MyClass<DIM>::metaFunction(const unsigned int k, const unsigned int n, const unsigned int dim)
{
    return (((n < dim) && (k < n)) ? (1<<(n-k)) : (0));
} 
```

有没有办法用 constexpr 初始化 myVar 而无需手动填充数组。如果它存在，给定示例的语法是什么？

为了稍微精确一点，我寻找一种方法来使用单个函数调用来填充 myVar 的所有值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T07:59:42.677

没有看到`MyClass`问题的定义不是很清楚。无论如何，我相信您希望在`MyClass::_myVar`没有代码的情况下进行初始化以迭代地用值填充它`MyClass::metaFunction()`。

您的代码表明这`MyClass::_myVar`是一个静态类成员。在这种情况下，您对成员的初始化是非常好的 C++11。以下程序说明（GCC 4.6.3）：

```
#include <iostream>

/* MyClass Version 1 */
template<unsigned int DIM>
struct MyClass
{
    static constexpr unsigned int metaFunction(
        const unsigned int k, 
        const unsigned int n,
        const unsigned int dim);

    static const unsigned int _myVar[2][3]; 
};

template<unsigned int DIM> inline constexpr 
unsigned int MyClass<DIM>::metaFunction(
    const unsigned int k, 
    const unsigned int n,
    const unsigned int dim)
{
    return (((n < dim) && (k < n)) ? (1<<(n-k)) : (0));
}

template<unsigned int DIM> const unsigned int MyClass<DIM>::_myVar[2][3] = {
    {   metaFunction(0, 0, DIM),
        metaFunction(0, 1, DIM),
        metaFunction(0, 2, DIM)
    }, 
    {   metaFunction(1, 0, DIM),
        metaFunction(1, 1, DIM),
        metaFunction(1, 2, DIM)
    }
};

template<unsigned int DIM> inline constexpr 
unsigned int MyClass<DIM>::metaFunction(
    const unsigned int k, 
    const unsigned int n,
    const unsigned int dim)
{
    return (((n < dim) && (k < n)) ? (1<<(n-k)) : (0));
}

using namespace std;

int main(void)
{
    MyClass<3> mine;
    for (int i = 0; i < 2; ++i) {
        for (int j = 0; j < 3; ++j) {
            cout << mine._myVar[i][j] << endl;
        }
    }
    return 0;
} 
```

这使我倾向于认为它`MyClass::_myVar`不是*静态*成员 - 尽管我不确定为什么这个整数常量数组不是静态的。如果是这种情况，那么您可以使用[C++11 的统一初始化规定](http://en.wikipedia.org/wiki/C%2B%2B11#Uniform_initialization)在默认构造函数中初始化该成员：

```
/* MyClass Version 2 */
template<unsigned int DIM>
struct MyClass
{
    MyClass()
    :   _myVar{
            {   MyClass::metaFunction(0, 0, DIM),
                MyClass::metaFunction(0, 1, DIM),
                MyClass::metaFunction(0, 2, DIM)
            }, 
            {   MyClass::metaFunction(1, 0, DIM),
                MyClass::metaFunction(1, 1, DIM),
                MyClass::metaFunction(1, 2, DIM)
            }
    }{}

    static constexpr unsigned int metaFunction(
        const unsigned int k, 
        const unsigned int n,
        const unsigned int dim);

    const unsigned int _myVar[2][3];
}; 
```

在这两种情况下，编译都不需要`constexpr`属性。`metaFunction`如果`constexpr`被删除，那么`/* MyClass Version 1*/`对 C++03 也有好处。

# php - 在 PHP 中使用 FPDI 在页面上生成多个 pdf

> ID：10528412
> 
> 赞同：0
> 
> 时间：2012-05-10T06:14:25.233
> 
> 标签：php, html, pdf, fpdf, fpdi

我正在尝试显示 pdf，但逐页显示（分隔页）。问题是，一旦我使用 FPDI 生成页面，我有 4 个选项：

1.  下载生成的pdf
2.  将其直接显示到浏览器（流式传输）
3.  生成一个代表 pdf 的字符串
4.  另存为文件

我想做的是采用选项 3，将每个页面生成的每个字符串都放在不同的 div 中。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T05:31:37.293

经过大量研究，我放弃了 FPDI + PHP 解决方案，取而代之的是 PDF.js + turn.js，基于[https://github.com/blasten/turn.js/issues/82](https://github.com/blasten/turn.js/issues/82)

# asp.net-mvc - DbContext - 对象内的列表已处置

> ID：10528414
> 
> 赞同：0
> 
> 时间：2012-05-10T06:14:41.467
> 
> 标签：asp.net-mvc, entity-framework

我有一个“分层”应用程序：

*   演示MVC
*   服务层
*   业务逻辑层 (BLL)
*   数据层

我正在对所有层使用来自 EntityFramework 模型优先方法的实体。我也在使用延迟加载。

例如，我有一个 Employee 实体：

```
[Serializable]
[DataContract]
public class Employee 
{
    [DataMember]
    public string name { get; set; }
    [DataMember]
    public List<Image> images { get; set; }
} 
```

例如，在 DataLayer 中，我有一个 EmployeeDAO，其操作如下：

```
public List<Employee >GetAll()
{
    List<Employee> resultList;

    using (ModelContainer ctx = new ModelContainer()) // DbContext
    {
        resultList = ctx.Employees.All<Employee>().ToList<Employee>();
    }

    return resultList;
} 
```

问题是我在员工内部的图像列表中遇到了一个异常“对象处理”，我不知道为什么。

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:04:01.420

很可能是因为延迟加载。您的`GetAll`方法在加载员工后创建上下文并处理上下文，但延迟加载需要上下文才能保持活动状态。您必须重新设计您的应用程序并在服务层控制上下文生命周期，或者您不能使用延迟加载。

顺便提一句。如果服务层代表远程层（WCF 或任何其他技术），则根本不应该使用延迟加载。

# qt - QListWidget 的自定义多项选择

> ID：10528419
> 
> 赞同：1
> 
> 时间：2012-05-10T06:15:01.477
> 
> 标签：qt, qlistwidget, multipleselection, custom-sections

我有基于拆分器视图的​​ Qt 应用程序：左侧是 QListWidget，其中包含可以选择的文件；所选文件的内容以适当的格式显示在拆分器的右侧。这部分工作正常。

我现在需要添加比较功能：如果在 QListWidget 中选择了一项，则其内容将显示在右侧；如果选择了另一个项目而不是我想显示差异结果。（事情比这要复杂一些，因为并非所有项目都可以区分。）

我想做的是保持单一选择功能完好无损，但也*只*启用CTRL + 鼠标单击以进行第二次选择。我尝试使用 QAbstractItemView::ExtendedSelection ，然后过滤掉 Shift 和鼠标拖动，但这种方法没有运气：虽然我可以使用 keyPressEvent() 捕获 Shift 键，但我无法阻止选择（我希望只删除事件就足够了）；至于拖动，我使用 mouseMoveEvent() 希望在状态更改为 DragSelectingState 时删除事件，但这也不起作用。

然后我考虑坚持单选但在右键单击第二个项目时打开上下文菜单 - 虽然右键单击确实会发出 itemSelectionChanged() 信号，但我还没有弄清楚该怎么做，因为我不知道哪个项目被右键单击。

对任何其他不涉及添加额外 UI 元素的创意建议持开放态度——我不能有任何额外的按钮、组合框等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:12:45.070

仍然没有弄清楚如何将 QListWidget 中的选择限制为一两个，但右键单击第二个项目时获得上下文菜单。

只需将选择模式设置为 QAbstractItemView::SingleSelection，然后重新实现 mousePressEvent() 和 contextMenuEvent()。

```
class MyListView : public QListWidget
{
  Q_OBJECT

  public:
    ListView();
    virtual ~ListView() {}

    /** Add item to the list. 
        @param itemName Item's display name.
        @param itemHandle Value to return if item selected.
    */
    void AddItem(const QString itemName, const quint32 itemHandle);

  private slots:
    void slot_ItemSelectionChanged(void);
    void slot_Option1(void);
    void slot_Option1(void);

  signals:
    void signal_ItemSelectionChanged(const qint32 itemHandle);

  private:
    void mousePressEvent(QMouseEvent* mousePressEvent);
    void contextMenuEvent(QContextMenuEvent* menuEvent);

    QListWidgetItem *m_selectedItem;        ///< Pointer to the currently selected item.
    QListWidgetItem *m_rightClickedItem;    ///< Pointer to right-clicked item in the list.
    QAction* m_menuOption1;                 ///< Menu option 1.
    QAction* m_menuOption2;                 ///< Menu option 2.
    QMenu* m_myListContextMenu;             ///< Menu with all List View menu actions.
};

MyListView::MyListView()
{
  setSelectionMode(QAbstractItemView::SingleSelection);

  // create my context menu with 2 options
  m_menuOption1 = new QAction(tr("option 1"), this);
  m_menuOption1 ->setEnabled(true);

  m_menuOption2 = new QAction(tr("option 2"), this);
  m_menuOption2 ->setEnabled(true);

  m_myListContextMenu = new QMenu(this);
  m_myListContextMenu ->addAction(m_menuOption1);
  m_myListContextMenu ->addAction(m_menuOption2);

  bool allConnected = true;
  // process primary selection
  allConnected &= connect(this, SIGNAL(itemSelectionChanged(void)), this, SLOT(slot_ItemSelectionChanged(void)));
  // process menu option 1
  allConnected &= connect(m_menuOption1, SIGNAL(triggered()), this, SLOT(slot_Option1()));
  // process menu option 2
  allConnected &= connect(m_menuOption2, SIGNAL(triggered()), this, SLOT(slot_Option2()));

  if (!allConnected )
  {
    assert(0);
  }
}

void ListView::slot_ItemSelectionChanged(void)
{
  if (currentItem() != m_selectedItem)
  {
    m_selectedItem = currentItem();
    emit signal_ItemSelectionChanged(m_selectedItem->type());
  }
} // end of method slot_ItemSelectionChanged()

void MyListView::contextMenuEvent(QContextMenuEvent* menuEvent)
{
  m_rightClickedItem = itemAt(menuEvent->pos());

  // do my prep stuff here specific to right-clicked item 
  // in case one of menu options gets selected

  m_listMenu->exec(menuEvent->globalPos());
} // end of method contextMenuEvent()

void MyListView::mousePressEvent(QMouseEvent* mousePressEvent)
{
  // drop right mouse button event as it would otherwise cause a change of selection
  if (!(mousePressEvent->buttons() & Qt::RightButton))
  {
    QListWidget::mousePressEvent(mousePressEvent);
  }
} // end of method mousePressEvent() 
```

# c++ - ctime(x) = ctime(x-600) 为什么？

> ID：10528423
> 
> 赞同：0
> 
> 时间：2012-05-10T06:15:38.103
> 
> 标签：c++, ctime

当我使用“ctime”时，curTime 和 pastTime 得到相同的字符串结果，即使 curTime 和 pastTime 的实际值相差 600 秒。

使用 ctime 时如何获得相同的字符串时间？

谢谢

```
struct _timeb timebuffer;

_ftime(&timebuffer);

const time_t  curTime = (const time_t)timebuffer.time;
const time_t  pastTime = curTime - (const time_t)600;

s.Format("%d  %s\n%d  %s", curTime, ctime(&curTime), pastTime, ctime(&pastTime) );
MessageBox(s); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T06:20:09.100

`ctime`返回一个可以静态分配的字符串。

因此，您的两个调用之一是覆盖另一个生成的字符串。您需要将其拆分为两个打印语句，或将返回值复制（字符串复制）`ctime`到临时文件中。

# c# - 托管网站的设置

> ID：10528424
> 
> 赞同：1
> 
> 时间：2012-05-10T06:15:41.067
> 
> 标签：c#, asp.net, iis

我有一个网站和一个用 asp.net 和 c# 创建的 web 服务。他们工作没有任何问题，我一直在通过部署在 IIS 中使用，但我一直在这样做。现在，我想通过创建一个设置来最大程度地减少步骤数量，该设置将自动在 iis 中添加我的 web 服务和网站，而无需用户这样做。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:18:49.440

Visual Studio 中应该有一个部署功能。实际上，“发布”应该会自动发布网站和网络服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:26:38.990

您可以使用[MSBuild](http://codingcockerel.co.uk/2008/05/18/how-to-publish-a-web-site-with-msbuild/)来自动化您的构建。最重要的是，您可以使用[Albacore](https://github.com/derickbailey/Albacore)。

作为替代方案，您可以使用[Nant](http://nant.sourceforge.net/)。

# php - PHP 自定义会话路径：某些机制会违背我的意愿删除我的会话文件吗？

> ID：10528425
> 
> 赞同：0
> 
> 时间：2012-05-10T06:15:43.147
> 
> 标签：php, session, cron

我已经制作了绝对中继会话文件的 PHP 应用程序，这些会话文件可以保留很长时间（例如，树周、一个月……）。

因为我的 PHP 应用程序将在共享托管环境中运行，所以我将自定义 session_save_path - 目录放入包含所需会话文件的应用程序的根目录中。

我想知道：**是否有任何基于 Linux 系统的 cron 机制，或者我不知道的任何其他机制，如果它们在很长一段时间内未被触及，它们会删除我的会话文件，因为它会错误地假设会话文件是不必要的垃圾？**

它会完全搞砸我的申请。

我很担心，主要是因为我在这里找到了一些答案（http://stackoverflow.com/questions/8693934/how-does-php-know-when-to-delete-a-session），但我没有康复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:21:02.037

我认为您的会话文件可能会被 php 会话垃圾例程删除。

检查这些配置选项并找到有关 php 会话的 gc 的更多信息。

[http://php.net/manual/en/session.configuration.php](http://php.net/manual/en/session.configuration.php)

您需要注意`gc-_*`指令。

# zimbra - 在 zimbra 邮件中添加字段

> ID：10528427
> 
> 赞同：1
> 
> 时间：2012-05-10T06:15:55.657
> 
> 标签：zimbra

我想向 zimbra 邮件服务器中的用户询问名称和部门。如何将名称和部门字段添加到 zimbra 邮件服务器用户帐户字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-15T21:09:04.363

您必须为此创建一个管理员扩展并将值保存在适当的 LDAP 字段中。搜索 Zimbra wiki，了解如何开发管理扩展。

# facebook - 音频嵌入不再起作用了吗？

> ID：10528428
> 
> 赞同：3
> 
> 时间：2012-05-10T06:16:02.210
> 
> 标签：facebook, facebook-graph-api, facebook-opengraph, meta-tags

是否仍然可以通过添加适当的元标记来嵌入音频？我正在尝试使用 og:audio、og:audio:type 和 og:image 。这只是坐在一些与 Facebook 应用程序或打开图形操作无关的网页上。当我将链接粘贴到我的状态更新中时，所有标记的数据都会显示：标题、图像、描述，但 Facebook 音频播放器从不嵌入我放入 og:audio 的 url

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T19:01:42.823

您是列入白名单的合作伙伴吗？文档[https://developers.facebook.com/docs/opengraph/music/](https://developers.facebook.com/docs/opengraph/music/)说它目前仅适用于白名单的合作伙伴。

# sql - 如果所有记录都等于另一个表中的内容，则尝试显示记录

> ID：10528433
> 
> 赞同：1
> 
> 时间：2012-05-10T06:16:25.780
> 
> 标签：sql, ms-access

我为此使用了 3 个表格，Part、PartDrawing 和 ShopDrawing。基本上我想显示所有零件都有库存的 ShopDrawings。但是，每个 ShopDrawing 都有多个与之配套的 PartDrawings，因此当我像这样运行查询时：

```
SELECT DISTINCT ShopDrawing.DrawingNo FROM ShopDrawing, PartDrawing, Part
WHERE ShopDrawing.DrawingNo = PartDrawing.DrawingNo
AND PartDrawing.PartNo = Part.PartNo
AND Part.InStock = 'YES'; 
```

它显示每一个 ShopDrawing，因为它们都至少有一个库存零件。我只希望它显示 ShopDrawings，其中所有需要的零件都有库存，我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:35:40.983

尝试通过不选择数据`Part.InStock = 'NO'`而不是选择数据来进行评估`Part.InStock = 'YES'`

```
SELECT 
     ShopDrawing.DrawingNo 
FROM 
     ShopDrawing WHERE ShopDrawing.DrawingNo NOT IN
         (SELECT 
              PartDrawing.DrawingNo 
          FROM 
              PartDrawing LEFT JOIN Part ON PartDrawing.PartNo = Part.PartNo 
          WHERE 
              Part.InStock IS NULL
          GROUP BY PartDrawing.DrawingNo 
          HAVING COUNT(*)>0) 
```

# ruby-on-rails - Rails 无法将页面呈现为 json

> ID：10528435
> 
> 赞同：0
> 
> 时间：2012-05-10T06:16:35.653
> 
> 标签：ruby-on-rails, json

我有一个这样的网址：`localhost/events/show?eId=12345.json`

当我执行：`model.find(params[:eId])`

它考虑`.json`了 的一部分`eId`并说没有找到 id `12345.json`。为了解决这个问题，我排除`.json`了`eId`它，然后它显示了 html 页面。但我还需要能够看到该`.json`页面。

所以它不承认我需要以 json 格式查看页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:19:13.750

试试`localhost/events/show.json?eId=12345`。

# iphone - 如何使用自定义字体计算字符串的大小

> ID：10528438
> 
> 赞同：0
> 
> 时间：2012-05-10T06:16:47.740
> 
> 标签：iphone, objective-c, ios, xcode, xcode4

我有一个标签，显示一些文本，如“我很好”。如何计算具有自定义字体的标签中文本的大小。我正在计算尺寸

```
CGSize s = [mSubLabel.text sizeWithFont:[UIFont fontWithName:@"ArnhemPro-Blond.otf" size:10.0] constrainedToSize:Max_Size lineBreakMode:UILineBreakModeTailTruncation];

NSLog(@"expected size %@",NSStringFromCGSize(s)); 
```

但大小是**(0,0)**

我如何计算尺寸？使用`GSize subLabelSize=[mSubLabel.text sizeWithFont:[UIFont systemFontOfSize:1] constrainedToSize:Max_Size lineBreakMode:UILineBreakModeTailTruncation];`

给我尺寸，但这是不正确的。请帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:33:30.607

您的字体很可能是`nil`，`name`参数 for`fontNamed:`应该是通常与其文件名不同的字体*名称*（并且没有扩展名）。您可以使用 Font Book 应用程序找出字体的实际名称。

# bash - 通过 unix shell 管道

> ID：10528441
> 
> 赞同：4
> 
> 时间：2012-05-10T06:17:07.543
> 
> 标签：bash, shell

什么是只返回输入的 UNIX shell 程序？

例如

```
> echo "test" | $pass
> test # output 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-10T06:20:27.350

您可以使用`cat`.

使用时`cat`不带任何命令行参数。它只是将标准输入复制到标准输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:21:46.933

`cat`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T06:33:15.570

`cat`.

### 笔记

还有`tac`执行相反的`cat`.

# php - 原则 2：无法更新 SQL Server 2008apm 上的 DateTime 列

> ID：10528444
> 
> 赞同：8
> 
> 时间：2012-05-10T06:17:12.850
> 
> 标签：php, sql-server-2008, datetime, doctrine, doctrine-orm

我在 apache 服务器上使用 Doctrine 2.2 和 php 5.3。

到目前为止，我偶然发现了以下问题：当我尝试更新日期时间列时，我得到：SQLSTATE[22007]: [Microsoft][SQL Server Native Client 10.0][SQL Server]Conversion failed when conversion date and/or time从字符串。

到目前为止，我什至已经进入该列，然后使用它只添加了 1 天来设置新日期......结果相同。

相反，当我将数据库中的列和实体中的列从日期时间更改为日期时，它会按预期运行。

我的主要问题是，有几个字段我需要使用日期时间列。

这是我的代码：

（生日是我更改为日期的列......并且是为数不多的对我来说可能的列之一）：

```
//This returns the datetime object that represents birthdate from the database 
$help=$object->getBirthDate(); 
$help->setTimestamp(mktime($time[0],$time[1],$time[2],$date[2],$date[1],$date[0])); 
$help->format(\DateTime::ISO8601); 
$object->setBirthDate($help); 
```

有人知道这里的解决方法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2017-03-08T18:09:59.890

我在 Doctrine 2.5 和 SQL Server 2012 中遇到了这个问题。问题是数据库字段是 type `DATETIME`，但 doctirne 只支持`DATETIME2`SQLServer2008Platform 及更高版本。

您不应该在您的供应商目录中编辑文件。正确的答案是创建一个自定义类型：[Doctrine Custom Mapping Types](http://docs.doctrine-project.org/projects/doctrine-dbal/en/latest/reference/types.html#custom-mapping-types)。就我而言，我扩展了当前的 DateTimeType：

```
<?php

namespace AppBundle\Doctrine\Type;

use Doctrine\DBAL\Types\DateTimeType;
use Doctrine\DBAL\Platforms\AbstractPlatform;

class DateTime extends DateTimeType
{
    private $dateTimeFormatString = 'Y-m-d H:i:s.000';

    public function convertToDatabaseValue($value, AbstractPlatform $platform)
    {
        return ($value !== null)
            ? $value->format($this->dateTimeFormatString) : null;
    }

} 
```

然后在 Symfony config.yml 中：

```
 types:
      datetime: AppBundle\Doctrine\Type\DateTime 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T11:57:09.783

它是 Doctrine 2.2 中的官方错误，将在 2.3 中解决。

微秒被转换为具有错误数量的零的字符串。

解决方法：更改文件 /Doctrine/DBAL/Types/DateTimeType.php 中的函数 convertToDatabaseValue：

```
public function convertToDatabaseValue($value, AbstractPlatform $platform)
{
   if( $value === null)
      return null;

   $value = $value->format($platform->getDateTimeFormatString());

   if( strlen($value) == 26 &&
         $platform->getDateTimeFormatString() == 'Y-m-d H:i:s.u' &&
         ($platform instanceof \Doctrine\DBAL\Platforms\SQLServer2008Platform
          ||
         $platform instanceof \Doctrine\DBAL\Platforms\SQLServer2005Platform
         ) )
      $value = substr($value, 0, \strlen($value)-3);
   return $value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-23T08:03:37.950

Microsoft SQL Server Express 17 和 Doctrine ORM v2.6.3/DBAL v2.9.2 仍然存在同样的问题。（对于 Doctrine Platform，我使用`SQLServer2012Platform`）。

您需要做的就是将您的 SQL 字段从更改`DATETIME`为`DATETIME2`类型（尽可能）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:24:45.387

您传递给该`datetime`领域的价值是什么？你应该传递一个`Datetime`实例

```
$entity->setDate(new \Datetime()); 
```

# visual-c++ - IAccessible 接口的覆盖函数在 cwnd 驱动的类中不起作用

> ID：10528447
> 
> 赞同：7
> 
> 时间：2012-05-10T06:17:33.683
> 
> 标签：visual-c++, mfc, accessibility, cwnd

我有一个`CWnd`名为 button 的派生类，并且想要使用`CWnd`辅助功能，我在我的类中重写了这个函数：

```
virtual HRESULT get_accName(VARIANT varChild, BSTR *pszName);
virtual HRESULT get_accChildCount(long *pcountChildren);
virtual HRESULT get_accDefaultAction(VARIANT varChild, BSTR *pszDefaultAction);
virtual HRESULT get_accDescription(VARIANT varChild, BSTR *pszDescription);
virtual HRESULT get_accKeyboardShortcut(VARIANT varChild, BSTR *pszKeyboardShortcut);
virtual HRESULT get_accParent(IDispatch **ppdispParent);
virtual HRESULT get_accRole(VARIANT varChild, VARIANT *pvarRole);
virtual HRESULT get_accState(VARIANT varChild, VARIANT *pvarState);
virtual HRESULT get_accValue(VARIANT varChild, BSTR *pszValue); 
```

当我运行程序并在执行任何这些函数时设置中断点时，程序不会进入这些函数，而是使用父函数，有什么可以帮助我的吗？

get_accName 的实现：

```
HRESULT Button::get_accName(VARIANT varChild, BSTR *pszName)
{
   //*pszName = SysAllocString(lpstrTitle);
   return S_OK;
} 
```

我调用`EnableActiveAccessibility()`了这个类的构造函数，但还没有工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:28:46.870

您是否尝试过类似的方法：

```
class CWnd {
  virtual HRESULT  get_accChildCount(long *pcountChildren);
};

class Button : public CWnd {

  virtual HRESULT  get_accChildCount(long *pcountChildren) {

    HRESULT childCount = CWnd:get_accChildCount(long *pcountChildren);

    //you can use the value from the ancestor class if it is of any use 
    //to you or add your own code 
    childCount = 1234;

    return childCount;
  } 
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T15:51:52.100

您可能错误地调用了这些被覆盖的方法。尝试重命名覆盖。它可以使事情更清楚，并指出是否有任何问题。请参阅下面的示例实现。

```
ref class Base
{
public:    
    virtual void Boo()
    {
        Show("Base::Boo");
    }    
};

ref class Derived : Base
{
public:    
    //Overrides Base::Boo
    virtual void Woo() = Base::Boo
    {
        Show("Derived::Woo");
    }
}; 
```

像这样调用它：

```
void _tmain()
{ 
    Base* r = new Derived();

    Derived* d = dynamic_cast<Derived*>(r);
    d->Woo();
} 
```

来自[代码项目](http://www.codeproject.com/Articles/7498/Function-overriding-in-C-CLI)

# sql-server-2008-r2 - 使用 BULK INSERT 的服务代理激活过程？

> ID：10528450
> 
> 赞同：0
> 
> 时间：2012-05-10T06:17:52.037
> 
> 标签：sql-server-2008-r2, bulkinsert, service-broker

我想出了需要在 Service Broker 激活过程中处理批量插入逻辑的场景。当我在存储过程中添加批量插入逻辑时，我遇到了异常。

**- 我们可以在 Activation SP 中使用“BULK INSERT”吗？
-MSSQL 服务代理是否支持这个？？？？**

我用谷歌搜索上述问题的答案，但一无所获。所以任何人都请分享这方面的知识..

提前谢谢，
桑迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:06:24.697

用户权限？

很棒的文章可以在[这里](http://www.sommarskog.se/grantperm.html#certbulkexample)找到。解释了如何授予执行批量加载的权限。

# verilog - 在 Icarus Verilog 中调试组合逻辑循环

> ID：10528457
> 
> 赞同：4
> 
> 时间：2012-05-10T06:18:46.077
> 
> 标签：verilog, icarus

我正在使用 Icarus verilog 来模拟一个相当复杂的设计。我发现在极少数情况下，我的模拟会“卡住”，即时钟不再滴答作响，并且没有任何信号似乎发生变化。我怀疑这是因为我的设计中有一个组合逻辑循环。当然，问题是我不知道在哪里。

有没有系统的方法调试这个？我只是非常努力地盯着代码，但我无法取得任何进展。任何关于我可以尝试的事情的建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T02:30:40.547

所以事实证明，Icarus Verilog 有一个特定的编译标志“-pfileline = 1”。打开此标志运行 vvp 会打印出大量有关正在执行的确切内容的调试信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T13:26:07.157

运行模拟时，转储 VCD 文件。如果您有一个无限循环，您将看到 VCD 文件大小继续增长而没有新的时间被写入文件。时间`#`在一行的开头用 表示。您将能够确定哪些信号正在发生变化，而无需时间提前。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T13:56:35.413

IMO，大多数情况下无限循环发生在时钟生成上。特别是如果您将它们设置为生成可变频率。例如，如果您的时钟设置如下：

```
`timescale 1ns / 1ns
 real period;
 reg clk;

 initial begin
     period = 5.0;
     clk = 1'b0;
     forever begin
         #(period/2) clk = !clk;
     end
end 
```

如果您更改，则如果您意外更改为 0.0，`period`则可能会发生无限循环。`period`

更棘手的是，有时`period / 2`可能会超出您的时间刻度精度。例如，如果您设置`period = 1.0`, then`period / 2`为 0.5，并且由于您的时间精度为 1ns，这将捕捉到 0，从而导致无限循环。如果我怀疑这一点，我通常会在我进入延迟之前设置一个守卫时间（再次，小心精确......）。

```
...
half_period_ns = period_ns / 2.0; 
if( half_period_ns == 0 )
    half_period_ns = 1;
#(half_period_ns) clk = !clk;
... 
```

另一件事是在交互模式下运行模拟并随机按 Ctrl-C，输入命令以询问模拟器它在哪里（不幸的是，模拟器特定于模拟器，但`where`我认为在 Incisive 中它是），然后恢复模拟。这样做几次，您将能够了解代码占用了模拟器的所有时间。

# android - Android (Facebook API) - 如何强制调用 onComplete(Bundle values)？

> ID：10528462
> 
> 赞同：1
> 
> 时间：2012-05-10T06:19:23.137
> 
> 标签：android, facebook, dialog, bundle

我在屏幕中有一个 facebook 对话框，我在页面的右上角（在 Facebook 的登录页面旁边）放置了一个按钮。我想要做的是，如果用户点击该按钮，关闭 Facebook 对话框并为启动 Facebook 对话框的活动传递一些值（即调用的活动：

```
 mFacebook.authorize(this, Settings.FACEBOOK_PERMISSIONS, Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener()); 
```

问题是我只知道如何关闭 Facebook 对话框而无法将任何参数传递给它，因为 DialogListener 的回调函数 onCancel() 不会`t receive a Bundle. I can`将参数传递回原始活动（如果签名是 onCancel 我可以（捆绑包））。

换句话说，我想要的是类似于 onCancel(Bundle bundle) （不幸的是，它不存在）或以编程方式返回回调 onComplete(Bundle values) 的方式，因为这样，我可以阅读我在屏幕上显示 Facebook 对话框时设置的捆绑值）。

先感谢您！

## 更新（代码）

```
private class LoginDialogListener implements DialogListener {

    public void onComplete(Bundle values) {
        Settings.setFBStats(Settings.getFBStats() + 1);
        facebookPost();
        Util.showThanks(PhotoActivity.this, galleryName);
    }

    public void onFacebookError(FacebookError error) {
    }

    public void onError(DialogError error) {
    }

    public void onCancel() {
        System.out.println("Hi! =D");
    }
}

public void facebook(View target) {
    mFacebook = new Facebook( getString(R.string.facebookappid) );
    mAsyncRunner = new AsyncFacebookRunner(mFacebook);
    mAsyncRunner.logout(this, new LogoutRequestListener());
    mFacebook.authorize(this, Settings.FACEBOOK_PERMISSIONS,    Facebook.FORCE_DIALOG_AUTH, new LoginDialogListener());
} 
```

这是 FbDialog.java 的 onCreate() 方法中的代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mSpinner = new ProgressDialog(getContext());
    mSpinner.requestWindowFeature(Window.FEATURE_NO_TITLE);
    mSpinner.setMessage("Loading...");

    requestWindowFeature(Window.FEATURE_NO_TITLE);

    mContent = new FrameLayout(getContext());

    /* Create the 'x' image, but don't add to the mContent layout yet
     * at this point, we only need to know its drawable width and height 
     * to place the webview
     */
    createCrossImage();

    overlay = new ImageView(getContext());
    overlay.setImageDrawable(getContext().getResources().getDrawable(R.drawable.overlay_horiz));
    overlay.setTop(0);
    overlay.setLeft(0);
    overlay.setVisibility(View.INVISIBLE);

    /* Now we know 'x' drawable width and height, 
     * layout the webivew and add it the mContent layout
     */
    int crossWidth = mCrossImage.getDrawable().getIntrinsicWidth();
    setUpWebView(crossWidth / 2);

    /* Finally add the 'x' image to the mContent layout and
     * add mContent to the Dialog view
     */

    mContent.addView(mCrossImage, new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));

    FrameLayout main = new FrameLayout(getContext());
    main.addView(overlay, new LayoutParams(1280, 755));

    RelativeLayout rel = new RelativeLayout(getContext());

    mContent.setPadding(450, 60, 0, 0);
    rel.addView(mContent, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

    closeIt = new ImageButton(getContext());
    closeIt.setBackgroundDrawable(getContext().getResources().getDrawable(R.drawable.closefb));

    RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(282, 150);
    lp.setMargins(980, 10, 0, 0);

    closeIt.setVisibility(View.INVISIBLE);
    closeIt.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            mListener.onCancel();
            FbDialog.this.hide();//HERE!!! =D
        }
    });

    rel.addView(closeIt,lp);

    main.addView(rel, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));

    addContentView(main, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT));
} 
```

我正在谈论的按钮是**closeIt**按钮。

看到 closeIt 按钮的 setOnClickListener 方法了吗？所以，我只能关闭或隐藏按钮。当我执行任何操作（关闭或隐藏）时，会调用 LoginDialogListener 的 onCancel() 方法。问题是我无法检测到它来自该按钮，因为当用户按下 facebook 对话框旁边的默认 X 按钮时，流程也会转到相同的 onCancel() 方法。如果我能够检测到它来自我的按钮，那么我可以在代码中做一些我想做的其他事情。

再一次感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T19:15:22.607

更改`Facebook.DialogListener`类并为其添加新`onCancel(Bundle)`功能，（您也可以将现有更改`onCancel()`为`onCancel(Bundle)`，但应避免这样做以保持与现有代码的兼容性。），然后`onCancel(bundle)`调用`onClick()`按钮`closeIt`。

或者

如果`LoginDialogListener`可以访问，`FbDialog`则在其中定义一个新函数`onCancel(Bundle)`（您可以使用 any`Object`代替`Bundle`）。然后在你`onClick()`的`closeIt`按钮中，调用

```
closeIt.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ...initialize_bundle...
            ((LoginDialogListener) mListener).onCancel(bundle);
            FbDialog.this.hide();//HERE!!! =D
        }
    }); 
```

或者

定义一个新的子类`Facebook.DialogListener`，让我们说`classA`，有一个新的`onCancel(Bundle)`功能。这`classA`应该对`FbDialog`. 现在重新定义您的`LoginDialogListener`，使其成为`classA`. 在你`onClick()`的`closeIt`按钮中，调用

```
closeIt.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            ...initialize_bundle...
            ((classA) mListener).onCancel(bundle);
            FbDialog.this.hide();//HERE!!! =D
        }
    }); 
```

希望能帮助到你 ！！

# blackberry - BB 应用世界上的西班牙语黑莓应用描述

> ID：10528463
> 
> 赞同：0
> 
> 时间：2012-05-10T06:19:23.687
> 
> 标签：blackberry, appworld

我已经通过 BB 应用世界上的供应商门户上传了我的应用。我已经用英语和西班牙语给出了我的应用程序的描述。但是当我看到提交的应用程序的链接时，描述只有英文。无论如何，我可以将西班牙语作为主要语言。

这是应用程序的链接： [http ://appworld.blackberry.com/webstore/content/107905/?lang=es](http://appworld.blackberry.com/webstore/content/107905/?lang=es)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:29:39.323

使用对您的解决方案有答案的 ResourceBundle

查看 BB 网站 [http://docs.blackberry.com/en/developers/deliverables/12002/Localizing_BlackBerry_Application_projects_655976_11.jsp中的链接](http://docs.blackberry.com/en/developers/deliverables/12002/Localizing_BlackBerry_Application_projects_655976_11.jsp)

这可能会帮助您创建 ResourceBundle 下面是一个示例程序，单击按钮即可将英语转换为法语，反之亦然

```
public class Screen extends MainScreen implements AppResource{
    LabelField lf1,lf2;
    ResourceBundle rb;
    ButtonField Convertor;
    boolean eng;
    Screen()
    {

        Convertor=new ButtonField("Convert to French");
        eng=true;

        rb=ResourceBundle.getBundle(AppResource.BUNDLE_ID, AppResource.BUNDLE_NAME);
        lf1=new LabelField(rb.getString(LABEL));
        lf2=new LabelField(rb.getString(TEXT));
        add(lf1);
        add(lf2);
        add(Convertor);
    }

    protected boolean navigationClick(int status, int time) {
        // TODO Auto-generated method stub

        Field f=getFieldWithFocus();

            if(f==Convertor)
            {
                if(eng==true)
                {
                    Locale.setDefault(Locale.get(Locale.LOCALE_fr, null));
                    lf1.setText(rb.getString(LABEL));
                    lf2.setText(rb.getString(TEXT));
                    eng=false;
                    Convertor.setLabel("Convert to English");

                }
                else if(eng==false)
                {

                Locale.setDefault(Locale.get(Locale.LOCALE_en, null));
                lf1.setText(rb.getString(LABEL));
                lf2.setText(rb.getString(TEXT));

                eng=true;
                Convertor.setLabel("Convert to French");

                }

            }

        return super.navigationClick(status, time);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T05:54:21.550

查看链接了解更多信息

[http://www.javabeat.net/qna/37-what-is-the-use-of-resourcebundle-in-java/](http://www.javabeat.net/qna/37-what-is-the-use-of-resourcebundle-in-java/)

如果我没记错的话……资源包就是答案

# android - 如何监控 SIM 状态变化

> ID：10528464
> 
> 赞同：28
> 
> 时间：2012-05-10T06:19:29.440
> 
> 标签：android, broadcastreceiver, android-service, telephonymanager

我希望能够在 SIM 状态更改时做一些事情，即在需要 SIM PIN 时播放声音，但我认为没有广播事件可以被广播接收器拦截...注册*android.intent.action* .PHONE_STATE 只会告诉你 CALL-STATE 何时发生变化。另一种方法是启动一个注册PhoneStateListener 并对*LISTEN_SERVICE_STATE*做出反应的服务（当状态为 OUT-OF-STATE 时，它可以获得 SIM来自*TelephonyManager*的状态并查看状态是否为 SIM_STATE_PIN_REQUIRED）。所以，我的问题是：

**1)**是否有任何广播意图可用于拦截 SIM 状态更改或服务状态更改？

**2)**在服务中安装*PhoneStateListener并在**PhoneStateListener*收到电话状态更改的通知后使用它向服务本身传递意图是一个坏主意吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-11T14:36:55.000

当 SIM 状态发生变化时， Intent`android.intent.action.SIM_STATE_CHANGED`会被广播。例如，在带有 T-Mobile SIM 卡的 HTC Desire 上，如果我将设备置于飞行模式，则会广播以下 Intent：

*   意图：android.intent.action.SIM_STATE_CHANGED 附加：ss = NOT_READY，reason = null

如果我随后将其退出飞行模式，则会广播以下 Intent：

*   意图：android.intent.action.SIM_STATE_CHANGED 附加：ss = LOCKED，reason = PIN
*   意图：android.intent.action.SIM_STATE_CHANGED 附加：ss = READY，reason = null
*   意图：android.intent.action.SIM_STATE_CHANGED 附加：ss = IMSI，原因 = null
*   意图：android.intent.action.SIM_STATE_CHANGED 附加：ss = LOADED，reason = null

不同的制造商和不同的型号可能表现不同。正如他们所说，“您的里程可能会有所不同”。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-04-24T13:00:46.437

大卫的回答很到位。我想添加一些示例代码来帮助人们开始实现这样的状态监视器。

```
/**
 * Handles broadcasts related to SIM card state changes.
 * <p>
 * Possible states that are received here are:
 * <p>
 * Documented:
 * ABSENT
 * NETWORK_LOCKED
 * PIN_REQUIRED
 * PUK_REQUIRED
 * READY
 * UNKNOWN
 * <p>
 * Undocumented:
 * NOT_READY (ICC interface is not ready, e.g. radio is off or powering on)
 * CARD_IO_ERROR (three consecutive times there was a SIM IO error)
 * IMSI (ICC IMSI is ready in property)
 * LOADED (all ICC records, including IMSI, are loaded)
 * <p>
 * Note: some of these are not documented in
 * https://developer.android.com/reference/android/telephony/TelephonyManager.html
 * but they can be found deeper in the source code, namely in com.android.internal.telephony.IccCardConstants.
 */
public class SimStateChangedReceiver extends BroadcastReceiver {

    /**
     * This refers to com.android.internal.telehpony.IccCardConstants.INTENT_KEY_ICC_STATE.
     * It seems not possible to refer it through a builtin class like TelephonyManager, so we
     * define it here manually.
     */
    private static final String EXTRA_SIM_STATE = "ss";

    @Override
    public void onReceive(Context context, Intent intent) {

        String state = intent.getExtras().getString(EXTRA_SIM_STATE);
        if (state == null) {
            return;
        }

        // Do stuff depending on state   
        switch (state) {      
            case "ABSENT": break;
            case "NETWORK_LOCKED": break;
            // etc.
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-16T16:51:53.560

在侦听 onServiceStateChanged() 的服务中[使用 PhoneStateListener](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)[的](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#onServiceStateChanged%28android.telephony.ServiceState%29)第二种方法对我有用。我相信在某些设备上你不会得到内部广播`android.intent.action.SIM_STATE_CHANGED`。

# java - 从整数像素数组创建图像

> ID：10528469
> 
> 赞同：0
> 
> 时间：2012-05-10T06:19:47.787
> 
> 标签：java, image, rgb

我有一个图像的整数像素数组，其值为 -1100791、-16777056 等。尝试使用 memoryimage 源和工具包方法，但获得的图像在黑色背景上有彩色破折号。如何从像素值写入 RGB 图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:58:46.107

尝试使用[`WritableRaster`](http://docs.oracle.com/javase/6/docs/api/java/awt/image/WritableRaster.html).

# dll - 验证 dll 在程序启动时已签名

> ID：10528471
> 
> 赞同：0
> 
> 时间：2012-05-10T06:19:57.087
> 
> 标签：dll, sdk, signing, signed, verify

> **可能重复：**
> [文件签名验证](https://stackoverflow.com/questions/4602259/file-signature-validation)

您好，我制作了一个基于 dll 文件的基本游戏，所有这些文件都已签名。如果有人篡改 dll 文件，则可能会以非预期的方式操纵游戏。VB、C++ 或 C# 中是否有办法验证文件是否从某个来源进行了数字签名？我发现这个[签名工具](http://msdn.microsoft.com/en-us/library/aa387764.aspx)说它可以验证文件，但它是通过 sdk 分发的，虽然我不是律师，但我想我不允许在我的程序中分发该文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:26:55.400

您应该使用[CryptQueryObject](http://msdn.microsoft.com/en-us/library/aa380264(VS.85).aspx)。

这篇知识库文章演示了如何使用：[如何从 Authenticode 签名的可执行文件中获取信息](http://support.microsoft.com/default.aspx/kb/323809)。

对于询问如何在没有 Windows-API 的情况下执行此操作的评论者，我不知道有任何库可以做到这一点，但格式记录在这里：[Windows Authenticode Portable Executable Signature Format](http://www.microsoft.com/whdc/winlogo/drvsign/Authenticode_PE.mspx)

[[资源]](https://stackoverflow.com/questions/301024/validate-authenticode-signature-on-exe-c-without-capicom)

# java - 关闭 Java 操作

> ID：10528473
> 
> 赞同：6
> 
> 时间：2012-05-10T06:20:12.590
> 
> 标签：java, swing

通过使用`frame.setDefaultCloseOperation(JFrame.HIDE_ON_CLOSE);`可以隐藏窗口。但在那之后我怎么能显示另一个窗口？

当我在我的 java swing 应用程序中单击时`close button`，我需要隐藏该窗口并在我的应用程序中显示另一个窗口。我怎么能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T06:23:30.380

您需要编写一个[窗口侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/windowlistener.html)。

# excel - 播放框架 - dependencies.yml 未自动生成

> ID：10528474
> 
> 赞同：2
> 
> 时间：2012-05-10T06:20:24.673
> 
> 标签：excel, playframework, playframework-2.0

我是玩框架的新手。我正在使用播放 2.0。我正在尝试为我的应用程序生成 excel 报告。当我使我的应用程序黯然失色时，不会生成dependencies.yml。所以我创建了一个明确的 dependencies.yml 文件，并在 application.conf 中包含了 play 依赖和 excel 模块。但是没有关于可用的 excel 模块的信息。于是我下载了excel 1.2.3 zip模块，放到play目录下。还是没有成功！！！请尽快给我一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:27:26.013

Play 2.0 使用 sbt 来管理依赖。没有更多的dependency.yml。请参阅有关如何声明依赖项的文档

[http://www.playframework.org/documentation/2.0.1/SBTDependencies](http://www.playframework.org/documentation/2.0.1/SBTDependencies)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:48:51.910

另请记住，为 Play 1.x 创建的模块不适用于 Play 2.x。每个模块的每个详细信息页面都会提到它。

`This module is for the Play 1.x series only.`

目前 2.0 模块可在：[https](https://github.com/playframework/Play20/wiki/Modules) ://github.com/playframework/Play20/wiki/Modules 获得，但还没有 excel 模块。

# opengl-es - 使用 opengl es 2.0 从 fbo 读取像素

> ID：10528487
> 
> 赞同：0
> 
> 时间：2012-05-10T06:21:12.467
> 
> 标签：opengl-es, pixels

我有一个绑定到纹理的帧缓冲区对象，它是 rgba 格式。我想将 fbo 数据传输到 cpu，但我只想每个像素读取 1 个字节。是否可以在 opengl es 2.0 中使用 glreadpixels。

# sql - 想修改表定义但数据量大

> ID：10528493
> 
> 赞同：1
> 
> 时间：2012-05-10T06:21:50.210
> 
> 标签：sql, sql-server, database-design, sqldatatypes

这是我之前提出的问题的持续问题：[Change Database Column Design in SQL Server](https://stackoverflow.com/questions/10527656/change-database-column-design-in-sql-server)

我正在尝试更改表定义的表非常大（4137631 行），因此 Management Studio 表示该表在转换过程中将无法访问，并且可能需要一些时间才能完成。

所以我需要关于如何处理这种情况的建议。

*   我应该等待下班后进行更改吗？
*   任何想法需要多长时间？
*   或者有没有其他更快的方法来更改表定义（varchar 到 nvarchar）

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:25:45.677

*   您应该安排一个作业，直到完全不使用数据库。如果做不到这一点，请先使数据库脱机。

*   没有人能准确地告诉你。

*   `ALTER TABLE`是您唯一的选择，除非您想先复制整个表（在这种情况下，无论如何您都会遇到引用完整性问题，不推荐）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:42:19.997

正在更改的列是否是任何索引的一部分？如果不

1.  向数据库添加新列 (nvarchar)
2.  使用原始列中的数据更新列
3.  删除原始列
4.  重命名新列

我更喜欢将其作为脚本进行。您可以在测试系统中尝试上述步骤。理想情况下，它应该比任何其他方法都快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T08:08:23.140

使用 alter table / alter column 创建脚本：http: [//msdn.microsoft.com/en-us/library/ms190273.aspx](http://msdn.microsoft.com/en-us/library/ms190273.aspx)

但是先做一个相同结构的测试表，然后把你的脚本作为一个存储过程，首先在这个表上测试，如果它工作得很好，然后安排SP在晚上运行一次。没有用户会受到伤害:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:26:43.797

最佳实践是创建另一个数据库作为测试并恢复生产数据库的副本以进行测试并尝试运行脚本来更改表，然后您可以决定更改后的情况。

瑞安 A.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T11:23:50.203

您的问题的答案
1) 一定要在下班后等待，这是一项维护活动，不应在工作时间内运行
2) 需要多长时间取决于您的硬件、网络速度和表中的数据量。行数不是衡量数据量的好方法。正如你所说，我只能有 3 列所有整数和尽可能多的行。如果你明白我的意思。
3）我已经在那个问题中发表了我的评论。

# javascript - javascript：将一个函数传递给另一个函数

> ID：10528494
> 
> 赞同：0
> 
> 时间：2012-05-10T06:21:53.017
> 
> 标签：javascript, javascript-events

我理解以下代码：

```
function subtract(p1, p2) { return p1 - p2; }
function calculate(p1, p2, calculator) { return calculator(p1, p2); }
var result = calculate(2, 3, subtract); //-1 
```

但我不明白以下关于如何将 p1 和 p2 识别为 2 和 3 的代码：

```
var result = calculate(2, 3, function (p1, p2) { return p1 - p2; }); //-1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:31:12.870

**更新以解决评论：**

> 可能是我的问题不够清楚。让我换个说法。如果 Calculate 有 5 个参数： function calculate(p1, p2, p3, p4,calculator) { return calculator(p1, p2); 是否可以这样调用： var result = calculate(2, 3, 9, 5, function (p4, p3) { return p3 - p4; }); //4 不是-1 我的实际问题是：其中一个参数如何使用其他参数作为它的参数并区分哪个参数应该成为哪个参数？

匿名函数知道使用 p1 和 p2 参数的原因是因为计算函数定义中的参数是作为计算体中的参数传递给匿名函数的参数。

也许更清楚地理解这里发生的事情的方法是更改​​匿名函数的函数定义中的参数名称，以便在匿名函数的函数定义中不使用相同的参数名称。这会造成很多混乱，并且通常在计算机科学教科书中教授编程语言和抽象原理时故意这样做。

除了更改匿名函数中的参数名称外，将计算参数“calculator”更改为参数名称“fn”也可能有助于避免计算和计算器之间的混淆。考虑你的功能：

**功能定义：**

```
function calculate(p1, p2, p3, p4, fn) {

    // here you can see that calculate's p1 and p2 arguments (above) are bound
     // to whatever function we pass into the fn parameter.
      // Whatever values p1 and p2 represent are passed into the function "fn"
       // and are assigned to the parameters p1 and p2 of fn.
    return fn(p1, p2); 
} 
```

**函数调用计算，带有匿名函数：**

> 我们如何知道前 4 个参数中的哪一个被传递到匿名函数中，哪些参数没有被使用？

```
// so here, we pass in an anonymous function that takes 2 parameters, one 
 //and two. We know from the definition above that whatever values are
  // passed in as calculate's p1 and p2 parameters are passed into fn, 
   //so one and two are assigned the values 2 and 3 respectively,
    // since p1 and p2 were assigned 2 and 3, and p1 and p2 were passed into
     // fn in calculate's function definition above.
calculate(2, 3, 9, 5, function(one, two) {
    return two - one;
});

// We know the values assigned to p1 and p2 are passed into the fn function
 // as the parameters of the anonymous function known as one and two.      
var result = calculate(2, 3, 9, 5, function(2, 3) {
    return 3 - 2;
} 
```

请参阅`return fn(p1, p2);`此答案顶部的计算函数定义，以提醒为什么将分配给 p1 和 p2 的值传递给匿名函数。

因此，匿名函数返回 3 - 2 = 1。

有关此概念如何创建抽象的进一步阅读，请参阅[Joel Spolsky 的文章 - 您的编程语言可以做到这一点吗？](http://www.joelonsoftware.com/items/2006/08/01.html)Joel 很好地解释了为什么 JavaScript 如此出色！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:27:06.447

好吧，它是从引用名称`function`调用的，它看起来让您感到困惑，因为**计算中的 arg 名称和计算器**中的**arg 名称**是相同的。`calculate``calculator`

 ****```
var result = calculate(2, 3, function (p1, p2) { return p1 - p2; }); //-1 
```

现在计算函数，

```
function calculate(p1, p2, calculator) { return calculator(p1, p2); } 
```

参数如下，

```
p1- 2
p2- 3
calculator - function (p1, p2) { return p1-p2; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:28:13.530

计算将它的第三个参数 (calculator) 调用为具有自己的前两个参数 p1 和 p2 的函数。

```
 //parameters                            // passing trough as arguments
function calculate(p1, p2, calculator) { return calculator(p1, p2); } 
```

Calculator 可以通过它自己的 p1 和 p2 版本从计算中访问 p1 和 p2，这可能看起来令人困惑，因为参数恰好具有相同的名称，但它们只是通过 trough 传递。

在您的示例中，您传递了一个本地函数来计算，然后将使用计算中的前 2 个参数调用该函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:56:11.580

第三个参数是一个（匿名）函数表达式。该表达式的结果是对新创建的可调用对象（`Function`实例）的引用。

该`calculate`函数被传递`2`,`3`和该对象引用作为参数。的第一个和第二个参数`calculate`分别命名为`p1`和`p2`。第三个参数名为`calculator`。因此，在 中`calculate`，`p1`用 初始化，用`2`初始化`p2`，`3`并`calculator`用对先前创建的`Function`实例的引用进行初始化。

`calculate`然后调用被引用的`Function`实例，传递其`p1`和`p2`参数的当前值，`2`以及`3`，作为第一个和第二个参数。

被调用的匿名函数有自己的第一个和第二个参数`p1`，`p2`然后它们假定调用中的参数为它们传递的值，`2`和`3`。引用参数的表达式被求值并将结果返回给它的调用者，即`calculate`.

`calculate`然后将该值返回给*它的*调用者。

这种方法称为*回调*。

下次，请先使用调试器。****

# javascript - 扩展函数原型

> ID：10528495
> 
> 赞同：5
> 
> 时间：2012-05-10T06:22:07.433
> 
> 标签：javascript, prototype

我希望能够在javascript中扩展函数原型（也就是说，向所有函数添加一个函数）。目的是将其转换为另一种语言之间交换的格式（即ruby，它只能通过字符串进行通信[在此特定设置中]）。我已经有了一个系统，所以我可以通过`to_js`在 ruby​​ 对象上定义一个方法和`to_ruby`在 javascript 对象上定义一个方法来传递其他类型，就像这样

```
Number.prototype.to_ruby = function () { return this.toString(); } 
```

这适用于我想要的所有其他东西，但不适用于功能。我*可以*通过执行以下操作使其在 chrome 中工作：

```
_empty = function() {};
_empty.__proto__.to_ruby = function () {
    return 'JSFunction.new(' + this.toString().to_ruby() + ')';
}; 
```

但这在 IE 中不起作用（这是系统的要求）。

我知道我有一个对象在某处通过 ID 或类似名称跟踪函数，但我不能保证它们将与创建它们的同一实例一起使用。

所有其他失败我都可以编写一个函数来处理它的特殊情况（即，`isFunction(instance) ? fn_to_ruby(instance) : instance.to_ruby()`但如果可能的话，我宁愿保留这个模型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T07:01:41.530

正如 Slace 所说，您可以通过将方法添加到 来将方法添加到所有对象`Object.prototype`，但这并不是真正的犹太教，因为它可能会影响写得很糟糕的 for..in 循环。

您可以通过以下方式将其添加到函数中`Function.prototype`：

```
Function.prototype.to_ruby = function() {
  return this.toString();
} 
```

然而，有一个一般规则是你不应该修改内置对象，主要是因为你永远不知道它什么时候会回来困扰你（例如，新版本的 ECMAScript 实现了一个同名的属性）。也许你最好写一个`toRuby`函数：

```
function toRuby(obj) {
  return obj.toString();
} 
```

但您也可以使用`+`运算符与字符串连接以`toString`隐式调用该方法：

```
'' + obj; // returns obj.toString() 
```

这将返回与上述完全相同的结果。你的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T06:27:50.440

`__proto__`不是标准属性。试试这个方法：

```
(function(){}).constructor.prototype.to_ruby = function(){
    return 'JSFunction.new(' + this.toString().to_ruby() + ')';
}; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-10T06:27:26.690

它`__proto__`不是任何 JavaScript 标准的一部分，它只是一些浏览器制造商决定实施的伪标准。IE 是一个*没有*实现它的。

如果要修改JavaScript 类型系统中的*任何*类型，则必须修改`Object`原型：

```
Object.prototype.foo = function () { console.log('foo'); };
(1).foo();
'asd'.foo();
(true).foo();
({ bar: 'baz' }).foo(); 
```

# c# - 在 Visual Studio 10 中创建设置

> ID：10528496
> 
> 赞同：1
> 
> 时间：2012-05-10T06:22:07.680
> 
> 标签：c#, mysql, visual-studio-2010, crystal-reports-2010

我在 Visual Studio 10 中创建了一个项目，该项目使用**Mysql 数据库和 Crystalreports**以及

它。但我不知道如何进行自动安装 Mysql 和 Crystalreports 的设置

连同安装此项目的 PC 上的项目设置。我能够创建一个

简单项目仅包含项目，但不包含 Mysql 或 Crystalreports 设置。如何

我可以创建这样一个自动安装 Crystal 报告 Mysql 和项目的设置吗

请参考任何教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:31:34.123

为此创建一个`Setup and Deployment Project`. 在项目先决条件中，您必须包含`Crystal Reports`和`MySQL`。如果它们不在先决条件列表中，那么恐怕您必须创建自己的引导程序才能这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:30:36.400

我认为这是一个有点不同的问题。您不能随代码一起安装一个完全不同的系统。用户需要先安装 MySQL，然后您可以运行在其中创建数据库的查询。我认为这需要单独进行。最后，您必须在安装 MySQL 后编写创建数据库结构的脚本。我不认为它可以那么容易地捆绑在一起。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:29:10.613

您可以为此创建自定义引导程序。

[http://archive.msdn.microsoft.com/Wiki/View.aspx?ProjectName=bmg](http://archive.msdn.microsoft.com/Wiki/View.aspx?ProjectName=bmg)

请参阅此链接：

[使用我们的设置安装其他应用程序 - vs2010 桌面应用程序部署](https://stackoverflow.com/questions/10025384/install-other-apps-with-our-setup-vs2010-desktop-app-deployment/10027397#10027397)

这篇文章也可以帮助你：

[http://murrayon.net/2009/11/custom-setup-bootstrappers.html](http://murrayon.net/2009/11/custom-setup-bootstrappers.html)

# java - 如何从 JavaPOS 访问智能卡

> ID：10528501
> 
> 赞同：1
> 
> 时间：2012-05-10T06:22:37.273
> 
> 标签：java, classpath, smartcard, javapos

我是 JavaPOS 的新手，谁能告诉我如何从 Javapos 访问智能卡。

这是我的代码：

```
SmartCardRW smartCard = new SmartCardRW();
try {
        smartCard.open("ACR122U");      
} catch (JposException e) {
        e.printStackTrace();
} 
```

我越来越

> java.lang.NoClassDefFoundError: org/apache/xml/serialize/BaseMarkupSerializer

如何摆脱它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T23:25:24.560

当然，通过下载/添加 Apache Xerces 到您的类路径。

# java - Hibernate Validator - 验证嵌套属性

> ID：10528504
> 
> 赞同：2
> 
> 时间：2012-05-10T06:22:56.340
> 
> 标签：java, bean-validation

我在下面得到了以下测试用例并有一个问题。为什么没有groups参数的嵌套属性验证总是失败？如何在没有组的情况下验证嵌套属性？

提前谢谢

亲切的问候

基督教

**我的测试用例：**

```
 package validation;
    import java.util.Set;
    import javax.validation.*;
    import javax.validation.constraints.*;
    import junit.framework.Assert;
    import lombok.Data;
    import lombok.extern.slf4j.Slf4j;
    import org.junit.*;

    @Slf4j
    public class NestedPropertiesTest {

        private ValidatorFactory factory;
        private Validator validator;

        @Before
        public void setUp() throws Exception {
            log.info("\n\nTest start:");
            this.factory = Validation.buildDefaultValidatorFactory();
            this.validator = factory.getValidator();
        }

        @Test
        public void testNestedBarNullValue() {
            Foo foo = new Foo();
            Bar bar = new Bar();
            bar.setNotempty(null);
            foo.setBar(bar);
            log.info("With groups:");
            Set<ConstraintViolation<Foo>> errors = validator.validateProperty(foo, "bar.notempty", Checks.class);
            logErrors(errors);
            Assert.assertFalse(errors.isEmpty());
            log.info("Without groups:");
            errors = validator.validateProperty(foo, "bar.notempty");
            logErrors(errors);
            Assert.assertFalse(errors.isEmpty());
        }

        @Test
        public void testNestedBarMinSize() {
            Foo foo = new Foo();
            Bar bar = new Bar();
            bar.setNotempty("1");
            foo.setBar(bar);
            log.info("With groups:");
            Set<ConstraintViolation<Foo>> errors = validator.validateProperty(foo, "bar.notempty", Checks.class);
            logErrors(errors);
            Assert.assertFalse(errors.isEmpty());
            log.info("Without groups:");
            errors = validator.validateProperty(foo, "bar.notempty");
            logErrors(errors);
            Assert.assertFalse(errors.isEmpty());
        }

        @SuppressWarnings("rawtypes")
        private void logErrors(Set errors) {
            log.info("Nr. of validation errors: {}", errors.size());
            for (Object error : errors) {
                ConstraintViolation cv = (ConstraintViolation) error;  
                log.info("{}: {}", cv.getPropertyPath(), cv.getMessage());
            }
        }

        @Data private class Foo {
            @Valid private Bar bar;
        }
        @Data private class Bar {
            @NotNull(groups=Checks.class)
            @Size(min = 2, groups=Checks.class)
            private String notempty;
        }
        private interface Checks {}
    } 
```

我的pom（以防万一）：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
        <modelVersion>4.0.0</modelVersion>
        <groupId>noorg</groupId>
        <artifactId>validation</artifactId>
        <version>0.0.1-SNAPSHOT</version>

        <dependencies>
            <dependency>
                <groupId>org.hibernate</groupId>
                <artifactId>hibernate-validator</artifactId>
                <version>4.2.0.Final</version>
            </dependency>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>4.10</version>
                <scope>test</scope>
            </dependency>
            <dependency>
                <groupId>org.projectlombok</groupId>
                <artifactId>lombok</artifactId>
                <version>0.11.0</version>
                <scope>provided</scope>
            </dependency>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-simple</artifactId>
                <version>1.6.4</version>
            </dependency>
        </dependencies>
    </project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T06:36:56.177

一旦你指定了一个组，你的约束就不再隐含地成为默认组的一部分。如果您希望您的注释也仍然在默认组中，那么您需要指定它。

```
 @Data private class Bar {
        @NotNull(groups={Checks.class, javax.validation.groups.Default.class})
        @Size(min = 2, groups={Checks.class, javax.validation.groups.Default.class})
        private String notempty;
    } 
```

# facebook - 不允许为应用“创建 Facebook 页面”

> ID：10528507
> 
> 赞同：3
> 
> 时间：2012-05-10T06:23:00.740
> 
> 标签：facebook, settings, facebook-apps

我只是想创建一个与我的应用关联的 Facebook 页面。这是我遇到的问题：

*   在我的 Facebook 应用程序高级设置的底部，我尝试 ***创建 Facebook 页面。***

*   它指出*“这将创建一个新的社区 Facebook 页面并将其与此应用程序相关联。您确定要继续吗？”*

*   我单击“确认”，然后显示*“不允许使用此名称创建内容。请尝试其他名称。”*

*   我怀疑这是因为我的应用程序显示名称是*“zuChat”*（我已经读过它必须是正确的），但是，更改名称的文本框被禁用。

为什么我无法更改名称，这甚至是创建 Facebook 页面的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T00:43:53.913

只需将您的应用程序的显示名称更改为全小写即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T13:15:16.277

我注意到 FB 不允许我创建页面名称包含“App”一词的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-08T08:35:46.750

我也有这个问题，我必须把第一个字母大写，其余的小写。对于您的应用程序，它将是“Zuchat”。

# c# - 一旦用户通过 Asp.Net 中的成员身份和角色创建新帐户后，我如何进行身份验证

> ID：10528511
> 
> 赞同：0
> 
> 时间：2012-05-10T06:23:20.877
> 
> 标签：c#, asp.net, asp.net-membership

我在 Asp.Net Membership 中创建了一个自定义 CreateUser。现在我想要的是在创建用户时它应该被重定向为 default.aspx 页面上的登录用户。我如何验证并重定向到默认页面。我不希望他再次登录，但是当用户成功创建时，它应该自动登录并转到默认页面。

这是我的代码。

```
public string AddUser(string UserName, string FirstName, string LastName, string Gender, string EmailID, string Password, string Mobile, string SecurityQuestion, string SecurityAnswer)
    {
        MembershipCreateStatus CreateStatus;

        MembershipUser newUser = Membership.CreateUser(UserName, Password, EmailID, SecurityQuestion, SecurityAnswer, true, out CreateStatus);

        if (CreateStatus == MembershipCreateStatus.Success)
        {

            Guid newUserId = (Guid)newUser.ProviderUserKey;

            if (RegisterCustomFields(newUserId, FirstName, LastName, Gender, Mobile) != 0)
            {
                Roles.AddUserToRole(newUser.UserName, "User");
                ReturnMsg = "Successfully Created ";
            }
            else
            {
                Membership.DeleteUser(newUser.UserName);
                ReturnMsg = "Error Creating User";
            }

        }
        else
        {

            switch (CreateStatus)
            {
                case MembershipCreateStatus.DuplicateUserName:
                    ReturnMsg = "There already exists a user with this username.";
                    break;

                case MembershipCreateStatus.DuplicateEmail:
                    ReturnMsg = "There already exists a user with this email address.";
                    break;
                case MembershipCreateStatus.InvalidEmail:
                    ReturnMsg = "There email address you provided in invalid.";
                    break;
                case MembershipCreateStatus.InvalidAnswer:
                    ReturnMsg = "There security answer was invalid.";
                    break;
                case MembershipCreateStatus.InvalidPassword:
                    ReturnMsg = "The password you provided is invalid. It must be seven characters long and have at least one non-alphanumeric character.";
                    break;
                default:
                    ReturnMsg = "There was an unknown error; the user account was NOT created.";
                    break;
            }

        }

        return ReturnMsg;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:28:20.597

注册成功后，编写以下代码。server.Transfer("~/Default.aspx");

对于身份验证：不确定您是否想知道他们是“注册”用户还是已登录（如登录状态所示）

这是要知道他们是否已登录（登录状态使用什么）：

System.Web.HttpContext.Current.User.Identity.IsAuthenticated;

试试这个：

```
protected void Login1_Authenticate(object sender, AuthenticateEventArgs e)
        {
            if(Membership.ValidateUser(Login1.UserName, Login1.Password))
            {
                Response.Redirect("default.aspx");
                // Set the user as logged in?
            }

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:29:44.100

如果您使用 FormsAuthentication ：

```
FormsAuthentication.SetAuthCookie(userName, isPrsistent); 
```

如果您使用 Asp.Net MVC，则：

```
return RedirectToAction("Index", "Home"); 
```

对于 WebForms，请参阅 user1237131 答案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:39:21.353

由于您已注册用户但未验证登录成功后用户不会自动登录

因此，在您发现用户已成功注册到应用程序并在注册后将他添加到特定角色后。然后您可以使用以下代码验证用户。

```
 if (Membership.ValidateUser(UserName, password.Text))
      {
      string[] role = Roles.GetRolesForUser(username.Text);
      string userrole = role[0].ToString();

      FormsAuthentication.SetAuthCookie(UserName, true);
      // Above line will create a Cookie on Browser and you can use this to check the authentication of the user. 
      if (userrole == "User")
          {
              Response.Redirect("~/Default.aspx", true);
          }
      else
          {
              Response.Redirect("~/UnAuthorizedPage.aspx", true);
          }
 } 
```

希望它可以帮助你:)

# java - POI 将单元格背景设置为自定义颜色

> ID：10528516
> 
> 赞同：38
> 
> 时间：2012-05-10T06:23:50.517
> 
> 标签：java, apache-poi, excel-2003

我想为单元格的背景设置自定义颜色。
我使用`HSSFWorkbook`（不能使用其他任何东西）。

```
HSSFPalette palette = aWorkBook.getCustomPalette();             
Color col = new Color(backgroundColor);                     
HSSFColor myColor  = palette.addColor((byte) 10, (byte) 11, (byte) 12); 
```

我收到此错误：`java.lang.RuntimeException: Could not find free color index`

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-01T16:30:19.363

您收到此错误是因为托盘已满。您需要做的是覆盖预设颜色。这是我正在使用的函数示例：

```
public HSSFColor setColor(HSSFWorkbook workbook, byte r,byte g, byte b){
    HSSFPalette palette = workbook.getCustomPalette();
    HSSFColor hssfColor = null;
    try {
        hssfColor= palette.findColor(r, g, b); 
        if (hssfColor == null ){
            palette.setColorAtIndex(HSSFColor.LAVENDER.index, r, g,b);
            hssfColor = palette.getColor(HSSFColor.LAVENDER.index);
        }
    } catch (Exception e) {
        logger.error(e);
    }

    return hssfColor;
} 
```

稍后将其用作背景颜色：

```
HSSFColor lightGray =  setColor(workbook,(byte) 0xE0, (byte)0xE0,(byte) 0xE0);
style2.setFillForegroundColor(lightGray.getIndex());
style2.setFillPattern(CellStyle.SOLID_FOREGROUND); 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2013-01-16T11:10:32.253

请参阅[http://poi.apache.org/spreadsheet/quick-guide.html#CustomColors](http://poi.apache.org/spreadsheet/quick-guide.html#CustomColors)。

自定义颜色

HSSF：

```
HSSFWorkbook wb = new HSSFWorkbook();
HSSFSheet sheet = wb.createSheet();
HSSFRow row = sheet.createRow((short) 0);
HSSFCell cell = row.createCell((short) 0);
cell.setCellValue("Default Palette");

//apply some colors from the standard palette,
// as in the previous examples.
//we'll use red text on a lime background

HSSFCellStyle style = wb.createCellStyle();
style.setFillForegroundColor(HSSFColor.LIME.index);
style.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);

HSSFFont font = wb.createFont();
font.setColor(HSSFColor.RED.index);
style.setFont(font);

cell.setCellStyle(style);

//save with the default palette
FileOutputStream out = new FileOutputStream("default_palette.xls");
wb.write(out);
out.close();

//now, let's replace RED and LIME in the palette
// with a more attractive combination
// (lovingly borrowed from freebsd.org)

cell.setCellValue("Modified Palette");

//creating a custom palette for the workbook
HSSFPalette palette = wb.getCustomPalette();

//replacing the standard red with freebsd.org red
palette.setColorAtIndex(HSSFColor.RED.index,
        (byte) 153,  //RGB red (0-255)
        (byte) 0,    //RGB green
        (byte) 0     //RGB blue
);
//replacing lime with freebsd.org gold
palette.setColorAtIndex(HSSFColor.LIME.index, (byte) 255, (byte) 204, (byte) 102);

//save with the modified palette
// note that wherever we have previously used RED or LIME, the
// new colors magically appear
out = new FileOutputStream("modified_palette.xls");
wb.write(out);
out.close(); 
```

XSSF：

```
XSSFWorkbook wb = new XSSFWorkbook();
XSSFSheet sheet = wb.createSheet();
XSSFRow row = sheet.createRow(0);
XSSFCell cell = row.createCell( 0);
cell.setCellValue("custom XSSF colors");

XSSFCellStyle style1 = wb.createCellStyle();
style1.setFillForegroundColor(new XSSFColor(new java.awt.Color(128, 0, 128)));
style1.setFillPattern(CellStyle.SOLID_FOREGROUND); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-08-02T18:03:10.893

别忘了叫这个。

```
style.setFillPattern(CellStyle.Align_Fill); 
```

参数可能会根据您的需要而有所不同。也许 CellStyle.FINE_DOTS 左右。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-22T20:23:04.627

57 岁以上的 NPOI excel indexedcolors 中的免费插槽

```
 Color selColor;

        var wb = new HSSFWorkbook();

        var sheet = wb.CreateSheet("NPOI");
        var style = wb.CreateCellStyle();
        var font = wb.CreateFont();
        var palette = wb.GetCustomPalette();

        short indexColor = 57; 
        palette.SetColorAtIndex(indexColor, (byte)selColor.R, (byte)selColor.G, (byte)selColor.B);

        font.Color = palette.GetColor(indexColor).Indexed; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-16T08:43:20.930

您可以使用此设置自定义颜色 -

看看这个 -[点击听到](https://dustbiin.blogspot.com/2020/08/custom-cell-color.html)

```
XSSFWorkbook workbook = new XSSFWorkbook();

IndexedColorMap colorMap = workbook.getStylesSource().getIndexedColors();
Font tableHeadOneFontStyle = workbook.createFont();
        tableHeadOneFontStyle.setBold( true );
        tableHeadOneFontStyle.setColor( IndexedColors.BLACK.getIndex() );

XSSFCellStyle tableHeaderOneColOneStyle = workbook.createCellStyle();
        tableHeaderOneColOneStyle.setFont( tableHeadOneFontStyle );
        tableHeaderOneColOneStyle
                .setFillForegroundColor( new XSSFColor( new java.awt.Color( 255, 231, 153 ), colorMap ) );
        tableHeaderOneColOneStyle.setFillPattern( FillPatternType.SOLID_FOREGROUND );
        tableHeaderOneColOneStyle = setLeftRightBorderColor( tableHeaderOneColOneStyle );
        tableHeaderOneColOneStyle = alignCenter( tableHeaderOneColOneStyle ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-09T14:00:57.773

正如[弗拉德的回答](https://stackoverflow.com/a/10854107/679240)所指出的那样，您的免费颜色槽已经用完了。解决这个问题的一种方法是缓存颜色：每当您尝试 RGB 组合时，例程应该首先检查该组合是否在缓存中；如果它在缓存中，那么它应该使用那个而不是从头开始创建一个新的；只有当它们尚未在缓存中时，才会创建新颜色。

这是我使用的实现；它使用 XSSF 和[Guava 的 LoadingCache](https://github.com/google/guava/wiki/CachesExplained)，并针对 CSS`rgb(r, g, b)`声明中的生成 XSSF 颜色，但将其适应 HSSF 应该相对简单：

```
 private final LoadingCache<String, XSSFColor> colorsFromCSS = CacheBuilder.newBuilder()
            .build(new CacheLoader<String, XSSFColor>() {

                private final Pattern RGB = Pattern.compile("rgb\\(\\s*(\\d+)\\s*, \\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)");

                @Override
                public XSSFColor load(String style) throws Exception {
                    Matcher mat = RGB.matcher(style);
                    if (!mat.find()) {
                        throw new IllegalStateException("Couldn't read CSS color: " + style);
                    }                       
                    return new XSSFColor(new java.awt.Color(
                            Integer.parseInt(mat.group(1)), 
                            Integer.parseInt(mat.group(2)), 
                            Integer.parseInt(mat.group(3))));
                }

            }); 
```

也许其他人可以发布等效的 HSSF？;)

# php - 日期比较

> ID：10528518
> 
> 赞同：-1
> 
> 时间：2012-05-10T06:24:30.833
> 
> 标签：php

我写了一些代码来比较日期，这里我遇到的问题是当我输入日期时 2012/mar/23 给出的输出有时正确，有时错误。当我输入日期为 2012/03/23 时也给出输出有时正确，有时错误。我该如何解决这个问题？

```
<?php
    $month = 2;
    $year = 2012;
    $saturday = strtotime('First Saturday '.date('F o', mktime(0,0,0, $month, 1, $year)));
    echo date('Y/M/d', $saturday);
    $sat1 = strtotime($saturday);
    echo "<br/>";
    $season1 = strtotime ( '+12 week' , $saturday);
    $season2= date ( 'Y/M/d' , $season1 );
    echo $season2;
    $season = strtotime($season1);
    echo "<br/>";
    $date = $_POST["date"];
    echo $date;
    $date1 = strtotime($date);
    echo "<br/>";
    $abc = strtotime ('+1 week' , $season1);
    $abc = date ('Y/M/d', $abc);
    echo "<br/>";
    echo $abc;
    $abc1 = strtotime($abc);
    if ($date1 <= $abc1)
    {
        if ($date1 <= $season)
        {
            echo "League already opened";
        }
        else if($date1 > $season)
        {
        echo "league successfully closed";
        }
    }
    else 
    {
        echo "league 1 closed"; 
    }
    if(!isset($POST['submit'])) {
?>
    <form method="post" action=" ">
        <label>enter date in YYYY/MM/DD format</label>
        <input type="text" name="date" size="10" />
        <input type="submit" value="submit" name="submit">
    </form>
<?
    }
?> 
```

并在输出中显示 if condition.before 中的 msg 提交表单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:47:40.183

试试这样：

```
$date = DateTime::createFromFormat('Y/m/d', '2012/03/23');
echo $date->format('Y/m/d'); 
```

或像这样：

```
$date = DateTime::createFromFormat('Y/M/d', '2012/Mar/23');
echo $date->format('Y/m/d'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:50:28.353

在您的代码`date('Y/M/d')`格式中是主要问题。它为它返回空时间戳，因此它会生成不正确的答案。所以请在此处使用 Y/m/d 格式作为 strtotime。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:44:00.623

strtotime 不支持 "Y/M/d"

它只支持“Y/m/d”（注意小写m）

[单击此处获取](http://www.php.net/manual/en/datetime.formats.date.php)strtotime 支持的格式列表。

所以你的逻辑应该有一个数据类型“Y/m/d”，当你想为你的用户输出到屏幕时，只需将显示格式化为“Y/M/d”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:09:21.427

要解决您的问题，请按照以下步骤操作：

1.不要使用Y/M/d格式进行操作。仅使用 Ymd 格式。

2.“第一个星期六”是从给定日期计算的。如果给定日期已经是星期六，则计算下一个日期。

3.你一次又一次地为`strtotime()`and`date()`函数付出代价

4.使用 Y/M/d 格式，如果你想要`strtotime()`星期六在表示层，那你为什么又要转换成日期格式呢？

简而言之，为了更清楚，将您的表示和操作分开。这是因为你同时做这两件事。

# php - 循环处理文件并计算所选实例

> ID：10528520
> 
> 赞同：0
> 
> 时间：2012-05-10T06:24:35.030
> 
> 标签：php

我有这个文件，我想计算每个“ROBxx”的实例数。该文件可以包含数千行。循环槽和计数的最简单方法是什么？

2012.05.08 11:15:49 ROB52 4mm

2012.05.08 11:15:56 ROB42 5mm

2012.05.08 11:15:59 ROB30 4mm

2012.05.08 11:16:01 ROB52 4mm

2012.05.08 11:16:04 ROB42 2mm

2012.05.08 11:16:05 ROB06 4mm

2012.05.08 11:16:06 ROB52 4mm

2012.05.08 11:16:10 ROB52 4mm

2012.05.08 11:16:11 ROB30 3mm

该文件在计数后的结果应该是：

ROB52：4

ROB42：2

ROB30：2

ROB06：1

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:34:59.523

```
$handle = fopen("input.txt", "r");
$hash = array();
if ($handle) {
        while (($buffer = fgets($handle)) !== false) {
                if(preg_match('/\b(ROB\d+)\b/',$buffer,$m)) {
                        $hash[$m[1]] = (isset($hash[$m[1]])?($hash[$m[1]]+1):1);
                }
        }
        foreach($hash as $k=>$v) {
                print "$k : $v\n";
        }
} else {
        // error openeing file.
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:33:38.900

首先，使用字符串和整数创建一个二维数组（或列表或其他）。现在您可以遍历每一行并执行以下操作：

剪下“ROBxx”字符串并将其保存为字符串。

检查字符串的二维数组。如果你找到它，增加计数。如果数组中还没有，添加它并将计数设置为 1。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:33:51.457

```
$string = file_get_contents(filename)
$count = preg_match_all('/ROB[0-9]{2}/', $string, $aMatches); 
```

# android - 调用 web 服务时的 SocketTimeout 异常

> ID：10528527
> 
> 赞同：1
> 
> 时间：2012-05-10T06:24:49.660
> 
> 标签：android, socket-timeout-exception

我在使用 android v4.0.3 的应用程序中使用 web 服务，但是当我到达 `HttpTransportse`Shows`SocketTimeoutException`并没有得到响应时。相同的代码在 android.v.2.2 中完美运行

我在 logcat 中得到以下异常

```
05-10 11:18:38.245: W/System.err(849): java.net.SocketTimeoutException
05-10 11:18:38.255: W/System.err(849):  at org.ksoap2.transport.HttpTransportSE.call(HttpTransportSE.java:130)

KSoap jar
---------
KSoap2 library android:2.5.2.jar 
```

这是代码

```
public class busTravellDetailslistActivity extends Activity {
/** Called when the activity is first created. */
Button b;
EditText rteid,trvname,bustyp,deptm,arvtm;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    b=(Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            SoapObject request = new SoapObject("http://***********/WS2","TestRouteDataMobile");
                //System.out.println("req count:"+request.getPropertyCount()); 
            SoapSerializationEnvelope envelope=new SoapSerializationEnvelope(SoapEnvelope.VER11);

              envelope.setOutputSoapObject(request);

              HttpTransportSE transport = new HttpTransportSE("http://**********/RouteSearchService.asmx");//namespace
                try {

                    transport.call("http://***********/TestRouteDataMobile",envelope);
                    System.out.println("aftr call");
                } catch (SocketTimeoutException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (XmlPullParserException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                    SoapObject response;
                    try {
                        response = (SoapObject)(envelope.getResponse());

                        Log.i("Response",response.toString());

                    } catch (SoapFault e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }

            // TODO Auto-generated method stub

                }
    });
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T07:52:31.657

我花了将近 2-3 个小时来解决这个问题，解决方案非常简单。当您以错误的 IP 访问 Web 服务或服务出现问题时，就会出现此问题。但是除了这两个之外，您需要注意一件事，即如果 Web 服务托管在 Http 上，那么您应该使用`HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);`，如果您的 Web 服务位于 https，则使用`HttpsTransportSE aht = new KeepAliveHttpsTransportSE(IP, 443,SERVICEPATH, 25000);`. 我希望能帮助你。

# ios - ABAddressBook 如何设置返回的 ABRecordRef 的组？

> ID：10528531
> 
> 赞同：0
> 
> 时间：2012-05-10T06:25:30.380
> 
> 标签：ios, xcode, abaddressbook

所以我调用这个方法：

```
- (void)newPersonViewController:(ABNewPersonViewController*)newPersonViewController didCompleteWithNewPerson:(ABRecordRef)person 
```

它返回一个 ABRecordRef。但是我看不到使用 ABGroupAddMember 的组。

如果我手动创建 ABRecordRef，我可以设置组，但不能使用委托方法返回的*人员*对象。

例如，此代码有效（从此处的帖子借用，找不到链接）：

```
CFErrorRef error = NULL;

// create address book record
ABAddressBookRef addressBook = ABAddressBookCreate(); 
// create a person  
ABRecordRef person = ABPersonCreate();  
// first name of the new person
ABRecordSetValue(person, kABPersonFirstNameProperty, @"FirstName" , nil);
// his last name 
ABRecordSetValue(person, kABPersonLastNameProperty, @"LastName", nil);  
//add the new person to the record
ABAddressBookAddRecord(addressBook, person, nil); 

ABAddressBookSave(addressBook, &error);

ABRecordRef group = ABGroupCreate(); //create a group 
ABRecordSetValue(group, kABGroupNameProperty,@"My Group", &error); // set group's name 
ABAddressBookAddRecord(addressBook, group, &error); // add the group   
ABAddressBookSave(addressBook, &error);

ABGroupAddMember(group, person, &error); // add the person to the group         
ABAddressBookSave(addressBook, &error);

//save the record
ABAddressBookSave(addressBook, nil);  

// relase the ABRecordRef  variable
CFRelease(person); 
```

如何使该代码与返回的 Person ABRecordRef 对象一起使用？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:54:38.230

好的，所以修复了它（有时问这个问题会让你头脑清醒以解决它）

```
int i = ABRecordGetRecordID(person);
ABRecordRef p = ABAddressBookGetPersonWithRecordID(addressBook,i); 
```

正确创建新的 ABRecordRef 似乎可以解决问题。不知道为什么。也许有人可以说为什么你需要重铸它？

# performance - 这些 cpu 操作是否相同？

> ID：10528532
> 
> 赞同：0
> 
> 时间：2012-05-10T06:25:34.407
> 
> 标签：performance, cpu, complexity-theory, atomic, cpu-cycles

考虑以下两个 cpu 操作：

总和 = 1 + 1 + 1 + 1 + 1 + 1+ 1+......n 次

和 = 1 * n

现在我想知道天气这两个操作在复杂性和 cpu 时间方面是不同的。我也可以将这些视为原子操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:29:21.167

ADD 和 MUL 是不同的操作。

在第一个语句中，您有 N ADD 操作 -> 许多 cicles。

在第二个你有一个操作 - >几个周期。

但是，这取决于编译器将如何执行这些语句。（编译器可能会在编译时将 1+1+1+...+1 替换为 N，因此可执行文件将执行一次操作。但在这种情况下编译器将执行 N 次操作。）

**更新**：存在 MUL 操作：[http ://en.wikipedia.org/wiki/X86_instruction_listings](http://en.wikipedia.org/wiki/X86_instruction_listings)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:05:16.607

在 x86 上，ADD 执行聚合只需不到一个周期，MUL 大约需要 2.7 个周期。

编译器中的优化器非常聪明。如果你正在做一个乘法，它可以使用移位做得更快，并添加它。

编写代码以尽可能简单的方式说明您在做什么，编译器和处理器将通过为您提供快速代码来奖励您。

# c - 如何修复：struct _reent r = {0, (FILE *) 0 }？struct _reent 是任何工具链的一部分吗？

> ID：10528536
> 
> 赞同：0
> 
> 时间：2012-05-10T06:26:07.693
> 
> 标签：c, cross-compiling, atmel

使用 arm 交叉编译器编译 Atmel 示例时：

**../at91lib/utility/stdio.c:64:8：错误：变量 'r' 具有初始化程序但类型不完整**

代码是：

```
struct _reent r = {0, (FILE *) 0, (FILE *) 1, (FILE *) 0}; 
```

我不知道我能在这里做什么，因为首先我需要了解这段代码的含义？

然后我可以为我的编译器重新编码吗？或者我必须将编译器降级到其他版本吗？

我的版本：arm-unknown-linux-uclibcgnueabi-gcc (Buildroot 2012.05-git-00423-g4205dbd) 4.5.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:51:49.833

来自[AT91SAM 社区](http://www.at91.com/forum/viewtopic.php/f,8/t,5352/)：

> 看起来您必须使用正确版本的编译器：要让 sam-ba 小程序在 linux 下编译，您必须使用 Sourcery G++ Lite 2008q3-39 for ARM EABI，来自 [http://www.codesourcery.com/sgpp/ lite/arm/portal/release567](http://www.codesourcery.com/sgpp/lite/arm/portal/release567)任何新的或旧的都会产生（不同的）错误。

# hadoop - 从 HDFS 到 Amazon S3 的 Hadoop distcp 问题

> ID：10528540
> 
> 赞同：9
> 
> 时间：2012-05-10T06:26:30.100
> 
> 标签：hadoop, amazon-web-services, amazon-s3

我正在尝试使用`distcp`. 这项`distcp`工作似乎成功了，但在 S3 上没有正确创建文件。有两个问题：

1.  不会复制文件名和路径。所有文件最终都`block_<some number>`位于存储桶的根目录。
2.  它在 S3 上创建了一堆带有一些元数据和日志的额外文件。

我找不到任何文档/示例。我错过了什么？我该如何调试？

以下是更多细节：

```
$ hadoop version 
Hadoop 0.20.2-cdh3u0
Subversion  -r 
Compiled by diego on Sun May  1 15:42:11 PDT 2011
From source with checksum 
hadoop fs –ls hdfs://hadoopmaster/data/paramesh/
…&lt;bunch of files>…

hadoop distcp  hdfs://hadoopmaster/data/paramesh/ s3://<id>:<key>@paramesh-test/
$ ./s3cmd-1.1.0-beta3/s3cmd ls s3://paramesh-test

                       DIR   s3://paramesh-test//
                       DIR   s3://paramesh-test/test/
2012-05-10 02:20         0   s3://paramesh-test/block_-1067032400066050484
2012-05-10 02:20      8953   s3://paramesh-test/block_-183772151151054731
2012-05-10 02:20     11209   s3://paramesh-test/block_-2049242382445148749
2012-05-10 01:40      1916   s3://paramesh-test/block_-5404926129840434651
2012-05-10 01:40      8953   s3://paramesh-test/block_-6515202635859543492
2012-05-10 02:20     48051   s3://paramesh-test/block_1132982570595970987
2012-05-10 01:40     48052   s3://paramesh-test/block_3632190765594848890
2012-05-10 02:20      1160   s3://paramesh-test/block_363439138801598558
2012-05-10 01:40      1160   s3://paramesh-test/block_3786390805575657892
2012-05-10 01:40     11876   s3://paramesh-test/block_4393980661686993969 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T23:19:14.117

您应该使用 s3n 而不是 s3。

s3n 是本机文件系统实现（即常规文件），使用 s3 对文件施加 hdfs 块结构，因此如果不通过 h​​dfs 库就无法真正阅读它们。

因此：

```
hadoop distcp hdfs://file/1 s3n://bucket/destination 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T06:34:20.877

Amazon 创建了一个 distcp 版本，该版本针对 hdfs 和 s3 之间的传输进行了优化，他们恰当地称为 s3distcp。您可能也想检查一下。它旨在与 Amazon EMR 一起使用，但 jar 在 s3 中可用，因此您可以在 EMR 作业流之外使用它。

[http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_s3distcp.html](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/UsingEMR_s3distcp.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-22T20:30:07.723

如果您在 HDFS 中的文件大于 5GB，您将在 distcp 作业中遇到如下错误：

```
Caused by: org.jets3t.service.S3ServiceException: S3 Error Message. -- ResponseCode: 400, ResponseStatus: Bad Request, XML Error Message: <?xml version="1.0" encoding="UTF-8"?><Error><Code>EntityTooLarge</Code><Message>Your proposed upload exceeds the maximum allowed size</Message><ProposedSize>23472570134</ProposedSize><MaxSizeAllowed>5368709120</MaxSizeAllowed><RequestId>5BDA6B12B9E99CE9</RequestId><HostId>vmWvS3Ynp35bpIi7IjB7mv1waJSBu5gfrqF9U2JzUYsXg0L7/sy42liEO4m0+lh8V6CqU7PU2uo=</HostId></Error> at org.jets3t.service.S3Service.putObject(S3Service.java:2267) at org.apache.hadoop.fs.s3native.Jets3tNativeFileSystemStore.storeFile(Jets3tNativeFileSystemStore.java:122) ... 27 more Container killed by the ApplicationMaster. Container killed on request. Exit code is 143 Container exited with a non-zero exit code 143 
```

要解决此问题，请使用`s3n`@matthew-rathbone 建议的文件系统，但使用`-Dfs.s3n.multipart.uploads.enabled=true`如下：

```
hadoop distcp -Dfs.s3n.multipart.uploads.enabled=true hdfs://file/1 s3n://bucket/destination 
```

或者

使用“下一代”s3 文件系统，`s3a`例如：

```
hadoop distcp -Dfs.s3a.endpoint=apigateway.us-east-1.amazonaws.com hdfs://file/1 s3a://bucket/destination 
```

这些选项和文档住在这里：[https ://hadoop.apache.org/docs/stable/hadoop-aws/tools/hadoop-aws/index.html](https://hadoop.apache.org/docs/stable/hadoop-aws/tools/hadoop-aws/index.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-02T12:50:26.450

为 Apache Hadoop 2.7+ 更新此内容，并忽略 Amazon EMR，因为他们在那里进行了更改。

1.  如果您使用的是 Hadoop 2.7 或更高版本，请使用 s3a 而不是 s3n。这也适用于 HDP 和 AFAIK、CDH 的最新版本。
2.  这支持 5+GB 文件，还有其他不错的功能等。在读取文件时它明显更好——并且随着时间的推移只会变得更好。
3.  Apache s3:// 应该被视为已弃用 - 您不再需要它，也不应该使用它。
4.  Amazon EMR 使用“s3://”来指代他们自己的、自定义的、绑定到 S3 的。如果您在 EMR 上运行，这就是您应该使用的。

提高使用对象存储的 distcp 可靠性和性能仍然是一项正在进行的工作......一如既往地欢迎贡献。

# ios - 使用异步 NSURLConnection 收到警告

> ID：10528546
> 
> 赞同：2
> 
> 时间：2012-05-10T06:27:17.930
> 
> 标签：ios, objective-c, nsurlconnection

我试图避免这个警告正在使用`NSURLConnection`：

```
-(void)goGetData{
    responseData = [NSMutableData data];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://somefile.php"]];
    [[NSURLConnection alloc]initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response{
    [responseData setLength:0];
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [responseData appendData:data];
}

- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    //label.text = [NSString stringWithFormat:@"Connection failed: %@", [error description]];
    NSLog(@"Connection failed: %@",error);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];

    NSMutableArray *qnBlock = [responseString JSONValue];
    for (int i = 0; i < [qnBlock count]; i++){
        NSLog(@"%@",[qnBlock objectAtIndex:i]);
    }
} 
```

警告在线：

```
[[NSURLConnection alloc]initWithRequest:request delegate:self]; 
```

警告是：

```
Expression result unused. 
```

整个代码运行良好，但我只是采取预防措施。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:13:09.943

两种方法都分配一个对象。

使用分配，

```
[[NSURLConnection alloc]initWithRequest:request delegate:self]; 
```

你有责任释放它。

使用 connectWithRequest，

```
[NSURLConnection connectionWithRequest:request delegate:self]; 
```

它由自动释放池保留。我的猜测是，由于它由自动释放池保留，因此您不需要句柄来释放它，并且编译器对自动释放池具有句柄感到满意。

使用 alloc，编译器可能希望您保留一个句柄以便稍后发布。因此，它将其标记为警告。

事实是委托方法获得了句柄，无论您是否明确保留一个。因此，您可以使用传递给委托方法的句柄来释放它。该警告确实是虚假的，但它只是一个警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:32:26.447

您可以执行以下操作：

```
[NSURLConnection connectionWithRequest:request delegate:self]; 
```

代替：

```
[[NSURLConnection alloc]initWithRequest:request delegate:self]; 
```

# c# - C# 中 mdi 父级中的子窗体

> ID：10528547
> 
> 赞同：1
> 
> 时间：2012-05-10T06:27:18.503
> 
> 标签：c#, winforms

我使用以下代码在 MDI 父窗体中显示子窗体。如您所知，单击该按钮将导致出现一个新表单。继续单击该按钮，您的屏幕将充满空白表格。为了阻止这种情况发生，我将创建表单的代码移到了按钮之外。

像这样：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    Form2 f2 = new Form2();    

    private void button1_Click(object sender, EventArgs e)
    {
        f2.MdiParent = this;
        f2.Show();
    } 
```

但是当我关闭子窗体并想再次打开它时，它不会让我。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T06:41:31.260

您需要跟踪表单状态，以便知道您需要创建一个新表单。像这样：

```
private Form2 f2;    

private void button1_Click(object sender, EventArgs e)
{
    if (f2 == null) {
       f2 = new Form2();
       f2.MdiParent = this;
       f2.FormClosed += delegate { f2 = null; };
       f2.Show();
    }
    else {
       f2.Activate();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:57:54.390

您不想将所有表单（两次）保留为变量。所有 mdi 表单都添加到您的 MdiChildren 集合中。因此，您需要检查是否需要显示您创建的表单。像这样：

```
private void button1_Click(object sender, EventArgs e) 
{ 
    Form2 f2 = new Form2();
    f2.MdiParent = this; 
    OpenMdiChild(f2);
} 
private void OpenMdiChild(Form newForm)
{
    bool found = false;
    foreach (Form frm in this.MdiChildren)
    {
        if (frm.GetType() == newForm.GetType())
                {
                        frm.Activate();
                        frm.Focus();
                        //frm.BringToFront();
            found = true;
            break;
                }
    }
    if (!found)
    {
        frm.Show();
    }
} 
```

如果您希望用户只打开 1 个表单，您可以将 OpenMdi-- 方法更改为：

```
private void OpenMdiChild(Form newForm) 
{ 
    bool found = (this.MdiChildren.Length > 0);  
    if (!found) 
    { 
        foreach (Form frm in this.MdiChildren) 
        { 
            if (frm.GetType() == newForm.GetType()) 
            { 
            frm.Activate(); 
                    frm.Focus(); 
                    //frm.BringToFront(); 
                    found = true; 
                break; 
                } 
        } 
    if (!found)
    {
            frm.Show(); 
    }
    } 
} 
```

# facebook - 如何请求用户向我提供特定应用的访问令牌？

> ID：10528548
> 
> 赞同：0
> 
> 时间：2012-05-10T06:27:24.077
> 
> 标签：facebook, facebook-graph-api

用户已获授权使用我的 Facebook 应用。该应用程序提供了一个表单，用户需要在其中输入他的应用程序 ID。还有一个表单输入请求输入该特定应用程序的访问令牌。问题是给用户指令：

> 请为您的应用提供访问令牌。可以通过转到 https://graph.facebook.com/oauth/access_token?grant_type=client_credentials&client_id=[your app ID]&client_secret=[your app secret] 来检索此信息。

这不是用户友好的。有没有其他选择？比如..一个带有回调的弹出窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T13:44:13.047

听起来您想使用应用程序访问令牌，我不确定这是否可能。

您可以使用权限调用`/me/accounts`以`manage_pages`获取*用户*访问令牌。

# fxcop - ASP.NET Web 应用程序的 FxCop 规则列表子集

> ID：10528551
> 
> 赞同：0
> 
> 时间：2012-05-10T06:27:34.763
> 
> 标签：fxcop

我们正在将 FxCop 与 VS 2010 专业版集成以使用 FxCop 集成 VS 扩展进行代码分析。我们已经看到，通过在 FxCop 中配置的所有默认规则集，我们得到了一大堆点报告，这些点很好，但不一定严格违反最佳实践，或者在大多数情况下可以不用。是否有任何规则列表，本质上是 FxCop 中所有规则的子集，人们通常使用这些规则对基于 Web 的项目进行代码分析，这些规则被认为是必须具备的。我们用谷歌搜索了一下，但找不到一个单一的（关于忽略基于个人选择的特定规则的讨论遍布整个网络）资源，其中列出了社区通常遵循的基于 web 的 asp.net/C# 的首选规则子集项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:33:01.813

实际上我正在使用 TeamCity 集成，但规则应该相同。尝试以下一次：

```
<?xml version="1.0" encoding="utf-8"?>
<FxCopProject Version="1.36" Name="testApplication">
 <ProjectOptions>
  <SharedProject>True</SharedProject>
  <Stylesheet Apply="False">\tools\fxcop\Xml\FxCopReport.xsl</Stylesheet>
  <SaveMessages>
   <Project Status="Excluded" NewOnly="False" />
   <Report Status="Active" NewOnly="False" />
  </SaveMessages>
  <ProjectFile Compress="True" DefaultTargetCheck="True" DefaultRuleCheck="True" SaveByRuleGroup="" Deterministic="True" />
  <EnableMultithreadedLoad>True</EnableMultithreadedLoad>
  <EnableMultithreadedAnalysis>True</EnableMultithreadedAnalysis>
  <SourceLookup>True</SourceLookup>
  <AnalysisExceptionsThreshold>10</AnalysisExceptionsThreshold>
  <RuleExceptionsThreshold>1</RuleExceptionsThreshold>
  <Spelling Locale="en-GB" />
  <OverrideRuleVisibilities>False</OverrideRuleVisibilities>
  <CustomDictionaries SearchFxCopDir="True" SearchUserProfile="True" SearchProjectDir="True" />
  <SearchGlobalAssemblyCache>False</SearchGlobalAssemblyCache>
  <DeadlockDetectionTimeout>120</DeadlockDetectionTimeout>
  <IgnoreGeneratedCode>False</IgnoreGeneratedCode>
 </ProjectOptions>
 <Targets>
    <Target Name="$(ProjectDir)/../../solution/PrecompiledWeb/application/bin/App_Code.dll" Analyze="True" AnalyzeAllChildren="True" />
 </Targets>
 <Rules>
  <RuleFiles>
   <RuleFile Name="$(FxCopDir)\Rules\DesignRules.dll" Enabled="True" AllRulesEnabled="True" />
   <RuleFile Name="$(FxCopDir)\Rules\GlobalizationRules.dll" Enabled="True" AllRulesEnabled="True" />
   <RuleFile Name="$(FxCopDir)\Rules\InteroperabilityRules.dll" Enabled="True" AllRulesEnabled="True" />
   <RuleFile Name="$(FxCopDir)\Rules\MobilityRules.dll" Enabled="True" AllRulesEnabled="True" />
   <RuleFile Name="$(FxCopDir)\Rules\NamingRules.dll" Enabled="True" AllRulesEnabled="True" />
   <RuleFile Name="$(FxCopDir)\Rules\PerformanceRules.dll" Enabled="True" AllRulesEnabled="True" />
   <RuleFile Name="$(FxCopDir)\Rules\PortabilityRules.dll" Enabled="True" AllRulesEnabled="True" />
   <RuleFile Name="$(FxCopDir)\Rules\SecurityRules.dll" Enabled="True" AllRulesEnabled="True" />
   <RuleFile Name="$(FxCopDir)\Rules\UsageRules.dll" Enabled="True" AllRulesEnabled="True" />
  </RuleFiles>
  <Groups />
  <Settings />
 </Rules>
 <FxCopReport Version="1.36" />
</FxCopProject> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:33:19.447

不，没有这样的野兽。即使有，你怎么能确定创建列表的人所做的决定确实适合你的情况？

规则只有 200 条左右。为什么不坐一两个小时来弄清楚你认为哪些是重要的呢？您甚至可以走捷径，只查看当前给您违规的那些。这可能会使筛选工作减少到每小时不到 1/2。

# apache - .htaccess 不工作 apache-tomcat

> ID：10528552
> 
> 赞同：5
> 
> 时间：2012-05-10T06:27:36.617
> 
> 标签：apache, .htaccess, tomcat, mod-jk

我有一个与 mod_jk 集成的 apache tomcat 服务器。我在要限制的目录中创建了 .htaccess 文件。但问题是 .htaccess 在 apache 提供的目录中工作，但不在由 tomcat 提供的目录中。

Apache 文档根目录是 /var/ww/html 我在它下面创建了一个测试目录并且它工作正常。

但是在 /usr/local/src/apache-tomcat-6.0.35/webapps/examples 我创建了一个 .htaccess 并且它不起作用。

可能是什么原因？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-10T06:40:03.080

`.htaccess`是 Apache Web 服务器文件，而不是 Tomcat。Tomcat 只是忽略这些文件。如果您通过 mod_jk 为您的应用程序提供服务，那么`JkMount`映射到的任何内容都由 Tomcat 提供服务，并且不会处理任何 .htaccess。如果您需要密码保护 Tomcat 目录，您需要在 Tomcat 中创建一个 Realm 并保护 Web 资源。一个古老但我认为仍然准确的[例子](http://onjava.com/pub/a/onjava/2001/07/24/tomcat.html)

# ios - 无法在通用应用程序中加载 -ipad 图像

> ID：10528559
> 
> 赞同：0
> 
> 时间：2012-05-10T06:28:04.293
> 
> 标签：ios, ipad, cocos2d-iphone

我正在使用 cocos2d 创建一个通用 ios 2D 游戏。我的命名约定为 imageName-ipad.png 的图像很少，但是当我尝试使用以下行加载时，应用程序无法加载此图像。

```
coinItem =[CCMenuItemImage itemFromNormalImage:@"coins.png" selectedImage:@"coins.png" target:self selector:@selector(coinsSelected:)]; 
```

其中 coinItem 是 CCMenuItem 类型。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:29:24.847

应该是`imageName~ipad.png`
并且对于新 iPad`imageName@2x~ipad.png`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:10:44.927

我已经从 Cocos2d 论坛确认 -ipad 支持不在 Cocos2d 的 1.0.1 版本中。所以我修改了 CCFileUtils.m - getDoubleResolutionImage 方法来实现对 ipad 的支持。

# php - 替换百分比（符号和值）和括号

> ID：10528566
> 
> 赞同：1
> 
> 时间：2012-05-10T06:28:36.633
> 
> 标签：php, regex

我从客户那里收到一个像这样的字符串：

```
"a, b, c, d 5%, e, f, g 76%, h (string,string), i" 
```

我想创建一个正则表达式，可以从字符串中删除 5%、76%（以及任何其他可能的百分比值 n%）和括号（括号开头被逗号替换）。期望的结果是：

```
"a, b, c, d, e, f, g, h, string, string, i" 
```

这可以用PHP吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:37:56.183

```
$cleaned = preg_replace('/[%()]/', '', $input) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:31:25.480

是的，这可以通过 PHP，使用这个函数： http: [//php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

您将需要编写一个正则表达式来匹配您的条件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T06:38:50.527

您对大括号的定义有点不清楚，但如果我假设没有其他打开右大括号，请使用：

```
$line = "a, b, c, d 5%, e, f, g 76%, h (string,string), i";
$line = preg_replace('/\s+\d+%/', '', $line);
$line = preg_replace('/\s*\(/', ', ', $line);
$line = preg_replace('/\s*\)\s*/', '', $line);
$line = preg_replace('/,(\S)/', ', $1', $line);
echo $line; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:33:51.747

您想使用此代码：

```
preg_replace('/ *\d*\%/','', 'a, b, c, d 5%, e, f, g 76%, h (string,string), i'); 
```

这是[示例](http://regexr.com?30tb9)（切换到替换选项卡并清理替换文本）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-10T07:06:22.697

```
$string = "a, b, c, d 5%, e, f, g 76%, h (string,string), i";
$string = preg_replace('/\s+\d+%|\)/', '', $string);
$string = str_replace('(', ',', $string);
$string = preg_replace('/\s*,\s*/', ', ', $string); 
```

# drupal - Drupal 6 和 Ubercart 2 - 在属性范围内搜索

> ID：10528567
> 
> 赞同：0
> 
> 时间：2012-05-10T06:28:37.213
> 
> 标签：drupal, search, range, ubercart

我正在建立一个网站，客户可以根据他们的代码订购锁和钥匙。

理想情况下，我们有一个系统，客户可以搜索代码，即 FKC 348，然后 drupal/ubercart 会显示其所在的组（FKC 1 - 15000），并可以选择添加到购物车以及他们输入的特定代码.

我查看了“范围内搜索”模块和补丁，但它们似乎主要处理定价问题。我可以使用 CCK 创建 'from' 和 'to' 字段并结合视图过滤来提供此功能吗？还是我会查看自定义模块/编码？

大约有 400 个组和 300 万个单独的代码，因此将每个代码添加为属性或标签是不行的。

非常欢迎任何帮助或指点，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T10:14:00.067

我认为您必须使用分面搜索或 solr 搜索。分面搜索可能是您的选择，因为您的数据并不多，而且分面搜索为您提供类别搜索、基于分类的搜索以及属性/字段搜索。

您可以使用 ubercart 的产品 SKU 字段进行搜索，因为 SKU 可能代表您的产品唯一代码。

希望这可以帮助。

# jquery - 缩略图助手 fancybox v2.0.6

> ID：10528568
> 
> 赞同：1
> 
> 时间：2012-05-10T06:28:47.210
> 
> 标签：jquery, fancybox

我正在使用带有缩略图助手的最新幻想框。它工作正常。我想知道我是否可以更改缩略图选项。当前，当您单击任何缩略图时，缩略图的位置会发生变化。如果您从第一个图像到最后一个图像，则流程是从左到右的。我希望将拇指固定为对齐中心。有谁知道如何实现它？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T01:14:18.570

我在处理的自定义缩略图脚本中遇到了类似的问题。您需要编辑 helpers 文件夹中的 jquery.fancybox-thumbs.js。

将第 116 行更改为：

```
this.list.width(this.width * (obj.group.length + 1)).css('left', Math.floor($(window).width() * 0.5 - ((this.width * (obj.group.length) * 0.5)))); 
```

然后第 148 行到：

```
'left': Math.floor($(window).width() * 0.5 - (this.width * (obj.group.length) * 0.5)) 
```

这应该使拇指居中并在更改图像时删除动画，同时在调整窗口大小时保持拇指居中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T19:21:40.657

对于 iOS 兼容性，请使用带有 javascript 属性的@Scottorchard 答案，`window.innerWidth`而不是`$(window).width()`：

**第 116 行：**

```
this.list.width(this.width * (obj.group.length + 1)).css('left', Math.floor(window.innerWidth * 0.5 - ((this.width * (obj.group.length) * 0.5)))); 
```

**第 148 行：**

```
'left': Math.floor(window.innerWidth * 0.5 - (this.width * (obj.group.length) * 0.5)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-08T19:32:57.797

实际上有一个更简单的解决方案。进入缩略图的 CSS 并更改 ul 的边距：

```
ul {
    margin: 0 auto;
} 
```

就像您对任何普通网页一样。这对我来说非常有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-07T08:11:01.903

替换#fancybox-thumbs ul

和

```
#fancybox-thumbs ul {
position: relative;
list-style: none;
margin: auto;
padding: 0;
left: 0 !important; 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-09T12:57:09.433

只是补充 scottorchard 的答案（我还不能发表评论），如果您想更改拇指的 de css 规范，请注意第 116 行：

“3”表示边框，“0.71”表示拇指的宽度。更改 css 属性后，您也必须更改此 js 行。

我的是这样的：

```
this.list.width(this.width * (obj.group.length + 3)).css('left', Math.floor($(window).width() * 0.71 - ((this.width * (obj.group.length) * 0.71)))); 
```

# java - Java 并发实践 - 示例 14.12

> ID：10528572
> 
> 赞同：19
> 
> 时间：2012-05-10T06:29:20.863
> 
> 标签：java, multithreading, concurrency, locking

```
// Not really how java.util.concurrent.Semaphore is implemented
@ThreadSafe
public class SemaphoreOnLock {
    private final Lock lock = new ReentrantLock();
    // CONDITION PREDICATE: permitsAvailable (permits > 0)
    private final Condition permitsAvailable = lock.newCondition();
    @GuardedBy("lock") private int permits;

    SemaphoreOnLock(int initialPermits) {
        lock.lock();
        try {
            permits = initialPermits;
        } finally {
            lock.unlock();
        }
    }

/* other code omitted.... */ 
```

我有一个关于上面示例的问题，该示例摘自**Java Concurrency in Practice**清单 14.12 Counting Semaphore Implemented Using Lock。

我想知道为什么我们需要在构造函数中获取锁（如图所示 lock.lock() 被调用）。据我所知，构造函数是*原子*的（除了引用转义），因为没有其他线程可以获取引用，因此，半构造对象对其他线程不可见。因此，我们不需要构造函数的 synchronized 修饰符。此外，只要对象被安全发布，我们也不需要担心*内存可见性。*

**那么，为什么我们需要在构造函数中获取 ReentrantLock 对象呢？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-10T06:33:22.527

> 半构造对象对其他线程不可见

这不是真的。如果该对象具有任何**非最终/易失性**字段，则该对象在构造时对其他线程可见。`permits`因此，其他线程可能会看到ie的默认值，`0`这可能与当前线程不一致。

Java 内存模型为不可变对象（只有最终字段的对象）提供了**初始化安全**的特殊保证。对另一个线程可见的对象引用并不一定意味着该对象的状态对消费线程可见 -`JCP $3.5.2`

来自 Java Concurrency in Practice 的清单 3.15：

> 虽然在构造函数中设置的字段值似乎是写入这些字段的第一个值，因此没有“旧”值可以视为陈旧值，但**Object**构造函数首先在子类构造函数运行之前将默认值写入所有字段. 因此，可以将字段的**默认**值视为**陈旧**值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:35:03.890

老实说，我在这里看不到锁的任何有效用途，除了它引入了内存栅栏这一事实。`int`无论如何，分配在 32/64 位上都是原子的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T13:56:15.130

（只是为我自己可怜的脑袋澄清一下-其他答案是正确的）。

此假设`SemaphoreOnLock`类的实例旨在共享。因此线程`T1`完全构造了一个实例，并将其放在线程`T2`可以看到它并调用一些需要读取该`permits`字段的方法的地方。`permits`关于该领域需要注意的一些重要事项：

1.  在第一种情况下，它被初始化为默认值`0`
2.  然后由线程为其分配一个值（可能不是默认值`0`）`T1`
3.  它不是`volatile`
4.  它不是`final`（这使它有点像“一发不可收拾”）

因此，如果我们要`T2`读取`T1`最后写入的值，就需要进行同步。我们必须在构造函数中这样做，就像在其他情况下一样。（它是否是原子分配的事实不会影响此*可见性*问题）。将构造*限制*在单个线程的策略`SemaphoreOnLock`对我们不起作用，因为制作它的整个想法`@Threadsafe`是让我们可以*安全地共享它*。

**此示例说明的是，当将任何非静态、非最终、非易失性字段设置为其默认值以外的值时，“线程安全”也适用于对象的*构造。***

当然，当我们有课时，我们甚至没有义务考虑这个`@NotThreadsafe`。如果调用者构造了我们并决定在两个线程之间共享我们，那么*调用者必须安排适当的同步*。在那种情况下，我们可以在构造函数中做任何我们喜欢的事情，而不用担心可见性问题——这是别人的问题。

# ios - 是否可以通过 iOS 以编程方式创建 .xls 文件？

> ID：10528574
> 
> 赞同：6
> 
> 时间：2012-05-10T06:29:22.047
> 
> 标签：ios, objective-c, xls

如何通过我的 iPhone以编程方式生成**.xls文件？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:46:01.710

If you just want to put tabulated data into an spreadsheet, simply generate a .CSV file that can be directly read into EXCEL.

If you want a fully featured spreadsheet, with multiple sheets, formulas, formats, inserted objects, pictures, charts etc, then, as far as I know, there is no solution for iPhone, as Microsoft does not provide the equivalent to its Excel ActiveX component.

If your requirements lie in between, you might try some alternatives. Take a look at Google Docs or at QuickOffice.

I don't recommend you to try to generate a full XLS from scratch, if far too much dificult.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T06:40:00.073

我有替代解决方案给你。

使用代码创建（逗号分隔值）文件很容易，`CSV`然后这个 CSV 文件可以直接由 MS Excel 以 xls 格式打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:54:02.347

如果需要在手机上查看，请创建一个 HTML 表格；一般来说，xls 对于数据交换格式来说是一个糟糕的选择。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:39:25.473

我之前没有搜索过有关此的第三方库，但至少您可以（但不容易）根据 XLS 文件格式的规范自己生成 XLS 文件：

*   [Microsoft Office Excel 97 - 2007 二进制文件格式规范（*.xls 97-2007 格式）](http://download.microsoft.com/download/0/B/E/0BE8BDD7-E5E8-422A-ABFD-4342ED7AD886/Excel97-2007BinaryFileFormat%28xls%29Specification.xps)
*   [OpenOffice.org 的 Microsoft Excel 文件格式文档](http://www.openoffice.org/sc/excelfileformat.pdf)

# ruby-on-rails-3 - 嵌套属性未以简单形式显示

> ID：10528582
> 
> 赞同：5
> 
> 时间：2012-05-10T06:30:03.567
> 
> 标签：ruby-on-rails-3, nested-attributes, simple-form

鉴于以下情况：

# 楷模

```
class Location < ActiveRecord::Base
  has_many :games
end

class Game < ActiveRecord::Base
  validates_presence_of :sport_type

  has_one :location
  accepts_nested_attributes_for :location
end 
```

# 控制器

```
 def new
    @game = Game.new
  end 
```

# 查看（窗体）

```
<%= simple_form_for @game do |f| %>
  <%= f.input :sport_type %>
  <%= f.input :description %>
  <%= f.simple_fields_for :location do |location_form| %>
    <%= location_form.input :city %>
  <% end %>
  <%= f.button :submit %>
<% end %> 
```

为什么位置字段（城市）没有显示在表单中？我没有收到任何错误。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:39:54.683

好的，我不确定您是否希望选择一个现有位置与名声相关联，或者您是否希望为每个游戏创建一个新位置。

假设这是第一种情况：

更改 Game 模型中的关联，使游戏属于某个位置。

```
class Game < ActiveRecord::Base
  validates_presence_of :sport_type

  belongs_to :location
  accepts_nested_attributes_for :location
end 
```

您可能需要通过迁移将 location_id 字段添加到您的游戏模型中。

然后，您只需更改 Game 模型本身的 Location 字段，而不是嵌套表单。

如果是第二种情况，并且您希望为每个游戏建立一个新位置，那么您需要按如下方式更改模型：

```
class Location < ActiveRecord::Base
  belongs_to :game
end

class Game < ActiveRecord::Base
   validates_presence_of :sport_type

  has_one :location
  accepts_nested_attributes_for :location
end 
```

如果您还没有 game_id 字段，则需要将其添加到位置模型。

然后在您的控制器中，您将需要构建一个位置以显示嵌套的表单字段：

```
def new
 @game = Game.new
 @location = @game.build_location 
end 
```

# python - 使用 matplotlib 在伪彩色图中设置任意颜色

> ID：10528587
> 
> 赞同：6
> 
> 时间：2012-05-10T06:30:38.023
> 
> 标签：python, matplotlib

> **可能重复：**
> [为颜色图和颜色栏中的两个（或更多）特定值添加单独的颜色](https://stackoverflow.com/questions/10466730/add-separate-colors-for-two-or-more-specific-values-in-color-plot-and-color-ba)

我有一组值，我想在 matplotlib 中使用 pcolor 绘制这些值。我正在使用颜色图“YlOrRd”，它工作正常 - 但我想将颜色图用于除零以外的所有值。也就是说，所有不为 0 的值都应使用颜色图 - 我希望 0 为黑色。

目前我正在使用我的 numpy 值数组“x”。

```
pcolor(x,cmap=cm.YlOrRd) 
```

有没有办法任意修复数组 x 中从 0 到黑色的所有值？

谢谢，戴夫。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T10:04:34.070

这里有两种方法。一种是创建您自己的`colormap`，另一种是使用`masked array`. 假设我们有：

```
import matplotlib
from pylab import *

data = np.arange(-50, 50).reshape(10, 10)
data = np.abs(data)
pcolor(data, cmap=cm.YlOrRd)
show() 
```

这将产生： ![在此处输入图像描述](../Images/949ed558978e83085f894fbc20bd92de.png) 现在我们做同样的事情，但是创建一个名为的列表`colors`，它具有与 相同的值`cm.YlOrRd`，除了`0`我们设置为黑色（`0,0,0`在 rgb 中）的条目。然后我们`LinearSegmentedColormap.from_list`用来实际制作颜色图：

```
import matplotlib
from pylab import *

data = np.arange(-50, 50).reshape(10, 10)
data = np.abs(data)
colors = [(0,0,0)] + [(cm.YlOrRd(i)) for i in xrange(1,256)]
new_map = matplotlib.colors.LinearSegmentedColormap.from_list('new_map', colors, N=256)
pcolor(data, cmap=new_map)
savefig('map.png')
show() 
```

这会产生相同的图，但零值是黑色的：

![在此处输入图像描述](../Images/2b0877b36f5e28473005277a90bee653.png) 这是使用掩码数组的另一种方法，它涉及更多，代码中的注释解释了这些步骤：

```
from pylab import *
import numpy.ma as ma

data=np.arange(-50,50).reshape(10,10)
data=np.abs(data)
#create a mask where only values=0 are true:
mask = data == 0
#create a masked array by combining our mask and data:
mx = ma.masked_array(data, mask)
#set masked values in cm.YlOrRd to 'black'
cm.YlOrRd.set_bad(color='black', alpha=None)
# pcolor(data,cmap=cm.YlOrRd)
#we must use pcolormesh instead of pcolor, as pcolor does not draw masked values at all
pcolormesh(mx,cmap=cm.YlOrRd)
show() 
```

这会产生与上面相同的图。

这些方法之间存在潜在差异，第一种方法将舍入数据值并应用适当的颜色，而第二种方法只会将等于 0 的值设置为黑色（即不会屏蔽 0.001，因此将是适当的）`cm.YlOrRd`颜色）。第二个的主要优点是您可以完全任意屏蔽条目。

# iphone - UIView 中的 UIButton 作为子视图不点击（无操作，无颜色更改）

> ID：10528591
> 
> 赞同：0
> 
> 时间：2012-05-10T06:31:16.307
> 
> 标签：iphone, objective-c, uiview, uibutton, subview

我有一个 UIView，它是`UINavigationController` Ex 的子视图。

```
- (void) ViewDidload{
    UIView *theSubView = [[UIView alloc] init];

    UIButton *button = [UIButton . . . .]
    . . . .
    [theSubView addSubView:button];
    [self.view addSubview:theSubView];
} 
```

我放在“theSubView”中的所有标签和按钮都显示出来了，但它们对任何触摸都没有反应。

如果它不是“ `UIButton`theSubView”的子视图，但当它是 self 的子视图时，它可以工作。

所以我的问题是如何使“TheSubView”（UIView）中的按钮工作？它不亮或任何东西。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T06:37:32.400

如果我是对的，那么您的问题实际上是您使用

```
[[UIView alloc] init] 
```

而不是指定的初始化器

```
initWithFrame:(CGRect)frame 
```

您正在创建一个边界为 0,0 的视图。您应该使用指定的初始化程序创建它并执行类似的操作

```
/*
 * note that the values are just sample values.
 * the view's origin is  0,0 and it's width 320, it's height 480
*/
UIView *theSubView = [[UIView alloc] initWithFrame:CGRectMake(0,0,320,480]; 
```

如果你设置

```
theSubView.clipsToBounds = YES 
```

结果应该是您根本看不到您的按钮，因为视图的大小是 0,0。

UIView 只能响应自己范围内的触摸，这就是为什么您的按钮不响应任何触摸的原因。

# android - 自定义 Android PIN 码输入小部件

> ID：10528592
> 
> 赞同：8
> 
> 时间：2012-05-10T06:31:17.617
> 
> 标签：android, widget

我正在尝试为 android 创建一个自定义 pin 代码小部件，作为仅使用`EditText`带有密码 inputType 属性的替代方法。我想显示的是一排框，并在用户键入他的 pin 时填充每个框。

其他人做了类似的事情，但结果是固定数量的`EditText`视图，并且有很多**丑陋**的代码用于在输入或删除字符时交换焦点。这不是我想要采取的方法；相反，我将我的设计设计为具有**可定制的长度**（容易）并表现为**单个可聚焦的视图**（不太容易）。

`LinearLayout`到目前为止，我的概念是 a （保存“盒子”）和 an `EditText`（存储用户输入）之间的某种混合。

这是到目前为止的代码......

```
public class PinCodeView extends LinearLayout {
    protected static final int MAX_PIN_LENGTH = 10;
    protected static final int MIN_PIN_LENGTH = 1;

    protected int pinLength;
    protected EditText mText;

    public PinCodeView(Context context, AttributeSet attrs) {
        super(context, attrs);

        TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.PinCodeView);
        try {
            pinLength = a.getInt(R.styleable.PinCodeView_pinLength, 0);
        } finally {
            a.recycle();
        }

        pinLength = Math.min(pinLength, MAX_PIN_LENGTH);
        pinLength = Math.max(pinLength, MIN_PIN_LENGTH);

        setupViews();

        Log.d(TAG, "PinCodeView initialized with pinLength = " + pinLength);
    }

    private void setupViews() {
        LayoutInflater inflater = (LayoutInflater) getContext().getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);
        for (int i = 0; i < pinLength; i++) {
            // inflate an ImageView and add it
            View child = inflater.inflate(R.layout.pin_box, null, false);
            addView(child);
        }
    }

    public CharSequence getText() {
        // TODO return pin code text instead
        return null;
    }

    public int length() {
        // TODO return length of typed pin instead
        return pinLength;
    }

    @Override
    public boolean onCheckIsTextEditor() {
        return true;
    }

    @Override
    public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
        // TODO return an InputConnection
        return null;
    }
} 
```

关于这些覆盖：[onCheckIsTextEditor()](http://developer.android.com/reference/android/view/View.html#onCheckIsTextEditor%28%29)应该返回 true 并且[onCreateInputConnection(EditorInfo outAttrs)](http://developer.android.com/reference/android/view/View.html#onCreateInputConnection%28android.view.inputmethod.EditorInfo%29)应该返回一个新`InputConnection`对象以与 InputMethod （键盘）进行交互，但这就是我所知道的。

有谁知道我是否走在正确的轨道上？有没有人`InputConnection`以前做过工作或使他们自己的可编辑视图能够提供指导？

（编辑 1）在看了这个之后，似乎我应该继承 BaseInputConnection 并提供一个`TextView`or`EditText`作为它的目标：

```
 @Override
    public InputConnection onCreateInputConnection(EditorInfo outAttrs) {
        if (!onCheckIsTextEditor()) {
            return null;
        }
        return new BaseInputConnection(mText, true);
    } 
```

假设这确实存储了键入的文本，我仍然需要一些方法来更新视图以反映内容更改......

（编辑 2）所以我将此自定义视图添加到屏幕进行测试。它显示框的数量，并且整个视图是可聚焦的，但键盘永远不会弹出。我知道它获得/失去焦点，因为这些框适当地显示突出显示，并且我设置了一个`OnFocusChangedListener`写入 logcat。

当可编辑视图获得焦点时，是什么让实际的键盘出现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-08T06:59:21.740

看起来您可能正在尝试创建一个类似 pin 条目视图/小部件的 iOS。

这是一个很好的示例代码，您可能会发现它很有用。然而，它是固定长度的，但对某些人来说仍然可能有用。

[https://github.com/chinloong/Android-PinView](https://github.com/chinloong/Android-PinView)

[http://madeveloper.blogspot.com/2013/02/android-ios-like-pin-entrychallenge.html](http://madeveloper.blogspot.com/2013/02/android-ios-like-pin-entrychallenge.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-08T15:58:31.227

我知道这已经得到了回答，但由于它的实现不是共享的，我找到了一个类似的开源库。它看起来不错，所有徘徊的人都可以尝试一下

[https://github.com/Philio/PinEntryView](https://github.com/Philio/PinEntryView)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:40:08.737

在我看来还可以。您可能想要做的事情是，当用户在一个`EditText`框中键入一个字符时，找到对下一个 EditText 框的引用并`requestFocus()`对其执行操作。这会将文本条目移动到下一个框。非常简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-12T02:45:36.593

我在这方面取得了相当大的进展，不再需要 InputConnection 的帮助。简而言之，您扩展`BaseInputConnection`并覆盖`getEditable()`以返回可编辑的。在这种情况下，我将返回一个`TextView`由`PinCodeView`. `PinCodeView`还覆盖了几种方法，例如`onKey[foo]()`并将调用转发到 internal `TextView`。其余的只是在文本更改时使用 a`TextWatcher`来更新其中一个子s。`ImageView`

它真的很好用。还有一些小问题需要完善，但我会将这些问题作为单独的问题解决并在此处关闭。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-20T07:04:42.717

```
implementation 'com.alimuzaffar.lib:pinentryedittext:1.3.10' 
```

将此依赖项放入您的应用程序模块 Gradle 文件并同步。

```
 <com.alimuzaffar.lib.pin.PinEntryEditText

                    android:inputType="number"
                    android:id="@+id/Pin_Et"
                    android:maxLength="6"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"/> 
```

将此代码放在 XML（布局文件）中。
它完美地工作我使用这个代码

# magento - Magento：以编程方式创建订单捆绑产品和可配置产品

> ID：10528599
> 
> 赞同：2
> 
> 时间：2012-05-10T06:31:40.063
> 
> 标签：magento

我尝试使用[Vinai](http://netzarbeiter.com/)的以下代码创建订单，但它仅适用于简单的产品。我已经尝试过使用 $buyInfo 中的键和值，但似乎订单不会继续。我可能错过了什么？

```
$quote = Mage::getModel('sales/quote')
        ->setStoreId(Mage::app()->getStore('default')->getId());

if ('do customer orders') {
        // for customer orders:
        $customer = Mage::getModel('customer/customer')
                ->setWebsiteId(1)
                ->loadByEmail('customer@example.com');
        $quote->assignCustomer($customer);
} else {
        // for guesr orders only:
        $quote->setCustomerEmail('customer@example.com');
}

// add product(s)
$product = Mage::getModel('catalog/product')->load(8);
$buyInfo = array(
        'qty' => 1,
        // custom option id => value id
        // or
        // configurable attribute id => value id
);
$quote->addProduct($product, new Varien_Object($buyInfo));

$addressData = array(
        'firstname' => 'Test',
        'lastname' => 'Test',
        'street' => 'Sample Street 10',
        'city' => 'Somewhere',
        'postcode' => '123456',
        'telephone' => '123456',
        'country_id' => 'US',
        'region_id' => 12, // id from directory_country_region table
);

$billingAddress = $quote->getBillingAddress()->addData($addressData);
$shippingAddress = $quote->getShippingAddress()->addData($addressData);

$shippingAddress->setCollectShippingRates(true)->collectShippingRates()
                ->setShippingMethod('flatrate_flatrate')
                ->setPaymentMethod('checkmo');

$quote->getPayment()->importData(array('method' => 'checkmo'));

$quote->collectTotals()->save();

$service = Mage::getModel('sales/service_quote', $quote);
$service->submitAll();
$order = $service->getOrder(); 
```

关于如何使其在捆绑和可配置产品中也能正常工作的任何想法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T13:43:58.673

要制作捆绑产品，您必须将 prodtypeID 设置为“捆绑”

这是我使用的代码：

```
 $__magproduct = new Mage_Catalog_Model_Product();

    // Build the product 
    $__magproduct->setSku(trim($sku_of_product)); 
    $__magproduct->setAttributeSetId('4');# 4 is for default 
    $__magproduct->setTypeId($prodtype); 
    $__magproduct->setName($getprodId->ProductName); 
    //$__magproduct->setCategoryIds(array(42)); # some cat id's, 
    $__magproduct->setWebsiteIDs(array(1)); # Website id, 1 is default 
    //$__magproduct->setDescription($getprodId->Description); 
    //$__magproduct->setShortDescription($getprodId->Description); 
    $__magproduct->setPrice($prodprice); # Set some price

    //Default Magento attribute 
    $__magproduct->setWeight($getprodId->Weight); 

    $__magproduct->setVisibility(Mage_Catalog_Model_Product_Visibility::VISIBILITY_BOTH); 
    $__magproduct->setStatus(1); 
    $__magproduct->setTaxClassId(2); # default tax class 

    $__magproduct->setCreatedAt(strtotime('now')); 

    try { 
    $__magproduct->save(); 

    if (!($stockItem = $product->getStockItem())) {
                $stockItem = Mage::getModel('cataloginventory/stock_item');
                $stockItem->assignProduct($__magproduct)
                          ->setData('stock_id', 1)
                          ->setData('store_id', 1);
            }

            $stockItem->setData('qty', $qty)
                      ->setData('is_in_stock', $isinstock)
                      ->setData('manage_stock', 1)
                      ->setData('use_config_manage_stock', 0)
                      ->save();

        unset($__magproduct,$stockItem); 
```

然后插入一个捆绑的选项：

```
$productCheck = Mage::getModel('catalog/product')->loadByAttribute('sku',$getprodId->Code);         
Mage::register('product', $productCheck);

          $position = 0;

          $optionRawData = array();

          $selectionRawData = array();
          $selectionRawData[0] = array();

         foreach ($materials as $material) {
                $material = (array) $material;

                $komponenta = $client->GetProductSimple($material["ProductID"]);
                $komponenta = (array) $komponenta;

                echo "&nbsp;&nbsp;&nbsp;assigned: ".$komponenta["Code"]." ".$komponenta["ProductName"]." ks(".$material["Count"].")<br>\n";  

                $itemSKU = Mage::getModel('catalog/product')->getIdBySku(trim($getprodId->Code));
                $materialSKU = Mage::getModel('catalog/product')->getIdBySku(trim($komponenta["Code"]));

                if (($itemSKU != "") && ($materialSKU != ""))
                    {

                $position++;

$optionRawData[$position] = array(
    'required' => 1,
    'option_id' => '',
    'position' => '',
    'type' => 'radio',
    'title' => 'Komponenta '.$komponenta["ProductName"],
    'default_title' => 'Komponenta '.$komponenta["ProductName"],
    'delete' => '',
);

$selectionRawData[$position][] = array(
    'product_id' => $materialSKU,
    'selection_qty' => $material["Count"],
    'selection_can_change_qty' => 0,
    'position' => 0,
    'is_default' => 1,
    'selection_id' => '',
    'selection_price_type' => 0,
    'selection_price_value' => 0.0,
    'option_id' => '',
    'delete' => ''
);

                    };

                unset($material,$komponenta,$itemSKU,$materialSKU);

         };

Mage::register('productCheck', $productCheck);
Mage::register('current_product', $productCheck);
$productCheck->setCanSaveConfigurableAttributes(false);
$productCheck->setCanSaveCustomOptions(true);
// Set the Bundle Options & Selection Data
$productCheck->setBundleOptionsData($optionRawData);
$productCheck->setBundleSelectionsData($selectionRawData);
$productCheck->setCanSaveBundleSelections(true);
$productCheck->setAffectBundleProductSelections(true);

$productCheck->save(); 
```

**捆绑商品和可配置的不一样！！**

# javascript - 命名空间模式导致 JSLint '函数在定义之前被使用' 错误

> ID：10528600
> 
> 赞同：3
> 
> 时间：2012-05-10T06:31:46.087
> 
> 标签：javascript, namespaces, jslint, javascript-namespaces

我正在使用以下命名空间模式：

```
var MyNamespace = new function () {
    var foo = function () {
        bar();
    };
    var bar = function () {
        alert("bar");
    };
    this.init = function () {
        foo();
    };
};

$(document).ready(function() {
    MyNamespace.init();
}); 
```

JSLint 抱怨`bar`它在定义之前就被使用了。然而`foo`，直到 after`bar`被声明后才被调用。该代码适用于我尝试过的所有浏览器：http: [//jsfiddle.net/jDKvz/](http://jsfiddle.net/jDKvz/)

该模式是按照[如何在 JavaScript 中声明命名空间？](https://stackoverflow.com/questions/881515/javascript-namespace-declaration)，第二个答案。

我需要在这里修复什么，还是应该忽略 JSLint？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:53:59.477

我怀疑这是因为提升，变量和函数声明被解释器提升到顶部，很可能这就是它的看法：

```
var MyNamespace = new function () {
    var foo;
    var bar;

    foo = function () {
        bar();
    };

    bar = function () {
        alert("bar");
    };

    this.init = function () {
        foo();
    };
}; 
```

现在在`foo = function () {bar();};`尚未`bar()`解析的内部，它只是一个变量`bar`而不是此时要调用的函数。

话虽如此，如果您的代码运行良好，您可以使用它，打开`strict mode`也很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:38:46.427

编辑：认为 JS 关闭了值，而不是变量。

JSLint 抱怨，因为它没有看到变量提升正在进行。只需在使用它们的函数之前定义其他函数使用的函数。它有助于使您的代码更具可读性，并关闭 JSLint。

例如：

```
var MyNamespace = new function () {
    var bar = function () {
        alert("bar");
    };

    var foo = function () {
        bar();
    };

    this.init = function () {
        foo();
    };
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:42:05.270

`bar`是一个函数表达式而不是一个函数声明，这意味着它只有在被赋值后才会起作用。您可以改用函数声明，jslint 不会再抱怨了。

```
function bar() {
    ...
} 
```

还有，`new Function`没必要，`function`就够了。

**编辑：**

似乎在这种情况下摆脱`new`使用自动调用函数`(function(){}())`或对象文字`{}`

# android - Android中EditText的InputFilter的正则表达式帮助

> ID：10528601
> 
> 赞同：3
> 
> 时间：2012-05-10T06:31:47.273
> 
> 标签：android, regex

我需要实现一个输入过滤器来限制格式中的数字输入`1234.35`。也就是说，最多前四位`.`和两位小数。我正在使用这个[正则表达式](http://en.wikipedia.org/wiki/Regular_expression)模式：

```
Pattern.compile("[0-9]{0,4}+((\\.[0-9]{0,2})?)||(\\.)?"); 
```

这可行，但是一旦我在编辑文本中输入一个数字并尝试编辑小数位前的值，我就无法编辑它们。我只能删除它们。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T19:21:01.450

根据你所说的，我认为你正在尝试做，我会使用这个正则表达式：

```
^(\d{0,4})(\.\d{1,2})?$ 
```

它匹配“0-4 位”，后面有或没有“一个小数点和两个数字”。如果有小数点，则后面必须有一位或两位数字。例如：`5`, `1234`, `1234.56`, `.2`, and`.31`都是有效的并且被表达式匹配，但是`.123`, `1234.`, `1234.567`, `12345`, and`.`不匹配。

或者，要允许以小数结尾的数字（如`.`、`1234.`等），请使用以下修改：

```
^(\d{0,4})(\.(\d{1,2})?)?$ 
```

# cakephp - Cake php 验证规则“isUnique”在编辑时出错

> ID：10528603
> 
> 赞同：2
> 
> 时间：2012-05-10T06:32:00.263
> 
> 标签：cakephp, cakephp-1.3

蛋糕 php 验证“isUnique”在编辑时出错

```
 var $validate = array(
    'name' => array(
        'notempty' => array(
            'rule' => array('notempty'),
        ),
       'isUnique' => array (

           'rule' => 'isUnique',

           'message' => 'This person name already exists.'
       )

)
); 
```

在这里，当添加一个具有现有名称的新人时，会出现一个`This person name already exists` 很好的错误。但是在编辑已经存在的人时也会给出同样的`isUnique`错误。

我该如何解决？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T07:16:34.790

尝试：

```
'isUnique' => array (

           'rule' => 'isUnique',

           'message' => 'This person name already exists.',

           'on' => 'create',
 ) 
```

从书中：

> 如果规则定义了 'on' => 'create'，则该规则将仅在创建新记录期间执行。同样，如果它被定义为'on' => 'update'，它只会在更新记录期间被强制执行。

但是，如果允许他们更改名称，并且您仍然需要其他记录的唯一性，则可能需要自定义唯一验证，以检查它是否与我正在编辑的 id 的记录相同，否则允许这样做，否则失败。

编辑： **不要使用以下内容 - cakes 内置 isUnique 验证已经处理它**

注意 - 未经测试的代码（它很晚，我会在早上测试）但它会给你这个想法

将以下内容添加到模型中并将 'rule' => 'isUnique' 更改为 'rule' => 'isUniqueName' 并删除 'on' => 'create'

```
public function isUniqueName($fields) {
        $conditions = array($this->alias . '.name' => $this->data[$this->alias]['name']);
        if (isset($this->data[$this->alias][$this->primaryKey])) {
            $conditions[$this->alias . '.' . $this->primaryKey . ' <>'] = $this->data[$this->alias][$this->primaryKey];
        }
        return $this->find('count', compact('conditions')) == 0;
} 
```

# java - Java泛型和泛化中的ClassCastException

> ID：10528604
> 
> 赞同：2
> 
> 时间：2012-05-10T06:32:00.353
> 
> 标签：java, android, generics

它可能不相关，但这是在 Android 2.3.3 下，我使用 openjdk7。

我正在尝试使用对象的加速度值来计算对象的速度和位移，给定 3 个空间加上时间的坐标。为此，我创建了一个名为`Coord4D`, 和`Velocity`,的类，`Displacement`并且`Acceleration`是这个类的子类。像这样：

`Coord4D`：

```
class Coord4D {

    // Statics //
    private static final long ONE_TO_NANO_FACTOR = 1000000000;

    // Members //
    private long key;
    private float xValue;
    private float yValue;
    private float zValue;

  // ... more ...
} 
```

和继承类的一个例子`Velocity`：

```
public class Velocity extends Coord4D{

  // ... members and methods and stuff ...

} 
```

而现在的问题。在`Coord4D`中，我概括了从导数中获得反导数的方法。例如，我想检索`Velocity`给定两个`Acceleration`实例（过去和当前）的`Velocity`实例和前一帧的实例。

`Displacement`当执行此操作的方法位于and时，一切正常`Velocity`，但我发现它是多余的，因为两者都在计算完全相同的东西，而且我讨厌编写两次相同的代码行。所以我决定将这些方法移入`Coord4D`，并使用这样的泛型：

```
protected static <Derivative extends Coord4D, 
AntiDerivative extends Coord4D> AntiDerivative getIntegrationStep(
        Derivative previous, 
        Derivative current, 
        AntiDerivative previousStep){

    // Time is in nanoseconds, must change it in seconds
    float dT = ( current.getTime() - previous.getTime() ) 
            / ONE_TO_NANO_FACTOR;

    // Parameters have seconds for unit : ..., ?*s, ?, ?/s, ?/s², ... 
    float dX = current.getX() - previous.getX();
    float dY = current.getY() - previous.getY();
    float dZ = current.getZ() - previous.getZ();

    // do the integration step and add the previous step value
    float x = dX * dT + previousStep.getX();
    float y = dY * dT + previousStep.getY();
    float z = dZ * dT + previousStep.getZ();

    return (AntiDerivative) new Coord4D(current.getTime(), x, y, z);
} 
```

并且`Velocity`and`Displacement`对象具有此方法（示例来自`Velocity`）。

```
public static Velocity getVelocity(Acceleration previousAccel, 
        Acceleration currentAccel, 
        Velocity initialVelo) {

    return getIntegrationStep(previousAccel, 
            currentAccel, 
            initialVelo); 

} 
```

现在，出于某种原因，这条线

```
return getIntegrationStep(previousAccel, currentAccel, initialVelo); 
```

导致一个`ClassCastException`. 我不明白为什么，因为我认为我对泛型的逻辑很好。有人可以帮我找出缺陷在哪里吗？

堆栈跟踪（来自 LogCat）：

```
W/dalvikvm(8891): threadid=1: thread exiting with uncaught exception (group=0x4001d648)
E/AndroidRuntime(8891): FATAL EXCEPTION: main
E/AndroidRuntime(8891): java.lang.ClassCastException: me.aybabt.android.prototypes.physics.Coord4D
E/AndroidRuntime(8891):     at me.aybabt.android.prototypes.physics.Velocity.getVelocity(Velocity.java:40)
E/AndroidRuntime(8891):     at me.aybabt.android.prototypes.AcceleratorActivity.onSensorChanged(AcceleratorActivity.java:199)
E/AndroidRuntime(8891):     at android.hardware.SensorManager$ListenerDelegate$1.handleMessage(SensorManager.java:539)
E/AndroidRuntime(8891):     at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(8891):     at android.os.Looper.loop(Looper.java:150)
E/AndroidRuntime(8891):     at android.app.ActivityThread.main(ActivityThread.java:4293)
E/AndroidRuntime(8891):     at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(8891):     at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(8891):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
E/AndroidRuntime(8891):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
E/AndroidRuntime(8891):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:49:13.363

这条线

```
return (AntiDerivative) new Coord4D(current.getTime(), x, y, z); 
```

不能工作。

AntiDerivate 是 Coord4D 的子类。你不能从一个类转换到它的子类。（只有另一个方向有效。）

你可以做什么：而不是使用`new Coord4D`你获得previousStep的类，它是Antiderivate的一个实例，并使用Class.newInstance()创建你想要返回的新实例。

# android - 如何处理android画布中的拖放

> ID：10528605
> 
> 赞同：0
> 
> 时间：2012-05-10T06:32:02.067
> 
> 标签：android, android-canvas, multi-touch

我是这个android领域的新手，我在我的新项目中面临一个问题，主要是处理图形，我必须在画布中拖放形状（矩形、椭圆等形状），我使用的是android版本2.1，请给我一些好的建议或示例代码来处理这个功能

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:44:01.200

This would my helper for you. Have a look at [this](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/DragAndDropDemo.html)

Regards.

# silverlight - 反射以聆听可能的事件 - silverlight/wp7

> ID：10528611
> 
> 赞同：1
> 
> 时间：2012-05-10T06:33:09.957
> 
> 标签：silverlight, windows-phone-7, reflection

我不确定如何开始，我当然可以使用一些直接的建议（即使不可能）。

我在一个页面上托管了 3 个控件。其中两个在`Storyboard`加载控件时运行。其中之一没有。但是由于我有更多的控件稍后添加，其中一些将具有，`Storyboard`而另一些则不会（它们是动态的，因此无法提前知道这些是......嗯，这很长故事）。

所以我想做的是从主机页面，看看一个控件是否有一个“Storyboard sb”字段，如果有，就挂钩它，这样当它在控件上完成时，主机页面会做一些事情。

我已经看了很多 System.Reflection 并且我认为我在帮助文件的正确位置，但无法弄清楚我应该在哪里/如何查看 a）查看控件是否具有此字段， b）如果是，则挂钩它的“已完成”事件，c）然后删除处理程序。

有什么建议/方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:02:41.887

请改用依赖属性（在本例中为 Storyboard 类型的依赖属性）。

DP 允许将任意值分配给对值一无所知的对象。它们也可以在 Xaml 中分配，也可以从代码中动态添加。它也比反射快。

在此处生成 DP 的方便代码段：[Silverlight 依赖属性代码](http://wildermuth.com/2009/03/09/Silverlight_Dependency_Property_Snippet)段（生成的代码中有一个小错字，错误的情况，您需要更正代码段）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:58:20.500

另一种相对直接的方法可能是“滥用”控件的[Tag](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.tag)属性来指示它们是否应该使用情节提要。虽然我不是（至少可以说）这类场景的粉丝，但它足够简单和快速（而且很脏;）），你可以远离反思。

# widget - 如何在 Yii 中使用多个模型构建单个视图？

> ID：10528619
> 
> 赞同：1
> 
> 时间：2012-05-10T06:33:38.770
> 
> 标签：widget, yii, yii-components, yii-inheritance

我正在研究 Yii 应用程序，它只有一个视图 - “仪表板”，我需要在这个单一界面上完成所有应用程序活动。就像显示所有用户详细信息、帐户、历史记录、凝乳设施状态一样。

```
--In Controller--
class DashboardController 
{
    public function actionDashboard()
    {
        $model = new MyDashboard;
        if(isset($_POST['MyDashboard']))
        {
             $this->model->save();
        }
        $this->render('dashboard',array('model'=>$model));
    }
}

-- In Dashboard View --
 // userd-details
 $this->widget('application.components.widgets.addGruopWidget.userdetails');

 //account
 $this->widget('application.components.widgets.addGruopWidget.useraccount');

 //user status
 $this->widget('application.components.widgets.addGruopWidget.userstatus');

 //user history
 $this->widget('application.components.widgets.addGruopWidget.userhistory'); 
```

那么如何使用 DashboardController 在这个单一的“仪表板”界面上为用户定义所有凝乳活动。如果可能，请提出解决方案。谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T05:36:15.300

```
public function actionDashboard($action=null){

  if(!is_null($action) && strlen($action)>0){
    $method = "run".ucfirst($action);
    if(method_exists($this,$method)){
      $this->$method(); // if $action is 'actionName' then $this->runActionName();
      Yii::app()->end();
    }
  }
}

...
}

protected function runActionName(){
   /*  dp something  */
} 
```

# linux - 如何使用 Bash 脚本仅在 perl 脚本中插入新代码行

> ID：10528621
> 
> 赞同：1
> 
> 时间：2012-05-10T06:33:44.673
> 
> 标签：linux, bash, find

我有一个混合了 shell、Perl 和 Python 脚本的 Linux 文件夹树。所有脚本都没有一致的文件扩展名（.pl、.perl、.py、.sh 或根本没有扩展名）。我需要确定哪些文件是 Perl 脚本，然后添加新的代码行来设置变量（如果该变量不在 Perl 脚本中）。

感谢[How to insert newline character after comma in `),(` with sed?](https://stackoverflow.com/questions/9473060/how-to-insert-newline-character-after-comma-in-with-sed)我想出了这段代码，它使用 sed 插入新的代码行。

此代码有效，但有更有效的方法吗？

```
#! /bin/bash

NL='
$|++'

for f in `find "$1" -type f`
do
    if [ $(grep -cP "^\#\!/.+/perl" "${f}") -gt 0 ]
    then
        if [ $(grep -c "$|" "${f}") -eq 0 ]
        then
            sed -i -r "s/^#!\/(.+)\/perl(.+)$/#!\/\1\/perl\2\\${NL}/g" "${f}"
        fi
    fi
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:27:13.880

那里有许多 Grep -c 的无用用法。见[http://porkmail.org/era/unix/award.html](http://porkmail.org/era/unix/award.html)

```
#! /bin/bash

NL='
$|++'

for f in `find "$1" -type f`
do
    grep -qP "^\#\!/.+/perl" "${f}" &&
    ! grep -q "$|" "${f}" &&
    sed -i -r "s/^#!\/(.+)\/perl(.+)$/#!\/\1\/perl\2\\${NL}/g" "${f}"
done 
```

短路`&&`不是优化，只是个人喜好。您也可以保留嵌套`if`的 s，或者类似的东西

```
 if grep -qP "^#!/.+/perl" "$f" && ! grep -q "$|" "$f"; then ... 
```

在脚本中执行第一个 grep（至少）可能会更有效，`sed`因为大概您只对脚本的第一行感兴趣。（另一方面，如果是这种情况，为什么你`/g`在替换上有一个标志？）`sed`

其实你可能是说

```
 sed -i -r "1s%^(#!/.+/perl.*)$%\1\\${NL}%" "$f" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:43:25.260

您还可以使用以下`file(1)`命令：

```
$ head -n 1 perl_script_wo_ext
#!/usr/bin/perl
$ file perl_script_wo_ext
perl_script_wo_ext: Perl script, ASCII text executable 
```

然后 grep for`\bPerl script\b`就可以了。

# php - 单击 div 链接后如何出现两个 div？

> ID：10528628
> 
> 赞同：0
> 
> 时间：2012-05-10T06:33:57.260
> 
> 标签：php, javascript, iframe, html

您好，我有几个问题。我正在尝试让我的可点击 div 链接制作一个带有内部链接的 div 弹出窗口，同时在侧面也有关于 div 内部链接的信息。

```
<html>
<title>lc</title>
<link rel="stylesheet" type="text/css" href="stylesheet.css" />
<div class="screen">
<script src="http://code.jquery.com/jquery-latest.js"></script>
</head><body>
<div class="left_index"><p><a href="http:/l_c/index.php">lc</a></p></div>
<?php
echo('<iframe src="' . $mysquaresarray[$randomno] . '" width="700" height="709" align="center" frameBorder="0"></iframe>');
?> 
```

我的CSS是

```
.screen{
            position:absolute;
            width:800px;
            height:800px;

    }

    .left_index{
            position:relative;
            top:20px;
            left:80px;
            font-family: Futura, Optima, sans-serif; 
            font-size:30px; 
            margin:0px 0px, 0px,0px; 
            font-weight: thin; 
            } 
```

以下是输入 iframe 的示例：

```
#four{  
                bottom: 175px;
                left: 300px;
                height:90px;
                width:90px;
                    }
            #four a {
            display: block;
               height:90px;
               width:90px;
        }

        #five{
                bottom: 100px;
                left: 150px;
                height:90px;
                width:90px;
            }
            #five a {
            display: block;
               height:90px;
               width:90px;
        }

    <div id="four"><a href="/course/s12pudt_2101e/projects/holden/Project5a/WEC.php" target="_blank" display:block;></a> </div>
    <div id="five"></div>
    </div>
    <div class="fivetwo"><a href="http://www.youtube.com/watch?v=xqca9uKPeSg&feature=endscreen&NR=1" target="_blank"         display:block;></a> </div>
    </body>
        </html> 
```

非常感谢。iframe 内部是随机分类的 html 页面。html 页面都包含可点击的 div。我想单击这些 div 并将其链接到 div 内的弹出窗口的 html 页面，并有另一个 div 弹出窗口，其中包含有关页面的信息。

编辑：我将如何开始为此编写代码？我按照教授的建议使用了 slideToggle 函数，但我不确定如何让它在 iframe 内的 div 链接中工作。谁能帮我做到这一点？我该怎么做

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-02-21T08:45:25.020

```
$.get( "urlpath/test.html", function( data ) {
  $( ".resultdiv" ).html( data ); 
}); 
```

对于跨源请求：

```
 $.ajax({
    crossOrigin: true,
    url: url,
    success: function(data) {
      $( ".resultdiv" ).html( data );
    }
}); 
```

# r - 在没有互联网的情况下安装 R 包

> ID：10528630
> 
> 赞同：8
> 
> 时间：2012-05-10T06:34:06.620
> 
> 标签：r, installation, packages

我已经在 window 上安装了 R 版本 R_2.14.1，需要安装一些软件包，但我的系统没有互联网连接。关于如何在没有互联网的情况下安装 R 包的任何想法。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-10T06:46:54.267

你可以做

```
install.packages(".../path/to/package.tar.gz", type="source",
repos=NULL) 
```

[这里](http://r.789695.n4.nabble.com/Windows-7-installation-of-qz-package-from-SourceForge-td4348604.html)也有描述。

# r - 将 exp/power 趋势线添加到 ggplot

> ID：10528631
> 
> 赞同：7
> 
> 时间：2012-05-10T06:34:10.007
> 
> 标签：r, ggplot2

我想在我的情节中添加一条指数（+幂）（趋势）线。我正在使用 ggplot2 包。

我有这样的事情（只是有更多的数据）：

```
require(ggplot2)

df <-read.table("test.csv", header = TRUE, sep = ",")
df
    meta temp
1  1.283    6
2  0.642    6
3  1.962    6
4  8.989   25
5  8.721   25
6 12.175   25
7 11.676   32
8 12.131   32
9 11.576   32

ggplot(df, aes(temp, meta)) + 
    ylab("Metabolism") + xlab("Temperature") +
    geom_point() + 
    theme_bw() + 
    scale_x_continuous(limits = c(0, 35)) + 
    scale_y_log10() 
```

我知道这应该用指数函数来表示 - 所以我的问题是我如何才能找到最佳的“指数”拟合？同样，是否也可以进行电源适配？

该`stat_smooth()`功能是否有这个机会，或者`ggplot2`我应该使用包中的其他功能？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T08:21:18.967

`stat_smooth`您可以通过传递两个参数来指定要拟合的模型作为参数：

*   方法，例如`method="lm"`
*   模型，例如`model = log(y) ~ x`

`ggplot2`首先进行比例转换，然后拟合模型，因此在您的示例中，您只需添加

```
+ stat_smooth(method="lm") 
```

到你的情节：

```
library(ggplot2)
ggplot(df, aes(temp, meta)) + 
    ylab("Metabolism") + xlab("Temperature") +
    geom_point() + 
    theme_bw() + 
    scale_x_continuous(limits = c(0, 35)) + 
    scale_y_log10() +
    stat_smooth(method="lm") 
```

![在此处输入图像描述](../Images/0ce3d6d6f848c04b1ac54bbf46c0341b.png)

* * *

同样，拟合和绘制功率曲线就像将 x-scale 更改为 log 一样简单：

```
ggplot(df, aes(temp, meta)) + 
    ylab("Metabolism") + xlab("Temperature") +
    geom_point() + 
    theme_bw() + 
    scale_x_log10() + 
    scale_y_log10() +
    stat_smooth(method="lm") 
```

![在此处输入图像描述](../Images/f5ebbf9774d2404a12f39e0eac42e89c.png)

# google-maps - 使用谷歌地图方向服务的谷歌地图折线

> ID：10528632
> 
> 赞同：0
> 
> 时间：2012-05-10T06:34:16.333
> 
> 标签：google-maps, google-maps-api-3

现在在我的应用程序上，我以这种方式生成一条折线，我收到一个数组“路线”，其中包含我从数据库中获得的所有标记，这些标记可以生成折线：

```
var routeArray = null;
function drawRoute(mapa, routeArray, varBool){
    if(!routeArray){
        var coordRoute = routeArray;
        routeArray= new google.maps.Polyline({
            map: map,
            path: coordRoute,
            geodesic: true,
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 3
        });
    }if(varBool){
        routeArray.setMap(map);
    }else{
        routeArray.setMap(null);
    }
} 
```

我想生成折线，但是以这种方式看到直线我更喜欢谷歌方向服务。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:59:50.240

您是否查看[了 google direction api 文档](https://developers.google.com/maps/documentation/directions/)以获取使用信息和示例？你试过什么吗？请这样做，如果您有问题/问题发布您的新代码，我们可以提供进一步的帮助。

# java - 在 java/JSP 中迭代 Map

> ID：10528633
> 
> 赞同：0
> 
> 时间：2012-05-10T06:34:18.940
> 
> 标签：java, jsp, jakarta-ee

我们发现当前网页的性能很差，因为我们是根据来自服务器的数据生成 HTML。我们目前正在迭代
`MAP<Integer, Map<String, Object>>`使用`<C:FOREACH>`和生成 HTML 内容的类型的 MAP。

我的问题是在 java 类或 JSP 中迭代 Map 的更好方法是什么。是否有任何基于注释的标签可用于迭代地图？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:44:32.973

迭代地图的最快和最好的方法是：

```
Map<Integer, Map<String, Object>> map;

for (Map.Entry<Integer, Map<String, Object>> entry : map.entrySet()) {
    Integer key = entry.getKey();
    Map<String, Object> value = entry.getValue();
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:13:03.733

如果迭代地图是性能瓶颈的根源，我也会感到非常惊讶。众所周知，开发人员（包括我）在仅通过检查代码来确定瓶颈所在方面非常非常糟糕。

给自己找一个分析器（我使用 YourKit，因为它们向开源提交者提供免费副本 - 其他分析器可用）并查看实际花费的时间。

# xml - xs:any wrapper xml 模式验证

> ID：10528634
> 
> 赞同：1
> 
> 时间：2012-05-10T06:34:24.327
> 
> 标签：xml, xsd

您好我正在尝试找到一种方法来开发扩展另一个模式验证 XML 结构的模式。假设我们有 Schema A，它包含一个使用`<xs:any>`元素的扩展点所以我们有一个这样的模式：

**来源.xsd**：

```
<xs:complexType name="AType">
  <xs:complexContent>
    <xs:sequence>
      <xs:element name="B"/>
      <xs:any/>
    </xs:sequence>
  </xs:complexContent>
</xs:complexType>

<xs:element name="A" type="AType"/> 
```

我可以创建另一个模式来验证这个 XML 并引用原始模式吗？

**扩展的.xml**：

```
<A>
  <B></B>
  <C></C>
</A> 
```

我想创建一个模式来验证整个`A`（使用`C`）元素，而不必重写整个元素`AType`来合并`C`元素。我也不能使用`redefine`元素。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T17:17:00.217

~~我认为Petru 的建议~~——以及我们实际使用的东西——是这样的：你定义

**基础.xsd**

```
<xs:complexType name="AType"> 
  <xs:complexContent> 
    <xs:sequence> 
      <xs:element name="B" type="BType"/> 
      <xs:group ref="ATypeExtra"/> 
    </xs:sequence> 
  </xs:complexContent> 
</xs:complexType> 

<xs:element name="A" type="AType"/> 
```

**简单的.xsd**

```
<xs:include schemaLocation="Base.xsd"/>

<xs:group name="ATypeExtra">
  <xs:sequence>
  </xs:sequence>
</xs:group> 
```

**扩展的.xsd**

```
<xs:include schemaLocation="Base.xsd"/>

<xs:group name="ATypeExtra">
  <xs:sequence>
     <xs:element name="C" type="CType"/>
  </xs:sequence>
</xs:group> 
```

然后根据您想要的定义使用**Simple.xsd**或**Extended.xsd进行验证。**

在我们的例子中，我们有一个核心架构的系统，该架构不能更改，但可以在不同的安装中扩展，因此我们将上面的**Base.xsd**等价物与所有`xxxExtra`组（和属性组）引用一起分发，然后在不同的环境中定义在每个安装方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:36:08.247

在我看来，使用当前 1.0 规范（Michael 要求 XSLT 2.0 及更高版本）的最佳方法是使用替换组的头部而不是 xs:any 通配符。版本 1.0 将为您提供更广泛的互操作性与软件堆栈的可用性。

与 xs:any 不同，对于替换组，您需要使用基本类型来锚定它。我建议将其设为复杂类型。它可以是一个空的 complexType 定义，这样它就不会携带任何“多余”的包袱。

然后，验证将只是将解析器指向包含替换组成员的模式，而不是基本模式。

更新：添加示例 XSD 来说明；你的更新为 SubstitutionGroupExample.xsd：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema targetNamespace="http://tempuri.org/XMLSchema.xsd" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xs:complexType name="AType">
        <xs:sequence>
            <xs:element name="B"/>
            <xs:element ref="any" />
        </xs:sequence>
    </xs:complexType>
    <xs:element name="A" type="AType"/>
    <xs:complexType name="TAny" abstract="true"/>
    <xs:element name="any" type="TAny" abstract="true"/>
</xs:schema> 
```

扩展的.xsd：

```
<?xml version="1.0" encoding="utf-8" ?>
<xs:schema targetNamespace="http://tempuri.org/XMLSchema.xsd/1" elementFormDefault="qualified" xmlns="http://tempuri.org/XMLSchema.xsd/1" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:base="http://tempuri.org/XMLSchema.xsd">
    <xs:import namespace="http://tempuri.org/XMLSchema.xsd" schemaLocation="SubstitutionGroupExample.xsd"/>
    <xs:element name="someAny" substitutionGroup="base:any">
        <xs:complexType>
            <xs:complexContent>
                <xs:extension base="base:TAny">
                    <xs:sequence>
                        <xs:element name="new"/>
                    </xs:sequence>
                </xs:extension>
            </xs:complexContent>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

一个有效的 XML（基于 Extended.xsd）：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<!-- Sample XML generated by QTAssistant (http://www.paschidev.com) -->
<A xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://tempuri.org/XMLSchema.xsd" xmlns:ext="http://tempuri.org/XMLSchema.xsd/1">
    <B>anyType</B>
    <ext:someAny>
        <ext:new/>
    </ext:someAny>
</A> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T09:02:56.760

首先，xs:any 有一个 processContents 属性，其值为 strict、lax 或 skip。严格意味着“验证内容；如果找不到内容的架构定义，则将其视为无效”。Lax 的意思是“如果您可以找到内容的模式定义，则使用它来验证元素”。跳过意味着不验证。

有时这已经足够了。

如果您想要更多控制，那么您可以在应用程序控制下独立验证文档的某些部分。例如，您可以使用模式感知 XSLT 或 XQuery 轻松完成此操作。例如，在 XSLT 中，您可以导航到要验证的元素，然后使用 xsl:copy-of select="x" validation="strict" 来验证以该元素为根的子树。

# php - PHP 按钮计数器问题

> ID：10528638
> 
> 赞同：1
> 
> 时间：2012-05-10T06:34:44.763
> 
> 标签：php, performance, button, reload, counter

我对 PHP 相当陌生，但设法设置了一个脚本，该脚本仅显示用户每次单击按钮时单击按钮的次数。
这是PHP：

```
<?php
$f = fopen('counter.txt', 'r+');
flock($f, LOCK_EX);
$total = (int) fread($f, max(1, filesize('counter.txt')));
if (isset($_POST['submit'])) {
rewind($f);
fwrite($f, ++$total);
}
fclose($f);
?> 
```

这是HTML：

```
<form action='' method="post">
<input type="submit" name="submit" value="click" />
</form>
This button has been clicked <?php echo $total; ?> times. 
```

计数器工作正常，但我希望你们能帮助我解决三个问题：

1.  每次重新加载页面时，计数器都会增加。我只希望在单击按钮时计数器增加。有没有办法解决这个问题？

2.  每次我刷新页面时，Firefox 都会要求我确认是否要重新加载页面。我知道我的浏览器设置中有一个选项可以防止这种情况，但想知道是否有办法改进我的 php，以便用户也不会出现此消息。

3.  如果您单击该按钮几次，然后尝试使用“后退”按钮，它会引导您完成之前的每一次单击。同样，有没有办法修复我的代码，使其不会这样做，而是转到上一页？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:54:53.623

让我们看看你在那里做什么。您有一个包含 php 的页面和一个自提交表单，实际上除了重新加载页面之外什么都不做。当页面重新加载时，$total 计数器会因此增加，如果您“通过表单”或通过 brawser 重新加载页面，效果是一样的。Firefox 警报行为是由于 html 页面中存在一个表单，因此 brawser 会要求您确认，因为所有输入数据将在刷新时丢失。正如我所说，每次点击都是一次页面重新加载，因此返回只会破坏多次刷新。

要解决所有这些问题，您应该考虑将 javascript/jQuery 与 AJAX 一起使用：

*   将 $total 计数器处理放在一个单独的页面中，例如 counter.php

*   设置一个没有表单的按钮来包装它并给它一个唯一的 ID 然后使用 jQuery 将它绑定到一个点击事件

*   在单击事件上执行对 counter.php 页面的 AJAX get 调用并提醒请求响应（或准备一个具有唯一 ID 的跨度以通过 jQuery 在哪里显示响应）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:56:46.493

为了：

1.  当发出 POST 请求时，它会增加计数器；问题是您的脚本在处理完 POST 后不会进行重定向。只需一个简单的`header()`重定向即可。这将在 GET 中转换下一个请求，瞧！

2.  同样，当您单击按钮一次时，它将刷新页面并发布您的表单；因为您的脚本不会重定向，所以当您重新加载页面时，Firefox（以及其他浏览器）会要求您确认。

3.  后退按钮的行为无法真正改变，但您可以强制浏览器从不缓存页面（搜索“禁用浏览器缓存 php”以查看您必须提供的标题）。

* * *

```
$f = fopen('counter.txt', 'r+');
flock($f, LOCK_EX);
$total = (int) fread($f, max(1, filesize('counter.txt')));
if (isset($_POST['submit'])) {
    rewind($f);
    fwrite($f, ++$total);
    // when we're done increasing the counter
    // you will lose the POST data once the page refreshes
    // so remember to do whatever else you need to do here
    header('Location: ' . $_SERVER['REQUEST_URI']);
    exit;
}
fclose($f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:55:58.273

是的，

您需要检查是否单击了按钮或刷新了页面。

将您的代码置于此条件下

```
<?php

if(isset($_POST['submit']){
   $f = fopen('counter.txt', 'r+');
   flock($f, LOCK_EX);
   $total = (int) fread($f, max(1, filesize('counter.txt')));
   if (isset($_POST['submit'])) {
      rewind($f);
      fwrite($f, ++$total);
   }
   fclose($f);
}
?> 
```

此外，尝试为您的提交按钮使用其他名称。而不是`name="submit"`尝试，`name="doPost"`.. 在通过 javascript 访问元素时很有帮助

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:05:55.893

您可能希望使用 jQuery 研究基于 AJAX 的解决方案。这是它如何工作的粗略草图（未经测试）。将此添加到您的 HTML 标头中：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/javascript">
function call_form() { 
  $.ajax({
    type: 'GET',
    url: PATH TO YOUR PHP SCRIPT,
    success: update_text
  });
};

function update_text(data) { 
   $('#counter').html(data);
};
</script> 
```

并将其放入您的文档正文中：

```
//Put some PHP code here to fetch the count at page load and put that in $initial_count
<div>
<button type="button" value="Increment counter" id="counter" onClick="call_form();" /> 
</div>

<div>
This button has been clicked 
<span id="counter"><?php echo $initial_count; ?></span> 
times.
</div> 
```

现在您需要做的就是更新您的 PHP 脚本来存储新的点击（应该在不同的文件中）并让它回显更新后的计数。

# facebook - 如何通过 Facebook APP_ID 查看 Facebook 应用程序？

> ID：10528639
> 
> 赞同：0
> 
> 时间：2012-05-10T06:34:57.337
> 
> 标签：facebook, facebook-apps

我有 Facebook 应用程序的 APP_ID，但我不知道如何查看这个 Facebook 应用程序？我从我的客户那里得到了这个 APP_ID，我需要使用这个应用程序。我想从这个应用程序中获取照片和评论。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:54:03.287

你可以试试这个

http://www.facebook.com/apps/application.php?id=[YOUR-APP-ID]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:55:20.370

你可以在你的代码中实现这个 appid，然后运行它......只有这样才能看到你的应用页面......或者你可以使用这个 URL https://www.facebook.com/apps/application.php?id =[应用程序 ID] 但此 URL 仅提供应用程序名称...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T10:54:19.953

我有同样的问题，但你上面给出的链接不起作用问题是你必须与创建应用程序的帐户连接才能看到它的页面......

否则，它只会将您重定向到您的 Facebook 帐户（确实是最后一个连接的帐户），仅此而已......

如果有人想检索只有 app_id 且没有关联帐户的 facebook 应用程序，请“向上”

# android - Android失败5（数据库被锁定）问题

> ID：10528642
> 
> 赞同：1
> 
> 时间：2012-05-10T06:35:02.137
> 
> 标签：android, sql

在我的应用程序中，需要在异步任务中调用多个 Web 服务，并在每次响应时将大数据插入数据库中的不同表中，对于每个表快速插入，我通过开始和结束事务锁定数据库。问题出在所有网络服务之后，如果我尝试插入新记录，日志显示**失败 5（数据库已锁定）**。我检查了数据库是否被 inTransaction()、isDbLockedByOtherThreads 和 isDbLockedByCurrentThread 锁定。全部返回假。

如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:00:39.500

Sqlite 不允许并发写入，默认情况下，当写入正在进行时，尝试启动另一个事务将失败并出现此错误。在 C API 中，有一个函数可以让它在`set_busy_timeout`指定时间（）之间的短暂睡眠重复重试，但我在 Android Java 包装器中没有看到类似的 API，所以你可能不得不处理重试这个错误自己。

还要确保在所有可能的错误条件下正确提交或回滚所有事务（没有显式事务完成所有语句）。

`isDbLockedByOtherThreads`返回可能是因为其他事务`false`在您调用它之前完成，或者仅在您调用它之后才开始，或者仅仅是因为它并不真正知道，因为我不知道有任何函数可以在 C 级别进行此检查。

如果您想修改一个表并且有一个未完成的语句引用它，也会发生类似的错误，但这是状态 6（表已锁定）。

# iphone - 如何在 iphone sdk 中实现面包屑导航？

> ID：10528643
> 
> 赞同：2
> 
> 时间：2012-05-10T06:35:03.073
> 
> 标签：iphone, ios, cocoa-touch, uinavigationcontroller

我想在我的 iOS 应用程序中实现面包屑导航。这怎么可能？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:39:53.853

如果您使用导航控制器，则可以使用该`viewControllers`属性轻松访问其视图控制器堆栈。没有内置的“面包屑”控件，因此您必须自己绘制，可能需要一系列按钮。当用户点击其中一个按钮时，您可以使用 UINavigationController 的`popToViewController:animated:`方法直接进入该视图控制器。

由于小型 iOS 设备上的屏幕空间有限，您可能需要考虑做“正常”的事情并仅使用库存导航控制器。在 iOS 中，必须向下钻取大量屏幕是不寻常的，因此在导航栏中轻按几下“返回”按钮通常会将用户带到他们想去的地方。

# python - 如何使用变量在 Tkinter 的画布上创建对象

> ID：10528645
> 
> 赞同：0
> 
> 时间：2012-05-10T06:35:16.230
> 
> 标签：python, python-3.x, tkinter

所以，我试图简化我的工作，结果在我第一次问的时候就犯了一个错误。我想问的是为什么这条线不起作用？

self.canvas.create_line(A,B,C,D)

现在的问题是具体的，不会对其他人有用，所以我不介意你删除这篇文章。不幸的是我不能删除它。

```
from tkinter import Tk, Canvas, Frame, BOTH

class Lsystem(Frame):

    def rule_1(self): #A0
        self.r.append(1)
        self.r.append(0)

        A = self.lastCo[0][0]
        B = self.lastCo[0][1]
        C = self.lastCo[0][0]+self.length
        D = self.lastCo[0][1]+self.length

        self.canvas.create_line(A,B,C,D)

    def rule_2(self): #B1
        self.r.append(1)

    def lindenL(self, num):
        x = 0
        while x < num:
            for cycle in list(range(len(self.q))):
                if self.q[0] == 1: self.rule_1()
                else: self.rule_2()
                self.q.pop(0)
            self.q = self.r
            #print (self.q)
            x += 1

        return self.q

    def setVariables(self):
        self.r = []
        self.q = [1]
        self.line = []
        self.length = 100
        self.maxCo = [800, 600]
        self.lastCo = [[400,600],[0,0]] #0 is A(0), 1 is B(1)

    def __init__(self, parent):
        Frame.__init__(self, parent)   

        self.setVariables()
        self.parent = parent        
        self.initUI()

        print(self.lindenL(2))

    def initUI(self):
        self.parent.title("Shapes")        
        self.pack(fill=BOTH, expand=1)
        self.canvas = Canvas(self)

        self.draw()

        self.canvas.pack()

    def draw(self):
        pass
        #self.canvas.create_line(self.calcCoA())

def main():

    root = Tk()
    ex = Lsystem(root)
    root.geometry("800x600+300+300")
    root.mainloop()  

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:54:20.003

你忘了收拾画布

例如。

```
 canvas = Canvas(self)
  canvas.pack() 
```

# objective-c - Objective-C 是否支持#elifdef？

> ID：10528646
> 
> 赞同：36
> 
> 时间：2012-05-10T06:35:16.370
> 
> 标签：objective-c, c-preprocessor

我似乎无法`#elifdef`在我的 iOS 项目中工作。如果我这样做：

```
#ifdef X
const Foo bar[] = { ... };
#else
const Foo bar[] = { ,,, };
#endif 
```

然后顶部的（在 X 下）会突出显示，而底部的则不会。如果我这样做：

```
#ifdef W
const Foo bar[] = { ;;; };
#elifdef X
const Foo bar[] = { ... };
#else
const Foo bar[] = { ,,, };
#endif 
```

然后底部的一个（在 else 下）被突出显示，而顶部的两个没有。为什么？我应该这样做吗？我有三个目标，它们都使用相同的 m 文件。但是，每个目标的常量都有些不同，所以我以这种方式将它们分开。

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-05-10T06:36:44.773

你可以简单地写：

```
#elif defined X 
```

它应该与所有 ANSI-C 兼容的编译器兼容。

# mysql - MySql 海量数据操作（超过 3000 万条数据记录）- 最优方式

> ID：10528648
> 
> 赞同：1
> 
> 时间：2012-05-10T06:35:32.527
> 
> 标签：mysql, database, performance

表一：**3500 万条记录** 表二：**160 万条记录**

我正在基于 3 个等式在表一中执行更新查询。这两个表都是没有任何键的纯数据集合。

```
`UPDATE table1,table2
SET table1.TravelTime=table2.CongestionTime
WHERE table1.From = table2.From
AND table1.To = table2.To
AND table1.Time= table2.Time` 
```

然而，这种操作似乎注定是缓慢的。有没有办法创造性地加快这个过程？

目前，查询的运行速度仅为每秒 300 次更新，这表明完成此查询需要 33 小时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T06:37:37.043

> 这两个表都是没有任何键的纯数据集合。

我想你只是在那里说的。在处理大量数据时，您需要索引以获得良好的性能。

尝试添加多列索引：

*   `(From, To, Time)`对于表 1。
*   `(From, To, Time, CongestionTime)`对于表 2。

您可能还需要考虑添加外键约束是否合适。

**相关文档**

*   [创建索引语法](http://dev.mysql.com/doc/refman/5.6/en/create-index.html)

# mysql - 查询中有两个分组依据，一个没有聚合函数。

> ID：10528650
> 
> 赞同：0
> 
> 时间：2012-05-10T06:35:56.537
> 
> 标签：mysql, sql, group-by

```
SELECT events.id, events.name, events.code, event_statuses.name as event_status_name
 , regions.name as event_region_name, event_locations.name as event_location_name
 , events.date_1, events.date_2
 , count(r.id) as regs 
FROM events 
 INNER JOIN event_locations ON event_locations.id = events.event_location_id 
 INNER JOIN event_statuses ON event_statuses.id = events.event_status_id
 LEFT OUTER JOIN regions ON regions.id = events.region_id 
 LEFT OUTER JOIN registrations as r ON events.id = r.event_id and r.registration_status_id = 4 
WHERE 1 GROUP BY events.id ORDER BY date_1 DESC LIMIT 0, 50 
```

如您所见，我的查询有一个聚合函数，它在按事件分组的注册上执行。

但是，我想`GROUP BY`在这个查询中有另一个，这个没有任何其他聚合函数。这里的重点是我希望事件列表按区域分组——现在不管它们是按什么排序的。如果它们按排序`regs`- 我会将来自波士顿的所有事件聚集在一起显示，然后按 regs 排序。因此需要另一个 Group By。这是我想出的，但这也不起作用：

```
SELECT events.id, events.name, events.code, event_statuses.name as event_status_name
 ,regions.name as event_region_name, event_locations.name as event_location_name
 , events.date_1, events.date_2, r.regs
 FROM events 
 INNER JOIN event_locations ON event_locations.id = events.event_location_id 
 INNER JOIN event_statuses ON event_statuses.id = events.event_status_id
 LEFT OUTER JOIN regions ON regions.id = events.region_id 
 LEFT OUTER JOIN 
        (Select event_id, count(id) as regs 
        from registrations where registration_status_id = 4 
        group by event_id) r on events.id = r.event_id
 WHERE 1 GROUP BY events.region_id, events.id ORDER BY date_1 DESC LIMIT 0, 50 
```

我仍然无法按地区将它们分组在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:41:36.793

> 我希望事件列表按区域分组——现在不管它们是按什么排序的。如果它们按 regs 排序——我会将来自波士顿的所有事件聚集在一起显示，然后按 regs 排序。

您需要 ORDER BY，而不是 GROUP BY。您可以在 ORDER BY 子句中的所有其他字段之前添加要“聚集在一起”的字段。

```
ORDER BY region_id, regs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:43:28.920

Here is a modified version

```
SELECT
  events.id,
  events.region_id,
  events.name,
  events.code,
  event_statuses.name  as event_status_name,
  regions.name         as event_region_name,
  event_locations.name as event_location_name,
  events.date_1,
  events.date_2,
  r.regs
FROM events
  INNER JOIN event_locations
    ON event_locations.id = events.event_location_id
  INNER JOIN event_statuses
    ON event_statuses.id = events.event_status_id
  LEFT OUTER JOIN regions
    ON regions.id = events.region_id
  LEFT OUTER JOIN (Select
                 event_id,
                 count(id)             as regs
               from registrations
               where registration_status_id = 4
               group by event_id) r
    on events.id = r.event_id
WHERE 1
GROUP BY events.region_id, events.id
ORDER BY date_1 DESC
LIMIT 0, 50 
```

Try this i have only selected the column events.region_id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T06:43:42.527

If you want to "clumped together" then it sound like you want to use and aggregate for the regs.

```
SELECT 
  events.id, 
  events.name, 
  events.code, 
  event_statuses.name as event_status_name,
  regions.name as event_region_name, 
  event_locations.name as event_location_name, 
  events.date_1, 
  events.date_2, 
  SUM(r.regs) AS regs
....
GROUP BY events.region_id, events.id ORDER BY date_1 DESC LIMIT 0, 50 
```

# hosting - 如何将 IP 地址设置为子域的 CNAME 记录

> ID：10528652
> 
> 赞同：4
> 
> 时间：2012-05-10T06:36:11.183
> 
> 标签：hosting, ip, cname

我有一个亚马逊弹性 IP。我有一个像 aap.myhosting.com 这样的子域，我想将此 IP 地址与“app”子域相关联。但是，当我更改 CNAME 并将 IP 地址作为子域“app”的主机时，我收到以下错误。

> 请仅使用字母、数字、破折号 (-) 或句点 (.)，后跟适当的网络扩展名，例如 .com、.net、.org。不要输入空格或其他标点符号。（例如：abc-company.com）

该错误是不言自明的，但无论如何我可以将此 IP 设置为子域的主机吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-10T06:40:53.103

CNAME 并非旨在将子域指向 IP 地址。您必须使用 A 记录。如果子域已经在 CNAME 中，则必须将其删除，然后将其添加为指向所需 IP 地址的 A 记录。

# c - 分叉一个进程并等待孩子退出

> ID：10528654
> 
> 赞同：0
> 
> 时间：2012-05-10T06:36:20.287
> 
> 标签：c, linux, process, linux-kernel, fork

我正在用 C 语言编程并尝试学习分叉进程的概念，但我对以下程序的输出感到困惑。所以我需要对此进行一些解释。

```
 int main() {
            pid_t pid;
 24         int status, died;
 25         switch(pid = fork()){
 26                 case -1: printf("Can't fork\n");
 27                          exit(-1);
 28                 
 29                 case 0 : printf(" Child is sleeping ...\n"); 
 30                          sleep(5); // this is the code the child runs
 31                          //exit(3); 
 32                          
 33                 default:
 34                          printf("Process : parent is waiting for child to exit\n");
 35                          died = wait(&status); // this is the code the parent runs 
 36                          printf("Child's process table cleared...\n");
 37         }
 38         return 0;
 39 }

The output of the above program is :

Process : parent is waiting for child to exit
Child is sleeping ...
Process : parent is waiting for child to exit
Child's process table cleared...
Child's process table cleared... 
```

这里我不明白为什么这个“儿童进程表已清除......”会出现两次。请解释一下。

平台：Linux，gcc编译器

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T06:37:54.163

`break`孩子的语句中没有`case`，因此孩子也执行该`default`语句

你似乎已经注释掉了`exit(3)`。如果它在那里就更好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:43:50.197

i got it what i was missing ... it is because of the absence of the break statement there.If i would have used break or exit(), output wouldn't have been like this. Thanks.

# language-agnostic - zeroMQ 上下文背后的基本原理是什么？

> ID：10528659
> 
> 赞同：17
> 
> 时间：2012-05-10T06:36:58.020
> 
> 标签：language-agnostic, zeromq

在[探索 zeroMQ（对于那些不知道的人来说，这是一个非常有用的套接字替代品）](http://www.zeromq.org/)时，我在邮件列表中遇到了这个问题：

> [**使用多个上下文：使用多个上下文有缺点吗？**](http://lists.zeromq.org/pipermail/zeromq-dev/2011-August/012819.html)
> 
> > > 使用多个上下文有缺点吗？我有一个类包装器，我想尽可能简单。我可以修改它以允许在单个上下文下进行多个连接、套接字等，或者保持原样并让包装器的客户端多次实例化它。
> 
> 我认为有两个缺点。
> 
> 1.  占用资源没有好的效果（额外的内存占用、另一个 I/O 线程等）
> 2.  在不同上下文中创建的套接字*不能*使用“inproc”传输相互通信。“inproc”这个名字有点用词不当。它的真正意思是“上下文内”。
> 
> 铬

回顾我的和其他各种源代码，我最终意识到上下文设置代码：

```
void *context = zmq_init (1); //creates the context 

void *responder = zmq_socket (context, ZMQ_REP); //creates the socket

zmq_bind (responder, "tcp://*:5555"); //and binds it

... //Do whatever you want with the socket ...

zmq_close (responder); //destructors
zmq_term (context); 
```

可以有效地替换为：

```
void *context = zmq_init(1); //saving the context is optional

responder = zmq_socket(type); //creates the socket
//additional [context] can be provided if desired (multi-context?)

zmq_bind (responder, "tcp://*:5555"); //and binds it

... //Do whatever you want with the socket ...

zmqx_dest(); //destroys the global context, else provide alternative [context] 
```

这就是我对宏所做的。它使事情更容易跟踪少 1 个变量（在 100 个变量中）。尽管它远非“理想”，因为它要求宏位于相同的“功能范围”内，但这很容易解决。

虽然我的示例是 C，但这有点与语言无关。

* * *

**因此，问题是，创建这样的上下文有什么意义/好处？**

什么时候允许这样的功能实际上是不利的？因为我可以很容易地预见到很多（他们只是复制/粘贴/编辑代码），而不考虑额外的开销，并在不需要时创建“很多上下文”[对于其他类似的结构多次看到，尽管它们的存在已经自己的理由]

我这么说的原因之一是我正在考虑在初学者游戏编程模块中使用 zeroMQ。很大程度上是因为它的简单性，以及插座往往会为新人烧毁脑细胞这一事实。

* * *

随机，我实际上证明了谷歌 V8 上下文系统的基本原理（类似的问题；不同的系统）： [HandleScope 背后的设计原理是什么？](https://stackoverflow.com/questions/9510822/what-is-the-design-rationale-behind-handlescope/10291784#10291784)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-16T20:16:58.433

这是个好问题。如果您不需要保存全局上下文，为什么还要让应用程序创建它？libzmq 可以在第一次需要时轻松设置其状态。

然而，0MQ 的旧 API 的问题不在于它强制您使用上下文，因为这些是套接字的自然父类。问题是，在努力创建和跟踪上下文之后，您的工作几乎没有任何价值。似乎一切都付出了代价，却没有任何好处。

如果您查看更新的 API，例如 CZMQ 和 0MQ/3.1，您会发现上下文更加有用。在 CZMQ 中，我们在销毁上下文时干净地关闭并销毁所有套接字。这真的很有用。在 0MQ/3.1 中，我们添加了一些上下文配置，例如 I/O 线程数等。此外，API 与类模型更加一致（zmq_ctx_new、zmq_ctx_set/get、zmq_ctx_destroy）（看起来也更像 CZMQ）。

# android - 在AndEngine中恢复Activity时避免黑屏

> ID：10528664
> 
> 赞同：3
> 
> 时间：2012-05-10T06:37:16.113
> 
> 标签：android, andengine

恢复 AndEngine 活动时，有什么方法可以避免黑屏？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-27T23:35:30.223

你重写了这个方法吗？

```
@Override
public void onGameCreated() {
    super.onGameCreated();
} 
```

调用“super.onGameCreated()”很重要。

# ruby - 不关闭此代码段中的文件是不好的做法吗？

> ID：10528665
> 
> 赞同：0
> 
> 时间：2012-05-10T06:37:26.567
> 
> 标签：ruby, file-io

只是思考一下关闭我在代码中明确打开的文件的必要性。我来自 C 和 C++ 编程背景，并开始在 Ruby 中导航。提前感谢您的反馈。

```
from_file, to_file = ARGV
script = $0

puts "Copying from #{from_file} to #{to_file}"
File.open(to_file, 'w').write(File.open(from_file).read())

puts "Alright, all done." 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T06:39:39.220

除非您使用类似`with`python 中的语句，否则不关闭文件总是不好的做法。

虽然脚本语言通常会在退出时关闭打开的文件，但在您完成文件后立即执行此操作会更干净——尤其是在写入文件时。

[显然](https://stackoverflow.com/questions/4795447/rubys-file-open-and-the-need-for-f-close)Ruby 有一些类似于 python 的东西`with`：

```
File.open(from_file, 'r') do |f_in|
    File.open(to_file, 'w') do |f_out|
        f_out.write(f_in.read)
    end
end 
```

相关文档：[http ://ruby-doc.org/core-1.9.3/File.html#method-c-open](http://ruby-doc.org/core-1.9.3/File.html#method-c-open)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T12:43:29.407

这是一个较短的版本：

```
File.write to_file, File.read(from_file) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T15:15:43.173

此代码 (Matheus Moreira) 自动关闭文件：

```
File.write to_file, File.read(from_file) 
```

此代码中无法关闭文件：

```
File.open(to_file, 'w').write(File.open(from_file).read()) 
```

我猜也自动关闭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T09:52:56.193

这是一个很好的答案，但将输出文件放在外部块上并使用 << 更“红宝石”：

```
File.open(to_file, 'w') do |f_out|
  f_out << File.open(from_file){|f| f.read}
end 
```

请注意阅读时如何不需要'r'。

# android - 如何在画布中仅绘制弧的一部分

> ID：10528672
> 
> 赞同：1
> 
> 时间：2012-05-10T06:38:01.193
> 
> 标签：android

我正在开发一个模拟时钟小部件，时钟表盘是一个图像。我想在图像中绘制一个弧段（如橙色所示）。

```
paint.setColor(Color.GREEN);
paint.setStrokeWidth(20);
paint.setAntiAlias(true);
paint.setStyle(Paint.Style.STROKE);
canvas.drawCircle(100, 100, 200, paint); 
```

我尝试使用 drawcircle 和 drawArc 但无法继续，因为我只想要弧的一部分而不是完整的弧。有任何想法吗 ？

![在此处输入图像描述](../Images/b04b06c05dfff1a3f27bde3a6a173bf1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-22T19:50:31.460

我做了这门课，希望对你有帮助，所有变量都是西班牙语，但很简单，

构造函数 SemiCirculo 将半圆的 rgb 和分辨率（半圆的三角形数量）用作参数

CalcularPuntosPorcentaje 方法使用圆心、起始角度、角度宽度和无线电作为参数。

ImprimeCirculo 方法使用画布作为参数，它用于绘制半圆，一旦它已经用前面提到的方法计算了半圆的点。

CalcularPuntosPorcentaje 方法与 CalcularPuntosPorcentaje 方法类似，但它使用从 0 到 100 的 % 的起始角和宽度角参数

最后，SetOffset 和 SetColor 用于更改半圆的角度和颜色的默认起始位置参考

```
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;

public class SemiCirculo {

    private Path circulo;
    private Paint color;
    private float px, py, radio, anguloI, anchoa,offset;
    private int r, g, b;
    private int resolucion;
    private float puntox[],puntoy[];

    public SemiCirculo(int r1, int g1, int b1, int resolucion1) {

        this.offset = 0;
        this.color = new Paint();
        this.r = r1;
        this.g = g1;
        this.b = b1;
        this.color.setColor(Color.rgb(r, g, b));
        color.setAntiAlias(true);
        circulo = new Path();
        this.resolucion = resolucion1;
        this.puntox = new float[this.resolucion];
        this.puntoy = new float[this.resolucion];
        this.anguloI = 0;
        this.anchoa = 1;

    }

    public void SetOffset(float off) {
        this.offset = off;
    }

    public void SetColor(int r1,int g1, int b1){        
        this.r=r1;
        this.g=g1;
        this.b=b1;
        this.color.setColor(Color.rgb(r, g, b));
    }

    public void CalcularPuntosPorcentaje(float px1, float py1,
            float porcentaje, float radio1) {
        this.anguloI = 0 + this.offset;
        this.px = px1;
        this.py = py1;
        this.radio = radio1;
        this.anguloI = 0;
        this.anchoa = porcentaje / 100 * 360;

        this.CalcularPuntos(px, py, anguloI, anchoa, radio);
    }

    public void CalcularPuntos(float px1, float py1, float anguloI1,
            float anchoangulo, float radio1) {
        this.anguloI = anguloI1 + this.offset;

        this.anchoa = anchoangulo;
        this.px = px1;
        this.py = py1;
        this.radio = radio1 ;

        float angulo = 360 - this.anguloI - this.anchoa;

        for (int i = 0; i < resolucion; i++) {
            this.puntox[i] = this.px - (float) Math.sin(Math.toRadians(angulo))
                    * this.radio;
            this.puntoy[i] = this.py - (float) Math.cos(Math.toRadians(angulo))
                    * this.radio;
            angulo = (360 - this.anguloI - this.anchoa)
                    + ((this.anchoa / (float) (this.resolucion)) * (i + 2));
        }

        this.circulo.reset();

        this.circulo.moveTo(this.px, this.py);
        for (int i = 0; i < resolucion; i++) {
            this.circulo.lineTo(this.puntox[i], this.puntoy[i]);
        }

    }

    public void ImprimeCirculo(Canvas canvas) {

        canvas.drawPath(this.circulo, this.color);

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:42:28.950

您需要使用此方法：

```
canvas.drawArc(innerRect, -11.0f, 11.0f + 6.0f, true, paintx); 
```

对于文档，请参见此处：

[http://developer.android.com/reference/android/graphics/Canvas.html#drawArc%28android.graphics.RectF,%20float,%20float,%20boolean,%20android.graphics.Paint%29](http://developer.android.com/reference/android/graphics/Canvas.html#drawArc%28android.graphics.RectF,%20float,%20float,%20boolean,%20android.graphics.Paint%29)

一定要正确设置角度参数！并使用浮动！

第一个角度是弧的起点，第二个角度参数是扫角，即角度应该长多少度 - 顺时针测量。

试试看，它肯定会奏效。只需要玩一点:-)

# php - php 驱动的网站作为 Windows 可执行文件

> ID：10528685
> 
> 赞同：1
> 
> 时间：2012-05-10T06:39:16.660
> 
> 标签：php, windows

有没有办法让我的 PHP/SQL 驱动的网站被封装为 Windows 可执行文件（免费）？是否有额外的文件以及可执行文件并不重要，我只希望它是我可以分发的东西，而无需人们安装 Web 服务器和 Web 浏览器（如果可能嵌入的浏览器是 Chrome，我更喜欢，但我知道我可能不得不接受 IE）。

目前选项似乎是 Bambalam、exeOutput 和 XAMPP。不幸的是，我不能使用 Bambalam，因为它会立即被我的病毒扫描程序破坏，而且我还没有尝试过 XAMPP 或 exeOutput（现在下载）。

有谁知道我可以完全从 Windows 使用的任何其他选项（我不需要在 Unix 上运行以生成可执行文件等）？谢谢。

（再想一想，我可能会重写我的网站以使用 SQLite，然后只使用 IE WebBrowser 控件在本地加载页面或其他东西，但现有的解决方案会更好）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:04:45.727

你可以给[Server2Go](http://www.server2go-web.de/)看看。它是一个可移植的网络服务器包，只需单击一个 exe 文件即可启动网络服务器、mysql 服务器和浏览器以及您的页面。

# bash - 如何在不影响其他完成脚本的情况下重置 COMP_WORDBREAKS？

> ID：10528695
> 
> 赞同：23
> 
> 时间：2012-05-10T06:40:25.897
> 
> 标签：bash, shell, autocomplete, bash-completion

当我实现一个 bash 自动完成功能时，有些东西让我感到困惑，我将把它放在**/etc/bash_completion.d/**

为了实现某些功能，我想`:`从变量中删除分词字符冒号（）并在开头`$COMP_WORDBREAKS`添加一个斜杠（ ） 。`/``$COMP_WORDBREAKS`

```
COMP_WORDBREAKS=" /'><=;|&("
_mytool()
{
    local cur=${COMP_WORDS[COMP_CWORD]}
    compopt -o nospace

    # my implement here

    COMPREPLY=( $(compgen ..........my_implement......... -- $cur) )
}
complete -F _mytool mytool 
```

但是，我无法`COMP_WORDBREAKS`直接重置，因为该值与其他完成脚本共享。到调用完成函数时，变量`COMP_WORDS`数组已经被填充，因此本地更改`COMP_WORDBREAKS`无效。

是否有任何解决方案可以更改`COMP_WORDBREAKS`一个完成脚本而不影响其他脚本？

```
$ echo $BASH_VERSION
4.2.10(1)-release 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-19T13:13:47.907

不推荐在完成脚本中进行修改`$COMP_WORDBREAKS`（因为它是一个全局变量，它可能会影响其他完成脚本的行为 - 例如 ssh）。

但是，bash 补全提供了一些帮助方法，您可以使用它们来实现您的目标。

处理完成词中的非断词字符的推荐方法是使用两种辅助方法：

*   `_get_comp_words_by_ref`有`-n EXCLUDE`选项

    *   在不将 EXCLUDE 中的字符视为分词的情况下获得完整的单词
*   `__ltrim_colon_completions`
    *   从 COMPREPLY 项目中删除包含前缀的冒号（ [http://tiswww.case.edu/php/chet/bash/FAQ](http://tiswww.case.edu/php/chet/bash/FAQ) - E13
        的解决方法）

因此，这是一个如何处理完成词中的冒号 (:) 的基本示例：

```
_mytool()
{
    local cur
    _get_comp_words_by_ref -n : cur

    # my implementation here

    COMPREPLY=( $(compgen ..........my_implement......... -- $cur) )

    __ltrim_colon_completions "$cur"
}
complete -F _mytool mytool 
```

最后一个提示，辅助方法位于`/etc/bash_completion`. 查看内部以阅读每个方法的详细说明并发现更多辅助方法。

# c# - 如何将leftouterjoin查询转换为LINQ

> ID：10528697
> 
> 赞同：2
> 
> 时间：2012-05-10T06:40:43.447
> 
> 标签：c#, sql, linq

我有一个sql查询，它有innerjoin和leftouter join，这对于mr转换为LINQ来说非常棘手。

```
SELECT project.ID, project.No, project.Name,  
       APPLN.Id,APPLN.Name,SAR.Name  
FROM Phasefact phase WITH (NOLOCK)  
INNER JOIN AProject project WITH (NOLOCK) on phase.Id = project.ID
INNER JOIN Application APPLN WITH (NOLOCK) ON project.AppId = APPLN.Id
LEFT OUTER JOIN Master master WITH (NOLOCK) ON phase.amId = master.Id
INNER JOIN Ref SAR WITH (NOLOCK) ON SAR.ID = master.Ref_Id
WHERE phase.ID = 123 
```

这有点令人困惑，因为它包含“左外连接”。有人请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:51:09.760

也许是这样的：

```
var result=(
        from phase in db.Phasefact
        join project in db.AProject
            on phase.Id equals project.ID
        join APPLN in db.Application 
            on project.AppId equals APPLN.Id
        //Left join
        from master in db.Master
            .Where(a=>a.Id==phase.amId).DefaultIfEmpty()
        join SAR in db.Ref
            on SAR.ID equals master.Ref_Id
        where phase.ID == 123 
        select new
        {
            project.ID,
            project.No,
            project.Name,  
            APPLN.Id,
            APPLN.Name,
            SAR.Name
        }
    ); 
```

**编辑**

但我不明白`left join`。你为什么用一个`left join`？对我来说，您似乎首先使用 a `left join`：

```
LEFT OUTER JOIN Master master WITH (NOLOCK) ON phase.amId = master.Id 
```

之后你有一个限制结果的连接，如下所示：

```
INNER JOIN Ref SAR WITH (NOLOCK) ON SAR.ID = master.Ref_Id 
```

这与执行此操作相同：

```
INNER JOIN Master master WITH (NOLOCK) ON phase.amId = master.Id
INNER JOIN Ref SAR WITH (NOLOCK) ON SAR.ID = master.Ref_Id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:48:22.567

我正在向您介绍 LINQ 中左外连接的基本概念

> var lines = from p in db.Phasefact
> join m in db.Master on m.Id 等于 p.amId into p_m 其中 p.ID == 123 from m in p_m.DefaultIfEmpty() select new { p.ID };

现在您可以根据您的逻辑进行更多转换......或查询......

# android - Android：如何在方向改变时处理布局的动画？

> ID：10528701
> 
> 赞同：0
> 
> 时间：2012-05-10T06:41:11.213
> 
> 标签：android, animation

我在线性布局中添加了一个动画，当动画运行时，如果我改变方向，它就会崩溃。我正在使用 .startAnimation(Animation) 来运行布局的动画。如何在方向更改期间处理元素的动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:08:04.003

打开您的 manifest.xml 文件 .change 在您的活动选项卡中。

```
<activity
            android:configChanges="keyboardHidden|orientation" 
            android:name=".testActivity"
            android:label="@string/app_name"></activity> 
```

# oracle11g - Oracle 错误：System.data.oracleclient 需要 oracle 客户端软件版本 8.1.7 或更高版本

> ID：10528702
> 
> 赞同：2
> 
> 时间：2012-05-10T06:41:13.517
> 
> 标签：oracle11g

我在 C#.Net 应用程序中工作。我在服务器的 IIS 中托管了我的应用程序。该服务器包含 Oracle 11g 版本（64 位）。服务器也是 64 位机器。但是在运行我的应用程序时，我收到错误消息

> system.data.oracleclient 需要 oracle 客户端软件版本 8.1.7 或更高版本

我是否需要在该服务器上安装 oracle 客户端版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T11:34:18.673

上述问题已修复。

解决方案：Oracle Home 文件夹中的“Authenticated Users”应授予读写权限，系统应为“RESTARTED”。

# java - Java“VM初始化期间发生错误”错误

> ID：10528711
> 
> 赞同：1
> 
> 时间：2012-05-10T06:42:03.367
> 
> 标签：java, jvm, 64-bit, out-of-memory

我在 windows 7 中使用 eclipse。当我将**-Xmx**参数设置为大于**1500m**时，会出现以下错误：

```
Error occurred during initialization of VM
Could not reserve enough space for object heap 
```

eclipse 和 jdk 都是 64 位版本。我机器的物理内存是**4g**。这是 eclipse.ini 文件：

```
-startup
plugins/org.eclipse.equinox.launcher_1.2.0.v20110502.jar
--launcher.library
plugins/org.eclipse.equinox.launcher.win32.win32.x86_64_1.1.100.v20110502
-product
org.eclipse.epp.package.java.product
--launcher.defaultAction
openFile
--launcher.XXMaxPermSize
256M
-showsplash
org.eclipse.platform
--launcher.XXMaxPermSize
256m
--launcher.defaultAction
openFile
-vmargs
-Dosgi.requiredJavaVersion=1.5
-Xms400m
-Xmx3840m 
```

我以为在 64 位 java 下我可以使用超过 1.5g 的内存，但 eclipse 不断抛出上述错误。有任何想法吗？

程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:52:44.470

如果您的机器有 4G 内存，这并不意味着所有内存都可供使用。可用 RAM 将始终小于 4 GB，因为本机操作系统和运行您机器的其他应用程序将使用部分 RAM。找出可用 RAM 的快速方法是

1.  打开记事本（你提到你在 Windows 7 上。）
2.  点击帮助 -> 关于
3.  它在底部显示可用的物理内存。

选择堆大小没有直接的规则。它总是涉及调整。经过一些迭代后达到最佳值。在同一论坛上查看[此帖子。](https://stackoverflow.com/questions/1651225/how-to-choose-the-jvm-heap-size)

# javascript - 在 Chrome 中添加带有图像的 div

> ID：10528714
> 
> 赞同：2
> 
> 时间：2012-05-10T06:42:08.933
> 
> 标签：javascript, jquery, html, css, google-chrome

单击链接后，我在将带有图像的 div 附加到页面时遇到问题。这是我的脚本，它在 document.ready() 上添加了事件。

```
var handler = function () {
    $('#content').append("<div class=\"loading-graphic\" style=\"position:absolute;height:200px;width:200px;top:30%;left:40%;z-index:999;\"></div>");
    //$("<div class=\"loading-graphic\" style=\"position:absolute;height:200px;width:200px;top:30%;left:40%;z-index:999;\"></div>").appendTo("div#content");
}

$(document).ready(function () {
    for (var ls = document.links, numLinks = ls.length, i = 0; i < numLinks; i++) {

        if (ls[i].parentElement.className != "t-window-actions t-header" && ls[i].parentElement.className != "t-widget t-numerictextbox") {
            ls[i].onclick = handler;
        }
    }
}) 
```

这里的问题是它不能在 Chrome 中运行，而在 Firefox 和 IE 中它运行良好。经过一番挖掘，我发现它实际上添加了 div 但没有显示图像。（通过在页面开头添加div进行测试，一切都向下移动，div为空）

我已经对其进行了测试，也将其直接添加到页面中，然后效果很好，但不幸的是，这不是我想要的。

这是我的CSS类：

```
.loading-graphic
{
    background: url('~/Content/ico/loading_big.gif') no-repeat;
} 
```

不知道是什么导致了问题。有人有想法吗？;/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:55:51.817

这是背景位置；还增加了 z-index，附加到身体，并防止了其他隐形原因。

```
var handler = function () {
    $('body').append("<div class=\"loading-graphic\" style=\"position:absolute;height:200px;width:200px;top:50%;left:50%;margin:-100px 0 0 -100px;z-index:99999;background-position:center center;display:block !important;\"></div>");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T14:46:47.117

老实说，有时 Chrome 会搞砸。我在使用 Chrome 和背景图片时遇到了问题，但这只是我的电脑。换个电脑Chrome浏览器试试，可能不一样。

我建议的另一件事是，让你的 div 已经编码而不是附加它。所以基本上把它放在html代码上，放在看不见的地方，然后当你需要它的时候，把它移到正确的位置。

# jquery - JQuery slice() 没有正确隐藏/显示

> ID：10528715
> 
> 赞同：0
> 
> 时间：2012-05-10T06:42:11.710
> 
> 标签：jquery, hide, show, slice

我有16个类的元素`row`

我正在尝试通过切片更改一次显示的元素。

```
$(document).ready(function() {
$('.row').slice(0, 2).show();
$('.row').slice(3, 16).hide();

$('#next').click(function() {
    $('.row').slice(0, 2).hide();
    $('.row').slice(3, 5).show();
    $('.row').slice(6, 15).hide();
});

}); 
```

所以最初，你只看到这三个项目：

```
Row 0
Row 1
Row 2
//$('.row').slice(0, 2).show(); -- this is correct 
```

但是当我点击我的按钮来显示接下来的三个时，它会显示：

```
Row 2
Row 3
Row 4
//yet I specified this: $('.row').slice(3, 5).show(); 
```

为什么会发生这种情况，如何解决？

Jfiddle：http: [//jsfiddle.net/RjHvw/](http://jsfiddle.net/RjHvw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:56:21.193

```
Row 2
Row 3
Row 4
//yet I specified this: $('.row').slice(3, 5).show(); 
```

这似乎是正确的，切片索引是基于 0 的。

您可以添加`1`：

```
// just so it's clear
// you'd tipically have an `idx`
// or `counter` where you add `1`
$('.row').slice(3 + 1, 5 + 1).show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:56:28.540

slice 方法是基于零的索引，[Slice](http://api.jquery.com/slice/)，甚至结束参数也是基于零的。范围扩展到但不包括指定的索引。

[在 JsFiddle 中查看演示](http://jsfiddle.net/hsW8V/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:05:14.457

正如其他人已经说过的那样， [Slice](http://api.jquery.com/slice/)使用基于 0 的索引，并且结束编号的元素被排除在所选列表之外。这是 jQuery.com 中的参数定义，它说明了这一点

> .slice( start [, end] )
> start 一个整数，指示开始选择元素的从 0 开始的位置。如果为负，则表示与集合末尾的偏移量。
> 
> end 一个整数，指示元素停止被选择的从 0 开始的位置。如果为负，则表示与集合末尾的偏移量。如果省略，则范围将持续到集合的末尾。

这是您要实现的目标的[工作演示](http://jsfiddle.net/joycse06/NGmyZ/1/)

# java - ExternalStorage 上的 FileNotFoundException，虽然我有读写权限

> ID：10528717
> 
> 赞同：3
> 
> 时间：2012-05-10T06:42:21.197
> 
> 标签：java, android, ioexception

这是我的问题：我现在尝试了 10 种不同的解决方案，但仍然无法正常工作。

我想从 Internet 下载 PDF 文件，然后将其保存到外部存储中。

我所做的： - 添加了 INTERNET 和 WRITE_EXTERNAL_STORAGE “使用权限” - 尝试使用模拟器，以及插入和关闭的 Galaxy Nexus

那是我的 doInBackground 下载方法：

```
26    @Override
27    protected String doInBackground(String... downloadUrl) {
28      if (!mediaIsAvailable()) return null;
29
30      final int BUFFER_SIZE = 1024 * 23;
31      String url              = downloadUrl[0];
32      String target_filename  = downloadUrl[1];
33      String ns = Context.NOTIFICATION_SERVICE;
34      NotificationManager notificationManager = (NotificationManager) context.getSystemService(ns);
35
36      try {
37          File targetDir = new File(Environment.getExternalStorageDirectory(), "Download");
38          if(!targetDir.exists())
39          {
40              targetDir.mkdirs();
41          }
42
43          File file = new File(targetDir, target_filename);
44          URL urlObj = new URL(url);
45          URLConnection connection = urlObj.openConnection();
46
47          BufferedInputStream bis = new BufferedInputStream(connection.getInputStream(), BUFFER_SIZE);
48
49          FileOutputStream fos = new FileOutputStream(file);
50          byte[] bArray = new byte[BUFFER_SIZE];
51          int current = 0;
52          int read = 0;
53          while(current != -1)
54          {
55              fos.write(bArray,0,current);
56              current = bis.read(bArray, 0, BUFFER_SIZE);
57              read = read + current;
58          }
59          fos.close();
60          bis.close();
61          notificationManager.cancel(1);
62      } catch (MalformedURLException e) {
63          e.printStackTrace();
64      } catch (FileNotFoundException e) {
65          e.printStackTrace();
66      } catch (IOException e) {
67          e.printStackTrace();
68      }
69      return null;
70    } 
```

这就是我得到的例外：

```
05-10 08:31:17.861: W/System.err(23054): java.io.FileNotFoundException: /mnt/sdcard/Download/speiseplan-rosenheim.pdf: open failed: EACCES (Permission denied)
05-10 08:31:17.861: W/System.err(23054):    at libcore.io.IoBridge.open(IoBridge.java:406)
05-10 08:31:17.861: W/System.err(23054):    at java.io.FileOutputStream.<init>(FileOutputStream.java:88)
05-10 08:31:17.861: W/System.err(23054):    at java.io.FileOutputStream.<init>(FileOutputStream.java:73)
05-10 08:31:17.861: W/System.err(23054):    at de.fhrosenheim.app.campus.helpers.DownloadFileHelper.doInBackground(DownloadFileHelper.java:49)
05-10 08:31:17.861: W/System.err(23054):    at de.fhrosenheim.app.campus.helpers.DownloadFileHelper.doInBackground(DownloadFileHelper.java:1)
05-10 08:31:17.861: W/System.err(23054):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
05-10 08:31:17.861: W/System.err(23054):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-10 08:31:17.861: W/System.err(23054):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-10 08:31:17.861: W/System.err(23054):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
05-10 08:31:17.861: W/System.err(23054):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
05-10 08:31:17.868: W/System.err(23054):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
05-10 08:31:17.868: W/System.err(23054):    at java.lang.Thread.run(Thread.java:856)
05-10 08:31:17.868: W/System.err(23054): Caused by: libcore.io.ErrnoException: open failed: EACCES (Permission denied)
05-10 08:31:17.868: W/System.err(23054):    at libcore.io.Posix.open(Native Method)
05-10 08:31:17.868: W/System.err(23054):    at libcore.io.BlockGuardOs.open(BlockGuardOs.java:110)
05-10 08:31:17.868: W/System.err(23054):    at libcore.io.IoBridge.open(IoBridge.java:390)
05-10 08:31:17.868: W/System.err(23054):    ... 11 more 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T07:07:41.617

有没有机会，有“WRITE_INTERNAL_STORAGE”作为权限而不是“WRITE_EXTERNAL_STORAGE”我通过权限 GUI 添加的？我不知道为什么会这样，但我修复了 xml，它现在可以工作了。还是谢谢大家

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T08:28:06.467

> java.io.FileNotFoundException：/mnt/sdcard/Download/speiseplan-rosenheim.pdf：打开失败：EACCES（权限被拒绝）

```
File targetDir = new File(Environment.getExternalStorageDirectory(), "Download"); 
```

尝试

```
String path = Environment.getExternalStorageDirectory().toString() + "/" + "Download"; 
```

和

```
File file = new File(path, target_filename); 
```

# php - 从第一页提交数据到第二页然后第三页加载内容第二页

> ID：10528721
> 
> 赞同：0
> 
> 时间：2012-05-10T06:42:40.963
> 
> 标签：php

我有 3 个 php 页面。

第一页：search.php

第二页：process.php

第三页：load.php

第一个页面获取用户输入并将其转发到第二个页面，第二个页面通过算法过滤输入。第一页如下：

```
<form id="search" name="frmSearch" method="Post" action="secondpage.php" target ="thirdpage.php">

  <p>
      <input type="text" id="from" name="txt_source" />
  </p>

  <p>
    <input type="text" id="to" name="txt_destination" />
  </p>

  <p>
    <input type="submit" name="btnSubmit" class="submi"/>
  </p>

</form> 
```

如前所述，第二页 [secondPage.php] 过滤结果。部分代码是

```
$source = &$_POST['txt_source'];

$destination = &$_POST['txt_destination'];

.... 
....
... 
```

输出为xml文档树格式如下

此 XML 文件似乎没有任何与之关联的样式信息。文档树如下所示。- - - - -- - - - - - - -- - -- - - -- - - -- - - -- - ....

第三页 [thirdPage.php] 应采用在第三页加载时从第二页显示的 xml 标记城市。

当第一页表单的输入被提交时，第二页被显示。然而，在使用

header('位置：thirdpage.php');

在第二页重定向到第三页，xml 文档树不加载。所以，我猜 header('location:thirdpage.php'); 效率低下。

有人可以帮忙或给个提示。我需要一种将页面重定向到第三页而不影响第二页内容的方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:51:26.277

第一个.php

```
<form action="./second.php" method="post"> 
```

第二个.php

```
// do validation, afterwards redirect
header('third.php'); exit; 
```

第三个.php

```
//print thirds' page data 
```

如果你想“保留”第一页，而不是重定向到 third.php 页面，重定向到 first.php，然后在 first.php 中包含 third.php (include_once('third.php');

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:32:13.670

答案几乎是你自己给出的。

只需将您的表单更改为：

```
<form action="second.php" method="post" target="_blank"> 
```

这将打开一个新窗口，使第一个窗口保持不变。第三页最终会在新窗口中加载。

**更新**

当您想将转换后的数据从 page2（即 xml）传递到 page3 时，我建议：

*   创建一个带有表单的页面，将整个 xml 添加为隐藏输入字段，并将其提交到 page3
*   将 xml 的内容转储到会话变量或临时文件中，并让 page3 从那里加载它。

# wordpress - WordPress子目录的子目录

> ID：10528723
> 
> 赞同：0
> 
> 时间：2012-05-10T06:42:45.677
> 
> 标签：wordpress, .htaccess, subdirectory

这应该很简单 - 无法弄清楚我哪里出错了：

我们在以下位置安装了 WordPress：[http](http://example.com/gallery/cms) ://example.com/gallery/cms ，我希望该网站在[http://example.com/gallery上可见](http://example.com/gallery)

我将 WordPress 地址设置为[http://example.com/gallery/cms](http://example.com/gallery/cms)并将站点地址设置为[http://example.com/gallery](http://example.com/gallery)

我将 .htaccess 和 index.php 复制到 /gallery 文件夹。.htaccess 包含以下代码：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /gallery/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /gallery/index.php [L]
</IfModule> 
```

index.php 包含以下代码：

```
define('WP_USE_THEMES', true);
require('./cms/wp-blog-header.php'); 
```

主页加载正常，但任何内部页面都会出现“未找到”错误：`http://playstartshere.com/gallery/specs/`yield`The requested URL /gallery/specs/ was not found on this server.`

我哪里错了？我尝试将 index.php 更改为：

```
define('WP_USE_THEMES', true);
require('./gallery/cms/wp-blog-header.php'); 
```

但这完全破坏了网站。

**编辑：答案**

Apache 确实配置不正确；未启用 RewriteEngine。但是，.htaccess 也是错误的。正确的 .htaccess 对于上面的配置是：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /gallery/cms/
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /gallery/cms/index.php [L]
</IfModule> 
```

希望对其他人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:09:59.447

`/gallery/specs/`符合此规则：

```
RewriteRule ^index\.php$ - [L] 
```

哪个阻止访问

尝试`/gallery/.htaccess`：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

没有`/`预先添加 index.php，apache 将在当前目录中搜索

***编辑***

再次采用不同的方法：

将所有 wordpress URL 设置为[http://example.com/gallery](http://example.com/gallery) 将所有 wordpress 文件放在 /gallery/cms

在 /gallery/cms 中放一个 .htaccess

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .* index.php [L] 
```

将第二个 .htaccess 放在 /gallery 中（没有 index.php）

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !/gallery/cms
RewriteRule ^(.*)$ /gallery/cms/$1 [L] 
```

# java - 对构造函数的流程感到困惑

> ID：10528724
> 
> 赞同：1
> 
> 时间：2012-05-10T06:42:47.363
> 
> 标签：java, jakarta-ee

我正在尝试使用 GlassFish3 开始 Java EE6 中的一些示例。所以，我创建了一个基本上看起来像这样的实体类......

```
@Entity
@Table(name="Book")
public class Book implements Serializable
{
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private long id;
    @Column(nullable=false)
    private String name;
    @Column(nullable=false)
    private String isbn;
    private String description;

    public Book()
    {
        // Empty constructor to facilitate construction. 
        System.out.println("The variables have not been initialized...Please initialize them using the Setters or use the provided constructor");
    }

    public Book(String name, String isbn, String description) {
        this.name = name;
        this.isbn = isbn;
        this.description = description;
    }

    public String getIsbn() {
        return isbn;
    }

    public void setIsbn(String isbn) {
        this.isbn = isbn;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getDescription() {
        return description;
    }

    public void setDescription(String description) {
        this.description = description;
    }

    @Override
    public String toString() {
        return this.name + " - " + this.isbn; 
    }

    @PrePersist
    public void printPrePersist(){
        System.out.println("Persisting the book "+this.name);
    }
    @PostPersist
    public void printPostPersist(){
        System.out.println("Persisted the book "+this.name);
    }

} 
```

我试着像这样坚持下去......

```
public class MainClass 
{
    public static void main(String[] args){
        Book book = new Book("Effective Java","ISBN - 1234415","A very good book on Java");
        Book book2 = new Book("Learning Java EE","ISBN - 1233415","A good book for Java EE beginners");

        // These are the necessary classes
        EntityManagerFactory emf = Persistence.createEntityManagerFactory("PersistenceAppPU");
        EntityManager em = emf.createEntityManager();

        // Persist the book here
        EntityTransaction etx = em.getTransaction();
        etx.begin();
        em.persist(book);
        em.persist(book2);
        etx.commit();

        em.close();
        emf.close();

        System.out.println("The two books have been persisted");
    }
} 
```

它仍然存在，但是当我运行时，我看到类似...的输出

```
The variables have not been initialized...Please initialize them using the Setters or use the provided constructor
Persisting the book Effective Java
The variables have not been initialized...Please initialize them using the Setters or use the provided constructor
Persisting the book Learning Java EE
Persisted the book Learning Java EE
Persisted the book Effective Java
The variables have not been initialized...Please initialize them using the Setters or use the provided constructor
The variables have not been initialized...Please initialize them using the Setters or use the provided constructor
The variables have not been initialized...Please initialize them using the Setters or use the provided constructor
The variables have not been initialized...Please initialize them using the Setters or use the provided constructor
[EL Info]: 2012-05-10 12:01:19.623--ServerSession(17395905)--file:/C:/Users/raviteja.s/Documents/NetBeansProjects/PersistenceApp/src/_PersistenceAppPU logout successful
The two books have been persisted 
```

我不明白，为什么有这么多默认构造函数调用，而我却没有一个......？

有人可以解释一下我所拥有的样本中的流程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:04:24.230

JPA 使用不带参数的构造函数来实例化您的实体，然后将这些实体中的字段绑定到对应的映射表和列。

您看到的那些输出是 JPA 每次操作您的实体时为您执行的调用。

# java - 在 Android 模拟器中将 unix 时间戳转换为日期

> ID：10528727
> 
> 赞同：3
> 
> 时间：2012-05-10T06:43:05.770
> 
> 标签：java, android, timezone, timestamp

我有一个要转换为日期的时间戳。我试过这个时间戳：1336425840。这应该是星期一，2012 年 5 月 7 日 21:24:00 GMT，其中 GMT 是模拟器应该设置的时区。我试过这个：

```
final Calendar c = Calendar.getInstance();
c.setTimeInMillis(1336425840*1000);
Date d = c.getTime();
Log.i("MyTag", "Hours: " + d.getHours()); 
```

结果是：小时：23。

所以看起来返回的日期是根据 GMT+2 计算的，这是为我的系统设置的时区。我希望 g.hetHours() 返回 21，因为模拟器的时区似乎设置为 GMT。

此外，该时间戳是通过使用 mktime 读取 C 中的实际日期产生的，这似乎返回了正确的时间戳。但 Java 似乎指的是不同的时区。我做错什么了吗？为什么 2012 年 5 月 7 日星期一 21:24:00 GMT 没有返回？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T07:53:22.227

我很确定`1336425840*1000`会给你一个超出常规范围的值`int`。事实上，如果您要打印`Calendar`对象的完整日期，您会看到它显示`Thu Jan 08 23:56:50 GMT 1970`，它解释了`23`您看到的时间。

将乘法更改为：（注意`L`末尾的）

```
c.setTimeInMillis(1336425840 * 1000L); 
```

// 编辑：容易确认：

```
System.out.println((1336425840 * 1000L > Integer.MAX_VALUE)); 
```

:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:12:10.230

您应该使用一个`DateFormat`对象，然后使用[`setTimeZone()`](http://developer.android.com/reference/java/text/DateFormat.html#setTimeZone%28java.util.TimeZone%29).

# android - 如何更新资产文件夹中的 Sqlite DB，而不是复制 DB？

> ID：10528728
> 
> 赞同：0
> 
> 时间：2012-05-10T06:43:07.683
> 
> 标签：android, sqlite, assets

我需要处理放置在 Android 项目资产文件夹中的 sqlite db。问题是我们通常在运行时创建资产数据库的副本，所有查询都在这个副本上完成，但问题是当我清除缓存时，它会删除所有更新；所以我需要更新资产文件而不是在运行时创建的副本。

我可以插入更新删除资产 sqlite 文件吗？

实际上，我想保留对 DB 的修改，并且在从设置中清除应用程序数据时，我不想丢失这些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:46:18.827

You **CANNOT** modify resources (assets, raw, drawable, etc.) of an .apk once its built. They are *read-only*, so what ever goes-in will always remain as it is - until you update the .apk with the newer stuff.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:50:12.850

清除缓存后，您将无法获取旧记录，甚至无法更新资产文件，一旦生成了 apk 文件，因为它是**READ-ONLY**。是的，如果您需要有关如何使用已准备好的数据库的帮助，那么此链接肯定会为您提供帮助。

[在 Android 应用程序中使用您自己的 SQlite 数据库](http://www.reigndesign.com/blog/using-your-own-sqlite-database-in-android-applications/)

而且我认为如果您可以从 assets 文件夹中复制数据库，那么您也可以从 sdcard 中获取它。不太了解。

# floating-point - 为什么无穷大的浮点表示显然是 0^n？

> ID：10528730
> 
> 赞同：0
> 
> 时间：2012-05-10T06:43:21.740
> 
> 标签：floating-point, nan, infinity

我试图理解浮点表示。我不明白浮点中的“无穷大”“NaN”表示。我正在查看[TopCoder 提供](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=integersReals2)的表格。

无穷大由全 1 的指数和全 0 的尾数表示。

我只能将其读取为 0^n，而且我不确定它如何趋于无穷大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:38:37.723

您应该简单地忽略使用的位模式并将无穷大和 NaN 视为特殊值。除非你对你的浮点数做一些摆弄（我认为很少有理由这样做），否则你只会在 IEEE 规则说应该创建它们的地方遇到这些值，忽略以下问题是安全的计算机如何代表它们。即使你做的不仅仅是标准计算，我的猜测是 99% 的时间，位模式并不重要。

当然，以上都不是说你应该忽略标准、有限、非零浮点数的实现。尽管从尾数/指数到内存中的位的步骤仍然几乎不相关。在您链接到的页面中，作者声称“C++ 中的全局变量被初始化为零位模式”——这是错误的。*C++ 中POD 类型*的全局变量使用语义零所需的任何位模式进行初始化（第 3.6.2.2 节，第 8.5.5 节）。我相信 C++ 标准对任何浮点值都不需要任何特定的位模式。

# grails - Grails GORM“或”不使用关联

> ID：10528731
> 
> 赞同：4
> 
> 时间：2012-05-10T06:43:23.833
> 
> 标签：grails, associations, grails-orm, h2

在下面的示例中，我希望 Product.searchAll 匹配添加剂和产品，但它似乎忽略了`eq('name', taste)`.

```
class Additive {
    String flavor
    static belongsTo = [product:Product]
}

class Product {
    String name
    static hasMany = [additives:Additive]

    static constraints = {
            name nullable:true
    }

    static namedQueries = {
        searchAll { taste ->
            or {
                eq('name', taste)
                additives { eq('flavor', taste) }
            }
        }
        searchAdditives { taste ->
            additives { eq('flavor', taste) }
        }
        searchProducts { taste ->
            eq('name', taste)
        }
    }
}

class SearchSpec extends grails.plugin.spock.IntegrationSpec {
    def choc, muff

    def 'searchAll should return products and additives that match - THIS FAILS'() {
        setup:
            createTestProducts()
        expect:
            Product.searchAll("chocolate").list() == [choc, muff]
    }

    def 'searchProducts should return only products that match - THIS PASSES'() {
        setup:
            createTestProducts()
        expect:
            Product.searchProducts("chocolate").list() == [choc]
    }

    def 'searchAdditives should return only additives that match - THIS PASSES'() {
        setup:
            createTestProducts()
        expect:
            Product.searchAdditives("chocolate").list() == [muff]
    }

    private def createTestProducts() {
        // create chocolate
        choc = new Product(name:'chocolate').save(failOnError:true, flush:true)
        // create a chocoloate-flavored muffin
        muff = new Product(name:'muffin').addToAdditives(flavor:'chocolate').save(failOnError:true, flush:true)
    }
} 
```

生成的SQL如下：

```
select this_.id as id1_1_, this_.version as version1_1_,
this_.name as name1_1_, additives_1_.id as id0_0_,
additives_1_.version as version0_0_, additives_1_.flavor as
flavor0_0_, additives_1_.product_id as product4_0_0_ from product
this_ inner join additive additives_1_ on
this_.id=additives_1_.product_id where (this_.name=? or
(additives_1_.flavor=?)) 
```

我的语法有问题，还是 Grails、GORM 或 H2 有问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T08:44:51.830

我的猜测是，快速查看您的查询，Grails / GORM 正在执行`inner join`. 仅当表之间存在关系时，内连接才匹配。在上面的示例中，该查询*永远不会*匹配`choc`，因为`choc`没有任何关联的添加剂。

所以，这不是`or`失败的，而是实际的查询。启动**localhost:8080/{yourapp}/dbConsole**并运行相同的查询，但没有`where`语句。您应该看到您只获得含有一种或多种添加剂的产品。

我相信（未经测试）你可以强制`LEFT JOIN`使用这样的语法：

```
import org.hibernate.criterion.CriteriaSpecification
...

    searchAll { taste ->
        createAlias("additives", "adds", CriteriaSpecification.LEFT_JOIN)
        or {
            eq('name', taste)
            eq('adds.flavor', taste)
        }
    } 
```

这应该强制左（或外）连接，允许没有匹配添加剂的产品。注意：使用外连接时可能会得到重复的结果，但这取决于您的特定使用场景。

# shell - How to split last field of a full route

> ID：10528734
> 
> 赞同：0
> 
> 时间：2012-05-10T06:43:34.157
> 
> 标签：shell, awk

I have some files in different route like below:

```
./a/b/c/test.h
./d/e/f/g/h/abc1.c
./i/j/k/l/m/n/o/p/hello.log
... 
```

And I want to get only the file name of each one. That is: I want to get "**test.h**", "**abc1.c**", "**hello.log**".

As the deep of the route is uncertain, so maybe awk can't help my problem. Can anyone help me with this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:44:40.960

You can use the `basename` command:

```
while read line
do
basename $line
done < "myfile" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:53:40.917

`basename`通常是这样做的方法，但在 AWK 中你可以这样做：

```
filename=./i/j/k/l/m/n/o/p/hello.log
echo "$filename" | awk -F/ '{print $NF}' 
```

其他：

```
awk -v filename="$filename" 'BEGIN {len = split("/", filename, a); print a[len]}' 
```

在纯 Bash 中：

```
echo ${filename##*/} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:57:33.347

```
awk -F"/" '{print $NF}' file_name 
```

# c# - 存储多个选定的gridview单选按钮？

> ID：10528740
> 
> 赞同：1
> 
> 时间：2012-05-10T06:44:09.383
> 
> 标签：c#, asp.net, webforms

我有包含 60 行的 gridview，每行有 4 个单选按钮选项（选择任何一个）。要操作该代码，在提交按钮上编写代码如下。我没有工作。我的设计观点：

```
<asp:GridView ID="gvSurvey" runat="server" CellPadding = "4"  OnRowDataBound ="gvSurvey_RowDataBound" BorderWidth ="2"
AutoGenerateColumns="False" EmptyDataText="No data Available" GridLines="None"
HorizontalAlign="Center" ForeColor="#333333" Font-Names="Verdana" ShowFooter="True">
<RowStyle BackColor="White" />
<Columns>
<asp:BoundField DataField="HEADER" HeaderText="Description" ItemStyle-HorizontalAlign="Left"
FooterStyle-HorizontalAlign="Left" >
<ItemStyle HorizontalAlign="Left" />
</asp:BoundField>
<asp:BoundField DataField="QTN_NO" HeaderText="Description" ItemStyle-HorizontalAlign="Left"
FooterStyle-HorizontalAlign="Left" >
<ItemStyle HorizontalAlign="Left" />
</asp:BoundField>
<asp:BoundField DataField="SQTN_NO" HeaderText="Description" ItemStyle-HorizontalAlign="Left"
FooterStyle-HorizontalAlign="Left" >
<ItemStyle HorizontalAlign="Left" />
</asp:BoundField>
<asp:TemplateField Visible="true" HeaderText ="Strongly Disagree">
<ItemTemplate>

<asp:RadioButton ID="rdbtn1" runat ="server" GroupName ="MyRadioGroup"/>
<%-- <asp:CustomValidator ID="cvRadioButtonGroup" runat="server" ErrorMessage="* make a selection" onservervalidate="cvRadioButtonGroup_ServerValidate" /> --%>
  <%--<input name="MyRadioButton1" type ="radio" value = "'<%# Eval("SQTN_NO") %>'" />--%>
</ItemTemplate>
</asp:TemplateField>
<asp:TemplateField Visible="true" HeaderText ="Agree">
<ItemTemplate>
  <asp:RadioButton ID="rdbtn2" runat ="server"  GroupName ="MyRadioGroup"/>
  <%--<asp:CustomValidator ID="cvRadioButtonGroup" runat="server" ErrorMessage="* make a selection" onservervalidate="cvRadioButtonGroup_ServerValidate" /> --%>
 <%--<input name="MyRadioButton2" type ="radio" value = "'<%# Eval("SQTN_NO") %>'" />--%>
</ItemTemplate>
</asp:TemplateField>
<asp:TemplateField Visible="true" HeaderText ="Disagree">
<ItemTemplate>
  <asp:RadioButton ID="rdbtn3" runat ="server" GroupName ="MyRadioGroup"/>
  <%-- <asp:CustomValidator ID="cvRadioButtonGroup" runat="server" ErrorMessage="* make a selection" onservervalidate="cvRadioButtonGroup_ServerValidate" /> --%>
  <%--<input name="MyRadioButton3" type ="radio" value = "'<%# Eval("SQTN_NO") %>'" />--%>
</ItemTemplate>
</asp:TemplateField>
<asp:TemplateField Visible="true" HeaderText ="Strongly Agree">
<ItemTemplate>
  <asp:RadioButton ID="rdbtn4" runat ="server"  GroupName ="MyRadioGroup"/>
      <%--  <asp:CustomValidator ID="cvRadioButtonGroup" runat="server" ErrorMessage="* make a selection" onservervalidate="cvRadioButtonGroup_ServerValidate" /> --%>
<%-- <input name="MyRadioButton4" type ="radio" value = "'<%# Eval("SQTN_NO") %>'" />--%>
</ItemTemplate>

</asp:TemplateField>
</Columns>
<FooterStyle BackColor="#507CD1" ForeColor="White" Font-Bold="True" />
<PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
<SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
<HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
<EditRowStyle BackColor="#2461BF" />
<AlternatingRowStyle BackColor="White" />

</asp:GridView> 
```

C＃

```
 for (i = 0; i < gvSurvey.Rows.Count; i++)
            {
                RadioButton rdbtn1 = (RadioButton)gvSurvey.Rows[i].Cells[3].FindControl("rdbtn1");
                RadioButton rdbtn2 = (RadioButton)gvSurvey.Rows[i].Cells[4].FindControl("rdbtn2");
                RadioButton rdbtn3 = (RadioButton)gvSurvey.Rows[i].Cells[5].FindControl("rdbtn3");
                RadioButton rdbtn4 = (RadioButton)gvSurvey.Rows[i].Cells[6].FindControl("rdbtn4");

          //      RadioButton rdbtn1=(RadioButton) gvSurvey.Rows[i].ClientID  

                qtn_no = dtSurvey.Rows[i]["QTN_NO"].ToString();
                sqtn_no = dtSurvey.Rows[i]["SQTN_NO"].ToString();

                if (rdbtn1.Checked)
                {
                    rdbtn1.Text = "1";
                    lblMsg.Text = nominationsBiz.SaveSuggestion(ticketNo.ToString(), qtn_no, sqtn_no, rdbtn1.Text);
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T10:25:45.333

请通过以下代码，您将找到解决方案

```
 //  It will be on your submit button click 
    protected void getPinCode()
    {
        foreach (GridViewRow grdRows in gvSurvey.Rows)
        {
            RadioButton rbt1 = (RadioButton)grdRows.FindControl("rdbtn1");
            RadioButton rbt2 = (RadioButton)grdRows.FindControl("rdbtn2");
            RadioButton rbt3 = (RadioButton)grdRows.FindControl("rdbtn3");
            RadioButton rbt4 = (RadioButton)grdRows.FindControl("rdbtn4");

            string Value = RadioValue(rbt1);
           //Similarly you can do for all radio button 
            if(!string.IsNullOrEmpty(Value))
            {

                lblMsg.Text = nominationsBiz.SaveSuggestion(ticketNo.ToString(), qtn_no, sqtn_no, Value);
            }

        }
    }

    protected string RadioValue(RadioButton Rbtlst)
    {
        string Value = "";

        if (Rbtlst.Checked == true)
        {
            Value = Rbtlst.Text;
        }
        return Value;
    } 
```

# asp.net-mvc - 上传而不损坏文件

> ID：10528743
> 
> 赞同：1
> 
> 时间：2012-05-10T06:44:31.730
> 
> 标签：asp.net-mvc, file-upload

我正在尝试将图像上传到我的 IIS 7 服务器，但它已损坏。相同的代码通过 Visual Studio 在本地实例上工作。

本地标题：

```
Request URL:http://localhost:55272/MyProfile/UploadPhoto?qqfile=01.jpg
Request Method:POST
Status Code:302 Found
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:464542
Content-Type:application/octet-stream
Host:localhost:55272
Origin:http://localhost:55272
Referer:http://localhost:55272/MyProfile
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1130.1 Safari/536.11
X-File-Name:01.jpg
X-Mime-Type:image/jpeg
X-Requested-With:XMLHttpRequest
Query String Parametersview URL encoded
qqfile:01.jpg
Response Headersview source
Cache-Control:private
Connection:Close
Content-Length:137
Content-Type:text/html; charset=utf-8
Date:Thu, 10 May 2012 06:35:28 GMT
Location:/MyProfile/MyProfile
Server:ASP.NET Development Server/10.0.0.0
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0 
```

远程标头：

```
Request URL:[remotehost]/XMVC/MyProfile/UploadPhoto?qqfile=01.jpg
Request Method:POST
Status Code:302 Found
Request Headersview source
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Authorization:Negotiate -snip-
Connection:keep-alive
Content-Length:464542
Content-Type:application/octet-stream
Cookie:ASPSESSIONIDAABCCDSD=-snip-
Host:[remotehost]
Origin:[remotehost]
Referer:[remotehost]/XMVC
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.11 (KHTML, like Gecko) Chrome/20.0.1130.1 Safari/536.11
X-File-Name:01.jpg
X-Mime-Type:image/jpeg
X-Requested-With:XMLHttpRequest
Query String Parametersview URL encoded
qqfile:01.jpg
Response Headersview source
Cache-Control:private
Content-Length:142
Content-Type:text/html; charset=utf-8
Date:Thu, 10 May 2012 06:35:05 GMT
Location:/XMVC/MyProfile/MyProfile
Persistent-Auth:false
Server:Microsoft-IIS/7.5
WWW-Authenticate:Negotiate -snip-
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0
X-Powered-By:ASP.NET 
```

这是上传表单调用的上传方法：

```
[HttpPost]
public ActionResult UploadPhoto(object qqfile)
{
    // Get current logged in user
    var currentUser = _staffRepository.StaffMembers.First(p => p.Login == User.Identity.Name.Replace("Domain\\", ""));

    var length = Request.ContentLength;
    var bytes = new byte[length];
    Request.InputStream.Read(bytes, 0, length);
    // bytes has byte content here. what do do next?

    var fileName = currentUser.Login + ".jpg";

    var saveToFileLoc = string.Format("{0}\\{1}",
                                   Server.MapPath("~/App_Data/uploads"),
                                   fileName);

    // save the file.
    var fileStream = new FileStream(saveToFileLoc, FileMode.Create, FileAccess.ReadWrite);
    fileStream.Write(bytes, 0, length);
    fileStream.Close();

    return new RedirectResult("MyProfile");
} 
```

如果它是相关的，我正在使用这个[文件上传器](https://github.com/bencolon/file-uploader)

图像作为所有 NUL 字节出现在远程服务器上。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T02:57:27.337

原来这是一个 Chrome 错误，该错误已在稳定版 19.0.1084.52（5 月 23 日发布）中修复。

具体修订：[https ://src.chromium.org/viewvc/chrome?view=rev&revision=138291](https://src.chromium.org/viewvc/chrome?view=rev&revision=138291)

详细分析：http: [//inedo.com/support/kb/1019/workaround-for-chrome-file-uploading-bug](http://inedo.com/support/kb/1019/workaround-for-chrome-file-uploading-bug)

# .htaccess - mod_rewrite to php file unless directory exists

> ID：10528746
> 
> 赞同：1
> 
> 时间：2012-05-10T06:44:40.120
> 
> 标签：.htaccess, mod-rewrite, query-string

I have a mod_rewrite rule working to direct non-existing directories to a php file which does a database get based on the $1\.

Everything works fine unless the directory does exist, which displays the proper directory, but it also appends the query string when it's not necessary.

I have been scouring the web for the past few hours and trying different methods with no luck.

Does anyone know how to keep this functioning as-is, but get rid of the query string?

Thanks much.

Here is my code:

```
RewriteEngine On
    Options +FollowSymlinks
    RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^([0-9a-zA-Z\-]+)/$ $1 [R]
RewriteRule ^([0-9a-zA-Z\-]+)$ product.php?product=$1 
```

What ends up happening is the browser displays the URL as [http://domain.com/existing_dir/?product=existing_dir](http://domain.com/existing_dir/?product=existing_dir)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:59:24.290

试试看，它会`/`自行删除而不重复整个过程

```
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^(.*?)/?$ product.php?product=$1 
```

如果你坚持限制特殊字符，那会：

```
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^([0-9a-zA-Z\-]+?)/?$ product.php?product=$1 
```

`+`是 1 次或更多重复，`*`是 0 次或更多，并且`+?`,`*?`是不饥饿匹配的修饰符 - 它允许`/?`匹配任何内容

此外，在您的示例中，第一个 RewriteRule 有条件地执行（当目录不存在时），第二个总是执行（如果第一个不破坏进程），所以即使目录存在

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:39:25.503

Mod_rewrite 不会影响查询字符串，它将始终被标记到新 URL 的末尾，除非您告诉 mod_rewrite 有一个空的查询字符串。这是通过添加一个 ? 在新字符串的末尾。所以第一行应该是这样的：

```
RewriteRule ^([0-9a-zA-Z\-]+)/$ $1? [R] 
```

# java - 在 JFrame 中手动定位图像

> ID：10528749
> 
> 赞同：2
> 
> 时间：2012-05-10T06:44:52.867
> 
> 标签：java, swing, position, bufferedimage, null-layout-manager

我正在尝试创建一个 JFrame，它将文件路径中的图像显示到 JFrame 上的特定位置。稍后（单击按钮时），我希望图像向左移动位置，例如 50 个像素。如果需要布局管理器，我想使用空布局，因为这是我自己的项目，我还没有准备好学习如何编写自己的布局管理器。

到目前为止，我已经设法在一个框架中显示一个 BufferedImage，但我不知道如何指定它的位置。

使用 BufferedImage 甚至是正确的方法吗？这样做的最佳方法是什么？

更新：我尝试遵循您使用 mouselistener 的建议，结果如下：

```
class ImgComponent extends JComponent  implements ChangeListener, MouseListener  {

MovableImage mi;

public ImgComponent(MovableImage mi) {
    this.mi = mi;
    mi.addListener(this);
      mi.addListener1(this);
}

@Override
protected void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.drawImage(mi.i, mi.getX(), mi.getY(), null);
}

@Override
public void stateChanged(ChangeEvent e) {
    repaint();

}
@Override
public void mouseClicked(MouseEvent e) {
        mi.setPos(100, 100);
        System.out.println("yay");
} 
```

}

但不幸的是，mouseClicked 事件永远不会触发。我只是想让那个该死的图像移动，哈哈。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:53:22.117

这是一个使用模型/视图/控制器模式的完整示例。（只需在一个 .java 文件中一个接一个地转储所有片段。）

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.util.*;
import java.util.List;

import javax.swing.*;
import javax.swing.event.*;

// A class encapsulating an image and a x-coordinate (a "model")
class MovableImage {
    Image i = new ImageIcon("duke.png").getImage();
    private int x = 0;

    // Observers that are interested in movements.
    List<ChangeListener> listeners = new ArrayList<ChangeListener>();

    public void addListener(ChangeListener cl) {
        listeners.add(cl);
    }

    public int getX() {
        return x;
    }

    public void incrementX() {
        x += 10;

        // Notify those interested.
        for (ChangeListener cl : listeners)
            cl.stateChanged(null);
    }
} 
```

```
// A graphical component displaying the model.
// Object of this class are interested in movement because when the image moves,
// this component needs to be repainted.
class ImgComponent extends JComponent implements ChangeListener {

    // The movable image to present.
    MovableImage mi;

    public ImgComponent(MovableImage mi) {
        this.mi = mi;
        mi.addListener(this);
    }

    @Override
    protected void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(mi.i, mi.getX(), 10, null);
    }

    // This method is called from MovableImage when the position changes.
    @Override
    public void stateChanged(ChangeEvent e) {
        repaint();
    }
} 
```

```
// Main class.
public class FrameTestBase extends JFrame {

    public static void main(String args[]) {

        // Create the "model".
        final MovableImage mi = new MovableImage();

        FrameTestBase t = new FrameTestBase();
        t.setLayout(new BorderLayout());

        // Add a component presenting the model.
        t.add(new ImgComponent(mi), BorderLayout.CENTER);

        // Create a button which increments x when clicked on.
        t.add(new JButton(new AbstractAction("Move right") {
            @Override
            public void actionPerformed(ActionEvent e) {
                mi.incrementX();
            }
        }), BorderLayout.SOUTH);

        // Show it.
        t.setDefaultCloseOperation(EXIT_ON_CLOSE);
        t.setSize(400, 400);
        t.setVisible(true);
    }
} 
```

![在此处输入图像描述](../Images/7418739b83800563481a27d69d28346b.png)

* * *

关于您的编辑：

您还需要*添加*鼠标侦听器。在构造函数中：

```
public ImgComponent(MovableImage mi) {
    this.mi = mi;
    mi.addListener(this);
    mi.addListener1(this);
} 
```

在底部添加以下行：

```
 addMouseListener(this); 
```

# ms-access - Ms access Select query with limit options

> ID：10528751
> 
> 赞同：2
> 
> 时间：2012-05-10T06:45:11.620
> 
> 标签：ms-access

i have a query like : select id, name from table_name where id is not null limit 10, 20 for mysql; how can i get 10 to 20 records from table in ms access? i know there is no limit keyword and how do i use TOP keyword?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T06:51:10.273

```
SELECT * FROM 
    (SELECT TOP 11 *  FROM 
        (SELECT TOP 20 * FROM table_name ORDER BY 1) 
    ORDER BY 1 DESC)
ORDER BY 1 
```

# ios - Make external links in ChildBrowser open with safari?

> ID：10528756
> 
> 赞同：1
> 
> 时间：2012-05-10T06:45:37.637
> 
> 标签：ios, cordova, phonegap-plugins, childbrowser

I am currently using ChildBrowser in phoneapp to open a website. However, I would like to open all external links of this website to open in Safari.

I do not have control over the source of this website.

My understanding is that I have to modify ChildBrowser to open all links starting with "http" in Safari.

I can't exactly read Objective-C, but I believe the code below is relevant.

```
- (void)loadURL:(NSString*)url
{
    NSLog(@"Opening Url : %@",url);

    if( [url hasSuffix:@".png" ]  || 
        [url hasSuffix:@".jpg" ]  || 
        [url hasSuffix:@".jpeg" ] || 
        [url hasSuffix:@".bmp" ]  || 
        [url hasSuffix:@".gif" ]  )
    {
        [ imageURL release ];
        imageURL = [url copy];
        isImage = YES;
        NSString* htmlText = @"<html><body style='background-color:#333;margin:0px;padding:0px;'><img style='min-height:200px;margin:0px;padding:0px;width:100%;height:auto;' alt='' src='IMGSRC'/></body></html>";
        htmlText = [ htmlText stringByReplacingOccurrencesOfString:@"IMGSRC" withString:url ];

        [webView loadHTMLString:htmlText baseURL:[NSURL URLWithString:@""]];

    }
    else if ( [url hasPrefix:@"http" ])
    {
        //I have added in this else if.
    }
    else
    {
        imageURL = @"";
        isImage = NO;
        NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
        [webView loadRequest:request];
    }
    webView.hidden = NO;
} 
```

Any advice?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:46:02.870

我发现的最简单的方法是，如果您知道您最初将使用 childBrowser 请求的域主机名并且您不打算请求任何其他域，那么您可以将此事件直接写入 ChildBrowserViewController.m文件。

```
- (BOOL)webView:(UIWebView *)theWebView shouldStartLoadWithRequest:(NSURLRequest *)request     navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request URL];
    NSString* domain = [url host];

    // Intercept the external http requests and forward to Safari.app
    // Otherwise forward to the PhoneGap WebView
    if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"] || [[url scheme] isEqualToString:@"www"]) {
        if ( [domain isEqualToString:@"YOURDOMAIN.NAME] ) {
            return YES;
        } else {
            [[UIApplication sharedApplication] openURL:url];
            return NO;
         }
    } else {
         return YES;// [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
    }
} 
```

这将捕获 childBrowser 发出的所有请求，如果它们符合标准 URL 约定（在 HTTP、HTTPS 或 WWW 之前）并且它们不是您预设的域主机名，那么它将强制它们在 Safari 中打开。然后，当用户返回您的应用程序时，他们仍然会在他们单击链接时所在的上一页上。

我搞砸了几个小时，直到我想出了这个。

如果您需要能够使用 childBrowser 打开多个域主机，但仍希望每个主机都在 Safari 中打开远离该当前域的所有外部链接，我建议如下。

将以下内容添加到 ChildBrowserViewController.h

```
BOOL scaleEnabled;
BOOL isImage;
NSString* originalURL; <- THIS RIGHT HERE
NSString* imageURL; 
```

和这个

```
@property(retain) NSString* imageURL;
@property(retain) NSString* originalURL; <- THIS RIGHT HERE
@property(assign) BOOL isImage; 
```

然后将以下内容添加到 ChildBrowserViewController.m

```
@synthesize imageURL;
@originalURL; <- THIS RIGHT HERE
@synthesize supportedOrientations;
@synthesize isImage; 
```

并添加以下内容

```
- (void)loadURL:(NSString*)url
{
    originalURL = url; <- THIS RIGHT HERE
    NSLog(@"Opening Url : %@",url); 
```

然后在我上面发布的方法中更改以下内容

```
 NSURL *url = [request URL];
    NSString* domain = [url host];

    NSURL *oURL = [NSURL URLWithString: originalURL]; <- THIS RIGHT HERE
    NSString* oDomain = [oURL host]; <- THIS RIGHT HERE

    // Intercept the external http requests and forward to Safari.app
    // Otherwise forward to the PhoneGap WebView
    if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"] || [[url scheme] isEqualToString:@"www"]) {
        if ( [domain isEqualToString:oDomain] ) { <- THIS RIGHT HERE
            return YES;
        } else { 
```

我还没有测试第二部分，但它应该可以正常工作。

祝你好运。

# c++ - how we generate 32 hash bits by feeding 480 bits in VISUAL C++

> ID：10528757
> 
> 赞同：0
> 
> 时间：2012-05-10T06:45:40.200
> 
> 标签：c++, visual-c++

i am making a code to embbed the water mark in an image block. That block is of 8X8 means 64 pixels. i use 5 MSB of all pixels(64*5=320), which generate the secrete data which is entered in remaining 3 LSB of pixel(64*3=60). Data is entered in randomly selected 160 bits of LSB, means 480 bits(320+160=480) are used for data out of 512 bit(64*8=512 bits). now here I have a statement that "feed 480 bits to generate 32 hash bit and place those bits in remaining 32 places (512-480=32)".So i need some help to generate hash bits..

# iphone - iframe content is displaying outside the iframe on iOS

> ID：10528760
> 
> 赞同：0
> 
> 时间：2012-05-10T06:46:09.043
> 
> 标签：iphone, ios, ipad, html, mobile-safari

Here is a fiddle (jsfiddle.net/salman/RQBra/show/) that demonstrates the problem I am facing. The iframes appear as expected in all browsers (including Safari 5 for Windows). But when I viewed the page on two iOS devices (iPad and iPhone) the content of iframe overflowed and covered the entire area on the right hand side of the iframe. Here is a screenshot of a page that uses similar iframes:

![iframe overflowing on x-direction on iOS](../Images/f460c87312ae5ed040b6391ac31734e9.png)

How can I workaround this issue?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-12T23:56:18.083

针对您的特定情况的解决方法是用 `<iframe>`元素`<embed>`替换 。

```
<embed src="..." type="text/html" width="400" height="400"></embed> 
```

它将在 Safari Mobile 上产生所需的效果，并将内容剪辑到指定的`width`尺寸`height`，而不是自动调整大小。然而，embed 并不是专门为 HTML 内容设计的，在处理滚动`contentWindow`和不同的环境（不一定是原生渲染）时可能会产生不想要的效果，所以在生产中使用它之前测试案例。

[W3C](http://www.w3.org/wiki/HTML/Elements/embed)：

> 该元素表示外部（通常是非 HTML）应用程序或交互式内容的集成点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:25:43.177

您可以在 div 中修复它，但在 iPhone 上，如果没有一些 javascript，它将无法滚动。我制作了一个小提琴，展示了如何修复 iframe 的大小。

[http://jsfiddle.net/RQBra/29/](http://jsfiddle.net/RQBra/29/)

基本上，你将你的 iframe 包装在一个包装器中并给它一些 css：

```
#wrapper {
position:relative;
z-index:1;
width:400px;
height:400px;
overflow:scroll;
} 
```

​​​

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-06T10:00:38.270

我猜Iframe里面有一个HTML文件，所以在HTML中将内容包装在包装器div中

```
#wrapper {
position: relative;
-webkit-tap-highlight-color: rgba(0,0,0,0);
} 
```

它的大小将相对于 html 正文，而不是 viewportSizes 可能是您希望第二行处理 Iframe 单击时闪烁的情况，发生在 ios'...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T06:56:37.227

嗯，尝试将 iframe 包装在 div 中，但不要自行限制 iframe 的宽度和高度。

# android - How to create a moving pointer in android surface view?

> ID：10528763
> 
> 赞同：2
> 
> 时间：2012-05-10T06:46:21.290
> 
> 标签：android, surfaceview, gesture

I need to create a project in which i need to use a moving pointer while writing on a surface view. My project write on a surface view which i can save as an image and re-use after saving it. So i need to point a pointer while i write on my view. How can i create this moving pointer in my project?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:07:33.947

如果你把你的`SurfaceView`into `RelativeLayout`，你可以把另一个视图放在同一个视图组中。每个新视图都会放在你的 SurfaceView 前面。通过这种方式，您可以绘制任何指针，例如使用移动`ImageView`。你的意思是这样的吗？

# scala - Simple scalatra-test specs2 example throws Exception

> ID：10528765
> 
> 赞同：2
> 
> 时间：2012-05-10T06:46:30.087
> 
> 标签：scala, scalatra, specs2

I'm getting this exception when running the scalatra specs2 example from the [scalatra docs](http://www.scalatra.org/2.0/book/#Testing):

```
ThrowableException: org.eclipse.jetty.http.HttpGenerator.flushBuffer()I (FutureTask.java:138) 
```

Here is the test code (starting on line 5, skipping imports):

```
class MyAppTest extends MutableScalatraSpec {
  addServlet(classOf[MyApp], "/*") 

  "GET / on AdminApp" should {
    "return status 200" in {
      get("/") { 
        status must_== 200
      }
    }
  }
} 
```

Here is the app definition:

```
class MyApp extends ScalatraServlet {

  get("/") {
    "aloha"
  }
} 
```

I'm using scalatra-specs2 2.0.4 and scala 2.9.1\. I'm running an embedded jetty server using xsbt-web-plugin 0.2.10 with sbt 0.11.2\. The test was executed using `sbt test`.

Here is the full trace:

```
[info] GET / on AdminApp should
[error] ! Fragment evaluation error
[error]     ThrowableException: org.eclipse.jetty.http.HttpGenerator.flushBuffer()I (FutureTask.java:138)
[error] org.eclipse.jetty.testing.HttpTester.generate(HttpTester.java:225)
[error] org.scalatra.test.ScalatraTests$class.submit(ScalatraTests.scala:46)
[error] com.example.MyAppTest.submit(MyAppTest.scala:5)
[error] org.scalatra.test.ScalatraTests$class.submit(ScalatraTests.scala:71)
[error] com.example.MyAppTest.submit(MyAppTest.scala:5)
[error] org.scalatra.test.ScalatraTests$class.get(ScalatraTests.scala:127)
[error] com.example.MyAppTest.get(MyAppTest.scala:5)
[error] com.example.MyAppTest$$anonfun$1$$anonfun$apply$3.apply(MyAppTest.scala:10)
[error] com.example.MyAppTest$$anonfun$1$$anonfun$apply$3.apply(MyAppTest.scala:10)
[error] org.eclipse.jetty.http.HttpGenerator.flushBuffer()I
[error] org.eclipse.jetty.testing.HttpTester.generate(HttpTester.java:225)
[error] org.scalatra.test.ScalatraTests$class.submit(ScalatraTests.scala:46)
[error] com.example.MyAppTest.submit(MyAppTest.scala:5)
[error] org.scalatra.test.ScalatraTests$class.submit(ScalatraTests.scala:71)
[error] com.example.MyAppTest.submit(MyAppTest.scala:5)
[error] org.scalatra.test.ScalatraTests$class.get(ScalatraTests.scala:127)
[error] com.example.MyAppTest.get(MyAppTest.scala:5)
[error] com.example.MyAppTest$$anonfun$1$$anonfun$apply$3.apply(MyAppTest.scala:10)
[error] com.example.MyAppTest$$anonfun$1$$anonfun$apply$3.apply(MyAppTest.scala:10) 
```

This is the only search result that has turned up so far: [Fragment Evaluation Error](https://stackoverflow.com/questions/7419450/fragment-evaluation-error).

Can someone point me in the right direction?

Thanks, -f

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T18:57:42.320

仍然不确定根本原因，但在将 jetty-webapp 从 8.0.3.v20111011 滚动回 7.6.0.v20120127 后，测试成功执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T23:03:09.000

您的依赖项可能存在冲突，更具体地说是 Jetty 库版本。由于 Jetty 6 和 Jetty 7 之间的“flush”方法`HttpGenerator`发生了变化，您可能会收到“NoSuchMethodFoundError”，它解释了异常消息中奇怪的“org.eclipse.jetty.http.HttpGenerator.flushBuffer()I”签名。

这也解释了为什么您会收到“片段评估错误”，而不是您提到的链接中解释的常规故障。

如果您尝试使用最新的 specs2-1.10-SNAPSHOT，当发生这种情况时，您将收到一条更好的“片段评估错误”消息，显示“NoSuchMethodError”。这将帮助您更快地诊断问题。

# c# - 在单词列表中找到“钩词”的有效方法？

> ID：10528766
> 
> 赞同：3
> 
> 时间：2012-05-10T06:46:31.087
> 
> 标签：c#, .net, performance, linq

钩词是一个词，您可以在开头或结尾添加一个字母并组成一个新词。

我有一个相当大的单词列表（大约 170k），我想选择 5 个随机钩词。问题是我使用的方法非常慢。见下文：

```
Random rnd = new Random();
var hookBases = (from aw in allWords  //allWords is a List<string>
                from aw2 in allWords
                where aw2.Contains(aw) 
                      && aw2.Length == aw.Length + 1 
                      && aw[0] == 'c'
                select aw).OrderBy(t => rnd.Next()).Take(5); 
```

当我尝试从中访问任何东西时，`hookBase`它会旋转几分钟，然后我放弃并杀死它。

任何人都可以看到我尝试这样做的任何明显错误吗？有关更有效方式的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T06:48:54.813

首先， allWords 应该是 a `HashSet<string>`，而不是 a `List<string>`，以进行高效查找。

完成后，遍历哈希集，并检查删除第一个或最后一个字母是否会给出一个新的有效单词。那是你的钩子词。

```
HashSet<string> result = new HashSet<string>();
foreach (string word in allWords) {
    string candidate = word.Substring(0, word.Length - 1);
    if (allWords.Contains(candidate)) { result.Add(candidate); }
    candidate = word.Substring(1, word.Length - 1);
    if (allWords.Contains(candidate)) { result.Add(candidate); }
} 
```

如果您想使用 LINQ 执行此操作：

```
List<string> hookWords = allWords
    .Select(word => word.Substring(0, word.Length - 1))
    .Concat(allWords.Select(word => word.Substring(1, word.Length - 1)))
    .Distinct()
    .Where(candidate => allWords.Contains(candidate))
    .ToList(); 
```

在线查看它：[ideone](http://ideone.com/qMSo5)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T07:01:51.310

我最近做了类似的事情。我尝试使用 linq，在 ddbb 和存储过程中存储带有正则表达式的 .net 程序集。我发现最有效的方法是使用存储过程。微软针对此类操作对事务引擎进行了高度优化。

最好的祝福

# asp.net - 在编辑模式下在 Telerik Grid 的不同行中加载不同的控件

> ID：10528769
> 
> 赞同：0
> 
> 时间：2012-05-10T06:46:56.547
> 
> 标签：asp.net, sql, telerik

我想在 Telerik Rad Grid 的编辑模式的单列中加载不同的控件，如 DROPDOWN、RADIO。

意味着每一行，我想从数据库中传递一些值，比如

* * *

## 编号 | 控制|

1 | 下拉
2 | 收音机
3 | 复选框

现在，当我在 column 中传递 1 时，telerik 网格应该在编辑模式下加载下拉框。如果我在另一行中传递 2 而不是在同一列中传递，但在该特定行中，它应该在编辑模式下加载单选按钮。

有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:05:18.847

you have to set **AutoGenerateColumns="False"** and then create your custom "RadGridTemplateColumn"'s in your ascx-file. In each TemplateColumn you can define "HeaderTemplate", "ItemTemplate", "EditTemplate". The EditTemplate will be shown if you are in edit mode. In this you can show your controls.

Iam not sure what you exactly mean but I think you wanna show a dropdownlist in the Row 0 of your grid and in the next item (Row 1) you wanna show at the same position a radiobuttonlist right?

You can achive this by using the Event "OnItemDataBound".

```
if (e.Item is GridEditFormItem && e.Item.IsInEditMode)
{
} 
```

use this to be sure that you are in the editmode. There you can for example hide some controls or maybe create them dynamically and add them to the page. If you wanna create new controls dynamically I would suggest you to place a asp:PlaceHolder at the specific position in your ascx-file.

hope I understood you right.

best regards, noone.

# iphone - ios：如何比较不同格式的 2 个 NSdate？

> ID：10528771
> 
> 赞同：2
> 
> 时间：2012-05-10T06:46:58.980
> 
> 标签：iphone, objective-c, nsdate

我在比较两个不同格式的 NSDate 时遇到了很多问题，尽管我是新手。

-解决这个问题的最佳方法应该是什么？

1.我尝试将这两个日期转换为一种格式然后进行比较或者我应该先知道这两个日期的格式然后再进行比较

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:51:35.873

[`NSDate`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html)对它的格式一无所知。日期在内部存储，没有任何格式或区域。

要比较日期，您可以使用该[`compare:`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html)方法。

```
if([someDate compare:ortherDate] == NSOrderedDescending ){
   // someDate later then otherDate;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:55:10.183

格式是什么意思？初始化 NSDate 对象后，您可以直接将其与该类型的任何其他对象进行比较：（假设`date1`是 type `NSDate`）

```
if ([date1 compare:[NSDate date]] == NSOrderedAscending) {
    ...
} 
```

您可以在此处查看参考（查找`compare`方法）：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsdate_Class/Reference/Reference.html)

# sorting - Solr 按字段排序不在文档中

> ID：10528772
> 
> 赞同：1
> 
> 时间：2012-05-10T06:47:00.870
> 
> 标签：sorting, solr, indexing, document

只是想知道 Solr 是否可以做我想做的事情：

我有一个“用户”[id, name, join_date] 的 Solr 索引，在我的网站上，我有一个页面 /users，它有一个 Solr 查询，按字母顺序列出索引中的所有用户。

在我的网站上，用户可以“关注”其他用户。我添加了另一个页面 /followers，它首先获取所有从 MySQL '关注'登录用户的 user_ids - 然后使用这些 ID 查询 Solr 以仅返回当前用户关注的用户。

这一切都很好。

但问题是，我希望能够按照用户第一次开始关注登录用户的时间顺序对 /followers 返回的用户进行排序——我将此信息保存在 MySQL 的连接表中。但是我的 Solr 文档不包含这个日期——因为显然一个用户可以有很多关注者，反之亦然。此外，我不能只使用 MySQL 来服务这个页面，因为我需要让它保持 Solr 可查询。

希望对此有所了解-它已经困扰了我一段时间了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:45:50.667

您可以使用[ExternalField](http://lucene.apache.org/solr/api/org/apache/solr/schema/ExternalFileField.html)执行此操作，但您需要将信息从数据库导出到文本文件（并保持更新等）。

这家伙[在这里](http://sujitpal.blogspot.com.es/2011/05/custom-sorting-in-solr-using-external.html)讨论了一种无需 ExternalField 的方法，但需要自定义 Sorl 代码。

# c# - 如何将菜单项添加到 Excel 2010 单元格上下文菜单 - 旧代码不起作用

> ID：10528775
> 
> 赞同：6
> 
> 时间：2012-05-10T06:47:30.620
> 
> 标签：c#, excel, vsto, contextmenu

我尝试了 3 种不同的代码示例，但都失败了。

这是来自 MSFT 员工的代码（[如何在范围上显示上下文菜单](http://social.msdn.microsoft.com/Forums/en-IE/exceldev/thread/b4e953a1-e733-49eb-90fc-87e7d16e9dd4?prof=required)），其他两个示例的代码几乎完全相同：

```
private void ThisAddIn_Startup(object sender, System.EventArgs e)
{
    CommandBar cellbar = this.Application.CommandBars["Cell"];
    CommandBarButton button = (CommandBarButton) cellbar.FindControl(MsoControlType.msoControlButton, 0, "MYRIGHTCLICKMENU", Missing.Value, Missing.Value);
    if (button == null)
    {
        // add the button
        button = (CommandBarButton) cellbar.Controls.Add(MsoControlType.msoControlButton, Missing.Value, Missing.Value, cellbar.Controls.Count, true);
        button.Caption = "Refresh";
        button.BeginGroup = true;
        button.Tag = "MYRIGHTCLICKMENU";
        button.Click += new _CommandBarButtonEvents_ClickEventHandler(MyButton_Click);
    }
}

private void MyButton_Click(CommandBarButton cmdBarbutton, ref bool cancel)
{
    System.Windows.Forms.MessageBox.Show("MyButton was Clicked", "MyCOMAddin");
} 
```

**右键单击单元格时，我希望看到一个名为 Refresh 的菜单项。然而运行上述代码（在 Excel 2010 中）没有“刷新”菜单项。**

我可能遗漏了什么，或者此功能从 2007 年到 2010 年是否发生了变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:37:20.033

检查是否存在这种类型的代码（在您自己的插件或您公司使用的任何其他插件中），以及它是否将其注释掉或将其移至插件的 _Shutdown 事件。

```
//reset commandbars
Application.CommandBars["Cell"].Reset(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-31T13:36:37.960

这个问题为时已晚，但可能对其他人有所帮助......下面的代码对我来说很好。

```
private void OnSheetRightClick(object Sh, Excel.Range Target, ref bool Cancel)
{
    // code to create the menu item button
}

private void InternalStartup()
{
    this.Startup += new System.EventHandler(ThisAddIn_Startup);
    this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
    this.Application.SheetBeforeRightClick += OnSheetRightClick;
} 
```

# android - Robotium 获取 ListView 的文本

> ID：10528777
> 
> 赞同：0
> 
> 时间：2012-05-10T06:47:32.693
> 
> 标签：android, robotium

1：我有一个列表视图如下：

```
sort
game
play
home 
```

我们如何在 robots.txt 中一一或全部获取上述列表的所有文本。

2：有什么方法可以在 SD 卡（模拟器）中创建文件。

请提出一种方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T00:08:28.043

For the first Question, My solution is:

```
RelativeLayout rowItem;
            for (int i = 0; i < listView.getChildCount(); i++) {
                rowItem = (RelativeLayout) listView.getChildAt(i);
                TextView tv = (TextView) rowItem
                        .findViewById(R.id.my_tv);
                        String text = tv.getText();

            } 
```

Second Question: Definitely, You can

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T22:50:33.077

回答第二个问题试试这个

```
Context ctx = getInstrumentation().getContext();
AssetManager assetManager = ctx.getAssets();
File a = ctx.getFilesDir();
a.createNewFile(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T10:15:02.353

这是我的解决方案如何从 ListView 项目中获取唯一名称：

```
//check if ListView contains elements by getting ListView size
int index = 0;
int elemCount = 0;
ListView listView = (ListView) solo.getCurrentListViews().get(index);
elemCount = listView.getAdapter() != null ? listView.getAdapter().getCount() : 0;

//Creating a Map of existing elements 
Map<String, Integer> namesMap = new HashMap<String, Integer>();

//Going through the list of elements and mapping it's names
for (int i = 0; i < elemCount ; i++) {

  String name = ((StructureElement) listView.getAdapter().getItem(i)).getName();
  namesMap.put(name , i);

}

Log.i("Names and indexes are : " + namesMap); 
```

只需创建附加方法，`namesMap`如果您想通过它的名称获取 ListItem 索引，如果您想通过它的索引获取 ListItem 名称，则“反之亦然”。

随意重复使用它）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-14T15:44:18.943

您可以使用 solo.getCurrentTextViews(View parent) ，其中父项是列表。

# c# - 触发点击后，下一个委托没有工作

> ID：10528779
> 
> 赞同：0
> 
> 时间：2012-05-10T06:47:44.177
> 
> 标签：c#, javascript, jquery, model-view-controller

我的 html 表单中有这个脚本

```
<button type="button" id="addUploadFile">Add Document</button>         
<input type="file" id="hiddenOpenFile" name="hiddenOpenFile" style="visibility:hidden;" />

<button type="button" id="button2">test</button> 
```

和准备好的功能的javascript脚本

```
$("#addUploadFile").live('click', function () {
      $('#hiddenOpenFile').trigger('click');
});

$("#hiddenOpenFile").live('change', function (event) {  
     alert(1);   
     $("#addbutton2").trigger('click');
});

$("#addbutton2").live('click', function () {
      alert(2)
}); 
```

问题是，当我选择任何文件时，Internet Explorer alert(2) 没有出现。它在任何其他浏览器上都非常有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:57:01.283

您缺少分号。

尝试：

```
 alert(2); 
```

您应该将 addbutton2 更改为 button2。没有这个，它甚至无法在 Chrome 中运行。您触发的点击事件似乎没有在 IE 中触发。使用自定义事件应该可以解决它。例如：

```
 $("#button2").trigger('gogogo'); 
```

然后绑定到'gogogo'：

```
 $("#button2").on('gogogo', function () {
    alert(2);
  }); 
```

看到这个小提琴：http: [//jsfiddle.net/UfRUa/3/](http://jsfiddle.net/UfRUa/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:45:39.123

单击 addUploadFile 按钮后，您应该将第二个按钮 id 从更改`button2`为文件上传器弹出窗口。`addbutton2`选择文件并关闭弹出窗口。？在这种情况下，hiddenOpenFile 的更改事件将触发，然后添加按钮 2 的单击事件

它工作正常：

```
<html>
<head>
<script src="../libs/jquery/1.4.2/jquery.min.js"></script>
</head>
<body>
<button type="button" id="addUploadFile">Add Document</button>         
<input type="file" id="hiddenOpenFile" name="hiddenOpenFile" style="visibility:hidden;" />

<button type="button" id="addbutton2">test</button>
<script>
    $("#addUploadFile").live('click', function () {
          $('#hiddenOpenFile').trigger('click');
    });

    $("#hiddenOpenFile").live('change', function (event) {  
         alert(1);   
         $("#addbutton2").trigger('click');
    });

    $("#addbutton2").live('click', function () {
          alert(2);
    });
</script>
</body>
</html> 
```

***升级版：***

据我所知 $.live() 不支持 IE 中的“更改”事件：

阅读对文档[http://docs.jquery.com/Events/live的评论](http://docs.jquery.com/Events/live)

尝试改用[livequery](http://docs.jquery.com/Plugins/livequery)吗？

# iphone - 在视图之间显示图像

> ID：10528781
> 
> 赞同：0
> 
> 时间：2012-05-10T06:47:59.697
> 
> 标签：iphone, ios, xcode, uiimage, transition

它**的基于选项卡的应用程序**首先显示登录页面，登录后将转到选项卡应用程序的主页。

我希望图像在登录后显示一小段时间，然后应该转到主页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:56:00.517

您可以再放一个视图（View3）。首先显示 view3 及以上放置登录页面。登录后删除登录视图。该 view3 将保留

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:55:37.150

如果我理解正确，您有一个 LoginController 和一个 MainController。当用户登录时，您将转换到 MainController。

在这种情况下，最简单的做法是在 LoginController 中实际拥有您想要显示的图像，并且当用户成功登录时，显示该图像并延迟新 viewController 的推送。你可以使用

```
performSelector:withObject:afterDelay: 
```

实现延迟。

编辑：

对于 UITabBarController，流程是相同的。您将在 LoginController 中登录用户（大概是您的第一个选项卡）。如果用户已登录，则显示图像并在延迟后使用`selectedViewController`UITabBarController 的属性切换活动选项卡。要切换到第二个选项卡，您只需`selectedViewController`在 LoginController 中设置如下：

```
self.tabBarController.selectedViewController= [self.tabBarController.viewControllers objectAtIndex:1] // 1 because an array starts at 0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:26:43.080

有两种方法可以做到这一点：- 1）您可以简单地将视图添加为第一个视图控制器上的子视图，并使用 a)“performSelector”将移动延迟到另一个视图几秒钟，并在子视图移动到下一个视图之前删除它。b) NSTimer 显示特定时间段的子视图[Tutorial1 On NSTimer](http://www.edumobile.org/iphone/iphone-programming-tutorials/using-nstimer-in-iphone/) [Tutorial2 On NSTimer](http://www.icodeblog.com/2009/07/23/nstimer-the-poor-mans-threading-code-snapshot/) 2) 或者您可以在主屏幕中实现相同的逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:39:51.060

*   (void)ShowImage {

    Set image on image view Here // 延迟后调用另一个导航函数

    [self performSelector:@selector(title:) withObject:sender afterDelay:2];

}

*   (无效)ShowOtherView {

    // 导航到其他视图的逻辑

}

# javascript - Jquery在div上添加和删除多个图像层

> ID：10528782
> 
> 赞同：3
> 
> 时间：2012-05-10T06:48:06.547
> 
> 标签：javascript, jquery, layer

我在找到正确的函数或逻辑来解决向 div 添加图层的问题（透明 png）时遇到问题。

这是潜在产品的“配置器”的一部分。

半工作演示（衬衫示例）可以在这里找到：

[http://jsfiddle.net/obmerk99/9t4f4/16/](http://jsfiddle.net/obmerk99/9t4f4/16/)

如果我将使用 append() - 就像您可以在代码中看到它被注释掉一样 - 它会无休止地追加 - 我如何删除前一个选项（仅来自同一选项组）

1-在这里使用的正确功能是什么？

2 - 如何在不使用多个专用 div 的情况下进行“组”划分（我将有 50-60 个选项..） - 或者在另一种情况下，如何自动创建这些？

3 - 如何使它适用于收音机/复选框？

**编辑我**

跛脚的话解释：

我有“组”选项，都指同一个产品。每个组“选项”对应于带有选项图像或相应部分的透明 png。

例如，如果我配置一辆车，我将有一组带有不同车轮图像的“车轮”选项，一组带有不同窗户的“窗户”选项，一组“颜色”选项等等......在最后，它们堆叠起来，形成完整的图像配置。这有点像那些制作头像或卡通图像的网站，人们可以在其中选择头部、胡须、背景、眼镜、头发等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:21:24.190

也许您可以有一个主图像来显示永远不会改变的内容，除此之外，每个选项都有一个图像，图像可以在标记中或在第一次选择选项时添加。

这是小提琴的一个模组，我认为这是你想要实现的[小提琴](http://jsfiddle.net/mowglisanu/9t4f4/17/)我为每个选项添加了一个叠加图像和跨度。

编辑：自动化开关将是微不足道的，只需给出以影响它的元素结尾的显示和信息元素 id
例如

```
<select id="optionX"> <img id="img-optionX"> <span id="desc-optionX"> 
```

见[小提琴](http://jsfiddle.net/mowglisanu/9t4f4/21/)

我认为您应该使用单选按钮（如果您不想使用选择）而不是复选框，因为它们可以轻松分组。

见[小提琴](http://jsfiddle.net/mowglisanu/9t4f4/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:18:18.427

我之前必须这样做，同时使用从 MMO 游戏网站提取的数据生成头像图像。我使用 PHP 和 GD 库动态生成包含所有必要部分（包括不同颜色变化）的图像，然后缓存生成的图像，以便不必重新生成对相同配置的后续调用。最终，化身的所有可能配置都被缓存，图像生成脚本变得过时了。

也许您可以使用相同的技术，或者只是预先生成每个可能的图像，让 Jquery 根据选定的选项进行选择？我能想到的唯一其他选择是使用 Flash 或 HTML 5 的 canvas 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:19:14.643

尝试以下代码以获取您评论的 JS 代码

`$('#prod').empty().append('<img id="prod-image" style="z-index:1;" src="http://img8.uploadhouse.com/fileuploads/16068/1606810537372e83db57b46d5a2d44d3124ac999.png"/>').append('<span id="collar"><img style="z-index:2;" src="'+data[value].img+'"/>Control Text : </span>');`

# networking - tun/tap 接口与物理设备通信

> ID：10528785
> 
> 赞同：5
> 
> 时间：2012-05-10T06:48:25.703
> 
> 标签：networking, tunnel

我不清楚`tun/tap`界面是如何工作的。从*维基百科*，我得到了这个：

*操作系统通过 TUN/TAP 设备发送的数据包被传递到用户空间程序，该程序将自身附加到设备上。用户空间程序也可以将数据包传递到 TUN/TAP 设备。在这种情况下，TUN/TAP 设备将这些数据包传递（或“注入”）到操作系统网络堆栈，从而模拟它们从外部源的接收。*

现在，假设我`tun`用`IP`12.12.12.1 创建了一个。如果在这台机器上我有两个 NIC，无论第二台机器连接到什么 NIC 设备（`tun`比如说或?`IP``eth0``eth1`

换句话说，`tun`和 NIC 是相互独立的，还是需要`tun`通过特定的 NIC 与 NIC 通信？

NB 欢迎提供有关主题的链接！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:47:42.047

如果你设置了一个虚拟网络，例如`12.12.12.0/24`可以通过你的虚拟接口访问，并且你从你的机器向这个网络发送一个数据包，实现 tun/tap 的内核模块将通过一个字符设备从内核发送这个数据包到你的应用程序。这取决于您的应用程序如何处理此数据包。它可以传输到其他一些应用程序（例如 VPN 服务器）。您的应用程序还可以通过此字符设备反馈数据包，操作系统网络堆栈会将这些数据包视为入口网络流量。

如果机器充当路由器，它可以只使用 tun/tap 虚拟接口作为常规接口并通过它转发流量，但它始终是处理设备的应用程序来管理数据包。通过虚拟接口的传出流量始终传递到您的应用程序，通过虚拟接口的传入流量始终来自您的应用程序。

# java - 应用程序中的 webview 是否缓存页面？

> ID：10528786
> 
> 赞同：4
> 
> 时间：2012-05-10T06:48:29.603
> 
> 标签：java, android, iphone, objective-c, ios

我开发了一个在 Android 和 iOS 上运行的 Web 应用程序。webview 是否以某种方式缓存页面？我正在对服务器上的 html 进行更改，但它随机更改，并不总是更改。这是正确的行为吗？我认为它应该查看 HTTP 标头并看到它已被修改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:51:46.250

iOS 上的 UIWebView 肯定会发生缓存。当我遇到问题时，我无法找到任何合理的解决方案（标题等）。我们最终在服务器端重命名文件，以诱骗它解除缓存。

# jquery - Datetimepicker - 无法理解代码

> ID：10528787
> 
> 赞同：1
> 
> 时间：2012-05-10T06:48:30.023
> 
> 标签：jquery, jquery-ui, datepicker, datetimepicker

我正在审查我用于未完成项目的旧代码，我无法真正理解其中的一部分，你能帮我理解它吗？我正在使用来自[http://trentrichardson.com/examples/timepicker/](http://trentrichardson.com/examples/timepicker/)的 datetimepicker，它支持 jQuery UI 日期选择器。这是代码（这是我不明白的 onSelect 事件代码）：

```
 $(function() {
    var dates = $( "#from, #to" ).datetimepicker({
        changeMonth: true,
        onSelect: function( selectedDate ) {
            var option = this.id == "from" ? "minDate" : "maxDate",
                instance = $( this ).data( "datepicker" ),
                date = $.datepicker.parseDate(
                    instance.settings.dateFormat ||
                    $.datepicker._defaults.dateFormat,
                    selectedDate, instance.settings );
            dates.not( this ).datepicker( "option", option, date );
        },
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:02:07.133

如果我没记错的话。有 2 个元素`#from and #to`，如果用户在`#from`元素上选择日期值，则 jquery 函数将确定`minDate`从 #to 元素开始的选定值。
如果用户为#to 选择日期值，则函数将确定`maxDate`#from 作为给定的选定日期。

总之，功能是通过选择另一个元素来确定元素的`minDate`或。`maxDate`

```
var option = this.id == "from" ? "minDate" : "maxDate", //determine datepicker based on elemen selected
                instance = $( this ).data( "datepicker" ),
                date = $.datepicker.parseDate(
                    instance.settings.dateFormat ||
                    $.datepicker._defaults.dateFormat,
                    selectedDate, instance.settings );  // retrieve selected datepicker data 
            dates.not( this ).datepicker( "option", option, date );  //select another of this element then set minDate or maxDate of datepicker data into the element 
```

# c# - 我应该如何将我的托管 DirectX 程序迁移到 Windows 7？

> ID：10528788
> 
> 赞同：2
> 
> 时间：2012-05-10T06:48:33.470
> 
> 标签：c#, .net, windows-7, directx, managed-directx

最近我买了一台装有 Windows 7 的新电脑并安装了 C# 2010 Express。我在我的 Vista 机器上用 C# 2008 Express 编写了很多软件。当我尝试将托管 D3D 应用程序迁移到 2010 时，它们都在运行时崩溃，并出现错误“不是有效的 Win32 应用程序”。经过一些故障排除后，我了解到这是因为 MS 不再支持托管 DirectX。多么拖沓。所以看起来我必须重写大量代码才能使用以下替代方法之一：

*XNA
*Direct3D 10/11 API（就像你在 VC++ 中使用的那样）
*OpenGL
*其他一些选项，比如 SlimDX

我正在寻找一种解决方案：
*向后兼容（即，Vista 和 XP）
*向前兼容（我不想学习一个新系统就不得不放弃它并在一年内学习另一个）
* OO 友好——我有数千行代码要重写。我编写非托管代码没有问题，但类似的 OO 解决方案可能会减少移植时间。

我不能成为第一个遇到这个问题的人。其他人找到了哪些解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:53:31.137

我的猜测是您的应用程序是作为 AnyCPU 构建的，引用 x86 程序集，但您的 Win7 机器是 x64。将您的应用程序构建为 x86 可能会解决这个问题。

# internet-explorer - Google Chrome Frame 是否向 IE 添加 CSS3 功能？

> ID：10528792
> 
> 赞同：1
> 
> 时间：2012-05-10T06:49:05.577
> 
> 标签：internet-explorer, css, cross-browser, google-chrome-frame

Google Chrome Frame 是否也向 IE 添加 CSS3 功能？

我们的一位客户在他们的公司中使用 IE6/IE7。所以我们建议他们在他们的系统上安装 Chrome Frame，这样浏览器就符合标准。

所以现在的问题是——

是[IE+Chrome Frame]~[Chrome]？

我可以假设在 Chrome [比如说 CSS3] 上运行的任何东西都可以在 [IE + Chrome Frame] 上运行吗？

如果不是，Google Chrome Frame 的哪些元素不会通过 Chrome Frame 传递给 IE？

回到主要问题，CSS3 可以在 IE6+ Chrome Frame 上运行吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T06:51:51.227

是的。它将用 chromes webkit 替换渲染。

> Google Chrome Frame 无缝增强了您在 Internet Explorer 中的浏览体验。它使用 Google Chrome 的渲染技术显示支持 Google Chrome Frame 的网站，让您可以访问最新的 HTML5 功能以及 Google Chrome 的性能和安全功能，而不会以任何方式中断您通常的浏览器使用。

[http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/chrome-frame-faq](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started/chrome-frame-faq)

他们没有提到 CSS3，但在谷歌的术语中属于 HTML5。

我不会指望 Google Chrome Frame 中的所有功能，因为它们可能稍微落后于 Google Chrome。

# java - Http request.getIntHeader() 返回 NumberFormat 异常

> ID：10528794
> 
> 赞同：0
> 
> 时间：2012-05-10T06:49:13.457
> 
> 标签：java, servlets

我发出了一个 Http 请求，这就是请求标头的样子：

```
GET /unni/servlets/servlet/HelloWorldExample HTTP/1.1
Host: localhost:8700
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Connection: keep-alive
Cache-Control: max-age=0 
```

然后，我刚刚使用`request.getIntHeader("User-Agent")`。这次我得到一个`NumberFormatException`说法，“请求标头不能转换为整数”。这也是 API 和 servlet 规范所说的。我搜索了更多关于这个以获得一些工作示例，但没有得到任何想要的结果。那么，我该如何使用这种方法？我正在使用`Apache Tomcat 7.0.25`.

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:20:56.547

带有键“User_Agent”的标题包含混合日期类型值（字符串和整数的组合），在您的情况下，它是：User-Agent：Mozilla/5.0（Windows NT 6.1；rv:12.0）Gecko/20100101 Firefox/12.0。

如果您尝试将此值作为 Integer 获取，则肯定会得到 NumberFormatException （因为标头值也包含非数字值）。

您只能将 request.getIntHeader() 应用于那些包含纯数值的标头。您可以使用数值定义自己的标头键，并使用 request.getIntHeader() 检索它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:54:58.557

我不明白，User-Agent 标头是一个字符串，您可以像这样检索它
`String userAgent = request.getHeader("User-Agent");`
或者我错过了您的问题的重点？

# eclipse - Eclipse 插件

> ID：10528795
> 
> 赞同：0
> 
> 时间：2012-05-10T06:49:13.910
> 
> 标签：eclipse

我正在为 JSHOP2 语言开发一个 Eclipse 插件。为此，我使用“编辑器”制作了一个插件项目。我已经为 JSHOP2 编写了必要的语法高亮代码，但我不知道如何将这种类型的插件与 eclipse 集成，然后如何使用它，以便在我编写 JSHOP2 代码时获得必要的语法突出显示。请帮我解决一下这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:56:24.530

所以你有一个可以正常工作的编辑器？然后您需要确保使用您的编辑器打开带有您的扩展名的文件。[Eclipse wiki 中对此进行了](http://wiki.eclipse.org/FAQ_How_do_I_create_my_own_editor?)描述。要确保您的插件集成到您的 Eclipse 版本中，请创建一个更新站点并导入插件，就像您对任何其他插件所做的那样。或者将插件导出到 jar 并将 jar 复制到`dropins`目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T17:49:05.350

由于您是使用eclipse编写java代码（插件项目）。创建一个新的 Eclipse 启动配置。菜单运行 -> 运行配置。位置 Eclipse 应用程序。右键单击-> 新建并运行。希望这可以帮助。

# linq-to-sql - LinqToSql 计算字段 OnPropertyIDChanged

> ID：10528797
> 
> 赞同：1
> 
> 时间：2012-05-10T06:49:29.960
> 
> 标签：linq-to-sql, partials, calculated-columns

我有一个部分类来扩展我的 LinqToSql 类之一。在这个部分类中，我有以下计算字段。

```
 public bool IsInCluster
    {
        get
        {
            return Cluster != null;
        }
    } 
```

为了使绑定到该字段的网格列自动更新，我实现了以下部分方法。

> ```
>  partial void OnClusterIDChanged()
>     {
>         SendPropertyChanged("IsInCluster");
>     } 
> ```

但是，当我更新 Cluster 属性时，如以下代码所示，不会调用 OnClusterIDChanged 方法：

> 私人无效 ExecCreateClusterCommand()
> {
> 
> ```
>  var cluster = new Cluster()
>         {
>             ID = Guid.NewGuid(),
>             MailService = AppState.CurrentMailService
>         };
> 
>         App.DataContext.Clusters.InsertOnSubmit(cluster);
> 
>         foreach (DeliveryPoint deliveryPoint in SelectedDeliveryPoints)
>         {
>             deliveryPoint.Cluster = cluster;
>         }
> 
>         App.DataContext.SubmitChanges(); 
> ```
> 
> }

我已经成功地将这种技术与其他与计算字段相关的非导航属性一起使用。有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T21:47:27.553

我能找到的唯一解决方案是在 DeliveryPoint 类中创建一个公共方法，使我能够为所需字段（导航属性）调用 SendPropertyChanged：

```
 public void CallSendPropertyChanged(string propertyName)
        {
            SendPropertyChanged(propertyName);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:01:00.877

如果状态已更改，请在您的 setter 中`Cluster`调用。`OnClusterIDChanged`

# c# - 在 C# .NET 中使用命名空间将简单的 JSON/XML 转换为 XML

> ID：10528801
> 
> 赞同：2
> 
> 时间：2012-05-10T06:50:11.727
> 
> 标签：c#, .net, xml, json

**在不**使用强类型类（C#）的情况下，将 json（或简单的 XML）转换为带有命名空间（或特定模式）的 XML 的最佳方法是什么？（使用 XSD、XSLT、模板引擎或其他基于文本的引擎）。

什么是最有效的方式（资源/性能）？

例如，在 json - string 中取以下对象：

```
{
  'item': {
    'name': 'item #1'
    'code': 'itm-123'
    'image': {
      '@url': 'http://www.foo.com/bar.jpg'
    }
  }
} 
```

并将其转换为：

```
<foo:item>
    <foo:name>item #1</foo:name>
    <foo:code>itm-123</foo:code>
    <foo:image url="http://www.foo.bar"/>
</foo:item> 
```

（对象可能比上面的例子更复杂）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:52:35.870

您可以使用 json.net 来执行此操作。阅读其他[帖子](https://stackoverflow.com/questions/6760232/dont-use-javascriptserializer-to-convert-xml-file-of-unknown-schema-to-js/10331051#10331051)

它显示相反的方式，但应该几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-12T17:52:05.780

使用[Cinchoo ETL](https://www.nuget.com/ChoETL.JSON)，一个开源库，这种转换可以很容易地完成，如下所示

```
string json = @"
{
  'item': {
    'name': 'item #1',
    'code': 'itm-123',
    'image': {
      '@url': 'http://www.test.com/bar.jpg'
    }
  }
}";

StringBuilder xml = new StringBuilder();
using (var r = ChoJSONReader.LoadText(json))
{
    using (var w = new ChoXmlWriter(xml)
        .IgnoreRootName()
        .IgnoreNodeName()
        .WithDefaultXmlNamespace("foo", "http://temp.com")
        )
    {
        w.Write(r);
    }
}

Console.WriteLine(xml.ToString()); 
```

**输出：**

```
<foo:item xmlns:foo="http://temp">
  <foo:name>item #1</foo:name>
  <foo:code>itm-123</foo:code>
  <foo:image url="http://www.test.com/bar.jpg" />
</foo:item> 
```

**小提琴示例：** [https ://dotnetfiddle.net/MITsuL](https://dotnetfiddle.net/MITsuL)

免责声明：我是这个库的作者。

# javascript - javascript在确认取消时不能返回false

> ID：10528810
> 
> 赞同：-1
> 
> 时间：2012-05-10T06:50:55.673
> 
> 标签：javascript, confirm

我是 js 新手。我有一个小问题，我有两个功能，一个是删除数据，一个是刷新页面

```
function btndeleteClick(){
    var btn = $get("<%=btndeleteall.ClientID %>");
    btn.click();
    return true;
}      

function RefreshPage() {
    if (confirm('Anda akan menghapus Material yang belum terpakai')==true){
        btndeleteClick();
        window.location.reload();
    } else {
        return false;
    }
} 
```

事情是当我按取消确认时，它仍然删除我的数据，有什么建议吗？谢谢 :) pe2s

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:05:28.267

我已经将代码放在[JSFiddle](http://jsfiddle.net/zNDWF/)上，并且代码可以正常工作。所以你的问题在别的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:19:05.843

您的 java 脚本代码看起来正确。我不确认，但如果您在表单`onsubmit`事件中添加此脚本，那么请检查您是否添加了`return before function or not in form tag`。

```
<form name="frmname" id="frmname" method="post" action="" onsubmit = "return RefreshPage()" /> 
```

如果您可以添加表单代码，那么更好地理解问题。

谢谢

# php - 页面标题中包含的类别和产品名称标准

> ID：10528811
> 
> 赞同：1
> 
> 时间：2012-05-10T06:50:55.627
> 
> 标签：php, magento

是否可以命名要包含在页面标题中的类别和产品标准？现在只显示默认标题。

例如，“XXX”类别中的产品标题必须具有自动页面标题：产品名称 | XXX | 默认标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:20:58.917

是的，可以更改页面的标题，只需在 app\code\core\Mage\Catalog\Block\Product 文件夹中查找 View.php 文件并`function _prepareLayout()`在此函数中找到您可以看到标题变量并更改标题的任何内容想。

# json - 如何将模型和 json 对象传递给控制器 动作

> ID：10528812
> 
> 赞同：0
> 
> 时间：2012-05-10T06:50:57.903
> 
> 标签：json, asp.net-mvc-3, entity-framework-4.1

我找了很长时间来解决这个问题，但我还没有找到任何东西。我已将强类型定义为我正在使用的控制器/视图的模型；问题是模型引用了其他复杂类型，所以我需要部分更新该模型的部分。例如，在页面的一个选项卡中，我部分获得了另一个视图，该视图带来了带有一些选择的网格；另一部分带来另一部分；所以在用户选择他们的选项并提交后，我需要将所有这些小块发送到 post 操作。

我已经创建了我需要的 JSON 对象并将其发送到控制器。在行动中，我成功获得了模型，但 JSON 并没有出现在行动中。那么如何将该 JSON 作为控制器操作的附加参数传递给视图呢？

我也已经用提琴手检查了请求，并且正在发送 JSON。对象是否在特殊集合中传递？

* * *

当然。视图期望或被强类型化为模型，在这种情况下是“提供者”实体。这个实体有原始类型和复杂类型。因为实体仍在创建过程中，所以当达到创建后操作时，我需要传递部分对象来完成实体。这是模型的一部分：

```
public class Provider2 : IProvider
{
    public int Id { get; set; }
    public bool IsApproved { get; set; }
    public string RejectionNotes { get; set; }
    public string Name { get; set; }
    public string Phone { get; set; }
    public string Fax { get; set; }
    public string Email { get; set; }
    public int OfficeAddressId { get; set; }
    public virtual Address Address { get; set; }
    public virtual ICollection<Chain> ProviderChain { get; set; }
    public virtual ICollection<ProviderContact> ProviderContacts { get; set; }
    public virtual ICollection<ExaminationPrice> ExaminationPrices { get; set; }
} 
```

整数、字符串等简单类型没有问题。如您所见，有集合和复杂类型，这些类型是从部分视图中检索的，并且那一刻是单独的实体，因此我需要在提交时将它们包装在 json 或其他对象（例如 JSON）中并获取它达到创建动作的那一刻：

```
[HttpPost]
public ActionResult Create(Provider provider, Another object to be passed???)
{
    if (ModelState.IsValid)
    {
        _repository.Save(provider);
        return RedirectToAction("Index");
    }
    return View(provider);
} 
```

原始类型和地址属性在模型上映射，所以它们没有问题，但集合没有映射，所以这就是我尝试传递一个附加对象（如 json）来包装纯 HTML 中的所有部分的原因到 javascript 对象，因为它们没有直接映射到模型。

所以，通过这个 javascript 我将我需要的数据发送到视图并发送它，但显然该操作没有接收到 json 对象。

```
 $(function () {
        $("#ButtonSave").click(function () {
            var prices = getPrices();

            if (prices != null) {
                $.ajax({
                    url: '/Provider/Create',
                    type: 'POST',
                    dataType: 'json',
                    data: prices,
                    contentType: 'application/json; charset=utf-8',
                    success: function (data) {
                        alert('Success');
                    }
                });
            }
        });
    });

    function getPrices() {
        var elements = '[';        
        var rows = $("#selectedElementsGrid tr.selectable").each(function () {
            var idValue = '{price : { "Id":' + $(this).find(".id").val() + ',';
            var nameValue = ' "Name":"' + $(this).find(".name").text() + '",';
            var priceValue = ' "Price":"' + $(this).find(".price").val() + '"} },';
            elements = elements + idValue + nameValue + priceValue;
        });
        elements = elements.substring(0, elements.length - 1) + ']';
        return JSON.stringify(elements);
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T16:44:43.180

深入了解 MVC3 框架，我发现您可以将任意数量的参数传递给控制器​​操作，这样做的关键是保持对模型和请求的良好处理。我还发现实现这一点的最简单方法是通过 JSON，首先您使用所需的参数定义控制器操作：

```
[HttpPost]
public ActionResult AddContact(Contact contact, int Id)
{
    var globalType = _repository.FindOne(p => p.Id == Id);
    if (globalType.Contacts == null)
    {
        globalType.Contacts = new List<Contact>();
    }
    globalType.Contacts.Add(contact);
    return View("Index", globalType);
} 
```

然后从标记中定义一个复杂的 JSON 来传递参数：

```
 var contact = { Id: $('#FieldId').val(),
            Notes: $('#ContactNotes').val(),
            Name: $('#ContactName').val(),
            Phone: $('#Phone').val(),
            Fax: $('#Fax').val(),
            Email: $('#Email').val(),
            OfficeAddress: { Country: $('#Country').val(), 
                    State: $('#State').val()
                    ZipCode: $('#ZipCode').val()
            }
        };                                

    $.ajax({
        url: '/Contact/Edit',
        contentType: 'application/json; charset=utf-8',
        type: 'POST',
        dataType: 'json',
        data: JSON.stringify(contact)
    })
    .success(function (result) {
        // Display the section contents.
        alert('Contact updated succesfully!');
        window.location.href = result.Url;
    })
    .error(function (xhr, status) {
         alert('The provider could not be updated.');
    }); 
```

请注意，Id 参数的调用方式与 action 方法中的调用方式相同。复杂类型由 MVC 框架自动推断，唯一的条件是属性必须命名相同。

实现相同结果的另一种方法是使用 2 种不同的 JSON 类型定义控制器操作，这是一个示例。

控制器动作：

```
[HttpPost]
public ActionResult AddContact(TypeA  typeA, TypeB typeB)
{
    //Some logic...
} 
```

JSON：

```
 var _typeA = { Id: $('#FieldId').val(),
            Name: $('#ContactName').val()
        }; 

    var _typeB = { Id: $('#FieldId').val(),
            Name: $('#ContactName').val()
        }; 

    $.ajax({
        url: '/Controller/Action',
        contentType: 'application/json; charset=utf-8',
        type: 'POST',
        dataType: 'json',
        data: {typeA:JSON.stringify(_typeA)},{typeB:JSON.stringify(_typeB)}
    })
    .success(function (result) {
        // Display the section contents.
        alert('Contact updated succesfully!');
        window.location.href = result.Url;
    })
    .error(function (xhr, status) {
         alert('The provider could not be updated.');
    }); 
```

希望这对你有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T18:50:01.810

您发布的 json 对象是字符串（稍后您可以使用 JavaScriptSerializer 的方法对其进行反序列化）。我认为，您缺少的是您在 jquery ajax 调用中作为数据放置的价格变量的关键。一个帖子通常由一个键值对列表组成，这也是允许服务器技术从发布的数据中重构和反对的原因。在您的情况下，只有价格变量。
尝试将其更改为 data:{PricesListAsString:prices}，然后在服务器上将“要传递的另一个对象”更改为字符串 PriceListAsString。
当然也可以查看Request对象，在调试控制器的同时，看看posted值是如何传给服务器的

# python - 如何将 cURL 转换为 Python Web 请求？

> ID：10528814
> 
> 赞同：0
> 
> 时间：2012-05-10T06:51:04.127
> 
> 标签：python, curl, python-requests

很抱歉问这样的入门级问题。我需要将以下内容翻译`cURL`成 python 语言。我尝试使用`requests`函数，但失败了。那么有人可以给我一些提示吗？选择请求是否正确？我应该考虑 urllib 吗？谢谢！

卷曲代码：

```
$ curl -k -u 'key:secret_key' -X POST https://api.picloud.com/file/new/ -d name=your_file_name 
```

我的错误尝试：

```
r = requests.put('https://api.picloud.com/file/new/',auth=(api_key,api_secretkey),data={'name':'your_file_name'}) 
```

我收到以下错误：

```
requests.exceptions.SSLError: [Errno 1] _ssl.c:503: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed 
```

我需要先对我的密钥和密钥进行编码吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:43:08.457

在您的 curl 命令中，您使用了`-k/--insecure`禁用 SSL 证书验证的选项。

如果您还想禁用 SSL 证书验证，可以添加`verify=False`到您的 requests.put 调用（请参阅[SSL 证书验证](http://docs.python-requests.org/en/latest/user/advanced/#ssl-cert-verification)）。

**但从安全的角度来看，这肯定是个坏主意**。您**必须**通过提供足够的根 CA 证书来验证对等证书。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-23T06:29:53.977

```
requests.get(url, auth=('user', 'password'), verify=False) 
```

# android - Android：杀死进程并关闭应用程序

> ID：10528818
> 
> 赞同：0
> 
> 时间：2012-05-10T06:51:18.337
> 
> 标签：android, process

我正在开发一个简单的任务管理器，它允许用户终止正在运行的进程并终止应用程序。我正在使用以下方法获取正在运行的进程列表：

```
List<RunningAppProcessInfo> procInfo = activityManager.getRunningAppProcesses(); 
```

只需单击一下按钮，我就想以任何方式杀死所有不重要或不重要的正在运行的进程。为此，我使用：

```
ArrayList<String> packages = new ArrayList<String>();
for (int i = 0; i < procInfo.size(); i++) {
    String process = procInfo.get(i).processName;
    if (!packages.contains(process)) {
            packages.add(process);
    }
} 
```

这将为我提供所有正在运行的进程的名称，现在我可能应该使用它们的重要性代码以某种方式过滤它们：

```
int importance = procInfo.get(i).importance 
```

但我不确定如何。我应该继续运行什么，什么可以安全杀死？我在用着

```
applicationManager.killBackgroundProcesses(process); 
```

杀死我的进程。我的下一个问题是，这是杀死进程的最佳方法吗？因为当我这样做并且再次打开所有进程都被杀死的应用程序之一时，我发现自己不在它的主活动中，而是在我离开它的地方，所以我假设应用程序从未终止，即使它的所有进程都被杀死了。此外，我发现该应用程序处于相当荒凉的状态（缺少 ImageViews 和 Buttons，TextViews 不在它们应该在的位置）。请注意，此应用程序也是我自己编写的，通常可以正常工作。

我的最后一个问题是，当这个杀死进程的问题得到解决时，我还想终止选定的应用程序。如何获取正在运行的应用程序列表？我正在考虑获取正在运行的进程列表，而不是从该列表中获取应用程序。之后，通过杀死所有进程来终止选定的应用程序。但我不认为这是最好的方法，因为当我杀死所有进程时它显然不起作用。

感谢您的回复！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:08:48.970

在 Android 中杀死应用程序通常被认为是一个坏主意。这是因为 Android 操作系统旨在处理所有任务管理。通常，当一个项目被列为在 Android 操作系统上运行时，它甚至不会消耗资源。如果系统确实需要更多资源，它将正确关闭应用程序。如果应用程序没有正确关闭，即被任务杀手关闭，它可能会产生许多不好的副作用。

此外，仅仅因为一个应用程序正在“运行”并不意味着它有一个进程正在运行。如果您查看 ActivityManager 的文档，它会这样说。

> 您可以检索有关当前在系统中“运行”的特定任务的信息。请注意，正在运行的任务并不意味着给定任务实际上有一个正在运行的进程；它只是意味着用户已经进入它并且从未关闭它，但是当前系统可能已经终止了它的进程并且只保持它的最后状态以便在用户返回时重新启动它

killBackgroundProcesses() 会像 Android 操作系统一样杀死一个进程（当它需要更多内存时），因此它很可能会保留其最后一个状态，因为它认为它被杀死是因为系统需要更多资源。从而使系统相信用户可能想要返回应用程序（为什么它保持其最后状态）。

无论如何，在您阅读了以上内容并仍然希望编写任务杀手之后，您可能会发现查看开源任务杀手很有帮助。代码可以在这里看到：[http ://code.google.com/p/freetaskmanager/source/browse/](http://code.google.com/p/freetaskmanager/source/browse/)

# regex - 具有特殊字符问题的 apache mod_rewrite http_user_agent

> ID：10528819
> 
> 赞同：0
> 
> 时间：2012-05-10T06:51:23.723
> 
> 标签：regex, apache, .htaccess, mod-rewrite

我遇到了垃圾邮件机器人/爬虫程序进入我的网站的问题，其请求在 apache 日志中显示如下：

```
"GET / HTTP/1.1" 200 7128 "-" "\x09Mozilla/5.0 (Windows NT 5.1; rv:5.0) Gecko/20100101 Firefox/5.0" 
```

这些请求的奇怪区别在于，出于某种原因，用户代理前面有一个制表符 ( `\x09`)，因此我尝试为这些请求创建一个 .htaccess mod_rewrite 过滤器。

到目前为止，我未能成功创建一个适合拒绝这些请求的 RewriteCond。我尝试了以下方法：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} ^\x09Mozilla [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^.*(%0A|%0D|%27|%3C|%3E|%00|%09).* [NC]
RewriteRule ^.* - [F,L] 
```

（`%09`制表符）是第二个 RewriteCond 中最重要的操作子句（为了增加安全性而加入的其他子句）。

我的语法错误在哪里？如何阻止这些请求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:31:50.750

Ok, ending up using the following, seems to be stopping the bots in their tracks with a 403 error:

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} Mozilla/5\.0.*Windows\ NT\ 5\.1;\ rv:5\.0.*Gecko/20100101\ Firefox/5\.0 [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^.*(%0A|%0D|%27|%3C|%3E|%00|%09|\t|\x09).* [NC]
RewriteRule ^.* - [F,L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:35:46.827

问题是当你输入 \x09 时，这不是一个特殊字符——它是字符 \、x、0 和 9。如果你想要一个制表符，请尝试改用 \t——这是制表符的正则表达式版本。所以 RewriteCond 应该是这样的：

```
RewriteCond %{HTTP_USER_AGENT} ^\tMozilla [NC,OR] 
```

# sql - 在 SQL Server 2008 中插入表使用数组

> ID：10528826
> 
> 赞同：2
> 
> 时间：2012-05-10T06:51:55.623
> 
> 标签：sql, sql-server, sql-server-2008, tsql, insert

这是我的桌子：

**电话**：Id、MemberId、号码、PhoneType、IsDefault

我需要一个存储过程来获取一个数组`numbers`和一个`memberId`作为参数并将它们全部插入到`Phone`表中。我不能一个一个地传递数字，我需要插入所有数字或一个都不插入。我认为将数字作为用逗号分隔的列表传递，`Nvarchar`就像`'0412589, 0425896, 04789652'`我必须提到`MemberId`的那样始终是常量并通过参数传递，`PhoneType`始终是常量，并且对于其他人`='phone'`的数组的第一个数字如何从插入命令中选择数字并设置其他列？或者你有另一个建议来传递数字数组？`IsDefault = 1``IsDefault = 0``numbers`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T07:03:59.577

您可以使用表值参数。因此，如果您有这样的类型：

```
CREATE TYPE PhoneNumberType AS TABLE 
( number  VARCHAR(50));
GO 
```

然后你的程序将是这样的：

```
CREATE PROCEDURE dbo. usp_InsertPhoneNumbers
    @TVP PhoneNumberType READONLY
AS 
INSERT INTO Phone(number,....)
SELECT
    number,
    ....
FROM
    @TVP 
```

参考[这里](http://msdn.microsoft.com/en-us/library/bb510489.aspx)

**编辑**

它就像一张桌子一样工作，所以很容易做到这一点：

```
DECLARE @TVP PhoneNumberType

INSERT INTO @TVP
VALUES
    ('0412589'),('0425896'),('04789652')

EXEC usp_InsertPhoneNumbers @TVP 
```

或者，如果您将其作为一个字符串，则需要将其拆分。这是一个简洁的拆分功能：

```
CREATE FUNCTION dbo.Split (@s varchar(512),@sep char(1))
RETURNS table
AS
RETURN (
    WITH Pieces(pn, start, stop) AS (
      SELECT 1, 1, CHARINDEX(@sep, @s)
      UNION ALL
      SELECT pn + 1, stop + 1, CHARINDEX(@sep, @s, stop + 1)
      FROM Pieces
      WHERE stop > 0
    )
    SELECT pn,
      SUBSTRING(@s, start, CASE WHEN stop > 0 THEN stop-start ELSE 512 END) AS s
    FROM Pieces
  )
GO 
```

你这样调用程序：

```
DECLARE @TVP PhoneNumberType
DECLARE @textToSplit VARCHAR(512)='0412589, 0425896, 04789652'
INSERT INTO @TVP
SELECT
    split.s
FROM
    dbo.Split(@textToSplit,',') AS split

EXEC usp_InsertPhoneNumbers @TVP 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:13:25.523

您可以将 XML 参数传递给您的存储过程。

您将传入一个 XML，例如：

```
<phones>
 <phone>
  <memberid>12</memberid>
  <number>123456789</number>
  <type>Landline</type>
 </phone>
 <phone>
  <memberid>12</memberid>
  <number>987654321</number>
  <type>Mobile</type>
 </phone>
</phones> 
```

到这样的存储过程：

```
CREATE PROCEDURE dbo.stp_InsertPhoneNumbers
   @numbersXML xml
AS

INSERT INTO Phone(memberid, number, type)
SELECT
   List.Id.query('memberid').value('.', 'int') as memberid,
   List.Id.query('number').value('.', 'varchar(50)') as number,
   List.Id.query('type').value('.', 'varchar(50)') as type
FROM @numbersXML.nodes('/phones/phone') as List(Id) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:04:43.260

在存储过程中传递 xml 或数据表。可以在 sql server 2008 中传递数据表。

[参考：如何将数据表传递给sp](https://stackoverflow.com/questions/10295326/should-you-make-multiple-insert-calls-or-pass-xml/10295812#10295812)

# jquery - jQuery 元素是插件的实例吗？

> ID：10528827
> 
> 赞同：2
> 
> 时间：2012-05-10T06:51:56.853
> 
> 标签：jquery, jquery-ui, jquery-plugins, datepicker

有没有办法知道文本字段是否是 jQuery UI Datepicker 的实例？

例如，假设我有以下代码：

```
$('#item_id').datepicker(); 
```

有没有办法做这样的事情：

```
if($('#item_id') IS NOT A DATEPICKER YET)
{
    $('#item_id').datepicker();
} 
```

当然，上面的条件检查是用人类语言编写的，而不是 JavaScript 常规代码；）

PS：我知道我的问题很笼统，但是我的英语不太好:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T07:12:15.197

使用 JQuery UI Datepicker 应用文本字段后，它将包含一个“hasDatepicker”类。

也许您可以形成一个查询，例如`$('#field').hasClass('hasDatepicker')`检查具有 id 'field' 的特定文本字段是否应用了日期选择器功能。确保在应用日期选择器*之后*进行检查，而不是*在*.

或者，您可以只检查用于应用日期选择器的相同类。

如果您使用`$(".applyDatepicker").datepicker();`“applyDatepicker”类在所有文本字段上应用日期选择器。然后你可以回溯`$('#field').hasClass('applyDatepicker')`.

# c# - ASP.NET C# 在 ftp 上搜索文件（更好的代码）

> ID：10528830
> 
> 赞同：0
> 
> 时间：2012-05-10T06:52:14.267
> 
> 标签：c#, asp.net, ftpwebrequest

希望我能像我想的那样解释这个

我有一个网络应用程序，其中包含来自供应商列表的产品。例如 www.example.com.au/Browse.aspx?SupplierID=XYZ 仅显示 XYZ 供应商的产品。然后转到详细信息页面 www.example.com.au/Product.aspx?ProductID=123。此页面显示该产品的详细信息列表（图片库、产品数据表，即 PDF 等）。

现在，每个供应商都有一个 ftp 帐户，他可以在其中上传他们的产品信息 - [ftp://resources.example.com.au](ftp://resources.example.com.au)，这可以通过 resources.example.com.au/* 访问。因此，假设供应商 XYZ 将具有以下内容：

```
resources.example.com.au/XYZ/123.jpg <== main product image
resources.example.com.au/XYZ/123_a.jpg <== secondary image
resources.example.com.au/XYZ/123_b.jpg <== secondary image
resources.example.com.au/XYZ/123_c.jpg <== secondary image 
```

（由于应用程序要求，Web 应用程序与资源文件夹位于不同的服务器上）

现在，要获取相关产品图片列表，我有以下内容：

```
public List<string> GetFiles(string strDirectoryName, string strStartsWith)
{
    List<string> files = new List<string>();

    FtpWebRequest request = (FtpWebRequest)FtpWebRequest.Create(new Uri(strFTPUrl + strDirectoryName));
    request.Method = WebRequestMethods.Ftp.ListDirectory;
    request.Credentials = new NetworkCredential(strFtpUser, strFtpPassword);

    FtpWebResponse response = (FtpWebResponse)request.GetResponse();
    Stream responseStream = response.GetResponseStream();
    StreamReader reader = new StreamReader(responseStream);

    while (!reader.EndOfStream)
    {
        string filename = reader.ReadLine().ToString();
        if (filename.Length > 4)
        {
            if (!string.IsNullOrEmpty(strStartsWith))
            {
                if (filename.StartsWith(strStartsWith, StringComparison.OrdinalIgnoreCase))
                {
                    files.Add(filename);
                }
            }
        }
    }

    response.Close();
    responseStream.Close();
    reader.Close();

    return files;
} 
```

不幸的是，这个函数会遍历所有文件（可能大约 100,000 个），并且只选择我需要的文件。

我的问题：有没有更好的方法来过滤我需要的图像，而不是遍历整个目录？

或者，也许是另一种获取这些图像的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:10:11.297

我没有找到使用过滤器执行 directoryList Ftp 请求的方法，但我可能有办法提高您的解决方案的性能。

您可以启动一个新线程，每 x 分钟获取一次 directoryList 并将结果存储在内存中。
如果您正在寻找一个文件，您可以从内存中提供列表（大大提高性能），但有找不到文件的风险（此时您可以执行当前代码）。在最坏的情况下，内存搜索操作会导致一点开销，但与具有如此大结果集的 ftp 请求相比，它应该可以忽略不计。

# android - 如何检查设备连接的 wifi 互联网连接速度？

> ID：10528831
> 
> 赞同：1
> 
> 时间：2012-05-10T06:52:14.233
> 
> 标签：android, networking, connection, wifi

我可以用这个检查设备是否连接到wifi。

```
public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) activity
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo netInfo = cm.getActiveNetworkInfo();

    if (netInfo != null && netInfo.isConnectedOrConnecting()) {
        return true;
    }
    return false;
} 
```

但是，我想检查 wifi 连接速度，比如 Ping。我想根据这个 ping 号码来设置一些变量。像这样的东西，

```
public int internetspeed(){
    checking...
    return speed;
} 
```

有人可以给我教程或示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:20:47.593

此代码段将为您完成工作

```
 WifiManager wifiManager = Context.getSystemService(Context.WIFI_SERVICE);
    WifiInfo wifiInfo = wifiManager.getConnectionInfo();
    if (wifiInfo != null) {
        Integer linkSpeed = wifiInfo.getLinkSpeed(); //measured using WifiInfo.LINK_SPEED_UNITS
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:57:00.427

在后台下载文件并每秒测量数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:03:11.220

这是我用来测试连接性的完整课程。对于 ping 问题，请参阅我的评论。

```
public class InternetCheck {

    Context mContext;
     public InternetCheck(Context mContext){
           this.mContext = mContext;
      }

    // CHECK FOR INTERNET METHOD
    public final boolean isInternetOn() {
        ConnectivityManager connec = (ConnectivityManager) mContext.getSystemService(Context.CONNECTIVITY_SERVICE);
        // ARE WE CONNECTED TO THE NET
        if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED
                || connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING
                || connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING
                || connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED) {
            return true;
        } else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED
                || connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED) {
            return false;
        }
        return false;
    }

} 
```

# c# - 如何从 Windows 8 应用程序将图像和文本共享到 Facebook？

> ID：10528835
> 
> 赞同：1
> 
> 时间：2012-05-10T06:52:29.337
> 
> 标签：c#, facebook, twitter, windows-8, windows-runtime

我正在构建一个允许将图像和文本共享到 Facebook 和 Twitter 的 Windows 8 应用程序。

谁能告诉我从哪里开始或者最简单的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-01T19:52:13.833

“官方”方式是为页面的 DataTransferManager 的 DataRequested 事件实现一个事件处理程序，并填写 DataPackage 以响应用户单击超级按钮栏的共享按钮。

这将允许您通过 Facebook/Twitter/电子邮件/消息或您已链接到您的人脉中心或任何其他接收共享的应用程序的任何其他方式进行共享。

我在[http://coderwall.com/p/aeihvw有一个简短的指南](http://coderwall.com/p/aeihvw)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T16:18:00.220

最简单的方法是使用共享魅力，用户可以决定使用哪个应用程序来共享数据，但是我知道没有适用于 Windows 8 的 Facebook 或 Twitter 应用程序。您也可以直接使用 API - 那里是开源库，使向这些服务发布内容变得相当简单 - 您只需要获取库，从每个服务提供商申请应用程序 ID 并将其与您的应用程序集成。我不确定这些库是否完全支持 Windows 8，因此您可能需要先更新它们。

关于在 WinRT 中使用 twitter 的示例 twitter 使用文章（注意 - 它基于以前的 Windows 8 开发人员预览版）： [http ://advertboy.wordpress.com/2011/12/04/heres-my-twitter-library-to -get-you-quickly-building-winrt-xaml-net-apps-twitterwinrt/](http://advertboy.wordpress.com/2011/12/04/heres-my-twitter-library-to-get-you-quickly-building-winrt-xaml-net-apps-twitterwinrt/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T22:46:46.613

LINQ to Twitter 支持 WinRT： http: [//linqtotwitter.codeplex.com/](http://linqtotwitter.codeplex.com/)

查看 TweetWithMedia。这是一个例子：

```
static void TweetWithMediaDemo(TwitterContext twitterCtx)
{
    string status = "Testing TweetWithMedia #Linq2Twitter " + DateTime.Now.ToString(CultureInfo.InvariantCulture);
    const bool possiblySensitive = false;
    const decimal latitude = StatusExtensions.NoCoordinate; //37.78215m;
    const decimal longitude = StatusExtensions.NoCoordinate; // -122.40060m;
    const bool displayCoordinates = false;

    const string replaceThisWithYourImageLocation = @"..\..\images\200xColor_2.png";

    var mediaItems =
        new List<Media>
        {
            new Media
            {
                Data = Utilities.GetFileBytes(replaceThisWithYourImageLocation),
                FileName = "200xColor_2.png",
                ContentType = MediaContentType.Png
            }
        };

    Status tweet = twitterCtx.TweetWithMedia(
        status, possiblySensitive, latitude, longitude, 
        null, displayCoordinates, mediaItems, null);

    Console.WriteLine("Media item sent - Tweet Text: " + tweet.Text);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T17:58:37.113

最简单的方法是将电子邮件发送到您唯一的 Facebook 电子邮件地址。在[这里](https://blog.facebook.com/blog.php?post=109768117130)查看更多信息。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-11T16:44:08.270

直到 facebook 和 twitter 推出他们的 win8 应用程序。没有简单的方法可以做到这一点，除非按照您对其他操作系统所做的那样使用 api。

我相信 facebook 应用程序很快就会到货。

我一直认为微软会做一些类似于 windows phone 的事情，即在操作系统中构建 fb 功能。

# java - public static final 和 OSGi 的编译器优化

> ID：10528836
> 
> 赞同：4
> 
> 时间：2012-05-10T06:52:38.420
> 
> 标签：java, osgi, compiler-optimization

我有一个 OSGi 包 b1 导出一个类

```
public static final String MYVAL = "a"; //version 1 
```

第二个包 b2 使用 b1 的版本 1 编译和部署。

稍后我将 b1 中的值更改为

```
public static final String MYVAL = "b"; //version 2 
```

但我只重新编译部署b1，b2不变，没有重新编译。

b2 是否有可能`a`在运行时仍然看到价值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-10T08:00:38.807

引用的静态最终原语或字符串的值直接内联到使用类中。因此，与 OSGI 和任何可见性规则无关，`b2`仍将包含`MYVAL`“a”的嵌入值。

我认为这记录在[Java 语言规范第 13.4 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-13.html#jls-13.4.9)中：

> 如果字段是常量变量（第 4.12.4 节），则删除关键字 final 或更改其值不会因导致它们不运行而破坏与预先存在的二进制文件的兼容性，但**它们不会看到任何新的使用值除非它们被重新编译**。即使用法本身不是编译时常量表达式（第 15.28 节）也是如此。

[This answer to a similar question](https://stackoverflow.com/a/3524336/139595)显示了一种解决方法。更改声明使其不再是常量表达式会禁用此内联行为。

```
public static final String MYVAL = String.valueOf("a"); 
```

# php - 使用 PHP 生成的 CSV 文件的最大行数

> ID：10528837
> 
> 赞同：0
> 
> 时间：2012-05-10T06:52:42.627
> 
> 标签：php, csv

我在我的网站中生成 CSV 的功能有问题。它给了我错误 500。当我检查 apache 错误日志时，没有记录这个问题。在我挖掘代码后，我发现如果 CSV 文件的数据超过 1550 行，就会出现这个错误。

原以为`max_execution_time`php.ini 中的设置太低，但我将其增加到 600 秒后，它仍然无法生成超过 1550 行数据的 CSV 文件。

知道如何解决这个问题吗？有谁知道实际发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T02:20:52.473

另外，请查看[set_time_limit](http://php.net/set_time_limit "设置时间限制")。

需要考虑的一件事是，一些云端主机提供商（例如 RackSpace）在其负载平衡器中实现超时，如果没有流量，它将终止连接（请参阅[Rackspace Connection Timed Out Error](http://www.rackspace.com/knowledge_center/content/connection-timed-out-error)）。

一种可能的解决方法是将数据回显并刷新到客户端以保持连接打开。这可以是您想要的任何内容的简单 HTML 注释。

更推荐的解决方案是将冗长的进程卸载到通过 CRON 作业执行的脚本。那里有很多 PHP 作业守护程序示例。不需要作业守护程序，处理数据库表的简单 PHP 脚本就足以满足较小的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:05:11.317

尝试添加 ini_set('auto_detect_line_endings',TRUE);

还要测试 csv 文件，尝试打开它并重新保存它。

# jsf - Primefaces 文件下载 JavaScript 错误

> ID：10528838
> 
> 赞同：1
> 
> 时间：2012-05-10T06:52:49.677
> 
> 标签：jsf, primefaces, icefaces

我正在尝试使用 Primefaces fileDownload 组件下载文件。不幸的是，它不起作用。我只收到一个 Javascript 错误“[window] 响应不包含 XML 数据”

我将 JSF 2.1.6 与 Primefaces 3.2 一起使用，IceFaces Push 2.0.2 版用于推送数据，一些 Spring Functions 与 Spring 3.1.0 版一起使用。全部在 Tomcat 6.0.33 上运行。

我的 xHtml 代码片段

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core" xmlns:h="http://java.sun.com/jsf/html" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">
<h:body>
 <p:layout> 
   ...
   <p:layoutUnit id="east" ... >
     <h:form id="eForm">
       <p:dataTable ... >
         ...
           <p:row >
             <p:column style="font-weight: bold;">Attach 1:</p:column>
               <p:column>
                 <p:commandLink id="attach1" value="Download" ajax="false" immediate="true">
                      <p:fileDownload value="#{data.file}" />
                    </p:commandLink> 
                  </p:column>
                </p:row>
       </p:dataTable>
     </h:form>
    ...
 </p:layout>
</h:body> 
```

文件下载 Bean

```
@ManagedBean(name = "data")
@RequestScoped
public class FileDownload {

private StreamedContent file;

public FileDownload() {
    InputStream stream = ((ServletContext) FacesContext.getCurrentInstance().getExternalContext().getContext()).getResourceAsStream("/resources/images/phone_speaker_x24.png");
    file = new DefaultStreamedContent(stream, "image/jpg", "downloaded_optimus.jpg");
}

public StreamedContent getFile() {
    return file;
}
} 
```

来自 FireBug 的错误

```
 [window] the response does not contain XML data  bridge...9208334 (Zeile 1217)
 [window] Error [status: emptyResponse code: 200]: An empty response was received from the server. Check server error logs. 
```

Tomcat 日志中没有错误

**编辑**

Icefaces是问题所在。删除所有 Icefaces Libs 下载工作正常。但是没有 IceFaces 就没有 Push 这样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T08:57:39.697

好吧，Primefaces 和 IcePush 并不总是一起工作。从我的项目中删除 IceFaces Push 使下载工作但没有推送。

所以我决定自己编写 Push 并且只使用 Primefaces。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:13:54.060

如果在 getFile 方法中设置断点，文件是否 ==null？

问题可能是您的班级结构不完善

# c# - 如何找到哪个标签页（TabControl）在

> ID：10528842
> 
> 赞同：7
> 
> 时间：2012-05-10T06:53:12.863
> 
> 标签：c#, winforms, tabcontrol

找到打开哪个选项卡的最简单方法是什么。当我单击 tabpage2 或其他一些标签页时，我想显示一些数据。我这样做了，但不是很好的解决方案：

```
private int findTabPage { get; set; }
    private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (tabControl1.SelectedTab == tabPage1)
            findTabPage = 1;
        if (tabControl1.SelectedTab == tabPage2)
            findTabPage = 2;
    } 
```

并用于显示数据：

```
 if (findTabPage == 1)
     { some code here }
 if (findTabPage == 2)
     { some code here } 
```

有没有像这样的其他解决方案？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-10T06:58:07.877

采用

```
tabControl1.SelectedIndex; 
```

这将为您提供选定的选项卡索引，该索引将从 0 开始，直到 1 小于您的选项卡总数

像这样使用它

```
private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
{
    switch(tabControl1.SelectedIndex)
    {
        case 0:
             { some code here }
             break;
        case 1:
             { some code here }
             break;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-19T10:15:43.383

这是一个更好的方法。

```
private int CurrentTabPage { get; set; }
    private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {
        CurrentTabPage = tabControl1.SelectedIndex;
    } 
```

这样每次 tabindex 改变时，我们需要的 CurrentTabPage 就会自动更新。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-10T06:55:14.077

只需使用[`tabControl1.SelectedIndex`](http://msdn.microsoft.com/en-us/library/system.windows.forms.tabcontrol.selectedindex.aspx)：

```
if (tabControl1.SelectedIndex == 0)
    { some code here }
if (tabControl1.SelectedIndex == 1)
    { some code here } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-03-15T22:50:22.437

如果您更喜欢获取一个字符串来标识选定的 tabPage 而不是它的索引：

```
int currentTab = tabControl1.SelectedIndex;
string tabText = tabControl1.TabPages[currentTab].Text; 
```

这将给出您在选择 tabPage 时单击的文本。

```
int currentTab = tabControl1.SelectedIndex;
string tabName = tabControl1.TabPages[currentTab].Name; 
```

这将为您提供 tabPage 的名称。

您可以通过编程方式或在对象属性中选择名称，必须使用不同的名称来标识每个 tabPage。相反，文本字段不是，几个不同的选项卡可以有相同的文本，你必须小心。

# styles - 棱镜中的动态资源

> ID：10528847
> 
> 赞同：1
> 
> 时间：2012-05-10T06:53:25.153
> 
> 标签：styles, prism, generic.xaml

我无法在具有四个模块的 Prism 4.0 应用程序中使用按钮样式。这是 Module2 中 xaml 视图文件中的按钮元素：

```
<Button Name="add" Width ="60" Style="{DynamicResource Red}"  Click="add_Click"> Add</Button> 
```

* * *

应用程序构建并运行，但按钮颜色未出现。我在 Shell Module 的 Themes 文件夹中的 Generic.xaml 文件中定义了样式。这应该是可以放置样式以在模块之间共享的地方。在 Generic.xaml 文件中，我有：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:Shell.Controls" 
    xmlns:wc="clr-namespace:System.Windows.Controls;assembly=PresentationFramework">

 <Style 
   x:Key="{ComponentResourceKey 
    TypeInTargetAssembly={x:Type wc:Button},
    ResourceId=Red}"
    TargetType="wc:Button">
    <Setter Property="Foreground" Value="Red" />
  </Style>
</ResourceDictionary> 
```

* * *

我在 Shell 项目的 Properties 文件夹中的 AssemblyInfo.cs 文件中也有必要的参考。这应该指示 Prism 应用程序从 Prism Generic.xaml 文件中解析所有样式引用：

```
[assembly: ThemeInfo(ResourceDictionaryLocation.None, ResourceDictionaryLocation.SourceAssembly)] 
```

这些仍然是我开始使用的 Prism WPF Unity 模板提供的原始设置，由 David Hill 的博客[[http://blogs.msdn.com/b/dphill/archive/2011/01/16/prism- 4-0-template-pack-now-available.aspx]](http://here)。该模板已经在 Generic.xaml 中附带了一些样式，但裸模板应用程序仅将这些样式用于 Shell 程序集中的控件，因此上面显示了参数“None”和“SourceAssembly”。

由于我试图定义用于除 Shell 模块以外的其他模块的样式，因此我将以下 ThemeInfo 属性添加到 Module1 和 Module2L 的 AssemblyInfo.cs

```
[`assembly: ThemeInfo(ResourceDictionaryLocation.ExternalAssembly, ResourceDictionaryLocation.ExternalAssembly)]` 
```

* * *

我尝试在 App.xaml 中像这样向 App.xaml 添加 ThemeDictionary 扩展，但没有结果。

```
 <Application.Resources>
    <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="{ThemeDictionary MyApp}"/>
    </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
    </Application.Resources> 
```

还在 App.xaml 中尝试了这样的包 url 并得到“无法找到资源”错误。

```
 <Application.Resources>
    <ResourceDictionary>
    <ResourceDictionary.MergedDictionaries>
    <ResourceDictionary Source="pack://application:,,,/MyApp;Shell/Themes/Generic.xaml"/>
    </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
    </Application.Resources> 
```

关于缺少什么的任何想法或想法？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:03:24.457

更新：我通过技术支持从 Microsoft 的 Marc Rodman 那里得到了答案。两个变化：

一个是在 Generic.xaml 中，将样式定义更改为：

```
 <Style
x:Key="Red"
TargetType="Button">
    <Setter Property="Foreground" Value="Red" />
    </Style> 
```

另一个更改是 App.xaml：

```
 <Application.Resources>

    <ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <ResourceDictionary.MergedDictionaries>
     <ResourceDictionary
Source="pack://application:,,,/Shell;component/Themes/Generic.xaml"/>
     </ResourceDictionary.MergedDictionaries>
     </ResourceDictionary>
    </Application.Resources> 
```

# java - 这段代码中的 LinkedHashSet 可以用 HashSet 代替吗？

> ID：10528848
> 
> 赞同：3
> 
> 时间：2012-05-10T06:53:28.213
> 
> 标签：java, data-structures

下面的代码有什么作用？可以`LinkedHashSet`用a代替`HashSet`吗？

```
public class CollectionFunction {
    public <E> List<E> function(List<E> list) {
        return new ArrayList<E>(new LinkedHashSet<E>(list));
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-10T06:57:01.097

> 下面的代码有什么作用？

似乎它用于从列表中删除重复项而不更改顺序

1.  删除重复项（LinkedHashSet 是一个集合）
2.  维护插入顺序（[LinkedHashSet](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)具有可预测的迭代顺序）
3.  转换回列表

> LinkedHashSet 可以用 HashSet 代替吗？

不，它不会保证订单（#2）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:00:27.630

Set 是项目的无序集合，其中列表必须保留所包含项目的顺序。您不能使用集合`HashSet`来实现列表，因为不存储项目的顺序。链接的哈希集存储这些信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:05:34.340

此功能正在删除重复元素并保持插入顺序。

如果您提供`a,b,c,d,a`输入，您将获得`a,b,c,d`输出。

是的你可以

> 如果您不想要插入顺序，请将 LinkedHashSet 替换为 HashSet。

`b,c,d,a`如果将 LinkedhashSet 替换为 HashSet，输出可能是这样的

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-10T06:59:45.807

它从实现 List 接口的对象中创建一个 ArrayList。ArrayList 类有一个采用 Collection 的构造函数： [http](http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html) : //docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html 如果 HashSet 也实现了 Collection [http:// ，则必须查找docs.oracle.com/javase/7/docs/api/java/util/Collection.html](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)。您还必须查找 HashSet 是否提供了相应的构造函数。由于 HashSet 满足这两个要求，您可以替换它:-)。

# javascript - 在嵌入到谷歌地图的图像中添加用户界面

> ID：10528857
> 
> 赞同：0
> 
> 时间：2012-05-10T06:54:36.560
> 
> 标签：javascript, google-maps-api-3, uiimage

我正在尝试将一个简单的图像嵌入到谷歌地图中，​​并使用 OVERLAY 成功地做到了。但问题是嵌入的图像具有不同的组件（例如，如果图像是房子，组件是停车、游泳池等）并且需要在点击时为每个组件添加功能。有没有办法将这些类型的图像嵌入到 GOOGLE MAP 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:08:44.993

我建议您考虑构建 KML 叠加层。这将使您可以将数据作为单个叠加层进行管理，但保留所有功能的交互性。网上有很多教程，但最基本的是您在 Google 地球中构建您的叠加层，在**公共**网站上托管 kml 文件，然后将其添加到您的地图中。

请注意，许多 kml 教程都是针对 v2 API 的。它们仍然适用，除了关于将图层添加到地图的最终代码的部分 - 确保您使用 v3 教程。

v3 地图上的 KML 示例：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/layer-kml](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-kml)

实际 KML 文件： http: [//gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml](http://gmaps-samples.googlecode.com/svn/trunk/ggeoxml/cta.kml)

# php - Paypal 的 ipn_email 来自哪里？

> ID：10528858
> 
> 赞同：0
> 
> 时间：2012-05-10T06:54:37.120
> 
> 标签：php, paypal

在我处理 IPN 的 PHP 代码中，一切正常，除了一行：

```
$email = $_GET['ipn_email']; 
```

这是他们提供的示例代码，以帮助您入门。我假设它会检索与进行计费的 Paypal 帐户管理员相关联的电子邮件地址。

但是，它似乎永远不会被设置。如果我使用上面的代码，我的 IPN 脚本会失败。我的 IPN 脚本工作的唯一方法是，如果我简单地设置`$email`为我选择的某个任意电子邮件地址。

我可以设置自己的电子邮件地址吗？我应该从数据中获得`ipn_email`价值吗？`GET`应该是什么价值`ipn_email`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T06:59:26.363

`$_GET[]`从 url 中的查询字符串中检索变量。因此，要发送您要求用户必须要求的设置

```
host/page.html?ipn_email=an_email_address 
```

如果您不将该格式发送到服务器，则永远不会设置该变量。

不确定您是否使用过本教程，但它解释了使用它的一个原因

[https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNImplementation](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_admin_IPNImplementation)

# visual-studio - Microsoft Visual Studio：使用数据库创建安装程序

> ID：10528861
> 
> 赞同：0
> 
> 时间：2012-05-10T06:54:56.680
> 
> 标签：visual-studio

如何使用数据库提取器在 Visual Studio 中创建安装程序？

# orm - 海量 ORM - 跨多个表的事务

> ID：10528862
> 
> 赞同：4
> 
> 时间：2012-05-10T06:54:56.853
> 
> 标签：orm, transactions, massive

我一直在研究大规模的 ORM。别忘了，只是看看，我还没有做任何编码。

我对保存数据事务的可能性感兴趣。我已经看到可以在一个事务中保存同一张表中的 20 行。但是当我想在单个事务中保存一个订单和它的订单时会发生什么？这可能吗，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T05:03:22.613

Massive 的 Save() 方法声明如下所示：

```
Save(params object[] things) 
```

...在内部，它对传入的每个对象执行一个 foreach 循环，并在单个事务中将其保存到数据库中，因此它已经完成了您希望它执行的操作。

现在，如果您想自己控制交易，那么让我们开始吧。

首先，Massive 中的几乎每个方法都被标记为虚拟的，因此我们可以覆盖派生类中的任何方法，这就是我们要做的。现在所有对 Save() 的调用最终都会通过一个 Execute() 方法，该方法采用 DbCommand 的 IEnumerable，因此我们将在派生类中覆盖该方法。

这是我们的派生类：

```
public class ExtendedDynamicModel : DynamicModel
{
    // Lets add two properties that we will reference in our overridden Execute method
    public System.Data.IDbConnection Connection;
    public System.Data.IDbTransaction Transaction;

    public ExtendedDynamicModel( string connectionStringName, string tableName = "",
                                 string primaryKeyField = "", string descriptorField = "" )
        : base( connectionStringName, tableName, primaryKeyField, descriptorField )
    {
    }

    // Lets override the Execute method and if we've supplied a Connection, then let's
    // using our own custom implementation otherwise use Massive's default implementation.
    public override int Execute( IEnumerable<System.Data.Common.DbCommand> commands )
    {
        if ( Connection == null ) return base.Execute( commands );

        var result = 0;

        foreach ( var cmd in commands as IEnumerable<System.Data.IDbCommand> )
        {
            cmd.Connection = Connection;
            cmd.Transaction = Transaction;
            result += cmd.ExecuteNonQuery();
        }

        return result;
    }
} 
```

所以现在我们只需要将我们自己的 IDbConnection 和 IDbTransaction 提供给我们的新 ExtendedDynamicModel 类，如下所示：

```
var database = new ExtendedDynamicModel( "YourConnectionString" );

using ( var connection = database.Connection = database.OpenConnection() )
{
    using ( var tx = database.Transaction = connection.BeginTransaction() )
    {
        // Do your saving here

        if ( true )
        {
            tx.Commit();
        }
        else
        {
            tx.Rollback();
        }
    }
} 
```

因此，如果需要，现在我们可以完全控制提交或回滚事务。

链接到 Massive 的源代码以供参考：[https ://github.com/robconery/massive/](https://github.com/robconery/massive/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-25T19:20:56.337

我一直在研究这个，这是我使用**Massive 的默认交易的**看法：我正在利用

```
table.Execute(IEnumerable<DbCommands>) 
```

这是一些假设的示例代码

```
private bool BigSave(int id)
{
    var saveList = new List<DbCommand>();

    var tblO = new Order();
    var order = tblO.Single(key: id);  /* get the order record */
    order.OrderDate = DateTime.Today;  /* update order's fields */

    /* more updates if needed */
    saveList.Add(tblO.CreateUpdateCommand(order, id)); /* add Order to command list */

    /* now delete some existing order lines */
    var lines2Delete = "25, 31, 33" // let's assume some comma separated Ids

    var tblL = new OrderLines();

    saveList.Add(tblL.CreateDeleteCommand(string.Format("WHERE Id IN ({0})", lines2Delete)));

    /* now add some new Orderlines */
    /* for this usually I create a List<dynamic> */
    var newLines = new List<dynamic>(); /* add your objects to this list */

    /* now add each of those to the List of Save commands using a foreach loop */
    /* or LINQ:
        saveList.AddRange(newLines.Select(o => tblL.CreateInsertCommand(o).Cast<DbCommand>());
    */
    tblO.Execute(saveList); //boom: save everything in a Transaction!

} 
```

# iphone - 如何在表格视图中显示数组值

> ID：10528870
> 
> 赞同：1
> 
> 时间：2012-05-10T06:55:18.600
> 
> 标签：iphone, objective-c, uitableview

我有从字典值中获取数据的内容数组，现在我需要在表格视图单元格中显示数组内容，但它没有显示正确的数据。

这是源代码

```
for (int i = 0; i < [self.illArray count]; i++)
    {
        NSMutableDictionary *lDict = [self.illArray objectAtIndex:i];
        NSString *lTitle = [lDict objectForKey:@"title"];
        if ([lTitle rangeOfString:@"Symptoms"].length > 0)
        {
            [m_cIllResultArray addObject:lDict];
        }
    }
    for (int i = 0; i < [m_cIllResultArray count]; i++)
    {
        sDict = [m_cIllResultArray objectAtIndex:i];
        NSString *sDetail = [sDict objectForKey:@"SYMPTOMS"];
        [sDict setValue:sDetail forKey:@"details"];

    } 
```

NSLog(@"ARRAY VALUES1:-%@", [sDict valueForKey:@"details"]);

数据格式为：

```
ARRAY VALUES : (
        {
        SYMPTOMS =         (
            "Abdominal pain",
            Constipation,
            Diarrhea,
            "Hard to breathe"
        );
        independentItem = 0;
        module = 117;
        seqCounter = 101;
        sequence = 10010;
        session = 101;
        title = "Low Alert: Symptoms";
    },
        {
        SYMPTOMS =         (
            "Abdominal pain",
            Constipation,
            Diarrhea
        );
        independentItem = 0;
        module = 117;
        seqCounter = 102;
        sequence = 10022;
        session = 101;
        title = "High Alert : Symptoms";
    },
        {
        SYMPTOMS =         (
            "Abdominal pain",
            Dehydration,
            "Elevated temperature (>100 degrees)"
        );
        independentItem = 0;
        module = 117;
        seqCounter = 101;
        sequence = 10040;
        session = 101;
        title = "Low Alert: Symptoms";
    } 
```

我需要在表格视图的内容中显示症状键

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T06:57:04.240

制作一个自定义表格视图单元格并将所有数据放入其中。阅读这些教程以获取更多详细信息

[http://www.galloway.me.uk/tutorials/custom-uitableviewcell/](http://www.galloway.me.uk/tutorials/custom-uitableviewcell/)

[http://www.e-string.com/content/custom-uitableviewcells-interface-builder](http://www.e-string.com/content/custom-uitableviewcells-interface-builder)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:11:24.427

制作自定义表格视图，例如闪烁单元格或您可以使用的任何其他内容，如果可能，制作 plist 并传输数据，您可以更好地重复使用它如果您以这种方式找到任何查询，我会从这种方式获得结果告诉我，我将向您发送演示代码.....希望你能以这种方式得到你的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T08:50:44.887

试试这个..我认为它有效..

```
for (int i = 0; i < [self.illArray count]; i++)
    {
        NSMutableDictionary *lDict = [self.illArray objectAtIndex:i];
        NSString *lTitle = [lDict objectForKey:@"title"];
        if ([lTitle rangeOfString:@"Symptoms"].length > 0)
        {
            [m_cIllResultArray addObject:[sDict objectForKey:@"SYMPTOMS"]];
        }
    }
NSLog(@"ARRAY VALUES1:-%@", m_cIllResultArray); 
```

# objective-c - ShareKit 2.0：如何访问 Flickr 用户名

> ID：10528873
> 
> 赞同：1
> 
> 时间：2012-05-10T06:55:36.610
> 
> 标签：objective-c, flickr, sharekit

我正在使用 ShareKit 2.0 访问 Flickr。登录后，我想知道如何访问用户名。ShareKit 2.0 说它应该像这样工作：

```
NSString* uname = [SHK getAuthValueForKey:@"username" forSharer:@"SHKFlickr"]; 
```

不幸的是，这不起作用，至少对我来说。

有任何想法吗？

更新：

快速而肮脏的解决方案如下：

(1) 在你的项目中创建一个单例对象，并有一个成员变量来存储用户名 (2) 进入类：ShareKit/Sharers/Services/Flickr/SHKFlickr.m (3) 在方法*(void)flickrAPIRequest中： (OFFlickrAPIRequest *)inRequest didCompleteWithResponse:(NSDictionary *)inResponseDictionary*第 291 行，您可以找到存储 flickr 用户名的位置 (4) 将其存储在您的单例对象中，您将可以从所有位置访问它

所以对我来说这已经足够了，但也许你们有更好的解决方案？

斯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:38:31.730

ShareKit 已经为此做好了准备 - SHKShareTypeUserInfo 就是解决方案。不幸的是，它目前仅在 Facebook 和旧的（iOS5 之前）Twitter 中实现。对于 Flickr 和其他 OAuth 服务，需要对其进行编码。如果您决定实施它，打开一个拉取请求会很好......

有关此事的更多信息，请[参阅 ShareKit 的 2.0 Wiki FAQ](https://github.com/ShareKit/ShareKit/wiki/FAQ)

# emacs - Emacs：如何在自动完成模式下使用 RET 完成，而不破坏正常的返回键功能？

> ID：10528875
> 
> 赞同：1
> 
> 时间：2012-05-10T06:55:43.763
> 
> 标签：emacs, autocomplete, elisp

我正在使用自动完成模式。它在许多主要模式下都能正常工作。但我不喜欢使用 TAB 来选择候选人。

用户手册有这个 lisp 示例行，用于使用 RET 选择完成：

```
(define-key ac-mode-map (kbd "RET") 'auto-complete) 
```

这非常适合完成。

但是，现在我可以使用 RET 选择候选人，我不能再使用 RET 插入换行符。

有可能两者都做吗？

理想情况下，我想使用 RET 从完成列表中选择候选人，但是当没有列表出现时，我想正常使用 RET - 插入换行符。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:10:51.447

您不能简单地重新映射 RET 键，因为正如您所说，您会失去默认行为。你必须构建一个函数来检查你是否在一个单词的末尾以进行自动完成，否则做正常的事情：

```
(defun complete-or-newline (arg)
  (if (and
        (or (bobp) (= ?w (char-syntax (char-before))))
        (or (eobp) (not (= ?w (char-syntax (char-after))))))
      (auto-complete)
    (newline-and-indent))) 
```

这个片段是对这篇[文章](http://emacsblog.org/2007/03/12/tab-completion-everywhere/)的修改。

然后您将重新映射 RET 以使用该函数：

```
(define-key ac-mode-map (kbd "RET") 'complete-or-newline) 
```

该解决方案有两个缺点：

*   您不能将参数传递给`auto-complete`. 这可以用 来完成`interactive`，但我不知道它是如何工作的。

*   如果在行尾按 RET，它将尝试运行`auto-complete`而不是插入新行。你必须改善病情，虽然我不知道怎么做。

# excel - 如何在另存为 xlsm 的锁定 Excel 工作表中自动插入格式化样式行或列？

> ID：10528876
> 
> 赞同：1
> 
> 时间：2012-05-10T06:55:45.957
> 
> 标签：excel, vba

使用 vba 插入行或列通常很容易。但是，根据用户输入在锁定的单元格中自动执行它并不容易。我的问题是 **如何在保存为 xlsm 的锁定 Excel 工作表中自动插入格式化样式行或列？**

**解释：**

我有一张名为“Sheet1”的表格是用密码“ABCD”锁定的，用户只能在彩色区域输入数据。但是，有时列表很短，而另一些则很长。自动插入行和列是一个好主意，就像 Visual Studio 中的数据网格一样。

请看图片，如果用户在彩色区域的第 9 行输入任何内容，那么它会自动创建一个格式化样式的第 10 行（用于组件列表 1）。如果用户输入任何内容以清空第 14 行，则它会在组件列表 2 中插入第 15 行。

如果用户在 H 列中输入任何内容，则相同，然后我创建列 I

![在此处输入图像描述](../Images/b8881485d4c08be045e19ebec6325a73.png)

我不知道如何编写语法，但这是我对设计的想法：

我必须为组件列表 1 (Com1)、组件列表 2 (Com2) 和蓝色区域 (Part_quality) 中的区域定义一个名称，以便程序知道哪个区域应该检查用户输入

检查用户输入的数据是否在定义的名称范围内。如果是，请检查用户是否在最后一行和最后一列中输入了任何数据。如果是，则使用存储在内存中的预定密码解锁文件，插入行/列，然后将其锁定

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:28:26.183

[在此处输入链接描述](https://stackoverflow.com/questions/10593346/how-to-detect-if-the-cell-being-edited-belongs-to-the-last-row-of-a-defined-name)

这是你正在尝试的吗？

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    Dim MRange As Range, rng As Range

    On Error GoTo Whoa

    Set MRange = Range("InputRange")

    '~~> Get the last Row of the range
    Set rng = MRange.Range(MRange.Cells(MRange.Rows.Count, 1), _
    MRange.Cells(MRange.Rows.Count, MRange.Columns.Count))

    '~~> Trap changes in the last row of the range
    If Not Intersect(Target, rng) Is Nothing Then
        'If Application.WorksheetFunction.CountA(rng) > 0 Then
            'Application.EnableEvents = False

            'rng.Insert Shift:=xlDown, CopyOrigin:=xlFormatFromLeftOrAbove
        'End If
    End If

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

代码由 Siddharth Rout 创建

# apache - 需要在 Apache 中静默重写 URL

> ID：10528883
> 
> 赞同：0
> 
> 时间：2012-05-10T06:56:18.837
> 
> 标签：apache, mod-rewrite, url-rewriting, friendly-url

我在apache后面运行tomcat。现在我需要通过从 URL 中删除参数名称来应用友好的 url。我想要

```
http://<domainname>/<APPLICATION>/QWERTY 
```

这些内部应该作为

```
http://<domainname>/<APPLICATION>/vid=QWERTY 
```

所以在tomcat中我可以得到vid的值并相应地处理请求

为此我尝试过，

```
<IfModule rewrite_module>
 RewriteEngine On    
   RewriteCond %{QUERY_STRING} !vid=(.*)$ [NC] 
   RewriteCond %{REQUEST_URI} !/assets/$ [NC]   
   RewriteRule ^/APPLICATION/(.*)$ /APPLICATION/?vid=$1 [R=301,L]    
</IfModule> 
```

通过应用此应用程序，当我给出`http://<domainname>/<APPLICATION>/QWERTY`但在浏览器 URL 栏中，URL 更改为`http://<domainname>/<APPLICATION>/vid=QWERTY`

我也需要`http://<domainname>/<APPLICATION>/QWERTY`在浏览器地址中。

**更新：** 通过“Jacek_FH”的回答，我已经更新了我的规则 [已删除`R=301`]

```
 RewriteCond %{QUERY_STRING} !vid= [NC] 
   RewriteCond %{REQUEST_URI} !/assets/ [NC]   
   RewriteRule ^/APPLICATION/(.*)$ /APPLICATION/?vid=$1 [L] 
```

未找到其提供的资源异常（404）

所以为了测试我已经将我的友好网址更改为`http://<domainname>/<APPLICATION>/u=QWERTY`并尝试 了

```
 RewriteRule ^/APPLICATION/u=(.*)$ /APPLICATION/?vid=$1 [L] 
```

但这也会导致tomcat中的404。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-16T01:25:12.320

如果您想要静默重写（地址栏中的 URL 不变），您需要使用[[P] 标志](https://httpd.apache.org/docs/current/rewrite/flags.html#flag_p)，而不是 [R=301,L]。

基本上，请求被交给代理服务器，所以客户端永远不会看到任何变化。

您不希望客户端，尤其是搜索引擎机器人进行永久重定向，因此您不希望 [R=301]。

[P] 标志包含一个隐含的[[L] 标志](https://httpd.apache.org/docs/current/rewrite/flags.html#flag_l)（最后一个命令），因此您要确保它们出现在任何以下：

*   失败的重写，比如删除 www.，是作为永久重定向完成的，带有 [R=301] 标志，但没有 [L]。

*   禁止的[[F] 标志](https://httpd.apache.org/docs/current/rewrite/flags.html#flag_f)重写，如图像出血保护，在这些之前完成，因为它还包含一个隐含的 [L]。

*如apache*文档中的 [P] 标志描述中所述，使您的*RewriteCond*语句的正则表达式具体说明处理的输入，并明确指定目标 URL，以便恶意或错误的用户输入不会创建不正确的 url。

请注意，[P] 标志防止连接池（使用默认工作线程），因此没有持久连接，可能会降低性能。

请注意，这似乎不适用于 https 站点，因此必须使用 [L] 标志而不是 [P] 标志，并且没有静默重定向。无赖！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:21:14.100

`R=301`在将浏览器移动到新地址时删除

你可以简化：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} !vid=
RewriteCond %{REQUEST_URI} !/assets/
RewriteRule ^/APPLICATION/(.*)$ APPLICATION/?vid=$1 [L] 
```

如果没有`/`正确的部分，htaccess 流将不会重新启动

`assets`部分只需要`/APPLICATION/assets/`，而不仅仅是`/assets/`，我已经`$`从最后删除了，因为它限制了对普通目录调用的匹配

# javascript - 如何获取所选标签的 URL

> ID：10528895
> 
> 赞同：3
> 
> 时间：2012-05-10T06:57:14.000
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-tabs, jquery-tabs

我想在 Jquery 默认选项卡中动态应用数据，但是如何获取选定的选项卡

HTML：

```
<!DOCTYPE html>
<html>
<head>
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js">         </script>
 </head>
<body style="font-size:62.5%;">

<div id="tabs">
   <ul>
</ul>
</div>
<input type='button' id='addTab' value='Add Tab'>
<input type='button' id='appendText' value='Add Text in Tab'>

</body>
</html> 
```

JS：

```
 $(document).ready(function() {
$("#tabs").tabs({
    tabTemplate: "<li><a href='#{href}'>#{label}</a> <p title='close' id='removeTab' style='cursor:pointer;display:inline'>x</p></li>"
    });
 });

$(function() {
var index = 0;
$("#addTab").live('click', function() {
    index++;
    var title = 'Tab.....  ' + index;
    var url = '#fragment-' + index;

    addTab(url, title, index);

});

function addTab(url, title, index) {

    $('#tabs').tabs("add", url, title, [index]);
}
$('#removeTab').live('click', function() {
selected = $('p[id=removeTab]').index(this);
    $('#tabs').tabs("remove", [selected]);
});

 $('#appendText').live('click', function() {
    //fragment-1 is hardcoded I want to get the url of tab by clicking on it...  
    $('#fragment-1').append("Bla Bla!!!");
});

}); 
```

JS 小提琴[http://jsfiddle.net/k44Wk/2/](http://jsfiddle.net/k44Wk/2/) ​ ​</p>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:12:00.747

使用以下代码附加文本：

```
$(".ui-tabs-panel").not(".ui-tabs-hide").append("Bla Bla!!!"); 
```

这是JSFiddle链接..

[http://jsfiddle.net/k44Wk/4/](http://jsfiddle.net/k44Wk/4/)

如果要在 Tab Head 中添加文本：

```
$(".ui-tabs-selected").append("Bla Bla!!!"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:04:49.547

您可以使用...获取所选选项卡的索引

```
var selected = $tabs.tabs('option', 'selected'); // selected tab index integer 
```

...并将其映射到相应的 HTML 元素。

或者，您可以在选定选项卡上添加/删除您自己的自定义类，并通过该类选择它

```
var url = $('.mySelectedTab').child('a').attr('href'); 
```

**编辑**：实际上 jQuery 可能会在选定的选项卡上添加自己的类。它只是没有在任何地方清楚地记录下来。尝试检查浏览器上的元素以找到该类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T07:10:09.420

当您单击一个选项卡时，“ui-state-active”类将应用于它，而同一类将从先前活动的选项卡中删除。知道了这一点，您可以在 CSS 选择器中使用这个类来添加内容。

或者，您也可以使用“ui-tabs-selected”类。

**jQuery 选项卡 HTML：**

```
<!-- Tab1: See "ui-state-active" at the end of the class list -->
<li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active"><a href="#fragment-1">Tab.....  1</a> <p title="close" id="removeTab" style="cursor:pointer;display:inline">x</p></li>

<!-- Tab2: ui-state-active won't appear here until you click the 2nd tab -->
<li class="ui-state-default ui-corner-top"><a href="#fragment-2">Tab.....  2</a> <p title="close" id="removeTab" style="cursor:pointer;display:inline">x</p></li> 
```

**JavaScript：**

```
// get selected tab, either #fragment-1, #fragment-2, or #fragment-3
var id = $('#tabs').find('.ui-state-active).find("a").attr("href"); 

// now use that id to get a reference to the selected body
$('div'+id).append("Bla!!"); 
```

当然，很可能有一个 API 可以更轻松地访问这些信息。但是，这是一种更底层的方法，可以帮助您了解 jQuery 选项卡的工作原理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T07:04:48.063

尝试类似：

```
$('#tabs li').click(function(){
   console.log($(this).children('a').attr('href'));
}); 
```

刚打字没测试

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-10T07:33:10.343

我不知道您是要获取选定选项卡的 url 还是在选定选项卡的面板中附加文本。
如果您想从选定的选项卡中获取 url，则要查找的是名为：ui-tabs-selected 的 jQueryUI 选项卡类。
但是，如果您想将文本附加到选定的选项卡面板，则要查找的类是“ui-tab-hide”（或者不查找）。下面是第二个选项的代码。[http://jsfiddle.net/gP3YZ/](http://jsfiddle.net/gP3YZ/)

```
$('#appendText').live('click', function() {
//iterate through all tab panels.
    $('#tabs .ui-tabs-panel').each(function(index) {
         //check if the tab is not hidden, i.e. disregard all hidden tabs.
         if(!($(this).hasClass('ui-tabs-hide'))){
             //do the dew!
             $(this).append("Bla Bla!!!");
             return;
         }
    });
}); 
```

# javascript - Twitter Bootstrap Carousel 的 CSS 后备？

> ID：10528897
> 
> 赞同：2
> 
> 时间：2012-05-10T06:57:22.213
> 
> 标签：javascript, css, twitter-bootstrap

我知道这听起来很傻，但是有谁知道如何为禁用 JavaScript 的浏览器实现[Twitter Bootstrap Carousel](http://twitter.github.com/bootstrap/javascript.html#carousel)的 CSS 回退（或者以防必要的 JavaScript 文件无法正确加载）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:07:49.237

我发现这个页面至少有一个[自动旋转的 CSS carousel](http://csswizardry.com/2011/10/fully-fluid-responsive-css-carousel/)。然而，考虑到即使这需要 CSS3，我只是假设这种情况会非常有限......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-22T12:40:49.333

检查[GitHubGist - barryvdh / carousel.js](https://gist.github.com/barryvdh/6155151)

> Bootstrap Carousel，带有用于 Internet Explorer 的 jQuery 后备（具有滑动图像）

# android - 同步联系人的最佳方式

> ID：10528898
> 
> 赞同：4
> 
> 时间：2012-05-10T06:57:27.977
> 
> 标签：android, synchronization, contacts

我正在开发一个 Android 应用程序。在这个应用程序中，我必须将联系人与“Android 联系人”同步。

我读了一些关于这个主题的复杂文章。例如：

[http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-2/](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-2/)

这是同步联系人的一个很好的例子，但我不认为为此创建一个新帐户。所以决定手动同步联系人并再次搜索。我找到了 ContentObserver。

[如何监听联系人数据库的变化](https://stackoverflow.com/questions/1401280/how-to-listen-for-changes-in-contact-database)

我的问题是：

```
public class DenemeObserverActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Log.d("MyTag", "OnCreate---");
    //this.getApplicationContext().getContentResolver().registerContentObserver (ContactsContract.Contacts.CONTENT_URI, true, contentObserver);

    Cursor cursor = managedQuery(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
    cursor.setNotificationUri(this.getApplicationContext().getContentResolver(), ContactsContract.Contacts.CONTENT_URI);
    this.getApplicationContext().getContentResolver().notifyChange(ContactsContract.Contacts.CONTENT_URI, null);
    cursor.registerContentObserver(contentObserver);

}

private class MyContentObserver extends ContentObserver {

    public MyContentObserver() {
        super(null);
    }

    @Override
    public boolean deliverSelfNotifications() {
        Log.d("MyTag", "DeliverSelfNotifications---");
        return true;
        }

    @Override
    public void onChange(boolean selfChange) {
        super.onChange(selfChange);
        Log.d("MyTag", "onChanges---");
    }

}

MyContentObserver contentObserver = new MyContentObserver(); 
```

在这段代码中，如果我删除这些行：

```
Cursor cursor = managedQuery(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
cursor.setNotificationUri(this.getApplicationContext().getContentResolver(), ContactsContract.Contacts.CONTENT_URI);
this.getApplicationContext().getContentResolver().notifyChange(ContactsContract.Contacts.CONTENT_URI, null);
cursor.registerContentObserver(contentObserver); 
```

并取消标记： //this.getApplicationContext().getContentResolver().registerContentObserver (ContactsContract.Contacts.CONTENT_URI, true, contentObserver);

我可以处理更改联系人更改。但 Android 只是调用 onChange 方法。

如果在联系人更改时尝试使用此代码（带光标），我看不到对 onChange() 的任何调用。

如何处理“更改了哪一行？”。

或者

我可以在没有新帐户的情况下使用 AbstractThreadedSyncAdapter 同步联系人吗？如果可以，如何？

# core-data - 核心数据和 UIManagedDocument：无法合并具有两个不同实体的模型

> ID：10528900
> 
> 赞同：1
> 
> 时间：2012-05-10T06:57:43.087
> 
> 标签：core-data, uimanageddocument

**编辑**

我在这里转发了这个：[Xcode 4.3 中的核心数据和 UIManagedDocument：无法合并模型](https://stackoverflow.com/questions/10545613/core-data-uimanageddocument-in-xcode-4-3-cant-merge-models)

我设法得到一个不同的错误来显示。

**编辑结束**

所以我正在制作一个使用共享的核心数据应用程序`UIManagedDocument`。我`UIManagedDocument`使用辅助类访问它`DocumentHandler`。希望我能够在另一个班级中像这样使用它`viewWillAppear`：

```
if (!self.document) {
        [[DocumentHandler sharedDocumentHandler] performWithDocument:^(UIManagedDocument *document) {
            self.document = document;            
            [self setupFetchedResultsController];
        }]; 
    } 
```

`

```
- (id)init {
    self = [super init];
    if (self) {
        NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSLibraryDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"MyJimDocument"];

        self.document = [[UIManagedDocument alloc] initWithFileURL:url];

        // Set our document up for automatic migrations
        NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                                 [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                 [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption, nil];
        self.document.persistentStoreOptions = options;

        // Register for notifications
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(objectsDidChange:)
                                                     name:NSManagedObjectContextObjectsDidChangeNotification
                                                   object:self.document.managedObjectContext];

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(contextDidSave:)
                                                     name:NSManagedObjectContextDidSaveNotification
                                                   object:self.document.managedObjectContext];
    }
    return self;
}

- (void)performWithDocument:(OnDocumentReady)onDocumentReady {    
    void (^OnDocumentDidLoad)(BOOL) = ^(BOOL success) {
        onDocumentReady(self.document);
    };

    if (![[NSFileManager defaultManager] fileExistsAtPath:[self.document.fileURL path]]) {
        [self.document saveToURL:self.document.fileURL
                forSaveOperation:UIDocumentSaveForCreating
               completionHandler:OnDocumentDidLoad];
    } else if (self.document.documentState == UIDocumentStateClosed) {
        [self.document openWithCompletionHandler:OnDocumentDidLoad];
    } else if (self.document.documentState == UIDocumentStateNormal) {
        OnDocumentDidLoad(YES);
    }
} 
```

'

使用文档中的上下文，我创建了 NSManagedObjects（标准核心数据，对吧？）。问题是我在运行应用程序时收到此错误：

“无法合并具有两个不同实体的模型”

我对这个 DocumentHandler 感到头疼，我希望这是一个简单的解决方法，我太愚蠢/没有经验，看不到。

我没有制作单独版本的数据模型或任何东西，我也没有尝试迁移任何东西。我只想第一次运行这个应用程序！

谢谢阅读。

# java - J2ME：阻止来电

> ID：10528901
> 
> 赞同：4
> 
> 时间：2012-05-10T06:57:49.190
> 
> 标签：java, java-me

我在 J2ME 中工作，想制作一个应用程序来阻止来自某些特定号码的来电。这是否可以使用 J2ME 中的编程来阻止某些数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T11:13:28.340

不，在 J2ME 中绝对没有办法做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-23T08:51:13.870

取决于你的平台。一些制造商为 ME 提供用于 AT 命令接口的专有类。

通过 AT 命令界面，您可以使用[CLIP](http://en.wikipedia.org/wiki/Caller_ID)功能。当有人来电时，软件可以从`+CLIP`URC 检查电话号码。并专门接听或挂断来电。

这当然不会阻止呼叫，但会阻止应答。

# android - 我可以使用自定义适配器在自动完成文本视图中设置值吗？

> ID：10528903
> 
> 赞同：0
> 
> 时间：2012-05-10T06:57:54.427
> 
> 标签：android, primary-key, autocompletetextview, custom-adapter

我正在使用 a`AutoCompleteTextView`并且“AutoCompleteTextView”的值不是硬编码的。

使用类似于搜索引擎建议的网络服务从网络数据库中动态检索这些值。

对于我`AsyncTask`在 Android 中使用的异步检索过程。

现在工作正常。

我需要获取用户选择的特定建议的 id，我们可以使用一些侦听器来识别点击，但我可以获得选定的项目而不是选定的 id。

所以我试图使用自定义适配器，但它似乎不受支持，现在正在使用`SimpleAdapter`自动完成文本视图常见的。

是否有任何其他解决方案来获取所选项目的 id。

提前致谢。

# 3d - 当前哪个 WebGL 库支持大多数 3D 模型格式（以及哪些）？

> ID：10528917
> 
> 赞同：0
> 
> 时间：2012-05-10T06:58:59.827
> 
> 标签：3d, webgl, javascript, 3d-model

搜索了一段时间，但不知道当前哪个 WebGL 解决方案支持最多的 3d 格式。我还需要知道它们支持哪些 3d 格式。

这些信息是否有更新的比较或表格？

像copperlicht之类的东西？替代？

我们想直接使用本机格式，因此始终无法手动将它们转换为 json

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-15T21:04:14.137

似乎 Three.js 是你的选择，它支持：原生 json、obj、fbx、gltf、collada、babylon、stl、ply、vrml 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:08:14.903

认为最好的不是“选择支持大多数格式的解决方案”。

最好选择支持最常用、可读、可编辑和成熟格式（.dae 和 .x3d）的解决方案

我们现在对 .x3d 使用[x3dom](https://github.com/mrdoob/three.js) [，](https://github.com/x3dom/x3dom)对.dae 和 .obj使用 three.js，对[.stl](https://github.com/tbuser/thingiview.js)使用thingiview

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T06:26:23.783

大多数（如果不是全部？）引擎都有自己的 JSON 格式，您使用离线转换器将数据转换为引擎格式。如果您喜欢对多种格式的支持，我建议您使用 J3D，因为它使用 Unity 3D 作为“转换器”。Unity 可以导入各种格式，因此 J3D 支持这些格式。

[https://github.com/drojdjou/J3D](https://github.com/drojdjou/J3D)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-15T15:11:30.703

我已经开始使用 3d 技术进行一些网络实验，我强烈建议使用 .obj 或 .fbx 文件，并使用 p5.js 和/或 three.js。无论如何，有不止一种方法可以让它工作。 [https://p5js.org/reference/#/p5/model](https://p5js.org/reference/#/p5/model)

# jpa-2.0 - Spring data JPA - 向所有存储库添加自定义行为

> ID：10528918
> 
> 赞同：2
> 
> 时间：2012-05-10T06:59:02.430
> 
> 标签：jpa-2.0, spring-data, spring-data-jpa

是否有人成功实现了向Spring 数据[的所有存储库添加自定义行为？](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.custom-behaviour-for-all-repositories)我无法弄清楚完整的细节，并且[文档和实现似乎存在一些差异](https://jira.springsource.org/browse/DATACMNS-159)。有问题需要纠正吗？请分享您关于如何实现 JpaRepositoryFactoryBean 和 CustomizedRepository 实现的经验和细节。

非常感谢所有输入，
RJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T01:56:57.120

我有一篇关于如何自定义 Spring Data Jpa 存储库的详细帖子。您可以遵循示例代码并将自定义行为应用于所有存储库。

[http://borislam.blogspot.hk/2012/07/customizing-spring-data-jpa-repository.html](http://borislam.blogspot.hk/2012/07/customizing-spring-data-jpa-repository.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T10:34:45.440

这些故障已按照您链接的票证中的记录进行修复。实际提交在[这里](https://github.com/SpringSource/spring-data-commons/commit/a0bec0fce04af8c798aa269e61eafaa63541601c)。它已经在 Spring Data Commons 1.3.0.RC2 中发布，因此如果您签出该标签并且确实`mvn docbkx:generate-pdf`应该得到正确的 PDF 文档部分呈现。由于这个来自 Spring Data Commons 的文档片段被提取到 Spring Data JPA 的文档中，它将自动成为下一个版本的一部分。

实际上，相关代码片段已经成为 Spring Data MongoDB 的最新里程碑版本，因此您也可以在[此处](http://static.springsource.org/spring-data/data-mongodb/docs/1.1.0.M1/reference/html/#repositories)查找。

# glassfish-3 - Glassfish JMX 接口

> ID：10528919
> 
> 赞同：1
> 
> 时间：2012-05-10T06:59:13.337
> 
> 标签：glassfish-3, jmx

我可以通过 jconsole 连接 glassfish 3.1 JMX 接口。我想知道如何检查指定集群中每个实例的正常运行时间。我可以通过 JMX 使用以下对象名和操作对了解它们的状态和 ip

amx:pp=/domain/servers,type=server,name=instanceMaster->isRunning() amx:pp=/domain/servers,type=server,name=instanceMaster->getAdminHost()

每个实例的正常运行时间值可以通过 restfull 接口捕获。 [http://47.168.96.31:4848/management/domain/clusters/cluster/cluster1/list-instances](http://47.168.96.31:4848/management/domain/clusters/cluster/cluster1/list-instances)

提前感谢ins

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:41:32.413

mmc18 无法使用 JMX 连接到集群节点的原因是因为 3.1.2 中存在一个错误，阻止通过 JMX 远程访问实例。[http://java.net/jira/browse/GLASSFISH-18450](http://java.net/jira/browse/GLASSFISH-18450)此错误已修复，但仅在 glassfish 4 中，但是，有人将修复移植到 3.1.2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T12:04:58.657

You can determine the uptime of a JVM by interrogating the [RuntimeMXBean](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/RuntimeMXBean.html). It exposes an attribute called [Uptime](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/RuntimeMXBean.html#getUptime%28%29) which is the number of milliseconds since the JVM started. The ObjectName of the RuntimeMXBean is the constant [java.lang.management.ManagementFactory.RUNTIME_MXBEAN_NAME.](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/management/ManagementFactory.html#RUNTIME_MXBEAN_NAME)

# iphone - 如何匹配iphone中打印字符串的两个日期值

> ID：10528921
> 
> 赞同：0
> 
> 时间：2012-05-10T06:59:21.027
> 
> 标签：iphone, objective-c

我正在从数据库表中获取日期。我从数据库中获取到期日期，直到这里一切正常现在我必须将此到期日期与当前日期进行比较，如果当前日期大于或等于来自数据库的到期日期然后我想打印字符串单元格为“到期”

我尝试了很多，但我的问题是字符串值显示了一些 ware 而他们没有显示一些 ware 我的代码中的错误是什么。

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"dd/MM/yyyy"];

    NSString* duedate = [dateFormat stringFromDate:taskobject.DueDate];

    NSDate *currentdate;
    currentdate=[NSDate date];
    //NSDateFormatter *dateFormat1 = [[NSDateFormatter alloc] init];
    //[dateFormat1 setDateFormat:@"dd/MM/yyyy"];
    NSString* duedate1 = [dateFormat stringFromDate:currentdate];

    if ([currentdate compare:taskobject.DueDate]!=NSOrderedDescending) {
        DateLable.text=@"Due";
        DateLable.textColor=[UIColor redColor];
    }
    else{
        DateLable.text=duedate;
        DateLable.textColor=[UIColor blackColor];
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:04:48.503

```
NSComparisonResult result = [currentdate compare: duedate];
if( result == NSOrderedDescending || result==NSOrderedSame) {
    // true when the dates are the same or the currentdate is later
} else {
   // true when the currentdate is earlier
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:01:06.520

这比较了两个日期并告诉两个日期是否有 24 小时的差异， timeIntervalSinceDate:lastLoadDate 发送秒数差异。

```
double interval = [[NSDate date] timeIntervalSinceDate:lastLoadDate];
    if (interval > 86400 || interval < -86400 ) {
        return YES;   
    }
    else
    {
        enableButtons = YES;
        return NO;

    } 
```

在你的情况下，它将是

```
double interval = [dueDate timeIntervalSinceDate:currentDate];

if (interva >=0)
{   
    DateLable.text=@"Due";
    DateLable.textColor=[UIColor redColor];
}
else
{
    DateLable.text=duedate;
    DateLable.textColor=[UIColor blackColor];
} 
```

# c - 将指向 void* 的指针传递给 pthread_join 的目的是什么？

> ID：10528931
> 
> 赞同：1
> 
> 时间：2012-05-10T06:59:57.010
> 
> 标签：c, pthreads

```
pthread_t single_thread ;
pthread_create (&single_thread , NULL , &mywriter , 0) ;
void * ignore ;
pthread_join (single_thread , &ignore) ; 
```

我上面有这段代码，定义 void* 忽略并加入它的目的是什么？使用它时出现分段错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:27:56.777

第二个参数的重点是从线程中获取返回参数。

类似于退出代码的东西。但由于这也可能是您要返回的对象的地址，`void**`因此您可以修改`void*`. 如果您查看签名，它实际上是`void**`函数所期望的并且您正在传递给它。

如果你不需要它，我认为是你的情况。刚过`null`

> 从带有非 NULL value_ptr 参数的成功 pthread_join() 调用返回时，终止线程传递给 pthread_exit() 的值在 value_ptr 引用的位置可用。

人：[pthread_join](http://pubs.opengroup.org/onlinepubs/7908799/xsh/pthread_join.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:05:55.817

好吧 pthread_join 的目的是将“创建的线程”“加入”调用者线程......这确保您的线程确实在进程从 main 中的右括号脱落之前运行......

例如：

```
//code
#include <stdio.h>
#include <pthread.h>
void *func(void *arg)
{
printf ("inside the thread %d\n",pthread_self());
return NULL;
}

int main (void)
{
pthread_t tid;

pthread_create (&tid,NULLm func,NULL);

pthread_join (tid,NULL);

return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:09:19.327

的主要目的`pthread_join`是使调用线程与被调用线程**同步。**调用线程被挂起，直到被调用线程退出。

例如，您`pthread_create`从 main 函数调用并创建线程。如果您不等待线程退出，则您的主函数/进程将退出，从而将创建的线程连同它一起杀死，而不管它是否完成了它的工作。

同样如评论中所述，您可以将 a`NULL`作为第二个参数传递给`pthread_join`. 使用未初始化的指针通常会导致分段错误。`ignore`另外，我很好奇，您是如何使用（取消引用）`void`指针的？可能你被铸造了？

# android - 在 Android 上为 OpenCV 库构建 Java 原生接口时出错

> ID：10528933
> 
> 赞同：1
> 
> 时间：2012-05-10T07:00:25.043
> 
> 标签：android, opencv, java-native-interface

我是 Android 上的 OpenCV 新手。现在，我正在尝试在我的 MacOSX 上配置它。

我遵循这些说明： http: [//www.stanford.edu/class/ee368/Android/Tutorial-2-OpenCV-for-Android-Setup-Macintosh.pdf](http://www.stanford.edu/class/ee368/Android/Tutorial-2-OpenCV-for-Android-Setup-Macintosh.pdf)

当我使用此命令到达此步骤（将 JNI 构建到 OpenCV 库）时：

```
sh ./project_create.sh 
```

控制台显示此错误报告。

```
Error: The project either has no target set or the target is invalid.
Please provide a --target to the 'android update' command. 
```

如何设置目标。它是否与 local.env.mk 文件有关。如果是这样，这就是里面的内容：

```
#location of android-opencv.mk file that was generated by the cmake build
#of opencv for android
OPENCV_CONFIG=../build/android-opencv.mk

#the root directory of the crystax r4 ndk - ndk-build should be in this dir
#you can download the ndk from http://www.crystax.net/android/ndk-r4.php
#ANDROID_NDK_ROOT=$(HOME)/android-ndk-r4-crystax
ANDROID_NDK_ROOT=/Users/farissyariati/android-ndk-r4-crystax/
#define only armeabi-v7a to make the final apk smaller or armeabi
ARM_TARGETS="armeabi armeabi-v7a" 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:41:21.567

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T07:34:05.403

当前目标平台数量取决于下载的 SDK 数量。请执行以下命令以确保您设置了正确的目标平台：

```
android list target 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T14:58:57.330

我用了这个命令

```
->$Android list target:
id: 1 or "android-21"
     Name: Android 5.0
     Type: Platform
     API level: 21
     Revision: 1
     Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in
 Tag/ABIs : android-tv/armeabi-v7a, android-tv/x86, default/armeabi-v7a, default/x86, default/x86_64 
```

我已经在命令“”上设置了这个选项，`android update project -t 1 -p . -s`直到这里一切都好，但是当我执行 ./setup_env.sh 时，我遇到了同样的问题：错误：项目要么没有目标集，要么目标无效。请提供`a --target to the 'android update`'命令。

某人，请o/

# c# - 使用存储在 SQL 会话数据库中的对象时重新编译后的 CastException

> ID：10528941
> 
> 赞同：1
> 
> 时间：2012-05-10T07:00:47.267
> 
> 标签：c#, asp.net, session

为了在重新编译后维护会话，我使用 SQLServer 来存储会话状态。只要我不存储自定义对象，这就会很好地工作。当在会话中存储的重新编译后尝试使用自定义对象时，我收到以下错误：

```
[A]MyObject cannot be cast to [B]MyObject. 
Type A originates from 'App_Code.9qazkuv_, Version=1.3.0.0, Culture=neutral, PublicKeyToken=null' 
    in the context 'Default' at location 
    'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files
        \root\26676eb7\92c7e946\App_Code.9qazkuv_.dll'. 
Type B originates from 'App_Code.jndyusrx, Version=1.3.0.0, Culture=neutral, PublicKeyToken=null' 
    in the context 'Default' at location 
    'C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files
        \root\26676eb7\92c7e946\App_Code.jndyusrx.dll'. 
```

几个月来我一直在努力解决这个错误，到目前为止我发现的唯一解决方案是将对象放入 dll 文件中。在某些情况下，这并不容易做到。必须有一个更简单的方法来解决这个问题。有什么建议么？

同样奇怪的是，该错误不容易重现。我试图将我的站点复制到测试环境以解决该问题，但我无法在同一服务器上的测试环境中重现该错误。而在本地主机上，问题完全没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:32:07.070

问题是，会话状态类使用 BinaryFormatter 序列化您的对象，从而存储版本和类程序集名称。您最好围绕会话状态类编写一个包装器，该类接受您的对象，自己序列化它 - 如 JSON 或 XML - 并将结果作为字符串添加到您的状态。

# asp.net - 使用支持 2 路绑定的 ITemplate 字段创建 DataBound UserControl，即 <%# Bind() %>

> ID：10528942
> 
> 赞同：0
> 
> 时间：2012-05-10T07:00:49.670
> 
> 标签：asp.net, data-binding, user-controls, formview, itemplate

是我一个人还是2路数据绑定的材料严重短缺？

无论如何，我的问题是，我创建了一个要放置在 FormView.InsertItemTemplate 中的 UserControl。

我的 UserControl 本身有一个 ITemplate 字段。基本上这个想法是，在我的表单中，我有 5 个对所有表单都通用的控件，另一个部分可以根据表单进行自定义。

我的标记看起来像这样：

```
<irt:FormView ID="FormViewInsertEvent" DefaultMode="Insert" runat="server"
    DataKeyNames="EVENT_ID" DataSourceID="DataSourceEvents">
    <InsertItemTemplate>
        <irt:EventControl ID="EventControlInsertEvent" runat="server" DataSourceID="DataSourceDataModemEvents"                
            EventDate='<%# Bind("EVENT_DATE") %>'
            EventTypes='<%# Bind("EVENT_TYPE") %>'>  
            <CustomContent>
                 Additional Property: 
                 <asp:TextBox ID="AdditionalTextBox" runat="server" Text='<%# Bind("ADDITIONAL_PROPERTY") %>'  />                            
            </CustomContent>
        </irt:EventControl>
    </InsertItemTemplate>
</irt:FormView> 
```

我觉得理论上一切都是正确的。但我得到一个 ASP.NET 运行时编译错误@line 4637：

```
Compiler Error Message: CS0128: A local variable named 'AdditionalTextBox' is already defined in this scope

Source Error:

Line 4635:            #line default
Line 4636:            #line hidden
Line 4637:            System.Web.UI.WebControls.TextBox AdditionalTextBox;
Line 4638:            
Line 4639:            #line 378 "C:\MyProj\trunk\Releases\Source\FilePathSensored.aspx" 
```

这一行的代码是这样的：

```
Line 4620:         [System.Diagnostics.DebuggerNonUserCodeAttribute()]
Line 4621:         public System.Collections.Specialized.IOrderedDictionary @__ExtractValues__control84(System.Web.UI.Control @__container) {

...
Line 4628:             #line default
Line 4629:             #line hidden
Line 4630:             System.Web.UI.WebControls.TextBox AdditionalTextBox;
Line 4631:             
Line 4632:             #line 378 "C:\MyProj\trunk\Releases\Source\FilePathSensored.aspx"
Line 4633:             AdditionalTextBox = ((System.Web.UI.WebControls.TextBox)(@__container.FindControl("AdditionalTextBox")));
Line 4634:             
Line 4635:             #line default
Line 4636:             #line hidden
Line 4637:             System.Web.UI.WebControls.TextBox AdditionalTextBox;
Line 4638:             
Line 4639:             #line 378 "C:\MyProj\trunk\Releases\Source\FilePathSensored.aspx"
Line 4640:             AdditionalTextBox = ((System.Web.UI.WebControls.TextBox)(@__container.FindControl("AdditionalTextBox")));
Line 4641: 
```

如您所见，为我的 aspx 生成的代码已声明 AdditionalTextBox 两次

有人知道为什么吗？更重要的是，我该如何解决这个问题或解决这个问题？

在此先感谢南顿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:28:07.713

如果文本框的 ID 对您来说不是强制性的，并且您没有在代码隐藏中使用它，那么您可以安全地删除它，asp.net 将自动生成它。

# grails - groovy 中是否有其他可用的插件支持弹簧安全性以实现用户角色和权限？

> ID：10528944
> 
> 赞同：0
> 
> 时间：2012-05-10T07:01:01.233
> 
> 标签：grails, plugins, groovy

我想知道是否还有与 groovy 兼容的可用插件，它们`spring security core plugin`与`User Roles and Permissions`. 我尝试过使用`ACL plugin`，但它不满足要求。ACL 的情况是，每个权限都分配给特定用户。我想做的是将权限分配给角色，然后将角色分配给权限。

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:21:06.610

它必须是spring security核心插件吗？Shiro 插件也支持角色和权限，可能非常适合您的情况。

[http://grails.org/plugin/shiro](http://grails.org/plugin/shiro)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:36:44.243

当您调用`aclUtilService.addPermission()`第二个参数时，是接收者。它可以是用户名或角色（服务中的逻辑非常简单 - 它只是检查字符串以查看它是否以“ROLE_”开头）。如果它是一个角色，那么权限将授予该角色，因此任何具有该角色的用户。

# c++ - 如何让我的用户级应用程序通过管道与根级应用程序通信？

> ID：10528946
> 
> 赞同：0
> 
> 时间：2012-05-10T07:01:08.117
> 
> 标签：c++, linux, pipe, fork

我有一个用户级应用程序，需要通过写入设备文件（需要 root 权限）来启用/禁用设备。

这是我的接口的当前实现：

```
bool DeviceInterface::EnableDevice( bool isEnabled )
{
    bool isSuccessful = false;

    //enable device
    if(isEnabled)
    {
        isSuccessful = (system("enableDevice.sh 1") == 0)? true : false;
    }
    //disable device
    else
    {
        isSuccessful = (system("enableDevice.sh 0") == 0)? true : false;
    }
    return isSuccessful ;
} 
```

我的脚本“enableDevice.sh”看起来像这样，并且在以 root 身份运行时运行良好：

```
echo $1 > /sys/devices/device_file 
```

这会失败，因为它需要 root 权限才能写入设备文件。我对“pipes”、“fork”和“exec”完全陌生。谁能帮助我如何将“0”或“1”传递给脚本以启用和禁用设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T07:27:10.897

按如下方式在 enableDevice.sh 上运行 chmod（作为 root）：-

```
 #chmod 4755 enableDevice.sh 
```

这称为设置 setuid 位。有了这个非root用户将能够运行这个脚本，它将以所有者（在我们的例子中为root）的权限运行。这样你的程序就可以工作了。请阅读有关 setuid 的信息。编辑：另外，在 chmod 之前，将 enableDevice.sh 的所有者和组设为 root。然后只有它会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:27:34.560

为了让“enableDevice.sh”执行此操作，它需要以 root 身份运行。您可以将其标记为 suid (chmod u+S enableDevice.sh) 并将其设置为 root。请注意，您需要成为 root 才能执行 chown（在任何合理的 unix 系统上）。

当然，您总是可以为您的（好吧，程序的）组或每个人打开写权限，即 chmod g+w,o+w /sys/devices/device_file

我*真的*不建议你这样做。如果我用 '\"bunch of nothing > /dev/sda' 调用该脚本，它会覆盖系统驱动器的（可能）根目录。

一个更好的主意是让脚本检查“$1”是什么，然后将 0 或 1 回显到设备，或者如果两者都不是，则不执行任何操作。即不要相信用户数据，尤其是在 suid 脚本中！

```
case "$1" in
    enable)   VALUE=1 ;;
    disable)  VALUE=0 ;;
    *)        exit  ;;
esac
echo $VALUE > /sys/devices/device_file 
```

更好的是，有一个你以 root 身份运行的守护进程，看着一个命名管道（有效地）执行上述操作，具体取决于它在管道中获得的内容。

# android - 如何从一个活动获取 ListView 数据到另一个活动

> ID：10528947
> 
> 赞同：0
> 
> 时间：2012-05-10T07:01:13.090
> 
> 标签：android

我正在开发一个应用程序，我希望通过单击将数据从一个`ListView`发送到另一个应用程序。代码如下所示：`Activity``ImageView`

```
package com.gabriel.utility;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Date;

import android.content.Context;
import android.content.Intent;
import android.graphics.Typeface;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.ToggleButton;

import com.gabriel.activity.ContactInfoActivity;
import com.gabriel.activity.ContactListActivity;
import com.gabriel.activity.GabrielApplication;
import com.gabriel.activity.R;
import com.gabriel.database.ContactCore;
import com.gabriel.database.WebMessageCore;

public class WebMessageAdapter extends ArrayAdapter<WebMessageCore>{

    Context _Context;
    ArrayList<WebMessageCore> _WebMsgList;
    WebMessageCore _WebMsgCore;
    TextView _MsgContent;
    private LayoutInflater mInflater;
    ImageButton Arrow;
    GabrielApplication application;
    public WebMessageAdapter(Context context, int resource,
            ArrayList<WebMessageCore> contactList) {

        super(context, resource,  contactList);
        _Context = context;
        _WebMsgList = contactList;
        mInflater = LayoutInflater.from(context);
    }

    public int getCount() {
        return _WebMsgList.size();
    }

    public WebMessageCore getItem(int position) {
        return _WebMsgList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder holder;
        if (convertView == null) {
            convertView = mInflater.inflate(R.layout.custom_row_view, null);
            holder = new ViewHolder();
            holder.txtName = (TextView) convertView.findViewById(R.id.name);
            holder.txtmessage = (TextView) convertView
                    .findViewById(R.id.meassage);
            holder.txtPhone = (TextView) convertView.findViewById(R.id.phone);
            holder.txtdate=  (TextView ) convertView.findViewById(R.id.datetime);
          holder.Arrow =  (ImageView)convertView.findViewById(R.id.settingArrow);
            convertView.setTag(holder);
        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        _WebMsgCore=_WebMsgList.get(position);
        holder.txtName.setText(_WebMsgCore.getName());
        holder.txtmessage.setText(_WebMsgCore.getMessage());
       holder.txtPhone.setText(_WebMsgCore.getMobileNo());
        holder.Arrow.setOnClickListener( new OnClickListener(){

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
         Intent newActivity =  new Intent(_Context, ContactInfoActivity.class);

        _Context.startActivity(newActivity);

        }      

       });

       String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date());
       holder.txtdate.setText(currentDateTimeString);
        return convertView;
      /* SimpleDateFormat sdf = new SimpleDateFormat("MMM dd,yyyy HH:mm:ss.SSS a");
       Date resultdate = new Date((new Date()).getTime());
       String currentDateTimeString = sdf.format(resultdate);
       holder.txtdate.setText(currentDateTimeString);*/

    }

      /*tdate = (TextView)findViewById(R.id.datetime);
      Arrow =  (ImageButton)findViewById(R.id.settingArrow);
      String currentDateTimeString = DateFormat.getDateTimeInstance().format(new Date());
      tdate.setText(currentDateTimeString);
      Arrow.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

                Intent newActivity = new Intent(context, ContactInfoActivity.class);
                startActivity(newActivity);
            }
        });
            */

        //View contactView = convertView;
        /*if (contactView == null) {
            contactView = LayoutInflater.from(_Context).inflate(
                    R.layout.web_message_item, null);
        }
        _MsgContent = (TextView) contactView.findViewById(R.id.messageContent);

        //To set text as bold
        //=====================
        _MsgContent.setTypeface(null, Typeface.BOLD);

        _WebMsgCore = _WebMsgList.get(position);
        _MsgContent.setText(_WebMsgCore.getMessage());
        return contactView;
    }
    */

    static class ViewHolder {
        ImageView Arrow;
        TextView txtName;
        TextView txtmessage;
        TextView txtPhone;
        TextView txtdate;

    }
}` 
```

然后我想将数据获取到另一个活动。请给我一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:13:38.813

在您的第一个活动中，只需设置一个 onclick 侦听器（在您的列表中）

> 私有 OnItemClickListener myListener = new OnItemClickListener() { @Override public void onItemClick(AdapterView parent, View v, int i, long l) {
> 
> ```
>  Log.v(TAG, "onItemClick fired!" + i);
> 
>   ObjectClass mObjectClass = (ObjectClass) >parent.getItemAtPosition(i);          
> 
>       //get what where ever you need from mObjectClass then pass it with putExtra >                       //if it's a complex object use Parcelable  
> 
>   } 
> ```

不要在你的 onCreate 上忘记这个

```
yourList.setOnItemClickListener(myListener); 
```

在第二个活动中，获取您通过的内容并使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T07:08:51.137

使用适配器 getView() 函数代码中的列表视图的**setTag()**和**getTag()**属性来存储和检索数据。

还要检查这个答案：[在 android listview 中将元数据从一个活动传递到下一个活动](https://stackoverflow.com/a/9661666/964741)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T07:07:06.320

List 是可序列化的，因此您可以通过 Intent 将它们传递给另一个 Activity。查看[文档](http://developer.android.com/reference/android/content/Intent.html#putExtra%28java.lang.String,%20java.io.Serializable%29)

确保您的 WebMessageCore 也实现了 Serializable。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-10T07:07:18.437

试试这个（笑）：

```
class MySingletonClass {

    private static MySingletonClass instance;
    public static MySingletonClass getInstance() {
    if(instance == null) instance = new MySingletonClass();
        return instance;
    }
    private MySingletonClass() {
    }
    Data data; //this is your data

    public void setData(Data data) {
        this.data = data;
    }
    public Data getData() {
        return data;
    }

} 
```

像这样使用它：

**活动一：** `MySingletonClass.getInstance().setData(yourData);`

**活动二：** `MySingletonClass.getInstance().getData();`

**如果这不起作用：**尝试在 StackOverFlow.com 上搜索（超过 100 个）重复/替代解决方案

# c++ - 未定义的行为是否依赖于 c++ 中的编译器？

> ID：10528952
> 
> 赞同：0
> 
> 时间：2012-05-10T07:01:54.710
> 
> 标签：c++, compiler-construction, undefined-behavior

未定义的行为是否依赖于 c++ 中的编译器？

每个编译器对每个问题都有自己的行为！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:15:02.520

未定义确实意味着未定义。也就是说，任何事情都可能发生。

它可以依赖于编译器吗？是的。

所有编译器都可以做同样的事情吗？是的。

它可以今天做一件事，明天做一件事吗？是的。

它可以使程序崩溃吗？是的。

它可以做我认为它应该做的事情并且看起来工作正常吗？是的。

任何事情都有可能发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-10T07:09:26.067

关于未定义行为，
**C++ 标准第 1.3.24 节指出：**

> 允许的未定义行为的范围从完全忽略具有不可预测结果的情况，到在翻译或程序执行期间以环境特征的记录方式表现（有或没有发出诊断消息），到终止翻译或执行（发出的诊断消息）。

所以，是的，当发生未定义的行为时，编译器可以自由地显示他们想要的任何行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T07:06:22.057

C++ 标准中规定了构成未定义行为的内容。

根据定义，编译器在遇到表现出未定义行为的代码时生成的代码可以是任何代码。这是为了给编译器编写者优化的余地。

请注意，未定义的行为意味着您的程序可以做任何事情。它不保证它会崩溃，或抛出异常，或写入某个内存区域。如您所知，它可以删除您的整个文件系统，然后取出垃圾——这在 C++ 标准中是可以的。

远离未定义的行为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T07:06:29.113

> 未定义的行为是否依赖于 c++ 中的编译器？

**是**的。
可以这样论证：

> 定义良好的行为符合标准，并且受到所有编译器的同等支持。

因此，

> 未定义的行为不符合标准，编译器可以自由地做任何他们想做的事情！

# c# - 文本框中的最小数量？

> ID：10528953
> 
> 赞同：0
> 
> 时间：2012-05-10T07:02:01.983
> 
> 标签：c#, winforms

我正在尝试创建一个简单的程序，让用户写 1-5 个数字，我希望程序告诉他最小的数字是多少。但我不知道如何通过文本框完成这项工作。

![在此处输入图像描述](../Images/9983edbfb79f6e5630a28b103843e694.png)

用户可以通过单选按钮选择数字的数量，然后在 Tex Boxes 中写下数字。单击 Go 后，我希望程序告诉最小的数字是多少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:08:32.053

每个文本框都有一个属性窗口，您可以在其中给它一个“名称”。

此名称属性将让您在编码时引用该文本框。

然后要获得它的值，你需要在你的代码中使用“name.value”。这适用于大多数编程和脚本语言。如果你指定你使用的语言，它会有所帮助。

例如，如果您将文本框命名为“num1”（不带引号）

然后在代码中将其用作：

```
num1.value 
```

**OP评论后编辑：**

如果是 C# 使用

```
num1.Text 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T19:39:03.520

检查 TextBox 对象的名称 - 默认情况下它是 TextBox1、TextBox2 ...

如果您没有更改名称，则代码应如下所示：

```
int textBox1Value;
if (Int.TryParse(TextBox1.Text, out textBox1Value))
{
   // Success - that means that the input is a valid integer
   Console.WriteLine("TextBox1 Value: {0}", textBox1Value);
} 
```

我建议您将文本框替换为 NumericUpDown 控件，以验证您的输入是否为整数，然后您可以使用：

```
int numericUpDown1Value = NumericUpDown1.Value; 
```

# c# - 如何从 C# 代码重新启用 Gmail 中的弹出功能？

> ID：10528954
> 
> 赞同：0
> 
> 时间：2012-05-10T07:02:05.557
> 
> 标签：c#, gmail, pop3

我有一个从我的 Gmail 下载邮件的程序，我选择了单选按钮：**为所有邮件启用 POP（即使是已经下载的邮件）**

下载邮件后，我的 Gmail 将上述状态更改为：**POP 已为自当前日期以来到达的所有邮件启用**

我没有实际更改单选按钮，但它看起来像是自动将其设置为仅下载新邮件。

我需要我的窗户一直下载。

如何在我的代码中设置 Gmail 必须始终启用所有下载？无需我每次都重新选择单选按钮。

* * *

视窗服务

```
 namespace EmailWindowsService
{
    public partial class MyEmailService : ServiceBase
    {
        private static System.Timers.Timer aTimer; //Create a timer
        public MyEmailService()
        {
            InitializeComponent();
            if (!System.Diagnostics.EventLog.SourceExists("MySource")) // Log every event
            {
                System.Diagnostics.EventLog.CreateEventSource(
                    "MySource", "MyNewLog"); // Create event source can view in Server explorer
            }
            eventLogEmail.Source = "MySource";
            eventLogEmail.Log = "MyNewLog";
            // Timer Code
             aTimer = new System.Timers.Timer(1 * 60 * 1000); // 60 seconds
             aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent); // Call time elapsed event
             aTimer.Enabled = true;
            // Timer Code
        }
        protected override void OnStart(string[] args)
        {
            eventLogEmail.WriteEntry("Started");
        }
        protected override void OnStop()
        {
            eventLogEmail.WriteEntry("Stopped");
        }
        protected override void OnPause()
        {
            eventLogEmail.WriteEntry("Paused");
        }
        protected override void OnContinue()
        {    
            eventLogEmail.WriteEntry("Continuing");
        }
        protected override void OnShutdown()
        {
            eventLogEmail.WriteEntry("ShutDowned");
        }
        private void OnTimedEvent(object source, ElapsedEventArgs e)
        {
            clsRetriveEmail Emails = new clsRetriveEmail();
            eventLogEmail.WriteEntry("Populateing database with mail"); // log event
            Emails.EmailGetList(); // Call class
        }       
        }
    } 
```

* * *

班级

```
namespace EmailWindowsService
{
    class clsRetriveEmail
    {
        public void EmailGetList()
        {          
            using (Pop3Client objClient = new Pop3Client())
            {
                //Athentication This is stored in the app.config file
                objClient.Connect(Properties.Settings.Default.mailServer, Properties.Settings.Default.port, Properties.Settings.Default.ssl); // mailserver eg gmail is pop.gmail.com, Port common ports 995 110 sll Security best to set to true
                objClient.Authenticate(Properties.Settings.Default.username, Properties.Settings.Default.password);  // Email Address and password
                //Count Emails and begin Looping though them
                int emailCount = objClient.GetMessageCount();
                for (int i = emailCount; i >= 1; i--)
                {
                   OpenPop.Mime.Message msg = objClient.GetMessage(i); //Get message Number. Message decleard as msg
                    //Set the values to throw into Database
                   int emailID = i;
                   String emailTo = Properties.Settings.Default.username;
                   String emailFrom = msg.Headers.From.Address;
                   String emailSubject = msg.Headers.Subject;
                   DateTime emailSentDate = msg.Headers.DateSent;
                    // The connection String can be changed in the app.config file
                    // Connect to database
                    using (var conn = new SqlConnection(Properties.Settings.Default.dbConnectionString))
                    using (var cmd = conn.CreateCommand())
                    {
                            // Writes to database (local) instance
                            conn.Open();
                            cmd.CommandText = "EmailLogFill";
                            cmd.CommandType = CommandType.StoredProcedure;
                            cmd.Parameters.AddWithValue("@id", emailID);
                            cmd.Parameters.AddWithValue("@to", emailTo);
                            cmd.Parameters.AddWithValue("@from", emailFrom);
                            cmd.Parameters.AddWithValue("@subject", emailSubject);
                            cmd.Parameters.AddWithValue("@date", emailSentDate);
                            cmd.ExecuteNonQuery();
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T06:03:10.197

您无需重新启用单选按钮，当弹出客户端下载邮件时，其他弹出客户端无法查看。Outlook 如何做到这一点是通过使用最近的模式。

试试这不是你所有的邮件，而是过去 30 天。

只需将**最近的：**添加到您的用户名，例如最近的：Me@gmail.com。

**最近模式**获取最近 30 天的邮件，无论它是否已经发送到另一个 POP1 客户端。

链接以备份它。

[http://support.google.com/mail/bin/answer.py?hl=en&answer=47948](http://support.google.com/mail/bin/answer.py?hl=en&answer=47948)

# objective-c - 如何在可可的 nscombobox 中显示数据？

> ID：10528957
> 
> 赞同：0
> 
> 时间：2012-05-10T07:02:19.733
> 
> 标签：objective-c, cocoa, nscombobox

我的 mainmenunib 文件中有一个`NSComboBox`。我创建了一个组合框“ *cb* ”的出口并将其与我的委托人连接我还将委托人和数据源与我的委托人连接。

```
-(void)applicationDidFinishLaunching:(NSNotification *)aNotification
{    arr=[NSMutableArray arrayWithObjects:@"a",@"b",@"c",@"d",@"e",@"f", nil];
[cb reloadData];
}

-(NSInteger)numberOfItemsInComboBox:(NSComboBox *)aComboBox{
return arr.count;
}

-(id)comboBox:(NSComboBox *)aComboBox objectValueForItemAtIndex:(NSInteger)loc{
return [arr objectAtIndex:loc];
} 
```

但是当我运行应用程序时，数据并没有出现在组合框中。请帮助我，因为我是可可编程的新手。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T08:22:56.300

您的方法从表面上看似乎是合理的，尽管使用可变对象作为实例变量通常是不明智的（出于与您的问题完全无关的原因，我们在这个阶段不需要讨论）。

有两件事可能会引发问题：

1）你在使用ARC吗？如果没有，`arr`它会从你下面消失，因为`-arrayWithObjects`返回一个自动释放的对象，而你没有保留它。如果您使用的是 ARC（我相信 Lion 上新项目的默认设置），这不适用于您。另外，我希望您会崩溃，而不仅仅是没有数据。

2) 更有可能的是，您忘记了`-setUsesDataSource:YES`，这是告诉 NSComboBox 是查看其数据源还是使用@JustinBoo 提供的内部内容方法的标志。我相信这默认为 NO，这会导致您的确切问题。目前我面前没有 Interface Builder，但 IIRC 有一个“使用数据源”复选框，您可以选中它以启用此属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:18:11.937

`-addItemWithObjectValue`您可以像这样使用to Your添加对象`NSComboBox`：

```
arr = [NSMutableArray arrayWithObjects:@"a",@"b",@"c",@"d",@"e",@"f", nil];

for (int i = 0; i < [arr count]; ++i)
{
    [cb addItemWithObjectValue:[arr objectAtIndex:i]];
} 
```

您可以查看[NSComboBox 参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSComboBox_Class/Reference/Reference.html)以获取更多信息。

# mfc - MFC 删除所有静态拆分窗格（1x1 视图）

> ID：10528961
> 
> 赞同：0
> 
> 时间：2012-05-10T07:02:41.920
> 
> 标签：mfc

我使用 CreateStatic 和 CreateView 将“C(classname)View”拆分为多个窗格（如 (1x2)、(3x3)），使用按钮控件选择行数和列数。

现在，当我单击 1x1（这意味着我要删除任何窗格）时，ASSERT(n_Row > 1 && n_Col > 1) 在 CSplitterWnd::CreateStatic 中显然失败了。

我如何处理“无窗格”的情况？

这是 DisplaySingleFrame() 函数（删除窗格）

```
CN00bSplitApp* pApp = (CN00bSplitApp*)AfxGetApp();
CView * pActiveView = NULL;

if(pActiveView == NULL)
{
if(m_pSplitter)
    pActiveView = (CView*)m_pSplitter->GetPane(0,0);
        else
    pActiveView = (CN00bSplitView *)GetActiveView();
}

m_iPrevColLayout = m_iRowLayout;
m_iPrevRowLayout = m_iColLayout;

m_iRowLayout = 0;
m_iColLayout = 0;

ShowWindow(SW_HIDE);

CRect rect(0,0,0,0);
pActiveView->GetClientRect(rect);
CDocument * pDoc= pActiveView->GetDocument();

pActiveView->DestroyWindow();

pActiveView = NULL;

if(m_pSplitter)
{
m_pSplitter->DestroyWindow();
delete m_pSplitter;
m_pSplitter = NULL;
}

CDocTemplate* pDocTemplate = pApp->m_pDocTemplate;

CCreateContext context;

context.m_pNewViewClass= RUNTIME_CLASS(CN00bSplitView);
context.m_pCurrentDoc=(CN00bSplitDoc*)pDocTemplate->CreateNewDocument();
context.m_pLastView=pActiveView;

CView* p = (CView*)CreateView(&context, AFX_IDW_PANE_FIRST);
SetActiveView(p);

p->OnInitialUpdate();

RecalcLayout();
ShowWindow(SW_SHOW); 
```

这会在“context.m_pCurrentDoc=(CN00bSplitDoc*)pDocTemplate->CreateNewDocument();”处引发未处理的异常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T09:23:37.133

我没有`m_pDocTemplate=pDocTemplate`在`C(classname)App`.

解决问题。

# html - 均摊宽度 其中 孩子们

> ID：10528963
> 
> 赞同：0
> 
> 时间：2012-05-10T07:03:00.517
> 
> 标签：html, css, html-lists

> **可能重复：**
> [HTML 列表元素：将父宽度分成相等的部分](https://stackoverflow.com/questions/6310632/html-list-element-sharing-the-parent-width-into-equal-parts)

我有一个`div`包含一个`ul`元素：

```
<div style="width: 800px">
    <ul style="width: 100%">
        <li>...</li>
        ....
        <li>...</li>
    </ul>
</div> 
```

如何`li`在整个`ul`?

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-10T07:09:44.773

如果您希望水平跨越列表，这应该足够了：

```
HTML
<div>
    <ul id="list">
        <li><a href="#">Item one</a></li>
        <li><a href="#">Item two</a></li>
        <li><a href="#">Item three</a></li>
        <li><a href="#">Item four</a></li>
        <li><a href="#">Item five</a></li>
    </ul>
</div>

CSS
#list li
{
    display: inline;
    list-style-type: none;
    padding-right: 20px;
} 
```

在这种情况下，我调整填充以均匀地跨越项目，就像我希望的那样。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-10T09:08:11.190

我会使用这个CSS：

```
 #list li
{
    display: inline;
    list-style-type: none;
    padding-right: 20px;
    ***width:100px;***
} 
```

# .net - 使用 DataContractSerializer 时忽略运行时的一些属性

> ID：10528967
> 
> 赞同：8
> 
> 时间：2012-05-10T07:03:58.317
> 
> 标签：.net, serialization, datacontractserializer

我正在使用 DataContractSerializer 使用 DataMember 属性将对象序列化为 XML（仅对公共属性进行序列化）。
是否可以动态忽略某些属性，以便它们不会包含在 XML 输出中？

例如，允许用户在某个列表控件中选择所需的 xml 元素，然后仅序列化用户选择的那些元素，不包括所有未选择的元素。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T07:08:45.657

对于列表场景，可能只是有一个不同的属性，所以而不是：

```
[DataMember]
public List<Whatever> Items {get {...}} 
```

你有：

```
public List<Whatever> Items {get {...}}

[DataMember]
public List<Whatever> SelectedItems {
   get { return Items.FindAll(x => x.IsSelected); } 
```

但是，**反序列化**会很痛苦，因为您的列表需要输入到 Items 中；如果您也需要反序列化，您可能需要编写一个复杂的自定义列表。

* * *

作为第二个想法；**只需**使用您要序列化的项目创建对象的第二个实例；非常简单有效：

```
var dto = new YourType { X = orig.X, Y = orig.Y, ... };
foreach(var item in orig.Items) {
    if(orig.Items.IsSelected) dto.Items.Add(item);
}
// now serialize `dto` 
```

* * *

AFAIK，`DataContractSerializer`不支持成员的条件序列化。

在**单个属性**级别，如果您使用，这*是*`XmlSerializer`一个选项，但是 - 对于属性，例如`Foo`，您只需添加：

```
public bool ShouldSerializeFoo() {
    // return true to serialize, false to ignore
} 
```

或者：

```
[XmlIgnore]
public bool FooSpecified {
    get { /* return true to serialize, false to ignore */ }
    set { /* is passed true if found in the content */ }
} 
```

这些纯粹是作为基于名称的约定应用的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T07:12:20.503

[有忽略数据成员属性](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ignoredatamemberattribute.aspx)

# powershell - 如何在 Powershell 中向此循环添加简单的搜索和替换？

> ID：10528970
> 
> 赞同：1
> 
> 时间：2012-05-10T07:04:11.297
> 
> 标签：powershell

到目前为止，我写了这个，它贯穿并完全按照我的意愿行事，现在我被卡住了。我似乎无法打开新创建的 $NOSPACE.shtml 并用变量 $SPACE 替换一个单词。请帮忙？

```
$CITYLIST=import-csv CityList.txt
$CITYLIST | FOREACH-OBJECT { $_ }
FOREACH ($Item in $CITYLIST) { 
$Item.City
$NOSPACE=$Item.City.replace(" ","_")
$SPACE=$Item.City
Add-Content _citylist.shtml "`n<a class=`"cityareaslist`" href=`"`/$NOSPACE.shtml`">    $SPACE<`/a>" ; Copy-Item index.shtml "$NOSPACE.shtml"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:17:58.717

```
(Get-Content "$NOSPACE.shtml") | 
Foreach-Object {$_ -replace 'word',$SPACE} | 
Set-Content "$NOSPACE.shtml" 
```

# charts - 在javascript中从json字符串绘制图表

> ID：10528972
> 
> 赞同：0
> 
> 时间：2012-05-10T07:04:36.597
> 
> 标签：charts, javascript

我必须从以下 json 字符串中绘制图表：

```
{
"d":{
  "results":[
 {
   "_metadata":{
      "uri": "http://www.something.com/hi",
      "type" : "something.preview.hi"
      }, "Period", "1988", "Age": 20, "Size" : 80
 },
   "_metadata":{
       "uri": "http://www.something.com/hi",
       "type" : "something.preview.hi"
      }, "Period", "1989", "Age": 25, "Size" : 90
 } 
   ]  }} 
```

我使用 jquery.flot.js 库来绘制图表。这是绘制图表的示例，它工作正常：

```
var d1 = [];
for (var i = 0; i < 14; i += 0.5)
    d1.push([i, Math.sin(i)]);
var d2 = [[0, 3], [4, 8], [8, 5], [9, 13]];

myChart.setDataArray(d1);
myChart.setDataArray(d2); 
```

根据示例，我已将 json 转换为对象数组：

```
 var results = $.parseJSON(responseText)["d"]["results"];            
        var sampleData = [];
        for (var i = 0, len = results.length; i < len; i++) {
            var result = results[i];

            sampleData.push({ Perioden: result.Perioden,
                Size: result.Size,
                Age: result.Age}); 
}

 var myData = [];
        for (var i in sampleData) {
            myData.push([sampleData[i].Period, sampleData[i].Age]);
        }

        var myData1 = [];
        for (var i in sampleData) {
            myData1.push([sampleData[i].Period, sampleData[i].Size]);
        }

myChart.setDataArray(myData);
myChart.setDataArray(myData1); 
```

但我得到数据图表的数据格式错误的错误。任何人都可以看到我的代码和示例之间有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:28:36.667

我猜你的 json 格式正确。但是您提供的示例不是（在第二个“uri2 行”和“，”之后尾随“i”而不是“：”在“Period”之后

第二件事，您的 json 中有句点，而 Perioden 是您的 js 代码。检查您是否在任何地方都使用相同的名称

然后你可以尝试 console.log(myData, myData1) 看看你是否有预期的结果

告诉我们是否足够或您是否还有其他问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:02:35.430

试试这个：

```
var myData = [];
sampleData.forEach(function(item){
        myData.push([item.Perioden, item.Age]);
}); 
```

# html - CSS 导航在 IE8 或更低版本中不可见

> ID：10528980
> 
> 赞同：1
> 
> 时间：2012-05-10T07:05:00.903
> 
> 标签：html, css, navigation

我想知道是否有人可以帮助我。这是我的第一个站点，虽然我已经尝试为自己解决尽可能多的问题，但我已经到了这样的地步，我盯着屏幕在嘴边滴着点按刷新键，希望它能通过魔法自行解决。

问题是，虽然该站点在 FF、Chrome 和 IE9+ 中似乎运行良好，但在 IE8 及以下版本中，水平导航栏是不可见的。应该有一个间隙，链接确实有效，但精灵图像不可见。

这个网站还没有上线，所以很遗憾我不能给你一个链接，只有代码。

如果有一个我太愚蠢而无法发现的明显而简单的答案，我深表歉意。

感谢您的时间。

乔恩

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="style.css" type="text/css" media="screen" />

<title>Alan J. Warde Chartered Surveyor</title>

</head>

<body id="home">

<div id="wrap"><!--wrap starts-->

    <a href="#"><img src="images/header.jpg" alt="header" /></a>

            <ul id="nav"><!--nav starts-->
                <li class="home"><a href="index.html">Home</a></li>
                <li class="about"><a href="about.html">About</a></li>
                <li class="services"><a href="services.html">Services</a></li>
                <li class="contact"><a href="contact.html">Contact</a></li>
            </ul><!--nav ends-->

           <div id="main_content"><!--start of main_content-->

            <div id="sidebar"><!--start of sidebar-->
                <div class="listbox"><!--start of listbox-->
                <div class="inner_sidebar">
                <ul>
                  <li>Building Surveys</li>
                  <li>Valuations</li>
                  <li>Structural Engineering</li>
                  <li>Quantity Surveying</li>
                  <li>Loss Adjusting</li>
                </ul>
                </div><!--end of inner_sidebar-->
                </div><!--end of listbox-->

            </div><!--end of sidebar-->

               <div id="homecontent"><!--start of Homecontent-->
                    <div id="inner_content"><!--start of inner_content-->
                <h1>A J Warde Chartered Surveyor</h1>
                <p>CONTENT</p>

<div id="contact"><!--start of contact-->
<p><img src="images/phone1.png" alt="phone" style="float:left;" />CONTENT</p>
</div><!--end of contact-->

              </div><!--end of inner_content-->

              </div><!--end of Homecontent-->

             </div><!--end of main_content-->

     <div id="footer">
        <div id="footer_inside">
          Registered Company 055012
             <ul id="footer_nav"><!--nav starts-->
                <li class="home"><a href="home.html">Home</a></li>
                <li class="about"><a href="about.html">About</a></li>
                <li class="services"><a href="services.html">Services</a></li>
                <li class="contact"><a href="contact.html">Contact</a></li>
            </ul><!--nav ends-->
         </div><!--end of Footer-inside-->
     </div><!--end of footer-->
</div><!--wrap ends-->
</body>
</html>

@charset "utf-8";
/* CSS Document */

/*RESETS AND BASIC SETUP*/

* {margin:0; padding:0;}
html {overflow-y:scroll; overflow: -moz-scrollbars-vertical; }
body {
    font: 62.5% "Times New Roman", Times, serif;
    background-color: #322e2e;
}

/*TYPOGRAPHY*/

h1 {
    padding:10px 0 20px 0;
    text-align:center;
    font-size:2.4em;
    color:#003399;
    text-shadow:1px 1px #69F;
}

h2 {
    padding:5px 0 5px 0;
    text-align:center;
    font-size:1.1em;
    color:#003399;
    text-shadow:1px 1px #69F;
}

/*BASIC ELEMENT STYLING*/

ul {list-style:none inside;}
p {font-size:1.8em; line-height:1.2em; margin-bottom:1.2em;    font-weight:bold; color:#333;}
a {outline:none;}
a {text-decoration:none;}
a img {border:none;}

/*END RESET*/

/*STRUCTURE AND THINGS*/

#wrap {
    width:995px; /*for IE*/
    margin:auto;
    background:url(images/content.jpg)repeat-y;
}

html>body #wrap { /*IE hack*/
    width:975px;
}

#main_content {
    padding:0;

}

#homecontent {
    background:url(images/contentimg.jpg) no-repeat;
    height:478px;
    width:633px;
    float:right;
    margin-right:12px; /*pushes div closer to left*/
    margin-top:2px;
    position:relative;

}

#servicescontent {
    background:url(images/servicesnewbg.jpg) no-repeat;
    height:478px;
    width:633px;
    float:right;
    margin-right:12px; /*pushes div closer to left*/
    margin-top:2px;
    position:relative;

}

#inner_content {
    padding:20px;
    position:relative;
}

        #contact { /*this is just to centre-align the contact details on home page*/
    position:absolute;
    left:150px;
    width: 330px;
    text-align:center;
        }
            #contact p {
                color:#0000FF;
            }

#left_col {
    border:1px solid red;
    float:left;
    height:478px;
    width:313px;
    margin-left:15px; /*pushes div closer to right*/
    margin-top:20px;
    position:relative;
}
        #contactdetails {
            position:absolute;
            left:50px;
        }

#sidebar {
    float:left;
    background:url(images/sidebar.jpg) no-repeat;
    height:478px;
    width:313px;
    margin-left:15px; /*pushes div closer to right*/
}

.inner_sidebar {
    padding:20px 0 80px 0px;
    font-size:1.4em;
}

.listbox {
    width:230px;
    margin-left:10px;
}

        .inner_sidebar ul li {
            font-size:1.4em;
            padding:5px;
            margin:5px 0 45px 5px;
            font-weight:bold;
            color:#FFF;
            border:1px solid #FFF;
            border-radius:3px;
            background-color:rgba(0, 0, 25, 0.5);
        }

/*TOP OF PAGE NAVIGATION*/

ul#nav {

}
    ul#nav li {
        display:inline;
    }
    ul#nav li a {
        display:block;
        height:54px; 
        text-indent:-9999px;
        float:left;
        } 

    ul#nav li.home a {
        width:404px;
        background:url(images/homenav.jpg)top center no-repeat;
    }

        ul#nav li.about a {
        width:160px;
        background:url(images/aboutnav.jpg)top center no-repeat;
    }

    ul#nav li.services a {
        width:160px;
        background:url(images/servicesnav.jpg)top center no-repeat;
    }

    ul#nav li.contact a {
        width:251px;
        background:url(images/contactnav.jpg)top center no-repeat;
    }

    ul#nav li a:hover {
        background-position: center center;
    }

    body#home li.home a, body#about li.about a, body#services li.services a, body#contact li.contact a {
        background-position: bottom center;
    } 

/*FOOTER*/

#footer {
    height:96px;
    background:url(images/footer.jpg) no-repeat;
    clear:both;
}

#footer_inside {
    text-align:center;
    width:500px;
    margin:auto;
    padding:10px 0 0 0;
    color:#CCCCCC;
    font-size:1.4em;

}

ul#footer_nav li {
    display:inline;
    padding:0px;
    margin:0px;     
}

    ul#footer_nav li a {
        color:white;
        text-decoration:none;
        padding:0 10px;
        border-right:1px solid white;
        line-height:25px;
    }
        ul#footer_nav li:last-child a { /*last child selector to remove last border seperator*/
            border:none;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T07:58:13.150

看起来您需要在每个属性的`url()`and之间放置空格。`top``background`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T08:23:07.447

较低版本的 IE 具有仅在 IE 中的“hasLayout”属性。你可以了解一下。

```
ul#nav {
    /* set width and height */
} 
```

我认为这可能有效。

# python - 跨域 json 数据在 django sweetpie 中被拒绝

> ID：10528981
> 
> 赞同：1
> 
> 时间：2012-05-10T07:05:01.030
> 
> 标签：python, django, rest, tastypie

我使用 django-tastypie 使用 GET、POST、PUT、DELETE 方法，当客户端和服务器都来自同一个域时，它们工作顺利，但是如果我从不同域发出请求，则什么也没有发生。

有什么线索吗？

模型.py

```
from django.db import models
class Entry(models.Model):
    title = models.CharField(max_length=30)
    body = models.CharField(max_length=40)
    pub_date = models.DateField()
    slug=models.CharField(max_length=30) 
```

资源.py

```
from django.contrib.auth.models import User
from tastypie.authorization import Authorization
from tastypie import fields
from tastypie.resources import ModelResource, ALL, ALL_WITH_RELATIONS  
from myapp.models import Entry

class UserResource(ModelResource):
    class Meta:
        queryset = User.objects.all()
        resource_name = 'user'
        excludes = ['email', 'password', 'is_active', 'is_staff', 'is_superuser']
        filtering = {
        'username': ALL,
        }

class EntryResource(ModelResource):

    class Meta:
    queryset = Entry.objects.all()
    resource_name = 'entry'
    authorization = Authorization()
    filtering = {
        'user': ALL_WITH_RELATIONS,
        'pub_date': ['exact', 'lt', 'lte', 'gte', 'gt'],
        } 
```

网址.py

```
from django.views.generic.simple import direct_to_template
from django.conf.urls.defaults import *
from tastypie.api import Api
from myapp.resources import EntryResource, UserResource

v1_api = Api(api_name='v1')
v1_api.register(UserResource())
v1_api.register(EntryResource())

urlpatterns = patterns('',
# The normal jazz here...
     (r'^api/', include(v1_api.urls)),
     (r'^basic/$', direct_to_template, {'template': 'todos/test.html'})
) 
```

模板文件如下

```
<!DOCTYPE html>
<html>
    <head>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script language="javascript">
  jQuery(document).ready(function($) {
      var data = JSON.stringify({
      "body": "This will prbbly be my lst edited  post.",
      "pub_date": "2011-05-22T00:46:38",
       "slug": "another-post",
      "title": "Another Post",

     });
  $.ajax({
        url: "http://localhost:8000/api/v1/entry/1/?format=json",
        type: 'PUT',
            contentType: 'application/json',
        data: data,
        dataType: 'json',
        processData: false,
        success:function(data) { 
            alert(data);
            },
        error : function(data){
            alert('error')
            },  
        })
  }) 

 </script>
    </head>
    <body>
body content goes here 
    </body>
</html> 
```

现在，当我运行[http://localhost:8000/basic](http://localhost:8000/basic)时，它非常适合 CRUD

后来我安装了apache服务器并复制了那个basic.html。当我运行[http://localhost:81/basic.html](http://localhost:81/basic.html)时，服务器不接受 json 数据。我同时运行了 apache 和 python 服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:47:45.643

您需要将您的客户端和服务器设置为跨域 ajax。

在 jquery 中，您可以`crossDomain : true`在`$.ajax()`调用中设置（请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)）

在服务器端，您需要设置几个接受标头 [http://enable-cors.org/](http://enable-cors.org/)

您可以通过查看 CORS 规范了解有关跨域请求的更多信息：http: [//www.w3.org/TR/cors/](http://www.w3.org/TR/cors/)

# c++ - GDB：获取确切的内存地址不是<地址0x4越界>

> ID：10528983
> 
> 赞同：0
> 
> 时间：2012-05-10T07:05:05.117
> 
> 标签：c++, gdb, memory-address

是否有可能在初始化之前获得 strs[i] 的确切地址值，而不是“< Address 0x4 out of bounds >”？？如果可能的话，那怎么办？

```
(gdb) list
15  int main()
16  {
17    int j, i;
18    char *strs[4];
19  
20    for (i = 0; i <= 3; i++)
21    {
22      strs[i] = new char [11];
23    }
24        
25    for (i = 0; i <= 3; i++)
26    {
27      init(strs[i]);
28    }
29  
30    for (j = 0; j <= 3; j++)
31    {
32      cout << strs[j] << endl;
33    }
34  
35    return(0);
36  
37  } 
```

下面是 strs[i] 的值：

```
(gdb) p strs[i]
$4 = 0x4 < Address 0x4 out of bounds > 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T07:13:00.403

这不好：

```
 char *strs[4];
   for (i = 1; i <= 4; i++) 
```

数组的索引从 0 开始。没有这样的元素`strs[4]`，这就是你超出范围的原因。地址没有意义。

# javascript - 线性插值如何在经典 Perlin 噪声中工作？

> ID：10528988
> 
> 赞同：2
> 
> 时间：2012-05-10T07:05:50.343
> 
> 标签：javascript, noise, perlin-noise, linear-interpolation

昨天我将经典的 Perlin 噪声（源代码：http: [//mrl.nyu.edu/~perlin/doc/oscar.html#noise](http://mrl.nyu.edu/~perlin/doc/oscar.html#noise)）移植到 JavaScript。奇怪的是，生成的噪音看起来与我预期的有很大不同。经典的 Perlin 噪声使用线性插值/lerp，但噪声是平滑的而不是边缘的。它看起来更像余弦插值。似乎 Perlin 以不同的方式使用 lerp 函数。

这是移植到 JavaScript 的**原始代码（带有画布图片）：http:** [//jsfiddle.net/fDTbv/](http://jsfiddle.net/fDTbv/)

这是有趣的部分：

```
t = vec[0] + N;
bx0 = Math.floor(t) & BM;
bx1 = (bx0+1) & BM;
rx0 = t - Math.floor(t);
rx1 = rx0 - 1.;

sx = s_curve(rx0);

u = rx0 * g1[ p[ bx0 ] ];
v = rx1 * g1[ p[ bx1 ] ];

return lerp(sx, u, v); 
```

u 和 v 总是在变化。为什么？不应该是 u 和 v 代表 sx 之前的点和 sx 之后的点，因此不要改变？

我**将代码更改**为“我所期望的”它的外观：http: [//jsfiddle.net/8Xv8G/](http://jsfiddle.net/8Xv8G/)

有趣的部分：

```
bx0 = Math.floor(x) & BM;
bx1 = (bx0+1) & BM;

u = g1[ p[ bx0 ] ];
v = g1[ p[ bx1 ] ];

return lerp(x - Math.floor(x), u, v); 
```

我的问题：为什么 Perlin 使用 lerp 函数的方式如此不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T01:30:44.403

[在这里](http://www.noisemachine.com/talk1/java/noisegrid.html)，您可以从 Perlin 的原始演讲中找到一个 Java 小程序，它非常清楚地解释了整个 2D 噪声计算过程。perlin 的噪声函数是连续的，因为在每个点（在一维中），它是两个“平滑”线性梯度的线性插值。“平滑”来自 s_curve 函数，它只是简单的 Hermite 函数，实际上是余弦插值的近似值。但是，我将把您留给小程序和演示文稿的其余部分以获得更好的解释。

也许你也可以发现[我的这个项目](http://lencinhaus.github.com/canvas-noise)很有趣：它是一个在 html5 画布上呈现 Perlin 和 Simplex 2D 噪声的 javascript 应用程序。查看源代码以获取这些和其他噪声函数的完整 javascript 实现。

希望对你有帮助，再见！

# android - Android中的SOAP

> ID：10528989
> 
> 赞同：0
> 
> 时间：2012-05-10T07:05:55.383
> 
> 标签：android, ksoap2

我在我的应用程序中使用 SOAP。在那我收到错误。

以下是我的请求的结构。

```
 <Search xmlns="URL">
              <authentication>
                <LoginID>string</LoginID>
                <Password>string</Password>
              </authentication>
              <ID>int</ID>
              <iD>int</iD>
              <dojStr>string</dojStr>
              <Data>
                <Keys>
                  <KPOfStringString>
                    <V>string</V>
                    <K>string</K>
                  </KPOfStringString>
                  <KPOfStringString>
                    <V>string</V>
                    <K>string</K>
                  </KPOfStringString>
                </Keys>
                <SortKeys>
                  <KPOfStringString>
                    <V>string</V>
                    <K>string</K>
                  </KPOfStringString>
                  <KPOfStringString>
                    <V>string</V>
                    <K>string</K>
                  </KPOfStringString>
                </SortKeys>
                <No>int</No>
                <Size>int</Size>
              </Data>
            </Search>
          </soap:Body> 
```

以下是我为此设置输入的方式。这是正确的方式吗，因为我收到了一些错误。

```
 PropertyInfo usrid =new PropertyInfo();
            usrid.setName("LoginID");
        usrid.setValue(userid);
        usrid.setType(String.class);
            request.addProperty(usrid);

            PropertyInfo pass =new PropertyInfo();
            pass.setName("Password");
            pass.setValue(password);
        pass.setType(String.class);
            request.addProperty(pass);

                PropertyInfo Id =new PropertyInfo();
        sourceid.setName("ID");
            sourceid.setValue(string value);
        sourceid.setType(int.class);
            request.addProperty(Id);

            PropertyInfo id =new PropertyInfo();
            destid.setName("id");
            destid.setValue(string value);
            destid.setType(int.class);
            request.addProperty(id);

                PropertyInfo dte =new PropertyInfo();
            dte.setName("dojStr");
            dte.setValue(date);
            dte.setType(String.class);
            request.addProperty(dte);

                PropertyInfo page =new PropertyInfo();
            page.setName("V");  
            page.setName("K");   
            page.setValue(null);
            page.setType(String.class);
            request.addProperty(page); 

                PropertyInfo no =new PropertyInfo();
            pageno.setName("no");           
        pageno.setValue(1);
            pageno.setType(int.class);
            request.addProperty(no);

            PropertyInfo size =new PropertyInfo();
            pagesize.setName("size");           
            pagesize.setValue(10);
            pagesize.setType(int.class);
        request.addProperty(size); 
```

它显示以下错误：

```
 05-10 12:39:30.027: W/System.err(469): SoapFault - faultcode: 'soap:Server' faultstring: 'System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> System.ArgumentNullException: Value cannot be null.

05-10 12:39:30.027: W/System.err(469):    at System.Number.StringToNumber(String str, NumberStyles options, NumberBuffer& number, NumberFormatInfo info, Boolean parseDecimal)
05-10 12:39:30.027: W/System.err(469):    at System.Number.ParseInt64(String value, NumberStyles options, NumberFormatInfo numfmt)
05-10 12:39:30.027: W/System.err(469):    at System.Int64.Parse(String s)
05-10 12:39:30.037: W/System.err(469): 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T08:02:13.807

destid.setType(int.class); <- Java 中的 int 不是简单类型吗？

你试过 destid.setType(Integer.class); ?

# android - android sqlite 约束更新失败

> ID：10528996
> 
> 赞同：3
> 
> 时间：2012-05-10T07:06:22.963
> 
> 标签：android, sqlite

我有一个带有 sqlite 数据库的 android 应用程序。有时当我更新我的表时，我会收到以下错误：

```
error code 19: constraint failed android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed 
```

我没有看到哪个约束会失败，因为我没有外键并且我没有插入 NULL 值。

桌子：

```
 "CREATE TABLE HIST (" +
    "_id INTEGER PRIMARY KEY AUTOINCREMENT," + 
    "CL TEXT UNIQUE, " +
    "ACOUNT INTEGER DEFAULT 0, " + 
    "HS INTEGER DEFAULT 0," + 
    "EX INTEGER DEFAULT 0," +
    "LU INTEGER NOT NULL DEFAULT 0," + 
    "LT REAL NOT NULL DEFAULT 0);"; 
```

更新代码：

```
 SQLiteStatement updateTempStatement = db.compileStatement("UPDATE HIST " +
            " SET LT=? WHERE _id=?");

    Cursor c = null;

    c = db.rawQuery(QUERY_SQL, new String[] { hs?"1":"0" });

    Info[] result = null; 

    if (c.getCount() > 0) {
        result = new Info[c.getCount()];

        int i = 0;
        int idInd = c.getColumnIndex("_id");
        int cInd = c.getColumnIndex("CL");
        int hsuInd = c.getColumnIndex("HSU");
        int ltInd = c.getColumnIndex("LT");

        db.beginTransaction();
        try {
            while (c.moveToNext()) {
                result[i] = new Info(c.getString(cInd),
                        c.getFloat(hsuInd),
                        c.getFloat(ltInd));

                updateTempStatement.bindDouble(1, result[i].getLt());
                updateTempStatement.bindLong(2, c.getLong(idInd));
                updateTempStatement.execute();

                i = i + 1;
            }
            db.setTransactionSuccessful();
        }
        finally {
            db.endTransaction();
        }

    }

    c.close();

    updateTempStatement.close(); 
```

例外是在`updateTempStatement.execute();`.

我看到的唯一约束是，`"NOT NULL"`但是该方法`Info.getlt()`返回一个浮点原语，所以它不能为 NULL。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T05:55:15.200

1) 表的重要约束之一是主键。当您尝试更新主键或将重复的主键插入表中时，会发生此错误。

2）尝试：

```
c.moveToFirst();
do {    
    //...
} while (c.moveToNext()); 
```

3) 您是否将参数正确传递给 Info(...)？

4) 你是否在 Info(...) 中正确赋值？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T01:45:37.013

首先，这是一个有效的列吗？

int hsuInd = c.getColumnIndex("HSU");

查看您的表格，该列标记为 HS。

其次，使用更新功能不是更好吗？

```
ContentValues values = new ContentValues();
values.put("LT", (Double) result[i].getLt());
int result = db.update("HIST", values, "_id = " + c.getInt("_id"), null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T04:50:59.373

您应该`updateTempStatement.execute();`在循环之外调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-13T06:27:51.970

仔细检查`result[i].getLt()`真的永远不会返回 null