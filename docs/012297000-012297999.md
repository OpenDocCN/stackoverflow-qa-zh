# StackOverflow 问答 12297000-12297999

# php - UTF-8 和 ISO-8859-1 混淆

> ID：12297000
> 
> 赞同：-2
> 
> 时间：2012-09-06T09:29:46.337
> 
> 标签：php, utf-8

> **可能重复：**
> [UTF-8：俄语字符和欧元符号不会出现并存储在 mysql 表中](https://stackoverflow.com/questions/12280745/utf-8-russian-characters-and-euro-symbol-do-not-appear-and-store-in-mysql-table)

我有一个 mysql 表来存储货币信息，包括它们的符号。存储符号的列是排序规则 'utf8_general_ci。网页的字符集设置为 UTF-8。但是当我从该表中获取欧元和英镑符号时，它在浏览器上显示不正确。如果我将页面字符集更改为 ISO-8859-1，则会出现这些符号。我需要 UTF-8，因为我还有一些 ISO-8859-1 不支持的俄语字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:40:39.280

确保您的连接使用正确的编码。`SET NAMES 'UTF8'`在运行任何选择查询之前执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:33:00.090

*   你的整个数据库应该是 utf8；
*   你的表应该是 utf8；
*   您的列应该是 utf8；
*   [您的连接应该是 utf8；](http://dev.mysql.com/doc/refman/5.0/en/charset-syntax.html)
*   你的http响应应该是utf8；
*   您的文件应保存为 utf8；
*   您的内容类型应设置为 utf8；
*   您的元标记应设置为 utf8。

# jetty - 使用参数 cacheControl 控制静态内容

> ID：12297004
> 
> 赞同：0
> 
> 时间：2012-09-06T09:29:51.483
> 
> 标签：jetty

这在 Jetty 服务器配置中究竟意味着什么？

```
<init-param>
      <param-name>cacheControl</param-name>
      <param-value>max-age=3600,public</param-value>
</init-param> 
```

根据 Jetty 中的文档，它指出

**cacheControl 如果设置，所有静态内容都会有这个值 -->**

 **谁能告诉我这是什么意思？？
意思是即使对JSP文件进行了更改，它也不会受到影响？？

请让我知道，提前谢谢。

我在 DefaultServlet 的 web.xml 下有这个，你能告诉我这个缓存了什么数据吗？

```
 <servlet>
      <servlet-name>default</servlet-name>
      <servlet-class>org.eclipse.jetty.servlet.DefaultServlet</servlet-class>
      <init-param>
           <param-name>mimeTypes</param-name>
         <param-value>text/javascript,text/css,audio/mpeg</param-value>
         <param-name>cacheControl</param-name>
         <param-value>max-age=435677,public</param-value>
      </init-param>
      <load-on-startup>1</load-on-startup>
   </servlet> 
```

**谁能告诉我提供静态内容是什么意思？为什么这很有用？**** 

**意味着为什么我们需要一个 Servlet 来访问静态资源？不能直接做吗？？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:37:06.453

该 init-param 不是“服务器配置”，而是 DefaultServlet 的“servlet 配置”。如果您使用它来提供静态内容，那么该默认 servlet 提供的任何内容都将应用该 cacheControl 值。

JSP 不由默认 servlet 提供服务，它们由安装并侦听另一个上下文的 jsp servlet 提供服务。

# joomla - 我们如何在管理后端为组件添加特色和非特色选项

> ID：12297005
> 
> 赞同：0
> 
> 时间：2012-09-06T09:29:51.237
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla1.7, joomla1.6

我们如何在管理后端添加组件`featured`和`unfeatured`选项。

我尝试使用文章管理器`(com_content)`。在那里我们可以选择文章的数量和变化作为特色。但是在`toolbar`.

我必须添加`publish/unpublish`工具栏等特色选项。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:00:13.690

我得到了结果。这是完成结果的以下代码。

在`view.html.php`为非特征工具栏添加以下行。

`JToolBarHelper::custom('featured.delete', 'remove.png', 'remove_f2.png', 'JTOOLBAR_REMOVE', true);`

在`featured`控制器中，有一个功能`(delete)`可以将特色删除为非特色。

# java - 关于 Primefaces 中托管使用 的 Java 类名约定

> ID：12297006
> 
> 赞同：1
> 
> 时间：2012-09-06T09:29:55.193
> 
> 标签：java, primefaces, managed-bean

我正在使用 Eclipse Indigo，每当我创建一个以小写字母开头的新类时，就会显示如下所示的警告（“不鼓励使用类型名称。按照惯例，Java 类型名称通常以大写字母开头”）。

![在此处输入图像描述](../Images/244f40fe433b2f02b59c3bac66404e1c.png)

现在在我的 xHTML / JSF 文件中，如果我尝试使用大写的第一个字母访问该类，则它无法访问，例如；

'#{MyClass.variableName}' 不可访问，也无法调用类构造函数，而 '#{myClass.variableName}' 工作正常。

注意：类有一个注解“@ManagedBean”

谢谢

这是已编辑的部分：仅当类以小写“myClass”的首字母创建并且在 JSF 文件访问中使用相同的小写“myClass”时才有效

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:07:43.477

为了遵循 Java 类名标准，我使用了以下方法。

```
@ManagedBean(name="myClass")
public class MyClass {

} 
```

以前由于 JSF 行为，我正在使用

```
@ManagedBean
public class myClass {

} 
```

还请分享您在这种情况下所做的事情。

谢谢，

阿萨德

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:40:24.957

它是预期的行为

> 默认情况下，与 bean 关联的名称只是其类名的小写形式

你给你的班级一个大写字母的名字，就像`MyClass`这样从你的xhtmls中访问它`#{myClass.someVariable}`（带有小写前缀）

它与 Primefaces 无关，它是 JSF 中的一般方法

# c++ - 使用 ctime 将给定日期提前到下一个日历日期的问题

> ID：12297007
> 
> 赞同：0
> 
> 时间：2012-09-06T09:29:56.993
> 
> 标签：c++, datetime, mktime, localtime, ctime

我编写了以下代码以将输入日期提前到以下日历日期。这在使用 g++ 4.1.2 编译的虚拟源文件中测试时效果很好

但是，当从我公司的模拟器中运行以下代码时（此时我无法获得其中的复杂细节），它会在 20021027 处中断；即对于 20021027 以外的日期，它按预期工作，但对于 20021027，它本身返回 20021027。

请告知可能出了什么问题？

```
int nextday(const int &date, int n=1)
{
    struct tm curr_time;

    int yyyy = curr_time.tm_year = date/10000-1900;
    int mm = curr_time.tm_mon=(date/100)%100-1;
    int dd = curr_time.tm_mday=date%100;
    curr_time.tm_min=0;
    curr_time.tm_sec=0;
    curr_time.tm_hour=0;

    time_t next = mktime(&curr_time) + 24*60*60*n;
    struct tm new_time;
    localtime_r(&next,&new_time);
    yyyy = 1900 + new_time.tm_year;
    mm = 1 + new_time.tm_mon;
    dd = new_time.tm_mday;
    return (10000*yyyy+100*mm+dd);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:27:50.793

我不明白为什么那一次约会会引起问题，但我不明白你为什么要以艰难的方式做事。只需 `tm_mday`在调用之前向该字段添加一个，然后从您传入的字段`mktime`中提取更正的值。（指针指向非常量是有原因的。）类似于：`struct tm``mktime``mktime`

```
int
nextday( int date, int n = 1 )
{
    tm broken_down;
    broken_down.tm_year = date / 10000 - 1900;
    broken_down.tm_mon = (date / 100) % 100 - 1;
    broken_down.tm_mday = date % 100 + n;
    broken_down.tm_hour = 12;  // avoid issues with summer time, etc.
    broken_down.tm_min = 0;
    broken_down.tm_sec = 0;
    mktime( &broken_down );
    return (broken_down.tm_year + 1900) * 10000
        +  (broken_down.tm_mon + 1) * 100
        +  broken_down.tm_mday;
} 
```

（您可能想要添加一些完整性检查，即验证`int` 传入的确实代表了预期格式的日期，并且 `n`在某个合理的范围内。或者如果您可以影响决定，请使用一些标准日期格式，所以您不必。）

无论如何，我怀疑模拟器中存在一些问题，特别是如果它在本地使用相同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:49:56.170

您只需达到 2147483647 的整数限制，然后向下舍入。

如果任何数字超过该值，请务必检查您的代码^^。切换到无符号应该可以解决这个问题（或者只是将问题退回到 4294967295）

编辑：你是对的。我的回答是错误的。

# java - Swing 应用中的 JTable 设计指南

> ID：12297009
> 
> 赞同：1
> 
> 时间：2012-09-06T09:30:11.323
> 
> 标签：java, swing, jtable

我的摇摆应用程序中有一个非常困难的设计问题。一般来说，我有一个`JTable`和一个`JLabel`要显示。标签就在桌子的正下方。

*   当这两个组件的高度不超过***阈值***时，表格和标签显示正常。那么这两个组件的高度会随着表中填写的记录数的增加而增加。
*   当这两个组件的高度超过一个阈值时，我希望表格中有一个滚动条，这两个组件的高度将是阈值。

这种设计***可能***吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:37:03.660

这当然是可能的。把你`JTable`放在`JScrollPane`你设置滚动窗格首选大小的地方。

并使用 a`LayoutManager`允许将这两个组件放在一起（例如 a `BorderLayout`）。所以在伪代码中

```
JPanel container = new JPanel( new BorderLayout() );

JTable table=...;
JScrollPane scroll = new JScrollPane( table );
scroll.setPreferredSize( xxx, xxx );
container.add( scroll, BorderLayout.CENTER );

container.add( new JLabel( "my label" ), BorderLayout.SOUTH ); 
```

如果需要，您可以调整滚动窗格的滚动条策略

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T11:51:50.710

当首选大小更改时，Swing 布局不会自动重新布局，您必须调用 revalidate（最好使用 TableModelListener 检查行数是否已更改）。您还需要一个布局，该布局根据组件的首选大小调整组件的大小，BorderLayout 为边框中的组件执行此操作（但不适用于中心的组件。对于不同的管理器，您需要 GridBag 或更好的 Mig-/Form-或表格（第三方）布局

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class TestTableLayout {
    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                final JPanel panel = new JPanel(new BorderLayout());
                panel.setPreferredSize(new Dimension(400, 400));

                final DefaultTableModel model = new DefaultTableModel(0, 1);
                JTable table = new JTable(model) {
                    @Override
                    public Dimension getPreferredScrollableViewportSize() {
// view port size should be the same as the preferred size
// limited to the height threshold
                        Dimension size = super.getPreferredSize();
                        size.height = Math.min(size.height, 100);
                        return size;
                    }
                };

                new Timer(1000, new ActionListener() {
                    @Override
                    public void actionPerformed(ActionEvent e) {
                        model.addRow(new Object[] { "Extra row!" });
// trigger a relayout of the panel
                        panel.revalidate();
                        panel.repaint();
                    }
                }).start();

                panel.add(new JScrollPane(table), BorderLayout.PAGE_START);

                JLabel label = new JLabel("my label");
                label.setVerticalAlignment(JLabel.TOP);
                panel.add(label, BorderLayout.CENTER);

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.getContentPane().add(panel);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }
} 
```

# javascript - 未找到 Javascript 变量

> ID：12297015
> 
> 赞同：0
> 
> 时间：2012-09-06T09:30:28.220
> 
> 标签：javascript, asp.net

我在 ASPX 上有脚本：

```
<dx:ASPxButton ID="ASPxButton_PrintLetrVoit" runat="server" Text="Impression lettre de voiture(décalage)" AutoPostBack="False">
      <ClientSideEvents Click="function (s, e) { e.processOnServer = false; for (var i = 0; i < Tourne.length; i++) {window.open('PrintLettreVoit.aspx?TourneId='+Tourne[i]);}}" />
</dx:ASPxButton> 
```

在 cs 中：

```
public List<string> Tourne;

protected void Page_Load(object sender, EventArgs e)
{
      try
      {
          foreach (var oItem in oOrdre_BL.GetAllLettrVoit_Tourne())
          {
           Page.ClientScript.RegisterArrayDeclaration("Tourne", "'"+oItem+"'");
          }
      ...... 
```

不幸的是，我在 javascript 上遇到了错误：我遇到了错误：

```
Horodatage : 06/09/2012 11:23:03
Erreur : ReferenceError: Tourne is not defined
Fichier Source : http://xxxxxxx/Code/BackEnd/FaExped_BackEnd_WebSite/Ordre.aspx
Ligne : 5146 
```

任何想法 ？

提前谢谢你

PS：当我看到生成的源代码时：

```
<script type="text/javascript">
//<![CDATA[
var Tourne =  new Array('');
//]]>
</script>

<script type="text/javascript">
//<![CDATA[

WebForm_InitCallback();//]]>
</script>
</form>

</body>
</html> 
```

我修改了我的代码：

```
 <dx:ASPxButton ID="ASPxButton_PrintLetrVoit" runat="server" Text="Impression lettre de voiture(décalage)" AutoPostBack="False">
                          <ClientSideEvents Click="function (s, e) {   
                          if(typeof(Tourne) !== 'undefined' && Tourne != null) 
                          {
                            e.processOnServer = false; 

                             for (var i = 0; i < Tourne.length; i++) {window.open('PrintLettreVoit.aspx?TourneId='+Tourne[i]);}
                          }
                          else
                          {alert ('Tous est coches');}

                             }" />
                        </dx:ASPxButton> 
```

但是，这仍然不是一个好的解决方案，因为我不知道为什么 Tourne 是未定义的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:11:43.053

*可能*是数据中有一些单引号。出现问题的原因如下：

当您调用“Page.ClientScript.RegisterArrayDeclaration”时，它会将该项目添加到页面底部的 JavaScript 数组声明中。

因此，以下内容：

```
Page.ClientScript.RegisterArrayDeclaration("Tourne", "'a'");
Page.ClientScript.RegisterArrayDeclaration("Tourne", "'b'");
Page.ClientScript.RegisterArrayDeclaration("Tourne", "'c'"); 
```

将在页面上呈现以下 JavaScript：

```
<script type="text/javascript">
//<![CDATA[
var Tourne =  new Array('a', 'b', 'c');
//]]>
</script> 
```

如果“oOrdre_BL.GetAllLettrVoit_Tourne()”返回的数据中有任何单引号，那么它将插入这些单引号。所以，如果我添加了“'brok'en'”的第四个元素（无效，因为它有一个额外的单引号）：

```
Page.ClientScript.RegisterArrayDeclaration("Tourne", "'brok'en'"); 
```

然后它将呈现以下无效的 JavaScript：

```
<script type="text/javascript">
//<![CDATA[
var Tourne =  new Array('a', 'b', 'c', 'brok'en');
//]]>
</script> 
```

如果发生这种情况，那么“Tourne”将永远无法正确定义，因为 JavaScript 无效。因此，您应该在尝试将数据放入数组之前“清理”数据。以下应该可以“转义”单引号：

```
Page.ClientScript.RegisterArrayDeclaration("Tourne", "'" + oItem.Replace("'", "\\'") + "'"); 
```

当然，这是基于不良数据的假设。如果这不起作用，最好的办法是在查看页面时在浏览器中“查看源代码”。查看在 JavaScript 中定义“Tourne”的标记底部，并在此处发布 - 它应该有助于弄清楚发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-04T06:18:15.173

我遇到了同样的问题，我发现我的页面位于导致问题的更新面板中。我必须禁用脚本管理器的部分渲染属性，如下所示：

```
<telerik:RadScriptManager ID="radScriptManager1" runat="server" EnablePartialRendering="false"/> 
```

# python - 如何在 numpy ndarray 中找到最常见的值？

> ID：12297016
> 
> 赞同：20
> 
> 时间：2012-09-06T09:30:27.707
> 
> 标签：python, numpy, multidimensional-array

我有一个形状为 (30,480,640) 的 numpy ndarray，第 1 和第 2 轴代表位置（纬度和经度），第 0 轴包含实际数据点。我想在每个位置沿第 0 轴使用最频繁的值，其中是构造一个形状为（1,480,640）的新数组。即：

```
>>> data
array([[[ 0,  1,  2,  3,  4],
        [ 5,  6,  7,  8,  9],
        [10, 11, 12, 13, 14],
        [15, 16, 17, 18, 19]],

       [[ 0,  1,  2,  3,  4],
        [ 5,  6,  7,  8,  9],
        [10, 11, 12, 13, 14],
        [15, 16, 17, 18, 19]],

       [[40, 40, 42, 43, 44],
        [45, 46, 47, 48, 49],
        [50, 51, 52, 53, 54],
        [55, 56, 57, 58, 59]]])

(perform calculation)

>>> new_data 
array([[[ 0,  1,  2,  3,  4],
        [ 5,  6,  7,  8,  9],
        [10, 11, 12, 13, 14],
        [15, 16, 17, 18, 19]]]) 
```

数据点将包含负数和正数浮点数。我怎样才能进行这样的计算？非常感谢！

我尝试使用 numpy.unique，但我得到“TypeError: unique() got an unexpected keyword argument 'return_inverse'”。我正在使用 Unix 上安装的 numpy 版本 1.2.1，它不支持 return_inverse ..我也试过模式，但是处理如此大量的数据需要永远......那么有没有另一种方法来获得最频繁的值？再次感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-06T12:32:40.307

要查找平面数组的最常见值，请使用`unique`和：`bincount``argmax`

```
arr = np.array([5, 4, -2, 1, -2, 0, 4, 4, -6, -1])
u, indices = np.unique(arr, return_inverse=True)
u[np.argmax(np.bincount(indices))] 
```

要使用多维数组，我们不需要担心`unique`，但我们确实需要使用`apply_along_axis`on `bincount`：

```
arr = np.array([[5, 4, -2, 1, -2, 0, 4, 4, -6, -1],
                [0, 1,  2, 2,  3, 4, 5, 6,  7,  8]])
axis = 1
u, indices = np.unique(arr, return_inverse=True)
u[np.argmax(np.apply_along_axis(np.bincount, axis, indices.reshape(arr.shape),
                                None, np.max(indices) + 1), axis=axis)] 
```

使用您的数据：

```
data = np.array([
   [[ 0,  1,  2,  3,  4],
    [ 5,  6,  7,  8,  9],
    [10, 11, 12, 13, 14],
    [15, 16, 17, 18, 19]],

   [[ 0,  1,  2,  3,  4],
    [ 5,  6,  7,  8,  9],
    [10, 11, 12, 13, 14],
    [15, 16, 17, 18, 19]],

   [[40, 40, 42, 43, 44],
    [45, 46, 47, 48, 49],
    [50, 51, 52, 53, 54],
    [55, 56, 57, 58, 59]]])
axis = 0
u, indices = np.unique(arr, return_inverse=True)
u[np.argmax(np.apply_along_axis(np.bincount, axis, indices.reshape(arr.shape),
                                None, np.max(indices) + 1), axis=axis)]
array([[ 0,  1,  2,  3,  4],
       [ 5,  6,  7,  8,  9],
       [10, 11, 12, 13, 14],
       [15, 16, 17, 18, 19]]) 
```

* * *

NumPy 1.2，真的吗？您可以`np.unique(return_inverse=True)`合理有效地使用`np.searchsorted`（这是一个额外的 O( *n* log *n* )，因此不应显着改变性能）：

```
u = np.unique(arr)
indices = np.searchsorted(u, arr.flat) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-06T20:05:50.860

使用 SciPy 的 mode 函数：

```
import numpy as np
from scipy.stats import mode

data = np.array([[[ 0,  1,  2,  3,  4],
                  [ 5,  6,  7,  8,  9],
                  [10, 11, 12, 13, 14],
                  [15, 16, 17, 18, 19]],

                 [[ 0,  1,  2,  3,  4],
                  [ 5,  6,  7,  8,  9],
                  [10, 11, 12, 13, 14],
                  [15, 16, 17, 18, 19]],

                 [[40, 40, 42, 43, 44],
                  [45, 46, 47, 48, 49],
                  [50, 51, 52, 53, 54],
                  [55, 56, 57, 58, 59]]])

print data

# find mode along the zero-th axis; the return value is a tuple of the
# modes and their counts.
print mode(data, axis=0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-11-12T18:49:41.690

在我看来，一个稍微好一点的解决方案如下

```
tmpL = np.array([3, 2, 3, 2, 5, 2, 2, 3, 3, 2, 2, 2, 3, 3, 2, 2, 3, 2, 3, 2])
unique, counts = np.unique(tmpL, return_counts=True)
return unique[np.argmax(counts)] 
```

使用`np.unique`我们可以获得每个唯一元素的计数。in 中最大元素的索引`counts`将是 中的对应元素`unique`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:34:48.023

`flatten`[`collections.Counter`](http://docs.python.org/library/collections.html)你的数组，然后从中构建一个。像往常一样，在比较浮点数时要特别小心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-08-28T08:02:11.047

解释@ecatmurs 部分

```
u[np.argmax(np.apply_along_axis(np.bincount, axis, indices.reshape(arr.shape),
                                None, np.max(indices) + 1), axis=axis)] 
```

更多一点，并在重新阅读时将其重组为更简洁（因为我使用了这个解决方案，几周后我想知道这个函数发生了什么）：

```
axis = 0
uniques, indices = np.unique(arr, return_inverse=True)

args_for_bincount_fn = None, np.max(indices) + 1
binned_indices = np.apply_along_axis(np.bincount,
                            last_axis, 
                            indices.reshape(arr.shape),
                            *args_for_bincount_fn)

most_common = uniques[np.argmax(binned_indices,axis=axis)] 
```

# c# - 时间：2019-05-10 标签：c#winceGetPrivateProfileString

> ID：12297017
> 
> 赞同：1
> 
> 时间：2012-09-06T09:30:31.217
> 
> 标签：c#, windows-ce

我用于`GetPrivateProfileString`普通 PC 的 .Net(C#) 程序，我尝试使用同一个类从`config.ini`文件中获取信息。

```
 [DllImport("coredll.dll")]
    private static extern int GetPrivateProfileString(    // GetIniValue 를 위해
        String section,
        String key,
        String def,
        StringBuilder retVal,
        int size,
        String filePath);

    [DllImport("coredll.dll")]
    private static extern long WritePrivateProfileString(  // SetIniValue를 위해
        String section,
        String key,
        String val,
        String filePath); 
```

但是，`coredll.dll`不支持`GetPrivateProfileString`和`WritePrivateProfileString`。

有什么办法可以得到这个功能`WINCE`吗？

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:43:42.920

> 有没有办法让WINCE这个功能？？？？

不，我希望不会。WinCe 是 Windows 的“精简”版本，无需保持与 Win 3.1 的向后兼容性

WinCE 确实有一个注册表，编写自己的*简单*ini 文件解析器相对容易。

更好的主意当然是使用更现代的方式来存储配置。像 XML。

# c++ - `List x;` 和 `List x()` 之间有什么区别吗

> ID：12297021
> 
> 赞同：5
> 
> 时间：2012-09-06T09:30:39.703
> 
> 标签：c++, variable-declaration, most-vexing-parse

标题来自 Marshall Cline 的著名站点[C++ FAQ](http://www.parashift.com/c++-faq-lite/empty-parens-in-object-decl.html)。

作者声称以下两个代码示例之间存在差异。

> 假设 List 是某个类的名称。然后函数 f() 声明了一个名为 x 的本地 List 对象：

```
void f()
{
    List x;     // Local object named x (of class List)
    ...
} 
```

> 但是函数 g() 声明了一个名为 x() 的函数，它返回一个 List：

```
void g()
{
    List x();   // Function named x (that returns a List)
    ...
} 
```

但是使用第二种变体真的是错误的吗？

如果它真的是一个声明，编译器不会抱怨你不能在一个函数中声明一个函数吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T09:31:58.620

> 如果它真的是一个声明，编译器不会抱怨你不能在一个函数中声明一个函数。

当然不是。因为您**可以**使用函数声明函数。

这被称为**最令人烦恼的解析**，并且有据可查。其实代表编译器去处理会报错

```
List x(); 
```

作为变量声明。

> 但是使用第二种变体真的是错误的吗？

如果你想要一个变量，那么是的。如果你想声明一个函数......有点是的。您可以，但通常您会在函数范围之外执行此操作。

# c# - 如何删除特定文件夹中的所有文件？

> ID：12297024
> 
> 赞同：59
> 
> 时间：2012-09-06T09:30:50.567
> 
> 标签：c#, .net

我在运行时将文件保存在特定文件夹中。一段时间后，我想以编程方式删除它们。如何删除特定文件夹中的所有文件？

* * *

## 回答 #1

> 赞同：138
> 
> 时间：2012-09-06T09:32:47.033

```
string[] filePaths = Directory.GetFiles(@"c:\MyDir\");
foreach (string filePath in filePaths)
File.Delete(filePath); 
```

或者在一行中：

```
Array.ForEach(Directory.GetFiles(@"c:\MyDir\"), File.Delete); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-06T09:33:53.697

您可以通过[FileInfo](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.delete.aspx)或[DirectoryInfo](http://msdn.microsoft.com/en-us/library/c66e2tts.aspx)做到这一点：

```
DirectoryInfo di = new DirectoryInfo("TempDir");
di.Delete(true); 
```

然后重新创建目录

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-06T09:34:18.217

```
System.IO.DirectoryInfo myDirInfo = new DirectoryInfo(myDirPath);

foreach (FileInfo file in myDirInfo.GetFiles())
{
    file.Delete(); 
}
foreach (DirectoryInfo dir in myDirInfo.GetDirectories())
{
    dir.Delete(true); 
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-09-06T09:33:04.580

添加以下命名空间，

```
using System.IO; 
```

并使用`Directory`该类到达特定文件夹：

```
string[] fileNames = Directory.GetFiles(@"your directory path");
foreach (string fileName in fileNames)
    File.Delete(fileName); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-06T09:33:40.853

尝试这个：

```
foreach (string file in Directory.GetFiles(@"c:\directory\"))
  File.Delete(file); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T09:34:03.017

您可以执行以下操作：

```
Directory directory = new DirectoryInfo(path);
List<FileInfo> fileInfos = directory.EnumerateFiles("*.*", SearchOption.AllDirectories).ToList();
foreach (FileInfo f in fileInfos)
    File.Delete(f.FullName); 
```

# cocos2d-iphone - 我正在制作一款 coocs2d 游戏并在其中实现 Game Center。我的游戏中心不适用于横向模式

> ID：12297028
> 
> 赞同：2
> 
> 时间：2012-09-06T09:31:05.490
> 
> 标签：cocos2d-iphone, game-center, uiinterfaceorientation

我想将我的游戏中心默认设置为横向模式，但没有成功。我尝试了一些课程，但没有结果...

```
#import "GKMatchmakerViewController-LandscapeOnly.h"

@implementation GKMatchmakerViewController (LandscapeOnly)

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation { 
    return ( UIInterfaceOrientationIsLandscape( interfaceOrientation ) );
}

@end 
```

我的游戏也实现了这个类。

如果您有一些解决方案，请让我帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-06T12:07:09.197

嘿，这东西不能在模拟器中工作，但对我来说它适用于设备......

已解决的问题......

# javascript - 如果未按下按钮，则在 30 秒内自动执行该功能

> ID：12297040
> 
> 赞同：3
> 
> 时间：2012-09-06T09:31:48.853
> 
> 标签：javascript, jquery, html

我想在我的网页中添加以下功能：如果用户在 30 秒内没有按下“接受”按钮，则会`$('#popupBoxAccept').click( function() {..}`自动执行。

```
$(document).ready(function() {
    loadPopupBox();
});

function loadPopupBox() {   // to load the Popupbox 
    $('#popup_box').fadeIn("slow");     
}

$('#popupBoxAccept').click( function() {            
    //...
});

$('#popupBoxDecline').click( function() {           
    //...
});

<div id="popup_box">
    <a id="popupBoxAccept">Accept</a>
    <a id="popupBoxDecline">Decline</a>     
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T09:33:57.020

## *[jsFiddle 演示](http://jsfiddle.net/y5Vch/)*

```
var tim = setTimeout(function(){
    $('#popupBoxAccept').click();
},30000); 
```

在*手动*点击里面：

```
$('#popupBoxAccept').click(function(){
     clearTimeout(tim);
      // ........
}); 
```

正如@Elias 所建议的那样：

```
$('#popupBoxDecline').click( function() {
    clearTimeout(tim);           
    //...
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T09:34:07.667

一个简单的选择是使用标志和`setTimeout`函数：

```
var clicked = false;
$("#popupBoxAccept").click(function() {
    clicked = true;
    //...
});

setTimeout(function() {
    if (!clicked) {
        $("#popupBoxAccept").click();
    }
}, 30000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:34:18.467

试试这个

```
setTimeOut(function(){
  $('#popupBoxAccept').click( function() {            
    //...
});
}, 30000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T09:37:23.710

只需设置一个超时：

```
var tim;//global, I'll provide a (more complex) solution that doesn't need them, too
function loadPopupBox() {   // to load the Popupbox 
    $('#popup_box').fadeIn("slow");
    tim = setTimeout(function()
    {
        $('#popup_box').click();
    },30000);
}

$('#popupBoxAccept').click( function() {            
    clearTimeout(tim);
}); 
```

现在，不使用*EVIL*全局变量：

```
$(document).ready(function()
{
    (function(popup,accept,decline)
    {
        popup.fadeIn("slow");
        var tim = setTimeout(function()
        {
            accept.click();//<-- access to reference is preserved
        },30000);
        accept.click(function()
        {
            clearTimeout(tim);
            //do accept stuff
        });
        decline.click(function()
        {
            clearTimeout(tim);//<-- need that here, too!
            //do decline stuff
        });
    })($('#popup_box'),$('#popupBoxAccept'),$('#popupBoxDecline'));
    //pass all 3 elements as argument --> less typing, and is more efficient:
    //the DOM is only searched once for each element
}); 
```

为什么这很有用？很简单：您现在可以`var tim`在另一个上下文中使用，而不会丢失对超时的引用。闭包，名字就说明了一切：所有变量和引用都整齐地捆绑在同一个范围内，并且不能访问，只能在声明的范围内访问：

```
var foo = (function()
{
    var invisible = 'Now you see me';
    return function()
    {
        return invisible;
    }
};
console.log(invisible);//<-- undefined
var invisible = 'Now you don\'t';
console.log(foo());//<-- Now you see me
console.log(invisible);//Now you don\'t 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T09:34:36.253

尝试将其放入您的`$(document).ready()`通话中：

```
setTimeout(function() {
    if(!clicked) {
        $('#popupBoxAccept').click();
    }
}, 30000); 
```

然后改变

```
$('#popupBoxAccept').click( function() {
    //...
}); 
```

到

```
var clicked = false;
$('#popupBoxAccept').click( function() {
    clicked = true;
    //...
}); 
```

# ios - 如何在 iOS 中为地理围栏添加本地通知

> ID：12297041
> 
> 赞同：1
> 
> 时间：2012-09-06T09:31:48.970
> 
> 标签：ios, mapkit, geofencing

我正在尝试创建一个应用程序，当我靠近某些位置时通知我公共汽车它不起作用但这里是我使用的代码

```
self.locationManager = [[[CLLocationManager alloc] init] autorelease];
locationManager.delegate = self;

locationManager.desiredAccuracy=kCLLocationAccuracyBestForNavigation;

locationManager.distanceFilter = 5;

[locationManager startUpdatingLocation];

CLLocationCoordinate2D loc;

loc.latitude = 30.794253 ;
loc.longitude = 31.012369 ;

[CLLocationManager regionMonitoringEnabled];

alslamMosque =[[CLRegion alloc]initCircularRegionWithCenter:loc radius:800 identifier:@"alslam"];

[locationManager startMonitoringForRegion:alslamMosque desiredAccuracy:50];

[locationManager startMonitoringSignificantLocationChanges]; 
```

和代表们

```
(void)locationManager:(CLLocationManager *)managerdidEnterRegion:(CLRegion *)region __OSX_AVAILABLE_STARTING(__MAC_10_7,__IPHONE_4_0)
{

    UIAlertView *alr=[[UIAlertView alloc]
                                  initWithTitle:@"Reminder didEnterRegion" 
                                  message:region.identifier delegate:nil 
                                  cancelButtonTitle:nil otherButtonTitles:@"Ok",nil];

    [alr show];

    [alr release];

} 

(void)locationManager:(CLLocationManager *)managerdidExitRegion:(CLRegion *)region __OSX_AVAILABLE_STARTING(__MAC_10_7,__IPHONE_4_0)
{

     UIAlertView *alr=[[UIAlertView alloc] 
                                    initWithTitle:@"Reminder didExitRegion" 
                                    message:region.identifier delegate:nil 
                                    cancelButtonTitle:nil otherButtonTitles:@"Ok",nil];
     [alr show];

     [alr release];
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-09-18T17:22:15.623

看到这是 6 岁，我通过谷歌找到了这个，我将为任何其他正在寻找快速复制和粘贴解决方案的开发人员提供答案。

我假设您已经在应用程序 info.plist 中添加了正确的位置描述，并且您已经实现了正确的`CLLocationManagerDelegate`方法。

这也值得您花时间阅读：[https](https://developer.apple.com/documentation/corelocation/cllocationmanager?language=objc) ://developer.apple.com/documentation/corelocation/cllocationmanager?language=objc还有这个：[https](https://developer.apple.com/documentation/usernotifications?language=objc) ://developer.apple.com/documentation/usernotifications?language=objc但是如果您已经完成了正确的设置，下面的代码应该可以正常工作。

**第一步：**
设置location manager，设置delegate，确保我们有使用权限：

```
CLLocationManager *locationManager = [[CLLocationManager alloc] init];  
[locationManager setDelegate:self];  
[locationManager setDesiredAccuracy:kCLLocationAccuracyHundredMeters];  
[locationManager setDistanceFilter:50];  
if ([locationManager respondsToSelector:@selector(requestAlwaysAuthorization)]) [locationManager requestAlwaysAuthorization];  
if ([locationManager respondsToSelector:@selector(requestWhenInUseAuthorization)]) [locationManager requestWhenInUseAuthorization]; 
```

**步骤 2**
给位置管理器一个要监控的区域

```
CLLocationCoordinate2D center = CLLocationCoordinate2DMake(32.6099, -85.4808); // Auburn, Alabama Home of the Auburn Tigers, War Eagle!
CLCircularRegion *region = [[CLCircularRegion alloc] initWithCenter:center  radius:1609 identifier:@"myGeofenceId"]; // Radius is set to a be a mile, given in meters  
region.notifyOnEntry = YES; // Tell it to notify you on entry  
[locationManager startMonitoringForRegion:region]; 
```

**第 3 步**
虽然您的代码创建了一个警报视图，但问题是要求本地通知，因此我们将创建一个并在设备进入该区域时触发它。我的代码也仅在应用程序在后台时发送本地通知，但如果您不希望这样做，您可以注释掉 if 语句。

```
- (void)locationManager:(CLLocationManager*)manager didEnterRegion:(CLRegion *)region {  
        // This is optional, but useful if you only want a notification if the phone is in the background.
        if([[UIApplication sharedApplication] applicationState] == UIApplicationStateBackground) {
            [self createLocalNotificationWithDescription:@"You've entered the region!" AndId:@"Notification ID"];
        }
}  

// This just makes it a little easier and more tidy
-(void) createLocalNotificationWithDescription:(NSString *)description AndId:(NSString *)notificationID {

    NSMutableDictionary *userInfo = [[NSMutableDictionary alloc] init];
    [userInfo setObject:notificationID forKey:@"notification_id"];  
    UILocalNotification *localNotification = [[UILocalNotification alloc] init];
    localNotification.userInfo = userInfo; // set the push id
    localNotification.alertBody = [NSString stringWithFormat:@"%@", description]; // Set the body of the push
    localNotification.soundName = [NSString stringWithFormat:@"Notification_sound_file.mp3"]; // Give it the alert sounds

    localNotification.fireDate = [[NSDate date] dateByAddingTimeInterval:0]; // Fire the notification now
    localNotification.timeZone = [NSTimeZone systemTimeZone];
    localNotification.repeatInterval = 0;  

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; // Ask the app to send the local push
} 
```

此代码已在 Xcode 9.4.1 上针对 iOS 9 进行了测试。它使用模拟器、iOS 9 上的 iPhone 5 和运行 iOS 11.3.1 的 iPhone 7 Plus 工作。

# java - Spring LDAP 基本用法

> ID：12297044
> 
> 赞同：6
> 
> 时间：2012-09-06T09:32:02.573
> 
> 标签：java, spring, spring-ldap

我试图通过设置最基本的工作程序来弄清楚 Spring LDAP（*不是*Spring 安全性的东西）是如何工作的，但似乎实际的身份验证中断了。

这是我得到的错误：

```
线程“主”java.lang.NullPointerException 中的异常
    在 org.springframework.ldap.core.support.AbstractContextSource.getReadOnlyContext(AbstractContextSource.java:125)
    在 org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:287)
    在 org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:237)
    在 org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:588)
    在 org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:546)
    在 org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:401)
    在 org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:421)
    在 org.springframework.ldap.core.LdapTemplate.search(LdapTemplate.java:441)

```

在引发异常的方法中执行的代码是：

```
return getContext(authenticationSource.getPrincipal(),
                  authenticationSource.getCredentials()); 
```

所以似乎我需要在应用程序上下文中设置身份验证源？我真的迷路了。

这是我的代码：

```
package se.test.connector.ldap;

import java.util.List;
import javax.naming.NamingException;
import javax.naming.directory.Attributes;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.ldap.core.AttributesMapper;
import org.springframework.ldap.core.DistinguishedName;
import org.springframework.ldap.core.LdapTemplate;
import org.springframework.ldap.core.support.LdapContextSource;
import org.springframework.ldap.filter.EqualsFilter;

public class LdapTest {

    public static void main(String[] args) {
        LdapContextSource ctxSrc = new LdapContextSource();
        ctxSrc.setUrl("ldap://<ldapUrl>:389");
        ctxSrc.setBase("DC=bar,DC=test,DC=foo");
        ctxSrc.setUserDn("<username>@bar.test.foo");
        ctxSrc.setPassword("<password>");

        LdapTemplate tmpl = new LdapTemplate(ctxSrc);

        PersonDao dao = new PersonDao(tmpl);
        dao.getAllPersonNames();
    }

    public static class PersonDao {

        private LdapTemplate ldapTemplate;

        public PersonDao(LdapTemplate ldapTemplate) {
            this.ldapTemplate = ldapTemplate;
        }

        public void setLdapTemplate(LdapTemplate ldapTemplate) {
            this.ldapTemplate = ldapTemplate;
        }

        public List getAllPersonNames() {
            EqualsFilter filter = new EqualsFilter("objectclass", "person");
            return ldapTemplate.search(DistinguishedName.EMPTY_PATH,
                    filter.encode(),
                    new AttributesMapper() {

                        public Object mapFromAttributes(Attributes attrs) throws NamingException {
                            return attrs.get("cn").get();
                        }
                    });
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-05T17:24:09.870

我有一个非常相似的问题 - 也有`NullPointerException`.

解决我的问题的是调用[afterPropertiesSet()](http://static.springsource.org/spring-ldap/docs/1.2.0/api/spring-ldap/org/springframework/ldap/core/support/AbstractContextSource.html#afterPropertiesSet%28%29)：

```
// ...

LdapContextSource ctxSrc = new LdapContextSource();
ctxSrc.setUrl("ldap://<ldapUrl>:389");
ctxSrc.setBase("DC=bar,DC=test,DC=foo");
ctxSrc.setUserDn("<username>@bar.test.foo");
ctxSrc.setPassword("<password>");

ctxSrc.afterPropertiesSet(); /* ! */

LdapTemplate tmpl = new LdapTemplate(ctxSrc);

// ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T11:35:18.600

从表面上看，它看起来很合适。有一件事，您的 userDn 并不是真正的专有名称。它应该是格式“ `CN=<...>, DC=bar, DC=test, DC=foo`”。由于您没有提供有关您正在使用的 LDAP 服务器或目录结构的外观（OU 结构等）的详细信息，因此很难更精确。

# wordpress - 没有以正确大小生成 WordPress 缩略图

> ID：12297048
> 
> 赞同：0
> 
> 时间：2012-09-06T09:32:13.720
> 
> 标签：wordpress, thumbnails, attachment

我的 WordPress 媒体设置[是这样](http://cl.ly/JGIe/o)设置的。根据这些设置，生成的缩略图不应超过 540 像素的宽度。

[我在这样](http://cl.ly/JFvr/o)的帖子中嵌入了一张图片。我选择“大”作为缩略图大小，其宽度应限制为 540 像素。

最终结果是1024x769 像素[的缩略图](http://www.rustyrambles.com/wp-content/uploads/2012/02/p1000775-1024x768.jpg)。为什么这些缩略图不符合我的媒体设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:22:09.757

您可能会在上传此图像后修改这些设置。

你会发现几个插件可以重新生成缩略图。

PS：这个问题应该移到[https://wordpress.stackexchange.com/](https://wordpress.stackexchange.com/)

# c++ - 这个联合会破坏严格的别名吗？浮点寄存器呢

> ID：12297049
> 
> 赞同：2
> 
> 时间：2012-09-06T09:32:13.760
> 
> 标签：c++, gcc, unions, floating, strict-aliasing

```
union
{
    Uint32 Integer;
    Float32 Real;
} Field; 
```

我必须使用那个联合来实现一点 IEEE 技巧，这会破坏严格的混叠吗？GCC 没有发出任何警告（使用 GCC 4.5 和 4.6 进行了尝试，即使使用了迂腐的严格别名，但据我所知，GCC 并不能很好地捕捉严格的别名规则违规行为（大量误报/误报）。

```
Field A;
A.Integer = (Value1 & B) || Value2;
return A.Real; 
```

那是我目前正在使用的片段，它似乎可以正常工作而没有任何警告，但某些编译器优化可能会出现副作用或未定义的行为。因此，如果那段代码在某些情况下可能不安全，我将努力将其删除。

此外，我假设这段代码需要将数据从标准寄存器移动到大多数现代 CPU 上的浮点寄存器（只是对此感到好奇），这涉及到与旧 CPU 相关的一些额外周期，对吗？

上面的代码不打算做优化，所以不要贬低我滥用优化，上面的代码是我获得某个结果的最简单方法（幸运的是，最简单的方法似乎也是最快的我的情况！），如果结果不安全，那么我将使用较慢的方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T17:35:17.703

通过联合的别名在 C 中定义，但在 C++ 中具有未定义的行为；未定义的行为等同于从未初始化的变量读取时发生的行为（左值到右值的转换）。

因此，最有可能破坏的方式是优化器决定从联合中消除读取，因为它没有定义的值。但是，大多数 C 和 C++ 编译器可能会为您提供 C 行为，因为它们无论如何都需要支持它。

给值取别名的安全方法是通过按字节复制，例如`std::memcpy`或`std::copy(reinterpret_cast<char *>(...), ...)`。或者，如果您可以在 C 和 C++ 中编译您的项目，您可以将联合别名代码移动到 C 源文件并将该代码编译为 C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T17:04:20.257

它是 UB（但不需要严格的别名）。此外，`union`d 数据始终由实现（AFAIK）存储在内存中，否则将需要知道源数据来自哪个寄存器，这意味着知道源类型。

# json - Jackson @JsonTypeInfo 注释是否有任何替代方法

> ID：12297050
> 
> 赞同：4
> 
> 时间：2012-09-06T09:32:14.523
> 
> 标签：json, jackson

朋友们，

Jackson 框架提供了基于注解的方法来在序列化过程中发出类型信息。

我不想在我的任何课程中使用**@JsonTypeInfo**注释。

上述注释是否有任何替代方案。

如果是，请在可能的情况下提供执行相同操作的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-03-21T21:55:11.053

覆盖 JacksonAnnotationIntrospector 并使用 setAnnotationIntrospector 在 ObjectMapper 中使用 Introspector。这是您的 AnnotationIntrospector 的代码片段：

```
@Override
public TypeResolverBuilder<?> findTypeResolver(MapperConfig<?> config,
        AnnotatedClass ac, JavaType baseType) {
    if (Modifier.isAbstract(baseType.getRawClass().getModifiers())){
        StdTypeResolverBuilder typeResolverBuilder = new StdTypeResolverBuilder();
        typeResolverBuilder.typeProperty("@class");
        typeResolverBuilder.inclusion(As.PROPERTY);
        typeResolverBuilder.init(Id.CLASS, null);
        return typeResolverBuilder;
    }
    return super.findTypeResolver(config, ac, baseType);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T20:13:53.433

几个选择：

*   使用不需要修改值类的[混合注释](http://www.cowtowncoder.com/blog/archives/2009/08/entry_305.html)
*   覆盖`JacksonAnnotationIntrospector`并实现您自己的逻辑，以确定何时以及如何使用等效类型信息。

# c++ - GTest EXPECT_DOUBLE_EQ 因浮点错误而失败

> ID：12297051
> 
> 赞同：0
> 
> 时间：2012-09-06T09:32:15.897
> 
> 标签：c++, floating-point, googletest

我尝试使用 google 测试框架，但看不到以下代码的原因：

```
TEST(MathTest, BelowZeroCandF)
{
    EXPECT_DOUBLE_EQ(convertCtoF(-1), 30.2);
} 
```

在哪里

```
double convertCtoF(double c)
{
    return 32+1.8*c;
} 
```

失败：

```
Failure
Value of: -30.20
  Actual: -30.199999999999999
Expected: tc.convertCtoF(-1)
Which is: 30.199999999999999
[  FAILED  ] MathTest.belowZeroCaboveZeroF (1 ms) 
```

我知道我可以使用 EXPECT_NEAR，但不明白为什么上述方法不起作用......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T07:44:29.773

（添加答案以完成帖子，因为 OP 确认了评论中的错误。）

如错误报告所示，OP不小心在结果中添加了一个减号，这肯定是错误的。删除错字解决了这个问题。

此外，在 GTest 和许多其他单元测试框架（JUnit 等）中，断言的参数顺序是

```
EXPECT_DOUBLE_EQ(30.2, convertCtoF(-1));
//               ^     ^ actual value
//               expected value 
```

否则错误报告将翻转输入描述，就像 OP 演示的那样。

# c++ - 为什么 MFC 中的模态对话框实际上是内部无模态的？

> ID：12297052
> 
> 赞同：1
> 
> 时间：2012-09-06T09:32:19.257
> 
> 标签：c++, visual-c++, mfc

阅读本文后，我的脑海中出现了这个问题：http: [//www.codeproject.com/Articles/3911/The-singular-non-modality-of-MFC-modal-dialogs](http://www.codeproject.com/Articles/3911/The-singular-non-modality-of-MFC-modal-dialogs)。他提到 MFC 中的模态对话框并不是严格的模态对话框，而是作为一个无模式对话框（内部）实现的，它带有花里胡哨的功能，使其表现得像一个模态对话框。

具体来说，他说：

> MFC 命令路由机制使用消息映射和虚拟函数的组合来实现它的功能，而真正的模态对话框将完全破坏这种机制，因为模态消息循环被控制在 MFC 命令路由机制的范围之外

谁能解释一下这个说法？如果他们试图实现一个真正的模态对话框，将会出现什么问题，这将大大澄清问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:37:09.557

模态对话框会停止您的消息循环，但仍然必须有一个消息循环来处理对话框的事件。因此，模态对话框只是一个具有自己内部消息循环的非模态对话框。

# web-config - 企业库日志记录 - 始终使用 defaultCategory 进行日志记录，而不考虑 web.config 中定义的 categorySources

> ID：12297054
> 
> 赞同：1
> 
> 时间：2012-09-06T09:32:25.333
> 
> 标签：web-config, enterprise-library, logging-application-block

MSEL 5 对我们来说就像一个魅力，但我一直在尝试配置额外的“categorySources”，但结果总是一样的。日志条目始终使用“defaultCategory”进行，并且在日志文件中记录了以下错误**“消息：类别‘AppLogGen’没有显式映射。日志条目为：”**

web.config“loggingConfiguration”条目

```
 <loggingConfiguration name="" tracingEnabled="true" defaultCategory="AppLog">
<listeners>
  <add name="Flat File Trace Listener" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    fileName="c:\LoggingTrace\trace.log" formatter="Text Formatter"
    rollFileExistsBehavior="Increment" rollInterval="Midnight" rollSizeKB="10000"
    timeStampPattern="dd-MM-yyyy" traceOutputOptions="None" filter="All" />
  <add name="Flat File Trace Listener Login" type="Microsoft.Practices.EnterpriseLibrary.Logging.TraceListeners.RollingFlatFileTraceListener, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    listenerDataType="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.RollingFlatFileTraceListenerData, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    fileName="c:\LoggingTrace\traceLogin.log" formatter="Text Formatter Login"
    rollFileExistsBehavior="Increment" rollInterval="Midnight" rollSizeKB="10000"
    timeStampPattern="dd-MM-yyyy" traceOutputOptions="None" filter="All" />
</listeners>
<formatters>
  <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    template="Format 1:: Timestamp: {timestamp(local)}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;"
    name="Text Formatter" />
  <add type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.505.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    template="Format 2:: Timestamp: {timestamp(local)}{newline}&#xA;Message: {message}{newline}&#xA;Category: {category}{newline}&#xA;"
    name="Text Formatter Login" />
</formatters>
<categorySources>
  <add switchValue="All" name="InfinityWeb">
    <listeners>
      <add name="Flat File Trace Listener" />
    </listeners>
  </add>
  <add switchValue="All" name="AppLog">
    <listeners>
      <add name="Flat File Trace Listener Login" />
    </listeners>
  </add>
  <add switchValue="All" name="AppLogGen">
    <listeners>
      <add name="Flat File Trace Listener Login" />
    </listeners>
  </add>
</categorySources>
<specialSources>
  <allEvents switchValue="All" name="All Events" />
  <notProcessed switchValue="All" name="Unprocessed Category" />
  <errors switchValue="All" name="Logging Errors &amp; Warnings">
    <listeners>
      <add name="Flat File Trace Listener" />
    </listeners>
  </errors>
</specialSources> 
```

代码，写入日志文件

```
 //logWriter.Write(message, category, priority, eventId, (TraceEventType)severity, DefaultTitle, null);
        LogEntry logEntry = new LogEntry();
        logEntry.Categories.Add("AppLogGen");
        logEntry.Message = "Override " + message;

        logWriter.Write(logEntry); 
```

日志文件中的输出

```
Timestamp: 9/6/2012 1:15:23 PM 
```

消息：“AppLogGen”类别没有显式映射。日志条目是：

时间戳：2012 年 9 月 6 日上午 7 点 45 分 23 秒

消息：为 UserId 覆盖登录成功：Admin

类别：AppLogGen

严重性：信息类别：AppLog。. . 扩展属性：

**不管我做什么，日志总是使用“defaultCategory”中指定的类别源。已经在这个上花了两天时间。帮助！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-11T05:44:47.023

```
<allEvents switchValue="All" name="All Events" />
    <listeners>
      <add name="Flat File Trace Listener" />
    </listeners> 
```

这些代码行有问题。“平面文件跟踪”侦听器是所有事件的默认侦听器。所以无论发生什么事件都会默认监听。您应该通过评论此侦听器来检查。

# sql-server-2008 - 基于两个表 T-SQL 选择不同的行

> ID：12297062
> 
> 赞同：3
> 
> 时间：2012-09-06T09:32:51.357
> 
> 标签：sql-server-2008, tsql

考虑图像中的表格

> ![在此处输入图像描述](../Images/ab03b5fee60ff587b11470afd0069bc5.png)

如何从 Table1 中选择行，不包括 Table2 中具有相同 ReferenceId 的项目？

结果应该是

> ![在此处输入图像描述](../Images/4cd999ac65fc6c502ae899ba8ec943ce.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:37:27.360

你可以使用类似的东西：

```
SELECT  Id
        ,ReferenceId
FROM    Table1
WHERE   ReferenceId NOT IN (SELECT DISTINCT ReferenceId FROM Table2); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:38:28.950

您可以使用 LEFT OUTER 连接来加入 ReferenceId 上的表，并将返回值限制为 Table2 上 ReferenceId 为 NULL 的位置。

```
SELECT * FROM Table1 LEFT JOIN Table2 ON Table1.ReferenceId = Table2.ReferenceId
WHERE Table2.ReferenceId IS NULL 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T09:43:04.567

> 如何从 Table1 中选择行，不包括 Table2 中具有相同 ReferenceId 的项目？

`ReferenceId`然后排除`t2.ReferenceId <> t1.ReferenceId`

```
SELECT t1.id, t1.ReferenceID FROM t1 
INNER JOIN t2 ON t1.id = t2.id
WHERE t2.ReferenceID <>  t1.ReferenceID; 
```

# [*看到这个 SQLFiddle*](http://sqlfiddle.com/#!3/e4da4/8)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T09:34:57.313

```
SELECT table1.id, table1.ReferenceID from table1 
     inner join table2 on table1.id = table2.id
EXCEPT
SELECT id, ReferenceID from table2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T09:46:57.253

有条件查询

```
SELECT *
FROM Table1 t1
 JOIN Table2 t2 on t1.Id = t2.Id
    AND t1.Id <> t1.ReferenceId 
```

# java - JSF 数据表单元格 - 如果内容太长，则剪切文本并替换为“...”

> ID：12297067
> 
> 赞同：1
> 
> 时间：2012-09-06T09:33:07.287
> 
> 标签：java, css, jsf, datatable, cell

如果单元格的文本太长，我想截断文本并在末尾添加三个点“...”（不换行）。问题是，我不能只在 XX 符号之后剪切 java 中的内容，因为 'i' 占用的空间比 'W' 少，这反过来看起来很傻。

我怎样才能用 CSS/java 实现这一点（如果可能没有 Java 脚本）？或者那不可能？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T09:46:50.460

尝试 CSS：设置 a`max-width`并指定`text-overflow`：

```
text-overflow: ellipsis; 
```

# javascript - 禁用组合框以打开但保留其他事件

> ID：12297073
> 
> 赞同：0
> 
> 时间：2012-09-06T09:33:33.967
> 
> 标签：javascript, drop-down-menu, combobox, dom-events

我有一个应用程序可以进行一些 DOM 选择。当我单击元素时，它们会保持标记，并且应用程序会记住这些元素。

对于组合框（下拉菜单），当我单击它时，除了标记它（与所有其他元素一样）之外，它还会打开组合框。我想防止这种情况发生。我知道的方法是使用 disable="true"。所以我想我可以禁用组合框`mouseOver`并重新启用它`mouseOut`。但是，当我这样做时，它会禁用所有事件，因此我无法再单击它，也不会`mouseOut`调用事件。

有没有办法在不禁用其他事件（例如`onClick`and ）的情况下防止组合框打开`mouseOver`？

# wcf - WCF 服务监控应该使用什么？WMI 或 WS 发现

> ID：12297076
> 
> 赞同：0
> 
> 时间：2012-09-06T09:33:39.287
> 
> 标签：wcf, wmi, ws-discovery

您能说出哪个是监视 WCF 服务、WMI 或 WS-Discovery 实现的最佳工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:18:56.107

这些要求看起来很简单，但实际上很难。服务可能可用，但操作可能会失败，反之亦然。还有许多潜在的问题：网络故障、池/服务主机停止、wcf 激活失败、操作错误……服务可以使用，但由于数据库损坏，所有操作都失败。WMI/Perf 计数器似乎是一种很好的方法，因为您可以为不同的范围（服务/操作/端点）提供许多详细信息。但另外，如果您在 IIS 下托管您的服务，应用程序池空闲默认超时为 20 分钟：计数器/WMI 将不可用。

总之，我想说最好的监控策略是对服务器端和客户端可用的所有工具/组件的聚合。

# c# - InitializeComponent() 的非常简单的定义；方法

> ID：12297079
> 
> 赞同：16
> 
> 时间：2012-09-06T09:33:43.443
> 
> 标签：c#, methods, initialization

我一直在研究 Head First C# 书并使用了 InitializeComponent(); 方法多次。

这方面的一个例子是在派对策划练习中，我创建了一个名为 DinnerParty.cs 的类，然后在 Form1.cs 中使用了这个代码

```
public Form1()         
        {        
            InitializeComponent(); 
            dinnerParty = new DinnerParty() { NumberOfPeople = 5 };
            dinnerParty.SetHealthyOption(checkBox2.Checked);
            dinnerParty.CalculateCostOfDecorations(checkBox1.Checked);
            DisplayDinnerPartyCost();
        } 
```

我的问题是，初始化组件方法到底在做什么。我的理解是，我正在定义一个新对象或 DinnerParty 类的实例并设置所有值，到目前为止，我假设 InitializeComponent() 有点像“使用以下内容设置我的字段的值：”

我可以请一个 BASIC，我可以理解定义。我看过以前的帖子和关于这个的答案，一切都太复杂了。我将标记仍然具有关键信息的最容易理解的响应作为答案。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-06T09:43:07.623

**InitializeComponent**是表单设计器在您创建/更改表单时自动为您编写的方法。

每个表单文件（例如 Form1.cs）都有一个设计器文件（例如 Form1.designer.cs），其中包含 InitializeComponent 方法、通用**Form.Dispose**的覆盖以及所有用户界面对象（如按钮、文本框）的声明、标签和表单本身。

**InitializeComponent**方法包含的代码使用您（程序员）使用表单设计器的属性网格提供的值创建和初始化拖动到表单表面上的用户界面对象。由于这个事实**，在调用 InitializeComponent 之前不要尝试与表单或控件进行交互**。
此外，您还可以在此处找到将控件和表单事件链接到您为响应用户操作而编写的特定事件处理程序所需的管道。

Form1.cs 和 Form1.Designer.cs 文件中包含的代码是同一类的一部分，这要归功于分部类的概念，[它](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.100%29.aspx)可以将两个或多个代码文件像单个代码块一样保存在一起。

当然，由于表单设计器执行了大量的更改，因此**不要尝试手动修改此方法**是一个非常好的建议，而有时，我发现向 Dispose 方法添加代码以销毁是很有用的在表单生命周期中创建的一些非托管对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:38:11.853

InitializeComponent 是一种用于初始化表单的方法。它与您的 DinnerParty 课程无关。

因此，它可能会在您的用户界面上设置按钮、标签、事件处理程序等内容。

这是更深入的解释。 [InitializeComponent() 有什么作用，它在 WPF 中是如何工作的？](https://stackoverflow.com/questions/245825/what-does-initializecomponent-do-and-how-does-it-work-wpf)

# javascript - 未捕获的 ReferenceError：未定义 CodeMirror

> ID：12297080
> 
> 赞同：6
> 
> 时间：2012-09-06T09:33:50.543
> 
> 标签：javascript, html, codemirror

我正在尝试包含 CodeMirror 插件，但收到此错误 Uncaught ReferenceError: CodeMirror is not defined

我的 HTML 代码在这里

[http://pastie.org/4673008](http://pastie.org/4673008)

谁能帮忙？？

提前致谢..

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T09:46:01.230

您在 CodeMirror 本身之前加载 clike 模块。

从此更改 HTML 头部中的顺序：

```
<script type="text/javascript" src="../CodeMirror-2.33/mode/clike/clike.js"></script>
<script type="text/javascript" src="../CodeMirror-2.33/lib/codemirror.js"></script>
<script type="text/javascript" src="../CodeMirror-2.33/mode/javascript/javascript.js"></script> 
```

对此：

```
<script type="text/javascript" src="../CodeMirror-2.33/lib/codemirror.js"></script>
<script type="text/javascript" src="../CodeMirror-2.33/mode/clike/clike.js"></script>
<script type="text/javascript" src="../CodeMirror-2.33/mode/javascript/javascript.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-31T07:46:49.747

`ngx-codemirror`SQL high-late 不起作用，深入我发现代码镜像标记类到 high-late 语法 cm-default、cm-link、cm-keyword 这些类没有附加。使用的配置：public queryConfig = { lineNumbers: true, theme: 'twilight', mode: 'text/x-sql', lineWrapping : true, autoFocus: true };

该`main.ts`文件添加了以下导入：

![main.ts 脚本](../Images/39170021dd9bade277be9bf4fb4b893d.png)

该`angularcli.json`文件添加了以下脚本：

![angularcli.json 脚本](../Images/8ba27687d99d2900945fb2b98e462312.png)

# php - 如何在 Opencart 中动态添加 JavaScript？

> ID：12297083
> 
> 赞同：0
> 
> 时间：2012-09-06T09:33:54.853
> 
> 标签：php, javascript, jquery, opencart

我想在 category.tpl 中使用一个 jQuery 插件。将文件放在 javascript/jquery 目录中。现在，如何使用这个插件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T10:43:45.957

```
/* one can load JS like that: */    
if(file_exists('catalog/view/javascript/'.$this->config->get('config_template').'/script.js')) {
    $this->document->addScript('catalog/view/javascript/'.$this->config->get('config_template').'/script.js');
} 
```

使用现有函数而不是手动将脚本添加到 header.tpl 是“正确的方法”。

作为提示，根据下面的答案 - 可以循环一组文件名，以保持对加载顺序的控制，这通常是相关的，而它们可能相互依赖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T11:56:40.247

我从未使用过 OpenCart，但一个快速的 google 会话告诉我，您应该将插件脚本（就像任何其他 js 一样）包含在一个名为`header.tpl`.

`header.tpl`这是我找到的示例文件的一部分：

```
<script type="text/javascript" src="catalog/view/javascript/jquery/jquery-1.3.2.min.js"></script> 
```

只需在 jQuery 包含下面添加以下行，如下所示：

```
<script type="text/javascript" src="catalog/view/javascript/jquery/jquery-1.3.2.min.js"></script>
<script type="text/javascript" src="catalog/view/javascript/jquery/[PLUGIN FILE NAME].js"></script> 
```

你应该很高兴。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:31:38.640

首先将您的 jquery 文件、css 文件和图像粘贴到**目录/视图/javascript/yourplugin**文件夹中。**然后在catalog/view/theme/yourtheme(default)/template** /product/category.tpl文件中调用jquery插件文件。例如，您的 php 代码；.. ... ....

```
<script src="catalog/view/javascript/jquery/jquery-ui-min.js"></script>

<script type="text/javascript" src="catalog/view/javascript/jquery/jquery.anythingslider.js"></script>

<link rel="stylesheet" href="catalog/view/theme/default/stylesheet/anythingslider.css">

<script>

    // DOM Ready

    $(function(){

       $('#slider').anythingSlider();

       $('#slider1').anythingSlider();

       $('#slider2').anythingSlider();

   });

</script> 
```

它的滑块..您可以在 php 中执行您的操作（在脚本上方）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T13:03:29.837

您需要在标题视图中包含 JS 和 CSS 源代码 (/catalog/view/theme/[your theme]/template/common/header.tpl)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-14T19:16:10.093

```
in config.php     
define('DIR_JAVASCRIPT', 'D:\wamp\www\opencart/view/javascript/your_dir/');

in header.tpl        
<?php
    if (is_dir(DIR_JAVASCRIPT)):
        if ($handle = opendir(DIR_JAVASCRIPT)):
                while (false !== ($file = readdir($handle))):   
                    if (preg_match('@\.js$@', $file)):                      
?>
    <script type="text/javascript" src="<?php echo 'view/javascript/your_dir/'.$file; ?>"></script>
<?php               
                    endif;
                endwhile;
            closedir($handle);
        endif;
    endif;
?> 
```

# swing - 如何从 nasa worldwind 中删除世界地图

> ID：12297094
> 
> 赞同：2
> 
> 时间：2012-09-06T09:34:18.913
> 
> 标签：swing, worldwind

我正在做一个与 nasa worldwind 相关的项目。

谁能解释一下，我可以删除世界地图吗？

位于屏幕的左上角。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T18:14:57.407

如果您使用的是自定义 layers.xml 文件，您可以注释掉以下行以删除地图：

```
<Layer className="gov.nasa.worldwind.layers.WorldMapLayer"/> 
```

如果您使用的是捆绑在 worldwind.jar 文件中的 worldwind.layers.xml，则需要添加以下代码以将其删除

```
Layer worldMapLayer = worldWindowGLCanvas1.getModel().getLayers().getLayerByName("World Map");
worldWindowGLCanvas1.getModel().getLayers().remove(worldMapLayer); 
```

您需要在创建 worldWindGLCanvas 之后，但在创建任何 LayerPanel（如果使用）之前插入此代码。

# c# - 更新面板gridview asp.net C#

> ID：12297095
> 
> 赞同：0
> 
> 时间：2012-09-06T09:34:24.847
> 
> 标签：c#, asp.net, visual-studio-2010, updatepanel

你能帮我解决这个问题吗？当我单击 ID 1,2.... 时，从查询字符串中获取 ID 并在另一个表中的 id_proba 上显示查询字符串中的 id 相等的那些名称。这没关系，给我看看。现在我喜欢在 GridView1 中单击 ID 1,2.. 以仅刷新 gridview 2 而不是所有页面。需要 gridview 放入 Ajax 更新面板。我将 gridview2 放在更新面板中，但不知道在代码中写什么？

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
    DataKeyNames="id" DataSourceID="SqlDataSource1" CellPadding="4" 
    ForeColor="#333333" GridLines="None" 
    onselectedindexchanged="GridView1_SelectedIndexChanged">
    <AlternatingRowStyle BackColor="White" />
    <Columns>
        <asp:CommandField ShowSelectButton="True" />
        <asp:BoundField DataField="name" HeaderText="name" SortExpression="name" />

        <asp:HyperLinkField 
  DataTextField="id" 
  DataTextFormatString=" {0}" 
  DataNavigateUrlFields="id" HeaderText="id"
  DataNavigateUrlFormatString="WebForm1.aspx?ID={0}"   />
    </Columns>
    <EditRowStyle BackColor="#2461BF" />
    <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
    <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
    <RowStyle BackColor="#EFF3FB" />
    <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
    <SortedAscendingCellStyle BackColor="#F5F7FB" />
    <SortedAscendingHeaderStyle BackColor="#6D95E1" />
    <SortedDescendingCellStyle BackColor="#E9EBEF" />
    <SortedDescendingHeaderStyle BackColor="#4870BE" />
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ProbaConnectionString %>" 
    DeleteCommand="DELETE FROM [Proba1] WHERE [id] = @id" 
    InsertCommand="INSERT INTO [Proba1] ([name]) VALUES (@name)" 
    SelectCommand="SELECT [name], [id] FROM [Proba1]" 
    UpdateCommand="UPDATE [Proba1] SET [name] = @name WHERE [id] = @id">
    <DeleteParameters>
        <asp:Parameter Name="id" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="name" Type="String" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="name" Type="String" />
        <asp:Parameter Name="id" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource>
<br />
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
            DataSourceID="SqlDataSource2">
            <Columns>
                <asp:BoundField DataField="id_proba" HeaderText="id_proba" 
                    SortExpression="id_proba" />
                <asp:BoundField DataField="name" HeaderText="name" SortExpression="name" />
            </Columns>
        </asp:GridView>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ProbaConnectionString %>" 
            SelectCommand="SELECT [id_proba], [name] FROM [proba3] WHERE ([id_proba] = @id_proba)">
            <SelectParameters>
                <asp:QueryStringParameter Name="id_proba" QueryStringField="ID" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>
    </ContentTemplate>
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:27:23.000

要通过单击刷新更新面板，`GridView1`您可以将 javascript onclick 处理程序添加到`GirdView1`.
在此事件处理程序中，您可以通过调用来刷新更新面板`__doPostBack`。您可以使用 jQuery 将事件处理程序添加到网格中的所有标签，如下所示：

```
<script>
   $(function() {
         $("#<%=GridView1.ClientID%> a").bind('click', function() {
             refreshUpdatePanel();
          });
   });

  function refreshUpdatePanel()
  {
    __doPostBack('UpdatePanel1', '');
  }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:47:14.423

如果您的网格不是太大，请将它们放在同一个更新面板中。
这样您就不必编写任何代码来获取`GridView2`点击更新`GridView1`。

像这样：

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
       <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="id" DataSourceID="SqlDataSource1" CellPadding="4" 
            ForeColor="#333333" GridLines="None" 
            onselectedindexchanged="GridView1_SelectedIndexChanged">
            <AlternatingRowStyle BackColor="White" />
            <Columns>
                <asp:CommandField ShowSelectButton="True" />
                <asp:BoundField DataField="name" HeaderText="name" SortExpression="name" />

                <asp:HyperLinkField 
          DataTextField="id" 
          DataTextFormatString=" {0}" 
          DataNavigateUrlFields="id" HeaderText="id"
          DataNavigateUrlFormatString="WebForm1.aspx?ID={0}"   />
            </Columns>
            <EditRowStyle BackColor="#2461BF" />
            <FooterStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <HeaderStyle BackColor="#507CD1" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="#2461BF" ForeColor="White" HorizontalAlign="Center" />
            <RowStyle BackColor="#EFF3FB" />
            <SelectedRowStyle BackColor="#D1DDF1" Font-Bold="True" ForeColor="#333333" />
            <SortedAscendingCellStyle BackColor="#F5F7FB" />
            <SortedAscendingHeaderStyle BackColor="#6D95E1" />
            <SortedDescendingCellStyle BackColor="#E9EBEF" />
            <SortedDescendingHeaderStyle BackColor="#4870BE" />
        </asp:GridView>

        <br />
        <asp:GridView ID="GridView2" runat="server" AutoGenerateColumns="False" 
            DataSourceID="SqlDataSource2">
            <Columns>
                <asp:BoundField DataField="id_proba" HeaderText="id_proba" 
                    SortExpression="id_proba" />
                <asp:BoundField DataField="name" HeaderText="name" SortExpression="name" />
            </Columns>
        </asp:GridView>
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:SqlDataSource ID="SqlDataSource2" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ProbaConnectionString %>" 
            SelectCommand="SELECT [id_proba], [name] FROM [proba3] WHERE ([id_proba] = @id_proba)">
            <SelectParameters>
                <asp:QueryStringParameter Name="id_proba" QueryStringField="ID" Type="Int32" />
            </SelectParameters>
        </asp:SqlDataSource>
    </ContentTemplate>
</asp:UpdatePanel>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ProbaConnectionString %>" 
    DeleteCommand="DELETE FROM [Proba1] WHERE [id] = @id" 
    InsertCommand="INSERT INTO [Proba1] ([name]) VALUES (@name)" 
    SelectCommand="SELECT [name], [id] FROM [Proba1]" 
    UpdateCommand="UPDATE [Proba1] SET [name] = @name WHERE [id] = @id">
    <DeleteParameters>
        <asp:Parameter Name="id" Type="Int32" />
    </DeleteParameters>
    <InsertParameters>
        <asp:Parameter Name="name" Type="String" />
    </InsertParameters>
    <UpdateParameters>
        <asp:Parameter Name="name" Type="String" />
        <asp:Parameter Name="id" Type="Int32" />
    </UpdateParameters>
</asp:SqlDataSource> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:02:49.123

看看这个嵌套网格的解决方案 [http://www.codeproject.com/Articles/38046/Nested-GridView-No-JavaScripts](http://www.codeproject.com/Articles/38046/Nested-GridView-No-JavaScripts)

# php - PHP 要求在不同的文件夹中

> ID：12297096
> 
> 赞同：3
> 
> 时间：2012-09-06T09:34:24.560
> 
> 标签：php, require

好的，所以在我的网站上，我有一个脚本文件夹，其中包含一个连接到 mysql 服务器的 php 文件，所以如果我移动一个数据库，那么它将在所有连接到数据库的文件上更改它。

我还有另一个名为模板的文件夹。在该文件夹中，页眉和页脚都有一个顶部。在标题模板中我写道：

```
require("../scripts/connect.php"); 
```

我还有另一个文件夹，叫做类别。该文件夹包括标题，标题包括连接。但随后它显示并错误，没有这样的文件。

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-06T09:39:40.987

一个好的做法是在所有正在运行的 php 文件中包含一个主配置，通常称为 config.php :)

在这个配置文件中创建一个名为 SITE_ROOT 的常量或类似的指向确切文件夹的东西，像这样 `define("SITE_ROOT", "/var/www/mysite");`

然后在任何包含、include_once、require、require_once 上使用它，如下所示：

```
require(SITE_ROOT."/scripts/connect.php"); 
```

这应该解决任何相对路径戏剧

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:38:53.953

您不应该将相对路径与 include/require 一起使用，而应使用定义您网站的 ROOT_PATH 的常量。

示例：在所有需要调用的文件中包括：

```
define(ROOT_PATH, '../');

include ROOT_PATH . '/scripts/connect.php'; 
```

在 /scripts/connect.php （以及将包含在某处的所有其他文件）中，所有包含都应使用 ROOT_PATH （不定义它）。

# iphone - 是否可以在 iphone 的键盘内添加完成按钮？

> ID：12297099
> 
> 赞同：1
> 
> 时间：2012-09-06T09:34:36.107
> 
> 标签：iphone, keyboard, textfield, programmatically-created

目前我在 iPhone 应用程序中工作，使用 UITextField 输入电话号码，用户输入电话号码，那么如何隐藏键盘？因为这里没有返回按钮，是否可以在键盘内添加完成按钮，请帮助我

提前致谢

![下面提到的图片供您参考，左角的空白处添加完成按钮，可以吗？](../Images/dc5794074158a7b34f4080f30dbda635.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:41:02.250

[这](http://www.neoos.ch/blog/37-uikeyboardtypenumberpad-and-the-missing-return-key)是一个很好的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:41:38.950

参考这个[链接。](http://www.neoos.ch/blog/37-uikeyboardtypenumberpad-and-the-missing-return-key)它显示了如何在键盘中添加“完成”按钮。

但我建议你`inputAccessoryView`改用。请参阅此[SO 帖子](https://stackoverflow.com/questions/3014964/how-to-show-button-done-on-number-pad-on-iphone-os-4)。

并且**必须阅读** [这个 SO 答案](https://stackoverflow.com/a/8246080/616094)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T07:15:01.973

您可以使用“应用”和“取消”按钮添加 inputAccessoryView，然后关闭数字键盘。

输入附件视图

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIToolbar* numberToolbar = [[UIToolbar alloc]initWithFrame:CGRectMake(0, 0, 320, 50)];
    numberToolbar.barStyle = UIBarStyleBlackTranslucent;
    numberToolbar.items = [NSArray arrayWithObjects:
                         [[UIBarButtonItem alloc]initWithTitle:@"Cancel" style:UIBarButtonItemStyleBordered target:self action:@selector(cancelNumberPad)],
                         [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil],
                         [[UIBarButtonItem alloc]initWithTitle:@"Apply" style:UIBarButtonItemStyleDone target:self action:@selector(doneWithNumberPad)],
                     nil];
    [numberToolbar sizeToFit];
    numberTextField.inputAccessoryView = numberToolbar;
}

-(void)cancelNumberPad{
    [numberTextField resignFirstResponder];
    numberTextField.text = @"";
}

-(void)doneWithNumberPad{
    NSString *numberFromTheKeyboard = numberTextField.text;
    [numberTextField resignFirstResponder];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-21T06:06:22.113

在不使用完成按钮的情况下，您也可以通过触摸视图上的任何位置以这种方式隐藏数字键盘

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    [yourtextfieldname resignFirstResponder];
} 
```

# java - 具有单个泛型方法的非泛型 Java 接口，类型参数仅在左侧

> ID：12297110
> 
> 赞同：3
> 
> 时间：2012-09-06T09:35:19.230
> 
> 标签：java, generics

我最近遇到了以下模式的一个实例：

```
public interface IFooFactory {
    <K> Foo<K> create();
} 
```

有关具体示例，请参见[此处](http://shiro.apache.org/static/current/apidocs/)。**除了使用Object**的正式类型参数或根本没有正式类型参数来实例化**Foo**之外，我看不到客户端程序员在**create的实现中应该做什么。**我也看不出框架设计者试图通过以这种方式定义接口**IFooFactory来表达什么好处或类型约束。**

 ******* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T09:42:13.337

好处是给方法的用户，而不是实现者。[`Collections.emptyList()`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Collections.html#emptyList%28%29)是对这种模式的有益使用的一个很好的例子。它允许您像这样声明一个空列表：

```
List<String> myEmptyList = Collections.emptyList(); 
```

如果该方法返回一个 raw `List`,`List<Object>`或`List<?>`, 以这种方式使用该方法将需要强制转换。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T09:42:18.560

考虑`Collections.emptyList()`。返回的列表对象始终是相同的：由于列表是空的且不可变的，因此调用者无法对返回的对象执行任何操作，以使其根据替代类型参数的具体类型显示不同的行为。因此，单个实现（使用原始类型）就足够了：

```
public static <T> List<T> emptyList() {
    return THEEMPTYLIST;
}

public static final List THEEMPTYLIST = new List() {
    public int size() { return 0; }
    ...
}; 
```

但是，该`emptyList`方法使调用者更方便，因为它启用了类型推断：

```
List<String> noStrings = Collections.EMPTY;  // Gives compiler warning due to use of raw types
List<String> noStrings2 = Collections.emptyList(); // No compiler warning, type parameter inferred. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T19:08:36.000

> I don't see what a client programmer is supposed to do in the implementation of create other than instantiate Foo with a formal type parameter of Object or with no formal type parameter at all.

Umm... It's very easy...

```
<K> Foo<K> create() {
    return new Foo<K>();
} 
```******

# apache - 无法制定重写规则

> ID：12297113
> 
> 赞同：0
> 
> 时间：2012-09-06T09:35:26.157
> 
> 标签：apache, mod-rewrite

我正在尝试设置一个重写规则，它将：

*   将除 /path 和文件之外的任何内容重定向到另一个站点
*   然后如果路径是/path/*，将url重写为index.php

这是我的规则：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_URI} !^/path.*
    RewriteRule !\.(js|gif|css|jpg|png|jpeg) http://www.domain.com [R,L]
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ index.php?url=$1 [QSA]
</IfModule> 
```

由于某种原因，它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T23:32:11.853

除了确保您打开了 mod_rewrite 之外，您还需要更改您的第一个条件以同时检查`index.php`，因为在第二条规则之后，流程循环并且您最终被重定向到 domain.com：

改变：

```
RewriteCond %{REQUEST_URI} !^/path.* 
```

至：

```
RewriteCond %{REQUEST_URI} !^/(path|index.php) 
```

# apache-pig - 在嵌入式猪程序中执行具有多个存储的猪脚本文件

> ID：12297118
> 
> 赞同：3
> 
> 时间：2012-09-06T09:35:44.047
> 
> 标签：apache-pig

我想在嵌入式猪程序中执行猪脚本文件，如下所示

----testPig.pig-----

```
A = load '/user/biadmin/student' using PigStorage() as (name:chararray);
B = foreach A generate name; 
store B into '/user/biadmin/myoutput001'; 
```

为此，我编写了如下所示的代码

```
> PigServer pigServer = new PigServer(ExecType.MAPREDUCE);
> pigServer.registerScript("testPig.pig"); 
```

但它不工作。我已经在 grunt-shell 模式下检查了这个。它工作正常。所以我做了这样的改变

---testPig.pig -----

```
A = load '/user/biadmin/student' using PigStorage() as (name:chararray);
B = foreach A generate name;
--store B into '/user/biadmin/myoutput001'; 
```

嵌入式猪代码是

```
> PigServer pigServer = new PigServer(ExecType.MAPREDUCE,prt);
> pigServer.registerScript(path);
> pigServer.store("B","/user/biadmin/myoutput20"); 
```

现在修改后的代码工作正常。所以现在我的疑问是

1.  **为什么我无法执行具有存储命令的猪脚本？**

2.  **如何执行具有存储命令的猪脚本文件？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-09T06:56:44.090

您的`PigServer`代码不起作用，因为；默认情况下，当您调用 时`.registerScript()`，`PigServer`会将交互模式标志设置`GruntParser`为`false`。从`PigServer`源代码：

```
public void registerScript(InputStream in, Map<String,String> params,List<String> paramsFiles) throws IOException {
    try {
        String substituted = doParamSubstitution(in, params, paramsFiles);
        GruntParser grunt = new GruntParser(new StringReader(substituted));
    /********************************************/
        grunt.setInteractive(false);
    /********************************************/
        grunt.setParams(this);
        grunt.parseStopOnError(true);
    } catch (org.apache.pig.tools.pigscript.parser.ParseException e) {
        log.error(e.getLocalizedMessage());
        throw new IOException(e.getCause());
    }
} 
```

引用`GruntParser`源代码：

> 在交互模式下，只要遇到 STORE 命令就立即执行计划。

这意味着**当交互模式未激活时**，`STORE`命令将被忽略（即它们不会自动运行），直到进一步`PigServer.openIterator`或`PigServer.store`调用（即您明确地发出需要该`STORE`行的调用）。

至于你的第二个问题，你可能想看看[PigRunner](http://pig.apache.org/docs/r0.9.1/api/org/apache/pig/PigRunner.html)类。

# sql - 删除语句 SQL 连接

> ID：12297119
> 
> 赞同：1
> 
> 时间：2012-09-06T09:35:50.083
> 
> 标签：sql, sql-server, join

谁能告诉我如何为以下查询编写删除语句：

```
 SELECT     a.UserID, b.UserEmailAddress
      FROM  tblUserProgramme AS a LEFT OUTER JOIN

      tblUser AS b ON b.UserID = a.UserID LEFT OUTER JOIN
      tblWorkGroup AS c ON c.WorkGroupID = b.WorkGroupID

      WHERE(a.ProgrammeID = 59) AND (a.UserID NOT IN

          (SELECT     UserID FROM tblUser AS a WHERE (WorkGroupID IN
             (SELECT     WorkGroupID FROM tblWorkGroup WHERE                          
             (WorkGroupName  LIKE  '%Insight%') OR (WorkGroupName LIKE '%Other%'))))) 

      AND (b.UserEmailAddress NOT IN
            (SELECT     email FROM          tmpUsers))

      ORDER BY b.UserEmailAddress 
```

服务器是 SQL Server 2005

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:44:35.073

查询将是

```
Delete from 

 ( 
 SELECT     a.UserID, b.UserEmailAddress
  FROM  tblUserProgramme AS a LEFT OUTER JOIN
  tblUser AS b ON b.UserID = a.UserID LEFT OUTER JOIN
  tblWorkGroup AS c ON c.WorkGroupID = b.WorkGroupID
  WHERE(a.ProgrammeID = 59) AND (a.UserID NOT IN
(SELECT     UserID FROM tblUser AS a WHERE (WorkGroupID IN
(SELECT     WorkGroupID FROM tblWorkGroup WHERE (WorkGroupName  LIKE           
'%Insight%') OR (WorkGroupName LIKE '%Other%'))))) AND (b.UserEmailAddress NOT IN
(SELECT     email FROM          tmpUsers))
ORDER BY b.UserEmailAddress
) a 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:38:50.197

语法是特定于数据库的..
对于大多数 tha 数据库，如果您想从 tblUserProgramme 中删除，这应该可以工作

```
DELETE A
FROM tblUserProgramme AS a 
 ..... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T09:54:55.730

Thank you all for your quick answers:) There were a quite a few answers right, but had to pick the first one:)

As Joe G Joseph has mentioned, this is what i did

```
DELETE a
from dbo.tblUserProgramme a
LEFT OUTER JOIN tblUser b ON b.UserID = a.UserID
LEFT OUTER JOIN tblWorkGroup c ON c.WorkGroupID = b.WorkGroupID
where a.ProgrammeID = 59 AND 
a.UserID  NOT IN (SELECT UserID  FROM tblUser a WHERE a.WorkGroupID IN
(SELECT WorkGroupID FROM tblWorkGroup
WHERE WorkGroupName like '%Insight%' OR WorkGroupName like '%Other%')) 
 AND b.UserEmailAddress NOT IN(SELECT email FROM tmpUsers) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T09:50:51.720

通常，在 SQL Server 中，您可以删除与给定 SQL 查询匹配的所有记录，如下所示，前提是您的 SELECT 仅返回单个表中的列：

```
DELETE x
FROM
(
   -- Any query which returns data from a single table, that you wish to delete
) x; 
```

或者，使用 CTE：

```
;WITH x as 
(
   -- Any query which returns data from a single table, that you wish to delete
)
DELETE x; 
```

# javascript - 删除元素的正则表达式条件

> ID：12297130
> 
> 赞同：0
> 
> 时间：2012-09-06T09:36:36.920
> 
> 标签：javascript, regex

我有一个字符串形式：

```
var testStr="keyword:(test word) keyword2:(test word2) keyword3" 
```

我正在尝试删除`:`直到出现空格之前和`:`直到`)`出现之后的所有元素。所以*testStr*应该只返回`keyword3`这个例子。术语的出现不是固定的。关键字 testword 可以出现 n 次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:41:13.500

尝试：

```
var output = testStr.replace(/\w+:\([^)]*\) */g, ''); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:41:43.710

尝试：

```
testStr.replace(/\S*:\([^)]*\)\s*/g, ''); 
```

# linq - 如果在 linq 的三元运算符中满足条件，则执行多个操作

> ID：12297135
> 
> 赞同：0
> 
> 时间：2012-09-06T09:37:03.300
> 
> 标签：linq

我是 LINQ 的初学者。我想执行一些条件操作，如下所示，

```
(from emp in Employees 
let DOB=emp.BirthDate.GetValueOrDefault()
let year=DOB.Year
let month=DOB.Month
let EmpAgeInYearsToday=DateTime.Now.Year-year
let EmpAgeInMonthToday=DateTime.Now.Month-month
let temp_year=(EmpAgeInYearsToday-1)
let ExactNoOfMonths_temp=EmpAgeInMonthToday<0?temp_year:EmpAgeInMonthToday
let ExactNoOfMonths=EmpAgeInMonthToday<0?EmpAgeInMonthToday+12&temp_year:EmpAgeInMonthToday
select new{emp.EmployeeID,DOB,
EmployeeAgeToday=EmpAgeInYearsToday+" Years "+ExactNoOfMonths+" Months ").Dump(); 
```

这里，

让 ExactNoOfMonths=EmpAgeInMonthToday<0?EmpAgeInMonthToday+12&temp_year:EmpAgeInMonthToday

这部分不起作用。单独 & 左侧的表达式正在执行。我想执行这两个操作。如何做到这一点？条件​​满足时如何进行多次操作？有没有其他替代方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:48:47.547

我想你的意思是这样的：

```
ExactNoOfMonths = EmpAgeInMonthToday < 0 ?
                      EmpAgeInMonthToday + 12 :
                      temp_year ? 
                          EmpAgeInMonthToday :
                          somethingElse 
```

但应该有第三个值 ( `somethingElse`) 用于 when`EmpAgeInMonthToday >= 0`和`temp_year = false`。

**编辑**

你想要的其实很复杂。你最好只在内存中获取出生日期并用纯 C# 进行计算。

[This CodeProject link](http://www.codeproject.com/Articles/28837/Calculating-Duration-Between-Two-Dates-in-Years-Mo) gives a possible approach. As you'll see you can't avoid leap years and month lengths: the difference between Feb 28 and Mar 28 is 1 month in a normal year, 1 month and 1 day in a leap year.

# mysql - MCF：无法提供 mysql 服务

> ID：12297138
> 
> 赞同：0
> 
> 时间：2012-09-06T09:37:04.377
> 
> 标签：mysql, provisioning, cloud-foundry, vmc

在 OSX 10.7.4 上的 VMWare Fusion 5.0.1 上运行 MCF。VMC 是版本 0.3.19

当我尝试在 MCF 上创建 mysql 服务时，我进入了 vmc：

```
maguro:Desktop darrellberry$ vmc create-service
1: redis
2: mongodb
3: postgresql
4: mysql
5: rabbitmq
Which service would you like to provision?: 4
Creating Service [mysql-eaca7]: 
Error 503: Unexpected response from service gateway 
```

在 MCF 实例上，/var/vcap/sys/log/mysql_gateway/mysql_gateway.log 显示：

```
[2012-09-06 09:14:56] mysql_gateway - 3249 c74f 72e9   INFO -- Sending info to cloud controller: http://api.xx.cloudfoundry.me/services/v1/offerings
[2012-09-06 09:14:56] mysql_gateway - 3249 c74f 72e9   INFO -- Successfully registered with cloud controller
[2012-09-06 09:15:55] mysql_gateway - 3249 c74f 72e9  DEBUG -- Provision request for label=mysql-5.1 plan=free
[2012-09-06 09:15:55] mysql_gateway - 3249 c74f 72e9  DEBUG -- [MyaaS-Provisioner] Attempting to provision instance (request={:label=>"mysql-5.1", :name=>"mysql-83457", :email=>"xx@xx.com", :plan=>"free"})
[2012-09-06 09:15:56] mysql_gateway - 3249 c74f 72e9   INFO -- Sending info to cloud controller: http://api.xx.cloudfoundry.me/services/v1/offerings
[2012-09-06 09:15:56] mysql_gateway - 3249 c74f 72e9   INFO -- Successfully registered with cloud controller
[2012-09-06 09:15:57] mysql_gateway - 3249 c74f 72e9  DEBUG -- [MyaaS-Provisioner] Found the following nodes: []
[2012-09-06 09:16:05] mysql_gateway - 3249 c74f 72e9   WARN -- Request timeout in 10 seconds. 
```

（网址和电子邮件在这里被混淆了——日志中的看起来是正确的）

这是 100% 可重复的。但是，我可以毫无错误地提供其他类型的服务（postgresql、rabbitmq 等）。所有帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:11:14.923

无论出于何种原因，mysql 节点都没有启动（每个服务都有一个节点和一个网关）。查看 /var/vcap/sys/log/mysql/mysqld.err.log 的最后 100 行，看看是否有任何明显的地方。

更好的是，通过安装 telnet 并连接到 VM 本身的端口 3306 来仔细检查服务是否正在运行；

```
sudo apt-get install telnet
telnet localhost 3306 
```

如果连接立即打开并且您喜欢；

```
Trying 127.0.0.1...
Connected to localhost.
Escape character is '^]'.
<
5.1.54-rel12.5?xaZ!5%Wh?'%&,Ks%Xn@4"^] 
```

那么mysql肯定正在运行。mysqld 也应该出现在进程列表中。

# asp.net - ASP.NET webservice 希望 ajax、json、jquery 和 vb.net

> ID：12297142
> 
> 赞同：0
> 
> 时间：2012-09-06T09:37:16.593
> 
> 标签：asp.net, ajax, vb.net, json

我正在整理本教程，[http](http://www.ezzylearning.com/tutorial.aspx?tid=5869127) ://www.ezzylearning.com/tutorial.aspx?tid=5869127 。

它完美地工作。我现在要做的是将 aspx 内容托管为 html 文件。这个 html 文件托管在我笔记本电脑上的 wampserver 上。托管在我的测试服务器上的 asp.net 代码。当我尝试访问时，出现以下错误，

```
Resource interpreted as Script but transferred with MIME type text/html:      "http://201.x.x.x/testAjax/Default.aspx/AddProductToCart?callback=jQuery17103264484549872577_1346923699990&{%20pID:%20%226765%22,%20qty:%20%22100%22,%20lblType:%20%2220%22%20}&_=1346923704482". jquery.min.js:4

Uncaught SyntaxError: Unexpected token < 
```

我不知道如何解决这个问题。

index.html 代码

```
 $(function () {
        $('#btnAddToCart').click(function () {
            var result = $.ajax({
                type: "POST",
                url: "http://202.161.45.124/testAjax/Default.aspx/AddProductToCart",
                crossDomain: true,
                data: '{ pID: "6765", qty: "100", lblType: "20" }',
                contentType: "application/json; charset=utf-8",
                dataType: "jsonp",
                success: succeeded,
                failure: function (msg) {
                    alert(msg);
                },
                error: function (xhr, err) {
                    alert(err);
                }
            });
        });
    });

    function succeeded(msg) {
        alert(msg.d);
    }

    function btnAddToCart_onclick() {

    }

</script>
</head>
<body>
        <form name="form1" method="post">
    <div>
    <input type="button" id="btnAddToCart"  onclick="return btnAddToCart_onclick()" 
        value="Button" />
</div>
</form> 
```

aspx.vb

```
Imports System.Web.Services
Imports System.Web.Script.Services

<ScriptService()>
Public Class WebForm1
Inherits Page

Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
    Session("test") = ""
End Sub

<WebMethod()>
<ScriptMethod(UseHttpGet:=False, ResponseFormat:=ResponseFormat.Json)>
Public Shared Function AddProductToCart(pID As String, qty As String, lblType As String) As String

    Dim selectedProduct As String = String.Format("+ {0} - {1} - {2}", pID, qty, lblType)

    HttpContext.Current.Session("test") += selectedProduct

    Return HttpContext.Current.Session("test").ToString()

End Function

End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:32:27.530

原因是无论您如何指定 ajax 调用的内容类型，ASP.NET 都会使用 Content-Type text/xml 发送请求

此问题的解决方案位于： [http ://bloggingabout.net/blogs/adelkhalil/archive/2009/08/14/cross-domain-jsonp-with-jquery-call-step-by-step-guide.aspx](http://bloggingabout.net/blogs/adelkhalil/archive/2009/08/14/cross-domain-jsonp-with-jquery-call-step-by-step-guide.aspx)

# sql - Oracle SQL 外连接查询谜题

> ID：12297143
> 
> 赞同：0
> 
> 时间：2012-09-06T09:37:17.420
> 
> 标签：sql, oracle, date, join

```
select
  whatever
from
  bank_accs b1,
  bank_accs b2,
  table3 t3
where
  t3.bank_acc_id = t1.bank_acc_id and
  b2.bank_acc_number = b1.bank_acc_number and
  b2.currency_code(+) = t3.buy_currency and
  trunc(sysdate) between nvl(b2.start_date, trunc(sysdate)) and nvl(b2.end_date, trunc(sysdate)); 
```

我的问题是 b2 上的日期（实际情况）检查。现在，我需要为每个 t3xb1 返回一行（当然，t3 = ~10 个加入的表），即使 b2 中只有无效记录（按日期计算）。我如何正确地外部加入这个位？不能使用 ANSI 连接，必须在单个平面查询中使用。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:55:52.230

If I understand you, just add the outer sign(+) to all columns of b2:

```
select
  whatever
from
  bank_accs b1,
  bank_accs b2,
  table3 t3
where
  t3.bank_acc_id = t1.bank_acc_id and
  b2.bank_acc_number = b1.bank_acc_number and
  b2.currency_code(+) = t3.buy_currency and
  trunc(sysdate) between nvl(b2.start_date(+), trunc(sysdate)) and nvl(b2.end_date(+), trunc(sysdate)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:59:40.503

可以编写带有不等式的旧式外连接，但容易出错。我建议您使用内联视图，并且外部连接将清晰明确：

```
SELECT whatever
  FROM bank_accs b1,
       table3 t3,
       (SELECT b2.*
          FROM bank_accs b2
         WHERE trunc(sysdate) BETWEEN nvl(b2.start_date, trunc(sysdate)) 
                                  AND nvl(b2.end_date, trunc(sysdate))
       ) b2
 WHERE t3.bank_acc_id = t1.bank_acc_id
   AND b2.bank_acc_number = b1.bank_acc_number
   AND b2.currency_code(+) = t3.buy_currency; 
```

# hadoop - HADOOP - Mapreduce - 我为所有键获得相同的值

> ID：12297144
> 
> 赞同：0
> 
> 时间：2012-09-06T09:37:19.713
> 
> 标签：hadoop, mapreduce

我对 mapreduce 有疑问。给出一个歌曲列表（“Songname”#“UserID”#“boolean”）作为输入，我必须有一个歌曲列表，其中指定了不同用户听他们的次数......所以一个''输出（“Songname “，”时间收听“）。我使用 hashtable 只允许一对。对于短文件，它运行良好，但是当我输入一个大约 1000000 条记录的列表时，它会为所有记录返回相同的值 (20)。

这是我的映射器：

```
 public static class CanzoniMapper extends Mapper<Object, Text, Text, IntWritable>{

    private IntWritable userID = new IntWritable(0);
    private Text song = new Text();

    public void map(Object key, Text value, Context context) throws IOException, InterruptedException {
        String[] caratteri = value.toString().split("#");
        if(caratteri[2].equals("1")){
            song.set(caratteri[0]);
            userID.set(Integer.parseInt(caratteri[1]));
            context.write(song,userID);
        }
    }
  } 
```

这是我的减速机：

```
public static class CanzoniReducer extends Reducer<Text,IntWritable,Text,IntWritable> {
    private IntWritable result = new IntWritable();

    public void reduce(Text key, Iterable<IntWritable> values, Context context) throws IOException, InterruptedException {
      Hashtable<IntWritable,Text> doppioni = new Hashtable<IntWritable,Text>();
      for (IntWritable val : values) {
        doppioni.put(val,key);
      }
      result.set(doppioni.size());
      doppioni.clear();
      context.write(key,result);
    }
  } 
```

主要：

```
Configuration conf = new Configuration();

    Job job = new Job(conf, "word count");
    job.setJarByClass(Canzoni.class);
    job.setMapperClass(CanzoniMapper.class);
    //job.setCombinerClass(CanzoniReducer.class);
    //job.setNumReduceTasks(2);
    job.setReducerClass(CanzoniReducer.class);
    job.setOutputKeyClass(Text.class);
    job.setOutputValueClass(IntWritable.class);
    FileInputFormat.addInputPath(job, new Path(args[0]));
    FileOutputFormat.setOutputPath(job, new Path(args[1]));
    System.exit(job.waitForCompletion(true) ? 0 : 1); 
```

任何想法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:41:24.020

也许我解决了它。是输入问题。与歌曲数量相比，记录太多了，因此在这些记录列表中，每个用户至少列出了每首歌曲。在我的测试中，我有 20 个不同的用户，所以结果自然而然地给了我每首歌 20 个。我必须增加不同歌曲的数量。

# jquery-plugins - jquery.lazyload.js 插件下载

> ID：12297151
> 
> 赞同：1
> 
> 时间：2012-09-06T09:37:32.957
> 
> 标签：jquery-plugins

我正在尝试下载 jquery.lazyload.js 插件，请指导我从哪里可以下载此插件？我正在尝试实现延迟加载，当我在网上搜索时，我发现我们需要这个插件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T10:17:38.680

评论副本：

*   你试过它的网站吗？appelsiini.net/projects/lazyload

*   您是否尝试过 google：[google.co.uk/search](http://google.co.uk/search?q=laxzyload%20download) ?q=laxzyload+download 请参阅：下载 jQuery LazyLoad Ad - Web2ajaX 1

*   或者这样：“Lazy loader 是一个用 JavaScript 编写的 jQuery 插件。它会延迟加载图像......下载：[appelsiini.net/download/jquery.lazyload.pack.js](http://appelsiini.net/download/jquery.lazyload.pack.js) ” – Pez Cuckow

# python - 如果 SQLAlchemy 不存在对象，则插入对象的最快方法

> ID：12297156
> 
> 赞同：9
> 
> 时间：2012-09-06T09:37:56.317
> 
> 标签：python, mysql, sqlalchemy

所以我对 SQLAlchemy 很陌生。

我有一个模型 Showing，它在表中有大约 10,000 行。这是课程：

```
class Showing(Base):
    __tablename__   = "showings"

    id              = Column(Integer, primary_key=True)
    time            = Column(DateTime)
    link            = Column(String)
    film_id         = Column(Integer, ForeignKey('films.id'))
    cinema_id       = Column(Integer, ForeignKey('cinemas.id'))

    def __eq__(self, other):
        if self.time == other.time and self.cinema == other.cinema and self.film == other.film:
            return True
        else:
            return False 
```

如果新节目尚不存在，谁能给我一些关于插入新节目的最快方法的指导。我认为它稍微复杂一些，因为只有在时间、电影和电影在放映中是独一无二的情况下，放映才是独一无二的。

我目前有这个代码：

```
def AddShowings(self, showing_times, cinema, film):
    all_showings = self.session.query(Showing).options(joinedload(Showing.cinema), joinedload(Showing.film)).all()
    for showing_time in showing_times:
        tmp_showing = Showing(time=showing_time[0], film=film, cinema=cinema, link=showing_time[1])
        if tmp_showing not in all_showings:
            self.session.add(tmp_showing)
            self.session.commit()
            all_showings.append(tmp_showing) 
```

这有效，但似乎很慢。任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T10:43:20.250

如果任何此类对象基于列组合是唯一的，则需要将它们标记为复合主键。将`primary_key=True`关键字参数添加到这些列中的每一列，完全删除您的`id`列：

```
class Showing(Base):
    __tablename__   = "showings"

    time            = Column(DateTime, primary_key=True)
    link            = Column(String)
    film_id         = Column(Integer, ForeignKey('films.id'), primary_key=True)
    cinema_id       = Column(Integer, ForeignKey('cinemas.id'), primary_key=True) 
```

这样，您的数据库可以更有效地处理这些行（不需要递增列），并且 SQLAlchemy 现在会自动知道两个实例`Showing`是否相同。

我*相信*您可以将新的合并`Showing`回会话中：

```
def AddShowings(self, showing_times, cinema, film):
    for showing_time in showing_times:
        self.session.merge(
            Showing(time=showing_time[0], link=showing_time[1],
                    film=film, cinema=cinema)
        ) 
```

# jquery - 在缺少/或值时禁用表单提交 jquery ！= '' && value !='0'

> ID：12297157
> 
> 赞同：0
> 
> 时间：2012-09-06T09:37:57.247
> 
> 标签：jquery, jquery-validate

我正在尝试使用 jQuery 禁用表单提交，我检查了 jQuery.validate.js 插件，但它没有识别我的 txtQty[] 数组：

```
rules : { 'txtQty[]' : {required: true, minlength: 2} } 
```

但这没有用

这是我当前的代码，如果需要停止提交

```
txtQty[] == '0' && txtQty == '' 
```

代码：

```
 $("form#frmCart").submit(function(e) { 
    var err = false;
    var hidCartId = [];
    var hidProductId = [];
    var txtQty = [];
    var artSize = [];
    $("input[name='txtQty\\[\\]']").each(function(index) {
            if($(this).val() != '' || $(this).val() != '0'){
                txtQty.push($(this).attr('value'));
            } else {
                alert("Empty val");
                err = true;
                $(this).focus();
                e.preventDefault(); // Cancel the submit
                return false; // Exit the .each loop

            }
    });

    $("input[name='hidProductId\\[\\]']").each(function(index) { 
            hidProductId.push($(this).attr('value'));
    });

    $("input[name='hidCartId\\[\\]']").each(function(index) {   
            hidCartId.push($(this).attr('value'));
    });

    $("select[name='articleSize\\[\\]']").each(function(index) { 
        if($(this).val() != $(this).attr('value')){
            artSize.push($(this).val());
        } else {
            artSize.push($(this).attr('value'));
        }
    });
    if(err === true){
                e.preventDefault(); // Cancel the submit
                return false; // Exit the .each loop
    } 

    $.ajax({
        cache: false,
        type: "POST",
        url: "cart.php?action=update",
        data: {hidCartId: hidCartId, hidProductId: hidProductId, txtQty: txtQty, size: artSize},
        success: function(result){
            $('#content-container').html(result);       
        }
    });
    return false;

}); 
```

甚至警报也不会被触发....... thx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:05:49.110

在第一个 .each 中，更改 || 至 ＆＆

# javascript - Javascript、JQuery 和我自己的命名空间

> ID：12297165
> 
> 赞同：1
> 
> 时间：2012-09-06T09:38:20.633
> 
> 标签：javascript, jquery, namespaces

我已经看到了许多在 JS 中创建自己的命名空间的方法，但它确实有点令人困惑。

我们使用了 JQuery，在我们最近参与的一个项目中，我注意到开发人员使用了这种方法：

```
var myObject = new function ($){
    var localVar = 1,
    init = function(){
        ...
    },
    return {
        init: init
    }
} 
```

1.  为什么使用“新”功能
2.  为什么将 $ 传递给这个新函数？
3.  为什么是这种形式的回报？

在另一个项目中，我们使用了以下方法：

```
$.companyName = {
    textNotFound: "The search returned no results",
    search: {
        orders: null,
        stock: null
    }
}
$.companyName.search.orders = function(param1,...){
    ...
}
$.companyName.search.stock = function(param1,...){
    ...
} 
```

使用场景如下所示：

```
var orders = $.companyName.search.orders(...);
if (orders == null){
    alert($.companyName.textNotFound);
}
else{
   ...
} 
```

第二种方法是否不可取而应使用第一种方法？或者，我们应该编写 JQuery 插件吗？（我不这么认为，因为这是特定于站点的功能）

谢谢，

雅克

# whitespace - Sublime Text 2：按需修剪尾随空白

> ID：12297169
> 
> 赞同：111
> 
> 时间：2012-09-06T09:38:37.377
> 
> 标签：whitespace, sublimetext2, code-cleanup

我知道 Sublime Text 2 可以在保存时删除文件的尾随空格。

在团队中工作并对文件进行更改时，这往往会产生巨大的差异，从而使同行代码审查更加麻烦。出于这个原因，我更喜欢只在我对文件进行巨大更改时才进行空白清理，并将空白保留为较小的更改。

我想**知道**除了`"Activate trimming on save > Save file > Deactivate trimming"`.

在文档和 stackoverflow 上搜索没有显示任何相关内容，所有链接似乎都在谈论保存时的自动修剪。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-10-15T21:27:56.617

我使用这些步骤在 Sublime Text 中快速按需解决方案：

1.  查找 > 替换...
2.  找什么：`[ \t]+\n`
3.  用。。。来代替：`\n`
4.  **全部替换**

您也可以通过以下方式对大量文件执行此操作

1.  查找 > 在文件中查找...
2.  寻找：`[ \t]+\n`
3.  在哪里：
4.  代替：`\n`
5.  **代替**

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-09-10T09:11:48.567

## 注意：使用这个插件[会使 Sublime Text 明显变慢](https://github.com/SublimeText/TrailingSpaces/issues/107)

我为此使用[TrailingSpaces](https://github.com/SublimeText/TrailingSpaces)插件。

> 突出显示尾随空格并立即删除它们。
> 
> ST2 提供了一种在文件保存时自动删除尾随空格的方法。根据您的设置，仅突出显示它们和/或手动删除它们可能更方便。这个插件提供了！

用法：单击“编辑/尾随空格/删除”。

要添加键绑定，请打开“首选项/键绑定 - 用户”并添加：

```
{ "keys": ["ctrl+alt+t"], "command": "delete_trailing_spaces" } 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2016-10-24T08:48:35.060

您可以简单地使用正则表达式来删除尾随空格：

1.  查找 > 替换...
2.  找什么：`[^\S\r\n]+$`
3.  替换为：留空。
4.  点击“全部替换”

`[^\S\r\n]+$`是正则**表达式**，表示“至少一个空格字符（所以空格和制表符，但不是换行符，使用双重否定），然后是行尾”

必须启用正则表达式： [![启用正则表达式是搜索对话框](../Images/4b2f7b39bcf6191848664be1efeee786.png)](https://i.stack.imgur.com/8Xo5A.png)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2013-05-08T23:18:02.553

**这种方法并不完美，但不使用插件或设置，并且在大多数情况下都有效。**

1.  多选并将光标移动到每行的末尾
2.  按住 CTRL-Shift，按左、右
3.  现在应该选择行尾的空格和制表符。按 Delete 或 Backspace

***注意**- 此时也可以在行尾选择特殊字符，例如 ( 和 +，而不仅仅是空格。*

**如何多选所有行：**

一种方法是使用鼠标中键垂直选择，如果选择很小，请按结束键。

使用热键：

1.  CTRL-A（全选）
2.  CTRL-SHIFT-L（将光标放在所有选定的行上）
3.  END（转到行尾）

您还可以使用 find 函数来查找将在每一行中出现的内容，例如空格字符：

1.  \s（使用正则表达式）
2.  单击查找全部
3.  按“结束”键在每行末尾获取多个光标

示例文本：

```
text and number     44  more text and a space  
text and number 44  more text and 2 tabs        
text and number 44  more text and no space or tab

text and number 44  more text after a line feed 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2012-09-06T11:54:17.993

我在这里找到了一个解决方案：http: [//www.sublimetext.com/forum/viewtopic.php? f=4&t=4958](http://www.sublimetext.com/forum/viewtopic.php?f=4&t=4958)

可以修改包

```
trim_trailing_white_space.py 
```

位于默认包目录中，这样：

```
import sublime, sublime_plugin

def trim_trailing_white_space(view):
    trailing_white_space = view.find_all("[\t ]+$")
    trailing_white_space.reverse()
    edit = view.begin_edit()
    for r in trailing_white_space:
        view.erase(edit, r)
    view.end_edit(edit)

class TrimTrailingWhiteSpaceCommand(sublime_plugin.TextCommand):
    def run(self, edit):
        trim_trailing_white_space(self.view)

class TrimTrailingWhiteSpace(sublime_plugin.EventListener):
    def on_pre_save(self, view):
        if view.settings().get("trim_trailing_white_space_on_save") == True:
            trim_trailing_white_space(view)

class EnsureNewlineAtEof(sublime_plugin.EventListener):
    def on_pre_save(self, view):
        if view.settings().get("ensure_newline_at_eof_on_save") == True:
            if view.size() > 0 and view.substr(view.size() - 1) != '\n':
                edit = view.begin_edit()
                view.insert(edit, view.size(), "\n")
                view.end_edit(edit) 
```

现在您可以将命令添加到您的键盘映射配置中：

```
{ "keys": ["your_shortcut"], "command": "trim_trailing_white_space" } 
```

# javascript - javascript中的this关键字

> ID：12297170
> 
> 赞同：0
> 
> 时间：2012-09-06T09:38:37.760
> 
> 标签：javascript, jsp

请解释`this.value`以下代码中的内容。

函数的第二个参数将传递什么值`calcLapseDays`。？

我猜当前文本框的值，但当前的文本框值是空白的，那么值是多少。

请指导。

样本：

```
<html:text property="flEndDt" readonly="true" tabindex="<%=(i2++).toString() %>" 
 onfocus="calcLapseDays(document.forms[0].reqRcvdDate.value,this.value)"`/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:40:38.710

您正在使用/输入的元素的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:42:26.080

因为该函数是在内联事件处理程序上调用的，所以`this`将指向事件起源的 DOM 元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:43:01.460

给你举个例子，`this`关键字指的是当前元素。考虑这个输入：

```
<input type="text" onclick="alert(this.value);" /> 
```

现在，在其中输入一些内容并单击文本框以提醒其中的值！

# android - 谷歌地图视图中的错误

> ID：12297173
> 
> 赞同：0
> 
> 时间：2012-09-06T09:38:45.580
> 
> 标签：android, google-maps

我目前正在做一个包含 googlemap 的应用程序。该 xml 文件的代码如下所示，但在图形布局中显示错误

“缺少样式。是否为此布局选择了正确的主题？使用布局上方的主题组合框来选择不同的布局，或修复主题样式参考。

在当前主题中找不到样式“mapViewStyle””

运行 googlemap 时，它在 logcat 中显示错误为

java.lang.RuntimeException：无法启动活动 ComponentInfo{com.iqmobi/com.iqmobi.Map}：android.view.InflateException：二进制 XML 文件第 3 行：膨胀类 com.google.android.maps.MapView 时出错

xml 和清单文件如下所示

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/layout1"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">

     <com.google.android.maps.MapView 
     android:id="@+id/myMapView1" 
     android:layout_width="fill_parent"  
     android:layout_height="fill_parent" 
     android:clickable="true" 
     android:apiKey="0mRN-6bSm63hZJtPZSmcjoZAzdCztLnZv-O4SZw" 
     >
     </com.google.android.maps.MapView>  

    </LinearLayout> 
```

清单.xml

```
 <?xml version="1.0" encoding="utf-8"?>
      <manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.iqmobi"
      android:versionCode="1"
      android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" 
          android:targetSdkVersion="9"/>

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

<application
    android:icon="@drawable/iconffff"
    android:label="@string/app_name" >
    <uses-library android:name="com.google.android.maps" />
    <activity
        android:label="@string/app_name"
        android:name="com.iqmobi.Map"
        android:screenOrientation="portrait" 
       >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:34:13.860

将您的 Layout 更改为 RelativeLayout 并删除此行`</com.google.android.maps.MapView>`
像这样放置它，没有布局 id，如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.google.android.maps.MapView
          android:id="@+id/myMapView1"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:enabled="true"
                 android:clickable="true"
                 android:apiKey="api key" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:07:55.053

您需要将主类扩展为 MapActivity

```
public class Abc extends MapActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

# java - 对象创建 JAVA

> ID：12297176
> 
> 赞同：0
> 
> 时间：2012-09-06T09:38:50.400
> 
> 标签：java, object

> **可能重复：**
> [Java 中的“text”和 new String(“text”) 有什么区别？](https://stackoverflow.com/questions/3052442/what-is-the-difference-between-text-and-new-stringtext-in-java)

请解释以下两种陈述之间的简要和详细区别：

```
String a= "somevalue";
String b = new String("somevalue"); 
```

我知道第二条语句`b`在堆中创建并为字符串对象提供内存。但是为什么对象`a`没有获得内存并且仍然允许对字符串方法进行操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:42:20.807

`a`并且`b`是对对象的引用，而不是对对象的引用。

当你这样做`a = b;`时，它不会复制对象，它会复制对对象的引用。

String`char[]`内部有一个对象，它是另一个对象。

`a`获取对现有对象的引用，因此它可能不需要任何额外的内存。

`b`获取对新创建对象的引用，因此需要更多内存。

> 它仍然允许对字符串方法进行操作。

这与对象的创建方式无关。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:42:43.750

第一个影响字面字符串对象“somvalue”到变量`a`。此文字字符串对象与所有文字字符串一样缓存在池中。

第二个创建空字符串的新实例。由于 String 实例是不可变的，因此它等价于`String b = "";`，除了它徒劳地实例化一个新对象。

# javascript - 表中的 jQuery parent()

> ID：12297177
> 
> 赞同：0
> 
> 时间：2012-09-06T09:38:51.723
> 
> 标签：javascript, jquery, html

我想访问以下 HTML 代码中的 div 标签：

```
<table>
    <div class="rowBound">
      <tr onclick="expandLastResultDetails(this);">
        <td class="c1">56835-14513</td>
        ...
      </tr>
      <tr class="rowDetails">
        <td colspan="0">
        <div style="background-color: #0F9;"> expandable
         </div></td>
      </tr>
    </div>
</table> 
```

但是 jQuery 命令只是给了我一个 TBODY 而不是我的 DIV ..

这是我在另一种情况下所做的：

```
function expandNavContent(navEntryTitle) {
    var content = $(navEntryTitle).parent().children('.navContent');
    $(content).slideToggle('slow', function () {
        // Animation complete.
    });
} 
```

我想要的：如果有人点击 tr，rowDetails 应该使用 slideToggle 进行动画处理

如果我使用此代码：

```
function expandLastResultDetails(tableEntry) {
    var content =$(tableEntry).parent().children('.rowDetails');
    $(content).slideToggle('slow', function () {
        // Animation complete.
    });
} 
```

它切换所有行，但它应该只切换一行，所以我将它们嵌套到一个分区中，也许那是错误的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:41:59.377

试试这个：

```
$('tr.rowDetails').find('div'); 
```

但是，您的标记无效。`tr`是 的元素`table`，而不是`div`。

要获取外部父级`div`：

```
$('tr.rowDetails').closest('div'); 
```

### 编辑后

```
function expandLastResultDetails(tableEntry) {
    var content =$(tableEntry).next('.rowDetails'); // will point to next tr
    $(content).slideToggle('slow', function () {
        // Animation complete.
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T09:44:00.437

尝试`$('.rowDetails').closest('div.rowBound');`

它将从当前元素（向外）冒泡，直到找到 div 元素。

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:40:59.683

你试过什么命令？你可以使用这个：

```
$(".rowDetails tr td div"); 
```

而且，里面不能有`<tr>`a `<div>`！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:43:20.940

由于您的标记无效，浏览器会适当地为您插入 tbody 和表格（查看 FireBug/Dev 工具中的标记）。类似的东西`$(".rowDetails").parent().parent().parent()`可以工作（在某些浏览器中），但我建议改为修复标记

# mysql - 从表中获取数据的查询

> ID：12297179
> 
> 赞同：-2
> 
> 时间：2012-09-06T09:38:54.063
> 
> 标签：mysql

我有以下表格

```
subject(id,name,sem,branch) //Detail of subject in sem and branch
teacher(id,name,dept) //detail of teacher
student_teacher_mapping(sid,tid) //primary key of student and teacher
section(id,sec) //detail of sections
subject_section_mapping(sid,secid) //primary key of subject and section 
```

我想获取分支“计算机科学”的学科名称和教师名称，sem=3 和 section='d'。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T06:59:49.657

最后我在没有你帮助的情况下完成了它：/

我换了一张桌子 我的桌子是

```
subject(id,name,sem,branch) //Detail of subject in sem and branch
teacher(id,name,dept) //detail of teacher
section(id,sec) //detail of sections
sub_teacher_sec (subject_id,teacher_id,section_id) //primary key of subject,teacher and section 
```

这是我获取主题名称、教师姓名和部门以获取特定分支学期和部门值的查询

```
select sub.name,t.name,se.sec from subjects as sub
  join
sub_teacher_sec as sts
  on
sts.subject_id=sub.id
 join
teachers as t
  on
sts.teacher_id=t.id
 join
section as se
   on
sts.section_id=se.id
and  sub.semester=3 and sub.branch='CSE'; 
```

表格或查询中是否有任何更正，请提出建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:03:52.747

@Manish你看到你的表SUBJECT链接到SECTION，这会给我们一个SECTION，而表SECTION没有链接到任何其他表，所以这里似乎有死胡同，数据库设计似乎是错误的。

# ios - 实时音频对话 iOS

> ID：12297190
> 
> 赞同：1
> 
> 时间：2012-09-06T09:39:38.990
> 
> 标签：ios, audio, real-time, livechat

我正在为希望允许用户之间进行实时（最小延迟，最大 50 毫秒）对话（一种 Teamspeak）的客户设计一个 iOS 应用程序。延迟一定要低，因为音频也可以是现场音乐，用乐器演奏，所以所有用户都需要同步。我需要一个服务器，它将向每个客户端请求录音并发送给其他人（并让他们同时听到相同的声音）。HTTP 易于管理/实现且易于扩展，但性能非常低，因为平均 HTTP 请求需要 > 50 毫秒...（使用中级硬件），所以我在考虑 TCP/UDP 连接在客户端之间保持打开状态和服务器。但我有一些问题：

*   如果我用 Python 开发服务器（例如使用 TwistedMatrix），它的性能如何？
*   我不能用 C++ 开发服务器，因为它很难管理（可扩展）和开发。
*   有人使用 Nodejs（易于扩展）来管理 TCP/UDP 连接吗？
*   如果我使用 HTTP，Keep-Alive 是否足够快？因为通常执行 HTTP 请求所需的时间大于 50 毫秒（因为打开-关闭连接很困难），我希望总过程少于那个时间。
*   服务器将在 Linux 机器上运行。

最后：你能建议我哪种类型的压缩？我认为 Ogg Vorbis 会很好，但如果有更好的（并且可以在 iOS 中使用），我愿意接受更改。

谢谢你，奥马尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:28:49.337

与服务器有关的是，请求本身并不是瓶颈。我猜你有足够的时间来建立连接，因为它只发生在会话开始时。因此，该协议没有多大意义。

但考虑到 HTTP 是一种无状态协议，不适合音频流。您可以选择几种实时流协议。它们都将通过 TCP 或 UDP 工作（例如使用原始套接字），并且有很多实现。

在您的情况下，延迟的瓶颈不是服务器，而是网络本身。如果 AP 没有配置错误且连接良好，iOS 设备和无线接入点 (AP) 之间的连接会消耗大约 40 毫秒。（ping你的iPhone。）总的来说，路径iOS -> AP -> Server -> AP -> iOS至少需要80毫秒。但是很难保持这种延迟稳定。（我本地网络上 AirPlay 的典型延迟约为 300 毫秒。）

我认为今天通过 iOS 设备进行现场音乐是不可行的。尝试在两台 iOS 设备之间使用 Skype，看看你可以接近 50 毫秒。我敢打赌，没有人能做得更好，这与延迟有关。

**更新：新的研究结果！**

我必须修改我关于 iDevice wifi 连接延迟的声明。显然，当您第一次 ping 设备时，延迟会很糟糕。但是，如果我在那之后不迟于 200 毫秒再次 ping，我会看到 AP 和 iDevice 之间的平均延迟为 2 毫秒到 3 毫秒。

我的理解是，如果AP和iDevice之间没有通信超过200ms，iDevice的网络适配器会进入一个响应性较差的睡眠模式，可能是为了节省电池电量。

看来，现场音乐再次触手可及...... :-)

**更新 2**

保持低延迟的活动所需的 ping 间隔显然因设备而异。报告的 200 毫秒适用于第 3 代。平板电脑。对于我的 iPhone 4，它更像是 50 毫秒。

在流式传输音频时，您可能不需要为此烦恼，因为数据交换更加频繁。在我自己的上下文中，iDevice 和服务器之间的通信很少，但低延迟至关重要。因此，保持活力是要走的路。

最好的，彼得

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T00:48:11.887

首先，您不会获得低于 50 毫秒的延迟。其他人已经尝试过这个。例如，请参阅[http://ejamming.com/](http://ejamming.com/)一项服务，该服务试图做您正在做的事情，但线路上有明显的音乐延迟，因此在许多人的耳中，完全无法使用。他们使用特殊的路由技术来尽可能降低延迟，最后我听说他们的服务不适用于某些路由器配置。

其次，您在服务器上使用的语言可能没有太大区别，因为从客户端到服务器的延迟将比您的服务造成的任何延迟更糟糕，但是如果我正确理解您的服务，您将需要很多服务器（或服务器线程）只是在客户端之间中继音频数据或进行某种最小混合。这是每个连接的少量工作，但是很多连接，因此您需要可以处理的东西。我会倾向于 Java、Scala 或 Go 之类的东西。我可能是错的，但我认为这不是 node 的一个很好的用例，据我所知，它目前不能很好地处理多线程。另外，不要对 C++ 嗤之以鼻，C++ 已经构建了可扩展服务。您还可以在 C++ 中构建服务的中继部分，而其余部分则以任何方式构建。

第三，在选择压缩格式时，如果您打算使用 UDP，则必须选择一种可以避免丢包的格式，我认为 UDP 是唯一的方法。我不认为 vorbis 能胜任这项任务，但我可能是错的。在我的脑海中，我不确定在 iPhone 上是否有任何东西可以在 iPhone 上运行并且对 UDP 友好，但我确信有很多东西。Speex 就是一个例子，它是开源的。不确定延迟和质量是否满足您的需求。

最后，坦率地说，我认为还有一些其他的事情你应该多研究一下。例如。DNS 通常在本地缓存，而不是在每次 http 调用时检查（尽管它可能取决于系统/库。至少大多数系统在本地缓存 dns）。此外，没有像 TCP/UDP 这样的协议。有 TCP/IP（有时简称为 TCP）和 UDP/IP（有时简称为 UDP）。您似乎将两者称为一体。差异对于您正在做的事情非常重要。例如，HTTP 运行在 TCP 之上，而不是 UDP，而 UDP 被认为是“不可靠的”，但开销较小，因此它适用于流式传输。

编辑：spex

# c# - DataGrid WPF中已编辑单元格内容的单元格颜色更改

> ID：12297194
> 
> 赞同：0
> 
> 时间：2012-09-06T09:39:52.407
> 
> 标签：c#, wpfdatagrid

我正在尝试更改用户刚刚更改其内容的单元格的颜色。你有什么想法可以做到吗？

# flash - ActionScript MouseEvent.DOUBLE_CLICK - 点击频率改变？

> ID：12297202
> 
> 赞同：0
> 
> 时间：2012-09-06T09:40:26.323
> 
> 标签：flash, actionscript, mouseevent

我一直在谷歌搜索这个“问题”一段时间，但没有任何运气。有没有办法改变双击的频率、速度，或者你想怎么称呼它？我的意思是，增加点击之间的时间并且仍然将其注册为双击。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T14:36:00.077

我想这是由操作系统决定的，因为具有不同可访问性需求的用户具有不同的双击时间。因此，我认为这不可能使用 Flash 播放器进行修改。

但是，如果您想模拟上述情况，我会执行以下操作：

```
 private var timer:Timer = new Timer(1000, 1);

    private var singleClickEvent:MouseEvent;

    public function onSingleClick(event:MouseEvent):void
    {
        if (timer.running)
        {
            timer.removeEventListener(TimerEvent.TIMER_COMPLETE, timerComplete);
            timer.stop();
            dispatchEvent(new MouseEvent(MouseEvent.DOUBLE_CLICK));
        }
        else
        {
            singleClickEvent = event;
            timer.addEventListener(TimerEvent.TIMER_COMPLETE, timerComplete);
            timer.start();
        }
    }

    private function timerComplete( event:TimerEvent ):void
    {
        dispatchEvent(singleClickEvent.clone());    
        singleClickEvent = null;
    } 
```

基本上......当您单击一次启动计时器时，如果该计时器触发然后调度一个正常的 CLICK 事件。如果用户在计时器触发之前再次单击，则为双击并发送 DOUBLE_CLICK。

# javascript - 通过 AJAX 侦听向 DOM 添加的某些元素

> ID：12297203
> 
> 赞同：0
> 
> 时间：2012-09-06T09:40:31.303
> 
> 标签：javascript, jquery

我有一个使用大量 AJAX 来显示页面的 Web 应用程序。在我的 javascript 中，我有一个功能可以获取所有具有特定类 ( `testClass`) 的元素。它对这些类做了很多事情，但这对我的问题来说不是必需的。

目前我的函数在 DOM 准备好并且运行良好时运行。但是，当 AJAX 向浏览器返回一个新页面时，我需要运行我的函数，因为它可能包含带有`testClass`.

如果添加了某个 DOM 元素，有没有办法可以监听？我基本上需要一种方法来识别 DOM 更改，当这种更改发生时运行我的函数。或者有没有一种方法可以让我通过 class 来监听元素的添加`testClass`？

如果有帮助，这里是我的代码片段：

```
execute = function () {
    var found = false;
    $('.testClass').each(function () {
        //bunch of code
    });
}
$(document).ready(function () {
    execute();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:57:45.780

尝试使用[**ajax成功**](http://api.jquery.com/jQuery.ajax/)方法

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

# android - 随机 SQLite 数据库更新空异常

> ID：12297208
> 
> 赞同：1
> 
> 时间：2012-09-06T09:40:48.820
> 
> 标签：android

首先，让我说，这个异常不会经常发生，它只发生在我身上几次，不幸的是从来没有在电话连接和调试时发生。我得到的所有信息都来自用户发送给我的开发者控制台日志和应用程序日志。

首先，我得到的所有信息都来自开发者控制台：

```
Caused by: java.lang.NullPointerException 
```

打电话时：

```
//private SQLiteDatabase mDb; initialized earlier
ContentValues args = new ContentValues();
args.put(KEY_ENABLED, isEnabled);

return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0; //exception here 
```

猜测它可能是由于 mDb 以某种方式为空引起的，我在这里添加了日志记录，以了解到底发生了什么

```
//DbAdapter 
public boolean updateIsAlarmChecked(long rowId, boolean isEnabled) {
try {
    ContentValues args = new ContentValues();
    args.put(KEY_ENABLED, isEnabled);

    return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
} catch (Exception e) {
    Utils.log("updateIsAlarmChecked exception: " + e.getMessage());
    Utils.log("alarm enabled: " + isEnabled);
    Utils.log("db is " + (mDb == null ? "null" : "not null"));
    return false;
}
} 
```

不幸的是，收到的日志包含：

```
updateIsAlarmChecked exception: null
alarm enabled: true
db is not null 
```

所以看起来它是 SQLiteDatabase 内部的东西，但我怎样才能找出到底是什么？或者可能不是，因为开发者控制台没有显示该类中的任何痕迹？

我还将写出导致该错误的操作，也许这会有所帮助

1.  应用程序正常工作（据我所知），活动 A 可见
2.  用户编辑警报 - 打开新的 Activity B，其中有关警报的信息从新创建和打开的 DbAdapter 中读取（类类似于 NotePad Android 示例中的类，如果需要，我可能会提供更多代码）。
3.  用户完成编辑，它们被正确保存，B 正在完成返回结果。它的 DbAdapter 在 onDestroy 中关闭（我刚刚注意到并且我知道这是不正确的，因为并不总是调用 onDestroy。这可能是错误的原因吗？但是我只是尝试在注释掉关闭的情况下运行并且没有发生错误）
4.  onActivityResult 在 A 中被调用，调用 A 的 DbAdapter 实例的 updateIsAlarmChecked（也许这个实例有时会变得“不正确”？）
5.  发生异常并被捕获，更新不成功

有任何想法吗？非常感谢所有帮助

* * *

编辑：最新日志后的小更新。现在代码如下所示：

```
ContentValues args = null;
try {
    args = new ContentValues();
    args.put(KEY_ENABLED, isEnabled);
     return mDb.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0; //null exception here
} catch (Exception e) {
    Utils.log("alarm enabled: " + isEnabled); //true
    Utils.log("alarm id= " + rowId); //there is alarm with this rowId
    Utils.log("db is " + (mDb == null ? "null" : "not null")); //not null
    Utils.log("args is " + (args == null ? "null" : "not null")); //not null
    Logger.logException(e);
    return false;
} 
```

最糟糕的是，堆栈跟踪仅指向与返回语句一致 - 它不应该导致进一步“进入”更新方法吗？有什么想法我能用它做什么？太可怕了，它只是偶尔发生，我唯一能回复用户的是“再试一次，它只是有时会失败”......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:53:42.687

我认为您之所以会遇到这个问题，是因为您保存`database`! 在此链接中：[Sqlite](http://www.sqlite.org/datatype3.html)，`SQLite`没有单独的`Boolean`存储类。相反，`Boolean`值存储为`integers`0 ( `false`) 和 1 ( `true`)。因此，我认为您应该尝试将`bool`值保存为 0 或 1。

# hibernate - HQL 按集合项的属性值总和排序

> ID：12297209
> 
> 赞同：2
> 
> 时间：2012-09-06T09:40:48.757
> 
> 标签：hibernate, sum, hql, named

我希望有人可以通过 Hibernate 命名查询为我指明正确的方向。

我想根据集合项的属性对结果进行排序。认为这是最简单的例子：

我有 2 个班级：A 和 B

A 有一个属性“Bs”，它是 B 的集合。

B 有一个属性“rank”，它是一个整数。

我想查询（全部）As，并根据 A.Bs 中的 B.rank 总和对它们进行排序。

就像是：

```
select x from A as x order by sum(x.Bs.rank) 
```

希望这是有道理的！上面的查询现在抛出错误“非法尝试取消引用集合”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:12:10.747

您必须将对表 b 的访问手动添加到选择中，就像在 SQL 中一样。在 SQL 中，你可以

```
select a.key, a.col2, a.col3, ... from a, b
   where a.key = b.foreignKeyFromA
   group by a.key, a.col2, a.col3, ...
   order by sum(b.rank); 
```

Hibernate 不会自动生成对 B 的访问，因此您必须在 HQL 语句中手动实现它，就像这样

```
select new A(a.key, a.col2, a.col3, ...) from A a join B b
   group by a.key, a.col2, a.col3, ...
   order by sum(b.rank) 
```

（您需要适合 A 的构造函数，或者您可以取回具有单个值的对象数组。必须在映射中定义 A 和 B 之间的关系；可能已经是这种情况了。）

备注：在 group by 子句中，您必须提及您选择的所有列，即使它们不再更改分组（键已经是唯一的）。如果您没有提及所有选定的列，则会在 Oracle 数据库上出现错误。MySQL 不需要这个，有`group by a.key`足够的，但是您应该编写主要适用于所有数据库的 HQL 语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:00:21.990

如果 A 是复杂的或继承的，您可能只想获取它的 id：

```
select a.id, sum(b.rank)
from A as a join a.Bs as b
group by a.id
order by sum(b.rank) 
```

加载 A 使用`session.get(id)`.

# dbunit - Unitils/DbUnit：如何在多数据库环境中进行测试？

> ID：12297214
> 
> 赞同：2
> 
> 时间：2012-09-06T09:40:57.773
> 
> 标签：dbunit, multiple-databases, unitils

我正在使用 Unitils（与 DbUnit）进行数据访问层单元测试，但需要测试多个数据库。最好的方法是什么？数据库不同，因此一些 DAO 用于一个数据库，另一个 DAO 用于另一个数据库。

我看到以下替代方案：

1.  将每个 *DaoTest 与单独的 unitils.properties 文件相关联，该文件将保存此 DAO 数据库的配置。甚至可能吗？
2.  每个数据库都有一个单独的测试项目（保存这个数据库的 *DaoTests 和一个带有数据库凭据的 unitils.properties 文件）

还有其他想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-02T19:34:14.573

希望您在最初询问后的 6 年内找到了这个问题的答案 :)

我最近发现自己遇到了同样的问题并以这种方式解决了它：

我`unittils.properties`为每个 DAO 使用了一个，它定义了我的项目需要测试的每个数据源。在`unittils.properties`文件中，我定义了一个`database.schemaNames=DATABASE_1, DATABASE_2`属性。

然后，您可以将数据集定义修改为如下所示：

```
<?xml version='1.0' encoding='UTF-8'?>
<dataset xmlns="DATABASE_1" xmlns:b="DATABASE_2">
    <some_table />
    <b:some_other_table />

    <some_table attr_1="foo" attr_2="bar" />
    <b:some_other_table other_attr="baz" />
</dataset> 
```

请注意，`some_table`将假定居住在`DATABASE_1`. 这是因为 unittils 将`database.schemaNames`属性中的第一个数据库设置为默认值。因此，您可以选择`xmlns="DATABASE_1"`在数据集的 xml 文件中省略 。

# iterator - 在LabVIEW中格式化迭代器

> ID：12297220
> 
> 赞同：0
> 
> 时间：2012-09-06T09:41:10.317
> 
> 标签：iterator, while-loop, format, labview

我在一个while循环中写出一系列文件，它们被命名为

`1.dat, 2.dat, 3.dat...`

但我需要将数字格式化为 -

```
00001.dat, 00002.dat, 00003.dat... 
```

以便在重新读取它们时保持文件顺序。有没有办法更改 while 循环迭代器的格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T10:09:45.780

使用“格式化为字符串”节点，它允许用零填充整数：

![在此处输入图像描述](../Images/0db5cf328126b6ca03d0edc37a69c35a.png)

# ruby - 使用 ActiveRecord 为什么会引发 Mysql2::Error 而不是 Activerecord 错误？

> ID：12297222
> 
> 赞同：0
> 
> 时间：2012-09-06T09:41:18.297
> 
> 标签：ruby, activerecord, mysql2

我正在使用 ActiveRecord 在 thor 脚本中创建与数据库的连接。我在这种情况下使用的适配器是 mysql2。我想在我的代码中添加一些救援块，以便向用户提供一些特定的错误消息。

当我关闭本地主机上的 mysql 服务器并尝试连接（使用建立连接）时，我收到以下错误（如预期的那样）

```
Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2) (Mysql2::Error) 
```

为什么我没有收到 ActiveRecord::ConnectionNotEstablished 错误而不是 Mysql2::Error？我问的原因是 Mysql2 没有特定的错误类型（基于[https://github.com/brianmario/mysql2/blob/master/lib/mysql2/error.rb](https://github.com/brianmario/mysql2/blob/master/lib/mysql2/error.rb)）而活动记录有（[http://api .rubyonrails.org/files/activerecord/lib/active_record/errors_rb.html](http://api.rubyonrails.org/files/activerecord/lib/active_record/errors_rb.html) )

将 ruby​​ 1.9.3 和 activerecord 3.2.8 与 mysql2 0.3.11 一起使用

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T12:25:36.877

找到mysql套接字似乎有问题

这个链接可以帮助你，

[Ruby on Rails 3 无法通过 OSX 上的套接字“/tmp/mysql.sock”连接到本地 MySQL 服务器](https://stackoverflow.com/questions/5499035/ruby-on-rails-3-cant-connect-to-local-mysql-server-through-socket-tmp-mysql-s)

# c# - 使用 Script# 编译代码（独立）

> ID：12297223
> 
> 赞同：2
> 
> 时间：2012-09-06T09:41:18.790
> 
> 标签：c#, javascript, script#

我正在尝试使用 Script# 编译器将 C# 的小片​​段编译成 JavaScript。

但是我没有得到任何回报，因为`GetStream()`我`MemoryStreamSource`什至没有被召唤，所以我一定做错了什么。

这是我的代码：

```
CodeScriptCompiler csc = new CodeScriptCompiler();

return csc.CompileCSharp("String.IsNullOrWhiteSpace(Model.MobilePhoneNumber)"); 
```

**`CodeScriptCompiler.cs`**

```
using System;
using System.Collections.Generic;
using ScriptSharp;

namespace CodeToScriptCompiler
{
    public class CodeScriptCompiler
    {
        ScriptCompiler sc = new ScriptCompiler();

        public string CompileCSharp(string csharpCode)
        {
            string errorMessages = String.Empty;

            CompilerOptions options = new CompilerOptions();
            options.Defines = new List<string>();
            options.References = new List<string>();
            options.References.Add("System.dll");
            options.Resources = new List<IStreamSource>();
            options.Sources = new List<IStreamSource>();
            options.Sources.Add(new MemoryStreamSource(csharpCode));
            options.TemplateFile = new MemoryStreamSource(csharpCode);

            MemoryStreamDestination output = new MemoryStreamDestination();
            options.ScriptFile = output;

            if (!options.Validate(out errorMessages))
            {
                return errorMessages;
            }

            return output.GetCompiledCode();
        }
    }
} 
```

**`MemoryStreamSource.cs`**

```
using System.IO;
using System.Text;
using ScriptSharp;

namespace CodeToScriptCompiler
{
    public class MemoryStreamSource : IStreamSource
    {
        private string _code;

        private MemoryStream _memoryStream;

        public MemoryStreamSource(string code)
        {
            this._code = code;
        }

        public string Name
        {
            get { return "InMemoryCode"; }
        }

        public string FullName
        {
            get { return "InMemoryCode"; }
        }

        public void CloseStream(Stream stream)
        {
            stream.Close();
        }

        public Stream GetStream()
        {
            this._memoryStream = new MemoryStream(Encoding.ASCII.GetBytes(this._code));

            return this._memoryStream;
        }
    }
} 
```

**`MemoryStreamDestination.cs`**

```
using System;
using System.IO;
using ScriptSharp;

namespace CodeToScriptCompiler
{
    public class MemoryStreamDestination : IStreamSource
    {
        private MemoryStream _memoryStream;

        private string _compiledCode;

        public string Name
        {
            get { return "MemoryStreamDestination"; }
        }

        public string FullName
        {
            get { return "MemoryStreamDestination"; }
        }

        public void CloseStream(Stream stream)
        {
            if (String.IsNullOrWhiteSpace(this._compiledCode))
            {
                this._compiledCode = this.GetCompiledCode();
            }

            stream.Close();
        }

        public Stream GetStream()
        {
            this._memoryStream = new MemoryStream();

            return this._memoryStream;
        }

        public string GetCompiledCode()
        {
            if (!String.IsNullOrWhiteSpace(this._compiledCode))
            {
                return this._compiledCode;
            }

            if (this._memoryStream != null)
            {
                using (StreamReader sr = new StreamReader(this._memoryStream))
                {
                    return sr.ReadToEnd();
                }
            }

            return String.Empty;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:05:42.200

我认为有些事情可能存在问题。

1.  TemplateFile 设置为ac#码流。不要设置它，因为那不是一个有效的模板。
2.  引用应包括 script# mscorlib，此外，仅包含有效 script# 程序集的完整路径。System.dll 不是脚本# 程序集。
3.  在从 MemoryStream 读取之前，需要将流位置设置回开始，否则编译器写入后它在结束，没有更多可读取的内容。
4.  在您创建的编译器实例上没有看到对编译的调用，传入选项实例。我的猜测是您确实这样做了，只是堆栈溢出片段中没有。

您可能还应该实现 IErrorHandler 并将其传递给编译器以在它们发生时获取错误消息，一旦您有基本的东西工作。

作为参考，您还可以查看[https://github.com/nikhilk/scriptsharp/tree/master/tests/ScriptSharp/Core](https://github.com/nikhilk/scriptsharp/tree/master/tests/ScriptSharp/Core)上的单元测试，它执行类似的操作。

请注意，您需要一个有效的 c# 源文件，而不是一个独立的表达式。但是，您可以通过从结果脚本的开头和结尾剥离内容来处理该问题，以获取您关心的表达式的脚本。

希望有帮助。

我当然有兴趣/好奇了解您如何使用它，以及您在哪里编译 c# 以动态编写脚本......

# java - 如何在 jstl 中调用静态方法？

> ID：12297224
> 
> 赞同：1
> 
> 时间：2012-09-06T09:41:20.877
> 
> 标签：java, jstl, static-methods, taglib

我已经看到这个问题已经在这里回答了，但是当我尝试相同的方法时，它不起作用。这是我的代码：

```
package linear_programming.matrix;

import java.lang.reflect.Array;
import java.text.DecimalFormat;
import java.text.NumberFormat;

/**
 *
 * @author Jevison7x
 */
public final class MatrixOperations<T extends Number>
{
    /**
 * This method round's off decimal numbers to two decimal places.
 * @param d The decimal number to be rounded off.
     * @param decPlaces The number of decimal places to round off.
 * @return the rounded off decimal number.
 */
public static double roundOff(double d, int decPlaces)
{ 
        if(decPlaces < 0)
            throw new IllegalArgumentException("The number of decimal places cannot be less than 0.");
        else
        {
            String places = "";
            for(int i = 0; i < decPlaces; i++)
            places += "0";
            NumberFormat nf = new DecimalFormat("0."+places);
            return Double.parseDouble(nf.format(d));
        }
}
} 
```

这是我的 tld 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib 
    version="2.1" 
    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">

    <display-name>Custom Functions</display-name>
    <tlib-version>1.0</tlib-version>
    <short-name>func</short-name>
    <uri>/WEB-INF/tlds/Functions</uri>

    <function>
        <name>roundOff</name>
        <function-class>linear_programming.matrix.MatrixOperations</function-class>
        <function-signature>double roundOff(double int)</function-signature>
    </function>
</taglib> 
```

然后这是我的 JSP 文件：

```
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@taglib uri="/WEB-INF/tlds/Functions" prefix="func"%>
<table>
    <c:forEach var="Msegment" items="${multipliedSegments}" varStatus="segmentCount">
    <tr>
        <td>X<sub>${segmentCount.count}</sub><sup>T</sup>X<sub>${segmentCount.count}</sub>=</td>
        <td>
            <table border="1">
        <c:forEach var="row" items="${Msegment}">
                <tr>
            <c:forEach var="col" items="${row}">
                <td>${col}</td><!-- Iwant to invoke the static method here -->
            </c:forEach>
                </tr>
        </c:forEach>
            </table>
        </td>
    </tr>
    <tr><td>&nbsp;</td><td>&nbsp;</td></tr>
    </c:forEach>
</table> 
```

我只想调用静态方法

```
roundOff(double d, int decPlaces) 
```

并传递变量

```
${col} 
```

作为双参数 - d，然后任何数字都可以用于 decPlaces。任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T09:47:00.847

```
 ${func:roundOff(col, 1)} 
```

应该做。但是AFAIK，taglib文件中的签名应该是

```
double roundOff(double, int)
                      ^--- comma here. 
```

如果这不起作用，请提及您收到的确切错误消息，而不仅仅是说“它不起作用”。

# java - 将复合键列表作为参数传递给查询？

> ID：12297225
> 
> 赞同：0
> 
> 时间：2012-09-06T09:41:23.290
> 
> 标签：java, sql, sql-server-2008, jdbc

我们的旧系统有`T`带有复合键的表 - 两列`A`，`B`我需要搜索符合我的条件的行，即`A == x AND B == y`.

但是对于一组类似的`(x,y)`东西`{(x1,y1), (x2,y2), (x3,y3)}`

如果我这样做`X = {x1,x2x3}`并且`Y = {y1,y2,y3}`

```
select A,B,value from T where A in (X) and B in (Y) 
```

我的结果可能包含 row `x1, y2, valueN`，但这是不正确的

我没有 touples 计数的上限，我需要将它作为 Java 代码中的参数传递。

我的服务器是 MS SQL 2008

看起来表值参数可能是答案，但 JDBC 驱动程序尚不支持

（希望这足够清楚）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T08:44:27.447

有几种解决方案：

使用检查组合的语句：

```
SELECT A, B, value FROM T WHERE A = X1 AND B = Y1 OR A = X2 AND B = Y2 
```

使用准备好的语句并单独查询每个组合（注意：在此处使用 Java 7 try-with-resources）

```
try (PreparedStatement pstmt = con.prepareStatement("SELECT A, B, value FROM T WHERE A = X1 AND B = Y1")) {
  for (Tuple tuple : tuples) {
    pstmt.setObject(1, tuple.X);
    pstmt.setObject(2, tuple.Y);
    try (ResultSet rs = pstmt.executeQuery()) {
      while (rs.next()) {
        // process however you like
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:44:46.737

您可以使用的一种技巧是将值转换为字符串并将它们连接起来

# c# - 如何为模型网格创建纹理？

> ID：12297228
> 
> 赞同：1
> 
> 时间：2012-09-06T09:41:26.120
> 
> 标签：c#, xna, textures, hlsl

是否有可能从 xna 中的网格部件创建纹理。通过获得网格的平面版本。所以我可以为它创建一个纹理并编辑该纹理（通过渲染目标）？我需要获取纹理（还不是纹理），以便我可以在其上放置另一个纹理。

我可以创建纹理并将其放在某个网格上。但我就是不知道如何创建尺寸合适的纹理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:40:43.423

查看[gamedev.stackexchange](https://gamedev.stackexchange.com/)以了解与游戏/XNA 相关的问题。您可能会得到更有针对性的回应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T07:27:42.690

我发现我可以在 hlsl 中使用 tex2dproj()。

示例：http: [//iloveshaders.blogspot.nl/2011/10/projective-texturing.html](http://iloveshaders.blogspot.nl/2011/10/projective-texturing.html)

# android - twitter4j 代码不适用于 ICS 和 JellyBean

> ID：12297233
> 
> 赞同：2
> 
> 时间：2012-09-06T09:41:38.773
> 
> 标签：android, twitter, android-intent, twitter-oauth

我正在使用 twitter4J 在 twitter 上发布推文

在这里我根据您的建议更改代码。我做了一些谷歌搜索。问题是当我尝试从主要活动转移到推特活动时，它显示强制关闭。主要活动是 = "MainActivity" 推特活动是 = "twiti_backup" 我认为 Manifestfile 有问题，但我不知道是什么问题。

```
public class twiti_backup extends Activity {

private static final String TAG = "Blundell.TweetToTwitterActivity";

private static final String PREF_ACCESS_TOKEN = "";

private static final String PREF_ACCESS_TOKEN_SECRET = "";

private static final String CONSUMER_KEY = "";

private static final String CONSUMER_SECRET = ""; 
private static final String CALLBACK_URL = "android:///";

private SharedPreferences mPrefs;

private Twitter mTwitter;

private RequestToken mReqToken;

private Button mLoginButton;
private Button mTweetButton;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    Log.i(TAG, "Loading TweetToTwitterActivity");
    setContentView(R.layout.twite);

    mPrefs = getSharedPreferences("twitterPrefs", MODE_PRIVATE);

    mTwitter = new TwitterFactory().getInstance();

    mTwitter.setOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRET);

    mLoginButton = (Button) findViewById(R.id.login_button);
    mTweetButton = (Button) findViewById(R.id.tweet_button);
}

public void buttonLogin(View v) {
    Log.i(TAG, "Login Pressed");
    if (mPrefs.contains(PREF_ACCESS_TOKEN)) {
        Log.i(TAG, "Repeat User");
        loginAuthorisedUser();
    } else {
        Log.i(TAG, "New User");
        loginNewUser();
    }
}

public void buttonTweet(View v) {
    Log.i(TAG, "Tweet Pressed");
    tweetMessage();
}

private void loginNewUser() {
    try {
        Log.i(TAG, "Request App Authentication");
        mReqToken = mTwitter.getOAuthRequestToken(CALLBACK_URL);

        Log.i(TAG, "Starting Webview to login to twitter");
        WebView twitterSite = new WebView(this);
        twitterSite.loadUrl(mReqToken.getAuthenticationURL());
        setContentView(twitterSite);

    } catch (TwitterException e) {
        Toast.makeText(this, "Twitter Login error, try again later", Toast.LENGTH_SHORT).show();
    }
}

private void loginAuthorisedUser() {
    String token = mPrefs.getString(PREF_ACCESS_TOKEN, null);
    String secret = mPrefs.getString(PREF_ACCESS_TOKEN_SECRET, null);

    // Create the twitter access token from the credentials we got previously
    AccessToken at = new AccessToken(token, secret);

    mTwitter.setOAuthAccessToken(at);

    Toast.makeText(this, "Welcome back", Toast.LENGTH_SHORT).show();

    enableTweetButton();
}

@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    Log.i(TAG, "New Intent Arrived");
    dealWithTwitterResponse(intent);
}

@Override
protected void onResume() {
    super.onResume();
    Log.i(TAG, "Arrived at onResume");
}

private void dealWithTwitterResponse(Intent intent) {
    Uri uri = intent.getData();
    if (uri != null && uri.toString().startsWith(CALLBACK_URL)) { // If the user has just logged in
        String oauthVerifier = uri.getQueryParameter("oauth_verifier");

        authoriseNewUser(oauthVerifier);
    }
}

private void authoriseNewUser(String oauthVerifier) {
    try {
        AccessToken at = mTwitter.getOAuthAccessToken(mReqToken, oauthVerifier);
        mTwitter.setOAuthAccessToken(at);

        saveAccessToken(at);

        // Set the content view back after we changed to a webview
        setContentView(R.layout.twite);

        enableTweetButton();
    } catch (TwitterException e) {
        Toast.makeText(this, "Twitter auth error x01, try again later", Toast.LENGTH_SHORT).show();
    }
}

private void enableTweetButton() {
    Log.i(TAG, "User logged in - allowing to tweet");
    mLoginButton.setEnabled(false);
    mTweetButton.setEnabled(true);
}

private void tweetMessage() {
    try {
        mTwitter.updateStatus("Test - Tweeting with @Blundell_apps #AndroidDev Tutorial using #Twitter4j http://blog.blundell-apps.com/sending-a-tweet/");

        Toast.makeText(this, "Tweet Successful!", Toast.LENGTH_SHORT).show();
    } catch (TwitterException e) {
        Toast.makeText(this, "Tweet error, try again later", Toast.LENGTH_SHORT).show();
    }
}

private void saveAccessToken(AccessToken at) {
    String token = at.getToken();
    String secret = at.getTokenSecret();
    Editor editor = mPrefs.edit();
    editor.putString(PREF_ACCESS_TOKEN, token);
    editor.putString(PREF_ACCESS_TOKEN_SECRET, secret);
    editor.commit();
} 
```

}

这是清单

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" 
        android:launchMode="singleInstance"
          android:configChanges="orientation|screenSize">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".twiti_backup"
         android:launchMode="singleInstance">     
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />               <data android:scheme="android" android:host="callback_main" />              </activity>
  <activity android:name=".MyTwite"/>
    <activity android:name=".mp3" />
     <activity android:name=".myfbapp" />
</application> 
```

当我尝试从主要活动启动 twiti_backup 时，这是 Log cat

```
W/dalvikvm(16357): threadid=1: thread exiting with uncaught exception (group=0x4001d5a0) 
E/AndroidRuntime(16357): FATAL EXCEPTION: main E/AndroidRuntime(16357): java.lang.VerifyError: com.example.uitest.twiti_backup
E/AndroidRuntime(16357): at java.lang.Class.newInstanceImpl(Native Method)
E/AndroidRuntime(16357): at java.lang.Class.newInstance(Class.java:1409)
E/AndroidRuntime(16357): at android.app.Instrumentation.newActivity(Instrumentation.java:1040)
E/AndroidRuntime(16357): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1735)
E/AndroidRuntime(16357): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1842)
E/AndroidRuntime(16357): at android.app.ActivityThread.access$1500(ActivityThread.java:132)
E/AndroidRuntime(16357): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1038)
E/AndroidRuntime(16357): at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(16357): at android.os.Looper.loop(Looper.java:143)
E/AndroidRuntime(16357): at android.app.ActivityThread.main(ActivityThread.java:4263)
E/AndroidRuntime(16357): at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(16357): at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(16357): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
E/AndroidRuntime(16357): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
E/AndroidRuntime(16357): at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:03:08.287

**首先**，您`CALLBACKURL = "T4J_OAuth://callback_main"`与您的比较是错误的`manifest`，应该是：`CALLBACKURL = "T4J_OAuth:///"`

**第二**： `android:launchMode="singleTop"`应该`android:launchMode="singleInstance"`

也许还有一些错误，但你应该自己修复它！

**编辑：**你应该声明`Provider`和`Consumer`：

```
consumer = new CommonsHttpOAuthConsumer(CONSUMER_KEY, CONSUMER_SECRETE);
provider = new DefaultOAuthProvider(
            "http://twitter.com/oauth/request_token",
            "http://twitter.com/oauth/access_token",
            "http://twitter.com/oauth/authorize");
provider.retrieveRequestToken(consumer, CALL_BACK);
startActivity(new Intent(Intent.ACTION_VIEW, Uri
                    .parse(result))); 
```

Also, you should create some `AsyncTask` to call those statments: `rovider.retrieveRequestToken(consumer, CALL_BACK);` and `provider.retrieveAccessToken(consumer, verifier);`

**Edited** Look at this [tutorial](http://automateddeveloper.blogspot.com/2011/06/android-twitter-oauth-authentication.html), just change the `CallBack_Url = "..."` to `CallBack_URL = "callback:///"` and using below code to create `Twitter` object:

```
ConfigurationBuilder cb = new ConfigurationBuilder();
cb.setDebugEnabled(true).setOAuthConsumerKey(CONSUMER_KEY)
.setOAuthConsumerSecret(CONSUMER_SECRETE)
// accessTokenKey and accessTokenSecrete are what you get after redirecting
//   back from your oauthentication
.setOAuthAccessToken(accessTokenKey)
.setOAuthAccessTokenSecret(accessTokenSecrete)
.setMediaProviderAPIKey(TWITPIC_API_KEY);
Configuration config = cb.build();
TwitterFactory tf = new TwitterFactory(config);
Twitter twitter = tf.getInstance(); 
```

**Notice:** Don't let the `call back url` property in your `twitter app` null, put any dummy link into it! (App of your twitter account!! not your android app!) Sorry if there's any type error!

**Edit** You got an `Verifier` error because of your verifier is wrong! I used `signpost` lib to get `verifier`: `String verifier = data .getQueryParameter(oauth.signpost.OAuth.OAUTH_VERIFIER);` I think you should try to use `signpost` lib!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T10:25:54.933

Add below two line code into your main activity's onCreate method after setcontentview() line, it will solve your problem.

```
if (android.os.Build.VERSION.SDK_INT > 9) {
    StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
    StrictMode.setThreadPolicy(policy);
} 
```

# sql - 在 Where 子句中使用存储过程的结果

> ID：12297234
> 
> 赞同：5
> 
> 时间：2012-09-06T09:41:39.487
> 
> 标签：sql, sql-server, sql-server-2008-r2

我正在构建的 MS SQL 2008 R2 中有一个存储过程（SP），它需要用户列表来缩小返回的数据范围。

我正在处理的系统有一个 GetUsers SP，它返回一个用户列表，然后我需要使用它来限制从我自己正在处理的 SP 返回的结果。

我已经查看了 TABLE 变量，但不确定这是否正是我所需要的。

我将如何将一个 SP 的结果集成到另一个 SP 的 where 子句中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T09:47:02.217

您可以通过以下方式获取 SP 的结果

```
DECLARE @yourtablevariable TABLE (fields....)    

INSERT INTO @yourtablevariable
EXEC GetUsers 
```

然后

```
SELECT *
FROM othertable
    INNER JOIN @yourtablevariable users on othertable.userid=users.userid 
```

或者

```
SELECT *
FROM othertable
WHERE userid in (SELECT UserID FROM @yourtablevariable) 
```

或者，如果可能，您可以将 GetUsers 转换为表值函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:47:14.833

在 SQL Server 中，如果 SP 返回 a ，则如果返回的数据量较大`TABLE`，则最好使用*表变量* **(@Table)**或*内存表* **(#Table) 。**

# php - PHP中的数组引用混淆

> ID：12297239
> 
> 赞同：5
> 
> 时间：2012-09-06T09:41:51.033
> 
> 标签：php

```
$arr = array(1);
$a = & $arr[0];

$arr2 = $arr;
$arr2[0]++;

echo $arr[0],$arr2[0];

// Output 2,2 
```

你能帮我看看怎么可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T09:48:32.213

> 但是请注意，数组内部的引用具有潜在危险。使用右侧的引用进行普通（非引用）赋值不会将左侧变为引用，但数组内的引用会保留在这些普通赋值中。这也适用于数组按值传递的函数调用。

```
/* Assignment of array variables */
$arr = array(1);
$a =& $arr[0]; //$a and $arr[0] are in the same reference set
$arr2 = $arr; //not an assignment-by-reference!
$arr2[0]++;
/* $a == 2, $arr == array(2) */
/* The contents of $arr are changed even though it's not a reference! */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:35:36.537

```
$arr = array(1);//creates an Array ( [0] => 1 ) and assigns it to $arr
$a = & $arr[0];//assigns by reference $arr[0] to $a and thus $a is a reference of $arr[0]. 
//Here $arr[0] is also replaced with the reference to the actual value i.e. 1

$arr2 = $arr;//assigns $arr to $arr2

$arr2[0]++;//increments the referenced value by one

echo $arr[0],$arr2[0];//As both $aar[0] and $arr2[0] are referencing the same block of memory so both echo 2

// Output 22 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T09:45:45.613

看起来 $arr[0] 和 $arr2[0] 指向同一个分配的内存，所以如果你在其中一个指针上递增，int 将在内存中递增

链接[php中有指针吗？](https://stackoverflow.com/questions/746224/are-there-pointers-in-php)

# ruby-on-rails - 导轨连接问题

> ID：12297240
> 
> 赞同：0
> 
> 时间：2012-09-06T09:41:56.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我的模型（只是一个插图）

```
Movie   
has_many :usermovies

Usermovie
  belongs_to :user   
  belongs_to :movie

User
  has_many :usermovies 
```

现在在`compare`行动

```
@compare_with = User.find(params[:compare_with])
I have  user_ids = [current_user.id,@compare_with.id]
@movies = Movie.joins("usermovies").where('usermovies.user_id' => user_ids) 
```

错误：

```
Mysql2::Error: Unknown table 'movies': SELECT `movies`.* FROM `movies` usermovies WHERE `usermovies`.`user_id` IN (3, 1)

Extracted source (around line #9):

6:   <td><%= "#{@compare_with.name}'s rating" %> </td>
7: </thead>
8: <tbody>
9:   <% @movies.each do |movie| %>
10:   <td></td>
11:   <td></td>
12:   <% end %> 
```

但是当我使用它`:includes`而不是`:joins`它时效果很好。

任何想法代码有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:46:28.663

问题出在`.joins("usermovies")`.

您必须传递符号，例如：

```
joins(:usermovies) 
```

否则，如果您传递一个字符串：

```
joins("JOIN usermovies") 
```

这是因为当你传递一个字符串时，Rails 期望你也指定`JOIN`类型。如果您想将默认值更改`INNER JOIN`为 a`LEFT OUTER JOIN`或，此功能特别有用`RIGHT OUTER JOIN`。但是，由于 Rails 不知道您是否要更改连接类型，因此如果您传递一个字符串，即使您不想更改连接类型，也必须显式包含`JOIN`在字符串中。

# digital-signature - AX 2009 + PDF 中的数字签名

> ID：12297248
> 
> 赞同：1
> 
> 时间：2012-09-06T09:42:19.403
> 
> 标签：digital-signature, axapta, dynamics-ax-2009, ax

我有凭证，必须由高级官方 abc xyz 进行数字签名。

我知道必须在 PDF 文件（报告输出）中添加数字签名，但不确定如何，还必须从 Axapta 调用某些 PDF 方法，但不知道这些方法是什么以及如何调用它们.

请协助我如何处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:49:50.353

电子签名本身与数字签名不同。电子签名只是手写签名的替代品，而数字签名提供了额外的安全措施。

## 电子签名

我建议 PDF 由 AX 正常生成，然后在上级官员阅读并批准文件后进行[数字签名。](http://en.wikipedia.org/wiki/Digital_signature)签名必须在文档生成后应用，因为它包含其内容的散列。

签名可以由第三方软件完成。

首先阅读[Adob​​e 关于此事的页面](http://www.adobe.com/security/digsig.html)。

## 电子签名

AX 2012 有一些功能，[从这里开始](http://technet.microsoft.com/en-us/library/dd362020.aspx)。

AX 2009，见[Dilip的博客](http://daxdilip.blogspot.dk/2008/04/whats-new-in-dynamics-ax-2009-dynamics.html)，也记得启用[配置键](http://community.dynamics.com/product/ax/axtechnical/b/axlachlancash/archive/2009/08/18/electronic-signature.aspx)。

> Microsoft Dynamics AX 2009 不提供用于电子签名的捕获和处理的完整系统。但它确实提供了一个内核事件和一个可编辑的事件方法。这些可以成为合作伙伴开发的电子签名子系统的基础

AX 2009 SP1[新增功能](http://msdn.microsoft.com/en-us/library/cc602654%28v=ax.50%29.aspx#ESignature)：

> Microsoft Dynamics AX 2009 SP1 提供了一个用于捕获和处理电子签名的系统。该系统提供了几个内置的签名，例如物料清单批准。
> 
> 您可以使用电子签名要求表单启用内置签名。此表单还使管理员能够定义表或字段的新签名。定义新的签名需要仔细规划以避免过度的安全性，这可能会阻止对表的正确访问。
> 
> 有关使用内置签名或定义新签名的详细信息，请参阅系统和应用程序设置帮助中的“电子签名要求（表单）”。在帮助的 SP1 版本中，请参阅“通用电子签名”。

# resttemplate - RestTemplate POST 与 JSon

> ID：12297251
> 
> 赞同：0
> 
> 时间：2012-09-06T09:42:33.180
> 
> 标签：resttemplate

我再次寻求专家的帮助/指导，

我的问题是，我需要创建动态网站来调用 restfull 服务器来获取数据，所有请求都是 POST 并返回 json 对象。我正在考虑使用 Spring RestTemplate 来调用服务器。我的服务器工作正常，这意味着目前一些 android 和 Apple 应用程序连接到相同的 API 并且它们工作正常。但是当我尝试使用 RestTemplate 连接到服务器时，它给出了一些错误

> org.springframework.web.client.HttpClientErrorException：400 错误请求

这是我的服务器，

```
@Controller
public class ABCController
{

     @RequestMapping(method = RequestMethod.POST, value = "/user/authenticate")
     public @ResponseBody LoginResponse login(@RequestParam("email") String email,@RequestParam("password") String password,@RequestParam("facebookId") String facebookId) {

        LoginRequest request = new LoginRequest(email, password, facebookId);

        UserBusiness userBusiness = UserBusinessImpl.getInstance();

        return userBusiness.login(request);

    }
} 
```

这是我的服务器弹簧配置，

```
 <?xml version="1.0" encoding="UTF-8"?> 
<beans xmlns="http://www.springframework.org/schema/beans" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"
       xmlns:context="http://www.springframework.org/schema/context"      
       xmlns:mvc="http://www.springframework.org/schema/mvc"
        xmlns:jee="http://www.springframework.org/schema/jee"
       xsi:schemaLocation="http://www.springframework.org/schema/beans                         http://www.springframework.org/schema/beans/spring-beans-3.1.xsd                        http://www.springframework.org/schema/context                           http://www.springframework.org/schema/context/spring-context-3.1.xsd                        http://www.springframework.org/schema/mvc                           http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
http://www.springframework.org/schema/jee                          http://www.springframework.org/schema/jee/spring-jee-3.0.xsd">  

    <bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />
    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

    <bean id="jsonViewResolver" class="org.springframework.web.servlet.view.json.MappingJacksonJsonView" />
    <bean id="viewResolver" class="org.springframework.web.servlet.view.BeanNameViewResolver" />

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
        <property name="messageConverters">
            <list>
                <ref bean="jsonConverter" />
            </list>
        </property>
    </bean>

    <bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
    <property name="supportedMediaTypes" value="application/json" />
    </bean> 

    <bean name="abcController" class="com.abc.def.controller.ABCController" />  

    <mvc:annotation-driven />
</beans> 
```

这就是我尝试使用 RestTemplate 调用服务器的方式，

```
<bean id="restTemplate" class="org.springframework.web.client.RestTemplate">
    <!-- <constructor-arg ref="httpClientFactory"/> -->

    <property name="messageConverters">
        <list>
            <bean class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
               <property name="objectMapper">
                    <ref bean="JacksonObjectMapper" />
               </property>
            </bean>

        </list>
    </property>
</bean>

    <bean id="JacksonObjectMapper" class="org.codehaus.jackson.map.ObjectMapper" /> 
```

这就是我使用它的方式（用于测试）

```
ApplicationContext applicationContext = new ClassPathXmlApplicationContext("root-context.xml");
     RestTemplate twitter = applicationContext.getBean("restTemplate", RestTemplate.class);

     MultiValueMap<String, String> map = new LinkedMultiValueMap<String, String>();
    map.add("email", "x1@test.com");
     map.add("password", "abc");
     map.add("facebookId", null);

    HttpEntity<LoginResponse> response= twitter.exchange("https://abc.com/Rest/api/user/authenticate", HttpMethod.POST, map, LoginResponse.class); 
```

我的登录响应类及其子类，

1.  登录响应

公共类 LoginResponse 扩展 BaseResponse {
私有 LoginBase 数据；使用 getter 和 setter
}

1.  登录基地

> > 公共类 LoginBase { 私有字符串令牌；
> > 私人用户用户；
> > 
> > ```
> >  with getters and setters
> > 
> > } 
> > ```

1.  用户

> 公共类用户{
> 
> ```
>  private Integer userId; 
>   private String email;   
>   private Integer status;     
>   private String name;
> 
>         with getters and setters
> } 
> ```

1.  最后是 BaseResponse

> 公共类 BaseResponse {
> 受保护的字符串状态码；
> 
> ```
>  with getter and setter } 
> ```

**我的问题是，1.为什么我在调用服务器时会收到此错误**

> 信息：org.springframework.beans.factory.support.DefaultListableBeanFactory - 在 org.springframework.beans.factory.support.DefaultListableBeanFactory@63de8f2d 中预实例化单例：定义 bean [restTemplate,JacksonObjectMapper]；工厂层次结构的根警告：org.springframework.web.client.RestTemplate - “https://abc.com/Rest/api/user/authenticate”的 POST 请求导致 400（错误请求）；在 org.springframework.web.client 的 org.springframework.web.client.DefaultResponseErrorHandler.handleError(DefaultResponseErrorHandler.java:90) 的线程“main”中调用错误处理程序异常 org.springframework.web.client.HttpClientErrorException: 400 Bad Request。 RestTemplate.handleResponseError(RestTemplate.java:494) at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:451)

**2.我如何将json响应映射到java LoginResponse**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-31T10:01:44.440

您可能必须在请求中添加内容类型和接受标头。

将响应映射到 LoginResponse 可以像这样直接完成

```
LoginResponse lResponse = response.getBody(); 
```

或者如果您使用的是 restTemplate.postForObject()，则响应将采用 LoginResponse 的形式

# c# - 无法更新磁贴内容

> ID：12297257
> 
> 赞同：0
> 
> 时间：2012-09-06T09:42:59.440
> 
> 标签：c#, windows-8, microsoft-metro

我创建了 4 个磁贴模板内容，并在应用程序启动时使用这四个模板更新了磁贴。

现在我只想从应用程序中清除一个磁贴模板。我试过

```
TileUpdateManager.CreateTileUpdaterForApplication().Clear(); 
```

但这是清除所有磁贴模板。如何只清除一个特定的瓷砖？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:40:16.367

无法`Clear`从磁贴发出特定通知。该`Clear`方法删除所有通知。

对于过期的磁贴内容，请考虑使用类`ExpirationTime`上的属性`TileNotification`，或调用`Clear`然后重新发送仍然有效的通知。

*   此[Microsoft 文章的第](http://msdn.microsoft.com/en-gb/library/windows/apps/hh465439.aspx)[9 点](http://msdn.microsoft.com/en-gb/library/windows/apps/hh465439.aspx#optional__clear_your_tile_notification)提供了更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T14:10:51.717

我花了一段时间才弄清楚，所以我想我会把我的代码发布给任何寻求快速答案的人。

```
private void ClearScheduledTileNotifications()
    {
        var notify = Notifications.TileUpdateManager.CreateTileUpdaterForApplication();

    // Clear the notifications. This wil stop the live tile stuff straight out, but it wont remove the items from the list.
        notify.Clear();

       // Get the list of notifications
        var list = notify.GetScheduledTileNotifications();
        // Loop through the list of notifications and remove them from the manager.
        foreach (var item in list)
        {
            // NOTE: If you want the list to exist, you could change the expiration date here as recommended in the 
    // MS Article above. I am just removing. You could also search for specific criteria here, or use linq on the query above.
            Notifications.TileUpdateManager.CreateTileUpdaterForApplication().RemoveFromSchedule(item);
        }
    } 
```

# mongodb - 如何在 Mongo 中通过 user_id 将数据拆分到每个分片？

> ID：12297264
> 
> 赞同：4
> 
> 时间：2012-09-06T09:43:14.223
> 
> 标签：mongodb

我有3个碎片

我是否可以专门定义 shard1 仅包含 user_id = 1 的数据，以及 user_id = 2 的 shard2 和 user_id = 3 的 shard3 ，而不是自动分片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:39:52.543

您可以走手动拆分和分片路线并关闭平衡器，但更具可扩展性的解决方案可能是尝试2.2中的新分片[标记功能](http://www.mongodb.org/display/DOCS/Tag+Aware+Sharding)

Kristina 的[示例](http://www.kchodorow.com/blog/2012/07/25/controlling-collection-distribution/)旨在展示如何控制集合分布，但您可以根据自己的目的对其进行调整，例如为两个集合中的特定用户范围标记块，以确保它们在特定分片上的位置。

您仍然必须以某种方式自己管理它，但至少从块管理和迁移的角度来看，它可以减轻您的负担。

# php - MySQL和PHP中的更新查询不起作用

> ID：12297268
> 
> 赞同：1
> 
> 时间：2012-09-06T09:43:25.557
> 
> 标签：php, mysql

PHP 通常开箱即用，但我无法让这个查询工作。我正在尝试更新一个简单的记录。我的代码如下。

```
<?php

 $customername=mysql_real_escape_string($_POST['customername']); 
 $contact=mysql_real_escape_string($_POST['contact']); 
 $customerorder=mysql_real_escape_string($_POST['customerorder']); 
 $orderplaced=mysql_real_escape_string($_POST['orderplaced']); 
 $staffmember=mysql_real_escape_string($_POST['staffmember']); 
 $daterequired=mysql_real_escape_string($_POST['daterequired']); 
 $status=mysql_real_escape_string($_POST['status']); 
 $paid=mysql_real_escape_string($_POST['paid']); 
 $delivery=mysql_real_escape_string($_POST['delivery']); 
 $ordercontent=mysql_real_escape_string($_POST['ordercontent']); 
 $orderid=mysql_real_escape_string($_GET['orderid']); 

mysql_connect("localhost", "xxxx", "xxxxxxx") or die("Connection Failed");
mysql_select_db("xxxxxx")or die("Connection Failed");

$query = "UPDATE ordermanager_orders SET customername='$customername', contact='$contact',  ordernumber='$customerorder', placedby='$orderplaced', requiredby='$daterequired', status=$status', staffmember='$staffmember', paid='paid', delivery='$delivery', ordercontent='$ordercontent' WHERE order='$orderid'";

if(mysql_query($query)){
 echo "updated";}
 else{
 echo "fail";}

?> 
```

这些值正在从另一个页面发布或“获取”。他们肯定会通过，否则会出现错误。目前，它只是根据代码提出“失败”。

我尝试了在互联网上找到的许多代码变体，以检查我的编码是否正确，但我仍然无法让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:46:06.040

我想知道你是否尝试过 print_r 你的 $query 来检查。

第一个。将您的连接字符串移到最顶部。

第二。`status=$status'`<<=== 少 1 个报价

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:45:45.353

我以为您必须先连接到数据库才能使用`mysql_real_escape_string()`？尝试连接所有其他代码。

查询的状态部分也缺少引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:45:37.010

您的错误是因为没有`status`正确处理您的更新：`status=$status'`必须是`status='$status'`.

如果您`mysql_error()`在“失败”部分中添加一个，您就会想到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T09:47:12.723

尝试通过添加逗号进行更改

`status=$status'`至`status='$status'`

并且仅供参考`paid='paid'`，`paid='$paid'`以确保传递正确的值

# codeigniter - Codeigniter：单击链接，然后从选中的复选框中获取值以传递给控制器

> ID：12297276
> 
> 赞同：-2
> 
> 时间：2012-09-06T09:43:59.583
> 
> 标签：codeigniter, checkbox, php

我有三个菜单（添加、编辑、删除）和许多带有复选框的项目。我检查了一些复选框，然后当我单击删除时，我想删除所有选中的项目。我只是不知道如何检测使用 codeigniter 检查了哪些复选框。有人有想法么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:00:56.827

您可以使用 Jquery 来获取当前选定的项目，如下所示：

```
 var values = $('input:checkbox:checked.class_you_like').map(function () 
 {
     return this.value;
 }).get(); 
```

在此之后，您可以使用 ajax 将值发布到 CI：

```
 $.ajax(
 {
         type: 'post',
         url: '/dummy/delete',
         data:{ids: values}
 }); 
```

然后在 CI/PHP

```
function delete()
{
   $ids = $this->input->post('ids');

   // !this should be done in a model
   $this->db->where_in('id_column', $ids);
   $this->db->delete('your_table');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:06:20.503

将所有复选框元素放入表单中，然后将 DELETE 作为提交按钮，然后在您的控制器中

```
public function delete()
{
    $for_delete = $this->input->post('checkbox');//Hope that your all checkbox names are array of checkbox[];
    $for_delete = implode(',',$for_delete);
    $this->model_to_delete->delete($for_delete);
} 
```

在您的模型中删除其 id 存在于 for_delete array() 中的所有记录

# jquery - 获取（超级）简单的 jQuery 数组，从 1 而不是 0 开始

> ID：12297281
> 
> 赞同：0
> 
> 时间：2012-09-06T09:44:28.563
> 
> 标签：jquery, arrays

所以

```
$(".section").attr("name", function (arr) {
      return "section" + arr;
}) 
```

显然给

```
<div class="section" name="section0"></div>
<div class="section" name="section1"></div>
<div class="section" name="section2"></div> 
```

如何使部分从 1 开始？

干杯!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:46:13.850

```
$(".section").attr("name", function (arr) {
      return "section" + (arr+1);
}) 
```

# powershell - 在powershell中，如何使用Rename-Item同时输出新旧文件名？

> ID：12297284
> 
> 赞同：9
> 
> 时间：2012-09-06T09:44:33.917
> 
> 标签：powershell, get-childitem, rename-item-cmdlet

我想使用`Get-ChildItem`管道选择一个文件列表，`Rename-Item`并让输出显示文本，每行显示类似“将旧文件名重命名*为新*文件*名*”的内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T15:17:44.750

```
Get-Childitem C:\Temp |
    Foreach-object {
        $OldName = $_.name; 
        $NewName = $_.name -replace 'temp','test'; 
        Rename-Item -Newname $NewName; 
        Write-Output $("Renamed {0} to {1}" -f $OldName,$NewName)
        } 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-06T09:52:35.310

一种简单的解决方案是`rename-item`使用`-WhatIf`. 这将显示类似

```
PS H:\test> gci | rename-item -newname { $_.name -replace 'temp','test' } -WhatIf
What if: Performing operation "Rename File" on Target "Item: H:\test\temp1 Destination: H:\test\test1". 
```

足够好，或者你需要它在做手术的同时做吗？

**编辑**：一个更简单的解决方案，使用`-Verbose`. 与 相同`-WhatIf`，但也执行操作:)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-06T10:05:34.743

你可以这样做：

```
gci . | %{ rename-item -Path $_.fullname -NewName ($_.name + 1); Write-Host "Renamed $($_.fullname) to $($_.name + 1)"} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-22T15:07:17.730

我知道这有点老了，但我确实对所有这些都有问题。这将遍历所有文件并重命名它们，即使名称没有改变！这是不必要的开销。

我添加了更多选项。

```
 Get-ChildItem -Filter *.txt -Recurse -Path "C:\temp" | 
    Foreach-object {

        $OldName = $_.name; 
        $NewName = $_.name -replace 'temp','test'; 

        If ( $OldName -ne $NewName ){
            Rename-Item -Path $_.PSPath -Newname $NewName; 
            Write-Output $("Renamed {0} to {1}" -f $OldName,$NewName);
            }
        } 
```

# python - python方法解析顺序和菱形继承

> ID：12297292
> 
> 赞同：1
> 
> 时间：2012-09-06T09:44:53.130
> 
> 标签：python

这是我在 python 代码中的示例模型

```
class BasicActivity:
    def run(self):
        print "basic run"

    def jump(self):
        print "basic jump"

class ChickenStyleActivity(BasicActivity):
    def run(self):
        print "run like chicken"

class BunnyStyleActivity(BasicActivity):
    def jump(self):
        print "jump like bunny"

class ExtraordinaryActivity(ChickenStyleActivity,BunnyStyleActivity):
    pass

d = ExtraordinaryActivity()
d.run()
d.jump() 
```

我期待在一个班级中同时拥有鸡肉和兔子风格，但令我惊讶的是，它是小鸡跑，但基本跳跃。我开始阅读有关方法解析顺序的内容，现在我可以看到在多重继承中更改类的顺序会带来相反的效果。

问题是 - 我怎样才能在一个班级中同时拥有鸡肉和兔子风格？

更一般地说：当方法覆盖发挥作用时，如何正确继承具有共同基类的几个类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:47:50.670

我认为您使用的是 Python 2.x，而不是 Python 3.x。

因此 BasicActivity 需要继承自`object`：

```
class BasicActivity(object):
    pass 
```

Alex Martelli 在这里描述它： [Method Resolution Order (MRO) in new style Python classes](https://stackoverflow.com/questions/1848474/method-resolution-order-mro-in-new-style-python-classes/1848647#1848647)

在 Python 3 中，所有类都继承自`object`

# javascript - 通过phonegap中的电子邮件发送存储在html5 localStorage中的信息

> ID：12297294
> 
> 赞同：0
> 
> 时间：2012-09-06T09:45:10.957
> 
> 标签：javascript, jquery, html, cordova, phonegap-plugins

有谁知道我可以获取存储在 html5 localStorage 中的信息以使用 phonegap 的电子邮件编写器插件或任何其他方式填充到电子邮件中的方法？

总体情况是，我正在使用 phonegap 编写一个 ios 应用程序，并且我有一些信息存储在 localStorage 中，这些信息来自一个简单的表单。我需要从 ios 设备上获取这些信息，我想到的最简单的方法是尝试通过电子邮件发送这些信息。

至于我可以说用phonegap发送电子邮件最简单的方法是通过一个名为电子邮件编写器的插件，这一切都是让你创建一个按钮或链接，它将激活ios的内置发送电子邮件功能，当你发送返回给你到应用程序，而无需在任何时候退出。

我很高兴使用 html5、javascript、jquery 和 css。

非常感谢任何建议或帮助。

谢谢

凯夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:33:31.693

Emailcomposer 有一个函数声明：

```
EmailComposer.prototype.showEmailComposer = 
function(subject,body,toRecipients,ccRecipients,bccRecipients,bIsHTML) 
```

因此，我假设（不确定，因为我在没有预先撰写邮件的情况下使用它）通过使用这些参数调用该函数，您应该能够使用您的 localStorage 内容预先撰写电子邮件。

.

# java - 如何从堆转储中计算对象大小？

> ID：12297299
> 
> 赞同：4
> 
> 时间：2012-09-06T09:45:31.123
> 
> 标签：java, memory-management, heap-memory

我有一个通过 Jmap 获取的对象堆转储。我还通过 Jhat 看到了转储。我需要计算对象的大小。我该怎么做？

在转储中，我可以看到例如：

```
Class Name,                    total objects,          total size
com.test.app.CallRecord ,             2194       ,            446324 
```

所以如果我计算 446324/2194 = 203。所以 203 字节是 1 个 CallRecord 对象的大小。是这样吗？我在这里有一个困惑。这个尺寸是多少？它是否也包括参考的大小？

我很困惑。有人要求我让他们知道 CallRecord 对象的大小。我应该告诉他们 203 个字节吗？我不知道它是否正确。

203 字节是否包括引用的大小也属于 CallRecord 对象？

如何计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:12:07.853

我建议您使用某种内存分析工具（分析器）。YourKit 非常适合，但价格昂贵，Eclipse MAT 也不错，而且它是免费的。VisualVM 非常简单，但它也足够好而且免费......（我经常最终使用它们，因为它们都有一些其他缺乏的东西......）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T10:23:38.500

这取决于总尺寸是**浅**尺寸还是**保留**尺寸。

1.  **浅尺寸**

    对象的浅大小是用于存储对象本身的内存量。不考虑引用的对象。

2.  **保留尺寸**

    对象的保留大小是垃圾收集器收集对象时可以释放的内存量。

# vb.net - 如何使用 vb.net 访问电池（笔记本电脑）信息？

> ID：12297301
> 
> 赞同：3
> 
> 时间：2012-09-06T09:45:34.767
> 
> 标签：vb.net, visual-studio-2010, visual-studio, operating-system, system

如何使用 vb.net 访问电池（笔记本电脑）信息？我想获取有关电池的制造详细信息和完整详细信息：

*   电池设备名称
*   电池估计时间
*   电池粒度信息
*   电池信息
*   电池制造日期
*   电池制造商名称
*   电池序列号
*   电池温度
*   电池唯一ID

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T12:05:58.083

您可以从`Win32_Battery`课堂上获得所有这些 - [http://msdn.microsoft.com/en-us/library/windows/desktop/aa394074(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394074(v=vs.85).aspx)

```
class Win32_Battery : CIM_Battery
{
  uint16   Availability;
  uint32   BatteryRechargeTime;
  uint16   BatteryStatus;
  string   Caption;
  uint16   Chemistry;
  uint32   ConfigManagerErrorCode;
  boolean  ConfigManagerUserConfig;
  string   CreationClassName;
  string   Description;
  uint32   DesignCapacity;
  uint64   DesignVoltage;
  string   DeviceID;
  boolean  ErrorCleared;
  string   ErrorDescription;
  uint16   EstimatedChargeRemaining;
  uint32   EstimatedRunTime;
  uint32   ExpectedBatteryLife;
  uint32   ExpectedLife;
  uint32   FullChargeCapacity;
  datetime InstallDate;
  uint32   LastErrorCode;
  uint32   MaxRechargeTime;
  string   Name;
  string   PNPDeviceID;
  uint16   PowerManagementCapabilities[];
  boolean  PowerManagementSupported;
  string   SmartBatteryVersion;
  string   Status;
  uint16   StatusInfo;
  string   SystemCreationClassName;
  string   SystemName;
  uint32   TimeOnBattery;
  uint32   TimeToFullCharge;
}; 
```

Win32_Battery 属性：http: [//include.wutils.com/wmi/ROOT%5Ccimv2/CIM_ManagedSystemElement/CIM_LogicalElement/CIM_LogicalDevice/CIM_Battery/Win32_Battery.html](http://include.wutils.com/wmi/ROOT%5Ccimv2/CIM_ManagedSystemElement/CIM_LogicalElement/CIM_LogicalDevice/CIM_Battery/Win32_Battery.html)

电池序列号

```
 Dim results As String = ""
        Dim batteryReturn As Management.ManagementObjectCollection
        Dim batterySearch As Management.ManagementObjectSearcher
        batterySearch = New Management.ManagementObjectSearcher("root\cimv2", "Select * from Win32_Battery")
        batteryReturn = batterySearch.Get

        For Each baseobject In batteryReturn
            results += baseobject("DeviceID")
        Next

        Messagebox.show(results, "Battery serial:") 
```

示例代码从这里[http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.powerstatus.aspx#Y0](http://msdn.microsoft.com/en-us/library/system.windows.forms.systeminformation.powerstatus.aspx#Y0)

```
Imports Microsoft.VisualBasic
Imports System
Imports System.Collections
Imports System.ComponentModel
Imports System.Drawing
Imports System.Reflection
Imports System.Windows.Forms

Public Class SystemInfoBrowserForm
    Inherits System.Windows.Forms.Form

    Private listBox1 As System.Windows.Forms.ListBox
    Private textBox1 As System.Windows.Forms.TextBox  

    Public Sub New()
        Me.SuspendLayout()
        InitForm()

        ' Add each property of the SystemInformation class to the list box. 
        Dim t As Type = GetType(System.Windows.Forms.SystemInformation)
        Dim pi As PropertyInfo() = t.GetProperties()
        Dim i As Integer 
        For i = 0 To pi.Length - 1
            listBox1.Items.Add(pi(i).Name)
        Next i
        textBox1.Text = "The SystemInformation class has " + pi.Length.ToString() + " properties." + ControlChars.CrLf

        ' Configure the list item selected handler for the list box to invoke a  
        ' method that displays the value of each property. 
        AddHandler listBox1.SelectedIndexChanged, AddressOf listBox1_SelectedIndexChanged

        Me.ResumeLayout(False)
    End Sub     

    Private Sub listBox1_SelectedIndexChanged(sender As Object, e As EventArgs)
        ' Return if no list item is selected. 
        If listBox1.SelectedIndex = - 1 Then 
            Return 
        End If          
        ' Get the property name from the list item. 
        Dim propname As String = listBox1.Text

        If propname = "PowerStatus" Then 
            ' Cycle and display the values of each property of the PowerStatus property.
            textBox1.Text += ControlChars.CrLf + "The value of the PowerStatus property is:" 
            Dim t As Type = GetType(System.Windows.Forms.PowerStatus)
            Dim pi As PropertyInfo() = t.GetProperties()
            Dim i As Integer 
            For i = 0 To pi.Length - 1
                Dim propval As Object = pi(i).GetValue(SystemInformation.PowerStatus, Nothing)
                textBox1.Text += ControlChars.CrLf + "    PowerStatus." + pi(i).Name + " is: " + propval.ToString()
            Next i
        Else 
            ' Display the value of the selected property of the SystemInformation type. 
            Dim t As Type = GetType(System.Windows.Forms.SystemInformation)
            Dim pi As PropertyInfo() = t.GetProperties()
            Dim prop As PropertyInfo = Nothing 
            Dim i As Integer 
            For i = 0 To pi.Length - 1
                If pi(i).Name = propname Then
                    prop = pi(i)
                    Exit For 
                End If 
            Next i
            Dim propval As Object = prop.GetValue(Nothing, Nothing)
            textBox1.Text += ControlChars.CrLf + "The value of the " + propname + " property is: " + propval.ToString()
        End If 
    End Sub     

    Private Sub InitForm()
        ' Initialize the form settings 
        Me.listBox1 = New System.Windows.Forms.ListBox()
        Me.textBox1 = New System.Windows.Forms.TextBox()
        Me.listBox1.Anchor = CType(System.Windows.Forms.AnchorStyles.Top Or System.Windows.Forms.AnchorStyles.Bottom Or System.Windows.Forms.AnchorStyles.Left Or System.Windows.Forms.AnchorStyles.Right, System.Windows.Forms.AnchorStyles)
        Me.listBox1.Location = New System.Drawing.Point(8, 16)
        Me.listBox1.Size = New System.Drawing.Size(172, 496)
        Me.listBox1.TabIndex = 0
        Me.textBox1.Anchor = CType(System.Windows.Forms.AnchorStyles.Top Or System.Windows.Forms.AnchorStyles.Bottom Or System.Windows.Forms.AnchorStyles.Right, System.Windows.Forms.AnchorStyles)
        Me.textBox1.Location = New System.Drawing.Point(188, 16)
        Me.textBox1.Multiline = True 
        Me.textBox1.ScrollBars = System.Windows.Forms.ScrollBars.Vertical
        Me.textBox1.Size = New System.Drawing.Size(420, 496)
        Me.textBox1.TabIndex = 1
        Me.ClientSize = New System.Drawing.Size(616, 525)
        Me.Controls.Add(Me.textBox1)
        Me.Controls.Add(Me.listBox1)
        Me.Text = "Select a SystemInformation property to get the value of" 
    End Sub

    <STAThread()>  _
    Shared Sub Main()
        Application.Run(New SystemInfoBrowserForm())
    End Sub 

End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:06:29.547

就像在 c# 中一样（如果你用谷歌搜索解决方案，不要搜索 vb，搜索 .net 甚至 c#）。见[https://stackoverflow.com/a/8946096](https://stackoverflow.com/a/8946096)

（我会使用[http://msdn.microsoft.com/en-us/library/system.windows.forms.powerstatus.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.powerstatus.aspx) - 如果只有电源状态是相关的）

# opencv - 照片或设计识别

> ID：12297305
> 
> 赞同：0
> 
> 时间：2012-09-06T09:45:41.710
> 
> 标签：opencv, artificial-intelligence, detection, image, aforge

我需要一个简单的算法能够区分设计/设计的图片/漫画和照片。

你能推荐一个吗？

你知道阿福格吗？

我认为它可以代表一个解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T13:26:26.060

如果您提供了这两种情况的典型示例，则识别可能的区别特征会容易得多。所有可能的图片和图纸的空间是一个艰难的案例。

这是我可能会尝试的一种方法（尽管我不确定它是否简单）：

A. 收集两个类的训练图像群体（每个约 30 个）：

1.  设计/漫画
2.  图片

B. 尝试运行边缘检测

[http://www.aforgenet.com/framework/features/edge_detectors_filters.html](http://www.aforgenet.com/framework/features/edge_detectors_filters.html)

在两个训练集上，根据强度查看结果像素的数量。我希望图片的边缘通常比设计的图像更柔和。如果您要将边缘像素强度绘制为直方图并查看图纸/照片之间的差异，那么也许您也可以将其表示为分布（高斯？）。

C. 当您想测试新图像时，您对其运行边缘检测并将其统计信息与您从训练数据中确定的分布进行比较。

我可能会尝试消除其他一些品质来区分图纸和照片。例如，我希望照片会比图画有更多的噪点。要使用它，请对两组训练图像的噪声进行建模，并比较新图像的统计数据（如上面的步骤 C 所示）。请参阅[图像中的噪声估计/噪声测量](https://stackoverflow.com/questions/2440504/noise-estimation-noise-measurement-in-image)。

# android - 选项卡内具有 CanGoBack 功能的当前 webview

> ID：12297309
> 
> 赞同：3
> 
> 时间：2012-09-06T09:45:49.167
> 
> 标签：android, android-webview, android-tabhost

我正在使用动态 tabhost 创建应用程序，每个选项卡都有使用以下教程的动态 webview，

[http://www.pocketmagic.net/?p=1132](http://www.pocketmagic.net/?p=1132)

以上是作为自定义控件创建的（无法发布源代码）。我用主要活动扩展了这个控制。在 keydown 事件中，我检查了 webview 是否可以返回。如果可以，那么它应该在当前 webview 中加载以前的 url。但这是`working if i have worked in the same tab`. 如果我移动了两页并转移到第二个选项卡，然后是第一个选项卡，现在按`back button Application exists`。你能告诉我吗`how to get the current webview to go back`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:57:52.577

我已经解决了这个问题:-)

**解决方案：**

```
1\. Created One class named MyWebView that should extends WebView. 
2\. Created 4 MyWebView instances from User Side.
3\. That MyWebView should have one WebView locally and it should not be static( here i did a mistake).
4\. Override the Layout of WebView inside the MyWebView class with Progressbar and WebView inside the FrameLayout.
5\. For every tab creation we have to set the Content as instance of MyWebView.
6\. Now handle as follows, 
```

**用户类.java**

```
@Override

public boolean onKeyDown(int keyCode, KeyEvent event)         
{           
    if(event.getAction() == KeyEvent.ACTION_DOWN)              
    {    
               switch(keyCode)    
               {    
                 case KeyEvent.KEYCODE_BACK:    
                   if(webView1!=null)    
                   {    
                       currentWebView= webView1.getWebView();    
                       if(currentWebView!=null && currentWebView.canGoBack() == true)    
                       {    
                    currentWebView.goBack();
                   }    
                       else    
                       //Show Alert to Quit the Application  
                }
                        else    
                       //Show Alert to Quit the Application      
                   return true;    
               }
         }
} 
```

**MyWebView.java**：

```
public WebView getWebView() 
{       
    return webview;
} 
```

这对我有用...

# jquery - JQuery从表内的链接中删除表行

> ID：12297311
> 
> 赞同：2
> 
> 时间：2012-09-06T09:45:55.817
> 
> 标签：jquery, jquery-selectors

我无法从行内的链接中选择表格的一行。单击链接时，我需要该行消失。我当前的代码如下...

```
function show_docs(){
$('.file_holder5').html("");
var id=$('.useri').val();
var data="user_id="+id;
$.ajax({
    type:"POST",
    url:"admin_includes/get_all_files.php",
    data:data,
    success:function(html){

        var split_html=html.split("*^*");
        var split_ht_count=split_html.length-1;
        var tb2="<table class='doc_table' width='100%'>";
        tb2+="<tr><th>Upload Date</th><th>File</th><th>Description</th><th>Actions</th><th>&nbsp;</th></tr>";
        var el;
        if(split_ht_count==0)
        {
            tb2+="</table>";
            tb2+="<p>There are currently no files in your library.</p>";
        }
        else
        {
        for(var rx=0;rx<split_ht_count;rx++)
        {
            el=split_html[rx].split("|");
            tb2+="<tr class='file_row' data-link2='"+el[0]+"'><td>"+el[2]+"</td><td>"+el[1]+"</td><td>"+el[3]+"</td><td><a class='view_f' href='sym.php?doc_id="+el[0]+"'>View File</a></td><td><a class='del_f' href='javascript:void(0)' data-link='"+el[0]+"'>Delete File</a></td></tr>";

        }
        tb2+="</table>";
        }//end else
        $(tb2).appendTo('.file_holder5');
        StripeRows();
    }
});//end ajax
}
//-----------------delete_files---------------------
$(document).on('click', '.del_f', function(){
var file_id=$(this).data('link');
var data="file_id="+file_id+"&user="+$('.useri').val();

$.ajax({
    type:"POST",
    url:"admin_includes/delete_filex.php",
    data:data,
    context:this,
    success:function(html){
        if(html=="1")
        {
            alert("The selected file is needed for a current job. To delete this file, delete the file from the current appointment in the Current Jobs page.");
            return;
        }
        else
        {
            //get rid of listing
            $('tr.file_row').data('link2', file_id).remove();
        }
    }
});//end ajax
 }); 
```

显然，这是我选择当前行的方法导致我出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:50:39.367

当您尝试删除该行时，请尝试以下代码：

```
$(this).closest("tr").remove(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:52:49.017

见[jsFiddle](http://jsfiddle.net/rFfs5/)

```
$('.deleteRowButton').click(function () {
     $(this).parents('tr').first().remove();
}); 
```

# actionscript-3 - Facebook.init() 不起作用，我没有看到任何错误。

> ID：12297313
> 
> 赞同：0
> 
> 时间：2012-09-06T09:45:58.113
> 
> 标签：actionscript-3, flash, facebook-graph-api

我正在创建一个 Flash 应用程序并下载了 GraphAPI_web_1.8.1.swc。我正在使用 adobe flash professional cs6 并使用 as3 创建了一个项目。我有一个登录按钮，当我单击它时，它应该通过我的应用程序将我连接到 Facebook。它不起作用，我在编译器窗口上看不到任何错误。但是我跟踪了每一步，我发现初始化和登录功能不起作用。我尝试使用 Facebook 桌面而不是 Facebook 网络，我使用的是 air 但不是使用 flash 专业版。我决定这是我的代码。

```
package  {

import flash.display.MovieClip;
import flash.events.MouseEvent;
import com.facebook.graph.Facebook;

public class Main extends MovieClip {

    private var APP_ID:String = "466097573423642";  
    public var permissions:Array = ["user_birthday","read_stream","publish_stream","email"];

    public function Main() {
        // constructor code
        loginout.addEventListener(MouseEvent.CLICK, _login);
        Facebook.init(APP_ID, loginHandler);
    }

    private function _login(e:MouseEvent):void
    {

        Facebook.login(loginHandler, permissions);
        trace("clicked");
    }

    protected function loginHandler(success:Object, fail:Object):void
    {
        trace("Hey");
        if(success) {
            trace("Login successful!");
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:22:39.680

我不确定，但也尝试导入：

```
import com.facebook.graph.net.FacebookRequest;
import com.facebook.graph.utils.FacebookDataUtils;
import com.facebook.graph.controls.Distractor; 
```

# java - JSch 一次执行多个 linux 命令

> ID：12297319
> 
> 赞同：1
> 
> 时间：2012-09-06T09:46:08.160
> 
> 标签：java, linux, jsch

我的目标是使用 java 应用程序连接到我的 linux 服务器并执行 linux 命令。我已经使用 JSch API 实现了这一点，但我似乎无法弄清楚如何一次执行多个命令。

这对我来说是个问题，因为我需要导航到某个目录，然后从该目录执行另一个命令。我的应用程序在第二个命令可以在正确的目录中执行之前退出。

这是我将一个 linux 命令作为字符串作为参数传递并打印任何输出的方法。

```
public void connect(String command1){

try {
        JSch jsch = new JSch();

        Session session = jsch.getSession(user, host, port);
        session.setPassword(password);
        session.setConfig("StrictHostKeyChecking", "no");
        session.connect();
        System.out.println("Connected");

        Channel channel = session.openChannel("exec");
        ((ChannelExec)channel).setCommand(command1);
        channel.setInputStream(null);
        ((ChannelExec)channel).setErrStream(System.err);

        InputStream in = channel.getInputStream();
        channel.connect();
        byte[] tmp = new byte[1024];
        while(true){
            while(in.available()>0){
            int i=in.read(tmp, 0, 1024);
            if(i<0)break;
            System.out.print(new String(tmp, 0, i));
          }
          if(channel.isClosed()){
            System.out.println("exit-status: "+channel.getExitStatus());
            break;
          }
          try {
              Thread.sleep(1000);
          }
          catch(Exception ee){
              ee.printStackTrace();
          }
        }

        channel.disconnect();
        session.disconnect();
        System.out.println("DONE");

  }
catch(Exception e){
        e.printStackTrace();
    }

} 
```

任何想法如何一次执行 2 个命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:48:27.040

如果在远程机器上启动了一个普通的 shell，使用`;`or`&&`构造来做更多的事情。

如在

```
cd /home/foo/banana ; do_things 
```

或者

```
cd /home/foo/banan && do_things #do_things will only be run if the cd command is successfull 
```

# php - 不能在 PHP 类上使用 public 修饰符

> ID：12297320
> 
> 赞同：1
> 
> 时间：2012-09-06T09:46:11.777
> 
> 标签：php, oop, access-modifiers

我在 Java 方面有很强的基础，当谈到 PHP 时，我遇到了 OOP 的一些问题。

请看下面这两个类：

**联系人.php**

```
<?php 

    public class Contacts {

    }
?> 
```

**单元测试.php**

```
<?php

    require_once 'PHPUnit/Framework.php';
    include 'Contacts.php';

    class UnitTest extends PHPUnit_Framework_TestCase {

        public function testRead() {
            $temp = new Contacts();
        }
    }
?> 
```

当我尝试测试`UnitTest.php`使用时，`phpunit`我收到此错误消息：

```
PHP Parse error:  syntax error, unexpected T_PUBLIC in
    /home/crazenezz/Projects/PHP/Demo/Class/Contacts.php on line 3 
```

经过反复试验，我删除了class 的`public`修饰符，`Contacts`测试成功，没有错误。

**Contacts.php** *(去掉`public`修饰符后)*

```
<?php 

    class Contacts {

    }
?> 
```

**谁能解释为什么在 PHP 中我不能使用`public`a 的 as 修饰符`class`？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:48:36.853

因为所有类在 PHP 中都是公共的。没有所谓的“私人课程”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T04:40:42.697

在 PHP 中，您只能在变量和函数前面使用 public 修饰符。在 Java 中，您可以在类、构造函数、方法、变量或接口前面使用 public 修饰符。为什么？因为语言不同。如果您需要注释来提醒自己，我在这里写了一些东西来解释 PHP 修饰符和 Java 修饰符之间的区别，因为我在 PHP 之前也学习了 Java。[http://www.siteconsortium.com/h/D0000G.php](http://www.siteconsortium.com/h/D0000G.php)

# mysql - 如何从相互引用的两个表中删除外键约束？

> ID：12297322
> 
> 赞同：2
> 
> 时间：2012-09-06T09:46:13.780
> 
> 标签：mysql, foreign-keys

我有两个相互引用的表 A 和 B。A 被 B 引用，反之亦然。我无法从这两个表中添加或删除任何数据。我也不能从这些表中删除外键约束。请帮忙。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:52:30.583

```
SET FOREIGN_KEY_CHECKS = 0; 
```

然后随心所欲地改变你的桌子，然后做

```
SET FOREIGN_KEY_CHECKS = 1; 
```

# php - PHP MySQL从2个表中获取数据

> ID：12297324
> 
> 赞同：3
> 
> 时间：2012-09-06T09:46:22.073
> 
> 标签：php, mysql

我正在尝试从我的数据库中合并 2 个表：

文件表：

```
 id
    file_name
    file_description
    file_url 
```

access_files 表：

```
 id
    student_id
    file_id 
```

这是我的 sql 代码，当前从 files 表中获取所有文件，它不显示用户选择的文件。

```
<?php
    $SQL = "SELECT * FROM files, access_files WHERE student_id ='$studentid'";
    $result = mysql_query($SQL);

    while ($db_field = mysql_fetch_assoc($result)) {
?>                          

<div class="accordion-group">
<div class="accordion-heading">
    <a href="#<?php print $db_field['file_id']; ?>" data-parent="#accordion" data-toggle="collapse" class="accordion-toggle collapsed">
    <?php print $db_field['file_name']; ?>
    </a>
</div>
<div class="accordion-body collapse in" id="<?php print $db_field['file_id']; ?>">
    <div class="accordion-inner">
    <?php print $db_field['file_description']; ?><br/><br/>
    <a href="?download=<?php print $db_field['file_url']; ?>" class="more">Download File Now!</a>
    <br/><br/>
    </div>
</div>
</div>
<?php } ?> 
```

该代码假定仅显示与用户关联的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T09:49:36.567

您需要做的是加入表格。

**最常见的 JOIN 类型：**

1.  INNER JOIN - 用于匹配可以匹配 ON () 语句的数据。如果 ON() 不匹配，则结果将被排除。
2.  LEFT JOIN - 如果您在 ON() 中匹配的数据不必存在，则使用该数据。它只是将数据附加到原始 FROM，如果没有匹配的数据，则用 NULL 填充列。

**例子**

```
SELECT
 ft.id,
 ft.file_name,
 ft.file_description,
 ft.file_url,
 af.id as access_id,
 af.student_id,
 af.file_id
FROM
 files ft
 INNER JOIN access_files af ON ( ft.id = af.file_id )
WHERE
 fa.student_id = '$studentid' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:49:58.380

您正在使用您的查询进行经典的笛卡尔连接：

```
SELECT * FROM files, access_files WHERE student_id ='$studentid' 
```

您需要指定两个表的连接方式：

```
SELECT * FROM files a, access_files b WHERE a.student_id ='$studentid' and b.studentID=a.student_id 
```

如果您没有指定链接 - 或者没有，数据库将尝试将第一个表中的每一行与第二个表中的每一行链接起来。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T09:49:28.677

加入您的餐桌。

```
SELECT table1.*, table2.*
FROM table1
LEFT JOIN table1.pk = table2.fk
WHERE table1.pk = 1; 
```

# html - 将具有图像的 RTF 文件转换为 HTML

> ID：12297325
> 
> 赞同：2
> 
> 时间：2012-09-06T09:46:23.803
> 
> 标签：html, vb.net, rtf, windows-applications

我正在使用 Windows 应用程序来开发我的项目。有一种情况，我需要将 RTF 文件转换为 HTML 并打印出来。在包含图像的 RTF 文件中。简单来说，我可以将 RTF 转换为 HTML。但图像无法转换。它不在 HTML 文件中。

那么任何人都可以给出一些关于我如何将包括图像在内的 RTF 文件数据转换为 HTML 文件的想法？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T23:41:31.787

在 HTML 中，您可以将图像嵌入为 Base64 编码。请参见[此处](https://stackoverflow.com/questions/9388264/jeditorpane-with-inline-image)，带有`data:`URL。我不知道如何将二进制字节轻松转换为 Base64 ASCII。

# mysql - 在 CodeIgniter 中使用现有的 MySQL 数据库

> ID：12297329
> 
> 赞同：1
> 
> 时间：2012-09-06T09:46:54.493
> 
> 标签：mysql, codeigniter, localization, multilingual

在我的 PHP 网站中，我使用[SiteTranslator](http://sourceforge.net/projects/sitetranslator/)脚本将网站翻译成 30 种语言。每个翻译都存储在自己的表中（text_en、text_de...），每个表有 3 列（textKey、textValue、lastUpdate）。

现在我想在我的 CodeIgniter 应用程序中使用该数据库。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:17:26.657

您可以按照建议使用多个数据库，您仍然需要设置您的应用程序语言文件

*{在用户指南中阅读更多内容}*

根据第一个 uri 段，您可以尝试这样的事情。

**添加路线**

```
$route['en|fr|gr/test'] = 'test'; 
```

第一段检查**en**或**fr**或其他任何东西。

然后**主控制器在初始化****测试**控制器并设置**db(object)** && **app(language)**文件之前捕获第一段

**www.site.com/en/test** => 加载英语语言文件（*application/language/english/mylanguage*）和 db

**www.site.com/fr/test** => 加载法语语言文件（*application/language/french/mylanguage*）和db ...等等

**主控制器**

```
class MY_Controller extends CI_Controller{

    protected $lang, $db;

    public function __construct(){
        parent::__construct();

        $this->set_language();
    }

    protected function set_language(){
        switch($this->uri->segment(1))
        {
            case 'en':
                $this->lang     = $this->lang->load('mylanguage', 'english');
                $this->db       = $this->load->database('en', TRUE); 
            break;

            case 'fr':
                $this->lang     = $this->lang->load('mylanguage', 'french');
                $this->db       = $this->load->database('fr', TRUE); 
            break;

            default:
                $this->lang     = $this->lang->load('mylanguage', 'english');
                $this->db       = $this->load->database('en', TRUE); 
            break;
        }
    }

} 
```

# java - 使用 Java 连接到 SOAP UI Mock Web Service

> ID：12297333
> 
> 赞同：0
> 
> 时间：2012-09-06T09:47:09.290
> 
> 标签：java, web-services, search, interface, soapui

我有一个在soapUI 4.5.1 中运行的模拟Web 服务，它查找人们的姓名和地址。我在 .txt 文件中有大量的姓名和地址数据集，我需要搜索并使用 Web 服务进行验证。

这个想法是对有效和无效的名称进行计数。

我创建了一个 Netbeans 项目来编写文件阅读器以读取文本文件，并且我需要连接到 Web 服务以执行批量搜索。

有谁知道一个很好的教程可以遵循？或提出解决问题的最佳方法的建议？我已经在互联网上查看了所有内容，但我不太确定我在寻找什么..

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:26:31.473

据我了解，您的要求：

“从文本文件中读取姓名和地址并将其发送到 Web 服务以进行验证”

1）如果您不想使用 Java EE 容器，请阅读以下内容：http: [//today.java.net/pub/a/today/2007/07/03/jax-ws-web-services-without-ee -containers.html](http://today.java.net/pub/a/today/2007/07/03/jax-ws-web-services-without-ee-containers.html) .... 此处提到[jax-ws-web-services-without-ee-containers](https://stackoverflow.com/questions/2235552/mock-web-service)

在您的情况下，唯一的区别是您将使用 SoapUI 与端点进行交互。

2) 如果您想使用 Java EE 容器，如果您有免费的企业下载，NetBeans 可以免费使用该容器。

我会怎么做；我将在服务器上运行 Web 服务。我将从 SoapUI 连接到 Web 服务。我将发送一个用户名/地址，Web 服务将返回一些内容，例如字符串“valid”或“invalid”。所以模拟代码在服务器上而不是在soapUI中。

由于您使用的是 NetBeans，因此您应该使用 NetBeans 创建一个 Web 服务；

[http://netbeans.org/kb/docs/websvc/intro-ws.html](http://netbeans.org/kb/docs/websvc/intro-ws.html)

开发基于 SOAP 的 Web 服务并使用 SoapUI 连接到它。Web 服务是您的 MOCK 代码所在的位置，使其成为 MOCK 服务，之后您可以将其替换为真实代码。

您可以将文件放在服务器上或将其作为属性文件作为应用程序的一部分。在这种情况下，请在服务器上创建一个 Web 服务，该服务将验证姓名/地址列表并向您发送有效和无效的计数。

**如果数据太大并且您想将其保存在机器上的本地文件中，那么您需要使用 [jax-ws clients appraoch](http://netbeans.org/kb/docs/websvc/client.html)。您将在课堂上读取数据文件，然后使用客户端一次将一个发送到 Web 服务并保持有效/无效计数。** ………………………………………………………………………………

# ios - 如何在 iOS 应用中设置应用内购买免费试用期

> ID：12297342
> 
> 赞同：52
> 
> 时间：2012-09-06T09:47:37.937
> 
> 标签：ios, in-app-purchase

在 Apple 的 AppStore 条款和条件中，您可能会找到以下与 App 内购买自动更新相关的声明：

> “某些付费应用内订阅可能会在向您的帐户收费之前提供免费试用期。”

它是如何工作的？我没有看到任何选项允许我在 iTunes Connect 中为我的自动更新 IAP 提供这样的免费试用期。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2020-03-16T14:01:16.460

适用于 2020.03.16

**8个步骤详细**

首先，您的产品应该获得批准。

**1**

[![0](../Images/0f7379f4f7d169e84ed99580b4296b8f.png)](https://i.stack.imgur.com/hMJqJ.png)

**2**

[![1](../Images/017dba4f5ac6e797e501f402562423b2.png)](https://i.stack.imgur.com/7Eyfv.png)

**3**

[![2](../Images/29cfc38e34e6e385d1c5ce288631d68e.png)](https://i.stack.imgur.com/UPB9P.png)

**4**

[![3](../Images/7b385bb9e671a03946aac6e6f60eb48e.png)](https://i.stack.imgur.com/KOVBF.png)

**5**

[![4](../Images/01b39f1bc79e1119d054a3d71646d04e.png)](https://i.stack.imgur.com/vCRwN.png)

**6**

[![5](../Images/8e65c112788527f2e05315062962ba0f.png)](https://i.stack.imgur.com/5TFQ4.png)

**7**

[![6](../Images/43119cf9b88f5a25bc0d2468872d0726.png)](https://i.stack.imgur.com/X0nQy.png)

**8**

[![7](../Images/35fbbaba4243d5950d82924857c920b0.png)](https://i.stack.imgur.com/78lSD.png)

**你得到了**

[![8](../Images/b4bf1319fd6618a19a8a8688f5e4c96f.png)](https://i.stack.imgur.com/5nwh6.png)

几个小时后，它工作

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2017-12-12T09:22:42.730

五年后 -​​ Apple 改变了您为用户提供免费试用的方式。来源：[https ://itunespartner.apple.com/en/apps/news/4406427](https://itunespartner.apple.com/en/apps/news/4406427)

从现在开始，它处于“介绍价格”之下，有关更多详细信息，请参见此处： [https ://help.apple.com/itunes-connect/developer/#/deve1d49254f](https://help.apple.com/itunes-connect/developer/#/deve1d49254f) [![选择设置介绍价](../Images/d4850ff6f2471f104f9c42f36ca19e5c.png)](https://i.stack.imgur.com/rz2AH.png)

2020 年 3 月更新：现在称为“创建介绍性优惠” [![更新为](../Images/6e416cd0336b58053fa518d0eb001079.png)](https://i.stack.imgur.com/9kvV0.png)

* * *

## 回答 #3

> 赞同：30
> 
> 时间：2019-03-27T15:45:42.973

截至**2019 年 10 月**，请遵循以下规定：

在 iTunes 中，选择我的应用 --> 功能 --> 应用内购买

1.  点击产品编号
2.  订阅价格
3.  创建介绍性优惠
4.  选择地区
5.  选择开始和结束日期。**如果是免费试用，请**选择今天的日期和无结束日期。
***   选择类型（试用）和试用期。**

 **在服务器端验证收据期间，您可以检查*is_trial_period*以确定它是否处于试用状态。

[https://developer.apple.com/documentation/storekit/in-app_purchase/implementing_introductory_offers_in_your_app](https://developer.apple.com/documentation/storekit/in-app_purchase/implementing_introductory_offers_in_your_app)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-01-11T13:35:48.123

登录 iTunesConnect 后...

*   选择管理您的应用程序。

![管理您的应用程序](../Images/e03254675f9b51c650792bc393f7bcb1.png)

*   选择您的应用。
*   选择管理应用内购买。

![管理应用内购买](../Images/54fde780d0a75227378f073fb8590714.png)

*   选择您要为其添加免费试用的订阅系列。
*   选择持续时间。

![持续时间](../Images/3c9cda11ebe35b76813d61479d36328d.png)

*   设置提供免费试用？是的。
*   选择免费试用期。

![在此处输入图像描述](../Images/711874af05747ada840dd2889c6fd357.png)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-04T08:18:06.010

在 iTunes 连接中

应用 > 管理应用内购买 > 基本订阅 > 1 个月 > 提供免费试用？**

# javascript - Javascript 验证 (gen_validatorv4.js) - 基于复选框结果

> ID：12297343
> 
> 赞同：1
> 
> 时间：2012-09-06T09:47:38.820
> 
> 标签：javascript, php, validation, dom-events

我创建了一个如下的订单表单，其中包含多个复选框来添加项目，现在我想只在用户单击相关复选框时对禁用项目进行验证，请帮助我更正以下代码。

```
<script language="JavaScript">
function check_box2(status)
{
status=!status;
document.orderform.item2.disabled = status;
document.orderform.qty2.disabled = status;
}
function check_box3(status)
{
status=!status; 
document.orderform.item3.disabled = status;
document.orderform.qty3.disabled = status;
}
function check_box4(status)
{
status=!status; 
document.orderform.item4.disabled = status;
document.orderform.qty4.disabled = status;
}
</script>

<script language="JavaScript" src="gen_validatorv4.js" type="text/javascript" ></script>

<body onload="check_box2(status); check_box3(status); check_box4(status);">
<form action="order.php" method="POST" name="orderform" id="orderform" onSubmit="return validation();">
<table>
<tr><td valign="top"> <p>Order Item 1 :</p> </td><td> <select id="item1" name="item1">
      <option value="0" selected="selected"><p> [Select] </p></option>
      <option value="1"> <p> Product 1 </p></option>
      <option value="2"> <p> Product 2 </p> </option>
      <option value="3"> <p> Product 3 </p> </option>
</select> </td>

<td valign="top"><p>Quantity :</p></td><td><input style="width:30px;" name="qty1" type="text"></td> </tr>

<tr><td valign="middle"><input type="checkbox" name="check2" onclick="check_box2(this.checked)" >Add Item 2 : </td><td> <select id="item2" name="item2">
      <option value="0" selected="selected"><p> [Select] </p></option>
      <option value="1"> <p> Product 1 </p></option>
      <option value="2"> <p> Product 2 </p> </option>
      <option value="3"> <p> Product 3 </p> </option>
</select> </td>

<td valign="top"><p>Quantity :</p></td><td><input style="width:30px;" name="qty2" type="text"></td> </tr>

<tr><td valign="middle"> <input type="checkbox" name="check3" onclick="check_box3(this.checked)" >Add Item 3 :  </td><td> <select id="item3">
      <option value="0" selected="selected"><p> [Select] </p></option>
      <option value="1"> <p> Product 1 </p></option>
      <option value="2"> <p> Product 2 </p> </option>
      <option value="3"> <p> Product 3 </p> </option>
</select> </td>

<td valign="top"><p>Quantity :</p></td><td><input style="width:30px;" name="qty3" type="text"></td> </tr>

<tr><td valign="middle"> <input type="checkbox" name="check4" onclick="check_box4(this.checked)" >Add Item 4 :  </td><td> <select id="item4">
      <option value="0" selected="selected"><p> [Select] </p></option>
      <option value="1"> <p> Product 1 </p></option>
      <option value="2"> <p> Product 2 </p> </option>
</select> </td>

<td valign="top"><p>Quantity :</p></td><td><input style="width:30px;" name="qty4" type="text"></td> </tr>

</table>

<div><input name="submit" type="submit" value="Send"> </div>
</form>

<script  type="text/javascript">
    var frmvalidator  = new Validator("orderform");
    frmvalidator.addValidation("item1","dontselect=0", "Please select an item");
    frmvalidator.addValidation("qty1","req","Please enter your quantity");

    if  (document.orderform.item2.checked==true)
    {
       frmvalidator.addValidation("item2","dontselect=0", "Please select an item2");
       frmvalidator.addValidation("qty2","req","Please enter your quantity");
    }
</script>

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:01:37.617

能够使用 gen_validatorv4.js 脚本中包含的 VWZ_IsChecked() 函数进行验证

```
frmvalidator.addValidation("item2","dontselect=0", "Please select an item2",
    "VWZ_IsChecked(document.forms['orderform'].elements['check2'],'check2')");

frmvalidator.addValidation("qty2","req","Please enter your quantity for item 2",
    "VWZ_IsChecked(document.forms['orderform'].elements['check2'],'check2')"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:50:49.657

您只需添加一些条件：

```
if(document.getElementById('checkbox123').checked == true) {
  // validate code here
} 
```

你也可以这样做：

```
if(document.orderform.checkbox123.checked == true) {
  // validate code here
} 
```

# sql - 将错误行发送到其他表

> ID：12297345
> 
> 赞同：2
> 
> 时间：2012-09-06T09:47:42.820
> 
> 标签：sql, sql-server, sql-server-2008, duplicate-removal

我有一个包含许多列的表，我必须在其中找到基于一列的重复项。

`customer_name`即如果我在那个`Customer_name`时候发现重复

1.  我必须从源表中删除所有重复。
2.  将所有这些行发送到具有相同结构的其他表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:55:46.450

我猜每一行都有一个唯一的 Id 主键。

这将插入到您的重复行表中：

```
Insert into duplicateRowsTable
select * from myTable t1
where (select count(*) from myTable t2 where t1.customerId = t2.customerId) > 1 
```

您从 duplicateRowsTable 中删除好的行：

```
delete from duplicatesTable
where --this is not the faulty row for each customerId 
```

最后你从你的第一个表中删除：

```
delete from myTable
where id IN (select id from duplicatesTable) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T10:01:00.273

如果你有两个这样的表：

```
CREATE TABLE t1 (ID int, customerName varchar(64))
CREATE TABLE t2 (ID int, customerName varchar(64)) 
```

你可以做这样的事情：（ID列只是为了决定要保留什么，你可以根据需要更改它）

```
--First Copy

WITH CTE_T1
AS
(
SELECT
  ID,
  customerName,
  ROW_NUMBER() OVER(PARTITION BY customerName ORDER BY ID) as OrderOfCustomer
  FROM 
  t1
)
INSERT INTO t2
SELECT ID, customerName FROM cte_T1
WHERE OrderOfCustomer > 1;

--Then Delete

WITH CTE_T1
AS
(
SELECT
  ID,
  customerName,
  ROW_NUMBER() OVER(PARTITION BY customerName ORDER BY ID) as OrderOfCustomer
  FROM 
  t1
)
DELETE FROM CTE_T1
WHERE OrderOfCustomer > 1 
```

这是一个[SQLFiddle](http://www.sqlfiddle.com/#!3/4e9e3/13)来展示它是如何工作的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T10:09:18.923

试试这个：

用于移动重复项

```
INSERT Into DuplicatesTable
SELECT *
FROM 
(SELECT *, ROW_NUMBER() OVER(PARTITION BY Customer_name ORDER BY Customer_name) As RowID,
FROM SourceTable)  as temp
WHERE RowID > 1 
```

用于检测：

```
WITH TableCTE
AS
(
SELECT *,
ROW_NUMBER() OVER(PARTITION BY Customer_name ORDER BY Customer_name) AS RowID
FROM SourceTable
)
DELETE
FROM TableCTE
WHERE RowID> 1 
```

# javascript - 动态改变 Webkit 过滤器值

> ID：12297350
> 
> 赞同：4
> 
> 时间：2012-09-06T09:48:06.770
> 
> 标签：javascript, html, css

我正在努力改变

```
-webkit-filter: grayscale(30%); 
```

使用 HTML5 范围输入和 javascript 动态计算值。

我如何使用 javascript 访问 css webkit 过滤器属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:04:53.500

**Javascript：**

```
function changegrayscale(value) {
    document.getElementById("divID").setAttribute("style","-webkit-filter:grayscale(" + value + "%)")
}​ 
```

**HTML：**

```
<div id="divID" onclick="changegrayscale('30')">Clcik Me</div>​​ 
```

**CSS：**

```
#divID {
    -webkit-filter: grayscale(70%);
    background: red;
    width: 100px;
    height: 100px;
} 
```

[**演示**](http://jsfiddle.net/akhurshid/Ajrpq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:08:02.390

试试这个 -[**演示**](http://jsfiddle.net/Mpx4s/1/)

```
<input type="range" min="0" max="100" step="10" id="inp" />

<img src="http://lorempixel.com/300/200" id="img" />
<img src="http://lorempixel.com/300/200" />​

<script>
document.getElementById("inp").addEventListener("change", function() {
    document.getElementById("img").setAttribute("style", "-webkit-filter:grayscale(" + this.value + "%)");
}, false);​
</script> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T09:51:40.770

使用 jQuery，您可以在 '.elements' 上这样做：

```
function changegrayscale(value) {
  $('.elements').css({
    '-webkit-filter': 'grayscale('+value+'%)'
  });
} 
```

# java - 无法解析 GWT 导入 (gwt-maven-plugin)。

> ID：12297351
> 
> 赞同：3
> 
> 时间：2012-09-06T09:48:30.277
> 
> 标签：java, gwt, maven, import, annotations

我正在尝试使用[`gwt-maven-plugin`](http://mojo.codehaus.org/gwt-maven-plugin/). 我多次遇到以下问题：

```
Finding entry point classes
[ERROR] Errors in '.../core/impl/MyClass.java'
[ERROR] Line 23: The import org.codehaus.jackson.annotate.JsonIgnore cannot be resolved
[ERROR] Line 24: The import org.hibernate.envers cannot be resolved
[ERROR] Line 27: Audited cannot be resolved to a type
[ERROR] Line 102: JsonIgnore cannot be resolved to a type
[ERROR] Line 129: JsonIgnore cannot be resolved to a type 
```

问题仅在于注释。
核心项目是定义我的数据模型的项目。它用于服务器端和客户端 (gwt) 端。有什么办法让它工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:06:58.987

因为编译器抱怨的类不受 GWT 的 JRE 仿真的支持。您应该只在服务器端使用它们。有关详细信息，请参阅 [GWT JRE 仿真参考](https://developers.google.com/web-toolkit/doc/1.6/RefJreEmulation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:56:49.790

就像 Jamshid 所说，并非 JRE 中的每个类都被模拟到客户端。

例如，持久对象在客户端没有意义，因此不需要休眠。您必须使用等效的类对象序列化持久对象。

例如，如果您在服务器端有一个由 hibernate 检索的对象 User，您必须创建另一个可序列化对象，例如 UserDTO 并将其发送到 GWT。

您无法使您的代码在 GWT 应用程序的客户端和服务器端完全正常工作。

# solr - SOLR 查询以获取 solr 中的同义词列表

> ID：12297353
> 
> 赞同：1
> 
> 时间：2012-09-06T09:48:30.867
> 
> 标签：solr

我需要从 solr 中的 synonyms.tx 文件中获取同义词列表以进行自动建议。例如：同义词.txt

有趣，娱乐 => 娱乐。

如果我查询娱乐，它应该只给出同义词（而不是整个字段），例如：

娱乐 乐趣 娱乐

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-31T10:18:40.237

你可以添加一个新的同义词：recreation => entertainment, fun

# javascript - 为 jquery 选择器使用 javascript“this”

> ID：12297357
> 
> 赞同：1
> 
> 时间：2012-09-06T09:48:39.727
> 
> 标签：javascript, jquery

在此代码中，我们可以通过 2 种不同的方式获取元素 id 的值，并以两种方式返回结果

```
$("#my_div").on("click", function () {
    alert( $(this).attr("id") );

    alert( this.id );
}); 
```

但我感兴趣，第二种方式，在这种情况下是否合适？我问这个，因为在代码中我们使用 jquery 选择器，对于 jquery 选择器，写清楚的 javascript:**这**是合理的，它会一直工作吗？或者可能更好地使用 jquery **$(this)**作为 jquery 选择器？还是没有区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T09:51:00.190

`this.id`将为您提供内部 DOM 元素属性，同时`$(this).attr("id")`返回“id”属性的值。

jQuery 中的替代方法`this.id`是使用[`prop()`](http://api.jquery.com/prop/)method: `$(this).prop("id")`。但是，使用纯`this.id`构造会更容易和更快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:51:45.600

主 jQuery 构造函数可以接受许多不同类型的参数。

在这种情况下，`this`不是选择器，而是*HTMLElementNode*（jQuery 将其称为*element*）。

这完全没问题并且有[文档记录](http://api.jquery.com/jQuery/)。

如果您只是要获取其 ID，则无需花费资源将元素包装在 jQuery 对象中。浏览器之间没有任何兼容性问题。

获取 HTMLElementNode的`id`属性需要更少的代码，并且比将整个内容包装在 jQuery 中更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:51:25.153

是的，你的第二种方式是正确的。

```
$("#my_div").on("click", function () {
    // this is available within this function
    alert( this.id );
}); 
```

`this`指的`HTMLDOMElement`是函数内，并且将其包装`this`在内`$()`将为您提供一个 jQuery 对象。

如果您在`click`处理程序中定义另一个函数。前任：

```
$("#my_div").on("click", function () {
    // keep reference of this
    var that = this;
    function test() {
     // this will not available here directly
     // instead of that you can use reference
     alert(that.id);
    }
}); 
```

和`$(this).attr('id')`, `this.id`or`$(this).prop('id')`会给你同样的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T09:54:41.797

对于选择最好的方法并不总是很清楚。

在这种情况下，您需要`this.id`, 因为其他解决方案需要更多的幕后调用（显然调用`jQuery`and `attr`）。

如果您需要更多与浏览器不同的信息，您需要 jQuery 方式。

# zend-framework - zend 无法正常工作

> ID：12297358
> 
> 赞同：0
> 
> 时间：2012-09-06T09:48:46.697
> 
> 标签：zend-framework

我创建了一个 zend 项目。当我输入这个网址时：`http://localhost/test/public`

它给出了“控制器索引和脚本/动作名称索引的查看脚本”

但我不知道为什么。请帮我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:34:21.243

你期望什么作为输出？之所以如此，是因为它是执行的默认控制器/动作。[更改默认值](https://stackoverflow.com/questions/4230647/how-to-change-zend-framework-default-home-page)

# c - 按 C 顺序查找带元音的单词

> ID：12297360
> 
> 赞同：0
> 
> 时间：2012-09-06T09:49:01.693
> 
> 标签：c, string, fgets

所以对于大学的一个实验室......我一直面临挑战，使用 fopen、fgets 等在 usr/share/dict/linux.words 文件中查找所有单词，每个元音只按顺序排列一次。

即滑稽

到目前为止，我有以下代码......但它在某处有缺陷......

```
int all_vowels( char *s )
{ 
    const unsigned char *p = (const unsigned char *)s;

    char *v = malloc(sizeof(char *));
    char *vowel = v;

if(*p == '\0') return -1;

while( *p != '\0' )
{    
        if( *p == 'a' || *p =='e' || *p =='i'|| *p =='o' || *p =='u' )
        {
            *v = *p;
            v++;
        }
        p++;
    }

    if ( *vowel == 'a' && (*vowel + 1) == 'e' && (*vowel + 2) == 'i' && (*vowel + 3) ==     'o' && (*vowel + 4) == 'u' ) 
    { 
        return 1; 
    }

    return -1;
}

int main (int argc, char *argv[])
{    
    FILE *file;
    char line[BUFSIZ];

    if (( file = fopen("/usr/share/dict/words", "r") ) == NULL) 
    {
        fprintf(stderr, "cannot open %s\n", "/usr/share/dict/words");
        exit(1);
    } 

    while ( !feof(file) )
    {
        fgets(line, sizeof(line), file);
        if ( all_vowels(line) == 1 )
        {
            printf("%s\n", line);
        }
    }
    fclose(file);
    return 0;

} 
```

任何提示都会很棒！

我现在真的很迷茫……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:51:17.993

> 但它有缺陷的地方......

这里会不会有错误？

```
if ( *vowel      == 'a' &&
    (*vowel + 1) == 'e' &&
    (*vowel + 2) == 'i' &&
    (*vowel + 3) == 'o' &&
    (*vowel + 4) == 'e' )      
//                  ^^^ 'u'? 
```

也可能有其他错误。我还没有检查你所有的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T09:52:23.803

这是一个*很大*的缺陷：

```
char *v = malloc(sizeof(char *)); 
```

这仅分配四个或八个字节（取决于您是在 32 位还是 64 位平台上）。我猜你想要的远不止这些。

PS。将来，您可能应该尝试更具体，而不是仅仅说“它有缺陷”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T09:52:52.740

您正在访问`v`，就好像它指向一个包含多个字符的位置一样，而实际上您只为一个单个保留空间`char *`（通常在 32 位机器上为 4 字节，在 64 位机器上为 8 字节）：

```
char *v = malloc(sizeof(char *)); 
```

对于您要存储的内容，这可能还不够；在您的情况下，任何给定单词中的元音数量。

只要有可能，您应该避免动态分配；在您的情况下，您不需要它们，您可以声明一个固定大小的数组而不是 char*：

```
char v[5]; 
```

除此之外，您必须检查您是否已经阅读了 5 个元音，以免超出数组大小；如果在 5 个元音之后遇到另一个元音，则无论如何都可以停止检查；当前遇到的必须是重复元音，因此该单词不合格。

处理字符的方式也是一个问题。再次检查是做什么`*`的：它立即取消引用右侧的表达式。在您的情况下，它将始终取消引用 v，然后向其添加一些内容（这也是合法的，因为取消引用的结果是一个字符）。因此，如果 v 指向的第一个字符是 a，第二个字符是 e，那么`*v`将 yield `'a'`、`(*v + 1)`will yield `'b'`、`(*v +2)`will yield`'c'`等等 - 你看，结果是给定数字对字母 a 的加法；第一个字符之后的内容并不重要，因为您永远不会访问那里的值。要使用指针算术实现您想要的，您必须使用括号：`*(v+1)`- 即，将 1 添加到指针`v`，然后取消引用它。这将产生从 开始的 c 字符串中的第二个字符`v`，即`'e'`。请注意，使用如上声明的 v，您可以简单地编写`v[0]`,`v[1]`等`v[2]`来寻址每个字符。

除此之外，检查 if 条件中的最后一个比较，那里有一个“e”而不是一个“u”。

顺便说一句，作为旁注，还有一些需要考虑的事情：您的问题有一个解决方案，它根本不需要`v`/`vowel`变量......只有一个整数变量！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:50:49.080

为什么要`all_vowels()`分配内存？而且，更有趣的是，为什么不`free()`呢？

我很确定`all_vowels()`不必分配任何内存，并且可以比您拥有的更简单。

此外，在尝试从文件中读取`feof()` *之前，您不能使用。*删除它，只需循环直到`fgets()`返回`NULL`。

我可能会编写一个辅助函数`int is_vowel(char c);`来使代码更清晰，然后像这样解决问题`all_vowels()`：

```
vowels = "aeiou"
for each character x in the string to check:
  if is_vowel(x):
    if vowels starts with x:
      let vowels = vowels[1:]
    else
      return false
return true if vowels is empty 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T14:57:48.140

关于解析你的文件有点不确定，但我下面的函数检查一个字符是否是元音并测试下一个元音是否大于当前元音。

```
#include <stdio.h>

// for readability not advocating the 
// usage of #define booleans etc
#define TRUE  1
#define FALSE 0

int isVowel (char c)
{
    switch (c)
    {
        case 'a': return TRUE;
        case 'e': return TRUE;
        case 'i': return TRUE;
        case 'o': return TRUE;
        case 'u': return TRUE;
        case 'A': return TRUE;
        case 'E': return TRUE;
        case 'I': return TRUE;
        case 'O': return TRUE;
        case 'U': return TRUE;
    }

    return FALSE;
}

int hasOrderedVowels (char *str)
{    
    char c1, c2;

    c1 = *str;
    c2 = *(++str);

    // ignore words beginning in vowels other then 'a' or 'A'
    if (isVowel(c1) && !(c1 == 'a' || c1 == 'A')) return FALSE;

    do {
        // ignore case of `c1`
        if (c1 >= 'a')
            c1 -= 32;

        // ignore case of `c2`
        if (c2 >= 'a')
            c2 -= 32;

        // compare vowels and increment
        // pointers as appropriate
        if (isVowel(c1) && isVowel(c2))
        {
            // if we have found a vowel less then or equal to current
            // then they are not in order/more then one, if we have found
            // a 'U' and there are more vowels then this would be a duplicate
            if (c2 <= c1 || c1 == 'U')
                return FALSE;

            c1 = c2;
        } 
        else if (isVowel(c2))    // found first vowel so assign to c1
        {
            if (!(c1 == 'a' || c1 == 'A'))
            {
                return FALSE;
            }
            c1 = c2;
        }
        else if (!isVowel(c1))   
        {
            c1 = *(str += 2);    // skip over c2
        }
        c2 = *(++str); 
    } 
    while (c2 != '\0');

    return (c1 == 'U');
}

int main ()
{
    char *str[] = {"aeiou", "facecious", "chimpanze", "baboon"};
    int i = 0;

    for (; i<5; i++)
    {
        printf ("%s: %i\n", str[i], hasOrderedVowels(str[i]));
    }

    return 0;
} 
```

[演示](http://ideone.com/dPvc3)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T11:23:58.383

好的..所以我终于得到了正确的输出......任何提高效率的提示或技巧将不胜感激。

```
int all_vowels( char *s )
{
const unsigned char *p = (const unsigned char *)s;

char v[5];
int i = 0;
if(*p == '\0') return -1;

while( *p != '\0' )
{
    if( (*p == 'a' || *p =='e' || *p =='i'|| *p =='o' || *p =='u') && ( i < 5 )        )
    {
        v[i] = *p;
        i++;
    }
    p++;
}

if ( ( v[0] == 'a'  &&  v[1] == 'e'  &&  v[2] == 'i'  &&  v[3] == 'o'  &&  v[4] == 'u' ) && (strlen(v) == 5 )) 
{ 
    return 1; 
}

return -1;
}

int main (int argc, char *argv[])
{
FILE *file;
char line[30];

if (( file = fopen("/usr/share/dict/words", "r") ) == NULL) 
{
    fprintf(stderr, "cannot open %s\n", "/usr/share/dict/words");
    exit(1);
} 

while ( fgets(line, sizeof(line), file) )
{

    if ( all_vowels(line) == 1 )
    {
        printf("%s\n", line);
    }
}
fclose(file);
return 0;

} 
```

# perl - 如何在 Perl 中将 4 个连续的空白行压缩为一行

> ID：12297361
> 
> 赞同：4
> 
> 时间：2012-09-06T09:49:00.783
> 
> 标签：perl

我正在编写一个 Perl 脚本来读取日志，以便通过删除空行来将文件重新写入新日志，以防看到任何连续的 4 个或更多空行。换句话说，我必须将任何 4 个连续的空白行（或更多行）压缩成一行；但文件中任何 1、2 或 3 行的情况都必须保持格式。我试图在网上找到解决方案，但我唯一能找到的是

```
perl -00 -pe '' 
```

或者

```
perl -00pe0 
```

此外，我在 vim 中看到这样的示例删除`:%s/^\n\{4}//`与我正在寻找的内容匹配的 4 个空行块，但它是在 vim 而不是 Perl 中。有人可以帮忙吗？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T11:56:09.967

要将 4+ 个连续的 Unix 样式 EOL 折叠到一个换行符：

```
$ perl -0777 -pi.bak -e 's|\n{4,}|\n|g' file.txt 
```

使用后视的另一种风味：

```
$ perl -0777 -pi.bak -e 's|(?<=\n)\n{3,}||g' file.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:08:26.603

```
use strict;
use warnings;

my $cnt = 0;

sub flush_ws {
  $cnt = 1 if ($cnt >= 4);
  while ($cnt > 0) {print "\n"; $cnt--; }
}

while (<>) {
  if (/^$/) {
    $cnt++;
  } else {
    flush_ws();
    print $_;
  }
}
flush_ws(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T12:45:58.930

一种使用方法`GNU awk`，将记录分隔符设置为 NUL：

```
awk 'BEGIN { RS="\0" } { gsub(/\n{5,}/,"\n")}1' file.txt 
```

这假设您定义的空不包括空格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T13:41:27.410

这将做你需要的

```
perl -ne 'if (/\S/) {$n = 1 if $n >= 4; print "\n" x $n, $_; $n = 0} else {$n++}' myfile 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T12:20:18.447

您的`-0`提示是一个很好的提示，因为您可以使用`-0777`slurp 模式下的整个文件`-p`。[在perlrun](http://p3rl.org/perlrun)中阅读更多关于这些人的信息所以这个 oneliner 应该可以解决问题：

```
$ perl -0777 -pe 's/\n{5,}/\n\n/g' 
```

如果连续最多有四个新行，则不会发生任何事情。五个换行符或更多（四个空行或更多）被两个换行符（一个空行）替换。注意`/g`这里的开关不仅要替换第一个匹配项。

解析代码：

```
BEGIN { $/ = undef; $\ = undef; }
LINE: while (defined($_ = <ARGV>)) {
    s/\n{5,}/\n\n/g;
}
continue {
    die "-p destination: $!\n" unless print $_;
} 
```

！:)

# java - 如何在集成测试（OpenEjb）中测试有状态会话 bean 的钝化？

> ID：12297364
> 
> 赞同：2
> 
> 时间：2012-09-06T09:49:17.310
> 
> 标签：java, ejb, ejb-3.0, openejb

我在集成测试（@LocalClient 带注释的测试类）中使用 OpenEjb 本地服务器（3.1.4）。

```
@LocalClient
public class BoxDaoTest{

    @EJB
    private BoxDao boxDao;
    ...
} 
```

BoxDao 是一个有状态的会话 bean。是否可以在 OpenEjb 中触发 BoxDao 的钝化以在集成测试中对其进行测试？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T19:45:36.157

`InitialContext`您可以在用于在测试用例中引导 OpenEJB的属性中创建/配置有状态容器。

这些设置可以解决问题：

```
final Properties p = new Properties();
p.put("MyStatefulContainer", "new://Container?type=STATEFUL");
p.put("MyStatefulContainer.Capacity", "0");
p.put("MyStatefulContainer.Frequency", "0");

p.setProperty(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.core.LocalInitialContextFactory");
final InitialContext initialContext = new InitialContext(properties);
//lookup your beans from the initialContext 
```

这将导致`@Stateful`bean 基本上永远不会驻留在内存中，它将在每次方法调用或生命周期回调时从磁盘读取并写回磁盘。

`javax.ejb.embeddable.EJBContainer`使用 EJB 3.1 API也可以做同样的事情：

```
final Properties p = new Properties();
p.put("MyStatefulContainer", "new://Container?type=STATEFUL");
p.put("MyStatefulContainer.Capacity", "0");
p.put("MyStatefulContainer.Frequency", "0");

final EJBContainer container = EJBContainer.createEJBContainer(p);
Foo foo = (Foo) container.getContext().lookup("java:global/yourapp/yourbean"); 
```

# javascript - 比较二维数组js

> ID：12297365
> 
> 赞同：0
> 
> 时间：2012-09-06T09:49:18.413
> 
> 标签：javascript, multidimensional-array

我正在用 JS 编写代码，我必须测试代码 - 我必须检查 2 个数组中的元素是否相同。所以我有一个数组：`boreholes = [[66000, 457000],[1111,2222]....];`我想检查这个数组是否包含例如元素。[66000,457000] 所以我做了： `boreholes.indexOf([66000,457000])`但它返回-1，所以我通过以下方式迭代槽数组：

```
for (var i = 0; i< boreholes.length; i++){
 if (boreholes[i] == [66000, 457000]){
  console.log('ok');
  break;
 }
}; 
```

但我仍然一无所有。有人可以解释一下我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T09:55:28.770

You cannot compare arrays like `array1 == array2` in javascript like you're trying to do here.

Here is a kludge method to compare two arrays:

```
function isEqual(array1, array2){
  return (array1.join('-') == array2.join('-'));
} 
```

You can now use this method in your code like:

```
for (var i = 0; i< boreholes.length; i++){
 if (isEqual(boreholes[i], [66000, 457000]){
  console.log('ok');
  break;
 }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:52:01.993

您正在比较不同的对象。比较对象时，比较仅评估`true`被比较的 2 个对象是*同一*对象的情况。IE

```
var a = [1,2,3];
var b = a;
a === b //true
b = [1,2,3];
a === b //false, b is not the same object 
```

要像这样比较数组，您需要分别比较它们的所有元素：

```
for (var i = 0; i < boreholes.length; i++) {
    if (boreholes[i][0] == 66000 && boreholes[i][1] == 457000) {
        console.log('ok');
        break;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-26T13:58:58.953

目前我有同样的问题，用 toString() 方法

```
var array1 = [1,2,3,[1,2,3]]
var array2 = [1,2,3,[1,2,3]]

array1 == array2 // false
array1.toString() == array2.toString() // true

var array3 = [1,2,3,[1,3,2]]

// Take attention
array1.toString() == array3.toString() // false 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:01:48.177

您也可以使用[Underscore.js](http://underscorejs.org)进行函数式编程的框架。

```
function containsElements(elements) {
  _.find(boreholes, function(ele){ return _.isEqual(ele, elements); });
}

if(containsElements([66000, 457000])) {
  console.log('ok');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T10:16:05.613

如果数组中可以有两个以上的元素，这个问题还不是很清楚，所以这可能有效

```
var boreholes = [[66000, 457000],[1111,2222]]; 
var it = [66000, 457000];

function hasIt(boreholes, check) {
  var len = boreholes.length;
  for (var a = 0; a < len; a++) {
    if (boreholes[a][0] == check[0] && boreholes[a][1] == check[1]) {
       // ok
       return true;
    }
  }
  return false;
}

if (hasIt(boreholes, it)) {
  // ok, it has it
} 
```

# java - 使用 maven-assembly-plugin 包含所需的驱动程序时找不到合适的驱动程序

> ID：12297376
> 
> 赞同：6
> 
> 时间：2012-09-06T09:49:51.283
> 
> 标签：java, postgresql, maven, jdbc, jar

> **可能重复：**
> [java 错误（未找到合适的驱动程序）](https://stackoverflow.com/questions/5130254/java-error-no-suitable-driver-found)

我也有一个非常小的可与 PostgreSQL 数据库一起使用的工具，将其用作单个 jar 会非常方便。所以我确实尝试过像这样使用 maven-assembly-plugin：

```
<artifactId>maven-assembly-plugin</artifactId>
                <version>2.3</version>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>pack.name.MainClass</mainClass>
                        </manifest>
                    </archive>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration> 
```

它工作得很好，我可以看到我需要添加到 jar 文件中的所有文件，包括驱动程序的文件，但是当我尝试运行它时，我得到：

```
java.sql.SQLException: No suitable driver found for jdbc:postgresql://<ip>:5432/dbname 
```

我有这个：

```
<dependencies>
        <dependency>
            <groupId>com.oracle</groupId>
            <artifactId>ojdbc6</artifactId>
            <version>11.2.0.3</version>
        </dependency> 
        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>9.1-901-1.jdbc4</version>
        </dependency> 
```

在依赖项中，URL 和我上面写的完全一样（除了被审查的地址:)）。我错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T11:00:02.877

如果您不使用`Class.forName(...)`手动加载驱动程序，那么我认为您遇到了一个臭名昭著的问题`maven-assembly-plugin`- 当它们来自不同`jar`的 s.

在您的情况下，JDBC 驱动程序发现机制依赖于一个名为 的文件`/META-INF/services/java.sql.Driver`，并且您的依赖项（Oracle 和 Postgres 驱动程序）中至少有两个`jar`包含此类文件的文件，因此其中一个在运行后丢失`maven-assembly-plugin`。

您可以使用`maven-shade-plugin`而不是`maven-assembly-plugin`正确地合并这些文件，如此[处](https://stackoverflow.com/questions/5586515/idea-to-avoid-that-spring-handlers-spring-schemas-get-overwritten-when-merging-m)所述。

或者，您可以使用`Class.forName(...)`回避失败的自动发现机制。

# android - 如何将图像转换为base64字符串

> ID：12297381
> 
> 赞同：8
> 
> 时间：2012-09-06T09:50:22.103
> 
> 标签：android, xml, encoding, base64, encode

我想将图像转换为 base 64 编码为字符串。从那个以`oma_status-icon`xml格式发送到服务器。

但我从服务器响应中得到不支持的编码......

有没有其他方法可以将图像转换为 base64 字符串？

请..帮助...

我的代码是：

```
 Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),  R.drawable.image);

        ByteArrayOutputStream bao = new ByteArrayOutputStream();
        bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 100, bao);
        byte [] ba = bao.toByteArray();

         String ba1=Base64.encodeBytes(ba); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T09:54:09.353

请使用此代码..

```
Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),  R.drawable.image);
ByteArrayOutputStream bao = new ByteArrayOutputStream();
bitmapOrg.compress(Bitmap.CompressFormat.JPEG, 100, bao);
byte [] ba = bao.toByteArray();
String ba1=Base64.encodeToString(ba,Base64.DEFAULT); 
```

**请导入**

```
import android.util.Base64; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T10:49:39.680

```
// convert from bitmap to byte array
public byte[] getBytesFromBitmap(Bitmap bitmap) {
    ByteArrayOutputStream stream = new ByteArrayOutputStream();
    bitmap.compress(CompressFormat.JPEG, 70, stream);
    return stream.toByteArray();
}

// get the base 64 string
String imgString = Base64.encodeToString(getBytesFromBitmap(someImg), 
                       Base64.NO_WRAP); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T09:54:44.467

试试下面的代码

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
bm.compress(Bitmap.CompressFormat.JPEG, 100, baos);
byte b [] = baos.toByteArray();
String base64String = Base64.encodeToString(b, Base64.DEFAULT); 
```

别忘了`import android.util.Base64;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T09:55:44.400

也许你可以试试

`String base64Result = Base64.encodeToString(yourByteArray[], Base64.DEFAULT);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-16T09:04:35.597

方法：

```
private String bitmapToBase64(Bitmap bitmap) {

    ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
    bitmap.compress(Bitmap.CompressFormat.PNG, 100, byteArrayOutputStream);
    byte[] byteArray = byteArrayOutputStream .toByteArray();

    return Base64.encodeToString(byteArray, Base64.DEFAULT);
} 
```

进口：

```
import android.util.Base64;
import java.io.ByteArrayOutputStream; 
```

# .net - .NET 类型来存储任何可能的数字，或者如何将字符串作为数字进行比较

> ID：12297383
> 
> 赞同：1
> 
> 时间：2012-09-06T09:50:42.477
> 
> 标签：.net, string, numbers, compare, double

我们正在为我们的 .NET DataGrid 控件开发一个自动筛选插件，该插件的工作原理类似于相同的 MS Excel 功能。它允许输入自定义过滤条件。我们需要检查一个网格单元格是否满足自定义过滤条件，但问题是它是字符串格式。为了优化性能，我们可以将字符串转换为相应的数字，并将其作为实数与单元格值进行比较，但是存储此缓存值的最佳 .NET 数据类型是什么？Double 很糟糕，因为我们可能会丢失一些数据（精度），BigInteger 很好，但仅适用于整数值。另一种方法可能是比较单元格文本和字符串值以过滤为数字，而它们是字符串格式。任何人都可以知道如何在 .NET 中以最佳方式做到这一点吗？还是仅在 VB.NET 中，因为我们在这种环境中进行开发？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:55:04.853

创建一个能够存储所有可能的数字格式的自定义类：

```
class ParsedNumber {
 NumberType Type; //Integer, FloatingPoint, Decimal
 BigInteger Integer;
 double FolatingPoint;
 decimal Decimal;
} 
```

这个类可能应该实现相等和比较运算符。

您可以将每个单元格解析为此类的一个实例。该类应该抽象不同的格式，以便您可以将其视为一个数字。

您还可以将其设为结构以节省堆分配。

# ios6 - Xcode 4.5 iOS SDK 6.0 Beta 4 编译的应用程序在背景中给了我细白线

> ID：12297389
> 
> 赞同：2
> 
> 时间：2012-09-06T09:50:56.650
> 
> 标签：ios6, xcode4.5

你们都知道iOS“设置”应用程序中带有细白线的蓝色背景。我为我的应用程序中的所有视图设置了灰色背景颜色，它按预期工作。现在，当我使用带有 iOS 6 beta 4 SDK 的 Xcode 4.5 (4G144l)“预览”版本构建完全相同的代码并让它在带有 iOS 6 beta 4 或 iPhone 6.0 模拟器的设备上运行时，我的背景灰色被替换为这种“蓝色细白线”风格，我不知道为什么。似乎没有人有这个问题。任何人？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T13:18:50.660

使用该`UITableViewStyleGrouped`样式并尝试设置背景颜色的所有表格都会出现此问题。在 iOS 6 中进行了更改，导致为这些表设置背景视图，这将覆盖背景颜色属性。解决方法是清除 UITableView 中的背景视图。

`table.backgroundView = nil;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-20T10:49:32.773

我遇到了类似的问题，我正在使用“[[UITableView appearance] setBackgroundColor:”来更改应用程序中所有表格视图的背景图像。

通过将 Storyboard 中 TableView 的背景颜色从默认更改为清除颜色来修复它。

# android - 如何在android中实现触摸平滑图像橡皮擦？

> ID：12297396
> 
> 赞同：4
> 
> 时间：2012-09-06T09:51:24.420
> 
> 标签：android, touch, erase

我已经从 API 演示中看到了 fingurePaint.java。我想实现触摸平滑橡皮擦，通过在 android 中的触摸移动擦除部分图像。

fingerPaint 告诉我要实现这个

```
mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR)); 
```

但这并不能擦除图像。它正在擦除通过触摸绘制的东西。

```
public class SandboxView extends View implements OnTouchListener {
    public  final Bitmap bitmap;
    private final int width;
    private final int height;
    private Matrix transform = new Matrix();

    private Vector2D position = new Vector2D();
    private float scale = 1;
    private float angle = 0;
    public boolean isInitialized = false;
    private TouchManager touchManager = new TouchManager(2);
    final GestureDetector mGesDetect;

    // Debug helpers to draw lines between the two touch points
    private Vector2D vca = null;
    private Vector2D vcb = null;
    private Vector2D vpa = null;
    private Vector2D vpb = null;

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;
    private Path    mPath;
    private Canvas  mCanvas;
    private Paint       mPaint;
    private Paint   mBitmapPaint;
    public SandboxView(Context context, Bitmap bitmap) {
        super(context);

        this.bitmap = bitmap;
        this.width = bitmap.getWidth();
        this.height = bitmap.getHeight();
        this.mGesDetect = new GestureDetector(context, new DoubleTapGestureDetector());

        setOnTouchListener(this);
    }

    private  float getDegreesFromRadians(float angle) {
        return (float)(angle * 360.0 / Math.PI);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);

        if (!isInitialized) {
            Bitmap mBitmap = bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
            mCanvas = new Canvas(mBitmap);
            mPaint = new Paint();
            mPath = new Path();
            mPaint.setAntiAlias(true);
            mPaint.setDither(true);
            mPaint.setColor(0xFFFF0000);
            mPaint.setStyle(Paint.Style.STROKE);
            mPaint.setStrokeJoin(Paint.Join.ROUND);
            mPaint.setStrokeCap(Paint.Cap.ROUND);
            mPaint.setStrokeWidth(12);
            mPaint.setAlpha(0);
            mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
            mPaint.setAntiAlias(true);

            mBitmapPaint = new Paint(Paint.DITHER_FLAG);

            int w = getWidth();
            int h = getHeight();
            position.set(w / 2, h / 2);
            isInitialized = true;
        }
        if(isEraser==1){
            canvas.drawColor(80000000);

            canvas.drawBitmap(bitmap, transform, mBitmapPaint);

            canvas.drawPath(mPath, mPaint);
        }
        else{

        Paint paint = new Paint();

        transform.reset();
        transform.postTranslate(-width / 2.0f, -height / 2.0f);
        transform.postRotate(getDegreesFromRadians(angle));
        transform.postScale(scale, scale);
        transform.postTranslate(position.getX(), position.getY());

        canvas.drawBitmap(bitmap, transform, paint);

        try {
            /*paint.setColor(0xFF007F00);
            canvas.drawCircle(vca.getX(), vca.getY(), 64, paint);
            paint.setColor(0xFF7F0000);
            canvas.drawCircle(vcb.getX(), vcb.getY(), 64, paint);

            paint.setColor(0xFFFF0000);
            canvas.drawLine(vpa.getX(), vpa.getY(), vpb.getX(), vpb.getY(), paint);
            paint.setColor(0xFF00FF00);
            canvas.drawLine(vca.getX(), vca.getY(), vcb.getX(), vcb.getY(), paint);*/

        }
        catch(NullPointerException e) {
            // Just being lazy here...
        }
        }
    }

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        mCanvas.drawPath(mPath, mPaint);
        mPath.reset();
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        if(isEraser ==1){
            float x = event.getX();
            float y = event.getY();

            mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    touch_start(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_MOVE:
                    touch_move(x, y);
                    invalidate();
                    break;
                case MotionEvent.ACTION_UP:
                    touch_up();
                    invalidate();
                    break;
            }
            return true;
        }
        else{
        vca = null;
        vcb = null;
        vpa = null;
        vpb = null;
        mGesDetect.onTouchEvent(event);

        try {
            touchManager.update(event);

            if (touchManager.getPressCount() == 1) {
                vca = touchManager.getPoint(0);
                vpa = touchManager.getPreviousPoint(0);
                position.add(touchManager.moveDelta(0));
            }
            else {
                if (touchManager.getPressCount() == 2) {
                    vca = touchManager.getPoint(0);
                    vpa = touchManager.getPreviousPoint(0);
                    vcb = touchManager.getPoint(1);
                    vpb = touchManager.getPreviousPoint(1);

                    Vector2D current = touchManager.getVector(0, 1);
                    Vector2D previous = touchManager.getPreviousVector(0, 1);
                    float currentDistance = current.getLength();
                    float previousDistance = previous.getLength();

                    if (previousDistance != 0) {
                        scale *= currentDistance / previousDistance;
                    }

                    angle -= Vector2D.getSignedAngleBetween(current, previous);
                }
            }

            invalidate();
        }
        catch(Throwable t) {
            // So lazy...
        }
        return true;
        }
    }
    class DoubleTapGestureDetector extends GestureDetector.SimpleOnGestureListener {

        @Override
        public boolean onDoubleTap(MotionEvent e) {
            colorseekbar.setVisibility(View.INVISIBLE);
            opacityseekbar.setVisibility(View.INVISIBLE);
            return true;
        }
    } 
```

}

所以请帮助我使用触摸移动擦除图像的部分。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T09:52:59.793

颠倒这种情况不是更好吗？只需使用背景颜色在图像上绘画，毕竟在保存时，如果需要合并这些图层。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T10:34:06.393

首先在构造函数中使用所有属性声明您的油漆。

**在您的onDraw()**方法中编写此代码

```
@Override
protected void onDraw(Canvas canvas) 
   {
    System.out.println("come in on draw......");
    canvas.drawColor(Color.TRANSPARENT);
    canvas.drawBitmap(mBitmap, 0, 0, mPaint);
            if(eraser==true)
               mPaint.setColor(Color.TRANSPARENT):
            else
               mPaint.setColor(Color.RED):
    canvas.drawPath(mPath, mPaint);

    super.dispatchDraw(canvas);
} 
```

**第二种解决方案：**

**在您的touch_move()**方法中调用以下方法

**mBitmap.setPixel(x, y, Color.TRANSPARENT);** 此方法将更改您的位图，您只需传递**X、Y 和颜色**

```
public void changeBitmap(int x, int y, Bitmap mBitmap)
{
 Bitmap tempBitmap = Bitmap.createBitmap(mBitmap); //Edited code
 tempBitmap.setPixel(x, y, Color.TRANSPARENT);
}

private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
            changeBitmap(x, y, your_bitmap)
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T10:37:26.613

定义一个临时画布和位图，然后在触摸事件上绘制您的路径或线条、圆圈、图像任何内容，然后将此临时位图传递给 onDraw 中的画布，您的工作将正确完成，如果您想擦除，请在上面进行擦除临时画布。

```
 protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
        TemporaryBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_4444);
        TemporaryCanvas = new Canvas(TemporaryBitmap);
}
TemporaryCanvas.drawColor(0, PorterDuff.Mode.clear);
public void onDraw(Canvas canv){
canv.drawBitmap(TemporaryBitmap, matrix, paint); 
```

# eclipse - 在 Eclipse 中从 .Net Web 服务 WSDL 错误生成 (Java)Web 服务客户端时出错

> ID：12297401
> 
> 赞同：5
> 
> 时间：2012-09-06T09:51:54.333
> 
> 标签：eclipse, web-services, webservice-client

当尝试使用来自现有 .Net Web 服务的 WSDL 的向导/Web 服务/Web 服务客户端在 Eclipse 中生成 Web 服务客户端时，我遇到了以下错误： **“已禁用向导 WSDL 验证。”** ，向导无法继续返回主页面，因为： **找不到服务器并且 WebServiceProject 不存在。选择现有项目或使用首选项配置服务器运行时。** 我能做些什么来解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:00:06.173

[This Eclipse Page](http://www.eclipse.org/webtools/jst/components/ws/scenarios/prefs.html)上的配置文件验证和一致性部分是否有帮助？

# postgresql - Postgresql：从本地到远程数据库的存储函数中的 dblink

> ID：12297402
> 
> 赞同：1
> 
> 时间：2012-09-06T09:51:56.797
> 
> 标签：postgresql, postgresql-9.1

我检查了我使用并完美运行的以下链接。但我想反对这件事。

[Postgresql：存储函数中的 dblink](https://stackoverflow.com/questions/6148534/postgresql-dblink-in-stored-functions)

我的场景：有两个数据库。我想将一个表数据从本地复制到远程数据库。我为此使用了 dblink，但我很困惑如何使用 dblink 来存储数据？

本地数据库名称：localdatabase

远程数据库名称：remotedatabase

任何人都可以建议我如何做到这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:51:02.887

类似下面几行的东西应该可以工作：

```
SELECT dblink_connect('hostaddr=127.0.0.1 port=5432 dbname=mydb user=postgres password=mypasswd');
-- change the connection string to your taste

SELECT dblink_exec('INSERT INTO test (some_text) VALUES (''Text go here'');'); 
```

`test`远程数据库中具有以下定义的表在哪里：

```
CREATE TABLE test(
    id serial
    , some_text text
); 
```

运行后`dblink_exec()`，您可以在远程数据库中检查结果（或在本地，使用`dblink()`，如下例所示）。

```
SELECT * FROM dblink('SELECT id, some_text FROM test') AS d(id integer, some_text text);
 id |  some_text
----+--------------
  1 | Text go here
(1 row) 
```

您也可以将`dblink_exec`调用包装在一个函数中：

```
CREATE OR REPLACE FUNCTION f_dblink_test_update(val text, id integer) RETURNS text AS
$body$
SELECT dblink_exec('UPDATE torles.test SET some_text=' || quote_literal($1) || ' WHERE id = ' || $2);
$body$
LANGUAGE sql; 
```

如您所见，您甚至可以动态构建查询字符串。 *（并不是说我提倡这种方法，因为您必须小心不要以这种方式将 SQL 注入漏洞引入您的系统。）*

由于`dblink_exec`返回一个关于它做了什么的文本消息，你必须将你的函数定义为`RETURNS text`除非在调用之后还有其他返回值的语句`dblink_exec`。

# php - 使用 PDO 的 Sqlite 分页

> ID：12297403
> 
> 赞同：0
> 
> 时间：2012-09-06T09:52:00.343
> 
> 标签：php, sqlite, pdo, pagination

我已经设法使用 PDO 通过 sqlite 数据库进行分页，但是对于数据库来说是新手，我想知道是否有更好或更有效的方法来做到这一点？这是代码：

```
<?php
try
{
$db = new PDO('sqlite:comments.s3db');
$per_page = '3';
$result = $db->query("SELECT id FROM com ");
$rows = $result ->fetchAll();
$total_records = count($rows);
$pages = ceil($total_records / $per_page); 
$page  = (isset ($_GET['page']))  ? (int) $_GET['page'] : 1 ;
$start = ($page - 1) *  $per_page; 
$query = $db->query("SELECT * FROM com LIMIT $start , $per_page");
while($row = $query->fetch(PDO::FETCH_ASSOC)){
echo '<br>' . $row['id'] . '<br>' . $row['name'] . '<br>' . $row['email'] . '<br>';
} ?>
<br><br>
<?php
if ($pages >=  1 && $page <= $pages){
//if ($page>1 && $page <= $pages){$previous=($page -1); echo '<a href="?page=' .$previous. '">Previous</a>';}
for($x=1; $x<=$pages; $x++){ echo ($x == $page) ? ' <strong><a href="?page='.$x.'">'.$x.'</a></strong> ' : ' <a href="?page='.$x.'">'.$x.'</a> ';}
//if ($page>1  && $page <= $pages){ $next=($page+1) ; echo '<a href="?page=' .$next. '">Next</a>';}
}
####################### Close Database #######################
$db = NULL;
}
catch(PDOException $e)
{
print 'Exception : '.$e->getMessage();
} 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:07:01.223

首先不要在第一个查询中选择所有带有“id”的记录。选择 COUNT(id) 即可轻松完成。结果你会得到总行数：

```
SELECT COUNT(id FROM) com 
```

第二个通知 - 格式化您的代码。使其更具可读性。

# android - 在应用程序之间使用隐式意图的自定义操作

> ID：12297407
> 
> 赞同：12
> 
> 时间：2012-09-06T09:52:15.523
> 
> 标签：android, android-intent, android-manifest

我一直在尝试在两个单独的应用程序中使用自定义操作和隐式意图进行通信的两个活动。

第一个应用程序（服务器）具有以下清单：

```
<application android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" android:theme="@style/AppTheme">
    <activity android:name="edu.example.sharing.manager.SecureFileShare"
        android:label="@string/title_activity_secure_file_share" android:exported="true">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="edu.example.sharing.action.STORE" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="*/*" />
        </intent-filter>
    </activity>
</application> 
```

第二个应用程序创建一个意图，如下所示：

```
File f = new File(s);
Uri fileUri = Uri.fromFile(f);
Intent intent = new Intent();
intent.setData(fileUri);
intent.setAction("edu.example.sharing.action.STORE");               
startActivityForResult(intent, STORE_REQUEST); 
```

它的表现是正常的。但是，当我尝试在客户端应用程序中发送意图时，我得到一个找不到活动的异常：

```
FATAL EXCEPTION: main
android.content.ActivityNotFoundException: No Activity found to handle Intent {act=edu.example.sharing.action.STORE dat=file:///storage/sdcard0/Download/Alarcon12-Rigoberto.pdf }
at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1545)
at android.app.Instrumentation.execStartActivity(Instrumentation.java:1416)
at android.app.Activity.startActivityForResult(Activity.java:3351)
at android.app.Activity.startActivityForResult(Activity.java:3312) 
```

是什么导致 Android 无法识别第二个应用程序中声明的活动？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T10:01:35.993

看了很多之后，我发现了以下内容：

当您使用**内置**操作类型并附加数据字段时，**或者**当您使用没有数据字段的**自定义**操作类型时，没有`intent-filter`元素`data`是可以的。

但是，当您定义自定义操作**并**包含数据字段时，您必须手动设置`mime-type`附加的 URI。Android[文档](http://developer.android.com/reference/android/content/Intent.html)声称

> 通常类型是从数据本身推断出来的。通过设置此属性，您可以禁用该评估并强制使用显式类型。

但事实并非如此。当我输入一个`file://`以 结尾的 URI 时`.txt`，Android 给它分配了一个 null `mime-type`，所以它不会匹配*任何* `intent-filter`，即使是带有`data`and的`*/*` `mime-type`。我需要使用手动设置意图的类型`setDataAndType()`。

**简而言之**：在对数据使用自定义操作时，您*必须*手动定义意图。`mime-type`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:06:29.660

首先，您只能指定要转到哪个应用程序；你不能指定去哪个活动；我已经在[这里](https://stackoverflow.com/questions/12177585/how-to-open-specific-application-using-intent-in-android/12177722#12177722)回答了如何导航到另一个应用程序；之后，您的控制权转到另一个应用程序；你必须在那里处理它

# calendar - Xpage 日历条目在生产服务器中不可见

> ID：12297408
> 
> 赞同：0
> 
> 时间：2012-09-06T09:52:18.187
> 
> 标签：calendar, xpages

我在开发服务器中测试了一个日历视图，它工作正常，我可以看到我想要的日历中的条目，但是在移动到生产服务器之后，我得到了没有条目的空日历视图。

任何人都可以建议可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T21:22:01.393

如果您使用的是日历视图控件，请比较和对比 REST 服务、基础视图设计元素、日历视图的 ?ReadViewEntries。我假设日历视图与 XPage 位于同一数据库中，因此最好确认是否不是这种情况。

# java - struts-config.xml 中的 *.do 是什么

> ID：12297420
> 
> 赞同：3
> 
> 时间：2012-09-06T09:52:59.310
> 
> 标签：java, servlets, struts

我正在学习 struts，我在 Struts-config.xml 中找到了一个映射，如下所示

```
<servlet-name>action</servlet-name>
<url-pattern>*.do</url-pattern> 
```

在 servlet 映射标记中。

什么是 *.do

我们可以在 servlet 的 web.xml 中实现同样的效果吗？

提前致谢 ，

拉吉

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T09:59:42.420

`*.do`- 它只是意味着任何以“.do”结尾的 URL
是的，我们可以在 servlet 的 web.xml 中实现相同的结果，

即：任何`.do`以`action`

[此链接让您对](http://www.geekinterview.com/question_details/39833)**web.xml**和**struts-config.xml**以及它们之间的**区别**有一个很好的了解

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T16:42:16.030

据我所知 .do url 调用你的 servlet。我已经看到这个扩展与 Struts 一起使用。

所以如果你有 www.hey.com/hello.do 那么你的struts配置就会有如下内容

```
<struts-config>
    <action-mappings>
        <action path="/hello" type="com.MyAction">
    </action-mappings>
</struts-config> 
```

所以在这个例子中，url“www.hey.com/hello.do”将被转发到 MyAction.java

在您的特定示例中，您在 web.xml 文件中发现了 *.do 的出现。这意味着所有以 *.do 结尾的请求都将被转发到“action”servlet。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T10:33:30.913

每个以 *.do 结尾的 url 都会调用你的 servlet。

# maven - Shindig maven 安装：小工具渲染器失败

> ID：12297427
> 
> 赞同：0
> 
> 时间：2012-09-06T09:53:52.240
> 
> 标签：maven, installation, apache-shindig

我有点迷失在这里，试图让 shindig (java) 启动并运行......我已经从 svn 存储库（从树干和来自标签的其他 beta 版）下载了代码，我一直在尝试安装代码.m2 文件夹作为存储库。

我没有成功 -.- 当我执行 $ mvn 以进行清理和安装时，它会经历整个过程，直到它到达“Apache Shindig Gadget Renderer”。尝试编译项目失败。

```
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] Apache Shindig Project ............................ SUCCESS [3.004s]
[INFO] Apache Shindig Features ........................... SUCCESS [56.893s]
[INFO] Apache Shindig Common Code ........................ SUCCESS [20.824s]
[INFO] Apache Shindig Gadget Renderer .................... FAILURE [0.270s]
[INFO] Apache Shindig Social API ......................... SKIPPED
[INFO] Apache Shindig Sample Container ................... SKIPPED
[INFO] Apache Shindig Web App Resources .................. SKIPPED
[INFO] Apache Shindig Extra Modules ...................... SKIPPED
[INFO] Apache Shindig Web App Dependencies ............... SKIPPED
[INFO] Apache Shindig Web App ............................ SKIPPED
[INFO] ------------------------------------------------------------------------ 
```

如果我使用 eclipse 插件，也会发生同样的情况。我有最新版本的 Maven。这里有什么问题？主干（或任何其他测试版）可以编译不是很奇怪吗？oO

非常感谢！

# bash - 我的脚本文件中有奇怪的 ^M 字符

> ID：12297430
> 
> 赞同：-1
> 
> 时间：2012-09-06T09:54:01.613
> 
> 标签：bash, editor, text-editor

我有一个不工作的脚本。执行时收到此消息：

这是文件：

```
#!/bin/sh

# import tv tipps (a.o.)
/usr/local/bin/php_cli /html/typo3/typo3/cli_dispatch.phpsh extbase import:runalljobs 
```

这就是我运行它时得到的：

```
-bash: ./import_tvtips.sh: /bin/sh^M: bad interpreter: Datei oder Verzeichnis nicht gefunden 
```

我得到了这个在编辑器中看不到的“^M”奇怪字符。我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T09:56:28.030

您的脚本 import_tvtips.sh 中似乎有 ^M 个额外字符。删除它们，您的脚本应该执行。

# java - 使用 Java 导入 SQL

> ID：12297433
> 
> 赞同：0
> 
> 时间：2012-09-06T09:54:13.813
> 
> 标签：java, mysql, export

我试图在我的java项目中导出和导入数据库。但是执行命令不起作用。以下是我完成的代码。

```
 public boolean exportDatabase(String fromServer, String FileName, String FilePath, int ExportOpions)
    {

        try {
            Class.forName(Driver).newInstance();
        }
        catch (final InstantiationException e) {
            NLogger.writeDebugLog(e);
        }
        catch (final IllegalAccessException e) {
            NLogger.writeDebugLog(e);
        }
        catch (final java.lang.ClassNotFoundException e) {
        NLogger.writeDebugLog(e);
    }
    try {

        String dbName ="DBsample";
        String dbUser = "root";
        String dbPass ="root";

        String executeCmd ="CD "+FilePath+" mysqldump -u "+dbUser+ "-p"+dbPass+" "+dbName+ ">" +FileName;

        Process runtimeProcess =Runtime.getRuntime().exec(executeCmd);
        int processComplete = runtimeProcess.waitFor();
        if(processComplete == 0){
        System.out.println("Backup taken successfully");
        } 
        else {
        System.out.println("Could not take mysql backup");
        }
    return true;
    }
    catch (final Exception ex) {
        NLogger.writeErrorLog("Database Connection Failed ", ex.toString());
        NLogger.writeDebugLog(ex);
        return false;
    }

} 
```

这显示了一个错误

“无法运行程序“CD”：CreateProcess 错误=2，系统找不到指定的文件”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T09:55:19.430

如果您正在运行命令，则需要预先`"cmd"`添加到 your_command_to_be_run。

使其为：

```
String executeCmd ="cmd CD "+FilePath+" mysqldump -u "+dbUser+ "-p"+dbPass+" "+dbName+ ">" +FileName; 
```

另外我不知道要导出的命令，但您的命令似乎是错误的。您应该直接指定目录。你`cd`在你的命令中使用。考虑以下示例：

```
C:\mydir1\mydir2\some.exe   // this is correct
cmd cd C:\mydir1\mydir2 some.exe   // this is wrong 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:06:10.967

首先设置**系统变量**，如

`C:\Program Files\MySQL\MySQL Server 5.1\bin;`

然后

`String executeCmd = mysqldump -u "+dbUser+ "-p"+dbPass+" "+dbName+ ">" +FileName;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:59:37.150

你可以这样尝试：

```
try {
    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");

    conn = DriverManager.getConnection(DbConnectionAdress, DbName, DbSifre);
    statement = conn.createStatement();
} catch (Exception e) {
    throw new RuntimeException(e);
}

String DbConnectionAdress = " "

DbName = ""

DbSifre = "" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T09:59:55.527

试试这个....

> 字符串 executeCmd ="FilePath+" mysqldump -u "+dbUser+ "-p"+dbPass+" "+dbName+ ">" +FileName;

# jquery - Generate FancyBox link href dynamically from child image src

> ID：12297434
> 
> 赞同：-1
> 
> 时间：2012-09-06T09:54:18.637
> 
> 标签：jquery, fancybox, modal-dialog

I'm using FancyBox for a simple image gallery but I want to set the link HREF attribute automatically from the SRC attribute from the image (that is the link's child). Here is my HTML:

```
<ul id="gallery">
  <li><a href="#" rel="group" class="fancybox"><img src="images/01.jpg" alt="" class="picBorder" /></a></li>
  <li><a href="#" rel="group" class="fancybox"><img src="images/02.jpg" alt="" class="picBorder" /></a></li>
  <li><a href="#" rel="group" class="fancybox"><img src="images/03.jpg" alt="" class="picBorder" /></a></li>
</ul> 
```

After a bit of reading I thought that I could do this using the **beforeLoad** callback, with something like this:

```
$(document).ready(function() {
    $(".fancybox").fancybox({
        beforeLoad : function(){
            var url= $(this.element).children("img").attr("src");
            this.href = url
        }
    });
}); 
```

Alas this isn't working. I would prefer to do this within Fancybox rather than dynamically creating the links on page load if possible.

Thank you in advance for any suggestions!!!

Edit: To clarify, there are no console errors appearing & fancybox's modal window displays with the normal *"The requested content cannot be loaded. Please try again later."* error... this would suggest the problem is in how I am traversing the code.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:04:51.093

由于我无法直接解决此问题，我选择删除链接并在页面加载时生成。这是我用来帮助任何人的代码：

```
$(document).ready(function() {
   $('ul#gallery li').each(function() {
      var url =  $(this).children("img").attr("src");
      $(this).children("img").wrap('<a class="fancybox" rel="group" href="' + url + '" />');
   });
   $(".fancybox").fancybox();
}); 
```

# java - How to reset the JComboBox in JTable to the first value of the JComboBox

> ID：12297459
> 
> 赞同：1
> 
> 时间：2012-09-06T09:55:52.100
> 
> 标签：java, swing, jtable, jcombobox

I'm working on a code in Java Swing. I have created a JComboBox in JTable. It's working :). But once I select a value and click on the save or cancel button, it has to reset to the default value (1st value in the combo box). I tried a lot of ways like `combobox.setSelectedIndex(0)`. This isn't working. Code:

```
String[] manTimeHr = { "00","01", "02", "03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23"};
        String[] manTimeMin = {"00","01", "02", "03","04","05","06","07","08","09","10","11","12","13", "14", "15","16","17","18","19","20","21","22","23","24","25", "26", "27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59"};
        String[][] data = {{"-select-","-select-"}};
        String[] cols = {"Hrs","Mins"};
        String[][] data1 = {{"-select-","-select-"}};
        String[] cols1 = {"Hrs","Mins"};
        JLabel manTimeStart = new JLabel("Start From",JLabel.LEFT);
        STimeTbl = new JTable(data,cols);
        hrsColumn=STimeTbl.getColumnModel().getColumn(0);
        minsColumn=STimeTbl.getColumnModel().getColumn(1);
        manSiteStimeHrCBx = new JComboBox(manTimeHr);
        manSiteStimeHrCBx.setSelectedIndex(0);
        hrsColumn.setCellEditor(new DefaultCellEditor(manSiteStimeHrCBx));
        manSiteStimeMinCBx = new JComboBox(manTimeMin);
        manSiteStimeMinCBx.setSelectedIndex(0);
        minsColumn.setCellEditor(new DefaultCellEditor(manSiteStimeMinCBx));
        JLabel manTimeEnd = new JLabel("End To",JLabel.LEFT);
        ETimeTbl = new JTable(data1,cols1);
        hrsColumn1=ETimeTbl.getColumnModel().getColumn(0);
        minsColumn1=ETimeTbl.getColumnModel().getColumn(1);
        manSiteEtimeHrCBx = new JComboBox(manTimeHr);
        manSiteEtimeHrCBx.setSelectedIndex(0);
        hrsColumn1.setCellEditor(new DefaultCellEditor(manSiteEtimeHrCBx));
        manSiteEtimeMinCBx = new JComboBox(manTimeMin);
        manSiteEtimeMinCBx.setSelectedIndex(0);
        minsColumn1.setCellEditor(new DefaultCellEditor(manSiteEtimeMinCBx));
        .
        .
        .
        .
        if("Save".equals(e.getActionCommand())) {
        try{
                    mSHr = Integer.parseInt((String)manSiteStimeHrCBx.getSelectedItem());
                    mEHr=Integer.parseInt((String)manSiteEtimeHrCBx.getSelectedItem());
                    mSMin=Integer.parseInt((String)manSiteStimeMinCBx.getSelectedItem());
                    mEMin=Integer.parseInt((String)manServEtimeMinCBx.getSelectedItem());
                }catch (Exception en){
                System.out.println("Main Exception : "+ en);
                    return;
                }
                if(validateBlockTime(mSHr,mEHr,mSMin,mEMin) != true)
                {
                    System.out.println("Enter valid Time");
                    return;
                }
                manSiteStimeHrCBx.setSelectedIndex(0);
                manSiteStimeMinCBx.setSelectedIndex(0);
                manSiteEtimeHrCBx.setSelectedIndex(0);
                manSiteEtimeMinCBx.setSelectedIndex(0);
        .
        .
        .
        private static boolean validateBlockTime(int val3, int val4, int val5, int val6){
        if(val4 > val3)
            return true;
        else if((val4 == val3) && (val6 > val5))
            return true;
        else
            return false;
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:40:47.787

*   [JTable 教程](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)包含关于[Combo Box 作为编辑器的描述](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)

*   所有数据都存储在[XxxTableModel](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

*   [概念：编辑器和渲染器](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)中描述了 JTable 视图中的所有更改

*   那么您必须知道，在 XxxTableModel 中仅存储了[作为编辑器的组合框的](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#combobox)`Double`字符串值（或或`Long`或`Integer`或`Icon`，取决于存储在 ComboBoxModel 中的值）

*   结果是

![在此处输入图像描述](../Images/80cc1444de9cadae7824643e21854a91.png)![在此处输入图像描述](../Images/64d218654f38b86a2ac605bd472e8145.png)

基于教程代码的快速代码（对不起我太懒了）

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import javax.swing.DefaultCellEditor;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.event.ActionListener;
import javax.swing.JButton;

public class TableRenderDemo extends JPanel {

    private static final long serialVersionUID = 1L;
    private boolean DEBUG = false;

    public TableRenderDemo() {
        super(new BorderLayout(5, 5));
        final JTable table = new JTable(new MyTableModel());
        table.setRowHeight(18);
        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        table.setFillsViewportHeight(true);
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        initColumnSizes(table);
        setUpSportColumn(table, table.getColumnModel().getColumn(2));
        add(scrollPane);
        JButton resetButton = new JButton("Reset to default");
        resetButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
               for (int i = 0; i < table.getRowCount(); i++) {
                    table.getModel().setValueAt("None of the above", i, 2);
               }
            }
        });
        add(resetButton, BorderLayout.SOUTH);
    }

    private void initColumnSizes(JTable table) {
        MyTableModel model = (MyTableModel) table.getModel();
        TableColumn column = null;
        Component comp = null;
        int headerWidth = 0;
        int cellWidth = 0;
        Object[] longValues = model.longValues;
        TableCellRenderer headerRenderer = table.getTableHeader().getDefaultRenderer();
        for (int i = 0; i < 5; i++) {
            column = table.getColumnModel().getColumn(i);
            comp = headerRenderer.getTableCellRendererComponent(null, column.getHeaderValue(), false, false, 0, 0);
            headerWidth = comp.getPreferredSize().width;
            comp = table.getDefaultRenderer(model.getColumnClass(i)).getTableCellRendererComponent(table, longValues[i], false, false, 0, i);
            cellWidth = comp.getPreferredSize().width;
            if (DEBUG) {
                System.out.println("Initializing width of column " + i + ". " + "headerWidth = " + headerWidth + "; cellWidth = " + cellWidth);
            }
            column.setPreferredWidth(Math.max(headerWidth, cellWidth));
        }
    }

    private void setUpSportColumn(JTable table, TableColumn sportColumn) {
        JComboBox comboBox = new JComboBox();
        comboBox.addItem("Snowboarding");
        comboBox.addItem("Rowing");
        comboBox.addItem("Knitting");
        comboBox.addItem("Speed reading");
        comboBox.addItem("Pool");
        comboBox.addItem("None of the above");
        sportColumn.setCellEditor(new DefaultCellEditor(comboBox));
        DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();
        renderer.setToolTipText("Click for combo box");
        sportColumn.setCellRenderer(renderer);
    }

    private class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private String[] columnNames = {"First Name", "Last Name", "Sport", "# of Years", "Vegetarian"};
        private Object[][] data = {
            {"Kathy", "Smith", "Snowboarding", new Integer(5), false},
            {"John", "Doe", "Rowing", new Integer(3), true},
            {"Sue", "Black", "Knitting", new Integer(2), false},
            {"Jane", "White", "Speed reading", new Integer(20), true},
            {"Joe", "Brown", "Pool", new Integer(10), false}
        };
        public final Object[] longValues = {"Jane", "Kathy", "None of the above", new Integer(20), Boolean.TRUE};

        public int getColumnCount() {
            return columnNames.length;
        }

        public int getRowCount() {
            return data.length;
        }

        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }

        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        @Override
        public Class<?> getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        @Override
        public boolean isCellEditable(int row, int col) {
            if (col < 2) {
                return false;
            } else {
                return true;
            }
        }

        @Override
        public void setValueAt(Object value, int row, int col) {
            data[row][col] = value;
            fireTableCellUpdated(row, col);
            System.out.println(getValueAt(row, col));
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableRenderDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        TableRenderDemo newContentPane = new TableRenderDemo();
        newContentPane.setOpaque(true); //content panes must be opaque
        frame.setContentPane(newContentPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

的输出`AbstractTableModel`，代码行`135th.`

```
run:
None of the above
None of the above
None of the above
None of the above
None of the above
BUILD SUCCESSFUL (total time: 37 seconds) 
```

# python - 根据选择检查表格视图中的复选框

> ID：12297463
> 
> 赞同：1
> 
> 时间：2012-09-06T09:56:21.357
> 
> 标签：python, qt, pyqt

我已经实现了一个基于`QAbstractItemModel`. ttble 中的第一列包含一个复选框。启用行的选择。我正在尝试实现以下行为：如果我单击行，我希望第一列中的复选框被选中或取消选中。我怎样才能做到这一点？它仅在我单击复选框时才有效，因为触发了`setData()`with `QtCore.Qt.CheckStateRole`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:43:51.370

一种方法是听[QAbstractItemView的](http://qt-project.org/doc/qt-4.8/qabstractitemview.html)[按下](http://qt-project.org/doc/qt-4.8/qabstractitemview.html#pressed)信号。您收到的 QModelIndex 具有按下鼠标按钮的行，您可以将复选框设置为自己选中。

# php - 将表行中的数据映射到 Doctrine2 对象中的属性

> ID：12297464
> 
> 赞同：1
> 
> 时间：2012-09-06T09:56:24.213
> 
> 标签：php, hibernate, doctrine-orm

我们目前正在考虑将 php 中的数据库代码迁移到 Doctrine2。在我们看来，我们想做的大部分事情都可以通过 Doctrine2 实现。只有一件事我们不确定它是否可能以及我们应该如何做到这一点。我们的数据库模型现在无法更改，因为另一个项目正在使用相同的数据库。我们一次只能改变一件事。当然，我们也很好奇如何改进数据库模型，但这不是我们主要关心的问题。

问题是这样的。我们有一个包含基本产品信息的产品表，如下所示：

```
[product_id | code         | name          | description              | price]
 4            AS84GD         Steel brush    Strong steel brush.....     25.50
 28           HDD21N         Sand paper     Sand paper for wood.....     0.40 
```

ETC

我们的产品有不同的用户，他们都有不同的额外产品属性。所以我们有一个 product_extra_field 表，看起来像这样：

```
[extra_field_id | name]
 3                weight
 4                color
 9                supplier 
```

最后是带有额外数据 product_extra_field_data 的表

```
[product_id | extra_field_id | value]
 4            3                280
 4            4                brown
 4            9                company_x
 28           3                3
 28           4                yellow
 28           9                company_y 
```

我们如何纠正必要的 Doctrine2 代码以在一个对象中获取这些数据，以便我们可以拥有这样的对象？

```
[Product]
Id : 4
Code : AS84GD
Name : Steel brush
Description : Strong steel brush.....
Price : 25.50
Weight : 280
Color : brown
Supplier : company_x 
```

我为 Hibernate 添加了一个标签，因为我可以阅读 (N)Hibernate 代码并将这些想法转换为 Doctrine2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:02:19.783

您可以创建几个类： - Product - ExtraField - ExtraFieldValue

具有以下关系：一个产品有许多 ExtraFields（一对多关系），一个 ExtraField 有许多 ExtraFieldValues（一对多关系），考虑您的数据库结构。

然后您必须自定义您的 getter/setter 以仅获得集合的第一个结果（如果实际上您的关系是一对一的）...

不知道我说得够不够清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:17:10.240

到目前为止，我认为您无法使用[映射的超类](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html)来实现这一点。

但是，您可以在学说结果集映射中使用本机 SQL：

[http://docs.doctrine-project.org/en/latest/reference/native-sql.html](http://docs.doctrine-project.org/en/latest/reference/native-sql.html)

这些是对象和关系数据之间映射时的缺点之一，我的意思是，如果你真的只想要一个实体而不是从数据库中复制关系。

# iphone - 如何在不挤压背景图像的情况下扩展 UIButton 的 hitTest 区域？

> ID：12297467
> 
> 赞同：4
> 
> 时间：2012-09-06T09:56:28.820
> 
> 标签：iphone, objective-c, ios, uibutton

我已经设置了`UIButton`背景图片并在上面加上了一个标题（我使用了`setBackgroundImage`not 方法`setImage`）。现在我想扩大 a 的 hitTest 区域`UIButton`而不挤压它的背景图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-24T07:18:47.043

一种更简洁的方法是覆盖 pointInside。

这是一个 Swift 版本：

```
override func pointInside(point: CGPoint, withEvent event: UIEvent?) -> Bool {
    let expandedBounds = CGRectInset(self.bounds, -15, -15)
    return CGRectContainsPoint(expandedBounds, point)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-12T13:36:55.457

这是已接受答案的更正版本。我们使用`bounds`代替`frame`和`CGRectInset`代替`CGRectMake`。更清洁，更可靠。

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    return CGRectContainsPoint([self expandedBounds], point) ? self : nil;
}

- (CGRect)expandedBounds {
    return CGRectInset(self.bounds, -20, -20);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-21T01:51:26.107

此版本允许您定义所有 UIButtons 的最小点击大小。至关重要的是，它还可以处理隐藏 UIButtons 的情况，许多答案都忽略了这一点。

```
extension UIButton {
    public override func hitTest(point: CGPoint, withEvent event: UIEvent?) -> UIView? {
        // Ignore if button hidden
        if self.hidden {
            return nil
        }

        // If here, button visible so expand hit area
        let hitSize = CGFloat(56.0)
        let buttonSize = self.frame.size
        let widthToAdd = (hitSize - buttonSize.width > 0) ? hitSize - buttonSize.width : 0
        let heightToAdd = (hitSize - buttonSize.height > 0) ? hitSize - buttonSize.height : 0
        let largerFrame = CGRect(x: 0-(widthToAdd/2), y: 0-(heightToAdd/2), width: buttonSize.width+widthToAdd, height: buttonSize.height+heightToAdd)
        return (CGRectContainsPoint(largerFrame, point)) ? self : nil
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T10:14:43.897

好吧，你可以扩展 UIButton 并覆盖 UIView 的 hitTest 方法：

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    int expandMargin = 20;
    CGRect extendedFrame = CGRectMake(0 - expandMargin , 0 - expandMargin , self.bounds.size.width + (expandMargin * 2) , self.bounds.size.height + (expandMargin * 2));
    return (CGRectContainsPoint(extendedFrame , point) == 1) ? self : nil;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-29T02:01:02.120

我为此目的制作了一个[图书馆](https://github.com/kgaidis/KGHitTestingViews)。

您可以选择使用类别，**无需子类化**：

```
@interface UIView (KGHitTesting)
- (void)setMinimumHitTestWidth:(CGFloat)width height:(CGFloat)height;
@end 
```

或者您可以继承您的 UIView 或 UIButton 并设置`minimumHitTestWidth`和/或`minimumHitTestHeight`. 然后，您的按钮命中测试区域将由这 2 个值表示。

就像其他解决方案一样，它使用该`- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event`方法。该方法在 iOS 执行命中测试时被调用。[这篇](http://smnh.me/hit-testing-in-ios/)博文很好地描述了 iOS 命中测试的工作原理。

[https://github.com/kgaidis/KGHitTestingViews](https://github.com/kgaidis/KGHitTestingViews)

```
@interface KGHitTestingButton : UIButton <KGHitTesting>

@property (nonatomic) CGFloat minimumHitTestHeight; 
@property (nonatomic) CGFloat minimumHitTestWidth;

@end 
```

您也可以只继承并使用 Interface Builder 而无需编写任何代码： ![在此处输入图像描述](../Images/747f63da30e48d7863c9e41618cfac12.png)

# c# - 分段长度前缀导致从缓冲区读取的下一个数据使用不正确的消息长度

> ID：12297468
> 
> 赞同：3
> 
> 时间：2012-09-06T09:56:33.213
> 
> 标签：c#, asynchronous, tcp, protocol-buffers

我是那些来这里寻找其他人提出的问题的答案的人之一，我想我自己也问过任何东西，但是在两天的搜索失败后，我决定是时候自己问一些问题了。所以这里...

我有一个使用**SocketAsyncEventArgs**用 C#、.NET 4、异步套接字编写的 TCP 服务器和客户端。我有一个以**长度为前缀的消息帧协议**。总的来说，一切都很好，但一个问题一直困扰着我。

情况是这样的（我以小数为例）：

假设服务器的发送缓冲区长度为 16 个字节。它发送一条**6 字节**长的消息，并在其前面加上**4 字节**长的前缀。总消息长度为 6+4= **10**。

客户端读取数据并接收 16 字节长度的缓冲区（是的 10 字节数据和 6 字节等于 0）。

接收到的缓冲区如下所示：**6 0 0 0 56 21 33 1 5 7 0 0 0 0 0 0**

所以我读了前 4 个字节，这是我的长度前缀，我确定我的消息是 6 个字节长，我也读了它，到目前为止一切都很好。然后我还有 16-10 = **6 个字节**要读取。所有这些都是零，我读了其中的 4 个，因为这是我的长度前缀。所以这是一个零长度的消息，允许作为**keep-alive packet**。

剩余要读取的数据：**0 0**

现在问题“开始”了。我只有**2 个剩余字节要读取**，它们不足以完成一个**4 字节**长的前缀缓冲区。所以我读取了这 2 个字节，并等待更多的传入数据。现在服务器不知道我仍在读取长度前缀（我只是读取缓冲区中的所有零）并发送另一条正确前缀为 4 个字节的消息。并且客户端假设服务器发送那些丢失的 2 个字节。我在客户端接收数据，并读取前两个字节以形成一个完整的 4 字节长度缓冲区。结果是这样的

lengthBuffer = 新字节[4]{ **0, 0, 42, 0** }

然后转换为**2752512**消息长度。所以我的代码将继续读取接下来的**2752512**个字节来完成消息......

因此，在每个消息框架示例中，我都看到零长度消息被支持为保持活动状态。我看到的每个例子都没有比我做的更多。问题是当我从服务器接收数据时，我不知道我必须读取多少数据。由于我有部分填充为零的缓冲区，因此我必须将其全部读取，因为这些零可能是我从连接的另一端发送的保持活动状态。

我可以在第一条空消息后删除零长度消息并停止读取缓冲区，它应该可以解决这个问题，并为我的保持活动机制使用自定义消息。但我想知道我是否遗漏了什么，或者做错了什么，因为我看到的每个代码示例似乎都有同样的问题（？）

**更新**

Marc Gravell，你先生从我嘴里说出来的话。即将更新问题在于发送数据。问题是，最初在探索 .NET 套接字和 SocketAsyncEventArgs 时，我遇到了这个示例： http: [//archive.msdn.microsoft.com/nclsamples/Wiki/View.aspx? title=socket%20performance](http://archive.msdn.microsoft.com/nclsamples/Wiki/View.aspx?title=socket%20performance) 它使用可重用的缓冲区池。只需采用预定义的允许的最大客户端连接数，例如 10，采用最大单个缓冲区大小，例如 512，并为所有这些连接创建一个大缓冲区。所以 512 * 10 * 2 (发送和接收) = 10240 所以我们有 byte[] buff = new byte[10240]; 然后为每个连接的客户端分配一块这个大缓冲区。第一个连接的客户端获得前 512 个字节用于数据读取操作，并获得接下来的 512 个字节（偏移量 512）用于数据发送操作。因此，代码最终已经分配了大小为 512 的发送缓冲区（恰好是客户端稍后接收为 BytesTransferred 的数字）。该缓冲区填充了数据，并且这 512 个字节中的所有剩余空间都作为零发送。

奇怪的是这个例子来自 msdn。存在单个巨大缓冲区的原因是为了避免碎片堆内存，当缓冲区被固定并且 GC 无法收集它或类似情况时。

在提供的示例中来自 BufferManager.cs 的评论（参见上面的链接）：

> 此类创建一个单独的大缓冲区，可以将其划分并分配给 SocketAsyncEventArgs 对象，以供每个套接字 I/O 操作使用。这使得缓冲区可以很容易地重用，并防止堆内存碎片化。

所以这个问题已经很清楚了。欢迎任何关于我应该如何解决这个问题的建议:) 他们所说的关于碎片堆内存的说法是否属实，“动态”创建数据缓冲区是否可以？如果是这样，当服务器扩展到数百甚至数千个客户端时，我是否会出现内存问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:04:51.457

我想问题是您将读取的缓冲区中的尾随零视为数据。这不是数据。这是垃圾。从来没有人寄给你。

该`Stream.Read`调用返回实际读取的字节数。您不应以任何方式解释缓冲区的其余部分。

> 问题是当我从服务器接收数据时，我不知道我必须读取多少数据。

是的，你这样做：使用来自`Stream.Read`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:49:56.207

这听起来就像您的发送或接收代码中的错误。您应该**只**获取`BytesTransferred`实际发送的数据，或者如果以片段的形式到达，则该数字小于该数据。我想知道的第一件事是：您是否正确设置了*发送*？即，如果您有一个过大的缓冲区，正确的实现可能如下所示：

```
args.SetBuffer(buffer, 0, actualBytesToSend);
if (!socket.SendAsync(args)) { /* whatever */ } 
```

哪里`actualBytesToSend`可以远小于`buffer.Length`。我最初的怀疑是你正在做类似的事情：

```
args.SetBuffer(buffer, 0, buffer.Length); 
```

因此发送的数据比您实际填充的数据多。

我应该强调：您的发送或接收有问题；我不相信，至少没有一个例子，这里的 BCL 中有一些基本的潜在错误 - 我广泛使用异步 API，它工作正常 - 但您*确实*需要准确跟踪您发送和接收的数据所有点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:05:20.833

> “现在服务器不知道我仍在读取长度前缀（我只是读取缓冲区中的所有那些零）并发送另一条正确前缀为 4 个字节的消息。”。

为什么？服务器如何知道你在读什么，没有读到什么？如果服务器重新传输消息的任何部分，则它是错误的。TCP 已经为您做到了。

您的服务器似乎有一些根本性的问题。

# html - Activating HTML with Haskell

> ID：12297471
> 
> 赞同：2
> 
> 时间：2012-09-06T09:56:48.190
> 
> 标签：html, web-applications, haskell

I have a large pile of lecture notes in raw HTML format. I would like to add interactive content to these notes, in particular incorporating online exercises. I have some experience implementing online exercises as cgi-bin executables compiled from Haskell code running on the server, interacting with a student record file and sending suitable HTML back to the browser, using `Text.Xhtml` to generate the content. Now I plan to integrate the notes and the exercises.

The trouble is that I don't want to spend ages manually transforming my raw HTML into Haskell code to generate exactly the raw HTML I started with. Instead, I'd like to put my Haskell code and my HTML in the same source file, with placeholders in the latter for content generated by the former. A suitable tool should then transform this file into Haskell source code for (e.g.) a cgi-bin executable which generates the corresponding page.

Before I go hacking up such a piece of kit, I thought I'd ask if there's better technology out there already. The fixed points are the large legacy lump of HTML, the need to implement the assessment of the exercises in Haskell, and the need to interact with student records on the server. The handicap is that I need to use the departmental web server and I can't reconfigure it (ok, maybe I could ask nicely): that's one of the reasons I currently use cgi-bin executables, which are just fine on our server already, but I'm open to other possibilities.

My current plan is to write a (I mean adapt an existing) preprocessor to support a special syntax for defining functions of type

```
Html -> ... -> Html -> Html 
```

that looks a lot like raw HTML with splice points. Then what I do with my existing raw HTML is indent it a bit and mark the holes.

But would that be a waste of time? Please, please tell me that this question is a duplicate!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:09:18.550

有像 Yesod 和 Happstack 这样的 Haskell 框架，它们使用你描述的模板引擎。

您是否查看过[http://www.haskell.org/haskellwiki/HSP](http://www.haskell.org/haskellwiki/HSP)或 [http://www.haskell.org/haskellwiki/Web/Libraries/Templating](http://www.haskell.org/haskellwiki/Web/Libraries/Templating)上的 haskell wiki ？

他们可能会做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T03:27:44.860

> 我有一大堆原始 HTML 格式的讲义。我想在这些笔记中添加互动内容，特别是结合在线练习。

已经有一个用 Haskell 编写的系统（称为“ActiveHs”），允许将讲义和交互式练习放在一个文件中。

见： http:
[//pnyf.inf.elte.hu/fp/UsersGuide_en.xml](http://pnyf.inf.elte.hu/fp/UsersGuide_en.xml)
[http://pnyf.inf.elte.hu/fp/Constructive_en.xml](http://pnyf.inf.elte.hu/fp/Constructive_en.xml)

我真的可以说它的代码写得非常好并且完全开源！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:13:30.397

你可能会在这里找到一些可以完成工作的东西：Templating [packages for Haskell](https://stackoverflow.com/questions/5770168/templating-packages-for-haskell)。

您可能应该考虑使用 Snap、Yesod 或 Happstack 来提供内容。

# javascript - Javascript 代码无法正常工作

> ID：12297473
> 
> 赞同：0
> 
> 时间：2012-09-06T09:56:53.980
> 
> 标签：javascript, asp.net-mvc-3, internet-explorer, firefox

我正在尝试 2 天将这 2 个代码合并为 1 ，因为一个在 IE 中完美运行，另一个在 FF 和 Chrome 中完美运行。那么我怎样才能将它们合并为1？这是在 IE 中工作的代码，但在 FF 中没有：

……

```
 if (i < rowCount - 1) {
            detRez += dataTable.rows[i].cells[1].firstChild.value + "^";
            detRez += dataTable.rows[i].cells[2].firstChild.value + "%";
            //This working with FF
            //detRez += dataTable.rows[i].cells[1].childNodes[1].value + "^";
            //detRez += dataTable.rows[i].cells[2].childNodes[1].value + "%";
        }
        else {
            detRez += dataTable.rows[i].cells[1].firstChild.value + "^";
            detRez += dataTable.rows[i].cells[2].firstChild.value;
                //This working with FF
                //detRez += dataTable.rows[i].cells[1].childNodes[1].value + "^";
                //detRez += dataTable.rows[i].cells[2].childNodes[1].value;

            }
            }
..... 
```

在 FF 中有效但在 IE 中无效的那个在该行前面有 //

我在 FF 中没有错误（如果我测试 IE 代码），只是字符串没有正确构建并且看起来像这样： undefined^undefined%undefined^undefined 而不是 MyText^.....

任何想法如何合并这两个代码以在 IE 和 FF 中工作？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:14:17.857

Firefox 和 Internet Explorer 处理子节点的方式不同。Firefox 使用 DOM 兼容模式并计算标签之间的间隙等。Internet Explorer 只计算其中一些（因此两者之间存在不一致）。

You should consider using `getElementsByTagName()` instead of `childNodes[]`.

# sql-server - 如何找到 SQL Server 运行端口？

> ID：12297475
> 
> 赞同：105
> 
> 时间：2012-09-06T09:57:08.050
> 
> 标签：sql-server, sql-server-2008, connection-string

是的，我读过这篇[如何找到 MS SQL Server 2008 的端口？](https://stackoverflow.com/questions/1518823/how-to-find-the-port-for-ms-sql-server-2008)

没运气。

> 远程登录 1433

返回连接失败，所以我必须指定其他端口。

我试着用

> 网络统计 -abn

但我在这个列表中没有看到 sqlservr.exe 或类似的东西。

为什么这么难找到那个港口？：/

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-09-06T10:04:09.820

试试这个：

```
USE master
GO
xp_readerrorlog 0, 1, N'Server is listening on' 
GO 
```

[http://www.mssqltips.com/sqlservertip/2495/identify-sql-server-tcp-ip-port-being-used/](http://www.mssqltips.com/sqlservertip/2495/identify-sql-server-tcp-ip-port-being-used/)

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2013-06-19T10:06:04.733

非常简单。记下来自 taskmanager 的 sqlsrvr.exe PID，然后运行以下命令：

```
netstat -ano | findstr *PID* 
```

它将显示您的 SQL 服务器（包括端口）的 TCP 和 UDP 连接标准是 TCP 的 1433 和 UDP 的 1434

例子 ： ![在此处输入图像描述](../Images/8ec263ac1e91b7a54d0864cbcd19110c.png)

* * *

## 回答 #3

> 赞同：70
> 
> 时间：2014-02-05T19:14:25.020

这是对我有用的一个：

```
SELECT DISTINCT 
    local_tcp_port 
FROM sys.dm_exec_connections 
WHERE local_tcp_port IS NOT NULL 
```

* * *

## 回答 #4

> 赞同：52
> 
> 时间：2015-08-03T15:06:59.913

如果您可以启动 Sql Server 配置管理器 > SQL Server 网络配置 > 您的实例 > TCP/IP > 属性

[![在此处输入图像描述](../Images/e1f9bacadb566742fb530e0511d477e8.png)](https://i.stack.imgur.com/B6Y7J.png)

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-03-11T02:29:50.650

如果您已运行“netstat -a -b -n”（从提升的命令提示符）并且根本看不到“sqlservr.exe”，那么您的 SQL Server 服务未运行或其 TCP/IP 网络库正在运行禁用。

运行 SQL Server 配置管理器（开始 | 所有程序 | Microsoft SQL Server 2008 | 配置工具）。

导航到 SQL Server 服务。在右侧窗格中查找 SQL Server ()。它停止了吗？如果是这样，请启动它。

导航到 SQL Server 网络配置（或适当的 SQL Server 网络配置（32 位）），然后导航到 . 在右侧窗格中查找“TCP/IP”。它被禁用了吗？如果是这样，请启用它，然后重新启动 SQL Server 服务。

请注意，默认实例的实例 ID 将为 MSSQLSERVER。

另请注意，您不必启用 TCP/IP 网络库即可将客户端连接到服务。客户端还可以通过共享内存网络库（如果客户端在同一台机器上）或命名管道网络库进行连接。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-09-06T10:02:29.160

也许它没有使用 TCP/IP

查看 SQL Server 配置管理器以了解它使用的协议。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-09-05T17:22:42.683

这是我使用的另一个脚本：

```
-- Find Database Port script by Jim Pierce  09/05/2018

USE [master]
GO

DECLARE @DynamicportNo NVARCHAR(10);
DECLARE @StaticportNo NVARCHAR(10);
DECLARE @ConnectionportNo INT;

-- Look at the port for the current connection
SELECT @ConnectionportNo = [local_tcp_port]
 FROM sys.dm_exec_connections
    WHERE session_id = @@spid;

-- Look for the port being used in the server's registry
EXEC xp_instance_regread @rootkey = 'HKEY_LOCAL_MACHINE'
                        ,@key =
                         'Software\Microsoft\Microsoft SQL Server\MSSQLServer\SuperSocketNetLib\Tcp\IpAll'
                        ,@value_name = 'TcpDynamicPorts'
                        ,@value = @DynamicportNo OUTPUT

EXEC xp_instance_regread @rootkey = 'HKEY_LOCAL_MACHINE'
                        ,@key =
                         'Software\Microsoft\Microsoft SQL Server\MSSQLServer\SuperSocketNetLib\Tcp\IpAll'
                        ,@value_name = 'TcpPort'
                        ,@value = @StaticportNo OUTPUT

SELECT [PortsUsedByThisConnection] = @ConnectionportNo
      ,[ServerStaticPortNumber] = @StaticportNo
      ,[ServerDynamicPortNumber] = @DynamicportNo
GO 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-08-09T14:23:21.843

在我们的企业中，我无法访问 MSSQL Server，因此我无法访问系统表。

对我有用的是：

1.  捕获网络流量`Wireshark`（以管理员身份运行，选择网络接口），同时打开与服务器的连接。
2.  找到ip地址`ping`
3.  过滤`ip.dst == x.x.x.x`

`info`端口在格式列中显示`src.port -> dst.port`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-07-06T12:08:52.793

尝试一次：-

```
USE master
DECLARE       @portNumber   NVARCHAR(10)
EXEC   xp_instance_regread
@rootkey    = 'HKEY_LOCAL_MACHINE',
@key        =
'Software\Microsoft\Microsoft SQL Server\MSSQLServer\SuperSocketNetLib\Tcp\IpAll',
@value_name = 'TcpDynamicPorts',
@value      = @portNumber OUTPUT
SELECT [Port Number] = @portNumber
GO 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2018-10-16T09:27:32.840

```
select * from sys.dm_tcp_listener_states 
```

更多： [https ://docs.microsoft.com/en-us/sql/relational-databases/system-dynamic-management-views/sys-dm-tcp-listener-states-transact-sql?view=sql-server -2017](https://docs.microsoft.com/en-us/sql/relational-databases/system-dynamic-management-views/sys-dm-tcp-listener-states-transact-sql?view=sql-server-2017)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-11-29T12:22:00.000

尝试通过以下方式启用协议： **配置管理器**> **SQL 服务器网络配置**> **MSSQLSERVER 的协议>** **TCP/IP**的属性

 *** * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-08T20:37:40.200

SQL Server 2000 程序 | 微软 SQL 服务器 | 客户端网络实用程序 | 选择 TCP_IP，然后选择属性

SQL Server 2005 程序 | SQL 服务器 | SQL Server 配置管理器 | 选择 MSSQLSERVER 的协议或选择客户端协议并右键单击 TCP/IP

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-03T16:53:17.083

如果您不想查看 SQL Server Management (sqlservermanager15.msc)，请在数据库中运行此查询，例如从 sqlcmd 或 ssms：

```
SELECT * FROM [sys].[dm_tcp_listener_states] 
```

| listener_id | IP地址 | is_ipv4 | 港口 | 类型 | type_desc | 状态 | state_desc | 开始时间 |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | ::1 | 错误的 | 1433 | 0 | TSQL | 0 | 在线的 | 2021-01-01 00:00:00.000000 |
| 2 | 127.0.0.1 | 真的 | 1433 | 0 | TSQL | 0 | 在线的 | 2021-01-01 00:00:00.000000 |

感谢@vladimir-bashutin 指出这一点。这是另一个：

```
SELECT [name]
  ,[protocol_desc]
  ,[type_desc]
  ,[state]
  ,[state_desc]
  ,[is_admin_endpoint]
FROM [master].[sys].[endpoints] 
```

| 姓名 | 协议描述 | type_desc | 状态 | state_desc | is_admin_endpoint |
| --- | --- | --- | --- | --- | --- |
| TSQL 本地机器 | SHARED_MEMORY | TSQL | 0 | 开始 | 错误的 |
| TSQL 命名管道 | NAMED_PIPES | TSQL | 0 | 开始 | 错误的 |
| TSQL 默认 TCP | TCP | TSQL | 0 | 开始 | 错误的 |
| TSQL 默认 VIA | 通过 | TSQL | 0 | 开始 | 错误的 |

所以现在你有了端口和协议。如果您无权访问这些系统表，请考虑使用 SSRP 客户端，例如[https://github.com/adzm/ssrpc](https://github.com/adzm/ssrpc)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-09-19T05:27:42.910

在 PowerShell 中，您可以使用它来查看您的实例正在使用的端口：

您可以更改`MSSQLSERVER`为您自己的实例名称。

```
$wmi = New-Object 'Microsoft.SqlServer.Management.Smo.Wmi.ManagedComputer' localhost
$tcp = $wmi.ServerInstances['MSSQLSERVER'].ServerProtocols['Tcp']
$ipAll = $tcp.IPAddresses | where { $_.Name -eq "IPAll" }
write-host ($ipAll.IPAddressProperties.value) 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-04-07T18:37:31.247

也许不是最好的选择，但另一种方法是读取主机中的 Windows 注册表，在提升的 PowerShell 提示符下，您可以执行以下操作：

```
#Get SQL instance's Port number using Windows Registry:
$instName = (Get-ItemProperty 'HKLM:\SOFTWARE\Microsoft\Microsoft SQL Server').InstalledInstances[0]
$tcpPort = (Get-ItemProperty "HKLM:\SOFTWARE\Microsoft\Microsoft SQL Server\$instName\MSSQLServer\SuperSocketNetLib\Tcp").TcpPort
Write-Host The SQL Instance:  `"$instName`"  is listening on `"$tcpPort`"  "TcpPort." 
```

[![在此处输入图像描述](../Images/8d6ee4378ed63fd1c0e7559d8ac81769.png)](https://i.stack.imgur.com/0rdFp.png) 确保在主机服务器（托管您的 SQL 实例/SQL Server 安装）中运行此 PowerShell 脚本，这意味着您必须首先 RDP 进入 SQL Server/Box/VM，然后运行此代码。

高温高压**

# c++ - Unit Testing with Boost and Eclipse

> ID：12297476
> 
> 赞同：1
> 
> 时间：2012-09-06T09:57:11.237
> 
> 标签：c++, eclipse, unit-testing, boost

I can't work out how to get unit testing to work with Boost and Eclipse. I get lots of *different* errors depending on where I put the source files.

Where are the tests supposed to go? (ie should I create a test folder in root, in src, no folder at all or what)

Do I need to specify something somewhere if I don't intend to have a main(), and just lots of tests?

I'm really confused, and I know I'm being quite lite on the details - hopefully you can show me the proper way to do Unit Testing with Boost in Eclipse rather than whatever I'm currently doing.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:08:51.890

在没有单元测试的情况下首先在 Eclipse 中正常编译您的应用程序。

之后，创建一个新项目并将其与您的应用程序一起引用到以前的项目。比你创建一个 main.cpp 并在那里插入你的单元测试。

您应该能够使用新项目中的其他项目类。因此，您可以实例化对象并执行您的断言或任何您喜欢的操作。如果您还有其他问题，请发布您的实际错误并提供您当前结构的屏幕截图。

# c++ - A change in eventFilter function causes weird QGraphicScene behavior

> ID：12297478
> 
> 赞同：1
> 
> 时间：2012-09-06T09:57:16.403
> 
> 标签：c++, qt, qgraphicsview, qgraphicsscene

I have a Qt program with a QGraphicScene inside a QGraphicsView on top of QMainWindow. The events are handled by the QMainWindow using an eventFilter function. The function body looks similar to this code:

```
bool Window::eventFilter(QObject *, QEvent *event) {
  QEvent::Type type = event->type();

  if (type == QEvent::KeyPress) {
    QKeyEvent *keyEvent = static_cast<QKeyEvent *>(event);

    switch(keyEvent->key()) {
    case Qt::Key_A:
    case Qt::Key_B:
    case Qt::Key_C:
    case Qt::Key_D:
      // call a function that uses the current mouse position on the graphics scene
      break;
    default:
      QLocale loc = QApplication::keyboardInputLocale();
      if(loc.language() != QLocale::English) {
        QString message = "A non-English key was pressed";
        showMessage(message, QMessageBox::Warning);
      }
    }

    return true;
  }

  return false;
} 
```

I recently added the "default" part and since then the coordinates that are used in the A,B,C,D cases are totally wrong. In addition, if I add a simple cout print anywhere in the function the bug disappears and the correct mouse coordinates are used.

What can possibly cause this?

# api - Rally Web 服务 API：从迭代中的特定日期获取分层需求

> ID：12297486
> 
> 赞同：2
> 
> 时间：2012-09-06T09:57:53.760
> 
> 标签：api, iteration, rally, user-stories

是否可以使用 Rally Web 服务 API 从迭代中的特定日期获取用户故事（分层需求）？我正在开发一个 java 应用程序，它将为迭代生成一个历史图表。例如，如果迭代为期 14 天，我需要获取该迭代中每一天的分层需求及其所有属性，例如：[day1,Hierarchical Requirements]、[day2,Hierarchical Requirements] 等等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:13:12.313

查看 WSAPI 中的 IterationCumulativeFlowData 对象。 [https://rally1.rallydev.com/slm/doc/webservice/](https://rally1.rallydev.com/slm/doc/webservice/)

这应该为您提供每天的项目总数及其待办事项/估计总数。

# android - 滚动线性框架

> ID：12297487
> 
> 赞同：0
> 
> 时间：2012-09-06T09:58:05.007
> 
> 标签：android, scroll, android-linearlayout

我正在开发包含 2 个线性框架的接口。我想为每一帧激活垂直滚动。

怎么做 ？

线性布局 xml 定义中是否有要添加的属性以激活滚动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:00:07.397

使用**ScrollView**而不是**LinearLayout**进行滚动。

[滚动视图示例。](http://www.curious-creature.org/2010/08/15/scrollviews-handy-trick/)

# javascript - 找不到语法错误，帮我看看

> ID：12297488
> 
> 赞同：0
> 
> 时间：2012-09-06T09:58:05.603
> 
> 标签：javascript

我得到这个： Uncaught SyntaxError: Unexpected end of input at the end of the tag 所以我错过了一个括号或其他东西，但是在哪里哦哪里？

这是我的javascript代码：

```
 <script type="text/javascript">

    var boxWidth = 133;
    var spaceBetween = 6;
    var stopScrolling = false;

    function addBoxToEnd() {

        var lastBox = $("div.property-carousel-box:last");
        var rightId = parseInt($(lastBox).attr("pageindex"), 10);
        var jsonUrl = '<%= Url.Action("NextProperty", "Carousel") %>/' + rightId;

        var itemLeft = (parseInt($(lastBox).css("left"), 10) * 1) + boxWidth + spaceBetween;
        $("div#property-carousel-box-container").append("<div class='property-carousel-box property-carousel-box-jquery' style='left: " + itemLeft + "px;'><div class='property-carousel-box-frame'></div></div>");

        $.getJSON(jsonUrl, function (data) {
          if (data != null) {
            var lastBox = $("div.property-carousel-box:last");
            $(lastBox).css("background", "url('" + data.ImageUrl + "') no-repeat");
            $("div.property-carousel-box:last > div.property-carousel-box-frame:first").append(data.Location + "<br />" + data.Rent);
            $(lastBox).attr("propertyid", data.PropertyId);
            $(lastBox).attr("pageindex", data.Page);
            $(lastBox).click(function () {
              location.href = '<%= Url.Action("Details", "Properties") %>/' + data.PropertyId;
            });

    }

    function addBoxToStart() {

        var firstBox = $("div.property-carousel-box:first");
        var leftId = parseInt($(firstBox).attr("pageindex"), 10);
        var jsonUrl = '<%= Url.Action("PreviousProperty", "Carousel") %>/' + leftId;

        var itemLeft = (parseInt($(firstBox).css("left"), 10) * 1) - boxWidth - spaceBetween;
        $("div#property-carousel-box-container").prepend("<div class='property-carousel-box property-carousel-box-jquery' style='left: " + itemLeft + "px;'><div class='property-carousel-box-frame'></div></div>");

        $.getJSON(jsonUrl, function(data) {
            if (data != null) {
                firstBox = $("div.property-carousel-box:first");
                $(firstBox).css("background", "url('" + data.ImageUrl + "') no-repeat");
                $("div.property-carousel-box:first > div.property-carousel-box-frame:first").append(data.Location + "<br />" + data.Rent);
                $(firstBox).attr("propertyid", data.PropertyId);
                $(firstBox).attr("pageindex", data.Page);
                $(firstBox).click(function() {
                  location.href = '<%= Url.Action("Details", "Properties") %>/' + data.PropertyId; 
            });
    }

    function scrollLeft() {
        // Add new box at the start
        addBoxToStart();

        $("div.property-carousel-box").each(function() {
            $(this).animate({ left: '+=' + (boxWidth + spaceBetween) }, 250);
        });

        // Now remove the box at the end
        $("div.property-carousel-box:last").remove();
    }

    function scrollRight() {
        // Add new box at the end
        addBoxToEnd();

        $("div.property-carousel-box").each(function() {
            $(this).animate({ left: '-=' + (boxWidth + spaceBetween) }, 250);
        });

        // Now remove the box at the start
        $("div.property-carousel-box:first").remove();
    }

    $(document).ready(function() {

        $("a#property-scroll-left").addClass("property-scroll-left-link");
        $("a#property-scroll-right").addClass("property-scroll-right-link");
        $("div#property-carousel-box-container").removeClass("property-carousel-box-container").addClass("property-carousel-box-container-jquery");
        $("div.property-carousel-box").addClass("property-carousel-box-jquery");

        var i = 0;
        $("div.property-carousel-box").each(function() {
            $(this).css('left', function() {
                var leftPos = (i * boxWidth) + (spaceBetween * (i + 1));
                return leftPos + 'px';
            });

            var propId = parseInt($(this).attr('propertyid'), 10);
            $(this).click(function() {
                location.href = '<%= Url.Action("Details", "Properties") %>/' + propId;
            });

            i++;
        });

        // Add an extra box at the start and end to have some time to load the new images
        // before they are moved into view.
        addBoxToEnd();
        addBoxToStart();

        $("a#property-scroll-left").click(function() {
            stopScrolling = true;
            scrollLeft();
            return false;
        });

        $("a#property-scroll-right").click(function() {
            stopScrolling = true;
            scrollRight();
            return false;
        });

        // Start the timer that performs the automatic scrolling
        $.timer(3000, function() {
            if (!stopScrolling)
                scrollRight();
            else {
                try {
                    timer.stop();
                } catch (Error) {
                    // Do nothing here...not sure why, but the timer plugin is still
                    // calling the timer.stop() command after the timer has been set to null.
                    // Not our code, so can't fix it.
                }
            }
        });
    });

</script> 
```

我在哪里缺少括号？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:05:43.733

注意您的功能，`$.getJSON`它们缺少`}`和`if (data != null)`，`});`所以`$.getJSON`

```
 var boxWidth = 133;
    var spaceBetween = 6;
    var stopScrolling = false;

    function addBoxToEnd() {

        var lastBox = $("div.property-carousel-box:last");
        var rightId = parseInt($(lastBox).attr("pageindex"), 10);
        var jsonUrl = '<%= Url.Action("NextProperty", "Carousel") %>/' + rightId;

        var itemLeft = (parseInt($(lastBox).css("left"), 10) * 1) + boxWidth + spaceBetween;
        $("div#property-carousel-box-container").append("<div class='property-carousel-box property-carousel-box-jquery' style='left: " + itemLeft + "px;'><div class='property-carousel-box-frame'></div></div>");

        $.getJSON(jsonUrl, function (data) {
            if (data != null) {
                var lastBox = $("div.property-carousel-box:last");
                $(lastBox).css("background", "url('" + data.ImageUrl + "') no-repeat");
                $("div.property-carousel-box:last > div.property-carousel-box-frame:first").append(data.Location + "<br />" + data.Rent);
                $(lastBox).attr("propertyid", data.PropertyId);
                $(lastBox).attr("pageindex", data.Page);
                $(lastBox).click(function () {
                    location.href = '<%= Url.Action("Details", "Properties") %>/' + data.PropertyId;
                });
            }
        });
    }

    function addBoxToStart() {

        var firstBox = $("div.property-carousel-box:first");
        var leftId = parseInt($(firstBox).attr("pageindex"), 10);
        var jsonUrl = '<%= Url.Action("PreviousProperty", "Carousel") %>/' + leftId;

        var itemLeft = (parseInt($(firstBox).css("left"), 10) * 1) - boxWidth - spaceBetween;
        $("div#property-carousel-box-container").prepend("<div class='property-carousel-box property-carousel-box-jquery' style='left: " + itemLeft + "px;'><div class='property-carousel-box-frame'></div></div>");

        $.getJSON(jsonUrl, function(data) {
            if (data != null) {
                firstBox = $("div.property-carousel-box:first");
                $(firstBox).css("background", "url('" + data.ImageUrl + "') no-repeat");
                $("div.property-carousel-box:first > div.property-carousel-box-frame:first").append(data.Location + "<br />" + data.Rent);
                $(firstBox).attr("propertyid", data.PropertyId);
                $(firstBox).attr("pageindex", data.Page);
                $(firstBox).click(function() {
                  location.href = '<%= Url.Action("Details", "Properties") %>/' + data.PropertyId;
                });
            }
        });
    }

    function scrollLeft() {
        // Add new box at the start
        addBoxToStart();

        $("div.property-carousel-box").each(function() {
            $(this).animate({ left: '+=' + (boxWidth + spaceBetween) }, 250);
        });

        // Now remove the box at the end
        $("div.property-carousel-box:last").remove();
    }

    function scrollRight() {
        // Add new box at the end
        addBoxToEnd();

        $("div.property-carousel-box").each(function() {
            $(this).animate({ left: '-=' + (boxWidth + spaceBetween) }, 250);
        });

        // Now remove the box at the start
        $("div.property-carousel-box:first").remove();
    }

    $(document).ready(function() {

        $("a#property-scroll-left").addClass("property-scroll-left-link");
        $("a#property-scroll-right").addClass("property-scroll-right-link");
        $("div#property-carousel-box-container").removeClass("property-carousel-box-container").addClass("property-carousel-box-container-jquery");
        $("div.property-carousel-box").addClass("property-carousel-box-jquery");

        var i = 0;
        $("div.property-carousel-box").each(function() {
            $(this).css('left', function() {
                var leftPos = (i * boxWidth) + (spaceBetween * (i + 1));
                return leftPos + 'px';
            });

            var propId = parseInt($(this).attr('propertyid'), 10);
            $(this).click(function() {
                location.href = '<%= Url.Action("Details", "Properties") %>/' + propId;
            });

            i++;
        });

        // Add an extra box at the start and end to have some time to load the new images
        // before they are moved into view.
        addBoxToEnd();
        addBoxToStart();

        $("a#property-scroll-left").click(function() {
            stopScrolling = true;
            scrollLeft();
            return false;
        });

        $("a#property-scroll-right").click(function() {
            stopScrolling = true;
            scrollRight();
            return false;
        });

        // Start the timer that performs the automatic scrolling
        $.timer(3000, function() {
            if (!stopScrolling)
                scrollRight();
            else {
                try {
                    timer.stop();
                } catch (Error) {
                    // Do nothing here...not sure why, but the timer plugin is still
                    // calling the timer.stop() command after the timer has been set to null.
                    // Not our code, so can't fix it.
                }
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:06:54.007

您缺少函数调用和`closing bracket` `}`函数调用。`if condition``closing bracket, closing parenthesis and semicolon` `});``$.getJSON`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:03:52.530

在前两个函数中的每一个中，都缺少两个右括号。在这种情况下，请使用 Notepad++ 之类的编辑器或具有语法突出显示功能的 IDE，并在您标记其中一个以查找缺少的位置时显示相应的括号。这应该这样做：

```
function addBoxToEnd() {

        var lastBox = $("div.property-carousel-box:last");
        var rightId = parseInt($(lastBox).attr("pageindex"), 10);
        var jsonUrl = '<%= Url.Action("NextProperty", "Carousel") %>/' + rightId;

        var itemLeft = (parseInt($(lastBox).css("left"), 10) * 1) + boxWidth + spaceBetween;
        $("div#property-carousel-box-container").append("<div class='property-carousel-box property-carousel-box-jquery' style='left: " + itemLeft + "px;'><div class='property-carousel-box-frame'></div></div>");

        $.getJSON(jsonUrl, function (data) {
          if (data != null) {
            var lastBox = $("div.property-carousel-box:last");
            $(lastBox).css("background", "url('" + data.ImageUrl + "') no-repeat");
            $("div.property-carousel-box:last > div.property-carousel-box-frame:first").append(data.Location + "<br />" + data.Rent);
            $(lastBox).attr("propertyid", data.PropertyId);
            $(lastBox).attr("pageindex", data.Page);
            $(lastBox).click(function () {
              location.href = '<%= Url.Action("Details", "Properties") %>/' + data.PropertyId;
            });
          }
        }
    }

    function addBoxToStart() {

        var firstBox = $("div.property-carousel-box:first");
        var leftId = parseInt($(firstBox).attr("pageindex"), 10);
        var jsonUrl = '<%= Url.Action("PreviousProperty", "Carousel") %>/' + leftId;

        var itemLeft = (parseInt($(firstBox).css("left"), 10) * 1) - boxWidth - spaceBetween;
        $("div#property-carousel-box-container").prepend("<div class='property-carousel-box property-carousel-box-jquery' style='left: " + itemLeft + "px;'><div class='property-carousel-box-frame'></div></div>");

        $.getJSON(jsonUrl, function(data) {
            if (data != null) {
                firstBox = $("div.property-carousel-box:first");
                $(firstBox).css("background", "url('" + data.ImageUrl + "') no-repeat");
                $("div.property-carousel-box:first > div.property-carousel-box-frame:first").append(data.Location + "<br />" + data.Rent);
                $(firstBox).attr("propertyid", data.PropertyId);
                $(firstBox).attr("pageindex", data.Page);
                $(firstBox).click(function() {
                  location.href = '<%= Url.Action("Details", "Properties") %>/' + data.PropertyId; 
                });
            }
        }
    } 
```

# android - 设置底部 ActionBar 菜单项的文本颜色

> ID：12297489
> 
> 赞同：1
> 
> 时间：2012-09-06T09:58:09.493
> 
> 标签：android, android-actionbar

ActionBar 菜单项的文本颜色可以用`android:actionMenuTextColor`. 是否可以为底部（也称为“拆分”）ActionBar 设置特定颜色？

# android - 将 TabActivity 转换为片段选项卡

> ID：12297490
> 
> 赞同：1
> 
> 时间：2012-09-06T09:58:11.103
> 
> 标签：android, android-fragments

我已经`TabActivity`在我的项目中实现了，但现在它已被弃用，所以我想将其转换为使用片段的选项卡。谁能提供一个示例来解释将不推荐使用的转换`TabActivity`为`Fragments`.

编辑：我能够转换`TabActivity`为`FragmentTab`s。但是将每个选项卡包含的活动转换为`Fragment`是一个巨大的挑战。在转换`activity`为`Fragment`.

# html - 生成 html 文件时，为什么图像比例在 reStructuredText 中不起作用？

> ID：12297493
> 
> 赞同：5
> 
> 时间：2012-09-06T09:58:23.810
> 
> 标签：html, web, jekyll, restructuredtext

我使用 reStructuredText 来生成我的静态博客网页。我使用下面的命令来包含图像：

```
.. image:: /images/01.jpg
   :scale: 50
   :align: center 
```

但是，我的博客网页上显示的图像与原始图像的大小保持不变。似乎该`scale`选项不起作用。那么，如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T19:03:26.907

为了使`scale`选项起作用，生成器需要知道图像的大小。因此，您要么需要使用`width`and明确定义尺寸`height`（嗯，这不是我们正在寻找的解决方案），要么您需要安装[Python Imaging Library](http://www.pythonware.com/products/pil/)以让转换器自动识别图像尺寸。

参考：[reStructuredText 规范](http://docutils.sourceforge.net/docs/ref/rst/directives.html#image)。

# javascript - WebIDL：生成 HTML5 文档

> ID：12297494
> 
> 赞同：2
> 
> 时间：2012-09-06T09:58:24.623
> 
> 标签：javascript, w3c

我正在寻找生成 Javascript API 的规范（不是 w3c）。如果我为 Javascript API 创建 webidl，是否有可以从中生成 HTML 或 PDF 文档的工具？我查看了 Respec.js。然而，这是特定于 W3C 的。有没有其他工具可以使用 WebIDL 并为 Javascript 生成文档？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:09:27.267

WebIDL 到 PDF 转换器是一种稀有品种，但它当然可以编写一个。

其中最大的部分可能是解析器。幸运的是，它有一些实现：

*   [Mozilla WebIDL 解析器](http://mxr.mozilla.org/mozilla-central/source/dom/bindings/parser/WebIDL.py)，用 Python 编写。
*   [用于 Javascript 的 WebIDL 解析器](https://github.com/darobin/webidl.js)，用 Javascript 编写。

唯一缺少的是 PDF 输出。

# eclipse - 使用 CFI 将 Spring 应用程序部署到 MCF 失败，与 vmc 一起使用

> ID：12297495
> 
> 赞同：0
> 
> 时间：2012-09-06T09:58:24.577
> 
> 标签：eclipse, spring, deployment, cloud-foundry

使用 CloudFoundry Integration for Eclipse（我正在运行 32 位 Eclipse 4.2），当我尝试将任何 Spring 应用程序部署到在 OSX 10.7.4 上的 VMware Fusion 5.0.1 上运行的 MCF 时，我始终收到以下错误：

```
Communication with server failed: 500 Internal Server Error 
```

当我尝试启动服务时，在服务器视图中。

在 VMC 中，应用程序是可见的，状态为 STOPPED。如果我尝试使用 VMC 启动它，我会得到

```
maguro:Desktop darrellberry$ vmc start testserver4
Staging Application 'testserver4': .............................................HTTP exception: RestClient::RequestTimeout:Request Timeout 
```

但是，如果我从 Eclipse 将应用程序导出为 WAR 文件并使用 VMC（而不是从 Eclipse 中）将其推送到 MCF，它会部署并启动而不会出错。

所有帮助表示赞赏！

D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T20:50:48.567

这看起来像一个网络连接问题。检查 Eclipse 安装的网络设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T23:38:17.623

您可以运行此命令以获取更详细的错误：

```
vmc logs testserver4 [--all] 
```

# javascript - 具有淡入淡出效果的全背景图像

> ID：12297496
> 
> 赞同：0
> 
> 时间：2012-09-06T09:58:25.127
> 
> 标签：javascript, jquery, css, mootools

我正在创建一个在背景上具有完整图像的网站，该网站使用淡入淡出效果不断变化。这是我的脚本代码

```
 $(document).ready(
            function(){

                $('div#homeGalleryImg').innerfade({
                    speed: 1500,
                    timeout: 5000,
                    type: 'sequence',
                    containerheight: '220px'
                });

        }); 
```

我的html代码是

```
<div class="fullScreen" id="homeGalleryImg">
    <img src="images/home1.jpg" class="fullImage" />
    <img src="images/home2.jpg" class="fullImage" />
    <img src="images/home3.jpg" class="fullImage" />
</div> 
```

现在我想使用图像调整大小来创建一个函数

```
 cFns.push(function(){

 resizeFullScreens = function() {

    var minSizeX    = window.getScrollWidth();
            var minSizeY    = window.getSize().y;
            var deferResize = Browser.ie;

            $$('.fullScreen').setStyle('height', minSizeY + 'px');

            var resize = function() {
             minSizeY      = window.getScrollHeight();
             $$('.fullScreen').setStyle('height', minSizeY + 'px');

             $$('.fullImage').each(function(item, index) {
                 var c = item.getCoordinates();
                 var iR = c.width/c.height;

                 if ( minSizeX/minSizeY > iR ) {
                     iW = minSizeX;
                     iH = minSizeX/iR;
                 } else {
                     iH = minSizeY;
                     iW = minSizeY*iR;
                 }

                 item.setStyles({
                     'height': iH + 'px',
                     'width': iW + 'px'
                     });

                 item.setPosition({
                        x: -(iW - minSizeX) / 2,
                        y: -(iH - minSizeY) / 2
                    });
                });
            }

            if (deferResize) {
                resize.delay(50);
            } else {
                resize();
            }
        }

    window.addEvent('resize',resizeFullScreens);
  }); 
```

并在每次加载和调整大小时调用此函数

```
 cFns.push(function() {
    window.addEvent('resize', resizeFullScreens);
    window.addEvent('load', resizeFullScreens); 
     }); 
```

现在它工作正常，但是当我在这里使用内部淡入淡出效果时背景图像发生变化时，新图像无法根据浏览器尺寸调整大小。我想要的是在背景图像更改时调用 resizeFullScreens 函数。

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:02:54.450

jQuery Backstretch 是你的朋友：[http ://srobbin.com/jquery-plugins/backstretch/](http://srobbin.com/jquery-plugins/backstretch/)

# matlab - Matlab：将日记输出保存到变量？

> ID：12297499
> 
> 赞同：0
> 
> 时间：2012-09-06T09:58:32.343
> 
> 标签：matlab, logging

Matlab 的日记功能将命令窗口输出保存到文件中。但是，我想将它保存到变量而不是文件中。例如

```
% Default usage of diary: save to file
diary 'my_saved_output.log';
'show this in command window'
diary off

% What I want to do: save to variable
myDiary = char;
diary myDiary
'show this in command window'
diary off 
```

任何不涉及实际创建文件，然后将其读取到变量然后删除它的建议？

我想这样做的原因是我在一组 Matlab 工作人员上处理大量数据，并希望监视脚本在这个“黑匣子”中的运行情况。与其保存大量日志文件，我更愿意将日记直接保存在数据结构中。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:31:19.877

我不认为有任何方法可以做到这一点。MATLAB 具有[`evalc`](http://www.mathworks.com/help/techdoc/ref/evalc.html)捕获输出的功能，但这不会逐步发生。

# python-module - 用于 nslookup 的 python 模块

> ID：12297500
> 
> 赞同：35
> 
> 时间：2012-09-06T09:58:34.187
> 
> 标签：python-module, nslookup

是否有一个 python 模块与 nslookup 做同样的事情？我打算使用 nslookup 来挖掘有关要报废的 URL 域的一些信息。我知道我可以使用 os.sys 来调用 nslookup 但我只是想知道是否已经有一个 python 模块。提前致谢！

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-11-13T08:37:03.857

我正在使用以下代码：

```
import socket

ip_list = []
ais = socket.getaddrinfo("www.yahoo.com",0,0,0,0)
for result in ais:
  ip_list.append(result[-1][0])
ip_list = list(set(ip_list)) 
```

或使用理解为：

```
ip_list = list({addr[-1][0] for addr in socket.getaddrinfo(name, 0, 0, 0, 0)}) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-18T00:40:18.510

您需要使用[DNSPython](http://www.dnspython.org/)

```
import dns.resolver

answers = dns.resolver.query('dnspython.org', 'MX')
for rdata in answers:
    print 'Host', rdata.exchange, 'has preference', rdata.preference 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-07-31T17:13:47.863

问题是 socket.gethostbyname() 只返回一个 IP 地址。nslookup 尽可能多地返回。我用：

```
import subprocess

process = subprocess.Popen(["nslookup", "www.google.com"], stdout=subprocess.PIPE)
output = process.communicate()[0].split('\n')

ip_arr = []
for data in output:
    if 'Address' in data:
        ip_arr.append(data.replace('Address: ',''))
ip_arr.pop(0)

print ip_arr 
```

它将打印：

```
['54.230.228.101', '54.230.228.6', '54.230.228.37', '54.230.228.80', '54.230.228.41', '54.230.228.114', '54.230.228.54', '54.230.228.23'] 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-10-31T18:48:12.370

您应该使用套接字库[http://docs.python.org/2/library/socket.html](http://docs.python.org/2/library/socket.html)

在这种情况下，系统函数调用不是一个好习惯。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2014-02-18T10:18:39.203

请注意，`socket.getfqdn()`可以返回主机名的完整名称。请参阅：[http ://docs.python.org/2/library/socket.html?highlight=socket.getaddrinfo#socket.getfqdn](http://docs.python.org/2/library/socket.html?highlight=socket.getaddrinfo#socket.getfqdn)

例如：

```
python -c  'import socket; print(socket.gethostname()); print(socket.getfqdn());'
myserver
myserver.mydomain.local 
```

但结果取决于`/etc/hosts`配置。如果你有：

```
$ cat /etc/hosts
127.0.0.1       myserver  localhost.localdomain  localhost 
```

结果`socket.getfqdn()`将是：

```
python -c  'import socket; print(socket.getfqdn());'
localhost.localdomain 
```

哎呀！为了解决这个问题，我知道的唯一解决方案是更改`/etc/hosts`如下：

```
$ cat /etc/hosts
127.0.0.1       myserver  myserver.mydomain.local  localhost.localdomain  localhost 
```

希望能帮助到你！

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2018-03-09T20:48:11.220

我需要使用 CNames 追踪 AWS Route 53 中的 A 记录。又名`messaging.myCompany.com`_`moreSpecificMessaging.myCompanyInternal.com`

我也使用 Socket，但另一种相当隐蔽的方法。

```
import socket

addr1 = socket.gethostbyname_ex('google.com')

print(addr1) 
```

[https://docs.python.org/3/library/socket.html#socket.gethostbyname_ex](https://docs.python.org/3/library/socket.html#socket.gethostbyname_ex)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-10-03T14:22:05.153

以前的答案是正确的，但这是我将使用的[socket](https://docs.python.org/3/library/socket.html#module-socket)，它“提供对 BSD 套接字接口的访问。它适用于所有现代 Unix 系统、Windows、MacOS 以及可能的其他平台。”

```
import socket

distinct_ips = []
# 0,0,0,0  is for (family, type, proto, canonname, sockaddr)
#change some_site.com to whatever your are looking up of course
socket_info = socket.getaddrinfo("some_site.com",0,0,0,0)
for result in socket_info:
    ns_ip = result[4][0]
    if distinct_ips.count(ns_ip)==0:
        distinct_ips.append(ns_ip)
        print(ns_ip) 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-08T11:09:35.620

我正在使用以下代码：

```
import socket
addr1 = socket.gethostbyname('google.com')
addr2 = socket.gethostbyname('yahoo.com')
print(addr1, addr2) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-03-25T13:04:06.893

```
$ sudo apt install python-dns
$ python
>>> import DNS
>>> d = DNS.DnsRequest(server="1.1.1.1", timeout=1)                                       
>>> r = d.req(name="stackoverflow.com", qtype="A")
>>> [i['data'] for i in r.answers]
['151.101.129.69', '151.101.193.69', '151.101.1.69', '151.101.65.69'] 
```

还可以访问 ttl 等更多详细信息，而且这种方法的优点是让您指定要使用的名称服务器，而不仅仅是使用系统的默认值。

# wpf - 如何使用 MVVM 处理 WPF 列表框 selectionchanged 事件

> ID：12297502
> 
> 赞同：16
> 
> 时间：2012-09-06T09:58:37.310
> 
> 标签：wpf, mvvm

我正在尝试使用 MVVM 在 WPF 中执行列表框更改事件。请让我知道如何执行此 selectionchanged 事件。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-06T10:03:37.623

您可以使用

1.  `System.Windows.Interactivity`在您的项目中添加对的引用
2.  在 XAML 中添加`xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"`

然后

```
<ListBox>
  <i:Interaction.Triggers>
    <i:EventTrigger EventName="SelectionChanged">
      <i:InvokeCommandAction Command="{Binding YourCommand}"
                             CommandParameter="{Binding YourCommandParameter}" />
    </i:EventTrigger>
  </i:Interaction.Triggers>
</ListBox> 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-09-06T10:00:54.293

`SelectedItem`您可以将列表框的属性绑定到 ViewModel 上的属性：

```
<ListBox SelectedItem="{Binding SelectedItem}" ...>
    ....
</ListBox> 
```

在该属性中，始终会有 ListBox 中的选定项。如果您真的需要在选择更改时执行某些操作，您可以在该属性的设置器中执行此操作：

```
public YourItem SelectedItem
{
    get { return _selectedItem; }
    set
    {
        if(value == _selectedItem)
            return;

        _selectedItem = value;

        NotifyOfPropertyChange("SelectedItem");

        // selection changed - do something special
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-04T08:54:28.263

您可以将 ListBox SelectionChanged 事件绑定到 ViewModel 中的命令。

看到这个答案 [https://stackoverflow.com/a/18960028/5627499](https://stackoverflow.com/a/18960028/5627499)

# c# - 使用正则表达式将给定文本中的现有 url 替换为新 url

> ID：12297504
> 
> 赞同：2
> 
> 时间：2012-09-06T09:58:43.060
> 
> 标签：c#, regex

我正在尝试使用正则表达式将给定文本中的现有 url 替换为新 url。我似乎没有得到任何匹配我正在使用的正则表达式模式：

```
string regex = "<a href=\"http://domain/page.asp?id=(\\d+)&amp;oid=(\\d+)&amp;type=(\\w+)\">"; 
```

有人可以帮我写一个正确的模式来找到如下所示的网址：

```
"<A href=\"http://domain/page.asp?id=38957&amp;oid=2497&amp;type=JPG\">" 
```

下面是我的测试代码，它找不到我正在使用的模式的任何匹配项：

```
string result = string.Empty;

string sampleText = "<A href=\"http://domain/page.asp?id=38957&amp;oid=2497&amp;type=JPG\"><U>Click here for Terms &amp; Conditions...</U></A>";

string regex = "<a href=\"http://domain/page.asp?id=(\\d+)&amp;oid=(\\d+)&amp;type=(\\w+)\">";
        Regex regEx = new Regex(regex, RegexOptions.IgnoreCase);

result= regEx.Replace(text, "<a href=\"/newPage/Index/$1&opid=$2)\">"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:51:41.557

一切看起来都很好，除了它是正则表达式`.`中`?`的特殊字符，所以它们需要被转义才能被视为文字。所以你的表达：

```
string regex = "<a href=\"http://domain/page.asp?id=(\\d+)&amp;oid=(\\d+)&amp;type=(\\w+)\">"; 
```

需要是：

```
string regex = "<a href=\"http://domain/page\\.asp\\?id=(\\d+)&amp;oid=(\\d+)&amp;type=(\\w+)\">"; 
```

`.`注意和前面的反斜杠`?`。

# matlab - 如何在matlab中使用newff函数向MLP神经网络提供64个输入和一个输出？

> ID：12297506
> 
> 赞同：1
> 
> 时间：2012-09-06T09:58:52.863
> 
> 标签：matlab, neural-network

我有一个`8x8`矩阵（我将这个矩阵设为 的向量`1x64`），并希望将其提供给 MLP 神经网络，并有一个带有 10 个感知器和只有一个输出的隐藏层。

我怎么能用[`newff`](http://dali.feld.cvut.cz/ucebna/matlab/toolbox/nnet/newff.html) 来做这个？我不知道如何将其馈送到网络？

谢谢，卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:23:01.263

也许您可以尝试使用“nntool”命令，开始使用神经网络工具箱 GUI。在那里你可以选择你想要的那种我相信是“前馈反向传播”的神经网络。

很难提供帮助，因为您提供的信息很少。

我建议你看看神经网络工具箱网络研讨会： http: [//www.mathworks.com/products/neural-network/webinars.html](http://www.mathworks.com/products/neural-network/webinars.html)

我从过去完成的一项作业中截取了一些代码，希望它对你有用：

```
 % MLP building
    net = newff(minmax(InputData),[NumNeuron 1],{'tansig' 'purelin'},'trainlm');
    % MLP training
    [net,tr]=train(net,InputData,TargetData);
    % answer
    output_from_network = sim(net,InputData); 
```

newff 命令直接从您提供的示例输入中获取 inputData 的维度。minmax 它应该帮助 Matlab 设置您的 NN 权重的初始值。NumNeuron 将修复隐藏层中的神经元数量。并且单元格 {'tansig' 'purelin'} 修复了您将分别用于隐藏层和输出层的激活函数的类型。

希望这可以帮助，

# ruby-on-rails - omn iauth facebook 的回调显示错误

> ID：12297507
> 
> 赞同：0
> 
> 时间：2012-09-06T09:59:01.843
> 
> 标签：ruby-on-rails, devise, omniauth

```
You have a nil object when you didn't expect it!
You might have expected an instance of Array.
The error occurred while evaluating nil.[] 
```

app/models/user.rb:9:in `apply_omniauth' app/controllers/authentications_controller.rb:18:in`create'

我一直在从教程[http://railscasts.com/episodes/235-omniauth-part-1](http://railscasts.com/episodes/235-omniauth-part-1)和[http://railscasts.com/episodes/236-omniauth-part-2](http://railscasts.com/episodes/236-omniauth-part-2)尝试这个。

我应该怎么办？

更新：

我发现了错误，但在登录后，回调还是来到了注册页面。我也发现模型中没有保存任何内容。

# iphone - 将参数传递给选择器

> ID：12297511
> 
> 赞同：3
> 
> 时间：2012-09-06T09:59:22.530
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ipad

我的自定义单元格中有一个 UIButton，我想在用户按下该按钮时触发一个动作，但我需要知道 UIButton 是从哪一行按下的。

这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    [self configureCell:cell atIndexPath:indexPath];
    return cell;

    ...

    [button addTarget:self action:@selector(buttonPressedAction:)forControlEvents:UIControlEventTouchUpInside];

}

- (void)buttonPressedAction:(UIButton *)button
{
    //int row = indexPath.row;
    //NSLog(@"ROW: %i",row);
} 
```

如何将 indexPath 作为参数传递给我的选择器？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T10:03:07.693

您可以将按钮的 tag 属性设置为行号：

```
button.tag = indexPath.row; 
```

并使用检索它

```
NSInteger row = button.tag; 
```

或将索引路径对象本身设置为按钮的关联对象：

```
objc_setAssociatedObject(button, "IndexPath", indexPath); 
```

和

```
NSIndexPath *ip = objc_getAssociatedObject(button, "IndexPath"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T10:04:29.423

在自定义单元格上添加按钮时，您可以将`tag`UIButton 的属性添加为

```
UIButton *sampleButton = [[UIButton alloc] init];
sampleButton.tag = indexPath.row; 
```

然后当你打电话时，你可以检查标签

```
- (void)buttonPressedAction:(UIButton*)sender
{
    if(sender.tag==0)
    {
      //perform action
    }
} 
```

希望能帮助到你。快乐编码:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T10:06:32.857

简单设置按钮标签..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    [self configureCell:cell atIndexPath:indexPath];
    return cell;

    ...

    [button setTag = indexPath.row]; // Set button tag

    [button addTarget:self action:@selector(buttonPressedAction:)
                                            forControlEvents:UIControlEventTouchUpInside];
    }

    - (void)buttonPressedAction:(id)sender
    {
        UIButton *button = (UIButton *)sender;
        int row = [button superview].tag;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-07T18:32:55.863

它甚至比设置标签还简单。试试这个..

要获取 indexPath，请尝试以下代码。

```
UIView *contentView = (UIVIew *)[button superview];
UITableViewCell *cell = (UITableViewCell *)[contentView superview];
NSIndexPath *indexPath = [self.tableview indexPathForCell:cell]; 
```

或者

```
NSIndexPath *indexPath = [self.tableview indexPathForCell:(UITableViewCell *)[(UIVIew *)[button superview] superview]]; 
```

# python - Python Google App Engine Cron 作业/计划任务不工作

> ID：12297513
> 
> 赞同：3
> 
> 时间：2012-09-06T09:59:22.500
> 
> 标签：python, google-app-engine, cron, python-2.7

我正在创建这个 cron 作业来获取 twitter 提要并将其存储在数据存储中。我尝试了一切，但我的 cronjob 无法正常工作。我阅读了以下文章/教程和一些 stackoverflow 问题，但我无法解决这个问题。

> [https://developers.google.com/appengine/docs/python/config/cron](https://developers.google.com/appengine/docs/python/config/cron)
> 
> [http://cloudartisan.com/posts/2010-06-02-scheduled-tasks-with-google-app-engine-python/](http://cloudartisan.com/posts/2010-06-02-scheduled-tasks-with-google-app-engine-python/)

这是我的代码

这是 cron.ymal

```
cron:
- description : capture twitter feed 
  url : /twittertask
  schedule: every 1 minutes
  target: version-2 
```

这是我完成这项工作所需的课程。

```
import webapp2
from google.appengine.ext import db

class Twitt(db.Model):
    created_at = db.IntegerProperty(required = True)
    id = db.StringProperty(required = True)
    text = db.StringProperty(required = True)

class TwitterTask(webapp2.RequestHandler):

    def get(self):
        url = "https://api.twitter.com/1/statuses/user_timeline.json?include_entities=true&include_rts=true&screen_name=BeijingAir&count=10"

        json_string = urllib2.urlopen(url).read()

        data = json.loads(json_string)

        for item in data:
            created_at_item = item['created_at']
            text_item = item['text']
            id_item = item['id']

            e = Twitt(id = created_at_item, text = text_item, id = id_item)
            e.put()

        self.response.out.write('Hello prueba!') 
```

这是 app.ymal

```
application: cronjob
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: index.app

- url: /twittertask
  script: twittertask.app 
```

这是 index.py

```
import webapp2

class MainPage(webapp2.RequestHandler):
  def get(self):
      self.response.headers['Content-Type'] = 'text/plain'
      self.response.write('Hello, Check Admin')

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True)

def main():

    run_wsgi_app(application)

if __name__ == "__main__":
    main() 
```

好吧，我找不到错误在哪里。我在我的开发服务器上进行了测试。我没有将它上传到谷歌应用引擎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:40:35.293

问题出在您的 app.yaml 中。URL 从上到下匹配，但您的第一个处理程序匹配*所有*URL。移动`twittertask`条目，使其首先位于`handlers`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:17:16.937

Cron 在本地开发服务器上不起作用。将其上传到云端，它就会工作。

在本地访问您的应用服务器：

```
http://127.0.0.1:8080/_ah/admin 
```

并单击“Cron 作业”。

```
http://127.0.0.1:8080/_ah/admin/cron 
```

它会说“在生产中，这将在这些时间运行：”

你的日程安排在这里。

# multithreading - Monotouch 对话框 - 在运行时添加和删除元素

> ID：12297515
> 
> 赞同：0
> 
> 时间：2012-09-06T09:59:31.407
> 
> 标签：multithreading, monotouch.dialog

我在 MonoTouch.Dialog 中有一个应用程序，我尝试使用 ActivityElement。

我的计划是首先显示一个活动元素，然后进行我的网络服务调用，当我收到响应时，我将删除活动元素并添加一些新的字符串元素。这不起作用。显示视图后，我无法删除或添加元素。

我该如何解决这个问题？

```
rootElement = new RootElement ("Mobile Servicedesk"){
                (requestSection = new Section ("My requests"){
                    new ActivityElement()
                })
            };
            new Thread (() => {
                var incidents = IncidentProvider.LoadMyRequests ();
                requestSection.Elements.Clear ();
                foreach (var item in incidents) {
                    requestSection.Elements.Add (new StringElement(item.Name))
                }
            }
            ).Start (); 
```

**编辑：**

好的，现在我解决了更新部分，至少在我的解决方案的一部分中。

```
InvokeOnMainThread (() => {
                    ReloadData();
                }); 
```

ReloadData() 在我的 appDelegate 视图中有效，但在我的子视图中无效。我什至试图确保它在主线程上被调用但仍然没有运气......

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:35:14.617

这是我在我的应用程序中使用的代码，用于执行您想要执行的操作。

```
LoadingView loading;

ThreadPool.QueueUserWorkItem ((f) => {
    // runs UI stuff on main thread
    InvokeOnMainThread (delegate {
        loading = new LoadingView();    
        loading.Show("Do something...");
    });

    // Methods that do whatever you wan, that runs on a different thread
    DoSomething();

    // runs UI stuff on main thread
    InvokeOnMainThread (delegate { 
        loading.Hide();
        new UIAlertView("Title", "Message", null, "Button", null).Show();
    }); 
}); 
```

您的主要问题是，当您这样做时`new Thread(...)`，您想要编辑您的 UI，如果这是在主线程之外，这是不可能的。

在我的示例中，该`DoSomething()`方法可以调用您的 Web 服务，存储您的数据，然后`InvokeMainThread`按照您显示的方式创建您的 Root。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:26:40.533

啊! 知道了！

由于我有第二个 RootElement，我需要在该特定根上调用 ReloadData ......现在它可以工作了！

# java - SVNKit - 获取提交的修改

> ID：12297516
> 
> 赞同：4
> 
> 时间：2012-09-06T09:59:33.170
> 
> 标签：java, svn, svnkit

**我使用SVNKit**库开发了一个**Java**程序，该库将负责在版本控制下更新或提交目录。目录内容可以由我无法控制的另一个程序更改，该程序可以添加，删除或编辑文件，忽略设置颠覆信息。

 **问题是«**我的程序如何知道要提交什么**»？

因为没有添加新文件，所以我尝试处理 rootDirectory 的 doImport，但它会导致 SVNException 表明该文件已存在于存储库端。

```
SVNCommitClient cc = cm.getCommitClient();
cc.doImport(new File(subVersionedDirectory), SVNURL.parseURIEncoded(repositoryURL), "<import> " + commitMessage, null, false, true, SVNDepth.fromRecurse(true)); 
```

我还发现一段代码可能会在提交之前将丢失的文件标记为已删除

```
cc.setCommitParameters(new ISVNCommitParameters() {
   // delete even those files
   // that are not scheduled for deletion.
   public Action onMissingFile(File file) {
      return DELETE;
   }
   public Action onMissingDirectory(File file) {
      return DELETE;
   }

   // delete files from disk after committing deletion.
   public boolean onDirectoryDeletion(File directory) {
      return true;
   }
   public boolean onFileDeletion(File file) {
      return true;
   }
   });
   cc.doCommit(new File[]{new File(subVersionedDirectory)}, false, "<commit> " + commitMessage, null, null, false, true, SVNDepth.INFINITY); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T11:02:33.890

**我的程序怎么知道要提交什么？**

我找到的解决方案是在提交之前使用 doStatus 将删除和添加的文件信息设置到工作副本

```
cm = SVNClientManager.newInstance(new DefaultSVNOptions());
// Use do status to set deleted and added files information into SVN working copy management
cm.getStatusClient().doStatus(subVersionedDirectory, SVNRevision.HEAD, SVNDepth.INFINITY, false, false, false, false, new ISVNStatusHandler() {
            @Override
            public void handleStatus(SVNStatus status) throws SVNException {
                if (SVNStatusType.STATUS_UNVERSIONED.equals(status.getNodeStatus())) {
                    cm.getWCClient().doAdd(status.getFile(), true, false, false, SVNDepth.EMPTY, false, false);
                } else if (SVNStatusType.MISSING.equals(status.getNodeStatus())) {
                    cm.getWCClient().doDelete(status.getFile(), true, false, false);
                }
            }
        }, null);        
cm.getCommitClient().doCommit(new File[]{subVersionedDirectory}, false, "<commit> " + commitMessage, null, null, false, true, SVNDepth.INFINITY); 
```**

# android - 单击android phonegap中的按钮时退出应用程序？

> ID：12297525
> 
> 赞同：65
> 
> 时间：2012-09-06T10:00:05.167
> 
> 标签：android, cordova, phonegap-plugins

我是phonegap的新手。我准备了一个示例应用程序。我的应用程序有 2 个页面，第一个页面有一个按钮，单击时会打开第二个页面。使用以下方法工作正常

```
 function callAnothePage()
         {
            window.location = "test.html";
         } 
```

第二页有一个按钮，单击时我想退出应用程序。我使用了以下

```
 function exitFromApp()
       {
            navigator.app.exitApp();
       } 
```

`test.html`代码，

```
<!DOCTYPE html>
<html>

<head>
    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">  
        function onLoad()
        {
            console.log("device reday !!!!")
            document.addEventListener("deviceready", onDeviceReady, true);
        }
        function exitFromApp()
        {
            console.log("in button");
            navigator.app.exitApp();
        }
    </script>
</head>

<body onload="onLoad();">
    <h4><center>Login Page</center></h4>

    <input type="submit" onclick="exitFromApp()" value="exit"/>

</body>
</html> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-09-06T10:26:47.307

试试这个代码。

```
<!DOCTYPE HTML>
<html>
  <head>
    <title>PhoneGap</title>

        <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>      
        <script type="text/javascript" charset="utf-8">

            function onLoad()
            {
                  document.addEventListener("deviceready", onDeviceReady, true);
            }

            function exitFromApp()
             {
                navigator.app.exitApp();
             }

        </script>

    </head>

    <body onload="onLoad();">
       <button name="buttonClick" onclick="exitFromApp()">Click Me!</button>
    </body>
</html> 
```

将**src="cordova-1.5.0.js"**替换为您的 phonegap js 。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-04-19T05:14:39.910

关闭应用程序的方法有多种，具体取决于：

```
if (navigator.app) {
    navigator.app.exitApp();
} else if (navigator.device) {
    navigator.device.exitApp();
} else {
    window.close();
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-10-14T23:42:35.260

```
navigator.app.exitApp(); 
```

将此行添加到您希望退出应用程序的位置。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-24T08:12:13.460

@Pradip Kharbuja

在 Cordova-2.6.0.js (l. 4032) 中：

```
exitApp:function() {
  console.log("Device.exitApp() is deprecated. Use App.exitApp().");
  app.exitApp();
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-16T22:09:40.540

```
if(navigator.app){
        navigator.app.exitApp();
}else if(navigator.device){
        navigator.device.exitApp();
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-04T09:01:39.110

抱歉，我无法在评论中回复。仅供参考，这些代码

```
if (navigator.app) {
navigator.app.exitApp();
}
else if (navigator.device) {
  navigator.device.exitApp();
}
else {
          window.close();
} 
```

我确认不起作用。我使用 phonegap 6.0.5 和 cordova 6.2.0

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-05T16:53:44.780

我使用了上述组合，因为我的应用程序可以在浏览器和设备上运行。浏览器的问题是它不会让您从脚本关闭窗口，除非您的应用程序是由脚本打开的（例如 browsersync）。

```
 if (typeof cordova !== 'undefined') {
            if (navigator.app) {
                navigator.app.exitApp();
            }
            else if (navigator.device) {
                navigator.device.exitApp();
            }
        } else {
            window.close();
            $timeout(function () {
                self.showCloseMessage = true;  //since the browser can't be closed (otherwise this line would never run), ask the user to close the window
            });
        } 
```

# java - Android ContentProvider getType() 调用的时间和原因

> ID：12297527
> 
> 赞同：24
> 
> 时间：2012-09-06T10:00:07.793
> 
> 标签：java, android, android-contentprovider

我在 getType() 方法中添加了一个日志，它永远不会被打印出来。我正在使用记事本示例代码。请解释 Java 文档注释的第一行。从 getType() 返回 null 也可以正常工作。getType() 方法的目的是什么？

```
 /**
 * This is called when a client calls {@link android.content.ContentResolver#getType(Uri)}.
 * Returns the MIME data type of the URI given as a parameter.
 * 
 * @param uri The URI whose MIME type is desired.
 * @return The MIME type of the URI.
 * @throws IllegalArgumentException if the incoming URI pattern is invalid.
 */
@Override
public String getType(Uri uri)
{
    Log.d("Suparna", "******getType()");
    /*switch(uriMatcher.match(uri))
    {
    // ---get all books---
    case BOOK_DETAILS:
        return Book.Book_Details.CONTENT_TYPE;
        // ---get a particular book---
    case BOOK_DETAILS_ID:
        return Book.Book_Details.CONTENT_ITEM_TYPE;
    default:
        throw new IllegalArgumentException("Unsupported URI: " + uri);
    }*/
    return null;
} 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-09T21:03:59.267

`getType(Uri uri)`通常只会在调用`ContentResolver#getType(Uri uri)`. 应用程序（其他第三方应用程序，如果您`ContentProvider`已导出，或您自己的应用程序）使用它来检索给定内容 URL 的 MIME 类型。如果您的应用程序不关心数据的 MIME 类型，那么只需使用 method 就可以了`return null`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-29T17:31:39.293

This`ContentProvider`的`getType()`方法主要用于当您允许您`ContentProvider`与其他第三方应用程序交互时。Android 系统使用此 MIME 类型来查找哪些应用程序可以处理它。

# haskell - 复杂模式匹配

> ID：12297532
> 
> 赞同：2
> 
> 时间：2012-09-06T10:00:36.727
> 
> 标签：haskell

在haskell中是否可以匹配复杂的模式？

我的意思是，我有一个逗号分隔值 (CSV) 文件：

```
name,ID,fieldA,fieldB 
```

是否可以编写如下函数：

```
getName (n:',':xs) = n 
```

哪里`n`不是单个元素而是列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T10:16:02.410

当我在 1980 年代还是个小男孩时，我实现了一种具有这种风格的复杂模式的函数式语言。这相当于在模式中允许++。生成的模式不明确，因此匹配涉及回溯搜索过程：程序员可以有效地指定是最小化还是最大化匹配 ++ 左侧模式的前缀长度。该语言具有“模式保护”的形式，因此可以测试候选匹配以查看后续计算是否成功并在失败的情况下被拒绝。由此产生的程序的含义通常是显而易见的。这很有趣。

这些天来，当遇到这样的问题时，我`span`会使用 ，如果这不能解决问题，我会使用解析器组合器。

```
span :: (a -> Bool) -> [a] -> ([a], [a]) 
```

> span，应用于谓词 p 和列表 xs，返回一个元组，其中第一个元素是满足 p 的 xs 个元素的最长前缀（可能为空），第二个元素是列表的其余部分

因此，特别是`span (/= ',')`将 a 拆分`String`为第一个逗号之前的任何内容（如果没有逗号，则为整个内容）和其余部分（如果有逗号，则以逗号开头）。

如果那不会削减它，我会使用解析器组合器。

但我总是记得它曾经是多么容易。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T10:38:28.680

你应该写一个函数来分割你的行......

```
import Data.List

parts = map tail . groupBy (/=) . (',':) 
```

然后您可以轻松编写访问器函数：

```
getName xs = n where [n,_,_,_] = parts xs
getID   xs = i where [_,i,_,_] = parts xs
... 
```

但与往常一样，使用数据类型会很好：

```
data Record = Record {getName :: String   
                     ,getId :: Int
                     ,getFieldA  
                     ,getFieldB :: String
                     } deriving Show 

initRecord xs = Record name (read id) fieldA fieldB where
                [name, id, fieldA, fieldB] = parts xs 
```

当然，如果您需要错误处理，它会变得有点困难......

顺便说一句，那里有一个 Haskell CSV 库：http: [//hackage.haskell.org/packages/archive/csv/0.1.1/doc/html/Text-CSV.html](http://hackage.haskell.org/packages/archive/csv/0.1.1/doc/html/Text-CSV.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T10:37:39.943

您可以在列表元素上使用类似`splitOn`from`Data.List.Split`和模式匹配的内容。

```
> splitOn "," "a,b,c,d"
["a","b","c","d"] 
```

它在拆分包中。

对于更复杂的事情，您可以使用 Parsec。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T10:09:00.033

嗯，我不确定，但我不这么认为。为了解决您的问题，您可能应该在 Haskell 中查看一些关于[正则表达式的内容。](http://book.realworldhaskell.org/read/efficient-file-processing-regular-expressions-and-file-name-matching.html#glob.regex)

# jenkins - 芬和詹金斯

> ID：12297534
> 
> 赞同：0
> 
> 时间：2012-09-06T10:00:46.243
> 
> 标签：jenkins, pear, phing

我在 Windows 7 上使用 Jenkins，我想将 phing 与它一起使用。我安装了相应的插件，但在构建中我有这个错误：

```
[src] $ cmd.exe /C '"phing.bat -buildfile "C:\Program Files\Jenkins\workspace\Test\utils\build\build.xml" ci -logger phing.listener.DefaultLogger && exit %%ERRORLEVEL%%"'
'phing.bat' n'est pas reconnu en tant que commande interne
ou externe, un programme ex‚cutable ou un fichier de commandes.
Build step 'Invoke Phing targets' marked build as failure
Finished: FAILURE 
```

在英语中，`phing.bat`不被识别为内部或外部命令...

对于 phing 插件配置，我输入： Targets : ci Phing Build File : utils/build/build.xml 并选中“使用 ModuleRoot 作为工作目录”（默认情况下）

使用 Wamp，我安装了 pear 和 phing。在环境路径中，我有梨的默认变量（PHP_PEAR_BIN_DIR、PHP_PEAR_DATA_DIR...）。

命令行`phing --help`有效，我也尝试直接将命令行放入 Jenkins `phing -f $WORKSPACE/utils/build/build.xml build -Dws=$WORKSPACE`，但构建后没有任何反应（未创建 builld.xml 中描述的文件夹）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T06:51:50.863

哈！刚刚解决了这个。

*   就像另一个人说的那样，让 phing 在你的路径上可用。您可以在命令行中进行测试。

*   然后，我永远的一步——永远！- 忘记：**重新启动服务**。

也许我会在手背上纹身什么的。重新启动该死的服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T08:04:27.303

phing.bat 所在的目录需要在您的`$PATH`变量中。否则，您需要指定`phing.bat`.

# php - 使用 PHP 将 html 文件中的所有值转换为 MS-Word

> ID：12297535
> 
> 赞同：-2
> 
> 时间：2012-09-06T10:00:47.747
> 
> 标签：php, cakephp, cakephp-2.0, cakephp-2.1

我有如下的 HTML 和 PHP 代码。我有代码一个文件`html2word.php`：

```
<form method="post" action="htmltortf.php">    
    <table>
        <tr>
            <td colspan="3">Convert html to doc</td>
        </tr>
        <tr>
            <td colspan="3">Choose the answer</td>
        </tr>
        <tr>
            <td><input type="radio"  name="004" value="1" <?=($_POST['004']=='1' ? 'checked="checked"' : '')?>/>1</td>
            <td><input type="radio"  name="004" value="2" <?=($_POST['004']=='2' ? 'checked="checked"' : '')?>/>2</td>
            <td><input type="radio"  name="004" value="3" <?=($_POST['004']=='3' ? 'checked="checked"' : '')?>/>3</td>
        </tr>
        <tr>
            <td colspan="3"><input type="submit" name="submit" value="submit" /></td>
        </tr>
    </table>
    <?php
        if(isset($_POST['submit']))
        {
            header("Content-type: application/vnd.ms-word");
            header("Content-Disposition: attachment;Filename=html2doc.doc");
        }
     ?>    
</form> 
```

**我需要的：**

当用户选中单选框时，当我将其转换为 MS-Word 时，它也会显示单选框被选中。

**问题：**

当我将其转换为 Word 文档时，它会显示我选中的单选框，但会显示错误消息：

`Notice: Undefined index: 004 in C:\wamp\www\html to docv2\htmltortf.php on line 51`.

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T14:51:51.047

当用户点击提交按钮时，表单数据发送到服务器。它存储在 $_POST 数组中，因此当您显示此页面时，您必须提前检查是否有任何数据接收器。
尝试类似的事情（用此代码替换单选按钮 html）：

```
<td><input type="radio"  name="004" value="1" <?=((isset($_POST['004']) && $_POST['004']=='1') ? 'checked="checked"' : '')?>/>1</td>
<td><input type="radio"  name="004" value="2" <?=((isset($_POST['004']) && $_POST['004']=='2') ? 'checked="checked"' : '')?>/>2</td>
<td><input type="radio"  name="004" value="3" <?=((isset($_POST['004']) && $_POST['004']=='3') ? 'checked="checked"' : '')?>/>3</td> 
```

检查完整的解决方案： [http ://codepad.org/QThcTGdO](http://codepad.org/QThcTGdO)

# ruby-on-rails - 使用 3 个模型分组选择

> ID：12297536
> 
> 赞同：0
> 
> 时间：2012-09-06T10:00:48.380
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有以下型号

```
class Location < ActiveRecord::Base
  has_many :zones
  attr_accessible :name
end

class Zone < ActiveRecord::Base
  belongs_to :location
  has_many :cities
  attr_accessible :name
end

class City < ActiveRecord::Base
  belongs_to :zone
  attr_accessible :name, :zip_code
end 
```

我实际上在同一个选择中无缝显示所有城市，但是由于现在位置数量正在增长，我想使用位置名称作为标签显示分组选择，然后显示按字母顺序排列的选项（城市：id，：名称）对于那个位置。

我目前获取城市的方法是`for each location get all zones, for each zone get all cities`，然后我将它们推到一个实例变量中并显示它们。我尝试过使用 grouped_collection_select 但我不知道在这种情况下如何使用它，我也尝试过使用 grouped_options_for_select 但我认为第一个更合适。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:23:48.253

尝试

```
@cities= City.joins(:zone).where(:zones => { :location_id => @location.id }) 
```

# django - django 选择所有连接的值

> ID：12297542
> 
> 赞同：-1
> 
> 时间：2012-09-06T10:01:09.410
> 
> 标签：django, model

Djnago 型号：

```
class RootTable(models.Model):
    id = models.IntegerField(primary_key=True)
    field1 = models.CharField(max_length=100, unique=True)
    field2 = models.CharField(max_length=120, unique=True)

class SubTableA(models.Model):
    id = models.IntegerField(primary_key=True)
    field1 = models.ForeignKey(RootTable, null=True, blank=True)
    subtableAfield1 = models.CharField(max_length=180, blank=True)

class SubTableB(models.Model):
    id = models.IntegerField(primary_key=True)
    field1 = models.ForeignKey(SubTableA, null=True, blank=True)
    subtableBfield1 = models.CharField(max_length=180, blank=True)

class SubTable2(models.Model):
    id = models.IntegerField(primary_key=True)
    field1 = models.ForeignKey(RootTable, null=True, blank=True)
    subtable2field1 = models.CharField(max_length=180, blank=True)
    subtable2field2 = models.CharField(max_length=180, blank=True) 
```

如果我使用这样的请求：

```
RootTable.objects.filter( subtable2__subtable2field1 = 'text' ) 
```

它仅从“RootTable”返回值。
SQL：

```
SELECT  'roottable'.'id',
        'roottable'.'field1',
        'roottable'.'field2',
FROM 'roottable'
INNER JOIN ... 
```

但是如何从其他表中获取所有连接的值？
SQL：

```
SELECT  'roottable'.'id',
        'roottable'.'field1',
        'roottable'.'field2',
        'subtablea'.'subtableafield1',
        'subtableb'.'subtablebfield1',
        'subtable2'.'subtable2field1',
        'subtable2'.'subtable2field2',
FROM 'roottable', 'subtablea', 'subtableb', 'subtable2'
INNER JOIN ... 
```

**更新**：

我收到这样的回复：

```
[
{ 'roottable.id' : 'rid'},
{ 'subtablea.id' : 'id'},
{ 'subtablea.subtableafield1' : 'value1' },
...
{ 'roottable.id' : 'rid'},
{ 'subtablea.id' : 'id'},
{ 'subtablea.subtableafield1' : 'value2' },
] 
```

但我需要这样的东西：

```
[
{ 'roottable.id' : 'rid'},
{ 'subtablea.id' : 'id'},
{ 'subtablea.subtableafield1' : ['value1','value2'] },
] 
```

有没有一种快速的方法来获得这样的结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:35:27.010

Django`filter()`查询返回对象而不是特定属性。但是，您可以使用`values()`仅返回属性 dict。这也可以采用相关字段的属性。

但副作用是您必须传递要返回的属性名称（类似于 SQL）。

因此，您可以将查询更改为

```
RootTable.objects.filter(subtable2__subtable2field1='text').values('field1', 
    'field2', 'subtablea__subtable1field1', 'subtableb__subtable2field1') 
```

更多参考[Django Queryset 值](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values)

# excel - 如何对文件进行排序然后填充 ListBox？

> ID：12297543
> 
> 赞同：0
> 
> 时间：2012-09-06T10:01:09.193
> 
> 标签：excel, vba, listbox

此代码使用特定文件夹的文件名填充 ListBox

```
Dim DIRECTORY As String
DIRECTORY = Dir(myPath & "\*.xlsx", vbNormal)
Do Until DIRECTORY = ""
ListBox1.AddItem DIRECTORY
DIRECTORY = Dir()
Loop 
```

但我想要一个排序列表。
如何先对文件进行排序，然后再填充 ListBox。
顺便说一句，对列表框进行排序（据我所知）是一个很长的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:25:04.863

A`ListBox`没有内置的排序功能。你需要自己动手。

基本思想是将列表数据放入数组中，对数组进行排序，然后将数据放回列表中。有许多很好的参考资料可用于对 VBA 数组进行排序。

除非您有大量文件，否则简单的排序可能就足够了。尝试这个

```
Sub SortListBox(oLb As MSForms.ListBox)

Dim vItems As Variant
Dim i As Long, j As Long
Dim vTemp As Variant

'Put the items in a variant array
vItems = oLb.List

' Sort
For i = 0 To UBound(vItems, 1) - 1
    For j = i + 1 To UBound(vItems, 1)
        If vItems(i, 0) > vItems(j, 0) Then
            vTemp = vItems(i, 0)
            vItems(i, 0) = vItems(j, 0)
            vItems(j, 0) = vTemp
        End If
    Next
Next

'Clear the listbox
oLb.Clear

'Add the sorted array back to the listbox
For i = 0 To UBound(vItems, 1)
    oLb.AddItem vItems(i, 0)
Next

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-05T22:06:39.787

DIR 命令总是按字母顺序显示元素，但按名称而不是类型排序。正确的做法是利用“vbDirectory”和“vbArchive”属性，首先使用vbDirectory 创建一个列表，然后使用vbArchive 创建另一个列表。结果是一个按字母顺序排序的列表，将目录与文件分开。

[![在此处输入图像描述](../Images/54c992eb883fe3968d27808e973620ce.png)](https://i.stack.imgur.com/bHUfD.png)

```
Private Sub ListarFunc()
Dim a As Integer
Dim strArchivo As String
Dim FileName As String
Dim TipoArchivo As String
Dim fso As Object, file As Object, folder As Object
Set fso = CreateObject("Scripting.FileSystemObject")

On Error Resume Next

    'If we are not in /root add a "\" to the PathExplorer
    If Mid(Me.BoxPathExplorer, 4, 1) <> "" Then Me.BoxPathExplorer = CurDir() & "\"
    Me.Lista1.ForeColor = RGB(25, 25, 100)
    Me.Lista1.RowSource = ""    'First, clear the list
    Me.Lista1.AddItem "___________________ TIPO ___________________" & ";" & "________________ " & _
        Dir(Me.BoxPathExplorer, vbVolume) & " ________________"

    strArchivo = Dir(Me.BoxPathExplorer, vbDirectory)
    While strArchivo <> ""
        Set folder = fso.GetFolder(strArchivo)
        If folder.Attributes And vbDirectory Then Me.Lista1.AddItem folder.Type & ";" & strArchivo
        strArchivo = Dir
        Set folder = Nothing
    Wend

    strArchivo = Dir(Me.BoxPathExplorer, vbArchive)
    While strArchivo <> ""
        Set file = fso.GetFile(strArchivo)
        If file.Attributes And vbArchive Then Me.Lista1.AddItem file.Type & ";" & strArchivo
        strArchivo = Dir
        Set file = Nothing
    Wend

    If Lista1.ItemData(1) = "." Then Me.Lista1.RemoveItem 1            'Delete the item '.'
    Me.Lista1 = "NoSelection"
End Sub 
```

问候。

# .htaccess - opencart中的301 permenanat重定向

> ID：12297545
> 
> 赞同：3
> 
> 时间：2012-09-06T10:01:25.183
> 
> 标签：.htaccess, redirect, opencart

我必须在我的 opencart 站点中使用 301 永久重定向。我在我的 .htaccess 中使用以下代码。两者都适用于 http:// 但不适用于 https://

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_HOST} ^domain\.com$ [NC]
RewriteRule ^(.*)$ http://www.domain.com/$1 [R=301,L] 
```

和

```
RewriteEngine on 
RewriteCond %{HTTP_HOST} ^meinedomain.de 
RewriteRule ^(.*)$ http://www.meinedomain.de/$1 [r=301,L] 

RewriteCond %{HTTPS_HOST} ^meinedomain.de 
RewriteRule ^(.*)$ https://ssl.meinedomain.de/$1 [r=301,L] 
```

但是我的一些页面在 https:// 中加载，例如登录、结帐等。当我使用上面的代码时，我无法登录到该站点。https 的正常工作需要哪些更改...？？

当我在 google 中搜索我的网站时，请访问 www。结果中没有出现。它显示 mysite.com。我能为此做些什么？？任何人请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:05:39.797

没有什么叫`%{HTTPS_HOST}`，试试这个（不要忘记在正则表达式中转义点）：

```
RewriteEngine on

RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} ^meinedomain\.de$
RewriteRule ^(.*)$ http://www.meinedomain.de/$1 [r=301,L] 

RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} ^meinedomain\.de$
RewriteRule ^(.*)$ https://ssl.meinedomain.de/$1 [r=301,L] 
```

# java-me - LWUIT 虚拟键盘事件

> ID：12297546
> 
> 赞同：1
> 
> 时间：2012-09-06T10:01:27.397
> 
> 标签：java-me, lwuit, virtual-keyboard

我正在使用 LWUIT

我有数量文本字段，当我单击它时，它会带来 VKB 并显示它，然后我输入我的值并将 dataChanged 添加到此文本字段，我想要做的是禁用 dataChanged 直到我在文本字段中完成编辑

如何知道键盘是否显示，我需要紧急帮助

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T04:29:32.893

代替 dataChanged()，使用`ActionListener`. 将动作侦听器添加到文本字段。然后，用in action listener编写代码来执行点击ok后要执行的动作。

```
textFieldObj.addActionListener(new ActionListener() {
       public void actionPerformed(ActionEvent ae) {
           // Your code
       }
}); 
```

它将满足您的要求。

# c# - 如何在目标机器上运行我的完整 Web 应用程序项目

> ID：12297547
> 
> 赞同：0
> 
> 时间：2012-09-06T10:01:32.443
> 
> 标签：c#, asp.net, .net, iis, publishing

我正在开发当前的 Web 应用程序，我想制作 .exe/dll/msi 的东西，该项目将在没有源代码的目标机器上运行。

任何人都有一个解决方案，我必须在不提供源代码的情况下提供我的项目的构建。

我们可以创建一个 .exe 的 Web 应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:44:59.597

伙计，我已经和一些系统管理员讨论过你的问题

您在主机级别的问题解决方案部署您的站点限制公共访问并在本地计算机上添加 ip

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:07:27.877

在 Web 服务器上发布您的 Web 应用程序，并让目标机器通过 url 访问它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:07:49.750

我不知道我是否明白，但您可以将 webapp 的构建发送到您的目标服务器。看看部署网络应用程序：http: [//www.codeproject.com/Articles/53075/How-to-deploy-ASP-NET-Web-Application-on-server](http://www.codeproject.com/Articles/53075/How-to-deploy-ASP-NET-Web-Application-on-server)

# php - Chargify 通过 api 或代码更新产品价格

> ID：12297549
> 
> 赞同：1
> 
> 时间：2012-09-06T10:01:37.543
> 
> 标签：php, drupal, chargify

我正在使用 Chargify API 进行付款。我在那里创建了一些产品供订阅。现在我想通过我的站点管理面板管理这些产品价格和其他设置。但我在 Chargify API 中找不到任何功能或任何方式。如果有人知道通过 api 或代码更新此内容的任何方法，请告诉我。

在此先感谢大家，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-30T14:42:51.403

我很抱歉把它带回来，但我遇到了同样的问题，在我的测试中（目前）我能够更新发出 PUT 请求的产品。

**PUT**请求必须发送到以下 url ：

```
http://<site>.chargify.com/products/<product_id> 
```

并且只在正文中发送需要更新的字段。

例子：

```
PUT https://mysite.chargify.com/products/7358179 HTTP/1.1
User-Agent: Fiddler
Authorization: <your authorization token>
Accept: application/xml
Content-Type: application/xml
Host: mysite.chargify.com
Content-Length: 106

<?xml version="1.0" encoding="utf-8"?>
<product>
    <price_in_cents>2100</price_in_cents>
</product> 
```

希望这有助于像我一样使用搜索引擎找到此页面的其他用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T13:40:13.390

您似乎无法更改现有产品的价格（这似乎很奇怪），只能创建新产品。[来源](http://docs.chargify.com/api-products)。

但是，您可以[对现有订阅进行调整](http://docs.chargify.com/api-adjustments)。

# .net - 找不到存储过程''

> ID：12297551
> 
> 赞同：0
> 
> 时间：2012-09-06T10:01:46.290
> 
> 标签：.net, sql, stored-procedures

我正在尝试将我的 SQL DB 查询作为存储过程发送。它并没有真正存储在数据库中，我正在动态创建它。这是代码（请原谅我的VB）：

```
Dim idOfChosenRecord As Integer = {Some value}
Dim myQuery As String  "SELECT [field] FROM [myDB].[myTable] WHERE [id]=@id"
Dim cmd As SqlCommand = New SqlCommand(myQuery, myConnectionInitializedAndOpen)
cmd.CommandType = CommandType.StoredProcedure
cmd.Parameters.Add(New SqlParameter("@id", idOfChosenRecord))
Dim Reader As SqlDataReader = cmdView.ExecuteReader() 
```

事实上，一个类似的函数在我的代码之前运行良好（只是它正在调用一个真正的存储过程），并且在整个模块中运行良好。不同之处在于我正在尝试当场创建查询。

错误信息是这个问题的奇怪标题： `Could not find stored procedure ''`- 在上述代码的最后一行捕获。

这将如何解决（最好不深入研究数据库本身......）？

发送

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T10:03:56.823

代替

```
cmd.CommandType = CommandType.StoredProcedure 
```

和

```
cmd.CommandType = CommandType.Text 
```

问题是您指定要调用存储过程，而实际上您只有一个查询。所以你应该指定这是一个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:04:13.140

你应该改变：

```
cmd.CommandType = CommandType.StoredProcedure 
```

至

```
cmd.CommandType = CommandType.Text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:04:34.260

你不能这样做。您不能即时创建存储过程。一旦您选择了，`CommandType.StoredProcedure`那么它会期望您将过程名称传递给`myQuery`. 所以你必须使用`cmd.CommandType = CommandType.Text`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:05:03.780

您需要将其更改为

```
cmd.CommandType = CommandType.Text 
```

存储过程不同于运行文本查询（就像您在此处所做的那样）。

# java - 在服务器中创建图像

> ID：12297552
> 
> 赞同：-2
> 
> 时间：2012-09-06T10:01:45.977
> 
> 标签：java, image, file, url, struts

如何在服务器中创建图像？

无论我可以使用`File`对象创建还是需要任何其他对象，请建议任何人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:17:25.343

在 Servlet 中可以：

*   创建一个`BufferedImage`.
*   在上面画画。
*   使用 ImageIO 将其序列化为 RAM 中的字节。
*   使用适当的内容类型向客户端提供字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:08:11.073

您可以使用[Java Api](http://docs.oracle.com/javase/tutorial/2d/images/drawonimage.html)来创建图像。并通过传递服务器路径将创建的图像保存到服务器中。

# .net - WCF 作为多个数据库的 Windows 服务

> ID：12297555
> 
> 赞同：0
> 
> 时间：2012-09-06T10:01:54.653
> 
> 标签：.net, windows, wcf, sql-server-2008, windows-services

我有一个作为 Windows 服务托管的 wcf 服务。此服务可以连接到多个数据库，因此在许多情况下，此服务将连接到多个客户端和多个数据库。在 Windows 服务中托管 wcf 是最佳做法吗？如果不是，最好的方法是什么？因为我们面临严重的性能问题，有时服务没有响应，所以我们被迫重新启动服务。提前感谢您的评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:41:14.287

在 Windows 服务中托管 WCF 是一个好主意，因为没有用户需要启动服务或需要登录。

您托管服务的方式不应影响性能。许多因素会影响您的性能，寻找内存泄漏和竞争条件，尤其是在多个 SQL 连接方面。

# objective-c - IOS 从 ABPerson 检索属性

> ID：12297556
> 
> 赞同：3
> 
> 时间：2012-09-06T10:01:55.027
> 
> 标签：objective-c, ios, addressbook, abperson

我应该检索/提取 ABPerson 的所有可用属性。[IOS ABPerson](https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html)官方文档 不包含MACOS可用方法【ABPerson属性】

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:41:03.400

**您可以使用个人信息属性**标题下的[ABPerson 参考](https://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html)中找到的所有属性创建一个 NSArray/NSSet 。

 **然后只需使用 for-in 像这样通过 NSArray 。

```
NSArray *allPropertiesForABPerson = [NSArray arrayWithObjects: @"kABPersonFirstNameProperty", @"kABPersonLastNameProperty", /*rest of props here*/, nil];

for (id property in allPropertiesForABPerson) {
  id valueForProperty = ABRecordCopyValue(theRecord, property);
  NSLog(@"Value: %@ for property: %@", valueForProperty, property);
  CFRelease(valueForProperty);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-06T02:26:04.783

假设您有一个`ABPerson`被调用的`myFriend`. 您可以通过以下方式访问其名字：

```
NSString* firstName = (__bridge_transfer NSString*)ABRecordCopyValue(myFriend, kABPersonFirstNameProperty); 
```

当然，您可以替换`kABPersonFirstNameProperty`为其他属性常量来获取其他属性。

这里是其中的一些：

```
kABPersonFirstNameProperty
kABPersonLastNameProperty
kABPersonMiddleNameProperty
kABPersonPrefixProperty
kABPersonSuffixProperty
kABPersonNicknameProperty
kABPersonFirstNamePhoneticProperty
ckABPersonLastNamePhoneticProperty
kABPersonMiddleNamePhoneticProperty
kABPersonOrganizationProperty
kABPersonJobTitleProperty
kABPersonDepartmentProperty
kABPersonEmailProperty
kABPersonBirthdayProperty
kABPersonNoteProperty
kABPersonCreationDateProperty
kABPersonModificationDateProperty 
```

有关 ABPerson 的更多信息： [https ://developer.apple.com/library/ios/documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/#//apple_ref/doc/constant_group/Personal_Information_Properties](https://developer.apple.com/library/ios/documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/#//apple_ref/doc/constant_group/Personal_Information_Properties)**

# mapreduce - RavenDB MapReduce Reduce 或聚合 MapReduce 结果服务器端

> ID：12297558
> 
> 赞同：2
> 
> 时间：2012-09-06T10:02:10.227
> 
> 标签：mapreduce, ravendb, aggregate

我经常会遇到想要减少 MapReduce 的情况。例如，如果我有两个对象，我想从一个对象获取版本，从另一个对象获取计数。

```
public class Visit {
    public string Id { get; set; }
    public string Version { get; set; }
}

public class Search {
    public string Id { get; set; }
    public string VisitId { get; set; }
}

public class MapReduceResult {
    public string VisitId { get; set; }
    public string Version { get; set; }
    public int Count { get; set; }
} 
```

减少时，我必须按 ID 和版本将访问和搜索分组在一起，以便能够获得每个版本的搜索次数。不幸的是，每次访问都会有一行，我们正在谈论数百万次。因此，将数据拉到客户端不是首选方式，而且 1024 对象限制也有点搞砸了。

如果我能以某种方式再次减少 MapReduce，这个问题就会得到解决。然后我第二次按版本分组，完全忽略 VisitId，并总结所有计数。有没有办法做到这一点？

甚至 Sum 都不能用于可查询，所以感觉就像我已经用完了服务器端选项。

你们有什么想法，我有任何意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:36:04.440

自 RavenDB 2.0 版以来，添加了一项新功能，可让您索引相关文档：

[http://ravendb.net/docs/2.0/client-api/querying/static-indexes/indexing-related-documents](http://ravendb.net/docs/2.0/client-api/querying/static-indexes/indexing-related-documents)

在您的情况下，索引将如下所示：

```
public class Index : AbstractIndexCreationTask<Search, Index.Result>
{
    public class Result
    {
        public string Version { get; set; }
        public int Count { get; set; }
    }

    public Index()
    {
        Map = searches => from search in searches
                          let visit = LoadDocument<Visit>(search.VisitId)
                          select new Result
                                     {
                                         Version = visit.Version,
                                         Count = 1
                                     };

        Reduce = results => from result in results
                            group result by result.Version
                            into g
                            select new Result
                                       {
                                           Version = g.Key,
                                           Count = g.Sum(x => x.Count)
                                       };
    }
} 
```

# c++ - 需要 C++ 中的算法用于通过 xpath 导航的 xml 文档

> ID：12297559
> 
> 赞同：0
> 
> 时间：2012-09-06T10:02:16.810
> 
> 标签：c++, xpath

在以下 XML 文档中...

```
<?xml version="1.0" encoding="utf-8"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
<SOAP-ENV:Body>
<x:Response xmlns:xcr="http:sefgvsefraerdv">
<folder id='82273' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns'http://srdefaredr/folders.xsd'>
<folder id='104018' name='account'/>
<folder id='104019' name='aaaaa'/>
<folder id='82277' name='Desktop' system='desktop'/>
<folder id='82278' name='Trashcan' system='trashcan'/>
<folder id='82279' name='Documents'>
       <folder id='82280' name='Music'/>
       <folder id='82281' name='Pictures'>
            <folder id='82282' name='Nature Album'/>
       </folder>
</folder>
<folder id='82283' name='Public' system='public'/>
<folder id='82284' name='music1'/>
<folder id='82286' name='music'>
     <folder id='105744' name='abba'/>
</folder>
</folder>

</x:Response>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我需要获取所有文件夹 ID 并打印它们。

例如，我是这样导航的：

```
 xpath.evaluate( /*/*/*/*/*[5]) 
```

我将获取 Document 中的所有文件夹。从那我需要`/*/*/*/*/*[5]/*` 得到音乐和图片，`/*/*/*/*/*[5]/*/*`只得到 Naturealbum。

然后一路返回`/*/*/*/*/*[6]` 并继续相同的..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:08:46.937

要获取所有 ID：

```
//folder/@id 
```

如果你有 notepad++，那么有一个用于测试 xpath 的 xpath 插件。

# servicestack - ServiceStack - RestService 选项

> ID：12297560
> 
> 赞同：4
> 
> 时间：2012-09-06T10:02:17.230
> 
> 标签：servicestack

ServiceStack RestService 具有 Get、Put、Post、Patch 的处理程序，但没有 Option。我想使用“选项”告诉客户在授权（角色）的情况下可以进行哪些操作。

这是可能的，不好的做法，已经在 ServiceStack 中实现了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T18:04:14.697

检查[ServiceStack 的新 API](https://github.com/ServiceStack/ServiceStack/wiki/New-Api)以处理 OPTION 请求，基本上，如果您想在 Options 请求上发回 CORS 标头，您现在可以执行以下操作：

```
public class ReqstarsService : Service
{
    [EnableCors]
    public void Options(Reqstar request) {}
} 
```

# eclipse - Ubuntu 64 位中的 SVNKit 或 JavaHL

> ID：12297565
> 
> 赞同：11
> 
> 时间：2012-09-06T10:02:36.997
> 
> 标签：eclipse, svn, svnkit, javahl

什么更好的 SVNKit 或 JavaHL

蚀

颠覆还是Subclipse？

每当我再次安装 Eclipse 时，都会怀疑一个比另一个更好，等等......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T11:47:27.203

归结为口味问题：

*   SVNKit 是对 Java 中 SVN 的完全重写。所以如果你使用这个连接器，你就是在运行“纯”java。

*   另一方面，JavaHL 是原始 C 库的本机绑定，因此您通过 JNI 调用编译后的 C+Code

目前这两个库都支持 SVN 1.7，但 SVNKit 在发布完整的 SVN 1.7 客户端时遇到了很多麻烦（由于 1.7 中的 SVN 工作副本修改）

因此，如果有新版本的 SVN，JavaHL 往往更早可用。但是大多数时候安装起来有点麻烦，因为它必须与您的 svn 安装二进制兼容（如果您不知道“二进制兼容”是什么意思，请使用 SVNKit）[感谢 centic 的评论！]

但最终两个后端都与 svn**完全兼容。**JavaHL 基本上是 SVN，SVNKit 执行所有 SVN 测试，结果正确

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T09:17:57.790

我会推荐 Subclipse (tigris)，因为我总是遇到 Subversive SVN 的同步问题，例如：

*   刷新 SVN 同步视图；
*   一些提交的文件保留在同步视图中
*   有时即使我提交了整个文件夹，有些文件仍然未提交。

这些副作用发生在 Windows 7 下的 Eclipse Indigo 和 RedHat (RHEL6.2) 下。

使用 Subclipse (tigris) 总是完美的（我在 Win7 下，我的同事在 Ubuntu 和 MacOS X 下）。

# url - 使用函数后如何维护 url？

> ID：12297566
> 
> 赞同：0
> 
> 时间：2012-09-06T10:02:41.623
> 
> 标签：url, jsf, navigation, managed-bean, faces-config

我的网址有问题。首先，我必须显示图像和图像的信息但是我需要单击一个按钮来显示我的信息。

这是显示图像和不显示信息的链接。门户/面孔/chicken.jsp?image_id=1

所以，在我点击按钮之后。它变成了portal/faces/chicken.jsp

我用于检索图像的代码需要 url image_id=1 因为我使用 request.getParameter("image_id") 来显示图像。

这是 jsf 中我的按钮的代码：

```
<h:commandButton action="#{bean1.checkwork}" value="Get Info" type="submit">
    <f:param name="id" value="#{param['image_id']}"></f:param>
</h:commandButton> 
```

这是我的 faces-config.xml 的代码：

```
<navigation-rule>
    <from-view-id>/MainPage.jsp</from-view-id>
    <navigation-case>
        <from-action>#{bean1.checkwork}</from-action>
        <from-outcome>successful</from-outcome>
        <to-view-id>chicken.jsp?image_id=#{param['image_id']}</to-view-id>
    </navigation-case>
</navigation-rule> 
```

这是我的功能的代码。

```
 public String checkwork()
      { 
           HttpServletRequest request = (HttpServletRequest)
           FacesContext.getCurrentInstance().getExternalContext().getRequest();
           String image_ID = null;
              if(request!=null)
              {
                   image_ID = request.getParameter("image_id");

                   images(image_ID);
                  student(matric);

               }
          else
          {
               System.out.println("fail");
                }

    return "successful";

} 
```

那么，它与 jsf、托管 bean 或 faces-config.xml 有什么关系吗？有人知道我的代码有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:11:40.203

当您按下按钮时，它确实不会再出现在 URL 中，因为命令按钮发送一个 POST 请求，其中包含请求**正文**中的参数而不是请求 URL。所以请求参数肯定是可用的。使用 HTTP 流量检查器（在 Chrome/IE9/Firebug 中按 F12）您可以看到它。

您的具体问题是由于您分配`<f:param>`了错误的名称而引起的。

```
<f:param name="id" value="#{param['image_id']}"></f:param> 
```

这样，它只能由 使用`request.getParameter("id")`，而不是`getParameter("image_id")`您尝试的那样。相应地修复名称：

```
<f:param name="image_id" value="#{param['image_id']}" /> 
```

至于您在使用“函数”（“函数”是错误术语，您的意思可能是“方法”、“操作方法”）之后维护 URL 的具体问题，只需使用 GET 而不是 POST。使用`<h:button>`而不是`<h:commandButton>`. 您只需要更改代码以调用（后）构造函数或`<f:event preRenderView>`与目标视图关联的 bean 中的实际操作。

* * *

**与具体问题无关**，有更好的方法可以在您的支持 bean 中获取它。

```
String imageId = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("image_id"); 
```

在`javax.servlet.*`您的 JSF 代码中导入即表明您正在以笨拙的方式做事。请注意，`request`它**永远不会**为空（否则 JSF 代码将如何执行？），因此 nullcheck on`request`也完全没有必要。

另一种方法是使用`@ManagedProperty`：

```
@ManagedProperty("#{param.image_id}")
private String imageId; // +setter 
```

不过，这仅适用于请求范围的 bean。

# jquery - jQuery 扩展适用于 jQuery 1.4.4 但不适用于 1.7.2

> ID：12297574
> 
> 赞同：1
> 
> 时间：2012-09-06T10:02:57.510
> 
> 标签：jquery

我需要基于 HTML 选择生成一个非常漂亮的下拉表单元素。我能找到的最好的（最适合这个项目）是这个：[http](http://demo.tutorialzine.com/2010/11/better-select-jquery-css3/select-jquery.html) ://demo.tutorialzine.com/2010/11/better-select-jquery-css3/select-jquery.html 。它通过将 HTML 元素替换为具有良好样式和动画效果的自定义标记来工作。都好。

但是，它不适用于较新版本的 jQuery。我设置了一个小提琴[http://jsfiddle.net/VTTyu/](http://jsfiddle.net/VTTyu/)，它显示了它的作用。它适用于 jQuery 1.4.4，但是当您将其更改为使用 jQuery 1.7.2（我在项目的其他地方使用）时，它停止工作。

我知道我可以通读过去 18 个月中每个 jQuery 版本的发行说明，并尝试确定导致此问题的可能变化，但我想知道是否有经验更丰富的人可以识别问题？

任何指针/建议将不胜感激，谢谢大家。

编辑：在 fiddle 上进行更多测试后，它似乎可以使用 jQuery 到 1.5.2，但之后的任何版本和下拉按钮都会从页面中消失。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:11:38.780

`className`用(quotes too)替换 (twice)`'class'`并看到奇迹发生。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T10:13:25.817

的用途`attr`被改变了，所以

```
select.attr('selectedIndex') 
```

相反，不会在 1.6 之后工作；

```
select.prop('selectedIndex') 
```

见评论[`.prop`](http://api.jquery.com/prop/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T10:17:52.927

自`.attr()`jQuery 1.6 起不再支持获取 DOM 对象属性。所以使用该`.prop()`方法代替这一行`if(i==select.prop('selectedIndex')){ }`

[看到这个更新`.attr()`](http://ejohn.org/blog/jquery-16-and-attr/)

# c++ - // 在包裹的命令行中取消空格

> ID：12297578
> 
> 赞同：5
> 
> 时间：2012-09-06T10:03:08.287
> 
> 标签：c++, c, uncrustify

我使用带有以下参数的 uncrustify：

```
sp_cmt_cpp_start                = force         # Add space after opening '//'
cmt_width                       = 78 
```

**输入：**

`bi.dwSize = sizeof (bi); //Size of the structure itself, must be initialized with sizeof(CGOSBOARDINFO)`

**输出：**

```
bi.dwSize = sizeof(bi); // Size of the structure itself, must be
                              //initialized with sizeof(CGOSBOARDINFO) 
```

但在 // 在第二行*“//initialized”*之后，它**应该如下所示**：

```
bi.dwSize = sizeof(bi); // Size of the structure itself, must be
                              // initialized with sizeof(CGOSBOARDINFO) 
```

有谁知道如何解决这个小问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T22:19:08.637

我已经针对 uncrustify 提出了这个问题。如果你关心并且能够从源头重建 unrustify，我也有一个可能的修复。

[https://github.com/bengardner/uncrustify/issues/95](https://github.com/bengardner/uncrustify/issues/95)

作为一种解决方法，您可以简单地更改`force`为`add`在您的 uncrustify 配置中。这似乎具有正确的行为，只要您的评论不包含嵌入的双空格和三空格。（面对连续的空白字符时，uncrustify 的换行有点古怪。）

**编辑：**截至 2012 年 12 月 4 日，该错误已在 master 中修复：[https ://github.com/bengardner/uncrustify/commit/44e0253a](https://github.com/bengardner/uncrustify/commit/44e0253a)

# c++ - 如何调试 ActiveX 控件 (OCX)，或使其记录错误？

> ID：12297579
> 
> 赞同：5
> 
> 时间：2012-09-06T10:03:08.910
> 
> 标签：c++, debugging, mfc, error-handling, activex

我目前正在使用一个相当老的 Borland C++ 应用程序，它使用 ActiveX 组件来绘制一些图形。在应用程序中使用 ActiveX 组合的多个窗口。可以随时打开 - 这些可以显示相同的图形（不同的缩放系数等），也可以显示不同的图形。

该应用程序用于定位，ActiveX 用于绘制和显示不同单元的位置。

Borland 应用程序大约每秒 10 次获得一个新位置，并找出哪些表单（及其 ActiveX）需要知道更新后的位置才能绘制它。这已经进行了很长时间，但我不得不在 ActiveX 中为新版本的产品做相当多的更改。

大约一年前，我还不得不对组件进行一些小改动，我发现应用程序可能会以某种状态结束，从而导致组件中出现“索引越界”错误。这样做的结果不是显示错误或程序终止，而是应用程序开始使用大量内存 - 并且一直在快速增长。在某些时候它停止了，并且出现错误的组件只是停止显示任何东西（停止绘图本身）。

现在，随着我最近所做的更改，我遇到了同样的问题，其中一个组件似乎出现了错误，没有显示出来，而是没有重新绘制本身，并且内存使用量正在飙升。在某些 PC 上，似乎引发了访问冲突 - 这表示错误发生在 OCX 中，但在我开发的 PC 上，我无法以任何方式获得此访问冲突。

此外，我无法准确追踪错误发生的时间 - 即导致错误的原因。我可以在 15 分钟内连续运行 10 次相同的设置，有时会发生内存使用增加和组件错误，其他时候什么也没有发生，并且它在整个持续时间内都正常运行。

由于它是一个 OCX，它是使用 regsvr32 注册的，因此在代码方面不是主应用程序的一部分。因此我不能使用断点并以这种方式调试它。

我很确定组件内部发生了一些错误，没有传递，所以我看不到它是什么。

那么有人知道我该如何调试吗？我可以以某种方式让 OCX 记录发生的任何错误，或者让它显示错误，或者我能做什么？

任何帮助将不胜感激 - 现在已经尝试追踪错误 3 天，但没有任何结果。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T10:53:15.820

本质上，您是在问如何调试 DLL。OCX 只是一个加载到进程中的 DLL 文件。这是一个有点宽泛的话题，但我会尝试给出一个简短的开始：

DLL / EXE / OCX 文件在 Windows 编程环境中通常被称为“模块”。它们基本上都是一样的。为了清楚起见，我将在这里称它们为 DLL。

调试器（Visual Studio 和 Borland 既是调试器也是 IDE）像寄生虫一样“附加”到进程，允许您执行设置断点、读取进程内存、查看堆栈跟踪等操作。它们可以查看/操作所有内存和该进程的资源，包括所有 DLL。

DLL 不包含太多信息来帮助调试器，即使在调试版本中也是如此。它们基本上只包含二进制机器代码，如果您使用调试器进入 DLL 调用，您将只能看到汇编代码——而不是原始源代码。函数只是内存中的地址，局部变量甚至是不可见的；您只能获得一些指向堆栈内存的指针。

PDB 文件（“程序数据库”）包含所有附加信息和元数据，供调试器执行，例如将内存中的地址映射到源代码行、局部变量、数据类型、函数签名等。这些信息称为“调试符号”或只是“符号”。当 Visual Studio 构建一个 DLL 时，它会输出一个相应的 PDB 文件。正是这个 PDB 文件实现了在调试器中单步执行源代码、查看局部变量、在监视窗口中正确查看数据类型的所有魔力。

当 Visual Studio 的调试器附加到进程并看到正在加载的 DLL 时，它会搜索其对应的 PDB 文件。它在许多地方寻找这个 - 其中最简单的是在与 DLL 相同的文件夹中。所以如果你加载`C:\something\myctl.ocx`了，它会寻找`C:\something\myctl.pdb`. 如果它可以找到它，它将使用它，您可以使用丰富的调试器支持来调试 DLL。如果它找不到它，您将处于现在的位置 - DLL 调用是一个您无法看到的黑盒子。

微软甚至为 Windows DLL 提供 PDB 文件，例如`ntdll.dll`. 必须根据需要下载它们。Visual Studio 可以通过转到自动执行此操作，`Tools -> Options -> Debugging -> Symbols`并且应该有一个选项来使用 Microsoft 符号服务器自动获取丢失的符号文件。

让您朝着正确方向前进的小例子：

假设您编写了一个名为 OCX `myctl.ocx`，当它添加到写字板文档时会崩溃。调试的方法是将调试器附加到`wordpad.exe`. `Debug -> Attach to Process`我相信在 Visual Studio 中。附加后，您甚至可以在输出窗口中看到：

```
'wordpad.exe': Loaded 'C:\Program Files\Windows NT\Accessories\wordpad.exe', Symbols loaded (source information stripped).
'wordpad.exe': Loaded 'C:\Windows\System32\ntdll.dll', Symbols loaded (source information stripped).
'wordpad.exe': Loaded 'C:\Windows\System32\kernel32.dll', Symbols loaded (source information stripped).
'wordpad.exe': Loaded 'C:\Windows\System32\KernelBase.dll', Symbols loaded (source information stripped).
... 
```

您可以看到 Visual Studio 如何加载为这些文件提供一些额外信息的 PDB 文件（符号文件）。当您加载时`myctl.ocx`，您也会看到该行。如果`myctl.pdb`可以访问，它也会加载它。

```
'wordpad.exe': Loaded 'C:\something\myctl.ocx', Symbols loaded. 
```

`myctl.ocx`有了这个，您可以使用源代码和所有内容调试任何内容。当写字板在 中崩溃时`myctl.ocx`，它应该向您显示源代码和所有内容，再次假设它位于可访问的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-26T23:04:11.140

**如何在IE.10 + WIN8 64bit + VS2008下调试OCX/C++**

*   在 vs2008 中构建您的 ocx，将 ocx CSID 标签添加到您的 html 中。
*   保持 TabProcGrowth 为中等（不改变！！）
*   使用命令设置VS2008 OCX项目调试`C:\Program Files (x86)\Internet Explorer\iexplore.exe,Attach = Yes,Debugger Type=Native Only`
*   打开 Internet Explorer 10 窗体 WIN8 任务栏。
*   在 Internet Explorer 10 的 url 中键入目标 ocx htm 文件路径。然后按 enter 键加载 htm。
*   加载了 ocx，您需要启用 IE.10 ActiveX 模式。
*   当 IE10 准备好 ActiveX 模式时，运行您的 VS2008 OCX 项目，该项目会将 IE10 与您的断点连接起来。
*   再次刷新 IE.10 html 以重新加载 ocx 并开始调试您的 ocx 源代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T10:08:49.407

将代码添加到 OCX，它会打开一个文件并打印正在发生的事情，可能带有时间戳。日志内容可能包括执行流程、输入值、关键变量值、重要的内部状态。

至少我会这样处理它。

# c# - 将 SQL 转换为 LINQ 格式的 where 子句

> ID：12297580
> 
> 赞同：0
> 
> 时间：2012-09-06T10:03:23.807
> 
> 标签：c#, .net, sql, linq, sql-to-linq-conversion

```
 Qry = "select childID,ChildEmail,ChildUserID, ChildPassword from ChildProfile ";
 Qry = Qry + " where ucase(ChildFName) = '" 
           + Strings.UCase(Strings.Trim(Txtname.Text)) 
           + "' and ucase(childlname) = '" 
           + Strings.UCase(Strings.Trim(txtSurName.Text)) 
           + "' and childmobile = '" 
           + Strings.Trim(txtMobile.Text) + "'"; 
```

我们如何将此查询转换为 LINQ

```
List<PatientDTO> lstChildProf = objService.GetAllPatient();
    lstChildProf = new List<PatientDTO>(
        from l in lstChildProf where 
        ); 
```

不知道这里的where子句怎么写

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:10:16.970

就像是：

```
List<PatientDTO> lstChildProf = objService.GetAllPatient()
    .Where( l => l.ChildFName == Strings.UCase(Strings.Trim(Txtname.Text))
            && l.ChildName == Strings.UCase(Strings.Trim(txtSurName.Text)) 
            && l.chiuldMob == Strings.Trim(txtMobile.Text))
    .ToList<PatientDTO>(); 
```

# sql - 如何在整个表的每个组中对 Oracle SQL 进行排名？

> ID：12297585
> 
> 赞同：1
> 
> 时间：2012-09-06T10:03:40.490
> 
> 标签：sql, oracle

我正在使用 Oracle SQL Developer 尝试从 HR 表中自动计算缺勤时间。此表具有以下相关字段： Person_Ref - 唯一人员标识符 START_DATE - 缺勤期开始的日期。COMPDATE - 似乎是一个向下计数的 6 位数字，所以最低的数字是最近的。我最终希望编写一个语句，对每个人的缺勤开始日期进行排名，取最新的 START_DATE（即最低 COMPDATE）和第三个最新的 START_DATE，然后用数学方法计算它们之间的天数（nb 这个表包含几十年的缺席时，每个条目都根据 PERSON_REF 编制索引）。这是一项业务要求，用于报告在 12 个月内缺勤超过 3 次的情况（即

我打算首先将 PERSON_REF、最新的 START_DATE、第三个最新的 START_DATE 和 COMPDATE 提取到一个单独的表中，希望每个 PERSON_REF 一行，然后在 Visual Studio 中执行其余的逻辑。然而，这是我的 SQL 知识让我失望的地方。

如果我为特定的 PERSON_REF 运行此语句，我可以轻松地返回排名日期：

```
SELECT D57.PERSON_REF, D57.START_DATE, D57.COMPDATE, RANK() OVER (ORDER BY D57.COMPDATE asc) rnk
From D57
WHERE D57.PERSON_REF='050050713'; 
```

从那里我可以从其余查询的结果中选择第一个和第三个日期。

但是，如果我删除了 WHERE 命令，那么显然它只是按顺序排列整个表。

我真正想知道的是，如何编写此子查询以返回表中每个 PERSON_REF 的每个 PERSON_REF 的排名结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:04:40.623

使用`Partition by`子句

```
SELECT 
    D57.PERSON_REF, D57.START_DATE, D57.COMPDATE, 
    RANK() OVER (PARTITION BY PERSON_REF ORDER BY D57.COMPDATE asc) rnk 
FROM D57 
```

# windows-7 - 什么时候管理员不是管理员？（Windows 7的）

> ID：12297586
> 
> 赞同：1
> 
> 时间：2012-09-06T10:03:41.957
> 
> 标签：windows-7, permissions, privileges

我正在运行 Windows7 Prof SP1。

我的日常工作帐户属于一个域，我们将此帐户称为 DOMAIN\Me。

我也可以作为 root 用户帐户登录，但我不想将其用作我的日常帐户。但是有很多事情是 root 帐户有权执行/运行 DOMAIN\Me 没有的，即使：

1.  DOMAIN\Me 属于管理员组（尽管请注意，我必须在每次重新启动时将其重新添加到该组，因为 Windows 会“忘记”）。
2.  DOMAIN\Me 是所有者，对整个硬盘具有完全控制权。
3.  UAC 完全关闭。

作为说明，这是一个以 DOMAIN\Me 身份登录时未能安装程序的屏幕截图（是的，我确实“以管理员身份运行”），同时我打开了用户帐户窗口，显示我是管理员：[屏幕截图](http://www.tiikoni.com/tis/view/?id=d9dc755)。

许多程序声称我没有管理员权限和其他我不允许做的事情，包括编辑 Windows 防火墙高级设置或检查硬盘驱动器是否有错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:24:21.880

如果您将语句 1 和屏幕截图中管理员窗口底部的小文本结合起来（“更改在下次登录之前无效”）。这两个语句结合起来告诉我 DOMAIN\Me**从未**被系统视为管理员组的成员。这可以解释你的问题。

# xml - 为笠美光盘系统定制应用程序

> ID：12297587
> 
> 赞同：0
> 
> 时间：2012-09-06T10:03:43.963
> 
> 标签：xml

有没有人尝试过创建自定义应用程序以与笠美系统集成，尤其是 dsic 发布系统？喜欢使用它的 API、客户端 API 还是 RapidAPI？谁能分享一些概念？就像在它的 XML 部分中一样，并使用它的 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:29:50.527

是的，笠美有许多客户使用我们的 API 定制应用程序。如需进一步信息，请致电 866-587-5903 联系笠美内部销售部。

# python - pymssql callproc unicode - 返回错误

> ID：12297589
> 
> 赞同：0
> 
> 时间：2012-09-06T10:03:47.433
> 
> 标签：python, sql-server, unicode, pymssql

我需要通过 callproc 调用“sp_executesql”的帮助（我需要它作为 RPC）。这是我的代码：

```
import pymssql
conn = pymssql.connect(host='11.22.33.44:1433', user='sa', password='XYZ', database='AdventureWorks')
cur = conn.cursor()
cur.callproc("sp_executesql", 'SELECT * FROM AdventureWorks.HumanResources.Employee WHERE BusinessEntityID = 109') 
```

我收到此错误：

```
 File "executesql.py", line 4, in <module>
    cur.callproc("sp_executesql", 'SELECT * FROM AdventureWorks.HumanResources.Employee WHERE BusinessEntityID = 109')
  File "pymssql.pyx", line 357, in pymssql.Cursor.callproc (pymssql.c:4238)
    self._returnvalue = proc.execute()
  File "_mssql.pyx", line 1289, in _mssql.MSSQLStoredProcedure.execute (_mssql.c:12177)
    check_cancel_and_raise(rtc, self.conn)
  File "_mssql.pyx", line 1322, in _mssql.check_cancel_and_raise (_mssql.c:12473)
    return maybe_raise_MSSQLDatabaseException(conn)
  File "_mssql.pyx", line 1366, in _mssql.maybe_raise_MSSQLDatabaseException (_mssql.c:13067)
    raise ex
_mssql.MSSQLDatabaseException: (214, "Procedure expects parameter '@statement' of type 'ntext/nchar/nvarchar'.DB-Lib error message 214, severity 16:\nGeneral SQL Server error: Check messages from the SQL Server\n") 
```

运行其他存储过程很顺利。将字符串作为 unicode (u'Select...') 运行会出现此错误：

```
Traceback (most recent call last):
  File "executesql.py", line 4, in <module>
    cur.callproc("sp_executesql", u'SELECT * FROM AdventureWorks.HumanResources.Employee WHERE BusinessEntityID = 109')
  File "pymssql.pyx", line 354, in pymssql.Cursor.callproc (pymssql.c:4177)
    raise NotSupportedError('Unable to determine database type')
pymssql.NotSupportedError: Unable to determine database type 
```

你知道如何克服这个吗？

SQL Server 是 Microsoft SQL Server 2012 - 11.0.2100.60 (X64) Feb 10 2012 19:39:15 版权所有 (c) Microsoft Corporation Enterprise Edition (64-bit) o​​n Windows NT 6.1 (Build 7601: Service Pack 1) (Hypervisor)

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T17:10:25.663

我遇到了同样的问题。似乎已在[第 56 期](http://code.google.com/p/pymssql/issues/detail?id=56)报告。至今无解。:(

更新：我找到了“无”问题的解决方案。[在这里](https://stackoverflow.com/questions/12938301/passing-nulls-to-stored-procedure-in-python/12939960#12939960)查看我的线程。

# file - java中的https文件传输

> ID：12297595
> 
> 赞同：0
> 
> 时间：2012-09-06T10:04:07.193
> 
> 标签：file, https, file-transfer

我需要使用 java 代码使用 https 协议在两台计算机之间传输文件。我不知道从哪里开始。使用套接字传输是唯一的方法吗？我是否一定需要在服务器上运行一个代码，在客户端上运行一个代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:00:58.383

如果您想要下载的机器上已经有 https 服务器（apache、IIS...），那么您将只需要客户端。除非您的要求是为服务器和客户端编写代码。
一般说明：是的，为了通过 https 在两台计算机之间传输文件，您需要服务器和客户端。

# iphone - ASIHTTPRequest 下载文件第二次失败

> ID：12297596
> 
> 赞同：1
> 
> 时间：2012-09-06T10:04:08.957
> 
> 标签：iphone, ios, ipad, asihttprequest

我正在使用 ASIHTTP 从服务器下载一些文档。我有一个按钮，它首先控制本地版本（保存在 iPad 文件系统上）和服务器版本之间的差异，然后（在确认警报视图之后）开始下载。要下载文档，我使用以下代码：

```
for (SyncNode *node in _syncDocuments) {
        //SyncNode is a my Class that handle document
        // start the download
        NSString *filename = [NSString stringWithFormat:@"%@.%@",node.uniqueIdentifier,node.extension];
        NSString *tempPath = [SavedDocument pathToSyncFile:filename];
        // tempPath is a string like this
        // /var/mobile/Applications/5C05AA6F-55B3-46FD-8330-094BD0E61973/Documents/SyncDocumentsFolder/D49B421C-7528-4A3D-A8F6-942FF03881D0/f2e650e2-cff7-4485-9152-5445bee436f2.jpg

        //BaseHTTPRequest is an extension of ASIHTTPRequest
        BaseHTTPRequest *request = [[[BaseHTTPRequest alloc] initWithURL:[NSURL URLWithString:node.contentLocation] accountUUID:_uuid] autorelease];
        request.userInfo = [NSDictionary dictionaryWithObject:[NSNumber numberWithInt:i+1] forKey:@"requestNumber"];
        [request setDelegate:self];
        [request setShowAccurateProgress:YES];
        [request setDownloadProgressDelegate:self];
        [request setDownloadDestinationPath:tempPath];

        [request startAsynchronous];
} 
```

设想。

1.  我没有任何本地文件存储在 iPad 上
2.  我按下按钮，程序计算下载的大小
3.  我接受下载，并且例行程序会下载所有文档。当我尝试显示其中一个文档（在 Web 视图中）时，它工作正常，我可以看到该文档。
4.  我删除了所有本地文档（删除过程完美，实际上文档存在于文件系统中）。

现在，我处于与 1 相同的情况。但是当我尝试再次（第二次）下载相同的文档时，所有 ASIHTTPRequest 都会`- (void)requestFinished:(ASIHTTPRequest *)request`在很短的时间间隔内返回并调用我的方法。示例：我有一个包含 8MB 文档的目录；第一次例程需要 11 或 12 秒才能完成所有下载。取而代之的是第二次同样的例程，同样的文件需要不到 1 秒的时间来完成所有的下载。

似乎下载没有运行，但 ASIHTTP 没有调用任何错误委托方法。

当我尝试显示下载的文档（第二次）时，我在控制台中看到此错误消息：

```
 Error copying file to temp path Error Domain=NSCocoaErrorDomain Code=260 "The operation
 couldn’t be completed. (Cocoa error 260.)" UserInfo=0x1229e900 
{NSFilePath=/var/mobile/Applications/5C05AA6F-55B3-46FD-8330-
094BD0E61973/Documents/SyncDocumentsFolder/D49B421C-7528-4A3D-A8F6-942FF03881D0/f2e650e2-cff7-
4485-9152-5445bee436f2.jpg, NSUnderlyingError=0x1229e570 "The operation couldn’t be completed. 
No such file or directory"} 
```

这个问题把我逼疯了！有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:19:28.840

尝试使用属性为您的请求设置缓存策略`setCachePolicy`。

```
[request setCachePolicy:(ASIDoNotReadFromCacheCachePolicy | ASIDoNotWriteToCacheCachePolicy)]; 
```

有关更多信息，请阅读：[http ://allseeing-i.com/ASIHTTPRequest/How-to-use#using_a_download_cache](http://allseeing-i.com/ASIHTTPRequest/How-to-use#using_a_download_cache)

# magento - 需要在 Magento 中限制产品价格附近的附加信息

> ID：12297598
> 
> 赞同：0
> 
> 时间：2012-09-06T10:04:11.940
> 
> 标签：magento, product

我在 Magento 商店工作，我想在产品视图页面中添加一些与价格接近的价格相关的信息。所以我在 price.phtml 文件中添加了相同的价格。但问题是，在所有调用产品价格的区块中，附加信息都伴随着价格。

例如，该信息也出现在产品列表页面、产品比较和最新产品中。我想限制它并仅在产品视图页面中显示信息。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:43:55.187

使用句柄，在价格块内容呈现的位置之后`<catalog_product_view>`，将您自己的块中的附加信息添加到*catalog/product/view.phtml模板。*或者，做同样的事情，但将`getChildHtml`调用添加到价格块。

# html - 如何删除选择输入的默认镀铬样式？

> ID：12297600
> 
> 赞同：54
> 
> 时间：2012-09-06T10:04:13.000
> 
> 标签：html, css

如何删除所选输入的默认黄色框边框并在 chrome 或任何浏览器（如 safari）中选择字段？我想使用自定义框阴影 css 自定义输入。如何删除默认浏览器选择边框？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-09-06T10:05:57.253

```
-webkit-appearance: none; 
```

并添加自己的风格

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-06T10:08:51.073

```
textarea, input { outline: none; } 
```

通过[https://stackoverflow.com/a/935572/1036298](https://stackoverflow.com/a/935572/1036298)

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-01-24T13:49:13.267

混入更少

```
.appearance (@value: none) {
    -webkit-appearance:     @value;
    -moz-appearance:        @value;
    -ms-appearance:         @value;
    -o-appearance:          @value;
    appearance:             @value;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-04-07T12:46:39.057

使用简单的代码删除大纲的默认浏览器样式

```
input { outline: none; } 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-06T10:06:47.253

在你的 CSS 中添加：

```
input {-webkit-appearance: none; box-shadow: none !important; }
:-webkit-autofill { color: #fff !important; } 
```

*仅适用于 Chrome！*:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-09-06T10:06:48.013

```
input:-webkit-autofill {
    background: #fff !important;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-28T04:28:36.797

您是在谈论单击输入框时，而不是仅仅将鼠标悬停在它上面吗？这为我修复了它：

```
input:focus {
   outline: none;
   border: specify yours;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-13T19:30:34.917

应用属性之前 box-shadow : 无 [![应用属性之前 box-shadow : 无](../Images/5ca44aa6a2b02063b294fd46a89fbca7.png)](https://i.stack.imgur.com/UCxr3.png)

应用属性 box-shadow 后：无 [![应用属性 box-shadow 后：无](../Images/318203bd42553d61b841b109bc5e1e5c.png)](https://i.stack.imgur.com/yB3UA.png)

这是最简单的解决方案，它对我有用

```
input {
   box-shadow : none;  
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-05T17:15:24.390

查看带有数字类型的输入时，您会注意到输入字段右侧的微调按钮（向上/向下）。这些微调器并不总是可取的，因此下面的代码删除了此类样式以呈现类似于具有文本类型的输入的输入。

[![在此处输入图像描述](../Images/be0765f1f955ff8da8acc0bc5a7ae89e.png)](https://i.stack.imgur.com/LBKLO.png)

```
input[type=number]::-webkit-inner-spin-button, 
input[type=number]::-webkit-outer-spin-button { 
  -webkit-appearance: none; 
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-14T11:48:58.363

当您单击输入框时，您可以看到默认样式。您想删除它并添加自己的样式，然后应用下面的代码...

方法一：

```
input:focus {
    outline: none;
 }
```

方法二：

```
input:focus, textarea:focus, select:focus{
        outline: none;
}
```

希望对你有用...

# mysql - 仅从字符串中提取字符

> ID：12297601
> 
> 赞同：1
> 
> 时间：2012-09-06T10:04:15.710
> 
> 标签：mysql

我有一个列值

```
lut00006300.txt  
sand2a0000300.raw 
```

我只需要从上面给定的列值中提取字符数据。我尝试了以下查询并能够获得前三个字符。

```
select filesize,
substring(Filename  FROM 1 FOR 3) AS Instrument from Collection; 
```

有没有办法只从列值中提取字符而留下扩展名

结果应该是：

```
LUT  
SAND2A 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:37:49.983

```
SELECT
filesize,
UPPER(SUBSTRING_INDEX(SUBSTRING_INDEX(Filename, '.', 1), '0', 1)) AS Instrument
FROM Collection; 
```

这是一个**肮脏**的解决方案，因为您想拥有`2`in `SAND2A`.

[在此处](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html)阅读有关功能的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:28:55.513

I think below query will helps you.

```
select filesize,Filename from Collection where Filename REGEXP '[:alpha]'; 
```

Refer:- [http://dev.mysql.com/doc/refman/5.1/en/regexp.html](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)

# asp.net - 在 IIS6 上访问名称中包含德语字符的 xml 文件时出现 404

> ID：12297602
> 
> 赞同：1
> 
> 时间：2012-09-06T10:04:24.040
> 
> 标签：asp.net, iis-6, iis-7.5, isapi-rewrite

我有一个用 ASP.NET 开发的 Web 应用程序。此应用程序在 windows 2003 服务器上的 IIS 6 上设置，在 windows 2008 服务器上的 IIS 7.5 上设置相同的应用程序。我在网站的根目录上有一些 xml 文件，其中包含德语的特殊字符，即 ä、ö 等。当我尝试访问此文件时，例如： http:
[//mytestxml.com/äötest.xml](http://mytestxml.com/%C3%A4%C3%B6test.xml)，它可以在 IIS 7.5 上访问，但是当我尝试在 IIS 6 上访问相同内容时，会出现 404 错误。只想提一下，在 IIS 7.5 上没有做任何工作。

任何人都可以就这个问题提出建议。如何解决？我真的很困扰它，需要尽快解决它。任何帮助将不胜感激。

# php - 从另一个页面加载 xml

> ID：12297605
> 
> 赞同：0
> 
> 时间：2012-09-06T10:04:26.870
> 
> 标签：php, xml, facebook

我正在尝试在我的网站中加载此页面 [https://developers.facebook.com/blog/feed](https://developers.facebook.com/blog/feed) ，但没有成功。我正在使用此代码

```
<?php
$xml = simplexml_load_file('https://developers.facebook.com/blog/feed/');
   print_r($xml);

?> 
```

但我收到很多这样的错误

> 警告：simplexml_load_file() [function.simplexml-load-file]： [https](https://developers.facebook.com/blog/feed/:10) ://developers.facebook.com/blog/feed/ :10：解析器错误：xmlParseEntityRef：第 2 行 /fb_feed/fb_feed.php 中没有名称

感谢所有帮助我的人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:13:08.377

我认为这是 XML 提要本身的问题。

[见这篇文章](http://www.stevenmarkford.com/resolution-xmlparseentityref-noname-xml-error/)。

使用 file_get_contents 加载字符串，并在 & 号上执行 str_replace 以

```
&amp; 
```

所以留给你

```
$xml = simplexml_load_string(str_replace('&','&amp;',file_get_contents('https://developers.facebook.com/blog/feed/'))); 
```

编辑：

刚刚在评论中看到，之前已经解决了这个问题，并且 str_replace 可以从我原来的改进为

```
$xml = simplexml_load_string(str_replace(array("&amp;", "&"), array("&", "&amp;"),file_get_contents('https://developers.facebook.com/blog/feed/'))); 
```

这避免了转换已经正确编码的 & 符号。

编辑 2：

Facebook 将来自 file_get_contents 的请求重定向到浏览器选择页面。所以我们需要“欺骗”它，让它认为我们使用的是普通浏览器。

```
$url='https://developers.facebook.com/blog/feed/';
$crl = curl_init();
$timeout = 5;
curl_setopt ($crl, CURLOPT_URL,$url);
curl_setopt ($crl, CURLOPT_RETURNTRANSFER, 1);
curl_setopt ($crl, CURLOPT_CONNECTTIMEOUT, $timeout);
curl_setopt($crl,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
$ret = curl_exec($crl);
curl_close($crl);
$xml = simplexml_load_string(str_replace(array("&amp;", "&"),array("&", "&amp;"),$ret));     
var_dump($xml); 
```

第一个答案在大多数情况下应该有效，但编辑 2 适用于 Facebook Dev 博客，或任何其他基于用户代理标头重定向的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:08:21.970

可能是您需要按照[此页面](http://php.net/manual/en/function.simplexml-load-file.php)的建议对 url 进行编码

```
simplexml_load_file(rawurlencode('https://developers.facebook.com/blog/feed/')) 
```

如果这不起作用，您可以尝试加载文件`file_get_contents`并将返回值传递给 xml 解析器：

```
simplexml_load_string( file_get_contents('https://developers.facebook.com/blog/feed/') ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:09:35.473

```
<?php
$url = "https://developers.facebook.com/blog/feed/";
$xml = str_replace('&','&amp;', file_get_contents($url));
$xml = simplexml_load_string($xml);
print_r($xml);
?> 
```

# visual-studio-2010 - 原生多目标以何种方式影响构建的输出

> ID：12297607
> 
> 赞同：1
> 
> 时间：2012-09-06T10:04:29.790
> 
> 标签：visual-studio-2010, build, msbuild, access-violation, multi-targeting

我有一个由 c++ 和 c# 项目组合而成的大型解决方案，其中大部分输出 dll。我们还有一个可执行文件，它取决于这些项目的输出。我们的整个解决方案目前是在 VS2005 中构建的。由于多种原因，我们的构建必须针对 v80，但我们终于找到时间迁移到 2010 IDE。

当我们在 2010 年构建时，我们的解决方案都可以正常编译，但是在运行应用程序时我们遇到了访问冲突。此异常发生在许多场景中，但始终在代码中的同一点发生 - 它还显示为“在用户回调期间遇到的异常”。如果我们编辑掉抛出异常的代码行，它只是移动到其他地方，这是有道理的。我们遇到问题的场景如下：

2010 年针对 v80 工具集构建的所有 dll 和 exe。所有 dll 的构建于 2005 年，exe 构建于 2010 年，针对 v80 工具集。

值得注意的是，如果我们使用 2010 年构建的 dll（针对 v80）但 2005 年构建的 exe，一切正常。

那么我的问题是：2005 年构建的输出与使用 v80 工具集的 2010 年构建的输出有什么区别？

以上可能取决于是否可以完全匹配构建的命令行参数（即，c++ 和链接器配置），因为我们可能还没有完全正确。如果需要，我可以链接 2005 年和 2010 年的设置。

任何帮助将非常感激。

更新：我最近在 2005 年创建了一个非常简单的应用程序，由 dll 和 exe 组成。dll 有一个函数 static __declspec(dllexport) int add(int a, int b)。exe 是一个简单的控制台应用程序，它从 dll 中调用 add 函数。

然后我将其移植到 VS2010 并将其设置为 v80 工具集。构建它会产生一个与原始大小相同的 dll，但 exe 大 4KB。我正在使用垃圾箱来尝试找出原因，但目前我不太清楚。如果其他人可以在这个简单的情况下确定为什么 exe 的大小不同，这可能有助于解决我的整体问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:08:22.880

现在解决了这个问题，这个问题是由于默认情况下打开了 DEP 引起的。我可以向其他任何人确认，如果您使用相同的编译器和链接器设置，构建的输出应该并且将完全匹配。

# html - 防止页面刷新时加载

> ID：12297618
> 
> 赞同：-1
> 
> 时间：2012-09-06T10:04:56.367
> 
> 标签：html, forms

我有一个简单的 html 表单，它在提交点击时提交到数据库。到这里为止一切正常，但在那之后，当我刷新页面或页面再次加载时，值会重新提交。如何纠正这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:11:28.747

在您提交页面并且数据存储在数据库中后，使用成功重新加载同一页面

> `echo "<script>window.location='yourpagename.php'</script>";`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:07:21.747

提交表单后，重定向到另一个页面。然后刷新将无关紧要。

有关此模式的详细信息，请参阅Wikipedia 上的[发布/重定向/获取](http://en.wikipedia.org/wiki/Post/Redirect/Get)。

# c# - VS2012 中 C# 中的大括号样式

> ID：12297632
> 
> 赞同：2
> 
> 时间：2012-09-06T10:05:41.217
> 
> 标签：c#, coding-style, visual-studio-2012, curly-braces, curly-brackets

我想根据自己的喜好配置自动格式化大括号样式。我已经浏览了所有选项，但无法完全理解我喜欢的方式。

这是我首选格式的示例：

```
if (condition
 && anothercondition
   )
{
  DoStuff();
} else {
  DoOtherStuff();
}

try
{
   DoBadstuff();
} catch (System.Exception ex) {
   FixBadStuff();
} finally {
   CleanUp();
} 
```

所以基本上左括号应该在换行符上（我可以这样做）。但是右大括号，以及任何后续但相关的语句，以及它的左大括号都应该在一行上。IE

```
} else { 
```

现在我可以得到最后一部分了——但前提是我也将最初的左大括号放在同一行上。

有谁知道实现这一目标的任何方法？

我对 && 和 || 的格式不太在意 在 if - 这样的事情通常很少见，以至于它不会打扰我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:40:28.173

你不能这样做......（就个人而言，你不应该这是非常不一致的）

VS2012 将允许您更改整个关键字组的大括号行为。（例如所有控制块关键字）但不是单个单词（即 make`Try`的行为与 不同`catch`）

![VS2012 选项](../Images/e7672b90a61b2ce6c252c8715062b925.png)

# python - 为什么在循环中使用 OpenCV 的 QueryFrame 会不断增加 python 中的内存？

> ID：12297647
> 
> 赞同：1
> 
> 时间：2012-09-06T10:06:35.200
> 
> 标签：python, opencv

此脚本从网络摄像头拍摄照片并每小时保存一次：

```
import cv
import time

def f():
    camera = cv.CreateCameraCapture(0)
    time_ = time.strftime("%Y-%m-%d_%H:%M:%S")
    frame = cv.QueryFrame(camera)
    cv.SaveImage("%s.png" % time_, frame)

while True:
    f()
    time.sleep(3600) 
```

我每次都在创建捕获捕获，因为我可能想在脚本运行时访问网络摄像头。但这似乎不是问题。QueryFrame 只是不断增加内存。函数退出后不会被垃圾回收。通过搜索，我发现[OpenCV Python QueryFrame 函数会泄漏内存](https://stackoverflow.com/questions/5318311/opencv-python-queryframe-function-leaks-memory)，并尝试这样做：

```
def f():
    global n
    camera = cv.CreateCameraCapture(0)
    time_ = time.strftime("%Y-%m-%d_%H:%M:%S")
    frame = cv.QueryFrame(camera)
    if n == 1:
        image = cv.CreateImageHeader(cv.GetSize(frame), frame.depth,
                frame.channels)
        n = 2
    cv.SetData(frame, image)
    cv.SaveImage("%s.png" % time_, image) 
```

但它给出了这个错误：

```
Traceback (most recent call last):
  File "log_webcam.py", line 20, in <module>
    f()
  File "log_webcam.py", line 17, in f
    cv.SaveImage("%s.png" % time_, image)
TypeError: IplImage argument 'image' has no data 
```

**编辑：**我正在使用来自 ubuntu repo 的 python-opencv 2.3.1-7。

# iphone - 着色器 iOS、OSX

> ID：12297648
> 
> 赞同：2
> 
> 时间：2012-09-06T10:06:36.337
> 
> 标签：iphone, objective-c, opengl, opengl-es, cocos2d-iphone

我对 OpenGL 的着色器有疑问。

```
#ifdef GL_ES
precision lowp float;
#endif

varying vec4 v_fragmentColor;

void main()
{
    gl_FragColor = v_fragmentColor;
} 
```

第二个

```
attribute vec4 a_position;
attribute vec4 a_color;
uniform mat4 u_MVPMatrix;

#ifdef GL_ES
varying lowp vec4 v_fragmentColor;
#else
varying vec4 v_fragmentColor;
#endif

void main()
{
    gl_Position = u_MVPMatrix * a_position;
    v_fragmentColor = a_color;
} 
```

首先我做二维投影

```
- (void)makeProjection2D
{
    float scaleFactor = 1.0;
    CGSize size = self.bounds.size;

    glViewport(0, 0, size.width, size.height);

    kmGLMatrixMode(KM_GL_PROJECTION);
    kmGLLoadIdentity();

    kmMat4 orthoMatrix;
    kmMat4OrthographicProjection(&orthoMatrix, 0, size.width / scaleFactor, 0, size.height / scaleFactor, -size.width, size.width);
    kmGLMultMatrix( &orthoMatrix );

    kmGLMatrixMode(KM_GL_MODELVIEW);
    kmGLLoadIdentity();
} 
```

下一步是创建着色器。

随后是 OpenGL 初始化。

```
GLint dim[2] = {1025, 769};
CGLSetParameter([[self openGLContext] CGLContextObj], kCGLCPSurfaceBackingSize, dim);
CGLEnable([[self openGLContext] CGLContextObj], kCGLCESurfaceBackingSize);

// Setup OpenGL states
glMatrixMode(GL_PROJECTION);
CGRect frame = self.bounds;

glGetError();

// Setup the view port in Pixels
glOrtho(0, frame.size.width, 0, frame.size.height, -1, 1);
glViewport(0, 0, frame.size.width, frame.size.height);
glMatrixMode(GL_MODELVIEW);
glLoadIdentity();

glEnableClientState(GL_VERTEX_ARRAY);

glClearColor(1.0, 1.0, 1.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

self.pointSize = pointSizeForDrawing;
GLint zeroOpacity = 0;
[[self openGLContext] setValues:&zeroOpacity forParameter:NSOpenGLCPSurfaceOpacity]; 
```

如果我尝试在屏幕上绘制四个大像素之类的东西

```
glBindFramebufferEXT(GL_DRAW_FRAMEBUFFER, framebuffer);

glClearColor(1.0, 0.0, 0.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glPointSize(100.0);
glColor3b(1.0, 1.0, 1.0);
GLfloat i[8] = {44.0, 44.0, 100.0, 100.0, 300.0, 300.0,  500.0, 500.0};

glVertexPointer(2, GL_FLOAT, 0, i);
glDrawArrays(GL_POINTS, 0, 4);

glBindFramebufferEXT( GL_READ_FRAMEBUFFER_EXT, framebuffer );
glBindFramebufferEXT( GL_DRAW_FRAMEBUFFER_EXT, 0 );
glViewport(0, 0, self.bounds.size.width, self.bounds.size.height);
glBlitFramebufferEXT( 0, 0, self.bounds.size.width, self.bounds.size.height, 0, 0, self.bounds.size.width, self.bounds.size.height, GL_COLOR_BUFFER_BIT, GL_NEAREST );
glSwapAPPLE(); 
```

只有一个是可见的，如果我删除制作 2d 投影和着色器，那么所有 4 个都是可见的。

使用着色器的代码适用于 iOS，但不适用于 OSX，知道为什么吗？为了初始化着色器，我使用*cocos2d*的 CCGLProgram如果您需要更多信息，请告诉我。

# jquery - 类似安卓首页的jquery幻灯片

> ID：12297649
> 
> 赞同：1
> 
> 时间：2012-09-06T10:06:36.540
> 
> 标签：jquery

[我在android 网站上](http://www.android.com/)找到了该幻灯片，我想创建与此幻灯片放映相同的网页图库。我尝试在 goole like 中搜索一些关键字`Gallery slide show for android using jquery`，`Android slide show jquery`以及其他关键字。但是我找不到这个教程。

有谁知道如何制作这个画廊或任何与这个画廊相同的教程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:20:55.417

在深入研究该页面上的源代码之后。似乎他们正在[HTML5 Canvas](http://www.html5canvastutorials.com/)上[制作动画](http://www.html5canvastutorials.com/labs/html5-canvas-drag-and-drop-resize-and-invert-images/)。

似乎您所要求的可以使用一些[轮播插件](http://www.tripwiremagazine.com/2012/06/jquery-carousel.html)来完成。

# python - 删除.py文件后如何运行python项目？

> ID：12297650
> 
> 赞同：1
> 
> 时间：2012-09-06T10:06:38.413
> 
> 标签：python, copy-protection

我想删除我的源代码 .py 文件以避免竞争对手看到我的代码。

所以我用

```
python -c "import compileall; compileall.compile_dir('D:/acc')" 
```

将所有py文件编译成pyc，下一步是删除py文件，运行项目只使用pyc，怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T10:10:03.870

您可以使用标准库中的 shutils，但请考虑删除 *.py 文件不是一个非常字符串保护，因为从 *.pyc 重建 *.py 文件非常容易。

将 py2exe 与 drm 打包程序一起使用会更加安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T10:45:39.583

一种方便的方法是将主模块 pyc 文件重命名为`__main__.pyc`并将所有 pyc 文件放在一个 zip 文件中。然后 Python 2.6 及更高版本可以运行 zip：

```
python myapplication.zip 
```

请注意，不同 Python 版本之间的 pyc 文件不兼容。

# python - Django Forms 和 ModelChoiceField：将 HTML optgroup 元素添加到 QuerySet 中的特定对象？

> ID：12297657
> 
> 赞同：2
> 
> 时间：2012-09-06T10:06:52.110
> 
> 标签：python, django, django-forms

```
class CreateCourseForm(ModelForm):
        category = forms.ModelChoiceField(
            queryset=Category.objects.all(),
            empty_label="",
            #widget=CustomCourseWidget()
        )

    class Meta:
        model = Course
        fields = ('title', 'description', 'category')

    def __init__(self, *args, **kwargs):
        super(CreateCourseForm, self).__init__(*args, **kwargs)
        self.fields['category'].widget.attrs['class'] = 'chzn-select'
        self.fields['category'].widget.attrs['data-placeholder'] = u'Please select one' 
```

使用上面的代码，我得到了一个选择框，其中列出了所有类别对象。我想要做的是添加一个

```
<optgroup>VALUE</optgroup> 
```

HTML 元素到特定的 Category-Objects（具有 Category.parent == null 的那些）。

有谁知道这是怎么做到的吗？非常感谢！

PS：我已经尝试将 QuerySet 转换为 Choices-Set（例如[http://dealingit.wordpress.com/2009/10/26/django-tip-showing-optgroup-in-a-modelform/](http://dealingit.wordpress.com/2009/10/26/django-tip-showing-optgroup-in-a-modelform/)），效果很好用于呈现 HTML - 直到我尝试将结果保存到发生不匹配（ValueError）的数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T07:30:21.080

这是我目前的解决方案。这可能是一个肮脏的修复，但它工作正常:-)

```
class CustomCourseWidget(forms.Select):
    #http://djangosnippets.org/snippets/200/
    def render(self, name, value, attrs=None, choices=()):
        from django.utils.html import escape
        from django.utils.encoding import smart_unicode
        from django.forms.util import flatatt

        if value is None:
            value = ''
        final_attrs = self.build_attrs(attrs, name=name)
        output = [u'<select%s>' % flatatt(final_attrs)]
        output.append(u'<option value=""></option>') # Empty line for default text
        str_value = smart_unicode(value)
        optgroup_open = False
        for group in self.choices:
            option_value = smart_unicode(group[0])
            option_label = smart_unicode(group[1])
            if not ">" in option_label and optgroup_open == True:
                output.append(u'</optgroup>')
                optgroup_open = False
            if not ">" in option_label and optgroup_open == False:
                output.append(u'<optgroup label="%s">' % escape(option_label))
                optgroup_open = True
            if " > " in option_label:
                #optgroup_open = True
                selected_html = (option_value == str_value) and u' selected="selected"' or ''
                output.append(u'<option value="%s"%s>%s</option>' % (escape(option_value), selected_html, escape(option_label.split(" > ")[1])))

        output.append(u'</select>')
        return mark_safe(u'\n'.join(output)) 
```

# windows - 如何在 Windows 的浏览器中打开 PyGTK LinkBut ton 中的 uri？

> ID：12297659
> 
> 赞同：1
> 
> 时间：2012-09-06T10:06:55.523
> 
> 标签：windows, gtk, pygtk

我在 Windows 上创建了一个 PyGTK LinkBut​​ton。它包含一个我想在用户浏览器中打开的 URI。

```
gtk.LinkButton("http://www.mysite.com") 
```

[这里](http://www.pygtk.org/docs/pygtk/class-gtklinkbutton.html)的文档建议我需要为`gtk.link_button_set_uri_hook`. PyGTK 中是否有可以跨平台使用的内置函数，还是我需要编写自己的 Windows 特定函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T08:20:06.593

你试过什么？您不必提供 URI 挂钩。只需提供 URI，`LinkButton`剩下的就交给我们了。最小的例子：

```
from gi.repository import Gtk
w = Gtk.Window()
w.connect("destroy", Gtk.main_quit)
w.add(Gtk.LinkButton("http://google.com", "test"))
w.show_all()
Gtk.main() 
```

这将创建一个带有单个按钮的窗口，单击该按钮可在系统默认 Web 浏览器中打开 Google。
如果由于任何原因这不起作用，您可以查看**[`webbrowser`](http://docs.python.org/library/webbrowser.html#module-webbrowser)**提供跨平台支持的 Python 标准库中的模块（我不知道该模块是否也用于 gtk 内部，在这种情况下它只是不会有所作为）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-01T15:48:05.083

在 Windows 和 Linux 上都适用于我的一种方法：

```
def _open_link(func, data=None):
    desktop.open(data)

gtk.link_button_set_uri_hook(_open_link) 
```

# visual-studio-2010 - VS2010：尝试为故障转储加载符号时“找不到匹配的二进制文件”

> ID：12297660
> 
> 赞同：7
> 
> 时间：2012-09-06T10:06:57.787
> 
> 标签：visual-studio-2010, debugging, windbg, symbols

出于测试目的，我正在 Visual Studio 2010 中调试一个小型转储（使用 .dump /ma 创建）。

我有可用于该转储的符号，但没有当前的二进制文件（它是可执行文件）。

VS2010 中的“模块”窗口显示“未**找到匹配的二进制文件**”，这似乎是正确的，因为在目标机器上的路径上找不到它。

我仍然想加载符号，所以我右键单击模块，选择“从符号路径加载符号”（其中包含正确 pdb 的路径），但会弹出一个对话框，要求我选择二进制文件。我无法为我的模块加载符号。

为什么VS需要图像文件？WinDbg 能够加载符号文件并毫无问题地向我显示错误堆栈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:31:19.157

我认为这是设计使然。Visual Studio 是由一个团队设计和开发的，而 WinDbg 是由另一个团队设计和开发的，

[http://msdn.microsoft.com/en-us/library/htzy3t6f.aspx](http://msdn.microsoft.com/en-us/library/htzy3t6f.aspx)

> 如果加载使用堆保存的 minidump 文件，即使找不到应用程序二进制文件，Visual Studio 也可以加载符号。没有堆的小型转储文件需要二进制文件来加载符号。

如果你想让 Visual Studio 和 WinDbg 一样，你应该去 Microsoft Connect 并创建一个功能请求，

[http://connect.microsoft.com/intro/](http://connect.microsoft.com/intro/)

# python - python meshgrid 大小和线条粗细

> ID：12297662
> 
> 赞同：0
> 
> 时间：2012-09-06T10:07:05.230
> 
> 标签：python, grid, plot, matplotlib

我正在尝试在我的surfaceplot 的表面上制作一个网格，现在我知道线框不起作用，而网格命令完全是另外一回事。但我似乎无法获得像这样的网格![在此处输入图像描述](../Images/de44413769f6cdfdabf964dadd633425.png)，而是像这样的网格![在此处输入图像描述](../Images/347eec5dc0607a4dcf794168e721a197.png)，改变 rstride 和 cstride 只会让它看起来像现代艺术： ![在此处输入图像描述](../Images/6d9d59504b5c6486176170ea4b39e038.png)

这是我正在使用的绘图命令

```
fig = plt.figure()
ax = fig.add_subplot(111,projection="3d")

plot = ax.plot_surface(x,y,z, rstride=1, cstride=1, cmap=cm.jet, shade=True,
                       linewidth=1, antialiased=False) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:03:18.363

如果您更清楚自己要实现的目标，那将会很有帮助。你的第二个情节中的网格对我来说看起来不错 - 你期待什么？*您究竟*希望网格如何显示？

`rstride`您说您对更改和参数的值的结果不满意`cstride`，但您没有说明您将这些更改为什么或从什么更改。您是否阅读过有关这些论点的文档？

另外，请发布一个[最小的、独立的代码工作示例](http://sscce.org)，因为绘制的网格将取决于您构建数据的方式（每个维度中有多少点等）。不要让我们查看您[以前的问题](https://stackoverflow.com/q/12287946/623518)

总之，吐槽一下。`rstride`简单地将和值加倍`cstride`给我

![在此处输入图像描述](../Images/169c13edf6622d9d91d271e8f21e6352.png)

不是问题中的第三个数字。以上是否更像您所追求的？

# windows - 软件设计：如何获取 DLL 版本号

> ID：12297663
> 
> 赞同：1
> 
> 时间：2012-09-06T10:07:10.857
> 
> 标签：windows

我有一个在合规性场景中使用的 DLL（其细节无关紧要）。重要的一点是主可执行文件必须显示 DLL 版本号。我的解决方案是 DLL 有一个函数来返回它自己的版本——即从它自己的版本资源中获取它并将它作为一个字符串返回。

我的审阅者说主程序应该计算出 DLL 版本号。他甚至给了我一些代码来获取 DLL 模块句柄并使用它提取版本。

我的问题是，哪个设计更好，为什么？我的感觉是，使用 OO 原则，我应该向 DLL 询问它的版本号。以另一种方式进行意味着主程序需要知道版本信息是如何存储的，因此与实现更紧密地耦合。

请注意，我确切地知道如何从 DLL 中提取版本信息。我的问题是关于执行此操作的代码的最佳位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:44:11.073

你能澄清一下你工作的环境吗？现在，由于您已经提到获取模块句柄，我假设您正在使用 C++ 并调用少数 Win32 函数之一（GetModuleHandle、LoadLibrary 等）。

首先，我会小心在过于广泛的背景下应用 OO 原则。面向对象的范例可以帮助您以更易于维护和理解的方式构建您的软件，您所描述的问题听起来可能超出了您的应用程序的边界。如果您想获取有关单独资源（例如 DLL）的信息，您应该考虑使用标准方法来实现这一点，以确保您的代码与需要检查的项目分离。

如果您在 DLL 中引入一个函数以将版本号返回给您的主应用程序，那么您已经在您的主应用程序和任何需要提供其版本信息的 DLL 之间创建了紧密耦合（通过为此定义一个定制的 API 或接口） .

您应该考虑使用标准的、平台范围的功能来检索信息。这将允许您的应用程序对它可以获得句柄的任何 DLL 进行版本控制。

假设您有一个用于 dll 的 HMODULE（并且您使用的是 C++），请调用以下函数来获取版本...

GetModuleFileNameEx（如果您还不知道，获取 DLL 的完整路径和文件名） [http://msdn.microsoft.com/en-us/library/windows/desktop/ms683198(v=vs.85)。 aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683198(v=vs.85).aspx)

使用这个文件名，调用

GetFileVersionInfoSize（在 MSDN 上查找这些）

这将告诉您有关文件版本元数据的一些重要信息（文件有多少信息，如果有的话）。假设这个函数成功，调用

获取文件版本信息

这会将所有文件信息元数据加载到缓冲区中，然后调用

查询值

提供 '\' 作为 lpSubBlock 参数以获取标准文件信息元数据（包括版本号）

上述函数将允许您编写代码来获取您的代码可以处理的任何模块的版本号。

当然，如果您使用的是 C#，则解决方案要简单得多。希望这可以帮助...

# doctrine-orm - 使用教义2将sql视图映射到php实体

> ID：12297666
> 
> 赞同：4
> 
> 时间：2012-09-06T10:07:23.353
> 
> 标签：doctrine-orm

我在创建的数据库中有一个视图

```
CREATE VIEW TBL_TITLE (...) 
```

该视图在 yaml 中由

```
HQ\Title:
  type: entity
  table: TBL_TITLE
  fields:
    (...)
  lifecycleCallbacks: {  } 
```

这很好用：我的实体已正确加载和写入。但是当我跑步时`orm:schema-tool:update`，我得到

```
CREATE TABLE TBL_TITLE (...); 
```

所以学说2（2.1.6）没有看到它`TBL_TITLE`已经作为一个视图存在并且想要创建一个表。如何声明`TBL_TITLE`为视图以便模式工具识别它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T07:32:08.550

您不能，架构工具在当前状态下无法处理。

# pagination - 分页灯箱

> ID：12297671
> 
> 赞同：1
> 
> 时间：2012-09-06T10:07:35.183
> 
> 标签：pagination, lightbox

我正在寻找一个 jQuery 灯箱，它在灯箱本身的图像下方包含一个分页以切换到特定图像，而无需使用标准箭头循环浏览它们。

示例：<< < 5 6 7 8 9 > >>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:31:20.590

请参阅以下链接以获取带有分页的灯箱 jquery

[http://line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts](http://line25.com/articles/rounding-up-the-top-10-jquery-lightbox-scripts)

# vbscript - 具有作者属性的 VBS 文件列表

> ID：12297673
> 
> 赞同：0
> 
> 时间：2012-09-06T10:07:37.627
> 
> 标签：vbscript

我有一个 VBS 列表脚本来列出文件，有不同的日期。所有文件都是 MS Word 文档，但我想要文档属性中的作者（我尝试使用谷歌搜索“作者”属性而不是最佳搜索）。

我在一个文件夹中所有文档的文本列表之后：- 文件名、访问日期、创建日期、修改日期和作者。我希望 VBS 能破解它，但如果有其他解决方案，我愿意接受建议。

```
On Error Resume Next

Const WINDOW_HANDLE = 0
Const BIF_EDITBOX = &H10
Const BIF_NONEWFOLDER = &H0200
Const BIF_RETURNONLYFSDIRS = &H1

Set objShell = CreateObject("Shell.Application")
Set wshShell = CreateObject("WScript.Shell")
Set objFSO = CreateObject("Scripting.FileSystemObject")

'**Browse For Folder To Be Processed
strPrompt = "Please select the folder to process."
intOptions = BIF_RETURNONLYFSDIRS + BIF_NONEWFOLDER + BIF_EDITBOX
strTargetPath = wshShell.SpecialFolders("MyDocuments")
strFolderPath = Browse4Folder(strPrompt, intOptions, strTargetPath)

Set objNewFile = objFSO.CreateTextFile(strFolderPath & "\filelist.txt", True)
Set objFolder = objFSO.GetFolder(strFolderPath)
Set objColFiles = objFolder.Files

For Each file In objColFiles
    objNewFile.WriteLine(file.Name)
    objNewFile.WriteLine(file.DateCreated)
    objNewFile.WriteLine(file.DateLastAccessed)
    objNewFile.WriteLine(file.DateLastModified)
Next
objNewFile.Close

'**Browse4Folder Function
Function Browse4Folder(strPrompt, intOptions, strRoot)
    Dim objFolder, objFolderItem

    On Error Resume Next

    Set objFolder = objShell.BrowseForFolder(0, strPrompt, intOptions, strRoot)
    If (objFolder Is Nothing) Then
        Wscript.Quit
    End If
    Set objFolderItem = objFolder.Self
    Browse4Folder = objFolderItem.Path
    Set objFolderItem = Nothing
    Set objFolder = Nothing
End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:37:09.153

您必须检查 Word 应用程序对象的属性。

看看[这里](http://access.mvps.org/access/modules/mdl0003.htm)例如如何做到这一点。

应该是这样的：

```
Set oWord = CreateObject("Word.Application")
Set oDoc = oWord.Documents.Open("myWordDocument.doc")
Set sAuthor = oDoc.BuiltInDocumentProperties("Author") 
```

# php - PHP/MYSQL 返回不正确的结果 - MYSQL WHERE 子句

> ID：12297674
> 
> 赞同：1
> 
> 时间：2012-09-06T10:07:39.593
> 
> 标签：php, mysql, apache, select, where

继承人的情况，一个变量， $username 设置为“斯科特”或什么的。然后这些行发生：

```
$query = mysql_query("SELECT * FROM users WHERE username='$username'") or     die(mysql_error());
print_r(mysql_fetch_array($query)); 
```

这将打印我们的以下内容，这是当时表格中的内容。

```
 ( [0] => 1 [userid] => 1 [1] => 0 [username] => 0 [2] => 0 [password] => 0 [3] => 0 [email] => 0 [4] => 1346924695 [time] => 1346924695 ) 
```

我怎样才能解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:09:38.703

请检查所有的数据类型。猜猜一切都在`int`。

您可以在 MySQL 控制台中执行以下操作：

```
desc `tablename`; 
```

您可能需要重新整理所有行！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:13:18.083

查询将表作为数组返回，您正在打印此数组。返回的值是正确的。尝试打印数组元素。

```
$result_array = mysql_fetch_array($query)
print_r($result_array[0]["username"]) 
```

它将在表格的第 0 行打印用户名。请检查语法

# python - 如何在特定时间停止函数并继续 python 中的下一个函数？

> ID：12297675
> 
> 赞同：1
> 
> 时间：2012-09-06T10:07:39.093
> 
> 标签：python, function, timing

我有一个代码：

```
function_1()
function_2() 
```

通常，function_1() 需要 10 个小时才能结束。但我希望 function_1() 运行 2 小时，2 小时后，function_1 必须返回，程序必须继续 function_2()。它不应该等待 function_1() 完成。有没有办法在python中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:00:18.917

使 Python 中的函数能够中断它们的执行和恢复的原因是使用了“yield”语句——然后你的函数将作为生成器对象工作。您在此对象上调用“next”方法以使其在最后一次 yield 后启动或继续

```
import time
def function_1():
    start_time = time.time()
    while True:
         # do long stuff
         running_time = time.time() -start_time
         if running_time > 2 * 60 * 60: # 2 hours
              yield #<partial results can be yield here, if you want>
              start_time = time.time()

runner = function_1()
while True:
    try:
        runner.next()
    except StopIteration: 
        # function_1 had got to the end
        break
    # do other stuff 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-12T12:48:12.703

您可以尝试使用模块[Gevent](http://www.gevent.org)：在线程中启动函数并在一段时间后终止该线程。

这是示例：

```
import gevent

# function which you can't modify
def func1(some_arg)
    # do something
    pass

def func2()
    # do something
    pass

if __name__ == '__main__':
    g = gevent.Greenlet(func1, 'Some Argument in func1')
    g.start()
    gevent.sleep(60*60*2)
    g.kill()
    # call the rest of functions
    func2() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T10:09:51.713

如果你不介意离开`function_1`跑步：

```
from threading import Thread
import time

Thread(target=function_1).start()
time.sleep(60*60*2)
Thread(target=function_2).start() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T13:15:09.020

您可以使用 datetime 模块对执行进行计时。可能您的优化器函数在某处有一个循环。在循环内部，您可以测试自启动函数以来已经过去了多少时间。

```
def function_1():
    t_end = datetime.time.now() + datetime.timedelta(hours=2)

    while not converged:
        # do your thing
        if datetime.time.now() > t_end:
            return 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T13:22:35.460

```
from multiprocessing import Process
p1 = Process(target=function_1)
p1.start()
p1.join(60*60*2)
if p1.is_alive():p1.terminate()
function_2() 
```

我希望这有帮助

我刚刚使用以下代码对此进行了测试

```
import time
from multiprocessing import Process

def f1():
    print 0
    time.sleep(10000)
    print 1

def f2():
    print 2

p1 = Process(target=f1)
p1.start()
p1.join(6)
if p1.is_alive():p1.terminate()
f2() 
```

输出如预期：

```
0
2 
```

# .net - 如何创建一个地铁风格的表格？

> ID：12297676
> 
> 赞同：0
> 
> 时间：2012-09-06T10:07:39.423
> 
> 标签：.net, microsoft-metro, visual-studio-2012

Visual Studio 2012的安装有metro风格的形式，有没有办法在Visual Studio中创建类似风格的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T04:11:57.697

您可以使用 WPF 创建这些，自己重新设置它们的样式，或者使用[MahApps](http://mahapps.com/MahApps.Metro/)或[Elysium](http://elysium.codeplex.com/)之类的东西。

# php - 一个文件中的多个 PHP 类

> ID：12297687
> 
> 赞同：1
> 
> 时间：2012-09-06T10:08:16.447
> 
> 标签：php, class, caching

我有多个 PHP 类，每个类都有大约 20 个函数，每个都在一个 PHP 文件中。一旦我包含这个文件，服务器会在内存中存储每个类和每个函数吗？

或者它只会在我这样实例化后加载类及其函数？：

```
$ajax = new ajax(); 
```

还是服务器只缓存我专门调用的函数？：

```
$ajax->make_request(); 
```

我想知道是否可以在一个 PHP 文件中包含这么多类和函数，或者我是否应该放入某种类型的逻辑，只包含工作所需的类和函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T10:13:24.130

我认为您对 PHP 的工作方式有些困惑。

PHP 解析器的每个请求都会解析请求的文件，例如`index.php`

如果`index.php` `include`是另一个文件，PHP 将解析该文件。

一旦 PHP 文件被解析，它就会在请求期间以“字节码”（几乎是一种机器语言）存储在内存中。

无论文件中有多少函数或类，都将针对该请求存储在内存中。

有像 APC 这样的扩展在请求之间将这些解析的字节码缓存在内存中，但它们需要添加到 PHP 中。

然而，为您的类使用自动加载会更好（就内存使用而言）。

[http://php.net/manual/en/language.oop5.autoload.php](http://php.net/manual/en/language.oop5.autoload.php)

PSR0 是一套很好的自动加载类指南：

[https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T10:14:15.267

`Ajax`您需要的逻辑称为“自动加载”，这是当 php 可执行文件命中`new Ajax();`指令时神奇地包含类的过程。

这样，内存中永远不会加载无用的类。

看看[PSR-0](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)和这个优秀的[ClassLoader 组件](http://symfony.com/doc/current/components/class_loader.html)。

（如果您的项目只有 20 个类，则不需要添加自动加载器 - 利润将非常低）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T10:15:59.367

不，默认情况下服务器不会缓存任何内容，除非它设置为使用 APC 或类似扩展来缓存内容。因此，如果您的代码使用所有这些类，那么最好将它们放在一个文件中以减少 I/O。但如果你不使用，请将代码分成逻辑类，放入单独的文件并使用[autoloading](http://php.net/manual/en/language.oop5.autoload.php)。

# android - 重新打开APP后相机无法与Sencha Touch 2和Cordova2.0一起使用

> ID：12297688
> 
> 赞同：1
> 
> 时间：2012-09-06T10:08:17.613
> 
> 标签：android, cordova, sencha-touch-2

我正在开发一个带有 Sencha Touch 2 和 cordova2.0 的应用程序。在我使用cordova2.0 API调用我的android设备上的相机后，它第一次工作。但是，当我关闭APP并再次打开时，相机无法使用，没有任何错误消息。APP本身没有挂起，可以正常使用。

如果我使用android工具终止APP，它没有好，仍然无法使用相机。如果我卸载APP重新安装，APP就恢复正常了。但是，这个问题仍然存在。

如果有任何帮助，我会感谢它。

```
onSelectImageCommand: function () {
    postsController = this
    var actionSheet = Ext.create('Ext.ActionSheet', {
        enter: 'top',
        exit: 'top',
        bottom: 'none',
        items: [
            {
                text: '相机拍摄',
                handler: function () {
                    actionSheet.hide();
                    navigator.camera.getPicture(postsController.onCameraSuccess, postsController.onCameraFail, { 
                        quality: 50,
                        destinationType: Camera.DestinationType.FILE_URI,
                        targetWidth: 120
                    }); 
                }
            },
            {
                text: '手机相册',
                handler: function () {
                    actionSheet.hide();
                    navigator.camera.getPicture(postsController.onCameraSuccess, postsController.onCameraFail, { 
                        quality: 50,
                        destinationType: Camera.DestinationType.FILE_URI,
                        sourceType: Camera.PictureSourceType.PHOTOLIBRARY,
                        targetWidth: 120
                    }); 
                }
            },
            {
                text: '取消',
                handler: function () {
                    actionSheet.hide();
                }
            }
        ],

    });

    Ext.Viewport.add(actionSheet);
    actionSheet.show();

}, 
```

# soap - SOAP 中介 Wso2 ESB

> ID：12297694
> 
> 赞同：0
> 
> 时间：2012-09-06T10:08:34.967
> 
> 标签：soap, xpath, wso2, wso2esb, orchestration

您好，我收到以下消息：

```
 <soapenv:Envelope xmlns:soapenv="http://www.w3.org/2003/05/soap-envelope">
      <soapenv:Header>
         <wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" soapenv:mustUnderstand="true">
            <wsu:Timestamp xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="Timestamp-11">
               <wsu:Created>2012-09-06T09:59:04.031Z</wsu:Created>
               <wsu:Expires>2012-09-06T10:04:04.031Z</wsu:Expires>
            </wsu:Timestamp>
            <wsse:UsernameToken xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="UsernameToken-12">
               <wsse:Username>admin</wsse:Username>
               <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">admin</wsse:Password>
            </wsse:UsernameToken>
         </wsse:Security>
      </soapenv:Header>
      <soapenv:Body />
   </soapenv:Envelope> 
```

我想使用 XPath`<wsse:Username>admin</wsse:Username>`从传入消息中获取用户名

有什么建议吗？

**编辑：**

我试过这个：

```
<inSequence xmlns="http://ws.apache.org/ns/synapse">
   <property xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" name="p1" expression="$header/wsse:Username" scope="default" />
   <log>
      <property name="output*********" expression="get-property('p1')" />
   </log>
</inSequence> 
```

但它不输出用户名：

```
MessageID: urn:uuid:68f95493-7dfd-416a-b
455-f77f4fd5c9c5, Direction: request, output********* = 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T04:05:14.340

努维奥，

您可以使用表达式“$header/wsse:Security”，其中“wsse”作为 Security 标头元素携带的命名空间的前缀。下面显示了如何将其保存到 Synapse 消息上下文属性。

```
<property xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" name="Security" expression="$header/wsse:Security" /> 
```

仅供参考，您可以使用语法“$header/header_name”来提取 SOAP 消息中存在的任何 SOAP 标头元素。

希望这可以帮助！

干杯，普拉巴斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T06:52:45.417

否则你可以选择让它使用这个`xpath:"//wsse:Username/text()"` 我认为它会帮助你我也是这个`wso2`工具的新手。

希望这能带你..

# javascript - 将所选项目移动到排序多选的顶部（Javascript）

> ID：12297697
> 
> 赞同：4
> 
> 时间：2012-09-06T10:08:43.670
> 
> 标签：javascript, jquery, html, sorting, multi-select

我正在使用[jQueryUI 多选小部件](http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/)，它为多选绘制了一个漂亮的下拉菜单小部件。

我有一个已经排序的（在用户名上）多选，如下所示：

```
<select multiple="multiple" name="users" id="id_users">
<option value="1" selected="selected">aaa</option>
<option value="44">bbb</option>
<option value="21" selected="selected">ccc</option>
<option value="50">ddd</option>
<option value="16">eee</option>
<option value="25" selected="selected">fff</option>
</select> 
```

而且我想保持用户名排序，但每次用户打开下拉菜单时将所选项目移动到列表顶部。所以在这个例子中，新订单必须是：

```
<select multiple="multiple" name="users" id="id_users">
<option value="1" selected="selected">aaa</option>
<option value="21" selected="selected">ccc</option>
<option value="25" selected="selected">fff</option>
<option value="44">bbb</option>
<option value="50">ddd</option>
<option value="16">eee</option>
</select> 
```

从小部件的网站上，我看到它有一个返回所选项目数组的方法，并且它有一个 beforeopen 事件。所以我认为我可以通过在打开之前处理事件来管理排序（使用该数组），但我对javascript相当陌生，任何人都可以指出我正确的方向吗？

我在这里搜索，我找到的所有解决方案都解决了“按文本排序”的问题（这不是我需要的）。

编辑：我以这种方式解决了：

```
$('#id_users').multiselect({
    beforeopen: function(event, ui) {
        $('#id_users option:selected').prependTo('#id_users');
        $('#id_users').multiselect('refresh');
    }
}); 
```

所以在小部件的初始化中，我将这两行代码绑定到 beforeopen 事件。在处理 beforeopen 时，我将所选项目添加到其他项目，并刷新小部件（因为它只读取一次多选，如果不刷新，即使 HTML 更改，订单也保持不变）。

我不能赞成答案，因为我没有足够的声誉。不过谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:12:51.403

试试这个。

```
$('#id_users option:selected').prependTo('#id_users') 
```

[→](http://jsfiddle.net/jQKSA/1/)

# mysql - MYSQL 转储格式化文本文件

> ID：12297705
> 
> 赞同：0
> 
> 时间：2012-09-06T10:08:51.200
> 
> 标签：mysql

我有一项服务可以生成格式化的文本文件，其中包含来自 MYSQL 数据库中某些表的信息。目前我以编程方式查询数据库并将其转储到 TEXT 文件中。我想知道我是否可以在 MYSQL 数据库中做同样的事情。

这意味着当一个新记录被添加到一个特定的表中时，MYSQL 将运行一段代码来生成该格式化的文本文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:01:00.707

您没有详细介绍您的用例，但也许 CSV 引擎可能是您正在寻找的？

从[手册](http://dev.mysql.com/doc/refman/5.1/en/csv-storage-engine.html)：

创建 CSV 表时，服务器会在数据库目录中创建一个表格式文件。该文件以表名开头并具有 .frm 扩展名。存储引擎还创建一个数据文件。它的名称以表名开头，并具有 .CSV 扩展名。数据文件是纯文本文件。当您将数据存储到表中时，存储引擎会将其以逗号分隔值格式保存到数据文件中。

```
mysql> CREATE TABLE test (i INT NOT NULL, c CHAR(10) NOT NULL)
    -> ENGINE = CSV;
Query OK, 0 rows affected (0.12 sec)

mysql> INSERT INTO test VALUES(1,'record one'),(2,'record two');
Query OK, 2 rows affected (0.00 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> SELECT * FROM test;
+------+------------+
| i    | c          |
+------+------------+
|    1 | record one |
|    2 | record two |
+------+------------+
2 rows in set (0.00 sec) 
```

从 MySQL 5.1.9 开始，创建 CSV 表还会创建一个相应的 Metafile，其中存储了表的状态和表中存在的行数。此文件的名称与扩展名为 CSM 的表的名称相同。

如果您检查执行上述语句创建的数据库目录中的 test.CSV 文件，其内容应如下所示：

```
"1","record one"
"2","record two" 
```

**这种格式可以被 Microsoft Excel 或 StarOffice Calc 等电子表格应用程序读取，甚至写入。**

# php - 如何使用 CakePHP 2x 中的自动登录组件自动重定向具有自动登录 cookie 的用户？

> ID：12297709
> 
> 赞同：1
> 
> 时间：2012-09-06T10:09:00.673
> 
> 标签：php, cakephp, cakephp-2.1, remember-me, autologin

我正在使用带有自动登录组件的 CakePHP 2x。问题是，我可以写这些东西，但是我不确定如何实现它来读取和授权。当用户到达该页面时，他的浏览器中仍然有 cookie，但是，我该如何授权呢？

我的登录脚本：

```
public function login() {
        if ($this->Auth->user('id')) {
            $this->redirect(array('action' => 'dashboard'));
        }
        if($this->request->data['User']['auto_login']):
        $this->AutoLogin->write($this->request->data['User']['username'],
                $this->request->data['User']['password']);
        endif;

        if ($this->request->is('post')) {
            if ($this->Auth->login( )) {
                //$this->redirect(array('controller' => 'users', 'action' => 'dashboard'));
                return $this->redirect($this->Auth->redirect( ));
            }
            else 
            {
                $this->Session->setFlash(__('Username or Password is incorrect'), 'default', array( ), 'auth');
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:12:51.683

这应该是这样的：

```
public function login()
{       
    if ($this->request->is('post'))
    {
        if ($this->Auth->login())
        {               
            if ($this->request->data['User']['persist'] == '1')
            {
                $cookie = array();
                $cookie['username'] = $this->data['User']['USER_LOGINNAME'];
                $cookie['password'] = $this->data['User']['USER_PASSWORD'];
                $this->Cookie->write('Auth.User', $cookie, true, '+4 weeks');
            }
            $this->redirect($this->Auth->redirect());
        }
        else
        {
            $this->Session->setFlash('Your username or password was incorrect.', 'default/flash-error');
        }
    }
    else
    {
        $user = $this->Auth->user();
        if (empty($user))
        {
            $cookie = $this->Cookie->read('Auth.User');                             
            if (!is_null($cookie)) 
            {
                $user = $this->User->find('first', array('conditions' => array('USER_LOGINNAME' => $cookie['username'], 'USER_PASSWORD' => AuthComponent::password($cookie['password']))));
                if ($this->Auth->login($user['User'])) 
                {
                    $this->Session->delete('Message.auth');
                    $this->redirect($this->Auth->redirect());
                }
                else 
                { 
                    $this->Cookie->delete('Auth.User');
                }
            }
        }
        else
        {
            $this->redirect($this->Auth->redirect());
        }
    }
} 
```

这让您了解如何完成相同的任务，但是，我根据我的数据库结构使用了表单字段。

**请根据您的数据库结构更改表单字段。**

# ravendb - 使用 RavenDB PutCommand 更新现有文档

> ID：12297712
> 
> 赞同：2
> 
> 时间：2012-09-06T10:09:17.427
> 
> 标签：ravendb

如果我使用 put 命令将新文档插入 RavenDB 并指定它的键，那么第一次它只是按预期插入。但是，我第二次使用相同的键运行相同的 put 命令，但更改的数据创建了一个新文档，我期待更新现有文档。

这似乎是因为文档键的末尾附加了一个递增的数字（不是我，我猜 raven 客户端正在为我做这件事）。

如何防止将额外的数字附加到我的文档键中，以便 put 命令更新而不是创建文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T07:02:02.150

最后，您不能使用 / 创建密钥。请参阅此处的文档：[http ://ravendb.net/docs/theory/document-key-generation](http://ravendb.net/docs/theory/document-key-generation)

# android - 在自定义进度条上为可绘制的进度创建蒙版

> ID：12297723
> 
> 赞同：0
> 
> 时间：2012-09-06T10:09:45.850
> 
> 标签：android, progress-bar

![进度示例](../Images/8061b6bcfb2ae2f034388840a55610ff.png)

我正在创建一个自定义进度条，如图片上的数字 (2)。但是我不能在进度条的开始处做圆角（就像你看到的那样）。我正在使用图像作为背景和可绘制的进度。

进度条 (1) 是我想要制作的，但带有图像。我必须为我的进度条 (2) 做些什么，就像 (1)，但是有图像？

注意：在进度条 (1) 上，我使用的是 Android 的默认设置：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@android:id/background">
    <shape>
        <corners android:radius="5dip" />
        <gradient
                android:startColor="#ff9d9e9d"
                android:centerColor="#ff5a5d5a"
                android:centerY="0.75"
                android:endColor="#ff747674"
                android:angle="270"
        /> 
    </shape>
</item>

<item android:id="@android:id/secondaryProgress">
    <clip>
        <shape>
            <corners android:radius="5dip" />
            <gradient
                    android:startColor="#80ffd300"
                    android:centerColor="#80ffb600"
                    android:centerY="0.75"
                    android:endColor="#a0ffcb00"
                    android:angle="270"
            />
        </shape>
    </clip>
</item>

<item android:id="@android:id/progress">
    <clip>
        <shape>
            <corners android:radius="5dip" />
            <gradient
                    android:startColor="#ffffd300"
                    android:centerColor="#ffffb600"
                    android:centerY="0.75"
                    android:endColor="#ffffcb00"
                    android:angle="270"
            />
        </shape>
    </clip>
</item> 
```

# jquery - 使用 Jquery 处理动态 Div 点击事件

> ID：12297725
> 
> 赞同：0
> 
> 时间：2012-09-06T10:09:59.387
> 
> 标签：jquery

我如何知道使用 Jquery 触发了哪个 div 点击事件 这是提琴手链接[Click Here](http://jsfiddle.net/rickjackson/6ghXz/4/)。实际上我在占位符中动态生成 div 我不知道我怎么知道哪个 div 被点击了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:11:37.977

好吧，您可以简单地使用`this`

`this`将为您提供您单击的 div 对象

```
$(".nailthumb-container").click(function () {
    alert($(this).attr('id'));
});​ 
```

[演示](http://jsfiddle.net/6ghXz/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:14:14.143

你可以通过检查这个来得到这个

```
$(".nailthumb-container").click(function () {
    alert($(this).attr("id")); 
    //alert(this.id); //you can also try this
    alert('Hii');
}); 
```

如果你想得到谁触发了这个事件，你可以得到目标，比如这里的地方e，它将捕获事件对象。

```
$(".nailthumb-container").click(function (e) {
    alert(e.target.id);
    alert('Hii');
}); 
```

# c# - DevExpress TabbedView 冻结焦点面板

> ID：12297726
> 
> 赞同：1
> 
> 时间：2012-09-06T10:10:01.040
> 
> 标签：c#, winforms, devexpress

我在每个面板上`TabbedView`有多个面板 我有一个用于编辑/保存/取消的按钮，当我编辑其中一个面板时，我
需要所有其他面板`freeze`

我有一个活动`Edit Button`，可以阅读所有面板`TabbedView`并制作

```
dockPanel1.Enabled = false; 
```

问题是当它们`panelContainer`像图像中一样时 ![在此处输入图像描述](../Images/2c4b4b64a595c3cdbae72b2651ddc408.png)

我想`Tabs`
用 Enabled = false冻结另一个，`Panel`但用户可以点击`Tab`，我想限制他查看其他面板

欢迎任何建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:29:51.133

您必须禁用每个选项卡中的每个控件，这可能最好在选项卡的单击事件上处理。

只需旋转 tabView.controls 对象并根据您是否希望它们启用或禁用来设置启用或禁用每个控件。

# facebook-fql - Facebook fql 流表限制

> ID：12297727
> 
> 赞同：0
> 
> 时间：2012-09-06T10:10:00.900
> 
> 标签：facebook-fql

在 FQL 流表的 facebook API 参考中，您可以发现“流表的每次查询仅限于前 30 天或 50 个帖子，以较大者为准，但是您可以使用特定时间字段，例如 created_time 以及 FQL 运算符 (例如 < 或 >) 以检索更大范围的帖子。”

但是如果我使用简单查询

```
SELECT message FROM stream WHERE source_id = me() LIMIT 500 
```

我收到的帖子远远超过 50 个。那么仅使用 LIMIT 获得 50 多个帖子就足够了吗？

# c# - 带用户确认的异步命令执行

> ID：12297729
> 
> 赞同：6
> 
> 时间：2012-09-06T10:10:06.923
> 
> 标签：c#, .net, mvvm, system.reactive, reactiveui

我需要在用户确认的情况下执行异步删除操作。像这样的东西：

```
public ReactiveAsyncCommand DeleteCommand { get; protected set; }
...
DeleteCommand = new ReactiveAsyncCommand();
DeleteCommand.RegisterAsyncAction(DeleteEntity);

...

private void DeleteEntity(object obj)
{
    if (MessageBox.Show("Do you really want to delete this entity?", "Confirm", MessageBoxButton.YesNo) == MessageBoxResult.Yes)
    {
        //some delete operations
    }
} 
```

问题是 MessageBox 也会异步执行。ReactiveUI 中同步询问用户然后异步执行方法的最佳模式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-07T05:42:15.710

最直接的方法是使用两个命令：

```
public ReactiveCommand DeleteCommand { get; protected set; }
private ReactiveAsyncCommand ExecuteDelete { get; protected set; }

/*
 * In the Constructor
 */

ExecuteDelete = new ReactiveAsyncCommand();
ExecuteDelete.RegisterAsyncAction(() => /* Do the delete */);

DeleteCommand = new ReactiveCommand(ExecuteDelete.CanExecuteObservable);
DeleteCommand
    .Where(_ => MessageBox.Show("Delete?") == MessageBoxResult.Yes)
    .InvokeCommand(ExecuteDelete); 
```

# c# - 字典 ， 列表 和其他集合实现/运行时

> ID：12297736
> 
> 赞同：7
> 
> 时间：2012-09-06T10:10:42.990
> 
> 标签：c#, .net, complexity-theory, big-o, generic-collections

我想知道是否有任何好的参考资料（网站甚至更好的书），我可以在其中找到有关常用集合的内部实现的信息，例如

*   `Dictionary<TKey, TValue>`
*   `List<T>`
*   `Queue<T>`
*   `Stack<T>`
*   等等

通过内部实现，我的意思是他们如何使用动态数组来存储数据，他们多久调整一次大小，常见操作的时间和空间复杂度是多少。

当然，如果有人认为他可以在此线程中提供此信息，我们非常欢迎您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T22:55:37.180

## 关于`List<T>`：

`List<T>`有两个属性，`Capacity`这`Count`有助于澄清调整大小的时间。`Capacity`是任何给定时间内部数组的长度，`Count`是添加到列表中的元素数。如果您估计了要添加到列表中的元素数量，`Capacity`则可以进行初始化（通过选择适当的构造函数），这将导致更少或没有调整大小，从而获得更好的性能。

调整大小（即创建一个新的更大的数组并将元素一一复制到新数组）发生在`Add<T>()`调用方法并且数组已经满时（`Count == Capacity`）。新数组的容量加倍（最初，如果用户未设置，则从 0 开始，然后是 4，然后每次需要更多空间时都会加倍）：

```
List<int> list = new List<int>();
//Capacity = 0, Count = 0

list.Add(52);
//Capacity = 4, Count = 1

list.Add(34);
list.Add(2);
list.Add(87);
//Capacity = 4, Count = 4

list.Add(56);
//Capacity = 8, Count = 5 
```

对于大`n`，添加新元素的**时间复杂度是摊销常数****O(1)**。按索引查找是常数**O(1)**，并且在给定索引处插入或删除元素是线性的**O(n)**因为它涉及将其余元素移动一个位置（分别向右或向左）。用于内部数组的**空间**`n`对于数组的元素当然是线性的，从to变化`2n`（或者，如果这有意义的话：`Math.Pow(2, Math.Ceiling(Math.Log(n, 2)))`:)。

## 关于`Queue<T>`和`Stack<T>`：

Queue 和 Stack 内部数组的大小调整与 . 中描述的类似`List<T>`。常见的操作是高效的**O(1)**（在内部，为 Queue 的头和尾元素保留索引）。因此，将元素入队或压入堆栈需要分摊的常数时间，出队/弹出需要常数时间。

## 关于`Dictionary<TKey, TValue>`：

字典的工作方式不同，[这里](https://stackoverflow.com/a/3521585/1118323)有很好的描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:27:03.607

每一个的确切实现细节都需要很长的解释（对于每一个）。相反，我建议您参考 J. Albahari 的书 C# 5.0 In a Nutshell。

但是，我可以为您提供一个表格，用于*Dictonary 类*的常见操作的内存/时间考虑。这些性能时间以毫秒为单位，在 1.5GHz PC 上对具有整数键和值的字典执行 50,000 次操作。

```
Type                Internal         Retrieve by     Memeory         Speed Random        Speed Seq        Speed Retrieval 
                    Structure        Index?          Overhead        Insertion           Insertion        by Key
Unsorted
Dictionary<T>       Hashtable        No              22              30                  30               20
Hashtable           Hashtable        No              38              50                  50               30
ListDictonary       Linked List      No              36              50,000              50,000           50,000
OrderedDictionary   Hashtable +      Yes             59              70                  70               40
                    Array
Sorted
SortedDictionary    Red-Black        No              20              130                 100              120 
<K, V>              Tree
SortedList <K, V>   2xArray          Yes             2               3,300               30               40
SortedList          2xArray          Yes             27              4,500               100              180 
```

抱歉，我无法为您需要的其他人提供此服务。

我希望这有一些用处。

# vba - 将新行添加到 Excel 表（VBA）

> ID：12297738
> 
> 赞同：17
> 
> 时间：2012-09-06T10:11:00.077
> 
> 标签：vba, excel

我有一个 Excel 表格，用于记录您在特定日期和膳食中摄入的食物。我有一个网格，每条线代表你吃的食物，它有多少糖，等等。

然后我添加了一个保存按钮以将所有数据保存到另一张表中的表格中。

这是我尝试过的

```
 Public Sub addDataToTable(ByVal strTableName As String, ByRef arrData As Variant)
    Dim lLastRow As Long
    Dim iHeader As Integer
    Dim iCount As Integer

    With Worksheets(4).ListObjects(strTableName)
        'find the last row of the list
        lLastRow = Worksheets(4).ListObjects(strTableName).ListRows.Count

        'shift from an extra row if list has header
        If .Sort.Header = xlYes Then
            iHeader = 1
        Else
            iHeader = 0
        End If
    End With

    'Cycle the array to add each value
    For iCount = LBound(arrData) To UBound(arrData)
        **Worksheets(4).Cells(lLastRow + 1, iCount).Value = arrData(iCount)**
    Next iCount
End Sub 
```

但我在突出显示的行上不断收到相同的错误：

```
Application-defined or object-defined error 
```

我做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-06T11:06:19.193

你没有说你使用的是哪个版本的 Excel。这是为 2007/2010 编写的（Excel 2003 需要不同的方法）

你也没有说你是如何调用的`addDataToTable`以及你传递到什么`arrData`。
我猜你正在传递一个`0`基于数组。如果是这种情况（并且表从 Column 开始`A`），那么`iCount`将从开始计数`0`并`.Cells(lLastRow + 1, iCount)`尝试引用`0`无效的列。

您也没有利用`ListObject`. 您的代码假定`ListObject`1 位于从 row 开始`1`。如果不是这种情况，您的代码会将数据放在错误的行中。

这是一个利用`ListObject`

```
Sub MyAdd(ByVal strTableName As String, ByRef arrData As Variant)
    Dim Tbl As ListObject
    Dim NewRow As ListRow

    ' Based on OP 
    ' Set Tbl = Worksheets(4).ListObjects(strTableName)
    ' Or better, get list on any sheet in workbook
    Set Tbl = Range(strTableName).ListObject
    Set NewRow = Tbl.ListRows.Add(AlwaysInsert:=True)

    ' Handle Arrays and Ranges
    If TypeName(arrData) = "Range" Then
        NewRow.Range = arrData.Value
    Else
        NewRow.Range = arrData
    End If
End Sub 
```

可以通过多种方式调用：

```
Sub zx()
    ' Pass a variant array copied from a range
    MyAdd "MyTable", [G1:J1].Value
    ' Pass a range
    MyAdd "MyTable", [G1:J1]
    ' Pass an array
    MyAdd "MyTable", Array(1, 2, 3, 4)
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-25T10:22:17.860

`Tbl.ListRows.Add`对我不起作用，我相信很多其他人都面临同样的问题。我使用以下解决方法：

```
 'First check if the last row is empty; if not, add a row
    If table.ListRows.count > 0 Then
        Set lastRow = table.ListRows(table.ListRows.count).Range
        For col = 1 To lastRow.Columns.count
            If Trim(CStr(lastRow.Cells(1, col).Value)) <> "" Then
                lastRow.Cells(1, col).EntireRow.Insert
                'Cut last row and paste to second last
                lastRow.Cut Destination:=table.ListRows(table.ListRows.count - 1).Range
                Exit For
            End If
        Next col
    End If

    'Populate last row with the form data
    Set lastRow = table.ListRows(table.ListRows.count).Range
    Range("E7:E10").Copy
    lastRow.PasteSpecial Transpose:=True
    Range("E7").Select
    Application.CutCopyMode = False 
```

希望它可以帮助那里的人。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-04T17:18:38.383

我有同样的错误消息，经过大量试验和错误后发现它是由在 ListObject 上设置的高级过滤器引起的。清除高级过滤器 .listrows.add 后再次正常工作。要清除过滤器，我使用它 - 不知道如何仅清除特定列表对象而不是完整工作表的过滤器。

```
Worksheets("mysheet").ShowAllData 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-09-28T20:16:23.963

实际上，我刚刚发现，如果您想在表格中的选择下方添加多行， `Selection.ListObject.ListRows.Add AlwaysInsert:=True`效果非常好。我只是将代码复制了五次以在我的表中添加五行

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-25T20:13:59.363

我之前遇到过同样的问题，我通过在新工作表中创建同一个表并删除与该表关联的所有名称范围来修复它，我相信当您使用 listobjects 时，您不允许将名称范围包含在您的表 希望有帮助 谢谢

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-04T12:35:33.003

今天遇到了这个问题（Excel 在使用添加行时崩溃`.ListRows.Add`）。在阅读了这篇文章并检查了我的表格后，我意识到行中某些单元格中公式的计算取决于其他单元格中的值。在我的情况下，更高列的单元格甚至是带有公式的单元格！

解决方案是从后到前填充新添加的行，这样计算就不会出错。

Excel 通常可以处理不同单元格中的公式，但似乎在表格中添加一行会按列的顺序（A、B、C 等）重新计算。

希望这有助于解决问题`.ListRows.Add`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-06-11T13:19:32.090

只需删除该表并创建一个具有不同名称的新表。也不要删除该表的整行。似乎当包含表行的整行被删除时，它会损坏 DataBodyRange 已损坏

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-04-25T23:41:02.583

由于使用`ListRow.Add`可能是一个巨大的瓶颈，我们应该只在无法避免的情况下使用它。如果性能对您很重要，请在此处使用此功能来调整表的大小，这比推荐的方式添加行要快得多。

请注意，如果有的话，这将**覆盖您的表格下方的数据！**

此功能基于 *Chris Neilsen接受的答案*

```
Public Sub AddRowToTable(ByRef tableName As String, ByRef data As Variant)
    Dim tableLO As ListObject
    Dim tableRange As Range
    Dim newRow As Range

    Set tableLO = Range(tableName).ListObject
    tableLO.AutoFilter.ShowAllData

    If (tableLO.ListRows.Count = 0) Then
        Set newRow = tableLO.ListRows.Add(AlwaysInsert:=True).Range
    Else
        Set tableRange = tableLO.Range
        tableLO.Resize tableRange.Resize(tableRange.Rows.Count + 1, tableRange.Columns.Count)
        Set newRow = tableLO.ListRows(tableLO.ListRows.Count).Range
    End If

    If TypeName(data) = "Range" Then
        newRow = data.Value
    Else
        newRow = data
    End If
End Sub 
```

# c++ - C++ 中的运算符重载和数组处理

> ID：12297739
> 
> 赞同：1
> 
> 时间：2012-09-06T10:11:00.607
> 
> 标签：c++, arrays, operator-overloading, little-man-computer

我正在编写一个小人计算机模拟，我想重载索引运算符 `[]`。我创建了一个名为 LMC 的类并完成了以下操作：

```
#include <iostream>

using namespace std;

class LMC
{
   public:
       LMC();
       void display();
       int& operator[](int index);
       ~LMC();
   private:
       int **array;
};

LMC::LMC()
{
   array = new int*[100];
   for(int i = 0; i < 100; i++)
   {
       array[i] = new int[3];
   }
   return array;
}

void LMC::display()
{
    for(int i = 0; i < 100;i++)
    {
       for(int j = 0; j <3;j++)
       {
          array[i][j] = 0;
          array[i][2] = i;
          cout << array[i][j]<<" ";
       }
       cout << endl;
    }
 }
 int& LMC::operator[](int index)
 {
    return array[index][2];
 }

  LMC::~LMC()
  {
     for(int i =0; i < 100 ; i++)
     { 
        delete [] array[i];
     }
     delete [] array;
     array = NULL;
  }

  int main()
  {
     LMC littleman;
     while(true)
     {
         int mailbox;
         int function;
         cout << "What is Mailbox number?" << endl;
         cin >> Mailbox;
         cout << "What is the function you want to use?" <<endl;
         cin >> finction;
         //the function is numbers eg 444 and 698;
         littleman.display();
         littleman[Mailbox] = function;
      }
     return 0;
} 
```

我可以毫无错误地运行程序。当我这样说时`mailbox = 0`，`function = 123`这没问题。

显示如下：

```
0 0 0
1 0 0
2 0 0
3 0 0
//continuing to 99 
```

这个显示是错误的。必须显示以下内容：

```
0 0 123
1 0 0
2 0 0
//continuing to 99 
```

我是否有逻辑错误，或者我是否覆盖了数组以显示原始内容，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:20:07.473

您的代码有许多错误，它们不会让它编译，即：

*   在`LMC()`构造函数中，你有`return array;`. 构造函数从不返回任何东西（它们甚至没有返回类型），所以你不能`return`在它们中使用。
*   之后`void LMC::display()`，你有一个`;`，这是一个错误，因为这不是定义，而是实现。你应该忽略它，然后离开`void LMC::display() { <...> }`
*   `void LMC::display()`最后错过了`}`结束，就在`operator[]`.
*   在`main()`你有错别字`Mailbox`（一种情况下是大写 M，另一种情况下是正常 m。在 C++中`Mailbox`，`mailbox`是*不同*的变量）而`finction`不是函数。

至于您的问题，您正在重写函数中的 aray 的值`display()`：

```
array[i][j] = 0;
array[i][2] = i; 
```

这就是为什么你看不到任何结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:18:57.907

这些行

```
 array[i][j] = 0;
  array[i][2] = i; 
```

`LMC::display()`销毁您要显示的数组的内容。

此外，在 末尾有一个额外的分号`void LMC::display();`，因此您的代码不应该编译。

# php - 服务器发送的事件工作，但有大量的时间延迟

> ID：12297740
> 
> 赞同：10
> 
> 时间：2012-09-06T10:11:03.787
> 
> 标签：php, apache, server-sent-events

首先说这在我的本地机器上完美运行，下面的 js 示例连接到 stream.php 并每秒接收服务器当前时间的连续更新。

### 索引.php

```
var source = new EventSource("stream.php");

source.addEventListener('message', function(e) {
    console.log(e);
}, false);

source.addEventListener('open', function(e) {
    console.log(e);
}, false);

source.addEventListener('error', function(e) {
    if (e.readyState == EventSource.CLOSED) {
        console.log('closed');
    }
}, false); 
```

### 流.php

```
while(true)
{
    // Headers must be processed line by line.
    header('Content-Type: text/event-stream');
    header('Cache-Control: no-cache');

    // Set data line
    print "data: " . date( 'G:H:s', time() ) . PHP_EOL . PHP_EOL;

    // Toilet
    flush();

    // Wait one second.
    sleep(1);
} 
```

上传到现场开发后，我确实预计会有一点延迟。服务器。但有大约 15 到 20 分钟的时间延迟。在我看到第一个条目之前。

连接不会断开。（可能已经进行了 40 分钟以上。）这只是一个 Apache 循环问题（意味着是时候查看 Web 套接字）还是我可以做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T14:05:25.723

server.php 需要如下：

### 流.php

```
while(true)
{
    // Headers must be processed line by line.
    header('Content-Type: text/event-stream');
    header('Cache-Control: no-cache');

    // Set data line
    print "Event: server-time" . PHP_EOL;
    print "data: " . date( 'G:H:s', time() ) . PHP_EOL;
    print PHP_EOL;

    ob_end_flush();     // Strange behaviour, will not work
    flush();            // Unless both are called !

    // Wait one second.
    sleep(1);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-19T18:33:42.640

睡眠阻塞了 SSE。我也有同样的问题。有人建议我使用事件驱动编程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-13T17:52:49.303

@Derrick，您建议的`ob_end_flush();`行让我很接近，但是在比 hello world 代码更复杂的 PHP 中，我仍然在我的 SSE 连接上得到不必要的重新打开（我仍然不完全理解为什么`ob_end_flush()`要对我这样做）。所以这是我现在使用的模式（否则与您的 stream.php 相同）。在英语中，我在进入无限循环之前关闭了 PHP 输出缓冲：

```
// per http://www.php.net/manual/en/book.outcontrol.php:
//     Clean (erase) the output buffer and turn off output buffering
ob_end_clean();

// how long PHP script stays running/SSE connection stays open (seconds)
set_time_limit(60);
while (true) {

  // use @Derrick's header/send code here

  ob_flush();  // note I don't turn off output buffering here again
  flush();
  sleep(1);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-26T08:25:46.820

只需添加 ob_flush(); 在 stream.php 中的 flush() 函数之前

更新的 stream.php 脚本如下，在 flush() 函数之前观察 ob_flush() 函数。

```
while(true)
{
    // Headers must be processed line by line.
    header('Content-Type: text/event-stream');
    header('Cache-Control: no-cache');

    // Set data line
    print "data: " . date( 'G:H:s', time() ) . PHP_EOL . PHP_EOL;

    // Toilet
    **ob_flush();**
    flush();

    // Wait one second.
    sleep(1);
} 
```

# matlab - matlab：cellfun逻辑

> ID：12297741
> 
> 赞同：0
> 
> 时间：2012-09-06T10:11:06.840
> 
> 标签：matlab, bsxfun

我有一个（非常复杂 - 无论如何对我来说）cellfun 操作，我需要一个聪明的头脑来注视它，以判断它是否真的在做我想要的：

```
b = cellfun(@(x) nansum(bsxfun(@times, mag(:),cross(u{1},x))),r,'UniformOutput',false);

 size(mag)

ans =

    81     3

 size(u{1})

ans =

    81     3

size(r)

ans =

     1    81 
```

u 和 r 是元胞数组。我需要的算法：

-> 取 u{1} 的每个元素并将它们与 r{1} 的每个元素交叉乘积。-> 将生成的 81 x 3 单元格乘以 mag（大小 81 x 3）。-> 取 u{1} 的每个元素并将它们与 r{2} 的每个元素交叉乘积。-> 将生成的 81 x 3 单元格乘以 mag（大小 81 x 3）。

等等.....

我收到以下错误：

```
??? Error using ==> bsxfun
Non-singleton dimensions of the two input arrays must match each other.

Error in ==> cellcross>@(x)nansum(bsxfun(@times,mag(:),cross(u{1},x))) at 2
    b = cellfun(@(x) nansum(bsxfun(@times, mag(:),cross(u{1},x))),r,'UniformOutput',false);

Error in ==> cellcross at 2
    b = cellfun(@(x) nansum(bsxfun(@times, mag(:),cross(u{1},x))),r,'UniformOutput',false); 
```

我的逻辑在哪里失败了？将 mag 更改为像 u 这样的单元阵列，然后使用 cellfun 进行乘法运算会更容易吗？

还会指出删除 mag：

```
b = cellfun(@(x) nansum(cross(u{1},x)),r,'UniformOutput',false); 
```

按预期工作，因此将结果乘以 u 是一个问题。

***编辑 gunthers 评论：***

假设我有两个对象 u 和 r - 都是单元格

```
u =

1 1 0              1st element
2 2 0              2nd element
3 3 0              3rd element

r =

3 3 0
2 2 0
1 1 0 
```

我想做的就是：

```
cross(u{1},r{1}) 
```

= 交叉([1 1 0],[3,3,0]) + 交叉([2 2 0],[2,2,0]) + 交叉([3 3 0],[1,1,0] )

然后重复：

```
 sum(cross(u{1},r{2}))
 sum(cross(u{1},r{3}))
 . 
 .
 . 
 . 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:14:26.350

对我来说，检查整个事情并确保结果正确有点困难，但对于第一个近似值来说，唯一的问题是你的交叉产品失败了，因为你`mag`通过使用`mag(:)`使它变平来使其成为 243x1 , 像这样

```
>> size(mag(:))
ans =
243     1
>> size(mag)
ans =
81     3 
```

正如您的错误所示，这会导致您的`@times`产品失败。所以改变的电话是

```
cellfun(@(x) nansum(bsxfun(@times, mag,cross(u{1},x))),r,'UniformOutput',false) 
```

# php - 基于相关表数据计数的订单数据

> ID：12297743
> 
> 赞同：1
> 
> 时间：2012-09-06T10:11:17.080
> 
> 标签：php, cakephp, cakephp-2.0

我有两个差异表，如下所示：

用户和帖子

需要按帖子表计数从用户表中获取数据

关系定义为：

```
User Model:

public $hasMany = array('Post');

Post Model

Public $belongsTo = array('User'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:31:51.967

**counterCache - 缓存你的 count()**

此功能可帮助您缓存相关数据的计数。模型本身不是通过**find('count')**手动计算记录，而是跟踪对关联的**$hasMany**模型的任何添加/删除，并增加/减少父模型表中的专用整数字段。

该字段的名称由单数模型名称后跟下划线和单词“count”组成：

```
my_model_count 
```

假设您有一个名为**ImageComment**的模型和一个名为**Image**的模型，您将向**图像**表添加一个新的 INT 字段并将其命名为**image_comment_count**。

添加计数器字段后，您就可以开始了。通过添加**counterCache**键并将值设置为**true**来激活关联中的 counter-cache ：

```
<?php
class Image extends AppModel {
    public $belongsTo = array(
        'ImageAlbum' => array('counterCache' => true)
    );
} 
```

从现在开始，每次添加或删除与 ImageAlbum关联的**Image时，****都会自动调整****image_count**中的数字。

 **您还可以指定**counterScope**。它允许您指定一个简单的条件，告诉模型何时更新（或何时不更新，取决于您如何看待）计数器值。

使用我们的图像模型示例，我们可以像这样指定它：

```
<?php
class Image extends AppModel {
    public $belongsTo = array(
        'ImageAlbum' => array(
            'counterCache' => true,
            'counterScope' => array('Image.active' => 1) // only count if "Image" is active = 1
    ));
} 
```**

# javascript - keith-wood 日期选择器日期格式和语言

> ID：12297744
> 
> 赞同：1
> 
> 时间：2012-09-06T10:11:18.293
> 
> 标签：javascript, jquery, datepicker, date-format

我正在使用[Keith-Wood 日期选择器](http://keith-wood.name/datepick.html)，但 dateFormat 有问题。

当我使用以下脚本时，一切正常：

```
$('#popupDatepicker').datepick({dateFormat: "yyyy-mm-dd"}); 
```

(when a select a date the result is, for example, 2012-09-06)

但是当我包括语言设置时 dateFormat 被忽略

```
$('#popupDatepicker').datepick($.extend({dateFormat: "yyyy-mm-dd"}, $.datepick.regional['pt-BR'])); 
```

In this case, when a select a date the result is, for example, 09/06/2012 (corresponding to the default dateFormat mm/dd/yyyy).

有人有线索吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:22:19.237

我找到了一种解决方案（不确定它是否是最好的）但是......

```
$.datepick.setDefaults($.datepick.regional['pt-BR']);   
$('#popupDatepicker').datepick({dateFormat: "yyyy-mm-dd",altFormat: "yyyy-mm-dd"}); 
```

# itextsharp - itextsharp PdfCopy 和横向页面

> ID：12297745
> 
> 赞同：1
> 
> 时间：2012-09-06T10:11:21.277
> 
> 标签：itextsharp, center, footer, landscape

我正在使用 itextsharp 加入多个 pdf 文档并添加页脚。我的代码工作正常 - 除了横向页面 - 它没有检测到页面旋转 - 页脚没有以横向为中心：

```
 public static int AddPagesFromStream(Document document, PdfCopy pdfCopy, Stream m, bool addFooter, int detailPages, string footer, int footerPageNumOffset, int numPages, string pageLangString, string printLangString)
    {
        CreateFont();
        try
        {
            m.Seek(0, SeekOrigin.Begin);
            var reader = new PdfReader(m);

            // get page count
            var pdfPages = reader.NumberOfPages;
            var i = 0;

            // add pages
            while (i < pdfPages)
            {
                i++;

                // import page with pdfcopy
                var page = pdfCopy.GetImportedPage(reader, i);

                // get page center
                float posX;
                float posY;
                var rotation = page.BoundingBox.Rotation;
                if (rotation == 0 || rotation == 180)
                {
                    posX = page.Width / 2;
                    posY = 0;
                }
                else
                {
                    posX = page.Height / 2;
                    posY = 20f;
                }

                var ps = pdfCopy.CreatePageStamp(page);
                var cb = ps.GetOverContent();

                // add footer
                cb.SetColorFill(BaseColor.WHITE);
                var gs1 = new PdfGState {FillOpacity = 0.8f};
                cb.SetGState(gs1);
                cb.Rectangle(0, 0, document.PageSize.Width, 46f + posY);
                cb.Fill();

                // Text
                cb.SetColorFill(BaseColor.BLACK);
                cb.SetFontAndSize(baseFont, 7);
                cb.BeginText();

                // create text
                var pages = string.Format(pageLangString, i + footerPageNumOffset, numPages);
                cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, printLangString, posX, 40f + posY, 0f);
                cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, footer, posX, 28f + posY, 0f);
                cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, pages, posX, 20f + posY, 0f);
                cb.EndText();

                ps.AlterContents();

                // add page to new pdf
                pdfCopy.AddPage(page);
            }

            // close PdfReader
            reader.Close();
            // return number of pages
            return i;
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
            return 0;
        }
    } 
```

在这种情况下，如何检测页面旋转（例如横向）格式？给定的示例适用于 PdfReader，但不适用于 PdfCopy。

编辑：为什么我需要 PdfCopy？我尝试复制一个word pdf导出。当您尝试使用 PdfReader 复制页面时，某些单词超链接将不起作用。只有 PdfCopy 传输所有需要的页面信息。

编辑：（已解决）您需要使用 reader.GetPageRotation(i);

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:36:50.617

您需要使用 reader.GetPageRotation(i);

解决的代码：

```
 public static int AddPagesFromStream(Document document, PdfCopy pdfCopy, Stream m, bool addFooter, int detailPages, string footer, int footerPageNumOffset, int numPages, string pageLangString, string printLangString)
    {
        CreateFont();
        try
        {
            m.Seek(0, SeekOrigin.Begin);
            var reader = new PdfReader(m);

            // get page count
            var pdfPages = reader.NumberOfPages;
            var i = 0;

            // add pages
            while (i < pdfPages)
            {
                i++;

                // import page with pdfcopy
                var page = pdfCopy.GetImportedPage(reader, i);

                // get page center
                float posX;
                float posY;
                var rotation = reader.GetPageRotation(i);
                if (rotation == 0 || rotation == 180)
                {
                    posX = page.Width / 2;
                    posY = 0;
                }
                else
                {
                    posX = page.Height / 2;
                    posY = 20f;
                }

                var ps = pdfCopy.CreatePageStamp(page);
                var cb = ps.GetOverContent();

                // add footer
                cb.SetColorFill(BaseColor.WHITE);
                var gs1 = new PdfGState {FillOpacity = 0.8f};
                cb.SetGState(gs1);
                cb.Rectangle(0, 0, document.PageSize.Width, 46f + posY);
                cb.Fill();

                // Text
                cb.SetColorFill(BaseColor.BLACK);
                cb.SetFontAndSize(baseFont, 7);
                cb.BeginText();

                // create text
                var pages = string.Format(pageLangString, i + footerPageNumOffset, numPages);
                cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, printLangString, posX, 40f + posY, 0f);
                cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, footer, posX, 28f + posY, 0f);
                cb.ShowTextAligned(PdfContentByte.ALIGN_CENTER, pages, posX, 20f + posY, 0f);
                cb.EndText();

                ps.AlterContents();

                // add page to new pdf
                pdfCopy.AddPage(page);
            }

            // close PdfReader
            reader.Close();
            // return number of pages
            return i;
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
            return 0;
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:43:13.430

在您的代码示例`page`中，类型为 PdfImportedPage。你要的是它的边界框。PdfImportedPage 是 PdfTemplate 类型，因此您要求的是 XObject 的边界框。我怀疑这会奏效。

您应该向 reader 对象询问页面的旋转。我猜您自己已经发现了这一点，因为您说“给定的示例适用于 PdfReader，但不适用于 PdfCopy”。

# iphone - 在 iOS5 中使用 Accuracy 查找用户位置的方法

> ID：12297750
> 
> 赞同：1
> 
> 时间：2012-09-06T10:11:41.977
> 
> 标签：iphone, google-maps, ios5, cllocation

我需要在 iPhone 中找到用户位置。我可以使用`CLLocation Manager`. 但是我得到的位置与我的物理设备位置不准确。我使用以下标准来设置准确性

```
 locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    locationManager.delegate = self;
    locationManager.distanceFilter = 10;
    [locationManager startMonitoringSignificantLocationChanges];
    [locationManager release]; 
```

当我尝试在 : 方法中打印“newLocation.verticalAccuracy”和“newLocation.horizo​​ntalAccuracy”`locationManager:didUpdateToLocation:fromLocation`时，大多数时候我的水平精度约为 10.0000，垂直精度约为 12.00000。

那么，有没有其他方法可以更准确地找到用户位置，或者我错过了任何设置？请帮忙。

仅供参考：我正在使用 WiFi 并在开放的地方进行测试以获得更好的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:16:23.277

看这个链接

[LocateMe](http://developer.apple.com/library/ios/#samplecode/LocateMe/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007801)示例演示项目

或使用这个

放入你的 .h 文件

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface yourController : UIViewController <CLLocationManagerDelegate> {
    CLLocationManager *locationManager;
}

@end 
```

和 .m 文件

在初始化方法中

```
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self;
locationManager.distanceFilter = kCLDistanceFilterNone;
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
[locationManager startUpdatingLocation]; 
```

并使用此功能..

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    NSLog(@"OldLocation %f %f", oldLocation.coordinate.latitude, oldLocation.coordinate.longitude);
    NSLog(@"NewLocation %f %f", newLocation.coordinate.latitude, newLocation.coordinate.longitude);
} 
```

# c# - LINQ - 嵌套 where 子句

> ID：12297751
> 
> 赞同：16
> 
> 时间：2012-09-06T10:11:43.293
> 
> 标签：c#, linq, entity-framework

我有一个项目的问题。我正在尝试获取公司列表，但仅过滤那些位于“斯德哥尔摩”的公司。

表结构

```
**Company**:
CompanyID
CompanyName
etc…

**CompanyAddressDetails** (relation table):
Company_CompanyID
CorrespondingAddress_AddressID

**CorrespondingAddress**:
AddressID
StreetName
City
etc… 
```

现在我首先要做的是一个查询：

```
var companyModel = from c in db.Company select c; 
```

它获取公司的完整列表并拥有他们的对应地址（可以是多个），因此结果如下所示：

![在此处输入图像描述](../Images/c26a1c2743a04ab4cbf4eb529b93af95.png)

所以我的问题是：如何根据 CorrespondingAddress 下的嵌套元素之一进行过滤？以城市为例？

到目前为止我试过

```
companyModel = companyModel.Where(s => s.CorrespondingAddress.Where(x => x.City.Equals("Stockholm")));
companyModel = companyModel.Where(s => s.CorrespondingAddress.ToList().First().Address.Equals("Stockholm")); 
```

但它们都不起作用。谢谢！

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-06T10:15:00.477

```
companyModel = companyModel
               .Where(s => s.CorrespondingAddress
                     .Any(x => x.City.Equals("Stockholm"))); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-06T10:16:16.360

尝试任何（）

```
companyModel = companyModel.Where(s => s.CorrespondingAddress.Any(x => x.City.Equals("Stockholm"))); 
```

# forms - WordPress 评论表格（）；无法正常工作

> ID：12297753
> 
> 赞同：0
> 
> 时间：2012-09-06T10:11:50.930
> 
> 标签：forms, wordpress, comments

我正在尝试使用以下代码修改我的 Wordpress 评论表单上的字段：

```
<?php $fields =  array(
    'comment_notes_after' => '',
    'title_reply'=>'Let me know what you think',
    'author' => '<p class="comment-form-author">' . '<input class="text" id="author" name="author" type="text" value="Name *" size="30" onfocus="if(this.value==\'Name *\') this.value=\'\';this.style.color=\'#FFF\';" onblur="if(this.value==\'\') this.value=\'Name *\';this.style.color=\'#00AEEF\';"' . $aria_req . ' /></p>',
    'email'  => '<p class="comment-form-email">' .           '<input id="email" name="email" type="text" value="Email *" size="30" onfocus="if(this.value==\'Email *\') this.value=\'\';this.style.color=\'#FFF\';" onblur="if(this.value==\'\') this.value=\'Email *\';this.style.color=\'#00AEEF\';"' . $aria_req . ' /></p>',
    'url'   => '<p class="comment-form-url"><label for="url">' . __( 'Website' ) . '</label>' . '<input id="url" name="url" type="text" value="' . esc_attr( $commenter['comment_author_url'] ) . '" size="30" /></p>',
    'comment_field' => '<p class="comment-form-comment"><!--<label for="comment">' . _x( 'Comment', 'noun' ) . '</label>--><textarea id="comment" name="comment" cols="45" rows="8" aria-required="true" onfocus="if(this.value==\'Comment\') this.value=\'\';this.style.color=\'#FFF\';" onblur="if(this.value==\'\') this.value=\'Comment\'" ' . $aria_req . '>Comment</textarea></p>',   
); 

comment_form($fields);
?> 
```

我遇到的问题是作者、电子邮件和 url 字段没有响应我的更改。注释 textarea 会做出响应，但即使我在 3 个有问题的字段中放入荒谬的测试值，它也会完全忽略它。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:30:41.623

你应该看看 codex：[http ://codex.wordpress.org/Function_Reference/comment_form](http://codex.wordpress.org/Function_Reference/comment_form)

你会看到没有`author`,`email`和`url`params，你必须使用`fields`param ：

```
$args = array (
  'fields' => array(
    'author' => ...
    'email' => ...
    'url' => ...
  ),
  ...
);
comment_form($args); 
```

# delphi - 为什么有些字符常量是 1 字节宽，而另一些是 2 字节宽？

> ID：12297755
> 
> 赞同：4
> 
> 时间：2012-09-06T10:12:00.940
> 
> 标签：delphi, delphi-xe2

我以为我开始了解 Unicode，但这让我很吃惊：

```
const
c1 = #1;   --> SizeOf() = 2
c2 = #33;  --> SizeOf() = 2
c3 = #127; --> SizeOf() = 2
c4 = #128; --> SizeOf() = 1
c5 = #160; --> SizeOf() = 1 
c6 = #161; --> SizeOf() = 1 
c7 = #255; --> SizeOf() = 1 
```

谁能解释一下？Delphi XE2，默认 Windows-1252 代码页

谢谢简

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T10:50:48.437

已记录在案 - 请参阅[$HIGHCHARUNICODE](http://docwiki.embarcadero.com/RADStudio/en/HIGHCHARUNICODE_directive_%28Delphi%29)指令

# python - 使用 date_range 重新索引时间戳数据

> ID：12297759
> 
> 赞同：0
> 
> 时间：2012-09-06T10:12:12.537
> 
> 标签：python, time-series, pandas, data-analysis

我有一个`pandas.Series`时间戳数据 - 基本上是一系列事件：

```
0      2012-09-05 19:28:52
1      2012-09-05 19:28:52
2      2012-09-05 19:44:37
3      2012-09-05 19:44:37
4      2012-09-05 20:04:53
5      2012-09-05 20:04:53
6      2012-09-05 20:12:59
7      2012-09-05 20:13:15
8      2012-09-05 20:13:15
9      2012-09-05 20:13:15 
```

我想创建一个`pandas.TimeSeries`超过特定的`pandas.date_range`（例如 15 分钟间隔；`pandas.date_range(start, end, freq='15T')`），它保存每个时期的事件计数。如何实现？

谢谢，彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:16:56.250

如果您将事件的时间戳用作系列的索引而不是数据，那么 resample 可以做到这一点。在下面的示例中，系列的索引是时间戳，数据是 event_id，基本上是您的系列的索引。

```
In [47]: s
Out[47]:
                      event_id
timestamp
2012-09-05 19:28:52          0
2012-09-05 19:28:52          1
2012-09-05 19:44:37          2
2012-09-05 19:44:37          3
2012-09-05 20:04:53          4
2012-09-05 20:04:53          5
2012-09-05 20:12:59          6
2012-09-05 20:13:15          7
2012-09-05 20:13:15          8
2012-09-05 20:13:15          9 
```

*resample*（这个方法也可以在 DataFrame 上使用）将给出一个新的系列，在这种情况下为 15 分钟周期，桶的结束时间（周期）用于引用它（您可以使用*标签*arg 控制它）。

```
In [48]: s.resample('15Min', how=len)
Out[48]:
                      event_id
timestamp
2012-09-05 19:30:00          2
2012-09-05 19:45:00          2
2012-09-05 20:00:00          0
2012-09-05 20:15:00          6 
```

# jquery - 错误的日期选择器行为

> ID：12297760
> 
> 赞同：1
> 
> 时间：2012-09-06T10:12:13.600
> 
> 标签：jquery, datepicker

我想展示一个扁平的 jQuery datepicker 三个月，最初是中间的当前月份。我的代码：

```
$('#threeMonths').datepicker({

    numberOfMonths:[1,3],
    showCurrentAtPos: 1
}); 
```

在这种形式中，每当我单击任何日期时，它都会更改显示的月份，并且总是一个月前，为什么会这样，我该如何解决？

更新 >

适合我需要的解决方案是在 onSelect 回调中增加 drawMonth，正如我对 Berker 答案的编辑所展示的那样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:40:33.200

javascript:

```
<script type="text/javascript" language="javascript">
    $(document).ready(function ()
    {
        // Add date picker
        $(".date").datepicker({
            dateFormat: "dd/mm/yy",
            numberOfMonths: 3,
            showCurrentAtPos: 1,
            showWeeks: true,
            showStatus: true,
            changeYear: true,
            changeMonth: true,
            highlightWeek: true,
            showOtherMonths: true,
            selectOtherMonths: true,

            // hot fix (month back slide problem)
            onSelect: function (dateText, inst) { 
                inst.drawMonth +=1; 
            }
        });
    });
</script> 
```

html:

```
 <div class="date">Select a date!</div> 
```

# php - 类别树的路由

> ID：12297762
> 
> 赞同：3
> 
> 时间：2012-09-06T10:12:42.260
> 
> 标签：php, symfony, doctrine, url-routing

我正在为类别树使用[树](http://www.gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2)学说扩展，并希望有如下路线：

```
/cat/subcat1/subcat2/subcat3 
```

我可以定义路线，例如

```
/{cat}
/{cat}/{subcat}
/{cat}/{subcat}/{subcat2)
etc... 
```

但是有没有更优雅和通用的方法来实现这一点？一个可以接受无限数量级别的系统？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T10:33:36.970

您可以做的是在路由参数中接受斜杠（仅适用于此路由）。它涉及您不能将任何其他参数排队，因为斜杠分隔符将被视为类别参数的一部分......

那么，如何管理路由参数中的斜线：

```
_hello:
    pattern: /category/{category}
    defaults: { _controller: AcmeDemoBundle:Demo:category }
    requirements:
        category: ".+" 
```

调用`/category/cat1/sub1/sub2`将调用`DemoController::categoryAction($category)`以 'cat1/sub1/sub2' 作为 $category 参数的方法。只需使用您自己的代码来解码！

在官方文档中找到的代码示例：http: [//symfony.com/doc/2.0/cookbook/routing/slash_in_parameter.html](http://symfony.com/doc/2.0/cookbook/routing/slash_in_parameter.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-10T23:36:03.440

我认为这些链接可能是相关的：

[https://github.com/symfony-cmf/RoutingBundle](https://github.com/symfony-cmf/RoutingBundle)

[url 中的类别树](https://stackoverflow.com/questions/20327358/category-tree-in-url)

# linux - BASH：可以在命令行上grep，但不能在脚本中

> ID：12297774
> 
> 赞同：3
> 
> 时间：2012-09-06T10:13:23.463
> 
> 标签：linux, bash, grep

已经做了一百万次，但这次它不起作用我尝试从文件中 grep "$TITLE"。在命令行上它正在工作，“$TITLE”变量不为空，但是当我运行脚本时它什么也没找到

*title 包含多个单词

```
echo "$TITLE"
cat PAGE.$TEMP.2 | grep "$TITLE" 
```

我试过的：

```
echo "cat PAGE.$TEMP.2 | grep $TITLE" 
```

*查看标题是否不为空并且文件名是否实际存在*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:39:52.730

您确定`$TITLE`没有文件中没有的前导或尾随空格吗？您对字符串的修复会在执行之前去除空格，因此它不会看到它。

例如，对于包含“第一行”的文件：

```
/home/user1> TITLE=' one '
/home/user1> grep "$TITLE" text.txt
/home/user1> cat text.txt | grep $TITLE
Line one 
```

试试`echo "<$TITLE>"`, or `echo "$TITLE"|od -xc`which sould 使您能够发现错误的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:01:34.710

这个命令

```
echo "cat PAGE.$TEMP.2 | grep $TITLE" 
```

回显以“cat”开头的字符串。它不运行命令。你会想要

```
echo "$( cat PAGE.$TEMP.2 | grep $TITLE )" 
```

虽然这与更简单的功能相同

```
cat PAGE.$TEMP.2 | grep $TITLE 
```

正如其他人所指出的，没有必要使用`cat`;来管道单个文件。`grep`可以很好地读取文件：

```
grep "$TITLE" "PAGE.$TEMP.2" 
```

（你的默认行为应该是引用参数扩展，除非你能证明这样做是不正确的。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:17:04.967

为我工作：

```
~> cat test.dat
abc
cda
xyz
~> export GRP=cda
~> cat test.dat | grep $GRP
cda 
```

编辑：

正确的使用方法`grep`是：

```
~> grep $GRP test.dat 
```

# java - 如何在 ListGrid 摘要中添加自定义标签或组件？

> ID：12297780
> 
> 赞同：0
> 
> 时间：2012-09-06T10:13:25.767
> 
> 标签：java, gwt, smartgwt

我想在 ListGrid 摘要中添加自由定位的自定义标签。

SmartGWT 2.4 有什么办法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T12:43:16.607

这是诀窍。这不是 SmartGWT 标签，而是类似的东西。但有什么区别，它是可点击的：

```
public YourClass extends VerticalLayout{
  public void YourClass(){
    ...
    initJS(this);
    Label label = new Label("<span onclick=\"setYourFunction(this);\">click here</span>"
            +"<span onclick=\"setYourFunction(this);\">or here</span>");
    // Add label to your grid. This class is just a sample:
    addMember(label);
  }

  private native void initJS (YourClass cs) /*-{
   $wnd.setYourFunction = function (obj) {
       cs.@com.yourpackage.YourClass::onClickFunction(Ljava/lang/String;)('content:'+obj.innerHTML);
   };
  }-*/;

  private void onClickFunction(String s){
    GWT.log(s);
  }
} 
```

# android - 在android中的textWatcher中删除美元符号和逗号

> ID：12297782
> 
> 赞同：0
> 
> 时间：2012-09-06T10:13:28.230
> 
> 标签：android, android-emulator, click, android-edittext, textwatcher

在edittext中输入整数时，我用逗号单独使用doller符号并且它工作正常，现在我只想从中获取整数并将其存储在变量中以进行一些计算，如何做到这一点？提前致谢..

这是我的代码..

私有 TextWatcher textWatcher = new TextWatcher() {

```
 @Override public void onTextChanged(CharSequence s, int start, int before, int count) { 

     }
     boolean isEdiging;

     @Override public void beforeTextChanged(CharSequence s, int start, int count, int after) { }

     @Override public void afterTextChanged(Editable s) {
         if(isEdiging) return;
         isEdiging = true;

         String str = s.toString().replaceAll( "[^\\d]", "" );
         double s1 = Double.parseDouble(str);

         NumberFormat nf2 = NumberFormat.getInstance(Locale.ENGLISH);
         ((DecimalFormat)nf2).applyPattern("$ ###,###.###");
         s.replace(0, s.length(), nf2.format(s1));
         isEdiging = false;
     }
}; 
```

# android - 在android中从ListView转移焦点

> ID：12297784
> 
> 赞同：0
> 
> 时间：2012-09-06T10:13:33.240
> 
> 标签：android

我的布局中有一个按钮和一个列表视图。列表项有一个选择器。当应用程序启动时，按钮被聚焦并且选择器位于第一个项目上。我想要的是当按钮聚焦时，选择器不应该在任何项目上。当我专注于列表视图项目时，只有选择器应该出现在所选项目上。有什么帮助吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:18:22.160

将此添加到代表您的列表视图行项目的 xml 的最外层布局。

```
android:descendantFocusability="blocksDescendants" 
```

我够清楚吗？

# objective-c - CoreAnimation：警告，删除了未提交 CATransaction 的线程

> ID：12297787
> 
> 赞同：6
> 
> 时间：2012-09-06T10:13:38.903
> 
> 标签：objective-c, xcode, core-animation, catransaction

当我的应用程序运行时，我经常收到以下警告：

> CoreAnimation：警告，未提交的已删除线程`CATransaction`；在环境中设置 CA_DEBUG_TRANSACTIONS=1 以记录回溯。

有谁知道为什么有时会出现此消息？它有可能导致崩溃吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T14:30:03.477

我猜你代码中的任何地方都是一个未提交的 CATransaction，也许这就是你错过的：

```
[CATransaction begin];
[CATransaction setDisableActions:YES];
layer.bounds = CGRectMake(0, 0, 1000, 1000);
[CATransaction commit]; 
```

取自这里[CoreAnimation 未提交的 CATransaction 警告](https://stackoverflow.com/questions/11882931/coreanimation-uncommitted-catransaction-warning)

# bash - Applescript 检查文件是否存在

> ID：12297788
> 
> 赞同：1
> 
> 时间：2012-09-06T10:13:41.737
> 
> 标签：bash, unix, applescript

我想检查“/Library/Dictionaries/”中是否存在任何特定文件（字典）。这是我的 Applescript 代码行：

```
tell application "Finder"
try
    set theFolder to ("/Library/Dictionaries/")
    set fileNames to {"dict1.dictionary", "dict2.dictionary", "dict3.dictionary", "dict_n.dictionary"}
on error
    set fileNames to false
end try
if fileNames is not false then
    try
        display dialog "You have already got the dictionary."
    end try
end if
end tell 
```

`You have already got the dictionary.`奇怪的是，尽管没有列出的文件存在，但始终显示该消息。

我的目的是检查是否存在任何列出的文件，如果其中一个或多个存在，则将显示该消息。

事实上，这个脚本将作为 Unix bash 脚本通过 运行`/usr/bin/osascript`，所以如果您能提供 Apple 脚本或 Bash 脚本方面的帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:35:38.593

尝试

```
 set theFolder to (path to library folder as text) & "Dictionaries:"
set fileNames to {"Apple Dictionary.dictionary", "dict2.dictionary", "dict3.dictionary", "dict_n.dictionary"}

set dict to {}
repeat with aFile in fileNames
    tell application "Finder"
        if exists file (theFolder & aFile as text) then set end of dict to aFile & return
    end tell
end repeat

if dict ≠ {} then display dialog "You have the following dictionaries installed:" & return & dict 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T11:56:48.037

另一种方法是尝试将文件对象强制为别名：

```
set p to (system attribute "HOME") & "/Desktop/test.txt"
try
    POSIX file p as alias
    true
on error
    false
end try 
```

`as alias`请注意，这会在评估时导致错误：

```
"/non-existing/path"
tell application "Finder" to exists POSIX file result as alias 
```

这不会导致错误：

```
POSIX file "/non-existing/path"
tell application "Finder" to exists result 
```

# c# - 正确的装箱算法？

> ID：12297791
> 
> 赞同：0
> 
> 时间：2012-09-06T10:13:59.573
> 
> 标签：c#, bin-packing

我有以下数字 6,8,9,4,3,2,10,7,14,12,6,2,3,1,10,11,13,5

我想知道为这些实现最适合的 1D Bin 打包算法的正确方法。因为在这个视频[http://www.youtube.com/watch?v=B2P1TzKKWOI&feature=related](http://www.youtube.com/watch?v=B2P1TzKKWOI&feature=related)他们解决它的方式与我的想法不同，所以我不知道正确的答案。

我的解决方案，先到先得，所以：

*   垃圾箱 #1：6,8,2
*   垃圾箱 #2：9,4,3
*   仓#3：3,10,1
*   箱#4：7,6
*   箱#5：14,2
*   垃圾箱 #6：12
*   垃圾箱 #7：10
*   垃圾箱 #8：11,5
*   9 号箱：13

他们的解决方案，我猜他们将合适的数字“配对”在一起，所以它就像：

*   垃圾箱 #1：6,10
*   垃圾箱 #2：9,7
*   仓#3：14,2
*   箱#4：12,4
*   箱#5：14,2
*   垃圾箱 #6：13,3
*   垃圾箱 #7：8,6,2
*   垃圾箱 #8：10,5,1
*   9 号箱：11,3

哪一个是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T11:22:34.793

我在评论末尾附上了算法。

@AngelicCore，我认为您的解决方案与视频中的解决方案之间的根本区别在于您的解决方案是“在线”解决方案，而视频中的解决方案是“离线”解决方案。

离线装箱假设包装者对每件物品都有完整的信息，并且有时间按照他或她想要的任何顺序排列它们。考虑一个带有运输暂存区的仓库。所有箱子都可以根据需要堆放、码垛和重新订购，直到准备好发货。

在线装箱通常在先进先出 (FIFO) 的基础上“即时”完成。想象一下，您正在接收从运货卡车到传送带的箱子。物料搬运设备迅速将所有箱子重新导向一队外运卡车。

补充说明

箱容量为 16。 (14+13+12+11+10+10+9+8+7+6+6+5+4+3+3+2+2+1)/16 = 126/ 16 ~ 7.87 => ceiling(7.87) = 8 个最小 bin 是下限。

## 算法

### 最佳拟合启发式

每次分配项目时，这种启发式尝试创建最满的箱。同样，所有未装满的垃圾箱都保持打开状态。它将下一个项目 j 放在当前内容最大但不超过 Q - qj 的 bin 中（因此项目适合）。如果它不适合任何垃圾箱，则会打开一个新垃圾箱。

初始化：

给定一个项目权重列表 L = {q1, q2, ..., qn}。

将 item1 放入 bin1 并从 L 中移除。Letj=2,m=1。

迭代：

1.  找到剩余容量最小但大于 qj 的 bin i（如果 Si 是 bin i 中的项目，Q - qk 是 bin i 的剩余容量），并将 j 放入 k∈Sii 中。如果 j 不适合任何 bin，则打开一个新 bin 并将其编号为 m + 1，将 j 放入 bin m + 1 并让 m = m + 1。

2.  从 L 中删除项目 j。令 j = j + 1。

3.  当项目保留在 L 中时，从步骤 1 开始重复。

# machine-learning - 使用 Weka 进行句子分类

> ID：12297794
> 
> 赞同：1
> 
> 时间：2012-09-06T10:14:02.977
> 
> 标签：machine-learning, classification, weka

我想用 Weka 对句子进行分类。我的特征是句子术语（单词）和每个术语的词性标签。我不知道图形属性如何，因为如果每个术语都作为一个特征呈现，每个实例（句子）的特征数量就会变得不同。并且，如果句子中的所有单词都作为一个特征呈现，那么单词和它们的 POS 标签是如何关联的。

任何想法我应该如何进行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:22:23.510

如果我对问题的理解正确，答案如下：最常见的做法是独立于单词在句子中的位置来处理单词，并在特征空间中用每个已知单词在该句子中出现的次数来表示一个句子。即，训练数据中存在的每个单词通常都有一个单独的数字特征。或者，如果您愿意使用 n-gram，则为训练数据中的每个 n-gram 提供一个单独的功能（可能具有一些频率阈值）。

至于 POS 标签，将它们用作单独的特征可能是有意义的，但前提是您感兴趣的分类与句子结构（语法）有关。否则，您可能只想将 POS 标签附加到单词上，这样可以部分消除可以代表不同词性的单词的歧义。

# xml - 计算 XPath 属性中字符串的出现次数

> ID：12297802
> 
> 赞同：3
> 
> 时间：2012-09-06T10:14:37.090
> 
> 标签：xml, string, xpath

是否可以在节点的属性值中选择具有“n”个字符串/字符序列重复出现次数的节点？

例如：

```
<IOCFG xmlns="http://www.br-automation.com/AR/IO" Version="2.0">
    <Module ID="$root.IO" Hardware="X20CP1484">
    </Module>
    <Module ID="$rot.IO" Hardware="X20CP1484">
    </Module>
    <Module ID="$rt.IO" Hardware="X20CP1484">
    </Module>
    **<Module ID="IF3.IF1.ST9" Hardware="Hello"/>**
    <Module ID="IF3.IF2.IF3.ST9" Hardware="Bye"/>
    **<Module ID="IF3.IF2.ST1" Hardware="hai"/>**
</IOCFG> 
```

从上面的文件中，我只能选择 ID（属性）的节点，其中 'IF' 字符串出现两次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T13:20:11.570

如果您在 XPath 2.0 中，`count(tokenize(., 'IF'))=3`则将测试 IF 是否出现两次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T13:23:43.677

**使用这个 XPath 表达式**：

```
/*/*
   [translate(@ID, translate(@ID, 'IF', ''), '')='IFIF'] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "/*/*
      [translate(@ID, translate(@ID, 'IF', ''), '')='IFIF']

     "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<IOCFG xmlns="http://www.br-automation.com/AR/IO" Version="2.0">
<Module ID="$root.IO" Hardware="X20CP1484">
</Module>
<Module ID="$rot.IO" Hardware="X20CP1484">
</Module>
<Module ID="$rt.IO" Hardware="X20CP1484">
</Module>
**<Module ID="IF3.IF1.ST9" Hardware="Hello"/>**
<Module ID="IF3.IF2.IF3.ST9" Hardware="Bye"/>
**<Module ID="IF3.IF2.ST1" Hardware="hai"/>**
</IOCFG> 
```

**计算 XPath 表达式并将所选元素复制到输出：**

```
<Module xmlns="http://www.br-automation.com/AR/IO" ID="IF3.IF1.ST9" Hardware="Hello"/>
<Module xmlns="http://www.br-automation.com/AR/IO" ID="IF3.IF2.ST1" Hardware="hai"/> 
```

**请注意**：

这是一个*粗略*的解决方案，假设属性的值`ID`具有某些属性（如在提供的 XML 中）。如果这个假设被打破，相同的 XPath 表达式可能不会产生正确的结果。

一个精确的 XPath 1.0 表达式只选择其`ID`属性`"IF"`恰好包含两次字符串的元素：

```
 /*/*
  [contains(@ID, 'IF')
  and contains(substring-after(@ID, 'IF'), 'IF')
  and not(contains(
              substring-after(substring-after(@ID, 'IF'),'IF'),
              'IF')
          )
  ] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T11:39:30.063

我不知道使用 XPath 计算匹配项的方法，但您可以使用 substring-after 函数作弊：

```
//*[contains(substring-after(@id, "IF"), "IF")] 
```

这将查找在字符串“IF”之后具有包含字符串“IF”的 ID 属性的所有元素（相当于两次“IF”）。它不像我想要的那样可读，但它有效。我使用这个交互式 xpath 测试器对其进行了测试：http: [//ponderer.org/download/xpath/](http://ponderer.org/download/xpath/)

编辑：正如另一位汤姆指出的那样，这将匹配具有两个或多个“IF”的 ID。要使其仅匹配恰好具有两个“IF”的 ID，您需要

```
//*[contains(substring-after(@id, "IF"), "IF") and not(contains(substring-after(substring-after(@id, "IF"), "IF"), "IF"))] 
```

但这对我来说看起来很丑（它匹配具有 2 个或更多“IF”的 ID，而不是具有 3 个或更多“IF”的 ID）。

# java - 学习 Java EE - 从哪里开始

> ID：12297807
> 
> 赞同：37
> 
> 时间：2012-09-06T10:14:46.187
> 
> 标签：java, jakarta-ee

我打算学习 Java EE，但我不知道从哪里开始。

根据[Java EE 版本历史](http://en.wikipedia.org/wiki/Java_EE_version_history)，较低版本中存在一些在较高版本中不可用的技术。在学习 Java EE 5 或 6 之前是否需要学习 J2EE 1.4？还是学习最新版本更好，因为他们这样做的目的是改进以前的版本。

您能否推荐一些有关 Java EE 的资源？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-06T10:18:14.013

除非直接需要在遗留系统上工作，否则最好从 Java EE 标准的最新版本开始。

对于初学者，我推荐Marty Hall 的[免费教程](http://courses.coreservlets.com/Course-Materials/)，尤其是[配置和使用 Apache Tomcat](http://www.coreservlets.com/Apache-Tomcat-Tutorial/)以帮助您启动和运行。

还有一个官方的 Java EE 初学者教程，[Java EE 7 教程](http://docs.oracle.com/javaee/7/tutorial/)。它写得体面，包含很多例子。到最后，你应该很清楚下一步该去哪里。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-07T18:53:47.737

正如 Saul 所解释的，除非您需要在遗留系统上工作，否则没有任何理由学习旧版本的 Java EE。

Java EE 的每个版本都是一个完全包含的平台，不需要学习或了解任何有关先前版本的信息。

在 1.4 的情况下，最好不惜一切代价避免它。它包含几种技术（主要是 EJB 2），它们是不良实践的体现。看着这些只会让你的头脑蒙上阴影。如果可能，请远离它。

Java EE 6 与 1.4 中构建应用程序的方式完全不同，是开始使用的推荐版本。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T10:40:16.787

Oracle [Java EE 教程](http://docs.oracle.com/javaee/6/tutorial/doc/)最适合初学者。在 Java EE 范围内。框架有很多，比如JSP、JSF、Servlet、Spring、Struts等。首先你应该试着关注哪个框架更适合你，然后尝试先学习。

在我看来，您需要先学习 J2EE 1.4，然后再学习 Java EE 5 或 6，因为有时我们可能会面临维护遗留的 Java EE 系统。但是你不需要维护遗留系统，那么你应该先学习 Java EE 6。

# c# - 如何使用 C# 和 WPF 导入和导出 excel？

> ID：12297812
> 
> 赞同：0
> 
> 时间：2012-09-06T10:15:15.037
> 
> 标签：c#, wpf, excel

我有一个由机器生成的 Excel 文件。我需要使用 WPF 和 C# 创建一个应用程序，它可以导入 excel 以查看其内容、进行一些计算并创建一些新列并保存为新的 excel 文件。哪条路要走？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:03:02.547

考虑 ODBC Excel 驱动程序。如果您的输入文件是由机器构建的，并且您不想要任何花哨的输出，那么这应该可以正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:28:40.677

我建议使用 Microsoft 的[Open XML 库](http://www.microsoft.com/en-us/download/details.aspx?id=5124)（因为它不需要安装 Excel）。

它上面有各种 3rd 方库，使其更易于使用；例如[ClosedXML](http://closedxml.codeplex.com/)或[Simple OOXML](http://simpleooxml.codeplex.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T05:38:07.817

您可以尝试使用电子表格控件打开 excel [http://www.syncfusion.com/products/user-interface-edition/wpf/spreadsheet](http://www.syncfusion.com/products/user-interface-edition/wpf/spreadsheet)

示例位置：[http ://silverlight.syncfusion.com/samples/WPF/Samples/WPFSampleBrowser/UI/Spreadsheet/Spreadsheet.htm](http://silverlight.syncfusion.com/samples/WPF/Samples/WPFSampleBrowser/UI/Spreadsheet/Spreadsheet.htm)

# ios - 我可以写多长时间，使用 Blob 写入从 iphone 到 CC2540？（BLE）

> ID：12297813
> 
> 赞同：1
> 
> 时间：2012-09-06T10:15:20.740
> 
> 标签：ios, bluetooth, bluetooth-lowenergy

我可以写多长时间，使用 Blob 写入从 iphone 到 CC2540？（BLE）

我用 iphone 写了一个大约 252 字节的特征（写长特征值），但是 iphone 返回未知错误，可能是 2540 超时？

短消息长度（但只能写 90 字节）没有问题。2540 对 Blob 写入有一些限制吗？

# javascript - IE 上的新 XMLHttpRequest() 上的 JS Ajax 未指定错误

> ID：12297816
> 
> 赞同：1
> 
> 时间：2012-09-06T10:15:30.163
> 
> 标签：javascript, ajax, xmlhttprequest

**我使用 ajax 来调用远程网页，这适用于 ff、chrome 和 ie 正确，我使用开发站点进行测试并且它工作正常**

**远程页面上的头文件也允许跨域请求，**

但是当我将此代码添加到实时站点时，它会给出。这给出了即其他浏览器工作正常

**SCRIPT16389：xmlhttp=new XMLHttpRequest() 上的未指定错误；**

我还更改了标题以允许来自实时站点的请求，但是没有人可以帮助我

```
var xmlhttp;
    if (window.XDomainRequest)
    {
        xmlhttp=new XDomainRequest();
        xmlhttp.onload = function(){ //alert(xmlhttp.responseText)
        };
    }
    else if (window.XMLHttpRequest)
        xmlhttp=new XMLHttpRequest();
    else
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
            alert(xmlhttp.responseText);
    }
    xmlhttp.open("GET",'http://oncorecables.com/stock/jumi/cross.php',true);
    xmlhttp.send(); 
```

现场直播 [http://mychatterbook.com/profiles/members/](http://mychatterbook.com/profiles/members/)

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T12:53:42.457

您是否在 InPrivate 模式下使用 IE8？

当用户在 InPrivate 浏览模式下浏览时，IE8 中有一个错误会导致使用 XDomainRequests 对象的跨域 HTTP 请求失败（请参阅[http://blogs.msdn.com/b/ieinternals/archive/2010/05/ 13/xdomainrequest-restrictions-limitations-and-workarounds.aspx](http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx)）。

我自己通过使用 jQuery 的`$.get()`方法解决了这个问题。如果您没有在您的网站中使用 jQuery，您可能需要通过 jQuery 的源代码来调查他们是如何解决这个问题的，因为他们显然已经设法做到了这一点。

# symfony - Symfony Twig Form 特定字段的主题

> ID：12297818
> 
> 赞同：6
> 
> 时间：2012-09-06T10:15:39.110
> 
> 标签：symfony, twig, symfony-forms, symfony-2.1

我有一个自定义表单字段类型和一个关联的表单主题。在一页上，我有很多这样的字段，但我特别想更改其中一个字段。

有没有办法以不同的方式对相同类型（和在同一个文件中）的某些字段进行主题化？

一个简化的例子：

form_fields.html.twig：（本地主题文件）

```
{% block my_dropdown_row %}
<div>
    {{ form_label(form) }}
    {{ form_widget(form) }}
    {{ form_errors(form) }}
</div>
{% endblock %} 
```

在我的表单模板中（所有这些字段都具有相同的类型 -`my_dropdown`

```
{{ form_row(form.selectionA) }}
{{ form_row(form.selectionB) }}
{{ form_row(form.selectionC) }}
{{ form_row(form.final_selection) }} 
```

如何以与其他字段不同的方式设置最终字段的样式？这些小部件中有很多代码，因此重复越少越好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T10:24:05.683

这是可以做到的。方法如下：

[http://symfony.com/doc/current/cookbook/form/form_customization.html](http://symfony.com/doc/current/cookbook/form/form_customization.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-07T13:27:26.577

老问题，已经回答，但很高兴有更详细的信息。

```
{% form_theme form _self %}

    {% block _product_name_widget %}
    <div class="text_widget">
        {{ block('form_widget_simple') }}
    </div>
{% endblock %}

{{ form_widget(form.name) }} 
```

块名称`_product_name_widget`代表的地方

_ `form type(block prefix)`_ `form item name`_`render function`

[http://symfony.com/doc/current/form/form_customization.html#how-to-customize-an-individual-field](http://symfony.com/doc/current/form/form_customization.html#how-to-customize-an-individual-field)

# bash - 如何将字符串附加到同一行而不是创建新行？

> ID：12297820
> 
> 赞同：23
> 
> 时间：2012-09-06T10:15:46.643
> 
> 标签：bash, redirect

重定向到文件对于将字符串作为新行附加到文件非常有用，例如

```
echo "foo" >> file.txt
echo "bar" >> file.txt 
```

结果：

```
foo
bar 
```

但是是否也可以将字符串重定向到文件中的同一行？

例子：

```
echo "foo" <redirection-command-for-same-line> file.txt
echo "bar" <redirection-command-for-same-line> file.txt 
```

结果：

```
foobar 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-09-06T10:17:05.340

换行符是由添加的`echo`，而不是由重定向添加的。只需将`-n`开关传递`echo`给以抑制它：

```
echo -n "foo" >> file.txt
echo -n "bar" >> file.txt 
```

> `-n` 不输出尾随换行符

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-01T20:19:02.773

将结果回显到一行的另一种方法是将结果简单地分配给变量。例子：

```
j=$(echo foo)
i=$(echo bar)
echo $j$i
foobar
echo $i $j
bar foo 
```

当您有更复杂的功能时，这特别有用，也许是一个复杂的“awk”语句来连续拉出一个特定的单元格，然后将它与另一个集合配对。

# php - SLES 中的 phpize 错误

> ID：12297821
> 
> 赞同：0
> 
> 时间：2012-09-06T10:15:48.617
> 
> 标签：php

我正在尝试运行该`phpize`命令，但我不断收到此错误消息：

```
Cannot find config.m4
Make sure that you run '/usr/bin/phpize in top level source directory of the module 
```

我已经安装了`php5-dev`.

# jquery - 提交 Jquery 向导表单？

> ID：12297825
> 
> 赞同：0
> 
> 时间：2012-09-06T10:15:58.393
> 
> 标签：jquery, jquery-ui, session, struts2, wizard

我在后端使用 Jquery for UI 和 Struts2。我有一个要求，我必须制作一个 JQuery 向导，并且必须将表单提交到数据库。

问题是，我要将值插入数据库中的六个表中，即。向导中的每一页都代表数据库中的一个表。总共有 72 个元素属于这六个表。

在上述情况下，持久化数据库的最佳决策是什么：

1.  使用 JSP 会话

    **怀疑：**我想知道如何让这个会话对象回到 struts2 动作类？

2.  将每个页面存储在一个列表中，并在提交表单时发送所有列表。

    **疑问：**当我们将每个页面中所有元素的**Java List**作为普通查询字符串发送时，是否可以将其作为**List**进行检索。用于检索查询字符串的代码是：在我的**Action 类**`ServletRequestAware`中实现接口和

     **```
     public void setServletRequest(HttpServletRequest httpServletRequest) {
        this.request = httpServletRequest;
          }

        public final Map getParameters() {
        parameters = ActionContext.getContext().getParameters();
        return parameters;
        }

        public String getParameterValue(String param) {
        Object paramObj = getParameters().get(param);
        if (paramObj == null)
            return null;
        return ((String[]) paramObj)[0];
        } 
    ```** 
***   通过在数据库中为每个表创建一个重复表。但我不能按要求使用。** 

 **如果有任何方法可以实现这不应该影响应用程序的性能，请建议我。也解除了我以上的疑惑。

**评论家：** 目前我正在 Struts2 中做 JSP 会话的背景工作，并尝试与我得到的示例合并。

请指导我进一步做什么..

提前致谢 。**

# mysql - 在 MySQL 中存储为下划线的文本中的空格

> ID：12297831
> 
> 赞同：1
> 
> 时间：2012-09-06T10:16:11.437
> 
> 标签：mysql, encoding

我通过向带有函数的 url 发送请求来在 MySQL 中存储文本。

url 用 %20 编码为空格，这很好，但是当它存储在 MySQL 中时，空格被替换为下划线 _ 。

这是一个句子 -> This_is_a_sentence。

有没有办法避免这个问题？

这是代码：

```
 function new_experiment_reply($thread_title = '', $raven_thread_id = '', $text = '', $forum_url = '', $raven_forum_id = '')
{
    $email = $this->session->userdata('email');
    $query = $this->db->query("SELECT id FROM fn_users WHERE email='" . $email . "'");
    $fn_user_id = $query->first_row()->id;
    $query = $this->db->query("SELECT username FROM forum_users WHERE fn_user_id='" . $fn_user_id . "' AND raven_forum_id='" . $raven_forum_id . "'");
    $username = $query->first_row()->username;
    $date = date("Y-m-d H:i");
    $query = $this->db->query('INSERT INTO promo_replies(thread_title, raven_thread_id, text, forum_url, raven_forum_id, date, fn_user_id, username) VALUES("'. $thread_title .'", "'. $raven_thread_id .'", "'. $text .'", "'. $forum_url . '", "'. $raven_forum_id . '", "'. $date . '", "'. $fn_user_id . '", "'. $username . '") ');
} 
```

变量的插入值（正如它们在 Fiddler 中看到的那样，它们应该是这样的）：

```
$thread_title= Facebook%20vs%20Google
$raven_thread_id = 123441
$text = This%20is%20a%20sentence
$forum_url = domain.com
$raven_forum_id = 32 
```

回显查询后，我得到以下结果：

```
INSERT INTO promo_replies
    (thread_title, raven_thread_id, text, forum_url, raven_forum_id, date, fn_user_id, username) 
VALUES
    ("Facebook_vs_Google", "123441", "This_is_a_sentence", "domain_com", "32", "2012-09-06 06:04", "8", "usssaa") 
```

我准备好对代码进行抨击，所以不用担心。

# android - 录制视频时如何在Android中管理前置摄像头方向？

> ID：12297838
> 
> 赞同：3
> 
> 时间：2012-09-06T10:16:33.983
> 
> 标签：android, video, android-orientation, video-recording

我正在尝试开发纵向模式的摄像机应用程序。当我使用后置摄像头录制视频时，视频具有正确的方向，因为它进行了正确的旋转。但是，当我尝试使用前置摄像头显示预览时，在某些设备中它可以正常工作，但在其他设备中，视频像 HTC Desire 一样旋转 180º。那么，如何控制这个问题将相机旋转到正确的位置呢？

更新：我发现这个[链接](https://stackoverflow.com/questions/11426230/android-camera-recording-video-but-plays-upside-down)解释了我的问题，解决方案是重新编码视频，开发理解元数据的播放活动或将视频上传到服务器并旋转它。我最好的解决方案是在我的应用程序中开发一个新的播放视频。有人可以给我一些指导吗？是否需要使用 ffmpeg 库？我已经开发了一个基本的播放视频，但是如何使用元数据来定位视频？

```
private boolean initCamera() {
    try {
        camera  = getCameraInstance(selected_camera);

        Camera.Parameters camParams = camera.getParameters();
        camParams.set( "cam_mode", 1 );
 //            camParams.set("orientation", "portrait");

        checkCameraFlash(camParams);

        setAngleCameraRotation();
 //            camera.setDisplayOrientation(angle_rotation_camera);

        setAspectResolutionCamera(camParams);

        camera.setParameters(camParams);

        video_view.getHolder().setFixedSize(height_video, width_video);

        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(height_video, width_video);
        video_view.setLayoutParams(lp);

        camera.lock();

        surface_holder = video_view.getHolder();
        surface_holder.addCallback(this);
        surface_holder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);

        setPreviewCamera();

    } catch(Exception e) {
        Log.v("RecordVideo", "Could not initialize the Camera");
        return false;
    }
    return true;
}

private void initCameraRecorder() {

    if(media_recorder != null) return;

    String timeStamp = new SimpleDateFormat("yyyyMMdd_HHmmss").format(new Date());
    output_file_name = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM) + File.separator + timeStamp + ".mp4";

    File outFile = new File(output_file_name);
    if(outFile.exists()) {
        outFile.delete();
    }

    try {
        camera.stopPreview();
        camera.unlock();
        media_recorder = new MediaRecorder();
        media_recorder.setCamera(camera);

        media_recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        media_recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        CamcorderProfile profile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
        profile.videoBitRate = 885000;              //Medium quality
        profile.videoFrameHeight = height_video;
        profile.videoFrameWidth = width_video;
        media_recorder.setProfile(profile);

        media_recorder.setMaxDuration(21000);       // limit to 21 seconds
        media_recorder.setOrientationHint(setOrientationCameraRecorder());
        media_recorder.setPreviewDisplay(surface_holder.getSurface());
        media_recorder.setOutputFile(output_file_name);

        media_recorder.prepare();
        Log.v("RecordVideo", "MediaRecorder initialized");

    } catch(Exception e) {
        Log.v("RecordVideo", "MediaRecorder failed to initialize");
        e.printStackTrace();
    }
}

public static Camera getCameraInstance(int camera_id) {
    Camera c = null;
    try {
        c = Camera.open(camera_id); // attempt to get a Camera instance
    }
    catch (Exception e){
        // Camera is not available (in use or does not exist)
    }
    return c; // returns null if camera is unavailable
}

 private void setAspectResolutionCamera(Parameters camParams) {
    float aspect_ratio = 1f;
    int aspect_width = 2000, aspect_height = 2000;
    List<Size> supported_sizes_list = camParams.getSupportedPreviewSizes();
    for (int i = 0; i < supported_sizes_list.size(); i++) {
        Size size = supported_sizes_list.get(i);
        if (Math.abs(VIDEO_ASPECT_RATIO - (float) size.height / size.width) <= aspect_ratio ) {
            if (Math.abs(VIDEO_ASPECT_WIDTH - size.height) <= aspect_width) {
                if (Math.abs(VIDEO_ASPECT_HEIGHT - size.width) < aspect_height) {
                    width_video = size.width;
                    height_video = size.height;
                    aspect_ratio = Math.abs(VIDEO_ASPECT_RATIO - (float) size.height / size.width);
                    aspect_width = Math.abs(VIDEO_ASPECT_WIDTH - size.height);
                    aspect_height = Math.abs(VIDEO_ASPECT_HEIGHT - size.width);
                }
            }
        }
    }
}

/** Sets the angle camera rotation. It's the user sees */
private void setAngleCameraRotation() {
    Camera.CameraInfo info = new Camera.CameraInfo();
    android.hardware.Camera.getCameraInfo(selected_camera, info);       // back-facing camera
    int rotation = getWindowManager().getDefaultDisplay().getRotation();
    int degrees = 0;
    switch (rotation) {
        case Surface.ROTATION_0: degrees = 0; break;
        case Surface.ROTATION_90: degrees = 90; break;
        case Surface.ROTATION_180: degrees = 180; break;
        case Surface.ROTATION_270: degrees = 270; break;
    }
    angle_rotation_camera = (info.orientation - degrees) % 360;  // back-facing camera rotation
} 
```

# c# - C#从右到左调整面板大小

> ID：12297839
> 
> 赞同：0
> 
> 时间：2012-09-06T10:16:41.033
> 
> 标签：c#, resize, panel, picturebox, mousemove

我花了几个小时在互联网上搜索如何拿走我的面板并从左侧抓住它并向左拉。我找到了很多来源，并尝试根据需要对其进行更改，但它总是从左到右。我目前拥有的代码是：

```
bool allowResize = false;

private void PanelResize_MouseUp(object sender, MouseEventArgs e)
    {
        allowResize = false;            
    }

    private void PanelResize_MouseMove(object sender, MouseEventArgs e)
    {
        if (allowResize)
        {
            FavoritesPanel.Width = PanelResize.Left + e.X;
        }
    }

    private void PanelResize_MouseDown(object sender, MouseEventArgs e)
    {
        allowResize = true;
    } 
```

“PanelResize”是一个推到面板左侧的图片框。“FavoritesPanel”是面板。两者都固定在顶部、底部和右侧。

我的总体问题是，如何更正代码以将面板从右向左拖动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-18T07:30:30.127

问题是更改某些面板的宽度的默认设置意味着它使面板的宽度更大，右侧移动到正确的方向。你需要两件事。这就是您所拥有的（调整宽度），其次是您需要将整个面板移到左侧，只要您使其宽度更大。

我这里有类似的代码。我编写的代码允许您卷起面板的上侧。所以我不得不再次做两件事：让我的面板更高，并将整个面板向上移动。这是我的代码：

```
public partial class Form1 : Form
{
    private int actualCursorY;
    private int lastCursorY;
    private bool isDragged;

    public Form1()
    {
        InitializeComponent();
    }

    private void barRadPanel_MouseDown(object sender, MouseEventArgs e)
    {
        lastCursorY = PointToClient(new Point(Cursor.Position.X, Cursor.Position.Y)).Y;
        isDragged = true;
    }

    private void barRadPanel_MouseUp(object sender, MouseEventArgs e)
    {
        isDragged = false;
    }

    private void barRadPanel_MouseMove(object sender, MouseEventArgs e)
    {
        if (isDragged)
        {
            actualCursorY = PointToClient(new Point(Cursor.Position.X, Cursor.Position.Y)).Y;
            mainRadPanel.Location = new Point(mainRadPanel.Location.X, actualCursorY);

            if (lastCursorY != actualCursorY)
            {
                mainRadPanel.Height -= actualCursorY - lastCursorY;
                lastCursorY = actualCursorY;
            }
        }
    }
} 
```

我试着用

```
e.Y 
```

代替

```
PointToClient(new Point(Cursor.Position.X, Cursor.Position.Y)).Y 
```

但它犯了一些错误。

这就是它的作用：

[![在此处输入图像描述](../Images/6519c695fd97457a10de51d7da8a8985.png)](https://i.stack.imgur.com/lofoI.png)

# indexing - CQL 3 中的 Cassandra 1.1 复合键、列和过滤

> ID：12297841
> 
> 赞同：1
> 
> 时间：2012-09-06T10:16:53.223
> 
> 标签：indexing, cassandra, database-indexes

我希望有一个如下表：

```
CREATE TABLE ProductFamilies (
  ID varchar,
  PriceLow int,
  PriceHigh int,
  MassLow int,
  MassHigh int,
  MnfGeo int,
  MnfID bigint,
  Data varchar,
  PRIMARY KEY (ID)
); 
```

共有13个字段。其中大多数代表存储桶。数据是产品系列 ID 的 JSON，然后在后续查询中使用。**鉴于 Cassandra 的工作方式，引擎盖下的列名将是值。我想过滤这些。**

我希望按如下方式运行查询：

```
SELECT Data FROM MyApp.ProductFamilies WHERE ID IN (?, ?, ?) AND PriceLow >= ? 
AND PriceHigh <= ? AND MassLow >= ? AND MassHigh <= ? and MnfGeo >= ? AND 
MnfGeo <= ? 
```

1.  我读到 Cassandra 只能针对复合行键或索引列执行 WHERE 谓词。这仍然是真的吗？如果是这样，我将不得不使列 < Data 成为 PK 的一部分。
2.  是否仍然必须从左到右包含所有列并且不能跳过任何列？
3.  我的设计中是否有任何非最佳点？
4.  我想添加一列“材料”，它是产品系列中可能的材料数组。想想披萨配料，并查询“WHERE Materials IN ('Pineapple')”。在不创建单独的材料倒排索引然后对上述查询执行手动交集的情况下，在 Cassandra 中是否还有其他 [更优雅] 的处理方式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T14:10:25.233

如果您指定要查找的确切 PK，正如您在此处建议的那样（id IN ...），您可以在其余谓词中使用您喜欢的任何表达式。没有限制。

从计划于 10 月底发布的 1.2.0 开始支持列表集合。可能支持也可能不支持集合内容的索引查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T14:42:51.260

基本上是为了支持您需要的查询

```
create column family ProductFamilies with 
comparator='CompositeType(UTF8Type, Int32Type, Int32Type, Int32Type, Int32Type, Int32Type, LongType, UTF8Type)' 
and key_validation_class='UTF8Type' 
```

或者

```
CREATE TABLE ProductFamilies (
  ID varchar,
  PriceLow int,
  PriceHigh int,
  MassLow int,
  MassHigh int,
  MnfGeo int,
  MnfID bigint,
  Data varchar,
  PRIMARY KEY (ID, PriceLow, PriceHigh, MassLow, MnfGeo, MnfID, Data)
); 
```

~~现在可以查询了~~

 ~~```
SELECT Data FROM MyApp.ProductFamilies WHERE ID IN (?, ?, ?) AND PriceLow >= ? 
AND PriceHigh <= ? AND MassLow >= ? AND MassHigh <= ? and MnfGeo >= ? AND 
MnfGeo <= ? 
```~~ 

~~前提是您不会从左到右错过任何列[尽管不是过滤器，但至少是一个 *]，并且您的所有值都在列名中，而不是值中。~~

关于复合列，您应该了解的另一件事是“列切片必须是连续的”因此，pricelow > =10 和 pricelow <= 40 将返回一个连续切片，但使用 masslow 和其他列过滤结果集将无法正常工作不会导致连续切片。顺便说一句，pricelow = 10 和 masslow <= 20 和 masslow >=10 应该可以工作[用 phpcassa 测试]，因为它会再次产生一个连续的切片。

否则在您的任何列上创建一个或多个二级索引。然后，您有权根据列值进行查询，前提是您在查询中始终具有至少一个索引字段。 [http://www.datastax.com/docs/1.1/ddl/indexes](http://www.datastax.com/docs/1.1/ddl/indexes)

关于你的实质性问题，据我所知，如果它是一个多值列，那么除了有一个倒排索引之外别无他法。

如果@jbellis 验证这一点，那就太好了

# python - 我可以将 SQLAlchemy 与 Cassandra CQL 一起使用吗？

> ID：12297847
> 
> 赞同：6
> 
> 时间：2012-09-06T10:17:06.980
> 
> 标签：python, sqlalchemy, cassandra

我将 Python 与 SQLAlchemy 一起用于一些关系表。为了存储一些较大的数据结构，我使用 Cassandra。我宁愿只使用一种技术（cassandra）而不是两种（cassandra 和 PostgreSQL）。是否也可以将关系数据存储在 cassandra 中？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T10:20:29.663

不，Cassandra 是一个[NoSQL](https://en.wikipedia.org/wiki/NoSQL_%28concept%29)存储系统，不支持连接等基本 SQL 语义，更不用说 SQL 查询了。SQLAlchemy 专门用于 SQL 语句。CQL 只是类似于 SQL，而不是实际的 SQL 本身。

引用[Cassandra CQL 文档](http://www.datastax.com/docs/1.0/references/cql/index)：

> 尽管 CQL 与 SQL 有许多相似之处，但也有一些根本的区别。例如，CQL 适用于 Cassandra 数据模型和架构，因此仍然不允许类似 SQL 的操作，例如 JOIN 或对使用随机分区器的集群上的行进行范围查询。

您当然可以自由地将*所有*数据存储在 Casandra 中，但这意味着您必须重新考虑如何存储这些数据并再次找到它。您不能使用 SQLAlchemy 将该数据映射到 Python 对象中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:02:28.270

如前所述，Cassandra 在设计上不支持 JOIN。改用 Pycassa 映射：http: [//pycassa.github.com/pycassa/api/pycassa/columnfamilymap.html](http://pycassa.github.com/pycassa/api/pycassa/columnfamilymap.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T14:58:35.647

playOrm 在 noSQL 上支持 JOIN，因此您可以将关系数据放入 noSQL 但它目前在 java 中。我们一直在考虑为像您这样的程序从服务器公开 S-SQL 语言。 **你会感兴趣吗？**

S-SQL 看起来像这样（如果你不使用分区，在 SELECT 语句之前你甚至不需要任何东西）......

PARTITIONS t(:partId) SELECT t FROM TABLE as t INNER JOIN t.security as s WHERE s.securityType = :type and t.numShares = :shares")

这允许在 noSQL 环境中使用关系数据，并且如果您对数据进行分区，则可以通过快速查询和快速连接很好地扩展。

**如果您愿意，我们可以快速编写一个原型服务器**，该服务器公开一个接口，您可以在其中发送 S-SQL 请求，然后我们将某种形式的 json 返回给您。我们希望它不同于 SQL 结果集，当左连接和内连接出现在图片中时，这是一个非常糟糕的主意。

IE。我们会像这样在连接上返回结果（这样你就可以设置一个实际有效的最大结果）......

表A行A-表B行45-表B行65-表B行78表A行C-表B行46-表B行93

注意，我们不会返回多个 A 行，因此如果您有最大结果 2，您将获得 A 行和 C 行，而在 ODBC/JDBC 中，您将仅获得 rowA 两次，其中第 45 行和第 65 行，因为这就是表格的外观就像它被返回时一样（当您使用任何类型的 OO 语言时，这有点愚蠢）。

只需让 playOrm 团队知道您是否需要 playOrm github 网站上的任何内容。

院长

# java - 在 jfreechart TimeSeriesCollection 中如何显示只有值的日期？

> ID：12297851
> 
> 赞同：1
> 
> 时间：2012-09-06T10:17:15.343
> 
> 标签：java, jfreechart

```
public class Example {
    public static void main(String args[]){
        /*creating timeSeriesCollection*/
        TimeSeriesCollection dataset = new TimeSeriesCollection();
        TimeSeries timeSeries1 = new TimeSeries("Sample 1");
        timeSeries1.add(new Day(8,4, 2012), 7.0);
        timeSeries1.add(new Day(19,4, 2012), 5.0);
        dataset.addSeries(timeSeries1);
        /*Creating the chart*/
        JFreeChart chart = ChartFactory.createTimeSeriesChart("Population","Date","Population",dataset,true,true,false);
        /*Altering the graph */
        XYPlot plot = (XYPlot) chart.getPlot(); 
    plot.setAxisOffset(new RectangleInsets(5.0, 10.0, 10.0, 5.0));  
    plot.setDomainCrosshairVisible(true);
    plot.setRangeCrosshairVisible(true);
    XYLineAndShapeRenderer renderer = (XYLineAndShapeRenderer)plot.getRenderer();
    renderer.setBaseShapesVisible(true);
    renderer.setBaseShapesFilled(true);
    NumberAxis numberAxis = (NumberAxis)plot.getRangeAxis();        
    numberAxis.setRange(new Range(0,10));   
    DateAxis axis = (DateAxis) plot.getDomainAxis();
    axis.setDateFormatOverride(new SimpleDateFormat("dd-MM-yyyy"));
    axis.setAutoTickUnitSelection(false);
    axis.setVerticalTickLabels(true);
        /* Displaying the chart*/           
        ChartFrame frame = new ChartFrame("Test", chart);
        frame.pack();
        frame.setVisible(true);
    }   
} 
```

我已经编写了上面的代码，它工作得很好，但是在渲染图形时它显示的日期没有值。它在没有值的 y 轴上显示日期，如`9/4/12`, `10/4/2012`to 。`18/4/2012`如何删除没有价值的日期。为什么会这样？

任何人都可以帮助我吗？

![](../Images/bda236b013cc699522f822a62bdfd93a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T15:29:27.287

尝试这个：

```
 public class Example1 {
    public static void main(String args[]){

        DefaultKeyedValues data = new DefaultKeyedValues();
        data.addValue("8/4/2012" ,7.0);
        data.addValue("19/04/2012",5.0);

        CategoryDataset dataset = DatasetUtilities.createCategoryDataset("Population", data);
        JFreeChart chart = ChartFactory.createBarChart("Population","Date","Population",dataset,PlotOrientation.VERTICAL,true,true,false);
        ChartFrame frame = new ChartFrame("Test", chart);

        //Switch from a Bar Rendered to a LineAndShapeRenderer so the chart looks like an XYChart
        LineAndShapeRenderer renderer = new LineAndShapeRenderer();
        renderer.setBaseLinesVisible(false); //TUrn of the lines
        CategoryPlot plot = (CategoryPlot) chart.getPlot();
        plot.setRenderer(0, renderer);

        NumberAxis numberAxis = (NumberAxis)plot.getRangeAxis();        
        numberAxis.setRange(new Range(0,10));   

        frame.pack();
        frame.setVisible(true);
    }   
} 
```

![在此处输入图像描述](../Images/fdf4e28b4b6774753800f01856d772ab.png)

而不是使用a`TimeSeriesChart`使用 CategoryDataSet 作为@Dirk sugested 然后切换到`LineAndShapeRenderer`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T11:56:29.793

连续显示，这`TimeSeries`意味着日期沿轴均匀分布，即使该日期没有实际值。如果您只想显示某些日期，您应该使用某种[CategoryDataSet](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/category/CategoryDataset.html)。

# ios5 - 如何为核心数据添加元素到 NSOrderedSet？

> ID：12297853
> 
> 赞同：10
> 
> 时间：2012-09-06T10:17:17.577
> 
> 标签：ios5, core-data, nsorderedset

[我对这篇文章](https://stackoverflow.com/questions/7385439/exception-thrown-in-nsorderedset-generated-accessors/7922993#7922993)做了一些研究。但它的解决方案都不适合我。让我解释一下我做了什么：

![在此处输入图像描述](../Images/2a46d2be541a5c79168a731c0d233ee9.png)

它实际上与提到的帖子非常相似。

类别.h

```
@class Category, Item;

@interface Category : NSManagedObject

@property (nonatomic, retain) NSString * name;
@property (nonatomic, retain) NSOrderedSet *items;
@property (nonatomic, retain) Category *parentcategory;
@property (nonatomic, retain) NSSet *subcategories;

@end

@interface Category (CoreDataGeneratedAccessors)

- (void)insertObject:(Item *)value inItemsAtIndex:(NSUInteger)idx;
- (void)removeObjectFromItemsAtIndex:(NSUInteger)idx;
- (void)insertItems:(NSArray *)value atIndexes:(NSIndexSet *)indexes;
- (void)removeItemsAtIndexes:(NSIndexSet *)indexes;
- (void)replaceObjectInItemsAtIndex:(NSUInteger)idx withObject:(Item *)value;
- (void)replaceItemsAtIndexes:(NSIndexSet *)indexes withItems:(NSArray *)values;
- (void)addItemsObject:(Item *)value;
- (void)removeItemsObject:(Item *)value;
- (void)addItems:(NSOrderedSet *)values;
- (void)removeItems:(NSOrderedSet *)values;
- (void)addSubcategoriesObject:(Category *)value;
- (void)removeSubcategoriesObject:(Category *)value;
- (void)addSubcategories:(NSSet *)values;
- (void)removeSubcategories:(NSSet *)values;

@end 
```

在我的视图控制器中，我加载了以下类别之一：

```
NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:kEntityCategory];
request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor
                                                    sortDescriptorWithKey:kAttributeCategoryName ascending:YES
                                                    selector:@selector(localizedCaseInsensitiveCompare:)]];

NSError *error = nil;
AppDelegate* appDelegate = (AppDelegate *)[UIApplication sharedApplication].delegate;

NSArray* data = [appDelegate.dataCenter.document.managedObjectContext executeFetchRequest:request error:&error];
if ( data.count > 0)
{
    self.category = [data objectAtIndex:0];
} 
```

我在导航栏中有一个按钮用于测试目的。单击它时，我将复制第一项并添加到末尾。

```
Item* item = [self.category.items objectAtIndex:0];

[self.category willChangeValueForKey:@"items"];
NSMutableOrderedSet *tempSet = [NSMutableOrderedSet orderedSetWithOrderedSet:self.category.items];
[tempSet addObject: item];
self.category.items = tempSet;
[self.category didChangeValueForKey:@"items"]; 
```

问题是该项目根本没有添加到数据库中。（我做了一些测试，比如我修改了item的内容，证明数据库完全没有问题。）但是我不知道item没有到数据库的原因。有人可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-01-11T14:44:01.640

迅速：

```
let mutableItems = items.mutableCopy() as! NSMutableOrderedSet
mutableItems.addObject(anItem)
items = mutableItems.copy() as! NSOrderedSet 
```

目标-C：

```
NSMutableOrderedSet *mutableItems = (NSMutableOrderedSet *)items.mutableCopy;
[mutableItems addObject:anItem];
items = (NSOrderedSet *)mutableItems.copy; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T04:24:11.053

问题解决了。有两个问题：

1.  无法插入/添加现有项目
2.  我有一个愚蠢的名字冲突。所以[这篇文章](https://stackoverflow.com/questions/7385439/exception-thrown-in-nsorderedset-generated-accessors/7922993#7922993)中的建议是好的。

谢谢。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-18T19:44:11.847

另一种方法是使用`mutableOrderedSetValueForKey`NSKeyValueCoding 中的函数。你可以说

`owningObject.mutableOrderedSetValueForKey("items").addObject(anItem)`

不幸的是，这并不能让您在编译时检查“项目”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-29T06:48:41.867

## Swift 5 及更高版本

```
let mutableItems = items.mutableCopy() as! NSMutableOrderedSet
mutableItems.add(anItem)
items = mutableItems.copy() as! NSOrderedSet 
```

# html - prettyPhoto 的 rel 属性上的验证错误

> ID：12297854
> 
> 赞同：5
> 
> 时间：2012-09-06T10:17:19.293
> 
> 标签：html

看起来 W3C 的验证器在 HTML5 页面的 prettyPhoto 的 rel 属性上返回了一个验证错误。我该如何解决这个错误？

***元素 a 上的属性 rel 的错误值 prettyPhoto[gallery1]：关键字 prettyphoto[gallery1] 未注册。***

非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T10:26:08.710

使用`rel`具有非提议（因此不允许）值的属性对 HTML5 标记无效。值`prettyPhoto`不在建议值列表中。因此，您可能会面临通过图片库通过验证来获取网页的困难。

**一个可能的解决方案：**

1.  打开`jquery.prettyPhoto.js`（可能是未缩小的）并执行文本编辑器的查找和替换功能：

    替换所有出现的`attr('rel')`with `attr('data-gal')`。

2.  在您的画廊代码中使用：

    `data-gal="prettyPhoto[galname]"`

    而不是：

    `rel="prettyPhoto[galname]"`

3.  使用以下命令初始化您的 prettyPhoto：

    `jQuery("a[data-gal^='prettyPhoto']").prettyPhoto();`

    并且您正以正确的方式使您的代码有效！

**您也可以使用此可能的解决方案阅读[本文。](http://forums.no-margin-for-errors.com/discussion/1741/achieve-clean-validation-for-html5/p1)**

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-02T13:11:00.173

您可以使用[此处](http://forums.no-margin-for-errors.com/discussion/comment/12039#Comment_12039)`hook`评论中提到的（未记录的）设置。

像这样指定您的链接：`<a href="img.jpg" data-gal="prettyPhoto[gal]"></a>`并用于`$("a[data-gal^='prettyPhoto'").prettyPhoto({hook: 'data-gal'});`初始化 prettyPhoto。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-28T19:03:30.997

您还可以通过更新设置以使用类挂钩来修复它：

```
s = jQuery.extend({
        ...
        hook: "rel",
        animation_speed: "fast",
        ajaxcallback: function() {},
        slideshow: 5e3,
        autoplay_slideshow: false,
        opacity: .8,
        ... 
```

到：

```
s = jQuery.extend({
        ...
        hook: "class",
        ... 
```

# objective-c - NSTokenField 弹出窗口中的建议

> ID：12297858
> 
> 赞同：3
> 
> 时间：2012-09-06T10:17:46.823
> 
> 标签：objective-c, cocoa, nstokenfield

我正在尝试继承 NSTokenField 以显示带有令牌建议的弹出框。

我将我的子类设置为超级委托，我拦截了`– tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:`委托方法并返回 nil 以防止菜单显示。它工作正常，除了返回 nil 令牌字段不完成用户输入的字符串。

目前我正在使用以下几行`– tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:`来添加建议的字符串：

```
NSText *editingText = [[self window] fieldEditor:NO forObject:self];
NSString *suggestionString = [filteredStrings objectAtIndex:0];
NSString *missingPart = [(NSString *)suggestionString substringFromIndex:[substring length]];
NSUInteger insertionPoint = [editingText selectedRange].location;
NSMutableString *currentStringPlusSuggestionString = [[editingText string] mutableCopy];
[currentStringPlusSuggestionString insertString:missingPart atIndex:insertionPoint];
[editingText setString:[stringWithSuggestionString copy]]; 
```

不幸的是，当我尝试在 2 个标记之间插入文本时，它会产生错误。这是错误，但我真的不明白为什么字符串越界。

```
[NSBigMutableString _getBlockStart:end:contentsEnd:forRange:stopAtLineSeparators:]: Range or index out of bounds'

0   CoreFoundation                      0x00007fff88835716 __exceptionPreprocess + 198
1   libobjc.A.dylib                     0x00007fff8adae470 objc_exception_throw + 43
2   CoreFoundation                      0x00007fff888354ec +[NSException raise:format:] + 204
3   Foundation                          0x00007fff8efd6627 -[NSString _getBlockStart:end:contentsEnd:forRange:stopAtLineSeparators:] + 157
4   AppKit                              0x00007fff8bd37c6f _NSFastFillAllLayoutHolesForGlyphRange + 285
5   AppKit                              0x00007fff8bd008fa -[NSLayoutManager textContainerForGlyphAtIndex:effectiveRange:] + 238
6   AppKit                              0x00007fff8bb4a18f -[NSTextView(NSSharing) didChangeText] + 194
7   AppKit                              0x00007fff8bbe00ee -[NSTokenFieldCell textView:willChangeSelectionFromCharacterRange:toCharacterRange:] + 776
8   AppKit                              0x00007fff8bd32795 -[NSControl textView:willChangeSelectionFromCharacterRange:toCharacterRange:] + 112
9   AppKit                              0x00007fff8bd30724 -[NSTextView(NSSharing) setSelectedRanges:affinity:stillSelecting:] + 1076
10  AppKit                              0x00007fff8bcf8438 -[NSLayoutManager textStorage:edited:range:changeInLength:invalidatedRange:] + 406
11  AppKit                              0x00007fff8bcf828a -[NSTextStorage _notifyEdited:range:changeInLength:invalidatedRange:] + 154
12  AppKit                              0x00007fff8bda0f75 -[NSTextStorage processEditing] + 202
13  AppKit                              0x00007fff8bc02c54 -[NSTextStorage endEditing] + 79
14  PopoverTokenField                   0x0000000100002f55 -[JSTokenField tokenField:completionsForSubstring:indexOfToken:indexOfSelectedItem:] + 1013 
```

或者，有没有人知道另一种让令牌字段在没有菜单的情况下完成字符串的方法？

# r - 删除冒号前的所有文本

> ID：12297859
> 
> 赞同：59
> 
> 时间：2012-09-06T10:17:50.597
> 
> 标签：r, unix, replace, sed, awk

我有一个包含一定数量行的文件。每行如下所示：

```
TF_list_to_test10004/Nus_k0.345_t0.1_e0.1.adj:PKMYT1 
```

我想删除“：”之前的所有字符，以便仅保留作为基因名称的 PKMYT1。由于我不是正则表达式脚本专家，任何人都可以帮助我使用 Unix（sed 或 awk）或在 R 中执行此操作吗？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-06T10:23:14.077

以下是在 R 中执行此操作的两种方法：

```
foo <- "TF_list_to_test10004/Nus_k0.345_t0.1_e0.1.adj:PKMYT1"

# Remove all before and up to ":":
gsub(".*:","",foo)

# Extract everything behind ":":
regmatches(foo,gregexpr("(?<=:).*",foo,perl=TRUE)) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-09-06T10:22:40.413

与 一起使用的简单正则表达式`gsub()`：

```
x <- "TF_list_to_test10004/Nus_k0.345_t0.1_e0.1.adj:PKMYT1"
gsub(".*:", "", x)
"PKMYT1" 
```

请参阅`?regex`或`?gsub`获取更多帮助。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-09-06T10:26:46.400

使用 sed：

```
sed 's/.*://' < your_input_file > output_file 
```

这将替换后跟冒号的任何内容，因此它将删除所有内容，包括每行最后一个冒号（[因为`*`默认情况下是贪婪的](http://sed.sourceforge.net/sedfaq5.html#s5.4)）。

根据 Josh O'Brien 的评论，如果您只想替换第一个冒号（包括第一个冒号），请执行以下操作：

```
sed "s/[^:]*://" 
```

这将匹配任何不是冒号的内容，后跟一个冒号，然后什么都不替换。

请注意，对于这两种模式，它们都会在每行的第一个匹配项上停止。如果您想对一行中的每个匹配项进行替换，请将[“ `g`”（全局）](http://www.grymoire.com/Unix/Sed.html#uh-6)选项添加到命令的末尾。

另请注意，在 linux（但不是 OSX）上，您可以使用以下命令就地编辑文件`-i`：

```
sed -i 's/.*://' your_file 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-09-06T11:59:59.813

R中肯定有两种以上的方式。这是另一种方式。

```
unlist(lapply(strsplit(foo, ':', fixed = TRUE), '[', 2)) 
```

如果字符串具有恒定长度，我想`substr`会比这个或正则表达式方法更快。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-09-06T10:31:50.777

你可以`awk`这样使用：

```
awk -F: '{print $2}' /your/file 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-08-13T07:49:15.553

使用包`str_remove`中的解决方案`stringr`：

```
str_remove("TF_list_to_test10004/Nus_k0.345_t0.1_e0.1.adj:PKMYT1", ".*:")
[1] "PKMYT1" 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-01-04T17:45:07.947

我从最佳响应@Sacha Epskamp 中错过的一些非常简单的举动是使用 sub 函数，在这种情况下，取“：”之前的所有内容（而不是删除它），所以它非常简单：

```
foo <- "TF_list_to_test10004/Nus_k0.345_t0.1_e0.1.adj:PKMYT1"

# 1st, as she did to remove all before and up to ":":
gsub(".*:","",foo)

# 2nd, to keep everything before and up to ":": 
gsub(":.*","",foo) 
```

基本上，同样的事情，只需更改子参数内的“：”位置。希望它会有所帮助。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-09-06T12:49:01.030

如果您有 GNU`coreutils`可用，请使用`cut`：

```
cut -d: -f2 infile 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-30T23:32:21.110

我正在研究类似的问题。John 和 Josh O'Brien 的建议起到了作用。我从这个小标题开始：

```
library(dplyr)
my_tibble <- tibble(Col1=c("ABC:Content","BCDE:MoreContent","FG:Conent:with:colons")) 
```

看起来像：

```
 | Col1 
1 | ABC:Content 
2 | BCDE:MoreContent 
3 | FG:Content:with:colons 
```

我需要创建这个小标题：

```
 | Col1                  | Col2 | Col3 
1 | ABC:Content           | ABC  | Content 
2 | BCDE:MoreContent      | BCDE | MoreContent 
3 | FG:Content:with:colons| FG   | Content:with:colons 
```

并使用此代码（R 版本 3.4.2）这样做。

```
my_tibble2 <- mutate(my_tibble
        ,Col2 = unlist(lapply(strsplit(Col1, ':',fixed = TRUE), '[', 1))
        ,Col3 = gsub("^[^:]*:", "", Col1)) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-10-09T17:59:48.320

以下是2个等效解决方案：

第一个使用 perl 的`-a`自动拆分功能将每一行拆分为使用`:`的字段，填充`F`字段数组，并打印第二个字段`$F[1]`（从字段 0 开始计数）

```
perl -F: -lane 'print $F[1]' file 
```

第二个使用正则表达式`s///`从`^`行首替换`.*:`任何以冒号结尾的字符，什么都没有

 ````
perl -pe 's/^.*://' file 
````

# email - spamassassin rdns reversedns

> ID：12297861
> 
> 赞同：6
> 
> 时间：2012-09-06T10:17:56.077
> 
> 标签：email, phpmailer, php, spamassassin, reverse-dns

Spamassasin 在我的电子邮件中给出以下标志：

*

> 0.8 RDNS_NONE 由没有 rDNS 的主机传送到内部网络
> 
> “此测试检查最后一个不受信任的中继是否有反向 DNS 条目。请注意，这可以通过解释相关 Received 标头中的信息来完成 - 如果第一个受信任的中继没有执行反向 DNS 检查，或者如果他们未记录在 Received 标头中，将触发此测试（无论实际 rDNS 状态如何）。”

*

我可以在电子邮件中看到的唯一 ip 是 94.143.11.2 -> 您可以将 dns 反向到 trophymanager.com。谷歌和 hotmail 对此没有任何问题 - 但 Spamassassin 给了它一个标志 - 我在这里错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-08T12:46:37.967

不确定 spamassassin，但许多邮件过滤器/MTA（例如后缀）只接受 rDNS 条目，如果它是[Forward-confirmed](http://en.wikipedia.org/wiki/Forward-confirmed_reverse_DNS)。在您的情况下，前向确认不起作用：

```
dig -x 94.143.11.2 +short
man01.trophymanager.com. 
```

但是 man01.trophymanager.com 没有 A 记录。

创建 DNS 记录：

```
man01.trophymanager.com A 94.143.11.2 
```

Spamassassin 可能不会再抱怨了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-29T01:43:14.313

如果您的主机帐户带有 IP 地址，您可以在主机帐户的仪表板中更改此地址，或者如果您不确定，请向您的主机开一张票。

[这解决了我在https://mxtoolbox.com](https://mxtoolbox.com)上的“SMTP 反向 DNS 不匹配”错误

但是，mxtoolbox.com 仍然抱怨“反向 DNS 不是有效的主机名”，他们的解释是：

> 您的反向 DNS 记录 (PTR) 不是有效的主机名。根据电子邮件发送最佳实践，PTR 记录应该是有效的主机名。如果 PTR 记录不是有效的主机名，您可能会遇到反垃圾邮件服务的电子邮件传递问题。

我查了我的注册商——Namecheap 说：

> PTR（指针）记录将 IP 地址映射到域名。它通常被称为“反向 DNS 条目”，因为它将 IP 地址转换为名称。
> 
> PTR 记录主要用作安全和反垃圾邮件措施，以验证是否允许邮件服务器地址向特定主机名发送电子邮件。反向 DNS 条目检查服务器名称是否确实与发起连接的 IP 地址相关联。
> 
> 为了设置将 IP 地址连接到您的域的反向 DNS 条目（例如，127.0.0.1 应该映射到 yourdomain.com），您需要**联系您的 IP 地址提供商**为该 IP 创建 PTR 记录地址。

有可能我只需要等待一天，因为当我用我的主机更新反向 DNS 时，有一条消息说“请等待 6-12 小时”。如果我记得，我会回来写一个更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-27T00:37:31.190

OP询问了这个问题，但其他答案没有解决这个问题：

```
-0.8 RDNS_NONE Delivered to internal network by a host with no rDNS 
```

这是由 127.0.0.1 的反向查找返回 localhost 引起的，通常是由于重定向邮件进出 localhost 以进行垃圾邮件/病毒过滤（如通过 amavis）。它将创建这样的标头，其中 rDNS 错误地显示为 127.0.0.1 的 localhost：

```
Received: from smtp.example.com (**localhost** [127.0.0.1])
    by smtp.example.com (Postfix) with ESMTPA id A5F13FEF
    for <example@example.com>; Wed, 26 May 2021 17:07:02 -0700 (PDT) 
```

请注意，我在上面的 **localhost** 周围添加了 * 以突出显示该问题。通过更新 /etc/hosts 文件并将您的主机名放在单词*之前*`localhost`，它将被正确放置在您的日志中：

所以你想要这个：

```
~]$ cat /etc/hosts
127.0.0.1   smtp.example.com localhost localhost.localdomain 
::1         smtp.example.com localhost localhost.localdomain 
```

不是这个：

```
~]$ cat /etc/hosts
127.0.0.1   localhost localhost.localdomain smtp.example.com
::1         localhost localhost.localdomain smtp.example.com 
```

绝对不是这个：

```
~]$ cat /etc/hosts
127.0.0.1   localhost localhost.localdomain
::1         localhost localhost.localdomain 
```

...或者您可以为 127.0.0.1 配置 rDNS，但这似乎很愚蠢...集中式 rDNS 服务器应该使用什么主机名？确实，它不能；）

# java - Small talk 方法名称和签名到 Java 方法名称和签名的转换

> ID：12297864
> 
> 赞同：1
> 
> 时间：2012-09-06T10:18:06.343
> 
> 标签：java, smalltalk

我基本上在一个遗留系统上工作，其中遗留代码是用 Smalltalk 语言编写的，并试图将 Smalltalk 中的一些方法转换为 Java 中的等效方法名称。这些是 Smalltalk 中一个名为`Grid`. 我不熟悉 Smalltalk 语法。Java 中对应的名称是什么？方法签名是什么样的？

1.  `at: cell put: data`
2.  `foreColor: color1 backColor: color2 cell: cell`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T13:44:34.633

Smalltalk 使用[内联参数](http://en.wikipedia.org/wiki/Smalltalk#Messages)- 类似于 Objective C。在 Java（以及从 Algol 派生的大多数其他语言）中，如果您使用超过 1 个参数，则这种样式是不可能的。因此，您必须使用约定将带有内联参数的 Smalltalk 消息转换为 Java 方法。

*   [Cocoa Java 绑定](https://stackoverflow.com/questions/2458839/bind-java-program-to-cocoa-interface)使用下划线连接消息名称，并按顺序附加参数`at_put(cell, data)`：`foreColor_backColor_cell(color1, color2, cell)`

*   您还可以使用[camel case](http://c2.com/cgi/wiki?CamelCase)的变体。但是，这*可能*会导致名称冲突（例如，如果有 Smalltalk 消息`atPut`，那么您不能缩短`at:put:`为`atPut`）

除了内联参数的转换之外，您还可能遇到 Smalltalk 代码使用保留关键字的问题。例如，`for`是 Smalltalk 中完全有效的消息，但不能命名 Java 方法`for`。如果您遇到这种情况，您必须采用转义策略——例如通过添加下划线使 Java 方法变为`for_`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-09T21:30:04.693

顺便说一句，这是错误的工作方式。如果您需要 java 输出，请让有经验的 smalltalker 从源代码为您生成它。Smalltalk 具有很好的反射能力，很容易生成 java 骨架。将 smalltalk 转换为遗留语言的更有趣的问题是块和执行：。

# php - 简单的php引用语法错误在echo中使用echo

> ID：12297866
> 
> 赞同：-3
> 
> 时间：2012-09-06T10:18:21.347
> 
> 标签：php, syntax-error, quotes, submenu

我在创建选定的 php 子菜单类时没有问题，但是当我尝试在子菜单中创建这个子菜单时：我无法让它工作。

**问题：**由于引号定义`echo`内部返回语法错误。`echo`

```
<ul class="sub_nav">
  <li <?php if ($page=='kurumsal-hakkimizda') {echo "class='selected'";} ?>>
    <a href="<?=BAZ_URL?>/tr/kurumsal-hakkimizda">Hakkımızda</a>
  </li>
  <li <?php if ($page=='kurumsal-ik') {echo "class='selected'";} ?>>
    <a href="<?=BAZ_URL?>/tr/kurumsal-ik">İnsan Kaynakları</a>
    <?php
      if ($page=='kurumsal-ik')
      { echo '
        <ul id="sub_sub_nav">

           <!-- !! PROBLEM STARTS HERE !! -->
           <li class="'if($page=='kurumsal-ik'){echo 'selected'}'">
           <!-- !! CANT USE ECHO INSIDE ECHO BEACUSE OF QUOTES !! -->

            <a href="'.BAZ_URL.'/tr/kurumsal-ik">İnsan Kaynakları Politikamız</a>
           </li>

           <li class="'if($page=='kurumsal-hedef'){echo 'selected'}'">
            <a href="'.BAZ_URL.'/tr/kurumsal-hedef">Kurumsal Hedef</a>
           </li>
        </ul>
     ';}
    ?>
  </li>
  <li <?php if ($page=='kurumsal-haberler') {echo "class='selected'";} ?>>
    <a href="<?=BAZ_URL?>/tr/kurumsal-haberler">Kurumsal Haberler</a>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:20:51.850

已经在里面了`echo`吧？所以这样做：

```
<li class="', ($page=='kurumsal-ik') ? 'selected' : '', '"> 
```

它肯定有效。它被称为[三元运算符](http://davidwalsh.name/php-shorthand-if-else-ternary-operators)！:)

***注意：**这里不能使用点连接运算符，因为三元运算符充当返回值的函数。只能使用逗号* `,` *。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:21:50.173

您可以只制作变量并在最后回显它：

```
<?php
  if ($page=='kurumsal-ik')
  { 
        $myVar= '
    <ul id="sub_sub_nav">
       <li class="';
    if($page=='kurumsal-ik')
    {
        $myVar .= 'selected';
    }
    $myVar.='">
        <a href="'.BAZ_URL.'/tr/kurumsal-ik">İnsan Kaynakları Politikamız</a>
       </li>

       <li class="';
    if($page=='kurumsal-hedef')
    {
        $myVar.= 'selected';
    }
    $myVar.='">
        <a href="'.BAZ_URL.'/tr/kurumsal-hedef">Kurumsal Hedef</a>
       </li>
    </ul>
    ';
    echo $myVar;
   }
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:27:36.637

正如 Praveen 所说，它已经在一个回声中，所以没有必要使用另一个。我相信echo 中[三元运算符](http://davidwalsh.name/php-shorthand-if-else-ternary-operators)的语法是：

```
<?php echo '<li class="' . ( $page == 'page_name' ? 'selected' : '' ) . '"><a href="/">Link</a></li>'; ?> 
```

希望有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:44:33.090

PHP 的一个有用特性是它直接输出`<?php`and`?>`标记之外的所有内容，因此您不需要长的 echo 语句。

[这在与控制结构的替代语法](http://www.php.net/manual/en/control-structures.alternative-syntax.php)结合使用时特别实用

您的代码将更具可读性，如下所示：

```
<?php if($page=='kurumsal-ik'): ?>
    <ul id="sub_sub_nav">

    <li class="<?php if($page=='kurumsal-ik') echo 'selected';?>">
        <a href="<?php echo BAZ_URL; ?>/tr/kurumsal-ik">İnsan Kaynakları Politikamız</a>
    </li>

    <li class="<?php if($page=='kurumsal-hedef') echo 'selected';?>">
        <a href="<?php echo BAZ_URL; ?>/tr/kurumsal-hedef">Kurumsal Hedef</a>
    </li>

    </ul>
<?php endif; ?> 
```

PS 你可以使用简写来缩短你的代码`<?=`，这意味着`<?php echo`。

# c# - 如何在动态 html 表中的 requirefield 验证器中显示动态。

> ID：12297868
> 
> 赞同：2
> 
> 时间：2012-09-06T10:18:26.673
> 
> 标签：c#, asp.net, htmlcontrols

以下代码显示错误..

```
req.Display = "dynamic"; 
cell.Controls.Add(req); 
```

它显示了错误。如何显示动态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:00:52.477

您必须使用验证器可用的枚举。

```
req.Display=ValidatorDisplay.Dynamic; 
```

认为这会对您有所帮助。

# c# - C# 中的双向 KeyValuePair 集合

> ID：12297870
> 
> 赞同：4
> 
> 时间：2012-09-06T10:18:28.337
> 
> 标签：c#, linq, collections, dictionary, key-value

通过创建`Dictionary<int,int>`or`List<KeyValuePair<int,int>>`我可以创建相关 id 的列表。

通过调用`collection[key]`，我可以返回针对它存储的相应值。

**我还希望能够通过传入一个值来返回密钥**——[我知道这可以使用一些 LINQ](https://stackoverflow.com/questions/2444033/get-dictionary-key-by-value)，但它似乎效率不高。

**在我的情况下，每个键都是唯一的，每个值也是**. 这个事实是否可以使用另一种提供更好性能的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:20:33.580

听起来您需要一个双向字典。没有支持这一点的框架类，但您可以实现自己的：

[C#中的双向1对1字典](https://stackoverflow.com/questions/268321/bidirectional-1-to-1-dictionary-in-c-sharp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:01:54.943

您可以封装两个字典，一个用您的“键”存储您的值，另一个用您的“值”键控存储您的键。

然后通过几种方法管理对它们的访问。快速和增加的内存开销不应该有很大的不同。

编辑：刚刚注意到这与之前的答案基本相同：-/

# teamcity - 使用 Google Talk 获取 TeamCity 通知

> ID：12297871
> 
> 赞同：1
> 
> 时间：2012-09-06T10:18:28.543
> 
> 标签：teamcity, teamcity-7.0, google-talk

我正在构建机器上设置 TeamCity 7.0.3。除了使用 Jabber 通知程序的 Google Talk 通知外，一切正常。当我发送测试通知时，它工作正常。但是当构建完成/失败时，我没有收到任何通知。通知在使用系统托盘通知程序的机器上本地工作。我已经注册了所有项目和所有活动，但仍然没有通过。我使用相同的 gmail 帐户发送消息和接收消息，这可能有点奇怪，但测试消息有效。我猜这可能是防火墙问题，但测试消息再次起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T22:22:45.570

我在 TeamCity 7.1 中使用以下设置来设置 Jabber：

[http://i48.tinypic.com/9ay0xz.png](http://i48.tinypic.com/9ay0xz.png)

显然，将 my_user@gmail.com 替换为应该发送通知的 Google Talk 用户。**请注意，在使用 Google Talk 时，您无法向自己发送消息，因此对于想要接收通知的任何用户，服务器用户必须不同于 Jabber 帐户。**

现在，您需要为您的用户配置通知规则。单击右上角的您的姓名，然后在“我的设置和工具”中单击“已观看的构建和通知”下的 Jabber 通知程序旁边的“编辑”。此页面如下所示：

[http://i47.tinypic.com/xpq3y9.png](http://i47.tinypic.com/xpq3y9.png)

请注意，“Jabber 帐户”必须与上面的“服务器用户”不同（否则您将不会收到通知；这是我第一次设置时犯的第一个错误）。另请注意，您必须通过单击“添加新规则”为希望 Jabber 通知的每个构建或构建组设置规则。Jabber Notifier 不会继承您的 Email Notifier 规则（这是我第一次设置时犯的另一个错误）。

# c# - PHP 中的意外行为 - 相同的代码在 C# 和 Python 中给出正确的结果

> ID：12297872
> 
> 赞同：16
> 
> 时间：2012-09-06T10:18:36.933
> 
> 标签：c#, php, python, math

为什么 PHP 会为以下代码返回 INF（无穷大）：

```
<?php
$n = 1234;
$m = 0;

while ($n > 0)
{
    $m = ($m * 10) + ($n % 10);
    $n = $n / 10;
}

var_dump($m);
?> 
```

预期的结果是**4321**，但是 PHP 返回了**INF**，浮点类型：

```
float INF 
```

我用 Python 和 C# 编写了相同的代码并得到了预期的输出 - **4321**

*Python*

```
n = 1234
m = 0

while (n > 0):
    m = (m * 10) + (n % 10)
    n = n / 10

print m 
```

*C＃*

```
static void Main(string[] args)
{
    int n = 1234;
    int m = 0;

    while (n > 0)
    {
        m = (m * 10) + (n % 10);
        n = n / 10;
    }

    Console.WriteLine(m);
    Console.ReadLine();
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T10:25:22.910

在 php`$n / 10`中将返回一个浮点数，而不是整数。

`$n > 0`将永远如此`true`。

改变`while($n > 0)`

到`while($n > 1)`or `while((int)$n > 0)`，那么你会得到正确的结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T10:23:58.523

PHP 是无类型的，可以“即时”转换。

这意味着，您 $n 永远不会是“0”或更低，因为 $n 在需要时将是一个“浮点数”。

尝试检查 < 1，你应该没问题。

为了澄清这一点，$n 的行为如下：

$n = 1234 $n = 123.4 $n = 12.34 $n = 1.234 $n = 0.1234 $n = 0.01234 等等。

含义： $n 将始终接近 0，但永远不会达到它。这使得 $m 无限，因为循环本身是无限的。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-06T10:23:53.510

正在发生的事情是：

```
$n = $n / 10; 
```

正在执行浮点除法而不是整数除法，因此 $n 永远不会达到 0 的值，它只是接近 0 的值，即 0.0...1234。

把上面的代码改成这样：

```
$n = (int)($n / 10); 
```

将解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-06T10:36:21.923

正确的算法使用 floor()

```
<?php
$n = 1234;
$m = 0;

while ($n > 0)
{
    $m = $m * 10 + ($n % 10);
    $n = floor($n / 10);
}

var_dump($m); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T10:23:38.057

由于典型的浮点运算，这更有可能。

如果您使用 BCMath 任意精度数学，则不会产生相同的效果。

```
$n = 1234;
$m = 0;

while ($n > 0)
{
    $m = bcmul($m, 10) + bcmod($n, 10);
    $n = bcdiv($n, 10);
}

var_dump($m); 
```

[http://codepad.viper-7.com/FYNCyN](http://codepad.viper-7.com/FYNCyN)

也可以看看：

[http://php.net/manual/en/language.types.float.php](http://php.net/manual/en/language.types.float.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T10:27:15.127

```
$n = intval($n / 10); 
```

这似乎解决了问题。

# ios - 通知用户应用程序更新

> ID：12297878
> 
> 赞同：0
> 
> 时间：2012-09-06T10:19:13.873
> 
> 标签：ios, app-store

我在 App Store 中更新了一个应用程序。问题是应用商店没有通知我更新。该应用程序的先前版本已安装在我的 iPad 中，我希望会显示有关更新的通知。我最终手动搜索应用程序来更新它。

我的问题是，为什么它不给我通知？我假设应用商店会自动发送有关更新的通知，但在我们的例子中并没有发生。

上传应用程序时是否忘记设置某些内容？或者我应该在编码时手动设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:33:00.367

您可以获取应用程序信息，例如[http://itunes.apple.com/lookup?id=422876559](http://itunes.apple.com/lookup?id=422876559)并检查版本

然后做本地通知[http://www.developers-life.com/local-notification-sample-code-os-4-0-only.html](http://www.developers-life.com/local-notification-sample-code-os-4-0-only.html)

# ios - 如何在 iPhone 应用程序中访问相机（捕获图像并显示图库）

> ID：12297883
> 
> 赞同：-2
> 
> 时间：2012-09-06T10:19:39.523
> 
> 标签：ios, camera

我想知道他们的 iOS 相机 api 的资源如何不足。

```
I want to use camera api in me iphone app .

I have  2 basic requeirment .

 1\. want to capture image .
 2\. want to see that capture image into gallery. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:28:36.167

有很多资源，您最好在发布此类问题之前搜索一下。

看看[iOS 的相机编程主题](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Introduction/Introduction.html)

# java - 线程“timer-0”中的异常 java.lang.NoClassDefFoundError

> ID：12297884
> 
> 赞同：1
> 
> 时间：2012-09-06T10:19:41.380
> 
> 标签：java, noclassdeffounderror

![在此处输入图像描述](../Images/f0554c0aadef71aa42d0aa544bb9858b.png)我需要一些关于这个的建议......我有一个程序可以作为另一个系统的实用程序。我的程序的功能是监视数据库并找到具有特定值的某些条目；当主系统遇到无法进一步处理条目的特定条件时，将产生此值。找到特定值后，我的程序将验证处理它所需的需求是否可用，并调用系统停止处理它的方法，以便它可以完成输入。

我的程序每次尝试调用主系统的方法时都会遇到错误。命令提示符显示此错误“线程中的异常”timer-0“java.lang.NoClassDefFoundError”

请记住，主程序一直在运行。每次条目完成时，它都会获得另一个条目。因此，我的程序可能正在调用主系统当前正在使用的方法。

我不确定错误是否是由于我的程序造成的，没有找到 NoClassDefFoundError 所需的方法，或者我的程序是否试图根据线程中的异常“计时器”调用主程序当前正在使用的方法-0”。

主程序和我的程序也没有使用任何线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:27:39.053

A`NoClassDefFoundError`表示您的程序正在尝试加载不在其类路径上的类（或者严格来说，类加载器无法解析）。

如果这*永远*不起作用，则可能只是您在启动它时没有在类路径中包含所需的库。

或者，当远程应用程序的内部类被传递回调用者并且无法实例化时，我之前已经在它们之间进行通信的 Java 应用程序中看到了这一点。例如，远程应用程序可能正在使用一些 JDBC/ORM 框架，该框架会抛出`SQLException`. 此异常通过远程调用冒泡并返回到无法实例化特定子类的本地应用程序。在后一种情况下，请查看远程应用程序上的日志，看看您是否可以发现那里发生的问题。

无论如何，您应该能够通过向您的类路径添加*一些*类/JAR 来解决此问题；确切地确定哪一个可能只是一个挑战。“厨房水槽”方法可能会帮助您解决这个特定问题并了解潜在问题（如果有的话）是什么。

# php - mod_rewrite - 添加中间层目录

> ID：12297889
> 
> 赞同：1
> 
> 时间：2012-09-06T10:19:54.713
> 
> 标签：php, .htaccess, mod-rewrite, expressionengine

页面目前可在以下地址获得：

```
http://www.domain.co.uk/solutions/article/page-name1
http://www.domain.co.uk/solutions/article/page-name2
http://www.domain.co.uk/solutions/article/page-name3
etc 
```

..但我希望它们可以通过以下地址访问，以增强 SEO：

```
http://www.domain.co.uk/solutions/page-name1
http://www.domain.co.uk/solutions/page-name2
http://www.domain.co.uk/solutions/page-name3 
```

所以，我想我想在站点根目录的 .htaccess 文件中使用 mod_rewrite 在每个传入页面请求的解决方案目录之后添加“文章”目录。大约一个月以来，我一直在寻找合适的答案，并且尝试学习 mod_rewrite 基础教程，但我无法为我完成这项工作，因此对另一个 mod_rewrite 问题表示歉意。

这是我目前的 .htaccess 文件：

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    # Removes index.php
    RewriteCond $1 !\.(gif|jpe?g|png)$ [NC]
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php/$1 [L]

    # If 404s, "No Input File" or every URL returns the same thing
    # make it /index.php?/$1 above (add the question mark)      
</IfModule> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:02:49.073

我正在我的网站上做类似的事情。这是我用来删除 index.php 并显示缩短的 url 的 .htaccess 规则：

```
RewriteEngine On

# Removes index.php
RewriteCond $1 !\.(css|js|gif|jpe?g|png|ico) [NC]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php/$1

RewriteCond %{REQUEST_URI} ^/solutions/(.*) [NC]
RewriteRule ^(.*) /solutions/article/%1 [L] 
```

请记住，您在浏览器地址栏中看到的 URL 不是 ExpressionEngine 看到的 URL - EE 将 {segment_2} 视为“文章”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:23:46.083

**编辑 ：**

尝试这个 ：

```
<IfModule mod_rewrite.c>
RewriteEngine On 

RewriteCond %{REQUEST_URI} !^solutions/article/ 
RewriteRule ^solutions/(.*)$ /solutions/article/$1 [L,QSA] 

RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteCond %{REQUEST_FILENAME} !\.(gif|jpe?g|png)$ [NC] 
RewriteRule ^(.*)$ /index.php/$1 [L]
</IfModule> 
```

# perl - 如何从另一个传递参数运行 perl 脚本？

> ID：12297890
> 
> 赞同：-1
> 
> 时间：2012-09-06T10:20:03.737
> 
> 标签：perl, parameters

**如何从另一个传递参数运行 perl 脚本？**

我正在尝试使用在互联网帖子中找到的解决方案，但我再也找不到了。
它是这样的：

```
do 'script.cgi param1 param2'; 
```

在另一个脚本中，我只是使用 shift 来获取这些参数：

```
#Parameters
my $param1= shift;
my $param2= shift; 
```

我看到人们使用带有 args 的系统，但它真的更好吗？
如果没有，我如何使用“do EXPR”修复解决方案？
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T11:03:44.640

哦，好吧，我解决了：

```
{local @ARGV = (@my_args); do $script;} 
```

有用。如果有人有更好的建议，请随时告诉我。
同时我正在使用这个解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:40:33.603

实际上，我可以想到两种更好的方法：

```
system($script, @my_args); 
```

和

```
my $cmd = $script . ' ' . join(' ', @my_args);
my $return = `$cmd`; 
```

两种解决方案都将参数传递给`@my_args`. 该`system()`调用返回执行程序的退出代码，而反引号解决方案 (``) 返回输出以供以后解析。

# python - Tkinter：通过多处理启动进程会创建不需要的新窗口

> ID：12297892
> 
> 赞同：4
> 
> 时间：2012-09-06T10:20:07.657
> 
> 标签：python, matplotlib, tkinter, multiprocessing

我打算围绕数值模拟编写一个小型 GUI，这就是我现在使用 Tkinter 的原因。模拟应该在单独的过程中从 GUI 启动。为了稍微玩一下，我定义了一个函数 random_process 来生成一对 randn 数（这应该稍后是一个真正的模拟过程）。由于该函数打算在单独的进程中启动，因此将两个 mp.Event 对象和一个 mp.Pipe 对象作为参数传递。主应用程序可以使用一个事件向进程请求累积数据，另一个事件用作“毒丸”杀死“模拟”进程。然后使用管道传递数据。在主应用程序中，我使用 Tkinter 的后功能定期检查是否有新数据到达，然后绘制它。启动和停止“模拟过程”

至少这是想法，在实践中该程序并不能很好地发挥作用。当我点击“开始！” 用于启动模拟过程的按钮，将出现第二个 Tkinter 窗口，与主窗口相同。我一点也不知道为什么会这样。与进程的通信也不起作用，似乎没有发送数据。在谷歌搜索解决方案时，我发现了一个 Tkinter 程序启动进程并与它们交谈的工作示例，但我没有发现是什么导致它在我的情况下不起作用。有人有线索吗？

顺便说一句，操作系统是 Windows-7。

干杯，简

```
import matplotlib
matplotlib.use('TkAgg')
import time
import multiprocessing as mp
import Tkinter as Tk
import numpy.random as npr
import matplotlib.figure
import matplotlib.backends.backend_tkagg as tkagg

def random_process(delay, data_request, data_in, poison):
    while not poison.is_set():
        time.sleep(delay)
        print("Generating pair of random numbers...")
        x,y = npr.randn(), npr.randn()
        try:
            random_process.l.append((x,y))
        except:
            random_process.l = [(x,y)]
        if data_request.is_set():
            data_request.clear()
            try:
                ll = len(random_process.l)
                if ll > 0:
                    print("Sending %d pairs to main program.." % ll)
                    data_in.send(random_process.l)
                random_process.l = []
            except:
                print("data requested, but none there.")
    # when poison event is set, clear it:
    poison.clear()

class GuiInterfaceApp:
    def __init__(self, parent):
        self.myParent = parent

        self.previewplot_container = Tk.Frame(self.myParent)
        self.f = matplotlib.figure.Figure()
        self.ax = self.f.add_subplot(111)
        self.preview_canvas = tkagg.FigureCanvasTkAgg(self.f, master=self.previewplot_container)
        self.preview_canvas.show()

        self.button_container = Tk.Frame(self.myParent)
        self.hellobutton = Tk.Button(self.button_container, text="hello!")
        self.hellobutton.config(command = self.printhello)
        self.startbutton = Tk.Button(self.button_container, text="go!")
        self.startbutton.config(command=self.run_simulation)
        self.plotbutton = Tk.Button(self.button_container, text="show!")
        self.plotbutton.config(command=self.request_data)
        self.stopbutton = Tk.Button(self.button_container, text="stop.")
        self.stopbutton.config(command=self.stop_simulation)
        self.quitbutton = Tk.Button(self.button_container, text="get me outta here!")
        self.quitbutton.config(command=self.quit_program)

        self.previewplot_container.pack(side = Tk.TOP)
        self.preview_canvas.get_tk_widget().pack(side=Tk.TOP, fill=Tk.BOTH, expand=1)
        self.button_container.pack(side = Tk.BOTTOM)
        self.hellobutton.pack(side = Tk.LEFT)
        self.startbutton.pack(side = Tk.LEFT)
        self.plotbutton.pack(side = Tk.LEFT)
        self.stopbutton.pack(side = Tk.LEFT)
        self.quitbutton.pack(side = Tk.LEFT)

        self.simulation_running = False

        self.datarequest = mp.Event()
        self.DataIn, self.DataOut = mp.Pipe()
        self.PoisonEvent = mp.Event()
        self.p = mp.Process(target = random_process, args=(1.0, self.datarequest,     self.DataIn, self.PoisonEvent))

        self.l = [] # list of received pairs to plot

        self.mytask_time = 100 # delay in ms between calls to self.mytask

    def printhello(self):
        print("hello!")

    def run_simulation(self):
        print("startbutton pressed.")
        if not self.simulation_running:
            print("starting simulation...")
            self.p.start()
            self.simulation_running = True  # attention: no error checking

    def stop_simulation(self):
        print("stop button pressed.")
        if self.simulation_running:
            print("Sending poison pill to simulation process..")
            self.PoisonEvent.set()
            self.simulation_running = False
            # todo: wait a short amount of time and check if simu stopped.

    def request_data(self):
        print("plotbutton pressed.")
        if self.simulation_running:
            print("requesting data from simulation process")
            self.datarequest.set()

    def update_plot(self):
        print("update_plot called.")
        if len(self.l) > 0:
            print("there is data to plot.")
            while len(self.l) > 0:
                x,y = self.l.pop()
                print("plotting point (%.2f, %.2f)" % (x,y))
                self.ax.plot([x], [y], '.', color='blue')
            print("drawing the hole thing..")
            self.ax.draw()
        else:
            print("nothing to draw")

    def quit_program(self):
        print("quitbutton pressed.")
        if self.simulation_running:
            print("sending poison pill to simulation process..")
            self.PoisonEvent.set()
        print("quitting mainloop..")
        self.myParent.quit()
        print("destroying root window..")
        self.myParent.destroy()

    def receive_data(self):
        if self.DataOut.poll():
            print("receiving data..")
            data =  self.DataOut.recv()
            self.l.append(data)
            self.update_plot()

    def my_tasks(self):
        self.receive_data()
        self.myParent.after(self.mytask_time, self.my_tasks)
        return

root = Tk.Tk()
myGuiInterfaceApp = GuiInterfaceApp(root)
root.after(100, myGuiInterfaceApp.my_tasks)
root.mainloop() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T12:42:55.990

尝试将您的主要逻辑隐藏在代码是否正在运行或导入的测试中。

```
if __name__ == "__main__":
    root = Tk.Tk()
    ... 
```

# c# - c#如何获取鼠标移动方向？

> ID：12297893
> 
> 赞同：2
> 
> 时间：2012-09-06T10:20:09.423
> 
> 标签：c#, mouseevent

即使鼠标不在屏幕上移动，是否可以获得鼠标移动方向？例如，它与边缘碰撞。

编辑：用户将鼠标移动到顶部并与屏幕的顶部边缘碰撞。然后他继续向上移动鼠标。所以鼠标在现实世界中移动但不在屏幕上移动，因为它不能。我想得到一个信号或其他任何东西来告诉我鼠标在 atm 的哪个方向上移动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:29:20.567

正如我所看到的，基本上您要问的是如何检测鼠标位于屏幕边缘并试图向边缘方向移动的情况。自然，`MouseMove`事件不会检测到这一点，因为坐标没有改变。

即使光标没有改变位置，使用全局低级鼠标钩子可能是获取鼠标移动消息的唯一方法。

这允许检查自上一条消息以来坐标是否已更改。如果没有，我们可能处于屏幕边缘。

```
public partial class Form1 : Form
{
    private const int WH_MOUSE_LL = 14;
    private const int WM_MOUSEMOVE = 0x200;

    [DllImport("kernel32.dll")]
    static extern IntPtr GetModuleHandle(string moduleName);

    [DllImport("user32.dll")]
    static extern IntPtr SetWindowsHookEx(int idHook, HookProc lpfn, IntPtr hMod, uint dwThreadId);

    [DllImport("user32.dll")]
    public static extern int UnhookWindowsHookEx(IntPtr hhook);

    [DllImport("user32.dll")]
    static extern IntPtr CallNextHookEx(IntPtr hhk, int nCode, uint wParam, IntPtr lParam);
    delegate IntPtr HookProc(int nCode, uint wParam, IntPtr lParam);

    [StructLayout(LayoutKind.Sequential)]
    public struct MSLLHOOKSTRUCT
    {
        public POINT pt;
        public int mouseData; // be careful, this must be ints, not uints (was wrong before I changed it...). regards, cmew.
        public int flags;
        public int time;
        public UIntPtr dwExtraInfo;
    }

    [StructLayout(LayoutKind.Sequential)]
    public struct POINT
    {
        public int X;
        public int Y;
    }

    private HookProc hookProc;
    private IntPtr hook;

    private POINT formerPoint = new POINT() { X = 0, Y = 0 };

    public Form1() { InitializeComponent(); }

    IntPtr LowLevelMouseProc(int nCode, uint wParam, IntPtr lParam)
    {
        if (wParam == WM_MOUSEMOVE)
        {
            MSLLHOOKSTRUCT infoStr = (MSLLHOOKSTRUCT)Marshal.PtrToStructure(lParam, typeof(MSLLHOOKSTRUCT));
            if (infoStr.pt.X == formerPoint.X && infoStr.pt.Y == formerPoint.Y)
            {
                Console.WriteLine("Mouse moved without coordinates changing");
                //use the standard way of finding the direction of travel here.
            }
            formerPoint = infoStr.pt;
        }
        return CallNextHookEx(IntPtr.Zero, nCode, wParam, lParam);
    }

    protected override void OnHandleDestroyed(EventArgs e)
    {
        UnhookWindowsHookEx(hook);
        base.OnHandleDestroyed(e);
    }

    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
        if (!DesignMode)
        {
            hookProc = new HookProc(LowLevelMouseProc);
            hook = SetWindowsHookEx(WH_MOUSE_LL, hookProc, GetModuleHandle(null), 0);
        } 
    }
} 
```

*钩子代码取自[这个](http://blog.bee-eee.com/2008/01/04/c-capture-the-mouse-get-a-global-hook-on-the-mouse/)博客

这种方法的问题在于，如果鼠标的移动速度低于每条鼠标消息 1 个像素，则会产生误报。

对此可能的部分解决方案是预先检测屏幕边缘的 X 和 Y 值并对其进行测试，但即使这样也不会消除 100% 的误报，因为鼠标可能会（对于例如）在屏幕的**右**边缘并非常缓慢地向**左**移动（小于 1 个像素），这仍然会被检测为正值。

也许有人对如何消除这些误报有更好的想法。

# git - 在 XCode 4 中使用 git 而不是 SnapShots

> ID：12297898
> 
> 赞同：1
> 
> 时间：2012-09-06T10:20:20.017
> 
> 标签：git, xcode4

我建立了一个本地 git 存储库，以便比快照更有条理。本地，我的意思是在 XCode 运行的同一主机上。

目前我也在使用快照。

就 git 而言，提交过程很好，我可以看到更改很好，但我不知道如何从 XCode4 中取回旧版本。

我要问的是，具体来说。

如果您的 git 与正在运行的 XCode 版本位于同一本地主机上，您如何使用 git 存储库从 XCode 中恢复到程序的早期版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:39:38.273

我自己的问题（感谢 Fkz）的答案是，在 XCode4 中，您似乎实际上无法撤回以前的提交。总之，Xcode 允许您提交更改但不能恢复，但是您可以使用文件菜单条目恢复到上次保存的版本。

我认为这就是 git 可以让我在 XCode4 中做的事情。

显然我必须使用标准 git 命令从 XCode4 外部恢复旧提交。

这个帖子很有帮助

[Xcode 4 git 集成](https://stackoverflow.com/questions/5302367/xcode-4-git-integration)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:39:59.250

您能否更具体地提出您的问题，检查[一下](https://stackoverflow.com/questions/4114095/git-revert-to-previous-commit-how) ？旧版本是指恢复到较旧的提交，还是只想恢复上次提交后所做的本地更改，或者只是重置检查[这个](https://stackoverflow.com/questions/1146973/how-to-revert-all-local-changes-in-a-git-managed-project-to-previous-state)？

# plsql - Oracle ApEx 集合信息未出现在 PL/SQL 区域中

> ID：12297904
> 
> 赞同：1
> 
> 时间：2012-09-06T10:21:03.077
> 
> 标签：plsql, oracle-apex

我在使用 Oracle ApEx 集合时遇到问题，不确定为什么我没有看到我认为我会看到的结果。

首先，我使用的是 Oracle ApEx v3.0

我基本上有以下设置，如本示例中所述，关于保留 Joel Kallman 的复选框，即：

[http://joelkallman.blogspot.com.au/2008_03_01_archive.html](http://joelkallman.blogspot.com.au/2008_03_01_archive.html)

描述我的场景，我向用户发送记录列表，通过他们选择任意数量的复选框，使用 Joel 的示例，选择的记录存储在顶点集合“EMP_COLLECTION”中。

现在所有这些似乎都正确存储在“EMP_COLLECTION”中，但是当我尝试从集合中访问这些存储的值时，在作为 jQuery UI 对话框的 PL/SQL 区域内，我似乎无法获得这些值。

现在该页面尚未提交。因此，当用户选择多个复选框，这些复选框被存储在后端的 ajax 到“EMP_COLLECTION”中时，用户然后按下一个按钮，该按钮调用一个基本上执行调用的 javascript 函数，`.dialog('open')`一切正常。

然后调用我的 PL/SQL 区域块，在其中`Region Header`，我定义了以下内容：

```
<div id="dialog-1up-br" title="Requests - No Email Address"><img src="#WORKSPACE_IMAGES#info.gif" height="30" width="30"/>
  Please Note: You are receiving this notification as a valid email address is not available for: <br/><br/> 
```

我的这个 PL/SQL 区域块的区域来源是：

```
BEGIN
  htp.p('<ul>');
  FOR i_rec IN ( SELECT a.c001 staff_id
                 FROM   apex_collections a
                 WHERE  a.collection_name = 'EMP_COLLECTION') LOOP
    htp.p('<li>'||i_rec.staff_id ||'</li>');
  END LOOP;
  htp.p('</ul>');
END; 
```

所以基于上面的这个信息，当我的 jQuery UI 对话框基于这个 PL/SQL 区域出现时，我的区域标题信息显示正确，但下面没有任何内容，基于我的区域源 PL/SQL？

是因为我没有实际提交我的页面，因为我可以在会话变量中看到我的集合并且它具有正确的信息吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:51:27.693

如果 PL/SQL 区域是当前页面的一部分，则在页面加载时呈现其内容。当您使用 Javascript “显示”它时，它不会刷新，它仍然显示它最初显示的内容。

如果您使用报表区域而不是 PL/SQL 区域，则可以从 Javascript 动态刷新它。您只需要一个构建列表而不是表格的特殊报告模板。

由于您使用的是 APEX 3.0，因此刷新报告区域可能不是那么简单（我记不清了）。在这种情况下，也许您可​​以在按需流程中构建该区域的整个 HTML 并将其返回，然后您的 Javascript 可以调用按需流程并使用该流程返回的 HTML 填充 (HTML) 区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T16:00:25.270

再次感谢托尼和汤姆的帮助。

正如建议的那样，我基本上执行了这里概述的内容：

> *由于您使用的是 APEX 3.0，因此刷新报告区域可能不是那么简单（我记不清了）。在这种情况下，也许您可​​以在按需流程中构建该区域的整个 HTML 并将其返回，然后您的 Javascript 可以调用按需流程并使用该流程返回的 HTML 填充 (HTML) 区域。*

基本上，我使用了一个按需流程来获取所需的结果集，我从一个 JavaScript 函数调用它，从我页面上的“提交”按钮触发。现在使用一个 HTML 区域，我已经在其中设置了我的区域页眉和区域页脚，我只需使用`$('#div-id').html(gReturn)`我的按需流程将我的结果集返回到我的对话框中。

一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T16:40:28.330

我也凑合吧。:-)
老实说，唯一出错的是你的 iframe 的渲染点。你可以做几件事：

*   在渲染时创建 iframe，但不要设置其来源。单击按钮时，设置源，然后`.dialog`
*   不要在渲染时创建 iframe。调用按钮时，创建 iframe `$("div#container").html("<iframe src='...'></iframe>")`，然后`.dialog`
*   还可以选择简单地重新加载 iframe 源，请参阅 [Reload an iframe with jQuery](https://stackoverflow.com/questions/4249809/reload-an-iframe-with-jquery)

那也应该解决它而没有太多麻烦。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-05T18:12:35.447

另外，请确保集合名称是大写的，同时创建和查询它。（面临类似的问题并已解决）

# asp.net - 视图模型上的类型更改后剃刀视图上的 MissingMethodException

> ID：12297909
> 
> 赞同：2
> 
> 时间：2012-09-06T10:21:36.383
> 
> 标签：asp.net, html, asp.net-mvc-3, exception, razor

我的 MVC3 Razor 视图中有一个 EditorFor HTML 助手，如下所示：

```
@Html.EditorFor(x => x.RouteOfReferral,
                MVC.Shared.Views.EditorTemplates.TabValidationMessage, 
                new { 
                      ValidationPropertyName = ogt.PropertyName(
                         x => x.RouteOfReferral) 
                    }
               ) 
```

在实体上，我将属性的类型从一种引用数据类型更改为另一种，更新了视图模型以反映这一点，运行了所有测试并全部通过。

但是，当我通过 UI 访问该页面时，我得到了这个异常：

```
System.MissingMethodException
Method not found:'MyProject.Entities.ReferenceData.Entity.RouteOfReferral 
MyProject.Entities.ReferenceData.Entity.get_RouteOfReferral()'. 
```

奇怪的是，我注释掉了 HTML 助手，刷新了页面，它照常打开。然后我取消了 HTML 帮助程序的注释，页面再次像往常一样打开，从那时起就很好了。

问题是，现在我已经部署到集成测试平台了，同样的问题也出现了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-02-22T10:58:52.137

我很惊讶这在 4 年内没有得到答案。我自己也遇到了同样的问题，这是谷歌上的最佳答案。

幸运的是，我有答案 - 清除您的临时 ASP.net 文件。

您可以使用这个单行 powershell：

```
Get-ChildItem “C:\Windows\Microsoft.NET\Framework*\v*\Temporary ASP.NET Files” -Recurse | Remove-Item -Recurse 
```

或[此处](https://stackoverflow.com/questions/16137457/asp-net-temporary-files-cleanup)详述的任何方法。

请记住，在具有 64 位应用程序的 64 位系统上，临时文件将位于`C:\WINDOWS\Microsoft.NET\Framework64\...`文件夹中，而不是`C:\WINDOWS\Microsoft.NET\Framework\...`文件夹中。

# java - Hibernate：如何对 HBM 文件中的复合键进行关联映射

> ID：12297910
> 
> 赞同：2
> 
> 时间：2012-09-06T10:21:38.923
> 
> 标签：java, hibernate, jakarta-ee, hibernate-mapping

**问题**：有两个名为**specialday**和**rule**的表。在规则表中，一个名为 specialrule 的列引用 specialday 表，并希望以某种方式制作 rule.hbm.xml 文件，以便当我从表中获取规则对象时，它也会获取关联的 specialday目的。在这里我写下了**specialdaydata.hbm.xml**和**rule.hbm.xml**

*   SpecialDayData.hbm.xml

```
 <composite-id name="specialDayIdData" class="SpecialDayIdData">
      <key-property name="name" column="NAME" type="string"/>
      <key-property name="specialRule" column="SPECIAL_RULE" type="string"/>
    </composite-id>

    <property name="type" type="java.lang.Integer">
        <column name="TYPE" sql-type="NUMERIC" not-null="true"/>
    </property>
    ---other column
    ------
</class> 
```

*   规则.hbm.xml

```
 <id name="rule" column="RULESTRING" type="string">
        <generator class="assigned"/>
    </id>

    <property name="specialRule" type="string">
        <column name="SPECIAL_RULE" sql-type="VARCHAR(64)" not-null="false"/>
    </property>
    <!--specialRule Refer SpecialDayData   -->
    <many-to-one >
         Stuck over here
    </many-to-one>

</class> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:26:31.230

```
<many-to-one
        name="specialRule"
        column="SPECIAL_RULE"
        class="ClassName"
        not-null="true" lazy="true"

    > 
```

在 Rule.hbm.xml 文件中设置lazy="true"

# jquery - 触发点击事件的按键

> ID：12297912
> 
> 赞同：1
> 
> 时间：2012-09-06T10:21:41.327
> 
> 标签：jquery

这段代码对我不起作用：

```
var e = jQuery.Event("keypress");

e.which = 43; // # Some key code value

$(document).trigger(e); 
```

反正有没有虚拟触发它？

```
$("input#genres").live('click', function(){

 var value = $(this).val();

 if($(this).is(':checked')) { 

 $("input.maininput").val(value);
 var e = jQuery.Event("keypress");

    e.which = 13; // # Some key code value

    $("input.maininput").trigger(e);

}

}); 
```

这是我的全部代码，但仍然没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:24:09.820

您的代码正在运行，您只需要添加一些处理程序..

```
var e = jQuery.Event("keypress");
e.which = 43; // # Some key code value

$(document).on('keypress', function(e) {
   alert(e.which);
});

$(document).trigger(e);​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:23:50.150

你可以这样做

```
var e = jQuery.Event("keydown");
e.which = 8; // some value (backspace = 8)
$(document).on('keydown', function(e) {
   alert(e.which);
});

$(document).trigger(e);​ 
```

# javascript - JS/jQUERY 中的节点重复检查

> ID：12297915
> 
> 赞同：0
> 
> 时间：2012-09-06T10:21:55.767
> 
> 标签：javascript, jquery

我有 2 个节点集，如下所示：

```
var node1 = "<p><img src='src1' /> some text text text <span><img src='img2' /> other text</span><img src='img3' /></p>";
var node2 = "<p><img src='src1' /> some text text text <span>other text</span></p>"; 
```

我试图找到一种匹配 2 个节点集并从 P 节点中删除重复项的方法，因此它带回了结果节点集。

```
var result = "<p><span><img src='img2' /></span><img src='img3' /></p>" 
```

目前我已经尝试使用 jQuerys 克隆功能：

```
$(node1).clone().html($(node1).html().replace($(node2).html(), '')) 
```

这将返回原始 node1 字符串，而不删除或替换任何节点集。

我还尝试了一个拆分函数，将 html 转换为字符串，但是很快就变得一团糟，有人知道实现复杂节点搜索/删除重复项的任何有效方法吗？

# android - 运行项目时出错并意外停止项目

> ID：12297918
> 
> 赞同：0
> 
> 时间：2012-09-06T10:22:12.577
> 
> 标签：android

运行 Android 项目时出现此错误：

> com.android.ddmlib.AdbCommandRejectedException：在 com.android.ddmlib.AdbHelper.executeRemoteCommand(AdbHelper.java:373) 在 com.android.ddmlib.AdbHelper.setDevice(AdbHelper.java:752) 上找不到设备。 ddmlib.Device.executeShellCommand(Device.java:462) at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:109) at java.lang.Thread.run(Unknown Source)

当我检查代码时，当我评论这个代码块时，我达到了：

```
public class ElarabyGroup extends Activity {
    private String TAG ;
    private String SENDER_ID = "123456789123";
    private WebView webView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_elaraby_group);

        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        final String regId = GCMRegistrar.getRegistrationId(this);
        if (regId.equals("")) {
            GCMRegistrar.register(this, SENDER_ID);
        } else {
            Log.v(TAG, "Already registered");
        } 
```

错误已完成，但我无法在我的项目中使用 GCM。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:41:09.750

只需重新启动您的eclipse和adb。

请参考这个`http://developer.android.com/guide/google/gcm/gs.html`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-23T08:53:31.443

只需重置 adb（在您的 Eclipse 中转到 DDMS 透视图。在设备选项卡中单击向下箭头-> 重置 adb）。 ![在此处输入图像描述](../Images/e35f9d9518bebdc2840a509b31252886.png)

# wcf - 从代码隐藏创建 WCF 绑定

> ID：12297921
> 
> 赞同：2
> 
> 时间：2012-09-06T10:22:19.087
> 
> 标签：wcf, sharepoint, wcf-binding

我正在开发一个使用 WCF 服务的 SharePoint 工作流 - 问题是，我无法正确部署 app.config 文件。这就是我所说的：

```
<configuration>
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_IService1" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
                maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
                allowCookies="false">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="Message">
                    <transport clientCredentialType="Windows" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="Windows" negotiateServiceCredential="true"
                        algorithmSuite="Default" />
                </security>
            </binding>
        </wsHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://localhost:55693/Service1.svc" binding="wsHttpBinding"
            bindingConfiguration="WSHttpBinding_IService1" contract="ServiceReference1.IService1"
            name="WSHttpBinding_IService1">
            <identity>
                <dns value="localhost" />
            </identity>
        </endpoint>
    </client>
</system.serviceModel> 
```

我很难找到如何从代码动态设置它，有人会这么好心并指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T12:23:30.557

它就像 appconfig 一样工作：

```
WSHttpBinding binding = new WSHttpBinding();
binding.Name = "WSHttpBinding_IService1";
...
binding.ReaderQuotas.MaxDepth = 32;
...
binding.Security.Mode = SecurityMode.Message;
... 
```

# asp.net-mvc - LINQ - 如何显示来自多个模型的数据？

> ID：12297922
> 
> 赞同：0
> 
> 时间：2012-09-06T10:22:29.797
> 
> 标签：asp.net-mvc, linq, linq-to-sql

我在两个表上有这个 LINQ 查询

```
public ViewResult data()
        {
            var query = from a in DB.Album
                        join b in DB.Artists
                        on a.ArtistId equals b.ArtistId
                        where (b.ArtistId == 2)
                       select new { a ,b };

            return View(query.ToList());
        } 
```

但是我很困惑如何在我的视图中显示这些数据，即艺术家表的艺术家姓名和专辑表专辑名称？

我正在尝试这样的事情，但它给了我一个错误

```
@model IEnumerable<test1.Models.Album>

@{
    ViewBag.Title = "data";
}

<h2>data</h2>

@Model.Count()
<br />
<ul>
@foreach (var mod1 in Model)
{
    <li>

   @* @mod1.Genre.Name*@
      @Html.DisplayFor(modelItem => mod1.Artist.Name)
    <br />
    @mod1.AlbumId
   <br />
    @mod1.Artist
    <br />
    @mod1.Title
    </li>
}
</ul> 
```

我得到的错误是

传入字典的模型项的类型为“System.Collections.Generic.List `1[<>f__AnonymousType1` 2[test1.Models.Album,test1.Models.Artist]]”，但此字典需要类型为“System.Collections.Generic”的模型项.IEnumerable`1[test1.Models.Album]'。

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:30:17.390

创建一个新的视图模型来存储所有需要的信息

将您的操作更改为返回该 ViewModel

更改视图以获取新视图模型类型的模型，并根据需要获取属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:29:03.780

You are getting the exception because you are trying to pass a list of anonymous objects instead of a list of albums.

You can create a viewmodel so you can use that type as your model.

```
public class ArtistAlbumViewModel
{
    Artist Artist { get; set; }
    Album Album { get; set; }
} 
```

Use this type when you return values from the query.

```
var query = from a in DB.Album
            join b in DB.Artists
            on a.ArtistId equals b.ArtistId
            where (b.ArtistId == 2)
            select new ArtistAlbumViewModel { Album = a, Artist = b }; 
```

Then you should strongly type your view to this type and edit the view according to your viewmodel.

```
@model IEnumerable<test1.Models.ArtistAlbumViewModel> 
```

# php - Zend 中的公共用户配置文件页面

> ID：12297930
> 
> 赞同：1
> 
> 时间：2012-09-06T10:22:56.727
> 
> 标签：php, zend-framework, url, profile, public

我正在处理 Zend Framework 中的一个项目，其中登录的用户必须有一个公共个人资料页面。例如，

```
http://www.example.com/user_x 
```

但是当我搜索谷歌时，我找不到解决方案。正如我在 Zend 中所知道的，所有页面都只会出现在“public”文件夹下。也就是说，每个 Zend Url 都遵循以下格式，

```
http://www.example.com/public/controller/action 
```

那么，如何使用数据库中的动态内容创建指向用户配置文件的 URL？

谁能帮我？我正在使用 ZF 1.11 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:07:30.950

默认的 ZF 路由为您提供以下格式的 URL：

```
http://www.example.com/module/controller/action
http://www.example.com/controller/action 
```

如果您的 URL 开头有“公共”，那么您的虚拟主机设置有问题（确保您的文档根目录指向公共文件夹，而不是项目的根目录）。

要回答您的查询，您可以设置自定义路由以允许您的用户配置文件 URL，但如果您希望用户名位于 URL 的开头，则需要以不会破坏其他路由的方式执行此操作。不久前，我写了一篇关于执行此特定场景的博客文章，请参阅：[http ://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework](http://tfountain.co.uk/blog/2010/9/9/vanity-urls-zend-framework)

# ios - 将时间与 NSDate 格式（如字符串）分开？

> ID：12297933
> 
> 赞同：0
> 
> 时间：2012-09-06T10:23:09.727
> 
> 标签：ios

我有一个格式为“2012-09-06 04:57:00.000”的日期字符串。我需要像这样在凌晨 04:57 分隔那个字符串中的时间。帮我解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:28:35.060

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"hh:mm:ss a"];
NSString *timeStr =  [formatter stringFromDate:[NSDate date]]; 
```

上面的代码与 ARC 一起使用，否则您需要发布格式化程序，例如

```
formatter release 
```

# java - JAXB 和 complexType 与其元素之一共享名称会生成不正确的代码

> ID：12297940
> 
> 赞同：5
> 
> 时间：2012-09-06T10:23:38.910
> 
> 标签：java, xml, maven, xsd, jaxb

我有这个 xsd 有点糟糕，但我必须使用它来避免更改我正在编写的 servlet 的接口。请求-响应接口的 xsd 包含以下几行：

```
<xs:complexType name=”Foo”&gt;
    <xs:sequence minOccurs=”0” maxOccurs=”unbounded”&gt;
        <xs:element name=”Foo”&gt;
        ...
        </xs:element>
    ...
    </xs:sequence>
<xs:complexType> 
```

注意名称冲突。当我使用 maven-jaxb-plugin 从这个模式生成类时，我最终得到：

```
Public class Foo {
...

   public List<Foo.Foo> getFoo() {
   ...
   }

   ...

   public static class Foo {
   ...
   }
} 
```

当然，这无法编译，因为不允许在嵌套类和封闭类上使用相同的名称。在不更改 xsd 的情况下，我能做些什么来解决这个问题？我知道您可以通过在 xsd 中为 jaxb 添加标签来覆盖名称。这样做安全吗？会不会对服务的接口有影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T11:36:25.553

您可以使用外部绑定文件来自定义生成的类名。有关示例，请参见：

*   [JAXB：如何在 XSD 中指定 attr 类型时更改 XJC 生成的类名称？](https://stackoverflow.com/questions/4793637/jaxb-how-to-change-xjc-generated-classes-names-when-attr-type-is-specified-in-x/4793999#4793999)

# php - 从 3D 关联数组中删除键 => 值对 - PHP

> ID：12297943
> 
> 赞同：1
> 
> 时间：2012-09-06T10:23:45.900
> 
> 标签：php, multidimensional-array, foreach, associative-array

3D 协会。数组如下所示。

```
Array 
( 
    [COL] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [emp_num] => 1000001 
                            [user_name] => Test User 
                            [amount] => 775.00 
                            [name] => COL 
                        ) 
                    [1] => Array 
                        ( 
                            [emp_num] => 26 
                            [user_name] => John Doe 
                            [amount] => 555.00 
                            [name] => COL 
                        ) 
                ) 
    [RA. 20%] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [emp_num] => 1000001 
                            [user_name] => Test User 
                            [amount] => 110.00 
                            [name] => RA. 20% 
                        ) 
                ) 
    [BS] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [emp_num] => 1000001 
                            [user_name] => Test User 
                            [amount] => 444.00 
                            [name] => BS 
                        ) 
                ) 
) 
```

我想删除`key=>value`每个最内层数组的最后一对。（想要删除键具有 [name] 的键值对）结果应该类似于下面的数组。

```
Array 
( 
    [COL] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [emp_num] => 1000001 
                            [user_name] => Test User 
                            [amount] => 775.00
                        ) 
                    [1] => Array 
                        ( 
                            [emp_num] => 26 
                            [user_name] => John Doe 
                            [amount] => 555.00
                        ) 
                ) 
    [RA. 20%] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [emp_num] => 1000001 
                            [user_name] => Test User 
                            [amount] => 110.00
                        ) 
                ) 
    [BS] => Array 
                ( 
                    [0] => Array 
                        ( 
                            [emp_num] => 1000001 
                            [user_name] => Test User 
                            [amount] => 444.00
                        ) 
                ) 
) 
```

我写了一个函数来做到这一点。

```
<!-- language: php -->    
function remove_name_from_psa($psa_array){

            foreach( $psa_array as $key=>$value ) {
                foreach( $value as $key2=>$value2 ){
                    foreach( $value2 as $key3=>$value3 ){                    
                         if( $key3 != 'name') {
                            $psa_name_removed[$key][$value[$key2][$value2[$key3]]] = $value3;
                        }
                    }
                }
            }
            return $psa_name_removed;
        } 
```

返回的数组就是这个，这显然不是我需要的。

```
Array ( [COST OF LIVING] => Array 
                   ( [] => 555.00 ) 
        [RENT ALLOW. 20%] => Array 
                   ( [] => 110.00 ) 
        [BASIC SALARY] => Array 
                   ( [] => 444.00 ) 
      ) 
```

并且有很多未定义的偏移量和未定义的索引通知。
`$psa_name_removed[$key][$value[$key2][$value2[$key3]]] = $value3;` //这是我做错的那一行吗？还是整个方法都是错误的？:-P
我怎样才能让它工作？任何人都可以帮忙吗？
谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:34:44.380

```
function remove_name_from_psa($psa_array){

    foreach( $psa_array as $key => $value ) {
        foreach( $value as $key2 => $value2 ){
            unset( $psa_array[$key][$key2]['name'] );
        }
    }
    return $psa_array;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:29:26.590

哎呀，功能性解决方案！

```
$array = array_map(function ($i) {
    return array_map(function ($j) {
        return array_diff_key($j, array_flip(array('name')));
    }, $i);
}, $array); 
```

更传统的解决方案：

```
foreach ($array as &$i) {
    foreach ($i as &$j) {
        unset($j['name']);
    }
} 
```

注意`&`在`as &$i`. 使用此*参考*来修改项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:34:34.247

要真正取消设置 3D 数组中的最后一个元素，您可以这样做：

```
$data = array(
    array(
        array(1, 2, 3),
    ),
);

foreach ($data as $i1 => $j1) {
    foreach ($j1 as $i2 => $j2) {
        end($j2);
        unset($data[$i1][$i2][key($j2)]);
    }
}
var_dump($data); 
```

在这里查看它的实际效果：

[http://codepad.viper-7.com/CbgnVf](http://codepad.viper-7.com/CbgnVf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T11:17:47.027

```
function remove_name_from_psa( $psa_array ){
    foreach( $psa_array as $key => $value ) {
        foreach( $value as $key2 => $value2 ) {
            array_pop( $psa_array[$key][$key2] );
        }
    }
    return $psa_array;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T10:29:30.083

```
foreach($array as &$foo){
    foreach($foo as &$bar){
        unset($bar['name']);
    }
} 
```

# java - 这是在 Java 中释放 SQLite 连接的最佳方式吗？

> ID：12297947
> 
> 赞同：1
> 
> 时间：2012-09-06T10:24:01.387
> 
> 标签：java, sqlite, sqlexception, try-catch-finally

我需要一种在 Java 中关闭 SQLIte 连接的好方法。在其他用户提出一些建议后，我决定在我的代码中添加一个`finally`块，以确保始终执行关闭操作。

```
public static boolean executeQuery(String query)
{

    Connection conn = null;
    Statement stmt = null;

    try
    {
        Class.forName("org.sqlite.JDBC");
        conn = DriverManager.getConnection(Global.dbPath);
        stmt = conn.createStatement();
        stmt.execute(query);
        return true;   
    }
    catch(ClassNotFoundException e)
    {
        System.out.println(e);
        return false;
    }
    catch(SQLException e)
    {
        System.out.println(e);
        return false;
    }
    finally
    {
        try 
        { 
            stmt.close();
            conn.close();
            return true;
        } 
        catch (SQLException ex) 
        {
            System.out.println ("Errore closing connections");
            return false;
        }
    }
} 
```

我不确定这是最好的解决方案。

如何优化它以提高可读性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T13:09:09.850

一些评论；简而言之：

*   将 SQL 异常与反射异常分开。
*   您的 SQL 异常是否可恢复？如果没有，请抛出一个特定于应用程序的`RuntimeException`.
*   将连接和语句关闭异常包含在您或第三方的实用方法中。
*   不要缩短异常处理；转储堆栈跟踪。

这导致以下情况：

```
public static boolean executeQuery(String query) {
    try {
        Class.forName("org.sqlite.JDBC");
    } catch (ClassNotFoundException e) {
        throw new DbException("Could not find JDBC driver", e);
    }

    Connection conn = null;
    Statement stmt = null;

    try {
        conn = DriverManager.getConnection(Global.dbPath);
        stmt = conn.createStatement();
        stmt.execute(query);
        return true;
    } catch(SQLException e) {
        throw new DbException("Exception during statement execution", e);
    } finally {
        DbUtils.closeQuietly(conn);
        DbUtils.closeQuietly(stmt);
    }
} 
```

（我使用的是 Apache Commons 的 DbUtils `closeQuietly`，它会检查 null（你的没有）。你自己的版本可能会像我在这里一样抛出一个特定于应用程序的异常`DbException`。这会将所有与 DB 相关的异常包装成一个单个异常类，它可能是也可能不是您需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:21:20.203

如果要确保执行命令，则必须将其单独放入 try catch 块中：

```
 try { 
        stmt.close();
    } 
    catch (Exception ex) {
    }

    try { 
        conn.close();
    } 
    catch (Exception ex) {
        System.out.println ("Error closing connections");
        return false;
    } 
```

# c# - 在winform c#中寻找MEF的使用

> ID：12297948
> 
> 赞同：1
> 
> 时间：2012-09-06T10:24:02.140
> 
> 标签：c#, mef

我看到 MEF 现在变得非常流行，但我对 MEF 及其用法一无所知。所以有人告诉我什么是 MEF 以及开发人员使用 MEF 的情况。我正在阅读一篇文章，但我不清楚什么是 MEF。他们使用很多属性，例如导入和导出....它的作用。应用程序将导入和导出什么。

我读这篇文章就像 [http://blogs.msdn.com/b/brada/archive/2009/07/20/simple-example-using-managed-extensibility-framework-in-silverlight.aspx](http://blogs.msdn.com/b/brada/archive/2009/07/20/simple-example-using-managed-extensibility-framework-in-silverlight.aspx)

如果有人讨论什么是 MEF 以及它的用法，那将非常有帮助....在哪里使用它。给我一个 winform 的小示例代码，结果我可以理解它的用法。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:32:57.480

Mef 是依赖注入框架

您与 Unity 的不同之处

它发现目录中的程序集。

它使用 XAP 文件下载和程序集发现。

当发现新类型时，它会重新组合属性和集合。第 31 页

它会自动导出派生类型。

它与 .NET Framework 一起部署。

第一步：导出你的模块

```
[Export]
public class YourService : IYourService
{
.....

} 
```

如果你想在你的客户中注入这个服务，你可以用 (property injection) 注入

```
public class Client
{

[Import]
public IYourService YouService;

......
} 
```

第三步是在目录中注册到MEF。

# visual-studio-2010 - 刷新列表 webpart 以反映在使用 Visual Studio 2010 开发的 sharepoint 2010 中添加的项目

> ID：12297949
> 
> 赞同：0
> 
> 时间：2012-09-06T10:24:02.117
> 
> 标签：visual-studio-2010, sharepoint-2010, web-parts

我有一个列出学生的可视化网络部件。

还有一个 webpart 来添加/编辑学生。

部署应用程序后，我创建了新的 webpart 页面并在一个区域中添加了 CreateStudent webpart，在另一个区域中添加了 ListStudent webpart。

添加学生时，我需要在 ListStudent webpart 的网格中找到该学生的详细信息。

我想我需要连接两个 webpart，将 CreateStudent webpart 作为提供者 webpart，将 ListStudent webpart 作为消费者 webpart，但我的疑问是，我不需要将任何特定值传递给 ListStudent webpart。

我在 ListStudent webpart Page_Load 中有一个函数调用，它设置了 gridview 的数据源并绑定它。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T06:09:26.680

这是满足您需求的链接，

我想它会对你有所帮助。

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=678](http://www.dotnetcurry.com/ShowArticle.aspx?ID=678)

谢谢和问候。

这是另一个完全满足您需求的链接，

[http://blogs.msdn.com/b/pranab/archive/2008/07/02/step-by-step-creating-connected-sharepoint-web-parts-using-iwebpartfield-interface-and-using-editor-部分和用户控件.aspx](http://blogs.msdn.com/b/pranab/archive/2008/07/02/step-by-step-creating-connected-sharepoint-web-parts-using-iwebpartfield-interface-and-using-editor-part-and-user-controls.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T21:04:29.367

下面是简单的提供者和消费者 Web 部件。提供者 UI 接受一个文本字段，它传递给消费者 Web 部件，消费者 Web 部件简单地输出它。Web Part之间的连接如下接口：

```
namespace ConnectedWebParts
{
    public interface IParcel
    {
        string ID { get; }
    }
} 
```

提供者 Web 部件实现了这个接口，并且必须有一个带有属性 ConnectionProvider 的方法，该方法返回自身（因为它实现了接口）：

```
namespace ConnectedWebParts
{
    public class ProviderWebPart : WebPart, IParcel
    {
        protected TextBox txtParcelID;
        protected Button btnSubmit;
        private string _parcelID = "";

        protected override void CreateChildControls()
        {
            txtParcelID = new TextBox() { ID = "txtParcelID" };
            btnSubmit = new Button() { ID = "btnSubmit", Text="Submit"};
            btnSubmit.Click += btnSubmit_Click;
            this.Controls.Add(txtParcelID);
            this.Controls.Add(btnSubmit);
        }

        void btnSubmit_Click(object sender, EventArgs e)
        {
            _parcelID = txtParcelID.Text;
        }

        [ConnectionProvider("Parcel ID")]
        public IParcel GetParcelProvider()
        {
             return this;
        }

        string IParcel.ID
        {
             get { this.EnsureChildControls();  return _parcelID; }
        }
     }
 } 
```

使用者 Web 部件必须定义一个具有 ConnectionConsumer 属性的方法，该属性接受实现连接接口（提供者 Web 部件）的对象作为参数：

```
namespace ConnectedWebParts
{
    public class ConsumerWebPart : WebPart
    {
        protected IParcel _provider;
        protected Label lblParcelID;
        protected override void CreateChildControls()
        {
            lblParcelID = new Label();
            if (_provider != null && !String.IsNullOrEmpty(_provider.ID))
                lblParcelID.Text = _provider.ID;    

            this.Controls.Add(lblParcelID);
        }

        [ConnectionConsumer("Parcel ID")]
        public void RegisterParcelProvider(IParcel provider)
        {
            _provider = provider;
        }
    }
} 
```

# javascript - 如何检查和替换数组中的值？

> ID：12297950
> 
> 赞同：0
> 
> 时间：2012-09-06T10:24:04.623
> 
> 标签：javascript, arrays

我有一个用一些单选按钮的值完成的数组，比如说`myArray = ["1","40","35"];`

每个值都有对应的值，例如 1 = "men"、2 = "women"、40 = "red hairs"。

构建另一个数组的最佳方法是什么，每个值都有对应的值？

所以类似的东西`myBrandNewArray = ["men","red hairs", …];`

我应该将我的夫妇存储到变量中以进行一些维护，例如

```
var "1" = "men", "2" = "women", … ; 
```

但我不知道这是不是一个好方法……</p>

附言。即使向我指出一些资源也会很棒。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:28:30.037

我会保留一个哈希值 `hash = { '1': 'Men', '2': 'Women' ... }`

然后`[ '1', '2', ... ].map( function(v) { return hash[v]; } );`

IE9- 不会接受这个，在这种情况下你可以在 for 循环中迭代

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:27:55.327

为什么不使用对象作为[关联数组](http://www.w3.org/wiki/Objects_in_JavaScript)？

```
var array = new Object();
array["1"] = "men"
array["40"] = "red hairs" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T10:37:42.253

您可以创建一个对象，如：

`var arr = { '1' : 'men', '2' : 'women' }`

您可以随时轻松访问它，例如：`arr['1'] == 'men'`

如果要从现有数组创建：

说`myArray`&`myBrandNewArray`

你可以做类似的事情

```
var arr = {};
foreach ( var i in myArray ) {
  arr[myArray[i]] = myBrandNewArray[i];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:32:03.437

使用一个对象：

```
var val = {
    1: "men",
    40: "red hairs"   
};

alert(val[1]);
alert(val[2]) 
```

;

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T10:28:42.953

我认为这个功能

```
myArray = ["1","40","35"];
myBrandNewArray = myArray.map(function(element){  /* your code to get the right array 8/ }) 
```

来源：[http ://www.tutorialspoint.com/javascript/array_map.htm](http://www.tutorialspoint.com/javascript/array_map.htm)

此功能还有一个 jQuery（跨浏览器）版本，有关该功能的更多详细信息，请参见[此处](http://api.jquery.com/jQuery.map/) `jQuery.map(myArray, function(value, index){ /*....*/ })`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T15:10:12.660

好吧，最后我做到了：

有

```
var numericalArray = ["1","50","45", …]; 
```

和

```
var couples = { "50" : "homme",     
            "1" : "femme",
            "85" : "court",     
        …
                }; 
```

我可以调用它并获得一个具有耦合值的新数组：

```
function assignValues(numericalArray) {

var verbalArray = [];

for (var i=0; i<numericalArray.length; i++) {

    var value = numericalArray[i];

    verbalArray.push(couples[value]);  // right, I can't check if the values exists

}

console.log('here my new array:', verbalArray);

} 
```

感谢我指出对象的使用。

# c++ - 错误 LNK2019 未解析的外部符号

> ID：12297952
> 
> 赞同：4
> 
> 时间：2012-09-06T10:24:05.190
> 
> 标签：c++, symbols, unresolved-external, lnk2019

我对 C++ 很陌生，所以我下载了一个示例 C++ 程序。示例程序在编译时似乎遇到了以下错误：-

```
Error   22  error LNK2019: unresolved external symbol _acsEnumServerNames@12    referenced in function "protected: virtual int __thiscall COpenTsrv::OnInitDialog(void)" (?OnInitDialog@COpenTsrv@@MAEHXZ)  Opentsrv.obj 
```

我追踪到了引用的函数，但我不知道它有什么问题？

```
BOOL COpenTsrv::OnInitDialog() 
{
CDialog::OnInitDialog();

CenterWindow();

acsEnumServerNames(ST_CSTA, AddToList, (unsigned long) (CComboBox*)&m_TserverListControl);

UpdateData(FALSE); 
```

以下是构建日志。显然还有其他错误，但想从第一个开始。

```
1>Generating Code...
1>Compiling resources...
1>Compiling manifest to resources...
1>Linking...
1>Opentsrv.obj : error LNK2019: unresolved external symbol _acsEnumServerNames@12  referenced in function "protected: virtual int __thiscall COpenTsrv::OnInitDialog(void)" (? OnInitDialog@COpenTsrv@@MAEHXZ)
1>Opentsrv.obj : error LNK2019: unresolved external symbol _acsQueryAuthInfo@8 referenced in function "protected: void __thiscall COpenTsrv::OnSelchangeTserverlist(void)" (?OnSelchangeTserverlist@COpenTsrv@@IAEXXZ)
1>Opentsrv.obj : error LNK2019: unresolved external symbol _acsAbortStream@8 referenced in function "protected: virtual void __thiscall COpenTsrv::OnOK(void)" (?OnOK@COpenTsrv@@MAEXXZ)
1>Tsapi.obj : error LNK2001: unresolved external symbol _acsAbortStream@8
1>Opentsrv.obj : error LNK2019: unresolved external symbol _acsEventNotify@16 referenced in function "protected: virtual void __thiscall COpenTsrv::OnOK(void)" (?OnOK@COpenTsrv@@MAEXXZ)
1>Opentsrv.obj : error LNK2019: unresolved external symbol _acsOpenStream@60 referenced in function "protected: virtual void __thiscall COpenTsrv::OnOK(void)" (?OnOK@COpenTsrv@@MAEXXZ)
1>Opentsrv.obj : error LNK2019: unresolved external symbol _cstaMonitorDevice@20 referenced in function "protected: long __thiscall COpenTsrv::OnTsapiAcsConfirmation(unsigned int,long)" (?OnTsapiAcsConfirmation@COpenTsrv@@IAEJIJ@Z)
1>Sampldlg.obj : error LNK2019: unresolved external symbol _cstaMakeCall@20 referenced in function "protected: void __thiscall CSampleDlg::OnCall(void)" (?OnCall@CSampleDlg@@IAEXXZ)
1>Sampldlg.obj : error LNK2019: unresolved external symbol _cstaClearConnection@16 referenced in function "protected: void __thiscall CSampleDlg::OnHangup(void)" (?OnHangup@CSampleDlg@@IAEXXZ)
1>Sampldlg.obj : error LNK2019: unresolved external symbol _cstaAnswerCall@16 referenced in function "protected: void __thiscall CSampleDlg::OnAnswer(void)" (?OnAnswer@CSampleDlg@@IAEXXZ)
1>Tsapi.obj : error LNK2019: unresolved external symbol _acsGetEventPoll@20 referenced in function "protected: long __thiscall CTsapiWnd::OnTsapiMsg(unsigned int,long)" (?OnTsapiMsg@CTsapiWnd@@IAEJIJ@Z)
1>C:\Users\steventang\Documents\Visual Studio 2005\Projects\TSAPINEW\Debug\TSAPINEW.exe    : fatal error LNK1120: 10 unresolved externals
1>Build log was saved at "file://c:\Users\steventang\Documents\Visual Studio 2005\Projects\TSAPINEW\TSAPINEW\Debug\BuildLog.htm"
1>TSAPINEW - 12 error(s), 21 warning(s)
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

任何帮助我指出正确方向的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T10:31:56.857

好像你的编译成功了。只有链接不起作用。

可能链接器在抱怨，因为您定义了方法“acsEnumServerNames”的标头，但您没有提供该方法的实现。

也许您使用了头文件，但没有提供头文件所属的库？

找出“acsEnumServerNames”属于哪个包，并检查您是否在某个 .c/.cpp 文件中实现了该方法，或者该实现是否应该由您依赖的某个库提供。

# java - 如何限制输入类型

> ID：12297956
> 
> 赞同：1
> 
> 时间：2012-09-06T10:24:19.020
> 
> 标签：java, swing, jcombobox, jtextfield

我正在学习java swing。有一个可编辑`JComboBox`的用于选择不同的水深和一个`JTextField`接受手机号码。我的问题是如何限制用户在这两个字段中仅输入数字，以及如何限制字符输入的最大数量，例如手机号码不超过 10 个？这些方法是否适用于这些要求，或者我需要自己定义它们？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:27:37.013

使用类似的`JFormattedTextField`东西：

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        @Override
        public void run() {
            JFrame frame = new JFrame("JFormattedTextField Example");
            MaskFormatter fmt = null;

            // A phone number 10 digits 
            try {
                fmt = new MaskFormatter("(###)-###-####");//brackets () are optional just there for my pref
                fmt.setPlaceholderCharacter('*');//set place holder for the empty digits of the number

            } catch (java.text.ParseException e) {
            }

            JFormattedTextField tft1 = new JFormattedTextField(fmt);

            frame.add(tft1);

            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLocationRelativeTo(null);
            frame.pack();
            frame.setVisible(true);
        }
    });
} 
```

这会自动具有您想要的属性，它只接受指定格式的数字查看文档以获取更多信息：[JFormattedTextField](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:43:46.520

如何限制用户在电话文本字段中输入数字以外的字符

```
TF1.addKeyListener(new KeyListener() {

            @Override
            public void keyTyped(KeyEvent arg0) {
                // TODO Auto-generated method stub
                char k=arg0.getKeyChar();
                if (!(k>='0' && k<='9'))
                    arg0.consume();
            }

            @Override
            public void keyReleased(KeyEvent arg0) {
                // TODO Auto-generated method stub              
            }

            @Override
            public void keyPressed(KeyEvent arg0) {
                // TODO Auto-generated method stub              
            }
        }); 
```

# javascript - 使用 Handlebars 'each' 循环访问父级的属性

> ID：12297959
> 
> 赞同：222
> 
> 时间：2012-09-06T10:24:24.023
> 
> 标签：javascript, handlebars.js

考虑以下简化数据：

```
var viewData = {
    itemSize: 20,
    items: [
        'Zimbabwe', 'dog', 'falafel'
    ]
}; 
```

还有一个把手模板：

```
{{#each items}}
    <div style="font-size:{{itemSize}}px">{{this}}</div>
{{/each}} 
```

这不起作用，因为在`each`循环中，父范围不可访问——至少我尝试过的任何方式都没有。我希望有办法做到这一点！

* * *

## 回答 #1

> 赞同：459
> 
> 时间：2012-09-06T10:26:11.433

有两种有效的方法可以实现这一点。

### 取消引用父范围`../`

通过添加`../`到属性名称之前，您可以引用父范围。

```
{{#each items}}
    <div style="font-size:{{../itemSize}}px">{{this}}</div>
    {{#if this.items.someKey}}
       <div style="font-size:{{../../itemSize}}px">{{this}}</div>  
    {{/if}}
{{/each}} 
```

您可以通过重复`../`. 例如，要上两个级别，请使用`../../key`.

有关详细信息，请参阅[有关路径的 Handlebars 文档](https://handlebarsjs.com/guide/expressions.html#changing-the-context)。

### 取消引用根范围`@root`

通过添加`@root`到属性路径，您可以从最高范围向下导航（如[caballerog 的答案](https://stackoverflow.com/a/36725440/24874)所示）。

有关更多信息，请参阅[有关 @data 变量的 Handlebars 文档](https://handlebarsjs.com/api-reference/data-variables.html#data-variables)。

* * *

## 回答 #2

> 赞同：69
> 
> 时间：2016-04-19T17:29:37.413

新方法使用点表示法，斜杠表示法已弃用（[http://handlebarsjs.com/expressions.html](http://handlebarsjs.com/expressions.html)）。

因此，访问父元素的实际方法如下：

```
@root.grandfather.father.element
@root.father.element 
```

在您的具体示例中，您将使用：

```
{{#each items}}
 <div style="font-size:{{@root.viewData.itemSize}}px">{{this}}</div>
{{/each}} 
```

官方文档（[http://handlebarsjs.com/builtin_helpers.html](http://handlebarsjs.com/builtin_helpers.html)）中的另一种方法是使用别名

> each 助手还支持块参数，允许在块中的任何位置命名引用。
> 
> ```
> {{#each array as |value key|}}  
>  {{#each child as |childValue childKey|}}
>      {{key}} - {{childKey}}. {{childValue}}   
>  {{/each}} 
> {{/each}} 
> ```
> 
> 将创建一个孩子可以访问的键和值变量，而无需深入的变量引用。在上面的示例中，{{key}} > 与 {{@../key}} 相同，但在许多情况下更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-16T08:07:20.180

不幸的是 ../ 取消引用似乎不能通过部分工作。但是我们可以将属性添加到传递到部分的上下文中：

```
Name: {{parent.name}}

{{#each children}}
    {{> childpartial this parent=../parent}}
{{/each}} 
```

子部分：

```
{{name}} is child of {{parent.name}} 
```

更多： [车把 - 是否可以部分访问父上下文？](https://stackoverflow.com/questions/9411538/handlebars-is-it-possible-to-access-parent-context-in-a-partial)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-15T10:30:44.547

我们可以使用 {{../parent.propertyname}} 访问父级

# php - Javascript 滑块不滑动，如何判断是否存在 JS 冲突？

> ID：12297968
> 
> 赞同：0
> 
> 时间：2012-09-06T10:25:09.257
> 
> 标签：php, javascript, jquery

我有一个现有的网站，图像滑块不再执行其幻灯片功能或幻灯片箭头不再推进幻灯片。我假设另一个脚本导致该脚本出现故障。谁能告诉我如何或看一下并告诉我问题出在哪里？

网址：

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:41:37.743

您可以使用[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:11:14.150

我遇到过类似的问题。但是由于我们添加了 noConflict，因此需要更改此代码...将“$”更改为“jQuery”以修复该错误。

```
$(document).ready(function() {
$('#slider .scroll').slide(1, 10000);
}); 
```

改成：

```
jQuery(document).ready(function() {
jQuery('#slider .scroll').slide(1, 10000);
}); 
```

# android - 在 Android 中创建双微调器

> ID：12297971
> 
> 赞同：2
> 
> 时间：2012-09-06T10:25:33.037
> 
> 标签：android, spinner

我正在尝试在 Android 中重新创建 Apple 应用程序。Apple 应用程序包括一个双微调器（见下图）。您可以在左侧选择一个字母，它会在右侧找到以该字母开头的第一个项目（或者更确切地说，前一个字母的最后一个项目，因此用户更有可能选择某些东西而不是只接受第一项）。

![双旋转器](../Images/c298e5af03e10fa128b87d40c956bcc9.png)

有没有办法在Android中实现类似的东西？我正在考虑尝试使用带有几个 ListViews 的对话框，但我不确定我是否在那里吠叫错误的树？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:55:28.660

作为记录，我能够使用包含 2 个并排 ListView 的自定义对话框来实现我想要的结果（另一个 View 充当它们之间的分隔符）。

# c# - 在没有 AD 驱动器号的情况下在运行空间中加载 ActiveDirectory PowerShell 模块

> ID：12297974
> 
> 赞同：1
> 
> 时间：2012-09-06T10:25:45.887
> 
> 标签：c#, powershell, active-directory, powershell-2.0

我正在尝试将 ActiveDirectory 模块加载到我正在处理的自定义 SnapIn 中。但是，当我这样做时，我会遇到烦人的错误

> “初始化默认驱动器时出错：'找不到运行 Active Directory Web 服务的默认服务器。'”

超时需要 15 秒左右。在普通的 PowerShell 控制台中，我意识到您可以设置一个变量来禁用 AD：驱动器映射，但是，我似乎无法从 C# 代码中获得它。

```
InitialSessionState initial = InitialSessionState.CreateDefault();
initial.Variables.Add(new SessionStateVariableEntry("ADPS_LoadDefaultDrive",
                                                    0, 
                                                    string.Empty));
initial.ImportPSModule(new string[] { "ActiveDirectory" });

using (Runspace runspace = RunspaceFactory.CreateRunspace(initial))
        {
            runspace.Open();
            using (Pipeline p = runspace.CreatePipeline())
            {
                Command getGroup = new Command("Get-ADGroup");
                getGroup.Parameters.Add("Filter", this.Group);
                p.Commands.Add(getGroup);

                var results = p.Invoke();
                this.WriteObject(results, true);
            }
        } 
```

我已经包含了我认为应该工作的内容，但是 ADPS_LoadDefaultDrive 设置似乎被忽略了，因为每次我尝试调用 ActiveDirectory 模块时，我都会收到相同的 Web 服务错误（以及痛苦的超时）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:11:40.160

尝试设置`ADPS_LoadDefaultDrive`为环境变量，而不是常规会话变量。

# php - ExternalConsentConnectivityProblem Windows Live OAuth

> ID：12297976
> 
> 赞同：0
> 
> 时间：2012-09-06T10:25:52.750
> 
> 标签：php, api, oauth-2.0, windows-live

我正在尝试从 hotmail.com 获取联系人列表。我已经注册了我的应用程序，并尝试使用[此处](http://archive.msdn.microsoft.com/messengerconnect/Release/ProjectReleases.aspx?ReleaseId=4595)提供的示例代码（OAuth Wrap CallBack）。

但我从服务器得到以下休息：

```
error_code=1017&wrap_error_reason=ExternalConsentConnectivityProblem 
```

我不确定问题是什么。我输入了正确的用户名和密码以提供同意。有人可以帮我解决这个问题吗？

我的申请可以在[这里](http://ftr.phpfogapp.com/test2/index.php)找到。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T09:55:32.543

> 您使用的 Messenger Connect 似乎是 4.1 版本，该版本已弃用且不再有效（请参阅本论坛顶部的公告）。这里有一些文档：从 OAuth WRAP 迁移到 OAuth 2.0：http: [//msdn.microsoft.com/en-us/library/live/hh243647.aspx#moving](http://msdn.microsoft.com/en-us/library/live/hh243647.aspx#moving)

我已经[在这里](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/4c526036-7874-4615-915c-66e7b77e67dc)阅读了这个答案（我认为你是提问者），我将这个分享给所有人，因为我有同样的问题，我也将迁移。

# html - 在页面中居中表格

> ID：12297978
> 
> 赞同：0
> 
> 时间：2012-09-06T10:25:57.830
> 
> 标签：html, css

我编写了这个 HTML/JavaScript 代码，但我无法在页面中居中表格。我已经尝试了 align=center 和 margin 样式。但似乎没有任何效果。甚至将表格放入 div 中。

编辑：更好的描述：我正在尝试从 IP 摄像机（小图片）中拍摄四张照片，并使它们出现在全屏浏览器中，并在页面上居中并最大化。

这是代码：

```
<body style="margin:0; background-color:black;">
<table style="height:100%; background-color:black; position:fixed;">
    <tr>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera1"/>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera2"/>
    </tr>
    <tr>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera3"/>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera4"/>
    </tr>
</table>
</body>

<script language="JavaScript">
//<!--

function reloadImage()
{
    var now = new Date();
    var Camera = new Array()
    var Camera1 = 'http://192.168.10.219/cgi-bin/wappaint?camera_no=0&animation=0&name=aa&password=11&time=1346851800&pic_size=2'
    var Camera2 = 'http://192.168.10.219/cgi-bin/wappaint?camera_no=1&animation=0&name=aa&password=11&time=1346851800&pic_size=2?1346851972719.719'
    var Camera3 = 'http://192.168.10.219/cgi-bin/wappaint?camera_no=2&animation=0&name=aa&password=11&time=1346851800&pic_size=2?1346851974247.247'
    var Camera4 = 'http://192.168.10.219/cgi-bin/wappaint?camera_no=3&animation=0&name=aa&password=11&time=1346851800&pic_size=2?1346851975678.678'

    if (document.images)
    {
        var image1 = new Image;
        var image2 = new Image;
        var image3 = new Image;
        var image4 = new Image;

        image1.onload = function () { document.images.Camera1.src = image1.src; }
        image2.onload = function () { document.images.Camera2.src = image2.src; }
        image3.onload = function () { document.images.Camera3.src = image3.src; }
        image4.onload = function () { document.images.Camera4.src = image4.src; }

        image1.src = Camera1 + '?' + now.getTime();
        image2.src = Camera2 + '?' + now.getTime();
        image3.src = Camera3 + '?' + now.getTime();
        image4.src = Camera4 + '?' + now.getTime();
    }
    setTimeout('reloadImage()',1000);
}

setTimeout('reloadImage()',1000);
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T10:32:29.710

你应该`HTML`先学会写作。表格的标记去 -

```
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
    <td>You img tag</td>
    <td>You img tag</td>
  </tr>
  <tr>
    <td>You img tag</td>
    <td>You img tag</td>
  </tr> <!-- And so on -->
</table> 
```

你完全错过`TD`了你的代码

[**这是**](http://jsfiddle.net/kbSny/)您问题

**编辑：**

当您在使用中添加`img`标签时，它将解决调整大小的问题 -`TD``width and height attributes`

```
<img src="img/imageName.jpg" width="400" height="400" alt="" title="" /> 
```

嘿，我使用了学习的东西，因为你在这里发布了问题，所以我假设你已经在处理 HTML。没关系！你为什么不试试[**HTML Fundamentals**](http://www.codecademy.com/courses/html-one-o-one) 这将帮助你很好地理解 HTML！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:29:10.503

There is no td specified. Add td after the tr and give `align="center"` to the table tag". And remove the `position:fixed` if it is really not necessary

Check the demo here [http://jsfiddle.net/2QnE9/2/](http://jsfiddle.net/2QnE9/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T10:30:16.090

您需要给它一个固定的宽度并将 margin-left 和 margin-right 设置为 auto 并从表格中删除固定位置

例子

```
width:500px;
margin-left:auto;
margin-right:auto; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T10:31:44.377

**[看演示](http://jsfiddle.net/PV8Cx/embedded/result/)**

这是`CSS`：

```
 #mytable
    {
    position:fixed;
    left:50%;
    top:50%;
    //set margin-left and margin-top to get it to center.
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T10:32:09.943

尝试这个

```
<table align="center" style="height:100%;background-color:black; position:relative;">
    <tr><td>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera1"/>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera2"/>
    </td></tr>
    <tr><td>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera3"/>
    <img height="50%" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAGUExURQAAAP///6XZn90AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAKSURBVBjTY2AAAAACAAGYY2zXAAAAAElFTkSuQmCC" name="Camera4"/>
    </td></tr>
</table> 
```

# firefox - 为什么facebook上有两个favicon

> ID：12297982
> 
> 赞同：-2
> 
> 时间：2012-09-06T10:26:11.600
> 
> 标签：firefox, browser, favicon

今天登录facebook时，我在地址栏中看到身份部分附近的两个favicon（我不知道这部分的确切名称。如果有人知道，请编辑我的问题），如下面的截图；

![在此处输入图像描述](../Images/88f1483e2ca99f452a9075280eceb0f9.png)

但是登录页面只有一个图标；

![在此处输入图像描述](../Images/070710323900fbc3c52333267ffee46d.png)

为什么会这样？可能的原因是什么？我在 Windows 7 中使用 Firefox 13.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:52:30.837

正方形区域是 SSL 证书信息。SSL 证书包含公司信息（Facebook），我想 Firefox 从公司的网站地址检索 favicon，在本例中为 facebook.com）。

PS无论您想收到什么“级别”的答案都没有关系，每种问题都属于其特定的领域。版主：如果可能的话，请将这个问题以及我的答案移至 superuser.com

![在此处输入图像描述](../Images/caf3000af56154849066a21e9ccef723.png)

# c# - 使gridcontrol从右到左，但列的标题消失了

> ID：12297984
> 
> 赞同：0
> 
> 时间：2012-09-06T10:26:20.033
> 
> 标签：c#, c#-4.0, devexpress

由于 devexpress 不支持用于网格控制的阿拉伯语，我正在尝试为网格控制进行镜像，我成功地做到了，但问题是当我将鼠标光标悬停在列标题上时，列的标题消失了！！！！我不知道为什么？我想解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T06:25:14.037

我遇到了同样的问题，解决方法是：

使您自己的控件继承自`xtragrid`并覆盖`mousemove`事件和`mousehover`事件添加行`this.Invalidate();`

# c# - ASP.NET - 在网站启动时更改键盘输入语言

> ID：12297985
> 
> 赞同：1
> 
> 时间：2012-09-06T10:26:20.373
> 
> 标签：c#, asp.net

我正在开发一个语言与英语不同的网站。当活动窗口/页面是网站时，是否可以将键盘输入语言更改为某种语言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T10:39:36.880

不可以。无法从网站更改键盘输入语言。

您可以建议用户使用特定语言，但您无法控制他们使用的语言。

您可以通过检查服务器变量来检测用户语言

```
var language = Request.ServerVariables["HTTP_ACCEPT_LANGUAGE"];
var charset = Request.ServerVariables["HTTP_ACCEPT_CHARSET"]; 
```

# iphone - 目标 c 中的 XMLParser 错误，需要开始标记，未找到“<”？

> ID：12297988
> 
> 赞同：1
> 
> 时间：2012-09-06T10:26:35.500
> 
> 标签：iphone, web-services, xml-parsing, sudzc

在我的应用程序中，我尝试以 NSString 格式发送 Web 服务请求。我使用 sudzc 生成网络服务。但是，当我发送请求时，显示错误

```
Entity: line 1: parser error : Start tag expected, '<' not found
Bad Request

  Error Domain=CXMLErrorDomain Code=1 "The operation couldn’t be completed. (CXMLErrorDomain error 1.)"^ 
```

这是我发送的 xml 格式的字符串，

```
 NSString *string=[NSString stringWithString:@"<request><ClosingDate>06-Sep-2012</ClosingDate><ProductName>Document Management Software</ProductName><ProductID>3</ProductID><CurrencyID>3</CurrencyID></request>"]; 
```

但错误显示'<' not found，我不知道究竟是什么错误？需要一些帮助

**编辑**

我使用 SUDZC 生成网络服务

```
 MFLCommonServices *services1=[MFLCommonServices service];

 NSString *request=[NSString stringWithString:@"<request><ClosingDate>06-Sep-2012</ClosingDate><ProductName>Document Management Software</ProductName><ProductID>3</ProductID><CurrencyID>3</CurrencyID></request>"];

 [services1 CreateRequest:self action:@selector(CreateRequestHandler:) Email:@"xxxxx"  Password:@"xxxxxx" Token:@"xxxxxx" Request:request]; 
```

# c# - 是否可以创建整数的代理类型？

> ID：12297994
> 
> 赞同：1
> 
> 时间：2012-09-06T10:26:52.417
> 
> 标签：c#, .net, clr

那只是我尝试的一个测试。我想制作一种行为与`int`. 我试图制作这样的代理类型：

```
class myint : int { } 
```

但`myint`不会是值类型。有没有办法创建代理类型`int`？

PS我知道扩展方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:29:30.900

值类型只能实现接口——你不能从另一个值类型继承。

所以，你不能继承自`int`.

您*可以*将一个类/结构包装`int`为一个字段。

# c - 带有 Do-While 循环的“运行时检查失败 #2”

> ID：12297996
> 
> 赞同：0
> 
> 时间：2012-09-06T10:26:58.293
> 
> 标签：c, loops, while-loop, boolean

我对 C 和编程还很陌生，而且我一直被卡住。我正在通过一个程序来练习，只是增加了它的复杂性。

与这里提出的其他一些问题相比，该程序相当简单。我要做的就是输入一个数字，然后说出它是小于还是大于五。我最近添加了一个菜单和一个 Do While 循环。这是下面的代码。

```
#include <stdio.h>

void main ()
{
    int ANumber;
    bool Determine = 1; 
    int MenuChoice; 

    printf("1) Enter a number." "\n2) Exit.\n");
    printf("\nPlease choose an option from the menu above - ");

    scanf("%d", &MenuChoice);       

    if (1 == MenuChoice) {  

        do {
            printf("\nPlease enter a number that is between 0 and 10 - ");
            scanf("%d", &ANumber);          

            if (ANumber == 5)   
                printf("The number you entered is 5.\n");           

            if (ANumber >= 6)
                printf("The number you entered is larger than 5.\n");

            if (ANumber <= 4)
                printf("The number you entered is smaller than 5.\n");

            getchar();
            printf("Would you like to continue? 1 = Yes OR 0 = No - ");     
            scanf("%d", &Determine);    
            return;

        } while (true == Determine);

        if (false == Determine) {   
            return;
        }

    }

    if (2 == MenuChoice)
        return;
} 
```

主要问题是大部分代码都可以正常工作。
当我想退出循环时出现问题：

```
while (true == Determine);

if (false == Determine) {   
    return;
} 
```

当我在程序中输入 0 时出现此错误：

```
Run-Time Check Failure #2 - Stack around the variable 'Determine' was corrupted. 
```

我可以请我帮忙说明什么是错误的以及此错误消息的含义吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:30:30.937

`scanf()`无法读取布尔数据类型。没有适当的格式说明符用于`bool`使用`scanf()`.
请注意，`scanf()`如果使用格式说明符和实际数据类型之间的不匹配，则会导致**Undefined Behavior**。

您将不得不使用`int`.

改变：

```
bool Determine = 1; 
```

至

```
int Determine = 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T10:31:51.863

抛弃 yoda 条件句，然后滚动

```
while(Determine) 
```

这将完全像你写的那样工作，因为 C 没有布尔值，它们是整数。false 为 0，true 为非零。

如果内部参数大于零（非假），则 while、if、for 和所有这些都将触发。

另外，尝试在代码块之间使用 printf，这样您就知道卡在哪里了。我认为如果您更好地格式化代码，您会自己注意到错误（以及其中之一）；）

阅读本文了解更多信息[在 C 中使用布尔值](https://stackoverflow.com/questions/1921539/using-boolean-values-in-c)

编辑：哦，好吧。

```
bool Determine = 1; //not even true or false here you're using it as an int 
```

然后稍后

```
scanf("%d", &determine); 
```

bool 应该只有一个字节，整数是四个字节；您将 4 个字节塞入 1 个字节的区域，bam 堆栈被损坏。

```
int Determine = 1; 
```

您需要注意数据大小，使用 sizeof() 来感受一下事情有多大。即使这是C，事物也不能自动将自己投射到其他事物上：)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-06T10:33:52.703

0 不等于 false，true 不等于 1。

将determine的数据类型从bool改为int

检查确定为确定 == 0 或 1。