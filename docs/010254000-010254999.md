# StackOverflow 问答 10254000-10254999

# c# - .Net 4 导致 DLLImport 函数返回失败代码，.Net 2、3 或 3.5 不会

> ID：10254003
> 
> 赞同：3
> 
> 时间：2012-04-20T21:47:54.727
> 
> 标签：c#, .net, dllimport

我正在查看来自 sourceforge 的示例项目，用于链接到 TSAPI（不是 TAPI）电话系统 - [http://tsapi.sourceforge.net/](http://tsapi.sourceforge.net/)。

我的开发环境是 32 位 Windows XP，项目设置为目标 x86。

这可以正常运行，因为它可以针对 .Net 2 运行，但我需要针对 .Net 4 运行。当我更改框架并运行第一个函数时，返回 -1 表示失败。

函数定义为：

```
[DllImport("csta32.dll")]
public static extern int acsOpenStream(ref UInt32 acsHandle, int invokeIDType, UInt32 invokeID, int streamType, char[] serverID, char[] loginID, char[] passwd, char[] applicationName, int acsLevelReq, char[] apiVer, ushort sendQSize, ushort sendExtraBufs, ushort recvQSize, ushort recvExtraBufs, ref PrivateData_t priv); 
```

调用此函数的 c# 代码（从示例项目中提取）是：

```
 // The public method to open the ACS stream
    public bool open(string strLoginId, string strPasswd, string strServerId)
    {
        // Convert the parameters to character arrays
        char[] serverId = strServerId.ToCharArray();
        char[] loginId = strLoginId.ToCharArray();
        char[] passwd = strPasswd.ToCharArray();

        // Define the initial set of variables used for opening the ACS Stream
        int invokeIdType = 1;
        UInt32 invokeId = 0;
        int streamType = 1;
        char[] appName = "Mojo".ToCharArray();
        int acsLevelReq = 1;
        char[] apiVer = "TS1-2".ToCharArray();
        ushort sendQSize = 0;
        ushort sendExtraBufs = 0;
        ushort recvQSize = 0;
        ushort recvExtraBufs = 0;

        // Define the mandatory (but unused) private data structure
        Csta.PrivateData_t privData = new Csta.PrivateData_t();
        privData.vendor = "MERLIN                          ".ToCharArray();
        privData.length = 4;
        privData.data = "N".ToCharArray();

        // Define the event buffer pointer that gets data back from the TServer
        ushort numEvents = 0;
        Csta.EventBuf_t eventBuf = new Csta.EventBuf_t();
        ushort eventBufSize = (ushort)Csta.CSTA_MAX_HEAP;

        // Open the ACS stream
        try
        {
            int openStream = Csta.acsOpenStream(ref acsHandle, invokeIdType, invokeId, streamType, serverId, loginId, passwd, appName, acsLevelReq, apiVer, sendQSize, sendExtraBufs, recvQSize, recvExtraBufs, ref privData); 
```

还提供了一个 C++ 示例应用程序，其中函数调用为：

```
m_nRetCode = acsOpenStream(&m_lAcsHandle            // Handle for ACS Stream 
    , APP_GEN_ID            // APP_GEN_ID indicates Application   generated invokeID's
    , (InvokeID_t)m_ulInvokeID  // By default 1
    , ST_CSTA
    , (ServerID_t *)(serverID)  // AE Server Name
    , (LoginID_t *)(loginID)    // CTI LoginID
    , (Passwd_t *)(password)  // CTI LoginID password
    , (AppName_t *)"TSAPI_AgentView"
    , ACS_LEVEL1
    , (Version_t *) "TS1-2" // private Data version in use 8 in our case
    , 10
    , 5 
    , 50
    , 5
    , (PrivateData_t *)&m_stPrivateData); // private Data. 
```

如果我将 DLLImport 更改为

```
[DllImport("csta32.dll", CallingConvention=CallingConvention.Cdecl)]
public static extern int acsOpenStream(ref UInt32 acsHandle, int invokeIDType, UInt32 invokeID, int streamType, char[] serverID, char[] loginID, char[] passwd, char[] applicationName, int acsLevelReq, char[] apiVer, ushort sendQSize, ushort sendExtraBufs, ushort recvQSize, ushort recvExtraBufs, ref PrivateData_t priv); 
```

我收到运行时错误

检测到 PInvokeStackImbalance 消息：对 PInvoke 函数“Mojo!Csta::acsOpenStream”的调用使堆栈不平衡。这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

Avaya 不提供头文件 - 文档表明函数定义为：

```
RetCode_t acsOpenStream(
ACSHandle_t *acsHandle, /* RETURN */
InvokeIDType_t invokeIDType, /* INPUT */
InvokeID_t invokeID, /* INPUT */
StreamType_t streamType, /* INPUT */
ServerID_t *serverID, /* INPUT */
LoginID_t *loginID, /* INPUT */
Passwd_t *passwd, /* INPUT */
AppName_t *applicationName, /* INPUT */
Level_t acsLevelReq /* INPUT */
Version_t *apiVer, /* INPUT */
unsigned short sendQSize, /* INPUT */
unsigned short sendExtraBufs, /* INPUT */
unsigned short recvQSize, /* INPUT */
unsigned short recvExtraBufs /* INPUT */
PrivateData_t *privateData); /* INPUT */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:38:39.200

您声明的字符串参数`char[]`总是错误的。我猜你在早期的 .net 版本中碰巧侥幸逃脱了。

C++ 代码将这些参数声明为`char*`，即指向以空字符结尾的字符数组的指针。在 C# 代码中声明这些参数的正确方法是 as `string`。p/invoke marshaller 将负责将您的 C# 字符串转换为 C 字符串，您可以删除所有虚假`ToCharArray()`代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T21:58:07.897

考虑到您在谈论 4.0，我*想*，也很难从提供的问题中推断出来，您在 4.0 下运行的应用程序也在 64 位操作系统下运行。

如果，那么，失败是绝对合理的，因为你的目标是`csta32.dll`DLL 并使用类似的参数`UInt32`。

提出解决此问题的解决方案的第一步是

*   选择要从中导入的正确库
*   替换`Uint32`为`uint`，因此该类型的正确维度将由运行时选择。

但是这些自然是尝试，应该尊重必须声明导入的正确方法的正确签名。

如果这不是您要的，或者不是您的问题，请澄清。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:08:10.567

答案是将char[]修改为字符串。然后这适用于 .Net 4.0 - 如果保留为 char [] 它返回 -2 ( ACSERR_BADPARAMETER )。

因此，2.0 必须处理此问题，因为 DLLImport 不需要此更改以在该版本的框架上工作。

# xslt - 对于每个逻辑

> ID：10254005
> 
> 赞同：1
> 
> 时间：2012-04-20T21:48:10.867
> 
> 标签：xslt, xslt-1.0

我正在尝试在 XSLT 1.0 中执行以下操作：

将所有 Fram 元素原样复制到输出中，其中条件是 Fram 的任何属性（@name AND @type AND @ref）值与任何 XFram 元素匹配，然后它应该使用 XFram/text() 更新 Fram/text() . 之后复制 XFram 元素的其余部分（所有这些 dint 都符合上述条件）并将它们转换为 Fram 标签。

注意：第三个 Fram 元素的 all 属性与第三个 Xfram 元素匹配，因此在第三个 Fram 元素中附加了文本。XFarm 元素的其余部分转换为 Fram 元素并添加到最后一个 Fram 元素之后。您还会注意到 Fram 的顺序没有改变。

输入.XML

```
<Doc>AL
<Frams>
 <Fram type="x" name="Fram1" ref="ref1">This is Fram One</Fram>
 <Fram type="y" name="Fram2" ref="ref2">This is Fram Two</Fram>
 <Fram type="z" name="Fram3" ref="ref3">This is Fram Three</Fram>
 <Fram type="a" name="Fram4" ref="ref3">This is Fram Four</Fram>
 <Fram type="b" name="Fram5" ref="ref3">This is Fram Five</Fram>
</Frams>
<XFram>
 <XFram type="e" name="XFram1" ref="Xref1">This is XFram One</Fram>
 <XFram type="f" name="XFram2" ref="Xref2">This is XFram Two</Fram>
 <XFram type="z" name="XFram3" ref="Xref3">This is XFram Three</Fram>
 <XFram type="e" name="XFram1" ref="Xref1">This is XFram Four</Fram>
<XFram>
<Doc> 
```

输出应该是：

```
<Doc>
 <Frams>
 <Fram type="x" name="Fram1" ref="ref1">This is Fram One</Fram>
 <Fram type="y" name="Fram2" ref="ref2">This is Fram Two</Fram>
 <Fram type="z" name="Fram3" ref="ref3">This is XFram Three</Fram>
 <Fram type="a" name="Fram4" ref="ref3">This is Fram Four</Fram>
 <Fram type="b" name="Fram5" ref="ref3">This is Fram Five</Fram>
 <XFram type="e" name="XFram1" ref="Xref1">This is XFram One</Fram>
 <XFram type="f" name="XFram2" ref="Xref2">This is XFram Two</Fram>
 <XFram type="e" name="XFram1" ref="Xref1">This is XFram Four</Fram>
 </Frams>
<Doc> 
```

我正在做这样的事情，但无法想到逻辑：

```
<xsl:template match="/">
    <xsl:for-each select="XFram">
        <xsl:variable name="type">
            <xsl:value-of select="type"/>
        </xsl:variable>
        <xsl:variable name="name">
            <xsl:value-of select="name"/>
        </xsl:variable>
        <xsl:variable name="ref">
            <xsl:value-of select="ref"/>
        </xsl:variable>
        <xsl:for-each select="//Fram">
            <xsl:choose>
                <xsl:when test="(type = $type) and (name = $name) and (ref = $ref)"> </xsl:when>
            </xsl:choose>
        </xsl:for-each>           
    </xsl:for-each>
</xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T02:41:47.283

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*" name="identity">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="Fram[last()]">
  <xsl:call-template name="identity"/>

  <xsl:apply-templates
       select="../../XFram/*"/>
 </xsl:template>

 <xsl:template match="XFram/XFram">
  <xsl:if test=
   "not(/*/Frams/*
             [@type = current()/@type
            and
              concat('X',@name) = current()/@name
            and
              concat('X',@ref) = current()/@ref
             ]
         )">
     <xsl:copy-of select="."/>
  </xsl:if>
 </xsl:template>
 <xsl:template match="XFram"/>
</xsl:stylesheet> 
```

**当应用于提供的 XML 文档时**（已纠正严重的格式错误！！！）：

```
<Doc>
    <Frams>
        <Fram type="x" name="Fram1" ref="ref1">This is Fram One</Fram>
        <Fram type="y" name="Fram2" ref="ref2">This is Fram Two</Fram>
        <Fram type="z" name="Fram3" ref="ref3">This is Fram Three</Fram>
        <Fram type="a" name="Fram4" ref="ref3">This is Fram Four</Fram>
        <Fram type="b" name="Fram5" ref="ref3">This is Fram Five</Fram>
    </Frams>
    <XFram>
        <XFram type="e" name="XFram1" ref="Xref1">This is XFram One</XFram>
        <XFram type="f" name="XFram2" ref="Xref2">This is XFram Two</XFram>
        <XFram type="z" name="XFram3" ref="Xref3">This is XFram Three</XFram>
        <XFram type="e" name="XFram1" ref="Xref1">This is XFram Four</XFram></XFram>
</Doc> 
```

**产生想要的正确结果：**

```
<Doc>
   <Frams>
      <Fram type="x" name="Fram1" ref="ref1">This is Fram One</Fram>
      <Fram type="y" name="Fram2" ref="ref2">This is Fram Two</Fram>
      <Fram type="z" name="Fram3" ref="ref3">This is Fram Three</Fram>
      <Fram type="a" name="Fram4" ref="ref3">This is Fram Four</Fram>
      <Fram type="b" name="Fram5" ref="ref3">This is Fram Five</Fram>
      <XFram type="e" name="XFram1" ref="Xref1">This is XFram One</XFram>
      <XFram type="f" name="XFram2" ref="Xref2">This is XFram Two</XFram>
      <XFram type="e" name="XFram1" ref="Xref1">This is XFram Four</XFram>
   </Frams>
</Doc> 
```

# c# - 丢失 RIA 服务调试

> ID：10254008
> 
> 赞同：0
> 
> 时间：2012-04-20T21:48:22.463
> 
> 标签：c#, .net, wpf, web-config, wcf-ria-services

我刚刚更新了我的 WPF 客户端对 RIA 服务的引用，并且不知何故无法进入调试 RIA 服务方法。

所以我不能去 RIA 服务断点...

我已选择两个项目在解决方案中进行调试...

似乎 Visual Studio 在 web.config 下改变了一些东西......

任何线索家伙为什么会这样？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T19:31:56.663

只需确保您已包含所有要调试的项目并且它们具有正确的顺序。

IE 先启动 DLL，然后再启动 EXE。

# asp.net - 如何将 asp.net 授权 cookie 添加到标头请求？

> ID：10254013
> 
> 赞同：0
> 
> 时间：2012-04-20T21:48:40.807
> 
> 标签：asp.net, asp.net-mvc-3, session-cookies, asp.net-authentication

有人可以告诉我如何将 asp.net cookie 授权添加到请求标头（通过 MVC3）吗？

曲奇饼：

```
Cookie: __RequestVerificationToken_Lw__=8+WZPGAaKtgkIPfbBovP1ZRP2qQKE3u67ueltnzcoCPH0nN1tUHdtgUorjlweUvn+zTJhkFeRuMShCOrbyHR5Xi3DOL4HCspXuVEOsWIr4Ape+l5MYPiFsQ6Lnw8LstqNjceWW9EaV24eA0mVxq2xTG18h/INNKLB8cRUiEn9DI=; .ASPXAUTH=C64A69436A8FC4A6DF5BC222982030C3CCF9E43FBCE335A47173236B4BA4B1CE762CBE6C9E9FDBB035D46C8F36228A61117F22DD55CF787D5E23A728F68B49DDF1A5D70FF3D33C8D16B06FC81894201E86DF93754B6021C9031CB4FBC5236DED952FB7244CE3217B659325A0614763B2E123002E5291EE8D8CEA7B2D7441F3EBB8176A71CDD6FEF3E545CDF46858174451D38890861664A55AF681A36C0B7CF1 
```

实际请求的片段：

```
Accept: text/*
Content-Type: multipart/form-data; boundary=----------KM7Ij5Ij5ei4gL6KM7ae0cH2Ef1ae0
User-Agent: Shockwave Flash
Host: localhost:82
Content-Length: 36874
Connection: Keep-Alive
Pragma: no-cache
Cookie: __RequestVerificationToken_Lw__=8+WZPGAaKtgkIPfbBovP1ZRP2qQKE3u67ueltnzcoCPH0nN1tUHdtgUorjlweUvn+zTJhkFeRuMShCOrbyHR5Xi3DOL4HCspXuVEOsWIr4Ape+l5MYPiFsQ6Lnw8LstqNjceWW9EaV24eA0mVxq2xTG18h/INNKLB8cRUiEn9DI=; .ASPXAUTH=C64A69436A8FC4A6DF5BC222982030C3CCF9E43FBCE335A47173236B4BA4B1CE762CBE6C9E9FDBB035D46C8F36228A61117F22DD55CF787D5E23A728F68B49DDF1A5D70FF3D33C8D16B06FC81894201E86DF93754B6021C9031CB4FBC5236DED952FB7244CE3217B659325A0614763B2E123002E5291EE8D8CEA7B2D7441F3EBB8176A71CDD6FEF3E545CDF46858174451D38890861664A55AF681A36C0B7CF1

------------KM7Ij5Ij5ei4gL6KM7ae0cH2Ef1ae0
<more stuff here...> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:54:37.887

你没有。设置 cookie 时，会在每个请求中自动提供 cookie。

您使用 FormsAuthentication 类设置 cookie。通常，这看起来像这样：

```
 FormsAuthentication.SetAuthCookie(model.UserName, false /*createPersistentCookie*/); 
```

# javascript - GWT FileUpload - 通过客户端代码设置响应 Content-Type

> ID：10254016
> 
> 赞同：1
> 
> 时间：2012-04-20T21:48:56.417
> 
> 标签：javascript, gwt, dom-events, gwt-rpc, asyncfileupload

我在 GWT 中有一个文件上传表单，上传过程正常。不过，我在得到回复时遇到了问题。响应捕获代码是：

```
formUpload.addSubmitCompleteHandler(new FormPanel.SubmitCompleteHandler() {
    @Override
    public void onSubmitComplete(final SubmitCompleteEvent event) {
        fileUploadControl.handleResponse(htmlToText(event.getResults()));
    }
}); 
```

总是`event.getResults()`导致. `null`经过调查，我发现响应`Content-Type`应该是`text/html`or之一`text/plain`。就我而言，它是`application/xml`，我也无法控制服务器响应。

我想知道是否可以`Accept`在文件上传表单中设置请求标头。如果不可能，任何其他建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T06:49:02.317

> 请参阅文档[SubmitCompleteEvent#getResults](http://google-web-toolkit.googlecode.com/svn/javadoc/1.6/com/google/gwt/user/client/ui/FormPanel.SubmitCompleteEvent.html#getResults%28%29)
> 
> `public java.lang.String getResults()`获取表单提交的结果文本。
> **返回：**
> 结果 html，如果读取时出错，则返回 null
> **提示：**
> 结果 html 可能由于将表单提交到不同的域而为 null。

如果它正常工作，则可能域不同。

# jquery - jquery html不添加整个字符串

> ID：10254017
> 
> 赞同：1
> 
> 时间：2012-04-20T21:49:00.477
> 
> 标签：jquery, html

我发现 jquery 的 html 函数有一个奇怪的行为。

我有以下代码片段。

**HTML**

```
<div id='content'></div>​ 
```

**Javascript**

```
var test2 = "<h5>test(S)</h5><span class='small_text>Apr 20, 2012 @ 07:00PM<br />Section 102 Row G Seat 14-14<br />";

$(document).ready(function(){

    $("#content").html(test2);

});​ 
```

当我运行代码时，它只能看到'test（S）'。看起来 jquery 忽略了字符串的其余部分。

我创建了一个jsfiddle。

[http://jsfiddle.net/E3X33/](http://jsfiddle.net/E3X33/)

我使用不正确吗？还是有无证的东西...？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T21:50:06.547

你没有关闭`<span>`标签，加上`class`属性的关闭引号

应该：

```
var test2 = "<h5>test(S)</h5><span class='small_text'>Apr 20, 2012 @ 07:00PM<br />Section 102 Row G Seat 14-14<br /></span>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T21:51:49.833

是和不是。您的 jQuery 语法是正确的，但您的 HTML 不正确。

试试这个：

```
<h5>test(S)<\/h5><span class='small_text'>Apr 20, 2012 @ 07:00PM<br \/>Section 102 Row G Seat 14-14<br \/><\/span> 
```

您需要：

1.  关闭 span 标签上的 class 属性。
2.  关闭 span 标签本身。
3.  在不良浏览器中转义正斜杠以确保安全。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T21:51:52.007

尝试关闭`span`标签并关闭`'`span 类：

```
var test2 = "<h5>test(S)</h5><span class='small_text'>Apr 20, 2012 @ 07:00PM<br />Section 102 Row G Seat 14-14<br /></span>"; 
```

*   [**演示**](http://jsfiddle.net/paislee/waPVp/)

# linux - Xen 配置仅主机适配器

> ID：10254020
> 
> 赞同：0
> 
> 时间：2012-04-20T21:49:21.130
> 
> 标签：linux, centos, virtualization, xen

Xen hypervisor 有两种网络配置模式，正如我在 Virtual Manager 中看到的那样。1 NAT 2 路由。两者都要求 IP 子网。但是，我想配置一个可以分配任何 IP 而不是由 Xen 的 DHCP 分配的网络。

我使用了 oracle Virtual Box，有一个选项可以使用 Host-only 适配器。我想以这种方式使用 Xen。

换句话说，我想将物理网络接口共享给来宾机器（VM）

我在 CentOS 6.2 x86_64 上使用 Xen Hypervisor 3.x

我做了以下工作来解决这个对我有用的问题。

```
Disabling Xen's network scripts
If using Xen it is recommended to disable its network munging by editing /etc/xen/xend-config.sxp and changing the line
(network-script network-bridge)

To be

(network-script /bin/true)

Disabling NetworkManager

As of the time of writing (Fedora 12), NetworkManager still does not support bridging, so it is necessary to use "classic" network initscripts for the bridge, and to explicitly mark them as independent from NetworkManager (the "NM_CONTROLLED=no" lines in the scripts below).

If desired, you can also completely disable the NetworkManager:

# chkconfig NetworkManager off
# chkconfig network on
# service NetworkManager stop
# service network start

Creating network initscripts

In the /etc/sysconfig/network-scripts directory it is neccessary to create 2 config files. The first (ifcfg-eth0) defines your physical network interface, and says that it will be part of a bridge:

# cat > ifcfg-eth0 <<EOF
DEVICE=eth0
HWADDR=00:16:76:D6:C9:45
ONBOOT=yes
BRIDGE=br0
NM_CONTROLLED=no
EOF

Obviously change the HWADDR to match your actual NIC's address. You may also wish to configure the device's MTU here using e.g. MTU=9000.

The second config file (ifcfg-br0) defines the bridge device:

# cat > ifcfg-br0 <<EOF
DEVICE=br0
TYPE=Bridge
BOOTPROTO=dhcp
ONBOOT=yes
DELAY=0
NM_CONTROLLED=no
EOF

WARNING: The line TYPE=Bridge is case-sensitive - it must have uppercase 'B' and lower case 'ridge'

After changing this restart networking (or simply reboot)

# service network restart 
```

[访问了解更多详情](http://wiki.libvirt.org/page/Networking#Fedora.2FRHEL_Bridging)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T22:08:32.023

对于 Xen，这只是桥接网络的一个特例。

您在 CentOS Dom0 上创建一个虚拟桥接器，然后将您的 VM 连接到该桥接器。

来自 CentOS 文档 (http://www.centos.org/docs/5/html/5.2/Virtualization/sect-Virtualization-Virtualized_network_devices-Laptop_network_configuration.html)

创建一个 dummy0 网络接口并为其分配一个静态 IP 地址。

在我们的示例中，我选择了 10.1.1.1 以避免在我们的环境中出现路由问题。要启用虚拟设备支持，请将以下行添加到 /etc/modprobe.conf

```
alias dummy0 dummy
options dummy numdummies=1 
```

为 dummy0 配置网络编辑/创建 /etc/sysconfig/network-scripts/ifcfg-dummy0：

```
DEVICE=dummy0
BOOTPROTO=none
ONBOOT=yes
USERCTL=no
IPV6INIT=no
PEERDNS=yes
TYPE=Ethernet
NETMASK=255.255.255.0
IPADDR=10.1.1.1
ARP=yes 
```

然后，您可以将您的 VM 连接到 dummy0 桥接设备

附加参考 [http://wiki.xen.org/wiki/HostConfiguration/Networking](http://wiki.xen.org/wiki/HostConfiguration/Networking)

# colors - 像 Krita 一样实现 Kubelka-Munk 来像油漆一样混合颜色（颜色）

> ID：10254022
> 
> 赞同：5
> 
> 时间：2012-04-20T21:49:41.730
> 
> 标签：colors

有谁知道在哪里可以找到或实现[Kubelka-Munk 函数](http://web.archive.org/web/20080915110533/http://www.chemistry.nmsu.edu:80/studntres/chem435/Manuals/Cary_100/Cary_100_app_maths/source/app_maths/mt_kubelka_munk_function.htm)来混合颜色，如天然颜料？[Emanuelle Tamponi 在](http://www.youtube.com/watch?v=lyLPZDVdQiQ)开源项目 Krita 中实现了此功能，但我找不到任何地方可以共享此功能或类似方法以“自然”混合颜色。它可能是商业敏感或私人的，但如果你不问你就不会发现！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T06:18:58.080

随意重用我们在 krita 中的代码。它在 calligra/krita/plugins/extensions/painterlyframework 中。它确实需要颜料库作为备份，但我想你可以轻松地从中抽象出来。

但是请注意，代码是在 GPLv2+ 许可下的。如果您重用代码或光源文件，您的代码也需要是 GPL。

（有关更多信息，请联系我 -- boud@valdyas.org 或 boud 在 irc.freenode.net 上的#krita，我是 Krita 的维护者）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T19:19:52.993

这是我创建的一个使用简化的 Kubelka-Munk 模型的实现。它假设所有颜色在混合时具有相同的浓度，并且所有颜色都是不透明的。如果它有用，请随意以您希望的任何方式使用它。

[https://github.com/benjholla/ColorMixer](https://github.com/benjholla/ColorMixer)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-04-30T12:20:46.043

仅 RGB 值提供的信息不足以执行真正的 Kubelka-Munk 计算，因为您需要整个可见光谱的吸光度和散射曲线。相反，您可以从 RGB 值生成*具有代表性*的反射率曲线，然后使用反射率信息执行减法混合，例如，通过计算两条反射率曲线的加权几何平均值。

# windows - 用于在 Windows 上运行的 NoSql DB 的 Erlang API

> ID：10254031
> 
> 赞同：2
> 
> 时间：2012-04-20T21:50:43.187
> 
> 标签：windows, api, erlang, couchdb, berkeley-db

我正在运行 Windows，我想从 Erlang 程序控制 NoSql DB（Berkeley 或 CouchDB）。

有人做过吗？我真的找不到任何例子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:34:24.363

CouchDB 是通过 HTTP（特别是 REST）控制的，因此不仅您运行的是 Windows 无关紧要，而且运行 Erlang 也无关紧要。从 Erlang 向 CouchDB 发出 HTTP 请求不需要特殊的工具或驱动程序。CouchDB 文档非常清楚如何通过 REST 与 CouchDB 交互。

如果你想通过 Erlang 消息进行交流，请查看 couchbeam：[https](https://github.com/benoitc/couchbeam) ://github.com/benoitc/couchbeam 。您可能知道，CouchDB 是用 Erlang 编写的，因此您可以通过向其发送 Erlang 消息与它进行交互。

# mysql - 什么关系数据库管理系统 RDBMS 用于带有 unixODBC 的 Linux Web 服务器上的小型只读数据库？

> ID：10254039
> 
> 赞同：-1
> 
> 时间：2012-04-20T21:51:03.510
> 
> 标签：mysql, sqlite, webserver, rdbms, unixodbc

什么可以被认为是 Web 应用程序查询位于 Web 服务器主机上的数据库表的最佳 RDBMS，它安装了带有 unixODBC 的 linux 操作系统？数据库表很小，只需要只读访问。

SQLite3 或 mySQL 或其他什么？

我倾向于 SQLite3，但它成熟了吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T21:52:06.170

SQLite 非常成熟。它包含在主要应用程序中，包括 Firefox、Android、Adobe Integrated Mountie、Python、Mac OS 和 Skype。

我认为它非常适合小型只读数据库。

# haskell - 使用多参数成员实例化数据类型

> ID：10254041
> 
> 赞同：1
> 
> 时间：2012-04-20T21:51:17.980
> 
> 标签：haskell, types, record

我定义了以下数据类型，它应提供 2 个功能：

```
data Problem = Prob { result :: State -> Action -> State
                    , stepCost :: State -> Action -> Integer
                    } 
```

如何实例化这种类型？我试过这个：

```
let mcp = Prob { result _ _ = (False, (1,1)), stepCost _ _ = 1 } in True 
```

但是我得到：错误 - 表达式中的语法错误（意外的`_'）

我设法实例化了一个类似的数据类型，但它的成员只接受 1 个参数：

```
data Lala = La  { omg :: State
                , gee :: Integer
                }

let mcp = La { omg = (False, (1,1)), gee = 1 } in True 
```

返回真。

但关键是我想用其特定的结果和 stepcost 函数来实例化数据类型 Problem 。当然，这些函数取决于它们的参数。那么我怎样才能向他们传递一些论点呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T21:56:58.167

你需要例如 lambda 表达式，

```
let mcp = Prob { result =\ _ _ -> (False, (1,1)), stepCost =\ _ _ -> 1 } in True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T21:57:16.047

您需要使用 lambda 表达式对其进行实例化；您不能将其视为直接带参数的名称。

```
let mcp = Prob { result = \_ _ -> (False, (1,1)), stepCost = \_ _ -> 1 } in True 
```

# php - PHP没有从Javascript Jquery获取信息

> ID：10254047
> 
> 赞同：0
> 
> 时间：2012-04-20T21:51:50.650
> 
> 标签：php, javascript, jquery, same-origin-policy

我有一个 javascript 页面，应该将用户输入的用户名发送到服务器上的 php 脚本。javascript 页面来自[http://192.168.1.4/login.html](http://192.168.1.4/login.html)，它尝试访问[http://192.168.1.4/GetInfo.php](http://192.168.1.4/GetInfo.php)的 php 脚本。我认为我无法从 javascript 页面访问 php 脚本中的用户名，因为 firefox 中的相同来源策略但是，我不确定如何确认这种怀疑，所以如果我错了，请原谅我。我才刚刚开始学习 javscript 和 php。我想知道当时是否有不同的方式来传递这些信息。代码如下。谢谢！

的JavaScript：

```
<html>
    <head>
        <title>Login Page for SplitAuth</title>
    </head>
    <script language="javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.js"></script>
    <script language="Javascript">
        function getUsername()
        {
            var username = window.prompt('Please Type Your Username');
            var temp = document.getElementById('temp');
            temp.innerHTML = username;
            jQuery.ajax(
                {
                    type: "POST",
                    url:"GetInfo.php",
                    data: username,
                    success: function(msg)
                            {alert("data Saved: "+msg);}

                });//ends the jQuery send

        }//ends the GetUsername function
    </script>
    <body onLoad=getUsername()>
        <div id="temp">This will show text</div>
    <body>

</html> 
```

php脚本：

```
<?
$inFile="MyID.config.php";
$handle=fopen($inFile, 'r') or die ("No credentials could be gotten because the file MyID.config.php would not open.");

echo $_POST['msg'];

fclose($fh);

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T21:55:55.603

你应该在你的前面加上`data:`“msg =”。

```
...
data: "msg="+username,
... 
```

原因是`jQuery.ajax`需要一个查询字符串或一个对象，这意味着

```
...
data: {msg: username},
... 
```

也可以。

查看[jQuery.ajax 文档](http://api.jquery.com/jQuery.ajax/)。特别是`data`-section

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T21:57:59.353

您正在使用 POST 方法并且您发送的数据是错误的。您需要构建要发送的数据。看看 ajax 方法中的 jquery 页面。这就是它对数据属性的说法。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅 processData 选项以防止此自动处理。对象必须是键/值对。如果 value**是一个 Array**，jQuery 根据传统设置的值（如下所述）序列化具有相同键的多个值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T22:24:06.620

您的脚本应如下所示。

```
 $.ajax({
  type: "POST",
  url: "GetInfo.php",
  data: "{name:"+ username + "}"
  }).done(function( msg ) {
 alert( "Data Saved: " + msg );
 }); 
```

并且您的 php 脚本没有获取用户名值。$_POST['msg'] 中使用的“msg”不会发出任何警报，因为它没有任何价值。“msg”变量用于将返回值的值存储到您的 html 页面。我会建议你从 www.jquery.com 阅读更多内容

# iphone - iPhone 4S - BLE 数据传输速度

> ID：10254048
> 
> 赞同：8
> 
> 时间：2012-04-20T21:51:51.660
> 
> 标签：iphone, ios5, core-bluetooth, bluetooth-lowenergy

我最近一直在修补 BLE（低功耗蓝牙）连接类，但它的数据传输速度不能超过 1KB / 5 秒。我相信，在文档中，它说最大速度是每 20 毫秒 60 字节。通过数据传输和每组数据包后的 Ack 传输计数，我相信我们应该能够达到每秒 1.5KB 的速度。所以我的代码比它应该慢了大约 7-8 倍。

我只是想知道是否有人能够像文档所说的那样快速地在 BLE 中进行数据传输。如果比我的快，你会得到什么样的速度？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T08:06:20.057

请参阅苹果的指南，您会看到需要连接更新请求来加快连接速度。

[https://developer.apple.com/hardwaredrivers/BluetoothDesignGuidelines.pdf](https://developer.apple.com/hardwaredrivers/BluetoothDesignGuidelines.pdf)

我有 min=20ms max 40 ms

我希望我能帮上忙

罗马

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-16T00:03:52.527

如果您能够使用更高的 MTU 大小（由 iOS 协商），那么您将能够更多地增加带宽，因为有一个 4 字节的 L2CAP 标头和一个 3 字节的 ATT 标头不会被传输超过一包。

如果您能够在连接间隔内传输 6 个数据包，那么您将能够在每个连接间隔额外输入 35 个字节（第一个数据包的 7 字节标头仍然存在） MTU 大小也可以拆分为多个连接间隔，增加 7 个字节 pr 连接间隔的吞吐量。（只是需要更长的时间来重新组装数据包。）ATT允许的最大MTU大小为515字节（att的最大大小为512字节+操作码的3字节头+句柄）

# r - R帮助：确定间隔，对数字进行分箱

> ID：10254059
> 
> 赞同：2
> 
> 时间：2012-04-20T21:52:35.743
> 
> 标签：r, for-loop, if-statement, intervals, binning

我正在尝试将一些随机生成的数字“合并”在我之前拥有的值向量中的相邻值之间定义的间隔之间。所以基本上，我有以下几点：

`vectorA`包含从 101 到 0 的 101 个值。我生成一个名为 x 的随机数。现在我想看看在vectorA中相邻的两个数字之间的哪个区间它属于哪个区间？最后，一旦找到区间，我就会返回这两个值。

我有一个 if 语句；`if (x < vectorA[k] | x > vectorA[k+1])`，在for循环下，因此if语句可以遍历vectorA的所有增量。

我想远离 R 的休息方法，因为我需要获取实际的 bin 间隔值并使用它们来计算一些东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T22:27:33.857

正如本指出的，`findInterval`是你的朋友。

`vectorA`但是必须按升序排序。

```
findRange <- function(x, v) {
  i <- findInterval(x, v)
  list(from=i, to=i+1L)
}

v <- seq(1, 100, 10) # Must be sorted in ascending order!
x <- runif(10, 1, 100)
findRange(x, v) 
```

如果您的 vectorA 从高到低排序，则必须将其反转并修改索引：

```
iRev <- findInterval(x, rev(vectorA))
iLow <- length(vectorA) - iRev
iHigh <- iLow + 1L 
```

# php - 如何在 javascript 中调用 $_SESSION

> ID：10254064
> 
> 赞同：1
> 
> 时间：2012-04-20T21:52:54.490
> 
> 标签：php, javascript, jquery, ajax

我有两个单独的页面，一个页面是上传文件的地方，另一个页面显示信息。

在 imageupload.php 页面中，我在下面有这个会话：

```
$_SESSION['fileImage']['name'] = $_FILES['fileImage']['name']; 
```

我还有一个 javascript 函数，它回调 javascript 函数：

```
<script language="javascript" type="text/javascript">window.top.stopImageUpload();</script> 
```

现在在一个单独的页面（QandATable.php）上，我有一个 javascript 函数，但我的问题是如何在 javascript 函数中调用上面的 $_SESSION 代码，以便将其附加到 $('.list')？

下面是javascript函数：

```
 function stopImageUpload(success){

var result = '';
if (success == 1){
result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';
$('.listImage').append('<br/>');
          }
else {
result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
          }

return true;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T21:57:37.647

你不能，因为 $_SESSION 是一个服务器端变量，但你可以通过它来访问它。

**对于整个会话变量**

```
<script type="text/javascript" >
  var session = <?php echo json_encode($_SESSION); ?>;
</script> 
```

**对于会话中的特定变量。**

```
<script type="text/javascript" >
  var session_var = <?php echo json_encode($_SESSION['VAR_NAME']); ?>;
</script> 
```

现在你有了带有该信息的名为 session 的 js 变量。然而，在大多数情况下，将所有这些信息输出到公共页面是不可取的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T21:57:57.663

会话变量存储在服务器上。JavaScript 在客户端执行，因此它对服务器端一无所知。它只知道你传递给它的东西。

要将变量传递给 javascript，请使用 ajax 请求，或者简单地输出值：

```
<script>
var sesionValue = <?=json_encode($_SESSION['value']);?>;
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:07:40.943

您应该考虑使用 JQuery，因为它使这些类似 AJAX 的任务变得更加容易。

请参阅我今天刚刚编写的函数，以执行与您所要求的类似的操作。

这需要一些 PHP 输出（在`success`调用的部分中返回`ajax()`。它采用 JSON 格式，与 PHP 和 JavaScript 兼容（JSON：JavaScript Object Notation）。

```
function viewClientDetails(id) {
    var clientParams;
    clientParams.clientID = id;
    $.ajax({
        url: BASE_URL + '/clients/get-client-details.php',
        type: 'POST',
        data: clientParams,
        dataType: 'JSON',
        success: function(myClient) {
            var name = myClient.name;

            $('td#name').html(name);

        },
        error: function(e) {
            console.log(e.responseText);
        }
    })
} 
```

在我的 PHP 文件（称为`/clients/get-client-details.php`）中，我有这样的内容：

```
<?php
...
$myClient = array('name' => 'Mr Foobar');
print json_encode($myClient);

?> 
```

这只是将我的 PHP 对象写入 JSON 格式。

在上面的*JS*代码中，代码将部分 JSON 数据插入到一个 HTML table-data 元素中，该元素的 CSS 选择器 ID 为`#name`，代码如下：`$('td#name').html(name);`

抱歉，如果这让你更加困惑，我想我会展示一个你可以尝试一段时间的例子..

这可能会对你有所帮助......继续尝试，你会到达那里:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T21:57:51.033

你不能。`$_SESSION`是一个 PHP 变量，并且该代码在服务器端运行。

您需要将该值作为 Javascript 变量存储在 PHP 文件的输出中，然后在 Javascript 中访问该变量。

# android - 来自包含 MapView 的 RelativeLayout 视图的 Android 低质量位图

> ID：10254066
> 
> 赞同：2
> 
> 时间：2012-04-20T21:53:46.847
> 
> 标签：android, view, bitmap, screenshot, android-relativelayout

我正在从一个相对布局生成一个位图，其中包含来自 MapView 设置为背景的另一个位图以及右上角的两个其他视图（图标和文本）。我得到了我想要的图像，但它的质量很低。我搜索了高低，发现很多关于将视图转换为位图的页面，但没有关于质量的内容。我猜这可能与缩放有关。

输出图像：

![输出图像质量低](../Images/fe68085704152c4cc05544927a5fc269.png)

编码：

```
public Bitmap getBitmapFromMapView() {
    // Get Bitmap from MapView
    Bitmap mapBitmap = Bitmap.createBitmap(mMapView.getWidth(), mMapView.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas mapCanvas = new Canvas(mapBitmap);
    mMapView.draw(mapCanvas);

    // Inflate RelativeLayout view containing ImageView (FlagIt icon) and TextView (URL) in bottom-right corner
    // and merge it with the MapView Bitmap to produce an Overall Bitmap containing everything
    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    RelativeLayout overallRelativeLayout = (RelativeLayout) inflater.inflate(R.layout.screenshot, null);
    overallRelativeLayout.setBackgroundDrawable(new BitmapDrawable(mapBitmap));

    overallRelativeLayout.measure(
            MeasureSpec.makeMeasureSpec(mMapView.getWidth(), MeasureSpec.EXACTLY),
            MeasureSpec.makeMeasureSpec(mMapView.getHeight(), MeasureSpec.EXACTLY));
    overallRelativeLayout.layout(0, 0, overallRelativeLayout.getMeasuredWidth(), overallRelativeLayout.getMeasuredHeight());

    Bitmap overallBitmap = Bitmap.createBitmap(mMapView.getWidth(), mMapView.getHeight(), Bitmap.Config.ARGB_8888);
    Canvas overallCanvas = new Canvas(overallBitmap);
    overallRelativeLayout.draw(overallCanvas);

    return overallBitmap;
} 
```

和膨胀的 screenshot.xml XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" >

    <TextView
        android:id="@+id/screenshot_corner_text"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="4dip"
        android:layout_marginRight="4dip"
        android:shadowColor="#000000"
        android:shadowDx="0.0"
        android:shadowDy="0.0"
        android:shadowRadius="4"
        android:text="http://www.aroha.ws"
        android:textColor="#ff0000"
        android:textSize="18sp"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/screenshot_corner_icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_above="@id/screenshot_corner_text"
        android:layout_alignParentRight="true"
        android:layout_marginBottom="4dip"
        android:layout_marginRight="4dip"
        android:src="@drawable/corner_title_icon" />

</RelativeLayout> 
```

在我的屏幕上显示的 RelativeLayout 看起来质量更好：

[输出图像所需质量 http://5312208804164438257-a-1802744773732722657-s-sites.googlegroups.com/site/arohacorp/pilcrowpipeblog/device-2012-04-20-224931.png](http://5312208804164438257-a-1802744773732722657-s-sites.googlegroups.com/site/arohacorp/pilcrowpipeblog/device-2012-04-20-224931.png)

# android - s:Rotate3D 以恒定的旋转速度

> ID：10254067
> 
> 赞同：0
> 
> 时间：2012-04-20T21:53:47.997
> 
> 标签：android, apache-flex, flash-builder

我是 Flex 和 Flash Builder 的新手，很抱歉提出愚蠢的问题 :)。

我想做的是一个Android应用程序。时钟，图像每 20 分钟旋转一次。

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" title="HomeView">
    <fx:Declarations>
        <s:Rotate3D 
            id="rotateEffect"
            target="{clock}"
            angleZFrom="0"
            angleZTo="360"
            repeatCount="999999999"
            duration="1200000"
            autoCenterTransform="true"
            />
    </fx:Declarations>
    <s:actionContent>
        <s:Button click="NativeApplication.nativeApplication.exit()" icon="assets/appi_11.png"
                  styleName="title"/>
    </s:actionContent>
    <s:Image id="clock" horizontalCenter="0" source="assets/rotateMe.png" verticalCenter="0" click="rotateEffect.play()"/>
</s:View> 
```

问题是，存在某种缓动行为，并且旋转速度不是恒定的。

有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:03:38.653

我不太了解 Flex 或 Flash Builder 的特殊性。听起来动画不是“实时”播放的，这取决于系统如何处理它。通常，您希望根据当前（系统）时间和开始时间（保存在变量中）之间的时间差来旋转时钟（臂）。因此，时钟将独立于系统更新画布的频率正常运行。

# ruby - 正则表达式：匹配不是“=”的分词

> ID：10254068
> 
> 赞同：0
> 
> 时间：2012-04-20T21:54:10.133
> 
> 标签：ruby, regex

一个如何匹配所有`\b`不是“=”的？

```
"igloo".match(...) # => `igloo`
"igloo=".match(...) # => `nil` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T21:59:56.740

首先，`\b`不匹配'='；它匹配 '=' 和其他东西之间的边界。要仅在边界的另一侧不是“=”时匹配，请使用负前瞻：

```
 rx = /igloo\b(?!=)/

 "igloo".match(rx) => #<MatchData "igloo">
 "igloo=".match(rx) => nil 
```

这就是说“匹配一个 \b 边界，但仅当后面没有'='时”。

# android - Android 应用程序中的 NTLM 身份验证

> ID：10254072
> 
> 赞同：3
> 
> 时间：2012-04-20T21:54:39.633
> 
> 标签：android, authentication, ntlm

我正在使用此处找到的 JCIFS 库[在](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)我的 android 应用程序中使用 NTLM 身份验证。该应用程序在访问站点并解析 xml 时运行良好，但现在我添加了 NTLM 身份验证，它似乎无法正常工作。任何人都可以从这段代码中判断出问题出在 httpclient 和 inputstream 之间吗？

```
DefaultHttpClient client = new DefaultHttpClient();
client.getAuthSchemes().register("ntlm", new NTLMSchemeFactory());
client.getCredentialsProvider().setCredentials(new AuthScope("http://www.musowls.org",80),
new NTCredentials(username, password, null, "musschool"));  
HttpGet request = new HttpGet("http://www.musowls.org/assignments/assignmentsbystudentxml.aspx");
 HttpResponse resp = client.execute(request);
 HttpEntity entity = resp.getEntity();
 InputStream inputStream = entity.getContent(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-15T13:07:36.230

试试下面的代码，它可能对你有帮助。

```
DefaultHttpClient httpclient = new DefaultHttpClient();
httpclient.getAuthSchemes().register("ntlm", new NTLMSchemeFactory());

NTCredentials creds = new NTCredentials("user_name", "password", "", "http://www.musowls.org/");

httpclient.getCredentialsProvider().setCredentials(AuthScope.ANY, creds);
HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 5000);

HttpPost httppost = new HttpPost("http://www.musowls.org/assignments/assignmentsbystudentxml.aspx");
httppost.getParams().setBooleanParameter(CoreProtocolPNames.USE_EXPECT_CONTINUE, false);
HttpResponse response = httpclient.execute(httppost); // ERROR HAPPENS HERE

responseXML = EntityUtils.toString(response.getEntity());
Log.d("Responce", responseXML); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T00:19:26.230

1) 从这里下载 JCIFS：http: [//jcifs.samba.org/](http://jcifs.samba.org/)

2）按照这里的说明：http: [//hc.apache.org/httpcomponents-client-ga/ntlm.html](http://hc.apache.org/httpcomponents-client-ga/ntlm.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-02T20:31:15.920

卡在这个问题上太久了。

查看此线程中的答案以使用 OkHttp3 进行 NTLM Authenticated 调用：

[https://stackoverflow.com/a/42114591/3708094](https://stackoverflow.com/a/42114591/3708094)

# iphone - 将 UIImage 传递给另一个视图控制器

> ID：10254073
> 
> 赞同：0
> 
> 时间：2012-04-20T21:54:51.363
> 
> 标签：iphone, objective-c, memory-management, memory-leaks

我的应用程序拍摄多张照片并将它们保存到磁盘。我这样做是为了打开我的第二个视图控制器并再次加载所有图像以管理它们（删除、保存、共享）。我想缩短并将图像从一个视图控制器传递到另一个视图控制器而不保存它们，但是以这样一种方式，应用程序不会在内存中存储多达 10 个图像时崩溃。

如何实现？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T21:59:38.683

如果图像是这样的，它们都可以同时放入内存，你可以将`UImage*`一个 ViewController 传递给另一个。如果它们不能同时适合，那么您将仅限于传递适合内存的那些 - 其他将必须通过磁盘“传递”。

# android - 在android中实现视觉反馈/忙碌指示器的最简单方法

> ID：10254076
> 
> 赞同：2
> 
> 时间：2012-04-20T21:55:04.750
> 
> 标签：android

我正在创建一个应用程序，该应用程序`MainActivity`可以从其数据库中计算报告以显示在`ReportActivity`. 所有报告计算都在`ReportActivity.onCreate()`.

当用户单击 MainActivity-s 菜单“生成报告”时，菜单保持打开状态 2 秒，直到 `ReportActivity.onCreate()`完成并且报告变得可见。

给用户一些视觉反馈的最简单方法是什么？

我已经找到了[ProgressDialog onCreate](https://stackoverflow.com/questions/3122465/progressdialog-oncreate)，它在 AsyncTask 中进行所有计算时显示了一个进度对话框。

我想知道是否有一些更简单的方法可以为用户提供一些视觉反馈，即菜单已成功单击并且设备没有崩溃。

在 ms windows 中，我会使用等待光标（沙漏）

我已经尝试在 ReportActivity 的 oncreate 中打开 ProgressDialog()

```
 final ProgressDialog progressDialog = ProgressDialog.show(this, "MY Dialog", "Please wait..."); 
```

但它根本没有显示。

**更新**最终解决方案：

正如答案所建议的那样，我根据[此代码示例为遵循](http://www.codeofaninja.com/2011/10/android-download-file-with-progress-bar.html)[本教程](https://stackoverflow.com/questions/3028306/download-a-file-with-android-and-showing-the-progress-in-a-progressdialog/3028660)的处理实现了 AsyncTask

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:04:42.317

您需要将长时间运行的代码移动到后台线程中。UI 线程上长时间运行的代码会锁定 UI，从而导致用户认为应用程序已冻结/崩溃。研究使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html). 这使您可以在后台线程上运行进程并提供视觉反馈，让用户知道您的应用程序正在运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:42:48.290

使用条形或圆形活动指示器。来自[官方设计指南](http://developer.android.com/design/building-blocks/progress.html)：

> 活动指标用于不确定长度的操作。他们要求用户稍等片刻，而不会详细了解幕后发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:05:40.067

使用 ProgressDialog 设计布局。使用 setContentView(Progressdialog)。计数 2-4 秒（您选择）再次在 setContentView 中设置您的旧布局。为什么不使用 AsyncTask？

# php - 如何验证“php://input”是否设置且不为空

> ID：10254078
> 
> 赞同：2
> 
> 时间：2012-04-20T21:55:11.227
> 
> 标签：php, xmlhttprequest

如何验证用户是否使用 XMLHttpRequest 向 PHP 发布了一些数据？

这是最好的方法吗？如果没有，我该怎么做？

我有以下代码

```
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest') {
    // PROBABLY AJAX REQUEST
} 
```

我的问题是，我如何验证`php://input`存在且不为空？我认为以下代码可以完成工作，但需要知道这是否是正确的方法：

```
if(file_get_contents("php://input") == '') {
    // HAVE NOT POSTED
} else {
    // POSTED
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T22:00:25.200

将自定义标头设置为 AJAX 函数的一部分，并检查服务器端代码中是否存在该标头。

也许最好的方法是在服务器端生成一个密钥，将它传递给包含 AJAX 调用的客户端代码，然后让 AJAX 将它发送回服务器并验证它是一个有效的密钥。这是防止有人伪造 AJAX 请求的最有效方法。

* * *

要检查`php://input`存在且不为空，请使用以下命令：

```
$phpinput = file_get_contents("php://input");
// From the docs: "Note: A stream opened with php://input can only be read once"
if( !$phpinput) {
    // phpinput is empty
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T21:57:24.393

您不能 100% 保证能够确定是否使用`XMLHttpRequest`. 您可以检查`_SERVER['HTTP_X_REQUESTED_WITH']`，但不保证在您需要时设置或不设置时不设置。不过，你可以试一试。

# php - 检查tel URI是否链接

> ID：10254080
> 
> 赞同：1
> 
> 时间：2012-04-20T21:55:23.893
> 
> 标签：php, javascript, uri, tel

有没有办法找出 tel URI 是否在浏览器中链接？通常访问者会收到一条错误消息，我想避免它。无论是通过 JS 还是 PHP 完成都没有关系。

谢谢你。

# stata - 在Stata中产生年度观察之间的百分比变化？

> ID：10254082
> 
> 赞同：4
> 
> 时间：2012-04-20T21:55:37.787
> 
> 标签：stata

如何使用`gen`or`egen`命令在 Stata 中生成不同年份的观测值之间的百分比变化？例如，我有 1990 到 2010 年的观察结果，每个观察值都有不同的支出值，我试图生成一个新的观察值，其中包含 1990-1991、1991-1992 等期间的百分比变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T14:33:42.233

// 这是另一个衡量增长的示例：

```
clear
set obs 100
gen year = _n + 1959
gen expenditure = _n^(1/3) + runiform()
line expenditure year, yti("Synthetic data example") 
```

//[来自国家主义者](http://www.stata.com/statalist/archive/2008-10/msg00648.html)：

```
bys year: g expendituregrowth=100*(expenditure[_n]-expenditure[_n-1])/expenditure[_n-1] 
```

// 还：

```
gen expenditure_gr = (expenditure/expenditure[_n-1] - 1)*100 // growth rate for expenditure
gen expenditure_bl = 100*expenditure/expenditure[1] // baseline growth rate for expenditure; base 100 = 1960

line expenditure_gr year, yti("Growth rate")
line expenditure_bl year, yti("Growth rate (base 100 = 1960)") 
```

// 的计算`expenditure_gr`是我认为你正在寻找的。

// 如果您的数据格式正确，请使用带有时间序列的 Stata 并轻松获得增长率：

```
tsset year, delta(1)
cap drop expenditure_gr
gen expenditure_gr = D.expenditure / 100*L.expenditure 
```

# ajax - MVC3 WebGrid 在使用过滤器排序或分页后消失

> ID：10254084
> 
> 赞同：4
> 
> 时间：2012-04-20T21:55:49.847
> 
> 标签：ajax, asp.net-mvc-3, webgrid

我和这个问题有同样的[问题](https://stackoverflow.com/q/10051794/1013571)。

我创建了一个应该与 WebGrid 一起工作的过滤器。过滤器适用于第一页，但如果您尝试转到其他页面或对结果进行排序，过滤器将丢失。我按照上一个问题中的建议将方法更改为 GET，但目标没有得到更新，而是从页面中消失。

div“网格”内的网格调用：

```
var grid = new WebGrid(Model, ajaxUpdateContainerId: "Grid", rowsPerPage: 20); 
```

过滤形式：

```
@using (Ajax.BeginForm("Action", new { filter = "filter" }, new AjaxOptions { InsertionMode = InsertionMode.Replace, UpdateTargetId = "Grid", HttpMethod = "Get" })) 
```

如果在 Action 中设置了“过滤器”，我将返回网格的 PartialView 而不是完整的 View。

Firebug 向我显示在响应中发送了正确的 HTML，但无论出于何种原因，它都没有插入到 Grid div 中。

任何建议，将不胜感激！

**编辑：**我目前的解决方法是使用 HTML 表单而不是 AJAX，但如果可能的话，我想坚持使用 AJAX。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T08:52:44.303

我得到了解决这个问题的方法，我的 Webgrid 周围有一个 div，如下所示：

索引.cshtml：

```
<div class="grid-container">
    <div id="my-grid">
        @Html.Partial("_Grid", Model)
    </div>
</div> 
```

_Grid.cshtml：

```
@{

    var grid = new WebGrid(null, 
        canSort: true, 
        rowsPerPage: 20,
        ajaxUpdateContainerId: "my-grid");

    grid.Bind(Model.Models, autoSortAndPage: true, rowCount: Model.TotalModelCount);
}
[...] 
```

在我的列表中排序时，在过滤结果中，Webgrid 消失并且没有插入到 my-grid-div 中。但是，当我将周围的“我的网格”*放在*局部视图中时，它起作用了。我不明白为什么，但它现在有效。

索引.cshtml：

```
<div class="grid-container">
    @Html.Partial("_Grid", Model)
</div> 
```

_Grid.cshtml：

```
<div id="my-grid">
@{

    var grid = new WebGrid(null, 
        canSort: true, 
        rowsPerPage: 20,
        ajaxUpdateContainerId: "my-grid");

    grid.Bind(Model.Models, autoSortAndPage: true, rowCount: Model.TotalModelCount);
}
[...]
</div> 
```

# java - 我可以在 Java 中调用具有字段值的方法吗？

> ID：10254091
> 
> 赞同：1
> 
> 时间：2012-04-20T21:56:34.593
> 
> 标签：java, methods, call, field

是否可以在 Java 中调用基于字段值的方法？例如，我问用户他们想要什么苏打水。他们输入他们的选择，保存他们选择的字段的值用于调用该方法。

显然下面的代码不起作用。但我希望它能说明我的意图。这种事情在Java中甚至可能吗？

目标是在不使用 IF 或 SWITCH 语句的情况下进行有效切换。

```
import java.util.Scanner;

public class FieldResolutionTest
{
     public static void main (String[] args)
     {
         Scanner inputScanner = new Scanner(System.in);
         MethodTester test = new MethodTester();

         System.out.println("Please enter ONE or TWO");
         String selection = inputScanner.nextLine();

         test.(selection)();
     }
}

public class MethodTester
{
     public void ONE()
     {
         System.out.println("You ran method ONE");
     }

     public void TWO()
     {
         System.out.println("You ran method TWO");
     }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T21:59:44.063

反射在技术上*是*可行的，但是如果您有有限数量的已知可能方法，则使用 switch 语句会更简单（或者`if`/`else`如果您没有 Java 7）：

```
switch (selection) {
    case "ONE":
        test.ONE();
        break;
    case "TWO":
        test.TWO();
        break;
    // etc.
    default:
        System.out.println("Invalid method!");
        break;
} 
```

如果方法是动态的，或者您正在测试很多类，并且您仍然想走反射路线，它看起来像这样：

```
try {
    Method m = MethodTester.class.getMethod(selection);
    m.invoke(test);
} catch (NoSuchMethodException nsme) {
    System.out.println("Invalid method!");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T22:05:32.720

一个不错的方法是`enum`：

```
public class FieldResolutionTest
{
  public static void main (String[] args)
  {
    Scanner inputScanner = new Scanner(System.in);

    System.out.println("Please enter ONE or TWO");
    String selection = inputScanner.nextLine();

    FieldResolutionTest.valueOf(selection).run();
  }
}

public enum MethodTester
{
  ONE { public void run()
  {
    System.out.println("You ran method ONE");
  }},
  TWO { public void run()
  {
    System.out.println("You ran method TWO");
  }};

  public abstract void run();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T22:07:25.793

您可以使用反射。这是您的示例，修改最少：

```
import java.lang.reflect.Method;
import java.util.Scanner;

public class FieldResolutionTest {
     public static void main (String[] args) throws Exception {
         Scanner inputScanner = new Scanner(System.in);
         MethodTester test = new MethodTester();

         System.out.println("Please enter ONE or TWO");
         String selection = inputScanner.nextLine();

         Method method = MethodTester.class.getMethod(selection);
         method.invoke(test);
     }
}

class MethodTester {
     public void ONE() {
         System.out.println("You ran method ONE");
     }

     public void TWO() {
         System.out.println("You ran method TWO");
     }
} 
```

当然，您需要添加一些错误处理。例如，您应该检查用户是否输入了允许的方法之一的名称，如下所示：

```
 Map<String, Method> methods = new HashMap<String, Method>();
        for (Method m: MethodTester.class.getMethods()) {
            methods.put(m.getName(), m);
        }

        if (methods.containsKey(selection)) {
            methods.get(selection).invoke(test);
        } else {
            System.err.println("No such method: " + selection);
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T22:01:00.447

您需要测试输入值并调用相应的方法：

```
if(selection.equals("ONE")) test.ONE();
else if (selection.equals("ONE")) test.TWO();
else System.out.println("Unknown input!"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-20T22:02:11.257

自 Java 7 发布以来，可以对字符串类型变量执行 switch-case 方法

```
switch(selection) {
    case "ONE":
    test.ONE();
    break;

    case "TWO":
    test.TWO();
    break;
} 
```

同样，仅从 Java 7 开始可用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T22:05:30.643

正如 mellamokb 所说，您可以使用反射来调用该方法。通常代码看起来像 test.getClass().getMethod("ONE", null).invoke(..)

# objective-c - Core Data undoManager 崩溃

> ID：10254095
> 
> 赞同：4
> 
> 时间：2012-04-20T21:56:49.930
> 
> 标签：objective-c, core-data, ios5, nsundomanager

我将以下代码用于核心数据单例。下面是我的代码。（基于 NachoMan 的[博客](http://nachbaur.com/blog/smarter-core-data)。但是代码来自他的要点。

```
// DataManager.h
#import <Foundation/Foundation.h>
#import <CoreData/CoreData.h>

extern NSString * const DataManagerDidSaveNotification;
extern NSString * const DataManagerDidSaveFailedNotification;

@interface DataManager : NSObject {
}

@property (nonatomic, readonly, retain) NSManagedObjectModel *objectModel;
@property (nonatomic, readonly, retain) NSManagedObjectContext *mainObjectContext;
@property (nonatomic, readonly, retain) NSPersistentStoreCoordinator *persistentStoreCoordinator;
@property (nonatomic, readonly, retain) NSManagedObjectContext *managedObjectContext;

+ (DataManager*)sharedInstance;
- (BOOL)save;
- (BOOL)clearEntity:(NSString *)entityDescription;
- (NSManagedObjectContext*)managedObjectContext;

@end

// DataManager.m
#import "DataManager.h"

NSString * const DataManagerDidSaveNotification = @"DataManagerDidSaveNotification";
NSString * const DataManagerDidSaveFailedNotification = @"DataManagerDidSaveFailedNotification";

@interface DataManager ()

- (NSString*)sharedDocumentsPath;

@end

@implementation DataManager

@synthesize persistentStoreCoordinator = _persistentStoreCoordinator;
@synthesize mainObjectContext = _mainObjectContext;
@synthesize objectModel = _objectModel;
@synthesize managedObjectContext = _managedObjectContext;

NSString * const kDataManagerBundleName = nil;//@"AP";
NSString * const kDataManagerModelName = @"APData";
NSString * const kDataManagerSQLiteName = @"APData.sqlite";

+ (DataManager*)sharedInstance {
    static dispatch_once_t pred;
    static DataManager *sharedInstance = nil;

    dispatch_once(&pred, ^{ sharedInstance = [[self alloc] init]; });
    return sharedInstance;
}

- (void)dealloc {
    [self save];
}

- (NSManagedObjectModel*)objectModel {
    if (_objectModel)
        return _objectModel;

    NSBundle *bundle = [NSBundle mainBundle];
    if (kDataManagerBundleName) {
        NSString *bundlePath = [[NSBundle mainBundle] pathForResource:kDataManagerBundleName ofType:@"bundle"];
        bundle = [NSBundle bundleWithPath:bundlePath];
    }
    NSString *modelPath = [bundle pathForResource:kDataManagerModelName ofType:@"momd"];
    NSLog(@"Path: %@",modelPath);
    _objectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:[NSURL fileURLWithPath:modelPath]];

    return _objectModel;
}

- (NSPersistentStoreCoordinator*)persistentStoreCoordinator {
    if (_persistentStoreCoordinator) {
        NSLog(@"PersistentStore Exists %@",_persistentStoreCoordinator);
        return _persistentStoreCoordinator;
    }
    NSLog(@"Persistent Stored DOESN'T EXIST");

    // Get the paths to the SQLite file
    NSString *storePath = [[self sharedDocumentsPath] stringByAppendingPathComponent:kDataManagerSQLiteName];
    NSURL *storeURL = [NSURL fileURLWithPath:storePath];

    // Define the Core Data version migration options
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                 [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                 [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                 nil];

    // Attempt to load the persistent store
    NSError *error = nil;
    _persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:self.objectModel];
    if (![_persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType
                               configuration:nil
                                 URL:storeURL
                                 options:options
                                   error:&error]) {
        NSLog(@"Fatal error while creating persistent store: %@", error);
        abort();
    }
    NSLog(@"store: %@",_persistentStoreCoordinator);
    return _persistentStoreCoordinator;
}

- (NSManagedObjectContext*)mainObjectContext {
    if (_mainObjectContext)
        return _mainObjectContext;

    // Create the main context only on the main thread
    if (![NSThread isMainThread]) {
        [self performSelectorOnMainThread:@selector(mainObjectContext)
                       withObject:nil
                    waitUntilDone:YES];
        return _mainObjectContext;
    }

    _mainObjectContext = [[NSManagedObjectContext alloc] init];
    [_mainObjectContext setPersistentStoreCoordinator:self.persistentStoreCoordinator];

    return _mainObjectContext;
}

- (BOOL)save {
    if (![self.mainObjectContext hasChanges])
        return YES;

    NSError *error = nil;
    if (![self.mainObjectContext save:&error]) {
        NSLog(@"Error while saving: %@\n%@", [error localizedDescription], [error userInfo]);
        [[NSNotificationCenter defaultCenter] postNotificationName:DataManagerDidSaveFailedNotification
                                    object:error];
        return NO;
    }

    [[NSNotificationCenter defaultCenter] postNotificationName:DataManagerDidSaveNotification object:nil];
    return YES;
}

- (BOOL)clearEntity:(NSString *)entityDescription
{
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:entityDescription inManagedObjectContext:_managedObjectContext];
    [fetchRequest setEntity:entity];

    NSError *error;
    NSArray *items = [_managedObjectContext executeFetchRequest:fetchRequest error:&error]; 

    for (NSManagedObject *managedObject in items) {
        [_managedObjectContext deleteObject:managedObject];
        NSLog(@"%@ object deleted",entityDescription);
    }
    if (![_managedObjectContext save:&error]) {
        NSLog(@"Error deleting %@ - error:%@",entityDescription,error);

        return NO;
    }
    return YES;
}

- (NSString*)sharedDocumentsPath {
    static NSString *SharedDocumentsPath = nil;
    if (SharedDocumentsPath)
        return SharedDocumentsPath;

    // Compose a path to the <Library>/Database directory
    NSString *libraryPath = [NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    SharedDocumentsPath = [libraryPath stringByAppendingPathComponent:@"Database"];

    // Ensure the database directory exists
    NSFileManager *manager = [NSFileManager defaultManager];
    BOOL isDirectory;
    if (![manager fileExistsAtPath:SharedDocumentsPath isDirectory:&isDirectory] || !isDirectory) {
        NSError *error = nil;
        NSDictionary *attr = [NSDictionary dictionaryWithObject:NSFileProtectionComplete
                                 forKey:NSFileProtectionKey];
        [manager createDirectoryAtPath:SharedDocumentsPath
           withIntermediateDirectories:YES
                    attributes:attr
                     error:&error];
        if (error)
            NSLog(@"Error creating directory path: %@", [error localizedDescription]);
    }

    return SharedDocumentsPath;
}

- (NSManagedObjectContext*)managedObjectContext {
    if (_managedObjectContext) {
        return _managedObjectContext;
    }
    _managedObjectContext = [[NSManagedObjectContext alloc] init];
    NSUndoManager *undoManager = [[NSUndoManager alloc] init];
    [_managedObjectContext setUndoManager:undoManager];
    [_managedObjectContext setPersistentStoreCoordinator:self.persistentStoreCoordinator];
    [_mainObjectContext setRetainsRegisteredObjects:YES];

    return _managedObjectContext;
}

@end 
```

但是，`managedObjectContext`如果我添加

```
NSUndoManager *undoManager = [[NSUndoManager alloc] init];
[_managedObjectContext setUndoManager:undoManager]; 
```

它会崩溃。

*Crittercism*日志显示

SIGBUS
主要 (main.m:16)

```
0    CoreData 0x0033d940 -[NSManagedObject(_NSInternalMethods) _newSnapshotForUndo__] + 352
1    CoreData 0x00318fb1 -[NSManagedObjectContext(_NSInternalChangeProcessing) _registerUndoForOperation:withObjects:withExtraArguments:] + 193
2    CoreData 0x0031922f -[NSManagedObjectContext(_NSInternalChangeProcessing) _registerUndoForInsertedObjects:] + 63
3    CoreData 0x003148f8 -[NSManagedObjectContext(_NSInternalChangeProcessing) _processRecentChanges:] + 1384
4    CoreData 0x00314389 -[NSManagedObjectContext processPendingChanges] + 41
5    CoreData 0x002e8bd8 _performRunLoopAction + 216
6    CoreFoundation 0x0177d99e __CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 30
7    CoreFoundation 0x01714640 __CFRunLoopDoObservers + 384
8    CoreFoundation 0x016e04c6 __CFRunLoopRun + 1174
9    CoreFoundation 0x016dfd84 CFRunLoopRunSpecific + 212
10   CoreFoundation 0x016dfc9b CFRunLoopRunInMode + 123
11   GraphicsServices 0x023617d8 GSEventRunModal + 190
12   GraphicsServices 0x0236188a GSEventRun + 103
13   UIKit 0x007e2626 UIApplicationMain + 1163
14   My-App 0x284d main (main.m:16)
15   My-App 0x27b5 start + 53 
```

当很多SO帖子说要使用它时，为什么这两条线会崩溃？如果我把这两条线去掉，它就不会崩溃，我只是无法使用撤消管理器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:31:35.057

如果您正在寻找一种处理核心数据线程的好方法，包括在保存时通知主上下文，[MagicalRecord](https://github.com/magicalpanda/MagicalRecord)是一个很棒的库。除了线程帮助之外，它还为您提供简单的一行获取、轻松的上下文访问等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T01:54:08.160

看起来您的代码已部分准备好用于多个线程。我猜您的 MOC 访问不正确。

另外，为什么要从 managedObjectContext 方法中更改 _mainObjectContext 的 retainsRegisteredObjects 属性？

我不认为那是你想要做的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T15:00:30.823

我最终清除了所有缓存并等待了几天然后再试一次。它没有崩溃。它一定是卡在缓存中的东西。

# ruby-on-rails - 如何在heroku上使用rails使用twitter/datasift流

> ID：10254099
> 
> 赞同：4
> 
> 时间：2012-04-20T21:57:07.313
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, twitter

一个人如何在 heroku 上使用带有 rails 的流 api（如 twitter 流 api）？它是否涉及让脚本与消耗流的工作人员一起运行？如果有任何现有的资源记录这个请链接，到目前为止我还没有找到太多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T00:06:10.837

您的两个选择是使用 worker dyno 来运行使用流并将其写入数据存储（您的数据库等）的脚本，或者在您的 rails 应用程序中动态获取流的一部分作为响应的一部分到 HTTP 请求。

其中哪一个对您有意义取决于您尝试对数据执行的操作以及您需要多少流。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T14:01:15.790

对不起，这个软答案，这些代码或想法都不是我自己的......

在 Heroku 上不使用后台工作程序的情况下使用流 API 的最简单方法是使用 EventMachine

在模型中，你会做这样的事情：

```
EM.schedule do
  http = EM::HttpRequest.new(STREAMING_URL).get :head => { 'Authorization' => [ 'USERNAME', 'PASSWORD' ] }
  buffer = ""
  http.stream do |chunk|
    buffer += chunk
    while line = buffer.slice!(/.+\r?\n/)
      handle_tweet JSON.parse(line)
    end
  end
end 
```

有关详细信息，请查看[Adam Wiggins](http://adam.heroku.com/past/2010/3/19/consuming_the_twitter_streaming_api/)、[Joslyn Esser](http://joslynesser.com/blog/archives/2010/09/12/consuming-the-twitter-streaming-api-with-heroku-and-mongodb/)和[Kenne Jima](http://blog.kennejima.com/post/487561432/how-to-use-the-twitter-streaming-api-from-web-apps)

# c# - 从数据库中获取 -1 值

> ID：10254103
> 
> 赞同：1
> 
> 时间：2012-04-20T21:57:28.217
> 
> 标签：c#

我正在制作一个登录页面。为此，我将从数据库中验证用户名和密码。当我执行程序查询将运行并返回 -1 值。因为用户名和密码是正确的。请帮帮我。我的程序代码如下：

```
public partial class Home : System.Web.UI.Page
{
    SqlConnection objcon;
    String query;
    SqlCommand cmd;
    int num;
    //SqlDataAdapter DataAdapter;

    protected void Page_Load(object sender, EventArgs e)//db open in page load.
    {
        objcon = new SqlConnection("Data Source String");
        objcon.Open();
    }
    //query execution and authentication on button click 

    protected void Button1_Click(object sender, EventArgs e)
    {
        query = "select * from tbl_user where UserName='" + txtUname.Text + "' and Password='" + txtPwd.Text + "'";

        cmd = new SqlCommand(query,objcon);

        num = cmd.ExecuteNonQuery();

        //Label3.Text = num.ToString();
        if (num == -1)
            Label3.Text = "Correct";
        else
            Label3.Text = "Incorrect";
        objcon.Close();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T21:59:00.070

看看这段代码：

```
num = cmd.ExecuteNonQuery(); 
```

现在假设您正在基于名为 的变量创建命令`query`，您真的认为使用短语*non-query*调用方法有意义吗？从文档中[`ExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)，如果您还不相信：

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。[...] 对于所有其他类型的语句，返回值为 -1。

您的语句是一个`SELECT`查询，因此它返回的 -1 与记录的完全相同。

我怀疑你应该使用[`ExecuteScalar`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)or [`ExecuteReader`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executereader.aspx)。例如，如果您尝试获取匹配*数*，则应使用：

```
SELECT COUNT(*) ... (rest of query, parameterized of course) 
```

根据詹姆斯的回答，我个人更喜欢采用 -1 或 null ，但这是一个品味问题。

如果您不尝试获取匹配数，则不清楚为什么首先要分配给`int`变量。

编辑：其他问题：（*正如评论中已经提到的*）

*   仅在需要时创建和打开`SqlConnection`，而不是在构造函数中
*   对 the和to 都使用`using`指令，即使出现异常，它们也会关闭`SqlConnection``SqlCommand`
*   **不要在 SQL 中直接包含用户输入**- 改为使用参数化 SQL，以防止 SQL 注入攻击，改进代码/数据分离，并避免转换错误
*   **不要将用户的密码以明文形式直接存储在数据库中**——这对于任何网站来说都是一件非常*可怕的事情。*
*   **不要一开始就尝试编写自己的用户身份验证代码**——它已经在许多不同的地方为你完成了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:04:45.200

你想要的是执行一个标量查询，这意味着它返回一个值。对于您的查询，如果用户名和密码匹配，只需选择`-1`：

```
SELECT -1 FROM tblUser WHERE Username = 'James' AND Password = 'Johnson' 
```

如果返回一个值，则该值将是`-1`并且您知道您有一个匹配项。如果没有`null`返回值 ( )，则它不匹配。

**编辑**

除了回答您的问题之外，您的代码还需要解决一些主要问题：

1.  每次页面加载时，您都会打开一个新连接。这是一个很大的禁忌！您不仅在每次页面加载时打开新连接，而且在执行查询后也不会关闭连接。

2.  不要使用连接来构建查询，而是使用参数化查询来避免 SQL 注入的风险。甚至对 SQL 有一点了解的人都可以轻松地逃避您的查询并对您的数据造成严重破坏。

# .net - 如何从 Java 中的 Web 服务读取结果？

> ID：10254107
> 
> 赞同：0
> 
> 时间：2012-04-20T21:57:44.720
> 
> 标签：.net, xml, web-services, jsp, servlets

我有一个基于 .NET 的 Web 服务，它返回 XmlDocument。

我正在使用这样的 servlet 在 JSP 文件中读取它：

```
CuteServlet servlet = new CuteServlet();
result = servlet.searchProperties(market_type, location, bedroom, price); 
```

来自 CuteServlet 的 searchProperties 方法：

```
public SearchPropertiesResult searchProperties(String propertyMarketType,
     String location, String noOfBedroom, String price) 
{
  wsClient.Property service = new wsClient.Property();
  wsClient.PropertySoap port = service.getPropertySoap();
  return port.searchProperties(propertyMarketType, location, noOfBedroom, price);
} 
```

searchProperties() 的返回类型是 SearchPropertiesResult。我该如何阅读它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T18:50:24.723

为了解决这个问题，我读取`XmlDocument`（从 C# 返回） as`result`并将值放入`List<Object>`，然后将每个 Object 转换`Element`为读取详细信息，如下所示：

```
 <% 
   ...
   wsClient.SearchPropertiesResponse.SearchPropertiesResult result 
             = servlet.searchProperties(market_type, location, bedroom, price);
   List<Object> objects = result.getContent();

   Element rootElement = (Element)objects.get(0);
   //out.println(element.getElementsByTagName("property").getLength());
   NodeList propertyList = rootElement.getElementsByTagName("property");
   out.println("<table>");
   int propertiesLength = propertyList.getLength();
   for(int i=0; i<propertiesLength; i++)
   {
   Element aProperty = (Element)propertyList.item(i);
   NodeList childNodeList = aProperty.getChildNodes();

    Element property_idElement = (Element)childNodeList.item(0);
    String property_id = property_idElement.getTextContent();

    Element street_nameElement = (Element)childNodeList.item(2);
    String street_name = (street_nameElement.getTextContent());

    ...
    String tr = "<tr><td>";
    int l = i+1;//"+l+"
    tr += "<b> </b>"+door_no+" "+street_name+", "+post+"<br/>";
    tr += description+"<br/>";
    tr += "Bedroom: "+no_of_bed+"<br/>";
    tr += "Bathroom: "+no_of_bath+"<br/>";
    ...
    tr += "Area: "+area+"<br/><br/><br/><br/>";
    tr += "</td></tr>";
    out.println(tr);
   }
   out.println("</table>");
   %> 
```

# ruby-on-rails-3 - 在关系模型中添加依赖 :destroy 的测试（第 11 章，练习 1 Rails 教程，第 2 版）

> ID：10254115
> 
> 赞同：7
> 
> 时间：2012-04-20T21:58:23.510
> 
> 标签：ruby-on-rails-3, railstutorial.org, rails-console, dependent-destroy

很确定这些测试工作正常。通过删除 user.rb 中 has_many :relationships 和 has_many :reverse_relationships 上的依赖: :destroy 选项让它们失败。

想分享我所做的，以防其他人正在阅读[Michael Hartl 的 Rails 教程第 2 版第 11 章练习。](http://ruby.railstutorial.org/chapters/following-users?version=3.2#sec:following_exercises)

这个练习产生了一些问题（见这篇文章的底部）。如果有人可以提供帮助，那就太好了。

**第 11 章，练习 1：**

按照清单 10.15 中的示例，在关系模型（清单 11.4 和清单 11.16）中添加依赖 :destroy 的测试。

这是我的测试： *spec/models/user_spec.rb*

```
require 'spec_helper'

describe User do

  before do
  @user = User.new(name: "Example User", email: "user@example.com", 
                   password: "foobar", password_confirmation: "foobar")
  end

  subject { @user }

  [...code omitted...]

  describe "relationship associations" do
    let(:other_user) { FactoryGirl.create(:user) }
    before do
      @user.save
      @user.follow!(other_user)
      other_user.follow!(@user)
    end

    it "should destroy associated relationships" do
      relationships = @user.relationships
      @user.destroy
      relationships.should be_empty
    end

    it "should destroy associated reverse relationships" do
      reverse_relationships = @user.reverse_relationships
      @user.destroy
      reverse_relationships.should be_empty
    end
  end 
```

* * *

这个练习提出了几个问题：

**问题一：**

我最初的测试是relationships.should be_nil reverse_relationships.should be_nil

但是，尽管没有用户存在，但仍意识到数组仍在返回。那么，当用户不存在，调用关联方法时，结果还是数组？这总是正确的吗？

**问题2：**

我想在 rails 控制台中为用户删除关系和 reverse_relationships。

我试过这个

```
> user = User.first
> user.relationships
 # returns a bunch of relationships
> user.relationships.destroy
=> []
> user.relationships
 # returns same bunch of relationships 
```

我如何真正永久地破坏关系？在控制台中探索似乎是一件好事。

谢谢！我对 Rails 还是很陌生

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-29T09:20:04.437

可能你需要这样的 smt

```
it { should have_many(:relationships).dependent(:destroy) } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-24T18:23:53.167

我也是一个 ruby​​/rails 菜鸟。

问题 1：搜索ruby [​​onrails.org](http://api.rubyonrails.org/)`has_many`并显示

> 返回所有关联对象的数组。如果没有找到，则返回一个空数组。

附带说明一下，您可以同时测试 nil 和空：

```
relationships.present?.should be_false 
```

问题 2：`user.relationships.destroy`需要一个 :id

```
user.relationships.destroy '1' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T21:04:21.050

感谢您发布带有问题的代码。我只想将此作为评论而不是答案发布，但似乎我还不能。无论如何，我只是想在您的测试中添加一个小的潜在候选人，但从`other_user`'s 的角度来看。该测试类似于关注/取消关注测试，所以希望它不会太多余，但它直接测试而`relationships`不是通过它们。`followed_users``followers`

```
describe "relationship associations" do
  ...
  context "when a follower/followed user is destroyed" do
    subject { other_user }

    before { user.destroy }

    its(:relationships) { should_not include(user) }
    its(:reverse_relationships) { should_not include(user) }
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T14:52:43.823

[Ruby on Rails 教程第 2 版。](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

**练习 11.5.1**添加测试以破坏与给定用户相关的关系。

这段代码对我有用。我尝试按照示例[清单 10.15](http://ruby.railstutorial.org/chapters/user-microposts#code-micropost_dependency_test "清单 10.15")进行操作。

**规格/模型/user_spec.rb**

```
require 'spec_helper'

describe User do

  before do 
    @user = User.new(name: "Example User", email: "user@example.com", password: "foobar", password_confirmation: "foobar")
  end

  subject { @user }
  .
  .
  .
  .
  describe "user relationships associations" do
    let (:other_user) { FactoryGirl.create(:user) }
    let (:another_user) { FactoryGirl.create(:user) }

    before do
      @user.save
      @user.follow!(other_user)
      @user.follow!(another_user)
      other_user.follow!(@user)
      other_user.follow!(another_user)
      another_user.follow!(@user)
      another_user.follow!(other_user)
    end

    its(:followed_users) { should include(other_user) }
    its(:followers) { should include(another_user) }

    it "should destroy associated followers" do
      followers = @user.followers
      @user.destroy
      followers.each do |follower|
        follower.followed_users.should_not include(@user)
      end
    end

    it "should destroy associated followed users" do
      followed_users = @user.followed_users
      @user.destroy
      followed_users.each do |followed_user|
        followed_user.followers.should_not include(@user)
      end
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-12T07:43:16.267

回复：保罗，关系数组不是由用户构成的，所以他的include（）应该总是为假，所以测试总是绿色的。回复：玛丽亚，即使引用他或她的关系仍然存在，followed_users 和 follower 方法似乎也不会返回不存在的用户。所以这个测试也从不红。

另一种解决方案：

```
 describe "relationships" do
    let(:other_user) { FactoryGirl.create(:user) }
    before do
      @user.save
      @user.follow!(other_user)
    end

    let(:relationship) { @user.relationships.last }

    describe "should be destroyed when the followed user is destroyed" do
      before { other_user.destroy }
      its(:relationships) { should_not include(relationship) }
    end

    describe "should be destroyed when the following user is destroyed" do
      subject { other_user }
      before { @user.destroy }
      its(:reverse_relationships) { should_not include(relationship) }
    end
  end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-18T01:52:20.320

以上答案有效，但我想我会分享我的更短的......：D

```
describe "following" do

  let(:other_user) { FactoryGirl.create(:user) }
  before do
    @user.save
    @user.follow!(other_user)
    other_user.follow!(@user)
  end

   it { should be_following(other_user) }
   its(:followed_users) { should include(other_user) }

   it "should destroy associated followed_users and followers" do
     @user.destroy
     @user.relationships.present?.should be_false
     @user.reverse_relationships.present?.should be_false

     expect(other_user.followers).not_to include(@user)
     expect(other_user.followed_users).not_to include(@user)
   end
   .
   .
   .
   .
 end
end 
```

PS你可以省略：

```
@user.relationships.present?.should be_false
@user.reverse_relationships.present?.should be_false 
```

但我把它扔在那里是为了那些想要确保所有相关的破坏行动都在起作用的人。

# cakephp - CakePHP：单击下一个/私有时清除变量

> ID：10254120
> 
> 赞同：0
> 
> 时间：2012-04-20T21:58:56.093
> 
> 标签：cakephp, paginator

我有一个来自控制器的动作，它通过`$this->set('found_products', $data);`. 视图页面`products.ctp`分为两个部分：

1.  `$found_products`在顶部，为视图设置了一个用户输入字符串进行搜索的表单。

2.  `$found_products`在其下方，仅在设置时显示的分页结果。即是真`if (isset($found_products))`的。

如果`if (isset($found_products))`为真，我会在表单下方显示第一页，其中搜索字符串已经在文本框中。这个 URL 是`myapp/controller/products`.

当我进入下一页时会出现问题。URL 变为`myapp/controller/action/products:2`并且不存在下使用的任何变量`myapp/controller/products`。看起来移动到新页面会清除所有变量。下面是我用于分页的代码，我没有为此编写重新路由规则。我该如何解决这个问题？

```
 <div class="paging">
            <?php echo $this->Paginator->prev('<< ' . __('previous', true), array(), null, array('class'=>'disabled'));?>
            <?php echo $this->Paginator->numbers();?>        
            <?php echo $this->Paginator->next(__('next', true) . ' >>', array(), null, array('class' => 'disabled'));?>
        </div> 
```

我尝试在操作 ( `products`) 中使用 $_SESSION 来解决这个问题，并将其设置为视图，但是当我这样做时，`$this->Paginator' 不再起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T06:02:45.010

您可以使用 $this->Paginator->options 在分页链接中保留传递的参数。试试这个代码

```
<div class="paging">
    <?php $this->Paginator->options(array('url' => $this->passedArgs)); ?>
    <?php echo $this->Paginator->prev('<< ' . __('previous', true), array(), null, array('class'=>'disabled'));?>
    <?php echo $this->Paginator->numbers();?>        
    <?php echo $this->Paginator->next(__('next', true) . ' >>', array(), null, array('class' => 'disabled'));?>
</div> 
```

# database - 从 XCode 连接到 Microsoft Access 数据库

> ID：10254123
> 
> 赞同：5
> 
> 时间：2012-04-20T21:59:13.330
> 
> 标签：database, macos, ms-access, odbc, database-connection

我的任务是在 xcode 4.3 中编写一个 Mac 应用程序，它可以搜索和显示来自定期更新的公开可用的 MS Access 数据库的数据。出于这个原因，我不能只是将文件转换为不同的数据库平台。我搜索了谷歌的深度，找不到其他人尝试这样的任务。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T12:39:18.860

您可以尝试使用提供连接的 3rd 方工具，例如actualtech one。 [http://www.actualtech.com/product_access.php](http://www.actualtech.com/product_access.php)
我个人从未尝试过这个，但它看起来很有希望。

我相信除了 Windows 之外，没有对其他平台的原生 Microsoft 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-21T12:27:37.383

如果数据库在 MDB 文件中，您可以尝试使用此在线[MDB 到 MySQL 转换器](http://www.mdb2mysql.com/)。

您可以编写一个守护程序，每天甚至每小时获取最新的 SQL 转储，并将其存储在本地 SQLite 文件中。然后您的客户端应用程序只需要查询本地文件。

我知道这不如直接连接到数据库方便，但这是一个“免费”的解决方案。

# javascript - 如何将 JavaScript 值放入 html

> ID：10254125
> 
> 赞同：0
> 
> 时间：2012-04-20T21:59:41.817
> 
> 标签：javascript, html

Javascript代码

```
 function load()
    {
        var s = window.location.href;
        var temp_img_url=s.split("?");
        var img_url=temp_img_url[1];

    } 
```

html代码

```
 <img id="bigpic" src=" " style="display: none; "> 
```

我正在尝试将 img_url 放在 src 中。有什么方法可以做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T22:02:25.283

在 load() 函数的末尾添加这一行：

```
document.getElementById('bigpic').src=img_url; 
```

这是来自记忆（我的 js 有点生疏），但应该可以解决问题。

它使用该`getElementById()`方法获取 ID 为`bigpic`（您的图像元素）的元素，并将`src`属性设置为您的`img_url`变量的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:03:47.643

首先你必须找到元素：

```
element = document.getElementById("bigpic"); 
```

然后您可以更改该`src`元素的属性：

```
element.setAttribute("src", img_url); 
```

# php - 为什么我的 PHP 密码哈希比较不起作用？

> ID：10254130
> 
> 赞同：1
> 
> 时间：2012-04-20T21:59:49.413
> 
> 标签：php, hash, passwords, sha512

我有两个功能，`HashPassword()`和`ValidatePassword`。

第一个使用动态盐对注册表单上给出的密码进行哈希处理，第二个验证密码。

基本上，我正在检查密码哈希是否匹配，它们永远不会匹配。在我的登录表单上，当我调用`ValidatePassword()`我测试过的函数时，会回显出哈希值，`ValidatePassword()`以确保我在写入位置拆分哈希值以进行比较，但在比较它们时，它们会回显出不同的哈希值。

可能更容易查看这两个函数以更好地解释。

```
<?php

// hashes a users password along with a dynamic salt
// dynamic salt is stored with users password and is seperated by a ;
function HashPassword($password){
    // creates a dynamic salt
    $DynamicSalt       = uniqid('', true);
    // hash the password given from user along with dynamic salt
    $HashedPassword    = hash('sha512', $password . $DynamicSalt);
    // combine the hashed password seperated by ; then the dynamic salt to store in database
    $final             = $HashedPassword.';'.$DynamicSalt; // this value is stored in database like: c29fc9e4acdd2962c4db3f108bee728cf015c8f6388ab2cd4f21e405f9d2f13b2d53a1ab8629aa21c3453906a98aff0d4b9a0e14bfc2c553a4f9c7c0c32fc58a;4f91cfc746b426.53641182
    return $final;
}

// validate password user entered ($password = password from user | $dbHashedPassword = hash from database)
function ValidatePassword($password, $dbHashedPassword){
    // we need to get the password hash before the salt, (fetch just the first 128 characters from database hash)
    $CorrectHash = substr($dbHashedPassword, 0, 128);
    // get the dynamic salt from end of sha512 hash (
    $DynamicSalt = substr($dbHashedPassword, 129, 151); // get just the dynamic salt part of the db hash
    // hash the password from user and the dynamic salt which we got from the end of the hash from database
    $TestHash    = hash('sha512', $password . $DynamicSalt);

    return ($CorrectHash == $TestHash);

    // WHEN I ECHO OUT THE THREE VARIABLES $CorrectHash, $DynamicSalt and $TestHash
    // THE $CorrectHash (from db, first 128 chars) is not the same as $TestHash
    // AND TO MAKE SURE I AM SPLITTING THE HASH AND DYNAMIC SALT InN THE CORRECT PLACE I ECHO OUT
    // $DynamicSalt and it is split in the correct place showing the 23 characters which the dynamic salt is 23 characters
    // BUT WHEN I COMBINE THE $password and $DynamicSalt in $TestHash it shows a completely different hash from the $CorrectHash (which we got and split from database)
}

?> 
```

我不确定出了什么问题，但似乎我在正确的位置拆分哈希和动态盐，因为当我回显时它显示前 128 个字符（sha512）然后是动态盐（23 个字符）但是当回显时他们不匹配的两个 128 字符散列（我的意思是它们是完全不同的散列）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:05:19.720

如果你所有的`substr`都是正确的，你只是忘了附加`";" . $DynamicSalt`到`$TestHash`

顺便提一句。这违反了第一条数据库规范化规则：“值必须是原子的”。盐应存放在单独的字段中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:03:44.997

这可能与您如何拆分要测试的哈希有关。例如，您正在尝试获取长度为 151 个字符的盐。

试试这个：

```
function ValidatePassword($password, $dbHashedPassword) {
    list($CorrectHash, $DynamicSalt) = explode(";",$dbHashedPassword,2);
    return $CorrectHash == hash("sha512",$password.$DynamicSalt);
} 
```

# html - MBP.hideUrlBar(); 样板移动

> ID：10254134
> 
> 赞同：0
> 
> 时间：2012-04-20T22:00:03.607
> 
> 标签：html, mobile, mobile-safari, html5boilerplate

我正在使用 HTML Mobile Bolierplate 并尝试使用以下方法隐藏 URL 地址栏：

```
<script src="/static/js/helper.js"></script>
<script>
  MBP.hideUrlBar();
</script> 
```

但它不起作用，helper.js 加载正常。有人知道我要去哪里错了吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T12:00:28.493

在运行 UI 操作代码之前，等到 DOM 的加载事件被触发始终是一个好习惯。

对于新手用户：jQuery：

```
jQuery(function() {
  MBP.hideUrlBar();
}); 
```

泽普托：

```
Zepto(function() {
  MBP.hideUrlBar();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T17:58:20.397

对于来自 Google 的人，我认为 MBP.hideUrlBar() 函数需要一些关于如何使用它的解释。我花了一些时间让它在 Android（仅限本机浏览器，Chrome 无法隐藏他的地址栏）和 iOS 上运行：

1.  首先，您的页面**需要有一个滚动条**（这意味着您的网站一定不能`html,body height:100%`）
2.  如果您希望您的网站是 100%（这是我的情况），您将需要手动计算要添加到 html、body 的高度以足以完全隐藏滚动条（这意味着我们需要知道地址的高度酒吧...）
3.  如果您希望 MBP 函数在加载事件上起作用，请使用 MBP.hideUrlBarOnLoad()。请注意，它仅适用于加载事件，而不适用于每次调整大小（方向更改）。您将在调整大小功能中有类似的内容：

    ```
    function resize(){
      firstLoadOfThePage ? MBP.hideUrlBarOnLoad() : MBP.hideUrlBar()
    } 
    ```

    （假设这`firstLoadOfThePage`是一个知道何时是第一次加载页面的标签（第一次调用resize函数）

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T02:00:27.910

你可以试试：

```
window.scrollTo(0, 1); 
```

隐藏地址栏。

# sql - SQL选择包含子特定值的父

> ID：10254139
> 
> 赞同：3
> 
> 时间：2012-04-20T22:00:27.123
> 
> 标签：sql, crystal-reports

我实际上正在创建一个 Crystal 报告 v12 (2008) 报告，但找不到使用 Crystal 提取以下内容的方法。我想如果有人可以用 SQL 语言回答，我可以把它拼凑起来。

2 个表：hbmast、ddmast

```
SELECT hbmast.custno, hbmast.id, ddmast.name, ddmast.status
WHERE hbmast.custno = ddmast.custno
GROUP BY hbmast.id
pseudo code::show all hbmast values that have ddmast.status = '2' 
```

样本输出：

```
J0001, 111222, PAUL JONES, 1
       111222, PAUL JONES, 2
       111222, PAUL JONES, 1

K0001, 555333, PETER KING, 3
       555333, PETER KING, 1 
```

我想让 Paul 在报告中显示所有子记录，但不应在报告中返回 Peter，因为他没有 ddmast.status 字段的“2”子记录。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T22:06:35.197

我想你正在寻找这个：

```
select hb.custno, hb.id, dd.name, dd.status from hbmast hb
join ddmast dd on hb.custno = dd.custno
where hb.custno in (
    select custno from ddmast
    where status = '2'
) 
```

让我知道这是否会返回您的预期结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T22:16:24.253

在 Crystal 中实现这一点的方法是让你的 hb 和 dd 表然后是 dd 表的第二个别名。

因此，您将过滤您的 dd 别名表，其中 status = 2 然后加入您的 hb 表并返回您的 dd 表（不是别名）。SQL 最终看起来像：

```
select hb.custno, hb.id, dd.name, dd.status from hbmast hb
inner join ddmast dd on hb.custno = dd.custno
inner join ddmast dd2 on hb.custno = dd2.custno
where dd2.status = '2' 
```

如果每个组有超过 1 条状态为 2 的记录，Andomar 就出现重复记录提出了一个有效的观点。如果是这种情况，您可以按主键分组并在组页脚级别显示行信息，或者使用 sql 表达式选择公式中的子查询，而不是双连接方法。

SQL 表达式：`(select count(*) from ddmast where custno = "hbmast.custno" and status = '2')`

然后记录选择专家：`{%sqlexpression} > 0`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:14:57.303

以及获得相同结果的不同方法...

```
SELECT hb.custno, hb.id, dd.name, dd.status 
FROM hbmast hb
INNER join ddmast dd 
  on hb.custno = dd.custno
INNER JOIN DDMAST2 DD2 
  on DD2.custNo = HB.custNo 
  AND DD2.Status='2' 
```

# objective-c - 如何在objective-c中从cvMat转换为UIImage？

> ID：10254141
> 
> 赞同：29
> 
> 时间：2012-04-20T22:00:31.553
> 
> 标签：objective-c, xcode, opencv

我将 OpenCV 框架与 XCode 一起使用，并且想从 cvMat 或 IplImage 转换为 UIImage，该怎么做？谢谢。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-20T22:55:08.167

注意：大多数实现不能正确处理 alpha 通道或从 OpenCV 的 BGR 像素格式转换为 iOS 的 RGB。

这将正确转换`cv::Mat`为`UIImage`：

```
+(UIImage *)UIImageFromCVMat:(cv::Mat)cvMat {
    NSData *data = [NSData dataWithBytes:cvMat.data length:image.step.p[0]*image.rows];

    CGColorSpaceRef colorSpace;
    CGBitmapInfo bitmapInfo;

    if (cvMat.elemSize() == 1) {
        colorSpace = CGColorSpaceCreateDeviceGray();
        bitmapInfo = kCGImageAlphaNone | kCGBitmapByteOrderDefault;
    } else {
        colorSpace = CGColorSpaceCreateDeviceRGB();
        bitmapInfo = kCGBitmapByteOrder32Little | (
            cvMat.elemSize() == 3? kCGImageAlphaNone : kCGImageAlphaNoneSkipFirst
        );
    }

    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

    // Creating CGImage from cv::Mat
    CGImageRef imageRef = CGImageCreate(
        cvMat.cols,                 //width
        cvMat.rows,                 //height
        8,                          //bits per component
        8 * cvMat.elemSize(),       //bits per pixel
        cvMat.step[0],              //bytesPerRow
        colorSpace,                 //colorspace
        bitmapInfo,                 // bitmap info
        provider,                   //CGDataProviderRef
        NULL,                       //decode
        false,                      //should interpolate
        kCGRenderingIntentDefault   //intent
    );

    // Getting UIImage from CGImage
    UIImage *finalImage = [UIImage imageWithCGImage:imageRef];
    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpace);

    return finalImage; 
} 
```

并转换`UIImage`为`cv::Mat`：

```
+ (cv::Mat)cvMatWithImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
    size_t numberOfComponents = CGColorSpaceGetNumberOfComponents(colorSpace);
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;

    cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels
    CGBitmapInfo bitmapInfo = kCGImageAlphaNoneSkipLast | kCGBitmapByteOrderDefault;

    // check whether the UIImage is greyscale already
    if (numberOfComponents == 1){
        cvMat = cv::Mat(rows, cols, CV_8UC1); // 8 bits per component, 1 channels
        bitmapInfo = kCGImageAlphaNone | kCGBitmapByteOrderDefault;
    } 

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,             // Pointer to backing data
                                                cols,                       // Width of bitmap
                                                rows,                       // Height of bitmap
                                                8,                          // Bits per component
                                                cvMat.step[0],              // Bytes per row
                                                colorSpace,                 // Colorspace
                                                bitmapInfo);              // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
    CGContextRelease(contextRef);

    return cvMat;
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2015-02-24T13:56:57.883

从 opencv 2.4.6 开始，此功能已包含在内。只包括

```
opencv2/highgui/ios.h
```

在 OpenCV 3 中，此包含已更改为：

```
opencv2/imgcodecs/ios.h
```

您可以使用以下功能：

```
UIImage* MatToUIImage(const cv::Mat& image);
void UIImageToMat(const UIImage* image, cv::Mat& m, bool alphaExist = false); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-03-14T22:15:48.083

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-08T09:57:49.860

You should consider using native OpenCV functions to convert forth and back :

```
#import <opencv2/imgcodecs/ios.h>
...
UIImage* MatToUIImage(const cv::Mat& image);
void UIImageToMat(const UIImage* image,
                         cv::Mat& m, bool alphaExist = false); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-17T13:12:14.777

Here I am mentioning all the needed conversion methods together.

Converting UIImage color to UIImage gray, without using opencv and only using iOS library functions:

```
- (UIImage *)convertImageToGrayScale:(UIImage *)image
{
    // Create image rectangle with current image width/height
    CGRect imageRect = CGRectMake(0, 0, image.size.width, image.size.height);

    // Grayscale color space
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();

    // Create bitmap content with current image size and grayscale colorspace
    CGContextRef context = CGBitmapContextCreate(nil, image.size.width, image.size.height, 8, 0, colorSpace, kCGImageAlphaNone);

    // Draw image into current context, with specified rectangle
    // using previously defined context (with grayscale colorspace)
    CGContextDrawImage(context, imageRect, [image CGImage]);

    /* changes start here */
    // Create bitmap image info from pixel data in current context
    CGImageRef grayImage = CGBitmapContextCreateImage(context);

    // release the colorspace and graphics context
    CGColorSpaceRelease(colorSpace);
    CGContextRelease(context);

    // make a new alpha-only graphics context
    context = CGBitmapContextCreate(nil, image.size.width, image.size.height, 8, 0, nil, kCGImageAlphaOnly);

    // draw image into context with no colorspace
    CGContextDrawImage(context, imageRect, [image CGImage]);

    // create alpha bitmap mask from current context
    CGImageRef mask = CGBitmapContextCreateImage(context);

    // release graphics context
    CGContextRelease(context);

    // make UIImage from grayscale image with alpha mask
    UIImage *grayScaleImage = [UIImage imageWithCGImage:CGImageCreateWithMask(grayImage, mask) scale:image.scale orientation:image.imageOrientation];

    // release the CG images
    CGImageRelease(grayImage);
    CGImageRelease(mask);

    // return the new grayscale image
    return grayScaleImage;
} 
```

Converting color UIImage to color cvMat. Please note that, you will find this piece of code in several links but there is a small modification here. Notice the portion "swap channels". This part is for keeping the color undisturbed otherwise the color channel got modified.

Also notice the following lines. These lines will help to keep the orientation of the image undisturbed.

> ```
>  if  (image.imageOrientation == UIImageOrientationLeft
>          || image.imageOrientation == UIImageOrientationRight) {
>         cols = image.size.height;
>         rows = image.size.width;
>     } 
> ```

```
- (cv::Mat)cvMatFromUIImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;

    if  (image.imageOrientation == UIImageOrientationLeft
         || image.imageOrientation == UIImageOrientationRight) {
        cols = image.size.height;
        rows = image.size.width;
    }

    cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels (color channels + alpha)

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to  data
                                                    cols,                       // Width of bitmap
                                                    rows,                       // Height of bitmap
                                                    8,                          // Bits per component
                                                    cvMat.step[0],              // Bytes per row
                                                    colorSpace,                 // Colorspace
                                                    kCGImageAlphaNoneSkipLast |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
    CGContextRelease(contextRef);
    CGColorSpaceRelease(colorSpace);

    //--swap channels -- //
    std::vector<Mat> ch;
    cv::split(cvMat,ch);
    std::swap(ch[0],ch[2]);
    cv::merge(ch,cvMat);

    return cvMat;
} 
```

Converting UIImage to cvMat gray. Notice the line

> cv::Mat cvMat(rows, cols, CV_8UC4, Scalar(1,2,3,4)); // 8 bits per component, 4 channels

instead of

> cv::Mat cvMat(rows, cols, CV_8UC1); // 8 bits per component, 1 channels

This line is needed otherwise the code will throw error

```
- (cv::Mat)cvMatGrayFromUIImage:(UIImage *)image
{
    CGColorSpaceRef colorSpace = CGImageGetColorSpace(image.CGImage);
    CGFloat cols = image.size.width;
    CGFloat rows = image.size.height;

  //  cv::Mat cvMat(rows, cols, CV_8UC1); // 8 bits per component, 1 channels
    cv::Mat cvMat(rows, cols, CV_8UC4, Scalar(1,2,3,4)); // 8 bits per component, 4 channels

    CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to data
                                                    cols,                       // Width of bitmap
                                                    rows,                       // Height of bitmap
                                                    8,                          // Bits per component
                                                    cvMat.step[0],              // Bytes per row
                                                    colorSpace,                 // Colorspace
                                                    kCGImageAlphaNoneSkipLast |
                                                    kCGBitmapByteOrderDefault); // Bitmap info flags

    CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), image.CGImage);
    CGContextRelease(contextRef);
    CGColorSpaceRelease(colorSpace);
    return cvMat;
} 
```

Now finally, converting cvMat (color,binary, gray) to UIImage (color, binary, gray). Notice the line :

> ```
> UIImage *finalImage = [UIImage imageWithCGImage:imageRef scale:1 orientation:self.originalImage.imageOrientation]; 
> ```

This line will help to keep the original orientation of the image

ENJOY !!

```
-(UIImage *)UIImageFromCVMat:(cv::Mat)cvMat {
    NSData *data = [NSData dataWithBytes:cvMat.data length:cvMat.elemSize()*cvMat.total()];

    CGColorSpaceRef colorSpace;
    CGBitmapInfo bitmapInfo;

    if (cvMat.elemSize() == 1) {
        colorSpace = CGColorSpaceCreateDeviceGray();
        bitmapInfo = kCGImageAlphaNone | kCGBitmapByteOrderDefault;
    } else {
        colorSpace = CGColorSpaceCreateDeviceRGB();
        bitmapInfo = kCGBitmapByteOrder32Little | (
                                                   cvMat.elemSize() == 3? kCGImageAlphaNone : kCGImageAlphaNoneSkipFirst
                                                   );
    }

    CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

    // Creating CGImage from cv::Mat
    CGImageRef imageRef = CGImageCreate(
                                        cvMat.cols,                 //width
                                        cvMat.rows,                 //height
                                        8,                          //bits per component
                                        8 * cvMat.elemSize(),       //bits per pixel
                                        cvMat.step[0],              //bytesPerRow
                                        colorSpace,                 //colorspace
                                        bitmapInfo,                 // bitmap info
                                        provider,                   //CGDataProviderRef
                                        NULL,                       //decode
                                        false,                      //should interpolate
                                        kCGRenderingIntentDefault   //intent
                                        );

    // Getting UIImage from CGImage

    UIImage *finalImage = [UIImage imageWithCGImage:imageRef scale:1 orientation:self.originalImage.imageOrientation];
    CGImageRelease(imageRef);
    CGDataProviderRelease(provider);
    CGColorSpaceRelease(colorSpace);

    return finalImage;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-08T10:04:05.247

You should consider using native OpenCV functions to convert forth and back :

```
#import <opencv2/imgcodecs/ios.h>
...
UIImage* MatToUIImage(const cv::Mat& image);
void UIImageToMat(const UIImage* image,
                         cv::Mat& m, bool alphaExist = false); 
```

Note: if your UIImage comes from the camera, you should 'normalize' it ( [iOS UIImagePickerController result image orientation after upload](https://stackoverflow.com/questions/5427656/ios-uiimagepickercontroller-result-image-orientation-after-upload/10611036#10611036)) before converting to `cv::Mat` since OpenCV does not take into account Exif data. If you don't do that the result should be misoriented.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-05T16:47:38.090

作为一个类别：

```
#import <UIKit/UIKit.h>
#import <opencv2/core/core.hpp>
using namespace cv;

@interface UIImage (OCV)

-(id)initWithOImage:(cv::Mat)oImage;
-(cv::Mat)oImage;

@end 
```

和

```
#import "UIImage+OCV.h"

@implementation UIImage (OCV)

-(id)initWithOImage:(cv::Mat)oImage
{
  NSData *data = [NSData dataWithBytes:oImage.data length:oImage.elemSize() * oImage.total()];

  CGColorSpaceRef colorSpace;

  if (oImage.elemSize() == 1) {
    colorSpace = CGColorSpaceCreateDeviceGray();
  } else {
    colorSpace = CGColorSpaceCreateDeviceRGB();
  }

  CGDataProviderRef provider = CGDataProviderCreateWithCFData((__bridge CFDataRef)data);

  CGImageRef imageRef = CGImageCreate(oImage.cols,                                     // Width
                                      oImage.rows,                                     // Height
                                      8,                                              // Bits per component
                                      8 * oImage.elemSize(),                           // Bits per pixel
                                      oImage.step[0],                                  // Bytes per row
                                      colorSpace,                                     // Colorspace
                                      kCGImageAlphaNone | kCGBitmapByteOrderDefault,  // Bitmap info flags
                                      provider,                                       // CGDataProviderRef
                                      NULL,                                           // Decode
                                      false,                                          // Should interpolate
                                      kCGRenderingIntentDefault);                     // Intent

  self = [self initWithCGImage:imageRef];

  CGImageRelease(imageRef);
  CGDataProviderRelease(provider);
  CGColorSpaceRelease(colorSpace);

  return self;
}

-(cv::Mat)oImage
{
  CGColorSpaceRef colorSpace = CGImageGetColorSpace(self.CGImage);
  CGFloat cols = self.size.width;
  CGFloat rows = self.size.height;

  cv::Mat cvMat(rows, cols, CV_8UC4); // 8 bits per component, 4 channels

  CGContextRef contextRef = CGBitmapContextCreate(cvMat.data,                 // Pointer to backing data
                                                  cols,                       // Width of bitmap
                                                  rows,                       // Height of bitmap
                                                  8,                          // Bits per component
                                                  cvMat.step[0],              // Bytes per row
                                                  colorSpace,                 // Colorspace
                                                  kCGImageAlphaNoneSkipLast |
                                                  kCGBitmapByteOrderDefault); // Bitmap info flags

  CGContextDrawImage(contextRef, CGRectMake(0, 0, cols, rows), self.CGImage);
  CGContextRelease(contextRef);

  return cvMat;
}

@end 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-07T21:48:46.160

What I have experienced with converting between **UIImage** and **cvMat** is following:

When I used the method:

```
UIImage* MatToUIImage(const cv::Mat& image); 
```

for converting **cv::Mat** to **UIImage** and the method:

```
void UIImageToMat(const UIImage* image, cv::Mat& m); 
```

for converting **UIImage** to **cv::Mat** these methods didn't work correctly using the Simulator. After I deployed my app on a real device, there weren't any problems.

Best regards, Nazar

# c# - 如何使用 Mono 在 GTK# TextView 中设置透明背景？

> ID：10254144
> 
> 赞同：4
> 
> 时间：2012-04-20T22:00:35.733
> 
> 标签：c#, mono, textview, transparency, gtk#

我有一个带有背景图像的 Gtk.Window 。它充满了主要在 Paned 小部件中的 TextView。我希望 TextViews 具有透明背景。理想情况下，黑色和半 alpha，但我可以忍受完全透明的背景。有谁知道这是否可能？有没有办法在自定义 TextView 子类中覆盖某种 DrawBackground？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-22T05:11:38.003

我不使用 C# 只是简单的 gtk 和 c++。这应该有帮助

```
view=gtk_text_view_new ();
gtk_widget_set_opacity (view,0.2); 
```

# multithreading - 将数据并行写入磁盘？

> ID：10254147
> 
> 赞同：5
> 
> 时间：2012-04-20T22:00:51.603
> 
> 标签：multithreading, image-processing, c++-cli

所以我正在开发一个 C++/cli 图像处理库，并试图优化我的代码。基本上，我传递了一个图像的 System::Drawing::Bitmap，然后我需要将其写入磁盘，执行复杂的分析，并返回分析结果。我认为我可以将图像并行写入磁盘以加快速度（我的算法不会修改图像）。但是，我没有过多地使用线程，所以我想就如何做到这一点的最佳方式征求您的意见。

```
string ProcessImage(System::Drawing::Bitmap ^bmp, System::String^ targetFile)
{
    bmp->Save(targetFile);
    System::Drawing::Bitmap^ bmp8 = BitmapConvertPixelFormat(bmp, 8); //<-- a function I wrote which converts the 32bpp I am passed into an 8bpp one
    string results = Analyze(bmp8); //<--- takes a good bit of time
    return results;
} 
```

请让我知道你的想法。先感谢您！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T22:04:10.093

对单个机械磁盘进行并行写入/读取并不是一个好主意，因为机械头每次都需要旋转以服务于 I/O 请求，因此使用多个线程只会不必要地反弹它并产生开销。

您可以尝试进行一些基准测试，但恐怕您只能求助于使用单个线程并按顺序编写。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T22:27:43.740

将磁盘写入排队到另一个线程似乎是一个好主意，但每个磁盘只有一个写入器线程，这样复杂的分析就可以在没有慢速磁盘写入的情况下继续运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-15T16:50:30.390

如果值得的话，您可以花一些时间来了解如何使用[Parallel HDF5](http://www.hdfgroup.org/HDF5/Tutor/pprog.html)。它可以并行写入文件。

# jquery - 一个变量正在破坏我的代码

> ID：10254152
> 
> 赞同：0
> 
> 时间：2012-04-20T22:01:35.780
> 
> 标签：jquery

我正在尝试为我开发的网站构建一个自定义计算器。我是一名新开发人员，这有点过头了，但我正在努力学习。

我正在尝试获取 2 个变量并将它们组合成 1，然后使用它通过 ajax 从另一个页面调用 div。那么我遇到的问题是，当我添加代码以组合 2 个变量时，它会导致分页符，我不知道为什么。

```
 $(function(){
        $("input:radio[name=f_1]").click(function() {
          var type = $(this).val();
        });
        $("input:radio[name=f_1a]").click(function() {
          var prod = $(this).val();
        });

        var JobType = type + prod;
    }); 
```

你可以在这里看到它：[http ://rdmproductions.com/dev/](http://rdmproductions.com/dev/)

如果您选择 JobType 变量的行，则页面将按应有的方式运行。我只是不明白发生了什么以及如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:05:42.583

您的变量`type`和`prod`是局部变量，因此它们在单击处理程序回调函数之外不可用。

如果您希望它们在这些点击处理程序之外可用，那么您需要在更高级别的范围内声明它们或将它们存储在一些其他对象中，这些对象在您的点击处理程序函数的生命周期之外是持久的。

可能您想要做的是在需要时获取 type 和 prod 的值，而不是尝试将它们保留在`JobType`.

您可以像这样按需获取数据：

```
var JobType = $("input:radio[name=f_1]").val() + $("input:radio[name=f_1a]").val(); 
```

您甚至根本不需要两个单选按钮上的点击处理程序。

* * *

根据您的最新评论进行编辑：

您可以收听两个无线电组的更改，检查两者何时被选中，然后使用如下代码对组合值执行某些操作：

```
$("input:radio[name=f_1], input:radio[name=f_1a]").change(function() {
    var f1 = $("input:radio[name=f_1]:checked").val();
    var f1a = $("input:radio[name=f_1a]:checked").val();
    if (f1 && f1a) {
        // both radio buttons have been selected, do something here
        var jobType = f1 + f1a;
        // do something with jobType here
        alert(jobType);
    }
}); 
```

你可以在这里看到它的工作原理：http: [//jsfiddle.net/jfriend00/FJcTA/](http://jsfiddle.net/jfriend00/FJcTA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:05:14.983

变量 type 和 prod 仅在其相关函数的范围内有效。此外，只有在单击控件时才会触发 onclick 事件，这将在您的代码运行后的某个时间点发生。代码似乎在页面呈现时运行，因此用户无论如何都没有机会单击按钮。因此，您需要在用户有机会完成表单后的合理时间执行计算。明显的候选人将在页面上提交，或通过其他事件，例如用户单击按钮。您甚至不需要使用单选按钮中的 onclick 事件，只需连接单选按钮中的值，例如 ...

```
function onSubmit() {
    var type = $("input:radio[name=f_1]").val();
    var type = $("input:radio[name=f_1a]").val();
    var jobType = type + prod;
    // do something with jobType
} 
```

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T22:08:00.390

尝试这个：

```
$(function() {

    $("input:radio[name^=f_1]").click(function () {

      var total = 0;           

       $("input:radio[name^=f_1]").each(function () {
           total += parseInt($(this).val());
       });

   });

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T22:08:25.190

```
 $(function () {
    var type, prod, jobType;
    $("input:radio[name=f_1]").click(function() {
      type = $(this).val();
    });
    $("input:radio[name=f_1a]").click(function() {
      prod = $(this).val();
    });
    jobType = type + prod;
}); 
```

# excel - 如何在 Mac 上从数据库或电子表格生成流程图？

> ID：10254158
> 
> 赞同：1
> 
> 时间：2012-04-20T22:02:22.847
> 
> 标签：excel, filemaker, flowchart

是否有一种简单、经济的方法可以从数据库（例如 FileMaker Pro 或 MS-Access）或电子表格（例如 Apple Numbers 或 MS-Excel）生成流程图？

在 Mac 上正在寻求的是一种创建流程图节点的数据库/电子表格的方法（带有标题/文本、符号类型和链接信息）......“按下按钮”......并在视觉上有吸引力的流程图生成。

然后...检查结果...更新表...重新生成...LTD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:23:37.440

看看这个帖子。首先，您需要 OmniGraffle。接下来，您需要将 FileMaker 数据转换为 OmniGraffle XML 或使用 AppleScript。[http://forums.omnigroup.com/showthread.php?t=1860](http://forums.omnigroup.com/showthread.php?t=1860)

# c# - 当前上下文中不存在类属性分配？

> ID：10254159
> 
> 赞同：0
> 
> 时间：2012-04-20T22:02:24.383
> 
> 标签：c#, asp.net

这是我的代码：

```
DistInfo distInfo = new DistInfo
{
    if (reader.GetString( reader.GetOrdinal( "GoLiveDate" ) ) == null ) {
        AnticipatedLaunchDate = "";
    }
    else
    {
        AnticipatedLaunchDate =  reader.GetString( reader.GetOrdinal( "GoLiveDate" ) );
    }
}; 
```

这是我的课：

```
public class DistInfo
{
    public string AnticipatedLaunchDate { get; set; }
} 
```

这是说 AnticipatedLaunchDate 在当前上下文中不存在。如果它为空，是否有不同的方法为其分配一个空字符串？

我构建并运行了代码，它在第 254 行出错，这是这一行：

```
DistInfo distInfo = new DistInfo
{
    AnticipatedLaunchDate = reader.GetString( reader.GetOrdinal( "GoLiveDate" ) ) ?? ""
}; 
```

出现以下错误：

不存在数据时尝试读取无效。

这是 SQL 查询返回的数据：

```
DistID  password    GoLiveDate  FirstBonusRun   TechFName   TechLName   TechEmail   TechPhone   WebISPFName WebISPLName WebISPEmail WebISPPhone FullFillFName   FullFillLName   FullFillEmail   FullFillPhone   FName   LName   HomePhone   Email
113 !12341  NULL    NULL    John    Doe 1234@1234.com   8015555555                                          NULL    NULL    NULL    NULL    NULL    NULL    NULL    NULL    Jane    Doe 8015555555  1234@1234.com 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:18:35.723

您的字段 GoLiveDate 包含空值且 null 不是 GetString 返回的 DBNull.Value，
您不能使用 ?? 在这种情况下操作员。[（在此处查看此问题）](https://stackoverflow.com/questions/4958379/what-is-the-difference-between-null-and-system-dbnull-value) 尝试使用此代码。

编辑：

```
DistInfo distInfo = new DistInfo() {AnticipatedLaunchDate = "Some default value instead of null"}; 
int colOrdinal = reader.GetOrdinal( "GoLiveDate" ); 
if(!reader.IsDBNull(colOrdinal ) ) 
{ 
    distInfo.AnticipatedLaunchDate = reader.GetString(colOrdinal);
} 
return distInfo; 
```

# android - 如何将视图附加到 android 键盘的顶部？

> ID：10254162
> 
> 赞同：0
> 
> 时间：2012-04-20T22:03:02.997
> 
> 标签：android, android-xml

我注意到我最近下载的一个应用程序的 adview 设置方式是，当键盘处于非活动状态时，它将位于屏幕的最底部，但是当键盘弹出时，它直接位于它的顶部，我已附加 2希望能说明我试图获得任何帮助的屏幕截图将大有帮助，谢谢！

![在此处输入图像描述](../Images/ae0a4ee3fb86d38b951aadf940cd89a2.png)

![在此处输入图像描述](../Images/e7e3ebbb73eabecfae4fe7b8a492f114.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:10:17.720

如果您的父 XML 布局文件是一个 RelativeLayout，您可以在包含广告的视图上使用它：

```
android:layout_alignParentBottom="true" 
```

# android - android sql - 你如何按多列排序你的 sql 查询

> ID：10254163
> 
> 赞同：25
> 
> 时间：2012-04-20T22:03:04.000
> 
> 标签：android

我目前正在 Eclipse 中开发一个 Android 项目，但我的 SQL 查询有问题。

我正在尝试按两列以上对查询进行排序，目前我正在按 KEY_DAY_ID 执行此操作，但我也想按 KEY_START_TIME 执行此操作，但我无法使其正常工作

我的查询目前看起来像这样：

```
Cursor cursor = db.query(TABLE_SESSION, new String[] {KEY_ID, KEY_MODULE_CODE, 
            KEY_DAY_OF_WEEK, KEY_START_TIME, KEY_DURATION, KEY_SESSION_TYPE, KEY_ROOM},
            null, null, null, null, KEY_DAY_ID  + " ASC"); 
```

请让我知道你的想法。先感谢您！

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-20T22:26:17.867

db.query() 方法中的最后一个参数是 order by 子句（没有“order by”）。您需要做的就是用“，”分隔两列。所以它看起来像：

```
Cursor cursor = db.query(TABLE_SESSION, new String[] {KEY_ID, KEY_MODULE_CODE, 
        KEY_DAY_OF_WEEK, KEY_START_TIME, KEY_DURATION, KEY_SESSION_TYPE, KEY_ROOM},
        null, null, null, null, KEY_DAY_ID + " ASC, " + KEY_START_TIME  + " ASC"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-04T03:34:47.750

这对我有用

```
SQLiteCursor cursor = (SQLiteCursor) db.query(DbHelper.TIMES, colmn, null, null, null, null, DbHelper.TABLE_DAY + " ASC, " + DbHelper.TABLE_LECTURE_NO + " ASC",null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-24T15:09:50.843

您也可以在选择行中执行此操作，如下所示：

```
Cursor data = ddbb.rawQuery("SELECT * FROM vacations ORDER BY NAME ,MONTH , date ",null); 
```

在前面的代码中，第一列“NAME”的第一个概率然后将按第二个概率“MONTH”然后第三个“date”开始排列......这意味着串联工作
或：

```
Cursor data = ddbb.rawQuery("select * from vacations where NAME = ? ORDER BY MONTH AND date ",new String[]{ns}); 
```

在前面的代码中，通过使用“AND”，这两个条件并行工作

# mysql - 搜索可以在两个不同列中的数据（查询/设计）

> ID：10254166
> 
> 赞同：0
> 
> 时间：2012-04-20T22:03:09.510
> 
> 标签：mysql, database, database-design

抱歉，如果标题不清楚。我对如何规划我的数据库模式有点困惑，因为我的数据库设计技能水平要求属于高级:) 我真的可以在这里使用一些帮助。无论如何，它来了......

我需要跟踪球队的比赛细节。为了简单起见，假设我需要跟踪比赛日期、结果和参加比赛的球队。现在，我如何设计我的表，这样我就可以确保返回所有相关数据，而不必保留相同匹配的多条记录。我不确定我是否解释清楚，所以下面是一个例子。

```
match_id    team1             team2    result
________    ________    ________     ________
1           Arsenal          Chelsea    5-3
2           Manchester Utd   Arsenal    1-0
3           Liverpool        Newcastle  2-0
4           Arsenal          Everton    1-0 
```

从这些数据中，如果我搜索阿森纳比赛的 match_ids，我应该得到以下结果，1,2,4。

现在，在我所知道的基本设计中，我通常会在团队名称中搜索匹配的团队名称并返回结果。但是这里的团队名称可以在两个不同的列中，并且两者都可以相关。那么，这是我需要在设计级别上决定的事情，还是可以通过某种查询来完成的事情。

（注意：将团队存储为主场/客场不是我的要求的选项）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:05:38.377

您可以只查询两列，这不是问题：

```
select match_id
from matches
where team1 = 'Arsenal' or team2 = 'Arsenal'; 
```

（*您也可以通过将团队放在单独的表中并在匹配表中只保留他们的 id 来规范化此模式，但这并没有太大变化，您仍然需要查询两列。阅读有关数据库规范化的信息，任何 SQL 书籍都涵盖了这一点*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:19:50.883

如果每场比赛总是有两支球队，那么我认为你在这里做得很好，当查询特定球队时，你会想要搜索一列或另一列 ( `SELECT match_id FROM matches WHERE team1 = "?" OR team2 = "?"`)。

不过需要注意的是：我肯定会将分数分成两列：

```
match_id  team1           team2      score1  score2
________  ______________  _________  ______  ______
1         Arsenal         Chelsea    5       3
2         Manchester Utd  Arsenal    1       0
3         Liverpool       Newcastle  2       0
4         Arsenal         Everton    1       0 
```

这样，您以后可以在需要时查询分数。（例如大胜 = `SELECT match_id FROM matches WHERE ABS(score1 - score2) > 3;`）

如果每场比赛有可能拥有超过两支球队，那么您拥有的另一个选项应该更具可扩展性。如果是这种情况，那么您可能希望删除 match_id 上的唯一性约束并将团队/分数列从 2 删除为 1：

```
match_id    team            score
________    ________        ____
1           Arsenal         5
1           Chelsea         3
2           Manchester Utd  1
2           Arsenal         0
3           Liverpool       2
3           Newcastle       0
4           Arsenal         1
4           Everton         1 
```

当然，您肯定会接受 Sergio 的建议，将所有这些东西放在单独的表格中。“团队”可能会有不同的属性（家乡、教练姓名等），您不会想要复制这些数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T22:12:26.377

对于明星，我不会存储时间名称，我认为如果您将时间存储在其他表和 linq 中然后通过 id 会更好。

然后您可以创建一个包含列 id、match id 和 team id 的表，然后在该表中搜索团队 id！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T22:14:32.790

您可以使用此查询，它对您的程序没有问题：

从 YOUR_TABLE_NAME 中选择 YOUR_ID_FIELDS，其中 YOUR_FIELD_NAME(team1) = 'Arsenal' 或 YOUR_FIELD_NAME(team2) = 'Arsenal'；

对于 exmale（切尔西），从 YOUR_TABLE_NAME 中选择 YOUR_ID_FIELDS，其中 YOUR_FIELD_NAME(team1) = 'Chelsea' 或 YOUR_FIELD_NAME(team2) = 'Chelsea'；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T22:06:27.340

这将为您提供您想要的结果，但也可能有更好的设计。

```
Select * 
from table 
where (team1 = 'ARSENAL' or Team2 = 'ARSENAL') 
```

您可能想要分离出诸如 Team1Score Team2Score 之类的分数，否则您将无法轻松地用它们进行数学运算。

# android - KEYCODE_DPAD_CENTER 事件未在 onClick 内捕获

> ID：10254167
> 
> 赞同：1
> 
> 时间：2012-04-20T22:03:14.487
> 
> 标签：android, view, click, keyevent, keycode

我有一个扩展 ViewGroup 的自定义视图。每个子视图有 3 个状态

1.  选定状态
2.  点击状态
3.  默认状态

我已经在这个 CustomView 中实现了 onClickListener。问题是如果任何子视图处于 Selected 状态，然后按下键盘中的“中心键”（键码对应于 KEYCODE_DPAD_CENTER），那么在 onClick() 内没有收到回调。

如果单击或按下任何子级，则调用 onClick()。

谁能让我知道如何将 KEYCODE_DPAD_CENTER 事件映射到 onClick() 事件？

# android - 如何将动态加载的类转换为其接口？

> ID：10254170
> 
> 赞同：3
> 
> 时间：2012-04-20T22:03:34.457
> 
> 标签：android, dialog, classloader, classcastexception, dynamic-controls

我正在创建一个允许插件视图的家庭自动化应用程序。

我有以下代码作为概念证明：

我创建了一个带有插件接口的android库项目：

```
package com.strutton.android.UIPlugInLib;

import android.app.Dialog;

public interface IRDroidInterface  {
    public Dialog buildConfigDialog(int ID);
    // Other method signatures here
} 
```

我已经能够在一个单独的项目中创建一个类作为示例插件（并将其导出到 apk），我将其推送到我的应用程序的文件目录：

```
package com.strutton.android.testloadclass;

import com.strutton.android.UIPlugInLib.IRDroidInterface;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.Dialog;
import android.content.Context;
import android.content.DialogInterface;
import android.view.View;
import android.widget.Button;

public class MyTestClass_IRDroidUIPlugIn extends Button implements IRDroidInterface{
    public final Activity mActivity;
    public MyTestClass_IRDroidUIPlugIn(Activity activity) {
        super((Context)activity);
        mActivity = activity;
        setText("I was loaded dynamically! (1)");
        setOnClickListener(new View.OnClickListener() {  
            public void onClick(View v) {  
                setText("I was Clicked dynamically! (" + getId() +")");
            }}  
                );
    }

    public Dialog buildConfigDialog(int ID){
        AlertDialog.Builder builder = new AlertDialog.Builder((Context)mActivity);
        builder.setMessage("Click the Button...(1)")
           .setCancelable(false)
           .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    mActivity.dialogDismiss();
               }           
           });
        return builder.create();
    }
} 
```

我可以在运行时加载这个类并`onCreate()`使用以下代码创建它的一个实例（在我的）：

```
package com.strutton.android.testplugin;

        try {
        final File filesDir = this.getFilesDir();
        final File tmpDir = getDir("dex", 0);
        final DexClassLoader classloader = new DexClassLoader( filesDir.getAbsolutePath()+"/testloadclass.apk",
                tmpDir.getAbsolutePath(),
                null, this.getClass().getClassLoader());
        final Class<View> classToLoad = 
                (Class<View>) classloader.loadClass("com.strutton.android.testloadclass.MyTestClass_IRDroidUIPlugIn");
        mybutton = (View) classToLoad.getDeclaredConstructor(Context.class).newInstance(this);
        mybutton.setId(2);
        main.addView((View)mybutton);
      } catch (Exception e) {
        e.printStackTrace();
    }

    setContentView(main);
}
protected Dialog onCreateDialog(int id) {
    switch (id) {
        case 1:
                    // this is the offending line 57
            return ((IRDroidInterface) mybutton).buildConfigDialog(id);
    }
    return null;
} 
```

我希望插件能够显示插件中定义的配置对话框。当我打电话时，`buildConfigDialog(id)`我得到以下信息`ClassCastException`：

> 04-20 20:49:45.865: W/System.err(354): java.lang.ClassCastException: com.strutton.android.testloadclass.MyTestClass_IRDroidUIPlugIn 04-20
> 20:49:45.894: W/System.err(354) : 在 com.strutton.android.testplugin.TestpluginActivity.onCreate(TestpluginActivity.java:57)

我在这里想念什么？我已经在谷歌上搜索了一天半，但找不到解决方案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T04:29:10.177

我怀疑问题在于您的应用程序和加载的 dex 文件中都存在 IRDroidInterface 接口。当您动态加载 MyTestClass_IRDroidUIPlugIn 类时，由于它来自 dex 文件，因此它实现了 dex 文件中的接口类，而不是您的应用程序中的接口类。

如果您可以确保接口类不包含在插件的 dex 文件中，我相信您所拥有的应该可以正常工作。

不幸的是，如果您使用 eclipse 或 ant 构建插件 apk，这可能会很棘手。一种（相当丑陋的）解决方案是在构建后从 dex 文件中删除接口类。即用baksmali反汇编，删除接口的.smali文件，再用smali重新组装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-15T22:52:07.573

你可以使用你自定义的 DexClassLoader 实现来解决这个问题。覆盖 findclass 并仅返回您的应用程序中的接口而不是库。

```
package re.execute;

import dalvik.system.DexClassLoader;

public class DexLoader extends DexClassLoader{
    public DexLoader(String dexPath, String optimizedDirectory, String libraryPath, ClassLoader parent) {
    super(dexPath, optimizedDirectory, libraryPath, parent);
}

@Override
protected Class<?> findClass(String name) throws ClassNotFoundException {
    if("re.execute.ILoader".equals(name)){
        return ILoader.class;
    }
    return super.findClass(name);
}
} 
```

# c# - 如何将此数据库结构映射到 NHibernate？

> ID：10254179
> 
> 赞同：1
> 
> 时间：2012-04-20T22:04:20.500
> 
> 标签：c#, database, nhibernate

我有一个表，`PolygonMapping`其寄存器包含`polygon id`其他相关表的一个和其他 ID。

该`Polygon`表仅包含其`ID`.

还有一个`line`表，它的寄存器包含`polygon_ID`它的一部分和几个`points_Id`（`start point`和`end point`）。

该`point`表仅包含 2 个`coordinates`(`X`和`Y`)。

我对如何使用 NHibernate for C# 映射此数据库结构感到困惑。我希望能够轻松访问`lines`a `polygon`（所以我认为在`polygon`类中有一个行列表会很好），并且`PolygonMapping`当我想更新一个点时，我希望能够只保存类，`line`或者`polygon`. 我想让它自动完成。

请帮我！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T20:54:32.367

我将通过创建三个域模型对象来映射这个问题：一个描述点的 Point 对象，一个包含两个 Point 对象的 Line 对象，一个名为“StartPoint”，一个名为“EndPoint”，以及一个包含 IEnumerable 的 Polygon 对象行。域对象如下所示：

```
public class Point
{
    public int Id { get; set; }
    public int XVal {get; set;}
    public int YVal {get; set;}
}

public class Line
{
    public int Id {get; set;}
    public Point StartPoint {get; set;}
    public Point EndPoint {get; set;}
}
public class Polygon
{
    public Polygon()
    {
        Lines = new HashSet<Line>();
    }
    public int Id {get; set;}
    public string Description { get; set; }
    public ICollection<Line> Lines { get; set; }
} 
```

您可以使用具有每个域模型对象的表的数据库模式来持久保存此类。 ![数据库模式](../Images/98fe7d6add845f7cb0f111f67f753b70.png)

创建此数据库结构的 SQL DDL 如下：

```
create table Point
(
    PointId int primary key identity(1, 1),
    XVal int,
    YVal int
)

create table Polygon
(
    PolygonId int primary key identity(1, 1),
[Description] nvarchar(255)
)

create table Line
(
    LineId int primary key identity(1, 1),
    PolygonId int foreign key references Polygon(PolygonId),
    StartPointId int foreign key references Point(PointId),
    EndPointId int foreign key references Point(PointId)
) 
```

您的最后一项任务是编写您的 nHibernate 映射文件以将域模型映射到底层数据库表。这可以如下所示完成。请注意，我将“级联”属性设置为“全部”以满足您保存父多边形对象将更改级联到子对象的要求。

```
 <class name="Polygon" table="Polygon" lazy="false" >
    <id name="Id" column="PolygonId">
      <generator class="identity" />
    </id>
    <property name="Description" column="Description" />
    <set name="Lines" table="Line" lazy="false" cascade="all">
      <key column="PolygonId" />
      <one-to-many class="Line"  />
    </set>
  </class>

  <class name="Line" table="Line" lazy="false">
    <id name="Id" column="LineId">
      <generator class="identity" />
    </id>
    <many-to-one name="StartPoint" column="StartPointId" class="Point" cascade="all"/>
    <many-to-one name="EndPoint" column="EndPointId" class="Point" cascade="all"/>
  </class>
</hibernate-mapping> 
```

使用此映射，您可以操作父多边形对象，并且整个对象图将在保存时持久保存到数据库中。例如，要将新 Line 添加到 Polygon 对象，可以使用以下代码段：

```
 using (var session = factory.OpenSession())
        using(var tran = session.BeginTransaction())
        {
           var newPoint = session.Get<Point>(5);
           var newPoint2 = session.Get<Point>(2);
           var newLine = new Line { StartPoint = newPoint, EndPoint = newPoint2 };
            var foo2 = session.Get<Polygon>(1);
            foo2.Lines.Add(newLine);
            session.SaveOrUpdate(foo2);
            tran.Commit();
         } 
```

**编辑：** 上面的映射假设你总是想通过父多边形对象访问 Line 对象。如果您想直接访问 Lines，您可能需要将 Line 对象的多对一引用添加到 Polygon 父对象。为此，您需要将以下属性添加到 Line 类：

```
 public Polygon Polygon {get; set;} 
```

以及在 Line 映射文件中添加相应的映射：

```
<many-to-one class="Polygon" name="Polygon" lazy="false"  /> 
```

通过这些更改，您现在应该能够直接加载包含其 Polygon 父级的 Line 对象：

```
var line = session.Get<Line>(5);
var parent = line.Polygon; 
```

**编辑 2** 请注意，如果您将 Polygon-Line 关联设为双向，则需要将代码添加到域模型以确保图形一致性。例如，请参阅[此 SO 帖子](https://stackoverflow.com/questions/950776/maintaining-a-two-way-relationship-between-classes)。

# phpunit - PHPUnit 中 assertEquals 和 assertSame 的区别？

> ID：10254180
> 
> 赞同：152
> 
> 时间：2012-04-20T22:04:21.250
> 
> 标签：phpunit

PHPUnit 包含一个[`assertEquals()`](https://phpunit.de/manual/current/en/appendixes.assertions.html#appendixes.assertions.assertEquals)方法，但它也有[`assertSame()`](https://phpunit.de/manual/current/en/appendixes.assertions.html#appendixes.assertions.assertSame)一个。乍一看，他们似乎在做同样的事情。

两者有什么区别？为什么它们都被指定？

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2012-04-20T22:12:29.127

我偶尔使用两者，但根据文档：

## [`assertSame`](https://phpunit.de/manual/current/en/appendixes.assertions.html#appendixes.assertions.assertSame)

> `$message`如果两个变量`$expected`和`$actual`不具有相同的**类型**和**值**，则报告一个错误。"

正如您在上面摘录下面的示例中看到的那样，它们正在传递`'2204'`and `2204`，这将失败，`assertSame`因为一个是 a`string`并且一个`int,`基本上是一个：

```
'2204' !== 2204
assertSame('2204', 2204) // this test fails 
```

## [`assertEquals`](https://phpunit.de/manual/current/en/appendixes.assertions.html#appendixes.assertions.assertEquals)

> “如果两个变量 $expected 和 $actual 不相等，则报告由 $message 标识的错误。”

`assertEquals`似乎没有考虑数据类型，因此使用上面的示例`2204`：

```
'2204' == 2204
assertEquals('2204', 2204) // this test passes 
```

我只是针对上述示例运行了一些单元测试，实际上它们导致了记录在案的行为。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2016-06-06T09:14:36.327

当涉及到对象比较时：

### 断言相同

只能断言两个对象是否引用同一个对象实例。因此，即使两个单独的对象的所有属性都具有完全相同的值，`assertSame()`如果它们不引用同一个实例，它们也会失败。

```
$expected = new \stdClass();
$expected->foo = 'foo';
$expected->bar = 'bar';

$actual = new \stdClass();
$actual->foo = 'foo';
$actual->bar = 'bar';

$this->assertSame($expected, $actual); // FAILS 
```

### 断言等于

可以断言两个单独的对象是否在任何情况下都匹配它们的属性值。所以它是适合断言对象匹配的方法。

```
$this->assertEquals($expected, $actual); // PASSES 
```

[参考](https://phpunit.de/manual/current/en/appendixes.assertions.html)

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-01-26T10:44:50.047

```
$this->assertEquals(3, true);
$this->assertSame(3, true); 
```

第一个会过去的！

第二个会失败。

这就是区别。

我认为您应该始终使用 assertSame。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-23T13:26:14.337

如前所述，`AssertSame`如果两个元素不共享**类型**和**值，则会报告错误，**[但从文档](https://phpunit.de/manual/current/en/appendixes.assertions.html#appendixes.assertions.assertSame)中注意这一点也很重要：

> 如果两个变量 $expected 和 $actual 没有引用同一个对象，则报告由 $message 标识的错误。

所以即使它们共享类型和值，这个测试也会失败：

```
class SameTest extends TestCase
{
    public function testFailure()
    {
        $this->assertSame(new stdClass, new stdClass);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-13T15:04:57.643

而且，

```
// Passes
$this->assertSame("123.", "123.");
$this->assertEquals("123.", "123");
// Fails
$this->assertSame("123.", "123"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-14T12:03:46.457

assertSame() == 测试实际输出和预期参数是否相同。

那是 ：

```
$this->assertSame('$expected','$expected'); 
```

或者

```
$this->assertSame('100','100'); 
```

assertEquals == 如果我们看到一个网站页面，我有一个有 2 个“表”的页面，所以当我运行 assertEquals 时，我将使用计数函数检查它的计数，即“表”为 2。例如：

```
$this->assertEquals(2, $var->filter('table')->count()); 
```

在这里，我们可以看到 assertEquals 检查网页上是否找到了 2 个表。我们还可以使用括号内的“#division name”在页面上找到的分区。

例如 2：

```
public function testAdd()
{
    $calc = new Calculator();

    $result = $calc->add(30, 12);

    // assert that our calculator added the numbers correctly!
    $this->assertEquals(42, $result);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-04-24T10:23:50.130

如前所述，`assertEquals()`主要是关于一个解释值，无论是类型杂耍还是具有 __magic 表示方法的对象（`__toString()`例如）。

一个很好的用例`assertSame()`是测试单例工厂。

```
class CacheFactoryTest extends TestCase
{
    public function testThatCacheFactoryReturnsSingletons()
    {
        $this->assertSame(CacheFactory::create(), CacheFactory::create());
    }
} 
```

# function - 在 Node.js 中使用 HTML 助手？

> ID：10254181
> 
> 赞同：3
> 
> 时间：2012-04-20T22:04:32.340
> 
> 标签：function, templates, node.js, express, helper

node.js 和 express 有很多模板引擎，甚至还有这个详细的比较：[http](http://paularmstrong.github.com/node-templates/index.html) : //paularmstrong.github.com/node-templates/index.html 这让我检查了 EJS、Mu2 和 JQTpl，我花了几个小时试验哪一个最适合我的需要。

我知道已经有几个关于哪个框架最好的问题，但没有一个集中在**使用 helpers 的可能性上**。我试图与所有这些一起构建一个表单助手（如果我将一个对象传递给它，它应该呈现输入标签及其值），但我没有找到一种直接的方法来完成它。

是否有任何可推荐的模块使我能够使用助手？甚至可能使用 mustache.js（对我来说，这感觉是我尝试过的最好的）？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:41:00.363

我无法将您指向您正在寻找的比较，但我看过的几乎所有模板引擎都有帮助工具。

如果您使用的是 Express（您在问题中提到），您可以告诉 Express 您想要向您使用的任何模板引擎公开哪些帮助程序（通过“视图引擎”应用程序变量设置） - 请参阅[Express的以下部分详细指南](http://expressjs.com/guide.html)：

*   查看渲染 - 解释如何配置 Express 以使用特定的模板引擎。该示例引用了 Jade，它默认与 Express 一起安装，并且确实支持帮助程序。
*   Server.helpers() - 如何注册静态视图助手以传递给您的模板
*   Server.dynamicHelpers() 如何注册可以访问请求和响应对象的助手

一些模板引擎内置了对 Express 的支持，尽管它们可能需要额外的配置步骤。我偏爱 CoffeeKup（以及更新的 fork coffeecup），它可以让你在 Coffeescript 中写下你的观点；启用自动编译需要额外调用 Express 服务器对象（并在文档中介绍）：

```
app.register('.coffee', coffeecup.adapters.express); 
```

其他人可能会提供额外的节点包，您可能会觉得`npm search express-`很有指导意义。例如，[快速车把](https://github.com/jayferd/express-handlebar)专门修复`app.helpers()`并`app.dynamicHelpers()`与车把一起使用。（免责声明：我没有亲自使用过这个模块）。

# delphi - TListItem 对象

> ID：10254190
> 
> 赞同：1
> 
> 时间：2012-04-20T22:05:25.657
> 
> 标签：delphi, vcl, listitem

我想对以下情况进行编程：

我在一个表单中有 2 个不同的 ListView。我想将 ListView2 中的特定项目附加到 ListView1 项目中。在“父”项被删除后，它还应该从 ListView2 中删除所有附加的项。到目前为止我试过这个：

```
type
 TITEMS = record
 A_Items : array of TListItem;
end; 
```

将项目添加到 ListView1 (ParentItems) 的 Button

```
var
 item : TListItem;
begin
 item := ListView1.Items.Add;
 item.Caption := 'ParentTestItem';
 item.SubItems.Add('TestSubItem'); 
```

将项目添加到 ListView2 (ChildItems) 的按钮

```
 var
  item : TlistItem;
  items : TITEMS;
 begin
  if ListView1.Selected = NIL then exit; // Make sure an item is selected.
  item := ListView2.Items.Add;
  item.Caption := 'ChildTestItem';
  item.SubItems.Add('TestSubItem');
  SetLength (items.item, Length(items.item) + 1); // wrong? 
  items.item[Length(items.item)-1] := item;
  ListView1.Selected.SubItems.Objects[0] := @items; 
```

删除 ParentItem 的按钮（它也应该删除 ChildItems ......）

```
 var
   items : TItems;
   i : Integer;
   item : TlistItem;
  begin
   if ListView1.Selected = NIL then exit; // Make sure an item is selected.
   items := TItems(ListView1.Selected.SubItems.Objects[0]); // Cast
   for i := 0 to Length (items.item) - 1 do begin
    item := items.item[i];
    item.Delete;
   end;
   ListView1.Selected.Free; 
```

任何想法我怎么能意识到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T22:58:52.240

您需要在堆上动态分配项目列表，而不是在堆栈上本地分配，因此在您使用它时它在内存中保持有效。

我建议使用 a`TList`而不是数组，它更容易动态分配。我还建议使用该`TListItem.Data`属性而不是该`TListItem.SubItems.Objects[]`属性（除非您已经将该`Data`属性用于其他用途）。

```
procedure TForm1.AddParentBtnClick(Sender: TObject);
var 
  item : TListItem; 
begin 
  item := ListView1.Items.Add; 
  item.Caption := 'ParentTestItem'; 
  item.SubItems.Add('TestSubItem'); 
end;

procedure TForm1.AddChildBtnClick(Sender: TObject);
var 
  Selected, item : TListItem; 
  items : TList; 
begin 
  Selected := ListView1.Selected;
  if Selected = nil then Exit; // Make sure an item is selected. 

  items := TList(Selected.Data);
  if items = nil then begin
    items := TList.Create;
    Selected.Data := items;
  end;

  item := ListView2.Items.Add; 
  try
    item.Caption := 'ChildTestItem'; 
    item.SubItems.Add('TestSubItem'); 
    items.Add(item); 
  except
    item.Delete;
    raise;
  end;
end;

procedure TForm1.DeleteParentBtnClick(Sender: TObject);
var
  Selected : TListItem; 
begin
  Selected := ListView1.Selected;
  if Selected <> nil then Selected.Delete;
end;

procedure TForm1.ListView1Deletion(Sender: TObject; Item: TListItem);
var 
  items : TList; 
  i : Integer; 
begin 
  items := TList(Item.Data); // Cast 
  if items <> nil then begin
    for i := 0 to items.Count - 1 do begin 
     TListItem(items[i]).Delete; 
    end; 
    items.Free;
    Item.Data := nil;
  end;
end; 
```

# cocoa-touch - NSNumberFormatter 读取字符串时的舍入行为？

> ID：10254201
> 
> 赞同：2
> 
> 时间：2012-04-20T22:06:20.373
> 
> 标签：cocoa-touch, cocoa

我有这个示例代码：

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
NSString *numberString = @"9.2";
NSNumber *number = [formatter numberFromString:numberString];
NSLog(@"String: %@, Number: %@", numberString, number); 
```

打印的结果是：

```
String: 9.2, Number: 9.199999999999999 
```

我不明白为什么会发生这种情况。我错过了一个设置吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:27:47.120

根据[this reference](http://www.cocoadev.com/index.pl?NSNumber)， an`NSNumber`可以存储任何普通的C 数字类型。由于这是通过解析非整数获得的，因此可供选择的两种类型是`float`和`double`，并且通过显示的值，选择的表示是`double`。

由于像 9.2 这样的小数不能完全表示为`double`s，因此您会得到最接近的可表示数字。显示为默认精度，大约为小数点后 16 位。

# c# - 允许管理员创建新列？

> ID：10254202
> 
> 赞同：0
> 
> 时间：2012-04-20T22:06:21.793
> 
> 标签：c#, asp.net-mvc-3, database-design

我想要做的是允许管理员创建问卷。每次用户为产品撰写评论时，他们还必须填写一份问卷。这是一个教育模拟。

我目前正在使用 Visual Studio，并且正在用 C# 开发一个 ASP.NET MVC3 网站。我还使用/拥有 SQL Server 2008 和 SQL Management Studio。

我很难考虑最好的方法来做到这一点。

现在我的解决方案是说“你最多可以问 10 个问题”，然后在我的数据库中有一个“问题”表，并存储每个评论的所有答案，每个评论有 10 个“答案”列。

更好的是，如果我能以某种方式允许管理员提出他们想要的尽可能多的问题，并根据需要向我的数据库表中添加更多列。有没有办法做到这一点？

或者有没有更好的方法来设计我的数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:08:27.327

只需给自己一个`Answers`具有外键的子表即可`Questions`。然后，您可以根据需要获得尽可能多的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T22:08:40.177

这不是很正常化。

您应该有一个表格，其中每个问题/答案对都有一条记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T22:09:16.973

您将需要一个表来存储`Questions`. 和一个单独的表来存储`Answers`. 然后，该表可以在其回答`Answers`中具有记录的外键。`Questions`

# java - 如何基于 web-source 创建 Eclipse 项目

> ID：10254205
> 
> 赞同：0
> 
> 时间：2012-04-20T22:06:35.507
> 
> 标签：java

如何基于 web 源创建 Eclipse 项目，例如这个：[http ://svn.openstreetmap.org/applications/viewer/jmapviewer/](http://svn.openstreetmap.org/applications/viewer/jmapviewer/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:14:08.857

1）您指出的“jmapviewer”应用程序是Java/Swing 程序。它实际上不是一个“网络程序”——源代码恰好可用于网络。

2）总的来说，我建议：

> a) 查看文件系统的完整项目源代码（例如通过网络，使用 SVN）
> 
> b) 创建一个适当类型的 Eclipse 项目（这里是一个 Java/Swing 项目）
> 
> c) 将文件系统中的源代码导入项目

3) 但是，在这种情况下，它看起来*已经*是一个 Eclipse 项目。

只需从 Eclipse 导入项目 - 应该就这么简单！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:11:09.613

您链接的源代码用于 Eclipse 项目。您可以简单地将其导入 IDE。

```
File->Import->General->Existing Projects Into Workspace 
```

很明显，您必须先从网站下载源代码。这对我来说很好：

```
cd somedir
svn co http://svn.openstreetmap.org/applications/viewer/jmapviewer/ 
```

从您将源下载到的文件夹中导入 Eclipse。

# python - 使用 MatPlotLib 书写颜色和线条

> ID：10254207
> 
> 赞同：3
> 
> 时间：2012-04-20T22:07:03.350
> 
> 标签：python, matplotlib, graphing

我正在尝试使用 Matplotlib 绘制曲线族。我直接使用图表绘制数据`scatter()`，然后使用`plot()`. 不知道事先会有多少组数据，或者限制等。

我需要能够循环这些线和点的颜色，以便一组数据中的所有内容都匹配。Plot 使用一些内部默认值旋转颜色，并且 scatter 作为所有一种颜色出现。数据集可以靠得很近，所以只是假设从哪些点接近哪条拟合线是不够好的，并且因为我不知道手动制作颜色会有多少条曲线选择是不可扩展的。

此外，因为这些是曲线族（想想晶体管图），我需要能够用曲线显示相关标签。我想做的是将信息写在适合线本身上。

有谁知道其中任何一个的好方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-21T06:53:49.263

这试图回答你所有的问题。下面的代码最多循环 7 种颜色。如果您需要更多，您应该创建一个更复杂的生成器，如另一个答案所示。

```
import numpy as np
from matplotlib import pyplot as plt

def get_color():
    for item in ['r', 'g', 'b', 'c', 'm', 'y', 'k']:
        yield item

x = 0.3 * np.array(range(40))

color = get_color()

for group in range(5):
    # generates a collection of points
    y = np.exp2(x + 0.5 * group)
    # fit to a polynomial
    z = np.polyfit(x, y, 6)
    p = np.poly1d(z)

    acolor = next(color)

    plt.scatter(x, y, color=acolor, marker='o')
    plt.plot(x, p(x), acolor + '-', label=str(group))

plt.legend()
plt.xlim((0, 15))
plt.show() 
```

![在此处输入图像描述](../Images/b3bb90347007cb3833c9905341783b2a.png)

上面代码中的生成器对于示例来说有点矫枉过正，但它为更复杂的计算提供了结构。如果您只需要几种颜色，则可以使用简单的迭代器

```
>>> color = iter(list_of_colors)
>>> acolor = next(color) 
```

如果您需要无休止地循环，您可以使用`itertools.cycle`：

```
>>> from itertools import cycle
>>> color = cycle(['r', 'g', 'b', 'c', 'm', 'y', 'k'])
>>> next(color)
'r'
>>> 
```

**编辑：**您有多种选择来获得 n 种不同的颜色。正如我之前指出的，您可以使用其他答案中指示的方法使用生成器。例如，用`get_color`不同的生成器替换：

```
import colorsys
import numpy as np
from matplotlib import pyplot as plt

def get_color(color):
    for hue in range(color):
        hue = 1\. * hue / color
        col = [int(x) for x in colorsys.hsv_to_rgb(hue, 1.0, 230)]
        yield "#{0:02x}{1:02x}{2:02x}".format(*col)

x = 0.3 * np.array(range(40))

color = get_color(15)

for group in range(15):
    # generates a collection of points
    y = np.exp2(x + 0.5 * group)
    # fit to a polynomial
    z = np.polyfit(x, y, 6)
    p = np.poly1d(z)

    acolor = next(color)

    plt.scatter(x, y, color=acolor, marker='o')
    plt.plot(x, p(x), color=acolor, linestyle='dashed', label=str(group))

plt.legend()
plt.xlim((0, 15))
plt.show() 
```

你会得到 15 种不同的颜色。

![在此处输入图像描述](../Images/249dc51f92bfdf5dc6d10f37cd95d7e8.png)

然而，相似的颜色是连续的，不能提供良好的分辨率/对比度。您可以通过跳过色调值来增加对比度：

```
for hue in range(0, color*3, 3): 
```

绘制多条线时的另一个问题是图例......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T22:27:37.417

我有一个类似的情况，我想为多行提供相同的颜色，同时仍然支持任意数量的行，而无需手动定义它们。这是我想出的生成颜色的函数：

```
import colorsys

def get_colors(i, total):
    hue = i*(1.0/total)
    dark = [int(x) for x in colorsys.hsv_to_rgb(hue, 1.0, 100)]
    light = [int(x) for x in colorsys.hsv_to_rgb(hue, 1.0, 230)]
    return "#{0:02x}{1:02x}{2:02x}".format(*dark), "#{0:02x}{1:02x}{2:02x}".format(*light) 
```

如您所见，它`total`在深色和浅色版本中生成具有最大距离的颜色。

# c# - 如何使用带有 GET 的表单来利用查询字符串，但查询字符串中没有 VIEWSTATE？

> ID：10254208
> 
> 赞同：0
> 
> 时间：2012-04-20T22:07:18.003
> 
> 标签：c#, query-string, viewstate

我正在尝试创建一个使用 GET 方法的 C# 网页，以便我可以为表单数据添加书签、通过电子邮件将其发送给其他人等，但是将表单方法更改为 GET 会导致包含 VIEWSTATE 的查询字符串。我可以取出 runat=server 标签（如此[处](https://stackoverflow.com/questions/1309610/preventing-asp-net-viewstate-from-being-transmitted-in-querystring-via-form-get)所述），但我不知道如何设置表单字段的值。我不介意手动持久化它们，但我不知道如何。

那么，我如何利用视图状态但将其保留在我的查询字符串之外，或者在没有 runat=server 的情况下访问表单控件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:13:16.367

例如，如果您在网页上使用想要通过 GET 的搜索/过滤表单，这是我在自己的代码中多次使用的模式。当用户提交一个按钮来处理他们在表单中输入的内容时，我让它像往常一样作为 POST 命中我的代码隐藏。然后我手动构造一个 GET 请求并重定向到它：

```
protected void BtnSubmit_Click(object sender, EventArgs e)
{
    var query =
        "?filter1=" + TxtFilter1.Text +
        "&filter2=" + TxtFilter2.Text +
        "&filter3=" + TxtFilter3.Text; // etc.
    Response.Redirect(query);
} 
```

然后在页面加载时，我处理查询字符串中的条目以预填充页面上的相关表单控件：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        TxtFilter1.Text = Request.QueryString["filter1"] ?? "";
        TxtFilter2.Text = Request.QueryString["filter2"] ?? "";
        TxtFilter3.Text = Request.QueryString["filter3"] ?? "";
        // etc.
    }
} 
```

这使我可以控制实际进入 QueryString 的内容，而不会弄乱由 ASP.Net 管理的内置表单 POST（包括视图状态）。此外，当用户填写表单并按下按钮时，他们有一个可链接的 url，即使它是一个 POST，如果他们刷新页面，他们也不会收到关于将数据重新发送到服务器的烦人消息.

# python - 如何在一对一关系可能不同的反向一对一关系中 prefetch_related？

> ID：10254212
> 
> 赞同：6
> 
> 时间：2012-04-20T22:07:59.640
> 
> 标签：python, sql, django

假设我有一个包含电影、书籍和软件的数据库，它们都继承了一个 Item 模型。

```
class Item(models.Model):
    ...

class Movie(models.Model):
    item = models.OneToOneField(Item)
    ...

class Book(models.Model):
    item = models.OneToOneField(Item)
    ...

class Software(models.Model):
    item = models.OneToOneField(Item)
    ... 
```

现在我想对项目进行数据库查询，但我想获取与该项目相关的对象，无论是电影、书籍还是软件。如果所有项目都是一种类型，例如电影，那么我可以执行以下操作：

```
Item.objects.prefetch_related('movie') 
```

但是，无论它是什么类型，我都需要能够获取相关对象。我可以运行：

```
Item.objects.prefetch_related('movie', 'book', 'software') 
```

无论它是什么类型，这都会找到相关的对象，这是否有效？有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T00:30:50.197

我假设`OneToOneField`s 已`related_name`设置为您的 QuerySet 示例所指示的，即`'movie'`,`'book'`和`'software'`。

要向后遍历您不需要的一对一关系`prefetch_related`，这很容易通过`LEFT OUTER JOIN`自动生成的`select_related`. 这意味着，你应该能够做到

```
Item.objects.select_related('movie', 'book', 'software') 
```

并且每个返回的 Item 实例将自动包含相应的缓存实例`Movie`，`Book`并且`Software`（当然，如果有的话）。

`prefetch_related`仅当您想要避免具有多对多或多对一关系的 O(N) 查询问题时才需要，即`ManyToManyField`使用`ForeignKey`.

# android - oAuth 用于 android/twitter 开发的 CALLBACKURL 问题（版本 2.3.3）

> ID：10254220
> 
> 赞同：0
> 
> 时间：2012-04-20T22:08:30.247
> 
> 标签：android, android-intent, twitter, twitter-oauth, signpost

我正在将 Twitter oAuth 系统用于我的应用程序，特别是遵循本教程： http: [//www.markhneedham.com/blog/2012/01/02/learning-android-authenticating-with-twitter-using-oauth /](http://www.markhneedham.com/blog/2012/01/02/learning-android-authenticating-with-twitter-using-oauth/)。我似乎收到了基于我的回调 URL 的错误，我只是无法在任何地方找到有关如何正确执行此操作的解决方案或正确信息。我的应用程序的名称是啁啾，生病发布代码和错误，任何帮助将不胜感激！

注意：当我尝试通过 twitter 开发人员在我的应用程序页面上设置它们时，很多教程都有 CALLBACKURL 的随机 Twitter URL，例如“app://twitter”，它们是“无效 URL”。目前，我在我的应用程序的开发人员页面和代码中都将 CALLBACKURL 设置为[http://crownseal.ca](http://crownseal.ca)（随机站点）。

```
package me.chirpee.tom;

import oauth.signpost.OAuthProvider;
import oauth.signpost.basic.DefaultOAuthProvider;
import oauth.signpost.commonshttp.CommonsHttpOAuthConsumer;   
import android.app.Activity;
import android.content.Intent;  
import android.content.SharedPreferences;
import android.net.Uri;
import android.os.Bundle;
import android.provider.SyncStateContract.Constants;
import android.util.Log;
import android.view.View;
import android.webkit.WebView;
import android.widget.Button;
import android.widget.Toast;

public class Chirpee extends Activity 
{
    //variables
    private String CALLBACKURL = "http://crownseal.ca";
    private String consumerKey = "----";
    private String consumerSecret = "----";
    private OAuthProvider httpOauthprovider = new DefaultOAuthProvider("https://api.twitter.com/oauth/request_token", "https://api.twitter.com/oauth/access_token", "https://api.twitter.com/oauth/authorize");
    private CommonsHttpOAuthConsumer httpOauthConsumer = new CommonsHttpOAuthConsumer(consumerKey, consumerSecret);

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);

      Button oauth = (Button) findViewById(R.id.button1);
      oauth.setOnClickListener(new View.OnClickListener() 
      {
        public void onClick(View v) 
        {
          try 
          {
            String authUrl = httpOauthprovider.retrieveRequestToken(httpOauthConsumer, CALLBACKURL);
            Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(authUrl));
            v.getContext().startActivity(intent);
          } 
          catch (Exception e) 
          {
            Log.w("oauth fail", e);
            Toast.makeText(v.getContext(), e.getMessage(), Toast.LENGTH_LONG).show();
          }
        }
      });//end onClickListener()

    }//end onCreate()

    @Override
    protected void onNewIntent(Intent intent) {
      super.onNewIntent(intent);

      Log.w("redirect-to-app", "going to save the key and secret");

      Uri uri = intent.getData();
      if (uri != null && uri.toString().startsWith(CALLBACKURL)) {

          String verifier = uri.getQueryParameter(oauth.signpost.OAuth.OAUTH_VERIFIER);

          try {
              // this will populate token and token_secret in consumer

              httpOauthprovider.retrieveAccessToken(httpOauthConsumer, verifier);
              String userKey = httpOauthConsumer.getToken();
              String userSecret = httpOauthConsumer.getTokenSecret();

              // Save user_key and user_secret in user preferences and return
              SharedPreferences settings = getBaseContext().getSharedPreferences("your_app_prefs", 0);
              SharedPreferences.Editor editor = settings.edit();
              editor.putString("user_key", userKey);
              editor.putString("user_secret", userSecret);
              editor.commit();

          } catch (Exception e) {

          }
      } else {
          // Do something if the callback comes from elsewhere
      }
    } 
```

}

在我的清单文件中，我有以下内容：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="me.chirpee.tom"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:label="@string/app_name"
        android:name=".Chirpee" 
        android:launchMode="singleInstance">

        <intent-filter >
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <!-- Used for OAuth callback -->
        <intent-filter>
        <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="http" android:host="crownseal.ca" />
         </intent-filter>

    </activity>
</application>

</manifest> 
```

我的错误如下：

```
04-20 18:01:26.017: D/AndroidRuntime(1128): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
04-20 18:01:26.017: D/AndroidRuntime(1128): CheckJNI is ON
04-20 18:01:26.726: D/AndroidRuntime(1128): Calling main entry com.android.commands.pm.Pm
04-20 18:01:26.766: D/AndroidRuntime(1128): Shutting down VM
04-20 18:01:26.786: D/dalvikvm(1128): GC_CONCURRENT freed 101K, 71% free 297K/1024K, external 0K/0K, paused 2ms+1ms
04-20 18:01:26.786: D/dalvikvm(1128): Debugger has detached; object registry had 1 entries
04-20 18:01:26.816: I/AndroidRuntime(1128): NOTE: attach of thread 'Binder Thread #3' failed
04-20 18:01:27.236: D/AndroidRuntime(1138): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
04-20 18:01:27.236: D/AndroidRuntime(1138): CheckJNI is ON
04-20 18:01:27.897: D/AndroidRuntime(1138): Calling main entry com.android.commands.am.Am
04-20 18:01:27.937: I/ActivityManager(60): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=me.chirpee.tom/.Chirpee } from pid 1138
04-20 18:01:27.947: W/redirect-to-app(1099): going to save the key and secret
04-20 18:01:27.957: D/AndroidRuntime(1138): Shutting down VM
04-20 18:01:27.977: D/dalvikvm(1138): GC_CONCURRENT freed 102K, 69% free 319K/1024K, external 0K/0K, paused 2ms+2ms
04-20 18:01:27.977: D/dalvikvm(1138): Debugger has detached; object registry had 1 entries
04-20 18:01:28.007: I/AndroidRuntime(1138): NOTE: attach of thread 'Binder Thread #3' failed
04-20 18:01:33.676: W/oauth fail(1099): oauth.signpost.exception.OAuthCommunicationException: Communication with the service provider failed: api.twitter.com
04-20 18:01:33.676: W/oauth fail(1099):     at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:214)
04-20 18:01:33.676: W/oauth fail(1099):     at oauth.signpost.AbstractOAuthProvider.retrieveRequestToken(AbstractOAuthProvider.java:69)
04-20 18:01:33.676: W/oauth fail(1099):     at me.chirpee.tom.Chirpee$1.onClick(Chirpee.java:41)
04-20 18:01:33.676: W/oauth fail(1099):     at android.view.View.performClick(View.java:2485)
04-20 18:01:33.676: W/oauth fail(1099):     at android.view.View$PerformClick.run(View.java:9080)
04-20 18:01:33.676: W/oauth fail(1099):     at android.os.Handler.handleCallback(Handler.java:587)
04-20 18:01:33.676: W/oauth fail(1099):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-20 18:01:33.676: W/oauth fail(1099):     at android.os.Looper.loop(Looper.java:123)
04-20 18:01:33.676: W/oauth fail(1099):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-20 18:01:33.676: W/oauth fail(1099):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 18:01:33.676: W/oauth fail(1099):     at java.lang.reflect.Method.invoke(Method.java:507)
04-20 18:01:33.676: W/oauth fail(1099):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-20 18:01:33.676: W/oauth fail(1099):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-20 18:01:33.676: W/oauth fail(1099):     at dalvik.system.NativeStart.main(Native Method)
04-20 18:01:33.676: W/oauth fail(1099): Caused by: java.net.UnknownHostException: api.twitter.com
04-20 18:01:33.676: W/oauth fail(1099):     at java.net.InetAddress.lookupHostByName(InetAddress.java:497)
04-20 18:01:33.676: W/oauth fail(1099):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:294)
04-20 18:01:33.676: W/oauth fail(1099):     at java.net.InetAddress.getAllByName(InetAddress.java:256)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:69)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:48)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection$Address.connect(HttpConnection.java:322)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionPool.get(HttpConnectionPool.java:89)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getHttpConnection(HttpURLConnectionImpl.java:285)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.makeConnection(HttpURLConnectionImpl.java:267)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.makeSslConnection(HttpsURLConnectionImpl.java:406)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl$HttpsEngine.makeConnection(HttpsURLConnectionImpl.java:387)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.connect(HttpURLConnectionImpl.java:205)
04-20 18:01:33.676: W/oauth fail(1099):     at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.connect(HttpsURLConnectionImpl.java:152)
04-20 18:01:33.676: W/oauth fail(1099):     at oauth.signpost.basic.DefaultOAuthProvider.sendRequest(DefaultOAuthProvider.java:48)
04-20 18:01:33.676: W/oauth fail(1099):     at oauth.signpost.AbstractOAuthProvider.retrieveToken(AbstractOAuthProvider.java:177)
04-20 18:01:33.676: W/oauth fail(1099):     ... 13 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:17:10.177

我认为这可能是相关的，但我没有`Internet`在清单文件中看到权限

# php - 像redmine这样的codeigniter中的自定义URL映射？

> ID：10254224
> 
> 赞同：0
> 
> 时间：2012-04-20T22:09:01.920
> 
> 标签：php, .htaccess, codeigniter, redmine

所以 redmine 有一种我观察到的非常奇特的 url 映射样式：

```
http://demo.redmine.org/projects/<project-name>/controller/action 
```

样品：

```
http://demo.redmine.org/projects/produto/activity
http://demo.redmine.org/projects/produto/issues/new
http://demo.redmine.org/projects/produto/issues/gantt
http://demo.redmine.org/projects/produto/files 
```

并且 url 会随着项目的变化而变化。

我如何在 codeigniter 中做到这一点？我认为它可以用 routes.php 完成，但到目前为止我无法到达任何地方。

寻求任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T22:26:29.620

在“application/controllers/projects.php”控制器中使用以下函数：

```
public function _remap($method)
{
    if ($method == 'project-name')
    {
        //display project1
    }
    elseif($method == 'project-name2')
    {
        //display project2
    }
} 
```

您可以通过从数据库中提取它们来对不同的方法执行相同的操作

看看这里： [http ://codeigniter.com/user_guide/general/controllers.html#remapping](http://codeigniter.com/user_guide/general/controllers.html#remapping)

您还可以使用 application/config/routes.php 中的自定义路由来路由控制器

```
$route['example'] = "controller/function";
$route['example2/(:any)'] = "controller/function"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T22:14:53.197

您使用 application/config/routes.php 中的路由文件您将使用如下内容：

```
// the $1 maps to :any
$route['projects/produto/:any'] = "$1";

// the $1 maps to the first any, $2 maps to the second :any
$route['projects/produto/:any/:any'] = "$1/$2"; 
```

如果您正在处理干净的 URL，您将希望启用 mod_rewrite。否则期待 index.php/controller/action。我不能在那里自己测试，但你应该参考：

添加路由后（必须在配置中调用 $route[]），刷新页面并尝试转到 URL！

[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T22:14:06.250

将此添加到您的 routes.php （顺便说一句：您需要启用 url-rewriting 才能使路由工作，即使用`.htaccess`）

```
$route['projects/(:any)/(:any)/(:any)'] = "$2/$3/$1"; 
```

例如`/projects/produto/issues/new`将在类问题中调用函数 new 并将参数'produto'传递给它

还要检查[http://codeigniter.com/user_guide/general/routing.html](http://codeigniter.com/user_guide/general/routing.html)

# iphone - NSURLRequest POST 导致提交空白

> ID：10254226
> 
> 赞同：0
> 
> 时间：2012-04-20T22:09:37.703
> 
> 标签：iphone, objective-c, ios, json

我正在尝试将数据发布到 JSON 网络服务。如果我这样做，我可以成功：

`curl -d "project[name]=hi&project[description]=yes" http://mypath.com/projects.json`

我正在尝试使用这样的代码来完成它：

```
 NSError *error = nil;
 NSDictionary *newProject = [NSDictionary dictionaryWithObjectsAndKeys:self.nameField.text, @"name", self.descField.text, @"description", nil];
 NSLog(@"%@", self.descField.text);
 NSData *newData = [NSJSONSerialization dataWithJSONObject:newProject options:kNilOptions error:&error];
 NSMutableURLRequest *url = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://mypath.com/projects.json"]];
 [url setHTTPBody:newData];
 [url setHTTPMethod:@"POST"];
 NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:url delegate:self]; 
```

我的请求创建了一个新条目，但该条目的名称和描述均为空白。上面代码中的我的 NSLog 会产生适当的输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:24:17.537

你在这里混淆了两件事。Web 服务返回 JSON 结果`http://mypath.com/projects.json`，但在您的 curl 示例中，您的 HTTP 正文是一个普通的旧查询字符串表单正文。要完成这项工作，您需要执行以下操作：

```
NSError *error = nil;
NSString * newProject = [NSString stringWithFormat:@"project[name]=%@&project[description]=%@", self.nameField.text, self.descField.text];
NSData *newData = [newProject dataUsingEncoding:NSUTF8StringEncoding allowLossyConversion:YES]; // read docs on dataUsingEncoding to make sure you want to allow lossy conversion
NSMutableURLRequest *url = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://mypath.com/projects.json"]];
[url setHTTPBody:newData];
[url setHTTPMethod:@"POST"];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:url delegate:self]; 
```

这将等同于您在上面所做的 curl 调用。或者，如果您想使用 curl 发布 JSON（就像您的 ObjC 代码示例所做的那样），您可以这样做：

`curl -d '"{\"project\":{\"name\":\"hi\",\"project\":\"yes\"}}"' -H "Content-Type: application/json" http://mypath.com/projects.json`

# vb.net - 快捷键 Ctrl + - 不工作 vb

> ID：10254229
> 
> 赞同：2
> 
> 时间：2012-04-20T22:10:14.077
> 
> 标签：vb.net, keyboard-shortcuts

我有以下代码：

```
Private Sub myGrid_KeyDown(ByVal sender As System.Object, ByVal e As    System.Windows.Forms.KeyEventArgs) Handles myGrid.KeyDown
    If e.KeyCode = Keys.Divide AndAlso e.Control Then
        Dim response = MsgBox("are you sure to delete a record?", vbYesNo)
        If response = vbYes Then
            //Delete the record
        End If
    End If
End Sub 
```

这有效（对于`Ctrl`+ `/`），但问题是这适用于任何不同于`-`. 如果我指定 Keycode 是 Keys.Subtract （使用`Ctrl`+ `-`）它永远不会被抓住！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T01:14:30.897

“-”的键码是`Keys.OemMinus`. 用于`Debug.WriteLine(e.KeyCode.ToString())`测试您按的是什么键。以下对我有用：

```
Private Sub myGrid_KeyDown(ByVal sender As System.Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles myGrid.KeyDown
    If e.KeyCode = Keys.OemMinus AndAlso e.Control Then
        Dim response = MsgBox("are you sure to delete a record?", vbYesNo)
        If response = vbYes Then
            '//Delete the record
        End If
    End If
    Debug.WriteLine(e.KeyCode.ToString())
End Sub 
```

# facebook - 社交插件，如按钮评论对话框不显示

> ID：10254235
> 
> 赞同：0
> 
> 时间：2012-04-20T22:11:51.870
> 
> 标签：facebook, facebook-like

我正在使用社交插件在我的网站中嵌入一个赞按钮。我从类似按钮文档 (http://developers.facebook.com/docs/reference/plugins/like/) 中生成的代码开始。我正在使用没有发送或面孔的标准布局。按钮本身显示并且工作正常。但是，不会显示评论对话框。

我找到了一些建议来完成这项工作，但到目前为止都没有成功。宽度为 450 像素。我尝试了 HTML5、XFBML 和 IFrame 版本。IFrame 版本有“添加评论”链接。该对话框显示但被切断。我还使用了 FB.init。这是我的html。我删除了除了类似按钮位之外的所有内容，认为它可能与 CSS 相关，但精简后的版本也不起作用。

```
<!DOCTYPE html>
<html xmlns:fb="http://ogp.me/ns/fb#">
<body>
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'appid', // App ID
      channelUrl : '//localhost:8282/myapp/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });

    // Additional initialization code here
  };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

<!-- <div class="fb-like" data-href="http://www.espn.com" data-send="false" data-show-faces="false" data-width="450"></div> -->

<fb:like href="http://www.espn.com" send="false" width="450" show_faces="false" />

</body>
</html> 
```

有时，它只需要第二双眼睛。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T06:16:56.817

尝试替换`"connect.facebook.net/en_US/all.js"`为`"http://connect.facebook.net/en_US/all.js"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T23:12:45.683

评论框仅适用于公共领域。换句话说，它不会在本地主机上运行您的应用程序时显示。我相信我确实在某个地方的 stackoverflow 上读过这个，但它没有注册。

# android - PhoneGap Facebook 插件连接安卓

> ID：10254240
> 
> 赞同：1
> 
> 时间：2012-04-20T22:12:53.150
> 
> 标签：android, facebook, plugins, cordova, connect

我在使用带有[PhoneGap的](http://en.wikipedia.org/wiki/PhoneGap)[Facebook Connect](http://en.wikipedia.org/wiki/Facebook_Platform#Facebook_Connect)插件时遇到问题。

我已将此行添加到文件中`plugins.xml`：

```
<plugin name="com.phonegap.facebook.Connect" value="com.phonegap.facebook.ConnectPlugin" /> 
```

这*包括*在文件中`FbDialog.java`：

```
import com.phonegap.helloworld.R; 
```

我有这些文件`src`：

```
com
   /facebook/android/
                     AsyncFacebookRunner.java
                     DialogError.java
                     Facebook.java
                     FacebookError.java
                     FbDialog.java
                     Util.java
   /phonegap/
             facebook/ConnectPlugin.java
             helloworld/HelloPhoneGapActivity.java 
```

资源文件关闭并复制图标。在 HTML 中，我包含了一些 JavaScript 代码：

```
cordova-1.6.1.js
cdv-plugin-fb-connect.js
facebook_js_sdk.js 
```

我将默认 HTML 示例与我的 appId 一起使用。

当我在我的 Android 手机上运行应用程序时，会出现一个对话框：

> Cordova Facebook 连接插件在初始化时失败！

和

> Cordova Facebook 连接插件在 auth.status 上失败！

如果我单击登录按钮，对话框会显示：

> Cordova Facebook 连接插件登录失败！找不到类

[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)控制台日志是：

![在此处输入图像描述](../Images/9519e530afedf267c18268a82ab74a78.png)

我尝试使用官方[Git](http://en.wikipedia.org/wiki/Git_%28software%29)自述文件和教程*[Add Facebook login to PhoneGap/Cordova Android app Easest way](http://marguspala.com/add-facebook-login-to-phonegap-android-app-easiest-way/comment-page-1/#comment-156963)*来安装它。

当我编译应用程序时，我没有收到错误。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:28:13.203

切换到科尔多瓦后，一切都重新命名了。您需要新的班级位置：

```
<plugin name="org.apache.cordova.facebook.Connect" value="org.apache.cordova.facebook.ConnectPlugin" /> 
```

您还必须将插件 java（返回？）放在正确的位置以及 org/apache/cordova/facebook/ 中。

不幸的是，这个错误非常模糊，但如果你知道要寻找什么，你就可以看到它。您可以在日志中看到其中的行`Message=Class not found`。如果这一行有类的名称会更好。当您为插件调用 JS 时会发生此错误，但是在 plugins.xml 文件中找不到正确的类名。这也是为什么您注意到任何调用都以相同方式失败的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-09T01:26:06.293

验证 android studio 没有给出如下错误：

`A valid Facebook app id must be set in the AndroidManifest.xml or set by calling FacebookSdk.setApplicationId before initializing the sdk.`

如果是这样，那么编辑 androidmanifest. 请参阅：[必须在 AndroidManifest.xml 中设置有效的 Facebook 应用程序 ID](https://stackoverflow.com/questions/47428898/a-valid-facebook-app-id-must-be-set-in-the-androidmanifest-xml)

# java - java.io.IOException: Cannot run program "pwd.sh": error=13, Permission denied ... 如何在 Eclipse 调试会话中获取环境变量？

> ID：10254241
> 
> 赞同：4
> 
> 时间：2012-04-20T22:12:59.643
> 
> 标签：java, eclipse, java-io

我在尝试从 Java 程序中执行系统进程时遇到了一个奇怪的问题。获取权限被拒绝错误：
java.io.IOException：无法运行程序“pwd.sh”：错误=13，权限被拒绝

与此非常相似： [Permission denied error in Java for chmod command](https://stackoverflow.com/questions/3085897/permission-denied-error-in-java)

它在一台机器上为我工作，而不是另一台机器。我尝试在 pwd.sh 文件上将权限设置为 777，但没有运气。当我以“user1”身份启动 java 程序时不会出现问题，但是当我以“sudo -u user1 java ...”以 root 身份启动时确实会出现问题（这是我最终需要做的。）

那么，有什么想法吗？Eclipse 中有没有办法在调用程序之前检查我的用户 ID 并显示工作目录？

# sql - SQL Server - 在列表中显示顶部条目

> ID：10254245
> 
> 赞同：4
> 
> 时间：2012-04-20T22:13:23.727
> 
> 标签：sql, sql-server

我必须按小时对某人从特定国家/地区拨打电话的次数进行排序。国家列表按月增加，例如我们可以添加巴西。我正在使用 SQL Server。

数据看起来像这样

```
2012-04-02 08:00:59    United States
2012-04-02 08:12:02    United States
2012-04-02 08:13:42    Canada
2012-04-02 08:13:56    United States
2012-04-02 08:14:07    Mexico
2012-04-02 08:18:09    Canada
2012-04-02 08:19:50    United States
2012-04-02 08:34:34    Mexico
etc. 
```

我想如何按**小时**列出前 2 个国家/地区的数据。

我希望它显示如下：

```
Date                   Country          Calls
2012-04-02 08:00:00    United States    24
2012-04-02 08:00:00    Canada           19
--hidden--
2012-04-02 08:00:00    Mexico           12 
```

我尝试的代码（不起作用）：

```
Declare @StartDate datetime, @EndDate datetime
    set @StartDate = '20120401 00:00:00'
  set @EndDate = '20120430 23:59:59'
SELECT  DATEADD(HOUR, DATEPART(HOUR, [date]), DATEDIFF(DAY, 0, [date])) as [date],
(SELECT COUNT([country]) FROM [mytable] WHERE [date] between @StartDate and @EndDate and [country] = 'United States' ) as [United_States]
,(SELECT COUNT([country]) FROM [mytable] WHERE [date] between @StartDate and @EndDate and [country] = 'Canada' ) as [Canada]
,(SELECT COUNT([country]) FROM [mytable] WHERE [date] between @StartDate and @EndDate and [country] = 'Mexico' ) as [Canada]
FROM [mytable] 
WHERE [date] between @StartDate and @EndDate
GROUP BY DATEADD(HOUR, DATEPART(HOUR, [date]), DATEDIFF(DAY, 0, [date]))
ORDER BY [date] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:34:49.620

试试这个。也许有一些语法错误，但我认为它朝着正确的方向发展。

```
SELECT T1.Date, T1.Country, SUM(1)
FROM CallsTable T1
GROUP BY DATEADD(hh, DATEDIFF(hh,0,T1.Date),0), T1.Country
HAVING T1.Country IN (SELECT TOP 2 T2.Country
                      FROM CallsTable T2
                      WHERE DATEADD(hh, DATEDIFF(hh,0,T2.Date),0) = DATEADD(hh, DATEDIFF(hh,0,T1.Date),0)
                      GROUP BY T2.Country
                      ORDER BY SUM(1) DESC                    
                      ) 
```

**解释：**

`DATEADD(hh, DATEDIFF(hh,0,T1.Date),0)`截断分钟和秒，以便按小时分组。

主要按小时和国家选择组。内部选择是一个过滤器，因此仅显示指定时间的两个最高呼叫国家/地区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:52:28.073

使用[cte](http://msdn.microsoft.com/en-us/library/ms175972.aspx)和[`over`](http://msdn.microsoft.com/en-us/library/ms189461.aspx)子句相对简单易读：

```
WITH CTE AS(
      SELECT DATEADD(HOUR, DATEDIFF(HOUR, 0, Date), 0)AS DateHour
    , Country
    , Count(*) OVER(Partition By Country, DATEPART(HOUR, Date))as GrpCount
    FROM @mytable
    WHERE date between @StartDate and @EndDate
)
SELECT DateHour AS Date, Country, GrpCount AS Calls
FROM CTE
GROUP BY Country, DateHour, GrpCount
ORDER BY DateHour 
```

这是您的示例数据：

```
declare @myTable table(date datetime, country varchar(20));
insert into @myTable values(convert(datetime,'2012-04-02 08:00:59',102),'United States');
insert into @myTable values(convert(datetime,'2012-04-02 08:13:42',102),'Canada');
insert into @myTable values(convert(datetime,'2012-04-02 08:13:56',102),'United States');
insert into @myTable values(convert(datetime,'2012-04-02 08:14:07',102),'Mexico');
insert into @myTable values(convert(datetime,'2012-04-02 08:18:09',102),'Canada');
insert into @myTable values(convert(datetime,'2012-04-02 08:19:50',102),'United States');
insert into @myTable values(convert(datetime,'2012-04-02 08:34:34',102),'Mexico');

Declare @StartDate datetime, @EndDate datetime;
    set @StartDate = '20120401 00:00:00';
    set @EndDate = '20120430 23:59:59'; 
```

结果：

```
Date                      Country           Calls
2012-04-02 08:00:00.000   Canada            2
2012-04-02 08:00:00.000   Mexico            2
2012-04-02 08:00:00.000   United States     3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:58:28.710

这应该这样做：

```
Declare @StartDate datetime, 
    @EndDate datetime
    set @StartDate = '20120401 00:00:00'
    set @EndDate = '20120430 23:59:59'

;WITH
  mytablePlusHours As
(
    SELECT *,
        DATEADD(HOUR, DATEPART(HOUR, [date]), DATEDIFF(DAY, 0, [date]))     AS [dateHour]
    FROM    [mytable]    
)
, mytableHourGroups As
(
    SELECT  dateHour, 
            country,
            COUNT(*)        As [countryCount],
            ROW_NUMBER() OVER(PARTITION BY dateHour ORDER BY countryCount) 
                            As [countryRank]
    FROM        mytablePlusHours
    GROUP BY    dateHour, country
)
SELECT  
        dateHour     AS [date],
        country,
        countryCount
FROM    mytableHourGroups
WHERE   [date] between @StartDate and @EndDate
  AND   countryRank <= 2
ORDER BY [date], countryRank 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T22:20:08.697

我相信最简单的解决方案是分两步。

首先，您必须将日期时间转换为偶数小时。通过将数据从一个表复制到另一个表或通过视图或将计算字段添加到表中来实现。

然后你做类似的事情

```
select date time, country, count(*) calls
from mytable
group by date, country 
```

我不确定它是“count(*)” - 请有人纠正我。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T22:35:03.653

添加到 Darren Davies 的答案中，您可以进一步定义表输出以按日期和时间解析：

```
SELECT 
  DATEADD(dd, 0, DATEDIFF(dd, 0, [Date])) as Date, 
  DATEPART(HOUR, [Date]) as Hour, 
  Country, 
  SUM(Calls)
FROM YourTable
GROUP BY 
  DATEADD(dd, 0, DATEDIFF(dd, 0, [Date])),
  DATEPART(HOUR, [Date]), 
  Country 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-20T22:38:03.893

未经测试：

```
SELECT date(yourdate) as mday, 
       datepart(hour, yourdate) as Yourhour, 
       country, 
       count(*) as calls, 
       ROW_NUMBER() OVER(PARTITION BY date(YourDate) & "-" & Datepart(hour,YourDate) & ORDER BY count(*) DESC) myCount
FROM yourTableName
GROUP BY date(yourdate), datepart(hour, yourdate)
having myCount <3
Order by count(*), mday, yourhour 
```

不知何故 Row_NUMBER() Over (partiion By... 似乎它会给你你想要的东西'但我无法测试它。请参阅[MSFT ARTICLE](http://msdn.microsoft.com/en-us/library/ms186734.aspx)以了解使用情况以及为什么我认为这是你所追求的。

本质上，您希望在一天和一小时创建不同的分区，按该分区集中的调用计数排序，并为每个记录/计数分配一个从 1 开始增加 1 的数字。然后，您希望将该记录/计数限制为每天/小时分组的前 2 个。

# javascript - 在 Closure 上创建多个元素的侦听器

> ID：10254246
> 
> 赞同：1
> 
> 时间：2012-04-20T22:13:29.093
> 
> 标签：javascript, events, closures

在使用 jQuery 很长一段时间后，我第一次使用 Closure。

我在为从 getElementsByClass() 获得的多个对象创建侦听器时遇到问题。知道如何在关闭时做到这一点吗？

```
 goog.events.listen(
      goog.dom.getElementsByClass('clone'),
      goog.events.EventType.CLICK,
      function(e) {
          alert('hi');
      }
  ); 
```

我收到上述代码的以下错误：

未捕获的类型错误：对象 # 没有方法“attachEvent”

编辑：我通过以下代码得到了这个工作。但是，我不太确定，如果这是最有效的方法：

```
 var clone_buttons = goog.dom.getElementsByClass('clone');
  for (var i = 0; i < clone_buttons.length; i++) {
      goog.events.listen(
          clone_buttons[i],
          goog.events.EventType.CLICK,
          function(e) {
              alert('hi');
          }
       );
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:37:06.680

您没有在您提供的代码中的任何地方使用闭包。如果您想要最有效的代码，那么您应该将常用属性存储在局部变量中：

```
var clone_buttons = goog.dom.getElementsByClass('clone');
var length = clone_buttons.length;
var events = goog.events;
var CLICK = events.EventType.CLICK;

for (var i = 0; i < length; i++) {
    events.listen(
        clone_buttons[i],
        CLICK,
        function(e) {
            alert('hi');
        }
    );
} 
```

您可以在此处阅读有关闭包的更多信息：[https ://stackoverflow.com/a/12931785/783743](https://stackoverflow.com/a/12931785/783743)

您可以在此处阅读有关性能提升技巧的信息：http: [//jonraasch.com/blog/10-javascript-performance-boosting-tips-from-nicholas-zakas](http://jonraasch.com/blog/10-javascript-performance-boosting-tips-from-nicholas-zakas)

# c# - 自定义配置 xml 设置并存储到字典对象中

> ID：10254247
> 
> 赞同：0
> 
> 时间：2012-04-20T22:13:55.307
> 
> 标签：c#, asp.net, xml, web-config

我计划为 FormFields、QueryString 参数等设置配置键。在我的 web.config 中，我有如下设置：

```
<WhiteListPaametersGroup>
  <WhiteListPaameters>
    <FormField1>EVENTVALIDATION</FormField1>
    <FormField2>VIEWSTATE</FormField2>
    <FormField3>Button1</FormField3>

    <QueryString1>firstname</QueryString1>
    <QueryString2>lastname</QueryString2>

  </WhiteListPaameters>
</WhiteListPaametersGroup> 
```

然后在我的代码中，我读取的值如下：

```
Dictionary<string, string> parameters = new Dictionary<string,string>();

foreach (XmlNode n in section.ChildNodes)
{
    parameters.Add(n.Name, n.InnerText);
} 
```

有没有更好的存储方法。稍后，我希望能够像对象一样通过字典，并能够获取 FormFields、Querystrings 等的设置。

如果我能写得更干净，请告诉我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:38:08.857

您可以使用 XML 序列化来存储您的设置并将它们直接恢复到一个对象中。它并不完美，但很容易设置并为您提供对象保存/恢复。

有这个类（属性必须是公共的）：

```
public class WhiteListParameters
{
    public string FormField1 { get; set; }
    public string FormField2 { get; set; }
    public string FormField3 { get; set; }

    public string QueryString1 { get; set; }
    public string QueryString2 { get; set; }
} 
```

要将其保存到 XML 文件，请运行以下代码：

```
WhiteListParameters parms = new WhiteListParameters
                                {
                                    FormField1 = "EVENTVALIDATION",
                                    FormField2 = "VIEWSTATE",
                                    FormField3 = "Button1",
                                    QueryString1 = "firstname",
                                    QueryString2 = "lastname"
                                };

using(StreamWriter sw = new StreamWriter("C:\\temp\\config.xml"))
{
    XmlSerializer xs = new XmlSerializer(typeof (WhiteListParameters));
    xs.Serialize(sw, parms);
    sw.Close();
} 
```

要将其读回对象：

```
using(StreamReader sr = new StreamReader("c:\\temp\\config.xml"))
{
    XmlSerializer xs = new XmlSerializer(typeof (WhiteListParameters));
    WhiteListParameters parms = (WhiteListParameters) xs.Deserialize(sr);
    sr.Close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:23:56.130

您可能会考虑的一个选项是创建一个自定义配置部分，您可以在`web.config`.

这是我为引用我们的 XSLT 模板而创建的配置部分：

```
namespace Foo.Web.Applications.CustomConfigurationSections
{
    public class XslTemplateConfiguration : ConfigurationSection
    {
        [ConfigurationProperty("xslTemplates")]
        public XslTemplateElementCollection XslTemplates
        {
            get { return this["xslTemplates"] as XslTemplateElementCollection; }
        }
    }

    public class XslTemplateElement : ConfigurationElement
    {
        [ConfigurationProperty("name", IsRequired = true, IsKey = true)]
        public string Name
        {
            get { return this["name"] as string; }
            set { this["name"] = value; }
        }

        [ConfigurationProperty("path", IsRequired = true)]
        public string Path
        {
            get { return this["path"] as string; }
            set { this["path"] = value; }
        }
    }

    public class XslTemplateElementCollection : ConfigurationElementCollection
    {
        public XslTemplateElement this[object key]
        {
            get { return base.BaseGet(key) as XslTemplateElement; }
        }

        public override ConfigurationElementCollectionType CollectionType
        {
            get { return ConfigurationElementCollectionType.BasicMap; }
        }

        protected override string ElementName
        {
            get { return "xslTemplate"; }
        }

        protected override bool IsElementName(string elementName)
        {
            bool isName = false;
            if (!String.IsNullOrEmpty(elementName))
                isName = elementName.Equals("xslTemplate");
            return isName;
        }

        protected override ConfigurationElement CreateNewElement()
        {
            return new XslTemplateElement();
        }

        protected override object GetElementKey(ConfigurationElement element)
        {
            return ((XslTemplateElement)element).Name;
        }
    }
} 
```

您可以在 web.config 中注册此部分，如下所示：

```
<configSections>
    <section name="xslTemplateConfiguration" type="Foo.Web.Applications.CustomConfigurationSections.XslTemplateConfiguration"/>
</configSections> 
```

您可以像这样访问代码中的集合：

```
var config = WebConfigurationManager.OpenWebConfiguration("/");
if (config.HasFile)
{
    var templates = config.GetSection("xslTemplateConfiguration") as XslTemplateConfiguration;
    if (templates != null)
    {
        var templatePath = templates.XslTemplates["PO"].Path;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T23:24:32.030

对于读取配置，.NET Framework 在[System.Configuration](http://msdn.microsoft.com/en-us/library/system.configuration.aspx)命名空间中有许多类。最重要的类是[ConfigurationSection](http://msdn.microsoft.com/en-us/library/system.configuration.configurationsection.aspx)和[ConfigurationElement](http://msdn.microsoft.com/en-us/library/system.configuration.configurationelement.aspx)。[从这些类派生，添加所需的属性并使用ConfigurationProperty](http://msdn.microsoft.com/en-us/library/system.configuration.configurationpropertyattribute.aspx)属性装饰它们。这种方法的优点是类型安全、可以定义有效列表以及事实，即 .NET Framework 框架将自动为您完成所有来自 web.config 的值的读取、解析和检查。

# c++ - 访问组合方法

> ID：10254249
> 
> 赞同：0
> 
> 时间：2012-04-20T22:14:06.413
> 
> 标签：c++, oop

这个问题可能有点模糊，但请耐心等待。

我的项目中有 3 个课程。2类与1类有组合关系，即2是1的一部分。

但是我必须有权访问这 2 个类方法，但并不想将它们完全公开。

在 1 个类中，我用私有可见性实例化了 2 个类，这可以防止 1 个类对象访问 2 个类方法

这是在 C++ 中的；）

编辑：我将举一个我所拥有的例子；

```
class Aclass
{
    private: int numA;
    public: void ExampleMethod();
};

class Bclass
{
    private: int numB;
    public: void ExampleMethodB();
};

class Cclass
{
    private: 
             Aclass Aobject;
             Bclass Bobject;
    public: 
};

void main()
{
    Cclass Cobject;

    Cobject.ExampleMethod();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:16:05.553

> 在 1 个类中，我用私有可见性实例化了 2 个类，这可以防止 1 个类对象访问 2 个类方法

你的假设是错误的。如果这两个对象是`private`，您仍然可以从类内部访问它们：

```
class A
{
public:
   foo();
};

class B
{
private:
   A a;
public:
   void goo() { a.foo(); } // this is ok, although a is private
                           // you can't access a from outside the class though
}; 
```

# php - PHP 会话变量 - 通过页面传递

> ID：10254251
> 
> 赞同：1
> 
> 时间：2012-04-20T22:14:09.627
> 
> 标签：php, html, mysql, forms, session-variables

我希望有人能指出我出错的正确方向，因为我觉得我在绕圈子！

我正在整理一个简单的购物应用程序 - 目前它只是演示技术的非常基础的应用程序。

场景是有一个包含项目的数据库表。它们被分成蓝色和红色的项目范围。

在索引页面上，用户可以选择去蓝色或红色项目。

一旦进入红色（或蓝色）商品页面，就会显示商品并从数据库 (MySQL) 中提取当前价格和库存水平。然后，用户选择一件商品并单击购买按钮将其添加到他们的购物车中。

然后页面重定向到购物车页面，用户可以在其中更新商品数量、进入结账页面或返回“红色”或“蓝色”范围。

我的问题是这个......

1) 我如何设置我的会话数组来捕获在购买“点击”时添加的项目？

到目前为止，我在所有页面的顶部都有这个......

```
<?php session_start();
?> 
```

然而，似乎只有一件商品可以添加到“购物车”中。

这就是我从我的数据库中提取项目的方式：

```
<?php
$result = mysql_query ('SELECT * FROM items WHERE colour="red"');
// fetch the resulting row as an associative array
while ($row = mysql_fetch_assoc ($result)){
  echo '£', number_format( $row ['price'] / 100, 2, '.', ' ' );
  }
?></p> 
```

2）这是红色或蓝色页面上每个项目下的表单操作代码。

```
<form method="post" action="cart.php">
                    <p>
<input type="submit" name="submit" value="Buy" />
<input type="hidden" name="cart" value="add" />
<input type="hidden" name="item" value="redplate" />
                    </p>
                </form> 
```

3) 购物车页面有任何数量更新后，如何在结帐页面显示“已订购”商品？

到目前为止，这就是购物车页面上的内容 - 我会在结帐页面上重复这个并拉取更新的数量吗？？....

```
<?php
$submit = $_POST["submit"];

//Call the function and save all data into the array $_SESSION['form'] 
if($submit == "Buy"){setSessionVars();} 

function setSessionVars() {

    $item = array();
    foreach($_POST as $fieldname => $fieldvalue) {
        $item[$fieldname] = $fieldvalue;
    }  
    $_SESSION['cart'] = $item;

          echo "            <table> 
          <tr> 
            <td> 
                <img src=\"images/{$item['item']}.jpg\" />
                    <td/> 
            <td>
                {$item['item']} =
                    </td>
            <td> 
            <input type=\"text(5)\" name=\"value\" value=\"1\" />

            <input type=\"submit\" name=\"puchasedquan\" value=\"Click to update\" /> 

             </td> 
            </tr> 
                            </table>";
}
?> 
```

任何帮助将不胜感激！！我感觉好像我在兜圈子！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:35:56.373

这里最大的错误是，您将所有数据完全放在一个会话变量上，即`$_SESSION['cart']`.

由于您想在会话中插入多个项目，因此您必须使用`$_SESSION['cart'][]`插入项目。

每当您尝试获取存储的值时，请再次使用 for 循环来读取以及 .

```
foreach($_SESSION['cart'] as $cartItem) {
  $cartItem; // will have all the item individually on each pass
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:22:53.690

将内容存储在 PHP 会话变量中的问题在于它们存储在 cookie 中，这意味着它们需要打开 cookie。好的，现在大多数浏览器都设置了 cookie。

但是，如果您直接从客户端文件中读取值并将其放入数据库中呢？有什么办法可以阻止某人破解显示“subtotal=10000”的 cookie 文件并将值更改为“subtotal=1”，然后将其推送到您的系统中？

如果您将购物会话实际存储在数据库中，您的系统会更加健壮，例如

```
CREATE TABLE tbl_shopping_session(
    id INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(id),
    php_session_key VARCHAR(32),
    coupon_id INT,
    FOREIGN KEY(coupon_id) REFERENCES tbl_coupons(id),
    updated TIMESTAMP /* a timestamp is added to find & del old sessions */
) ENGINE = InnoDB;

CREATE TABLE tbl_shopping_cart(
    shopping_session_id INT,
    FOREIGN KEY(shopping_session_id) REFERENCES tbl_shopping_session(id) ON DELETE CASCADE,
    product_id INT,
    FOREIGN KEY(product_id) REFERENCES tbl_products(id),
    cart_qty INT /* or DECIMAL(9,3) or something */,
    subtotal DECIMAL(18,4)
) ENGINE = InnoDB; 
```

从那里你可以得到图片...... php_session_key 用于识别当前的购物会话，当前会话 id 用于在单独的表中查找和存储购物车项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T22:23:00.297

尝试这个

```
$item = array();
foreach($_POST as $fieldname => $fieldvalue) {
    $item[$fieldname][] = $fieldvalue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T22:23:04.613

$_SESSION 键在您添加更多时被替换，所以实际上它只是覆盖现有值，您可以添加：

```
foreach($_POST as $fieldname => $fieldvalue) {
    // Now the array will be enumerated
    $item[$fieldname][] = $fieldvalue;
}  

print_r($item); 
```

# sql - 如何将值从 VBA 传递到 SQL Server 2008 中的表变量？

> ID：10254254
> 
> 赞同：4
> 
> 时间：2012-04-20T22:14:43.493
> 
> 标签：sql, excel, vba

我在 Excel 2007 中有一个用户表单，它使用存储过程将数据写入 SQL Server 2008 上的表中。

然后插入的行得到一个我报告给 VBA 的身份。然后我使用这个数字将几行数据填充到另一个表中。

但是，我不想让存储过程先执行然后写入另一个表，而是让存储过程做这两件事。

问题是，另一个表的条目大于一行，我从 VBA 发送到 SQL 的参数只能包含一个值。

所以，我相信我需要在 SQL 中创建一个表变量。但是，如何将 VBA 中的值传递给 SQL 中的表变量？请记住，一切都应该在一个存储过程中完成。这就是我到目前为止所拥有的。

谢谢你的帮助！！！

```
--SQL Stored Procedure
ALTER procedure [dbo].[Audit_InsertAuditFinding]

 @AuditRID as int 
,@EnteredBy as varchar(10)  
,@AuditItemNumber as int 
,@AuditFindingShort as varchar(50) 
,@AuditFindingLong as varchar(500)  
,@AuditDocsSaved as bit
,@AuditIncident as int output

as
BEGIN
SET NOCOUNT ON
Insert Into Audit_Findings 
Values (@AuditRID,@EnteredBy,GETDATE(),@AuditItemNumber,@AuditFindingShort,@AuditFindingLong,@AuditDocsSaved)

declare @AuditFindingNumber as int
select @AuditFindingNumber = MAX(@@IDENTITY)

select @AuditIncident = @AuditFindingNumber
END 
```

到目前为止，这是我的 VBA 代码。

```
--VBA Code
cnn.CursorLocation = adUseClient
cmd.ActiveConnection = cnn
cmd.CommandType = adCmdStoredProc
cmd.CommandText = "InternalReporting.dbo.Audit_InsertAuditFinding"
cmd.NamedParameters = True
Set prm = cmd.CreateParameter("@AuditRID", adInteger, adParamInput, 50, Audit_Topic.Value * 1)
cmd.Parameters.Append prm
Set prm = cmd.CreateParameter("@EnteredBy", adVarWChar, adParamInput, 10, Environ("UserName"))
cmd.Parameters.Append prm
Set prm = cmd.CreateParameter("@AuditItemNumber", adInteger, adParamInput, 10, Audit_ItemNumber.Value * 1)
cmd.Parameters.Append prm
Set prm = cmd.CreateParameter("@AuditFindingShort", adVarWChar, adParamInput, 50, Audit_ShortDescr.Value)
cmd.Parameters.Append prm
Set prm = cmd.CreateParameter("@AuditFindingLong", adVarWChar, adParamInput, 500, Audit_LongDescr.Value)
cmd.Parameters.Append prm
Set prm = cmd.CreateParameter("@AuditDocsSaved", adVarWChar, adParamInput, 500, Doc_Saved)
cmd.Parameters.Append prm
Set prm = cmd.CreateParameter("@AuditIncident", adVarWChar, adParamOutput, 10, Incident_Number.Value)
cmd.Parameters.Append prm

cmd.Execute

Incident_Number.Value = cmd.Parameters("@AuditIncident") * 1
SQL_String = "Delete from InternalReporting.dbo.Audit_Findings_Notifications where Audit_Incident = " & Incident_Number.Value * 1

rst.Open SQL_String, cnn, adOpenStatic
   Set rst = Nothing

   With AUD_02_Item_Mgmt.Notify_Overview
    For I = 1 To .ListCount
        SQL_String = "Insert Into InternalReporting.dbo.Audit_Findings_Notifications " & _
                     "Values (" & Incident_Number.Value & ",'" & .List(I - 1, 0) & _
                     "','" & .List(I - 1, 2) & "')"
        rst.Open SQL_String, cnn, adOpenStatic
        Set rst = Nothing
    Next I
End With` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:45:09.927

我认为这对于普通/经典 ADO 是不可能的，因为没有表变量数据类型。

另一种方法是构建一个 XML 数据字符串，然后在您的存储过程中解析它。

# asp.net-mvc - Asp.net MVC 增量按钮

> ID：10254256
> 
> 赞同：0
> 
> 时间：2012-04-20T22:14:51.087
> 
> 标签：asp.net-mvc, button, increment

在 Asp.Net MVC 中，我想在每次提交表单时增加一个模型属性（单击按钮）。

我已经尝试过 HttpGet 和 HttpPost。使用 HttpGet，该值始终被查询字符串覆盖，并且始终为 0。使用 HttpPost，该值从 0 开始，我单击按钮并递增到 1。但是当我再次单击它时，它以 0 的形式出现并递增为 1。

据我了解，它 Inputs 0, 0+1 = 1, Outputs 0

为了简单起见：

```
@using (Html.BeginForm())
{
    @Html.HiddenFor(x=>x.Value) or @Html.Hidden("Value", Model.Value)
    or even <input type="hidden" value="@Model.Value" />
    <input type="submit" value="Click Me" />
}

public ViewResult ActionMethod(Model model)
{
    model.Value++;
    return View(model);
} 
```

我的问题基本上是这样的： [每个按钮单击 C# ASP.NET](https://stackoverflow.com/questions/9968488/increment-number-per-button-click-c-sharp-asp-net) 但在 MVC 框架中的增量数。

你如何操纵这样的模型属性？我不想使用 Javascript。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:55:35.817

据我所知，这是唯一的解决方案：

我发现这个工作，但它真的很糟糕

```
int temp = ++model.Value;
ModelState.Remove("Value");
model.Value = temp; 
```

如果我将模型参数传递给视图，则视图应该通过获取我在模型当前状态中传递的任何内容来绑定该参数。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-20T22:27:53.280

你必须打电话

```
UpdateModel(model); 
```

IIRC。

# php - 如何将PHP中的字符串截断为最接近一定数量字符的句子？

> ID：10254260
> 
> 赞同：6
> 
> 时间：2012-04-20T22:15:27.643
> 
> 标签：php, string, function

我想将我的字符串截断/缩短为最接近一定数量字符的句子。

我有一个工作函数，但我的函数截断为最接近某个字符数的单词。

```
function shortenString($string, $your_desired_width) {
  $parts = preg_split('/([\s\n\r]+)/', $string, null, PREG_SPLIT_DELIM_CAPTURE);
  $parts_count = count($parts);

  $length = 0;
  $last_part = 0;
  for (; $last_part < $parts_count; ++$last_part) {
    $length += strlen($parts[$last_part]);
    if ($length > $your_desired_width) { break; }
  }

  return implode(array_slice($parts, 0, $last_part));
} 
```

例如：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。整数malesuada eleifend orci，eget dignissim ligula porttitor cursus。Praesent in blandit enim。Maecenas vitae eleifend est. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus。Maecenas pulvinar gravida tempor。

应缩短为：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。整数malesuada eleifend orci，eget dignissim ligula porttitor cursus。

而不是像这样打破句子：

> Lorem ipsum dolor sit amet, consectetur adipiscing elit。整数malesuada eleifend orci，eget dignissim ligula porttitor cursus。 **存在于**

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-03-05T20:19:57.320

我尝试了几个函数和正则表达式，但没有一个能像我希望的那样工作，所以我创建了这个：

```
function sentenceTrim($string, $maxLength = 300) {
    $string = preg_replace('/\s+/', ' ', trim($string)); // Replace new lines (optional)

    if (mb_strlen($string) >= $maxLength) {
        $string = mb_substr($string, 0, $maxLength);

        $puncs  = array('. ', '! ', '? '); // Possible endings of sentence
        $maxPos = 0;

        foreach ($puncs as $punc) {
            $pos = mb_strrpos($string, $punc);

            if ($pos && $pos > $maxPos) {
                $maxPos = $pos;
            }
        }

        if ($maxPos) {
            return mb_substr($string, 0, $maxPos + 1);
        }

        return rtrim($string) . '&hellip;';
    } else {
        return $string;
    }           
} 
```

它将字符串修剪到指定的最大长度，从该字符串中找到最后一个句子的结尾（。或！或？）的最后一次出现，并再次修剪到该出现。它返回一个或几个接近指定字符数的完整句子。

请纠正我的英语。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T22:35:05.137

这就是我想出的……您应该检查句子是否比您要查​​找的 len 长.. 以及 g13n 所说的其他内容。如果句子太短/太长而不能将其切掉并加上“...”可能会更好。另外，您必须检查/转换空格，因为 strrpos 只会查找给定的内容。

```
$maxlen = 150;
$file = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Integer malesuada eleifend orci, eget dignissim ligula porttitor cursus. Praesent in blandit enim. Maecenas vitae eleifend est. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Maecenas pulvinar gravida tempor.";
if ( strlen($file) > $maxlen ){
    $file = substr($file,0,strrpos($file,". ",$maxlen-strlen($file))+1);
} 
```

如果你想使用你拥有的相同功能，你可以试试这个：

```
function shortenString($string, $your_desired_width) {
  $parts = preg_split('/([\s\n\r]+)/', $string, null, PREG_SPLIT_DELIM_CAPTURE);
  $parts_count = count($parts);

  $length = 0;
  $last_part = 0;
  $last_taken = 0;
  foreach($parts as $part){
    $length += strlen($part);
    if ( $length > $your_desired_width ){
        break;
    }
    ++$last_part;
    if ( $part[strlen($part)-1] == '.' ){
        $last_taken = $last_part;
    }
  }
  return implode(array_slice($parts, 0, $last_taken));
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T22:30:18.647

您可以只使用一个简单的正则表达式，例如`/^([^.]*?).*/`并将其替换为“$1”。像：

```
$output = preg_replace('/^([^.]+).*/', '$1.', $input); 
```

也就是说，您必须知道并非所有语言都有句点 (.) 作为句子分隔符。

HTH。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-01T17:37:18.070

我只是使用这种方法，它可以按要求工作！

这样就不会创建新的函数，代码也很简洁。

$article = strlen($article) > $maxlength ? substr($article, 0, $maxlength) : $article;

# jquery - 花式框关闭后绑定/取消绑定滚动事件

> ID：10254263
> 
> 赞同：1
> 
> 时间：2012-04-20T22:15:58.470
> 
> 标签：jquery, scroll, fancybox

我有一个滚动事件，它将我的标题固定在页面顶部。当fancybox 打开时，我已经设法取消绑定该事件，但是一旦我关闭fancybox，我就无法让那个可滚动的标题工作。有任何想法吗？

```
 // Scrollable header
      var bar = $('.scrollable');
      $(function() {
        $(window).scroll(function() {
          if($(this).scrollTop() > 51) {
            bar.css({"position":"fixed"});
            bar.css({"top":"-51px"});
          } else {
            bar.css({"position":"absolute"});
            bar.css({"top":"0"});
          }
        });
      }); 
```

这是花式框部分：

```
 $('.fancybox').fancybox({ 
        'fitToView': false, 
        'afterClose' : function() {
          $(window).bind("scroll");
          $('.inner').css({"position":"static"});
        }
      });

      $('.fancybox').click(function(){
        $(window).unbind("scroll");
        $('.inner').css({"position":"fixed"});
      }); 
```

# fiddler - Fiddler 不能在任何版本的 Internet Explorer 中工作

> ID：10254266
> 
> 赞同：3
> 
> 时间：2012-04-20T22:16:30.653
> 
> 标签：fiddler

Fiddler 在 Firefox 中运行良好，但我无法在 Internet Explorer 中运行。我尝试卸载 IE9，但它在 IE8 中也不起作用。我通常不会像在 Firefox 中工作那样关心；但是，我在 ie9 中读到 localhost 的问题已经消失，所以我想利用它。我环顾四周，似乎找不到与我有同样问题的人。关于从哪里开始的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:25:21.580

从来没有听说过有人在使用 IE 时遇到 Fiddler 的问题。

本地主机问题很容易解决。一个人在之前写一个点或类似的东西。

IE9 有一个内置的请求/响应查看器。不如 Fiddler 称职，但可能对您有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-06T11:23:52.387

我也没有在 Fiddler 中看到来自 IE 的流量。对我有用的是单击并按住工具栏中的“任何进程”按钮并将目标图标拖到 IE 窗口中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-04T14:31:44.853

确保 IE 不会将 fiddler 模拟响应替换为之前缓存的响应：

在 IE11 中，您可以按 f12 打开开发工具并刷新页面（Ctrl + R）以查看浏览器发送的所有请求（在网络选项卡中）。

这是缓存响应的样子：

![这就是兑现响应的样子](../Images/4f37f5f2621914823087a6f521ece117.png)

您可以借助顶部的按钮（“始终从服务器刷新”按钮）打开强制从服务器获取响应，而不是从缓存获取响应：

这是你可以找到它的地方。

![这是你可以找到它的地方](../Images/b9485e72d85aba6ce7035ad5515d68c7.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-12T12:36:45.520

网络上的人们在使用 fiddler 时遇到了很多麻烦。事实证明，它需要一个特殊的证书。

要修复它，请转到工具>>>提琴手选项>>>HTTPS 并单击`Decrypt HTTPS Traffic`，然后对出现的两个窗口单击是。

# oop - 多类构造函数 Matlab

> ID：10254269
> 
> 赞同：23
> 
> 时间：2012-04-20T22:16:44.427
> 
> 标签：oop, matlab

是否可以在 Matlab 中定义多个类构造函数？如果是，如何？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-21T00:23:38.083

每个类都有一个构造函数。但是......构造函数可以接受任意数量和类型的参数，包括那些基于`varargin`.

因此，要在 Java 中提供默认第三个参数的选项，您可以编写如下内容（基于[java 文档](http://docs.oracle.com/javase/tutorial/java/javaOO/constructors.html)的示例）：

```
public Bicycle(int startCadence, int startSpeed, int startGear) {
    gear = startGear;
    cadence = startCadence;
    speed = startSpeed;
}
public Bicycle(int startCadence, int startSpeed) {
    gear = 1;
    cadence = startCadence;
    speed = startSpeed;
} 
```

在 Matlab 中你可以写

```
classdef Bicycle < handle
    properties (Access=public)
        gear
        cadence
        speed
    end
    methods (Access = public)
        function self = Bicycle(varargin)
            if nargin>2
                self.gear = varargin{3};
            else
                self.gear = 1;
            end
            self.cadence = varargin{1};
            self.speed = varargin{2};
        end
    end
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T22:40:08.693

每个类只有一个构造函数，每个 .m 文件只能包含一个类定义。

如果您希望类根据输入略有不同，您可以使用定义类方法识别的开关的属性。如果你想根据输入有非常不同的类，你可以创建一个`generateClass`函数来调用不同文件中定义的一个或另一个类。当然，如果这些不同的类有很多共同的方法和属性，您可以将它们创建为共同超类的子类。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-15T07:25:56.883

Pursuit 的答案有效，但不熟悉该函数的用户看不到需要多少参数或它们的用途。我会推荐这个：

```
methods (Access = public)
    function self = Bicycle(startCadence, startSpeed, startGear)
        if nargin>2
            self.gear = startGear;
        else
            self.gear = 1;
        end
        self.cadence = startCadence;
        self.speed = startSpeed;        
    end
end 
```

如果您现在键入“Bicycle(”并等待，您至少可以看到三个参数。但没有显示第二种可能性。这似乎是可能的（例如情节），但我不知道该怎么做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-20T22:40:04.783

不。与其他语言相比，OOP matlab 中的构造函数非常受限。在文档 AFAIK 中没有明确说明您可以有多个构造函数，但它在整个文档中以单数形式指代类的构造函数。

[https://www.mathworks.com/help/matlab/matlab_oop/class-constructor-methods.html](https://www.mathworks.com/help/matlab/matlab_oop/class-constructor-methods.html)

# google-maps-api-3 - (NaN, NaN) 通过GET获取经纬度时

> ID：10254270
> 
> 赞同：1
> 
> 时间：2012-04-20T22:16:57.393
> 
> 标签：google-maps-api-3, latitude-longitude

`(NaN, NaN)`当我尝试从`GET`JavaScript中获取纬度和经度信息时，我得到了。这是我的代码：

```
var GET = {};
var params = location.search.substr(1).split("&");
for (var i=0; i < params.length; i++) {
    var par = params[i].split('=');
    GET[par[0]] = par[1];
}

function initialize() {
    var latitude_longitude = new google.maps.LatLng(GET['coordinates']);

    // The basic code to call Google Maps JavaScript API v3 ...
} 
```

我是否必须将纬度和经度放在明文中（例如`... new google.maps.LatLng(59.328614,13.485847)`）？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T22:32:52.863

LatLng() 接受两个参数，因此您需要拆分坐标：

```
function initialize() {
    var csplit = GET['coordinates'].split(',');

    var latitude_longitude = new google.maps.LatLng(csplit[0], csplit[1]);

    // The basic code to call Google Maps JavaScript API v3 ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:22:06.490

您能详细说明一下，存储在什么中`coordinates`吗？

您可能必须使用`split(',')`，然后编写`new google.maps.LatLng(parseFloat(value[0]),parseFloat(value[1]))`

# ruby-on-rails - 如何正确配置 rails 3 嵌套属性

> ID：10254271
> 
> 赞同：3
> 
> 时间：2012-04-20T22:17:04.133
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我有2个模型。会员和调查

member.rb 如下

```
Class Member < ActiveRecord::Base
  has_one :survey, :dependent => :destroy
  accepts_nested_attributes_for :survey

  attr_accessible :fname,:lname, :address, :city, :state, :zip, :email, :phone, :phone_alt, :e_contact, :e_contact_phone, :physician, :physician_phone, :chiropractor, :chiropractor_phone, :password, :password_confirmation, :remember_me, :survey_attributes

end 
```

调查.rb如下

```
Class Survey < ActiveRecord::base
  belongs_to :member
end 
```

但是，每当我尝试使用收到的调查属性创建成员时

> ActiveModel::MassAssignmentSecurity::Error: 无法批量分配受保护的属性：调查

我正在通过控制台对此进行测试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:10:16.727

通过`has_one`关联，可访问的调用应为：

```
attr_accessible :survey_attributes 
```

您发布的参数需要嵌套，如下所示：

```
params = { :member => { :name => 'Jack', :survey_attributes => { :attribute => 'value' } } } 
```

在表单中确保您正确构建嵌套关系，即。你必须使用：

```
= form_for @member do |f|
  ...
  = f.fields_for :survey do |s|
    ... 
```

如果你有这样的设置，它应该可以工作。如果这没有发现您的错误，那么请在控制台中显示您正在尝试的内容并且无法正常工作的日志。

有关详细信息，请参阅Rails API 中的[#accepts_nested_attributes_for](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。

# entity-framework - 在Entity Framework中执行存储过程，返回List 或数据集

> ID：10254272
> 
> 赞同：2
> 
> 时间：2012-04-20T22:17:11.963
> 
> 标签：entity-framework, datatable, dataset, sqldatareader

如何修改以下方法以返回 List<DataTable> 或 DataSet？我想让它通用，以便它可以从数据库返回多个结果集。

```
public static DataTable ExecuteStoredProcedure(ObjectContext db, string storedProcedureName, IEnumerable<SqlParameter> parameters)
    {
        var entityConnection = (EntityConnection) db.Connection;
        var conn = entityConnection.StoreConnection;
        var initialState = conn.State;
        var dt = new DataTable();

        try
        {
            if (initialState != ConnectionState.Open)
                conn.Open();
            using (var cmd = conn.CreateCommand())
            {
                cmd.CommandText = storedProcedureName;
                cmd.CommandType = CommandType.StoredProcedure;
                foreach (var parameter in parameters)
                {
                    cmd.Parameters.Add(parameter);
                }

                using (var reader = cmd.ExecuteReader())
                {
                    dt.Load(reader);
                    reader.Close();
                }
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            if (initialState != ConnectionState.Open)
                conn.Close();
        }
        return dt;
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T23:35:39.973

我最终这样做了 -

```
public static DataSet ExecuteStoredProcedure(ObjectContext db, string storedProcedureName, IEnumerable<SqlParameter> parameters)
    {
        var connectionString = ((EntityConnection)db.Connection).StoreConnection.ConnectionString;
        var ds = new DataSet();

        using (var conn = new SqlConnection(connectionString))
        {
            using (var cmd = conn.CreateCommand())
            {
                cmd.CommandText = storedProcedureName;
                cmd.CommandType = CommandType.StoredProcedure;
                foreach (var parameter in parameters)
                {
                    cmd.Parameters.Add(parameter);
                }

                using (var adapter = new SqlDataAdapter(cmd))
                {
                    adapter.Fill(ds);
                }
            }
        }

        return ds;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T22:25:40.553

reader.NextResult() 在技术上应该可以工作。这是修改后的版本：

```
public static DataSet ExecuteStoredProcedure(ObjectContext db, string storedProcedureName, IEnumerable<SqlParameter> parameters)
{
    var entityConnection = (EntityConnection) db.Connection;
        var conn = entityConnection.StoreConnection;
        var initialState = conn.State;

        DataSet dataSet = new DataSet();

        try
        {
            if (initialState != ConnectionState.Open)
                conn.Open();
            using (var cmd = conn.CreateCommand())
            {
                cmd.CommandText = storedProcedureName;
                cmd.CommandType = CommandType.StoredProcedure;
                foreach (var parameter in parameters)
                {
                    cmd.Parameters.Add(parameter);
                }

                using (var reader = cmd.ExecuteReader())
                {
                    do
                    {
                        DataTable dt = new DataTable();
                        dt.Load(reader);
                        dataSet.Tables.Add(dt);
                    }
                    while (reader.NextResult());
                }
            }
        }
        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            if (initialState != ConnectionState.Open)
                conn.Close();
        }
        return dataSet;
} 
```

# c++ - 使用 std::vector 作为 std::map 的键在未找到和使用 reserve() 时不返回 end()

> ID：10254274
> 
> 赞同：3
> 
> 时间：2012-04-20T22:17:28.100
> 
> 标签：c++, stl, map, vector

我在一个程序中使用 c++ STL Map 和 Vector 类，其中我有一个将向量作为指向整数的键的映射。通常在地图中搜索值时，如果未找到该值，myMap.find() 将返回 myMap.end()。

当我尝试使用 myVector.reserve(int) 在我的向量中预分配空间（以防止在使用它们时不断调整大小）时，我的麻烦就来了。出于某种原因，当我搜索的向量已分配空间时，在我的地图中搜索我知道不存在的向量将不会返回 myMap.end()，无论我是否实际填充了向量（示例 1）。

但是，当矢量不在地图中时，只需将对象插入到我希望搜索的矢量中即可获得正确的 myMap.end() 位置（示例 2）。

示例 1：

```
#include <map>
#include <vector>
#include <iostream>

using namespace std;

int main(){

 vector<int> v, v1;
 v.reserve(1);
 v1.reserve(1);
 v[0] = 1;
 v1[0] = 2;
 map<vector <int>, int> m;

 m.insert(make_pair(v, 0));

 cout << int(m.find(v1) == m.end());
} 
```

**返回 0**

示例 2：

```
#include <map>
#include <vector>
#include <iostream>

using namespace std;

int main(){

 vector<int> v, v1;
 v.reserve(1);
 v[0] = 1;
 v1.push_back(5);
 map<vector <int>, int> m;

 m.insert(make_pair(v, 0));

 cout << int(m.find(v1) == m.end());
} 
```

**返回 1**

我希望能够在我的向量中保留一定量的空间，但似乎使地图如图所示工作的唯一方法是动态插入元素并动态调整向量的大小。这个对吗？有什么解决方法吗？`aberrant`任何人都可以为这种（明显的）行为提供解释吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T22:28:36.917

首先，这段代码并没有按照你的想法去做。保留（）不会调整大小（）。

```
vector<int> v;
v.reserve(100);
v[0] = 1;  //undefined
cout << v.size(); //prints 0 
```

再做一次编辑：我意识到这实际上是“预期的”行为，因为在第一种情况下，v 和 v1 都是空向量，因为 Reserve 不会*影响*==、<= 等的语义。一旦您了解 Reserve 是有效的除了将段错误变成令人困惑的行为之外什么都不做，这应该是有道理的。我建议永远不要使用储备，直到您证明它会产生性能差异（过早的优化）。

我对 <= 和 => 的描述以及您可能在此处不需要的地图，但将其留作参考，因为它可能会影响您在此问题上的工作。

其次，地图不关心事物是否==。他们关心事物是否在两个方向上都 <= - 这个词是“等价的”。例如

```
Foo foo1(1);
Foo foo2(2);

map<Foo, int> m;
m.insert(makepair(foo1, 1));
m.find(foo2) == m.end(); //will be true iff foo1 <= foo2 && foo2 <= foo1
//even if foo1 != foo2 or !(foo1 == foo2) 
```

因此，如果在某个类 Foo 中， if(foo1 <= foo2 && foo2 <= foo1) 那么 somemap.insert(makepair(foo1, 1)); somemap.find(foo2) 会找到 foo1，即使 foo1 != foo2 或 !(foo1 == foo2)。

其次，向量上的 <= 运算符是什么？它不是测试具有相同大小和逐点==。我认为每个向量都是“等效的”，这意味着 <= 在两个方向上，对于空向量，但我不确定 - 无论如何都要考虑这种行为，因为这就是问题所在。

# php - 中央管理面板 - 管理外部服务器上的几个站点 - 在外部服务器上保存文件

> ID：10254279
> 
> 赞同：0
> 
> 时间：2012-04-20T22:18:15.953
> 
> 标签：php, external, edit, administration, centralized

我想创建一个可以从一个页面管理我所有网站的系统。除了在外部服务器上编辑和创建文件之外，所有管理选项都已完成，或者我知道如何操作。

我想知道在外部服务器上保存文件的最佳方法是什么。我想一次更改几个文件，最好不要离开管理面板。保持整个系统的安全很重要——没有人可以在没有访问管理面板的情况下对其进行编辑。

我考虑过使用本地脚本和 chmod() 在每个网站上更改 chmods，但后来我无法访问这些文件，因为 http:// 不是可写协议，我使用了 fwrite() 函数。

你能给我一些提示，我应该如何创建它？

# android - 孩子点击时更新 ListView 项目的可绘制状态

> ID：10254282
> 
> 赞同：2
> 
> 时间：2012-04-20T22:18:45.270
> 
> 标签：android, listview, linkify

问题：

我有一个`ListView`布局相对复杂的项目。列表项视图中的一个子项是`TextView`带有链接的。可以处理对其中`TextView`找到的链接的点击（通过使用`Linkify`），并具有`OnClickListener`处理对非链接文本部分的点击。侦听器将只获取视图中的位置`ListView`并执行单击：

```
@Override
public void onClick(View v) {
    int position = mListView.getPositionForView(v);
    mListView.performItemClick(v, position, mAdapter.getItemId(position));
} 
```

一切正常，除了单击不会触发`ListView`更新列表项的可绘制状态。`TextView`当您单击项目中不可单击的其他 s 时，它确实会触发。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T21:04:38.950

得到它的工作。

设置列表项视图`clickable`并将其背景设置为`state-list`可绘制对象，也设置`addStatesFromChildren`为`true`. 这将确保在单击其任何子项时更改列表视图项的状态（假设子项是可单击的）。

但是，这会导致其`ListView`本身无法获得焦点，因此您需要通过添加`View.OnClickListener`到列表项本身而不是添加`OnItemClickedListener`到`ListView`.

# css - IE7 和 IE8 无法正确显示我的简单水平 CSS 菜单

> ID：10254283
> 
> 赞同：0
> 
> 时间：2012-04-20T22:18:52.387
> 
> 标签：css, internet-explorer-8, internet-explorer-7

我有一个在除 IE7 和 IE8 之外的所有主要浏览器中都可以使用的菜单。这是工作菜单：http: [//jsfiddle.net/DtxWt/](http://jsfiddle.net/DtxWt/)

但是，在 IE7 和 IE8 中，它会显示如下：http: [//imgur.com/gcByA](http://imgur.com/gcByA)

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:48:47.033

`nav`是一个 HTML5 元素，IE7 & 8 不理解 HTML5。我相信 IE 将您的 HTML 解释为`<nav></nav><ul><li>...`因此，您的 CSS 没有被应用。您需要考虑使用[http://code.google.com/p/html5shim/](http://code.google.com/p/html5shim/)之类的东西来填充缺失的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:25:09.997

`display: inline-block`从我所看到的来看，使用 ul 不是必需的，让它在块中并可能`<div class="clearer"></div>`在 css 中添加一个定义：`.clearer: clear:left;` 您也可以使用 div #nav 而不是 nav

# jquery - jQuery onclick 函数清理

> ID：10254284
> 
> 赞同：3
> 
> 时间：2012-04-20T22:18:59.107
> 
> 标签：jquery, hide

下面显示的代码工作正常，除了我认为它看起来有点业余（我自己做的：P）。我相信这会更干净。所以我的问题是如何结合这些“隐藏”？还有其他建议吗？

```
$('.login_inputbox').removeClass("register_inputbox_error login_inputbox_error").removeClass("register_inputbox_ok login_inputbox_ok");
validator.resetForm();
$(".btn-slide_login").removeClass("active_login");
$(".btn-slide_all").removeClass("active_all");
$('#fancybox-wrap').hide();
$('#fancybox-overlay').hide();
$('#panel_login').hide();
$('#panel_all').hide(); 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T22:24:43.830

您可以`removeClass`按如下方式使用一次

```
$('.login_inputbox').removeClass("register_inputbox_error login_inputbox_error register_inputbox_ok login_inputbox_ok"); 
```

而不是如下使用它两次

```
$('.login_inputbox').removeClass("register_inputbox_error login_inputbox_error").removeClass("register_inputbox_ok login_inputbox_ok"); 
```

并且

```
$('#fancybox-wrap, #fancybox-overlay, #panel_login, #panel_all').hide(); 
```

代替

```
$('#fancybox-wrap').hide();
$('#fancybox-overlay').hide();
$('#panel_login').hide();
$('#panel_all').hide(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T22:23:25.210

您可以用逗号分隔选择器。前任：

```
$('#fancybox-wrap, #fancybox-overlay, #panel_login, #panel_all').hide(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-20T22:23:37.963

要组合这些`.hide()`语句，您需要一个适用于所有四个元素的选择器。你可以这样做：

```
$('#fancybox-wrap,#fancybox-overlay,#panel_login,#panel_all').hide(); 
```

或者你可以给这些元素一个公共类：

```
$('.someClass').hide(); 
```

另请注意，您的第一行可以通过组合`.removeClass()`调用来简化：

```
$('.login_inputbox').removeClass("register_inputbox_error login_inputbox_error register_inputbox_ok login_inputbox_ok"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T22:23:39.123

如果你给`#fancybox-wrap`和朋友一个共同的班级，称之为`new-class`，你可以这样做：

```
$('.newclass').hide(); 
```

并一次获得所有四个。

# php - 如何使用 PHP 从活动导航页面中删除锚点？

> ID：10254286
> 
> 赞同：0
> 
> 时间：2012-04-20T22:19:29.343
> 
> 标签：php

我确信这是一个相当简单的问题，但我是 PHP 新手，所以我希望有人可以帮助我解决这个问题。

我有一个运行良好的动态导航菜单，但我想从菜单的当前页面中删除链接。

这是我的代码：

```
 <div id="navigation_menu">
  <?
  foreach($pagedata->menu as $menuitem){
      $class = ($menuitem->uri == $requesteduri) ? 'navigation selection' : 'navigation page_select';

      ?>
      <div id="<?=$menuitem->uri?>" class="<?=$class?>">
        <img class="nav_icon" src="<?=PROTOCOL?>//<?=DOMAIN?>/img/<?=$menuitem->uri?>.png">
        <h1><a href="<?=PROTOCOL?>//<?=DOMAIN?>/<?=$menuitem->uri?>"><?=$menuitem->title?></a></h1>
        <h2><?=$menuitem->description?></h2>
        <img class="go" src="<?=PROTOCOL?>//<?=DOMAIN?>/img/go.png">
      </div>
      <?      
  }
  ?>
  </div> 
```

任何帮助将不胜感激。谢谢！

更新的代码：（这对我现在有用）

```
<div id="navigation_menu">
    <?
  foreach($pagedata->menu as $menuitem){
      $class = ($menuitem->uri == $requesteduri) ? 'navigation selection' : 'navigation page_select';
      ?>
      <div id="<?=$menuitem->uri?>" class="<?=$class?>">
        <img class="nav_icon" src="<?=PROTOCOL?>//<?=DOMAIN?>/img/<?=$menuitem->uri?>.png">
        <h1>
                <?php if ($menuitem->uri == $requesteduri):?>
            <?=$menuitem->title;?>
                <?php else: ?>
            <a href="<?=PROTOCOL?>//<?=DOMAIN?>/<?=$menuitem->uri?>"><?=$menuitem->title?></a>
                <?php endif;?>
                </h1>
        <h2><?=$menuitem->description?></h2>
        <img class="go" src="<?=PROTOCOL?>//<?=DOMAIN?>/img/go.png">
      </div>

      <?      
  }

  ?>
  </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:27:32.270

我不知道你的循环输出了什么，但你想将你的页面名称与 menuitem->uri 匹配。所以你会得到你的页面名称......（把它放在循环之外）

```
<?php echo base_name($_SERVER['REQUEST_URI']); ?> 
```

找出你的循环正在输出什么（把它放在循环中）：

```
<?php echo $menuitem->uri; ?> 
```

然后，您将创建一个 if 语句来比较循环中的当前菜单项和页面请求，这只是一个示例：

```
<h1>
<?php if (base_name($_SERVER['REQUEST_URI']) == $menuitem->uri):?>
   <a href="<?=PROTOCOL?>//<?=DOMAIN?>/<?=$menuitem->uri?>"><?=$menuitem->title?></a>
<?php else: ?>
   <?=$menuitem->title;?>
<?php endif;?>
</h1> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:29:24.963

在锚文本周围放置一个条件以查看是否`$menuitem->uri`等于当前页面 URL，在输出锚标记之前可从 `$_SERVER['REQUEST_URI'] 访问。

# c++ - 从 std::tuple 应用函数

> ID：10254289
> 
> 赞同：3
> 
> 时间：2012-04-20T22:19:43.287
> 
> 标签：c++, c++11, tuples

> **可能重复：**
> [“解包”元组以调用匹配的函数指针](https://stackoverflow.com/questions/7858817/unpacking-a-tuple-to-call-a-matching-function-pointer)

我正在构建一个闭包对象来包装一个函数及其参数，以创建一个零参数的函子：

```
template<typename Function, typename... Args>
  struct closure
{
  closure(Function f, Args... args)
    : f(f),args(args...)
  {}

  void operator()()
  {
    // call f using the tuple's elements as arguments
    apply_from_tuple(f,args);
  }

  Function f;
  std::tuple<Args...> args;
}; 
```

构建函数的最简洁方法是`apply_from_tuple`什么？

# excel - 一次检查多个字符串块与excel中的一个范围

> ID：10254293
> 
> 赞同：1
> 
> 时间：2012-04-20T22:20:11.217
> 
> 标签：excel

我有一系列像这样的“好”值：

```
Apple
Banana
Pear
Grape
Melon 
```

还有一系列像这样的输入数据（`;`如果必须的话，我可能最多可以硬编码 10 个分离的元素）：

```
Apple; Grape  //Good
Watermellon   //bad
Pear; Peach   //bad, ideally return "Peach" 
```

我试图想出一个函数来检查输入数据的每个单元格是否符合可接受的值。所以它应该取 "Watermelon" 或 "Pear;Peach" 并返回 FALSE（理想情况下它会给我导致 FALSE 的字符串），对于 "Apple" 则返回 TRUE

VBA 是不可接受的。

我知道如何检查像“Apple”这样的单个字符串，但不知道如何一次检查多个子字符串。我尝试了一堆`FIND`+`MID`查找，但觉得必须有更好的方法。在那儿？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T09:44:54.877

没有vba，会很乱。如果您可以接受手动步骤，一种方法是使用 excel 中的文本到列功能，使用 ; 作为分隔符。

如果您知道您的项目不能超过 10 个，则可以有 10 个列，每个列包含一个项目或空白，使用 text o columns 或 find, mid 的组合。它会稍微不那么混乱，并允许您通过例如 vlookups 或条件格式来发现哪个列包含无效值。

# javascript - 更有效的预加载图像的方法

> ID：10254295
> 
> 赞同：5
> 
> 时间：2012-04-20T22:20:34.943
> 
> 标签：javascript, jquery

什么是预加载图像的更好方法：

```
$.each(['{{ MEDIA_URL }}jwplayer/jwplayer.js',
        '{{ MEDIA_URL }}jwplayer/jwplayer.js.jgz',
        '{{ MEDIA_URL }}jwplayer/player.swf'], function() {
   $('<img/>')[0].src = this; 
```

或者：

```
var preloadImages = ['{{ MEDIA_URL }}jwplayer/jwplayer.js',
                     '{{ MEDIA_URL }}jwplayer/jwplayer.js.jgz',
                     '{{ MEDIA_URL }}jwplayer/player.swf'];
var imgs = [];
for (var i=0; i<preloadImages.length; i++) {
    imgs[i] = new Image();
    imgs[i].src = preloadImages[i];
} 
```

是什么让一个比另一个更好？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T22:22:09.370

第二个比第一个好，因为它是纯 JavaScript 而不是 jQuery 的过度膨胀软件。

`l=preloadImages.length`您可以通过设置前面并在循环中使用它来稍微改进第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:23:12.283

两者都做同样的事情。第一个片段使用 jQuery，第二个片段没有。没有理由专门为此目的使用 jQuery，所以如果您不在其他地方使用该库，请使用第二个版本。如果您在整个站点中都使用 jQuery，那么第一个也可以。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:28:50.463

第二个更快。首先是更少的输入（通过在 jQuery 中使用更高级别的迭代器方法）。

如果由于其他原因您的项目中已经有 jQuery，那么哪个更好取决于您是否更愿意针对速度或代码大小进行优化。

在技​​术层面上，存在一个实际的实现差异。第二个版本将图像对象的数组保存在一个变量中。第一个让图像对象被垃圾收集。

# c# - System.Net.WebException

> ID：10254296
> 
> 赞同：0
> 
> 时间：2012-04-20T22:20:54.847
> 
> 标签：c#, exception, webrequest

在我看来，WebRequest.Create(url) 很快就失败了..

说明：

*   在失败的 url 上（或抛出 System.Net.WebException）...将该 url 复制粘贴到浏览器中似乎可以工作..浏览器给出响应！..有时会出现明显的延迟（约 10 秒） ..但不到 3 秒的 WebRequest 抛出异常

失败的有效 url 示例：

[http://tracker.podtropolis.com:2710/announce?info_hash=%92%FD%2F%0B%40%F64%C5%86%19%D6%3E%B1%28%B2%81%A1J%D4 %F6&peer_id=-AZ2060-%AD%18%05o%11%A6%26%B3%C3%D16%AC&port=6881&downloaded=0&uploaded=0&left=647749313&numwant=30&compact=1&event=started](http://tracker.podtropolis.com:2710/announce?info_hash=%92%FD%2F%0B%40%F64%C5%86%19%D6%3E%B1%28%B2%81%A1J%D4%F6&peer_id=-AZ2060-%AD%18%05o%11%A6%26%B3%C3%D16%AC&port=6881&downloaded=0&uploaded=0&left=647749313&numwant=30&compact=1&event=started)

*   如果它有任何意义，firefox 在这个 url 上的反应慢了 10 倍，这个资源管理器，有时 firefox 在加载这样的 url 时会崩溃

那么问题**为什么WebRequest这么快就失败了？**我希望它更努力地从 URL 获得响应......

这是捕获异常的方法（在这里我检查 url 是否有效或〜“跟踪器是否存在？？”）

```
public static bool isURLValid(string url)
    {
        try
        {
            HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
            request.Method = "HEAD";
            HttpWebResponse response = request.GetResponse() as HttpWebResponse;
            //Returns TURE if the Status code == 200
            return (response.StatusCode == HttpStatusCode.OK);
        }
        catch (Exception ex) //(WebException ex)
        {
            Logger.e(TAG, "isURLValid", ex);
            return false;  //Any exception will returns false.
        }
    } 
```

如果有效我得到流（我知道..我知道..双重联系..但仍然）

```
inputStream = WebRequest.Create(fullURL).GetResponse().GetResponseStream(); 
```

所以..想法？

# java - OpenDJ - 拦截 LDAP 事件

> ID：10254297
> 
> 赞同：0
> 
> 时间：2012-04-20T22:21:00.807
> 
> 标签：java, ldap, opends

我使用 OpenDJ 作为 Glassfish 服务器的身份验证模块，该服务器托管一些 EJB 3.1 bean。我目前使用 OpenDJ LDAP SDK 以编程方式添加或修改用户，并且我需要通知我的服务*每个*LDAP 事件。

如何以编程方式响应 LDAP 事件？（例如，添加或删除用户，从某个组/组织单位添加或删除用户）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:24:28.313

可以使用 OpenDJ 和 LDAP SDK 支持的 LDAP 持久搜索控件获取所有更新条目（或仅过滤的一组条目）的通知。

亲切的问候，

卢多

# google-maps - mapview 停止下载图块

> ID：10254299
> 
> 赞同：0
> 
> 时间：2012-04-20T22:21:21.103
> 
> 标签：google-maps, android-mapview, tiles, download

奇怪的问题：

我有一个程序可以愉快地在我的地图视图中下载地图图块。突然......不再有瓷砖了。

我没有更改任何可能影响下载过程的内容。所有代码保持不变，下载停止。

我想知道这是否与日期更改有关。它似乎发生在午夜之后。

任何想法在哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:22:30.503

非常愚蠢，但确实找到了至少一个犯了同样错误的人。

在将 onstop 复制粘贴到 onresume 时，我忘记将 super.onstop 更改为 super.onresume。

# javascript - 如何检测（并纠正？）跨浏览器的各种滚动条可见性？

> ID：10254300
> 
> 赞同：0
> 
> 时间：2012-04-20T22:21:28.277
> 
> 标签：javascript, jquery, html, css, cross-browser

基本上，当它们的内容相同时，我需要（或假的）滚动条在 a中和 a中*同时*显示（使用，以便将空格视为相同）。`textarea``div``white-space: pre-wrap`

在 Webkit 中，这很简单：

```
textarea.foo, div.foo {
  overflow: auto; /* show scrollbars exactly when needed */
  /* also match padding, height, width, font, line-height, etc. */
} 
```

但是当内容不够长而需要滚动时，其他一些浏览器（我认为是 OS X 上的 Firefox 和 IE7）实际上只会在 textarea 而不是 div 上显示滚动条（反之亦然）。

为清楚起见，我并不要求滚动条在所有浏览器中都显示相同。我需要在所有主要浏览器中都做到这一点：在同一浏览器中，只要给定相同的内容，div 和 textarea 就会在其他元素显示滚动条时准确地显示滚动条。如果那是有时、总是或（在 Safari/OS X Lion 上）永远不会是无关紧要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:43:55.980

配置滚动条一直显示

```
textarea.foo, div.foo {
  overflow-y: scroll; /* Show vertical scroll bars at all time 

} 
```

# xcode - 我应该将 10.4.u.sdk 文件夹放在哪里才能使其被 xCode 识别？

> ID：10254306
> 
> 赞同：0
> 
> 时间：2012-04-20T22:22:36.187
> 
> 标签：xcode, macos, sdk

我有自己的 sdk 文件夹，我需要知道将 sdk 文件夹放在哪里，以便最新的 xCode 版本（4.2）将其识别为 10.6 和 10.7 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:26:01.497

Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/

我放弃了尝试让 10.5 与 xcode 4.x 一起工作（更不用说 10.4）了。这变得太麻烦了。所以我不确定这对你有什么好处。

# css - CSS 布局 - 具有弹性背景的 3 列

> ID：10254307
> 
> 赞同：0
> 
> 时间：2012-04-20T22:22:37.067
> 
> 标签：css, fluid-layout

我正在构建一个 3 列的流体布局，并且已经完成了 90%。我想知道暗示背景或侧边栏的最佳方式是什么 - 但是你想看看它。

![在此处输入图像描述](../Images/2abe4839da1ed0e2235af32faa31bc40.png)

我有一个很好的 box hack，它以我的主要内容区域为中心，现在我需要暗示你在两边看到的两条条纹，它们在各自的内部边框上有一个 1px 的小边框。

我可以创建一个 1000 像素宽的 1px 高条纹，但我觉得有更好的方法来做到这一点 - 可能使用纯 CSS？

我现在是在看 5 列布局，还是仍然是三列流体？

如果有人可以为这种布局风格提供一个好的模式或链接（它可能是当今最常见的，嗯？）我真的很喜欢它！

这是我当前的流体包装代码：

CSS：

```
body
    {
        margin: 10px 0px;
        padding: 0px;
        text-align: center;
    }
    #siteWrapper
    {
        width: 980px;
        margin: 0px auto;
        text-align: left;
        padding: 15px;
        background-color: #fff;
    } 
```

HTML

```
<body>

<div id="siteWrapper">
</div>

</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:25:31.950

```
body
{
    margin: 10px 0px;
    padding: 0px;
    text-align: center;
    background: whatevercolor;
}
 #siteWrapper
    {
        width: 980px;
        margin: 0px auto;
        text-align: left;
        padding: 15px;
        background-color: #fff;
        border-left: whatever;
        border-right: whatever;
    } 
```

# html - 使用 applescript 在文本中查找 HTML 标记字符串并返回值 true 或 false

> ID：10254309
> 
> 赞同：0
> 
> 时间：2012-04-20T22:22:58.143
> 
> 标签：html, find, applescript, boolean, delimiter

我正在寻找一个 applescript 例程或子例程来查找此 HTML 标记字符串：

`<td width="487">`

在此 HTML 代码中：

```
 <h1><span id="profile-name-94461" >Jan Schlatter</span></h1>

            </span>

            <table width="100%" border="0" cellspacing="0" cellpadding="0" id="profile-table">
                                    <tr>
                    <th width="163" scope="col">Introduction</th>
                    <td width="487">Education :
<br />Management and support on responsibilities in finances and accounting.</td>
                </tr>
                                                        <tr>
                    <th>Role</th>
                    <td>
                    <p>Portfolio Management</p><p>Senior Management</p>                     </td>
                </tr>
                <tr>  
                    <th>Organisation Type</th>
                    <td>
                    <p>Family Office</p>                        </td>
                </tr>
                <tr>
                    <th>Email</th>
                    <td><a href="mailto:jan.schlatter@bohnetschlatter.ch" title="jan.schlatter@bohnetschlatter.ch" >jan.schlatter@bohnetschlatter.ch</a></td>
                </tr>
                <tr>
                    <th>Website</th>
                    <td><a href="http://bohnetschlatter.ch" target="_new" title="http://bohnetschlatter.ch" >http://bohnetschlatter.ch</a></td>
                </tr>
                <tr>
                    <th>Phone</th>
                    <td>+41 41 727 61 61</td>
                </tr>
                <tr>
                    <th>Fax</th>
                    <td>+41 41 727 61 62</td> 
                </tr>
                <tr>
                    <th>Mailing Address</th>
                    <td>Gartenstrasse 2<br>Postfach 42</td>
                </tr>
                <tr>
                    <th>City</th>
                    <td>Zurich</td>
                </tr>
                <tr>
                    <th>State</th>
                    <td></td>
                </tr>
                <tr>
                    <th>Country</th>
                    <td>Switzerland</td>
                </tr>
                <tr>
                    <th class="lastrow" >Zip/ Postal Code</th>
                    <td class="lastrow" >6301</td>
                </tr>
        </table> 
```

因为 HTML 标记并不总是在我想要处理的每个 HTML 文件中，所以我希望它返回一个布尔值，用于 if、then、else 语句中，然后在该值返回“true”时完成操作”。

我开始使用的applescript是

```
set intoTag to "<td width=" & quote & "487" & quote & ">"
   on stripLastWordBeforeLogoEndTag(theText)
  set text item delimiters to introTag
  set a to text items of theText
  set b to item 1 of a
  set text item delimiters to space
  set item 1 of a to (text items 1 thru -2 of b) as text
  set text item delimiters to "</Logo>"
  set fixedText to a as text
  set text item delimiters to ""
return fixedText

if infoTag = fixedText then set bool to true
else set bool to false
end if

if true then (do action[[set extractText_INTRODUCTION to extractBetween(extractText, "<td width=" & quote & "487" & quote & ">", "</td>")]])
else (do not do action)
end if 
```

我宁愿**不**使用 shell 脚本，因为我几乎不知道如何编辑 shell 脚本。在我看来，文本分隔符将是最好的解决方案，尽管欢迎任何答案。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T02:26:59.993

最简单的就是使用`is in`

```
set introTag to "<td width=\"487\">"
set existTag to introTag is in theText
if existTag then
    -- true
else
    -- false
end if 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:02:43.177

如果您不想使用 shell 脚本，您可以使用 Standard Additions 中的**offset**命令，该命令将在另一段文本中搜索一段文本。如果没有找到文本，结果将为 0，可以在你的 if 语句中使用，例如：

```
set theText to "...<table width=\"100%\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" id=\"profile-table\">
                                    <tr>
                    <th width=\"163\" scope=\"col\">Introduction</th>
                    <td width=\"487\">Education :..."

set here to offset of "<td width=\"487\">" in theText
if here is not 0 then
    log "text found at " & here -- do your stuff
end if 
```

# facebook-graph-api - Graph API（JS SDK）中的Facebook年龄范围？

> ID：10254314
> 
> 赞同：0
> 
> 时间：2012-04-20T22:23:35.890
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

根据[这个问题](https://stackoverflow.com/questions/5425716/getting-an-authed-facebook-users-age-without-further-permissions-prompts)和有关[Signed Request](http://developers.facebook.com/docs/authentication/signed_request/)的官方文档，在编码的 JSON 有效负载中应该有一个对象，该`user`对象带有一个`age`对象，用于用户的年龄范围。

但是，当我解码通过 JS SDK 收到的签名时，我只有、 和其他几个值，但没有`user_id`对象，更不用说年龄范围了。我已经在独立的“连接”环境以及“选项卡应用程序”环境中验证了这一点。此外，当我在[测试控制台](http://developers.facebook.com/tools/console/)上测试 JS SDK 时，我也看不到任何对象。`code``user``user`

**如何仅使用 JS SDK 获取用户年龄范围？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T05:09:38.047

从 你提到的[链接，](http://developers.facebook.com/docs/authentication/signed_request/)

> 字段和值
> 
> signed_request 只是一种数据传输机制，并不暗示请求中携带的任何已定义的数据结构或格式。但是，在 Facebook 平台中，JSON 对象负载***可能*** 包含以下一些字段和值：

注意***可能***。

> 未经许可，您无法通过js sdk获取年龄或年龄范围

.

**ps**我没有在画布应用程序中测试过，但是在页面选项卡中，签名的请求包含年龄范围，但只有当用户喜欢你的页面时:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T03:13:27.080

我认为您应该获得许可并计算生日日期。

# symfony - Symfony SonataAdmin 模板

> ID：10254316
> 
> 赞同：1
> 
> 时间：2012-04-20T22:23:39.180
> 
> 标签：symfony, symfony-sonata

我正在尝试修改 SonataAdmin 模板。我有一个具有路径属性的图像实体。我创建了一个 ImageAdmin 类，并将其集成到 sonataAdmin 中。我想修改 admin-list-view 以将路径包装在 img 标签中，以便实际显示图像。有谁知道我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-10T03:34:50.923

有两种方法可以使用您自己的模板。

在配置文件中：

```
sonata_doctrine_orm_admin:
    entity_manager: 

    templates:
        form:
            - SonataDoctrineORMAdminBundle:Form:form_admin_fields.html.twig
        filter:
            - SonataDoctrineORMAdminBundle:Form:filter_admin_fields.html.twig
        types:
            list:
               ...

            show:
                ...
                image: YourBundle:YourFolder:yourtemplate.html.twig 
```

并在字段定义文件中：

```
<?php
            namespace ...;

            use Sonata\AdminBundle\Admin\Admin;
            use Sonata\AdminBundle\Form\FormMapper;
            use Sonata\AdminBundle\Datagrid\DatagridMapper;
            use Sonata\AdminBundle\Datagrid\ListMapper;
            use Sonata\AdminBundle\Show\ShowMapper;

            class ImageAdmin extends Admin
            {
                protected function configureShowField(ShowMapper $showMapper)
                {
                    $showMapper
                        ...
                        ->add('image', 'image')
                        ...
                    ;
                }
            }
        ?> 
```

**或者**第二种方式：

```
 <?php
        namespace ...;

        use Sonata\AdminBundle\Admin\Admin;
        use Sonata\AdminBundle\Form\FormMapper;
        use Sonata\AdminBundle\Datagrid\DatagridMapper;
        use Sonata\AdminBundle\Datagrid\ListMapper;
        use Sonata\AdminBundle\Show\ShowMapper;

        class ImageAdmin extends Admin
        {
            protected function configureShowField(ShowMapper $showMapper)
            {
                $showMapper
                    ...
                    ->add('image', 'string', array('template' => 'YourBundle:YourFolder:yourtemplate.html.twig'))
                    ...
                ;
            }
        }
    ?> 
```

然后将下面的代码复制到您的模板中：

```
{% extends 'SonataAdminBundle:CRUD:base_show_field.html.twig' %}

{% block field %}
    <img src="{{ asset('uploads/media/') }}{{ value|nl2br }}"/>
{% endblock %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T22:42:39.320

与 HuyVu 相同，但我将其用于自定义模板

```
{% extends 'SonataAdminBundle:CRUD:base_list_field.html.twig' %}

{% block field %}
    {% thumbnail value, 'small' %}
{% endblock %} 
```

# php - htaccess - 禁止页面仅通过 ajax 或仅作为包含工作

> ID：10254319
> 
> 赞同：1
> 
> 时间：2012-04-20T22:23:54.003
> 
> 标签：php, .htaccess, include

我想拒绝访问者访问页面但仍使用这些页面。我怎样才能：

~ 使页面不可见，但允许它处理 ajax 请求。

~ 使 PHP 文件不可见，但将其包含在脚本中。

看来我需要htaccess。我尝试使用它，但它阻止了我将该文件用作包含。

对于仅 ajax 的事情，似乎我可以在仅 ajax 页面中使用它：

```
<?php
$AJAX = (isset($_SERVER['HTTP_X_REQUESTED_WITH']) &&
        $_SERVER['HTTP_X_REQUESTED_WITH'] == 'XMLHttpRequest');
if ($AJAX){
    // echo ajax code.
}
?> 
```

这可靠吗？

标签：仅通过ajax

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:32:33.110

完成第二个问题的一种方法是使脚本可用于服务器端包含和使用但不能从客户端访问，是将其添加到包含您希望以这种方式保护的脚本的文件夹中的 .htaccess 文件中：

```
deny from all 
```

现在尝试浏览脚本，您应该无法访问它。这适用于 .htaccess 文件所在的整个目录。

像这样“屏蔽”客户端通过 Web 服务器访问 php 文件的另一种方法是将 php 文件放在wwwroot/public_html*之外的目录中。*

在您的 PHP 配置中，您必须将此目录添加到您的包含搜索路径中，或者只是通过正确的相对路径或使用绝对路径来包含它。

例如，如果你有 root_ contains_folder/wwwroot/index.php 和 root_ contains_folder/app/core.php，在 index.php 中你可以有

```
require_once('../app/core.php'); 
```

和 core 将被包括在内，但浏览器永远无法自行访问 core.php。（如果可以的话，它必须通过像 www.facing-site.com/../app/core.php 这样的 URL——你的网络服务器绝不应该允许！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:28:19.933

你不能做这些事情：当脚本发出 AJAX 请求时，发送请求的是用户的浏览器。如果您希望客户端脚本看到您的内容，浏览器必须能够看到它。

您可以通过隐匿性应用一些安全性，例如通过在脚本中放置某种身份验证令牌。这不会为您提供太多保护，因为用户所要做的就是阅读 JS 以获取令牌，但它会阻止临时访问者四处闲逛。您的“如果 XHR”正在有效地执行此操作 - 如果地址放在地址栏中，浏览器通常不会发送该标题，但用户可以轻松地在您的 AJAX 代码之外获得相同的效果。

# asp-classic - Server.CreateObject 使用 chiliupload 组件失败

> ID：10254326
> 
> 赞同：1
> 
> 时间：2012-04-20T22:24:50.537
> 
> 标签：asp-classic

我被要求提供帮助的旧版 asp 应用程序出现以下错误。

```
Server object error 'ASP 0177 : 800401f3'

Server.CreateObject Failed

/site_manager/image_upload.asp, line 27

800401f3 
```

抛出错误的代码行如下所示：

```
Set fbase = Server.CreateObject("chili.upload.1") 
```

正如您可能已经猜到的那样，oldschool asp 不是我的强项，但从我所做的研究来看，好像一个组件还没有在服务器上注册（我只有 FTP 访问权限）。

什么组件需要注册？

谢谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:11:30.367

您需要注册 Sun Chili!Soft ASP 组件。这是 2003 年的手册：http: [//ns7.webmasters.com/caspdoc/html/running_the_setup_program_sun_chili_soft_asp_for_windows.htm](http://ns7.webmasters.com/caspdoc/html/running_the_setup_program_sun_chili_soft_asp_for_windows.htm)。**请注意，这仅在您仍然拥有原始设置时才有效。否则你就不走运了。**Sun Chili!Soft ASP 不再可用并且非常非常死。

如果您只是对 ASP 上的文件上传功能感兴趣，我可以推荐[Free ASP Upload](http://www.freeaspupload.net/)。它不需要注册任何组件并且通常可以工作。我也可以推荐[这篇](http://www.codeguru.com/csharp/.net/net_asp/article.php/c19297/Pure-ASP-File-Upload.htm)关于 ASP 上传主题的文章。如果您愿意花一些钱，那么也有数百个组件可以做同样的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T22:42:25.290

您缺少创建 chili.upload.1 对象的 DLL 的注册。你想在 Linux 机器上运行它吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-26T13:10:43.533

在您的计算机上注册 DLL，然后执行以下操作：

*   找到并单击以下注册表子项：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\MAIN\ FeatureControl\FEATURE_IGNORE_ZONES_INITIALIZATION_FAILURE_KB945701
*   注意如果 FEATURE_IGNORE_ZONES_INITIALIZATION_FAILURE_KB945701 子项不存在，您必须手动创建它。如果您使用的是 64 位操作系统，则可能需要改用 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Internet Explorer\MAIN\ FeatureControl\FEATURE_IGNORE_ZONES_INITIALIZATION_FAILURE_KB945701
*   右键单击 FEATURE_IGNORE_ZONES_INITIALIZATION_FAILURE_KB945701，指向新建，然后单击 DWORD 值
*   键入 w3wp.exe 以命名新的注册表项，然后按 Enter。
*   右键单击 w3wp.exe，然后单击修改。
*   在数值数据框中，键入 1，然后单击确定。

设置此注册表项后，简单的应用程序池重新启动将应用更改。您的 .NET COM 组件将不再会在没有真正解决方案的情况下随机停止工作，除了改组应用程序池！

# json - 如何将 api 链接变成有用的东西？

> ID：10254327
> 
> 赞同：0
> 
> 时间：2012-04-20T22:25:02.917
> 
> 标签：json, api, dictionary

我以前没有尝试过很多这样的事情，所以我想知道做我想做的事情的推荐路线是什么。

我正在尝试在 JSON 字典中返回食谱的 PunchFork.com api。[这是一个例子](http://api.punchfork.com/recipes?key=7d6e9bb6ceb947c6&q=turkey&count=4)。

我将如何返回每个食谱的“标题”、“拇指”和“pf_url”，以便我可以在页面上显示它们？目前有几个选择用于创建 url 的值，但我不知道如何处理该 url 以便在页面上显示数据。

如果你有问题，就问吧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:39:25.083

您使用什么语言生成网页？大多数语言都有将 JSON 字符串转换为该语言可以理解的对象的内置机制。

这是一个使用 PHP 生成 HTML 页面的示例，其中包含您引用的 API 中的所有图像：

```
$response = file_get_contents($url);

$object = json_decode($response);

// Now $object is an object with the same data represented in the JSON string,
//   and you can refer to its class members accordingly:

foreach ($object->recipes as $recipe)
{
    $imageUrl = $recipe->source_img;
    echo '<img src="$imageUrl" />';
} 
```

# java - 如何在自己的类中初始化对象？

> ID：10254329
> 
> 赞同：1
> 
> 时间：2012-04-20T22:25:19.293
> 
> 标签：java

我的印象是，如果有一个现有的类可以创建一个新对象。

```
public final class Suit implements Comparable {
  private String name;
  private String symbol; 

  public final static Suit CLUBS = new Suit( "Clubs", "c" ); 
```

这是如何运作的？在自己的类中初始化而不是在主类中进行初始化有什么好处？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:34:15.120

一个类本身就是一个对象，它实现了方法——例如 newInstance() ，它为你提供了一个类类型的对象。我知道这不是最清晰的定义，但它是这样工作的：

每当您创建一个 MyClass 类型的新对象时，类加载器首先检索并创建一个代表您的类的对象：

```
Class<?> MyClassObject 
```

它执行所有“静态”变量的静默构造。然后程序向 MyClassObject 询问 MyClass 的一个实例：

```
MyClass object = MyClassObject.newInstance() 
```

静态变量和方法属于 MyClassObject，而实例变量属于 MyClass

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:28:32.303

注意 CLUBS 是静态的。它不是任何对象的一部分，而是属于整个类。

您可以在 main 中初始化 CLUBS，但随后

1.  CLUBS 只能在 main 方法中可见
2.  如果您在没有 main 方法的情况下运行 java（例如网页，则不会有 CLUBS）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T22:31:58.293

没有任何问题，因为在实例化的时刻，关于类结构的全部信息都是可用的，并且可以实例化（无论是在静态字段还是非静态字段中）。

这有点像递归定义 - 这是完全合法的：

```
 Node:
      Node parent;
      Node left;
      Node right; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T22:32:30.553

这是类型安全枚举（Java 1.5 之前）或单例类的经典场景。在声明点进行初始化的好处是，这是该字段的唯一方式`final`，这本身就是一个非常重要的特性。

# css - 创建图标字体的工具

> ID：10254331
> 
> 赞同：11
> 
> 时间：2012-04-20T22:25:21.817
> 
> 标签：css, fonts, icons, embedded-fonts, icon-fonts

我想创建一个用于 Web 应用程序的图标字体。fontAwesome、Iconic、fontomas 是我想做的例子，但我需要使用自定义图标。我不知道从哪里开始。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T21:14:15.917

如果您还没有看到它，我的网络应用程序可以帮助您生成图标字体：http: [//icomoon.io/app](http://icomoon.io/app)

您可以导入自己的 SVG，或浏览图标字体库：http: [//icomoon.io/app/#library](http://icomoon.io/app/#library)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-21T00:41:19.327

[Inkscape](http://inkscape.org/)是一个很棒的免费应用程序，用于创建带有矢量的图形（现代字体是由什么组成的）。

[FontForge](http://fontforge.sf.net/)是一个很棒的免费字体创建应用程序，并且可以从 Inkscape 导入[SVG](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics)（一种很棒的免费矢量图形格式）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-03T22:02:31.117

不管 narkeeso 怎么说，一种字体只有一个基线。你所有的图标都应该在那条线上保持一致。一些图标字体尝试将图标垂直居中，但这会导致比它解决的问题更多的问题，您始终可以使用该`vertical-align`属性调整图标相对于周围字符的垂直位置。

我为那篇文章在模板中大量测试了基线，它在浏览器中非常成功。但是，您可能希望将 X 高度与 Arial 等常见字体匹配。这可以在字体松鼠转换器中完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T17:29:08.647

Rob，你可以[从这里开始](http://www.webdesignerdepot.com/2012/01/how-to-make-your-own-icon-webfont/)。

这不是最好的例子，它所说的模板有点过时了。您必须根据字体基线在画布上移动图标来进行试验。

还有这篇[长文章](http://vector.tutsplus.com/articles/case-study/the-making-of-gui-design-icons-font/#Drawing_icons_in_Adobe_Illustrator)，他将他的向量导入 FontLab。FontLab 的缺点是它的价格为 649 美元，而且它的学习曲线比 Inkscape 更陡峭。我还发现 FontLab 在我的 OS X 安装中存在问题。

附带说明：

有人需要制作专门用于此任务的软件...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-11T17:40:12.820

我一直在使用一个名为 glyphs ( [http://www.glyphsapp.com/](http://www.glyphsapp.com/) ) 的应用程序来创建字体，并且最近尝试了一种用于 Web 的图标字体。我导入了带有引导程序的字形图标，以查看它们使用的指标。所以在 20px fontsize 他们最匹配网格。等等等等

我有一个自定义脚本来导出一个 css 文件，该文件使用附加的 unicode 创建所有类。和另一个将 unicode 值分配给自定义字形的 python 脚本（一些图标实际上是 unicode 的一部分，如相机、铃铛等）

之后我必须使用字体松鼠进行网络字体转换，我一直与开发人员联系，他说他正在实施网络字体导出。更新是免费的，但他还没有包括直接的 webfont 导出。所以将字体从应用程序中取出到浏览器中总是有点麻烦。

但我当然已经简化了一些因素。

fontlab 不是那么用户友好，我不推荐它主要是因为这个原因，还有价格。glyphs 提供了一个 40 欧元的迷你版，它应该涵盖了生成图标所需的功能。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-28T18:14:32.187

如果你需要字体图标，这个应用非常好： http: [//fontastic.me/](http://fontastic.me/)

# ruby - 为什么只获取第一个链接？

> ID：10254339
> 
> 赞同：1
> 
> 时间：2012-04-20T22:26:19.140
> 
> 标签：ruby, httparty

我正在尝试从 Hacker News 获取新闻并将链接的标题和 URL 写入 HTML 文件。但是，只有第一个链接正在编写，其他链接没有。我究竟做错了什么？

```
require 'httparty'

def fetch(source)
  response = HTTParty.get(source)
  response["items"].each do |item|
    return '<a href="' + item["url"] + '">' + item["title"] + '</a>'
  end
end

links = fetch('http://api.ihackernews.com/page')

File.open("/tmp/news.html", "w") do |f|
  f.puts links
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T22:30:02.967

在这种情况下，您不应该使用`return`关键字。它提前结束该方法并仅返回第一个链接。改用这个：

```
require 'httparty'

def fetch(source)
  response = HTTParty.get(source)

  # convert response['items'] array to array of strings
  response["items"].map do |item| 
    '<a href="' + item["url"] + '">' + item["title"] + '</a>'
  end
end

links = fetch('http://api.ihackernews.com/page')

links.length # => 30 
```

# memory - 解释汇编代码比较

> ID：10254342
> 
> 赞同：0
> 
> 时间：2012-04-20T22:26:53.493
> 
> 标签：memory, assembly

> **可能重复：**
> [在 x86 程序集中混淆 add 命令](https://stackoverflow.com/questions/10159264/confusing-add-command-in-x86-assembly)

我想了解这两行汇编：

```
8048d74:       03 44 9e fc             add    -0x4(%esi,%ebx,4),%eax
8048d78:       39 04 9e                cmp    %eax,(%esi,%ebx,4) 
```

我认为`(%esi,%ebx,4)`是一个有效的地址形式 (BASE, INDEX, SCALE)

我相信 add 命令正在获取 %eax 的值，将其添加到 [esi + ebx*4 + mem_location] 的值并将其存储在同一位置。

然后，cmp 指令测试 [esi + ebx*4 + mem_location] 处的值是否等于 %eax 处的值。

所以，只有当添加的两个值之一是 0 时，这才会返回 true，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:34:13.217

这似乎是 AT&T 格式的源代码，其中的顺序是`op source, dest`. 这意味着第一个是将有效地址处的值添加*到*eax。然后，第二行将第二个值与 eax 进行比较。

# c++ - 模板函数参数继承

> ID：10254343
> 
> 赞同：3
> 
> 时间：2012-04-20T22:26:55.677
> 
> 标签：c++, templates, inheritance

我有一个可以返回任何类型、接受命令和 FormData 对象的调度程序。这个想法是我希望在传递特定内容时从 FormData 继承。

```
struct FormData {};

struct Form : FormData {};

void login(const Form *f){}

enum Command
{
    LOGIN
};

template <typename T>
T dispatch(const Command command, const FormData *f)
{
    switch (command)
    {
    case LOGIN: login(f);
    }

    return T();
}

int main()
{
    Form f;

    dispatch<void>(LOGIN, &f);

    return 0;
} 
```

我收到一条错误消息，提示无法从 Form 转换为 FormData。我拿走了模板，一切正常（但我需要模板）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:32:15.010

您的`FormData`类是基类，`Form`是派生的，但是您的*登录*功能看起来像

```
void login(const Form *f){} 
```

但是在你的调度函数中，你试图传递一个基类指针

```
T dispatch(const Command command, const FormData *f)
{
    switch (command)
    {
    case LOGIN: login(f);
    } 
```

C++ 根本不会让你这样做。Form* 可以隐式转换为 FormData*，但不能反过来。

也许您可以向调度函数添加另一个模板参数，并让该函数在编译时确定具体类型：

```
struct FormData {};

struct Form : public FormData {};

void login(const Form *f){}

enum Command
{
    LOGIN
};    

template <typename T>
T dispatch(const Command command)
{
    return T();
}

template <typename T, typename FormDataType>
T dispatch(const Command command, const FormDataType *f)
{
    switch (command)
    {
    case LOGIN: login(f);
    }

    return dispatch(command);
}

int main()
{
    Form f;

    dispatch<void>(LOGIN, &f);
    dispatch<void>(LOGIN);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:33:14.083

您可以从`Form*`（派生类）隐式转换为`FormData*`（基类），但*不能*从`FormData*`（基类）隐式转换为`Form*`（派生类）。

一旦你输入`dispatch`函数，编译器就知道你有一个指向基类的指针`FormData`；它不知道您正在传递一个指向派生类的指针，`Form`.

# python - 为 PyDev 安装 Jython 时出错

> ID：10254353
> 
> 赞同：2
> 
> 时间：2012-04-20T22:27:52.533
> 
> 标签：python, eclipse, jython, pydev

我之前在 Eclipse 中安装过 PyDev 和 Jython，我从来没有遇到过问题。但是，这一次我在手动或自动安装时遇到错误：

```
Unable to gather the needed info from the system.

This usually means that your interpreter is not in
the system PATH.
No output was in the standard output when trying to create the interpreter info.
The error output contains:>>Traceback (innermost last):
  File "/home/michaele/Downloads/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 89, in ?
  File "/home/michaele/Downloads/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 46, in nativePath
  File "/home/michaele/Downloads/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 51, in fullyNormalizePath
AttributeError: class 'org.python.modules.os' has no attribute 'path'
<< 
```

在命令行上使用 Jython 或 Python 运行相同的脚本似乎很好：

```
$ python /eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py
<xml>
<version>2.6</version>
<executable>/usr/bin/python</executable>
<lib path="out">/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc</lib>
<lib path="ins">/usr/lib/python2.6</lib>
<lib path="ins">/usr/lib/python2.6/plat-linux2</lib>
<lib path="ins">/usr/lib/python2.6/lib-tk</lib>
<lib path="ins">/usr/lib/python2.6/lib-old</lib>
<lib path="ins">/usr/lib/python2.6/lib-dynload</lib>
<lib path="ins">/usr/local/lib/python2.6/dist-packages</lib>
<lib path="ins">/usr/lib/python2.6/dist-packages</lib>
<lib path="ins">/usr/lib/python2.6/dist-packages/PIL</lib>
<lib path="ins">/usr/lib/python2.6/dist-packages/gst-0.10</lib>
<lib path="ins">/usr/lib/pymodules/python2.6</lib>
<lib path="ins">/usr/lib/python2.6/dist-packages/gtk-2.0</lib>
<lib path="ins">/usr/lib/pymodules/python2.6/gtk-2.0</lib>
<forced_lib>__builtin__</forced_lib>
<forced_lib>__main__</forced_lib>
<forced_lib>_ast</forced_lib>
<forced_lib>_bisect</forced_lib>
<forced_lib>_codecs</forced_lib>
<forced_lib>_collections</forced_lib>
<forced_lib>_functools</forced_lib>
<forced_lib>_hashlib</forced_lib>
<forced_lib>_locale</forced_lib>
<forced_lib>_random</forced_lib>
<forced_lib>_socket</forced_lib>
<forced_lib>_sre</forced_lib>
<forced_lib>_ssl</forced_lib>
<forced_lib>_struct</forced_lib>
<forced_lib>_symtable</forced_lib>
<forced_lib>_warnings</forced_lib>
<forced_lib>_weakref</forced_lib>
<forced_lib>array</forced_lib>
<forced_lib>binascii</forced_lib>
<forced_lib>cPickle</forced_lib>
<forced_lib>cStringIO</forced_lib>
<forced_lib>errno</forced_lib>
<forced_lib>exceptions</forced_lib>
<forced_lib>fcntl</forced_lib>
<forced_lib>gc</forced_lib>
<forced_lib>grp</forced_lib>
<forced_lib>imp</forced_lib>
<forced_lib>itertools</forced_lib>
<forced_lib>marshal</forced_lib>
<forced_lib>math</forced_lib>
<forced_lib>operator</forced_lib>
<forced_lib>posix</forced_lib>
<forced_lib>pwd</forced_lib>
<forced_lib>select</forced_lib>
<forced_lib>signal</forced_lib>
<forced_lib>spwd</forced_lib>
<forced_lib>strop</forced_lib>
<forced_lib>sys</forced_lib>
<forced_lib>syslog</forced_lib>
<forced_lib>thread</forced_lib>
<forced_lib>time</forced_lib>
<forced_lib>unicodedata</forced_lib>
<forced_lib>xxsubtype</forced_lib>
<forced_lib>zipimport</forced_lib>
<forced_lib>zlib</forced_lib>
</xml>Traceback (most recent call last):
  File "/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 142, in <module>
    raise RuntimeError('Ok, this is so that it shows the output (ugly hack for some platforms, so that it releases the output).')
RuntimeError: Ok, this is so that it shows the output (ugly hack for some platforms, so that it releases the output).
$ jython /eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py
<xml>
<version>2.2</version>
<executable>None</executable>
<lib path="out">/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc</lib>
<lib path="ins">/usr/share/jython/Lib</lib>
<lib path="out">/usr/lib/site-python</lib>
<lib path="out">__classpath__</lib>
<forced_lib>sets</forced_lib>
<forced_lib>cPickle</forced_lib>
<forced_lib>math</forced_lib>
<forced_lib>thread</forced_lib>
<forced_lib>md5</forced_lib>
<forced_lib>_jython</forced_lib>
<forced_lib>py_compile</forced_lib>
<forced_lib>time</forced_lib>
<forced_lib>jarray</forced_lib>
<forced_lib>array</forced_lib>
<forced_lib>os</forced_lib>
<forced_lib>xreadlines</forced_lib>
<forced_lib>operator</forced_lib>
<forced_lib>binascii</forced_lib>
<forced_lib>_sre</forced_lib>
<forced_lib>errno</forced_lib>
<forced_lib>synchronize</forced_lib>
<forced_lib>types</forced_lib>
<forced_lib>ucnhash</forced_lib>
<forced_lib>pre</forced_lib>
<forced_lib>struct</forced_lib>
<forced_lib>_weakref</forced_lib>
<forced_lib>new</forced_lib>
<forced_lib>imp</forced_lib>
<forced_lib>exceptions</forced_lib>
<forced_lib>cStringIO</forced_lib>
<forced_lib>sha</forced_lib>
<forced_lib>_codecs</forced_lib>
</xml>Traceback (innermost last):
  File "/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 142, in ?
RuntimeError: Ok, this is so that it shows the output (ugly hack for some platforms, so that it releases the output). 
```

也可以使用 Python 或 Jython 从 Eclipse 中的交互式控制台运行，即：

Python：

```
import sys; print('%s %s' % (sys.executable or sys.platform, sys.version))
/usr/bin/python2.6 2.6.6 (r266:84292, Sep 15 2010, 16:22:56) 
[GCC 4.4.5]
PyDev console: using default backend (IPython not available).
import os
os.path.normpath('/')
'/' 
```

杰通：

```
import sys; print('%s %s' % (sys.executable or sys.platform, sys.version))
--->  reloading /eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/pydevconsole.py
PyDev console: using default backend (IPython not available).

You are now in a console within Eclipse.
Use it with care as it can halt the VM.
Typing a line with "PYDEV_CONSOLE_TOGGLE_RUN_IN_UI"
will start executing all the commands in the UI thread.

java1.6.0_21 2.2.1
import os
os.path.normpath('/')
'/' 
```

环境信息：

```
OS- Ubuntu 10.10 Maverick

Eclipse- Version: Indigo Service Release 2
         Build id: 20120216-1857

Python- 2.6.6

Jython- 2.2.1 on java1.6.0_21

Java- java version "1.6.0_21"
      Java(TM) SE Runtime Environment (build 1.6.0_21-b06)
      Java HotSpot(TM) 64-Bit Server VM (build 17.0-b16, mixed mode) 
```

对不起，很长的帖子，但我不知道什么是相关的。我已经尝试了所有我能想到的让 Jython 在 PyDev 中工作的方法都无济于事。任何帮助将不胜感激。

谢谢，

麦克风

EDIT1：添加对法比奥的回应

感谢您提供的所有建议，我感谢您的帮助。但还是不行。

1.  导致此错误：

无法从系统收集所需的信息。

```
This usually means that your interpreter is not in
the system PATH.
No output was in the standard output when trying to create the interpreter info.
The error output contains:>>Traceback (innermost last):
  File "/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 15, in ?
ImportError: no module named javaos
<< 
```

这对我来说没什么意义。

1.  给出了我一直得到的相同错误：

无法从系统收集所需的信息。

```
This usually means that your interpreter is not in
the system PATH.
No output was in the standard output when trying to create the interpreter info.
The error output contains:>>Traceback (innermost last):
  File "/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 89, in ?
  File "/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 46, in nativePath
  File "/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 51, in fullyNormalizePath
AttributeError: class 'org.python.modules.os' has no attribute 'path'
<< 
```

1.  从日食：

    无法从系统收集所需的信息。

    这通常意味着您的解释器不在系统 PATH 中。尝试创建解释器信息时，标准输出中没有输出。错误输出包含：>> Traceback (innermost last): (no code object) at line 0 File "/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 17 print(' \n'.join(sorted(str(x) for x in os.environ.items()))) ^ SyntaxError: invalid syntax <<

从控制台：

```
python /eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py
('COLORTERM', 'gnome-terminal')
('DBUS_SESSION_BUS_ADDRESS', 'unix:abstract=/tmp/dbus-sgAQf9jF15,guid=95ee83c3b3510c530cb4ea8500000066')
('DEFAULTS_PATH', '/usr/share/gconf/gnome.default.path')
('DESKTOP_SESSION', 'gnome')
('DISPLAY', ':0.0')
('GDMSESSION', 'gnome')
('GDM_KEYBOARD_LAYOUT', 'us')
('GDM_LANG', 'en_US.utf8')
('GNOME_DESKTOP_SESSION_ID', 'this-is-deprecated')
('GNOME_KEYRING_CONTROL', '/tmp/keyring-JsqHSQ')
('GNOME_KEYRING_PID', '1799')
('GTK_MODULES', 'canberra-gtk-module')
('HOME', '/home/michaele')
('LANG', 'en_US.utf8')
('LOGNAME', 'michaele')
('MANDATORY_PATH', '/usr/share/gconf/gnome.mandatory.path')
('ORBIT_SOCKETDIR', '/tmp/orbit-michaele')
('PATH', '/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games')
('PWD', '/home/michaele')
('SESSION_MANAGER', 'local/michaele-Dell-System-XPS-L702X:@/tmp/.ICE-unix/1818,unix/michaele-Dell-System-XPS-L702X:/tmp/.ICE-unix/1818')
('SHELL', '/bin/bash')
('SHLVL', '1')
('SSH_AGENT_PID', '1848')
('SSH_AUTH_SOCK', '/tmp/keyring-JsqHSQ/ssh')
('TERM', 'xterm')
('USER', 'michaele')
('USERNAME', 'michaele')
('WINDOWID', '67108892')
('WINDOWPATH', '7')
('XAUTHORITY', '/var/run/gdm/auth-for-michaele-cd81Hc/database')
('XDG_CONFIG_DIRS', '/etc/xdg/xdg-gnome:/etc/xdg')
('XDG_DATA_DIRS', '/usr/share/gnome:/usr/local/share/:/usr/share/')
('XDG_SESSION_COOKIE', '6b516b0ac1421896dc0de6dc00000009-1335548722.708677-1288196033')
('_', '/usr/bin/python')
<xml>
<version>2.6</version>
<executable>/usr/bin/python</executable>
<lib path="out">/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc</lib>
<lib path="ins">/usr/lib/python2.6</lib>
<lib path="ins">/usr/lib/python2.6/plat-linux2</lib>
<lib path="ins">/usr/lib/python2.6/lib-tk</lib>
<lib path="ins">/usr/lib/python2.6/lib-old</lib>
<lib path="ins">/usr/lib/python2.6/lib-dynload</lib>
<lib path="ins">/usr/local/lib/python2.6/dist-packages</lib>
<lib path="ins">/usr/lib/python2.6/dist-packages</lib>
<lib path="ins">/usr/lib/python2.6/dist-packages/PIL</lib>
<lib path="ins">/usr/lib/python2.6/dist-packages/gst-0.10</lib>
<lib path="ins">/usr/lib/pymodules/python2.6</lib>
<lib path="ins">/usr/lib/python2.6/dist-packages/gtk-2.0</lib>
<lib path="ins">/usr/lib/pymodules/python2.6/gtk-2.0</lib>
<forced_lib>__builtin__</forced_lib>
<forced_lib>__main__</forced_lib>
<forced_lib>_ast</forced_lib>
<forced_lib>_bisect</forced_lib>
<forced_lib>_codecs</forced_lib>
<forced_lib>_collections</forced_lib>
<forced_lib>_functools</forced_lib>
<forced_lib>_hashlib</forced_lib>
<forced_lib>_locale</forced_lib>
<forced_lib>_random</forced_lib>
<forced_lib>_socket</forced_lib>
<forced_lib>_sre</forced_lib>
<forced_lib>_ssl</forced_lib>
<forced_lib>_struct</forced_lib>
<forced_lib>_symtable</forced_lib>
<forced_lib>_warnings</forced_lib>
<forced_lib>_weakref</forced_lib>
<forced_lib>array</forced_lib>
<forced_lib>binascii</forced_lib>
<forced_lib>cPickle</forced_lib>
<forced_lib>cStringIO</forced_lib>
<forced_lib>errno</forced_lib>
<forced_lib>exceptions</forced_lib>
<forced_lib>fcntl</forced_lib>
<forced_lib>gc</forced_lib>
<forced_lib>grp</forced_lib>
<forced_lib>imp</forced_lib>
<forced_lib>itertools</forced_lib>
<forced_lib>marshal</forced_lib>
<forced_lib>math</forced_lib>
<forced_lib>operator</forced_lib>
<forced_lib>posix</forced_lib>
<forced_lib>pwd</forced_lib>
<forced_lib>select</forced_lib>
<forced_lib>signal</forced_lib>
<forced_lib>spwd</forced_lib>
<forced_lib>strop</forced_lib>
<forced_lib>sys</forced_lib>
<forced_lib>syslog</forced_lib>
<forced_lib>thread</forced_lib>
<forced_lib>time</forced_lib>
<forced_lib>unicodedata</forced_lib>
<forced_lib>xxsubtype</forced_lib>
<forced_lib>zipimport</forced_lib>
<forced_lib>zlib</forced_lib>
</xml>Traceback (most recent call last):
  File "/eclipse/plugins/org.python.pydev_2.5.0.2012040618/PySrc/interpreterInfo.py", line 143, in <module>
    raise RuntimeError('Ok, this is so that it shows the output (ugly hack for some platforms, so that it releases the output).')
RuntimeError: Ok, this is so that it shows the output (ugly hack for some platforms, so that it releases the output). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-28T16:36:02.500

在尝试将 Jython 解释器添加到 eclipse 时，我遇到了一个类似的问题，收到“从解释器获取信息时出错”消息。就我而言，我使用的是自己构建的 Jython 版本。

当您在根 jython 目录中运行 ant 构建（不带选项）时，它将生成 dist/jython-dev.jar。此 jar 文件与您从 jython 网站下载的 jar 文件不同，因为它没有捆绑 jython 需要的所有第三方 jar。ant 生成的 dist/bin/jython 脚本将这些添加到类路径中。

Pydev 不使用该脚本来运行 Jython，它只是使用 jar 文件并假定它包含所需的一切。要获取解释器信息，Pydev 运行如下命令：

```
/System/Library/Frameworks/JavaVM.framework/Versions/A/Commands/java -Dpython.home=/Users/me/dev/projects/jython/dist -classpath /Users/me/dev/projects/jython/dist/jython-dev.jar org.python.util.jython /Users/me/dev/projects/Pydev/plugins/org.python.pydev/pysrc/interpreterInfo.py 
```

您可以通过在 jython 根文件夹中运行以下命令来编译捆绑所有需求的 jython.jar 文件：

```
ant jar-complete 
```

这会将 jython.jar 放入 dist 文件夹中，该文件夹应该可以与 Pydev 一起正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T11:06:19.753

必须说我以前从未见过那个:)

我可以想象的一些事情可能会解决它：

1.  尝试改变：

    \plugins\org.python.pydev_2.5.0.2012040618\PySrc\interpreterInfo.py

    改变：

    导入操作系统

    到：

    导入 os.path

2.  另一种猜测是在 Eclipse 中某些环境变量是不同的……首先要检查的是从执行这些打印的同一个控制台启动 Eclipse（而不是直接从桌面启动它——如果是这样的话）。

3.  如果仍然不起作用，请执行以下操作：

    在interpreterInfo.py 脚本的开头（在“import os”之后）

    做：

    print('\n'.join(sorted(str(x) for x in os.environ.items())))

    然后尝试配置解释器并在帖子中发布该日志。然后，还要从控制台运行interpreterInfo.py 并将其也添加到帖子中（以查看环境是否有任何差异）。

# javascript - 如何根据表单的文本输入准备值列表？

> ID：10254358
> 
> 赞同：3
> 
> 时间：2012-04-20T22:28:14.857
> 
> 标签：javascript, jquery, ajax, arrays, forms

给定以下形式：

```
<form class="email-form" action="" method="PUT" data-remote="true" data-method="put">
  <ul>
    <li>
      <label for="sEmail1">
        <input type="text" id="sEmail1" name="emails[]" value="d@google.com"
               placeholder="">
      </label>
    </li>
    <li>
      <label for="sEmail2">
        <input type="text" id="sEmail2" name="emails[]" value="d2@google.com"
               placeholder="">
      </label>
    </li>
    <li>
      <label for="sEmail3">
        <input type="text" id="sEmail3" name="emails[]" value="d3@google.com"
               placeholder="">
      </label>
    </li>
  </ul>
  <button type="submit">Continue</button>
</form> 
```

如何使用查询来获取完整的电子邮件列表并将其发布到 rails 如下：

```
Parameters: {"emails"=>{"list"=>["d@google.com", "d2@google.com","d2@google.com"]}} 
```

我有以下内容：

```
 $.ajax({
        type: 'POST',
        url: '/send_invites',
        data: {
            emails : {
                list : $('.email-form').serialize()
            },
            _method : 'PUT'
        },
        success : function() {
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:05:46.010

尝试这个：

```
emails = new Object();
emails.list = [];
i = 0;

$("input[name^='email']").each(function(){
   if(i < 3) {
    emails.list[i] = $(this).val();
    i++
  }

})

alert(JSON.stringify(emails)); 
```

或者：

```
parameters = new Object();
parameters.emails = new Object()
parameters.emails.list= [];
i = 0;

$("input[name^='email']").each(function(){
   if(i < 3) {
    parameters.emails.list[i] = $(this).val();
    i++
  }

})

alert(JSON.stringify(parameters)); 
```

[http://jsfiddle.net/jgjpD/1/](http://jsfiddle.net/jgjpD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:15:41.230

这是通过扩展 jQuery 并添加[serializeObject方法](https://stackoverflow.com/a/1186309/575527)[来序列化表单的快速](http://jsfiddle.net/292rW/)方法。

```
$(function() {

    //form to object
    $.fn.serializeObject = function() {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
            if (o[this.name] !== undefined) {
                if (!o[this.name].push) {
                    o[this.name] = [o[this.name]];
                }
                o[this.name].push(this.value || '');
            } else {
                o[this.name] = this.value || '';
            }
        });
        return o;
    };

    //test it out
    $('form').on('submit', function() {
        var serialized = $(this).serializeObject();

        console.log(serialized);
        console.log(JSON.stringify(serialized));

        return false;
    });

});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T23:17:58.663

这是一种方法

```
var listval = [];
$("input['name=emails\[\]']").each(function() {
    listval.push($(this).val());
} 
```

# php - mysql/php：显示帖子和每个帖子的所有评论

> ID：10254361
> 
> 赞同：5
> 
> 时间：2012-04-20T22:28:26.697
> 
> 标签：php, mysql, sql, select

我知道这个问题已被多次询问（但是，我仍然找不到解决方案）：

*   [PHP MYSQL 显示带有评论的帖子](https://stackoverflow.com/questions/5059097/php-mysql-showing-posts-with-comments)
*   [mysql 查询 - 有限制的博客文章和评论](https://stackoverflow.com/questions/2954376/mysql-query-blog-posts-and-comments-with-limit)
*   [用于帖子和评论的mysql结构](https://stackoverflow.com/questions/8807896/mysql-structure-for-posts-and-comments) ...

基本问题：有表**posts**、**comments**、**user** ...你能用一个 select 语句选择并显示所有帖子和所有评论（使用 comment.user、comment.text、comment.timestamp）吗？这样的 select 语句会是什么样子？如果没有，最简单的解决方案是什么？

我也尝试`JOIN`使用`comments`table`posts`并使用 table `GROUP BY`，但是我在每一行中只有一条评论，或者每条评论而且这些帖子多次出现！？

我尝试了第一个链接（嵌套 mysql_query 然后获取）以及第二个链接（带有数组）的解决方案。但是，第一个导致了一堆错误（该帖子中的语法似乎不正确，我无法弄清楚如何解决它），第二个我遇到了数组问题。

到目前为止，我的查询看起来像这样：

```
SELECT p.id, p.title, p.text, u.username, c.country_name, (SELECT SUM(vote_type) FROM votes v WHERE v.post_id = p.id) AS sum_vote_type FROM posts p LEFT JOIN user u ON ( p.user_id = u.id ) LEFT JOIN countries c ON ( c.country_id = u.country_id ) ORDER BY $orderby DESC 
```

我想知道这个问题是否不是很常见，有帖子和评论要显示......？

提前感谢您的每一个帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T22:37:27.177

不知道您的数据库结构，它应该看起来像这样。请注意，您应该将`*`字符替换为您实际需要的更明确的列列表。

```
SELECT p.*, c.*, u.* FROM posts p
LEFT JOIN comments c ON c.post_id = p.id
LEFT JOIN users u ON u.id = p.author_id 
```

请注意，如果您只是想获得计数、总和之类的东西，那么缓存其中的一些信息是个好主意。例如，您可能希望将评论计数缓存在 post 表中，而不是在每个查询中计算它们。仅在添加/删除评论时计算和更新评论计数。

**编辑：** 意识到您还想将用户数据附加到每个评论。您可以多次加入同一张表，但它会变得很难看。这可能会变成一个非常昂贵的查询。我还包括一个如何为列命名的示例，这样就不那么混乱了：

```
SELECT p.*, c.*, u.name as post_author, u2.name as comment_author FROM posts p
LEFT JOIN comments c ON c.post_id = p.id
LEFT JOIN users u ON u.id = p.author_id
LEFT JOIN users u2 ON u2.id = c.author_id 
```

# ruby-on-rails-3 - 重构 - 第 11 章，练习 3 Rails 教程第 2 版

> ID：10254365
> 
> 赞同：4
> 
> 时间：2012-04-20T22:28:42.733
> 
> 标签：ruby-on-rails-3, refactoring, railstutorial.org

还有其他人正在完成[Michael Hartl 的 Rails 教程第 2 版的第 11 章练习](http://ruby.railstutorial.org/chapters/following-users?version=3.2#sec%3afollowing_exercises)吗？

第 11 章，练习 3 要求：重构代码清单 11.31，为以下/关注页面、主页和用户显示页面的通用代码添加部分代码。

我在主页、用户展示页面或 show_follow 页面中没有看到任何值得重构的内容

如果有人想出一些对这个练习有价值的东西，很想知道。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T20:27:00.630

你可以重构代码清单 11.31 中的第一块代码：

```
<section>
  <%= gravatar_for @user %>
  <h1><%= @user.name %></h1>
  <span><%= link_to "view my profile", @user %></span>
  <span><b>Microposts:</b> <%= @user.microposts.count %></span>
</section> 
```

因为它本质上与主页上使用的 views\shared_user_info.html.erb 部分相同（清单 10.32）。因此，您可以将上面的代码块替换为：

```
<%= render 'shared/user_info' %> 
```

请注意，您还需要添加`<% @user ||= current_user %>`到 views\shared_user_info.html.erb 部分的顶部（这与在清单 11.20 中添加到 stats 部分所必需的相同）。

此外，feed_item + feed 部分与用户 + micropost 部分之间存在一些重复（尽管不是完全重复），其中根据显示的页面（follow_show、home 或 profile）列出一个或多个元素（姓名、头像、管理员删除链接、微博内容、微博时间戳、微博删除链接）。这些也可能会被重构，以消除 feed_item+feed 部分，并根据页面将它们替换为用户 + micropost 部分的组合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T21:12:24.267

我刚刚完成了这个练习，并找到了一个可行的解决方案。

首先，我更改了 app/views/shared/_user_info.html.erb 以使用 @user 变量（如果已设置），否则使用 current_user 变量。

应用程序/视图/共享/_user_info.html.erb：

```
<% if @user %>
    <%= link_to gravatar_for(@user, size: 52), @user %>
    <h1>
        <%= @user.name %>
    </h1>
    <span>
        <%= link_to "view my profile", @user %>
    </span>
    <span>
        <%= pluralize(@user.microposts.count, "micropost") %>
    </span>
<% else %>
    <%= link_to gravatar_for(current_user, size: 52), current_user %>
    <h1>
        <%= current_user.name %>
    </h1>
    <span>
        <%= link_to "view my profile", current_user %>
    </span>
    <span>
        <%= pluralize(current_user.microposts.count, "micropost") %>
    </span>
<% end %> 
```

然后我将 app/views/users/show_follow.hmtl.erb 中的相应信息替换为部分 _user_info.html.erb

应用程序/视图/用户/show_follow.hmtl.erb：

```
<div class="row">
    <aside class="span4">
        <section>
            <%= render 'shared/user_info' %>
        </section>
        <section>
            <%= render 'shared/stats' %>
            <% if @users.any? %>
                <div class="user_avatars">
                    <% @users.each do |user| %>
                        <%= link_to gravatar_for(user, size: 30), user %>
                    <% end %>
                </div>
            <% end %>
        </section>
    </aside>
    <div class="span8">
        <h3><%= @title %></h3>
        <% if @users.any? %>
            <ul class="users">
                <%= render @users %>
            </ul>
            <%= will_paginate %>
        <% end %>
    </div>
</div> 
```

我希望这个答案可以帮助任何人通过 M. Hartl 的教程。

# python - Python：在 locals() 中查找键的类型

> ID：10254367
> 
> 赞同：3
> 
> 时间：2012-04-20T22:28:50.740
> 
> 标签：python, introspection

`locals()`是一个字典。如果我做一个简单的：

```
for i in locals().keys():
     type(i) 
```

...返回的是名称都是字符串（是的，事实上，它们是）但这些键表示不同的类型 - 例如，一个可能是模块。一些引用类型（对象）以及原始类型（例如 int、string）。

从某种意义上说，我想从字符串中提取名称。研究了如何使用字符串上的属性执行此操作，但没有成功。我相信我需要内省的东西，但是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:37:11.830

`locals().keys()`返回绑定在本地空间中的所有变量名。由于它们是名称，因此它们都是字符串。（在 Python 2.x 中，您也可以使用`locals().iterkeys()`它来获取迭代器。）

试试`locals().values()`吧。对于 Python 2.x，您可以使用`locals().itervalues()`来获取迭代器。

或者`locals().items()`得到`key, value`对。对于 Python 2.x，您可以使用它`locals().iteritems()`来获取迭代器。

# c# - 在可移植类库中生成 SHA1 哈希

> ID：10254369
> 
> 赞同：16
> 
> 时间：2012-04-20T22:28:57.317
> 
> 标签：c#, sha1, portable-class-library

我正在尝试构建一个可移植的类库，该类库生成 OAuth url 供其他类/应用程序使用。这个使用 OAuth 的类库必须是一个可移植的类库，以便它可以与我正在构建的不同版本的 DropBox API 一起使用。

这个类的一部分需要生成一个 SHA1 哈希来生成 oauth_signature。

我知道可移植类库不支持 System.Security.Cryptography，所以无论如何这个类可以在没有该类的情况下生成 SHA1 哈希？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-11-23T10:28:35.740

我认为最简单的方法是使用**PCLCrypto nuget 包**。然后你可以这样做：

```
private static string CalculateSha1Hash(string input)
{
        // step 1, calculate MD5 hash from input
        var hasher = WinRTCrypto.HashAlgorithmProvider.OpenAlgorithm(HashAlgorithm.Sha1);
        byte[] inputBytes = Encoding.UTF8.GetBytes(input);
        byte[] hash = hasher.HashData(inputBytes);

        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < hash.Length; i++)
        {
            sb.Append(hash[i].ToString("X2"));
        }
        return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-14T14:45:29.097

好吧，我最近也需要这个，我发现从 HashLib 实现 SHA1 更容易：http: [//hashlib.codeplex.com/](http://hashlib.codeplex.com/)

Mono 实现具有一些深远的依赖关系（异常的本地化等），而从 HashLib 中，您只需要复制几个文件而不需要对其进行任何更改：

```
Converters.cs
Hash.cs
HashBuffer.cs
HashCryptoNotBuildIn.cs
HashResult.cs
IHash.cs
SHA0.cs
SHA1.cs 
```

总共 55 KB 的代码，所以没什么大不了的。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-01-09T13:43:28.087

我使用了这个 BouncyCastle Nuget 包：[https](https://www.nuget.org/packages/BouncyCastle-PCL/) ://www.nuget.org/packages/BouncyCastle-PCL/ 它对我来说很好用（跨平台**Windows Store App、.Net Framework 4.5、Silverlight 5、Windows Phone 8、 Xamarin.Android，Xamarin.iOS**）

使用 HMACSHA1 生成这样的签名：

```
public string GenerateSignature(string key, string signatureBase)
{
   var keyBytes = Encoding.UTF8.GetBytes(key);
   HMACSHA1 hashAlgorithm = new HMACSHA1(keyBytes);            
   byte[] dataBuffer = Encoding.UTF8.GetBytes(signatureBase);
   byte[] hashBytes = hashAlgorithm.ComputeHash(dataBuffer);
   return Convert.ToBase64String(hashBytes);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-20T23:10:24.337

Mono为它自己提供了一个[SHA1 的托管实现](https://github.com/mono/mono/blob/master/mcs/class/corlib/System.Security.Cryptography/SHA1CryptoServiceProvider.cs)（但它不像@CodeInChaos 建议`mscorlib.dll`的那样位于）。`Mono.Security.dll`

它是开源的，经过很好的测试，并且表现得与 Microsoft 实现完全一样（例如，它派生自`SHA1`, `HashAlgorith`... implements `ICryptoTransform`...），因此它应该是一个简单的替代品。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-20T23:01:06.423

[SHA-1 Wikipedia 文章](http://en.wikipedia.org/wiki/SHA-1#SHA-1_pseudocode)包含伪代码，您可以将其用作您自己实现的指南。但是，与加密函数一样，我强烈建议使用久经考验的实现。

假设您想要一个 SHA-256 实现，您可以在[BouncyCastle](http://www.bouncycastle.org/csharp/)中找到一个，它以源代码形式提供。那里的相关类称为 Org.BouncyCastle.Crypto.Digests.Sha256Digest（这是它的[来源](http://www.bouncycastle.org/viewcvs/viewcvs.cgi/csharp/crypto/src/crypto/digests/Sha256Digest.cs?revision=1.8&view=markup)）。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-04-19T08:33:21.213

您可能想查看新的**.NET Standard**库：

[https://docs.microsoft.com/en-us/dotnet/articles/standard/library](https://docs.microsoft.com/en-us/dotnet/articles/standard/library)

它是便携式的，并且`System.Security.Cryptography`包括在内。

```
 /// <summary>
    /// Compute hash for string encoded as UTF8
    /// </summary>
    /// <param name="input">String to be hashed.</param>
    /// <returns>40-character hex string.</returns>
    public static string GetSha1(string input)
    {
        using (var sha1 = System.Security.Cryptography.SHA1.Create())
        {
            byte[] inputBytes = Encoding.UTF8.GetBytes(input);
            byte[] hash = sha1.ComputeHash(inputBytes);

            StringBuilder sb = new StringBuilder();
            for (int i = 0; i < hash.Length; i++)
            {
                sb.Append(hash[i].ToString("X2"));
            }
            return sb.ToString();
        }
    } 
```

您可能还会在此处获得一些帮助（使用 .NET 标准库创建 PCL 项目）：

[https://xamarinhelp.com/dot-net-standard-pcl-xamarin-forms/](https://xamarinhelp.com/dot-net-standard-pcl-xamarin-forms/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-02T13:50:21.307

这是一个使用[BouncyCastle的示例](https://www.nuget.org/packages/BouncyCastle)

```
 public static string ComputeSha1(string data)
    {
        var sha1Digest = new Org.BouncyCastle.Crypto.Digests.Sha1Digest();
        var hash = new byte[sha1Digest.GetDigestSize()];

        var dataBytes = Encoding.UTF8.GetBytes(data);
        foreach (var b in dataBytes)
        {
            sha1Digest.Update(b);
        }
        sha1Digest.DoFinal(hash, 0);

        return string.Join("", hash.Select(b => b.ToString("x2")).ToArray());
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-14T18:00:23.397

当我必须达到相同的结果时，这对我有用。你也可以`SHA512`和其他人一起这样做。

```
using System.Security.Cryptography;

public static string HashSHA1(this string value)
{
    using (var sha = SHA1.Create())
    {
       return Convert.ToBase64String(sha.ComputeHash(System.Text.Encoding.UTF8.GetBytes(value)));
    }
} 
```

代码引用自：[https ://xamarinhelp.com/cryptography-in-xamarin-forms/](https://xamarinhelp.com/cryptography-in-xamarin-forms/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-11T06:10:49.320

我也想签署 OAuth，并且正在查看 PCL Crypto - 该测试显示了 HmacSha1 哈希的创建，并将结果与​​标准 .NET Framework 方式进行了比较。

```
 [Test]
    public void CreateHash_VersusComputeHash_ReturnsEquivalent()
    {
        // USING TRADITIONAL .NET:
        var key = new byte[32];
        var contentBytes = Encoding.UTF8.GetBytes("some kind of content to hash");
        new RNGCryptoServiceProvider().GetBytes(key);

        var alg = new HMACSHA1(key); // Bouncy castle usage does not differ from this
        var result = alg.ComputeHash(contentBytes);

        // USING PCL CRYPTO:
        var algorithm = WinRTCrypto.MacAlgorithmProvider.OpenAlgorithm(MacAlgorithm.HmacSha1);

        byte[] mac;
        using (var hasher = algorithm.CreateHash(key))
        {
            hasher.Append(contentBytes);
            mac = hasher.GetValueAndReset();
        }

        // Assert results:
        Assert.AreEqual(result.Length, mac.Length);

        for (var i = 0; i < result.Length; i++)
        {
            Assert.AreEqual(result[i], mac[i]);
        }
    } 
```

# c# - XML 数据上的 Linq 组（多个）

> ID：10254373
> 
> 赞同：0
> 
> 时间：2012-04-20T22:29:35.587
> 
> 标签：c#, xml, linq, c#-4.0

我正在尝试将平面 XML 数据分组到分层文件夹中。

下面显示的代码有效。我试图找到以下内容：

1.  如何将 synatx for 更改为内部foreach 语句中的 `Console.WriteLine("\t\t{0}`内容 。`f.Element("FILE_NAME").Value);``f.FileName`
2.  我还能做些什么来提高效率和/或可读性吗？

我目前使用的是 4.0，但不介意了解使这款啤酒更佳的新版本的新功能

谢谢

代码：

```
using System;
using System.Linq;
using System.Xml.Linq;

namespace TestingStuff
{
    class LinqQuestion
    {
        static void Main(string[] args)
        {
            Question();

            #region End Console
            Console.WriteLine();
            Console.WriteLine();
            Console.WriteLine("*".PadRight(30, '*'));
            Console.WriteLine("Done");

#if DEBUG
            {
                Console.WriteLine("Press any key to exit.");
                Console.WriteLine("Where is the any key?  --Homer Simpson");
                Console.ReadKey(true);
            }
#endif
            #endregion
        }

        private static void Question()
        {
            int count = 0;
            XDocument xmlDoc = XDocument.Parse(
                @"<ROWSET>
                    <ROW>
                      <PARENT_DIR>Parent_100</PARENT_DIR>
                      <DIR>Folder_110</DIR>
                      <FILE_NAME>File_111</FILE_NAME>
                    </ROW>
                    <ROW>
                      <PARENT_DIR>Parent_100</PARENT_DIR>
                      <DIR>Folder_110</DIR>
                      <FILE_NAME>File_112</FILE_NAME>
                    </ROW>
                    <ROW>
                      <PARENT_DIR>Parent_200</PARENT_DIR>
                      <DIR>Folder_210</DIR>
                      <FILE_NAME>File_211</FILE_NAME>
                    </ROW>
                    <ROW>
                      <PARENT_DIR>Parent_200</PARENT_DIR>
                      <DIR>Folder_220</DIR>
                      <FILE_NAME>File_221</FILE_NAME>
                    </ROW>
                  </ROWSET>");

            var rows = from d in xmlDoc.Descendants("ROW")
                       group d by new
                       {   
                           ParentDir = d.Element("PARENT_DIR").Value,
                           Dir = d.Element("DIR").Value
                       }
                       ;
            foreach (var myRow in rows)
            {

                /* 
                 * Create Folders
                 * Folder: PARENT_DIR\DIR\FILE_NAME
                 * 
                 */
                try
                {

                    string[] folders = new string[] { myRow.Key.ParentDir, myRow.Key.Dir };
                    string newFolder = String.Join("\\", folders);

                    count++;

                    Console.WriteLine("{0}\t{1}", count, newFolder);

                    foreach (var f in myRow)
                    {
                        Console.WriteLine("\t\t{0}", f.Element("FILE_NAME").Value);
                    }
                }
                catch (Exception ex)
                {
                    Console.WriteLine("Error in Copy Process:");
                    // Specify the XML details for failed file / row
                    Console.WriteLine(ex.Message);
                }

            }
            Console.WriteLine();
            Console.WriteLine("Total Count: {0}", count);
            Console.WriteLine();
            Console.WriteLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:01:30.457

根据 SO 中的另一篇[文章](https://stackoverflow.com/a/7528958/532548)，我设法得到了我需要的东西。

修改的Linq代码：（只写了主要部分）

```
 var expr = from d in xmlDoc.Descendants("ROW")
                        group d by new
                        {
                           ParentDir = d.Element("PARENT_DIR").Value,
                           Dir = d.Element("DIR").Value,

                        } into gDir
                        select new
                        {
                           GroupKey = gDir.Key,
                           Data = from z in gDir
                                  select new { FileName = z.Element("FILE_NAME").Value }

                        };

foreach (var g in expr)
{
   Console.WriteLine("{0}\t\t", g.GroupKey.ParentDir, g.GroupKey.Dir);

   foreach (var n in g.Data)
               Console.WriteLine("\t\t{0}", n.FileName);
} 
```

# .htaccess - .htaccess 重写细节

> ID：10254376
> 
> 赞同：0
> 
> 时间：2012-04-20T22:30:02.787
> 
> 标签：.htaccess, mod-rewrite

目前我有以下代码：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

此代码的作用是允许用户转到 /pagename 而不是 /pagename.php

有没有办法让它只适用于特定页面，因为目前这段代码在整个网站范围内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:36:37.023

在两个 rewriteCond 之后添加一个新的 RewriteCond 并检查请求是否针对特定页面。

RewriteCond %{REQUEST_URI} ^/(myPage)/

[http://httpd.apache.org/docs/2.0/misc/rewriteguide.html](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

您还可以使用 RewriteBase 指令。

示例 [RewriteBase 如何在 .htaccess 中工作](https://stackoverflow.com/questions/704102/how-does-rewritebase-work-in-htaccess)

# python - 您如何为用户定义的对象定义类似字典的值分配？

> ID：10254392
> 
> 赞同：1
> 
> 时间：2012-04-20T22:32:33.670
> 
> 标签：python, class, dictionary

以下代码使用 Tkinter 模块创建了一个简单的 gui。

```
import Tkinter

root = Tkinter.Tk()

myContainer1 = Tkinter.Frame(root)
myContainer1.pack()

button1 = Tkinter.Button(myContainer1) 
button1["text"]= "Hello, World!"  
button1["background"] = "green"     
button1.pack()                 

root.mainloop() 
```

现在看下面的代码：

```
button1["text"]= "Hello, World!" 
```

此语法看起来与将值分配给字典键相同。您如何为用户定义的对象定义这种行为的可能性？您能否举一个例子，例如：

```
class Example(object):
    def __init__(self, length = 1, width= 2):
        self.length = length
        self.width = width 
```

* * *

编辑 1（对 kindall 和 jsbueno 的响应）：我试图通过执行以下操作调用`42`分配的值`e["alpha"]`：

```
print e["alpha"] 
```

在您的代码中，我添加了：

```
def __getitem__(self, key, value):
    if key in self.validkeys:
        getattr(self, key, value)
    else:
        raise KeyError 
```

但我仍然得到“示例”不可下标的 TypeError。

* * *

编辑 2

```
def __getitem__(self, key):
    if key in self.validkeys:
        return getattr(self, key)
    else:
        raise KeyError 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T22:36:08.887

定义`__setitem__()`；看[这里](http://docs.python.org/reference/datamodel.html#object.__setitem__)。也有对应`__getitem__()`的。

举个例子：

```
class Example(object):
    # define which names can be assigned using [...] syntax
    validkeys = set("alpha beta gamma".split())

    # assign valid names as attributes on our object
    def __setitem__(self, key, value):
        if key in self.validkeys:
            setattr(self, key, value)
        else:
            raise KeyError("Key must be one of %s", ", ".join(self.validkeys))

e = Example()
e["alpha"] = 42
print(e.alpha)   # prints 42 
```

Check the full documentation for emulating dictionaries and other built-in types at: [http://docs.python.org/reference/datamodel.html](http://docs.python.org/reference/datamodel.html)

# php - php默认头文件

> ID：10254393
> 
> 赞同：0
> 
> 时间：2012-04-20T22:32:42.767
> 
> 标签：php, header

我应该为普通的 php 页面提供任何特定的标头吗？

我没有重定向用户或类似的东西，我的标记已经有一个`doctype`和`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">`

我还需要从 PHP 开始`header()`吗？它应该有什么具体的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:35:31.080

`header()`用于发送 HTTP 标头。如果您要问，您可能还不需要它，尽管您可以通过以下方式摆脱您`meta`的：

```
header('Content-Type: text/html; charset=utf-8'); 
```

请记住，`header()`指令必须在发送任何内容之前出现，否则您会收到错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:34:47.133

如果您使用 php 来呈现 html，则使用 text/html。

通常，您的网络服务器实际上已经知道这样做，并且没有必要明确设置标头内容类型。至少 apache 是这种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:34:49.847

您不必为 PHP 提供任何服务 :) 假设您以相同的方式输出 PHP，那么您已经设置好了元 UTF8。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T06:43:55.263

为了服务 PHP 页面，我们以这种方式使用 header() 函数

http://www.google.com/"); ?> 但是请记住，在发送标头之前您不能有任何 HTML 输出。您也可以尝试使用其中一种[替代方法。](http://www.techyv.com/questions/calling-functions-using-php#new)

# wcf - 调试 Silverlight WCF RIA 应用程序；“查询'GetTblProjects'的加载操作失败。远程服务器返回错误：NotFound。”

> ID：10254395
> 
> 赞同：0
> 
> 时间：2012-04-20T22:33:06.293
> 
> 标签：wcf, silverlight

目前我正在构建一个 Silverlight WCF RIA 应用程序。进展顺利，客户毫无问题地获得了所需的数据。然后我决定向数据库中添加一个表，更新关联的实体数据模型 EDMX 文件，并重新生成关联的域服务类。现在它仍然可以毫无问题地获取以前获取的所有表，但是当我尝试从新表 tblProject 获取数据时，我收到此错误：

```
Error
Load operation failed for query 'GetTblProjects'.  The remote server returned an error: NotFound.

Error Details
   at System.ServiceModel.DomainServices.Client.OperationBase.Complete(Exception error)
   at System.ServiceModel.DomainServices.Client.LoadOperation.Complete(Exception error)
   at System.ServiceModel.DomainServices.Client.DomainContext.CompleteLoad(IAsyncResult    asyncResult)
   at System.ServiceModel.DomainServices.Client.DomainContext.<>c__DisplayClass1b.<Load>b__17(Object )
Caused by: The remote server returned an error: NotFound.

   at System.ServiceModel.DomainServices.Client.WebDomainClient`1.EndQueryCore(IAsyncResult asyncResult)
   at System.ServiceModel.DomainServices.Client.DomainClient.EndQuery(IAsyncResult asyncResult)
   at System.ServiceModel.DomainServices.Client.DomainContext.CompleteLoad(IAsyncResult asyncResult)
Caused by: The remote server returned an error: NotFound.

   at System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state)
   at System.Net.Browser.BrowserHttpWebRequest.EndGetResponse(IAsyncResult asyncResult)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult result)
Caused by: The remote server returned an error: NotFound.

   at System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult)
   at System.Net.Browser.BrowserHttpWebRequest.<>c__DisplayClassa.<EndGetResponse>b__9(Object sendState)
   at System.Net.Browser.AsyncHelper.<>c__DisplayClass4.<BeginOnUI>b__0(Object sendState) 
```

我花了很多时间查看域服务类，以及 XAML 代码和关联的视图模型类，并且看不到与可以正常工作的 tblBasin 数据库表相关的实现之间的任何差异没有问题，新的 tblProject 表给了我错误。当我打开 WCF 跟踪时，这是我为 tblBasin 得到的：

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
  <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
    <EventID>458758</EventID>
    <Type>3</Type>
    <SubType Name="Information">0</SubType>
    <Level>8</Level>
    <TimeCreated SystemTime="2012-04-20T21:54:03.3280726Z" />
    <Source Name="System.ServiceModel" />
    <Correlation ActivityID="{169c9eeb-338f-4ea5-a93a-34f234113283}" />
    <Execution ProcessName="WebDev.WebServer40" ProcessID="5276" ThreadID="14" />
    <Channel/>
    <Computer>WKSTCAL0123</Computer>
  </System>
  <ApplicationData>
    <TraceData>
      <DataItem>
        <TraceRecord     xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord"     Severity="Information">
          <TraceIdentifier>http://msdn.microsoft.com/en-CA/library/System.ServiceModel.Security.SecurityImpersonationSuccess.aspx</TraceIdentifier>
          <Description>Security Impersonation succeeded at the server.</Description>
          <AppDomain>f8f8d82-2-129794323085920534</AppDomain>
          <ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/SecurityImpersonationTraceRecord">
            <OperationAction>http://tempuri.org/ProjectSetDomainServicebinary/GetTblBasins</OperationAction>
            <OperationName>GetTblBasins</OperationName>
          </ExtendedData>
        </TraceRecord>
      </DataItem>
    </TraceData>
  </ApplicationData>
</E2ETraceEvent> 
```

这是我为失败的 tblProject 表数据得到的结果：

```
<E2ETraceEvent xmlns="http://schemas.microsoft.com/2004/06/E2ETraceEvent">
  <System xmlns="http://schemas.microsoft.com/2004/06/windows/eventlog/system">
    <EventID>262163</EventID>
    <Type>3</Type>
    <SubType Name="Information">0</SubType>
    <Level>8</Level>
    <TimeCreated SystemTime="2012-04-20T21:54:03.3270721Z" />
    <Source Name="System.ServiceModel" />
    <Correlation ActivityID="{30c0de8a-fd38-4ca6-8c8a-b88f27a783bf}" />
    <Execution ProcessName="WebDev.WebServer40" ProcessID="5276" ThreadID="12" />
    <Channel/>
    <Computer>WKSTCAL0123</Computer>
  </System>
  <ApplicationData>
    <TraceData>
      <DataItem>
        <TraceRecord  xmlns="http://schemas.microsoft.com/2004/10/E2ETraceEvent/TraceRecord" Severity="Information">
          <TraceIdentifier>http://msdn.microsoft.com/en- CA/library/System.ServiceModel.Channels.MessageReceived.aspx</TraceIdentifier>
          <Description>Received a message over a channel.</Description>
          <AppDomain>f8f8d82-2-129794323085920534</AppDomain>
          <Source>System.ServiceModel.Activation.HostedHttpContext+HostedHttpInput/61784148</Source>
          <ExtendedData xmlns="http://schemas.microsoft.com/2006/08/ServiceModel/MessageTransmitTraceRecord">
           <MessageProperties>
              <AllowOutputBatching>False</AllowOutputBatching>
              <Via>http://localhost:57671/Services/ZEGApps-Web-Services-ProjectSetDomainService.svc/binary/GetTblProjects</Via>
            </MessageProperties>
            <MessageHeaders>
              <To d4p1:mustUnderstand="1" xmlns:d4p1="http://schemas.microsoft.com/ws/2005/05/envelope/none"  xmlns="http://schemas.microsoft.com/ws/2005/05/addressing/none">http://localhost:57671/Serv ices/ZEGApps-Web-Services-ProjectSetDomainService.svc/binary/GetTblProjects</To>
            </MessageHeaders>
          </ExtendedData>
        </TraceRecord>
      </DataItem>
   </TraceData>
  </ApplicationData>
</E2ETraceEvent> 
```

有人对如何解决此问题有任何建议吗？TIA。

更新：除了从我创建的新 tblProject 数据库表中获取数据的调用之外，所有服务调用都成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:21:12.423

我知道这听起来很基本，但是您的问题没有提及此信息，而且问题听起来很像这可能是您的答案：

您是否更新了服务器上相应的可执行文件？如果您仅使用新表的知识更新客户端代码，则服务器会以这种方式运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:15:19.160

非常感谢您的回复，约翰！

目前，该应用程序处于相当早期的开发阶段，因此我实际上正在使用 Visual Studio Cassini Web 服务器对其进行测试。客户端和服务器项目都在同一个解决方案中。所以当我重建应用程序时，它应该重建相关的 XAP 文件，不是吗？这就是文件的时间戳所指示的内容。顺便说一句，SQL Server 数据库在单独的数据库服务器上运行。

此外，当我打开并检查 EDMX 文件时，它会按预期显示 tblProject 表。

如果还有其他我可能遗漏的内容或您有任何其他建议，我们非常欢迎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T14:00:24.393

（不知道这是否仍然是一个悬而未决的问题......）您是否尝试过使用 Fiddler 并进行远程呼叫？有时在服务器上发生错误，并向客户端返回错误页面。在 RIA 服务处理调用时，您只会收到一般错误消息。

如果您的开发服务器在本地主机上，请记住使用“本地主机”。（重点）让 Fiddler 拦截呼叫。

# c++ - 如果数据已经被发送，为什么选择只显示文件描述符为就绪？

> ID：10254397
> 
> 赞同：0
> 
> 时间：2012-04-20T22:33:14.793
> 
> 标签：c++, c, linux, network-programming, synchronous

我在线程中使用 select() 来监视数据报套接字，但除非在线程启动之前将数据发送到套接字，否则 select() 将继续返回 0。

我混合了一点 C 和 C++；这是启动线程的方法：

```
bool RelayStart() {
    sock_recv = socket(AF_INET, SOCK_DGRAM, 0);
    memset(&addr_recv, 0, sizeof(addr_recv));
    addr_recv.sin_family = AF_INET;
    addr_recv.sin_port = htons(18902);
    addr_recv.sin_addr.s_addr = htonl(INADDR_ANY);
    bind(sock_recv, (struct sockaddr*) &addr_recv, sizeof(addr_recv));

    isRelayingPackets = true;

    NSS::Thread::start(VIDEO_SEND_THREAD_ID);

    return true;
} 
```

停止线程的方法：

```
bool RelayStop() {
    isSendingVideo = false;
    NSS::Thread::stop();
    close(sock_recv);
    return true;
} 
```

该方法在线程中运行：

```
void Run() {

    fd_set read_fds;
    int select_return;
    struct timeval select_timeout;

    FD_ZERO(&read_fds);
    FD_SET(sock_recv, &read_fds);

    while (isRelayingPackets) {

        select_timeout.tv_sec = 1;
        select_timeout.tv_usec = 0;

        select_return = select(sock_recv + 1, &read_fds, NULL, NULL, &select_timeout);
        if (select_return > 0 && FD_ISSET(sock_recv, &read_fds)) {
            // ...
        }
    }
} 
```

问题是，如果在调用 RelayStart() 之前没有进程已经将 UDP 数据包发送到端口 18902，则 select() 将始终返回 0。因此，例如，我无法在不重新启动线程的情况下重新启动发送方（以正确的顺序。）

只要首先启动发件人，一切似乎都可以正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T07:44:22.060

`Run`线程只构造一次`read_fds`。

`select`调用更新以清除所有未准备好数据的描述符的`read_fds`所有位，并为之前设置且已准备好数据的描述符设置所有位。

因此，如果没有描述符准备好任何数据并且`select`调用超时（并返回 0），`read_fds`则现在清除所有位。传递相同全零位掩码的进一步调用将不扫描文件描述符。

您可以在循环内的每次行程中重新构建读取集：

```
while (isRelayingPackets) {
    FD_ZERO(&read_fds);
    FD_SET(sock_recv, &read_fds);
    ...
} 
```

或使用带有位集副本的辅助变量：

```
while (isRelayingPackets) {
    fd_set select_arg = read_fds;
    ... same as before but use &select_arg ...
} 
```

（或者，当然，有些非`select`接口在某些方面更容易使用。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:38:37.820

你期望它的表现如何？的要点`select()`是休眠到超时，直到有数据可供读取；在这种情况下，它将在 1 秒后超时并返回 0。也许您实际上并不希望在流开始之前超时？

# javascript - 取消绑定匿名函数

> ID：10254402
> 
> 赞同：5
> 
> 时间：2012-04-20T22:34:05.643
> 
> 标签：javascript, jquery, javascript-events

有人可以告诉如何“取消绑定”匿名函数吗？JQUERY 可以做到这一点，但是我如何在我自己的脚本中实现这个功能。

这是场景：

以下代码将“onclick”事件附加到以“someDivId”为 ID 的 Div，现在当您单击 DIV 时，它会显示“已单击！”。

```
var a  = document.getElementById('someDivId');
bindEvent(a,'click',function(){alert('clicked!');}); 
```

太好了，问题是如果函数是匿名的，如何将函数“取消附加”到 DIV，或者如何将所有附加事件“取消附加”到“a”元素？

```
unBind(a,'click'); //Not necessarily the given params, it's just an example. 
```

这是 bindEvent 方法的代码：

```
function bindEvent (el,evtType,fn){
    if ( el.attachEvent ) {
        el['e'+evtType+fn] = fn;
        el[evtType+fn] = function(){
            fn.call(el,window.event);
        }
        el.attachEvent( 'on'+evtType, el[evtType+fn] );
    } else {
        el.addEventListener( evtType, fn, false );
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:50:29.263

最后，经过数小时的测试和错误，我找到了一个解决方案，也许它不是最好的或最有效的，但是......它有效！（在 IE9、Firefox 12、Chrome 18 上测试）

首先，我创建了两个跨浏览器和辅助 addEvent() 和 removeEvent() 方法。（想法取自 Jquery 的源代码！）

```
HELPERS.removeEvent = document.removeEventListener ?
function( type, handle,el ) {
    if ( el.removeEventListener ) {
    //W3C Standard    
    el.removeEventListener( type, handle, true );
    }
} : 
function( type, handle,el ) {
    if ( el.detachEvent ) {
        //The IE way
        el.detachEvent( 'on'+type, el[type+handle] );
        el[type+handle] = null;
    }
};

HELPERS.addEvent = document.addEventListener ?
function( type, handle,el ) {
    if ( el.addEventListener ) {
        //W3C Standard
        el.addEventListener( type, handle, true );
    }
} : 
function( type, handle,el ) {
    if ( el.attachEvent ) {
        //The IE way
        el['e'+type+handle] = handle;
        el[type+handle] = function(){
            handle.call(el,window.event);
        };
        el.attachEvent( 'on'+type, el[type+handle] );

    }
} 
```

我们还需要某种“容器”来将附加的事件存储到元素中，如下所示：

```
HELPERS.EVTS = {}; 
```

最后是两个可调用并向用户公开的方法：下一个添加事件（事件）并将此事件与特定元素（el）的方法（处理程序）相关联。

```
 function bindEvent(event, handler,el) {

            if(!(el in HELPERS.EVT)) {
                // HELPERS.EVT stores references to nodes
                HELPERS.EVT[el] = {};
            }

            if(!(event in HELPERS.EVT[el])) {
                // each entry contains another entry for each event type
                HELPERS.EVT[el][event] = [];
            }
            // capture reference
            HELPERS.EVT[el][event].push([handler, true]);
            //Finally call the aux. Method
            HELPERS.addEvent(event,handler,el);

         return;

    } 
```

最后，取消附加特定元素（el）的每个预附加事件（事件）的方法

```
 function removeAllEvent(event,el) {

            if(el in HELPERS.EVT) {
                var handlers = HELPERS.EVT[el];
                if(event in handlers) {
                    var eventHandlers = handlers[event];
                    for(var i = eventHandlers.length; i--;) {
                        var handler = eventHandlers[i];
                        HELPERS.removeEvent(event,handler[0],el);

                    }
                }
            }   

    return;

    } 
```

顺便说一句，要调用此方法，您必须执行以下操作： 捕获 DOM 节点

```
 var a = document.getElementById('some_id'); 
```

使用相应的参数调用方法“bindEvent()”。

```
 bindEvent('click',function(){alert('say hi');},a); 
```

并卸下它：

```
 removeAllEvent('click',a); 
```

就是这样，希望有一天对某人有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T22:40:26.477

就个人而言（我知道这不是“最好的”方式，因为它确实需要我思考我在做什么），我喜欢只使用`on*`我正在使用的元素的事件属性。

这具有能够快速轻松地分离事件的便利优势。

```
var a = document.getElementById('someDivId');
a.onclick = function() {alert("Clicked!");};
// later...
a.onclick = null; 
```

但是，您必须小心这一点，因为如果您尝试添加第二个事件处理程序，它将覆盖第一个。记住这一点，你应该一切都好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:59:05.287

我不确定您是否可以取消绑定通过 javascript 附加的匿名函数。如果可能，您可以简单地从 DOM 中删除元素并重新创建它。这将摆脱以前附加的任何事件处理程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T23:34:58.867

JavaScript 不提供附加到节点的事件侦听器列表。

您可以删除节点的所有事件侦听器，但使用该`Node.cloneNode`方法，请参见此处：[https ://developer.mozilla.org/En/DOM/Node.cloneNode](https://developer.mozilla.org/En/DOM/Node.cloneNode)

这会克隆节点（显然），但不会克隆附加到它的事件侦听器。

您也可以将空函数绑定为事件侦听器：

```
function noop() {}
bindEvent(myElement, "click", noop); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-20T22:52:34.103

这是来自 jquery 的[来源](https://github.com/jquery/jquery/blob/master/src/event.js)：

```
jQuery.removeEvent = document.removeEventListener ?
    function( elem, type, handle ) {
        if ( elem.removeEventListener ) {
            elem.removeEventListener( type, handle, false );
        }
    } :
    function( elem, type, handle ) {
        if ( elem.detachEvent ) {
            elem.detachEvent( "on" + type, handle );
        }
    }; 
```

# android - PendingIntent 未启动应用程序

> ID：10254407
> 
> 赞同：2
> 
> 时间：2012-04-20T22:34:28.457
> 
> 标签：android, android-intent, android-pendingintent

我有一个正在运行的服务，它将在特定事件的通知栏上发出通知。在那个通知中，我设置了一个 PendingIntent 来启动另一个应用程序。出于某种原因，当我对通知采取行动时，它不会启动其他应用程序。这是我创建 PendingIntent 的代码。

```
private PendingIntent externalAppStartIntent(LaunchInfo launchInfo) {
    Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setClassName(launchInfo.getPackageName(), launchInfo.getActivityName());
    intent.setData(launchInfo.toUri());
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    return PendingIntent.getActivity(this, ZONE_SERVICE_START_EXTERNAL_APP, intent,
            PendingIntent.FLAG_CANCEL_CURRENT);
} 
```

我可以像这样在我的代码中的其他地方使用常规 Intent 启动应用程序。

```
 Intent intent = new Intent(Intent.ACTION_VIEW);
    intent.setClassName(packageName, activityName);
    intent.setData(data);
    try {
        startActivity(intent);
    } catch (ActivityNotFoundException e) {
        ZoneUtils.launchMarketDialog(getActivity(), packageName);
    } 
```

我已经检查以确保我在两种情况下发送的变量的值是相同的。

请注意，我正在尝试在此代码所在的应用程序之外的另一个应用程序中启动 Activity。

编辑：这是来自其他应用程序清单的活动定义。

```
 <activity
        android:name=".ui.GalleryActivity"
        android:configChanges="orientation">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

            <data
                android:host="join"
                android:path="/"
                android:scheme="mgp" />
        </intent-filter>
    </activity> 
```

EDIT2：这是我对通知采取行动时得到的日志

```
04-20 19:05:59.151: I/ActivityManager(193): START {act=android.intent.action.VIEW cmp=com.brockoli.magnet.photoapp/.ui.GalleryFragment bnds=[128,418][720,546]} from pid -1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:23:24.160

大卫·苏皮格发现了它！

我不小心传递了我的 GalleryFragment 而不是我的 GalleryActivity。现在工作很棒！泰

# oop - 从哈希初始化 CoffeeScript 类实例

> ID：10254422
> 
> 赞同：2
> 
> 时间：2012-04-20T22:36:49.923
> 
> 标签：oop, coffeescript

我认为这可能是内置的，但似乎不是。从属性哈希填充新类实例的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T23:44:46.833

它确实是内置的。您可以将 @ 符号放在哈希内变量的前面：

```
class Cat
  constructor: ({@name, @age}) ->

myCat = new Cat {name:'kitty', age:3} 
```

这是“解构分配”的一部分，您可以[在 coffescript 网站](http://jashkenas.github.com/coffee-script/)上阅读。它甚至适用于嵌套对象、数组甚至 splats。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T23:41:35.743

你可以这样做：

```
class Foo
  constructor: (params = {}) ->
    for key, value of params
      this[key] = value

f = new Foo(var1: "foo", var2: "bar")
console.log(f) 
```

# ruby - Ruby (Savon) 持久 SSL 会话？

> ID：10254424
> 
> 赞同：0
> 
> 时间：2012-04-20T22:37:16.920
> 
> 标签：ruby, ssl, savon

我正在开发一个应用程序，它使用 Savon 在多个线程中连接到 SSL 安全 SOAP 服务。

要求之一是使用持久 SSL 连接。

“谷歌搜索”没有给出任何有意义的结果.. 除了关于 net-http-persistent gem 的通知。

但是 HTTPI 还不支持它。

我认为默认情况下，遏制应该处理......但它没有（根据一些测试后发送给我的 ssl_engine 日志）。

Net::HTTP 似乎也在每个请求上创建新的 ssl 握手。

有一些现有的解决方案吗？或者我应该为 httpi 编写 net-http-persistent 适配器以将其与 savon 一起使用？问题是我不知道它是否会起作用，而且似乎没有人遇到这个问题。

或者...我应该使用 stunnel（用于持久连接）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-11T13:46:41.067

savon >= 2.3.0 适用于 httpi (2.1.0)，它有一个用于 net-http-persistent 的适配器。然后

```
require 'net/http/persistent'
HTTPI.adapter = :net_http_persistent 
```

应该做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T23:26:18.867

我使用了 net-http-persistent 并为它编写了我的 httpi 适配器。

# ruby-on-rails - 为什么 Resque 将列数增加 4-5 而不是 10？

> ID：10254428
> 
> 赞同：2
> 
> 时间：2012-04-20T22:37:51.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, resque

`Foobar.find(1).votes_count`返回 0。

在 Rails 控制台中，我正在做：

```
10.times { Resque.enqueue(AddCountToFoobar, 1) } 
```

我的resque工人：

```
class AddCountToFoobar
  @queue = :low

  def self.perform(id)
    foobar = Foobar.find(id)
    foobar.update_attributes(:count => foobar.votes_count +1)
  end
end 
```

我希望`Foobar.find(1).votes_count`是`10`，但它返回 4。如果我`10.times { Resque.enqueue(AddCountToFoobar, 1) }`再次运行，它会返回相同的行为。它只增加`votes_count`4，有时增加 5。

谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T03:18:01.773

这是一个经典的竞争条件场景。想象一下，只有 2 个工人存在，并且他们每个人都在运行你的一项增加投票的工作。想象以下序列。

1.  Worker1：加载 foobar（投票数 == 1）
2.  Worker2：加载 foobar（投票数 == 1，在单独的 ruby​​ 对象中）
3.  工人 1：增加投票计数（现在 == 2）并保存
4.  工人 2：增加 foobar 的副本（现在投票数 == 2）并保存，覆盖工人 1 所做的

尽管 2 个工作人员每人运行 1 个更新作业，但计数仅增加了 1，因为他们都在自己的 foobar 副本上进行操作，而没有意识到其他工作人员正在做的更改

要解决这个问题，您可以进行就地样式更新，即

```
UPDATE foos SET count = count + 1 
```

或使用两种锁定活动记录支持形式之一（悲观锁定和乐观锁定）

前者有效，因为数据库确保您不会同时对同一行进行并发更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:44:28.477

看起来 ActiveRecord 在 Resque（或者更确切地说是 redis，我猜）中不是线程安全的。[这是一个很好的解释](http://www.rubyrobot.org/article/a-multithreaded-job-queue-for-ruby-on-rails)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-21T04:26:56.080

正如弗雷德里克所说，您正在观察竞争条件。从读取值并更新它开始，您需要序列化对关键部分的访问。

我会尝试使用悲观锁定： [http :](http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html) [//api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html http://api.rubyonrails.org/classes/ActiveRecord/Locking/Pessimistic.html](http://api.rubyonrails.org/classes/ActiveRecord/Transactions/ClassMethods.html)

```
foobar = Foobar.find(id)
foobar.with_lock do
  foobar.update_attributes(:count => foobar.votes_count +1)
end 
```

# c - C中的按位运算

> ID：10254433
> 
> 赞同：0
> 
> 时间：2012-04-20T22:38:32.783
> 
> 标签：c, bit-manipulation

我是按位运算的新手。我有 AND、OR、XOR 和 2s 补码的基本概念。但是我遇到了以下代码，无法弄清楚输出。

```
char c1 = 0xFF; // -1
int shifted = c1 << 8; //-256 (-1 * 256)
printf("%d, %x\n", shifted, shifted);

int myInt;
myInt = 0xFFFFFFE2;
printf("%d\n", myInt);

int i = 0xff;
printf("%d\n", i<<2); 
```

输出是：

> -256, ffffff00
> -30
> 1020

请帮助我了解这里发生了什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:47:47.453

```
char c1 = 0xFF; // -1
int shifted = c1 << 8; //-256 (-1 * 256) 
```

`c1`被提升为`int`移位，所以它仍然是 -1，移位负`int`s 是实现定义的，但您的实现似乎做的最像大多数并将它移位，就好像它是一个`unsigned`位模式，所以左移八个位置是乘以 256。

```
printf( "%d, %x\n", shifted, shifted );
  -256, ffffff00 
```

正如预期的那样。二进制补码中的 -256 的位模式是`0xFFFFFF00`(32-bit `int`s)。

```
int myInt;
myInt = 0xFFFFFFE2; 
```

该位模式在二进制补码中为 -30

```
printf("%d\n",myInt);

int i = 0xff ; 
```

这是 255, 255*4 = 1020

```
printf("%d\n", i<<2);

  -30
  1020 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:52:01.843

用声明的位数以二进制形式记下 c1、myInt 和 i。

将操作应用于它们。

跟着它走。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T23:06:39.107

好的，让我详细解释一下发生了什么。任何需要澄清的二进制符号都将以 0b 和左侧的最高有效位为前缀。

```
char c1 = 0xFF; // -1 
```

char c1 是八位有符号整数类型，设置为`0b11111111` 对于int、short、char等有符号类型，最左边的位作为符号位。在[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)（存储有符号类型的最常见标准）中，任何所有位设置的有符号整数都等于 -1。

```
int shifted = c1 << 8; //-256 (-1 * 256) 
```

c1 在移位之前被隐式转换为有符号整数，因此我们有一个 -1 的 int，即`0xffffffff`. C 中的移位运算符是非旋转移位，即任何从值“移出”的位都将设置为零。移位后我们有`0xffffff00`，等于二进制补码中的 -256。

```
printf( "%d, %x\n", shifted, shifted );

int myInt;
myInt = 0xFFFFFFE2;
printf("%d\n",myInt); 
```

您正在读取根据二进制补码打印的有符号整数。

```
int i = 0xff ;
printf("%d\n", i<<2); 
```

初始 i 等价于`0b11111111`，符号位未设置。移位后我们有`0b1111111100`，等于 1020，同样是因为非旋转移位。希望能澄清一点。如果你想做位移和 AND/OR 逻辑，你通常应该使用前面提到的**无符号类型。**

# sql - 在 SELECT DISTINCT 中消除 NULL 的最简单方法是什么？

> ID：10254435
> 
> 赞同：27
> 
> 时间：2012-04-20T22:38:48.987
> 
> 标签：sql, sql-server

我正在处理一个与以下内容非常相似的查询：

```
CREATE TABLE #test (a char(1), b char(1))

INSERT INTO #test(a,b) VALUES 
('A',NULL),
('A','B'),
('B',NULL),
('B',NULL)

SELECT DISTINCT a,b FROM #test

DROP TABLE #test 
```

结果，不出所料，

```
a   b
-------
A   NULL
A   B
B   NULL 
```

我实际上希望看到的输出是：

```
a   b
-------
A   B
B   NULL 
```

也就是说，如果一列在某些记录中具有值但在其他记录中没有值，我想为该列丢弃带有 NULL 的行。但是，如果一列的所有记录都具有 NULL 值，我想保留该 NULL。

在单个查询中执行此操作的最简单/最优雅的方法是什么？

我有一种感觉，如果我在星期五下午没有筋疲力尽，这将很简单。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-20T22:59:21.757

试试这个：

```
select distinct * from test
where b is not null or a in (
  select a from test
  group by a
  having max(b) is null) 
```

你可以在[这里](http://sqlfiddle.com/#!3/96155/1)得到小提琴。

请注意，如果 中只能有一个非空值`b`，则可以简化为：

```
select a, max(b) from test
group by a 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-09T12:29:12.400

```
;WITH CTE
    AS
    (
    SELECT DISTINCT * FROM #test
    )
    SELECT a,b
    FROM CTE        
    ORDER BY CASE WHEN b IS NULL THEN 9999 ELSE b END ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T02:48:43.017

Try this:

```
create table test(
x char(1),
y char(1)
);

insert into test(x,y) values
('a',null),
('a','b'),
('b', null),
('b', null) 
```

Query:

```
with has_all_y_null as
(
    select x
    from test
    group by x
    having sum(case when y is null then 1 end) = count(x)
)
select distinct x,y from test
where 

    (
        -- if a column has a value in some records but not in others,
        x not in (select x from has_all_y_null) 

        -- I want to throw out the row with NULL
        and y is not null 
    )
    or 
    -- However, if a column has a NULL value for all records, 
    -- I want to preserve that NULL
    (x in (select x from has_all_y_null))

order by x,y 
```

Output:

```
 X    Y
 A    B
 B    NULL 
```

Live test: [http://sqlfiddle.com/#!3/259d6/16](http://sqlfiddle.com/#!3/259d6/16)

**EDIT**

Seeing [Mosty's answer](https://stackoverflow.com/a/10254603/11432), I simplified my code:

```
with has_all_y_null as
(
    select x
    from test
    group by x

    -- having sum(case when y is null then 1 end) = count(x) 
    -- should have thought of this instead of the code above. Mosty's logic is good:
    having max(y) is null
)
select distinct x,y from test
where 
    y is not null
    or 
    (x in (select x from has_all_y_null))
order by x,y 
```

I just prefer CTE approach, it has a more self-documenting logic :-)

You can also put documentation on non-CTE approach, if you are conscious of doing so:

```
select distinct * from test
where b is not null or a in 
  ( -- has all b null
  select a from test
  group by a
  having max(b) is null) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T22:43:10.363

```
SELECT DISTINCT t.a, t.b
FROM   #test t
WHERE  b IS NOT NULL
OR     NOT EXISTS (SELECT 1 FROM #test u WHERE t.a = u.a AND u.b IS NOT NULL)
ORDER BY t.a, t.b 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T22:58:47.003

这是一个非常奇怪的要求。我想知道你怎么需要它。

```
SELECT DISTINCT a, b
FROM   test t
WHERE  NOT ( b IS  NULL
          AND EXISTS 
              ( SELECT * 
                FROM test ta 
                WHERE ta.a = t.a 
                  AND ta.b IS NOT NULL
               ) 
             )
  AND  NOT ( a IS  NULL
          AND EXISTS 
              ( SELECT * 
                FROM test tb 
                WHERE tb.b = t.b 
                  AND tb.a IS NOT NULL
               ) 
             ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-21T02:06:31.093

Well, I don't particularly like this solution, but it seems the most appropriate to me. Note that your description of what you want sounds exactly like what you get with a LEFT JOIN, so:

```
SELECT DISTINCT a.a, b.b
FROM #test a
    LEFT JOIN #test b ON a.a = b.a
        AND b.b IS NOT NULL 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-21T03:54:07.040

```
SELECT a,b FROM #test t where b is not null
union
SELECT a,b FROM #test t where b is null
and not exists(select 1 from #test where a=t.a and b is not null) 
```

Result:

```
a    b
---- ----
A    B
B    NULL 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-01T18:37:34.217

I'll just put here a mix of two answers that solved my issue, because my View was more complex

```
 --IdCompe int,
    --Nome varchar(30),
    --IdVanBanco int,
    --IdVan int
    --FlagAtivo bit,
    --FlagPrincipal bit

    select IdCompe
           , Nome
           , max(IdVanBanco)
           , max(IdVan)
           , CAST(MAX(CAST(FlagAtivo as INT)) AS BIT) FlagAtivo
           , CAST(MAX(CAST(FlagPrincipal as INT)) AS BIT) FlagPrincipal
    from VwVanBanco
           where IdVan = {IdVan} or IdVan is null
           group by IdCompe, Nome order by IdCompe asc 
```

Thanks to [mosty mostacho](https://stackoverflow.com/users/268273/mosty-mostacho) and [kenwarner](https://stackoverflow.com/users/55948/kenwarner)

# ios - 找到设备令牌 Xcode？对于推送通知

> ID：10254436
> 
> 赞同：0
> 
> 时间：2012-04-20T22:39:00.050
> 
> 标签：ios, xcode, device, token, apple-push-notifications

我正在尝试查找设备令牌，以便我可以发送推送通知，但这不会向我的 NSLog 发送任何内容。

```
(void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken
{
      NSLog(@"My token is: %@", deviceToken);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:54:07.327

是否已使用以下命令启用通知？

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
(UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound | UIRemoteNotificationTypeAlert)]; 
```

# javascript - 如何在 CSS3/Javascript 中创建“突出显示”效果？

> ID：10254441
> 
> 赞同：3
> 
> 时间：2012-04-20T22:39:41.917
> 
> 标签：javascript, jquery, css, jquery-effects

我有一段文本，单击时会通过更改其背景颜色来突出显示。我想为突出显示设置动画，以便背景颜色从左到右逐渐变化，就好像有人实际上在突出显示文本一样。关于如何使用 CSS3 和/或 Javascript/jQuery 实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T23:08:21.123

如果您对一些仅限 CSS3 的功能没问题，您可以使用过渡、渐变和`background-size`：

```
.highlightable {
    background-size: 0 100%;
    background-repeat: no-repeat;
    -webkit-transition: background-size 0.5s ease-out;
    -moz-transition: background-size 0.5s ease-out;
    -ms-transition: background-size 0.5s ease-out;
    -o-transition: background-size 0.5s ease-out;
    transition: background-size 0.5s ease-out;
}

.highlightable.highlight {
    background-image: -webkit-linear-gradient(yellow, yellow);
    background-image: -moz-linear-gradient(yellow, yellow);
    background-image: -ms-linear-gradient(yellow, yellow);
    background-image: -o-linear-gradient(yellow, yellow);
    background-image: linear-gradient(yellow, yellow);
    background-size: 100% 100%;
}​ 
```

[这是一个演示。](http://jsfiddle.net/minitech/KhHaQ/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:55:28.247

许多 JavaScript 库使这变得非常容易，例如我最喜欢的：[YUI](http://yuilibrary.com/yui/docs/anim/colors.html)

否则，如果没有库，我将设置一个具有十六进制中间颜色值的数组，您希望您的背景在每个时间片上都有；并使用`setTimeout()`快速连续多次改变背景颜色的方法；例如

```
setTimeout("document.getElementById('mySpan').style.backgroundColor = myColors[i]; i++;", 50); 
```

# css - 让 Div 在窄浏览器中并排对齐

> ID：10254442
> 
> 赞同：0
> 
> 时间：2012-04-20T22:39:53.893
> 
> 标签：css, html

[http://jsfiddle.net/ZGhEe/](http://jsfiddle.net/ZGhEe/)

我已经阅读了几个教程，他们都说使用浮动或使用相对定位，但我尝试的所有技术都没有给我预期的结果。这是一件非常简单的事情，但我想以“正确”的方式来做，因为使用 html 表格会被处以死刑。有什么帮助吗？

如果我使用 float left 它会在浏览器变窄时不必要地堆叠..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:46:25.733

当使用浮动并且您希望它并排显示时，您需要设置宽度并确保宽度的总和小于容器的宽度，[如下所示](http://jsfiddle.net/wks5b/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:58:34.507

如果你想让你的浏览器适合所有的浏览器。让您的浏览器流畅。

即在定义布局宽度时给出 %。

# iis - 使用 Coypu 和 SpecFlow 运行 IIS 服务器

> ID：10254443
> 
> 赞同：4
> 
> 时间：2012-04-20T22:39:56.727
> 
> 标签：iis, testing, integration-testing, specflow

我已经花了很多时间在谷歌上搜索一些解决方案，但我很无助！

我有一个 MVC 应用程序，我正在尝试使用 Coypu 和 SpecFlow 对我的视图进行“集成测试”。但我不知道我应该如何管理 IIS 服务器。有没有办法实际运行服务器（第一次开始测试）并使服务器使用特殊的“测试”数据库（例如内存中的 RavenDB）在每个场景之后清空（并在后台填充）。

有没有更好或更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-06T13:13:23.877

由于您已经在使用 SpecFlow，请查看 SpecRun ( [http://www.specrun.com/](http://www.specrun.com/) )。

它是一个测试运行程序，专为 SpecFlow 测试而设计，并添加了各种功能，从小的便利性（例如在测试资源管理器中更好地格式化测试名称）到支持针对多个目标和配置文件转换运行相同的 SpecFlow 测试。

使用 SpecRun，您可以定义一个“配置文件”，用于运行您的测试，与 VS .runsettings 文件没有什么不同。在那里你可以指定：

```
<DeploymentTransformation>
  <Steps>
      <IISExpress webAppFolder="..\..\MyProject.Web" port="5555"/>
  </Steps>
</DeploymentTransformation> 
```

然后 SpecRun 将在运行测试之前启动一个运行该网站的 IISExpress 实例。在同一个地方，您还可以设置自定义部署转换（使用标准 App.Config 转换）来覆盖应用程序 Web.config 中的连接字符串，使其指向内存数据库。

我对 SpecRun 的唯一问题是文档不是很好，有很多视频演示，但我更希望有一些书面教程。我想这就是 StackOverflow 的用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T10:26:26.947

我对此也很陌生，所以用少许盐来回答，但因为没有其他人回答......

> 有没有办法实际运行服务器（第一次开始测试）......

您可以使用 IIS Express，它可以通过命令行调用。您可以在任何测试运行之前启动您的网站（我相信您可以使用`[BeforeTestRun]`SpecFlow 中的属性执行此操作），方法是通过`System.Diagnostics.Process`.

实际的命令行将类似于例如

```
iisexpress.exe /path:c:\iisexpress\<your-site-published-to-filepath> /port:<anyport> /clr:v2.0 
```

> ...并让服务器使用一个特殊的“测试”数据库（例如内存中的 RavenDB），在每个场景之后清空（并在后台填充）。

为了使用特殊的测试数据库，我想这取决于您的数据访问是如何工作的。如果您可以相当轻松地交换内存数据库，那么我想您可以这样做。虽然我的理解是集成测试应该尽可能接近生产环境，所以如果可能的话，请使用与生产环境相同的 DBMS。

我正在做的只是在每次测试运行之前从 prod 数据库的已知备份中将数据恢复到我的测试数据库。`Process`在我的测试运行之前，我可以再次通过命令行/调用它。对于我的数据库，它是一个相当小的数据集，我可以只恢复与我的测试相关的表，所以这种开销对于集成测试来说并不太高。（但是，对于单元测试来说，这是不可接受的，因为您可能会有模拟存储库或内存中的数据。）

# java - Android - 在主类之外时功能不起作用

> ID：10254444
> 
> 赞同：1
> 
> 时间：2012-04-20T22:40:01.797
> 
> 标签：java, android, camera, android-camera

我对 Java 和 Android 有点陌生。我正在为 android 开发一个程序，其中一个需要的功能是能够以正确的名称拍照。

我的主要课程是 AmplaCoordenadasActivity

所以我在里面做了以下代码：

```
public void tirarFoto(String arquivo)
{
     Intent camera = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    Uri uriSavedImage=Uri.fromFile(new File(arquivo));
    camera.putExtra("output", uriSavedImage);
    startActivityForResult(camera, 1);

} 
```

它工作正常。

但是当我尝试将它放在另一个类中并调用它时，它会引发许多异常。班上：

```
package ampla.giesta.coordenadas;
import java.io.File;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;

public class Photo extends Activity{

public void tirarFoto(String arquivo){
    Intent camera = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
    Uri uriSavedImage=Uri.fromFile(new File(arquivo));
    camera.putExtra("output", uriSavedImage);
    startActivityForResult(camera, 1);

}

} 
```

我在主课上写

```
public void Camera(){
        Photo camera = new Photo();
        camera.tirarFoto("/sdcard/x.jpg");

} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T21:59:51.793

您需要在您的 android 清单中包含新活动。

在这里阅读 [http://developer.android.com/guide/topics/manifest/manifest-intro.html](http://developer.android.com/guide/topics/manifest/manifest-intro.html)

这是您需要在 android 清单中设置的权限的一个很好的介绍。清单控制您的应用程序可以调用和响应的其他应用程序的功能，您必须在清单中声明服务和接收者，您的应用程序需要在清单中声明的​​任何特殊权限，最后，除了您的主应用程序之外的任何其他活动活动也需要在这里声明。

您还可以在清单中管理您的活动的意图过滤器。

尝试添加

```
<activity android:name=".Photo" android:label="@string/app_name" /> 
```

到您的 manifest.xml 文件

# java - 注入从Java / Spring中的某些方法返回的字符串属性

> ID：10254447
> 
> 赞同：0
> 
> 时间：2012-04-20T22:40:16.973
> 
> 标签：java, spring

我有一个看起来像下面的课程。

```
Class Parser{
  private String fileName;
  Parser(String fileName){
    this.fileName = fileName;
  }
} 
```

现在我想使用 Spring 实例化这个类，但问题是`fileName`这里不是恒定的。它具有以下格式`FileToBeParsed_<ddMMyyyy>`，其中 ddMMyyyy 是当前日期时间（无论何时发生实例化）。

所以我正在考虑编写一个实用程序方法来生成正确的文件名，但是如何将它注入构造函数中？

在您的 spring 配置中创建第三方/库/JDK 类的 bean 也是一个好习惯。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T15:55:59.730

您可以使用 SimpleDateFormatter 注入 filenamePrefix 并在构造函数中附加日期字符串，并对 new Date() 进行一些解析

```
Parser(String fileNamePrefix){
    String fileNameSuffix;
    //determine fileName suffix using new date and formatter
    ...

    this.fileName = fileNamePrefix + fileNameSuffix;
} 
```

或者，如果您不喜欢在构造函数中编码的想法，您可以创建一个 FileNameGenerator 类，并使用 xml 构造函数参数或 Autowired 注释使用构造函数注入来注入它

```
@Autowired
Parser(FileNameGenerator fileNameGenerator){
    this.fileName = fileNameGenerator.getFileName();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T15:58:27.170

假设您使用的是支持 spring EL 的 spring 版本，那么这应该适合您：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans
        http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean name="sdf" class="java.text.SimpleDateFormat">
        <constructor-arg value="yyyy/MM/dd" />
    </bean>

    <bean name="parser" class="sandbox.Parser">
        <constructor-arg value="#{sdf.format(new java.util.Date())}" />
    </bean>
</beans> 
```

# c++ - 如何保持图中两个节点之间的距离？C++

> ID：10254451
> 
> 赞同：0
> 
> 时间：2012-04-20T22:40:40.697
> 
> 标签：c++

我正在研究一个图问题，在该问题中我必须实现图，我分别给定了两个起始节点和两个目标节点。我还必须在整个路径中保持节点之间的距离。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:58:11.463

使用 a-star 算法在移动时探索图形，以保持节点之间的距离。[维基百科上的 A-star](http://en.wikipedia.org/wiki/A_star)这应该可以满足您的目的。

# sass - Bourbon/Sass：#{$all-text-inputs} 带有悬停或焦点？

> ID：10254453
> 
> 赞同：3
> 
> 时间：2012-04-20T22:40:44.467
> 
> 标签：sass, bourbon

根据[Bourbon docs](http://thoughtbot.com/bourbon/#html5-input-types)，您可以使用它 `#{$all-text-inputs}`来转动：

```
#{$all-text-inputs} {
  border: 1px solid green;
} 
```

进入这个：

```
input[type="email"], input[type="number"],   input[type="password"], input[type="search"],
input[type="tel"],   input[type="text"],     input[type="url"],      input[type="color"],
input[type="date"],  input[type="datetime"], input[type="datetime-local"],
input[type="month"], input[type="time"],     input[type="week"] {
  border: 1px solid green;
} 
```

`:hover`Bourbon或Sass 有没有办法适用`:focus`于每个？

`#{$all-text-inputs:hover}`并`#{$all-text-inputs}:hover`没有工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T15:12:10.057

您应该能够使用 Sass[父选择器](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#referencing_parent_selectors_)`:hover`嵌套and样式：`:focus`

```
#{$all-text-inputs} {
  border: 1px solid green;
  &:hover, &:focus {
    // some styles
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-05T16:05:41.167

`#{$all-text-inputs-hover}`代替呢`#{$all-text-inputs:hover}`？

而对于焦点`#{$all-text-inputs-focus}`

再次查看规范 [http://bourbon.io/docs/#html5-input-types](http://bourbon.io/docs/#html5-input-types)

# c# - 从动态界面中删除控制

> ID：10254455
> 
> 赞同：0
> 
> 时间：2012-04-20T22:40:52.343
> 
> 标签：c#, .net, visual-studio-2010, dynamic

我正在从事 ac# 练习项目，以发展我的技能并学习新事物。我创建了一个由几个控件组成的动态界面。当加载表单时，它以 numericUpDown 和 Button 启动。当用户在 numeric up down 上选择一个数字并单击按钮时，它将根据在 numericUpDown 上选择的数字生成尽可能多的文本框，它还会在生成的文本框旁边生成一个删除按钮。当用户单击删除按钮时，我无法删除文本框

这是我拥有的代码：

// 生成文本框和按钮

```
private void AssessmentButton_Click(object sender, EventArgs e)
{
  int length = (int)this.NoAssesmentBoxlv4.Value;
  for (int i = 0; i < length; i++)
  {
    textboxAssesmentName.Add(new TextBox());
    var p = new System.Drawing.Point(110, 260 + i * 25);                     
    (textboxAssesmentName[i] as TextBox).Location = p;
    (textboxAssesmentName[i] as TextBox).Size = new System.Drawing.Size(183, 20);
    this.Lv4Tab.Controls.Add(textboxAssesmentName[i] as TextBox);
    buttoRemove.Add(new Button());
    (buttoRemove[i] as Button).Location = new System.Drawing.Point(380, 260 + i * 25);
    (buttoRemove[i] as Button).Text = @"x";
    (buttoRemove[i] as Button).BackColor = Color.Red;
    (buttoRemove[i] as Button).ForeColor = Color.White;
    (buttoRemove[i] as Button).Size = new System.Drawing.Size(22, 23);
    this.Lv4Tab.Controls.Add(buttoRemove[i] as Button);

    (buttoRemove[i] as Button).Click += this.buttoRemove_click;
  }
} 
```

这是删除按钮单击的来源：（此方法无法编译）

```
private void buttoRemove_click(object sender, EventArgs e)
{
  foreach (Object obj in textboxAssesmentName)
  {
    // THIS LINE DOES NOT COMPILE!!!
    this.Controls.Remove(textboxAssesmentName.Remove);
  }
} 
```

任何想法将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:48:09.890

尝试类似的东西

```
foreach (var control in textboxAssesmentName)
{
    this.Controls.Remove(control);
} 
```

您现有的代码没有任何意义。

**另请参阅**
[http://msdn.microsoft.com/en-us/library/82785s1h%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/82785s1h%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:49:23.307

我建议你使用 的`Tag`属性`Button`来存储`TextBox`与之关联的。要将其放入您的代码中，请将此行插入您的循环中：

```
(buttoRemove[i] as Control).Tag = textboxAssesmentName[i]; 
```

然后您的事件处理程序将如下所示：

```
private void buttoRemove_click(object sender, EventArgs e)
{
    this.Controls.Remove((sender as Control).Tag as Control);
} 
```

编辑：这是我编写代码的方式（不包括拼写错误）。

```
private void AssessmentButton_Click(object sender, EventArgs e)
{
    int length = (int)this.NoAssesmentBoxlv4.Value;
    for (int i = 0; i < length; i++)
    {
        TextBox t = new TextBox();
        System.Drawing.Point p = new System.Drawing.Point(110, 260 + i * 25);                     
        t.Location = p;
        t.Size = new System.Drawing.Size(183, 20);

        Button b = new Button();
        b.Location = new System.Drawing.Point(380, 260 + i * 25);
        b.Text = @"x";
        b.BackColor = Color.Red;
        b.ForeColor = Color.White;
        b.Size = new System.Drawing.Size(22, 23);
        b.Click += new System.EventHandler(this.buttoRemove_click);

        this.Lv4Tab.Controls.Add(t);
        this.Lv4Tab.Controls.Add(b);
        textboxAssesmentName.Add(t);
        buttoRemove.Add(b);
    }
}

private void buttoRemove_click(object sender, EventArgs e)
{
    Control b = sender as Control;
    Control t = b.Tag as Control;
    this.Lv4Tab.Controls.Remove(t);
    this.Lv4Tab.Controls.Remove(b);
    textboxAssesmentName.Remove(t);
    buttoRemove.Remove(b);
} 
```

# java - 有效不可变对象

> ID：10254456
> 
> 赞同：13
> 
> 时间：2012-04-20T22:41:23.087
> 
> 标签：java, concurrency, immutability, java-memory-model

我想确保根据 Java 内存模型正确理解“有效不可变对象”的行为。

假设我们有一个可变类，我们希望将其发布为有效的不可变类：

```
class Outworld {
  // This MAY be accessed by multiple threads
  public static volatile MutableLong published;
}

// This class is mutable
class MutableLong {
  private long value;

  public MutableLong(long value) {
    this.value = value;
  }

  public void increment() {
    value++;
  }

  public long get() {
    return value;
  }
} 
```

我们执行以下操作：

```
// Create a mutable object and modify it
MutableLong val = new MutableLong(1);
val.increment();
val.increment();
// No more modifications
// UPDATED: Let's say for this example we are completely sure
//          that no one will ever call increment() since now

// Publish it safely and consider Effectively Immutable
Outworld.published = val; 
```

* * *

**问题是**：Java 内存模型是否保证所有线程都必须拥有`Outworld.published.get() == 3`？

根据**[Java Concurrency In Practice](http://jcip.net/)**，这应该是正确的，但如果我错了，请纠正我。

> 3.5.3\. 安全出版习语
> 
> 为了安全地发布对象，对象的引用和对象的状态必须同时对其他线程可见。正确构造的对象可以通过以下方式安全地发布：
> - 从静态初始化程序初始化对象引用；
> - 将对其的引用存储到 volatile 字段或 AtomicReference 中；
> - 将对它的引用存储到正确构造的对象的最终字段中；或
> - 将对它的引用存储到由锁正确保护的字段中。
> 
> 3.5.4。有效的不可变对象
> 
> 任何线程都可以安全地使用安全发布的有效不可变对象，而无需额外同步。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-20T22:51:05.897

是的。在读取之前，对 的写入操作`MutableLong`后跟一个`happens-before`关系（在 volatile 上）。

（有可能一个`Outworld.published`线程不安全地读取并将其传递给另一个线程。理论上，这可能会看到更早的状态。实际上，我看不到它发生。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T11:09:49.170

Java 内存模型必须满足几个条件才能保证`Outworld.published.get() == 3`：

*   您发布的代码片段创建和递增`MutableLong`，然后设置`Outworld.published`字段，**必须**在步骤之间可见*。*实现这一点的一种简单方法是让所有代码在单个线程中运行——保证“ *as-if-serial semantics* ”。我认为这就是您的意图，但认为值得指出。
*   从分配中读取`Outworld.published`必须具有*发生后的语义。*这方面的一个示例可能是执行相同的线程，`Outworld.published = val;` *然后*启动其他可以读取该值的线程。这将保证“*好像串行*”语义，防止在分配之前重新排序读取。

如果您能够提供这些保证，那么 JMM 将保证所有线程都能看到`Outworld.published.get() == 3`.

* * *

但是，如果您对该领域的一般程序设计建议感兴趣，请继续阅读。

为了保证没有其他线程*看到*不同的值`Outworld.published.get()`，您（开发人员）必须保证您的程序不会以任何方式修改该值。通过随后执行`Outworld.published = differentVal;`或`Outworld.published.increment();`。虽然这是可以保证的，但如果您设计代码以避免可变对象，并使用静态非最终字段作为多个线程的全局访问点，它会容易得多：

*   而不是发布`MutableLong`，将相关值复制到不同类的新实例中，其状态无法修改。例如：引入类`ImmutableLong`，它在构造时分配`value`给一个`final`字段，并且没有`increment()`方法。
*   而不是多个线程访问静态非最终字段，将对象作为参数传递给您的`Callable`/`Runnable`实现。这将防止一个流氓线程重新分配值并干扰其他线程的可能性，并且比静态字段重新分配更容易推理。（诚​​然，如果您正在处理遗留代码，这说起来容易做起来难）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-21T03:39:20.610

> 问题是：Java 内存模型是否保证所有线程都必须有 Outworld.published.get() == 3 ？

简短的回答是`no`。因为其他线程可能会`Outworld.published`在它被读取之前访问。

在执行的那一刻之后`Outworld.published = val;`，在没有其他修改的情况下`val`- 是的 - 它总是`3`。

但是，如果任何线程执行`val.increment`，那么它的值对于其他线程可能会有所不同。

# java - 附加双引号的Java字符串

> ID：10254458
> 
> 赞同：0
> 
> 时间：2012-04-20T22:41:34.413
> 
> 标签：java, regex, string

我想用双引号字符替换字符串中的所有括号。

我认为这会起作用：

```
"[foo".replaceAll(Pattern.quote("["), Pattern.quote(""")); 
```

但事实并非如此。谁能帮我理解我需要做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T22:43:30.543

你需要转义引号

```
"[foo".replaceAll(Pattern.quote("["), "\""); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T22:45:28.913

replaceAll 接受字符串

```
"[foo".replaceAll("\\[", "\"")); 
```

我是否也可以[将此](http://www.regexplanet.com/advanced/java/index.html)添加为测试您的正则表达式字符串的好地方

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:47:41.743

```
"[foo".replaceAll("\\[", "\"") 
```

要转义字符串中的特殊字符，例如“\”，您需要在前面加上一个 \，因此 \" 变为 "，\\ 变为 \，等等...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T22:55:18.767

```
"[foo".replaceAll(Pattern.quote("["), "\"") ; 
```

第二个参数 - 替换 - 是一个通用字符串（不需要引号）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T22:52:11.227

以下作品：

"[foo".replaceAll("\[", "\\"")

笔记：

1.  replaceAll 将其第一个参数解释为正则表达式。
2.  您需要转义（在正则表达式上下文中）左括号，否则格式错误。

# php - 所以用户代理可以被伪造......好吧......我不应该使用php来检测浏览器是否有正当理由？

> ID：10254463
> 
> 赞同：0
> 
> 时间：2012-04-20T22:42:33.283
> 
> 标签：php, css, dynamic-css

我一直不明白为什么有人说为每个浏览器制作自定义 CSS 是一件坏事。为了减小我的页面大小并加快下载速度，对我来说，为主要浏览器（尤其是 IE 的许多不同形式）制作自定义 css 是非常有意义的，并为其他所有内容制作一个通用 css。

如果你想在 css 世界中派出一把臃肿、巨大的瑞士军刀，那么在所有情况下都继续前进，我不会阻止你。

执行此操作时，快速检测浏览器很重要。加载 JavaScript 文件以检测浏览器似乎很慢。所以我更喜欢用php来检测浏览器，并发出指定的css。或者至少是通用浏览器特定的 css，然后使用 JavaScript 加载更详细的 css 版本。

但是我已经阅读了一篇又一篇文章，说明为什么这是一件坏事。这些文章背后的主要原因是用户代理可以被伪造。或者在那里使用 Firefox，但服务器认为他们使用的是 IE7，因此它发送了错误的 css 文件。

作为网络应用程序的开发人员/设计师，为什么这是我的问题？如果您想使用 Firefox，但告诉我的服务器您使用的是 safari 或 IE*，并得到一个看起来很糟糕的页面，为什么这是我的问题？

如果用户不能正确地看到您的网站，他们将永远不会回来，或者对我提出某种类似的论点，请不要全部扔掉。普通用户不会这样做。只有知道如何做到这一点的人才能知道我的网站看起来很糟糕时出了什么问题。

这类似于在旧的 Apple II 上查看我的网站（我不知道如何），然后因为一切看起来都是绿色的而对我大喊大叫。

那么，为什么我不应该使用 php 来检测浏览器并发送自定义的 css 文件，是否有充分的理由，而不是个人喜好？

我这样做主要是针对不同版本的 IE。似乎对于某些站点来说，添加 if IE6 和 if IE7 部分只是 css 文件大小的两倍或三倍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:54:40.290

通常，当用户故意伪造用户代理字符串时，这是因为在用户浏览器中无法查看本应显示的内容。例如，一些网站可能限制用户使用 IE 或 Firefox，但用户在 Debian 上使用 Iceweasel。Iceweasel 只是出于商标原因重命名的 Firefox（还有一些其他更改），因此该站点没有理由不工作。

意识到这*是因为*（错误的）浏览器检测而发生的，而不是尽管如此。我想说你不需要非常担心这个问题。此外，如果您可以使您的网站合理地跨浏览器兼容，那根本不重要。如果您*真的*想使用特定于浏览器的 CSS，并且不想在一个 CSS 文件中全部使用，请不要让虚假的用户代理阻止您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:53:01.950

只要您正在做的唯一一件事就是更改样式表，据我所知，没有任何正当理由。如果您尝试通过浏览器提供自定义安全措施，那么您将遇到问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:56:03.440

不确定 php，但在 Rails 中，根据用户代理提供 css 文件和不同布局是正常且简单的做法，特别是考虑到您的网站很可能被任何可用的移动设备访问时，从不为最流行的（目前是 Firefox）浏览器编写思想，甚至在需要时编写自定义 MIME 类型也非常简单。

IMO 不这样做纯粹是编码人员的懒惰，但并非所有网站都是由专业的开发人员团队开发的，手头有造型大师。同样在 Rails 以外的语言中，它可能不是那么简单。抱歉，我对 PHP 一无所知，所以这可能不是一个合适的答复

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-21T01:21:33.217

在我看来，从 normalize.css 开始，并有一个基本样式表作为开始，根据需要覆盖基本样式通常可以确保您设置适当的后备。如果你真的需要它，*一些*媒体查询，特征检测可以有很长的路要走。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T01:32:40.837

您不应该基于浏览器的原因之一是因为谷歌和雅虎等主要搜索引擎禁止为不同的浏览器显示不同的内容。GoogleBot 可以检测不同的 CSS 和 HTML，您可能会得到错误的搜索定位。此外，如果您使用任何广告服务，您可能会因为显示不同的内容而违反他们的合同。

# c++ - 删除数组中的重复条目 (C++)

> ID：10254464
> 
> 赞同：-2
> 
> 时间：2012-04-20T22:42:41.950
> 
> 标签：c++, arrays, random, duplicates, duplicate-removal

我遇到了一个问题，理论上应该从数组中删除所有重复值的函数不起作用。以下是它的工作原理：

1.  我有两个数组，然后我用 0 到 50 之间的随机数填充它们。
2.  我使用排序函数对数组值进行排序
3.  然后我运行我的重复数据删除功能
4.  我再次按顺序对数组值进行排序
5.  然后我输出两个数组中的值

问题是，重复数据删除函数中的循环运行了 19 次，无论它找到多少重复条目，这非常奇怪。此外，它仍然给出重复项。

有任何想法吗？谢谢！

```
int* dedupe(int array[ARRAY_SIZE])      //remove duplicate array values and replace with new values.
{   bool dupe = false;
    while(dupe!=true)
    {   
        for(int j=0; j<ARRAY_SIZE; j++)
        {   if(array[j] == array[j+1])
            {   array[j] = rand(); 
                array[j] = array[j] % 51;
                dupe = false;
            }
            else { dupe = true; // the cout part is for debugging
                    cout << dupe << endl; }
        }
    } return array;
}
int main()
{
    int a[9], b[9];
    srand(time(0));
    populate(b);
    populate(a);
    sort(a,ARRAY_SIZE);
    sort(b,ARRAY_SIZE);
    dedupe(a);
    dedupe(b);
    sort(a,ARRAY_SIZE);
    sort(b,ARRAY_SIZE);
    for(int i=0; i<10; i++)
    {   cout << "a[" << i << "] = " << a[i] << "\t\t" << "b[" << i << "] = " << b[i] << endl; }
    return 0;
} 
```

到目前为止，没有任何建议可以解决问题。有谁知道解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:54:58.447

您要解决的问题与您提供的算法并不真正匹配。您并不是真的要删除重复项，而是要保证数组中的所有元素都是不同的，不同之处在于通过删除重复项，数组中的元素数量将小于数组的大小，但是您想要一个完整的数组。

我不知道完美的解决方案是什么（算法上），但一个简单的答案是创建一个包含有效范围内所有值的数组（因为范围很小），对其进行洗牌，然后拾取前 N 个元素. 可以将其视为使用卡片来选择值。

```
 const int array_size = 9;
 void create_array( int (&array)[array_size] ) {
    const int max_value = 51;
    int range[max_value];
    for ( int i = 0; i < max_value; ++i ) {
       range[i] = i;
    }
    std::random_shuffle( range, range+max_value );
    std::copy_n( range, array_size, array );
 } 
```

这不是最有效的方法，但它很简单，并且使用少量元素应该不会出现任何性能问题。更复杂的方法是用范围内的随机元素初始化数组，排序并删除重复项（实际上是删除，这意味着数组最后不会满），然后继续生成数字并检查它们是否是新的针对之前生成的数字。

最简单的方法是与线性时间的所有其他值进行比较，但在 9 个元素的数组上，线性时间足够小，无关紧要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:45:30.933

你不是从 for 循环内部返回的......所以它应该每次都运行 ARRAY_SIZE 次。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T22:51:59.390

你在 array[j] = rand(); 做错了 数组[j] = 数组[j] % 51

它总是有 1 到 ARRAY SIZE！

# javascript - 页面重新加载不会重置 jQuery / CSS 样式

> ID：10254465
> 
> 赞同：0
> 
> 时间：2012-04-20T22:42:42.843
> 
> 标签：javascript, jquery, css

我正在设计一个有一个按钮的 HTML 页面。用户单击该按钮，一个简单的 jQuery 脚本会为该 div 设置动画，从而显示较低的页面内容。你可以[在这里](http://allhandsonline.com)看到它。

我注意到它第一次看起来/工作正常，但如果我用浏览器按钮刷新页面，它不会完全重置。初始容器仅占页面的一半。如果我再次输入 URL 并加载页面，它会按预期重置。 **注意：只有在单击初始按钮后向下滚动一点时才会发生这种情况......这看起来很奇怪。**

我不知道这两个操作之间有什么区别，但显然有。有什么区别，我该如何解决这个问题？

这是我的 jQuery 代码，以防相关：

```
 $(document).ready(function(){

    var faqs = $("#FAQ");
    $("#learnmore").click(
        function(){
            $("#home").animate({top:'-=1066px'},600);
            $("#more").animate({top:'-=1066px'}, 600, function() {$("#background").hide();} );
            $("body").css('overflow-y', 'scroll');

            //$("#home").slideUp();
            console.log("jquery loaded");
            }
        );

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:46:02.360

### 发生这种情况是因为它被浏览器缓存了。

如果您的样式经常被修改，那么简单的解决方法就是在引用的末尾附加一个唯一的 id，比如

```
<link href="style.css?time=168768234928" ..../> 
```

它的作用是让浏览器在每次加载时都认为这是一个新请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:57:20.667

发生这种情况是因为浏览器试图滚动到相同的位置，即页面重新加载之前的位置。要检查它，请尝试按下按钮，不要滚动到页面底部，然后重新加载页面。好吧，原因很清楚。

现在我们需要解决方案。尝试这个：

```
#more {display:none} 
```

在你的 CSS 中。然后使用

```
$("#more").show().animate(... 
```

在你的`$("#learnmore").click()`功能中。我希望这能解决问题。

# python - 当我在 for 中有一个 if 时，Django 模板检查是否为空

> ID：10254466
> 
> 赞同：0
> 
> 时间：2012-04-20T22:42:50.440
> 
> 标签：python, django, django-templates

我的模板中有以下代码：

```
{% for req in user.requests_made_set.all %}
  {% 如果不是 req.is_published %}
    {{ 要求 }}
  {％ 万一 ％}
{％ 空的 ％}
  没有请求
{% endfor %}

```

如果有一些请求但没有 is_published = True 那么我怎么能输出一条消息（比如“没有请求”）？我只想使用 Django 模板而不是在我看来这样做！

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T00:41:06.247

即使这可能在模板中实现，我（可能还有许多其他人）会建议不要这样做。为此，您基本上需要找出数据库中是否有任何对象符合某些条件。这当然不属于模板。

模板旨在用于定义内容的显示方式。您正在解决的任务是确定要显示的内容。这绝对属于视图而不是模板。

如果您想避免仅仅因为您希望信息出现在每个页面上而避免将其放置在视图中，而不管视图如何，请考虑使用上下文处理器，它会自动将所需信息添加到您的模板上下文中，或者编写一个模板标签会为你解决这个问题。

# iis - 使 IIS7.5 使用自定义错误页面

> ID：10254468
> 
> 赞同：0
> 
> 时间：2012-04-20T22:42:56.440
> 
> 标签：iis, iis-7.5, custom-error-pages

我有一个自定义错误页面。它适用于我的生产服务器，但不适用于我的开发机器。它是 Windows 7，IIS 7.5。

我无法让它真正执行我的自定义页面，尽管我可以让它始终尊重详细的本地与自定义。它实际上并没有移交给我的自定义错误页面，而是为我提供了远程模式的通用“运行时错误”页面。

可能相关的事实：它是一个安装在不同应用程序池和 web.config 下的应用程序，这个是 .NET 4.0，集成的。

我曾经用“Response.TrySkipIisCustomErrors = true;”让它工作。- 但它进行了重定向而不是执行，所以我丢失了错误上下文，这当然是重点 - 在尝试更改重定向模式时，我无法让它再次工作。

我已尝试以所有记录/标准方式同时使用 customErrors 和 httpErrors，但没有任何组合有效。同样，我在其他地方也能正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:44:00.460

以上是正常响应 - 如果您的错误页面本身正在生成异常。

原来导致原始错误的相同代码是在错误页面的执行中。

# mysql - 按值 1 增加字母数字 VARCHAR 条目？

> ID：10254479
> 
> 赞同：1
> 
> 时间：2012-04-20T22:44:26.323
> 
> 标签：mysql

在一个旧项目上，由于没有经过设计考虑，我有一个实际上应该设置为 auto_increment 的列，尽管它不能是因为它是字母数字条目，如下所示：

```
c01
c02
c03 
```

（c99 将继续 c100 及更多），这封信发生在过去，需要对系统进行大修才能将其取出，因此我更喜欢这种解决方法。

现在我需要一种方法来自己模仿`auto_increment`SQL 语句的功能，我自己的尝试已经达到了以下几点：

```
INSERT INTO tags (tag_id, tag_name, tag_description, added_by_user_id, creation_date, last_edited) VALUES (SELECT(MAX(tag_id)+1), 

'Love', 'All about love', 7, now(), 0); 
```

这个不能按原样工作，尽管想法是选择“tag_id”列中的最高条目，然后简单地将其增加值 1。

任何想法如何做到这一点？

顺便说一句，我也不确定您是否可以通过这种方式简单地增加字母数字条目，虽然我知道可以做到，但我只是不知道怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T23:00:59.980

如果您想安全地获取表单标签 id 的最大整数值`c##..`，可以使用以下表达式：

```
max( convert( substring(tag_id, 2) , unsigned integer) )
^^^ largest   ^^^^^^^^^ after 'c'    ^^^^^^^^^^^^^^^^ convert to positive number 
```

然后您的插入语句将如下所示：

```
set @newid = convert(
              (select 
               max(convert( (substring(tag_id, 2)) , unsigned integer))+1
               from tags), char(10)
            );

set @newid = if(length(@newid) = 1, concat('0', @newid), @newid);
set @newid = concat('c', @newid);

INSERT INTO tags (tag_id, tag_name, tag_description, added_by_user_id,
                  creation_date, last_edited)
VALUES (@newid, 'Love', 'All about love', 7, now(), '2012-04-15'); 
```

演示：[http ://www.sqlfiddle.com/#!2/0bd9f/1](http://www.sqlfiddle.com/#!2/0bd9f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T23:12:17.177

这将从 c01 增加到 c02 到 c03 ... 到 c99 到 c100 到 c101 ... 到 c999 到 c1000 等。

```
set @nextID = (SELECT CONCAT(SUBSTRING(`tag_id`, 1, 1), IF(CHAR_LENGTH(CAST(SUBSTRING(`tag_id`, 2)
AS UNSIGNED)) < 2, LPAD(CAST(CAST(SUBSTRING(`tag_id`, 2) AS UNSIGNED) + 1 AS CHAR), 2,
'0'), CAST(CAST(SUBSTRING(`tag_id`, 2) AS UNSIGNED) + 1 AS CHAR))) FROM `tags` ORDER BY
`tag_id` DESC LIMIT 1);

INSERT INTO tags (tag_id, tag_name, tag_description, added_by_user_id,
creation_date, last_edited) VALUES (@nextID, 'Love', 'All about love', 7, NOW(), null); 
```

# php - 在 PHP 中捕获失败的 HTTP 请求

> ID：10254482
> 
> 赞同：2
> 
> 时间：2012-04-20T22:44:58.657
> 
> 标签：php, file-get-contents

所以，我在使用 file_get_contents 的 PHP 中遇到了一些麻烦......

我正在使用[此代码](https://stackoverflow.com/a/10235240/1286857)。

之前，如果我使用找不到的哈希 (bdfccf20b1db88d835c27685ac39f874) 运行它，它将返回：

```
fcf1eed8596699624167416a1e7e122e - found: octopus (Google)
bed128365216c019988915ed3add75fb - found: passw0rd (Google)
d0763edaa9d9bd2a9516280e9044d885 - found: monkey (Google)
dfd8c10c1b9b58c8bf102225ae3be9eb - found: 12081977 (Google)
ede6b50e7b5826fe48fc1f0fe772c48f - found: 1q2w3e4r5t6y (Google)
bdfccf20b1db88d835c27685ac39f874
Warning: file_get_contents(http://md5.gromweb.com/query/bdfccf20b1db88d835c27685ac39f874): failed to open stream: HTTP request failed! HTTP/1.1 404 Not Found

 in /Users/mihir/MD5Decryptor.php on line 44

Catchable fatal error: Argument 2 passed to MD5Decryptor::dictionaryAttack() must be an array, boolean given, called in /Users/mihir/MD5Decryptor.php on line 56 and defined in /Users/mihir/MD5Decryptor.php on line 25 
```

为了停止警告，我改变了

```
if ($response = file_get_contents($url)) { 
```

在第 43 行到

```
$response = @file_get_contents($url);
if ($response) { 
```

并且输出变为

```
fcf1eed8596699624167416a1e7e122e - found: octopus (Google)
bed128365216c019988915ed3add75fb - found: passw0rd (Google)
d0763edaa9d9bd2a9516280e9044d885 - found: monkey (Google)
dfd8c10c1b9b58c8bf102225ae3be9eb - found: 12081977 (Google)
ede6b50e7b5826fe48fc1f0fe772c48f - found: 1q2w3e4r5t6y (Google)
bdfccf20b1db88d835c27685ac39f874
Catchable fatal error: Argument 2 passed to MD5Decryptor::dictionaryAttack() must be an array, boolean given, called in /Users/mihir/MD5Decryptor.php on line 56 and defined in /Users/mihir/MD5Decryptor.php on line 25 
```

我怎样才能发现错误？如，如果未找到哈希，我如何修改脚本以返回“未找到哈希”而不完全崩溃？

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T22:53:21.840

您仍然收到错误的原因是因为这一行：

```
return $this->dictionaryAttack($hash, $this->getWordlist($hash)); 
```

当 getWordList 从 , 获得 404 时`file_get_contents()`，`FALSE`将返回并生成有关传递无效参数的异常。

您可以尝试解决的一件事是：

```
$list = $this->getWordlist($hash);
if ($list === false) {
    return 'Error fetching URL';
} else {
    return $this->dictionaryAttack($hash, $list);
} 
```

那至少应该处理它无法加载的 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T22:51:40.977

将它全部包装在一个 try-catch 块中。PHP 有处理这些致命错误的机制。

像这样的东西应该工作：

```
try {
    if ($response = file_get_contents($url)) {
        ...
    }
}
catch (Exception $e) {
    // return your "Hash Not Found" response
} 
```

以下是有关构造的一些文档：http: [//php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

您可能希望准确确定导致错误的代码行，并尽可能使用最具体的 Exception 子类。这是最佳实践，因为您不想错过与此问题无关的异常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T22:46:46.147

您可以做的最好的事情是[切换到使用 cURL](http://davidwalsh.name/download-urls-content-php-curl)。虽然您[在使用时会遇到错误`file_get_contents()`](http://php.net/manual/en/reserved.variables.httpresponseheader.php)，但它不是很健壮。

# jquery - 根据空子表单输入值隐藏给定部分中的 div

> ID：10254483
> 
> 赞同：0
> 
> 时间：2012-04-20T22:45:05.950
> 
> 标签：jquery

我有一个包含 div 结构的表单，如下所示：

```
<form id="baseform">
    <div class="container">
     <div class="subheader"><h2>Section 1</h2></div>
     <div class="row">
        <textarea id=T_01></textarea>  
        <input id="T_02" type="text" />
     </div>
     <div class="row">
        [more form fields]
     </div>
    </div>
    <div class="container">
     <div class="subheader"><h2>Section 2</h2></div>        
       <div class="row">[more form field, etc.]
     </div>
   </form> 
```

我想隐藏那些在 on 下方具有空表单输入的`.row`div （我已经在使用在on下方显示div ）。`.subheader``document ready``toggle()``.row``.subheader``click`

似乎这样的事情应该有效：

```
$(document).ready(function() {
    $('.row :input[@value=""]').parent('.subheader').nextAll('.row').hide();
}); 
```

但没有骰子。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T22:58:39.433

```
$('.row input').filter(function() {
    return this.value.length ? this : null;
}).parent().hide();​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:50:43.393

这适用于大多数表单输入，但是，对于复选框和单选框，您可能需要其他条件逻辑，它们有一个值集。需要看看他们是不是`:checked`。

```
$('.subheader .row :input').each( function() {
   if ( !$(this).val().length )
      $(this).parent('.row').hide();
}); 
```

**编辑**`:input`-在我的选择器中 错过了。

**编辑 2** - 没有隐藏实际行，只有表单字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T22:56:54.290

尝试这个：

```
$(function () {
    $(".row :input[value='']").hide();
}); 
```

# sql-server-2008 - 如何判断上次访问 sql 表的时间

> ID：10254485
> 
> 赞同：4
> 
> 时间：2012-04-20T22:45:19.757
> 
> 标签：sql-server-2008, statistics

这个问题基本上是这个问题的延伸：

[如何判断是否正在访问数据库表？想要类似“SELECT 触发器”的东西](https://stackoverflow.com/questions/2155594/how-can-i-tell-if-a-database-table-is-being-accessed-anymore-want-something-lik)

在作者在他的帖子中作为解决方案提供的查询中，我假设空值意味着自上次重新启动 SQL Server 以来未访问过表。

我的问题是：如果上次访问是在上次 SQL 重新启动之前，是否有办法判断上次访问表的时间？另外，我怎样才能知道上次重新启动 SQL 的时间？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T00:43:20.570

对于 SQL Server 2008 中的 sql server 启动时间，

```
select sqlserver_start_time from sys.dm_os_sys_info 
```

对于服务器重启后的最后一次用户访问，

```
select DB_NAME(us.[database_id]) as [db], OBJECT_NAME(us.[object_id], us.[database_id]) as [object], 
MAX(us.[last_user_lookup]) as [last_user_lookup], MAX(us.[last_user_scan]) as [last_user_scan], MAX(us.[last_user_seek]) as [last_user_seek] 
from sys.dm_db_index_usage_stats as us 
where us.[database_id] = DB_ID() AND us.[object_id] = OBJECT_ID('tblname')
group by us.[database_id], us.[object_id]; 
```

我每天都记录这张表，所以我在重启后就有了。它也可以在它们被删除后充当索引审计。

# android - Listview 内的表格布局 - Android 2.2

> ID：10254488
> 
> 赞同：0
> 
> 时间：2012-04-20T22:45:31.317
> 
> 标签：android, android-layout, android-listview, android-scroll

我正在创建一个表格，其中将有几行。所以我使用了 ListView （使其可滚动），然后我动态地创建了一个表格布局。然后我动态添加行。

但是，我的应用程序崩溃并给出错误 java.lang.UnsupportedOperationException: addView(View) is not supported in AdapterView。

有什么解决办法吗？

# wpf - 静态绑定作品已编译但不在设计者之下

> ID：10254489
> 
> 赞同：0
> 
> 时间：2012-04-20T22:45:40.770
> 
> 标签：wpf, xaml, data-binding, binding

以下代码在编译时工作正常，但我无法让**Text="{x:Static local:SomeClass+Limits.Name}"**在设计器中工作。在这方面的任何帮助将不胜感激！谢谢....

```
namespace StaticTest
{
    public class SomeClass 
    {
        public static class Limits
        {
            public const string Name = "It Works!";
        }
    }
} 
```

```
<Window
    x:Class="StaticTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:StaticTest"
    Title="StaticTest"
    Height="146"
    Width="296"
    WindowStartupLocation="CenterScreen">
    <TextBlock
        Grid.Column="1"
        Grid.Row="1"
        Text="{x:Static local:SomeClass+Limits.Name}" />
</Window> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T19:54:27.153

I got it. As it turns out you need to do something like the following:

```
using System;

namespace StaticTest
{
    public abstract class AbstractViewModel<VM, LC>
        where VM : new()
        where LC : new()
    {
        public AbstractViewModel()
        {
            Limits = new LC();
        }

        static AbstractViewModel()
        {
            Instance = new VM();
        }

        public LC Limits { get; private set; }

        public static VM Instance { get; private set; }
    }

    public class MainWindowViewModel :
        AbstractViewModel<MainWindowViewModel, MainWindowViewModel.LimitsClass>
    {
        public class LimitsClass
        {
            public LimitsClass()
            {
                Lots = new MinMax<int>(1, 10);
            }

            public MinMax<int> Lots { get; private set; }
        }        
    }
}

<Window
    x:Class="StaticTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:StaticTest"
    Title="StaticTest"
    Height="146"
    Width="296"
    WindowStartupLocation="CenterScreen">
    <Grid>
        <TextBlock
            Text="{Binding Source={x:Static local:MainWindowViewModel.Instance}, Path=Limits.Lots.MaxValue}" />
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:27:08.467

正如@HB 所说，您需要一个绑定：

```
<TextBlock Text="{Binding Source={x:Static local:SomeClass+Limits.Name}}"/> 
```

VS2010 设计器无法处理这个问题，但它在 VS11 beta 中运行良好。

# facebook - 来自 facebook c# sdk 在 facebook 上的图形 api 发布操作

> ID：10254491
> 
> 赞同：1
> 
> 时间：2012-04-20T22:46:00.287
> 
> 标签：facebook, graph

我正在尝试在 facebook 上发布一个操作，但我收到错误“OAuthException) 验证应用程序错误。无效的应用程序 ID”

这是我的代码：

```
 var fb = new FacebookClient("TesterAccessToken");

        dynamic parameters = new ExpandoObject();
        parameters.dyno_run = "http://samples.ogp.me/3153962321975196100";
        parameters.appnamespace = "NameSpace";
        parameters.action = "comment";
        parameters.object_name = "nice_image";
        parameters.object_url = "MyURL";

        try
        {
            dynamic result = fb.Post("me/", parameters);
        }
        catch (FacebookApiException ex)
        {

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:30:44.173

我在朋友的墙上使用下面的代码在墙上发帖

```
 Facebook.Web.FacebookWebClient client = new Facebook.Web.FacebookWebClient(accesstoken);                
            dynamic parameters = new ExpandoObject();
            parameters.message = "";
            parameters.link = link;
            parameters.name = name;
            parameters.caption = caption;
            parameters.description = desc;
            parameters.from = fromId;    
            object resTest = client.Post("/" + friendId + "/feed", parameters); 
```

您可以使用

```
 object resTest = client.Post("/me/feed", parameters); 
```

# javascript - 试图触发 jQuery Mobile ajax 调用

> ID：10254496
> 
> 赞同：0
> 
> 时间：2012-04-20T22:46:46.520
> 
> 标签：javascript, rest, jquery, jquery-mobile

我确定这是一个基本的语法错误，但我正在尝试使用 jQuery mobile ajax（下面的代码）进行休息调用，并且据我所知，ajax 没有触发。

```
 function triggerCall() {
            alert("function triggered");
            $.ajax({
                type: "GET",
                dataType: "jsonp",
                url: REST Url,
                success: function (data) {
                    alert(data);
                }
            }); 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T20:08:49.963

我相信如果您使用 JSONP，您需要在 $.ajax 请求中指定回调，然后在您的 REST 文件返回中再次指定。这是我一直在成功使用的示例（我敢肯定，它并不完美）。

```
$.ajax({
    url: 'www.domain.com/string/to/your/REST/api',
    data: {
        dataToBeSent: variable, 
        dataToBeSent: sessionStorage.getItem('local/session Storage'),
        dataToBeSend: "or a string"
    },
    dataType: 'jsonp',
    jsonp: 'jsoncallback',
    timeout: 5000,
    success: function(data){    
        alert("Huzzah!");
    },
    error: function(){
        alert("Boohisssss");
    }
}); //end ajax call 
```

然后在 url 中，我将这段代码放在文件的底部：

```
header("Content-type: application/json", true);
echo $_GET['jsoncallback'] . '(' . json_encode($data) . ');';
exit; 
```

其中 data 是 JSON 编码的数组，在 PHP 中使用 json_encode()，然后包装在回调函数中（$_GET['jsoncallback']）

就像我说的，它并不完美，但它一直在为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T01:26:44.493

1.  检查浏览器控制台中的错误。例如。在 chrome 菜单>工具>javascript 控制台中。
2.  还建议向您的 ajax 调用添加错误处理程序：http: [//api.jquery.com/error/](http://api.jquery.com/error/)
3.  确定将哪种方法 JSONP 或 CORS 用于您的 ajax 调用：[那么，JSONP 还是 CORS？](https://stackoverflow.com/questions/12296910/so-jsonp-or-cors).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T22:51:40.663

如果您实际上是在编写`url: REST Url,`，那么您必须将其更改为 var 或字符串.. 这将是一个问题

# java - Tomcat 上的 Java NullPointException

> ID：10254499
> 
> 赞同：0
> 
> 时间：2012-04-20T22:47:25.317
> 
> 标签：java, mysql, sql, servlets, jdbc

我正在使用 jsp 和 servlet 开发注册系统，当我在本地调整时，我没有得到 NullPointerException。但是当我将它部署到远程服务器时，我得到了这个 NullPointerException。

我的代码中是否有任何错误。

```
package com.app.base;

//imported necessary packages. removes for readability.

public class RegisterServlet extends HttpServlet {

@Override
protected void doPost(HttpServletRequest req, HttpServletResponse resp)
        throws ServletException, IOException {

    PrintWriter out = null;
    // Connection connection = null;
    // Statement statement;
    // ResultSet rs;

    resp.setContentType("text/html");
    out = resp.getWriter();

    String fname = req.getParameter("fname");
    String lname = req.getParameter("lname");
    String email = req.getParameter("email");
    String password = req.getParameter("password");
    String city = req.getParameter("city");
    String country = req.getParameter("country");

    Connection connection = null;
    try {
        // Load the JDBC driver
        Class.forName("com.mysql.jdbc.Driver");

        // Create a connection to the database
        connection = DriverManager.getConnection(
                "jdbc:mysql://localhost:3306,/main",
                "root", "root");

    } catch (SQLException ex) {
        resp.sendRedirect("index.jsp?error=SQLError");
    } catch (ClassNotFoundException e) {
        resp.sendRedirect("index.jsp?error=Class Not Found");
    }

    PreparedStatement statement;
    try {
        statement = connection
                .prepareStatement("INSERT INTO main.users(first_name, last_name, email, password, "
                        + "city, country, registered_time)VALUES(?,?,?,?,?,?, NOW())");
        statement.setString(1, fname);
        statement.setString(2, lname);
        statement.setString(3, email);
        statement.setString(4, password);
        statement.setString(5, city);
        statement.setString(6, country);

        int rs = statement.executeUpdate();

        if (rs == 1) {
            resp.sendRedirect("index.jsp?registered=true");
            // String destination = "index.jsp?registered=true";
            // RequestDispatcher rd =
            // getServletContext().getRequestDispatcher(destination);
            // rd.forward(req, resp);
        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

        resp.sendRedirect("index.jsp?registered=false");
    }

}

} 
```

堆栈跟踪：

```
 SEVERE: Servlet.service() for servlet [Register] in context with path [] threw exception
  java.lang.NullPointerException
at com.app.base.RegisterServlet.doPost(RegisterServlet.java:79)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:399)
at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:306)
at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:322)
at org.apache.tomcat.util.net.AprEndpoint$SocketWithOptionsProcessor.run(AprEndpoint.java:1688)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T22:54:51.510

在所有可能的引擎盖中找不到驱动程序类，这意味着对的调用会`Class.forName()`抛出`ClassNotFoundException`. 您发送重定向（顺便说一句，不记录异常，这不是一个好主意，您现在已经可以看到很难找到错误），但您没有从通话中返回。`null`当您尝试调用时，保留连接并稍后在您的代码中导致 NPE `prepareStatement`）。

`return ;`在您发送重定向后添加一个以停止您的呼叫。

当然，您应该找到一种或另一种方法在您的 Tomcat 上提供该驱动程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T08:36:17.020

你错误地把 extra , 在你的字符串

```
connection = DriverManager.getConnection(
            "jdbc:mysql://localhost:3306,/main",
            "root", "root"); 
```

注意`,/main`

相反，它应该是

```
connection = DriverManager.getConnection(
            "jdbc:mysql://localhost:3306/main",
            "root", "root"); 
```

对不起，如果这不是正确的答案，我不是像上面所有人一样的专家

# wix - 使用 msiexec 卸载特定功能

> ID：10254500
> 
> 赞同：7
> 
> 时间：2012-04-20T22:47:34.973
> 
> 标签：wix, uninstallation, windows-installer

我安装了一个具有两个功能（FirstFeature 和 SecondFeature）的测试应用程序。我只想从应用程序中删除一项功能（SecondFeature）。我尝试在命令行中使用 REMOVE 属性。这是用于删除 SecondFeature 的命令。

```
msiexec /x RemoveFeatures.msi REMOVE="SecondFeature" /L*V log.LOG 
```

但它正在卸载完整的应用程序。日志文件显示默认添加 REMOVE=ALL。这是日志文件的详细信息。

> MSI (s) (24:B4) [17:39:05:231]：命令行：REMOVE=SecondFeature REMOVE=ALL
> 
> MSI (s) (24:B4) [17:39:05:231]：属性更改：添加 REMOVE 属性。它的值是'SecondFeature'。
> 
> MSI (s) (24:B4) [17:39:05:231]：属性更改：正在修改 REMOVE 属性。它的当前值为“SecondFeature”。它的新值：'ALL'。

它表示在卸载过程中 REMOVE 属性值被覆盖。我是否需要设置任何其他属性来删除特定功能？

任何帮助表示赞赏。提前致谢 ！！！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-21T02:53:03.520

如您所述， /x 用于卸载。*完全*（全部）卸载。

尽管您想要执行删除功能的安装可能会违反直觉。

```
msiexec /i RemoveFeatures.msi REMOVE="SecondFeature" /L*V log.LOG 
```

您可能还希望添加 /qb 或 /qn 以使其非交互/静默。

# asp.net-mvc-3 - 使用新参数（不是 id）后，ViewResult 无法返回值

> ID：10254505
> 
> 赞同：0
> 
> 时间：2012-04-20T22:48:06.380
> 
> 标签：asp.net-mvc-3, parameters, controller, query-string, actionresult

我对记录显示有一点奇怪的问题。如果用户在 URL 中输入条形码数字 (int) 值，我应该显示链接到该条形码的记录的详细信息。曾经，条形码使用 GUID (CodeId GUID PK)，但现在我们添加了一个新的 Int 字段 (SerialId IDENTITY Int) 来跟踪实际的条形码值；我们不允许更改表上的 CodeId 字段（称为 Code），所以这导致了我的奇怪问题。我环顾四周，这个[未使用的 QueryString id 参数](https://stackoverflow.com/questions/2146004/querystring-id-parameter-not-being-used)是我能找到的最接近解决发生在我身上的事情的方法。

我的路由完全正常

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional } // Parameter defaults
        ); 
```

型号正常

```
public DbSet<Code> Codes { get; set; }

public partial class Code
{
    public System.Guid CodeId { get; set; }
    public int SerialId { get; set; }
    public string Title { get; set; }
    public string BarCodeDescr { get; set; }
    public System.DateTime CreateDate { get; set; }
    public System.DateTime LastActivityDate { get; set; }
} 
```

当事物是 GUID 并且 Id 映射到 CodeId（表的 PK）等时，我的控制器工作得很好。

```
 public ViewResult BarCode(Guid id)
    {
        Code code = db.Codes.Find(id);
        return View(code);
    } 
```

现在我正在尝试做更多这样的事情：

```
 public ViewResult BarCode(int serialid)
    {
        Code code = db.Codes.Find(serialid);
        return View(code);
    } 
```

或这个...

```
 public ActionResult QRCode(int serialid)
    {
        ViewData["SerialId"] = serialid;
        return View(db.Codes.Where(x => x.SerialId == serialid).ToList());
    } 
```

...只有我所有的尝试都会导致同样的错误：

```
 The parameters dictionary contains a null entry for parameter 'serialid' 
 of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult 
 BarCode(Int32)' in 'MyProject.Controllers.HomeController'. An optional parameter 
 must be a reference type, a nullable type, or be declared as an optional parameter.
 Parameter name: parameters 
```

我究竟做错了什么？让我的视图根据搜索特定 SerialId 而不是 CodeId 返回记录并不理想，但它应该是可行的，对吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:55:21.073

您尝试使用可选参数吗？

```
public ViewResult BarCode(int serialid = 0)
    {
        Code code = db.Codes.Find(serialid);
        return View(code);
    } 
```

# iphone - iPhone模拟器在应用程序启动后显示空白屏幕

> ID：10254510
> 
> 赞同：2
> 
> 时间：2012-04-20T22:48:56.897
> 
> 标签：iphone

我是 iPhone 应用程序开发的新手，我正在构建一个新的计算器，只是为了看看一切是如何工作的。我完成了我的代码，但是当我运行应用程序时，它在模拟器上没有显示任何内容。我创建了一个数字键盘，但应用程序启动后屏幕为空白（白色）。任何人都可以给我一个指针，好吗？我正在使用 Xcode 4.2，部署目标是 5.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:07:28.217

如果您在项目中使用空模板，请确保您在名为 applicationDidFinishLaunching 的函数中的 appdelegate 文件中正确地将视图添加到窗口。

当您针对 iphone 并使用与 ipad 相关的 xid 文件或其他方式时，也会发生这种情况。

希望它会帮助你，对不起我的英语不好

# c - 何时使用 short 而不是 int？

> ID：10254511
> 
> 赞同：10
> 
> 时间：2012-04-20T22:49:17.097
> 
> 标签：c

我会想到两个用例`short`：

1.  我想要一个至少 16 位大小的整数类型
2.  我想要一个大小正好为 16 位的整数类型

在第一种情况下，由于`int`保证至少为 16 位并且是最有效的整数数据类型，我会使用`int`. 在第二种情况下，由于标准不保证`short`' 的大小正好是 16 位，我会`int16_t`改用它。那么短有什么用呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-20T23:01:09.273

从来没有理由`short`在具有 16 位整数的 C99 环境中使用。您可以使用`int16_t`,`int_fast16_t`或`int_least16_t`代替。

The main reasons for using `short` is backward compatibility with C89 or older environments, which do not offer these types, or with libraries using `short` as part of their public API, for implementing `<stdint.h>` itself, or for compatibility with platforms that do not have 16-bit integers so their C compilers do not provide `int16_t`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T22:59:49.873

ISO/IEC 9899:1999 (C99) 添加了标题[`<stdint.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/stdint.h.html#tag_13_48)并[`<inttypes.h>`](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/inttypes.h.html#tag_13_20)提供了您需要的内容：

*   `int16_t`可能没有定义，但如果实现中有一个 16 位（完全）整数类型，`int16_t`将是它的别名。
*   `int_least16_t`是一种至少包含 16 位的最小类型。它总是可用的。
*   `int_fast16_t`是保存至少 16 位的最快类型。它总是可用的。

其他尺寸类似：8、16、32、64。

还有`intmax_t`最大精度整数类型。当然，其中的每一个都有一个无符号类型：`uint16_t`等等。

这些类型也出现在 C2011 中。它们不存在于 C89 或 C90 中。但是，我相信对于大多数编译器，即使是像 MS Visual C 这样的不声称支持 C99 的编译器，这些头文件也可以以某种形式或形式使用。

请注意，我已经给出了 POSIX 2008 版本的`<stdint.h>`和`<inttypes.h>`标头的链接。POSIX 对 C 标准没有的实现施加了规则：

> ### §7.18.1.1 精确宽度整数类型
> 
> ¶1 typedef 名称`int`*N*`_t`指定宽度为 N、无填充位和二进制补码表示的有符号整数类型。因此，`int8_t`表示宽度正好为 8 位的有符号整数类型。
> 
> ¶2 typedef 名称`uint`*N*`_t`表示宽度为 N 的无符号整数类型。因此， `uint24_t`表示宽度正好为 24 位的无符号整数类型。
> 
> ¶3 这些类型是可选的。但是，如果实现提供了宽度为 8、16、32 或 64 位的整数类型，则应定义相应的 typedef 名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T22:55:47.423

是的，如果你真的想要一个特定的数据大小，你可以使用 int16_t、int32_t 等。

int16_t 通常是来自 short 的特定于平台的 typedef（或任何映射到 16 位的类型）。在 32 位机器上，int16_t 可以 typedef'd as short，在 16 位机器上 int16_t 可以 typedef 为 int。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T22:55:51.927

ANSI C 指定类型的最小值范围。您只能确定第一种情况；不是第二个。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T22:56:59.493

如果你有一个非常大的数组，你可能想要使用短裤。

您可能会发现它们对于挑选其他一些数据作为联合的一部分很有用。

# php - jquery联系表格php问题

> ID：10254513
> 
> 赞同：0
> 
> 时间：2012-04-20T22:50:01.623
> 
> 标签：php, javascript, jquery

所以我有一个联系人字段，在提交时会发送一封电子邮件，我希望在完成时收到 javascript 警报但正在返回问题。

的JavaScript：

```
jQuery(document).ready(function() {

    $.ajax({
        url: './contactengine.php',
        type: 'GET',
        dataType: 'JSON',
        success: function(response) {
                        alert("GOOD");
                },
        error: function() {
                        alert("BAD");
                }
    });

}); 
```

php：

```
<?php

$EmailFrom = "emailname@gmail.com";
$EmailTo = "emailto@gmail.com";
$Subject = "new contact from website";
$Name = Trim(stripslashes($_POST['Name'])); 
$company = Trim(stripslashes($_POST['company'])); 
$Email = Trim(stripslashes($_POST['Email'])); 
$Message = Trim(stripslashes($_POST['Message'])); 

// validation
$validationOK=true;
if (!$validationOK) {
  print "<meta http-equiv=\"refresh\" content=\"0;URL=error.htm\">";
  exit;
}

// prepare email body text
$Body = "";
$Body .= "Name: ";
$Body .= $Name;
$Body .= "\n";
$Body .= "company: ";
$Body .= $company;
$Body .= "\n";
$Body .= "Email: ";
$Body .= $Email;
$Body .= "\n";
$Body .= "Message: ";
$Body .= $Message;
$Body .= "\n";

// send email 
$success = mail($EmailTo, $Subject, $Body, "From: <$EmailFrom>");

// redirect to success page 
if ($success)
{
    $result = array('success' => true);
}
else
{
    $result = array('success' => false, 'message' => 'Something happened');
    header($_SERVER['SERVER_PROTOCOL'] . ' 500 Internal Server Error', true, 500);
}
  echo json_encode($result);
?> 
```

当我提交表单时，我被重定向到显示以下内容的页面：

```
{"success":true} 
```

当我应该保持在同一页面上并且只是提醒良好时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:00:58.483

我认为这里的问题出在您的脚本中，从您描述的行为来看，您的 PHP 正在完成这项工作。

我已经根据 PHP 代码对 ajax 调用进行了一些更正，试试这个看看是否有帮助。

```
$.ajax({
        url: 'contactengine.php', //removed ./ - that's wrong I think
        type: 'POST',  //you are accessing $_POST not $_GET in the PHP file
        data: $('myform').serialize(), //you need to send some data atleast
        dataType: 'JSON',
        success: function(response) {
                        alert("GOOD");
                },
        error: function() {
                        alert("BAD");
                }
    }); 
```

我所做的是从您的 URL 的前面删除 -对于根目录或从当前目录开始的一个目录，`./`它应该什么都不是。如果该文件与您的页面位于同一目录中，请像我所做的那样保留它。`/``../`

我已将类型从 GET 更改为 POST - 您正在脚本中访问 PHP $_POST 全局变量，因此 PHP 会一直在错误的位置查找变量。

最后但并非最不重要的一点是，我已经放入了一些`data`。您需要传入 PHP 期望的那些变量——所以我使用了一个`serialize()`调用。替换 jQuery 选择器，使其以您的表单为目标，并将表单中的所有内容传递给 PHP。

有关 jQuery ajax 函数的更多详细信息，请参见此处：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T22:54:03.433

## 数据在哪里？

另外，您将请求类型定义为 GET，但也将它们读取为 POST。在里面发送这样的数据并将请求类型更改为发布

```
 $.ajax({
        url: './contactengine.php',
        type: 'POST',
        data: { variable1: "value1", .... }
        dataType: 'JSON',
        success: function(response) {
                        alert("GOOD");
                },
        error: function() {
                        alert("BAD");
                }
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T23:33:47.097

Is your code that is calling the ajax function attached to a button on a form? It sounds like you are doing a regular non-ajax form submit right after the ajax call. You can try changing the onsubmit or onclick function that is running the ajax request to return false, and I think that should fix it.

# iphone - iOS 获取子视图的旋转

> ID：10254515
> 
> 赞同：0
> 
> 时间：2012-04-20T22:50:05.290
> 
> 标签：iphone, objective-c, ios, uiview, subview

我正在使用它的属性`CGAffineTransformMakeRotation`来旋转子视图。`transform`稍后，我需要找出子视图旋转了多远。我意识到我可以简单地使用 int 来跟踪这一点，但是有没有一种简单的方法来获取子视图的当前旋转？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T23:21:46.773

`CGAffineTransformMakeRotation`被[明确定义](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/func/CGAffineTransformMakeRotation)为返回一个矩阵，其中 cos(angle) 在变换的`a`值中， sin(angle) 在`b`等（并且，鉴于变换的工作方式，这是它真正可以做的唯一事情）。

因此，您可以通过做一些简单的反三角函数来计算当前的旋转。`atan2`可能是要使用的东西，因为它会自动适当地找出象限。

所以，例如

```
- (float)currentAngleOfView:(UIView *)view
{
    CGAffineTransform transform = view.transform;
    return atan2f(transform.b, transform.a);
} 
```

因为这将做一个反正切，这将涉及以适当的方式划分`a`和`b`字段，即使您应用缩放（只要它与每个轴相同）或平移，该方法仍将继续工作。

如果您想应用更复杂或任意的转换，那么事情会变得更加复杂。你会想看看如何计算正态矩阵。从记忆中，我认为您会想要辅助工具，它听起来和听起来一样有趣。

# django - 复数除以月

> ID：10254520
> 
> 赞同：0
> 
> 时间：2012-04-20T22:50:52.650
> 
> 标签：django, sum

楷模：

```
class Category(models.Model):
  name = models.CharField(max_length=100)

class Operation(models.Model):
  date = models.DateField()
  value = models.DecimalField(max_digits = 9, decimal_places = 2)
  category = models.ForeignKey(Category, null = True)
  comments = models.TextField(null = True) 
```

现在我想创建一个包含 13 列的视图：

类别名称 | -11 | -10 | -9 | ... | -1 | 0

例如。

...食物.. | $123.00 | 100.14 美元 | ... | $120.13| 54.12
美元。衣服。| 555.23 美元 | 232.23 美元 | ... | $200.12| 84.44 美元

例如，其中 123.00 美元是 11 个月前制造的食品类别的运营价值总和，100.14 美元 - 10 个月前等等 - 54.12 美元是当月的总和，555.23 => 相同但类别服装...

我搜索了很多，但大多数示例都很简单 - 没有相关类（类别）

答案1建议后的正确答案：

```
def get_month_sum_series(self):
  import qsstats, datetime
  from django.db.models import Sum
  qss = qsstats.QuerySetStats(self.operation_set.all(), date_field='date', aggregate_field='value',aggregate_class=Sum)
  today = datetime.date.today()
  year_ago = today - datetime.timedelta(days=365)
  return qss.time_series( start_date=year_ago, end_date=today, interval='months') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T04:17:01.763

看看[django-qsstats](https://github.com/mcroydon/django-qsstats)。它具有一项`time_series`功能，可让您在一个请求中始终获取整个系列的数据。在您的情况下，我会在中创建一个方法`Category`，例如：

```
def price_series(self):
    return qsstats.time_series(queryset=self.operation_set.all(), start_date=year_ago, end_date=now, interval='months') 
```

当然，您需要设置`year_ago`和`now`变量（例如，使用`datetime`模块函数）。

# yui - YUI3 测试断言可以显示失败的行号吗？

> ID：10254522
> 
> 赞同：1
> 
> 时间：2012-04-20T22:51:06.630
> 
> 标签：yui, yui3

我刚开始使用 YUI3 测试模块 (http://yuilibrary.com/yui/docs/test/)。

我有带有许多验证状态的断言的测试用例。如果其中一个断言失败，则 TestConsole 指示断言失败，但不指示测试中的许多断言中的哪一个失败。让失败消息报告行号会很棒。

浏览器异常实际上包含了JS失败的行号，但是YUI3的Test类过滤掉了这个并抛出了自己的异常，这个异常似乎不包含行号。有没有一种简单的方法来添加这个报告，同时仍然利用 YUI3 测试类作为工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T16:26:57.267

## 我将从 tl;​​ 博士开始

YUI3 没有提供任何内在的方式来显示失败测试的行号。我想可以操纵 Error 构造函数以便您可以询问它们；但是，问题是 Error.lineNumber 仅在某些浏览器中受支持（我相信它仅适用于 Mozilla）。

即使这确实有效，您最终也会意识到这有点令人费解。您必须始终确保执行以下操作：

```
throw new Error*(...); 
```

在您的调用代码中，您总是必须这样做：

```
try {...} catch(e) { /* e.lineNumber */ } 
```

即使这一切都奏效并且您愿意这样做，我也不会推荐它。

## 真正的答案

问题的根源在于您的测试方法中似乎有多个断言。试图务实的开发人员有时会告诉您“每个测试方法一个断言”是不合理和教条的。认为每个测试方法的多个断言都很好是非常有吸引力的......直到它不是。

我敢肯定，有时多个断言会更好，但我还没有看到。我已经测试多年了，这就是我发现的：

1.  我尝试了每个方法的多个断言，每次我都被不知道哪个断言失败的问题所困扰。这里没有货物崇拜……我都试过了，在这两种方法中，只有一种没有咬我。
2.  每个测试一个断言会迫使您真正考虑测试什么/如何测试。

阅读：

*   [测试：每个测试一个断言](http://blog.jayfields.com/2007/06/testing-one-assertion-per-test.html)
*   [每个测试一个断言](http://www.artima.com/weblogs/viewpost.jsp?thread=35578)

# apache-flex - 没有自动完成和 f3 不起作用

> ID：10254524
> 
> 赞同：0
> 
> 时间：2012-04-20T22:51:14.650
> 
> 标签：apache-flex, flash-builder

我的 Flashbuilder 4.6 它不工作。f3 按钮不起作用，自动完成功能也不起作用。有没有其他人有这个问题？知道如何解决吗？

我正在检查以确保我的键盘没有损坏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:11:26.420

根据我们的评论；听起来您的项目不知何故失去了“Flash Builder”的性质。

在 Windows 中，您可以右键单击项目，应该有一个“添加/更改项目类型”选项。您可能需要从项目类型列表中选择“添加 Flex 项目类型”。

如果这不起作用，您可能需要从头开始创建一个新项目。

# algorithm - Dijkstra 算法不生成最短路径？

> ID：10254542
> 
> 赞同：2
> 
> 时间：2012-04-20T22:52:38.497
> 
> 标签：algorithm, graph-theory, shortest-path, dijkstra

我正在使用 Dijkstra 算法解决最短路径问题。我遇到了麻烦，因为该算法应该提供最短路径，但是在运行该算法后，我手动得到了一条短路路径。这只是该算法的副产品吗？

我试图生成的路径来自 a -> z

![无标记图](../Images/c478aabfc43d2749db84384914cff557.png)

这是我应用算法得到的路径，在我访问的每个顶点处采取最短距离跳跃：

```
 2    4    2    2    1    2    1    1    8      = 23
a -> d -> g -> k -> r -> n -> q -> p -> t -> z 
```

![标记图](../Images/bc9dae3cf8431fa0dfa2a0a19295ddbf.png)

这让我很困惑，因为如果我走这条路：

```
 4    2    2    2    2    2    2     = 16
a -> c -> f -> i -> m -> p -> s -> z 
```

我得到的距离比算法生成的距离小 5。

我是不是在什么地方走错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T23:01:55.247

看起来您误解了 Dijkstra 算法的工作原理。而不是在每个节点上取权重最小的边，你总是需要考虑到起点（节点$a$）的总距离。您维护一个正在考虑的所有可能路径的堆，它从没有边的起始节点开始，并通过添加所有路径来扩展，节点的每个传出边都添加到您当前正在考虑的每个步骤的路径中。

那是一堆乱七八糟的词，试图总结你哪里出错了。我建议重新阅读 Dijkstra 算法的工作原理：[http ://en.wikipedia.org/wiki/Dijkstra%27s_algorithm](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm)

# javascript - 如何将图像路径从 AJAX 调用传递给 div 标签

> ID：10254543
> 
> 赞同：1
> 
> 时间：2012-04-20T22:52:41.413
> 
> 标签：javascript, jquery

我有此呼叫的 AJAX 响应

```
<script type="text/javascript">
$(document).ready(function(){
    $.ajax({
        url  : '<%=getChartData%>',
        success : function(data){

            document.write(data);

             $.each(data, function(index, item) {

                 $('img').attr('src',data.item);

              });

        }
    });

});
</script>

[E:\li\1.jpg,E:\li\2.jpg,E:\li\10.jpg]   (**AJAX Response** ) 
```

使用上面显示的已获得响应，我正在尝试替换我的所有 img 标签以包含上述动态源。

但这不起作用，任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:03:26.170

我猜返回的数据是一个数组，并且我假设您已经知道每个结果中都包含一个驱动器号，如果它不应该存在，则必须将其删除。像这样的东西应该在前十个图像标签中插入图像？

```
$.ajax({
    url  : '<%=getChartData%>',
    success : function(data){
       $.each(data, function(index, item) {
          $('img').eq(index).attr('src', item);
       });
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:03:58.997

也许这样的事情可以帮助你：

```
var i = 0;
$("img").each(function(){
    if(data[i])
        $(this).attr("src", data[i++])
}) 
```

# android-emulator - 证书到期

> ID：10254544
> 
> 赞同：0
> 
> 时间：2012-04-20T22:52:58.667
> 
> 标签：android-emulator

由于“生成最终存档时出错：调试证书已于 2012 年 4 月 15 日下午 3:15 过期”，我无法再在 Android 模拟器上启动我的应用程序。我怎样才能获得另一个证书？为什么我需要一个本应是免费软件的软件？

提前谢谢你，玛丽亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T07:42:38.027

删除 ~/.android/debug.keystore 下的调试证书；

当您下次尝试构建调试包时，Eclipse 插件应该会生成一个新证书。您可能需要清理然后构建以生成证书。

# git - 带笔记本电脑/台式机的 aptana 开发环境设置

> ID：10254547
> 
> 赞同：0
> 
> 时间：2012-04-20T22:53:17.597
> 
> 标签：git, aptana, development-environment

您将如何**正确**设置台式机（win7）和 mac osx 笔记本电脑以使用 GIT 在 Aptana 中工作？ *我认为我做错了。*

我相信我的问题是在机器之间切换时，每次推/拉时都会覆盖“.project”文件。这会导致删除项目、添加项目、conf git、pull、dev、push 的不断循环。

示例：我在桌面上开发，推送到 repo（我的服务器），下拉到笔记本电脑，aptana 踢出一个错误，指出项目文件已损坏且无法打开。如果我在笔记本电脑上开发并拉到桌面，反之亦然。

我尝试了 gitignore，但它不起作用。

这已经持续了 3 天，我在 git/aptana/project 疯狂中盘旋。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:02:55.610

你不应该版本`.project`. `.gitignore`在您的项目根目录中创建一个文件

```
.project 
```

但是由于该文件已经版本化，您也需要将其从存储库中删除。`.gitignore`仅影响“新”提交，但不涉及现有提交

```
git rm --cached .project 
```

# android - 自定义标题中的背景图片

> ID：10254552
> 
> 赞同：0
> 
> 时间：2012-04-20T22:54:29.277
> 
> 标签：android, android-layout

我搜索并找不到我的问题独有的解决方案。我需要用背景图像替换下面的背景颜色。非常感谢您的帮助。

**编辑：问题解决了。我试图编辑错误的 xml 文件。**

```
<resources>
    <style name='CustomTitleBackground'>
        <item name='android:background'>#3b5998</item>
    </style>
    <style name='CustomTheme' parent='android:Theme'>
        <item name='android:windowTitleSize'>45dip</item>
        <item name='android:windowTitleBackgroundStyle'>@style/CustomTitleBackground</item>
     </style>
</resources> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T22:59:41.163

你不能这样做：

```
<style name='CustomTitleBackground'>
  <item name='android:background'>@drawable/my_background_image</item>
</style> 
```

?

# javascript - 将选择表单的元素发送到另一个表单

> ID：10254553
> 
> 赞同：1
> 
> 时间：2012-04-20T22:54:30.990
> 
> 标签：javascript

这是我在这里的第一篇文章，如果我错了地方，我很抱歉。如果第一个表单设置为数组，我的困难是查看第一个选择表单的元素到另一个表单。目标是将选择表单的元素发送到另一个表单，然后将它们记录在 db MySQL 上，这将在 html 页面上显示它们。我在这个论坛中找到了如何创建两个选择表单并添加'n删除项目的过程，然后使用 MySQL 的命令 .implode 可以加入元素并在 db 上插入多个项目并在页面上查看它们。但是，如果我将名称的选择表单设置为数组，它就不起作用。我使用以下脚本有两个选择表单：

```
<script language="javascript">
function getOpt(select1,select2)
{
for (bCnt=0;bCnt<select1.length;bCnt++)
{
if (select1.options[bCnt].selected)
{
newOpt=new
Option(select1.options[bCnt].text,select1.options[bCnt].value,false,false);
select2.options[select2.length]=newOpt;
}
}
}

function remOpt(select2)
{
for (bCnt=0;bCnt<select2.length;bCnt++)
{
if (select2.options[bCnt].selected)
select2.options[bCnt]=null;
}
}
</script> 
```

然后选择形式：

```
<table border="0">
<tr>
<td>
<label for="id">List:<br></label>
<select name="oneS" id="select_role" size=20 required multiple="multiple"/>
<option value="101">101</option>
<option value="102">102</option>
<option value="103">103</option>
<option value="104">104</option>
<option value="105">105</option>
<option value="106">106</option>
</select>
</td>
<td>
<input type="button" value="Add"onClick="getOpt(this.form.oneS,this.for m.twoS)"><br>
<input type="button" value="Remove"onClick="remOpt(this.form.twoS)">
</td>
<td>
<label for="id">Members List:<br></label>
<select name="twoS" id="select_role" size=20 multiple="multiple"/>
</select>
</td>
</tr>
</table> 
```

如果注释脚本，按钮的一部分，第二种形式并更改行：

```
<select name="oneS" id="select_role" size=20 required multiple="multiple"/> 
```

在

```
<select name="oneS[]" id="select_role" size=20 required multiple="multiple"/> 
```

我有任何问题，可以在db上记录第一个选择表单的项目并在页面上查看它们。但这不是我的目标，我必须使用 2 选择表单。有没有人可以帮助我？多谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:20:41.110

我有你使用 jQuery，这里是：

```
$(document).ready(function()
{
$('.add').click(function(event)//this is your first form, with the id "select_role"
{
$('#select_role2).html($(this).html()+"add whatever html code  you want to insert into here");
});
}); 
```

对删除项目使用相同的想法。然后使用 $.ajax 或 $.post 将数据发送到 mysql 或使用变量来存储从第二次选择中添加或删除的所有 html。

只需包含 jQuery 库，您就可以全部排序。我已经很久没有写过原始的 JAvascript 了，但这将在 jQuery 的帮助下工作。不要再对两个元素使用相同的 id。id 必须是唯一的。

然后假设您插入一大堆选项，您可以`$('#your_form_id).serialize()`在`$.ajax`调用中使用来获取元素数组，然后使用 PHP 技术解析 name="insertedoption[]" />。我不完全确定我帮助你太多，因为你需要阅读一些东西，但这是一个关于如何做你需要做的事情的想法。

# php - PHP PDO 准备好的语句和值绑定给出了无效的参数号错误

> ID：10254558
> 
> 赞同：2
> 
> 时间：2012-04-20T22:54:57.873
> 
> 标签：php, mysql, pdo

我对 PHP PDO 库和准备好的语句有一点问题。据我所见，下面的准备好的语句应该可以工作，但它没有，而是我得到：“PDOStatement::execute(): SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens” .

我本节的 PHP 代码如下所示：

```
 $sql = 'INSERT INTO '.POLYGON_TABLE.' (user_id, polygon, polygon_type) VALUES (:userId, PolygonFromText(\'POLYGON((:polygonArea))\'), :polygonType)';

    $sth = $this->pdo->prepare($sql);
    $sth->bindValue(':userId', $polygon->getUserId(), \PDO::PARAM_INT);
    $sth->bindValue(':polygonArea', $polygon->getPolygonAsText(), \PDO::PARAM_STR);
    $sth->bindValue(':polygonType', $polygon->getPolygonType(), \PDO::PARAM_STR);

    if($sth->execute()) {
        return true;
    } else {
        return false;
    } 
```

我已经完成了 $polygon->getUserId()、$polygon->getPolygonAsText() 和 $polygon->getPolygonType() 的 var_dump 并得到以下信息：

```
 string(1) "1"
    string(226) "53.897910476098765 -1.739655277929728, 53.865530797116 -2.080231449804728, 53.67235280490181 -2.006073734960978, 53.68862047002787 -1.621552250585978, 53.89305512284903 -1.539154789648478, 53.897910476098765 -1.739655277929728"
    string(7) "commute" 
```

问题在于 $polygon->getPolygonAsText() 注释掉这个特定的 bindValue 调用，并且 SQL 语句中的 PolygonFromText(\'POLYGON((:polygonArea))\') 会导致查询工作。

我现在完全不知所措。有人知道这里有什么问题吗？我看不出 $polygon->getPolygonAsText() 中包含的文本有什么问题。我已经到处寻找解决方案，今晚花了几个小时修补代码，但无济于事。

我什至尝试了这 2 个堆栈溢出主题中的建议，但它们也没有奏效：

*   [PDO Prepared Statement 上的参数号无效](https://stackoverflow.com/questions/2105015/invalid-parameter-number-on-pdo-prepared-statement)
*   [PHP PDO 准备好的语句](https://stackoverflow.com/questions/1457131/php-pdo-prepared-statements)

任何帮助将非常感激...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T23:04:43.823

您是否尝试将整个表达式作为绑定值传递？

```
$sql = 'INSERT INTO '.POLYGON_TABLE.' (user_id, polygon, polygon_type) VALUES (:userId,  PolygonFromText(:polygonArea), :polygonType)';

$sth = $this->pdo->prepare($sql);
$area = sprintf("POLYGON((%s))", $polygon->getPolygonAsText()); 
$sth->bindValue(':userId', $polygon->getUserId(), \PDO::PARAM_INT);
$sth->bindValue(':polygonArea', $area, \PDO::PARAM_STR);
$sth->bindValue(':polygonType', $polygon->getPolygonType(), \PDO::PARAM_STR); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-20T23:12:58.213

您似乎正在尝试在字符串中使用命名参数：

```
PolygonFromText(\'POLYGON((:polygonArea))\') 
```

这类似于做这样的事情：

```
UPDATE foo SET bar = 'blah blah :wontwork blah blah' 
```

您应该尝试的是在查询中绑定整个字符串：

```
PolygonFromText(:polygonArea) 
```

然后在绑定值中包含字符串的其余部分：

```
$sth->bindValue(':polygonArea', 'POLYGON((' . $polygon->getPolygonAsText() . '))', \PDO::PARAM_STR); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T23:07:00.687

最后的手段你可以这样做：

```
$sql = "INSERT INTO ".POLYGON_TABLE." (user_id, polygon, polygon_type) "
     ."VALUES (:userId, PolygonFromText('POLYGON(". $polygon->$getPolygonAsText
     .")'),:polygonType)"; 
```

但我认为你应该`?`先尝试参数，看看情况如何。

```
$sql = "INSERT INTO ".POLYGON_TABLE." (user_id, polygon, polygon_type) "
     ."VALUES (?, PolygonFromText('POLYGON(?)'), ?);";
$data = array($polygon->getUserId(), $polygon->getPolygonAsText(), $polygon->getPolygonType());
$query->execute($data); 
```

顺便说一句，我也认为 POLYGON(?) 函数周围的那些单引号是狡猾的......通常你不引用方法调用吗？

# rally - 有条件地调整 Rally Cardboard UI 中的可见列

> ID：10254559
> 
> 赞同：2
> 
> 时间：2012-04-20T22:54:59.283
> 
> 标签：rally

所以我想允许用户有条件地在我构建的 Cardboard 应用程序中打开/关闭列。我有两个问题。我尝试在配置中使用 'columns' 属性，但我似乎无法找到允许基于属性显示所有列（选中所有复选框）的默认值，即。如果我根本不在配置对象中包含“列”（尝试为 null，[] 但显示 NO 列），则默认行为。

所以这就是我的第二个问题，如果没有默认值，是否有一种简单的方法可以只更改配置对象中的该值，或者我是否必须将整个变量封装在“if-else”语句中？最后，如果我必须手动构建字符串，我需要解析我们在投资组合对象上拥有的现有自定义属性（下拉列表）的值。我似乎无法正确理解 rally.forEach 循环语法。有人有一个简单的例子吗？谢谢 Dax - Autodesk 我在 Rally 的在线 SDK 中找到了一个示例，我可以对其进行修改以回答第二部分（这假定投资组合项目上有一个名为“ADSK 看板状态”的自定义属性并将值输出到控制台）：

```
 var showAttributeValues = function(results) {
         for (var property in results) {
            for (var i=0 ; i < results[property].length ; i++) {
              console.log("Attribute Value : " + results[property][i]);
            }
         }
     }; 

    var queryConfig = [];
    queryConfig[0] = {
            type: 'Portfolio Item', 
            key : 'eKanbanState', 
            attribute: 'ADSK Kanban State'
    };
    rallyDataSource.findAll(queryConfig, showAttributeValues); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T14:50:55.873

我认为使用上面的查询创建并传递给示例 showAttributeValues 回调的“结果”集合动态构建配置的代码看起来很像动态构建一组表列的示例，如下所示：

[Rally App SDK：有没有办法为表格设置可变列？](https://stackoverflow.com/questions/10130254/rally-app-sdk-is-there-a-way-to-have-variable-columns-for-table)

我正在设想如下内容：

```
 // Dynamically build column config array for cardboard config

            var columnsArray = new Array();

            for (var property in results) {
                for (var i=0 ; i < results[property].length ; i++) {
                  columnsArray.push("'" + results[property][i] + "'");
                }
             }

            var cardboardConfig = {
            {
                attribute: 'eKanbanState',
                columns: columnsArray,
                // .. rest of config here
            }

            // .. (re)-construct cardboard... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:03:13.310

rally.forEach 循环第一个参数中的每个键，并且每次都会执行作为第二个参数传递的函数。它适用于对象或数组。

对于数组：

```
var array = [1];
rally.forEach(array, function(value, i) {
    //value = 1
    //i = 0
}); 
```

对于一个对象：

```
var obj = {
    foo: 'bar'
};
rally.forEach(obj, function(value, key) {
    //value = 'bar'
    //key = 'foo'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T20:15:56.410

听起来你正在构建一个整洁的电路板。您必须为板提供每次显示的列列表（销毁旧板并创建新板）。

示例配置：

```
{
    attribute: 'ScheduleState'
    columns: [
        'In-Progress',
        'Completed'
    ]
} 
```

# c# - C# Excel 连接

> ID：10254562
> 
> 赞同：0
> 
> 时间：2012-04-20T22:55:13.777
> 
> 标签：c#, excel, connection

你好我需要连接到一个excel文件来更新一个列我有这个代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using Excel = Microsoft.Office.Interop.Excel;

namespace Excel
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void btnUpdate_Click(object sender, EventArgs e)
        {
            try
            {
                System.Data.OleDb.OleDbConnection MyConnection;
                System.Data.OleDb.OleDbCommand myCommand = new System.Data.OleDb.OleDbCommand();
                string sql = null;                
                MyConnection = new System.Data.OleDb.OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source='c:\farm.xls';Extended Properties=Excel 8.0;");
                MyConnection.Open();
                myCommand.Connection = MyConnection;
                sql = "Update [Sheet1$] set name = 'FARM GDL' where COMERCIO like 'FARM GUADALAJARA'";
                myCommand.CommandText = sql;
                myCommand.ExecuteNonQuery();
                MyConnection.Close();
                MessageBox.Show("Success");
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());
            }
        }
    }
} 
```

但是有些东西不起作用，当我运行它时，它会打开连接

我可以？？？请，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T23:05:22.800

在上面的连接字符串中发现了一些错误：

以这种方式更改连接字符串：

```
MyConnection = new System.Data.OleDb.OleDbConnection("provider=Microsoft.Jet.OLEDB.4.0;Data Source='c:\\farm.xls';'Extended Properties=Excel 8.0;HDR=YES'"); 
```

1.  \ 字符有特殊含义，需要在路径字符串中加倍或以@为前缀的整个字符串
2.  如果您的 Excel 文件在第一行有标题，则应将其添加到连接字符串 HDR=YES;
3.  扩展属性应该用单引号括起来

如果您的 Excel 文件没有标题作为第一行，则整个查询会更改，因为您不能使用`name`and`COMERCIO`作为列名。相反，您需要使用字母 F 后跟列号（as `set F1 = 'FARM GDL' where F2 like '...'`）

# c++ - C预处理器中的功能绑定操作

> ID：10254567
> 
> 赞同：1
> 
> 时间：2012-04-20T22:55:47.140
> 
> 标签：c++, c, bind, c-preprocessor

我有一个这样的宏（它来自一个实际有用的用例，但我一直在玩简化的案例）：

```
#define MY_MACRO(M)  M(3) M(5) M(7)
#define MULTIPLY_BY_2(A)  (2*A) 
```

然后我可以写

```
MY_MACRO(MULTIPLY_BY_2)
// -> (2*3) (2*5) (2*7) 
```

凉爽的！我想要的是这样的：

```
#define MULTIPLY(A,B) (A*B)
MY_MACRO(BIND(MULTIPLY, 2)) 
```

得到与上面相同的结果。BIND 可能是什么？我已经尝试了一些技巧，并且可以报告这几乎是可能的（我觉得这很神奇）。但它并不漂亮，也不一般。这能做*好吗*？（即纯粹在 CPP 中构建一些真正的功能性设施？）绑定一个绑定宏可以做得很好吗？

也许我真正要问的是，您知道的任何预处理器库中是否有这样的工具？我在 Boost 中没有找到类似的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T23:02:12.737

对不起，你不能要求宏编程漂亮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T08:25:09.560

不平衡的括号可以做一种绑定操作，但是调用语法与普通宏不同。它需要一个额外的近亲。

```
#define BIND( op, arg ) op ( arg,
#define MULTIPLY( a, b ) ( (a) * (b) )

#define MULTIPLY_BY_2 BIND( MULTIPLY, 2 )

MULTIPLY_BY_2( 5 )) // note two close parens 
```

[http://ideone.com/EQvs2](http://ideone.com/EQvs2)

您可以尝试定义更多的宏来适当地生成关闭括号，但可能有更好的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T07:47:05.567

我不确定我是否完全理解您想要实现什么样的功能，但以下内容适合您的示例：

```
#define MULTIPLY_2(X) (2*(X))
#define POW_2(X) ((X)*(X))
#define BIND(OP, NUM) OP ## _ ## NUM 
```

for `MULTIPLY_2`& Co 请注意，您总是在参数周围加上括号，以确保它具有您想要的评估顺序。还要注意，一般策略参数可能会被多次评估，如果表达式包含副作用，这可能是一个严重的错误。

最好将您的基本操作作为内联函数并使用宏组合函数调用

```
#define MULTIPLY_2(X) multiply2(X)
#define POW_2(X) pow2(X) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-01T05:22:09.623

其实，是。在[Order library](https://github.com/VesaKarvonen/order-pp)中，您可以这样表达上述内容：

```
#include <order/interpreter.h>

#define ORDER_PP_DEF_8my_mac ORDER_PP_FN( \
8fn(8M, 8seq(8ap(8M, 3), 8ap(8M, 5), 8ap(8M, 7))) )

#define ORDER_PP_DEF_8bind ORDER_PP_FN( \
8fn(8F, 8A, 8fn(8X, 8ap(8F, 8A, 8X)) ) )

#define ORDER_PP_DEF_8multiply ORDER_PP_FN( \
8fn(8L, 8R, 8times(8L, 8R)) )      // (already built-in as 8times)

ORDER_PP (
    8my_mac(8bind(8multiply, 2))   // -> (6)(10)(14)
) 
```

那是手动定义`bind`and `multiply`; Order 本身也支持 ML 风格的部分评估，所以你可以写：

```
ORDER_PP ( 8my_mac(8times(2)) )    // -> (6)(10)(14) 
```

除了由 C 预处理器强加的稍微奇怪的语法之外，该语言基本上是一种相当简单的 Lisp/ML 混合体，支持许多常见的函数式惯用语。

# c# - 更改默认 ASP MVC 请求标头以添加您自己的值

> ID：10254570
> 
> 赞同：9
> 
> 时间：2012-04-20T22:56:00.730
> 
> 标签：c#, asp.net-mvc, http-headers

我试图将我的所有 ASP MVC HTTP 响应标头更改为默认情况下具有另一个值，以便在我的博客应用程序中实现 Pingback 自动发现。

默认标题（在 Cassini 上）是：

```
Cache-Control   private
Connection  Close
Content-Length  20901
Content-Type    text/html; charset=utf-8
Date    Fri, 20 Apr 2012 22:46:11 GMT
Server  ASP.NET Development Server/10.0.0.0
X-AspNet-Version    4.0.30319
X-AspNetMvc-Version 3.0 
```

我想要一个额外的附加值：

```
X-Pingback: http://localhost:4912/pingback/xmlrpcserver 
```

我用谷歌搜索了一下，找到了一个很好的解决方案： - 从**ActionFilterAttribute**派生并覆盖**OnResultExecuted**方法：

```
public class HttpHeaderAttribute : ActionFilterAttribute
    {

        public string Name { get; set; }
        public string Value { get; set; }

        public HttpHeaderAttribute(string name, string value)
        {
            Name = name;
            Value = value;
        }

        public override void OnResultExecuted(ResultExecutedContext filterContext)
        {
            filterContext.HttpContext.Request.Headers.Add(Name, Value);
            base.OnResultExecuted(filterContext);
        }

    } 
```

然后我简单地将属性放在我的 Controllers 方法上：

```
[HttpHeader("X-Pingback","http://localhost:4912/pingback/xmlrpcserver")]
        public ActionResult Index()
        {
            var allArticles = _repository.GetPublishedArticles(SortOrder.desc);
            return View(allArticles);
        } 
```

当我运行应用程序时，我收到以下错误： ![在此处输入图像描述](../Images/478d5a1347f420c24d2a5e6cf158cd83.png)

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T19:21:02.493

我知道这篇文章很旧......但想指出虽然 OnResultExecuting 是执行此操作的正确方法，但原始帖子显示他正在尝试向请求添加标头。不能简单地将标头添加到请求中并期望它们出现在响应中。;-)

此外，将标头添加到响应的正确方法......也适用于 Cassini ......是使用以下内容：

```
filterContext.HttpContext.Response.AddHeader("X-My-Request-Header", "works in cassini"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-21T00:54:33.623

我相信您的问题可能只是您尝试修改标题为时已晚，因为您是在`OnResultExecuted`. 尝试覆盖`OnResultExecuting`。

[http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.onresultexecuting.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute.onresultexecuting.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T23:24:09.170

这可能会也可能不会起作用（显然，如果它不起作用，我会删除未来用户的答案）。从异常中听起来`Operation is not supported by this platform`，Cassini 许多不支持自定义标头（这会很奇怪，但有可能）。我的建议是确保您使用的是[Visual Studio 2010 SP1](http://www.microsoft.com/download/en/details.aspx?id=23691)，然后安装[IIS Express](http://www.microsoft.com/download/en/details.aspx?id=1038)（这是对 Cassini 的升级，更像是真正的 IIS），然后将您的项目切换为使用 IIS Express，看看您是否得到同样的例外。

![从 Cassini 切换到 IIS Express](../Images/74dfdba308ae36d3b02b3bcc1459578f.png)

此外，您可能需要查看[为什么 HttpCacheability.Private 会抑制 ETag？](https://stackoverflow.com/questions/32824/why-does-httpcacheability-private-suppress-etags)因为它也可能为您提供替代解决方案。

# ios - 在 UIWebView 中导入 RTF 文件（内容可编辑）

> ID：10254572
> 
> 赞同：2
> 
> 时间：2012-04-20T22:56:11.023
> 
> 标签：ios, uiwebview, attachment, rtf

我声明我的应用程序（富文本编辑器）能够打开任何 RTF 文件（例如，来自电子邮件附件）。当用户选择附件时，应用程序委托向 UiwebView 控制器发送“loadContent: (NSURL *) url”消息。在接收器中，我获取 url 并使用 UIWebView 加载 RTF 文件

```
- (void) loadContent: (NSURL *) passedURL
{
    if (passedURL) { 
        [self.myWebView loadRequest:[NSURLRequest requestWithURL:passedURL]];
    } else {
        NSBundle *bundle = [NSBundle mainBundle];
        NSURL *indexFileURL = [bundle URLForResource:@"index" withExtension:@"html"];
        [self.myWebView loadRequest:[NSURLRequest requestWithURL:indexFileURL]];

    }
} 
```

这样做，一切顺利，“myWebView”显示 RTF 文件的内容。问题是这个视图应该是内容可编辑的，并且代码应该包含我在“index.html”捆绑文件中的一些javascript。我在启动应用程序时加载。所以我添加了一些代码来提取从 RTF 文件创建的 HTML 代码，以便以后能够重新创建完整的代码，将提取的代码插入到这样的标签中：

```
<div id="content" contenteditable="true"> imported html from rtf should be there</div> 
```

我修改了 loadContent 方法来获得它。

```
- (void) loadContent: (NSURL *) passedURL
{
    if (passedURL) { 
        [self.myWebView loadRequest:[NSURLRequest requestWithURL:passedURL]];
        NSString *dum=[self.myWebView stringByEvaluatingJavaScriptFromString:@"document.body.innerHTML;"];
        NSLog(@"%@",dum);
    } else {
        NSBundle *bundle = [NSBundle mainBundle];
        NSURL *indexFileURL = [bundle URLForResource:@"index" withExtension:@"html"];
        [self.myWebView loadRequest:[NSURLRequest requestWithURL:indexFileURL]];

    }
} 
```

查看 NSLog 的结果，我只得到以下 html

```
<div id="content" contenteditable="true">Hello folks</div> 
```

在我加载 rtf 文件**之前**，这是 myWebView 的 HTML 内容...

你知道发生了什么吗？为什么*dum*显示以前的代码，而显示的 myWebView 显示的是新的？是不是因为loadRequest是在单独的线程中执行的，在执行下一条指令时，myWebView还包含之前的代码？

谢谢

[编辑] 我也尝试在 webViewDidFinishLoad: 委托方法中对 webView 的内容进行 NSLog 记录，但得到相同的结果：在我打开 RTF 附件文件之前这个 webView 的内容。是否可以以同步方式发出加载请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:21:07.500

这是因为 loadRequest 是异步的。在尝试该 NSLog 之前，您需要等待加载完成。查看[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIWebViewDelegate)文档。在 webViewDidFinishLoad: 内部/之后尝试 NSLog：你应该会得到更好的结果。

# php - 如何从模型中获取 Zend\Db\Adapter 实例？(ZF2)

> ID：10254574
> 
> 赞同：2
> 
> 时间：2012-04-20T22:56:36.160
> 
> 标签：php, model-view-controller, zend-framework, zend-framework2

我正在创建用于管理数据库实体的抽象模型 - 我已经拥有`EntityAbstract`,`EntitySetAbstract`和一个`ManagerAbstract`模型。在我的 ManagerAbstract 模型中，我需要一个`Zend/Db/Adapter`实例来创建一个`Zend\Db\TableGateway`.

如何将适配器的主实例拉到我的`ManagerAbstract`? 在 ZF1 中，我可以使用 Zend_Registry 实现这一点。

如果这不是 ZF2 中做事的正确方式，我很想听到这种事情的正确方式。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T19:32:50.033

使用依赖注入容器，`Zend\Di`. 如果您想在一些工作代码中四处寻找，ZfcUser 项目会执行此操作[。](https://github.com/ZF-Commons/ZfcUser)

或者，基本方法是这样的（代码未经测试！）：

首先：配置DI注入数据库连接信息：

*配置/自动加载/local.config.php：*

```
<?php
return array(
    'di' => array(
        'instance' => array(
        'Zend\Db\Adapter\Adapter' => array(
                'parameters' => array(
                    'driver' => 'Zend\Db\Adapter\Driver\Pdo\Pdo',
                ),
            ),
            'Zend\Db\Adapter\Driver\Pdo\Pdo' => array(
                'parameters' => array(
                    'connection' => 'Zend\Db\Adapter\Driver\Pdo\Connection',
                ),
            ),
            'Zend\Db\Adapter\Driver\Pdo\Connection' => array(
                'parameters' => array(
                    'connectionInfo' => array(
                        'dsn'            => "mysql:dbname=mydatabasename;host=localhost",
                        'username'       => 'myusername',
                        'password'       => 'mypassword',
                        'driver_options' => array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''),
                    ),
                ),
            ),
        ),
    ),
); 
```

其次，在你的模块`module.config.php`文件中，将适配器注入映射器：

*模块/我的/config/module.config.php：*

```
<?php
return array(
    'di' => array(

            // some config info...

            'My\Model\ManagerAbstract' => array(
                'parameters' => array(
                    'adapter'  => 'Zend\Db\Adapter\Adapter',
                ),
            ),

            // more config info...
    )
); 
```

最后，确保您的 ManagerAbstract 类可以接收注入：

*模块/My/src/My/Model/ManagerAbstract.php：*

```
<?php
namespace My\Model;

use Zend\Db\Adapter\Adapter;
use Zend\Db\Adapter\AdapterAwareInterface;

abstract class ManagerAbstract implements AdapterAwareInterface 
{
    /**
     * @var Zend\Db\Adapter\Adapter
     */
    protected $adapter;

    // some code 

    public function setDbAdapter(Adapter $adapter)
    {
        $this->adapter = $adapter;
    }

    // some more code
} 
```

请注意，要使用任何子类，您需要通过 DIC 检索它或将映射器注入服务，然后将服务注入您要使用它的控制器（或其他服务）。

# c# - 我可以缓存部分执行的 LINQ 查询吗？

> ID：10254580
> 
> 赞同：7
> 
> 时间：2012-04-20T22:57:03.317
> 
> 标签：c#, linq

我有以下代码：

```
IEnumerable<KeyValuePair<T, double>> items =
    sequence.Select(item => new KeyValuePair<T, double>(item, weight(item)));
if (items.Any(pair => pair.Value<0))
    throw new ArgumentException("Item weights cannot be less than zero.");

double sum = items.Sum(pair => pair.Value);
foreach (KeyValuePair<T, double> pair in items) {...} 
```

`weight`一个在哪里`Func<T, double>`。

问题是我想`weight`尽可能少地被执行。这意味着它应该对每个项目最多执行一次。我可以通过将其保存到数组来实现这一点。但是，如果任何权重返回负值，我不想继续执行。

有什么方法可以在 LINQ 框架内轻松完成此任务？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T23:05:28.653

当然，这是完全可行的：

```
public static Func<A, double> ThrowIfNegative<A, double>(this Func<A, double> f)
{
    return a=>
    { 
      double r = f(a);  
      // if r is NaN then this will throw.
      if ( !(r >= 0.0) )
        throw new Exception(); 
      return r;
    };
}

public static Func<A, R> Memoize<A, R>(this Func<A, R> f)
{
    var d = new Dictionary<A, R>();
    return a=>
    {
        R r;
        if (!d.TryGetValue(a, out r))
        {
          r = f(a);
          d.Add(a, r);
        }
        return r;
    };
} 
```

现在...

```
Func<T, double> weight = whatever;
weight = weight.ThrowIfNegative().Memoize(); 
```

你就完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T23:06:27.767

一种方法是将异常移动到`weight`函数中，或者至少模拟这样做，通过执行以下操作：

```
Func<T, double> weightWithCheck = i =>
    {
        double result = weight(i);
        if (result < 0)
        {
            throw new ArgumentException("Item weights cannot be less than zero.");
        }
        return result;
    };

IEnumerable<KeyValuePair<T, double>> items =
    sequence.Select(item => new KeyValuePair<T, double>(item, weightWithCheck(item)));

double sum = items.Sum(pair => pair.Value); 
```

至此，如果有一个例外，你应该有它。但是，您确实必须枚举`items`，然后才能确保获得异常，但是一旦获得，您将不会`weight`再次调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T23:07:52.207

两个答案都很好（在哪里抛出异常，并记住函数）。

但是您真正的问题是每次使用时都会评估您的 LINQ 表达式，除非您强制它评估并存储为 List （或类似的）。只需更改此：

`sequence.Select(item => new KeyValuePair<T, double>(item, weight(item)));`

对此：

`sequence.Select(item => new KeyValuePair<T, double>(item, weight(item))).ToList();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T23:13:24.840

您可以使用 foreach 循环来做到这一点。这是一种在一个语句中执行此操作的方法：

```
IEnumerable<KeyValuePair<T, double>> items = sequence
    .Select(item => new KeyValuePair<T, double>(item, weight(item)))
    .Select(kvp =>
    {
        if (kvp.Value < 0)
            throw new ArgumentException("Item weights cannot be less than zero.");
        else
            return kvp;
    }
    ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-20T23:20:12.733

**不， LINQ**框架中已经没有任何东西可以执行此操作，但是您当然可以编写自己的方法并从 linq 查询中调用它们（正如许多人已经展示的那样）。

就个人而言，我要么`ToList`是第一个查询，要么是使用 Eric 的建议。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-03T21:36:42.337

除了其他答案建议的功能性记忆之外，您还可以对整个数据序列使用记忆：

```
var items = sequence
    .Select(item => new KeyValuePair<T, double>(item, weight(item)))
    .Memoize(); 
```

`Memoize()`（注意上面表达式末尾的方法调用）

数据记忆的一个很好的特性是它代表了`ToList()`or`ToArray()`方法的替代品。

功能齐全的实现非常复杂：

```
using System;
using System.Collections;
using System.Collections.Generic;
using System.Diagnostics;

static class MemoizationExtensions
{
    /// <summary>
    /// Memoize all elements of a sequence, e.g. ensure that every element of a sequence is retrieved only once.
    /// </summary>
    /// <remarks>
    /// The resulting sequence is not thread safe.
    /// </remarks>
    /// <typeparam name="T">The type of the elements of source.</typeparam>
    /// <param name="source">The source sequence.</param>
    /// <returns>The sequence that fully replicates the source with all elements being memoized.</returns>
    public static IEnumerable<T> Memoize<T>(this IEnumerable<T> source) => Memoize(source, false);

    /// <summary>
    /// Memoize all elements of a sequence, e.g. ensure that every element of a sequence is retrieved only once.
    /// </summary>
    /// <typeparam name="T">The type of the elements of source.</typeparam>
    /// <param name="source">The source sequence.</param>
    /// <param name="isThreadSafe">Indicates whether resulting sequence is thread safe.</param>
    /// <returns>The sequence that fully replicates the source with all elements being memoized.</returns>
    public static IEnumerable<T> Memoize<T>(this IEnumerable<T> source, bool isThreadSafe)
    {
        switch (source)
        {
            case null:
                return null;

            case CachedEnumerable<T> existingCachedEnumerable:
                if (!isThreadSafe || existingCachedEnumerable is ThreadSafeCachedEnumerable<T>)
                {
                    // The source is already memoized with compatible parameters.
                    return existingCachedEnumerable;
                }
                break;

            case IList<T> _:
            case IReadOnlyList<T> _:
            case string _:
                // Given source types are intrinsically memoized by their nature.
                return source;
        }

        if (isThreadSafe)
            return new ThreadSafeCachedEnumerable<T>(source);
        else
            return new CachedEnumerable<T>(source);
    }

    class CachedEnumerable<T> : IEnumerable<T>, IReadOnlyList<T>
    {
        public CachedEnumerable(IEnumerable<T> source)
        {
            _Source = source;
        }

        [DebuggerBrowsable(DebuggerBrowsableState.Never)]
        IEnumerable<T> _Source;

        [DebuggerBrowsable(DebuggerBrowsableState.Never)]
        IEnumerator<T> _SourceEnumerator;

        [DebuggerBrowsable(DebuggerBrowsableState.Never)]
        protected readonly IList<T> Cache = new List<T>();

        public virtual int Count
        {
            get
            {
                while (_TryCacheElementNoLock()) ;
                return Cache.Count;
            }
        }

        bool _TryCacheElementNoLock()
        {
            if (_SourceEnumerator == null && _Source != null)
            {
                _SourceEnumerator = _Source.GetEnumerator();
                _Source = null;
            }

            if (_SourceEnumerator == null)
            {
                // Source enumerator already reached the end.
                return false;
            }
            else if (_SourceEnumerator.MoveNext())
            {
                Cache.Add(_SourceEnumerator.Current);
                return true;
            }
            else
            {
                // Source enumerator has reached the end, so it is no longer needed.
                _SourceEnumerator.Dispose();
                _SourceEnumerator = null;
                return false;
            }
        }

        public virtual T this[int index]
        {
            get
            {
                _EnsureItemIsCachedNoLock(index);
                return Cache[index];
            }
        }

        public IEnumerator<T> GetEnumerator() => new CachedEnumerator<T>(this);

        IEnumerator IEnumerable.GetEnumerator() => GetEnumerator();

        internal virtual bool EnsureItemIsCached(int index) => _EnsureItemIsCachedNoLock(index);

        bool _EnsureItemIsCachedNoLock(int index)
        {
            while (Cache.Count <= index)
            {
                if (!_TryCacheElementNoLock())
                    return false;
            }
            return true;
        }

        internal virtual T GetCacheItem(int index) => Cache[index];
    }

    sealed class ThreadSafeCachedEnumerable<T> : CachedEnumerable<T>
    {
        public ThreadSafeCachedEnumerable(IEnumerable<T> source) :
            base(source)
        {
        }

        public override int Count
        {
            get
            {
                lock (Cache)
                    return base.Count;
            }
        }

        public override T this[int index]
        {
            get
            {
                lock (Cache)
                    return base[index];
            }
        }

        internal override bool EnsureItemIsCached(int index)
        {
            lock (Cache)
                return base.EnsureItemIsCached(index);
        }

        internal override T GetCacheItem(int index)
        {
            lock (Cache)
                return base.GetCacheItem(index);
        }
    }

    sealed class CachedEnumerator<T> : IEnumerator<T>
    {
        CachedEnumerable<T> _CachedEnumerable;

        const int InitialIndex = -1;
        const int EofIndex = -2;

        int _Index = InitialIndex;

        public CachedEnumerator(CachedEnumerable<T> cachedEnumerable)
        {
            _CachedEnumerable = cachedEnumerable;
        }

        public T Current
        {
            get
            {
                var cachedEnumerable = _CachedEnumerable;
                if (cachedEnumerable == null)
                    throw new InvalidOperationException();

                var index = _Index;
                if (index < 0)
                    throw new InvalidOperationException();

                return cachedEnumerable.GetCacheItem(index);
            }
        }

        object IEnumerator.Current => Current;

        public void Dispose()
        {
            _CachedEnumerable = null;
        }

        public bool MoveNext()
        {
            var cachedEnumerable = _CachedEnumerable;
            if (cachedEnumerable == null)
            {
                // Disposed.
                return false;
            }

            if (_Index == EofIndex)
                return false;

            _Index++;
            if (!cachedEnumerable.EnsureItemIsCached(_Index))
            {
                _Index = EofIndex;
                return false;
            }
            else
            {
                return true;
            }
        }

        public void Reset()
        {
            _Index = InitialIndex;
        }
    }
} 
```

更多信息和现成的 NuGet 包：[https ://github.com/gapotchenko/Gapotchenko.FX/tree/master/Source/Gapotchenko.FX.Linq#memoize](https://github.com/gapotchenko/Gapotchenko.FX/tree/master/Source/Gapotchenko.FX.Linq#memoize)

# nginx - Nginx 重写 unencodes url

> ID：10254583
> 
> 赞同：5
> 
> 时间：2012-04-20T22:57:34.333
> 
> 标签：nginx

似乎 Nginx 在与正则表达式一起使用时总是对 url 进行编码。我有一个重写规则：

```
location /api/ {
    rewrite /api/(.*)$ $1 break;
    proxy_pass http://127.0.0.1:8000/$1;
} 
```

我想从 usl 中删除 api，但保留路径的其余部分。路径的一部分是电子邮件地址someone@somewhere.com。我正在传递某人%40somewhere.com，但 Nginx 用 @ 符号将其转回。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-02-13T17:46:23.037

正确答案似乎是

```
location /api/ {
        rewrite ^ $request_uri;
        rewrite ^/api/(.*) $1 break;
        return 400;
        proxy_pass http://127.0.0.1:8000/$uri;
    } 
```

有关完整答案和原作者，请参阅[没有 url 解码的 Nginx pass_proxy 子目录。](https://stackoverflow.com/questions/28684300/nginx-pass-proxy-subdirectory-without-url-decoding/37584637#37584637)

（我意识到这个问题比我引用的那个问题要老，但我在谷歌搜索中发现了这个问题，可能不是最后一个，所以......）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T21:22:40.877

这就是 Nginx 处理 url 的方式。您可以通过更改您的 Web 应用程序以将“%”字符转义为“%25”并通过来绕过它`someone%2540somewhere.com`。

这将被转义为`someone%40somewhere.com`.

# ruby - Ruby on Rails 中大文件的 Base64 超时

> ID：10254584
> 
> 赞同：1
> 
> 时间：2012-04-20T22:57:41.570
> 
> 标签：ruby, timeout, base64, encode

我正在尝试使用 Base64.encode64 对 ~40MB 文件进行编码，并将其编码的字符串写回 lulz 的另一个文件中。当我尝试时，从我的浏览器中获取超时。我很确定代码是正确的（也不是很漂亮，但我 3 天前开始使用 Ruby ......）有什么办法可以设置超时限制吗？

```
def foo

  code = File.new("base64code.xml", "wb")
  original = File.open("asdf.exe", "rb")
  code << Base64.encode64(original.read)
  original.close
  code.close

end 
```

# java - 他们为什么使用；在 Java/C++ 中结束语句

> ID：10254588
> 
> 赞同：2
> 
> 时间：2012-04-20T22:58:17.357
> 
> 标签：java, syntax, separator

他们不应该使用 . 结束陈述。他们可以使用 -> 来调用方法。这只是一个疏忽吗？还是这里有一些更深层次的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T08:12:51.520

Java 选择分号是为了具有类似于 C 和 C++ 的语法。

C++ 选择它具有类似于 C 的语法。

我猜 C 选择分号是因为 B、ALGOL 和 Pascal 已经使用了它，并且没有理由不使用已经接受的约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:06:05.973

编辑：见[https://softwareengineering.stackexchange.com/questions/139482/why-are-statements-in-many-programming-languages-terminated-by-semicolons#139485](https://softwareengineering.stackexchange.com/questions/139482/why-are-statements-in-many-programming-languages-terminated-by-semicolons#139485)

...所以人们理解评论（和否定），这是原来的：

“此外，分号代表 C/C++ 中的 NOP（无操作或空命令）”可能会为它为何常见提供线索

[http://en.wikipedia.org/wiki/Semicolon#Computing_usage](http://en.wikipedia.org/wiki/Semicolon#Computing_usage)

# eclipse - Windows 网络中的 Mac 上的 Subclipse。Can't Commit - 无法获得排他锁

> ID：10254589
> 
> 赞同：0
> 
> 时间：2012-04-20T22:58:19.840
> 
> 标签：eclipse, subclipse, osc

我有一台运行 OS X 10.7.3 的 iMac。我安装了 Eclipse Indigo 和 Subclipse 1.8.6。当我提供正确的凭据时，我可以通过 Finder 连接到我们的存储库并将文件保存到我们的存储库。我什至可以检查项目。当我对签出的项目进行更改时，我会看到更新图标，甚至可以查看 diff 中的冲突。

当我尝试提交代码时出现问题，我无法获得排他锁，并且提交失败。

```
org.apache.subversion.javahl.ClientException: svn: E204899: Commit failed (details follow):
svn: E204899: Can't get exclusive lock on file '/Volumes/TECHSUPPORT/SOFTWARE/Java_Projects/db/txn-current-lock': Operation not supported
org.apache.subversion.javahl.ClientException: svn: E204899: Commit failed (details follow):
svn: E204899: Can't get exclusive lock on file '/Volumes/TECHSUPPORT/SOFTWARE/Java_Projects/db/txn-current-lock': Operation not supported 
```

我已经尝试了我能想到的一切，我已经使用了两个可用的 SVN。在这个问题上似乎没有太多。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T07:39:29.767

您的 Mac 上安装了哪个版本的 subversion？

```
$ svn --version 
```

我认为您需要更新程序：[SVN升级工作副本](https://stackoverflow.com/questions/7992034/svn-upgrade-working-copy)

# python - 是什么让用户定义的类不可散列？

> ID：10254594
> 
> 赞同：53
> 
> 时间：2012-04-20T22:58:40.197
> 
> 标签：python, class, python-3.x, user-defined-types, hashable

[文档](http://docs.python.org/py3k/glossary.html#term-hashable)说，只要定义了`__hash__`方法和方法，一个类就是可散列的`__eq__`。然而：

```
class X(list):
  # read-only interface of `tuple` and `list` should be the same, so reuse tuple.__hash__
  __hash__ = tuple.__hash__

x1 = X()
s = {x1} # TypeError: unhashable type: 'X' 
```

什么使`X`不可散列？

请注意，我必须有相同的列表（就常规相等而言）才能散列到相同的值；否则，我将[违反](http://docs.python.org/dev/reference/datamodel.html?highlight=__hash__#object.__hash__)哈希函数的这一要求：

> 唯一需要的属性是比较相等的对象具有相同的哈希值

文档确实警告说，在其生命周期内不应修改可散列对象，当然我不会修改`X`创建后的实例。当然，解释器无论如何都不会检查。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-20T23:04:37.833

简单地将`__hash__`方法设置为`tuple`类的方法是不够的。你实际上并没有告诉它如何以不同的方式散列。元组是可散列的，因为它们是不可变的。如果你真的想让你的具体示例工作，它可能是这样的：

```
class X2(list):
    def __hash__(self):
        return hash(tuple(self)) 
```

在这种情况下，您实际上是在定义如何散列您的自定义列表子类。您只需要准确定义它如何生成哈希即可。您可以随意散列，而不是使用元组的散列方法：

```
def __hash__(self):
    return hash("foobar"*len(self)) 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-04-03T14:29:58.483

来自 Python3 文档：

> 如果一个类没有定义 __eq__() 方法，它也不应该定义 __hash__() 操作；如果它定义了 __eq__() 而不是 __hash__()，它的实例将不能用作可散列集合中的项目。如果一个类定义了可变对象并实现了__eq__()方法，则不应该实现__hash__()，因为实现可散列集合要求键的散列值是不可变的（如果对象的散列值发生变化，那就错了哈希桶）。

参考：[object.__hash__(self)](https://docs.python.org/3/reference/datamodel.html#object.__hash__)

示例代码：

```
class Hashable:
    pass

class Unhashable:
    def __eq__(self, other):
        return (self == other)

class HashableAgain:
    def __eq__(self, other):
        return (self == other)

    def __hash__(self):
        return id(self)

def main():
    # OK
    print(hash(Hashable()))
    # Throws: TypeError("unhashable type: 'X'",)
    print(hash(Unhashable()))  
    # OK
    print(hash(HashableAgain())) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-20T23:33:33.890

根据您的另一个问题，您可以而且应该做的是：不要子类化任何东西，只需封装一个元组。在 init 中这样做是完全可以的。

```
class X(object):
    def __init__(self, *args):
        self.tpl = args
    def __hash__(self):
        return hash(self.tpl)
    def __eq__(self, other):
        return self.tpl == other
    def __repr__(self):
        return repr(self.tpl)

x1 = X()
s = {x1} 
```

产生：

```
>>> s
set([()])
>>> x1
() 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-20T23:12:33.150

如果您不修改`X`创建后的实例，为什么不子类化元组？

但我要指出，这实际上不会引发错误，至少在 Python 2.6 中是这样。

```
>>> class X(list):
...     __hash__ = tuple.__hash__
...     __eq__ = tuple.__eq__
... 
>>> x = X()
>>> s = set((x,))
>>> s
set([[]]) 
```

我犹豫要不要说“有效”，因为这并不像你认为的那样。

```
>>> a = X()
>>> b = X((5,))
>>> hash(a)
4299954584
>>> hash(b)
4299954672
>>> id(a)
4299954584
>>> id(b)
4299954672 
```

它只是使用对象 id 作为哈希。当您实际调用时`__hash__`，您仍然会收到错误消息；同样对于`__eq__`.

```
>>> a.__hash__()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: descriptor '__hash__' for 'tuple' objects doesn't apply to 'X' object
>>> X().__eq__(X())
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: descriptor '__eq__' for 'tuple' objects doesn't apply to 'X' object 
```

我收集到 python 内部，出于某种原因，正在检测`X`有一个`__hash__`和一个`__eq__`方法，但没有调用它们。

这一切的寓意是：只需编写一个真正的哈希函数。由于这是一个序列对象，因此将其转换为元组和散列是最明显的方法。

```
def __hash__(self):
    return hash(tuple(self)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-04T16:26:17.880

上述答案的补充 - 对于 python3.7+ 中数据类的特定情况 - 要使数据类可散列，您可以使用

```
@dataclass(frozen=True)
class YourClass:
    pass 
```

作为装饰而不是

```
@dataclass
class YourClass:
    pass 
```

# c# - 将控件绑定到嵌套属性

> ID：10254600
> 
> 赞同：0
> 
> 时间：2012-04-20T22:59:08.087
> 
> 标签：c#, winforms, linq-to-sql, data-binding

基本问题，我已经详尽搜索了一整天。

My Account 对象有一个 KeyType 对象，它有一个 Name 属性，都是由 Linq to SQL 生成的。

我的绑定源：

```
var result = from account in Schema.Accounts select account as Account;
Data = new ComplexBindingList<Account>(result.ToList<Account>());
DataSource = Data;
ResetBindings(true); 
```

我从 Bradley Smith 的博客中借来的 ComplexBindingList 有这个接口：

```
public class ComplexBindingList<T> : List<T>, ITypedList 
```

这适用于我的 DataGridView：

```
Columns.Add(CreateColumn("KeyType.Name", "Key Type"); 
```

数据很好，因为这段代码在异常之前工作：

```
var v = account.KeyType.Name; 
```

这不适用于我的文本框。我得到一个异常“对象'EPM.BODA.KeyType'上的属性访问器'名称'引发以下异常：'对象与目标类型不匹配。'”

```
// Controller is my BindingSource
Binding binding = EditField.DataBindings.Add("Text", Controller, "KeyType.Name"); 
```

我的总体印象是反射无法正常工作，但似乎无法找到有关如何填补空白的详细信息。为任何帮助而欢呼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:21:33.253

这是我到目前为止所拥有的，作为一个简单的解决方法。

```
public virtual Binding GetBinding(string fieldName)
{
    string[] pieces = fieldName.Split('.');
    if ( pieces.GetLength(0) == 1 )
    {
        return new Binding("Text", this, fieldName);
    }
    else
    {
        return new Binding("Text",
            Current.GetType().GetProperty(pieces[0]).GetValue(Current, null), pieces[1]);
    }
}

// Calling the helper function and adding the binding
EditField.DataBindings.Add(Controller.GetBinding(mapping.FieldName)); 
```

# android - 在低于项目目标 API 版本的设备上从 Eclipse 运行

> ID：10254604
> 
> 赞同：2
> 
> 时间：2012-04-20T22:59:33.067
> 
> 标签：android, eclipse, admob

`target=android-14`项目属性中需要最新版本的 AdMob SDK（唯一可供下载的） 。这并不妨碍人们在较低版本的平台上运行应用程序（前提是它们与 兼容`minSdkVersion`），但 Eclipse 的“运行”菜单会过滤掉平台版本低于 的所有设备（虚拟和真实）`target`。典型场景

*   `minSdkVersion`设置为 Android 2.1 (API 7)
*   `target`设置为 ICS (API 14)，否则您将无法编译项目，因为清单中存在错误，因为`configChanges`（[请参阅此问题](https://stackoverflow.com/questions/7899767/admob-error-in-eclipse-for-androidconfigchanges)）的新值

您可以在任何设备上运行应用程序 >= Eclair**只能**使用命令行，因为 Eclipse 会过滤掉任何小于 14 的设备。这使得在模拟器上进行测试变得困难。我使用最新版本的 ADT (r19) 和 Eclipse 插件 (18.0)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:05:16.333

它真的会过滤掉它们，还是`X`它们旁边只有一个红色？您仍然可以单击这些设备来运行该应用程序。Eclipse 抱怨您的模拟器/设备低于目标版本，这很烦人。

仅供参考，SDK 至少需要`target=android-13`支持`screenSize|smallestScreenSize`configChanges。

# glassfish - Glassfish 3.1.2 配置相互认证的客户端证书

> ID：10254610
> 
> 赞同：3
> 
> 时间：2012-04-20T23:00:28.510
> 
> 标签：glassfish, client, certificate

我在配置 GF3.1.2 方面需要帮助，我已经完成了以下更改，如果我遗漏了任何重要内容，请告诉我，因为更改后它不起作用。我的身份证是 nilesh2811@gmail.com

如果有任何链接会有帮助，我在论坛中找不到任何特定的主题或答案。如果您对此有任何文件，请转发。

请只做那些需要的

web.xml

```
<login-config>
  <auth-method>CLIENT-CERT</auth-method>
</login-config>
<security-constraint>
  <web-resource-collection>
    <web-resource-name>Entire Application</web-resource-name>
    <url-pattern>/faces/*</url-pattern>
    <http-method>POST</http-method>
  </web-resource-collection>
  <auth-constraint>
    <description/>
    <role-name>authorized</role-name>
  </auth-constraint>
  <user-data-constraint>
    <transport-guarantee>CONFIDENTIAL</transport-guarantee>
  </user-data-constraint>
</security-constraint>
<security-role>
  <description/>
  <role-name>authorized</role-name>
</security-role> 
```

sun-web.xml

```
<security-role-mapping>
  <role-name>authorized</role-name>
  <principal-name>admin</principal-name>
  <group-name>authorized</group-name>
</security-role-mapping> 
```

域.xml

```
<security-service>
  <auth-realm classname="com.sun.enterprise.security.auth.realm.file.FileRealm" name="admin-realm">
    <property name="file" value="${com.sun.aas.instanceRoot}/config/admin-keyfile"></property>
    <property name="jaas-context" value="fileRealm"></property>
  </auth-realm>
  <auth-realm classname="com.sun.enterprise.security.auth.realm.file.FileRealm" name="file">
    <property name="file" value="${com.sun.aas.instanceRoot}/config/keyfile"></property>
    <property name="jaas-context" value="fileRealm"></property>
  </auth-realm>
  <auth-realm classname="com.sun.enterprise.security.auth.realm.certificate.CertificateRealm" name="certificate">
    <property name="assign-groups" value="authorized"></property>
  </auth-realm> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T09:43:01.443

您的 web.xml 中的 login-config 部分不完整

```
<login-config>
    <auth-method>CLIENT-CERT</auth-method>
    <realm-name>certificate</realm-name>
</login-config> 
```

领域名称内容必须与 domain.xml 中 auth-realm 元素的名称属性匹配，在您的情况下为“证书”

[更新]

此外，CA 证书必须导入服务器的信任库中

```
${com.sun.aas.instanceRoot}/config/cacerts.jks 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-16T16:19:39.327

实际上，我尝试使用 glassfish 3.1.2，它在以下条件下工作：

1.我必须在相同的位置使用相同的 jks 类型的密钥（信任）存储。为了与其他证书格式对话，您必须将它们转换为 jks 格式可以处理的格式。

2.在 glassfish-web.xml 你应该有这样的映射

```
 <security-role-mapping>
      <role-name>manager</role-name>   
    <group-name>authorized</group-name>
    </security-role-mapping> 
```

3.在 domain.xml 文件中，您应该具有以下内容：

```
<auth-realm classname="com.sun.enterprise.security.auth.realm.certificate.CertificateRealm" name="certificate">
              <property name="assign-groups" value="authorized"></property>
            </auth-realm> 
```

注意：在 web.xml 中，您必须有域名匹配 domain.xml 文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:16:31.567

当任何人第一次尝试时，他们需要时间来理解，简单来说，客户端和服务器信任库都应该相互信任证书，首先最好使用自签名证书与服务器和客户端交换证书，可以使用以下文章寻求帮助，其中简化了步骤。按照文章然后你可以使用你自己想要的方法证书。

[http://www.slideshare.net/krizsan/scdjws-5-study-notes-3085287](http://www.slideshare.net/krizsan/scdjws-5-study-notes-3085287)

SCDJWS 5 或现在称为 Oracle 认证专家、Java EE 5 Web 服务开发人员学习笔记，Ivan A Krizsan 版本：2012 年 2 月 23 日

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T14:31:44.720

放

```
Client Authentication: true 
```

在`http-listener-2`.

# jquery - 隐藏 div 直到 jquery datepicker 显示

> ID：10254612
> 
> 赞同：0
> 
> 时间：2012-04-20T23:00:41.020
> 
> 标签：jquery, datepicker, show-hide

jquery 是否可以在 jquery ui datepicker 加载之前隐藏 div？我在网站上有一个部分使用 jquery ui datepicker 显示内联日历。有时 datepicker 不会立即加载，因此它下面的内容显示在顶部，然后在 datepicker 加载后被下推。我宁愿日期选择器下方的 div 在日期选择器加载并显示之前不显示。这可能吗？如果是这样，我将如何告诉加载的日期选择器并能够在此之后显示 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:10:31.810

您可以将 div 隐藏在 css ( `display:none`) 中，然后使用 jQuery，在 div 完成加载后运行一个函数。

一个例子：http: [//jsfiddle.net/UudrH/2/](http://jsfiddle.net/UudrH/2/)

您的代码将如下所示：

```
$("#wait").ready(function(){
    $("#hidden").show();   
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:07:55.170

如果您知道日期选择器的高度，则可以将包含的 div 预设为该高度。这样就不会有任何运动，它只会填满已经分配给它的空间。

# entity-framework - MVC3 和 Code First 迁移 - “自从创建数据库以来，支持‘blah’上下文的模型已经改变”

> ID：10254613
> 
> 赞同：21
> 
> 时间：2012-04-20T23:00:48.560
> 
> 标签：entity-framework, asp.net-mvc-3, entity-framework-migrations

我首先使用实体​​框架代码开始了我的项目。当我准备好时，我将我的数据库和代码上传到我的主机提供商。一切正常。

我需要在我的一个类中添加一个新字段，并且我不想丢失数据库中的数据。因此，我尝试关注一些关于使用 Code First 迁移的博客文章。我做了以下事情：

1.  我备份了我的远程（生产）数据库。
2.  我在本地附加了这个数据库
3.  我将该属性添加到我的班级
4.  PM> 启用迁移
5.  PM> Add-Migration AddSortOrderToCar
6.  PM>更新-数据库
7.  此时，我创建了一个本地数据库的 .bak 文件，然后使用该文件“恢复”到远程数据库。
8.  最后，我将代码发布到远程站点。

当我访问该站点时，我收到以下错误消息：支持“blahblah”上下文的模型自创建数据库以来已更改。考虑使用 Code First 迁移来更新数据库。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-21T00:16:49.413

根据我的经验，这表明迁移表不同步（即使您的数据不同步），并且现在已成为 db 架构的一部分（我认为从 4.3 开始 - 在系统表下）。

可能有很多原因和方法会遇到该错误，但大多数时候......

有问题的部分是手动备份/恢复完整数据库和代码更改的某种组合——我不完全确定为什么总是这样。

简而言之，即使 Db-s 是相同的迁移表数据也可能不是 - 并且哈希比较可能会失败（仍然完全恢复听起来足够好 - 但你有“两个方面”）。

* * *

对我有用的是使用
`Update-Database -Script`

这将创建一个具有“迁移差异”的脚本，
您可以将其作为 SQL 脚本手动应用到目标服务器数据库上（并且您应该插入正确的迁移表行等）。

如果这仍然不起作用 - 你仍然可以做两件事......

1.  删除迁移表（目标 - 在系统表下） - 根据[http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2012/02/09/ef-4-3-automatic-migrations-walkthrough.aspx)评论在那里——这应该会回到以前的行为，如果你确定你的 Db-s 是一样的——它只会“相信你”，

2.  作为最后的手段，我使用了一个`Update-Database -Script`完整的模式（例如，通过初始化一个应该强制执行“完整脚本”的空数据库），
    找到`INSERT INTO [__MigrationHistory]`记录，
    运行这些记录，将它们插入数据库，
    并确保你的数据库- 和代码匹配，

这应该使事情再次同步运行。

（免责声明：这不是始终有效的防弹措施，您可能需要根据当地情况尝试一些事情 - 但应该让您保持同步）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-01T17:34:17.833

我认为在第 6 步中您需要运行 Update-Database -Verbose

此外，此链接对于使用脚手架更新 EF 中的数据库非常有帮助 [http://www.asp.net/mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-entity-framework-scaffolding-and -迁移](http://www.asp.net/mvc/overview/older-versions/hands-on-labs/aspnet-mvc-4-entity-framework-scaffolding-and-migrations)

# asp.net - Linq“包含”查询时间过长

> ID：10254619
> 
> 赞同：5
> 
> 时间：2012-04-20T23:01:18.823
> 
> 标签：asp.net, linq

我有这个查询：

```
var newComponents = from ic in importedComponents
                    where !existingComponents.Contains(ic)
                    select ic; 
```

`importedComponents`并且`existingComponents`属于 类型`List<ImportedComponent>`，并且仅存在于内存中（不依赖于数据上下文）。在本例中，`importedComponents`只有 6,100 多个项目，并且`existingComponents`有 511 个项目。

这个语句完成的时间太长（我不知道多长时间，我在*20 分钟*后停止脚本）。我尝试了以下方法，但执行速度没有提高：

```
var existingComponentIDs = from ec in existingComponents
                           select ec.ID;

var newComponents = from ic in importedComponents
                    where !existingComponentIDs.Contains(ic.ID)
                    select ic; 
```

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T23:07:46.323

问题是该算法的二次复杂度。将所有现有组件ID 的ID 放入一个HashSet 并使用HashSet.Contains 方法。与列表中包含/任何内容的 O(N) 相比，它的查找成本为 O(1)。

morelinq项目包含一种方法，可以在一个方便的步骤中完成所有这些操作：ExceptBy [。](http://code.google.com/p/morelinq/source/browse/trunk/MoreLinq/ExceptBy.cs?r=173)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-20T23:11:51.293

您可以使用[`Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)来获得设定的差异：

```
var existingComponentIDs = existingComponents.Select(c => c.ID); 
var importedComponentIDs = importedComponents.Select(c => c.ID);
var newComponentIDs = importedComponentIDs.Except(existingComponentIDs);
var newComponents = from ic in importedComponents
        join newID in newComponentIDs on ic.ID equals newID
        select ic;
foreach (var c in newComponents)
{ 
    // insert into database?
} 
```

[**为什么 LINQ JOIN 比使用 WHERE 链接快得多？**](https://stackoverflow.com/questions/5551264/why-is-linq-join-so-much-faster-than-linking-with-where)

**简而言之**：Join 方法可以设置一个哈希表作为索引来快速将两个表压缩在一起

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T23:09:52.053

好吧，根据您提供的逻辑和数字，这意味着您在运行该语句时基本上是在执行 3117100 比较。显然，这并不完全准确，因为您的条件可能在遍历整个数组之前已经满足，但您明白我的意思。

对于这么大的集合，您将希望使用一个集合，您可以在其中索引您的键（在本例中为您的组件 ID），以帮助减少搜索的开销。要记住的是，即使 LINQ 看起来像 SQL，这里也没有神奇的索引。主要是为了方便。事实上，我看过一些文章，其中链接查找实际上比蛮力查找慢一点。

**编辑：**如果可能的话，我建议您尝试使用 Dictionary 或 SortedList 作为您的值。我相信任何一个都会有更好的查找性能。

# google-app-engine - 使用 Images.get_serving_url 方法时，App Engine 是否会去除 EXIF 数据？

> ID：10254620
> 
> 赞同：1
> 
> 时间：2012-04-20T23:01:51.633
> 
> 标签：google-app-engine

我正在使用 App Engine 根据 BlobStore 中的 blob 键提供图像。例如，这是我在 Python 中获取存储图像的 URL 的方式：

类照片（db.Model）：blob_key = blobstore.BlobReferenceProperty（）

url = images.get_serving_url(self.blob_key)

我的问题是：App Engine 是否会从返回的 URL 中的图像中去除 EXIF 数据？

# matlab - colMin 和 colMax 之间的行元素之和，每行具有不同的 colMin 和 colMax - Octave / Matlab

> ID：10254623
> 
> 赞同：2
> 
> 时间：2012-04-20T23:02:21.643
> 
> 标签：matlab, matrix, sum, octave

我有矩阵

```
p=[1 2 3 4; 
   5 6 7 8; 
  10 20 30 50]; 
```

我想计算列 iMin 和 iMax 之间的每行元素的总和，每行的 iMin 和 iMax 都不同

例如对于

```
iMin = [3 2 1];
iMax = [4 4 3]; 
```

结果是

```
[7 21 60] 
```

有没有一种简单的 Octave / Matlab 方法可以在没有循环的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T12:39:17.417

[您可以使用逻辑索引来实现这一点，遵循与我对您的其他问题](https://stackoverflow.com/questions/10258448/matrix-creation-octave-matlab-loopless-solution-request)的回答类似的方法。

假设`iMin`并且`iMax`具有与行数相同的条目数，`p`您可以水平平铺`p`ie的列索引，`[1:size(p,2)]`并将其与垂直平铺进行比较，`iMin`并为满足您的标准的条目`iMax`生成逻辑索引，因此：`p`

```
c_min=repmat(iMin',1,size(p,2))
c_max=repmat(iMax',1,size(p,2))
c_ind=repmat([1:size(p,2)],size(p,1),1)
result=sum(p.*(c_ind>=c_min & c_ind<=c_max),2) 
```

给予：

```
result =

   7
  21
  60 
```

没有循环:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T22:51:22.383

我知道我有点晚了，但这是我的贡献：

1.  单线[`bsxfun`](http://www.mathworks.es/es/help/matlab/ref/bsxfun.html)：

    ```
    sum((p.*bsxfun(@le,iMin(:),1:size(p,2)).*bsxfun(@ge,iMax(:),1:size(p,2))).') 
    ```

2.  一个解决方案[`linear indexing`](http://www.mathworks.es/es/help/matlab/math/matrix-indexing.html?s_tid=doc_12b#f1-85511)：

    ```
    aux = [zeros(1,size(p,1)); cumsum(p.')];
    rowjumps = 0:size(p,2)+1:numel(p);
    result = aux(iMax+1+rowjumps) - aux(iMin+rowjumps); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T15:26:34.597

我相当确定

```
[nRows,nCols]=size(p);
result = zeros(nRows,1);
for iRow = 1:nRow
   result(iRow) = sum(p(iRow,iMin(iRow):iMax(iRow));
end 
```

是最快的解决方案，至少在最新版本的 Matlab 上是这样。

要一次性执行求和，您需要创建一个包含 1 和 0 的数组来进行 mask `p`，即

```
[nRows,nCols] = size(p);
idxCells = arrayfun(@(x,y)...
    [false(1, x-1), true(1,y-x+1), false(1,nCols-y)], iMin, iMax,...
    'UniformOutput',false);
result = sum( p .* cell2mat(idxCells), 2) 
```

# api - Soundcloud - 搜索的不仅仅是术语？

> ID：10254626
> 
> 赞同：2
> 
> 时间：2012-04-20T23:03:06.227
> 
> 标签：api, search, soundcloud

您如何使用 Soundcloud API 对多个术语进行 OR 搜索？

用逗号分隔似乎做了一个 AND 搜索：

例如

[http://api.soundcloud.com/tracks.json?client_id=CLIENTKEY&q=chicago,parks&limit=50](http://api.soundcloud.com/tracks.json?client_id=CLIENTKEY&q=chicago,parks&limit=50)

在 Google API 上，您可以使用 %7C 进行 OR 搜索，但这似乎不适用于 Soundcloud？

例如[http://api.soundcloud.com/tracks.json?client_id=CLIENTKEY&q=chicago%7Cparks&limit=50](http://api.soundcloud.com/tracks.json?client_id=CLIENTKEY&q=chicago%7Cparks&limit=50)

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:19:21.307

目前无法对`/tracks`资源进行“或”查询。

我们提出的解决方案是执行两个请求并合并结果并删除任何重复项。

`http://api.soundcloud.com/tracks.json?client_id=CLIENTKEY&q=chicago&limit=50`

`http://api.soundcloud.com/tracks.json?client_id=CLIENTKEY&q=parks&limit=50`

组合结果当然不会按两个搜索词的组合相关性排序，尽管您可以获取重复项并将它们“放在”其余项的“顶部”。

HTH汉内斯

# android - 每次启动应用程序时都会调用 dvmStartup

> ID：10254628
> 
> 赞同：0
> 
> 时间：2012-04-20T23:03:16.347
> 
> 标签：android, virtual-machine, dalvik

我在 dvmStartup() 中向 logcat 添加了一些代码打印消息，但它似乎没有打印出任何内容。那么每次都调用 dvmStartup() 吗？是否与应用程序是否以Zygote模式启动有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:06:57.550

dvmStartup 在 zygote 进程启动时执行一次。然后通过分叉 zygote 进程创建所有其他 dalvik 进程。

# android - Android：如何改变图像的色调？

> ID：10254630
> 
> 赞同：3
> 
> 时间：2012-04-20T23:03:23.007
> 
> 标签：android

我正在寻找以编程方式更改背景图像 (PNG) 的色调。如何在 Android 上做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-09-14T14:08:56.150

I tested the accepted answer, unfortunately it returns a wrong result. I found and modified this code from [here](http://www.gamedev.net/topic/644263-android-bitmap-change-hue/) which works fine:

```
// hue-range: [0, 360] -> Default = 0
public static Bitmap hue(Bitmap bitmap, float hue) {
    Bitmap newBitmap = bitmap.copy(bitmap.getConfig(), true);
    final int width = newBitmap.getWidth();
    final int height = newBitmap.getHeight();
    float [] hsv = new float[3];

    for(int y = 0; y < height; y++){
        for(int x = 0; x < width; x++){
            int pixel = newBitmap.getPixel(x,y);
            Color.colorToHSV(pixel,hsv);
            hsv[0] = hue;
            newBitmap.setPixel(x,y,Color.HSVToColor(Color.alpha(pixel),hsv));
        }
    }

    bitmap.recycle();
    bitmap = null;

    return newBitmap;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-26T05:16:27.373

链接的帖子有一些好主意，但用于 ColorFilter 的矩阵数学可能是 (a) 复杂的过度杀伤，和 (b) 在结果颜色中引入可感知的变化。

在此处修改 janin 给出的解决方案 - [https://stackoverflow.com/a/6222023/1303595](https://stackoverflow.com/a/6222023/1303595) - 我将此版本基于[Photoshop 的“颜色”混合模式](http://help.adobe.com/en_US/photoshop/cs/using/WSfd1234e1c4b69f30ea53e41001031ab64-77eba.html)。它似乎避免了由 PorterDuff.Mode.Multiply 引起的图像变暗，并且在不损失太多对比度的情况下非常适用于着色去饱和/人工黑白图像。

```
/*
 * Going for perceptual intent, rather than strict hue-only change. 
 * This variant based on Photoshop's 'Color' blending mode should look 
 * better for tinting greyscale images and applying an all-over color 
 * without tweaking the contrast (much)
 *     Final color = Target.Hue, Target.Saturation, Source.Luma
 * Drawback is that the back-and-forth color conversion introduces some 
 * error each time.
 */
public void changeHue (Bitmap bitmap, int hue, int width, int height) {
    if (bitmap == null) { return; }
    if ((hue < 0) || (hue > 360)) { return; }

    int size = width * height;
    int[] all_pixels = new int [size];
    int top = 0;
    int left = 0;
    int offset = 0;
    int stride = width;

    bitmap.getPixels (all_pixels, offset, stride, top, left, width, height);

    int pixel = 0;
    int alpha = 0;
    float[] hsv = new float[3];

    for (int i=0; i < size; i++) {
        pixel = all_pixels [i];
        alpha = Color.alpha (pixel);
        Color.colorToHSV (pixel, hsv);

        // You could specify target color including Saturation for
        // more precise results
        hsv [0] = hue;
        hsv [1] = 1.0f;

        all_pixels [i] = Color.HSVToColor (alpha, hsv);
    }

    bitmap.setPixels (all_pixels, offset, stride, top, left, width, height);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-17T19:14:01.503

If you wrap your Bitmap in an `ImageView` there is a very simple way:

```
ImageView circle = new ImageView(this);
circle.setImageBitmap(yourBitmap);
circle.setColorFilter(Color.RED); 
```

My guess is this will be faster than modifying each pixel individually.

# c++ - C++ 我可以期望所有编译器都不会破坏返回的副本吗？

> ID：10254631
> 
> 赞同：1
> 
> 时间：2012-04-20T23:03:26.273
> 
> 标签：c++, destructor

```
#include <iostream>
using namespace std;

class ClassA {
    int k;
public:
    ClassA(int i) : k(i) 
    {
    }

    ~ClassA()
    {
        cout << "A destroyed" << " k=" << k << endl;
    }

    ClassA copyAndModify() 
    { 
        ClassA a(k*2);
        return a; 
    }

    void taunt() 
    {
        cout << k << endl;
    }
};

int main (int argc, char * const argv[]) {
    ClassA original(1)
    ClassA modified = original.copyAndModify();
    modified.taunt();
    return 0;
} 
```

我认为当方法返回时对象'a'（内部方法copyAndModify）被解构，但事实并非如此。这是否意味着在方法中创建的所有正在返回的对象都不会被解构？这对所有编译器都是如此吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T23:05:16.713

您遇到了[返回值优化](http://en.wikipedia.org/wiki/Return_value_optimization)。不，它不会在所有编译器上都相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T23:09:12.970

这取决于编译器，但通常当方法按值返回对象实例时，编译器可以使用 RVO（返回值优化）通过将目标对象作为隐藏引用参数传递来防止创建临时对象。换句话说，编译器会调整生成的代码，就像您编写的代码一样，如下所示：

```
void copyAndModify(ClassA &result)
{  
    ClassA a(k*2); 
    result = a;  
} 

ClassA modified;
original.copyAndModify(modified); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T23:12:42.613

在 VS 的情况下，如果您在调试模式下构建，则不会进行任何优化（对象将被销毁），但在发布模式下会启动优化（对象不会被销毁）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-20T23:05:58.337

这是正确的。如果它被返回，它不会被破坏。那讲得通。返回一个已经被销毁的对象是没有意义的。

# java - 使用 Xuggler 通过 Java 检测网络摄像头

> ID：10254635
> 
> 赞同：0
> 
> 时间：2012-04-20T23:04:00.220
> 
> 标签：java, ffmpeg, log4j, webcam, xuggler

我正在尝试使用**[Xuggler](http://www.xuggle.com/downloads)**库来处理 Java 中的网络摄像头视频流。

我的项目包含这些文件：

*   **Xuggler 罐子**( [xuggle-xuggler-5.4.jar](http://xuggle.googlecode.com/svn/trunk/repo/share/java/xuggle/xuggle-xuggler/5.4/) )
*   **SLF4J 罐子**（Xuggler 需要，可[在此处](http://www.slf4j.org/download.html)下载）：
    *   jcl-over-slf4j-1.6.4.jar
    *   七月到 slf4j-1.6.4.jar
    *   log4j-over-slf4j-1.6.4.jar
    *   slf4j-api-1.6.4.jar
    *   slf4j-ext-1.6.4.jar
    *   slf4j-migrator-1.6.4.jar
    *   slf4j-simple-1.6.4.jar
*   [**DisplayWebcamVideo.java**](http://xuggle.googlecode.com/svn-history/r674/trunk/java/xuggle-xuggler/src/com/xuggle/mediatool/demos/DisplayWebcamVideo.java)作为主类

`"vfwcap"`我使用and`"0"`作为参数运行 main 方法。
应用程序正确启动，我可以从网络摄像头看到自己，但这**只是第一帧**：流冻结，我看到这个输出：

`5022 [Thread-3] ERROR org.ffmpeg - [vfwcap @ 000000000039A320] real-time buffer 75% full! frame dropped!`

`5622 [Thread-3] ERROR org.ffmpeg - [vfwcap @ 000000000039A320] real-time buffer 85% full! frame dropped!`

`6522 [Thread-3] ERROR org.ffmpeg - [vfwcap @ 000000000039A320] real-time buffer 95% full! frame dropped!`

`6822 [Thread-3] ERROR org.ffmpeg - [vfwcap @ 000000000039A320] real-time buffer 101% full! frame dropped!`

`6822 [Thread-3] ERROR org.ffmpeg - [vfwcap @ 000000000039A320] real-time buffer 101% full! frame dropped!`

这里有什么问题？:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T12:13:18.777

**通过将[其](https://github.com/xuggle/xuggle-xuggler/blob/master/src/com/xuggle/xuggler/demos/DisplayWebcamVideo.java)用作主类来解决**

# hibernate - Hibernate 映射持久化枚举字符串

> ID：10254640
> 
> 赞同：0
> 
> 时间：2012-04-20T23:04:57.033
> 
> 标签：hibernate, hibernate-mapping

我意识到我遗漏了一些明显的东西。不知道它是什么，希望有人能帮助我看到我没有看到的东西。

我的公司从映射文件开始，生成模式和 java 文件。

我想弄清楚如何映射。我有一个表，其中的列只能在有限数量的字符串上包含 1：'DOES_NOT_EXIST'、'NEW、INITIATILIZE'、'RUNNING'、'TEARDOWN'

```
TABLE STATE_MACHINE
    ....
    STATE VARCHAR2(32)
.....

public enum StatEnum {
    DOES_NOT_EXIST, NEW,INITIATILIZE, RUNNING, TEARDOWN
} 
```

我们想做的是类似的事情

```
StateMachine machine = new StateMechine();
machine.state=StatEnum.NEW;
....
Persistance.save(machine) 
```

问题是我收到“无法提交事务：无法执行 JDBC 批量更新：ORA-00932：不一致的数据类型：预期的 BINARY 得到了 NUMBER”

我认为 HBM 映射文件应该类似于 com.foo.StateEnum 12

有人可以指出我正在尝试做的一些文档。

谢谢你帮助我学习...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T20:09:04.007

我最终创建了一个实现 EnhancedUserType 和 ParameterizedType 的类。

在实现上述类的包中，我放置了我的枚举类。

我的休眠 xml 有

```
 <property name="state" column="state">
        <meta attribute="use-in-tostring">true</meta>
        <meta attribute="field-description">state types</meta>
        <type name="com.....h.core.domain.usertype.MyStrEnumUserType">
            <param name="enumClassname">com.......core.domain.usertype.StateTypeEnum</param>
        </type>
    </property> 
```

# extjs4 - ExtJS 4：将不同的商店分配给同一视图的不同实例？

> ID：10254643
> 
> 赞同：1
> 
> 时间：2012-04-20T23:05:27.157
> 
> 标签：extjs4

**这是我的应用程序的简要概述：**

我有一个容器有 2 个区域的应用程序：

1.  西 -> 树面板
2.  中心 -> 具有“卡片”布局的容器，包含 0 个项目。

Whenever a treenode is selected, my controller will check a my-own custom property called 'node_viewId' to see whether its value is undefined or not.

如果未定义，它将创建一个“widget.myowngridpanel”实例（从“gridpanel”扩展）并为其分配一个唯一存储。之后，此实例将添加到“卡片”中，并将此实例作为活动项目，以便将其显示在中心区域。

**为什么要这样设置？**

每个节点代表需要在同一视图上显示的不同数据，并且需要保留视图的状态（例如，在节点 A - 用户对第一列进行排序并隐藏第二列，在节点 B - 用户对第三列进行排序并隐藏第一列柱子）。

**我的实现：**

我几乎让它工作了，但是在切换不同的活动项目时它并没有完全正确地显示视图。

这是我的控制器中的代码（例如，压缩版本）：

```
this.control({
    '#treePanelID' : {
        itemclick : function(pThis, pRecord, pItem, pIndex, pE, pEOpts) {

        var newCenterView,newCenterViewId,newGridStore;
        if (pRecord.data.node_type === 'NodeA' && 
            pRecord.data.node_viewId === undefined) {

             newCenterView = Ext.create('widget.myowngridpanel',{
                                title:'GridPanel NodeA',
                    columns:[{ header: 'Node A item1', dataIndex: 'name'},
                                      {header: 'Node A item2', dataIndex: 'phone'}]
                                });

             newGridStore = Ext.create('NodeAStore');
             newCenterViewId = 'nodeAID';
        }
        else
        if (pRecord.data.node_type === 'NodeB' && 
            pRecord.data.node_viewId === undefined) {

             newCenterView = Ext.create('widget.myowngridpanel',{
                                title:'GridPanel NodeB',
                    columns:[{ header: 'Node B item1', dataIndex:
                                'address'},{header: 'Node B item2', dataIndex: 'city'},
                                { header: 'Node B item3', dataIndex: 'zipcode'}]});
             newGridStore = Ext.create('NodeBStore');
             newCenterViewId = 'nodeBID';
        }

       if(newCenterView !== undefined && 
          newCenterViewId !== undefined) {
            pRecord.data.node_viewId = newCenterView.itemId = newCenterViewId;
            this.getCenterCard().add(newCenterView);
            newCenterView.bindStore(newGridStore);
        }

        this.getCenterCard().getLayout().setActiveItem(pRecord.data.node_viewId); 
```

**这是一个帮助您可视化问题的场景：**

首先，用户选择“节点A”，进入“nodeAID”视图创建过程。您将看到它按预期显示：topBar 上的标题“GridPanel NodeA”和包含 1 个标题行的网格，该行由以下 2 列组成：“Node A item1”和“Node A item2”。

然后，用户选择“节点 B”，进入“nodeBID”视图创建过程。现在出现了视图问题，您将看到：topBar 的标题 'GridPanel NodeB' 和带有这 2 个标题行和以下列的网格：

1) 'Node B item1','Node B item2','Node B item3'

2) '节点 A item1','节点 A item2'

因此，由于某些原因，“NodeAID”视图中的先前标题列也存在于“NodeBID”视图中。到目前为止，我发现这个问题是由于通过别名（widget.myowngridpanel）创建视图而发生的。当使用“Ext.grid.panel”直接创建视图时，它可以完美运行。但我需要能够通过别名使其与视图创建一起使用。

如果我需要更清楚地描述我的描述，请告诉我。

帮助！

**04/23 更新：**

有一个关于“widget.myowngridpanel”的信息我没有放，因为我认为它与这个问题没有任何关系。'widget.myowngridpanel' 有由 2 个按钮组成的停靠项。当我删除它时，问题就消失了。这就是我拥有停靠项目的方式：

```
dockedItems: [{
        xtype:'toolbar',
        height:'29px',
        dock:'top',
        items:[{
            xtype:'button',
            text:'Button 1',
            action:'button1pressed'
        },{
            xtype:'button', 
            text:'Button 2',
            action:'button2pressed'
        }]
     }] 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T11:43:16.257

尝试为`stateId`您正在创建的每个面板添加独特的属性。这用于保存/恢复网格配置，例如列、顺序、位置等。

# javascript - 获取 Svg 中字符串的像素长度

> ID：10254644
> 
> 赞同：28
> 
> 时间：2012-04-20T23:05:27.027
> 
> 标签：javascript, image, svg

我目前正在使用 SVG。我需要知道以像素为单位的字符串长度才能进行一些对齐。如何获取以像素为单位的字符串长度？

**更新：**感谢 nrabinowitz。根据他的帮助，我现在可以获得动态添加文本的长度。这是一个例子：

```
<svg id="main" 
    xmlns="http://www.w3.org/2000/svg" 
    xmlns:xlink="http://www.w3.org/1999/xlink"
    version="1.1" 
    width="1020"
    height="620" 
    viewBox="0 0 1020 620"
    onload="startup(evt)">

<script>
    <![CDATA[
        var startup = function (evt) {
            var width;
            var svgNS = "http://www.w3.org/2000/svg";
            var txtNode = document.createTextNode("Hello");
            text = document.createElementNS(svgNS,"text");

            text.setAttributeNS(null,"x",100);
            text.setAttributeNS(null,"y",100);
            text.setAttributeNS(null,"fill","black");
            text.appendChild(txtNode);                                              
            width = text.getComputedTextLength();               
            alert(" Width before appendChild: "+  width);                       
            document.getElementById("main").appendChild(text);
            width = text.getComputedTextLength();
            alert(" Width after appendChild: "+  width)
            document.getElementById("main").removeChild(text);              
        }       
    //]]>
</script>
</svg> 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-21T00:08:05.927

我也一直在想这个，我惊喜地发现，根据 SVG 规范，有一个特定的函数可以返回这个信息：[getComputedTextLength()](http://www.w3.org/TR/SVG/text.html#__svg__SVGTextContentElement__getComputedTextLength)

```
// access the text element you want to measure
var el = document.getElementsByTagName('text')[3];
el.getComputedTextLength(); // returns a pixel integer 
```

工作小提琴（仅在 Chrome 中测试）：http: [//jsfiddle.net/jyams/](http://jsfiddle.net/jyams/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-05-10T01:03:27.493

在感兴趣地阅读了各种类似的主题并从其中的一些想法中受益之后，我创建了一个页面，并排比较了三种 Javascript 方法。我已经注意到结果

IE9

火狐 29.0.1 和

铬 34.0.1847.131 m

您可以在浏览器中加载它并查看适合您的内容：

[http://bl.ocks.org/MSCAU/58bba77cdcae42fc2f44](http://bl.ocks.org/MSCAU/58bba77cdcae42fc2f44)。

# java - java如何从大小约为800x600的图像中获取平均RGB值

> ID：10254654
> 
> 赞同：1
> 
> 时间：2012-04-20T23:06:49.207
> 
> 标签：java, image, colors, jpeg, rgb

如何有效地从 java 中的 jpeg 图像计算平均 RGB 值？我不需要得到超级准确的结果，但我需要一个更快且准确度更高的算法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-20T23:10:10.733

这种事情是采样的完美之选。如果您选择随机采样的像素，您的答案将很快收敛到正确答案。像这样的方法称为[蒙特卡洛方法](http://en.wikipedia.org/wiki/Monte_Carlo_method)。

为了向自己说明这一点，我建议使用示例图像，并编写一个程序来找出真正的平均值。现在编写一个程序，在整个图像上随机均匀地获取 N 个像素，并在 N=10、100、1000、10000 的情况下运行它，看看你需要多少个像素才能足够准确。

# java - 在 Java/Clojure 中杀死无限循环

> ID：10254655
> 
> 赞同：6
> 
> 时间：2012-04-20T23:06:58.607
> 
> 标签：java, multithreading, clojure, slime, swank

对一些“潜在答案”的回应

*   你应该在你的线程中加入“中断”

    我编写代码的目的不是为了让它成为一个漫长的过程/无限循环；只是在开发中，我*不小心*编写了恰好是无限循环的代码，因此我永远无法事先计划将“检查线程是否被中断”放入代码中。

问题：

随着我越来越熟悉 Java/Clojure/Swank 和增量代码开发。我发现我很容易不小心编写了一个最终成为无限循环的 clojure 函数并运行它。然后继续进行，并锁定 JVM，导致我的笔记本电脑上的风扇旋转 - 基本上，我必须杀死整个 JVM 才能摆脱一个失控的线程。

现在，无论如何我可以以某种方式安全地杀死这些 clojure 线程吗？我很清楚 Thread.stop 有各种不安全的后果（比如持有其他线程可能需要的锁，等等......）——但是，这些是无限循环的*clojure*函数——我在外面做任何 STM——所以我想知道是否有某种方法可以安全地杀死这些线程。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-21T01:06:46.220

我认为不存在完全完整的答案，尽管有一些不完整但仍然有用的事情要做：

*   首先，我`ctrl-c ctrl-c`从 repl 中命中，它杀死了我 99% 的常见错误的前台线程。
*   然后，如果失败，我会选择终端和`kill`命令。
*   在那之后`M-x slime-quit-lisp`，`clojure-jack-in`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T06:24:31.623

编写一个宏来创建这些循环怎么样，并且该宏可以在循环步骤中注入代码以定期检查指示它退出循环的内容，例如 /tmp 上是否存在临时文件。所以基本上要退出无限循环，你只需要创建那个临时文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T03:44:14.103

理论上，正如评论中提到的，这是一个很难真正解决的问题。

**实际解决方案的最大希望...**

我在这里假设您想要一种更可靠、更安全的方式来杀死和分析正在运行的 clojure 线程中的活动。. . 为此，JPS 是可行的方法，因为 JPS 监视所有 Java 进程，包括您在标准 clojure 中所做的任何事情。

我总是将 JPS 用于此类事情，因为它可用于显示特定 java 类的进程名称，包括类名......知道最初调用进程的类的能力让您对“什么”你实际上在杀人。

```
doolittle-5:~ Jpeerindex$ jps -l
61133 jline.ConsoleRunner
58998 start.jar
61161 sun.tools.jps.Jps
51866 jline.ConsoleRunner 
```

在这种情况下，由于“lein repl”（clojure repl）是通过 jline（主类是 ConsoleRunner）启动的，所以我们可以看到它。

如果您确实需要查看详细信息，可以选择其中任何一个进程并使用 jstack 调用它们：

$>jstack 51866

> “Gang worker#0（并行 GC 线程）”prio=9 tid=101802800 nid=0x1017f9000 可运行
> 
> “Gang worker#1（并行 GC 线程）”prio=9 tid=101803800 nid=0x102301000 可运行
> 
> “并发 Mark-Sweep GC 线程”prio=9 tid=10184e000 nid=0x1093f0000 可运行“VM 周期性任务线程”prio=10 tid=1018a4000 nid=0x10a310000 等待条件
> 
> “异常捕获线程”prio=10 tid=101802000 nid=0x100704000 可运行 JNI 全局引用：137

在这种情况下，您将能够感觉到您的线程中是否存在任何实际问题，准确地识别它们，并自信地杀死它们，等等......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T12:19:31.260

在 Eclipse/逆时针测试版中，有一个选项可以手动停止运行（失控）线程，而无需停止 REPL。我喜欢该功能的原因与您想要拥有它的原因相同。

它使用 NREPL 0.2.0 beta，我认为是通过 clojure.tools.nrepl.middleware.interruptible-eval。不仅 Eclipse/CCW NREPL 0.2.0 客户端，而且最新版本的 REPL-y 都应该支持此功能（默认 CTRL-C 用于停止线程，CTRL-D 用于停止 REPL）。

# ruby-on-rails-3 - 过渡/指纹现有回形针文件以使用 MD5 校验和

> ID：10254657
> 
> 赞同：3
> 
> 时间：2012-04-20T23:07:04.623
> 
> 标签：ruby-on-rails-3, amazon-s3, paperclip

我设置了正确的配置，它适用于新附件。但我想为现有的回形针附件添加指纹。只是重新处理并再次保存它们并不能解决问题。有什么办法可以运行reprocess！那还生成指纹并重命名文件？使用导轨 3.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:54:43.747

每个附件都有一个`generate_fingerprint`计算指纹的方法：

```
fingerprint = photo.attachment.generate_fingerprint(photo.attachment) 
```

一旦你知道指纹，你就可以编写一个迁移来计算它，更新模型以存储指纹，并重命名每个现有文件以匹配你喜欢的任何新路径哈希。

# jquery - 基于模型事件触发jquery

> ID：10254660
> 
> 赞同：0
> 
> 时间：2012-04-20T23:07:25.460
> 
> 标签：jquery, ruby-on-rails

我知道关于通知有很多关于 SO 的问题，但我还没有遇到任何关于触发 jquery 以基于模型事件显示通知的问题。我将通知包装在一个显示设置为无的 div 中，并希望从模型访问 jquery 以显示它们。

对于 30 多种不同类型的通知，在控制器的 create.js.erb 文件中包含此代码（检查是否应向用户提示通知）很麻烦；使用回调将是非常受欢迎的。

请不要用 jquery 显示/隐藏方法来回应，因为这不是我要问的。任何输入将不胜感激（嗯，除了解释 jquery 的隐藏/显示方法之外的任何输入）。这是回调：

```
 after_create :hundredrep

  def hundredrep
    unless Badge.where(:user_id => current_user.id, :name => "hundredrep", :category => "3").any?
        if current_user.reputation > 100 
            current_user.badges.create(:name =>"hundredrep", :category = "3")
        end
    end
  end 
```

我想在上面的回调中调用 jquery：

```
$(document).ready(function() { 
    $(".browser_notice").slideDown(500);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T15:09:28.633

要将数据从服务器推送到客户端，您必须使用以下技术之一：

*   定期向服务器发送 XHR 调用以获取更新（从技术上讲不是推送）
*   打开与服务器的持久连接，以便服务器可以在需要时将数据写入流（HTTP 流/firehose API）
*   发送一个 XHR 请求，服务器将在需要数据推送之前打开该请求（HTTP 长轮询）

根据您需要的反应程度（什么是“实时”：1 秒、10 秒、30 秒、1 分钟？），第一种方法是最简单的方法。对于 HTTP 流式传输或长轮询，您必须采用[Comet 方法](http://en.wikipedia.org/wiki/Comet_%28programming%29)/事件驱动的 IO 服务器，例如 Goliath、NodeJS、Tornado 等。您还可以查看即插即用 API，例如[Pusher](http://pusher.com/) .

为确保 DRYability 使用模型回调或模型观察器将事件推送到 Comet、数据库中的表、推送器或任何适合您需要的解决方案。

# html - rails + HTML：如何在我的网页中显示图像

> ID：10254671
> 
> 赞同：0
> 
> 时间：2012-04-20T23:09:12.260
> 
> 标签：html, ruby-on-rails

嗨，我的一个 javascript 文件中有以下 html。

```
function addToInfoWindow(infoWindowContent)  
{  
    infoWindowString = '<div id="infoWindowString">'+  
    '<img src="assets/images/rails.png">'+  
    '<h2>You Clicked:</h2>'+  
    '<p>'+infoWindowContent+'</p>'+  
    '<p><a href="http://www.google.com">See more info</a></p>'+  
    '<p><a href="http://www.cnn.com">see news</a></p>'+  
    '</div>';  
    infoWindow.setContent(infoWindowString);  
} 
```

问题是我无法让图像显示在信息窗口中。

我意识到这可能是因为 rails 具有某种辅助功能来在其网页中显示图像。但我一直无法找到如何调用它或它是什么。有人可以帮忙吗。

编辑-在以下回复后更改为以下内容：

```
function addToInfoWindow(infoWindowContent)  
{  
    infoWindowString = '<div class="infoWindowString">'+  
    '<img src="/Users/AM/Documents/RailsWS/cmdLineWS/Businesses/app/assets/images/rails.png">'+  
    '<h2>You Clicked:</h2>'+  
    '<p>'+infoWindowContent+'</p>'+  
    '<p><a href="http://www.google.ca">See Menus</a></p>'+  
    '<p><a href="http://www.google.ca">Upload a Menu</a></p>'+  
    '</div>';  
    infoWindow.setContent(infoWindowString);  
} 
```

但是图像仍然没有出现:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:14:26.470

您正在使用图片的相对 URL ( `assets/images/rails.png`)，因此浏览器将尝试从相对于当前页面的地址加载它。例如，如果图像位于

```
http://example.com/assets/images/rails.png 
```

但你目前在

```
http://example.com/something/somepage.html 
```

浏览器将尝试从

```
http://example.com/something/assets/images/rails.png 
```

它会失败。

您应该使用绝对 URL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T23:34:38.790

如果您使用带有 rails 资产打包的默认设置，它会在资产文件名上附加一个时间戳，这意味着仅仅浏览`/assets/images/foo.jpg`并不一定会给您想要的东西。

获取图像标签的 rails 助手只是`image_tag 'example.jpg'`. 或者，如果您只想要 url `image_url 'foo.jpg'`，.

对于您想要存储的任何给定图像，您可以将其附加到数据属性，例如在您可以执行的视图中：

```
<a id="image_link" href="#" data-image-url="<%= image_url 'foo.jpg' %>">Click to see image</a> 
```

您可以使用 jQuery 在任何地方获取该路径

```
var imageUrl = $('a#image_link').data('image-url') 
```

# wcf - MSMQ WCF 示例（非 System.Messaging）

> ID：10254673
> 
> 赞同：0
> 
> 时间：2012-04-20T23:09:30.023
> 
> 标签：wcf, msmq

是的，我用谷歌搜索过，那里有大量样本，但每个样本的配置都不同，或者不是我想要的。

我正在尝试找到一个我设置了 MSMQ 的示例。我想要一个 WCF 服务，它在消息到达 MSMQ 队列时得到通知。

然后我还想要一个绑定到该合同并发送消息的客户端应用程序，将其放置在 MSMQ 队列中。

谁能提供示例或链接？我将不胜感激。我只是对不同类型的消息传递、不同的绑定感到困惑......列表还在继续。我不是在寻找 System.Messaging 实现。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:46:49.053

[您可以在MSDN Windows Communication Foundation (WCF) 和 Windows Workflow Foundation (WF) Samples for .NET Framework 4](http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=21459)上找到大量示例。当您展开包时，请在 \WCFWFCardSpace\WCF\Basic\Binding\MsmqIntegration 下查看一些基本示例

编辑：对于交易，它很简单：

```
[OperationBehavior(TransactionScopeRequired = true, TransactionAutoComplete = true)]
public void SubmitPurchaseOrder(MsmqMessage<PurchaseOrder> msg)
{} 
```

您可以在 MSDN 上阅读有关[毒物消息处理的](http://msdn.microsoft.com/en-us/library/ms789028.aspx)更多信息 有关 MSDN 上的 MSMQ 的更多信息[- How to: Exchange Messages with WCF Endpoints and Message Queuing Applications](http://msdn.microsoft.com/en-us/library/ms789008.aspx)

“当服务从一个事务下的目标队列中读取消息时，服务可能由于各种原因无法处理该消息。然后将消息放回队列中再次读取。为了处理重复失败的消息，一组绑定中可以配置毒消息处理属性。共有四个属性：ReceiveRetryCount、MaxRetryCycles、RetryCycleDelay 和 ReceiveErrorHandling。"

编辑：您将在服务端使用 System.Messaging。

# .net - ASP.Net MVC 3 EF“在表上引入 FOREIGN KEY 约束可能会导致循环或多个级联路径”

> ID：10254677
> 
> 赞同：3
> 
> 时间：2012-04-20T23:09:55.473
> 
> 标签：.net, asp.net-mvc-3, c#-4.0, entity-framework-4.1, ef-code-first

我正在创建一个 ASP.Net MVC 3 应用程序，并且在尝试使用迁移更新我的数据库时遇到了外键约束问题。我正在使用 Code-First，我得到的错误是：

在表“CategoryItemValues”上引入 FOREIGN KEY 约束“FK_CategoryItemValues_CategoryProperties_CategoryPropertyId”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。请参阅以前的错误。

这是我的课程：

```
public class Category
{
    public int Id { get; set; }
    [Display(Name = "Category Name")]
    public string CategoryName { get; set; }
    [Display(Name = "Display Name")]
    public string DisplayName { get; set; }
    [Display(Name = "Display Order")]
    public int DisplayOrder { get; set; }
    public bool IsTab { get; set; }
    public bool Active { get; set; }

    public virtual List<CategoryProperty> Properties { get; set; }
}

public class CategoryProperty
{
    public int Id { get; set; }
    public int CategoryId { get; set; }
    [Display(Name="Property Name")]
    public string PropertyName { get; set; }
    [Display(Name = "Display Order")]
    public int DisplayOrder { get; set; }

    public virtual Category Category { get; set; }
}

public class CategoryItem
{
    public int Id { get; set; }
    public int CategoryId { get; set; }

    public virtual Category Category { get; set; }
    public virtual List<CategoryItemValue> Values { get; set; }
}

public class CategoryItemValue
{
    public int Id { get; set; }
    public int CategoryItemId { get; set; }
    public int CategoryPropertyId { get; set; }
    public string Value { get; set; }

    public virtual CategoryItem Item { get; set; }
    public virtual CategoryProperty Property { get; set; }
}

protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    // I know that the solution needs to go here!
} 
```

似乎我需要为 CategoryItemValues 禁用 Cascade on Delete，但我不知道该怎么做。我知道我需要做类似的事情：

modelBuilder.Entity<...>() .HasRequired(...) .WithMany(...) .HasForeignKey(...) .WillCascadeOnDelete(false);

但我不能完全正确。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-21T00:43:55.110

这应该工作......

```
public class Category
{
    public int Id { get; set; }
    public string CategoryName { get; set; }
    public string DisplayName { get; set; }
    public int DisplayOrder { get; set; }
    public bool IsTab { get; set; }
    public bool Active { get; set; }
    public virtual List<CategoryProperty> Properties { get; set; }
    public virtual List<CategoryItem> Items { get; set; }
}
public class CategoryProperty
{
    public int Id { get; set; }
    public int CategoryId { get; set; }
    public string PropertyName { get; set; }
    public int DisplayOrder { get; set; }
    public virtual Category Category { get; set; }
    public virtual List<CategoryItemValue> Values { get; set; }
}
public class CategoryItem
{
    public int Id { get; set; }
    public int CategoryId { get; set; }
    public virtual Category Category { get; set; }
    public virtual List<CategoryItemValue> Values { get; set; }
}
public class CategoryItemValue
{
    public int Id { get; set; }
    public int CategoryItemId { get; set; }
    public int CategoryPropertyId { get; set; }
    public string Value { get; set; }
    public virtual CategoryItem Item { get; set; }
    public virtual CategoryProperty Property { get; set; }
} 
```

...和“要点”...

```
modelBuilder.Entity<CategoryProperty>()
    .HasKey(i => i.Id);

modelBuilder.Entity<CategoryProperty>()
    .HasRequired(i => i.Category)
    .WithMany(u => u.Properties)
    .HasForeignKey(i => i.CategoryId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<CategoryItem>()
    .HasKey(i => i.Id);

modelBuilder.Entity<CategoryItem>()
    .HasRequired(i => i.Category)
    .WithMany(u => u.Items)
    .HasForeignKey(i => i.CategoryId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<CategoryItemValue>()
    .HasKey(i => i.Id);

modelBuilder.Entity<CategoryItemValue>()
    .HasRequired(i => i.Item)
    .WithMany(u => u.Values)
    .HasForeignKey(i => i.CategoryItemId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<CategoryItemValue>()
    .HasRequired(i => i.Property)
    .WithMany(u => u.Values)
    .HasForeignKey(i => i.CategoryPropertyId)
    .WillCascadeOnDelete(false); 
```

# applescript - 使用分隔符删除 Applescript 中的 HTML 标签

> ID：10254686
> 
> 赞同：0
> 
> 时间：2012-04-20T23:11:02.743
> 
> 标签：applescript, delimiter, html

如何`<br />`使用分隔符从以下 HTML 中删除所有这些标签，知道这只是大型 HTML 文件的一部分。我还想使用分隔符来删除我的 html 文件中的其他标签。

```
<Education :<br />
<br />
- School-leaving exam type B, Zug<br />
- Basic course HSG<br />
- Business economist FH, HWV St. Gallen (1990)<br />
<br />
Professional development :<br />
<br />
- 1984-97 GESTIO Treuhand- und Verwaltungs AG, Zug (part time)<br />
- 1985-86 Financial administration Canton of St. Gallen<br />
- 1991-94 Gestinor Services AG, Zug<br />
- 1994-97 Revisuisse Price Waterhouse AG, Zug, Taxes and Law<br />
- 1997 Founding of Bohnet & Schlatter Treuhand AG<br />
<br />
Experience :<br />
<br />
- Tax consultation of legal and natural persons<br />
- Preparation of tax statements for legal and natural persons<br />
- Preparation of structural plans and execution of organizational processes<br />
- Management and support on responsibilities in finances and accounting. 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:16:23.150

替换文本足够基本，例如，大多数人在他们的库中都有一个处理程序

```
on run -- example
    set theText to "<Education :<br />
<br />
- School-leaving exam type B, Zug<br />..."

    replaceTextInString_fromOldItem_toNewItem_(theText, "<br />", "")
end run

to replaceTextInString_fromOldItem_toNewItem_(someText, oldItem, newItem)
    (*
    replace all occurances of oldItem with newItem
        parameters -    someText [text]: the text containing the item(s) to change
                        oldItem [text]: the item to be replaced
                        newItem [text]: the item to replace with
        returns [text]: the text with the item(s) replaced
    *)
    set {tempTID, AppleScript's text item delimiters} to {AppleScript's text item delimiters, oldItem}
    try
        set {pieces, AppleScript's text item delimiters} to {text items of someText, newItem}
        set {someText, AppleScript's text item delimiters} to {pieces as text, tempTID}
    on error errorMessage number errorNumber -- oops
        set AppleScript's text item delimiters to tempTID -- make sure TID's are reset
        error errorMessage number errorNumber -- pass on error
    end try

    return someText
end replaceTextInString_fromOldItem_toNewItem_ 
```

请注意，在 Snow Leopard 和 Lion 中，要替换的项目的文本分隔符（我的示例中的 oldItem 参数）可以是项目列表。

# ruby - Ruby中的多重继承？

> ID：10254689
> 
> 赞同：36
> 
> 时间：2012-04-20T23:11:44.337
> 
> 标签：ruby, inheritance

我认为Ruby除了mixin之外只允许单一继承。但是，当我有`Square`继承 class的类`Thing`时，默认情况下`Thing`会继承`Object`。

```
class Thing
end

class Square < Thing
end 
```

这不代表多重继承吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-20T23:19:35.217

我认为您以错误的方式理解多重继承的含义。可能你想到的多重继承是这样的：

```
class A inherits class B
class B inherits class C 
```

如果是这样，那就错了。这不是多重继承，Ruby 对此没有任何问题。多重继承的真正含义是：

```
class A inherits class B
class A inherits class C 
```

你肯定不能在 Ruby 中做到这一点。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-04-20T23:21:20.547

不，多重继承意味着一个类有多个父类。例如，在 ruby​​ 中，您可以使用以下模块来实现这种行为：

```
class Thing
  include MathFunctions
  include Taggable
  include Persistence
end 
```

所以在这个例子中，Thing 类将有一些来自 MathFunctions 模块的方法，Taggable 和 Persistence，这不可能使用简单的类继承。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-07-21T19:25:17.090

如果 B 类继承自 A 类，则 B 的实例具有 A 类和 B 类的行为

```
class A
end

class B < A
  attr_accessor :editor
end 
```

Ruby 具有单继承，即每个类都有一个且只有一个父类。Ruby 可以使用 Modules(MIXINs) 模拟多重继承

```
module A
  def a1
  end

  def a2
  end
end

module B
  def b1
  end

  def b2
  end
end

class Sample
  include A
  include B

  def s1
  end
end

samp=Sample.new
samp.a1
samp.a2
samp.b1
samp.b2
samp.s1 
```

模块 A 由方法 a1 和 a2 组成。模块 B 由方法 b1 和 b2 组成。Sample 类包括模块 A 和 B。Sample 类可以访问所有四种方法，即 a1、a2、b1 和 b2。因此，您可以看到 Sample 类继承自两个模块。因此，您可以说 Sample 类显示了多重继承或 mixin。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-03-02T05:41:22.600

[多重继承](http://groupinfo4u.com/wp-content/uploads/2014/11/multiple-inheritance-c-plus-plus.jpg)——**这在 ruby​​ 中是绝对不可能的，即使是模块也不可能。**

[多级继承](https://en.wikipedia.org/wiki/Inheritance_(object-oriented_programming)#/media/File:Multilevel_Inheritance.jpg)-**即使使用模块，这也是可能的。**

**为什么 ？**

模块充当包含它们的类的绝对超类。

例1：

```
class A
end
class B < A
end 
```

这是一个正常的继承链，你可以通过祖先来检查。

> B.ancestors => B -> A -> 对象 -> ..

**继承与模块 -**

例 2：

```
module B
end
class A
  include B
end 
```

上述示例的继承链 -

> B.ancestors => B -> A -> 对象 -> ..

这与 Ex1 完全相同。这意味着模块 B 中的所有方法都可以覆盖 A 中的方法，并且它充当真正的类继承。

例 3：

```
module B
  def name
     p "this is B"
  end
end
module C
  def name
     p "this is C"
  end
end
class A
  include B
  include C
end 
```

> A.ancestors => A -> C -> B -> 对象 -> ..

如果您看到最后一个示例，即使包含两个不同的模块，它们也位于单个继承链中，其中 B 是 C 的超类，C 是 A 的超类。

所以，

```
A.new.name => "this is C" 
```

如果从模块 C 中删除 name 方法，上面的代码将返回“this is B”。这与继承一个类相同。

**所以，**

在任何时候，ruby 中只有一个多级继承链，这使得类的**多个直接父级**无效。

# objective-c - 从 URL Objective C NSScanner 解析图像和扩展

> ID：10254692
> 
> 赞同：1
> 
> 时间：2012-04-20T23:12:02.013
> 
> 标签：objective-c, parsing, caching, nsstream, nsscanner

我有一个程序将从我们的服务器中为应用程序抓取图像，但是我们想将图像保存到 iOS 应用程序中以进行缓存。

网址将与此类似。

```
http://www.example.com/image/app_name/mypicture.png 
```

我需要一种方法将图像名称（mypicture）和扩展名（.png）转换为 2 个不同的字符串以保存它。

我将如何使用 NSscanner 完成此任务？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:39:43.487

你不会使用扫描仪。使用 NSURl 方法 absoluteString 获取路径，然后使用 NSString 方法 pathExtension、stringByDeletingPathExtension 和最后 lastPathComponent 获取扩展名和名称。您还可以使用 NSURL 方法 resourceValuesForKeys:error: 来获取带有 NSURLLocalizedNameKey 的名称。

# php - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在附近使用的正确语法

> ID：10254693
> 
> 赞同：1
> 
> 时间：2012-04-20T23:12:08.270
> 
> 标签：php, mysql, mysql-error-1064

我有这段将数据插入数据库的代码，但是即使我已经多次检查了语法，我仍然会收到这个错误，有人可以帮助我吗？
错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 'cou ?'、'output'、'input'、'new line'、'break'、'output'、'Multiable_Choise')' 附近使用的正确语法4

```
<?php
$connectdb = mysql_connect('localhost','root','sara', true ) or die ("Not Connect");
 if (!$connectdb)
{
  die('Could not connect :'. mysql_errno());
 }
 $selestdb  = mysql_select_db('iexa', $connectdb) or die ("not selected database");

 $chois_1 = array();
 $chois_2 = array();
 $chois_3 = array();
 $chois_4 = array();
 $Question = array();
 $correct = array();
 $correct['Correct_Answer']= mysql_real_escape_string($_POST['Correct_Answer']) ;
 $Question['Question']= mysql_real_escape_string($_POST['Question']) ;
 $chois_1['Choise_1']= mysql_real_escape_string($_POST['Choise_1']) ;
 $chois_2['Choise_2']= mysql_real_escape_string($_POST['Choise_2']) ;
 $chois_3['Choise_3'] = mysql_real_escape_string($_POST['Choise_3']) ;
 $chois_4['Choise_4'] = mysql_real_escape_string($_POST['Choise_4']) ;
 if (isset($_POST['E_No'])) {
     $E_no = $_POST['E_No'];
}
     if (isset($_REQUEST['courseID'])) {
    $courseId = $_REQUEST['courseID'];
     }

     $sql ="INSERT INTO question_bank (C_ID ,E_No , Question  , Choise_1  , Choise_2          ,         Choise_3 , Choise_4 , Correct_Answer
     , Question_Type )
          VALUES
          ('$courseId','$E_no',                            {$Question['Question']}','{$chois_1['Choise_1']}','{$chois_2['Choise_2']}','{$chois_3['Choise_3']}',
     '{$chois_4['Choise_4']}','{$correct['Correct_Answer']}','$_POST[Question_Type]')
     ";
          if (!mysql_query($sql,$connectdb))
            {
                    die ('Error :'.mysql_error());
            }
          echo "The Qustion is saved";
          echo '  <br />
          <a href="question.htm" >Add Another Question</a> <br />
          <a href="ManageStudents.htm">Manage Students</a> <br />
          <a href="Instructor.htm">Home</a>
          ';
          mysql_close($connectdb);
           ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:23:25.827

前面有一个 ' 缺失`{$Question['Question']}'`

# ios - 当我点击“运行”时应用程序崩溃，但当我点击“停止”然后“运行”时

> ID：10254695
> 
> 赞同：0
> 
> 时间：2012-04-20T23:12:15.943
> 
> 标签：ios, iphone, xcode4

在模拟器中，当我点击“运行”按钮时，我的应用程序崩溃了。但是，如果我先点击“停止”然后从模拟器中“运行”该应用程序，它就像一个魅力。

有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:28:23.323

禁用应用程序中的**每个断点并再次运行。**您的应用程序没有“崩溃”，调试器正在停止它，以便您可以单步执行您的代码。然后当你退出它时，它不再处于调试模式，因此断点被忽略并且你的应用程序执行就像它们从未被放置一样。

# java - 使用 Swing 移动图像

> ID：10254702
> 
> 赞同：0
> 
> 时间：2012-04-20T23:12:42.043
> 
> 标签：java, image, swing

当按下箭头键时，我想将屏幕上的图像向右移动 16。我想以速度（1px/10ms）移动它直到到达点。该图像是在 JPanel 的子类中创建的。我编写了下一个代码，但图像会立即改变位置而不是移动：

```
public class Test extends JFrame implements KeyListener {
    private int x=0;
    private int y=0;
    BufferedImage img;
    ...
    ...
    public void paint(Graphics g){
        g.drawImage(img,x,y,null);
    }
    // Move to a point 16 pixels to right
    public void moveRight(){
        for(int i=0;i<16;i++){
            x++;
            repaint();
            try {
                Thread.sleep(10); // Sleep 10 milliseconds until next position change
            }catch (InterruptedException e) {}
        }
    }

    public void keyPressed(KeyEvent e) {
         if(e.getKeyCode()==KeyEvent.VK_RIGHT){
             moveRight();
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T23:20:27.863

问题是您在 EDT（事件调度线程）中的睡眠。`repaint()`触发将由 EDT 分派的事件，并依次执行组件的实际重绘。由于您阻止了 EDT，因此重绘不会直接执行（但在所有代码结束后会发生一个重绘事件（因为重绘事件会尽可能地分组）。您可能需要使用`SwingWorker`来解决此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T00:06:43.630

如果在另一个线程中调用 moveRight() 会怎样？

试试这个：

```
public void keyPressed(KeyEvent e) {
    if(e.getKeyCode()==KeyEvent.VK_RIGHT){
        new Thread(new Runnable(){
            public void run(){
                moveRight();
            }
        }).start();
    }
} 
```

我没有测试过，我什至不知道这是否是一个好的方法

# c# - MemoryCache 在第一次过期后总是返回“null”

> ID：10254708
> 
> 赞同：4
> 
> 时间：2012-04-20T23:13:40.357
> 
> 标签：c#, asp.net-mvc, iis, memorycache

我有以下问题，我有这种缓存管理：

```
public class CacheManager : ICacheManager {

    private readonly ObjectCache cache;

    public CacheManager() {
        this.cache = MemoryCache.Default;
    }

    public void AddItem(string key, object itemToCache, double duration) {
        var end = DateTime.Now.AddSeconds(duration);
        this.cache.Add(key, itemToCache, end);
    }

    public T Get<T>(string key) where T : class {
        try {
            return (T)this.cache[key];
        }
        catch (Exception ex) {
            return null;
        }
    }

    public void Remove(string key) {
        this.cache.Remove(key);
    }
} 
```

很简单。

**编辑 I（问题文本中的错误修复）**

问题：当任何键的缓存过期时，以下所有获取缓存中任何对象的调用都返回“null”。我检查了钥匙并且总是正确的。

该问题仅发生在我PC中的客户端服务器中，并且我的服务器运行良好。

谢谢。

**编辑二（提前）**

当我们重新启动客户服务器中的应用程序池时，您的问题会在几个小时内得到解决。

我们的站点有一个特定的应用程序池，具有以下设置：

管道管理器模式：集成框架：v4.0 启用 32 位应用程序：True。

其他设置如默认。

在服务器上，我们有 2 个站点，一个启用了“启用 32 位应用程序”，如果两者都被禁用，则会发生错误，但不知道这是否是问题所在。

**编辑 III（进展）**

由于我们未能解决问题，我们决定切换到[Httpcontext.Current.Cache](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx)，我们可以解决问题。我们想要另一个解决方案并继续使用[MemoryCache](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.aspx)但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:21:48.000

这种缓存通常要求您的代码采用“如果某个项目不在缓存中，则创建该项目，使用已创建的项目并添加到缓存中，否则使用缓存中的项目”的形式。因此，如果项目不在缓存中，通常应该是一个问题。

项目从缓存中消失的常见原因是高内存使用率。在这种情况下，内存缓存可能会在项目添加到缓存后立即驱逐它们。这种行为对于以 32 位 (x86) 运行的应用程序来说非常常见，尤其是在处理大量请求或大量数据的服务器上。

验证 - 收集内存控制器和进程的位数。[考虑使用MemoryCache.CreateCacheEntryChangeMonitor](http://msdn.microsoft.com/en-us/library/system.runtime.caching.memorycache.createcacheentrychangemonitor.aspx)和相应的事件添加代码以侦听从缓存中删除的项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-03T08:56:54.610

复活一个老问题，但我相信这个问题是由于一个只在 ASP.NET 4.5 中修复的错误，但对早期版本有一个修补程序。

请参阅此线程：[MemoryCache Empty ：设置后返回 null](https://stackoverflow.com/questions/7422859/memorycache-empty-disposed-in-web-application)

# spring - 如何在 MongoRepository 上创建计数查询

> ID：10254710
> 
> 赞同：2
> 
> 时间：2012-04-20T23:14:18.640
> 
> 标签：spring, mongodb, count

我正在创建一个 MongoRepository 并需要创建一个计数查询。有人可以提供一个示例，说明通过 SpringData MongoDB MongoRepository 设施执行此操作的最佳方法是什么？我能找到的所有示例都返回一个列表但不计数。

这是我想要做的（显然它不起作用）：

```
public interface SchoolRepository extends MongoRepository<School, String> {
    @Query("db.school.count({studentStatus: ?0});")
    int getCountOfStudents(int studentStatus);
} 
```

谢谢。-AP_

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:49:24.060

当我试图做类似的事情时，我发现了这个问题。不幸的是，鉴于我在[org.springframework.data.repository.query.parser.PartTree](https://github.com/SpringSource/spring-data-commons/blob/master/spring-data-commons-core/src/main/java/org/springframework/data/repository/query/parser/PartTree.java)看到的：

```
private static final Pattern PREFIX_TEMPLATE = Pattern.compile("^(find|read|get)(\\p{Upper}.*?)??By"); 
```

它似乎不受支持。

相反，我们可以通过创建一个新接口和一个实现它的类来将自定义行为添加到存储库（参见[参考手册第 1.4.1 节）。](http://static.springsource.org/spring-data/data-jpa/docs/current/reference/html/#repositories.single-repository-behaviour)

```
public interface SchoolRepository extends CrudRepository<School, String>, SchoolRepositoryCustom {
    // find... read... get...
}

public interface SchoolRepositoryCustom {
    int getCountOfStudents(int studentStatus);
}

@Service
public class SchoolRepositoryImpl implements SchoolRepositoryCustom {
    @Autowired
    private SchoolRepository schoolRepository;

    public int getCountOfStudents(int studentStatus) {
        // ...
    }
} 
```

请注意，该类名为 SchoolRepositoryImpl，而不是 SchoolRepositoryCustomImpl。

# c++ - 为什么我的专用模板函数“OverloadedFunk”在 C++ 中给出“无法解析”错误？

> ID：10254713
> 
> 赞同：0
> 
> 时间：2012-04-20T23:14:23.460
> 
> 标签：c++, templates, template-specialization

所以我一直试图弄清楚如何使用模板专业化，但遇到了意外的编译器错误。我检查语法越多，它看起来越正确，所以很明显我错过了一些东西。我要做的就是创建两个专门的函数模板并将它们与重载函数进行比较。我得到的错误如下：`'OverloadedFunk' could not be resolved`在第 28 和 35 行。这是我试图摇滚的代码：

```
#include <iostream>
using namespace std;

enum ErrorCode {
    ERROR_NONE = 0, ///< No errors
    SOME_FAILURE_01, 
    SOME_FAILURE_02, 
    INVALID_STATUS, 
    ERROR_UNKNOWN, 
};

template<typename _to, typename _from>
inline int OverLoadedFunk(_from const &arg, _to &dest)
{
    cout << "OverLoadedFunk3 - Template to from";
    return 0;
}

template<>
inline int OverloadedFunk(const int &from, std::string &dest) //Line 28
{
    cout << "OverloadedFunk1 - int to string";
    return 0;
}

template<>
inline int OverloadedFunk(const ErrorCode &from, std::string &dest) //Line 35
{
    cout << "OverloadedFunk2 - enumeration to string";
    return 0;
}

int main() {
    std::string localDest = "test";
    int localFrom = 1234;
    OverloadedFunk(localFrom, localDest);
    return 0;
} 
```

我在这里到底做错了什么？我知道我可以改用重载函数，但我正在尝试测试专业化和重载函数之间的区别，这样在这种情况下对我没有帮助。非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T23:17:36.010

你的主要函数模板是命名`OverLoadedFunk`的，但你的特化是命名的`OverloadedFunk`——C++是区分大小写的！

# wcf - 通过 WPF 应用程序监控 WCF 服务

> ID：10254722
> 
> 赞同：0
> 
> 时间：2012-04-20T23:16:25.010
> 
> 标签：wcf, monitor

我正在设计一个 WCF 服务，该服务将为请求“GetProduct”和“UpdateProduct”等内容的客户提供服务。此外，客户端将订阅另一项服务，该服务将向他们发送 PUSH 通知。

“PULL”和“PUSH”WCF 服务将在 Windows 服务下运行。

我想封装某种监视解决方案，允许我打开一个 WPF 应用程序，该应用程序将连接到服务并显示现在有多少客户端连接到这两个服务（应该是相同的），并允许我断开客户端从服务中，并可能查看服务已记录的日志。

我如何在服务端设计这个？

我是否需要为“监控”应用程序创建第 3 项服务，该服务会在请求时检查有多少客户端连接到“PULL”和“PUSH”服务？

还是我只是在“PUSH”和“PULL”服务中添加一个函数“GetNumOfClients”和“DisconnectClient”？这似乎是错误的，因为它为这些不属于那里的服务引入了逻辑，并且还允许客户端相互断开连接......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T04:18:57.773

对于日志记录，请使用 log4net 或[health monitoring](http://msdn.microsoft.com/en-us/library/ff649765.aspx)。Log4net 用途广泛且可配置。您可以打开[WCF 诊断](http://msdn.microsoft.com/en-us/library/ms731055.aspx)日志记录，其中包含有关您的服务正在发生的事情的大量信息您可以在此处阅读如何打开和使用[WMI](http://msdn.microsoft.com/en-us/library/ms735120.aspx)提供程序来检测您的服务以及可用的性能[计数器。](http://msdn.microsoft.com/en-us/library/ms735098.aspx)

为什么需要断开客户端？当您在您的方法中抛出一个异常是客户端通道的异常时，您可以“断开”客户端，但除此之外，您不应该关心管理服务连接。

# macos - 在 OSX 中有比 Navicat 更好的东西吗？

> ID：10254724
> 
> 赞同：3
> 
> 时间：2012-04-20T23:16:31.373
> 
> 标签：macos, function, postgresql

我正在使用 postgreSQL 并开发许多 PLPGSQL 函数和过程，导航变得乏味并让我头疼。

在数据库级别（表等）这很好，但开发功能是一件令人头疼的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:29:02.583

我的建议是使用 Toad Extensions ( [http://toadextensions.com/](http://toadextensions.com/) ) 查看 Eclipse。这些支持探索数据库、交叉引用等。这是迄今为止我见过的最有前途的解决方案。

当然，我不确定跨平台解决方案在 Mac 上的效果如何，但在某些时候，如果您的挫败感主要是功能性的，那么值得一看。

# javascript - 试图理解 Javascript 闭包 + 内存泄漏

> ID：10254725
> 
> 赞同：2
> 
> 时间：2012-04-20T23:16:36.223
> 
> 标签：javascript, performance, memory-leaks

我一直在阅读很多关于 Javascript 中的闭包的内容。我来自更传统的（C、C++ 等）背景并了解调用堆栈等，但我在 Javascript 中的内存使用方面遇到了麻烦。这是我设置的（简化的）测试用例：

```
function updateLater(){
    console.log('timer update');

    var params = new Object();
    for(var y=0; y<1000000; y++){
        params[y] = {'test':y};
    }
} 
```

或者，我也尝试过使用闭包：

```
function updateLaterClosure(){

return (function(){

    console.log('timer update');
    var params = new Object()
    for(var y=0; y<1000000; y++)
    {
        params[y] = {'test':y};
    }
});
} 
```

然后，我设置了一个间隔来运行该功能......

```
setInterval(updateLater, 5000); // or var c = updateLaterClosure(); setInterval(c,5000); 
```

计时器第一次运行时，内存使用量从 50MB 跳到 75MB（根据 Chrome 的任务管理器）。第二次超过 100MB。偶尔它会回落一点，但绝不会低于 75MB。

自己检查一下：[https ://local.phazm.com:4435/Streamified/extension/branches/lib/test.html](https://local.phazm.com:4435/Streamified/extension/branches/lib/test.html)

显然，params 没有被完全垃圾收集，因为第一次计时器调用的内存没有被释放......但是，它也没有在每次调用时增加 25MB 的内存，所以好像垃圾收集永远不会发生...似乎总是保留一个“参数”实例。我试过设置一个子关闭和其他东西......没有骰子。

然而，最令人不安的是内存使用量呈上升趋势。现在它可能“只是”75MB，但让它运行足够长的时间（一夜之间），它会达到500MB。

想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:21:12.570

分配 25mb 会导致 GC 发生。此 GC 清理最后一个实例，但当然不是当前实例。所以你总是有一个实例。

程序空闲时不会发生 GC。它不会在您的计时器调用之间发生，因此内存会保留。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T23:27:06.233

这甚至不是一个关闭。[闭包是当您](https://stackoverflow.com/a/111200/575527)从函数返回某些东西时，例如数组、函数、对象或任何可以包含引用的东西，并且它带有该函数的所有本地成员。

你所拥有的只是一个非常长的循环正在构建一个非常大的对象的情况。也许你的记忆没有像你建造巨大的物体那样快地被回收。

# iphone - 经销证书

> ID：10254726
> 
> 赞同：0
> 
> 时间：2012-04-20T23:16:45.940
> 
> 标签：iphone, ios, xcode, code-signing, provisioning

我正在尝试为我最近继承的项目构建应用商店。下载并导入分发证书后，Xcode（当然，因为我没有私钥）失败，并显示“...不匹配任何有效的、未过期的证书/私钥...”。我想我可以创建一个新的分发证书，但我更喜欢使用现有的。获取私钥并将其导入我的钥匙串就足够了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:15:21.233

简短的回答：是的。将其从另一台机器导出并将其导入回您的钥匙串。

# java - Maven 构建在 Bamboo 上

> ID：10254729
> 
> 赞同：1
> 
> 时间：2012-04-20T23:17:16.417
> 
> 标签：java, maven, bamboo

在 Bamboo (Atlassian Build Server) 上创建计划时遇到以下错误。该项目在本地构建，并且配置与其他工作项目相同。如果有人有线索，将不胜感激。

```
Beginning to execute external process for build 'Connect Framework - ICPFRAMEWORKBUILD -        
Default Job'
... running command line: 
/data/maven//bin/mvn
-Djava.io.tmpdir=/data/tomcat_ci/temp/ICPFRAMEWORK-BUILD-JOB1
clean
deploy
... in: /data/bamboo_data/xml-data/build-dir/ICPFRAMEWORK-BUILD-JOB1/trunk
... using extra environment variables: 
MAVEN2_HOME=/data/maven/
JAVA_HOME=/data/java6
M2_HOME=/data/maven/
bamboo_productionVersion=2.1

PATH=/data/java6/bin:/data/java6/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/   sbin  :/sbin:/home/tomcat/bin
21-Apr-2012 00:59:28    Failing task since return code was -1 while expected 0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T10:00:28.493

似乎 maven bin 目录不在您的路径变量中。如果竹子在 linux 环境中运行，你可以添加 MAVEN_HOME 环境变量并将 maven bin 目录路径添加到 PATH 变量。

# php - 没有backbone.js的SPA

> ID：10254731
> 
> 赞同：0
> 
> 时间：2012-04-20T23:17:19.127
> 
> 标签：php, jquery, singlepage

我目前正在构建一个可以与各种应用程序一起使用的应用程序框架。该框架是用 PHP 编写的，并具有 RESTful API。我希望框架能够结合使用 jQuery 和我的 API 来启用单页应用程序。

我已经研究了backbone.js，但我遇到的问题和其他一些类似的问题是，您实际上是在js 中复制您的业务逻辑。这不仅有效地使代码库的大小增加了一倍，而且还带来了某种安全风险。通过在 js 中复制你的业务逻辑，你向全世界展示了你的后端是什么样子，这使得恶意用户的工作变得更加容易。

也就是说，我当然不是前端/js 专家，而且我真的只是认真地研究了backbone.js。我的想法是必须有一个好的方法来定义动态的 js 函数来完成基本相同的事情。我正在寻找的是一个正确方向的点，即使它告诉我我有多么错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T09:48:31.203

如果您使用 REST 通过 JSON 更新您的模型，那么应用程序中的代码量实际上不会是原来的两倍。这实际上取决于您想在客户端上做多少工作以及在服务器上做多少。如果您想要基本的表单验证，则必须在客户端和服务器上编写它。

在客户端上复制业务逻辑似乎不是问题。简单地提交无效数据最终会将您的业务规则暴露给恶意用户。缩小 javascript 将有助于阻止这种情况，但大多数时候您只需对客户端进行简单的验证，并在服务器上进行业务规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-26T23:03:06.360

我正在为我的 SPA 创建和使用以下结构：

```
├── ajax //~ function calls, posted data must be on the same server
├── html //~ webroot
│   ├── css 
│   ├── fonts
│   ├── images
│   ├── js //~ js files, including jquery,init,functions,admin,etc.
│   └── uploads 
   |_ index.php,.htaccess
├── includes //~ config,functions,router,index.html-the template 
```

这是一个对 SEO 友好的 SPA 框架，我认为（希望？）非常安全 所有 ajax 调用都经过验证，发布在原始服务器上 我希望有人看到这一点，并且如果我做错了什么有一些见识

# button - 如何在 Aptana 中设置默认运行配置？

> ID：10254734
> 
> 赞同：3
> 
> 时间：2012-04-20T23:17:43.930
> 
> 标签：button, configuration, aptana, default

当我单击 Aptana 中的运行按钮时，我的应用程序会在使用 Aptana 内置 Web 服务器的浏览器中打开。

我有几个运行配置设置为在内部服务器上运行（一个用于 chrome 一个用于 ff），但我发现每次我想运行我的应用程序时都必须使用运行按钮的下拉菜单非常乏味。我宁愿单击绿色按钮并让它使用我的内部服务器配置之一。

当我现在按下运行时，使用内置 Web 服务器创建了一个名为“默认”的新配置。有没有办法将我的内部服务器配置之一设置为默认值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:40:04.503

当按下运行时，它会执行最后一次运行配置。看起来您可以使用以下方法将密钥绑定到特定配置：

[为特定的 Eclipse 构建配置分配键盘快捷键](https://stackoverflow.com/questions/1437323/assigning-a-keyboard-shortcut-for-a-specific-eclipse-build-configuration)

# qt - QGraphicsScene : 获取光标下的 QGraphicsItemGroup

> ID：10254738
> 
> 赞同：1
> 
> 时间：2012-04-20T23:18:01.583
> 
> 标签：qt, qgraphicsitem, qgraphicsscene

我无法在光标下方获取 QGraphicsItemGroup 的指针。`QGraphicsScene::ItemAt`返回组的对象之一，但不是 ItemGroup 它自己。

任何线索如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T23:41:09.330

您可以调用`QGraphicsItem::group()`返回的 QGraphicsItem `QGraphicsScene::itemAt()`。

# javascript - 向左展开以显示内容的输入框

> ID：10254739
> 
> 赞同：0
> 
> 时间：2012-04-20T23:18:12.573
> 
> 标签：javascript, html, css, input

想了一会儿，我想我可以使用更多的脑力。

想象一下下面的 UI（由 StackOverflow 提供）： ![在此处输入图像描述](../Images/4b8aa773122fe4d60f3e4aeafa45367f.png) 注意红线是“指南”。想象它们是`<div/>`界限。

我想要的是，当大量文本添加到输入框中，足以溢出时，输入框应该“弹出”并覆盖/自动调整到左侧，如下图所示：

![在此处输入图像描述](../Images/d2d01be648f4ec344c16a928c15256dc.png)

这有点类似于 Stackoverflow 的工作方式，只是它会根据内容调整大小。此外，与stackoverflow类似，它需要在输入框失去焦点时缩回。

通常，我会准备好一些代码，但这一次，有点困难。

*   我究竟应该使用什么来“修复”右侧的输入框？
*   如何找到输入框的内部/内容宽度？请注意，我使用的是等宽字体，所以这可能更容易......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:50:53.523

好吧，我找到了答案……或者嗯……创建了解决方案。

可以在[这里](http://jsfiddle.net/PaBus/3/)找到。

简而言之，主要是很多事件和一个绝对定位的“假”输入框。

# uitableview - UITableView - 滚动停止后仅显示完整单元格

> ID：10254740
> 
> 赞同：0
> 
> 时间：2012-04-20T23:18:43.133
> 
> 标签：uitableview, xamarin.ios

我想做的是在滚动完成时只显示完整的单元格。换句话说，如果用户滚动并显示部分单元格，则自动移动内容以使部分单元格完全可见。

原因是每个单元格的内容取决于它所在的可见单元格。

谢谢，瑞克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T22:45:53.063

通过在 UITableViewDelegate 子类中覆盖 DecelerationEnded，您可以在滚动完成时获取可见单元格：

```
public override void DecelerationEnded (UIScrollView scrollView)
{
    UITableViewCell[] visibleCells = tableVC.TableView.VisibleCells;

    ...
} 
```

# sql-server - 在 Mac 中从 SQL Server 部署 .bak 文件

> ID：10254745
> 
> 赞同：0
> 
> 时间：2012-04-20T23:19:23.497
> 
> 标签：sql-server, macos, deployment

好的，我知道这听起来可能很愚蠢，但是，有没有办法将数据库从从 SQL Server 导出的 .bak 文件部署到任何类型的 Mac 软件中？如果有，是哪一个？

如果这是不可能的，如果我首先将它部署到 SQL Server 中并导出它，是否有一种方法可以部署该数据库，也许以不同的方式？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T01:07:28.510

SQL Server 创建的 bak 文件是数据库备份文件，您只能将其还原到 Microsoft SQL Server 实例。

如果要将 MSSQL 数据库移植到其他 RDBMS，最好的办法是使用工具将数据直接从正在运行的 MSSQL 数据库迁移到另一个正在运行的 RDBMS。也许是第三方工具，或者您可以构建一个[SSIS](http://en.wikipedia.org/wiki/SQL_Server_Integration_Services)包来进行迁移。

您可以创建一个 MySQL 数据库并尝试使用[MySQL 迁移工具](http://dev.mysql.com/doc/migration-toolkit/en/)。

但是仅仅给定一个 .bak 文件，您将无法简单地读取该文件；您将需要从正在运行的数据库实例中提取数据。

# cocoa - 在核心数据文档中拦截保存

> ID：10254747
> 
> 赞同：0
> 
> 时间：2012-04-20T23:19:38.143
> 
> 标签：cocoa, core-data, nsdocument

我有一个带有小文本框的窗口，绑定到核心数据属性。用户在文本框中输入的值需要在一定的参数范围内。这些参数是动态的。如果输入的值在参数之外，则会显示一个对话框，询问用户是否要恢复到以前的值，将值设置为最小值等。我已经实现了 controlTextDidEndEditing 方法来拦截和验证用户的值进入。我的问题是用户保存或退出时。用户可以输入错误的值，选择保存或退出并保存值，绕过验证。有没有办法在保存之前调用我的验证方法？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T03:16:59.247

您应该在`NSManagedObject`子类中实现验证，而不是使用文本字段委托。然后，您可以强制执行哪些值是有效的，并在输入无效值时返回适当的错误消息。这样做意味着模型负责强制执行有效性，这是这样做的合乎逻辑的地方。

[在 Core Data 文档的相应部分](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdValidation.html)有更多关于验证的信息。

# android - 如何扩展 Android 按钮并使用 xml 布局文件

> ID：10254748
> 
> 赞同：9
> 
> 时间：2012-04-20T23:19:57.607
> 
> 标签：android, button

我正在尝试扩展 android 按钮类并让它使用 xml 布局文件。

我想使用 xml 布局文件的原因是我的按钮需要使用样式，据我所知，没有办法以编程方式设置样式。

> 公共类 BuyButton 扩展 Button { ... }

```
<?xml version="1.0" encoding="utf-8"?>  
<Button 
    xmlns:android="http://schemas.android.com/apk/res/android" 
    style="@style/customButton"
/> 
```

这样我就可以打电话了：

```
new BuyButton(activity); 
```

并让它创建一个应用了样式的按钮。

（我也对获得相同结果的其他方式持开放态度）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-20T23:24:22.757

创建一个扩展类`Button`。

```
public class BuyButton extends Button {

    public BuyButton(Context context, AttributeSet attrs) {
        super(context, attrs);
        // TODO Auto-generated constructor stub
    }

} 
```

在您的 XML 中直接引用该自定义类。

```
<?xml version="1.0" encoding="utf-8"?>  
<your.package.name.BuyButton 
xmlns:android="http://schemas.android.com/apk/res/android" 
style="@style/customButton"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-14T06:08:18.567

在您的布局 .xml 中，对控件类型进行一行更改（从 Button 更改为您的自定义按钮类型）将解决您的投射问题。

对于您的子类 BuyButton，在 .xml 中找到按钮的部分；它可能看起来像这样：

```
<Button
            android:id="@+id/btnBuy"
            android:layout_width="188dp"
            android:layout_height="70dp"
            android:padding="12dp"
            android:text="Buy" /> 
```

并将其更改为：

```
<yourpackage.name.BuyButton
            android:id="@+id/btnBuy"
            android:layout_width="188dp"
            android:layout_height="70dp"
            android:padding="12dp"
            android:text="Buy" /> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-20T23:27:36.993

请参阅[按钮样式](http://developer.android.com/reference/android/widget/Button.html)部分。只需设置一个自定义背景drawable。

# c++ - 有没有办法在 C++ 中动态清除文本文件的内容？

> ID：10254754
> 
> 赞同：2
> 
> 时间：2012-04-20T23:20:50.197
> 
> 标签：c++, file-io

我正在使用 ofstream`ios::app`在循环中以模式将一些文本输出到文件中。但是经过一些步骤后，我需要清除文件的内容。我知道我们可以通过删除文件并再次打开或再次打开它来做到这一点`ios::trunc`，但是有没有什么地方可以在不关闭并再次打开文件的情况下完成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:32:36.933

如果您已在`ios::app`模式下打开它，则无需再次打开就无法清除内容。`ofstream`只能将文本放入文件中，并且由于文本文件是连续的，因此您不能直接擦除它们上的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:36:58.573

请注意确定是否可以使用 io 流，但通常您可以通过将当前位置设置为 0 并在文件上设置 EOF 标记来截断打开的文件。例如，在 Win32 API 中，您可以使用`SetFilePointer()`和来做到这一点`SetEndOfFile()`。

# java - 在两台连接的计算机之间发送数据包的最快方法？

> ID：10254755
> 
> 赞同：7
> 
> 时间：2012-04-20T23:21:07.230
> 
> 标签：java, windows, linux, udp

（我在询问之前进行了搜索，但我只能找到最快的 Java IPC 技术）

在 Windows 和 Linux 上（如果每个操作系统的答案不同），在 Java 中（通过一根以太网电缆连接）的两台计算机之间发送数据包的最快方法是什么？

我猜想 UDP 会比 TCP 快（由于 TCP 的三向握手方案），但还有其他需要考虑的因素吗？

我们是否仅限于套接字（Unix-specific answer？）还是有替代方案？可以使用哪些技术尽可能快地发送/接收 UDP？

同样，是否有特定的高性能方式来接收和读取从另一台计算机发送的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:40:21.197

好吧，如果您忽略连接/断开连接延迟，则 TCP/UDP 之间没有太多关系。如果您的协议可以保持 TCP 连接并禁用不适当的、导致延迟的优化（如 Nagle 算法），我不明白为什么应该取消 TCP 作为解决方案，尽管需要在顶层协议有点复杂交换任何大于一个字节的消息。

无论如何，大多数网络速率和延迟性能通常都受到 phy 和路由约束的限制。查看两个对等方之间的一个数据包，您使用什么 IP 协议并不重要，因为狡猾的路由器、c-limited 卫星链路、拥塞的光纤、嘈杂和重传的微波/wifi/3G 链路以及最后的垃圾-无论如何，英里铜都会让你感到厌烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T00:37:10.027

答案是通过[信鸽](http://westernsydneyaccess.com.au/read/23)。其他替代品包括sneakernet 和autonet。我更喜欢自行车网。

# sql - 使用案例声明更新自

> ID：10254757
> 
> 赞同：-3
> 
> 时间：2012-04-20T23:21:10.390
> 
> 标签：sql, sql-server, sql-server-2008, tsql, sql-update

我正在尝试使用第一个表中的数据更新表。我正在尝试写这样的东西：

```
-- Create the temp tables
DROP TABLE #MyNewTable
CREATE TABLE #MyNewTable
    (
     UserId int IDENTITY(1, 1)
                NOT NULL,
     MarriedFlag bit NOT NULL
    )

DROP TABLE #MyOldTable
CREATE TABLE #MyOldTable
    (
     UserId int IDENTITY(1, 1)
                NOT NULL,
     Married nvarchar(50) NULL
    )

-- Insert test values
INSERT  INTO #MyOldTable
        ([Married])
VALUES  ('married'),
        ('married'),
        ('not married'),
        ('maybe married')
GO

-- First pass will do nothing as there is no data in #MyNewTable
UPDATE  #MyNewTable
SET     [MarriedFlag] = CASE I.[Married]
                          WHEN 'married' THEN 1
                          ELSE 0
                        END
FROM    [#MyOldTable] AS I,
        [#MyOldTable] AS O
WHERE   I.[UserId] = O.[UserId]

-- Will insert 4 values into #MyNewTable
SET IDENTITY_INSERT [#MyNewTable] ON

INSERT  INTO #MyNewTable
        ([UserId],
         [MarriedFlag])
        SELECT  I.[UserId],
                CASE I.[Married]
                  WHEN 'married' THEN 1
                  ELSE 0
                END
        FROM    [#MyOldTable] AS I
        WHERE   I.[UserId] NOT IN (SELECT   [UserId]
                                   FROM     [#MyNewTable])

SET IDENTITY_INSERT [#MyNewTable] OFF

SELECT  *
FROM    [#MyOldTable]

-- #MyOldTable Expected Output
UserId Married
1    married
2    married
3    not married
4    maybe married

SELECT  *
FROM    [#MyNewTable]

-- #MyNewTable Expected Output
UserId MarriedFlag
1    1
2    1
3    0
4    0 
```

还有一点需要注意的是，这是触发器的一部分。这个想法是当旧表更新时，新值被清除，如果它们有效，则将其插入新表中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T07:20:26.683

尝试这个。我想我知道你想做什么。这将创建一个带有 IsMarried 标志而不是描述性值的新表。

让我知道。

苹果电脑

```
 SELECT OLD.id
    ,   OLD.[Name]
    ,   CASE (OLD.MaritalStatus )
            WHEN 'Married' then 1
        ELSE
            0   
        END AS IsMarried
INTO dbo.newTable
FROM dbo.oldTable AS OLD 
```

表格：

老的：

```
id  Name             MaritalStatus

1   Jack             Divorced  
2   Jill             Married   
3   James            Single    
4   Mark             Married 
```

新的：

```
id  Name           IsMarried

1   Jack           0
2   Jill           1
3   James          0
4   Mark           1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:52:41.407

您没有加入任何内部/外部查询。如果您在派生表（id）中返回另一个字段并加入它，您会没事的。在添加额外的 id 字段之前，您需要结束您的 case 语句。

# android - Android - 带有图标和文本的 Gridview

> ID：10254762
> 
> 赞同：0
> 
> 时间：2012-04-20T23:21:43.100
> 
> 标签：android, android-layout

我正在尝试将图像添加到每张图片下带有文本标签的网格视图。当我运行代码时，它总是强制关闭。我无法弄清楚代码有什么问题。

```
package com.petedroid.euro2012;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.GridView;
import android.widget.ImageView;
import android.widget.TextView;

public class psquads extends Activity 
{

@Override
public void onCreate(Bundle savedInstanceState){
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  GridView gridview = (GridView) findViewById(R.id.gridview);
  gridview.setAdapter(new ImageAdapter(this));
}

public class ImageAdapter extends BaseAdapter
{
   private Context mContext;

   public ImageAdapter(Context c) {
      mContext = c;
  }

  public int getCount() {
      return mThumbIds.length;              
  }

  public Object getItem(int position) {
      return null;
  }

  public long getItemId(int position) {
      return 0;
  }

  public View getView(int position, View convertView, ViewGroup parent){
      View MyView = convertView;
      if (convertView == null) {

          //Inflate Layout
          LayoutInflater li = getLayoutInflater();
          MyView = li.inflate(R.layout.griditem, null);

          //Get Image
          ImageView iv = (ImageView)MyView.findViewById(R.id.grid_item_image);
          iv.setImageResource(mThumbIds[position]);

          //Get Text
          TextView tv = (TextView)MyView.findViewById(R.id.grid_item_text);
          tv.setText(names[position] );
      }  

     return MyView;
  }

 }

 //Images
 private Integer[] mThumbIds = {
        R.drawable.croatia, R.drawable.republic,
        R.drawable.denmark, R.drawable.england,
        R.drawable.france, R.drawable.germany,
        R.drawable.greece, R.drawable.ireland,
        R.drawable.italy, R.drawable.netherlands,
        R.drawable.poland, R.drawable.portugal,
        R.drawable.russia, R.drawable.spain,
        R.drawable.sweden, R.drawable.ukraine,};

 //Text
 private String[] names={
       "Croatia","Czech Republic","Denmark", "England",
       "France","Germany","Greece", "Ireland", 
       "Italy", "Netherlands", "Poland", "Portugal", 
       "Russia", "Spain", "Sweden", "Ukraine", };
} 
```

这是日志

```
04-21 00:07:33.384: E/global(27521): Deprecated Thread methods are not supported.
04-21 00:07:33.384: E/global(27521): java.lang.UnsupportedOperationException
04-21 00:07:33.384: E/global(27521):    at java.lang.VMThread.stop(VMThread.java:85)
04-21 00:07:33.384: E/global(27521):    at java.lang.Thread.stop(Thread.java:1379)
04-21 00:07:33.384: E/global(27521):    at java.lang.Thread.stop(Thread.java:1344)
04-21 00:07:33.384: E/global(27521):    at com.petedroid.euro2012.SplashScreenActivity$1.run(SplashScreenActivity.java:35)
04-21 00:07:35.368: D/AndroidRuntime(27521): Shutting down VM
04-21 00:07:35.368: W/dalvikvm(27521): threadid=1: thread exiting with uncaught exception (group=0x4001d7d0)
04-21 00:07:35.380: E/AndroidRuntime(27521): FATAL EXCEPTION: main
04-21 00:07:35.380: E/AndroidRuntime(27521): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.petedroid.euro2012/com.petedroid.euro2012.psquads}: java.lang.NullPointerException
04-21 00:07:35.380: E/AndroidRuntime(27521):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at android.os.Looper.loop(Looper.java:123)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at android.app.ActivityThread.main(ActivityThread.java:4627)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at java.lang.reflect.Method.invokeNative(Native Method)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at java.lang.reflect.Method.invoke(Method.java:521)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:871)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:629)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at dalvik.system.NativeStart.main(Native Method)
04-21 00:07:35.380: E/AndroidRuntime(27521): Caused by: java.lang.NullPointerException
04-21 00:07:35.380: E/AndroidRuntime(27521):    at com.petedroid.euro2012.psquads.onCreate(psquads.java:24)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-21 00:07:35.380: E/AndroidRuntime(27521):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
04-21 00:07:35.380: E/AndroidRuntime(27521):    ... 11 more
04-21 00:08:14.755: I/dalvikvm(27521): threadid=3: reacting to signal 3
04-21 00:08:17.415: E/dalvikvm(27521): Failed to write stack traces to /data/anr/traces.txt (-1 of 2650): Math result not representable
04-21 00:08:26.317: I/Process(27521): Sending signal. PID: 27521 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:26:20.067

我只能看到两件事...如果您的代码行与我的计数一致，那么`findViewById()`您的 gridView 似乎返回 null，请确保它在您的布局中，如所述。其次看起来你在你的 splashScreen 中调用 Thread.stop() ，并且 Thread.stop() 没有在 Dalvik VM 中实现。

# mysql - MySQL 总是填充 NULL 值，我缺少什么（Play 1.2 框架）？

> ID：10254764
> 
> 赞同：0
> 
> 时间：2012-04-20T23:21:51.470
> 
> 标签：mysql, playframework, playframework-1.x

**view.html 看起来像这样，我缺少什么，因为表中填充了空值？**

```
 <form class="form-inline form-fields" action="SubmitArticle" method="POST">

                    <fieldset>
                    <div class="control-group success">
                    <label class="control-label" for="input01"><a>Author Name</a></label>
                    <div class="controls">
                    <input type="text" class="input-xlarge" id="input01" name="${article?.author}">
                    </div>
                    </div>

                    <div class="form-actions">
                    <button class="btn btn-success btn-large span2" type="submit" name="commit"> Submit </button>
                    </div>      

                    <div class="control-group right-area success">
                    <label class="control-label" for="input01"><a>Abstract</a></label>
                    <div class="controls">
                    <textarea id="textarea" class="input-xlarge" rows="3" style="width: 498px; height: 283px;" name="${article?.abstract}"></textarea>
                    </div>
                    </div>

                </fieldset>

           </form> 
```

**我的控制器中的操作如下所示：**

```
 public static void SubmitArticle(String article_name, User author, String         article_abstract) {

        Article article = new Article(article_name, author, article_abstract);
        article.save();
              } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T07:08:50.910

```
<input type="text" class="input-xlarge" id="input01" name="${article?.author}"> 
```

名称字段不正确，名称字段应与将在您的对象中映射到的属性相同。你设置的`${article?.author}`应该是值。阅读更多关于表单到对象绑定的内容。

# emacs - 用于模仿 Scribble 或 HTDP 示例代码示例的 Racket Emacs 模式？

> ID：10254765
> 
> 赞同：2
> 
> 时间：2012-04-20T23:21:58.397
> 
> 标签：emacs, racket, htdp

我真的很喜欢如何设计程序中代码示例的语法突出显示和着色。例如：

[http://www.htdp.org/2003-09-26/Book/curriculum-ZH-9.html#node_sec_6.5](http://www.htdp.org/2003-09-26/Book/curriculum-Z-H-9.html#node_sec_6.5)

有没有人有这样的东西作为 Emacs 主要模式编辑源代码的起点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T13:15:08.527

Neil Van Dyke 创建了一个用于编辑 Scribble 文档的[Emacs 主要模式。](http://www.neilvandyke.org/scribble-emacs/)不幸的是，它不会为源代码着色。但这是在 Emacs 中使用嵌入式 Racket 代码编辑文档的最佳方式。

在非 Emacs 编辑器领域，DrRacket 确实在 Scribble 文档中正确地突出显示了代码和文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T15:30:59.697

您是否可能正在寻找支持源代码突出显示的 Emacs 主要模式？如果您是，请查看[http://docs.racket-lang.org/guide/Emacs.html](http://docs.racket-lang.org/guide/Emacs.html)，其中描述了支持 Racket 并带有源代码突出显示的几种 Emacs 主要模式。

# sql - 复制记录以填补日期之间的空白

> ID：10254769
> 
> 赞同：8
> 
> 时间：2012-04-20T23:22:24.160
> 
> 标签：sql, oracle, relational-database, oracle-analytics

我需要做一些非常奇怪的事情，那就是创建虚假记录**，**以填补产品价格发布日期之间的空白。

实际上，我的情况比这要复杂一些，但我已经简化为产品/日期/价格。

假设我们有这张表：

```
create table PRICES_TEST
(
   PRICE_DATE    date          not null,
   PRODUCT       varchar2(13) not null,
   PRICE         number
);

alter table PRICES_TEST 
  add constraint PRICES_TEST_PK
    primary key (PRICE_DATE, PRODUCT); 
```

有了这些记录：

```
insert into PRICES_TEST values (date'2012-04-15', 'Screw Driver', 13);
insert into PRICES_TEST values (date'2012-04-18', 'Screw Driver', 15);

insert into PRICES_TEST values (date'2012-04-13', 'Hammer', 10);
insert into PRICES_TEST values (date'2012-04-16', 'Hammer', 15);
insert into PRICES_TEST values (date'2012-04-19', 'Hammer', 17); 
```

选择记录将返回给我：

```
PRICE_DATE                PRODUCT       PRICE                  
------------------------- ------------- ---------------------- 
13-Apr-2012 00:00:00      Hammer        10                     
16-Apr-2012 00:00:00      Hammer        15                     
19-Apr-2012 00:00:00      Hammer        17                     
15-Apr-2012 00:00:00      Screw Driver  13                     
18-Apr-2012 00:00:00      Screw Driver  15 
```

假设今天是 2012 年 4 月 21 日，我需要一个每天重复每个价格**的视图，直到发布新价格。**像这样：

```
PRICE_DATE                PRODUCT       PRICE                  
------------------------- ------------- ---------------------- 
13-Apr-2012 00:00:00      Hammer        10                     
14-Apr-2012 00:00:00      Hammer        10                     
15-Apr-2012 00:00:00      Hammer        10                     
16-Apr-2012 00:00:00      Hammer        15                     
17-Apr-2012 00:00:00      Hammer        15                     
18-Apr-2012 00:00:00      Hammer        15                     
19-Apr-2012 00:00:00      Hammer        17                     
20-Apr-2012 00:00:00      Hammer        17                     
21-Apr-2012 00:00:00      Hammer        17                     
15-Apr-2012 00:00:00      Screw Driver  13                     
16-Apr-2012 00:00:00      Screw Driver  13                     
17-Apr-2012 00:00:00      Screw Driver  13                     
18-Apr-2012 00:00:00      Screw Driver  15                     
19-Apr-2012 00:00:00      Screw Driver  15                     
20-Apr-2012 00:00:00      Screw Driver  15                     
21-Apr-2012 00:00:00      Screw Driver  15 
```

任何想法如何做到这一点？我**不能真正使用其他辅助表、触发器或 PL/SQL 编程，我真的需要使用****视图**来做到这一点。

我认为这可以使用 oracle 分析来完成，但我对此并不熟悉。我试图阅读这个[http://www.club-oracle.com/articles/analytic-functions-i-introduction-164/](http://www.club-oracle.com/articles/analytic-functions-i-introduction-164/)但我根本没有明白。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T00:23:46.647

您可以使用语法创建行生成器语句`CONNECT BY LEVEL`，与表中的不同产品交叉连接，然后将其外部连接到您的价格表。最后一步是使用该`LAST_VALUE`函数并`IGNORE NULLS`重复价格，直到遇到新值，并且由于您想要一个视图，因此使用以下`CREATE VIEW`语句：

```
create view dense_prices_test as
select
    dp.price_date
  , dp.product
  , last_value(pt.price ignore nulls) over (order by dp.product, dp.price_date) price
from (
      -- Cross join with the distinct product set in prices_test
      select d.price_date, p.product
      from (
            -- Row generator to list all dates from first date in prices_test to today
            with dates as (select min(price_date) beg_date, sysdate end_date from prices_test)
            select dates.beg_date + level - 1 price_date 
            from dual
            cross join dates
            connect by level <= dates.end_date - dates.beg_date + 1
            ) d
      cross join (select distinct product from prices_test) p
     ) dp
left outer join prices_test pt on pt.price_date = dp.price_date and pt.product = dp.product; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-21T00:23:35.133

我想我有一个解决方案，使用增量方法来获得 CTE 的最终结果：

```
with mindate as
(
  select min(price_date) as mindate from PRICES_TEST
)
,dates as
(
  select mindate.mindate + row_number() over (order by 1) - 1 as thedate from mindate,
    dual d connect by level <= floor(SYSDATE - mindate.mindate) + 1
)
,productdates as
(
  select p.product, d.thedate
  from (select distinct product from PRICES_TEST) p, dates d
)
,ranges as
(
  select
    pd.product,
    pd.thedate,
    (select max(PRICE_DATE) from PRICES_TEST p2
     where p2.product = pd.product and p2.PRICE_DATE <= pd.thedate) as mindate
    from productdates pd
)
select 
    r.thedate,
    r.product,
    p.price
from ranges r
inner join PRICES_TEST p on r.mindate = p.price_date and r.product = p.product
order by r.product, r.thedate 
```

*   `mindate`检索数据集中最早的可能日期
*   `dates`生成从最早可能日期到今天的日期日历。
*   `productdates`交叉连接所有可能日期的所有可能产品
*   `ranges`确定在每个日期应用的价格日期
*   `inner join`最终查询链接哪个价格日期适用于实际价格，并通过条件过滤掉没有相关价格日期的日期

演示：[http ://www.sqlfiddle.com/#!4/e528f/126](http://www.sqlfiddle.com/#!4/e528f/126)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-21T04:30:34.167

我对 Wolf 的出色回答做了一些更改。

我将子查询因式分解 ( `WITH`) 替换为`connect by`. 这使代码更简单一些。（尽管这种类型的代码一开始看起来很奇怪，所以这里可能不会有很大的收获。）

最重要的是，我使用了分区外连接，而不是交叉连接和外连接。分区外连接也有点奇怪，但它们正是针对这种情况的。这使代码更简单，并且应该提高性能。

```
select
    price_dates.price_date
    ,product
    ,last_value(price ignore nulls) over (order by product, price_dates.price_date) price
from
(
    select trunc(sysdate) - level + 1 price_date
    from dual
    connect by level <= trunc(sysdate) -
        (select min(trunc(price_date)) from prices_test) + 1
) price_dates
left outer join prices_test
    partition by (prices_test.product)
    on price_dates.price_date = prices_test.price_date; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T17:59:26.110

我刚刚意识到@Wolf 和@jonearles 的改进不会返回我需要的确切结果，因为列出所有日期的行生成器不会按产品生成范围。如果产品 A 的第一个价格晚于产品 B 的任何价格，则产品 A 的第一个上市日期仍然必须相同。但他们确实帮助我进一步工作并获得了预期的结果：

我从更改 @wolf 的日期范围选择器开始：

```
select min(price_date) beg_date, sysdate end_date from prices_test 
```

对此：

```
select min(PRICE_DATE) START_DATE, sysdate as END_DATE, PRODUCT 
from PRICES_TEST group by sysdate, PRODUCT 
```

但是，不知何故，每个产品的行数在每个级别都呈指数级重复增长。我只是在外部查询中添加了一个 distinct。最后的选择是这样的：

```
select
  DP.PRICE_DATE,
  DP.PRODUCT,
  LAST_VALUE(PT.PRICE ignore nulls) over (order by DP.PRODUCT, DP.PRICE_DATE) PRICE
from (
  select distinct START_DATE + DAYS as PRICE_DATE, PRODUCT 
  from 
  (
    -- Row generator to list all dates from first date of each product to today
    with DATES as (select min(PRICE_DATE) START_DATE, sysdate as END_DATE, PRODUCT from PRICES_TEST group by sysdate, PRODUCT)
    select START_DATE, level - 1 as DAYS, PRODUCT
    from DATES
    connect by level < END_DATE - START_DATE + 1
    order by 3, 2
  ) d order by 2, 1
) DP
left outer join prices_test pt on pt.price_date = dp.price_date and pt.product = dp.product; 
```

@Mellamokb 解决方案实际上是我真正需要的，而且肯定比我的 noobie 解决方案更好。

感谢大家不仅在这方面帮助我，而且还向我展示了“with”和“connect by”等功能。

# java - Java RegEx 匹配除文字字符串 'NIL' 或 'nil' 之外的任何内容

> ID：10254774
> 
> 赞同：8
> 
> 时间：2012-04-20T23:23:16.910
> 
> 标签：java, regex, null

好，朋友们。这是一个 Java 面试类型的问题，似乎难倒了一些非常聪明的人。他们实际上需要这个用于生产代码，所以它不仅仅是一个面试难题。

他们需要一个正则表达式，在 Java 中，如果字符串文字不是 3 个字母的单词 NIL，则返回*true*。测试需要不区分大小写，RegEx 本身必须完成所有工作。

因此，RegEx 应该拒绝**NIL、nil、NiL、nIL**等。

但是，它应该接受：nile、anil、will、zappa-nil-a 和空字符串。

*编写一个微不足道的 RegEx 需要多少 Java 开发人员？显然很多！*

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-20T23:26:13.787

您可以使用[负前瞻](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CC0QFjAA&url=http://www.regular-expressions.info/lookaround.html&ei=GPGRT5nSHqnliAKe_YziDQ&usg=AFQjCNH50o6T1e3LK70EJqezzZTLsRPRhw&sig2=xuTvDIrwSy5vkguGMhTSSg)来做到这一点。

启用不区分大小写的选项：

```
^(?!nil$).* 
```

`.*`如果您不需要在匹配中实际返回字符串，则可以在最后省略。这是一个没有不区分大小写选项的版本：

```
^(?![nN][iI][lL]$).* 
```

解释：

```
^       # start of string anchor
(?!     # start negative lookahead (fail if...)
   nil    # literal characters 'nil'
   $      # end of string
)       # end lookahead
.*      # consume string (not necessary, but it acts more like a typical regex) 
```

如果您希望正则表达式匹配，则在前瞻中`nil\n`使用`\z`而不是：`$``^(?!nil\z).*`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-21T04:12:10.137

这是一个真正的正则表达式，它直接指定一个有限自动机，可以一个一个地输入字符串的字符，如果字符串不是 NIL 上的变体，它将达到接受状态：

```
 (|.|..|[^Nn]..|.[^Ii].|..[^Ll]|....+) 
```

这将适用于不实施环视黑客的经典正则表达式引擎，并且可以转换为极快的 DFA。

您可能必须使用`^`and来锚定它`$`，具体取决于您使用的正则表达式函数类型：（整个字符串）匹配语义或子字符串搜索语义。

例如，grep 测试：

```
 # rejects lines like nIl and NiL but accepts all else
 # including blank lines:

 grep -E '^(|.|..|[^Nn]..|.[^Ii].|..[^Ll]|....+)$' 
```

这里的想法是：

1.  所有长度为 1、2 或 4 或更多的字符串都匹配。
2.  一个三字符的字符串匹配当且仅当：
    1.  它不以 N 或 n 开头；或者
    2.  它中间没有 I 或 i；或者
    3.  它的末尾没有 L 或 l。

NIL 和 Nil 被拒绝的原因是它们不符合所有三个规则 2.1、2.2 和 2.3。NIL 确实以 N 开头，因此它在 2.1 中失败。它中间确实有一个 I，所以它失败了 2.2，它的末尾确实有一个 L，所以它失败了 2.3。

# .net - 解释 MEF 如何对程序集没有硬依赖

> ID：10254782
> 
> 赞同：0
> 
> 时间：2012-04-20T23:24:11.573
> 
> 标签：.net, mef

通读这篇 MSDN 文章[http://msdn.microsoft.com/en-us/library/dd460648.aspx](http://msdn.microsoft.com/en-us/library/dd460648.aspx)我看到有人声称 MEF 对程序集没有硬依赖。我不确定这意味着什么，因为即使合同是字符串，MEF 仍然按字符串解析，然后按类型解析。所以宿主程序集和扩展程序集都需要对契约程序集的引用。这不是硬依赖吗？

> 托管可扩展性框架或 MEF 是一个用于创建轻量级、可扩展应用程序的库。它允许应用程序开发人员无需配置即可发现和使用扩展。它还让扩展开发人员可以轻松地封装代码并避免**脆弱的硬依赖**。MEF 不仅允许在应用程序内重用扩展，还允许跨应用程序重用。
> 
> * * *
> 
> 最后，组件开发人员必须接受对包含他们实现的接口的程序集的**硬依赖。**这使得一个组件很难在多个应用程序中使用，并且在为组件创建测试框架时也会产生问题。
> 
> * * *
> 
> 因为 MEF 模型**不需要**对特定应用程序程序集的硬依赖，它允许在应用程序之间重用扩展。这也使得开发独立于应用程序的测试工具来测试扩展组件变得容易。

谁可以给我解释一下这个？也许我误解了硬依赖到底是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T23:26:07.347

这是说唯一的硬依赖（意味着您明确引用程序集）是定义您的程序集的*interface*。具有该接口的特定*实现*的程序集不是硬依赖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T21:04:31.223

通常，MEF 中的大多数场景都围绕 1) 主机、2) 插件和 3) 插件合约。例如，主机：

```
public class Host
{
    [ImportMany] IEnumerable<IPlugin> Plugins { get; set; }
} 
```

一个插件：

```
public class SomePlugin : IPlugin
{
    // Operations
} 
```

插件合约：

```
public interface IPlugin { } 
```

Now, the host takes a hard (explicit) reference on the plugin contract. The plugin also takes a hard reference on the plugin contract. At composition time, MEF uses late binding to load the plugin assembly at runtime. Because of this, your host doesn't explicitly depend on the plugin assembly, its only dependency is the plugin contract assembly.

# android - 从包含的项目中看不到 Eclipse Android 项目类。没有任何效果

> ID：10254798
> 
> 赞同：0
> 
> 时间：2012-04-20T23:26:32.303
> 
> 标签：android, eclipse

我有一个依赖于项目 B 的项目 A。我已将其添加为项目，但无论我做什么，项目 B 中的类都不可见。有100个错误。有时我会打开关闭项目 A 一段时间，然后它就可以工作了。现在没有任何效果。甚至没有将项目 B 生成的 jar 文件放入 A 的库列表中。它只是拒绝查看和确认这些类。我需要重新安装eclipse吗？

许多无法解决类型错误。基本上我在 A 项目 B 中看不到任何东西，所以有很多未找到的异常。现在总是很古怪，即使 A 关闭，也没有看到 B 的课程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T10:00:20.240

只需清理两个/重建项目，以刷新依赖项

# php - AJAX 多个下拉菜单

> ID：10254799
> 
> 赞同：1
> 
> 时间：2012-04-20T23:26:40.200
> 
> 标签：php, javascript, html, ajax, drop-down-menu

我正在查看此站点以进行多重下拉：[Roshan 的博客](http://roshanbh.com.np/2008/01/populate-triple-drop-down-list-change-options-value-from-database-using-ajax-and-php.html)

而且大部分都在工作，我只是遇到了第三个下拉框的问题。
（下拉 1：客户，下拉 2：位置，下拉 3：区域）

到目前为止，在我的页面上，如果我查看源代码，在选择第一个下拉列表（Client1）后，第二个下拉语句说：
`<select style="width: 150px;" id="add-event-dialog-location" name="add-event-dialog-location" onchange="getZone(Client1,this.value)">`

这是我需要的，但是现在，当我单击第二个下拉菜单中的一个选项时，它不会通过 getZone() 脚本放置。“zonediv”没有改变，我不确定其余的是否通过。如果我自己加载 getZone.php 并将我自己的 GET 语句放入 URL 中，我会得到结果，但我无法在我从中调用下拉列表的页面中获取它们。

我可能只是错过了一些小东西，但我已经看了很长时间，以至于我无法弄清楚。

的HTML：

```
<select style="width: 150px;" name="add-event-dialog-client_name" id="add-event-dialog-client_name" onchange="getLocation(this.value)">
                    <?php
                        echo "<option selected='selected' disabled='disabled'>-Client Name-</option>";
                        $result = mysql_query("SELECT DISTINCT client_name FROM spc_clients");
                        while($row = mysql_fetch_array($result)){
                           echo "<option value='".$row['client_name']."'>".$row['client_name']."</option>";
                        }
                    ?>
               </select>
               <p id="locationdiv">
               <select style="width: 150px;" name="add-event-dialog-location" id="add-event-dialog-location" disabled="disabled">
                    <option>Select Client First</option>
               </select>
               </p>
               <p id="zonediv">
               <select style="width: 150px;" name="add-event-dialog-zone" id="add-event-dialog-zone" disabled="disabled">
                    <option>Select Location First</option>
               </select>
               </p> 
```

两个 JS 函数：

```
function getLocation(client_name) {     
    var strURL="display/getLocation.php?client_name="+client_name;
    var req = getXMLHTTP();

    if (req) {
        req.onreadystatechange = function() {

            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                    document.getElementById('locationdiv').innerHTML=req.responseText;                      
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }               
        }           
        req.open("GET", strURL, true);
        req.send(null);
    }       
}

function getZone(client_name,location) {        
    var strURL="display/getZone.php?client_name="+client_name+"&location="+location;
    var req = getXMLHTTP();

    if (req) {
        req.onreadystatechange = function() {

            if (req.readyState == 4) {
                // only if "OK"
                if (req.status == 200) {                        
                    document.getElementById('zonediv').innerHTML=req.responseText;                      
                } else {
                    alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                }
            }               
        }           
        req.open("GET", strURL, true);
        req.send(null);
    }       
} 
```

获取位置.php：

```
<?php 
include 'connect.php';

$client = $_GET['client_name'];

$query="SELECT location FROM spc_clients WHERE client_name='$client'";
$result=mysql_query($query) or die(mysql_error());

?>
<select style="width: 150px;" id="add-event-dialog-location" name="add-event-dialog- location" onchange="getZone(<?=$client?>,this.value)">
<option selected='selected' disabled='disabled'>-Location-</option>
<?php 
while($row = mysql_fetch_array($result)){
    echo "<option value='".$row['location']."'>".$row['location']."</option>";}
?>
</select> 
```

getZone.php：

```
<?php 
include 'connect.php';

$client = $_GET['client_name']; echo $client;
$location = $_GET['location']; echo $location;

$query="SELECT zone FROM spc_clients WHERE (client_name='$client' &&     location='$location')";
$result=mysql_query($query) or die(mysql_error());
?>

<select style="width: 150px;" id="add-event-dialog-zone" name="add-event-dialog-zone">
<option selected='selected' disabled='disabled'>-Zone-</option><option><?php 
while($row = mysql_fetch_array($result)){
    echo $row['zone'];}
?>
</option>
</select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:14:58.440

尝试在 Client1 周围加上引号 - 没有引号，javascript 认为它是一个变量，并且由于您没有定义任何名为 Client1 的变量，因此您会收到错误消息。在它周围加上引号使它成为一个字符串，这是您想要传递给 getZone() 的内容。

试着把它放在 getLocation.php 中：

`<select style="width: 150px;" id="add-event-dialog-location" name="add-event-dialog- location" onchange="getZone('<?=$client?>',this.value)">`

如果您的任何客户端名称中包含引号，您必须确保将它们转义，请参阅此处了解如何执行此操作： [将 PHP 字符串传递给 JavaScript 变量（并转义换行符）](https://stackoverflow.com/questions/168214/pass-a-php-string-to-a-javascript-variable-including-escaping-newlines)。

# mysql - 如何在嵌套查询中强制正确排序

> ID：10254802
> 
> 赞同：0
> 
> 时间：2012-04-20T23:27:04.673
> 
> 标签：mysql, sql

我有两个表，一个项目，一个标记了项目的用户。这是一个例子：

```
items:                              flags:

item_id | item_name | owner_id      item_id | flagged_by
------------------------------      --------------------
1       | foo       | 1             1       | 2
2       | bar       | 2             2       | 4
3       | baz       | 2             2       | 7
                                    2       | 7 
```

我想从项目表中选择有关标志表中所有项目的信息，按标志数排序。所以对于上面的例子，我想要的输出是

```
item_id | item_name | owner_id
------------------------------
2       | bar       | 2
1       | foo       | 1 
```

我现在的查询是`select * from items where id in (select item_id from flags group by item_id order by count(*) desc);`

我知道内部查询可以正常工作（以正确的顺序返回所有 ID），但是当我运行整个查询时，我只是按项目 ID 的顺序获取项目。如何修复我的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:42:34.327

您当前仅对子查询进行排序，这对外部查询的顺序没有影响。如果您加入表而不是使用子查询，您应该能够将订单应用于整个查询：

```
 select i.*
    from items i
    join flags f on i.item_id = f.item_id
group by i.item_id
order by count(f.item_id) desc 
```

演示：[http ://www.sqlfiddle.com/#!2/f141b/2](http://www.sqlfiddle.com/#!2/f141b/2)

# android - 从服务调用方法来更新活动中的 TextView

> ID：10254804
> 
> 赞同：0
> 
> 时间：2012-04-20T23:27:09.973
> 
> 标签：android, service, android-activity

我有一个项目应该从位置管理器接收当前位置，然后更新向用户显示这些坐标的活动中的文本视图。我们希望位置管理器在后台作为服务运行。目前，即使我打开了活动，只要从服务中调用位置更新和更新 textViews 的方法，我们就会强制关闭。我也无法将方法更改为静态方法，因为静态与 textViews 不兼容。下面是服务、被调用的方法和堆栈跟踪。

位置更改时调用的服务中的方法

```
 public void onLocationChanged(Location location) {
            currentLocation = location;
            SplashActivity.historyList.add(currentLocation);
            Toast.makeText(getApplicationContext(), "Point added",
                    Toast.LENGTH_SHORT).show();
            //postpones the update until NavigatorActivity starts
            if (NavigatorStarted) {
            new NavigatorActivity().doActionFine(currentLocation);
            }
            // these lines are controversial...
            if (location.getAccuracy() > 1000 && location.hasAccuracy())
                locationManager.removeUpdates(this);                          

        } 
```

活动中的方法，旨在通过准确的 GPS 信号或粗略信号更新具有新位置的文本视图。使用 do 操作方法从服务调用 LocationService 中的当前位置参数

```
public void updateLocationTextViewsFine(Location currentLocation) {
    currentLatView = (TextView) findViewById(R.id.currentLat);
    currentLonView = (TextView) findViewById(R.id.currentLon);
    // update the textviews (labels)
    String lat = currentLocation.getLatitude() + " (accurate)";
    String lon = currentLocation.getLongitude() + " (accurate)";
    currentLatView.setText(lat);
    currentLonView.setText(lon);
}
public void updateLocationTextViewsCoarse(Location currentLocation) {
    currentLatView = (TextView) findViewById(R.id.currentLat);
    currentLonView = (TextView) findViewById(R.id.currentLon);
    // update the textviews (labels)
    String lat = currentLocation.getLatitude() + " (low accuracy)";
    String lon = currentLocation.getLongitude() + " (low accuracy)";
    currentLatView.setText(lat);
    currentLonView.setText(lon);
}

public  void doActionFine(Location currentLocation) {
    updateLocationTextViewsFine(currentLocation);
}

public void doActionCoarse(Location currentLocation) {
    updateLocationTextViewsCoarse(currentLocation);
} 
```

收到新错误。

```
04-20 20:15:33.894: E/AndroidRuntime(4389): FATAL EXCEPTION: main
04-20 20:15:33.894: E/AndroidRuntime(4389): java.lang.NullPointerException
04-20 20:15:33.894: E/AndroidRuntime(4389):     at android.app.Activity.findViewById(Activity.java:1637)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at com.example.UVAMapsProject.NavigatorActivity.updateLocationTextViewsFine(NavigatorActivity.java:341)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at com.example.UVAMapsProject.NavigatorActivity.doActionFine(NavigatorActivity.java:360)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at com.example.UVAMapsProject.LocationService$2.onLocationChanged(LocationService.java:116)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at android.location.LocationManager$ListenerTransport._handleMessage(LocationManager.java:191)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at android.location.LocationManager$ListenerTransport.access$000(LocationManager.java:124)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at android.location.LocationManager$ListenerTransport$1.handleMessage(LocationManager.java:140)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at android.os.Looper.loop(Looper.java:123)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at android.app.ActivityThread.main(ActivityThread.java:4627)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at java.lang.reflect.Method.invokeNative(Native Method)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at java.lang.reflect.Method.invoke(Method.java:521)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
04-20 20:15:33.894: E/AndroidRuntime(4389):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:00:34.727

这可以使用活页夹来完成：

[http://developer.android.com/guide/topics/fundamentals/bound-services.html](http://developer.android.com/guide/topics/fundamentals/bound-services.html)

然后在活动中按照上面文章中的示例进行操作。当您连接到服务时，询问当前位置（保存在服务或首选项中）。然后你给服务一个监听器，它会被调用。

这里有一些示例代码。缺少侦听器和 LocalService 类的实现。但只是为了表明我的意思。

```
public class BindingActivity extends Activity {
    LocalService mService;
    boolean mBound = false;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected void onStart() {
        super.onStart();
        // Bind to LocalService
        Intent intent = new Intent(this, LocalService.class);
        bindService(intent, mConnection, Context.BIND_AUTO_CREATE);
    }

    @Override
    protected void onStop() {
        super.onStop();
        // Unbind from the service
        if (mBound) {
            mService.removeListener(this);
            unbindService(mConnection);
            mBound = false;
        }
    }

    private ServiceConnection mConnection = new ServiceConnection() {

        @Override
        public void onServiceConnected(ComponentName className,
                IBinder service) {
            // We've bound to LocalService, cast the IBinder and get LocalService instance
            LocalBinder binder = (LocalBinder) service;
            mService = binder.getService();
            mBound = true;

            handleLocation(mService.getCurrentLocation());
            mService.addListener(BindingActivity.this);
        }

        @Override
        public void onServiceDisconnected(ComponentName arg0) {
            mBound = false;
        }
    };
} 
```

活动完成后，在解除绑定之前从服务中移除侦听器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T00:36:09.263

```
new NavigatorActivity().doActionFine(currentLocation); 
```

刚刚看到这个......你正在创建一个新的活动实例并调用它的方法。这个新实例与为打开锁而创建的活动不同，这是一个没有调用生命周期方法的新活动。我肯定会像另一个答案中显示的那样转向 Binder 方案

# c# - 匹配神秘有序的复杂正则表达式非捕获组的多个实例

> ID：10254807
> 
> 赞同：1
> 
> 时间：2012-04-20T23:27:27.553
> 
> 标签：c#, regex, parsing, .net-3.5

# TL;博士

我正在使用 C# 正则表达式解析报告，启用多行，使用具有命名组的单个（复杂）正则表达式模式处理整个文件。（和 CaptureCollection。）

我的报告部分出现乱序或以我无法预测的方式丢失。

无论它们出现的顺序如何，我如何匹配它们？

# 前言

我正在使用 System.Text.RegularExpressions 在 C# (.Net 3.5) 中使用正则表达式解析报告。报告的一部分如下所示：

```
 Section Z              0 __ base 10
                            2 __ 19/04 20:06:39
                            2 __ 19/04 20:15:49
                          1.8 __ 19/04 20:09:35
                          1.6 __ 19/04 20:07:01
                          1.6 __ 19/04 20:08:29
     Section 7            0.8 __ base 10
                            8 __ 18/04 21:03:01
                          7.3 __ 18/04 21:02:17
                          3.7 __ 19/04 08:41:09
                          3.4 __ 19/04 00:13:08
                          3.3 __ 18/04 21:02:50
     Section C              0 __ base 10
                         19.7 __ 19/04 10:25:06
                         11.1 __ 19/04 10:15:01
                          8.8 __ 19/04 10:14:50
                          7.2 __ 19/04 19:51:37
                          6.1 __ 19/04 14:19:47 
```

`(?mx)`我的正则表达式使用选项（MultiLine、IgnorePatternWhitespace）将文本文件作为一个整体进行匹配。因为统计部分对每个部分都有子统计信息，所以我采取了手动制作每个部分的（可选`?`）非捕获组 ( `(?:match_this_text)`) 并按照我认为它们发生的顺序将它们放入模式中，如下所示：

```
(?mx) #Turn on options multiline, ignore whitespace.
(?: # base 10 statistic sections
    (?:
        [\s-[\n\r]]*(?i:Section\sZ)\s+(?<base10_SectionZ>\d+\.\d|\d+)\s__\sbase\s10
        (?:\r?\n)+
        (?:\s+(?<base10_SectionZ_instance>\d+\.\d|\d+)\s__\s(?<base10_SectionZ_instance_time>\d\d/\d\d\s\d\d:\d\d:\d\d)(?:\r?\n)+)+
    )?
    (?:
        [\s-[\n\r]]*(?i:Section\s7)\s+(?<base10_Section7>\d+\.\d|\d+)\s__\sbase\s10
        (?:\r?\n)+
        (?:\s+(?<base10_Section7_instance>\d+\.\d|\d+)\s__\s(?<base10_Section7_instance_time>\d\d/\d\d\s\d\d:\d\d:\d\d)(?:\r?\n)+)+
    )?
    (?:
        [\s-[\n\r]]*(?i:Section\sC)\s+(?<base10_SectionC>\d+\.\d|\d+)\s__\sbase\s10
        (?:\r?\n)+
        (?:\s+(?<base10_SectionC_instance>\d+\.\d|\d+)\s__\s(?<base10_SectionC_instance_time>\d\d/\d\d\s\d\d:\d\d:\d\d)(?:\r?\n)+)+
    )?
) 
```

每个部分的非捕获组的第一行匹配“部分标题”，第二行匹配标题和统计实例之间的换行符，第三行匹配单个统计实例（重复，*n*个实例）。

# 问题

生成此报告的程序根据运行的版本，以不同的顺序输出每个部分（例如，Z 部分、7 部分、C 部分），并且某些部分在某些情况下会丢失。当我针对第二个测试文件运行它时，它失败了，因为这些部分是乱序的。

因此，C 部分可能出现在 Z 部分之前，但正则表达式模式期望 Z 出现在 C 之前。

基本上，我希望相同的正则表达式匹配和提取（使用上面的命名组）相同的数据，而不管这些部分出现的顺序如何，这样它就可以匹配上面的测试数据和这个测试数据：

```
 Section 7            0.8 __ base 10
                            8 __ 18/04 21:03:01
                          7.3 __ 18/04 21:02:17
                          3.7 __ 19/04 08:41:09
                          3.4 __ 19/04 00:13:08
                          3.3 __ 18/04 21:02:50
     Section C              0 __ base 10
                         19.7 __ 19/04 10:25:06
                         11.1 __ 19/04 10:15:01
                          8.8 __ 19/04 10:14:50
                          7.2 __ 19/04 19:51:37
                          6.1 __ 19/04 14:19:47
     Section Z              0 __ base 10
                            2 __ 19/04 20:06:39
                            2 __ 19/04 20:15:49
                          1.8 __ 19/04 20:09:35
                          1.6 __ 19/04 20:07:01
                          1.6 __ 19/04 20:08:29 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:55:29.110

你只想捕捉每个部分？

这不行吗？`(Section ..*(?:\r.*){0,5})`

[http://regexr.com?30nfd](http://regexr.com?30nfd)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:37:17.697

我想在这种情况下，拥有几个不同的正则表达式可能比一个巨大的正则表达式更好。我会[`File.RealAllLines`](http://msdn.microsoft.com/en-us/library/s2tte0y1.aspx)然后用 [`If String.Contains("Section")`](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx). 如果它包含部分，则创建一个新的部分对象，运行一个部分正则表达式来填充新的部分对象（部分名称和部分数据）。如果它不包含*部分*，则运行另一个正则表达式以获取其他部分数据并将其附加到当前部分对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T10:29:54.263

您可能希望使用 \G 选项将每个表达式锚定到前一个结果，这样您仍然可以确保您的部分之间没有任何不需要的内容。

您可以对一个部分使用更通用的表达式：

```
(?mx) #Turn on options multiline, ignore whitespace.
\G
(?: # base 10 statistic sections
    (?:
        [\s-[\n\r]]*(?i:Section\s(Z|7|C))\s+(?<base10_Section>\d+\.\d|\d+)\s__\sbase\s10
        (?:\r?\n)+
        (?:\s+(?<base10_Section_instance>\d+\.\d|\d+)\s__\s(?<base10_Section_instance_time>\d\d/\d\d\s\d\d:\d\d:\d\d)(?:\r?\n)+)+
    )
) 
```

然后验证一个部分没有重复或丢失。[看到它在行动](http://regexhero.net/tester/?id=94c42016-65a7-4849-85b6-76043d59528d)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T19:40:02.357

您不应该让正则表达式引擎选择不匹配任何内容。
在找到可选的东西之前，它会四处寻找很多“无”。

**编辑**

*如果你只想要一个块匹配*（任何顺序，但顺序），这样的东西会起作用。
你现在的方式，修改：

```
(?:
   (?: Section ...  (?<sec_7> 7)
   )
 | (?: Section ...  (?<sec_C> C)
   )?
 | (?: Section ...  (?<sec_Z> Z)
   )
)
(?: Section ...  (?!\k<sec_7>) (?<sec_7>  7) )?
(?: Section ...  (?!\k<sec_C>) (?<sec_C>  C) )?
(?: Section ...  (?!\k<sec_Z>) (?<sec_Z>  Z) )? 
```

如果它可以被分解，那么这样：

```
(?: Section ...  (?<sec_a>(?:7|C|Z) )
(?: Section ...  (?<sec_b>(?!\k<sec_a>)(?:7|C|Z)  )?
(?: Section ...  (?<sec_c>(?!\k<sec_a>|\k<sec_b>)(?:7|C|Z)  )?
#
# Then after match check <sec_a/b/c> for its value 
```

*如果您不关心块匹配：*
您的案例仅围绕 OR 条件。所以，它可以像这样简单：

```
# base 10 statistic sections
    (?: ..)
  |
    (?: ..)
  |
    (?: ..) 
```

必须在 while 循环中检查“base 10”部分匹配中的每个匹配项

```
Match m = Regex.Match(input, regex, RegexOptions.IgnorePatternWhitespace);
while (m.Success)
{
   if (m.Groups["base10_Section7"].Success)  {    }
   else
   if (m.Groups["base10_SectionZ"].Success)  {    }
   else
   if (m.Groups["base10_SectionC"].Success)  {    }
   m = m.NextMatch();
} 
```

甚至可以减少这种情况。例如 7,Z,C 可以组合成一个块。
这将使 OR (|) 用于匹配其他不同的项目，例如“base 2”
或任何其他形式。一种形式将匹配。无论如何都必须检查。

```
string input = @"
    Section Z              0 __ base 10
                           2 __ 19/04 20:06:39
                           2 __ 19/04 20:15:49
                         1.8 __ 19/04 20:09:35
                         1.6 __ 19/04 20:07:01
                         1.6 __ 19/04 20:08:29
    Section P           16.1 __ base 2
    Section 7            0.8 __ base 10
                           8 __ 18/04 21:03:01
                         7.3 __ 18/04 21:02:17
                         3.7 __ 19/04 08:41:09
                         3.4 __ 19/04 00:13:08
                         3.3 __ 18/04 21:02:50
    Section C              0 __ base 10
                        19.7 __ 19/04 10:25:06
                        11.1 __ 19/04 10:15:01
                         8.8 __ 19/04 10:14:50
                         7.2 __ 19/04 19:51:37
                         6.1 __ 19/04 14:19:47
    Section r           49.2 __ Base 2
";

string regex = @"
   # base 10 statistic sections
       (?:
         [\s-[\n\r]]*(?i:Section\s(?<base10_Section>Z|7|C)\s+(?<Base10>\d+\.\d|\d+)\s__\sbase)\s10
         (?:\r?\n)+
         (?:\s+(?<Instance>\d+\.\d|\d+)\s__\s(?<Time>\d\d/\d\d\s\d\d:\d\d:\d\d)(?:\r?\n)+)+
       )
     |  # Or, base 2 statistic sections
       (?:
         [\s-[\n\r]]*(?i:Section\s(?<base2_Section>R|P)\s+(?<Base2>\d+\.\d|\d+)\s__\sbase)\s2
         (?:\r?\n)+
       )
   # |  Or, something else

";

Match m = Regex.Match(input, regex, RegexOptions.IgnorePatternWhitespace);
int matchCount = 0;
while (m.Success)
{
    Console.WriteLine("\nMatch " + (++matchCount) + "\n------------------");
    // Check base 10
    if (m.Groups["base10_Section"].Success)
    {
        Console.WriteLine("Section (base10)  '" + m.Groups["base10_Section"] + "'  =  '" + m.Groups["Base10"] + "'\n");

        int count = m.Groups["Instance"].Captures.Count;
        // Instance
        for (int j = 0; j < count; j++)
            System.Console.WriteLine("    Instance (" + j + ") =  '" + m.Groups["Instance"].Captures[j] + "' ");
        // Time
        for (int j = 0; j < count; j++)
            System.Console.WriteLine("    Time(" + j + ") =  '" + m.Groups["Time"].Captures[j] + "' ");
        // Combined ..
        for (int j = 0; j < count; j++)
            System.Console.WriteLine("    Instance,Time  (" + j + ") =  '" +
                                          m.Groups["Instance"].Captures[j] + "' __ '" +
                                          m.Groups["Time"].Captures[j] + "' ");
    }
    else
    // Check base 2
    if (m.Groups["base2_Section"].Success)
        Console.WriteLine("Section (base2)  '" + m.Groups["base2_Section"] + "'  =  '" + m.Groups["Base2"] + "'\n");

    m = m.NextMatch();
} 
```

# javascript - 在jsTree中，使节点文本可点击的最佳方法是什么（用于选中复选框）

> ID：10254808
> 
> 赞同：2
> 
> 时间：2012-04-20T23:27:30.877
> 
> 标签：javascript, jquery, jstree

单击复选框旁边的节点文本时，我希望复选框切换其选中状态。通常这是用`<label for="whatever"></label>`. 但是由于**jsTree**不使用真正的复选框，这怎么可能呢？

用 创建树时`$('#mytree').jstree({'plugins':['checkbox']})`，如果我放在`.delegate("a", "click", function (event, data) { $(event.target).find('.jstree-checkbox').click() })`最后，它可以工作。但是有一个明显的延迟。

因此，我提出一个问题，单击相应文本时选中该框的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T02:14:14.423

我同意您使用的点击处理程序技术。我没有看到提到的延迟，但这可能是因为我没有将任何内容发回服务器。

如果复选框纯粹是可视的，那么也许可以直接修改类。这应该比引发另一个点击事件更快。

```
$(event.target).parent("li:first").toggleClass("jstree-unchecked").toggleClass("jstree-checked"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T18:57:29.660

jstree 的复选框插件在选中/取消选中节点时似乎确实执行了其他操作。我相信以下内容应该可以满足您的需求：

```
$(function(){
    // Initialize jstree
    var $tree = $('.tree-target').jstree({
        "plugins": ["checkbox"]
    });

    // Bind an event to the anchor tag within each tree entry
    // Note: '.on' is used here as this will ensure that any
    // dynamically-generated entries will also use this 'click'
    // event.
    $tree.on('click', 'li.tree > a', function (e) {
        e.stopPropagation();

        // Find the first parent 'tree' element
        var $node = $(this).parents('li.tree').eq(0);

        // Toggle the state of the current 'tree' element
        // Note: The third parameter (in this case 'toggle')
        // can be any value other than true or false
        $tree.jstree('change_state', $node, 'toggle');
        return false;
    });
});​ 
```

在旁注中，我认为您的方法导致显着延迟的原因可能与您将`click`事件绑定到页面上的每个`<a/>`标签有关。当试图找到适当的事件目标时，这将导致大量开销。

# ios - UIScrollView 不工作

> ID：10254815
> 
> 赞同：1
> 
> 时间：2012-04-20T23:28:26.763
> 
> 标签：ios, uiscrollview

我有一个 UIScrollView，里面有一个 View。该视图的内部是一堆按钮、标签等，它们在纵向模式下适合视图......当 iPad 旋转时，我希望滚动视图启动，以便用户可以滚动到视图的底部。该应用程序运行，但是当我旋转它时，滚动条永远不会工作......我相信我已经正确连接了所有东西，并且我在 viewDidLoad 事件中有这个代码：

```
[scrollview addSubview: masterView]; 
scrollView.contentSize = [masterView sizeThatFits:CGSizeZero]; 
```

还有什么我想念的吗？iPad旋转时需要修改尺寸吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:49:25.447

的内容大小可能有问题`UIScrollView`。如果没有将 contentSize 设置为大于实际的 scrollView 大小，则不会显示滚动条。

您可以使用以下代码对此进行编码：

```
[scrollView setContentSize:CGSizeMake(2000,2000)]; 
```

然后将内容大小更改为您放入`UIScrollView`( `scrollView`) 中的实际内容大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T05:10:12.247

我遇到了类似的情况，但我的案例是 iPhone。

请记住，内容应该大于滚动才能启动滚动视图。

“如果一切都在你面前，你为什么要下去？”

使用以下代码：

```
 [scrollView setContentSize:CGSizeMake(intValue, intValue)]; 
```

intValue：设置滚动宽度和高度的整数值。

即使它不起作用，也不要担心有很多其他选项可以找出解决方案：1\. NSLog 2\. 断点 3\. 将你从控制台收到的错误放在 stackoverflow

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T01:57:29.383

If you look at the results of `[masterView sizeThatFits:CGSizeZero]` (e.g. NSLog or set a breakpoint in your debugger, I think you will find that it's not what you expected it to be. You might find that masterView has autoResize parameters set (which is common for a view that covers the entire screen), which means that it might, itself, be getting resized too short to fit all of its controls and scrollView is simply grabbing this shortened value itself. Take a look at that CGSize and the problem will be obvious.

# solr - 如何在 ubuntu 10.10 中配置 Nutch 和 solr？

> ID：10254816
> 
> 赞同：0
> 
> 时间：2012-04-20T23:28:34.447
> 
> 标签：solr, search-engine, web-crawler, nutch, ubuntu-10.10

我正在尝试为我的最后一年项目构建一个搜索引擎。在过去的两个月里，我对这个主题做了很多研究。我发现我需要一个爬虫来爬取互联网、一个解析器和一个索引器。

我正在尝试使用 Nutch 作为爬虫和 solr 来索引 Nutch 爬取的数据。但我被困在他们两个的安装部分。我正在尝试借助互联网上的教程在我的系统中安装 Nutch 和 solr，但对我没有任何帮助。

**我需要某种安装指南或链接，我可以在其中学习如何安装和集成 Nutch 和 solr**。

接下来我被解析器困住了。我不知道这个阶段。我需要有关如何在索引之前解析数据的帮助。

我不想建立谷歌或其他东西。我所需要的只是来自某些网站的某些要搜索的项目。

我有 Java 经验，我可以轻松地使用它，但我不像你们这样专业，请告诉我我是否朝着正确的方向前进，以及下一步我应该做什么。

我使用的是 Ubuntu 10.10，我有 Apache Tomcat 7。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-21T04:54:59.443

[这](http://www.params.me/2011/07/apache-nutch-13-setup.html)是用于 nutch 安装，[这](http://www.params.me/2011/07/nutch-13-and-solr-integration.html)是用于与 Solr 集成。

关于解析器，nutch 有自己的一套解析器，你不必费心去解析。触发抓取命令，它会自动完成。除非您想解析 nutch 提供的内容之外的内容，否则这对您来说不是问题。如果你想让 nutch 解析一些 .xyz 文件，那么你需要为此编写解析器插件并与 nutch 集成。

# jquery - 找到我的 iframed 页面的可见高度 - （fb 页面）

> ID：10254817
> 
> 赞同：0
> 
> 时间：2012-04-20T23:28:46.750
> 
> 标签：jquery, facebook, iframe, height, colorbox

我的页面显示在 iframe（facebook 页面）中，大约 2000px 高，但当然只有几百个在任何时候都可见。

是否可以找出我页面的可见高度？使用 $window.width() 给了我页面的总高度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T11:18:11.853

facebook javascript sdk 有方法*[FB.Canvas.getPageInfo](http://developers.facebook.com/docs/reference/javascript/FB.Canvas.getPageInfo/)*：

> 由于 Canvas 应用程序在 iframe 中运行，它无法访问 window.innerHeight 和 window.innerWidth。此方法的存在是为了提供对客户端（浏览器）尺寸以及当前滚动位置和偏移坐标的访问。

它易于使用：

```
FB.Canvas.getPageInfo(
    function(info) {
        console.log(info);
    }
); 
```

根据该信息，您应该能够计算出您需要什么。

# javascript - 从右到左滚动内容Javascript

> ID：10254822
> 
> 赞同：1
> 
> 时间：2012-04-20T23:29:18.547
> 
> 标签：javascript, html, css, scroll

我有一个水平宽度为 4000px 的页面

我将如何创建一个在页面加载并从页面的最右侧到左侧循环时立即开始的事件？如果您找到我，我想显示所有内容并让用户重新开始

理想情况下用 javascript 编码，但会接受 CSS3（如果可以的话）

多谢你们，

尺寸

根据您的回复，我试图让这个工作，但无济于事。非常感谢帮助

```
 <script type='text/javascript'>
    $(document).ready(function(){
   function start(){ 
   document.body.scrollTo(4000, 0); 
   var x=4000;
   var t= setInterval(function(){ x-=50
   if (x<=0){ clearInterval(t); document.body.scrollTo(0,0); return; } document.body.scrollTo(x, 0); }, 20) }
 });
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:32:02.937

jQuery [scrollTo 插件](http://flesler.blogspot.co.uk/2007/10/jqueryscrollto.html)正是您所需要的。[看到它在行动](http://demos.flesler.com/jquery/scrollTo/)。结合`setTimeout`or`setInterval`功能，您可以轻松实现您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T23:35:24.657

我不确定这是否适用于整个页面，但它可能比使用内置浏览器滚动条更流畅，并且更易于设置和启动： http: [//logicbox.net/jquery/simplyscroll/](http://logicbox.net/jquery/simplyscroll/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-20T23:44:01.640

这段代码可能有一些错误，因为我是在手机上输入的，但是这样的代码应该可以工作。只需将其粘贴在 window.onload 函数中即可。

```
function start(){
   window.scrollTo(4000, 0); 
   var x=4000; 

   var t = setInterval(function(){ 
       x-=50; // or whatever 
       if (x<=0){ 
           clearInterval(t); 
           window.scrollTo(0,0); 
           return; 
       } 
       window.scrollTo(x, 0); 
   }, 20) 
} 
```

# php - 如何将 URL 字符串转换为 PHP 变量

> ID：10254823
> 
> 赞同：0
> 
> 时间：2012-04-20T23:29:41.923
> 
> 标签：php, regex, .htaccess, mod-rewrite

让我们从一个例子开始：

所以请求的 URL 是：www.domain.com/product/hdd/samsung

我想要一个重写规则来获取 index.php 并将 www.domain.com 之后的所有内容保存到 php 变量中。因此，替代页面将是例如 www.domain.com/index.php?query=product/hdd/samsung。但我无法编写正确的规则。

我试过这个：

```
RewriteRule ^/(.*)$ index.php?query=$1 [NC,L] 
```

上面的代码不起作用。我想在 index.php 的 PHP 代码中使用查询：

```
if(isset($_GET["query"] )) {
   $query=$_GET["query"];
} 
```

我发现，有可能`$query`通过`$_SERVER['QUERY_STRING']`而不是通过`mod_rewrite`，对吗？

对于我的 PHP 应用程序来说，变量`$query`至关重要，因为它用于加载模板。

**问题**：您会向我推荐什么解决方案？使用`$_SERVER`变量或`mod_rewrite`？如果`mod_rewrite`，怎么写正确`RewriteRule`？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:40:43.547

试试这个：

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?query=$1 [NC,L] 
```

如果您的站点不在服务器的根目录中，请更改`RewriteBase`为`/some/subdir/`.

# c++ - MSVC 环境变量未显示在不同的终端中

> ID：10254827
> 
> 赞同：0
> 
> 时间：2012-04-20T23:31:03.367
> 
> 标签：c++, visual-studio-2010, windows-7-x64, haxe, hxcpp

我正在使用 Haxe 的 HXCPP 生成 C++ 代码并使用 Microsoft Visual Studio 2010 Express Edition 对其进行编译。我正在遵循[本](http://gamehaxe.com/2011/04/05/nme-from-scratch/)指南，它要求您运行`"c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\Tools\vsvars32.bat"`，以便`cl.exe`（编译器）在您的构建路径中。

这*确实*允许我运行 cl.exe，但只能在该终端中运行。如果我尝试从另一个终端或在我的 IDE（Sublime Text 2）中运行它，它会失败。

我想出了一个解决方法：从终端手动复制+粘贴变量值到 GUI 环境变量编辑器。

一定有更好的办法。我错过了什么？

构建.hxml

```
-main Test
-cpp bin 
```

测试.hx

```
class Test {
    static function main() {
        trace("Hello World!");
    }
} 
```

构建时的错误消息

```
link.exe -out:Test.exe -nologo -machine:x86 -libpath:lib user32.lib -libpath:e:/VS8/PlatformSDK/Lib @all_objs
LINK : fatal error LNK1181: cannot open input file 'user32.lib'
Called from ? line 1
Called from BuildTool.hx line 1246
Called from BuildTool.hx line 554
Called from BuildTool.hx line 591
Called from BuildTool.hx line 710
Called from BuildTool.hx line 796
Called from BuildTool.hx line 285 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:35:39.147

您必须为您打开的每个终端（环境）运行以下命令：

```
c:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\Tools\vsvars32.bat 
```

它定义的环境变量都是本地的。

# git - 如何找出在 2 SHA 之间更改的文件列表？

> ID：10254830
> 
> 赞同：0
> 
> 时间：2012-04-20T23:31:55.853
> 
> 标签：git

> **可能重复：**
> [git：显示两次提交之间的所有更改文件](https://stackoverflow.com/questions/1552340/git-show-all-changed-files-between-two-commits)

如何获取在 2 个 SHA 之间提交/添加的文件列表（我使用“git log”获取 SHA）？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:34:13.533

```
git diff  --name-only SHA1 SHA2 
```

# haskell - 将 int 插入列表

> ID：10254832
> 
> 赞同：0
> 
> 时间：2012-04-20T23:32:16.567
> 
> 标签：haskell

我想将一个 int 插入到排序列表中的正确位置。例如，如果我插入 2，它将插入第二个位置。

```
insert :: Int -> [Int] -> [Int
insert x [] = [x]
insert x (y:ys) = if xsy 
                 then x:y:ys else y insert x ys 
```

任何人都可以指出什么是错的。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T00:13:42.640

就像 Daniel Fischer 说的，你只是有几个错别字：

*   `xsy`大概应该是`x < y`。

*   您在`y insert x ys`;中缺少运算符 您需要什么运算符将值添加到列表中？（提示：在模式匹配列表时使用它。）

*   你错过了一个`]`之后`[Int`。

*   你的缩进是错误的；`then`应至少与 对齐`if`，并且`else`应在新行上，与 对齐`then`。如果您使用制表符缩进，则应将编辑器设置为使用空格缩进（或者，如果必须，将其设置为将制表符显示为 8 个空格，这是 Haskell 所期望的）。

除此之外，你很高兴。

# android - HTML5 缓存清单

> ID：10254838
> 
> 赞同：0
> 
> 时间：2012-04-20T23:32:48.413
> 
> 标签：android, caching, webview

有没有办法使用 html5 的缓存清单将文件嵌入到 Android 项目中（可能在资产文件夹中）而不是清单文件在服务器上？我希望所有文件都嵌入到 Android 项目中。

现在我在 webView 中打开了一个 html5 文档，它播放了一些 mp3 链接......问题是每次我播放它们时它们都会重新下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:45:35.937

> 有没有办法使用 html5 的缓存清单将文件嵌入到 Android 项目中（可能在资产文件夹中）而不是清单文件在服务器上？

不可以，但您可以使用[PhoneGap](http://phonegap.com/)将 HTML5 应用程序转换为 APK 文件。

# c# - system.serviceModel 具有无效的子元素 domainServices

> ID：10254839
> 
> 赞同：2
> 
> 时间：2012-04-20T23:33:07.683
> 
> 标签：c#, .net, wcf, wcf-ria-services, wcf-configuration

我得到这个错误，真的不知道如何解决它：

> 元素“system.serviceModel”具有无效的子元素“domainServices”。预期的可能元素列表：'behaviors, bindings, client, comContracts, commonBehaviors, diagnostics, serviceHostingEnvironment, extensions, protocolMapping, services, standardEndpoints, tracking, routing

配置：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <sectionGroup name="system.serviceModel">
      <section name="domainServices" type="System.ServiceModel.DomainServices.Hosting.DomainServicesSection, System.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" allowDefinition="MachineToApplication" requirePermission="false" />
    </sectionGroup>
  </configSections>    
  <system.serviceModel>
    <domainServices>
      <endpoints>
        <!-- <add name="OData" type="System.ServiceModel.DomainServices.Hosting.ODataEndpointFactory, System.ServiceModel.DomainServices.Hosting.OData, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" /> -->
        <add name="soap" type="Microsoft.ServiceModel.DomainServices.Hosting.SoapXmlEndpointFactory, Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <!-- <add name="JSON" type="Microsoft.ServiceModel.DomainServices.Hosting.JsonEndpointFactory, Microsoft.ServiceModel.DomainServices.Hosting, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" /> -->
      </endpoints>
    </domainServices>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
    <behaviors>
      <serviceBehaviors>
        <behavior name="">
          <serviceThrottling  maxConcurrentCalls="100"  maxConcurrentSessions="100"  maxConcurrentInstances="10"  />
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
 </configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-22T03:57:39.050

Sometimes this sort of error ("system.ServiceModel has an invalid child element XXXX") can arise if we target an older version of .Net Framework than what is expected. This can be resolved by opening the Project Properties and then modifying the Target framework from the Application tab. Hope this is useful to someone out there.

# javascript - 在命名空间中混合 javascript 和 jquery

> ID：10254841
> 
> 赞同：0
> 
> 时间：2012-04-20T23:33:29.210
> 
> 标签：javascript, jquery, namespaces, firebug

几周前让 jquery 在 firebug 中运行时遇到了麻烦（尤其是在 drupal 网站上）。显然问题是 Drupal 正在抓取 $ 变量，所以我得到了一个小的命名空间片段 (function($)...(Jquery)); 收回了美元。我一直在 firebug 中使用命名空间，但得到的结果不一致，尤其是在命名空间中混合纯 JavaScript 和 Jquery 时。我知道所有 Jquery 都是 javascript 并且它们一起工作，但是查看示例我发现人们部署此命名空间的方式有一些奇怪的变化。作为一个一般性问题，但也特别是在 Firebug 上下文中，是否需要将 javascript 放在与命名空间 Jquery 的任何特定关系中（在命名空间内、内部函数调用、函数输出或任何其他约定）？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-20T23:44:02.543

如果您的意思是防止`$`被回收，则没有约定，但有一种方法。其他框架也使用该`$`名称。以后声明要使用的任何东西都`$`将接管`$`。但是，您可以阻止它或绕过它。

[jQuery 通过它的noConflict()](http://api.jquery.com/jQuery.noConflict/)方法提供了很多方法来防止它。但我首选的方法是将它们包装在一个函数中。jQuery 也使用`jQuery`命名空间。`$`是一个速记别名，也是一个很常见的别名。所以功能`$.each()`也一样`jQuery.each()`。到底哪个疯狂的框架使用 jQuery 作为其命名空间？

包装在函数中的示例如下：

```
(function($){

    //inside here, "$" is jQuery

}(jQuery)); //pass "jQuery" 
```

# annotations - 我可以“修复”错误的 Resharper 注释吗？

> ID：10254845
> 
> 赞同：3
> 
> 时间：2012-04-20T23:34:03.847
> 
> 标签：annotations, resharper

我喜欢 Resharper，但有时它会给出不正确的警告，可能是因为 BCL 类型的内置注释是错误的。例如，在这段代码中：

```
private static string GetDescription(T value)
{
    Type type = typeof(T);
    string name = Enum.GetName(type, value);
    if (name != null)
    {
        ... 
```

它给了我一个关于`if`声明的警告：“表达总是正确的”。但`Enum.GetName`可以返回 null：

```
string name = Enum.GetName(typeof(DayOfWeek), (DayOfWeek)42); // null 
```

我认为这是因为`[NotNull]`有`Enum.GetName`. 有没有办法解决这个问题，所以我没有收到警告？

*注意：我使用的是 Resharper 5.1；也许这个问题在版本 6 中已修复，但我现在不愿意升级。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-21T00:04:45.503

好，我知道了。内置注释在 Resharper 安装目录（`C:\Program Files (x86)\JetBrains\ReSharper\v5.1\Bin\ExternalAnnotations\`在我的机器上）的 XML 文件中定义。解决方案是编辑相应的文件以删除或修复不正确的注释。

在 的情况下`Enum.GetName`，要更改的文件是`mscorlib\mscorlib.[version].Contracts.xml`。我刚刚评论了这个注释：

```
 <member name="M:System.Enum.GetName(System.Type,System.Object)">
    <attribute ctor="M:JetBrains.Annotations.NotNullAttribute.#ctor" />
  </member> 
```

并重新启动 Visual Studio，现在警告消失了 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-13T21:46:41.890

只是对托马斯答案的更新，他们似乎在过去几年中改变了一些事情。

对于 Resharper 8.2.3，上述文件现在位于：

`C:\Users\YOUR_USER_NAME\AppData\Local\JetBrains\ReSharper\vAny\packages\ReSharper.ExternalAnnotations.8.2.3001\ReSharper\vAny\annotations\.NETFramework\mscorlib\...`

因此，如果您尝试这样做，则可以搜索该路径（或向上搜索非`mscorlib`文件）。

# c++ - 高效频率计算的数据结构决策

> ID：10254847
> 
> 赞同：1
> 
> 时间：2012-04-20T23:34:21.353
> 
> 标签：c++, performance, algorithm, data-structures, frequency

**问题：在计算文本文件中的****n 个**最常用词时，哪种数据结构更有效。**哈希表**或**优先队列**？

我之前问过一个与这个主题相关的问题，但是在创造性的回答之后我感到困惑，我决定使用两种**我**实际上很容易实现的数据类型；**哈希表**与**优先队列**

**优先级队列混淆：**说实话，我听过 youtube 上有关优先级队列的讲座，了解它是每个组件，但是当谈到它的适用性时，我感到困惑。使用**二进制堆**，我可以轻松实现优先级队列，但我的挑战是将其组件使用与频率问题相匹配。

**我的哈希表想法：**因为在这里决定哈希表的大小有点不确定，所以我决定选择对我更有意义的方法：**26**。由于字母表中的字母数量。此外，使用良好的散列函数将是有效的。然而，在我看来，对链表（使用**单独的链表进行勾结**）和将其整数值增加 1 进行一次又一次的访问是没有效率的。

抱歉，这篇文章很长，但作为程序员，你会推荐哪一个。如果**优先级队列**你能简单地给我一些想法来将它与我的问题联系起来，如果**哈希表**可以做任何事情来提高它的效率吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:44:59.083

除了更有意义之外，哈希表将是所提供的两种选择中速度更快的一种。而不是选择 26 的大小，如果您估计唯一词的总数（并且大多数人的词汇表在技术专业术语之外不会比 10,000 大很多 - 20,000 真的很大，而 30,000 是给那些做出收集单词的爱好），使大小足够大，以至于您不希望将其填满，因此发生碰撞的可能性很低 - 不超过 25%。如果您想更保守一点，请实现一个函数，将表格的内容重新散列为原始大小两倍的表格（并使大小成为素数，因此大约只有原始大小的两倍）。

现在，由于它被标记为 C++，您可能会问自己为什么不直接使用标准模板库中的多重集。它将记录您输入的每个单词的数量。

在任何一种情况下，您都需要进行单独的传递以找出哪些词是最常见的，因为您只有频率，而不是频率的排名顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T00:29:02.523

为什么不使用通用/通用字符串散列函数？毕竟你不想计算第一个字母，你想计算所有可能的单词。我会保持桶数动态。如果不是，您将需要进行大量的链表遍历。

# mobile - 手机版网站：调整屏幕大小

> ID：10254850
> 
> 赞同：1
> 
> 时间：2012-04-20T23:34:42.953
> 
> 标签：mobile, web, screen, resolution

我意识到创建网站的移动版本是一件复杂的事情。但是，我特别注意到，当您在移动浏览器中浏览大多数大型网站时，即 iphone 上的 safari 会立即填满整个页面。相比之下，我的网站显示很小，包括字体大小，边框有空白，您需要手动调整它以填满 iphone 屏幕。我收集的部分解决方案是用百分比替换像素规格。是否需要其他任何东西来使网站立即填满窗格，也许是关于开始时的 html doctype 或其他元数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-20T23:42:52.777

添加视口元标记

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

# javascript - jQuery Array 没有在我的数组中找到对象？

> ID：10254851
> 
> 赞同：4
> 
> 时间：2012-04-20T23:34:53.967
> 
> 标签：javascript, jquery, arrays

我有以下区域：

myArray 控制台输出为：

```
[>Object, >Object, >Object, >Object] 
```

最后打开的项目：

```
Object
helper: true
id: 0
__proto__: Object 
```

我想找到然后从我的数组中删除这个项目，但总是被困在这里-1。想法？

```
jQuery.inArray([{'helper':true}], myArray) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:56:29.203

使用[`jQuery.each`](http://api.jquery.com/jQuery.each/)而不是`jQuery.inArray`查找不需要的对象并将其从数组中删除：

```
var arr = [
 { helper: false },
 { helper: true },
 { helper: false }
];

var found = -1;
jQuery.each(arr, function(index, obj) {
 if (obj.helper) {
  found = index;
  return false;
 }
});

if (found > -1) {
 arr.splice(found, 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-20T23:57:05.313

您可以过滤掉`Array`with的元素[`jQuery.grep`](http://api.jquery.com/jquery.grep/)：

```
myArray = $.grep(myArray, function (item) {
    return !item.helper;
}); 
```

* * *

至于`inArray`：您的第一个论点是定义一个新的`Array`and `Object`。因为他们在`new`这里，他们也不能在里面`myArray`。

# php - 为什么这个 Mysql 查询不起作用

> ID：10254856
> 
> 赞同：1
> 
> 时间：2012-04-20T23:35:46.077
> 
> 标签：php, mysql

下面的查询让我失望。这是一个简单的查询，但在 where 子句中给出了错误。

我试图从我的订单表中得到延迟的订单。

```
SELECT * FROM orders where delayed='Y' 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-20T23:37:40.160

**`DELAYED`**是mysql中的[**保留字**](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。将其括在反引号（`）中，同时将其用作列名

试试下面：

```
SELECT * FROM orders WHERE `delayed`='Y' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T23:37:37.790

`DELAYED`是 MySQL 关键字（如 中`INSERT DELAYED`），因此您需要将“延迟”列包含在反引号中：

```
SELECT * FROM orders where `delayed`='Y' 
```

请注意，这些是反引号，而不是撇号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-20T23:38:22.397

尝试这个：

```
SELECT * FROM orders where `delayed`='Y' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T23:44:50.990

尽管反引号选项有效，并且也适用于带有空格的字段名称，但在我看来，最好尽可能避免使用此类表***名***。不是因为反引号本身，它们是无害的，而是因为约定。保留字不打算用作标识符，因为......它们是保留的！

干杯!

# jakarta-ee - OpenJPA Webspere 7 Log4j 配置

> ID：10254857
> 
> 赞同：0
> 
> 时间：2012-04-20T23:35:54.563
> 
> 标签：jakarta-ee, openjpa, websphere-7

伙计们，我正在努力解决这个问题。我正在尝试从 systemout 重定向日志记录。到一个没有成功的 log4j rollingappender 文件，下面是我的 persistent.xml 的示例

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
    http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">
    <persistence-unit name="R_TEST" transaction-type="RESOURCE_LOCAL">
        <provider>
    com.ibm.websphere.persistence.PersistenceProviderImpl
        </provider>
       <non-jta-data-source>jdbc/TESTDB</non-jta-data-source>
         <class>com.ra.WSProcess</class>
    <property name="openjpa.jdbc.Schema" value="TEST" />
            <property name="openjpa.Log" value="log4j"/>    
        </properties>
    </persistence-unit> 
```

将其添加到上面的文件后，我立即收到以下错误。我尝试将这两个文件（commons-logging-1.1.jar、log4j-1.2.6.jar）复制到 WEB_INF/lib 中，但没有解决问题。网络上似乎没有太多关于如何使其按原样工作的内容。有任何想法吗 ？

请注意，我无法更改 Websphere 中的类加载策略，因为这会阻止我的应用程序工作

```
 java.lang.NoClassDefFoundError
    java.lang.NoClassDefFoundError: org.apache.log4j.Priority
        at java.lang.J9VMInternals.verifyImpl(Native Method)
        at java.lang.J9VMInternals.verify(J9VMInternals.java:72)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:134)
        at org.apache.openjpa.lib.log.Log4JLogFactory.newLogAdapter(Log4JLogFactory.java:33)
        at org.apache.openjpa.lib.log.LogFactoryAdapter.getLog(LogFactoryAdapter.java:40)
        at org.apache.openjpa.lib.conf.ConfigurationImpl.getLog(ConfigurationImpl.java:223)
        at org.apache.openjpa.conf.OpenJPAConfigurationImpl.getConfigurationLog(OpenJPAConfigurationImpl.java:1445)
        at org.apache.openjpa.persistence.PersistenceProductDerivation$ConfigurationProviderImpl.setInto(PersistenceProductDerivation.java:479)
        at com.ibm.ws.persistence.jdbc.kernel.WsJpaJDBCBrokerFactory.newInstance(WsJpaJDBCBrokerFactory.java:121)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
        at java.lang.reflect.Method.invoke(Method.java:599)
        at org.apache.openjpa.kernel.Bootstrap.invokeFactory(Bootstrap.java:124)
        at org.apache.openjpa.kernel.Bootstrap.newBrokerFactory(Bootstrap.java:62)
        at org.apache.openjpa.persistence.PersistenceProviderImpl.getBrokerFactory(PersistenceProviderImpl.java:102)
        at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:81)
        at com.ibm.websphere.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:71)
        at com.ibm.websphere.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:41)
        at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:109)
        at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:53)
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:110)
        at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
        at com.ra.WSProcess.EntityManagerHelper.<clinit>(EntityManagerHelper.java:20)
        at java.lang.J9VMInternals.initializeImpl(Native Method)
        at java.lang.J9VMInternals.initialize(J9VMInternals.java:200)
        at com.ra.WSProcess.process(WSProcess.java:129)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
        at java.lang.reflect.Method.invoke(Method.java:599)
        at org.apache.axis2.jaxws.server.dispatcher.JavaDispatcher.invokeTargetOperation(JavaDispatcher.java:76)
        at org.apache.axis2.jaxws.server.dispatcher.JavaBeanDispatcher.invoke(JavaBeanDispatcher.java:96)
        at org.apache.axis2.jaxws.server.EndpointController.invoke(EndpointController.java:108)
        at org.apache.axis2.jaxws.server.JAXWSMessageReceiver.receive(JAXWSMessageReceiver.java:159)
        at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:182)
        at org.apache.axis2.transport.http.HTTPTransportUtils.processHTTPPostRequest(HTTPTransportUtils.java:275)
        at com.ibm.ws.websvcs.transport.http.WASAxis2Servlet.doPost(WASAxis2Servlet.java:1330)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:738)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:831)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1443)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:790)
        at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:443)
        at com.ibm.ws.webcontainer.servlet.ServletWrapperImpl.handleRequest(ServletWrapperImpl.java:175)
        at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:91)
        at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:859)
        at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1557)
        at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:173)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:455)
        at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:384)
        at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:83)
        at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
        at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
        at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
        at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
        at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:202)
        at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:766)
        at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:896)
        at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1527)
    Caused by: java.lang.ClassNotFoundException: org.apache.log4j.Priority
        at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:402)
        at org.eclipse.osgi.framework.internal.core.BundleLoader.findClass(BundleLoader.java:347) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T13:45:58.933

`openjpa.Log`属性值`log4j`不能与内置 IBM PersistenceProviderImpl 一起使用，因为内置 JPA 提供程序对您的应用程序 JAR 没有类加载器可见性，并且没有类加载器配置选项可以使其工作。唯一的选择是自己下载 OpenJPA 并将[其配置为第三方持久性提供程序](http://publib.boulder.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.express.doc/info/exp/ae/tejb_jpa3rdparty.html)。

# jquery - jQuery 日期选择器 - 突出显示多个选定的日期？

> ID：10254862
> 
> 赞同：0
> 
> 时间：2012-04-20T23:36:18.443
> 
> 标签：jquery

我正在使用来自[http://keith-wood.name/datepick.html](http://keith-wood.name/datepick.html)的 jQuery 日期选择器，它看起来很棒，但我不知道如何在日历上显示选定的特定日期？

例如，我将如何显示已选择的以下日期？

2012 年 5 月 3 日、2012 年 6 月 20 日、2012 年 10 月 8 日等。

提前感谢您的反馈。

```
$(function() {
$('#getSetMultiPicker').datepick({
            multiSelect: 100,
    monthsToShow: 4, 
    monthsToStep: 4,
    prevText: 'Prev months', 
    nextText: 'Next months',
    showTrigger: '#calImg'

}); 
```

});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:46:02.740

查看 api 它提供了一个`defaultDate`属性。

您可以尝试将其设置为一个数组，也许是一个日期数组：

```
$(function() {
    $('#getSetMultiPicker').datepick({
        defaultDate: { '5/3/2012', '6/20/11', '10/8/12' }, 
        multiSelect: 100,
        monthsToShow: 4, 
        monthsToStep: 4,
        prevText: 'Prev months', 
        nextText: 'Next months',
        showTrigger: '#calImg'      
    });
}); 
```

看起来有一个接受数组的设置器：

```
var dates = { '5/3/2012', '6/20/11', '10/8/12' };

$('#getSetMultiPicker').datepick('setDate', dates); 
```

# vba - 使用 vba 选择长度为 3 的唯一子集

> ID：10254870
> 
> 赞同：1
> 
> 时间：2012-04-20T23:38:10.210
> 
> 标签：vba, excel

我正在尝试从 1 到 6 的整数生成长度为 3 的唯一子集。我在下面玩过许多版本的脚本，但似乎总是遇到某种问题。如果有人能给我一些指示，那就太好了。谢谢。

```
Sub permuteTest()

num = 6
cRow = 1

For i = 1 To num - 2

    For j = 2 To num - 1

        For k = 3 To num

            Cells(cRow, 1).Value = i
            Cells(cRow, 2).Value = j
            Cells(cRow, 3).Value = k

            cRow = cRow + 1

        Next k
    Next j
Next i

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T05:24:38.817

像这样：

```
Sub permuteTest()

num = 6
cRow = 1

    For i = 1 To num - 2
        For j = i + 1 To num - 1
            For k = j + 1 To num
                Cells(cRow, 1).Value = i
                Cells(cRow, 2).Value = j
                Cells(cRow, 3).Value = k

                cRow = cRow + 1
            Next k
        Next j
    Next i

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T05:41:11.487

这个例程说明了如何解决。它生成字符串元组“3,4,1”，但您可以根据需要修改为使用数组。不容易阅读，但如果你一步一步来，一切都会清楚。为了紧凑，我没有声明变量，所以运行 WITHOUT Option Explicit。

```
Const T = 3 ' generate 3-tuples
Const N = 6 ' using digits 1,...,6

Private Sub Permute()
    Dim cTuples As New Collection: Call cTuples.Add(Empty)      ' start w empty tuple (rank 0)
    For i = 1 To T: Set cTuples = NewTuples(cTuples, N): Next i ' increase tuple rank T times using N digits
    For Each vTuple In cTuples: Debug.Print vTuple: Next        ' display the results
End Sub

' helper func: turn a set of T-tuples into T+1 tuples
Private Function NewTuples(Tuples As Collection, N As Integer) As Collection
    Set NewTuples = New Collection
    For Each vOldTuple In Tuples
        For i = 1 To N: NewTuples.Add (AppendToTuple(vOldTuple, i)): Next
    Next
End Function

' helper func: turn a single T tuple into a T+1 tuple
Private Function AppendToTuple(Tuple, i)
    If IsEmpty(Tuple) Then AppendToTuple = i Else AppendToTuple = Tuple & "," & i
End Function 
```

结果字符串元组 debug.print'ed 到 Immed Window (ctrl-G)：

```
1,1,1
1,1,2
1,1,3
1,1,4
1,1,5
1,1,6
1,2,1
1,2,2
...
6,6,5
6,6,6 
```

# android - 从 Internet 下载 SQLite 数据库并加载到 Android 应用程序中

> ID：10254872
> 
> 赞同：6
> 
> 时间：2012-04-20T23:38:26.007
> 
> 标签：android, sqlite, download

对于我的 android 应用程序，我想使用一个大型数据库（大约 45 MB）。

一种解决方案是将（拆分的）数据库包含在 assets 文件夹中，并在第一次启动时将其复制到数据库目录中。

但这会消耗两次磁盘空间 - 一次在无法删除文件的资产文件夹中，一次在已复制到的数据库目录中。

所以我宁愿在第一次启动时从互联网（网络服务器）下载数据库。我怎么能这样做？我可以下载完整的 SQLite 文件并将其保存到数据库目录吗？还是我应该使用用于填充数据库的 JSON 数据文件？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-20T23:43:58.293

> 一种解决方案是将（拆分的）数据库包含在 assets 文件夹中，并在第一次启动时将其复制到数据库目录中。

它不必拆分，只需压缩即可。参见[`SQLiteAssetHelper`](https://github.com/jgilfelt/android-sqlite-asset-helper)示例。

> 我怎么能这样做？

使用`HttpUrlConnection`. 或者，使用`HttpClient`.

> 我可以下载完整的 SQLite 文件并将其保存到数据库目录吗？

是的。用于[`getDatabasePath()`](http://developer.android.com/reference/android/content/Context.html#getDatabasePath%28java.lang.String%29)获取要使用的正确本地路径。

> 还是我应该使用用于填充数据库的 JSON 数据文件？

你可以，但是对于 45MB，这将是非常缓慢的。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-06T21:02:29.760

有人问我最终得到了什么解决方案，这是我使用的代码（大致）。它可能不再完整，也不优雅或干净。但也许它对你有帮助。

**我的活动.java**

```
public class MyActivity extends Activity {

    private static final String SD_CARD_FOLDER = "MyApp";
    private static final String DB_DOWNLOAD_PATH = "http://www.example.org/downloads/dictionary.sqlite";
    private Database mDB = null;
    private DatabaseDownloadTask mDatabaseDownloadTask = null;
    private DatabaseOpenTask mDatabaseOpenTask = null;

    private class DatabaseDownloadTask extends AsyncTask<Context, Integer, Boolean> {

        @Override
        protected void onPreExecute() {
            mProgressDialog = new ProgressDialog(MyActivity.this);
            mProgressDialog.setTitle(getString(R.string.please_wait));
            mProgressDialog.setMessage(getString(R.string.downloading_database));
            mProgressDialog.setIndeterminate(false);
            mProgressDialog.setMax(100);
            mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
            mProgressDialog.setCancelable(false);
            mProgressDialog.show();
            getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        }

        @Override
        protected Boolean doInBackground(Context... params) {
            try {
                File dbDownloadPath = new File(Database.getDatabaseFolder());
                if (!dbDownloadPath.exists()) {
                    dbDownloadPath.mkdirs();
                }
                HttpParams httpParameters = new BasicHttpParams();
                HttpConnectionParams.setConnectionTimeout(httpParameters, 5000);
                HttpConnectionParams.setSoTimeout(httpParameters, 5000);
                DefaultHttpClient client = new DefaultHttpClient(httpParameters);
                HttpGet httpGet = new HttpGet(DB_DOWNLOAD_PATH);
                InputStream content = null;
                try {
                    HttpResponse execute = client.execute(httpGet);
                    if (execute.getStatusLine().getStatusCode() != 200) { return null; }
                    content = execute.getEntity().getContent();
                    long downloadSize = execute.getEntity().getContentLength();
                    FileOutputStream fos = new FileOutputStream(Database.getDatabaseFolder()+Database.DATABASE_NAME+".sqlite");
                    byte[] buffer = new byte[256];
                    int read;
                    long downloadedAlready = 0;
                    while ((read = content.read(buffer)) != -1) {
                        fos.write(buffer, 0, read);
                        downloadedAlready += read;
                        publishProgress((int) (downloadedAlready*100/downloadSize));
                    }
                    fos.flush();
                    fos.close();
                    content.close();
                    return true;
                }
                catch (Exception e) {
                    if (content != null) {
                        try {
                            content.close();
                        }
                        catch (IOException e1) {}
                    }
                    return false;
                }
            }
            catch (Exception e) {
                return false;
            }
        }

        protected void onProgressUpdate(Integer... values) {
            if (mProgressDialog != null) {
                if (mProgressDialog.isShowing()) {
                    mProgressDialog.setProgress(values[0]);
                }
            }
        }

        @Override
        protected void onPostExecute(Boolean result) {
            if (mProgressDialog != null) {
                mProgressDialog.dismiss();
                mProgressDialog = null;
            }
            if (result.equals(Boolean.TRUE)) {
                Toast.makeText(MyActivity.this, getString(R.string.database_download_success), Toast.LENGTH_LONG).show();
                mDatabaseOpenTask = new DatabaseOpenTask();
                mDatabaseOpenTask.execute(new Context[] { MyActivity.this });
            }
            else {
                Toast.makeText(getApplicationContext(), getString(R.string.database_download_fail), Toast.LENGTH_LONG).show();
                finish();
            }
        }

    }

    private class DatabaseOpenTask extends AsyncTask<Context, Void, Database> {

        @Override
        protected Database doInBackground(Context ... ctx) {
            try {
                String externalBaseDir = Environment.getExternalStorageDirectory().getAbsolutePath();
                // DELETE OLD DATABASE ANFANG
                File oldFolder = new File(Environment.getExternalStorageDirectory().getAbsolutePath()+"/"+SD_CARD_FOLDER);
                File oldFile = new File(oldFolder, "dictionary.sqlite");
                if (oldFile.exists()) {
                    oldFile.delete();
                }
                if (oldFolder.exists()) {
                    oldFolder.delete();
                }
                // DELETE OLD DATABASE ENDE
                File newDB = new File(Database.getDatabaseFolder()+"dictionary.sqlite");
                if (newDB.exists()) {
                    return new Database(ctx[0]);
                }
                else {
                    return null;
                }
            }
            catch (Exception e) {
                return null;
            }
        }

        @Override
        protected void onPreExecute() {
            mProgressDialog = ProgressDialog.show(MainActivity.this, getString(R.string.please_wait), "Loading the database! This may take some time ...", true);
        }

        @Override
        protected void onPostExecute(Database newDB) {
            if (mProgressDialog != null) {
                mProgressDialog.dismiss();
                mProgressDialog = null;
            }
            if (newDB == null) {
                mDB = null;
                AlertDialog.Builder downloadDatabase = new AlertDialog.Builder(MyActivity.this);
                downloadDatabase.setTitle(getString(R.string.downloadDatabase));
                downloadDatabase.setCancelable(false);
                downloadDatabase.setMessage(getString(R.string.wantToDownloadDatabaseNow));
                downloadDatabase.setPositiveButton(getString(R.string.download), new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        mDatabaseDownloadTask = new DatabaseDownloadTask();
                        mDatabaseDownloadTask.execute();
                    }
                });
                downloadDatabase.setNegativeButton(getString(R.string.cancel), new DialogInterface.OnClickListener() {
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.dismiss();
                        finish();
                    }
                });
                downloadDatabase.show();
            }
            else {
                mDB = newDB;
            }
        }
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        if (mDatabaseDownloadTask != null) {
            if (mDatabaseDownloadTask.getStatus() != AsyncTask.Status.FINISHED) {
                mDatabaseDownloadTask.cancel(true);
            }
        }
        if (mDatabaseOpenTask != null) {
            if (mDatabaseOpenTask.getStatus() != AsyncTask.Status.FINISHED) {
                mDatabaseOpenTask.cancel(true);
            }
        }
        if (mProgressDialog != null) {
            mProgressDialog.dismiss();
            mProgressDialog = null;
        }
        if (mDB != null) {
            mDB.close();
            mDB = null;
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        if (!Environment.getExternalStorageState().equals(Environment.MEDIA_MOUNTED)) {
            Toast.makeText(getApplicationContext(), getString(R.string.sd_card_not_found), Toast.LENGTH_LONG).show();
            finish();
        }
        mDatabaseOpenTask = new DatabaseOpenTask();
        mDatabaseOpenTask.execute(new Context[] { this });
    }

} 
```

**数据库.java**

公共类数据库扩展 SQLiteOpenHelper {

```
private static final String DATABASE_NAME = "dictionary";
private String DATABASE_PATH = null;
private static final int DATABASE_VERSION = 1;
private static final String PACKAGE_NAME = "com.my.package";
private SQLiteDatabase db;

public Database(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
    DATABASE_PATH = getDatabaseFolder()+DATABASE_NAME+".sqlite";
    db = getWritableDatabase();
}

public static String getDatabaseFolder() {
    return Environment.getExternalStorageDirectory().getAbsolutePath()+"/Android/data/"+PACKAGE_NAME+"/databases/";
}

@Override
public synchronized SQLiteDatabase getWritableDatabase() {
    try {
        if (db != null) {
            if (db.isOpen()) {
                return db;
            }
        }
        return SQLiteDatabase.openDatabase(DATABASE_PATH, null, SQLiteDatabase.OPEN_READWRITE | SQLiteDatabase.NO_LOCALIZED_COLLATORS);
    }
    catch (Exception e) {
        return null;
    }
}

@Override
public synchronized void close() {
     if (db != null) {
         db.close();
         db = null;
     }
     super.close();
}

@Override
public void onCreate(SQLiteDatabase db) { }

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { } 
```

}

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-20T23:52:16.710

如果您的数据库那么大，我认为 JSON 方法会是一个更好的主意。

我不是 100% 确定，但我相信当您发布应用程序更新时，您的设备会下载整个应用程序。如果您将一个 45mb 的文件与您的应用程序捆绑在一起，这意味着每次您推送更新时，您的用户都会被下载一个 45mb 的文件所困扰。不是一个好主意。

您可以做的是在您的应用程序中包含没有数据的结构正确的数据库。当用户打开应用程序时，它可以连接到您的 Web 服务器并获取 JSON 数据以填充数据库。这样，当用户更新您的应用程序时，他们就不会因下载新的大文件而陷入困境。更新不会清除现有数据库。

您甚至可以通过 JSON 来幻想并获取部分数据库，直到用户拥有一切。这样，如果你正在做一个怪物查询并且他们失去了与互联网的连接，那么不会发生太糟糕的事情。

# extjs - Ext JS 4 - 选择 fieldLabel 时不关注组合框

> ID：10254875
> 
> 赞同：0
> 
> 时间：2012-04-20T23:39:58.987
> 
> 标签：extjs, combobox, extjs4, extjs4.1

我们有一个基本的组合框

[http://www.samuellevy.com/blog/2010/10/senchaextjs-combo-box-gotchas-and-how-fix-them](http://www.samuellevy.com/blog/2010/10/senchaextjs-combo-box-gotchas-and-how-fix-them)

当您单击它时，我们不希望该 fieldLabel ，焦点转到组合框

任何人都可以帮助我谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T16:01:33.310

将此侦听器添加到您的 Combo 配置中：

```
xtype: 'combo',
id: 'myCombo',
listeners: {
    render: function(obj) {
        Ext.get(obj.id+'-labelEl').on('click',function(e) {
            e.preventDefault();
        });
    }
} 
```

# sql-server - 为什么 SQL 返回 2011 年 1 月 1 日的第 1 周？

> ID：10254876
> 
> 赞同：0
> 
> 时间：2012-04-20T23:40:02.673
> 
> 标签：sql-server, sql-server-2005

我将 DateFirst 设置为 7。现在，当我运行以下 SQL 时，它返回第 1 周：

```
SET DateFirst 7
SELECT DATEPART(wk, '1/1/2011') as WeekNumber 
```

如果我的开始日设置为 7，我不确定为什么这会返回第 1 周。根据我的说法，第 1 周应该从 2011 年 1 月 2 日开始，即星期日。我该如何纠正？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-20T23:42:35.743

来自[http://msdn.microsoft.com/en-us/library/ms174420%28v=sql.90%29.aspx](http://msdn.microsoft.com/en-us/library/ms174420%28v=sql.90%29.aspx)

> 星期 (wk, ww) 日期部分反映了对 SET DATEFIRST 所做的更改。任何一年的 1 月 1 日定义星期日期部分的起始编号，例如：DATEPART(wk, 'Jan 1, xxxx') = 1，其中 xxxx 是任何年份。

所以：因为它是这样定义的。

编辑：您可以在 SQL-SERVER 中解决此问题。使用这样的东西：

```
DATEPART(wk, 
  DATEADD(day, 
    -( (DATEPART(day, date) + 8 - DATEPART(weekday, date)) % 7 - 1),
    date
  )
) 
```

这段代码的作用是使用一年中的当前日期和工作日来计算哪一天是一年中的第一个星期日，然后从当前日期中减去这一天，从而为您提供一年中从星期日开始的虚拟日期然后取该日期的周数，根据您的定义，它应该等于周数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T23:45:31.567

还有 ISO 周

第 01 周有相互等效的定义：

*   有今年第一个星期四的那一周，
*   有 1 月 4 日的那一周，
*   第一周有大部分（四天或更多天）在起始年，以及
*   从 12 月 29 日至 1 月 4 日期间的星期一开始的一周。

如果 1 月 1 日在星期一、星期二、星期三或星期四，则在第 01 周。如果 1 月 1 日在星期五、星期六或星期日，则在上一年的第 52 周或第 53 周。

[http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/iso-week-in-sql-server](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/iso-week-in-sql-server)

# mysql - 将计算的数据或预先计算的数据存储在表上（计算的用户年龄或时间戳）

> ID：10254884
> 
> 赞同：0
> 
> 时间：2012-04-20T23:41:01.770
> 
> 标签：mysql, database, database-design, relational-database

我有一些桌子，它们是：

```
user
==============================
 user_id | username | etc..
==============================

user_metadata
====================================
 user_id | birthday | gender | etc..
====================================

game
========================
 game_id | name | etc..
======================== 
```

我想存储喜欢游戏的用户，由于年龄属性很重要，我需要区分什么时候点赞，如果有人喜欢游戏，他/她在 5 岁或在8 岁。那么您会推荐哪种表结构？

1.  存储点赞时用户的年龄：

    ```
    user_likes
    ==========================================
     user_id | game_id | user_age_when_liking
    ========================================== 
    ```

2.  存储时间戳

    ```
    user_likes
    ==========================================
     user_id | game_id | liked_at (timestamp)
    ========================================== 
    ```

所以使用选项 2，如果我需要让所有用户都喜欢某个年龄，我将计算用户生日和 like_at 之间的年份差。

其他建议非常受欢迎。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:48:57.567

这主要取决于*列的使用*目的。如果您从不需要根据类似事件发生的时间进行任何时间计算（加法、减法等），那么此人的年龄是完全有效的（基本上您正在预先评估birthDate-likeDate）。但是，如果您打算说某人在 10 天前喜欢某款游戏，那么将预先评估的用户年龄反转回 likeDate 以允许再次计算将需要更多的工作。请记住，您很可能希望保持数据库数据可扩展，我认为使用*likeAt*是首选。

我还要注意，stackoverflow 不是一个旨在回答没有特定代码答案的理论问题的网站，这个问题可能应该在programmers.stackexchange.com 上。

# magento - 帐单页面中的magento空白名字和姓氏

> ID：10254886
> 
> 赞同：1
> 
> 时间：2012-04-20T23:41:19.320
> 
> 标签：magento

我完全迷失了 magento 中的一页结帐系统。

我得到了除名字和姓氏之外的所有值。我可以认为这是一个小问题，但无法追踪问题出在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T23:29:48.137

更新后我也遇到了同样的问题。我必须在我的模板中更新我的客户文件夹

如果您使用的是默认模板，它将是

前端/基础/默认/模板/客户

# python - 如何使用 gdal python 绑定更新 GeoTiff 标签？

> ID：10254888
> 
> 赞同：1
> 
> 时间：2012-04-20T23:41:58.183
> 
> 标签：python, image-processing, gdal, geotiff

我正在尝试使用 GDAL python 绑定更新某些 tiff 标签值。

例如，使用 tiffinfo 我可以从图像中读取标签值，它是这样的：

偏移量 0x8 (8) 处的 TIFF 目录 图像宽度：4172 图像长度：3689 瓦片宽度：256 瓦片长度：256 位/样本：8 样本格式：无符号整数 压缩方案：JPEG 光度解释：YCbCr 样本/像素：3 平面配置：单幅图像平面标签33550：60.000000,60.000000,0.000000标签33922：0.000000,0.000000,0.000000,58880.000000,4880460.000000,0.0000,0.000000.000000,0.000000标签34735：1,1,0,7,1024,0,1,1,1025,0,1， 1,1026,34737,22,0,2049,34737,7,22,2054,0,1,9102,3072,0,1,32618,3076,0,1,9001

我想用不同的值更新“标签 33922”而不保存新图像。但我找不到在 GDAL python API 中更新标签值的方法。

我错过了什么，或者这在 GDAL python 绑定中根本不支持？

谢谢杰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:10:14.900

感谢 cgohlke 向我展示了 python 中的 libtiff 包装器。我最终使用 LibTiff.Net API 编写了 C# 代码。它看起来像这样：

```
using (Tiff image = Tiff.Open(filePaths[i], "a"))
{        
    image.SetDirectory(0);

    // read auto-registered tag 33922
    FieldValue[] value = image.GetField((TiffTag)33922);
    int count = value[0].ToInt();
    double[] array = value[1].ToDoubleArray();
    System.Console.Out.WriteLine("Tag 33922 value(s) are as follows:");
    System.Console.Out.WriteLine(string.Join(",", array));

    double[] newarray = { 0.5, 0.5, 0, array[3], array[4], array[5] };
    image.SetField((TiffTag)33922, 6, newarray);

    System.Console.Out.WriteLine("Tag 33922 value(s) have been updated to:");
    System.Console.Out.WriteLine(string.Join(",", newarray));

    // Write the information to the file
    image.CheckpointDirectory();
} 
```

# javascript - 如何检测 url/image/youtube 链接并在其周围添加标签

> ID：10254889
> 
> 赞同：0
> 
> 时间：2012-04-20T23:42:11.067
> 
> 标签：javascript, html

我不知道该怎么做。无论如何要检测一个 url 作为内容，然后在它周围连接一个标签？

我希望用 Javascript 来完成。以 HTML 格式输出。

假设我有一个带有常规文本的字符串，以及一个 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:44:24.700

像这样的东西：

*   [http://benalman.com/code/javascript/ba-linkify.js](http://benalman.com/code/javascript/ba-linkify.js)

一旦你确定了你的链接，就会做这项工作。为此，您必须限制链接的格式，例如要求它们包含`http://`（或`https://`等）。如果您只是在寻找格式正确的链接，您可以搜索以`http://`etc. 开头并在第一个非 URL 字符之前结束的字符串：

*   [http://www.blooberry.com/indexdot/html/topics/urlencoding.htm#whatwhy](http://www.blooberry.com/indexdot/html/topics/urlencoding.htm#whatwhy)

使用正则表达式字符类：

*   [http://www.regular-expressions.info/charclass.html](http://www.regular-expressions.info/charclass.html)。

# javascript - 使用 File.open 编写 json 时，我需要设置标题吗？

> ID：10254893
> 
> 赞同：0
> 
> 时间：2012-04-20T23:43:03.497
> 
> 标签：javascript, jquery, ruby-on-rails-3

我正在从我的项目中提取一个 json 文件，然后将其作为静态文件写入 javascript 目录中，如下所示：

```
json_file_path = Rails.root.join("data", "infographics.json")
json_object = JSON.parse(open("http://url/api/infographics/all").read)
File.open(json_file_path, 'w') {|f| f.write(json_object.to_json) } 
```

但是当我从我的开发机器读取这个文件到远程服务器时，我得到一个错误：

```
Origin http://0.0.0.0:3000 is not allowed by Access-Control-Allow-Origin. 
```

这是 apache 设置还是我在编写时没有正确设置标题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:04:26.283

您可以`Access-Control-Allow-Origin`像这样设置标题：

`Header set Access-Control-Allow-Origin *`

在`<Directory>`, `<Location>`, `<Files>`,`<VirtualHost>`或`.htaccess`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-21T01:17:55.760

这是因为您使用了与您调用它的地址不同的 IP 或域名来访问资源。例如：进入`http://localhost:3000`并试图访问`http://0.0.0.0:3000`或`http://127.0.0.1:3000`

# javascript - 滑入/滑出标题 div / 显示部分隐藏的 div

> ID：10254895
> 
> 赞同：4
> 
> 时间：2012-04-20T23:43:54.840
> 
> 标签：javascript, jquery, html, css, toggle

我将不胜感激有关此问题的解决方案的一些帮助和见解。我正在开发一个初始可见高度为 180px 的标题 div 的网站。标题 div 的总高度为 340 像素。当用户单击链接时，我需要标题 div 向下滑动以显示其自身的其余部分（顶部）。因此，从数学上讲，当用户加载页面时，将显示 340px 标题 div 的底部 180px。当他们单击链接时，div 的其余部分会向下滑动以显示其顶部 160 像素。当用户单击相同的链接时，标题 div 会向上滑动，因此仅底部 180px 会再次显示。

我试过让它工作，但不确定我做错了什么。我最初的想法是使用 slideToggle() （隐藏/显示），但我似乎无法让它发挥作用。StackOverflow 上的其他人建议使用 animate()，但我也不知道如何让它工作。

我在 StackOverflow 上进行了搜索，似乎发现了很多关于显示和隐藏整个 div 的问题，但问题是这完全显示和隐藏了 div。我需要我的 div 向下滑动以显示顶部隐藏部分，然后向上滑动回到它原来的静止位置（屏幕外 -160px）。

任何帮助将不胜感激！我在下面包含了我的入门代码：

**HTML：**

```
<div id="header">
    <a href="#header" class="toggle">Click me to reveal the top half of this div</a>
</div> 
```

**查询：**

```
$(document).ready(function(){
    $('.toggle').click(function(){
        $('#header').slideToggle("slow");
        return false;
    });
}); 
```

**CSS：**

```
#header {
    position: fixed;  /*I would like this div to always be fixed to the top of the browser window*/
    top: 160px;
    left: 0;
    width: 100%;
    height: 340px;
    z-index: 10;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T23:58:02.850

请试试这个 JSFiddle。

[http://jsfiddle.net/WFxLJ/3/](http://jsfiddle.net/WFxLJ/3/)

# android - Android：AlarmManager 未启动

> ID：10254899
> 
> 赞同：0
> 
> 时间：2012-04-20T23:44:23.323
> 
> 标签：android, alarmmanager, alarm

我必须创建一个每隔几秒重复一次的 AlarmManager，我使用这段代码

```
Intent in = new Intent(context,Tempo_Indietro.class);
in.putExtra("id_widget", appWidgetIds[i]);
PendingIntent pi = PendingIntent.getActivity(context, 0, in, PendingIntent.FLAG_UPDATE_CURRENT);
AlarmManager alarm = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
alarm.setRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis(), 1000, pi); 
```

但它没有开始......为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:34:46.860

要开始计划的活动：您可以使用如下：

Step1：AlarmManager 的设置

```
 Intent intent =new Intent(context,AlarmReceiver.class);

    PendingIntent pi = PendingIntent.getBroadcast(context, 0, in, PendingIntent.FLAG_UPDATE_CURRENT);

    AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
    am.setRepeating(AlarmManger.RTC_WAKEUP,System.currentTimeMillis(), 1000, pi); 
```

Step2：创建一个广播接收器

```
public class AlarmReceiver extends BroadcastReceiver {

 //override onReceive(Context, Intent) method
 @Override public void onReceive(Context context, Intent intent)
 {
 //.........
    Intent i = new Intent(context,Tempo_Indietro.class);
    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    context.startActivity(i);
//..........  
 } 
```

}

注意：不要忘记在 AndroidManifest.xml 文件中包含新创建的活动、接收者。

# cakephp - 仅在 unix 中对非对象错误调用成员函数 find()

> ID：10254903
> 
> 赞同：0
> 
> 时间：2012-04-20T23:45:00.663
> 
> 标签：cakephp

我正在使用 cakephp 2.0 和 Wamp，一切都很好。但是，生产服务器是 unix Ubuntu。两台计算机访问相同的 mysql 数据。我有这些关系：

```
Model setup.php
var $belongsTo = array('Client', 'User');

Model client.php
var $hasMany = array('Setup');

Model user.php
var $hasMany = array('Setup'); 
```

在 localhost WAMP 中一切正常，但生产服务器是 unix ubunto，我将整个目录复制到其中。在 chmod 777 一切之后，该应用程序工作正常，除了这些错误：

> 注意（8）：未定义索引：Client [APP/View/Setups/index.ctp, line 38]

```
index.php line 38
<td><?php echo $this->Html->link($setup['Client']['name'], array('controller' =>
'clients', 'action' => 'view', $setup['Setup']['client_id'])); ?>&nbsp;</td> 
```

> 注意（8）：未定义索引：User [APP/View/Setups/view.ctp, line 66]

```
view.php    line 66
<?php echo $this->Html->link($setup['User']['name'], array('controller' => 'users',
'action' => 'view', $setup['User']['id'])); ?>` 
```

此外，在[http://mailsender.asc/setups/add](http://mailsender.asc/setups/add)

> 致命错误：在第 69 行的 /disk/www/mailsender/app/Controller/SetupsController.php 中的非对象上调用成员函数 find()

```
SetupsController.php (line 69 is the "find" on add function)
public function add() {
// The relations belongs, has many etc.
$users = $this->Setup->User->find('list'); 
```

（IT 建议 /cake upgrade all 进行修复，它似乎修复了上述问题但破坏了其他事情，例如注销和登录）。

任何人都可以帮忙吗？

我还想知道在将整个应用程序从 Windows 本地计算机移动到 unix ubuntu 时是否应该采取任何步骤。

先感谢您 ！最好的问候。

来自墨西哥蒂华纳的卡洛斯。

Unix版本：

Linux genesi 3.0.0-12-generic-pae #20-Ubuntu SMP Fri Oct 7 16:37:17 UTC 2011 i686 i686 i386 GNU/Linux

php版本：本地主机：版本5.3.0genesi（生产服务器）：版本5.3.6-13ubuntu3.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T01:20:06.557

`users.php`应该是`user.php`（单数）

# visualforce - “Visualforce 远程处理：上下文不完整”是什么意思？

> ID：10254904
> 
> 赞同：0
> 
> 时间：2012-04-20T23:45:15.713
> 
> 标签：visualforce, force.com

在 VisualForce 页面中使用 javascript 远程处理时，我在我的 javascript 控制台中收到警告“Visualforce 远程处理：上下文不完整”。

这是什么意思，有什么影响？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T15:03:08.437

此消息表示未将 Visualforce 远程处理内部组件添加到远程处理请求中。

你还在看到这个 Javascript 控制台消息吗？如果您看到此消息并且您的远程事务按预期工作，那么您很可能看到了一个已修复的无害错误。如果您看到此警告并且您的交易失败，请在 Visualforce 留言板上发布详细信息 (https://bitly.com/)。谢谢。

# c++ - C++ 中的蓝牙

> ID：10254910
> 
> 赞同：9
> 
> 时间：2012-04-20T23:45:49.560
> 
> 标签：c++, bluetooth, rfcomm

我希望通过 RFCOMM 与另一个蓝牙设备进行通信。我想为应用程序使用 C++ (VS2008)。我已经知道 32feet 库，但不确定它是否适用于 C++。有谁知道这种项目的一个好的起点？或者可能是用 C++ 编写的 32 英尺样本？我想要一个使用 C++ 的简单易用的蓝牙 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-20T23:56:42.137

您可以在 OS 蓝牙堆栈中使用 BT 套接字进行蓝牙编程。本页讨论套接字的使用： http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa362928 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa362928(v=vs.85).aspx)

此页面包含从 Microsoft 下载蓝牙 SDK 的链接：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa363058 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363058(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-25T13:43:09.443

这个问题很老了，我知道。

只是想更新一下，Qt 框架现在有用于 C++ 的 Qt 蓝牙，看起来很有希望——http: [//doc.qt.io/qt-5/qtbluetooth-module.html](http://doc.qt.io/qt-5/qtbluetooth-module.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-06T19:31:25.157

使用 Microsoft 堆栈构建应用程序效果很好（XP 和 Vista 工作得很好，尝试在 Windows 7-64 位下运行相同的应用程序效果不佳......）

32feet.net 的真正优势在于，Windows 上的蓝牙支持是严重的巴尔干化——你永远不知道在给定的机器上它使用的是 Microsoft、Broadcom、Toshiba、BlueSolei 还是其他一些堆栈。虽然这些大多都是无线兼容的，但 API 完全不同。使用 32feet.net 构建可以让您的应用程序在更大的机器子集上运行......也就是说，我没有尝试将它构建到 C++ 应用程序中 - 抱歉。

# php - php脚本在很长一段时间后停止并且在error_log上找不到错误

> ID：10254912
> 
> 赞同：0
> 
> 时间：2012-04-20T23:46:32.963
> 
> 标签：php

我正在运行一个处理大量数据的长 php 脚本。

问题是脚本突然停止并且没有抛出异常或在error_log上找不到异常。我已在 .ini 配置文件中将 display_errors 和 error_logging 设置为 1。

更多细节： 1) 脚本多次执行 'file_get_contents' 函数。2) 当 file_get_contents 失败时，脚本包含递归。任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:55:03.387

错误日志配置因您的托管环境而异。我首先确认您正在编辑正确的 php.ini 文件。查看您的 phpinfo 输出并确保确实设置了这些参数并检查路径/文件以了解错误记录到的位置。有时它会发送到 apache 错误日志，有时它可以发送到专用的 php 日志。如果您故意创建语法错误，是否可以获得任何错误输出？您也可以考虑查看您的系统日志以查看是否有任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T23:50:09.397

它可能已达到最大执行时间。

```
set_time_limit(0); // to increase the timelimit to infinity 
```

# java - 查找方法的调用者

> ID：10254916
> 
> 赞同：3
> 
> 时间：2012-04-20T23:47:13.343
> 
> 标签：java, static-analysis, call-graph

我正在尝试检查获取资源的方法是否也释放它。在单个 jar 文件中找出类中方法的调用者的最佳工具是什么？我可以用`CheckStyle`or做到这一点`FindBugs`吗？如何？

我想我可以使用`BCEL`或类似的方法来做到这一点，但我以前从未使用过字节码，而且要花很长时间才能做到这一点。

搜索“java call graph”没有发现任何有用的东西，但这似乎是一个非常基本的功能，所以我可能错过了一个很好的匹配。但是，我不想在这个非常大的项目上生成整个调用图。

# linux-kernel - 插入外部交叉编译的 SPARC Linux 模块时出现重定位错误

> ID：10254917
> 
> 赞同：7
> 
> 时间：2012-04-20T23:47:19.140
> 
> 标签：linux-kernel, cross-compiling, kernel-module, sparc, relocation

首先：我不是专家，所以请原谅我试图解释自己的任何错误。

我正在尝试使用 Sparc- 为 SPARC 机器交叉编译外部 Linux 模块`Linux-GCC-4.4.2`。Linux 内核的版本是`2.6.36.4-00037-g059aa91-dirty`. 它已经用`LEON`处理器的一些文件进行了修补。向我提供了构建流程，它使用`LinuxBuild`、`Buildroot`和`Busybox`. 我正在尝试制作 32 位操作系统。

一切似乎都正常，但是在我编译模块并尝试将其安装到 SPARC 系统后，我收到此错误：

```
module hellok:  Unknown relocation: 6 
```

这个错误来自于`~/linuxbuild-1.0.3/linux/linux-2.6-git/arch/sparc/kernel/module.c` 为了完整起见，我将提供整个方法：

```
int apply_relocate_add(Elf_Shdr *sechdrs,
           const char *strtab,
           unsigned int symindex,
           unsigned int relsec,
           struct module *me)
{
unsigned int i;
Elf_Rela *rel = (void *)sechdrs[relsec].sh_addr;
Elf_Sym *sym;
u8 *location;
u32 *loc32;

for (i = 0; i < sechdrs[relsec].sh_size / sizeof(*rel); i++) {
    Elf_Addr v;

    /* This is where to make the change */
    location = (u8 *)sechdrs[sechdrs[relsec].sh_info].sh_addr
        + rel[i].r_offset;
    loc32 = (u32 *) location;

#ifdef CONFIG_SPARC64
    BUG_ON(((u64)location >> (u64)32) != (u64)0);
#endif /* CONFIG_SPARC64 */

    /* This is the symbol it is referring to.  Note that all
       undefined symbols have been resolved.  */
    sym = (Elf_Sym *)sechdrs[symindex].sh_addr
        + ELF_R_SYM(rel[i].r_info);
    v = sym->st_value + rel[i].r_addend;

    switch (ELF_R_TYPE(rel[i].r_info) & 0xff) {
#ifdef CONFIG_SPARC64
    case R_SPARC_64:
        location[0] = v >> 56;
        location[1] = v >> 48;
        location[2] = v >> 40;
        location[3] = v >> 32;
        location[4] = v >> 24;
        location[5] = v >> 16;
        location[6] = v >>  8;
        location[7] = v >>  0;
        break;

    case R_SPARC_DISP32:
        v -= (Elf_Addr) location;
        *loc32 = v;
        break;

    case R_SPARC_WDISP19:
        v -= (Elf_Addr) location;
        *loc32 = (*loc32 & ~0x7ffff) |
            ((v >> 2) & 0x7ffff);
        break;

    case R_SPARC_OLO10:
        *loc32 = (*loc32 & ~0x1fff) |
            (((v & 0x3ff) +
              (ELF_R_TYPE(rel[i].r_info) >> 8))
             & 0x1fff);
        break;
#endif /* CONFIG_SPARC64 */

    case R_SPARC_32:
    case R_SPARC_UA32:
        location[0] = v >> 24;
        location[1] = v >> 16;
        location[2] = v >>  8;
        location[3] = v >>  0;
        break;

    case R_SPARC_WDISP30:
        v -= (Elf_Addr) location;
        *loc32 = (*loc32 & ~0x3fffffff) |
            ((v >> 2) & 0x3fffffff);
        break;

    case R_SPARC_WDISP22:
        v -= (Elf_Addr) location;
        *loc32 = (*loc32 & ~0x3fffff) |
            ((v >> 2) & 0x3fffff);
        break;

    case R_SPARC_LO10:
        *loc32 = (*loc32 & ~0x3ff) | (v & 0x3ff);
        break;

    case R_SPARC_HI22:
        *loc32 = (*loc32 & ~0x3fffff) |
            ((v >> 10) & 0x3fffff);
        break;

    default:
        printk(KERN_ERR "module %s: Unknown relocation: %x\n",
               me->name,
               (int) (ELF_R_TYPE(rel[i].r_info) & 0xff));
        return -ENOEXEC;
    };
}
return 0;
} 
```

因此，我了解默认情况是我所遇到的情况。`ELF_R_TYPE(rel[i].r_info`(SPARC Relocations) 类型在我的`~/linuxbuild-1.0.3/dist/buildroot/build-br/staging/usr/include/elf.h`文件中定义，其中一些类型如下：

```
/* SPARC relocs.  */

#define R_SPARC_NONE        0   /* No reloc */
#define R_SPARC_8           1   /* Direct 8 bit */
#define R_SPARC_16          2   /* Direct 16 bit */
#define R_SPARC_32          3   /* Direct 32 bit */
#define R_SPARC_DISP8       4   /* PC relative 8 bit */
#define R_SPARC_DISP16      5   /* PC relative 16 bit */
#define R_SPARC_DISP32      6   /* PC relative 32 bit */
#define R_SPARC_WDISP30     7   /* PC relative 30 bit shifted */
#define R_SPARC_WDISP22     8   /* PC relative 22 bit shifted */
#define R_SPARC_HI22        9   /* High 22 bit */
#define R_SPARC_22          10  /* Direct 22 bit */
#define R_SPARC_13          11  /* Direct 13 bit */
#define R_SPARC_LO10        12  /* Truncated 10 bit */
#define R_SPARC_GOT10       13  /* Truncated 10 bit GOT entry */
#define R_SPARC_GOT13       14  /* 13 bit GOT entry */
#define R_SPARC_GOT22       15  /* 22 bit GOT entry shifted */
#define R_SPARC_PC10        16  /* PC relative 10 bit truncated */
#define R_SPARC_PC22        17  /* PC relative 22 bit shifted */
#define R_SPARC_WPLT30      18  /* 30 bit PC relative PLT address */
#define R_SPARC_COPY        19  /* Copy symbol at runtime */
#define R_SPARC_GLOB_DAT    20  /* Create GOT entry */
#define R_SPARC_JMP_SLOT    21  /* Create PLT entry */
#define R_SPARC_RELATIVE    22  /* Adjust by program base */
#define R_SPARC_UA32        23  /* Direct 32 bit unaligned */

/* Additional Sparc64 relocs.  */
... 
```

所以重定位 6 对应于`R_SPARC_DISP32`aka`PC`相对 32 位。这在`module.c`case 语句中定义，但仅限于 64 位部分。我想我要么需要自己编写重定位，要么弄清楚我需要什么重定位标志并在编译期间更改标志。我真的不明白重定位代码中发生了什么，所以请帮我弄清楚我应该如何解决这个问题。我不认为我可以将操作系统构建为 64 位，因为它似乎会破坏系统，所以请帮助我找到替代解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T15:32:44.557

对于 Leon-Linux 配置（linuxbuild-1.0.1），我自己的模块也有完全相同的问题。

我所做的是我将代码的 'case R_SPARC_DISP32' 部分（4 行）移动到 '#endif /* CONFIG_SPARC64 */' 行之后

这是一些糟糕的 hack Harry ;-) 但至少我现在可以安装模块......现在我需要在用户端寻找副作用，当应用程序调用模块的例程时。

所以，待续……

最好的问候，卡里姆

# eclipse - jQuery Mobile 1.1.0.min 在 Eclipse 中触发错误

> ID：10254922
> 
> 赞同：10
> 
> 时间：2012-04-20T23:49:12.197
> 
> 标签：eclipse, jquery-mobile

我在 Eclipse 中有一个 Java servlet 项目，其中包括使用 jQuery Mobile 1.1.0.min。Eclipse 扫描此文件以查找 JavaScript 错误，它似乎发现了两个这样的错误。Eclipse 错误列表显示：

“文件第一个字符（“/”）的内部验证错误

默认情况下已在“默认”中定义

```
switch(e) {
    case ".":break;
    case "..":
        c.length&&c.pop();
        break;
    default:
        c.push(e)
} 
```

“非缩小”版本不会发生错误。servlet 运行正常，jQM 似乎运行正常，所以我想知道这些错误是否是错误的。谁能解释为什么会发生这种情况以及如何消除错误消息？麻烦的是，Eclipse 会不断地在后台扫描错误，这正是我们想要的，但它却不断地弹出一个关于这两个错误的对话框。

谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-21T20:33:52.297

要排除文件：**Project Properties > JavaScript > Include Path > Source**，有**“Excluded”**突出显示并按“Edit”按钮，在这里您可以添加要排除的内容（文件、文件夹、模式）。更多[在这里](https://stackoverflow.com/questions/4867885/how-to-exclude-a-javascript-file-from-javascript-validation-in-eclipse)。

我最近创建了一个小测试用例并[针对 Eclipse JSDT 提交了一个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=376809)。请为它投票。

我对与[Android](http://www.mobiledevelopersolutions.com/) PhoneGap的 MDS AppLaud Eclipse 插件捆绑的 JSDT 进行了[破解](http://code.google.com/a/eclipselabs.org/p/mobile-web-development-with-phonegap/source/detail?r=159)，以便忽略 JSDT 异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T23:09:11.553

我也有同样的问题。我尝试使用 jQuery Mobile 1.0.1。

问题解决了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-17T19:23:22.757

将 Switch-Case 块替换为

```
if(d === ".."){
  if ( absStack.length ) {
    absStack.pop();
  }
}
else if(d === "."){

}
else{
    absStack.push( d );
} 
```

# asp.net-mvc-3 - 删除主文件夹的 ASP.NET MVC3 示例项目

> ID：10254924
> 
> 赞同：1
> 
> 时间：2012-04-20T23:49:53.380
> 
> 标签：asp.net-mvc-3

我正在使用 ASP.NET MVC3 示例项目，并希望将新链接添加到直接转到根 url 的页面中，因此，mydomain.com/Home/About 将代替 mydomain.com/Home/About。

此页面建议添加一条新路线。[http://weblogs.asp.net/gunnarpeipman/archive/2011/04/17/asp-net-mvc-defining-short-urls-for-root-level-pages.aspx](http://weblogs.asp.net/gunnarpeipman/archive/2011/04/17/asp-net-mvc-defining-short-urls-for-root-level-pages.aspx)

还有其他方法吗？假设我有 5 个页面将位于根目录上，我是否必须为每个页面添加一条特殊路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:00:18.950

假设您正在寻找一堆单路径请求/响应，而不仅仅是重定向主控制器操作，那么这是一个选项。

您提供的链接是*一种*方法。另一种是使用默认路由创建5个控制器。我不确定我是否会建议更好（由于缺乏您的 5 条路径实际上是什么），但它们都产生相同的结果。如果您的默认路线如下所示：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Home", action = "Index", 
          id = UrlParameter.Optional } // Parameter defaults
); 
```

它基本上说明默认控制器是*home*并且默认操作是*index*。这些值不是相互包含的，这意味着两者都不需要另一个才能成为默认值。

因此你可以这样做：

*website.com/about*与

```
public AboutController
{
  public ActionResult index()
  {
    return this.View();
  }
} 
```

和/或*website.com/people*

```
public PeopleController
{
  public ActionResult index()
  {
    return this.View();
  }
} 
```

# javascript - jQuery：打破嵌套的 $.each 循环

> ID：10254925
> 
> 赞同：1
> 
> 时间：2012-04-20T23:50:00.407
> 
> 标签：javascript, jquery

我正在遍历列表中的行 w/ `$.each`，并在每一行上应用一组过滤器`$.each`。我想跳过不匹配的行。它看起来像这样：

```
$.each(data, function(i, row) {
    count      = parseInt(row['n']);
    year       = row['year'];

    if (options.filters) {
        $.each(options.filters, function(filter, filtervalue) {
            if (row[filter] != filtervalue) return true;
        });
    }

    // Will only get here if all filters have passed
} 
```

如果与给定的过滤器不匹配，如何让嵌套`$.each`循环跳过该行？`filtervalue`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-20T23:56:35.707

如果至少没有一个过滤器`filtervalue`不匹配，您想跳过一行，对吗？**如果**`filtervalue`匹配至少一个过滤器，则不要跳过一行。

```
$.each(data, function(i, row) {
    count      = parseInt(row['n']);
    year       = row['year'];

    // if there are no filters, don't skip the row (right? ;-)
    var skipRow = !!options.filters;

    if (options.filters) {
        $.each(options.filters, function(filter, filtervalue) {
            if (row[filter] == filtervalue) {
                skipRow = false;
            }
        });
    }

    if (skipRow) return true;
} 
```

# php - Joomla！2.5 - 将自定义表实现为插件或模块？

> ID：10254926
> 
> 赞同：0
> 
> 时间：2012-04-20T23:50:05.597
> 
> 标签：php, html, joomla

刚开始使用 Joomla 开发！(2.5)，完全新手，通读有关插件、组件和模块的文档。很难弄清楚选择哪个以及如何实施。我想要一张类似于 Joomla 的插件管理器中使用的表格！管理员后端可以搜索、过滤结果，甚至可以切换单个条目（通过单击状态圈启用/禁用）。有人可以向我指出一个教程，甚至是一些我可以开发的示例代码吗？

我已经阅读了一些网站，包括这个（http://www.inmotionhosting.com/support/website/joomla-25/plugin-vs-module-vs-component）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T10:32:57.343

如果您想在管理员面板中创建带有表格的页面，显示一些项目，您应该开发 joomla 组件。寻找这个：[http ://docs.joomla.org/Developing_a_Model-View-Controller_(MVC)_Component_for_Joomla!2.5](http://docs.joomla.org/Developing_a_Model-View-Controller_(MVC)_Component_for_Joomla!2.5)

注意，只有组件可以提供扩展的管理员界面来管理一些条目，在字体端创建页面。插件仅用于处理组件和模块的输出。并且模块仅用于在前端模板的特定位置显示一些 html。

# c# - 继承 XAML 布局/母版页

> ID：10254930
> 
> 赞同：0
> 
> 时间：2012-04-20T23:50:57.787
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我在弹出窗口中有一个故事板动画，我希望它出现在应用程序的每个页面上。如果不将动画复制粘贴到每个 XAML 和所有用于控制动画的代码隐藏逻辑中，我该如何做到这一点。我也有按钮，应该在每个页面上以及某些位置。有没有比复制代码更好的方法来做到这一点？我已经从 PhoneApplicationPage 继承，但它只处理代码隐藏的东西，没有 XAML 布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T08:30:46.727

您可以为您的动画创建用户控件而不是复制代码，在其他用户控件或页面中调用此用户控件。

要添加用户控件，请右键单击您的项目添加，然后新建项目，然后单击 Silverlight 用户控件，相应地命名您的控件，例如“AnimationUserControl”，最后单击添加。你的动画是否在这个新的用户控件中工作，以便在其他控件中调用这个新的用户控件，你必须将你的项目的引用添加到用户控件中，你正在调用 AnimationUserControl，例如在 MainPage.xaml 中，如下所示：

```
<UserControl x:Class="Com.Softechww.Controls.Silverlight.Scheduler.Scheduler"
xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
xmlns:local="clr-namespace:ProjectNameSpace" Width="800" Height="450" > 
```

添加带有“xmlns：local”的新行，其值是指您的项目根目录，可以通过在 Silverlight 下的 Visual Studio 中右键单击项目文件，然后单击默认命名空间来找到项目命名空间。

现在只需在下面的用户控件中调用它，如下所示：

```
<Grid x:Name="LayoutRoot">
    <local:AnimationUserControl/>
</Grid> 
```

它应该工作。

# python - 使用 lmxl python 更改元素值

> ID：10254931
> 
> 赞同：1
> 
> 时间：2012-04-20T23:50:57.940
> 
> 标签：python, lxml

我需要能够解析一个大的 xml 文件，但只查找`<name>`元素并替换值。因此，我正在按如下方式进行事件驱动解析，我有以下代码：

```
import os, re, sys
from lxml import etree

# parse the xml file
context = etree.iterparse(xmlFile, events=('end',), tag='name')

for event, elem in context:

    # this is an internal method that I call to perform regex
    newElementText = searchReplace(elem.text).replace(" ", "")

    # assign the elem.text to the replaced value
    elem.text = newElementText

    # write to the xml
    etree.tostring(elem, encoding='utf-8') 
```

我的问题是将更新的元素值写入文件。当我调用 etree.tostring() 时，它不会更新文件。有人可以请指出我的方式的错误。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T23:56:35.253

`etree.tostring(elem)`返回树的字符串表示形式，因此它在您的代码中不执行任何操作。使用`elem.write(xmlFile, encoding='utf-8')`.

# javascript - 用于路由处理的 Restify、Node.js urlencoding

> ID：10254937
> 
> 赞同：2
> 
> 时间：2012-04-20T23:52:38.067
> 
> 标签：javascript, node.js, nginx

我有这样的路线-

```
server.get({
    url : '/reguser/:useremail',
    name : 'pre-register-user'
    }, function(req, res, next) {
        return next();
    }, function sendResult(req, res, next) {
        var user = { 'email' : req.params.useremail }
      // Create a new user on the DB
      res.contentType = 'application/json';
      // rest of the processing.
} 
```

如果使用 /prereg/someone%40someemail.com 调用它就可以工作。但如果它得到 /prereg/someone@someemail.com 它根本不会处理。我在前面使用 Nginx 并重写它用 @ 替换 %40，即使网页正在发送带有 %40 的 urlencoded 字符串。

有什么办法摆脱这个吗？

# objective-c - UIScrollView 分页需要手动修改 Edge Inset 才能正常工作

> ID：10254940
> 
> 赞同：0
> 
> 时间：2012-04-20T23:53:21.683
> 
> 标签：objective-c, ios, uiscrollview

我有一个 uiscrollview，其中包含三个启用了分页的 uiviewcontroller。当 content inset 为 {0, 0, 0, 0} 时，结果如下：

![在此处输入图像描述](../Images/a1d9c7299b25f5626bf87ffb1ebf68f2.png)

但是，当我将滚动视图的内容插入修改为左侧有 -7 时，这是修复它： ![在此处输入图像描述](../Images/aa2f856f96f130614695ba17c877c09f.png)

我试图弄清楚为什么 -7 是解决这个问题的神奇数字？这是 SliderViewController 的代码

```
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil event:(Event*)event
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        _event = event;
         conversationVC = [[ConversationViewController alloc] initWithNibName:@"ConversationViewController" bundle:[NSBundle mainBundle] event:_event];
        eventVC = [[EventControlViewController alloc] initWithNibName:@"EventControlViewController" bundle:[NSBundle mainBundle]];
        suggestionVC = [[SuggestionViewController alloc] initWithNibName:@"SuggestionViewController" bundle:[NSBundle mainBundle]];
        [self addChildViewController:conversationVC];
        [self addChildViewController:eventVC];
        [self addChildViewController:suggestionVC];
        // Custom initialization
    }
    return self;
}
- (void)layoutSubviews
{
    CGFloat curXLoc = 0;
    CGFloat yMax = 0;
    for(UIView *view in _scrollView.subviews)
    {
        CGRect frame = view.frame;
        frame.origin.x = curXLoc;
        view.frame = frame;
        curXLoc += view.frame.size.width;
        yMax = MAX(view.frame.size.height, yMax);
    }
    [_scrollView setContentSize:CGSizeMake(_scrollView.subviews.count * 320, yMax)];
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    _scrollView.clipsToBounds = YES;
    _scrollView.indicatorStyle = UIScrollViewIndicatorStyleWhite;
    [_scrollView addSubview:conversationVC.view];
    [_scrollView addSubview:eventVC.view];
    [_scrollView addSubview:suggestionVC.view];
    [self layoutSubviews];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:41:30.260

如果您从情节提要启动视图控制器，只需打开 Size Inspector 以检查根视图框架矩形的 x 是否设置为 0

# jquery - 淡入 CSS 类

> ID：10254941
> 
> 赞同：6
> 
> 时间：2012-04-20T23:53:57.087
> 
> 标签：jquery, html, fadein, css

我想知道如何使用 jquery 淡入 css 类。我正在寻找的效果有点像你在这里看到的：[https ://squareup.com/](https://squareup.com/)

到目前为止，我尝试过的是：

```
$(document).ready(function() {
    $('.mini-nav li').hover(function () {
    $('.hover').fadeIn(slow);
};
}); 
```

我考虑过 .addClass() 方法，但我不确定在哪里添加它（或者这是否是最好的做法）。

编辑：这是我尝试过的一些东西：http: [//jsfiddle.net/J93NR/1/](http://jsfiddle.net/J93NR/1/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-21T01:06:02.340

您不需要 jquery，纯 CSS 解决方案要简单得多（[小提琴](http://jsfiddle.net/hByb8/)）：

```
<div class="outer"><div class="inner"></div></div>

.outer {
    background: url(...);
}
.inner {
    background: url(...);
    opacity: 1;
    transition: opacity 0.3s;
}
.inner:hover {
    opacity: 0;
} 
```

[http://jsfiddle.net/ZAgnY/](http://jsfiddle.net/ZAgnY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-20T23:58:38.253

如果您使用的是 jQuery UI，则可以选择使用[switchclass()使用类进行动画处理](http://jqueryui.com/docs/switchClass/)

更新：

```
$("element").addClass("classname").fadeIn("slow"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T00:10:08.363

```
<style type="text/css">
#leaf,#leaf:before{background:url(sprite.png)}
#leaf{position:relative}
#leaf:before{content:'\0020';position:absolute;top:0;left:0;display:none}
</style>

<!-- more html -->

<ul id="menu">
  <li id="leaf"><a href="#">Link</a></li>
</ul>

<!-- more html -->

<script type="text/javascript">
$(document).ready(function () {
  $('.min-nav li').hover({
    // Handler in
    function () {
      $("#leaf:before").fadeIn("slow");
    },
    // Handler out
    function () {
      $("#leaf:before").fadeOut("slow");
    }
  });
});
</script> 
```

当然，也可以使用 CSS3 而不是 jQuery 来实现这一点。这正是您链接的网站上的人正在做的事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-20T23:57:14.583

代码中有语法错误：试试这个：

```
$(document).ready(function() {
    $('.mini-nav li').mouseenter(function () {
    $('.hover').fadeIn("slow");
    });
}); 
```

* * *

您可以`a`改为选择标签，将鼠标悬停在您的 li 标签上，使其样式悬停在菜单的可见区域之外，试试这个：

[http://jsfiddle.net/J93NR/3/](http://jsfiddle.net/J93NR/3/)

或者：

[http://jsfiddle.net/J93NR/4/](http://jsfiddle.net/J93NR/4/)

# javascript - Javascript：检测 ascx 页面中的负载。IE浏览器

> ID：10254942
> 
> 赞同：0
> 
> 时间：2012-04-20T23:54:08.787
> 
> 标签：javascript, model-view-controller, internet-explorer, ascx

我有一个下拉菜单会触发 ChangeGraph javascript 函数。在 Chrome/Firefox 中，当我的局部视图 (.ascx) 加载时，我会收到 hello 警报。在 IE 中情况并非如此。关于如何解决这个问题的任何想法。基本上，一旦使用“$('#GraphForm').html(data);”编写 ascx 页面，我就无法启动 javascript 函数。

从我的 Index.aspx：

```
<div id="GraphForm"></div> 
```

Javascript：

```
function ChangeGraph(displayTypeId) {
    $('#GraphForm').html("");

    $.get('/Dashboard/GetGraphForm', { id: displayTypeId }, function(data) {
        $('#GraphForm').html(data);        
    });
} 
```

控制器：

```
public PartialViewResult GetGraphForm(int id)
{
    //... Build Model (removed)

    return PartialView("EnergyConsumedFormView"/* , model */);
} 
```

EnergyConsumedFormView.ascx Javascript：

```
<script type="text/javascript">
    $(document).ready(function() {
        alert('hello');
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T19:09:36.550

我是 javascript 新手，所以在我弄清楚之前答案并不明显。知道这似乎很明显。如果您不在乎文档是否准备就绪，只需调用该函数...

```
<script type="text/javascript">
    alert('hello');
</script> 
```

# cocoa - Finder 像彩色标签

> ID：10254947
> 
> 赞同：0
> 
> 时间：2012-04-20T23:55:07.077
> 
> 标签：cocoa, finder

OS X Finder 有这个不错的功能来为文件添加颜色标签。我正在考虑在我的应用程序中使用类似的功能（即：在 NSTableView/NSOutlineView 中使用它，而不是从我的应用程序中突出显示 Finder 中的项目）。这种能力是否可以通过任何默认的用户界面类获得，还是需要自定义实现？

我已经尝试将 NSTextFieldBezelStyle 设置为 NSTextFieldRoundedBezel 但这似乎会扼杀绘制背景颜色的能力，并且默认为灰色边框。

![在此处输入图像描述](../Images/6cdba9f353de2a628c0cd28285369a27.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T01:14:36.730

下载 Apple SourceView 示例应用程序。这是一个使用自定义 NSTextFieldCell 进行绘图的 NSOutlineView；调整它以绘制您的自定义颜色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T00:02:51.007

查看 NSURL NSURLLabelColorKey，它是您可以为 URL 设置的属性之一。您可以使用 setResourceValues:error 设置这些值：

编辑后：对不起，我误解了这个问题。我认为最简单的方法是使用基于视图的表格并将无边框标签放在自定义类型的 NSBox 内。您可以为框提供圆角和无边框的背景颜色，这看起来就像查找器标签。

# javascript - 带有three.js的背景

> ID：10254949
> 
> 赞同：0
> 
> 时间：2012-04-20T23:55:33.160
> 
> 标签：javascript, webgl, three.js

有人可以帮我处理three.js吗？

我需要绘制背景，比如 THREE.Sprite，但它必须位于任何 3d 对象下，稍后会绘制。我有一个相机，只能在 Z 轴上移动。

我尝试使用：

*   立方体贴图着色器 - 问题：带有阴影平面的伪影，绘制不稳定

*   三、复制相机移动的精灵 - 问题：带有阴影平面的人工制品 - 它有一个边缘突出显示或仅绘制其他没有物体的精灵。

*   HTML DOM 背景 - 问题：模型中的大而丑陋的别名。

我可以尝试更多什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T10:11:12.690

您可以尝试分几次绘制，即将背景场景的第一次渲染到缓冲区，然后在第一个“缓冲区”上进行第二次渲染。也许使用缓冲区作为背景（使用正交投影将其绘制为 2D，并在该通道中禁用深度缓冲区写入）。

我自己没有尝试过使用three.js，但这就是我使用“传统”OpenGL 的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-16T22:51:56.640

如果你想要一个“3d”背景，即跟随你的相机旋转的东西，但不对运动做出反应（无限远），那么唯一的方法就是使用立方体贴图。

另一种解决方案是环境穹顶 - 一个完全 3d 的对象。

如果你想要一个静态背景，那么你应该能够只做一个 html 背景，我不确定为什么这会失败以及你在谈论什么“模型中的别名”。

# ios - UITableView 单元格在初始化时不为零

> ID：10254951
> 
> 赞同：4
> 
> 时间：2012-04-20T23:56:24.020
> 
> 标签：ios, ios5, uitableview, uistoryboard, xcode-storyboard

我正在设置我`UITableView`使用的故事板编辑器。为了创建我的单元格，我使用标准委托方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SearchResultCell"];
        if (cell == nil)
        {
        // Do cell setup
        }
    // etc
    return cell;
} 
```

除非单元格第一次出列，否则它不是零，因为它应该是。所以 if 语句中的代码永远不会被执行。

人们在重用标识符不一致时会收到此错误，因此我继续验证我在故事板视图中使用的重用标识符与我在代码中使用的完全相同。仍然面临这个问题。我在项目中还有几个表视图，每个表视图都有一个唯一的重用标识符。还是没有骰子。有人知道这里还有什么可能出错的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-21T00:09:22.203

这不再是 UITableView 的工作方式了。阅读您的问题，我认为您可能对它之前的工作方式也感到困惑。如果没有，抱歉，本文的第一部分只是回顾。:)

## 没有故事板单元原型

以下是它过去的工作方式：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    // If the tableview has an offscreen, unused cell of the right identifier
    // it will return it.
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SearchResultCell"];
    if (cell == nil)
    {
        // Initial creation, nothing row specific.
    }

    // Per row setup here.

    return cell;
} 
```

在这里，当您使用重用标识符创建单元时，您**只需**在此处进行初始设置。没有特定于这个特定的行/索引路径。

在我放置**每行设置**注释的地方，你有一个正确标识符的单元格。它可能是新鲜的电池，也可能是回收的电池。您负责与此特定行/索引路径相关的所有设置。

示例：如果您在某些行中设置文本（可能），您需要在所有行中设置或清除它，或者您设置的行中的文本将泄漏到您没有设置的单元格中。

## 使用故事板原型

但是，使用故事板，**故事板和表格视图会处理初始单元格的创建**！这是很棒的东西。使用情节提要时，您可以直接在 tableview 中绘制单元原型，Cocoa Touch 将为您完成初始创建。

相反，你会得到这个：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"SearchResultCell"];
    // You'll always have a cell now!

    // Per row setup here.

    return cell;
} 
```

您负责与以前一样的每行设置，但您不需要编写代码来构建初始空单元格，无论是内联还是在其自己的子类中。

正如 Ian 在下面指出的，您仍然可以使用旧方法。只需确保不要在情节提要中为您指定的标识符包含单元原型。视图控制器将无法从单元原型构建您的单元，`dequeueReusableCellWithIdentifier`将返回 nil，并且您将完全回到以前的位置。

# node.js - 我可以在 Mongoose 中设置特定的返回值吗

> ID：10254952
> 
> 赞同：0
> 
> 时间：2012-04-20T23:56:25.707
> 
> 标签：node.js, mongodb, mongoose

我有一个包含产品的集合，它们的格式并不完全正确。有些缺少数据，有些是字符串而不是数字。

这种行为破坏了我的模板引擎，我想知道是否有解决方法。

如果我只是将其添加到架构中：

```
order : { type: Number, 'default': 0 } 
```

如果在集合中找不到它，它不会设置值，所以我想要类似的东西：

如果`order`没有设置`return 0`其他`return order`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T02:01:11.623

你可以这样做：

```
orders.find({}, function(err, results){
    res.render('orders/index', {orders: results || 0 });
}); 
```

# linux - 单声道/linux套接字被拒绝？

> ID：10254954
> 
> 赞同：2
> 
> 时间：2012-04-20T23:56:30.943
> 
> 标签：linux, sockets, mono

我正在使用[炼金术 websockets](http://alchemywebsockets.net/)并想出足够的东西来让一些东西在 Windows 上工作。我用单声道在 linux (ubuntu) 上构建了炼金术并运行了我的服务器。它得到一个套接字错误。端口> 1k（确切地说是端口8005）

```
Unhandled Exception: System.Net.Sockets.SocketException: Access denied
  at System.Net.Sockets.Socket.Bind (System.Net.EndPoint local_end) [0x00000] in <filename unknown>:0 
  at System.Net.Sockets.TcpListener.Start (Int32 backlog) [0x00000] in <filename unknown>:0 
  at System.Net.Sockets.TcpListener.Start () [0x00000] in <filename unknown>:0 
  at Alchemy.TcpServer.Listen (System.Object state) [0x00000] in <filename unknown>:0 
```

从文件名看来，我忘记使用调试信息构建或没有安装符号，但我确实在单声道上成功构建。它使用.NET 4.0 mono 2.10

为什么我在套接字上被拒绝访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:02:55.910

有几件事要检查

`netstat -a | grep 8005`查看是否有其他东西正在使用端口 8005

以su身份运行，看看是不是权限问题

`sudo mono YourProgram.exe`

我没有仔细查看您正在使用的库，但如果它使用 ICMP 或原始套接字，它必须以 root 身份运行。

要查看的另一件事是查看您使用的 DNS 解析是否匹配。沙盒运行时通常只会抱怨这一点，但我见过奇怪的事情发生，而且你没有给我们太多信息。

如果这是一个根本问题，而不是另一个程序正在使用端口 8005，那么您可能可以`setcap`在 mono 二进制文件上使用，这样您就不必以 root 身份运行它。

以 root 身份运行： `setcap cap_net_raw=iep /path/to/mono`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T23:01:15.947

[正如Access denied for Alchemy WebSocket creation in Linux/Mono 中](https://stackoverflow.com/questions/12380411/access-denied-for-alchemy-websocket-creation-in-linux-mono#comment16913395_12380411)所回答的那样

> Alchemy 在 843 处抛出一个 Flash 策略文件 - 在实例化您的服务器时尝试关闭 flashsocketpolicy。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-03T21:13:41.290

将功能设置为单声道二进制文件。

```
sudo setcap cap_net_raw,cap_net_admin=eip /usr/bin/mono-sgen 
```

# bash - 将目录名称与文字进行比较会返回意外错误

> ID：10254957
> 
> 赞同：1
> 
> 时间：2012-04-20T23:56:37.187
> 
> 标签：bash, if-statement

我正在尝试比较一个变量：

```
DIR=$(pwd | cut -d '/' -f7,8) 
```

用字符串：

```
NAME="IOPs/All_Brush" 
```

我的 if 语句是：

```
if [ $DIR <> $NAME ]; then
    blah blah 
fi 
```

返回此错误：

```
line 18: IOPs/All_Brush: No such file or directory 
```

这里发生了什么？我很确定我忘记了一些非常基本的东西，但我现在不知所措。我想过逃避斜线，但没有奏效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:01:30.060

`<>`是双向重定向，而不是比较运算符。您还想使用引号，以防有空格或其他特殊字符，最好使用`[[`.

```
if [[ "$DIR" != "$NAME" ]]; then
    : do something here
fi 
```

# ruby-on-rails-3.1 - Rails 3.1+ 和 GeoIP 数据库文件位置/访问

> ID：10254961
> 
> 赞同：0
> 
> 时间：2012-04-20T23:57:22.570
> 
> 标签：ruby-on-rails-3.1, geoip

这个问题与[Rails - 我必须在我的 rails 项目 - GeoIp City database 中存储数据文件 (.dat) 的位置有关](https://stackoverflow.com/questions/5268275/rails-where-i-have-to-store-data-file-dat-in-my-rails-project-geoip-city)。我有一个 Rails 3.2 应用程序。我正在尝试运行：

```
@geoip = GeoIP.new('GeoLiteCity.dat') 
```

在我的应用程序的一个控制器中。我将“GeoLiteCity.dat”文件解压缩到 /public 文件夹中。我收到错误消息“没有这样的文件或目录 - GeoLiteCity.dat”。

我已经尝试将它放在图像资产管道文件夹和其他一些随机位置。我继续收到同样的错误。不确定如何访问此文件。关于我做错了什么或如何使用资产管道最好地访问它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T20:52:14.993

尝试通过完整路径引用它：

```
@geoip = GeoIP.new("#{Rails.root}/public/GeoLiteCity.dat") 
```

附带说明一下，这可能没什么大不了的，但我不会将文件放在您的公共目录中。

# maven - Maven：如何安装 mvnsh？

> ID：10254968
> 
> 赞同：4
> 
> 时间：2012-04-20T23:59:04.853
> 
> 标签：maven

我怀疑我的做法完全是错误的。

我听说过[mvnsh](http://shell.sonatype.org/)，并想尝试一下，以减少构建时的延迟。

但我完全不知道如何做到这一点。我仍在学习 maven，并在`mvn`和工具之间画出错误的相似之处`gem`，`cabal`或者`cpan`仍然在咬我，所以我不确定我需要做什么来安装命令行工具，比如`mvnsh`.

在某些任意项目的`pom.xml`.

我`mvnsh-assembly-1.0.1.pom`从下载页面下载了到目前为止所涉及的理论，但到目前为止，我尝试过的任何方法都没有奏效。 `mvn install -f mvnsh-assembly-1.0.1.pom`下载了一堆罐子，然后死了。 `mvn artifact:install -f mvnsh-assembly-1.0.1.pom`下载了更多的罐子，然后死了。

我真的不知道我在这里做什么。我什至应该`mvn`用来安装`mvnsh`吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-21T09:50:18.417

只需下载[http://repo1.maven.org/maven2/org/sonatype/maven/shell/dist/mvnsh-assembly/1.0.1/mvnsh-assembly-1.0.1-bin.zip](http://repo1.maven.org/maven2/org/sonatype/maven/shell/dist/mvnsh-assembly/1.0.1/mvnsh-assembly-1.0.1-bin.zip)或 .tar.gz存档取决于您的操作系统解压缩它并将分发的 bin 文件夹放到您的 PATH 之后，您可以启动 mvnsh 。

# c++ - 当用户已经是管理员时通过 C++ 激活管理员 [以管理员身份运行]

> ID：10254969
> 
> 赞同：-1
> 
> 时间：2012-04-20T23:59:45.707
> 
> 标签：c++, windows, uac

好吧，我注意到在 Windows 7 上，有时即使您是管理员，也无法做很多事情，可能是某种错误，我的应用程序我在启动程序之前检查用户是否是管理员，因为我的程序创建文件在默认受保护的文件夹中，例如根文件夹 ( C: )，如果您不是 Windows 7 的管理员，则只能在此处创建文件夹。

因此，如果我右键单击我的应用程序并转到“以管理员身份运行”，它就可以正常工作。有没有办法让我的应用程序自动以管理员身份运行？我希望能够制作一行代码，例如：`ActivateAdministrator();`并且完全可用于代码，因为我更改属性，使用`ifstream`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-21T00:10:54.667

您可以将清单添加到您的可执行文件 - [http://msdn.microsoft.com/en-us/library/bb756929.aspx](http://msdn.microsoft.com/en-us/library/bb756929.aspx)

如果用户在打开 UAC 的系统上运行，并且不是管理员，则包含的清单`requestedExecutionLevel level="requireAdministrator"`将提示输入管理员密码，然后您的应用程序才能以管理权限运行。（需要管理员权限意味着密码错误或没有密码将完全停止运行）

如果他们是打开 UAC 的管理员，那么相同的清单将导致一个是/否提示询问您的应用程序是否应该被授予管理权限。

当然，真正的问题是，无论您的应用程序在做什么需要管理权限，都需要进行检查。

大多数时候，普通用户级应用程序根本不需要该权限。这确实是一个应用程序设计问题 - 您的应用程序在做什么需要管理员权限？真的有必要吗*？*例如，如果您正在修改文件，那么为什么这些文件在文件系统的受保护区域中而不是在用户的配置文件空间中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T00:04:23.283

您可能会发现有关权限的[Windows 开发中心文章](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379306%28v=vs.85%29.aspx)很有帮助，特别[是在 C++ 中启用和禁用权限](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446619%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-21T00:10:09.663

虽然这是在 C# 中，但我不知道对你来说可能更容易。我所做的是[检测是否以管理员身份运行有或没有提升的权限？](https://stackoverflow.com/questions/1220213/c-detect-if-running-with-elevated-privileges)，并且如果在请求管理权限时没有重新运行当前进程（如果启用了 UAC，则会向当前用户弹出一个窗口，并询问程序是否可以使用管理权限运行）。

然后一些简单的（但 C# 代码）看起来像：

```
// UAC is a class from the previous link on SO
if (UAC.IsCurrentProcessElevated())
{
  string currentProcess = Assembly.GetEntryAssembly().Location;
  string arguments = string.Join(" ", this._Args.ToArray());
  ProcessStartInfo startInfo = new ProcessStartInfo(currentProcess, arguments); 
  startInfo.UseShellExecute = true;
  startInfo.Verb = "runas";
  Process.Start(startInfo);
} 
```

未提升的进程将完全启动一个请求管理权限的新进程。

# php - 使用 php/mysql 编辑页面

> ID：10254971
> 
> 赞同：0
> 
> 时间：2012-04-20T23:59:59.660
> 
> 标签：php

我似乎在编辑用户/成员信息时遇到问题。我已向 scipt 提供了以下表格。对此的任何解决方案都非常感谢。我已经进行了验证检查以缩短脚本。

页面呈现没有错误。并显示成功消息。但是，数据库中的信息不会被更改/编辑。

来自数据库的值（对应于正在运行的第二个数据库查询）也显示在表单的字段中。但是，当我发布更改时，并未在数据库中进行更改。

```
**PHP scipt**

<?php
 session_start();
if (isset($_SESSION['id'])) {
$id = $_SESSION['id'];
$username = $_SESSION['username'];
}

else {
echo "You have not signed in";
}

 if (isset ($_POST['submit'])){
 $title = $_POST['title'];
 $content = $_POST['content'];
 $make= $_POST['make'];
 $model = $_POST['model'];
 $price = $_POST['price'];
 $location = $_POST['location'];

 include_once "scripts/connect_to_mysql.php";     

 $title = mysql_real_escape_string($title);
 $content = mysql_real_escape_string($content);
 $make = mysql_real_escape_string($make);
 $model = mysql_real_escape_string($model);
 $price = mysql_real_escape_string($price);
 $location = mysql_real_escape_string($location);

 $title = eregi_replace("`", "", $title);
 $content = eregi_replace("`", "", $content);
 $make = eregi_replace("`", "", $make);
 $model = eregi_replace("`", "", $model);
 $price = eregi_replace("`", "", $price);
 $location = eregi_replace("`", "", $location);

 $sql = mysql_query ("UPDATE `advertisements` SET `title`='$title',        
 `content`='$content', `make`='$make', `model`= '$model', `price`='$price', 
 `location`='$location', `id`='$id' WHERE `advertisements` . `ads_id`='$ads_id'")
 or die (mysql_error());

 $success = "You have successfuly edited your ad";
 }

 else {

  if (isset($_GET['ads_id'])) {
  $ads_id = $_GET['ads_id'];
  }

  else {
  echo "URL not found";
   }

   include_once "scripts/connect_to_mysql.php";
   $query = mysql_query("SELECT * FROM advertisements WHERE ads_id='$ads_id'");

   while($row = mysql_fetch_assoc($query))
   {
   $title = $row["title"];
$content = $row["content"];
$make = $row["make"];   
$model = $row["model"];
$price = $row["price"];
$location = $row["location"];
$ads_id = $row ["ads_id"];
   }

   }

   ?>

   **form**

   <h1>Edit Advertisement</h1>

    <?php echo "$success";?>

<form action="edit.php" method="POST" enctype="multipart/form-data">

 Title: <input name="title" type="text" value="<?php print "$title"; ?>"/><br/>
 Content: <input name="content" type="text" value="<?php print "$content";
     ?>"/><br/>
 Make: <select name="make"> 
 <option value="<?php echo "$make"; ?>"><?php echo "$make"; ?></option> 
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
 </select> <br/>

 Model: <select name="model"> 
  <option value="<?php echo "$model"; ?>"><?php echo "$model"; ?></option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
</select> <br/>
Price: <input name="price" type="text" value="<?php print "$price"; ?>"> <br/>

Location: <select name="location"> <br/>
        <option value="<?php echo "$location"; ?>"><?php echo "$location";
                    ?></option>
        <option value="Leicester">Leicester</option>
        <option value="Loughborough">Loughborough</option>
        <option value="Nottingham">Nottingham</option>
        <option value="Derby">Derby</option>
</select> <br/> <br/>

     <input name="submit" type="submit" value="Edit ad"/>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:14:58.283

尝试移动

```
 if (isset($_GET['ads_id'])) {
  $ads_id = $_GET['ads_id'];
  }

  else {
  echo "URL not found";
   } 
```

到右上角之后

```
 if (isset ($_POST['submit'])){ 
```

这可能会导致问题

我猜你的表单动作必须有类似的东西

```
<form action ="edit.php?ads_id=the id for the page" > 
```

# python - Tkinter 图像显示（带有 [converted] NumPy 数组）

> ID：10254975
> 
> 赞同：4
> 
> 时间：2012-04-21T00:00:21.930
> 
> 标签：python, tkinter, python-imaging-library

简而言之，我想将 ImageTk.PhotoImage 对象转换为 Image (PIL) 对象或 numpy 数组。知道您可以使用 numpy.asarray() 将 Image (PIL) 对象转换为 numpy 数组。我得到了一个 numpy 数组，可以在 Tkinter 中显示它，例如：

```
 from Tkinter import *
 import numpy as np
 import Image, ImageTk

 def callback(event):
      # do some stuff with a numpy array
      # ideally, e.g.:
      x=event.x; y=event.y
      val=np.asarray(imgTk)[x,y]
      print val

 arr=np.ones([256,256])
 img=Image.fromarray(arr)
 imgTk=ImageTk.PhotoImage(img)

 t=Tk()
 l=Label(t)
 l.configure(image=imgTk)
 l.bind('<Motion>', callback)

 l.pack()
 t.mainloop() 
```

但那部分

```
 np.asarray(imgTk) 
```

没有像我预期的那样返回 [256,256] 数组。可能有一种更简单的方法来解决这个问题（如您所见，当我将光标移到它上面时，我正在尝试打印出 2D numpy 数组或“图像”的像素值）。也许我什至可以使用 ImageTk 在 Tkinter 中显示一个 numpy 数组或 Image (PIL) 对象，但我似乎也找不到答案。任何建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-21T02:28:09.690

从 ImageTk 实例获取像素数据的效率非常低，您无法将 ImageTk 实例转换回 PIL 图像，但您可以简单地从原始 PIL 图像甚至带有坐标的数组中获取数据。

代替：

```
val=np.asarray(imgTk)[x,y] 
```

利用：

```
val=img.getpixel((x, y)) 
```

# xmlhttprequest - 从远程服务器请求 xmlhttp 时如何指定服务器名称？

> ID：10254977
> 
> 赞同：0
> 
> 时间：2012-04-21T00:01:14.957
> 
> 标签：xmlhttprequest

先看[这个](https://stackoverflow.com/questions/9934563/connecting-to-postgres-database-from-a-phonegap-app)问题，然后是最佳答案。话虽如此，我需要从移动应用程序向远程服务器发出 XMLHttpRequest。有人可以举个例子吗？我不知道在哪里指定 URL（带参数），如上一个问题的答案所示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T01:59:20.277

XMLHttpRequests 将 URL 作为参数。它可以是一个相对 URL，但它也可以是一个完全限定的 URL……除了它可能不会做你想要的，因为大多数浏览器都内置了[跨站点脚本保护。](https://en.wikipedia.org/wiki/Cross-site_scripting)

[这个问题](https://stackoverflow.com/questions/2921242/how-to-use-jsonp-to-overcome-xss-issue)有关于这个问题的解决方案的详细信息。

# javascript - 快速 tumblr boo-lean + 获取文本功能

> ID：10254979
> 
> 赞同：0
> 
> 时间：2012-04-21T00:01:51.077
> 
> 标签：javascript, jquery, text

詹姆斯在这里。快速，简单的问题给你们。我正在使用一个使用文本选项的 tumblr 主题，这意味着用户可以输入他们想要的任何内容，并且它将显示在博客上。但是，文本选项不适用于 javascript，因此我不能使用 text 选项来表示列的数量，也不能使用 text 选项来组织整个页面的脚本中的帖子之间的间距。我知道有一种方法，但我不知道如何做到这一点，只需创建一个不可见的 div，其中包含 boo 精益文本，然后使用 jQuery 获取 div 内的文本以用作变量？我在想 .text(); 或 .html(); 但我不知道。任何代码或帮助将不胜感激。我是这个 jquery 的新手，所以这意味着很多。

编辑：如果这让任何人感到困惑，我基本上需要使用 jQuery 来获取不可见元素内的文本并将该文本用作变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-21T00:09:12.350

我不确定您在这里所说的“布尔”是什么意思，但根据您的编辑，您想要：

```
$('#id-of-element').text() 
```

如果您只想要 div 中的文本，或者，

```
$('#id-of-element').html() 
```

如果你想要 HTML。因此，如果 div 包含：

```
<h1>foo</h1>, 
```

`text()`会给你“foo”，而`html()`会给你“ `<h1>foo</h1>`”。

# php - 在数组数组中插入数组元素的最佳方法

> ID：10254980
> 
> 赞同：0
> 
> 时间：2012-04-21T00:02:02.903
> 
> 标签：php, arrays, cakephp-2.1

我正在尝试在数组中插入一个包含`id`关系数据的数组元素，将多条记录保存在`CakePHP`.

这是数组的显示方式：

```
[Venue] => Array (
    [0] => Array (
        [name] => Great mansion
        [where] => New York
    )
    [1] => Array (
        [name] => Diamond palace
        [where] => London
    )
    [2] => Array (
        [name] => Palazzo Falcone
        [where] => Bologna
    )
) 
```

我想添加`architect_id`到数组的每个元素，所以：

```
[Venue] => Array (
    [0] => Array (
        [name] => Great mansion
        [where] => New York
        [architect_id] => 33
    )
    [1] => Array (
        [name] => Diamond palace
        [where] => London
        [architect_id] => 33
    )
    [2] => Array (
        [name] => Palazzo Falcone
        [where] => Bologna
        [architect_id] => 33
    )
) 
```

我不确定我写的内容是否经过优化或可以改进：

```
$tot = count($this->request->data['Venue']);

for ($i = 0; $i < $tot; $i ++) {
    $this->request->data['Venue'][$i]['architect_id'] = $this->Architect->id;
}

$this->Venue->saveAll($this->request->data['Venue']); 
```

该代码有效，但这是一个好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-21T00:08:23.110

到目前为止，您的解决方案很好。

```
foreach ($this->request->data['Venue'] as &$venue) {
  $venue['architect_id'] = $this->Architect->id;
} 
```

也应该工作。自己决定，你觉得哪一个更易读。

# c# - WCF 服务器/客户端回调，从客户端回复到服务器

> ID：10254983
> 
> 赞同：0
> 
> 时间：2012-04-21T00:02:26.337
> 
> 标签：c#, wcf, callback, client

在我的客户端/服务器应用程序中，我想计算每个客户端的其他值。我使用回调制作了应用程序，但是出了点问题。我得到异常，当我想要调用方法时，该方法`pipeproxy.polacz(S);`获取服务器的价值并现在在服务器控制台中写入。

例外是：

`This operation would deadlock because the reply cannot be received until the current Message completes processing. If you want to allow out-of-order message processing, specify ConcurrencyMode of Reentrant or Multiple on CallbackBehaviorAttribute.`

另一个问题是，如何从所有客户中获得此功能的总和。例子;

```
client 1: S = 1;  
client 2: S = 2;  
client 3: S = 3; 
```

这个函数从所有客户端获取结果并求和。因此服务器将在服务器控制台中写入 6。

我的申请代码：

服务器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using Interface;

namespace WCFapp
{
    class Program
    {
        static void Main(string[] args)
        {
            Klienci cust = new Klienci();
            cust.Connect();
        }
    }
} 
```

.

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Interface;

namespace WCFapp
{
     [ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)]
class Klienci : IMessage
{
    private static List<ImessageCallback> subscribers =
        new List<ImessageCallback>();

    public void lista()
    {
        string nm = Console.ReadLine();
        if (nm == "1")
        {
            Console.WriteLine("Number of conected clients: " + subscribers.Count());
            funkcja();

        }
    }

    public void Connect()
    {
        using (ServiceHost host = new ServiceHost(
            typeof(Klienci), new Uri("net.tcp://localhost:8000")))
        {
            host.AddServiceEndpoint(typeof(IMessage),
                new NetTcpBinding(), "ISubscribe");

            try
            {
                host.Open();
                lista();
                Console.ReadLine();
                host.Close();
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
            }
        }
    }

    public bool Subscribe()
    {
        try
        {
            ImessageCallback callback = OperationContext.Current.GetCallbackChannel<ImessageCallback>();
            if (!subscribers.Contains(callback))
                subscribers.Add(callback);
            Console.WriteLine("Client is conected ({0}).", callback.GetHashCode());
            return true;
        }
        catch (Exception e)
        {
            Console.WriteLine(e.Message);
            return false;
        }
    }

    public bool Unsubscribe()
    {
        try
        {
            ImessageCallback callback = OperationContext.Current.GetCallbackChannel<ImessageCallback>();
            if (subscribers.Contains(callback))
                subscribers.Remove(callback);
            Console.WriteLine("Client is unconected ({0}).", callback.GetHashCode());
            return true;
        }
        catch
        {
            return false;
        }
    }

    public void funkcja()
    {
        int a = 1; int b = 3;
        subscribers.ForEach(delegate(ImessageCallback callback)
        {
            if (((ICommunicationObject)callback).State == CommunicationState.Opened)
            {
            Console.WriteLine("a= {0} , b= {1}", a, b);
            callback.klient_licz(a, b);
            a++;
            b++;
            }
        });

    }

    public void polacz(int S)
    {

        Console.WriteLine("Sum: {0}", S);
    }
  }
} 
```

界面：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;

namespace Interface
{
     [ServiceContract(CallbackContract = typeof(ImessageCallback), SessionMode = SessionMode.Required)]
public interface IMessage
{
    [OperationContract]
    void funkcja();

    [OperationContract]
    void polacz(int S);

    [OperationContract]
    bool Subscribe();

    [OperationContract]
    bool Unsubscribe();

}
[ServiceContract]
public interface ImessageCallback
{
    [OperationContract]
    void klient_licz(int a, int b);
} 
```

}

客户：

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using Interface;

namespace Client
{
    class Program
    {
        static void Main(string[] args)
        {
            clients cl = new clients();
            if (cl.Conect() == true)
            {
                string tmp = Console.ReadLine();
                while (tmp != "EXIT")
                {
                    cl.SendMessage(tmp);
                    tmp = Console.ReadLine();
                }

            }
             cl.Close();
             Environment.Exit(0);
       }
   }
} 
```

.

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;
using Interface;

namespace Client
{
    class clients : ImessageCallback, IDisposable
    {
        IMessage pipeProxy = null;
        public bool Conect()
        {
            DuplexChannelFactory<IMessage> pipeFactory =
                new DuplexChannelFactory<IMessage>(
                    new InstanceContext(this),
                    new NetTcpBinding(),
                    new EndpointAddress("net.tcp://localhost:8000/ISubscribe"));
            try
            {
                pipeProxy = pipeFactory.CreateChannel();
                pipeProxy.Subscribe();
               return true;
            }
            catch (Exception e)
            {
                Console.WriteLine(e.Message);
                return false;
            }

        }

        public void Close()
        {
            pipeProxy.Unsubscribe();
        }

        public void klient_licz(int a, int b)
        {
            int S = a + b;
            Console.WriteLine("Sum= {0}", S);
            pipeProxy.polacz(S); //ERROR
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T10:42:01.777

这里的问题是，在您的回调方法 kclient_licz（由服务器调用）中，您正在进行另一个服务器调用。您的合同当前设置的方式不允许这样做。

1.  检查你真的需要这种行为。您是否真的需要在回调接口（kclient_licz）上的方法内调用服务器。

2.  如果您确实需要这种行为，那么您可以通过在回调接口上标记 kclient_licz 调用 OneWay 来解决问题。这意味着在客户端返回之前，服务器对回调的调用不会阻塞（这是当前导致您的问题的原因，因为服务器正在等待客户端调用返回，但客户端调用正在等待对服务器的调用）：

    ```
    [ServiceContract]  
    public interface ImessageCallback {  
            [OperationContract(IsOneWay = true)]  
            void klient_licz(int a, int b);  
    } 
    ```

3.  或者，您可以使用默认模式 Single 以外的并发模式标记回调实现。例如 Reentrant 如下 - 但请记住，这意味着对回调的调用不会长期编组到 UI thead 即将在线程池线程上，因此您必须调度以从回调接口上的方法更新 UI：

    ```
    [CallbackBehavior(ConcurrencyMode = ConcurrencyMode.Reentrant)]  
    class clients : ImessageCallback, IDisposable {  
     ...
    } 
    ```

如果您想了解 ConcurrencyMode 以及它如何影响执行，那么您确实需要做一些背景阅读，因为它确实有点复杂 - 但如果您没有这些背景，则很难真正理解更改 ConcurrencyMode 时会发生什么. 这篇[dasBlonde 博客文章](http://www.dasblonde.net/2007/08/16/CallbacksConcurrencyModeAndWindowsClients.aspx)很好地**总结**了不同的模式和行为 - 但您可能希望从一些更面向初学者的教程开始。

# regex - 正则表达式删除十进制值

> ID：10254984
> 
> 赞同：0
> 
> 时间：2012-04-21T00:02:39.767
> 
> 标签：regex

给定以下 ISO 8601 格式的时间戳：

```
2012-04-21T01:56:00.581550 
```

什么正则表达式会删除小数点和毫秒精度？换句话说，适用于上述内容并返回以下内容的正则表达式：

```
2012-04-21T01:56:00 
```

这可能非常简单，但对正则表达式并不特别熟悉，我不确定如何解决该问题。提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-21T00:05:32.307

如果您必须使用正则表达式，您可以使用`"[.][0-9]+$"`并用空字符串替换它`""`。更容易找到尾随`'.'`，并在其索引处截断字符串。在 C# 中，这将是

```
myStr = myStr.Substring(0, myStr.LastIndexOf('.')-1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T00:23:20.067

为什么要使用正则表达式？使用字符串操作

在蟒蛇中：

```
>>> "2012-04-21T01:56:00.581550".split(".")
['2012-04-21T01:56:00', '581550']
>>> "2012-04-21T01:56:00.581550".split(".")[0]
'2012-04-21T01:56:00' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-21T00:16:48.303

此正则表达式`^[\w\-:]+`将仅匹配句点并将其排除在外。您可以使用它来*查找*所需的时间戳部分。

*   `^`是字符串的开头。
*   `\w`是任何“词”。
*   `\-`包括连字符。
*   `:`包括冒号。
*   这些放置在`[]`意味着只匹配这些字符。
*   表示匹配这些字符的`+`一个或多个实例。

由于`.`不包括句点 ( )，因此正则表达式将停止匹配。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-21T00:05:55.017

```
s/\..*$// 
```

看起来你可以假设只有一个点。上面的 sed 表达式找到一个点，然后替换该点之后的所有内容，直到换行符一无所有。

没有 sed：`\..*$`用空字符串替换`""`

`\.`是文字句点（必须转义它，因为`.`意味着任何字符）

`.*`表示任何和所有字符

`$`表示行尾

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-21T00:49:11.837

***代码：***

```
$_ = '2012-04-21T01:56:00.581550';
s/\.\d*//;
print $_, "\n"; 
```

***测试：***

[http://ideone.com/52hij](http://ideone.com/52hij)

***输出：***

```
2012-04-21T01:56:00 
```

# c# - wpf 创建图像按钮

> ID：10254992
> 
> 赞同：1
> 
> 时间：2012-04-21T00:03:30.180
> 
> 标签：c#, wpf, controltemplate

我的控件模板和样式：

```
 <ControlTemplate TargetType="{x:Type Button}" x:Key="ImageButtonTemplate">
        <Image Source="..//..//images//ok.png" 
                           Width="{TemplateBinding Width}" 
                           Height="{TemplateBinding Height}"/>

  </ControlTemplate>

  <Style TargetType="{x:Type Button}" x:Key="ImageButton">
        <Setter Property="Template" Value="{StaticResource ImageButtonTemplate}"/>                        
  </Style>

  <Button Style="{StaticResource ImageButton}" /> 
```

该按钮不可见......我错过了什么？

编辑 ：

尝试用高度和宽度定义面板，按钮图像仍然不可见..帮助不大。

```
 <ControlTemplate TargetType="{x:Type Button}" x:Key="ImageButtonTemplate">
        <Grid>
            <Image Source="..//images//ok.png"  Width="{TemplateBinding Width}"  Height="{TemplateBinding Height}" />              
        </Grid>
    </ControlTemplate> 
```

我不应该在里面放一个吗？
我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:58:38.297

您没有设置宽度和高度。根据容器的类型，您需要它才能可见（例如，如果使用 stackpanel）。

在这里，您有另一个相关的问题来解释它。

[WPF 三态图像按钮](https://stackoverflow.com/questions/2491941/wpf-tristate-image-button/3676177#3676177)

编辑：

我创建了一个新项目，并在开始窗口中写道：

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    x:Class="WpfApplication.MainWindow"
    x:Name="Window"
    Title="MainWindow"
    Width="640" Height="480">
    <Window.Resources>
    <ControlTemplate TargetType="{x:Type Button}" x:Key="ImageButtonTemplate">
        <Grid>
            <Image Source="MB_0024_YT2.png"  Width="{TemplateBinding Width}"  Height="{TemplateBinding Height}"  />              
        </Grid>
    </ControlTemplate>
  <Style TargetType="{x:Type Button}" x:Key="ImageButton">
        <Setter Property="Template" Value="{StaticResource ImageButtonTemplate}"/>                        
  </Style>
    </Window.Resources>
    <Grid x:Name="LayoutRoot">
     <Button Style="{StaticResource ImageButton}" Width="120" Height="120" Click="Button_Click" />
     </Grid>
</Window> 
```

现在它正在工作。按钮它是可见的，并且在事件处理程序中也可以工作。

事件处理程序：

```
 private void Button_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        MessageBox.Show("Hello");
    } 
```

# css - css 蓝图，创建一个浮动在容器 div 旁边的 div ？附图片

> ID：10254994
> 
> 赞同：1
> 
> 时间：2012-04-21T00:03:54.913
> 
> 标签：css, html, compass-sass, mockups, blueprint

我试图有一个 950px 的蓝图布局，所以我做了如下图所示的操作：

![在此处输入图像描述](../Images/275a03ff97df5b5a3d5da8116a8ce47f.png)

像普通的 950px 容器（右框）是浮动的中心页面现在我需要一个 #menu div 向左浮动到这个 950px 框，它应该定位在这个 #container 950px div 的左边并具有固定的宽度。

这样的事情怎么可能完成？我已经尝试了几个 css 技巧但无济于事，我知道有液体布局，但是 #menu 和 #container 之间的空间会变得很大我希望该空间像下面的示例一样固定，例如蓝图默认值为 20px。

**任何人都知道如何做到这一点并且即使屏幕调整大小也让 div 留在页面上？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:10:14.733

如果我理解您的问题，这将满足您的要求：

```
 body, html 
 {
    width: 100%;
 }

 <div style="margin: 0 auto; width: 1100px">
    <div style="width: 150px; float:left;">
       menu
    </div>
    <div style="width: 950px; float:left;">
       right part
    </div>
 </div> 
```

# java - Junit + UrlDecoder：为什么这个测试失败了？

> ID：10254999
> 
> 赞同：0
> 
> 时间：2012-04-21T00:05:15.217
> 
> 标签：java, junit, urldecode

我的一项测试中有以下代码。第二个断言失败。

```
String decode1 = URLDecoder.decode("a%20b", "UTF-8");

assertTrue("a b".equals(decode1)); // pass
assertEquals("a‌ b", decode1); // FAIL 
```

我不知道为什么。这是 JUnit 的错误吗？如果第一个参数不为空，您会认为 JUnit 只会调用 .equals() ......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T00:19:09.457

当我将您的代码粘贴到新测试中时，如您所说，它失败了。但是，在删除最后的“a b”字符​​串并重新输入后，它通过了。您必须在其中包含一些我在查看此页面的源代码时看不到的嵌入字符。

失败的断言通过说期望值为

```
"a[ ]b" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-21T00:17:33.263

它确实调用了equals()。查看[来自 kickjava 的源代码](http://kickjava.com/src/junit/framework/Assert.java.htm#ixzz1sd5070Kv)，我们有以下内容。（您没有说您使用的是 JUnit 3.8 还是 4.0，但我很确定他们没有更改这种基本功能的实现。

```
public static void assertEquals(String   msg, Object   obj1, Object   obj2) {

        if (obj1 == null && obj2 == null) {
          return;
        }

        if (obj1 != null && obj1.equals(obj2)) {
          return;
        }

        fail(msg + " expected=" + obj1 + " actual=" + obj2);
} 
```

您是否 100% 确定杂散编码字符没有潜入您的测试。也许试试这个来排除它？

```
String expected = "a b";
assertTrue(expected.equals(decode1)); 
assertEquals(expected, decode1); 
```