# StackOverflow 问答 10274000-10274999

# oop - 构造函数和初始化函数完全一样吗？

> ID：10274000
> 
> 赞同：0
> 
> 时间：2012-04-23T02:08:21.923
> 
> 标签：oop, constructor, initializer

在 C++ 或 Objective-C 中，术语“构造器”是否与“初始化器”完全相同？

原因是，每当我看到“构造函数”这个词时，总感觉有些模糊，因为也感觉构造函数负责在内存空间中设置对象，而实际上构造函数只是“初始化”。所以“构造器”这个词可能会让人感到困惑，因为它感觉像是 alloc 和 init 的组合，而初始化器这个词非常清楚，它只是设置值。

上述说法普遍正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:19:30.400

构造函数需要一些原始存储，并在那里构造一个对象。

初始化器是用于初始化某些变量的值。

虽然您可能有一个观点，即所谓的构造函数*可以*被称为初始化器，但我怀疑它是否真的被考虑用于 C++ 或 Objective-C。在 C++ 或 Objective C 出现之前，“Initializer”已经在 C 中具有目前公认的含义。由于术语在 C 中已经广为人知，我无法想象有人试图重新定义它以在基于 C 的语言中表示完全不同的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:11:49.837

不，它们不一样。

*初始化器*是 C++ 语法的一部分，而不是函数。例如：

```
std::string s = "abcd"; 
```

初始化程序是`= "abcd"`.

当变量定义中存在初始化程序时，它提供将传递给构造函数的参数。

您可以在标准的第 8.5 节中阅读有关此内容的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T02:12:12.763

构造函数保证在分配时运行，并用于将对象初始化为某种定义的状态。在 C++ 中，我们称之为[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)。正如您所说，初始化程序只是“设置值”或“初始化对象”，并且不需要在分配时运行。

# android - 在android中用当前日期时间更新sqlite列

> ID：10274009
> 
> 赞同：1
> 
> 时间：2012-04-23T02:10:18.847
> 
> 标签：android, sqlite, datetime

我的 android 应用程序中有一个 SQLite 表，其中有一个“MODIFIED”列。它基本上存储当前行首次插入或更新的时间（日期和时间）。

如果我`update()`在 android 中使用 SQLite DB 的功能，我无法弄清楚如何在`ContentValues`参数中放置日期时间值。

如果我使用`execSql()`方法，我可以使用`DATETIME()`sql 函数将当前时间设置为“修改”列。但是这个函数没有返回值。不知道更新成功与否。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:15:01.533

您只需要执行以下操作：

```
ContentValues values = new ContentValues();
values.put("modified", currentTime);
db.update("table", values, "_id = XXX", null); 
```

替换`_id = XXX`为您要用于更新行的条件。Update 方法返回更新的行数。

此外，您可以为该列使用整数而不是 DATETIME （因为它们实际上在 sqlite [http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)中不存在）类型并传递`System.currentTimeMillis()`为`currentTime`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T02:55:45.363

另一种方法是创建一个'TRIGGER'，它会在每次'UPDATE'时使用SQLite 自动更新MODIFIED，[请在此处阅读。](https://stackoverflow.com/questions/6578439/on-update-current-timestamp-with-sqlite)

# python-3.x - 如何根据 Python 3 中变量的值导入模块？

> ID：10274013
> 
> 赞同：1
> 
> 时间：2012-04-23T02:10:35.140
> 
> 标签：python-3.x

我正在寻找一种为我要编写的 Python 3 程序编写插件系统的方法。该程序在初始化所有其他内容后，将使用用户提供的列表导入选定的插件（带有代码和/或函数的 Python 脚本）。然后插件将对程序进行所需的更改。该系统的一个*非常*简单的实现如下所示：

```
for name in addons:
    import name 
```

现在，当然，这个例子不起作用，因为 Python 解释器会尝试导入一个名为“name”的模块。我的问题是，如何使用变量来导入模块？或者，如果我不能这样做，实现插件系统的最佳方式是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:11:05.237

插件系统可以简单到插件将自身或相关对象/方法添加到某个全局列表中。

在另一端有诸如 zope.component 架构之类的东西，您可以在其中将您的应用程序变成组件，其中插件不仅可以将自己添加到列表中，还可以替换应用程序的一部分。zope.component*很酷*。:-)

但是，是的，无论如何您都需要在某个地方导入插件/组件。

在 Python 3 中，我会使用[`importlib.import_module()`](http://docs.python.org/dev/library/importlib.html). `importlib`也可用于 Python 2，并且包含在 Python 2.7 中，但如果您不想要更多依赖项，您可以考虑使用[`__import__()`](http://docs.python.org/library/functions.html#__import__)所有版本的 Python 中都存在的依赖项。

`import_module()`比`__import__()`, as 更容易使用，我在使用之前总是需要考虑它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:33:36.020

我建议`__import__()`在 Lennarts 的回答中使用 as Mentionend。这是一个例子：

```
csv = __import__('csv') 
```

# android - 为 Android 应用程序设置 Holo 主题

> ID：10274015
> 
> 赞同：12
> 
> 时间：2012-04-23T02:10:43.403
> 
> 标签：android, android-theme

我有一个带有用户名和密码的简单登录屏幕。

我希望它以`EditText`与冰淇淋三明治和蜂窝的 Holo 主题中所见相同的方式显示字段。

在我的清单文件中，我有

```
<application
   android:icon="@drawable/ic_launcher"
   android:label="@string/app_name" 
   android:theme="@android:style/Theme.Holo"> 
```

现在文本字段不应该看起来不同吗，例如没有顶部、左侧和右侧边框？

我的看起来完全一样。我确定我做的事情基本上是错误的，但欢迎提出任何建议。

这是我在模拟器中看到的： ![屏幕截图 2012-04-23 03.08.16](../Images/093acbc80318cc3b4b3ed6b2e450990b.png)

我期待更多这样的：http: [//developer.android.com/design/building-blocks/text-fields.html](http://developer.android.com/design/building-blocks/text-fields.html)

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-30T16:27:28.140

原始的 Android Holo 主题仅适用于 API 级别 11+。但是有一个名为 HoloEverywhere 的开源项目。

看看[这个](https://github.com/Prototik/HoloEverywhere)。这应该可以解决您的问题。

因此，如果您将其称为库，则可以像这样设置主题：

```
android:theme=“@style/Theme.Holo
// or if you want to use the Holo light theme:
android:theme=“@style/Theme.Holo.Light 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-30T16:37:13.030

尝试在每个活动的基础上进行。这就是我一直这样做的方式。在我看来，您的屏幕截图中的主题根本没有生效。Theme.Holo 是黑暗的。白色主题是 Theme.Holo.Light。

```
<activity
        android:name=".login"
        android:label="@string/login"
        android:noHistory="true"
        android:theme="@android:style/Theme.Holo.Light"/>

<activity
        android:name=".Preferences"
        android:theme="@android:style/Theme.Holo.Light" > 
```

等而不是在应用程序级别

此外，为了纠正 Ahmad，Holo 可从 Honeycomb 及更高版本或 11+ 获得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-20T15:44:50.270

实际上，Holo 从 API 11 开始可用；它只是`Theme.Holo.Light.DarkActionBar`在 API 级别 14 中出现。不需要 15+。

正如 Ahmad 所提到的，对于较旧的 API 级别，`HoloEverywhere`、等是必需的。`ActionBarSherlock``ViewPageIndicator`

# forms - 带有 INPUT 行高的 Firefox 错误？有什么解决办法吗？

> ID：10274016
> 
> 赞同：0
> 
> 时间：2012-04-23T02:10:50.580
> 
> 标签：forms, firefox, css

我注意到我的输入按钮在 Firefox 中看起来不正确，我不知道如何使值（文本）出现在正确的位置。

```
.rb {
    width: 142px;
    height:142px;
    float:left;
    background:#2F2F2F;
    color:#FFF;
    font-size:95%;
    line-height:210px;
    margin-top:15px;
    border:0;
    outline:none;
    padding:0;
    text-align:center
}

.rbSubmit {
    background: url('http://www.41q.org/admin/img/sprite_icon.png') -568px -200px no-repeat;
    color:#808080
} 
```

```
<input id="rbSubmit" class="rb rbSubmit" type="submit" value="submit"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T02:18:29.660

Firefox 添加了一些额外的填充。你可以像这样修复它：

```
.rb::-moz-focus-inner {
    border: 0;
    padding: 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-26T10:23:14.573

我也遇到了 FireFox 的错误。`input`它忽略类型“提交”、“重置”和“按钮”的行高设置。

填充的解决方法对我不起作用，因为我需要它来进行 twitter 引导。Twitter 引导程序使用填充来调整按钮大小。

所以我找到了这个解决方法：

```
//FireFox workaround, FF ignores line-height for input elements.
input[type="button"],
input[type="reset"],
input[type="submit"] {
    -webkit-box-sizing: content-box;
    -moz-box-sizing: content-box;
    box-sizing: content-box;
    line-height: 19px;
    height: 19px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T10:37:49.270

我最近遇到了同样的问题，在网上找到了一个关于行高的很好的解释（不仅在 Firefox 中，也在 Opera 浏览器中）

[http://www.cssnewbie.com/input-button-line-height-bug/](http://www.cssnewbie.com/input-button-line-height-bug/)

> 我最近在 Firefox 和 Opera 中尝试设置按钮内文本的行高时遇到了一个错误（这会影响输入“提交”按钮以及 HTML 按钮标签）。错误？不能改变行高！

底线建议是改用填充。

我还发现**minitech**的回答非常有帮助，所以我想你的问题有两个问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T02:20:54.857

[http://jsfiddle.net/qzYVP/1/](http://jsfiddle.net/qzYVP/1/)

这依赖于使用高度 + 填充 + 行高等于字体大小的显式大小。适用于 IE8/9、FF、Chrome。

```
.rb {
    width: 142px;

    /* tweak these to get the exact font size/position desired */
    height: 14px;
    font-size: 14px;
    line-height: 14px;
    padding: 90px 0 38px 0;

    float:left;
    background:#2F2F2F;
    color:#FFF;
    margin-top:15px;
    border:0;
    outline:none;
} 
```

相对字体大小的示例：http: [//jsfiddle.net/qzYVP/2/](http://jsfiddle.net/qzYVP/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-11T16:26:26.740

min-height 属性也可以工作，如果你在 flexbox 元素中使用输入，这可能很有用，在哪里能够拉伸你不能有一个声明的高度。

# javascript - 固定标题 Div 的 CSS 问题

> ID：10274020
> 
> 赞同：1
> 
> 时间：2012-04-23T02:11:32.940
> 
> 标签：javascript, jquery, html, css

我的页面上有一个标题 div，当页面向下滚动到标题区域时，它被固定在顶部（通过位置：'fixed' 和顶部：0），但问题是内容 div在位置属性更改后，它下面最终会向上移动，填充标题 div 曾经占用的空间。有谁知道如何修复它，以便一旦位置更改为固定，标题下方的内容就不会向上滑动？

提前致谢！！下面是我正在使用的代码，它使用 JQuery 来固定标题：

```
    <html>

    <头部>

    <script type="text/javascript" src="jquery-1.4.2.min.js"></script>

    <style type="text/css">

        .para {

           背景颜色：黄色；

        }

        .固定{
            背景颜色：#0000FF；
        }

        #pinHeader.fixed {
          位置：固定；
          顶部：0；
          宽度：100%；
        }

    </style>

    </head>

    <正文>

    <div>

                         <div>
                              <h1>导航到这里</h1>

                         </div>

                            <div>

                                        <div id="pinHeader" class="pinned">

                                                <h1> 主标题</h1>
                                                <h2>子标题放在这里</h2>
                                                <hr />

                                        </div>

                            </div>

                                    <!-- 主要内容在这里 -->

            <div id="mainContent">

                                                  <h2>内容 1</h2>
                                                  <p class="para">废话废话废话废话废话废话废话废话<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                  </p>

                                                  <h2>内容 2</h2>
                                                  <p class="para">废话废话废话废话废话废话废话废话<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                  </p>

                                                  <h2>内容 3</h2>
                                                  <p class="para">废话废话废话废话废话废话废话废话<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                  </p>

                                                  <h2>内容 4</h2>
                                                  <p class="para">废话废话废话废话废话废话废话废话<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                     呜呜呜呜呜呜呜呜呜呜呜<br />
                                                  </p>                                   

            </div>

    </div>

    <script type="text/javascript">
    var div 顶部 = 空；
    jQuery(文档).ready(函数(){

        jQuery（窗口）.scroll（函数（）{
            固定面板（）；

        });

        jQuery(窗口).resize(函数() {

            固定面板（）；

        });

        divTop = jQuery('#pinHeader').offset().top;
    });

    var pinned = false;

    函数 pinnedPanel() {

    var stickHeader = jQuery('#pinHeader');

    var contentDiv = jQuery('#mainContent');

      // 滚动条的 y 位置是多少
      var y = jQuery(window).scrollTop();

      如果（y >= divTop）{
            stickHeader.addClass('fixed');
            固定=真；

      } 否则如果（固定）{
            stickHeader.removeClass('fixed');
            固定=假；

      }

    }

    </脚本>

    </正文>

    </html>

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:18:13.917

将stickHeader 的高度添加到contentDiv 的margin-top，并在取消固定时将其恢复为之前的任何值（此处假设为零）。

```
if (y >= divTop) {
    stickHeader.addClass('fixed');
    contentDiv.css('margin-top', stickHeader.height())
    pinned = true;

} else if (pinned) {
    stickHeader.removeClass('fixed');
    contentDiv.css('margin-top', 0)
    pinned = false;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:19:43.163

尝试对标题 div 使用 margin-top ...[试试看..](http://jsfiddle.net/lakshmipriya/R25ZC/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T05:09:37.430

将导航栏固定在顶部或底部会导致您避免分层。SO：如果您计算出条形占用的空间量，特别是高度..并且您可以从边距顶部添加或减去该差异。

如果您希望内容不向上顶到标题：

```
margin-top: -some px; 
```

如果您希望内容向下移动页面：

```
margin-top: some px; 
```

# java - 错误锁定模式的 Android 侦听器

> ID：10274021
> 
> 赞同：0
> 
> 时间：2012-04-23T02:11:42.073
> 
> 标签：java, android, android-layout, android-intent, android-emulator

每次用户在其 android 设备上插入错误的锁定模式时，我都试图找到一种接收消息的方法。老实说，我不知道如何实现这一点，但我猜我应该在后台注册某种服务作为监听器。但是我应该在哪个广播公司注册我的听众？

我很抱歉没有合适的术语，可能我的文字没有多大意义......但基本上我需要构建一个小类，每次插入错误的锁定模式时执行一个动作。

我不是要完整的代码，我只需要一个小例子，tks。

**更新：** 当时看来我需要的东西是不可能的，所以，我需要想办法在每次屏幕亮起时接收消息？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:37:56.897

显然，Android 不支持此功能（如果 CommonsWare 表示[**不支持**](https://stackoverflow.com/q/7782685/844882)...那么您很可能不走运）。对不起！

或者，您可以实现自己的屏幕锁定应用程序，该应用程序可以为您记录此类信息。显然这并不理想，但可能需要考虑一下。

* * *

编辑：

你不能这样做的原因是屏幕锁定应用程序运行在它自己的沙盒环境中。“沙盒”是一组细粒度的控件，可限制对文件、首选项、网络资源等的访问。因此，您需要的信息无法访问。

# azure - Windows Azure 上的 CouchBase。

> ID：10274027
> 
> 赞同：3
> 
> 时间：2012-04-23T02:12:27.797
> 
> 标签：azure, couchbase

在 Couchbase 网站 (http://www.couchbase.com/partners) 上，我们有以下文本：

“Microsoft 很高兴 Couchbase 参与 Windows Azure 技术采用计划。使用 Couchbase Server，它可以配置为像 memcached 或 Couchbase 数据存储一样，我们的客户将能够创建高度弹性的数据基础架构，自然适合云中的扩展。Couchbase Server 和 Windows Azure 将进一步使我们的客户能够专注于解决业务问题并在网络规模上满足他们的需求。

——罗伯特·达夫纳，产品管理总监”

但是，除此之外，我找不到任何关于是否可以在 Windows Azure 上运行 CouchBase 的信息。有没有人有这方面的任何细节？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T15:00:22.000

随着 Azure VM 角色的预览版，这现在[相对简单](http://blogs.msdn.com/b/jimoneil/archive/2012/06/16/couchbase-on-azure-a-tour-of-new-windows-azure-features.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-29T23:14:20.623

现在有更多关于使用 Couchbase 部署 Windows Azure 的信息。试试这些帖子：

*   一步一步：在 Windows Azure 虚拟机上使用 Couchbase 进行生产部署：http: [//blog.couchbase.com/step-step-production-deployment-couchbase-windows-azure-virtual-machines](http://blog.couchbase.com/step-step-production-deployment-couchbase-windows-azure-virtual-machines)
*   Azure 上的 Couchbase 变得更容易：从 VM Image Depot 在 Azure 上部署 Couchbase 服务器：http: [//blog.couchbase.com/couchbase-azure-made-easier-deploy-couchbase-server-azure-vm-image-depot](http://blog.couchbase.com/couchbase-azure-made-easier-deploy-couchbase-server-azure-vm-image-depot)
*   在 Azure 上的 Ubuntu 上获取 Couchbase 服务器的几个方便的技巧：http: [//blog.couchbase.com/few-handy-tricks-getting-couchbase-server-ubuntu-azure-right](http://blog.couchbase.com/few-handy-tricks-getting-couchbase-server-ubuntu-azure-right)

谢谢

-cihan biyikoglu

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T01:43:06.993

我没有任何真正的解决方案可以获取和尝试。只是为了检查我是否可以在 Windows Azure WebRole 上安装和运行 Couchbase，我可以做到。在 Web 角色中，我可以使用 Startup 任务直接下载和安装 CouchBase，但是使用脚本来配置它几乎没有困难。我在批处理文件中使用以下步骤正确配置服务器：

1.  运行 C:\Couchbase\Server\bin\service_stop.bat
2.  运行 C:\Couchbase\Server\bin\service_unregister.bat
3.  编辑/更新 C:\Couchbase\Server\bin\service_register.bat 以添加 Azure VM 内部 IP 地址而不使用 LocaHost
4.  运行 C:\Couchbase\Server\bin\service_register.bat
5.  运行 C:\Program Files\Couchbase\Server\bin\service_start.bat

因此，对于 couchbase 服务器的单节点集群，我可以这样做，但是它确实需要为服务器和客户端检查和验证它​​如何与多个实例等一起工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T03:50:08.810

我知道这个有点旧，但是对于遇到这个问题的任何人，我可以肯定地说是的，你可以在 Windows Azure 上运行 CouchBase。

正如@el_tone 所暗示的那样，您可以非常快速地启动一个 VM 实例（例如 Ubuntu 12.04 x64），下载 CouchBase（以及可选的 Sync Gateway），通过一行命令（sudo dpkg -i [filename]）安装它们，然后设置您的端点相应地（为 CB 服务器公开端口 8091，为同步网关公开端口 4984）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-23T04:11:33.563

I think it would be better to email Couchbase directly and asked them about it?

Steve Marx might have done something in this space: [http://blog.smarx.com/posts/memcached-in-windows-azure](http://blog.smarx.com/posts/memcached-in-windows-azure)

# deployment - 折叠/合并提交到一个变更集中

> ID：10274028
> 
> 赞同：1
> 
> 时间：2012-04-23T02:12:58.487
> 
> 标签：deployment, mercurial, fabric, bitbucket

目前我保持本地和开发服务器环境同步的方式是使用 fabfile。

```
def upload():
 """ upload project dir to the production server. """
extra_opts = '--omit-dir-times'
rsync_project(
    remote_dir=env.remote_dir,
    local_dir=env.local_dir,
    exclude=RSYNC_EXCLUDE,
    delete=True,
    extra_opts=extra_opts,
)
reload_apache() 
```

当我想从回购中提取时，我使用它

```
def update_source():
    """ Update the project source. """
    with cd(env.directory):
        run('hg fetchanddestroy') 
```

该别名 cmd 执行此操作的位置

```
fetchanddestroy = !hg pull && hg update -C 
```

如何在 bitbucket 上将一系列变更集合并为一个？我尝试过使用 machg，但它只是拉回了我合并的所有内容。我正在尝试用一种合适的方式在我的 VPS 上部署我的项目，并使它们与我的本地存储库保持同步。在设置环境的过程中，我不得不对 repo 进行细微的调整，这导致在服务器上进行了许多变更集并拉取。因此，我想将所有这些小的变更集合并为一个，以保持我的回购历史干净。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:15:02.583

Not sure I completely understand what you are asking but using a branch workflow similar to [Git Flow](http://nvie.com/posts/a-successful-git-branching-model/) is a good way to manage the flow of changes between development and release.

In "short",

*   keep all releases in a branch called master
*   do all your development in default as you normally would
*   at release time create a branch off of master for the release

    $ hg update master && hg branch relv1.0

*   merge in what you want from default, for this example assume the latest is what you want.

    $ hg merge default && hg commit -m "merge latest from default"

*   if necessary make changes in this branch to make tests pass if applicable and in general get it ready for release whatever that means for your project.

    $ hg commit -m "last minute bug fix...etc"

*   When you are confident that the release is ready, tag it, close the branch and merge it into master.

    $ hg tag "release 1.0" && hg update master && hg merge "release 1.0" && hg commit -m "merge release 1.0"

    $ hg update "release 1.0" && hg commit --close-branch -m "all done"

*   and finally get default back in sync with master.

    $ hg update default && hg merge master # there's a possibility of merge conflicts here, if you have multiple people doing development

    $ hg commit -m "merge release 1.0 from master"

*   for deployment, you could just pull latest from master

The overall effect here is that the diff going into master should always represent the combined changes from the default branch since the last release which I think is what you want instead of all the individual changesets that led up to that release.

Obviously there's probably 1000 ways to do it, but I think it's a safe bet that a branching strategy like Git-Flow is ubiquitous enough that your team can understand it and thus follow it.

Another option is using patch queues, that way you have complete control of what goes into a changeset at any given point.

# jquery - jQuery Datepicker如何将ID动态添加到输入字段

> ID：10274029
> 
> 赞同：0
> 
> 时间：2012-04-23T02:13:05.717
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我有一个包含多个使用 datepicker 的输入字段的表单。我刚刚为它们创建了 ID，这工作正常，但现在我需要在同一页面上显示多个表单的实例中使用它。

有没有办法创建一个 jQuery 函数，该函数将动态添加一个 ID 到任何具有“datepicker”类的元素，并使 datepicker 在这些元素上工作？

就像是：

```
$('.datepicker').append('ID','datepicker + (1)');
$("#datepicker + (1)").datepicker(); 
```

我知道这实际上不起作用，但我认为这是最简单的解释方式，+(1) 是 ID 的后缀。

我当前的静态元素代码是这样工作的。

```
$("#datepicker").datepicker();
$("#datepicker01").datepicker();
$("#datepicker02").datepicker();
$("#datepicker03").datepicker();
$("#datepicker04").datepicker();
$("#datepicker05").datepicker();
$("#datepicker06").datepicker(); 
```

谢谢你的帮助，干杯:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:04:52.937

你根本不需要这些 ID，你可以用这个一次性绑定它们：

```
$('.datepicker').datepicker(); 
```

演示：http: [//jsfiddle.net/ambiguous/ua4bc/](http://jsfiddle.net/ambiguous/ua4bc/)

大多数插件可以一次绑定到多个元素，这就是为什么几乎所有插件看起来像：

```
return this.each(function() { ... }); 
```

里面。

如果您出于其他目的需要这些 ID，那么您可以这样做：

```
$('.datepicker').each(function(i) {
    this.id = 'datepicker' + i;
}).datepicker(); 
```

演示（使用您的 DOM 检查器查看 ID）：http: [//jsfiddle.net/ambiguous/6zfEY/](http://jsfiddle.net/ambiguous/6zfEY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T02:25:57.147

```
$(function(){
    $('.datepicker').each(function(i){
        $(this).attr('id', $(this).attr('class')+parseInt(i+1));
    });

    // You can call like
    $("#datepicker1").datepicker();
    $("#datepicker2").datepicker();
    $("#datepicker3").datepicker();
}); 
```

但我认为你不需要添加`id`，无论如何。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T18:06:16.447

您好，我使用 Spring MVC 3.0 尝试了此绑定，并且...它有效，很好！我有剧本

```
<script type="text/javascript">
  $(function(){
  $(".datepicker").datepicker({ dateFormat:"dd/mm/yy" });
  });
</script> 
```

然后，在我的情况下，使用 JSP 和 JSTL 我能够将 JQueryPicker 绑定到动态创建的元素，这是一段代码，如果你看到它是因为我正在做更多的事情，但是这个想法是一样的：

```
<c:when test="${fieldVar.type == 'DATE'}">
  <td><form:input path="fieldWrapperElements[${status.index}].dateValue"class="datepicker"/></td>
</c:when> 
```

# python - Python：字典？

> ID：10274033
> 
> 赞同：0
> 
> 时间：2012-04-23T02:14:22.830
> 
> 标签：python

```
def count_chars(s):
    '''Return a dict that contains each character in str s as a key. The
    value associated with each key is the number of times that character
    occurs in s.'''

    d = {}
    for ch in s:
       if ch in d:
          d[ch] += 1
       else:
          d[ch] = 1
    return d 
```

我没有得到代码中的第三行“if ch in d”。如果字典中还没有任何条目，为什么该字符会出现在字典中？

另外，我不明白 d[ch] += 1 应该是什么意思，以及为什么会有 else 语句。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:29:17.493

理解这样的代码最简单的方法是添加`print`s 以查看它实际在做什么。所以，

```
def count_chars(s):
    '''Return a dict that contains each character in str s as a key. The
    value associated with each key is the number of times that character
    occurs in s.'''

    d = {}
    for ch in s:
       if ch in d:
          print('{} is in d'.format(ch))
          d[ch] += 1
       else:
          print('{} is NOT in d'.format(ch))
          d[ch] = 1
      print('d is now: {}'.format(d))
    return d

count_chars('abcdaaaa') 
```

告诉你：

```
a is NOT in d
d is now: {'a': 1}
b is NOT in d
d is now: {'a': 1, 'b': 1}
c is NOT in d
d is now: {'a': 1, 'c': 1, 'b': 1}
d is NOT in d
d is now: {'a': 1, 'c': 1, 'b': 1, 'd': 1}
a is in d
d is now: {'a': 2, 'c': 1, 'b': 1, 'd': 1}
a is in d
d is now: {'a': 3, 'c': 1, 'b': 1, 'd': 1}
a is in d
d is now: {'a': 4, 'c': 1, 'b': 1, 'd': 1}
{'a': 4, 'c': 1, 'b': 1, 'd': 1} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T02:19:40.840

与许多其他脚本语言不同，Python 不会自动创建元素。[在文档中](http://docs.python.org/library/stdtypes.html#dict)，您将看到 getdefault() 和 setdefault() 方法，这对于此类情况很有用。您还可以按照[此线程](https://stackoverflow.com/questions/1605750/how-to-modify-the-python-default-dictionary-so-that-it-always-returns-a-defaul)中的说明对 dict 进行子类化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T02:16:32.860

因为每次执行循环时，您要么在字典中添加或更新键。如果密钥已存在，则您正在更新其值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T03:04:08.197

> 我没有得到代码中的第三行“if ch in d”。

它的意思正是它所说的：它检查是否`ch`在`d`.

> 如果字典中还没有任何条目，为什么该字符会出现在字典中？

因为它可能，最终。代码在for循环内，循环的目的是安排代码运行多次。其中一些运行将内容放入字典中。

> 另外，我不明白 d[ch] += 1 应该是什么意思

它意味着语言参考所说的意思。

> 以及为什么会有 else 语句。

因为当条件不成立时我们想做一些事情，当它成立时我们也想做一些事情。

# asp.net - 跨两个连接字符串插入

> ID：10274034
> 
> 赞同：1
> 
> 时间：2012-04-23T02:14:42.077
> 
> 标签：asp.net, sql-server

我知道你可以在 MSSQL 中使用 Query 和链接服务器进行查询，但是在 ASP 应用程序中是否可以说

```
ConectionStringA: \\Server1 Catalog="DB1"
ConectionStringB: \\Server2 Catalog="DB2" 
```

假设两个数据库具有相同的架构来执行

```
INSERT INTO Server1.DB1.dbo.TableA SELECT * FROM Server2.DB2.dbo.TableA 
WHERE Pandas = 'ALilCreepy' 
```

？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:18:51.963

不在单个查询中（除非您可以使用链接服务器）。您需要使用两个单独的连接创建两个单独的查询。

您将运行第一个来获取记录并运行第二个来插入它们。

# c++ - Thread Sanitizer 可以使用吗？

> ID：10274036
> 
> 赞同：4
> 
> 时间：2012-04-23T02:15:15.960
> 
> 标签：c++, race-condition

我想尝试线程消毒剂（ [http://code.google.com/p/data-race-test/wiki/ThreadSanitizer#Using_ThreadSanitizer](http://code.google.com/p/data-race-test/wiki/ThreadSanitizer#Using_ThreadSanitizer)）所以我做了一个简单的程序：

```
#include <thread>
#include <atomic>
#include <vector>
#include <iostream>
#include <algorithm>
#include <mutex>
using namespace std;
int violated=0;
mutex mtx;
void violator()
{
    lock_guard<mutex> lg(mtx);
    violated++;
}
int main()
{
    thread t1(violator);
    t1.join();
    thread t2(violator);
    t2.join();
} 
```

AFAIK 程序是可以的，因为对违反的访问与互斥锁同步（就像评论说即使没有该程序也是无种族的）。但是 tsan 抱怨并给出了一堆警告： [http://www.filedropper.com/output](http://www.filedropper.com/output) 那么我使用该工具是错误的，还是它不是很好？如果重要的话，我正在使用 VS11 Beta。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-31T01:33:05.620

这很正常，ThreadSanitizer 不知道如何正确处理 C++11 线程库，它也无法使用 Interlocked* 或 std::atomic 处理细粒度同步。此外，混合模式会产生误报。您可以构建抑制文件以忽略标准库中的竞争和其他误报。在 linux x64 和 ThreadSanitizer 上使用你的代码，我在 stdlib 中得到了 7 个错误的比赛。添加[抑制文件后](http://wiki.wxwidgets.org/Valgrind_Suppression_File_Howto)我能够忽略这些比赛。然后我删除了你的锁并将你的 t1.join() 移动到第二个线程开始之后（所以有一个真正的比赛。） ThreadSanitizer 正确地检测到了这一点。然后我重新添加了您的互斥锁，不再报告比赛。所以它实际上看起来非常有用。谷歌使用它在他们的 Chrome 浏览器中查找比赛，以及许多其他项目，所以它非常成熟（尽管在我的 ubuntu 12.10 系统上构建它真的很痛苦。）

对于 linux，我的抑制文件如下所示：

```
{
<std::shared_ptr>
ThreadSanitizer:Race
...
fun:std::_Sp_counted_base::_M_release
fun:std::__shared_count::~__shared_count
fun:std::__shared_ptr::~__shared_ptr
}
{
<std::arena_thread_freeres>
ThreadSanitizer:Race
fun:arena_thread_freeres
fun:__libc_thread_freeres
fun:start_thread
} 
```

# html - 分割宽度的最佳方法是什么：100% 父容器分成带小数的部分？

> ID：10274038
> 
> 赞同：0
> 
> 时间：2012-04-23T02:15:47.393
> 
> 标签：html, css, width, percentage

如果您将父容器设置为 width: 100% 并且您的部分中的所有部分都应该相等，但百分比是奇数，例如 16.666667%，您如何确保它正确显示而没有中断？小数位数的限制是多少？

例子：你有

```
<ul>
     <li>One
     <li>Two
     <li>Three
     <li>Four
     <li>Five
     <li>Six
</ul> 
```

并且 ul 的宽度为 100%，所有的 li 都向左浮动。现在将 100 除以 6，得到 16.66666666667%。如果我想要一个右边框：1px 纯黑色；你如何在 CSS 中考虑这些因素？我可以理解这都是数学，但你不能从百分比中减去 1px（据我所知，也许你可以......）

那么你是怎么做这些事情的呢？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:17:03.433

嘿，我想你想要这个，你可以定义你的 ul`display:table`并将你的 ul li 定义`display:table-cell;`为这样

**CSS**

```
div{
width:500px;
    border:solid 1px red;
    margin:0 auto;

}

ul{
width:100%;
    background:green;
    display:table;

}

ul li{
display:table-cell;
    border-right:solid 1px white;
    padding:10px;
}
ul li:last-child{border:none;}
​ 
```

**HTML**

```
<div>
<ul>
    <li>One</li>
     <li>Two</li>
     <li>Three</li>
     <li>Four</li>
     <li>Five</li>
     <li>Six</li>
</ul>
</div>
​ 
```

现场演示[http://jsfiddle.net/rohitazad/gjutz/1/](http://jsfiddle.net/rohitazad/gjutz/1/)

# python - Python - 从 Flask 中的文件上传获取文件对象的文件大小

> ID：10274039
> 
> 赞同：7
> 
> 时间：2012-04-23T02:15:52.297
> 
> 标签：python, file, flask

我浏览了 Flask 文档，包括快速入门指南和文件上传指南，但找不到任何有关获取文件文件大小的信息。据我了解，我只获得了用户驱动器上的文件名称，以及包含上传文件的输入字段的名称。

除了将文件写入磁盘然后使用 os.path.getsize 检查大小之外，有没有办法获取文件对象的大小？

我一直在做：

```
f.seek(0,SEEK_END)
f.tell() 
```

一定有更好的方法吧？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:10:27.970

`<input type="file" name="foo"/>`如果是 HTML 页面中的上传字段，`request.files['foo']`则为您提供一个对象，该对象具有一个名为`content_length`. 这是上传文件的大小（以字节为单位），请参见此处的示例用法：[https ://github.com/dnet/photochecklist/blob/5072331/model.py#L78](https://github.com/dnet/photochecklist/blob/5072331/model.py#L78)

# delphi - 如何在运行时将 TAction 分配给工具栏按钮？

> ID：10274041
> 
> 赞同：0
> 
> 时间：2012-04-23T02:16:08.023
> 
> 标签：delphi, menu, toolbar, taction, tactionmanager

我根据设置文件动态添加工具栏按钮。我想将 TAction 分配给他们。现在我添加了带有动作 OnExecute 处理程序的 OnClick 事件，但是如果禁用了动作，则工具栏按钮不会自动禁用，例如在设计时添加的 TMenuItems。

因此，换句话说，我希望使用 IDE 中的“Action”下拉菜单来分配 TAction 的设计时运行时版本。

这是我到目前为止所做的（代码是 C++，但它的作用很明显）。

```
TToolButton *b;
b = new TToolButton(ToolBar1);
b->Action = Form1->ActionManager1->Actions[0];
b->Parent = ToolBar1; 
```

这会将按钮添加到工具栏，它似乎遵循动作启用/禁用状态，但单击时没有任何反应。如何正确且完整地添加操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:49:24.977

`TToolButton`有一个已发布的`Action`属性。只需将您想要的`TAction`对象分配给该属性。

# sql - 运行缓慢的 SQL 报告

> ID：10274045
> 
> 赞同：0
> 
> 时间：2012-04-23T02:16:47.540
> 
> 标签：sql, sql-server-2008

我让开发人员抱怨他们的报告运行速度非常慢，当我运行 sp_who2 并运行 SQL Profiler 时，它表明某些系统查询导致了很多阻塞。我现在该如何解决这个问题？有人可以给我想法。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:22:39.707

原因：

1.  许多 SQL 作业在您提取数据的 SQL Server 中运行

2.  查询不是优化

解决方案 ：

1.  停止在您不使用的 SQL Server 中运行的 SQL 作业

2.  优化您的 SP 中的查询，使其更快并使用 CTE。

问候

# java - 我的 Jasper 模板不显示任何文字

> ID：10274056
> 
> 赞同：3
> 
> 时间：2012-04-23T02:18:48.490
> 
> 标签：java, eclipse, jasper-reports

我目前不确定为什么如果我运行我的这个示例模板，我看不到任何文本。

```
<?xml version="1.0"?>
<jasperReport
    xmlns="http://jasperreports.sourceforge.net/jasperreports"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://jasperreports.sourceforge.net/
    jasperreports http://jasperreports.
    sourceforge.net/xsd/jasperreport.xsd"
    name="SampleReport" pageWidth="798" pageHeight="1000">
    <title>
        <band height="50">
          <staticText>
            <reportElement x="0" y="0" width="180" height="15"/>
            <textElement/>
            <text>
              <![CDATA[Sample Title]]>
            </text>
          </staticText>
        </band>
      </title>
    <detail>
        <band height="20">
            <staticText>
                <reportElement x="20" y="0" width="200" height="20"/>
                <text>
                    <![CDATA[Sample Text]]>
                </text>
            </staticText>
        </band>
    </detail>
</jasperReport> 
```

我使用 ant 任务来运行这个测试。

```
<target name="viewDesignXML"
    <java classname="net.sf.jasperreports.view.JasperDesignViewer"
        fork="true">
        <arg value="-XML" />
        <arg value="-F${file.name}.jrxml" />
        <classpath refid="classpath" />
    </java>
</target> 
```

这是带有 eclipse 3.6 的 Jasperreport 4.5

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T09:32:21.410

您没有指定数据源，因此您的报告原因为空。

您可以设置**`whenNoDataType`**（*`When No Data`*iReport 中的属性）报告的属性以显示“空”报告。

此属性的可能值为：

*   **No Pages**：生成的文档中将没有页面。查看者在尝试加载此类文档时可能会抛出错误 ( `whenNoDataType="NoPages"`)。
*   **空白页**：生成的文档将包含一个空白页 ( `whenNoDataType="BlankPage"`)。
*   **所有部分，无详细信息：除*****详细信息***部分（带）之外的所有报告部分都将出现在生成的文档中（`whenNoDataType="AllSectionsNoDetail"`）。
*   **无数据部分**：生成的文档将仅包含一个***noData***部分（带）（`whenNoDataType="NoDataSection"`）。

如果使用***noData***部分，您应该将此带添加到报告的模板中（例如，在 iReport 的帮助下）。

* * *

当您使用这样的 Java 代码时：

```
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport,
       map, new JREmptyDataSource()); 
```

这意味着您正在传递空数据源，或者换句话说没有传递数据源。

如果您没有传递数据源和数据库连接，则在报告中显示数据的唯一机会是通过参数传递数据（或在报告模板中初始化参数）

# c# - 如何在 C# 中将图像发布到 Twitter

> ID：10274058
> 
> 赞同：2
> 
> 时间：2012-04-23T02:19:05.687
> 
> 标签：c#, post, twitter, credentials

我想通过 C# 将图像发布到我的 Twitter 帐户。我可以获得访问令牌代码，一切都很好，但我调查了一个 PHP 代码

```
 $tmhOAuth = new tmhOAuth(array(
                    'consumer_key'    => OAUTH_CONSUMER_KEY,
                    'consumer_secret' => OAUTH_CONSUMER_SECRET,
                    'user_token'      => $oauth_token,
                    'user_secret'     => $oauth_token_secret,
            ));

            $image = "{$_FILES['image']['tmp_name']};type={$_FILES['image']['type']};filename={$_FILES['image']['name']}";

            $code = $tmhOAuth->request('POST', 'https://upload.twitter.com/1/statuses/update_with_media.json',
array(
      'media[]'  => "@{$image}",
      'status'   => " " . $status, //A space is needed because twitter b0rks if first char is an @
      'lat'          => $lat,
      'long'         => $long,
),
true, // use auth
true  // multipart 
```

在 PHP 代码中，`OAuth`该类有一个请求方法。在 C# 方面，我使用了类中没有任何请求方法的 Twitterizer 库`OAuth`。然后我用`Webclient`了代替请求方法。但我需要一些凭据来发布数据。但我不知道我使用什么/为什么使用用户名和密码。实际上，我不想使用任何凭据。我可以使用什么来代替凭据？

第二个问题是，我总是得到一个授权错误（401）这里是代码

```
 OAuthTokenResponse responseToken = OAuthUtility.GetAccessToken(ConsumerKey, ConsumerSecret, oauth_token, oauth_verifier);
    OAuthTokens accessToken = new OAuthTokens();
    accessToken.AccessToken = responseToken.Token;
    accessToken.AccessTokenSecret = responseToken.TokenSecret;
    accessToken.ConsumerKey = ConsumerKey;
    accessToken.ConsumerSecret = ConsumerSecret;

    TwitterResponse<TwitterUser> twitterResponse = TwitterAccount.VerifyCredentials(accessToken);
    System.Net.ServicePointManager.Expect100Continue = false;
    if (twitterResponse.Result != RequestResult.Unauthorized)
    {
        try
        {
           string URL = "https://upload.twitter.com/1/statuses/update_with_media.json";

            WebClient client = new WebClient();

            client.Credentials = new System.Net.NetworkCredential(uName, pass);
            NameValueCollection postData = new NameValueCollection();
            postData.Add("status", status);
            postData.Add("media[]", Encoding.ASCII.GetString(bytesOfImage));
            byte[] b = client.UploadValues(URL, "POST", postData); // 401 error.
        }
        catch (Exception e)
        {
            return e.Message;
        } 
```

那么我的代码中的问题在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:57:42.603

您可以在 LINQ to Twitter 中使用 TweetWithMedia 方法执行此操作，如下所示：

```
 static void TweetWithMediaDemo(TwitterContext twitterCtx)
    {
        string status = "Testing TweetWithMedia #Linq2Twitter " + DateTime.Now.ToString(CultureInfo.InvariantCulture);
        const bool possiblySensitive = false;
        const decimal latitude = StatusExtensions.NoCoordinate; //37.78215m;
        const decimal longitude = StatusExtensions.NoCoordinate; // -122.40060m;
        const bool displayCoordinates = false;

        const string replaceThisWithYourImageLocation = @"..\..\images\200xColor_2.png";

        var mediaItems =
            new List<Media>
            {
                new Media
                {
                    Data = Utilities.GetFileBytes(replaceThisWithYourImageLocation),
                    FileName = "200xColor_2.png",
                    ContentType = MediaContentType.Png
                }
            };

        Status tweet = twitterCtx.TweetWithMedia(
            status, possiblySensitive, latitude, longitude, 
            null, displayCoordinates, mediaItems, null);

        Console.WriteLine("Media item sent - Tweet Text: " + tweet.Text);
    } 
```

乔

# android - 如何在 Android 中使用 HTML 播放音频文件？

> ID：10274061
> 
> 赞同：0
> 
> 时间：2012-04-23T02:19:33.373
> 
> 标签：android, html

我需要使用 Android 使用 HTML 播放音频文件。例如：我有音频 URL 文件`http://a1.phobos.apple.com/us/r1000/011/Music/12/14/7f/mzm.ubzkrulq.aac.p.m‌​4a`，需要让它在 HTML 浏览器中播放。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:49:26.933

试试看 -

```
mediaPlayer.setDataSource(<http url>);
mediaPlayer.prepare(); 
```

# assembly - Deci to bin 转换器（Pep/8 汇编器和模拟器）

> ID：10274062
> 
> 赞同：1
> 
> 时间：2012-04-23T02:19:35.137
> 
> 标签：assembly, pep8-assembly

我有一个任务是创建一个将 deci（-32,768 到 32,767）转换为 bin 的程序。输出必须显示所有 16 位。例如，如果输入是120，那么输出应该是：0000000001111000。我不知道如何反向输出0和1。当我输入 120 时，我得到：0001111000000000。 PS：我正在使用 Pep/8 汇编器和模拟器 (http://code.google.com/p/pep8-1/)，它可用于 Mac 和 PC。这是我到目前为止所拥有的：

```
;Pavel; Assignment 3
BR       main                ;Branch to MAIN
num:     .BLOCK  2           ;Input variable
flag:    .BLOCK  2           ;C flag
limit:   .BLOCK  2           ;Loop LIMIT
main:    LDA     0, i        ;Clear Accumulator
         DECI    num, d      ;Input 
loop:    LDA     limit, d    ;Load loop LIMIT
         CPA     16, i       ;Compare LIMIT to 16
         BREQ    exit        ;If LIMIT == 16, branch to EXIT. Done converting.
         LDA     num, d      ;Load NUM
         ASRA                ;Shift NUM to the right (division by 2)
         STA     num, d      ;Store NUM after division
if:      MOVFLGA             ;Load flags to Accumulator
         BRC     else        ;If C == 1, branch to ELSE
         DECO    0, i        ;Output 0
         LDA     limit, d    ;Load LIMIT
         ADDA    1, i        ;Add 1 to LIMIT
         STA     limit, d    ;Store LIMIT
         BR      loop        ;Branch to LOOP
else:    DECO    1, i        ;Output 1
         LDA     limit, d    ;Load LIMIT
         ADDA    1, i        ;Add 1 to LIMIT
         STA     limit, d    ;Store LIMIT
         BR      loop        ;Branch to LOOP
exit:    CHARO   ' ', i      ;Outputs space
         STOP
         .END 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:30:46.467

您现在正在右移并测试最终进入进位的位。如果你换个方向会发生什么？

# java - 制作一种在屏幕上随机放置对象的方法。

> ID：10274069
> 
> 赞同：0
> 
> 时间：2012-04-23T02:20:38.393
> 
> 标签：java, methods, random, constructor, greenfoot

我的其他一切都是正确的，但由于某种原因，这给我带来了问题。我想实现一个名为 populate() 的方法。我想在构造函数中被调用。我希望它为每种类型的对象创建随机数量的对象的方法。这是我的代码。我的错误是“* *strong text* *constructor yellowish in class yellowish cannot be apllied to given types. required: int found: not argument reason: actual and form argument list in lengthly different.

```
public class FishWorld extends World
{

    /**
     * Constructor for objects of class FishWorld.
     * 
     */
    public FishWorld() 
    {

        super(600, 400, 1);

        populate();
        populate2();
        populate3();
    }

    public void populate()
    {
        int randX;
        int randY;

        for(int i = 0; i < 5; i++)
        {
            YellowFish yf = new YellowFish();
            randX = Greenfoot.getRandomNumber ( getWidth() );
            randY = Greenfoot.getRandomNumber( getHeight() );
            addObject(yf, randX, randY);
        }
    }
    public void populate2()
    {
        int randX;
        int randY;
        for(int i = 0; i < 5; i++)
        {
            GreenFish gf = new GreenFish();
            randX = Greenfoot.getRandomNumber ( getWidth() );
            randY = Greenfoot.getRandomNumber( getHeight() );
            addObject(yf, randX, randY);
        }
    }
    public void populate3()
    {
        int randX;
        int randY;
        for(int i = 0; i < 5; i++)
        {
            StripeFish sf = new StripeFish();
            randX = Greenfoot.getRandomNumber ( getWidth() );
            randY = Greenfoot.getRandomNumber( getHeight() );
            addObject(yf, randX, randY);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:29:58.197

`empty parameter`看来您在 YellowFish 类中没有构造函数。您可能要添加：

```
public YellowFish() {
// ... your code here
} 
```

在 YellowFish 类中。

# javascript - 这个 jQuery AJAX 帖子是否不正确地保存数据？

> ID：10274070
> 
> 赞同：1
> 
> 时间：2012-04-23T02:20:40.317
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

```
 $.ajax({
        type: 'POST',
        url: '/users',
        data: {
            _method : 'PUT',
            user : {
                guides : {
                    step1 : true,
                    step2 : true
                }
            }
        }
    }); 
```

这是正确的保存吗？我想要这个 json 数据在 rails 序列化字段中，但它保存不正确，如下所示，这会导致错误。

用户指南：

```
--- "{\"step1\"=>\"true\", \"step2\"=>\"true\"}" 
```

然后，当我在 rails 视图中执行以下操作时：

```
guides = [<%= current_user.guides.try(:html_safe)%>]; 
```

它输出 with`=>`而不是预期的`:`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:50:02.713

首先你可以尝试使用 JSON.stringify() 否则 jQuery 将使用 $.param() 来序列化你的数据。但是您的主要问题是您想要一个 JSON 字符串，而不是生成的 YAML。就我现在而言

```
guides = [<%= current_user.guides.to_json %>]; 
```

应该做的伎俩。另外，也许我不是 100% 确定，但您可能不需要在此使用 html_safe ，因为它已经被转义了，虽然不知道它将如何在视图中呈现

# php - 打印除一个以外的所有变量

> ID：10274074
> 
> 赞同：0
> 
> 时间：2012-04-23T02:21:04.400
> 
> 标签：php, debugging

在 PHP 中，我得到了所有变量的转储，如下所示：

```
var_dump(get_defined_vars()); 
```

然而，在一个特定的应用程序中，[其中一个变量是巨大的](https://stackoverflow.com/questions/10201431/php-performance-memory-intensive-variable)，我真的很想避免打印出来。我可以遍历`get_defined_vars()`数组以创建一个新数组并将有问题的变量列入黑名单，但如果有更好的方法，那么我很想知道它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:23:27.740

```
var_dump(array_diff_key(get_defined_vars(), array_flip(array('unwantedVar')))); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:22:58.040

嗯，你能取消设置 var 和 var_dump() 吗？

```
unset($bigChuckNorrisVar);
var_dump(get_defined_vars()); 
```

当然，在那之后您可能需要在程序中使用该变量，但这是一种快速调试方法。

# jquery - jQuery，onclick 通过转换更改 css 属性

> ID：10274078
> 
> 赞同：0
> 
> 时间：2012-04-23T02:21:40.463
> 
> 标签：jquery, css

在 jQuery 中，我有部分 onclick 它会更改一些属性。我想知道我是否可以以某种方式将css转换包含在其中。我尝试像我一样添加它，但这只是给它一个属性，当它发生变化时它不会影响它。

```
$("#slide1-1").click(function() {
$('.aboutchange').css('color', '#433792');
});

$("#slide1-2").click(function() {
$('.aboutchange').css('color', 'orange');
});

$("#slide1-3").click(function() {
$('.aboutchange').css('color', 'green');
});

$("#slide1-4").click(function() {
$('.aboutchange').css('color', 'red');
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:26:48.280

您需要使用 jQuery 的动画功能进行转换。这将在 1000 毫秒的时间内根据您选择的文本颜色进行动画处理。jQuery UI 也提供了很多额外的效果。

```
$("#slide1-1").click(function() {
    $('.aboutchange').animate({ color:'#433792' }, 1000);
}); 
```

**编辑**

也许我不明白这个问题，这就是我被否决的原因...如果您尝试使用 css3 转换，那么您应该在 css 中声明转换和状态并使用 .addClass() 和 .removeClass() 添加/删除适当的状态和转换

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T02:31:28.330

jQuery 默认不提供彩色动画。您需要使用 jquery-color 插件附带的 jQuery UI，或者您可以只使用[jquery-color](https://github.com/jquery/jquery-color)。然后你可以像任何其他属性一样设置动画：

```
$element.animate({ color: 'blue' }); 
```

# asp.net-mvc - 在没有提供程序的情况下在 ASP.NET MVC 中对用户进行身份验证的简单方法

> ID：10274080
> 
> 赞同：1
> 
> 时间：2012-04-23T02:22:03.820
> 
> 标签：asp.net-mvc, cookies, forms-authentication

我试图了解 ASP.NET MVC 中的身份验证是如何工作的。我不希望内置的 MembershipProvider 在幕后创建本地数据库。我还查看了一些关于自定义会员提供程序的博客文章。在寻找更简单的表单身份验证模型时，我发现了以下内容：

```
FormsAuthentication.SetAuthCookie("myusername", true);
FormsAuthentication.SignOut(); 
```

这个想法是将用户名和加盐哈希密码发送到数据库，看看它们是否匹配那里的记录。如果用户存在，那么我将用户名传递给 SethAuthCookie。我的问题是：

*   用户名应该加密吗？
*   如果有多个服务器并且用户正在浏览网站会发生什么？我相信任何一台服务器都可以为用户提供内容，那么他​​们如何知道用户是否已通过身份验证？
*   在没有提供者的情况下，在 MVC 中验证用户的首选方式是什么？我是在正确的轨道上还是应该寻找其他东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:09:34.657

> 用户名应该加密吗？

不。

> 如果有多个服务器并且用户正在浏览网站会发生什么？我相信任何一台服务器都可以为用户提供内容，那么他​​们如何知道用户是否已通过身份验证？

在每次请求时，服务器都会读取客户端浏览器发送并由`FormsAuthentication.SetAuthCookie`调用生成的身份验证 cookie，对其进行解密并检索存储在其中的用户名。只需确保您为服务器场的所有节点设置了相同的机器密钥，这样无论哪个节点发出身份验证 cookie，所有其他节点都可以解密它。

> 在没有提供者的情况下，在 MVC 中验证用户的首选方式是什么？我是在正确的轨道上还是应该寻找其他东西？

你在正确的轨道上。`FormsAuthentication.SetAuthCookie`一旦您验证密码哈希与数据库中的用户匹配，您就可以使用该方法发出身份验证 cookie，并且在后续操作中，您可以使用该`User.Identity.Name`属性来检索当前经过身份验证的用户。

我还建议您查看[以下文章](http://msdn.microsoft.com/en-us/library/ff647070.aspx)，该文章很好地概述了表单身份验证在 ASP.NET 中的工作原理。

# javascript - Javascript：在字符串中插入变量

> ID：10274081
> 
> 赞同：4
> 
> 时间：2012-04-23T02:22:08.140
> 
> 标签：javascript, jquery

我有以下 jquery 代码将`#content`div 从*另一个*页面加载到*当前*`#result`页面的div 中：

 *```
$('a').click(function(event){
  $('#result').load('abother_page.html #content');
}); 
```

如您所见，我将请求文件的名称以及我要显示的特定 div 硬编码到使用 load 方法发送的字符串中。

我试图使这个动态，但我的代码缺少一些东西：

```
// get the href of the link that was clicked
var href=$(this).attr('href');
// pass the href with the load method
$('#result').load('href #content'); 
```

显然这不起作用，因为我创建的 href 变量没有插入到字符串中。我怎样才能做到这一点？

我尝试了以下方法，但均未成功：

```
// Ruby-style: 
$('#result').load('#{href} #content');
// Concatenating-style
$('#result').load(href + '#content'); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T02:25:02.060

添加一个由“here”表示的空格：

```
$('#result').load(href + ' #content');
                          ^---- here 
```

* * *

失败尝试的解释如下：

```
//this code used the string "href" as the url
$('#result').load('href #content');

//javascript doesn't have this syntax for wrapping variables like in PHP
$('#result').load('#{href} #content');

//this code appended "#content" like it was a hash tag
$('#result').load(href + '#content'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T11:57:57.750

这已经改变了。

从 2015 年开始，`ES6`现在可以使用`Template literals`您可以在此[LINK上阅读更多信息的方式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/template_strings)

**表达式插值**

```
var a = 5;
var b = 10;
console.log('Fifteen is ' + (a + b) + ' and\nnot ' + (2 * a + b) + '.');
// "Fifteen is 15 and
// not 20." 
```

**在你的情况下**

```
// get the href of the link that was clicked
var href=$(this).attr('href');
// pass the href with the load method
$('#result').load(`${href} #content`); 
```*

# python - python在emacs上执行错误（ImportError：没有名为站点的模块）

> ID：10274082
> 
> 赞同：2
> 
> 时间：2012-04-23T02:22:15.240
> 
> 标签：python, emacs, centos

我正在尝试在 emacs 上执行我的 python 代码。

当我尝试 cc cc 时，会出现以下错误。

```
ImportError: No module named siteCould not find platform independent libraries <prefix>
Could not find platform dependent libraries <exec_prefix>
Consider setting $PYTHONHOME to <prefix>[:<exec_prefix>]
ImportError: No module named site 
```

所以我在 .emacs 文件中设置 pythonpath 如下：

```
(setenv "PYTHONPATH" "/opt/python2.7/bin") 
```

但仍然会弹出错误。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T03:43:24.790

您可以使用以下 RPM 安装 Python 2.7：

[ftp://ftp.pycopia.org/pub/python/centos/5/i386/python2.7-2.7.1-1TH.i386.rpm](ftp://ftp.pycopia.org/pub/python/centos/5/i386/python2.7-2.7.1-1TH.i386.rpm)

它应该适用于任何 CentOS 5.x，32 位。您不必删除“库存”Python2.4，这与标准安装共存。它不会破坏您安装此 RPM 的系统。但是，您必须明确使用 pound-bang 行中的版本。

```
#!/usr/bin/python2.7
# Your python script 
```

您可能还想安装其他 RPM。

# django - 为什么 DOJO 工具文本区域控件会破坏我的表单

> ID：10274084
> 
> 赞同：0
> 
> 时间：2012-04-23T02:22:31.377
> 
> 标签：django, dojo, django-comments

嗨，我在我的一个应用程序中使用 django 评论。我定制了评论框架以满足我的需求。一切正常，直到我使用 dojo 使评论的文本区域可扩展[http://dojotoolkit.org/reference-guide/1.7/dijit/form/Textarea.html#dijit-form-textarea](http://dojotoolkit.org/reference-guide/1.7/dijit/form/Textarea.html#dijit-form-textarea)。添加脚本后，表单提交后会抛出错误：此字段是必需的。因此，django 似乎不再将 textarea 识别为表单的一部分。

在我的模板中，我使用标准注释标签：

```
{% render_comment_form for event %}
{% render_comment_list for event %} 
```

当我添加 dojo 脚本时，textarea 变得可扩展，但表单不再传递它的值。

```
dojo.require("dijit.form.Textarea");

dojo.ready(function(){
    var textarea = new dijit.form.Textarea({
        name: "id_comment",
        style: "width:200px;"
    }, "id_comment");
}); 
```

dojo 向 textarea 添加了一堆类，使其如下所示。但它仍然有它的 id 并且它仍然是一个 textarea 不是吗？

```
<textarea autocomplete="off" data-dojo-attach-point="focusNode,containerNode,textbox" name="id_comment" class="dijitTextBox dijitTextArea dijitExpandingTextArea" style="overflow-y: hidden; overflow-x: auto; -moz-box-sizing: border-box; width: 200px; height: 36px;" tabindex="0" id="id_comment" widgetid="id_comment" value="" rows="1"></textarea> 
```

阅读此问题的答案后：[Searching for the Ultimate Resizing Textarea](https://stackoverflow.com/questions/1586931/searching-for-the-ultimate-resizing-textarea)。我认为这可能是最好的方法，但不幸的是它不是。我想知道是不是只有我一个人。有没有办法做到这一点，或者我应该使用不同的方法来使该字段可扩展。

# 编辑

使用道场，帖子看起来像这样：

```
content_type    cylebrations.image
csrfmiddlewaretoken 24827190efbb5b7793aeadaf8276beed
honeypot    
id_comment ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
object_pk   4
post    Post
security_hash   8a091cfbf1e309627369069d4f71c21b33843a85
timestamp   1335209980 
```

没有道场：

```
comment eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee
content_type    cylebrations.image
csrfmiddlewaretoken 24827190efbb5b7793aeadaf8276beed
honeypot    
object_pk   4
post    Post
security_hash   e02d8261f528cfc0f22ee30ced820cfbb80715bc
timestamp   1335210114 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T19:04:42.710

Dojo 会覆盖 textarea 的名称。我称它为 id_comment，而不仅仅是评论。更改后，帖子看起来很好，一切正常：

```
 dojo.require("dijit.form.Textarea");

    dojo.ready(function(){
        var textarea = new dijit.form.Textarea({
            name: "comment",
            style: "width:200px;"
    }, "id_comment");
}); 
```

# objective-c - cocoa：webview里面的部分链接不能点击打开网站是什么原因呢？

> ID：10274089
> 
> 赞同：0
> 
> 时间：2012-04-23T02:23:18.187
> 
> 标签：objective-c, xcode, macos, cocoa

打开`<a href="http://www.google.com">google</a>`，打不开。加上打不开的`<a target="_blank" href="http://www.google.com">google</a>`网址`target="_blank"`。

我想实现，添加`target="_blank"`和不添加`target="_blank"`都可以打开网址。

我开发了一个类似 webview 的应用程序，但我有一个问题。如何在当前应用程序的新窗口中打开链接 - 而不是在 Safari 中？

感谢帮助。

# c - 在 KeyPress 上关闭消息框？

> ID：10274090
> 
> 赞同：1
> 
> 时间：2012-04-23T02:23:20.333
> 
> 标签：c, windows, winapi

如何`MB_OK|MB_ICONINFORMATION`在 Windows API 中创建一个简单的 MessageBox 并在诸如“Z”之类的按键时关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:28:20.743

可以使用以下代码创建消息框：

```
#include<windows.h>
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,LPSTR lpCmdLine,int nCmdShow){
       MessageBox(NULL,"Good Bye, Cruel World!","Note",MB_OK|MB_ICONINFORMATION);
       return 0;
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T06:45:15.890

使用钩子。

# iphone - 获取异步 JSON 数据后重新加载 tableview

> ID：10274095
> 
> 赞同：0
> 
> 时间：2012-04-23T02:23:45.913
> 
> 标签：iphone, ios, xcode, uitableview, reloaddata

我使用异步 JSON 请求和响应来获取一些数据。我想在表格视图中填充它。但是，我看到的只是空白表格单元格。我试着做一个`reloadData`，但它不工作。这是我的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    responseData = [[NSMutableData data] retain];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://strong-earth-32.heroku.com/stores.aspx"]];//asynchronous call
    [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    [responseData setLength:0];
}
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [responseData appendData:data];
}
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {
    NSLog(@"%@", error);
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSString *responseString = [[NSString alloc] initWithData:responseData encoding:NSUTF8StringEncoding];
    [responseData release];

    SBJsonParser *parser = [[SBJsonParser alloc]init];
    resultData = [[parser objectWithString:responseString error:nil]copy];

    NSArray *storeArray = [[NSArray alloc]init];
    storeArray= [resultData objectForKey:@"stores"];
    populatedStoreArray = [[NSMutableArray alloc]init];
    images = [[NSMutableArray alloc] init];

...........

[populatedStoreArray addObject:tempStore];
    } 
    [self.storeDetailsTable reloadData];
        [parser release];

} 
```

表视图如下所示：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    StoreCell *cell = (StoreCell *) [tableView dequeueReusableCellWithIdentifier:@"StoreCell"];
    if (cell == nil) {

        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"StoreCellView" owner:nil options:nil];

        for (id currentObject in topLevelObjects) {
            if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                cell = (StoreCell *) currentObject;
                break;
            }
        }

    }

    Store *storeAtIndex = [populatedStoreArray objectAtIndex:[indexPath row]];
    cell.storePhoneNumber.text = [storeAtIndex phone];
    cell.storeAddress.text = [storeAtIndex address];
    cell.storeImage.image = [images objectAtIndex:[indexPath row]];
    return cell;
} 
```

我的更多代码：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [populatedStoreArray count];

} 
```

头文件：

```
@interface FirstViewController : UIViewController <UITableViewDelegate, UITableViewDataSource> {
    IBOutlet UITableView *storeDetailsTable;

}

@property (nonatomic, retain) IBOutlet UITableView *storeDetailsTable;
@property (nonatomic, strong) NSDictionary *resultData;
@property (nonatomic, strong) NSMutableArray *populatedStoreArray;
@property (nonatomic, strong) NSMutableArray *images;
@property (nonatomic, strong) NSMutableData *responseData;

@end 
```

任何指针都将不胜感激，因为无论我在哪里搜索，我都被告知使用`reloadData`哪个不起作用。事实上，xcode 甚至在我使用时都不会提示我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:14:39.767

Maybe you missed this line:

`storeDetailsTable.delegate=self;`

# php - 从管理面板创建属性

> ID：10274098
> 
> 赞同：0
> 
> 时间：2012-04-23T02:24:07.153
> 
> 标签：php, mysql, panel, admin

我被要求为站点管理员提供在数据库表中创建属性的可能性。网站上有卖家和买家，每个卖家在添加某个产品时，填写具体产品的必填字段，然后发布该产品。我对这将如何工作感到有些困惑。如果每个产品都有特定的字段，那么这是否意味着如果网站有 2.000 个产品，我将有 2.000 个表？我从来没有做过这样的事情，所以我真的不知道如何处理这个问题。此外，在管理功能上创建属性。假设产品是番茄。管理员为西红柿添加了称为“条件”的字段，它具有“冷冻”和“新鲜”等选项。然后，当一些卖家试图创造番茄产品时，他们需要选择番茄的状态是新鲜的还是冷冻的。我想到了一个可能的解决方案，例如创建一个保存 .

product_tomato (product_id, user_id, name, description, condition)

产品选择（选择 ID，产品 ID，选择文本）

product_option（option_id，select_id，option_text）

所以，这就是我想象的表格如何做到这一点。因此，当管理员向产品表添加字段时，我将在产品表中添加一列，然后在 prodcut_select 表中创建新行，然后在 product_option 表中列出可能的选项。但是后来我对如何在产品页面上显示它感到困惑。当我不知道管理员创建的列的名称是什么时，我将如何在代码中处理它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T02:47:39.610

这个问题的措辞非常令人困惑，但我相信我明白你在说什么。

不，你不会为每一种产品都制作一张桌子，这很快就会变得很荒谬。对于具有三个表的多个产品，您可以轻松处理此问题。

```
Tables:

Product
Product_Attributes
Seller_Product 
```

让我们以您假设的带有条件的番茄为例。

管理员决定他的网站现在将提供西红柿作为产品。他创建了一个产品，并将其添加到产品表中。然后，他决定西红柿应该有一个“条件”属性，它有两个可能的值，新鲜的和冷冻的。因此，他将向 Product_Attributes 表添加两行，其中包含三个字段（产品、条件、值）。

因此，您的表格现在看起来像这样。

```
Product Table:

*Name |*
Tomato

Product_Attribute Table:

*Product | Attribute | Value*
Tomato | Condition | Fresh
Tomato | Condition | Frozen 
```

最后，当您的卖家将商品添加到站点商店或其他任何东西时，您会让他们将数据输入到一个表单中，该表单从该产品的 Product_Attribute 表中获取条件和潜在值。在这种情况下，只有一个属性，所以他们只需填写条件。假设有两个卖家 Jim 和 Tom，他们分别销售新鲜和冷冻的西红柿。最后三张桌子看起来像这样。

```
Product Table:

*Name |*
Tomato

Product_Attribute Table:

*Product | Attribute | Value*
Tomato | Condition | Fresh
Tomato | Condition | Frozen

Seller Product Table:

*Seller | Product| Attribute | Value*
Jim | Tomato | Condition | Fresh
Tom | Tomato | Condition | Frozen 
```

这样，您可以使用三个表存储有关产品的各种自定义字段。您应该根据需要进行规范化或非规范化，您可能需要一个仅用于卖方产品的表并将它们的条件存储在单独的表中。无论哪种方式，上述方法都可以完成工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T02:53:41.620

我相信这是一个很好的方案：

product_data - 产品 ID、类别 ID、名称、价格、描述

product_meta - 产品 ID、attribute_name、attribute_value

product_variants - 产品 ID、变体 ID、变体值

您还想为变体名称和类别名称/描述提供单独的表格。

例子：

```
ID  | Category_ID | Name   | Price
251 | 14          | Tomato | 5.00

ID  | Attribute | Value
251 | Condition | Fresh
251 | Color     | Red

ID  | Variant_ID | Name | Value
251 | 50         | Size | Small
251 | 50         | Size | Huge 
```

所以基本上你会有大约 5-10 个表（谷歌数据库规范化的 3 个步骤）。所有表都通过 ID 链接在一起。

您需要做的所有事情 - 使用`JOIN`语句和`WHERE product_id`条件检索值。

# node.js - 如何在 Express 中添加“查看选项”？

> ID：10274099
> 
> 赞同：4
> 
> 时间：2012-04-23T02:24:11.817
> 
> 标签：node.js, configuration, express

我正在学习使用 Express。我想要做：

```
app.configure(function(){
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.set('view options', { layout: false });    /* asterisk */
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(app.router);                           /* dagger */
  app.use(express.static(__dirname + '/public'));
});

app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
  app.use(express.logger('dev'));
  app.set('view options', { pretty: true });     /* asterisk */
}); 
```

我做的补充是：

*   对 Jade 使用 'layout:false'。
*   在 Jade 中漂亮地打印 HTML。
*   打开记录器，使用“开发”格式

有两个问题：

1.  `/* asterisk */`当我设置 'pretty: true' 时，我会覆盖我以前的选项，而不是添加它们。即，除非我添加`{ pretty: true, layout: false }`感觉多余且不正确的程序，否则我的程序会中断。如何更正它以便我只“修改”视图选项，而不是“定义”它们？

2.  `/* dagger */`记录器不承认我的请求，除了`/favicon.ico`. 我发现如果我删除该`app.use(app.router);`行，那么我会同时看到`/`和`/favicon.ico`。这里发生了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-04T01:50:40.420

从 Express 3.x 开始，使用`app.set('view options')`不再是正确的方法。 [https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x) 这些选项现在在您的`app.js`使用`app.locals`中设置为

```
app.locals.pretty = true; 
```

或为 ejs 设置自定义分隔符

```
app.locals.open = '}}';
app.locals.close = '{{'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T06:48:09.007

我签入了 express 源代码，该`app.set`函数只是在它拥有的任何先前值之上分配。要获得您正在寻找的行为，您必须`view options`在后续调用中合并该对象。这意味着您可能必须跳过几个圈。connect 包有一个合并功能，可以解决这个问题，但要获得它，你必须将它包含在你的`package.json`:

```
"dependencies": {
  "express": "2.5.5"
, "jade": ">= 0.0.1"
, "connect": "1.X"
} 
```

您需要`utils`从连接中获取对象：

```
var utils = require('connect').utils; 
```

`app.set(option)`没有值返回选项的当前设置，因此第二次设置`view option`时可以这样做：

```
app.set('view options', utils.merge(app.set('view options'), { pretty: true })); 
```

至于您在使用记录器时遇到的问题，请记住 app.use 正在将中间件添加到堆栈中。在处理请求时，它会按照最初配置的顺序调用每个中间件，有时如果一个中间件能够履行其职责，它不会将控制权传递给堆栈中的后续中间件。

当中间件满足对随后未运行的url`router`的请求时，就是这种情况。请求出现在日志流中的原因是没有一个中间件能够完成它（如果你有一个文件，中间件就会完成）并且处理落到中间件。`'/'``logger``favicon.ico``static``public/favicon.ico``logger`

为了使您的示例工作，您需要在`logger`中间件之前在堆栈中更早地定义`router`中间件。

# php - php循环计数器的自动刷新ajax显示

> ID：10274100
> 
> 赞同：0
> 
> 时间：2012-04-23T02:24:15.917
> 
> 标签：php, ajax

我已经在 php 附近工作了几个月，但对 ajax 很陌生。在这一点上，我已经能够使用 ajax 来启动我的 php 脚本并更新我的页面结果而无需重新加载，并且我已经能够自动刷新另一个脚本来多次运行它。

我有大型记录集，可能需要 8 - 10 - 12 分钟来处理，具体取决于正在执行的操作。我希望能够在我的页面上自动刷新显示“处理 y 的记录 x”的 ajax“进度”显示，其中 x 是循环计数器，y 是我的记录集中的记录数，两者都是 php 变量。

我已经搜索过，但似乎没有找到类似的东西。谁能帮我指出正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:31:37.813

您可以做的是，当第一个 ajax 仍在进行中并且 php 脚本运行时，使用进度更新数据库记录或会话变量。然后有周期性的 ajax 请求（除主 ajax 请求之外的其他 ajax 请求）从数据库记录或会话变量中获取进度并将进度发送回客户端，然后可以显示此进度。继续这样做，直到主 ajax 请求完成。

# c++ - 使指针成为全局 C++

> ID：10274105
> 
> 赞同：0
> 
> 时间：2012-04-23T02:24:29.940
> 
> 标签：c++, pointers, binary-search-tree

我使用根指针构建了一个二叉树。

不是应该在所有函数中更改根指针，因为我声明它是全局的吗？我如何实现这一目标？

谢谢

//伪代码（在别处声明的左、右指针）

```
Node * root = new Node;

Node * BST::BuildTree(int label)
{
         root->left = changed;
        root->right = changed;
}

Node * BST::GetNode(int label)
{

  BTNode *ptr = root;

  cout << root->right;  //This gives me a seg fault since root is still NULL and not changed
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:30:41.470

这是因为您没有`root`在代码中为 , 分配有效地址。

它应该指向一个有效的节点：

```
void BST::CreateRoot()
{
  root = new (std::nothrow) Node;
} 
```

在 C++ 中，当你想使用“全局变量”时，你应该使用[未命名的命名空间。](http://msdn.microsoft.com/en-us/library/yct4x9k5%28v=vs.80%29.aspx)好处是它可以防止全局变量很容易引入的名称冲突。

```
namespace
{
  Node * root = NULL;
} 
```

如果您使用 C 进行编码，我会在这里结束。但是由于您使用的是 C++，所以还有一件事。

你应该尽量[避免使用全局变量](http://www.codecogs.com/pages/forums/pagegen.php?id=97)，尤其是当你有很多相互依赖的变量时。通常，您可以创建一个单例类。

但是我认为您的情况使用单例并不那么复杂。只需在您的函数中添加一个额外的输入参数来指示您要在哪个节点上进行操作。

```
// @param1(node) can be root or whatever node you want
Node * BST::BuildTree(Node *node, int label)
{
  node->left = changed;
  node->right = changed;
} 
```

# slickgrid - 使用分页器插件时从 SlickGrid 获取行数据

> ID：10274110
> 
> 赞同：1
> 
> 时间：2012-04-23T02:25:19.760
> 
> 标签：slickgrid

我正在使用带有寻呼机插件的 SlickGrid。我的意图是在 SlickGrid 中显示订单项，并允许用户双击一行以获取更多详细信息。我的代码似乎可以正常工作，但感觉好像我正在以艰难的方式做到这一点：

```
grid.onDblClick.subscribe(function(e, args) {
    var selectedIndex = parseInt(grid.getSelectedRows());
    var pageInfo = dataView.getPagingInfo();
    var pageSize = pageInfo.pageSize;
    var pageNum = pageInfo.pageNum;
    var idx = pageSize*pageNum + selectedIndex;
    var asset = rows[idx].assetName;
    alert("Selected Asset is " + asset);
}); 
```

我已经看到其他问题发布在人们做 a`grid.getData()[selectedIndex]`或 a 的地方`dataView.getItemById(selectedIndex)`，但由于`selectedIndex`总是从 0 到某个数字，所以无论我在哪个页面上，我总是从列表的第一页获取数据。是否有直接的方法将页面上的选定索引映射到数据数组中的实际行？再次，上面的代码似乎工作正常 - 感觉就像我在某处遗漏了一个明显的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T21:40:21.553

```
grid.onDblClick.subscribe(function(e, args) {
  alert("Selected asset is " + args.item);
  alert("Or " + grid.getData().getItem(args.row));
  alert("Or " + grid.getDataItem(args.row));
}); 
```

# mysql - 将两个选择彼此相邻，而不是在另一个之上

> ID：10274114
> 
> 赞同：0
> 
> 时间：2012-04-23T02:25:49.413
> 
> 标签：mysql, merge

我的 MySQL 数据库中有这个结构：

```
 +--------------+    +--------------+
   |    table_1   |    |    table_2   | 
   +----+---------+    +----+---------+  
   | id |   name  |    | id | surname |  
   +----+---------+    +----+---------+  
   | 1  | tbl1_1  |    | 1  | tbl2_1  |  
   | 2  | tbl1_2  |    | 2  | tbl2_2  |   
   | 3  | tbl1_3  |    | 3  | tbl2_3  |  
   +----+---------+    +----+---------+ 
```

我需要一个返回这个的查询：

```
 +----+---------+---------+
   | id |   name  | surname |
   +----+---------+---------+
   | 2  | tbl1_2  | tbl2_2  |
   +----+---------+---------+ 
```

我在谷歌搜索，我发现是 UNION 这样做的：

```
 +----+---------+
   | id |  name   |
   +----+---------+
   | 2  | tbl1_2  | 
   | 2  | tbl2_3  |
   +----+---------+ 
```

这不是我要找的。我需要它们彼此相邻组合，而不是彼此重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:27:30.733

您需要使用[**JOIN**](http://www.sql-tutorial.net/SQL-JOIN.asp)，连接类型取决于您的要求。

```
SELECT id,name,surname FROM table_1 INNER JOIN table_2 on table_2.id=table_1.id WHERE table_1.id = 2 
```

INNER JOIN 将选择两个表中的所有行，只要我们匹配的 id 列之间存在匹配，即两个表中都存在 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:49:54.940

这是必须要做的：

```
SELECT table_1.id, name, surname FROM table_1, table_2 WHERE table_1.id = 2 AND table_2.id = 2 
```

# python - 为什么在本地调用时“删除”会改变列表？

> ID：10274116
> 
> 赞同：3
> 
> 时间：2012-04-23T02:25:52.060
> 
> 标签：python, list

> **可能的重复：**
> [了解 Python 传递函数参数的对象调用风格](https://stackoverflow.com/questions/10262920/understanding-pythons-call-by-object-style-of-passing-function-arguments)

我最近遇到了这个：

```
x = [1,2,3]

def change_1(x):
    x = x.remove(x[0])
    return x 
```

结果是：

```
>>> change_1(x)
>>> x
[2, 3] 
```

我发现这种行为令人惊讶，因为我认为函数内部的任何内容都不会影响外部变量。此外，我构建了一个示例，其中基本上做同样的事情但没有使用`remove`：

```
x = [1,2,3]

def change_2(x):
    x = x[1:]
    return x 
```

结果是：

```
>>> change_2(x)
[2, 3] # Also the output prints out here not sure why this is
>>> x
[1, 2, 3] 
```

我得到了我期望的结果，函数不会改变 x。

所以它必须是`remove`有效果的特定的东西。这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T03:04:12.527

令人困惑的一件事是您将许多不同的事物称为“x”。例如：

```
def change_1(x):       # the x parameter is a reference to the global 'x' list
    x = x.remove(x[0]) # on the left, though, is a new 'x' that is local to the function
    return x           # the local x is returned

>>> x = [1, 2, 3]
>>> y = change_1(x)    # assign the return value to 'y'
>>> print y
None                   # this is None because x.remove() assigned None to the local 'x' inside the function
>>> print x
[2, 3]                 # but x.remove() modified the global x inside the function

def change_2(x):
    x = x[1:]          # again, x on left is local, it gets a copy of the slice, but the 'x' parameter is not changed
    return x           # return the slice (copy)

>>> x = [1, 2, 3] 
>>> y = change_2(x)
>>> print x
[1, 2, 3]             # the global 'x' is not changed!
>>> print y
[2, 3]                # but the slice created in the function is assigned to 'y' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T02:33:26.167

如果你调用你的函数的参数，你会得到同样的结果`n`，或者`q`。

受影响的不是变量名。在`x`您的列表范围内和在`x`该范围之外是两个不同的“标签”。但是，由于您传递了`x`附加到的值，因此`change_1()`它们都指的是同一个对象。当您`x.remove()`对函数中的对象执行操作时，您基本上是在说：“获取`x`引用的对象。现在从该对象中删除一个元素。这与 lhs 分配非常不同。如果您`y=0; x=y`在函数内部执行了操作。您没有做列表对象的*任何内容*。您基本上只是撕下 of 的“x”标签`[1, 2\. 3]`并将其放在 y 指向的任何内容上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T02:30:12.777

您的变量 x 只是对您创建的列表的引用。当您调用该函数时，您将按值传递该引用。但是在函数中，你有对*同一个列表*的引用所以当函数修改它时，它在任何范围内都被修改。

此外，在交互式解释器中执行命令时，python 会打印返回值，如果它没有分配给变量。

# python - 推送到 Git 存储库时如何设置自动部署到 AppEngine

> ID：10274118
> 
> 赞同：6
> 
> 时间：2012-04-23T02:26:21.680
> 
> 标签：python, git, google-app-engine, python-2.7, bitbucket

我听说其他平台在将更改推送到其 Git 存储库时支持将其代码自动部署到生产环境。

我可以为 AppEngine 设置类似的东西吗？如何？

我在 Windows 上使用 Python2.7，并将 bitbucket 作为存储库。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T03:05:57.917

既然 app engine deploy 只是一个 python 脚本，为什么你不能写一个 shell 脚本，调用 'git push' 后跟 'python appcfg.py deploy'？

上传到应用程序后从 bitbucket->appengine 发送的任何 bitbucket 挂钩可能是个坏主意，因为它需要将您的应用程序引擎登录凭据存储在 github 上。

其他项目可能会让您的应用服务器从 github/bitbucket 拉取。如果您的应用引擎站点仅使用[http://drydrop.binaryage.com/](http://drydrop.binaryage.com/)提供静态网站，则可以执行此操作，但您无法以这种方式更新实际运行的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-16T06:06:18.813

最近，App Engine 增加了 Push to Deploy 功能：[https ://developers.google.com/appengine/docs/push-to-deploy](https://developers.google.com/appengine/docs/push-to-deploy)

它只内置了对 GitHub 的支持，但仍然可以配置 BitBucket 来使用它。

# php - Javascript。嵌入还是链接？

> ID：10274119
> 
> 赞同：2
> 
> 时间：2012-04-23T02:26:41.977
> 
> 标签：php, javascript, model-view-controller

多亏了一些 UI 框架，例如 KendoUI 和 Dojo/Dijit，我开始接触更多的 JavaScript，并且我正在尝试将它们与我的自定义 MVC 框架集成。但是，他们所有的示例都将 JavaScript 与 HTML 一起嵌入`<script></script>`标签中，这很好，只是意味着代码被转储到我的视图中。

我只是想知道在我的项目中是否有一些“*标准*”或*更可接受*的方法来呈现自定义 JavaScript 代码。将代码嵌入 HTML 是最好的方法，还是认为将 JavaScript 存储在 .js 文件中并从 HTML 链接到它*更好？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:30:50.770

使用脚本标签，例如`<script src="foo.js"></script>`

理想情况下使用缩小版本，例如`<script src="foo.min.js"></script>`

如果您正在构建一个网站，还要研究缓存文件的方法（如果文件更改，则取消缓存），例如通过在文件名中使用日期戳。

一些编程框架可以自动组合和缩小页面的所有 JavaScript 文件。例如，Rails 有一个资产管道可以为您处理这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:28:39.103

您应该使用外部`<script>`标签来允许浏览器缓存脚本并节省带宽。

或者，您还可以自动缩小它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T03:06:28.273

这是我使用的风格，

1）。我通常`js libs`使用链接（jQuery等）`<script src="libURL"></script>`

原因：

1.  这缓存了 js 库。我站点中的大多数页面都将使用该特定的 js 库，并且缓存将减少加载时间和带宽使用。
2.  一旦我获得了更新版本的 js lib，我就必须用新版本替换旧版本。无需逐页更改内容！

`<script>//codes here</script>`2).当这些代码特定于该特定页面时，我使用方法嵌入脚本。

原因：

1.  以确保我不会弄乱我的代码！;-)
2.  这些代码在更新站点时更容易更改，因此最好不要缓存它们。（但如果您的站点没有快速更改，则没有用！）

# java - hibernate性能问题，坚持一一还是群发？

> ID：10274124
> 
> 赞同：6
> 
> 时间：2012-04-23T02:27:41.633
> 
> 标签：java, database, hibernate, persistence

我有一个 ~6GB 的文本文件，我需要对其进行解析并在以后保留。通过“解析”，我正在从文件中读取一行（通常为 2000 个字符），从该行创建一个 Car 对象，然后我将其持久化。

我正在使用生产者消费者模式来解析和持久化，并想知道一次持久化一个对象或一次提交 1000 个（或任何其他数量）是否有任何区别（出于性能原因）？

目前，坚持一切（300 万行）需要我 2 小时以上的时间，而且对我来说似乎时间太多（或者我可能错了）。

目前我正在这样做：

```
public void persistCar(Car car) throws Exception
{
    try
    {
        carDAO.beginTransaction();  //get hibernate session...

        //do all save here.

        carDAO.commitTransaction(); // commit the session

    }catch(Exception e)
    {
        carDAO.rollback();
        e.printStackTrace(); 
    }
    finally
    {
        carDAO.close();
    }
} 
```

在我进行任何设计更改之前，我想知道这个设计是否更好（或不更好）是否有原因，如果是这样，cars.size() 应该是什么？此外，会话的打开/关闭是否被认为是昂贵的？

```
public void persistCars(List<Car> cars) throws Exception
{
    try
    {
        carDAO.beginTransaction();  //get hibernate session...
        for (Car car : cars)    
        //do all save here.

        carDAO.commitTransaction(); // commit the session

    }catch(Exception e)
    {
        carDAO.rollback();
        e.printStackTrace(); 
    }
    finally
    {
        carDAO.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T02:51:46.963

传统上，hibernate 不能很好地处理批量插入。有一些方法可以将其优化到一定程度。

以[API Docs](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/batch.html#batch-inserts)中的这个例子为例，

```
Session session = sessionFactory.openSession();
Transaction tx = session.beginTransaction();

for ( int i=0; i<100000; i++ ) {
    Customer customer = new Customer(.....);
    session.save(customer);
    if ( i % 20 == 0 ) { //20, same as the JDBC batch size
        //flush a batch of inserts and release memory:
        session.flush();
        session.clear();
    }
}

tx.commit();
session.close(); 
```

在上面的示例中，如果在插入 20 个条目后刷新会话，这将使操作更快一点。

这是[一篇有趣的文章](http://abramsm.wordpress.com/2008/04/23/hibernate-batch-processing-why-you-may-not-be-using-it-even-if-you-think-you-are/)，讨论了同样的事情。

我们已经使用存储过程成功地实现了另一种批量插入方式。在这种情况下，您会将参数作为“|”传递给 SP 分隔列表，并将插入脚本写入 SP 内。这里的代码可能看起来有点复杂，但非常有效。

# android - Android：在异步任务中使用可运行对象时出错

> ID：10274133
> 
> 赞同：1
> 
> 时间：2012-04-23T02:28:43.903
> 
> 标签：android

我想每秒钟更新一次活动中的变量，为此我正在使用异步任务和其中的可运行文件。我不断收到此错误消息“无法在以不同方法定义的内部类中引用非最终变量 myRunnable”。当我将声明更改为 final 时，它显示“局部变量 myRunnable 可能尚未初始化”。我该如何纠正错误？有没有更好的方法来做我想做的事？

```
 import android.os.AsyncTask;
    import android.os.Handler;

    public class Timer extends AsyncTask<String, Process, Void>{
static int seconds=0;
TimerTask timer;
static int minutes=0;
static int hours=0;
private String timeTaken;
public Handler myhandler = new Handler();

@Override
protected Void doInBackground(String... params) {

   final Runnable myRunnable = new Runnable() {

@Override
public void run() {
    ......
......
    ...... 
myhandler.postDelayed(myRunnable, 1000);
}
};

    return null;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:09:50.877

像这样的东西而不是使用 AsyncTask 怎么样（尽管可以在 AsyncTask 中完成类似的事情，并且因为它在另一个线程中运行，我可以简单地使用 Thread.sleep(...) 阻止这个工作线程而不是执行整个 Runnable事物...

```
private myhandler = new Handler();
private boolean periodicCallsEnabled=false;

public boolean isPeriodicUpdatingEnabled(){
    return periodicCallsEnabled;
}

public void startPeriodicUpdates(){ //CALL THIS IN ORDER TO START THE PERIODIC UPDATES
    periodicCallsEnabled=true;
    periodicCall();
}

public void stopPeriodicUpdates(){ //CALL THIS TO STOP THEM
    periodicCallsEnabled=false;
    myhandler.removeCallbacksAndMessages(null);
}

void periodicCall(){
    if(periodicCallsEnabled){

        //INSERT CUSTOM CODE HERE TO BE EXECUTED EVERY SECOND
        // ......

        myhandler.postDelayed(new Runnable(){
            public void run(){
                periodicCall();
            }
        },1000);
    }
} 
```

# flash - 如何识别 safari 的“flash 插件”并获取其 pid

> ID：10274134
> 
> 赞同：1
> 
> 时间：2012-04-23T02:28:53.493
> 
> 标签：flash, scripting, safari, pid

我有 64 位 safari 运行 flash 视频（OSX 雪豹）。我尝试在 shell 窗口中使用 ps 命令列出所有进程。Safari 的 Flash 出现为“插件进程”但是，如果有其他插件正在运行，它们似乎都被标记为“插件进程”。有没有办法唯一识别flash插件？Activity Monitor 神奇地将其标记为“Flash Player（Safari Internet 插件）”我希望我可以控制的东西（ps、carbon、cocoa 等）具有相同的行为。

背景：我实际上是使用 sysctrl 以编程方式执行此操作，并且遇到与使用 ps 相同的问题。

# java - GUI 选择和键入文件名之间的 FileChooser 差异

> ID：10274142
> 
> 赞同：4
> 
> 时间：2012-04-23T02:30:21.367
> 
> 标签：java, swing, jfilechooser

我有一个使用 JFileChooser 选择目录的应用程序。在这个应用程序中，我不想尝试处理符号链接，我想在多个平台上运行。因此，代码尝试确定所选文件是否为符号链接，如果是，则显示错误对话框。

这是从 JFileChooser 获取文件的代码。

```
public File getDirectoryChoice(String buttonText, String currentDirectory)
{
  File chosenFile = null;
  if (fileChooser == null) { fileChooser = new JFileChooser(); }
  if (currentDirectory != null) 
    { fileChooser.setCurrentDirectory(new File(currentDirectory)); }
  fileChooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
  fileChooser.setApproveButtonText(buttonText);
  int returnValue = fileChooser.showOpenDialog(mainFrame);
  if (returnValue == JFileChooser.APPROVE_OPTION)
  {
    chosenFile = fileChooser.getSelectedFile();
  }
  return chosenFile;
} 
```

这是我用来确定所选文件是否为符号链接的代码：

```
public static boolean isSymbolic(File f)
{
  try
  { 
    String absolute = f.getAbsolutePath();
    String canonical = f.getCanonicalPath();
    return !(absolute.equals(canonical));
  }
  catch (IOException ioe)
  {
    return false;
  }
} 
```

在 Windows 7 上：如果用户使用鼠标选择一个给定的目录，这可以正常工作。如果用户在文件名文本框中键入相同的目录名，则第二个代码片段表明绝对路径和规范路径不同。用户是否输入尾部反斜杠并不重要。

当我在'return'语句行的调试器中停止这个并查看两个字符串的详细信息时，绝对路径字符串的哈希值是一个很大的负数，而规范字符串的哈希值为0。我不知道为什么会这样，实际上想知道这是否是（eclipse）调试器的怪癖。

谁能告诉我为什么会有这种差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T03:03:35.957

仔细检查您输入的字符串是否与 JFileChooser 返回的字符串*完全相同。*

我试过了，没想到我打字了`c:\temp`。就像在您的测试中一样，`isSymbolic()`方法返回`true`. 然而，经过仔细检查，我注意到当我在文件选择器中选择此路径时，它`C:\temp`反而返回（注意大写`C`）。

所以即使它很丑，你也可以添加一个像这样的特殊情况：

```
 if (System.getProperty("os.name").toLowerCase().indexOf("win") >= 0)
        return !(absolute.equalsIgnoreCase(canonical));
    else
        return !(absolute.equals(canonical)); 
```

您可能还想查看这个相关问题：“ [Java 1.6 - 确定符号链接](https://stackoverflow.com/questions/813710/java-1-6-determine-symbolic-links)”。那里有很多答案，您可能会觉得有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:53:26.083

如果您在 Ecipe 的“表达式”窗口中添加`absolute.hashCode()`和，您应该会看到正确的值 - 两者都不为零。`canonical.hashCode()`字符串的`hash`成员初始化为 0。然后在`hashCode()`执行时更新为正确的值。

所以你可能看到的是字符串的计算哈希值，`absolute`而不是字符串的计算哈希值`canonical`。

放一个断点`String.hashCode()`，你会`getCanonicalPath()`在 Windows 触发器上看到它`absolute.hashCode()`。Windows上的实现似乎`getCanonicalPath()`缓存了规范化的结果。介于两者之间的某个地方，`WinNTFileSystem.canonicalize()`缓存结果映射中的查找会触发`absolute.hashCode()`。

所以在你在`return`语句中设置的断点处`isSymbolic()`，`absolute`有一个有效的哈希码并且`canonical`它仍然为零。

这是演示`absolute.hashCode()`执行结果的堆栈跟踪`f.getCanonicalPath()`：

```
String.hashCode() line: 1482 [local variables unavailable]  
ExpiringCache$1(HashMap<K,V>).getEntry(Object) line: 344    
ExpiringCache$1(LinkedHashMap<K,V>).get(Object) line: 280   
ExpiringCache.entryFor(String) line: 83 
ExpiringCache.get(String) line: 58  
WinNTFileSystem(Win32FileSystem).canonicalize(String) line: 377 
File.getCanonicalPath() line: 559   
Test.isSymbolic(File) line: 25  
Test.main(String[]) line: 16 
```

# jquery-plugins - jQuery idTabs 插件标签点击功能

> ID：10274144
> 
> 赞同：2
> 
> 时间：2012-04-23T02:30:28.303
> 
> 标签：jquery-plugins, jquery, idtabs

使用 idTabs jQuery 插件时，如何添加单击选项卡时调用的函数？文档说明了这一点（但没有给出示例）：

```
click (function) 
Function will be called when a tab is clicked. ex: $(...).idTabs(foo) 
If the function returns true, idTabs will show/hide content (as usual). 
If the function returns false, idTabs will not take any action. 
The function is passed four variables: 
  The id of the element to be shown 
  an array of all id's that can be shown 
  the element containing the tabs 
  and the current settings 
```

我的代码：

```
<ul class="idTabs"> 
  <li><a href="#jquery">jQuery</a></li> 
  <li><a href="#official">Tabs 3</a></li> 
</ul> 
<div id="jquery">If you haven't checked out ...</div> 
<div id="official">idTabs is only a simple ...</div>

function tabChanged(id, tabs, parent, settings) {
    alert('tabChanged');
    return true;
}

$(".idTabs").idTabs(tabChanged); 
```

单击选项卡时没有任何反应 - 我希望看到一条警报消息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-23T00:29:07.147

你快到了。你可以这样做：

```
$(".idTabs").idTabs({click: tabChanged}); 
```

或者您可以使用匿名函数：

```
$('.idTabs').idTabs({
    click: function(id, all, container, settings){
        alert('tabChanged');
        return true;
    }
}); 
```

# vim - vim 行号 - 默认情况下如何打开它们？

> ID：10274146
> 
> 赞同：365
> 
> 时间：2012-04-23T02:30:37.163
> 
> 标签：vim, vi, editing, line-numbers

我可以`:set number`从我正在编辑的文件中，但我怎样才能让它们始终处于默认状态？

* * *

## 回答 #1

> 赞同：519
> 
> 时间：2012-04-23T02:32:58.660

添加`set number`到您`.vimrc`的主目录中的文件。
如果该`.vimrc`文件不在您的主目录中，请创建一个 `vim .vimrc`并添加您想要打开的命令。

[这是一个](http://vim.wikia.com/wiki/Open_vimrc_file)解释 vimrc 以及如何使用它的站点。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2015-06-28T23:48:30.657

**要更改默认设置以在 vi/vim 中显示行号：**

```
vi ~/.vimrc 
```

然后将以下行添加到文件中：

```
set number 
```

我们可以`source ~/.vimrc`或者保存并退出`:wq`，现在未来的 vi/vim 会话将有编号:)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-10-09T14:28:29.317

`set nu set ai set tabstop=4 set ls=2 set autoindent`

在你的 .vimrc 文件中添加上面的代码。如果 .vimrc 文件不存在，请在您的主目录（/home/用户名）中创建

set nu -> 这使 Vim 显示行号

set ai -> 这使 Vim 启用自动缩进

set ls=2 -> 这使 Vim 显示状态行

set tabstop=4 -> 这使得 Vim 设置长度为 4 个空格的制表符（默认为 8 个）

[![在此处输入图像描述](../Images/458a911df9f5ffcdcbf4ab396f99309e.png)](https://i.stack.imgur.com/1TXfT.png)

[![在此处输入图像描述](../Images/ce85c7fec1b0c06f12f9a482ca4565eb.png)](https://i.stack.imgur.com/F5cSS.png)

文件名也将显示。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-03-06T17:56:12.433

终端 > `su`> `password`>`vim /etc/vimrc`

单击此处并按照行号 (13) 进行编辑：

```
set nu 
```

![单击此处并编辑为](../Images/c492c24b58cbdc6d31b1df1057e81b30.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-11-19T03:40:59.360

我的主目录中没有 .vimrc 文件。我创建了一个，添加了这一行：

```
set number 
```

这解决了问题。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2019-03-27T13:39:25.483

如果你不想添加/编辑 .vimrc，你可以从

```
vi "+set number" /path/to/file 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-03-10T19:49:05.253

我正在使用 Debian 7 64 位。

我的主文件夹中没有 .vimrc 文件。我创建了一个并且能够为 vim 设置用户默认值。

但是，对于 Debian 7，另一种方法是编辑 /etc/vim/vimrc

这是该文件中的注释块：

```
" All system-wide defaults are set in $VIMRUNTIME/debian.vim (usually just
" /usr/share/vim/vimcurrent/debian.vim) and sourced by the call to :runtime
" you can find below.  If you wish to change any of those settings, you should
" do it in this file (/etc/vim/vimrc), since debian.vim will be overwritten
" everytime an upgrade of the vim packages is performed.  It is recommended to
" make changes after sourcing debian.vim since it alters the value of the
" 'compatible' option. 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-10-04T05:50:49.843

在主目录中，您将在该文件中找到一个名为“.vimrc”的文件，添加此代码“ **set nu** ”并保存并退出并打开新的 vi 文件，您将在该文件中找到行号。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-17T23:09:38.557

将您想要默认拥有的任何命令添加到您的文件（在 Windows 系统上`~/.vimrc`命名）`_vimrc`

# c++ - Lua - 对表中函数的引用

> ID：10274150
> 
> 赞同：1
> 
> 时间：2012-04-23T02:30:51.630
> 
> 标签：c++, lua, luajit

如果我有一个`Table`包含 functions `getValue()`,`setValue()`等的全局表。我可以存储对的引用`Table.getValue`还是必须存储对的引用`Table`然后调用成员函数？

```
lua_getglobal(L, "Table");

lua_getfield(L, -1, "getValue");
getValueRef = luaL_ref(L, LUA_REGISTRYINDEX);

lua_getfield(L, -1, "setValue");
setValueRef = luaL_ref(L, LUA_REGISTRYINDEX);

lua_pop(L, 1); // Pop "Table" off of the stack 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:59:54.907

Lua 中没有“成员函数”之类的东西。有一个简单的函数，它是一个*值*。您可以将函数存储在任何地方，直接在全局表中，在您创建的其他表中，等等。函数（以及与此相关的所有 Lua 值）与它们碰巧存储的任何表都没有关联。

如果您想在某处存储一个函数（创建“引用”只不过是将其存储在某处），您可以。

仅供参考：直接将注册表用于 Lua “引用”不是一个好主意。我建议创建一个存储在注册表中特定插槽中的表以供您参考。当然，我会说在你正在做的事情中使用“参考”不是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T05:06:20.230

您始终可以创建一个“绑定”函数作为闭包：

```
local tbl=Table
local function TableGetValue(key)
  return tbl:getValue(key)
end

do_stuff_with(TableGetValue) 
```

# c# - 当 xml 可以不同时选择具有特定子节点的节点

> ID：10274151
> 
> 赞同：0
> 
> 时间：2012-04-23T02:30:53.970
> 
> 标签：c#, xml, xpath, linq-to-xml, xelement

我有可以工作的代码，但我想看看是否有比我现有的更好更好的解决方案（我确定有！）。我有一个 web 服务，它需要返回所有具有一个名为“updatedDate”的子节点的节点，其日期比传入的日期更新。对于每个查询，我返回的 xml 可能不同，它们唯一的共同点是 updatedDate 节点。我目前正在使用带有 xpath 的 linq to xml，代码如下：

```
XDocument allNodes = XDocument.Parse(result);

IEnumerable<XElement> nodesWithDates = allNodes.XPathSelectElements("//updatedDate");

XElement updatedNodes = new XElement("UpdatedNodes");

foreach (XElement node in nodesWithDates)
{
    DateTime date;

    if (DateTime.TryParse(node.Value, out date))
    {
        if (date > dateToCompare)
        {
            updatedNodes.Add(node.Parent);
        }
    }
}

return updatedNodes; 
```

关于如何改进它的任何想法？

谢谢，

安妮莉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:10:29.317

一种稍微不同且更紧凑的方法：

```
DateTime date;
var nodes = allNodes.Descendants("updatedDate")
                    .Where(x => DateTime.TryParse(x.Value, out date)
                                && date > dateToCompare)
                    .Select(x => x.Parent);

XElement updatedNodes = new XElement("UpdatedNodes", nodes); 
```

# c++ - 如何使用 gloox lib 获取活动房间列表？

> ID：10274153
> 
> 赞同：1
> 
> 时间：2012-04-23T02:31:09.437
> 
> 标签：c++, xmpp, multi-user, gloox

我正在使用 gloox 1.0 编写一个基于 xmpp 的聊天客户端。我找不到使用 gloox 在服务器上获取活动房间列表（其他用户创建的房间）的方法。我使用 openfire 作为我的本地服务器。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T22:00:32.393

您需要创建一个[Disco对象和一个继承](http://camaya.net/api/gloox-1.0/classgloox_1_1Disco.html)[DiscoHandler](http://camaya.net/api/gloox-1.0-beta7/classgloox_1_1DiscoHandler.html)的自定义类。

要查询您调用的列表[getDiscoItems(muc_server_jid, ...)](http://camaya.net/api/gloox-1.0-beta7/classgloox_1_1Disco.html#a4)。你的 DiscoHandler 应该实现[handleDiscoItems()](http://camaya.net/api/gloox-1.0-beta7/classgloox_1_1DiscoHandler.html#a2)，它接收一个[Disco::Items](http://camaya.net/api/gloox-1.0-beta7/classgloox_1_1Disco_1_1Items.html)对象`items`。

您可以使用 items.itemList() 获取指向[Disco::Item](http://camaya.net/api/gloox-1.0-beta7/classgloox_1_1Disco_1_1Item.html)对象的指针的[std::list 。](http://www.cplusplus.com/reference/stl/list/)对于每个 Disco::Item，您可以调用 item.jid() 和 item.name() 来获取房间的地址和（可选）名称。

# java - Android：从 javascript 传递变量调用 java 中的函数

> ID：10274155
> 
> 赞同：1
> 
> 时间：2012-04-23T02:31:22.860
> 
> 标签：java, javascript, android, variables, var

我在这里有点迷路......我一直在网上寻找，但我没有找到任何像我正在寻找的东西。这就是我在java中所做的

```
ClsAccessor accessors = new ClsAccessor();

class ClsAccessor{
    public String WorkingWithJason(String Json){
        String JsonVar;
        JsonVar ="";
        if (Json != ""){
            generateNoteOnSD("JsonFile.txt", Json);
        }
        JsonVar = getfileFromSDCard("JsonFile.txt");
        return JsonVar;
    }
    public void generateNoteOnSD(String Name, String data){
    //....
    }

    public String getfileFromSDCard(String Name){
    //....
    String data;
    //data = ".....";
    return data;
    }
}

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.addJavascriptInterface(accessors, "accessor");
    mWebView.loadUrl("file:///android_asset/Main.html");
    mWebView.setWebViewClient(new HelloWebViewClient());

} 
```

更何况这是我在 javascript 上所需要的

```
var text = "";
function SendData(RecievedTextVariable){
    var text = accessor.WorkingWithJason(RecievedTextVariablejsn);  
    document//accessor.outWorkingWithJason(textjsn);  
    $("#main_div").html("bbbbbb bbbbbbbb"+text);
} 
```

任何想法或任何例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:38:24.510

```
mWebView.addJavascriptInterface(new YourInterface(), "something");

class YourInterface{
    public void out(String value){
        // do something
    }
} 
```

而不是`document.out(text)`使用`something.out(text)`.

# jquery - 简单的计算器 jquery 脚本

> ID：10274157
> 
> 赞同：1
> 
> 时间：2012-04-23T02:31:27.060
> 
> 标签：jquery

所以我有一个非常简单的脚本，我正在编写一个计算器，这样客户就可以看到服务的成本，然后根据文本输入的更改更新结果。问题是在第一次绕过后它会停止正确计算值。在这里，帮助赞赏。

```
<script>
$(function(){

var one=0;
var two=0;
var three=0;
$("input:text").change(function(){
if($(this).val() == $('#first').val())
{ 
 one = parseInt($(this).val());

}
 else if($(this).val() == $('#second').val()){

two = parseInt($(this).val());

 }
 else if($(this).val() == $('#third').val()){

three = parseInt($(this).val());

 }

});

$('input:text').change(function(){

$('#result').text(one+two+three);

});

});

</script> 
```

和形式：

```
<div id="container">
<form action="something.html" id="subit">
<label for="first">put numbers</label><input type="text" id="first"/>
<label for="second">more numbers</label><input type="text" id="second" value="0"/>
<label for="third">and more numbers</label><input type="text" id="third" value="0"/>
<input type="submit" />
</form>
<div id="result"></>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:47:04.290

试试这个代码

```
$(document).ready(function() {
    var textboxes = $("#container input:text");
    textboxes.on("keyup", function() {
        var amt = 0;
        textboxes.each(function() {
            amt += +$(this).val();
        });
        $("#result").html(amt);
    });
});​ 
```

工作小提琴：http: [//jsfiddle.net/naveen/87p53/](http://jsfiddle.net/naveen/87p53/)

* * *

至于您的代码，请在您的代码中更改这些内容

一种。比较 ids 而不是值，这样更安全。
湾。删除第二个更改功能。根本不需要。

```
$(function() {
    var one = 0;
    var two = 0;
    var three = 0;
    $("input:text").change(function() {
        if (this.id == "first") {
            one = parseInt($(this).val());
        }
        else if (this.id == "second") {
            two = parseInt($(this).val());
        }
        else if (this.id == "third") {
            three = parseInt($(this).val());
        }
        $('#result').html(one + two + three);
    });
});​ 
```

# java - 如何刷新 Java 小程序？

> ID：10274159
> 
> 赞同：1
> 
> 时间：2012-04-23T02:31:29.883
> 
> 标签：java, swing, user-interface, layout, applet

我有一个 Java 小程序，其中有一个 JButton。但是，我在此小程序中显示了一个图表，并希望在按下该按钮时刷新小程序。有什么可以做到这一点吗？

我已经尝试添加这个：

```
setVisible(false);
//function that call a method
setVisible(true); 
```

但它没有用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:21:02.887

对图表进行必要的更改并调用组件的 repaint() 方法。

```
Chart c = new Chart(); // Chart extends Component (I assume)
// Call your update methods to make necessary changes
c.repaint(); // Forces the chart to be repainted 
```

编辑：您可能需要调用 validate() 方法；我不完全确定，现在无法测试。

# c++ - 如何在 C++ 中找到二维数组的大小

> ID：10274162
> 
> 赞同：31
> 
> 时间：2012-04-23T02:32:11.357
> 
> 标签：c++, arrays, size

如何在 C++ 中找到二维数组的大小？是否有任何预定义的函数`sizeof`来确定数组的大小？

另外，谁能告诉我如何`getvalue`在尝试获取未设置的值时检测数组方法中的错误？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2014-07-27T19:19:22.940

假设您只被允许使用数组，那么您可以通过以下方式找到二维数组的大小。

```
 int ary[][5] = { {1, 2, 3, 4, 5},
                   {6, 7, 8, 9, 0}
                 };

  int rows =  sizeof ary / sizeof ary[0]; // 2 rows  

  int cols = sizeof ary[0] / sizeof(int); // 5 cols 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-09-27T21:34:51.147

```
#include <bits/stdc++.h>
using namespace std;

int main(int argc, char const *argv[])
{
    int arr[6][5] = {
        {1,2,3,4,5},
        {1,2,3,4,5},
        {1,2,3,4,5},
        {1,2,3,4,5},
        {1,2,3,4,5},
        {1,2,3,4,5}
    };
    int rows = sizeof(arr)/sizeof(arr[0]);
    int cols = sizeof(arr[0])/sizeof(arr[0][0]);
    cout<<rows<<" "<<cols<<endl;
    return 0;
} 
```

输出：6 5

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-04-23T02:36:31.500

使用`std::vector`.

```
std::vector< std::vector<int> > my_array; /* 2D Array */

my_array.size(); /* size of y */
my_array[0].size(); /* size of x */ 
```

或者，如果你只能使用一个好的 ol' 数组，你可以使用`sizeof`.

```
sizeof( my_array ); /* y size */
sizeof( my_array[0] ); /* x size */ 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-04-23T02:35:46.207

```
sizeof(yourObj)/sizeOf(yourObj[0]) 
```

应该做的伎俩

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-24T05:52:39.340

> 与 _countof() 宏一起，您可以使用指针表示法来引用数组大小​​，其中数组名称本身指的是行，数组名称附加的间接运算符指的是列。

```
#include <iostream>
#include <iomanip>

using namespace std;

int main()
{
    int beans[3][4]{
        { 1, 2, 3, 4 }, 
        { 5, 6, 7, 8 }, 
        { 9, 10, 11, 12 }
    };

    cout << "Row size = " << _countof(beans)  // Output row size
        << "\nColumn size = " << _countof(*beans);  // Output column size
    cout << endl;

    // Used in a for loop with a pointer.

    int(*pbeans)[4]{ beans };

    for (int i{}; i < _countof(beans); ++i) {

        cout << endl;

        for (int j{}; j < _countof(*beans); ++j) {

            cout << setw(4) << pbeans[i][j];
        }
    };

    cout << endl;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-19T20:06:38.197

```
#include<iostream>
using namespace std ;
int main()
{
    int A[3][4] = { {1,2,3,4} , {4,5,7,8} , {9,10,11,12} } ;
    for(int rows=0 ; rows<sizeof(A)/sizeof(*A) ; rows++)
    {
        for(int columns=0 ; columns< sizeof(*A) / sizeof(*A[0]) ; columns++)
        {
            cout<<A[rows][columns] <<"\t" ;
        }
        cout<<endl ;
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-21T13:23:36.487

这是第一部分的一个可能的解决方案

```
#include<iostream>

using namespace std;
int main()
{
    int marks[][4] = {
                      10, 20, 30, 50,
                      40, 50, 60, 60,
                      10, 20, 10, 70
                     };

int rows =  sizeof(marks)/sizeof(marks[0]);
int cols = sizeof(marks)/(sizeof(int)*rows);

    for(int i=0; i<rows; i++)
    {
        for(int j=0; j<cols; j++)
        {
            cout<<marks[i][j]<<" ";
        }
        cout<<endl;
    }

    return 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-23T03:53:31.917

上面的其他答案已经回答了您的第一个问题。至于您的第二个问题，如何检测获取未设置值的错误，我不确定您的意思是以下哪种情况：

1.  使用无效索引访问数组元素：
    如果使用std::vector，可以使用vector::at函数代替[]运算符来获取值，如果索引无效，则会抛出out_of_range异常。

2.  访问有效索引，但尚未设置元素：据我所知，没有直接的方法。但是，以下常见做法可能会解决您的问题： (1) 将所有元素初始化为您确定不可能拥有的值。例如，如果您正在处理正整数，请将所有元素设置为 -1，这样当您发现它为 -1 时，您就知道该值尚未设置。(2)。只需使用相同大小的 bool 数组来指示是否设置了相同索引的元素，这适用于所有值“可能”的情况。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-14T14:23:16.477

**int arr[5][4]；**

对于行下标（4 提高到 2，包括 cmath 以使用**pow**）：

```
sizeof(arr1)/pow(4,2) 
```

列下标：

```
sizeof(*arr1)/4 
```

4 表示 4 个字节，大小为 int。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-05-08T07:05:38.133

这也可以尝试获取二维数组的行列大小

```
matrix = [[1,2,3,4],[5,6,7,8],[9,10,11,12]] 
int rows =  matrix.size();
int cols = matrix[0].size();
cout<<rows<< " "<<cols; 
```

输出：3 4

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-03T03:34:17.517

```
int rows = sizeof(arr)/sizeof(arr[0]);
int cols = sizeof(arr[0])/sizeof(arr[0][0]); 
```

# sql-server - 如何从另一个表中删除不匹配记录的记录？

> ID：10274163
> 
> 赞同：0
> 
> 时间：2012-04-23T02:32:23.483
> 
> 标签：sql-server, view

我有以下视图（没有 schyrsem 的学生）来显示 SchYrSem 表中没有相关记录的记录列表：

```
SELECT Students.IDNo, Students.LastName, Students.FirstName
FROM Students LEFT JOIN SchYrSem ON Students.[IDNo] = SchYrSem.[IDNo]
WHERE (((SchYrSem.IDNo) Is Null)); 
```

当我删除记录时，它说：

视图或函数 'students w/o schyrsem' 不可更新，因为修改会影响多个基表。

知道如何在 SchYrSem 表中没有匹配记录的情况下从学生表中删除记录吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:41:21.897

```
DELETE s
  FROM dbo.Students AS s 
  LEFT OUTER JOIN dbo.SchYrSem AS ss
  ON ss.IDNo = s.IDNo
  WHERE ss.IDNo IS NULL; 
```

或者

```
DELETE s    
  FROM dbo.Students AS s   
  WHERE NOT EXISTS   
  (
     SELECT 1
      FROM dbo.SchYrSem
      WHERE IDNo = s.IDNo   
  ); 
```

恕我直言，您不应该尝试从视图中删除一行。

# php - 无法在 CodeIgniter 上为 Google oauth 获取 $_GET['code']

> ID：10274164
> 
> 赞同：0
> 
> 时间：2012-04-23T02:32:44.073
> 
> 标签：php, codeigniter, oauth

我正在尝试将此代码用于 CodeIgniter。如果您单击带有“ソース”的选项卡之一，那么您将能够看到原始源代码。当我使用原始来源时，它工作正常。

[http://dotinstall.com/lessons/google_connect_php/5017](http://dotinstall.com/lessons/google_connect_php/5017)

当我使用它时，我似乎无法获取“代码”，`$_GET['code']`因此我被重定向到登录页面..

控制器

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Welcome extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $this->config->load('google_connect');// this one has client_id and client_secret
        $this->load->helper('functions');
        $this->load->helper('url');
        $this->load->model('mgoogle_connect');
        session_start();
    }

    public function index()
    {
        //$data['client_id'] =$this->config->item('CLIENT_ID');
        if (empty($_SESSION['user'])) 
        {
            redirect('welcome/login','refresh');
        }
        $this->load->view('index');
    }

    function redirect()
    {
        $client_id=$this->config->item('client_id');
        $client_secret = $this->config->item('client_secret');
        if (empty($_GET['code'])) 
        {
            // 認証前の処理

            // CSRF対策
            $_SESSION['state'] = sha1(uniqid(mt_rand(), true));

            // 認証ダイアログの作成
            $params = array(
                'client_id' => $client_id,
                'redirect_uri' => site_url('welcome/redirect'),
                'state' => $_SESSION['state'],
                'approval_prompt' => 'force',
                'scope' => 'https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email',
                'response_type' => 'code'
            );
            $url = "https://accounts.google.com/o/oauth2/auth?".http_build_query($params);

            // go to google
            redirect($url);
            //header('Location: '.$url);
            //exit;
        } 
        else 
        {
            // 認証後の処理

            // CSRF対策
            if ($_SESSION['state'] != $_GET['state']) {
                echo "何がおかしい！";
                exit;
            }

            // get profile info

            $params = array(
                'client_id' => $client_id,
                'client_secret' => $client_secret,
                'code' => $_GET['code'],
                'redirect_uri' => site_url('welcome/redirect'),
                'grant_type' => 'authorization_code'
            );
            $url = 'https://accounts.google.com/o/oauth2/token';

            $curl = curl_init();
            curl_setopt($curl, CURLOPT_URL, $url);
            curl_setopt($curl, CURLOPT_POST, 1);
            curl_setopt($curl, CURLOPT_POSTFIELDS, http_build_query($params));
            curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

            $rs = curl_exec($curl);
            curl_close($curl);

            $json = json_decode($rs);

            $url = 'https://www.googleapis.com/oauth2/v1/userinfo?access_token='.$json->access_token;
            $me = json_decode(file_get_contents($url));

            // enter to DB

            //$user = $this->mgoogle_connect->insertuser($me);

            $data['user']=$me;

            // login 
            if (!empty($user)) {
                session_regenerate_id(true);
                $_SESSION['user'] = $user;
            }

            // send it to login
            redirect('/');
        }
    }

    function login()
    {
        $data['client_id']=$this->config->item('client_id');
        $data['client_secret'] = $this->config->item('client_secret');
        $this->load->view('login',$data);
    }

    function logout()
    {

        $_SESSION = array();

        if (isset($_COOKIE[session_name()])) {
            setcookie(session_name(), '', time() - 86400, '/ci210/');
        }

        session_destroy();

        redirect('/');
    }
}

/* End of file welcome.php */
/* Location: ./application/controllers/welcome.php */ 
```

助手/functions_helper.php

```
<?php

function h($s) {
    return htmlspecialchars($s);
}

function r($s) {
    return mysql_real_escape_string($s);
}

function jump($s) {
    redirect (site_url($s));
    //header('Location: '.site_url().$s);
    //exit;
} 
```

查看/login.php

```
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>login</title>
</head>
<body>
<p><a href="redirect">Login with Google account</a></p>

</body>
</html> 
```

意见/index.php

```
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>HOME</title>
</head>
<body>
<p><?php echo h($_SESSION['user']['google_name']); ?>（&lt;?php echo h($_SESSION['user']['google_email']); ?>）You are logged in.</p>
<p><a href="logout">[logout]</a></p

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:46:28.300

尝试在`application/config/config.php`. 默认情况下，CodeIgniter 禁用此功能。

```
$config['enable_query_strings'] = TRUE; 
```

# javascript - Jquery - 编辑对象参数

> ID：10274168
> 
> 赞同：0
> 
> 时间：2012-04-23T02:33:26.933
> 
> 标签：javascript, jquery, html, flash, object

我有一个对象，我正在尝试使用 jquery 快速更改参数值，但参数不断返回 null。`code`带回参数列表，但我似乎无法更改任何内容。即使我把它放在它的参数基础上来改变一切——它仍然返回为空。

除此之外，它可以工作，但如果你仔细观察，你会在左上角看到一些黑色的 api 错误消息。我添加了一个 pastebin，这样你就可以看到我在做什么。

[http://jsfiddle.net/f4qMe/](http://jsfiddle.net/f4qMe/)

下面是我正在运行以尝试更改对象参数的 javascript。该对象称为 (id) `twitchTV`。

```
function test(){             
    var data = "http://www.twitch.tv/widgets/live_embed_player.swf?channel=day9tv";
    var src = "hostname=www.twitch.tv&auto_play=true&start_volume=25&channel=day9tv";

    var code = $("#twitchTV").html();
    var newcode = $("param", code).attr("value", src).html();
    $("#twitchTV").html(newcode);
    $("#twitchTV").attr("data", data);
}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:44:14.843

你的问题可能在这里：

```
var code = $("#twitchTV").html();
var newcode = $("param", code).attr("value", src).html(); 
```

`html()`返回一个字符串，所以`code`它是一个字符串，您将它用作`newcode`需要 DOM 元素或 jquery 对象的上下文。

# mercurial - 查看/撤消 Hg 提交？

> ID：10274170
> 
> 赞同：1
> 
> 时间：2012-04-23T02:33:41.893
> 
> 标签：mercurial, commit, pull

*   如何查看即将被推送的提交？

*   我做了一个本地提交。拉变化。不，它需要合并。我不想合并，想撤消提交、拉取、更新更改，然后再次提交。

我该怎么做，因为`rollback`只撤消最后一个拉命令？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T04:23:02.140

这就是 Mercurial 的工作方式，您不应该以直线历史的名义与之抗争，但有一些工具可以编辑历史。启用`rebase`扩展并`hg rebase`在拉取后运行。在您描述的简单情况下，它将自动将您的本地提交移动到提示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T09:17:17.893

> *   How do I view commits that are about to be pushed?

Use `hg outgoing`. That shows what `hg push` would have sent to the server. The opposite command is `hg incoming`, which shows what `hg pull` would have retrieved.

> *   I'd made a local commit. Pull a change. And no it requires a merge. I prefer not to merge and would like to undo the commit, Pull, Update changes, Then commit again.

Like Mark says, you're looking for the [rebase extension](http://mercurial.selenic.com/wiki/RebaseExtension#A_common_case). Enable it with

```
[extensions]
rebase = 
```

in your config file and then run

```
$ hg pull
$ hg rebase 
```

to move your local work (this can be multiple changesets, not just a single as in your work around!) on top of the changesets you just pulled down.

> How do I do it since rollback only undo the last command which is pull?

**Please** don't use `hg rollback` as a general undo mechanism. It's a low-level command that should not be used as much as it is, especially not by new users. The rollback command removes the last *transaction* from the repository — a transaction in Mercurial is typically the last changeset you made *or* the last changesets (plural) you pulled into the repository.

# javascript - 我的网站上嵌入的 Flash 对象是否会成为 Javascript 关键事件的问题？

> ID：10274171
> 
> 赞同：4
> 
> 时间：2012-04-23T02:33:54.353
> 
> 标签：javascript, flash, keyboard

> **可能重复：**
> [如何使 flex 仅在有用时使用鼠标滚动和键盘事件，否则将其传递给浏览器？](https://stackoverflow.com/questions/4906227/how-do-i-make-flex-only-consume-mouse-scroll-and-keyboard-events-when-its-usefu)

我正在制作一个支持热键的 Web 应用程序，但该应用程序以 justin.tv 流嵌入的形式大量使用了 Flash。我担心一旦用户按下播放或停止或以任何其他方式聚焦闪存字段，它会在它们到达 Javascript 之前吃掉所有后续的关键事件。我很担心，因为我知道 YouTube flash 字段会这样做；一旦聚焦，我无法使用 CTRL+W 或 CTRL+Tab 关闭浏览器窗口进入另一个选项卡。

这是 YouTube Flash 播放器独有的吗？如果没有，我可以在 Javascript 方面做些什么来确保专注于我的应用程序，让我的热键起作用？

任何有关 Javascript 关键事件和浏览器插件主题的其他信息将不胜感激。

*PS：我知道我可以通过不可见的 div 覆盖完全拒绝对 Flash 字段的访问，但我希望允许任何用户播放/停止和控制嵌入流的音量。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T19:01:06.190

**此解决方案仅在 Windows 上的 Firefox 上进行了测试。**

主要问题似乎是从 Flash 中*删除*键盘焦点。将焦点放在*Flash*上已经有[一些关于 SO 的解决方案](https://stackoverflow.com/a/3718560)。

经过一番玩弄，我发现使用 jQuery（最新），您可以将焦点直接指向表单的文本框，它将从 Flash 中获取键盘输入的控制权。解决方案遵循以下过程：

*   `ExternalInterface`在 Flash 中向 javascript 发送命令
*   Javascript（在此示例中使用 jQuery）将焦点设置到表单文本字段
*   Javascript 从 Flash 中移除焦点（使用[此 SO 方法](https://stackoverflow.com/a/3718560)获取 Flash 对象）

这是AS3代码。（我在 Flash IDE 中进行了设置，因此如果使用外部 AS3 文件，则必须对其进行调整）：

```
import flash.events.KeyboardEvent;

stage.addEventListener(KeyboardEvent.KEY_DOWN, displayKey);

function displayKey(keyEvent:KeyboardEvent) {
    /* You can use this commented code for limiting the keys that change focus. */
    /*
    var modifier:String="";
    var keyPressed:String="";

    if (keyEvent.ctrlKey) {
        modifier="Ctrl + ";
    } else if (keyEvent.altKey) {
        modifier="Alt + ";
    } else if (keyEvent.shiftKey) {
        modifier="Shift + ";
    }

    keyPressed=keyEvent.keyCode.toString();

    // make sure to add a textfield to the stage, and name it "myTextField" to make this line work:
    myTextField.text= modifier + keyPressed;
    */

    if (ExternalInterface.available) {
        // Limit the keystrokes using javascript by using this method: 
        // ExternalInterface.call("sendToJavaScript", modifier + keyPressed );

        // Any keystroke will unfocus:
        ExternalInterface.call("sendToJavaScript", "");
    }
} 
```

示例 HTML/Javascript 代码如下；您将需要`swfobject.js`在同一目录中的文件。请注意，Flash 元素的 id 是 Fl​​ash IDE 的默认值，文本输入的 id 是`text1`.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>testFocus</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style type="text/css" media="screen">
            html, body { height:100%; background-color: #ffffff;}
            body { margin:0; padding:0; }
            #flashContent { width:100%; height:100%; }
            .focus {
                border: 10px solid #00ffff;
                background-color: #ff0000;
            }
        </style>

        <script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js" charset="utf-8"></script>
    </head>
    <body>
        <div id="outerdiv"><form id="form1">
        <input type="text" value="hmmm" id="text1">test</input>
        </form>
        </div>
<div id="flashContent">
            <object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="1024" height="768" id="testFocus" align="middle">
                <param name="movie" value="testFocus.swf" />
                <param name="quality" value="high" />
                <param name="bgcolor" value="#0033ff" />
                <param name="play" value="true" />
                <param name="loop" value="true" />
                <param name="wmode" value="window" />
                <param name="scale" value="showall" />
                <param name="menu" value="true" />
                <param name="devicefont" value="false" />
                <param name="salign" value="" />
                <param name="allowScriptAccess" value="sameDomain" />
                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="testFocus.swf" width="1024" height="768">
                    <param name="movie" value="testFocus.swf" />
                    <param name="quality" value="high" />
                    <param name="bgcolor" value="#0033ff" />
                    <param name="play" value="true" />
                    <param name="loop" value="true" />
                    <param name="wmode" value="window" />
                    <param name="scale" value="showall" />
                    <param name="menu" value="true" />
                    <param name="devicefont" value="false" />
                    <param name="salign" value="" />
                    <param name="allowScriptAccess" value="sameDomain" />
                <!--<![endif]-->
                    <a href="http://www.adobe.com/go/getflash">
                        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                    </a>
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </div>

    <script language="JavaScript">

         $(document).ready(function() {

            // just for kicks:
            $('#text1').blur(function(){
                $(this).removeClass("focus");
            });

            // handles form's text input focus (referenced by element's id):
            $('#text1').focus(function() {
                //alert('Handler for .focus() called.');
                $(this).addClass("focus");
                removeFocusOnFlash();
            });

        });

        function removeFocusOnFlash() {

            // Find the Flash container:
            var f = $('#flashContent');

            if (f) { 
                // Hide flash:
                f.tabIndex = 0; 
                f.blur();

                f.removeClass("focus");
            }
        }

        // This is called by the Flash file:
        function sendToJavaScript(value) {

            // set focus on the form's text input field: 
            $('#text1').focus();
        }
    </script>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T10:46:50.753

除非通过用户交互激活 Flash，否则它不会接收键事件。但是，一旦发生，它就不会将关键事件重新传输到 DOM。不幸的是，即使您可以在 JavaScript 中捕获所有键，通常也无法在您选择时通知 Flash。Flash 也不会通过选项卡获得焦点，但是一旦获得焦点，就不会将其转移回页面。只有某些组合键是您在 Flash 中听不到的（因为它们是由浏览器处理的），例如 Ctrl+O。

但是，如果您可以控制在 Flash 中执行的代码（至少，您必须能够将外部 SWF 加载到您自己的 SWF 中），那么您可以将击键传递给它并从中传递。我不确定制表位。我认为这取决于浏览器以及它是否允许 JavaScript 调用`focus()`.

这是一个[演示](http://www.lordofduct.com/blog/?p=318)，它仅适用于鼠标右键单击，但对于其他键/鼠标事件也类似。

# c++ - 声明我从头文件创建的类时，Visual Studio 2010 链接器错误 C++

> ID：10274174
> 
> 赞同：0
> 
> 时间：2012-04-23T02:34:33.387
> 
> 标签：c++, visual-studio-2010, linker, linked-list

我正在实现一个双向链表，只是为了好玩和复习，当我只是尝试在我的主函数中声明它的一个实例时，我得到了一个奇怪的链接器错误。

错误是：

```
1>main.obj : error LNK2019: unresolved external symbol "public: __thiscall 
d_list<int>::d_list<int>(void)" (??0?$d_list@H@@QAE@XZ) referenced in function _main
1>c:\users\ben\documents\visual studio 2010\Projects\dlist\Debug\dlist.exe : fatal 
error LNK1120: 1 unresolved externals 
```

main.cpp 只是：

```
#include "d_list.h"

int main(){

    d_list<int> test;

    return 0;
} 
```

结构本身还没有完成，但我会在这里粘贴代码以防万一你们需要它。

头文件：

```
#ifndef D_LIST_H
#define D_LIST_H

template <class T>
class d_list{
public:
    d_list();
    d_list(const d_list &_dl);

    void push_back(T item);
    void push_front(T item);

    void pop_back();
    void pop_front();

private:
    struct node{
            node *prev; 
        node *next;
        T    data;
    };
    node *head;
    node *tail;
        int   size;
};

#endif //D_LIST_H 
```

d_list.cpp：

```
#include "d_list.h"

template <class T>
d_list<T>::d_list(){
}

template <class T>
d_list<T>::d_list(const d_list<T> &_dl){

}

template <class T>
void d_list<T>::push_back(T item){
    node *new_tail = new node;
    new_tail->data = item;
    new_tail->next = head;
    new_tail->prev = tail;
    tail->next = new_tail;
    size++;
}

template <class T>
void d_list<T>::push_front(T item){
    node *new_head = new node;
    new_head->data = item;
    new_head->prev = tail;
    new_head->next = head;
    head->prev = new_head;
        size++;
}

template <class T>
void d_list<T>::pop_back(){
    node *temp = tail->prev;
    temp->next = head;
    delete tail;
    tail = temp;
        temp = NULL;
}

template <class T>
void d_list<T>::pop_front(){

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:39:01.913

模板及其实现应在头文件中定义。它们不是普通的函数或类，因为它们是按需编译的。尝试删除 .cpp 并将所有实现放在头文件中

# iphone - 在 iTunes Connect 应用程序加载器文件中指定多种语言

> ID：10274176
> 
> 赞同：3
> 
> 时间：2012-04-23T02:34:47.490
> 
> 标签：iphone, app-store-connect

我已经开始使用 iTunes Connect 应用程序加载器的“加载批处理”功能，但从文档中不确定如何包含多种语言？看来我需要为每种新语言（显示名称/描述）添加 2 列，但我不清楚列标题需要是什么。这是苹果文档：

[https://itunesconnect.apple.com/docs/UsingApplicationLoader.pdf](https://itunesconnect.apple.com/docs/UsingApplicationLoader.pdf)

列名：描述@@语言@@

用户可见的描述（10 到 255 个字符），其中@@language@@ 是受支持的本地化语言。您可以为每个本地化语言描述添加一个新列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T17:48:47.290

经过2个小时的艰苦谷歌搜索，我还没有找到关于这个问题的任何答案。

但是经过一个多小时的猜测，我发现您应该为每种语言创建两列，并将它们命名为例如“显示名称英语”或“显示名称俄语”。

UPD：忘了说，我在 Excel 中准备了我的 InApp 表

# ruby-on-rails - delay_job 不适用于 Rails ActiveRecord 范围

> ID：10274178
> 
> 赞同：1
> 
> 时间：2012-04-23T02:35:34.533
> 
> 标签：ruby-on-rails, activerecord, delayed-job, named-scope

我安装了delayed_job 3.0.2，它适用于对象的方法调用。但是，如果我在一个类上调用一个范围，例如，

`Listing.delay.all`

然后我得到错误`stack level too deep`。如果我在我拥有的任何类上调用任何范围，就会发生这种情况。

这是设计错误吗？我`stack level too deep`在这里出错的原因是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T02:27:15.200

# 正确使用delayed_job

要间接回答您的问题，您似乎没有正确使用delayed_job。我将解释你的代码做了什么，并建议你可能正在尝试做什么。

```
Listing.delay.all 
```

下面的方法`delay`（在本例中为`all`）将在后台执行。它不会返回列表数组，而是返回一个 Delayed::Backend::ActiveRecord::Job 对象。这不是你的情况发生的事情，但我会谈到这一点。

您背景的任何作业都应该有[副作用](http://en.wikipedia.org/wiki/Side_effect_%28computer_science%29)，因为延迟作业的返回值不会被存储。通常，副作用是将某些内容存储在数据库中、创建文件或其他可以在以后检测和使用的内容。通过查看delayed_job 作业表，可以看到没有存储返回值。

```
> Delayed::Backend::ActiveRecord::Job.column_names
 => ["id", "priority", "attempts", "handler", "last_error", "run_at", "locked_at", "failed_at", "locked_by", "queue", "created_at", "updated_at"] 
```

也就是说， the`Listing.all`和所有其他范围方法没有任何副作用；他们只查找范围内的列表并返回它们。使用delayed_job时，一定要只在有副作用的方法上使用，比如更新数据库等。

不幸的是，在不知道您要完成什么的情况下，很难就如何在您的场景中使用delayed_job 给出建议，或者即使它是适合该工作的工具。

# 您的错误消息 - 堆栈级别太深

首先，我会说出现堆栈级别太深的错误`Listing.delay.all`是不正常的。我能够`User`在我的 Rails 3 应用程序中的 ActiveRecord 模型上使用 delay_job 3.0.2，并且效果很好。（它没有做任何有价值的事情，但它返回了一个 Job 而不是抛出你得到的错误。）

```
> User.delay.all
 => #<Delayed::Backend::ActiveRecord::Job id: 1, priority: 0, attempts: 0, handler: "--- !ruby/object:Delayed::PerformableMethod\nobject:...", last_error: nil, run_at: "2012-05-02 02:10:39", locked_at: nil, failed_at: nil, locked_by: nil, queue: nil, created_at: "2012-05-02 02:10:39", updated_at: "2012-05-02 02:10:39"> 
```

同样，没有更多信息，任何人都无法帮助您找出错误。我建议首先弄清楚delayed_job 是否真的是您正在做的事情的正确工具（如果您使用它来获取数据以传递给视图，则不是），正确使用它，然后看看您是否还在有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T09:51:28.343

您应该创建一个自定义作业，然后将其排入队列。

```
class UserJob < Struct.new
  def perform
    User.all
  end
end

Delayed::Job.enqueue UserJob.new() 
```

# javascript - 在线、实时、共享的 JavaScript 控制台？

> ID：10274181
> 
> 赞同：35
> 
> 时间：2012-04-23T02:35:47.513
> 
> 标签：javascript, collaboration, jsfiddle

我想使用在线工具与人们远程合作进行 Javascript 学习和测试练习。

解决方案可以是一个共享的公共 Javascript 控制台。

这样的事情存在吗？我见过[http://jsfiddle.net](http://jsfiddle.net)。这可以正常工作，但是每次其他人更改代码时我们都必须不断更新我们的 URL，因此它不是实时的，并且需要双方都执行更新步骤。

我认为一个低功能的实时共享控制台将是一个非常简单的构建解决方案。如果它不存在，我正在考虑自己构建它，但我想先检查一下，看看是否有人听说过这样的事情。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T14:30:27.070

这里有一些链接给你：

*   Collabedit，在线代码编辑器[http://collabedit.com/](http://collabedit.com/)
*   Stypi，实时编辑器[https://www.stypi.com/](https://www.stypi.com/)（不是关于编码）
*   ShareJS，在您的应用程序中进行实时并发编辑。[http://sharejs.org/](http://sharejs.org/)（不是关于编码）
*   Tutti，同时在不同的浏览器上测试 Javascript [http://tuttijs.com/](http://tuttijs.com/)（不是协作的？）
*   奖励：移动端的 JS 控制台[http://jsconsole.com/](http://jsconsole.com/)

希望你会在那里找到有用的东西:)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-08-03T09:27:10.127

这个答案晚了 3 年，但如果您仍在查看这篇文章，应该会有所帮助。JSFiddle 现在具有***协作模式***- 它允许您在一起编辑的同时进行语音聊天和 IM。只需单击标题中的按钮并进行设置！
[http://jsfiddle.net#collaborate](http://jsfiddle.net#collaborate)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-21T10:40:05.940

差不多两年后，出现了一些很好的选择。对 jsfiddle 和 plunkr 的实时增强很棒，但是对于这个用例，我没有发现比[Coderpad](https://coderpad.io/)更简单的了。它的营销目的是进行代码面试并保存历史记录。有 JS/Coffeescript/Ruby/Java 等等。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-07-15T00:05:39.107

[http://syncfiddle.net/](http://syncfiddle.net/)正是您正在寻找的。简单干净的界面可实时同步，但功能与任何其他网站一样。但要小心保存你的代码，它似乎在足够的不活动后删除你的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-02T06:41:36.183

尝试

[http://jsbin.com/](http://jsbin.com/)

[http://jsconsole.com/](http://jsconsole.com/)

JSBin 非常接近您的需求。提供 HTML、CSS、JS 和控制台代码实践。

另一方面，JSConsole 非常简单，当然只用于控制台编码。

# c++ - 为什么 *everything* 在 ATL/WTL 中使用模板基类？

> ID：10274184
> 
> 赞同：4
> 
> 时间：2012-04-23T02:36:21.237
> 
> 标签：c++, winapi, visual-c++, atl, wtl

我在理解 ATL/WTL 代码中模板的用途时遇到了很多麻烦。

当您查看 WTL 时，您会看到如下代码：

```
template <class TBase>
class CEditT : public TBase
{
    ...
};

typedef CEditT<ATL::CWindow> CEdit; 
```

### 为什么`CEditT`用模板基类定义？

换句话说，在什么情况下会`CEditT<T>`实例化 where `T`is **not** `CWindow`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:11:07.460

这样您就可以覆盖`ATL::CWindow`由 ATL/WTL 类调用的方法。`ATL::CWindow`如果您不`ATL::CWindow`喜欢`TBase`.

例如，`ATL::CWindow::CenterWindow`很长一段时间以来都有一个错误，它没有正确考虑多个监视器，我看到人们使用这种技术来覆盖`CenterWindow`一个固定的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T02:50:05.497

假设使用组合代替：

```
template <class TBase> class CEditT {
public:
  TBase base;
  ...
}; 
```

这与以下内容没有太大区别：

```
template <class ITEM> class ListNode {
public:
   ITEM item;
   ListNode<ITEM> *next;
   // ...
}; 
```

`ListNode`可以改为继承`ITEM`，like `CEditT`does with `TBase`，但缺点是 then`ITEM`不能是基本类型 like `int`。另一方面， a`ListNode`将*是*一种`ITEM`，这可能是有用的。此外，它可以访问`protected:`.`ITEM`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T03:10:17.477

这样它就可以利用[Curiously Recurring Template Pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)。如果您创建一个派生类，`CEditT`您的定义将是`class CMyEdit : public CEditT<CMyEdit>`. `this`通过将其指针静态转换为您的类，`CEditT`可以调用您的方法而无需使用 vtable。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-02T19:20:21.970

> 为什么在 ATL/WTL 中*一切都*使用模板基类？

简而言之，为了实现一种*“奇怪形式的编译时多态性”*，这要归功于一种设计模式（而不是 C++ 习惯用法），可以将*“颠倒继承”*称为*“指定基类的基类”*的技术，以便*“允许您将自己的类插入到类层次结构中”*以实现专门类型的灵活性*“无需对任何特定派生类进行硬编码实现”*。

在阅读了由[Jim Beveridge](https://stackoverflow.com/users/864520/jim-beveridge)撰写并于 1999 年 7 月由 Visual C++ Developers Journal 发表的优秀文章[ATL 和 Upside-Down Inheritance -Understanding ATL's atypical design approach之后，这一切都应该清楚了。这里是](https://web.archive.org/web/20010105015500/http://www.devx.com/free/mgznarch/vcdj/1999/julmag99/atlinherit1.asp)[同一篇文章的完整未分页副本的链接](https://web.archive.org/web/20060315072824/http://www.apostate.com/programming/atlupsidedown.html)（也在 Wayback 机器中）。

# c++ - 对原子操作的最低要求

> ID：10274189
> 
> 赞同：0
> 
> 时间：2012-04-23T02:36:58.663
> 
> 标签：c++, c, operating-system

我只是想收集一些有关原子操作要求**的基于证据的**信息。

例如（也许不对，只是一些例子）

> 1.  在 x86_64 上，当你对 long 的 entry sizeof 进行写入或读取并按 long 对齐时，操作是 aotmic，因为 balabalabala ...
>     
>     
> 2.  在 x86_64 上，当您使用 gcc [atomic primitive](http://gcc.gnu.org/onlinedocs/gcc-4.1.0/gcc/Atomic-Builtins.html)写入或读取字节时，您对这些字节的操作将保持原子性。

希望得到帮助和帮助:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:03:06.477

[来自专业 C++](http://books.google.co.jp/books?id=sN_0ovp_yv4C&pg=PT806&lpg=PT806&dq=assignment+of+scalars+x86+c%2B%2B&source=bl&ots=LjEXj-GBKF&sig=rcdNDTUXms_fMJY4j6n3orInwKI&hl=ja&sa=X&ei=2sSUT4vBA6r3mAWc0dXVAQ&ved=0CCAQ6AEwAA#v=onepage&q&f=false)的报价：

> 对简单标量变量的简单赋值通常不需要同步。例如，在 x86 上，32 位对齐的值在硬件级别以原子方式处理，单个事务不需要显式同步。例如，将布尔值设置为 false 以停止线程不需要同步，但是对于任何给定的操作，像 ++、-- 或 op= 这样的操作需要同步。

这并不能回答您所有的问题，但这是您正在寻找的部分吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:54:21.587

如果您正在寻找芯片级保证，您需要查阅这些芯片的技术手册。在英特尔上查看[软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)，其中包含有关内存排序的完整信息。在这种情况下，原子的定义包括内存排序保证。基本保证列在“第 3 卷：8.2 内存排序”中，另外一些函数被标记为以“原子”方式运行。

注意完整的细节很复杂，需要对芯片有详细的了解。这就是为什么 C 和 C++ 现在将它们包装在更高级别的保证中。您当然可以查阅这些各自的标准以查看它们的保证。

# scala - 使用 Scala 的回文

> ID：10274191
> 
> 赞同：9
> 
> 时间：2012-04-23T02:37:07.183
> 
> 标签：scala, loops, iteration, break, palindrome

我[从 CodeChef 遇到了这个问题](http://www.codechef.com/problems/PALIN)。问题说明如下：

> 如果一个正整数在十进制系统中的表示在从左到右和从右到左读取时相同，则称为回文。对于给定的不超过 1000000 位的正整数 K，将大于 K 的最小回文的值写入输出。

我可以定义一个 isPalindrome 方法，如下所示：

```
def isPalindrome(someNumber:String):Boolean = someNumber.reverse.mkString == someNumber 
```

我面临的问题是，当整数满足 isPalindrome 方法时，如何从初始给定数字循环并中断并返回第一个回文？另外，是否有更好（有效）的方法来编写 isPalindrome 方法？

在这里获得一些指导会很棒

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T03:16:34.923

如果你有一个像 123xxx 这样的数字，你知道，xxx 必须低于 321 - 那么下一个回文是 123321。

或者xxx在上面，那么3不能保留，124421必须是下一个。

这是一些没有保证的代码，不是很优雅，但是中间的（多个）Nines 的情况有点毛茸茸（19992）：

```
object Palindrome extends App {

def nextPalindrome (inNumber: String): String = {
  val len = inNumber.length ()
  if (len == 1 && inNumber (0) != '9') 
    "" + (inNumber.toInt + 1) else {
    val head = inNumber.substring (0, len/2)
    val tail = inNumber.reverse.substring (0, len/2)
    val h = if (head.length > 0) BigInt (head) else BigInt (0)
    val t = if (tail.length > 0) BigInt (tail) else BigInt (0)

    if (t < h) {
      if (len % 2 == 0) head + (head.reverse)
      else inNumber.substring (0, len/2 + 1) + (head.reverse)
    } else {
     if (len % 2 == 1) {
       val s2 = inNumber.substring (0, len/2 + 1) // 4=> 4
       val h2 = BigInt (s2) + 1  // 5 
       nextPalindrome (h2 + (List.fill (len/2) ('0').mkString)) // 5 + "" 
     } else {
       val h = BigInt (head) + 1
       h.toString + (h.toString.reverse)
     }
    }
  }
}

def check (in: String, expected: String) = {
  if (nextPalindrome (in) == expected) 
    println ("ok: " + in) else 
    println (" - fail: " + nextPalindrome (in) + " != " + expected + " for: " + in)
}
//
val nums = List (("12345", "12421"), // f
  ("123456", "124421"), 
  ("54321", "54345"), 
  ("654321", "654456"), 
  ("19992", "20002"),
  ("29991", "29992"),
  ("999", "1001"),
  ("31", "33"),
  ("13", "22"),
  ("9", "11"),
  ("99", "101"),
  ("131", "141"),
  ("3", "4")
)
nums.foreach (n => check (n._1, n._2))
println (nextPalindrome ("123456678901234564579898989891254392051039410809512345667890123456457989898989125439205103941080951234566789012345645798989898912543920510394108095"))

} 
```

我想它也可以处理一百万位整数的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T03:16:57.830

做反向不是最好的主意。最好从字符串的开头和结尾开始，逐个元素地迭代和比较。即使在第一个和最后一个元素不匹配的情况下，您也正在浪费时间复制整个 String 并反转它。在具有一百万位数字的东西上，这将是一个巨大的浪费。

对于更大的数字，这比反向快几个数量级：

```
def isPalindrome2(someNumber:String):Boolean = {
  val len = someNumber.length;
  for(i <- 0 until len/2) {
    if(someNumber(i) != someNumber(len-i-1)) return false; 
  }
  return true;
} 
```

基于镜像字符串的前半部分，可能还有一种更快的方法。我看看我现在能不能拿到...

**更新**所以这应该在几乎恒定的时间内找到下一个回文。没有循环。我只是把它刮掉了，所以我相信它可以清理干净。

```
def nextPalindrome(someNumber:String):String = {
  val len = someNumber.length;
  if(len==1) return "11";
  val half = scala.math.floor(len/2).toInt;
  var firstHalf = someNumber.substring(0,half);
  var secondHalf = if(len % 2 == 1) {
    someNumber.substring(half+1,len);
  } else {
    someNumber.substring(half,len);
  }

  if(BigInt(secondHalf) > BigInt(firstHalf.reverse)) {
    if(len % 2 == 1) {
      firstHalf += someNumber.substring(half, half+1);
      firstHalf = (BigInt(firstHalf)+1).toString;
      firstHalf + firstHalf.substring(0,firstHalf.length-1).reverse
    } else {
      firstHalf = (BigInt(firstHalf)+1).toString;
      firstHalf + firstHalf.reverse;
    }
  } else {
    if(len % 2 == 1) {
      firstHalf + someNumber.substring(half,half+1) + firstHalf.reverse;
    } else {
      firstHalf + firstHalf.reverse;
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T07:16:54.117

这是我可以实现的最通用和最清晰的解决方案：
**编辑：**摆脱`BigInt`'s，现在计算百万位数只需不到一秒钟。

```
def incStr(num: String) = {  // helper method to increment number as String
  val idx = num.lastIndexWhere('9'!=, num.length-1)
  num.take(idx) + (num.charAt(idx)+1).toChar + "0"*(num.length-idx-1)
}

def palindromeAfter(num: String) = {
  val lengthIsOdd = num.length % 2 
  val halfLength  = num.length / 2 + lengthIsOdd
  val leftHalf  = num.take(halfLength)               // first half of number (including central digit)
  val rightHalf = num.drop(halfLength - lengthIsOdd) // second half of number (also including central digit)      

  val (newLeftHalf, newLengthIsOdd) =  // we need to calculate first half of new palindrome and whether it's length is odd or even
    if (rightHalf.compareTo(leftHalf.reverse) < 0) // simplest case - input number is like 123xxx and xxx < 321
      (leftHalf, lengthIsOdd) 
    else if (leftHalf forall ('9'==))              // special case - if number is like '999...', then next palindrome will be like '10...01' and one digit longer
      ("1" + "0" * (halfLength - lengthIsOdd), 1 - lengthIsOdd)
    else                                           // other cases - increment first half of input number before making palindrome
      (incStr(leftHalf), lengthIsOdd)

  // now we can create palindrome itself
  newLeftHalf + newLeftHalf.dropRight(newLengthIsOdd).reverse
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T03:13:22.803

根据您的*无范围*建议：同样的事情，但使用 Stream：

```
def isPalindrome(n:Int):Boolean = n.toString.reverse == n.toString
def ints(n: Int): Stream[Int] = Stream.cons(n, ints(n+1))
val result = ints(100).find(isPalindrome) 
```

并且使用迭代器（以及不同的调用方法，实际上您可以使用 Stream 做同样的事情）：

```
val result = Iterator.from(100).find(isPalindrome) 
```

但正如@user unknown 所说，它是直接的暴力破解，对于大量用户来说并不实用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-02T17:25:05.603

**使用切片检查任何类型的列表是否是回文，没有任何循环**

```
def palindrome[T](list: List[T]): Boolean = {
if(list.length==1 || list.length==0 ){
  false
}else {
  val leftSlice: List[T] = list.slice(0, list.length / 2)
  var rightSlice :List[T]=Nil
  if (list.length % 2 != 0) {
    rightSlice = list.slice(list.length / 2 + 1, list.length).reverse
  } else {
    rightSlice = list.slice(list.length / 2, list.length).reverse
  }
  leftSlice ==rightSlice
} 
```

}

虽然最简单的解决方案是

```
 def palindrome[T](list: List[T]): Boolean = {
      list == list.reverse
      } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T02:49:02.813

您可以简单地使用`find`集合上的方法来查找与给定谓词匹配的第一个元素：

```
 def isPalindrome(n:Int):Boolean = n.toString.reverse == n.toString
  val (start, end) = (100, 1000)
  val result: Option[Int] = (start to end).find(isPalindrome)
  result foreach println

  >Some(101) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T08:24:31.570

**验证字符串是否为回文的解决方案**

此解决方案不会反转字符串。但是我不确定它会更快。

```
def isPalindrome(s:String):Boolean = { 
  s.isEmpty ||   
  ((s.last == s.head) && isPalindrome(s.tail.dropRight(1)))
} 
```

**给定字符串找到下一个回文的解决方案**

*这个解决方案不是 scala 的最佳解决方案（与 Java 解决方案非常相似），但它只处理字符串并且适用于大量*

你只需要镜像你想要的数字的前半部分，检查它是否高于开始数字，否则，将前半部分的最后一个数字增加一个并再次镜像。

首先，将 int 的字符串表示形式增加 1 的函数：

```
def incrementString(s:String):String = {
  if(s.nonEmpty){
    if (s.last == '9')
      incrementString(s.dropRight(1))+'0'
    else
      s.dropRight(1) + (s.last.toInt +1).toChar
  }else
    "1"
} 
```

然后，一个与整数的字符串表示进行比较的函数：（函数“比较”不适用于这种情况）

```
/* is less that 0 if x<y, is more than 0 if x<y, is equal to 0 if x==y */
def compareInts(x:String, y:String):Int = {
  if (x.length !=y.length)
    (x.length).compare(y.length)
  else
    x.compare(y)
} 
```

现在计算下一个回文的函数：

```
def nextPalindrome(origin_ :String):String = {
  /*Comment if you want to have a strictly bigger number, even if you already have a palindrome as input */
  val origin = origin_
  /* Uncomment if you want to have a strictly bigger number, even if you already have a palindrome as input */
  //val origin = incrementString(origin_)

  val length = origin.length
  if(length % 2 == 0){
    val (first, last) = origin.splitAt(length/2); 
    val reversed = first.reverse
    if (compareInts(reversed,last) > -1)
      first ++ reversed
    else{
      val firstIncr = incrementString(first)
      firstIncr ++ firstIncr.reverse
    }
  } else {
    val (first,last) = origin.splitAt((length+1)/2)
    val reversed = first.dropRight(1).reverse
    if (compareInts(reversed,last) != -1)
      first ++ reversed
    else{
      val firstIncr = incrementString(first)
      firstIncr ++ firstIncr.dropRight(1).reverse
    }
  }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-06T04:56:17.530

你可以尝试这样的事情，我使用的是基本递归：

```
 object Palindromo {
  def main(args: Array[String]): Unit = {

    var s: String = "arara"
    println(verificaPalindromo(s))
  }

  def verificaPalindromo(s: String): String = {
    if (s.length == 0 || s.length == 1)
      "true" 
    else
      if (s.charAt(0).toLower == s.charAt(s.length - 1).toLower)
        verificaPalindromo(s.substring(1, s.length - 1))
      else
        "false"
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-12-06T06:38:39.517

```
 @tailrec
  def palindrome(str: String, start: Int, end: Int): Boolean = {
    if (start == end)
      true
    else if (str(start) != str(end))
      false
    else
      pali(str, start + 1, end - 1)
  }

  println(palindrome("arora", 0, str.length - 1)) 
```

# indexing - 定义四个索引与在搜索字段上定义一个索引

> ID：10274196
> 
> 赞同：1
> 
> 时间：2012-04-23T02:38:13.197
> 
> 标签：indexing, sql-server-2008-r2

我有一个包含以下列的员工表：

```
employeeID (PK)
First_name
    Last_name
    Third_name
    Age
    Sex
    Telephone
    Dateofbirth
    Position 
```

我有一个搜索功能，可以使用以下任何字段搜索员工：-

```
First_name
Last_name
Telephone
Dateofbirth 
```

**并且用户可以指定这些字段的任意组合以包括在搜索中。**

现在要改进搜索什么是创建索引的最佳方法，我应该：-

1.  在四个搜索字段上创建单独的四个索引？

**或者**

1.  创建一个包含四列的单个索引会更好吗？

**或者**

1.  还有第三个更好的解决方案吗？

BR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:49:31.363

第二个选项（所有四列上的一个索引）不太可能有用，除非您知道用户总是包含一列，几乎总是包含第二列，等等。任何不查看第一列的查询index 不会使用该索引，至少出于索引查找的目的。如果选择列表中不包含其他列，则此类索引仍可用于在这些情况下检索数据。

是否所有四个索引都是必要的，我不确定。是否真的有可能在没有姓氏的情况下搜索名字？您认为用户多久会搜索一次 John？我会让那些扫描并将它们组合为一个索引`(LastName,FirstName)`。如果您多次搜索出生日期，我也会感到惊讶。员工知道（或可以轻松找到）同事的年龄/生日真的很普遍吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:58:39.517

使用传统索引并没有真正理想的解决方案。如果您考虑它的工作原理，索引实际上就像根据特定字段对表进行排序。因此，如果您只有一个包含所有四列的索引，那么无论如何它只能真正使用第一个。如果您使用四个索引，则 SQL Server 可以按顺序搜索每个索引。

但是，如果您正在搜索通配符模式，则上述内容没有实际意义：

```
COLUMN LIKE '%searchstring%' 
```

该搜索不能使用索引——它必须搜索每一行的内容。

所有这些都表明您应该考虑使用全文索引，这正是针对这种情况的。

[http://msdn.microsoft.com/en-us/library/ms142571.aspx](http://msdn.microsoft.com/en-us/library/ms142571.aspx)

# javascript - 你能让 mongo 默认生成 _ids 作为字符串吗？

> ID：10274200
> 
> 赞同：1
> 
> 时间：2012-04-23T02:38:31.833
> 
> 标签：javascript, node.js, mongodb, guid, uuid

我想让 mongo 将它的 _ids 生成为字符串。在向客户端发送回和第四次发送或在程序的其他部分使用时，它们更有用。现在我将它们转换为所有这些东西的字符串，然后将它们转换回运行查询。

有什么想法或理由不这样做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:45:00.977

您可以根据需要设置 _id。您甚至可以创建一个 ObjectId，将其转换为字符串，然后保存该字符串而不是实际的 ObjectId。你在这里失去的主要是紧凑性。您将失去的一件小事是能够从 ObjectId 中提取值而不强制转换它，例如日期等。

一个例子：

```
> var newId = new ObjectId();
> db.test.insert({_id:newId, x:"test"});
> db.test.find();
{ "_id" : ObjectId("4f94c2a11a6bbec3872cb315"), "x" : "test" }
> db.test.insert({_id:newId.str, x:"test"});
> db.test.find();
{ "_id" : ObjectId("4f94c2a11a6bbec3872cb315"), "x" : "test" }
{ "_id" : "4f94c2a11a6bbec3872cb315", "x" : "test" } 
```

**更新：**您必须将其重铸为 ObjectId 才能执行此操作：

```
> var newId = new ObjectId();
> newId.getTimestamp();
ISODate("2012-04-23T03:22:56Z") 
```

# c++ - 反向字符串无循环

> ID：10274205
> 
> 赞同：0
> 
> 时间：2012-04-23T02:39:08.760
> 
> 标签：c++, string, reverse

好的，这就是我所拥有的，但我收到一条错误消息：“complexReverseString”：找不到标识符？？？我哪里错了我看了一遍无济于事

```
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main()
{
    ifstream input;
    string forward;

    cout << "Please enter a string to see its reverse. (Will display reverse twice)" << endl;
    input.open("information.txt");
    cin >> forward;
    //reverseString(forward, findStringSize(forward)); a function I'm not actually calling
    input >> forward;
    complexReverseString();

    input.close();

}
int complexReverseString(string userInput)
{
    string source(userInput);
    string target( source.rbegin(), source.rend() );
    cout << "The reversed string is " << target << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T02:41:27.643

`complexReverseString()`在调用它之前，您必须先进行原型设计。

`main`在入口点之前的源文件中执行此操作，如下所示：

```
int complexReverseString(string userInput);
int main() { ... } 
```

或在单独的标题中执行此操作：

```
#ifndef COMPLEX_STR_HPP
#define COMPLEX_STR_HPP

int complexReverseString(string userInput);

#endif /* COMPLEX_STR_HPP */

/* int main.cpp */
#include "complex_str.hpp"

int main() { ... } 
```

其次，您忘记将参数传递给函数：

```
 complexReverseString( /* parameter here */ );

 e.g
 complexReverseString(forward); 
```

第三，由于您没有更改字符串，`complexReverseString()`我建议您使用`const`字符串，并且可能是对字符串的引用：

```
int complexReverseString(const string& userInput); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T02:41:36.360

您需要将参数传递给方法吗？因为您的方法需要一个类型的参数，`string`否则您需要重载它。它目前正在失败，因为它正在寻找函数定义`complexReverseString()`

将您的代码更改为

```
complexReverseString(forward); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T02:46:26.440

在 C++ 中没有显式循环的情况下反转字符串或任何其他容器的最简单方法是使用反向迭代器：

```
string input;
cin >> input;
// Here is the "magic" line:
// the pair of iterators rbegin/rend represent a reversed string
string output(input.rbegin(), input.rend());
cout << output << endl; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T03:08:00.297

在 C/C++ 中，编译器从上到下读取源代码。如果您在编译器读取方法之前使用它（例如，当方法定义在底部，并且您正在使用它`main()`并且`main()`位于顶部时），编译器将不会运行项目中的所有源/头文件/folder 直到找到方法或浏览完所有文件。

您需要做的是对您的方法进行原型设计，或者在顶部定义它。

函数原型基本上是一个方法头，用于通知编译器该方法将在源代码的其他位置找到。

原型：

```
#include <iostream>    
#include <fstream>    
#include <string>

using namespace std;

// DEFINE PROTOTYPES BEFORE IT'S CALLED (before main())
int complexReverseString(string);

int main()    
{    
    // your main code
}    

int complexReverseString(string userInput)    
{    
    // your reverse string code
} 
```

原型设计将允许您更轻松地查看方法和方法标头。

或`compledReverseString()`在顶部定义：

```
#include <iostream>    
#include <fstream>    
#include <string>

using namespace std;

// DEFINE METHOD BEFORE IT'S CALLED (before main())
int complexReverseString(string userInput)    
{    
    // your reverse string code
}

int main()    
{    
    // your main code
} 
```

这些样式中的任何一种都会产生相同的结果，因此由您决定要使用哪一种。

除此之外，当你调用`complexReverseString()`main 时，你忘记传递它的参数，应该是`forward`. 所以不是`complexReverseString()`，而是`complexReverseString(forward)`

# magento - 需要库存图片以用于电子商务模板的产品目录

> ID：10274206
> 
> 赞同：0
> 
> 时间：2012-04-23T02:39:14.820
> 
> 标签：magento, e-commerce, opencart, prestashop

我想构建一些电子商务模板，但不知道在哪里可以找到用作虚拟产品图像的示例图像。如果我决定将我的模板部署到实时服务器，因为我不是摄影师，我如何在不自己拍摄照片的情况下获得我正在销售的产品的高质量图像，产品目录的任何库存照片库？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T01:47:51.033

搜索[维基共享资源](http://commons.wikimedia.org/w/index.php?title=Special%3aNewFiles&offset=20120424004646&limit=100)可用的图像，因为它们通常具有友好的版权（至少不会让您被制造商或 Getty 等起诉）

举个例子，[这张图片](http://commons.wikimedia.org/wiki/File%3aRandynotaloka.jpg)，你可以用它来做T恤，买一个说唱歌手等等。阅读许可证；如果我处于你的位置，我会这样做。

页面右侧是[关于重用的链接信息](http://commons.wikimedia.org/wiki/Commons%3aReusing_content_outside_Wikimedia)，上面贴有：

> 此页面适用于那些希望在他们自己的网站上、印刷版或其他方式上重复使用来自维基媒体项目的材料（文本和/或图形）的人。它专注于 Commons，因为这明确是可重用媒体的集合。维基媒体基金会几乎不拥有维基媒体网站上的任何内容——它归个人创作者所有。但是，几乎所有内容都可以根据其贡献给项目的特定许可条款在未经个人许可的情况下自由重复使用，但某些许可可能要求注明原始创建者。您不需要从许可人那里获得特定的许可声明（除非您希望在与所述许可不同的条款下使用该作品）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T09:00:08.507

这取决于您的需要，您可以根据需要聘请专业人员来设计图像，或者您可以在护目镜中搜索有许多免费图像可以在您的虚拟站点中使用。这是一个链接[https://www.google.co.in/search?hl=en&safe=active&client=firefox-a&hs=j6F&rls=org.mozilla:en-US:official&bav=on.2,or.r_gc.r_pw。 r_cp.r_qf.,cf.osb&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&ei=RhiVT8oticytB7ub7PYE&q=dummy%20product%20images%20magento&orq=dummy+product+images+++magento&biw=1366&bih=562&sei=JxmVT5WjAoLAe=JxmVT5WjAoLprAe](https://www.google.co.in/search?hl=en&safe=active&client=firefox-a&hs=j6F&rls=org.mozilla%3aen-US%3aofficial&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&um=1&ie=UTF-8&tbm=isch&source=og&sa=N&tab=wi&ei=RhiVT8oticytB7ub7PYE&q=dummy%20product%20images%20magento&orq=dummy%20product%20images%20%20%20magento&biw=1366&bih=562&sei=JxmVT5WjAoLprAe0mfT9BA)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T02:48:30.047

这取决于你想要做什么。您是否正在为特定的利基创建模板？即喜欢手机？或者您是否想制作更通用的模板来吸引更广泛的受众。

您必须注意的一件事是版权。太多次你看到人们制作模板并使用他们想要的任何图像。这是非法的（至少在美国），因为您不拥有这些图像的版权。人们试图争辩说你不是在卖图像，而是布局，这根本不是真的。模板的吸引力在很大程度上取决于所使用的图像。当您购买模板时，它永远不会出现相同的结果，因为您没有使用相同的图像。因此，您正在使用别人的作品来增强自己的作品，这与将某人的形象放在产品包装上是一回事。

至于在哪里可以找到图像……这取决于您和您的需求。你当然可以去像 iStock 这样的股票网站购买一些。他们有一些公平的价格，但许多网站确实对模板设计师有不同的条款。它可能属于他们的扩展许可条款，这会使它们变得更加昂贵，因为他们喜欢假设您将通过您的模板赚取数百万美元，这可能不是真的。

如果您想要特定于产品的图片，最好的办法是访问您想要的网站，例如，三星如果做电子产品，并向他们发送联系信息，询问他们使用产品的条款。他们可能不会授予您在模板中使用它们的许可，但您可以尝试。我知道事实上许多手机制造商都向零售商开放使用他们的图像，因为你在买卖他们的产品。在你的情况下，你不是，所以它可能不一样。

总之，在这么长的帖子（道歉）之后，如果您无法从所有者那里获得所需的权限，您最好的选择是自己拿走它们或从信誉良好的网站购买它们。

# c# - 来自控制台应用程序的 HTTPS？

> ID：10274207
> 
> 赞同：32
> 
> 时间：2012-04-23T02:39:42.567
> 
> 标签：c#, wcf, web-services, rest, https

我没有使用[IIS](http://en.wikipedia.org/wiki/Internet_Information_Services)，它甚至没有安装在这台计算机上。我的控制台托管的[WCF](http://en.wikipedia.org/wiki/Windows_Communication_Foundation) [REST](http://en.wikipedia.org/wiki/Representational_State_Transfer)服务中也没有任何`app.config`文件或文件。但我想尝试在主机控制台应用程序上运行 HTTPS：`web.config`

```
class Program
{
    static void Main(string[] args)
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        //WebHttpBinding binding = new WebHttpBinding();
        //binding.Security.Mode = WebHttpSecurityMode.Transport;
        host.AddServiceEndpoint(typeof(IService), new WebHttpBinding(), "").Behaviors.Add(new WebHttpBehavior());
        host.Open();

        Console.WriteLine("Host opened");
        Console.ReadLine(); 
```

有没有办法让我的服务在[HTTPS](http://en.wikipedia.org/wiki/HTTP_Secure)中运行？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-29T16:55:06.720

1.  创建并安装根授权和 HTTPS 证书

    以管理员身份打开命令提示符：

    创建文件夹`C:\Certs`并导航到它。

    ```
    #Root Authority
    makecert.exe -r -pe -n "CN=My Root Authority" -ss CA -sr LocalMachine -a sha1 -sky signature -cy authority -sv CA.pvk CA.cer

    #Certificate
    makecert.exe -pe -n "CN=localhost" -a sha1 -sky exchange -eku 1.3.6.1.5.5.7.3.1 -ic CA.cer -iv CA.pvk -sp "Microsoft RSA SChannel Cryptographic Provider" -sy 12 -sv server.pvk server.cer

    #key
    pvk2pfx.exe -pvk server.pvk -spc server.cer -pfx server.pfx 
    ```

    **makecert 和 pvk2pfx 的默认位置是 C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\bin

2.  安装证书

    **从命令行：**

    certmgr.exe -add CA.cer -r LocalMachine -s CertificateAuthority

    certmgr.exe -add server.pfx -r LocalMachine -s 我的 -all

    **来自MMC：**

    通过转到命令提示符并键入 MMC打开[MMC 。](https://en.wikipedia.org/wiki/Microsoft_Management_Console)这将打开空白的 MMC 控制台。单击添加/删除管理单元。添加证书并选择计算机帐户/本地计算机。

    导航到中间证书颁发机构/证书。右键单击并选择导入。导航到您创建 CA.cer 文件的文件夹，然后单击以导入。

    导航到个人/证书并右键单击导入。找到您的 server.pfx 文件（您需要从可用扩展名列表中选择 PFX）并导入此文件。完成后，通过双击打开证书并在详细信息下记下其*指纹。*将此粘贴到[记事本](http://en.wikipedia.org/wiki/Notepad_%28software%29)`?`中，并在开头删除多余的内容并删除空格。

    要获取服务器指纹证书，您可以在[PowerShell](http://en.wikipedia.org/wiki/Windows_PowerShell)中运行它：

    ```
    $getThumb = Get-ChildItem -path cert:\LocalMachine\TrustedPeople | where { $_.Subject -match "CN=localhost" }
    $getThumb.thumbprint 
    ```

3.  [使用netsh](https://en.wikipedia.org/wiki/Netsh)注册和映射 WCF 端口

    映射到 WCF 端口

    ```
    netsh http add sslcert ipport=0.0.0.0:8000 certhash=73269e9b554f58d75e77880f5ff72b50c8d724ee appid={e2eaacd9-92e6-43cc-b51c-7a7887149607}

    appid - any GUID
    certhas - this is the thumb print from the step 2 
    ```

4.  设置您的主机

    设置为 HTTPS 并启用传输安全性：

    ```
    string baseAddress = "https://" + Environment.MachineName + ":8000/Service";
    var binding = new WebHttpBinding();
    binding.Security.Mode = WebHttpSecurityMode.Transport; 
    ```

**详细参考资料**

*   [如何：在 WCF 中为开发期间的传输安全创建和安装临时证书](http://msdn.microsoft.com/en-us/library/ff648498.aspx)(MSDN)

*   [配置 HTTP 和 HTTPS](http://msdn.microsoft.com/en-us/library/ms733791.aspx) (MSDN)

*   [如何：使用 SSL 证书](http://msdn.microsoft.com/en-us/library/ms733791.aspx)(MSDN)配置端口

如果您在添加 sslcert 时遇到问题：

*   堆栈溢出问题*[使用 SSL 和 WCF 的自托管 - 无法将证书绑定到端口](https://stackoverflow.com/questions/6228003)*

*   堆栈溢出问题*[使用 netsh，将 SSL 证书绑定到端口号失败](https://stackoverflow.com/questions/9641723/netsh-bind-ssl-certificate-to-port-number-failing/9642626#9642626)*

*   堆栈溢出问题*[关于不使用 IIS 的 WCF 服务的证书](https://stackoverflow.com/questions/3292330/certificate-on-wcf-service-that-does-not-use-iis/5278348#5278348)*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T15:50:16.913

在 VS.NET 2010 中创建一个新的控制台应用程序项目。现在添加对 dll 的引用

```
 a.  System.ServiceModel
 b.  System.ServiceModel.Web
 c.  System.Runtime.Serialization 
```

Program.cs Main 方法有以下代码

```
public class Program
    {
        public static void Main(string[] args)
        {
            Uri baseAddress = new Uri("https://"+Environment.MachineName+":54321/hello");
            using (ServiceHost host = new ServiceHost(typeof(HelloWorldService), baseAddress))
            {                
                WebHttpBinding web = new WebHttpBinding();
                web.Security.Mode = WebHttpSecurityMode.Transport;                
                host.AddServiceEndpoint(typeof(IHelloWorldService), web, "").Behaviors.Add(new WebHttpBehavior());                                
                host.Credentials.ServiceCertificate.Certificate = (X509Certificate2)GetX509Certificate();                               
                host.Open();
                Console.WriteLine("The service is ready at {0}", baseAddress);
                Console.WriteLine("Press <Enter> to stop the service.");
                Console.ReadLine();                
                host.Close();
            }
        }

        private static X509Certificate GetX509Certificate()
        {
            X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
            store.Open(OpenFlags.OpenExistingOnly);
            X509Certificate certificate = null;
            X509Certificate2Collection cers = store.Certificates.Find(X509FindType.FindBySubjectName, "localhost", false);            
            if (cers.Count > 0)
            {
                certificate = cers[0];
            }
            store.Close();
            return certificate;
        }
    }

[ServiceContract]
    public interface IHelloWorldService
    {
        [WebGet(UriTemplate="SayHello/{name}")]
        string SayHello(string name);
    }

    public class HelloWorldService : IHelloWorldService
    {
        public string SayHello(string name)
        {
            return string.Format("Hello, {0}", name);
        }
    } 
```

现在我们通过创建以下命令的批处理文件（取自 MSDN）并从 VS.NET 命令提示符执行它来创建证书：

```
echo off
setlocal

call :setscriptvariables %1
IF NOT DEFINED SUPPORTED_MODE call :displayusage
IF DEFINED SUPPORTED_MODE call :cleancerts
IF DEFINED SETUP_SERVICE call :setupservice
IF DEFINED SETUP_CLIENT call :setupclient
GOTO end

:cleancerts
REM cleans up certs from previous runs.    
certmgr.exe -del -r CurrentUser -s My -c -n %CLIENT_NAME%
certmgr.exe -del -r CurrentUser -s TrustedPeople -c -n localhost
certmgr.exe -del -r LocalMachine -s My -c -n localhost
certmgr.exe -del -r LocalMachine -s TrustedPeople -c -n %CLIENT_NAME%
certmgr.exe -put -r LocalMachine -s My -c -n %COMPUTER_NAME% computer.cer
IF %ERRORLEVEL% EQU 0 (
   DEL computer.cer       
   pause
   certmgr.exe -del -r LocalMachine -s My -c -n %COMPUTER_NAME%
)

:cleanupcompleted   

GOTO :EOF

:setupclient
makecert.exe -sr CurrentUser -ss MY -a sha1 -n CN=%CLIENT_NAME% -sky exchange -pe

IF DEFINED EXPORT_CLIENT (        
    certmgr.exe -put -r CurrentUser -s My -c -n %CLIENT_NAME% client.cer
) ELSE (        
    certmgr.exe -add -r CurrentUser -s My -c -n %CLIENT_NAME% -r LocalMachine -s TrustedPeople
)
GOTO :EOF

:setupservice
makecert.exe -sr LocalMachine -ss MY -a sha1 -n CN=%SERVER_NAME% -sky exchange -pe

IF DEFINED EXPORT_SERVICE (       
    certmgr.exe -put -r LocalMachine -s My -c -n %SERVER_NAME% service.cer
) ELSE (        
    certmgr.exe -add -r LocalMachine -s My -c -n %SERVER_NAME% -r CurrentUser -s TrustedPeople
)
GOTO :EOF

:setscriptvariables
REM Parses the input to determine if we are setting this up for a single machine, client, or server
REM sets the appropriate name variables
call :setcomputername
IF [%1]==[] CALL :singlemachine
IF [%1]==[service] CALL :service
IF [%1]==[client] CALL :client

set CLIENT_NAME=client.com

GOTO :EOF

:singlemachine    
SET SUPPORTED_MODE=1
SET SETUP_CLIENT=1
SET SETUP_SERVICE=1
SET SERVER_NAME=localhost
GOTO :EOF

:service    
SET SUPPORTED_MODE=1
SET SETUP_SERVICE=1
SET EXPORT_SERVICE=1
SET SERVER_NAME=%COMPUTER_NAME%
GOTO :EOF

:client   
SET SUPPORTED_MODE=1
SET SETUP_CLIENT=1
SET EXPORT_CLIENT=1
GOTO :EOF

:setcomputername
REM Puts the Fully Qualified Name of the Computer into a variable named COMPUTER_NAME
for /F "delims=" %%i in ('cscript /nologo GetComputerName.vbs') do set COMPUTER_NAME=%%i
GOTO :EOF

:displayusage
ECHO Correct usage:
ECHO     Single Machine - Setup.bat
ECHO     Client Machine - Setup.bat client
ECHO     Service Machine - Setup.bat service
:end 
```

现在打开 Microsoft 管理控制台并选择文件 --> 添加/删除管理单元以添加证书 - 当前用户和证书 - 本地机器存储

导航到证书 - 本地计算机个人存储以查找创建和安装的名为 localhost（自签名）的服务器证书。

现在打开您的 IIS 并右键单击默认网站以添加与您在控制台应用程序中定义的端口号匹配的 HTTPS 绑定（对于我的 54321），然后选择证书为“localhost”（之前的证书在上述步骤中创建），然后单击“确定”和“关闭”

![在此处输入图像描述](../Images/cec78a2c5d339867375b79ac9204489c.png)

现在启动您的控制台应用程序以运行您的服务，然后打开 fiddler 并执行 GET 请求，如下所示：

```
GET https://rajeshwin7:54321/hello/sayhello/rajesh HTTP/1.1
User-Agent: Fiddler
Host: rajeshwin7:54321 
```

现在您收到如下回复：

```
HTTP/1.1 200 OK
Content-Length: 90
Content-Type: application/xml; charset=utf-8
Server: Microsoft-HTTPAPI/2.0
Date: Fri, 04 May 2012 14:51:25 GMT

<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">Hello, rajesh</string> 
```

当没有 IIS 存在时，打开命令提示符并在命令提示符处输入以下内容，使用 winvista 及以上操作系统中的 netsh 工具和 winxp 中的 httpcfg 为 ssl 证书进行 http 端口映射。

```
C:\> netsh http add sslcert ipport=0.0.0.0:54321 certhash=6797aea29440de9389bc636e15a35b741d8c22a3 appid={2e80948d-9ae6-42c9-ad33-294929333965} 
```

certash -- 上面创建的证书的指纹 ID。指纹 id 可以通过打开 Microsoft 管理控制台来获取 - 添加/删除本地计算机上计算机帐户证书存储的管理单元，然后导航到个人存储以找到证书（假设它已按上述方式安装），然后双击证书并导航到详细信息选项卡以查找指纹 ID 作为属性之一（只需通过删除空格将其复制以在上述 netsh 命令中使用）

appid - 是与您的应用程序关联的 guid，可以在您的项目属性文件夹中的 assembly.cs 文件中找到，如下所示：

![在此处输入图像描述](../Images/578810b7c1a0a69339d8ce794e3fefd9.png)

现在要清理证书，使用以下命令创建一个 bathc 文件并使用 Vs.NET 命令提示符执行它：

```
echo off
setlocal
set CLIENT_NAME=client.com
call :setcomputername
call :cleancerts
DEL client.cer > NUL 2>&1
DEL service.cer > NUL 2>&1
GOTO end

:cleancerts
REM cleans up certs from previous runs.
certmgr.exe -del -r CurrentUser -s My -c -n %CLIENT_NAME%
certmgr.exe -del -r CurrentUser -s TrustedPeople -c -n localhost

certmgr.exe -del -r LocalMachine -s My -c -n localhost
certmgr.exe -del -r LocalMachine -s TrustedPeople -c -n %CLIENT_NAME%
certmgr.exe -put -r LocalMachine -s My -c -n %COMPUTER_NAME% computer.cer
IF %ERRORLEVEL% EQU 0 (
   DEL computer.cer
   pause
   certmgr.exe -del -r LocalMachine -s My -c -n %COMPUTER_NAME%
)

:cleanupcompleted
GOTO :EOF

:setcomputername
REM Puts the Fully Qualified Name of the Computer into a variable named COMPUTER_NAME
for /F "delims=" %%i in ('cscript /nologo GetComputerName.vbs') do set COMPUTER_NAME=%%i
GOTO :EOF

:end 
```

您可以使用 netsh 命令删除 ssl 证书映射到端口，如下所示：

```
c:\> netsh http delete sslcert ipport:0.0.0.0:54321 
```

# php - 如何检索给定路径的最后一部分？

> ID：10274209
> 
> 赞同：0
> 
> 时间：2012-04-23T02:39:55.697
> 
> 标签：php, string

我正在编写目录列表并想获取最后一个目录的名称。

例子：

```
/data/henry/files/gallery 
```

我只想获取最后一个目录，即**gallery**。

我试过了，`substr('abcdef', 1)`但它是静态的。

我有一个将目录存储到数组中然后检索最后一个值的想法，但我该怎么做呢？

编辑：

感谢@deceze 提供简单的解决方案。

我的解决方案更长，不推荐：

```
$dirarray = explode("/",$row['source']);
$total = count($dirarray);
$sharename = $dirarray[($total-1)]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T02:41:53.783

```
echo basename('/data/henry/files/gallery'); 
```

[http://php.net/basename](http://php.net/basename)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:45:59.860

使用正则表达式怎么样？假设您的文本是`$text`可变的：

```
preg_match_all("|(/[a-z]+)$|", $text, $result); 
```

`$result`将包含`/gallery`.

# ios - UITextField clearButtonMode 颜色

> ID：10274210
> 
> 赞同：17
> 
> 时间：2012-04-23T02:40:21.027
> 
> 标签：ios, uitextfield

我可以更改 textField 上 clearButtonMode 的颜色吗？

```
theTextField.clearButtonMode = UITextFieldViewModeWhileEditing 
```

显示一个灰色的 x 以删除 textField，

但是我可以用白色显示这个按钮吗？

谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-23T02:47:39.250

在这种情况下，您需要创建自己的清晰按钮图像。我建议拍摄清除按钮的屏幕截图并在 Photoshop 中进行编辑。

您可以获取该图像并创建具有图像尺寸的 UIButton。从那里您可以将其设置为 UITextField 的 rightView。像这样：

```
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
[button setImage:[UIImage imageNamed:@"clear_button.png"] forState:UIControlStateNormal];
[button setFrame:CGRectMake(0.0f, 0.0f, 15.0f, 15.0f)]; // Required for iOS7
theTextField.rightView = button;
theTextField.rightViewMode = UITextFieldViewModeWhileEditing; 
```

我在没有语法检查的情况下输入了它，所以你需要在运行它之前检查它。您还需要将 clear_button.png 替换为您的图像名称。

您还需要编写自己的方法来清除文本字段。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-13T21:06:33.683

一种更简洁的方法是使用此方法在 UITextField 上实现一个类别：

```
- (void)modifyClearButtonWithImage:(UIImage *)image {
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setImage:image forState:UIControlStateNormal];
    [button setFrame:CGRectMake(0.0f, 0.0f, 15.0f, 15.0f)];
    [button addTarget:self action:@selector(clear:) forControlEvents:UIControlEventTouchUpInside];
    self.rightView = button;
    self.rightViewMode = UITextFieldViewModeWhileEditing;
}

-(IBAction)clear:(id)sender{
    self.text = @"";
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-10-03T12:22:30.273

斯威夫特版本：

```
extension UITextField {

    func modifyClearButtonWithImage(image : UIImage) {
        let clearButton = UIButton(type: .Custom)
        clearButton.setImage(image, forState: .Normal)
        clearButton.frame = CGRectMake(0, 0, 40, 40)
        clearButton.contentMode = .ScaleAspectFit
        clearButton.addTarget(self, action: #selector(UITextField.clear(_:)), forControlEvents: .TouchUpInside)
        self.rightView = clearButton
        self.rightViewMode = .WhileEditing
    }

    func clear(sender : AnyObject) {
        self.text = ""
    }

} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-07-11T11:40:01.290

斯威夫特 4.1 版本

```
extension UITextField {
    func modifyClearButtonWithImage(image : UIImage) {
        let clearButton = UIButton(type: .custom)
        clearButton.setImage(image, for: .normal)
        clearButton.frame = CGRect(x: 0, y: 0, width: 40, height: 40)
        clearButton.contentMode = .scaleAspectFit
        clearButton.addTarget(self, action: #selector(UITextField.clear(sender:) ), for: .touchUpInside)
        self.rightView = clearButton
        self.rightViewMode = .whileEditing
    }

    @objc func clear(sender : AnyObject) {
        self.text = ""
        sendActions(for: .editingChanged)
    }
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-15T05:36:22.917

在您配置 textField 时，请使用：

```
let clearButton : UIButton = textField.value(forKey: "_clearButton") as! UIButton
let image = UIImage(named: "ClearWhite")

clearButton.setImage(image, for: .normal)
clearButton.backgroundColor = UIColor.clear 
```

# visual-studio-2010 - Visual Studio 2010 不会在 Chrome 默认路径中查找“chromedriver.exe”

> ID：10274213
> 
> 赞同：0
> 
> 时间：2012-04-23T02:40:56.787
> 
> 标签：visual-studio-2010, google-chrome, selenium, selenium-webdriver

我知道有几种方法可以创建新的 Chrome 驱动程序实例，最适合我的方法是将其位置作为参数传递（新 ChromeDriver（“路径”，功能））。但是，我现在想在 VM 上进行测试，并且我想从默认位置运行驱动程序（C:\Users\%USERNAME%\AppData\Local\Google\Chrome\Application\chrome.exe，如上所示[文档](http://code.google.com/p/selenium/wiki/ChromeDriver)）。我正在运行 Windows 7，当我通过 VS2010 运行测试（调试和非调试模式）时，错误消息表明它正在“TestResults\Out”文件夹中查找，因此找不到驱动程序。这是VS2010问题还是我做错了什么？

如果之前已经回答过这个问题，也很抱歉，到目前为止我发现的所有其他帖子都没有帮助:(

编辑：或者是否有必要特别说明 Win7 上的 Chrome 安装路径？我想我可以做到这一点，但更希望将事物设为默认区域，以防万一未来的 VM 默认安装路径不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:59:17.620

它与 Chrome 的位置无关。它关于**chromedriver.exe**的位置。

您必须设置`webdriver.chrome.driver`到您的系统变量中。在 Windows (XP) 中：

控制面板 -> 系统 -> 高级选项卡 -> 环境变量 -> 新建

变量的名称：`webdriver.chrome.driver`

变量值：`C:\path\to\chromedriver\chromedriver.exe`

在此处查看屏幕：http: [//tvio.cz/ae0n](http://twio.cz/ae0n)

ChromeDriver 可以在[这里下载](http://code.google.com/p/selenium/downloads/list)

# iphone - 指针问题

> ID：10274220
> 
> 赞同：0
> 
> 时间：2012-04-23T02:42:09.807
> 
> 标签：iphone, objective-c, cocoa-touch

我的 didSelectRowAtIndexPath 委托方法中有以下代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    Exercise *exerciseView = [[Exercise alloc] initWithNibName:@"Exercise" bundle:nil]; //Makes new exercise object.

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *str = cell.textLabel.text; // Retrieves the string of the selected cell.

    exerciseView.exerciseName.text = str;

    NSLog(@"%@",exerciseView.exerciseName.text);

    [self presentModalViewController:exerciseView animated:YES];
} 
```

在此，我尝试获取所选单元格的文本，并将 IBOutlet UILabel 练习名称设置为该字符串。

我的方法可以编译，但是当我运行 NSLog（在将 UILabel 设置为 str 后打印 UILabel 的文本值）时，它返回 null。我觉得这是一个指针问题，但似乎无法掌握它。任何人都可以澄清事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:14:51.420

问题是半初始化的视图控制器。在初始化子视图的内容之前需要让它构建。

练习.h

```
@property(strong, nonatomic) NSString *theExerciseName;  // assuming ARC

- (id)initWithExerciseName:(NSString *)theExerciseName; 
```

练习.m

```
@synthesize theExerciseName=_theExerciseName;

- (id)initWithExerciseName:(NSString *)theExerciseName {

    self = [self initWithNibName:@"Exercise" bundle:nil];
    if (self) {
        self.theExerciseName = theExerciseName;
    }
    return self;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    exerciseName.text = self.theExerciseName;
} 
```

从您的 didSelect 方法中调用新的初始化程序。

```
Exercise *exerciseView = [[Exercise alloc] initWithExerciseName:str]; 
```

但是请使用 cellForRowAtIndexPath 中的逻辑而不是调用它来获取该 str。

# php - 通过 PHP 删除 cPanel FTP 帐户

> ID：10274221
> 
> 赞同：1
> 
> 时间：2012-04-23T02:42:14.003
> 
> 标签：php, ftp, cpanel

我有一个创建 cpanel FTP 帐户的脚本，如下所示：

```
$url = "https://$user:$pass@$domain:2083/frontend/$skin/ftp/doaddftp.html?";
$url = $url . "login=$fuser&password=$fpass&homedir=$fhomedir&quota=$fquota";
$result = @file_get_contents($url); 
```

我试图找出删除 FTP 帐户的 URL。我看到“doaddftp.html”和 GET 参数。我假设有一种类似的方法可以删除 FTP 帐户。

有人知道网址是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:46:00.493

以下链接将对您有用

[http://docs.cpanel.net/twiki/bin/view/ApiDocs/Api2/ApiFtp#Ftp::delftp](http://docs.cpanel.net/twiki/bin/view/ApiDocs/Api2/ApiFtp#Ftp%3a%3adelftp)

注意：删除 FTP 帐户。此功能仅在 cPanel 11.27.x 及更高版本中可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-30T11:08:50.190

这会起作用：

```
$buildRequest = '/execute/Ftp/delete_ftp?user='.$username.'&destroy=0'; # To remove the home directory of the ftp acc change to 1

$openSocket = fsockopen('localhost',2082);
if(!$openSocket) {
    return "Socket error";
    exit();
}

$authString = $cPanelUser . ":" . $cPanelPass;
$authPass = base64_encode($authString);
$buildHeaders  = "GET " . $buildRequest ."\r\n";
$buildHeaders .= "HTTP/1.0\r\n";
$buildHeaders .= "Host:localhost\r\n";
$buildHeaders .= "Authorization: Basic " . $authPass . "\r\n";
$buildHeaders .= "\r\n";

fputs($openSocket, $buildHeaders);
while(!feof($openSocket)) {
    fgets($openSocket,128);
}
fclose($openSocket); 
```

# sql - SQL IF 语句问题

> ID：10274222
> 
> 赞同：1
> 
> 时间：2012-04-23T02:42:15.773
> 
> 标签：sql

我的 SQL 语句有什么问题？

```
ALTER PROCEDURE prGetDocById
    @Nbr varchar(100),
    @Type uniqueidentifier,
    @TotalRecord int output
AS
BEGIN
    IF(@Type is null)
    BEGIN
    (
        SELECT @TotalRecord = COUNT(Category) FROM Document where Nbr = @Nbr and 
            Type = (case when @Type IS not null then @Type else null end) 
        SELECT * from Document
    )
    end
    else
    begin
    (
        ...
    )
    end
end 
```

它给了我这个错误：

> 消息 156，级别 15，状态 1，过程 prGetDocById，第 12 行
> 关键字“SELECT”附近的语法不正确。
> 消息 102，级别 15，状态 1，过程 prGetDocById，第 13 行
> ')' 附近的语法不正确。
> 消息 102，级别 15，状态 1，过程 prGetDocById，第 19 行
> ')' 附近的语法不正确。

我想从`IF`语句开始，也需要返回输出，所以我的语句中会有两个选择语句。

如果我没有`IF`声明就写它，一切都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:47:12.080

您的代码应遵循以下结构：

```
IF( 1 = 1) BEGIN
    SELECT 1;
END
ELSE BEGIN
    SELECT 2;
END 
```

您的第二个条件中有大括号是不合法的，并且括号在第一个条件主体中不是合法/必要的（至少在 MS SQL Server 中不是），而不是在特定情况下。

## 括号用法

```
-- legal but pointless most of the time
IF( 1 = 1) BEGIN
(
    SELECT 1
)
END

-- illegal
IF( 1 = 1) BEGIN
(
    SELECT 1;
)
END

-- illegal
IF( 1 = 1) BEGIN
(
    SELECT 1
    SELECT 2
)
END 
```

## 具体查询

*我不明白这里的逻辑（`CASE`似乎毫无意义），但我认为这在语法上是正确的。请注意，我放在`[Type]`括号中，因为它是保留字。*

```
IF( @Type IS NULL ) BEGIN
    SELECT 
        @TotalRecord = COUNT(Category) 
    FROM Document
    where Nbr = @Nbr and [Type] = (case when @Type IS not null then @Type else null end);

    SELECT * from Document;
END
ELSE BEGIN
    SELECT 0;
END 
```

# java - 用Java实现生产者消费者

> ID：10274223
> 
> 赞同：2
> 
> 时间：2012-04-23T02:42:30.783
> 
> 标签：java, multithreading, concurrency, producer-consumer

这是作业的生产者消费者模式的实现。下面的实现有什么问题。我已经搜索了各种实现，但我无法理解我的问题所在。

> 我有一个共享队列
> 
> 我在同一个锁上同步生产者和消费者

执行

**共享队列：**

```
 class SharedQueue{
    public static Queue<Integer>   queue  = new LinkedList<Integer>();
 } 
```

**生产者线程：**

```
//The producer thread
class Producer implements Runnable{
    public void run()
    {
        synchronized (SharedQueue.queue)
        {
            if(SharedQueue.queue.size() >=5)
            {
                try {
                    SharedQueue.queue.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
            Random r  = new Random();

            int x = r.nextInt(10);
            System.out.println("Inside Producer" + x);

            SharedQueue.queue.offer(x);

            SharedQueue.queue.notify();

        }
    }
} 
```

**消费者线程：**

```
class Consumer implements  Runnable{
    public void run()
    {
        synchronized (SharedQueue.queue)
        {
            if(SharedQueue.queue.size() == 0)
            {
                try {
                    SharedQueue.queue.wait();
                } catch (InterruptedException e) {
                    e.printStackTrace();  //To change body of catch statement use File | Settings | File Templates.
                }
            }

            int k = SharedQueue.queue.remove();

            System.out.println("Inside consumer" + k);
        }
    }
} 
```

**主程序**

```
public class ProducerConsumerTest {

    public static void main(String[] args)
    {

        Thread p = new Thread(new Producer());
        Thread q = new Thread(new Consumer());

        p.start();
        q.start();

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T02:54:54.433

尝试更换：

```
if(SharedQueue.queue.size() >= 5) 
```

和：

```
while(SharedQueue.queue.size() >= 5) 
```

和这个：

```
if(SharedQueue.queue.size() == 0) 
```

和：

```
while(SharedQueue.queue.size() == 0) 
```

只是为了在调用后重新检查条件`notify()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:49:10.610

我假设您希望这是生产者消费者的无限循环。在 Eng.Fouad 更改之上，将两个同步块包围：

```
 while (true) 
```

并在消费者中添加通知

```
 int k = SharedQueue.queue.remove(); 

        // make the producer active again
        SharedQueue.queue.notify();

        System.out.println("Inside consumer " + k); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-16T03:59:47.787

实现生产者消费者问题的简单方法是使用信号量。

```
public class Semaphore {
    int value;

    public Semaphore(int intialValue) {
        this.value = intialValue;
    }

    public synchronized void p() {
        while (value <= 0) {
            try {
                this.wait();
            } catch (InterruptedException e) {
            }
        }
        value = value - 1;
    }

    public synchronized void v() {
        value = value + 1;
        this.notify();
    }
}

public class ProducerConsumerUsingSemaphore {

    private static final int SIZE = 10;

    public static void main(String[] args) {

        Semaphore full = new Semaphore(0);
        Semaphore empty = new Semaphore(SIZE);
        Semaphore mutex = new Semaphore(1);
        Vector<Integer> sQueue = new Vector<Integer>();

        Thread producerThread = new Thread(new Runnable() {

            @Override
            public void run() {

                for (int i = 0; i < 5000; i++) {
                    empty.p();
                    mutex.p();
                    System.out.println(Thread.currentThread().getName() + " is trying to insert item " + i);
                    sQueue.add(i);
                    mutex.v();
                    full.v();
                }
            }
        });

        Thread consumerThread = new Thread(new Runnable() {

            @Override
            public void run() {
                while (true) {
                    full.p();
                    mutex.p();
                    System.out.println(Thread.currentThread().getName() + " consuming item " + sQueue.remove(0));
                    mutex.v();
                    empty.v();
                }
            }
        });

        producerThread.setName("Producer");
        consumerThread.setName("Consumer");

        consumerThread.start();
        producerThread.start();

    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-29T13:17:31.957

您可以使用 ConcurrentLinkedQueue 来管理生产者和消费者的共享队列。可以使用 ConcurrentHashMap> 集合，这将有助于 Producer 并发生产，同时 Consumer 可以并发消费，并将 Producer 生成的密钥保存在另一个集合对象中，消费者可以从 ConcurrentHashMap> 中找到它的密钥并消费它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-16T08:25:23.843

```
public class ProducerAndConsumer {
    public static void main(String a[]) {
        Resource resource = new Resource();
        Producer producer = new Producer(resource);
        Consumer consumer = new Consumer(resource);
        producer.start();
        consumer.start();

    }
}

class Resource {
    private int item = 0;
    boolean flag = true;

    public void getItem() {
        while (true) {
            synchronized (this) {
                if (!flag) {
                    try {
                        System.out.println("Consumer consume item :" + item);
                        flag = true;
                        Thread.sleep(10);
                        notify();
                        wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            }
        }

    }

    public void setItem() {
        while (true) {
            synchronized (this) {

                if (flag) {
                    try {
                        item++;
                        System.out.println("Producer creating item :" + item);
                        flag = false;
                        Thread.sleep(10);
                        notify();
                        wait();
                    } catch (InterruptedException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }

            }
        }
    }

}

class Producer extends Thread {
    Resource resource = null;

    Producer(Resource resource) {
        this.resource = resource;
    }

    @Override
    public void run() {
        resource.setItem();
    }
}

class Consumer extends Thread {
    Resource resource = null;

    Consumer(Resource resource) {
        this.resource = resource;
    }

    @Override
    public void run() {
        resource.getItem();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-03T05:50:00.580

只需将我的模式与毒丸一起使用：

```
public sealed interface BaseMessage {

    final class ValidMessage<T> implements BaseMessage {

        @Nonnull
        private final T value;

        public ValidMessage(@Nonnull T value) {
            this.value = value;
        }

        @Nonnull
        public T getValue() {
            return value;
        }

        @Override
        public boolean equals(Object o) {
            if (this == o) return true;
            if (o == null || getClass() != o.getClass()) return false;
            ValidMessage<?> that = (ValidMessage<?>) o;
            return value.equals(that.value);
        }

        @Override
        public int hashCode() {
            return Objects.hash(value);
        }

        @Override
        public String toString() {
            return "ValidMessage{value=%s}".formatted(value);
        }
    }

    final class PoisonedMessage implements BaseMessage {

        public static final PoisonedMessage INSTANCE = new PoisonedMessage();

        private PoisonedMessage() {
        }

        @Override
        public String toString() {
            return "PoisonedMessage{}";
        }
    }
}

public class Producer implements Callable<Void> {

    @Nonnull
    private final BlockingQueue<BaseMessage> messages;

    Producer(@Nonnull BlockingQueue<BaseMessage> messages) {
        this.messages = messages;
    }

    @Override
    public Void call() throws Exception {
        messages.put(new BaseMessage.ValidMessage<>(1));
        messages.put(new BaseMessage.ValidMessage<>(2));
        messages.put(new BaseMessage.ValidMessage<>(3));
        messages.put(BaseMessage.PoisonedMessage.INSTANCE);
        return null;
    }
}

public class Consumer implements Callable<Void> {

    @Nonnull
    private final BlockingQueue<BaseMessage> messages;

    private final int maxPoisons;

    public Consumer(@Nonnull BlockingQueue<BaseMessage> messages, int maxPoisons) {
        this.messages = messages;
        this.maxPoisons = maxPoisons;
    }

    @Override
    public Void call() throws Exception {
        int poisonsReceived = 0;
        while (poisonsReceived < maxPoisons && !Thread.currentThread().isInterrupted()) {
            BaseMessage message = messages.take();
            if (message instanceof BaseMessage.ValidMessage<?> vm) {
                Integer value = (Integer) vm.getValue();
                System.out.println(value);
            } else if (message instanceof BaseMessage.PoisonedMessage) {
                ++poisonsReceived;
            } else {
                throw new IllegalArgumentException("Invalid BaseMessage type: " + message);
            }
        }
        return null;
    }
} 
```

# audio-streaming - 我在哪里可以获得“mediasegmenter”工具？

> ID：10274225
> 
> 赞同：0
> 
> 时间：2012-04-23T02:43:06.610
> 
> 标签：audio-streaming, http-live-streaming

我正在研究 HTTP Live 流，我认为我需要 .ts 和分段工具“mediasegmenter”，但我在 developer.apple.com 上找不到这个工具

我能得到的唯一工具是 MakeRefMovie。

我已经搜索过[https://developer.apple.com/streaming/](https://developer.apple.com/streaming/)。

MakeRefMovie 是我正在寻找的工具吗？那么如何将媒体文件分成块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:12:31.507

如果你喜欢自由，你可以使用这个：[https ://github.com/carsonmcdonald/HTTP-Live-Video-Stream-Segmenter-and-Distributor](https://github.com/carsonmcdonald/HTTP-Live-Video-Stream-Segmenter-and-Distributor)

它的用途与 Apple 的 mediasegmenter 相同，但免费且跨平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-11T05:41:22.430

它在[https://developer.apple.com/documentation/http_live_streaming/about_apple_s_http_live_streaming_tools](https://developer.apple.com/documentation/http_live_streaming/about_apple_s_http_live_streaming_tools)以及工具的描述中进行了解释：

1.  你去[https://developer.apple.com/streaming/](https://developer.apple.com/streaming/)
2.  您按照下载链接访问[https://developer.apple.com/download/more/?=HLS](https://developer.apple.com/download/more/?=HLS)。

[![在此处输入图像描述](../Images/dcd26393437a12f308f3c527f03be76b.png)](https://i.stack.imgur.com/HMLjF.png)

# c++ - opencv 重写一个压缩的视频文件

> ID：10274226
> 
> 赞同：0
> 
> 时间：2012-04-23T02:43:46.957
> 
> 标签：c++, opencv, computer-vision, video-processing, video-encoding

嘿嘿！

我有一个大小约为 500MB 的视频文件（未知压缩）。我正在试验 OpenCv 并尝试丢弃一些帧并重新保存该文件。

运行程序约 3 分钟（原始文件持续约 1 小时）我已经有 700MB 文件:(

如何保持原始文件大小并丢弃一些帧？

谢谢！！！

ps：我正在尝试使用以下代码获取原始编解码器：

```
int ex = static_cast<int>(inputVideo.get(CV_CAP_PROP_FOURCC)); 
```

但显然 ex = 0 ??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T12:20:05.193

OpenCV 不支持所有类型的容器/编解码器，例如不支持 MKV。[这个页面](http://opencv.willowgarage.com/wiki/VideoCodecs)有一个关于这个主题的有趣信息。

[此列表](http://opencv.willowgarage.com/wiki/documentation/cpp/highgui/VideoWriter)共享当前支持的一些 FourCC 代码。

# python - 为什么 listdir() 函数是 os 模块而不是 os.path 的一部分？

> ID：10274231
> 
> 赞同：2
> 
> 时间：2012-04-23T02:45:10.140
> 
> 标签：python, listdir

`os.path`模块似乎是所有路径相关功能的默认模块。然而，该`listdir()`函数是模块的一部分`os`而不是`os.path`模块，即使它接受路径作为其输入。为什么做出这个设计决定？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T03:04:58.470

`os`我个人觉得和之间的划分`os.path`有点不一致。根据文档，`os.path`应该只是与特定平台的路径一起使用的模块的别名（即，在 OS X、Linux 和 BSD 上你会得到`posixpath`，在 Windows 或古老的 Mac 上你会得到别的东西）。

```
>>> 导入操作系统
>>> 帮助（操作系统）
关于模块 os 的帮助：

姓名
    os - Mac、NT 或 Posix 的操作系统例程，具体取决于我们使用的系统。
...
>>> 帮助（os.path）
关于模块 posixpath 的帮助：

姓名
    posixpath - 对 Posix 路径名的常见操作。

```

该`listdir`函数不对*路径*本身进行操作，而是对路径标识的目录进行操作。大多数函数在`os.path`实际路径上运行，而*不是*在文件系统上运行。

这意味着其中的许多函数`os.path`是字符串操作函数，并且其中的大多数函数`os`是 IO 函数/系统调用。

例子：

*   `os.path.join`, `os.path.dirname`, `os.path.splitext`, 只是字符串操作函数。

*   `os.listdir`, `os.getcwd`, `os.remove`,`os.stat`都是系统调用，实际上触及文件系统。

反例：

*   `os.path`has `exists`, `getmtime`, `islink`, 和其他基本上是 wrappers 的`os.stat`，并触及文件系统。我认为它们分类错误，但其他人可能不同意。

**当天有趣的事实：**您不会在库文档的顶层中找到模块，但您实际上可以导入`os.path`任何平台的版本，而无需在该平台上实际运行。这记录在文档中`os.path`，

> 但是，如果您想操作始终采用其中一种不同格式的路径，您也可以导入和使用各个模块。它们都有相同的界面：
> 
> *   `posixpath`对于 UNIX 风格的路径
> *   `ntpath`对于 Windows 路径
> *   `macpath`用于旧式 MacOS 路径
> *   `os2emxpath`对于 OS/2 EMX 路径

你不能用 做同样的事情`os`，这没有任何意义。

# python - python求解未知变量的方程

> ID：10274236
> 
> 赞同：4
> 
> 时间：2012-04-23T02:46:17.203
> 
> 标签：python

有什么方法可以让我在 python 中求解一个未知值的方程（没有转置）。有没有做这种计算的库。例如：W=mg w=60,g=9.81 m=?

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T15:35:51.747

试试 SymPy

```
In [1]: from sympy import *

In [2]: m = Symbol('m')

In [3]: g = 9.81

In [4]: w = m*g

In [5]: solve(w - 60, m)
Out[5]: [6.11620795107034] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:24:48.087

scipy 优化包提供了最常用的数值求解方程算法的稳健实现。有关不同类型以及如何使用它们的更多信息，请查看此处的教程页面：

[http://docs.scipy.org/doc/scipy-0.10.1/reference/tutorial/optimize.html](http://docs.scipy.org/doc/scipy-0.10.1/reference/tutorial/optimize.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T03:35:18.797

您可能对 sympy 感兴趣：

概述：

> SymPy 是一个用于符号数学的开源 Python 库。它旨在成为一个功能齐全的计算机代数系统（CAS），同时保持代码尽可能简单，以便易于理解和易于扩展。SymPy 完全用 Python 编写，不需要任何外部库。

[http://code.google.com/p/sympy/](http://code.google.com/p/sympy/)

# objective-c - sqlite3_prepare() Objective C 的问题

> ID：10274237
> 
> 赞同：0
> 
> 时间：2012-04-23T02:46:17.607
> 
> 标签：objective-c, ios, xcode, sqlite

当这个程序运行这段代码连接SQLite数据库时，它可以通过路径测试，打开数据库，SQL在实际数据库上运行。然后它在尝试执行 sqlite3_prepare 语句时失败。它以代码 1 退出 - SQL 错误或缺少数据库。然后它将继续执行该程序，直到它尝试读取从数据库中获取的数据。然后它失败了，因为它没有得到任何东西，因为它返回了 SQL 错误或 sqlite3_prepare 语句中缺少数据库代码。我正在寻找错误的代码部分/我可以更正以使其在 sqlite3_prepared 语句上成功。

```
#import "contactDAO.h"
#import "contact.h"

@implementation contactDAO

- (NSMutableArray *) getList{
NSMutableArray *contactArray = [[NSMutableArray alloc] init];
@try {
    NSFileManager *fileMgr = [NSFileManager defaultManager];
    NSString *dbPath = [[[NSBundle mainBundle] resourcePath ]stringByAppendingPathComponent:@"iFLY.sqlite"];
    BOOL success = [fileMgr fileExistsAtPath:dbPath];
    if(!success)
    {
        NSLog(@"Cannot locate database file '%@'.", dbPath);
    }
    if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK))
    {
        NSLog(@"An error has occured.");
    }
    const char *sql = "SELECT reportNumber, dateEntered, country, state FROM CONTACT";
    sqlite3_stmt *sqlStatement;
    if(sqlite3_prepare(db, sql, -1, &sqlStatement, NULL) != SQLITE_OK)
    {
        NSLog(@"Problem with prepare statement");
    }

    //
    while (sqlite3_step(sqlStatement)==SQLITE_ROW) {
        Contact *contactInfo;

        contactInfo.reportNumber = sqlite3_column_int(sqlStatement, 0);
        contactInfo.dateEntered = sqlite3_column_int(sqlStatement, 1);
        contactInfo.country = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,2)];
        contactInfo.state = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,3)];
        /*contactInfo.county = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,4)];
        contactInfo.town = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,5)];
        contactInfo.policeContact = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,6)];
        contactInfo.policeReport = sqlite3_column_int(sqlStatement, 7);
        contactInfo.autopsyNumber = sqlite3_column_int(sqlStatement, 8);
        contactInfo.lastSeen = sqlite3_column_int(sqlStatement, 9);
        contactInfo.victimName = [NSString stringWithUTF8String:(char *) sqlite3_column_text(sqlStatement,10)]; */
        [contactArray addObject:contactInfo];
    }
}
@catch (NSException *exception) {
    NSLog(@"An exception occured: %@", [exception reason]);
}
@finally {
    return contactArray;
} 
}

@end 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:09:41.607

CONTACT 是视图还是表？从视图中选择时，我遇到了类似的问题，得到了相同的错误。当我将其更改为表格时，它起作用了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:06:52.113

您缺少“db”的声明，如下所示：

```
sqlite3 *db; 
```

我还可以看到一个清晰度问题：

```
if(!(sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK)) 
```

由于即使发现问题，您的代码也会继续评估内容，因为您不会在尝试捕获错误的那些部分之后返回。

您的执行顺序应如下所示：

```
if (sqlite3_open([dbPath UTF8String], &db) == SQLITE_OK) 
{        
    const char *sql = "SELECT * FROM table";
    sqlite3_stmt *statement;        
    if (sqlite3_prepare_v2(db, sql, -1, &statement, NULL) == SQLITE_OK) 
    {
        while (sqlite3_step(statement) == SQLITE_ROW) { /* do stuff here */ }
    }
} 
```

# iphone - 检测多个按钮被点击的最佳方法是什么

> ID：10274238
> 
> 赞同：1
> 
> 时间：2012-04-23T02:46:22.083
> 
> 标签：iphone, c++, openframeworks

我在屏幕上以编程方式绘制了几个圆圈。然后我计算出手指点击的 x 和 y 坐标与圆的 x 和 y 坐标之间的距离。

哪个距离小于任何圆的半径就是被点击的圆。真的很简单。但是我发现我有很多重复的代码，我觉得我可以清理代码，但我不确定目前最好的方法是什么。

任何帮助表示赞赏。

```
float diffx = touch.x - bass.pos.x;
float diffy = touch.y - bass.pos.y;
float dist = sqrt(diffx*diffx + diffy*diffy);
if(dist < bass.radius){

    if(recordingInfo.isRecording){
        //do some stuff related to this button unique

    }
    //play some sound
}

diffx = touch.x - treble.pos.x;
diffy = touch.y - treble.pos.y;
dist = sqrt(diffx*diffx + diffy*diffy);

if(dist < treble.radius){
    if(recordingInfo.isRecording){
        //do something related to this button
    }
    //play some sound
}

diffx = touch.x - hihat.pos.x;
diffy = touch.y - hihat.pos.y;
dist = sqrt(diffx*diffx + diffy*diffy);

if(dist < hihat.radius){
    if(recordingInfo.isRecording){

        //do shayt related to this button

    }
    //play this sound
}

diffx = touch.x - bassTwo.pos.x;
diffy = touch.y - bassTwo.pos.y;
dist = sqrt(diffx*diffx + diffy*diffy);

if(dist < bassTwo.radius){
    if(recordingInfo.isRecording){
        //do some crap regarding this indivudal button

    }
    //play another sound
}

diffx = touch.x - kick.pos.x;
diffy = touch.y - kick.pos.y;
dist = sqrt(diffx*diffx + diffy*diffy);

if(dist < kick.radius){
    if(recordingInfo.isRecording){
      //do some funky stuff related to this button
    }
    //play some sound
}

diffx = touch.x - snare.pos.x;
diffy = touch.y - snare.pos.y;
dist = sqrt(diffx*diffx + diffy*diffy);

if(dist < snare.radius){
    if(recordingInfo.isRecording){
        //
    }
    //play some sound
}

diffx = touch.x - recordButton.pos.x;
diffy = touch.y - recordButton.pos.y;
dist = sqrt(diffx*diffx + diffy*diffy);

if(dist < recordButton.radius){
    //and do some funky stuff audio visual styff gere
}    

diffx = touch.x - play.pos.x;
diffy = touch.y - play.pos.y;
dist = sqrt(diffx*diffx + diffy*diffy);
     //code execution if this circle button is hit
} 
```

或者这样好吗？我将所有这些代码放在 touchDown 方法中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:00:31.947

重复的代码是：

```
diffx = touch.x - recordButton.pos.x;
diffy = touch.y - recordButton.pos.y;
dist = sqrt(diffx*diffx + diffy*diffy); 
```

任何时间代码出现不止一次，您应该考虑将其放入函数中：

```
float distance(vec touch, vec button_center) {
    float diffx = touch.x - bass.pos.x;
    float diffy = touch.y - bass.pos.y;
    float dist = sqrt(diffx*diffx + diffy*diffy);
    return dist;
}

if(distance(touch,bass.pos) < bass.radius){
   ...
}
if(distance(touch, treble.pos) < treble.radius){
   ...
}
if(distance(touch,hihat.pos) < hihat.radius){
   ...
} 
```

当然，您还重复该检查以查看是否已按下按钮：

```
bool is_hit(Button b,vec touch) {
    return distance(b.pos,touch) < b.radius;
}

if(is_hit(bass,touch)) {}
if(is_hit(treble,touch)) {}
... 
```

这是一种非常简单的事件处理方法，并且很难在不改变程序架构的情况下进一步减少重复。如果您想要一些更灵活的东西，您可能需要研究 GUI 框架如何处理事件。关于事件的 Cocoa 文档可能是一个很好的例子：[Cocoa Event-Handling Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:00:58.870

首先，添加一些简单的实用方法：

```
- (float) distanceBetweenTouch:(UITouch*)touch andPoint:(CGPoint)point {
    float diffx = touch.x - point.x;
    float diffy = touch.y - point.y;
    return sqrt(diffx*diffx + diffy*diffy);
}

- (NSArray*) tappedButtons:(NSArray*)buttons forTouch:(UITouch*)touch {
    NSMutableArray* result = [NSMutableArray array];

    for (SomeCustomButtonType* button in buttons) {
        if ([self distanceBetweenTouch:touch andPoint:button.pos] < button.radius) {
            [result addObject:button];
        }
    }

    return result;
} 
```

然后修改您的代码以执行以下操作：

```
NSArray* allButtons = [NSArray* arrayWithObjects:bass, treble, hihat, ..., nil];
NSArray* tappedButtons = [self tappedButtons:allButtons forTouch:touch];

for (SomeCustomButtonType* button in tappedButtons) {
    if (button == bass) {
        //handle tap on the 'bass' button
    }
    else if (button == treble) {
        //handle tap on the 'treble' button
    }
    //... (handlers for other buttons)
} 
```

...或者更好的是，如果您稍微移动代码以便每个按钮知道在点击时应该做什么，您也许可以重写该`if/else`块和`for`循环，如：

```
[tappedButtons makeObjectsPerformSelector:@selector(handleTap)]; 
```

虽然，我不确定单击将如何与多个按钮相交，除非您的按钮部分重叠。

# android - 在另一个 Activity 中从 SQLite 数据库中检索数据

> ID：10274240
> 
> 赞同：0
> 
> 时间：2012-04-23T02:46:36.767
> 
> 标签：android

我创建了 3 个活动，包括用于数据库的 DBAdapter。一种用于保存数据，另一种用于从 DBAdapter 类中创建的 SQLite 数据库中检索数据。数据库的创建已成功完成。

用于保存的 mainActivity 代码：

```
DBAdapter db=new DBAdapter(this); 
save=(Button)findViewById(R.id.save);
 save.setOnClickListener(new View.OnClickListener() 
        {

            public void onClick(View v) 
            {
                try 
                {
                    db.open();
                } 
                catch (SQLException e) 
                {
                    e.printStackTrace();
                }
                String s=nme.getText().toString();
                String em=email.getText().toString();

                long id=db.insertContact(s,em);
                Toast.makeText(DataActivity.this, "Saved", 20).show();
                db.close();
            }
    }); 
```

为了检索数据，我在另一个名为 RetrieveActivity 的 Activity 中创建了对象

用于检索的 RetrieveActivity 代码：

```
DBAdapter db=new DBAdapter(this);
        try {
            db.open();
        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        srch.setOnClickListener(new View.OnClickListener() 
        {   
            public void onClick(View v) 
            {
                Cursor c=db.getAllContacts();
                no1.setText(c.getString(0));
                nm1.setText(c.getString(1));
                em1.setText(c.getString(2));

            }
        });

    db.close(); 
```

但是在单击用于检索“强制关闭命令”的按钮时发生了。我的疑问是为 DBAdapter 创建对象。我可以使用来自其他 Activity 的对象访问 Created 数据库吗？

# c# - 使用 SAMAccountName 对用户进行身份验证

> ID：10274241
> 
> 赞同：0
> 
> 时间：2012-04-23T02:46:59.950
> 
> 标签：c#, login, active-directory, directoryservices

我是新来的，所以请耐心等待我的解释。我目前的任务是创建这个 AD 门户登录页面，用户必须在其中输入他们的用户 ID 和密码。

但是，当我在网上进行了很多搜索时，我发现无法同时使用 UserID 和 Password 对用户进行身份验证，因为 SAMAccountName 只需要 UserID。

这里的事情是我必须验证的用户不是我用于 LDAP 连接登录的用户。LDAP 连接将始终是相同的管理员 ID 和密码，而我必须验证的用户是不同的用户。

Web 上显示的大多数示例说明 LDAP 用户 ID 和 SAMAccountName 使用相同的用户 ID。但是，这不适用于我的情况。

因此，我想问。是否可以使用 SAMAccountName 验证用户的用户 ID 和密码？希望您能够提供代码示例，因为与这里的大多数人相比，我不是经验丰富的程序员。谢谢。

```
 public SearchResult GetADUser(string UserID, string Password)
    {
         SearchResult results;

         try
         {
               DirectoryEntry de = GetDirectoryObject(CommonConstant.LDAP_CONNECTION_STRING);
               de.Username = CommonConstant.AD_ADMIN_ID;
               de.Password = CommonConstant.AD_ADMIN_Password;

               DirectorySearcher deSearch = new DirectorySearcher();
               deSearch.SearchRoot = de;

               deSearch.Filter = "(&(objectClass=user)(objectCategory=person)(samaccountname=" + UserID + "))";
               deSearch.SearchScope = SearchScope.Subtree;
               results = deSearch.FindOne();
          }
          catch (Exception ex)
          {
               throw new Exception(String.Format("GetADUser() returned {0}, \"{1}\"", ex.StackTrace, ex.Message));
          }

          return results;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:21:57.153

你做了很多假设，其中一些假设根本不正确。

是的，确实要能够访问 LDAP，您需要用户名和密码。确实，许多示例使用提供的凭据来针对 LDAP 进行身份验证，以便......好吧，针对 LDAP 进行身份验证。

问题是你不需要做任何这些。你说它是一个“AD 门户”，我认为这意味着它是一个 Web 应用程序。由于您使用的是 C#，我假设您使用的是 asp.net。如果您使用的是 asp.net，那么您可以简单地使用 ASP.NET 成员身份系统来使用针对 AD 的 Windows 身份验证进行身份验证。它或多或少是“内置”的。

您不需要执行 LDAP 查询。你把问题复杂化了。这非常非常简单。

除非您正在尝试做一些非常具体的事情，否则对于简单的 AD 登录页面，您确实走错了路。

# lucene - 如何从 Nutch 索引中读取内容？

> ID：10274242
> 
> 赞同：4
> 
> 时间：2012-04-23T02:47:02.820
> 
> 标签：lucene, nutch

*我可以使用Nutch*抓取和索引网页，但我不知道如何读取索引并从中提取数据。

谁能向我介绍一些有用的工具来阅读索引？

我想添加一个*中文分析器*和一个`IndexFilter`插件，所以我想阅读索引来验证我的插件。而且，我想对使用 Java 抓取的数据进行一些处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:11:00.470

使用[luke 工具](http://code.google.com/p/luke/)浏览 nutch 索引。转储索引选项可以为整个索引创建一个 xml 文件。如果你必须通过代码来做，那么你需要学习 lucene。

要阅读爬取的内容，请使用[nutch 段阅读器](http://wiki.apache.org/nutch/nutch-0.8-dev/bin/nutch_segread)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T09:07:59.403

您可以使用提供的读取命令，例如

```
bin/nutch readseg xxx 
```

阅读内容。

希望[这](http://arifn.web.id/blog/2010/11/29/simple-crawling-with-nutch.html)会对你有所帮助。

# php - PHP mkdir() 和 move_uploaded_file() 权限被 777 拒绝

> ID：10274249
> 
> 赞同：1
> 
> 时间：2012-04-23T02:48:17.940
> 
> 标签：php, iis, file-upload, mkdir, 777

我正在为一个客户端编写一个 PHP 脚本，该脚本将安装在我没有后端访问权限的服务器上。我只能访问特定的文件夹和数据库。

我的脚本将上传文件并创建文件夹。但是，当我尝试运行`mkdir()`和`move_uploaded_file()`. 以下是条件：

*   运行 IIS 6 和 PHP 5.1.2 的服务器（我知道这是一种糟糕的、古老的混合）
*   我尝试创建目录并上传文件的文件夹具有 777 权限
*   文件夹一直到 web 根有 777 权限
*   文件上传已开启
*   上传的文件很小，在`upload_max_filesize`范围内

关于为什么这不起作用的任何想法？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:24:43.663

为了检查网络服务的权限，右键单击文件或文件夹名称，然后转到安全选项卡，查看是否添加了网络服务帐户并提供了完整权限。

# ruby-on-rails-3 - Rails：表上的belongs_to列

> ID：10274255
> 
> 赞同：0
> 
> 时间：2012-04-23T02:49:18.670
> 
> 标签：ruby-on-rails-3, facebook-graph-api

我正在查看 fb_graph api gem，它在迁移中有一些代码[https://github.com/nov/fb_graph_sample/blob/master/db/migrate/20110623075710_create_subscriptions.rb](https://github.com/nov/fb_graph_sample/blob/master/db/migrate/20110623075710_create_subscriptions.rb)我无法弄清楚，即列类型，它有`belongs_to`，这不是典型的列类型。

```
class CreateSubscriptions < ActiveRecord::Migration
  def self.up
    create_table :subscriptions do |t|
      t.belongs_to :facebook
      t.string :object, :fields, :verify_token
      t.text :history_json
      t.timestamps
    end
  end

  def self.down
    drop_table :subscriptions
  end
end 
```

我理解`belongs_to` `has_many`Rails 中的关联，因为它们通常被使用，但它们从不需要属于类型的列，而且我不希望数据库接受这种类型的列。

此外，在模型[https://github.com/nov/fb_graph_sample/blob/master/app/models/subscription.rb](https://github.com/nov/fb_graph_sample/blob/master/app/models/subscription.rb)中声明了 belongs_to Facebook，但我不知道数据库列的实际使用方式。谁能解释一下？

```
class Subscription < ActiveRecord::Base
  belongs_to :facebook

  validates :facebook, :object, :fields, :history_json, :verify_token, :presence => true

  before_validation :setup, :on => :create

  def history
    JSON.parse(self.history_json)
  end

  def history=(history)
    self.history_json = history.to_json
  end

  def subscribe!(callback)
    Facebook.app.subscribe!(
      :object => self.object,
      :fields => self.fields,
      :callback_url => callback,
      :verify_token => self.verify_token
    )
  end

  private

  def setup
    self.verify_token = ActiveSupport::SecureRandom.hex(16)
    self.history = []
  end

end 
```

这是 Facebook.rb 模型的链接[https://github.com/nov/fb_graph_sample/blob/master/app/models/facebook.rb](https://github.com/nov/fb_graph_sample/blob/master/app/models/facebook.rb)

脸书.rb

```
class Facebook < ActiveRecord::Base
  has_many :subscriptions

  def profile
    @profile ||= FbGraph::User.me(self.access_token).fetch
  end

  class << self
    extend ActiveSupport::Memoizable

    def config
      @config ||= if ENV['fb_client_id'] && ENV['fb_client_secret'] && ENV['fb_scope'] && ENV['fb_canvas_url']
        {
          :client_id     => ENV['fb_client_id'],
          :client_secret => ENV['fb_client_secret'],
          :scope         => ENV['fb_scope'],
          :canvas_url    => ENV['fb_canvas_url']
        }
      else
        YAML.load_file("#{Rails.root}/config/facebook.yml")[Rails.env].symbolize_keys
      end
    rescue Errno::ENOENT => e
      raise StandardError.new("config/facebook.yml could not be loaded.")
    end

    def app
      FbGraph::Application.new config[:client_id], :secret => config[:client_secret]
    end

    def auth(redirect_uri = nil)
      FbGraph::Auth.new config[:client_id], config[:client_secret], :redirect_uri => redirect_uri
    end

    def identify(fb_user)
      _fb_user_ = find_or_initialize_by_identifier(fb_user.identifier.try(:to_s))
      _fb_user_.access_token = fb_user.access_token.access_token
      _fb_user_.save!
      _fb_user_
    end
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:14:09.183

你一个问题有很多问题，一个 about `belongs_to`，你会在这里找到答案：[t.belongs_to in migration](https://stackoverflow.com/questions/9471091/t-belongs-to-in-migration)。

# apache - Zend框架中的数据库配置

> ID：10274259
> 
> 赞同：0
> 
> 时间：2012-04-23T02:49:41.540
> 
> 标签：apache, zend-framework

当与 zend 框架中的数据库连接相关时出现错误。服务器是运行 apache 的 unix 服务器。

这是我的 application.ini 配置

`resources.db.adapter = "pdo_mysql"`

`resources.db.params.host = "localhost"`

`resources.db.params.username = "a5633138_hotel"`

`resources.db.params.password = "passowrd"`

`resources.db.params.dbname = "a5633138_hotel"`

`resources.db.isDefaultTableAdapter = true`

如果它是实时服务器，我是否需要配置其他东西，例如，如果我在主机部分写 localhost 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:42:19.023

用以下内容替换您的 ErrorController.php

```
<?php

class ErrorController extends Zend_Controller_Action
{

    public function errorAction()
    {
        $this->_helper->layout()->disableLayout();
        $errors = $this->_getParam('error_handler');

        if (!$errors || !$errors instanceof ArrayObject) {
            $this->view->message = 'You have reached the error page';
            return;
        }

        switch ($errors->type) {
            case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ROUTE:
            case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_CONTROLLER:
            case Zend_Controller_Plugin_ErrorHandler::EXCEPTION_NO_ACTION:
                // 404 error -- controller or action not found
                $this->getResponse()->setHttpResponseCode(404);
                $priority = Zend_Log::NOTICE;
                $this->view->message = 'Page not found';
                break;
            default:
                // application error
                $this->getResponse()->setHttpResponseCode(500);
                $priority = Zend_Log::CRIT;
                $this->view->message = 'Application error';
                break;
        }

        // Log exception, if logger available
        $log = $this->getLog();
        if ($log) {
            $log->log($this->view->message, $priority, $errors->exception);
            $log->log('Request Parameters', $priority, $errors->request->getParams());
        }

        // conditionally display exceptions
        if ($this->getInvokeArg('displayExceptions') == true) {
            $this->view->exception = $errors->exception;
        }

        $this->view->request   = $errors->request;
    }

    public function getLog()
    {
        $bootstrap = $this->getInvokeArg('bootstrap');
        if (!$bootstrap->hasResource('Log')) {
            return false;
        }
        $log = $bootstrap->getResource('Log');
        return $log;
    }

} 
```

# javascript - 使用类似 JQuery 的选择器语法以编程方式编辑 Less (css) 代码？

> ID：10274260
> 
> 赞同：8
> 
> 时间：2012-04-23T02:49:57.370
> 
> 标签：javascript, jquery, css, less

可以使用 less.js 中的库从浏览器中的 less 文件动态重新生成 css。如果有一种简单的方法可以修改更少的代码，这将是一种非常强大的动态更新站点 css 的方法。

想象一下，您有一种在整个大型站点中使用了 100 次的颜色。如果您想仅使用 javascript 动态更改该颜色，则需要更新具有该颜色的每一位 css（可能是 50 行代码）。

根据我的想象，你需要写的是这样的：

```
$('@mainColour').value('#F04'); 
```

我正在考虑自己尝试一下，但这听起来像是一个巨大的项目，我想知道是否有人已经开始了这样的事情？

编辑：澄清一下，理想情况下，我想要做的是获取一串 Less 代码，以编程方式对其进行编辑（可能使用类似 jquery 的选择器语法），然后将其作为修改后的 Less 吐出。理想情况下，代码在 Javascript 中（但不一定是客户端） 我上面给出的示例是一种可能的应用程序，但可能不是一个好的应用程序（可能有更好更常见的实现方法）。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-19T02:10:56.133

这绝对是可能的，但我不得不稍微修改一下较少的源代码（我认为这很好，考虑到它真的不应该这样做:)）

我想大家都想先看一个demo，点这里：http: [//jsfiddle.net/kritzikratzi/BRJXU/1/](http://jsfiddle.net/kritzikratzi/BRJXU/1/) （script-window只包含修改过的less.js-source，感兴趣的都在html窗口中）

kk，我先解释一下我的补丁，用法在最后。

## 补丁由三部分组成

**添加实用功能**

```
less.Overrides = {}; 
less.Override = function( variableName, value ){
    if( !value ){
        delete less.Overrides[variableName]; 
    }
    else{
        less.Overrides[variableName] = value; 
    }
    less.refreshStyles(); 
}; 
```

将属性保存到一个对象中，并告诉更少更新它的样式。

**修改解析函数**

```
 function parse(str, callback ){
        ... 

        var overrides = "\n\n"; 
        for( var key in less.Overrides ){
            overrides += key + ": " + less.Overrides[key] + ";\n"; 
        }

        str += overrides; 
```

我们在这里所做的就是序列化被覆盖的属性并将它们添加到每个被解析的文件的末尾。

**修改 loadStyles 函数**

```
 if (styles[i].type.match(typePattern) || styles[i].hasAttribute( "lessText" )) {
        var lessText; 
        if( styles[i].hasAttribute( "lessText" ) ){
            lessText = styles[i].getAttribute( "lessText" );
        }
        else{
            lessText = styles[i].innerHTML || ''; 
            styles[i].setAttribute( "lessText", lessText );
        }
    .... 
```

默认情况下，less 将替换类型参数 from `<style type='text/less'>`to`type='text/css'`并忘记了 less-source。为了防止这种情况，原始的 less-source 被存储和加载。

## 用法和结论

```
<style type="text/less">
    @color: green; 

    #header{ color: @color; }
</style>
<div id="header">i'm the header!</div>
<a href="#" onclick="less.Override('@color', 'red');">make it red</a> 
```

这在我的电脑上工作得很好，我不得不承认它看起来很整洁。我还没有测试过外部较少的文件，如果它们不起作用，应该很容易修复。

我仍然认为在生产环境中使用它不是最好的主意（出于其他人已经提到的原因）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T04:48:01.487

虽然我同意@Baz1inga 的观点，一般来说，通过添加和删除类更容易做到这一点，但我也知道在某些情况下 LESS 样式的变量效果更好（例如，如果颜色有时是前景，有时是背景，或者是在某些地方减轻）。这绝对是可行的；事实上，这里有一些经过测试的代码可以做到这一点（减去 jQuery 风格的语法；有什么特别的原因需要这样做吗？）：

```
function update_css(newcss) {
    var id = "styleholder";
    if ((css = document.getElementById(id)) === null) {
        css = document.createElement('style');
        css.type = 'text/css';
        css.id = id;
        document.getElementsByTagName('head')[0].appendChild(css);
    }
    if (css.styleSheet) { // IE
        try {
            css.styleSheet.cssText = newcss;
        } catch (e) {
            throw new(Error)("Couldn't reassign styleSheet.cssText.");
        }
    } else {
        (function (node) {
            if (css.childNodes.length > 0) {
                if (css.firstChild.nodeValue !== node.nodeValue) {
                    css.replaceChild(node, css.firstChild);
                }
            } else {
                css.appendChild(node);
            }
        })(document.createTextNode(newcss));
    }
}

lessvars = {mycolor: "red"};

maincode = "div { color: @mycolor; }"; // this would be a long string, loaded via AJAX from a LESS file on the server

function compile_less(variables) {
    var variable_less = "";
    for (var variable in variables) {
        variable_less += "@" + variable + ": " + variables[variable] + ";";
    }
    new(less.Parser)({
        optimization: less.optimization
    }).parse(variable_less + maincode, function (e, root) {
        update_css(root.toCSS());
    });
}

compile_less(lessvars);

function set_less_var(name, value) {
    lessvars[name] = value;
    compile_less(lessvars);
} 
```

上面的“update_css”函数来源于less.js中的“createCSS”函数；其余的我写。您现在可以随时执行以下操作来更改颜色并使效果立即出现在站点内容中：

```
set_less_var("mycolor", "green"); 
```

（请注意，当然，您的“主代码”可能应该在后台从 .less 文件中加载——为简单起见，我只是将它们分配给变量。）

只是为了好玩（因为我不推荐它） - 并向您展示我认为我的代码可以满足您的需求 - 这是一个允许您使用上述代码执行的函数`$("@mycolor").value("black");`：

```
function $(varname) {
    return {
        value: function(val) {
            set_less_var(varname.slice(1), val);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-05T15:31:56.697

如果您在浏览器中本地使用 less 编译器，现在有一个[功能可以修改 less 变量](http://lesscss.org/usage/#using-less-in-the-browser-modify-variables)：

```
less.modifyVars({
 '@buttonFace': '#5B83AD',
 '@buttonText': '#D9EEF2'
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T08:02:50.070

它可能，只是可能是一个很好的 idéer，但如果你的 css / html 是正确的，那么这根本就没有必要，你只需要以正确的方式使用 css，如果你有很多“a”标签，你就可以堆叠你的类。如果您有非常大的网站，您的客户可能对字体等一些小变化非常挑剔，那么定制您的结果很好，然后很容易通过 CSS 摆脱它，而不是制作更多变量来获得结果

如果你想改变一种颜色，你只需使用你的查找工具并使用查找和替换。

请使用一些 css 和通用知识来获得结果，操作您网站的脚本越多，加载时间就越长。

此致

SP

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T06:12:35.983

如果您可以使用 c# 并希望在服务器端执行此操作，则 port dotless 支持插件，您可以在其中实现访问者模式，以便在输出之前以编程方式更改 less ast...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T03:01:22.607

> 首先javascript不能写入文件。您能做的最好的事情就是让 Javascript 读取和编辑 XML，然后将该数据发布到服务器端脚本以写入文件。

一般来说，人们使用不同的类来解决这个问题并用新类替换现有类，而不是去编辑 css 文件本身，这对我来说听起来很奇怪..

我偶然发现[这篇博文](http://www.thesitewizard.com/javascripts/change-style-sheets.shtml)可能就是你要找的东西。他展示了根据你的要求获取新闻样式表的不同方法。

# android - 注销功能android

> ID：10274263
> 
> 赞同：0
> 
> 时间：2012-04-23T02:50:21.917
> 
> 标签：android, logout

在我的应用程序中，我有一个登录和注销机制。我想在用户按下注销按钮时清除任务堆栈，这样当他再次启动应用程序时，他将不得不再次登录。我在网上查了一下，大多数情况下人们都是用这个来完成的：

```
Intent i = new Intent(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_HOME);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
i.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(i);
finish(); 
```

使用此代码会发生这种情况：

主页->登录活动（主启动器活动）[用户名和密码字段为空白]->单击注销->主页，然后当我这样做时：

从主页->启动应用程序（在登录屏幕中，用户名和密码仍然存在）->按返回按钮导航到主页->再次启动应用程序->用户名和密码已清除

编写注销功能的更好方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:30:55.073

您可以将用户名和密码保存在共享首选项数据库中。当用户注销时，然后在同一键中清除数据库中的值。

如果用户直接退出应用程序而不注销检查用户名和密码是否已经存在，您可以将它们显示到编辑文本中。

保存在数据库中

```
 SharedPreferences settings = getSharedPreferences("DB_NAME", 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.putString("user", username);
    editor.putString("pass", password);
    editor.commit(); 
```

从数据库中清除

```
 SharedPreferences settings = getSharedPreferences("DB_NAME", 0);
    SharedPreferences.Editor editor = settings.edit();
    editor.remove("user");
    editor.remove("pass");
    editor.clear();
    editor.commit(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:02:40.037

覆盖 Application 类并创建一个公共字段（或使用 getter/setter 的私有字段）。

在应用程序类中：

```
public boolean loginDialogShown = false; 
```

在登录对话框代码中：

```
MyApplication.loginDialogShown = true; 
```

在活动中：

```
if (!MyApplication.loginDialogShown){ loginDialog.show(); } 
```

[http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/](http://www.devahead.com/blog/2011/06/extending-the-android-application-class-and-dealing-with-singleton/)

# java - 如何将所有传出请求捕获到本地计算机上的端口？

> ID：10274266
> 
> 赞同：0
> 
> 时间：2012-04-23T02:51:43.707
> 
> 标签：java, windows, redirect, port, capture

我想捕获连接端口 11111 的所有尝试，并将它们重定向到在我的本地计算机上运行的 java 应用程序。

我打算用它来映射网络请求。

所以我想在浏览器中输入[http://google.com:11111 。](http://google.com:11111)

然后将该请求重定向到我在端口 11111 上运行的本地应用程序。我的本地应用程序需要知道请求的 url。

我正在运行 Windows 7 PC，因此需要 Windows（不是 linux）解决方案。

编辑：额外信息。

我想要这个的原因是我希望能够通过 http 隧道访问一堆 Intranet Web 服务。我希望能够从我的家用机器上执行[http://someintranetserver:11111](http://someintranetserver:11111)并让它通过隧道路由。我正在谈论的代理不支持 CONNECT 方法。

编辑：更多信息。

我试图将所有请求重定向到的程序是我正在开发的一个 java 应用程序，所以理想情况下我想要一个 java 解决方案来解决这个问题。

如果 java 无法做到这一点，那么可以重定向到我的本地应用程序的第三方应用程序就足够了。

干杯，彼得

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:24:47.217

听起来最简单的解决方案是设置一个 HTTP 代理并通过它路由所有 HTTP 流量。在 Windows 中，您可以直接在控制面板中的网络连接上设置代理。Firefox / chrome 可能有自己的设置。至于Java中的代理实现，请在谷歌周围搜索。有吨。像这个： [http ://dev.littleshoot.org/littleproxy/](http://dev.littleshoot.org/littleproxy/)

这可能不是您所希望的。我不确定 Java 是否能够以您想要的方式解决这个问题——您可能需要使用 C# 或更容易访问操作系统内部的东西。

也许您可以详细说明您*为什么*要这样做……也许有更好、更简单的方法来实现您的最终目标。

# jquery - 用分号分隔的 jquery 值

> ID：10274268
> 
> 赞同：0
> 
> 时间：2012-04-23T02:51:52.807
> 
> 标签：jquery

的值`tousers`让用户用分号分隔。

```
<input type='text' class='tousers' value='admin;user1;user2;user3;useradmin;' /> 
```

`admin`如果分号之间已经存在，我该如何搜索？所以下面的代码不会添加`admin`，`tousers`因为它已经存在。

```
var content = 'admin';

var to = input.find('.tousers').val();

if(to == "") {
    input.find('.tousers').val(content);
} else {
    input.find('.tousers').val(to + ';' + content);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:55:58.790

```
var content = 'admin';

var text = jQuery('.rousers').val();

var values = text.split(';')

var contentExists = jQuery.inArray(content, values) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T02:58:44.847

您可以使用正则表达式来测试字符串是否已经在值中：

```
new RegExp("(^|;)" + content + "(;|$)").test(to) 
```

（使用 indexOf 是不够的）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T03:01:43.620

如果新项目已经不可用，这会将新项目添加到`tousers`输入元素，否则会显示警报“已经存在”

```
 $(function(){
      var newContent = 'user1';  
      var existingContent=$(".tousers").val()
      var existingArr=existingContent.split(";")
      var isPresent=$.inArray(newContent ,existingArr)       
      if(isPresent<0)
      {       
          $(".tousers").val(existingContent+newContent+";" );
      }
      else      
      {
         alert("Already present");
      }    
    }); 
```

工作样本：http: [//jsfiddle.net/WsELx/11/](http://jsfiddle.net/WsELx/11/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T02:55:07.800

```
if(/\badmin\b/.test('admin;user1;user2;user3;useradmin;')) // has admin inside your string 
```

或者在你的情况下

```
if(/\badmin\b/.test(to)) 
```

正则表达式`\badmin\b`在字符串中搜索 - 以 2 个单词边界为界的管理员

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T03:03:34.717

你可以使用`$.inArray(value, array)`

```
var content = 'admin';
var to = $('.tousers').val();
var array = to.split(';');

if ($.inArray(content, array) == -1){
   $('.tousers').val(to + ';' + content); 
} 
```

# mysql - 为什么使用 INT 选择包含数字的 Varchar 索引比使用字符串慢得多？

> ID：10274272
> 
> 赞同：5
> 
> 时间：2012-04-23T02:53:15.073
> 
> 标签：mysql, indexing, innodb, database-performance

我有一个包含数千行的表，其中有一个包含数字的 Varchar 列。尽管当时讨论了为什么该列不是数字类型，但从该表中选择行显示出一种奇怪的行为。

尽管该列上有索引，但使用数字字符串查找行（0.01 秒）比使用 Ints（0.54 秒）快得多。这是什么原因？它似乎无法转换和使用索引的值......

我忽略了什么吗？看起来它没有将 Int 用于索引？我是否必须提供有关索引使用的提示，或者是否有数据库切换来完成此操作？或者如果我误解了解释输出，那么为什么它会慢得多？

表格布局以显示示例：

```
CREATE TABLE `example` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `stuff` varchar(45) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `idx_stuff` (`stuff`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

这里它使用字符串作为索引：

```
explain select * from example where stuff='200';
----+-------------+---------+------+---------------+-----------+---------+-------+------+--------------------------+
| id | select_type | table   | type | possible_keys | key       | key_len | ref   | rows | Extra                    |
+----+-------------+---------+------+---------------+-----------+---------+-------+------+--------------------------+
|  1 | SIMPLE      | example | ref  | idx_stuff     | idx_stuff | 137     | const |    1 | Using where; Using index |
+----+-------------+---------+------+---------------+-----------+---------+-------+------+--------------------------+ 
```

这里看起来它没有将 Int 转换为用于查找索引的字符串：

```
explain select * from example where stuff=200;
+----+-------------+---------+-------+---------------+-----------+---------+------+------+--------------------------+
| id | select_type | table   | type  | possible_keys | key       | key_len | ref  | rows | Extra                    |
+----+-------------+---------+-------+---------------+-----------+---------+------+------+--------------------------+
|  1 | SIMPLE      | example | index | idx_stuff     | idx_stuff | 137     | NULL |    2 | Using where; Using index |
+----+-------------+---------+-------+---------------+-----------+---------+------+------+--------------------------+ 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-08T00:15:51.900

如[手册](http://dev.mysql.com/doc/en/type-conversion.html)所述：

> 对于字符串列与数字的比较，MySQL 不能使用列上的索引来快速查找值。如果***`str_col`***是索引字符串列，则在以下语句中执行查找时不能使用索引：
> 
> ```
> SELECT * FROM *tbl_name* WHERE *str_col* =1;
> ```
> 
> 这样做的原因是有许多不同的字符串可以转换为 value `1`，例如`'1'`,`' 1'`或`'1a'`。

如有必要，您始终可以[`CAST`](http://dev.mysql.com/doc/en/cast-functions.html#function_cast)将整数转换为字符串以利用索引：

```
SELECT * FROM example WHERE stuff = CAST(200 AS CHAR); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-23T22:33:34.443

**警告：**如果索引的字符集不匹配，MySQL 也可能会跳过索引，即使两个值都是`CHAR`. 如果以下查询不起作用：

```
SELECT * FROM example WHERE stuff = CAST(200 AS CHAR); 
```

然后，通过运行获取您的数据库字符集并在如下语句中`show variables like 'character_set_database';`使用它（此示例假设您的数据库字符集是-- 将其替换为您的值）：`CONVERT``latin1``character_set_database`

```
SELECT * FROM example WHERE stuff = CONVERT(200 USING latin1); 
```

# php - php & regexp - 数字代表什么

> ID：10274276
> 
> 赞同：2
> 
> 时间：2012-04-23T02:54:56.143
> 
> 标签：php, regex

我在正则表达式中有一个问题-

```
$template = preg_replace("/\<\!\-\-\{(.+?)\}\-\-\>/s", "{\\1}", $template); 
```

但我不知道'1'是什么意思，谁能告诉我这个？谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:56:39.077

只是你的正则表达式的第一个匹配组（在这种情况下，它`(.+?)`在你的正则表达式中），这样代码就会`{}`替换像`<!--{test}-->``{test}`

正如我们的好先生 nomaD 在下面的评论中指出的那样，最好使用`$1`而不是`\\1`在您的替换字符串中

```
$template = preg_replace("/\<\!\-\-\{(.+?)\}\-\-\>/s", "{$1}", $template);
                                                         ^^
                                                         this 
```

# c - C中的递归二进制搜索程序

> ID：10274277
> 
> 赞同：0
> 
> 时间：2012-04-23T02:54:56.800
> 
> 标签：c, binary-search

我正在尝试在 C 中创建一个递归二进制搜索函数。我想我有它，但是当我尝试编译时，对于两个递归调用，我都收到错误“在 ']' 标记之前的预期主表达式”。有谁知道为什么会这样？

我的功能：

```
int binSearch(int val, int a[], int size)
{
         int mid;
         mid=(size)/2;
         if(val==a[mid]) return a[mid];
         else if(val<a[mid]) {
              return binSearch(val, a[], (size-mid));
         }
         else if(val>a[mid]) {
              return binSearch(val, a[], size);
         }
         else return(-1);
 } 
```

其中 a[] 是排序后的数组，size 是数组的大小，val 是要搜索的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:58:39.510

你只需要通过`a`，而不是`a[]`。像这样：

```
 return binSearch(val, a, size); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-08T16:38:58.893

*

```
#include<stdio.h>
main()
{
    int arr[20],start,end,middle,n,i,item;
    printf("How many elements you want to enter in the array : ");
    scanf("%d",&n);
    for(i=0; i < n; i++)
    {
      printf("Enter element %d : ",i+1);
      scanf("%d",&arr[i]);
    }
    printf("Enter the element to be searched : ");
    scanf("%d",&item);
    start=0;
    end=n-1;
    middle=(start+end)/2;
    while(item != arr[middle] && start <= end)
    {
      if(item > arr[middle])
        start=middle+1;
      else
        end=middle-1;
      middle=(start+end)/2;
    }
    if(item==arr[middle])
      printf("%d found at position %d\n",item,middle+1);
    if(start>end)
      printf("%d not found in array\n",item);
} 
```

*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T03:58:27.247

您的代码有一个严重的错误。在编写此类算法时，您应该花一些时间列出测试用例。为了全面测试，我会编写几个循环来检查以下所有组合：

*   检查它是否适用于 0、1、2、3、4 个输入元素（元素值间隔开，以便您可以搜索现有元素之间的值），寻找小于/等于/大于每个元素的元素

这是测试工具的一些示例代码，只是为了让您开始......

```
int inputs[] = { 10, 20, 30, 40 };

for (int size = 0; size < 4; ++size)
    for (int i = 0; i <= size; ++i)
    {
        assert(binSearch(inputs[i], inputs, size) == (i == 0 ? -1 : i));
        assert(binSearch(inputs[i] - 5, inputs, size) == -1);
        assert(binSearch(inputs[i] + 5, inputs, size) == -1);
    } 
```

即使您在脑海中处理了几个这样的案例，您也可能会发现错误。

# java - JNI - 本机方法上的 UnsatisfiedLinkError

> ID：10274278
> 
> 赞同：5
> 
> 时间：2012-04-23T02:54:58.333
> 
> 标签：java, c, java-native-interface, unsatisfiedlinkerror

我正在运行 Windows XP。显然 JNI 和 UnsatisfiedLinkError 齐头并进......我注意到大多数时候，链接器错误看起来像这样：

```
java.lang.UnsatisfiedLinkError: no whatever.dll in java.library.path 
```

但这不是我的问题；Java 可以找到我的 DLL。我收到一个错误，让我认为我的方法命名错误：

```
java.lang.UnsatisfiedLinkError: NativeTest.nativemethod(lJava/lang/String;)Z 
```

我试过在 StackOverflow 上查看许多类似的问题，例如[this one](https://stackoverflow.com/questions/8418346/another-jni-c-dll-unsatisfiedlinkerror-native-method)、[this one](https://stackoverflow.com/questions/7108612/unsatisfiedlinkerror-jni)、[this one](https://stackoverflow.com/questions/7807665/unsatisfiedlinkerror-while-accessing-a-native-method)、[this one](https://stackoverflow.com/questions/8166324/jni-unsatisfiedlinkerror)和[this one](https://stackoverflow.com/questions/9905420/unsatisfiedlinkerror-when-using-jni)，但这些方法都没有奏效。我还在 Ubuntu 论坛上发现[了这个](http://ubuntuforums.org/showthread.php?t=1104419)帖子，它看起来和我遇到的问题完全相同，但是提问者没有说他们是如何解决自己的问题的（这真的很糟糕）。所有关于此的谷歌搜索都给了我一个与 java.library.path 相同的错误。

这是我的实际代码。

**NativeTest.java**

```
class NativeTest
    {

    public static native boolean nativemethod (String arg);

    public static void main (String[] args)
        {
        System.out.println(nativemethod("0123456789"));
        System.out.println(nativemethod("012"));
        }

    static { System.loadLibrary("NativeTest"); }

    } 
```

**NativeTest.h**

```
/* DO NOT EDIT THIS FILE - it is machine generated */
#include <jni.h>
/* Header for class NativeTest */

#ifndef _Included_NativeTest
#define _Included_NativeTest
#ifdef __cplusplus
extern "C" {
#endif
/*
 * Class:     NativeTest
 * Method:    nativemethod
 * Signature: (Ljava/lang/String;)Z
 */
JNIEXPORT jboolean JNICALL Java_NativeTest_nativemethod
  (JNIEnv *, jclass, jstring);

#ifdef __cplusplus
}
#endif
#endif 
```

**NativeTest.c**

```
#include <jni.h>
#include <windows.h>
#include "NativeTest.h"

JNIEXPORT jboolean JNICALL Java_NativeTest_nativemethod
    (JNIEnv* Jenv, jclass Jref, jstring Jarg)
    {
    MessageBox(NULL, "text", "title", MB_OK);
    int len = (*Jenv)->GetStringLength(Jenv, Jarg);
    return (jboolean)(len > 5);
    } 
```

**在 cmd.exe 中：** （gcc 命令是我在互联网上找到的各种命令的大杂烩。）

```
>javac NativeTest.java

>javah -jni NativeTest

>gcc -shared -I<jdk_dir>\include -I<jdk_dir>\include\win32 -oNativeTest.dll NativeTest.c -lgdi32

>java -Djava.library.path=. NativeTest
Exception on thread "main" java.lang.UnsatisfiedLinkError: NativeTest.nativemethod(Ljava/lang/String;)Z
        at NativeTest.nativemethod(Native Method)
        at NativeTest.main(NativeTest.java:8)

>java NativeTest
Exception on thread "main" java.lang.UnsatisfiedLinkError: NativeTest.nativemethod(Ljava/lang/String;)Z
        at NativeTest.nativemethod(Native Method)
        at NativeTest.main(NativeTest.java:8) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T12:20:27.807

经过半天的时间和谷歌搜索解决同样的问题后，我发现 GCC 不会生成 JVM 可以解析符号的 DLL。但是可以将正确的命令行参数传递给 GCC，然后它就可以工作了：

请参阅有关该主题的[这篇 MinGW](http://www.mingw.org/node/41)帖子。需要将“-D_JNI_IMPLEMENTATION_ -Wl,--kill-at”作为附加标志传递。不知道是否需要所有这些或只是第一个。

# mysql - MySQL - 如果不同表中的值不存在于任何行中，则删除一个表中的行

> ID：10274279
> 
> 赞同：2
> 
> 时间：2012-04-23T02:55:04.613
> 
> 标签：mysql

我想知道是否有人知道如何解决以下问题。我一直在寻找大约一周的解决方案，到目前为止，没有运气。

我们有一个网站，如果他们没有任何关联用户，我们需要删除数以万计的城市。

所以基本上，如果表“users”中不存在“city id”，我们必须删除表“cities”。假设，如果在“users.city_id”列中未找到“cities.city_id”，则我们需要从“cities”中删除任何行，这意味着没有用户与该城市相关联。

基本上需要发生的是，对于“城市”中的每一行，MySQL 需要查看 users.city_id 中的每一行以查看该值是否存在，如果存在则移动到下一行，如果不存在则删除排在城市，然后移动到下一行。

我什至不确定是否可以进行这样的查询...任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:10:13.433

如果无法访问您的完整架构，下面是我的尝试。在执行任何删除操作之前备份您的数据库，以防万一出现问题，我不想被起诉:(

```
DELETE FROM cities WHERE id NOT IN (SELECT city_id FROM USERS); 
```

# javascript - 如何检查是否选择了单选按钮之一？

> ID：10274282
> 
> 赞同：0
> 
> 时间：2012-04-23T02:55:23.790
> 
> 标签：javascript, html, forms, webforms, radio-button

我有 JavaScript 可以很好地检查文本字段和复选框，但是当涉及单选按钮时，它无法区分是否选择了其中一个选项。

如何正确执行此操作？

这就是我所拥有的：

```
validateBugForm = function()
{
    var name = document.forms["bug_form"]["Name"].value;
    var email = document.forms["bug_form"]["Email"].value;
    var tos = document.forms["bug_form"]["Accept"].checked;
    var project = document.forms["bug_form"]["project"].value;

    if (name == "")
    {
        alert("You must provide your name or nick name!");
        return false;
    }

    if (project == "")
    {
        alert("You must choose a project.");
        return false;
    }

    if (email.indexOf ('@', 0) == -1 || email.indexOf ('.', 0) == -1)
    {
        alert("You must provide your email address!");
        return false;
    }

    if (!tos)
    {
        alert("You must agree to our Terms of Services.");
        return false;
    }
} 
```

在我的表格中，我有：

```
<tr>
    <td width="30%">Choose a project in which you encountered a problem. 
    <big><font color="red">*</font></big></td></td>
    <td width="10px" class="table_td_space"></td>
    <td width="70%">
        <input type="radio" name="project" value="1" id="1">1<br>
        <input type="radio" name="project" value="2" id="2">2<br>
        <input type="radio" name="project" value="3" id="3">3<br>
        <input type="radio" name="project" value="4" id="4">4<br>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T02:58:47.910

您需要遍历所有单选按钮选项以查看是否选择了一个：

```
var projectObj = document.form1.project
var len = projectObj.length
var chosen = null;

for (i = 0; i <len; i++) {
    if (projectObj[i].checked) {
       chosen = projectObj[i].value
    }
}

if (chosen == null) {
    alert("No Radio Button Chosen")
} 
```

[http://homepage.ntlworld.com/kayseycarvey/jss3p11.html](http://homepage.ntlworld.com/kayseycarvey/jss3p11.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-11T16:35:13.023

只是一个说明，我花了一个小时来摸索这个问题，因为这很好用，除非你试图验证一个包含比这个单选元素更多的表单。由于每个单选按钮都是一个单独的表单元素，并且您试图遍历表单中的所有元素（例如，名称中带有“required_”的所有元素），这可能会混淆其余的验证或导致它始终出现“错误”，因为您最终会在遍历表单时将每个单选按钮作为单独的元素进行检查。我发现的解决方法是使用隐藏的表单字段来保存所选单选按钮的值，方法是在每个单选按钮上放置一个 onClick 事件，以便在单击时将其值传输到隐藏字段 - 并检查是否有一个值在那个隐藏的领域。并且不要

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-23T10:04:16.743

您需要遍历所有单选按钮选项以查看是否选择了一个，但是当您按住“projectObj”时，您必须调用“value”方法...

```
var projectObj = document.form1.project.value;
var len = projectObj.length;
var chosen = null;

for (i = 0; i <len; i++) {
    if (projectObj[i].checked) {
       chosen = projectObj[i].value;
    }
}

if (chosen == null) {enter code here
    alert("No Radio Button Chosen");
} 
```

那么它将取值，否则它只会返回无线电对象列表

# javascript - 使用 raphael.js 绘制直线的正确方法是什么？

> ID：10274284
> 
> 赞同：6
> 
> 时间：2012-04-23T02:55:39.187
> 
> 标签：javascript, canvas, grid, drawing, raphael

我无法使用 raphael.js 绘制简单的网格。

我正在使用 paper.path()，我的路径字符串看起来一切都很好：
![在此处输入图像描述](../Images/83dfb7437124c3fd1ef2ea9c13949980.png)

但不知何故，这会被渲染：
![在此处输入图像描述](../Images/e2065acf903d81fc26e49b10b408e323.png)

这是我用来渲染这个“网格”的代码

```
 // vertical lines
    for(var x = (this._offset.x % cellSize); x < this.width; x += cellSize){
        var vpath = "M " + x + " 0 l " + x + " " + this.height + " z";
        var vline = paper.path(vpath);
    }
    // horizontal lines
    for(var y = (this._offset.y % cellSize); y < this.height; y += cellSize){
        var hpath = "M 0 " + y + " l " + this.width + " " + y + " z";
        var hline = paper.path(hpath);
    } 
```

（在这种情况下 cellSize = 50，并且 this._offset = {x:0, y:0}）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T03:24:04.610

问题是您假设**l**采用绝对坐标，但它实际上采用相对坐标。当你写：

```
M 50 0 l 50 600 
```

您认为这意味着*从 (50,0) 到 (50, 600) 写一行，*但实际上意味着*从 (50, 0) 开始，移动 (50, 600)*。因此，倾斜的网格。

您只需要像这样编写 vpath（将**l**后的**x**和**y**替换为**0**）：

 ****```
var vpath = "M " + x + " 0 l 0 " + this.height + " z"; 
```

和：

```
var hpath = "M 0 " + y + " l " + this.width + " 0 z"; 
```****

# nhibernate - 如何使用 NHibernate 3.2 通过代码映射在多个字段上创建索引？

> ID：10274288
> 
> 赞同：0
> 
> 时间：2012-04-23T02:56:29.097
> 
> 标签：nhibernate, nhibernate-mapping

在 NHibernate 3.2 代码映射中，您可以像这样索引给定字段：

```
mapper.Class<Customer>(map =>
{
    map.Property(x => x.Address, m => m.Index("AddressIndex"));
}); 
```

我想创建一个涵盖以下字段的索引：

*   地址
*   名
*   姓

我在“地图”对象上看不到 Index 方法，也看不到允许您指定其他列的属性特定 Index 方法的重载。我怎样才能做到这一点？

编辑，我发现如果我执行以下操作：

```
mapper.Class<Customer>(map =>
{
    map.Property(x => x.Address, m => m.Index("AddressIndex"));
    map.Property(x => x.FirstName, m => m.Index("AddressIndex"));
    map.Property(x => x.LastName, m => m.Index("AddressIndex"));
}); 
```

创建了一个涵盖所有 3 列的索引，但不是按照我指定的顺序。有没有办法指定索引中的列顺序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:57:21.637

如果顺序确实很重要，那么一种选择是在生成模式后创建并执行脚本。

我记得读过这篇关于[复合索引](http://colleenmorrow.com/2011/04/07/composite-indexes-does-column-order-matter/)的文章，看起来顺序可能重要也可能**不重要**！

# ios - 将文件导入/共享到您的 iOS 应用程序的用户友好方式

> ID：10274290
> 
> 赞同：2
> 
> 时间：2012-04-23T02:56:47.907
> 
> 标签：ios, user-experience, file-sharing

该应用程序需要来自用户的文档文件。文档文件通常在 PC / 电子邮件中找到，对吗？从您的 iOS 应用程序中获取这些数据的最直观/用户友好的方式是什么？无需考虑努力或需要多长时间，重点是用户体验。

我有 ff 的想法：

1.  通过电子邮件导入/导出数据

    *   [在这里](http://www.raywenderlich.com/1980/how-to-import-and-export-app-data-via-email-in-your-ios-app)阅读一篇文章。所以你会要求你的用户通过电子邮件将文件发送给他/她自己，你的应用程序会获取数据吗？仍然有点复杂，但这是最好的方法吗？
2.  iTunes

    *   使用 iTunes 将文件从桌面拖放到您的应用程序。恕我直言，不是很直观，但我可能是错的。
3.  为用户提供网页屏幕以将他们的文件上传到服务器。

    *   这有点好，但我们想减少桌面/PC 交互。
4.  提供服务器以接受来自电子邮件的文件。

    *   与第 1 项的不同之处在于，您将要求用户将其通过电子邮件发送到您的特定电子邮件地址，服务器将存储它，应用程序将连接到服务器以获取具有所有权限 / 等的文件。这需要大量的努力，但这不是问题，只要它会增强用户体验。
5.  是否支持 Dropbox 等其他数据共享方式？任何其他最适合此目的的服务？

6.  [更新 1] Wifi / 蓝牙文件从 PC / 其他设备传输到 iPad。

7.  [更新 2] iCloud

我有没有错过什么。感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T03:54:04.240

我将使用#2 iTunes 文件共享

例如： [http ://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app](http://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app)

我更喜欢这种方式，因为您不需要互联网连接来导入、导出文件，而且就像拖放一样简单，您还可以创建文件夹，并在“文件夹中拥有受保护的文件”

# java - 有状态的 xxxServerHandle 和无状态的 yyyServerhandle 之间的区别？

> ID：10274293
> 
> 赞同：2
> 
> 时间：2012-04-23T02:58:02.970
> 
> 标签：java, netty, stateful

我查看了 Netty 文档，并在示例源类中发现了一些评论： org.jboss.netty.example.factorial.FactorialServerHandler ，在这个 src 中，一些评论：

```
 //##in org.jboss.netty.example.factorial.FactorialServerPipelineFactory
    ......
    // and then business logic.
    // Please note we create a handler for every new channel
    // because it has stateful properties.
    pipeline.addLast("handler", new FactorialServerHandler()); 
```

但是，我重新检查了其他示例，例如 TelnetServerPipelineFactory，似乎没有什么区别，句柄是由以下人员创建的：

```
 // and then business logic. 
    pipeline.addLast("handler", new TelnetServerHandler()); 
```

所有处理程序都是由带有“新”的管道创建的？Netty 中的所有示例都是有状态的？显然 Echo/Telnet 不需要保持 stateful prop。

在我的旧项目中，我使用 Netty 创建一个 Http Server 作为 RESTful 服务器，我的处理程序代码是：

```
 public class HttpServerPipelineFactory  implements ChannelPipelineFactory {
        private final HttpServerHandler handler;
        public ChannelPipeline getPipeline() throws Exception {
            ChannelPipeline pipeline = pipeline();
            pipeline.addLast("decoder", new HttpRequestDecoder());
            pipeline.addLast("aggregator", new HttpChunkAggregator(1048576));
            pipeline.addLast("encoder", new HttpResponseEncoder());
            pipeline.addLast("handler", handler); //singleton
            return pipeline;
        }
    } 
```

我的 RESTful 服务器是无状态的（这是一种`REST`含义），所以我使用了单例句柄。我是对的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T05:52:11.457

当文档说“有状态”时，这意味着状态信息作为字段存储在 ChannelHandler 中，因此不可能在不同 Channel 之间共享 ChannelHandler。如果您没有将状态信息存储为字段，则可以将其用作 Singelton。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T08:37:45.600

如果它们是无状态的，您没有理由实例化新的处理程序。但在 Http 示例中，这些处理程序*是*有状态的。他们从网络逐帧接收并将它们解析为标头和其他内容。然后如果请求被分块，聚合器将块组合成单个有效负载等。简而言之，除非您正在构建一个回显服务器，否则较低级别的处理程序可能必须是有状态的，但较高级别不需要。

# typo3 - tt_news - 强制插件从特定 id 开始

> ID：10274294
> 
> 赞同：1
> 
> 时间：2012-04-23T02:58:14.680
> 
> 标签：typo3, typoscript

在 tt_news 插件的早期版本中，flex 表单中有一些配置允许您强制插件的启动 id。 **List StartId：强制 LIST 或 LATEST 从此项目开始 [已弃用]**

在较新的版本中，这是不可能的。到目前为止我还没有遇到过这个问题，但是我现在想在页面上添加三个插件。一个最新的和两个列表。

最新和第一个列表插件将使用 jquery 循环插件链接和轮换 4 篇最新文章。

然而，在页面的下方，我有更多的新闻我想展示文章 5-12。因为我已经使用过`plugin.tt_news{excludeAlreadyDisplayedNews = 0}`，所以我可以旋转前两个插件

第三个插件（第二个列表显示文章 1-8，但我需要它显示 5-12）。有没有人对如何解决这个问题有任何想法？我已经考虑过从空白页开始使用 IFrame 5-12，它可以工作，但显然不是理想的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T11:13:56.113

您可以将此选项替换为扩展名[ttnews_selectconf](http://typo3.org/extensions/repository/view/ttnews_selectconf)。检查[TypoScript 选项](http://typo3.org/extension-manuals/ttnews_selectconf/0.2.3/view/1/4/#c1608)：“ **begin** ”和“ **max** ”参数应该是正确的选择：

```
plugin.tt_news {
  extensions {
    ttnews_selectconf {
      begin = 5
      max = 7
    }
  }
} 
```

# c - 在 Windows 上编写交互式服务器控制台

> ID：10274296
> 
> 赞同：0
> 
> 时间：2012-04-23T02:58:17.550
> 
> 标签：c, windows, console-application

我正在编写一个具有多人功能的游戏，我需要编写一个服务器控制台。一个简单的“从标准输入读取 -> 进程输入 -> 写入输出”循环将不起作用，因为服务器必须正在运行并且可能会在服务器管理员在服务器控制台中键入时打印日志消息。我已经看到了适用于 UNIX/Linux 系统的 tecla 和 Editline 库，但没有找到适用于 Windows 的任何东西。有什么好的图书馆可以做这类事情？

[如果您不理解，这与c/c++ 的交互式控制台编程](https://stackoverflow.com/questions/7537288/interactive-console-programming-for-c-c)几乎相同？但对于 Windows。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:32:21.007

这个问题有两种通用的方法：

1.  在一个线程中运行整个服务器，并使用一个使用异步 IO 的主循环来控制线程，以确定事件（传入数据包、控制台按键等）来自何处并处理它们。

    在 unix 系统中，在一些更高的 unix/linux 版本中，您有`select()`调用和一些更高级的变体，如和 epoll()`。`poll()`在 Windows 中，他们称之为[Overlapped IO](http://msdn.microsoft.com/en-us/library/ms686358%28VS.85%29.aspx)。

2.  让单独的线程管理服务器的不同部分。通常的方法是，每个客户端一个线程，加上一个控制台线程。在这里，您必须明智地使用[互斥锁](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684266%28v=vs.85%29.aspx)、[条件变量](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682052%28v=vs.85%29.aspx)等，而不是尝试编写主循环，以确保线程不会踩到彼此的脚趾。

# mysql - MySQL正则表达式匹配图像链接

> ID：10274297
> 
> 赞同：3
> 
> 时间：2012-04-23T02:58:36.880
> 
> 标签：mysql, regex

我试过这个表达

```
 SELECT * FROM `table` WHERE COL REGEXP "^([%\w-]+\.(?:jpe?g¦JPE?G¦gif¦GIF¦png¦PNG))$" 
```

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:16:06.473

@Thoman 我假设该列存储图像路径，在这种情况下，您可以只查找具有“.jpg”等扩展名的列，而不是匹配整个路径。

```
SELECT * FROM `table` WHERE col REGEXP '\.(jpe?g|gif|png)' 
```

如果你有这样的`col`with 值，`/tmp/foo.gif`那么它不会匹配`\w+`(word characters 表达式。)

希望这可以帮助。

# azure - 使用 azure Queue 的 nservicebus 本地主机

> ID：10274301
> 
> 赞同：3
> 
> 时间：2012-04-23T02:58:42.423
> 
> 标签：azure, nservicebus

似乎*nServicebus*附带的所有示例项目都设置为发送者和主机是 Web 角色和工作角色（并通过角色入口点托管）。

我需要做这样的事情：

Web 角色发送消息 --> On Premise Host 处理消息

是否可以将本地主机配置为仅使用 Azure 队列存储（而不是 MSMQ）？

我似乎在任何地方都找不到一个这样的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:59:07.857

是的，这是可能的，您只需在初始化总线时指定传输：

```
 var config = Configure.With()
                 .SpringBuilder()
                 .AzureConfigurationSource() <--- Don't use this when working on premise.
                 .XmlSerializer()
                 .UnicastBus()
                 .LoadMessageHandlers()
                 .AzureQueuesTransport()  <--- Configure Azure Storage Queues
                 .IsTransactional(true)
                 .PurgeOnStartup(false)
                 .InMemorySubscriptionStorage(); 
```

对于文档部分，我建议您查看 github：[https ://github.com/NServiceBus/NServiceBus/tree/master/Samples/Azure](https://github.com/NServiceBus/NServiceBus/tree/master/Samples/Azure)

请注意，这些示例中的大多数都旨在在 Windows Azure 中运行，因此使用了**AzureConfigurationSource**。当您在本地运行时，这将不起作用，因为它使用 RoleEnvironment 中的设置。在本地工作时不要使用**AzureConfigurationSource**。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T03:28:25.623

我没有使用 nServiceBus，但听起来 Azure 服务总线将是您在本地和 Azure 之间进行混合通信的最佳选择。

您可以使用 ServiceBus 队列，或者更智能地了解您的模型，并通过主题和订阅进行发布/订阅。

在此示例中，您可以让 Web 角色写入队列/主题，然后让本地消费者通过 REST(.NET API) 从队列/主题中读取。（参见下面链接中的示例）

查看他们的 MSDN 链接：http: [//msdn.microsoft.com/en-us/library/windowsazure/hh367516.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh367516.aspx)

当然，也许问 Udi Dahan 什么是最好的前进方式也可能是个好主意 :)

# java - Java SimpleDateFormat——输入和输出不同

> ID：10274304
> 
> 赞同：3
> 
> 时间：2012-04-23T02:59:15.990
> 
> 标签：java, date, simpledateformat

我得到日期字符串——“2012-04-19 20:51:06”。然后我通过 SimpleDateFormat 获得毫秒时间。

```
 SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
    Date d=sdf.parse("2012-04-19 20:51:06");
    long milliTime=d.getTime() 
```

那么milliTime就是1334839866000L

但是，当我将milliTime 转换为日期格式字符串时。结果是“2012-04-19 08:51:06”

```
 long time = 1334839866000L;
    Date date = new Date(time);

    SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss");
    String t = sdf.format(date); 
```

有什么问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T03:03:12.573

尝试将 HH 用于小时分量而不是 hh。

# xml - 使用 xslt 删除 XML 中同一父级下具有相同属性的相同节点

> ID：10274305
> 
> 赞同：1
> 
> 时间：2012-04-23T02:59:27.577
> 
> 标签：xml, xslt

我需要转换这个 XML 输入：

```
<root>
    <node id="a">
        <section id="a_1" method="run">
            <item id="0" method="a">
                <attribute>
                    <color>Red</color>
                    <status>1</status>
                    <condition>good</condition>
                </attribute>

            </item>

            <item id="0" method="a">
                <attribute>
                    <color>Red</color>
                    <status>1</status>
                    <condition>good</condition>
                </attribute>

            </item>
        </section>

        <section id="a_2" method="run">
            <item id="0" method="a">
                <attribute>
                    <color>Red</color>
                    <status>1</status>
                    <condition>good</condition>
                </attribute>

            </item>
        </section>

    </node>

    <node id="b">
        <section id="b_1" method="create">
            <user id="b_1a" method="x">
                <attribute>

                    <origin>us</origin>
                </attribute>

            </user>
            <user id="b_1a" method="x">
                <attribute> 
                    <origin>us</origin>
                </attribute>
            </user>
            <user id="b_1b">
                <attribute>a</attribute>
            </user>
        </section>

        <section id="b_2">
            <user id="b_1a" method="x">
                <attribute>
                    <name>John</name>
                    <origin>us</origin>
                </attribute>
            </user>
        </section>
    </node>
</root> 
```

这是预期的输出：

```
<root>
    <node id="a">
        <section id="a_1" method="run">
            <item id="0" method="a">
                <attribute>
                    <color>Red</color>
                    <status>1</status>
                    <condition>good</condition>
                </attribute>                    
            </item>               
        </section>

        <section id="a_2" method="run">
            <item id="0" method="a">
                <attribute>
                    <color>Red</color>
                    <status>1</status>
                    <condition>good</condition>
                </attribute>

            </item>
        </section>
    </node>

    <node id="b">
        <section id="b_1" method="create">
            <user id="b_1a" method="x">
                <attribute>
                    <origin>us</origin>
                </attribute>

            </user>

            <user id="b_1b">
                <attribute>a</attribute>
            </user>
        </section>

        <section id="b_2">
            <user id="b_1a" method="x">
                <attribute>
                    <name>John</name>
                    <origin>us</origin>
                </attribute>
            </user>
        </section>
    </node>
</root> 
```

注意：重复意味着所有子/子都具有相同的值，节点可以有 1 个或多个子，只要它是相同的父（id 和方法相同），我们可以假设它总是在相同的部分（id和方法相同）。

这有可能吗？请赐教

非常感谢。

干杯，约翰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T03:15:19.270

**I. 这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
     xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
     <xsl:output omit-xml-declaration="yes" indent="yes"/>
     <xsl:strip-space elements="*"/>

     <xsl:key name="kElemWithAttribs" match="*[@id and @method]"
      use="concat(generate-id(..), '+', name(), '+', @id, '+', @method)"/>

     <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template match=
      "*[@id and @method
        and
         not(generate-id()
            =
             generate-id(key('kElemWithAttribs',
                             concat(generate-id(..),
                             '+',name(), '+', @id, '+', @method)
                             )[1]
                        )
             )
         ]"/>
</xsl:stylesheet> 
```

**当应用于提供的源 XML 文档时：**

```
<root>
    <node id="a">
        <section id="a_1" method="run">
            <item id="0" method="a">
                <attribute>
                    <color>Red</color>
                    <status>1</status>
                    <condition>good</condition>
                </attribute>
            </item>
            <item id="0" method="a">
                <attribute>
                    <color>Red</color>
                    <status>1</status>
                    <condition>good</condition>
                </attribute>
            </item>
        </section>
        <section id="a_2" method="run">
            <item id="0" method="a">
                <attribute>
                    <color>Red</color>
                    <status>1</status>
                    <condition>good</condition>
                </attribute>
            </item>
        </section>
        <section id="a_2" method="run">
            <item id="0" method="a">
                <attribute>
                    <color>Red</color>
                    <status>1</status>
                    <condition>good</condition>
                </attribute>
            </item>
        </section>
    </node>
    <node id="b">
        <section id="b_1" method="create">
            <user id="b_1a" method="x">
                <attribute>
                    <origin>us</origin>
                </attribute>
            </user>
            <user id="b_1a" method="x">
                <attribute>
                    <origin>us</origin>
                </attribute>
            </user>
            <user id="b_1b">
                <attribute>a</attribute>
            </user>
        </section>
        <section id="b_2">
            <user id="b_1a" method="x">
                <attribute>
                    <name>John</name>
                    <origin>us</origin>
                </attribute>
            </user>
        </section>
    </node>
</root> 
```

**产生想要的正确结果：**

```
<root>
   <node id="a">
      <section id="a_1" method="run">
         <item id="0" method="a">
            <attribute>
               <color>Red</color>
               <status>1</status>
               <condition>good</condition>
            </attribute>
         </item>
      </section>
      <section id="a_2" method="run">
         <item id="0" method="a">
            <attribute>
               <color>Red</color>
               <status>1</status>
               <condition>good</condition>
            </attribute>
         </item>
      </section>
   </node>
   <node id="b">
      <section id="b_1" method="create">
         <user id="b_1a" method="x">
            <attribute>
               <origin>us</origin>
            </attribute>
         </user>
         <user id="b_1b">
            <attribute>a</attribute>
         </user>
      </section>
      <section id="b_2">
         <user id="b_1a" method="x">
            <attribute>
               <name>John</name>
               <origin>us</origin>
            </attribute>
         </user>
      </section>
   </node>
</root> 
```

**说明**：正确使用**[Muenchian 方法进行分组](http://www.jenitennison.com/xslt/grouping/muenchian.html)**，使用复合键：

1.  身份规则“按原样”复制每个节点。

2.  该`xsl:key`定义将元素组与字符串键值相关联。`id`如此定义的任何组都由同时具有 an和 a`method`属性的所有元素组成，并且（组中的所有元素）具有相同的父级、相同的名称、相同的`id`属性字符串值和相同的属性字符串值`method`。

3.  有一个覆盖标识模板的模板。它匹配任何同时具有 an`id`和 a`method`属性且不是其各自组中的第一个（按文档顺序）元素的元素。因为这个模板没有正文，所以所有这些匹配的元素都不会被处理，也不会被复制到输出中（我们可以说它们被“删除”了）。

4.  由于上面的 3.，只有作为其组的第一个元素的元素才与覆盖模板不匹配。因此，这些元素由身份模板匹配并复制到输出 - 完全符合要求。

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
        xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
        <xsl:output omit-xml-declaration="yes" indent="yes"/>

     <xsl:template match="node()|@*">
         <xsl:copy>
           <xsl:apply-templates select="node()|@*"/>
         </xsl:copy>
     </xsl:template>

     <xsl:template match="*[@id]">
      <xsl:copy>
        <xsl:apply-templates select="@*"/>

        <xsl:for-each-group select="*" group-by=
        "concat(generate-id(..), '+', name(), '+', @id, '+', @method)">
          <xsl:apply-templates select="."/>
        </xsl:for-each-group>
      </xsl:copy>
     </xsl:template>
</xsl:stylesheet> 
```

**解释**: 正确使用**[`xsl:for-each-group`](http://www.w3.org/TR/2007/REC-xslt20-20070123/#xsl-for-each-group)**with`group-by`属性。

# java - 在android中创建线程不起作用

> ID：10274308
> 
> 赞同：0
> 
> 时间：2012-04-23T03:00:07.430
> 
> 标签：java, android, multithreading

我有一个正在调用的方法，但是对于较新版本的 Android，它失败了。显然，这是由于缺少线程。我的方法是向我的服务器发送消息。这是代码（无线程）

```
public String sendMessage(String username, Editable message){
        BufferedReader in = null;
        String data = null;

        try{
            DefaultHttpClient client = new DefaultHttpClient();
            URI website = new URI("http://abc.com/user_send.php?username="+username+"&message="+message);

            HttpPost post_request = new HttpPost();
            post_request.setURI(website);

            HttpGet request = new HttpGet();

            request.setURI(website);
            //executing actual request
            HttpResponse response = client.execute(request);

            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while ((l = in.readLine()) != null) {
                sb.append(l);

            }
            in.close();
            data = sb.toString();
            return data;
        }catch (Exception e){
            return "ERROR";
        }
    } 
```

**现在，只是想在它周围放一个线程：**

```
 public String sendMessage(String username, Editable message){
        BufferedReader in = null;
        String data = null;
Thread sendThread = new Thread(){
        try{
            DefaultHttpClient client = new DefaultHttpClient();
            URI website = new URI("http://thenjtechguy.com/njit/gds/user_send.php?username="+username+"&message="+message);

            HttpPost post_request = new HttpPost();
            post_request.setURI(website);

            HttpGet request = new HttpGet();

            request.setURI(website);
            //executing actual request
            HttpResponse response = client.execute(request);

            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while ((l = in.readLine()) != null) {
                sb.append(l);

            }
            in.close();
            data = sb.toString();
            return data;
        }catch (Exception e){
            return "ERROR";
        }
} sendThread.start();   
} 
```

但这不起作用。我究竟做错了什么？另外，如果您发现我违反了 android 中有关 HttpClient 的任何基本规则，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T03:31:56.383

Your implementation is not correct - you did not override run() method

```
class SendThread extends Thread {
   public void run(){
        //add your implementation here
   }
} 
```

Tow start the thread

```
SendThread sendThread  = new SendThread();
sendThread.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:02:45.407

更好地了解并使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)概念。

AsyncTask 允许正确和轻松地使用 UI 线程。此类允许在 UI 线程上执行后台操作并发布结果，而无需操作线程和/或处理程序。请参阅此[链接](http://androidpartaker.wordpress.com/2010/08/01/android-async-task/)以获取示例实现

# css - box-model bug 和新的 box-sizing CSS 有什么区别？

> ID：10274312
> 
> 赞同：1
> 
> 时间：2012-04-23T03:00:33.970
> 
> 标签：css

在过去的日子里（对于某些人来说已经过去了，对于其他人来说仍然存在），盒子模型错误是他们存在的祸根。元素的宽度包括边距、边框和内边距的想法是亵渎神明的，对他们的感官来说是可憎的。因此，在成千上万的关于盒子模型黑客的互联网博客之后，我们摆脱了它。

现在我们得到 box-sizing，它会等待它，允许你指定一个包含边框、边距和填充的宽度。我们给它起了一个时髦的新名字，“CSS3 Flexbox”，现在它是设计师一直在寻找的自由。

对于那些认为盒子模型错误不是错误而将 W3C 视为实际错误的逻辑人来说，这令人惊讶。重新引入这个所谓的错误，现在我们称之为增强？

那么有人可以解释为什么这是不同的吗？老实说，我对此感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:02:42.417

> 现在我们得到 box-sizing，它会等待它，允许你指定一个包含边框、边距和填充的宽度。我们给它起了一个时髦的新名字，“CSS3 Flexbox”，现在它是设计师一直在寻找的自由。

不，我们称之为“边界框”模型。[Flexbox](http://www.w3.org/TR/css3-flexbox)是完全不同的东西。它与属性无关，[`box-sizing`属性](http://www.w3.org/TR/css3-ui/#box-sizing0)用于告诉浏览器如何计算框的尺寸。

> 对于那些认为盒子模型错误不是错误而将 W3C 视为实际错误的逻辑人来说，这令人惊讶。重新引入这个所谓的错误，现在我们称之为增强？
> 
> 那么有人可以解释为什么这是不同的吗？老实说，我对此感到困惑。

长期以来一直被认为是一个bug，因为当时只有一个真正的盒子模型（[W3C内容盒模型](http://www.w3.org/TR/CSS21/box.html)），在CSS刚刚开始学习的时候，每个人都必须遵循，而当时的[IE是害群之马](https://en.wikipedia.org/wiki/Internet_Explorer_box_model_bug)。但是后来[人们——即使是那些讨厌 IE 的人——*喜欢*这个 bug，所以边框大小被添加到 CSS3 规范中作为一个选项](http://tvtropes.org/pmwiki/pmwiki.php/Main/AscendedGlitch)。干净利落。¹

请注意，IE5.x（和怪癖模式 IE ^(2 ）将始终按照)*任何*版本的规范继续表现出错误行为，并且不支持的其他浏览器的旧版本`box-sizing`将始终遵循标准模式下的原始内容框模型（有时，但不总是，几乎是标准模式）。

* * *

¹ [现在至少有两种，原始的 W3C 内容框模型和“新”边框框模型。[Mozilla 还在探索](https://developer.mozilla.org/En/CSS/Box-sizing)第三种[*填充框*](https://developer.mozilla.org/En/CSS/Box-sizing)模型，但这与我们在这里讨论的内容并不真正相关，并且无论如何它都有被从 CSS3 UI CR 中删除的风险。]

² [根据您的要求，这可能被视为“功能”，因为 quirks 模式的主要目的是*模拟*有缺陷的浏览器渲染以用于*旧代码*，而不是用于新代码。]

# jquery - 将参数从模态对话框传递到控制器 Ajax

> ID：10274313
> 
> 赞同：0
> 
> 时间：2012-04-23T03:00:34.753
> 
> 标签：jquery, ajax, asp.net-mvc-3, parameters, modal-dialog

我在 MVC3 中有一个模态对话框，我将参数传递给控制器​​，如下所示：

```
$("#SelectedCSIDivisionCodes").live("click", function () {
        var ID = $(this).val();

        $.ajax({
            type: "GET",
            url: '@Url.Action("GetCSICodes", "CSICodes")',
            data: { divisionID: ID },
            dataType: "json",
            error: function (xhr, status, error) {
                alert(xhr);
                alert(status);
                alert(error);
                // you may need to handle me if the json is invalid
                // this is the ajax object
            },
            success: function (json) {
                alert("Data Returned: " + json);
            }
        });

        //            $.getJSON(, { divisionID: ID }, function (data) {
        //                alert(data);
        //            });

    }); 
```

我收到这样的参数：

```
 [AcceptVerbs(HttpVerbs.Get)]
    public JsonResult GetCSICodes(string divisionID)
    {
        int ID = Convert.ToInt32(divisionID);
        var csiCodes = (from c in EFProject.CSICode
                        where c.DivisionID == ID
                        select c).OrderBy(x => x.CSICodeID);

        List<SelectListItem> codes = new List<SelectListItem>();

        foreach (var code in csiCodes)
        {
            codes.Add(new SelectListItem { Value = code.CSICodeID.ToString(), Text = code.Code + " " + code.Name });

        }

        return Json(codes.AsEnumerable(), JsonRequestBehavior.AllowGet);
    } 
```

ajax 调用工作正常，但它没有检测到控制器中的参数值。换句话说，我只在控制器中的变量 divisionID 中得到 null。我使用 firefox 查看我是否设置了一个值，并且它似乎正在这样做，因为它返回此 URL：GET [http://localhost:1925/CSICodes/GetCSICodes?divisionID%5B%5D=2](http://localhost:1925/CSICodes/GetCSICodes?divisionID%5B%5D=2) [HTTP/1.1 200 OK 95690毫秒]

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:11:26.807

Your Action is expecting a parameter of type string, but its getting a parameter of an array type.

Url should end divisionID=2, instead it's ending divisionID[]=2 (an array with 1 value of 2).

In certain circumstances, it's possible for the val() function to return an array. See [http://api.jquery.com/val/](http://api.jquery.com/val/) for details.

# list - 为 n 个运算符生成真值表

> ID：10274316
> 
> 赞同：1
> 
> 时间：2012-04-23T03:01:11.693
> 
> 标签：list, functional-programming, lisp, scheme

我的任务是编写一个函数，该函数在给定 n 个运算符的情况下生成一个表。真值表必须在一个列表中，并且表的每一行必须在单独的列表中（在主列表中）。

我知道解决方案涉及递归，但我似乎无法考虑清楚。

有人可以帮我吗？这只是任务的一小部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T03:22:31.147

我能想到的最简单的方法是简单地将 2^n 转换为二进制并倒数，然后将输出转换为列表。

即对于 n=3：

真值表：

```
a b c
0 0 0
0 0 1
0 1 0
0 1 1
1 0 0
1 0 1
1 1 0
1 1 1 
```

2^3 = 8，二进制中的 8 = 1000，从 1000-1 = 111 开始，一直到 0，记录输出，瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T21:40:02.043

假设所有 N 个运算符都是二元函数，例如 AND 和 OR。

```
;; Common Lisp

(defun truth-tables (ops)
  (loop for op in ops
        collecting
          (loop for args in '((nil nil) (nil t) (t nil) (t t))
                collecting (eval `(,op ,@args)))))

(truth-tables '(and or xor)) ->  ((NIL NIL NIL T) (NIL T T T) (NIL T T NIL)) 
```

这给了你一个想法。好吧，这里我没有“真值表的每一行”作为子列表；我分别有 AND、OR 和 XOR 真值表的列。输入变量组合是隐含的：您知道每个变量的第三个条目对应于`(<op> t nil)`。你对问题的描述不是很清楚。

正如你所看到的，我通过动态评估生成的代码使用 Lisp 运算符作弊。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T03:32:48.847

如果 hkf 对您的问题的解释是正确的，这应该适用于 Racket：

```
#lang racket

(define (generate-table n)
  (if (zero? n)
      '(())
      (for*/list ((y (in-list (generate-table (sub1 n))))
                  (x (in-list '(0 1))))
        (cons x y)))) 
```

像这样使用它：

```
(generate-table 3)
> ((0 0 0) (1 0 0) (0 1 0) (1 1 0) (0 0 1) (1 0 1) (0 1 1) (1 1 1)) 
```

# sql - 在单个更新语句中更新多条记录

> ID：10274318
> 
> 赞同：1
> 
> 时间：2012-04-23T03:01:27.550
> 
> 标签：sql, sql-server, tsql

过去几个小时我一直在这，我终于想寻求帮助了。我正在尝试用另一个表中的多个记录更新一个表中的多个不同记录。设置如下：

表 x（QuestID、SectionID、Questxt）PK=QuestID

表 y（QuestAGID、QuestID、AGID）PK = QuestAGID

在某些情况下，一张桌子有问题，另一张桌子有问题答案。问题匹配一个部分。每个问题的答案最多匹配一个问题。通过复制问题答案表中的记录，我现在在一个问题的问题答案表中拥有 2 条相同的记录。我希望能够获取这些重复记录并用我创建的新问题替换问题标识符。我无法提出一个更新语句，该语句能够一对一地替换多条记录上的值。

到目前为止，这是我想出的：

```
declare @a as int
select @a = Count(x.sectionid) from x
where Sectionid=6584

update y
set QuestId = (select QuestId, ROW_NUMBER() 
    OVER (ORDER BY questid) AS Row2
    from x 
    where SectionId=7700)
from y
join x on y.QuestId=x.QuestId
where x.Questid IN 
( 
select top (@a) y.QuestId, ROW_NUMBER() 
    OVER (ORDER BY y.Questid) as Row1
    from y
inner join x
on y.QuestId=x.QuestId
where x.SectionId=6584
) 
```

任何帮助将不胜感激。

谢谢！

编辑：这是两个子查询的结果示例：

查询 1

```
select QuestionId, ROW_NUMBER() 
    OVER (ORDER BY questionid)
    from Questions 
    where SectionId=7700 
```

结果：

```
QuestionId     column2    
-------------  ---------- 
31254          1          
31255          2 
```

查询 2

```
declare @a as int
select @a = Count(Questions.sectionid) from Questions
where Sectionid=6584

select top (@a) Questions_AnswerGroup.Questionid, ROW_NUMBER() 
OVER (ORDER BY Questions_AnswerGroup.Questionid) 
from Questions_AnswerGroup
inner join Questions
on Questions_AnswerGroup.QuestionId=Questions.QuestionId
where Questions.SectionId=6584 
```

结果：

```
Questionid     column2    
-------------  ---------- 
24990          1          
24991          2 
```

第二次编辑：我会尽可能地澄清这一点，以帮助大家理解并感谢大家的关注。

所以这是我的第一步，我根据节号复制了 Question_AnswerGroup 记录。

```
insert into Questions_AnswerGroup (Questions.QuestionId,
Questions_AnswerGroup.AnswerGroupId,Questions_AnswerGroup.ControlTypeId,
         Questions_AnswerGroup.IsRequired,Questions_AnswerGroup.Rank,Questions_AnswerGroup.ColumnCou    nt,
Questions_AnswerGroup.EmailRecipient,Questions_AnswerGroup.FilterName,Questions_AnswerGroup    .ResponseName,
Questions_AnswerGroup.IsHeader,Questions_AnswerGroup.IsVariable,Questions_AnswerGroup.MaxVa    lue,
Questions_AnswerGroup.DefaultValue,Questions_AnswerGroup.CharCount,Questions_AnswerGroup.Ad    ditionalInfo,
Questions_AnswerGroup.ConditionsId,Questions_AnswerGroup.InitVisible)
SELECT Questions_AnswerGroup.QuestionId,Questions_AnswerGroup.AnswerGroupId,
Questions_AnswerGroup.ControlTypeId,Questions_AnswerGroup.IsRequired,Questions_AnswerGroup.    Rank,
Questions_AnswerGroup.ColumnCount,Questions_AnswerGroup.EmailRecipient,Questions_AnswerGrou    p.FilterName,
Questions_AnswerGroup.ResponseName,Questions_AnswerGroup.IsHeader,Questions_AnswerGroup.IsV    ariable,
Questions_AnswerGroup.MaxValue,Questions_AnswerGroup.DefaultValue,Questions_AnswerGroup.Cha    rCount,
Questions_AnswerGroup.AdditionalInfo,Questions_AnswerGroup.ConditionsId,Questions_AnswerGro    up.InitVisible
FROM Questions_AnswerGroup
inner join Questions
on Questions_AnswerGroup.QuestionId=Questions.QuestionId
where Questions.SectionId=6584 
```

这给了我一个在 Question_AnswerGroup 表中看起来像这样的输出：

```
QuestionAnswerGroupId   QuestionId
17438                      24990
17439                      24991
17444                      24990
17445                      24991 
```

目前，两个 QuestionAnswerGroupId（原始的和我刚刚复制的）都与属于第 6584 节的 QuestionId 相关联。我现在需要获取我创建的两个 QuestionAnswerGroupId，并将它们与第 7700 节中没有答案的两个问题相关联。

```
Select questionid from Questions where sectionid=7700 
```

结果如下：

```
questionid
31254
31255 
```

因此，在 Conculsion 中，我需要将问题表中存在的两个 questionID（来自第 7700 节）放在上面创建的重复项的位置。

编辑 3：这就是创建重复问题的方式：

```
insert into Questions(Questions.Rank,Questions.QuestionText,Questions.IsActive,Sections.SectionId,Questions.ShowNumber,Questions.IsTextOnly,Questions.ContextHelp,Questions.ConditionsId,Questions.InitVisible)
select Questions.Rank,Questions.QuestionText,Questions.IsActive,(Max(Sections.SectionId)),Questions.ShowNumber,Questions.IsTextOnly,Questions.ContextHelp,Questions.ConditionsId,Questions.InitVisible
from Questions, Sections
where Questions.SectionId=6584
Group by      Questions.Rank,Questions.QuestionText,Questions.IsActive,Questions.ShowNumber,Questions.IsTextOnly,Questions.ContextHelp,Questions.ConditionsId,Questions.InitVisible 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:53:04.267

一个猜测，但我认为关于你所追求的仍然有一些悬而未决的问题。

```
;WITH src AS 
(
  SELECT QuestionId, r = ROW_NUMBER() OVER (ORDER BY QuestionId)
  FROM dbo.Questions
  WHERE SectionId = 7700
), trg AS
(
  SELECT QuestionId, r = ROW_NUMBER() OVER (ORDER BY QuestionId)
  FROM dbo.Questions
  WHERE SectionId = 6584
)
UPDATE trg
  SET QuestionId = src.QuestionId
  FROM trg INNER JOIN src
  ON trg.r = src.r; 
```

# ios - iOS 5.1：IBOutlet 实例变量和@property 声明

> ID：10274323
> 
> 赞同：4
> 
> 时间：2012-04-23T03:02:42.303
> 
> 标签：ios, objective-c

在创建自定义 iOS 表格视图单元格时，我创建了一个新的 .xib 文件，在界面生成器中拖放了一些 UI 元素，我的 .h 文件看起来像这样......

```
#import <UIKit/UIKit.h>

@interface MasterTableViewCell : UITableViewCell
{
    IBOutlet UILabel *cellLabel;
    IBOutlet UIImage *cellImage;
}

@property (nonatomic, retain) IBOutlet UILabel *cellLabel;
@property (nonatomic, retain) IBOutlet UIImage *cellImage;

@end 
```

在一些博客上，我看到缺少实例变量。什么时候需要声明实例变量？特定 UI 对象是否不需要实例变量和 @property 声明。此外，我正在使用自动引用计数创建应用程序，因此也不存在垃圾收集需求。这对实例变量和属性的使用有什么影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:32:10.837

iOS 中没有垃圾收集。iOS 使用引用计数来跟踪对象的所有权。使用 ARC 不会取消引用计数，但编译器会负责释放和保留对象。使用 ARC 时，您不能向对象发送保留、释放或自动释放消息，也不能在 dealloc 方法中调用 [super dealloc]。在上面的代码中，由于您使用的是 ARC，因此“retain”属性应替换为“strong”属性。

当您在实现中使用 @property 和相应的 @synthesize 时，您不需要创建支持实例变量 - 编译器会为您执行此操作。@property 与 @synthesize 一起创建您的访问器方法（您的 getter 和 setter），并且还使您能够使用点表示法来引用对象的属性。如果您愿意，您仍然可以编写自己的访问器方法。

上面的代码可以替换为以下代码：

```
#import <UIKit/UIKit.h>

@interface MasterTableViewCell : UITableViewCell

@property (nonatomic, strong) IBOutlet UILabel *cellLabel;
@property (nonatomic, strong) IBOutlet UIImage *cellImage;

@end 
```

在您的实现文件中，您将拥有：

```
#import "MasterTableViewCell.h"

@implementation MasterTableViewCell

@synthesize cellLabel;
@synthesize cellImage; 
```

或者

```
@synthesize cellLabel, cellImage;

... remainder of your code 
```

在您的代码中，为确保您使用的是访问器方法，请使用“self”来引用您的属性：

```
self.cellLabel.text = @"some text"; 
```

或者

```
[[self cellLabel] setText:@"some text"]; 
```

我希望这有助于澄清一些事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:11:40.213

如果您不创建实例变量（iVar），那么如果您使用 @synthesize 指令（见下文），它们将自动为您创建，因此它们确实不是必需的。如果您使用@dynamic 或编写自己的方法并想直接访问 iVar，那么您需要自己声明它。

**在Property Implementation Directives**部分下的[Declared Properties](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)文档中，它指出：

 **> @synthesize 你使用@synthesize 指令告诉编译器如果你没有在@implementation 块中提供它们，它应该为一个属性合成setter 和/或getter 方法。如果没有另外声明，@synthesize 指令还会合成适当的实例变量。

请注意，此行为适用于“现代”运行时（2.0 和更高版本）。在此之前，需要声明 iVar，否则 @synthesize 会产生错误。**

# javascript - HTML5 验证在 IE 和 Safari 中不起作用

> ID：10274328
> 
> 赞同：1
> 
> 时间：2012-04-23T03:03:26.170
> 
> 标签：javascript, html

我正在尝试使用 HTML5 验证 Select 字段；它在 Chrome 和 FF 浏览器中运行良好，但是当我在 IE 和 Safari 中尝试时，它无法正常工作。我尝试使用 JavaScript 让它工作，但我仍然遇到同样的问题。请帮帮我。我的代码示例在这里：

*   [http://i1159.photobucket.com/albums/p637/Apulo_Cosmas/validate.jpg](http://i1159.photobucket.com/albums/p637/Apulo_Cosmas/validate.jpg)

如何修复它，以便相同的代码适用于所有四个浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:22:35.607

而不是`onclick`提交按钮，最好有这个：

```
<script type="text/javascript">
function validate(f) {
    if (f.empty.value == '') { alert('you must enter text'); return false; }
    if (f.select_box.value == '') { alert('you must select something'); return false; }
}
</script>

<form name="form1" action="test2" onsubmit="return validate(this)">
...
<input type="submit" value="Go!" />
</form> 
```

编辑：`validate(this)`将调用`validate`函数并将自身（表单）作为`f`. 然后，可以通过名称引用表单中的字段（例如`empty`和`select_box`）

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T15:46:52.073

使用支持跨浏览器验证的欧芹库以供参考检查此链接：[http ://www.247techblog.com/use-html5-validations-internet-explorer-tutorial-guide/](http://www.247techblog.com/use-html5-validations-internet-explorer-tutorial-guide/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-15T15:57:15.283

我使用了[jQuery 验证插件](https://jqueryvalidation.org/)

```
<script type="text/javascript">
        window.onload = function() {
              var button = document.getElementById("submit-button");
              button.onclick = function() {
                $('#form-name').validate();
                if( $('#form-name').valid() == false) {
                  return false;
                    }
                }
            };
    </script> 
```

# javascript - 如何更新这个 jQuery 插件？

> ID：10274331
> 
> 赞同：1
> 
> 时间：2012-04-23T03:03:40.990
> 
> 标签：javascript, jquery, countdown

我正在使用这个[插件](http://pastie.org/3837017)，我想更新计时器。

我可以像这样在剩下 5000 毫秒时启动倒数计时器：

```
$('#CountdownTimer').countdown({ remaining : 5000}); 
```

但是当我尝试用这个调用更新它时，我想我会再次初始化它或者因为计时器没有像我假设的那样更新

```
$('#CountdownTimer').countdown('update', 2000); 
```

它基本上加快了倒数计时器的速度，如果我再次运行它，它会加快速度......但我想要做的是将它重置为 2000 毫秒

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:10:40.673

如果我正确阅读了库代码，“update()”只会更新*显示*的剩余时间，而不是实际的倒计时时钟。似乎没有一种方法可以按照您现在所写的那样做您想做的事情，但是如果您想自己做的话，添加该功能并不难......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:10:56.837

以前没有使用过这个功能，但看起来应该可以：

 ~~~~```
$('#CountdownTimer').countdown('destroy'); 
```~~ 

只需在重新初始化倒计时之前调用它。

 ~~**编辑**

在库中，更改行：

```
tick_interval = setInterval(tick, 1000); 
```

读书

```
if (tick_interval == null) tick_interval = setInterval(tick, 1000); 
```~~~~

# mysql - 使用 group_concat 如何将每个值迭代为列

> ID：10274334
> 
> 赞同：1
> 
> 时间：2012-04-23T03:04:24.203
> 
> 标签：mysql, sql, dynamic-sql

我正在使用 MySQL。

我希望能够在我的查询中始终返回 1 行 5 列。我有一个学生表和一个委员会表，如下所示：

## 学生信息表

```
Student_Number    Committee_Id
00000001                5 
```

## 委员会表

```
Committee Id         Prof_Id
    5                   23
    5                   55
    5                    6
    5                   10 
```

使用此语句：

```
select committee_id, group_concat(prof_id) as profs from committee_table 
```

我得到：

```
profs        committee_id
23,55,6,10       5 
```

我想返回：

```
prof1 prof2 prof3 prof4 prof5
23     55    6     10     null 
```

有没有办法简单地做到这一点？？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:12:47.833

您如何尝试像这样创建您的委员会表：

```
create table committee(committee_id datatype,prof1 datatype,prof2 datatype,prof3 datatype,prof4 datatype,prof5 datatype); 
```

因为教授的数量是固定的。

# objective-c - 对象数组的内存分配 - 我的理解是否有效？

> ID：10274339
> 
> 赞同：3
> 
> 时间：2012-04-23T03:05:52.437
> 
> 标签：objective-c, cocoa, memory, object, alloc

我有一个关于数组中对象的内存分配的问题。我正在寻找创建一个对象数组，但在编译时，我无法知道我需要多少个对象，因此不想保留比需要更多的内存。

我想做的是根据需要分配内存。我想要这样做的方式是，当用户单击“添加”按钮时，数组会增加一个额外的对象，并分配新对象所需的内存。

在我对Objective C的新手理解中（大约20年前我是一名专业程序员，最近才开始重新编写代码）我想出了以下代码段：

首先，我声明了我的对象：

```
 NSObject *myObject[1000]; // a maximum number of objects. 
```

然后，当用户单击“添加”按钮时，它会运行一个带有分配代码的方法：（注意：变量 i 从值 1 开始，每次单击“添加”按钮时都会增加）

```
 ++i
    myObject[i] = [[NSObject alloc] init]; 
```

因此，我希望只为实际需要的对象分配内存，而不是立即为所有 1000 个数组对象分配内存。

我是否正确解释了这一点？换句话说，我的解释是否正确，声明中声明的数组元素的数量是数组元素的最大可能数量，而不是当时分配了多少内存？如果这是正确的，那么理论上，声明：

```
 NSObject *myObject[10000]; 
```

不会比声明更多的内存：

```
 NSObject *myObject[5]; 
```

有人可以确认我是否正确理解了这个过程，如果我把这件事弄混了，请赐教。:)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:15:23.823

为什么不使用 NSMutableArray？您可以 initWithCapacity 或简单地使用 [NSMutableArray 数组] 进行分配。当您添加和删除对象时，它会增长和缩小。例如：

```
NSMutableArray *array = [NSMutableArray array];
NSObject *object = [[NSObject alloc] init];

[array addObject:object]; // array has one object
[array removeObjectAtIndex:0]; // array is back to 0 objects

// remember to relinquish ownership of your objects if you alloc them
// the NSMutable array was autoreleased but the NSObject was not
[object release]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T03:12:39.067

你的理解大多是正确的。当你这样做时：

`NSObject *myObject[1000];`

您立即为 1000 个指向`NSObject`实例的指针分配存储空间。在`NSObject`您分配之前，不会分配实例本身`[[NSObject alloc] init]`。

但是，doing`NSObject *myObject[10000]`会比 doing 消耗更多的空间`NSObject *myObject[5]`，因为 10,000 个指针肯定比 5 个指针需要更多的内存来表示。

请记住，这两个东西都会消耗空间，指向 的指针`NSObject`和`NSObject`实例本身，尽管实际上`NSObject`实例消耗的空间将明显大于引用它的指针消耗的 4 个字节。

无论如何，也许更重要的是，在 Cocoa 中有一种更好的方法来管理动态对象分配。使用内置`NSMutableArray`类。喜欢：

```
NSMutableArray* objects = [[NSMutableArray alloc] init];
[objects addObject: [[[NSObject alloc] init] autorelease]]; 
```

# eclipse - 无法在 Eclipse 的 XPath 中使用变量 - Selenium

> ID：10274342
> 
> 赞同：1
> 
> 时间：2012-04-23T03:06:25.827
> 
> 标签：eclipse, variables, xpath, selenium

我需要将值从 excel 表（存储在变量 api 中）传递到 eclipse（java - Selenium）中的 XPATH。

我尝试了几个选项，但没有一个有效。请指导。

这是我的代码行。

```
String appcode = //input[contains(@id,'app') and contains(@type,'text') and ancestor::div[contains(@id, '+api+')]] 
```

当我硬编码 api 的值时，它可以工作。

```
String appcode="//input[contains(@id,'app') and contains(@type,'text') and ancestor::div[contains(@id, 'setmember')]]"; 
```

这不是很容易吗？

感谢你的帮助

PK

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:49:20.620

您可能没有正确结束 String 构造函数。尝试这个：

```
String appcode = "//input[contains(@id,'app') and contains(@type,'text') and ancestor::div[contains(@id, '" +api+" ')]]"; 
```

我的假设是，该`api`变量是类型`String`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:15:31.910

你可以使用**\"**所以你会有类似的东西

```
String appcode ="//input[contains(@id,\" "+[VARIABLE]+ " \")[..] "; 
```

# c++ - 架构 x86_64 的未定义符号：索引接口

> ID：10274343
> 
> 赞同：3
> 
> 时间：2012-04-23T03:06:27.770
> 
> 标签：c++, parsing, undefined, symbols

我正在创建一个名为 Index 的接口，它允许我使用哈希表或 AVL 树进行索引。我收到以下错误：

```
Undefined symbols for architecture x86_64:
  "IndexHash::IndexHash(std::basic_string<char, std::char_traits<char>, std::allocator<char> >)", referenced from:
      _main in main.o
  "IndexHash::IndexHash()", referenced from:
      Parser::createIndex()      in Parser.o 
```

这些来自以下行：

```
Index* mainIn;
// creates a new index pointer
if (indexType_ == 1) {
    mainIn = new IndexAVL();
} else if (indexType_ == 2) {
    mainIn = new IndexHash();
} 
```

当它只是 AVL 树时，这很有效。

指数.H

```
#ifndef INDEX_H
#define INDEX_H
#include <iostream>
#include <fstream>
#include <vector>
#include "WordEntry.h"
#include "Document.h"

class Index {   
public:
virtual WordEntry* search(WordEntry*&)=0;
virtual void insert(WordEntry*&)=0;
virtual void insert(string)=0;
virtual void printOut(ofstream&)=0;
virtual void createDocument(string, string, string)=0;
virtual int getNumberDocs()=0;
virtual void trim(string&)=0;
private:

};

#endif 
```

索引哈希.h

```
#ifndef INDEXHASH_H
#define INDEXHASH_H

#include <iostream>
#include <fstream>
#include <vector>
#include "WordEntry.h"
#include "IndexHash.h"
#include "Document.h"
#include <tr1/unordered_map>

class IndexHash : public Index{
public:
IndexHash();
IndexHash(string);
IndexHash(const IndexHash&);
~IndexHash();
virtual WordEntry* search(WordEntry*&);
virtual void insert(WordEntry*&);
virtual void insert(string);
virtual void printOut(ofstream&);
virtual int getNumberDocs();
virtual void trim(string&);
virtual void createDocument(string, string, string);
int searchDocs(string);
Document* binarySearch(vector<Document*>*, int, int, int);
void quickSort(vector<Document*>*, int, int); 
private:
tr1::unordered_map< WordEntry*, vector<Document*> >* hashtable_;
vector<Document*>* seenDocs;

};

#endif  /* INDEXHASH_H */ 
```

索引哈希.cpp

```
#include "IndexHash.h"
#include "Document.h"
#include <vector>
#include <iostream>
#include <string>
#include <fstream>
#include <sstream>
#include <istream>

using namespace std;

IndexHash::IndexHash() {
      hashtable_ = new tr1::unordered_map< WordEntry*, vector<Document*> >;
      seenDocs = new vector<Document*>;
} 
```

...它定义了一切，我很难在这里复制和粘贴它，我假设问题在于包含。

# php - 会计系统 - MySQL 和 PHP 精度

> ID：10274349
> 
> 赞同：4
> 
> 时间：2012-04-23T03:06:54.833
> 
> 标签：php, mysql, currency, floating-accuracy, bcmath

我正在用 PHP 和 MySQL 构建一种会计系统。我的数据库有`DECIMAL (11,2)`货币列，还有`DECIMAL`用于货币操作的所有其他值（如要应用的百分比）。我以前从未编写过类似的程序，所以我不确定我做的是否正确。

**我是否在数据库中使用了正确的精度级别？**

在 PHP 方面：

**我应该对以后可能存储在数据库中的任何值使用 BC 数学函数吗？**

我还必须将货币值格式化`,`为小数点和`.`千位分隔符。我知道`number_format`，并且最近发现了`money_format`，但手册上说两者都使用浮点数操作。

**我可以将`number_format`或`money_format`用于将显示或导出到 CSV 或 Excel 的值吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:44:18.350

您可以使用 number_format() 将内容显示或导出为 csv/excel。但请记住，使用 number_format() 导出为 csv/excel 时，小数点分隔符为逗号 (,)，您必须使用双引号 (")。 `Just like "2,22.00".`

# javascript - 为 iOS5 制作多个 html5-video 点击开始

> ID：10274351
> 
> 赞同：6
> 
> 时间：2012-04-23T03:07:04.713
> 
> 标签：javascript, jquery, html, video, ios5

我目前正在制作一个页面，用于在您单击一个元素时播放不同的视频。虽然它在计算机上运行良好，但在 iOS 设备上却不行。问题在于，当单击元素（在本例中为按钮）时，它会显示视频但不会开始播放，因为它应该。脚本是

```
$(document).ready(function(){
$('#video_1, #video_2').hide();

      $('.icon_1').click(function(){
            $('#video_2').fadeOut(function(){
            $('#video_1').fadeIn();
            });
      });

      $('.icon_2').click(function(){
            $('#video_1').fadeOut(function(){
            $('#video_2').fadeIn();
            });
        });

$('.icon_1').click(function(){

            $('.video_2').get(0).pause();
            $('.video_2').get(0).currentTime = 0;
            $('.video_1').get(0).play();

        });

$('.icon_2').click(function(){
            $('.video_1').get(0).pause();
            $('.video_1').get(0).currentTime = 0;
            $('.video_2').get(0).play();

        });
          }); 
```

和 html 是

```
<button><div class="icon_1" id="mediaplayer" onclick="play">cadillac</div></button>
<button><div class="icon_2" id="mediaplayer2" onclick="play">nike</div></button>

<div id="video_1">
<video class="video_1" width="50%" height="50%"  controls poster="http://www.birds.com/wp-content/uploads/home/bird.jpg" >    
<source src="http://video-js.zencoder.com/oceans-clip.mp4" type="video/mp4" />
</video>
</div>

<div id="video_2">
<video class="video_2" width="50%" height="50%"  controls poster="images/BKG_JohnGT.png">
<source src="images/01.mp4" type="video/mp4" />
</video>
​&lt;/div> 
```

任何人都可以给我一个可以使这种情况发生的功能，那就太好了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T07:06:49.130

iOS 一次不支持在一个页面中使用多个视频元素。它甚至不会给您一条错误消息 - 它只会显示海报图像（或第一帧）然后无法播放，正如您所描述的那样。

不幸的是，你不能做真正的交叉淡入淡出，但你可以接近。从仅附加到 DOM 的一个视频元素开始。从一个视频切换到另一个视频时，您可以淡出当前视频，然后在完成后将其删除并添加第二个视频。Apple 提供了一些有关如何执行此操作的[详细信息和代码示例。](https://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html)

理论上，您应该能够在画布中抓取视频帧的快照并将其换成视频并淡出画布，但 iOS 也不支持在画布中捕获视频帧。

[本文](http://blog.millermedeiros.com/unsolved-html5-video-issues-on-ios/)很好地描述了这些和其他一些非标准行为。

# performance - L1 缓存命中的周期/成本与 x86 上的注册？

> ID：10274355
> 
> 赞同：31
> 
> 时间：2012-04-23T03:08:11.003
> 
> 标签：performance, x86, cpu-architecture, cpu-cache, micro-optimization

我记得在我的架构类中假设 L1 缓存命中是 1 个周期（即与寄存器访问时间相同），但在现代 x86 处理器上真的是这样吗？

L1 缓存命中需要多少个周期？它与注册访问相比如何？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-04-23T03:16:40.903

这是一篇关于这个主题的精彩文章：

[http://arstechnica.com/gadgets/reviews/2002/07/caching.ars/1](http://arstechnica.com/gadgets/reviews/2002/07/caching.ars/1)

要回答您的问题 - 是的，缓存命中的成本与寄存器访问的成本大致相同。当然，缓存未命中是非常昂贵的；）

PS：

具体情况会有所不同，但此链接有一些不错的大致数字：

[访问各种缓存和主存的大概成本？](https://stackoverflow.com/questions/4087280/approximate-cost-to-access-various-caches-and-main-memory)

```
Core i7 Xeon 5500 Series Data Source Latency (approximate)
L1 CACHE hit, ~4 cycles
L2 CACHE hit, ~10 cycles
L3 CACHE hit, line unshared ~40 cycles
L3 CACHE hit, shared line in another core ~65 cycles
L3 CACHE hit, modified in another core ~75 cycles remote
L3 CACHE ~100-300 cycles
Local DRAM ~30 ns (~120 cycles)
Remote DRAM ~100 ns 
```

PP:

这些数字代表*了更*老、更慢的 CPU，但这些比率基本保持不变：

[http://arstechnica.com/gadgets/reviews/2002/07/caching.ars/2](http://arstechnica.com/gadgets/reviews/2002/07/caching.ars/2)

```
Level                    Access Time  Typical Size  Technology    Managed By
-----                    -----------  ------------  ---------     -----------
Registers                1-3 ns       ?1 KB          Custom CMOS  Compiler
Level 1 Cache (on-chip)  2-8 ns       8 KB-128 KB    SRAM         Hardware
Level 2 Cache (off-chip) 5-12 ns      0.5 MB - 8 MB  SRAM         Hardware
Main Memory              10-60 ns     64 MB - 1 GB   DRAM         Operating System
Hard Disk                3M - 10M ns  20 - 100 GB    Magnetic     Operating System/User 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-24T22:10:50.727

吞吐量和延迟是不同的东西。你[不能只是把周期成本加起来](https://stackoverflow.com/questions/692718/how-many-cpu-cycles-are-needed-for-each-assembly-instruction)。有关吞吐量，请参阅[最近几代 CPU 架构的每周期加载/存储](https://stackoverflow.com/questions/45106951/load-stores-per-cycle-for-recent-cpu-architecture-generations)-大多数现代微架构的每时钟*吞吐量2 次加载。*看看[缓存怎么能这么快？](https://electronics.stackexchange.com/questions/329789/how-can-cache-be-that-fast/329955#329955)用于加载/存储执行单元的微架构细节，包括显示加载/存储缓冲区，这些缓冲区限制了它们可以跟踪的内存级并行度。该答案的其余部分将仅关注*延迟*，这与涉及指针追逐（如链表和树）的工作负载相关，以及无序执行需要隐藏多少延迟。（L3 缓存未命中通常太长而无法完全隐藏。）

**单周期缓存延迟曾经是在较低时钟速度下的简单有序管道上的问题**（因此每个周期更多纳秒），特别是对于更简单的缓存（更小，没有关联性，并且缓存的 TLB 更小） t 纯粹是虚拟寻址。）例如，[经典的 5 级 RISC 流水线](https://en.wikipedia.org/wiki/Classic_RISC_pipeline)（如 MIPS I）假设缓存命中时的内存访问为 1 个周期，在 WB 之前在 EX 中进行地址计算，在单个 MEM 流水线阶段中进行内存访问。

现代高性能 CPU 将流水线划分为更多阶段，从而使每个周期更短。`add`这让像//这样的简单指令运行得非常快`or`，`and`仍然有 1 个周期的延迟，但时钟速度很高。

* * *

有关循环计数和乱序执行的更多详细信息，请参阅[Agner Fog 的 microarch pdf以及](http://agner.org/optimize/)[x86 标签 wiki](https://stackoverflow.com/tags/x86/info)中的其他链接。

* * *

Intel Haswell 的 L1 负载使用延迟是 4 个周期的指针追踪，这是现代 x86 CPU 的典型特征。即在一个循环中运行的速度有多快`mov eax, [eax]`，带有一个指向自身的指针。（或者对于在缓存中命中的链表，很容易用闭环进行微基准测试）。另请参阅[当基数+偏移量与基数位于不同页面时是否会受到惩罚？](https://stackoverflow.com/questions/52351397/is-there-a-penalty-when-baseoffset-is-in-a-different-page-than-the-base)仅当指针直接来自另一个负载时，该 4 周期延迟特殊情况才适用，否则为 5 个周期。

对于英特尔 CPU 中的 SSE/AVX 向量，负载使用延迟要高 1 个周期。

* * *

**存储重载延迟为 5 个周期，与缓存命中或未命中无关**（它是存储转发，从存储缓冲区读取尚未提交到 L1d 缓存的存储数据）。

正如哈罗德评论的那样，寄存器访问是 0 个周期。因此，例如：

*   `inc eax`有 1 个周期延迟（只是 ALU 操作）
*   `add dword [mem], 1`有 6 个周期延迟，直到加载`dword [mem]`就绪。（ALU + 存储转发）。例如，在内存中保留一个循环计数器将一个循环限制为每 6 个周期进行一次迭代。
*   `mov rax, [rsi]``rsi`从准备就绪到`rax`L1 命中准备就绪有 4 个周期延迟（L1 负载使用延迟。）

* * *

[http://www.7-cpu.com/cpu/Haswell.html](http://www.7-cpu.com/cpu/Haswell.html)有一个每个缓存的延迟表（我将在此处复制）和一些其他实验数字，包括 L2-TLB 命中延迟（在 L1DTLB 未命中时） ）。

> Intel i7-4770（Haswell），3.4 GHz（Turbo Boost 关闭），22 nm。内存：32 GB (PC3-12800 cl11 cr2)。
> 
> *   L1 数据缓存 = 32 KB，64 B/行，8 路。
>     
>     
> *   L1 指令缓存 = 32 KB，64 B/行，8 路。
>     
>     
> *   L2 缓存 = 256 KB，64 B/行，8 路
>     
>     
> *   L3 缓存 = 8 MB，64 B/行
>     
>     
> *   L1 数据缓存延迟 = 4 个周期，用于通过指针 ( `mov rax, [rax]`)进行简单访问
>     
>     
> *   L1 数据缓存延迟 = 5 个周期，用于复杂地址计算的访问 ( `mov rax, [rsi + rax*8]`)。
>     
>     
> *   L2 缓存延迟 = 12 个周期
>     
>     
> *   L3 缓存延迟 = 36 个周期
>     
>     
> *   RAM 延迟 = 36 个周期 + 57 ns

顶级基准页面是[http://www.7-cpu.com/utils.html](http://www.7-cpu.com/utils.html)，但仍然没有真正解释不同测试大小的含义，但代码是可用的。测试结果包括[Skylake](http://www.7-cpu.com/cpu/Skylake.html)，在本次测试中与 Haswell 几乎相同。

@paulsm4 的答案有一张多插槽 Nehalem Xeon 的表格，包括一些远程（其他插槽）内存/L3 编号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T03:15:28.333

如果我没记错的话，大约是 1-2 个时钟周期，但这是一个估计值，较新的缓存可能会更快。这是我的计算机体系结构书，这是 AMD 的信息，因此英特尔可能会略有不同，但我会将其限制在 5 到 15 个时钟周期之间，这对我来说似乎是一个不错的估计。

编辑：哎呀 L2 是 10 个周期，带有 TAG 访问权限，L1 需要 1 到两个周期，我的错误：\

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-05T10:18:53.750

实际上，L1 缓存命中的成本几乎与寄存器访问的成本相同。这让我很惊讶，但这是事实，至少对我的处理器（Athlon 64）来说是这样。前段时间，我编写了一个简单的测试应用程序来测试多处理器系统中访问共享数据的效率。应用程序主体是一个简单的内存变量，在预定义的时间段内递增。为了配合，我首先对非共享变量进行了基准测试。在那次活动中，我捕获了结果，但是在应用程序反汇编过程中，我发现编译器欺骗了我的期望，并对我的代码进行了不需要的优化。它只是将变量放在 CPU 寄存器中，并在寄存器中迭代地递增它，而无需访问内存。但是在我强制编译器使用内存变量而不是寄存器变量之后，真正的惊喜出现了。在更新的应用程序上，我获得了几乎相同的基准测试结果。性能下降实际上可以忽略不计（~1-2%），看起来与一些副作用有关。

结果：

1）我认为您可以将 L1 缓存视为非托管处理器寄存器池。

2）通过强制编译器将频繁访问的数据存储在处理器寄存器中来应用残酷的组装优化是没有任何意义的。如果它们真的被频繁访问，它们将存在于 L1 缓存中，因此将具有与处理器寄存器相同的访问成本。

# java - 如何更改 JFreeChart 的大小

> ID：10274357
> 
> 赞同：9
> 
> 时间：2012-04-23T03:08:39.803
> 
> 标签：java, swing, layout, jfreechart, sizing

我已将 a 添加`JFreeChart`到 a `JPanel`（使用 a `BorderLayout`），它*很大*。有什么办法可以让它变小吗？

```
public void generateChart()
{
    DefaultCategoryDataset dataset = new DefaultCategoryDataset();

    //set the values of the chart
    for(int i=0; i<8; i++)
    {
        dataset.setValue(income_array[i], "Income",
            Double.toString(percent_array[i]));
    }

    JFreeChart chart = ChartFactory.createBarChart(
        "Required Annual Income for a Variety of Interest Rates",
        "Percent", "Income", dataset, PlotOrientation.VERTICAL,
        false,true, false);
    ChartPanel cp = new ChartPanel(chart);

    chart.setBackgroundPaint(Color.white);
    chart.getTitle().setPaint(Color.black); 
    CategoryPlot p = chart.getCategoryPlot(); 
    p.setRangeGridlinePaint(Color.blue); 

    //cp.setMaximumDrawHeight(5);
    //cp.setMaximumDrawWidth(5);
    //cp.setZoomOutFactor(.1);
    JPanel graph = new JPanel();
    graph.add(cp);
    middle.add(graph, BorderLayout.CENTER);
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T08:45:22.243

创建 时[`ChartPanel`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartPanel.html)，您有几个影响结果的选项：

1.  接受`DEFAULT_WIDTH`和`DEFAULT_HEIGHT`：680 x 420。

2.  在构造函数中指定首选`width`和`height`。

3.  [适当](https://stackoverflow.com/q/7229226/230513)`setPreferredSize()`时显式调用。

4.  重写`getPreferredSize()`以动态计算大小。

    ```
    @Override
    public Dimension getPreferredSize() {
        // given some values of w & h
        return new Dimension(w, h);
    } 
    ```

5.  选择要添加的容器的[布局。](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)`ChartPanel`请注意，默认布局为`JPanel`is `FlowLayout`，而默认布局为`JFrame`is `BorderLayout`。作为一个具体的例子，[`ThermometerDemo`](https://stackoverflow.com/a/7602126/230513)在构造函数中使用首选值和`GridLayout`容器的 a 来允许动态调整大小。

![图片](../Images/4b259fc18eed6a4e3cf600499f76d6ab.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-03-06T05:36:24.477

除了回答@trashgod 的“4”之外，我遇到了同样的问题并设法像这样解决它：（1）创建一个扩展 JPanel 的自定义类（2）以某种方式获取大小，你想传递给你的图表 (3) 创建一个返回“ChartPanel”对象的方法，如下所示：

```
ChartPanel chart() {
    //... custom code here
    JFreeChart chart = ChartFactory.createPieChart(title, pieDataset, false, false, false );`enter code here`
    // Now: this is the trick to manage setting the size of a chart into a panel!:
    return new ChartPanel(chart) { 
        public Dimension getPreferredSize() {
            return new Dimension(width, height);
        }
    };
} 
```

我准备了一个 SSCCE 来让你知道它是如何工作的：

```
import java.awt.Dimension;
import java.util.ArrayList;
import javax.swing.JFrame;
import javax.swing.JPanel;
import org.jfree.chart.ChartFactory;
import org.jfree.chart.ChartPanel;
import org.jfree.chart.JFreeChart;
import org.jfree.data.general.DefaultPieDataset;

public class MyPieChart extends JPanel {

    public static void main(String[] args) {
        example1();
        example2();
        example3();
    }

    public static void example1() {
        JPanel panel = new JPanel();
        panel.setBounds(50, 80, 100, 100);
        MyPieChart piePanel = new MyPieChart("Example 1", dataset(), panel);
        panel.add(piePanel);
        JFrame frame = new JFrame();
        frame.setLayout(null); 
        frame.setBounds(10, 10, 200, 300);
        frame.add(panel);
        frame.setVisible(true);
    }

    public static void example2() {
        MyPieChart piePanel = new MyPieChart("Example 2", dataset(), 30, 50, 100, 100);
        JFrame frame = new JFrame();
        frame.setLayout(null); 
        frame.setBounds(210, 10, 200, 300);
        frame.add(piePanel);
        frame.setVisible(true);
    }

    public static void example3() {
        MyPieChart piePanel = new MyPieChart("Example 3", dataset(), 100, 100);
        piePanel.setLocation(0,0);
        JFrame frame = new JFrame();
        frame.setLayout(null); 
        frame.setBounds(410, 10, 200, 300);
        frame.add(piePanel);
        frame.setVisible(true);
    }

    static ArrayList<ArrayList<String>> dataset() {
        ArrayList<ArrayList<String>> dataset = new ArrayList<ArrayList<String>>();
        dataset.add(row( "Tom", "LoggedIn", "Spain" ));
        dataset.add(row( "Jerry", "LoggedOut", "England" ));
        dataset.add(row( "Gooffy", "LoggedOut", "France" ));
        return dataset;
    }

    static ArrayList<String> row(String name, String actualState, String country) {
        ArrayList<String> row = new ArrayList<String>();
        row.add(name); row.add(actualState); row.add(country); 
        return row;
    }

    ArrayList<ArrayList<String>> dataset;
    DefaultPieDataset pieDataset = new DefaultPieDataset(); 
    int width, height, posX, posY;
    int colState = 1;
    String title;
    String LoggedIn = "LoggedIn";
    String LoggedOut = "LoggedOut";

    public MyPieChart(String title, ArrayList<ArrayList<String>> dataset, int...args) {

        if(args.length==2) {
            this.width = args[0];
            this.height = args[1];
            this.setSize(width, height);
        }
        else if(args.length==4) {
            this.posX = args[0];
            this.posY = args[1];
            this.width = args[2];
            this.height = args[3];
            this.setBounds(posX, posY, width, height);
        }
        else {
            System.err.println("Error: wrong number of size/position arguments");
            return;
        }

        this.title = title;
        this.dataset = dataset;
        this.add(chart());
    }

    public MyPieChart(String title, ArrayList<ArrayList<String>> dataset, JPanel panel) {
        this.title = title;
        this.dataset = dataset;
        this.width = panel.getWidth();
        this.height = panel.getHeight();
        this.setBounds(panel.getBounds());
        this.add(chart());
    }

    ChartPanel chart() {

        int totalLoggedIn = 0;
        int totalLoggedOut = 0;

        for(ArrayList<String> user : dataset) {
            if(user.get(colState).equals(LoggedIn)) totalLoggedIn++;
            else totalLoggedOut++;
        }
        pieDataset.clear();
        pieDataset.setValue(LoggedIn +": "+ totalLoggedIn, totalLoggedIn);
        pieDataset.setValue(LoggedOut +": "+ totalLoggedOut, totalLoggedOut);

        JFreeChart chart = ChartFactory.createPieChart(title, pieDataset, false, false, false );

        return new ChartPanel(chart) { // this is the trick to manage setting the size of a chart into a panel!
            public Dimension getPreferredSize() {
                return new Dimension(width, height);
            }
        };
    }
} 
```

我真的希望它有帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-07T23:17:41.857

我的饼图在使用 BorderLayout 时也太大了。我最终通过将图表转换为图像来解决我的问题。

**前** [![在此处输入图像描述](../Images/df957156f97cda5e5fa004d44af151dc.png)](https://i.stack.imgur.com/qPB1M.png)

**后** [![在此处输入图像描述](../Images/1c743559898ef294f36214f3870d7659.png)](https://i.stack.imgur.com/PlBcS.png)

**代码**

```
 private PieDataset updateCSFDataSet(){
        DefaultPieDataset dataSet = new DefaultPieDataset();
            dataSet.setValue("Clear(" + clearCount + ")" , clearCount);
            dataSet.setValue("Smoky(" + smokyCount + ")", smokyCount);
            dataSet.setValue("Foggy(" + foggyCount + ")", foggyCount);
            dataSet.setValue("Skipped(" + skipCount + ")", skipCount);
            dataSet.setValue("Unlabeled(" + unlabeledCount + ")", unlabeledCount);
        return dataSet;
    }

    private ImageIcon createChart(String title, PieDataset dataSet){
        JFreeChart chart = ChartFactory.createPieChart(
                title,
                dataSet,
                true,
                false,
                false
        );

        PiePlot plot = (PiePlot) chart.getPlot();
        plot.setLabelFont(new Font("SansSerif", Font.PLAIN, 12));
        plot.setNoDataMessage("No data available");
        plot.setCircular(true);
        plot.setIgnoreZeroValues(true);
        plot.setLabelGap(0.02);

        return new ImageIcon(chart.createBufferedImage(400,300));
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T03:23:13.500

尝试设置图表所在面板的大小。

您可能需要同时设置 JPanel middle 和 ChartPanel cp

# git - 来自远程存储库的 Cherrypick 单个修订？

> ID：10274359
> 
> 赞同：1
> 
> 时间：2012-04-23T03:09:08.793
> 
> 标签：git, github, git-cherry-pick

假设有项目存储库（在 GitHub 上）和我的 fork（也在 GitHub 上）。我的 fork 是相同的，除了包含对单个文件（错误修复）的一个修订，该文件（尚未）被项目存储库接受。我正在尝试向第三方提供有关如何下载最新版本软件的安装说明，包括我的错误修复。

据我所知，他们必须这样做：

```
git clone http://projectrepo
git remote add myrepo http://myrepo
git fetch myrepo
git cherry-pick a12345
git remote rm myrepo 
```

（假设我不打算让 myrepo 保持最新 - 我希望我的指示能够比我参与该项目的时间更长，该项目可能很快就会结束。还假设此文件可能会发生其他更改，因此只需下载一份整个文件不安全。）

一些次优的：

1.  他们需要转移两个完整的 Git 存储库
2.  仅获取一个文件就需要三个额外的命令。

有更好的解决方案吗？你能以更简单的方式获得一个修订版吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:37:35.540

仅仅创建一个补丁文件并告诉他们应用它有什么问题吗？您甚至可以将其保存为要点，以避免通过电子邮件发送。

创建补丁：

```
git format-patch -1 a12345 
```

应用它：

```
git clone http://projectrepo
cd projectrepo
wget https://raw.github.com/gist/<patch-file>
git am -3 <patch-file> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T07:01:41.660

跳过`remote add`/ `remote rm`：

```
git clone http://projectrepo
git fetch http://myrepo remote-branch-name
git cherry-pick a12345 
```

如果您知道提交是 HEAD 的`remote-branch-name`，那么您可以这样做`git cherry-pick FETCH_HEAD`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T03:15:01.173

AFAICT 无需手动告诉 git 获取两个存储库。你可以去

```
git clone http://myrepo
cd myrepo; git co <rev/branch> # maybe 
```

并且 git/github 负责所有细节。

# c# - 不能通过 C# 中的属性调用函数？

> ID：10274364
> 
> 赞同：0
> 
> 时间：2012-04-23T03:10:09.533
> 
> 标签：c#, function, properties

```
public class TouchableArea  {
public Rect rect;   

public Rect Rect{
    get{return rect;}
    set{rect = value;}
}
} 
```

以上是我的课。`Rect`是一个结构并具有`Set`设置新值的功能。当我使用该属性为 rect 设置一个新值时，没有任何反应，但是当我直接使用 rect 时，一切都很好。

```
TouchableArea t = new TouchableArea();
t.Rect.Set(newValue);//Through property, nothing happens
t.rect.Set(newValue);//Directly access, it works. 
```

这是否意味着通过属性调用函数是非法的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:13:48.017

当您更改属性时，IL 会调用一个返回对象的方法。由于它是一个“值”对象，因此`t.Rect`不会返回 object `rect`，而是返回一个副本。因此，您正在修改`rect`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:23:04.857

从根本上说，修改结构的属性是行不通的，因为结构是值类型，分配时的值类型只会接收副本。因此，不能将更改级联回原始。

虽然这个问题可以这样合理化。一些编译器编写者可以代表我们执行魔术。这就是 Miguel de Icaza 试图向 C# 提出的那种事情

[http://tirania.org/blog/archive/2012/Apr-11.html](http://tirania.org/blog/archive/2012/Apr-11.html)

如果 VB.NET 可以在属性上有一个 ByRef（他们的语言设计者没有对为什么它不可行进行合理化，他们只是围绕它编写代码，感觉就像魔术一样；可能会出现某种泄漏的抽象通过促进这样做，但对他们来说，可以说是利大于弊）；如果他们接受他的提议，复制的结构的属性也可以修改

# ios - 从 nib 文件加载 UIView 的问题

> ID：10274373
> 
> 赞同：0
> 
> 时间：2012-04-23T03:12:06.760
> 
> 标签：ios, uiview, uiscrollview, xlib, nsnotificationcenter

我正在开发一个具有多个视图的应用程序。我有一个在 xlib 文件中创建的图像库模板。此视图将作为滚动视图中的单个页面加载。我可以使用以下内容从 xlib 多次加载视图：

```
- (void)registerForKeyboardNotifications
{
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWasShown:)
                                                 name:UIKeyboardDidShowNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(keyboardWillBeHidden:)
                                                 name:UIKeyboardWillHideNotification object:nil];

}
- (id)initWithFrame:(CGRect)frame
{
    self = [[[NSBundle mainBundle] loadNibNamed:@"GSEstimateView" owner:self options:NULL] lastObject];
    self.commentText.delegate = self;
    self.scrollView.delegate = self;
    self.commentText.delegate =self;
    [self registerForKeyboardNotifications];
    return self;
} 
```

我面临的第一个问题是，当显示键盘时，keyboardWasShown: 方法被我创建的 UIViews 调用。如果我尝试从第二个 UIView 加载键盘，则会出现调用无效选择器的异常。UIView 是从 nib 还是 xlib Singleton 加载的？如果我从 nib 文件加载 UIView 实例，如何通知它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:55:02.930

(^.^)“抱歉，我的英语不好，如果有人喜欢纠正我的编辑，我将不胜感激”

您好首先我不建议使用 NSNotification 更喜欢使用这样的协议。

```
@protocol KeyBoardDelegate <NSObject>
- (void)KeyBoardVisible:(BOOL)op;
@end 
```

如果您有多个视图，并且您现在想要这样的视图控件：

*   * *viewDidLoad、viewDidUnload、viewWillDisappear、viewWillAppear 等 **

我建议像这样使用 UIViewController 的视图。

```
UIViewControllerCustom *example = [[UIViewControllerCustom alloc] initWithNibName:@"exampleNIB" bundle:[NSBundle mainBundle]];
[self.view addSubview:example.view]; 
```

使用它，您可以控制示例视图控制器的视图并使用方法

```
- (void)viewDidLoad{
  [super viewDidLoad];
  //When the nib has been loaded.
}

- (void)viewWillAppear:(BOOL)animated{
  [super viewWillAppear:animated];
  //When the view is show.
}

- (void)viewWillDisappear:(BOOL)animated{
[super viewWillDisappear:animated];
//The view is hidden
}

- (void)viewDidUnload{
[super viewDidUnload];
// Release any retained subviews of the main view.
} 
```

还有一些方法。:)

# ruby-on-rails - 通过不在 Heroku 上工作的 RoR Postgresql 时区组

> ID：10274375
> 
> 赞同：4
> 
> 时间：2012-04-23T03:12:34.450
> 
> 标签：ruby-on-rails, postgresql, group-by, timezone

我希望我的报告在我的数据库使用 UTC 时以 CST 显示。为此，我需要能够按时间列分组并让数据库进行时区转换。

这适用于我的开发 postgresql 框：

```
 offset = -5
    result = ActiveRecord::Base.connection.execute("select  date(srl.created_at AT TIME
    ZONE '#{offset.to_s}') AS date, count(*) from server_request_logs srl where     
    srl.created_at between '#{@from.to_s(:db)}' and '#{@to.to_s(:db)}' group by 
    date(srl.created_at AT TIME ZONE '#{offset.to_s}')") 
```

在 heroku 上，它出现以下错误：

```
ActiveRecord::StatementInvalid: PGError: ERROR:  time zone "-5" not recognized 
```

它也不适用于诸如“America/Winnipeg”之类的 TZInfo 名称或来自[http://www.postgresql.org/docs/7.2/static/timezones.html的“CST”等受支持的时区](http://www.postgresql.org/docs/7.2/static/timezones.html)

有没有人能让这个工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:58:18.950

首先，确保将时间戳列和变量定义为`TIMESTAMP WITH TIME ZONE`（或`timestamptz`简称）。在 PostgreSQL 中，这实际上不会导致保存任何时间戳；但使其成为一个固定的时间点，以 UTC 存储。您可以`AT TIME ZONE`使用干净的语义查看您选择的内容。 `TIMESTAMP WITHOUT TIME ZONE`（如果你只是说，这就是你得到的`TIMESTAMP`）*不是*一个固定的时间点，直到它针对时区解决，因此更难使用。

您引用的有关时区的文档页面来自一个非常旧的 PostgreSQL 版本，该版本已不再受支持。也许这个页面会对你有更多帮助：

[http://www.postgresql.org/docs/current/interactive/datetime-config-files.html](http://www.postgresql.org/docs/current/interactive/datetime-config-files.html)

# java - 使用带有整数数组的 RandomInt 的空指针

> ID：10274378
> 
> 赞同：1
> 
> 时间：2012-04-23T03:13:04.857
> 
> 标签：java, nullpointerexception, sorting

尝试创建一个随机数组以按所有标准排序算法进行排序。

我不记得我之前是如何解决这个问题的，最近发生了一次电脑崩溃并丢失了我的工作。我知道我必须了解如何使用强制转换来包装 int 数组，但不记得确切的方法。

```
package project6;
import java.util.*;

public class RandomArray
{
Random r;

Integer[] arr100 = new Integer[100];

Integer[] arr1000 = new Integer[1000];

Integer[] arr500K = new Integer[500000];

Integer[] arr1M = new Integer[1000000];

public RandomArray()
{
    r = new Random();
}

public Integer[] test100()
{
    for( int i=0; i<arr100.length; i++ )
    {
        r.nextInt( arr100[i] );
    }
    return arr100;
}

public Integer[] test1000()
{
    for( int i=0; i<arr1000.length; i++ )
    {
        r.nextInt( arr1000[i] );
    }
    return arr1000;
}

public Integer[] test500K()
{
    for( int i=0; i<arr500K.length; i++ )
    {
        r.nextInt( arr500K[i] );
    }
    return arr500K;
}

public Integer[] test1M()
{
    for( int i=0; i<arr1M.length; i++ )
    {
        r.nextInt( arr1M[i] );
    }
    return arr1M;
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:21:15.017

我认为你的任务倒退了。看起来你想用整数填充数组，所以：

```
 arr1M[i] = r.nextInt(); 
```

使用您现在拥有的代码，您将一个空值传递给 r.nextInt(int N) 函数，因为尚未填充数组。

# java - 具有部分限定名称空间的引用类型

> ID：10274381
> 
> 赞同：14
> 
> 时间：2012-04-23T03:13:23.140
> 
> 标签：java, types

是否可以使用部分限定名称来引用 Java 类型？如果是这样，怎么做？

场景：我经常发现自己有一个`Activity`需要视图的数据类（例如）。我的标准做法是命名这个类`ActivityView`，它有效，但是这个视图类总是在一个`tld.organization.project.views`命名空间中结束，其中“视图”后缀是完全多余的。

我想删除“View”后缀（因此类型将是`tld.organization.project.Activity`and `tld.organization.project.views.Activity`），但这意味着当我在同一个类中引用它们时，我必须使用命名空间来限定类型。使用命名空间来限定类型引用本身并不是一件坏事，但是重复任一类型的完全限定名称是重复且难以阅读的。

引用一个*部分*限定的类型（类似`~.Activity`or `~.views.Activity`）将删除该垃圾。某种类型的别名会回答，但似乎 Java 不支持这样的功能。有没有其他选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T03:39:50.010

不，你不能用 Java 中的包来做到这一点。你能得到的最接近的是将事物组织成嵌套的类层次结构而不是包。在此和战略性静态导入之间，您可以获得所需的效果，尽管这将是一个非常混乱的解决方案。例如：

```
package tld.organization.project;
public class Activity {} 
```

和：

```
package tld.organization.project;
public class Views {
    public static class Activity {}
} 
```

然后可以称为：

```
public void whatever() {
    Activity a = new Activity();
    Views.Activity a2 = new Views.Activity();
} 
```

我建议您遇到的名称问题可能指向需要解决的设计问题。

PS如果我不得不从事一个组织课程的项目，我可能不得不自己开枪。

PPS 实际上，我可能会先向你开枪。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-23T03:20:47.873

你是不是想说你不想写：

```
tld.organization.project.views.ActivityView 
```

每次使用`ActivityView`？

使用[导入](http://www.leepoint.net/notes-java/language/10basics/import.html)

例如。而不是像这样使用类的完全限定名称`JOptionPane`：

```
class ImportTest {
    public static void main(String[] args) {
        javax.swing.JOptionPane.showMessageDialog(null, "Hi");
        System.exit(0);
    }
} 
```

像这样在开头导入类：

```
import javax.swing.JOptionPane;  // Make a single class visible.

class ImportTest {
    public static void main(String[] args) {
        JOptionPane.showMessageDialog(null, "Hi");
        System.exit(0);
    }
} 
```

现在您可以在您的课程中直接使用 JOptionPane。

# iphone - ipad中popover控制器的过渡

> ID：10274382
> 
> 赞同：1
> 
> 时间：2012-04-23T03:13:34.403
> 
> 标签：iphone, ipad, uinavigationcontroller, uipopovercontroller

当我单击此按钮时，您会弹出一个用于在视图中搜索文本的弹出窗口..但是当我输入上帝时，带有 go 的句子进入弹出框控制器 tableviewcell 内，当我单击单元格时，搜索结果显示在弹出框本身，它没有重定向到 mainvieww.my 代码或弹出框控制器是

```
- (void)Searchpage:(id)sender {
    searchpage* popoverContent = [[searchpage alloc]
                                  init];    
    UINavigationController *navigationController = [[[UINavigationController alloc] initWithRootViewController:popoverContent] autorelease];

    //resize the popover view shown
    //in the current view to the view's size
    popoverContent.contentSizeForViewInPopover =
    CGSizeMake(320,650);

    //create a popover controller
    self.popoverController = [[UIPopoverController alloc]
                              initWithContentViewController:navigationController];
    //present the popover view non-modal with a
    //refrence to the button pressed within the current view
    [self.popoverController presentPopoverFromRect:CGRectMake(600, 0, 0, 0)
                                            inView:self.view
                          permittedArrowDirections:UIPopoverArrowDirectionAny
                                          animated:YES];

    //release the popover content

    [popoverContent release];    

} 
```

在搜索页面弹出控制器中，我将此代码重定向到主视图

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // Navigation logic may go here. Create and push another view controller.
    ParallelReadViewController *detailViewController = [[ParallelReadViewController alloc] initWithNibName:@"ParallelReadViewController" bundle:nil];

    [self.navigationController pushViewController:detailViewController animated:YES];

    [detailViewController release];    
    delegate.selectedBook = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"book"];
    delegate.selectedChapter = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"chapter"];
    delegate.selectedVerse = [[searchResults objectAtIndex:indexPath.row] objectForKey:@"verse"];
    [delegate reloadVerses];

} 
```

parallelViewController 是主视图，但现在我在弹出框控制器中获得主视图。我只想关闭此弹出框控制器并导航到 parallelviewcontroller。如何执行此操作。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:12:06.113

您可以使用

```
- (void)dismissPopoverAnimated:(BOOL)animated 
```

关闭弹出框的方法。

并且可以参考以下链接了解更多信息 - [http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPopoverController_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIPopoverController_class/Reference/Reference.html)

编辑-您可以使用以下方法获取包含弹出框的类-

```
NSArray *viewControllerArray = [[self.navigationController.viewControllers copy] autorelease];
int arrayElementCount = [viewControllerArray count];
YourViewController *aViewController;
for(int index = 0 ; index < arrayElementCount ; index++) {
    if([[viewControllerArray objectAtIndex:index] isKindOfClass:[YourViewController class]]) {
        aViewController = [viewControllerArray objectAtIndex:index];
    }       
}
[aViewController.popoverController dismissPopoverAnimated:YES]; 
```

# ember.js - 是否可以使用脚本标签加载车把模板？或者在 Ember.js 中以编程方式定义车把模板

> ID：10274391
> 
> 赞同：21
> 
> 时间：2012-04-23T03:14:57.893
> 
> 标签：ember.js, handlebars.js

很简单，我不想在我的 html 文件中定义我所有的车把模板

我试过这个

```
<script type="text/x-handlebars" data-template-name="nav-bar" src="template.handlebar"></script> 
```

但这没有用。我可以不以编程方式定义模板我的模板，甚至只是加载把手文件以便我可以重用，而且我觉得它使事情更易于维护。

我尝试使用 ajax 加载它们并将它们附加到头部，这工作正常我可以在那里看到它但是 ember.js 在 ember 已经加载并且未定义模板后不会读取它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T14:10:55.977

> 或者在 Ember.js 中以编程方式定义车把模板

您可以使用 以编程方式定义模板`Ember.Handlebars.compile`，请参阅[http://jsfiddle.net/pangratz666/wxrxT/](http://jsfiddle.net/pangratz666/wxrxT/)：

```
Ember.View.create({
    personName: 'Dr. Tobias Fünke',
    template: Ember.Handlebars.compile('Hello {{personName}}')
}).append();​ 
```

或者您将已编译的模板添加到`Ember.TEMPLATES`数组中，请参阅[http://jsfiddle.net/pangratz666/58tFP/](http://jsfiddle.net/pangratz666/58tFP/)：

```
Ember.TEMPLATES['myFunkyTemplate'] = Ember.Handlebars.compile('Hello {{personName}}');

Ember.View.create({
    personName: 'Dr. Tobias Fünke',
    templateName: 'myFunkyTemplate'
}).append();​ 
```

* * *

我会建议使用像*Richard Millan*所说的一些工具。还可以查看[interline/ember-skeleton](https://github.com/interline/ember-skeleton)，它提供了对模板编译的支持。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-20T14:02:57.353

您还可以修补 Ember View 以在 get 上加载模板

```
Em.View.reopen({
    templateForName: function(name, type) {
        if (!name) { return; }

        var templates = Em.get(this, 'templates'),
            template = Em.get(templates, name);

        if (!template) {
            $.ajax({
                url: 'templates/%@.hbs'.fmt(name),
                async: false
            }).success(function(data) {
                template = Ember.Handlebars.compile(data);
            });
        }

        if (!template) {
            throw new Em.Error('%@ - Unable to find %@ "%@".'.fmt(this, type, name));
        }

        return template;
    }
}); 
```

更新：由于 Ember 1.0.0-pre.3 这个解决方案可能不再工作（也许可以迁移到最近的 Ember）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-23T23:57:58.310

因此，由于我仍然想要为我的模板提供单独的文件，并且我不想在 javascript 中的字符串中定义它们，所以我昨晚一起破解了这个

它是一个同步惰性加载器，它首先加载所有模板，然后是 ember 和我的其余代码，

```
 //fake function so that every loads fine will get redefined in application.js
        function initializeApp(){}

        function loadTemplates(){
            var arg = arguments[0],
                next = Array.prototype.slice.call(arguments,1);
            if(typeof arg != 'string'){
                arg()
            }else{
                var scriptObj = document.createElement('script');
                scriptObj.type = 'text/x-handlebars';
                $(scriptObj).attr('data-template-name', arg.replace('.handlebars', '').substring(arg.lastIndexOf('/')+1))
                $.get(arg, function(data){
                    scriptObj.text = data;
                    document.head.appendChild(scriptObj);
                    if(next.length > 0) loadTemplates.apply(this, next);
                });
            }
        }

        function loadScripts() {
            var script = arguments[0],
                scriptObj = document.createElement('script'),
                next = Array.prototype.slice.call(arguments,1);
            scriptObj.type = 'text/javascript';
            scriptObj.src = script;
            scriptObj.onload = scriptObj.onreadystatechange = (next.length > 0) ? function(){loadScripts.apply(this, next)} : function(){$(document).ready(function() {initializeApp()})};
            document.head.appendChild(scriptObj);
        }

        function loadApp(obj){
            loadTemplates.apply(this, obj.templates.concat(function(){loadScripts.apply(this,obj.scripts)}))
        }

        window.onload = function(){
            loadApp({
                templates:
                    [
                        '/javascripts/views/templates/nav-bar.handlebars',
                    ],
                scripts:
                    [
                        'https://maps.googleapis.com/maps/api/js?sensor=false&callback=initializeGoogleMaps',
                        '/javascripts/lib/bootstrap.js', 
                        '/javascripts/lib/rails.js', 
                        '/javascripts/lib/ember.js',
                        '/javascripts/application.js',
                        '/javascripts/views/nav_bar.js',
                    ]
            })
        } 
```

编辑：我清理它并使它正常工作，但只在 chrome 中测试

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T03:30:32.973

这是可能的，但您需要先预编译您的模板。这也将允许您将所有模板包含在一个文件中。

*   如果您使用的是 Rails，则可以使用[ember-rails gem](https://github.com/emberjs/ember-rails)为您完成。
*   否则，您可以按照[这些说明如何预编译把手](http://handlebarsjs.com/precompilation.html)

稍后，您将需要包含 javascript 文件。

```
<script src="path/to/compiled/templates.js" type="text/javascript"></script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T06:03:35.897

如果在加载 Ember 之前将模板加载到 DOM 中，则无需编译或注册模板。Ember 会随之而来并为你做这件事。

这是一篇文章，展示了如何：

[http://weborient.wordpress.com/2012/09/02/loading-handlebars-templates-in-ember-using-curl-js/](http://weboriented.wordpress.com/2012/09/02/loading-handlebars-templates-in-ember-using-curl-js/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-09T07:14:53.340

这是另一个解决方案，在您的 Ember 视图/组件中：

```
var viewClass = Ember.View.extend({ templateName: this.get('contentTemplate') });
var view = this.createChildView(viewClass);
var html = view.renderToBuffer().buffer; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-08-06T03:01:55.713

这是一个老问题，所以所有的答案都有些过时了。使用[Ember CLI](http://www.ember-cli.com/)模板会通过命名约定自动加载为 require.js 模块。这有点奇怪，因为您编写了提议的 ES6 导入语法，并且构建将其转换为 require.js 语法，但它确实工作得很好。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-07-20T13:54:43.787

这是可能的，是的，你可以在不使用另一个另一个工具的情况下做到这一点，只使用 ember.js 就可以了。我是这样做的：

1）html代码。请注意，在使用其中任何一个之前，需要加载所有车把文件。在这里，它只有一个名为 handlebars.js 的文件

```
<body>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.2.min.js"><\/script>')</script>
  <script src="js/libs/ember-0.9.8.1.min.js"></script>    
  <script src="js/handlebars.js"></script>
  <script src="js/app.js"></script>
</body> 
```

2）这个文件handlebars.js包含以下内容，使用ember的编译器

```
var src = "Hello, <b>{{name}}</b>";
Em.TEMPLATES["say-hello"] = Em.Handlebars.compile(src); 
```

3）然后在您的 app.js 文件中，按可用的方式使用它（它是）：

```
var hu = Em.View.create({
    templateName: "say-hello",
    name: "Allô", 
    mouseDown: function() {  
    window.alert("hello world!");

  }
});

hu.appendTo("body"); 
```

# javascript - 另一个替代传送带幻灯片的滑块？

> ID：10274397
> 
> 赞同：0
> 
> 时间：2012-04-23T03:16:04.167
> 
> 标签：javascript, jquery

我知道传送带幻灯片脚本 (http://www.dynamicdrive.com/dynamicindex14/leftrightslide.htm) 运行良好。我想要的只是找到另一个脚本就是这样工作的。

每个人都可以建议我另一种工具来顺利地从右到左运行图像（不使用 Marquee - 因为第一次，图像不显示，框是空的 - 看起来不好）

请指教。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:33:50.457

看看这个

[http://sorgalla.com/projects/jcarousel/examples/static_auto.html](http://sorgalla.com/projects/jcarousel/examples/static_auto.html)

我认为它会解决你的问题

# java - Spring mvc 在应用程序加载事件上加载集合

> ID：10274399
> 
> 赞同：-1
> 
> 时间：2012-04-23T03:16:30.623
> 
> 标签：java, spring-mvc

我必须从数据库中加载一些东西来初始化一个 hashMap 对象，我想将它添加到我的所有 mvc 控制器都可以访问的应用程序范围的变量中。

我不会修改这个对象，我也不关心它是否只能在应用程序重新加载时更新。

spring MVC 是否有一个地方可以让我做到这一点并且让 spring 也管理生命周期？

我知道 servlet 有 WebListener 注释：

@WebListener

但不确定弹簧是否也有这个（包装在他们的 iOc 容器中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:39:29.827

我认为最好的地方是像下面这样声明一个bean：

```
public class MyInitializingBean {
    @PostConstruct
    private void init() {
        //do initialization here
    }
} 
```

然后你在你的xml文件中声明那个bean，如果你不喜欢这个注解，有初始化一个bean的非注解方法，但是当spring上下文启动时会执行。

# c++ - 提升 MPL 占位符和 Lambda

> ID：10274403
> 
> 赞同：11
> 
> 时间：2012-04-23T03:16:53.510
> 
> 标签：c++, boost, lambda, template-meta-programming, boost-mpl

我目前正在使用 boost::mpl 对概念样本进行一些证明，并且在理解 lambda 函数如何启用占位符时遇到一些困难。

我意识到我可以将元函数包装在元函数类中以使高阶函数能够访问嵌套的应用函数，并且已经意识到可以通过使用 mpl::lambda 包装允许占位符的元函数来避免这种工作。

这实际上是如何工作的？我很难理解 lamda 和占位符在幕后实际所做的事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T14:16:38.177

请参阅[Boost.MPL 手册](http://www.boostpro.com/mplbook/metafunctions.html)：占位符是形式的元函数类`mpl::arg<X>`。元函数类是包含`apply`元函数的类。

```
template <int N> struct arg; // forward declarations
struct void_;

template <>
struct arg<1>
{
    template <
      class A1, class A2 = void_, ... class Am = void_>
    struct apply
    {
        typedef A1 type; // return the first argument
    };
};
typedef arg<1> _1 
```

工作是`mpl::lambda`将占位符表达式转换为元函数类。[这是通过嵌入这样](http://www.boost.org/doc/libs/1_49_0/libs/mpl/doc/refmanual/lambda.html)的元函数类来完成的：

```
template<
      typename X
    , typename Tag = unspecified
    >
struct lambda
{
    typedef unspecified type;
}; 
```

如果 x 是一般形式的占位符表达式`X<a1,...an>`，其中`X`是类模板并且`a1,... an`是任意类型，则嵌入的未指定类型`f`等价于

```
typedef protect< bind<
      quoten<X>
    , lambda<a1>::type,... lambda<an>::type
> > f; 
```

否则，`f`与 相同`X`。元`apply`函数通过访问嵌入类型来评估 lambda 表达式。

在 MPL[手册](http://www.boost.org/doc/libs/1_49_0/libs/mpl/doc/refmanual/composition-and-argument-binding.html)`protect`中，您还可以查找 和 的`bind`定义`quote`。他们都是围绕他们的论点的包装器，以尽可能长时间地延迟评估。

# iphone - 使用GSEvent发送触摸事件，但无效

> ID：10274405
> 
> 赞同：0
> 
> 时间：2012-04-23T03:17:01.870
> 
> 标签：iphone, ios, iphone-privateapi

我编写代码通过 GSEvent 向我的应用程序发送触摸事件，通过 GSCopyPurpleSystemEventPort() 获取 mach_port_t。

ApplicationDidFinishLaunch：选项完成后启动发送功能。应用程序是 UIControlView 应用程序。

代码如下：

```
void handleMouseEventAtPoint(CGPoint point, int buttons)
{
    // NOTE: Must store button state for comparision, port for
    //       mouse dragging and button up
    static int buttons_;
    static mach_port_t port_;

    int diff = buttons_ ^ buttons;
    bool twas = ((buttons_ & 0x1) != 0);
    bool tis = ((buttons & 0x1) != 0);
    buttons_ = buttons;

    // Round point values to prevent subpixel coordinates
    point.x = roundf(point.x);
    point.y = roundf(point.y);

    // Check for mouse button events
    mach_port_t purple;

    if ((diff & 0x10) != 0) {
        // Simulate Headset button press
        struct GSEventRecord record;

        memset(&record, 0, sizeof(record));

        record.type = (buttons & 0x4) != 0 ?
        kGSEventHeadsetButtonDown :
        kGSEventHeadsetButtonUp;

        record.timestamp = GSCurrentEventTimestamp();
        FixRecord(&record);
        GSSendSystemEvent(&record);
    }

    if ((diff & buttonThree) != 0) {
        // Simulate Home button press
        struct GSEventRecord record;

        memset(&record, 0, sizeof(record));

        record.type = (buttons & buttonThree) != 0 ?
        kGSEventMenuButtonDown :
        kGSEventMenuButtonUp;

        record.timestamp = GSCurrentEventTimestamp();
        FixRecord(&record);
        GSSendSystemEvent(&record);
    }

    if ((diff & buttonTwo) != 0) 
    {
        // Simulate Sleep/Wake button press
        struct GSEventRecord record;

        memset(&record, 0, sizeof(record));

        record.type = (buttons & buttonTwo) != 0 ?
        kGSEventLockButtonDown :
        kGSEventLockButtonUp;

        record.timestamp = GSCurrentEventTimestamp();
        FixRecord(&record);
        GSSendSystemEvent(&record);
    }

    if (twas != tis || tis) {
        // Main (left button) state changed, or was dragged
        struct {
            struct GSEventRecord record;
            struct 
            {
                struct GSEventRecordInfo info;
                struct GSPathInfo path;
            } data;
        } event;

        memset(&event, 0, sizeof(event));

        event.record.type = kGSEventHand;
        event.record.windowLocation = point;
        event.record.timestamp = GSCurrentEventTimestamp();
        event.record.infoSize = sizeof(event.data);

        event.data.info.handInfo.type = twas == tis ?
        kGSHandInfoTypeTouchDragged :
        tis ?
        kGSHandInfoTypeTouchDown :
        kGSHandInfoTypeTouchUp;

        event.data.info.handInfo._0x44 = 0x1;
        event.data.info.handInfo._0x48 = tis ? 0x1 : 0x0;

        event.data.info.pathPositions = 1;

        event.data.path.pathIndex = 0x01;
        event.data.path.pathIdentity = 0x02;
        event.data.path.pathProximity = tis ? 0x03 : 0x00;
        event.data.path.pathLocation = event.record.windowLocation;

        if (twas != tis && tis) 
        {
            // Button down and was not down before
            port_ = 0;

            CAWindowServer *server;

            server = [CAWindowServer serverIfRunning];
            char svrptrstr [255];
            sprintf(svrptrstr, "%p", server);

            NSLog(@"One!");

            if (server = [CAWindowServer serverIfRunning]) 
                //if (true)
            {
                NSLog(@"Two!");
                //NSArray *displays([server displays]);
                NSArray *displays = [server displays];
                if (displays != nil && [displays count] != 0)
                {
                    NSLog(@"Three!");
                    //CAWindowServer *display;
                    if (CAWindowServerDisplay *display = [displays objectAtIndex:0])
                    {
                        NSLog(@"Four!");
                        port_ = [display clientPortAtPosition:point];
                    }
                }
            }

            if (port_ == 0) 
            {
                // Is SpringBoard
                if (purple == 0)
                {
                    purple = GSGetPurpleSystemEventPort();
                    port_ = purple;

                }
            }
        }

        FixRecord(&event.record);

        GSSendEvent(&event.record, port_);
        NSLog(@"Event sent!");
        //GSSendSystemEvent(&event.record);
        //GSSendEvent(&event.record, purple);
    }

    if (purple != 0 && PurpleAllocated)
    {
        mach_port_deallocate(mach_task_self(), purple);
        NSLog(@"Deallocated mach_port!");
    }
} 
```

但是越狱ipad2(iOS5.01)上的应用启动，没有任何点击结果，如果点击事件完成，debug.log会在那里。

谁能告诉我我有什么想念的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:40:23.767

我在其他地方看到过这段代码（我认为它是在一个将鼠标点击转换为 iPhone/iPad 水龙头的应用程序上）。这里的问题不是代码或端口，而是您发送的事件结构。这是 iOS 3.0 的 GSevent 结构，而不是 iOS 5.0。它不仅在结构上，而且在值和标签上都发生了变化。我建议接收 UIEvents，将它们翻译成 GSEvents 并查看它们的内容。

# android - 无法更改 ImageView 的可见性

> ID：10274408
> 
> 赞同：8
> 
> 时间：2012-04-23T03:17:08.753
> 
> 标签：android, android-imageview

我有一个使用自定义光标适配器填充 ListView 的 ListView。

这`row.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

   <LinearLayout
       android:orientation="vertical"
       android:layout_width="0dip"
       android:layout_weight="1"
       android:layout_height="fill_parent">
       <TextView
           android:id="@+id/title"
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:singleLine="true"
           android:gravity="center_vertical"
           android:ellipsize="marquee"
           android:textSize="24dp" />
       <TextView
           android:layout_width="fill_parent"
           android:layout_height="wrap_content"
           android:id="@+id/artist"
           android:singleLine="true"
           android:ellipsize="marquee"
           android:textSize="14dp" />
    </LinearLayout>
    <ImageView
       android:id="@+id/currentplaying"
       android:layout_width="wrap_content"
       android:layout_height="fill_parent"
       android:layout_marginLeft="1dip"
       android:src="@android:drawable/ic_media_play"
       android:contentDescription="@string/now_playing"
       android:visibility="gone" />
</LinearLayout> 
```

如您所见，ImageView 的可见性消失了。我想让它对某一特定行可见。这是我尝试过的代码，但它不起作用......

```
View view = getListView().getAdapter().getView(0, null, null);
ImageView iv = (ImageView)view.findViewById(R.id.currentplaying);
iv.setVisibility(ImageView.VISIBLE); 
```

提前致谢。

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder;
    if(convertView==null) {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.yourlayout, null);
        holder.imgViewLogo = (ImageView) convertView.findViewById(R.id.imgViewLogo);
        convertView.setTag(holder);
    }
    else {
        holder=(ViewHolder)convertView.getTag();
    }
    if(position==0) {     
        holder.imgViewLogo.setVisiblity(View.VISIBLE);
    }
    return convertView;
} 
```

编辑：

我让它工作了。我用它来启动 ListView 活动。

```
intent.putExtra("id", c.getInt(c.getColumnIndex(DatabaseHelper._ID)));
startActivity(intent); 
```

在 ListView 活动中，

```
currentplayingid = getIntent().getExtras().getInt("id"); 
```

然后我添加了这个`bindview()`

```
ImageView imgview = (ImageView)view.findViewById(R.id.currentplaying);
int id = c.getInt(c.getColumnIndex(DatabaseHelper._ID));
if (id == SongsListActivity.this.currentplayingid)
    imgview.setVisibility(View.VISIBLE);
else
    imgview.setVisibility(View.GONE); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T02:11:31.443

我让它工作了。我用它来启动列表视图活动。

```
intent.putExtra("id", c.getInt(c.getColumnIndex(DatabaseHelper._ID)));
startActivity(intent); 
```

在列表视图活动中，

```
currentplayingid = getIntent().getExtras().getInt("id"); 
```

然后我在 bindview() 中添加了这个

```
ImageView imgview = (ImageView)view.findViewById(R.id.currentplaying);
int id = c.getInt(c.getColumnIndex(DatabaseHelper._ID));
if ( id == SongsListActivity.this.currentplayingid )
imgview.setVisibility(View.VISIBLE);
else
imgview.setVisibility(View.GONE); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:33:34.420

也许你应该在`getView()`你的适配器 中做到这一点

编辑：

```
@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    // codes...

    if (position == 0)
    {
        holder.imgViewLogo.setVisibility(ImageView.VISIBLE);
    }
    else
    {
        holder.imgViewLogo.setVisibility(ImageView.GONE);
    }

    // codes...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-25T10:02:00.197

您可以使用 setVisibility(int) 隐藏或显示视图。利用`iv.setVisibility(View.VISIBLE);`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-30T15:14:15.643

我有同样的问题......我用非标准解决方案解决了，但对我有用......

```
v.setImageResource(R.color.transparent); 
```

从安卓导入 R

```
import android.R; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T04:35:53.707

我遇到了类似的问题，其中一些小部件会出现在某些行上，但不会出现在其他行上。问题是由于视图回收。我不确定这是否是您的问题，但无论如何您都应该处理它。诀窍是为每一行设置可见性；而不仅仅是您想要出现/消失的行。

所以：

```
if (position == 0)
{
    iv.setVisibility(ImageView.VISIBLE);
}
else
{
    iv.setVisibility(ImageView.GONE);
} 
```

否则，您假设对于 0 以外的位置，可见性已消失，但视图回收可能并非如此。顺便说一句，我在 bindView 中完成这项工作。不确定这在技术上是否正确。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-01-26T06:11:14.883

两者`iv.setVisibility(View.VISIBLE);`和`iv.setVisibility(ImageView.VISIBLE);`都是正确的，但最好使用`View`而不是`ImageView`因为`VISIBLE`&是在类`GONE`中定义的。`View`

你最改变Both Visibility（`VISIBLE`或`GONE`）在那`if`。喜欢：

```
if(?)
    iv.setVisibility(View.VISIBLE);
else iv.setVisibility(View.GONE); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T04:40:39.290

如果它工作了一段时间，那么我可以帮助你。每当您移动列表视图时会发生什么情况，它会再次重新创建所有视图，在这种情况下它永远不会保存视图的最后状态。因此，您需要做的是保存每个图像视图的状态，并在 getView() 中进行相应设置。我正在发布我的答案之一，它可能会对您有所帮助。这里有一些代码可以帮助你：我将创建一个布尔数组列表。

私有 ArrayList imageview_visible = null;

然后我将在我的构造函数中将所有 imageview 的状态设置为 false：

```
for (int i=0; i < no_of_elements.size(); i++) {
    imageview_visible.add(i, false);
} 
```

在您的 getView 中编写以下代码：

public View getView (int position, View convertView, ViewGroup parent) { //编写你的代码

```
 if (imageview_visible.get(position) == true)
 {
     //SET YOUR IMAGE VIEW AS VISIBLE
 } else {
    // SET IMAGEVIEW AS GONE
 } 
```

}

每当您取消隐藏或隐藏视图时，只需将其保存到 imageview_visible.set（true 或 false）中，这将保存您所有 imageview 的状态并相应地设置每个图像视图

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-23T04:41:00.717

使用 LayoutInflater 获取视图对象

```
LayoutInflater inflater = this.getLayoutInflater();
View rowView = inflater.inflate(R.layout.row, null, true);
ImageView iv = (ImageView)view.findViewById(R.id.currentplaying);
iv.setVisibility(ImageView.VISIBLE); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-04-23T03:33:42.660

你必须这样做

```
iv.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-23T04:24:09.653

尝试以下代码，

```
 private class ViewHolder
{
    ImageView imgViewLogo;

}

  @Override
public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    ViewHolder holder;
    if(convertView==null)
    {
        holder = new ViewHolder();
        convertView = inflater.inflate(R.layout.yourlayout, null);

        holder.imgViewLogo = (ImageView) convertView.findViewById(R.id.imgViewLogo);
        convertView.setTag(holder);
    }
    else
    {
        holder=(ViewHolder)convertView.getTag();
    }

       if(position==0)
     {     
    holder.imgViewLogo.setVisiblity(View.VISIBLE);
        }

    return convertView;
} 
```

它对我有用......它可以帮助你。

# ruby-on-rails - rspec/growl windows 设置 windows 7 64 位

> ID：10274410
> 
> 赞同：0
> 
> 时间：2012-04-23T03:17:43.023
> 
> 标签：ruby-on-rails, rspec, windows-7-x64, railstutorial.org, growl

尝试设置时出现以下错误。我不知道发生了什么事。我正在按照 Michael Hartl 的 Rail 教程尝试设置第一次测试，但似乎没有任何效果。

```
C:\rails_projects\sample_app>bundle exec autotest
loading autotest/rspec2
C:/rails_projects/sample_app/.autotest:1:in `require': cannot load such file -- autotest/growl (LoadError)
    from C:/rails_projects/sample_app/.autotest:1:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ZenTest-4.7.0/lib/autotest.rb:315:in `load'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ZenTest-4.7.0/lib/autotest.rb:315:in `block in initialize'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ZenTest-4.7.0/lib/autotest.rb:314:in `each'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ZenTest-4.7.0/lib/autotest.rb:314:in `initialize'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rspec-core-2.9.0/lib/autotest/rspec2.rb:13:in `initialize'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ZenTest-4.7.0/lib/autotest.rb:244:in `new'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ZenTest-4.7.0/lib/autotest.rb:244:in `run'
    from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/ZenTest-4.7.0/bin/autotest:6:in `<top (required)>'
    from C:/RailsInstaller/Ruby1.9.3/bin/autotest:19:in `load'
    from C:/RailsInstaller/Ruby1.9.3/bin/autotest:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T13:17:55.080

你，可能在你的 .autotest 文件上有一个使用咆哮的配置。我认为您可能需要在 Gemfile 中添加以下行：

```
 gem "autotest-growl" 
```

# iphone - 如何在 UIImageView 中复制 MKMapView 的屏幕？

> ID：10274417
> 
> 赞同：1
> 
> 时间：2012-04-23T03:20:03.630
> 
> 标签：iphone, ios, cocoa-touch, uikit, uiimage

我在 MKMapView 的地图上有一个屏幕。如何将此屏幕复制到图像并像简单的 UIImageView 一样使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T03:22:44.410

这可能有效；

```
UIGraphicsBeginImageContextWithOptions(MKMapView.bounds.size, MKMapView.opaque, 0.0);
[MKMapView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# sbt - 如何将 xtend2 库添加到 play2？

> ID：10274421
> 
> 赞同：0
> 
> 时间：2012-04-23T03:21:02.273
> 
> 标签：sbt, playframework-2.0, xtend

我有一些关于 xtend2 的信息如下，但我不知道如何将它们添加到 play2 项目中。

```
<repositories>
  <repository>
    <id>maven.eclipse.org</id>
    <url>http://maven.eclipse.org/nexus/content/groups/public/</url>
  </repository>
  <repository>
    <id>xtend</id>
    <url>http://build.eclipse.org/common/xtend/maven/</url>
  </repository>
</repositories>

<dependencies>
  <dependency>
    <groupId>org.eclipse.xtend2</groupId>
    <artifactId>org.eclipse.xtend2.lib</artifactId>
    <version>2.2.0</version>
  </dependency>
  <dependency>
    <groupId>org.eclipse.xtext</groupId>
    <artifactId>org.eclipse.xtext.xtend2.lib</artifactId>
    <version>2.2.0.v201112061305</version>
  </dependency>
  <dependency>
    <groupId>com.google.inject</groupId>
    <artifactId>com.google.inject</artifactId>
    <version>2.0.0.v201105231817</version>
  </dependency>
</dependencies> 
```

我试过：

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

  val appName = "test"
  val appVersion = "1.0-SNAPSHOT"

  val eclipse = "eclipse" at "http://maven.eclipse.org/nexus/content/groups/public/"
  val xtend = "xtend" at "http://build.eclipse.org/common/xtend/maven/"

  val appDependencies = Seq(
    // Add your project dependencies here,
    "commons-io" % "commons-io" % "2.1",
    "org.scalatest" %% "scalatest" % "1.7.RC2" % "test",
    "postgresql" % "postgresql" % "9.1-901-1.jdbc4",
    "org.jsoup" % "jsoup" % "1.6.1",
    "org.pegdown" % "pegdown" % "1.1.0",
    "org.eclipse.xtend2" % "org.eclipse.xtend2.lib" % "2.2.0")

  val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings( // Add your own project settings here      
    // in order to use scalatest
    testOptions in Test := Nil)

} 
```

但这是行不通的：

```
[warn]  module not found: org.eclipse.xtend2#org.eclipse.xtend2.lib;2.2.0
[warn] ==== local: tried
[warn]   E:\java\Play20\framework\.\..\repository/local/org.eclipse.xtend2/org.e
clipse.xtend2.lib/2.2.0/ivys/ivy.xml
[warn] ==== Typesafe Releases Repository: tried
[warn]   http://repo.typesafe.com/typesafe/releases/org/eclipse/xtend2/org.eclip
se.xtend2.lib/2.2.0/org.eclipse.xtend2.lib-2.2.0.pom
[warn] ==== Typesafe Snapshots Repository: tried
[warn]   http://repo.typesafe.com/typesafe/snapshots/org/eclipse/xtend2/org.ecli
pse.xtend2.lib/2.2.0/org.eclipse.xtend2.lib-2.2.0.pom
[warn] ==== public: tried
[warn]   http://repo1.maven.org/maven2/org/eclipse/xtend2/org.eclipse.xtend2.lib
/2.2.0/org.eclipse.xtend2.lib-2.2.0.pom
[warn] ==== Scala-Tools Maven2 Repository: tried
[warn]   http://scala-tools.org/repo-releases/org/eclipse/xtend2/org.eclipse.xte
nd2.lib/2.2.0/org.eclipse.xtend2.lib-2.2.0.pom
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  ::          UNRESOLVED DEPENDENCIES         ::
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[warn]  :: org.eclipse.xtend2#org.eclipse.xtend2.lib;2.2.0: not found
[warn]  ::::::::::::::::::::::::::::::::::::::::::::::
[error] {file:/E:/WORKSPACE_PLAY/test/}test/*:update: sbt.Res
olveException: unresolved dependency: org.eclipse.xtend2#org.eclipse.xtend2.lib;
2.2.0: not found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T03:42:47.213

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

  val appName = "test"
  val appVersion = "1.0-SNAPSHOT"

  val appDependencies = Seq(
    // Add your project dependencies here,
    "commons-io" % "commons-io" % "2.1",
    "org.scalatest" %% "scalatest" % "1.7.RC2" % "test",
    "postgresql" % "postgresql" % "9.1-901-1.jdbc4",
    "org.jsoup" % "jsoup" % "1.6.1",
    "org.pegdown" % "pegdown" % "1.1.0",
    "org.eclipse.xtend2" % "org.eclipse.xtend2.lib" % "2.2.1")

  val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings( // Add your own project settings here
    resolvers += "xtend" at "http://build.eclipse.org/common/xtend/maven/",
    // in order to use scalatest
    testOptions in Test := Nil)

} 
```

# git - 使用多个 .gitignore 文件的最佳实践

> ID：10274424
> 
> 赞同：49
> 
> 时间：2012-04-23T03:21:19.720
> 
> 标签：git, github, gitignore

[在https://github.com/github/gitignore](https://github.com/github/gitignore)有一组有用的`.gitignore`文件 。每个忽略文件都有一个扩展名，例如 Java.gitignore、vim.gitignore。当我将这些文件直接放入工作目录时，它们不起作用。`.gitignore`

是否需要创建单个文件`.gitignore`并将组成文件合并到其中？

因此，在使用`--global` `.gitignore`文件时，配置似乎指向单个文件。例如，如果我想应用`.gitignore`Global/ 目录中的所有文件，我应该手动将它们合并到一个文件中吗？如果是这样，让这个合并的文件与“官方”集合保持最新是额外的工作。

重申一下，我承认我们可以`.gitignore`在不同的目录中使用不同的文件，但这不是我想要的。我想`.gitignore`在一个目录中应用多个文件。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-23T03:26:36.717

澄清一下：一个项目的 gitignore 文件被称为`.gitignore`

* * *

背景：

A`.gitignore`指的是它所在的目录，它是具有 .git 存储库的目录的顶级或后代，即“.git/”目录。

`.gitignore`任何子目录中都可以有多个文件，但最佳实践是在给定的项目根目录中拥有**一个** `.gitignore`文件，并根据需要让该文件引用子目录，例如 images/yearly/recent 否则很难知道 "which" 。 gitignore 文件查看以找到被忽略的内容。鉴于您可以使用模式作为文件名，这可能非常棘手！

我还建议*避免*使用`.gitignore`适用于您机器上*所有*项目的全局文件，尽管您可能会保留一个模板以用于新项目。这里的主要考虑因素是您`.gitignore`将与其他开发人员（可能存在也可能不存在）不同，因此结果未确定。一个例外的例子是`.gitignore`在我的机器上打开的任何项目中使用我不想要的 IDE 文件的全局文件，因此我使用`.gitigore`带有 .idea/ 文件 (rubyMine) 条目的全局文件。

* * *

您看到列出的模板的意图是通常您正在使用特定语言为*给定文件编写代码。*鉴于此，基于该语言的模板通常就足够了。

如果代码库中有多种语言，则需要`.gitignore`为这些语言组合多个 's，这可以通过多种方式完成，例如：

```
cat .gitignore1 .gitignore2 > .gitignore # if .gitignore doesn't exist yet
cat .gitignore1 >> .gitignore # Add to it if it already exists
paste .gitignore1 .gitignore # Add to it if it already exists 
```

* * *

热门（ISH）新闻（2014年夏季）：

Gitignorer 是一个简单的实用程序，可帮助创建 .gitignore 文件。它从 github.com/github/gitignore 中提取特定（指定）的 .gitignore 模板，以及要排除的公共文件，将它们混合在一起，并将它们保存到当前目录中的 .gitignore 中。

示例用法：

```
gitignorer create c java python 
```

Gitignorer 目前在 AUR 中可用，网址为[https://aur.archlinux.org/packages/gitignorer/](https://aur.archlinux.org/packages/gitignorer/)和 GitHub 上的[https://github.com/zachlatta/gitignorer](https://github.com/zachlatta/gitignorer)

* * *

# iphone - 更改 iOS 中的地理位置权限通知文本

> ID：10274425
> 
> 赞同：5
> 
> 时间：2012-04-23T03:21:19.950
> 
> 标签：iphone, objective-c, ios, xcode, apple-push-notifications

许多使用地理位置的 iOS 应用程序会弹出一个基于权限的通知，说明：

“X app 想使用你的位置。确认没问题”，用户可以确认或不打开或关闭它。

如何调整此通知中的文本？（在 xCode 中）

注意：我不是在谈论粗体确认文本 - 其中唯一的变量是应用程序名称，而是在粗体文本“X APP 想要使用您的位置”和确认按钮上方的较浅文本。我已经看到一些应用程序中放置了自定义文本。

我真诚地感谢任何见解

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T04:05:36.127

CLLocationManager 有一个属性——@property 用途——它是一个 NSString。在实例化您的 CLLocationManager 后设置它。这在您的应用程序请求使用位置的权限时显示。

您可以按如下方式进行设置：

```
CLLocationManager *locMgr = [[CLLocationManager alloc] init];
[locMgr setPurpose:@"State your purpose here"]; 
```

这将显示在权限警报中的粗体文本下方。

# symfony-1.4 - 404 | 未找到 | InvalidArgumentException 无法重定向到空 URL

> ID：10274428
> 
> 赞同：0
> 
> 时间：2012-04-23T03:22:21.980
> 
> 标签：symfony-1.4

我将在线服务器上的实时项目复制到本地驱动器，用户登录后，出现此错误。

我尝试使用 /frontend_dev.php 而不是 index.php 登录。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:56:02.803

如果您的组名是“访问者”，请检查您的 app.yml 文件中是否有 sf_guard_plugin_success_signin_url_visitor 键

由于返回的是空的，因此它被路由到空的 URL

# html - 如何从 HTML GET 请求中排除未指定的表单项

> ID：10274432
> 
> 赞同：6
> 
> 时间：2012-04-23T03:23:02.767
> 
> 标签：html, forms, get

当您使用 method='get' 提交 HTML 表单时，表单中的值会被格式化为 GET 请求，例如

```
www.site.com/script.php?var1=value&var2=value&... 
```

据我所知，如果表单上的任何项目未指定，它们仍会被放入字符串中。如果上面示例中的 var1 未指定，您会看到...

```
www.site.com/script.php?var1=&var2=value&... 
```

有没有办法让表单在 GET 请求中不包含任何未指定的值（最好没有 javascript）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:00:20.537

没有必要这样做。您可以使用 PHP 轻松处理发送的变量。但是如果你真的热衷于这样做，你可以使用 jQuery。

无论如何，您可以执行以下操作：

```
<form action="index.html" method="get">
    <input name="name">
    <input name="name2">
    <input name="name3">
    <input type="submit">
</form>
<script type="text/javascript">
    $("form").submit(function() {
        $("form input").each(function(index, element) {
            if(($(this).val()=="")){ $(this).attr("disabled","disabled"); }
        });
    });
</script> 
```

但请记住，这不是一个好习惯！

# c++ - c++中的hbr背景

> ID：10274437
> 
> 赞同：0
> 
> 时间：2012-04-23T03:24:02.907
> 
> 标签：c++, user-interface

![在此处输入图像描述](../Images/f893ee87316e74128f1383a06b494747.png)

我在 C++ 中创建了上述简单的 GUI。我希望静态文本控件背景与主窗口（白色）相同，或者如何使主窗口背景（hbrBackground）与静态文本控件中的背景颜色相同？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:27:54.143

您可以通过响应设置静态控件的背景[`WM_CTLCOLORSTATIC`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb787524.aspx)。

[`WM_ERASEBKGND`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648055.aspx)您可以通过响应和调用（一种可能性）来更改窗口的背景颜色[`FillRect`](http://msdn.microsoft.com/en-us/library/dd162719.aspx)。

# sql-server-2008 - 如何使 MS Access 直通查询在 SQL Server 中正确运行

> ID：10274438
> 
> 赞同：0
> 
> 时间：2012-04-23T03:24:04.343
> 
> 标签：sql-server-2008, ms-access, odbc

当我从使用 odbc 连接的 Microsoft Access 运行此传递查询时，它工作正常：

```
SELECT   b.PRODUCT, b.UPC_NBR, b.EAN_NBR, b.NAME AS ProductDescription, b.AUTHOR, 
     o.RETAILER, o.REFER_NBR, o.ARDESC, a.NAME, o.TRAN_DATE, 
     o.QTY, o.RETAIL, o.PRICE, o.COST

FROM    BOOK_MASTER_REC as b JOIN 
    ORBDETL_RECORD as o ON ISBN_TITLE = o.TITLE 
                 AND ISBN_PUBLISHER = o.BK_PUBL 
                 AND BOOK_GROUP = o.BK_GROUP  
                 AND BOOK_PREFIX = o.BK_PREFIX JOIN 
    ARDESC_RECORD as a ON o.ARDESC = a.ARDESC 

WHERE b.PRODUCT Between 600 And 698 
```

当我从通过链接服务器使用相同 odbc 连接的 SMSS 运行相同的查询时，它会失败：

```
SELECT b.PRODUCT, b.UPC_NBR, b.EAN_NBR, b.NAME AS ProductDescription, b.AUTHOR, 
     o.RETAILER, o.REFER_NBR, o.ARDESC, a.NAME, o.TRAN_DATE, 
     o.QTY, o.RETAIL, o.PRICE, o.COST

FROM    DPS_GPR..root.BOOK_MASTER_REC as b INNER JOIN 
    DPS_GPR..root.ORBDETL_RECORD as o ON ISBN_TITLE = o.TITLE 
                         AND ISBN_PUBLISHER = o.BK_PUBL 
                         AND BOOK_GROUP = o.BK_GROUP  
                         AND BOOK_PREFIX = o.BK_PREFIX INNER JOIN 
    DPS_GPR..root.ARDESC_RECORD as a ON o.ARDESC = a.ARDESC 

WHERE b.PRODUCT Between 600 And 698 
```

它给出了以下错误：

> 链接服务器“DPS_GPR”的 OLE DB 提供程序“MSDASQL”返回消息“[Transoft][TSODBC][usqlsd]')' 应在此处 (FROM)”。Msg 7321, Level 16, State 2, Line 2 准备查询“SELECT Col1061,Col1062,Col1064,Col1065,Col1066,Col1042,Col1048,Col1049,Col1050,Col1051,Col1052,Col1053,Col1054,Tbl1005.NAME Col1040 时出错FROM root.ARDESC_RECORD Tbl1005，（SELECT Col1057，Col1058，Col1059，Col1060，Col1061，Col1062，Col1064，Col1065，Col1066，Tbl1003.RETAILER Col1042，Tbl1003.BK_PREFIX Col1043，Tbl1003.BK_GROUP Col1044，Tbl1003.BK_PUBL Col1045，Tbl1003.TITLE Col1046 ,Tbl1003.REFER_NBR Col1048,Tbl1003.ARDESC Col1049,Tbl1003.TRAN_DATE Col1050,Tbl1003.QTY Col1051,Tbl1003.RETAIL Col1052,Tbl1003.PRICE Col1053,Tbl1003.COST Col1054,bl10107.T3 Col10047,bl10063.T3 Col10047,

当我试图摆脱 MS Access 时，我将不胜感激有关如何通过 SQL Server 实现此功能的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:18:48.740

我能够通过使其成为传递查询来完成这项工作。

```
SELECT * FROM OPENQUERY(DPS_GPR, 'select ... blah blah blah ...') 
```

不像我希望的那样理想的解决方案，但它确实有效。

# visual-studio - VS2011 - 无法调试 javascript Metro 风格应用程序

> ID：10274440
> 
> 赞同：3
> 
> 时间：2012-04-23T03:24:19.733
> 
> 标签：visual-studio, windows-8, microsoft-metro

我有 Windows 8 Consumer Preview 和 VS2011 Ultimate，而不是 Express。我要做的就是在 default.js 脚本文件中的断点处停止。我从拆分布局模板创建了一个项目并运行它。我的 javascript 调试器控制台说：

> Visual Studio 当前未附加到支持浏览器诊断的脚本调试目标。

我处于调试模式，仅使用脚本调试配置。我无法获得任何项目，包括从 MSDN 到 JS 调试的示例。其他人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T05:23:39.167

任何 Metro APP 的生命周期都由 PLM 控制。每当 Metro 应用程序等待用户操作时，PLM 都会在特定超时后暂停它。因此，正常的调试工具可能对 PLM 控制应用程序的生命周期没有用处。检查[此](http://msdn.microsoft.com/en-us/library/windows/apps/hh441481%28v=vs.110%29.aspx)以获取详细说明

# javascript - 在两个javascript函数之间传递字符串

> ID：10274450
> 
> 赞同：0
> 
> 时间：2012-04-23T03:25:17.497
> 
> 标签：javascript, string, jsp, parameters

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<script type="text/javascript">
var  ts='';
function test(value1)
{
// this works when the value1 is a number only but if value1 is a string is does not work
    var optionsVal = ' ';   
    optionsVal= '<input type="button" onclick="postRun('+value1+')" value="test" /> ';
    document.getElementById('test').innerHTML = optionsVal;
}
function postRun(km)
{   
alert(km);
}

</script>
</head>
<body>
<%
String ss="Click Me";
%>
<input type="button" onclick="test('<%=ss%>')" value="Click me" />

<div id="test"></div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:31:30.417

是的，这是因为您的嵌入式代码没有在输出中转义。使用 JSON：

```
optionsVal= '<input type="button" onclick=\'postRun('
    + JSON.stringify(value1) 
    + ')\' value="test" />'; 
```

# c# - 派生类中的别名属性名称？

> ID：10274451
> 
> 赞同：4
> 
> 时间：2012-04-23T03:25:33.553
> 
> 标签：c#, design-patterns, inheritance, properties, polymorphism

我正在通过从我自己的 Point 类继承来编写自己的 Vector 类。我在 Point 类中称为 x、y 和 z 的字段我想在 Vector 类中称为 i、j 和 k。相同的私有双变量返回属性。

我使用的方法是在 Vector 类中将 x、y 和 z 声明为私有，并将 i、j 和 k 设置为公共，但使用相同的 get/setter，如下所示：

这行得通吗，还是我让自己心痛？

```
public class ptsVector : ptsPoint
{
   private double x { get { return x_; } set { x_ = value; } }
   private double y { get { return y_; } set { y_ = value; } }
   private double z { get { return z_; } set { z_ = value; } }

   public double i { get { return x_; } set { x_ = value; } }
   public double j { get { return y_; } set { y_ = value; } }
   public double k { get { return z_; } set { z_ = value; } }
   // methods elided for clarity
} 
```

请注意，Point 类具有 x_、y_ 和 z_ 作为受保护的双精度值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:30:01.157

我想我们需要更多关于你将如何使用这些的信息。如果您不需要将 ptsVector 称为 ptsPoint，那么我会放弃继承。你能说向量*是一个*点吗？如果不是，那么多态在这里就不合适了。

抛开这个特殊的例子不谈，无论如何，我认为给属性起别名是个坏主意。它增加了很多复杂性而没有真正的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T03:32:58.933

我会避免这样做：仅从语义的角度来看，它们是两个不同的概念，一个并没有真正“继承”另一个。如果有的话，我会说一个*向量* **包含**两个*点*，因为它被定义为从 A 点到 B 点的路径。

正如您所说，当您开始向类添加功能时，您会感到心痛。您认为从这种继承中获得的任何好处最好以语义正确的方式进行。

# android - Android中的图像裁剪失败

> ID：10274453
> 
> 赞同：0
> 
> 时间：2012-04-23T03:26:01.147
> 
> 标签：android, xml, gallery, crop

所以我想从图库中选择一张图片然后裁剪它：

```
Intent intent = new Intent();
intent.setType("image/*");
intent.setAction(Intent.ACTION_GET_CONTENT);
startActivityForResult(Intent.createChooser(intent,
      "Select Picture"), PHOTO_PICKED_WITH_DATA); 
```

好的，选择照片然后在ActivityResult上捕捉它，然后裁剪它：

```
Intent intent = new Intent("com.android.camera.action.CROP");
    intent.setDataAndType(mAvatarUri, "image/*");
    intent.putExtra("crop", true);
    intent.putExtra("aspectX", 1);
    intent.putExtra("aspectY", 1);
    intent.putExtra("outputX", ICON_SIZE);
    intent.putExtra("outputY", ICON_SIZE);
    intent.putExtra("scale", true);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, mAvatarUri);
    intent.putExtra("return-data", true);
    startActivityForResult(intent, CROP_IMAGE); 
```

现在，问题是当我想将其转换为字节然后将其发送到 xml 中......它不仅需要裁剪的图像，而是整个图像本身......而且，我无法访问裁剪的图像 uri，它说找不到文件！嗯，看来我裁剪的图像毕竟没有保存......

我怎么能解决这个问题？

三星王牌 2.3.4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:18:29.157

在以下链接中检查此代码。

[裁剪图像](http://www.londatiga.net/featured-articles/how-to-select-and-crop-image-on-android/)

这对我来说可以..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:46:12.367

我不知道你是如何获得这种技术来裁剪图像的。但是，对我来说，我总是使用[这个库](https://github.com/lvillani/android-cropimage)。它从来没有给我留下深刻印象。从 android 2.1 一直工作到 3.2（永远不要在 4.0 以后测试它）。

这是我的做法：

```
Intent cropIntent = new Intent(imageProcessActivity,
        CropImage.class);
cropIntent.putExtra("image-path",
        FileUtil.saveTempFile(ImageProcessActivity.processedBitmap, filename));
cropIntent.putExtra("scale", true);
imageProcessActivity.startActivityForResult(cropIntent, ImageProcessActivity.INTENT_CROP_CODE); 
```

以下是如何捕捉结果：

```
if (requestCode == INTENT_CROP_CODE && resultCode == RESULT_OK) {
    Bundle extras = intent.getExtras();
    if (extras != null) {
        Uri uri = null;
        uri = (Uri) extras.get("imageCrop");
        Bitmap bitmap = null;
        try {
            bitmap = ImageUtil.decodeFile(
                    new File(new URI(uri.toString())),
                    AppConstant.MAX_IMAGE_SIZE);
        } catch (URISyntaxException e) {
            e.printStackTrace();
        }
        processedBitmap = bitmap;
        selectedImage.setImageBitmap(bitmap);
    }
} 
```

# c++ - 服务器意外关闭连接

> ID：10274456
> 
> 赞同：0
> 
> 时间：2012-04-23T03:27:00.963
> 
> 标签：c++, postgresql

如果我的问题已经得到解答，我很抱歉，但我还找不到。我正在使用 C++ 和连接池连接到 Win32 控制台应用程序中的 PostgreSQL 数据库。一开始运行正常。但是，过了一会儿，程序收到一个错误：“服务器意外关闭了连接。这可能意味着服务器在处理请求之前或处理请求时异常终止”。

当我打开 PostgreSQL 日志文件时，它显示消息：“客户端连接上出现意外的 EOF，无法从客户端接收数据：无法建立连接，因为目标机器主动拒绝了它。”

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T06:45:16.527

这听起来确实像一个网络问题。我会先看防火墙，然后再看交换机。我不认为电缆或坏的网卡会导致这样的问题。

听起来正在发生的事情是连接正在重置。如果您消除了网络问题，那么下一个应归咎于连接池软件。看看把它关掉，看看问题是否仍然存在。

# android - 当进程杀死我在android中的活动时，是否可以保存我的私人日期？

> ID：10274464
> 
> 赞同：0
> 
> 时间：2012-04-23T03:28:34.450
> 
> 标签：android, process

当我的活动第一次启动时，我必须给出一个对话框。所以我在我的

```
public void onCreate(Bundle savedInstanceState) 
```

并使用

```
protected void onSaveInstanceState (Bundle outState) 
```

为了节省我的发射时间。我注意到操作系统创建了一个新的“Bundle outState”而不是使用旧的。而且我无法调试重新创建时的日期。

我的问题：

1.  我保存在 onSaveInstanceState 中的日期，真的可以被 Oncreate 读取吗？以及如何调试？

2.  当进程被操作系统杀死时，我是否可以只使用私有成员变量来保存状态并且不会被操作系统删除。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:45:03.313

`Bundle`不能用于在应用程序重新启动时携带数据。

您最好将数据保存到更永久的存储中，例如`SharedPreferences`，将此代码放入`onCreate()`：

```
SharedPreferences prefs;
prefs = getSharedPreferences( "preferences", Context.MODE_PRIVATE);
long last_run_time = prefs.getLong( 'last_run', 0 );
if( last_run_time == 0 ) { // zero means your app has never been run
    // display dialog, this is the first time!
    ....
    // this saves current system time to prevent your dialog being seen again
    prefs.edit().putLong( 'last_run', system.currentTimeMillis() ).commit();
} 
```

# javascript - JavaScript 嵌套对象对父对象的引用

> ID：10274465
> 
> 赞同：2
> 
> 时间：2012-04-23T03:28:42.270
> 
> 标签：javascript, object, prototype

我正在 JS 中处理一个相当复杂的对象，但遇到了问题：

我有以下（删节）代码：

```
var LocationSelector;

LocationSelector = function(container) {
  this.selectors = {
    container: container,
    city_name: container.find('input.city_name'),
    city_id: container.find('input.city_id')
  };
  return this.initialize();
};

LocationSelector.prototype = {
  initialize: function() {
    return this.city.checkStatus();
  },
  city: {
    status: null,
    message: null,
    id: null,
    checkStatus: function() {
      if (LocationSelector.selectors.city_name.val() && LocationSelector.selectors.city_id.val()) {
        return LocationSelector.city.setStatus('success');
      }
    },
    setStatus: function(status) {
      return alert(status);
    }
  }
}; 
```

两个问题：

1) 子对象函数内部`this`不再引用根对象。如果我写出来，似乎我可以参考父母`LocationSelector.object.method( args )`，但要输入的内容很多。有没有办法定义返回父对象的快捷方式？

2) 在某些情况下，我需要每页有几个 this 实例，所以对我来说很重要的是，我可以在`selectors`实例化新对象时设置各种实例，然后在原型中引用实例选择器。`LocationSelector`在子对象方法中引用父对象（即）是否可行？JS 如何知道要保留当前活动对象的存储属性？

基本上，我正在尝试实现一个类，而我对 JS 完全陌生，并不真正知道如何去做。因此，感谢任何帮助或建议。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T04:55:21.080

你目前的方法有很多问题。这是更接近你想要的东西，虽然我不明白为什么`LocationSelector`实例有一个`city`成员。

```
function LocationSelector(container) {
  this.selectors = {
    container: container,
    city_name: container.find("input.city_name"),
    city_id: container.find("input.city_id")
  };

  this.city = new City(this);
  this.city.checkStatus();
}

function City(locationSelector) {
  this.status = null;
  this.message = null;
  this.id = null;
  this.locationSelector = locationSelector;
}

City.prototype.checkStatus = function () {
  if (this.locationSelector.selectors.city_name.val() && this.locationSelector.selectors.city_id.val()) {
    this.setStatus("success");
  }
};

City.prototype.setStatus = function () {
  alert("status");
}; 
```

注意事项：

1.  数据属性在实例上，而不是原型上。只有方法在原型上。
2.  `City`显然是它自己的类，所以你应该把它变成一个。在您的代码中，一个城市在 的所有实例之间共享`LocationSelector`，因为它放在原型上。在此代码中，它在`LocationSelector`构造函数中被分配为实例属性。
3.  您不能`LocationSelector.selectors`像在示例中那样引用。`LocationSelector.selectors`将用于“静态”属性，它`LocationSelector`没有。相反，您需要参考`selectors`特定实例的属性；在本例中，该实例由 给出`this.locationSelector`。
4.  第 2 点和第 3 点说明了一个重要事实：“子”`City`实例在没有具体实例的情况下无法引用“父”`LocationSelector`类的属性。

* * *

这是对我来说更有意义的代码版本，删除了`LocationSelector`具有`city`属性的部分（它不使用）。

```
function LocationSelectors(container) {
  this.city_name = container.find("input.city_name");
  this.city_id = container.find("input.city_id");
}

function City(locationSelectors) {
  this.locationSelector = locationSelector;
}

City.prototype.checkStatus = function () {
  if (this.locationSelectors.city_name.val() && this.locationSelectors.city_id.val()) {
    this.setStatus("success");
  }
};

City.prototype.setStatus = function () {
  alert("status");
};

function checkCityStatus(container) {
  var locationSelectors = new LocationSelectors(container);
  var city = new City(locationSelectors);

  city.checkStatus();
} 
```

* * *

我给你留下了[Crockford 的“Private Members in JavaScript”](http://javascript.crockford.com/private.html)的链接，它谈到了在 JavaScript 中做 OO。还有其他可能更好的解释，但至少那个会让你走上正确的轨道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T04:40:14.367

阅读[闭包](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)，我很肯定你会找到你需要的东西。

这是您要完成的工作的一个简单示例：

```
function MyCoolObject(name){
   var self_myCoolObject = this;
   this.name = name;
   this.popAlertWithNameInFiveSeconds = function(){
       setTimeout(function(){
         alert('Incorrect reference to name "this.name" returns ' + this.name);
         alert('Correct reference to name "self_myCoolObject.name" returns ' + self_myCoolObject.name);
       },5000)
   }
}

//TO TEST
var MyObj = new MyCoolObject('MySuperCoolName')
MyObj.popAlertWithNameInFiveSeconds(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-06T21:17:27.923

这是我拥有的一段 JS 代码。在我进入点击处理程序之前，我`SlideShow`通过调用来引用对象 () `var parent = this`。然后在以后的嵌套函数中，您可以确保您通过使用调用正确的范围`parent.function()`

```
/* Slide Show object */
function SlideShow(parentContainerId) {

    this.BEGINNING  = 'Beginning';
    this.END        = 'End of list';
    this.FIRSTINDEX = 0;

    this.length     = jQuery(parentContainerId + ' img').length;
    this.container  = jQuery(parentContainerId);
    this.imgs       = jQuery(parentContainerId + ' img');
    this.index      = this.FIRSTINDEX;
    this.status     = 'beginning';           // beginning, end

    this.init = function() {
        // get it started
        this.moveTo(this.FIRSTINDEX);
        this.process();

        // ****GET OBJECT SCOPE*****
        var parent      = this;

        // set up click listener
        this.container.find('img').click(function(e) {
            var item_width = jQuery(this).width();
            var x_click_ps = e.clientX - jQuery(this).offset().left;
            var x_diff     = x_click_ps / item_width;

            console.log(this);
            if (x_diff < .5) {
                parent.moveByIncrement(-1)
                parent.process();
            } else {
                parent.moveByIncrement(1);
                parent.process();
            }

        });
    }

.
.
.
} 
```

# python - 在 MongoDB 中构建嵌入式文档的最佳方法是什么？

> ID：10274467
> 
> 赞同：0
> 
> 时间：2012-04-23T03:28:59.177
> 
> 标签：python, mongodb, embedding, pymongo

我有这样的文档布局：

```
Program = {
    '_id':ObjectId('4321...'),
    'Title':'The Title',
    'Episodes':[
              {
              'Ep_ID':'234122',  # this is unique
              'Title': 'Ep1',
              'Duration':45.2 },
              'Ep_ID':'342343' # unique
              'Title': 'Ep2',
              'Duration':32.3 }
                ]
            } 
```

我想做的是在每个情节中的另一个嵌入式文档中，如下所示：

```
Program = {
        '_id':ObjectId('4321...'),
        'Title':'The Title',
        'Episodes':[
                {
                'Ep_ID':'234122'  # this is unique
                'Title': 'Ep1',
                'Duration':45.2,
                'FileAssets':[
                          { 'FileName':'video1.mov', 'FileSize':2348579234 },
                          { 'FileName':'video2.mov', 'FileSize':32343233 }
                             ]
                },
                {
                'Ep_ID':'342343' # unique
                'Title': 'Ep2',
                'Duration':32.3,
                'FileAssets':[
                          { 'FileName':'video1.mov', 'FileSize':12423773 },
                          { 'FileName':'video2.mov', 'FileSize':456322 }
                             ]
                }
                  ]
            } 
```

但是，我不知道如何在“第三”级别添加/修改/删除文档。有可能，甚至是好的设计吗？我非常希望在一个文档中包含所有数据，但管理似乎开始变得过于复杂。

我的另一个想法是使用子文档中恰好存在的唯一值作为键。我考虑过我的子文档，它们都有某种独特的价值。所以我可以这样做：

```
Program = {
        '_id':ObjectId('4321...'),
        'Title':'The Title',
        'Ep_ID_234122':{episode data},
        'Ep_ID_342343':{episode data},
        'FileAsset_BigRaid_Video1.mov':{'Ep_ID_234122', + other file asset data},
        'FileAsset_BigRaid_video2.mov':{'Ep_ID_234122', + other file asset data}
        } 
```

任何想法都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:12:55.823

是的，您绝对可以将数据结构化为具有这种嵌套。更重要的是，您绝对不需要做任何特别的事情来完成它（至少使用 pymongo）。如果您需要更新现有文档，只需使用更新光标获取您的文档，如果这是您的问题？

至少，对于你的第一个想法。您对架构的第二个想法根本不是构造该数据的好方法。一方面，如果不对键进行字符串匹配，您就不可能轻松地遍历 Program 文档的子集，而且成本会很高。

也就是说，我目前正在处理一些主要的 MongoDB 性能问题，因此我可能会建议您将文件资产保存在单独的集合中。如果您计划将此数据集变大，它将使您以后更容易扩展。

# bash - 尝试执行“as”时出错：execvp：没有这样的文件或目录

> ID：10274468
> 
> 赞同：6
> 
> 时间：2012-04-23T03:29:05.557
> 
> 标签：bash, gcc, cygwin, mingw-w64

尝试构建时出现此错误：

```
$ make CC=i686-w64-mingw32-gcc
  CC    aes.c
i686-w64-mingw32-gcc: error trying to exec 'as': execvp: No such file or directory 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T03:32:26.770

设置`PATH`为`/usr/bin`而不是`/bin`

> 有一个已知的警告，直接调用编译器 `/bin/x86_64-w64-mingw32-gcc`会失败， `/usr/bin/x86_64-w64-mingw32-gcc`请改用并确保您的`PATH` 变量具有`/usr/bin`before `/bin`。

[mingw-w64.sourceforge.net](http://mingw-w64.sourceforge.net)

这是由安装问题引起的。在 linux 上，你有`/bin`and `/usr/bin`，没什么大不了的。在 Cygwin 上，你有`C:\cygwin\bin`. 然后像这样设置挂载点。

```
C:\cygwin\bin on /usr/bin
C:\cygwin on / 
```

因此，从技术上讲，您可以`C:\cygwin\bin`用`/bin`or表示`/usr/bin`，尽管如上所述，前者不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-19T13:40:53.850

你可能想念`g++`.`mingw`

试试这个：

```
sudo apt install g++-mingw-w64-i686 
```

之后，`i686-w64-mingw32-gcc`或者`i686-w64-mingw32-g++`将编译您的源代码。

# macos - 生成纯（或平面）二进制文件

> ID：10274470
> 
> 赞同：4
> 
> 时间：2012-04-23T03:29:09.163
> 
> 标签：macos, assembly, operating-system, gnu-assembler

如何生成可以直接在 CPU 上运行的平面二进制文件？
也就是说，没有操作系统；也称为独立环境代码（请参阅[在没有操作系统的情况下直接运行的程序的名称是什么？](https://stackoverflow.com/questions/10274513/what-is-the-name-for-a-program-running-directly-without-an-os)）。

我注意到我正在使用的汇编程序（`as`来自 OS-X 开发人员工具包）不断生成 Mach-O 文件，而不是平面二进制文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T11:08:14.893

我就是这样做的。使用 XCode 命令行工具附带的链接器，您可以使用以下方式组合目标文件：

```
ld code1.o code2.o -o code.bin -r -U start 
```

`-r`要求仅将`ld`目标文件组合在一起而不创建库，`-U`告诉`ld`忽略缺少的定义`_start`（通常由 C 标准库提供）。

这会创建一个仍然有一些头字节的二进制文件，但这很容易识别为

```
otool -l code.bin 
```

在输出中查找`__text`部分：

```
Section
  sectname __text
   segname __TEXT
      addr 0x00000000
      size 0x0000003b
    offset 240
     align 2^4 (16)
    reloff 300
    nreloc 1
     flags 0x80000400
 reserved1 0
 reserved2 0 
```

注意偏移量（您可以通过比较 和 的输出来确认`otool -l`）`hexdump`。我们不想要标头，所以只需使用`dd`复制出您需要的字节：

```
dd if=code.bin of=code_stripped.bin ibs=240 skip=1 
```

我将块大小设置为偏移量并跳过一个块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:42:06.600

你没有。您让*链接器*生成一个平面（纯）二进制文件。为此，您必须使用`OUTPUT_FORMAT(binary)`. 如果没记错的话，您还需要指定有关部分如何合并的信息，但我不记得任何细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T04:28:58.390

我认为您不一定需要这样做。一些引导加载程序可以加载更复杂的可执行格式。例如，GRUB 可以立即加载 ELF。我相信您可以通过某种方式获得它或其他一些引导加载程序来加载 Mach-O 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T04:33:16.987

您可能想尝试使用`nasm`汇编器——它有一个控制输出二进制格式的选项，包括`-f bin`平面二进制文件。

请注意，您不能轻松地将 C 代码编译为平面二进制文件，因为几乎所有 C 代码都需要无法在平面二进制文件中表示的二进制特性（如外部符号和重定位）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-02T17:36:44.103

我知道没有简单的方法。

一旦我需要创建将由另一个程序加载和执行的纯二进制文件。但是，`as`不允许我这样做。我尝试使用`gobjcopy`将目标文件转换为原始二进制文件，但它无法正确转换如下代码：

```
.quad LinkName2 - LinkName1 
```

在它生成的二进制文件中`gobjcopy`看起来像

```
.quad 0 
```

我最终编写了特殊的转储程序，该程序是可执行的，可以将部分内存保存在磁盘上：

```
            .set SYS_EXIT, 0x2000001
            .set SYS_READ, 0x2000003
            .set SYS_WRITE, 0x2000004
            .set SYS_OPEN, 0x2000005
            .set SYS_CLOSE, 0x2000006。数据
转储文件：.ascii "./dump"
            .byte 0
输出文件描述符：.quad 0

```
 .section __TEXT,__text,regular
        .globl _main 
```

_主要的：

```
 movl $0644, %edx # file mode
        movl $0x601, %esi # O_CREAT | O_TRUNC | O_WRONLY
        leaq dumpfile(%rip), %rdi
        movl $SYS_OPEN, %eax
        syscall
        movq %rax, OutputFileDescriptor(%rip)

        movq $EndDump - BeginDump, %rdx
        leaq BeginDump(%rip), %rsi
        movq OutputFileDescriptor(%rip), %rdi
        movl $SYS_WRITE, %eax
        syscall

        movq OutputFileDescriptor(%rip), %rdi
        movl $SYS_CLOSE, %eax
        syscall 
```

完毕：
            movq %rax, %rdi
            movl $SYS_EXIT, %eax
            系统调用

```
 .align 3 
```

开始转储：
            .include “dump.s”
结束转储：
            .quad 0

```

必须保存为原始二进制文件的代码包含在`dump.s`

# c++ - Windows中的c ++：头文件更改后，是否只编译派生类？

> ID：10274472
> 
> 赞同：-1
> 
> 时间：2012-04-23T03:29:49.637
> 
> 标签：c++, oop, dll, compiler-construction

更新：

## 谢谢大家的热心回复。似乎我有点困惑。变化是在基类中添加了一个新的成员函数。我刚刚意识到也许我确实需要重新编译依赖于导出此类的 dll 的所有内容，因为符号表中函数名称的地址发生了变化。请确认我是对还是错。

为此争论不休，

当某个基类中的成员函数发生变化时，我只重新编译了从该基类派生的所有类，并遇到了一些运行时错误。

在辩论的另一边，我被告知我应该重新编译所有“依赖”于这个基类的类。

1.  我不确定这是否正确？因为我正在构建 DLL，而且我总是理解这个动态链接的想法是不要重新编译。

2.  如果是真的，我还想知道这里是什么“依赖”？

这个问题可能被问得太笼统，如果我应该提供任何其他细节，请告诉我。真的需要了解编译和链接的东西。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:38:07.750

DLL 和类不能很好地协同工作。（在 DLL 中使用类很好，当您尝试导出它们时就会遇到问题。）

出于这个原因，组件/对象系统（例如 COM、ActiveX、CORBA）定义了一个将用户与实现分开的接口。如果 DLL 的公共 API 仅使用指向仅具有纯虚函数的类型的指针，则它在 DLL 和调用者之间没有共享布局。

如果您尝试与数据或内联函数共享类，您将具有紧密耦合，并且需要重新编译所有用户以进行最轻微的实现更改。

# python - 如何使用 H5PY 将 HDF5 文件导出到 NumPy？

> ID：10274476
> 
> 赞同：26
> 
> 时间：2012-04-23T03:30:49.603
> 
> 标签：python, numpy, hdf5, h5py

我有一个包含三个数组的现有 hdf5 文件，我想使用 h5py 提取其中一个数组。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-23T03:36:10.413

`h5py`已经将文件作为 numpy 数组读取，所以只需：

```
with h5py.File('the_filename', 'r') as f:
    my_array = f['array_name'][()] 
```

`[()]`读取整个数组的方法；如果你不这样做，它不会读取整个数据，而是让你懒惰地访问子部分（当数组很大但你只需要它的一小部分时非常有用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:55:09.943

对于这个问题，这太过分了，但如果你有很多这样的事情要做，我会使用一个包[SpacePy](http://spacepy.lanl.gov/doc/index.html)，它可以让其中的一些变得更容易。

[datamodel.fromHDF5()](http://spacepy.lanl.gov/doc/autosummary/spacepy.datamodel.fromHDF5.html#spacepy.datamodel.fromHDF5)文档 这将返回一个数组字典，其存储方式与 h5py 处理数据的方式类似。

# javascript - 使用 javascript 访问 CDATA 中的特定元素

> ID：10274486
> 
> 赞同：2
> 
> 时间：2012-04-23T03:32:29.257
> 
> 标签：javascript, html, xml, xml-parsing, cdata

我只想访问内部 CDATA。如何使用 javascript 解析 CDATA 中的节点？

我要做的是将里面的文字从AAA修改为BBB。

```
<b1><![CDATA[<html><h1>fdsa</h1><h2>AAA</h2></html>]]></b1> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:08:37.273

CDATA 中没有节点或元素。CDATA 的意思是告诉 XML 的读者：“这里的东西可能看起来像标记，但它不是：它是普通的纯文本，我不希望它被解析。”

因此 CDATA 告诉解析器向应用程序提供包含尖括号的非结构化文本字符串。如果应用程序认为，与它被告知的相反，这个字符串实际上包含标记，那么它可以通过一个解析器来确定它的结构。

# javascript - 使用 javascript 错误添加前导零

> ID：10274490
> 
> 赞同：-1
> 
> 时间：2012-04-23T03:33:35.460
> 
> 标签：javascript, jquery, padding

我将如何使用 javascript 或 jquery 为其添加前导零？

```
for (im=1;im<=31;im++){
     days[im]=everyDay[im];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:17:04.823

考虑：

```
for (var t, im=1; im<=31; im++){ 
  t = everyDay[im]; 
  days[im] = (t < 10? 0 : '') + t; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:42:08.890

如果您想在`days`数组中使用前导零。`parseInt()`您可以创建另一个数组，其中包含天数作为这样的字符串，并在它所属的位置或在新数组上使用一个或另一个：

```
var days = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31],
    strDays = [];

for (var i = 0, l = days.length; i < l; i++) {
    strDays.push(String(days[i]).length < 2 ? '0' + days[i] : String(days[i]));
}

// `strDays` prints: ["01","02","03","04","05","06","07","08","09","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31"] 
```

**编辑：** 更短：

```
var strDays = [];
for (var i = 1; i < 32; i++) {
    strDays.push(('' + i).length < 2 ? '0' + i : '' + i);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T03:42:51.690

在它前面加上一个 0，然后取最后两个字符：

```
var days = {};
for (im=1;im<=31;im++){
     days[im] = ('0' + im).substr(-2);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T04:01:26.327

```
for (im=1;im<=31;im++){
  days[im] = (everyDay[im] < 10 ? '0' : '') + everyDay[im];
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T04:51:15.210

```
for (var im=1;im<=31;im++){
     var x = parseInt(everyDay[im]);
     if(x < 10)
     days[im]='0' + x;
     else days[im]= x;
} 
```

# php - SSH2更改用户密码

> ID：10274496
> 
> 赞同：1
> 
> 时间：2012-04-23T03:34:16.640
> 
> 标签：php, shell, ssh, centos

我一直在玩 SSH，现在我需要通过 PHP 的 ssh2 更改用户密码，

这是我的代码：

```
$stream = ssh2_exec($ssh, 'passwd test1234');
stream_set_blocking($stream, true);
$data = '';
while($buffer = fread($stream, 4096)) {
    $data .= $buffer;
}
fclose($stream);
echo $data."<hr/>";

$stream = ssh2_exec($ssh, 'saulius123');
stream_set_blocking($stream, true);
$data = '';
while($buffer = fread($stream, 4096)) {
    $data .= $buffer;
}
echo $data."<hr/>";
$stream = ssh2_exec($ssh, 'saulius123');
    stream_set_blocking($stream, true);
    $data = '';
    while($buffer = fread($stream, 4096)) {
        $data .= $buffer;
    }
    echo $data."<hr/>"; 
```

然而，这只是让我的 PHP 脚本挂起，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T03:42:16.787

`ssh2_exec`调用命令；要发送输入，您需要写入流。

也就是说，`$stream`使您可以访问标准输入和标准输出。`fwrite`因此，`$stream`在尝试读回输出之前，您需要编写您希望设置的密码。

由于您已将流置于阻塞模式，`passwd`因此正在等待您的输入（密码），同时您的脚本正在等待`passwd`. 结果，脚本挂起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T05:52:29.683

就个人而言，我会使用[phpseclib，一个纯 PHP SSH 实现](http://phpseclib.sourceforge.net)。例子：

```
<?php
include('Net/SSH2.php');

$key = new Crypt_RSA();
//$key->setPassword('whatever');
$key->loadKey(file_get_contents('privatekey'));

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', $key)) {
    exit('Login Failed');
}

echo $ssh->read('username@username:~$');
$ssh->write("ls -la\n");
echo $ssh->read('username@username:~$');
?> 
```

它相对于 libssh2 的最大优势是可移植性。如果我工作，我们使用亚马逊网络服务，有时我们会转移到新的产品服务器或开发服务器，设置它们最困难的部分是安装所有的 PECL 扩展，什么不是。

相比之下，phpseclib 没有任何要求。

# .net - 使用 F# 的异步函数中没有输出？

> ID：10274498
> 
> 赞同：0
> 
> 时间：2012-04-23T03:35:00.123
> 
> 标签：.net, asynchronous, f#

[尝试使用 Blocking Queue 和此处](http://msdn.microsoft.com/en-us/library/hh297096.aspx)给出的代码来实现读写器问题。整个事情编译并运行，但是 reader() 和 writer() 函数中的 async{...} 部分没有产生任何输出。我很确定它们被正确调用，因为即使我是 F# 的菜鸟，带有此代码的教程页面似乎也是真实的。

这是整个代码：

```
open System
open System.IO
open System.Collections.Generic
//open System.Runtime.Serialization.Formatters.Binary

///defining Agent
type Agent<'T> = MailboxProcessor<'T>

///defining Message
type internal BlockingAgentMessage<'T> = 
  | Get of AsyncReplyChannel<'T>
  | Add of 'T * AsyncReplyChannel<unit> 

/// Agent-based implementation of producer/consumer problem 
type BlockingQueueAgent<'T>(maxLength) =
    let agent = Agent.Start(fun agent ->
        let queue = new Queue<_>()
        //let queue = new Queue()
        // State machine running inside the agent
        let rec emptyQueue() = 
            agent.Scan(fun msg ->
                match msg with 
                | Add(value, reply) -> Some(enqueueAndContinue(value, reply))
                | _ -> None )
        and fullQueue() = 
            agent.Scan(fun msg ->
                match msg with 
                | Get(reply) -> Some(dequeueAndContinue(reply))
                | _ -> None )
        and runningQueue() = async {
            let! msg = agent.Receive() 
            match msg with 
            | Add(value, reply) -> return! enqueueAndContinue(value, reply)
            | Get(reply) -> return! dequeueAndContinue(reply) }
        and enqueueAndContinue (value, reply) = async {
            queue.Enqueue(value)
            reply.Reply() 
            return! chooseState() }
        and dequeueAndContinue (reply) = async { 
            reply.Reply(queue.Dequeue())
            return! chooseState() }
        and chooseState() = 
            if queue.Count = 0 then emptyQueue()
            elif queue.Count = maxLength then fullQueue()
            else runningQueue()

        // Start with an empty queue
        emptyQueue() )

    /// Asynchronously adds item to the queue. If the queue
    /// is full, it blocks until some items are removed.
    member x.AsyncAdd(v:'T) = 
        agent.PostAndAsyncReply(fun ch -> Add(v, ch))

    /// Asynchronously gets item from the queue. If the queue
    /// is empty, it blocks until some items are added.
    member x.AsyncGet() = 
        agent.PostAndAsyncReply(Get)

let ag = new BlockingQueueAgent<int>(3)
printfn "Blocking Queue Agent program"

let writer() = async {

    for i in 0 .. 10 do 
        do! ag.AsyncAdd(i)
        printfn "Added: %d" i }

let reader () = async { 
    while true do
        let! v = ag.AsyncGet()
        do! Async.Sleep(1000)
        printfn "Got: %d" v }

reader () |> Async.Start
printfn "Started Reader ..."
writer () |> Async.Start
printfn "Started Writer ..." 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T04:18:40.930

代码很好——你的程序在`async`执行之前就退出了。只需添加类似

```
System.Console.Read() |> ignore 
```

到最后。这对我有用

# javascript - 修复外部div顶部的内部div，滚动外部div时，防止内部div溢出外部div

> ID：10274501
> 
> 赞同：0
> 
> 时间：2012-04-23T03:35:28.207
> 
> 标签：javascript, jquery, html, css

我一直在尝试在外部 div 的顶部修复内部 div。
1.inner div 应该比outer div 有更宽的宽度
2.outer div 是可滚动的，inner div 应该在滚动时保持在outer div 的顶部。

我的问题是内部 div 更长时间停留在外部 div 内。

* * *

```
<div id="ScheduleHolder" style="height:100px; width:120px; overflow:scroll">

    <div id="2" valign="top" style="float:none; display:block; position:absolute !important; margin:0;">

        <table border="1" bgcolor="#99FF00">

          <tr>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

          </tr>

        </table> 

    </div>

    <div id="3" style="float:left; display:block;">

       <table border="1">

          <tr>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

            <th scope="col">&nbsp;</th>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

                            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

                            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

                            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

                            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

                            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

                            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

                            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

                            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

                            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

          <tr>

            <th scope="row">&nbsp;</th>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

            <td>&nbsp;</td>

          </tr>

        </table>

    </div>

    <div style="clear:both"></div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:32:04.897

你想试试 DataTables jQuery 插件来处理这个问题： [http ://datatables.net/](http://datatables.net/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:43:23.970

好吧，只需将内部 div 放在外部 div 之外，然后将现在是外部 div 的内部 div 与外部 div 对齐，当然，现在内部 div 和您的内部 div 将出现在旧内部 div 的顶部，但是我们知道这是秘密的外部div。

# c# - 如果应用程序在操作中，则还原已完成的更改

> ID：10274503
> 
> 赞同：0
> 
> 时间：2012-04-23T03:35:49.343
> 
> 标签：c#, console

当我运行控制台应用程序时，我正在执行一系列步骤。假设步数为 8，它在第 4 步某处失败。

我希望能够恢复我在失败之前所做的第一步。如果它在任何步骤中失败，如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:47:54.647

如果您使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)实现这些步骤，其中每个步骤都知道如何*执行*自身以及*撤消*自身。然后，您将能够遍历已*完成*的步骤并*撤消*它们。

[您可能也对实现命令模式](https://stackoverflow.com/questions/2214874/implementing-the-command-pattern)这个问题感兴趣。

# python - 在工厂函数中修改不可变对象

> ID：10274509
> 
> 赞同：2
> 
> 时间：2012-04-23T03:36:35.740
> 
> 标签：python, design-patterns, constructor, immutability, software-design

是否有描述以下设置的设计模式？这种设计是否存在任何重大问题？

类`Widget`实例可以由“哑”构造函数`Widget.__init__()`或“智能”工厂方法构建`Workbench.upgrade_widget()`：

```
class Widget:
  def __init__(self, abc, def, ...):
    self.abc = abc
    self.def = def
    ...
  ...

class Workbench:

  # widget factory function, which uses data from the workbench instance
  def upgrade_widget(self, widget, upgrade_info):
    widget = Widget(widget.abc, widget.def, ...)
    # I will modify the widget's attributes
    ...
    self.rearrange_widget(widget, xyz) # modifies widget's internal state
    ...
    widget.abc = ... # also modifies widget's state
    ...
    return widget

  # uses data from the workbench instance
  def rearrange_widget(self, widget, xyz):
    ...
  # this class does other stuff too
  ... 
```

小部件是不可变的，因为我不能在它们完全初始化后修改它的实例（很多代码都依赖于这个不变量）。但是我发现在初始化*时*修改小部件非常方便，并且使代码更清晰。

我主要担心的是我修改了不同类中的“不可变”小部件。如果它只是 in `upgrade_widget`，我可能会接受它，因为它不会修改传递给它的小部件。但是该方法依赖于其他`Workbench`方法 ( `rearrange_widget`)，这些方法会修改它作为参数接收的小部件。我觉得我正在失去对这个“不可变”实例实际可以修改的位置的控制——有人可能会不小心调用`rearrange_widget`一个已经完全初始化的小部件，从而导致灾难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:10:18.943

@chees：一种更简洁的方法是修改并`__dict__`始终引发异常（顺便说一句，这不是一个好主意- 它只是一般）：`__init__``__setattr__``raise Exception`

```
class Widget:
    def __init__(self, args):
        self.__dict__['args'] = args

    def __setattr__(self, name, value):
        raise TypeError 
```

在 Workbench 中以相同的方式修改它（即使用`__dict__`）不断提醒您您正在做一些您不应该做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T04:50:46.087

您现在如何执行 Widget 的不变性？

如果您将“锁定”属性添加到您的小部件，并包装您的 setattr 以检查该属性怎么办：

```
class Widget(object):
    __locked = False
    def __init__(self,a,b,c,locked=True):
        ...
        self.__locked = locked

    def lock(self):
        self.__locked = True

    def is_locked(self):
        return self.__locked

    def __setattr___(self,*args,**kw):
        if self.__locked:
            raise Exception('immutable') # define your own rather than use Exception
        return super(Widget).__setattr__(self,*args,**kw) 
```

然后在工厂：

```
class Workbench(object):
    def upgrade_widget(self,widget,upgrade_info):
        widget = Widget(widget.a,widget.b,...,locked=False)
        self.rearrange_widget(widget, blah)
        widget.c = 1337
        widget.lock()
        return widget 
```

在一般使用中，您可以非常确定一旦锁定类不会发生任何有趣的事情。任何关心小部件不变性的方法也应该检查该小部件的 is_locked() 。例如，rearrange_widget 应该在做任何事情之前检查小部件是否也被解锁。

尽管恶意篡改了实例，但无论如何都可能发生这种情况。它也不会阻止属性被它们自己的方法改变。

请注意，我在上面编写的代码（伪 python）未经测试，但希望它说明了如何处理您的主要问题的总体思路。

哦，我不确定这种模式是否有特定的名称。

# objective-c - "__block" 变量在出块时产生 nil 值

> ID：10274511
> 
> 赞同：5
> 
> 时间：2012-04-23T03:36:41.767
> 
> 标签：objective-c, automatic-ref-counting, objective-c-blocks

我想使用 __block 变量来获取块中的值。但是当超出块时， __block 变量似乎为零。为什么会发生这种情况？

```
 NSString *fileName = [Tools MD5Encode:url];
    __block NSString *filePath = nil;
    [fileList enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        NSString *aFileName = obj;
        if ([aFileName isEqualToString:fileName]) {
            NSString *path = [VERSIONS_INFO_DATA_DIRECTORY stringByAppendingPathComponent:aFileName];
            filePath = path;
            NSLog(@"filePath1 %@", filePath);
            *stop = YES;
        }
    }];
    //NSLog(@"filePath2 %@", filePath);
    //filePath seems to be nil
    return filePath; 
```

当我将代码更改为 [路径复制] 时，它可以工作。但我不知道这是否是个好主意。有什么决定吗？

```
 NSString *fileName = [Tools MD5Encode:url];
    __block NSString *filePath = nil;
    [fileList enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
        NSString *aFileName = obj;
        if ([aFileName isEqualToString:fileName]) {
            NSString *path = [VERSIONS_INFO_DATA_DIRECTORY stringByAppendingPathComponent:aFileName];
            filePath = [path copy];
            NSLog(@"filePath1 %@", filePath);
            *stop = YES;
        }
    }];
    //NSLog(@"filePath2 %@", filePath);
    return [filePath autorelease]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T04:19:08.337

[http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)

具体来说：

> 如果没有 ARC，__block 还具有在被块捕获时不保留其内容的副作用。块将自动保留和释放它们捕获的任何对象指针，但 __block 指针是特殊情况并充当弱指针。通过使用 __block 来避免保留循环，依赖此行为已成为一种常见模式。
> 
> 在 ARC 下，__block 现在像其他捕获的对象指针一样保留其内容。使用 __block 来避免保留循环的代码将不再起作用。相反，如上所述使用 __weak。

所以你需要复制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:49:16.010

使用块在这里甚至是一个问题吗？

在我看来，这个代码序列：

```
NSString *filePath = nil;
NSString *path = [VERSIONS_INFO_DATA_DIRECTORY stringByAppendingPathComponent:aFileName];
filePath = path;
return [filePath autorelease]; 
```

过度释放`filePath`（因为你不拥有 的结果`-stringByAppendingPathComponent:`，你不应该（自动）释放它）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T04:18:20.690

这里可以在路径上使用复制或保留。您的问题的原因是 NSString 对象是便利对象的成员，以及其他诸如 NSArray 之类的对象，您实际上不必释放它们，并且在 ARC 之前已经由系统自动释放。就个人而言，我不喜欢他们这样做，因为它只会引起这样的混乱。因为块完成执行系统会自动释放您分配的导致泄漏的字符串对象。

# assembly - 没有操作系统直接运行的程序的名称是什么？

> ID：10274513
> 
> 赞同：2
> 
> 时间：2012-04-23T03:36:55.027
> 
> 标签：assembly, operating-system, bootloader, bios

当我试图就这个主题提出其他问题时，我在正确表达我的问题时遇到了很多麻烦，那么直接在相关机器上运行的程序的正确名称是什么？

一个可以同时描述内核和引导加载程序的术语，因为它们在没有操作系统的情况下直接执行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:44:51.997

C 标准将其称为“独立环境”，这让我觉得这个术语与我见过的大多数其他术语一样好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:52:29.777

我只会使用“独立”一词，因为它本质上就是这样做的。独自站立，没有操作系统的好处。

无论您使用什么术语，您可能仍然会发现在您的问题中至少定义一次它很有用，然后，一旦定义，您就可以随心所欲地使用它。

# gwt - 部署时的 GWT 日志文件

> ID：10274514
> 
> 赞同：0
> 
> 时间：2012-04-23T03:37:08.183
> 
> 标签：gwt, tomcat, logging

我有一个`GWT`Web 应用程序项目，我会将其部署到`Tomcat`. 在部署它之前，我想设置一个日志文件，以便我可以跟踪是否发生了一些错误，例如`JavaScriptException`. 我怎样才能做到这一点？

当我做了一些研究时，我读到 GWT 的默认日志记录不模拟`FileHandler`允许我将日志文件写入特定文件的日志。然后从一些关于日志记录的论坛中，有人一直在使用`log4j`但是`log4j`为了`Java`（我对吗？）。

如何为我的`GWT`应用程序进行日志记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:39:48.193

您可以使用[GWT 的内置日志记录功能](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging)。特别是您最感兴趣的是[远程日志记录](https://developers.google.com/web-toolkit/doc/latest/DevGuideLogging#Remote_Logging)，它通过 RPC 调用将客户端上记录的日志消息发送到服务器（显然您只想在特殊情况下使用它）。

您还可以使用[gwt-log](http://code.google.com/p/gwt-log/)项目并考虑使用`RemoteLogger`.

# c++ - 双端队列段错误

> ID：10274516
> 
> 赞同：0
> 
> 时间：2012-04-23T03:37:39.200
> 
> 标签：c++, segmentation-fault, std

```
struct air_message
{    
    deque<int> path;

    int dest_region;
    int dest_airport;
    int next_region;

    int msg_from;
}; 
```

我有这个结构。我有这个代码

```
deque<int> p = graph->get_shortest_path(source_region, dest_region);                    
m->path = p; 
```

在这一行

```
m->path = p; 
```

我收到分段错误错误（'m' 是`air_message`结构的指针）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:47:52.463

您需要检查分配`m`. 您的问题不在于双端队列本身，而是因为`m`它不是有效的指针。

例如，如果您拥有的唯一代码是：

```
struct air_message *m;
deque<int> p = graph->get_shortest_path (blah, blah);                    
m->path = p; 
```

那么是的，`m`将无效。

# android - 检索电话号码

> ID：10274519
> 
> 赞同：-10
> 
> 时间：2012-04-23T03:38:18.250
> 
> 标签：android, android-contacts, phone-number

我的应用程序安装在哪里，我想检索该电话的电话号码，然后将其发布在服务器上。这可能吗？

```
TelephonyManager tMgr = (TelephonyManager)mAppContext.getSystemService(
    Context.TELEPHONY_SERVICE); 
mPhoneNumber = tMgr.getLine1Number(); 
```

这会给我安装我的应用程序的号码..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:03:36.047

检索到电话号码后，您可以通过 Request 将其发送到服务器。

```
Request request = new Request("your-server/your-file?your-parameters); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:43:05.317

为什么需要检查电话号码？但是另一种方法是您可以检查 sim 卡号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:40:33.590

这个编为我工作

我想这会帮助你....

```
import android.app.Activity;
import android.os.Bundle;
import android.telephony.TelephonyManager;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class GetSimActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button tmpbtn = (Button) findViewById(R.id.button1);
    tmpbtn.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            // TODO Auto-generated method stub
             TelephonyManager telMgr = (TelephonyManager)getSystemService(TELEPHONY_SERVICE);
            Toast toast = Toast.makeText(getApplicationContext(), "Mobile Number : "+ telMgr.getLine1Number(), Toast.LENGTH_SHORT);
            toast.show();
            toast = Toast.makeText(getApplicationContext(), "Sim Serial Number : "+ telMgr.getSimSerialNumber(), Toast.LENGTH_LONG);
            toast.show();
        }
    });
}
} 
```

您还必须在清单中添加权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE"/> 
```

# django - django 守护者、权限和将 django auth 组扩展到“组织”模型

> ID：10274530
> 
> 赞同：8
> 
> 时间：2012-04-23T03:40:01.187
> 
> 标签：django, django-models, rbac

django Guardian [https://github.com/lukaszb/django-guardian](https://github.com/lukaszb/django-guardian)是一个写得很好的对象级权限应用程序；我实际上已经在各种 django 项目中阅读并使用了许多其他 django 对象级权限应用程序。

在我最近正在进行的一个项目中，我决定使用 django Guardian，但我有一个模型设计问题，涉及**两种可能方法的优缺点**以及它们各自对 sql 查询性能的影响：-

1.  使用`django.contrib.auth.models.Group`并将其扩展到我的自定义组织应用程序的模型；或者

2.  改为使用`django.contrib.auth.models.User`并为我的组织应用程序中的每个组织类型创建一个 m2m 字段。

**方法#1**

```
# Organisation app's models.py

from django.contrib.auth.models import Group

class StudentClass(models.Model):
    name = models.CharField('Class Name', max_length=255)
    groups = models.ManyToManyField(Group, blank=True)
    size = models.IntegerField('Class Size', blank=True)

class SpecialInterestGroup(models.Model):
    name = models.CharField('Interest Group Name', max_length=255)
    groups = models.ManyToManyField(Group, blank=True)
    description = models.TextField('What our group does!', blank=True)

class TeachingTeam(models.Model):
    name = models.CharField('Teacher Team Name', max_length=255)
    groups = models.ManyToManyField(Group, blank=True)
    specialization = models.TextField('Specialty subject matter', blank=True) 
```

在这种方法中，当用户第一次添加到组（django 组）时，组对象被创建并分配给这 3 个类中的一个，如果该组对象不属于它添加的类进入。

这意味着每个 StudentClass 对象`sc_A`等`sc_B`可能包含很多组。

这意味着我要确定特定用户（例如`myuser`）是否属于特定组织，我必须查询该用户所属的`groups_myuser_belongto = myuser.groups`所有组，然后通过查询关联到的所有组我感兴趣的组织，`groups_studentclass = sc_A.groups.all()`由于我现在有 2 个需要比较的列表，我可以这样做`set(groups_myuser_belongto) && set(groups_studentclass)`，这将返回一个新集合，其中可能包含 1 个或多个相交的组。如果有 1 个或多个组，`myuser`则确实是 的成员`sc_A`。

因此，这种模型设计意味着我必须经历很多麻烦（和额外的查询）才能确定用户是否属于某个组织。

我使用 m2m 到组的原因是为了利用 django Guardian 提供的组级权限功能。

这样的模型设计实用吗？

还是我最好选择像这样的不同模型设计......

**方法#2**

```
# Organisation app's models.py

from django.contrib.auth.models import User

class StudentClass(models.Model):
    name = models.CharField('Class Name', max_length=255)
    users = models.ManyToManyField(User, blank=True)
    size = models.IntegerField('Class Size', blank=True)

class SpecialInterestGroup(models.Model):
    name = models.CharField('Interest Group Name', max_length=255)
    users = models.ManyToManyField(User, blank=True)
    description = models.TextField('What our group does!', blank=True)

class TeachingTeam(models.Model):
    name = models.CharField('Teacher Team Name', max_length=255)
    users = models.ManyToManyField(User, blank=True)
    specialization = models.TextField('Specialty subject matter', blank=True) 
```

显然，这种模型设计让我很容易检查用户对象是否属于特定组织。要确定用户`john`是否是教学团队的一员，我需要做的`maths_teachers`就是检查：

```
user = User.objects.get(username='john')
maths_teachers = TeachingTeam.objects.get(name='Maths teachers')
if user in maths_teachers.users.all():
    print "Yes, this user is in the Maths teachers organization!" 
```

但是这个模型设计的含义是，*当我将用户对象添加到组时*（回想一下，我想使用 django Guardian 的组权限功能），我必须确保`save()`调用将用户对象添加到“数学教师”组中在`django.contrib.auth.models.Group` **AND**到我的自定义`TeachingTeam`课程的“数学教师”对象中。这感觉不是很干，更不用说我必须以某种方式确保对两个模型的保存调用都在一个`transaction`.

鉴于此用例/要求，是否有更好的方法来设计我的模型 - 使用 django 组，但提供一种“扩展”django 的本机组功能的方法（几乎就像我们如何使用“用户配置文件应用程序”扩展 django 的用户模型一样） ?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-22T14:10:25.683

我对此的看法（已经开发了很长时间的 django 应用程序）是你应该坚持自然的方法（所以 StudentClass 有用户而不是组）。这里的“自然”意味着它对应于所涉及对象的实际语义。

如果属于特定的 StudentClass 必须隐含一些自动组（除了授予用户的组），添加一个`groups`m2m 到 StudentClass 模型，并创建一个新的身份验证后端（扩展默认的），它提供了一个自定义`get_all_permissions(self, user_obj, obj=None)`方法。它将被[https://github.com/django/django/blob/master/django/contrib/auth/models.py#L201 迷住](https://github.com/django/django/blob/master/django/contrib/auth/models.py#L201)

在此方法中，查询与用户所属的任何组织关联的任何组。而且您不需要进行 1+N 查询，正确使用 ORM 将同时浏览两个 *-to-many。

[https://github.com/django/django/blob/master/django/contrib/auth/backends.py#L37](https://github.com/django/django/blob/master/django/contrib/auth/backends.py#L37)中的当前 ModelBackend 方法查询`get_group_permissions(user_obj)`并将它们添加到用户分配的权限中。您可以通过添加（缓存）`get_student_class_permission`和其他相应的方法来添加类似的行为。

（为更清晰的序言而编辑）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T02:01:21.803

Obs：还有另一种方法是使用[通用关系](https://docs.djangoproject.com/en/dev/ref/contrib/contenttypes/#id1)，在这种方法中，您可以让 User 模型实例通过 contenttypes 框架指向它的资源。SE 上有一个[很好的问题来](https://stackoverflow.com/questions/10503196/using-generic-foreign-key-to-assign-per-object-permissions-in-django)解释这种方法。

关于性能：有一些线索表明，使用 JOIN 的单个选择比许多简单的选择（[1](https://stackoverflow.com/questions/377729/performance-single-join-select-vs-multiple-simple-selects)、[2](https://stackoverflow.com/questions/376375/left-join-vs-multiple-select-statements)、[3](https://stackoverflow.com/questions/377729/performance-single-join-select-vs-multiple-simple-selects)）便宜。在这种情况下，选项 2 会更好。

关于可用性：第一种方法很难解释，很难理解。恕我直言，不要。2.或者试试泛型关系。

# django - 将文件上传限制为仅音频和视频格式

> ID：10274531
> 
> 赞同：4
> 
> 时间：2012-04-23T03:40:35.793
> 
> 标签：django, django-templates

如何在仅接受特定文件的 Django 中添加音频和视频文件字段？

请用1个例子解释我。

**模型.py**：

```
class Post(models.Model):
     audio_file = models.FileField(upload_to = u'mp3/', max_length=200)
     video_file = models.FileField(upload_to = u'video/', max_length=200) 
```

**表格.py**

```
class PostForm(forms.Form):
     audio_file = forms.FileField( label = _(u"Audio File" ))
     video_file = forms.FileField( label = _(u"Video File" )) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T05:47:52.863

您可以通过Form的`clean`方法简单地检查它

```
class FileUploadForm( forms.Form ):
    audio_file = forms.FileField( label = _(u"Audio File" ))
    ...

def clean( self ): 
    cleaned_data = self.cleaned_data
    file = cleaned_data.get( "audio_file" )
    file_exts = ('.mp3', ) 

    if file is None:

        raise forms.ValidationError( 'Please select file first ' ) 

    if not file.content_type in settings.UPLOAD_AUDIO_TYPE: #UPLOAD_AUDIO_TYPE contains mime types of required file

        raise forms.ValidationError( 'Audio accepted only in: %s' % ' '.join( file_exts ) ) 

    return cleaned_data 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T03:47:37.727

这些链接可能会对您有所帮助：

[仅接受 FileField 中的特定文件类型，服务器端](https://stackoverflow.com/questions/3648421/only-accept-a-certain-file-type-in-filefield)

[https://docs.djangoproject.com/en/dev/topics/http/file-uploads/#uploadedfile-objects](https://docs.djangoproject.com/en/dev/topics/http/file-uploads/#uploadedfile-objects)

# javascript - 使用 Flash + JavaScript 进行客户端压缩

> ID：10274535
> 
> 赞同：1
> 
> 时间：2012-04-23T03:42:12.427
> 
> 标签：javascript, flash, zip

我正在寻找一种强大的方法来根据给定页面上的信息动态创建 zip 存档并使其可供下载。客户端压缩是必须的，因为我的脚本是从一个小书签运行的。

当我更关心编写脚本的其余部分时，我的第一种方法是将信息发布到在我的本地服务器上运行的几行 PHP 中，然后将其压缩并发送回。这显然不适合值得分享的书签。

我今天早些时候找到了 JSZip，我以为这就是它的结束。这个库在运行时运行良好；不幸的是，我创建的档案经常超过几 MB，这会破坏 JSZip。（注意：我只在 Chrome 上测试过。）

由于数据 URI，纯 JS 下载也有时髦名称的限制，我打算使用 JSZip 推荐的方法来解决这个问题，使用使用 Flash 的 Downloadify。这让我想知道 JS zip 生成的大小限制是否可以/已经通过使用 Flash 和 JS 的类似相互作用来克服。

我用谷歌搜索了这个，但没有使用 Actionscript 的经验，我无法快速弄清楚我所问的是否可行。是否可以使用 JS 中的 Flash 对象在客户端创建相对较大（到 10 MB）的 zip 文件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:03:02.643

首先是一些数字：

*   Flash 承诺，如果文件小于 100 Mb，上传将起作用（我不知道它是指 base 10 还是 base 16）。

*   Flash 中有两个流行的库可用于创建 ZIP 存档，但请先阅读。

*   ZIP 存档器是一个既可以压缩数据又可以存档数据的程序，它完全按照这个顺序执行。即，它分别压缩每个文件，然后将其附加到整个存档。这会产生更差的压缩率，但允许迭代创建存档。好处是您甚至可以在完全压缩之前开始发送存档。

*   ZIP 的替代方法是首先使用专用存档器，然后一次压缩整个存档。这样，有时可以实现好几倍的压缩，但代价是您必须一次处理数据。

*   但是 Flash[`ByteArray.compress()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/utils/ByteArray.html#compress%28%29)方法为您提供了 deflate 算法的本机实现，这与您在 ZIP 存档器中使用的大部分内容相同。所以，如果你已经实现了类似 tar 的东西，你可以显着减少被发送文件的大小。

*   但是 Flash 是一个单线程环境，因此，您必须小心压缩数据的大小，并且可能必须凭经验找出它。或者只使用 ZIP - 更多冗余，但更易于实施。

我以前使用过这个库：[nochump](http://nochump.com/blog/archives/15)。没有任何问题。虽然它有点老了，尝试移植它以使用 Alchemy 操作码可能是有意义的（用于快速内存访问，显着降低了低级二进制算术运算的成本，例如二进制或二进制等）[这个库](http://www.blooddy.by/en/crypto/)实现了 CRC32 算法，这是 ZIP 存档的重要组成部分，它使用 Alchemy - 所以它应该快得多，但你必须自己实现其余的。

您可能会考虑的另一个选择是 Goole 的 NaCl - 在那里您可以从存档器和压缩实现中进行选择，因为它本质上运行本机代码，因此您甚至可以使用 bz2 和其他现代东西 - 不幸的是，仅在 Chrome 中（用户必须启用它）或 Firefox（需要插件）。

# windows-phone-7 - 当快速滑动枢轴时，枢轴性能缓慢

> ID：10274538
> 
> 赞同：2
> 
> 时间：2012-04-23T03:42:47.313
> 
> 标签：windows-phone-7, pivot, panorama-control

那里

我发现当快速滑动或轻弹枢轴时，枢轴会变得非常钝。当手指离开屏幕时，枢轴仍然会在枢轴项之间移动几次。有什么方法可以让 Pivot 在快速滑动或轻弹的情况下表现得像全景图一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T13:37:59.487

我遇到了同样的问题，这是由于使用了超过 5 个选项卡，每个选项卡都带有数据绑定。每次我转向一个新页面时，都会触发数据绑定，从而导致明显的延迟。（如果您继续旋转这些请求，则会创建回填，这最终会导致每个数据透视选项卡有多个后台线程）

我通过折叠选项卡上的数据并仅在选项卡显示超过 3 秒时才显示它来解决此问题。这大大减少了数据绑定，从而减少了数据加载。在我的情况下，虽然我确实不得不求助于这个，因为我使用选项卡作为浏览日期的方式，因此我面临着一个可能无限的集合，并且不得不在我的 5 个可用选项卡中循环数据。（Microsoft 建议不要使用超过 5 个选项卡）。

如果您有少于 6 个选项卡的有限集，则更简单的方法是将数据绑定设置为“一次”以填充数据。如果选项卡上的项目依赖于允许控件不仅显示而且更新值，则始终可以通过该控件事件触发数据绑定。（确保不仅使用更新的方法，还使用 ​​page.navigateaway 事件来触发数据绑定，因为在更新控件的值后立即离开页面不会触发 control.updated 事件）

# nlog - NLog 不写

> ID：10274545
> 
> 赞同：4
> 
> 时间：2012-04-23T03:44:11.540
> 
> 标签：nlog

我已将 NLog 添加到我的项目中，并且在开发环境中，它工作正常。

我创建了一个安装文件来部署我的应用程序。NLog.config 文件未在安装项目中显示为依赖项。因此，我将它添加为一个文件，并且在部署时它与 exe 文件和 App.config 位于同一目录中。

它不做任何日志记录。我不知道为什么。这是配置文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<?xml version="1.0" encoding="utf-8" ?>
<nlog xmlns="http://www.nlog-project.org/schemas/NLog.xsd" 
      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <variable name="day" value="${date:format=dd}" />
  <variable name="month" value="${date:format=MM}" />
  <variable name="year" value="${date:format=yyyy}" />  
  <variable name="verbose" value="${longdate} | ${level} | ${message} | ${exception:format=tostring,message,method:maxInnerExceptionLevel=5:innerFormat=shortType,message,method}}" />

  <targets>
    <target name="logfile" xsi:type="File" fileName="${basedir}/Logs/${year}${month}${day}.log" layout="${verbose}" />
  </targets>

  <rules>
    <logger name="*" minlevel="Error" writeTo="logfile" />
  </rules>
</nlog> 
```

任何帮助都会很棒。干杯!

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-25T11:15:38.097

NLog.config 是否将属性“复制到输出目录”设置为“始终复制”？[https://stackoverflow.com/a/8881521/438760](https://stackoverflow.com/a/8881521/438760)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T19:28:55.977

将您的 NLog 配置放入`yourapp.exe.config`文件中。像这样：

```
<configuration>
   <configSections>
      <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/>
   </configSections>
   <nlog>
      <variable name="day" value="${date:format=dd}" />
      ...
      <targets>
         <target name="logfile" xsi:type="File" .../>
      </targets>
      <rules>
         <logger name="*" minlevel="Error" writeTo="logfile" />
     </rules>
   </nlog>
</configuration> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:30:08.677

我猜双 xml 版本语句（第 1 行和第 2 行）是复制/粘贴问题....

可能是一个愚蠢的问题，但是您将 minLevel 设置为 Error。您是否真的遇到了将被记录的错误，或者您是否尝试将其降低为信息或调试？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-05-09T22:01:11.783

对我来说，我的 NLog 停止记录的原因与上述建议不同。

在更新包的过程中，一定有一些东西自动在我的 Web.config 的底部添加了一个 nlog 部分。它可能是 ApplicationInsights。显然这是优先考虑的，这导致它停止检查我的 Nlog.config 文件。

一旦我从我的 web.config 中删除了该部分，它就开始神奇地再次从我的 nlog.config 文件中读取。我注意从 web.config 中获取扩展、目标和规则，并确保它们整齐地放置在我的 nlog.config 文件中。

# java - 我看不到类文件

> ID：10274548
> 
> 赞同：0
> 
> 时间：2012-04-23T03:45:02.063
> 
> 标签：java, javac

我试图找到我的类文件在哪里。

我正在执行：

```
D:\Workspaces\ServletsJSP\MyProjects\listenerTest\com\example>javac Dog.java Lis
tenerTester.java MyServletContextListener.java

D:\Workspaces\ServletsJSP\MyProjects\listenerTest\com\example>dir
 Volume in drive D is Storage
 Volume Serial Number is 181E-3406

 Directory of D:\Workspaces\ServletsJSP\MyProjects\listenerTest\com\example

04/22/2012  10:30 PM    <DIR>          .
04/22/2012  10:30 PM    <DIR>          ..
04/22/2012  10:12 PM                 0 Dog.java
04/22/2012  10:20 PM                 0 ListenerTester.java
04/22/2012  10:08 PM                20 MyServletContextListener.java
04/22/2012  10:31 PM               702 web.xml
               4 File(s)            722 bytes
               2 Dir(s)  590,213,869,568 bytes free

D:\Workspaces\ServletsJSP\MyProjects\listenerTest\com\example> 
```

谁能帮我找出我的类文件在哪里？他们正在编译吗？它们存在吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:49:32.417

每个存在的类（不是每个文件）生成一个类文件。

由于您的两个文件是空的，而第三个文件几乎是空的，我推测您的文件不包含任何类声明。因此，编译器不会生成任何类文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:53:01.293

```
04/22/2012  10:12 PM                 0 Dog.java
04/22/2012  10:20 PM                 0 ListenerTester.java
04/22/2012  10:08 PM                20 MyServletContextListener.java 
```

这表明`Dog.java`并且`ListenerTester.java`是 EMPTY 文件。不知道第三个，但它的尺寸太小了。由于缺少可用于创建类文件的代码，您看不到任何生成的类文件。

将一些有效的 java 代码添加到这些文件并编译。您将看到正在生成的类文件。

# php - 如何将图像上传到另一台服务器？

> ID：10274551
> 
> 赞同：5
> 
> 时间：2012-04-23T03:46:15.987
> 
> 标签：php, image-uploading

我想创建一个提供 html 内容的应用程序服务器，其中包含指向由不同域上的另一台服务器提供的静态图像的链接。图片由用户通过应用服务器上传。

这就是我将 JPEG 文件上传到应用程序服务器的方法：

```
if(!file_exists("folder_name")) mkdir("folder_name", 0770);
$temp_file = $_FILES['image']['tmp_name'];
$im = imagecreatefromjpeg($temp_file);
$destination = "folder_name/file_name.jpg";
imagejpeg($im, $destination);
imagedestroy($im); 
```

如果我将文件上传到另一台服务器，代码将如何更改？

**添加注意**：如果文件夹不存在，则将动态创建文件夹。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T03:55:04.763

主要取决于您可以使用什么。

## 您可以使用安全的 SFTP 来做到这一点：

```
$connection = ssh2_connect('shell.example.com', 22);
ssh2_auth_password($connection, 'username', 'password');

ssh2_scp_send($connection, '/local/filename', '/remote/filename', 0644); 
```

PHP手册在这里：[function.ssh2-scp-send.php](http://www.php.net/manual/en/function.ssh2-scp-send.php)

## 或不安全的 FTP：

```
$file = 'somefile.txt';
$remote_file = 'readme.txt';

// set up basic connection
$conn_id = ftp_connect("ftp.example.com");

// login with username and password
$login_result = ftp_login($conn_id, "username", "password");

// upload a file
if (ftp_put($conn_id, $remote_file, $file, FTP_ASCII)) {
 echo "successfully uploaded $file\n";
} else {
 echo "There was a problem while uploading $file\n";
}

// close the connection
ftp_close($conn_id); 
```

PHP手册在这里：[function.ftp-put.php](http://php.net/manual/en/function.ftp-put.php)

## 或者您可以使用 PHP 发送 HTTP 请求：

这更像是另一台服务器看到的真实 Web 浏览器行为：

You can use `socket_connect();` and `socket_write();`, I will add more information about those later.

# objective-c - 无法在 UINavigationBar 中重命名或设置新的 backBarButtonItem

> ID：10274552
> 
> 赞同：2
> 
> 时间：2012-04-23T03:46:24.210
> 
> 标签：objective-c, ios, cocoa-touch, storyboard, uibarbuttonitem

我正在使用 XCode 4.3.2，只想在 UINavigationBar 中设置后退按钮的文本。

简单的方法是使用

```
- (void)loadView {
    [super loadView];   
    self.navigationItem.backBarButtonItem =
    [[UIBarButtonItem alloc] initWithTitle:@"Back"
                                     style: UIBarButtonItemStyleBordered
                                    target:nil
                                   action:nil];
} 
```

但身份证不起作用。我打开我的故事板，看到这个：

![后退按钮禁用](../Images/ac0080b4eaf1ba63277c679cfde91087.png)

后退按钮被禁用。所以，我不能设置按钮或禁用它。我现在能做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:36:00.763

backBarButton 用于设置后退按钮将在您按下的*下一个*视图控制器上说什么，即后退按钮将说什么让用户知道如何返回到当前视图控制器。它不用于控制当前视图控制器上的后退按钮所说的内容。这是一个常见的混淆来源。

就 IB 中出现的内容而言，我完全不确定你在那里做什么。如果您有一个导航栏，并且您在用户浏览应用程序时推送视图控制器，那么您无需在 IB 中执行任何操作（除了确保您已在初始视图中设置了导航控制器）。但是不需要在 IB 中设置后退按钮。

如果您想做其他事情，请告诉我们，但这是标准流程。

# c# - 在asp.net c#环境中发送带有上一页作为内容的电子邮件

> ID：10274553
> 
> 赞同：1
> 
> 时间：2012-04-23T03:46:29.453
> 
> 标签：c#, asp.net, html, forms, mailmessage

好的，我可以很好地将当前页面内容发送到电子邮件，格式化它有点奇怪，并且最终与预期的有点不同，但我已经掌握了它。

我目前想要做的是在**当前页面中发送和访问整个格式化形式的先前页面（我认为这可以通过会话对象完成），然后将其发送到电子邮件**。这包括用户对文本框等的输入（我目前通过会话对象在页面中持久化[如果这很重要]）。

我试图搜索谷歌和这个网站，但没有任何东西能真正解决这些问题，其中有几个。

如果有人能指出我正确的方向，将不胜感激。

为清楚起见，这是我用来通过电子邮件发送当前页面的过程：

```
 StringWriter sw = new StringWriter( );
    HtmlTextWriter w = new HtmlTextWriter( sw );
    MAIN.RenderControl( w );
    string s = sw.GetStringBuilder( ).ToString( );

    MailMessage message = new MailMessage( );
    message.IsBodyHtml = true;
    message.To.Add( new MailAddress( Session["eMail"].ToString( ) ) );
    message.Subject = "foo bar";
    message.From = new MailAddress( "email@email.com" );
    message.Body = s; //this would be filled with the previous page 
```

所以基本上，这`message.Body`将是前一页的表单内容（格式化并包含所有用户内容）。

提前致谢！

编辑：我不是指您当前所在页面之前的字面上一页，我指的是在进入此页面的过程中之前的页面（在我的情况下，它是过程中的第二页，电子邮件将在第四页发送）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T06:22:26.643

如果您知道上一页的所有参数，您可以创建您的页面的一个实例并生成它的 HTML。

我在这里写了一篇关于它的博客文章：

[http://www.diaryofaninja.com/blog/2009/09/14/a-simple-solution-to-viewing-a-preview-of-any-page-in-your-site](http://www.diaryofaninja.com/blog/2009/09/14/a-simple-solution-to-viewing-a-preview-of-any-page-in-your-site)

基本上这意味着利用 ASP.Net 运行时并在其生命周期内执行页面 - 如果您的页面具有任何公共属性，例如内容 ID 等，您可以将它们设置为其中的一部分。

```
Page tempPage = new Views.Blog.BlogDetail();
tempPage.PageIntro = intro;
tempPage.PageContent = content;

StringWriter sw = new StringWriter();
HttpContext.Current.Server.Execute(tempPage, sw, false);
if (!String.IsNullOrEmpty(sw.ToString()))
{
    return sw.ToString();
} 
```

显然这不是获取上一页，而是重新生成并获取其内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:36:58.417

我不会尝试跳过任何箍来获取上一页。由于您处于某种页面/工作流程中，我建议您存储您所追求的状态（您现在不应该这样做），然后发送包含适当呈现的状态的电子邮件。

例如：假设上一页有一些评论和评论日期。然后，您可以将该*状态*（评论和日期）保存在数据库中，然后在您发送电子邮件的下一页中获取它。

如果数据库过度杀伤，您可以将其存储在会话状态中，然后在使用后将其删除。

# php - 卷曲不返回标题信息

> ID：10274554
> 
> 赞同：0
> 
> 时间：2012-04-23T03:46:31.527
> 
> 标签：php, curl, header

我使用 curl 通过 php 从网站获取数据（http 请求）。而数据的一些信息存储在头信息里面。我可以简单地使用 curl_exec 获取数据，但如果我尝试使用 curl_getinfo 获取标头信息，则信息丢失。它应该像ajax一样工作。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:30:04.377

`curl_getinfo`不给你标题，它只是提供关于最后一个请求的元信息。这些`CURLOPT_HEADER`选项确保标题包含在输出中：

```
...
curl_setopt($c, CURLOPT_HEADER, true);
$data = curl_exec($c);

list($headers, $body) = explode("\n\n", $data, 2); 
```

# android - Android 上的 XMLSchema 验证

> ID：10274555
> 
> 赞同：17
> 
> 时间：2012-04-23T03:46:38.467
> 
> 标签：android, xsd, xsd-validation, jdom

我维护[JDOM 项目](http://www.jdom.org/ "JDOM 项目")，并试图在 Android 上“认证”它。大多数事情都很好，但是 XML Schema 验证被证明是有问题的......

我的问题是：有没有办法在 Android 上进行 XMLSchema 验证？如果有，怎么做？

以前有人问过这样的问题，但没有给出确凿的答案：

*   [Android 架构验证](https://stackoverflow.com/questions/801144/android-schema-validation)
*   [Android 中的 XML 模式验证](https://stackoverflow.com/questions/846748/xml-schema-validation-in-android)

这是我目前“知道”的（如果我错了，请纠正我）......：

*   SchemaFactory.newInstance(" [http://www.w3.org/2001/XMLSchema](http://www.w3.org/2001/XMLSchema) ") - 因 IllegalArgumentException 而失败
*   Harmony 项目中 Android 中的默认“ExpatParser”不支持 XMLSchema 验证。
*   可以在 Android 应用程序中加载 Xerces，甚至使用它进行解析，但不能进行**验证**解析 - 当您尝试获得导致应用程序崩溃的“致命”Android 异常时。

我已经为此工作了一段时间，并整理了以下“研究”：

*   [JDOM2 和安卓](https://github.com/hunterhacker/jdom/wiki/JDOM2-and-Android)
*   [JDOM2 - 带有 Xerces 的 Android](https://github.com/hunterhacker/jdom/wiki/JDOM2---Android-with-Xerces)

如果有人有更多关于 Android 上的 XMLSchema 验证的信息，我将非常感谢任何输入。

如果有人成功地在 XML 上完成了 XMLSchema 验证，并且可以帮助我获得适用于 JDOM 的功能，他们将获得数千个 Internet 点... ;-) 并将在 JDOM 代码和提交消息中永垂不朽。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-27T17:07:20.157

我很着迷，几年后，这仍然是一个悬而未决的问题。不过，似乎只有坏消息。根据[AOSP 问题跟踪器](https://code.google.com/p/android/issues/detail?id=7395)模式验证，目前标准的 Android API 似乎不支持，谷歌似乎不愿意修复它：

> 我们的 XML API（包括 SAX、XmlPull 和 DOM）不支持以下任何一种：
> 
> ```
>  XML Schema 
> 
>  XML DTDs (including external entity declarations and references)
>  validation
> 
>  element content whitespace 
> ```

但是，同一张票的一位评论者引用了一种[解决方法](https://code.google.com/p/openkeystore/source/browse/#svn%2Fxsd-4-android%253Fstate%253Dclosed)，并提供了使用 Xerces 端口的示例代码。到目前为止，我不知道这是否超出了您的想象，但我希望它有所帮助。

总结一下：[SchemaFactoryFinder](https://android.googlesource.com/platform/libcore/+/master/luni/src/main/java/javax/xml/validation/SchemaFactoryFinder.java)只知道以下 Schema 定义：

*   W3C_XML_SCHEMA10_NS_URI = " [http://www.w3.org/XML/XMLSchema/v1.0](http://www.w3.org/XML/XMLSchema/v1.0) "
*   W3C_XML_SCHEMA10_NS_URI = " [http://www.w3.org/XML/XMLSchema/v1.1](http://www.w3.org/XML/XMLSchema/v1.1) "

使用任何其他模式定义会导致它失败（但是它会在调试级别记录它）。显然，您就是这种情况，因为您使用的是对 2011 模式的另一个引用。所以“正确”引用模式定义应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-09T12:26:21.437

我在用

```
javax.xml.parsers.DocumentBuilder;
javax.xml.parsers.DocumentBuilderFactory;
javax.xml.parsers.ParserConfigurationException; 
```

如果你有一个 XML 字符串，你可以通过以下方式解析它：

```
Document doc = null;
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
InputSource is = new InputSource();
is.setCharacterStream(new StringReader(xml));
doc = db.parse(is); 
```

请不要忘记异常处理。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-17T20:25:00.670

我认为您可以使用 RelaxNG - 有很多可用的验证器。 [http://relaxng.org/#validators](http://relaxng.org/#validators)

特别感兴趣的应该是 - [http://www.kohsuke.org/relaxng/bali/doc/](http://www.kohsuke.org/relaxng/bali/doc/) - [https://msv.java.net/](https://msv.java.net/) - [http://www.davidashen.net/rnv.html](http://www.davidashen.net/rnv.html)

后者是 C 实现，前两个是用 Java 编写的。

如果您需要高性能，您可以编写一些 JNI 代码并在 rnv 源中调用函数。一种更简单的方法是使用 NDK 为 Android 构建 rnv，然后使用参数调用它的可执行文件。

就像是

```
Process p = Runtime.exec("/path/to/rnv/exec", [valdidationDoc: String, some more params]);
OutputStream out = p.getOutputStream(); // connected to STDIN of p
InputStream in = p.getInputStream(); // connected to STDOUT of p
out.write(new FileInputStream("/path/to/xml"));

/// read in for succes/errors 
```

# php - 上传文件的文件夹结构

> ID：10274556
> 
> 赞同：2
> 
> 时间：2012-04-23T03:46:54.173
> 
> 标签：php, file, upload, directory

我正在实施一个允许用户上传文件的网站。我想知道上传文件夹应该如何构建，以便我将来可以轻松管理上传的文件。我应该为不同的用户提供不同的子文件夹（例如，user1 的upload/user1，user2 的upload/user2 等）还是应该将它们都放在同一个文件夹中？我应该重命名上传的文件吗？（我知道很多网站都这样做！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T08:17:21.580

如果您不使用 BLOB，并且用户可能有任意数量的图像，那么我认为您应该使用子文件夹。例如，您可以创建一个以用户 ID 命名的子文件夹。原因之一是当文件夹包含大量文件时，访问时间会增加，因为查找具有指定名称的文件需要更多时间。您也可以在存储文件时重命名文件，以免它们的名称重叠。只是不要忘记将新生成的名称存储在数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:49:25.150

例如，如果您想将它们“隐藏”给未登录的任何人，重命名它们会很有用。只需将其原始名称存储在数据库中即可。

此外，您始终可以将其全部存储在 BLOB 类型的 SQL 表中。可以是几个 GB，并允许您关联文件名、用户名等。

# node.js - 如何使用 socket.io 在浏览器和服务器之间发送数据包，但仅当有多个客户端时？

> ID：10274558
> 
> 赞同：0
> 
> 时间：2012-04-23T03:47:18.807
> 
> 标签：node.js, socket.io

在我的正常设置中，无论是否有另一个客户端接收它，客户端都会向我的服务器发送数据。我怎样才能使它只在用户数> 1时发送数据包？我正在使用带有 socket.io 的节点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:10:46.287

为此，您需要侦听`connection`服务器（以及`disconnect`）上的事件并维护连接在“全局”变量中的客户端列表。当连接超过 1 个客户端时，向所有连接的客户端发送一条消息，以了解它们可以开始发送消息，如下所示：

```
var app = require('express').createServer(),
    io = require('socket.io').listen(app);

app.listen(80);

//setup express

var clients = [];

io.sockets.on('connection', function (socket) {
    clients.push(socket);

    if (clients.length > 1) {
        io.socket.emit('start talking');
    }

    socket.on('disconnect', function () {
        var index = clients.indexOf(socket);

        clients = clients.slice(0, index).concat(clients.slice(index + 1));

        if (clients.length <= 1) {
            io.sockets.emit('quiet time');
        };
    });
}); 
```

~~*注意：我在这里假设套接字被传递给断开事件，我很确定它是但没有机会测试。*~~

该`disconnect`事件不会接收传递给它的套接字，但是因为事件处理程序是在初始连接的闭包范围内注册的，所以您将可以访问它。

# c++ - 在windows平台，如xp，win7，有没有redis的有用的C++客户端？

> ID：10274560
> 
> 赞同：0
> 
> 时间：2012-04-23T03:47:30.237
> 
> 标签：c++, client, redis

> **可能重复：**
> [如何在 C++ 程序中使用 Redis？](https://stackoverflow.com/questions/2181474/how-to-use-redis-within-a-c-program)

最近我写了一个程序在windows下运行，需要从redis服务器读取数据，所以我需要一个可用的redis C++客户端，谁能帮帮我？这

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:28:16.317

试试这个页面：

[http://redis.io/clients](http://redis.io/clients)

干杯

# ios - UITableView 由哪些组件组成？

> ID：10274572
> 
> 赞同：0
> 
> 时间：2012-04-23T03:49:35.770
> 
> 标签：ios, cocoa-touch, uitableview

我正在尝试调整分组的 tableview 'tv' 的大小，知道将添加一个新部分（单行）。

我认为我可以使用以下方法增加高度：

```
newHeight = tv.frame.size.height + tv.rowHeight + tv.sectionFooterHeight + tv.sectionHeaderHeight; 
```

但这似乎太少了（使用默认高度大约 30 像素）。

我错过了表格视图的其他部分吗？也许元素之间有一些缓冲空间？

tv.sectionHeaderHeight 和 sectionFooterHeight 都报告高度为 10 - 这对我来说似乎很可疑，因为页眉看起来至少是页脚大小的两倍。

# javascript - 遇到设计问题

> ID：10274574
> 
> 赞同：0
> 
> 时间：2012-04-23T03:50:12.370
> 
> 标签：javascript, jakarta-ee

请参阅下面的图片，您将获得与我的问题相关的上下文。

![在此处输入图像描述](../Images/b4eebfa6fb20b3383d7e4e633250ce98.png)

该网站是一个为才华横溢的摄影师提供的网站，他们可以上传图片并让其他人看到他们所拍摄的内容。

由于设计问题，我对我的工作感到震惊。

用户（无需注册）可以打开我的网站并上传姓名、手机、描述、图片等详细信息（同一用户可以上传不同的图片），其中手机号码是必填字段。因此，在上传图片时，我将其附加到 Mobile Number + FileName.jpg 中，并且图像将存储在我的服务器内的文件夹中，其余详细信息（例如 mobile num、desc、name --etc）将存储在 MYSQL 数据库中. （这是一部分，已完成）

第二部分是在页面启动时，我从该文件夹中获取所有图像（最新的 20 个已修复）并将其显示在页面上。

因此，当任何用户单击特定图像时，我需要显示诸如 Desc、名称、--- 等详细信息，因此在该图像的 onclick 事件中，我会从单击的图像中获取手机号码并在数据库中进行搜索. （现在这里有个问题）就是同一个用户（也就是同一个手机号）可以上传不同的图片到网站，所以用手机号搜索会得到很多结果。

图片名称格式为 83746787695iokI.jpg 。

我准备好改变任何格式，所以请告诉如何解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:40:51.037

给定一个文件名`83746787695iokI.jpg`，您应该能够解析上传者的电话号码和原始文件名，然后使用这些值查询您的照片表。一个正则表达式可能是：

```
/^([0-9]{11})(.+)\.jpg$/ 
```

话虽如此，您应该考虑为每张照片分配一个唯一标识符，并使用它来命名您保存的文件。MySQL 中的 id 列可能如下所示：

```
id INT NOT NULL AUTO_INCREMENT 
```

插入后，获取新行的 id（`LAST_INSERT_ID()`在 MySQL 中）并将文件保存为`#{id}.jpg`.

请注意，自动递增的 id 是一个可预测的整数，您的文件名将是`1.jpg`,`2.jpg`等。可以使用一个简单的脚本从您的服务器下载所有图像。为避免这种情况，请改用随机生成的唯一字符串命名文件，例如 UUID。将该字符串存储在表格的新列中，并使用它来识别您的照片。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:54:41.980

这是您可以使用不同的主键。您可以使用自动编号字段，也可以在将图像存储在数据库中时使用时间戳:)

对于设计，我建议你去[http://www.dynamicdrive.com/](http://www.dynamicdrive.com/)

问候红色

# sql - sql - 可以在一个查询中更新具有不同标准的两行吗？

> ID：10274575
> 
> 赞同：2
> 
> 时间：2012-04-23T03:50:20.107
> 
> 标签：sql, sql-server-ce

这是针对 SqlCe 的，我正在尝试更新表并为获胜者设置 won +=1，为失败者设置 lost =1。我知道我可以使用两个不同的更新语句来做到这一点，但我想知道是否可以在更新失败者“丢失”值的同时更新获胜者“赢得”值。

基本上就是这个样子，

```
UPDATE player SET won = won +1 WHERE id = 0
UPDATE player SET won = lost +1 WHERE id = 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:53:13.900

这不漂亮，但它有效

```
UPDATE player SET won = won + CASE WHEN id = 0 THEN -1 ELSE 1 END WHERE id in (0,1) 
```

我个人会坚持使用两个更新声明

# c++ - sum Array Ascii，它接受一个字符串数组并返回该数组中所有字符串中所有字符的所有 ascii 值的总和

> ID：10274580
> 
> 赞同：-2
> 
> 时间：2012-04-23T03:51:23.993
> 
> 标签：c++, arrays, ascii, sum

k 我被要求编写一个函数 sumArrayAscii，它接受一个字符串数组并返回该数组中所有字符串中所有字符的所有 ascii 值的总和。请注意，此函数应使用问题中的 sumAscii。这就是我所拥有的，但我无法让它工作

```
#include <iostream>
using std::cout; 
using std::endl; 

int main() 
{ 
int myArrayNumberOfElements(5); 
double myArray[myArrayNumberOfElements] = {1.1, 4.5, 5.7, 7.9, 10}; 
double sum(0); 
for (int i(0); i < myArrayNumberOfElements; i++) 
{ 
sum +=myArray[i]; 
} 

cout << endl << "Sum of all elements: " << sum << endl; 

system("PAUSE"); 
return 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:55:48.480

改变

```
int myArrayNumberOfElements(5); 
```

到

```
const int myArrayNumberOfElements(5); 
```

在 C++ 中，数组的大小需要保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:37:50.280

您发布的代码计算双精度数组的总和。我看不到与字符串或 ASCII 代码有关的工作。

这两个功能对我有用。第一个函数返回单个字符串中所有字符的 ASCII 和。第二个使用第一个函数计算字符串列表的 ASCII 和。

```
int ASCIIsumOfString(string s){
int sum = 0;
for(int i=0; i<s.length(); i++){
    sum += s[i];
}
return sum;}

int ASCIIsumOfStringArray(string *s, int numberOfStrings){
    int sum = 0;
    for(int i=0; i<numberOfStrings; i++){
        sum += ASCIIsumOfString(s[i]);
    }
    return sum;
} 
```

# php - 使用 PHP strtotime() 函数

> ID：10274583
> 
> 赞同：0
> 
> 时间：2012-04-23T03:51:40.220
> 
> 标签：php, javascript, time

我在不同的网站上收到了一个外部 RSS 提要帖子，我注意到它们都有不同的发布日期格式。有些使用这样的格式：

```
2012-04-09T08:23:07Z

Fri, 06 Apr 2012 01:25:43  0000 
```

还有很多格式，但我只是向您展示了两个示例。

现在，我希望所有内容都具有统一的格式，所以我使用 strtotime()。这是我的代码：

```
$date = "2012-04-09T08:23:07Z";
date( "F d, Y", strtotime( $date ) );
/* Result: April 09, 2012 */ 
```

我的问题是第二种格式`Fri, 06 Apr 2012 01:25:43 0000`

最后有一个 0000 ，这使得 strtotime() 行为怪异。

```
$date = "Fri, 06 Apr 2012 01:25:43  0000";
 date( "F d, Y", strtotime( $date ) );
 /* Result: April 06, 0000 */ 
```

显然结果应该是 2012 年 4 月 6 日。

我的问题是，当 strtotime() 检测到最后一个 0000 的格式时，我怎么能不让它表现得很奇怪。知道怎么做吗？您的帮助将不胜感激！谢谢！:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:01:56.870

把“0000”去掉怎么样？就像是：

> $date=str_replace("0000", "", $date);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T04:02:30.440

试试这个：

```
<?php 
$date = "Fri, 06 Apr 2012 01:25:43 0000";

 if (strtotime($date) !== false) 
 {
 $timestamp = strtotime($date);
     echo date( "F d, Y", $timestamp );
 } 
 else 
 {
     echo "error";
 }

 ?> 
```

$date = "2012 年 4 月 6 日星期五 01:25:43 0000"; 输出错误。

$date = "2012 年 4 月 6 日星期五 01:25:43"; 给出输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T04:12:34.210

我很确定您有格式问题：

```
Fri, 06 Apr 2012 01:25:43  0000 
```

注意前面的两个空格`0000`？这不是巧合。原文大概是这样的：

```
Fri, 06 Apr 2012 01:25:43 +0000 
```

这是用`gmdate(DATE_RFC822)`. 在 URI 中，`+`符号通常被转换为空格。我认为这是你的问题。

# email - 从供应商的多个域发送电子邮件

> ID：10274584
> 
> 赞同：0
> 
> 时间：2012-04-23T03:51:48.767
> 
> 标签：email

我们有当前位于供应商子域中的自定义 cms，例如 cms.vendor.com。它发送来自 user@vendor.com 的电子邮件，并且似乎工作正常（使用 Email Queuing + SwiftMailer）

我们的供应商要求我们为他的用户添加功能，以便能够从下拉列表中选择与他拥有的其他域相关联的 3-4 个其他电子邮件地址。基本上，我们需要能够从标记为从@hisdomains.com、多个域发送的服务器发送电子邮件。

我是一名网络程序员，在中继消息方面一无所知。我将如何才能从他的其他域发送电子邮件？他需要在他的邮件服务器上设置权限，还是我需要进入他的 SMTP 服务器才能发送出去？

当涉及到垃圾邮件和 gmail 信任我们时，我应该注意哪些事项？

编辑：

不确定我最初的问题是否足够清楚。供应商拥有三个域：mysite.com、myothersite.com、mythirdsite.com。他希望我们 crm 的用户能够发送他在这些域上的电子邮件。因此，我的专用服务器将尝试在 FROM: 标头中以 user@mysite.com、user@myothersite.com 和 user@mythirdsite.com 的身份发送电子邮件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:56:35.373

只要允许您的服务器代表您的供应商拥有的域进行发送，您就不会有问题；`From:`当您发送电子邮件时，只需将标题更改为其他内容。

必须正确配置 SPF、发件人 ID 和 DKIM 等内容，以允许您的服务器代表任何域进行发送。

另见：[http ://en.wikipedia.org/wiki/E-mail_authentication](http://en.wikipedia.org/wiki/E-mail_authentication)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T04:41:29.223

mx 记录解析到同一服务器的任何域都可以使用。因此 user@any.domain 将通过电子邮件发送 mx 条件服务器上的同一用户。

要回答您的问题 - 只需确保每个域名的 DNS 区域文件中的 mx 记录指向与您要共享电子邮件的域相同的服务器。

还取决于服务器配置（如共享或其他）我假设它专用于安装了一个简单的电子邮件服务器。我不确定 cPanel/共享服务器。但可能相同。

# html - 当使用锚标记请求文件时，强制浏览器不使用缓存

> ID：10274591
> 
> 赞同：4
> 
> 时间：2012-04-23T03:53:08.307
> 
> 标签：html, internet-explorer, anchor

我有一个用于请求下载文件的锚标记。

像这样：

```
<a href="app/results?fileName=t12.txt&other-param=something" title="Click to download"> Download </a> 
```

该文件可能在服务器上经常被修改，所以我想确保浏览器不会缓存该文件。

然而，测试人员发现，虽然点击链接时似乎总是下载文件，但当您右键单击链接并选择“另存为...”时，浏览器似乎选择使用缓存文件反而。这是用 IE9 测试的。

如何强制浏览器（尤其是 IE9）在任何情况下始终下载文件？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T04:12:08.437

我会添加作为答案。尝试在 href 的查询部分添加一个随机数：

```
?param=[random] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T07:22:19.397

根据我自己对其中一个答案的评论：

根据维基百科，我可以设置响应头参数：Cache-Control: no-cache

[http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Effects_of_selected_HTTP_header_fields](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Effects_of_selected_HTTP_header_fields)

收到带有此标头的响应后，浏览器将不再缓存此数据。

# jsp - JSP 组件库，例如 primefaces

> ID：10274593
> 
> 赞同：0
> 
> 时间：2012-04-23T03:53:12.387
> 
> 标签：jsp, jsf, primefaces

我有一个著名的组件库，如 Primefaces 或 Richfaces，主要设计用于 JSP？如果没有，那么将上述任何一种与 JSP 和缺点一起使用的可能性有多大？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:54:45.133

JSP 自 JSF 2.0 起被[弃用](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)，并由 Facelets 接替。您不应该期望 JSF 2.0 组件库供应商也支持 JSP，这几乎是开发和维护工作的两倍。

因此，如果您正在寻找支持 JSP 的组件库，那么您应该查看面向 JSF 1.x 的组件库。例如，RichFaces 将 3.3.x 作为最新的 JSF 1.2 兼容版本。

或者，只需先升级自己，然后再使用 Facelets。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T06:16:20.900

看来[ZK JSP 标记](http://www.zkoss.org/product/zkjsp)是您要寻找的东西。它是建立在高度交互的 ZK Ajax 组件之上的 JSP 标签集合。它遵循标准 JSP 规范并与其他 JSP 标记和解决方案无缝集成。

# iphone - 通过代码更改选定的 TabBarItem？

> ID：10274609
> 
> 赞同：0
> 
> 时间：2012-04-23T03:55:11.307
> 
> 标签：iphone, ios, xcode, cocoa-touch, ipad

我想知道您将如何通过代码更改 UITabBar 的选定选项卡？

是的，我知道该线程是以下内容的副本： [目标 C：如何通过程序从一个标签栏切换到另一个标签栏，](https://stackoverflow.com/questions/6382139/objective-c-how-to-switch-from-one-tab-bar-to-another-via-program) 但该解决方案不起作用。

谢谢！

-碎纸机2794

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:03:59.627

这对你的情况有用吗？

```
[tabBar setSelectedItem:[[tabBar items] objectAtIndex:index]]; 
```

或者

```
[tabBarController setSelectedIndex:index]; 
```

# iphone - -[__NSCFSet bytes] 上的应用程序崩溃：无法识别的选择器发送到实例“”？

> ID：10274610
> 
> 赞同：0
> 
> 时间：2012-04-23T03:55:42.527
> 
> 标签：iphone, objective-c, ipad

我开发了一个应用程序，该应用程序对我很有效，我的 XCode 版本是 4.2.1，iOS 版本是 5.0 ARC 启用代码。我的过程是我使用网络服务在 tableview 中显示一堆 YouTube 视频。我将那些视频图标缓存在我的目录中。当我将该应用程序发送给苹果审查时......应用程序在那里崩溃，崩溃报告如下，

```
Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  2 
```

应用特定信息：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFSet bytes]: unrecognized selector sent to instance 0x27b300'
*** First throw call stack:
(0x3502e88f 0x36455259 0x35031a9b 0x35030915 0x34f8b650 0x34f7da4d 0x3587f2b9 0x3587ef31 0x3587ee9d 0x321102ab 0x321101c7 0xe36dd 0x31053c59 0x3105f7bb 0x36cd9dfb 0x36cd9cd0)

Thread 2 name:  Dispatch queue: com.apple.root.default-priority
Thread 2 Crashed:

0   libsystem_kernel.dylib          0x34e2232c __pthread_kill + 8
1   libsystem_c.dylib               0x36d1e208 pthread_kill + 48
2   libsystem_c.dylib               0x36d17298 abort + 88
3   libc++abi.dylib                 0x309e3f64 abort_message + 40
4   libc++abi.dylib                 0x309e1346 _ZL17default_terminatev + 18
5   libobjc.A.dylib                 0x36455350 _objc_terminate + 140
6   libc++abi.dylib                 0x309e13be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x309e144a std::terminate() + 14
8   libc++abi.dylib                 0x309e2798 __cxa_throw + 116
9   libobjc.A.dylib                 0x36455290 objc_exception_throw + 88
10  CoreFoundation                  0x35031a94 -[NSObject doesNotRecognizeSelector:] +   168
11  CoreFoundation                  0x3503090e ___forwarding___ + 294
12  CoreFoundation                  0x34f8b648 _CF_forwarding_prep_0 + 40
13  CoreFoundation                  0x34f7da46 CFDataGetBytePtr + 90
14  ImageIO                         0x3587f2b2 CGImageReadGetBytePointer + 30
15  ImageIO                         0x3587ef2a _CGImageSourceBindToPlugin + 86
16  ImageIO                         0x3587ee96 CGImageSourceGetCount + 50
17  UIKit                           0x321102a4 _UIImageRefFromData + 124
18  UIKit                           0x321101c0 -[UIImage initWithData:] + 52
19  MyAppName                   0x000e36d6 __37-[JMImageCache imageForURL:delegate:]_block_invoke_0 + 142
20  libdispatch.dylib               0x31053c52 _dispatch_call_block_and_release + 6
21  libdispatch.dylib               0x3105f7b4 _dispatch_worker_thread2 + 256
22  libsystem_c.dylib               0x36cd9df4 _pthread_wqthread + 288
23  libsystem_c.dylib               0x36cd9cc8 start_wqthread + 0 
```

现在我在应用程序中的编码部分，在表上查看数据源方法

```
 if(![[JMImageCache sharedCache] isImageExistInCache: cell.videoThumbnailImageLink]){
    [cell.activityIndicator startAnimating];
    cell.videoThumbnail.image = [[JMImageCache sharedCache] imageForURL:cell.videoThumbnailImageLink delegate:cell];
}
else{
    [cell.activityIndicator stopAnimating];
    [cell.activityIndicator removeFromSuperview];
    cell.videoThumbnail.image = [[JMImageCache sharedCache] imageFromDiskForURL:cell.videoThumbnailImageLink];
} 
```

在该表格视图的自定义单元格中，

```
#pragma mark - JMImageCacheDelegate Methods
                                                                                               - (void) cache:(JMImageCache *)c didDownloadImage:(UIImage *)i forURL:(NSString *)url {
         if([url isEqualToString:self.videoThumbnailImageLink]) {
      self.imageView.image = i;
      [self setNeedsLayout];
}
    [self.activityIndicator stopAnimating];
[self.activityIndicator removeFromSuperview]; 
```

}

在 JMImageCache 库代码块中，

```
- (UIImage *) imageForURL:(NSString *)url delegate:(id<JMImageCacheDelegate>)d {
    if(!url) {
        return nil;
    }

    id returner = [super objectForKey:url];

    if(returner) {
        return returner;
    } else {
        UIImage *i = [self imageFromDiskForURL:url];

        if(i) {  
            [self setImage:i forURL:url];

            return i;
        }

        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            __unsafe_unretained NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
            UIImage *i = [[UIImage alloc] initWithData:data];

            __unsafe_unretained NSString* cachePath = cachePathForURL(url);
            NSInvocation* writeInvocation = [NSInvocation invocationWithMethodSignature:[self methodSignatureForSelector:@selector(writeData:toPath:)]];
            [writeInvocation setTarget:self];
            [writeInvocation setSelector:@selector(writeData:toPath:)];
            [writeInvocation setArgument:&data atIndex:2];
            [writeInvocation setArgument:&cachePath atIndex:3];

            [self performDiskWriteOperation:writeInvocation];
            [self setImage:i forURL:url];

            dispatch_async(dispatch_get_main_queue(), ^{
                if(d) {
                    if([d respondsToSelector:@selector(cache:didDownloadImage:forURL:)]) {
                        [d cache:self didDownloadImage:i forURL:url];
                    }
                }
            });
        });

        return nil;

    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:58:38.737

你有记忆问题。提示是，指向`0x27b300`内存中的变量现在包含 a `__NSCFSet`（也称为 a `NSSet`）。确保您没有使用尚未`nil`'d out 或`weak`应该是'd out 的变量`strong`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T04:57:45.527

您的数据在使用之前已被释放和释放，因此当 CoreGraphics 对其调用 -bytes 时，它不再存在（在这种情况下，已在其位置分配了 NSSet）。

大概这是因为您将其声明为 __unsafe_unretained。

# java - java静态方法

> ID：10274611
> 
> 赞同：0
> 
> 时间：2012-04-23T03:55:44.347
> 
> 标签：java, static

我有这样的课

```
public class StockCodes
{

    public static boolean loaded = false;
    public static long lastUpdate = 0;
    private static long freq = 1000 * 60 * 60 * 24;
    public static HashMap<String, Stock> stockMap = new HashMap<String, Stock>();

    public static ArrayList<Stock> getCodes()
    {
        long now = System.currentTimeMillis();
        if ((StockCodes.loaded) && ((now - StockCodes.lastUpdate) < freq))
        {
            System.out.println(StockCodes.loaded);
            return stockList;

        } 
    else
        {
            HttpFetcher fetcher = new HttpFetcher();

        ....

            log.info("Load " + stockList.size() + " Stocks");
            StockCodes.loaded = true;
            StockCodes.lastUpdate = now;
            return stockList;
        }
    }

    public static void main(String[] args)
    {
        StockCodes.getCodes();
    }
} 
```

当我运行 java 应用程序时，它输出“true”。告诉我们股票代码已加载。但是当我调试java应用程序时，它进入了else。我不明白为什么它以这种方式运行，尤其是为什么它在我第一次运行应用程序时输出“真”。谁能帮帮我，谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:05:12.327

如果该函数已多次运行，则 getCodes() 函数实质上会缓存结果。第一个 getCodes() 不会打印“true”，但所有后续调用都会

从命令行运行

```
public static void main(String[] args)
{
    StockCodes.getCodes();
} 
```

这应该不会向 STDOUT 输出任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:05:14.590

使用上面给出的代码，默认情况下控件应该始终进入`else`块中并且不打印任何内容。你可以验证它。

不是，如果您有更多的地方调用该`getCodes()`方法，那么它会有所不同。话虽如此，请验证是否没有其他地方可以调用`getCodes()`。即它通过单次调用`main()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:13:37.633

你的`if`陈述很干净。当我遇到这些类型的错误之一时，我会走旧的时尚路线。我放了一系列

```
System.out.println 
```

代码的该部分中的语句以跟踪您的代码在不处于调试模式时的去向。它很笨重，但它有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T04:14:16.090

当我运行您的代码时，它会经历`else`我是在调试模式下运行还是在常规模式下运行。

我认为您丢失了一行代码。你有 System.out.println(StockCodes.loaded); 在你的`else`分支也？如果你这样做了，并且你把它放在你的线下面，`StockCodes.loaded = true;`那么它将`true`为你打印。

I suggest you use more detailed debugging, something like `System.out.println("In the if branch");` and below that in the else branch, a line like `System.out.println("In the else branch");` I think you are tricking yourself by having too little output.

# javascript - 生成图像的复选框

> ID：10274615
> 
> 赞同：0
> 
> 时间：2012-04-23T03:56:30.380
> 
> 标签：javascript, css, image, checkbox, leftalign

我需要一个脚本的帮助，当我选中一个复选框时，它会生成一个图像（如果选择了多个复选框，则生成多个图像）。

我想我已经把这部分写下来了，但是我需要脚本来将复选框保留在图像的左侧，并且当我添加更多复选框（例如 20 个或 30 个以上）时，第一个图像不会在最后一个复选框之后开始。我需要图像从网页顶部开始。

我当前的代码如下：

你可以在这里玩这个例子：http: [//jsfiddle.net/psyho/nrdnx/](http://jsfiddle.net/psyho/nrdnx/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:06:39.097

你可以像这样将复选框和图像放在一个容器中：http: [//jsfiddle.net/nrdnx/9/](http://jsfiddle.net/nrdnx/9/)我希望这会有所帮助，因为我不完全确定你在问什么。

# wpf - 如何根据项目类型动态设置 DataTemplate？

> ID：10274618
> 
> 赞同：0
> 
> 时间：2012-04-23T03:57:18.393
> 
> 标签：wpf, datatemplate

目标是根据项目的类型对 ListView 中的项目进行不同的布局。例如，某些项目将具有文本和按钮，其他文本和图像，其他文本和复选框等。

为每种项目设置一个 DataTemplate 可以解决问题。我查看了 DataTrigger 但它似乎只允许更改项目的属性，但不允许更改布局模板。框架提供者有什么方便的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:17:23.280

我相信[`DataTemplateSelector`](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)这就是你要找的。或使用[`DataType`](http://msdn.microsoft.com/en-us/library/system.windows.datatemplate.datatype.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T07:12:45.137

每个项目的类型都有自己的类吗？

所以item1是classA，item2是classB？如果是，那么您可以简单地为每种类型创建一个数据模板。

如果不是，您可以创建样式和触发器来处理您的条件。也许您发布一些代码，以便我们可以更好地帮助您

# bash - 在后台运行脚本？

> ID：10274622
> 
> 赞同：3
> 
> 时间：2012-04-23T03:57:44.197
> 
> 标签：bash, terminal, osx-lion, sh

简单的问题：有没有办法在不运行终端的情况下在后台运行脚本？

更多细节和背景：我有一个应用程序，它读取一个应用程序 .log 文件并从中提取信息，然后从日志中的信息中提供信息和统计信息。对应用程序的更新改变了 .log 文件的写入方式，删除了信息，并以我无法预测的方式复制了日志。

旨在与日志交互的应用程序未编码以检查此类更改。因此，当它在日志更改后尝试收集信息时，它会停止工作。

已经设计了一个“hack”来运行 tail -f，然后将应用程序十六进制以指向新文件。（“hack”有效）我想在后台运行尾巴，这样用户就不会打断它......打破它......

- 抱歉（可能）比需要的描述长。但是我想一个更详细的问题会给我一个准确的答案。

提前致谢！

~¥约瑟夫

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T11:33:04.867

答案取决于您是否需要能够在退出 shell 后重新连接到该进程。如果该过程是非交互式的并且可以简单地不理会，那么“nohup program &”应该可以解决问题。但这不会让您在关闭 shell 后继续与程序交互。

如果它是一个交互式程序，那么您最好的选择是使用屏幕或其他终端多路复用器之一。您启动“屏幕”，它为您提供了一个新的外壳，在这里您可以启动您想要的任何程序，通常的方式是“nano myfile.txt”。

当您想关闭 shell 但让程序继续运行时，您可以按 Ca d ('Detach') 以从屏幕上分离。它继续运行，但在后台运行，即使您注销也会继续运行。

当您稍后想要重新连接到 screen 时，您打开一个新的 shell 并输入“screen -r”（重新连接），这会让您回到您所在的位置。

Screen 还允许您在单个终端窗口中运行多个不同的 shell，总体上是一个简洁的工具。看看这个。

# java - 当网络上的所有计算机具有相同的公共 IP 地址时，如何将 UDP 数据包发送到特定计算机？

> ID：10274623
> 
> 赞同：10
> 
> 时间：2012-04-23T03:58:18.187
> 
> 标签：java, network-programming, udp, ip-address, packet

这就是问题所在，这很简单（理解..）：

我家里有两台电脑，它们都有相同的公共 IP 地址（例如 1.2.3.4）。

我在咖啡店有一台电脑（不同的网络），所以它有不同的公共 IP 地址。

我想从咖啡店的计算机向我家中的一台计算机发送一条消息（例如“hi”）。

我正在使用 Java，为发送者考虑以下非常简单的程序（为简单起见，我取消了异常处理）：

我主要做：

```
sendPacket("hi"); 
```

我有

```
void sendPacket(String message){
    DatagramSocket myServerSocket = new DatagramSocket(9000);    // server socket
    byte[] sendData = new byte[message.length()];    // build msg
    sendData = message.getBytes();
    InetSocketAddress destSocketAddr = new InetSocketAddress("1.2.3.4", 9000);    // destination socket addr
    DatagramPacket sendPacket = new DatagramPacket(sendData, sendData.length, destSocketAddr);     // make packet 
    myServerSocket.send(sendPacket);    // send packet
} 
```

如果我的侦听器（接收器）在家中的两台计算机上运行（都具有相同的公共 IP 地址 1.2.3.4），我如何指定我打算将此消息发送到哪一台？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T04:46:46.603

如果您的两台家庭计算机具有相同的公共 IP 地址，则意味着这些计算机正在使用 NAT 或*[网络地址转换](http://en.wikipedia.org/wiki/Network_address_translation)*（严格来说，它是*端口地址转换*或 NAT 过载，但通常仅称为 NAT）。

这意味着，为了启动从外部到 NAT 内任何机器的连接，必须在路由器（通常是调制解调器）中设置**端口转发**，以便映射公共家庭 IP 地址的特定端口到您家中的特定私有 IP 地址。

假设您家中有计算机 A 和 B，如下所示：

```
 Router / Modem
              192.168.0.1 
                  ||
       ++=========++========++
       ||                   ||
  Computer A           Computer B
  192.168.0.2          192.168.0.3 
```

现在，假设您需要计算机 A 监听 TCP 端口`9000`（端口可以主要是 TCP 或 UDP），您可以将公共端口`9000`直接转发到计算机 A 的`9000`端口：

```
Forward TCP/UDP on public port 9000 to private port 9000 on 192.168.0.2 
```

要将消息发送到计算机 A，只需将其发送到`1.2.3.4:9000`。但是如果另一台 PC 也只监听端口`9000`呢？您也不能分配公共端口`9000`，因为它是由计算机 A 占用的。您可以这样做：

```
Forward TCP/UDP on public port 9001 to private port 9000 on 192.168.0.3 
```

这样，计算机 B 仍会在端口 接收消息`9000`，但需要通过 Internet 将它们发送到`1.2.3.4:9001`。当数据包进入（和离开！）您的家庭网络时，您的路由器的 NAT 会自动转换端口。

最后，发送者需要调整目标端口，以便与 NAT 后面的不同机器“对话”。

希望这是有道理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T04:26:34.710

通常，这些[NAT 防火墙](http://en.wikipedia.org/wiki/NAT)会为您将端口转发回原始计算机。

因此，如果您有一台机器在 port 上向咖啡店机器`5000`发送流量，而另一台在 port 上向咖啡店机器发送流量`5001`，路由器将跟踪哪个端口用于哪个客户端。因此，当您*从*端口发回数据包时，`5000`它将转到第一台机器，而当您*从*端口发回数据包时`5001`，它将转到第二台机器。

不幸的是，您在咖啡店的机器可能*也在*NAT 防火墙后面，您的家用机器也可能无法直接解决*它*。

如果您可以在良好的网络上托管服务器，那么两个对等方都可以联系服务器，并通过*它*中继所有流量。这不是一个糟糕的选择，但它不能很好地扩展。（对于三台机器来说，这没什么大不了的。对于三百万台机器来说，这很重要。）

您可以调查其他选项以尝试[穿越 NAT 防火墙](http://en.wikipedia.org/wiki/NAT_traversal)，例如[UPnP](http://en.wikipedia.org/wiki/Universal_Plug_and_Play)，但这些机制通常需要客户端通过*某种*方式协商会话才能正常工作。

# r - R在数组中搜索元素及其索引

> ID：10274629
> 
> 赞同：0
> 
> 时间：2012-04-23T03:59:12.150
> 
> 标签：r

我有一个包含 2 列的矩阵，如下所述：

```
TIME     PRICE    
10        45
11        89
13        89
15        12
16        09
17        34
19        89
20        90
23        21
26        09 
```

在上面的矩阵中，我需要遍历 TIME 列，增加 5 秒并访问与该行匹配的相应 PRICE。例如：我从 10 开始。我需要访问 15 (10+5)，如果列中的数字是连续数据，我可以轻松达到 15，但事实并非如此。所以在 15 秒的时间，我需要掌握相应的价格。这一直持续到整个数据集的末尾。我的下一个需要访问的元素是 20，以及它对应的价格。现在我再次添加 5 秒，因此继续。如果元素不存在，则必须访问立即大于它的元素以获得相应的价格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:35:29.433

如果您要提取的行是`m[1,1]+5, m[1,1]+10, m[1,1]+15`等，那么：

```
m <- cbind(TIME=c(10,11,13,15,16,17,19,20,23,26), 
           PRICE=c(45,89,89,12,9,34,89,90,21,9))

r <- range(m[,1]) # 10,26
r <- seq(r[1]+5, r[2], 5) # 15,20,25
r <- findInterval(r-1, m[,1])+1 # 4,8,10 (values 15,20,26)
m[r,2] # 12,90,9 
```

`findInterval`找到等于或小于给定值的值的索引，所以我给它一个较小的值，然后将 1 添加到索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:02:56.017

正如@Tommy 上面评论的那样，目前尚不清楚您到底想获得什么时间。对我来说，您似乎想获得序列 10,15,20,25,... 的 PRICE，如果为真，您可以使用 mod ( `%%`) 函数轻松做到这一点：

```
TIME <- c(10,11,13,15,16,17,19,20,23,26) # Your times
PRICE <- c(45,89,89,12,9,34,89,90,21,9) # your prices

PRICE[TIME %% 5 == 0] # Get prices from times in sequence 10, 15, 20, ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:17:46.203

将问题分解为子片段...

获取值为 15 的行：

调用您的矩阵，例如 DATA，然后 [1] 提取感兴趣的行：

```
DATA[DATA[,1] == 15, ] 
```

然后抓住第二列。

[2] 将 5 添加到第一列（我很确定您可以这样做）：

```
DATA[,1] = DATA[,1] + 5 
```

这应该让你开始。其余的似乎只是一些时髦的迭代，递增 5，每次使用 [1] 来获得你想要的价格，将 15 换成一些变量。

我将解决方案的其余部分作为练习留给读者。有关在 R 中循环的提示等，请参阅下面的教程（我不希望它很快被删除，但可能希望保留一个本地副本。祝你好运:)）

[http://www.stat.berkeley.edu/users/vigre/undergrad/reports/VIGRERintro.pdf](http://www.stat.berkeley.edu/users/vigre/undergrad/reports/VIGRERintro.pdf)

# javascript - Phonegap Ajax Post to Rails 3.2.2 获取 MultiJson::DecodeError (756: unexpected token

> ID：10274634
> 
> 赞同：0
> 
> 时间：2012-04-23T03:59:53.573
> 
> 标签：javascript, ruby-on-rails, ajax, cordova

我正在尝试从 phonegap 到 rails 3.2.2 脚手架做一个简单的帖子。我有一个简单的脚手架，由一个控制器 => 图像和一个字段 => t.string:name 组成。

```
class ImagesController < ApplicationController
  # GET /images
  # GET /images.json
  def index
    @images = Image.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @images }
    end
  end

  # GET /images/1
  # GET /images/1.json 
  def show
    @image = Image.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @image }
    end
  end

  # GET /images/new
  # GET /images/new.json
  def new
    @image = Image.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @image }
    end
  end

  # GET /images/1/edit
  def edit
    @image = Image.find(params[:id])
  end

  # POST /images
  # POST /images.json
  def create
    @image = Image.new(params[:image])

    respond_to do |format|
      if @image.save
        format.html { redirect_to @image, notice: 'Image was successfully created.' }
        format.json { render json: @image, status: :created, location: @image }
      else
        format.html { render action: "new" }
        format.json { render json: @image.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /images/1
  # PUT /images/1.json
  def update
    @image = Image.find(params[:id])

    respond_to do |format|
      if @image.update_attributes(params[:image])
        format.html { redirect_to @image, notice: 'Image was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @image.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /images/1
  # DELETE /images/1.json
  def destroy
    @image = Image.find(params[:id])
    @image.destroy

    respond_to do |format|
      format.html { redirect_to images_url }
      format.json { head :no_content }
    end
  end
end 
```

phonegap 应用程序中的 index.html 文件是：

```
<!DOCTYPE HTML>
<html>
<head>
<title>PhoneGap</title>
<script type="text/javascript" charset="utf-8" src="cordova-1.6.1.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
<script type="text/javascript" charset="utf-8">

  function appReady(){

     var ajax = new XMLHttpRequest();
 var data = '{ image: { name: "noway" } }';
     ajax.open("POST","http://<server>/images.json",true);
     ajax.setRequestHeader("Content-type", "application/json")
     ajax.send(data);

     ajax.onreadystatechange=function(){
          if(ajax.readyState==4 && (ajax.status==200)){
               document.getElementById('main').innerHTML = ajax.responseText;
          }
     }
}

  document.addEventListener("deviceready", appReady, false);

    </script>
</head>
<body>

<h1>Hello World</h1>
<div id="main">
</div>
</body>
</html> 
```

webrick 控制台产生以下内容：

```
Started POST "/images.json" for 10.0.1.14 at 2012-04-22 22:32:58 -0500
Error occurred while parsing request parameters.
Contents:

MultiJson::DecodeError (756: unexpected token at '{ image: { name: "noway" } }'):
  json (1.6.6) lib/json/common.rb:148:in `parse' 
```

我认为这与我格式化 json 对象的方式有关，因为当我改变时：

```
var data = '{ image: { name: "noway" } }'; 
```

至：

```
var data = " "; 
```

我得到：

```
Started POST "/images.json" for 10.0.1.14 at 2012-04-22 22:57:03 -0500
Processing by ImagesController#create as JSON
  Parameters: {"image"=>{}}
WARNING: Can't verify CSRF token authenticity
   (0.1ms)  begin transaction
  SQL (24.1ms)  INSERT INTO "images" ("created_at", "name", "updated_at") VALUES (?, ?,  ?)  [["created_at", Mon, 23 Apr 2012 03:57:03 UTC +00:00], ["name", nil], ["updated_at",   Mon, 23 Apr 2012 03:57:03 UTC +00:00]]
   (46.0ms)  commit transaction
Completed 201 Created in 76ms (Views: 1.9ms | ActiveRecord: 70.2ms) 
```

我是否以某种方式错过了形成 json 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T22:59:13.377

我能够发布更改线路：

```
var data = '{ image: { name: "noway" } }'; 
```

至：

```
var data = JSON.stringify({ image: { name: "noway" } }); 
```

使用在 webrick 中产生以下结果的 JSON stringify 方法：

```
Started POST "/images.json" for 192.168.1.139 at 2012-04-23 17:54:58 -0500
Processing by ImagesController#create as JSON
  Parameters: {"image"=>{"name"=>"noway"}}
WARNING: Can't verify CSRF token authenticity
   (0.1ms)  begin transaction
  SQL (1.1ms)  INSERT INTO "images" ("created_at", "name", "updated_at") VALUES (?, ?, ?)  [["created_at", Mon, 23 Apr 2012 22:54:58 UTC +00:00], ["name", "noway"], ["updated_at",   Mon, 23 Apr 2012 22:54:58 UTC +00:00]]
   (45.8ms)  commit transaction
Completed 201 Created in 51ms (Views: 1.4ms | ActiveRecord: 47.0ms) 
```

# wpf - 当组合框位于 ListView 单元格中时，如何通过委托命令处理 SelectionChanged 事件

> ID：10274637
> 
> 赞同：3
> 
> 时间：2012-04-23T04:00:08.480
> 
> 标签：wpf, combobox, command, selectedindexchanged

“ [WPF command support in ComboBox](https://stackoverflow.com/questions/2222430/wpf-command-support-in-combobox) ”，此页面展示了如何扩展组合框以支持命令，但它没有给出映射到组合框的 SelectedIndexChanged 事件的委托命令的圆顶。现在我面临的问题是如何处理组合框 SelectedIndexChanged 事件，就像它是一次性组合框情况一样：

```
<ComboBox SelectionChanged="ComboBox_SelectionChanged"></ComboBox>
private void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var combobox = sender as ComboBox;
    if (combobox.SelectedIndex == 0)
    { 
        //todo:
    }
} 
```

目前的情况如下：

```
<GridViewColumn.CellTemplate>
    <DataTemplate>
        <Ext:CommandSupportedComboBox SelectedIndex="{Binding StartMode}" 
              Command="{Binding ChangeStartModeCmd}">
            <ComboBoxItem>Automatically</ComboBoxItem>
            <ComboBoxItem>Manual</ComboBoxItem>
            <ComboBoxItem>Forbidden</ComboBoxItem>
        </Ext:CommandSupportedComboBox>
    </DataTemplate>
</GridViewColumn.CellTemplate>

/// <summary>
/// change service start mode command
/// </summary>
public ICommand ChangeStartModeCmd { get; private set; } 
```

和相应的委托方法：

```
/// <summary>
/// change service start mode
/// </summary>
public void ChangeStartMode()
{ 
    //todo:
} 
```

命令的绑定方法：

```
ChangeStartModeCmd = new DelegateCommand(ChangeStartMode); 
```

我想定义这样的方法：

```
private void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var combobox = sender as ComboBox;
    if (combobox.SelectedIndex == 0)
    { 
        //todo:
    }
} 
```

但是如何将它绑定到委托命令 ChangeStartModeCmd？

```
ChangeStartModeCmd = new DelegateCommand(ChangeStartMode( 
        /*what should I pass for the method?*/)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T04:39:44.263

您可能不需要，`CommandSupportedCombobox`因为您可以附加`SelectedItem`ComboBox 的属性并在`setter`ViewModel 中调用您想要的功能......

# Xaml

```
<ComboBox SelectedItem="{Binding MyItem,Mode=TwoWay}" /> 
```

# 视图模型

```
 public MyItem
 {
    get {return myItem;}
    set
    {
        myItem=value;
        OnPropertyChanged("MyItem");  implement INotifyPropertyChanged
        MyFavFunction(); // Function to be called
    }
 } 
```

# java - 脉动振动器有问题

> ID：10274639
> 
> 赞同：2
> 
> 时间：2012-04-23T04:00:16.700
> 
> 标签：java, android, vibration, pulse

我正在尝试在我的应用程序中实现一个可以使振动器产生脉冲的功能。用户可以使用滑块更改 3 项内容，即振动强度、脉冲长度和脉冲之间的时间。

我在想一些代码，例如：

```
for(i=0; i<(pulse length * whatever)+(pulse gap * whatever); i+=1){
pattern[i]=pulse length*i;
patern[i+1]=pulse gap; 
```

但是，当我使用此代码时（当它正确完成时，这只是一个简单的示例）它会使应用程序崩溃。此外，当我改变振动强度（确实有效）时，我必须重新启动服务才能改变强度。我改变强度的方法是改变振动器打开和关闭的时间。

这是我用来检测手机应该如何振动的代码（这里的代码和我喜欢的有点不同）：

```
if (rb == 3){
    z.vibrate(constant, 0);
} else if (rb == 2){
     smooth[0]=0;
     for (int i=1; i<100; i+=2){
           double angle = (2.0 * Math.PI * i) / 100;
           smooth[i] = (long) (Math.sin(angle)*127);
           smooth[i+1]=10;
     }
     z.vibrate(smooth, 0);
} else if (rb == 1){
     sharp[0]=0;
     for(int i=0; i<10; i+=2){
            sharp[i] = s*pl;
            sharp[i+1] = s+pg;
     }
     z.vibrate(sharp, 0);
}
} else {
        z.cancel();
} 
```

如果有人能够指出一些可以做到这一点的代码的方向，或者我如何使它工作，我将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:16:07.307

我唯一的猜测是您收到**ArrayIndexOutOfBounds**错误。

如果是这样，您需要`long`在尝试填充数组之前定义数组的长度。

```
long[] OutOfBounds = new long[];
OutOfBounds[0] = 100;
// this is an error, it's trying to access something that does not exist.

long[] legit = new long[3];
legit[0] = 0;
legit[1] = 500;
legit[2] = 1000;
// legit[3] = 0; Again, this will give you an error. 
```

`vibrate()`虽然是一个智能功能。这些示例都不会引发错误：

```
v.vibrate(legit, 0);
// vibrate() combines both legit[0] + legit[2] for the 'off' time

long tooLegit = new long[100];
tooLegit[0] = 1000;
tooLegit[1] = 500;
tooLegit[10] = 100;
tooLegit[11] = 2000;
v.vibrate(tooLegit, 0);
// vibrate() skips over the values you didn't define, ie long[2] = 0, long[3] = 0, etc 
```

希望有帮助。

# emacs - Emacs 完成点函数

> ID：10274642
> 
> 赞同：5
> 
> 时间：2012-04-23T04:00:56.330
> 
> 标签：emacs, elisp, tab-completion

我正在编写基于 comint-mode 的派生模式。该模式是命令行程序（GRASS gis）的接口，comint 模式完成适用于这些程序。我正在尝试添加对完成程序参数的支持，通过`completion-at-point-functions`. 一个玩具示例是：

```
(setq my-commands 
      '(("ls"
         ("my-completion-1")
         ("my-completion-2"))
        ("mv"
         ("my-completion-3")
         ("my-completion-4"))))

(defun my-completion-at-point ()
  (interactive)
  (let ((pt (point)) ;; collect point
        start end)

    (save-excursion ;; collect the program name
      (comint-bol)
      (re-search-forward "\\(\\S +\\)\\s ?"))
    (if (and (>= pt (match-beginning 1))
             (<= pt (match-end 1)))
        () ;; if we're still entering the command, pass completion on to
      ;; comint-completion-at-point by returning nil

      (let ((command (match-string-no-properties 1)))
        (when (member* command my-commands :test 'string= :key 'car)
          ;; If the command is one of my-commands, use the associated completions 
          (goto-char pt)
          (re-search-backward "\\S *")
          (setq start (point))
          (re-search-forward "\\S *")
          (setq end (point))
          (list start end (cdr (assoc command my-commands)) :exclusive 'no))))))

(push 'my-completion-at-point completion-at-point-functions) 
```

这几乎可以工作。我得到程序名称的正常完成。但是，如果我`ls`在命令行输入，点击标签插入`my-completion-`并且不提供这两个选项。再次点击标签会插入`my-completion-`第二次，所以我现在有了`ls my-completion-mycompletion-`.

我的实际代码包括几行来检查多行命令，但对完成代码没有任何更改。使用此版本的代码，我在以其中一个程序名称开头的行上点击选项卡，我看到了`my-commands`一个可能的参数列表来完成命令，但缓冲区中没有插入任何内容，并且列表确实不要通过键入参数的前几个字母来缩小范围。

我已经阅读了手册，但我无法弄清楚编写`completion-at-point`函数的正确方法。有什么我想念的想法吗？

我已经简要地看了看`pcomplete`，但并没有真正理解“文档”，也没有取得任何进展。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T09:17:52.977

问题似乎出在您查找的方式上，`start`并`end`在该点返回参数的边界。我没有花足够长的时间调试它来确定细节，但我认为如果你以交互方式调用该函数，你会看到它为`start`and返回相同的值`end`，这意味着完成 UI 不知道使用参数 at point 从您传递的完成表中进行选择。

将函数的最后一部分更改为以下内容似乎是一种解决方法：

```
(when (member* command my-commands :test 'string= :key 'car)
  ;; If the command is one of my-commands, use the associated completions 
  (goto-char pt)
  (let ((start
         (save-excursion
           (skip-syntax-backward "^ ")
           (point))))

    (list start pt (cdr (assoc command my-commands)) :exclusive 'no))))))) 
```

当添加为 的元素时，这给出了预期的结果`completion-at-point-functions`。

在这里，我使用`skip-syntax-backward`了 regexp search 而不是 regexp 搜索，我认为这对于这种事情来说是更惯用的 Elisp。它只是说将点向后移动到不在语法类“空白”中的任何内容。跳过语法函数返回移动的距离而不是点的值，因此我们必须`point`在保存游览结束时添加一个调用。

如果您确实在这样的函数中使用正则表达式搜索，通常最好传递`t`第四个参数 ,`noerror`以便在匹配失败时不会将错误传递给用户。不过，这确实意味着您必须自己检查返回值是否为`nil`。

最后，`push`您可能希望`add-hook`按如下方式添加完成功能，而不是添加完成功能：

```
(add-hook 'completion-at-point-functions 'my-completion-at-point nil t) 
```

这做了两件有用的事情：它在添加之前检查你的函数是否已经在钩子中，并且（通过传递`t`第四个参数，`local`）它只将函数添加到完成点钩子的*缓冲区本地值。*这几乎肯定是您想要的，因为当您按下 TAB 键时，您不想在每个其他 Emacs 缓冲区中使用这些完成。

# azure-worker-roles - 将 WCF 迁移为 Azure 辅助角色

> ID：10274643
> 
> 赞同：0
> 
> 时间：2012-04-23T04:00:59.870
> 
> 标签：azure-worker-roles

我有一个作为 Windows 服务运行的 WCF 服务库。我想将此服务迁移为 Azure 辅助角色。当我右键单击 WCF 项目时，我通常会看到“添加 Windows Azure 部署项目”选项。使用我的 WCF 库，我看不到此选项。在这种情况下，如何将 WCF 服务库作为辅助角色迁移到 Azure？任何帮助将不胜感激。

下面是我的 WCF 服务库的 app.config。

```
<?xml version="1.0"?>
<configuration>
<system.serviceModel>
    <bindings>
        <netTcpBinding>
            <binding name="NetTcpBinding_IHealthService" closeTimeout="00:01:00"
                openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                transactionFlow="false" transferMode="Buffered" transactionProtocol="OleTransactions"
                hostNameComparisonMode="StrongWildcard" listenBacklog="10"
                maxBufferPoolSize="524288" maxBufferSize="65536" maxConnections="10"
                maxReceivedMessageSize="65536">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <reliableSession ordered="true" inactivityTimeout="00:10:00"
                    enabled="false" />
                <security mode="None">
                    <transport clientCredentialType="Windows" protectionLevel="EncryptAndSign" />
                    <message clientCredentialType="Windows" algorithmSuite="Default" />
                </security>
            </binding>
        </netTcpBinding>
    </bindings>
    <client>
        <endpoint address="net.tcp://localhost:9017/monitor/health/service.svc"
            binding="netTcpBinding" bindingConfiguration="NetTcpBinding_IHealthService"
            contract="HealthService.IHealthService" name="NetTcpBinding_IHealthService" />
    </client>
</system.serviceModel>
<startup><supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/></startup>
</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:52:11.683

在这种情况下，我建议您手动创建一个工作角色项目，添加对服务库项目的引用，然后将服务托管在工作角色内部。服务主机代码类似于您为普通控制台/Windows 服务主机获得的代码。但请通过代码获取地址。另外，完整的教程可以参考[http://msdn.microsoft.com/en-us/WAZPlatformTrainingCourse_WindowsAzureRoleCommunicationVS2010Lab](http://msdn.microsoft.com/en-us/WAZPlatformTrainingCourse_WindowsAzureRoleCommunicationVS2010Lab)。

此致，

明旭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T18:33:49.280

仅当项目类型为 WebApplication 或 WCF 应用程序时，才会显示“添加 Windows Azure 部署项目”选项。您必须在 WebApplication 中托管您的 WCF 库，然后该选项才会出现（或者甚至更好地将其直接托管在 Windows Azure WebRole 项目中）。

如果您真的想在 WorkerRole 中托管您的 WCF 库，我建议您按照 Ming Xu 的解释进行操作。但通常您将 WCF 服务托管在 Windows Azure 上的 WebRoles 中。所以我希望你有一个特殊的需求来解释你为什么要使用 WorkerRoles。

我希望这会有所帮助。

# android - Sqlite 查询的语法？

> ID：10274649
> 
> 赞同：0
> 
> 时间：2012-04-23T04:02:10.933
> 
> 标签：android, sqlite

当我执行下面的代码时，即使我用预先确定的字符串替换 usertry，它总是给我“无效”。我的查询中是否有任何语法问题？

检查登录方法在另一个检查有效登录的类中

```
 public void checklogin(String usertry){

    DatabaseHelper dbh = new DatabaseHelper(LoginActivity.this);
    DatabaseAdapter dba = new DatabaseAdapter(LoginActivity.this);
    db= dbh.getReadableDatabase();
    TextView usernametry = (TextView) findViewById(R.id.usernametry);
     usertry = usernametry.getText().toString();

    Cursor mCursor = db.query(dba.TABLE_USERS,new String[]{dba.COLUMN_ID,dba.COLUMN_NAME},  dba.COLUMN_NAME + "=" + "?", new String[]{usertry},null,null,null,null);

     if  (mCursor.moveToFirst()){
         Toast.makeText(LoginActivity.this, "Yaaaay", Toast.LENGTH_LONG).show();
     }

      Toast.makeText(LoginActivity.this, "invalid", Toast.LENGTH_LONG).show();                  
        }
} 
```

这是我的数据库适配器类：

```
 public class DatabaseAdapter {

public static final String COLUMN_ID = "ID";
public static final String COLUMN_NAME = "Name";
public static final String COLUMN_AGE = "Age";
public static final String COLUMN_GENDER = "Gender";
public static final String COLUMN_WEIGHT = "Weight";
public static final String COLUMN_HEIGHT = "Height";
public static final String COLUMN_ACTIVITY = "Activitylevel";
public static final String COLUMN_CALORIES = "numCal";
public static final String FOOD_ID = "food_ID";
public static final String FOOD_NAME = "food_name";
public static final String FOOD_CALS = "food_cals";
public static final String FOOD_FAT = "food_fat";
public static final String FOOD_PRO = "food_protein";
public static final String FOOD_CRAB = "food_crabs";

public static final String TABLE_USERS = "users";
public static final String TABLE_FOOD = "food";
private static final int DATABASE_VERSION = 1;
private static final String DATABASE_NAME = "nutriwellness.db";

private static final String CREATE_TABLE_USERS = "create table users( id integer primary key autoincrement, "
        + "Name text, Age integer, Gender text, Weight text, Height text, Activitylevel text, numCal float );";

private static final String CREATE_TABLE_FOOD = "create table food( food_ID integer primary key autoincrement,"
        + "food_name text,food_cals integer, food_fat integer, food_protein integer, food_crabs integer );";

private SQLiteDatabase database;
private DatabaseHelper dbHelper;

private String[] allColumnsofuserstable = { COLUMN_ID, COLUMN_NAME,
        COLUMN_AGE, COLUMN_GENDER, COLUMN_WEIGHT, COLUMN_HEIGHT };

private String[] allColumnoffoodtable = { FOOD_ID, FOOD_NAME, FOOD_FAT,
        FOOD_PRO, FOOD_CRAB };

public DatabaseAdapter(Context context) {

    dbHelper = new DatabaseHelper(context);
}

public static class DatabaseHelper extends SQLiteOpenHelper {

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 5);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        try {
            db.execSQL(CREATE_TABLE_USERS);
            db.execSQL(CREATE_TABLE_FOOD);
        } catch (SQLException e) {

            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        Log.w(DatabaseHelper.class.getName(),
                "Upgrading database from version " + oldVersion
                        + "to version " + newVersion);

        db.execSQL("DROP TABLE IF EXISTS users");
        onCreate(db);

    }

}

public DatabaseAdapter open() throws SQLException {
    database = dbHelper.getWritableDatabase();
    return this;
}

public void close() {
    dbHelper.close();
}

// create a user
public long createUser(String name, String age, String gender,
        String weight, String height, String level, float calnum) {

    ContentValues values = new ContentValues();
    values.put(COLUMN_NAME, name);
    values.put(COLUMN_AGE, age);

    values.put(COLUMN_GENDER, gender);

    values.put(COLUMN_WEIGHT, weight);
    values.put(COLUMN_HEIGHT, height);
    values.put(COLUMN_ACTIVITY, level);
    values.put(COLUMN_CALORIES, calnum);

    return database.insert(TABLE_USERS, COLUMN_ID, values);
}

// delete a user by ID
public boolean deleteUser(long rowId) {
    return database.delete(TABLE_USERS, COLUMN_ID + "=" + rowId, null) > 0;
}

// retrieve a list of all users
public Cursor getAllUsers() {
    return database.query(TABLE_USERS, allColumnsofuserstable, null, null,
            null, null, null);

}

// retrieve a particular user
public Cursor getUser(long rowId) throws SQLException {
    Cursor mCursor = database.query(true, TABLE_USERS,
            allColumnsofuserstable, COLUMN_ID + "=" + rowId, null, null,
            null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

// update a user
public boolean updateUser(long rowId, String Name, int age, String gender,
        String weight, String height, String level, float calnum) {
    ContentValues values = new ContentValues();
    values.put(COLUMN_NAME, Name);
    values.put(COLUMN_AGE, age);

    values.put(COLUMN_GENDER, gender);

    values.put(COLUMN_WEIGHT, weight);
    values.put(COLUMN_HEIGHT, height);
    values.put(COLUMN_ACTIVITY, level);
    values.put(COLUMN_CALORIES, calnum);
    return database.update(TABLE_USERS, values, COLUMN_ID + "=" + rowId,
            null) > 0;
}

// FOOD METHODS !

//Create a new food row
public long createFood(String name, int food_cal, int food_fat, int food_proteins, int food_carbs){
    ContentValues Fvalues = new ContentValues();
    Fvalues.put(FOOD_NAME, name);
    Fvalues.put(FOOD_CALS, food_cal);
Fvalues.put(FOOD_FAT, food_fat);
    Fvalues.put(FOOD_PRO, food_proteins);
    Fvalues.put(FOOD_CRAB, food_carbs);
    return database.insert(TABLE_FOOD, FOOD_ID, Fvalues);       
}

// delete a Food by ID
public boolean deleteFood(long rowId) {
    return database.delete(TABLE_FOOD, FOOD_ID + "=" + rowId, null) > 0;
}
// retrieve a list of all FOOD
public Cursor getAllfood() {
    return database.query(TABLE_FOOD, allColumnoffoodtable, null, null,
            null, null, null);

}

// Retrieve a specific Food

public Cursor getFood(long rowId) throws SQLException {
    Cursor mCursor = database.query(true, TABLE_FOOD,
            allColumnoffoodtable, FOOD_ID + "=" + rowId, null, null,
            null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;

}

// Update a food

public boolean updateFood(long rowId,String name, int food_cal, int food_fat, int food_proteins, int food_carbs){
    ContentValues Fvalues = new ContentValues();
    Fvalues.put(FOOD_NAME, name);
    Fvalues.put(FOOD_CALS, food_cal);
Fvalues.put(FOOD_FAT, food_fat);
    Fvalues.put(FOOD_PRO, food_proteins);
    Fvalues.put(FOOD_CRAB, food_carbs);
    return database.update(TABLE_FOOD, Fvalues, FOOD_ID+"="+rowId, null)>0; 
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:57:38.873

显然，即使您的查询有效，也会始终显示此 Toast 消息。你应该尝试类似的东西：

```
if  (mCursor.moveToFirst()){
         Toast.makeText(LoginActivity.this, "Yaaaay", Toast.LENGTH_LONG).show();
     }else{
         Toast.makeText(LoginActivity.this, "invalid", Toast.LENGTH_LONG).show();
     } 
```

但我想这不是真正的问题，但我没有看到任何其他问题。也许我们需要查看您的 DatabaseAdapter 类。

# java - 检查单词是否为大写，仅更改第一个字母

> ID：10274653
> 
> 赞同：0
> 
> 时间：2012-04-23T04:02:47.917
> 
> 标签：java, string, uppercase

我在这个论坛上搜索了一下，我似乎只能找到关于如何将每个单词的第一个字母大写的问题。这不是我要找的。

我正在寻找可以检查字符串中所有单词的东西，如果它们是大写的，则会将字母更改为小写，除了第一个。

就像，假设字符串是：

“HI 堆栈溢出”

它会将其更改为：

“嗨 Stackoverflow”

或者：

“我在 stackoverflow dot com 上提问”

它会将其更改为：

“我在 stackoverflow dot com 上提问”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T04:13:20.053

I would use the StringTokenizer class to break the string up into the separate words. Then you can get each token as a separate String and compare:

```
String line = "A BIG Thing that Something"

StringTokenizer st = new StringTokenizer(line);

        while(st.hasMoreTokens)
            {
                String a = st.nextToken();
                if(a.equals(a.toUpperCase())){
                    System.out.println(a.charAt(0) + a.substring(1).toLowerCase());
                }else{
                    System.out.println(a);
                    }
            } 
```

Something like that... You'll need to remember to import StringTokenizer, it's part of the java.util package.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T12:54:22.413

```
 public static void main(String[] args) {
      String org= "HI STACKOVERFLOW";
      String [] temp=org.split(" ");
      int len=temp.length;
      String ne = ".";
      for(int i=0;i<len;i++)
      {

         temp[i]=temp[i].toUpperCase();
         temp[i]=(temp[i].substring(0, 1)).toUpperCase()+(temp[i].substring(1, temp[i].length())).toLowerCase();
        System.out.print(temp[i]+" "); 
      }

    } 
```

输出嗨 Stackoverflow

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T04:14:37.843

If you're open to incorporate a library in your project, I'm quite sure that Apache Commons-lang `StringUtils` has the type of functionality you need.

# javascript - 从android调用javascript方法

> ID：10274656
> 
> 赞同：0
> 
> 时间：2012-04-23T04:04:28.800
> 
> 标签：javascript, android, string, function

我有以下方法可以从android调用。我已将其编写如下，但控件未进入 javascript。请让我知道是否有人有任何解决方案。

```
String resp = javascript:httpservicesuccess("{\"code\":\"200\",\"requestID\":\"1000\",\"body\":\"{\"units\":{\"temperature\":\"C\",\"speed\":\"km\/h\",\"distance\":\"km\",\"pressure\":\"mb\"},\"location\":{\"location_id\":\"ITXX0024\",\"city\":\"Como\",\"state_abbreviation\":\"*\",\"country_abbreviation\":\"IT\",\"elevation\":935,\"latitude\":45.81000000000000,\"longitude\":9.08000000000000},\"wind\":{\"speed\":5.00000000000000,\"direction\":\"S\"},\"atmosphere\":{\"humidity\":\"47\",\"visibility\":9.99000000000000,\"pressure\":1016.00000000000000,\"rising\":\"steady\"},\"url\":\"http:\/\/weather.yahoo.com\/forecast\/ITXX0024.html\",\"logo\":\"http:\/\/l.yimg.com\/a\/i\/us\/nt\/ma\/ma_nws-we_1.gif\",\"astronomy\":{\"sunrise\":\"06:47\",\"sunset\":\"18:22\"},\"condition\":{\"text\":\"Fair\",\"code\":\"34\",\"image\":\"http:\/\/l.yimg.com\/a\/i\/us\/we\/52\/34.gif\",\"temperature\":10.00000000000000},\"forecast\":[{\"day\":\"Today\",\"condition\":\"Sunny\",\"high_temperature\":13.00000000000000,\"low_temperature\":3.00000000000000},{\"day\":\"Tomorrow\",\"condition\":\"Partly Cloudy\",\"high_temperature\":14.00000000000000,\"low_temperature\":5.00000000000000}]}\",\"headers\":{"Date":"Mon, 23 Apr 2012 03:50:41 GMT","Cache-Control":"public, max-age=1800","Expires":"Mon, 23 Apr 2012 04:20:41 GMT","Connection":"close","Transfer-Encoding":"chunked","Content-Type":"application/json;charset=UTF-8"}}")  
webView.loadUrl(resp); 
```

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:11:40.500

你错了。以这种方式使用它。它不是 URL，而是 HTML 字符串。

```
webview.loadData(resp, "text/html", null); 
```

编辑 - 使用正确的格式（我不确定 text/html 是否正确）。但这就是您加载数据的方式。

# c++ - 如何使用模板类作为参数？

> ID：10274657
> 
> 赞同：0
> 
> 时间：2012-04-23T04:04:35.070
> 
> 标签：c++, templates

我在使用模板时遇到了困难，想寻求帮助。

首先，我正在实现一个动态列表，其中节点的“数据”可用于指向我需要的任何内容。它是所有应用程序的通用列表，我发现制作它的方法是使用模板。

这是我实现它的.h：

```
#ifndef DYNAMICLIST_H_
#define DYNAMICLIST_H_

// **** Node ****
template <typename T>
class Node
{
public:
    Node(int _nodeID, T* _data)
    {
        nodeID = _nodeID;
        next = NULL;
        data = _data;
    }

    Node()
    {

    }

    ~Node()
    {
        if(data)
            delete data;
    }

    //sets e gets

    Node* GetNext() const
    {
        return next;
    }

    void SetNext(Node* _next)
    {
        next = _next;
    }

    int GetNodeID() const
    {
        return nodeID;
    }

    T* GetNodeData() const
    {
        return data;
    }

    void SetData(T* _data) //provavelmente não será usada
    {
        data = _data;
    }

private:

    int nodeID; //numero usado na busca
    Node* next; //ponteiro pro proximo node
    T* data;    //ponteiro pra uma imagem, uma mensagem, um som, o que quer que seja que precisar ser guardado
};

// **** DynamicList ****
class DynamicList
{
public:
    DynamicList(Node* _node)
    {
        this->SetHead(_node);
    }

    ~DynamicList()
    {
        this->DeleteList();
    }

    //sets e gets
    Node* GetHead() const
    {
        return head;
    }

    void SetHead(Node* _head)
    {
        head = _head;
    }

    Node* GetNode(int _nodeID) const
    {
        Node *Finder;
        if (!head)
            return false;
        Finder = head;
        for (; Finder; Finder = Finder->GetNext()) 
        {
            if (Finder->GetNodeID() == _nodeID) //se o nome for igual, retorna o ponteiro do node
                return Finder;
        }
        return false;
    }

    void NewNode (Node* _node) // Método para adicionar um elemento novo ao final da lista.
    {   
        if (!this->GetHead())
        {
            this->SetHead(_node);
        }
        else
        {
            Node *Finder = this->GetHead();
            while (Finder->GetNext())
                Finder = Finder->GetNext();
            Finder->SetNext(_node);
        }
    }

    //outras
    bool Delete(int _nodeID)
    {
        Node* deleter;
        Node* aux;

        if(!this->GetNode(_nodeID) ) //não há mensagem com esse Id na lista
            return false;

        if(head->GetNodeID() == _nodeID)
        {
            if (!head->GetNext()) //se não houver outro nó além da head, não deletar
            {
                delete head;
                head = NULL;
            }
            else
            {
                aux = head->GetNext(); //se head tiver a mensagem a ser deletada, head agora aponta para o nó seguinte
                delete head;
                head = aux;
                return true;
            }
        }
        else
        {
            deleter = head;

            while (deleter) //enquanto não chegar no fim
            {
                if (deleter->GetNext()) //se há um próximo node
                {
                    if (deleter->GetNext()->GetNodeID() == _nodeID) //verifica se o próximo tem a node mensagem procurada
                    {
                        aux = deleter->GetNext()->GetNext(); //caso tenha, perde o ponteiro do proximo node e pega o do seguinte
                        delete deleter->GetNext();
                        deleter->SetNext(aux);
                        return true;
                    }
                }
                deleter = deleter->GetNext(); //passa para o próximo
            }
            return false;
        }
    }

    void DeleteList()
    {
        Node* superDeleter;
        Node* aux;

        superDeleter = head;

        if(!superDeleter)
            return;
        else
        {
            while(superDeleter->GetNext()) //se há um próximo node
            {
                aux = superDeleter->GetNext(); //guarda o proximo
                delete superDeleter; //deleta o primeiro
                superDeleter = aux; //aponta para o proximo
            }
            delete superDeleter; //deleta o ultimo restante
        }
    }

private:

    Node* head;
};

#endif 
```

我的意图是使用模板使数据成为通用指针，以将类保留在队列中。检查类中的方法。他们中的大多数都使用 Node*，我诅咒了它，把它变成了一个模板。现在 Node* 不能在没有在声明中指定类型的情况下使用？有没有办法声明 Node* 以便我可以在这些方法中使用它？我最大的问题是在方法中我不能指定节点模板，它应该适用于所有类型。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:07:17.837

> 我最大的问题是在方法中我不能指定节点模板，它应该适用于所有类型

是的，您可以：只需制作`DynamicList`一个模板，然后使用`Node<T>*`. 这样它将适用于所有类型。

# javascript - 函数不会调用另一个函数，javascript

> ID：10274658
> 
> 赞同：0
> 
> 时间：2012-04-23T04:05:00.290
> 
> 标签：javascript

对于一个类项目，我试图计算按钮获得的点击次数，保存搜索词，然后打开一个新的 html 文件。我的问题是“doCoolThings”函数不会调用“newWindow”函数。单击提交后，我无法弄清楚如何执行 newWindow 函数。

这是我的代码：

```
window.onload = init;
function init() {
    var myButton = document.getElementById("submitButton");
    myButton.onclick = doCoolThings;
    }

function doCoolThings(){
    alert("test count");
    localStorage.searchTerms = document.getElementById("searchWord").value;
    //var searchOutput = document.getElementById("searchOutput");
    searchWord.innerHTML = searchTerms;

    if (localStorage.clickcount)
        {
        localStorage.clickcount=Number(localStorage.clickcount)+1;
        //window.open("scroogleresults.html");
        }
    else
        {
        localStorage.clickcount=1;
        //window.location="scroogleresults.html";       
        }
    var myCounter = document.getElementById("numberClicks");
    var counter = localStorage.clickcount;
    myCounter.innerHTML = counter;
    newWindow();
}
function newWindow(){       
        alert("new window");
        window.open("scroogleresults.html");            
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:12:43.440

If this is the extent of your code, it looks to me like you have some javascript errors. You should be checking the error console or debug console in your browser for javascript errors that cause your scripts to abort. Here are a couple errors I see:

## Error #1

In `doCoolThings()`, when you do this:

```
searchWord.innerHTML = searchTerms; 
```

I don't see any place that `searchTerms` is defined so this would generate a script error.

## Error #2

You should be using `getItem()` and `setItem()` to access `localStorage`.

# objective-c - 在 Objective-C 中，有没有更短的方法来编写 init 方法？

> ID：10274662
> 
> 赞同：1
> 
> 时间：2012-04-23T04:05:21.883
> 
> 标签：objective-c

似乎每当我们需要初始化一个对象时，我们都需要立即编写

```
-(id) init {
    self = [super init];
    if (self) {
        // initialize values here
    }
    return self;
} 
```

有更短的方法吗？甚至可以通过宏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T04:14:50.577

您可以少写一行，但不再建议这样做：

```
- (id) init {

    if((self = [super init])){
        // initialize ivars
    }
    return self;
} 
```

样板是样板，不幸的是，初始化器所做的每一件事：分配（或超类的指定初始化器）`self`的结果，检查is not ，初始化 ivars 和返回（无论是有效对象）都是必要的。`[super init]``self``nil``self``nil`

为了节省自己的打字时间，您可以在 Xcode 中制作代码片段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T04:12:00.630

不，您必须在指定的初始化程序中执行所有这些操作，因此没有简单的捷径。

从理论上讲，您可以走宏路线，但宏不会很漂亮，而且对您的代码的读者来说是违反直觉的。

```
#define BEGIN_INIT self=[super init];if(self){
#define END_INIT }return self

-(id) init {
    BEGIN_INIT;
    // initialize values here
    END_INIT;
} 
```

这段代码并没有短多少，其他人也不太熟悉。我强烈推荐反对它。

# ruby - gem 安装后如何重新启动 Ruby？

> ID：10274663
> 
> 赞同：1
> 
> 时间：2012-04-23T04:05:33.093
> 
> 标签：ruby

我在 Ubuntu 上运行。这个问题太基本了，感觉很傻，但我做了一些搜索，无法找出答案。

编辑：我遇到了类似的问题如下

[使用 Twitter ruby​​ gem 的未初始化常量](https://stackoverflow.com/questions/8529953/uninitialized-constant-using-twitter-ruby-gem)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:14:46.637

安装 gems 后不需要重新启动 Ruby。例如，您可以

```
gem install rails 
```

之后，您可以立即开始运行 rails（使用 Ruby），而无需重新启动 Ruby。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:45:35.370

在使用 Twitter ruby​​ gem 链接重新启动的未初始化常量中，表示停止服务器的 ctr+c 和启动服务器的 rails s（对于 rails 3）。

# php - Internet Explorer 中的 Pyro CMS 管理面板问题

> ID：10274664
> 
> 赞同：0
> 
> 时间：2012-04-23T04:05:33.670
> 
> 标签：php, internet-explorer, codeigniter, pyrocms

我正在尝试登录以下链接：

[http://localhost/站点名称/管理员/](http://localhost/sitename/admin/)

登录在 IE 和其他浏览器中工作正常。

但问题是，如果我们更改 URL [http://intranetname/sitename/admin/](http://intranetname/sitename/admin/)（内联网名称是内部门户名称），那么在 IE 上它不会让我登录并刷新页面。登录在 Firefox 和其他浏览器上运行良好。

在 IE 中，如果我输入错误的用户密码，它会显示“无效详细信息”，但提供正确的详细信息只会刷新登录页面。

欢迎任何帮助或建议。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T16:19:15.493

`$config['cookie_domain'] = '';`

如果使用 netbios 名称并且没有为 cookie 设置域（即接受它们没有问题 config.php），则设置为这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T16:25:01.337

IE 将期望一个有效的 TLD，并且必须至少有一个“.”。在里面。localhost 不属于此规则。

在本地开发时，我总是将其设置为 local.foo 或 dev.whatever，但没有空间 = 问题。

# iphone - 使用 CoreData 保存图像后分辨率发生变化

> ID：10274666
> 
> 赞同：0
> 
> 时间：2012-04-23T04:05:37.897
> 
> 标签：iphone, ios, xcode, ipad, core-data

我在下面有以下代码。首先，在表格详细视图中，我捕获或加载图像（图像大小约为屏幕的 1/4），然后保存后图像将显示在 UITableView 中。到目前为止，一切似乎都很顺利。但是，当我按下 UITable 并尝试再次加载详细信息页面时。图像的分辨率降低。我猜它的大小与 TableView 中的大小相同。我可以知道我能做些什么来解决这个问题吗？

谢谢。

```
 -(void) ViewDidLoad{
       if ([currentPicture smallPicture])
                [imageField setImage:[UIImage imageWithData:[currentPicture smallPicture]]];
    }

- (IBAction)editSaveButtonPressed:(id)sender
            {

            // If we are adding a new picture (because we didnt pass one from the table) then create an entry
                if (!currentPicture)
                    self.currentPicture = (Pictures *)[NSEntityDescription insertNewObjectForEntityForName:@"Pictures" inManagedObjectContext:self.managedObjectContext];

        if (imageField.image)
        // Resize and save a smaller version for the table
                    float resize = 74.0;
                    float actualWidth = imageField.image.size.width;
                    float actualHeight = imageField.image.size.height;
                    float divBy, newWidth, newHeight;
                    if (actualWidth > actualHeight) {
                        divBy = (actualWidth / resize);
                        newWidth = resize;
                        newHeight = (actualHeight / divBy);
                    } else {
                        divBy = (actualHeight / resize);
                        newWidth = (actualWidth / divBy);
                        newHeight = resize;
                    }
                    CGRect rect = CGRectMake(0.0, 0.0, newWidth, newHeight);
                    UIGraphicsBeginImageContext(rect.size);
                    [imageField.image drawInRect:rect];
                    UIImage *smallImage = UIGraphicsGetImageFromCurrentImageContext();
                    UIGraphicsEndImageContext();

                    // Save the small image version
                    NSData *smallImageData = UIImageJPEGRepresentation(smallImage, 1.0);
                    [self.currentPicture setSmallPicture:smallImageData];
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:42:27.867

[在此处输入链接描述][1]更改此行（`NSData *smallImageData = UIImageJPEGRepresentation(smallImage, 1.0); )`通过以下行..

```
NSData *smallImageData = UIImageJPEGRepresentation(smallImage, 0.0); 
```

或者

```
NSData *smallImageData = UIImagePNGRepresentation(smallImage); 
```

希望对你有帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:17:44.667

(^.^)“抱歉，我的英语不好，如果有人喜欢纠正我的编辑，我将不胜感激”

您是否尝试过使用一个 UIImageView 和他的属性 contentMode？像这样：

```
UIImageView *imagen = [[UIImageView alloc] initWithFrame:CGRectMake(X, Y, W, H)];
[imagen setContentMode:UIViewContentModeScaleAspectFit]; 
```

# android - if else 语句出错

> ID：10274667
> 
> 赞同：0
> 
> 时间：2012-04-23T04:05:57.900
> 
> 标签：android, if-statement

我对 if else 语句有些问题，请支持

```
if (btn1.getText().toString().equals(myString[6]) &&            
                    (btn1.getText().toString().equals(myString[6]) || (btn1.getText().toString().equals(myString[7]) || (btn1.getText().toString().equals(myString[8]) || (btn1.getText().toString().equals(myString[9]) || (btn1.getText().toString().equals(myString[10]) || (btn1.getText().toString().equals(myString[11]) || (btn1.getText().toString().equals(myString[12]) || (btn1.getText().toString().equals(myString[13]) || (btn1.getText().toString().equals(myString[14]) || (btn1.getText().toString().equals(myString[15])|| 
                            (btn2.getText().toString().equals(myString[6]) || (btn2.getText().toString().equals(myString[7]) || (btn2.getText().toString().equals(myString[8]) || (btn2.getText().toString().equals(myString[9]) || (btn2.getText().toString().equals(myString[10]) || (btn2.getText().toString().equals(myString[11]) || (btn2.getText().toString().equals(myString[12]) || (btn2.getText().toString().equals(myString[13]) || (btn2.getText().toString().equals(myString[14]) || (btn2.getText().toString().equals(myString[15])|| 
                                    (btn3.getText().toString().equals(myString[6]) || (btn3.getText().toString().equals(myString[7]) || (btn3.getText().toString().equals(myString[8]) || (btn3.getText().toString().equals(myString[9]) || (btn3.getText().toString().equals(myString[10]) || (btn3.getText().toString().equals(myString[11]) || (btn3.getText().toString().equals(myString[12]) || (btn3.getText().toString().equals(myString[13]) || (btn3.getText().toString().equals(myString[14]) || (btn3.getText().toString().equals(myString[15])|| 
                                            (btn4.getText().toString().equals(myString[6]) || (btn4.getText().toString().equals(myString[7]) || (btn4.getText().toString().equals(myString[8]) || (btn4.getText().toString().equals(myString[9]) || (btn4.getText().toString().equals(myString[10]) || (btn4.getText().toString().equals(myString[11]) || (btn4.getText().toString().equals(myString[12]) || (btn4.getText().toString().equals(myString[13]) || (btn4.getText().toString().equals(myString[14]) || (btn4.getText().toString().equals(myString[15])|| 
                                                    (btn5.getText().toString().equals(myString[6]) || (btn5.getText().toString().equals(myString[7]) || (btn5.getText().toString().equals(myString[8]) || (btn5.getText().toString().equals(myString[9]) || (btn5.getText().toString().equals(myString[10]) || (btn5.getText().toString().equals(myString[11]) || (btn5.getText().toString().equals(myString[12]) || (btn5.getText().toString().equals(myString[13]) || (btn5.getText().toString().equals(myString[14]) || (btn5.getText().toString().equals(myString[15])|| 
                                                            (btn01.getText().toString().equals(myString[6]) || (btn01.getText().toString().equals(myString[7]) || (btn01.getText().toString().equals(myString[8]) || (btn01.getText().toString().equals(myString[9]) || (btn01.getText().toString().equals(myString[10]) || (btn01.getText().toString().equals(myString[11]) || (btn01.getText().toString().equals(myString[12]) || (btn01.getText().toString().equals(myString[13]) || (btn01.getText().toString().equals(myString[14]) || (btn01.getText().toString().equals(myString[15]) 

                    )))))))))))))))))))))))))))))))))))))))))))))))))))))))))))))
            {
            Toast.makeText(getBaseContext(), "something wrong", Toast.LENGTH_SHORT).show();          
            } 

            else if (btn1.getText().toString() == (btn2.getText().toString())
                (btn1.getText().toString() == (btn3.getText().toString())||
                        (btn1.getText().toString() == (btn4.getText().toString())||
                                (btn1.getText().toString() == (btn5.getText().toString())||
                                        (btn1.getText().toString() == (btn01.getText().toString())||
                                                (btn2.getText().toString() == (btn3.getText().toString())||
                                                        (btn2.getText().toString() == (btn4.getText().toString())||
                                                                (btn2.getText().toString() == (btn5.getText().toString())||
                                                                        (btn2.getText().toString() == (btn01.getText().toString())||
                                                                                (btn3.getText().toString() == (btn4.getText().toString())||
                                                                                        (btn3.getText().toString() == (btn5.getText().toString())||
                                                                                                (btn3.getText().toString() == (btn01.getText().toString())||
                                                                                                        (btn4.getText().toString() == (btn5.getText().toString())||
                                                                                                                (btn4.getText().toString() == (btn01.getText().toString())||
                                                                                                                        (btn5.getText().toString() == (btn01.getText().toString()))))))))))))))))
            {
                Toast.makeText(getBaseContext(), "something same", Toast.LENGTH_SHORT).show();           
            }
            else (btn1.getText().toString().equals(myString[0])||
                    (btn1.getText().toString().equals(myString[1])||(btn1.getText().toString().equals(myString[2])||(btn1.getText().toString().equals(myString[3])||(btn1.getText().toString().equals(myString[4])||(btn1.getText().toString().equals(myString[5])))))))
            {
                Toast.makeText(getBaseContext(), "test", Toast.LENGTH_SHORT).show();
            }
        } 
```

如果执行的语句只出现“相同的东西”。我应该从上面的代码中添加什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T04:09:39.657

第一的....`else if (btn1.getText().toString() == (btn2.getText().toString())....`

用于`.equals()`比较 String..and 使用 else if ledder 而不是 else if then you can check some questions...

# java - I am unable to display the path taken inside my maze from start to finish

> ID：10274668
> 
> 赞同：0
> 
> 时间：2012-04-23T04:06:05.170
> 
> 标签：java

I am reading the maze outline in from an input file and storing the values in a 2D array. I am able to find the exit in my findPath() method, but i am unsure how to trace the actual path from start to finish.

I want to change the char value in the "Room" to a '.' if it is on the actual path. Please advise how i can accomplish this. Any help is greatly appreciated. Thanks.

```
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.PrintWriter;
import java.util.*;
import javax.swing.JOptionPane;

public class Maze {
    String inFile,   // Name of file to be used as input
           outFile,  // Name of file to output completed maze to
           line;     // Current line being read by scanner
    Room [][] rooms; // Holds the values that create maze
    Room [] theStack;
    Room goal;
    Room current = new Room();
    int rows, columns;
    int tos = 0;
    char [][] mazeC;

    public static void main(String []args) throws Exception {
        Maze m = new Maze();
    }

    public Maze() throws FileNotFoundException {
        // Prompts user for the name of the file they wish to use as the input file.
        inFile = JOptionPane.showInputDialog(null, "Please enter the name of the file you wish to read, including " + "the file path:");
        if(inFile.equals("")) inFile = "C:/java/javaFiles/maze1.txt";

        // Prompts user to enter the name they wish to save the file under.
        outFile = JOptionPane.showInputDialog(null, "Please enter the filename you wish to save the data to:");
        if(outFile.equals("")) outFile = "C:/java/javaFiles/mazeoutput1.txt";

        // Creates a scanner object to read in the input file.
        Scanner readFile = new Scanner(new FileReader(inFile));
        PrintWriter output = new PrintWriter(outFile);        
        rows = readFile.nextInt();
        columns = readFile.nextInt();
        readFile.nextLine();
        theStack = new Room[1000];
        rooms = new Room [rows][columns];
        for(int i = 0; i < rows; i++) {
            line = readFile.nextLine();
            for(int j = 0; j< line.length(); j++) {
                Room r = new Room();
                r.setValue(line.charAt(j));
                if(r.getValue() == '$')
                    r.setGoal(true);
                r.setBlocked(false);
                if (r.getValue() == '*') {
                    r.setBlocked(true);
                    r.setGoal(false);
                } else {
                    r.setGoal(false);
                    r.setBlocked(false);
                }
                r.setCord(i, j);
                rooms[i][j] = r;
                //mazeContent[i][j]  = line.charAt(j);    
            }
        }

        createRooms();

        findPath();
        for(int i = 0; i < rows ; i++) {
            for(int j = 0; j < columns ; j++) {
                System.out.print(rooms[i][j].getValue());
            }
            System.out.println();
        }
    }

    public void createRooms() {
        for(int i = 1; i < rows - 1; i++) {
            for(int j = 1; j < columns -1; j++) {
                rooms[i][j].setCord(i,j);
                rooms[i][j].setValue(rooms[i][j].getValue());
                rooms[i][j].setUp(rooms, i, j);
                rooms[i][j].setDown(rooms, i, j);
                rooms[i][j].setRight(rooms, i, j);
                rooms[i][j].setLeft(rooms, i, j);
                if(rooms[i][j].getValue() == '*')
                    rooms[i][j].setBlocked(true);
                else
                    rooms[i][j].setBlocked(false);

                //System.out.println(rooms[i][j].getValue());
            }
        }
    }

    public void findPath() {
        for(int i = 0; i < rows ; i++) {
            for(int j = 0; j < columns ; j++) {
                System.out.print(rooms[i][j].getValue());
            }
            System.out.println();
        }
        Room start = rooms[1][1];
        push(start);
        while(!isEmpty()) { 
            current = pop();
            System.out.println("The value stored in current is" + current.getValue()+ "");
            if (current == null) 
                System.out.println("current is null");
            else if(current.getValue() == '$') {
                System.out.println("Success"); 
                current.setValue('f');
                /*for (int i = 0; i < tos; i++) {
                }*/
            }
            //System.out.println("The value is " + current.getValue());
            else if(current.getBlocked() == false && current.getVisited() == false) {
                System.out.println("pushing currents neighbors left, right....etc" + 
                    "current is at" +  current.getCord());
                current.setVisited(true);
                //
                if(current.getRight() != null){
                    push(current.getRight()); System.out.println("Inside push 1" +current.getRight().getCord());}
                else System.out.println("Inside push right is null");
                if(current.getLeft() != null){
                    push(current.getLeft()); System.out.println("Inside push 2 " + current.getLeft().getCord());}
                else System.out.println("Inside push left is null");
                if(current.getUp() != null)  {
                    push(current.getUp()); System.out.println("Inside push 3" + current.getUp().getCord());}
                else System.out.println("Inside push up is null");
                if(current.getDown() != null) {
                    push(current.getDown()); System.out.println("inside push 4" + current.getDown().getCord());}
                else System.out.println("Inside push down is null");
            }
        }
    }

    public Room pop() {
        // TODO Auto-generated method stub
        System.out.println("I have Popped");
        return theStack[--tos];
    }

    public boolean isEmpty() {
        // TODO Auto-generated method stub
        return tos == 0;
    }

    public void push(Room item) {
        System.out.println("I have pushed");
        if (isFull()) {
            System.out.println("The stack is full!");
        }
        else if(item == null){
            System.out.println("you are pushing a null object");
        }
        else 
            System.out.println("stuff added");
        theStack[tos++] = item;
    }

    public boolean isFull() {
        return tos == theStack.length-1;
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:56:10.080

我还没有真正逐行浏览你的代码，但这里有一个解决方案：（*我写了一个类似的程序来在图中找到 Djikstra 的最短路径*）

在房间对象中创建一个名为*PREVIOUS的属性。*每次您去“下一个房间”时，请确保将下一个房间的*PREVIOUS*属性更改为您来自的房间。

**到达目的地时：**从目的地的*PREVIOUS*开始，然后遍历房间，直到找到没有*PREVIOUS*的房间，这将是您的源（开始）房间。**即**转到上*一个*房间，将其添加到堆栈中，转到其上*一个*并重复该过程，直到您到达起始房间。

**这应该可行，因为：**如果您经过一条房间路径并且遇到了死胡同，您将返回轨道并开始通过新路径。最终，您将递归地覆盖新路径中每个房间的*PREVIOUS*属性（每次）。当您到达目的地时，您将在当前（正确）路径中的每个房间中拥有最新（正确）的*PREVIOUS属性。*因此，遍历并将每个房间的*PREVIOUS*添加到堆栈或队列或（无论您想要什么）中。这应该给你你的路径。

# html - 如何从左到右浮动两个相邻的桌子？

> ID：10274669
> 
> 赞同：13
> 
> 时间：2012-04-23T04:06:14.153
> 
> 标签：html, css

如果我有两张桌子？

```
<table class="one"> and... <table class="two"> 
```

CSS看起来像：

```
table.one {
    position: relative;
    float: left;
}
table.two {
    position: relative;
    float: right;
} 
```

它不工作...

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-23T04:11:16.987

不要使用位置：相对，只需为每个表格提供宽度以便正确浮动。

```
table.one {
    float:left;
    width:45%;
}

table.two   {
    width:45%;
    float:right;
}​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T05:02:27.513

您可以简单地`float: left`为您的表类定义它将自动彼此相邻：

```
table {
    float:left;
    background:yellow;
    margin-left:10px;
}
```

```
<table>
    <tr>
        <td>Table 1</td>
    </tr>
    <tr>
        <td>blah blah</td>
        <td>blah blah</td>
        <td>blah blah</td>
    </tr>

</table>

<table>
    <tr>
        <td>Table 2</td>
    </tr>
    <tr>
        <td>blah blah</td>
        <td>blah blah</td>
        <td>blah blah</td>
    </tr>
</table>
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T04:10:16.770

尝试给它们一个宽度。每个 40% 应该是一个很好的测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T04:53:57.487

嘿它工作我给你现场演示现在检查这个

现在你可以像这样做两个选项

**选项一**

```
table.one {
  position:relative;
  float:left;
  border:solid 1px green;
}

table.two {
  position:relative;
  float:right;
  border:solid 1px red;
}
```

```
<table class="one">
  <tr>
    <td>hello demo here</td>
  </tr>
</table>

<table class="two">
  <tr>
    <td>hello demo here 2</td>
  </tr>
</table>
```

* * *

**选项二**

```
<table class="one" align="left" border="1">
  <tr>
    <td>hello demo here</td>
  </tr>
</table>

<table class="two" align="right" border="1">
  <tr>
    <td>hello demo here 2</td>
  </tr>
</table>
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-23T04:15:47.243

你是什​​么意思它不起作用？

您拥有的 CSS 将在父元素的每一侧放置一个表格。如果您正在寻找它们直接相互浮动而不是在父级的相对两侧，您将需要'float：left;' 在他们两个中（或者相反地'浮动：对;'在他们两个中）。

# magento - Import magento category and product table only

> ID：10274670
> 
> 赞同：0
> 
> 时间：2012-04-23T04:06:21.110
> 
> 标签：magento

We now have two magento applications. One(APP A) has category and product data which will be used in another magento application(APP B).

Because APP B has lots of new settings such as keywords, meta descriptions, etc, we can not directly use APP A's database but only category and product tables.

So is there a method to import category and product database of APP A to APP B? Thank you very much!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T03:48:14.687

我是这样做的。我正在根目录下的测试文件夹中建立一个新商店，同时生产有销售、新产品/客户以及库存变化。

您还需要获取所有 mage_cataloginventory_stock 表：

```
mage_cataloginventory_stock
mage_cataloginventory_stock_item
mage_cataloginventory_stock_status
mage_cataloginventory_stock_idx
mage_cataloginventory_stock_tmp 
```

*   禁用编译器和缓存，清除缓存

除了上面答案中列出的正确的表之外，在删除我的表时（在删除时禁用外键检查，截断在 phpmyadmin 中不起作用），这里是做什么

*   导入数据
*   重新索引。

媒体（图像）与安装 URL 有关，因此，我将根目录中的生产商店移动到子目录，一切都很好。

首先返回目标数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:39:30.633

您需要导出和导入所有类别和产品的数据库表

```
catalog_category_entity 

catalog_category_entity_datetime 

catalog_category_entity_decimal 

catalog_category_entity_int 

catalog_category_entity_text 

catalog_category_entity_varchar 

catalog_category_flat

catalog_product_entity 

catalog_product_entity_datetime 

catalog_product_entity_decimal 

catalog_product_entity_gallery 

catalog_product_entity_int 

catalog_product_entity_media_gallery 

catalog_product_entity_media_gallery_value 

catalog_product_entity_text 

catalog_product_entity_tier_price 

catalog_product_entity_varchar 

catalog_product_link 

catalog_product_link_attribute 

catalog_product_link_attribute_decimal 

catalog_product_link_attribute_int 

catalog_product_link_attribute_varchar 

catalog_product_link_type 

catalog_product_super_attribute 

catalog_product_super_attribute_label 

catalog_product_super_attribute_pricing 

catalog_product_super_link 

catalog_product_website 
```

# jquery - JqChart 高手求。雷达图无法获取实际最大数据值

> ID：10274675
> 
> 赞同：0
> 
> 时间：2012-04-23T04:06:58.580
> 
> 标签：jquery, charts, radar-chart, jqchart

这是带有我的结果[jsfiddle 预览](http://jsfiddle.net/cyrilkong/XeEWn/)的示例代码！

我的问题是如何手动制作最大点而不是雷达标签中的 500。

这只是我正在做的一个 table-SVG 转换器。

```
系列数据
```

是一个数组，来自每个源 <td> 的表。

通常我希望数据的最大点是 100，但它总是用 500 来计算我，这是怎么回事？

请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:12:16.633

您需要在 series.data 数组中添加数值。

在您的代码中更改此行：

axes_datas.push($(this).text());

和：

axes_datas.push(parseFloat($(this).text()));

# meteor - 从服务器获取结果后在 Meteor 中调用客户端 js 函数

> ID：10274679
> 
> 赞同：8
> 
> 时间：2012-04-23T04:08:01.237
> 
> 标签：meteor

我正在尝试查看在客户端从 Meteor 方法调用获得结果后如何调用 js 函数。我唯一能得到的是`myFunc`仅在进行实际方法调用的客户端上调用该函数。有什么想法可以在所有当前订阅的客户端上调用该函数吗？

这是代码：

```
function myFunc(error, result)  {
  alert(result);
}
if (Meteor.is_client) {

  Template.container.events = {
    'click input' : function () {
      Meteor.call('someMethod',myFunc);
      if (typeof console !== 'undefined')
        console.log("You pressed the button");
    }
  };
}

if (Meteor.is_server) {
  Meteor.startup(function () {
    // code to run on server at startup
  });
}

Meteor.methods({
  someMethod: function() {
    //console.log(!this.is_simulation);
    return "something";
  }
}) 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T06:08:16.763

目前您不能直接向所有客户端广播方法调用。至少据我所知。但一种解决方法是创建一个名为 Alerts 的集合并监视它的变化。然后，当您想向所有用户发送消息时，您可以在警报中更改文档：

客户：

```
Alerts = new Meteor.Collection("alerts")

Meteor.autosubscribe(function() {
  Alerts.find().observe({
    added: function(item){ 
      alert(item.message);
    }
  });
}); 
```

服务器：

```
Alerts = new Meteor.Collection("alerts")

Meteor.publish("alerts", function(){
 Alerts.find();
});

Alerts.remove({}); // remove all
Alerts.insert({message: "Some message to show on every client."}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-06T06:13:13.877

另一种选择是使用[Meteor Stream 包](http://arunoda.github.io/meteor-streams)，其目的是避免在服务器端使用 mongodb 集合。它确实支持客户端到客户端、服务器到客户端、客户端到服务器以及服务器到服务器的消息传递，包括对[Meteor Cluster的支持](http://meteorhacks.com/meteor-cluster-introduction-and-how-it-works.html)

如果您只想使用集合来使用流星，则以下代码允许您将消息从客户端广播到所有客户端，或者将消息从服​​务器广播到所有订阅的客户端。一旦收到正确的消息，只需使用此机制在客户端触发一个函数。代码的制作方式是您永远不会在集合中留下无用的项目。

```
Messages = new Meteor.Collection("messages");

if (Meteor.isClient) {

    Meteor.subscribe("messages");

    var query = Messages.find({});
    var handle = query.observe({
        added: function(document)
        {
            console.log(document.message);
        }
    });

    // Test the mechanism from the client side
    Meteor.call("client talked");
}

if (Meteor.isServer) {
    Meteor.startup(function() {
        Messages.remove({});
    });

    Meteor.publish("messages", function()
    {
        // you might add an optional filter in order to broadcast only the messages you want to the client
        return Messages.find();
    });

    function talk(message)
    {
                    var id = Messages.insert({"message":message});
                    Messages.remove(id);
    }

    Meteor.methods(
            {
                talk: function(message)
                {
                    // you might filter here if the clients can talk using this.userId
                    talk(message);
                }
            });

    // test the mechanism from the server side
    talk("server talked");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-10T01:33:39.847

我喜欢 Zeke 所说的，但对于使用 Meteor 0.5.0+ 的人，请使用 Deps.autorun 而不是 autosubscribe... 详情请参阅： [https ://groups.google.com/forum/#!topic/meteor-core/ mTa81RLvhbY](https://groups.google.com/forum/#!topic/meteor-core/mTa81RLvhbY) 和 [http://www.meteor.com/blog/2013/02/14/meteor-055-devshop-code-and-community-contributions](http://www.meteor.com/blog/2013/02/14/meteor-055-devshop-code-and-community-contributions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-03T23:19:05.097

我调用 JavaScript 客户端函数的简单方法是在您的集合绑定的 html 模板中添加一个脚本标记。每当插入新项目时，此标签都会插入到客户端中以运行您的功能。我有一个集合调用**上传**，其中包含一些属性，例如**name**。以下模板在 Uploads 集合中收到新项目时触发**drawpoints()客户端函数：**

```
 {{#each uploads}}
        <tr>
            <td>{{name}}</td>
            <td>
                <div class="alert alert-success"><a href="{{url download=true}}">Download Here</a></div>
            </td>
        </tr>
        <script>drawpoints();</script>
    {{/each}} 
```

# mysql - 如何在mysql中计算不包括周末和节假日的日期差异

> ID：10274682
> 
> 赞同：0
> 
> 时间：2012-04-23T04:08:25.387
> 
> 标签：mysql, sql

我想计算两个日期（如开始和结束）之间的天数，但不包括周末和公众假期。我有公共假期日期的桌子。我看到了一些这样的例子

```
从表中选择 TIMEDIFF(date1,date2)
其中 date1 不在（从 holiday_table 中选择假期）和
date2 不在（从 holiday_table 中选择假期）和
DAYOFWEEK(date1) 不在 (1,7) 和 DAYOFWEEK(date2) 不在 (1,7)
```

但这不起作用，因为它只需要两个日期开始和结束，但是它之间的任何东西都会离开。你还有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:13:44.037

从您对问题的描述中，我觉得它应该在 UDF 中创建，逻辑应该是这样的：

*   检查几天之间有多少日期`select count(1) from holiday_table where holiday between @start and @end`
*   然后取两者之间的真正差`@start`并`@end`减去holiday_table的计数

# assembly - 为什么像 GAS 这样的汇编程序输出的不仅仅是二进制文件？

> ID：10274684
> 
> 赞同：1
> 
> 时间：2012-04-23T04:08:40.300
> 
> 标签：assembly, executable, gnu-assembler

根据大英百科全书汇编语言是

> 主要是特定计算机机器语言的符号等价物。

如果这是真的，为什么汇编程序喜欢 GAS 输出带有标题的文件？

我确信 ELF/Mach-O/PE 标头不是“机器语言”。

那么为什么汇编器不*只是* **汇编** *汇编*语言并将二进制文件的格式化留给链接器呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:13:01.660

问题是机器直接运行汇编，但操作系统必须为二进制文件设置一个执行位置。这就是为什么你有像 ELF 头这样的东西。您的操作系统需要知道代码在哪里、BSS 部分、在哪里加载数据等等。如果没有这些信息，如果您只给它原始程序集，操作系统就无法正确加载它。

如果您有带有内联数据的汇编代码（编码到指令中），那么您可以说标头是不必要的，但这种情况很少见。

# algorithm - 大数的数学表示？

> ID：10274686
> 
> 赞同：0
> 
> 时间：2012-04-23T04:08:48.620
> 
> 标签：algorithm, math

我正在尝试编写一个函数，该函数将大量数字作为输入（长度超过 800 位）并返回一个没有复杂数学的简单公式作为字符串。

通过简单的数学，我的意思只是根据需要带有**+、-、*、/、^**和**()的****数字**。

 ****`'4^25+2^32' = giveMeMath(1125904201809920); // example`

任何语言都可以。我可以重构它，只是在逻辑上寻找一些帮助。

奖金。输出越短越好。处理时间很重要。此外，数学准确性是必须的。

更新：澄清一下，所有输入值都是正整数（没有小数）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:15:09.483

我认为整个问题可以重新转换为长整数二进制表示上的[游程编码问题。](https://en.wikipedia.org/wiki/Run-length_encoding)

例如，取以下数字：

```
17976931348623159077293051907890247336179769789423065727343008115773
26758055009631327084773224075360211201138798713933576587897688144166
22492847430639474110969959963482268385702277221395399966640087262359
69162804527670696057843280792693630866652907025992282065272811175389
6392184596904358265409895975218053120L 
```

这看起来相当可怕。但是，在二进制中：

```
>>> bin(_)
'0b11111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111111111111111111111111111111111
11111111111111111111111111111111111111100000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000
0000000' 
```

大约是 500 个 1，然后是 500 个 0。这暗示了这样的表达：

```
2**1024 - 2**512 
```

这就是我首先获得大量数据的方式。

如果整数的二进制表示中没有明显的长时间运行，那么这根本不会很好。`101010101010101010....`是最坏的情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:11:40.420

在java中，你应该看看`BigDecimal`java.math包中的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:35:58.700

我建议你看看

1.  用于执行算术的[GMP](http://gmplib.org/)库（GNU 多精度算术库）

2.  看看[整数分解](http://en.wikipedia.org/wiki/Integer_factorization)。该链接重定向到维基百科，这应该可以提供一个很好的概述。但是要更科学一点：

    *   伊利诺伊大学的[Daniel Bernstein的](http://cr.yp.to/djb.html)[整数分解](http://www.connellybarnes.com/documents/factoring.pdf)(PDF)
    *   俄勒冈州立大学物理系的 Connelly Barnes 的[整数分解算法(PDF)](http://www.connellybarnes.com/documents/factoring.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T04:47:22.447

这是我在 Python 中的尝试：

```
def give_me_math(n): 

    if n % 2 == 1:
        n = n - 1  # we need to make every odd number even, and add back one later
        odd = 1
    else:
        odd = 0
    exps = []

    while n > 0:
        c = 0
        num = 0
        while num <= n/2:
            c += 1
            num = 2**c

        exps.append(c)    
        n = n - num
    return (exps, odd) 
```

结果：

```
>>> give_me_math(100)
([6, 5, 2], 0)  #2**6 + 2**5 + 2**2 + 0 = 100

>>> give_me_math(99)
([6, 5, 1], 1)  #2**6 + 2**5 + 2**1 + 1 = 99

>>> give_me_math(103) 
([6, 5, 2, 1], 1) #2**6 + 2**5 + 2**2 + 2**1 + 1 = 103 
```

我相信结果是准确的，但我不确定您的其他标准。

编辑：

结果：大约一秒钟内计算完毕。

```
>>> give_me_math(10**100 + 3435)
([332, 329, 326, 323, 320, 319, 317, 315, 314, 312, 309, 306, 304, 303, 300, 298, 295, 294, 289, 288, 286, 285, 284, 283, 282, 279, 278, 277, 275, 273, 272, 267, 265, 264, 261, 258, 257, 256, 255, 250, 247, 246, 242, 239, 238, 235, 234, 233, 227, 225, 224, 223, 222, 221, 220, 217, 216, 215, 211, 209, 207, 206, 203, 202, 201, 198, 191, 187, 186, 185, 181, 176, 172, 171, 169, 166, 165, 164, 163, 162, 159, 157, 155, 153, 151, 149, 148, 145, 142, 137, 136, 131, 127, 125, 123, 117, 115, 114, 113, 111, 107, 106, 105, 104, 100, 11, 10, 8, 6, 5, 3, 1], 1) 
```

800 位也很快：

```
>>> give_me_math(10**800 + 3452) 
```

但是输出太长，无法在此处发布，这当然是 OP 关心的问题。

这里的时间复杂度为 0(ln(n))，因此非常有效。****

# graphics - Banding with alpha transparency in XNA WP7

> ID：10274687
> 
> 赞同：1
> 
> 时间：2012-04-23T04:09:18.850
> 
> 标签：graphics, xna, windows-phone-7.1, lighting

Having some issues with smooth alpha gradients in texture files resulting in bad banding issues.

I have a 2D XNA WP7 game and I've come up with a fairly simple lighting system. I draw the areas that would be lit by the light in a separate RenderTarget2D, apply a sprite to dim the edges as you get further away from the light, then blend that final lighting image with the main image to make certain areas darker and lighter.

Here's what I've got so far:

![spotlight mask](../Images/7e67a0f83ccc2b8f0582b283559c4df7.png)

![light banding example](../Images/62ee437055d6e490fd40641ddc7f4cb9.png)

As you can see, the banding is pretty bad. The alpha transparency is quite smooth in the source image, but whenever I draw the sprite, it gets these huge ugly steps between colors. Just to check I drew the spotlight mask straight onto the scene with normal alpha blending and I still got the banding.

Is there any way to preserve smooth alpha gradients when drawing sprites?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:13:59.850

> Is there any way to preserve smooth alpha gradients when drawing sprites?

No, you cannot. WP7 phones currently use 16 bit color range system. One pixes got: 5 red bits, 5 blue, 6 green (humans see a wider spectrum of green color).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T01:21:58.267

发现使用 Mango，应用程序现在可以指定它们支持 32bpp，并且它可以在支持它的设备上运行！

![没有光带示例](../Images/7a57810de2f7708a00ac8ffababccbc6.png)

对于 XNA，将此行放在顶部`OnNavigatedTo`：

```
SharedGraphicsDeviceManager.Current.PreferredBackBufferFormat = SurfaceFormat.Color; 
```

对于 Silverlight ，添加`BitsPerPixel="32"`到.`App``WMAppManifest.xml`

# java - Hibernate Annotation - Adult and jointable (parent Child)

> ID：10274688
> 
> 赞同：0
> 
> 时间：2012-04-23T04:09:34.730
> 
> 标签：java, hibernate, jpa

I have 2 tables..

```
Adult
-------------------
id

ParentChild
-------------------
parentID(adult's id)
childID(adult's id) 
```

When I try to annotate them.. I keep getting NoClassDefFoundError

```
public class Adult

private id

private Set<Adult> children

.
.
.

@ManyToMany(fetch = FetchType.Lazy)
@JoinTable(name= "ParentChild",
joinColumns=@JoinColumn(name="id",referencedColumnName="parentID")
inverseJoinColumn=@JoinColumn(name=childID,referencedColumnName="id")
public Set<Adult> getChildren() {
.
.
}

public class ParentChild{
.
.
.
.
private String parentID
private String childID

} 
```

I know the above codes are a bit messy but I'm stuck in a place with only an internet 1 access terminal and the rest are development PC that can't be attached to internet.

I hope some kind soul can help me up. I am quite sure the exception is cause by the @ManyToMany statement as when I comment it off.. it will cause error.

is there anything I can download to trap the exception at HibernateUtil? The exception seems to be unrelated.

Gratitude from the mountain :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T11:14:23.877

亲爱的开发者和兄弟们。

如果您在运行时遇到 NoClassDefFoundError 异常，请停止查看您的 HIBERNATE 注释或代码。

此异常与类路径问题有关。

1) 在运行时找不到类 2) 重复的 jar。

基本上对我来说，我的类路径中有一个 ejb3-persistence.jar, 2 javax persistence.jar。

从 Eclipse 的构建路径中删除 javax persistence.jar 后一切正常

转到项目>属性>java构建路径>库

并正确配置您的构建路径。这应该可以解决错误。

希望它可以帮助另一个陷入困境的开发人员。

# c++ - 中继器问题:(

> ID：10274695
> 
> 赞同：0
> 
> 时间：2012-04-23T04:11:25.200
> 
> 标签：c++, string

我在这里要做的是编写一个函数，该函数`repeat`接受一个字符串和一个正整数 n 并返回该字符串重复 n 次。因此`repeat("fho", 3)`将返回字符串“hohoho”。但是，下面的测试程序运行但不显示结果或挂起。我试图添加一个系统暂停，但没有帮助。我错过了什么？

```
#include <string>
#include <iostream>
std::string repeat( const std::string &word, int times ) {
   std::string result ;
   result.reserve(times*word.length()); // avoid repeated reallocation
   for ( int a = 0 ; a < times ; a++ ) 
      result += word ;
   return result ;
}

int main( ) {
   std::cout << repeat( "Ha" , 5 ) << std::endl ;
   return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T04:43:47.693

你的代码似乎工作，但我个人认为我会写它有点不同：

```
std::string repeat(std::string const &input, size_t reps) { 
    std::ostringstream result;

    std::fill_n(
        std::ostream_iterator<std::string>(result), 
        reps, 
        input);

    return result.str();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:43:21.043

我必须同意上面的 Naveen。在在线编译器中尝试此代码时没有问题。请参阅[http://codepad.org/PwDtkUEu](http://codepad.org/PwDtkUEu) ![在此处输入图像描述](../Images/27ae079997c5eb9843aa4ea633281625.png) 您遇到的任何问题都必须由您的编译器引起。尝试重建您的项目。

# ms-access - combobox cascade effect not working for different rows

> ID：10274700
> 
> 赞同：0
> 
> 时间：2012-04-23T04:11:40.123
> 
> 标签：ms-access, combobox, ms-access-2007, filtering, vba

I have two comboboxes on a subform.The first combobox is used to populate the second combobox. These are placed in the detail section of the form. I want them to work this way:when I select any value from the first combobox, I want the second combobox of the same row to get populated by relevant value.

As of now, I have tried to implement this and as I select any value from the first combobox of row 1 I see the second combobox of the same row gets populated but as I go on selecting values from the first set of comboboxes I see that the values in the second set of the comboboxes above changing or becoming null.

Here's the code:

The 1st combobox is cboRCMTask:

```
Private Sub cboRCMTask_AfterUpdate() 
    Me.cboRCMTaskOptions.RowSource = "SELECT ID, RCMTaskOptions FROM tblRCMTaskOptions WHERE RCM_ID=" & Me.cboRCMTask.Column(0) & ";" 
    Me.cboRCMTaskOptions = Me.cboRCMTaskOptions.ItemData(0) 
    Me.cboRCMTaskOptions.Requery 
End Sub 
```

cboRCMTaskOptions is the second combobox.

The form_current event:

```
Private Sub Form_Current() 
    Me.cboRCMTask.RowSource = "SELECT ID, RCMTask FROM tblRCMTask;" 
    If IsNull(txtRCM_ID) Then 
        Me.cboRCMTask = Me.cboRCMTask.ItemData(0) 
    End If 
    Me.cboRCMTaskOptions.RowSource = "SELECT ID, RCMTaskOptions FROM tblRCMTaskOptions WHERE RCM_ID=" &    Me.cboRCMTask.Column(0) & ";" 
    If IsNull(txtRCMOption_ID) Then 
        Me.cboRCMTaskOptions = Me.cboRCMTaskOptions.ItemData(0) 
    End If 
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:21:44.810

根据您的描述，您使用的是连续形式。虽然看起来连续表格有很多行，但从编码的角度来看，您可以认为它只有一行，即当前行。我怀疑组合 2 的控制源是组合中隐藏的数字列，当您更改组合的行源时，无法再找到可见行，因此无法显示。您要么必须提供一个弹出式表单进行编辑，要么提供一个文本框来存储表单的值，并提供一个稍微狡猾的组合来编辑该值。您可以通过条件格式来改善外观。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T04:50:52.117

在您的第一段代码中，将代码转移到 on_click 事件。我不确定您要通过引用 ItemData 来实现什么，但我认为没有必要，请注释掉该行。

同样，Form_current 事件中的倒数第三行，替换为重新查询。

# twitter-bootstrap - Twitter bootstrap - open modal over an already opened modal

> ID：10274710
> 
> 赞同：24
> 
> 时间：2012-04-23T04:12:36.487
> 
> 标签：twitter-bootstrap, modal-dialog, confirmation

Here's my scenario: I'm opening a modal window with some record details, and I've a "Delete" button. When user clicks on this button, I need to show a "confirmation" modal above/over the existing modal (asking "are you sure?"), but when this confirmation modal is showed, it doesn't block the "details" first modal (behind).

Does anyone know how can I do it?

Thanks!

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-02-12T17:46:52.523

您需要做的就是将确认模式的标记放在代码中低于详细信息模式的位置。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-05-23T23:12:16.563

这很容易做到。您已经打开的模式中的链接必须如下所示：

```
<a href="NEW URL" data-dismiss="modal" data-toggle="modal" data-target="#newModal">Anchor text</a> 
```

**data-dismiss="modal"** -> 将关闭模态 =***这就是诀窍！！！！***
data-toggle="modal" -> 将打开新对话框

享受！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-11T16:35:50.973

单击#deleteButton 时只需隐藏#modal 并显示#modal2

```
$("#deleteButton").click(function() {
$('#myModal').modal('hide')
$('#myModal2').modal('show')    
}); 
```

这是一个工作示例：http: [//jsfiddle.net/baptme/nuUzN/14/](http://jsfiddle.net/baptme/nuUzN/14/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-06-19T13:13:13.453

向第二个模态添加 z-index 怎么样？喜欢：

```
<div class="modal fade" style="z-index:1051">modal content here...</div> 
```

如果值 1051 不起作用，请尝试更高的数字，例如。引导程序 5 为 1061。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-17T14:52:25.547

如果你想将第一个模态保留在后面，你必须做几件事。请注意，引导程序不支持它（使用引导程序 4.5）。

正如@fedda 所说，您需要在模态元素上指定一个 z-index 以使其超过第一个（默认值为 1050），然后您还必须设置背景的 z-index（一切都变暗模态的背面）要超过第一个，最后，如果您的第一个模态可以滚动（大模态或小屏幕），则必须在第二个模态关闭时将滚动重新配置为第一个模态。

```
<div id="modal2" class="modal fade" style="z-index:1055">modal content here...</div> 
```

然后在脚本中：

```
$("#modal2").on("hidden.bs.modal", () => 
    {$("#modalintheback").data("bs.modal")._setScrollbar();}
$("#modal2").modal();
$("#modal2").next(".modal-backdrop").attr("style", "z-index:1054;"); 
```

# html - 编写移动站点初始方法

> ID：10274726
> 
> 赞同：1
> 
> 时间：2012-04-23T04:15:23.967
> 
> 标签：html, css, mobile

我正在编写基于宽度为 640 像素的设计的移动专用网站 (iemexample.com)。

我如何开始编写移动网站的代码：

1.  元视口
2.  基于像素的宽度

我应该使用哪个视口？我在网上看到了很多关于以下差异的争论：

```
 <meta name="viewport" content="width=device-width, user-scalable=no"> 
```

和

```
<meta name="viewport" content="width=device-width, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;"> 
```

另外，我是按百分比设置正文宽度还是将其设置为移动设备的固定宽度，例如 320 像素？如何将设计为宽度为 640 像素的设计正确显示为 320 像素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T13:30:11.523

我实际上只会使用以下内容：

我想您仍然可以将宽度设置为设备特定的宽度，以及初始和最大比例。

老实说，我不认为包含用户可扩展性有什么不同。

我已经在 iPhone、Android 和 Windows Phone 上测试了上述内容，它就像一个魅力。

# java - java: 如何实现StringBuilder的replaceAll方法

> ID：10274727
> 
> 赞同：1
> 
> 时间：2012-04-23T04:15:25.180
> 
> 标签：java

我用 matcher 实现了 replaceAll() 方法，它用“”替换所有标点符号。但它总是抛出异常：“ **java.lang.StringIndexOutOfBoundsException: String index out of range: 6** ”

```
private static StringBuilder filterPunctuation(StringBuilder sb){
    Pattern pattern =  Pattern.compile("(\\.)");
    Matcher matcher = pattern.matcher(sb);
    while(matcher.find()){
        sb.replace(matcher.start(), matcher.end(), "");  
// if sb.replace(matcher.start(),matcher.end()," "), it wil be right, but I want replace all punction with ""
    }
    return sb;
}

public static void main(String[] args){
    System.out.println(filterPunctuation(new StringBuilder("test.,.")));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T04:19:21.083

如果您要在循环内更改 StringBuilder（尤其是通过删除字符来更改其长度），您将需要获得一个新的 Matcher（因为旧的 Matcher 将继续查看原始缓冲区或两者的不一致混合）。

[看看 Jon Skeet 是如何做到的](https://stackoverflow.com/a/3472705/14955)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T04:52:31.500

我会假设这可以解决问题

```
private static void filterPunctuation(StringBuilder sb)
{
    int l=sb.length();
    for (int i=0; i<l; i++) if (sb.charAt(i)=='.') sb.deleteCharAt(l--);
} 
```

无需返回它，因为您正在处理相同的参考。

# c - 当 ICANON 在非规范中时如何绕过没有退格键

> ID：10274730
> 
> 赞同：3
> 
> 时间：2012-04-23T04:16:15.777
> 
> 标签：c, echo, termios

我正在使用我在上一个问题中建议的 termios ，但现在询问是否有**办法让退格键在非规范模式下使用 termios 时工作**。我正在使用 termios 没有`echo`如果我使用`&=ECHO`并且`&=ICANON`这是我想要的结果，则键盘输入会在按下并显示键后立即发送到 putchar() 但如果我执行相反的操作，则`'\b'`键显示为`hex`在按下输入之前我看不到文本，但`'\b'`可以。我查了[说明书](http://www.mkssoftware.com/docs/man5/struct_termios.5.asp)和其他一些论坛，他们说“不可能只是不要犯任何错误”，这是有道理的，因为当我在 Ubuntu 的终端中没有正确输入密码时，我无法退格并更改它. 但我确保我没有错过手册中的任何内容。

代码是从标准输入获取输入而不显示空行。

```
#include <unistd.h>
#include <termios.h>
#include <errno.h>
#include <stdio.h>
#define ECHOFLAGS (ECHO)

int setecho(int fd, int onflag);
int first_line(int *ptrc);

int main(void){

struct termios old;
tcgetattr(STDIN_FILENO,&old);

setecho(STDIN_FILENO,0);
    int c;
    while((c = getchar())!= 4) //no end of file in non-canionical match to control D
        first_line(&c);
tcsetattr(STDIN_FILENO,&old);    
return 0;

    }

int setecho(int fd, int onflag){
    int error;
    struct termios term;

    if(tcgetattr(fd, &term) == -1)
        return -1;
    if(onflag){ printf("onflag\n");
        term.c_lflag &= ECHOFLAGS ; // I know the onflag is always set to 0 just 
        term.c_lflag &=ICANON;      // testing at this point
    }
    else{ printf("else\n");
        term.c_lflag &= ECHO;
        term.c_lflag &=ICANON;

    }

    while (((error = tcsetattr(fd, TCSAFLUSH, &term)) ==-1 && (errno == EINTR)))
            return error;
}

int first_line(int *ptrc){
    if (*ptrc != '\n' && *ptrc != '\r'){
            putchar(*ptrc);
        while (*ptrc != '\n'){
            *ptrc = getchar();
            putchar(*ptrc);
            }

    }
    else return 0;

    return 0;
} 
```

谢谢拉克兰

PS 在我的研究中，我注意到有人说 Termios 不是“标准 C”，这是因为它依赖于系统吗？（仅用于评论）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T07:26:59.843

你希望这如何工作？如果输入字符立即发送到您的程序，那么当接收到退格字符时，终端处理退格就为时已晚 - 您的程序*已经看到*前一个字符，因此无法收回。

例如，假设用户按下`A`。您的程序将接收`'A'`并`getchar()`处理它。现在用户按下`backspace`- 现在终端应该做什么？

因此，这意味着您可以在非规范模式下处理退格的唯一地方是您的程序本身。当您从 接收`'\b'`字符时`getchar()`，您可以对其进行特殊处理（就像您对 进行特殊处理一样`'\n'`） - 例如，从缓冲区中删除最近输入的字符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-02T19:52:52.073

It's implementation-dependent. On my machine, pressing backspace led to the byte 127 being read by read(). This code worked on my machine.

```
#include <unistd.h>
#include <stdio.h>
#include <termios.h>
#include <string.h>
#include <stdlib.h>

#define MAXBUFSIZE (10000U)
#define DEL (127)

int main(void) {
    char buf[MAXBUFSIZE];
    char c;
    size_t top;
    struct termios curterm;

    tcgetattr(STDIN_FILENO, &curterm);
    curterm.c_lflag &= ~(ICANON| ECHO);
    curterm.c_cc[VTIME] = 0;
    curterm.c_cc[VMIN] = 1;
    tcsetattr(STDIN_FILENO, TCSANOW, &curterm);

    top = 0;
    while (read(STDIN_FILENO, &c, sizeof c) == 1) {
        switch (c) {
            case DEL:
                if (top) {
                    --top;
                    const char delbuf[] = "\b \b";
                    write(STDOUT_FILENO, delbuf, strlen(delbuf));
                }
                break;
            case '\n':
                write(STDOUT_FILENO, &c, sizeof c);
                write(STDOUT_FILENO, buf, top);
                top = 0;
                break;
            default:
                buf[top++] = c;
                write(STDOUT_FILENO, &c, sizeof c);
                break;
         }
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-08T18:59:02.890

当用户按下退格键时，应用程序会收到一些控制代码。应用程序必须解释控制代码并从其缓冲区（应用程序缓冲区，因为您没有使用内核缓冲区）中取出一个字符。如果应用程序正在执行任何类型的回显（例如：回显星号代替密码字符），则它必须发送一些其他控制代码来将光标向左移动并清除最后一个星号。

收到的删除或退格代码以及您发送的移动光标的代码都取决于用户所拥有的终端类型，因此在您执行任何此类游戏之前，您还必须检测终端类型。大多数程序员不想花时间阅读数百种不同类型终端的手册，所以他们通常使用一个库来隐藏所有这些。一个这样的库是curses。

# facebook - Facebook graph api上传照片错误

> ID：10274731
> 
> 赞同：1
> 
> 时间：2012-04-23T04:16:25.197
> 
> 标签：facebook, facebook-graph-api, upload, photo

我有这个代码...

```
require_once "facebook.php";
$app_id = "xxxxxx";
$app_secret = "xxxxx";
$facebook = new Facebook(array(
    "appId" => $app_id,
    "secret" => $app_secret,
    "cookie" => true
));

$random_file = rand();

copy('http://alylores.x10.mx/gd/clean2/pic.php', 'temp/'.$random_file.'.jpg');
$img = realpath("temp/".$random_file.".jpg");
// allow uploads
$facebook->setFileUploadSupport("http://" . $_SERVER['SERVER_NAME']);
// add a photo
$photo = $facebook->api("/".$_POST['fid']."/photos?access_token=".$_POST['foauth'],"POST",
    array(
            "source" => "@" . $img,
            "message" => "This photo came from my app."
    )
);

echo "<script type='text/javascript'>parent.iframe_callback();</script>";

unlink('temp/'.$random_file.'.jpg'); 
```

**我正在尝试将照片从IFRAME** .... facebook上传到用户的照片中，`id`并`oauth_token`使用来自父窗口的发布请求传递..

当我检查时......它返回这个......

```
Fatal error:  Uncaught OAuthException: A user access token is required to request this resource. 
thrown in /home/alylores/public_html/gd/clean2/base_facebook.php on line 1033 
```

但是当我检查是否 存在`oauth_token`确实存在....`echo()``oauth_token`

有人可以帮我解决这个问题吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T01:56:06.987

```
array( "access_token" => $_POST["foauth"], "source" => "@" . $img, "message" => "This photo     came from my app." ) 
```

# android - 使用 getReceiverInfo 时出现空指针异常

> ID：10274736
> 
> 赞同：0
> 
> 时间：2012-04-23T04:17:34.913
> 
> 标签：android, broadcastreceiver

我无法获取接收方文件的元数据中指定的值，我得到了一个空指针异常。

在我指定的清单文件中

```
<receiver android:name=".SmsReceiver" >
            <intent-filter android:priority="10">

                <action
                    android:name="android.provider.Telephony.SMS_RECEIVED"
                    android:enabled="true" />
                <meta-data android:name="Algorithm" android:value="AES"/>
            </intent-filter>
        </receiver> 
```

并在接收者 iam 中指定

```
public class SmsReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // ---get the SMS message passed in---
        Bundle bundle = intent.getExtras();
         ActivityInfo appi = null;
        try {
            appi = context.getPackageManager().getReceiverInfo(new ComponentName(context,"intgafaes.mobileafaes.androidafaes.securesms.ADDFriendSmsReceiver"), PackageManager.GET_META_DATA);
        } catch (NameNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }   

        Bundle bundle1 = appi.metaData;

        String value = bundle1.getString("Algorithm");
        System.out.println("Value is "+value);

        if(value.equals("AES"))
        {
            System.out.println("entered into onRecieve");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:19:22.597

当您检索值时，您应该始终进行空检查..

```
if(appi != null){
Bundle bundle1 = appi.metaData;
} 
```

我认为它无法获得**"intgafaes.mobileafaes.androidafaes.securesms.ADDFriendSmsReceiver"**。

..你的try catch在这段代码中没有用..

它什么都不做......至少它应该有return语句，这样就不会发生异常......

```
public class SmsReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // ---get the SMS message passed in---
        Bundle bundle = intent.getExtras();
         ActivityInfo appi = null;
        try {
            appi = context.getPackageManager().getReceiverInfo(new ComponentName(context,"intgafaes.mobileafaes.androidafaes.securesms.ADDFriendSmsReceiver"), PackageManager.GET_META_DATA);
        } catch (NameNotFoundException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
            return;
        }   

        Bundle bundle1 = appi.metaData;

        String value = bundle1.getString("Algorithm");
        System.out.println("Value is "+value);

        if(value.equals("AES"))
        {
            System.out.println("entered into onRecieve");
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:39:26.717

在接收器中，我必须在意图过滤器标签之后声明元数据标签，然后我可以使用上面相同的代码访问数据

```
<receiver android:name=".SmsReceiver" >
            <intent-filter android:priority="10">

                <action
                    android:name="android.provider.Telephony.SMS_RECEIVED"
                    android:enabled="true" />

            </intent-filter>
             <meta-data android:name="Algorithm" android:value="AES"/>
        </receiver> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T21:21:51.020

您已在 AndroidManifest 中指定此元素的元数据：

```
<receiver android:name=".SmsReceiver" > 
```

如果您想获取此元素的 ActivityInfo，您应该调用：

```
appi = context.getPackageManager().getReceiverInfo(
        new ComponentName(context, "<yourrootpackage>.SmsReceiver"),
        PackageManager.GET_META_DATA); 
```

如果您在内部调用它`SmsReceiver`（就像您在提供的代码中所做的那样），您可能希望避免使用硬编码字符串，而是执行以下操作：

```
appi = context.getPackageManager().getReceiverInfo(
        new ComponentName(context, this.getClass()),
        PackageManager.GET_META_DATA); 
```

还是您使用完全不同的类名查询信息只是复制粘贴混淆？

# tfs - 增量分析数据库同步作业集的开始时间如何

> ID：10274740
> 
> 赞同：0
> 
> 时间：2012-04-23T04:17:57.283
> 
> 标签：tfs

“增量分析数据库同步”作业（TFS 用于更新[SQL Server 分析服务多维数据集](http://msdn.microsoft.com/en-us/library/ms244706.aspx)的作业之一）仅具有可以设置作业运行频率的间隔（通过[IncrementalProcessIntervalSeconds 设置](http://msdn.microsoft.com/en-us/library/ff458305.aspx)）

有没有办法指定这个作业运行的初始时间？

我想确保作业计划与每小时备份不一致。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T07:13:08.360

[你在这里](http://estebanfg.blogspot.fr/2011/02/controlling-data-warehouse-refresh-in.html)有你的答案MSDN 上的[这个页面](http://msdn.microsoft.com/en-us/library/ms244694.aspx) 也很有用。

您必须使用 DailyFullProcessingTime 作为 settingId 和 newValue 调用 WebService 的 ChangeSetting webmethod，这是您要设置的 DateTime 的字符串。

通过调用 GetSettingsResponse 检查结果。

# php - iOS 应用从服务器获取数据

> ID：10274749
> 
> 赞同：1
> 
> 时间：2012-04-23T04:19:52.413
> 
> 标签：php, ios, firebird

我将编写一个从服务器查询数据的 IOS 应用程序。以这种方式请求和检索数据的正确方法是什么。我正在阅读的书籍似乎都没有涵盖它。我想服务器会使用 PHP 之类的东西，它可以访问数据库。iOS 应用程序会执行 XML-RPC 之类的操作，并且我编写 php 函数来监听、检索和响应吗？XML-RPC 是否仍然是最流行的解决方案，还是我还没有使用过更现代的东西？

iOS 应用程序最终将尝试从 Firebird 数据库中获取信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:24:35.623

好吧，如果您正在创建一个 iOS 5 应用程序，那么您很幸运，您可以非常轻松地使用 RESTful Web 服务：

```
NSString* response = [NSString stringWithContentsOfURL:<url pointing to your server> error:&error]; 
```

然后您可以使用`NSJsonSerialization`将响应转换为属性列表。还有一些用于解析 XML 文件的便捷方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:27:14.663

您可以使用如下各种方法：

1.  简单的获取或发布请求。
2.  XML SOAP 服务。
3.  REST JSON 服务。

这取决于您要检索的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:30:09.013

我强烈建议研究[ASIHTTPRequest](http://allseeing-i.com/ASIHTTPRequest/)。

它有惊人的记录，非常强大且易于上手。

下载文件并将它们拖放到您的项目中。导入 ASIHTTPRequest.h。然后你可以做所有这些 [http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

我想我应该声明开发人员不再支持该项目，但是，它的效果非常好，而且由于它被广泛使用，我敢肯定，如果将来它出现重大问题，有人会冒昧修复它并将其放在 github 上供所有人使用。

# java - Java Swing - 在带有线条边框的 TextArea 上设置边距

> ID：10274750
> 
> 赞同：6
> 
> 时间：2012-04-23T04:20:20.927
> 
> 标签：java, swing, textarea, margins, insets

正如标题所说，我只是想在带有 LineBorder 集的 TextArea 上设置边距（提供一些填充）。不设置边框， .setMargins 工作正常。这是特定的代码块。

```
aboutArea = new JTextArea("program info etc.....");

Border border = BorderFactory.createLineBorder(Color.BLACK);

aboutArea.setSize(400, 200);
aboutArea.setBorder(border);
aboutArea.setEditable(false);
aboutArea.setFont(new Font("Verdana", Font.BOLD, 12));

add(aboutArea); 
```

我已经尝试了其中的每一个：

```
aboutArea.setMargins(10,10,10,10);
.getBorders(aboutArea).set(10,10,10,10);
UIManager.put("aboutArea.margin", new Insets(10, 10, 10, 10)); 
```

但在我应用边框后没有任何影响边距，填充始终为 0。任何想法如何在带有边框的 textArea 上设置填充？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-23T05:26:47.777

如果您尝试添加[CompoundBorder](http://docs.oracle.com/javase/7/docs/api/javax/swing/BorderFactory.html#createCompoundBorder%28javax.swing.border.Border,%20javax.swing.border.Border%29)怎么办，这不会吗，这会给您几乎相同的东西

```
JTextArea tarea = new JTextArea("program info etc.");
Border border = BorderFactory.createLineBorder(Color.BLACK);
tarea.setBorder(BorderFactory.createCompoundBorder(border, 
            BorderFactory.createEmptyBorder(10, 10, 10, 10))); 
```

![检查中间的 JTextArea 作为输出](../Images/292c63d0f9ff7d9d7ae89ee049a4f2ff.png)

# android - 远程客户端无响应：使用 asmack 传输文件时出错

> ID：10274751
> 
> 赞同：26
> 
> 时间：2012-04-23T04:20:38.073
> 
> 标签：android, xmpp, smack, asmack

使用 asmack 接收文件时出现问题。在这里我粘贴错误和我发送和接收日志的数据包

```
// error
04-21 19:21:05.109: WARN/System.err(7401): Error in execution:
04-21 19:21:05.109: WARN/System.err(7401):   -- caused by: java.util.concurrent.ExecutionException:
04-21 19:21:05.109: WARN/System.err(7401):   -- caused by: No response from remote client:
04-21 19:21:05.109: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.IncomingFileTransfer.negotiateStream(IncomingFileTransfer.java:199)
04-21 19:21:05.109: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.IncomingFileTransfer.access$100(IncomingFileTransfer.java:47)
04-21 19:21:05.109: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.IncomingFileTransfer$1.run(IncomingFileTransfer.java:124)
04-21 19:21:05.109: WARN/System.err(7401):     at java.lang.Thread.run(Thread.java:1019)
04-21 19:21:05.109: WARN/System.err(7401): Nested Exception:
04-21 19:21:05.109: WARN/System.err(7401): java.util.concurrent.ExecutionException:
04-21 19:21:05.109: WARN/System.err(7401):   -- caused by: No response from remote client:
04-21 19:21:05.109: WARN/System.err(7401):     at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:234)
04-21 19:21:05.109: WARN/System.err(7401):     at java.util.concurrent.FutureTask.get(FutureTask.java:91)
04-21 19:21:05.109: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.IncomingFileTransfer.negotiateStream(IncomingFileTransfer.java:193)
04-21 19:21:05.109: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.IncomingFileTransfer.access$100(IncomingFileTransfer.java:47)
04-21 19:21:05.109: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.IncomingFileTransfer$1.run(IncomingFileTransfer.java:124)
04-21 19:21:05.109: WARN/System.err(7401):     at java.lang.Thread.run(Thread.java:1019)
04-21 19:21:05.109: WARN/System.err(7401): Caused by:
04-21 19:21:05.109: WARN/System.err(7401):   -- caused by: No response from remote client:
04-21 19:21:05.167: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.FaultTolerantNegotiator.createIncomingStream(FaultTolerantNegotiator.java:113)
04-21 19:21:05.167: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.IncomingFileTransfer$2.call(IncomingFileTransfer.java:186)
04-21 19:21:05.217: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.IncomingFileTransfer$2.call(IncomingFileTransfer.java:183)
04-21 19:21:05.217: WARN/System.err(7401):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
04-21 19:21:05.217: WARN/System.err(7401):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
04-21 19:21:05.236: WARN/System.err(7401):     at org.jivesoftware.smackx.filetransfer.IncomingFileTransfer.negotiateStream(IncomingFileTransfer.java:190)
04-21 19:21:05.236: WARN/System.err(7401):     ... 3 more

// packets sent and received:
04-21 19:20:53.177: INFO/System.out(7401): 07:20:53 PM RCV  (1079262448): <presence from='nirav@mychathost/Smack' to='rtest@mychathost/Smack' id='fDXhN-22'><c xmlns='http://jabber.org/protocol/caps' hash='sha-1' node='http://www.igniterealtime.org/projects/smack/' ver='zAGnwwThW7wuhrojiPg9I4Spwms='/></presence>
04-21 19:20:54.479: INFO/System.out(7401): 07:20:54 PM RCV  (1079262448): <presence from='nirav@mychathost/Smack' to='rtest@mychathost/Smack' id='fDXhN-23'><c xmlns='http://jabber.org/protocol/caps' hash='sha-1' node='http://www.igniterealtime.org/projects/smack/' ver='zAGnwwThW7wuhrojiPg9I4Spwms='/></presence>
04-21 19:20:54.602: INFO/System.out(7401): 07:20:54 PM RCV  (1079262448): <iq from='nirav@mychathost/Smack' to='rtest@mychathost/Smack' id='fDXhN-24' type='set'><si xmlns='http://jabber.org/protocol/si' id='jsi_5262843704368872277' profile='http://jabber.org/protocol/si/profile/file-transfer'><file xmlns='http://jabber.org/protocol/si/profile/file-transfer' name='rails.png' size='6646'><desc>rails.png</desc></file><feature xmlns='http://jabber.org/protocol/feature-neg'><x xmlns='jabber:x:data' type='form'><field var='stream-method' type='list-multi'><option><value>http://jabber.org/protocol/bytestreams</value></option><option><value>http://jabber.org/protocol/ibb</value></option></field></x></feature></si></iq>
04-21 19:20:54.639: DEBUG/Lisner Called(7401): Incoming Listner
04-21 19:20:54.658: DEBUG/file name(7401): rails.png
04-21 19:20:54.658: DEBUG/file status(7401): Initial
04-21 19:20:54.658: DEBUG/file size(7401): 6646
04-21 19:20:54.684: DEBUG/file path(7401): /mnt/sdcard/DCIM/Camera/rails.png
04-21 19:20:54.684: DEBUG/Receive(7401): before receive
04-21 19:20:54.712: DEBUG/R1(7401): after receive
04-21 19:20:54.772: INFO/System.out(7401): 07:20:54 PM SENT (1079262448): <iq id="fDXhN-24" to="nirav@mychathost/Smack" from="rtest@mychathost/Smack" type="result"><si xmlns="http://jabber.org/protocol/si"><feature xmlns="http://jabber.org/protocol/feature-neg"><x xmlns="jabber:x:data" type="submit"><field var="stream-method"><value>http://jabber.org/protocol/bytestreams</value><value>http://jabber.org/protocol/ibb</value></field></x></feature></si></iq>
04-21 19:20:55.724: INFO/transfere file(7401): receiving file status Negotiating Stream progress: 0.0
04-21 19:20:56.765: INFO/transfere file(7401): receiving file status Negotiating Stream progress: 0.0
04-21 19:20:57.810: INFO/transfere file(7401): receiving file status Negotiating Stream progress: 0.0
04-21 19:20:58.330: INFO/System.out(7401): 07:20:58 PM RCV  (1079262448): <iq from='nirav@mychathost/Smack' to='rtest@mychathost/Smack' id='fDXhN-26' type='set'><query xmlns='http://jabber.org/protocol/bytestreams' sid='jsi_5262843704368872277' mode='tcp'><streamhost jid='nirav@mychathost/Smack' host='127.0.0.1' port='7777'/></query></iq>
04-21 19:20:58.425: INFO/System.out(7401): 07:20:58 PM SENT (1079262448): <iq id="fDXhN-26" to="nirav@mychathost/Smack" from="rtest@mychathost/Smack" type="error"><query xmlns="http://jabber.org/protocol/bytestreams" sid="jsi_5262843704368872277" mode = "tcp"><streamhost jid="nirav@mychathost/Smack" host="127.0.0.1" port="7777"/></query><error code="404" type="CANCEL"><item-not-found xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/><text xml:lang="en" xmlns="urn:ietf:params:xml:ns:xmpp-stanzas">Could not establish socket with any provided host</text></error></iq>
04-21 19:20:58.874: INFO/transfere file(7401): receiving file status Negotiating Stream progress: 0.0
04-21 19:20:59.943: INFO/transfere file(7401): receiving file status Negotiating Stream progress: 0.0
04-21 19:21:00.765: INFO/System.out(7401): 07:21:00 PM RCV  (1079262448): <iq from='nirav@mychathost/Smack' to='rtest@mychathost/Smack' id='fDXhN-27' type='set'><open xmlns='http://jabber.org/protocol/ibb' block-size='4096' sid='jsi_5262843704368872277' stanza='iq'/></iq>
04-21 19:21:00.804: INFO/System.out(7401): 07:21:00 PM SENT (1079262448): <iq id="fDXhN-27" to="nirav@mychathost/Smack" from="rtest@mychathost/Smack" type="error"><error code="501" type="CANCEL"><feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq>
04-21 19:21:00.978: INFO/transfere file(7401): receiving file status Negotiating Stream progress: 0.0
04-21 19:21:02.017: INFO/transfere file(7401): receiving file status Negotiating Stream progress: 0.0
04-21 19:21:03.039: INFO/transfere file(7401): receiving file status Negotiating Stream progress: 0.0
04-21 19:21:04.071: INFO/transfere file(7401): receiving file status Negotiating Stream progress: 0.0
04-21 19:21:05.109: INFO/transfere file(7401): receiving file status Error progress: 0.0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-26T05:57:18.417

老兄只需复制并粘贴以下代码，

```
private void receiveFile(XMPPConnection connection2) {
    // TODO Auto-generated method stub
    if(connection2 != null){
        ServiceDiscoveryManager sdm =      ServiceDiscoveryManager.getInstanceFor(connection2);
        if (sdm == null){
            sdm = new ServiceDiscoveryManager(connection2);
        }
        sdm.addFeature("http://jabber.org/protocol/disco#info");
        sdm.addFeature("jabber:iq:privacy");
        FileTransferManager manager = new FileTransferManager(connection2);

        manager.addFileTransferListener(new FileTransferListener() {

            public void fileTransferRequest(final FileTransferRequest request) {
                new Thread(){

                    @Override
                    public void run() {
                        IncomingFileTransfer transfer = request.accept();                           
                        File mf = Environment.getExternalStorageDirectory();                
                        final File file = new File(mf.getAbsoluteFile() +"/"+ transfer.getFileName());
                        try{
                            transfer.recieveFile(file);
                            while(!transfer.isDone()){
                               try{
                                  Thread.sleep(1000);
                               }
                               catch (Exception e) {
                                  Log.e("", e.getMessage());
                               }
                               if(transfer.getStatus().equals(Status.error)) {
                                  Log.e("ERROR!!! ", transfer.getError() + "");
                               }
                               if(transfer.getException() != null) {
                                  transfer.getException().printStackTrace();
                               }
                            }
                            handler.post(new Runnable() {

                                @Override
                                public void run() {
                                    // TODO Auto-generated method stub
                                    String xMsg = textViewSent.getText().toString();
                                    String newMessage = "File Received at "+file.getAbsolutePath();
                                    textViewSent.setText("\n"+xMsg+"\n"+newMessage);
                                }
                            });
                         }
                        catch (Exception e) {
                            e.printStackTrace();
                        }                           
                     };
                   }.start();
            }
        });
    } 
```

请记得投票...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T10:06:29.813

从您的日志中：

```
04-21 19:20:58.330: INFO/System.out(7401): 07:20:58 PM RCV  (1079262448): <iq from='nirav@mychathost/Smack' to='rtest@mychathost/Smack' id='fDXhN-26' type='set'><query xmlns='http://jabber.org/protocol/bytestreams' sid='jsi_5262843704368872277' mode='tcp'><streamhost jid='nirav@mychathost/Smack' host='127.0.0.1' port='7777'/></query></iq>
04-21 19:20:58.425: INFO/System.out(7401): 07:20:58 PM SENT (1079262448): <iq id="fDXhN-26" to="nirav@mychathost/Smack" from="rtest@mychathost/Smack" type="error"><query xmlns="http://jabber.org/protocol/bytestreams" sid="jsi_5262843704368872277" mode = "tcp"><streamhost jid="nirav@mychathost/Smack" host="127.0.0.1" port="7777"/></query><error code="404" type="CANCEL"><item-not-found xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/><text xml:lang="en" xmlns="urn:ietf:params:xml:ns:xmpp-stanzas">Could not establish socket with any provided host</text></error></iq>
....
04-21 19:21:00.765: INFO/System.out(7401): 07:21:00 PM RCV  (1079262448): <iq from='nirav@mychathost/Smack' to='rtest@mychathost/Smack' id='fDXhN-27' type='set'><open xmlns='http://jabber.org/protocol/ibb' block-size='4096' sid='jsi_5262843704368872277' stanza='iq'/></iq>
04-21 19:21:00.804: INFO/System.out(7401): 07:21:00 PM SENT (1079262448): <iq id="fDXhN-27" to="nirav@mychathost/Smack" from="rtest@mychathost/Smack" type="error"><error code="501" type="CANCEL"><feature-not-implemented xmlns="urn:ietf:params:xml:ns:xmpp-stanzas"/></error></iq> 
```

字节流[传输方法](http://xmpp.org/extensions/xep-0065.html)失败，因为只配置了本地 (127.0.0.1) 流主机。[带内字节流](http://xmpp.org/extensions/xep-0047.html)失败，因为对方不支持IBB。

你应该：

*   配置充当代理的有效流主机（[XEP-65 第 6 节“中介连接”](http://xmpp.org/extensions/xep-0065.html#mediated)）
*   如果可能，启用 IBB

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T08:22:58.970

如果没有看到您的代码，很难评估问题。但是，我最初遇到了和你一样的问题，因为我使用的是`InputStream stream = transfer.recieveFile();`. 这是通过使用修复的`transfer.recieveFile(new File(getExternalFilesDir(null), transfer.getFileName()));`。尝试像这样添加侦听器...

```
fileTransferManager.addFileTransferListener(new FileTransferListener() {
    @Override
    public void fileTransferRequest(FileTransferRequest request) {
        try {
             IncomingFileTransfer transfer = request.accept();
             transfer.recieveFile(new File(getExternalFilesDir(null), transfer.getFileName()));
             String line;
             BufferedReader br = new BufferedReader(new FileReader(new File(getExternalFilesDir(null), transfer.getFileName())));
             while ((line = br.readLine()) != null) {
                 System.out.println(line);
             }
        } catch (Exception e) {
                e.printStackTrace();
        }
    }
}); 
```

# android - 如何从连接类文件中调用连接检查方法？[安卓]

> ID：10274759
> 
> 赞同：0
> 
> 时间：2012-04-23T04:22:24.057
> 
> 标签：android, performance, nullpointerexception

如何从连接类文件中调用连接检查方法？[安卓]

比如代码@连接类文件

```
public class ConnectivityMgr {
 /*
 *@return boolean return true if the application can access the internet
 */
 public static boolean isNetworkAvailable(Context context) {
     ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
     if (connectivity != null) {
        NetworkInfo[] info = connectivity.getAllNetworkInfo();
        if (info != null) {
           for (int i = 0; i < info.length; i++) {
              if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                 return true;
              }
           }
        }
     }
     return false;
  }
} 
```

我必须做什么才能从类中调用此方法，例如，如果它在名为 final.last.test 的包下

我是否必须导入类文件并声明或类似的东西，我尝试使用

```
if ( isNetworkAvailable(getApplicationContext()) == true ) {} 
```

它给了我一个`NullPointerException`. 是“getApplicationContext()”的错误使用还是其他什么？

我尝试导入，声明 .. ，更改为 this.getApplicationContext() / this / getBaseContext() ，但它仍然不起作用。

还是需要“意图”？

我所做的是：

```
import final.last.test.ConnectivityMgr; 
ConnectivityMgr cm; 

try { 

if ( cm.isNetworkAvailable(getApplicationContext() ) 
{ //display yes } 

} Catch as (Exception e) 
{ Toast.makeText(getApplicationContext(), "Error with connectivity : " + e.getCause() + " , " + e.toString() , Toast.LENGTH_LONG).show(); 

// Log.d("Error With Connectivity : ","Failed to do something due to : " + e.getMessage()); 
```

-> 日志以前从未出现过，这就是为什么我用吐司代替。

-> Toast 显示“连接错误：null、java.lang、NullPointerException –</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:54:52.677

```
 public static boolean isNetworkAvailable(Context context) {
        boolean mBoolean = false;
        ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);
        if (connectivity != null) {
            NetworkInfo[] info = connectivity.getAllNetworkInfo();
            if (info != null) {
                for (int i = 0; i < info.length; i++) {
                    if (info[i].getState() == NetworkInfo.State.CONNECTED) {
                        mBoolean = true;
                    }
                }
            }
        }
        return mBoolean;
    } 
```

然后

```
if ( isNetworkAvailable(getApplicationContext())) {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:57:30.063

```
 URL myurl = new URL(url);
        URLConnection connection = myurl.openConnection();
        connection.setConnectTimeout(20 * 1000);
        HttpURLConnection httpConnection = (HttpURLConnection) connection;
        int responseCode = httpConnection.getResponseCode();
        if (responseCode == HttpURLConnection.HTTP_OK)
        {
            httpConnection.disconnect();
            //......

        }
        else
        {
            httpConnection.disconnect();
            throw new Exception(
                    "Http Error code: " + String.valueOf(responseCode));
        } 
```

# objective-c - 使用 NSTimer 实现指数退避的重试逻辑

> ID：10274761
> 
> 赞同：5
> 
> 时间：2012-04-23T04:22:33.167
> 
> 标签：objective-c, ios, foundation

我正在尝试使用 NSTimer 实现具有指数退避的重试逻辑。我的代码如下所示：

```
-(void)start
{
  [NSTimer scheduledTimerWithTimeInterval:0.0 target:self
    selector:@selector(startWithTimer:) userInfo:nil repeats:NO];
}

-(void)startWithTimer:(NSTimer *)timer
{
  if (!data.ready) {
    // timer.timeInterval == 0.0 ALWAYS!
    NSTimeInterval newInterval = timer.timeInterval >= 0.1 ? timer.timeInterval * 2 : 0.1;
    newInterval = MIN(60.0, newInterval);
    NSLog(@"Data provider not ready. Will try again in %f seconds.", newInterval);
    NSTimer * startTimer = [NSTimer scheduledTimerWithTimeInterval:newInterval target:self
        selector:@selector(startWithTimer:) userInfo:nil repeats:NO];
    // startTimer.timeInteval == 0.0 ALWAYS!
    return;
  }

  ...
} 
```

我遇到的问题是计时器 NSTimer scheduledTimerWithTimeInterval 似乎忽略了我提供的间隔，并始终将其设置为 0.0。关于我在这里做错了什么有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T04:50:18.660

Apple 文档`timeInterval`对`NSTimer`.

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nstimer_Class/Reference/NSTimer.html)

> 如果接收器是非重复计时器，则返回 0（即使设置了时间间隔）。

您将需要使用其他方法来跟踪计时器间隔应该是多少。我在你的课上推荐一个 iVar。

```
-(void)start
{
  _timeInterval = 0.0;
  [NSTimer scheduledTimerWithTimeInterval:_timeInterval target:self
    selector:@selector(startWithTimer:) userInfo:nil repeats:NO];
}

-(void)startWithTimer:(NSTimer *)timer
{
  if (!data.ready) {
    _timeInterval = _timeInterval >= 0.1 ? _timeInterval * 2 : 0.1;
    _timeInterval = MIN(60.0, _timeInterval);
    NSLog(@"Data provider not ready. Will try again in %f seconds.", _timeInterval);
    NSTimer * startTimer = [NSTimer scheduledTimerWithTimeInterval:_timeInterval target:self
        selector:@selector(startWithTimer:) userInfo:nil repeats:NO];
    return;
  }

  ...
} 
```

# html - Google Captcha 代码插件的参数在表单 enctype 中不可用

> ID：10274768
> 
> 赞同：0
> 
> 时间：2012-04-23T04:23:58.040
> 
> 标签：html, security, jsp, servlets

我用过谷歌验证码，效果很好。`form`也没有enctype 。我想在同一个`form`元素中上传图片。然后将 an`enctype="multipart/form-data"`添加到表单的属性中。我遇到了以下问题，我使用 JSP servlet：

**1.**

```
String challenge = request.getParameter("recaptcha_challenge_field"); 

String uresponse = request.getParameter("recaptcha_response_field"); 
```

这里的挑战和 uresponse 给出了空值，因此

```
ReCaptchaResponse reCaptchaResponse = reCaptcha.checkAnswer(remote, challenge, uresponse); 
```

给出了空指针异常。

**编辑**：我后来发现，当使用`enctype="multipart/form-data`in标记时，无法像在 Servlet 中`form`那样检索参数及其值。`request.getParameter('')`

**2.**`FileItem`然后我尝试通过以下 方式获取上述参数（挑战和uresponse）的值

```
 FileItemFactory factory = new DiskFileItemFactory();
   ServletFileUpload upload = new ServletFileUpload(factory);
   List items = null;
   items = upload.parseRequest(request);
   Iterator itr = items.iterator();                        
                    while (itr.hasNext()) {
                        FileItem item = (FileItem) itr.next();
                        if (item.isFormField()) {
                            String name = item.getFieldName();
                            System.out.println("name: " + name);
                            String value = item.getString();
                            System.out.println("value: " + value); // closing scopes   .... 
```

这些输出没有给出“recaptcha_challenge_field”和“recaptcha_response_field”的打印结果。但是 HTML 元素的其他参数和值`input`是可用的。我观察到的是，当删除表单 enctype 时，servlet 可以具有这些参数（'recaptcha_challenge_field' 和 'recaptcha_response_field'）及其值。当仅添加表单 enctype 时，servlet 中不可用的参数。（request.getParameter('recaptha challenge parameter or recaptha-response-field parameter')）。

**编辑**我检查了浏览器是否发送了这些参数（recaptha-challenge ane recaptha-response-field.）及其值，并发现浏览器可以很好地发送所有参数。问题可能出在 servlet 并在`FileItem`

我想用这个谷歌验证码上传图片（用于人工验证）。我当前的实现不起作用。有谁让我知道如何实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:43:05.617

原因在于 html 本身。当`input`type-file 为空时（用户尚未从本地 pc 中选择文件），很难或（无法完成）检索所有低于 html 元素名称的参数名称及其值（在 servelt 中）在我的问题中提到的我的场景中。

# cmake - Windows 上 CMake 的基于 LLVM 的项目库依赖项

> ID：10274770
> 
> 赞同：2
> 
> 时间：2012-04-23T04:24:13.177
> 
> 标签：cmake, llvm, mingw32, llvm-3.0

之前已经在这里问过这个问题，但我找不到适合我的解决方案。 [LLVM 项目的示例 CMakeLists.txt 文件](https://stackoverflow.com/questions/8286768/sample-cmakelists-txt-file-for-llvm-project)- 这是最初的问题。

但是，在使用 LLVM 制作项目时，我遇到了几个问题。

平台：Windows 7 编译器：MingW

1）首先，我使用的是 llvm 的 svn 版本，目前是 3.1。目前，llvm 3.0 也不存在 MingW 的二进制文件，所以我决定使用最新的本身并使用 mingw 构建它。因此，尽管构建工作正常，但我似乎无法在 bin 文件夹中找到 llvm-config perl 脚本。我尝试搜索整个目录，但我只能找到一个 llvm-config 文件夹和一个依赖文件。

2) 我尝试为 Visual Studio 2010 构建 llvm，但它不适用于 cmake，所以我不得不使用 MingW。

3）现在，这是我将库添加到 CMake 的顺序 - LLVMXCoreInfo

LLVMMipsAsmPrinter LLVMMipsCodeGen LLVMMipsInfo LLVMMBlazeAsmPrinter LLVMMBlazeCodeGen LLVMMBlazeInfo LLVMLinker LLVMipo LLVMInterpreter LLVMInstrumentation LLVMJIT LLVMExecutionEngine

LLVMMC LLVMBitWriter LLVMX86Disassembler LLVMX86AsmParser LLVMX86AsmPrinter LLVMX86CodeGen LLVMX86Info LLVMAsmParser LLVMARMAsmParser LLVMMCParser LLVMARMAsmPrinter LLVMARMCodeGen LLVMARMInfo LLVMArchive LLVMBitReader

LLVMSelectionDAG

LLVMAsmPrinter LLVMCodeGen LLVMScalarOpts LLVMInstCombine LLVMTransformUtils LLVMipa LLVMAnalysis LLVMTarget LLVMMC LLVMCore

LLVM 支持

imagehlp psapi m

4）但是，添加 InitializeNativeTarget()，开始给我链接错误，我认为这是因为依赖关系不正确。

5）我想使用 llvm_map_components_to_libraries(REQ_LLVM_LIBRARIES jit native)，因此我将它添加到我的 CMakeLists.txt INCLUDE(cmake/LLVM-Config.cmake)

但是，这不起作用。cmake/LLVM-Config.cmake:141 处的 CMake 错误（消息）：在 llvm 库列表中找不到库“jit”。

现在，这个问题真的太长了，但我基本上想问在 CMake 中最好的方法是什么。有人可以发布整个事情（对于Windows）。另外，有没有办法为 VS 2010 构建它。我尝试了 CLang 网站上的说明，但这些说明在 CMake 中给了我这个错误。

“字符串子命令 REGEX，模式 MATCH 至少需要 5 个参数来命令。”

我真的需要一些帮助来弄清楚如何让依赖项在 llvm 中工作并使用 VS 构建它。我真的很感激一些帮助。

# python - Python：优雅而有效的屏蔽列表的方法

> ID：10274774
> 
> 赞同：29
> 
> 时间：2012-04-23T04:25:27.047
> 
> 标签：python, arrays, list, masking

**例子：**

```
from __future__ import division
import numpy as np

n = 8
"""masking lists"""
lst = range(n)
print lst

# the mask (filter)
msk = [(el>3) and (el<=6) for el in lst]
print msk

# use of the mask
print [lst[i] for i in xrange(len(lst)) if msk[i]]

"""masking arrays"""
ary = np.arange(n)
print ary

# the mask (filter)
msk = (ary>3)&(ary<=6)
print msk

# use of the mask
print ary[msk]                          # very elegant 
```

结果是：

```
>>> 
[0, 1, 2, 3, 4, 5, 6, 7]
[False, False, False, False, True, True, True, False]
[4, 5, 6]
[0 1 2 3 4 5 6 7]
[False False False False  True  True  True False]
[4 5 6] 
```

如您所见，与列表相比，对数组进行屏蔽的操作更加优雅。如果你尝试使用 list 上的数组掩码方案，你会得到一个错误：

```
>>> lst[msk]
Traceback (most recent call last):
  File "<interactive input>", line 1, in <module>
TypeError: only integer arrays with one element can be converted to an index 
```

问题是为`list`s 找到一个优雅的掩码。

**更新：**
的答案`jamylak`被接受为介绍`compress`但是提到的点`Joel Cornett`使解决方案完全符合我感兴趣的所需形式。

```
>>> mlist = MaskableList
>>> mlist(lst)[msk]
>>> [4, 5, 6] 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-04-23T04:28:51.850

如果您正在使用`numpy`：

```
>>> import numpy as np
>>> a = np.arange(8)
>>> mask = np.array([False, False, False, False, True, True, True, False], dtype=np.bool)
>>> a[mask]
array([4, 5, 6]) 
```

如果你不使用你正在寻找的 numpy[`itertools.compress`](https://docs.python.org/3/library/itertools.html#itertools.compress)

```
>>> from itertools import compress
>>> a = range(8)
>>> mask = [False, False, False, False, True, True, True, False]
>>> list(compress(a, mask))
[4, 5, 6] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2018-08-13T16:02:22.763

如果您使用的是 Numpy，您可以使用 Numpy 数组轻松完成，而无需安装任何其他库：

```
>> a = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>> msk = [ True, False, False,  True,  True,  True,  True, False, False, False]
>> a = np.array(a) # convert list to numpy array
>> result = a[msk] # mask a
>> result.tolist()
[0, 3, 4, 5, 6] 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-23T04:54:45.110

由于 jamylak 已经用一个实用的答案回答了这个问题，这里是我的一个带有内置屏蔽支持的列表示例（完全没有必要，顺便说一句）：

```
from itertools import compress
class MaskableList(list):
    def __getitem__(self, index):
        try: return super(MaskableList, self).__getitem__(index)
        except TypeError: return MaskableList(compress(self, index)) 
```

用法：

```
>>> myList = MaskableList(range(10))
>>> myList
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> mask = [0, 1, 1, 0]
>>> myList[mask]
[1, 2] 
```

请注意，`compress`当数据或掩码用完时停止。如果您希望保留超出掩码长度的列表部分，您可以尝试以下操作：

```
from itertools import izip_longest

[i[0] for i in izip_longest(myList, mask[:len(myList)], fillvalue=True) if i[1]] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-03T23:57:15.297

我不认为它优雅。它很紧凑，但往往令人困惑，因为它的结构与大多数语言非常不同。

正如罗森所说的语言设计，我们花更多的时间阅读它而不是写它。一行代码的构造越模糊，对其他人来说就越容易混淆，他们可能对 Python 不熟悉，尽管他们对任何数量的其他语言都有完全的能力。

在服务代码的现实世界中，可读性每天都胜过短格式符号。就像修车一样。包含大量信息的大型图纸使故障排除变得更加容易。

对我来说，我更愿意对使用长格式的某人的代码进行故障排除

```
print [lst[i] for i in xrange(len(lst)) if msk[i]] 
```

比 numpy 短符号掩码。我不需要对特定的 Python 包有任何特殊的知识来解释它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-21T22:11:59.457

**以下在 Python 3 中运行良好：**

```
np.array(lst)[msk] 
```

**如果您需要返回列表作为结果：**

```
np.array(lst)[msk].tolist() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-05-27T13:09:03.690

你也可以只使用 list 和 zip

1.  定义一个函数

```
def masklist(mylist,mymask):
    return [a for a,b in zip(mylist,mymask) if b] 
```

2.  用它！

```
n = 8
lst = range(n)
msk = [(el>3) and (el<=6) for el in lst]
lst_msk = masklist(lst,msk)
print(lst_msk) 
```

# class - Mono 新手 - 帮助设置搜索路径？

> ID：10274776
> 
> 赞同：1
> 
> 时间：2012-04-23T04:26:00.750
> 
> 标签：class, ide, mono, libraries

运行 Ubuntu Oneric 11.10，配备 1 GB RAM 和 250 GB HDD Dell Inspiron 笔记本电脑。

我从阅读 XML 的教程中获得了一些演示代码。当我编译它时，我收到以下消息：

“命名空间‘System’中不存在类型或命名空间名称‘.Xml’。是否缺少程序集引用？” （使用 System.Xml；）

我在这个路径中有库：/usr/lib/mono/gac/System.Xml/4.0.0.0_b77a5c561934e089/System.Xml.dll

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:39:05.813

您是否使用 MonoDevelop 来构建您的应用程序？如果是这样，请确保在您的项目中有对 System.Xml 的引用。
如果您足够“手动”使用**dmcs**来构建您的应用程序（或者您正在使用 Makefile 或其他一些自动构建过程），请确保您通过**/r:/usr/lib/mono/4.0/System.Xml .dll**作为**dmcs**构建命令的参数之一。

仅用于教学目的，这里是 MonoDevelop 中的参考编辑选项，您应该选择在其中添加参考：
![MonoDevelop 中的引用编辑菜单](../Images/d65075c021c617dfa116435c1c5135ae.png)

*   注意：您的发行版可能已将 System.Xml.dll 安装在另一个路径中，因此请验证。
*   您的 monodoc 问题是一个完全不同的问题，可能意味着已安装的文档中缺少目录或文件，或者 monodoc 中完全存在错误

# jquery - jquery图像淡入

> ID：10274779
> 
> 赞同：1
> 
> 时间：2012-04-23T04:26:40.583
> 
> 标签：jquery, image, animation, carousel

我有一个正在构建的工作 jquery 图像轮播。它大部分完成了（只是增加按钮有效）：http: [//jsfiddle.net/2C8fy/7/](http://jsfiddle.net/2C8fy/7/)

我面临的唯一问题是，当图像被附加时，它不会淡入。它只是出现。我尝试在右侧添加另一个不透明度为 0 的插槽，然后对其进行动画淡入，但这似乎也不起作用。如何为正确的插槽图像设置动画以使其看起来像是淡入淡出？这是我现在拥有的：

```
$('#basic_div').animate({          //slides the div with the images in it to the left.
            left: '-=40px'
        }, 300, function() {

        });

        left.animate({             //fade out effect for the left most image
            opacity: 0
        }, 300, function() {
            left.remove();         //gets rid of left most image after it becomes invisible.
            $('#basic_div').css({
                left: '0px'        //resets the div that contains the images
            });
        });

            middle.attr('id', 'left_slot');       //changes ids
            right.attr('id', 'middle_slot');

            $("#basic_div").append(newImgSL);
            newImgSL.attr('id', 'right_slot');
            newImgSL.animate({
                opacity: 100   //I thought this would make it fade in, but it still just appears.
            }, 300); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T05:16:31.443

对于`fadeIn()`图像，以`display: none`or`.hide()`和开头`opacity: 1`。

或者您可以将初始不透明度设置为 0 并使用`fadeTo(3000, 1)`.

`fadeIn()`期望图像最初`display: none`的不透明度设置为最终的不透明度。然后它会记住最终的不透明度，将不透明度设置为 0，使图像可见，然后开始为不透明度设置动画。

`fadeTo()`只是从当前的不透明度开始并淡化到新指定的不透明度。

所以，在你的情况下，你可以这样做：

```
// set id and initial opacity
newImgSL.attr('id', 'right_slot').css("opacity", 0);
// put it into the page
$("#basic_div").append(newImgSL);
// fade to visible
newImgSL.fadeTo(300, 1); 
```

另外，请记住，不透明度是从 0 到 1 的十进制数。

您的代码没有显示`newImgSL`来自哪里。请记住，您还需要确保图像已完成加载，然后再尝试淡化它。

# jquery - 使用 JQuery 验证插件远程功能 - 帮助检查电子邮件是否存在

> ID：10274782
> 
> 赞同：0
> 
> 时间：2012-04-23T04:27:31.433
> 
> 标签：jquery, jquery-plugins, jquery-validate

我尝试使用 JQuery Validation Plugin 中的远程功能来检查电子邮件地址是否存在。我无法让它返回它正在注册的状态。我正在使用提供的默认 php 类。我正在使用 Jquery 最新

这是我的课

```
<script type="text/javascript">
$.validator.setDefaults({
submitHandler: function() { alert("submitted!"); }});
$().ready(function() {

// validate signup form on keyup and submit
$("#form1").validate({
    rules: {
        user_pass: {
            required: true,
            minlength: 6
        },
        user_pass_confirm: {
            required: true,
            minlength: 6,
            equalTo: "#user_pass"
        },
        email: {
            required: true,
            email: true,
            remote: { url:"module/1.func.php",     
            type : "get",
            data : { email : function() { return $("#email").val();
 }, 
  }
  }        
        },

        terms: "required"
    },
    messages: {
        user_pass: {
            required: "Please provide a password",
            minlength: "Password must be at least 6 characters"
        },
        user_pass_confirm: {
            required: "Please provide a password",
            minlength: "Password must be at least 6 characters",
            equalTo: "Eenter the same password as above"
        },
        email: {
            required: "Enter your email address",
            email: "Enter a valid email address",

        },

        terms: "Please accept our policies"
    }
});

}); 
```

-----编辑--添加 1.inc.php-----

```
$email = $_REQUEST['email'];
if($email=="me@god.com"){
$valid = 'false';
}else{
$valid = 'true';
}
echo $valid;
?> 
```

-----编辑--更改了 Jquery--

我现在已将电子邮件规则更改为以下内容。如果电子邮件匹配，我会在输入电子邮件时收到“请修复此字段”。

> 电子邮件：{ 必需：true，电子邮件：true，远程：“module/1.func.php”}，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:02:35.730

将您的远程验证器更改为

`remote: "module/1.func.php"`

它已经通过 get 发送电子邮件并发送该字段值。

# iphone - iPhone 的推送通知 - 接受的方法

> ID：10274784
> 
> 赞同：0
> 
> 时间：2012-04-23T04:28:18.030
> 
> 标签：iphone, push-notification

我正在研究为推送通知设计和开发服务，并试图了解 Apple 应用程序在注册推送通知和存储令牌时的处理顺序。我目前正在开发的是一项服务，它允许订阅我们服务器上特定处理发生的个别更改。当它们发生时，电话用户可能会收到“A”、“B”或“C”类型的消息。如果需要，电话用户必须单独“订阅”每种类型。否则他们可以忽略它而不订阅。

因此，电话 4 上的用户 Fred 启动我们的应用程序，登录，然后能够打开或关闭对作为推送通知发送的事件的订阅。

因此，我需要将 Fred 登录的详细信息与 Phone #4 的设备令牌以及特定订阅相关联。

所以我特别重要的问题是。

当手机连接到 APNS 服务器以获取其设备令牌时，这是在应用程序启动时自动进行的吗？或者这可以在以后的步骤中启动吗？即，在通过我们的应用程序的登录屏幕之后。

我们可以（我们被允许）将设备令牌存储在手机上的应用程序数据存储中吗？或者，应用程序是否应该在每次运行应用程序时都连接到 APNS 服务器？

应用程序如何知道它是否已经调用了 APNS 服务器并检索了令牌，或者如上所述，它是否应该在应用程序运行时调用 APNS 服务器？

我们可以（是否允许）在应用程序运行时将令牌存储在应用程序的内存中，以便我们可以正确订阅和取消订阅特定消息？

我们还需要能够列出特定用户在其所有设备上可能拥有的所有订阅，以便用户可以移除旧设备（如果他们更换手机）。或者我们是否可以依赖从调用 APNS 返回的数据——当我们尝试推送通知时——来通知我们设备令牌不再有效？

或者有没有更好的方法把这一切联系在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:03:09.407

> 当手机连接到 APNS 服务器以获取其设备令牌时，这是在应用程序启动时自动进行的吗？或者这可以在以后的步骤中启动吗？即，登录我们的应用程序后。

应用启动后，应用通过调用 registerForRemoteNotificationTypes 获取令牌。这将提示用户授予权限，如果授予权限，则使用设备令牌调用回调。

> 我们可以（我们被允许）将设备令牌存储在手机上的应用程序数据存储中吗？或者，应用程序是否应该在每次运行应用程序时都连接到 APNS 服务器？

您需要构建一个[APN 提供程序](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CommunicatingWIthAPS/CommunicatingWIthAPS.html)，它是一个调用苹果发送推送的 Web 服务器。与令牌有关的事情是将其发布到使用 APN 提供程序的服务器上。该应用程序不会连接到 APNS，您的提供商会，并且它会在推送发送时进行。

> 我们可以（是否允许）在应用程序运行时将令牌存储在应用程序的内存中，以便我们可以正确订阅和取消订阅特定消息？

您可以将令牌保留在客户端上，但实际上并不需要。调用 APN 的是您的 Web 服务，因此需要注意用户的订阅偏好。

> 我们还需要能够列出特定用户在其所有设备上可能拥有的所有订阅，以便用户可以移除旧设备（如果他们更换手机）。或者我们是否可以依赖从调用 APNS 返回的数据——当我们尝试推送通知时——来通知我们设备令牌不再有效？

APN 还提供您批量调用的反馈服务，该服务返回不再有效的设备令牌。您不仅*可以*使用此服务，而且*必须*. 苹果会对重复发送到不再有效设备的应用程序感到愤怒。

> 或者有没有更好的方法把这一切联系在一起？

是的！ [Parse.com](http://www.parse.com)为客户端代码提供了一个很好的包装器，提供提供者和反馈服务，将单个设备的概念抽象为“通道”的概念，这听起来就像您需要多种通知类型 A、B、C、提供超级简单的分步设置，并为 iOS 加载其他有用的云服务。（我不是附属的，而是一个大粉丝）。

# sql - 将 UNION 子句与 ORDER BY 一起用于单个查询

> ID：10274785
> 
> 赞同：1
> 
> 时间：2012-04-23T04:28:18.013
> 
> 标签：sql, sql-server-2008

我有一张这样的数据表。

```
Id       PId         Device             Status          Type      Created_Date
===      ===         ======             ======          ====      ============
1         2           1                  today          High      2012-04-12 08:11:51.583
2         2           4                  today          Medium    2012-04-02 01:39:52.393
3         3           5                  today          Medium    2012-04-02 01:10:02.443
4         2           6                  today          High      2012-04-02 01:05:25.063
5         2           3                  today          High      2012-04-02 01:03:08.360
6         2           7                  today          High      2012-04-02 01:02:57.093
7         2           2                  today          High      2012-04-02 00:22:37.807 
```

现在，我希望设备 6 和 7 的记录始终位于记录集的顶部，并按创建日期的降序排列。并且记录除 6 和 7 以外的设备，按类型和创建日期在设备类型 6 和 7 的记录之后降序排列。

所以想要的结果如下：

```
Id       PId         Device             Status          Type      Created_Date
===      ===         ======             ======          ====      ============
4         2           6                  today          High      2012-04-02 01:05:25.063
6         2           7                  today          High      2012-04-02 01:02:57.093
1         2           1                  today          High      2012-04-12 08:11:51.583
5         2           3                  today          High      2012-04-02 01:03:08.360
7         2           2                  today          High      2012-04-02 00:22:37.807
2         2           4                  today          Medium    2012-04-02 01:39:52.393 
```

我使用了如下查询：

```
select * from TblAlert where PId=2 and ( Device=6 OR Device=7) and ( Status='Today' or Status=0)
UNION
Select * from TblAlert Where  PId=2 and ( Device<>6 OR Device<>7)and (Status='Today' or Status=0)
order by Type,Created_Date desc 
```

但它不起作用，因为它在整个记录集上应用 order by 子句。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T05:17:45.150

```
select *
from TblAlert 
where PId=2 and ([Status]='Today' or [Status]='0')
order by case when Device in (6, 7) then 0 else 1 end,
         case when Device in (6, 7) then [Type] else '' end,
         Created_Date 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:39:13.913

通过使用表变量作为我自己解决了这个问题

```
DECLARE @Records TABLE
(
   Id  int,
   PId int,
   Device int,
   Status Alert_Type varchar(10),
   Type Alert_Type varchar(5), 
   Created_Date DateTime
); 

INSERT @Records 
    SELECT Id, PId, Device, Status,Type,Created_Date FROM 
        TblAlert 
    WHERE 
        PId =2
        AND Device IN (6,7) 
        AND ( Status='Today' or Status=0) 
    ORDER BY 
        Created_Date DESC; 

INSERT @Records 
    SELECT Id, PId, Device, Status,Type,Created_Date FROM 
        TblAlert 
    WHERE 
        PId =2
        AND Device NOT IN (6,7) 
        AND ( Status='Today' or Status=0) 
    ORDER BY 
        Type, Created_Date DESC; 

SELECT * FROM @Records; 
```

# iphone - 如何在 iphone 应用程序中一起上传照片和照片的描述？

> ID：10274786
> 
> 赞同：0
> 
> 时间：2012-04-23T04:28:19.740
> 
> 标签：iphone, mysql

这是我正在做的事情：允许用户使用他们的 iphone 应用程序将照片和照片的两个描述字段上传到 MySQL。我已经想出了如何配置应用程序，以便上传来自两个描述字段的文本（使用 PostURL 和我的 Web 服务器上的随附 .php 文件）。

我遇到的问题是如何将照片添加到组合中，并将照片和文本字段一起传输到数据库中相应的列（图像、名称、消息）中。

我的头文件和实现文件应该是什么样的？另外，我的 .php 文件应该是什么样子？以下是它们目前的存在方式，作为仅供参考，这只适用于传输文本，而不是照片。

头文件：

```
#import <UIKit/UIKit.h>

#define kPostURL @"http://www.example.com/upload.php"
#define kName @"name"
#define kMessage @"message"

@interface FirstViewController : UIViewController<UINavigationControllerDelegate,      UIImagePickerControllerDelegate>{

IBOutlet UITextField *nameText;
IBOutlet UITextView *messageText;
NSURLConnection *postConnection;

UIImageView * theimageView;
UIButton * choosePhoto;
UIButton * takePhoto;
}

@property (nonatomic, retain) IBOutlet UITextField * nameText;
@property (nonatomic, retain) IBOutlet UITextView * messageText;
@property (nonatomic, retain) NSURLConnection * postConnection;
@property (nonatomic, retain) IBOutlet UIImageView * theimageView;
@property (nonatomic, retain) IBOutlet UIButton * choosePhoto;
@property (nonatomic, retain) IBOutlet UIButton * takePhoto;

-(IBAction) getPhoto:(id) sender;

-(void) postMessage:(NSString*) message withName:(NSString *) name;
-(IBAction)post:(id)sender;

@end 
```

实现文件：

```
#import "FirstViewController.h"

@implementation FirstViewController
@synthesize nameText, messageText, postConnection, theimageView, choosePhoto,    takePhoto,postData;

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
}

-(void) postMessage:(NSString*) message withName:(NSString *) name {

if (name != nil && message != nil){

    NSMutableString *postString = [NSMutableString stringWithString:kPostURL];

    [postString appendString:[NSString stringWithFormat:@"?%@=%@", kName, name]];

    [postString appendString:[NSString stringWithFormat:@"&%@=%@", kMessage, message]];

    [postString setString:[postString   stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL   URLWithString:postString]];
    [request setHTTPMethod:@"POST"];

    postConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self startImmediately:YES];

}

}

-(IBAction)post:(id)sender{

[self postMessage:messageText.text withName:nameText.text];
[messageText resignFirstResponder];
messageText.text = nil;
nameText.text = nil;
[[NSNotificationCenter defaultCenter] postNotificationName:@"Test1" object:self];

}

-(IBAction) getPhoto:(id) sender {
UIImagePickerController * picker = [[UIImagePickerController alloc] init];
picker.delegate = self;

if((UIButton *) sender == choosePhoto) {
    picker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
} else {
    picker.sourceType = UIImagePickerControllerSourceTypeCamera;
}

[self presentModalViewController:picker animated:YES];
}
- (void)imagePickerController:(UIImagePickerController *)picker  didFinishPickingMediaWithInfo:(NSDictionary *)info {
[picker dismissModalViewControllerAnimated:YES];
theimageView.image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];
}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
// e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
[super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
// Return YES for supported orientations
return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:09:59.823

(^.^)“抱歉，我的英语不好，如果有人喜欢纠正我的编辑，我将不胜感激”

您好，您可以使用（获取、发布、soap 等 Web 服务、json 等休息服务）请求。

根据我的经验，如果您想发送图像，则必须使用 base64binary 这是字节数组的字符串表示形式，因为我从未能够发送一个字节数组，但是如果是字符串，则可以在没有 base64binary 的情况下正常发送。

# jquery - jQuery如何在windw加载时触发if语句

> ID：10274787
> 
> 赞同：0
> 
> 时间：2012-04-23T04:28:42.190
> 
> 标签：jquery, load

我有以下代码，如果在其中选择了某个选项，则会显示一个下拉列表

```
// Hide Dealer drop down list
$(".which_dealer").hide();
// if Dealer is chosen then show Dealer drop down list
$('#from_dealer').bind('change', function (e) { 
    if( $(this).val() == 9) {
        $('.which_dealer').slideToggle('slow');
    }
    else{
        $(".which_dealer").hide();
    }         
}); 
```

这很好用，但我还需要考虑用户重新访问此页面以对其进行编辑。因此，如果他们之前选择了此选项，则不应隐藏 .which_dealer 列表。

为此，我想编写一个在窗口加载时触发的 if 语句。我已经尝试过，但我不知道要使用什么功能，因此我有两次“加载”。请参阅下面的我的尝试。

```
// if Dealer was chosen chosen previously then show Dealer drop down list
$(window).load('load', function (e) { 
    if( $('#from_dealer').val() == 9) {
        $('.which_dealer').show();
    }
    else{
        $('.which_dealer').hide();
    }         
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:32:38.743

尝试：

> $(document).ready( function(){ /* 你的代码在这里 */ } );

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:36:09.107

如果您想保存用户之前访问网页的状态（例如他们之前是否在该页面中选择了一个选项），然后在他们下次访问时在网页中使用该状态，那么您有以下内容用于存储状态的选项，以便在不同的页面访问中可用：

1.  饼干
2.  本地存储
3.  服务器上的存储

Cookie 在所有浏览器中无处不在，而且相当简单。它们可用于存储少量数据（通常小于 2k 字节）

本地存储非常易于使用，但仅在较新的浏览器中支持。

无论用户实际是谁，cookie 和本地存储都与特定计算机上的特定浏览器连接。

在服务器上存储某些内容通常代表已登录用户存储状态，然后无论用户在何处登录，该状态都可以用于该用户。

cookie 实现可能如下所示：

```
// cookie functions
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
}

function eraseCookie(name) {
    createCookie(name,"",-1);
}

$(document).ready(function() {

    // restore dealer state from previous cookie
    var lastDealerVal = readCookie("fromDealer");
    if (lastDealerVal) {
        $("from_dealer").val(lastDealerVal);
    }
    if (!lastDealerVal || lastDealerVal != "9") {
        $(".which_dealer").hide();
    }

    // if Dealer is chosen then show Dealer drop down list
    $('#from_dealer').bind('change', function (e) { 
        var val = $(this).val();
        createCookie("fromDealer", val, 60);
        if(val == 9) {
            $('.which_dealer').slideToggle('slow');
        }
        else{
            $(".which_dealer").hide();
        }         
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:37:37.323

尝试

```
$(function(){ /* your code here */ } ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T04:37:41.160

尝试这个

```
$(document).load(function (e) { 
    if( $('#from_dealer').val() == '9') {
        $('.which_dealer').show();
    }
    else{
        $('.which_dealer').hide();
    }         
}); 
```

# mongodb - PHP MongoDB插入问题

> ID：10274791
> 
> 赞同：0
> 
> 时间：2012-04-23T04:29:14.320
> 
> 标签：mongodb, mongodb-php

使用 PHP 插入 MongoDB 时遇到这个奇怪的问题。我的插入代码如下：

```
$tyre = array("m" => '5', "i" => 'test.png');
$tyreCollection->insert(array($tyre),array('safe'=>true)); 
```

插入后，我在我的数据库中看到以下内容：

```
{'_id' : ObjectId("856876876786867"),"0":{"m":'5','i':'test.png'}} 
```

为什么我的新数组的键为 0 ？我期待：

```
{'_id' : ObjectId("856876876786867"),"m":'5','i':'test.png'} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:45:44.790

仅插入**$tyre**而不是**array($tyre)**

```
$tyreCollection->insert($tyre,array('safe'=>true)); 
```

还要始终记住使用**var_dump**或**print_r转储变量**

# python - return 语句返回 None 而不是 value

> ID：10274792
> 
> 赞同：1
> 
> 时间：2012-04-23T04:29:21.527
> 
> 标签：python, procedures

我遇到了一个奇怪的问题。此代码返回 None 而不是 True，即使它进入正确的分支并计算为 True：

```
edges = { (1, 'a') : [2, 3],
          (2, 'a') : [2],
          (3, 'b') : [4, 3],
          (4, 'c') : [5] }
accepting = [2, 5] 
loc = []
def nfsmsim(string, current, edges, accepting): 

    if string != "":
        if ((current, string[0]) in edges.keys()):
            global loc 
            loc = edges[(current, string[0])]
            print "edge found:",loc

    if (string == ""):
        print "string is over",current,accepting
        print type(current), type(accepting)
        if current in accepting : 
            print "1"
            return True
        else: 
            print "2"
            return 2
    # fill in your code here 
    elif (current, string[0]) in edges.keys():
        global loc
        string = string[1:]
        nfsmsim(string, loc[0], edges, accepting)
    elif len(loc)>1:
        global loc
        nfsmsim(string, loc[1], edges, accepting)

# This problem includes some test cases to help you tell if you are on
# the right track. You may want to make your own additional tests as well.
print nfsmsim("abc", 1, edges, accepting) 
```

这个的输出是：

```
 string is over 5 [2, 5]
<type 'int'> <type 'list'>
1
None (<< instead of True) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T04:38:19.117

这是一个递归函数。当您到达终端案例 ( `string == ""`) 时，您返回`1`或`2`。这将返回给调用函数——上一次调用`nfsmsim`. 但是of*的*调用`nfsmsim`并没有返回任何东西！您需要从终端调用中获取值`nfsmsim`并通过再次返回来传递它。

换句话说，您需要在语句的这两个分支中的每一个中都有一个 return`if`语句：

```
elif (current, string[0]) in edges.keys():
    global loc
    string = string[1:]
    nfsmsim(string, loc[0], edges, accepting)
elif len(loc)>1:
    global loc
    nfsmsim(string, loc[1], edges, accepting) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:55:04.497

函数结束时不使用 return 命令与使用 return None 相同。

由于该函数是递归的并且您正在使用它的结果，因此您必须在其主体内返回每个调用的值：

```
elif (current, string[0]) in edges.keys():
    global loc
    string = string[1:]
    return nfsmsim(string, loc[0], edges, accepting)
elif len(loc)>1:
    global loc
    return nfsmsim(string, loc[1], edges, accepting) 
```

您应该忘记使用全局 loc。只需通过参数传递它。无论如何，它是一个参考：

```
edges = { (1, 'a') : [2, 3],
          (2, 'a') : [2],
          (3, 'b') : [4, 3],
          (4, 'c') : [5] }
accepting = [2, 5] 
loc = []
def nfsmsim(string, current, edges, accepting, loc): 

    if string != "":
        if ((current, string[0]) in edges.keys()):
            loc = edges[(current, string[0])]
            print "edge found:",loc

    if (string == ""):
        print "string is over",current,accepting
        print type(current), type(accepting)
        if current in accepting : 
            print "1"
            return True
        else: 
            print "2"
            return 2
    # fill in your code here 
    elif (current, string[0]) in edges.keys():
        string = string[1:]
        return nfsmsim(string, loc[0], edges, accepting, loc)
    elif len(loc)>1:
        return nfsmsim(string, loc[1], edges, accepting, loc)

# This problem includes some test cases to help you tell if you are on
# the right track. You may want to make your own additional tests as well.
print nfsmsim("abc", 1, edges, accepting, loc) 
```

它在我的控制台上打印以下内容：

```
c:\tmp\___python\fixxxer\so10274792>python a.py
edge found: [2, 3]
edge found: [4, 3]
edge found: [5]
string is over 5 [2, 5]
<type 'int'> <type 'list'>
1
True 
```

# iphone - NSString 值一旦提供值就不能更改？

> ID：10274795
> 
> 赞同：0
> 
> 时间：2012-04-23T04:30:07.563
> 
> 标签：iphone, objective-c, cocoa

嗨，我得到一个信息，即 NSString 值是不可变的，一旦提供了值就无法更改。

但我已经创建并测试了以下代码：

```
NSString *str=[[NSString alloc] initWithString:@"Hello"];    
NSLog(@"\n\nstr = %@",str);
str=@"asdasd";
NSLog(@"\n\n new str = %@",str); 
```

这将“Hello”作为第一个 str 值，将“asdasd”作为第二个 str 值。如果是这样，调用 NSString 不可变有什么意义？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T04:32:15.230

您在第三行所做的只是创建一个新字符串并用 str 变量指向它。您没有更改原始字符串，而是使变量指向新字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T04:35:07.187

`NSString`是不可变的。你不能改变它。您的困惑源于您的变量（指针）不是`const`.

您所做的只是将指针重新分配给不同的不可变字符串。

如果您要尝试将字符串附加到其中一个，则会出现错误。具体来说，这是“……调用 NSString 不可变的相关性”。您应该将此解释为字符串实例可能不会发生变异，即使您声明的变量可能会被分配另一个 NSString 实例，因为它不是`const`.

您可以像这样使指针 const 和字符串不可变：

```
NSString * const aStr = @"aStr"; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T04:33:08.340

您混淆了不可变对象和常量指针（加上您正在泄漏内存）。在这里，您并没有真正改变 NSString*实例*（即对象本身），而只是一个指向它的指针。关键是您可以将 NSString 的不同实例分配给同一个变量，它不会改变对象的内部内容，也不会使其响应 NSMutableString 的变异消息等`appendString`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T04:38:36.260

使用它可以解决您的问题...

```
NSString *str=[NSString stringWithFormat:@"Hello"];    
NSLog(@"\n\nstr = %@",str);
str = nil;
str=@"asdasd";
NSLog(@"\n\n new str = %@",str); 
```

这是你应该知道的一些基本知识..

```
NSString *s1 = @"string1";
NSString *s2 = [[NSString alloc] initWithString:@"string2"];
NSString *s3 = [NSString stringWithFormat:@"string3"]; 
```

在这种情况下，s1 是一个指向常量字符串的指针。s2 和 s3 都指向您创建的新字符串，但 s2 已为您保留，s3 已自动释放。如果您只需要一个临时对象，自动释放对象 s3 或常量对象 s1 是不错的选择。如果您需要保留字符串，则应该使用 s2 （实际上，现在我认为 s1 在这种情况下也可以使用-尽管它并不是真正的惯用语）。

您可以通过向 s1 或 s3 发送保留消息来使 s1 或 s3 等效于 s2。您还可以通过发送自动释放消息将 s2 转换为等效对象。

# api - 分配给我的项目的 Asana API

> ID：10274798
> 
> 赞同：1
> 
> 时间：2012-04-23T04:30:34.397
> 
> 标签：api

对于分配给我的任务，我知道我该怎么做

```
curl -u <api_key>: "https://app.asana.com/api/1.0/tasks?workspace=14916&assignee=me" 
```

我正在尝试创建一个快速页面，为我分解我当前的任务和指向 Asana 的链接，这样我就可以拥有自己的快速仪表板。

我有我的 API 密钥

*   它列出了我参与的所有工作区。
*   如果我单击一个工作区，它会显示该空间内的所有项目
*   如果我单击一个项目，我只想查看在该项目中分配给我的任务。

*   如果我将项目 ID 添加到上述调用中，它会将项目中的每个项目发回给我，而不仅仅是分配给我的那些。

*   如果我留下项目 ID，它会返回分配给我的所有任务，甚至是项目之外的任务。

我错过了什么？

谢谢你的帮助！

> ***注意：**我会添加 Asana 标签，但它似乎还不存在。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:34:50.010

我也遇到了这个问题 - 查询任务时似乎无法扩展项目 - 并且您无法按项目获取任务......实际上前者是首选，因为如果可以的话，您可以按项目提供任务列表扩大项目。

实际上，您可以获取任务列表，然后循环并通过任务 ID 获取完整任务，但这需要一段时间......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T20:53:38.427

似乎在 API 的当前版本中，当为项目指定时，assignee 参数被忽略。不管我在下面放什么，我都会得到相同的结果：所有任务。

```
curl -u <api-key>: "https://app.asana.com/api/1.0/projects/<pid>/tasks?assignee=here-it-can-be-anything" 
```

# android - 如何检查是否可以拨打电话？

> ID：10274799
> 
> 赞同：0
> 
> 时间：2012-04-23T04:30:47.050
> 
> 标签：android

通过电话支持的任何方法，即 GSM 或 CDMA（不是 SIP）。我尝试使用 ConnectivityManager，但 TYPE_MOBILE 的 NetworkInfo 似乎在连接到 wifi 时返回 !IsConnected，尽管我有完整的信号。

我想知道是否可以拨打电话，所以我猜 TelephonyManager.getDataState 不合适。

# 我的答案

（不能再发布7个小时）

看来我是在正确的地方，只是没有完全检查正确的方法。实际上，似乎只有一个TYPE_的连接（即TYPE_MOBILE，TYPE_WIFI）会返回IsConnected()，所以我应该检查连接是否IsAvailable()。我在启用和禁用移动数据的情况下对此进行了测试，并且在两种情况下都给出了正确的结果（即：当我有移动信号时为真，当我没有移动数据时为假；启用和不启用移动数据）。

注意：要禁用移动数据，请在 ICS 中转到设置 -> 无线和网络 -> 更多 -> 移动网络 -> 启用数据（取消选择它）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:45:49.380

首先检查 PackageManager hasSystemFeature(PackageManager.FEATURE_TELEPHONY) 然后你可以使用 TelephonyManager getSimState()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:47:04.047

您应该创建一个 BroadcastReceiver：在 TelephonyManager.CALL_STATE_OFFHOOK 的情况下：检查先前的状态是 CALL_STATE_RINGING 还是 CALL_STATE_IDLE（例如通过在两种情况下设置不同的标志）。在后一种情况下，继续打开您的应用程序，:::

```
public class CallReciever extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {

        if (intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(
                TelephonyManager.EXTRA_STATE_RINGING)) {

                // Phone number 

                // Ringing state
                // This code will execute when the phone has an incoming call
        } else if (intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(
                TelephonyManager.EXTRA_STATE_IDLE)
                || intent.getStringExtra(TelephonyManager.EXTRA_STATE).equals(
                        TelephonyManager.EXTRA_STATE_OFFHOOK)) {

            // This code will execute when the call is answered or disconnected
        }

    }
} 
```

您应该注册您的应用程序以在清单中收听这些意图：

```
<receiver android:name=".CallReciever">
<intent-filter>
    <action android:name="android.intent.action.PHONE_STATE" />
</intent-filter> 
```

# c# - 在 .Net 中创建类似设计视图的应用程序

> ID：10274801
> 
> 赞同：0
> 
> 时间：2012-04-23T04:31:06.493
> 
> 标签：c#, .net, wpf, winforms

我想在 .net 中创建一个类似设计视图的应用程序。该应用程序将使用一些工业组件作为工具箱视图，并且我想将它们呈现到我的设计视图中。我将在此组件上设置的属性很少。

有什么猜测吗，我应该如何开始呢？任何示例应用程序都会有所帮助。

谢谢， 奥姆基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:42:34.043

我建议使用 MVC 设计模式。在此模式中，您有 3 个组件，该模式的主要目标是从视图中分离数据。因此，您应该拥有处理所有控件渲染的模块，并且您将拥有一个包含所有控件和控件设置的模块。控制器模块将管理两个模块。

查看[示例](http://www.cs.wcupa.edu/~rkline/java/mvc-example.html)

# c# - 检测 .NET 中的线程安全问题

> ID：10274803
> 
> 赞同：0
> 
> 时间：2012-04-23T04:31:19.653
> 
> 标签：c#, multithreading, .net

> **可能重复：**
> [用于查找竞争条件/死锁的 C#/.NET 分析工具](https://stackoverflow.com/questions/2379610/c-net-analysis-tool-to-find-race-conditions-deadlocks)

是否有任何工具可以自动检测 .NET 代码中的线程问题？

# .htaccess - php htaccess 问题重定向

> ID：10274804
> 
> 赞同：1
> 
> 时间：2012-04-23T04:31:20.637
> 
> 标签：.htaccess

我在 .htaccess 中有一些问题。

我的网站网址是前的。`www.example.com/`

当我们使用下拉菜单进入城市页面时......它来了`index.php?city=cityname`（它是正确的）

当我们转到关于我们页面时，它是索引页面而不是关于我们页面

城市页面网址：`www.example.com/cityname`

关于我们的网址：`www.example.com/about-us`

在htaccess代码下方；

当我们进入关于我们的页面时，它涉及到索引页面

```
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?city=$1
RewriteRule ^about-us$ about_us.php 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:12:40.087

您只需要更改重写的顺序。所以，使用这个：

```
RewriteRule ^about-us$ about_us.php
RewriteRule ^([a-zA-Z0-9_-]+)$ index.php?city=$1 
```

# sql-server - 如何在 SQL Server 或 Microsoft Access 中按绝对值对列进行排序？

> ID：10274812
> 
> 赞同：2
> 
> 时间：2012-04-23T04:32:37.267
> 
> 标签：sql-server, ms-access, sorting

列中的值具有负整数和正整数。我想按**绝对值**对列进行排序。我如何最好在 Access 或 SQL 中执行此操作？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T04:34:37.763

在 MSSQL 中：

使用`ABS()`要排序的列上的函数。IE：

`SELECT a, ABS(b) FROM tbl ORDER BY ABS(b)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T04:36:57.623

```
select col1, Abs(col2) from table Order by 2; 
```

按 2 排序，在 select 语句中取第二列，您可以在 select 中指定表示序列的任何数字
编辑：
这不是推荐的做法，因为：

1.  这不明显/不明确
2.  如果列顺序发生变化，查询仍然有效，因此您可能会冒着按您不想要的东西排序的风险

另一种方法可能是使用 Column Alias: 类似：

```
select Abs(col1) as ABSID, * from Table order by ABSID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-17T07:57:41.313

排序有两种类型，升序和降序。Sql 提供函数（order by） asc 升序和 desc 降序...

例如：一个表包含值列表，例如 Employee_ID 01 02 06 08 04

这些值可以按升序排序为，

> Select Employee_ID FROM tablename order by Employee_ID ASC

这会按升序列出值，例如 Employee_ID 01 02 04 06 08

这些值可以按降序排序为，

> Select Employee_ID FROM tablename order by Employee_ID DESC

这会按降序列出值，例如 Employee_ID 08 06 04 02 01

希望，你得到你的答案。回复更多澄清..

# android - 在Android中，有没有办法使用广播接收器来检测wifi和3G之间的切换？

> ID：10274818
> 
> 赞同：2
> 
> 时间：2012-04-23T04:33:32.493
> 
> 标签：android, broadcastreceiver, wif, 3g

使用广播接收器，很容易找出现在手机是否已插入。以下 StackOverflow 问题对此进行了描述： [检测正在插入的设备](https://stackoverflow.com/questions/6217692/detecting-the-device-being-plugged-in)。

`getActiveNetworkInfo()`我也知道如何使用不断轮询当前连接信息的功能来检查当前连接是WIFI还是移动设备。

我的问题是：是否可以使用广播接收器来检测 WiFi 和 3G 之间的切换？它应该更有效率。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T05:06:05.777

我想你可以在广播接收器的 xml 文件中使用它

```
 <receiver android:name="packagename.classname" >
        <intent-filter>
            <action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
        </intent-filter>
    </receiver> 
```

有关更多说明，请查看此链接 [http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html)

# c# - 寻找如何创建通用 CreateDataAdapter

> ID：10274819
> 
> 赞同：2
> 
> 时间：2012-04-23T04:33:33.823
> 
> 标签：c#, .net, ado.net, dataset, dataadapter

创建一个数据集，例如

```
 System.Data.Common.DBConnection conn = getConn();
 DbCommand com = conn.CreateCommand();

 DbDataAdapter da = // get a datadapter from conn ??? There is NO CreateDataAdapter here ?
 da.SelectCommand = com;
 da.Fill(ds); 
```

有什么帮助吗？

更新 - 我知道那里没有 CreateDataAdapter() 方法，正在寻找解决方法！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-10-01T21:29:04.073

.NET Framework 4.5 中的新功能[`GetFactory(DbConnection)`](http://msdn.microsoft.com/en-us/library/hh323136.aspx)：：

```
public static DbDataAdapter CreateDataAdapter(DbConnection connection)
{
   DbProviderFactory factory = null;
   factory = DbProviderFactories.GetFactory(connection);

   if (factory == null)
         throw new ArgumentException("Could not locate factory matching supplied DbConnection", "connection");

   return factory.CreateDataAdapter();
} 
```

# 也可以看看

*   [如何在给定 DbCommand 或 DbConnection 的情况下创建 DbDataAdapter？](https://stackoverflow.com/questions/3488962/how-to-create-a-dbdataadapter-given-a-dbcommand-or-dbconnection)

> **注意**：任何代码都会发布到公共领域。无需归属。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:41:47.917

我不确定是否理解正确.. 但也许你想要这样的东西：

```
 using (System.Data.Common.DBConnection conn = getConn())
 {
  DbCommand com = conn.CreateCommand();
  DbDataAdapter da = CreateAdapter(com);
  // .. properties of adapter ..
  da.Fill(ds);
 } 
```

编辑（未测试）：

您可以像这样创建通用 CreateAdapter 方法（将根据命令类型创建适配器）：

```
private static DbDataAdapter CreateAdapter<T>(T a_command) where T: DbCommand
{
     if (a_command is SqlCommand)
     {
        return new SqlDataAdapter();
     }

     // .. others adapters..

     return null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-03T11:59:37.690

使用反射：

```
 DbConnection conn = getConn();
        string assemblyName = conn.GetType().Assembly.FullName;
        string typeName = conn.GetType().FullName.Replace("Connection", "DataAdapter"); // You may be more conservative than this
        DbDataAdapter adapter = (DbDataAdapter)Activator.CreateInstance(assemblyName, typeName).Unwrap(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T04:43:10.190

看看[这里](http://msdn.microsoft.com/en-us/library/system.data.common.dbdataadapter.aspx)的备注部分，它说在使用 DbDataAdapter 时需要实现以下构造函数。

从外观上看，我认为您应该从 DbDataAdapter 继承而不是直接使用它。尝试使用[OledbDataAdapter](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbdataadapter.aspx)。

```
 OleDbConnection conn = getConn();
        OleDbCommand com = conn.CreateCommand();

        OleDbDataAdapter da = new OleDbDataAdapter(comm, conn);
        da.Fill(ds); 
```

# uiimageview - 如何使 UIImage 圆角，不圆角

> ID：10274820
> 
> 赞同：0
> 
> 时间：2012-04-23T04:33:38.747
> 
> 标签：uiimageview, draw, geometry

画一个圆圈，在里面做一个圆形的UIImageView。如何得到这个，请指导我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T10:38:01.657

让我们这样说，

*   首先我们创建一个 UIImageView 到你想要的圆形大小。假设你希望这个图像是一个圆形图像，

> [http://united4iran.org/wp-content/uploads/2010/11/cell-phone-in-canada.jpg](http://united4iran.org/wp-content/uploads/2010/11/cell-phone-in-canada.jpg)

*   然后在前一个的顶部创建另一个 UIImageView，大小为 320x480，并将[此](http://img21.imageshack.us/img21/3431/test2sn.png)图像设置为它（假设此图像大小为 320x480），

注意：还要记住上图中圆圈的内部区域是透明的。

*   然后你应该得到这样的图像，

> [http://img580.imageshack.us/img580/782/testjkn.png](http://img580.imageshack.us/img580/782/testjkn.png)

希望这会帮助你。

# algorithm - 与骗子的选择程序？

> ID：10274822
> 
> 赞同：1
> 
> 时间：2012-04-23T04:33:42.067
> 
> 标签：algorithm, selection, big-o, median-of-medians

我最近在分析了第k个最小元素算法之后写了一个程序，首先没有重复的情况。

但是，现在我想分析预期的渐近运行时间，以便在完全`j`重复时找到数组的中位数。我没有为此修改我的代码，因此由于`j`重复，性能会有所降低。

我不知道如何开始？谁能指出我这样的重复关系？

我推导出以下内容，其中 n 是输入数组的大小

```
T(n) <= 1/2*T(3/4*n) + 1/2*T(n) 
```

但我很不清楚如何处理涉及的重复键。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:50:16.297

[这里展示](http://www.cs.cmu.edu/afs/cs/academic/class/15451-s07/www/lecture_notes/lect0125.pdf)的随机解决方案是

```
 T(n) <= T(3/4*n) + n-1  =>  T(n) <= 4n 
```

算法的复杂性可能取决于`j`但不要期望它会奇迹般地小于线性时间。为什么？取一个大小为 n/2 的随机数组，将其完全复制并针对重复问题运行理想算法。你会有

```
T(n) <= 4(n/2) => T(n) <= 2n 
```

当每个元素重复两次时（完全`n/2`重复）

# asp.net - 自动回发接口

> ID：10274824
> 
> 赞同：0
> 
> 时间：2012-04-23T04:33:46.470
> 
> 标签：asp.net, properties, interface

我正在创建一组 Web 用户控件，它们将共享一个公共基类。基础将始终包含一个 WebControl（文本框、DropDownList、CheckBoxList、RadioButtonList、ListBox 等）和一个RequiredFieldValidator。一切都很好，除了我的抽象 InputControl 属性（定义为 WebControl 类型）似乎没有我希望它们都具有的 AutoPostBack 属性（我认为这是因为并非所有 WebControl 都支持 AutoPostBack）。我很想把这个功能完全放在基类中，而不必在每个孩子中定义它。它看起来像：

```
public abstract WebControl InputControl { get; set; }
public bool AutoPostBack {
    get { return InputControl.AutoPostBack; }
    set { InputControl.AutoPostBack = value; }
} 
```

但这显然行不通，因为 AutoPostBack 不是 WebControl 的属性。我是否可以指定另一个接口来支持这一点，或者我需要创建自己的接口吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:07:44.400

autopostback 不在任何基类中，因为只有一些控件需要 autopostback 属性。你可以做的是使用泛型

```
 public class MyBaseUC<T> : System.Web.UI.UserControl
    {
        public abstract T InputControl { get; set; }

    }

   public partial class WebUserControl1 : MyBaseUC<TextBox>
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            InputControl.AutoPostBack = false;
        }
    } 
```

问候。

# r - 捕获无法在 R 中转换为日期的字符串

> ID：10274826
> 
> 赞同：1
> 
> 时间：2012-04-23T04:34:03.030
> 
> 标签：r, error-handling

`if`如果字符串无法转换为日期，我想创建一个语句，如下所示：

```
as.Date("2010-00-01") 
```

但是运行上面的行只是继续给出下面的错误输出：

```
Error in charToDate(x) : 
  character string is not in a standard unambiguous format 
```

我不能将它用于语句，如果字符串无法转换为日期`if`，我该如何使用语句？`if`谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T04:44:23.173

这是一个快速定义：

```
isDatable <- function(x) tryCatch(as.Date(x), error = function(e) FALSE) 
```

然后，

```
> isDatable("2012-00-01")
[1] FALSE
> isDatable("2012-01-01")
[1] "2012-01-01" 
```

所以你可以使用`if`：

```
if (!isDatable("2012-00-01")) {
    # something 
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T05:21:03.157

提供`format`arg，这样它就不会模棱两可了。坏日期总是变成`NA`.

```
d <- as.Date("2010-01-31", format="%Y-%m-%d") # OK
is.na(d) # FALSE

d <- as.Date("2010-00-31", format="%Y-%m-%d") # NA
is.na(d) # TRUE 
```

# url - 如何使用 MongoDB/Node.js 创建友好的 URL？

> ID：10274832
> 
> 赞同：6
> 
> 时间：2012-04-23T04:34:48.217
> 
> 标签：url, node.js, mongodb

例如，假设在设计博客应用程序时，我想要类似的东西

domain.com/post/729

代替

domain.com/post/4f89dca9f40090d974000001

红宝石有以下

[https://github.com/hakanensari/mongoid-slug](https://github.com/hakanensari/mongoid-slug)

Node.js 中是否有等价物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T06:11:52.740

MongoDB 中的 id 实际上是一个十六进制值，可以将其转换为数值，您可以使用以下代码在数据库中搜索数值，例如 1、2、3.. 并且此代码将该值转换为适当的十六进制

```
article_collection.db.json_serializer.ObjectID.createFromHexString(id) 
```

其中 article_collection 是您的收藏对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T04:49:39.480

GitHub 上有很多不同的项目，例如[https://github.com/dodo/node-slug](https://github.com/dodo/node-slug)和[https://github.com/stipsan/String.Slugify.js](https://github.com/stipsan/String.Slugify.js)，但它们专注于从字符串中生成有效的 URL（通常是帖子主题或文章标题）。我还没有看到任何采用随机数的方法，并且有些方法会产生更短的随机数（？）和唯一的数字。

就我个人而言，我的 post 对象上只有一个令牌字段，其中包含一个唯一值，该值比直接使用 DB id 短（并且更安全一点）。如果您使用的是 Mongoose，则可以通过在您的 Mongoose 模型上挂钩 pre 'Save' 事件来自动生成令牌。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T04:51:51.210

有几种方法：

1-假设您尝试为每篇博客文章提供唯一的 id。为什么不覆盖博客集合中文档的“_id”字段？示例文件是：

```
{ "_id" : 122 , "content" : { "title: ..... } 
```

不过，您将不得不寻找一种方法来生成自动增量 id，这很容易。但是不推荐使用这种类型的主键。 [http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field](http://www.mongodb.org/display/DOCS/How+to+Make+an+Auto+Incrementing+Field)

2- 让_id 字段保持原样，并额外存储一个整数键'blogid'，您必须`ensureIndex`在'blogid' 字段上运行，但要使blogid 快速访问。存储开销很小，因为您将在文档中存储一个键名和一个整数。

示例文件是：

```
{ "_id" : xxxxxxxxxx ,"blogid" : 122, "content" : { "title: ..... } 
```

# c - C中的素数

> ID：10274837
> 
> 赞同：3
> 
> 时间：2012-04-23T04:35:34.097
> 
> 标签：c, numbers, division, trial, sieve

```
int prime(unsigned long long n){
    unsigned val=1, divisor=7;
    if(n==2 || n==3) return 1; //n=2, n=3 (special cases).
    if(n<2 || !(n%2 && n%3)) return 0; //if(n<2 || n%2==0 || n%3==0) return 0;
    for(; divisor<=n/divisor; val++, divisor=6*val+1) //all primes take the form 6*k(+ or -)1, k[1, n).
        if(!(n%divisor && n%(divisor-2))) return 0; //if(n%divisor==0 || n%(divisor-2)==0) return 0;
    return 1;
} 
```

上面的代码是一个朋友为了得到一个素数而写的。它似乎在使用某种筛分，但我不确定它是如何工作的。下面的代码是我不太棒的版本。我会使用`sqrt`我的循环，但我看到他在做其他事情（可能与筛分有关），所以我没有打扰。

```
int prime( unsigned long long n ){
    unsigned i=5;
    if(n < 4 && n > 0)
        return 1;
    if(n<=0 || !(n%2 || n%3))
        return 0;
    for(;i<n; i+=2)
        if(!(n%i)) return 0;
    return 1;
} 
```

我的问题是：他到底在做什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T04:48:59.433

你朋友的代码利用了这样一个事实，即对于 N > 3，所有素数都采用 (6×M±1) 的形式，对于 M = 1, 2, ...（所以对于 M = 1，素数候选者是 N = 5 和 N = 7，这两个都是素数）。此外，所有素数对都像 5 和 7。这只检查每 3 个奇数中的 2 个，而您的解决方案检查 3 个奇数中的 3 个。

您朋友的代码正在使用除法来实现类似于平方根的结果。也就是说，条件`divisor <= n / divisor`或多或少等同于，但比溢出更慢且更安全`divisor * divisor <= n`。`unsigned long long max = sqrt(n);`在循环外使用可能会更好。与搜索更多可能值的建议解决方案相比，这大大减少了检查量。平方根检查依赖于这样一个事实：如果 N 是复合的，那么对于给定的一对因子 F 和 G（使得 F×G = N），其中一个将小于或等于 N 的平方根，并且另一个将大于或等于 N 的平方根。

* * *

正如[Michael Burr](https://stackoverflow.com/users/12711/michael-burr)所指出的，朋友的素数函数将 25 (5×5) 和 35 (5×7) 识别为素数，并生成 1000 以下的 177 个数作为素数，而我相信，该范围内只有 168 个素数。其他错误识别的复合材料是 121 (11×11)、143 (13×11)、289 (17×17)、323 (17×19)、841 (29×29)、899 (29×31)。

测试代码：

```
#include <stdio.h>

int main(void)
{
    unsigned long long c;

    if (prime(2ULL))
        printf("2\n");
    if (prime(3ULL))
        printf("3\n");
    for (c = 5; c < 1000; c += 2)
        if (prime(c))
            printf("%llu\n", c);
    return 0;
} 
```

* * *

### 固定代码。

原始代码的问题在于它过早停止检查，因为`divisor`设置为要检查的两个数字中的较大者，而不是较小者。

```
static int prime(unsigned long long n)
{
    unsigned long long val = 1;
    unsigned long long divisor = 5;

    if (n == 2 || n == 3)
        return 1;
    if (n < 2 || n%2 == 0 || n%3 == 0)
        return 0;
    for ( ; divisor<=n/divisor; val++, divisor=6*val-1)
    {
        if (n%divisor == 0 || n%(divisor+2) == 0)
            return 0;
    }
    return 1;
} 
```

请注意，该修订更易于理解，因为它不需要解释尾部注释中的简写否定条件。还要注意循环体中的`+2`而不是。`-2`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T04:44:19.470

他正在检查基础 6k+1/6k-1，因为所有素数都可以用这种形式表示（所有整数都可以用 6k+n 的形式表示，其中 -1 <= n <= 4）。所以是的，它是一种筛分形式……但不是严格意义上的。

更多信息： [http ://en.wikipedia.org/wiki/Primality_test](http://en.wikipedia.org/wiki/Primality_test)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T05:05:52.150

如果 6k+-1 部分令人困惑，请注意，您可以对大多数形式执行一些因式分解，`6k+n`有些显然是复合的，有些需要测试。

考虑数字：
6k + 0 -> 复合
6k + 1 -> 不明显复合
6k + 2 -> 2(3k+1) --> 复合
6k + 3 -> 3(2k+1) --> 复合
6k + 4 -> 2(3k+2) -> 复合
6k + 5 -> 不明显复合

我以前没见过这个小技巧，所以它很简洁，但效用有限，因为[埃拉托色尼筛子](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)更有效地找到*许多*小的素数，而更大的素数则[受益于更快、更智能的测试](http://en.wikipedia.org/wiki/Primality_test#Fast_deterministic_tests)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-04T16:24:20.747

```
#include<stdio.h>
int main()
{
    int i,j;
    printf("enter the value :");
    scanf("%d",&i);

    for (j=2;j<i;j++)
    {
        if (i%2==0 || i%j==0)
        {
            printf("%d is not a prime number",i);
            return 0;
        }
        else
        {
            if (j==i-1)
            {
                printf("%d is a prime number",i);
            }
            else
            {
                continue;
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-02-02T09:15:45.983

```
#include<stdio.h>

int main()
{
   int n, i = 3, count, c;

   printf("Enter the number of prime numbers required\n");
   scanf("%d",&n);

   if ( n >= 1 )
   {
      printf("First %d prime numbers are :\n",n);
      printf("2\n");
    }

   for ( count = 2 ; count <= n ;  )
   {
      for ( c = 2 ; c <= i - 1 ; c++ )
      {
     if ( i%c == 0 )
        break;
  }
      if ( c == i )
      {
         printf("%d\n",i);
         count++;
      }
      i++;
   }

   return 0;
} 
```

# c# - 我是否需要声明我不想使用“OutputCacheLocation.None”来缓存它？

> ID：10274843
> 
> 赞同：1
> 
> 时间：2012-04-23T04:36:51.550
> 
> 标签：c#, asp.net, asp.net-mvc-3, c#-4.0

我经常在网络上看到“OutputCacheLocation.None”，例如以下站点。
[http://msdn.microsoft.com/en-us/library/gg508808(v=vs.98).aspx](http://msdn.microsoft.com/en-us/library/gg508808(v=vs.98).aspx)

我想知道我是否应该声明它，即使我没有明确指出让它被缓存.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:21:25.940

不，没有必要。我至少不使用它。

我一直在写：

```
[OutputCache(NoStore=true, Duration=0)]
public ActionResult MyAction()
{
} 
```

但是，我从未尝试排除其中一个属性。`NoStore`可能就够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:14:31.193

那么 OutputCacheLocation 默认设置为 Any：

[http://msdn.microsoft.com/en-us/library/hdxfb6cy.aspx](http://msdn.microsoft.com/en-us/library/hdxfb6cy.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:00:49.703

这不是为 MVC3 设置缓存策略的唯一方法。

您也可以将其应用于操作级别。或者，直接写入响应：

```
response.setHeader( "Pragma", "no-cache" );
response.setHeader( "Cache-Control", "no-cache" );
response.setDateHeader( "Expires", 0 ); 
```

在这里查看更多信息：http: [//www.codeguru.com/csharp/article.php/c18745/ASPNET-MVC3-Caching.htm](http://www.codeguru.com/csharp/article.php/c18745/ASPNET-MVC3-Caching.htm)

# .net - .NET JSON 序列化：如何将 DataContract 作为另一个 DataContract 的成员

> ID：10274850
> 
> 赞同：0
> 
> 时间：2012-04-23T04:37:55.890
> 
> 标签：.net, json, serialization

我正在尝试序列化一个包含另一个数据协定对象作为参数的 .net 对象。代码如下...

```
[DataContract]
        public class JsonObject2
        {
            [DataMember(Name = "field1")]
            string field1 { get; set; }
            [DataMember(Name = "field2")]
            string field2 { get; set; }
            [DataMember(Name = "field3")]
            object[][] test = { new object[]{"key1", "value1"}, new object[]{"key2", "value2"}, new object[]{"key3", "value3"} };
        }

        [DataContract]
        public class JsonObject3
        {
            [DataMember(Name = "field1")]
            public string field1 { get; set; }
            [DataMember(Name = "field2")]
            public object field2 { get; set; }
        }

DataContractJsonSerializer dcjs2 = new DataContractJsonSerializer(typeof(JsonObject3));

                JsonObject3 obj3 = new JsonObject3();
                obj3.field1 = "hello";
                obj3.field2 = new JsonObject2();
                dcjs2.WriteObject(s, obj3);
                s.Position = 0;
                MessageBox.Show(new StreamReader(s).ReadToEnd()); 
```

执行上述操作会导致以下异常...

"{"类型 'JSONParser.Form1+JsonObject2' 与数据合同名称 'Form1.JsonObject2:http://schemas.datacontract.org/2004/07/JSONParser' 不是预期的。将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。"}"

我不知道如何执行该例外中给出的任何建议。

1.  您如何添加到 KnownTypes 列表中？
2.  你如何使用 KnownTypeAttribute ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:52:50.143

好的，想通了怎么做。我不想删除这个问题，以防其他人发现它有用，所以这里是解决方案......

```
[DataContract]
    [KnownType(typeof(JsonObject2))]
    public class JsonObject2
    {
        [DataMember(Name = "field1")]
        string field1 { get; set; }
        [DataMember(Name = "field2")]
        string field2 { get; set; }
        [DataMember(Name = "field3")]
        object[][] test = { new object[]{"key1", "value1"}, new object[]{"key2", "value2"}, new object[]{"key3", "value3"} };
    }

    [DataContract]
    public class JsonObject3
    {
        [DataMember(Name = "field1")]
        public string field1 { get; set; }    
        [DataMember(Name = "field2")]
        public object field2 { get; set; }
    } 
```

注意到`[KnownType(typeof(JsonObject2))]`上面 JsonObject2 类的声明了吗？那解决了它。

# android - 打开活动时出错

> ID：10274855
> 
> 赞同：0
> 
> 时间：2012-04-23T04:38:24.413
> 
> 标签：android

```
java.lang.RuntimeException: Unable to start activity
ComponentInfo{com.applexus.PROJMANAGER/com.applexus.PROJMANAGER.CalendarType}: 
android.view.InflateException: Binary XML file line #60: Error inflating class 
com.applexus.Scheduler.CalendarView 
```

单击我的日历活动时出现此错误。

这是在我的活动中使用的日历视图，我在打开活动时遇到错误。这是代码：

```
public class CalendarView extends ImageView {
private static int WEEK_TOP_MARGIN = 74;
private static int WEEK_LEFT_MARGIN = 40;
private static int CELL_WIDTH = 58;
private static int CELL_HEIGH = 53;
private static int CELL_MARGIN_TOP = 92;
private static int CELL_MARGIN_LEFT = 39;
private static float CELL_TEXT_SIZE;

private static final String TAG = "CalendarView"; 
private Calendar mRightNow = null;
private Drawable mWeekTitle = null;
private Cell mToday = null;
private Cell[][] mCells = new Cell[6][7];
private OnCellTouchListener mOnCellTouchListener = null;
MonthDisplayHelper mHelper;
Drawable mDecoration = null;

public interface OnCellTouchListener {
    public void onTouch(Cell cell);
}

public CalendarView(Context context) {
    this(context, null);
}

public CalendarView(Context context, AttributeSet attrs) {
    this(context, attrs, 0);
}

public CalendarView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mDecoration = context.getResources().getDrawable(R.drawable.typeb_calendar_today);      
    initCalendarView();
}

private void initCalendarView() {
    mRightNow = Calendar.getInstance();
    // prepare static vars
    Resources res = getResources();
    WEEK_TOP_MARGIN  = (int) res.getDimension(R.dimen.week_top_margin);
    WEEK_LEFT_MARGIN = (int) res.getDimension(R.dimen.week_left_margin);

    CELL_WIDTH = (int) res.getDimension(R.dimen.cell_width);
    CELL_HEIGH = (int) res.getDimension(R.dimen.cell_heigh);
    CELL_MARGIN_TOP = (int) res.getDimension(R.dimen.cell_margin_top);
    CELL_MARGIN_LEFT = (int) res.getDimension(R.dimen.cell_margin_left);

    CELL_TEXT_SIZE = res.getDimension(R.dimen.cell_text_size);
    // set background
    setImageResource(R.drawable.background);
    mWeekTitle = res.getDrawable(R.drawable.calendar_week);

    mHelper = new MonthDisplayHelper(mRightNow.get(Calendar.YEAR), mRightNow.get(Calendar.MONTH));

}

private void initCells() {
    class _calendar {
        public int day;
        public boolean thisMonth;
        public _calendar(int d, boolean b) {
            day = d;
            thisMonth = b;
        }
        public _calendar(int d) {
            this(d, false);
        }
    };
    _calendar tmp[][] = new _calendar[6][7];

    for(int i=0; i<tmp.length; i++) {
        int n[] = mHelper.getDigitsForRow(i);
        for(int d=0; d<n.length; d++) {
            if(mHelper.isWithinCurrentMonth(i,d))
                tmp[i][d] = new _calendar(n[d], true);
            else
                tmp[i][d] = new _calendar(n[d]);

        }
    }

    Calendar today = Calendar.getInstance();
    int thisDay = 0;
    mToday = null;
    if(mHelper.getYear()==today.get(Calendar.YEAR) && mHelper.getMonth()==today.get(Calendar.MONTH)) {
        thisDay = today.get(Calendar.DAY_OF_MONTH);
    }
    // build cells
    Rect Bound = new Rect(CELL_MARGIN_LEFT, CELL_MARGIN_TOP, CELL_WIDTH+CELL_MARGIN_LEFT, CELL_HEIGH+CELL_MARGIN_TOP);
    for(int week=0; week<mCells.length; week++) {
        for(int day=0; day<mCells[week].length; day++) {
            if(tmp[week][day].thisMonth) {
                if(day==0 || day==6 )
                    mCells[week][day] = new RedCell(tmp[week][day].day, new Rect(Bound), CELL_TEXT_SIZE);
                else 
                    mCells[week][day] = new Cell(tmp[week][day].day, new Rect(Bound), CELL_TEXT_SIZE);
            } else {
                mCells[week][day] = new GrayCell(tmp[week][day].day, new Rect(Bound), CELL_TEXT_SIZE);
            }

            Bound.offset(CELL_WIDTH, 0); // move to next column 

            // get today
            if(tmp[week][day].day==thisDay && tmp[week][day].thisMonth) {
                mToday = mCells[week][day];
                mDecoration.setBounds(mToday.getBound());
            }
        }
        Bound.offset(0, CELL_HEIGH); // move to next row and first column
        Bound.left = CELL_MARGIN_LEFT;
        Bound.right = CELL_MARGIN_LEFT+CELL_WIDTH;
    }       
}

@Override
public void onLayout(boolean changed, int left, int top, int right, int bottom) {
    Rect re = getDrawable().getBounds();
    WEEK_LEFT_MARGIN = CELL_MARGIN_LEFT = (right-left - re.width()) / 2;
    mWeekTitle.setBounds(WEEK_LEFT_MARGIN, WEEK_TOP_MARGIN, WEEK_LEFT_MARGIN+mWeekTitle.getMinimumWidth(), WEEK_TOP_MARGIN+mWeekTitle.getMinimumHeight());
    initCells();
    super.onLayout(changed, left, top, right, bottom);
}

public void setTimeInMillis(long milliseconds) {
    mRightNow.setTimeInMillis(milliseconds);
    initCells();
    this.invalidate();
}

public int getYear() {
    return mHelper.getYear();
}

public int getMonth() {
    return mHelper.getMonth();
}

public void nextMonth() {
    mHelper.nextMonth();
    initCells();
    invalidate();
}

public void previousMonth() {
    mHelper.previousMonth();
    initCells();
    invalidate();
}

public boolean firstDay(int day) {
    return day==1;
}

public boolean lastDay(int day) {
    return mHelper.getNumberOfDaysInMonth()==day;
}

public void goToday() {
    Calendar cal = Calendar.getInstance();
    mHelper = new MonthDisplayHelper(cal.get(Calendar.YEAR), cal.get(Calendar.MONTH));
    initCells();
    invalidate();
}

public Calendar getDate() {
    return mRightNow;
}

@Override
public boolean onTouchEvent(MotionEvent event) {
    if(mOnCellTouchListener!=null){
        for(Cell[] week : mCells) {
            for(Cell day : week) {
                if(day.hitTest((int)event.getX(), (int)event.getY())) {
                    mOnCellTouchListener.onTouch(day);
                }                       
            }
        }
    }
    return super.onTouchEvent(event);
}

public void setOnCellTouchListener(OnCellTouchListener p) {
    mOnCellTouchListener = p;
}

@Override
protected void onDraw(Canvas canvas) {
    // draw background
    super.onDraw(canvas);
    mWeekTitle.draw(canvas);

    // draw cells
    for(Cell[] week : mCells) {
        for(Cell day : week) {
            day.draw(canvas);           
        }
    }

    // draw today
    if(mDecoration!=null && mToday!=null) {
        mDecoration.draw(canvas);
    }
}

public class GrayCell extends Cell {
    public GrayCell(int dayOfMon, Rect rect, float s) {
        super(dayOfMon, rect, s);
        mPaint.setColor(Color.LTGRAY);
    }           
}

private class RedCell extends Cell {
    public RedCell(int dayOfMon, Rect rect, float s) {
        super(dayOfMon, rect, s);
        mPaint.setColor(0xdddd0000);
    }           

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:45:58.530

你检查过xml文件吗？有问题吗？您的日志说充气异常，所以我认为这可能是由您的 xml 布局或充气过程有问题引起的。你可以在这里发布你的活动源代码，我们会看看我们能做些什么来提供帮助

# iphone - 制作一个自定义视图，其中包含一个 UIImage 和一个 UILabel 内部（在图像底部）

> ID：10274859
> 
> 赞同：2
> 
> 时间：2012-04-23T04:38:58.477
> 
> 标签：iphone, xcode, uiimageview, custom-controls, uilabel

![带有 UIImage 的自定义视图，其中包含 UILabel](../Images/7f2eee9ee1109b850278e90639c01d8b.png)

我尝试制作一个很酷的新闻应用，比如 BBC 新闻。我认为每个***新闻项（见图）必须有一个 UIImage 和 UILabel（新闻标题）在里面***--> 我们必须创建自定义视图。

我已经阅读了如何在 Apple Developer 网站上创建自定义视图，但它只是介绍，没有一些示例。

我的问题是： + 如何创建自定义视图（内部带有 UILabel 的 UIImage） + 如何将该视图放在主屏幕应用程序的 tableview 中。

预先感谢。抱歉英语不好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T07:08:05.047

您可以通过多种方式完成此任务

1.您可以使用 UIImageView 和 UILabel 创建一个**自定义视图**并将其添加为 tableViewCell 中的子视图

2.您可以使用所需的标签和UIImageView创建**自定义TableViewCell并直接使用它。**

使用 UIImageView 和 UILabel 创建自定义视图

右击“项目”->选择“新建文件”->选择“Objective C Class”->选择“UIView的子类”

自定义视图.h

```
@interface CustomView : UIView
{
}
- (id)initWithFrame:(CGRect)frame withImage:(UIImage *)img withLabel:(NSString *)lbl ;
@end 
```

自定义视图.m

```
@implementation CustomView

- (id)initWithFrame:(CGRect)frame withImage:(UIImage *)img withLabel:(NSString *)lbl 
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code

        UIImageView * imageView1 = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width, frame.size.height - 30)];
        [imageView1 setImage:img];
        [self addSubview:imageView1];
        [imageView1 release];

        UILabel * label1 = [[UILabel alloc] initWithFrame:CGRectMake(0, frame.size.height - 30, frame.size.width,30)];
        label1.text = lbl;
        label1.textColor = [UIColor blackColor];
        [self addSubview:label1];
        [label1 release];
    }
    return self;
}

@end 
```

使用它

`#import "CustomView.h"`使用和 导入 CustomView

```
CustomView * cView = [[CustomView alloc] initWithFrame:CGRectMake(0, 0, 100, 100) withImage:[UIImage imageNamed:@"img.png"] withLabel:@"Testasddddddddddddd"];
[self.view addSubview:cView];
[cView release]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:03:19.577

试试这个..

```
 UIButton *objBtn;

    objBtn = [[UIButton alloc] init];
    objBtn.frame = CGRectMake(x, y, W, H);
    [objBtn setBackgroundImage:[UIImage imageNamed:@"defalt_person_01.png"] forState:UIControlStateNormal];
    [objBtn addTarget:self action:@selector(SelectLanguageBtn:) forControlEvents:UIControlEventTouchUpInside];
    objBtn.tag = 101;
    [self.view addSubview:objBtn];

    //Your News On Imagebtn
    UILabel *newsLab=[[UILabel alloc]initWithFrame:CGRectMake(BtnX, BtnY, W, H)];
    newsLab.textAlignment=UITextAlignmentCenter;
    newsLab.textColor=[UIColor orangeColor];

    newsLab.backgroundColor=[UIColor clearColor];

    newsLab.text = @"My News";

    newsLab.font=[UIFont fontWithName:@"TimesNewRomanPS-BoldMT" size:30];
    [objBtn addSubview:newsLab]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-06T07:59:12.093

除了@Shaheen M Basheer 回答，您还可以尝试[MGBox2](https://github.com/sobri909/MGBox2)开源库，它可以帮助您创建自定义 UIViews 并将它们排列在不同的布局中，还可以查看随附的示例。它还支持网格布局，您可以使用它来获得您想要的.

# mysql - 关于 MySQL Group by

> ID：10274861
> 
> 赞同：1
> 
> 时间：2012-04-23T04:39:24.907
> 
> 标签：mysql, sql, group-by

我有

```
TableName
==============================
ID | A_ID | BLABLA | TIME 
-----------------------------------------------
1  | n1 | X | Time 
2  | n1 | X | Time 
3  | n1 | X | Time 
4  | n1 | Y | Time 
5  | n1 | Z | Time 
6  | n2 | Y | Time 
7  | n2 | Y | Time 
8  | n2 | Y | Time 
9  | n3 | X | Time 
10 | n4 | Z | Time 
11 | n4 | Z | Time 
13 | n5 |   | Time 
14 | n6 | X | Time 
15 | n7 |   | Time 
16 | n8 |   | Time 
================================== 
```

我只想查询显示表结果和使用 MySQL 查询。

```
==============================
A_ID | BLABLA 
-----------------------------------------------
n1 | X 
n1 | Y 
n1 | Z 
n2 | Y 
n3 | X 
n4 | Z 
n5 | 
n6 | X 
n7 | 
n8 | 
================================== 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T04:56:06.193

你所需要的只是`GROUP BY A_ID, BLABLA`，像这样：

```
SELECT A_ID, BLABLA 
FROM TableName
GROUP BY A_ID, BLABLA 
```

# java - 完全删除 jtable 网格（单元格边框）

> ID：10274864
> 
> 赞同：7
> 
> 时间：2012-04-23T04:40:01.800
> 
> 标签：java, swing, jtable, border, cell

如何完全删除摆动 JTable 中单元格周围的边框，使单元格之间没有间隙？这是我尝试过的：

```
table.setShowGrid(false);
table.setShowVerticalLines(false);
table.setShowHorizontalLines(false); 
```

并编写一个单元格渲染器并使用：

```
setBorder(BorderFactory.createEmptyBorder(0,0,0,0)); 
```

对于每个单独的单元格。

但结果是单元格之间的线条被移除，但它们之间留下了 1 个像素的间隙。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T06:20:05.193

> 并编写一个单元格渲染器并使用：

一切都取决于渲染器返回的内容，但没有渲染器对我有用

*   setIntercellSpacing()

*   设置显示网格（）

![在此处输入图像描述](../Images/7b5d2799151a64b7f73723a125e860e5.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.DefaultTableModel;

public class TableExample {

    public TableExample() {
        Object[][] data1 = new Object[50][5];
        for (int i = 0; i < data1.length; i++) {
            data1[i][0] = "Company # " + (i + 1);
            for (int j = 1; j < data1[i].length; j++) {
                data1[i][j] = "" + (i + 1) + ", " + j;
            }
        }
        String[] headers = {"Col 1", "Col 2", "Col 3", "Col 4", "Col 5"};
        DefaultTableModel model1 = new DefaultTableModel(data1, headers);
        final JTable jTable3 = new TableBackroundPaint0(data1, headers);
        //final JTable jTable3 = new JTable(data1, headers);
        jTable3.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        jTable3.setModel(model1);
        final JScrollPane sp3 = new JScrollPane();
        sp3.setViewportView(jTable3);
        jTable3.setIntercellSpacing(new Dimension(0, 0));
        jTable3.setShowGrid(false);
        //jTable3.setPreferredScrollableViewportSize(jTable3.getPreferredSize());
        JFrame frame = new JFrame("tableSelection");
        frame.add(sp3);
        frame.setSize(new Dimension(600, 200));
        //frame.pack();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TableExample te = new TableExample();
            }
        });
    }
}

class TableBackroundPaint0 extends JTable {

    private static final long serialVersionUID = 1L;

    TableBackroundPaint0(Object[][] data, Object[] head) {
        super(data, head);
        setOpaque(false);
        ((JComponent) getDefaultRenderer(Object.class)).setOpaque(false);
    }

    @Override
    public void paintComponent(Graphics g) {
        Color background = new Color(168, 210, 241);
        Color controlColor = new Color(230, 240, 230);
        int width = getWidth();
        int height = getHeight();
        Graphics2D g2 = (Graphics2D) g;
        Paint oldPaint = g2.getPaint();
        g2.setPaint(new GradientPaint(0, 0, background, width, 0, controlColor));
        g2.fillRect(0, 0, width, height);
        g2.setPaint(oldPaint);
        for (int row : getSelectedRows()) {
            Rectangle start = getCellRect(row, 0, true);
            Rectangle end = getCellRect(row, getColumnCount() - 1, true);
            g2.setPaint(new GradientPaint(start.x, 0, controlColor, (int) ((end.x + end.width - start.x) * 1.25), 0, Color.orange));
            g2.fillRect(start.x, start.y, end.x + end.width - start.x, start.height);
        }
        super.paintComponent(g);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:46:22.870

您可以将边框颜色设置为单元格的背景颜色。另外，请看看这些例子，

[http://www.java2s.com/Code/Java/Swing-Components/CellBorderTableExample.htm](http://www.java2s.com/Code/Java/Swing-Components/CellBorderTableExample.htm)

[http://www.esus.com/docs/GetQuestionPage.jsp?uid=1290](http://www.esus.com/docs/GetQuestionPage.jsp?uid=1290)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-11T10:36:54.950

如果您的列模型不是自动生成的（没有数据绑定），您可以在 JTable 中使用这些方法来删除网格。

```
 setShowGrid(false);
 setRowMargin(0);
 setShowVerticalLines(false);
 setShowHorizontalLines(false); 
```

但是，如果您使用数据绑定创建列模型，那么您就有麻烦了。也就是说，即使您调用这些方法，它们仍然在每列边距中绘制白色 1 像素间隙。

您可以使用自定义 DefaultTableColumnModel 删除该列边距。

```
 private class CustomDefaultTableColumnModel extends DefaultTableColumnModel{

 @Override
 public void setColumnMargin(int newMargin) {
    //Always set ColumnMargin to zero.
    //Because after the column data binding its internally set one as ColumnMargin.
   //That course to paint white color grid.
   //To stop we override the setColumnMargin and pass zero to ColumnMargin.
  super.setColumnMargin(0);
  }
} 
```

然后，您可以将自定义表格列模型添加到表格中。

```
 setColumnModel(new CustomDefaultTableColumnModel()); 
```

# python - 根据有序条件对 Python 字典列表进行排序

> ID：10274868
> 
> 赞同：0
> 
> 时间：2012-04-23T04:40:43.523
> 
> 标签：python, list, sorting

嗨，我想以最 Pythonic 的方式根据有序标准订购字典列表。例如：

```
[{'foo': FOO1}, {'foo': FOO2}, {'foo': FOO10}] 
```

条件是可变的，例如，我想先按 [FOO2, FOO1, FOO8, FOO10] 排序，结果将是：

```
[{'foo': FOO2}, {'foo': FOO1}, {'foo': FOO10}] 
```

然后，情况发生了变化，现在我们有了另一个标准 [FOO2, FOO10, FOO1]，结果将是：

```
[{'foo': FOO2}, {'foo': FOO10}, {'foo': FOO1}] 
```

注意：条件将始终具有与键“foo”相关的符号。

有任何想法吗？

```
to_sort = [{'foo': FOO1}, {'foo': FOO2}, {'foo': FOO10}]
to_sort.sort(key=lambda x: x....) 
```

* * *

编辑：我想通了：

```
>>> to_sort = [{'foo': FOO1}, {'foo': FOO2}, {'foo': FOO10}]
>>> criteria = [FOO10, FOO2, FOO1]
>>> to_sort.sort(key=lambda x: criteria.index(x['foo']))
>>> to_sort
[{'foo': FOO10}, {'foo': FOO2}, {'foo': FOO1}] 
```

亲切的问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T04:43:26.973

你想要[`list.index()`](http://docs.python.org/library/stdtypes.html#mutable-sequence-types)。

# ios - 添加其他控件时的 UITableViewController 或 UIViewController

> ID：10274869
> 
> 赞同：4
> 
> 时间：2012-04-23T04:40:48.973
> 
> 标签：ios, cocoa-touch, uiviewcontroller, uitableview

我有许多包含表格视图的视图，但还有其他控件。到目前为止，我一直在继承 UIViewController 并手动向它添加一个 tableview（在它上面/下面使用我的其他控件）。没有太多麻烦，除了必须手动处理滚动，有时还需要调整大小（如果表格的内容是动态的）。

我只是发现 UITableView 的 tableHeaderView 和 tableFooterView 几乎可以处理你扔给他们的任何东西。我想我之前浏览过它们，认为它们与部分页眉/页脚有关，而它们当然根本不相关。

所以考虑到这一点，在我将一堆类转换为子类 UITableViewController 而不是 UIViewController 之前，这是标准做法吗？例如，如果我有一个视图，该视图主要是非表格内容，但动态表格视图在一半以下，那么简单地使用 UITableViewController 并将其周围的所有内容放在页眉/页脚中是否是个好主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:11:20.307

表格视图的页眉和页脚随着表格视图的内容滚动。如果您需要它们始终可见，那么您当前的方法是最好的。如果您不介意滚动标题视图，您确实可以重构您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:56:26.647

A`UIViewController`管理视图层次结构。如果您的视图包含重要的非`UITableView`内容，我将使用 a 管理视图层次结构`UIViewController`并将其`UITableView`作为子视图包含在视图控制器的`view`属性中。

# spring - 无法使用 STS 创建 spring 模板项目

> ID：10274871
> 
> 赞同：2
> 
> 时间：2012-04-23T04:41:04.653
> 
> 标签：spring

在创建新的 spring 模板项目时，我不断收到以下错误 -

```
Input for field toplevelpackage does not match the regex \w+\.\w+(\.\w+)+. 
```

我尝试了顶级包名称的所有组合。但似乎没有一个工作

```
com.springtest
com.springtest.*
com.springtest* 
```

我们不能将此字段留空。:-( 我使用的是 2.9.1 的 STS 版本

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T10:55:51.577

您需要定义一个包含 3 个或更多部分的顶级包名称。

例如

```
com.mycompany.myapp 
```

*顺便说一句：这正是正则表达式和对话框中的示例所说的*

# ruby-on-rails - rails，如何在函数中传递self

> ID：10274872
> 
> 赞同：2
> 
> 时间：2012-04-23T04:41:04.860
> 
> 标签：ruby-on-rails, parameters, self

消息和用户。我的消息属于_to 用户和用户 has_many 消息。

在我的一种观点中，我称之为

```
current_user.home_messages? 
```

在我的用户模型中，我有...

```
 def home_messages?
    Message.any_messages_for
  end 
```

最后在我的消息模型中，我有

```
scope :any_messages_for

    def self.any_messages_for
        Message.where("to_id = ?", self.id).exists? 
    end 
```

我一直试图在我的消息模型中获取 current_users id。我可以从我的视图顶部将 current_user 作为参数传递，但因为我在做

```
current_user.home_messages? 
```

我认为如果我使用self会更好。但是我该如何正确地引用它呢？

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T05:14:29.710

您可以使用 lambda。在您的消息模型中：

```
scope :any_messages_for, lambda {|user| where('user_id = ?', user.id)} 
```

这将像这样工作：

```
Message.any_messages_for(current_user) 
```

如果找到任何消息，您可以向用户模型添加一个方法以返回 true。在这种情况下，您使用实例方法并将实例作为 self 传递：

```
def home_messages?
  return true if Message.any_messages_for(self)
end 
```

但实际上，我只是在 User 模型中做这样的事情，而不必编写上述任何内容。这使用了在声明 :has_many 和 :belongs_to 关联时创建的 Rails 方法：

```
def home_messages?
  return true if self.messages.any?
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T04:49:28.340

您可以执行以下任一操作

```
def self.any_messages_for(id) #This is a class method
    Message.where("to_id = ?", id).exists? 
end 
```

调用上述方法你必须做

```
User.any_messages_for(current_user.id) #I am assuming any_messages_for is in `User` Model 
```

或者

```
def any_messages_for #This is a instance method
    Message.where("to_id = ?", self.id).exists? 
end 
```

调用上述方法你必须做

```
current_user.any_messages_for 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T04:52:27.393

你的 Message 类中的这些东西没有多大意义：

```
scope :any_messages_for

def self.any_messages_for
    Message.where("to_id = ?", self.id).exists? 
end 
```

宏自己定义了一个类方法，`scope`它也应该有另一个参数；此外，范围旨在或多或少地定义一组固定的查询参数，因此您的`any_messages_for`方法不是很范围；我认为你应该摆脱`scope :any_messages_for`.

在您的`any_messages_for`类方法中，`self`将是类本身，因此`self.id`不会是用户 ID，因此在您的`where`.

您应该在 Message 中有更多类似的内容：

```
def self.any_messages_for(user)
  where('to_id = ?', user.id).exists?
  # or exists?(:to_id => user.id)
end 
```

然后在用户中：

def home_messages? Message.any_messages_for(self) 结束

一旦所有这些都整理好，你就可以说`current_user.home_messages?`。

# java - 需要遍历两个项目数组进行比较，没有并行性

> ID：10274873
> 
> 赞同：0
> 
> 时间：2012-04-23T04:41:10.623
> 
> 标签：java, arrays, iteration

因此，对于我的 java 类，我必须编写一个程序来接受浇头，并为每个浇头在总价上增加 75 美分。由于这个错误，我还没有为空测试而烦恼。基本上我将拥有：

```
list1 = Valid Toppings
list2 = User Toppings 
```

用户浇头可以按任何顺序输入，因此将它们作为并行数组进行匹配没有任何意义。您可以在下面的代码片段中看到我使用的逻辑，但这是不合法的。当我尝试编译时，我的终端到处呕吐。我将如何实现下面的逻辑，或者完全实现我的逻辑的更好方法？

```
 for(x = 0; toppings.length < 3; x++)
    {
      if(toppings[x].equals(for(xx = 0; validToppings[0].length < 3; xx++) {validToppings[xx]})
        {setSize(size); price += .75;}
        else
        {System.out.println("Error in Pizza class: Attempt to set invalid pizza topping" + x + "(" + toppings[x] + ")")};
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:47:56.833

这里的问题是你试图使用一个 if 语句，它做一个布尔比较，一个 for 语句，它不能变成一个布尔值。

改为这样做：

```
for(int x = 0; topping.length < 3; x++){
         for(int xx = 0; vaildToppings[0].length < 3; xx++){
             if(toppings[x].equals(validToppings[xx]){
//do stuff
     }
} 
```

嵌套 for 循环是您的朋友。

topping.length < 3 因为您关闭的条件也是无意义的。考虑重新检查你的逻辑，我不知道你实际上想做什么，所以我不会做任何假设。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:45:06.070

你的代码被破坏的原因是你有 toppings.length < 3 和 validToppings[0].length < 3 当你想要的时候，大概是 x < 3 或 x < toppings.length

for 循环中的所有内容都应基于您的计数器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:49:42.000

试试这个：

```
for (int x = 0; x < toppings.length; x++)
{
    if (!validToppings.contains(toppings[x]))
    {
        //throw some error, or print a message, etc....
    }
    else
    {
        //do stuff
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T04:51:48.957

嵌套的 for 循环是正确的方法。不要忘记在循环本身（或其他地方，如果您想使用 C 风格）中声明循环计数器的类型，否则您将整天收到编译器错误。

```
for(int x = 0; x < toppings.length; x++) {
    for(int xx = 0; xx < validToppings[0].length; xx++) {
        if(toppings[x].equals(validToppings[xx]) {
            // Perform operations here.
    }
} 
```

作为旁注： `toppings.length < 3`在整个循环中可能是也可能不是真的；它永远不会是真的，从而导致循环不执行，或者它可能是真的，导致无限循环，不管`x`or `xx`。小心这种情况。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T04:57:19.787

我不确定你想做什么。如果您尝试测试一个字符串数组是否在另一个字符串数组中（如集合论中的“子集”）。那为什么不使用`ArrayList`类似这样的东西：（对不起，如果我的语法有点不对劲，我已经有一段时间没有做 java 了）

```
ArrayList<String> toppings = new ArrayList<>();
toppings.add("Pepperoni");
toppings.add("Olives");

ArrayList<String> validToppings = new ArrayList<>();
validToppings.add("Pepperoni");
validToppings.add("Salami");
validToppings.add("Olives");
validToppings.add("Cheese");

boolean toppingsValid = validToppings.containsAll(toppings); 
```

# visual-studio-2010 - 如何从 MSDN 中找出可用的列表框项功能？

> ID：10274878
> 
> 赞同：0
> 
> 时间：2012-04-23T04:41:35.260
> 
> 标签：visual-studio-2010, c++-cli

我使用列表框编写了一个 C++/CLI 程序。我google了半个小时，想办法清除列表框中所有存在的项目。我终于在 C# 论坛上看到了一个“Clear()”函数。我在我的程序中测试了这个功能，它工作正常。

我访问过msdn网站。[http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)

我在该页面中找不到任何“清除”方法。这次我很幸运能够使用 C# 论坛提示来解决我的 C++ 问题，但我想知道从 MSDN 找到我需要的信息的正确方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:02:16.100

你只是没有深入到那里。该`Items`物业是一个[`ListBox::OjectCollection Class`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.aspx)。集合类具有[`Clear`](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.clear.aspx)函数。您可以通过搜索 MSDN 站点并浏览页面上与您正在寻找的功能相关的所有链接来找到您需要的大部分信息。

# git - 如何通过 Tor 匿名在 github 上贡献？

> ID：10274879
> 
> 赞同：49
> 
> 时间：2012-04-23T04:41:57.620
> 
> 标签：git, github, privacy, anonymous, tor

我想匿名为 github 上的项目做出贡献。不作恶作剧，更本着匿名捐款的精神。

在线匿名的首选工具似乎是 TOR，它几乎适用于您可以在浏览器中执行的任何操作。但是，要在 github 上做贡献，似乎有必要使用命令行界面或 Mac 应用程序。

如何通过 Tor 在此设置中引导我的 git 操作？我怎样才能验证这确实是正在发生的事情？

**编辑：**请注意*假名*（使用虚假电子邮件地址）和*匿名*（使用无法与身份关联的 IP 地址）之间的区别。对 github 的假名访问是微不足道的；但是，我正在寻找匿名访问。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-23T15:52:39.143

您是否考虑过采用老式的“邮寄补丁”路线？您可以简单地检查存储库（如果需要，使用 Tor 和 Git-over-HTTPS），进行改进，然后`git diff`使用任何匿名消息服务向项目所有者发送补丁。想到自由网和邮政邮件。

请注意，如果我是一个大型（ish）项目的所有者，出于几个原因，我永远*不会*接受来自匿名实体的补丁。即使有问题的人不一定是邪恶的，在系统中拥有没有人负责的代码充其量是一个可怕的想法。另外，考虑一下代码所有权和版权问题。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2016-05-08T13:26:36.033

这些答案都没有提供完整的可用工作流程，我想`git push`，而不是发送电子邮件！这是正确执行此操作的方法，但需要进行一些设置。说明适用于 OSX

# 使用 tor+ssh 匿名发布到 github

1.  下载 tor 浏览器包和 tor 命令行代理

    ```
     brew install tor
     brew cask install torbrowser 
    ```

    1.1 在 Tor 浏览器中，创建一个新的电子邮件地址（我使用了 hmamail）。

    1.2 在tor浏览器中，新建一个github账号

2.  使用您的新电子邮件地址创建一个新的 ssh 密钥，仅用于 tor

    ```
    ssh-keygen -t rsa -b 4096 -C "satoshi_2@hmamail.com" 
    ```

    2.1。给它起一个名字，如：`~/.ssh/private_tor_rsa`

    2.2\. 在 github 中，转到[SSH 和 PGP 密钥](https://github.com/settings/keys)并添加一个新的**SSH**密钥，使标题令人难忘。

    2.3\. 在 github 中，将**Key**设置为您刚刚创建的公钥`clip < ~/.ssh/private_tor_rsa.pub`

3.  在 github 中，创建一个空的仓库，我们称之为`ByteCoin`，不要用 readme 初始化它。

4.  编辑 ssh 配置文件`~/.ssh/config`（如果不存在则创建）

    ```
    Host github-tor-alias
    User git
    HostName github.com
    IdentitiesOnly yes
    IdentityFile ~/.ssh/tor_only_rsa
    ProxyCommand nc -X 5 -x 127.0.0.1:9050 %h %p 
    ```

    您创建了一个名为`github-tor-alias`并告诉 ssh 使用代理`localhost:9050`并使用`tor_only_rsa`密钥进行身份验证的主机名。

5.  为您的新项目设置配置以使用 tor 代理和凭据。

    ```
    mkdir secret-project
    cd secret-project
    git init

    git config --add user.name satoshi_2
    git config --add user.email staoshi_2@hmamail.com 
    ```

# 下一行非常重要

5.1。注意**ssh://git**和**github-tor-alias**

```
 git remote add origin ssh://git@github-tor-alias/staoshi_2/ByteCoin.git 
```

6.  还记得你是如何安装**Tor**命令行代理的吗？将其作为服务启动。它在 localhost:9050 上侦听

    ```
    brew services start tor 
    ```

7.  你准备好了吗？尝试推送到 github：

    ```
    git push origin master 
    ```

它奏效了吗？去仔细检查一切，我错过了什么吗？请编辑此答案！

# 恭喜

呼吸自由的空气并开始创作！

那么我们刚刚做了什么？我们创建了一个仅与 tor 网络相关联的新身份，就 github.com 而言，您是 staoshi_2，可以在世界任何地方。

tor 在 上运行代理`127.0.0.1:9050`，因为我们`ProxyCommand`在`~/.ssh/config`文件中设置了 a，所以您的所有流量都通过 tor 代理，git 使用您的新 ssh 密钥，因为您添加了和`IdentityFile`文件。`IdentitiesOnly``~/.ssh/config`

强大的东西。

让我们仔细检查一下你是不是真的匿名

8.  停下`tor`来再试`git push`一次，最好失败！

    ```
    ssh_exchange_identification: Connection closed by remote host
    fatal: Could not read from remote repository. 
    ```

    8.1。如果那个 git push 成功了，你猜怎么着，你没有使用 tor，github.com 知道你的 IP，弄清楚如何让它工作，然后用一个新的电子邮件地址重新开始。

# 9\. 快乐自由！

匿名。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-05-17T14:47:19.133

在 Tor 之前，有网吧和 Wi-Fi 热点。仅仅因为有一个与您的提交相关联的 IP 并不意味着它必须是*您*的。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-05-17T18:19:40.630

配置 git 代理服务器[让 git 使用代理服务器](https://stackoverflow.com/questions/783811/getting-git-to-work-with-a-proxy-server)

或者如果这不适用于 TOR 网络，那么只需`git`在主机使用 TOR 网络连接到外部世界的虚拟机中运行您的命令

我认为这会混淆您提交的来源，但匿名电子邮件部分可能仍然很困难。

匿名电子邮件提供商来来去去，但截至 2015 年，Lelantos 目前是 TOR 隐藏服务，提供 clearnet 电子邮件地址。[用比特币支付，但您可以使用http://www.xmr.to](http://www.xmr.to)匿名化所有比特币交易，这样您就可以使用更私密的门罗币网络支付比特币收据。

为什么不简单地使用您在 TOR 中创建的匿名电子邮件，永远不要从 TOR 外部访问它，并将其用于 github 合规性

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-06-20T23:08:20.473

该线程中的大多数答案都不是为了回答所提出的问题。

你问：是否可以通过tor来使用我操作系统的所有应用程序，从而进行匿名贡献。在为软件项目做贡献会使您面临法律风险的情况下（例如，在密码学是非法的情况下为密码库做贡献），可能需要这样做。

有人建议你使用邮政邮件（目前最流行的答案？），去你家旁边的网吧，那里很可能有一个摄像头，并使用非常脆弱的配置，这会让你处于危险之中。有些答案是完全愚蠢的，有些答案是足够有效的，尽管它们需要一切都完美设置才能工作。

可能会发生您（或您安装的某些软件）意外错误缩进或破坏配置文件的情况，导致您的连接明确地转到 github。此外，ISP 级别的攻击者可能会看到您正在安装哪些软件包进行开发，并且他能够识别您正在处理的项目类型。

在大多数情况下，这是不可接受的。对于我和我目前的设置，有必要：

*   与 Github 的所有连接都保证通过 TOR。
*   所有非 tor 连接都被丢弃，所有 DNS 都通过 TOR。
*   来自您机器的所有 TCP 流量都通过 tor 路由。这包括 apt-get，你的 IDE 建立的所有连接，一切。

这非常复杂，远远超出了我的范围。幸运的是，有些发行版允许这种事情，例如[Tails](https://tails.boum.org/)或[Whonix](http://sourceforge.net/projects/whonix/)。还有另一个发行版 Attack Vector，它可能随开发工具一起提供，但尚未得到证实。

安装其中之一后，您将能够通过 Tor 浏览器访问 github 的界面，并且您将能够通过 SSH 或 HTTPS 提交，无论您的偏好如何，无需特殊配置。

我建议使用 Whonix，因为它更容易保存您需要工作的数据，并保证主机上的根级别妥协不会危及您的身份。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-05-18T14:53:33.187

您可以尝试使用[Cloud 9 IDE](http://c9.io/)

通过 Tor 访问它，创建新的 Github 和 Bitbucket 帐户。

分叉您想要贡献的任何项目，进行更改，发送拉取请求或补丁

# 赢

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-16T02:40:35.537

在 Linux 中：

安装 tor 并前往[http://tormail.org/](http://tormail.org/)为自己获取一个匿名电子邮件帐户。

在本地机器上让自己成为一个新的 linux 用户并为该用户生成一个新的 ssh 密钥，这样您的匿名帐户就不会与您的其他 github 帐户拥有相同的公钥 :-) 您将通过该用户完成所有匿名工作帐户

接下来使用您的 tormail 电子邮件注册 github 并安装您刚刚生成的公共 ssh 密钥

现在安装 socat [http://freecode.com/projects/socat](http://freecode.com/projects/socat)。但是您可能会在发行版的包管理器中找到它。

现在编辑 /etc/ssh/ssh_config 并添加

```
`HOST *
ProxyCommand socat STDIO SOCKS4A:127.0.0.1:%h:%p,socksport=9050` 
```

`确保你的 tor 被配置为使用端口 9050。你应该在你的 torrc 文件中看到这个：`

```
``SocksListenAddress 127.0.0.1
SocksPort 9050`` 
```

``现在你所有的 SSH 都将通过 TOR，包括任何通过 ssh 协议的 github 访问。所以使用 ssh 协议进行克隆： git clone git@github.com:bitcoin/bitcoin.git``

 ``使用wireshark 验证没有任何东西直接进入github。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-12T06:18:32.580

您可以在项目的克隆上本地提交，然后使用`git format-patch`通过电子邮件发送提交。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-07-10T14:46:17.643

您可以通过 Tor 使用`tsocks`或`torify`使任何应用程序工作。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-12-19T12:06:20.343

另一个简单的解决方案：

```
$ git remote add tor https://github.com/yourUser/yourProject
$ torsocks git pull tor
$ torsocks git push tor 
```

您显然需要记住`tor`在您的 git 命令中添加后缀，或者您可以配置别名：

```
$ alias gpushtor="torsocks git push tor"
$ alias gpulltor="torsocks git pull tor" 
```

（注意：它只适用于`https://`遥控器）``

# php - 提交表单时出现codeigniter csrf错误

> ID：10274880
> 
> 赞同：2
> 
> 时间：2012-04-23T04:42:12.223
> 
> 标签：php, forms, codeigniter, csrf, csrf-protection

我有一个使用 codeigniter 括号的表格

```
echo form_open('signup');

echo form_close(); 
```

当我提交它时，我收到以下错误

```
An Error Was Encountered

The action you have requested is not allowed. 
```

**不是** `always`，但经常...

即使隐藏的输入字段存在于表单中：

```
<div style="display:none">
<input type="hidden" value="token name is here" name="csrf_token_name">
</div> 
```

这也发生在类似的表单上（登录）

**编辑：通过表单生成的 html**

```
<form accept-charset="utf-8" method="post" action="http://www.example.com/signup">
<div style="display:none">
<input type="hidden" value="93565fb5855d31af3d46bd655b11a4a6" name="csrf_token_name">
</div>
<input id="username" type="text" placeholder="Username" maxlength="20" value="" name="username">
<input id="email" type="text" placeholder="Email" value="" name="email">
<input id="password" type="password" placeholder="Password" value="" name="password">
<input id="submit" type="submit" value="Sign up" name="submit">
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T06:40:05.240

你这样做是不对的。

试试这个

```
 <input type="hidden" name="<?php echo $this->security->get_csrf_token_name(); ?>" value="<?php echo $this->security->get_csrf_hash();?>" /> 
```

该值必须是 codeigniter 为 csrf 令牌计算的值。

或使用表单助手，codeigniter 将自动添加此隐藏字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-26T11:51:43.820

就我而言，我只是增加了“csrf_expire”变量——令牌应该过期的秒数。

> 从 $config['csrf_expire'] = 7200; 到 $config['csrf_expire'] = 28800;

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-03-15T12:24:51.620

更改 $config['csrf_regenerate'] = TRUE;

到

$config['csrf_regenerate'] = 假；在配置文件中

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2014-12-12T03:25:33.407

如果您只想完全摆脱错误...绕过它们
的**最简单解决方案是：**

1.  打开你的*/config/config.php**文件***

2.  找到下面的行：
    `$config['csrf_protection'] = TRUE;`

3.  将其替换为...
    `$config['csrf_protection'] = FALSE;`

4.  保存更改。

* * *

**注意：**关闭 CSRF 保护意味着您可能会受到 CSRF 攻击。

# ruby-on-rails - Acts_as_taggable_on 实现教程

> ID：10274885
> 
> 赞同：1
> 
> 时间：2012-04-23T04:42:47.007
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, acts-as-taggable-on, posts

我一直在尝试允许将标签放置在帖子上，以便我可以将它们划分到我的应用程序的不同部分。我浏览了各种宝石，发现acts_as_taggable_on 似乎是最受欢迎的。在 gem 的 github 中的示例进行各种尝试后，我无法成功使用它。我已经广泛搜索了有关实施的教程，但没有找到，并希望有人会为此提供一个。对于这个简单的问题，我很抱歉，因为我对编程还是比较陌生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T14:41:54.930

[Railscasts](http://railscasts.com/episodes/382-tagging)现在有一个关于acts_as_taggable 的优秀教程。 [这](http://www.alexmuraro.me/posts/acts-as-taggable-on-a-short-tutorial)也是一个关于如何让它工作的漂亮而简单的文本介绍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T19:57:10.063

有很多教程都很好。上一个答案中提到的一个很好。

对于刚接触 RoR 世界的人来说，不明显的一点是，数据库中没有针对目标表上的标签的实际列。我见过很多人在他们的数据库中添加了一个“标签”列。根本不需要，它只会让事情变得混乱。

当您将“acts_as_taggable_on :tags”添加到模型中时，它会变成一个虚拟列（我知道它不是表达这一点的 RoR 方式，但如果您有数据库背景，则更容易这样想）。

如果您要要求标签拥有所有者，请遵循有关如何仔细获取对象标签的示例。您只能通过“tags_from”获取该对象标签。如果你尝试一个简单的 tags_list，你会得到一个空值。

希望这可以帮助

# asp.net-mvc-3 - 如何在 Telerik gridview 中嵌入 Telerik 下拉菜单

> ID：10274887
> 
> 赞同：0
> 
> 时间：2012-04-23T04:43:03.313
> 
> 标签：asp.net-mvc-3, c#-4.0, razor, telerik

我在我的项目中使用 Telerik 控件。如何使用示例项目 mvc3+razor(cshtml) 将 Telerik 下拉菜单嵌入到 Telerik 网格视图中，并且控制器代码是 c#？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T08:05:22.313

从控制器仅使用 TempData 或 ViewBag 将数据传递给视图。

```
List<AdjustmentReasonCodes> salesAuditReasons = new List<AdjustmentReasonCodes>();
salesAuditReasons = salesDal.SalesAuditResonCodes();

TempData["SalesAuditReason"] = salesAuditReasons;

TempData["CStatus"] = salesDal.ReadCustomerListWithRecoveryStatus(objLoginHelper.LogInForUnitCode, Convert.ToByte(ctype), Helper.DateTo(Helper.YearMonthPrevious(2))); 
```

现在只需使用视图页面的列表来保存***TempData***

```
@{
    List<AdjustmentReasonCodes> salesAuditReasons = new List<AdjustmentReasonCodes>();
    salesAuditReasons = (List<AdjustmentReasonCodes>)TempData["SalesAuditReason"];
} 
```

您可以使用模板非常轻松地添加***组合框。***

```
<div class="DataGridXScroll">
  @{
     List<GetCustomerListWithRecoveryStatus> listCustomerStatus = new List<GetCustomerListWithRecoveryStatus>();
     listCustomerStatus = (List<GetCustomerListWithRecoveryStatus>)TempData["CStatus"];

                    if (listCustomerStatus != null)
                    {                    

                    @(Html.Telerik().Grid(listCustomerStatus)
            .Name("grvSalesAdjustment")
            .DataKeys(keys => keys.Add(k => k.CustCode))
            .Columns(column =>
            {
                column.Bound(a => a.CustCode).Width(100).HtmlAttributes(new { @class = "GridColumnLeftAlign" }).Title("Customer ID");

                column.Template(@<input type="text" class="GridTextBoxRightAlign" style="width:62px;" id="@("salesAudit" + @item.CustCode.Replace(" ", "").Replace("-", "").Trim())" value="@(@item.AuditAdjustmentWithoutDPInCurrentMonth.ToString("0"))" />).Title("Audit Adjustment").Width(80);

                column.Template(@<select id="@("ddlSalesAuditReason" + @item.CustCode.Replace(" ", "").Replace("-", "").Trim())" class="DropDown">
                    <option value="0">--Select--</option>
                    @foreach (AdjustmentReasonCodes adrc in salesAuditReasons)
                    {
                        if (item.RefReasonForAuditAdjustment == adrc.ReasonCode)
                        { 
                        <option value="@(adrc.ReasonCode)" selected="selected">@adrc.ReasonDescription</option> 
                        }
                        else
                        {                        
                        <option value="@(adrc.ReasonCode)">@adrc.ReasonDescription</option>
                        }
                    }
                </select>).Title("Audit Reason").Width(135);              

            }).Selectable()
            .Pageable(page => page.PageSize(100))
            .Scrollable(scroll => scroll.Height(300))

                     )
                    }   
                }
</div> 
```

# c# - 映射多租户数据库

> ID：10274891
> 
> 赞同：0
> 
> 时间：2012-04-23T04:43:24.557
> 
> 标签：c#, mysql, database

> 好吧，我们正在开发一个具有独立数据库的多租户应用程序。对于 N 个单独的数据库，所有模式都具有相同的结构。我们正在使用带有 aspx 的 MySql 来构建一个 Web 应用程序。现在会有一种情况，可能有相同的用户在 N 个不同的数据库上。我们需要一种方法来链接用户拥有他/她数据的那些数据库并将其显示在下拉列表中。在用户登录时链接数据库后，他/她将能够在他/她的数据所在的下拉列表中看到所有可用的数据库。当用户更改下拉列表值时，他/她应该能够立即更改数据库并从链接的数据库中查看他/她的数据。我们已经构建了多租户应用程序，并且一切正常。问题是如何为特定用户从主数据库映射所有这些数据库。每个用户在单独的数据库中都有一个单独的唯一 ID。因此，除了数据结构外，用户在多租户数据库中没有任何共同点。我们尝试将所有用户的唯一 ID 存储在主数据库中，并将其与用户所在的另一个唯一 ID 链接，但该解决方案并未产生丰硕的结果。任何其他选择都是最受欢迎的。我们尝试将所有用户的唯一 ID 存储在主数据库中，并将其与用户所在的另一个唯一 ID 链接，但该解决方案并未产生丰硕的结果。任何其他选择都是最受欢迎的。我们尝试将所有用户的唯一 ID 存储在主数据库中，并将其与用户所在的另一个唯一 ID 链接，但该解决方案并未产生丰硕的结果。任何其他选择都是最受欢迎的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-06T19:25:31.657

我对多租户 mysql 采用的方法是：

*   包含所有租户的所有数据的主数据库，但每个表都有一个`tenantID`按租户分隔数据的列
*   为每个租户创建多个数据库，但该数据库充满了引用回主数据库的 mysql 视图。例如：

.

```
 # ie. main database has tables: users, and invoices
 # if you have a new tenant named "acme", then:
 create database acme;
 create view acme.users as select * from maindb.users where entityID=2;
 create view acme.invoices as select * from maindb.invoices where entityID=2; 
```

在我的情况下，这使我不必更改任何以前的查询（这些查询是在我知道我将使用多租户之前构建的）。我所要做的就是选择合适的数据库，所有数据都会自动分离。

但是将实际数据全部保存在同一个数据库中，这简化了维护。

# javascript - HTML/CSS（斜线 JS？） 3 列布局

> ID：10274897
> 
> 赞同：0
> 
> 时间：2012-04-23T04:44:09.750
> 
> 标签：javascript, html, css

想象一下，我想要一个*里面* `<span>`有东西的东西，它的文本/内容被分成三列，高度尽可能相等。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:46:07.593

这是[CSS3 列布局](http://caniuse.com/#search=column%20lay)。目前，它通过供应商标签得到支持。可以在 webkit 网站的[这篇文章](http://www.webkit.org/blog/88/css3-multi-column-support/)中看到一个示例，其中只有一个 div 创建了一个 2-celled div。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T04:51:03.903

Matthew James 有一篇[非常好的文章](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)，介绍了即使在旧版浏览器中也可以使用的灵活多列布局。

**编辑：**刚刚在 IE6 怪癖模式下对其进行了测试，它看起来仍然很漂亮！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:54:37.163

可能是这个？

```
span {
  columns: auto 3;
  -moz-column-rule: auto 3;
  -webkit-column-rule: auto 3;
  max-height: 100px;
} 
```

# android - 是否需要该 jar 文件或如何在 android 虚拟设备中执行 apk 文件？

> ID：10274900
> 
> 赞同：0
> 
> 时间：2012-04-23T04:44:22.157
> 
> 标签：android, android-emulator

最近我下载了'android-1.5-cupcake-src.zip'（android源），任何人都可以提及jar文件（我提到'android-1.5-cupcake-src'是一个示例，将其视为一般案例）对应于该源文件的名称（即'android.jar' api-android.jar api 的实现jar 仅包含抽象类-）？那个特定的 jar（如果存在）是否用于执行 android apk 文件？或者是否存在该 jar 的任何 dex 文件版本？我知道“apk”档案中没有包含类文件。但是那么dex代码是如何执行的呢？android 模拟器如何在不存在此类 jar 或 dex 文件的情况下与 apk 文件运行（交互）？DVM字节（？）代码是否可以直接与dex文件交互以执行代码。我通过android SDK安装目录搜索了很多特定的jar文件但没有结果！！。该代码（jar）是否从未在 android 应用程序形成的任何状态下使用（使用 android.jar api 可以创建/转换 dex 文件，但如何执行）？如果不存在 jar(dex?) 文件，那么发布这样的源有什么重要性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:27:52.290

1.  在 2012 年下载 'android-1.5-cupcake-src.zip' 有点太晚了，因为我们已经有了 android-4.0 并且 android-5.0 很快就会出来。使用 android-1.5 的设备数量不到 0.5%，所以，请为更现代的东西开发。

2.  主流开发不需要源码。基本上，您必须[安装 SDK](http://developer.android.com/sdk/installing.html)、Eclipse 和[开发工具](http://developer.android.com/sdk/eclipse-adt.html)，然后就可以进行开发了。

3.  如果您需要灵感，请浏览 SDK 示例。

# c - 信号处理代码的 Glib 哈希表问题

> ID：10274902
> 
> 赞同：3
> 
> 时间：2012-04-23T04:45:01.837
> 
> 标签：c, thread-safety, system, signals, glib

我有一些系统级代码每隔一段时间就会触发一次计时器，并且有一个信号处理程序可以在这些信号到达时对其进行管理。这工作正常，似乎完全合理。主程序旁边还有两个单独的线程运行，但它们不共享任何变量，而是使用 glib 的异步队列仅向一个方向传递消息。

相同的代码使用 glib`GHashTable`来存储键/值对。当信号代码被注释出系统时，哈希表似乎运行良好。然而，当它被启用时，有一个奇怪的竞争条件，其中调用`g_hash_table_lookup`实际上返回 NULL（这意味着没有用于查找它的键的条目），而实际上该条目确实存在（是的，我通过用 ) 打印整个键/值对列表`g_hash_table_foreach`。为什么大多数时候会出现这种情况？GLib 的哈希表实现有问题吗？有时查找调用是成功的。

这是一个非常特殊的情况，如果它没有意义，我可以进一步澄清，但我希望我做错了什么，以便实际上可以解决这个问题。

更多信息：不在信号处理程序范围内但访问 g_hash_table 变量的代码段被信号阻塞调用包围，因此信号处理程序在进程最初访问它们时也不会访问这些变量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T04:57:32.827

### 通常，信号处理程序只能设置标志和进行系统调用

碰巧的是，ISO C 对信号处理程序可以做什么有严格的限制，大多数库入口点和大多数 API 甚至都不是远程 100% 多线程安全的，其中大约 0.0% 是信号处理程序安全的。也就是说，绝对禁止从信号处理程序调用几乎任何东西。

特别是对于 GHashTable，`g_hash_table_ref()`它`g_hash_table_unref()`是唯一的 API 元素，甚至是线程安全的，它们都不是信号处理程序安全的。实际上，ISO-C 只允许信号处理程序修改用声明的对象，`volatile sig_atomic_t`并且只能调用几个库例程。

我们中的一些人认为线程系统本质上是危险的，实际上是细微错误的放射源。开始担心的一个好地方是[线程问题。](http://www.eecs.berkeley.edu/Pubs/TechRpts/2006/EECS-2006-1.html)（请注意，信号处理程序本身要糟糕得多。没有人认为 API 在那里是安全的......）

# jquery - 我的 Jquery 幻灯片中有轻微的勾号？

> ID：10274909
> 
> 赞同：0
> 
> 时间：2012-04-23T04:46:08.483
> 
> 标签：jquery, html, css

[http://www.nicholaslawson.com](http://www.nicholaslawson.com) ...如果您单击侧面的任何导航按钮，它将带您到那里，但有一点点滴答声...我相信这是边距或填充问题但我不完全知道如何解决这个问题。帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:58:27.290

快速浏览一下您可能想尝试的代码，有两个想法：

*   尝试将部分 id 放在 H1 标头标签而不是 div 上。
*   尝试更改 jquery 正在使用的缓动函数。而不是“easeInOutExpo”，尝试“swing”，看看是否有所作为。

除此之外，您的代码看起来与我的代码非常相似，它可以平滑滚动而没有任何“滴答声”。

# java - 使用 ActionListener 并且无法将文本字段设置为不可见

> ID：10274912
> 
> 赞同：2
> 
> 时间：2012-04-23T04:46:21.830
> 
> 标签：java, swing, user-interface, jbutton, actionlistener

我只是想让文本字段不可见，直到我单击其中一个编号按钮。忽略我糟糕的间距和缺乏评论，因为这是一个早期的草稿。文本字段称为 inputField1，我希望在单击标记为 1 的按钮时将其设置为可见。谢谢

```
import java.lang.String.*;
import java.lang.Exception.*;
import java.util.EventObject;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

public class Airplanes extends JFrame implements ActionListener {
    private static final int FRAME_WIDTH = 330;
    private static final int FRAME_HEIGHT = 300;

    private static final int FRAME_X_ORIGIN = 150;
    private static final int FRAME_Y_ORIGIN = 300;

    private static final int BUTTON_WIDTH = 50;
    private static final int BUTTON_HEIGHT = 30;

    private JTextField inputLine1;

    private JButton oneButton;
    private JButton twoButton;
    private JButton threeButton;
    private JButton fourButton;
    private JButton fiveButton;
    private JButton sixButton;
    private JButton sevenButton;
    private JButton eightButton;
    private JButton nineButton;
    private JButton tenButton;
    private JButton elevenButton;
    private JButton twelveButton;

    public static void main(String[] args) {
        Airplanes airplanes = new Airplanes();
        airplanes.setVisible(true);

    }

    @SuppressWarnings("null")
    public Airplanes() {
        Container contentPane;
        setSize(FRAME_WIDTH, FRAME_HEIGHT);
        setResizable(false);
        setTitle("Island Airways");
        setLocation(FRAME_X_ORIGIN, FRAME_Y_ORIGIN);
        contentPane = getContentPane();
        contentPane.setLayout(null);
        contentPane.setBackground(Color.white);

        oneButton = new JButton("1");
        oneButton.setBounds(10, 100, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(oneButton);

        twoButton = new JButton("2");
        twoButton.setBounds(10, 140, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(twoButton);

        threeButton = new JButton("3");
        threeButton.setBounds(60, 100, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(threeButton);

        fourButton = new JButton("4");
        fourButton.setBounds(60, 140, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(fourButton);

        fiveButton = new JButton("5");
        fiveButton.setBounds(110, 100, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(fiveButton);

        sixButton = new JButton("6");
        sixButton.setBounds(110, 140, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(sixButton);

        sevenButton = new JButton("7");
        sevenButton.setBounds(160, 100, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(sevenButton);

        eightButton = new JButton("8");
        eightButton.setBounds(160, 140, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(eightButton);

        nineButton = new JButton("9");
        nineButton.setBounds(210, 100, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(nineButton);

        tenButton = new JButton("10");
        tenButton.setBounds(210, 140, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(tenButton);

        elevenButton = new JButton("11");
        elevenButton.setBounds(260, 100, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(elevenButton);

        JButton twelveButton = new JButton("12");
        twelveButton.setBounds(260, 140, BUTTON_WIDTH, BUTTON_HEIGHT);
        contentPane.add(twelveButton);

        JButton firstClass = new JButton("First Class");
        firstClass.setBounds(50, 30, 100, 30);
        contentPane.add(firstClass);

        JButton coach = new JButton("Coach");
        coach.setBounds(175, 30, 100, 30);
        contentPane.add(coach);
        inputLine1 = new JTextField();
        inputLine1.setBounds(70, 200, 135, 30);
        contentPane.add(inputLine1);
        inputLine1.setVisible(false);

    }

    public void actionPerformed(ActionEvent event) {
        if (event.getSource() instanceof JButton) {
            JButton clickedButton = (JButton) event.getSource();
            String buttonText = clickedButton.getText();
            if (buttonText.equals("First Class")) {
                inputLine1.setVisible(true);
                if (buttonText.equals("1")) {

                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T05:02:05.613

您已经实现`ActionListener`，但您的按钮未附加到任何侦听器，因此它没有调用您的`actionPerformed`方法。

您需要像这样向按钮添加侦听器：

```
oneButton.addActionListener(this); 
```

然后改变你的 actionPerfomed 像：

```
public void actionPerformed(ActionEvent event) {
        if (event.getSource() instanceof JButton) {
            JButton clickedButton = (JButton) event.getSource();
            String buttonText = clickedButton.getText();
            if (buttonText.equals("First Class")) {
                //do something
            } else if (buttonText.equals("1")) {
                inputLine1.setVisible(true);
            }
        }
    } 
```

阅读本[教程](http://docs.oracle.com/javase/tutorial/uiswing/events/intro.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:18:22.867

当你实现 ActionListener

1.  你必须实现它的方法

2.  您必须将该**侦听器添加到您想要的特定组件**。

你忘了做第二个。

```
oneButton.addActionListener(this); 
```

您将以下代码添加到您的 actionPerformed 方法中。

```
if (buttonText.equals("1")) {
                inputLine1.setVisible(true);
            } 
```

# objective-c - PFUser 在 fetchAllIfNeeded 之后调用 objectForKey 时抛出 NSInternalInconsistencyException

> ID：10274913
> 
> 赞同：2
> 
> 时间：2012-04-23T04:46:35.970
> 
> 标签：objective-c, ios, ios5, parse-platform

我的 PFUser “firstName”和“lastName”上有两个额外的列。他们正在妥善保存；我可以在数据浏览器中看到数据。

我有另一个 PFObject“类”，它有一个 NSArray 的 PFUsers 属性。我在 PFObject 上使用类方法**+fetchAllIfNeededInBackground:block:**来获取 PFUsers 数组。在回调块中，我在数组中的每个 PFUser 上调用 objectForKey:，但我通过拥有的 PFObject 访问它们。

```
// invited is the NSArray of PFUsers
self.whoCell.mainLabel.text = [[self.plan.invited objectAtIndex:0] 
                                                  objectForKey:@"firstName"]; 
```

调试器在 objectForKey 调用之前的断点处输出：

```
(lldb) po self.plan.invited
(NSArray *) $4 = 0x06e62a60 <__NSArrayM 0x6e62a60>(
<PFUser:GCCdPjCU2J> {
    firstName = Fake;
    lastName = Account;
    username = yyajnbafv53qw4yhjm9sfoiis;
}
) 
```

**编辑：**添加 self.plan.invited 的实现，因为上述内容具有误导性。

```
- (NSArray*)invited
{
  // self.dataSource is a PFObject*
  return [self.dataSource objectForKey:INVITED_PROP];
} 
```

然而，当上面调用它时，**它对 objectForKey:**抛出了这个异常：

```
'NSInternalInconsistencyException', reason: 'Key "firstName" has no data.  Call fetchIfNeeded before getting its value.' 
```

**编辑：**访问传递给**+fetchAllIfNeededInBackground**的块回调的 fetchedObjects 数组不会抛出，但访问最初传递给**+fetchAllIfNeededInBackground**的实际数组会抛出。

在调用解决问题之前调用 fetchIfNeeded，但为什么呢？数据已经存在。我是否错过了**+fetchAllIfNeededInBackground**的理解，因为它没有更新拥有 PFUser 集合的 PFObject？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T08:09:08.443

我弄清楚发生了什么。让我用代码解释一下：

```
PFQuery *query = [PFQuery queryWithClassName:@"TestClass"];
PFObject *testObj = [query getObjectWithId:@"xWMyZ4YEGZ"];

// an array of PFUser "pointers" (pointers in Parse parlance)
NSLog(@"%@", [testObj objectForKey:@"userArrayProp"]);
[PFObject fetchAll:[testObj objectForKey:@"userArrayProp"]];

// now userArrayProp contains fully fetched PFObjects
NSLog(@"%@", [testObj objectForKey:@"userArrayProp"]); 
```

对我来说，经过一段时间后，userArrayProp 会恢复为“指针”数组，这让我很困惑。我的问题是在 PFObject 上调用刷新会将获取的数组 BACK 还原为指针数组。像这样：

```
PFQuery *query = [PFQuery queryWithClassName:@"TestClass"];
PFObject *testObj = [query getObjectWithId:@"xWMyZ4YEGZ"];

// an array of PFUser "pointers" (pointers in Parse parlance)
NSLog(@"%@", [testObj objectForKey:@"userArrayProp"]);
[PFObject fetchAll:[testObj objectForKey:@"userArrayProp"]];

// now userArrayProp contains fully fetched PFObjects
NSLog(@"%@", [testObj objectForKey:@"userArrayProp"]);

[testObj refresh];

// now userArrayProp contains pointers again :(
NSLog(@"%@", [testObj objectForKey:@"userArrayProp"]); 
```

希望它在文档中说这样`[PFObject refresh]`做了....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:51:47.627

您所描述的应该可以正常工作。 `fetchAllIfNeeded`更新数组中的对象本身，因此您如何访问它们并不重要。您说您正在通过 parent 访问它们`PFObject`，但您的调试器输出显示直接通过数组访问。数组是否有可能没有指向当前`PFObject`成员？

调试时可以尝试的一件事是调用`isDataAvailable`的实例`PFUser`，无论是在 之后`fetchAllIfNeeded`，还是在访问它们的名字和姓氏之前。调用后`fetchAllIfNeeded`，`isDataAvailable`应该`YES`为数组的每个元素返回。如果在您访问名称时它仍然返回`YES`，他们不应该给出这个错误。

否则，如果您可以提供重现问题的最小代码示例，我很乐意进一步调试它。

谢谢，

# sql - SQL 返回发现不存在的记录的 ID 参数

> ID：10274914
> 
> 赞同：0
> 
> 时间：2012-04-23T04:46:37.790
> 
> 标签：sql, ruby-on-rails, postgresql, activerecord

我有一个查询，我正在处理一组属性，例如 [1,2,3,4] 等。我需要检查一个表以查看是否存在具有该 ID 的记录，我对那些感兴趣那些不存在的，而不是那些存在的。

目前我正在循环遍历 Ruby 中的数组，然后为每个数组发出单独的 SELECT 请求。这可行，但通常数组很长，并且发出许多单独的请求似乎效率很低。

我想知道是否有办法将整个数组传递给 Postgres，然后 Postgres 将所有不存在的 id 交还给我。

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T07:58:48.837

好吧想通了：

```
SELECT *
FROM unnest(ARRAY[1,2,3,4,5]) as s
WHERE s NOT IN (SELECT id FROM my_table); 
```

# javascript - 我如何正确地从另一个对象获取属性？尝试为我的拉斐尔动画创建工具提示

> ID：10274915
> 
> 赞同：0
> 
> 时间：2012-04-23T04:46:40.187
> 
> 标签：javascript, jquery, animation, svg, raphael

所以，基本上我有一个用拉斐尔绘制的饼图。每个段对应一个不同的值，我希望每个段都有一个唯一的工具提示弹出窗口。在此示例中，每次悬停其中一个线段时，我都尝试绘制一个圆圈，但我无法找到一种动态执行此操作的方法，以便我可以设置相对于悬停线段的位置点。抱歉，解释不佳且令人费解，但您可以在此处查看我的代码示例：

[http://jsfiddle.net/DgrgC/2/](http://jsfiddle.net/DgrgC/2/)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:55:45.703

在`hover`回调内部，`this`指的是您正在绘制的当前路径。所以`this.attrs`包含路径属性。请注意，路径没有`cx`和`cy`属性，正如您在示例中尝试访问的那样。

我不确定您要完成什么，但您可以查看我的示例，了解如何根据路径数据绘制一些圆圈：http:
[//jsfiddle.net/DgrgC/3/](http://jsfiddle.net/DgrgC/3/)

基本上：

```
this.attrs.path[1] //second point of the path
this.attrs.path[1][1] //x coordinate of this point
this.attrs.path[1][2] //y coordinate of this point 
```

# iphone - 重置撤消/重做数组 iOS

> ID：10274917
> 
> 赞同：1
> 
> 时间：2012-04-23T04:46:52.137
> 
> 标签：iphone, core-graphics, nsundomanager

我想使用 NSUndoManager 撤消和重做绘图应用程序中的笔触和更改。我使用 UIGraphicsGetImagefromCurrentImageContext() 将图像存储到可变数组中。

我下面的代码给出了一个想法：

```
- (void) performUndoRedo:(BOOL) undo
{
    if (undo)
    {
        [undoManager undo];
    }
    else
    {
        [undoManager redo];
    }

    NSLog(@"layerArray:%@", layerArray);

    [self drawImage:[layerArray lastObject]];
}

- (void) redo:(id) object
{
    [layerArray addObject:object];
    [[undoManager prepareWithInvocationTarget:self] undo:object];
    [undoManager setActionName:@"drawredo"];
    // NSLog(@"layerArray IN REDO:%@", layerArray);
}

- (void) undo:(id) object
{
    [[undoManager prepareWithInvocationTarget:self] redo:object];
    [undoManager setActionName:@"drawundo"];
    [layerArray removeObject:object];
    // NSLog(@"layerArray IN UNDO:%@", layerArray);
}

- (void) touchesEnded:(NSSet *) touches withEvent:(UIEvent *) event
{
    UIGraphicsBeginImageContext(self.bounds.size);
    [self.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *layerImage = UIGraphicsGetImageFromCurrentImageContext();

    [layerArray addObject:layerImage];
    [self undo:layerImage];
    UIGraphicsEndImageContext();

    NSLog(@"%@", layerArray);
} 
```

我如何以及在什么时候清除 layerArray 并重置撤消堆栈？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:01:19.917

似乎您可以使用每个类中的方法进行清除：

*   `layerArray`是一个[`NSMutableArray`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html)

    *   从文档中[`removeAllObjects`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableArray/removeAllObjects)

        > 清空所有元素的数组。

*   `undoManager`是一个[`NSUndoManagaer`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUndoManager_Class/Reference/Reference.html)：

    *   从文档中[`removeAllActions`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSUndoManager_Class/Reference/Reference.html#//apple_ref/occ/instm/NSUndoManager/removeAllActions)：

        > 清除撤消和重做堆栈并重新启用接收器。

# android - 如何获取在 NDK 应用程序中编写的“printf”消息？

> ID：10274920
> 
> 赞同：50
> 
> 时间：2012-04-23T04:47:07.707
> 
> 标签：android, c, android-ndk, java-native-interface, logging

如果我在 java 文件中定义这样的函数

```
 /** 
   * Adds two integers, returning their sum
   */
  public native int add( int v1, int v2 ); 
```

所以我需要在c文件中编码

```
JNIEXPORT jint JNICALL Java_com_marakana_NativeLib_add
  (JNIEnv * env, jobject obj, jint value1, jint value2) {

  printf("\n this is log messge \n");

        return (value1 + value2);
} 
```

那么这个 printf 将从哪里打印消息？在logcate中我不明白吗？

如何通过放置日志消息来调试任何 NDK 应用程序？

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-04-23T05:25:10.827

改为使用`__android_log_print()`。你必须包括标题`<android/log.h>`

示例示例。`__android_log_print(ANDROID_LOG_DEBUG, "LOG_TAG", "\n this is log messge \n");`

您还可以使用格式说明符，例如 printf -

```
__android_log_print(ANDROID_LOG_DEBUG, "LOG_TAG", "Need to print : %d %s",int_var, str_var); 
```

确保您还链接到您的 Android.mk 文件中的日志库：

```
 LOCAL_LDLIBS := -llog 
```

哦..忘了..输出将显示在`Logcat`标签中`LOG_TAG`

**简单的方法**

将以下行添加到您的公共头文件中。

```
#include <android/log.h>

#define  LOG_TAG    "your-log-tag"

#define  LOGD(...)  __android_log_print(ANDROID_LOG_DEBUG, LOG_TAG, __VA_ARGS__)
#define  LOGE(...)  __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__)
// If you want you can add other log definition for info, warning etc 
```

`LOGD("Hello world") or LOGE("Number = %d", any_int)`现在只需调用`printf in c`.

不要忘记包含通用头文件。

**删除日志记录**

如果定义为`LOGD(...)`空，则所有日志都将消失。之后评论就好`LOGD(...)`。

`#define LOGD(...) // __android_log..... rest of the code`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-23T05:53:33.997

有两种选择：

1) 将 printf 替换为 __android_log_print。您可以使用代码开头的定义轻松完成此操作：

```
#define printf(...) __android_log_print(ANDROID_LOG_DEBUG, "TAG", __VA_ARGS__); 
```

当然，这将需要更改所有具有 printf 的源代码。

2）将stdout和stderr重定向到Android logcat（不确定这是否适用于非root设备）：http: [//developer.android.com/guide/developing/debugging/debugging-log.html#viewingStd](http://developer.android.com/guide/developing/debugging/debugging-log.html#viewingStd)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-06-20T02:35:57.480

不需要root设备，访问[http://developer.android.com/guide/developing/debugging/debugging-log.html#viewingStd](http://developer.android.com/guide/developing/debugging/debugging-log.html#viewingStd)，下面可以正常工作。

```
$ adb shell 

$ su 

$ stop

$ setprop log.redirect-stdio true

$ start 
```

完毕！

# android - Android Gmail：按回复，将显示对话框以选择 Gmail 或我的应用程序来撰写

> ID：10274921
> 
> 赞同：1
> 
> 时间：2012-04-23T04:47:19.513
> 
> 标签：android, dialog, gmail, text-editor, confirm

我现在正在开发一个作曲家（仅用于撰写消息的文本编辑器）。我想要的是当用户在 Android 的 Gmail 应用程序上按“回复”时，它会显示一个对话框供用户选择我的文本编辑器或 gmail 来编写消息。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:21:21.717

当您的清单中有相应的 IntentFilters 用于该条目时，您会被选择器对话框选择

就像 IME 一样，您需要类似“BIND_INPUT_METHOD”（如果我记得的话）。

同样，我认为您的应用程序清单需要类似的东西。所以你可以试试这些 IntentFilters

```
<intent-filter>
        <action android:name="android.intent.action.SEND" />
        <action android:name="android.intent.action.VIEW" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:scheme="mailto" />
</intent-filter> 
```

猜猜这会起作用....

# c# - 在 C# 中定义权限集的枚举

> ID：10274923
> 
> 赞同：8
> 
> 时间：2012-04-23T04:47:42.230
> 
> 标签：c#, .net, permissions, enums, flags

我们没有将每个权限拆分为单独的列或 sql server 表，而是重新考虑使用`Flag`属性来`Enum`与位操作一起使用。我们的应用程序定义了访问资源（读取、修改、更新）的端点（不是来自其他服务的端点），并且每个用户都被授予权限，例如`Bob has permissions to Read, Modify resource X`，当 bob 访问该资源时，我们检查 bob 是否具有权限 x。现在我们将在哪里应用这很清楚这是我的疑问

*   假设 Bob 使用标记的枚举对资源具有读、写、删除权限，我会做**`Permission.Read | Permission.Write | Permission.Delete`**的最终结果是按位与整数还是另一个枚举？

*   对于在数据库表中存储此权限，该列应为`integer`?

*   如果对问题 1 的回答是，`Enum`那么我是否应该在`Permissions`枚举上定义另一个属性，该属性表示位和运算的整数值？

`disclaimer:`示例中所指的 Bob 不代表 Stack Overflow 站点网络中的任何用户或任何人。这只是另一个角色

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T04:58:56.570

按顺序回答您的问题：

*   假设您已经在, 上设置了`[Flags]`属性并`enum`使用了正确的运算符（对于按位运算），它基本上两者兼而有之。如果将结果转换为整数，您将获得相关值的按位和，即。7为你的例子。如果您使用，那么您将返回一个字符串，指示该值具有所有三个值。我相信某处有一种方法，但我见过的大多数代码都使用经过验证的真实位代码进行比较，即：`&``|``.ToString()``HasFlags()`

    ```
    var x = Permissions.Read | Permissions.Write;
    if ((x & Permissions.Read) == Permissions.Read) { print "Success!"; } 
    ```

    从技术的角度来看，C# 的类型安全有助于保持理智，并且`|`ing 或`&`ing 两个`enum`相同类型的结果是另一个`enum`相同类型，但所有`enum`s 都是简单的整数，并且在大多数情况下可以这样处理，尽管有些事情需要明确的转换到/从`int`。

*   它应该是一个整数类型，是的。我相信枚举的默认类型是`Int32`，但是如果您想精确匹配数据库和代码，您可以明确设置它。

*   鉴于以上所有情况，为常用权限集（例如`ReadWrite`. 特别是，`None`Microsoft 建议所有枚举都使用一个元素，尤其是当您要转换值时。这允许新初始化变量的后备和有效值以及`default(Permissions)`. 您可以根据其他值在枚举中设置值，如下所示：

    ```
    [Flags]
    enum Permissions {
      None =    0,
      Read =    0x001,
      Write =   0x010,
      Execute = 0x100,
      ReadWrite = Read | Write,
      // [snip]
    } 
    ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T04:57:21.230

1.  用 [Flags] 标记的枚举值的按位 OR/AND 是相同枚举的值。
2.  整数是合理的归档以将枚举值存储在数据库中。
3.  不，您不需要添加额外的枚举值，但可以这样做是为了方便。

[通常，您使用FlagsAttribute](http://msdn.microsoft.com/en-us/library/system.flagsattribute.aspx)定义此类枚举，即

```
[Flags] enum My {
  None = 0, Read =1, Write =2, Delete = 4
}; 
```

当以这种方式定义时，您可以将不同的值与 | （或）操作：

```
My readAndWrite = My.Read | My.Write; 
```

按位 AND 将为您提供 0 表示唯一标志的枚举值，但通常用于屏蔽其他位：

```
bool doIHaveWrite = (readAndWrite & My.Write) == My.Write; 
```

请注意，逻辑 AND (&&) 不能应用于枚举值。

# java - 这将在程序中返回

> ID：10274927
> 
> 赞同：0
> 
> 时间：2012-04-23T04:48:14.247
> 
> 标签：java

我想知道当您在程序中有多个返回时，Java 程序中会返回什么。

```
private int numberReturner()
{
    if (a) return a;
    else if (b) return b;
    for (int i = 1; i < board.size()-1; i++)
    {
        if (c) return c;
    }
    return d;
} 
```

所以假设 a 为真，（它应该返回 a），但它不会返回 d，因为那是整个程序中的最后一行代码吗？为什么会这样？

对不起，如果我的措辞有点奇怪......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T04:50:40.893

一旦遇到任何“return”语句，该方法将退出执行并返回该值。

只有在到达最后一行之前没有遇到其他 return 语句时，该方法才会返回 d。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T04:54:56.653

通常，遇到的第一个“返回”将是返回的那个。但是如果在 finally 块中遇到了“return”语句，finally 块中的“return”就会被返回。例如

```
private int m1(){
    try{
        return 1;
    }finally{
        return 2; //this will be returned instead
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T04:51:24.393

如果您已经“返回”，那么您将永远不会遇到后续的返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T04:52:33.737

该方法返回 a ，因为 return 语句从当前方法中退出，并且控制流返回到调用该方法的位置。请阅读更多关于 Java 教程中不同分支关键字的信息。[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T04:52:56.117

一旦`return`执行了一条语句，方法就会结束，如果不是`void`，则返回返回值。

我只知道这条规则的一个例外，您在`finally`声明中也有它。举个例子：

```
public static void main(String[] args) {
    System.out.println(test());
}

private static int test() {
    try {
        return 1;
    } finally {
        return 2;
    }
} 
```

在这种情况下`test()`返回 2，因为`finally`这种情况下的语句总是在退出方法之前执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T04:53:09.433

当前执行线程将在第一次遇到`return`语句时离开方法（此规则的显着例外是`try...finally`块，一旦`return`遇到 a，`finally{...}`块在离开方法之前执行。

# objective-c - 在 Objective-C 中，为什么对象的实例变量或属性不能有默认值？

> ID：10274928
> 
> 赞同：2
> 
> 时间：2012-04-23T04:48:17.837
> 
> 标签：objective-c

在 Objective-C 中，为什么我们不能使用

```
@interface Animal : NSObject {
    int state = AnimalStateAlive;   // a constant which is 1 to indicate alive
    int x = 0;
    int y = 0;
}

@properties int energyLevel = 100; 
```

`alloc`并且编译器可以在发生后立即填写这些值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T04:51:16.827

因为在 Objective-C 中没有构造函数之类的东西。`+alloc`是由 NSObject 专门实现的方法，编译器不知道何时/如何调用它。为了提供初始化，运行时（`class_createInstance()`准确地说）在创建时将整个实例清零，事实上，这就是在`+alloc`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T04:52:38.963

参考[`The Objective-C Programming Language`](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocObjectsClasses.html)：

> alloc 方法为新对象的实例变量动态分配内存，并将它们全部初始化为 0 — 全部，即除了将新实例连接到其类的 isa 变量。为了使一个对象有用，它通常需要更完整地初始化。这就是 init 方法的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:50:31.680

您应该为此使用指定的初始化程序，只需实现 init 方法。只是语言没有为类初始化提供特殊语法的原因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T05:00:46.113

常见情况（严格来说是 objc）已经得到解答。

作为替代解决方案，您可以使用 C++ 类型作为实例变量来完成此操作。使用 C++ 实例变量，C++ 类型将使用其默认构造函数进行初始化。

例如：

```
namespace MON {
    class t_animal {
    public:
        t_animal() :
          state(AnimalStateAlive),
          x(0),
          y(0),
          energyLevel(100) {
        }
        /* ... */
    private:
        int state;
        int x;
        int y;
        int energyLevel;
    };
} /* << MON */

@interface Animal : NSObject
{
@private
    MON::t_animal animal;
}

@end 
```

# android - android facebook：未在对话框中显示信息

> ID：10274934
> 
> 赞同：1
> 
> 时间：2012-04-23T04:49:03.560
> 
> 标签：android

当我单击某个元素时，我正在尝试打开一个 facebook 帖子对话框。对话框本身运行良好。我可以在文本字段中写一些评论，然后可以在网站上看到帖子。但是我想在评论下方的区域添加一些信息，其中包含标题、链接、图片等。我参考了几个教程来实现这一点，但它们对我不起作用。比如说，我输入的标题不会显示在对话框中。代码如下：

```
mFacebook = new Facebook(APP_ID);
mAsyncRunner = new AsyncFacebookRunner(mFacebook);

dFbPostButton.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {

      Bundle b = new Bundle();
      b.putString("caption","Check This Hotel");

      //Result is the class name
      //Nothing too much in SampleDialogListener                 
      mFacebook.dialog(Result.this, "feed", b,new SampleDialogListener());
    }
} 
```

任何帮助将非常感激！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:12:06.057

按照下面的代码

```
 Bundle params = new Bundle();
    params.putString("caption", "Mona Lisa");
    params.putString("description","The Mona Lisa...");
    params.putString("picture","http://tineye.com/images/widgets/mona.jpg");
    params.putString("name", "Mona Lisa");

        mFacebook.dialog(this, "feed", params, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {}

            @Override
            public void onCancel() {}

            @Override
            public void onError(DialogError de) {}

            @Override
            public void onFacebookError(FacebookError fbe) {}
        }); 
```

它会有所帮助

# python - python：带有几个布尔测试的while语句

> ID：10274935
> 
> 赞同：0
> 
> 时间：2012-04-23T04:49:19.807
> 
> 标签：python, boolean-logic

当地小学的借书证 ID 格式如下： ID 以“s”（代表“学生”）开头，长度正好为 6 个字符，包括“s”；或者它们以“t”（代表“老师”）开头并且没有长度要求。下面的函数应该得到一个有效的 ID，但它缺少它的 while 条件。

```
def get_valid_id():
    '''Prompt the user for and return a valid library card ID.'''

    s = raw_input("Enter ID: ")
    while ?????:
        s = raw_input("Try again: ")
    return s 
```

以下是 while 循环的一些可能条件。对于每个，指出它是否会使功能正常工作。

1.  这种情况会使功能正常工作吗？ `(s[0] != "s") and (len(s) != 6) and (s[0] != "t")`

2.  这种情况会使功能正常工作吗？ `not( (s[0] == "s" and len(s) == 6) or (s[0] == "t") )`

我不明白为什么 1 的答案是否定的，而 2 的答案是肯定的。我认为第一个问题会起作用，因为它都是“和”，而第二个问题我认为“或”不会使它起作用..有人可以向我解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T05:06:34.203

正如有人评论的那样，[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)：

> not (A or B or C) = (not A) and (not B) and (not C)

当您考虑这一点时，也更容易考虑`not not A = A`，因此您需要的语句是`while not X`哪里`X`是一个*好的*id 的测试。

所以第一种情况将转化为

```
 not ( (s[0] != "s") or (len(s) != 6) or (s[0] != "t") ) 
```

即上述任何子语句的 id 通行证*都是*正确的，所以*就* `s[0] != "s"`足够了。

在第二种情况下，

```
not( (s[0] == "s" and len(s) == 6) or (s[0] == "t") ) 
```

表示如果（学生标准）*或* （教师标准）*，*则 id 通过。`(s[0] == "s" and len(s) == 6)` *`s[0] == "t"`*

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T05:08:11.773

这是因为**1**将接受长度 < 6 的学生 id。根据您的问题，学生 id 的长度*必须*为 6 个字符，包括 s。另请注意，如果您尝试输入空字符串，这两个选项都会中断。`s[0]`将引发`IndexError`.*

# iphone - 如何从数据库中检索多列数据？

> ID：10274938
> 
> 赞同：0
> 
> 时间：2012-04-23T04:49:41.923
> 
> 标签：iphone, objective-c, ios, sqlite, nsmutablearray

我是这个数据库编程的新手。我从数据库中检索了单列数据。但我无法从数据库中检索多列数据。

这是我的代码

```
-(void) readItemsFromDatabaseforTable:(NSString *)tableName {

    arrayItems = [[NSMutableArray alloc] init];

    if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK)
 {

           NSString *sql_str = [NSString stringWithFormat:@"select * from %@", tableName];

        const char *sqlStatement = (char *)[sql_str UTF8String];

            NSLog(@"query %s",sqlStatement);

        sqlite3_stmt *compiledStatement;

if(sqlite3_prepare_v2(database, sqlStatement, -1, &compiledStatement, NULL) == SQLITE_OK) 
{

            while(sqlite3_step(compiledStatement) == SQLITE_ROW) {

                NSString *idsstr = [NSString stringWithUTF8String:(char *)sqlite3_column_text(compiledStatement, 3)];               

                [arrayItems addObject:idsstr];
                NSLog(@"*************** %@",arrayItems);
            }
            while(sqlite3_step(compiledStatement) == SQLITE_ROW)
{

          NSString *caloriesstr = [NSString stringWithUTF8String:  

(char*)sqlite3_column_text(compiledStatement, 4)];               

                [caloriesarry addObject:caloriesstr];

                NSLog(@"naveenkumartesting");

                 NSLog(@"*************** %@",caloriesarry);

}

} 
```

我的主要目标是从数据库中检索列数据并存储到多个数组中。

请任何人帮助我，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:59:43.467

`while`当您可以一次获取所有数据时，您不需要第二次循环，如下所示：

```
const char *stmt = "select id, name from table1 where isImage = 1";
sqlite3_stmt *selectstmt;
if (sqlite3_prepare_v2(database, stmt, -1, &selectstmt, NULL) == SQLITE_OK) {
    while(sqlite3_step(selectstmt) == SQLITE_ROW) {
        int rowid = sqlite3_column_int(selectstmt, 0);
        NSString * name = [NSString stringWithUTF8String:(char *)sqlite3_column_text(selectstmt, 1)];

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T04:54:52.760

使用此示例查询并根据您的要求进行查询..

```
NSString *str = [NSString stringWithFormat:@"Select * from Yourtablename where image1 = '%@' AND person1 = '%@' AND category = '%@' AND PurchaseAmt = '%@'",Str,person1,category,Amountdata]; 
```

[使用本教程](http://www.techotopia.com/index.php/IPhone_Database_Implementation_using_SQLite)

# css - 背景图像高度切割

> ID：10274942
> 
> 赞同：0
> 
> 时间：2012-04-23T04:50:20.700
> 
> 标签：css, background-image

我试图弄清楚为什么我的 a:selected 类的背景图像被底部和顶部切割。我尝试将`height:!important;`and分配`min-height;`给`.main_menu ul li`and `.main_menu ul li a.selected`，但似乎有其他东西限制了背景图像的大小（17x21px）

我想提供一张图片，但由于我是新手，他们不会让我这样做 :( 这张图片是一个圆形，它的底部和顶部都被切开，就像它可以放入一个较小的容器中一样

这是代码，感谢您的任何建议！

```
.menu_container{
    position: absolute;
    float: left;
    width: 270px;
    margin-top: 220px;  
}
.main_menu ul { 
    padding: 0px; 
    margin:0px;
    list-style-type: none;  
}
.main_menu ul li {
    font-family:Arial, Helvetica, sans-serif; 
    font-size:11px; 
    letter-spacing:4px;
    text-align:right; 
    line-height:35px;  
    list-style-type:none;
}
.main_menu ul li a  {
    padding-right: 25px;  
    text-decoration:none;  
    color:#999; 
} 
.main_menu ul li a.selected {
    color: #bc4c9b;
    font-weight:bold; 
    background: url(images/circle.gif) right center no-repeat;
    height: 35px!important;  
}   
.main_menu ul li:hover {
    text-decoration:none;  
    color:#999;  
    font-weight:bold;  
    background:url(images/circle_grey.gif) right center no-repeat;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:00:58.533

尝试重写以下规则：

```
.main_menu ul li a  {
    padding-right: 25px;  
    text-decoration:none;  
    color:#999; 
    display:block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:33:49.200

您只需要定义**display:inline-block;** 在您的**li 中**查看您更新的 CSS：-

```
.menu_container{
position: absolute;
float: left;
width: 270px;
margin-top: 220px; 

}
.main_menu ul { 
padding: 0px; 
margin:0px;
list-style-type: none;  
}
.main_menu ul li {
font-family:Arial, Helvetica, sans-serif; 
font-size:11px; 
letter-spacing:4px;
text-align:right; 
line-height:35px;  
list-style-type:none;
}
.main_menu ul li a  {
padding-right: 25px;  
text-decoration:none; 
font-weight:bold; 
color:#999; 
   display:inline-block;
} 
.main_menu ul li a.selected {
color: #bc4c9b;
font-weight:bold; 
background: url(http://i.imgur.com/TXNfW.gif) right center no-repeat;
}   
.main_menu ul li a:hover {
text-decoration:none;  
color: #595959;  
font-weight:bold;  
background:url(http://i.imgur.com/5Ic6o.gif) right center no-repeat;
} 
```

查看演示：- [http://jsbin.com/agavid/13/edit](http://jsbin.com/agavid/13/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:00:32.117

嘿，我想你可以给

锚标签`display: inline-block;`或给`line-height`

像这样

```
.main_menu ul li a{
display:inline-block;
line-height:35px;  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T05:12:58.977

您的背景附加到锚标记（.main_menu ul li a），因此在字体大小之后调整大小。要查看整个背景文件，您需要将锚元素设置为阻塞，或者您可以使用填充。利用：

```
display: inline-block; 
```

或者

```
display: block; 
```

或为 .main_menu ul li a 使用填充

# google-chrome - 开发谷歌浏览器扩展“会话好友”的框架

> ID：10274961
> 
> 赞同：2
> 
> 时间：2012-04-23T04:52:06.537
> 
> 标签：google-chrome, frameworks

我很想开发 Google Chrome 扩展程序。但目前我不知道任何可以使用的框架。我发现“Session Buddy”是结构非常好的扩展之一。我认为它必须由特定的框架开发（因为它的结构和编码都非常好）。

有人知道 Session Buddy 的作者使用什么框架来开发这个扩展吗？这是网址：[https ://chrome.google.com/webstore/detail/edacconmaakjimmfgnblocblbcdcpbko?hl=en-US](https://chrome.google.com/webstore/detail/edacconmaakjimmfgnblocblbcdcpbko?hl=en-US)

此外，您还使用哪些其他框架来创建 chrome 扩展？是否支持单元测试？

谢谢你的回答，

[团16](http://blog.veev.vn)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T05:23:40.620

当前版本的 Session Buddy (v3.0.9) 是用纯 JavaScript 编码的，除了它使用 MooTools 来实现日期和序数的国际化（不过我目前正在探索替代方案，所以这可能会被替换为未来版本中的不同库）。代码混淆是通过我使用 C# 构建的一个简单的 js 解析器实现的。

-Hans（会话好友开发人员）

附录：我应该补充一下（因为你提到了代码结构）我通过谷歌的闭包编译器传递代码，编译级别为 WHITESPACE_ONLY。

# java - 如何用java制作图片库

> ID：10274969
> 
> 赞同：5
> 
> 时间：2012-04-23T04:52:45.907
> 
> 标签：java, swing, image-gallery

对于课程，我正在开发我的第一个 GUI 应用程序。它只是一个简单的图像查看器，有四个按钮：上一个、下一个、停止、播放。上一个和下一个工作正常，但老实说，我什至不知道如何开始处理幻灯片部分（播放和停止）。我知道有一个计时器类可能很方便控制图像变化时的速度……但我不确定通常使用哪种逻辑来循环浏览图像。谁能指出我正确的方向，此时我的大脑有点炸：0

我在下面包含了我的代码。我是新手，所以希望人们不会对我的技术太挑剔。如果重要的话，我正在日食中工作。

## 到目前为止，这是我的代码：

```
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;
import java.util.TimerTask;

public class ImageGallery extends JFrame
{
    private ImageIcon myImage1 = new ImageIcon ("Chrysanthemum.jpg");
    private ImageIcon myImage2 = new ImageIcon ("Desert.jpg");
    private ImageIcon myImage3 = new ImageIcon ("Jellyfish.jpg");
    private ImageIcon myImage4 = new ImageIcon ("Penguins.jpg");
    JPanel ImageGallery = new JPanel();
    private ImageIcon[] myImages = new ImageIcon[4];
    private int curImageIndex=0;

    public ImageGallery ()
        {   
            ImageGallery.add(new JLabel (myImage1));
            myImages[0]=myImage1;
            myImages[1]=myImage2;
            myImages[2]=myImage3;
            myImages[3]=myImage4;

            add(ImageGallery, BorderLayout.NORTH);

            JButton PREVIOUS = new JButton ("Previous");
            JButton PLAY = new JButton ("Play");
            JButton STOP = new JButton ("Stop");
            JButton NEXT = new JButton ("Next");

            JPanel Menu = new JPanel();
            Menu.setLayout(new GridLayout(1,4));
            Menu.add(PREVIOUS);
            Menu.add(PLAY);
            Menu.add(STOP);
            Menu.add(NEXT);

            add(Menu, BorderLayout.SOUTH);

            //register listener
            PreviousButtonListener PreviousButton = new PreviousButtonListener ();
            PlayButtonListener PlayButton = new PlayButtonListener ();
            StopButtonListener StopButton = new StopButtonListener ();
            NextButtonListener NextButton = new NextButtonListener ();

            //add listeners to corresponding componenets 
            PREVIOUS.addActionListener(PreviousButton);
            PLAY.addActionListener(PlayButton);
            STOP.addActionListener(StopButton);
            NEXT.addActionListener(NextButton);

        }

    public static void main (String [] args)
        {
            ImageGallery frame = new ImageGallery();

            frame.setSize(490,430);
            frame.setVisible(true);
            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            frame.setLocationRelativeTo(null);
        }

    class PreviousButtonListener implements ActionListener 
    {

        public void actionPerformed(ActionEvent e)
            {
                if(curImageIndex>0 && curImageIndex <= 3)
                    {   ImageGallery.remove(0);
                        curImageIndex=curImageIndex-1;
                        ImageIcon TheImage= myImages[curImageIndex];
                        ImageGallery.add(new JLabel (TheImage));
                        ImageGallery.validate();
                        ImageGallery.repaint(); 
                    }
                else 
                    {   
                        ImageGallery.remove(0);
                        ImageGallery.add(new JLabel (myImage1));
                        curImageIndex=0;
                        ImageGallery.validate();
                        ImageGallery.repaint();
                    }
            }
    }

    class PlayButtonListener implements ActionListener 
    {
        public void actionPerformed(ActionEvent e)
            {
                        // *need help here*//

            }
    }

    class StopButtonListener implements ActionListener 
    {
        public void actionPerformed(ActionEvent e)
            {
                        // *need help here*//
            }
    }

    class NextButtonListener implements ActionListener 
    {

        public void actionPerformed(ActionEvent e)
        {

            if(curImageIndex>=0 && curImageIndex < 3)
                {   ImageGallery.remove(0);
                    curImageIndex = curImageIndex + 1;
                    ImageIcon TheImage= myImages[curImageIndex];
                    ImageGallery.add(new JLabel (TheImage));
                    ImageGallery.validate();
                    ImageGallery.repaint(); 
                }
            else 
                {   
                    ImageGallery.remove(0);
                    ImageGallery.add(new JLabel (myImage4));
                    curImageIndex=3;
                    ImageGallery.validate();
                    ImageGallery.repaint();
                }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T05:44:10.127

为什么要把简单的事情复杂化，

*   我认为这是[CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)的工作，而幻灯片则有[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)

*   将图像作为[图标放入](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html)[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T07:36:30.873

此[示例](https://stackoverflow.com/a/2576909/230513)显示了一个控制`javax.swing.Timer`. 正如@mKorbel 所建议并[在此处显示的那样，只需](https://sites.google.com/site/drjohnbmatthews/googleolympiad)*更新*标签，而不是每次都*替换*标签。*`Icon`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T05:11:35.047

您需要为幻灯片使用线程。您可以在 run 方法中使用一个标志来继续显示或在此标志更改时停止，例如布尔变量。您可以在[http://java.sun.com/developer/technicalArticles/Threads/applet/](http://java.sun.com/developer/technicalArticles/Threads/applet/)中看到一个示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T05:13:56.280

以下是一些可以帮助您入门的指南：

首先，您需要一个单独的线程来控制不断变化的图像。我建议你编写一个实现[TimerTask](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/TimerTask.html)的类。覆盖此类中的 run() 方法。在此运行方法中，您应该放置更改当前显示的图像的功能（类似于您在下一个和上一个功能中所做的）。

在播放按钮的 actionPerformed() 方法中，您需要创建 Timer 类的实例并使用 scheduleAtFixedRate(TimerTask task, long delay, long period) 方法启动计时器（也可以使用此类中的其他方法, scheduleAtFixedRate() 似乎更合适）。

对于停止，您需要添加足够的功能来使用 Timer 类中的 cancel() 方法停止正在运行的计时器*

# iphone - 如何通过蓝牙获取附近的ios设备信息

> ID：10274972
> 
> 赞同：0
> 
> 时间：2012-04-23T04:52:55.600
> 
> 标签：iphone, objective-c, ios, ipad, bluetooth

打开蓝牙时，如何设置其他 ios 设备可见的 ios 设备（iphone 和 ipad）蓝牙？当所有设备的蓝牙打开时，我只想在我的应用程序中获取并显示附近的所有 ios 设备的名称（包括 MFI 设备），并且我还想获​​取设备的 deviceID。我已经成功使用 GameKit.framework 通过蓝牙连接两个 ios 设备，但这需要两个设备一起运行该应用程序。有人可以为我提供有关如何实施它的建议吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:20:53.313

我自己还没有工作，我知道在这里提供链接不好。但希望这些链接能让你开始你自己：
[http ://www.touchthatfruit.com/ios-bluetooth-development-tutorial -使用游戏](http://www.touchthatfruit.com/ios-bluetooth-development-tutorial-using-game)

[http://vivianaranha.com/apple-gamekit-bluetooth-integration-tutorial/](http://vivianaranha.com/apple-gamekit-bluetooth-integration-tutorial/)

[http://www.devx.com/wireless/Article/43502/0/page/1](http://www.devx.com/wireless/Article/43502/0/page/1)

[http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)

很高兴能帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-06T17:55:23.887

我不确定你在问什么。打开设备的蓝牙是不够的。设备需要为对等方进行广告才能检测到它。我认为这可能与您正在尝试做的事情有关：[http](http://www.ralfebert.de/tutorials/ios-swift-multipeer-connectivity/) ://www.ralfebert.de/tutorials/ios-swift-multipeer-connectivity/ 。

我尝试了本教程，它非常有帮助。它使用 Multipeer Connectivity 来宣传和浏览周围的同行。它还会显示您周围设备的 deviceID。

# ruby-on-rails - 如何在不清除整个队列的情况下从 Resque 队列中删除特定作业？

> ID：10274974
> 
> 赞同：30
> 
> 时间：2012-04-23T04:53:03.433
> 
> 标签：ruby-on-rails, ruby, redis, resque

我正在使用 Resque 工作人员处理队列中的作业，队列中有大量 > 1M 的作业，并且有一些需要删除的作业（错误添加）。用作业创建队列并不是一件容易的事，因此使用 resque-web 清除队列并再次添加正确的作业对我来说不是一个选择。

感谢任何建议。谢谢！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-07T05:55:14.183

要从队列中删除特定作业，您可以使用 destroy 方法。它非常易于使用，例如，如果您想删除一个具有 Post 类和 id x 的作业，该作业位于名为 queue1 的队列中，您可以这样做..

```
Resque::Job.destroy(queue1, Post, 'x') 
```

如果要从队列中删除所有特定类型的作业，可以使用

```
Resque::Job.destroy(QueueName, ClassName) 
```

您可以在以下位置找到它的文档

[http://www.rubydoc.info/gems/resque/Resque%2FJob.destroy](http://www.rubydoc.info/gems/resque/Resque%2FJob.destroy)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-23T07:00:42.140

在 resque 的来源（Job 类）中有这样的方法，猜它是你需要的:)

```
# Removes a job from a queue. Expects a string queue name, a
# string class name, and, optionally, args.
#
# Returns the number of jobs destroyed.
#
# If no args are provided, it will remove all jobs of the class
# provided.
#
# That is, for these two jobs:
#
# { 'class' => 'UpdateGraph', 'args' => ['defunkt'] }
# { 'class' => 'UpdateGraph', 'args' => ['mojombo'] }
#
# The following call will remove both:
#
#   Resque::Job.destroy(queue, 'UpdateGraph')
#
# Whereas specifying args will only remove the 2nd job:
#
#   Resque::Job.destroy(queue, 'UpdateGraph', 'mojombo')
#
# This method can be potentially very slow and memory intensive,
# depending on the size of your queue, as it loads all jobs into
# a Ruby array before processing.
def self.destroy(queue, klass, *args) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-09-01T15:35:40.100

如果您知道传递给作业的所有参数，则上述解决方案非常有用。如果您知道*某些*传递给作业的参数的情况，则以下脚本将起作用：

```
queue_name = 'a_queue'
jobs = Resque.data_store.peek_in_queue(queue_name, 0, 500_000);
deleted_count = 0

jobs.each do |job|
  decoded_job = Resque.decode(job)
  if decoded_job['class'] == 'CoolJob' && decoded_job['args'].include?('a_job_argument')
    Resque.data_store.remove_from_queue(queue_name, job)
    deleted_count += 1
    puts "Deleted!"
  end
end

puts deleted_count 
```

# java - 用于从 DB 生成 Postgres SQL 脚本的 Java 库

> ID：10274976
> 
> 赞同：0
> 
> 时间：2012-04-23T04:53:14.963
> 
> 标签：java, api, postgresql

大家好！

开门见山。是否有任何 java 库可以从 DB 生成 Postgres SQL 脚本？

例如我有表 job_table

```
 name    | job
   Andy    | pull
   Benny   | push 
```

然后，我想像这样得到 String sql-script

```
String sqlInsert = 

  "INSERT INTO job_table(name, job) VALUES ('Andy', 'pull');"+
  "INSERT INTO job_table(name, job) VALUES ('Benny', 'push');"; 
```

或者类似的东西。

有人知道吗？

注意：我已经用 java 编写了自己的代码来手动生成它。但我就是不喜欢。:)

之前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T07:23:53.813

Use the PgJDBC support for the COPY command to feed tab-delimited or CSV data into the database, and to extract it in the same format. You want the [CopyManager](http://jdbc.postgresql.org/documentation/publicapi/org/postgresql/copy/CopyManager.html), which can be obtained from a [PgConnection](http://jdbc.postgresql.org/documentation/publicapi/org/postgresql/PGConnection.html).

The CopyManager is rather woefully under-documented at present, but it's just a wrapper around the [`COPY`](http://www.postgresql.org/docs/current/static/sql-copy.html) command.

Get access to the `PgConnection` interface by casting your java.sql.Connection to `PgConnection`. If the connection is wrapped by a connection pooling service you may have to unwrap it to get the real underlying connection returned by PgJDBC. Same deal if you're using JPA, you'll have to get access to the real PgJDBC connection or make a new one.

If you actually need `INSERT` statements, rather than an efficient way of delivering data to the database, what are your specific needs? Portability? If so, how will you handle things like the different representations of NUMERIC / DECIMAL / whatever?

If you only need to handle the "standard" data types, your hand rolled code may be the best way.

The only strictly safe way to do that is currently via pg_dump. You can invoke a `pg_dump --data-only --table=thetable` process and read from its stdout to do the job, though this does require (a) direct knowledge of the DB details in the app, not just a DataSource or injected entity manager from a container; (b) knowledge of the pg_dump path, and (c) the security permission to execute external processes. Unfortunately there isn't really any way around that at present. pg_dump isn't designed to be used as a library (though there's been talk of converting it) and even if it were, it'd be a C library you'd have to wrap via JNI or similar. Ick.

# iphone - 在 iOS 中读取 PPT、xls 和 .doc 文件的 SDK

> ID：10274977
> 
> 赞同：12
> 
> 时间：2012-04-23T04:53:21.343
> 
> 标签：iphone, objective-c, ios, ipad, powerpoint

在我的应用程序中，我需要启动 ppt、xls、pdf 文件。我敢肯定，iOS 框架支持在不启动任何其他应用程序的情况下查看 PDF 文件，但是有什么方法可以打开 ppt、xls doc，如果是，请给我任何指示，

我相信应该有一些可用的SDK，可以通过应用程序集成并使用它。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-23T05:12:41.717

如果您只想查看 Office 文件，请查看：

*   [iOS 文档交互编程主题：快速查看框架](http://developer.apple.com/library/ios/#DOCUMENTATION/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/UsingtheQuickLookFramework.html)。
*   [快速查看框架参考](http://developer.apple.com/library/ios/#DOCUMENTATION/QuickLook/Reference/QuickLookFrameworkReference_iPhoneOS/_index.html)

**如您在上面的链接中所见，**Quick Look Framework支持许多文件格式。**它在 iOS 4.0 及更高版本中可用。**

 **您还可以使用**UIWebView**来显示它们。请参阅[使用 UIWebView 显示选择的文档类型](https://developer.apple.com/library/ios/#qa/qa2008/qa1630.html)。**

# android - 在 imageview 中设置图库图像

> ID：10274978
> 
> 赞同：0
> 
> 时间：2012-04-23T04:53:27.340
> 
> 标签：android, imageview, gallery

我正在做与在 android 中相同的活动来设置给定画廊的壁纸。

当画廊停止滚动中心图像时，我有一个包含 50 个图像的画廊，我想在 imageview 中显示该图像。

```
 g.setOnItemSelectedListener(new OnItemSelectedListener()
    {
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                final int arg2, long arg3)
        {

            imageView.setImageResource(mImageIds[arg2]);  

        }

        public void onNothingSelected(AdapterView<?> arg0)
        {
            Toast.makeText(WallpaperThemeChoose.this, "NOTHING",
                    Toast.LENGTH_SHORT).show();
        }
    }); 
```

在滚动图像视图时，设置每个在图库中传递的图像。所以暂停一段时间然后开始我的意思是它在滚动时会粘住一段时间我不想显示所有正在通过的图像，但只有在滚动停止时出现在中心的图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:34:40.817

通过设置得到解决方案`g.setCallbackDuringFling(false);`

# iphone - 如何从 push segue 中解散带有情节提要的 viewController？

> ID：10274979
> 
> 赞同：10
> 
> 时间：2012-04-23T04:53:29.077
> 
> 标签：iphone, objective-c, cocoa-touch, storyboard, segue

我不知道为什么`dismissViewControllerAnimated:completion:`。我只是想做。

我从一个

```
[self performSegueWithIdentifier:@"my_segue" sender:self]; 
```

但是我称之为解雇比什么都没有发生。我可以创建另一个 segue，但它会创建一个新的视图控制器。

我的问题是：如何解雇`performSegueWithIdentifier:sender:`？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-03T18:28:30.230

您在 viewController 中是否有一个正在调用的导航栏：

```
[self performSegueWithIdentifier:@"my_segue" sender:self]; 
```

如果是这样，您将需要使用：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

将视图从堆栈中弹出。有一个 segue 调用，但框架似乎调用：

```
presentViewController:animated:completion: 
```

或者：

```
pushViewController:animated: 
```

作为适当的。

射线

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-05-16T21:46:33.423

你可以打电话

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

来自视图控制器，因为视图控制器是由 segue 推送的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T06:41:54.973

`performSegueWithIdentifier:sender:`本身并没有被解雇，这只是被调用以启动命名segue的方法。segue中发生的事情更有趣。

您应该调用 是对的，`dismissViewControllerAnimated:completion:`它应该由*呈现**视图*控制器调用，该控制器之前使用. 有关详细信息，请参阅[UIViewcontroller 文档](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIViewController_Class/Reference/Reference.html)。*`presentViewController:animated:completion:`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T06:02:15.047

`[my_segue_view_controller dismissModalViewControllerAnimated: YES]`?

（不确定，但它在我的实践中有效）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-23T03:35:25.060

将以下代码用于**Swift 4**版本

```
 self.navigationController?.popViewController(animated: true) 
```*

# c - 使用 Strtok() 验证 CSV 文件

> ID：10274981
> 
> 赞同：0
> 
> 时间：2012-04-23T04:53:59.317
> 
> 标签：c, strtok

我需要验证文本文件是否为 CSV 格式（即每个数字用逗号分隔）。

从网上阅读，似乎人们对此有相互矛盾的看法——但这是`Strtok()`最好的方法吗？

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T05:28:31.703

您的输入似乎*很*简单，我可能只会使用循环`fgetc(3)`；我将在这里绘制一些伪代码：

```
fd = fopen("file", "r");
int c;
while((c=fgetc(fd)) != EOF) {
    switch(c) {
        case '0':
        case '1':
        /* so on */
        case '9':
            handle_digit(c);
            break;
        case ',':
            handle_comma();
            break;
        case '\n':
            handle_newline();
            break;
        default:
            fprintf(stderr, "mistaken input %c\n", c);
            break;
    }
}
fclose(fd); 
```

如果您习惯于使用高级语言（例如 Ruby 或 Python）来获取数字列表，那么您必须以一种*可能*有点尴尬的方式管理函数中的输入`line.split(',')`，但是非常地道 C.

当然，如果这是一个*真正的*问题，我可能更喜欢`flex`and `bison`，并编写一个小的词法分析器和语法，主要是因为将来随着需求的变化它会*更*容易扩展。

* * *

**更新**

通过一些额外的标准来检查，`handle_{digit,comma,newline}()`例程更容易绘制。我将使用全局变量进行草图绘制，但您可以轻松地将它们填充到 a 中`struct`并将它们从一个函数传递到另一个函数：

```
enum seen {
    NEWLINE,
    COMMA,
    DIGIT,
};

enum seen last_seen = NEWLINE;

handle_digit(int c) {
    if (last_seen == DIGIT) {
        /* error if numbers cannot have multiple digits
           or construct a larger number if numbers can have
           multiple digits */
    } else if (last_seen == COMMA || last_seen == NEWLINE) {
        /* start a new entry */
    }
    last_seen = DIGIT;
}

handle_comma() {
    if (last_seen == COMMA) {
        /* error */
    } else if (last_seen == NEWLINE) {
        /* error */
    } else if (last_seen == DIGIT) {
        /* end previous field */
    }
    last_seen = COMMA;
}

handle_newline() {
    if (last_seen == NEWLINE) {
        /* error */
    } else if (last_seen == COMMA) {
        /* error */
    } else if (last_seen == DIGIT) {
        /* end previous field */
    }
    last_seen = NEWLINE;
} 
```

根据您拥有的任何规则添加您需要验证内容的任何检查。您可能希望标准化测试的顺序和内容，以确保您永远不会忘记一个，即使这意味着您写一`/* nop */`两次评论以提醒自己有些事情是好的。

# automapper - 在 AutoMapper 中使用 AutoMapper.IMappingOperationOptions

> ID：10274982
> 
> 赞同：0
> 
> 时间：2012-04-23T04:53:59.667
> 
> 标签：automapper, projection

如何在 AutoMapper 中使用函数 AutoMapper.Mapper.Map(TSource source, Action opts) ？

我认为第二个参数（Action opts）用于在需要时声明映射选项，但我找不到该函数的任何 API 文档。

我想映射 2 个对象而不必先创建映射，如果 2 个对象具有完全相同的字段，则以下命令有效： AutoMapper.Mapper.Map(TSource source)

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T22:04:32.963

`Mapper.DynamicMap<Model, ModelDto>()`应该做你想做的。

我只是对其进行了测试并将值从源复制到目标，而无需任何`CreateMap`调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-05T18:46:57.837

对于遇到此旧帖子的其他人，Automapper 的文档已经改进。您可以在此处查看使用 Map 函数的第二个参数的示例：
[https ://docs.automapper.org/en/latest/Before-and-after-map-actions.html](https://docs.automapper.org/en/latest/Before-and-after-map-actions.html)

# javascript - 在一页上多次使用相同的本地存储 ID

> ID：10274983
> 
> 赞同：0
> 
> 时间：2012-04-23T04:54:06.070
> 
> 标签：javascript, local-storage

是否可以在同一页面上多次使用/打印相同的本地存储元素？`document.getElementById("searchOutput").innerHTML=localStorage.searchTerms;`

我试图收集一个搜索词并在同一页面上多次输出，但它只显示在第一位

```
<div class="outputText">
    <ul><li>You have searched <span id="numberClicks">0</span> times.</li>
    <li>You have searched for <span id="searchOutput"> nothing yet</span>.</li></ul>
</div>
    <div class="scroogleSearch">    
<h2>News results for <span id="searchOutput"> </span></h2>
<h2><span id="searchOutput"></span> on Twitter - @<span id="searchOutput"> </span></h2>
<h2><span id="searchOutput"> </span> - Wikipedia, the free encyclopedia</h2>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:55:21.030

每个网页只能使用一次给定的 ID。

要多次输出某些内容，您需要生成唯一的 id 或在这些元素上使用类名。您可以拥有多个具有给定类名的元素。

根据规范，`document.getElementById()`只返回一个对象，因此您永远不能使用它来检索多个对象。

# c# - Linq 性能：从查询中移出条件是否有意义？

> ID：10274984
> 
> 赞同：1
> 
> 时间：2012-04-23T04:54:09.377
> 
> 标签：c#, .net, performance, linq, linq-to-objects

有一个 LINQ 查询：

```
int criteria = GetCriteria();
var teams = Team.GetTeams()
    .Where(team=> criteria == 0 || team.Criteria == criteria)
    .ToList(); 
```

从性能（或任何其他角度）将其转换为以下是否有意义？

```
var teams = Team.GetTeams();
if (criteria != 0)
{
    teams = teams.Where(team => team.Criteria == criteria);
}
teams = teams.ToList(); 
```

我有一套可靠的标准；我应该将它们分开并仅在必要时应用每个标准吗？或者只是将它们应用到一个 LINQ 查询中并留给 .NET 来优化查询？

请指教。欢迎任何想法！

PS 各位，我不用Linq2Sql，只用LINQ，那是纯C#代码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T05:30:39.977

首先，重要的是要了解 LINQ 实际上有多种变体，主要可以根据它们是使用表达式树还是编译代码来执行查询来划分。

Linq2Sql（以及将查询转换为另一种形式以执行查询的任何 Linq 提供程序）使用表达式树，以便可以分析查询并将其转换为另一种形式（通常是 SQL）。在这种情况下，提供者可以修改查询，潜在地执行某种程度的优化。我不知道目前有任何提供者这样做。

Linq to Objects 使用已编译的代码，并且将始终按照编写的方式执行查询。除了开发人员之外，没有机会优化查询。

其次，所有 Linq 查询都被延迟。这意味着在尝试获取结果之前不会实际执行查询。这样做的副作用是您可以分几个步骤构建查询，并且只会执行最终查询。问题中的第二个示例仍然*只执行一个查询*。

如果您使用的是 Linq2Sql，那么这两个查询很可能具有大致相似的性能。但是，第一个示例扩展为处理许多标准可能会导致执行计划过于笼统，最终会降低性能。修剪后的查询不会冒这种风险，并且将为每个实际的条件排列生成一个执行计划。

如果您使用的是 Linq to Objects，那么第二个查询绝对是更可取的，因为第一个查询将为每个输入执行一次传递给 Where 的谓词，即使条件总是返回 true。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T04:56:59.313

我认为第二个选项更好，因为它只检查标准值一次。而在第一个查询中，每行都检查标准。
但我也相信你不会从中获得任何显着的性能提升。它可以在具有大量记录的表上为您提供更好的结果（理论上）

# virtualenv - `mkvirtualenv` 命令的底层是什么？

> ID：10274985
> 
> 赞同：6
> 
> 时间：2012-04-23T04:54:15.427
> 
> 标签：virtualenv, virtualenvwrapper

我很好奇`mkvirtualenv`命令的底层发生了什么，所以我试图理解它是如何调用`virtualenv`的。

最简单的方法是弄清楚安装后virtualenv程序的位置以及安装后mkvirtualenv程序的位置。所以：-

```
Calvins-MacBook-Pro.local ttys006 Mon Apr 23 12:31:07 |~|
calvin$ which mkvirtualenv
Calvins-MacBook-Pro.local ttys006 Mon Apr 23 12:31:10 |~|
calvin$ which virtualenv
/opt/local/library/Frameworks/Python.framework/Versions/2.7/bin/virtualenv 
```

所以我在这里看到的奇怪的事情是`which mkvirtualenv`没有给出任何结果。为什么？

进一步挖掘，在安装后的 virtualenvwrapper 目录中，我只看到 3 个 python 文件：-

```
Calvins-MacBook-Pro.local ttys004 Mon Apr 23 12:28:05 |/opt/local/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/virtualenvwrapper|
calvin$ ls -la
total 88
drwxr-xr-x   8 root  wheel    272 Apr 13 15:07 .
drwxr-xr-x  29 root  wheel    986 Apr 15 00:55 ..
-rw-r--r--   1 root  wheel   5292 Apr 13 15:05 hook_loader.py
-rw-r--r--   1 root  wheel   4810 Apr 13 15:07 hook_loader.pyc
-rw-r--r--   1 root  wheel   1390 Apr 13 15:05 project.py
-rw-r--r--   1 root  wheel   2615 Apr 13 15:07 project.pyc
-rw-r--r--   1 root  wheel   7381 Apr 13 15:05 user_scripts.py
-rw-r--r--   1 root  wheel  11472 Apr 13 15:07 user_scripts.pyc 
```

而且我认为现在在我的终端中可用的唯一原因`mkvirtualenv`是因为我添加了一个`source/opt/local/library/Frameworks/Python.framework/Versions/2.7/bin/virtualenvwrapper.sh`. 所以回答我之前提出的问题，这仅仅是因为它表示为一个 bash 函数并且在我的终端中可用，因为我在我的or文件`mkvirtualenv`中获取了 virtualenvwrapper.sh 。`.bashrc``.bash_profile`

深入研究`virtualenvwrapper.sh`脚本，我明白了

```
# Create a new environment, in the WORKON_HOME.
#
# Usage: mkvirtualenv [options] ENVNAME
# (where the options are passed directly to virtualenv)
#
function mkvirtualenv {
    typeset -a in_args
    typeset -a out_args
    typeset -i i
    typeset tst
    typeset a
    typeset envname
    typeset requirements
    typeset packages

    in_args=( "$@" )

    if [ -n "$ZSH_VERSION" ]
    then
        i=1
        tst="-le"
    else
        i=0
        tst="-lt"
    fi
    while [ $i $tst $# ]
    do
        a="${in_args[$i]}"
        # echo "arg $i : $a"
        case "$a" in
            -a)
                i=$(( $i + 1 ));
                project="${in_args[$i]}";;
            -h)
                mkvirtualenv_help;
                return;;
            -i)
                i=$(( $i + 1 ));
                packages="$packages ${in_args[$i]}";;
            -r)
                i=$(( $i + 1 ));
                requirements="${in_args[$i]}";;
            *)
                if [ ${#out_args} -gt 0 ]
                then
                    out_args=( "${out_args[@]-}" "$a" )
                else
                    out_args=( "$a" )
                fi;;
        esac
        i=$(( $i + 1 ))
    done

    set -- "${out_args[@]}"

    eval "envname=\$$#"
    virtualenvwrapper_verify_workon_home || return 1
    virtualenvwrapper_verify_virtualenv || return 1
    (
        [ -n "$ZSH_VERSION" ] && setopt SH_WORD_SPLIT
        \cd "$WORKON_HOME" &&
        "$VIRTUALENVWRAPPER_VIRTUALENV" $VIRTUALENVWRAPPER_VIRTUALENV_ARGS "$@" &&
        [ -d "$WORKON_HOME/$envname" ] && \
            virtualenvwrapper_run_hook "pre_mkvirtualenv" "$envname"
    )
    typeset RC=$?
    [ $RC -ne 0 ] && return $RC

    # If they passed a help option or got an error from virtualenv,
    # the environment won't exist.  Use that to tell whether
    # we should switch to the environment and run the hook.
    [ ! -d "$WORKON_HOME/$envname" ] && return 0

    # If they gave us a project directory, set it up now
    # so the activate hooks can find it.
    if [ ! -z "$project" ]
    then
        setvirtualenvproject "$WORKON_HOME/$envname" "$project"
    fi

    # Now activate the new environment
    workon "$envname"

    if [ ! -z "$requirements" ]
    then
        pip install -r "$requirements"
    fi

    for a in $packages
    do
        pip install $a
    done

    virtualenvwrapper_run_hook "post_mkvirtualenv"
} 
```

这是我还不明白的地方 - 我似乎`virtualenv`在这个 bash 函数中没有看到任何直接引用。那么这个 bash 函数究竟是如何`mkvirtualenv`将参数从命令行（例如`mkvirtualenv -p python2.7 --no-site-packages mynewproject`）传递给 python`virtualenv`程序的呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T05:24:47.923

所以这是行之有效的方法。

```
(
    [ -n "$ZSH_VERSION" ] && setopt SH_WORD_SPLIT
    \cd "$WORKON_HOME" &&
    "$VIRTUALENVWRAPPER_VIRTUALENV" $VIRTUALENVWRAPPER_VIRTUALENV_ARGS "$@" &&
    [ -d "$WORKON_HOME/$envname" ] && \
        virtualenvwrapper_run_hook "pre_mkvirtualenv" "$envname"
) 
```

`$VIRTUALENVWRAPPER_VIRTUALENV`实际上是当前`virtualenv`程序所在的位置。

在终端，

```
Calvins-MacBook-Pro.local ttys004 Mon Apr 23 13:24:14 |~|
calvin$ which $VIRTUALENVWRAPPER_VIRTUALENV
/opt/local/library/Frameworks/Python.framework/Versions/2.7/bin/virtualenv 
```

谜团解开了。

# php - 安装 wordpress 插件时创建数据库表

> ID：10274986
> 
> 赞同：3
> 
> 时间：2012-04-23T04:54:20.857
> 
> 标签：php, mysql, database, wordpress

我想在安装我创建的插件后在数据库中创建一个表。

在我的主插件文件（index.php）中：

```
register_activation_hook(__FILE__, 'wnm_install');

global $wnm_db_version;
$wnm_db_version = "1.0";

function wnm_install(){
global $wpdb;
global $wnm_db_version;
$sql = "CREATE TABLE tbl_campaigns (
campaignID int(11) NOT NULL AUTO_INCREMENT,
campaign_name varchar(128) NOT NULL,
start_duration date NOT NULL,
end_duration date NOT NULL,
activity varchar(500) NOT NULL,
survey_settings varchar(50) NOT NULL,
limit varchar(50) NOT NULL,
goal varchar(100) DEFAULT NULL,
PRIMARY KEY (campaignID)
) ;";

require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
dbDelta($sql);
add_option("wnm_db_version", $wnm_db_version);
} 
```

我只是按照此[http://codex.wordpress.org/Creating_Tables_with_Plugins中的说明进行操作](http://codex.wordpress.org/Creating_Tables_with_Plugins)

但它不起作用。

这段代码似乎有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T05:43:24.817

```
limit varchar(50) NOT NULL, 
```

限制是一个关键字，更改为其他类似

```
`limit` varchar(50) NOT NULL, 
```

在关键字周围使用反引号

# android - 如何在android中向arraylist添加一个值？

> ID：10274988
> 
> 赞同：0
> 
> 时间：2012-04-23T04:54:33.777
> 
> 标签：android

我正在**向我的数组列表添加一个值，**但它显示错误。在添加值之前，我先显示它。该值正在显示，但未添加到数组列表中。请帮我解决这个问题...

我的代码：

```
static ArrayList<String> allfirstids;

ArrayList<String> list = List.get(i);
UserBO user = new UserBO();

user.firstid = Integer.parseInt(list.get(0));
user.secondid = Integer.parseInt(list.get(1));
System.out.print("Hello this is first id");
System.out.print(list.get(0));

allfirstids.add(list.get(0));
System.out.println("first ids"+allfirstids); 
```

提前致谢...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T05:00:45.077

添加前，请先初始化arraylist。

```
 allfirstids = new ArrayList<String>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T05:01:22.700

你忘了初始化你的静态`ArrayList allfirstids`，只需初始化它，然后再使用..

```
static ArrayList<String> allfirstids = new ArrayList<String>();

ArrayList<String> list = List.get(i);
UserBO user = new UserBO();

user.firstid = Integer.parseInt(list.get(0));
user.secondid = Integer.parseInt(list.get(1));
System.out.print("Hello this is first id");
System.out.print(list.get(0));

allfirstids.add(list.get(0));
System.out.println("first ids"+allfirstids); 
```

# javascript - 如何使此切换 javascript 按钮（图像）不那么笨拙？

> ID：10274994
> 
> 赞同：0
> 
> 时间：2012-04-23T04:54:55.307
> 
> 标签：javascript, button, toggle

我正在寻找是否有办法让这段代码不那么笨拙？我认为必须有一种更优雅的方式来制作 2 个按钮，这些按钮可以在悬停和单击时在 2 个或更多按钮状态之间切换。

谢谢！

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link type="text/css" rel="stylesheet" href="style.css" />
  <script type="text/javascript">

    img1 = "images/buy1.png"; 
    img2 = "images/buy2.png"; 
    function chng(c_img) { 
    if (c_img.src.indexOf(img1)!= -1) c_img.src = img2; 
    else c_img.src = img1; 
    }  
    img3 = "images/sell1.png"; 
    img4 = "images/sell2.png"; 
    function chng2(c_img) { 
    if (c_img.src.indexOf(img3)!= -1) c_img.src = img4; 
    else c_img.src = img3; 
    } 
    </script>

  <title></title>
</head>

<body>
  <div class="container">
    <div id="sell">
      <a href="#"><img src="images/buy1.png" onclick="chng(this)" name="img" width="115"
      border="0" height="50" id="img" /></a>
    </div><a href="#"><img src="images/sell1.png" onclick="chng2(this)" name="img2"
    width="115" border="0" height="50" id="img2" /></a>
  </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:04:12.907

使用[jQuery 切换事件](http://api.jquery.com/toggle-event/)

**笔记**

该代码将处理链接的 ID 和图像具有某种匹配的任何链接和图像 -也可以使用`data`，但也与非 html5 浏览器兼容。您必须为每个不同的图像提供图像或类名，但切换脚本是固定的。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link type="text/css" rel="stylesheet" href="style.css" />
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript">

    var icons = {
        buy:{ 
          on:"http://ev9.evenue.net/evenue/linkID=global-fargo/images/buy-tickets.png", 
         off:"http://ev8.evenue.net/evenue/linkID=global-sandler/images/buyTickets.png"
        },
        sell:{ 
          on:"http://ev9.evenue.net/evenue/linkID=global-fargo/images/buy-tickets.png", 
         off:"http://ev8.evenue.net/evenue/linkID=global-sandler/images/buyTickets.png"
        }
    } 
    $(document).ready(function() {
        $(".toggleLink").toggle(
          function() {
            var id = $(this).attr("id");
            $("#"+id+"Img").attr("src",icons[id].on);
            // OR change the className of the link 
            // OR use data-toggle - but no need to test the image src
          },
          function() {
            var id = $(this).attr("id");
            $("#"+id+"Img").attr("src",icons[id].off);
          }
        );
    });
    </script>

  <title></title>
</head>

<body>
  <div class="container">
    <div id="sell">
      <a href="#" id="buy" class="toggleLink"><img src="http://ev8.evenue.net/evenue/linkID=global-sandler/images/buyTickets.png"  id="buyImg" width="115"
      border="0" height="50" /></a>
      <a href="#" id="sell" class="toggleLink"><img src="http://ev8.evenue.net/evenue/linkID=global-sandler/images/buyTickets.png"  id="sellImg" width="115"
      border="0" height="50" /></a>
  </div>
</body>
</html> 
```

**UPDATE**使用数据属性来证明一个观点

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link type="text/css" rel="stylesheet" href="style.css" />
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript">

      $(document).ready(function() {
        $(".toggleLink").toggle(
          function() {
            var img = $(this).find("img");
            img.attr("src",img.data('toggleon'));
          },
          function() {
            var img = $(this).find("img");
            img.attr("src",img.data('toggleoff'));
          }
        );
    });
    </script>

  <title></title>
</head>

<body>
  <div class="container">
    <div id="buy">
      <a href="#" class="toggleLink"><img src="images/buy1.png" 
      data-toggleon="images/buy1.png" 
      data-toggleoff="images/buy2.png"  
      width="115" border="0" height="50" id="img" /></a>
  </div>
</body>
</html> 
```

PS：看看这里有一个很棒的版本

[带有悬停然后单击的元素删除悬停效果并再次单击通过格雷格佩蒂特](http://jsfiddle.net/mplungjan/7Tgwc/)的小提琴[再次添加悬停](https://stackoverflow.com/a/7899318/295783)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:07:04.987

这听起来非常适合使用 CSS 背景精灵。创建具有两种状态的图像，垂直堆叠：

```
----------------------
|      "on" image    |
----------------------
----------------------
|     "off" image    |
---------------------- 
```

给你的链接一个类，并使用属性将图像应用到元素上[`background-image`](http://www.w3.org/TR/css3-background/#the-background-image)（使用下面的简写符号）：

```
<a href="#" class="buy1"></a> 
```

```
.buy1 {
   display: block;
   width: 115px;
   height: 50px;
   background: transparent url(images/buy1.png) left bottom no-repeat;
}

.buy1.on { background-position: left top; } 
```

然后使用 JavaScript，您可以简单地切换类：

```
$(document).ready(function(){
    $("#sell a").on('click',function(){
        $(this).toggleClass('on');
    });
}); 
```

这种方法有很多优点：

*   更少的服务器请求（您可以将所有图像组合到一张精灵表中，它们将在一个请求中加载）意味着更好的性能
*   悬停不会有延迟，因为“on”状态已经加载
*   更容易维护

**编辑**我要补充的是，您应该在链接中放置一些真实的内容，以便为屏幕阅读器用户提供一些可以导航的东西。我通常会为此使用图像替换技术：

```
<a href="#" class="buy1"><span>Buy Now</span></a> 
```

```
.buy1 span {
    position: absolute;
    display: block;
    top: -10000px;
    left: -10000px;
    font-size: 1px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:07:37.157

使用 CSS 选择器 - 就像这里记录的那样：http: [//www.w3schools.com/cssref/sel_hover.asp](http://www.w3schools.com/cssref/sel_hover.asp)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T05:07:41.680

如果您的意思是更时尚，则可以通过 css 或 jquery

[http://www.webreference.com/programming/css_stylish/index.html](http://www.webreference.com/programming/css_stylish/index.html)

[http://speckyboy.com/2009/05/27/22-css-button-styling-tutorials-and-techniques/](http://speckyboy.com/2009/05/27/22-css-button-styling-tutorials-and-techniques/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T05:16:09.617

看起来不错。我可以想到一种更优雅的方式，使用[jQuery](http://jquery.com/)：

首先，给你的每一个元素一个`toggleImg`类。然后，为每个按钮赋予属性`data-toggleon`和`data-toggleoff`。如果您愿意，请删除`id`and 。`name`

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <link type="text/css" rel="stylesheet" href="style.css" />
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){
     $(".toggleImg").on('click',function(){
      if($(this).attr('src')==$(this).data('toggleon')){
       $(this).attr('src',$(this).data('toggleoff'))
      }else{
       $(this).attr('src',$(this).data('toggleon'))
      }
    });

    });
    </script>

  <title></title>
</head>

<body>
  <div class="container">
    <div id="sell">
      <a href="#"><img src="images/buy1.png" class=toggleImg data-toggleon="images/buy1.png" data-toggleoff="images/buy2.png"  width="115" border="0" height="50" /></a>
    </div><a href="#"><img src="images/sell1.png" class=toggleImg data-toggleon="images/sell1.png" data-toggleoff="images/sell2.png" width="115" border="0" height="50"  /></a>
  </div>
</body>
</html> 
```

代码因此可以轻松扩展——您可以`img`使用适当的类/属性在任何您想要的地方添加新的 s，而不必担心添加新的 JS。

# c# - 将查询结果返回到列表框

> ID：10274996
> 
> 赞同：2
> 
> 时间：2012-04-23T04:55:06.727
> 
> 标签：c#, winforms, linq

我有一门课，`ExpenseItem`还有一个基于该课的列表。

我目前正在设计一个具有组合框的表单，该组合框允许我选择特定类型的`ExpenseItem`旅行，并在列表框中显示所有结果。

表单代码（`tripSelect`是组合框，`listExpenses`是列表框）：

```
 private void LoadExpenseList()
    {
        tripSelect.Items.Clear();
        var dateSorted =
            from e in roster
            group e by e.Trip into tripGroup
            select new { Trip = tripGroup.Key };
        foreach (var e in dateSorted)
            tripSelect.Items.Add(e.Trip);
    }

    private void LoadExpenseDetail()
    {
        listExpenses.Items.Clear();
        var dateSorted =
            from e in roster
            orderby e.Trip
            select e;
        foreach (var e in dateSorted) ;
    }

    private void ExpenseRecorderForm_Load(object sender, EventArgs e)
    {

    }

    private void tripSelect_SelectedIndexChanged(object sender, EventArgs e)
    {
        selectedExpense = (ExpenseItem)roster.ToFind((string)tripSelect.SelectedItem);
        listExpenses.Items.Add(selectedExpense);
    }

    private void listExpenses_SelectedIndexChanged(object sender, EventArgs e)
    {
        tripTextBox.Text = selectedExpense.Trip;
        tripTextBox.Enabled = false;
        descriptionTextBox.Text = selectedExpense.Description;
        amountTextBox.Text = selectedExpense.Amount.ToString();
        paymentMethodTextBox.Text = selectedExpense.PaymentMethod;
        dateExpenseTimePicker.Value = selectedExpense.Date;
        dateExpenseTimePicker.Enabled = true;
        noteTextBox.Text = selectedExpense.Note;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T05:02:41.603

> 我无法编写类似 myVariable.Where(); 的代码 因为它不是 IEnumerable

我真的不明白你的意思。

至于错误，它说你不能从`IEnumerable`to 转换`ExpenseItem`。您必须像最终示例一样应用它并返回项目而不是`IEnumerable`. 我会跳过该`Where`子句并直接使用`FirstOrDefault`

```
public ExpenseItem ToFind(string trip)
{
    return this.FirstOrDefault(e => e.Trip == trip);
} 
```

我认为`this`是定制的集合，否则 Linq 扩展将无法使用`this`

编辑

如果你真的想要这个..

```
public IEnumerable<ExpenseItem> ToFind(string trip)
{
    return this.Where(e => e.Trip == trip);
} 
```

然后，您将需要处理来自调用者的列表。

```
private void tripSelect_SelectedIndexChanged(object sender, EventArgs e)
{
    IEnumerable<ExpenseItem> selectedExpenses = roster.ToFind((string)tripSelect.SelectedItem);
    foreach(ExpenseItem item in selectedExpenses)
        listExpenses.Items.Add(item);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:22:08.670

如果你会使用这个：

```
public IEnumerable<ExpenseItem> ToFind(string trip)
{
    return this.Where(e => e.Trip == trip);
} 
```

您需要使用它，请注意 FirstOrDefault：

```
selectedExpense = roster
      .ToFind((string)tripSelect.SelectedItem)
      .FirstOrDefault(); 
```

您 selectedExpense 不是 IEnumerable：

```
private ExpenseItem selectedExpense; 
```

* * *

通过良好的设计，如果查找器仅匹配一条记录，例如通过主键

```
public ExpenseItem ToFind(string expenseId)
{
    return this.FirstOrDefault(e => e.ExpenseId == expenseId);
} 
```

，使用 FirstOrDefault，然后，您可以像这样简单地使用 finder 方法：

```
selectedExpense = roster.ToFind(idHere); 
```