# StackOverflow 问答 12121000-12121999

# ubuntu - 为什么 virtualenv 工作不带我到 env 目录

> ID：12121007
> 
> 赞同：6
> 
> 时间：2012-08-25T10:00:51.963
> 
> 标签：ubuntu, virtualenv, ubuntu-server, virtualenvwrapper

我有 virtualenv 设置，它很好地接受了一个烦人的问题。当我使用 workon 命令进入环境时，环境已正确登录，但我没有自动定向到环境根目录。

我在我的`.bashrc`文件中添加了以下几行：

```
export WORKON_HOME=$HOME/.virtualenvs
source /usr/local/bin/virtualenvwrapper.sh 
```

并重新加载它（源`.bashrc`），但是当我进入一个环境时，我仍然留在我的 ubuntu 用户主目录中。我也尝试重新启动我的服务器，但仍然没有运气。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T10:12:05.237

我不认为`workon`环境目录的变化。解决方案是将其放在`postactivate`您的 virtualenv 文件中。

例如，我在我的`<virtual_env_dir>/bin/postactivate`

```
cd /home/myuser/work/ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-09T06:22:03.187

环境与带有 virtualenvwrapper 的项目是分开的。您首先需要确保`$PROJECT_HOME`已设置变量。然后你可以使用该`mkproject`命令在`$PROJECT_HOME'中创建一个环境和一个项目。或者，您可以使用[setvirtualenvproject](http://virtualenvwrapper.readthedocs.org/en/latest/command_ref.html#setvirtualenvproject)将现有项目与现有虚拟环境相关联。

# facebook - Jomsocial facebook connect 让我的网站前端和后端空白

> ID：12121009
> 
> 赞同：-1
> 
> 时间：2012-08-25T10:01:25.567
> 
> 标签：facebook, login, joomla

我有一个 Jomsocial 网站，可以很好地使用“hellome”模块进行登录；在我启用后端“jomsocial facebook connect”并从管理面板断开连接后，我无法再次登录，但只能看到一个空白页面。

前端也有同样的问题。我很绝望，因为没有后端访问权限我无法更改设置！请帮助：我怎样才能通过 ftp 禁用 fb 连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:21:59.223

好的，我通过在我的数据库中修改表 jos_plugin 来获得，设置为 0（未发布）jomsocial 插件到 facebook 连接。之后我必须让它与你好我模块一起工作，但这是另一个故事..

# html - 如何将表格右侧的文本垂直对齐到表格的中间？

> ID：12121011
> 
> 赞同：2
> 
> 时间：2012-08-25T10:01:33.853
> 
> 标签：html, css, html-table, vertical-alignment

我使用这个非常有用的[Stack Overflow Link](https://stackoverflow.com/questions/1159337/display-text-on-same-line-as-html-table)创建了一个“内联”表，看起来像一个分数。它的图片如下：

![三分之五在一张桌子上](../Images/d281a6000a3356b18dde258fa4bd2afc.png)

现在一切正常，但是看看当它旁边的内容被放置时会发生什么：

![三比五加号（不工作）](../Images/87b64ed1b0d2771f0d2549df88638ffa.png)

加号与表格顶部对齐。所以我想知道，有没有办法将它对齐到桌子的中间（靠近 vinculum 或中线）？

**编辑：**由于用户请求，这是我的表的代码，也是加号：

```
<table style="border-collapse: collapse; width: auto; float: left; margin: 2px;">
  <tbody>
    <tr><td style="text-align: center;padding: 5px; border-bottom: 1px solid black;">3</td></tr>
    <tr><td style="text-align: center; padding: 5px;">5</td></tr>
  </tbody>
</table>
+ 
```

此外，所有上述代码都放在 ap 元素中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T00:01:37.543

你为什么用桌子？我认为这更好：

HTML：

```
<span class="fraction">
    <span>5</span>
    <span>3</span>
</span>
+
<span class="fraction">
    <span>1</span>
    <span>2</span>
</span> 
```

CSS：

```
.fraction{
    display:inline-block;
    vertical-align:middle;
}
.fraction>span{
    display:block;
}
.fraction>span:first-child{
    border-bottom:1px solid black;
} 
```

在这里看到它：http: [//jsfiddle.net/7aQUP/](http://jsfiddle.net/7aQUP/)

**编辑：**

当分数中有分数时，您还可以添加填充以增加条形：

```
.fraction>span{
    padding:0 7px;
} 
```

在这里看到它：http: [//jsfiddle.net/7aQUP/2/](http://jsfiddle.net/7aQUP/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:12:57.860

这在 IE8 中正确对齐

```
<table style="width: 250px;float: left;">  
   <tr>        
 <td>3+ </td>     </tr>     <tr>       
  <td>5</td>     </tr> </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:48:43.397

```
<table style="border-collapse: collapse; width: auto; float: left; margin: 2px;">
    <tbody>
        <tr>
            <td style="text-align: center;padding: 5px; border-bottom: 1px solid black;">3</td>
        </tr>
        <tr>
            <td style="text-align: center; padding: 5px;">5</td>
        </tr>
    </tbody>
</table>
<table style="border-collapse: collapse; width: auto; float: left; margin: 2px;">
    <tbody>
        <tr>
            <td style="text-align: center;padding-top: 20px;">+</td>
        </tr>
    </tbody>
</table>​ 
```

这看起来很有效。试试这个：http: [//jsfiddle.net/Cg9jy/1/](http://jsfiddle.net/Cg9jy/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T23:27:21.990

感谢 Sreenath Soman 的想法，我增加了`p`元素中的 padding，并使用负数`margin-top`将整个表格向上移动。如果没有填充，一半的桌子会消失。这就是填充的用途。

# android - 根据 Intent Extras 值设置选择的微调器项目

> ID：12121024
> 
> 赞同：1
> 
> 时间：2012-08-25T10:02:19.057
> 
> 标签：android, android-intent, spinner, selection, extra

我的活动中有一个微调器，从数据库填充，如果活动获得带有附加功能的 Intent，我想从根据额外选择的微调器中设置一个项目。例如 - 如果我有一个额外的“CURR_NOTE_CATEGORY”并且它的值为 2，我希望选择微调器中的第二个项目。没有额外的东西 - 只是普通的微调器。所以我有这个代码：

```
int curr_note_category;

ArrayAdapter<String> adapter;
NotesManager manager = new NotesManager(this);
ArrayList<Category> arrListCategories; 
ArrayList<String> arrListCategoriesString = new ArrayList<String>();
Spinner spCategories;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_edit_note);

    spCategories = (Spinner) findViewById(R.id.spCategories);

    if(getIntent().getExtras()!=null){
        // Get Extras
        curr_note_category = getIntent().getExtras().getInt("CURR_NOTE_CATEGORY");

        spCategories.setSelection(curr_note_category);

    }

    manager.getAllCategories();
    arrListCategories = manager.getAllCategories();

    for (int i = 0; i < arrListCategories.size(); i++) 
    {
        Category currCategory = arrListCategories.get(i);
        arrListCategoriesString.add(currCategory.getCategory_name().toString());            
    }

    adapter=new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item, arrListCategoriesString);
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spCategories.setAdapter(adapter);
    spCategories.setOnItemSelectedListener(spinnerListener);
} 
```

我得到了常规的微调器，但当有 Intent Extra 时，从来没有选择过的项目。那么怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:07:13.677

请将您的微调器设置选择代码放在后面`setOnItemSelectedListener();`

```
adapter=new ArrayAdapter<String> (this, android.R.layout.simple_spinner_item, arrListCategoriesString);
adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
spCategories.setAdapter(adapter);
spCategories.setOnItemSelectedListener(spinnerListener);

if(getIntent().getExtras()!=null)
{
    // Get Extras
    curr_note_category = getIntent().getExtras().getInt("CURR_NOTE_CATEGORY");

    spCategories.setSelection(curr_note_category);
} 
```

# algorithm - “Frogger”游戏的算法

> ID：12121028
> 
> 赞同：3
> 
> 时间：2012-08-25T10:02:25.893
> 
> 标签：algorithm

这是一道面试题。设计一个算法来玩“Frogger”。也就是说，你指挥一只青蛙，它必须穿过一条繁忙的马路。青蛙可以前进/后退和左/右移动，汽车只向左移动，青蛙和汽车一次移动一个位置。

我想知道如何*将*其简化为一些基本的知名算法。如果游戏中没有“时间”，我会建立一个安全位置图并找到一条通往青蛙目的地的路径。但是，我不能使用这种方法。

如何将*“* Frogger”简化为众所周知的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:17:51.593

假设汽车和青蛙小心翼翼地移动，一次一个“正方形”，让我们用 V 表示青蛙垂直移动（穿过马路）的次数和青蛙水平移动的次数（沿着车道） ) by H. 如果你说 5 条车道，1-5，青蛙可以在 T=X + 2*V + H 形式的时刻在车道 X 上。到目前为止，一切都很好。

由于每个车道上的汽车在时刻 T 的状态是确定性的，我们可以在未来一段合理的时间内生成整条道路的状态：L(1,T)L(2,T).. .L(5,T)。我建议您生成 L(1,1 + 2*V + H)L(2,2 + 2*V + H)...L(5,5 + 2*V + H) 形式的虚构道路状态) 并寻找一种状态，在该状态中，您有一条通往另一侧的开放直线，因此消除了时间分量。

实际上，你是在暴力破解它，但假设有合理数量的车道和允许的移动，你没有理由不这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:19:00.703

我猜想这样的事情会以简单的形式工作。（假设这是关于如何运行游戏，而不是如何解决它）

```
1) build array to store all tiles on map (each segment of road / water / log)
2) build list to store car / log locations
3) Set up a timer
4) on timer tick, update array of locations with full/empty tiles for each car / log in list (2)
5) check whether the current locaiton of the frog is in the same location as a log / car
6) repeat 4/5 while frog can move 
```

类似的东西？

# android - 在活动中创建一个按钮以在 android 中启动所有已安装的应用程序

> ID：12121031
> 
> 赞同：0
> 
> 时间：2012-08-25T10:03:13.473
> 
> 标签：android, android-layout

我正在尝试在活动中创建一个按钮来启动所有已安装的应用程序，因为主屏幕上的应用程序启动器按钮打开所有应用程序。这将是一个很大的例子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:02:04.983

下面的代码为您提供了所有已安装的应用程序。我正在过滤掉可以启动的应用程序。如果您想要所有应用程序，无论它们是否可以启动，那么您可以删除 if (mIntent != null) 检查。

```
 List<PackageInfo> apps = getPackageManager().getInstalledPackages(0);
    for (int i = 0; apps != null && i < apps.size(); i++) {
        PackageInfo p = apps.get(i);

        Intent mIntent = getPackageManager().getLaunchIntentForPackage(
                p.packageName);
        if (mIntent != null) {
            PackageManager pm = getApplicationContext().getPackageManager();
            ApplicationInfo appInfo = null;
            try {
                appInfo = pm.getApplicationInfo(p.packageName, 0);
            } catch (NameNotFoundException e) {
                e.printStackTrace();
            }

            String appName = pm.getApplicationLabel(appInfo).toString();
            Drawable appIcon = appInfo.loadIcon(getApplicationContext()
                    .getPackageManager());

        }
    } 
```

# python - 在 pygame 应用程序运行时弹出 Python 终端窗口

> ID：12121033
> 
> 赞同：2
> 
> 时间：2012-08-25T10:04:05.943
> 
> 标签：python, windows, pygame, windows-console

> **可能重复：**
> [如何在 Windows 上运行的 PyQt 应用程序中隐藏控制台窗口？](https://stackoverflow.com/questions/466203/how-can-i-hide-the-console-window-in-a-pyqt-app-running-on-windows)

当我在我的 pygame 应用程序 (.py) 上双击 Windows 时，所需的 pygame 窗口会打开，但总是伴随着它，会弹出一个空的终端窗口。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:13:48.090

将文件的文件扩展名从 更改`.py`为`.pyw`.

请参阅[**使用 Python 解释器**](http://docs.python.org/tutorial/interpreter.html#executable-python-scripts)：

> 2.2.2。可执行的 Python 脚本
> 
> Python 安装程序自动将`.py`文件与 python.exe 关联，以便双击 Python 文件将其作为脚本运行。扩展名也可以是`.pyw`，在这种情况下，通常出现的控制台窗口被抑制。

# mysql - 在mysql结果中搜索

> ID：12121034
> 
> 赞同：2
> 
> 时间：2012-08-25T10:04:13.143
> 
> 标签：mysql, sql

我确实对在 Mysql 中进行搜索有疑问或误解。

* * *

在我的表中，我有 2 个字段，第一个`ID`（int 8）和第二个`used`（int 1）。

该`used`字段只得到 0 或 1 像布尔值。

假设行数为 20001，

**about `ID`：我的最后一个 ID 是 20001，第一个 ID 是 1。**

**about `used`：只有我的第一行 ID = 1 为 1，其他为 0。**

现在，当我想获得一排时，我编写了这段代码。没关系。

```
 SELECT * 
 FROM  `table` 
 WHERE  `used` =0
 LIMIT 0 , 1 
```

我只想要一个 0 数量的行`used`。但我的问题是：我想，Mysql 搜索所有的 20000 行，所以给我一行。这会伤害我，因为我只想要一排数量为 0`used` 的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:20:32.000

这将返回第一个匹配项，并且在找到第一个匹配项时搜索将停止。

**1.**

```
SELECT TOP 1 *
FROM `table`
WHERE `used`=0
 OR NOT (EXISTS (SELECT NULL FROM `table` WHERE `used`=0))
ORDER BY ASCENDING; 
```

**2.**

```
SELECT *
FROM `table`
WHERE `used`=0
 OR NOT (EXISTS (SELECT NULL FROM `table` WHERE `used`=0))
ORDER BY ASCENDING LIMIT 1; 
```

两者都做同样的事情，运行你的测试，看看哪个执行得更快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:11:33.160

```
SELECT * FROM table_name WHERE used = "0"; 
```

将为您提供所有使用值为 0 的行，其中：

```
SELECT * FROM table_name WHERE used = "0" LIMIT 1; 
```

会给你一行，使用值为 0。

如果这不是你要找的，你能澄清你的问题吗？

如果您需要最后一条记录

```
SELECT * FROM table_name WHERE used = "0" ORDER BY id DESC LIMIT 1; 
```

**编辑：**

如果您担心查询的速度，我怀疑如果您通过命令行（或您喜欢的工具）启动 mysql 并运行提供给只有那么多记录的表的查询，您会得到一句话说明需要多长时间，如果它绝对没有，它可能会说（0.00 秒）。:)

如果您的表变得更复杂，请考虑学习对某些列使用 mysql 索引：http: [//dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/mysql-indexes.html)

**关于 MySQL 中的保留字：**

您的表格命名引起了我的注意，您应该考虑使用除`table`表格名称之外的其他名称，这样您在使用表格时就不需要在表格单词周围使用引号。（您也在`used`甚至不是保留字的单词周围使用它们。

MySQL(5.5) 中应避免使用的保留字列表：http: [//dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

# android - 从文件管理器添加文件

> ID：12121035
> 
> 赞同：0
> 
> 时间：2012-08-25T10:04:18.887
> 
> 标签：android, image, file, icons

我有文件管理器，用户可以借助它向应用程序添加文件。我得到所选文件的路径并将它们放入列表中。我想将带有标题的所选文件的图标放入应用程序。我想知道如何以最佳方式实现它 - 在 Image 类的帮助下或创建我自己的对象并将图标设置为 drom drawable ......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:58:36.583

我用常规的TextView解决了它。这是我的方法，其中循环遍历用户选择的文件数组并将图标和名称添加到 TextView：

```
public void addFiles()
 {

    LinearLayout layout = (LinearLayout) findViewById(R.id.filesList);

    if(FileManagerActivity.resFiles != null)
    {
         for (File file: FileManagerActivity.resFiles)
          {
            View line = new View(this);
                line.setLayoutParams(new LayoutParams(1, LayoutParams.MATCH_PARENT));
                line.setBackgroundColor(0xAA345556);
                informationView = new TextView(this);
                informationView.setTextColor(Color.BLACK);
                informationView.setTextSize(16);
                informationView.setCompoundDrawablesWithIntrinsicBounds(
                        0, R.drawable.file_icon, 0, 0);
                informationView.setText(file.getName().toString());
                layout.addView(informationView, 0);
                layout.addView(line, 1);

          }
      }

} 
```

# android - 如何为 Android Spinner 设置动画？

> ID：12121040
> 
> 赞同：0
> 
> 时间：2012-08-25T10:06:20.100
> 
> 标签：android, android-animation, android-spinner

我的应用程序是一个温度转换应用程序，因为我有两个微调器，一个将包含源指标列表，另一个将包含应用程序中的目标指标列表（显然从同一个数组适配器加载）我有一个交换按钮。交换按钮的功能是将源侧微调器指标更改为目标侧微调器指标，反之亦然。即，如果我在源微调器中选择了摄氏度，在目标微调器中选择了开尔文，并且如果我按下交换按钮，则微调器中的度量名称将被交换（相应文本框中的值将根据新的源和目标计算公制）。

示例代码：

```
 int srcposn = sourceSpinner.getSelectedItemPosition();
            int tgtposn = targetSpinner.getSelectedItemPosition();
            sourceSpinner.setSelection(tgtposn);
            targetSpinner.setSelection(srcposn); 
```

我的问题是，当我按下交换按钮时，交换正在发生，但没有适当的动画表示交换已经发生。当我将应用程序提供给我的朋友时，他们无法确定交换是否真的发生了。甚至我都没有注意到它:)。

您能否就如何使交换对用户更明显提出一些建议。抱歉，由于我是这个论坛的新手，所以无法发布图片。 [应用程序的图像抓取](https://docs.google.com/document/d/1svQHR2dZPnTHoYE37E88_ltd96k6eLbJbznnrfOaI2w/edit "截屏")

在此先感谢您的帮助。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T12:45:49.480

据我所知，在这种情况下不使用 Android 动画。为了告诉用户当他按下按钮时某些值发生了变化，我通常会弹出一个[Toast](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)，它既简单又有效。如果你不喜欢它的设计，你可以根据你的需要定制它。这一切都在我发送的链接（[Toast](http://developer.android.com/guide/topics/ui/notifiers/toasts.html)）上进行了解释。

只需在您的按钮中使用它`OnClickListener()`：

```
int srcposn = sourceSpinner.getSelectedItemPosition();
int tgtposn = targetSpinner.getSelectedItemPosition();
sourceSpinner.setSelection(tgtposn);
targetSpinner.setSelection(srcposn);

Toast toast = Toast.makeText(
                    HomeActivity.this, 
                    "Units Successfully Changed", 
                    Toast.LENGTH_SHORT);
toast.show(); 
```

编辑：

但是，如果您更喜欢将微调器高亮几秒钟之类的效果...我在网络上找不到针对此问题的任何好的帮助，因此我遵循了使用`ImageViews`. 动画`ImageViews`它使用一个`ImageSwitcher`并创建 2 个`ImageViews`等于，所以基本上这是同一件事。这个想法是创建两个新`Spinners`的，将它们与其他的顶部和左侧对齐，具有如下功能：

```
/**
 * Creates a new {@link Spinner} which overlays another
 * @param spinner {@link Spinner} to overlay
 * @return The new {@link Spinner}
 */
private Spinner createNewSpinner(Spinner spinner){
    LayoutParams spinnerParams = new LayoutParams(spinner.getWidth(), LayoutParams.WRAP_CONTENT);
    spinnerParams.addRule(RelativeLayout.ALIGN_TOP, spinner.getId());
    spinnerParams.addRule(RelativeLayout.ALIGN_LEFT, spinner.getId());

    Spinner overlaySpinner = new Spinner(HomeActivity.this);
    overlaySpinner.setLayoutParams(spinnerParams);

    return overlaySpinner;
} 
```

对于效果，我认为你可以创建这样的东西，但我不确定它是否 100% 有效，所以为了获得更多支持，请阅读[动画](http://developer.android.com/guide/topics/resources/animation-resource.html)：

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android">
<alpha
    android:background="@drawable/bg_orange"
    android:interpolator="@android:anim/decelerate_interpolator"
    android:fromAlpha="1.0" android:toAlpha="0.0"
    android:duration="400"
/> 
```

要加载动画，您可以使用此代码，但因为您想同时触发 2 中的效果，`Spinners`我不确定您是否可以按照这个想法做所有事情。这就是为什么我之前没有告诉你这件事。

```
Animation animation = AnimationUtils.loadAnimation(this, R.anim.disapear);
sourceSpinner.startAnimation(animation); 
```

**希望能帮助到你！**

# c++ - std::vector 与 std::array 性能

> ID：12121043
> 
> 赞同：5
> 
> 时间：2012-08-25T10:06:44.583
> 
> 标签：c++, performance, c++11, chrono

我正在查看新的 chrono 库 (C++11) 并尝试使用它。我编写了以下两个程序：

**向量.cpp**

```
#include <iostream>
#include <vector>
#include <chrono>

int main()
{
    std::vector<double> vector(1000000, 0.);

    auto start = std::chrono::high_resolution_clock::now();
    for(int i(0); i < vector.size(); i++)
    {
        vector[i] += 1.;
    }
    auto end = std::chrono::high_resolution_clock::now();

    std::cout << "Elapsed time: " << std::chrono::duration_cast<std::chrono::milliseconds>(end-start).count() << " milliseconds" << std::endl;

    return 0;
} 
```

**数组.cpp**

```
#include <iostream>
#include <array>
#include <algorithm>
#include <chrono>

int main()
{
    std::array<double, 1000000> array;

    std::fill(array.begin(), array.end(), 0.);

    auto start = std::chrono::high_resolution_clock::now();
    for(int i(0); i < array.size(); i++)
    {
        array[i] += 1.;
    }
    auto end = std::chrono::high_resolution_clock::now();

    std::cout << "Elapsed time: " << std::chrono::duration_cast<std::chrono::milliseconds>(end-start).count() << " milliseconds" << std::endl;

    return 0;
} 
```

我为数组程序获得了 9 毫秒，为向量程序获得了 12 毫秒。std::vector 似乎比 std::array 慢 33%。我做得对吗？为什么会有这种差异？

Ps：我使用的是 GCC 4.7，Mac OS X 10.7。

```
g++-mp-4.7 -std=c++11 vector.cpp -o vector
g++-mp-4.7 -std=c++11 array.cpp -o array 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T10:38:38.587

我将您的代码更改为：

```
std::array<double, 1000000> array;

double total = 0;
std::fill(array.begin(), array.end(), 0.);

for (unsigned j = 0; j < 1000; ++j)
{
    auto start = std::chrono::high_resolution_clock::now();

    for (unsigned i = 0; i < array.size(); i++)
    {
        array[i] += 1.;
    }

    auto end = std::chrono::high_resolution_clock::now();
    total = std::chrono::duration_cast<std::chrono::milliseconds>(end - start).count();
}

std::cout << total << " for Array." << std::endl;

std::vector<double> vector(1000000, 0.);
total = 0;

for (unsigned j = 0; j < 1000; ++j)
{
    auto start = std::chrono::high_resolution_clock::now();

    for (unsigned i = 0; i < vector.size(); i++)
    {
        vector[i] += 1.;
    }

    auto end = std::chrono::high_resolution_clock::now();
    total = std::chrono::duration_cast<std::chrono::milliseconds>(end - start).count();
}

std::cout << total << " for Vector." << std::endl; 
```

我的结果使用`-O3`：

```
8123 for Array.
8117 for Vector. 
```

在我看来，两者都同样快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T10:38:59.950

如果不启用优化，这些数字毫无意义。对 size() 的重复调用很可能会对您的情况产生影响。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T10:15:51.730

A`std::array`在编译时具有已知的大小，因此很可能在堆栈上分配内存。

A`std::vector`使用`std::allocator`（它可能使用`new 在运行时从空闲存储（又名堆）分配内存）。

我会说 30% 对于堆与堆栈分配是正常的。

* * *

**编辑：**[`std::vector`](http://liveworkspace.org/code/d7c8557af27c0dfac870e89520161e44)在 liveworkspace.org（和）上运行几次（我知道这不是最科学的测量[`std::array`](http://liveworkspace.org/code/098dc4d43c4308da7c23731417c314c9)），我得到 8 对 10 毫秒。由于所有分配确实超出了测量范围，我会天真地得出结论，访问堆比访问堆栈内存要慢。如果这通常是正确的，我不会感到惊讶，因为在堆的情况下存在额外的间接性。

# sitecore - 循环浏览 Sitecore 中的项目和属性以搜索对媒体项目的引用？

> ID：12121044
> 
> 赞同：0
> 
> 时间：2012-08-25T10:06:48.530
> 
> 标签：sitecore, sitecore-media-library

我需要遍历 Sitecore 解决方案中的一些内容（递归地），并在项目的所有字段中查找对媒体项目的引用。这是一个 Sitecore 6.5 解决方案，因此开箱即用它使用 guid 来引用媒体项目。但这是一个已迁移到 6.5 的解决方案，因此所有媒体项引用都不是通过 guid 而是直接指向媒体库的 url。

我需要更改它，因此所有链接都使用 guid 进行引用。关于如何最好地做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:42:17.753

我将遵循 Alex Shyba 在他的发布相关媒体项目文章中描述的技术： [http ://sitecoreblog.alexshyba.com/2007/10/publish-related-media-items.html?m=1](http://sitecoreblog.alexshyba.com/2007/10/publish-related-media-items.html?m=1)

为了获取所有链接项目的集合，他使用：

```
yourItem.Links.GetValidLinks(); 
```

和...

```
Item itm = link.GetTargetItem(); 
```

最后，您可以使用以下方法测试链接以查看它们是否是媒体项目：

```
itm.Paths.IsMediaItem 
```

  抱歉格式不好，我是用手机发帖的：）

# objective-c - didSelectRowAtIndexpath 工作不正常

> ID：12121045
> 
> 赞同：1
> 
> 时间：2012-08-25T10:06:55.917
> 
> 标签：objective-c, uitableview, ios4, didselectrowatindexpath

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath{
[super tableView:tableView didSelectRowAtIndexPath:indexPath];
[tableView deselectRowAtIndexPath:indexPath animated:NO];
NSLog(@"selezione");
SitiViewController *sitoSelezionato = [[SitiViewController alloc] init];
sitoSelezionato.title = [[self.objects objectAtIndex:indexPath.row] objectForKey:@"Title"];
sitoSelezionato.url = [NSURL URLWithString:[[self.objects objectAtIndex:indexPath.row] objectForKey:@"URL"]];

[self.navigationController pushViewController:sitoSelezionato
                                     animated:YES]; } 
```

我正在使用 UITableViewController 的一个子类，我需要按下单元格并推送一个新的视图控制器；我尝试了我之前复制和粘贴的代码，但有些东西不能正常工作......只有当我选择另一行时，我才能推送 newViewcontroller.. 例如，如果我单击第一行，我可以在单击时推送新的视图控制器在第二行...我已经设置了委托和数据源...我无法处理这个问题..有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:46:08.910

你误认为`didSelectRowAtIndexPath`.`didDeselectRowAtIndexPath`

# sql-server - 为插入/删除优化 SQL Server 集群键

> ID：12121048
> 
> 赞同：2
> 
> 时间：2012-08-25T10:07:14.927
> 
> 标签：sql-server, performance

我有一些定期交付新数据的报告活动，我目前的策略是删除旧数据然后插入新数据，我使用范围查询在一段时间内批量移动报告数据。

我的插入性能应该很好，因为我在这里所做的只是追加一个不断增加的数字，我使用的是`datetime2(7)`数据类型并`sysdatetime()`作为默认值。

但是，我担心碎片问题。

旧数据将首先被写入，但最终数据将被删除，新数据（替换此数据）将被附加到末尾。

我的数据在更新时应该有效地滚动到未来。

我完全排除所有旧数据最终被删除。

我仍然需要担心碎片化还是会这样做？我怀疑这会有很好的性能，但我仍然有点担心 SQL Server 将无法回收已删除的空间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:18:58.410

我了解您将按聚集索引顺序插入和删除。这个设计非常合理。一段时间后，您可能仍会在插入时出现碎片，因为插入将重用已删除的页面。很可能存在异常，例如未释放单个页面或用于插入的范围内存在其他杂项页面。从这个意义上说，碎片化会导致更多的碎片化作为一个随机过程。

保证没有碎片的唯一方法是粗略地对数据进行分区并将每个分区放入一个新的文件组中。这确保了插入总是在文件的末尾（没有其他地方可以放置它们）。此外，删除最终会导致整个分区变得符合删除条件。

你有非聚集索引吗？他们也可能会变得支离破碎。

# c# - 如何更改日期时间格式

> ID：12121051
> 
> 赞同：0
> 
> 时间：2012-08-25T10:07:29.340
> 
> 标签：c#, asp.net

```
List<DateTime> datetimerange = new List<DateTime>();

DateTime StartDate = Convert.ToDateTime(txtDate.Text);
DateTime EndDate = Convert.ToDateTime(TextBox1.Text);
foreach (DateTime day in EachDay(StartDate, EndDate))
{
     datetimerange.Add(day.Date);
     Session["SelectedDatess"] = datetimerange;
} 
```

当我将它显示到列表框时，日期看起来像`8/28/2012 12:00:00`，而我只想显示`8/28/2012`。

如何将日期的格式更改为`MM/dd/yyyy`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:10:39.293

阅读[`DateTime.ToString()`模式](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)。[MSDN](http://msdn.microsoft.com/en-us/library/zdtaw1bw.aspx)也有详细的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:30:41.027

```
Datetime dt=new DateTime();
string date1=dt.toString("dd-MM-yyyy"); 
```

或者

```
string _fromDt = DateTime.Parse(txtDateFrom.Text).ToString("dd-MM-yyyy"); 
```

或者

string todayDt = DateTime.Now.ToString("dd-MM-yyyy");

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:20:35.067

您可以通过以下代码：

```
string input = "6/15/2009 1:45:30 PM";
var dt = DateTime.Parse(input);
string output = dt.ToString(@"MM/dd/yyyy h:mm:ss tt",     
                               CultureInfo.CreateSpecificCulture("en-US")); 
```

或者

```
string input = "6/15/2009 1:45:30 PM";
var dt = DateTime.Parse(input);
string output = dt.ToString(@"MM/dd/yyyy",     
                               CultureInfo.CreateSpecificCulture("en-US")); 
```

# php - 域名注册API集成在php中

> ID：12121053
> 
> 赞同：-1
> 
> 时间：2012-08-25T10:07:50.410
> 
> 标签：php

我想将一个 API 与我的一个网站集成，这是我的前辈给的任务。API 是关于搜索已经存在或不存在的域名。请在这个主题上帮助我，请给我一个我可以参考的例子。我的网站是 PHP 的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:12:04.313

**[编辑 2]**正如@Poe 在他的评论中提到的，[gethostbyname](http://www.php.net/manual/en/function.gethostbyname.php)可能是一个更好的解决方案，因为它适用于任何顶级域，因为它执行 DNS 查询而不是 whois 查询，而且实现起来也更简单，可能更快：

```
<?php
$ip = gethostbyname('example.com');
if (strstr($ip,"example.com")){
    echo "No match for domain example.com<br />\n";
} else {
    echo "Domain found. Query output: <br />\n".$ip;
}
?> 
```

无论如何，可以注册一个域，但它不链接到任何计算机（例如，虽然它非常罕见，但您可能会得到 www.example.com 的解析，但不是 example.com）

**[编辑]**我之前没有发布此内容，因为我在连接到端口 43 上的 whois.internic.net 以执行 whois 查询时遇到了一些问题（以为他们已经永久关闭了该服务）。无论如何，这是我刚刚编写的基于[fsockopen](http://php.net/manual/es/function.fsockopen.php)的解决方案，我认为它比我在使用他们的 CGI Web 脚本之前提供的解决方案要好得多，也更简单。希望它有所帮助（用法：myqueryscript.php?domain=domainiwanttocheck.com）：

```
<?php
$fp = fsockopen("199.7.58.74", 43, $errno, $errstr, 30);
if (!$fp) {
    echo "$errstr ($errno)<br />\n";
} else {
    $query = $_GET['domain']."\r\n";
    $answer= '';
    fwrite($fp, $query);
    while (!feof($fp)) {
        $answer .= fgets($fp, 128)."<br />";
    }
    fclose($fp);
    if (strstr($answer,"No match for")){
        echo "No match for domain ".$_GET['domain']."<br />\n";
    } else {
        echo "Domain found. Query output: <br />\n".$answer;
    }
}
?> 
```

来自 internic 网站，这是实现 whois 查询的 html 代码：

```
<form method="get" action="http://reports.internic.net/cgi/whois" name="my_form">
            <input type="text" size="30" name="whois_nic" maxlength="80">
            <br>
            <input type="radio" name="type" value="domain" checked>
            Domain<font size="-1"> (ex. internic.net)
            <br>
            <input type="radio" name="type" value="registrar">
            Registrar<font size="-1"> (ex. ABC Registrar, Inc.) 
            <br>
            <input type="radio" name="type" value="nameserver">
            Nameserver (ex. NS.EXAMPLE.COM or 192.16.0.192)<br>
            <br>
            <input type="submit" value="Submit">
  </form> 
```

这意味着您可以发送这样的 whois 查询：[http ://reports.internic.net/cgi/whois?whois_nic=domainiwanttocheck.com&type=domain](http://reports.internic.net/cgi/whois?whois_nic=domainiwanttocheck.com&type=domain)

您可以从脚本发送查询并将响应存储在 DOMDocument 对象中。查看：[http ://www.php.net/manual/en/domdocument.loadhtml.php](http://www.php.net/manual/en/domdocument.loadhtml.php)

如果您使用此方法查找域并且该域不存在，您将获得 string `No match for domain`。[使用strpos](http://www.php.net/manual/es/function.strpos.php)在响应中查找此内容

如果域存在，您可以过滤响应以包含有关注册商等的信息。它将是`<pre>`响应的 html 标记的内容：

```
<pre>

Whois Server Version 2.0

Domain names in the .com and .net domains can now be registered
with many different competing registrars. Go to http://www.internic.net
for detailed information.

   Domain Name: GOOGLE.COM
   Registrar: MARKMONITOR INC.
   Whois Server: whois.markmonitor.com
   Referral URL: http://www.markmonitor.com
   Name Server: NS1.GOOGLE.COM
   Name Server: NS2.GOOGLE.COM
   Name Server: NS3.GOOGLE.COM
   Name Server: NS4.GOOGLE.COM
   Status: clientDeleteProhibited
   Status: clientTransferProhibited
   Status: clientUpdateProhibited
   Status: serverDeleteProhibited
   Status: serverTransferProhibited
   Status: serverUpdateProhibited
   Updated Date: 20-jul-2011
   Creation Date: 15-sep-1997
   Expiration Date: 14-sep-2020

>>> Last update of whois database: Sat, 25 Aug 2012 10:15:09 UTC <<<

NOTICE: The expiration date displayed in this record is the date the 
registrar's sponsorship of the domain name registration in the registry is 
currently set to expire. This date does not necessarily reflect the expiration 
date of the domain name registrant's agreement with the sponsoring 
registrar.  Users may consult the sponsoring registrar's Whois database to 
view the registrar's reported date of expiration for this registration.

TERMS OF USE: You are not authorized to access or query our Whois 
database through the use of electronic processes that are high-volume and 
automated except as reasonably necessary to register domain names or 
modify existing registrations; the Data in VeriSign Global Registry 
Services' ("VeriSign") Whois database is provided by VeriSign for 
information purposes only, and to assist persons in obtaining information 
about or related to a domain name registration record. VeriSign does not 
guarantee its accuracy. By submitting a Whois query, you agree to abide 
by the following terms of use: You agree that you may use this Data only 
for lawful purposes and that under no circumstances will you use this Data 
to: (1) allow, enable, or otherwise support the transmission of mass 
unsolicited, commercial advertising or solicitations via e-mail, telephone, 
or facsimile; or (2) enable high volume, automated, electronic processes 
that apply to VeriSign (or its computer systems). The compilation, 
repackaging, dissemination or other use of this Data is expressly 
prohibited without the prior written consent of VeriSign. You agree not to 
use electronic processes that are automated and high-volume to access or 
query the Whois database except as reasonably necessary to register 
domain names or modify existing registrations. VeriSign reserves the right 
to restrict your access to the Whois database in its sole discretion to ensure 
operational stability.  VeriSign may restrict or terminate your access to the 
Whois database for failure to abide by these terms of use. VeriSign 
reserves the right to modify these terms at any time. 

The Registry database contains ONLY .COM, .NET, .EDU domains and
Registrars.
        </pre> 
```

另外，请查看以下相关问题：[谁提供 WHOIS API？](https://stackoverflow.com/questions/36817/who-provides-a-whois-api)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-10-30T09:41:00.580

```
<?php

if(isset($_GET['domain'])){
    $domain = $_GET['domain'];
} else {
    $domain = "";
}
$api_key = "api_key";
//domain also you can use this api http://api.neoistone.com/domain-check/?apiKey=&domainName=google.com
//if need api key contact us https://www.neoistone.com/contact-us/
//domain also your user the api https://domain-availability.whoisxmlapi.com/api/v1/?apiKey=&domainName=google.com
//if need api key contact us browser https://domain-availability.whoisxmlapi.com

$api = "https://domain-availability.whoisxmlapi.com/api/v1";
        $api .= '?apiKey='.urlencode($api_key);
        $api .= "&domainName=".urlencode($domain);
        $response = array();
        $curl = curl_init();
        curl_setopt_array($curl, array(
        CURLOPT_URL => $api,CURLOPT_RETURNTRANSFER => true,CURLOPT_ENCODING => "",
        CURLOPT_MAXREDIRS => 10,CURLOPT_TIMEOUT => 30,CURLOPT_HTTP_VERSION => CURL_HTTP_VERSION_1_1,
        CURLOPT_CUSTOMREQUEST => "GET",CURLOPT_HTTPHEADER => array("cache-control: no-cache","postman-token: 22890b81-68a3-c75c-7dc5-1d1e6e9d1cf2"),));
        $ch_ap = json_decode(curl_exec($curl),TRUE);
        if (isset($ch_ap['messages'])) {
            $response['status'] = "error";
            $response['message'] = $ch_ap['messages'];
            $response['code'] = $ch_ap['code'];
        } else {
           $curl_response = $ch_ap['DomainInfo'];
           if ($curl_response['domainAvailability'] == "UNAVAILABLE") {
               $response['status'] = "sussfuly";
               $response['meassage'] = 'Domain is '.$domain.' unavailable ';
               $response['code'] = 200;
           } elseif ($curl_response['domainAvailability'] == "AVAILABLE") {
               $response['status'] = "sussfuly";
               $response['meassage'] = 'Domain is '.$domain.' available ';
               $response['code'] = 200;
           } else {
              $response = $curl_response;
           }
        }
        print_r($response);
        curl_close($curl);
?> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-08-22T10:31:53.993

获取域名和tld

```
<?php
$host = 'https://compute-1.hyd.in.securedatacenter.host';
preg_match("/[^\.\/]+\.[^\.\/]+$/", $host, $matches);
$data = explode('.',$matches['0']);

//print_r($data);
echo 'Your domain name is :- '.$data['0'].'<br>';
echo 'Your tld is :- '.$data['1'];
?> 
```

[响应预览](https://paiza.io/projects/4C-FXmLe_Gw5iv4hVeLcsg)

# javascript - 在 Wordpress 网站中单击图像时播放随机声音？

> ID：12121055
> 
> 赞同：0
> 
> 时间：2012-08-25T10:07:52.867
> 
> 标签：javascript, html, wordpress, audio, random

好的，所以我已经研究了几个小时，此时我可能只是让自己更加困惑。;)

我在这里阅读了这个问题的答案：[如何在点击网页时播放随机声音？](https://stackoverflow.com/questions/11039984/how-can-i-play-a-random-sound-on-click-in-a-web-page/11040096#11040096)

我之前还阅读了该作者最初引用的源代码。

我在我的 Wordpress 网站的 header.php 文件的标签之间添加了这段代码：

```
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script>
function playSounds() {
  var sounds = new Array(
    "http://www.faenathara.com/laughs/Natharalaugh1.wav",
    "http://www.faenathara.com/laughs/Natharalaugh2.wav",
    "http://www.faenathara.com/laughs/Natharalaugh3.wav",
    "http://www.faenathara.com/laughs/Natharalaugh4.wav"
   );

$("#element").html("<embed src=\""+sounds[Math.floor(Math.random()*(sounds.length+1))]+"\" hidden=\"true\" autostart=\"true\" />");
}
</script> 
```

然后我将它添加到我的身体标签中：

```
onload="javascript:playSound()" 
```

这在我的身体标签之间：

```
<div id="element">
<button onclick="playSound()">LAUGH</button>
</div> 
```

我知道我错过了一些非常明显的东西，但我想我已经看这个太久了，看不到它是什么。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:17:56.850

如果您要在网页上使用声音 - 那么我真的建议您使用[Soundmanager](http://www.schillmania.com/projects/soundmanager2/)库。它肯定会消除在页面上使用声音的所有痛苦。

然后在按钮单击时添加您的声音将非常容易！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:30:56.693

**编辑：**我已经修复了函数调用，并从中删除了 + 1，因为它导致有时你得到索引 4，它在你的数组中不存在并且导致 div 有一个`undefined` `src`属性。我还将按钮放在 div 之外，因为它被替换为`embed`标签。请在您的代码中复制此示例并包含相同`DOCTYPE`内容并查看它是否有效：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
    <script>
        function playSounds() {
            var sounds = new Array(
    "http://www.faenathara.com/laughs/Natharalaugh1.wav",
    "http://www.faenathara.com/laughs/Natharalaugh2.wav",
    "http://www.faenathara.com/laughs/Natharalaugh3.wav",
    "http://www.faenathara.com/laughs/Natharalaugh4.wav"
   );
            var index = Math.floor(Math.random() * (sounds.length));
            $("#element").html("<embed src=\"" + sounds[index] + "\" hidden=\"true\" autostart=\"true\" />");
        }
    </script>
    <title></title>
</head>
<body onload="javascript:playSounds()">
<button onclick="playSounds()">
            LAUGH</button>
    <div id="element">

    </div>
</body>
</html> 
```

这在 Chrome、Firefox 和 IE9 中对我来说完全没问题。

汉莱特。

# macos - 无法在 Mac 上的 LightSwitch 字段中键入字符

> ID：12121056
> 
> 赞同：0
> 
> 时间：2012-08-25T10:07:57.553
> 
> 标签：macos, silverlight, google-chrome, visual-studio-lightswitch

谁能帮我理解为什么在 Mac 上的 Chrome 中，我无法在 LightSwitch 字段中输入字符。我可以删除字符，或从下拉列表中选择，但无法输入新字符。我已经尝试在 Mac 上重新安装 Silverlight。

从 Windows 客户端连接到服务器时没有问题。

使用 Visual Studio 2012、Mac OS X V.10.6.8 和 Silverlight 5.1.10411.0

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T00:30:58.090

我不知道 Mac 上 Chrome 的具体问题，但我知道 PC 上的 Chrome 存在问题。不过，我不记得听说过您的特定问题，只是连接到数据。

我认为 Chrome 问题已在 VS 2012 的 RTM 中得到修复，但我可能错了。也许这篇文章可能会有所帮助？

[解决 Lightswitch 2012 Rc 中的 Chrome 数据加载错误](http://blogs.msdn.com/b/mattev/archive/2012/06/25/working-around-the-chrome-data-loading-bug-in-lightswitch-2012-rc.aspx)

[如果没有，您可以重现问题，您可能需要在Connect 网站](https://connect.microsoft.com/site1231/feedback/CreateFeedbackForm.aspx?FeedbackFormConfigurationID=4960&FeedbackType=1)上提交错误。

# r - 将文本添加到绘图轴而不删除 r 中现有的轴标签

> ID：12121060
> 
> 赞同：3
> 
> 时间：2012-08-25T10:08:32.400
> 
> 标签：r, plot, labels, axes

我有以下情节

```
xleft<-c(1,2,3)
xright<-c(2,3,4)
ybottom<-c(1,2,3)
ytop<-c(2,3,4)

plot(c(1,4),c(1,4),type="n",main="title",xlab="site.x",ylab="ylab")
rect(xleft,ybottom,xright,ytop,col=c("blue","red","green")) 
```

我想使用这些位置和标签在两个轴上添加相当长的物种名称

```
#Label position along  axes
x.label.position<-(xleft+xright)/2
y.label.position<-(ybottom+ytop)/2

#Labels
x.label<-c("Long species Name1","Long species Name2","Long species Name3")
x.label<-c("Long species Name4","Long species Name5","Long species Name5") 
```

我想保留数字轴和轴标题。我还想添加一个图例。所以最终产品看起来像这样

![在此处输入图像描述](../Images/dad9c9699af34f6c98434fdeb086052b.png)

无需完全使用清除轴的最佳方法是什么

```
par(xaxt = "n", yaxt = "n") 
```

并添加文字？谢谢你的建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T11:21:13.647

我认为这样做的方法和 R FAQ 7.27“如何创建旋转轴标签？” 同意，是在边距中留出空间，然后添加长标签文本。

```
 mx=12
 my=12
 par(mar = c(mx,my, 4, 2) + 0.1)
 plot(c(1,4),c(1,4),type="n",main="title",xlab="site.x",ylab="ylab")
 rect(xleft,ybottom,xright,ytop,col=c("blue","red","green"))
 text(par()$usr[1]-0.5,y.label.position,y.label,xpd=TRUE,adj=1)
 text(y=par()$usr[3]-0.5,x=x.label.position,x.label,xpd=TRUE,adj=1,srt=90) 
```

您需要调整字符串的长度，并且可能还需要调整文本中的负偏移量以防止它与标签发生冲突`mx`。`my`还要注意使用`xpd=TRUE`来停止将绘图剪辑到图形区域。这也是使图例到位的关键：

```
 par(xpd=TRUE)
 legend(locator(1),legend=c("Species A","Species B","Species C"),
                             fill=c("blue", "red", "green")) 
```

然后单击您想要图例的位置 - 或替换`locator(1)`为`list(x=-0.7,y=0.6)`

`ggplot`您可能会使用该软件包找到一种更简单的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T11:55:55.597

@Spacedman 的回答很好，但我只想提供一个更新。他的代码（至少对我而言）将轴标签绘制在刻度标签上。要更改标签的位置，您需要查看`par("mfg")`. 我认为以下代码或多或少可以满足您的需求：

```
par(mai=c(2.5, 2.25, 0.82, 0.42), mgp=c(9, 1, 0))
plot(c(1,4), c(1,4), xaxp=c(1,4,3), yaxp=c(1,4,3), type="n", 
  main="title", xlab="site.x", ylab="ylab")
rect(xleft, ybottom, xright, ytop, col=c("blue","red","green"))
axis(1, at=x.label.position, labels=x.label, las=2)
axis(2, at=y.label.position, labels=y.label, las=2)
par(xpd=TRUE)
legend(x=0.25, y=0.75, 
  legend=c("Text", "Text", "Text"),
  fill=c("blue", "red", "green"),
  title="Legend") 
```

产生以下情节：

![在此处输入图像描述](../Images/5a49990f5e9884369b6dfae2608808e7.png)

正如@Spacedman 所建议的那样，对边距和轴的许多更改在包中都更加直接`ggplot2`（一旦你习惯了......！）。

# iphone - 如何观察单元配件类型 UITableViewCellAccessoryCheckmark 是否被选中？

> ID：12121061
> 
> 赞同：1
> 
> 时间：2012-08-25T10:08:37.287
> 
> 标签：iphone, objective-c, ios, uitableview

如何观察`UITableViewCellAccessoryCheckmark`是否检查了电池附件类型？

在我的应用程序中，我添加`UITableView`了一个`UIAlertView`. 我也用过

```
cell.accessoryType = UITableViewCellAccessoryCheckmark; 
```

在我的 tableView 中，我有 9 行。当用户点击第一行时，所有行都会被选中，除了第二行。用户可以根据需要检查任何行/行。当用户点击第二行时，只检查第二行。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:39:29.053

由于项目的数量非常少，您可以使用单个整数和位掩码对选中/未选中状态进行建模。使用数字的低九位表示选中/未选中状态：

```
// Add an instance variable to your view controller
// Initialize to 0 in the designated initializer
NSUInteger checkedFlags;

- (UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *res = ... // Dequeue the cell and so on

    res.accessoryType = (checkedFlags & (1 << indexPath.row))
    ?    UITableViewCellAccessoryCheckmark
    :    UITableViewCellAccessoryNone;

    ... // The rest of the method
} 
```

以下是您选中/取消选中/切换单个行的方法：在`tableView:willSelectRowAtIndexPath:`您的委托中，执行以下操作之一：

```
checkedFlags |= (1 << indexPath.row); // Check
checkedFlags &= ~(1 << indexPath.row); // Uncheck
checkedFlags ^= (1 << indexPath.row); // Toggle 
```

如果您想一次检查/取消选中多行，请使用一个数字进行掩码，该数字由对应于二进制形式的正在检查/取消检查的行的位组成。例如，设置了位 2..8 的数字是`0x01FC0`。

```
checkedFlags |= 0x1FC0; // Check rows #3 through #9 
```

`reloadData`操作`checkedFlags`变量后不要忘记调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:44:04.937

虽然@dasblinkenlight 的答案肯定更优雅，但对您来说可能太高级了。

本质是跟踪哪些单元格被选中，哪些未被选中。每当发生变化时，重新加载表格视图以更新复选标记。

您需要创建自己的变量来跟踪它。位图非常经济且优雅，但可能难以理解并且无法扩展到大量行。或者，您可以使用数组。

```
NSMutableArray *checkedArray = [NSMutableArray arrayWithObjects:
                   [NSNumber numberWithBool:YES],
                   [NSNumber numberWithBool:NO],
                   [NSNumber numberWithBool:NO],
                   [NSNumber numberWithBool:NO],
                   [NSNumber numberWithBool:NO],
                   [NSNumber numberWithBool:NO],
                   [NSNumber numberWithBool:NO],
                   [NSNumber numberWithBool:NO],
                   [NSNumber numberWithBool:NO],
                   nil]; 
```

要更改给定索引路径的行：

```
[checkedArray replaceObjectAtIndex:indexPath.row 
                        withObject:[NSNumber numberWithBool:YES]]; //add

[checkedArray replaceObjectAtIndex:indexPath.row 
                        withObject:[NSNumber numberWithBool:NO]]; //remove 
```

并`cellForRowAtIndexPath`确保您明确设置附件：

```
if ([[checkedArray objectAtIndex:indexPath.row] boolValue]) {
    cell.accessoryType = UITableViewCellAccessoryTypeCheckmark;
} 
else {
    cell.accessoryType = UITableViewCellAccessoryTypeNone;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:04:37.220

```
if ([[tableView cellForRowAtIndexPath:indexPath ] accessoryType] == UITableViewCellAccessoryCheckmark){

}
else{ 

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-26T22:15:35.423

我知道这已经得到了回答，但是我很幸运地维护了一个 NSMutableIndexSet 实例，并为已检查/未检查的行添加/删除了索引。

关键方法：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    NSInteger index = indexPath.row;
    cell.accessoryType = ([self.selectedRowsIndexSet containsIndex:index]) ? UITableViewCellAccessoryCheckmark : UITableViewCellAccessoryNone;
    cell.textLabel.text = [NSString stringWithFormat:@"Row %d",index];

    return cell;
} 
```

这是相当直截了当的 - 检查是否选择了索引并相应地设置附件。

对于多选（即可以选择任何调用）的实现，`tableView:didSelectRowAtIndexPath:`如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSInteger index = indexPath.row;
    if ([self.selectedRowsIndexSet containsIndex:index])
        [self.selectedRowsIndexSet removeIndex:index];
    else
        [self.selectedRowsIndexSet addIndex:index];

    [tableView reloadRowsAtIndexPaths:@[ indexPath ] withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

只需添加索引，重新加载表。对于单个选择，它也很快

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSInteger oldIndex = [self.selectedRowsIndexSet firstIndex];
    NSInteger newIndex = indexPath.row;
    [self.selectedRowsIndexSet removeIndex:oldIndex];
    [self.selectedRowsIndexSet addIndex:newIndex];
    [tableView reloadRowsAtIndexPaths:@[ indexPath, [NSIndexPath indexPathForRow:oldIndex inSection:0] ]
                     withRowAnimation:UITableViewRowAnimationAutomatic];
} 
```

当然可以通过更多部分变得更复杂，某些部分中的选择是否依赖于其他部分中的选择，等等。我一直在为前者使用索引集的每节数组，然后为后者使用涉及底层数据模型的各种复杂逻辑。但是将基本的表视图交互保持在仅查询索引集的级别有助于使这些方法非常简短和可读。

# actionscript-3 - 如何在 As3 中使用 ByteArray 方法解压 LZMA 压缩文件？

> ID：12121062
> 
> 赞同：1
> 
> 时间：2012-08-25T10:09:05.923
> 
> 标签：actionscript-3, bytearray, compression, lzma

这是我用来压缩/解压缩文件的代码：

```
package {
import flash.display.Sprite;
import flash.events.Event;
import flash.net.FileFilter;
import flash.net.FileReference;
import flash.utils.ByteArray;

public class Compressor extends Sprite
{
    private var ref:FileReference;

    public function Compressor()
    {
        ref = new FileReference();
        ref.addEventListener(Event.SELECT, load);
        ref.browse([new FileFilter("SWF Files", "*.swf")]);
    }

    private function load(e:Event):void
    {
        ref.addEventListener(Event.COMPLETE, processSWF);
        ref.load();
    }

    private function processSWF(e:Event):void
    {
        var swf:ByteArray;
        switch(ref.data.readMultiByte(3, "us-ascii"))
        {
            case "CWS":
                swf = decompress(ref.data);
                break;
            case "FWS":
                swf = compress(ref.data);
                break;
            default:
                throw Error("Not SWF...");
                break;
        }

        new FileReference().save(swf);
    }

    private function compress(data:ByteArray):ByteArray
    {
        var header:ByteArray = new ByteArray();
        var decompressed:ByteArray = new ByteArray();
        var compressed:ByteArray = new ByteArray();

        header.writeBytes(data, 3, 5); //read the header, excluding the signature
        decompressed.writeBytes(data, 8); //read the rest

        decompressed.compress();

        compressed.writeMultiByte("CWS", "us-ascii"); //mark as compressed
        compressed.writeBytes(header);
        compressed.writeBytes(decompressed);

        return compressed;
    }

    private function decompress(data:ByteArray):ByteArray
    {
        var header:ByteArray = new ByteArray();
        var compressed:ByteArray = new ByteArray();
        var decompressed:ByteArray = new ByteArray();

        header.writeBytes(data, 3, 5); //read the uncompressed header, excluding the signature
        compressed.writeBytes(data, 8); //read the rest, compressed

        compressed.uncompress();

        decompressed.writeMultiByte("FWS", "us-ascii"); //mark as uncompressed
        decompressed.writeBytes(header); //write the header back
        decompressed.writeBytes(compressed); //write the now uncompressed content

        return decompressed;
    }

}
} 
```

我的问题：此方法不解压缩 LZMA 压缩文件 :(

谁能告诉我如何重构上述代码以实现 LZMA 解压缩以及上述压缩代码是否足以用于 LZMA 压缩？如果不是，请举个例子。

编辑：经过长时间的搜索，我得到了[这个](http://helpx.adobe.com/flash-player/kb/exception-thrown-you-decompress-lzma-compressed.html) ，但我不太明白其中的示例代码:(有人帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:06:48.917

找到了一种解决方法，Flash 只有`DEFLATE`和`ZLIB`压缩算法，所以我不得不等待`LZMA`可能发生也可能不会发生的更新，或者创建我自己的实用程序，所以我得到了 Python，经过几个小时的努力想弄清楚如何使用它，我终于可以得到我想要的了。

参考地点：

1.  [解压 LZMA 格式 swf 文件的 python 代码](http://flexamphetamine.blogspot.in/2011/12/recompress-your-flash-11-swfs-with-lzma.html)
2.  [pylzma 源文件](http://www.joachim-bauch.de/projects/pylzma/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-30T02:07:26.563

我只是想补充一下您编辑中提供[的链接](http://helpx.adobe.com/flash-player/kb/exception-thrown-you-decompress-lzma-compressed.html)，以防有人偶然发现它并像我一样对格式感到困惑，它也有一些奇怪的事情发生，两次写入几个字节，所以这是我的重它的修改版本（文件部分需要 AIR）。例如，我放弃了按位运算符，转而使用`ByteArray`读/写函数。

注意：至少现在AS3是`ByteArray.decompress()`支持LZMA解​​压的，所以我在用那个，但是它不直接支持SWF LZMA格式，只有LZMA，所以还有点修修补补，还要注意这段代码大概可以有所改进。

```
import flash.filesystem.File;
import flash.filesystem.FileStream;
import flash.filesystem.FileMode;
import flash.utils.ByteArray; 

function decompressLZMA(idata:ByteArray){
    idata.endian = "littleEndian"
    var signature:ByteArray = new ByteArray;
    //I 0-3 = signature + version
    idata.readBytes(signature, 0, 3)
    var version:uint = idata.readUnsignedByte()
    switch (signature[0]){
        case 90: // Z = lzma compressed

        var odata:ByteArray = new ByteArray;
        odata.endian = "littleEndian"

        var i:uint;

        //O 0-3 = signature + version
        signature[0] = 70 // F = uncompressed
        odata.writeBytes(signature)
        odata.writeByte(version)

        //I 4-7 = swf file length
        idata.position = 4
        var scriptlen:uint = idata.readUnsignedInt()
        //8 = swf header size
        scriptlen -= 8

        //O 4-7 swf file length
        odata.writeUnsignedInt(scriptlen + 8) // Re-add swf header removed earlier

        var tdata:ByteArray = new ByteArray;
        tdata.endian = "littleEndian"
        //I 12    = lzma properties
        //I 13-16 = lzma dictionary size
        idata.position = 12
        //T 0   = lzma properties
        //T 1-4 = lzma dictionary size
        tdata.writeByte(idata.readByte())
        tdata.writeUnsignedInt(idata.readUnsignedInt())

        // lzma uncompressed length is stored as LE UI64:
        //T 5-8 = uncompressed length
        tdata.writeUnsignedInt(scriptlen)
        //T 9-12 = uncompressed length continued
        tdata.writeUnsignedInt(0)

        //16 = LZMA header size
        idata.position = 17
        //12 = SWF LZMA header size
        idata.readBytes(tdata, 13, idata.length-idata.position)

        tdata.uncompress(CompressionAlgorithm.LZMA)
        odata.writeBytes(tdata)
        return odata;

        break
    }
    return idata;
}

var file:File;
var stream:FileStream;
var idata:ByteArray;
var odata:ByteArray;
var path:String

path = File.applicationDirectory.resolvePath('LZMA.swf').nativePath;
file = new File(path);
stream = new FileStream();
stream.open(file, FileMode.READ); 
idata = new ByteArray
stream.readBytes(idata)
stream.close()

odata = decompressLZMA(idata)

path = File.applicationDirectory.resolvePath('LZMA_decompressed.swf').nativePath;
file = new File(path);
stream = new FileStream(); 
stream.open(file, FileMode.WRITE);
stream.writeBytes(odata)
stream.close() 
```

# ruby-on-rails - 带有 cron 的可安装引擎（无论何时 gem）

> ID：12121067
> 
> 赞同：8
> 
> 时间：2012-08-25T10:10:13.323
> 
> 标签：ruby-on-rails, ruby, rails-engines, whenever

是否可以使用 cron（通过无论何时 gem）直接在可安装的引擎模型上运行任务。我认为 cron 将无法从主应用程序启动，因为可安装的引擎应该是隔离的。

我可以在普通的 Rails 应用程序中随时使用，而且效果很好，但我需要以引擎风格的方式运行任务。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T01:52:27.220

您不能单独使用[Rails 引擎](http://guides.rubyonrails.org/engines.html)并直接执行任务，例如 Rake 任务或调用模型。将 Rails 引擎视为迷你 Rails 应用程序。它为挂载的父 Rails App 提供功能和特性。引擎本身是不完整的。将引擎安装到 Rails 应用程序后，它可以访问正确启动和运行所需的所有配置和初始化程序。

已安装 Engine 的 Rake 任务被继承到父 Rails 应用程序中。执行以下应包括来自引擎的 Rake 任务列表

```
rake -T 
```

在[Rails runner](http://guides.rubyonrails.org/command_line.html#rails-runner)中，您也可以执行挂载的 Rails Engine 的模型、库等。访问引擎的功能时，您必须使用引擎的命名空间。这是[Rails 指南](http://guides.rubyonrails.org/engines.html)中的一个示例，用于从引擎访问模型：

```
Blorgh::Post.find(1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T21:29:56.110

Rails 的设计者绝对不打算让它成为可能。每当依赖于 rails 的运行器脚本时，可挂载插件不支持该脚本（有充分的理由 - 没有应用程序可以与运行器一起运行）。也许可以通过配置何时使用不同的 ruby​​ 执行器（rails 控制台、IRB 等）来找到执行代码的其他方式，但这可能会产生意想不到的结果，因为它不在应用程序的上下文中，所以你有没有配置或环境。

但是，您说：`The cron I think would not be able to start from the main app since mountable engines are supposed to be isolated`，但我对其进行了测试，但事实并非如此。只要您适当地命名运行器任务，您的应用程序的每当配置文件将在插件代码中找到适当的任务并能够执行它。如果由于某种原因不能满足您的特定需求，请告诉我。

# facebook - 占据整个宽度 - facebook 应用程序

> ID：12121069
> 
> 赞同：0
> 
> 时间：2012-08-25T10:10:23.607
> 
> 标签：facebook, facebook-graph-api, canvas, frame

我有一个 facebook 应用程序，它需要 1280 像素的宽度才能正确显示。现在我正在使用 facebook 的流体画布，但我的问题是这个框架占据了大约 270 像素的屏幕：

![图像1](../Images/5194069712e5c60d85e9235308c89139.png)

质量更好的图像： http: [//postimage.org/image/no8732ckh/full/](http://postimage.org/image/no8732ckh/full/)

我可以禁用/删除这个框架吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:14:34.547

不，你不能。没有这个框架，facebook 就无法再产生收入，然后他们对您的应用程序不感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:18:09.153

> 我有一个 facebook 应用程序，它需要 1280 像素的宽度才能正确显示。

运气不好：-P

唯一可能的解决方案：“退出”Facebook，让您的应用在您自己的网站上运行，这样您就可以使用用户可用的完整浏览器屏幕宽度。

或者，当然：让您的应用程序不那么贪婪。

# php - 标头值 php

> ID：12121072
> 
> 赞同：0
> 
> 时间：2012-08-25T10:11:12.990
> 
> 标签：php

您好，这行代码有问题。

```
 header('Location: student.php?student_id='<?php echo $get->student_id ?>; 
```

它给出的错误是：

解析错误：语法错误，意外的“？” 在第 28 行的 C:\xampp\htdocs\Thesis\svalidate_user.php

感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:13:29.463

该错误是由`<?php`.

它不是必需的，因为您已经在 PHP 上下文中。由于`<?`它不是一个有效的 PHP 运算符，而是一个“打开标签”，因此会出现语法错误。

这段代码*应该*是什么样子：

```
header('Location: student.php?student_id=' . $get->student_id); 
```

这是一个非常基本的问题，这表明您可以从阅读有关[PHP 语法](http://php.net/manual/en/language.basic-syntax.php)和[字符串连接](http://php.net/manual/en/language.operators.string.php)的更多信息中受益。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:13:30.643

不要在标题中使用 echo 。

```
header('Location: student.php?student_id=' . $get->student_id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:13:19.873

```
header('Location: student.php?student_id='.$get->student_id); 
```

# ios - iOS 根据 GPS 位置加载表格视图

> ID：12121073
> 
> 赞同：1
> 
> 时间：2012-08-25T10:11:17.520
> 
> 标签：ios, geolocation, location

我在数据库中有一些记录，在其他数据之间，包含一个城市名称。我只想在表格视图中加载城市与用户城市匹配的数据。我已经使用反向地理编码来获取用户的城市：

```
[self.geoCoder reverseGeocodeLocation: location completionHandler:
 ^(NSArray *placemarks, NSError *error) {

     CLPlacemark *placemark = [placemarks objectAtIndex:0];
     country = [placemark.addressDictionary valueForKey:@"Country"];
     city = [placemark.addressDictionary valueForKey:@"City"];
     NSString *title = [NSString stringWithFormat:NSLocalizedString(@"You're in %@", nil),city];

     NSLog(@"%@", title);
     [locationController.locationManager stopUpdatingLocation];
 }]; 
```

问题是城市名称是本地化的。例如：我住在西班牙的萨拉戈萨，我设置了包含城市“萨拉戈萨”的数据库记录。但我的电话语言是意大利语，作为城市名称，我得到的“Saragozza”与数据库记录中的字段不匹配。关于如何做到这一点的任何想法？

编辑：因为我使用 Parse 作为这个应用程序的后端，所以我刚刚在他们的 API 中找到了 whereKey:nearGeoPoint:withinMiles 方法，它可以解决我的问题。我已将数据库记录更改为“地理点”而不是城市名称，并且我将加载距用户位置 X 英里内的所有记录。无论如何，我会保持这个问题的开放，因为我想知道如何在不使用 Parse 的 API 的情况下做到这一点。

# c++ - 对象的布局

> ID：12121084
> 
> 赞同：2
> 
> 时间：2012-08-25T10:12:40.087
> 
> 标签：c++, object, object-layout

我想了解一个对象的布局。所以我用不同顺序的成员变量执行。一切都如预期的那样，期待接下来的序列。

```
#include <iostream>

using namespace std;
class Test1
{
public:
    int m_a;
    char m_b;
};

class Test
{
public:
    int m_b;
    Test1 m_t;
    char m_g;
    char m_c;
    char m_d;
    int m_e;
};

int main()
{
    Test t;
    cout<<(int*)(&t.m_b)<<endl;
    cout<<(int*)(&t.m_t.m_a)<<endl;
    cout<<(int*)(&t.m_t.m_b)<<endl;
    cout<<(int*)(&t.m_c)<<endl;
    cout<<(int*)(&t.m_d)<<endl;
    cout<<(int*)(&t.m_e)<<endl;
    cout<<sizeof(t)<<endl;
} 
```

输出：

```
0xbfebbd6c
0xbfebbd70
0xbfebbd74
0xbfebbd79
0xbfebbd7a
0xbfebbd7c
20 
```

正如我预期的16。

但是如果我从 Test1 中删除 m_a，它会给出预期的输入（12）。

```
#include <iostream>

using namespace std;
class Test1
{
public:
    char m_b;
};

class Test
{
public:
    int m_b;
    Test1 m_t;
    char m_g;
    char m_c;
    char m_d;
    int m_e;
};

int main()
{
    Test t;
    cout<<(int*)(&t.m_b)<<endl;
    cout<<(int*)(&t.m_t.m_b)<<endl;
    cout<<(int*)(&t.m_c)<<endl;
    cout<<(int*)(&t.m_d)<<endl;
    cout<<(int*)(&t.m_e)<<endl;
    cout<<sizeof(t)<<endl;
} 
```

输出：

```
0xbf82e674
0xbf82e678
0xbf82e67a
0xbf82e67b
0xbf82e67c
12 
```

如果我删除与 4 位边界完全对齐的整数，为什么会有 8 个字节的差异？

PS：我知道这是特定于实现的。我想知道该实现是如何完成的:)。这是因为我想访问私人成员，所以想了解对象布局！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:26:21.357

整数`m_a` `sizeof(Test1)`为 8 以对齐`m_a`4 字节边界。没有 int，它只是 th 的大小`char`。

```
class Test
{
public:
    int m_b;     // 4
    Test1 m_t;   // 12
    char m_g;    // 13
    char m_c;    // 14
    char m_d;    // 15

    int m_e;     // 20
}; 
```

# html - 响应更改 div 大小保持纵横比

> ID：12121090
> 
> 赞同：223
> 
> 时间：2012-08-25T10:13:22.663
> 
> 标签：html, css, responsive-design

当我给图像一个百分比宽度或高度时，它只会在保持其纵横比的情况下增长/缩小，但如果我想要与另一个元素相同的效果，是否可以使用百分比将宽度和高度绑定在一起？

* * *

## 回答 #1

> 赞同：544
> 
> 时间：2012-08-25T10:47:42.980

你可以使用纯 CSS 来做到这一点；不需要 JavaScript。[`padding-top`这利用了（有点违反直觉的）百分比相对于包含块的**宽度**](http://www.w3.org/TR/CSS21/box.html#propdef-padding-top)的事实。这是一个例子：

```
.wrapper {
  width: 50%;
  /* whatever width you want */
  display: inline-block;
  position: relative;
}
.wrapper:after {
  padding-top: 56.25%;
  /* 16:9 ratio */
  display: block;
  content: '';
}
.main {
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
  /* fill parent */
  background-color: deepskyblue;
  /* let's see it! */
  color: white;
}
```

```
<div class="wrapper">
  <div class="main">
    This is your div with the specified aspect ratio.
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-06-12T02:07:48.673

不理会 Chris 的想法，另一种选择是使用伪元素，这样您就不需要使用绝对定位的内部元素。

```
<style>
.square {
    /* width within the parent.
       can be any percentage. */
    width: 100%;
}
.square:before {
    content: "";
    float: left;

    /* essentially the aspect ratio. 100% means the
       div will remain 100% as tall as it is wide, or
       square in other words.  */
    padding-bottom: 100%;
}
/* this is a clearfix. you can use whatever
   clearfix you usually use, add
   overflow:hidden to the parent element,
   or simply float the parent container. */
.square:after {
    content: "";
    display: table;
    clear: both;
}
</style>
<div class="square">
  <h1>Square</h1>
  <p>This div will maintain its aspect ratio.</p>
</div> 
```

我在这里整理了一个演示：http: [//codepen.io/tcmulder/pen/iqnDr](http://codepen.io/tcmulder/pen/iqnDr)

* * *

编辑：

现在，对 Isaac 的想法不以为然，在现代浏览器中更容易简单地使用 vw 单位来强制纵横比（尽管我不会像他那样使用 vh ，否则纵横比会根据窗口高度而变化）。

所以，这简化了事情：

```
<style>
.square {
    /* width within the parent (could use vw instead of course) */
    width: 50%;
    /* set aspect ratio */
    height: 50vw;
}
</style>
<div class="square">
  <h1>Square</h1>
  <p>This div will maintain its aspect ratio.</p>
</div> 
```

我在这里整理了一个修改后的演示：[https ://codepen.io/tcmulder/pen/MdojRG?editors=1100](https://codepen.io/tcmulder/pen/MdojRG?editors=1100)

你也可以设置 max-height, max-width, and/or min-height, min-width 如果你不希望它变得非常大或小，因为它现在基于浏览器的宽度而不是容器并且会无限增长/缩小。

请注意，如果您将字体大小设置为 vw 测量值并将所有内脏设置为 em 测量值，您还可以缩放元素内的内容，这是一个演示：[https ://codepen.io/tcmulder/pen/VBJqLV?editors =1100](https://codepen.io/tcmulder/pen/VBJqLV?editors=1100)

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2014-05-15T08:37:22.070

```
<style>
#aspectRatio
{
  position:fixed;
  left:0px;
  top:0px;
  width:60vw;
  height:40vw;
  border:1px solid;
  font-size:10vw;
}
</style>
<body>
<div id="aspectRatio">Aspect Ratio?</div>
</body> 
```

这里要注意的关键是`vw`= 视口宽度和`vh`= 视口高度

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-05T11:25:47.707

这就是我的解决方案

```
<div class="main" style="width: 100%;">
    <div class="container">
        <div class="sizing"></div>
        <div class="content"></div>
    </div>
</div>

.main {
    width: 100%;
}
.container {
    width: 30%;
    float: right;
    position: relative;
}
.sizing {
    width: 100%;
    padding-bottom: 50%;
    visibility: hidden;
}
.content {
    width: 100%;
    height: 100%;
    background-color: red;
    position: absolute;
    margin-top: -50%;
} 
```

[http://jsfiddle.net/aG4Fs/3/](http://jsfiddle.net/aG4Fs/3/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-25T10:19:45.007

```
(function( $ ) {
  $.fn.keepRatio = function(which) {
      var $this = $(this);
      var w = $this.width();
      var h = $this.height();
      var ratio = w/h;
      $(window).resize(function() {
          switch(which) {
              case 'width':
                  var nh = $this.width() / ratio;
                  $this.css('height', nh + 'px');
                  break;
              case 'height':
                  var nw = $this.height() * ratio;
                  $this.css('width', nw + 'px');
                  break;
          }
      });

  }
})( jQuery );      

$(document).ready(function(){
    $('#foo').keepRatio('width');
}); 
```

工作示例：http: [//jsfiddle.net/QtftX/1/](http://jsfiddle.net/QtftX/1/)

# c++ - c ++中两次的差异

> ID：12121091
> 
> 赞同：7
> 
> 时间：2012-08-25T10:13:25.970
> 
> 标签：c++, time

起初我得到一个时间

```
time_t t1 = time(0) 
```

（获取当前时间是否正确？）然后

```
time_t t2 = time(0) 
```

现在我想以毫秒为单位找到 t1 和 t2 之间的差异，我搜索了很多，但没有奏效。很多铸造问题，无法将其更改为毫秒提前感谢您的帮助

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-25T10:16:33.773

使用[`difftime`](http://www.cplusplus.com/reference/clibrary/ctime/difftime/)：

```
double diff = difftime(t2, t1); 
```

这会给你以秒为单位的差异。乘以`diff`得到`1000`毫秒。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-25T10:25:52.277

`time()`返回一个整数类型，以秒为单位给出自纪元以来的时间，因此您永远不会获得毫秒分辨率。改用`gettimeofday()`它会给出一个带有秒和微秒的结构：

```
struct timeval t1, t2;
gettimeofday(&t1, NULL);
/* ... */
gettimeofday(&t2, NULL);
int milliSeconds = (t2.tv_sec - t1.tv_sec) * 1000 + (t2.tv_usec - t1.tv_usec)/1000; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T10:16:37.027

这是您需要的：[http ://www.cplusplus.com/reference/clibrary/ctime/difftime/](http://www.cplusplus.com/reference/clibrary/ctime/difftime/)

# java - java中basemodel中的PropertyChangeSupport和VetoableChangeSupport是什么

> ID：12121095
> 
> 赞同：0
> 
> 时间：2012-08-25T10:14:19.013
> 
> 标签：java

struts 2中是什么 `PropertyChangeSupport` 以及 `VetoableChangeSupport` 使用什么`Basemodel`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-14T10:49:27.150

如果要执行任何操作，当 bean 中的属性发生更改时，请使用 ChangeSupport。

您注册监听器和源（bean），其属性/属性被监视更改。

VetoableChangeSupport 用于受约束的属性，因此您在实际设置属性的新值之前触发 VetoableChange（调用侦听器）。

PropertyChangeSupport 用于绑定属性，因此在为属性设置新值后触发 PropertyChange。

请检查 jdk 中提供的示例。

# php - 使用 index.php 中包含的 login.php 的 PHP 用户登录验证不起作用

> ID：12121096
> 
> 赞同：1
> 
> 时间：2012-08-25T10:14:20.303
> 
> 标签：php

我有 login.php 包括登录类和登录进行处理。我在 index.php 中包含 login.php

无法理解为什么验证不起作用，这是代码：

登录.php

```
<?php 
include_once('Database.php');

class login extends Database{
    protected $_db;

    public $_error;
    public $_password;
    public $_email;

    public function __construct(){
        $this->_db = new Database('localhost','root','','kupon') or $this->_error = 'Could not connect to database';
    }

    public function validate($email, $password){
        $query = $this->_db->query("SELECT * FROM users WHERE email='$this->_email' AND password ='$this->_password'");
        $rows = $this->_db->numrows();

        if($rows == 1){
            $result = mysql_fetch_assoc($query);
            if ($results['email'] == $email && $results['password'] == $password);
                return true;
        } else{
            $this->_error =  '<p> User Does not exists</p>';
        }
    }

}

$login = new login();

if (isset($_POST['email']) && isset($_POST['password'])){
    $email = $_POST['email'];
    $password = $_POST['password'];

    if($login->validate($email, $password))
        echo 'your in';
}

?>
                <form action="index.php" method="post" class="form">
                    <p class="email">
                        <input type="text" name="email" /> :דואר אלקטרוני</br>
                    </p>
                    <p class="password">
                        <input type="password" name="password" /> :סיסמא</br>
                    </p>
                    <p class="submit">  
                        <input type="submit" value="היכנס" />  
                    </p>  
                </form> 
```

我只是将它包含在 index.php

```
 <?php
                include_once ('php/ooplogin.php');
            ?> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:50:30.953

您在此处验证用户：

```
$query = $this->_db->query("SELECT * FROM users WHERE email='$this->_email' AND password ='$this->_password'"); 
```

并且您正在尝试在这里做完全相同的事情：

```
 if ($results['email'] == $email && $results['password'] == $password);
                return true; 
```

您的函数应如下所示：

```
 public function validate($email, $password){
        // you should escape $email and $password to prevent SQL injection!!!
        $query = $this->_db->query("SELECT * FROM users WHERE email='$email' AND passwoird='$password'");
        $rows = $this->_db->numrows();
        return !!$rows;
  } 
```

你那里有安全问题。请阅读这篇文章：

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

而且我不知道你在这里尝试什么：

```
class login extends Database{
public function __construct(){
     $this->_db = new Database(... 
```

如果你扩展`Database`课程为什么不：

```
class login extends Database{
  public function __construct() {
    parent::__construct('localhost','root','','kupon') or $this->_error = 'Could not connect to database';
  }
  public function foobar() {
     $query = $this->query("SELECT * FROM foo");
  } 
```

# android - 无法从 FragmentActivity 调用 Activity

> ID：12121099
> 
> 赞同：0
> 
> 时间：2012-08-25T10:14:41.837
> 
> 标签：android, android-intent, navigation, android-fragments, android-fragmentactivity

我面临一个小问题，我想从 FragmentActivity 调用 Activity。我怎样才能做到这一点？

这是我的代码。

（已编辑）

```
class myClass Extends FragmentActivity
{

   OnCreate()
   {
        DirectionalViewPager pager = (DirectionalViewPager) findViewById(R.id.pager);
        pager.setOrientation(DirectionalViewPager.VERTICAL);
        pager.setAdapter(new TestFragmentAdapter(getSupportFragmentManager()));
        // I think problem is with this above line  in setting adapter because when I remove above three line it is not showing me error.. 
   }

   OnClick()
   {

      Intent intent = new Intent(myClass.this,nextClass.class);
      startActivity(intent);

   }

}

class TestFragmentAdapter extends FragmentPagerAdapter {
    final String[] CONTENT = new String[] { "One", "Two", "Three",
            "Four","Five","Six","Seven","Eight","Nine" };

    public TestFragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int position) {
        return TestFragment.newInstance(CONTENT[position]);
    }

    @Override
    public int getCount() {
        return CONTENT.length;
    }
} 
```

错误：

```
08-25 17:37:04.230: W/dalvikvm(32535): threadid=1: thread exiting with uncaught exception (group=0x400cf760)
08-25 17:37:04.260: E/AndroidRuntime(32535): FATAL EXCEPTION: main
08-25 17:37:04.260: E/AndroidRuntime(32535): java.lang.RuntimeException: Unable to pause activity {com.chirag.teahouse/com.chirag.teahouse.TeaHouseActivity}: java.lang.NullPointerException
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2490)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2447)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.ActivityThread.handlePauseActivity(ActivityThread.java:2425)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.ActivityThread.access$1700(ActivityThread.java:122)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1012)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.os.Looper.loop(Looper.java:132)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.ActivityThread.main(ActivityThread.java:4028)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at java.lang.reflect.Method.invokeNative(Native Method)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at java.lang.reflect.Method.invoke(Method.java:491)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at dalvik.system.NativeStart.main(Native Method)
08-25 17:37:04.260: E/AndroidRuntime(32535): Caused by: java.lang.NullPointerException
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.support.v4.view.ViewPager.onSaveInstanceState(ViewPager.java:507)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at com.directionalviewpager.DirectionalViewPager.onSaveInstanceState(DirectionalViewPager.java:454)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.view.View.dispatchSaveInstanceState(View.java:8258)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:1990)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:1996)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.view.ViewGroup.dispatchSaveInstanceState(ViewGroup.java:1996)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.view.View.saveHierarchyState(View.java:8241)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at com.android.internal.policy.impl.PhoneWindow.saveHierarchyState(PhoneWindow.java:1603)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.Activity.onSaveInstanceState(Activity.java:1164)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.support.v4.app.FragmentActivity.onSaveInstanceState(FragmentActivity.java:470)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.Activity.performSaveInstanceState(Activity.java:1114)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.Instrumentation.callActivityOnSaveInstanceState(Instrumentation.java:1184)
08-25 17:37:04.260: E/AndroidRuntime(32535):    at android.app.ActivityThread.performPauseActivity(ActivityThread.java:2472)
08-25 17:37:04.260: E/AndroidRuntime(32535):    ... 12 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-04T21:24:18.920

你可以使用这个代码

```
OnClick()
{
  Intent intent = new Intent(getActivity(),nextClass.class);
  startActivity(intent);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T21:34:48.277

设置适配器后尝试 pager.setSaveEnabled(false)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T14:50:01.620

您在问题中粘贴的代码没有正确的语法，所以我假设您在这里手动编写它是为了不包含敏感代码？... 反正...

您的日志显示您的错误不是在开始一个新的活动，而是在暂停/保存您当前的活动。

您可以从您的错误中看到：

```
at com.directionalviewpager.DirectionalViewPager.onSaveInstanceState(DirectionalViewPager.java:454) 
```

您的 onSaveInstanceState() 覆盖方法是失败的。

希望有帮助。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-06-30T00:30:26.843

`pager.setSaveEnabled(false)`设置适配器后尝试。这个对我有用。

# windows-8 - Platform::Collections::Map - 以枚举为键

> ID：12121102
> 
> 赞同：0
> 
> 时间：2012-08-25T10:15:10.180
> 
> 标签：windows-8, windows-runtime, c++-cx

我 ac# dev 试图进入 c++，我正在编写一些自定义控件。我需要以下复杂 c# 字典的 c++ 等价物

```
private static Dictionary<PinchscapeColor, 
        Dictionary<PinchscapeColorLevel, Brush>> AccentColorMap; 
```

PinchscapeColor 和 PinchscapeColorLevel 是简单的 c# 枚举

```
public enum PinchscapeColorLevel
{
    Light,
    Medium
    Dark
}

public enum PinchscapeColor
{
    PinchscapeCyan,
    PinchscapeLime,
    PinchscapeMagenta,
    PinchscapeTangerine,
    PinchscapePlum
} 
```

我像这样计算一个特定的颜色/颜色级别组合（在c#中）

```
var color = AccentColorMap[PinchscapeColor.PinchscapeCyan][PinchscapeColorLevel.Dark]; 
```

我在 C++ 中尝试这样做已经成功了：

我的枚举：

```
public enum class PinchscapeColorLevel
{
    Light,
    Medium,
    Dark
};

public enum class PinchscapeColor
{
    PinchscapeCyan,
    PinchscapeLime,
    PinchscapeMagenta,
    PinchscapeTangerine,
    PinchscapePlum
}; 
```

我像这样在我的头文件中定义了一个映射

```
Platform::Collections::Map<PinchscapeBasicControls::PinchscapeColor,
    Platform::Collections::Map<PinchscapeBasicControls::PinchscapeColorLevel,
    Windows::UI::Xaml::Media::Brush^>^>^ colorMap; 
```

但我收到以下编译器错误：

程序文件 (x86)\microsoft visual studio 11.0\vc\include\collection.h(1118)：错误 C3986：“调用”：公共成员的签名包含本机类型“std::less<_Ty>”（这是第一行，它会永远持续下去）

有谁知道我做错了什么？我以为这会很容易:(

**编辑**

请在下面找到一个最小的代码示例，它是您复制问题所需的所有代码：

1) Class1.h

```
#pragma once

namespace WindowsRuntimeComponent1
{
    public enum class ColorLevelEnum
    {
        Light,
        Medium,
        Dark
    };

    public enum class ColorEnum
    {
        Cyan,
        Lime,
        Magenta,
        Tangerine,
        Plum
    };

    public ref class Class1 sealed
    {
    private:
        Windows::Foundation::Collections::IMap<WindowsRuntimeComponent1::
            ColorEnum,Windows::Foundation::Collections::IMap<WindowsRuntimeComponent1::
            ColorLevelEnum,Windows::UI::Xaml::Media::Brush^>^>^ colorMap;
    public:
        Class1();
    };
} 
```

Class1.cpp

```
#include "pch.h"
#include <collection.h>
#include "Class1.h"

using namespace WindowsRuntimeComponent1;
using namespace Windows::UI::Xaml::Media;
using namespace Platform::Collections;
using namespace Platform;

Class1::Class1()
{
    if (colorMap == nullptr)
    {
        colorMap = ref new Map<ColorEnum,Map<ColorLevelEnum,Brush^>^>();
    }
} 
```

希望能帮助您重现问题

感谢任何花时间帮助我解决这个问题的人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:30:30.317

问题中提供的代码格式正确，并且使用 Visual Studio 2012 的 RTM 版本编译时不会出错。

不过，我可以推测您的问题的原因：您可能正在将此`colorMap`（或其类型）用作公共的公共或受保护的成员，`ref class`或者您正在以某种方式使用它，它的类型最终是公共或受保护成员的类型。

该`Platform::Collections::Map`类型是接口的 C++/CX 特定实现`Windows::Foundation::Collections::IMap`。声明 Windows 运行时类型的公共成员时，您需要使用`IMap`，而不是`Map`，因为`Map`依赖于 C++ 和 C++/CX 特定的语言功能，这些功能在 Windows 运行时 ABI 中不可用。

简而言之，如果你改变你`colorMap`的使用`IMap`，它应该可以解决问题：

```
IMap<
    PinchscapeColor,
    IMap<
        PinchscapeColorLevel,
        Brush^
    >^
>^ colorMap; 
```

当您实例化它时，您需要先实例化外部映射，然后使用 he 实例化每个内部映射`Platform::Collections::Map`。例如：

```
// Create the outer map; note the "value type" is still IMap<T, U>
colorMap = ref new Map<ColorEnum,IMap<ColorLevelEnum,Brush^>^>();

// Insert an element into the outer map:
colorMap->Insert(ColorEnum::Cyan, ref new Map<ColorLevelEnum, Brush^>()); 
```

* * *

考虑使用一些`typedef`s 使代码更清晰：

```
typedef IMap<PinchscapeColorLevel, Brush^>          IColorLevelBrushMap;
typedef IMap<PinchscapeColor, IColorLevelBrushMap^> IColorMap;

IColorMap^ colorMap; 
```

* * *

或者，如果您不需要让其他 Windows 运行时组件可以访问此地图，请考虑使用`std::map`，它的性能会显着提高：

```
typedef std::map<PinchscapeColorLevel, Brush^>        ColorLevelBrushMap;
typedef std::map<PinchscapeColor, ColorLevelBrushMap> ColorMap;

ColorMap colorMap; 
```

或者：

```
typedef std::pair<PinchscapeColor, PinchscapeColorLevel> ColorMapKey;
typedef std::map<ColorMapKey, Brush^>                    ColorMap;

ColorMap colorMap; 
```

# objective-c - 自定义 NSMutableDictionary 类

> ID：12121104
> 
> 赞同：0
> 
> 时间：2012-08-25T10:15:27.957
> 
> 标签：objective-c, ios, class, nsmutabledictionary

我正在尝试创建一个继承 NSMutableDictionary 的类。每当我基于此类初始化对象时，它都会返回 null。

```
Class:
- (NSMutableDictionary*) init
{
self = [super init];
if (self)
{
    self = [[NSUserDefaults standardUserDefaults] objectForKey: MasterKey];
}

return self;
} 

Init object:
if (self.masterDict == nil)
{
    self.masterDict = [[CardlyMasterDictionary alloc] init];
} 
```

当我调试时，我`po [self masterDict]`在 0x0000000 处调用并返回一个 nil 对象。我需要采取另一个步骤来正确实例化 NSMutableDictionary 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:23:57.460

**不要这样做！**

[（编辑正如@newacct 所评论的，文档中](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html#//apple_ref/doc/uid/20000140-DontLinkElementID_1)有关于子类化 NSDictionary 的要求的详细信息。但是，如果可能，他们仍然建议不要这样做）。

Apple 建议不要对基本的 nsdict、nsset、nsstring 等类进行子类化——它们不是“真正的”类，它们是类集群，这意味着当你实例化一个 nsdictionary 时，你实际上并不知道你收到了哪个类。

您应该做的是创建一个具有 nsdictionary 作为私有属性的类 - 这样您就不会对字典做任何奇怪的事情，但仍然不能包装它的功能。这是一个很好的原则，可以普遍遵循！

* * *

在你的单元方法中创建一个新对象并将 self 指向它也有点不寻常 - 每次调用 alloc/init 时，你都分配了两块内存，而不仅仅是一块。我会做一个班级水平

* * *

PS刚刚意识到我没有回答你的问题！

您得到 nil 的原因是因为您在第一次调用此方法时用户默认值中没有任何内容。这意味着您的 init 方法会将 self 设置为 nil。如果发生这种情况，你需要做

```
self = [[NSUserDefaults standardUserDefaults] objectForKey: MasterKey];
if (nil == self) {
    self = [nsmutabledictionary new];
    [[NSUserDefaults standardUserDefaults] setObject:self forKey:MasteKey];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:10:21.053

上面的代码片段之一。如果你这样做 - 请尊重内存管理：

```
- (id)init
{
    [self release];
    self = [[NSUserDefaults standardUserDefaults] objectForKey:MasterKey];
    if (self == nil) {
        self = [[NSMutableDictionary alloc] init];
        [[NSUserDefaults standardUserDefaults] setObject:self forKey:MasterKey];
    } else {
        [self retain];
    }
    return self;
} 
```

# javascript - 使用 ajax post 传递单元格值以更新表

> ID：12121108
> 
> 赞同：0
> 
> 时间：2012-08-25T10:15:56.623
> 
> 标签：javascript, jquery, ajax, jsp, servlets

在过去 2 天使用 jquery 我试图通过 ajax 调用 servlet 来获取执行更新所需的单元格值。当文本框丢失时，我使用双击事件将单元格替换为文本框以编辑值将值传递给 servlet。我需要将编辑后的值与用于更新表的 ID 号一起传递。现在我需要获取用户编辑的行的 id 值。

我试图获取值，但只有第一行得到更新，因为我只能获取第一行的 id 值。如何获取其他行的值，以便用户可以更新所有行。

```
<script>
        $(function(){
    $('.table-cell').dblclick(function(){
//    if ($(this).attr('editing') == '0')
//    {
    // only trigger this when the cell is not in edit mode
   $(this).attr('editing',1);

    // show the input
    var input = $('<input type="text" value="'+$(this).html()+'">');
    $(this).html('');
    $(this).append(input);

    // bind blur event to input
    input.blur(function(){

        // update value from input to the table cell
        var value = $(this).val();
       // alert(value);
        $(this).parent().text(value);
        $(this).parent().attr('editing',0);
        //this will get only the first id value,no matter which column i edit
       var fid= document.getElementById("filename").textContent;
       // alert(fid);
       //this will iterate  
    $('#table').ready(function() { 
        $(this).find('.filename').each( function() { 
            alert($(this).html()); 
        }) 
    })

        // send the data to the server for update
        $.ajax({
            url: 'update',
            data: {text1:value,filename1:fid},
            type:"POST",
            dataType:"json",
            error:function(data){
               // alert('error')
            },
            success: function(data) {
                //alert('updated!')
            }
        });

    });
 //    }
});
    });
</script>
<table border="1" id="table">
 <th>S.NO</th>
 <th>Description</th>
 <th>File Name</th>
 <th>Category</th>
 <th>Sector</th>
 <th>Delete</th>
 <th>Edit</th>
 <c:forEach items="${fileDetails}" var="item" varStatus="counter">
 <tr>  
 <td>${counter.count}</td>
 <td onDblclick="javascript:doubleclick(this);" >${item.filedesc}</td> //editable row
 <td><a href="download?name=${item.filepath}" id="changes">${item.filenaame}</a></td>
 <td>${item.category}</td> 
 <td>${item.sector}</td>
 <td hidden="true" id="filename" class="filename" index="1" >${item.id}</td> //id values from db table
 <td> <input type="submit" onclick="filedelete('${item.id}','${item.sector}')" value="Delete"> </td>

 </tr>

 </c:forEach>
 <input type="hidden" name="delete" id="delete" >
 <input type="hidden" name="num" id="num">
 <input type="hidden" name="sect" id="sect">

 </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T14:55:51.167

您可以对行号进行编码，例如：

```
<tr index="counter.index"> 
```

...而不是通过 jQuery 在适当的地方掌握它

```
row=$(this).parent().attr("index") 
```

# android - 在模拟器上访问文件的问题

> ID：12121119
> 
> 赞同：0
> 
> 时间：2012-08-25T10:18:02.967
> 
> 标签：android, android-emulator

我在以前可以工作的模拟器上的 Android 应用程序上录制 wav 文件时遇到问题。我没有更改代码，但是当我录制它时，模拟器无法为我创建 wav 文件。但是，当我在我的 Android 手机上试用它时，它运行良好。

此外，我也无法使用 DDMS-> 文件资源管理器将 wav 文件推送到我的模拟器中。

有没有人遇到过这种问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:26:09.123

我发现模拟器上的文件处理有时是不可预测的。大多数时候都很好，但我时常遇到权限问题。我现在通常只是创建一个新的模拟器实例，所以一切都从头开始初始化。这可能很烦人，但这解决了我偶尔遇到的问题。我在网上搜索并找到了看似不错的修复方法，但问题仍然不时再次出现。幸运的是，它并没有持续多久。

# java - 语义分析

> ID：12121124
> 
> 赞同：2
> 
> 时间：2012-08-25T10:19:10.857
> 
> 标签：java, compiler-construction, language-design, semantics

我们一直在探索为我们的平台编写外部 DSL，语法将类似于 JAVA，但生成的底层代码会有所不同。

我们进行了 ANTLR 旋转，并调整了开箱即用的 java 语法文件以符合我们的规则，下一步是语义分析，这有点困难，所以很想知道免费的 JAVA 语义分析器的可用性。与语法文件类似，如果我们设法获得开箱即用的 JAVA 语义分析器代码，那么我们可以对其进行调整以满足我们的需要。

此外，我们还在研究 Scala DSL 功能。

感谢您在这方面的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T10:23:12.437

您可以从 Eclipse 源代码中获得很多帮助。它具有公开的 API，可公开 Java 文件的 AST，并使用所有类型绑定进行注释。但是，我认为您会发现调整该代码非常具有挑战性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T16:07:01.847

[Scala 目前对宏系统](http://scalamacros.org)有实验性的支持。宏提供了一种方便、轻量级的方式来定义新的语言特性；它们允许您定义 DSL，而无需复制所有进入基础语言的工作。他们不能做所有事情，但他们可以做很多事情，而且当他们适合任务时，他们比编写一种全新的语言更容易创建和调试。

# mysql - HAVING 子句是多余的吗？

> ID：12121125
> 
> 赞同：14
> 
> 时间：2012-08-25T10:19:23.437
> 
> 标签：mysql, sql, group-by, having, having-clause

以下两个查询产生完全相同的结果：

```
select country, count(organization) as N
from ismember
group by country
having N > 50;

select * from (
  select country, count(organization) as N
  from ismember
  group by country) x
where N > 50; 
```

每个`HAVING`子句都可以用子查询和`WHERE`这样的子句代替吗？或者在某些情况下，一个`HAVING`子句是绝对必要的/更强大/更有效/无论如何？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-25T10:32:19.110

这里有 2 个问题： 第一个问题的答案是**肯定**的：`HAVING`-laden 查询的结果集与作为子查询执行的相同查询的结果集相同，并用`WHERE`子句装饰。

第二个问题是关于性能和表现力的——我们在这里深入实施。在 MySQL 上，有一条细红线，性能开始偏离：内部查询的结果集不能再保存在内存中的那一刻。在这种情况下，MySQL 将创建内部查询的磁盘表示，然后在其上使用`WHERE`选择器。这不会发生，如果`HAVING`使用该子句，则不合格的组将从结果集中删除。

这意味着，子句的选择性越高，`HAVING`它的性能相关性就越大：考虑内部查询的一百万行的结果集，即通过`HAVING`子句减少到 5 行 - 结果集很可能内部查询的一部分不会保存在内存中，但很可能最终结果集会保存。

**编辑**

我曾经遇到过这样的情况：查询从一个分布非常均匀的表中选择了几个异常值（每天在车间的物理机器上生产的件数）。由于 IO 负载高，我进行了调查。

**编辑 2**

请记住，查询缓存**不**用于子查询 - 恕我直言，地方开发应该更多地关注 - 所以子查询模式不会从内部查询作为缓存结果集中受益。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-25T10:41:04.063

在 Sql Server 2008 中，两个类似的查询具有完全相同的执行计划：

![在此处输入图像描述](../Images/8a215808352a688988b486e26f347411.png)

我还研究了许多由 Entity Framework（使用 SS 2008）生成的查询，到目前为止，我从未见过带有`HAVING`子句的查询。对聚合结果带有条件的分组查询总是被转换为带有子查询的查询。我相信 ADO.Net 团队知道他们在做什么......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-25T10:34:23.713

HAVING 子句对于避免增加子查询的复杂性非常有用。但是，这两者在逻辑上是等价的，并且每个 HAVING 子句都可以像您一样使用子查询重写。

如果您很好奇，如果您准备将 GROUP BY 发挥到极致，您还可以将每个 WHERE 子句编写为 HAVING 子句。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T10:41:22.520

我知道，您将其从一般更改为 MySQL，但我想在这里添加一个（可能有用的）注释。稍作修改后，我在 SQL Server 2008 中尝试了您的查询。

对于任何想要了解更多细节的人来说，这两个查询的执行计划在 SQL Server 2008 中甚至***完全相同***。因此优化器以相同的方式处理这两个命令，具有相同的性能和估计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T14:36:11.833

逻辑上是的，结果最终将是相同的。但性能可能会有所不同。HAVING 子句可能会导致数据库更改不同的执行计划。

给上面的人的说明（不能以某种方式直接评论）-执行计划不仅取决于您的查询。它也可能由数据库根据统计数据进行调整，例如运行时的表大小等。至少对于 DB2 来说...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T10:27:11.733

恕我直言，使用该`HAVING`子句应该是有效的，因为在第二种情况下，将在包含运行过滤条件的分组结果的工作表上进行额外的传递。

# android - 使用Android styles.xml时是否有规则或例外

> ID：12121128
> 
> 赞同：1
> 
> 时间：2012-08-25T10:19:51.917
> 
> 标签：android, xml, styles

我正在尝试使用一些填充来设置 LinearLayout 的样式。原因是我有 7-8 个类似的结构化布局，我希望它们能够同步以使调整更容易。

所以这是我的布局xml：

```
<LinearLayout
    style="@style/QuestionPane.AnswerPane"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="1"
    android:orientation="vertical" >

    <Button
        android:id="@+id/btn_yes"
        style="@style/ButtonStyle"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_marginBottom="5dp"
        android:text="Yes" />

    <Button
        android:id="@+id/btn_no"
        style="@style/ButtonStyle"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:text="No" />
</LinearLayout> 
```

和styles.xml：

```
<style name="QuestionPane">
    <item name="android:background">@color/question_bg</item>
    <item name="android:padding">10dp</item>
    <item name="android:paddingLeft">50dp</item>
</style>

<style name="QuestionPane.AnswerPane">
    <item name="android:paddingLeft">100dp</item>
    <item name="android:paddingTop">20dp</item>
    <item name="android:paddingBottom">20dp</item>
    <item name="android:gravity">top|left</item>
    <item name="android:background">@color/report_purple</item>
</style> 
```

背景颜色已正确应用。但是，没有应用填充属性。我有带填充的按钮样式，它们工作得很好。

```
<style name="ButtonStyle" parent="@android:style/Widget.Button">
    <item name="android:textSize">@dimen/text_middle</item>
    <item name="android:textColor">#FFFFFFFF</item>
    <item name="android:background">@drawable/button_bg</item>
    <item name="android:textColor">@color/button_text</item>
    <item name="android:paddingLeft">30dp</item>
    <item name="android:paddingRight">30dp</item>
</style> 
```

那么这里有什么问题呢？是否有一些我不能通过styles.xml 做的属性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T16:53:35.553

经过一些测试，问题似乎是由于`android:padding`父`QuestionPane`样式中的属性而出现的，设置该值会阻止对子样式中其他填充属性的任何覆盖。我不知道为什么会发生这种情况，但我知道如何绕过它，避免使用该`android:padding`属性并为每个填充属性设置填充：

```
<style name="QuestionPane">
    <item name="android:background">@color/question_bg</item>
    <item name="android:paddingTop">10dp</item>
    <item name="android:paddingBottom">10dp</item>
    <item name="android:paddingRight">10dp</item>
    <item name="android:paddingLeft">50dp</item>
</style> 
```

这应该使填充出现而无需对当前代码进行其他修改。

# joomla - 根据用户字段向joomla 2.5中的特定用户显示内容？

> ID：12121129
> 
> 赞同：0
> 
> 时间：2012-08-25T10:20:10.957
> 
> 标签：joomla, field, joomla2.5

是否可以根据以 json 格式存储在数据库中的用户向特定用户显示特殊内容内容？

我搜索了，我找不到任何组件，cck 是一个解决方案吗？或者我必须创建一个自定义组件？

我不是程序员，但我猜一个带有内容插件的简单组件是一个简单的解决方案？插件在显示内容之前检查用户字段，如果字段可用，它会显示该内容。像其他插件语法一样，对吗？

我只是想知道可以做到吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:00:52.990

在 Joomla！2.5 您可以将文章、类别等限制为特定的“查看访问级别”，无需任何扩展。

您可以通过匹配一个或多个“查看访问级别”的“用户组”微调可见性。您可以阅读[教程](http://docs.joomla.org/ACL_Tutorial_for_Joomla_1.6)或查看[Joomla 社区文章](http://magazine.joomla.org/issues/issue-feb-2012/item/639-Joomla-ACL-Access-Levels)

您还可以使用[Akeeba Subscriptions](http://extensions.joomla.org/extensions/e-commerce/membership-a-subscriptions/19528)等产品自动执行此过程，以根据用户订阅的内容自动设置用户组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T11:36:29.080

有一个 NoNumber 扩展名为 AdvancedModuleManager（左右），您可以将模块分配给特定用户...

# vba - 用word 2007中的宏替换日期/用上标替换部分数字

> ID：12121133
> 
> 赞同：2
> 
> 时间：2012-08-25T10:21:21.997
> 
> 标签：vba, replace, ms-word, superscript

我需要帮助来更改某些 doc 文件中的日期格式。我有数百页在其中替换了罗马尼亚语的不同日期，实际上我只需要替换日期之前的斜线，有没有更简单的方法可以做到这一点？像这样替换所有日期的宏

就像是：

```
“nr. 313/17 noiembrie 2011”我必须用“nr. 313 din 17 noiembrie 2011”替换它

“2012 年 4 月 15 日 3 日”->“2012 年 4 月 3 日 15 din 3”

“2012 年 4 月 27 日”->“2012 年 4 月 3 日 27 丁”

```

我必须用单词“din”替换数字之间的斜杠“/”（前后有空格）

二、我还必须小心替换，因为我在文本中有其他格式，例如“art. 385/15”，其中斜线不应替换为“din”一词

这是我还没有找到答案的另一个问题：

```

“第 15/2 条” - “第 15 条2条”

"第 27/12 条" - "第 27 条第12条"

"第 385/19 条" - "第 385 条第19条" 

```

*   “/2”、“/12”、“/19”只能用上标替换，斜杠必须删除，我有很多这样的文章需要替换……宏可以帮助我工作更快更好

有什么办法可以解决这2个问题吗？（我使用 word 2007 和 2010）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T01:58:09.967

OP 要求将格式为“15/3 aprilie”的日期字符串更改为“15 din 3 aprilie”，而不影响 [number/number] 的其他情况。这可以通过通配符搜索和替换操作来完成，该操作在 12 个月中的每个月运行 12 次。

包含单个搜索和替换操作的核心例程如下：

```
 Sub replacemonth(month As String)

            With ActiveDocument.Range.Find
                .ClearFormatting
                .Text = "([0-9]{1,3})/([0-9]{1,3} " + month + ")"
                .Replacement.ClearFormatting
                .Replacement.Text = "\1 din \2"
                .Forward = True
                .Wrap = wdFindStop
                .Format = False
                .MatchCase = False
                .MatchWholeWord = False
                .MatchWildcards = True
                .Execute Replace:=wdReplaceAll
            End With

    End Sub 
```

然后第二个例程运行每个月的例程：

```
 Sub ReplaceDates()
       replacemonth ("ianuarie")
       replacemonth ("februarie")
       replacemonth ("martie")
       replacemonth ("aprilie")
       replacemonth ("mai")
       replacemonth ("iunie")
       replacemonth ("iulie")
       replacemonth ("august")
       replacemonth ("septembrie")
       replacemonth ("octombrie")
       replacemonth ("noiembrie")
       replacemonth ("decembrie")
End Sub 
```

将这两个都放入宏编辑器中，运行第二个宏（ReplaceDates），它应该替换您指定的所有日期。

搜索例程假定斜杠两边的数字最多为三位（如原始帖子中的第一个示例所示）；该数字可以根据需要在搜索字符串中轻松更改。

# xml - 使用网络服务？

> ID：12121134
> 
> 赞同：4
> 
> 时间：2012-08-25T10:21:22.627
> 
> 标签：xml, web-services, soap, wsdl

我是一名计算机科学专业的学生，​​本学年我正在学习网络。我已经具备 HTML、CSS、Javascript、PHP 和一点 XML 方面的知识。我将需要制作一个包含所有这些技术的迷你项目，其中包括 Web 服务。您能否给我描述一下 Web 服务的工作原理和方式。为什么我们使用它，以及没有它不能做什么。

如果你能给我一个例子，我们在哪里使用 Web 服务，那就太好了。这会给我一些想法来思考我的项目标题。

我将使用 SOAP 和 WSDL，使用 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T17:31:41.917

**为什么我们使用网络服务**

Web 服务的强大之处在于它们提供了程序员可以添加到他们自己的应用程序中的功能，而不管使用何种编程语言。

**例子**

例如，您可能有一个网站，您希望用户能够在其中输入他们的位置，并且您的网站会返回天气以及他们在 Google 地图上的位置显示。谷歌地图和各种天气网站提供网络服务，因此网络开发人员可以使用这些功能。如果您的网站是用 Java、PHP 或 python 编码的，那没关系。

另一个例子是，如果您有一个商业网站，并且您希望您的网站每天显示股票行情。各种公司将提供股票行情网络服务，以便您可以做到这一点。有些是免费的，有些不是。

**SOAP 与 RESTful Web 服务**

最终，您将需要讨论 RESTful Web 服务和 SOAP 之间的区别，这本身就是一个具有里程碑意义的讨论。但下面是一个简单的用于添加两个数字的 web 服务示例。

**休息**

```
http://www.SimpleMathSite.com/Add/5/6/ 
```

该网站将返回一些类似的东西

```
<?XML  version="1.0" encoding="utf-8"?>
<answer>
11
</answer> 
```

您可以在您的 javascript 或 PHP 代码中使用它。查看 URL，您可以看到您调用了“添加”函数并将值 5 和 6 传递给它。这就是 Web 服务允许用不同语言编写的对象相互通信的方式。

**肥皂**

SOAP 要复杂得多，但它的优点是 WSDL 文件，它描述了您可以调用的所有远程函数。因此，一些编译器允许您导入 Web 服务并创建可以放置在代码中的对象，而无需查看幕后发生的任何复杂 XML。如果上面的示例有一个 WSDL 文件，一些编译器会允许您导入 Web 服务，以便您可以像这样在代码中使用它。

```
int Answer = SimpleMath.Add(5,6); // No need to parse the XML yourself. 
```

查看这个天气 Web 服务，了解如何使用 SOAP 的一个很好的示例。它提供了示例 HTTP GET 和 POST 请求，如果您想从头开始制作自己的 SOAP 客户端，您可以使用这些请求。

[http://www.webservicex.com/globalweather.asmx?op=GetWeather](http://www.webservicex.com/globalweather.asmx?op=GetWeather)

**如果没有网络服务怎么办？**

如果没有 Web 服务，网站无法使用来自其他网站的数据更新其内容，例如航空公司信息、酒店空缺情况，或者您的 Facebook 朋友是否喜欢 Pandora 上的同一首歌曲。

# javascript - 使用 Jquery 从所有元素创建一个字符串

> ID：12121138
> 
> 赞同：0
> 
> 时间：2012-08-25T10:22:01.560
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [使用 jQuery 分隔文本字符串](https://stackoverflow.com/questions/7890928/delimiting-a-text-string-with-jquery)

我已经从所有`.postTag`使用 jquery中创建了一个字符串

```
sample:
    <span class='postTag'>Jquery</span>
    <span class='postTag'>php</span>
    <span class='postTag'>mysql</span> 
```

**输出 ：**

```
<input type='hidden' id='allInsertedTags' value='Jquery,php,mysql' /> 
```

*谢谢你;D*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:26:00.393

试试这个：

```
$("span.postTag").map(function() { return $(this).text(); }).get().join(", "); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:26:13.637

```
var val = $('.postTag').map(function () { return $(this).text(); }).get().join(', ');​
$('#allInsertedTags').val(val); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T10:27:13.900

[JSF中：](http://jsfiddle.net/qwtJx/)

```
strings = []
$.each($(".postTag"), function(k,v) {
   strings.push($(this).text())            
})
join = strings.join(",")
$("<input>").attr({
type: "hidden",
id: "allInsertedTags",
value: join
}).appendTo("body") 
```

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T10:26:32.803

使用[`.text()`](http://api.jquery.com/text/)来自 jQuery 的函数。

# java - Spring Data MongoDB 存储库查询连接如何工作？

> ID：12121139
> 
> 赞同：2
> 
> 时间：2012-08-25T10:22:32.390
> 
> 标签：java, spring-data, spring-data-mongodb

当我创建一个 Spring Data 存储库的方法时，`findByName(…)`一切正常。但是当使用`findByField1AndName(…)`Spring Data 时，MongoDB 只为最后一个参数生成查询：

```
{ name : 'qwerty' } 
```

但我预计它会产生

```
{ field1 : 'something', name : 'querty' } 
```

有什么问题？请帮忙。

UPD1：如果有人遇到这样的问题，您可以使用@Query 注解手动构建您的查询，示例如下：

```
@Query("{ region: ?0, product: ?1, direction: ?2, deliveryCondition: ?3, sortament: ?4}")
QuotationKey findByRegionAndProductAndMarketDirectionAndDeliveryConditionAndSortament(
        Geography region, Product product, MarketDirection direction,
        DeliveryCondition deliveryCondition, Sortament sortament); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:15:51.227

不知道我是否遗漏了什么。我试过 1.0.3 和 1.0.4 还是不行。现在唯一的工作版本看起来像 1.0.1

当我尝试使用 1.0.3 和 1.0.4 的 findByZipCodeAndName 之类的东西时，这就是我在日志中看到的

```
MongoQueryCreator [DEBUG] Created query Query: { "zipCode" : "test"}, Fields: null, Sort: null 
```

使用 1.0.1 它可以按预期工作：

```
MongoQueryCreator [DEBUG] Created query { "zipCode" : "test" , "name" : "blah"} 
```

显然在新版本中只有第一个字段被解释和查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T10:59:54.300

您似乎偶然发现了1.0.2 和 1.1.M1 中存在的[错误。](https://jira.springsource.org/browse/DATAMONGO-469)修复程序已经发布了一段时间，因此升级到最新版本（1.0.4、1.1 RC1）应该可以解决问题。

# c - 面试：删除链表中的一个节点

> ID：12121141
> 
> 赞同：2
> 
> 时间：2012-08-25T10:23:30.270
> 
> 标签：c, linked-list

节点删除的这种实现是否有效，还是我失败了？

```
void remove_node(node *p)
{
    node **i = &node_list;

    for (;(*i) != NULL && ((*i) != p); *i = ((*i)->next)) ;

    if (*i != NULL) 
    {
      (*i) = (*i)->next;
    }

    if (p != NULL) 
    {
      free(p);
    }
} 
```

顺便说一句，据我所知，在我看到的每个从列表中删除节点的算法中，都有一个变量应该保留前一个指针。这个实现缺少这个......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:30:34.913

不，它不起作用。（是的，我知道，我作弊了——最初我说是作弊的）。

作为面试问题的答案，我首先列出假设：

*   node_list 开始有效（并且正确地以 NULL 终止）
*   它是一个单链表
*   节点是动态分配的

问题是：循环将在`*i == p`. 它需要在何时停止`*i->next == p`- 然后它几乎可以工作，但如果 p 是列表中的第一个节点，仍然会出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:34:45.810

您的程序中的错误是

1.  头指针（node_list）不会指向第一个元素，它会指向旁边的元素`p`
2.  `(*i) = (*i)->next`- 这是错误的。应该更新前一个节点的下一个指针。

下面更新的逻辑可以正常工作

```
void remove_node(node *p) 
{     
    node *i = node_list;      
    node *previous_node = NULL;

    if((NULL == p) || (NULL == node_list))
    {
        return;
    }

    for (; (i != NULL) && (i != p); i = i->next) 
    {
        previous_node = i;
    }

    if (i != NULL)      
    {       
        if(NULL == previous_node) // `p` is the first node
        {
            node_list = i->next;
            free(i);
        }
        else //`p` is not the first node
        {
            previous_node->next = i->next;     
            free(i);
        }
    }      
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:30:51.717

`node_list`我认为这将与不会指向列表开头的副作用一起工作。所以头节点需要存储在其他一些变量中。

BTW，你试过吗？你得到了什么？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T10:51:49.647

假设`parameter p as pArg`
**After for 循环：-**

```
for (;(*i) != NULL && ((*i) != p); *i = ((*i)->next)) ; 
```

> *i=pArg [如果节点 pArg 存在于链表中](case 1) or *i=NULL(case 2)

**首先如果：-**

```
 if (*i != NULL) 
    {
      (*i) = (*i)->next;
    } 
```

> p=pArg->next（案例 1）并且在（案例 2）中没有操作

**第二个如果：-**

```
if (p != NULL) 
    {
      free(p);
    } 
```

> 免费（pArg->next）；（案例1）；并且在（情况 2）中没有操作（如果 pArg 确实是 LL 中的一个节点）

*您删除了 pArg 指向的节点，而**不是 pArg**本身*。

做一点改变：-

```
node *prevp=NULL;

for (;(*i) != NULL && ((*i) != p); *i = ((*i)->next))
{prevp=*i;} 

if (*i != NULL) 
    {
      prevp->next = (*i)->next;
    } 
```

# xml - 定制的 Qt 助手：内容未显示

> ID：12121146
> 
> 赞同：2
> 
> 时间：2012-08-25T10:23:59.673
> 
> 标签：xml, qt, documentation, assistant

我打算创建一个定制的 Qt 助手，以便在我自己的应用程序中提供帮助。
我遵循了关于该主题的 Qt 文档。启动助手时，目录和所有关键字都可用，但我的内容未显示。

谁能发现我在这个精简版中做错了什么？

**测试.qhp：**

```
<?xml version="1.0" encoding="UTF-8"?>
<QtHelpProject version="1.0">
  <namespace>test</namespace>
  <virtualFolder>doc</virtualFolder>

  <filterSection>
    <toc>
      <section title="test" ref="index.html">
      </section>
    </toc>

    <keywords>
      <keyword name="Test" ref="index.html"/>
    </keywords>

    <files>
      <file>index.html</file>
    </files>

  </filterSection>
</QtHelpProject> 
```

**测试.qhcp：**

```
<?xml version="1.0" encoding="UTF-8"?>
<QHelpCollectionProject version="1.0">
  <assistant>
    <title>test</title>
    <!--     <applicationIcon>images/handbook.png</applicationIcon> -->
    <cacheDirectory>test/doc</cacheDirectory>

    <startPage>qthelp://test/doc/index.html</startPage>

    <aboutMenuText>
      <text>About test</text>
    </aboutMenuText>

    <enableDocumentationManager>false</enableDocumentationManager>
    <enableAddressBar>false</enableAddressBar>
    <enableFilterFunctionality>false</enableFilterFunctionality>
  </assistant>

  <docFiles>
    <generate>
      <file>
        <input>test.qhp</input>
        <output>test.qch</output>
      </file>
    </generate>
    <register>
      <file>test.qch</file>
    </register>
  </docFiles>
</QHelpCollectionProject> 
```

**索引.html：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html>
  <head>
    <title>Test title</title>
  </head>
  <body>
    <h1>index</h1>
    This is the index page
  </body>
</html> 
```

我使用创建 qhc 文件`qcollectiongenerator test.qhcp -o test.qhc`

当我使用 打开助手时`assistant -collectionFile test.qhc`，我只看到一个空白页面，而不是`index.html`的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:34:48.010

这是由 Qt 助手中的错误引起的：[https ://bugreports.qt-project.org/browse/QTBUG-24110](https://bugreports.qt-project.org/browse/QTBUG-24110)

html 代码至少需要 512 字节长。

# apache - apache mod_proxy 重定向无法正常工作

> ID：12121148
> 
> 赞同：1
> 
> 时间：2012-08-25T10:24:16.253
> 
> 标签：apache, mod-proxy

我在端口 8081 上启动了小型 servlet 应用程序。

我通过 apache mod_proxy 做了反向代理，如下所示：

```
<IfModule mod_proxy.c>
<Proxy *>
    Order allow,deny
    Allow from all
</Proxy>

ProxyVia On

ProxyPass /my_app/ http://localhost:8081/
ProxyHTMLURLMap http://localhost:8081 /my_app

<Location /my_app/>
    ProxyPassReverse /
    ProxyHTMLEnable On
    ProxyHTMLURLMap / /my_app/
    RequestHeader unset Accept-Encoding
</Location>
</IfModule> 
```

这里的问题是，如果我从我的应用程序中重定向，例如。表单 /exp1 到 /exp2 浏览器将从 /my_app/exp1 重定向到 /exp2 而不是 /my_app/exp2。

我如何告诉 mod_proxy 在每个重定向请求上添加 /my_app/ 。

# c# - Monitor.Pulse & Wait - 意外行为

> ID：12121151
> 
> 赞同：5
> 
> 时间：2012-08-25T10:24:28.600
> 
> 标签：c#, locking, monitor

> [http://www.codeproject.com/Articles/28785/Thread-synchronization-Wait-and-Pulse-demystified](http://www.codeproject.com/Articles/28785/Thread-synchronization-Wait-and-Pulse-demystified)
> 
> 队列：
> 
> 就绪队列是等待特定锁的线程的集合。Monitor.Wait 方法引入了另一个队列：等待队列。这是必需的，因为等待 Pulse 与等待获取锁不同。和就绪队列一样，等待队列也是先进先出的。
> 
> 推荐模式：
> 
> 这些队列可能导致意外行为。当 Pulse 发生时，等待队列的头部被释放并被添加到就绪队列中。但是，如果就绪队列中还有其他线程，它们将在被释放的线程之前获得锁。这是一个问题，因为获取锁的线程可以改变脉冲线程所依赖的状态。解决方案是在 lock 语句中使用 while 条件

*Q = 队列。

由此，我明白当我打电话时`Pulse`，它会在结束之前做两件事。首先，它将等待 Q 中的一个线程移到就绪 Q。其次，它让 Ready Q 中的一个线程（不知道该线程是谁）获得锁；它不关心谁获得了锁（来自等待 Q 的线程或出于某种原因在就绪 Q 中的线程）。

如果我是对的，那么**为什么**`while`要在帮助解决问题之前放置一个`Monitor.Wait`（问题 - 即使来自等待 Q 的线程没有获得锁，脉冲也会结束）？

**一个**。**告诉我我对 . 的目的是否正确`Monitor.Pulse`。**

**乙**。**为什么我需要在`while`前面放一个`Monitor.Wait`**

以下答案的完整代码：

```
class Program
{
    static Queue<int> queue = new Queue<int>();
    static object someMonitor = new object();

    static void Main(string[] args)
    {
        Thread Thread1 = new Thread(WorkAlltheTime);
        Thread1.Name = "Thread1";
        Thread Thread2 = new Thread(WorkAlltheTime);
        Thread2.Name = "Thread2";
        Thread Thread3 = new Thread(WorkOnce);
        Thread3.Name = "Thread3";
        Thread1.Start();
        Thread2.Start();
        Thread.Sleep(1000);
        Thread3.Start();
        Console.ReadLine();
    }

    static void WorkAlltheTime()
    {
        Console.WriteLine("Came in to Ready Q: " + Thread.CurrentThread.Name);
        lock (someMonitor)
        {
            Console.WriteLine("Came out from Ready Q: " + Thread.CurrentThread.Name);
            // Broken!
            while (queue.Count == 0)
            {
                Console.WriteLine("Came in to Waiting Q: " + Thread.CurrentThread.Name);
                Monitor.Wait(someMonitor);
                Console.WriteLine("Came out from Waiting Q: " + Thread.CurrentThread.Name);
            }
            queue.Dequeue();
            Console.WriteLine("Thread: "+Thread.CurrentThread.Name+" Pulled Out");
        }
    }

    static void WorkOnce()
    {
        lock (someMonitor)
        {
            queue.Enqueue(1);
            Monitor.Pulse(someMonitor);
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T10:41:48.467

想象一下，您正在尝试编写一个生产者/消费者队列——您`Pulse`每次生产一个项目，而消费者需要等到有一个项目要消费。你会写这样的代码：

```
Foo item;
lock(someMonitor)
{
    while (queue.Count == 0)
    {
        Monitor.Wait(someMonitor);
    }
    item = queue.Dequeue();
}
// Use the item 
```

假设您*没有*while 循环，而是写道：

```
Foo item;
lock(someMonitor)
{
    // Broken!
    if (queue.Count == 0)
    {
        Monitor.Wait(someMonitor);
    }
    item = queue.Dequeue();
}
// Use the item 
```

现在假设您有一个线程已经在等待，然后另一个线程就在 lock 语句之前……然后生产者向监视器发出脉冲（当然，并向队列中添加一个项目）。

到那时，甚至还没有获得锁的线程将是第一个获得锁的线程是完全可行的......此时“等待”线程获得锁时，队列将是又空了。只有一个`if`语句，没有循环，当队列为空时，你最终会出队，这会失败。

使用 while 循环，您将再次等待，直到生成下一个项目，这是您真正想要的。

# javascript - 同步使用 requirejs

> ID：12121155
> 
> 赞同：1
> 
> 时间：2012-08-25T10:25:05.943
> 
> 标签：javascript, requirejs

我有一个已优化为单个文件的 requirejs 项目，我正在同步加载该文件。代码按预期加载，但模块仍在异步加载（它们直到加载过程的后期才可用）并且它导致一些我希望它可以使用的遗留代码出现问题。

鉴于下面的代码，有没有办法让`main-build`' 方法在加载后立即可用，在加载之前`legacy_code.js`？

```
<script type="text/javascript" src="/scripts/vendor/require.js"></script>
<script type="text/javascript" src="/scripts/main-build.js"></script>

<!-- At this point, the code is set up and it will be invoked later -->
<!-- ...but the next file requires to access methods in the modules.-->

<script type="text/javascript" src="/script/legacy_code.js"></script> 
```

如果最坏的情况发生，我可以编写自己的`define()`and版本`require()`（这也将释放大量带宽，因为它需要做的就是编目和调用模块），但我希望有一个内置的方法去做这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T16:13:26.580

在这里回答我自己的问题。看了很久，我看不到任何同步加载Requirejs代码或加载后立即调用模块的方法。所以我最终写了一些代码来临时覆盖`require`和`declare`方法。它适用于我的用例，但如果其他人需要它可能需要更改。我确信它可以比现在进行更多优化，但它确实有效。

你可以[在 GitHub 上](https://github.com/scriptfoundry/require-synchronous)找到代码，我会尽力维护。

此时的代码如下所示：

```
(function () {
    var self = {},
        originalDefine = window.define,
        originalRequire = window.require,
        modules = [];

    var define = function (id, deps, fn) {
        if (id !== 'requireLib' && id !== 'text') {
            modules.push({"id": id, "deps": deps, "fn": fn});
        }
    };

    var require = function (deps, fn) {
        var sortedModules = [],
            unsortedModules = [],
            resolvedDeps = {},
            maxAttempts = 1000,
            module,
            dep,
            depList,
            canAdd,
            i,
            j;

        unsortedModules = ([]).concat(modules);
        while (unsortedModules.length > 0 && --maxAttempts > 0) {

            for (i = unsortedModules.length - 1; i >= 0; i--) {
                canAdd = true;
                module = unsortedModules[i];

                for (j = 0; j < module.deps.length; j++) {
                    dep = module.deps[j];
                    if (resolvedDeps[dep] === undefined) {
                        canAdd = false;
                        break;
                    }
                }
                if (canAdd) {
                    resolvedDeps[module.id] = module;
                    sortedModules.push(unsortedModules.splice(i,1)[0]);
                }
            }
        }

        for (i = 0; i < sortedModules.length; i++) {
            module = sortedModules[i];
            depList = [];
            for (j = 0; j < module.deps.length; j++) {
                depList.push(resolvedDeps[module.deps[j]]);
            }
            resolvedDeps[module.id] = module.fn.apply(this, depList);
        }

        depList = [];
        for (i = 0; i < deps.length; i++) {
            depList.push(resolvedDeps[deps[i]]);
        }

        fn.apply(this, depList);

        window.define = originalDefine || function () {};
        window.require = originalRequire || function () {};
    };

    window.define = define;
    window.require = require;
    window.require.config = function() {};

    return self;
} ()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:33:01.133

做到这一点的最简单方法，无需重写`define()`and `require()`，肯定只是将[您的旧代码包装在 AMD 中](https://stackoverflow.com/questions/8675874/using-non-amd-compatible-javascript-module-with-require-js)，并将您的`main-build.js`模块定义指定为依赖项。

我知道这在技术上不是“同步的”，但它应该可以实现您正在寻找的东西 - 遗留代码仅在加载了 require 模块后才被调用。

# sqlite - 传递给`sqlite3_bind_text`、`sqlite3_step`、`sqlite3_reset`后，我可以释放（或重用）一个字符串吗？

> ID：12121158
> 
> 赞同：3
> 
> 时间：2012-08-25T10:25:42.153
> 
> 标签：sqlite

我有一个字符串缓冲区，我将其重新用于多个查询。我想要：

1.  分配字符串
2.  传递给`sqlite3_bind_text`
3.  执行语句`sqlite3_step`
4.  重置语句`sqlite3_reset`
5.  转到 2

我想我应该没问题，但是有人可以确认 SQLite 在此之后不需要指向字符串的指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:12:00.690

`sqlite3_reset()`例程不会清除绑定。有关详细信息，请参阅[SQLite 绑定文档](http://www.sqlite.org/c3ref/bind_blob.html)。如果再次执行该语句，绑定将被重新使用。

您可以假设释放字符串是安全的，只要语句在单步执行之前再次绑定参数。为了安全起见，您可以在释放分配的字符串之前将参数绑定到静态字符串。

基于以下评论和细化要求的附录：

如果要重用缓冲区而不是释放它，最安全的方法是在 sqlite_reset 之后修改缓冲区，然后在下一个 sqlite3_step 之前使用修改后的缓冲区调用 sqlite3_bind_text。在这种情况下，[用作`SQLITE_STATIC`绑定类型](http://sqlite.org/c3ref/c_static.html)（的第五个参数`sqlite3_bind_text`）。

使用`SQLITE_TRANSIENT`强制 sqlite 复制字符串；使用该选项，您可以在调用`sqlite3_bind_text`. 在这种情况下，这是不必要的；通过消除内存分配，使用`SQLITE_STATIC`将更有效。

# android - Android中的导航栏：大小和位置

> ID：12121162
> 
> 赞同：3
> 
> 时间：2012-08-25T10:26:02.057
> 
> 标签：android, navigationbar

我目前正在为 Android 开发一个 OpenGL 应用程序。到目前为止一切正常，但导航栏有点令人不安......

有没有办法找出导航栏在横向时是像我的银河系一样在右侧，还是像在平板电脑上一样在底部。另外我需要导航栏的高度和宽度。

有谁知道我怎么能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T18:05:09.100

我找到了解决我的问题的方法：

```
 Display display = getWindowManager().getDefaultDisplay();
    Point size = new Point();
    display.getSize(size); 
    width = size.x;
    height = size.y; 
```

在这部分代码之后，width和height包含了没有导航栏或通知栏的高度和宽度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-26T10:38:47.127

我是这样做的：

```
boolean hasMenuKey = ViewConfiguration.get(getApplicationContext())
                .hasPermanentMenuKey(); 
```

//如果没有菜单键则有导航栏

```
if (!hasMenuKey && Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN) {
         DisplayMetrics dm = new DisplayMetrics();
            getWindowManager().getDefaultDisplay().getMetrics(dm);

            if (dm.heightPixels%10!=0) {
            //navigation bar is on bottom
            } else {
               //navigation bar is on right side
            }

        } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-07T07:23:41.627

在这里发帖是为了那些最终在这里寻找优雅处理导航栏和状态栏的方法的人的利益。

参考[这篇文章](https://medium.com/me/stats/post/88b4e26ba3ff)。

正如许多类似问题所建议的那样，例如[this](https://stackoverflow.com/a/29938139/9640177)、[this](https://stackoverflow.com/a/26118045/9640177)、[this](https://stackoverflow.com/a/50775459/9640177)和[this](https://stackoverflow.com/a/41057024/9640177)，仅获取导航栏高度可能还不够。我们需要考虑*1\. 导航栏是否存在， 2\. 是在底部，还是在右侧或左侧， 3\. 应用程序是否以多窗口模式打开。*

**有一个简单的单行解决方案**

```
android:fitsSystemWindows="true" 
```

或以编程方式

```
findViewById(R.id.your_root_view).setFitsSystemWindows(true); 
```

您还可以通过以下方式获得根视图

```
findViewById(android.R.id.content).getRootView();
or
getWindow().getDecorView().findViewById(android.R.id.content) 
```

有关获取根视图的更多详细信息，请参阅 - [https://stackoverflow.com/a/4488149/9640177](https://stackoverflow.com/a/4488149/9640177)

# android - 如何在android中调整条之间的宽度

> ID：12121175
> 
> 赞同：-2
> 
> 时间：2012-08-25T10:27:22.513
> 
> 标签：android, bar-chart

![在此处输入图像描述](../Images/1f5f7de276be6e3d86e6ddb227b395e1.png)

谁能告诉我如何调整条之间的宽度？请让我知道java代码。上图会让你清楚。

提前致谢！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T06:33:16.967

如果您使用的是 AChartEngine，请使用以下`setBarSpacing(value)`方法`XYMultipleSeriesRenderer`：

```
renderer.setBarSpacing(0.5); 
```

# iphone - 如何将 navigationController 添加到已经制作的基于标签栏的应用程序中？

> ID：12121177
> 
> 赞同：-1
> 
> 时间：2012-08-25T10:27:55.167
> 
> 标签：iphone, uinavigationcontroller, uitabbarcontroller

我制作了一个包含 3 页的 tabBarController 应用程序。现在我想将导航控制器添加到其中。

该应用程序具有以下类和

```
(1) appDelegate.h, appDelegate.m
(2) first.h, first.m, first.xib
(3) second.h, second.m, second.xib
(4) third.h, third.m, third.xib
(5) MainWindow.xib 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:33:16.057

这里很简单。只需像使用 UItabBarController 一样使用一个 UINavigation Controller。每当您想添加导航控制器时，只需将其分配给 mainWindow，然后您就可以通过将其添加到 mainWindow 来回到您的 tabBarController。

当您想从 tabBarController 删除到导航控制器时，请使用以下代码。

```
appDelegate.window.rootViewController = self.navigationController; 
```

当您想从导航控制器中删除到 tabBarController 时，请使用以下代码。

```
appDelegate.window.rootViewController = self.tabBarController; 
```

如果您还有其他问题，请告诉我？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T14:15:02.280

创建`first.h`as`navigationController`并将其分配到 tabcontroller 作为 viewcontroller 之一

# javascript - 启用 JavaScript 的过度滚动

> ID：12121179
> 
> 赞同：5
> 
> 时间：2012-08-25T10:28:29.097
> 
> 标签：javascript, overscroll

可以制作平滑的滚动动画，从网页的一个部分转到另一部分。如今，一些浏览器（例如 Mac 版 Chrome）支持“过度滚动”，并且通常滚动涉及过度滚动。

所以传统的滚动动画在没有过度滚动的情况下看起来很人工。有没有办法用 JavaScript 过度滚动网页以增强传统的滚动动画？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:33:00.940

是的，您可以制作反弹动画。

我假设您的意思是反弹 [https://ux.stackexchange.com/questions/13183/name-of-the-touch-ui-overscroll-feature](https://ux.stackexchange.com/questions/13183/name-of-the-touch-ui-overscroll-feature)

我刚刚建造了一个快速/越野车。

```
var threshold = 400,
    wrap = document.getElementById('wrap'),
    wrapHeight = wrap.offsetHeight,
    pageHeight = (wrapHeight + threshold);

wrap.style.height = pageHeight+'px';

window.addEventListener('scroll', function(){
    var pageY = window.pageYOffset;

    if (pageY > wrapHeight - threshold*1.5) {
        wrap.style.height = wrapHeight+'px';
    }
    if (wrap.offsetHeight === wrapHeight) {
        if ((pageY > wrapHeight - threshold*2.5) ) {
            wrap.style.height = pageHeight+'px';
        }
    }
}); 
```

还有[https://github.com/andrewrjones/jquery.bounceback](https://github.com/andrewrjones/jquery.bounceback)

我的代码背后的基本思想：你让页面更大以适应动画。然后在从底部滚动后重置页面高度。

要实际制作您需要添加的动画：#wrap { -webkit-transition: height .5s; }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:50:04.023

有[这个项目](https://github.com/azoff/Overscroll)提供了一个`jQuery`过度滚动插件。这可能是您正在寻找的东西。[此页面上的](http://www.azoffdesign.com/overscroll)演示。

# forms - Symfony2 自定义表单错误信息

> ID：12121180
> 
> 赞同：7
> 
> 时间：2012-08-25T10:28:31.797
> 
> 标签：forms, symfony, customization, messages

您能帮我了解如何使用 Symfony2 自定义表单中的错误消息吗？我想更改 HTML 布局，添加 div、class 等...

阅读该指南，它提供了一段代码以放入一个名为的文件中，`fields_errors.html.twig`但它没有说明该文件的放置位置以及是否需要一些额外的配置。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T16:20:25.410

您必须将模板放在`Resourses/views/`捆绑包的文件夹中。例如，

```
{# Vendor/YourBundle/Resourses/views/form_fields.html.twig #}

{% extends 'form_div_layout.html.twig' %}

{% block form_errors %}
    {# your form error template #}
{% endblock form_errors %}

{# other customized blocks #} 
```

然后在您的表单页面模板中，

```
{% extends your:page:layout %}

{% form_theme form  'VendorYourBundle::form_fields.html.twig' %}

 {{ form_errors(form.field) }}
 {# ..... #} 
```

有关更多选项和实现参考检查[表单主题食谱条目](http://symfony.com/doc/current/cookbook/form/form_customization.html#cookbook-form-theming-methods)和[默认字段布局实现](https://github.com/symfony/symfony/blob/master/src/Symfony/Bridge/Twig/Resources/views/Form/form_div_layout.html.twig#L271)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:55:02.637

您可以在模板中一次自定义所有错误消息：

```
<div class="your_new_class">
    {{ form_errors(form) }}
</div> 
```

或单独（例如，如果您的字段是**标题**）

```
<div class="your_new_class">
    {{ form_errors(form.task) }}
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-11-16T17:25:30.050

在 symfony3 中首先调用 config.yml 中的主题形式

```
twig:
debug:            "%kernel.debug%"
strict_variables: "%kernel.debug%"
form_themes: 
    - 'YourBundle:FormTheme:error.html.twig' 
```

Twig error.html.twig 示例

```
{% block form_errors %}
{% spaceless %}
    {% if errors|length > 0 %}
   <div class="alert alert-danger">
        {% for error in errors %}
     <strong>{{ error.message }}</strong>
        {% endfor %}
    </div>
    {% endif %}
{% endspaceless %}
{% endblock form_errors %} 
```

# javascript - 鼠标悬停时的jQuery透明图像描述幻灯片动画

> ID：12121183
> 
> 赞同：0
> 
> 时间：2012-08-25T10:28:51.937
> 
> 标签：javascript, jquery, html, css, animation

好的，我们开始吧，我有这个小提琴给你：

## [**演示**](http://jsfiddle.net/3KK57/)

它没有按预期工作，所以我将描述我需要什么以及问题所在。目标是悬停框时的滑动描述。

这是我想要的，并且***强调了所有不起作用的东西***：

*   每个盒子都有一个图像、一个标题和一个描述。除了描述之外的所有内容都是可见的。
*   当鼠标悬停在一个盒子上时，标题/描述会滑到***盒子的一半高度***，这使得描述可见。***盒子的整体高度没有变化。***
*   ***图像在框的范围之外应该是不可见的***。
*   ***快速进出鼠标时，动画不应“跳”到最后。***

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:29:03.837

试试这个，不确定，但我认为这是你的答案。

我把小提琴链接[点击这里进行演示](http://jsfiddle.net/krishna_aim24/CBEmW/1/)

和JS代码：

```
jQuery(function() {
    $('.box').hover(function() {
        var _tst = this;
        jQuery(this).find(".text").animate({
        "height": jQuery(_tst).find(".text").height() + jQuery(_tst).find(".desc").height()
    }, {
        duration: 600,
        queue: false
    });
    jQuery(this).find(".img").animate({
        "top": -jQuery(_tst).find(".desc").height()
    }, {
        duration: 600,
        queue: false
    });
}, function() {
    jQuery(this).find(".text").animate({
        "height": "30px"
    }, {
        duration: 600,
        queue: false
    });
    jQuery(this).find(".img").animate({
        "top": 0
    }, {
        duration: 600,
        queue: false
    });
}); 
```

});​</p>

并做了一些CSS更改。 [单击此处查看更改](http://jsfiddle.net/krishna_aim24/CBEmW/1/)

# c# - Dotnetnuke 6.2 编辑用户和角色模块

> ID：12121186
> 
> 赞同：0
> 
> 时间：2012-08-25T10:29:44.727
> 
> 标签：c#, asp.net, dotnetnuke, dotnetnuke-module

我想在用户注册后注入一些代码。我在 Admin/Security/ManagerUsers cmdRegister_Click 方法中找到了代码。

但是要连续运行我的代码，我需要编译这个模块。我怎么能这样做，因为这个模块没有 .csproj ？

感谢重播，我真的需要它才能正常工作并且没有办法解决这个问题。我正在使用最新的社区版本的 dnn。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:37:11.730

如果要更改核心，则需要使用 dnn 源代码包，但是...更改 dnn 核心可能不是最好的主意，如果您想升级，则需要重新进行更改。根据您的需要，您可以购买第三方模块（即从 datasprings 动态注册）。该模块能够运行任何类型的 sql 脚本或重定向到页面等。

# c++ - 在没有 c++11 的情况下擦除地图最后插入元素的正确方法是什么？

> ID：12121188
> 
> 赞同：1
> 
> 时间：2012-08-25T10:29:56.693
> 
> 标签：c++, map

这个问题是不言自明的。但补充假设：`map<int,int>`至少插入 10 个元素。删除最后插入的元素的正确方法是什么？

插入的最后一个元素是指，不是地图的最后一个元素，而是我上次插入元素时插入的元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T10:35:17.540

将迭代器保存到最后插入的元素。地图中的元素按键值排序，而不是按插入顺序。

`map::insert`返回一个指向最后一个插入元素的迭代器（以及一个`bool`指示是否发生了插入）。

```
auto p = yourMap.insert(k,v);
if(p.second) {
    lastInsert = p.first;
} else {
    //Ambiguous. Depending on what you want
    //this could be an error, or you update the value and the iterator,
    //or you update just the value.
} 
```

[http://en.cppreference.com/w/cpp/container/map/insert](http://en.cppreference.com/w/cpp/container/map/insert)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-25T10:33:23.310

没有 API 函数可以做到这一点。如果跟踪插入元素的顺序很重要，那么您将必须进行 a `vector<map<...>::iterator>`of 插入，并在从`map`.

你如何做到这一点取决于你的代码的结构、代码的位置`map`以及管理与它的交互的方式。

# android - 无法在android中将数据库从版本2降级到1

> ID：12121191
> 
> 赞同：-3
> 
> 时间：2012-08-25T10:30:39.143
> 
> 标签：android, database

我有点麻烦。我已将数据库数据版本设置为 2 并在我的应用程序中卸载后重新安装应用程序并尝试将其命名为 3 但问题未解决。请帮助我。我在我的应用程序中使用数据库 .db 文件。

```
private static final int DATABASE_VERSION = 2; 
```

但每次都会出现以下异常：

```
"cant downgrade database from version 2 to 1" 
```

请需要快速帮助....

希望我能得到肯定的答复。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:04:42.493

Android 不提供与升级相同的数据库降级机制。

因此，您要么使用该版本号（这只是一个让您的应用程序知道数据库架构是最新的数字还是没有，仅此而已）。或者您应该将您的数据库内容导出到即 SD 卡，告诉用户完全删除您的应用程序（因此数据库也被删除）。然后用户应全新安装您的应用程序，该应用程序将检查 sd 卡上的数据库备份，将其导入并删除或标记导入）。

不过，不知道你为什么这么麻烦 - 它只是版本号。

# string - 对单元格向量进行操作并将其插入单元格数组 MATLAB

> ID：12121198
> 
> 赞同：3
> 
> 时间：2012-08-25T10:32:24.420
> 
> 标签：string, matlab, cell-array

我正在使用的是一个单元阵列 M，比如 nxm 个单元。我在 d 列 colD 中阅读以编辑其中包含的字符串。

我使用 char(colD) 更改了这些单元格，现在有一个我已经完成编辑的字符串向量。使用 cell(colD) 转换回单元格我需要将向量插入到单元格数组中。有没有比循环更有效的方法？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:39:33.493

我想你想要的是：

```
newM = cellfun(@(x) char(x), M, 'UniformOutput', false) 
```

无耻地从@Ansari 窃取

# html - 打开链接时如何自动最大化窗口屏幕？

> ID：12121203
> 
> 赞同：1
> 
> 时间：2012-08-25T10:33:15.137
> 
> 标签：html, jsp

我想知道如何将浏览器设置为在打开链接时自动最大化窗口屏幕？

下面的示例代码：

```
<a href="http://www.w3schools.com"  target="_blank">Visit W3Schools</a> 
```

事情是它总是作为一个小屏幕打开。我想要的是始终全屏。我使用 JSP 页面作为前端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:26:33.507

尝试这个

```
<html>
<head>
<title></title>
<script type="text/javascript">
function fullScreen(theURL) {
window.open(theURL, '', 'fullscreen=yes, scrollbars=yes,location=yes,resizable=yes');
}
</script>
</head>

<body>
<a href="javascript:void(0);" onclick="fullScreen('http://www.w3schools.com');">Visit W3Schools</a>
</body>
</html> 
```

# ios - 我怎样才能得到uiimage的原始nsdata？

> ID：12121204
> 
> 赞同：1
> 
> 时间：2012-08-25T10:33:17.143
> 
> 标签：ios, uiimage, nsdata

在我的应用程序中，用户可以从相册或相机中选择一张图片，我可以在其中获得 uiimage 表示。由于相册可能有来自网络的图片，因此文件类型不仅是 jpg。然后我需要将它发送到服务器而不进行转换。这里我只能使用nsdata。
我知道 UIImageJPEGRepresentation 和 UIImagePNGRepresentation，但我认为这两种方法可以转换原始图像。也许当质量设置为 1 UIImageJPEGRepresentation 可以获得原始图片？
有什么方法可以获取原始的uiimage nsdata？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T11:38:53.703

您可以使用`ALAssetsLibrary`and`ALAssetRepresentation`来获取原始数据。例子：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSURL *imageURL = [info objectForKey:UIImagePickerControllerReferenceURL];
    ALAssetsLibrary* library = [[ALAssetsLibrary alloc] init];
    [library assetForURL:imageURL resultBlock:^(ALAsset *asset) {
        ALAssetRepresentation *repr = [asset defaultRepresentation];
        NSUInteger size = repr.size;
        NSMutableData *data = [NSMutableData dataWithLength:size];
        NSError *error;
        [repr getBytes:data.mutableBytes fromOffset:0 length:size error:&error];
            /* Now data contains the image data, if no error occurred */
    } failureBlock:^(NSError *error) {
        /* handle error */
    }];
} 
```

但是有一些事情需要考虑：

*   `assetForURL:`异步工作。
*   在设备上，使用`assetForURL:`会导致一个确认对话框，这可能会激怒用户：

> “您的应用程序”想使用您当前的位置。这允许访问照片和视频中的位置信息。

*   如果用户拒绝访问，`assetForURL:`则调用失败块。
*   下次您使用此方法时，`assetForURL:`将失败而无需再次询问用户。仅当您在系统设置中重置位置警告时，才会再次询问用户。

因此，您应该准备好此方法失败并使用`UIImageJPEGRepresentation`or`UIImagePNGRepresentation`作为后备。但在这种情况下，您将无法获得原始数据，例如缺少元数据（EXIF 等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-11T17:22:24.900

在 iOS 8.0+ 上，在资产中找到相应资产后使用 PHImageManager.default().requestImageData()（您可以使用 PHAsset.fetchAssets() 获取资产。

在我对非常相似的问题[如何上传取自 UIImagePickerController 的图像](https://stackoverflow.com/questions/12138484/how-to-upload-image-that-was-taken-from-uiimagepickercontroller)[的回答](https://stackoverflow.com/a/41589063/2650588)中查看更多信息和示例代码。

# javascript - 检查具有特定标题的浏览器选项卡是否已存在

> ID：12121205
> 
> 赞同：0
> 
> 时间：2012-08-25T10:33:18.460
> 
> 标签：javascript, jquery

假设我的浏览器中有多个选项卡...如何检查具有特定标题的浏览器选项卡是否已经存在？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:36:49.583

一个选项卡中的 Javascript 无法从另一个选项卡获取任何信息。

否则，窃取私人数据和金钱就太容易了。

# java - How to change the Look and Feel of a JDesktopPane?

> ID：12121207
> 
> 赞同：2
> 
> 时间：2012-08-25T10:33:36.660
> 
> 标签：java, swing, user-interface, look-and-feel, jdesktoppane

I set the LAF of my project to the System default look and feel. Now I'm trying to put a JDesktopPane inside one of my panels but I want all my internal frames to use the java default LAF. Is there a way to change it without changing the LAF of the whole project?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T11:49:52.800

```
import java.awt.BorderLayout;
import javax.swing.JComponent;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JLabel;
import javax.swing.UIManager;
import javax.swing.plaf.DesktopPaneUI;

public class AddingInternalFramestoaJDesktopPane {
  public static void main(final String[] args) throws Exception {
    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    JFrame.setDefaultLookAndFeelDecorated(true);
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    JDesktopPane desktop = new JDesktopPane();
    desktop.setUI(new DesktopPaneUI() {
    @Override
        public void installUI(JComponent c) {
            // TODO Auto-generated method stub
            try {
                UIManager.setLookAndFeel("com.sun.java.swing.plaf.motif.MotifLookAndFeel");
            } catch (Exception e) {
                e.printStackTrace();
            }
            super.installUI(c);
        }   
    });
    JInternalFrame internalFrame = new JInternalFrame("Can Do All", true, true, true, true);
    desktop.add(internalFrame);
    internalFrame.setBounds(25, 25, 200, 100);
    JLabel label = new JLabel(internalFrame.getTitle(), JLabel.CENTER);
    internalFrame.add(label, BorderLayout.CENTER);
    internalFrame.setVisible(true);
    frame.add(desktop, BorderLayout.CENTER);
    frame.setSize(500, 300);
    frame.setVisible(true);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-28T12:58:59.897

[enter image description here](https://i.stack.imgur.com/SmJnX.png)
`deks.setUI(new DesktopPaneUI() { @Override public void installUI(JComponent c ) { // TODO Auto-generated method stub try { UIManager.setLookAndFeel("com.sun.java.swing.plaf.motif.MotifLookAndFeel"); } catch (Exception e) { e.printStackTrace(); } super.installUI(c); }
});`

> and with this some file needs to include

`import javax.swing.JDesktopPane;` `import javax.swing.UIManager;` `import javax.swing.plaf.DesktopPaneUI;`

> its important

`JDesktopPane deks=new JDesktopPane();`

# android - Android CalendarView：如何获取正确格式的日期？

> ID：12121214
> 
> 赞同：3
> 
> 时间：2012-08-25T10:35:02.450
> 
> 标签：android, date-format, calendarview

在过去的几天里，我一直在寻找从 android 4.0 的日历视图中获取“可读”日期的方法。我无法找到适合我的问题的解决方案或示例。我确实在几毫秒内得到了它，但不是日期格式。

我的问题是：我有一个日历视图，我想要用户选择的日期，在 logcat 中以日期格式 yy-mm-dd 显示。

我习惯了 android 2.2 的 datepicker，我对 calendarview 不熟悉，也找不到太多关于它的信息。有谁知道这个的解决方案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-11T16:47:38.337

好的，这里是如何做到这一点。当您触发您的日历视图活动或活动中的日历视图时，它会将日期设置为当前日期（即今天）。要获取此当前日期，只需使用`Calendar`java api 提供的对象来获取以下日期示例：

```
Calendar date = Calendar.getInstance();
// for your date format use
SimpleDateFormat sdf = new SimpleDateFormat("yy-MM-dd");
// set a string to format your current date
String curDate = sdf.format(date.getTime());
// print the date in your log cat
Log.d("CUR_DATE", curDate); 
```

要更改日期，您必须这样做

```
CalendarView myCalendar = (CalendarView) findViewById(R.id.myCalenderid);

myCalendar.setOnDateChangeListener(myCalendarListener);

OnDateChangeListener myCalendarListener = new OnDateChangeListener(){

public void onSelectedDayChange(CalendarView view, int year, int month, int day){

   // add one because month starts at 0
   month = month + 1;
   // output to log cat **not sure how to format year to two places here**
   String newDate = year+"-"+month+"-"+day;
   Log.d("NEW_DATE", newDate);
}
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-11-17T08:35:41.897

kandroidj 的回答有助于创建日期，但不是正确格式的日期。所以要格式化选定的日期：

```
calendarView.setOnDateChangeListener(new CalendarView.OnDateChangeListener() {

        @Override
    public void onSelectedDayChange(CalendarView view, int year, int month,
                                    int dayOfMonth) {
        final SimpleDateFormat sdf = new SimpleDateFormat("yyyy/MM/dd");
        Calendar calendar = Calendar.getInstance();
        calendar.set(year, month, dayOfMonth);
        String sDate = sdf.format(calendar.getTime());
        Log.d(TAG, "sDate formatted: " + sDate);
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-09T09:12:52.173

你应该使用[SimpleDateFormat](https://developer.android.com/reference/java/text/SimpleDateFormat)

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
String selectedDate = sdf.format(new Date(calendar.getDate())); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-02T11:48:00.853

```
long date = calenderView.getDate();
Calendar calendar = Calendar.getInstance();
calendar.setTimeInMillis(date);
int Year = calendar.get(Calendar.YEAR);
int Month = calendar.get(Calendar.MONTH);
int Day = calendar.get(Calendar.DAY_OF_MONTH);
//customize According to Your requirement
String finalDate=Year+"/"+Month+"/"+Day; 
```

# algorithm - 二次探测哈希表的限制

> ID：12121217
> 
> 赞同：5
> 
> 时间：2012-08-25T10:35:30.630
> 
> 标签：algorithm, data-structures, hashtable, quadratic, probing

我正在做一个程序来比较线性探测、二次探测和哈希表中的单独链接所需的平均和最大访问。

我已经完成了 3 个案例的元素插入部分。在从哈希表中查找元素时，我需要限制结束搜索。在单独链接的情况下，我可以在下一个指针为空时停止。对于线性探测，我可以在探测整个表（即表的大小）时停止。我应该使用什么作为二次探测的限制？桌子大小可以吗？

我的二次探测函数是这样的

```
newKey = (key + i*i) % size; 
```

其中 i 从 0 变化到无穷大。请帮我..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T10:54:47.737

对于此类问题`i`，分两块分析增长：

第一个间隔：`i`从`0`到`size-1`

在这种情况下，我暂时没有解决方案。希望会更新。

第二个区间：`i`从`size`到`infinity`

在这种情况下`i`可以表示为`i = size + k`，则

```
newKey = (key + i*i) % size 
       = (key + (size+k)*(size+k)) % size
       = (key + size*size + 2*k*size + k*k) % size
       = (key + k*k) % size 
```

所以可以肯定的是，我们将在`i`到达之后开始探测先前探测过的单元格`size`。所以你只需要考虑`i`从 0 到`size-1`. 因为休息只是一次又一次的同一个故事。

`What the story tells up to now:`一个简单的分析告诉我，我需要在大多数`size`时候进行探测，因为超出`size`时间我开始探测相同的细胞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T17:30:12.253

请参阅[此链接](http://research.cs.vt.edu/AVresearch/hashing/quadratic.php)。如果您的表大小是 2 的幂并且您正在使用重新探测函数 f(i)=i*(i+1)/2，则可以保证遍历整个表。如果你的表大小是一个素数，那么保证你至少遍历了一半的表。一般来说，您可以检查您是否在某个时候回到了原始点。如果发生这种情况，您需要重新散列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-11T03:49:15.797

在 Excel 中进行一些模拟之后，似乎迭代到 i = size / 2 将是所有需要测试的。这是在使用标准方法将顺序完美正方形添加到单散列位置时。

如果重新访问某个位置，您可以退出的答案不允许测试二次探针方法可能达到的所有可能位置，至少不适用于所有数组大小。（我测试了数组大小 21，发现 i=5 重新访问与 i=2 相同的位置，但 i=6 产生了以前未计算的位置。）

# android - 存储用户可访问的配置文件的最佳位置

> ID：12121224
> 
> 赞同：3
> 
> 时间：2012-08-25T10:36:44.600
> 
> 标签：android, configuration, preferences, configuration-files

我有一个项目，由四个不同平台的程序组成；它们都使用相同的基于 XML 的设置文件格式。我希望能够在应用程序之外手动修改/覆盖它。在 Windows、Windows Mobile 和 Linux 上，我使用的是“user.home”，但在 Android 上没有实现该别名。我正在考虑将其简单地放在下载目录中，但是，这感觉不对。

我不能是唯一一个需要这种功能的人。或者这不是Android方式？任何建议表示赞赏。

编辑：我对设置文件一直不可用（即移除 SD 卡）感到满意，它仅在应用程序启动时使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:44:03.753

将其存储在[`getExternalFilesDir()`](http://developer.android.com/reference/android/content/ContextWrapper.html#getExternalFilesDir%28java.lang.String%29). 这仅在设备具有外部存储时才有效。用户将能够访问它。

但是，请注意文档中的以下内容：

> 外部文件并不总是可用：如果用户在计算机上安装或移除外部存储，它们就会消失。有关存储状态的信息，请参阅环境 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:49:19.277

根据[Android 数据存储文档](http://developer.android.com/guide/topics/data/data-storage.html)，您有 5 个选项：

1.  共享偏好。默认情况下，这将使用文件`/data/data/your.package.name/preferences/user_preferences.xml`
2.  内部存储器。在这里你可以使用类似的东西`/data/data/you.package.name/user.home`
3.  外置储存。类似于内部存储`/mnt/sdcard/Android/data/your.package.name/user.home`，但如果用户删除存储卡文件将无法访问。
4.  SQLite 数据库。您可以将整个`user.home`文件存储在数据库 blob 中。
5.  网络连接。将用户的配置存储在云中。

# java - Google API 翻译返回错误

> ID：12121227
> 
> 赞同：1
> 
> 时间：2012-08-25T10:37:16.997
> 
> 标签：java, google-api

我有一部分使用google api translate的代码，我这样写我的代码

```
package pp;

import com.google.api.GoogleAPI;
import com.google.api.translate.Language;
import com.google.api.translate.Translate;

public class tr
{
    public static void main(String[] args) throws Exception{
        GoogleAPI.setHttpReferrer("http://code.google.com/p/google-api-translate-java/");
         GoogleAPI.setKey("AIzaSyBi7y4EgC0B-Q9UZg-tOzsOI0sLQ8F1Oow");

        String result = Translate.DEFAULT.execute("hello", Language.ENGLISH, Language.ARABIC);

        System.out.println(result);
        System.out.println("succeeded");

    }

    } 
```

但是当我运行它时，我得到了这个错误

调试结果：错误：[google-api-translate-java] 检索翻译时出错。

运行结果

```
Error: [google-api-translate-java] Error retrieving translation.
Exception in thread "main" com.google.api.GoogleAPIException: java.lang.Exception: [google-api-translate-java] Error retrieving translation.
    at com.google.api.translate.TranslateV2.execute(TranslateV2.java:68)
    at pp.tr.main(tr.java:14)
Caused by: java.lang.Exception: [google-api-translate-java] Error retrieving translation.
    at com.google.api.GoogleAPI.retrieveJSON(GoogleAPI.java:99)
    at com.google.api.translate.TranslateV2.execute(TranslateV2.java:62)
    ... 1 more
Caused by: java.io.IOException: Server returned HTTP response code: 403 for URL: https://www.googleapis.com/language/translate/v2?key=AIzaSyBi7y4EgC0B-Q9UZg-tOzsOI0sLQ8F1Oow&q=hello&target=ar&source=en
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:532)
    at sun.net.www.protocol.http.HttpURLConnection$6.run(HttpURLConnection.java:1458)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.net.www.protocol.http.HttpURLConnection.getChainedException(HttpURLConnection.java:1452)
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1106)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
    at com.google.api.GoogleAPI.retrieveJSON(GoogleAPI.java:93)
    ... 2 more
Caused by: java.io.IOException: Server returned HTTP response code: 403 for URL: https://www.googleapis.com/language/translate/v2?key=AIzaSyBi7y4EgC0B-Q9UZg-tOzsOI0sLQ8F1Oow&q=hello&target=ar&source=en
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1403)
    at sun.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:254)
    at com.google.api.GoogleAPI.retrieveJSON(GoogleAPI.java:89)
    ... 2 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T21:08:11.060

您必须从[API 控制台](https://code.google.com/apis/console/)中项目的服务选项卡启用翻译 API 。

此页面包含所有定价详细信息：[https ://developers.google.com/translate/v2/pricing](https://developers.google.com/translate/v2/pricing)

# objective-c - 方法调用的参数太多，预计 1 有 2

> ID：12121229
> 
> 赞同：0
> 
> 时间：2012-08-25T10:37:37.930
> 
> 标签：objective-c, cocoa

我正在`JSON`从`NSURL`课堂上调用一个 URL。我的网址是：

```
like://Design_Time_Addresses/IServices/RoleService/json/Role/?name=%@",[textField text]]; 
```

当我在文本字段中写“医生”时，我必须通过该 URL 获取医生的所有详细信息。同样，当我写“工程师”时，我必须获取工程师的所有详细信息。所以这意味着我在文本字段中输入的内容，URL 中的名称应该替换为文本字段值。但是当我这样写代码时：

```
NSURL *jsonUrl =[NSURL URLWithString:@"http://Design_Time_Addresses/ICloudServices/RoleService/json/Role/?name=%@",[textField text]];
NSString *jsonStr =[[NSString alloc] initWithContentsOfURL:jsonUrl];
NSMutableDictionary *jsonDetails = [[NSMutableDictionary alloc]initWithDictionary:[jsonStr JSONValue]]; 
```

如此处所示，我正在使用`NSURL`该类来获取此 URL。

我在`NSURL`课堂上遇到错误。如何将文本字段值传递给 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:45:09.817

第一行应该是

```
NSString *urlString = [NSString stringWithFormat:@"http://Design_Time_Addresses/ICloudServices/RoleService/json/Role/?name=%@",[textField text]];
NSURL *jsonUrl =[NSURL URLWithString:urlString]; 
```

`NSURL URLWithString`需要一个字符串参数，而您提供两个。`@"http://..."`由于您可能想从字符串 and构造单个字符串`[textField text]`，因此您应该使用一种`NSString`方法来连接它们。您不能依靠`NSURL`为您连接字符串。

# html - 浏览器中缺少滚动条

> ID：12121230
> 
> 赞同：7
> 
> 时间：2012-08-25T10:37:40.943
> 
> 标签：html, css

我正在使用以下代码（HTML 和 CSS），并且通过使用代码，您无法通过鼠标滚动或在浏览器中向上或向下滚动页面（右侧的滚动条不存在）

HTML：

```
<div id="head">
   <div id="logo">
    <a href="#"></a>
   </div>
   <form style="display:inline;">
    <input style="margin-top:3px;" class="searchbox" type="text"/>
   </form>
 <ul>
  <li>
   <a href="#" title="Search">Searh</a> 
  <li>
  <li>
   <a href="#" title="FAQ">FAQ</a> 
  </li>
  <li>
   <a href="#" title="Links">Links</a> 
  </li>
  <li>
   <a href="#" title="Legal">Legal</a> 
  </li>
 </ul>
 </div> 
```

CSS：

```
html {
 height:100%; /* fix height to 100% for IE */
 max-height:100%; /* fix height for other browsers */
 padding:0; /*remove padding */
 margin:0; /* remove margins */
 border:0; /* remove borders */
 background:#fff; /*color background - only works in IE */
 /* hide overflow:hidden from IE5/Mac */
 /* \*/
 overflow:hidden; /*get rid of scroll bars in IE */
 /* */
}
body {
 height:100%;
 max-height:100%;
 overflow:hidden;
 padding:0;
 margin:0;
 border:0;
    font: 13px/1.5 Helvetica Neue,Arial,Helvetica,'Liberation Sans',FreeSans,sans-serif;
}
#content {
 display:block;
 height:100%;
 max-height:100%;
 overflow:auto;
 padding-left:100px;
 position:relative;
 z-index:3;
 word-wrap:break-word;
 top:45px;
}
#head {
 position:absolute;
 margin:0;
 top:0;
 display:block;
 width:100%;
 height:40px;
    -moz-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
 background:#333333;
    background: -moz-linear-gradient(center top , #333333, #111111) repeat scroll 0 0 transparent;
}
#logo a {
    background: url("twitter_logo_right.png") no-repeat scroll 20px 9px transparent;
    color: #FFFFFF;
    display: block;
    height: 40px;
    margin-right: 5px;
    outline: medium none;
    text-indent: -9999px;
    width: 140px;
 float:left;
}
.searchbox{
    -moz-border-radius: 4px 4px 4px 4px;
    -moz-box-shadow: 0 1px 0 #444444;
    background: none repeat scroll 0 0 #666666;
    border: 1px solid black;
    color: #CCCCCC;
    font: 13px Arial,sans-serif;
    padding: 6px 25px 4px 6px;
    width: 215px;
 float:left;
}

.searchbox:focus {
    background: none repeat scroll 0 0 #eeeeee;
    border: 1px solid #999999;
}
#head ul {
  margin:0;
  padding:0;
  background:transparent;
  height:100%;
  margin-left:60px;
  padding-left:60px;
  padding-top:10px;
}
#head ul li {  display:inline;}
#head ul li a { padding-left:20px;  color:#BABABA; text-decoration:none;}
#head ul li a:hover { color:#FFFFFF;  }

table tr td{height:100px; width:300px; -moz-border-radius:12px; background-color:#C6C6C6; margin:botton:30px;}
table tr td a{color: #007B9F; font-size:1.5em; text-decoration:none;} 
```

如果您能提供帮助，请使用代码示例说明如何修复它：)

**编辑：**示例/代码编辑器 = [http://jsfiddle.net/BctHr/](http://jsfiddle.net/BctHr/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T10:45:39.993

检查你的CSS：

```
 overflow:hidden; /* get rid of scroll bars in IE */ 
```

对于 html 和 body 删除该行，或更改为：`overflow:scroll;`

[http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T16:04:01.840

正文中的溢出应该是自动或滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T10:47:35.907

也因为你没有内容 div

# scala - WordSpec，使用“in”和pending似乎不起作用

> ID：12121233
> 
> 赞同：1
> 
> 时间：2012-08-25T10:38:27.577
> 
> 标签：scala, scalatest

从 Specs2 迁移到 Scalatest 我尝试使用 WordSpec，但没有成功。我使用了来自[Testing Actor Systems](http://doc.akka.io/docs/akka/2.0.2/scala/testing.html)的样本，但它对我来说并没有解决这个错误。然后我从 scaladoc 复制了基本测试，但仍然有同样的问题。你能指导我吗，我在这里做错了什么：

```
class MasterSpec extends WordSpec {
  "A Set" when {
    "empty" should {
      "have size 0" in (pending)

      "produce NoSuchElementException when head is invoked" in {
        intercept[NoSuchElementException] {
          Set.empty.head
        }
      }
    }
  }
} 
```

这给出了以下错误消息：

```
[error] /Users/bam/Projects/ppm/core/src/test/scala/net/batyuk/ppm/core/MasterSpec.scala:12: overloaded method value in with alternatives:
[error]   (testFun: () => Any)Unit <and>
[error]   (testFun: MasterSpec.this.FixtureParam => Any)Unit
[error]  cannot be applied to (org.scalatest.PendingNothing)
[error]       "have size 0" in (pending)
[error]                     ^
[error] one error found 
```

尝试转到 FunSpec，但不能强迫自己进入，WordSpec 对我来说似乎更自然

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T10:56:01.680

这是一个编译器错误。我假设您已经导入：

```
import org.scalatest.fixture.WordSpec 
```

但您需要导入：

```
import org.scalatest.WordSpec 
```

# codeigniter - 如何在codeIgniter中创建用户名？

> ID：12121240
> 
> 赞同：0
> 
> 时间：2012-08-25T10:39:16.963
> 
> 标签：codeigniter, user-profile

我想要我的网站用户的地址是 mydomain.com/username/。但是对我来说使用codeIgniter似乎很困难。请帮助我最好的方法是什么。

mysite.com/profile?user=username 是个人资料的当前网址，但我想要这个 mysite.com/username

请帮助我，我的英语不好，所以如果你不理解我的问题，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:11:37.037

在您的`routes.php`文件中，将每个现有控制器（您应该至少有一个）路由到它自己。例如，如果您`main`在`main.php`文件路由中有控制器：

```
$route['main'] = "main";
$route['main/(:any)' = "main/$1"; 
```

你应该路由它两次的原因是因为你必须确保打开`http://yoursite/main`工作以及`http://yoursite/main/my_method/`等等。对你拥有的每个其他控制器都这样做。

下一步是将所有其他内容路由到您的用户控制器。例如，您有一个`profile`具有 1 个参数的方法 - 用户名。

```
$route['(:any)'] = "users/profile/$1"; 
```

所以现在你将把其他所有东西都路由到`users/profile/username`.

要记住的一件事是文件中的最高优先级更高，`routes.php`因此您的路线文件应如下所示：

```
$route['main'] = "main";
$route['main/(:any)' = "main/$1";
$route['users'] = "main";
$route['users/(:any)' = "main/$1";
$route['(:any)'] = "users/profile/$1"; 
```

看看有没有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:52:00.870

您可以使用 CI[路由](http://www.codeigniter.fr/user_guide/general/routing.html)

在您的 route.php 文件中，选择所有用户并为每个用户创建一个路由：

```
$aUsers = $this->oDb->getAllUsers();
foreach($aUsers as $oUser) {
    $route[$oUser->username] = "profile/" . $oUser->username;
} 
```

它应该工作。

# linux - 我可以 grep telnet 命令输出吗？

> ID：12121241
> 
> 赞同：4
> 
> 时间：2012-08-25T10:39:18.000
> 
> 标签：linux, telnet

我有一个打印数百行输出的 telnet 命令，我可以 grep 输出吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T10:49:38.197

使用“脚本”命令。如果您在运行 telnet 之前运行“脚本”，则写入终端的所有文本也会写入 /file/path/filename。您必须执行“退出”或 Ctrl-D 才能实际写入文件，或者您可以检查文件。

最后使用文件名对文件进行 grep | grep "搜索文本"

/file/path/filename 是您要存储 telnet 输出的路径。

使用脚本命令

```
script /tmp/myscript.txt 
```

然后您在终端中触发的所有命令和输出都将进入此文件。完成后使用 ctrl + D ，这将写入文件。

对此文件执行 grep。

```
cat /tmp/myscript.txt | grep "textToSearch" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-25T11:28:57.490

使用`tee`命令将内容重定向到文件：

```
telnet google.com 80 | tee outfile 
```

然后grep文件

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-08-18T11:04:39.267

要 grep 网络连接的输出，您可以使用 Bash shell 代替`telnet`，例如：

```
exec {stream}<>/dev/tcp/example.com/80
printf "GET / HTTP/1.1\nHost: example.com\nConnection: close\n\n" >&${stream}
grep Example <&${stream} 
```

# python - 错误的命名链接搜索和替换

> ID：12121245
> 
> 赞同：1
> 
> 时间：2012-08-25T10:39:37.337
> 
> 标签：python, regex, bash, sed, awk

我面临的问题是链接名称错误......不同文件中有数百个错误链接。

所以我写 bash 来替换
`<a href="../../../external.html?link=http://www.twitter.com">`
`<a href="../../external.html?link=http://www.facebook.com/pages/somepage/">`
`<a href="../external.html?link=http://www.tumblr.com/">`
直接链接的链接，比如 `<a href="http://www.twitter.com>`

我知道我们有模式 ../ 重复一次或多次。还有 external.html?link 也应该被删除。

如何建议这样做？awk，sed，也许是 python？我需要正则表达式吗？

谢谢意见...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:54:02.427

这*可能*是正则表达式是正确解决方案的地方。您只是在属性中搜索文本，并且内容是规则的，符合模式。

以下 python 正则表达式将为您找到这些链接：

```
r'href="((?:\.\./)+external\.html\?link=)([^"]+)"' 
```

我们寻找的模式是一段`href=""`文本中的某物，其中“某物”以一个或多个 的实例开始`../`，然后是`external.html?link=`，然后是任何不包含`"`引号的文本。

等号后面的匹配文本被分组到第 2 组，以便于检索，第 1 组保存`../../external.html?link=`部分。

如果您只想`../../external.html?link=`完全删除该部分（因此链接直接指向端点而不是通过重定向页面），请离开第一组并`.sub()`在您的 HTML 文件上做一个简单的操作：

```
import re
redirects = re.compile(r'href="(?:\.\./)+external\.html\?link=([^"]+)"')

# ...
redirects.sub(r'href="\1"', somehtmlstring) 
```

请注意，这也可以匹配任何正文文本（因此在 HTML 标记之外），这不是 HTML 感知解决方案。不过，很可能没有这样的正文。但如果有，您将需要一个成熟的 HTML 解析器，例如 BeautifulSoup 或 lxml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T10:47:10.960

使用 HTML 解析器，如 BeautifulSoup 或 lxml.html。

# icefaces - ICEFaces：“图标”属性的值

> ID：12121251
> 
> 赞同：1
> 
> 时间：2012-08-25T10:40:10.403
> 
> 标签：icefaces, icefaces-3

我正在编写一个由图标组成的菜单栏。
在我看来，最简单的方法是依赖*ace:menuItem*组件的*icon*属性。[不幸的是，无论是在展示](http://icefaces-showcase.icesoft.org/showcase.jsf)中还是在[文档](http://www.icesoft.org/java/projects/ICEfaces/documentation.jsf) 中，我都找不到该属性允许的内置值的完整列表（即*ui-icon*、*ui-icon-contact*等）。 我在哪里可以找到它？如果没有这样的清单，我该如何解决？

 **** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:26:29.903

可以查看页面的来源，然后打开 theme.css 看看：http: [//jquery-ui.googlecode.com/svn/tags/1.6rc5/tests/static/icons.html](http://jquery-ui.googlecode.com/svn/tags/1.6rc5/tests/static/icons.html)***

# gitolite - Gitolite和防火墙

> ID：12121255
> 
> 赞同：1
> 
> 时间：2012-08-25T10:40:45.063
> 
> 标签：gitolite

因此，我刚刚在运行`gitolite`服务器的 MacOSX Lion 机器上启用了防火墙，并且`git`无法再`remote`从同一家庭网络中的其他机器连接。

更多信息：我保持`ssh`标准端口打开服务器机器。

我还发现了这个[http://www.42.mach7x.com/2011/07/12/using-gitolite-in-a-non-standard-ssh-port/](http://www.42.mach7x.com/2011/07/12/using-gitolite-in-a-non-standard-ssh-port/)。但它不适用于我，因为我打开了标准端口。

我会错过什么？

# python - 具有并发用户和大量数据处理的交互式 webapp 架构

> ID：12121260
> 
> 赞同：2
> 
> 时间：2012-08-25T10:41:18.337
> 
> 标签：python, django, multithreading, architecture, twisted

我遇到了一个特定的问题并想到了解决方案。但是由于该解决方案涉及很多，我想知道其他人是否遇到过类似的事情并可以评论最佳实践或提出替代方案。

问题如下：我有一个用 Django 编写的 webapp，它有一些屏幕，其中以时间间隔收集、分组和聚合来自多个表的数据。它基本上是一个类似于矩阵的大型 excel，其中我们在一个轴上以时间间隔聚合数据，而另一个轴上每个时间间隔的聚合数据的资源。它涉及许多内连接和左连接来收集所有数据，并且由于呈现数据的“报告”性质，我使用原始 sql 一起查询所有内容。

问题是多个用户可以在这些时间间隔内同时查看和编辑数据。与使用相同数据的其他用户相比，他们还可以在更精细或更粗糙的粒度上编辑数据，但在子/重叠间隔中。目前，当用户编辑某些数据时，会触发 django 请求，更改数据，将受影响的间隔再次聚合和分组并返回。但由于这些数据的易变性，其他用户可能在他们之前更改了某些内容。此外，每次对表格进行分组/聚合和重新呈现是一项非常繁重的操作（取决于数据量和间隔范围）。并发用户编辑时，情况会变得更糟。

我提出的解决方案：很明显，http 请求/响应机制对于这种事情并不理想；分组/聚合是相当重量级的，不适合每个请求执行此操作，理想情况下，并发将在用户之间传递，并且反馈应该像 googledocs 一样实时，而不是整页刷新。

我正在考虑制作一个守护进程，它根据请求从 dbms 读取感兴趣的*平面*数据并将其缓存在内存中。然后，对数据的所有更改都将发生在内存中，并写入 dbms。该守护进程通过锁引导对数据的访问，因此该守护进程可以处理哪些用户可以覆盖其他更改。

使用python代码对平面数据进行聚合和分组，只返回用户需要的切片；用户/守护进程通信将通过 websockets 运行。守护进程将提供一个订阅者/发布者通道，当某些事情发生变化时，对特定数据片段感兴趣的用户会收到通知。这个守护进程可以使用像 twisted 这样的框架来实现。但是我不确定事件驱动的方法在这里是否有效，因为我们想“引导”所有传入的请求......也许这些应该放在一个队列中并在单独的线程中运行？在我的调度程序旁边的线程中进行扭曲运行会更好，还是应该扭曲的主循环分离在该队列上工作的线程？我的理解是线程最适合 IO，而 python 繁重的代码基本上会阻塞其他线程。

有没有人做过类似的事情？

提前致谢！

卡尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T13:37:11.467

Google 为现已废弃的 Wave 产品的并发编辑功能实施的方案已记录在案，[http://www.waveprotocol.org/whitepapers/operational-transform](http://www.waveprotocol.org/whitepapers/operational-transform)。Wave 的这一方面似乎是成功的，尽管 Wave 本身很快就被抛弃了。

至于您提出的有关实施拟议方案的问题：

1.  事件驱动系统完全有能力实现这个想法。事件驱动是组织代码的一种方式。它不会阻止您实现任何特定功能。
2.  线程在很多情况下都不是最好的，尤其是在 Python 中。
    1.  它对于 CPU 密集型工作有很大的缺点，因为 CPython 一次只运行一个 Python 线程（不管可用的硬件资源如何）。这意味着多线程受 CPU 限制的 Python 程序通常不比单线程等效程序快，甚至更慢。
    2.  对于 IO，这个缺点的限制较小，因为 IO 不涉及在 CPython 上运行 Python 代码（IO API 都是用 C 实现的）。这意味着您可以同时在多个线程中执行 IO，因此线程化可能是一个好处。然而，在单个线程中同时执行 IO 正是 Twisted 的用途。与在单个线程中执行 IO 相比，线程没有任何好处，只要您以非阻塞方式（或者可能是异步方式）执行 IO。
3.  你好世界。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T10:51:31.287

我尝试了类似的方法，您可能对解决方案感兴趣。这是我的问题：

[python Socket.IO 客户端，用于向 TornadIO2 服务器发送广播消息](https://stackoverflow.com/questions/10950365/python-socket-io-client-for-sending-broadcast-messages-to-tornadio2-server)

这就是答案：

[https://stackoverflow.com/a/10950702/675065](https://stackoverflow.com/a/10950702/675065)

他还写了一篇关于解决方案的博客文章：

[http://blog.y3xz.com/blog/2012/06/08/a-modern-python-stack-for-a-real-time-web-application/](http://blog.y3xz.com/blog/2012/06/08/a-modern-python-stack-for-a-real-time-web-application/)

软件堆栈包括：

*   [SockJS 客户端](https://github.com/sockjs/sockjs-client)
*   [SockJS 龙卷风服务器](https://github.com/MrJoes/sockjs-tornado)
*   [Redis 发布/订阅](http://redis.io/commands#pubsub)
*   [Django Redis 客户端：Brukva](https://github.com/evilkost/brukva)

我自己实现了这个，它就像一个魅力。

# android - 如何创建 ListPreference 对话框以在非偏好活动中显示

> ID：12121263
> 
> 赞同：3
> 
> 时间：2012-08-25T10:41:37.230
> 
> 标签：android, android-activity, dialog, listpreference

我想在非首选项活动中显示 ListPreference 对话框。

这是我创建对话框的代码

```
// this is my current activity
ListPreference listPreference = new ListPreference(this);   
listPreference.setDialogIcon(R.drawable.auto_download);
listPreference.setTitle(R.string.autoDownloadTitle);
listPreference.setEntries(R.array.autoDownloadEntries);
listPreference.setEntryValues(R.array.autoDownloadValues);
listPreference.setNegativeButtonText(R.string.cancel);
Dialog dialog = listPreference.getDialog(); 
```

我的问题是对话框总是空的......我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-25T11:18:33.567

你不能做这种事情，`Preference`应该在`PreferenceScreen`并且活动必须扩展`PreferenceActivity`。

我想你想实现一个对话框来显示选项列表，比如`ListPreference`do。我建议使用`AlertDialog`列表视图（基于 ArrayAdapter）。

检查[此](https://stackoverflow.com/questions/15762905/how-to-display-list-view-in-alert-dialog-in-android)示例或[AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)文档。

# iphone - 如何缩放图像？

> ID：12121269
> 
> 赞同：0
> 
> 时间：2012-08-25T10:41:59.620
> 
> 标签：iphone, image-scaling

如何以高质量缩放图像。我正在使用以下代码，但是当我使用相机中的图像时，它会在不同的帧中显示。

```
-(UIImage *)resizeImage:(UIImage *)image {
int w = image.size.width;
int h = image.size.height; 

CGImageRef imageRef = [image CGImage];

int width, height;

int destWidth = 640;
int destHeight = 480;
if(w > h){
    width = destWidth;
    height = h*destWidth/w;
} else {
    height = destHeight;
    width = w*destHeight/h;
}

CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

CGContextRef bitmap;
bitmap = CGBitmapContextCreate(NULL, width, height, 8, 4 * width, colorSpace, kCGImageAlphaPremultipliedFirst);

if (image.imageOrientation == UIImageOrientationLeft) {
    CGContextRotateCTM (bitmap, M_PI/2);
    CGContextTranslateCTM (bitmap, 0, -height);

} else if (image.imageOrientation == UIImageOrientationRight) {
    CGContextRotateCTM (bitmap, -M_PI/2);
    CGContextTranslateCTM (bitmap, -width, 0);

} else if (image.imageOrientation == UIImageOrientationUp) {

} else if (image.imageOrientation == UIImageOrientationDown) {
    CGContextTranslateCTM (bitmap, width,height);
    CGContextRotateCTM (bitmap, -M_PI);

}

CGContextDrawImage(bitmap, CGRectMake(0, 0, width, height), imageRef);
CGImageRef ref = CGBitmapContextCreateImage(bitmap);
UIImage *result = [UIImage imageWithCGImage:ref];

CGContextRelease(bitmap);
CGImageRelease(ref);

return result;  
} 
```

如果有任何减小尺寸而不影响质量的方法，请建议提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:19:30.080

我已经使用下面的代码来缩放相机图像的图像。如果您觉得有帮助，请实施

```
- (void)imagePickerController:(UIImagePickerController *)picker
                didFinishPickingImage:(UIImage *)image
                                    editingInfo:(NSDictionary *)editingInfo
{

//// ADDIGN THIS LINE WHEN YOU CAPTURED IMAGE 

    image = [self scaleAndRotateImage:image];
    [self useImage:image];
    [[picker parentViewController] dismissModalViewControllerAnimated:YES];
}

/// THE METHODS ROTATE THE CURRENT CAPTURED IMAGE AT 90 DEGREE OF ANGLE

- (void)scaleAndRotateImage:(UIImage *)image
{
    int kMaxResolution = 320; // Or whatever

    CGImageRef imgRef = image.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = kMaxResolution;
            bounds.size.height = bounds.size.width / ratio;
        }
        else {
            bounds.size.height = kMaxResolution;
            bounds.size.width = bounds.size.height * ratio;
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;
    switch(orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    UIGraphicsBeginImageContext(bounds.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    }
    else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    [self setRotatedImage:imageCopy];
    //return imageCopy;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:03:02.567

为了减小尺寸，您将不得不在图像的分辨率上做出妥协。我建议你为图像计算一个新的 WIDTH 和 HEIGHT。

这是对我有用的东西：

尝试这个：

```
-(UIImage*) resizeImage:(CGImageRef)image toWidth:(int)width andHeight:(int)height
{
// create context, keeping original image properties
  CGColorSpaceRef colorspace = CGImageGetColorSpace(image);
  CGContextRef context = CGBitmapContextCreate(NULL, width, height,                                                 CGImageGetBitsPerComponent(image),                                           CGImageGetBytesPerRow(image),
                                             colorspace,
                                             CGImageGetAlphaInfo(image));

       if(context == NULL)
       {
        NSLog(@"Could not re-size");
        return nil; 
       }
      // draw image to context (resizing it)
      CGContextDrawImage(context, CGRectMake(0, 0, width, height), image);
      // extract resulting image from context
      CGImageRef imgRef = CGBitmapContextCreateImage(context);
      CGContextRelease(context);
      UIImage* resizedImage = [UIImage imageWithCGImage:imgRef];
      CGImageRelease(imgRef);
      return resizedImage;  
} 
```

# asp.net-mvc-3 - RequiredAttribute 不会出现在客户端验证上，派生类上

> ID：12121272
> 
> 赞同：0
> 
> 时间：2012-08-25T10:42:30.490
> 
> 标签：asp.net-mvc-3, unobtrusive-validation

我的视图模型继承自一个类，该类继承自一个具有属性的抽象类`[Required]`，但该规则未出现在 DOM 中，并且不显眼的验证不会捕获错误。

display 属性通过正常，但验证 DOM 属性未添加到 textarea

我的观点是：

```
@model FormPersonView
....
@Html.TextAreaFor(m => m.Description)
@Html.ValidationMessageFor(m => m.Description) 
```

我的代码有这个：

```
public class FormPersonView : Person
{
    //View related stuff
    .....
    .....
}

public class Person : BasePerson
{
    //Person related stuff - validation for these work!
    [Required]
    public string FirstName { get; set; }
    [Required]
    public string LastName { get; set; }
}

public abstract class BasePerson
{
    //Base person stuff - validation for this doesn't work!
    public string Id { get; set; }

    [Required]
    [Display("Short description of the person")]
    public string Description { get; set; }
} 
```

为什么它适用于一级继承而不是二级？它确实在服务器端工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:16:35.300

正好有这个问题。在定义视图时，模型作为您定义的类型出现`@model FormPersonView`。数据注释仅适用于该特定类型，即使您从子级派生属性，也不会使用它们的数据注释。

我在项目中提出的解决方案是为我需要数据注释正常工作的类型定义编辑器模板，然后调用`@EditorFor`这些模型。**然后，只有在那时**，数据注释才能按预期运行。

希望这对您有所帮助。

# emacs - Emacs (Multi)Term vs Xterm vs Console & TMUX

> ID：12121274
> 
> 赞同：2
> 
> 时间：2012-08-25T10:42:40.963
> 
> 标签：emacs, console, terminal, gnu-screen, xterm

我是一名 Emacs 用户，试图学习一个最好从终端运行的软件工具。充分利用该工具的默认设置是使用 xterm 进行交互并调用 Vim 进行编辑。在这种设置中，人们可以简单地将 Vim 替换为 Emacs，但随后人们会花费大部分时间在 Xterm 中在 Emacs 之外工作。

我发现 Emacs 中有 (Multi)Term-mode，但很难找出它的优缺点。所以我有以下问题：

1.  [没有 X11]：为什么或何时会有人使用 Emacs (Mutli)Term 而不是 Console 和 TMUX（或 GNU Screen）？
2.  [使用 X11] Emacs (Multi)Term 与 Xterm 相比如何？

显然，速度是比较标准之一，但我相信还有其他标准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T03:15:27.740

1.  如果您更熟悉 Emacs 并且已经将它用于许多其他事情和/或如果您在 Emacs 上花费的时间比在终端上花费的时间更多，那么您将在 tmux/screen 上使用 Emacs 术语。
2.  Emacs 的 Term 远不如 xterm 复杂和可靠。但它在 Emacs 中工作，所以如果你住在 Emacs 中，它可能是一个不错的选择。

请注意，您可能还更喜欢使用 Emacs 的`M-x shell`功能，它为您提供命令行而不给您实际的终端仿真器。这意味着命令在发送到底层命令行程序之前在 Emacs 中进行编辑，因此可以在那里使用所有常用的 Emacs 编辑（并且历史操作以及命令完成也由 Emacs 执行，这可以是很棒，或者可能令人失望（例如，如果完成需要 Emacs 没有的信息））。

# mysql - 无法使用从 CakePHP 2 中的查询获得的变量从数据库中检索结果

> ID：12121275
> 
> 赞同：0
> 
> 时间：2012-08-25T10:42:49.053
> 
> 标签：mysql, cakephp, cakephp-2.0

我在我正在构建的东西中遇到了一个问题。

我有两个表，一个是 Job Sheet 表，另一个是 Job Data 表。作业表表存储有关作业编号、工人等的信息。作业数据表存储作业编号（链接到作业表表）以及与之相关的作业等。例如：

```
Job Sheet
---------------------------
| ID | Jobnum |   Worker  |
---------------------------
| 1  |  1234  | J.Bloggs  |
| 2  |  5678  | J.Smith   |
---------------------------

Job Data
----------------------------
| ID | Jobnum |    Work    |
----------------------------
| 1  |  1234  | Light bulb |
| 2  |  1234  | Painting   |
| 3  |  1234  | Decorating |
| 4  |  5678  | Wood Work  |
| 5  |  5678  | Cleaning   |
---------------------------- 
```

我的问题是，当我将作业表打印到屏幕上时，我希望能够打印作业表的详细信息，然后为每个作业表打印相关数据，如下所示：

```
Job Sheets To Be Printed
--------------------------------------------------------

Job Sheet ID - 1
Job Number - 1234
Worker - J.Bloggs

Work Undertaken
---------------
Light Bulb
Painting
Decorating

***********

Job Sheet ID - 2
Job Number - 5678
Worker - J.Smith

Work Undertaken
---------------
Wood Work
Cleaning 
```

我的问题是，虽然我可以打印作业表详细信息（名称等），但它只会从数据库中返回一组记录，并将它们放入每个作业表中。因此，第一个工作表中的数据也会显示在第二个工作表中，即使它应该有自己的数据。

我在控制器中的代码是这样的：

```
 $jobsheets = $this->Jobsheet->find('all', array('conditions' => array('Jobsheet.contract' => $contractid), 'recursive' => 2));
    $this->set('jobsheets', $jobsheets);

    foreach ($jobsheets as $js) {

        $jobnum[] = $js['Jobsheet']['jobnum'];

    }

    print_r($jobnum);

    foreach ($jobnum as $jn) {

        // Job Data
        $jobrec = $this->Jobdata->find('all', array('conditions' => array('Jobdata.jobsheetid' => $jn), 'recursive' => 2));
        $this->set('jobrec', $jobrec);

    } 
```

在视图中，我有以下代码：

```
 <?php foreach ($jobsheets as $jobsheet) { ?>
            <p>Job Sheet ID - <?php echo $jobsheet['Jobsheet']['id']; ?></p>
            <p>Job Number - <?php echo $jobsheet['Jobsheet']['jobnum']; ?></p>
            <p>Worker - <?php echo $jobsheet['Jobsheet']['worker']; ?></p>
            <p>Work Undertaken</p>
            <?php foreach ($jobrec as $jb) { ?>
                <p><?php echo $jb['Jobdata']['work'];?></p>
        <?php } } ?> 
```

所以目前，它显示以下内容：

```
Job Sheets To Be Printed
--------------------------------------------------------

Job Sheet ID - 1
Job Number - 1234
Worker - J.Bloggs

Work Undertaken
---------------
Light Bulb
Painting
Decorating

***********

Job Sheet ID - 2
Job Number - 5678
Worker - J.Smith

Work Undertaken
---------------
Light Bulb
Painting
Decorating 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:41:57.467

在控制中进行此更改

```
 foreach ($jobnum as $jn) {

            // Job Data
            $jobrec[] = $this->Jobdata->find('all', array('conditions' => array('Jobdata.jobsheetid' => $jn), 'recursive' => 2));
            $this->set('jobrec', $jobrec);

        } 
```

这种观点的改变

```
 <?php $i=0; ?>
    <?php foreach ($jobsheets as $jobsheet) { ?>

                <p>Job Sheet ID - <?php echo $jobsheet['Jobsheet']['id']; ?></p>
                <p>Job Number - <?php echo $jobsheet['Jobsheet']['jobnum']; ?></p>
                <p>Worker - <?php echo $jobsheet['Jobsheet']['worker']; ?></p>
                <p>Work Undertaken</p>
                <?php foreach ($jobrec[$i] as $jb) { ?>
                    <p><?php echo $jb['Jobdata']['work'];?></p>
            <?php }
           $i++;
 } ?> 
```

# android - 通过我自己的应用程序控制 android 音乐播放器

> ID：12121276
> 
> 赞同：0
> 
> 时间：2012-08-25T10:42:49.773
> 
> 标签：android, api, controls, audio-player, android-music-player

我想编写一些应用程序来控制 android 音乐播放器 :) 例如，当我摇晃手机时 -> 播放器应该改变下一个音乐。不root我的手机可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:50:37.793

我认为这是可能的，这是通过`Intent`.

```
Intent intent = new Intent(MediaStore.INTENT_ACTION_MUSIC_PLAYER);
startActivity(intent); 
```

或者

```
Intent intent = new Intent();  
intent.setAction(android.content.Intent.ACTION_VIEW);  
File file = new File(YOUR_SONG_URI);  
intent.setDataAndType(Uri.fromFile(file), "audio/*");  
startActivity(intent); 
```

来源：[Android 使用 Intent 启动音乐播放器](https://stackoverflow.com/questions/3114471/android-launching-music-player-using-intent)

您必须通过 googleing（加载播放列表等）检查是否有更多 Intent 可以使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:26:30.513

要控制任何第 3 方应用程序，它首先必须愿意让您这样做。它通常是通过公开任何类型的公共 API 来完成的，因此其他应用程序会知道如何做到这一点。如果您选择的音乐播放器提供此功能，那么“是”就是答案。如果不是，那么通常意味着“不”，并且生根也不一定是一个神奇的解决方案。如果没有 API 或任何其他公开的通信渠道（甚至是非公开的），那么实现您的目标将很棘手。

# passwords - 如何隐藏密码

> ID：12121277
> 
> 赞同：0
> 
> 时间：2012-08-25T10:43:06.840
> 
> 标签：passwords, hide

我有一个使用数据库的应用程序。有关如何连接到数据库的数据存储在属性文件中。在那里你可以找到服务器名称、数据库名称、用户名、密码……我阅读了这个文件并在我的程序中连接到一个数据库。

我怎样才能“隐藏”密码，以便其他人很难找回密码？

# android - 如何在主题中设置默认布局

> ID：12121283
> 
> 赞同：1
> 
> 时间：2012-08-25T10:44:10.143
> 
> 标签：android, android-layout, android-theme, android-titlebar

我在我的应用程序中使用自定义标题栏，但每次创建新布局时，我都必须调用：

```
<include
    android:id="@+id/titlebar"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="@integer/titlebar_weight"
    layout="@layout/titlebar" /> 
```

而是在所有布局中调用它，我如何在主题中定义它（换句话说：为主题定义默认布局）？

我的默认布局：

![默认布局](../Images/10fbd7ece51cf8318e030afeab1ae4da.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:21:29.040

`windowTitleStyle`尽管可以通过主题（ , `windowTitleSize`, ）对旧标题栏进行一些自定义`windowTitleBackgroundStyle`，但您无法设置自己的布局。标题栏也被 Android 3.0 中的 ActionBar 取代，所以无论如何这对你没有帮助。

在主题中设置默认布局是不可能的，至少我找不到办法。但是在添加标题布局时，您仍然有几个选项可以减少重复：

*   使用您的标题和内容的 ViewStub 创建一个主布局，然后通过代码设置 inflatedId。
*   考虑使用片段构建屏幕，并以编程方式从主布局中添加/删除它们。
*   以编程方式在基础活动中添加标题（由 user1527136 建议）
*   包括它（这就是你已经在做的，而且还不错恕我直言）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:17:05.667

我建议不要自己创建操作栏，您可以尝试：

[Actionbar Sherlock](http://actionbarsherlock.com/)或 ActionbarCompat（来自 SDK 中的 Google 示例）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T03:06:09.543

我认为这不能仅通过主题化来实现。您需要创建一个`Activity`包含标题栏的摘要并包装扩展`Activity`类设置的内容视图。这是一个例子：

XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <include
        android:id="@+id/titleBar"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        layout="@layout/titlebar" />

    <FrameLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

抽象活动

```
public abstract class TitleBarActivity extends Activity {

    @Override
    protected void onCreate( Bundle savedInstanceState ) {

        super.onCreate( savedInstanceState );
        super.setContentView( R.layout.title_bar_activity );
    }

    @Override
    public void setContentView( int layoutResId ) {

        FrameLayout contentFrameLayout = (FrameLayout) findViewById( R.id.content );
        contentFrameLayout.removeAllViews();
        getLayoutInflater().inflate( layoutResId, contentFrameLayout );
    }
} 
```

这是一个非常简单的实现，但应该让您大致了解需要做什么。现在，对于任何扩展的 Activity，`TitleBarActivity`默认情况下您已经在顶部拥有标题栏。您希望活动控制的标题的任何自定义，添加方法`TitleBarActivity`来做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T11:47:17.983

```
<resources>
    <style name="Theme.Transparent" parent="android:Theme">
        <item name="android:windowIsTranslucent">true</item>
        <item name="android:windowBackground">@android:color/transparent</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowNoTitle">true</item>
        <item name="android:windowIsFloating">true</item>
        <item name="android:backgroundDimEnabled">false</item>
    </style>    
</resources> 

<activity 

    android:theme="@style/Theme.Transparent" 

</activity> 
```

# class - 同一元素中的两个 box-shadow 没有逗号分隔

> ID：12121289
> 
> 赞同：2
> 
> 时间：2012-08-25T10:45:28.867
> 
> 标签：class, styles, element, css

我知道我可以通过这种方式为同一个元素设置两个盒子阴影：

```
box-shadow: inset 0 2px 0px #dcffa6,  0 2px 5px #000; 
```

我将 css 属性分配给页面不同部分的类，所以我想知道是否有可能完成相同的操作，两次分配 box-shadow。就像是：

```
box-shadow: inset 0 2px 0px #dcffa6;
box-shadow:0 2px 5px #000; 
```

然而这不起作用，第二个 box-shadow 会覆盖第一个。

谢谢。

**编辑：**

我还尝试将两个类应用于同一个元素，但没有运气：http: [//jsfiddle.net/DQvyw/](http://jsfiddle.net/DQvyw/)

**编辑2：**

不是一个真正的解决方案，但我最终这样做了：http: [//jsfiddle.net/DQvyw/1/](http://jsfiddle.net/DQvyw/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T04:00:18.367

另一种方法是制作两个 div 并为每个 div 赋予正确的样式。

```
.divoutside{
    border-radius: 8px;
    box-shadow: 0px 2px 4px #4D4D4D;
}
.divinside{
    border: 1px solid #4D4D4D;
    border-radius: 8px;
    box-shadow:inset 0 0 2px #FFA500;
        padding: 4px;
}

<div class="divoutside"><div class="divinside"></div></div> 
```

示例：http: [//jsbin.com/ujuqem/1/edit](http://jsbin.com/ujuqem/1/edit)

快乐编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:13:36.083

你不能用两个单独的声明来做到这一点——在**CSS**中，当你为同一个规则定义两个值时，后一个声明会覆盖前一个。但是，使用 JavaScript，您可以连接第二个值，而不是用它替换旧值。就像是：

```
var el = document.getElementsByClassName("your_class_name");
var n = el.length;
for(var i = 0; i < n; i ++) {
    var cur = el[i];
    cur.style.boxShadow += ", 0 2px 5px #000000"; //notice the comma in the beginning
} 
```

我不确定这是你想要的，但我希望能以任何方式帮助你！

# asp.net - F11 键（调试模式）在 Visual Studio 2010 中不起作用？

> ID：12121290
> 
> 赞同：3
> 
> 时间：2012-08-25T10:45:37.387
> 
> 标签：asp.net, visual-studio-2010, visual-studio

在我的 Visual Studio 2010 中，`F11`Key 不起作用。

我试过[Step Into Property/Function (F11) 没有按预期工作，](https://stackoverflow.com/questions/4873225/visual-studio-2010-step-into-property-functionf11-doesnt-work-as-expected)但这对我没有帮助。

当我进入 Debug 菜单并单击 Step Into 时，它也是如此。

你能帮我吗？这对我来说已经成为一个非常大的问题！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-04-21T18:59:38.817

检查您是否有功能锁定键 - 键盘上的“F Lock”键。如果是这样，请尝试按一次，然后按`F11`进行调试。

或者，您可以`F11`在 IE 或其他窗口和键控上使用它来验证外部 Visual Studio的工作`F11`，这应该最大化窗口。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T15:25:32.167

试着去`Tools>Options`那里去`Environment>Keyboard`。在标题为“显示包含：的命令”的文本字段中键入术语“StepInto”。这会过滤下面的列表。选择“Debug.StepInto”。检查 F11 是否注册为“全局”。如果不这样做。

如果您安装了 resharper，请转到 resharper 选项，选择`Visual Studio Integration`和取消选择 resharper 快捷方式。如果您有任何其他覆盖快捷方式的东西，请尝试他们的选项/键盘/快捷菜单。

如果在您回到这里之前无法立即使用这些选项，请尝试一下。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-06T16:18:46.123

检查`F11`钥匙是否工作，今天确实发生在我身上，`F11`是键盘有问题

# c# - ajaxToolkit:MaskedEditExtender - 有没有办法编写自定义 MaskType 或者我可以使用“时间”吗？

> ID：12121293
> 
> 赞同：0
> 
> 时间：2012-08-25T10:45:43.037
> 
> 标签：c#, .net, validation, maskededitextender

我正在尝试使用 ajaxToolkit:MaskedEditExtender 进行时间间隔输入。现在我希望能够允许小时：分钟，但我这样做的方式，它只允许 00:00 到 23:59。然而，我需要它也允许 999:59，即我不想要一天中的某个时间，而是设置一个间隔。

```
 <ajaxToolkit:MaskedEditExtender 
                    runat="server" 
                    ID="StartTimeMaskedEdit" 
                    MaskType="Time" 
                    Mask="999:99" 
                    TargetControlID="TimeOutTextBox" 
                    ClearMaskOnLostFocus="true" 
                    AutoComplete="true" 
                    AutoCompleteValue="000:00" />          

               <ajaxToolkit:MaskedEditValidator 
                    runat="server" ID="StartTimeMaskedEditValidator" 
                    ControlExtender="StartTimeMaskedEdit" 
                    ControlToValidate="TimeOutTextBox" 
                    IsValidEmpty="false" 
                    InvalidValueMessage="*Invalid Time" 
                    InvalidValueBlurredMessage="*Invalid Time" /> 
```

当我使用`MaskType="number"`时，问题是一旦输入字段失去焦点，冒号就会消失（可能是因为冒号不是数字的有效部分）。它重新出现在焦点上，但这还不够好。

有没有办法在or约束中编写自定义`MaskType`或允许上述内容 ？`MaskType="Time"``"number"`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:59:42.097

试试下面的代码：

```
<ajaxToolkit:MaskedEditExtender ID="StartTimeMaskedEdit" runat="server" 
                        TargetControlID="TimeOutTextBox" Mask="999:99:99" 
                        MessageValidatorTip="true" MaskType="Time" CultureName="en-us" 
                        InputDirection="RightToLeft" ErrorTooltipEnabled="True" />

<ajaxToolkit:MaskedEditValidator ID="StartTimeMaskedEditValidator" runat="server" 
                         ControlExtender="StartTimeMaskedEdit"
                         ControlToValidate="TimeOutTextBox" IsValidEmpty="false" 
                         MaximumValue="23:59:59" MinimumValue="00:00:00"
                         EmptyValueMessage="Enter Time" 
                         MaximumValueMessage="23:59:59" 
                         InvalidValueBlurredMessage="Time is Invalid"
                         MinimumValueMessage="Time must be grater than 00:00:00"
                         EmptyValueBlurredText="*"
                         ToolTip="Enter time between 00:00:00 to 23:59:59">   
</asp:MaskedEditValidator> 
```

我希望它的工作和帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-01T22:41:56.890

我删除了验证部分，现在在代码隐藏中这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T07:11:30.350

```
<ajaxToolkit:MaskedEditExtender ID="MaskedEditExtender2" runat="server"
                        TargetControlID="txtRestaurantMacID"
                        Mask="NL {2}:NL {2}:NL {2}:NL {2}:NL {2}:NL {2}"
                        ClearMaskOnLostFocus="true"
                        ClearTextOnInvalid="true"
                        MessageValidatorTip="true"
                        OnFocusCssClass="MaskedEditFocus"
                        OnInvalidCssClass="MaskedEditError"
                        MaskType="None"
                        InputDirection="LeftToRight"
                        ErrorTooltipEnabled="True" /> 
```

并使用验证器

```
 <ajaxToolkit:MaskedEditValidator ID="MaskedEditValidator2" runat="server"
                    ControlExtender="MaskedEditExtender2"
                    ControlToValidate="txtRestaurantMacID"
                    ValidationExpression="^([0-9a-fA-F]{2}){5}[0-9a-fA-F]{2}$"
                    IsValidEmpty="False"
                    Display="Dynamic"
                    TooltipMessage="Enter valid Mac Id"
                    EmptyValueBlurredText="*"
                    InvalidValueBlurredMessage="*"
                    MaximumValueBlurredMessage="*"
                    MinimumValueBlurredText="*"
                    ForeColor="Red"
                    ValidationGroup="addres" /> 
```

# android - PhoneGap 显示使用 $.get 下载的图像

> ID：12121295
> 
> 赞同：0
> 
> 时间：2012-08-25T10:45:46.560
> 
> 标签：android, jquery-mobile, cordova

我正在尝试将从 URL 下载的 HTML 代码注入我的页面。
这里是 JQuery 代码

```
$('#messageScreen').live('pageshow',  function() {  
    $('#messageContent').empty();  
    var url = testServerDirAdrs + 'message?message_id=' + selectedMessageId;  
    $.get(url,  
    function(data){  
            $('#messageContent').append(data).trigger('create');  
            },'html');  
}); 
```

它工作正常，但是当下载的 html 包含图像时，它们不会显示。从网址下载的图片标签为：

```
<img src="/images/logos/muni_1_small.png" /> 
```

我想问题出在路径上。

知道如何解决这个问题吗？

谢谢，科斯塔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:48:13.420

您可以在下面找到 2 个可能的解决方案：

> 1.  图片可以从**网上**下载，所以 src 可以像 src="http://www.example.com/example/myexampleimg.png"
> 2.  图片**本地**存在，img 标签的 src 必须有相对路径。例如，如果将附加 img 标签的 html 文件与您的图像文件夹位于同一路径中，则该路径将为 ./images/myexampleimg.png。如果您的图像路径是一个文件夹，那么路径将是 ../images/myexampleimg.png 等

我希望这有帮助。

# highcharts - 多种不同的图表类型堆叠，以 y 值为颜色的列类型

> ID：12121297
> 
> 赞同：1
> 
> 时间：2012-08-25T10:45:59.223
> 
> 标签：highcharts

当图表应包含具有以下视觉呈现的类型时，实现具有多种类型的图表的最佳方法是什么。

```
| yellow   |blue|     gray      |  yellow |   gray   | 
```

即一维类型（但视觉上有高度），颜色表示“y”（这里由类别组成：黄色、蓝色、灰色）

您还应该能够堆叠这些：

```
| radical         | senseless |         high tension |
| yellow   |blue|     gray      |  yellow |   gray   | 
```

我可以通过一个图表类型的列来实现这一点，其中每个类别都有一个系列：

[http://jsfiddle.net/RCnYV/](http://jsfiddle.net/RCnYV/)

但是我怎样才能在上面添加另一种图表类型，例如：

```
yAxis (only for the line)
^                                                      ___
|-------            ___________________________   ____/
|       \__________/                           \/
|     radical         | senseless |         high tension |
|     yellow   |blue|     gray      |  yellow |   gray   |
-----------------------------------------------------------> xAxis (shared) 
```

所以线系列应该高于（而不是悬停在）其他系列。请注意，xAxis 在所有系列之间共享，即所有系列都具有完全相同的数据点。只是有些系列以“line”类型呈现，而另一些则以新类型呈现（我不知道它的好名字，ribbon？）。

还有什么其他方法可以创建类似的图表？上面的一个问题是我需要为每个目录创建一个系列，即总共 2 * 系列，而不是像基本图表那样只有两个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:24:34.690

您是否正在寻找类似@ [http://jsfiddle.net/jugal/cABfL/](http://jsfiddle.net/jugal/cABfL/)的东西？`height`您可以通过为您的 yAxis指定 s 并操作它来堆叠图表，`top`以便它们将一个堆叠在另一个之上

```
 yAxis: [{
            top: 300,
            lineWidth: 2,
            offset: 0,
            height: 200,
            tooltip: {
                enabled: true,
                formatter: function() {
                    return this.series.name + ": " + $wnd.Highcharts.numberFormat(this.y, 2);
                }
            }

            },
        {
            height: 200,
            lineWidth: 2,
            offset: 0,
            tooltip: {
                enabled: true,
                formatter: function() {
                    return this.value + 50;
                }
            }

            }], 
```

类似的堆叠示例可用@http [://www.highcharts.com/stock/demo/candlestick-and-volume](http://www.highcharts.com/stock/demo/candlestick-and-volume)

**编辑**
回答问题的第二部分`(Also what other ways are there to create a similar chart?)`。highchart 似乎没有为这种可视化带来任何开箱即用的东西，因此您需要自己围绕现有的行和列来获得这种可视化。

我就是这样做的。
我尝试为每个功能区使用[堆叠条形图](http://www.highcharts.com/demo/bar-stacked)，因此需要 2 个系列，1 个用于线条，1 个用于两个功能区。但是在尝试之后，结果条形图只不过是一个旋转的柱形图（至少是一种），它似乎将垂直轴作为 X，水平轴作为 Y，因此它搞砸了任何其他图表，即折线图被弄乱了，因为它希望水平线是 X。

基本上使用条形图并没有让我走得太远。我继续使用折线图（用很粗的线`lineWidth:50`) 并为功能区的每个部分绘制了一个水平（每个点的 Y 常数）折线图，其中包含一个系列，因此能够为每个部分赋予不同的颜色。每个色带都需要一个单独的 Y 轴，如上所述具有不同的偏移量。还删除了所有工具提示、Y 轴标签和网格线，使其看起来与折线图不同，更像是功能区。可能需要工具提示，但折线图提供了点的工具提示，在我们的例子中，我们想要两点之间的部分的工具提示，因此编写了一个 mouseOver 事件处理程序并计算了那里的部分的长度。现在唯一受到伤害的部分是为功能区的每个部分创建一个系列，因此继续编写以下实用函数来接受值列表，

```
 // usage: createSeries([0, 3, 4, 6], 1)
    // Creates 4 series and assigns them all to yAxis 1
    // you can extend this to take colors etc too, as per requirement
    function createSeries(data, yAxisIndex) {
        var i;
        var series = [];
        for (i = 0; i < data.length - 1; i++) { // Node lenghth-1
            var start = data[i];
            var end = data[i + 1];
            series.push({
                yAxis: yAxisIndex,
                animation: false,
                stack: 0,
                data: [[start, 0], [end, 0]],
                lineWidth: 50,
                marker: {
                    enabled: false
                },
                tooltip: {
                    pointFormat: function() {
                        return "";
                    }
                },
                events: {
                    mouseOver: function() {
                        alert(this.data[1].x - this.data[0].x);
                    }
                },
                showInLegend: false

            });
        }
        return series;
    } 
```

所需要的只是将这些系列推入现有系列，然后将其提供给 highchart 构造函数。

**最终的 jsFiddle：http:** [//jsfiddle.net/jugal/cABfL/](http://jsfiddle.net/jugal/cABfL/)

# joomla - 在类别博客布局菜单中单击文章时配置模块（Joomla 2.5）

> ID：12121302
> 
> 赞同：2
> 
> 时间：2012-08-25T10:46:46.153
> 
> 标签：joomla, menu, module, position, joomla2.5

假设我有这三个模块：

*   `main_menu_module`（链接到具有`Home Page`链接和`Sport articles Blog Layout`链接的菜单）
*   `module1`
*   `module2`

该模块`main_menu_module`应显示在所有页面中（可以）。

我要那个：

`module1`仅在**类别的****博客布局列表**中`Sport`，而不是在单击该列表中的***单个`Sport`文章***时。

`module2`仅在该**列表中的*****单个`Sport`文章***中，而**不是**在显示**博客布局列表**时。

现在的问题是：

**使用 Joomla 有可能吗？**即使不是这样，也没问题。我只想要一个链接来证明这一事实。

请问我的问题是否不够清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T19:49:53.230

你的问题很清楚并且有道理。这可以在 Joomla 中完成，但需要扩展。由于 itemID 继承，Basic Joomla 不会这样做。任何不直接具有菜单项的内容项都从其父项继承 itemID，因此分配给运动类别的模块也将显示在该类别中的各个项目上。

为了解决这个问题，您需要安装 Advanced Module Manager。这使您可以更好地控制模块的显示位置，例如在确定模块是否应显示时包括或排除子项。

[http://www.nonumber.nl/extensions/advancedmodulemanager](http://www.nonumber.nl/extensions/advancedmodulemanager)

# django - 如何在 mongoengine 上为 ListField 添加属性

> ID：12121303
> 
> 赞同：0
> 
> 时间：2012-08-25T10:46:47.733
> 
> 标签：django, mongoengine

我使用 mongoengine，非常喜欢它。
现在我用 django 工作，我遇到了一个问题，如何为 ListField 设置属性，
例如这是我的模型

```
class Bussiness(Document):
    tags = ListField(StringField()) 
```

我想在这样的模板上使用它：

```
{% for tag on bussiness.tags %}
    {{ tag.url }}
{% endfor %} 
```

但`tag.url`我不想将它保存到数据库中，只是希望**在模型级别生成它**，并且只在数据库中制作一些字符串标签。
如果我在模板上硬编码，我必须到处写，那是我厌恶的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T13:21:26.427

这不会起作用，因为标签只是一个字符串（您将其定义为 a `StringField`）。

您可以将标签作为嵌入文档，其中 url 是一个属性，例如：

```
class Tag(EmbeddedDocument):
    name = StringField()

    @property
    def url(self):
        return "http://my-ace-site.come/businesses/%s/"

class Business(Document):
    tags = ListField(StringField()) 
```

# android - 完全透明的 EditText

> ID：12121307
> 
> 赞同：3
> 
> 时间：2012-08-25T10:47:23.100
> 
> 标签：android, android-edittext, transparency

我想在背景和 textColor 方面透明编辑文本。所以我在我的java代码中使用了这行：

```
tempEditText.setTextColor(Color.TRANSPARENT);
tempEditText.setBackgroundColor(Color.TRANSPARENT); 
```

但不幸的是，当我开始在上面输入任何字符时，这个 tempEditText 对象就会显示出来。我希望它在我输入某些内容时完全不可见。所以我希望它能够集中注意力，获取一些文本，并且我希望能够检索在其上键入的字符串，但所有这些都处于 edittext 的不可见状态。我测试可见性=不可见，但在这种情况下，edittext 不能给出文本......

```
<EditText
        android:id="@+id/tempEditText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#00000000"
        android:textColor="#00000000"
        android:singleLine="true" /> 
```

有小费吗？谢谢你...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T11:00:34.677

尝试：

> android:background="@android:color/transparent"

或者

> 机器人：背景=“@null”

编辑：显示虚拟键盘：

```
InputMethodManager imm = (InputMethodManager)getSystemService(
      Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(exampleView.getWindowToken(), 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T10:52:35.980

更改 EditText 背景`android:background="#00000000"`或`android:background="@null"`在您的 xml 文件中。

对于 xml 文件中的文本颜色 `android:textColor="#00000000"`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T13:38:26.740

尝试这个，

```
<EditText
    android:id="@+id/editText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:alpha="0"> 
```

或以编程方式，您可以将 alpha 设置为 EditText

```
editText.setAlpha(0.0f); 
```

注意：问题是用户将无法看到光标！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T10:55:53.240

将`EditText`背景属性设为`#bb000000`透明。

如果您在 Eclipse 上，请使用 GUI 来执行此操作，或者在您的 XML 文件中执行此操作`android:background="#bb000000"`。

![日蚀图像]](../Images/c6e5847b061765a49274cecd675f18e7.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-26T21:36:23.417

```
 <EditText
            android:layout_width="0dp"
            android:layout_height="match_parent"
            android:background="@null"
            android:id="@+id/search_input"
            app:layout_constraintLeft_toRightOf="@+id/filter"
            app:layout_constraintRight_toLeftOf="@+id/search_button"
            /> 
```

使用这条线，那么它显然会起作用

```
 android:background="@null" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-18T12:45:33.340

我在我的 XML 文件中这样做了：

```
android:textCursorDrawable="@null"
android:textColor="@android:color/transparent"
android:background="@null" 
```

# c# - 使用 WebClient 加载 HTML

> ID：12121310
> 
> 赞同：1
> 
> 时间：2012-08-25T10:47:43.667
> 
> 标签：c#, webclient, html-agility-pack

我正在尝试下载网页：

```
string remoteUri = "http://whois.domaintools.com/94.100.179.159";
WebClient myWebClient = new WebClient();
byte[] myDataBuffer = myWebClient.DownloadData(remoteUri);
string download = Encoding.ASCII.GetString(myDataBuffer);
HtmlDocument doc = new HtmlDocument();
doc.LoadHtml(download);
doc.Save("file1.htm"); 
```

有错误

> webexception 未处理：(403) 禁止。

还有其他方法可以下载页面吗？我试过 HtmlDocument 类，但我可以看到它需要在浏览器中加载网页。

```
HtmlWeb hwObject = new HtmlWeb();
        string ip = "http://whois.domaintools.com/";
        HtmlAgilityPack.HtmlDocument htmldocObject = hwObject.Load(ip);

        foreach (HtmlNode link in htmldocObject.DocumentNode.SelectNodes("//meta[@name = 'description']"))
        {
            ...
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:55:24.107

```
using (var myWebClient = new WebClient())
{
    myWebClient.Headers["User-Agent"] = "MOZILLA/5.0 (WINDOWS NT 6.1; WOW64) APPLEWEBKIT/537.1 (KHTML, LIKE GECKO) CHROME/21.0.1180.75 SAFARI/537.1";

    string page = myWebClient.DownloadString("http://whois.domaintools.com/94.100.179.159");

    HtmlDocument doc = new HtmlDocument();
    doc.LoadHtml(page);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T10:54:59.873

当站点在请求中找不到任何用户代理时，站点只会返回一个错误，这是工作代码。

```
string remoteUri = "http://whois.domaintools.com/94.100.179.159";
HtmlDocument doc = new HtmlDocument();
using (WebClient myWebClient = new WebClient())
{
  myWebClient.Headers.Add(HttpRequestHeader.UserAgent, "some browser user agent");
  doc.Load(myWebClient.OpenRead(remoteUri));
}
doc.Save("file1.htm"); 
```

或者如果你想使用`HtmlWeb`

```
HtmlWeb hwObject = new HtmlWeb();
hwObject.UserAgent = "some browser user agent";
//more code... 
```

# jasper-reports - 隐藏列时删除空格

> ID：12121312
> 
> 赞同：3
> 
> 时间：2012-08-25T10:48:07.427
> 
> 标签：jasper-reports

我正在使用*JasperReports 4.5.0*来生成报告。我正在生成不同格式的报告，如 html、csv、pdf、xls、doc。在我的一份报告中，我有 6 列说*col1, col2, col3, col4, col5, col6*。但根据我想隐藏*col4*的条件。为此，我正在使用***printWhenExpression***。现在它根据条件隐藏列，但问题是该列占用的空间保持不变。

如何删除*col3*和*col5*之间的这个空白空间？

下面的代码是为了了解我是如何使用它的。

```
<staticText>
                <reportElement x="500" y="0" width="0" height="20" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true">
                    <printWhenExpression><![CDATA[$P{routeType}==Boolean.FALSE]]></printWhenExpression>
                </reportElement>
                <box>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[Col4]]></text>
            </staticText>

<textField isBlankWhenNull="true">
                <reportElement x="500" y="0" width="0" height="20" isRemoveLineWhenBlank="true" isPrintWhenDetailOverflows="true">
                    <printWhenExpression><![CDATA[$P{routeType}==Boolean.FALSE]]></printWhenExpression>
                </reportElement>
                <box>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center" verticalAlignment="Middle"/>
                <textFieldExpression><![CDATA[$F{col4}]]></textFieldExpression>
            </textField> 
```

仅当 routeType 值为 false 时才会打印此字段。否则，它也应该删除带有空格的列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-03T10:12:12.720

*   您可以使用***JasperReports API***或***DynamicJasper API***

[这是](http://dynamicjasper.com/documentation-examples/getting-started/)使用***DynamicJasper API的示例***

*   您可以使用“假”字段（*textField*）来显示一列的数据，而不是显示两个字段（两列）

*您可以在两个textFields*下放置另一个*textField*（其宽度为两个*textFields*）。使用***printWhenExpression***属性，您可以显示两列或一列。

 ***### 这是工作示例。

这是我的报告设计（在*iReport*中）：

![在此处输入图像描述](../Images/303e51bc16b83f5ff3a212090aa8fba4.png)

我的*jrxml*文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ..>
    <parameter name="hideStreetColumn" class="java.lang.Boolean">
        <defaultValueExpression><![CDATA[false]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT id, street, city FROM address]]>
    </queryString>
    <field name="ID" class="java.lang.Integer"/>
    <field name="STREET" class="java.lang.String"/>
    <field name="CITY" class="java.lang.String"/>
    <title>
        <band height="79" splitType="Stretch">
            <staticText>
                <reportElement x="139" y="13" width="279" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font isBold="true" isItalic="true"/>
                </textElement>
                <text><![CDATA[Sample of hiding column]]></text>
            </staticText>
            <textField>
                <reportElement x="189" y="33" width="211" height="20"/>
                <box leftPadding="10"/>
                <textElement/>
                <textFieldExpression><![CDATA["To hide Street column: " + $P{hideStreetColumn}]]></textFieldExpression>
            </textField>
        </band>
    </title>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement x="100" y="0" width="200" height="20">
                    <printWhenExpression><![CDATA[$P{hideStreetColumn}]]></printWhenExpression>
                </reportElement>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{CITY}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ID}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="0" width="100" height="20">
                    <printWhenExpression><![CDATA[!$P{hideStreetColumn}]]></printWhenExpression>
                </reportElement>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{STREET}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="200" y="0" width="100" height="20">
                    <printWhenExpression><![CDATA[!$P{hideStreetColumn}]]></printWhenExpression>
                </reportElement>
                <box leftPadding="10">
                    <topPen lineWidth="1.0"/>
                    <leftPen lineWidth="1.0"/>
                    <bottomPen lineWidth="1.0"/>
                    <rightPen lineWidth="1.0"/>
                </box>
                <textElement/>
                <textFieldExpression><![CDATA[$F{CITY}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

要显示所有三列，我们应该将***hideStreetColumn***参数设置为**false**。结果将是：

![所有列都可见](../Images/0ebe89b86cc3e6fa193883c4fe8082e4.png)

要只显示两列（街道列隐藏），我们应该将***hideStreetColumn***参数设置为**true**。结果将是：

![街头栏目隐藏](../Images/7a2c254d8a03a4d187412863a85317f1.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-08T06:47:59.147

你可以用两个细节带来欺骗它。一个细节带 B1 有 6 列，第二个带 B2 有 5 列。然后在带属性中，当 printWhenExpression 为假时打印 B1，当 printWhenExpression 为真时打印 B2。***

# android - Android：如何知道应用程序是否可以启动

> ID：12121313
> 
> 赞同：1
> 
> 时间：2012-08-25T10:48:25.790
> 
> 标签：android, launching-application

有没有办法判断一个应用程序是否可以启动？我有“getPackageManager().getInstalledPackages(0)”调用的已安装应用程序列表。并非此列表中检索到的所有项目都可以启动。例如，“Android 系统”、“TTS 服务”无法启动。如何过滤掉可以启动的应用程序和不能启动的应用程序？

谢谢！拉胡尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T10:53:22.507

您可以按如下方式获取特定包名称的主要 Intent：

```
Intent mIntent = ctx.getPackageManager().getLaunchIntentForPackage(packageName); 
```

如果没有要启动的主 Activity，则 Intent 将为空

```
if (mIntent == null) {
    //Cannot be launched
} 
```

如果意图不为空，则可以启动它。

# algorithm - 有哪些学习回溯、分支定界和动态规划算法的好资源？

> ID：12121316
> 
> 赞同：7
> 
> 时间：2012-08-25T10:49:09.273
> 
> 标签：algorithm, data-structures, dynamic-programming, backtracking, branch-and-bound

CLRS 似乎没有涵盖回溯/分支绑定。我在网上尝试了几个资源，虽然我得到了这些背后的想法，但我无法为背包问题编写代码。所以，我想要的东西，可能是，解决一个问题，用这 3 种方法解决它，至少给出伪代码。或者任何你喜欢的资源都会有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T19:11:45.383

在使用回溯、分支/绑定等的算法中，通常有解决方案空间和搜索空间的概念。该算法的目标是遍历搜索空间以到达解空间中的一个点，通常是某个度量认为最优的点，或者确定解空间是空的（不访问搜索空间中的每个元素） .

第一步是定义一种机制，以一种有效的格式表达搜索空间中的元素。该表示应该允许您表达哪些元素构成了解决方案空间，一种通过用于测量的度量来评估元素质量的方法，一种确定您可以从当前状态到达的相邻元素的方法等等。

通常，这些算法将遍历搜索空间直到找到解决方案，或者如果不存在解决方案则退出。遍历是通过访问一系列点来进行的，通常并行地探索搜索空间。这是分支方面；您正在决定访问搜索空间的某些部分。

在搜索空间的遍历期间，他们可能会确定一条特定的路径不值得，因此他们可能会决定他们不会探索从该路径可到达的搜索空间部分。这是非常有界限的方面。

很多时候，空间的遍历是通过使用部分解决方案来完成的。例如，如果您有一个由 8 位表示的搜索空间，您可以将固定值分配给 8 位中的两个特定位，然后为剩余的 6 位表示的空间搜索一个理想的解决方案。您可能会发现将两位特定分配给一个固定值会导致无法存在解决方案（或解决方案的质量非常差）的情况。然后，您可以绑定搜索空间，以便算法不再探索该子空间中的任何元素，该子空间通过为这两个位分配特定的固定值来定义。

对于基于回溯的系统，伪代码是微不足道的。挑战在于找到有效的表示来表示搜索空间，表示部分解决方案，找出特定解决方案的有效性，提出规则来确定先走哪条路径，制定衡量解决方案质量的指标，弄清楚什么时候回溯，或者回溯多远等等……

```
StateStack.push(StartState)
loop{
  curState = StateStack.top
  nextState = calculateNextState(curState)
  StateStack.push(nextState)
  if(reachedFinalGoal(nextState)){
     break;
  }
  if(needToBackTrack(StateStack)){
     curState = nextState
     stateToBackTrackTo = calculateStateToBackTrackTo(stateStack)
     while(curState != stateToBackTrackTo){
       stateToGoBackTo = stateStack.pop
       curState = RollBackToState(stateToGoBackTo)
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:50:15.567

这些是搜索技术，而不是算法。首先，您应该清楚地了解搜索空间是什么。例如，在背包问题的情况下，该问题将由所有可能的可用对象子集组成。有时存在一些约束来定义哪些解决方案是有效的，哪些是无效的，例如那些超过背包总体积的对象集是无效的。您还应该有明确定义的目标（此处所选对象的总价值）。

实际上，Wikipedia 包含对[Branch and Bound的非常准确的描述。](http://en.wikipedia.org/wiki/Branch_and_bound)它相当高级，但任何更详细的描述都需要对搜索空间的结构进行假设。对于[回溯](http://en.wikipedia.org/wiki/Backtracking)，甚至还有一些伪代码，但又非常笼统。

另一种（可能更好）的方法是找到这些技术的示例应用并进行研究。在 CLRS 中至少有几个涉及 DP 的算法，如果需要，您当然可以搜索更多。

# oop - 在面向对象的程序中使用回调是一种好习惯吗？

> ID：12121321
> 
> 赞同：3
> 
> 时间：2012-08-25T10:49:24.270
> 
> 标签：oop, callback

在面向对象的程序中使用回调有什么经验？回调是否会导致代码质量更高（更易于理解、扩展和维护）？还是应该在面向对象的代码中避免回调？

为了说明这个问题，考虑以下两种方式，一个类可以通知它完成了处理异步任务（代码在 C++ 中使用普通函数指针作为回调，但这些只是细节，问题是关于面向对象的实践）：

1.  定义通知接口并将实现该接口的对象传递给异步读取器：

    ```
    class IReadFinishedListener {
       virtual void readDone() = 0;
    };

    class ReaderA {
      void asyncRead(IReadFinishedListener& readFinished);
    }; 
    ```

2.  将回调传递给阅读器：

    ```
    class ReaderB {
       void asyncRead(void (*readFinishedCallback)(void));
    }; 
    ```

从面向对象的角度来看，第一个解决方案似乎更纯粹。您有一个明确定义的接口，它记录了实现该接口的代码的作用。您可以轻松找到实现该接口的类，代码可以更容易理解。

第二种解决方案更轻量级，它不需要额外的接口，这通常很难设计和命名。它看起来也更灵活，因为它可以减少处理读取的类和读取完成时通知的代码之间的耦合。但是，由于没有明确的接口记录哪些类可以处理通知，因此代码可能会变得难以理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:08:59.483

我认为第一个变体在 OOP 中更好，这就是为什么：

1.  In OOP, as I think, objects are paramount, not actions, and with this ideology it seems more correctly, when objects do something through other objects.
2.  You declare some entity which has it's own area of ​​responsibility, and you have ability to change this area flexible and simple.

# java - 两个逗号之间的字符串 Java

> ID：12121322
> 
> 赞同：3
> 
> 时间：2012-08-25T10:49:27.120
> 
> 标签：java

如何隔离两个逗号之间存在的字符串？

即安吉洛、马可、尼克、布兰登、保罗

我想检索名称 Marco。哪种方式最合适？我应该使用正则表达式吗？如果是，谁能解释我怎么做？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-25T10:50:32.263

最简单的解决方案是使用`String.split(",")`

像这样：

```
String str = "Angelo,Marco,Nick,Brandon,Paul";
String[] myStrings = str.split(",");
String marco = myStrings[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T11:04:22.290

试试这个

```
String s = "Angelo,Marco,Nick,Brandon,Paul";
String array[] = s.split(",");

for (int i = 0; i < array.length; i++) {
    System.out.println("element "+i+" "+array[i]);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T10:52:21.980

您可以使用拆分，例如

```
String[] names = "Angelo,Marco,Nick,Brandon,Paul".split(",");
// or
List<String> names = Arrays.asList("Angelo,Marco,Nick,Brandon,Paul".split(","));
// or
for(String name: "Angelo,Marco,Nick,Brandon,Paul".split(","))
    System.out.println(name); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T10:53:28.563

使用逗号分隔符分割字符串。

```
 **try it**

   String str = "Angelo,Marco,Nick,Brandon,Paul";

    String lines[]= str.split(",");
    String name = lines[1]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-25T11:02:07.157

好吧，让我们不要让它变得复杂，使用`split()`和`Arrays.asList()`方法......

```
String str = "Angelo,Marco,Nick,Brandon,Paul";

String[] arr = str.split(",");

List<String> alist = new ArrayList<String>(Arrays.asList(arr);

String marco = alist.get(alist.indexOf("Marco")); 
```

瞧……完成了……！！！Marco现在和你在一起......

# javascript - 如何在用作参数的函数中设置 Javascript 中的局部变量？

> ID：12121332
> 
> 赞同：2
> 
> 时间：2012-08-25T10:50:55.920
> 
> 标签：javascript, cordova, barcode-scanner

我在 Android 应用程序中使用 Barcodescannerplugin for Phonegap 在 Javascript 中遇到问题。

我使用的插件带来了一个小的 Javascript，以便在我的 Phongap 应用程序中使用 Barcodescanner。但在我看来，提供的 javascript 函数的接口并不是那么理想，因为我不想在使用这些方法的每个位置都进行错误处理。

这就是为什么我试图使该界面更简单的原因，我只需要调用一个方法`scanBarcode()`，并且调用脚本将从扫描的文本中获取文本，或者如果出现故障，则什么也不获取。这是代码：

```
function scanBarcode(){
    var resultText = '';
    window.plugins.barcodeScanner.scan( 
        function(result) {
            if (!result.cancelled){
                resultText = result.text;
            }
        },
        function(error) {
            alert("Scanning failed: " + error);
        }
    );
    return resultText;
} 
```

我使用的插件可以在：[Github Phonegap Plugins Android/BarcodeScanner](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner/)

我的方法的结果总是一样的，一个空字符串。我认为原因是变量范围，但我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T10:55:33.623

原因是该`window.plugins.barcodeScanner.scan`方法是异步执行的——直到方法返回成功回调才被调用。

我建议`Promise`从您的方法中返回一个对象，例如（以 jQuery 为例）：

```
var result = $.Deferred();
window.plugins.barcodeScanner.scan( 
    function(result) {
        if (!result.cancelled){
            result.resolve(result.text);
        }
    },
    function(error) {
        result.reject(error);
    }
);

return result; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T08:27:39.333

感谢您的帮助，现在可以了：）

对于所有其他也遇到这些问题的人，解决方案如下所示：

```
function scanBarcode(){
    var resultObject = $.Deferred();
    window.plugins.barcodeScanner.scan(
        function(result) {
            if (!result.cancelled){
                resultObject.resolve(result.text);
            } else {
                resultObject.resolve('');
            }
        },
        function(error) {
            resultObject.resolve('');
        }
    );
    return resultObject;
} 
```

现在只需这么说就很容易获得扫描值：

```
function clickScanBarcode(){
    var result = scanBarcode();
    result.done( function(text){
        alert('Barcodetext:'+text);
    });
} 
```

我已经更改了错误代码并取消了，我总是得到一个空字符串来处理。在我的情况下，更多的错误处理没有用。

问候，马库斯

# iphone - 使导航栏不下推内容

> ID：12121336
> 
> 赞同：1
> 
> 时间：2012-08-25T10:51:48.433
> 
> 标签：iphone, objective-c, ios

我一直在到处寻找解决此问题的方法，但找不到...

我有一个类似于 facebook 的 UIImageView，如果你点击屏幕，图像文本和 UINavigationBar 就会出现。问题是 UINavigationBar 在出现时将所有内容向下推......

有没有办法将它放在更高的独立层或其他不会影响视图的其余部分的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:30:30.817

我假设当用户点击 imageView 时，它的代码正在执行推送。你应该做的是使用 UIViewController 的 'presentViewController:' 方法。你有一些关于动画如何发生的选项，虽然这个视图将占据屏幕，但它不会被“推送：”或看起来被“推送”。在这种情况下，新视图是它自己的 UIViewController 子类的控制器。[我使用这种技术。]

其他选项是查看 UIView 的 '+ (void)transitionFromView:(UIView *)fromView toView:(UIView *)toView duration:(NSTimeInterval)duration options:(UIViewAnimationOptions)options completion:(void (^)(BOOL finished) )completion' 方法，并将新视图旋转到视图中。然后，您的原始视图控制器也将控制此视图，您可以做您想做的事，然后当用户点击某些东西时，您会返回原始视图。[我也使用这种技术]。

编辑：

您在评论中澄清的问题的解决方案是将导航栏上的属性设置为透明。在 iPad 上，现在没有 Xcode，但你会在类描述中看到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T13:56:16.467

由于我找不到一种方法来使内容与导航栏是否存在无关，因此在显示栏时我只是将内容向上移动了 22px（UINavigationBar 的默认高度）。这完美地解决了我的问题。

# database - 数据库隔离级别应用程序

> ID：12121338
> 
> 赞同：0
> 
> 时间：2012-08-25T10:51:54.440
> 
> 标签：database, concurrency, locking, isolation-level

我了解 Wikipedia 和 Oracle 文档中详细记录的数据库隔离级别。

我可能有几个问题：

1.  对于特定的隔离级别，数据库是否只决定要锁定的资源（例如表、行或列中的数据）还是可配置的？
2.  除了隔离级别，用户/应用程序是否可以独占对某些资源创建锁定？如果不是，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:47:33.250

Oracle 将自动处理所有隔离级别的锁。Oracle 还允许您自己设置锁。

[Oracle 如何锁定数据](http://docs.oracle.com/cd/B28359_01/server.111/b28318/consist.htm#i5704)

# class - 使 Doxygen 文档成为在宏调用中定义的结构/类

> ID：12121340
> 
> 赞同：0
> 
> 时间：2012-08-25T10:52:10.067
> 
> 标签：class, macros, struct, call, doxygen

我有这个[`PACKED`宏](https://github.com/marciof/Eon/blob/master/library/util.h#L207)，它接收一个[`struct`定义](https://github.com/marciof/Eon/blob/master/core/architecture/x86/multiboot/Boot_Device.h#L21)并使用编译器注释返回它以使其打包。

例如：

```
/**
 * ...
 */
PACKED(struct A {
    /**
     * ...
     */
    int x;
}); 
```

我已经尝试了几个 Doxygen 选项来包含该文档，但到目前为止我还没有成功。我想出的最接近的是：

```
ENABLE_PREPROCESSING = YES
PREDEFINED = PACKED(type)=type
MACRO_EXPANSION = YES 
```

但这会弄乱`struct`和成员的文档（通过 确认`doxygen -d Preprocessor`）。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T15:35:14.833

原来这是[Doxygen 中的一个错误](https://bugzilla.gnome.org/show_bug.cgi?id=686983)。

一种可能的解决方法是使用`@class`, 等等。

# ssh - 在 ssh 会话终止后运行程序

> ID：12121343
> 
> 赞同：0
> 
> 时间：2012-08-25T10:52:22.900
> 
> 标签：ssh

我正在尝试通过 ssh 在服务器上运行一个长 java 程序，我尝试使用：

```
command & 
```

这在我的本地机器上可以正常工作，但是当我终止本地 ssh 连接时，程序也会终止。有没有办法可以运行它并将输出转到某个文本文件，以便我可以登录并在以后检查完成情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T10:55:22.173

你可以使用[nohup](http://en.wikipedia.org/wiki/Nohup)

```
nohup command & 
```

# c# - 如何启用/禁用录制音频设备？

> ID：12121346
> 
> 赞同：2
> 
> 时间：2012-08-25T10:52:45.503
> 
> 标签：c#, audio

有没有办法在 C# 中启用/禁用录制音频设备？我的意思不是静音和取消静音。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:12:24.817

这已经在 SO 的不同地方发布了，无论如何，看看这个应用程序，这可能会对你有所帮助。

[http://www.codeproject.com/KB/cs/HardwareHelper.aspx](http://www.codeproject.com/KB/cs/HardwareHelper.aspx)

还可以访问[Win32 API 函数以编程方式启用/禁用设备](https://stackoverflow.com/questions/1438371/win32-api-function-to-programatically-enable-disable-device)

# jquery - 两个 div - 每个在同一页面上都有滚动条？

> ID：12121349
> 
> 赞同：0
> 
> 时间：2012-08-25T10:53:02.177
> 
> 标签：jquery, jquery-tools

我正在玩这个例子：

[http://jquerytools.org/demos/rangeinput/scrollbar.htm](http://jquerytools.org/demos/rangeinput/scrollbar.htm)

我如何将其中两个（每个都有自己的控件）放在同一页面上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:10:02.837

我猜你会通过为每个滚动条使用唯一 ID（始终是唯一的）来做这样的事情：

```
<head>
<script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script>
<link rel="stylesheet" type="text/css" href="http://jquerytools.org/media/css/standalone.css"/>
</head>
<body>

<!-- our first scrollable element -->
<div id="scrollwrap">
  <div id="scroll">
    This is the first slider on the same page !!!
  </div>
</div>

<!-- rangeinput that controls the scroll -->
<input type="range" max="2600" step="10" id="range"/>

<br><br>

<!-- our next scrollable element -->
<div id="scrollwrap2">
  <div id="scroll2">
    This is the second slider on the same page !!!
  </div>
</div>

<!-- rangeinput that controls the scroll -->
<input type="range" max="2600" step="10" id="range2" />

<script>
var scroll = $("#scroll");
$("#range").rangeinput({
    onSlide: function(ev, step)  {
        scroll.css({left: -step});
    },
    progress: true,
    value: 100,
    change: function(e, i) {
        scroll.animate({left: -i}, "fast");
    },
    speed: 0
});

var scroll2 = $("#scroll2");
$("#range2").rangeinput({
    onSlide: function(ev, step)  {
        scroll2.css({left: -step});
    },
    progress: true,
    value: 100,
    change: function(e, i) {
        scroll2.animate({left: -i}, "fast");
    },
    speed: 0
});
</script>
</body>
</html>​ 
```

[**小提琴**](http://jsfiddle.net/s35kS/1/)

# c# - 在 C# 中通过 TCP 进行面向对象的通信

> ID：12121350
> 
> 赞同：1
> 
> 时间：2012-08-25T10:53:07.167
> 
> 标签：c#, oop, design-patterns, tcp

我正在开发一个简单的应用程序，它将通过 TCP 从硬件接收数据。我在互联网上搜索了一下如何开发一个接收 TCP 数据的程序，但没有找到任何我满意的东西。它要么是对如何在 C# 中使用 TCP 的非常简化的描述，要么是对高级框架的描述。

我想要一个简单的最佳实践，说明如何以良好的面向对象的方式组织我的程序的通信部分。有什么建议么？

理想情况下，我希望通过 TCP 发送的不同结构存储在程序中的相应结构中

发送内容的结构：

```
Head
{
  Int16    Mode;
  Time     Start_time //(Unix time)
  Int16    Number of records
}
for each record if mode == 1
  char[20]    Name_of_record
for each record
  float    Value_of_record //(hardware-specific float)
  Int16    Flag_of_record
Foot
{
  Time     Stop_time //(Unix time)
} 
```

这是每分钟发送一次。没有开销。它只是发送所有变量的值，仅此而已

**编辑** 我对服务器没有任何控制权。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:45:03.553

我们可以使用异步通信接收 TCP 消息。

# 初始化服务器套接字并尝试连接：

```
// Specify the size according to your need.
private byte[] bytData = new byte[1024 * 50000];
private Socket oServerSocket;

private void WindowLoaded(object sender, RoutedEventArgs e)
{
    try
    {
        // We are using TCP sockets
        this.oServerSocket = new Socket(
        addressFamily: AddressFamily.InterNetwork,
        socketType: SocketType.Stream,
        protocolType: ProtocolType.Tcp);

        // Assign the any IP of the hardware and listen on port number which the hardware is sending(here it's 5656)
        var oIPEndPoint = new IPEndPoint(address: IPAddress.Any, port: 5656);

        // Bind and listen on the given address
        this.oServerSocket.Bind(localEP: oIPEndPoint);
        this.oServerSocket.Listen(backlog: 4);

        // Accept the incoming clients
        this.oServerSocket.BeginAccept(this.OnAccept, null);
        this.oLogger.WriteLog("Server started");
    }
    catch (Exception ex)
    {
        // Handle Exception
    }
} 
```

# 成功连接时：

```
private void OnAccept(IAsyncResult ar)
{
    try
    {
        var oClientSocket = this.oServerSocket.EndAccept(asyncResult: ar);

        // Start listening for more clients
        this.oServerSocket.BeginAccept(callback: this.OnAccept, state: null);

        // Once the client connects then start receiving the commands from her
        oClientSocket.BeginReceive(
        buffer: this.bytData,
        offset: 0,
        size: this.bytData.Length,
        socketFlags: SocketFlags.None,
        callback: this.OnReceive,
        state: oClientSocket);
    }
    catch (Exception ex)
    {
        // Handle Exception
    }
} 
```

# 处理收到的消息：

```
private void OnReceive(IAsyncResult ar)
{
    try
    {
        var oClientSocket = (Socket)ar.AsyncState;
        oClientSocket.EndReceive(asyncResult: ar);

        /* Process the data here

        BitConverter.ToInt32(value: this.bytData, startIndex: 0);
        string SomeString= Encoding.ASCII.GetString(bytes: this.bytData, index: 8, count: 5);

        */

        // Specify the size according to your need.
        this.bytData = null;
        this.bytData = new byte[1024 * 50000];
        oClientSocket.BeginReceive(
            buffer: this.bytData,
            offset: 0,
            size: this.bytData.Length,
            socketFlags: SocketFlags.None,
            callback: this.OnReceive,
            state: oClientSocket);
    }

    catch (Exception ex)
    {
        // Handle Exception
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:18:20.343

通常步骤是相同的​​：

1) 从 tcp 流中读取数据并将其存储在缓冲区（通常是字节数组）中。

2）不断检查缓冲区（每次更新它）以确定是否有一个完整的数据包到达。

3）解析缓冲区并将数据包提取到所需的OO对象

4) 将对象添加到队列中以进一步处理或调用后台线程来消费数据包对象。

通过输出流发送数据以相反的顺序几乎相同。

处理缓冲区时，事情会变得复杂/嘈杂/痛苦。您需要处理二进制数据以确定一个数据包何时结束而另一个数据包何时开始。当然，这与您正在通信的设备的协议有关，如果它发送固定长度的数据包或开始/停止字节等...此时没有标准解决方案，因为您将编写的代码取决于关于设备发送的数据。

编辑：您用示例代码更新了您的问题，但是记录的结构并不重要，该部分很简单且编写起来很冗长（如果您的结构有一个`int`字段，您从缓冲区读取 4 个字节并使用`BitConverter`例如，将字节转换为 int 的类）。您需要阅读硬件手册来检查它发送数据的格式（同样，开始/停止字节、固定长度等）。

这是非常抽象的，因为它特定于每种情况，没有“成熟的解决方案”。*此外，您*似乎不了解流/tcp 连接/二进制数据包的工作原理，是什么让您认为这是 tcp 连接的问题，但事实并非如此。Tcp 连接只是通过网络发送的字节流，您可以使用相同的模式从磁盘上的文件或串行端口中读取二进制数据。

# css - 为什么 CSS 媒体查询不遵循继承和级联的常规约定？

> ID：12121356
> 
> 赞同：1
> 
> 时间：2012-08-25T10:53:57.410
> 
> 标签：css, inheritance, media-queries, css-cascade

我的 CSS3 媒体查询遇到了一些问题...

这是我目前正在研究的一个小片段：

```
@media only screen 
and (max-width : 420px) {
    .page { min-width: 300px; max-width: 480px; width: 100%; }
    .page .alpha { font-size: 2em; }

    /* Set-up the column */
    .page .column { margin: 0 auto 2%; width: auto; }
    .page .gallery .column { min-height: 470px; height: auto; padding: 2%; }
}

/* Increase the main title for slightly larger screens! */
@media only screen 
and (max-width : 480px) {
    .page .alpha { font-size: 3em; }
} 
```

我从“移动优先”的角度工作，并且考虑到 CSS 在“级联”方面的正常行为，我希望第二个`@media`语句继承前一个语句的所有样式，同时覆盖任何与之匹配的样式或“更重”的选择器。

（加上 CSS 的优先顺序意味着任何匹配的样式定义都将使用最后定义的规则集，除非用`!important`声明“胜过”！）

但从我所看到的情况来看，通过测试和一些 Google / SE 搜索，情况并非如此。

样式规则是否可以`@media`从适用的早期语句继承，或者我是否不得不重复每个语句所需的所有规则？（不是很[干](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)）

我真的很感激任何帮助和澄清/解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T18:37:42.170

首先感谢@BoltClock（两条评论），以及其他评论和答案，感谢您的帮助。

我认为我在媒体查询中犯了一个错误和/或错误地理解了它们是如何一起工作和交互的。我打算用以下内容编辑我的问题，但决定将其作为答案更有意义（因为这是我使用的解决方案）。如果这浪费了其他人的时间，我深表歉意。

这是我的*固定*代码片段：

```
@media only screen 
and (max-width : 480px) {
    .page { min-width: 300px; max-width: 480px; width: 100%; }
    .page .alpha { font-size: 2em; }

    /* Set-up the column */
    .page .column { margin: 0 auto 2%; width: auto; }
    .page .gallery .column { min-height: 470px; height: auto; padding: 2%; }
}
/* Increase the main title for slightly larger screens! */
@media only screen 
and (min-width : 421px)
and (max-width : 480px) {
    .page .alpha { font-size: 3em; }
} 
```

我从您的评论中意识到，如果我增加第一个块中的最大宽度以覆盖必要的范围/限制，那么我可以嵌套或添加第二个块（我尝试了两者，它们都对我有用 - 使用铬浏览器 [18.0.1025.151]）。这成功地给了我想要的结果，因为`page .alpha`元素的字体大小以所需的步进/间隔增加。

再次感谢所有提供帮助的 SO'ers！（以及他们帮助建立的令人敬畏的社区的 SE）

*知识 > 开源 > 自由*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:28:33.193

如果您想在移动设备上工作，则需要将移动布局设置为默认布局。（删除查询）。从那里查询将从上面继承。

```
.page { min-width: 300px; max-width: 480px; width: 100%; }
.page .alpha { font-size: 2em; }

 /* Set-up the column */
.page .column { margin: 0 auto 2%; width: auto; }
.page .gallery .column { min-height: 470px; height: auto; padding: 2%; }

/* Increase the main title for slightly larger screens! */
@media only screen 
and (max-width : 480px) {
    .page .alpha { font-size: 3em; }
} 
```

# android - Android：在我的 AlarmReciever getRingtone() 上触发/启动警报音返回 null

> ID：12121357
> 
> 赞同：0
> 
> 时间：2012-08-25T10:54:01.283
> 
> 标签：android, alarm, ringtone

我有这个代码可以在时间选择器设置的警报上触发敬酒消息，除了敬酒消息之外，我还想触发/启动警报音。

**这是我在接收器上的代码：**

```
 public void onReceive(Context context, Intent intent) {

        long time = intent.getExtras().getLong("time");
        Toast.makeText(context, "Alarming at "+formatDate(time),
                Toast.LENGTH_LONG).show();
        //Uri alerTone = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);

        try {
            Uri alert = getAlarmUri();
            Log.d("alarmCheck","Value of URI: "+alert.toString());
            Ringtone r = RingtoneManager.getRingtone(context, alert);
            r.play()

;
        } catch (Exception e) {
            e.printStackTrace();
        }

    }

    private Uri getAlarmUri() {
        Uri alert = RingtoneManager
                .getDefaultUri(RingtoneManager.TYPE_ALARM);
        if (alert == null) {
            alert = RingtoneManager
                    .getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);
            if (alert == null) {
                alert = RingtoneManager
                        .getDefaultUri(RingtoneManager.TYPE_RINGTONE);
            }
        }
        return alert;
    } 
```

**这是我的主要活动：**

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final TimePicker timepicker = (TimePicker) findViewById(R.id.alarm_time);
    Button set_alarm = (Button) findViewById(R.id.set_alarm);

        set_alarm.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                 Calendar c = Calendar.getInstance();
                 c.setTimeInMillis(System.currentTimeMillis());
                 c.set(Calendar.HOUR_OF_DAY, timepicker.getCurrentHour());
                 c.set(Calendar.MINUTE, timepicker.getCurrentMinute());
                 c.set(Calendar.SECOND, 0);
                 Intent in = new Intent(MainActivity.this, OnAlarmReciever.class);
                         in.putExtra("time", c.getTimeInMillis());
                 PendingIntent pi = PendingIntent.getBroadcast(MainActivity.this, 123456789, in, 0);
                 AlarmManager am = (AlarmManager) getSystemService(ALARM_SERVICE);
                 am.set(AlarmManager.RTC_WAKEUP, c.getTimeInMillis(),pi);
            }
        });

    } 
```

在我的接收器上，try catch 块的部分 getRingtone() 返回 null 因此访问 play() 会产生 nullexception .. 任何有关此问题的输入将不胜感激。

谢谢，上帝保佑！

编辑（DDMS Logcat，URI 值）

* * *

```
08-26 08:46:55.764: D/alarmCheck(537): Value of URI: content://settings/system/alarm_alert
08-26 08:46:55.774: D/MediaPlayer(537): Couldn't open file on client side, trying server side
08-26 08:46:55.825: E/MediaPlayer(537): Unable to to create media player
08-26 08:46:55.825: E/RingtoneManager(537): Failed to open ringtone content://settings/system/alarm_alert
08-26 08:46:55.825: W/System.err(537): java.lang.NullPointerException
08-26 08:46:55.844: W/System.err(537):  at com.example.alarmexercise.OnAlarmReciever.onReceive(OnAlarmReciever.java:36)
08-26 08:46:55.844: W/System.err(537):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2119)
08-26 08:46:55.844: W/System.err(537):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
08-26 08:46:55.844: W/System.err(537):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
08-26 08:46:55.844: W/System.err(537):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-26 08:46:55.844: W/System.err(537):  at android.os.Looper.loop(Looper.java:137)
08-26 08:46:55.854: W/System.err(537):  at android.app.ActivityThread.main(ActivityThread.java:4424)
08-26 08:46:55.854: W/System.err(537):  at java.lang.reflect.Method.invokeNative(Native Method)
08-26 08:46:55.854: W/System.err(537):  at java.lang.reflect.Method.invoke(Method.java:511)
08-26 08:46:55.854: W/System.err(537):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
08-26 08:46:55.864: W/System.err(537):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
08-26 08:46:55.874: W/System.err(537):  at dalvik.system.NativeStart.main(Native Method) 
```

** 附加编辑.. 铃声 r = ... r 真正为空的行**

这种默认音调/声音是否可能在模拟器上不起作用？因为我已经阅读了一些关于在模拟器上播放音调的线程，这些线程由于模拟器没有默认声音或无法处理音调/声音而无法工作？.....无法确认这一点，因为很少有人这么说

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T06:29:14.837

确实，可能是模拟器问题。尝试将 mp3 文件推送到 sdcard 并将其设置为铃声，看看是否有帮助？

# ruby-on-rails - Rails 在初始化程序中的附加配置

> ID：12121359
> 
> 赞同：0
> 
> 时间：2012-08-25T10:54:06.247
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想在我的应用程序中使用其他路由文件，所以当我添加

```
config.paths['config/routes'] = Dir[Rails.root.join('config/routes/*.rb')] 
```

到我的`config/application.rb`文件一切都很好。

当我尝试将此代码放在我的初始化程序中时，就会出现问题：

`MyApp::Application.config.paths['config/routes'] = Dir[Rails.root.join('config/routes/*.rb')]`

我在 Rails 控制台中检查它 -`MyApp::Application.config.paths`保持正确的路径，但似乎`config/routes`不会加载来自的文件。

我该如何解决这个问题？

我正在使用 Rails 3.2.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:23:12.857

*不直接回答您的问题，而是为您尝试做的事情提供不同的（更好的？）方法：*

查看[DHH](https://gist.github.com/dhh)在 gist 中发布的**[这个替代方案](https://gist.github.com/2492118)**。

# jquery - 消息系统滚动消息的 CSS 并始终将回复框保持在屏幕底部

> ID：12121363
> 
> 赞同：1
> 
> 时间：2012-08-25T10:54:30.833
> 
> 标签：jquery, css, messaging

因此，我正在为我的网站的消息/对话页面设计样式，但遇到了一些困难。

这就是我最终想要解决的问题。打开对话时，最后 15-20 条消息将加载到 div 中，但我希望 div 适合一页。我的意思是 div 应该是屏幕的高度，我唯一想上下滚动的是消息。

我网站的标题应该始终可见。当您向下滚动并结束对话时，整个页面会向下滚动一点以显示我网站的页脚。

我想要的很像 Facebook 消息页面。

![在此处输入图像描述](../Images/808a2afc8c71537b2b21e47ad023bef7.png)

我不知道你是否能理解我在问什么，所以我在 Facebook 消息页面上添加了一个小例子（滚动条不在图片上）。在图像中，这是您加载页面时得到的内容，如果向下滚动，将出现页脚，如果向上滚动，回复框将粘在屏幕底部，唯一移动的是对话（中间红色方块）

一旦这将起作用，一旦您到达已加载消息的顶部，我将添加一个加载消息的功能。

我不确定是否可以仅使用 CSS 来做到这一点，我很确定在某些时候我将不得不使用一些 Jquery，但我想用 CSS 来实现 CSS 中可能的一切。

我真的不知道如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:27:30.690

另一种解决方案是设置以下 CSS-

对于标题

```
{position:fixed;top:0px;} 
```

对于回复框

```
{position:fixed;bottom:0px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:55:25.583

您可以尝试以下代码来设置消息 div 的样式；

```
#yourdiv {
    position: absolute;
    top: 35px; //This is the height of your header.
    width: 400px;//Width of your message div.
    bottom: 0;
    background-color: gray;
    overflow-y: auto;//Only scrolls vertically
} 
```

***[这](http://jsfiddle.net/blasteralfred/the5v/)***是一个有效的现场演示。（在demo中，message div是左对齐的，你可以通过设置margin来改变它。如果你想让它在页面中间，尝试`auto`左右边距）

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T11:03:36.127

这是一个小演示：[little link](http://jsfiddle.net/WvDp9/9/)。基本且足够相关的 CSS 是：

```
html, body {
    height: 100%; /*100% of window*/
}
#messages {
   height: 80%; /*limit the height to 80% of the page*/
   overflow-y: auto; /*messages don't fit? add scrollbars*/  
} 
```

HTML：

```
<div id = "messages">
    <div class = "message">Glee is awesome!</div>
    <div class = "message">Glee is awesome!</div>
    <div class = "message">Glee is awesome!</div>
    ...
</div>
<div>...Stuff for sending here...</div> 
```

希望以任何方式有所帮助！

# php - 使用 Post 方法从 PHP 中的单独表单字段中检索值

> ID：12121365
> 
> 赞同：0
> 
> 时间：2012-08-25T10:54:53.530
> 
> 标签：php, forms

这可能是 HTML 的一个基本问题，但我想知道它在 PHP 中是否可行。通常在构建表单提交页面时，表单标签是为每个表单组设置的。因此，提交按钮是按一个表单标签分配的。表单字段的元素必须像包含在表单标签中一样接近。如果我想要更复杂的布局，那么是否可以分隔表单标签来划分表单字段？

例如，

```
<?php
    print_r($_POST);
?>
<form name="test" action="" method="post">
    First name: <input type="text" name="firstname" value="" /><br />
    <input type="submit" value="submit" />
</form> 
<p>some other contents</p>
<form name="test" action="" method="post">
    Last name: <input type="text" name="lastname" value="" />
</form> 
```

在这种情况下，即使填写了第二个字段，也不会发送该值。如果可能的话，我希望只有一个提交按钮并控制多个表单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:32:34.620

将整个页面包装成一个表单，并为您的元素使用某种分隔符（例如“form2_field1”）。我从来没有发现有多个表单很有用（即使有隐藏/取消隐藏值），我的猜测是提交按钮可能只会提交它所包含的表单。正如评论之一所提到的，如果你想使用 JQuery更复杂的形式。但是，我的建议只是发送整个表单，无论它是否复杂，并根据您的需要进行处理。

# jquery - RequireJS - 给定别名时未定义 jQuery

> ID：12121367
> 
> 赞同：7
> 
> 时间：2012-08-25T10:55:06.097
> 
> 标签：jquery, requirejs

为 jQuery 设置路径时，每当我使用时：

```
require.config({
    paths: {
        'jQuery': './libs/jquery-1.8.0.min'
    }
}); 
```

然后：

```
define(['jQuery'], function($) {
    console.log($);
}; 
```

`$`将是未定义的。

但是，如果我使用：

```
require.config({
    paths: {
        'jquery': './libs/jquery-1.8.0.min'
    }
}); 
```

然后：

```
define(['jquery'], function($) {
    console.log($);
}; 
```

突然间一切都运转良好。

用 定义 jQuery 的别名有什么问题`jQuery`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-26T17:04:00.067

这在此处进行了更多讨论：[https ://github.com/jrburke/requirejs/issues/435](https://github.com/jrburke/requirejs/issues/435)

# php - 在 angularjs 中的 $_POST 变量中获取数据

> ID：12121368
> 
> 赞同：3
> 
> 时间：2012-08-25T10:55:09.443
> 
> 标签：php, angularjs

我希望使用 angularjs 将数据发布到 php 文件中。我参考了以下链接： [http ://www.cleverweb.nl/javascript/a-simple-search-with-angularjs-and-php/](http://www.cleverweb.nl/javascript/a-simple-search-with-angularjs-and-php/)

我尝试了链接中给出的相同示例，但数据以 JSON 格式发布。我想要 $_POST 变量中的数据。我怎么做？这是我的代码：

搜索.js

```
 function SearchCtrl($scope, $http) {
        $scope.url = 'php/search.php'; // The url of our search
        // The function that will be executed on button click (ng-click="search()")
        $scope.search = function() {
            // Create the http post request
            // the data holds the keywords
            // The request is a JSON request.  i want the data in $_POST
            $http.post($scope.url, { "data" : $scope.keywords}).
            success(function(data, status) {
                $scope.status = status;
                $scope.data = data;
                $scope.result = data; // Show result from server in our <pre></pre> element
            }).
            error(function(data, status) {
                $scope.data = data || "Request failed";
                $scope.status = status;         
            });
        };
} 
```

搜索.php

```
 <?php
// The request is a JSON request.
// We must read the input.
// $_POST or $_GET will not work! **but i want it to work!**
    $data = file_get_contents("php://input");
    $objData = json_decode($data);
// perform query or whatever you wish, sample:

include 'connect.php';
mysql_select_db($database,$con);  
$query = 'SELECT * FROM `product`';
$result = mysql_query($query) OR die(mysql_error()); 
$cnt = 0;
while ($row = mysql_fetch_assoc($result)) { 
    $nm = $row['name'];
    //print_r($nm.' ');
    if($objData->data == $nm) {

        $cnt++;
    }
}

if($cnt == 0) {
    echo ' Sorry, no match!';
}
else {
    echo ' I have found what you\'re looking for!';
} 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-11T11:28:52.473

只是普通的PHP：

```
$_POST['title'] or $_POST['content']; 
```

你能行的 ;-）

这是对下面帖子下方评论的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T01:41:05.820

在这里，您可以像往常一样访问 php 文件中的变量。

```
$http.post("yourpagehandler.php", {
    // Values you with to send to php page
    "title": $scope.title,
    "content": $scope.content
}).success(function(data, status) {
    // Values returned from php handler will be in data

}).error(function(data, status) {
    $scope.data = data || "Request failed";
    $scope.status = status; 
}); 
```

# c# - Web服务需要很长时间才能响应

> ID：12121369
> 
> 赞同：1
> 
> 时间：2012-08-25T10:55:20.810
> 
> 标签：c#, php, web-services, soap, wsdl

我有一个客户端服务器应用程序。我的服务器使用 PHP、Mysql 和 Apache，客户端使用 C# windows Form 开发。我有用于客户端服务器通信的 SOAP WSDL 网络服务。最近我发现一个问题，当我的客户发送请求时，响应会在很长一段时间后（比如 3/4 分钟到几个小时），有时我从来没有得到响应。我已经检查了客户端（httpwebrequest timeout，readwritetimeout）以及服务器（timeout，keepalivetimeout）端的所有超时值，我拥有的最大值是5分钟（对于httpwebrequest readwritetimeout）。那么有人能说出会是什么问题吗？为什么需要几个小时才能得到回复或没有得到任何回复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:25:57.620

根据我的经验，此类问题来自于 Web 服务连接被防火墙阻止，或者是一个不稳定的代理。检查这不是问题。

您应该首先通过缩小选项范围来定位问题。您是否尝试过在本地调用服务器上的 Web 服务，看看是否遇到同样的问题 - 如果没有，那么很有可能肯定是连接问题。

要排除客户端有问题，请尝试使用[http://www.soapui.org/](http://www.soapui.org/)之类的东西来调用您的服务器 Web 服务。

你从哪里调用服务器？您确定您调用它的设备没有被 IP 阻止，并且您确定您的 Web 服务能够从运行它的位置访问其数据库。

为您的服务器 API 定义的 MySQL 用户是否可以从服务器的 IP 访问。MySQL 用户也经常被 IP 屏蔽。

如果您在本地运行它，您确定您的 IIS Express 设置/虚拟文件夹没有混乱并且 URL 解析错误。尝试再次创建虚拟文件夹以排除这种情况。即使在本地运行，请记住检查 MySQL 用户是否可以从您的本地 IP 访问。

当我遇到像您这样的问题时，我通常会检查以下几件事。

# cordova - Cordova (Phonegap) ChildBrowser 在横向关闭时崩溃

> ID：12121373
> 
> 赞同：1
> 
> 时间：2012-08-25T10:55:39.053
> 
> 标签：cordova, childbrowser

我使用 Cordova 1.9.0 和最新的 iOS ChildBrowser 插件。在`ChildBrowserViewController.m`文件中，我将第 157 行设置为返回 YES，以便能够自动旋转 ChildBrowser，这很有效——应该如此。让应用程序本身仅在纵向模式下工作。

如果我打开 ChildBrowser 并旋转到横向，然后尝试使用 DONE 按钮将其关闭，这会使 ChildBrowser 停止工作并冻结，过一会儿它会使应用程序崩溃。这是我在加载 Ajax 的子页面中打开 ChildBrowser 的时候！

但是，如果我在我的索引文件中打开 ChildBrowser，它就会按原样关闭。我不明白为什么它在索引文件中而不是在子页面中工作。当我在 Cordova 之前使用 Phonegap.0.9.6 时，这完全可以在 ChildBrowser 中工作。

任何输入都非常非常感谢，谢谢！

# php - 在主机上运行 cURL PHP 的问题

> ID：12121377
> 
> 赞同：-1
> 
> 时间：2012-08-25T10:57:06.057
> 
> 标签：php, curl

我在我的 go daddy linux 服务器主机上运行 php 脚本时遇到了一些问题。

如您所见，此代码任务是从 cnn.com 获取内容并将所有内容插入到名为“example_homepage.txt”的新文件中。问题是文件是在服务器上创建的，但它是空白的。

```
<?php

    $ch = curl_init("http://cnn.com/");
    $fp = fopen("example_homepage.txt", "w");

    curl_setopt($ch, CURLOPT_FILE, $fp);
    curl_setopt($ch, CURLOPT_HEADER, 0);

    curl_exec($ch);
    curl_close($ch);
    fclose($fp);

?> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:11:40.270

那是因为你的正则表达式不匹配任何东西。

如果您尝试使用 wget 或非浏览器下载您的 URL (http://www.google.com/search?q=cnn&tbm=isch)，您会看到，您收到 HTTP 错误 403。似乎就像 Google 图片搜索使用 JavaScript 来显示结果一样。

此外，在使用匹配项之前，您应该始终检查表达式是否匹配：

```
if (preg_match_all(...)) { /* match */ } else { /* no match */ } 
```

# extjs - 动态启用禁用 TextField

> ID：12121378
> 
> 赞同：1
> 
> 时间：2012-08-25T10:57:14.137
> 
> 标签：extjs

我正在使用 extjs-4，我想根据正在加载的数据动态启用/禁用文本字段。

我尝试在需要时将**disabled**和**readOnly**属性设置为 true/false，但它似乎没有被应用。

还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T14:10:10.707

在创建字段后调用[`setDisabled`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-method-setReadOnly)和[`setReadOnly`](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Text-method-setDisabled)方法`TextField`来操作这些属性。

# ios - 关于将 AVAssetReader 与音频队列/流服务一起使用的综合教程

> ID：12121382
> 
> 赞同：0
> 
> 时间：2012-08-25T10:57:46.953
> 
> 标签：ios, streaming

我正在开发一个应用程序，该应用程序允许用户在他们的 iPhone 上选择音乐曲目，收听并与其他人实时分享，以便其他人可以同步收听同一首歌曲。

我设法使以下原型[工作](https://stackoverflow.com/questions/12076374/audio-streaming-services-failing-to-recognize-file-type)：手动将文件添加到我正在使用的包中，然后使用[AudioFileReadPackets](https://developer.apple.com/library/mac/#documentation/MusicAudio/Reference/AudioFileConvertRef/Reference/reference.html)对其进行解码并使用 GKSession 通过网络发送它。

在接收端.. 我使用音频队列/流媒体服务来读取流和播放音乐（即 AudioFileStreamOpen、AudioFileStreamParseBytes、AudioQueueNewOutput、AudioQueueStart 等。有关更多详细信息，请参见[此处](https://stackoverflow.com/questions/12076374/audio-streaming-services-failing-to-recognize-file-type)）。

也就是说，我[发现](https://stackoverflow.com/questions/5487568/audiofileopenurl-ipod-library)我不能简单地从 iphone 的文件系统中读取文件并对其进行解码。我必须使用 AVAssetReader 等等。在 Stack Over Flow 上有很多这样做的[例子](https://stackoverflow.com/questions/4972677/reading-audio-samples-via-avassetreader)，但他们专注于直接的技术实现而不是解释大局。我在 Apple 的开发人员指南网站上找不到太多全面的指南或文档（请参阅他们如何描述[CMSampleBuffer 参考](https://developer.apple.com/library/mac/#documentation/CoreMedia/Reference/CMSampleBuffer/Reference/reference.html)例如；函数参数没有描述等）。

任何链接/书籍/等可能会引导我走向正确的方向吗？特别是关于访问 iPod 库中的音频文件并使用 AVAssetReader 对它们进行分段，以便它们可以通过网络以流媒体方式发送，通过音频[队列](https://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005343)/流媒体服务播放

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T07:15:17.590

I found this book to be amazingly helfpul: [Learning Core Audio: A Hands-On Guide to Audio Programming for Mac and iOS](https://rads.stackoverflow.com/amzn/click/com/B007R3U9W2)

# android - 使用 Android Preference 类 UI 配置动态数据

> ID：12121384
> 
> 赞同：0
> 
> 时间：2012-08-25T10:58:00.353
> 
> 标签：android, sqlite, dynamic, preference

为了配置数据库表的一行，我想使用与 Android Preference classes UI 相同的 UI。例如，这将在一个包含许多用户创建的警报的表中设置一堆复选框/收音机/等来配置警报。

是否可以和/或适当地为此使用 Preference 类，而不是手动构建我自己的表单来模仿 UI？我希望 UI 在 Android 版本的范围内看起来尽可能“标准”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:52:41.007

传递上一个活动的行 id 并为每个首选项设置[OnPreferenceChangeListener](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)，并且每次首选项更改时，您都可以更新该行。

您还可以通过 setResult 将所有值从 preferenceActivity 传递回调用活动并更新 OnActivityResult 中的行

# facebook - Facebook 未发送 60 天令牌

> ID：12121385
> 
> 赞同：0
> 
> 时间：2012-08-25T10:58:07.467
> 
> 标签：facebook, facebook-graph-api, authentication, token, facebook-apps

所以我已经为此工作了几天，搜索了无数关于此的问题和帖子，但还没有找到解决方案。我正在尝试为我的网站 facebook 应用程序获取 60 天访问令牌。我已启用删除 offline_access 权限。服务器端我正在使用 fb_graph gem 来完成此操作，但是我尝试使用 HTTParty 以及将 url 粘贴到浏览器中。我的代码如下。

现在我的代码不会返回错误，但交易所总是简单地返回一个大约一小时到期的令牌。现在奇怪的是，在本地我得到它为自己工作了一次，我的本地应用程序有一个 60 天的令牌。但是，我无法将其复制给任何其他用户，也无法在实时网站上复制。另一个奇怪的事情是任何注册我的应用程序的新用户，都会获得 60 天令牌，但无论我为现有用户尝试多少次，我都无法让 60 天令牌出现在实时网站上。这可能是 Facebook 上的错误结束吗？我已经为此工作了一段时间，我真的可以使用一些帮助！

这是我的 fb_graph 代码

```
fb_auth = FbGraph::Auth.new("my_api_key" , "my_api_secret")
fb_auth.exchange_token! my_old_token
fb_auth.access_token #Return long term (60 days) token

*** LOCAL GEMS ***

fb_graph (2.4.19)
Author: nov matake
Homepage: http://github.com/nov/fb_graph
Installed at: /Users/amritk/.rvm/gems/ruby-1.8.7-p370
A full-stack Facebook Graph API wrapper in Ruby. 
```

我也将这种方法与 HTTParty 一起使用并将其粘贴到浏览器中

```
https://graph.facebook.com/oauth/access_token?             
    client_id=APP_ID&
    client_secret=APP_SECRET&
    grant_type=fb_exchange_token&
    fb_exchange_token=EXISTING_ACCESS_TOKEN 
```

是的，我已阅读[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T07:50:52.230

这是一个已知的错误。

> 长期访问令牌端点返回短期访问令牌 [https://developers.facebook.com/bugs/341793929223330?browse=search_5039d4c8e833c2834339143](https://developers.facebook.com/bugs/341793929223330?browse=search_5039d4c8e833c2834339143)

# mysql - CAKEPHP MYSQL 订单问题

> ID：12121386
> 
> 赞同：0
> 
> 时间：2012-08-25T10:58:22.027
> 
> 标签：mysql, cakephp

我遇到了一个问题，我不知道如何解决它。
我有一张桌子，`orders`
我们的客户只想显示未“批准”的订单。
首先，我认为这很容易，使用`find('order_status!='=>'approved' )`...
它显示数据库错误

> 1064 - 您的 SQL 语法有错误；查看与您的 MySQL 服务器版本相对应的手册，了解在“Order IN ('12', NULL, '', NULL, '08/22/2012', 'Yes', 'No', NULL, ' \r\n 测试 da' 在第 1 行

多次失败后。（删除所有关联表，检查语法，在phpadmin中编写sql）

我认为问题是 Order 是一个保留字，Cakephp 会自动将外星人设置为 order。

所以我使用了查询 $this->Order->query("SELECT * FROM orders where order_status = 'approved';"); 我得到另一个错误：

> 错误：SQLSTATE [42S22]：找不到列：1054 'where 子句'中的未知列 'orders'

实际上，CakePHP 仍然做同样的事情，“...FROM `orders`AS `Order...`”

来自 url：/orders?order_status=approved，它可以工作，但我不知道如何表达 '!=approved'

如何解决？我不想重命名订单表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:07:00.133

它应该是这样的：

```
$this->Order->find('all', array(
   'conditions'=>array(
     'NOT'=>array('Orders.order_status'=>'approved')
   )
)); 
```

此外，对于这种类型的东西，您应该使用整数 1 或 0 而不是字符串，这样在 ifs 中更容易使用。像 1 表示已批准 0（默认）表示未批准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T22:55:58.597

这是我老师说的，效果很好。

```
$this->set('orders', $this->paginate('Order', array("Order.order_status !=" => 'Approved'))); 
```

而且我仍然不知道为什么它不起作用，首先使用 find(all,condition) 获取数组，然后将其分配给分页...

# colors - 请解释这个颜色混合模式公式，以便我可以在 PHP/ImageMagick 中复制它

> ID：12121393
> 
> 赞同：6
> 
> 时间：2012-08-25T10:59:19.607
> 
> 标签：colors, imagemagick, photoshop, blending

我一直在尝试使用 ImageMagick 来复制 Photoshop 的颜色混合模式。[我在在线指南](http://www.simplefilter.de/en/basics/mixmods.html)中找到了以下公式，但我不知道它们的含义。我只需要交换某些频道吗？

![油漆店专业版](../Images/e550065035dab9115f24de4a687e2c76.png)

![法贝](../Images/31bc0505c0473dd3c29abea045eda285.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T15:37:14.230

不久前，我反转了设计的 Photoshop 混合模式。

看看这里：

[http://www.kineticsystem.org/?q=node/13](http://www.kineticsystem.org/?q=node/13)

下面是我用来在 HSY（色相、饱和度、亮度）和 RGB（红、绿、蓝）之间转换的代码。Photoshop 使用称为 Hexacones 的东西来计算饱和度。

乔瓦尼

```
/**
 * This is the formula used by Photoshop to convert a color from
 * RGB (Red, Green, Blue) to HSY (Hue, Saturation, Luminosity).
 * The hue is calculated using the exacone approximation of the saturation
 * cone.
 * @param rgb The input color RGB normalized components.
 * @param hsy The output color HSY normalized components.
 */
public static void rgbToHsy(double rgb[], double hsy[]) {

    double r = Math.min(Math.max(rgb[0], 0d), 1d);
    double g = Math.min(Math.max(rgb[1], 0d), 1d);
    double b = Math.min(Math.max(rgb[2], 0d), 1d);

    double h;
    double s;
    double y;

    // For saturation equals to 0 any value of hue are valid.
    // In this case we choose 0 as a default value.

    if (r == g && g == b) {            // Limit case.
        s = 0d; 
        h = 0d; 
    } else if ((r >= g) && (g >= b)) { // Sector 0: 0° - 60°
        s = r - b;
        h = 60d * (g - b) / s;
    } else if ((g > r) && (r >= b)) {  // Sector 1: 60° - 120°
        s = g - b;
        h = 60d * (g - r) / s  + 60d;
    } else if ((g >= b) && (b > r)) {  // Sector 2: 120° - 180°
        s = g - r;
        h = 60d * (b - r) / s + 120d;
    } else if ((b > g) && (g > r)) {   // Sector 3: 180° - 240°
        s = b - r;
        h = 60d * (b - g) / s + 180d;
    } else if ((b > r) && (r >= g)) {  // Sector 4: 240° - 300°
        s = b - g;
        h = 60d * (r - g) / s + 240d;
    } else {                           // Sector 5: 300° - 360°
        s = r - g;
        h = 60d * (r - b) / s + 300d;
    }

    y = R * r + G * g + B * b;

    // Approximations erros can cause values to exceed bounds.

    hsy[0] = h % 360;
    hsy[1] = Math.min(Math.max(s, 0d), 1d);
    hsy[2] = Math.min(Math.max(y, 0d), 1d);
}

/**
 * This is the formula used by Photoshop to convert a color from
 * HSY (Hue, Saturation, Luminosity) to RGB (Red, Green, Blue).
 * The hue is calculated using the exacone approximation of the saturation
 * cone.
 * @param hsy The input color HSY normalized components.
 * @param rgb The output color RGB normalized components.
 */
public static void hsyToRgb(double hsy[], double rgb[]) {

    double h = hsy[0] % 360;
    double s = Math.min(Math.max(hsy[1], 0d), 1d);
    double y = Math.min(Math.max(hsy[2], 0d), 1d);

    double r;
    double g;
    double b;

    double k; // Intermediate variable.

    if (h >= 0d && h < 60d) {           // Sector 0: 0° - 60°
        k = s * h / 60d;
        b = y - R * s - G * k;
        r = b + s;
        g = b + k;
    } else if (h >= 60d && h < 120d) {  // Sector 1: 60° - 120°
        k = s * (h - 60d) / 60d;
        g = y + B * s + R * k;
        b = g - s;
        r = g - k;
    } else if (h >= 120d && h < 180d) { // Sector 2: 120° - 180°
        k = s * (h - 120d) / 60d;
        r = y - G * s - B * k;
        g = r + s;
        b = r + k;
    } else if (h >= 180d && h < 240d) { // Sector 3: 180° - 240°
        k = s * (h - 180d) / 60d;
        b = y + R * s + G * k;
        r = b - s;
        g = b - k;
    } else if (h >= 240d && h < 300d) { // Sector 4: 240° - 300°
        k = s * (h - 240d) / 60d;
        g = y - B * s - R * k;
        b = g + s;
        r = g + k;
    } else {                          // Sector 5: 300° - 360°
        k = s * (h - 300d) / 60d;
        r = y + G * s + B * k;
        g = r - s;
        b = r - k;
    }

    // Approximations erros can cause values to exceed bounds.

    rgb[0] = Math.min(Math.max(r, 0d), 1d);
    rgb[1] = Math.min(Math.max(g, 0d), 1d);
    rgb[2] = Math.min(Math.max(b, 0d), 1d);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T01:14:27.213

维基百科有一篇关于混合模式的好文章 [http://en.wikipedia.org/wiki/Blend_modes](http://en.wikipedia.org/wiki/Blend_modes)

他们给出了乘法、屏幕和叠加模式的公式。

```
Multiply
Formula: Result Color = (Top Color) * (Bottom Color) /255

Screen
Formula: Result Color = 255 - [((255 - Top Color)*(255 - Bottom Color))/255]

Overlay
Formula: Result Color = if (Bottom Color < 128) 
    then (2 * Top Color * Bottom Color / 255) 
    else (255 - 2 * (255 - Top Color) * (255 - Bottom Color) / 255) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T14:52:01.287

A是前景像素，B是背景像素，C是新像素。H 是每个像素的色调值，S 是饱和度值，L 是亮度值，Y 是亮度值。（虽然不确定亮度和亮度之间有什么区别。

无论如何，在第一个例子中，新像素（C）的色调（H）和饱和度（S）值是从前景像素（A）中复制的，而新像素的亮度（Y）值是从亮度（ L) 背景(B) 像素的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-13T14:33:14.317

如果您还需要合并 Alpha 通道，这些颜色混合公式会非常棘手。我无法重现 Photoshop 的混合，但 Gimp 的工作方式如下：

```
Color mix_hsv(
    ColorMixMode::Enum mode, // blending mode
    Color cd,                // destination color (bottom pixel)
    Color cs)                // source color (top pixel)
{
    // Modify the source color
    float dh, ds, dv; // destination hsv
    float sh, ss, sv; // source hsv
    cd.GetHsv(dh, ds, dv);
    cs.GetHsv(sh, ss, sv);

    switch (mode) {
        case HUE:        cs.InitFromHsv(sh, ds, dv); break;
        case SATURATION: cs.InitFromHsv(dh, ss, dv); break;
        case COLOR:      cs.InitFromHsv(sh, ss, dv); break;
        case LUMINOSITY: cs.InitFromHsv(dh, ds, sv); break;
    }
    cs.A = std::min(cd.A, cs.A);

    // Blend the modified source color onto the destination color
    unsigned char cd_A_orig = cd.A;
    cd = mix(NORMAL, cd, cs); // normal blending
    cd.A = cd_A_orig;
    return cd;
} 
```

如果您使用预乘 alpha，请不要忘记在上面的代码中正确处理它。我无法在 Gimp 的源代码中找到用于混合的代码，但生成的图像非常相似。

Photoshop的颜色混合明显不同，所以如果有人找到实现它的方法，请告诉我们:o)

味噌

# android - imageview微调器/进度条不旋转

> ID：12121398
> 
> 赞同：1
> 
> 时间：2012-08-25T11:00:19.073
> 
> 标签：android, rotation, progress-bar, imageview, geometry

在我的 android 应用程序中，我尝试像在其他一些应用程序中一样实现自己的进度条。因此，如果我的客户单击一个按钮，则刷新图像将替换为一个旋转的圆圈。但我的圈子没有旋转。我在 xml 布局中添加了我的旋转圆圈来测试旋转的 xml。

```
<ImageView android:layout_gravity="center_vertical" android:contentDescription="@string/liga" android:layout_height="40dp" android:layout_width="40dp" android:clickable="true" android:id="@+id/iv_refresh" android:src="@drawable/progress_medium_holo" ></ImageView> 
```

这是我的旋转 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <rotate
             android:drawable="@drawable/spinner_48_outer_holo"
             android:pivotX="50%"
             android:pivotY="50%"
             android:fromDegrees="0"
             android:toDegrees="1080" />
    </item>
    <item>
        <rotate
             android:drawable="@drawable/spinner_48_inner_holo"
             android:pivotX="50%"
             android:pivotY="50%"
             android:fromDegrees="720"
             android:toDegrees="0" />
    </item>
</layer-list> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T19:41:10.863

现在我找到了解决方案

我用了

```
 ImageView iv_refresh = (ImageView) activity.findViewById(R.id.iv_refresh);
        Animation hyperspaceJump = AnimationUtils.loadAnimation(activity, R.anim.loading); 
```

使用动画资源 [http://developer.android.com/guide/topics/resources/animation-resource.html](http://developer.android.com/guide/topics/resources/animation-resource.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T00:02:55.320

我有一个类似的问题，并没有真正理解 baeckerman83 解决方案。在源代码中四处寻找之后，进度条似乎使用 setLevel 为其可绘制对象设置动画。如果你仍然坚持使用进度条继承人我做了什么：

```
...
((ImageView)findViewById(R.id.image_view)).setImageResource(R.id.progress_large_holo)
...
@Override
protected void onDraw (Canvas canvas) {
    LayerDrawable ld= (LayerDrawable)((ImageView)findViewById(R.id.image_view)).getDrawable();
    for (int i=0; i<ld.getNumberOfLayers(); i++) {
        // Really slow
        ld.getDrawable(i).setLevel((int) (System.currentTimeMillis() % 10000));
    }
    super.onDraw(canvas);
} 
```

# android - 意图调用的相机人像

> ID：12121399
> 
> 赞同：0
> 
> 时间：2012-08-25T11:00:20.220
> 
> 标签：android, android-camera, portrait

我使用安卓 2.3。
如何在意图调用的相机中设置人像模式？
可能吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:04:56.953

> 如何在意图调用的相机中设置人像模式？

你无法控制它，因为它不是你的应用程序。

通过您启动的活动的开发人员可以`Intent`完全自由地按照他们的意愿实施他们的相机活动。有些会强制一个方向（横向或纵向，尽管更常见的是横向），其他会允许它根据用户握持设备的方式而变化。协议中没有任何内容`ACTION_IMAGE_CAPTURE`允许您请求方向，并且您不能依赖实现该方向的其他活动，无论如何，即使它存在。

# jquery - 如何在使用 jQuery 模糊另一个元素后检查焦点是否已切换到新元素？

> ID：12121403
> 
> 赞同：3
> 
> 时间：2012-08-25T11:00:52.700
> 
> 标签：jquery, browser, focus, coffeescript

我的页面上有一个文本输入。当它获得焦点时，其下方会出现一个选择框。当它失去焦点时，我希望选择框消失*，除非*焦点已转移到选择框。听起来很简单，但我遇到了一个问题。

我像这样设置事件处理程序（使用coffeescript）

```
jQuery ->
  $('td.description input').focus -> showItemSelector()
  $('td.description input').blur -> hideItemSelector() 
```

`showItemSelector()`并且`hideItemSelector()`是这样定义的

```
showItemSelector () ->
  $('#item-selector').show()

hideItemSelector () ->
  unless $('#item-selector select').is(':focus')
    $('#item-selector').hide() 
```

但它不起作用。输入失去焦点后，项目选择器始终隐藏。我做了一些实验，我的怀疑得到了证实。该`hideItemSelector`函数在焦点转移到新元素之前执行（这很有意义——浏览器可能会从第一个元素获取焦点，触发我的函数，然后再将焦点分配给下一个元素）。以下代码演示了这一点；

```
hideItemSelector = () ->
    focus = -> console.log $('select#category').is(':focus')
    focus()
    setTimeout focus, 1000 
```

这将在控制台中返回 false 和 true。延迟使浏览器有时间转移焦点。

所以我的问题是，如果不使用 setTimeout，我怎么能做我想做的事？如果没有其他办法，那么这将不得不做，但这似乎是一种有缺陷的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:12:04.997

您可以通过分配全局 var 并将其值从 更改为 来实现这一点，`true`因为`false`用户移动和离开对象，例如：

```
$('#yourElement').mouseenter(function() {
  isHovered = true;
}).mouseleave(function() {
   isHovered = false;
 }); 
```

还有一种方法可以在除 Internet Explorer 之外的所有浏览器中使用，但我不建议使用它，因为它使用了无效的伪选择器：

```
if ($('#hello').is(':hover')) {
      alert('hello');
 } 
```

除此之外，您将不得不为此找到插件。[这是SpYk3HH](https://stackoverflow.com/users/900807/spyk3hh)的自制插件，可以在这里找到：[jsFiddle isHover Plugin Demo](http://jsfiddle.net/SpYk3/2FZVW/)。我还建议阅读：[如何检查鼠标是否在 jQuery 中的元素上？](https://stackoverflow.com/questions/1273566/how-do-i-check-if-the-mouse-is-over-an-element-in-jquery). 我想这对你会有用。

# c++ - 我应该从以下功能中选择什么

> ID：12121406
> 
> 赞同：1
> 
> 时间：2012-08-25T11:01:47.097
> 
> 标签：c++, operator-overloading

假设我自己设计了一个 String 类，并且我想重载 operator[] 函数，这里有以下选择：

```
String operator[](const size_t index);
String& operator[](const size_t index);
const String& operator[](const size_t index) const; 
```

const、非常量和引用返回类型的任何其他组合。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:06:30.310

a的`[]`运算符`string`返回一个字符，而不是一个字符串。根据情况，您应该实施其中的一两个：

```
const char& operator[] ( size_t index ) const;
char& operator[] ( size_t index ); 
```

第一个生成一个无法修改的引用。如果您的字符串是不可变的，那么这就是您所需要的。

第二个生成一个可以修改的引用。您可以使用它来实现一些聪明的东西，例如修改时复制和引用计数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:25:32.953

有些人更喜欢有一个带符号的参数类型`operator[]`，既更类似于内置的 operator[] （它们也支持负索引），也能够检测负值参数（如果你有一个越界检查）。

C++ 编译器用于评估调用内置 operator[] 的类型是`ptrdiff_t`，因此您有时会发现以下内容

```
char &operator[](ptrdiff_t index);
char operator[](ptrdiff_t index) const; 
```

我通常只使用普通的`int`参数类型。

# html - 如何在 django 中从 html 表单创建 xml

> ID：12121407
> 
> 赞同：2
> 
> 时间：2012-08-25T11:01:54.927
> 
> 标签：html, xml, django, django-templates, django-views

我想从 html 表单创建 xml 文件。我正在使用 django，我想在我的 xml 文件中插入 html 表单数据。

我的 html 表单中有以下字段： 复选框列出
了用于从日历中插入日期的文本框

```
<input type="file" file-accept="pdf, doc, docx, xls, csv, txt, rtf, html, zip, mp3, wma, mpg, flv, avi, jpg, jpeg, png, gif" file-maxsize="10240" /> 
```

你能指导我怎么做吗？真的谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:36:57.010

```
from xml.etree.ElementTree import Element, SubElement, Comment, tostring

top = Element('top')

comment = Comment('Generated for PyMOTW')
top.append(comment)

child = SubElement(top, 'child')
child.text = 'This child contains text.'

child_with_tail = SubElement(top, 'child_with_tail')
child_with_tail.text = 'This child has regular text.'
child_with_tail.tail = 'And "tail" text.'

child_with_entity_ref = SubElement(top, 'child_with_entity_ref')
child_with_entity_ref.text = 'This & that'

print tostring(top) 
```

这是您可以在 python 中创建一个 xml 文件并将您的 html 数据放在任何需要的地方的方式

除此之外，您还可以使用 Django serialize for xml

# android - 如何使用意图操作发送电子邮件或附加来自图像交换器的当前图像

> ID：12121409
> 
> 赞同：0
> 
> 时间：2012-08-25T11:03:07.893
> 
> 标签：android

我已将可绘制文件夹中的图像加载到图像切换器中。我在那个活动中放置了一个按钮。因此，如果我单击该按钮，则表示切换器中的当前图像应使用意图的 action_send 邮寄。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:13:40.760

找到当前设置了哪个drawable，然后

```
 intent.putExtra(Intent.EXTRA_STREAM, Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.your file);
intent.setType("image/png"); 
```

发送多个图像

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, emailaddress);
emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, message);
emailIntent.setType("image/png");

ArrayList<Uri> uris = new ArrayList<Uri>();

uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.file1));
uris.add(Uri.parse("android.resource://" + getPackageName() + "/" + R.drawable.file2));

emailIntent.putExtra(Intent.EXTRA_STREAM, uris));

startActivity(emailIntent); 
```

# asp.net - 如何将标签控件转换为图像控件？

> ID：12121411
> 
> 赞同：-1
> 
> 时间：2012-08-25T11:03:13.257
> 
> 标签：asp.net

在带有模板的数据列表中，我有 3 个要存储的标签（名字、剪贴簿留言、发布时间）、用于存储个人资料图片的图像和一个用于在用户中存储图像的图像控件，将图像作为剪贴簿留言。现在我希望这个图像控件只有在用户发布图像时才可见，否则该行不可见。

代码是

```
 protected void postscrap_Click(object sender, EventArgs e)
       { 
         SqlConnection con = new SqlConnection();  
          con.ConnectionString=ConnectionStrings["Con"].ConnectionString;
             con.Open();

    DataTable dt2 = new DataTable();

     if (con.State == ConnectionState.Open)

    {

   SqlCommand cmd = new SqlCommand();

    cmd.CommandText = "Insert into Scraps(Emailscrapto,scrap,posttime) Values('" +    Session["UserName"].ToString() + "','" + TextBox2.Text.ToString() + "','" + DateTime.Now.ToString() + "')";

        cmd.Connection = con;

        cmd.CommandType = CommandType.Text;

        cmd.ExecuteNonQuery();

        Response.Redirect("UserHome.aspx");

        TextBox2.Text = "";

        SqlDataAdapter d1 = new SqlDataAdapter(" Select * from Login l  Inner  join    Scraps s  on l.Email = s.Email  Where l.Email = '" + Session["UserName"] + "'", con);

        d1.Fill(dt2);

        DataList1.DataSource = dt2;

        DataList1.DataBind();

        con.Close();
    }

    if (dt2.Rows.Count > 0)
    {
        TextBox2.Text = "";
    }
   protected void postimg_Click(object sender, EventArgs e)
      {
    string ToSaveImageName;
    string sImageFileExtension;

    if (FileUpload1.PostedFile != null)
    {
        //Image postedimage = e.FindControl("postedimage");
        //postedimage.Visible = true;
        string myMap = MapPath("~/").ToLower();
        Random r = new Random();
        int next = r.Next();
        string ImageName = FileUpload1.PostedFile.FileName;
        sImageFileExtension = ImageName.Substring(ImageName.LastIndexOf(".")).ToLower();
        SqlConnection con = new SqlConnection();
        con.ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings["Con"].ConnectionString;
        con.Open();

        DataTable dt2 = new DataTable();

        if (con.State == ConnectionState.Open)

        {
            SqlCommand cmd = new SqlCommand();
            if (sImageFileExtension == ".gif" || sImageFileExtension == ".png" || sImageFileExtension == ".jpg" || sImageFileExtension == ".jpeg" || sImageFileExtension == ".bmp")
            {
                string ImageSaveURL = myMap + "Postedimages/"+next+sImageFileExtension;
               FileUpload1.PostedFile.SaveAs(ImageSaveURL);
                cmd.CommandText = "Insert into Scraps(Emailscrapto,scrap,posttime) Values('" + Session["UserName"].ToString() + "','" + next + sImageFileExtension + "','" + DateTime.Now.ToString() + "')";
                cmd.Connection = con;
                cmd.CommandType = CommandType.Text;
                cmd.ExecuteNonQuery();
                Response.Redirect("UserHome.aspx");
            }
        }
    }
}
 protected void DataList1_ItemDataBound(object sender, DataListItemEventArgs e)
{
   if (e.Item.ItemType == ListItemType.Item ||
     e.Item.ItemType == ListItemType.AlternatingItem)
    {  if (FileUpload1.HasFile != null)
        {
            Image postedimage = (Image)e.Item.FindControl("postedimage");
            postedimage.Visible = true;
        }
    }
} 
```

设计源码是这样的

```
 <asp:DataList ID="DataList1" runat="server" CellPadding="4" Font-Bold="True" Font-     Italic="False"
                Font-Names="Verdana" Font-Overline="False" Font-Size="Medium" Font-Strikeout="False"
                Font-Underline="False" ForeColor="#333333" OnSelectedIndexChanged="DataList1_SelectedIndexChanged"
                Height="1592px" RepeatLayout="Flow" DataSourceID="SqlDataSource1" OnItemCommand="DataList1_ItemCommand"
                OnEditCommand="DataList1_EditCommand" OnItemDataBound="DataList1_ItemDataBound">
                <AlternatingItemStyle BackColor="White" />
                <FooterStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                <FooterTemplate>
                    <asp:TextBox ID="txtcomment" runat="server" Height="29px" Width="188px"></asp:TextBox>
                    &nbsp;<br />
                    <br />
                    <asp:Button ID="Insert" runat="server" Text="Insert" OnClick="Insert_Click" />
                </FooterTemplate>
                <HeaderStyle BackColor="#990000" Font-Bold="True" ForeColor="White" />
                <ItemStyle BackColor="#FFFBD6" ForeColor="#333333" />
                <ItemTemplate>
                    <table class="style8">
                        <tr>
                            <td bgcolor="#FFFF99" class="style12">
                                <asp:Label ID="Label4" runat="server" Text='<%# Eval("FirstName") %>' Font-Bold="True"
                                    Font-Italic="True" ForeColor="Red"></asp:Label>
                            </td>
                            <td bgcolor="#FFFF99" class="style11">
                                <asp:Image ID="Image3" runat="server" Height="108px" ImageUrl='<%# "~/UserImage/" +Eval("profile_pic") %>'
                                    Width="98px" />
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2" bgcolor="#CCFF99">
                                <asp:Label ID="Label5" runat="server" Text='<%# Eval("scrap") %>' ForeColor="#000066"></asp:Label>
                                &nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td bgcolor="#CCFF99" colspan="2">
                                <asp:Image ID="postedimage" runat="server" Height="202px" ImageUrl='<%# "~/Postedimages/" +Eval("scrap") %>'
                                    Visible="False" Width="262px" />
                            </td>
                        </tr>
                        <tr>
                            <td class="style13" bgcolor="#FFC1B3">
                                <asp:LinkButton ID="Edit" runat="server" CommandName="Edit">Edit</asp:LinkButton>
                            </td>
                            <td bgcolor="#FFC1B3">
                                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            </td>
                        </tr>
                        <tr>
                            <td bgcolor="#CABAF8" class="style13" colspan="2">
                                &nbsp;
                            </td>
                        </tr>
                    </table>
                    &nbsp;&nbsp;
                </ItemTemplate>
                <EditItemTemplate>
                    <table class="style14">
                        <tr>
                            <td bgcolor="#E3ACC8">
                                <asp:LinkButton ID="cmnt2" runat="server" CommandName="Comment">Comment</asp:LinkButton>
                                &nbsp;&nbsp;
                                <asp:LinkButton ID="cancel" runat="server" CommandName="Cancel">Cancel</asp:LinkButton>
                            </td>
                        </tr>
                        <tr>
                            <td bgcolor="#CCFFFF">
                                <asp:TextBox ID="TextBox3" runat="server" BorderColor="#003300" BorderStyle="Inset"
                                    Height="30px" Width="486px"></asp:TextBox>
                            </td>
                        </tr>
                    </table>
                    &nbsp;&nbsp;&nbsp;&nbsp;
                    <br />
                </EditItemTemplate>
                <SelectedItemStyle BackColor="#FFCC66" Font-Bold="True" ForeColor="Navy" />
                <SeparatorStyle BackColor="Yellow" Font-Bold="False" Font-Italic="False" Font-Overline="False"
                    Font-Size="Small" Font-Strikeout="False" Font-Underline="False" ForeColor="Maroon"
                    HorizontalAlign="Center" />
            </asp:DataList> 
```

最初，我设置了postedimage.visible=false; 的值。但由于上述编码，出现了空白图像行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:48:35.890

您可以根据数据中的值设置依赖项的可见性，但`tr`您需要将其转换为服务器控件。`scrap`如果没有图像集，我假设是一个空字符串。

```
<tr runat="server" visible='<%# Eval("scrap") != "" %>'>
    <td bgcolor="#CCFF99" colspan="2">
        <asp:Image ID="postedimage" runat="server" Height="202px" ImageUrl='<%# "~/Postedimages/" +Eval("scrap") %>'
            Visible="False" Width="262px" />
    </td>
</tr> 
```

# php - 谷歌地图无法在移动设备上显示，但在 PC 浏览器上运行良好

> ID：12121415
> 
> 赞同：0
> 
> 时间：2012-08-25T11:03:36.660
> 
> 标签：php, android, jquery, iphone, google-maps

我有一个移动应用程序的开始，在我的 IE 和 Chrome 的 PC 上运行良好。当我切换到我的 iPhone (safari) 或 Android (本地浏览器) 设备并查看与地图不显示的完全相同的 URL 时。我已经尝试了我能想到的一切，但没有运气。有人可以看看并告诉我我错过了什么吗？

网址：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:18:04.353

我刚刚在我的 Iphone 上测试了它，它准确地显示了我的位置，这是你想要完成的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:21:18.333

在使用默认浏览器运行 Android 4.1.1 的 Nexus S 上工作正常

# java - 使用java执行shell命令

> ID：12121416
> 
> 赞同：2
> 
> 时间：2012-08-25T11:03:37.347
> 
> 标签：java, multithreading

这个类是执行命令的响应，打印结果

```
 public class ExecutorTask implements Runnable{

    @Override
    public void run() {

        Process process = null;
        try {
            process = Runtime.getRuntime().exec("cmd /c dir");
             BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
             String line="";
             while ((line = reader.readLine()) != null) {
                 System.out.println(line);
             }
            process.waitFor();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            return;
        }
    }
} 
```

第二个类是执行器，使用线程运行 shell

```
public final class ShellCommandExecutor{

    public void execute(String command){

        ExecutorTask task = new ExecutorTask();
        Thread executorThread = new Thread(task);
        executorThread.start();

        /*try {
            Thread.sleep(1000);
            executorThread.interrupt();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }*/
    }

} 
```

问题是为什么我必须在 ShellCommandExecutor 类中添加代码片段：

```
try {
        Thread.sleep(1000);
        executorThread.interrupt();
    } catch (InterruptedException e) {
        e.printStackTrace();
    } 
```

然后我可以看到打印结果：

```
2012-08-21  00:32    <DIR>          .
2012-08-21  00:32    <DIR>          ..
2012-08-21  00:32             1,576 .classpath
2012-08-21  00:26             1,224 .project
2012-08-07  10:58    <DIR>          .settings
2012-08-24  15:19            10,965 pom.xml
2012-08-07  10:57    <DIR>          src
2012-08-21  00:32    <DIR>          target
2012-08-24  10:22                 0 velocity.log 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:13:37.337

你开始了一个线程

```
 executorThread.start(); 
```

如果您什么都不做，启动它的线程（您的主线程）将不会等待您的 executorThread 在返回之前完成，因此您的应用程序将在该线程执行其任务之前退出。

要等待您的 executorThread 完成，您应该调用：

```
executorThread.join(); 
```

稍后在代码中。此时，您将确保它已完成任务。

目前它可以工作，因为您在主线程中等待 1 秒，在此期间您的其他线程执行其操作。但是，如果您的 executorThread 需要超过一秒钟的时间来执行它，它将无法工作，所以`sleep()`在这种情况下您不应该这样做。

请参阅[Thread.join](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#join%28%29) javadoc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:14:09.173

首先，为什么在不**使用 String 时将其用作** `execute()`方法中的参数**...**

我尝试了您的程序稍作修改，它**没有** `sleep()`和`interrupt()`

试试下面的代码......

```
public final class ShellCommandExecutor{

    public void execute(){

        ExecutorTask task = new ExecutorTask();
        Thread executorThread = new Thread(task);
        executorThread.start();

        /*try {
            Thread.sleep(1000);
            executorThread.interrupt();
        } catch (InterruptedException e) {
            e.printStackTrace();
        }*/
    }

    public static void main(String[] args){

        new ShellCommandExecutor().execute();
    }

}

class ExecutorTask implements Runnable{

    @Override
    public void run() {

        Process process = null;
        try {
            process = Runtime.getRuntime().exec("cmd /c dir");
             BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
             String line="";
             while ((line = reader.readLine()) != null) {
                 System.out.println(line);
             }
            process.waitFor();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (InterruptedException e) {
            return;
        }
    }
} 
```

# python - 合并字典而不覆盖值

> ID：12121417
> 
> 赞同：2
> 
> 时间：2012-08-25T11:03:41.327
> 
> 标签：python

这似乎是一个简单的任务：

我正在尝试合并 2 个字典而不覆盖值但追加。

```
a = {1: [(1,1)],2: [(2,2),(3,3)],3: [(4,4)]} 
b = {3: [(5,5)], 4: [(6,6)]} 
```

元组数 a = 4，元组数 b = 2

这就是为什么我选择了这些选项，因为它们正在覆盖：

```
all = dict(a.items() + b.items()) 
all = dict(a, **b)
all = a.update([b]) 
```

以下解决方案工作得很好，但它也将值附加到我的原始字典 a：

```
all = {}

for k in a.keys():
    if k in all:
        all[k].append(a[k])
    else:
        all[k] = a[k]

for k in b.keys():
    if k in all:
        all[k].append(b[k])
    else:
        all[k] = b[k] 
```

输出 =

```
a = {1: [(1, 1)], 2: [(2, 2), (3, 3)], 3: [(4, 4), **[(5, 5)]**]}
b = {3: [(5, 5)], 4: [(6, 6)]}
c = {1: [(1, 1)], 2: [(2, 2), (3, 3)], 3: [(4, 4), [(5, 5)]], 4: [(6, 6)]} 
```

元组数 a = **5 !!!!!!** ，元组数 b = 2（正确），元组数全部 = 6（正确）

`[(5,5)]`它将元组从 b附加到 a。我不知道为什么会发生这种情况，因为我正在编码的只是将所有内容写入完整的字典“all”。

谁能告诉我它到底在哪里改变 dict(a) ???????

非常欢迎任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T11:05:48.343

使用[`.extend`](http://docs.python.org/library/stdtypes.html#mutable-sequence-types)而不是`.append`将列表合并在一起。

```
>>> example = [1, 2, 3]
>>> example.append([4, 5])
>>> example
[1, 2, 3, [4, 5]]
>>> example.extend([6, 7])
>>> example
[1, 2, 3, [4, 5], 6, 7] 
```

此外，您可以使用以下方法循环遍历两者的键`a`和值：`b`[`itertools.chain`](http://docs.python.org/library/itertools.html#itertools.chain)

```
from itertools import chain
all = {}
for k, v in chain(a.iteritems(), b.iteritems()):
    all.setdefault(k, []).extend(v) 
```

[`.setdefault()`](http://docs.python.org/library/stdtypes.html#dict.setdefault)查找一个键，如果它还不存在，则将其设置为默认值。或者，您可以使用[`collections.defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)隐式执行相同的操作。

输出：

```
>>> a
{1: [(1, 1)], 2: [(2, 2), (3, 3)], 3: [(4, 4)]}
>>> b
{3: [(5,5)], 4: [(6,6)]}
>>> all
{1: [(1, 1)], 2: [(2, 2), (3, 3)], 3: [(4, 4), (5, 5)], 4: [(6, 6)]} 
```

请注意，因为我们现在首先为每个键创建一个干净的新列表，然后再扩展，所以您原来的列表`a`不受影响。在您的代码中，您不会创建列表的副本；相反，您复制了对列表的*引用。*最后，the`all`和`a`dict 值都指向相同的列表，并且在这些列表上使用 append 会导致更改在两个地方都可见。

用简单的变量而不是字典很容易证明这一点：

```
>>> foo = [1, 2, 3]
>>> bar = foo
>>> bar
[1, 2, 3]
>>> bar.append(4)
>>> foo, bar
([1, 2, 3, 4], [1, 2, 3, 4])
>>> id(foo), id(bar)
(4477098392, 4477098392) 
```

两者都`foo`引用`bar`同一个列表，列表没有被复制。要创建副本，请使用`list()`构造函数或使用`[:]`切片运算符：

```
>>> bar = foo[:]
>>> bar.append(5)
>>> foo, bar
([1, 2, 3, 4], [1, 2, 3, 4, 5])
>>> id(foo), id(bar)
(4477098392, 4477098536) 
```

现在`bar`是列表的新副本，更改不再在`foo`. 两个列表的内存地址（`id()`调用结果）不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-25T11:08:46.760

如果您想要第三本字典，它是组合字典，我会使用`collection.defaultdict`

```
from collections import defaultdict
from itertools import chain
all = defaultdict(list)
for k,v in chain(a.iteritems(), b.iteritems()):
    all[k].extend(v) 
```

输出

```
defaultdict(<type 'list'>, {1: [(1, 1)], 2: [(2, 2), (3, 3)], 3: [(4, 4), (5, 5)], 4: [(6, 6)]}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T12:57:56.123

作为对更改原因的解释，请`a`考虑您的循环：

```
for k in a.keys():
    if k in all:
        all[k].append(a[k])
    else:
        all[k] = a[k] 
```

因此，如果`k`尚未在 中，则`all`输入该`else`部分，现在，`all[k]` **指向**`a[k]`列表。这不是副本，而是对 的引用`a[k]`：它们基本上是同一个对象。在下一次迭代中，`all[k]`被定义，并且你附加到它：但作为`all[k]`指向`a[k]`，你最终也附加到`a[k]`。

你想避免一个`all[k] = a[k]`. 你可以试试：

```
for k in a.keys():
    if k not in all:
        all[k] = []
    all[k].extend(a[k]) 
```

（注意@Martijn Pieters 所指出`extend`的，而不是）。`append`在这里，你永远不需要`all[k]`指向`a[k]`，所以你是安全的。不过，@Martijn Pieters 的回答更加简洁和优雅，所以你应该接受它。

# node.js - 无法在 SOCKET.IO 客户端中接收事件

> ID：12121420
> 
> 赞同：1
> 
> 时间：2012-08-25T11:04:24.800
> 
> 标签：node.js, socket.io

我是 socket.io 的新手，我正在尝试他们网站上提到的示例。我很好，但是当我尝试在服务器端使用 io.emit 并尝试在客户端接收时会出现问题。

这是我的服务器代码

```
var io=require("socket.io").listen(8888);
io.set('log level',1);
io.on('connection',function(socket){ 
socket.emit('hi');
console.log("Connected");
}); 
```

还有我客户的代码

```
<script src="http://localhost:8888/socket.io/socket.io.js"></script>
<script>
var socket=io.connect("http://localhost:8888");
socket.set('log_level',1);
socket.on('hi',function(){
console.log('received');
});
</script> 
```

问题是我在控制台中没有看到“收到”消息！答案可能微不足道，但我尝试过尝试但每次都失败了。请指导....

我在ubuntu firefox上。节点版本：0.8.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:21:27.490

所以你应该在服务端有这个：

```
var io = require('socket.io').listen(88888);
io.set('log level',1);
io.sockets.on('connection', function (socket) {
  socket.emit('hi);
  console.log("Connected");
  });
}); 
```

你应该在客户端有这个：

```
<script src="http://localhost:8888/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost:8888/');
  socket.set('log_level',1);
  socket.on('hi', function () {
    console.log(data);
    socket.emit('my other event', { my: 'data' });
  });
</script> 
```

WebSockets like many html5 features does not work in a non webserver environment. I mean It won't work if you are accessing your client with the file protocol. You need to have a http server. What I do to get things done easily, I use python built-in web-server. It does the job. Just spawn it in you client folder like this:

```
python -m SimpleHTTPServer 
```

And then point your browser to port 8000 (default).

I've made a [boiler plate](https://github.com/dotcloud/socket.io-on-dotcloud) socket.io app that you can clone and even push directly to [dotCloud.com](http://dotcloud.com)
This is a simple example and could help you to get started with socket.io.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:20:00.693

[在soket.io GitHub 页面](https://github.com/LearnBoost/socket.io)上查找示例。

你写道：`io.on('connection'`相反`io.sockets.on('connection'`

此代码应该可以正常工作：

```
var io = require('socket.io').listen(8888);
io.set('log level', 1);
io.sockets.on('connection', function(socket){ 
    socket.emit('hi');
    console.log("Connected");
}); 
```

# c# - 在特定偏移处插入十六进制数据

> ID：12121421
> 
> 赞同：0
> 
> 时间：2012-08-25T11:04:27.203
> 
> 标签：c#, hex, offset

我需要能够将音频数据插入现有的 ac3 文件。AC3 文件非常简单，可以相互附加而无需剥离标题或任何东西。我遇到的问题是，如果你想添加/覆盖/擦除一块 ac3 文件，你必须以 32ms 为增量，每 32ms 等于 1536 个字节的数据。所以当我插入一个数据块（必须是 1536 字节，正如我刚才所说）时，我需要找到能被 1536 整除的最近偏移量（如 0、1536（0x600）、3072（0xC00）等）。假设我可以解决这个问题。我[读过关于](https://stackoverflow.com/questions/10231234/replacing-a-specific-hex-offset-in-c-sharp)在特定偏移量处更改特定字符的信息，但我需要插入（而不是覆盖）整个 1536 字节数据块。给定起始偏移量和 1536 字节的数据块，我将如何在 C# 中执行此操作？

编辑：我要插入的数据块基本上只有 32 毫秒的静音，我有它的十六进制、ASCII 和 ANSI 文本翻译。当然，我可能想多次插入这个块来获得 128 毫秒的静音，而不是仅仅 32 毫秒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:29:13.270

```
byte[] filbyte=File.ReadAllBytes(@"C:\abc.ac3");
byte[] tobeinserted=;//allocate in your way using encoding whatever

byte[] total=new byte[filebyte.Length+tobeinserted.Length];

for(int i=0;int j=0;i<total.Length;)
{
   if(i==1536*pos)//make pos your choice
   { 
     while(j<tobeinserted.Length) 
       total[i++]=tobeinserted[j++];
   }
   else{total[i++]=filbyte[i-j];}
}

File.WriteAllBytes(@"C:\abc.ac3",total); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:59:22.327

这是可以满足您需要的辅助方法：

```
public static void Insert(string filepath, int insertOffset, Stream dataToInsert)
{
    var newFilePath = filepath + ".tmp";
    using (var source = File.OpenRead(filepath))
    using (var destination = File.OpenWrite(newFilePath))
    {
        CopyTo(source, destination, insertOffset);// first copy the data before insert
        dataToInsert.CopyTo(destination);// write data that needs to be inserted:
        CopyTo(source, destination, (int)(source.Length - insertOffset)); // copy remaining data
    }

    // delete old file and rename new one:
    File.Delete(filepath);
    File.Move(newFilePath, filepath);
}

private static void CopyTo(Stream source, Stream destination, int count)
{
    const int bufferSize = 32 * 1024;
    var buffer = new byte[bufferSize];

    var remaining = count;
    while (remaining > 0)
    {
        var toCopy = remaining > bufferSize ? bufferSize : remaining;
        var actualRead = source.Read(buffer, 0, toCopy);

        destination.Write(buffer, 0, actualRead);
        remaining -= actualRead;
    }
} 
```

这是一个带有示例用法的 NUnit 测试：

```
[Test]
public void TestInsert()
{
    var originalString = "some original text";
    var insertString = "_ INSERTED TEXT _";
    var insertOffset = 8;

    var file = @"c:\someTextFile.txt";

    if (File.Exists(file))
        File.Delete(file);

    using (var originalData = new MemoryStream(Encoding.ASCII.GetBytes(originalString)))
    using (var f = File.OpenWrite(file))
        originalData.CopyTo(f);

    using (var dataToInsert = new MemoryStream(Encoding.ASCII.GetBytes(insertString)))
        Insert(file, insertOffset, dataToInsert);

    var expectedText = originalString.Insert(insertOffset, insertString);

    var actualText = File.ReadAllText(file);
    Assert.That(actualText, Is.EqualTo(expectedText));
} 
```

请注意，我已经删除了一些代码清晰度检查 - 不要忘记检查 null、文件访问权限和文件大小。例如`insertOffset`可以大于文件长度 - 此处未检查此条件。

# java - 使用 javaBeans Persistence 机制保存和加载 java GUI

> ID：12121422
> 
> 赞同：1
> 
> 时间：2012-08-25T11:04:31.897
> 
> 标签：java, swing, javabeans

这是我使用 javabeans 保存和加载 java GUI 的代码。

```
import java.awt.*;
import java.awt.event.*;
import java.beans.*;
import java.io.*;
import javax.swing.*;

public class BeansTest {
  private static JFileChooser chooser;
private JFrame frame;
Registry re;

public static void main(String[] args){
    chooser = new JFileChooser();
    chooser.setCurrentDirectory(new File("."));
    BeansTest test = new BeansTest();
    test.init();
}

public void init(){
    frame = new JFrame();
    frame.setLayout(new FlowLayout());
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setTitle("PersistentFrameTest");
    frame.setSize(400,200);

    JButton registryButton = new JButton("Registry");
    frame.add(registryButton);
    registryButton.addActionListener(EventHandler.create(ActionListener.class, this, "registry"));

    JButton saveButton = new JButton("Save");
    frame.add(saveButton);
    saveButton.addActionListener(EventHandler.create(ActionListener.class, this, "save"));

    JButton loadButton = new JButton("Load");
    frame.add(loadButton);
    loadButton.addActionListener(EventHandler.create(ActionListener.class, this, "load"));

    frame.setVisible(true);
}

public void registry(){

re = new Registry();
//re.getFrame();
}

public void save()
{
    if(chooser.showSaveDialog(null)==JFileChooser.APPROVE_OPTION)
    {
        try{
            File file = chooser.getSelectedFile();
            XMLEncoder encoder = new XMLEncoder(new FileOutputStream(file));
            encoder.writeObject(frame);
            if (re.getFrame() != null) {
                encoder.writeObject(re.getFrame());
            }
            encoder.close();
        }
        catch(IOException e)
        {
            JOptionPane.showMessageDialog(null, e);
        }
    }
}
public void load()
{
    //show file chooser dialog
    int r = chooser.showOpenDialog(null);

    // if file selected, open
    if(r == JFileChooser.APPROVE_OPTION)
    {
        try
        {
          File file = chooser.getSelectedFile();
          XMLDecoder decoder = new XMLDecoder(new FileInputStream(file));
          decoder.readObject();
          decoder.close();
        }
        catch(IOException e)
        {
            JOptionPane.showMessageDialog(null, e);
        }
    }
}

}

public class Registry {

JFrame frame;

public Registry(){

    frame = new JFrame();
    frame.setLayout(new FlowLayout());
    frame.setSize(400,200);

    JLabel nameL = new JLabel("Name:");
    JTextField nameF = new JTextField(8);

    frame.add(nameL);
    frame.add(nameF);

    frame.setVisible(true);

}
public JFrame getFrame(){

    return frame;
}
} 
```

在这个程序中，我有两个框架：主框架和注册表框架。因为我将这两帧保存在一个 XML 文件中。所以当我加载这个文件时，我会同时得到这两个帧。我想要做的是，当用户加载 XML 文件时，他只获得主框架。用户单击registryButton 后，会出现第二个框架。我应该怎么做才能意识到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:24:41.637

使用`XMLDecoder`保存的每一帧时，将按照写入时的相同顺序读出。请记住分配并使用以下结果`readObject`：

```
JFrame mainFrame = (JFrame) xmlDecoder.readObject();
mainFrame.setVisible(true); 
```

# c# - MassTransit/RabbitMQ - 进入错误队列的请求不一致

> ID：12121429
> 
> 赞同：2
> 
> 时间：2012-08-25T11:06:00.547
> 
> 标签：c#, .net, rabbitmq, amqp, masstransit

我有一个使用 ServiceStack 构建的 Web API，它通过位于 RabbitMQ 上的 MassTransit 与 TopShelf 服务后端进行通信。大多数时候，一切正常，但有时我们开始看到大量请求开始进入错误队列的问题。

API 比较简单，只有 2 次调用。据我所知，查看日志，主要调用工作正常。然而，另一个调用是用于确定节点状态的调用，并且会导致问题。这两个调用都以相同的方式实现，使用请求/响应方法。

以下是其中一个错误的日志文件：

```
2012-08-25 00:01:28,544 [6] DEBUG MassTransit.Messages - SEND:rabbitmq://testapi:password@localhost:5672/test_API.Models:StatusMessage::test_API.Models.StatusMessage, Models
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SKIP:rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] ERROR MassTransit.Transports.Endpoint - Message retry limit exceeded rabbitmq://testapi:password@localhost:5672/testapi_web:08cf3caf-6d81-0d5b-0050-56a800810000
2012-08-25 00:01:28,575 [38] DEBUG MassTransit.Messages - SEND:rabbitmq://testapi:password@localhost:5672/testapi_web_error:08cf3caf-6d81-0d5b-0050-56a800810000:
2012-08-25 00:01:28,575 [38] INFO  MassTransit.Messages - MOVE:rabbitmq://testapi:password@localhost:5672/testapi_web:rabbitmq://testapi:password@localhost:5672/testapi_web_error:08cf3caf-6d81-0d5b-0050-56a800810000:
2012-08-25 00:01:33,888 [29] ERROR ServiceStack.ServiceInterface.ServiceBase`1 - ServiceBase<TRequest>::Service Exception
MassTransit.Exceptions.RequestTimeoutException: The request timed out: 08cf4f95-1a2b-d545-0050-56a800810000
   at MassTransit.RequestResponse.RequestImpl`1.Wait() in d:\BuildAgent-03\work\8d1373c869590c5b\src\MassTransit\RequestResponse\RequestImpl.cs:line 107
   at test.API.StatusService.OnGet(Status request)
   at ServiceStack.ServiceInterface.RestServiceBase`1.Get(TRequest request) 
```

我确实注意到它在抱怨超时。我们尝试了可变长度，但似乎没有帮助。查看与数据库的连接，消费者中似乎没有任何东西会真正阻止它，所以我不确定超时是由于发送时的多次失败引起的，还是仅仅是连接问题. 通常，响应会在不到一秒的时间内发生。

该请求是通过以下方式提出的：

```
this.DataBus.PublishRequest(new StatusMessage(request, RequestType.GET), x =>
{
    x.Handle<StatusResponseMessage>(message =>
    {
        if (message.Exception != null)
        {
            Response.Message = message.Exception.Message;
        }
        Response.Node = message.Response.Node;
        Response.Status = message.Response.Status;
    });
    x.SetTimeout(5.Seconds());
 }); 
```

消费者是：

```
public void Consume(IConsumeContext<StatusMessage> context)
    {
        try 
        {
            // Get status from database (not included)
            context.Respond(new StatusResponseMessage(context.Message.CorrelationId, new StatusResponsePacket(context.Message.Request.Node, status, lastUpdated)));
        }
        catch (Exception e)
        {
            context.Respond(new StatusResponseMessage(context.Message.CorrelationId, e));
        } 
```

任何人都可以看到这有什么明显的错误吗？我检查了 API 和服务正在读取不同的队列（错误最终出现在 test_web_error 队列中），并检查了状态请求和响应数据包上是否设置了相关 ID 和 CorrelatedBy。如前所述，这只发生在这个调用中，而不是我们拥有的另一个调用。我也有多台服务器运行它，它似乎一次只发生在一台服务器上，但并不总是同一个服务器。

# android - 同名 jar 的运行时异常

> ID：12121435
> 
> 赞同：0
> 
> 时间：2012-08-25T11:06:37.690
> 
> 标签：android, class, jar, package

我正在开发一个 android 应用程序，其中我使用了两个外部 jar 文件（库），并且两个 jar 文件具有相同的包名称和相同的类，但类中的方法略有不同。

我需要两个 jar 文件。我想访问第一个 jar 中的一个类，但不是其他 jar 中的同一个类。事实上，我从不想要第二个罐子里的课程。

当我尝试一次使用两个 jar 文件时，我得到了异常

```
java.lang.IllegalArgumentException: already added: Lcom/appcelerator/cloud/push/CCPushService$1; 
```

那么如何才能只访问第一个 jar 中的类，或者如何避免在第二个 jar 文件中使用该类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:01:50.730

> 那么如何才能只访问第一个 jar 中的类，或者如何避免在第二个 jar 文件中使用该类。

您摆脱了其中一个 JAR。你想要的也不能在普通的 Java 中工作。拥有两个具有相同类的 JAR 会给您带来不可靠的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:07:24.923

您需要删除第二个 jar 文件。

# php - 提交 html 表单后如何从另一个站点读取 XML 响应

> ID：12121436
> 
> 赞同：1
> 
> 时间：2012-08-25T11:06:40.637
> 
> 标签：php, jquery, curl

在我的网站中，我向支付网站 (webmasterchecks.com) 提交了一个 html 表单，该网站通过 XML 响应响应我。正常表单提交后（通过单击提交按钮），XML 响应显示在外部链接 (https://api.webmasterchecks.com/payments/add) 上。我想阅读 XML 响应并更新我的数据库。我的编码语言是 PHP。

**HTML 表单：**

```
<form name="payment_form" action="https://api.webmasterchecks.com/payments/add" method="post">

<input type="text" name="client_id" value="****"></input>
<input type="text" name="akey" value="**********"></input>
<input type="text" name="method_id" value="2"></input>
<input type="text" name="payee" value="ABCD EFGH"></input>
<input type="text" name="amount" value="1.00"></input>
<input type="text" name="postage_id" value="6"></input>
<input type="text" name="reference" value="Payment"></input>
<input type="text" name="street_addr" value="51 ABCD"></input>
<input type="text" name="city" value="XYZ"></input>
<input type="text" name="state" value="NJ"></input>
<input type="text" name="country" value="United States"></input>
<input type="text" name="zip" value="01544"></input>
<input type="submit" name="submit" value="submit"></input>
</form> 
```

我尝试使用 jquery post 提交表单并获取 json 数据。但是表单没有提交（控制台也没有出现任何错误）。代码如下。

```
$(function(){
      $("form[name=payment_form]").submit(function(){
        $.post($(this).attr("action"), $(this).serialize(), function(jsonData){
            alert(jsonData);
        }, "json");
        return false;
      });
    }); 
```

我也尝试使用 curl，但没有成功。它显示 API 密钥是无效的，因为使用上面的 html 表单，我得到了响应。CURL 代码如下。

```
 $client_id = "****";
   $api_key = "*****************************";

   $output_url = "https://api.webmasterchecks.com/payments/add";

   $output_transaction  = "client_id=$client_id&";
   $output_transaction .= "akey=$api_key&";
   $output_transaction .= "method_id=2&";
   $output_transaction .= "payee=ABCD EFGH&";
   $output_transaction .= "amount=1.00&";
   $output_transaction .= "postage_id=6&";
   $output_transaction .= "reference=Payment&";
   $output_transaction .= "street_addr=FGHFHGFG&";
   $output_transaction .= "city=JHGJHG&";
   $output_transaction .= "state=NJ&";
   $output_transaction .= "country=United States&";
   $output_transaction .= "zip=54545454";

    ob_start();
    $ch = curl_init ($output_url); 
    curl_setopt ($ch, CURLOPT_VERBOSE, 1);
    curl_setopt ($ch, CURLOPT_POST, 1);
    curl_setopt ($ch, CURLOPT_POSTFIELDS, $output_transaction);
    curl_exec ($ch);
    curl_close ($ch);
    $process_result = ob_get_contents();
    ob_end_clean(); 
```

如何使用 XML 响应更新我的数据库？

提前致谢。

**编辑**

我的 api 密钥包含几个加号“+”。API 密钥的示例格式如下所示。

q5Un5ObLZs2ovY2COW+LvHzEVdUy0kR3u6dPwh/p+wzlbh80vONBbo+otLpBwPqnvP/VjhglfFos51sLFDpUHi+6GnVbLtR3ATjSz9trGoKLFgrK/ostPUG4t9XV1EdS10JzVZFscIxUu2LVMJN9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:37:44.633

您需要在此处将数据发送到本地脚本，然后将其打包成 curl 请求，以通过其 API 与远程服务器进行交互。

```
<form name="payment_form" action="local_script.php" method="post">
<input type="text" name="method_id" value="2"></input>
<input type="text" name="payee" value="ABCD EFGH"></input>
<input type="text" name="amount" value="1.00"></input>
<input type="text" name="postage_id" value="6"></input>
<input type="text" name="reference" value="Payment"></input>
<input type="text" name="street_addr" value="51 ABCD"></input>
<input type="text" name="city" value="XYZ"></input>
<input type="text" name="state" value="NJ"></input>
<input type="text" name="country" value="United States"></input>
<input type="text" name="zip" value="01544"></input>
<input type="submit" name="submit" value="submit"></input>
</form> 
```

**请注意，我已从表单中删除了 client_id 和 api_key，因为它们不应该像这样向公众展示**

**local_script.php**

```
$api_url = "https://api.webmasterchecks.com/payments/add";
 $client_id = "****";
   $api_key = "*****************************";

$_POST['client_id'] = $client_id;
$_POST['akey'] = $api_key;

      $post_data = http_build_query($_POST);

    $xml = new DOMDocument();
    $ch = curl_init ($api_url); 
    curl_setopt($ch, CURLOPT_VERBOSE, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);//return xml
    curl_setopt($ch, CURLOPT_HEADER, FALSE);//we only need the body
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data);
    $xml->loadXML(curl_exec($ch));
    curl_close ($ch);
    //for testing echo xml
    echo $xml->saveXML();
    //you need now to parse the xml before adding info to db
    $name = $xml->getElementsByTagName('name')->item(1)->nodeValue;
    $email = $xml->getElementsByTagName('email')->item(1)->nodeValue; 
```

这就是我的做法，因为我精通 DOMDocument 来解析和编写 xml，您可以使用 DOMDocument [http://www.php.net/manual/en/class.domdocument.php](http://www.php.net/manual/en/class.domdocument.php)的手册进行解析或使用SIMPLEXML [http://php.net/manual/en/book.simplexml.php](http://php.net/manual/en/book.simplexml.php)无论哪种方式，您都需要解析 xml 以将数据添加到您的数据库中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:41:14.753

可能您还可以使用 ajax 向该 URL 发送和获取数据。我创建了显示地图和标记数据的简单页面。我已经使用 ajax 获取数据。对我的 ajax 调用的响应是 xml。所以在得到响应后，我只是简单地解析了 xml。

例如

```

    var url="mapData.php";
        var request = getRequestObj();
        request.open("GET", url, true);
        request.onreadystatechange = function() {
          如果（request.readyState == 4）{
            var xmlDoc = request.responseXML;
            // 获取标记数组并循环遍历它
            var 标记 = xmlDoc.documentElement.getElementsByTagName("marker");

            for (var i = 0; i < marker.length; i++) {
             //解析其他xml元素...
            }
          }
        }
        request.send(null);

```

希望这会有所帮助。

# python - heroku 独立

> ID：12121437
> 
> 赞同：-3
> 
> 时间：2012-08-25T11:06:47.857
> 
> 标签：python, heroku, scrapy

我已经编写了一些代码来使用 python 爬虫库*scrapy*来抓取网站 我想将这段代码和这段代码单独移动到 heroku 服务器，并能够从 heroku dyno 运行它。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:11:00.140

[https://devcenter.heroku.com/articles/python](https://devcenter.heroku.com/articles/python)

# android - 存储微调器选择

> ID：12121440
> 
> 赞同：3
> 
> 时间：2012-08-25T11:07:03.977
> 
> 标签：android, spinner

我创建了三个具有特定值列表的 Spinners。我将每个 Spinner 的选择值存储在一个变量中。问题是当我转到下一页时，我丢失了我的变量。我该怎么办？

```
public class TabOneActivity extends Activity implements OnItemSelectedListener{
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabone);

        // Spinner element
        Spinner spinner = (Spinner) findViewById(R.id.fudtaste);

        // Spinner click listener
        spinner.setOnItemSelectedListener(this);

        // Spinner Drop down elements
        List<String> categories = new ArrayList<String>();
        categories.add("    Chineese");
        categories.add("    Fast Food");
        categories.add("    Traditional");
        categories.add("    Mixed");
        categories.add("    Favourites");
        categories.add("    Combo Items");

        //Toast.makeText(getApplicationContext(),newPos1,Toast.LENGTH_LONG).show();
     //  System.out.println(str + "sarath" );

        Spinner spinner2 = (Spinner) findViewById(R.id.foodmoney);

        // Spinner click listener
        spinner2.setOnItemSelectedListener(this);

        // Spinner Drop down elements
        List<String> categories2 = new ArrayList<String>();
        categories2.add("    Fast Food");
        categories2.add("    Pub Food");
        categories2.add("    High End Food");
//        categories2.add("    ");
//        categories2.add("    Music With Food");
//        categories2.add("    Enjoy The Food");
        int newPos2 = spinner2.getSelectedItemPosition();

        //Toast.makeText(getApplicationContext(),newPos2,Toast.LENGTH_LONG).show();
        System.out.println(newPos2 + "sarath" );

        Spinner spinner3 = (Spinner) findViewById(R.id.transport);

        // Spinner click listener
        spinner3.setOnItemSelectedListener(this);

        // Spinner Drop down elements
        List<String> categories3 = new ArrayList<String>();
        categories3.add("    I'll Walk");
        categories3.add("    A Cab Please");
        categories3.add("    Limo!!");
        int newPos3 = spinner3.getSelectedItemPosition();

        //Toast.makeText(getApplicationContext(),newPos3,Toast.LENGTH_LONG).show();
        System.out.println(newPos3 + "sarath" );

        // Creating adapter for spinner
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, categories);
        ArrayAdapter<String> dataAdapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, categories2);
        ArrayAdapter<String> dataAdapter3 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, categories3);

        // Drop down layout style - list view with radio button
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        dataAdapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        dataAdapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        // attaching data adapter to spinner
        spinner.setAdapter(dataAdapter);
        spinner2.setAdapter(dataAdapter2);
        spinner3.setAdapter(dataAdapter3);

        Button bt1 = (Button)findViewById(R.id.search1);
        bt1.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                    Intent j = new Intent(getApplicationContext(), PlanMyDayListActivity.class);
                    j.putExtra("tab", 1);

                    startActivity(j);
            }
        });
    }

//  public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
//      // On selecting a spinner item
//      String item = parent.getItemAtPosition(position).toString();
//      
////         Context mContext = null;
////        Toast.makeText(mContext,item,Toast.LENGTH_SHORT).show();
//      Toast.makeText(getApplicationContext(),item,Toast.LENGTH_LONG).show();
//
//  }
    public void onNothingSelected(AdapterView<?> arg0) {
    }

    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T12:38:15.480

尝试新的

```
public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    TextView tv = (TextView)arg1;
    String str=tv.getText().toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:19:21.163

这是您查询的完整解决方案。如果您对此有任何疑问，请告诉我。

```
import android.widget.Toast;

public class TabOneActivity extends Activity implements OnItemSelectedListener{

    List<String> categories,categories2,categories3;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tabone);

        // Spinner element
        Spinner spinner = (Spinner) findViewById(R.id.fudtaste);

        // Spinner click listener
        spinner.setOnItemSelectedListener(this);

        // Spinner Drop down elements
         categories = new ArrayList<String>();
        categories.add("    Chineese");
        categories.add("    Fast Food");
        categories.add("    Traditional");
        categories.add("    Mixed");
        categories.add("    Favourites");
        categories.add("    Combo Items");

        //Toast.makeText(getApplicationContext(),newPos1,Toast.LENGTH_LONG).show();
        //  System.out.println(str + "sarath" );

        Spinner spinner2 = (Spinner) findViewById(R.id.foodmoney);

        // Spinner click listener
        spinner2.setOnItemSelectedListener(this);

        // Spinner Drop down elements
         categories2 = new ArrayList<String>();
        categories2.add("    Fast Food");
        categories2.add("    Pub Food");
        categories2.add("    High End Food");
        //        categories2.add("    ");
        //        categories2.add("    Music With Food");
        //        categories2.add("    Enjoy The Food");
        int newPos2 = spinner2.getSelectedItemPosition();

        //Toast.makeText(getApplicationContext(),newPos2,Toast.LENGTH_LONG).show();
        System.out.println(newPos2 + "sarath" );

        Spinner spinner3 = (Spinner) findViewById(R.id.transport);

        // Spinner click listener
        spinner3.setOnItemSelectedListener(this);

        // Spinner Drop down elements
         categories3 = new ArrayList<String>();
        categories3.add("    I'll Walk");
        categories3.add("    A Cab Please");
        categories3.add("    Limo!!");
        int newPos3 = spinner3.getSelectedItemPosition();

        //Toast.makeText(getApplicationContext(),newPos3,Toast.LENGTH_LONG).show();
        System.out.println(newPos3 + "sarath" );

        // Creating adapter for spinner
        ArrayAdapter<String> dataAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, categories);
        ArrayAdapter<String> dataAdapter2 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, categories2);
        ArrayAdapter<String> dataAdapter3 = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, categories3);

        // Drop down layout style - list view with radio button
        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        dataAdapter2.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        dataAdapter3.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        // attaching data adapter to spinner
        spinner.setAdapter(dataAdapter);
        spinner2.setAdapter(dataAdapter2);
        spinner3.setAdapter(dataAdapter3);

        Button bt1 = (Button)findViewById(R.id.search1);
        bt1.setOnClickListener(new View.OnClickListener() 
        {
            public void onClick(View v) 
            {
                Intent j = new Intent(getApplicationContext(), PlanMyDayListActivity.class);
                j.putExtra("tab", 1);

                startActivity(j);
            }
        });
    }

    //  public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {
    //      // On selecting a spinner item
    //      String item = parent.getItemAtPosition(position).toString();
    //      
    ////         Context mContext = null;
    ////        Toast.makeText(mContext,item,Toast.LENGTH_SHORT).show();
    //      Toast.makeText(getApplicationContext(),item,Toast.LENGTH_LONG).show();
    //
    //  }
    public void onNothingSelected(AdapterView<?> arg0) {
    }

    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3) {

        switch(arg1.getId()){
        case R.id.fudtaste:
        {
            Toast.makeText(getApplicationContext(),"spinner clicked value: "+categories.get(arg2),Toast.LENGTH_LONG).show();
            break;
        }
        case R.id.foodmoney:
        {
            Toast.makeText(getApplicationContext(),"spinner2 clicked value: "+categories2.get(arg2),Toast.LENGTH_LONG).show();
            break;
        }
        case R.id.transport:
        {
            Toast.makeText(getApplicationContext(),"spinner3 clicked value: "+categories3.get(arg2),Toast.LENGTH_LONG).show();
            break;
        }
        }

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T09:54:13.413

对不起，这个迟到的答案！

使用共享偏好

# asp.net-mvc-4 - 安装 VS 2012 Ultimate 后 ASP.NET Web API 冲突

> ID：12121449
> 
> 赞同：1
> 
> 时间：2012-08-25T11:09:32.090
> 
> 标签：asp.net-mvc-4, asp.net-web-api, visual-studio-2012

我前段时间安装了 asp.net mvc-4 beta 来托管我们的 api。在我刚刚在我的机器上安装了 vs2012 Ultimate 之前它运行良好。该项目既不在 vs2010 也不在 vs2012 中编译。我能做些什么来解决这个冲突。此外，我在我的服务器上部署了 asp.net web api 程序集。我必须做什么才能在服务器上运行最新版本（一旦前面的问题得到解决）？

**编辑：**
我在 vs2012 中打开时的编译错误是

```
'System.Net.Http.HttpRequestMessage' does not contain a definition for 'GetUserPrincipal' and no extension method 'GetUserPrincipal'...

'System.Web.Http.Hosting.HttpPropertyKeys' does not contain a definition for 'UserPrincipalKey' 
```

另一方面，在 vs 2010 中，它拒绝接受 DelegatingHandler 等类型。一些错误如下。

```
The type or namespace name 'DelegatingHandler' could not be found (are you missing a using directive or an assembly reference?)

The type or namespace name 'HttpResponseMessage' could not be found (are you missing a using directive or an assembly reference?) 
```

我也安装了最新版本的 asp.net mvc 4，它显示的版本是 4.0.20713.0。以前，我使用 nuget 添加了 web-api beta。我已将它们全部删除并从 nuget 安装了最新版本的 web-api。我不知道可能是什么问题。一件事，我不明白：为什么我需要单独安装 web-api 程序集，因为它们应该是 mvc 框架的一部分？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-07T10:26:04.237

add

```
using System.Net.Http; 
```

You probably have the reference already, so just add the using for the extension method.
Otherwise add the Assembly of the same name.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:31:05.463

使用 System.ServiceModel.Channels 添加；到你的文件。根据[THIS](http://msdn.microsoft.com/en-us/library/system.servicemodel.channels.httprequestmessageextensionmethods.getuserprincipal.aspx) ，此命名空间中存在 HttpRequestMessage 的扩展方法。

# jquery - 从不同的 div 获取内容

> ID：12121450
> 
> 赞同：2
> 
> 时间：2012-08-25T11:09:37.253
> 
> 标签：jquery, ajax, loading

这是我的 jQuery 代码：

```
$(document).ready(function() {
    $("#nav li a").click(function() {

        $("#ajax-content").html("<div id='loading'><img src='{THEME}/images/loading.gif' alt='Loading' /></div>");

        $("#nav li a").removeClass('current');
        $(this).addClass('current');

        var location = this.href +" #answers";
        $("#ajax-content").load(location);

        return false;
    });
}); 
```

HTML：

```
<ul id="nav">
  <li><a id="answers" href="test1.html">Page 1</a></li>
  <li><a id="answers" href="test2.html">Page 2</a></li>
</ul>
<div id="ajax-content">This is default text, which will be replaced</div> 
```

我的问题是，我可以从每个链接的不同 div id 中获取内容吗？像这样的东西：

```
<ul id="nav">
  <li><a id="answers1" href="test1.html">Page 1</a></li>
  <li><a id="answers2" href="test2.html">Page 2</a></li>
</ul>
<div id="ajax-content">This is default text, which will be replaced</div> 
```

使用我的 jQuery 代码，我可以仅从 #answers 获取内容。我需要从不同的 div id 获取每个链接的内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:12:12.557

```
$(document).ready(function() {
    $("#nav li a").on('click', function() {
        $("#ajax-content").html("<div id='loading'><img src='{THEME}/images/loading.gif' alt='Loading' /></div>");

        $("#nav li a").removeClass('current');
        $(this).addClass('current');

        var location = this.href + ' #' + this.id; //use the ID here
        $("#ajax-content").load(location);
        return false;
    });
}); 
```

[**小提琴**](http://jsfiddle.net/LAbhU/1/)

# iphone - 自定义 Core-Plot Iphone 图表

> ID：12121452
> 
> 赞同：1
> 
> 时间：2012-08-25T11:09:56.580
> 
> 标签：iphone, graph, core-plot

我希望为 Iphone 定制一下核心绘图库。我有一些很好的教程，例如： [http ://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2/ "使用 Core Plot 在 Iphone 中绘制图形")

但是，在本教程中，我们可以绘制从 0 开始的散点图，然后我们可以相应地增加 Y 轴。

我希望该图是一个非常相对的图（基于输入）。

例如：如果我有 7 分，即：(82,83,84,85,86,87,88)。

然后我想要一个从 80(Y-min) 开始到 90(Y-max) 结束的图表。

谁能帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:49:20.880

`yRange`在绘图空间上设置。绘图范围类似于`NSRange`; 您指定起始位置 (80) 和范围的长度 (10)。

```
plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(80.0)
                                                length:CPTDecimalFromDouble(10.0)]; 
```

# asp.net - 已添加具有相同键的项目。选择所有记录时出错

> ID：12121454
> 
> 赞同：0
> 
> 时间：2012-08-25T11:10:23.040
> 
> 标签：asp.net, entity-framework

那是我在我的 Web 应用程序中使用的数据库模型， ![在此处输入图像描述](../Images/98f6e345ef7cc4c3fa90c3f3d7e77f2d.png) 现在我要做的就是添加新管理员或选择所有管理员，但我得到一个错误。

```
An item with the same key has already been added. 
```

我用来选择所有管理员的代码：

```
MyContext.Administrators.Where(a => a.IsActive ==true).ToList(); 
```

我添加新管理员的代码：

```
Administrators AdministratorsObj = new Administrators();
                AdministratorsObj.AdminFName = txtAdminFname.Text;
                AdministratorsObj.AdminLName = txtLastName.Text;
                AdministratorsObj.AdminLogInName = txtUserName.Text;
                AdministratorsObj.AdminPassword = txtPassword.Text;
                AdministratorsObj.AdminEmail = txtEmail.Text;
                AdministratorsObj.AdminHomePhone = txtPhone.Text;
                AdministratorsObj.AdminCellPhone = txtMobile.Text;
                AdministratorsObj.AdminType = chkIsSuperAdmin.Checked;
                AdministratorsObj.IsActive = chkIsActive.Checked;
                AdministratorsDALObj = new AdministratorsDAL();
                int AdminId = MyContext.AddAdministrators(AdministratorsObj); 
```

AddAdministrators 方法代码：

```
public int AddAdministrators(Administrators AdministratorsEnt)
{
    try
    {
        if (AdministratorsEnt == null)
            return -1;
        AdministratorsEnt.CreationDate = DateTime.Now;
        AdministratorsEnt.DeleteStatusCode = false;
        MyContext.AddToAdministrators(AdministratorsEnt);
        if (MyContext.SaveChanges() > 0)
            return AdministratorsEnt.AdminId;
        return -1;

    }
    catch (Exception)
    {

        return -1;
    }
} 
```

请注意，管理员表中的 AdminId 列是 Identity，因此 AdminId 会自动递增。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-29T10:35:37.817

我在 EF 4.1 中遇到了同样的问题。与现有的应用程序。发生了什么？EF 4.1 需要 .net 框架 4.0。Windows 更新用 4.5 替换了 .net framework 4.0，我得到了同样的错误。解决方案是卸载 .net 4.5 并安装 .net 4.0。

# asp.net - 什么是错误代码是 0x80070001？我该如何解决？

> ID：12121455
> 
> 赞同：31
> 
> 时间：2012-08-25T11:10:29.053
> 
> 标签：asp.net, web-services, iis

我的网络服务出现此错误：

> 与远程主机通信时出错。错误代码为 0x80070001

奇怪的是服务器上的CPU和内存使用率并不高。

详细的错误信息：

**错误信息：**

> 与远程主机通信时出错。错误代码为 0x80070001。

**堆栈跟踪：**

```
at System.Web.Hosting.IIS7WorkerRequest.RaiseCommunicationError(Int32 result, Boolean throwOnDisconnect)<br />
at System.Web.Hosting.IIS7WorkerRequest.ReadEntityCoreSync(Byte[] buffer, Int32 offset, Int32 size)<br />
at System.Web.Hosting.IIS7WorkerRequest.ReadEntityBody(Byte[] buffer, Int32 size) <br />
at System.Web.HttpRequest.GetEntireRawContent()<br />
at System.Web.HttpRequest.get_InputStream()<br />
at Service.Upload() in c:\inetpub\path\Service.aspx.cs:line 213 
```

**谷歌搜索后：**

[微软论坛上的帖子](http://social.technet.microsoft.com/Forums/en-US/winserverhyperv/thread/698e2b2b-af59-4848-b041-4fbb11c5bb6b)，我禁用了网卡的卸载，没有任何改变:(

[关于堆栈溢出的问题](https://stackoverflow.com/questions/2071863/error-occurred-while-communicating-with-the-remote-host-the-error-code-is-0x800)没有答案:(

我该如何解决这个问题？

### 更多信息

**内部异常消息：**句柄无效。（来自 HRESULT 的异常：0x80070006 (E_HANDLE)）

很重要

这仅发生在 Web 应用程序中，但如果我使用网站，则什么也没有发生（没有错误）。

经过大量研究，我认为这个错误是由 web.config 文件引起的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-10T15:26:28.850

我也在我的网站上收到此错误。我已经确定了通常会导致此问题的代理，它是一个网络爬虫，就像谷歌用来索引页面的那个一样。

无论如何，我相信答案是原因 1 或原因 2：

**原因1**

出现此问题的原因是客户端使用不符合 HTTP 规范的 HTTP 方法发出 HTTP 请求。

**原因2**

发生此问题的原因是客户端通过将 POST 方法发送到配置为由 StaticFile 处理程序处理的页面来发出 HTTP 请求。例如，客户端将 POST 方法发送到静态 HTML 页面。但是，为 StaticFile 处理程序配置的页面不支持 POST 方法。

查看微软链接以获得更多解释和可能的解决方案：http: [//support.microsoft.com/kb/942051](http://support.microsoft.com/kb/942051)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-27T08:25:06.427

关闭任何未使用的对象（在您使用完对象后关闭并将所有内容初始化为 null，直到您需要使用它为止。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T08:44:39.893

这是因为您的代码中存在内部内存泄漏。结果，它无法在内存中创建新对象。

# android - GridView 3d 动画

> ID：12121458
> 
> 赞同：2
> 
> 时间：2012-08-25T11:11:11.873
> 
> 标签：android, animation, gridview, 3d, launcher

我需要像这样创建一个网格视图：

![在此处输入图像描述](../Images/43efdebba59fad6008e535597a5d6ce8.png)

许多启动器（ADW 启动器 Ex、Go Ex）都在使用此功能

我已经能够使用 BaseAdapter 创建一个普通的 GridView。但是我不知道创建这个动画。请帮助我了解如何进行以实现这样的目标。

# eclipse - 如何使用 eclipse 创建指向代码行的可导出链接

> ID：12121459
> 
> 赞同：1
> 
> 时间：2012-08-25T11:11:11.277
> 
> 标签：eclipse

我想问我的同事 Alice 和 Bob 关于代码中特定行的具体问题，例如 com.example.HelloWorld.java:l.435。如果我可以从 eclipse 中取出一些链接，将它们以文本形式邮寄给另一个开发人员（也使用 eclipse），然后转到同事那里讨论这些行（无需手动转到 com.example.HelloWorld .java:l.435），但有一些可点击的链接。

我知道 eclipse 的书签功能，但我没有看到如何插入书签。

*编辑*：我想我要创建一个插件来让书签创建一个虚假的异常堆栈跟踪，可以将其插入堆栈跟踪控制台。好处是接收器无需安装任何东西就可以使用它。[添加代码审查标签]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:40:54.207

没有内置的方法来做这种事情，但对于插件来说这是一个有趣的想法。您是否尝试在 Eclipse Marketplace（可从“帮助”菜单中获得）中搜索以查看是否有任何关闭？

[另一种可能满足您的生产力需求（认为不是您的特定功能要求）的替代方案是通过ECF 的 DocShare 功能进行](http://wiki.eclipse.org/DocShare_Plugin)实时共享编辑。如果您的整个团队都进行了设置，您可以使用它与队友进行共享编辑会话。

# windows - 无法在 jRuby 上安装 Rails

> ID：12121460
> 
> 赞同：0
> 
> 时间：2012-08-25T11:11:18.447
> 
> 标签：windows, gem, installation, jruby, jrubyonrails

我到目前为止安装的是：

1.  最新的 JDK 和 JRE（版本 7 更新 6）
2.  jRuby 1.7.0 预览 2

并成功地测试了它们。

然后我尝试以下命令：

```
jruby -S gem install -y rails 
```

并得到以下错误：

```
ERROR: While executing gem ... <RuntimeError>
    Unknown command itall 
```

请建议，为了在 jruby 上安装 rails，我必须做什么。我的操作系统是 windows pro（32 位）。

编辑：另请注意，我没有安装任何其他东西 - 例如 Ruby。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:04:09.370

删除命令的“-y”部分可以解决问题。

# actionscript-3 - 为什么 BitmapData 不透明？

> ID：12121466
> 
> 赞同：7
> 
> 时间：2012-08-25T11:12:21.013
> 
> 标签：actionscript-3

```
 var subimage = new Bitmap();
    subimage.bitmapData = new BitmapData(25, 25, true, 0);
    addChild(subimage); 
```

从我读过的所有内容来看，这应该是透明的。我看到一个黑色的大方块。是什么原因造成的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-25T13:04:34.397

用这个

```
new BitmapData(25, 25, true, 0x00000000); 
```

代替

```
new BitmapData(25, 25, true, 0); 
```

0xFF000000 是黑色（0x000000），alpha 等于 1

0x00000000 是黑色（0x000000），alpha 等于 0

这是一个很好的解释颜色和阿尔法如何工作： http: [//myflex.wordpress.com/2007/09/07/about-hex-color-codes-in-flex-as3/](http://myflex.wordpress.com/2007/09/07/about-hex-color-codes-in-flex-as3/)

//编辑：

Dennis Krøger 和 strille 是对的，0x00000000 == 0。看起来问题出在其他地方，而不是在您粘贴的代码中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T17:28:42.693

您可以创建[BitmapData](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html)或将其传递给新[Bitmap](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Bitmap.html)对象的构造函数，或者在创建后通过引用对其进行编辑。两种选择都有效：

```
package 
{
    //Imports
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Sprite;

    //Document Class
    public class Main extends Sprite 
    {
        //Constructor
        public function Main() 
        {
            var bmpData:BitmapData = new BitmapData(200, 200, true, 0x5500FF00);
            var bmp:Bitmap = new Bitmap(bmpData);

            addChild(bmp);

            var bmp2:Bitmap = new Bitmap();
            bmp2.bitmapData = new BitmapData(200, 200, true, 0x55FF0000);
            bmp2.x = bmp2.y = 200;

            addChild(bmp2);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T13:10:56.233

ActionScript 使用 32 位十六进制数字来表示具有透明度的颜色值。作为 32 位变量的 ARGB 颜色由 4 组每组 8 位/或每组 2 个十六进制指定：

二进制： AAAAAAA RRRRRRRR GGGGGGGG BBBBBBBB

十六进制：AA RR GG BB

A代表alpha值（透明度），R是rd，G是绿色，B是蓝色。每个组定义每个颜色通道的强度，A 是 alpha，R 是红色，G 是绿色，B 是蓝色。Alpha 通道上的完全强度意味着没有 Alpha (FF)，没有强度 (00) 意味着完全 Alpha。所以一个透明的像素颜色值为0x00rrggbb。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T16:13:32.593

这没有任何意义：我尝试了以下代码：

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Sprite;

public class TestBitMap extends Sprite
    {
        public function TestBitMap() {
            var imageYellow:Bitmap = new Bitmap(new BitmapData(100, 100, true, 0xFFFFFF00));
            var imageTransparent:Bitmap = new Bitmap(new BitmapData(100, 100, true, 0));
            var imageSemiTransparent:Bitmap = new Bitmap(new BitmapData(100, 100, true, 0x99000000));
            imageTransparent.x = 25;
            imageTransparent.y = 25;
            imageSemiTransparent.x = 50;
            imageSemiTransparent.y = 50;
            addChild(imageYellow);
            addChild(imageTransparent);
            addChild(imageSemiTransparent);
        }       
    }
} 
```

我得到了一个黄色盒子，上面有一个半透明的黑色盒子。“imageTransparent”完全不可见。

我还尝试了先创建位图，然后更改位图数据的方法。没区别，还是看不出来。

San.chez：0 等于 0x00000000，无论如何。它是一个无符号整数，ActionScript 不会神奇地改变它。不过你的链接很好。

# air - 是否可以使用 .NET C# 构建 Adob e AIR 原生扩展？

> ID：12121469
> 
> 赞同：1
> 
> 时间：2012-08-25T11:12:48.673
> 
> 标签：air, adobe, air-native-extension

正如问题所暗示的那样，是否有任何关于使用 .NET C# 为 Adob​​e AIR 构建本机扩展的教程或文章？

必须使用 C 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:08:57.417

您只能将 C 用于 iOS ANE 或将 Java 用于 Android ANE，因为 Flash 运行时环境仅为这些语言提供 SDK。在实践中，您可以使用任何可以与 SDK 语言正确交互的语言（例如，iPhone 上的 Objective-C 或 C++）编写您的本地扩展。

# mysql - 如何使用mysql工作台反向生成数据库逻辑图

> ID：12121472
> 
> 赞同：0
> 
> 时间：2012-08-25T11:13:33.333
> 
> 标签：mysql, mysql-workbench

我只想从 MySql 数据库中的指定表中生成 db 逻辑图。我已经安装了Mysql workbench 5.2.25，谁能告诉我如何使用该工具生成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T15:13:19.927

WB 有一个“从现有数据库生成 EER 图”选项。顺便说一句，你有一个非常旧的 AN 版本。去买一个更新的！

# android - 微调器颜色是白色的灰色 = 不可见:(

> ID：12121478
> 
> 赞同：1
> 
> 时间：2012-08-25T11:14:30.183
> 
> 标签：android

我正在使用默认微调器

```
<Spinner
  android:id="@+id/mySpinner"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"

ArrayAdapter<String> spinnerAdapter = new ArrayAdapter<String>(getApplicationContext(), 
    android.R.layout.simple_spinner_item);

spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
((Spinner)findViewById(R.id.mySpinner)).setAdapter(spinnerAdapter); 
```

为什么元素在白色背景和前景色灰色？对我来说似乎很奇怪...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-31T20:21:01.837

我知道这是一个老问题，这可能会帮助其他人来这里寻求答案。基本上，这是因为这里使用了应用程序上下文。如果您使用应用程序上下文，则基本主题将应用于您的布局，而不是您的活动主题，这就是颜色为白色的原因。

细节在链接中有很好的解释：[微调器文本颜色是白色的？](https://stackoverflow.com/questions/23279925/spinner-text-color-is-white)[在](http://www.doubleencore.com/2013/06/context/)这里

感谢[commonsware](https://stackoverflow.com/users/115145/commonsware)提供原始问题的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:48:07.843

原因是您将其设置为`android.R.layout.simple_spinner_item`.

您可以编写自己的适配器类：

```
Spinner spinner = (Spinner) findViewById(R.id.mySpinner);
spinner.setAdapter(new MyCustomAdapter(CLASS.this, R.layout.spinner_layout, spinnerAdapter)); 
```

然后它将看起来像您设计的方式`spinner_layout`。

# c# - 查询所有对象（包括已修改对象）的好方法

> ID：12121480
> 
> 赞同：1
> 
> 时间：2012-08-25T11:14:58.813
> 
> 标签：c#, entity-framework, iqueryable

我正在寻找一种从对象上下文中收集所有对象的好方法和舒适的方法——包括添加和修改的对象。我现在介绍有关 ObjectStateManager 的内容，并且您可以获取它们的对象。但我的问题是，如果使用 linq 查询对象上下文，我必须对修改和添加的对象执行相同的查询并将它们合并在一起。这不是很舒服，总是几行代码。有没有办法很好地包装这个？

我试过这样的事情：

```
new QueryWrapper<User>(ctx.Users).Where(u => u.Name.StartsWith("A")); 
```

然后我尝试实现我自己的 IQueryable 和我自己的 IQueryProvider 来包装这些东西并获取执行的表达式树。然后我的想法是采用这个表达式树，让它在实体框架和内存集合中运行，我在其中得到修改和添加的对象。我走了很远，我们开始：

```
public class InMemoryQuery<T> : IQueryable<T> 
{

    private readonly IQueryable<T> _queryable;

    public InMemoryQuery(IQueryable<T> queryable)
    {
        _queryable = queryable;
    }

    public IEnumerator<T> GetEnumerator()
    {
        return this._queryable.GetEnumerator();
    }

    IEnumerator IEnumerable.GetEnumerator()
    {
        throw new NotImplementedException();
    }

    public Expression Expression
    {
        get { return this._queryable.Expression; }
    }

    public Type ElementType
    {
        get { return typeof(T); }
    }

    public IQueryProvider Provider
    {
        get
        {
            return new InMemoryQueryProvider(this._queryable.Provider);
        }
    }
} 
```

这是我的查询提供者

```
public class InMemoryQueryProvider : IQueryProvider
    {

    private readonly IQueryProvider _innerprovider;

    public InMemoryQueryProvider(IQueryProvider innerprovider)
    {
        _innerprovider = innerprovider;
    }

    public IQueryable CreateQuery(Expression expression)
    {
        throw new System.NotImplementedException();
    }

    public IQueryable<TElement> CreateQuery<TElement>(Expression expression)
    {
        return new InMemoryQuery<TElement>(this._innerprovider.CreateQuery<TElement>(expression));
    }

    public object Execute(Expression expression)
    {
        throw new System.NotImplementedException();
    }

    public TResult Execute<TResult>(Expression expression)
    {
        throw new NotImplementedException();
    }
} 
```

到目前为止，这有效，我能够获得应该在 InMemoryQuery.GetEnumerator 方法中执行的表达式树。伟大的！我的问题是该查询也包含实体框架基本表达式，例如：

```
Convert(value(ObjectSet`1[EFQueryProviderTest.tbl_Contact]))
    .MergeAs(AppendOnly).Where(n => n.Name.StartsWith("A")) 
```

但我只需要 .Where(...) 上的部分。你懂我的意思吗？然后我想尝试对从对象状态管理器传递的对象执行这部分查询。

你怎么看？这可能吗？你能帮我实现这个目标吗？还是我走错了方向？有没有更好的办法？

# mysql - 根据来自不同表的键对结果进行排序

> ID：12121486
> 
> 赞同：0
> 
> 时间：2012-08-25T11:16:22.540
> 
> 标签：mysql

在`table1`其中一个领域是`member_id`。

在`table2`其中一个字段中是`member_username`，并且`id`此表中的字段等于 中的`member_id`字段`table2`。

目标是根据 from 以字母升序显示所有`table1`结果。`member_username``table2`

基本上我需要将 from 解析为`member_id`from`table1`并按`member_username`字母`table2`顺序对它们进行排序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:21:28.970

您需要使用连接 from`table1`来`table2`获取用户名，然后在此字段上进行排序。您只需要警惕一对多关系，即，如果成员可能有多个`table2`具有相同 id 的条目，您可能会得到比预期更多的行。

```
select *
from table1
left join table2 on table2.id = table1.member_id
order by table2.member_username 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:19:52.683

如果我没有误解您的问题，请尝试将两个表连接在一起并按`member_username`.

```
SELECT t1.*, 
       t2.member_username
FROM table1 AS t1
INNER JOIN table2 AS t2 ON t1.member_id = t2.id
ORDER BY t2.member_username ASC; 
```

你可以留`t2.member_username`在`SELECT`查询的-部分，我只是把它放在那里供参考。

# sql - SQL 连接问题 - 用户投注比赛

> ID：12121490
> 
> 赞同：0
> 
> 时间：2012-08-25T11:17:36.103
> 
> 标签：sql

我有下表：

分数：

```
user_id | match_id | points
   1    |   110    |   4
   1    |   111    |   3
   1    |   112    |   3
   2    |   111    |   2 
```

用户对比赛进行投注，并根据比赛结果获得积分。根据投注的准确性，一场比赛您将获得 0、2、3 或 4 分。

现在我想对用户进行排名，这样我就可以看到谁在第一、第二等等......排名顺序首先是按总点数。如果这些相等，则按用户获得 4 分的次数排序，然后按用户获得 3 分的次数排序，依此类推。

为此，我需要下表：

```
user_id |  total_points | #_of_fours | #_of_threes | #_of_twos
   1    |       10      |      1     |       2     |     0
   2    |        2      |      0     |       0     |     1 
```

但我无法弄清楚可以帮助我获得它的连接语句。

这是我在没有帮助的情况下得到的：

SELECT user_id, COUNT( points ) AS #_of_fours FROM scores WHERE points = 4 GROUP BY user_id

这导致

```
user_id | #_of_fours
    1   |      1
    2   |      0 
```

现在我必须为#_of_threes 和twos 以及总分做这件事，然后把它们加在一起，但我不知道怎么做。

顺便说一句，我正在使用 MySQL。

任何帮助都会非常感激。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:25:21.800

```
SELECT  user_id
,       sum(points) as total_points
,       sum(case when points = 4 then 1 end) AS #_of_fours 
,       sum(case when points = 3 then 1 end) AS #_of_threes
,       sum(case when points = 2 then 1 end) AS #_of_twos
FROM    scores
GROUP BY 
        user_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:26:59.817

使用 mysql 语法，您可以`SUM`轻松地计算匹配的行数；

```
SELECT 
  user_id, 
  SUM(points)   AS total_points,
  SUM(points=4) AS no_of_fours,
  SUM(points=3) AS no_of_threes,
  SUM(points=2) AS no_of_twos
FROM Table1
GROUP BY user_id; 
```

演示[在这里](http://sqlfiddle.com/#!2/24213/2)。

# javascript - 如何根据它是否是占位符来更改 textarea 文本的颜色？

> ID：12121502
> 
> 赞同：3
> 
> 时间：2012-08-25T11:20:16.133
> 
> 标签：javascript, html, css, placeholder

我基本上想使用 JavaScript 重新创建 HTML5“占位符”属性，以便它与旧浏览器兼容。

我正在使用 OnFocus 和 OnBlur 的组合，这很简单，我使用以下代码完成了该操作；

```
<textarea onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;">Placeholder text</textarea> 
```

占位符文本将是浅灰色 (#CCC)，然后当 textarea 聚焦时，它将变为深灰色 (#333)。这在 CSS 中没有问题，但是，如果 textarea 的内容与原始占位符不同，我希望颜色在未聚焦时保持深灰色。

如果我的解释很差，那么这里有一个（非常轻微）更好的解释；

页面加载 ---> textarea placeholder = #CCC ---> 用户关注 textarea ---> textarea 内容变为 #333 ---> 用户释放焦点 ---> 内容应更改回 #CCC**除非它有已更改，在这种情况下应该保留 #333**

粗体字是我需要帮助的！

谢谢！:D

编辑：占位符在焦点上消失的事实不是问题，也不需要“修复”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:28:27.707

[http://jsfiddle.net/DszSR/](http://jsfiddle.net/DszSR/)

```
​textarea {
  color: #ccc;
}​

<textarea
  onfocus="if(this.value==this.defaultValue) this.value=''; this.style.color = '#333';"
  onblur="if(this.value=='') this.value=this.defaultValue; this.style.color = '#ccc';">Placeholder text</textarea>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:24:33.403

您仍然必须在使用 CSS 或 JS 加载页面时将文本颜色设置为#CCC（如果它获得焦点，我的代码会覆盖该设置，并仅在需要时将其恢复为模糊）

```
<textarea onfocus="if(this.value==this.defaultValue)this.value='';this.style.color='#333'" onblur="if(this.value=='') {this.value=this.defaultValue;this.style.color='#CCC'}">Placeholder text</textarea>​ 
```

# ruby-on-rails - 不要在每个循环中显示活动记录

> ID：12121503
> 
> 赞同：0
> 
> 时间：2012-08-25T11:20:18.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

在我的餐厅展示页面上，在同一地区/城市的餐厅旁边有一个街区。像这样

```
- @restaurants.each do |b|
            %li.usp
              %span.icon
              %h6 
                =link_to b.name, polymorphic_path([@region, @city, b]) 
```

此代码显示所有餐厅，还显示“活动”（访客当时所在的餐厅）餐厅。如何显示所有记录但不显示“活动”记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T14:05:32.687

您可以使用 Restaurant 模型中的方法来处理它。

```
class Restaurant < ActiveRecord::Base

  def nearby
    self.class.where("region = ? and id <> ?", region, id) }
  end

end 
```

那么在你看来：

```
<% @restaurant.nearby.each do |restaurant| %> 
```

或者，您可以使用命名范围并将餐厅作为参数传递，而不是常规方法。

# c# - Pechkin 文档/教程

> ID：12121508
> 
> 赞同：0
> 
> 时间：2012-08-25T11:21:14.667
> 
> 标签：c#, html, pdf, pechkin

我尝试了完美运行的 wkhtmltopdf ......但是在服务器上我无法启动一个进程，所以我的解决方案是：[https ://github.com/gmanny/Pechkin](https://github.com/gmanny/Pechkin)

但我不知道如何在我的项目中实现它......有没有我可以打开并运行的示例？

我看了一下这个例子：

```
byte[] pdfBuf = new SimplePechkin(new GlobalConfig()).Convert("<html><body><h1>Hello world!</h1></body></html>");

// create global configuration object
GlobalConfig gc = new GlobalConfig();

// set it up using fluent notation
gc.SetMargins(new Margins(300, 100, 150, 100))
  .SetDocumentTitle("Test document")
  .SetPaperSize(PaperKind.Letter);
//... etc

// create converter
IPechkin pechkin = new SynchronizedPechkin(gc);

// subscribe to events
pechkin.Begin += OnBegin;
pechkin.Error += OnError;
pechkin.Warning += OnWarning;
pechkin.PhaseChanged += OnPhase;
pechkin.ProgressChanged += OnProgress;
pechkin.Finished += OnFinished;

// create document configuration object
ObjectConfig oc = new ObjectConfig();

// and set it up using fluent notation too
oc.SetCreateExternalLinks(false)
  .SetFallbackEncoding(Encoding.ASCII)
  .SetLoadImages(false);
  .SetPageUri("http://google.com");
//... etc

// convert document
byte[] pdfBuf = pechkin.Convert(oc); 
```

但我没有让它工作......它看起来很容易，但不知道如何实现它......但我看到 Gman 已经使用它了。

先感谢您... ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T23:52:57.437

这是我能想到的最简单的例子，它也将输出写入文件。

```
byte[] pdfBuf = new SimplePechkin(new GlobalConfig()).Convert(html);
File.WriteAllBytes(path, pdfBuf); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-22T19:03:47.563

**另一个使用示例**

更完整一点，因为您可以设置页面的边距

```
 // create global configuration object
        GlobalConfig gc = new GlobalConfig();

        // set it up using fluent notation
        gc.SetMargins(new Margins(10, 10, 10, 10))
          .SetDocumentTitle("Test document")
          .SetPaperSize(PaperKind.Letter);

        //... etc

        // create converter
        IPechkin pechkin = new SynchronizedPechkin(gc);

        // create document configuration object
        ObjectConfig oc = new ObjectConfig();

        // and set it up using fluent notation too
        oc.SetCreateExternalLinks(false)

          .SetLoadImages(false)
          .SetPrintBackground(true)
          .SetLoadImages(true);
        //... etc

        // convert document
        byte[] pdfBuf = pechkin.Convert(oc, html); 
```

**Ps：**本例中，背景图片正在加载中，但我建议你将**图像编码在 Html**中，否则我认为它不起作用！

请注意，现在您有一个 pdfBuf 作为字节数组，您可以将其保存到文件中，或者只是加载到内存流中，例如：

```
MemoryStream stream = new MemoryStream(pdfBuf); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-30T11:28:00.887

用这个

```
 private void CreatePdfPechkin(string htmlString, string fileName)
        {
            //Transform the HTML into PDF
            var pechkin = Factory.Create(new GlobalConfig()
            .SetMargins(new Margins(100, 50, 100, 100))
              .SetDocumentTitle("Test document")
              .SetPaperSize(PaperKind.A4)
               .SetCopyCount(1)
                           //.SetPaperOrientation(true)
                          // .SetOutputFile("F:/Personal/test.pdf")

             );
            ObjectConfig oc = new ObjectConfig();
            oc.Footer.SetLeftText("[page]");
            oc.Footer.SetTexts("[page]", "[date]", "[time]");
            oc.Header.SetCenterText("TEST HEADER TEST1");
            oc.Header.SetHtmlContent("<h1>TEST HEADER V2</h1>");
            oc.SetAllowLocalContent(true);
           //// create converter
            //IPechkin ipechkin = new SynchronizedPechkin(pechkin);

            // set it up using fluent notation
            var pdf = pechkin.Convert(new ObjectConfig()
                        .SetLoadImages(true).SetZoomFactor(1.5)
                        .SetPrintBackground(true)
                        .SetScreenMediaType(true)
                        .SetCreateExternalLinks(true), htmlString);

           //Return the PDF file
            Response.Clear();
            Response.ClearContent();
            Response.ClearHeaders();
            Response.ContentType = "application/pdf";
            Response.AddHeader("Content-Disposition", string.Format("attachment;filename=test.pdf; size={0}", pdf.Length));
            Response.BinaryWrite(pdf);
            Response.Flush();
            Response.End();
//            byte[] pdf = new Pechkin.Synchronized.SynchronizedPechkin(
//new Pechkin.GlobalConfig()).Convert(
//    new Pechkin.ObjectConfig()
//   .SetLoadImages(true)
//   .SetPrintBackground(true)
//   .SetScreenMediaType(true)
//   .SetCreateExternalLinks(true), htmlString);
//            using (FileStream file = System.IO.File.Create(@"F:\Pankaj WorkSpace\"+  fileName))
//            {
//                file.Write(pdf, 0, pdf.Length);
//            }
        } 
```

# iphone - 在 iphone 中制作自定义后退按钮

> ID：12121509
> 
> 赞同：0
> 
> 时间：2012-08-25T11:21:15.387
> 
> 标签：iphone, ios, xcode, xcode4.2

我是 iphone 新手，所以我有一个非常简单的问题。我在`xcode 4.2`. 我有多个屏幕，每个屏幕都有关于按钮`viewController`。

现在我已经创建了 segues ofc。我与 about 链接的每个 about 按钮`viewController`。但是我没有使用`navigation controller`.

我已经定制了一个后退按钮。我怎样才能回到将我带到关于部分的屏幕。

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:26:52.577

如果您以模态方式呈现新的视图控制器，则可以使用以下方法将其关闭。

```
-(IBAction)myCloseAction:(id)sender{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:56:12.657

由于您没有使用导航控制器，您需要手动执行推送和弹出视图控制器。当您更改视图控制器时，将先前的视图控制器引用存储在新的视图控制器中，当按下后退按钮时转到先前存储的视图控制器。

# asp.net - 来自数据库的 Wordpress 永久链接？

> ID：12121511
> 
> 赞同：2
> 
> 时间：2012-08-25T11:21:18.057
> 
> 标签：asp.net, mysql, wordpress

我正在尝试从我的 WordPress 数据库中访问选定的帖子信息以显示在第二个网站上，该网站不是 WordPress 网站也不是 php，它实际上是我想要显示信息的 asp.net 网站。

我有一个位于 blog.domain.com 的 WordPress 博客和位于 domain.com 的另一个网站，它们都在不同的服务器上运行，我需要在我的 asp.net 网站上显示摘录、标题以及所选帖子的链接。我可以轻松地从博客的数据库中获取摘录和标题，但唯一的问题是永久链接不在数据库中。

我的想法是，如果我在每个博客上放置一小段代码以将永久链接插入到新表中，我就可以抓住它在另一个网站上使用。但这没有用，也许我做得不对。这是我使用的代码；

```
<?php
 global $wpdb;
 $table_name = $wpdb->prefix . "posts_pages_url";
 $wpdb->insert($table_name , array('post_id' => the_ID(), 'url' => the_permalink()));
?> 
```

有人可能会说，“你为什么不直接使用 RSS 提要？” 好吧，如果归根结底，我可能不得不这样做，但我不希望直接连接到数据库以访问我选择的帖子更加灵活。

如果有人对我如何通过数据库调用访问永久链接有任何建议，我将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:28:25.430

您可以在代码中使用[get_permalink()](http://codex.wordpress.org/Function_Reference/get_permalink)，或者链接到数据库中的 guid 值——我知道这并不理想，但它至少应该可以工作。

编辑：

the_ID [()](http://codex.wordpress.org/Function_Reference/the_ID)也是如此- 它应该更改为[get_the_ID()](http://codex.wordpress.org/Function_Reference/get_the_ID)。

# php - gettext() 中的多个复数形式

> ID：12121515
> 
> 赞同：16
> 
> 时间：2012-08-25T11:21:52.857
> 
> 标签：php, wordpress, internationalization, gettext

请参阅此`_n();`函数示例（[http://codex.wordpress.org/Function_Reference/_n](http://codex.wordpress.org/Function_Reference/_n)）：

`sprintf( _n('%d comment.', '%d comments.', $number, 'text-domain'), $number );`

用英语讲：

```
1 Comment
2 Comments 
```

在波兰语等语言中，有不同的模式和多种复数形式：

```
1 Komentarz
2 Komentarze
3 Komentarze
4 Komentarze
5 Komentarzy
6 Komentarzy
...
21 Komentarzy
22 Komentarze
23 Komentarze
24 Komentarze
25 Komentarzy
...
31 Komentarzy
32 Komentarze
...
91 Komentarzy
92 Komentarze
...
111 Komentarzy
112 Komentarzy (!)
...
121 Komentarzy
122 Komentarze 
```

如果他们的语言支持多种复数形式，我正在寻找某种方法使翻译人员能够设置自己的模式。你能想到任何创造性的 PHP 方法来做到这一点吗？

我能想到的一些解决方案（但翻译人员仍然无法设置任何模式）：

```
if($number == 1){
    $message = __(‘1 Komentarz’ , ‘text-domain’);
}else if($number == 2){
    $message = __(‘2 Komentarze’ , ‘text-domain’);
}else if($number == 3){
    $message = __(‘3 Komentarze’ , ‘text-domain’);
} 
```

编辑：我在波兰语的 PO 文件中找到了这个：`"Plural-Forms: nplurals=3; plural=n==1 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2;\n"`但我仍然不知道如何准备`_n();`函数来支持它。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T03:10:28.240

首先，您的语言环境文件需要具有复数的定义。正如您在问题中添加的那样，在波兰语的情况下，您可能会看到

```
"Plural-Forms: nplurals=3; plural=n==1 ? 0 : n%10>=2 && n%10<=4 && (n%100<10 || n%100>=20) ? 1 : 2;\n" 
```

或 (domain_name)-pl.po 文件中的类似定义。

然后，您需要为 .po 文件中的“%d Comment”/“%d Comments”准备翻译。例如，

```
msgid "%d Comment"
msgid_plural "%d Comments"
msgstr[0] "%d Komentarz"
msgstr[1] "%d Komentarze"
msgstr[2] "%d Komentarzy" 
```

请将 .po 文件编译成 .mo 文件并放置到适当的文件夹中。（例如语言/（域名）-pl.mo

在您的 Wordpress（我假设的插件/主题）代码中，您可以这样称呼它，

```
for ($i=1;$i<15;$i++) {
  printf(_n("%d Comment", "%d Comments", $i, "(domain_name)"), $i);echo "<br />";
}
printf(_n("%d Comment", "%d Comments", 112, "(domain_name)"), 112);echo "<br />"; 
```

然后当然在 wp-config.php 中将 WordPress 的语言环境设置为波兰语，

```
define ('WPLANG', 'pl'); 
```

你应该看到正确的复数形式的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:21:26.167

我想我找到了一种方法来做我想做的事。POEdit 应用程序允许您使用可以在设置中指定的模式创建多个复数形式。

翻译者必须自己编写模式（请参阅我的问题中的波兰语模式）。我仍在研究该主题，但如果有人有类似的问题，那么这是一个很好的起点：[http ://www.poedit.net/trac/wiki/Doc/PluralForms](http://www.poedit.net/trac/wiki/Doc/PluralForms)

# mysql - MySQL 从多个表中选择，但总是从一个表中获取数据

> ID：12121516
> 
> 赞同：1
> 
> 时间：2012-08-25T11:21:59.570
> 
> 标签：mysql

我对 SQL 的东西很陌生，我正在尝试在 php 中制作一个登录表单。我希望登录表单做一些 ip 阻止以防止暴力攻击。所以，我有两个表 - 用户和登录尝试。我正在尝试进行选择，如果用户名/密码组合正确，则将返回用户的名称/ID，但无论其正确性如何，我都想要登录尝试查询的结果。这是一些代码。

首先，我通过执行以下操作确保 loginattempt 表中有一个条目：

```
INSERT INTO loginattempts (ip) VALUES(:ip)
            ON DUPLICATE KEY UPDATE attempt=attempt+1 
```

然后，我想做一个类似于：

```
SELECT users.username, users.id, loginattempts.attempt
             FROM users, loginattempts
             WHERE users.username = :username
             AND users.password = :password
             AND loginattempts.ip = :ip 
```

但是，如果不满足任何条件，这显然是行不通的。我怎样才能在单个查询中实现这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:31:38.630

由于这些表不相关，这可能最容易通过子选择来完成以获取登录尝试：

```
SELECT
  users.username,
  users.id,
  /* COALESCE() to return 0 if no attempt yet logged */
  COALESCE((SELECT attempt FROM loginattempts WHERE ip = :ip),0) AS attempt
FROM uusers
WHERE 
  username = :username
  AND password = :password 
```

可以做一个棘手的笛卡尔连接来尝试，但由于您正在为用户和 ip 寻找一个离散的行，这可能会足够快。只需确保您在`loginattempts.ip`.

### 更新

如果您在任何情况下都*必须*返回一行，您可以使用我上面提到的棘手的左连接。由于 ip 只会返回一行，因此您可以使用笛卡尔连接（无`ON`子句）：

```
SELECT
  username,
  userid,
  attempt
FROM
  /* Should always return exactly one row */
  (SELECT COALESCE((SELECT attempt FROM loginattempts WHERE ip = :ip),0) AS attempt)
  /* left joins against users with no ON condition, so if user doesn't match NULLs will return */
  LEFT JOIN users
WHERE 
  username = :username
  AND password = :password 
```

# c# - WPF 媒体元素变为空白，VLC 和 WMP 进入无响应模式

> ID：12121518
> 
> 赞同：0
> 
> 时间：2012-08-25T11:22:24.447
> 
> 标签：c#, wpf, vlc, mediaelement, wmp

我有一个可以播放视频的 C# windows 应用程序。我使用了三个选项，即 WPF mediaelement、Windows 媒体播放器 activex 组件和 vlc activex 组件。在我的应用程序中。在此，我一次使用其中一个组件播放视频。为此，我使用了该特定组件的两个实例，即第一个视频将在第一个实例中播放，然后第二个视频将在第二个实例中播放，然后第三个将在第一个实例中播放，第四个将在第二个实例中播放，就像这样它将继续。播放时间为 5 秒到几小时。现在，

1.  当我在几个小时后使用 WPF 媒体元素时，表单变为空白并且应用程序挂起（我有 log4net 要记录，只要它变为空白，它就会停止记录），但是在任务管理器中显示没有响应它显示正在运行。此外，有时它需要大量的记忆。

2.  当我在一些小时应用程序进入无响应模式并且任务管理器正确显示它之后使用 WMP 或 VLC activex com 对象时。在这种情况下，没有内存问题。

在看到上述结果后，我计划在轮到它之后处理这些对象。因此，对于每个视频，都有上述组件的一个新实例。但我仍然遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T12:39:52.910

我正在开发一个与您使用 VLC activex 的项目类似的项目。我遇到了你描述的同样的问题。为了解决这个问题，我在一个 GroupBox 中添加了 VLC 插件，并通过将 Enabled 属性设置为 false 来禁用 GroupBox。请让我知道这对你有没有用。

# java - Spring 控制器 - 线程安全和存储资源

> ID：12121519
> 
> 赞同：5
> 
> 时间：2012-08-25T11:22:40.423
> 
> 标签：java, tomcat, spring-mvc, thread-safety

我有一个关于 spring mvc 和线程安全的问题。

我们正在开发将存储在 tomcat 上的 Web 应用程序。如果我理解正确，Tomcat 会为每个请求创建线程并且它有一些线程池。现在，调度程序 servlet 在请求之间共享，并且可能是线程安全的。

但是当我这样创建控制器时：

```
@Controller
@RequestMapping("/manage")
public class QuestionManagementController { 
```

他有`Singleton`范围，因此来自每个用户的每个请求都使用相同的控制器。

我想知道这个问题通常是如何解决的：

1：控制器是用`Session`范围创建的吗？（但我认为，如果一个用户快速执行一些可能导致控制器出现竞争条件的事情，也可能会出现问题）。

2：控制器的范围为`request`

3：创建在类级别不共享任何变量的无状态控制器，或者让它们处于只读模式

或者也许有一些更好的“最佳实践”可以解决这类问题。

我在问这个问题，因为现在我们将它们作为`Singleton`作用域，并且存在一个问题，即在大多数方法中，我们在数据库中查询用户，并且由于作用域的原因，我们无法将此信息存储在类级别变量中。我们可以尝试使用一些线程安全的集合，但稍后可能会有其他资源需要同步访问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T13:18:31.473

[许多参数可以添加](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-arguments)到控制器方法中，如请求、会话、主体等，以避免您的问题。

通常有 3 层架构：

*   `@Controller`（他们委托服务）
*   `@Service`（他们使用 DAO 或存储库完成工作）
*   `@Repository`（或 DAO，他们进行数据库访问）

因此，根据您在数据库中查询的内容，我建议您使用 Spring 注入缓存的服务，如果访问数据库成本高昂并且每次您需要数据库中的内容时调用服务（即控制器中没有存储任何内容）班级水平）

一个简短的例子，假设我们支持 spring-security 并且一切都需要一个完全登录的用户。我们有一个`userData`表，其中键是用户登录，我们有一个 url`/data`来获取显示我的用户数据的页面：

```
@Controller
@RequestMapping("/data")
public class UserDataController
{
    @Autowired
    private UserService userService;

    @RequestMapping(value = "", method = RequestMethod.GET)
    public ModelAndView data(final Principal principal) {
        Assert.notNull(principal); // throw if assertion fails
        Assert.hasText(principal.getName());

        final UserData userData = this.userService.findByUserName(principal.getName());
        Assert.notNull(userData, "userData not found");

        return new ModelAndView("userData", "userData", userData);
    }
}

@Service("userService")
public class userService 
{
    private static final String USERDATA_CACHE = "com.acme.foo.UserData";

    @Autowired
    private UserDataRepository userDataRepository;

    @Cacheable(USERDATA_CACHE)
    public UserData findByUserName(final String userName) {
        return this.userDataRepository.findByUserName(userName);
    }
}

@Repository
public class UserDataRepository
{
    // or use spring-data-jpa

    public UserData findByUserName(final String userName) {
        // query table userData and create an UserData from results.
    }
} 
```

在这里，我使用主体和弹簧确保这是当前用户之一。

参考：

*   [`@Cachable`](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/cache.html)
*   另请参阅[在 Spring Framework 3 MVC 中初始化单例](https://stackoverflow.com/questions/8825177/initialize-singletons-in-spring-framework-3-mvc?rq=1)

**请注意确定此答案是否完全符合您的担忧**

# c++ - 为什么 std::basic_string 不支持通过表达式模板连接？

> ID：12121520
> 
> 赞同：4
> 
> 时间：2012-08-25T11:22:56.180
> 
> 标签：c++, string, std, qstring, expression-templates

Qt 的`QString`s 可以连接起来，通过`operator%`它使用表达式模板来预先计算结果字符串的大小并优化对`operator+`. 有关更多信息，请参阅[我的这个问题。](https://stackoverflow.com/questions/12027977/strange-qt-code-with-strings)

为什么没有`std::basic_string`采用类似的结构？这甚至允许每个 C++11 吗？我只看到了优点，并且很明显，库实现者可以在他们想要的时候破坏 ABI 兼容性（C++11 甚至为 libstdc++ 提供了一个很好的理由）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T12:00:17.617

因为没有人为标准提出它；除非有人提出建议，否则它不会进入。另外因为它可能会破坏现有代码（如果他们使用`operator+`它的话）。

此外，表达式模板在`auto`. 做一些简单的事情`auto concat = str1 % str2;`很容易被打破。希望这是 C++17 将通过某种方式解决的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:32:03.363

在 C++11`std::basic_string`中支持移动语义，这意味着您可以通过为系列中的第一个字符串分配内存来优化一系列字符串的连接`operator+`，然后在第一个字符串的内存中简单地构造其余字符串。系列，大大减少了连接和返回一系列字符串所需的内存分配和副本的数量。

我敢肯定，正如您使用 Qt 的方法所指出的那样，可以进行进一步的优化，但是 C++11 允许的移动语义克服了 C++03 版本中存在的巨大性能障碍`std::basic_string`，尤其是当将很多字符串连接在一起时。

例如，像

```
std::string a = std::string("Blah blah") + " Blah Blah " + " Yadda, Yadda"; 
```

可以通过为第一个字符串分配内存，然后使用移动语义来完成，从第一个字符串“窃取”剩余内存以就地构造后两个字符串，并且只有在用完额外的内存时才重新分配内存空间。最后，赋值运算符可以使用移动语义从赋值运算符右侧创建的临时 r 值中“窃取”内存，从而防止连接字符串的副本。

# ruby-on-rails - 如何测试模型以进行文件上传？

> ID：12121522
> 
> 赞同：5
> 
> 时间：2012-08-25T11:23:08.067
> 
> 标签：ruby-on-rails, testing, file-upload, upload, rspec

我有一个模型，我使用该方法上传图像

在图像控制器中，我调用 DataFile.save_image_file(params[:upload])

我的代码 data_file.rb

```
 def self.save_image_file(upload)
        file_name = upload['datafile'].original_filename  if  (upload['datafile'] !='')    
        file = upload['datafile'].read    

        file_type = file_name.split('.').last
        new_name_file = Time.now.to_i
        name_folder = new_name_file
        new_file_name_with_type = "#{new_name_file}." + file_type
        new_file_name_thumb_with_type = "#{new_name_file}-thumb." + file_type

        image_root = "#{RAILS_CAR_IMAGES}"

          Dir.mkdir(image_root + "#{name_folder}");
          File.open(image_root + "#{name_folder}/" + new_file_name_with_type, "wb")  do |f|  
            f.write(file)
          end

[new_name_file, new_file_name_with_type, new_file_name_thumb_with_type]

      end 
```

我想在 RSpec 中测试它

data_file_spec.rb

```
require 'spec_helper'

describe DataFile do
  describe "Should save image file" do 

    before(:each) do
      @file = fixture_file_upload('/files/test-bus-1.jpg', 'image/jpg')
    end

    it "Creating new car name and thumb name" do
      @get_array = save_file(@file)
      @get_array[:new_name_file].should_not be_nil
    end

  end
end 
```

但是测试不起作用

失败/错误：@file = fixture_file_upload('/files/test-bus-1.jpg', 'image/jpg') NoMethodError: undefined method `fixture_file_upload' for #

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-25T11:52:32.170

您需要包括`ActionDispatch::TestProcess`. 尝试类似：

```
require 'spec_helper'

describe DataFile do
  describe "Should save image file" do 
    let(:file) do
      extend ActionDispatch::TestProcess
      fixture_file_upload('/files/test-bus-1.jpg', 'image/jpg')
    end

    it "Creating new car name and thumb name" do
      @get_array = save_file(file)
      @get_array[:new_name_file].should_not be_nil
    end
  end
end 
```

# jquery - SimpleWeather jquery 插件

> ID：12121532
> 
> 赞同：2
> 
> 时间：2012-08-25T11:26:08.923
> 
> 标签：jquery, asp.net

我在一个 asp.net 页面上玩 SimpleWeather jquery 插件，它工作正常。 [https://github.com/monkeecreate/jquery.simpleWeather](https://github.com/monkeecreate/jquery.simpleWeather)

我只有两个问题：

1.  我得到了上午和下午的时间，有没有人知道如何将其修复为 24 小时。

2.  如果我知道weather.code [http://developer.yahoo.com/weather/#codes](http://developer.yahoo.com/weather/#codes)，那么我可以用我自己的名字来表示热、冰雹等吗？

    $.getJSON(weatherUrl, function (data) { if (data !== null && data.query.results !== null) { $.each(data.query.results, function (i, result) { if (result .constructor.toString().indexOf("Array") !== -1) { result = result[0]; }

    ```
     var currentDate = new Date();
        var sunRise = new Date(currentDate.toDateString() + ' ' + result.astronomy.sunrise);
        var sunSet = new Date(currentDate.toDateString() + ' ' + result.astronomy.sunset);

        if (currentDate > sunRise && currentDate < sunSet) {
            var timeOfDay = 'd';
        } else {
            var timeOfDay = 'n';
        } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:12:02.890

你需要调整插件。要启用自定义条件文本，您可以添加新的选项属性以将条件代码映射到自定义文本并在插件中使用它，如下所示：

```
// this code is a part of weater object initialization
currently: options.conditions && options.conditions[result.item.condition.code] ? options.conditions[result.item.condition.code] : result.item.condition.text,
high: result.item.forecast[0].high,
low: result.item.forecast[0].low,
forecast: options.conditions && options.conditions[result.item.forecast[0].code] ? options.conditions[result.item.forecast[0].code] : result.item.forecast[0].text, 
```

并将自定义属性传递给插件：

```
$.simpleWeather({
    location: 'Copenhagen, Denmark',
    unit: 'c',
    conditions: { 26: 'Overskyet', 27: 'Mest skyet', 28: 'Mest skyet', 36: 'Hagl' }, 
```

要更改日出和日落时间格式，您还可以调整插件。这一次您需要以格式解析时间`h:mm tt`并改为以格式显示`HH:mm`。如果您可以`ScriptManager`控制页面，则可以使用 Microsoft Ajax 日期对象扩展功能：

更改插件的代码：

```
$.getJSON(
    weatherUrl,
    function (data) {
        if (data !== null && data.query.results !== null) {
            $.each(data.query.results, function (i, result) {
                if (result.constructor.toString().indexOf("Array") !== -1) {
                    result = result[0];
                }

                var currentDate = new Date();
                if (Date.parseInvariant) {
                    result.astronomy.sunrise = Date.parseInvariant(result.astronomy.sunrise, "h:mm tt").format("HH:mm");
                    result.astronomy.sunset = Date.parseInvariant(result.astronomy.sunset, "h:mm tt").format("HH:mm");
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T10:22:03.567

如果您需要使用 SimpleWeather jQuery 插件显示 24H 时间，那么 Yuriy 的解决方案不起作用......

但这是一个可行的解决方案。

在 js 脚本中找到此代码。

```
var currentDate = new Date();
var sunRise = new Date(currentDate.toDateString() + ' ' + result.astronomy.sunrise);
var sunSet = new Date(currentDate.toDateString() + ' ' + result.astronomy.sunset);

if (currentDate > sunRise && currentDate < sunSet) {
    var timeOfDay = 'd';
} else {
    var timeOfDay = 'n';
} 
```

然后将该代码更改为此（如果日落是 20:05，那么 24H 的日落存在一些问题，那么它显示时间为 20:5 我没有在 MM 时间显示 xx:0x 第一个 0，此代码正在解决这个问题）

```
 var currentDate = new Date();
                        var sunRise = new Date(currentDate.toDateString() + ' ' + result.astronomy.sunrise);
                        var sunSet = new Date(currentDate.toDateString() + ' ' + result.astronomy.sunset);

                        var sunRiseHour = "" + sunRise.getHours() + "";
                        var sunRiseMinute = "" + sunRise.getMinutes() + "";
                        var sunSetHour = "" + sunSet.getHours() + "";
                        var sunSetMinute = "" + sunSet.getMinutes() + "";

                        if (sunRiseHour.length == 1) {
                            sunRiseHour = "0" + sunRiseHour;
                        }
                        if (sunRiseMinute.length == 1) {
                            sunRiseMinute = "0" + sunRiseMinute;
                        }
                        if (sunSetHour.length == 1) {
                            sunSetHour = "0" + sunSetHour;
                        }
                        if (sunSetMinute.length == 1) {
                            sunSetMinute = "0" + sunSetMinute;
                        }
                        var sunRiseTime = sunRiseHour + ":" + sunRiseMinute;
                        var sunSetTime = sunSetHour + ":" + sunSetMinute;

                        if (currentDate > sunRise && currentDate < sunSet) {
                            var timeOfDay = 'd';
                        } else {
                            var timeOfDay = 'n';
                        } 
```

如果显示 24H 而不是 AM/PM ex，请记住使用 SunSetTime 和 SunRiseTime。日落和日出。

如果小时内的前 0 也存在问题，它还解决了 HH 时间的问题。使用愉快...

# c# - 一个简单的OOP理解

> ID：12121533
> 
> 赞同：0
> 
> 时间：2012-08-25T11:26:21.763
> 
> 标签：c#, asp.net-mvc-3, oop

我有一堂课：

```
public class TaskDiplayModel
{
    public int taskId { get; set; }

    [DisplayName("Task Description")]
    public string description { get; set; }

    [DisplayName("Priority")]
    public string priority { get; set; }

    [DisplayName("State")]
    public string state { get; set; }

    [DisplayName("Due By")]
    public DateTime deadline { get; set; }

    [DisplayName("Created By")]
    public PersonObject created_by { get; set; }

    [DisplayName("Assigned To")]
    public PersonObject assigned_to { get; set; }

    [DisplayName("Category")]
    public string category { get; set; }

    [DisplayName("Sub Category")]
    public string subCategory { get; set; }

    [DisplayName("Created")]
    public DateTime createdDate { get; set; }

    [DisplayName("Updated")]
    public DateTime lastUpdatedDate { get; set; }

    [DisplayName("Updated By")]
    public PersonObject lastUpdatedBy { get; set; }    
} 
```

然后我有另一个从这个类继承的类：

```
public class TaskModifyModel : TaskDiplayModel
{
    public int priorityId { get; set; }
    public int stateId { get; set; }
    public int categoryId { get; set; }
    public int subCategoryId { get; set; }

    public SelectList states { get; private set; }
    public SelectList priorities { get; private set; }
    public SelectList categories { get; private set; }
    public SelectList subCategories { get; private set; }

    public TaskModifyModel()
    {
        SetupReferenceData(0);
    }

    public TaskModifyModel(int taskId)
    {

        var taskService = new TaskService();
        var task = taskService.GetTask(taskId);
    }
} 
```

在我的应用程序中，我创建了一个`TaskModifyModel`对象。但是，基类中的字符串字段是`null`. 我希望它们已经被创建并成为`String.Empty`. 但是当我尝试访问它们时出现异常。我错过了什么吗？

顺便说一句，这些是 MVC3 模型......并且类中的代码已被省略，因为我认为这与问题无关。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T11:42:07.657

在 .NET 中，字符串的默认值为`null`，而不是`String.Empty`，因此除非您将属性的值专门设置为`String.Empty`，否则它们将保持为`null`。

假设您希望您的字符串属性默认为空字符串而不是 null，您通常可以通过在构造函数中设置它们来执行此操作：

```
public void TaskDiplayModel()
{
    description = String.Empty;
    priority = String.Empty;
    state = String.Empty;
} 
```

或者通过使用字段支持属性而不是自动属性，并设置支持字段：

```
private string _description = String.Empty;

[DisplayName("Task Description")]
public string description
{
    get { return _description; }
    set { _description = value; }
} 
```

就我个人而言，我通常使用第一个选项，在构造函数中进行，因为它的代码更少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:51:52.010

鉴于以下删节版本，只是为了添加到 rally25rs 的出色答案（无论如何我都 +1）：

```
public class TaskDiplayModel
{
    private string _priority = string.Empty;
    public int TaskId { get; set; }
    public string Description { get; set; }
    public string Priority
    {
       get { return _priority; }
       set { _priority = value; }
    }
    public TaskDisplayMode()
    {
      Description = string.Empty;
    }
}
public class TaskModifyModel : TaskDisplayMode
{
  public int PriorityId { get; set; }
  public TaskModifyModel()
    :base()
  {
    PriorityId = 3;
  }
} 
```

那么构建时的顺序`TaskModifyModel`如下：

1.  设置`_priority`为`string.Empty`、`TaskId`to `0`、`PriorityId`to`0`和`Description`to `null`（如果未指定值，则所有内容都设置为`null`如果引用，`0`如果是数字，并且结构设置为使其字段充满`0`and `null`）。
2.  如果执行构造函数主体，`TaskDiplayModel`则设置`Description`为`string.Empty`.
3.  的构造函数主体`TaskModifyModel`被执行，设置`PriorityId`为`3`.

如果嵌套继承更复杂，依此类推。作为一项规则，您可以期望其中的一些被优化，所以不要担心在如何设置值时采用不同的方法是更快还是更慢 - 它不会，除非在调试运行中。它确实解释了避免在构造函数中调用虚方法的规则——大多数时候我们不需要关心上面的顺序，只需将构造函数视为一个单元，之后我们就有一个完全构造的对象，但是如果你开始玩虚拟电话，那么上面的顺序就变得非常重要，因为一方面`PriorityId`是`0`，另一方面是`3`。

# jquery - jQuery代码奇怪的演技

> ID：12121536
> 
> 赞同：0
> 
> 时间：2012-08-25T11:26:50.170
> 
> 标签：jquery

好的，我有这样的代码：

```
function swapImages() {  
    $('.recipeImages').each(function() {  
        if($('li.active', this).length == 0) {  
        $('li:first', this).fadeIn(1000, function() { 
                $(this).addClass('active'); 
            });  
        return;  
        }  
        var $active = $('li.active', this);  
        var $next;  

        if($active.next().length == 0)  
            $next = $('li:first', this);  
        else  
            $next = $('li.active', this).next();  

        $active.fadeOut(1000, function() {  
            $active.removeClass('active');  
            $next.fadeIn(1000, function() {  
                $(this).addClass('active');  
            });  
        });  
    });  
}  
swapImages();  
setInterval('swapImages()', 5000);
<ul class="recipeImages">  
    <li style='display:none;'><img src='images/food.jpg' /></li>
    <li style='display:none;'><img src='images/food_cukinija.jpg' /></li>
    <li style='display:none;'><img src='images/food_hamburger.jpg' /></li>
    <li style='display:none;'><img src='images/food_sushi.jpg' /></li>  
</ul> 
```

这里有什么问题？当它到达最后一个 LI 元素并且没有下一个元素时，它的行为很奇怪。它只是停止，然后第一个出现，最后一个出现等等......但直到他来到这一点

```
if($active.next().length == 0)    
    $next = $('li:first', this); 
```

它完美地工作。

好的，找到问题了。当图像处于绝对位置时，它会以某种方式工作

# c# - 为远程托管的 SQL Server 定义 connectionString

> ID：12121542
> 
> 赞同：5
> 
> 时间：2012-08-25T11:27:55.030
> 
> 标签：c#, asp.net, sql-server, connection-string

目前我有以下`<connectionStrings> definition in my` Web.config` 文件：

```
 <connectionStrings>
    <add name="ApplicationServices" connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true" providerName="System.Data.SqlClient"/>
  </connectionStrings> 
```

虽然不是我写的，所以我感觉它是由 Visual Studio 自动创建的。

我的数据库托管在我们网络上的单独服务器上，那么如何定义它以及数据库用户名和密码？

对于示例，服务器信息和凭据是：

> 服务器地址：sql-database/10.0.0.11
> 
> 用户名：我的用户名
> 
> 密码：我的密码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T11:38:18.220

服务器名称：`IP-Address\Database-instance,Port`

你不能直接。您需要在远程服务器上`TCP/IP`启用并配置`TCP/IP Ports`on sql server 配置管理器。

通过它：[配置-远程-服务器](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)

或者，如果它已经配置，那么只需联系`DBA`托管服务器以提供正确的连接字符串。

你需要有 TCP/IP 连接。只需启动它，在`Server Name'`框中输入 DNS 主机名或 IP 地址，然后点击连接。托管公司需要在您的 SQL Server 实例上启用 TCP/IP，并且它们为您提供对运行该实例的 IP 地址的安全访问。

那么它将是这种形式：

```
connectionString="Data Source=Server_Name;Initial Catalog=Database_Name;
User ID=XXXX;Password=XXXX;Integrated Security=True;"
providerName="Provider_Name" 
```

大多数管理员不允许从防火墙外部直接访问 SQL Server。在这种情况下，如果您可以通过 VPN 连接到主机，那么您应该能够使用 Enterprise Manager 或 SQL Management Studio 直接连接到服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:31:12.920

将您的连接字符串修改为

```
connectionString = "data source=sql-database / 10.0.0.11; User ID = myUsername; PassWord = your password " 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T11:34:38.530

尝试以这种格式使用连接字符串

```
<connectionStrings>
<add name="SQLconnString" connectionString="Data Source=246.185.231.253;Initial Catalog=DNAME;User ID=SampleUID;Password=SamplePWD;timeout=6000" />
</connectionStrings> 
```

这可能会帮助你！

# android - 读取和写入整数数组到包裹

> ID：12121543
> 
> 赞同：29
> 
> 时间：2012-08-25T11:28:04.927
> 
> 标签：android, parcelable

在包裹的情况下，我找不到如何处理整数数组的任何解决方案（我想使用这两个函数**dest.writeIntArray(storeId);** 和 **in.readIntArray(storeId);**）。

这是我的代码

```
public class ResponseWholeAppData implements Parcelable {
    private int storeId[];

    public int[] getStoreId() {
        return storeId;
    }

    public void setStoreId(int[] storeId) {
        this.storeId = storeId;
    }

    @Override
    public int describeContents() {
        return 0;
    }

    public ResponseWholeAppData(){
        storeId = new int[2];
        storeId[0] = 5;
        storeId[1] = 10;
    }

    public ResponseWholeAppData(Parcel in) {

        if(in.readByte() == (byte)1) 
             in.readIntArray(storeId);  //how to do this storeId=in.readIntArray();  ?                          
        }

    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        if(storeId!=null&&storeId.length>0)                   
        {
            dest.writeByte((byte)1);
            dest.writeIntArray(storeId);
        }
        else
            dest.writeByte((byte)0);

    }
    public static Parcelable.Creator<ResponseWholeAppData> getCreator() {
        return CREATOR;
    }

    public static void setCreator(Parcelable.Creator<ResponseWholeAppData> creator) {
        CREATOR = creator;
    }

    public static Parcelable.Creator<ResponseWholeAppData> CREATOR = new Parcelable.Creator<ResponseWholeAppData>()
            {
        public ResponseWholeAppData createFromParcel(Parcel in)
        {
            return new ResponseWholeAppData(in);
        }
        public ResponseWholeAppData[] newArray(int size)
        {
            return new ResponseWholeAppData[size];
        }
            };      
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-11-22T11:02:11.873

当我使用“ `in.readIntArray(storeID)`”时，我得到一个错误：

*“引起：android.os.Parcel.readIntArray(Parcel.java:672) 处的 java.lang.NullPointerException”*。

我没有使用“ `readIntArray`”，而是使用了以下内容：

```
storeID = in.createIntArray(); 
```

现在没有错误了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T20:26:41.233

我假设 MyObj 类实现 Parcelable 并实现所有必需的方法；我将在这里仅建议有关读取/写入包裹的详细信息。

如果事先知道数组大小：

```
public void writeToParcel(Parcel out, int flags) {
    super.writeToParcel(out, flags);
    out.writeIntArray(mMyIntArray);        // In this example array length is 4
}

protected MyObj(Parcel in) {
    super(in);
    mMyIntArray = new int[4];
    in.readIntArray(mMyIntArray);
} 
```

否则：

```
public void writeToParcel(Parcel out, int flags) {
    super.writeToParcel(out, flags);
    out.writeInt(mMyArray.length);        // First write array length
    out.writeIntArray(mMyIntArray);       // Then array content
}

protected MyObj(Parcel in) {
    super(in);
    mMyIntArray = new int[in.readInt()];
    in.readIntArray(mMyIntArray);
} 
```

# iphone - 具有可变振荡模式的 iOS 音调发生器

> ID：12121544
> 
> 赞同：4
> 
> 时间：2012-08-25T11:28:14.403
> 
> 标签：iphone, ios, frequency, audio, acoustics

我有一个音调发生器应用程序，它根据频率的滑块值生成音调。应用程序的这一部分工作正常。我正在使用

```
#import <AudioToolbox/AudioToolbox.h>

OSStatus RenderTone(
void *inRefCon, 
AudioUnitRenderActionFlags  *ioActionFlags, 
const AudioTimeStamp        *inTimeStamp, 
UInt32                      inBusNumber, 
UInt32                      inNumberFrames, 
AudioBufferList             *ioData)

{
// Fixed amplitude is good enough for our purposes
const double amplitude = 0.25;

// Get the tone parameters out of the view controller
ToneGeneratorViewController *viewController =
    (ToneGeneratorViewController *)inRefCon;
double theta = viewController->theta;
double theta_increment = 2.0 * M_PI * viewController->frequency / viewController-    >sampleRate;

// This is a mono tone generator so we only need the first buffer
const int channel = 0;
Float32 *buffer = (Float32 *)ioData->mBuffers[channel].mData;

// Generate the samples
for (UInt32 frame = 0; frame < inNumberFrames; frame++) 
{
    buffer[frame] = sin(theta) * amplitude;

    theta += theta_increment;
    if (theta > 2.0 * M_PI)
    {
        theta -= 2.0 * M_PI;
    }
}

// Store the theta back in the view controller
viewController->theta = theta;

return noErr;
}

- (void)createToneUnit
{
// Configure the search parameters to find the default playback output unit
// (called the kAudioUnitSubType_RemoteIO on iOS but
// kAudioUnitSubType_DefaultOutput on Mac OS X)
AudioComponentDescription defaultOutputDescription;
defaultOutputDescription.componentType = kAudioUnitType_Output;
defaultOutputDescription.componentSubType = kAudioUnitSubType_RemoteIO;
defaultOutputDescription.componentManufacturer = kAudioUnitManufacturer_Apple;
defaultOutputDescription.componentFlags = 0;
defaultOutputDescription.componentFlagsMask = 0;

// Get the default playback output unit
AudioComponent defaultOutput = AudioComponentFindNext(NULL, &defaultOutputDescription);
NSAssert(defaultOutput, @"Can't find default output");

// Create a new unit based on this that we'll use for output
OSErr err = AudioComponentInstanceNew(defaultOutput, &toneUnit);
NSAssert1(toneUnit, @"Error creating unit: %ld", err);

// Set our tone rendering function on the unit
AURenderCallbackStruct input;
input.inputProc = RenderTone;
input.inputProcRefCon = self;
err = AudioUnitSetProperty(toneUnit, 
    kAudioUnitProperty_SetRenderCallback, 
    kAudioUnitScope_Input,
    0, 
    &input, 
    sizeof(input));
NSAssert1(err == noErr, @"Error setting callback: %ld", err);

// Set the format to 32 bit, single channel, floating point, linear PCM
const int four_bytes_per_float = 4;
const int eight_bits_per_byte = 8;
AudioStreamBasicDescription streamFormat;
streamFormat.mSampleRate = sampleRate;
streamFormat.mFormatID = kAudioFormatLinearPCM;
streamFormat.mFormatFlags =
    kAudioFormatFlagsNativeFloatPacked | kAudioFormatFlagIsNonInterleaved;
streamFormat.mBytesPerPacket = four_bytes_per_float;
streamFormat.mFramesPerPacket = 1;  
streamFormat.mBytesPerFrame = four_bytes_per_float;     
streamFormat.mChannelsPerFrame = 1; 
streamFormat.mBitsPerChannel = four_bytes_per_float * eight_bits_per_byte;
err = AudioUnitSetProperty (toneUnit,
    kAudioUnitProperty_StreamFormat,
    kAudioUnitScope_Input,
    0,
    &streamFormat,
    sizeof(AudioStreamBasicDescription));
NSAssert1(err == noErr, @"Error setting stream format: %ld", err);
} 
```

现在我需要修改应用程序中的模式，例如 Dog Whistler Application。谁能告诉我我需要做什么来修改这个源代码之后的波形？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-19T15:03:59.587

对于每个特定模式，您可能需要不同的 RenderTone 实现。您的代码中的实现会产生一个没有调制的采样纯正弦波。您可以生成各种模式，这取决于您的需要您将实现什么。

例如，生成更短或更长的哔声将需要您在“for”循环中为循环内一定数量的帧的正弦曲线生成“静音”（将 0-s 写入缓冲区），然后再次生成正弦样本然后再次沉默......（这就像切断信号）

您还可以通过使用另一个正弦信号（频率低得多）计算的因子缩放样本值来进行幅度调制（颤音效果）。

另一个例子是通过调制生成样本的频率（颤音效果）来产生“警笛”声音，本质上是变量 theta_increment 的值，也根据低频信号。或者，简单地使用两个不同的值来交替使用上面的“哔”效果。

希望这可以帮助。

# php - 基于 html+php 模板发送电子邮件

> ID：12121553
> 
> 赞同：1
> 
> 时间：2012-08-25T11:29:51.523
> 
> 标签：php, html, email, templates

我正在开发一个 PHP Web 应用程序，我需要在其中发送 HTML 格式的电子邮件。我正在使用 mail() 函数。
我想根据模板文件发送电子邮件。这个文件是一个 html 文件，我在其中嵌入了一些 PHP 代码。
我在解释此模板并将结果输出到将传递给 mail() 函数的字符串变量时遇到问题。

```
 function get_include_contents($filename) {
        if (is_file($filename)) {
            ob_start();
            include $filename;
            return ob_get_clean();
        }
        return false;
    }

    $mesaj_confirmare_cont = get_include_contents('../Anunturi-Lemn/signup/confirmation_email.html'); 
```

我在调用者脚本中使用了一些变量以在模板文件中回显，但它们不会在包含的 $filename 中传播。为什么会这样，我该如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:32:09.430

变量需要传入函数

```
function get_include_contents($filename, $my_first_var, $second_var) {
...
}

 $mesaj_confirmare_cont = get_include_contents('...confirmation_email.html', $my_first_var, $second_var); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:42:41.403

尝试使用

```
 file_get_contents(); 
```

或者

```
fread(); 
```

在某些服务器中`file_get_content`可能会被阻止，因此请检查您的服务器配置并使用

上述步骤将为您提供字符串中的文件内容

他们可以使用`preg_replace`and 或其他字符串函数来操作它

# c++ - 从 .dat 文件中读取 2 个字节

> ID：12121554
> 
> 赞同：0
> 
> 时间：2012-08-25T11:30:24.123
> 
> 标签：c++, visual-c++

我有一个这样存储的数据文件：

6 字节（3*16 位）标头。- 字节 0+1（16 位）：x 维度 - 字节 2+3（16 位）：y 维度 - 字节 4+5（16 位）：z 维度 then：x,y,z 中的 3D 体积数据命令。每个体素 16 位（2 个字节），这 16 位中仅使用了 12 位。

我想使用 C++ 加载数据并将其存储在一个数组中

那么如何从 .data 文件中加载 2 个字节，我想要实现的算法是

```
load(String filename)
{
 File fp = openfile(filename);
 Byte2 sizeX, sizeY, sizeZ;
 sizeX = readfile(sizeof(Byte2),fp);
 sizeY = readfile(sizeof(Byte2),fp);
 sizeZ = readfile(sizeof(Byte2),fp);
 UnsignedShort data[sizeX*sizeY*sizeZ];
 for(Integer z=0; z < sizeZ; z++) {
    for(Integer y=0; y < sizeY; y++) {
       for(Integer x=0; x < sizeX; x++) {
        data[x+y*sizeX+z*sizeX*sizeY] = readfile(sizeof(Byte2),fp);
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:22:38.417

我建议使用`ifstream`对象来读取数据文件。当您在 C++ 中打开文件时，您可以提及您希望以二进制而不是文本[的形式读取数据。](http://www.cplusplus.com/reference/iostream/ifstream/open/)`BinaryReader`在 C++中没有直接等同于 Java 的。

更多详细信息`ifstream`可以在这个[C++ 参考页面](http://www.cplusplus.com/reference/iostream/ifstream/)中找到。

# oauth-2.0 - 谷歌 API 控制台的 API？

> ID：12121555
> 
> 赞同：2
> 
> 时间：2012-08-25T11:30:25.297
> 
> 标签：oauth-2.0, google-api-console

有什么方法可以 使用任何类型的 api访问[https://code.google.com/apis/console ？](https://code.google.com/apis/console)我需要使用 python 访问它并动态地将子域添加到 oauth2 回调中，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T21:43:40.067

不，API 控制台中没有用于以编程方式配置项目的 API。

# javascript - NFL 赛程的 javascript 对象

> ID：12121556
> 
> 赞同：0
> 
> 时间：2012-08-25T11:30:36.563
> 
> 标签：javascript, object

我正在尝试构建一个包含 NFL 2012 赛程的对象。我在网上找到了它的 CSV 并且可以解析它，除非我试图每周添加游戏。当我在每周执行代码后控制台记录时间表时，只会得到一场比赛（最后一场），而不是他们应该拥有的 16 场（左右，取决于轮空）。

注意：通常我将我的原型放在源文件中而不是在这里，但为了清楚起见，我将它们包括在内。

奖励：我会在完成后发布该对象。: D

这是我的代码：

```
String.prototype.trim = function() {
    return this.replace(/^\s+|\s+$/g,"");
}

String.prototype.capitalize = function() { 
    return this.substr(0, 1).toUpperCase() + this.substr(1);
}

Object.prototype.getKeys = function(obj){
    var keys = [];
    for(var key in obj){
        keys.push(key);
    }
    return keys;
}

Array.prototype.contains = function(obj) {
    var i = this.length;
    while (i--) {
        if (this[i] == obj) {
            return true;
        }
   }
   return false;
}

var AppController = {};

//create a schedule object
AppController.Schedule = {};
var schedule = AppController.Schedule;

    var scheduleArray = nflschedule.split(":::");

    //set a game count so we can give each game an id
    var gameCount = -1;

    for(var i=0; i<scheduleArray.length; i++) { 

        gameCount++;

        //filter out first line
        if (i>0) { 

            //get a game
            var thisGameItems = scheduleArray[i].split(",");

            //game date
            var gameDate = thisGameItems[0];

            //week number
            var colonSplitPattern = new RegExp("^[^:]+(?=:)");
            var weekNumPattern=new RegExp("\Week(.*)");
            var weekNum = "Week" + thisGameItems[2].match(colonSplitPattern).toString().match(weekNumPattern)[1].trim();
            //get teams and game day
            var homeTeam = thisGameItems[thisGameItems.length-3].trim();
            var visitingTeam = thisGameItems[thisGameItems.length-2].trim();
            var weekDay =   thisGameItems[thisGameItems.length-1].trim().capitalize();

            //check Schedule and see if we have this weekNum as key, if not add it
            var gameWeeks = schedule.getKeys();
            if (gameWeeks.contains(weekNum) == false) { 
                schedule[weekNum] = {};
            }

            var thisWeeksGames = schedule[weekNum];
            //add games to the game week
            thisWeeksGames[gameCount] = {

                GameDate: gameDate,
                GameWeek: weekNum,
                HomeTeam: homeTeam,
                VisitingTeam: visitingTeam,
                GameDay: weekDay,
                HomeTeamScore : "",
                VistingTeamScore : ""

            }

        }
    }

console.log(schedule); 
```

# c - 如何在 CentOS 6 中开发 netfilter 队列？

> ID：12121558
> 
> 赞同：2
> 
> 时间：2012-08-25T11:30:52.983
> 
> 标签：c, centos, netfilter

我找不到可以为 CentOS 6.3 提供“libnetfilter_queue/libnetfilter_queue.h”的软件包。（将提供 struct nfq_data、struct nfq_q_handle 的头文件...）甚至在 EPEL 中也没有。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:48:41.783

获取 netfilter 的 git 存储库的最新版本：

```
$git clone git://git.netfilter.org/libnfnetlink.git /* needed for dependency */

$git clone git://git.netfilter.org/libnetfilter_queue.git 
```

移动到`nfnetilink`'s 目录并发出以下命令：

```
$./autogen.sh
$./configure --prefix=/usr
$make
$sudo make install 
```

对 做同样的事情`netfilter_queue`。

测试您的安装：

```
$gcc <libnetfilter_queue>/ustils/nfqnl_test.c -o nftest -lnfnetlink -lnetfilter_queue 
```

验证动态链接：

```
[root@s1 utils]# ldd nftest 
    linux-vdso.so.1 =>  (0x00007fff47dd1000)
    libnetfilter_queue.so.1 => /usr/lib/libnetfilter_queue.so.1 (0x00007f5de5a34000)
    libnfnetlink.so.0 => /usr/lib/libnfnetlink.so.0 (0x00007f5de582d000)
    libc.so.6 => /lib64/libc.so.6 (0x0000003c96000000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003c95c00000) 
```

编辑：

关于包裹：

```
yum search netfilter 
```

返回这个：

```
libnetfilter_conntrack.i686 : Netfilter conntrack userspace library
libnetfilter_conntrack.x86_64 : Netfilter conntrack userspace library
libnetfilter_conntrack-devel.i686 : Netfilter conntrack userspace library
libnetfilter_conntrack-devel.x86_64 : Netfilter conntrack userspace library
libnfnetlink.i686 : Netfilter netlink userspace library
libnfnetlink.x86_64 : Netfilter netlink userspace library
libnfnetlink-devel.i686 : Netfilter netlink userspace library
libnfnetlink-devel.x86_64 : Netfilter netlink userspace library 
```

我在 6.2 上启用了 epel、rpmforge、rpmfusion。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T11:06:04.860

另一种解决方案是从 Fedora 存储库下载 libnetfilter_queue-1.0.2 和 libnfnetlink-1.0.1 src rpm 并为 RHEL6/CentOS6 重建它们。

# c++ - 使用 Cgicc 获取表单数据

> ID：12121559
> 
> 赞同：0
> 
> 时间：2012-08-25T11:30:59.180
> 
> 标签：c++, cgi, form-data

```
char* fileContentLength;
int nContentLength;
fileContentLength = getenv("CONTENT_LENGTH");

if(fileContentLength == NULL)   
    return -1;      

nContentLength = atoi(fileContentLength);   

if(nContentLength == 0) 
    return -1;

data = (char*) malloc(nContentLength+1);

if(data == NULL)    
    return -1;

memset(data, 0, nContentLength+1);  
if(fread(data, 1, nContentLength, stdin) == 0)  
    return -1;

if(ferror(stdin)) 
```

这是将表单数据获取到字符数组的 c++ cgi 代码。执行此代码后，我得到了变量“数据”的以下结果。

> f0=fname0&l0=lname0&f1=fname1&l1=lname1&f2=fname2&l2=lname2&f3=&l3=

现在我想使用 cgicc 在单个字符数组中检索类似上面的数据。但是使用 cgicc 我可以获得特定元素的值。但我想检索单个字符数组中的所有元素值。我怎样才能使用 cgicc 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-04T05:04:53.790

我知道这是一个很晚的回复，但也许它对某人有帮助。

这可能与我遇到的一个问题有关。昨天我第一次开始使用 C++ Cgi 脚本。我发现在使用 POST 方法提交数据时在代码中多次声明 Cgicc（GET 工作正常）导致“在抛出 'std::runtime_error' 的实例后调用终止 ... what(): I/O 错误” . 它是通过全局声明 Cgicc 来解决的，因此只在代码中声明一次。

# jquery - 如何打破 $.each

> ID：12121563
> 
> 赞同：0
> 
> 时间：2012-08-25T11:31:28.553
> 
> 标签：jquery, webmethod

我正在像这样使用 $.each 的 jquery

```
$.each($('.FormContainer div.MainDiv'), function () {
$.ajax({
      type: "POST",
      url: pageUrl + '/SaveFormResponse',
      data: jsonText,
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function (response) {
      if (isNaN(response.d) == false) {
          //continue executing $.each further
      }
      else {
          alert(response.d);
          //stop executing $.each further in case of error 
      }
      },
      failure: function (response) {
           alert(response.d);
      }

    });

}); 
```

现在的问题是，如果出现错误，我希望 $.each 停止进一步执行，但它不会停止，直到它不会遍历所有 div

我还尝试维护一个变量并在每次迭代时检查它的值并将其值设置为错误但仍然无法正常工作

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:38:08.013

当`$.ajax`给你一个结果时，`$.each`已经完成了。请注意，ajax 中的第一个“a”代表异步。您可以做的是创建一个递归函数（您没有使用每个元素的任何特定内容，但我假设您这样做了`$elem`）：

```
var $elems = $('.FormContainer div.MainDiv');

(function fetch(i) {
    if(i >= $elems.length) return;  // no elems left

    var $elem = $elems.eq(i);

    $.ajax({
      type: "POST",
      url: pageUrl + '/SaveFormResponse',
      data: jsonText,
      contentType: "application/json; charset=utf-8",
      dataType: "json",
      success: function (response) {
        if (!isNaN(response.d)) {
          fetch(i + 1);  // next one
        } else {
          alert(response.d);  // just don't call fetch again
        }
      },
      failure: function (response) {
         alert(response.d);
      }
    });
})(0);  // start with first elem 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T11:49:17.637

还没有测试过，但我猜这样的事情会在没有递归或同步行为的情况下完成：

```
var XHRarray = [];

$.each($('.FormContainer div.MainDiv'), function() {
    var XHR = $.ajax({
        type: "POST",
        url: pageUrl + '/SaveFormResponse',
        data: jsonText,
        contentType: "application/json; charset=utf-8",
        dataType: "json"
    }).done(function(response) {
        if (isInteger(response.d)) {
            //continue executing $.each further
        }else{
            stopAll(); //stop all pending ajax requests
        }
    }).fail(function() {
        stopAll(); //stop all pending ajax requests
    });
    XHRarray.push(XHR);
});

function stopAll() {
    $.each(XHRarray, function(i,e) {
        e.abort();
    }
}​

function isInteger(s){ //checks string for numbers only
    for (var i = 0; i < s.length; i++){   
        var c = s.charAt(i);
        if (((c < "0") || (c > "9"))) return false;
    }
    return true;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-25T11:38:38.003

要打破 $.each()，你需要返回 false

```
$(function() {
    var temp = [0, 1, 2, 3, 4, 5];
    $.each(temp, function(k, v) {
        $('body').append(v);
        if (v == 3) {
            return false;
        }
    });
}); 
```

输出：

```
0123 
```

[阅读更多](http://api.jquery.com/jQuery.each/)

但是，如果你想使用这样的异步 $.ajax() 调用，你需要在回调函数中决定是继续下一个项目还是停止。

```
var currentItem = 0, itemSet = $('.FormContainer div.MainDiv');
function workOnItem(itemNum) {
      if (itemSet[itemNum] != undefined) {
      var item = itemSet[itemNum];
      $.ajax({
            type: "POST",
            url: pageUrl + '/SaveFormResponse',
            data: jsonText,
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (response) {
            if (isNaN(response.d) == false) {
                  //continue executing $.each further
                  currentItem++;
                  workOnItem(currentItem);
            }
            else {
                alert(response.d);
                //stop executing $.each further in case of error 
            }
            },
            failure: function (response) {
                 alert(response.d);
            }
        });
      }
}
workOnItem(0); 
```

# c# - 分层数据网格？

> ID：12121565
> 
> 赞同：4
> 
> 时间：2012-08-25T11:31:42.500
> 
> 标签：c#, wpf, datagrid

是否有任何免费的用户控件提供具有多个子项的 WPF DataGrid（应该是表示 XML 的一种方式）？

我想要的是一种能够显示用户可编辑的“项目名称”列和“项目数据”列的 TreeView。

是否有任何免费的用户控件可以为我提供这些？

# c# - 处理 MVC 组合框值

> ID：12121566
> 
> 赞同：4
> 
> 时间：2012-08-25T11:31:47.400
> 
> 标签：c#, asp.net-mvc

我认为这将是一件容易的事，但我现在已经挣扎了一段时间。

我有`Sport`属于某个对象的`SportGroup`对象。

我想在组合框中表示组，并`SportViewModel.cs`使用以下属性创建

```
public Guid Id {get; set;}
public string Name {get; set;}
public Guid? SportGroupId { get;set; }
public IEnumerable<SportGroup> SportGroups {get; set; } 
```

HttpGet 创建动作

```
SportViewModel newSport = new SportViewModel();
newSport.SportGroups = new SelectList(GetAllSportGroups(), "Id", "Name");

//GetAllSportGroups() returns list of SportGroups domain objects as you can imagine. 
```

我的创建视图看起来像这样

```
@model Models.SportViewModel
<div>Sport group</div>
<div>@Html.DropDownListFor(x => x.SportGroupId, Model.SportGroups)</div> 
```

现在在控制器的`httpPost`操作中，我接收数据并尝试保存它：

```
[HttpPost]
public ActionResult Create(SportViewModel newSport)
{
   // if model state is valid and other checking omitted
   // session and transaction omitted
   Sport sport = new Sport();
   sport.Id = newSport.Id;
   sport.Name = newSport.Name;
   SportGroup sportGroup = session.Load<SportGroup>(SportGroupId);
   sport.SportGroups.Add(sportGroup); // here is where I'm getting an error
} 
```

提交后我收到这些错误

> *你调用的对象是空的。
> 参考线 `sport.SportGroups.Add(sportGroup);`*

请帮忙。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:56:42.827

尝试这个：

```
// if model state is valid and other checking omitted
// session and transaction omitted
Sport sport = new Sport();

if(sport.SportGroups != null)
{
   // everything OK !
}
else
{
   // you need to instantiate the .SportGroups property!
   sport.SportGroups = new .........();
} 
```

因为否则：

```
sport.SportGroups.Add(sportGroup); // here is where I'm getting an error
     ************* 
```

如果此`.SportGroups`属性未**正确**实例化，它将为 NULL 并且您不能调用`.Add()`它！你会得到你所拥有的那个确切的例外。

这通常是您最好在`Sport`类的构造函数中执行的操作 - 确保在创建类型的新对象时所有包含的集合等也被初始化和实例化`Sport`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T11:40:50.270

您可能没有实例化位于 Sport 类的 SportsGroups 属性后面的集合实例。检查它的构造函数/初始化。

# windows-8 - 在 WinRT 中检查项目中是否存在文件

> ID：12121572
> 
> 赞同：12
> 
> 时间：2012-08-25T11:32:32.873
> 
> 标签：windows-8, windows-runtime, windows-store-apps

我有一个 WinRT Metro 项目，它根据所选项目显示图像。但是，某些选择的图像将不存在。我想要做的是捕获它们不存在的情况并显示替代方案。

到目前为止，这是我的代码：

```
internal string GetMyImage(string imageDescription)
{
    string myImage = string.Format("Assets/MyImages/{0}.jpg", imageDescription.Replace(" ", ""));

    // Need to check here if the above asset actually exists

    return myImage;
} 
```

示例调用：

```
GetMyImage("First Picture");
GetMyImage("Second Picture"); 
```

所以`Assets/MyImages/SecondPicture.jpg`存在，但`Assets/MyImages/FirstPicture.jpg`不存在。

起初我想使用 WinRT 等价物`File.Exists()`，但似乎没有。无需尝试打开文件并捕获错误，我可以简单地检查文件是否存在，或者文件是否存在于项目中？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-25T13:03:58.093

您可以使用`GetFilesAsync`from [here](http://msdn.microsoft.com/en-us/library/windows/apps/br227274.aspx)枚举现有文件。考虑到您有多个可能不存在的文件，这似乎很有意义。

> 获取当前文件夹及其子文件夹中所有文件的列表。根据指定的 CommonFileQuery 过滤和排序文件。

```
var folder = await StorageFolder.GetFolderFromPathAsync("Assets/MyImages/");
var files = await folder.GetFilesAsync(CommonFileQuery.OrderByName);
var file = files.FirstOrDefault(x => x.Name == "fileName");
if (file != null)
{
    //do stuff
} 
```

**编辑：**

正如@Filip Skakun 指出的那样，资源管理器有一个资源映射，您可以在其上调用`ContainsKey`它，它还具有检查合格资源的好处（即本地化、缩放等）。

**编辑2：**

Windows 8.1 引入了一种获取文件和文件夹的新方法：

```
var result = await ApplicationData.Current.LocalFolder.TryGetItemAsync("fileName") as IStorageFile;
if (result != null)
    //file exists
else
    //file doesn't exist 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-27T01:31:24.040

有两种方法可以处理它。

1）在尝试获取文件时捕获 FileNotFoundException：

```
 Windows.Storage.StorageFolder installedLocation = 
     Windows.ApplicationModel.Package.Current.InstalledLocation;
 try
 {
     // Don't forget to decorate your method or event with async when using await
     var file = await installedLocation.GetFileAsync(fileName);
     // Exception wasn't raised, therefore the file exists
     System.Diagnostics.Debug.WriteLine("We have the file!");
 }
 catch (System.IO.FileNotFoundException fileNotFoundEx)
 {
     System.Diagnostics.Debug.WriteLine("File doesn't exist. Use default.");
 }
 catch (Exception ex)
 {
     // Handle unknown error
 } 
```

2) 正如 mydogisbox 建议的那样，使用 LINQ。虽然我测试的方法略有不同：

```
 Windows.Storage.StorageFolder installedLocation =
     Windows.ApplicationModel.Package.Current.InstalledLocation;
 var files = await installedLocation.GetFilesAsync(CommonFileQuery.OrderByName);
 var file = files.FirstOrDefault(x => x.Name == fileName);
 if (file != null)
 {
    System.Diagnostics.Debug.WriteLine("We have the file!");
 }
 else
 {
    System.Diagnostics.Debug.WriteLine("No File. Use default.");
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T14:03:00.193

[`BitmapImage`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.bitmapimage.aspx)[`ImageFailed`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.bitmapimage.imagefailed.aspx)如果无法加载图像，则会触发一个事件。这将让您尝试加载原始图像，然后在它不存在时做出反应。

当然，这需要您实例化`BitmapImage`自己，而不仅仅是构建`Uri`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-08T16:40:19.293

c++ /cx 的资源可用性检查示例（使用 Windows Phone 8.1 测试）：

```
std::wstring resPath = L"Img/my.bmp";
std::wstring resKey = L"Files/" + resPath;
bool exists = Windows::ApplicationModel::Resources::Core::ResourceManager::Current->MainResourceMap->HasKey(ref new Platform::String(resKey.c_str())); 
```

# .htaccess - 无法使用 RHEL 删除 CodeIgniter2.1.2 上的 index.php

> ID：12121576
> 
> 赞同：1
> 
> 时间：2012-08-25T11:33:02.023
> 
> 标签：.htaccess, codeigniter, url, indexing

我已经从许多链接中解决了这个问题。但是，它不适用于我的项目。

1.  将`.htaccess`文件移动到 CI 根目录
2.  `mod_rewrite`在文件中配置`.htaccess`（我在 Google 上找到的所有结构）
3.  改为`config[‘index_page’]`空
4.  放`config['uri_protocol'] = 'REQUEST_URI' or 'QUERY_STRING'`
5.  然后，它显示

> 未找到 在此服务器上未找到请求的 URL /class/method。

我不知道如何进一步修复它。我花了很长时间来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:58:53.173

1.  安装 CodeIgniter 的新副本
2.  更改`$config['index_page']`为`= '';`
3.  将此复制到您的`.htaccess`

.htaccess

```
RewriteEngine on
RewriteCond $1 !^(index\.php|robots\.txt)
RewriteRule ^(.*)$ /index.php?/$1 [L] 
```

访问`http://yourhost/codeigniter/welcome/index`。

它有效吗？如果不是，将`.htaccess`上面的最后一行更改为

```
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

如果此时它不起作用，请检查您的 Apache 是否支持 mod_rewrite 并且它已启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:01:13.240

确保`mod_rewrite`已启用：如果您正在运行 Ubuntu，请打开终端并键入`sudo a2enmod rewrite`.

此外，确保您的`.htaccess`文件甚至被解析。同样，在 Ubuntu 上找到：`/etc/apache2/sites-available/default`并将`<Directory>`指令修改为：

```
<Directory /var/www/>
  Options Indexes FollowSymLinks MultiViews
  AllowOverride All
  Order allow,deny
  allow from all
</Directory> 
```

Google 搜索以查找相关的 Windows/Mac 命令和文件位置。

# google-maps-api-3 - 如何使用 Google Maps API 编写 GPS 路由应用程序

> ID：12121577
> 
> 赞同：2
> 
> 时间：2012-08-25T11:33:18.373
> 
> 标签：google-maps-api-3, google-directions-api

我将使用 Google API 编写一个 GPS 路由应用程序。到目前为止，我知道我必须使用 Google Directions 服务来获取并显示地图上两点之间的路径。但是我如何显示一个矩形，例如，代表启用 GPS 的移动对象。我如何移动它？我应该从 GPS 获取 lat,lng 并重置物体的位置吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:40:01.107

Google Maps API 有许多示例应用程序。我认为这将是一个很好的开始[https://developers.google.com/maps/documentation/javascript/examples/](https://developers.google.com/maps/documentation/javascript/examples/)

# c# - 每当实例化模板时，如何在 DataTemplate 中填充控件？

> ID：12121580
> 
> 赞同：1
> 
> 时间：2012-08-25T11:33:36.467
> 
> 标签：c#, wpf, xaml, datatemplate

我有`ItemsControl`一个`DataTemplate`描述如何显示每个项目的说明。我想在 DataTemplate 中拥有的 UI[不适合由 XAML 建模，](https://stackoverflow.com/questions/12117219/how-to-build-a-grid-of-controls-in-xaml)我将不得不`Grid`在代码中填充一个。

如何在每次`DataTemplate`实例化 my 时运行此代码，以便我有机会填充无法在 XAML 中表达的位？

* * *

为了扩展一点，考虑一个简化的例子。虚拟机如下所示：

```
class MyItem
{
    public string Name { get; set; }
    public MyGrid Grid { get; set; } // describes a complex grid-like model
} 
```

`DataTemplate`看起来像这样：

```
<DataTemplate>
    <TextBlock Text="{Binding Name}"/>
    <Grid/>
</DataTemplate> 
```

这`<Grid/>`是我想在基于`MyItem.Grid`. 我怎样才能做到这一点？

（如果您要说我不应该填充`<Grid/>`in 代码而只使用 XAML，请改为回答[此问题](https://stackoverflow.com/questions/12117219/how-to-build-a-grid-of-controls-in-xaml)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T13:02:18.363

您可以轻松地将`Loaded`事件挂钩到`Grid`.

```
<Grid Loaded="Grid_Loaded"> 
```

```
private void Grid_Loaded(object sender, ....)
{
    var grid = (Grid)sender;
    var item = (MyItem)grid.DataContext;
    //Go time
} 
```

# php - 为行程系统关联两个单独的数组

> ID：12121584
> 
> 赞同：1
> 
> 时间：2012-08-25T11:34:16.887
> 
> 标签：php, arrays, cakephp

我正在尝试建立一个旅行行程系统。用户选择旅行日期，然后可以将项目添加到每一天。

我有一个日期数组，以以下格式存储在会话中：

```
array(
    (int) 0 => '2012-08-25',
    (int) 1 => '2012-08-26',
    (int) 2 => '2012-08-27'
) 
```

然后他们将选择景点，我希望以以下格式将其存储在数组中：

```
array(
(int) 0 => array(
    'Attraction' => array(
        'attraction_id' =>'1',
        'name' => 'Place One',

    )
),
(int) 1 => array(
    'Attraction' => array(
        'attraction_id' => '2',
        'name' => 'Place Two',

    )
), 
```

我希望能够输出：

*   2012-08-25
    *   一号位
    *   地方二
*   2012-08-26
    *   这里还没有！
*   2012-08-27
    *   这里还没有！

因此，如果有意义的话，第一个数组的每个项目都包含一个项目数组。我正在努力将数组的键与`days`数组相关联的逻辑`items`。

我看了看，`array_merge`但这似乎没有做我需要的。

有没有简单的方法来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T17:12:26.267

这段代码完全符合您的要求。不幸的是，我担心你的问题并不能反映你给出的例子。使用键链接数据将导致 1-1 关系，而您似乎需要 1-n。您应该在景点数组中有一个外键字段，例如 date_id。

```
$array= array();

foreach($dates as $date_key=>$date){
   $array[$date]=array();
   foreach($attractions as $attraction_key=>$attraction){
        if($date_key==$attraction_key){
           $array[$date][]=$attraction['Attraction']['name'];
         }   
     }
} 
```

# ruby-on-rails - rails中的pdfkit错误

> ID：12121588
> 
> 赞同：1
> 
> 时间：2012-08-25T11:35:32.053
> 
> 标签：ruby-on-rails, wkhtmltopdf, pdfkit

我已经做好了

```
gem install pdfkit
gem install wkhtmltopdf 
```

在 application.rb 添加

```
config.middleware.use "PDFKit::Middleware", :print_media_type => true 
```

当我转到带有 .pdf 扩展名的 pdf 链接时

它显示错误如下

```
No wkhtmltopdf executable found at bundler: command not found: which
Install missing gem executables with `bundle install`
>> Please install wkhtmltopdf -https://github.com/jdpace/PDFKit/wiki/Installing WKHTMLTOPD 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T11:56:32.153

一种猜测是您使用的是 Windows，但该库需要该`which`命令，该命令在 OS X 和 Linux 等系统上可用，但在 Windows 上不可用。

如果您使用的是 Windows，那么在[Cygwin](http://www.cygwin.com/)中运行 Rails 可能会更成功。

# javascript - 没有AJAX的拖放文件上传，在前台同步？

> ID：12121589
> 
> 赞同：20
> 
> 时间：2012-08-25T11:35:34.317
> 
> 标签：javascript, html, file-upload

我有一个定期`<input type="file">`上传文件的网站，在提交表单时将数据发布到后端。

我想逐步增强表单，以便您可以从浏览器外部将文件拖放到视口中的任何位置（不仅仅是文件输入字段，如某些浏览器内置）以上传它。

表单是否自动提交并不重要。因此，如果拖放只选择文件字段中的文件，而不开始上传，那很好。我不需要支持多个文件。我不需要显示上传进度、缩略图或任何花哨的东西。

我知道有支持拖放上传的 JS 库，但它们似乎都是通过 AJAX 上传的。我可以这样做，但是我需要修改后端和前端来处理上传错误、重定向并在成功时显示正确的消息等等。

我想要一个不需要任何后端更改的渐进增强。它应该使用页面中的表单同步发生。JS 很好，只要上传发生在“前台”。当然，同步 AJAX 是行不通的。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-25T13:07:55.067

虽然不是真正的“同步”（JavaScript 执行实际上不会停止），但您可以通过`<input type="file">`编程方式设置选择的文件。事实上，这些元素和拖动共享它们的文件后端实现（`File`和`FileList`实例），所以它真的很简单。更重要的是，由于两个前端都使用`FileList`s，拖动多个文件可以无缝地工作。

这适用于 Chrome（使用 jQuery）：http: [//jsfiddle.net/qMmPr/](http://jsfiddle.net/qMmPr/)。

```
$(document).on("dragover drop", function(e) {
    e.preventDefault();  // allow dropping and don't navigate to file on drop
}).on("drop", function(e) {
    $("input[type='file']")
        .prop("files", e.originalEvent.dataTransfer.files)  // put files into element
        .closest("form")
          .submit();  // autosubmit as well
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-08T11:24:12.253

感谢@pimvdb 的评论，我想出了一个非常优雅的解决方案。

既然是拖放`<input type="file" />`作品，何不让它全屏显示`dragstart`以确保用户不会错过它呢？反正他是在拖拖拉拉，所以此刻他的意图很明确。

这是一个演示：[https ://jsfiddle.net/08wbo4um](https://jsfiddle.net/08wbo4um)

注意：不幸的是，这似乎不适用于`iframe`，但它确实适用于实际页面。你仍然可以理解这种行为。

这是片段：

```
 $('input[type="file"]').on('change', function(e){
    var fileName = e.target.files[0].name;
    if (fileName) {
      $(e.target).parent().attr('data-message', fileName);
    }
  });

  $(document).on('drag dragstart dragend dragover dragenter dragleave drop', function(e) {
    if ($('input[type="file"]').length) {
      if (['dragover', 'dragenter'].indexOf(e.type) > -1) {
        if (window.dragTimeout)
          clearTimeout(window.dragTimeout);
        $('body').addClass('dragged');
      } else if (['dragleave', 'drop'].indexOf(e.type) > -1) {
        // Without the timeout, some dragleave events are triggered
        // when the :after appears, making it blink...
        window.dragTimeout = setTimeout(function() {
          $('body').removeClass('dragged');
        }, 100);
      }
    }
  });
```

```
h3, p {
  text-align: center;
}

.form-group {
  margin: 30px;
}

.file-upload .form-control {
  height: 150px;
  outline: 1px dashed #ccc;
  outline-offset: -15px;
  background-color: #eee;
}
.file-upload .form-control:before {
  content: "\f093";
  font: normal normal normal 14px/1 FontAwesome;
  font-size: 3em;
  left: 0;
  right: 0;
  display: block;
  margin: 20px auto;
  text-align: center;
}
.file-upload .form-control:after {
  content: attr(data-message);
  left: 0;
  right: 0;
  bottom: 0;
  text-align: center;
  display: block;
}
.file-upload .form-control input[type="file"] {
  cursor: pointer;
  opacity: 0;
  width: 100%;
  height: 100%;
  position: absolute;
  top: 0;
  bottom: 0;
  right: 0;
  left: 0;
}
body.dragged .file-upload .form-control input[type="file"] {
  /* Make sure it is full screen, whatever the position absolute container */
  position: fixed;
  top: -50vh;
  bottom: -50vh;
  left: -50vw;
  right: -50vw;
  height: 200vh;
  width: 200vw;
  z-index: 10002;
}

body:after {
  content: 'You can drop the file. :-)';
  font-size: 2em;
  text-align: center;
  line-height: 100vh;
  position: absolute;
  top: 10px;
  bottom: 10px;
  left: 10px;
  right: 10px;
  background-color: #eee;
  z-index: 10000;
  border-radius: 4px;
  border: thin solid #ccc;
  visibility: hidden;
  opacity: 0;
  transition: visibility 0s, opacity 0.5s ease;
}

body.dragged:after {
  opacity: 1;
  visibility: visible;
}
```

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>

<h3>Drag N Drop file upload without AJAX Demo</h3>
<p>Try drag and dropping a file. :-)</p>

<div class="form-group file-upload" required="required">
    <label class="cols-sm-2 control-label" for="document_file">File Upload</label><br>
    <div class="cols-sm-10">
      <div class="input-group">
        <span class="input-group-addon"><i class="fa fa-file" aria-hidden="true"></i></span>
        <div class="form-control" data-message="Click to select file or drag n drop it here">
          <input required="required" title="Click to select file or drag n drop it here" type="file" name="document[file]" id="document_file">
        </div>
      </div>
    </div>
  </div>
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-06-01T06:07:09.397

可以通过将 autoUpload 设置为 false，将文件收集到一个数组中，然后在提交表单时对所有文件和表单数据进行一次 ajax 调用，如此[处](https://stackoverflow.com/a/30566501/335396)所述。

# wordpress - 如何将上传表单添加到 woocommerce 的结帐中

> ID：12121590
> 
> 赞同：1
> 
> 时间：2012-08-25T11:35:45.540
> 
> 标签：wordpress, e-commerce, woocommerce

我正在尝试将上传表单添加到我的 woocommerce 网站的结帐中...我在这里找到了一个很好的教程：[http ://wcdocs.woothemes.com/snippets/tutorial-customising-checkout-fields-using- hooks-and-filters/](http://wcdocs.woothemes.com/snippets/tutorial-customising-checkout-fields-using-hooks-and-filters/)它显示了如何自定义字段，但是在数组中没有一个选项可以仅创建上传表单（字段类型（文本、文本区域、密码、选择）。

我怎么能实现这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:16:36.853

遗憾的是，我无法回答关于 woocommerce 的观点。但由于您的问题与`upload`功能有关，我建议您使用[valums / file-uploader](https://github.com/valums/file-uploader)。我在所有上一个 WP 插件中都使用了它，包括前端和后端。

> 该插件使用 XMLHttpRequest (AJAX) 在 FF3.6+、Safari4+、Chrome 中使用进度条上传多个文件，并在其他浏览器（即 IE）中回退到基于隐藏 iframe 的上传，从而在任何地方提供良好的用户体验。

让它工作有点困难，但是一旦你完成了你就会爱上它。所以如果你想尝试一下并需要帮助，请在 SO 中再次询问。并将其重定向给我，以便通知我为您提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T18:29:33.130

我在我的每个产品中都使用文件上传 - 重力形式允许这样做 - 尽管文件大小有一个限制，默认值约为 8mb - 尽管我被告知这可以增加。

我使用 woo commerce - 并且有重力形式的扩展 - 这使得将这些形式添加到产品（或其他任何东西）非常容易。

唯一的缺点是没有上传栏或显示上传的文件......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-20T12:57:37.193

**对于表单，尝试使用这两个钩子：**

1) add_action('woocommerce_after_cart_table', 'add_file_to_upcoming_order');

2) add_action('woocommerce_checkout_after_customer_details', 'add_file_to_upcoming_order');

**要接收/获取文件，您应该使用如下钩子：**

```
add_action('woocommerce_init', 'file_during_checkout');
add_action( 'woocommerce_order_status_pending', 'wc_checkout_order_processed'); 
add_action( 'woocommerce_order_status_on-hold', 'wc_checkout_order_processed');
add_action( 'woocommerce_order_status_processing', 'wc_checkout_order_processed');
add_action( 'woocommerce_order_status_completed', 'wc_checkout_order_processed'); 
```

**重要提示：** add_action('save_post', 'pre_wc_checkout_order_processed');

**描述：** 事实上，当您的挂钩取决于订单状态时，您可以松开附件。假设您的订单无论如何都没有完成，那么您也将失去 PHP 会话。最好使用“save_post”挂钩进行管理，并且必须在上传附件中添加一些标志。

你可以使用这个函数[wp_handle_upload](https://codex.wordpress.org/Function_Reference/wp_handle_upload)来处理你上传的文件。上传文件后，您可以轻松地从之前添加的 WooCommerce 对象“WC_Order”和 $order->get_items() 获取订单商品。[去年](http://www.websitedesignwebsitedevelopment.com/wufdc)我试图让它工作，很多人也使用它，你可以通过使用这些钩子来开发一个改进的解决方案。

# android - Android画布drawText从右到左

> ID：12121591
> 
> 赞同：0
> 
> 时间：2012-08-25T11:35:47.100
> 
> 标签：android, canvas

我也有一个处理阿拉伯语的应用程序，但是我的阿拉伯语用户有一个问题，即 drawText 翻转单词 .. 阿拉伯语必须从右到左。如何使画布从右到左绘制文本？

![在此处输入图像描述](../Images/5f7f4ce3854433dabe240b596c7bfc79.png)

在图片中看到突出显示的文本是正确的文本，它是一个 textView，它很好。但是画布中的 DrawText 是错误的。必须是从右到左，如何让画布drawText从右到左？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:22:06.080

在画布上，只需在要绘制文本的两侧创建两个点，然后在它们之间创建路径。使用这个方法会很好用

```
Path path = new Path();
Paint paint = new Paint();
path.moveTo(p2.x, p2.y);
path.lineTo(p1.x, p1.y);
canvas.drawTextOnPath(String.valueOf(txt), path, (float) (c.getWidth() / (2.3)),  (float) (c.getHeight()/2 + paint.getTextSize()/1.5), paint); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T15:49:56.467

确保包含阿拉伯语的 Android 模拟器，我遇到了同样的问题，但是当我在实际的移动设备上尝试该应用程序时，它解决了。您的应用程序的语言没有问题，请确保 Android 模拟器支持阿拉伯语

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-12T05:38:58.463

您可以从字符串中获取 subString 并在画布中绘制：

```
 Paint textPaint = new Paint();
            textPaint.setColor(Color.BLACK);
            textPaint.setStyle(Paint.Style.FILL_AND_STROKE);
            textPaint.setTextSize(20);
            textPaint.setTypeface(Typeface.DEFAULT_BOLD);
            textPaint.setStrokeWidth(1);

            String subString = mString;
            float textWidth = textPaint.measureText(mString);

           int endOffset = Math.round(rectWidth * (mString.length() - 1) / textWidth);
            if (textWidth > rectWidth) {
                endOffset =endOffset - 2;
                subString = mString.substring(0, endOffset);
                subString = subString + "..";
            }else{
                for(int j=mString.length();j<endOffset+1;j++){
                    subString+=" ";
                }
            }

            canvas.drawText(subString, padding , (float) (startHeight + eachHeight / 3 + textPaint.getTextSize() / 1.5), textPaint); 
```

这样，即使在 RTL 或 LTR string 中，我们也有相同的结果。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-18T07:52:37.857

如果您的目标设备的 api 级别大于 11，您可以在 TextView 元素中使用 rotateY=180 属性。父视图也应该设置为 rotateY = 180。

# java - JIDE公共层上的未定义符号sun.awt.image.CachingSurfaceManager

> ID：12121592
> 
> 赞同：1
> 
> 时间：2012-08-25T11:35:56.060
> 
> 标签：java, netbeans, jide

我刚刚下载了 JIDE 通用层，但无法构建它，因为它找不到`CachingSurfaceManager`类。

我正在尝试使用 Netbeans 和最新版本的 java sdk（昨天下载）来构建它。我应该尝试日食吗？我认为这不会解决问题，因为我也无法在 java 文档中找到该类。

我认为它可能来自 java 6 而不是 7（这是我下载的那个）。

[这个页面](http://www.findjar.com/class/sun/awt/image/CachingSurfaceManager.html)说它在 rt.jar 中，我也无法在其中找到它......

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T23:07:45.480

如果您想在 JDK 7 下编译（并使用它运行），只需注释掉 if 语句中的所有行。为了实现一个特性，我们必须在这里使用非公共 API。

```
 if (!SystemInfo.isJdk7Above()) {
     // comment all lines out in this if statement.   
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:28:52.737

我可以在JDK 1.6`CachingSurfaceManager`的包中找到该类。`sun.awt.image`我在 1.7 中找不到它。因此，我建议您尝试使用 JDK 1.6 发行版编译和运行您的项目。

# macos - osx lion 从不处于睡眠模式

> ID：12121598
> 
> 赞同：5
> 
> 时间：2012-08-25T11:37:52.277
> 
> 标签：macos, osx-lion, sleep-mode

自从我更新到 OSX Lion 后，我遇到了一个奇怪的问题。我习惯于从不关闭我的 Mac，我只是将它置于休眠/睡眠模式。

但是自从更新到 Lion 后，mac 只是随机启动。白天和黑夜我可以听到 CD 驱动器的声音，当它醒来时。屏幕甚至不亮，它保持黑色，但只要您按下任何键，显示器就会打开。

这真的很烦人，因为它有时会在你的 MAC 启动时在晚上叫醒你。我找不到报告的类似问题。

谢谢塞巴斯蒂安

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T11:50:15.250

鉴于`RTC (Alarm)`唤醒原因，确保`Wake for network activity`已关闭。[请参阅https://discussions.apple.com/thread/3247367?start=0&tstart=0](https://discussions.apple.com/thread/3247367?start=0&tstart=0)线程中的最后一条评论

还要确保您没有安排唤醒。请参阅[http://osxdaily.com/2010/07/17/why-mac-wakes-from-sleep/](http://osxdaily.com/2010/07/17/why-mac-wakes-from-sleep/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-25T11:44:44.670

启动终端并在命令行中键入以下内容：

```
syslog |grep -i "Wake reason" 
```

*   OHC：代表Open Host Controller，通常是USB或Firewire。如果您看到 OHC1 或 OHC2，几乎可以肯定是外部 USB 键盘或鼠标唤醒了机器。
*   EHC：代表Enhanced Host Controller，是另一个USB接口，但也可以是无线设备和蓝牙，因为它们也在Mac的USB总线上。
*   USB：USB 设备唤醒机器
*   LID0：这实际上是 MacBook 或 MacBook Pro 的盖子，当您打开盖子时机器会从睡眠中唤醒。
*   PWRB：PWRB 代表 Power Button，即 Mac 上的物理电源按钮
*   RTC：实时时钟闹钟，通常来自按需唤醒服务，例如当您通过节能器控制面板在 Mac 上安排睡眠和唤醒时。它也可以来自启动设置、用户应用程序、备份和其他预定事件。

希望这可以解决您的问题。

# c++ - C/C++ 中的不固定结构

> ID：12121602
> 
> 赞同：1
> 
> 时间：2012-08-25T11:38:35.800
> 
> 标签：c++, c, windows

我有一个名为 TOWRITE 的结构。我想将结构的内容写入文件。但有一件事是结构成员的大小是不固定的。这取决于从另一个来源接收到的数据。是否可以通过简单的方式编写结构。请参考下面的代码片段。

谢谢

```
typedef struct TOWRITE
{
   DWORD dwHeader;
   WORD datacount;
   LPBYTE lpData;
   WORD checksum;
}

TOWRITE towrite;
ZeroMemory( &towrite, sizeof( TOWRITE ));
towrite.lpData = (LPBYTE) new BYTE[256];

towrite.dwHeader = 0xF1F1E1E1;
towrite.datacount = 256;
towrite.cheksum = 3849;
CopyMemory( towrite.lpData, szTemp, 256 );

.....

.....

.....

f.write( (LPBYTE)&towrite, sizeof(TOWRITE) );
....
....
....
.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T11:52:19.090

```
typedef struct TOWRITE
{
   DWORD dwHeader;
   WORD datacount;
   WORD checksum;
   LPBYTE lpData; //Put the ptr at the end
}

// - sizeof(LPBYTE) avoid the ptr @ to be written
f.write( (LPBYTE)&towrite, sizeof(TOWRITE) - sizeof(LPBYTE));  

// write the ptr data.
// sorry I don't know windows C.
// fix the size of the array element :)
f.write( towrite.lpData, towrite.datacount * sizeof(????)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:50:48.657

> 是否可以通过简单的方式编写结构。
> 
> 我不能使用任何外部库

那就不要。无论是用于 C 的 TPL 还是用于 C++ 的出色的 Boost.Serialization，库*都是最简单的方法。*C 和 C++ 没有用于序列化数据结构的*内置机制。*因此，如果您无法使用库，那么您将不得不自己手动编写序列化代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T11:51:13.007

只需使用两个写调用：

```
f.write ((LPBYTE)&towrite, sizeof(TOWRITE));
f.write ((LPBYTE)&towrite.lpData, towrite.datacount * sizeof(BYTE)); 
```

然后你可以再次阅读它：

```
TOWRITE towrite;
f.read ((LPBYTE)&towrite, sizeof(TOWRITE));
towrite.lpData = (LPBYTE) new BYTE[towrite.datacount];
f.read ((LPBYTE)&towrite.lpData, towrite.datacount * sizeof(BYTE)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T11:44:18.403

您可以尝试 tpl 库：[http ://tpl.sourceforge.net/](http://tpl.sourceforge.net/)

Tpl 是一个用于序列化 C 数据的库。数据以其自然二进制形式存储。API 很小，并试图保持“不碍事”。与使用 XML 相比，tpl 在 C 程序中使用起来更快、更容易。Tpl 可以序列化许多 C 数据类型，包括结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T12:05:52.307

使用这种方法可以避免有时由于结构填充而出现的冗余数据。

```
char* data =malloc(sizeof(towrite)-sizeof(LPBYTE)+var_data);
CopyMemory( data, towrite.dwHeader, sizeof(DWORD) );
CopyMemory( data, towrite.datacount, sizeof(WORD) );
CopyMemory( data, szTemp, datalength);
CopyMemory( data, towrite.checksum, sizeof(WORD) );
f.write( data,sizeof(towrite)-sizeof(LPBYTE)+var_data); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T12:11:50.560

只是我将我的代码修改为

```
typedef struct TOWRITE
{
 DWORD dwHeader;
 WORD datacount;
}

TOWRITE towrite;
LPBYTE lpData;
WORD checksum;

ZeroMemory( &towrite, sizeof( TOWRITE ));
lpData = (LPBYTE) new BYTE[256];

towrite.dwHeader = 0xF1F1E1E1;
towrite.datacount = 256;
cheksum = 3849;
CopyMemory( lpData, szTemp, 256 );

.....

.....

.....

f.write( (LPBYTE)&towrite, sizeof(TOWRITE) );
f.write( (LPBYTE)&lpData, datacount );
f.write( (LPBYTE)&checksum, 2 );
....
....
....
.... 
```

# android - 为什么我的android通知总是消失？

> ID：12121603
> 
> 赞同：0
> 
> 时间：2012-08-25T11:38:35.500
> 
> 标签：android, service, notifications

我在android中的通知有问题我不知道我做错了什么...此通知是在我的服务类（AfterBootService）中创建的，并且在我的接收器类（MyReceiver）代码中完成启动时启动该服务两个类：

*MyReceiver.class*

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;

public class MyReceiver extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        Intent service = new Intent(context, AfterBootService.class);
        context.startService(service);      
    }

} 
```

在这里*AfterBootService.class*

```
public class AfterBootService extends Service { 
    private NotificationManager mNotificationManager;
    private static final int NOTIFICATION_ID = 1;

    @Override
    public void onCreate() {        
        mNotificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
        showNotification();     
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {      
        return START_STICKY;
    }

    @Override
    public void onDestroy() {
        mNotificationManager.cancel(NOTIFICATION_ID);
        Toast.makeText(this, "Service Stopped", Toast.LENGTH_SHORT).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    /**
     * Show a notification while this service is running.
     */
    private void showNotification() {

        int icon = R.drawable.icon_notification_ribbon;
        String tickerText = "Your Notification";
        long when = System.currentTimeMillis();     

        Notification notification = new Notification(icon, tickerText, when);           

        String expandedText = "Sample Text";
        String expandedTitle = "Program Name Here"; 

        Context context = getApplicationContext();

        Intent notificationIntent = new Intent(this, IconActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(this, 0, notificationIntent, 0);        

        notification.flags |= Notification.FLAG_FOREGROUND_SERVICE;
        //notification.flags |= Notification.FLAG_NO_CLEAR;

        // Set the info for the views that show in the notification panel.
        notification.setLatestEventInfo(context, expandedTitle, expandedText, contentIntent);               

        // Send the notification.
        mNotificationManager.notify(NOTIFICATION_ID, notification);

    }
} 
```

现在，当我启动一切正常时，接收器启动服务和服务启动通知，但是当它显示在状态栏中并在通知窗口中显示适当的消息后，它会在一些（2-3）秒后消失......我没有设置任何东西允许该消息消失（我想我不是专家）。我想知道的：

1.  当我的服务正在运行时，如何始终保留该通知消息？
2.  是否可以在不运行启动该通知的服务的情况下保留所有时间通知？为了更仔细地解释它，可以在使用 stopSelf() 销毁服务之后在服务中启动通知并仍然保留该通知消息？

如果需要，我可以在这里粘贴我的清单。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:59:03.343

编辑你的销毁方法

从：

```
 public void onDestroy() {
    mNotificationManager.cancel(NOTIFICATION_ID);
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_SHORT).show();
} 
```

至

```
public void onDestroy() {
    super.onDestroy();

} 
```

因为它取消了您的通知，并且它将一直保留到用户清除它；）

您可以在没有接收方服务的情况下触发通知，并且可以添加

```
 notification.flags = Notification.FLAG_ONGOING_EVENT; 
```

将其设置为不可清除

# php - CodeIgniter 分页类，活动链接不起作用

> ID：12121606
> 
> 赞同：4
> 
> 时间：2012-08-25T11:39:17.327
> 
> 标签：php, codeigniter

我是第一次使用 codeigniter 的分页类。其他一切工作正常，但无论我去哪个页面，活动链接始终是 [1] 并且它不会改变。下一个按钮也总是链接到第一页。想不通为什么！请帮忙 ！

控制器

```
public function unverified_images()
{           
    $data['title'] = 'Choose from the below Images to verify them >>';
    $data['total_rows'] = $this->admin_model->all_unverified_images();

    $config['base_url'] = base_url().'index.php/admin/admin/unverified_images';
    $config['total_rows'] = $data['total_rows']->num_rows();
    $config['per_page'] = 1;
    $config['num_links'] = 8;
    $config['full_tag_open'] = '<div class="pagination">';
    $config['full_tag_close'] = '</div>';

    $this->pagination->initialize($config);

    $data['query'] = $this->db->where('image_status', 0)
                    ->get('tbl_img', $config['per_page'], $this->uri->segment(4));
    $data['links']=$this->pagination->create_links();       
    $this->load->view('admin/image_verify', $data);
}

public function verify_image()
{
    $data['title'] = 'Choose from the below Images to verify them >>';
    $data['msg'] = $this->admin_model->verify_image();
    $data['query'] = $this->admin_model->all_unverified_images();
    redirect('admin/admin/unverified_images');
} 
```

模型

```
function all_unverified_images()
{
    $this->db->where('image_status', 0);
    $query = $this->db->get('tbl_img');
    return $query;
} 
```

看法

```
 <?php echo $links; ?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T13:27:24.127

听起来 CI 无法弄清楚你应该在哪个页面上。尝试为数组添加`uri_segment`或。`cur_page``$config`

应该告诉 CI url的`uri_segment`哪一部分包含当前页码，从您的示例代码中它似乎是`4`（来自查询），而 CI 的默认值为 3。

# android - Android setText 加号

> ID：12121607
> 
> 赞同：-2
> 
> 时间：2012-08-25T11:39:17.717
> 
> 标签：android

我需要做这样的事情：

```
name.setText("Text" + number1 "+" + number2); 
```

为什么它在Android中不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:40:45.333

改成这个`name.setText(" Text " + number1 + " + " + number2);`

两个数之和：`name.setText(" Text " + number1 + " + " + number2 + " Sum :" + (number1+number2));`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:42:22.580

如果要将其显示为文本，则必须编写

```
name.setText("Text " + number1 + "+" + number2); 
```

如果你想总结这两个数字，你必须写

```
name.setText("Text " + (number1+number2)); 
```

# crash - Tomcat 7 崩溃后无法启动

> ID：12121614
> 
> 赞同：0
> 
> 时间：2012-08-25T11:40:52.547
> 
> 标签：crash, overflow, heap-memory, tomcat7

我的问题是，我在 2GB 2Core VPS 上的 Tomcat7 上运行 webapp，当应用程序因 heapoverflow 异常而崩溃时，Tomcat 不会启动或停止。当我尝试通过浏览器访问它时，它只是挂起。

如果我尝试停止，它看起来会停止，但如果我反复这样做，它应该抛出异常，因为它已经停止了，但事实并非如此。只有在 15 分钟后，我才能再次启动它。

我知道我应该解决 heapoverflow 问题，但问题是我根本无法解决问题，因为我使用的框架是 nod 线程安全的，我必须为每个请求创建一个内存重对象的新实例:(我试图通过添加一些基本控制器来解决这个问题，它只允许创建一定数量的对象，其余的请求被重定向到一个抱歉页面。因为它是针对 UNI 项目的，主要目标不是能够为数百个用户提供服务，使框架线程安全并不重要。

我仍然需要知道为什么Tomcat在崩溃后会这样做。如果您能更好地了解如何限制同时在内存中的这些对象的数量，这也会有所帮助。

++++++++++

目前我能看到的唯一解决方案是增加 2GB 的 RAM，这样我就可以一次为 15-20 个用户提供服务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-29T16:00:29.670

通常在tomcat因内存不足错误而崩溃后，它处于不可用状态，必须手动或使用终止该进程

```
catalina.sh stop -force 
```

有关如何防止内存不足错误的讨论，请参阅 [处理“java.lang.OutOfMemoryError: PermGen space”错误](https://stackoverflow.com/questions/88235/dealing-with-java-lang-outofmemoryerror-permgen-space-error)

尽管最终您可能需要在问题上投入更多的硬件。

这也可能派上用场： [Can I auto restart tomcat jvm on out of memory exception](https://stackoverflow.com/questions/7405046/can-i-auto-restart-tomcat-jvm-on-out-of-memory-exception)

# ios - 在 objc 模式中建模许多不同的类

> ID：12121616
> 
> 赞同：0
> 
> 时间：2012-08-25T11:41:28.810
> 
> 标签：ios, design-patterns, model

想象一下，你有 300 个不同类型的单元。每个单位都有不同的特殊能力。例如，如果 unit18 靠近一棵树，它就会变得不可见。Unit33 和 unit212 具有相同的能力。我怎样才能巧妙地为这 300 个独特的单位建模？

我只有两个很烂的想法。要么为每个单元创建一个类，最终得到 300 个类。每次我必须检查时都会有这样的构造：

```
for (Unit *unit in units)
{
    if ([unit isKindOfClass:[Unit1 class]])
    {
      // do something
    }
    else if ([unit isKindOfClass:[Unit2 class]])
    {
      // do something
    }
    else if ([unit isKindOfClass:[Unitxxx class]])
    {
      // do something
    }
} 
```

另一个解决方案是创建一个具有所有能力的单体怪物单元类。

我想到了一个类似这篇文章中解释的设计：http: [//www.learn-cocos2d.com/2010/06/prefer-composition-inheritance/](http://www.learn-cocos2d.com/2010/06/prefer-composition-inheritance/)

我已经尝试过进行这种设计，但没有成功。 ![在此处输入图像描述](../Images/c174829257a5fb671faa013b6a210c85.png)

我感谢每一个建议。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:38:55.883

尝试使用[协议](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProtocols.html)。Unit18、Unit33 和 Unit212 都可以符合 TreeInvisibility 协议。

要检查一个单元是否符合协议，请调用`[unit conformsToProtocol:@protocol(TreeInvisibility)]`.

这里的好处是类可以从多个协议继承。这允许您混合和匹配协议的组合。

* * *

现在我想多了，除了所有协议之外，您仍然需要使用这种方法编写 300 个类。这只是使控制单元更容易，因为您只需要检查不同的协议而不是单个类。

它可能不是您的最佳解决方案，但希望它能帮助您指明一个好的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T14:17:38.600

Ray Wenderlich 刚刚发布了一篇关于基于组件的架构的新博文。这正是我一直在寻找的。 [http://www.raywenderlich.com/24878/introduction-to-component-based-architecture-in-games](http://www.raywenderlich.com/24878/introduction-to-component-based-architecture-in-games)

# python - 为什么我在他们的原始来源列表中找不到这些词？

> ID：12121617
> 
> 赞同：1
> 
> 时间：2012-08-25T11:42:03.890
> 
> 标签：python, regex, python-2.7

我试图在两个不同的文件中找到中文单词，但它没有用，所以我试图在我得到它们的同一个文件中搜索单词，但它似乎也没有找到它？这怎么可能？

```
chin_split = codecs.open("CHIN_split.txt","r+",encoding="utf-8") 
```

[将此](https://stackoverflow.com/questions/2718196/find-all-chinese-text-in-a-string-using-python-and-regex)用于正则表达式代码。

```
import re
for n in re.findall(ur'[\u4e00-\u9fff]+',chin_split.read()):
    print n in re.findall(ur'[\u4e00-\u9fff]+',chin_split.read()) 
```

我怎么只能`falses`打印？？？

仅供参考，我尝试这样做并且有效：

```
for x in [1,2,3,4,5,6,6]:
    print x in [1,2,3,4,5,6,6] 
```

顺便提一句

`chin_split`包含英文希伯来文和中文的单词

一些行来自`chin_split.txt`：

```
 he daodan   核导弹     טיל גרעיני     
 hedantou    核弹头     ראש חץ גרעיני      
 helu    阖庐  "ביתו, מעונו 
 helu    阖庐   שם מלך וו בתקופת ה'אביב והסתיו'"      
 huiwu   会晤  להיפגש עם 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:58:57.083

您正在多次读取文件描述符，这是错误的。

第一个`chin_split.read()`将产生所有内容，但其他（在循环内）只会得到一个空字符串。

该循环没有意义，但如果要保留它，请先将文件内容保存在变量中。

# ios - 在 Facebook SDK 3.0 iOS 中解析 JSON

> ID：12121619
> 
> 赞同：0
> 
> 时间：2012-08-25T11:42:08.450
> 
> 标签：ios, facebook, json, parsing, facebook-graph-api

我试图弄清楚如何解析我使用`graphPath:@"me/home"`.

我假设从返回的数据

```
FBRequest *request = [[FBRequest alloc] initWithSession:FBSession.activeSession
                                              graphPath:@"me/home"]; 
```

不需要解析，我只需要通过字典键提取数据，我发现这很混乱。我试图将数据放入 tableview 中，基本上显示来自 Facebook 的用户新闻提要。这是返回的数据片段：

```
"data": [
    {
        "id": "1156410856_4453627016238",
        "from": {
            "name": "Abbi ☆ Mathews",
            "id": "1156410856"
        },
        "message": "Aalllllllll over this tonight.......be there....gonna be booooom ting!",
        "picture": "http://photos-a.ak.fbcdn.net/hphotos-ak-snc6/185169_4453626736231_812066502_s.jpg",
        "link": "http://www.facebook.com/photo.php?fbid=4453626736231&set=a.1166926850788.88722.1156410856&type=1&relevant_count=1",
        "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yx/r/og8V99JVf8G.gif",
        "actions": [
            {
                "name": "Comment",
                "link": "http://www.facebook.com/1156410856/posts/4453627016238"
            },
            {
                "name": "Like",
                "link": "http://www.facebook.com/1156410856/posts/4453627016238"
            }
        ],
        "privacy": {
            "description": "Friends; Except: Restricted",
            "value": "ALL_FRIENDS"
        },
        "type": "photo",
        "object_id": "4453626736231",
        "application": {
            "name": "Facebook for Android",
            "namespace": "fbandroid",
            "id": "350685531728"
        },
        "created_time": "2012-08-25T14:08:11+0000",
        "updated_time": "2012-08-25T14:08:11+0000",
        "comments": {
            "count": 0
        }
    },
    {
        "id": "7147617470_10150998196922471",
        "from": {
            "name": "The Fratellis",
            "category": "Musician/band",
            "id": "7147617470"
        },
        "picture": "http://platform.ak.fbcdn.net/www/app_full_proxy.php?app=123966167614127&v=1&size=z&cksum=77469f27ebc292a58b3ee8ffb8183582&src=https%3A%2F%2Fd12nfv3nknyhzq.cloudfront.net%2Fimages%2Fartists%2F1208090326852218_medium.jpg",
        "link": "http://www.bandsintown.com/event/5469167/facebook_rsvp?artist=The+Fratellis&came_from=90",
        "name": "Next Month: The Fratellis @ Academy in Oxford, United Kingdom",
        "caption": "Saturday, September 22, 2012 at 7:00pm",
        "properties": [
            {
                "name": "Tickets",
                "text": "http://bnds.in/Nq9prK",
                "href": "http://www.bandsintown.com/event/5469167/buy_tickets?affil_code=fb_7147617470_auto_promote_month_before_targeted&artist=The+Fratellis"
            },
            {
                "name": "More Tour Dates",
                "text": "http://bnds.in/O9NLwd",
                "href": "http://www.bandsintown.com/TheFratellis/facebookapp?came_from=90"
            }
        ],
        "icon": "http://photos-b.ak.fbcdn.net/photos-ak-snc7/v85006/251/123966167614127/app_2_123966167614127_7663.gif",
        "actions": [
            {
                "name": "Comment",
                "link": "http://www.facebook.com/7147617470/posts/10150998196922471"
            },
            {
                "name": "Like",
                "link": "http://www.facebook.com/7147617470/posts/10150998196922471"
            },
            {
                "name": "RSVP",
                "link": "http://www.bandsintown.com/event/5469167/facebook_rsvp?artist=The+Fratellis&came_from=90"
            }
        ],
        "privacy": {
            "description": "United Kingdom",
            "value": "CUSTOM"
        },
        "type": "link",
        "application": {
            "name": "Bandsintown",
            "namespace": "concertsbybit",
            "id": "123966167614127"
        },
        "created_time": "2012-08-25T14:06:39+0000",
        "updated_time": "2012-08-25T14:14:01+0000",
        "likes": {
            "data": [
                {
                    "name": "Derek Moore",
                    "id": "536043117"
                },
                {
                    "name": "Louise Berry",
                    "id": "1310689257"
                },
                {
                    "name": "Jack Barber",
                    "id": "100002857426027"
                },
                {
                    "name": "Becky Hoddinott",
                    "id": "100000168277953"
                }
            ],
            "count": 8
        },
        "comments": {
            "data": [
                {
                    "id": "7147617470_10150998196922471_22699715",
                    "from": {
                        "name": "Becky Hoddinott",
                        "id": "100000168277953"
                    },
                    "message": "Yesssssss! <3",
                    "created_time": "2012-08-25T14:14:01+0000"
                }
            ],
            "count": 1
        }
    },
    { 
```

我一直试图把它放到一个表格视图中，但是 UILabels 只是空白，所以我用什么键来让它工作？

继承人所有代码：

```
-(void)sendRequests {
  FBRequestConnection *connection = [[FBRequestConnection alloc] init];
  FBRequest *request = [[FBRequest alloc] initWithSession:FBSession.activeSession
                                                graphPath:@"me/home"];

  [connection addRequest:request completionHandler:
    ^(FBRequestConnection *connection, id result, NSError *error) {
      if (!error &&  result) {
        NSLog(@"Pre Parsed Data = %@", result);
        NSArray *arrayRsult = [result objectForKey:@"data"];

        for (_FBData in arrayRsult){
          [self.tableView reloadData];
        }
      } else if (error) {             
        NSLog(@"Error Fetching Data = %@", error);
      }
    }];

  [connection start];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:  (NSIndexPath *)indexPath {
  static NSString *CellIdentifier = @"Cell";
  FaceBookCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if (cell == nil) {
    cell = [[FaceBookCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];        
    NSLog(@"Intialise Cell");
  }

  NSMutableDictionary *fbText = [_FBData objectAtIndex:indexPath.row];
  NSString *name = [[fbText objectForKey:@"from"] objectForKey:@"name"];
  NSString *dateCreated = [fbText objectForKey:@"created_time"];
  NSString *message = [fbText objectForKey:@"message"];

  [cell.name setText:name];
  [cell.message setText:message];
  [cell.time setText:dateCreated];

  NSLog(@"Names = %@", name);

  return cell;
} 
```

# sql - 通过连接更新表

> ID：12121621
> 
> 赞同：0
> 
> 时间：2012-08-25T11:42:21.963
> 
> 标签：sql, sql-server-2008

我有一个如下的汇率表

```
FromCurrency    ToCurrency          ValidFrom               ExchangeRate
USD             ZAR         2012-01-05 00:00:00.000         7.7260000000
USD             ZAR         2012-01-04 00:00:00.000         7.6740000000
USD             ZAR         2012-01-03 00:00:00.000         7.4601000000
USD             ZAR         2012-01-02 00:00:00.000         7.7600000000
USD             ZAR         2012-01-01 00:00:00.000         8.0945000000
EUR             NOK         2012-01-05 00:00:00.000         7.5881000000
EUR             NOK         2012-01-04 00:00:00.000         7.5974000000
EUR             NOK         2012-01-03 00:00:00.000         7.4494000000
EUR             NOK         2012-01-02 00:00:00.000         7.6606000000
EUR             NOK         2012-01-01 00:00:00.000         7.7740000000
USD             AED         2012-01-05 00:00:00.000         3.6731000000
USD             AED         2012-01-04 00:00:00.000         3.6731000000 
```

我的主表是

```
Transaction Date    Amount  Currency    FromCurrency
13971   5/27/2011    8000     USD   USD
13971   7/31/2011   -6809.4   ZAR   USD
13971   8/30/2011   -425.59   ZAR   USD
13971   9/27/2011   -6809.4   ZAR   USD
67467   11/8/2011    5000     GBP   GBP
67467   12/21/2011  -5195.06  ZAR   GBP
67467   1/30/2012   -5195.06  ZAR   GBP
81181   4/15/2011    6000     USD   USD
81181   6/28/2011   -5159.03  ZAR   USD
82418   10/21/2011   5000     EUR   EUR
82418   1/27/2012   -3919.97  NOK   EUR 
```

以上是表的示例数据，我的实际表有数百万条记录。我必须将金额与汇率列（来自汇率表）相乘，并用我的表中的货币列更新相应的 FromCurrency（来自汇率表）。

我尝试了很多方法，但找不到解决方案。这里棘手的部分是汇率表中我的表没有匹配的日期。

应该这样应用汇率。如果我的交易日期是 2012 年 2 月 20 日，货币是 ZAR，FromCurrency 是美元，那么我必须从汇率表中选择以下行

```
USD             ZAR         2012-01-02 00:00:00.000         7.7600000000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:49:49.227

```
update transactions
set FromCurrencyAmount = transactions.amount * 
    (select top 1 exchangerate from exchangerates where validfrom <= transactions.date 
       and transactions.fromcurrency = exchangerates.fromcurrency
       and transactions.currency = exchangerates.tocurrency
       order by validfrom desc) 
```

选择

```
select transactions.*, 
    (select top 1 exchangerate from exchangerates where validfrom <= transactions.date 
       and transactions.fromcurrency = exchangerates.fromcurrency
       and transactions.currency = exchangerates.tocurrency
       order by validfrom desc) 
from transactions 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:06:27.187

另一种选择是：

```
select * from
transact t1 join exchRate e1 on t1.FromCurrency = e1.FromCurrency 
and t1.ToCurrency = e1.ToCurrency
and t1.tdate > e1.ValidFrom 
and not exists 
(select 1 from exchRate where ValidFrom < t1.tdate and ValidFrom > e1.ValidFrom) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:50:42.867

我希望明白

```
 SELECT T3.*,
   T4.DATEMAX,
   T4.VALUESELECTED
   FROM   TRANSACTIONS AS T3
   INNER JOIN
   (SELECT T.CURRENCY,
           T.FROMCURRENCY,
           T.DATEMAX,
           T2.EXCHANGERATE AS VALUESELECTED
    FROM   (SELECT   CURRENCY,
                     FROMCURRENCY,
                     MAX(ValidFrom) AS DATEMAX
            FROM     ExChangeRate
            WHERE    ValidFrom <= T3.DATE
            GROUP BY Currency, FromCurrency) AS T
           INNER JOIN
           ExChangeRate AS T2
           ON T.CURRENCY = T2.CURRENCY
              AND T.FROMCURRENCY = T2.FROMCURRENCY
              AND T.DATEMAX = T2.VALIDFROM) AS T4
   ON T4.CURRENCY = T3.CURRENCY
      AND T4.FROMCURRENCY = T3.FROMCURRENCY; 
```

# twitter-bootstrap - Twitter Bootstrap v2.1.0 播放框架 2 - 图片和 JavaScript 插件不起作用

> ID：12121623
> 
> 赞同：2
> 
> 时间：2012-08-25T11:42:27.640
> 
> 标签：twitter-bootstrap, playframework-2.0

我已按照[此处](https://github.com/playframework/Play20/wiki/Tips)的步骤将 bootstrap v2.1.0 与 play 2 框架一起使用，并且我使用了 Build.scala 配置文件。我可以很好地使用基本的 css 函数，对此我很满意。当我尝试使用 glyphicons 图标和 javascript 函数时，我无法使用它们，有没有人遇到过同样的问题？请帮助我。

文件结构：

```
app/assets/stylesheets/bootstrap/ <<--- all less files are here

public/images/bootstrap/ <<-- glyphicons images are here

public/javascripts/    <<--- all javascripts are here 
```

根据教程，我已将 variables.less 修改为：

```
@iconSpritePath:          "/assets/images/bootstrap/glyphicons-halflings.png";
@iconWhiteSpritePath:     "/assets/images/bootstrap/glyphicons-halflings-white.png"; 
```

我不太关心添加 javascript 的代码：

```
for i in `ls javascripts/*`; do echo '<script src="@routes.Assets.at("'$i'")"></script>' | sed 's/\.js/.min.js/g'; done 
```

我需要在哪里准确添加它？

如果我的问题有缺陷，请原谅。我将不胜感激这方面的任何帮助。谢谢。

--------------------[编辑]--------------------------主要看法

```
<!DOCTYPE html>

<html>
    <head>
        <title>@title</title>
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/main.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.at("images/favicon.png")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/bootstrap/bootstrap.min.css")" />
        <script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.js")" type="text/javascript"></script>
    </head>
    <body>
        @content

        <script src="@routes.Assets.at("javascripts/bootstrap-affix.min.js")" type="text/javascript"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-alert.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-button.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-carousel.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-collapse.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-dropdown.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-modal.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-popover.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-scrollspy.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-tab.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-tooltip.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-transition.min.js")"></script>
<script src="@routes.Assets.at("javascripts/bootstrap-typeahead.min.js")"></script>
<script src="@routes.Assets.at("javascripts/jquery-1.7.1.min.min.js")"></script>
    </body>
</html> 
```

----------------------------------------其他观点-------- ----

```
<script type="text/javascript">
        $(function(){
         $('#nishi').popover();
        });
        </script>

  <a href="#" id="nishi" class="btn btn-primary" rel="popover" data-content="this is the body" data-original-title="this shoul be title">Check pop over</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T14:49:11.297

对我来说，你的图像配置没问题，请展示一些 HTML 冷酷你如何使用它。

对于 javascript，在您的 HTML 模板中像这样使用它们（这里是一个示例，包含您需要的 Bootstrap 的 javascript）：

```
<html>
   <head>
      ...
      <script src="@routes.Assets.at("javascripts/bootstrap-dropdown.js")" type="text/javascript"></script>
      <script src="@routes.Assets.at("javascripts/bootstrap-alert.js")" type="text/javascript"></script>
      <!-- Add other needed Bootstrap's javascripts-->
      ...
   </head>
<body>... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T15:35:26.617

使用图像的相对路径：

```
// Sprite icons path
// -------------------------
@iconSpritePath:          "../../images/bootstrap/glyphicons-halflings.png";
@iconWhiteSpritePath:     "../../images/bootstrap/glyphicons-halflings-white.png"; 
```

# php - 从 mysql 读取后转义特殊字符以在 php 中输出

> ID：12121626
> 
> 赞同：-1
> 
> 时间：2012-08-25T11:43:12.737
> 
> 标签：php, sql-server, escaping

我正在尝试从从 mysql 读取的字段中输出结果。该领域有这个。

```
< ? echo "yes"; ? > 
```

但是，当我尝试打印该字段时...它为空。

我必须在输出时逃避它吗？

我不想执行代码..我想将字段中的内容输出为文本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:44:50.150

你必须用[htmlspecialchars()逃脱](http://php.net/manual/en/function.htmlspecialchars.php)

```
$val = htmlspecialchars ('<?php echo "yes"; ?>');
echo $val; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:52:42.443

我猜 htmlspecialchars 就是你想要的：

```
<?php
$str = "<?php echo 'lol'; ?>";
echo htmlspecialchars($str);
?> 
```

它输出`<?php echo 'lol'; ?>`

# c++ - C++ 多线程？

> ID：12121627
> 
> 赞同：1
> 
> 时间：2012-08-25T11:43:15.780
> 
> 标签：c++, multithreading

我最近决定用 C++ 制作一个游戏，但我发现 C++ 中没有多线程支持 :( 有库，但它们依赖于平台，这不是很好。有什么办法可以做这个平台- 在 C++ 中独立？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-25T11:46:14.147

C++11 具有内置的线程支持（作为语言和标准库的一部分）。

[http://en.wikipedia.org/wiki/C%2B%2B11#Multithreading_memory_model](http://en.wikipedia.org/wiki/C%2B%2B11#Multithreading_memory_model)

[http://en.wikipedia.org/wiki/C%2B%2B11#Threading_facilities](http://en.wikipedia.org/wiki/C%2B%2B11#Threading_facilities)

此外， boost::thread （我相信 boost::asio ）确实提供（或多或少）平台独立线程支持（而且它不是唯一提供此功能的库）。

# asp.net-mvc - 注入连接字符串与 IDbConnection

> ID：12121628
> 
> 赞同：4
> 
> 时间：2012-08-25T11:43:30.987
> 
> 标签：asp.net-mvc, dependency-injection, connection-string, structuremap, idbconnection

注入连接字符串与实例的权衡是`IDbConnection`什么？

我使用 StructureMap 将各种服务注入到我的 ASP.NET MVC 应用程序中，其中大部分都需要数据库访问以进行 LINQ-to-SQL 查询。为 IoC注入一个`IDbConnection`似乎比通用连接*字符串*`using`参数更可测试和更容易配置，但如果我没有明确地将连接包装在一个块中，我担心打开的连接会挂起。

我应该注意什么连接池的优点或缺点？

## 注入的连接字符串

```
using (var con = new SqlConnection(InjectedConnectionString))
{
    con.Execute("INSERT INTO Logs (...) VALUES (...)");
    using (var db = new MyDataContext(con))
    {
        var records = from p in db.Products
                      select p;
    }
} 
```

## 注入的 IDbConnection

```
con.Execute("INSERT INTO Logs (...) VALUES (...)");
using (var db = new MyDataContext(InjectedConnection))
{
    var records = from p in db.Products
                  select p;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T14:23:10.827

任何中等复杂的 IoC 容器（结构图）的一个特性是[能够控制](http://abstractcode.com/abstractblog/archive/2010/06/13/structuremap-part-2-ndash-instance-lifecycles.aspx)对象的生命周期。默认情况下，结构映射使用瞬态生命周期。这意味着它为每个对象图创建一个新实例。在实践中，这通常与 per-web-request 相同（除非您在代码中使用 的用法`container.GetInstance<T>()`）。

通过使用结构映射注入数据库连接等宝贵资源，您可以控制它们的生存时间。单个资源可以（如果您选择）在整个 Web 请求中重复使用，或者为每次使用重新创建。

此外，这些选择（以及配置）现在已外部化到注册表中，而不是通过代码散布它们。如果您必须更改连接的创建方式，您只需查看一处。具有单一职责的类始终是首选。

就您的连接池而言，任何 IoC 容器都不会涉及连接池等细节。然而，它们确实对生命有帮助。Structuremap 将调用`Dispose()`任何`IDisposable`对象（嗯，实际上是调用它的解释器）。

**编辑：**再次在连接池中，每个生命周期都有自己的规则来处理对象的处理方式和时间。Transient 依赖于 CLR 来处理，但是`HttpRequestScoped`在每个请求结束时确定性地处理对象。使用`HttpRequestScoped`会阻止您最大化连接数。

# asp.net-mvc-3 - mvc 3 dropdownlistfor - 选定的值始终为空

> ID：12121631
> 
> 赞同：1
> 
> 时间：2012-08-25T11:43:51.897
> 
> 标签：asp.net-mvc-3, razor-declarative-helpers

我有这样的下拉列表：

```
public class RegionLine
    {
        public Nullable<int> regionId { get; set; }
        [Display(Name = "Województwo: ")]
        public string regionName { get; set; }
    } 
```

和控制器：

```
public PartialViewResult getPersonalData()
        {
            var d = rm.GetAllRegionsMapper();
            ViewBag.Regions = new SelectList(rm.GetAllRegionsMapper().ToList(), "regionId", "regionName", "-- select item --");
            var user = um.GetUserByLoginMapper(User.Identity.Name);

            return PartialView("getPersonalData", user);
        }

[HttpPost]
        public PartialViewResult UpdatePersonalData(UserLine user)
        {
            var usr = um.GetUserByLoginMapper(User.Identity.Name);
            ViewBag.Regions = new SelectList(rm.GetAllRegionsMapper().ToList(), "regionId", "regionName",  "-- select item --");

            if (ModelState.IsValid)
            {
                int status = uda.UpdateEmployeesPersonalData(user.UserId, user.PersonalData.Name, user.PersonalData.LastName,
                    user.Address.City, user.Address.Street, user.Address.Region.regionId, user.Address.PostCode,
                    user.PersonalData.KeyWord);
                return PartialView("getLabelsPersonalData", user);
            }

            return PartialView("getPersonalData", usr);
        } 
```

我的下拉列表的视图部分：

```
<tr>
            <td>@Html.LabelFor(a => a.Address.Region.regionName)</td>
            <td>@Html.DropDownListFor(a => a.Address.Region.regionId,    (SelectList)ViewBag.Regions)</td>

        </tr> 
```

当我选择一些项目时，httppost regionId 始终为空。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T15:12:43.117

很有可能`rm.GetAllRegionsMapper().ToList()`返回一个包含 all 的列表`regionId == null`。

另外，**为什么**您将 regionId 定义为可为空的？它始终是您从中选择的键，`DropDownList`或者`0`如果未选择，则没有理由像以往一样拥有它`null`。

您很可能会混淆`regionId`下拉列表中的关键和`regionId`您在选择并回发后尝试获取的关键。调用后者`selectedRegionId`以避免混淆。

希望这几个想法将引导您找到正确的方向并帮助您定位实际问题。

# java - javax.el.PropertyNotFoundException：在类型 mine.domain.OrderHistory 上找不到属性“订单”

> ID：12121634
> 
> 赞同：1
> 
> 时间：2012-08-25T11:43:56.747
> 
> 标签：java, jsp, exception, properties

我正在使用 jaxb 将我的 xml 转换为 java bean。我有 orderhistory 类，它将包含订单列表。我在jsp中获取bean但是当我尝试使用时， `<c:forEach items="${OrderHistory.Order}" var="orderInfo">`我得到`javax.el.PropertyNotFoundException: Property 'Order' not found on type mine.domain.OrderHistory`Here is my orderhistory.java，

```
 @XmlAccessorType(XmlAccessType.FIELD)
    @XmlType(name = "", propOrder = {
    "totalPages",
    "order",
     })
    @XmlRootElement(name = "OrderHistory")
    public class OrderHistory
    implements Serializable
     {

private final static long serialVersionUID = -6026937020915831338L;

protected int totalPages;
@XmlElement(nillable = true)
protected List<Order> order;

public List<Order> getOrder() {
    if (order == null) {
        order = new ArrayList<Order>();
    }
    return this.order;
}

   OrderHistory oh = // i am populating it here 
   TypedProperty responseProperties = new TypedProperty();
responseProperties.put("OrderHistory",oh);
    setResponseProperties(responseProperties); 
```

我可以在 java 端的 orderhistory bean 中看到填充的订单列表，但我无法在 jsp 上访问它。我究竟做错了什么？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:06:10.873

您的属性名称是 order，而不是 Order。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:01:16.957

您在 OrderHistory 类中以小写字母声明了变量“order”，但您正在尝试访问变量“Order”。您可以尝试“${OrderHistory.order}”而不是“${OrderHistory.Order}”

# c - 如何将像素结构加载到 SSE 寄存器中？

> ID：12121640
> 
> 赞同：11
> 
> 时间：2012-08-25T11:44:35.403
> 
> 标签：c, pixel, x86-64, sse, intrinsics

我有一个 8 位像素数据的结构：

```
struct __attribute__((aligned(4))) pixels {
    char r;
    char g;
    char b;
    char a;
} 
```

我想使用 SSE 指令来计算这些像素上的某些东西（即 Paeth 变换）。如何将这些像​​素作为 32 位无符号整数加载到 SSE 寄存器中？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-25T13:57:29.503

### 使用 SSE2 解包无符号像素

好的，`<emmintrin.h>`首先使用 SSE2 整数内在函数将事物加载到寄存器的低 32 位：

```
__m128i xmm0 = _mm_cvtsi32_si128(*(const int*)&pixel); 
```

然后首先将这些 8 位值解压缩为寄存器低 64 位中的 16 位值，并用 0 交错：

```
xmm0 = _mm_unpacklo_epi8(xmm0, _mm_setzero_si128()); 
```

再次将这些 16 位值解压缩为 32 位值：

```
xmm0 = _mm_unpacklo_epi16(xmm0, _mm_setzero_si128()); 
```

您现在应该在 SSE 寄存器的相应 4 个组件中将每个像素作为 32 位整数。

* * *

### 使用 SSE2 解压缩签名像素

我刚刚读到，您希望将这些值作为 32 位有**符号**整数获取，但我想知道 [-127,127] 中的有符号像素有什么意义。但是，如果您的像素值确实可以为负，则与零的交错将不起作用，因为它将负 8 位数字转换为正 16 位数字（因此将您的数字解释为无符号像素值）。负数必须用`1`s 而不是`0`s 扩展，但不幸的是，这必须在逐个组件的基础上动态决定，而 SSE 在这方面并不是那么好。

您可以做的是比较负值的值并使用生成的掩码（幸运的是，它`1...1`用于 true 和`0...0`false）作为 interleavand，而不是零寄存器：

```
xmm0 = _mm_unpacklo_epi8(xmm0, _mm_cmplt_epi8(xmm0, _mm_setzero_si128()));
xmm0 = _mm_unpacklo_epi16(xmm0, _mm_cmplt_epi16(xmm0, _mm_setzero_si128())); 
```

`1`这将正确地用s扩展负数和用s 扩展正数`0`。但是，当然，只有当您的初始 8 位像素值可能为负时，才需要这种额外的开销（可能以 2-4 条额外的 SSE 指令的形式），我仍然对此表示怀疑。但如果确实如此，您应该考虑`signed char`over ，因为后者具有实现定义的符号（如果这些是常见的无符号 [0,255] 像素值，`char`您应该使用相同的方式）。`unsigned char`

* * *

### 使用轮班的替代 SSE2 解包

虽然，正如澄清的那样，您不需要有符号的 8 位到 32 位的转换，但为了完整起见，*哈罗德*对基于 SSE2 的符号扩展有另一个非常好的想法，而不是使用上面提到的基于比较的版本。我们首先将 8 位值解压缩到 32 位值的高字节而不是低字节。由于我们不关心较低的部分，我们只需要再次使用 8 位值，这样我们就不需要额外的零寄存器和额外的移动：

```
xmm0 = _mm_unpacklo_epi8(xmm0, xmm0);
xmm0 = _mm_unpacklo_epi16(xmm0, xmm0); 
```

现在我们只需要执行和算术右移高字节到低字节，这对负值进行正确的符号扩展：

```
xmm0 = _mm_srai_epi32(xmm0, 24); 
```

这应该比我上面的 SSE2 版本更多的指令计数和寄存器效率。

并且由于与上述零扩展相比，它甚至应该在单个像素的指令数上相等（尽管在多个像素上摊销时多 1 条指令）和更高的寄存器效率（由于没有额外的零寄存器），它甚至可能是如果寄存器很少，则用于无符号到有符号的转换，但随后使用逻辑移位 ( `_mm_srli_epi32`) 而不是算术移位。

* * *

### 使用 SSE4 改进解包

感谢*harold*的评论，对于第一个 8 到 32 的转换，甚至还有更好的选择。如果你有 SSE4 支持（准确地说是 SSE4.1），它有指令将寄存器低 32 位中的 4 个压缩 8 位值完全转换为整个寄存器中的 4 个 32 位值，两者都是有符号和无符号 8 位值：

```
xmm0 = _mm_cvtepu8_epi32(xmm0);   //or _mm_cvtepi8_epi32 for signed 8-bit values 
```

* * *

### 使用 SSE2 打包像素

至于后续反转这个变换，首先我们将有符号的 32 位整数打包成有符号的 16 位整数并饱和：

```
xmm0 = _mm_packs_epi32(xmm0, xmm0); 
```

然后我们使用饱和将这些 16 位值打包成无符号的 8 位值：

```
xmm0 = _mm_packus_epi16(xmm0, xmm0); 
```

然后我们终于可以从寄存器的低 32 位中获取我们的像素：

```
*(int*)&pixel = _mm_cvtsi128_si32(xmm0); 
```

由于饱和度，整个过程将自动将任何负值映射到`0`和大于 的任何值`255`，`255`这通常在处理彩色像素时使用。

如果在将 32 位值打包回`unsigned char`s 时确实需要截断而不是饱和，那么您需要自己执行此操作，因为 SSE 仅提供饱和打包指令。但这可以通过做一个简单的来实现：

```
xmm0 = _mm_and_si128(xmm0, _mm_set1_epi32(0xFF)); 
```

就在上述包装程序之前。这应该仅相当于 2 条额外的 SSE 指令，或者在分摊到多个像素时仅相当于 1 条额外的指令。

# android - 在 Android 应用中播放项目内视频

> ID：12121641
> 
> 赞同：0
> 
> 时间：2012-08-25T11:44:37.297
> 
> 标签：android, android-videoview

我正在尝试创建一个应用程序，其中我的 drawable-mdpi 文件夹中有一个视频（d1）。我希望在用户启动应用程序时播放此视频。

这是我第一次尝试这种方式，所以不知道该怎么做。

我的 MainActivity.Java OnCreate 方法代码：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    VideoView vv = (VideoView)this.findViewById(R.id.vv01);
    String uriString = "android.resource://" + getPackageName() + "/" + R.drawable.d1;
    vv.setVideoURI(Uri.parse(uriString));
    vv.start();
} 
```

我的 Activity_Main.xml 文件：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <VideoView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/vv01"
        android:contentDescription="@string/app_name"
        />

</RelativeLayout> 
```

我不确定我使用的 URI 字符串路径是否正确。请建议如何实现它，因为它目前不起作用。此外，如果可能，请建议如何包含播放/暂停按钮和重定向到新视频的“下一个视频”按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:00:58.750

您可以将视频文件放在`assets`文件夹中，然后像这样播放

```
vv.setVideoPath("file:///android_asset/d1.avi");    
vv.start(); 
```

# c++ - 如何在 C++ 中将默认参数设置为类对象？

> ID：12121645
> 
> 赞同：15
> 
> 时间：2012-08-25T11:45:09.617
> 
> 标签：c++

我想将我的函数设置为默认的类对象参数。但是当我尝试这样做时，它在编译中失败了。

```
class base {
 // ...
};

int myfunc(int a, base b = NULL) {
    if (NULL = b) {
        // DO SOMETHING
    } else {
    // DO SOMETHING
    }
} 
```

在这里，当我尝试编译它时，这给了我“默认参数基 b 具有 int 类型”的错误

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-25T11:48:23.373

对象不能`NULL`在 C++ 中。

要将参数设置为默认值，只需使用：

```
int myfunc(int a, base b = base()) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-08-25T12:02:48.033

您在这里有三个明显的选择。

首先，使用重载，以便调用者可以选择是否通过`b`。

```
int myfunc(int a) { ... }
int myfunc(int a, base& b) { ... } 
```

这样您就可以通过`b`而无需使用指针。请注意，您应该创建`b`引用或指针类型以避免对对象进行[切片。](http://en.wikipedia.org/wiki/Object_slicing)

其次，如果您不想要 2 个单独的实现，请创建`b`一个指针，可以将其设置为`NULL`.

```
int myfunc(int a, base* b = NULL) { ... } 
```

第三，您可以使用一些东西来封装可为空的概念，例如[`boost::optional`](http://www.boost.org/doc/libs/1_41_0/libs/optional/doc/html/index.html).

```
int myfunc(int a, boost::optional<base&> b = boost::optional<base&>()) { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-16T00:44:59.900

[@tenfour](https://stackoverflow.com/users/402169/)答案忘了提及另一种可能的方式。您还可以定义一个可以随意构造的全局变量对象，然后将其设置为默认值：

```
#include <iostream>

class MyCustomClassType
{
  int var;

  friend std::ostream &operator<<( 
        std::ostream &output, const MyCustomClassType &my_custom_class_type )
  {
    output << my_custom_class_type.var;
    return output;
  }
};

// C++11 syntax initialization call to the default constructor
MyCustomClassType _my_custom_class_type{};

void function(MyCustomClassType my_custom_class_type = _my_custom_class_type) {
  std::cout << my_custom_class_type << std::endl;
}

/**
 * To build it use:
 *     g++ -std=c++11 main.cpp -o main
 */
int main (int argc, char *argv[]) {
  function();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-01-01T11:21:55.790

一个hack或丑陋的解决方案是从null进行静态转换：

```
#include <iostream>

class MyCustomClassType {
  int var;

  friend std::ostream &operator<<( 
         std::ostream &output, const MyCustomClassType &my_custom_class_type )
  {
    output << my_custom_class_type.var;
    return output;
  }
};

void function(
       MyCustomClassType my_custom_class_type = *static_cast<MyCustomClassType*>( nullptr )
    ) 
{
  std::cout << my_custom_class_type << std::endl;
}

/**
 * To build it use:
 *     g++ -std=c++11 main.cpp -o main
 */
int main (int argc, char *argv[]) {
  function();
} 
```

但是，由于取消引用空指针，运行它会直接给您带来分段错误。我不确定这什么时候有用。

# c# - ASP.NET - 如何检查一个或多个字段值是否已更改

> ID：12121648
> 
> 赞同：2
> 
> 时间：2012-08-25T11:45:54.123
> 
> 标签：c#, asp.net

我有一个网络表格，用于注册新员工。表格中有 3 个部分：个人信息、地址信息、特殊状态。但是整个表单只有一个按钮。当我提交表单时，所有信息都会更新到数据库中。因此对数据库执行了三个更新语句。这些方法是 UpdatePersonalInfo、UpdateAddressInfo 和 UpdateSpStatus。有没有办法检查某个部分中的任何字段是否发生了变化，并且只有在它是真的时才运行更新方法。所以是这样的：

```
if (There's been any change to the personal data of the employee)
{
  UpdatePersonalInfo;
}
if (There's been any change to the address information of the employee)
{
  UpdateAddressInfo;
} 
```

当然我知道，我可以将所有先前的值保存在 PageLoad 中的会话对象中，然后在运行该方法之前一一比较它们。但我想也许有一种更容易做到这一点的神奇方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:24:36.900

不确定这是否是比您已经提到的任何替代方案更好的解决方案，但您可以创建一个默认处理程序来附加到控件的`TextChanged`、`SelectedIndexChanged`等事件，以跟踪哪些事件已更改。

```
List ChangedControls = new List(Of, String);
private void ChangedValue(object sender, System.EventArgs e) {
    WebControl cntrl = (WebControl) sender;
    ChangedControls.Add(cntrl.ID);
} 
```

然后在您的按钮上单击搜索`ChangedControls`相关控件的列表。

# bash - 如何在bash中将一列数字更改为空格分隔的列表

> ID：12121650
> 
> 赞同：3
> 
> 时间：2012-08-25T11:46:00.457
> 
> 标签：bash, command-line, sed, awk

我怎样才能得到这个命令的输出......

```
ps -ef | grep ^apache | grep /sbin/httpd | awk '{print $2}'
16779
16783
16784
16785
16786
16787
16788
16789
16790
16794
16795
16796
16797
16799
16800
16801
16802
16803
16804
16805 
```

...所以单列数字...并将这些数字转换为由“ -p ”分隔的单行数字...这将用于以下...

```
lsof -p 16779 -p 16783 -p 16784 ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:53:25.127

管道进入

```
sed 's/^/-p /' | tr '\n' ' ' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T14:16:11.220

如果你有它，`pidof`会更方便：

```
lsof $(pidof apache | sed 's/^\| / -p /g') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T11:49:31.367

```
tmp="lsof "
for i in `ps -ef | awk '/^apache/ && /httpd/ {print $2}'`;
do
 tmp=${tmp}" -p "${i}" "; 
done
echo $tmp 
```

应该做的伎俩

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T11:52:31.020

您可以通过管道输入`awk`：

```
awk 'BEGIN { printf "lsof" } { printf " -p %s", $1 } END { printf "\n" }' 
```

结果：

```
lsof -p 16779 -p 16783 -p 16784 -p 16785 -p 16786 -p 16787 -p 16788 -p 16789 -p 16790 -p 16794 -p 16795 -p 16796 -p 16797 -p 16799 -p 16800 -p 16801 -p 16802 -p 16803 -p 16804 -p 16805 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-25T13:46:29.280

在命令替换中，管道中的换行符将转换为空格。

```
pids=$( ps -ef | awk '/^apache/ && /\/sbin\/httpd/ {print $2}' ) ) 
```

然后调用 printf 可用于格式化`lsof`. 格式字符串根据需要对包含在`pids`.

```
lsof $( printf "-p %s " $pids ) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T14:56:58.367

**将以下代码添加到您的一个衬里：**

```
awk '{print $0 " -p "}' | tr '\n' '  ' | awk -F " " '{print "lsof -p "  $0}' 
```

**最终代码：**

```
ps -ef | grep ^apache | grep /sbin/httpd | awk '{print $2}' | awk '{print $0 " -p "}' | tr '\n' '  ' | awk -F " " '{print "lsof -p "  $0}' 
```

# java - 将上下文菜单实现到 ListView？

> ID：12121651
> 
> 赞同：1
> 
> 时间：2012-08-25T11:46:05.170
> 
> 标签：java, android, android-menu

我正在尝试为列表制作上下文菜单。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" 
android:orientation="vertical" >

<ListView 
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
</ListView> 
```

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // setContentView(R.layout.activity_main);
    content = new ArrayList<HashMap<String,String>>();

    ListView list = (ListView)findViewById(R.id.list);
    registerForContextMenu(list);
} 
```

当它到达时`registerForContextMenu(list);`，我得到一个运行时错误。

另一件事，当我`android:id="@androidid/list"`在 XML 中使用时，我如何引用该列表？我尝试了 ListView `list = (ListView)findViewById(android.R.id.list);`，但在注册上下文菜单时仍然出错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:40:03.353

检查下面的代码

```
 @Override  
public void onCreate(Bundle savedInstanceState) {  
    super.onCreate(savedInstanceState);  
    setContentView(R.layout.main);  

    lview3 = (ListView) findViewById(R.id.listView3);  

    adapter = new ListviewAdapter(this, month, desc, icons);  
         // set here your listview adapter value
    lview3.setAdapter(adapter);  

    //for context menu
    registerForContextMenu(lview3);

}

//start from here context menu//

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    menu.setHeaderTitle("select");
    menu.add(0, v.getId(), 0, "Action 1");
    menu.add(0, v.getId(), 0, "Action 2");
    menu.add(0, v.getId(), 0, "Action 3");
}

@Override
public boolean onContextItemSelected(MenuItem item) {
    if (item.getTitle() == "Action 1") {
        //
    } else if (item.getTitle() == "Action 2") {
        //
    } else {
        return false;
    }
    return true;
} 
```

祝你好运。

# html - target="_blank" 在 iframe 中不起作用

> ID：12121654
> 
> 赞同：2
> 
> 时间：2012-08-25T11:46:36.827
> 
> 标签：html, iframe

我正在处理 wordpress 媒体库选项卡。在这个 iframe 中，我提供了一个带有 target="_blank" 的链接。我希望此链接指向一个新的浏览器选项卡或窗口，但它会在 iframe 选项卡内打开链接。这是链接：

```
$view = '<a href='.get_permalink($attach->ID).' target="_blank">'.$attach->post_title.'</a>'; 
```

我怎样才能让它进入一个新的浏览器窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:49:24.203

默认情况下，它应该在新选项卡/窗口中打开。

尝试更改为

```
$view = '<a href="'.get_permalink($attach->ID).'" target="_blank">'.$attach->post_title.'</a>'; 
```

在网址中添加引号

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:48:23.160

`_top` 将起作用。这会将最顶层的父级重定向到新的 url。

# php - 在数据库修改脚本中查找并替换所有内容以返回受影响的行

> ID：12121656
> 
> 赞同：0
> 
> 时间：2012-08-25T11:46:56.093
> 
> 标签：php, mysql

我在这里找到了这个非常酷的脚本：[http ://www.brilliantsheep.com/replacing-a-string-in-all-tables-of-a-database-in-mysql/](http://www.brilliantsheep.com/replacing-a-string-in-all-tables-of-a-database-in-mysql/)

我试图修改脚本，以便它显示受影响的行，使用：`mysql_affected_rows() == 1`。这是测试是否`UPDATE`执行任何更新的正确方法吗？

```
<?php

    // Setup the associative array for replacing the old string with new string
    $replace_array = array(
        'test' => 'foo'
    );

    $mysql_link = mysql_connect( 'localhost', 'root', 'password' );
    if( ! $mysql_link) {
        die( 'Could not connect: ' . mysql_error() );
    }

    $mysql_db = mysql_select_db( 'database', $mysql_link );
    if(! $mysql_db ) {
        die( 'Can\'t select database: ' . mysql_error() );
    }

    // Traverse all tables
    $tables_query = 'SHOW TABLES';
    $tables_result = mysql_query( $tables_query );
    $results = array();
    while( $tables_rows = mysql_fetch_row( $tables_result ) ) {
        foreach( $tables_rows as $table ) {

            // Traverse all columns
            $columns_query = 'SHOW COLUMNS FROM ' . $table;
            $columns_result = mysql_query( $columns_query );
            while( $columns_row = mysql_fetch_assoc( $columns_result ) ) {

                $column = $columns_row['Field'];
                $type = $columns_row['Type'];

                // Process only text-based columns
                if( strpos( $type, 'char' ) !== false || strpos( $type, 'text' ) !== false ) {
                    // Process all replacements for the specific column
                    foreach( $replace_array as $old_string => $new_string ) {
                        $replace_query = 'UPDATE ' . $table .
                            ' SET ' .  $column . ' = REPLACE(' . $column .
                            ', \'' . $old_string . '\', \'' . $new_string . '\')';
                        mysql_query( $replace_query );
                        if(mysql_affected_rows() == 1){
                            $results[] = $replace_query;
                        }
                    }
                }
            }
        }
    }

    mysql_free_result( $columns_result );
    mysql_free_result( $tables_result );
    mysql_close( $mysql_link );

    echo 'Rows affected!';

    echo '<ul>';
    foreach($results as $i){
        echo '<li>' . $i . '</li>';
    }
    echo '</ul>';

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T11:59:45.223

`mysql_affected_rows()`将返回受影响的行数，因此您可能想要寻找`> 0`而不是`== 1`. 我会*非常*小心地处理这个脚本，它几乎不可避免地会做一些你不希望它做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:23:58.130

除了Tieran所说的之外，您还可以[`UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/update.html)以更简单的方式进行

```
$replace_query = 'UPDATE ' . $table .
                 ' SET ' .  $column . " = '$new_string'" ; 
```

# interop - CORBA 服务器和客户端的 IDL 允许有什么区别？

> ID：12121661
> 
> 赞同：3
> 
> 时间：2012-08-25T11:47:34.543
> 
> 标签：interop, corba, idl, iiop

[到目前为止，我认为我所知道](https://groups.google.com/forum/#!topic/comp.object.corba/r4v_vutrIfA)的是，[CORBA 规范](http://www.omg.org/spec/CORBA/3.2/)本身不允许服务器程序使用的 IDL 和客户端程序使用的 IDL 之间存在任何差异。

然而，**在实践中**，某些差异*必然会*（相当）普遍起作用，因为底层的通信机制很可能是 GIOP（至少是 IIOP），并且某些差异必然无法通过 IIOP 检测到。

我想确定的是，只要使用 GIOP/IIOP，在任意 ORB 之间普遍允许服务器和客户端 IDL 之间存在*哪些差异。*

例如：到目前为止，我**认为**它适用于：

*   只要不触及客户端 IDL 知道的类型或将任何未知的新类型发送回客户端，就可以将任何类型/接口添加到服务器 IDL。
*   将方法添加到服务器端的现有接口——客户端应该能够继续使用此接口调用对象，即使他的 IDL 没有列出所述方法。（这似乎在[这里得到了肯定的回答。](https://stackoverflow.com/q/36890/321013)）
*   只要客户端永远不会看到这个新值，就在枚举的*末尾*添加一个成员。
*   [将成员添加到 union](https://groups.google.com/forum/#!topic/comp.object.corba/r4v_vutrIfA)，只要客户端永远不会看到此 Union 类型并将鉴别器设置为新值。

*我的目标*是得到一个可以在现有 IDL 中做的事情的简短列表，用新的东西扩展“服务器”，而不必用修改后的 IDL 重新编译现有的客户端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-13T13:13:10.267

*   是的，服务器和客户端方法集不需要完全匹配，因为方法是按名称（GIOP 消息中的操作字段）访问的，并且是独立的。换句话说，GIOP 调用将方法名称包含为字符串，然后参数按照此参数的预期进行编码。请参阅[CORBA tie](http://www.doc.ic.ac.uk/~awl03/cgi-bin/trac.cgi/miro/browser/trunk/gcc/libjava/classpath/examples/gnu/classpath/examples/CORBA/swing/x5/_GameManagerImpl_Tie.java?rev=31)和[CORBA stub](http://www.doc.ic.ac.uk/~awl03/cgi-bin/trac.cgi/miro/browser/trunk/gcc/libjava/classpath/examples/gnu/classpath/examples/CORBA/swing/x5/_GameManager_Stub.java?rev=31)的示例。

*   是的，如果您创建并导出一个新界面，它只是一个新界面。它可以独立于其他名称服务绑定到任何名称服务，不知道这个新接口的客户端将无法使用它。将能够使用绑定到同名服务的已知类型。

*   是的，GIOP 将枚举写入无符号长整数，第一个值始终编码为零，连续的标识符采用升序数值，按照从左到右的声明顺序。因此，添加新的枚举标识但不删除也不重新排序是完全安全的。

阅读[GIOP 规范](http://www2.informatik.hu-berlin.de/~obecker/Lehre/SS2001/CORBA/specs/01-02-51.pdf)，有很大帮助。查看由 IDL 编译器生成的代码以及在 IDL 中更改某些内容时它如何更改也非常好。

当然，仅仅因为缺乏注意而使用不匹配的 IDL 并不是一个好习惯，因为它也很容易引入不兼容的更改。这可能只有在您无法再访问和更新已发布给用户的客户端时才有意义。

# android - 当 OnItemSelected 更改其他视图时，Coverflow 会在滚动时自行居中

> ID：12121663
> 
> 赞同：0
> 
> 时间：2012-08-25T11:47:40.660
> 
> 标签：android, gallery, coverflow, baseadapter, android-cursoradapter

亲爱的 Stackoverflow 社区，

我有一个很奇怪的问题。首先，我构建了某种“选择器”活动，它只不过是左侧的 WheelView，中心的 Coverflow 和下方的另一个（较小的）coverflow。顺便提一句。CoverFlow 是一个包含一些逻辑的图库。

中心覆盖流使用 BaseAdapter。我创建了一组列表，每次我的coverflow 获取新内容时，我都会使用其中一个列表创建一个新的 BaseAdapter 实例。在我的情况下，当在下部 CoverFlow 中选择一个项目时，这是完成的。所以我实现了一个 OnItemSelectedListener，以检查何时发生。滚动此封面流会导致视图始终“notifyDataSetChanged”并在某些情况下更改适配器。现在这就像一个魅力。

因为我在这个选择器（中心覆盖流）中有很多对象，所以我决定继续使用 CursorAdapter 来提高性能。现在 CursorAdapter 似乎没有 notifyDataSetChanged() 方法，所以我复制了与 BaseAdapter 相同的代码逻辑并将其用于我的。较低的 Coverflow 仍然使用相同的适配器（在本例中为 ListAdapter，实现了 SpinnerAdapter）。现在 - 当执行完全相同的逻辑时，在中心 CoverFlowAdapter 上的每个 notifyDataSetChanged() 调用之后，下部 Coverflow 会自行居中。我真的不明白。我不会在这里发布整个逻辑，因为那将是大约 5 个类，但问题在于这一点：

```
 private OnItemSelectedListener itemSelListener = new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
            long arg3) {
//          if(!selectedByClicking){
            switchModelType(arg1.getId());          
//          }
    }

private void switchModelType(int id){
    int oldMode = mode;
    mode = id;
    for(int i = 0; i < currentColors.length; i++){
        if(currentColors[i] != null)
        currentColors[i].isSelected = false;
    }
    if(currentColors[mode] != null)
    currentColors[mode].isSelected = true;
    if(coverFlow.getAdapter() != null){
        ((SelectionObjectCursorAdapter)     
            coverFlow.getAdapter()).notifyDataSetChanged();
             //         if(decorIsWooden)
             //             checkIfWoodDecorAdapter(oldMode);

    }
} 
```

在这部分代码的任何地方都没有触及到较低的 CoverFlow，也没有在类中的任何地方触及。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:36:24.130

没关系..虽然我搜索了这个错误好几天，但我现在得到了解决方案。

问题是，我以编程方式创建了较低的封面流，因此以编程方式使用 layout_height 设置两者的高度。每次我更改coverflow的适配器时，它都会调用它的measure方法，因此也会调用下部coverflow的measure方法（因为它们是通过layout_height链接的）。在 XML 中设置这个，将 layout_sum 添加到超线性布局中就解决了这个问题。

感谢上帝..

# fluent-nhibernate - 使用 Fluent nHibernate AutoMapping 覆盖 Id 列的自动增量初始值

> ID：12121674
> 
> 赞同：0
> 
> 时间：2012-08-25T11:48:53.083
> 
> 标签：fluent-nhibernate, auto-increment, automapping

我正在为一个项目使用 Fluent nHibernate AutoMapping，并希望将架构中一个表的初始 Id 值从 1 更改为 1000（我希望保留所有其他表的默认行为，即从 1 开始的 Id） .

我猜我需要在我的 IIDConvetion 中指定这个，但不知道怎么做？

```
public class PrimaryKeyConvention : IIdConvention
{
    public void Apply(IIdentityInstance instance)
    {
        instance.Column(instance.EntityType.Name + "Id");
        instance.GeneratedBy.Native();
    }
} 
```

非常感谢被指出正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T08:48:59.867

AFAIK 尚不支持此功能。最好的办法是`IAuxiliaryDatabaseObject`使用 sql 实现标识的起始值并将其设置为 1000，然后将其作为最后一个元素添加到配置对象中。

# java - iPhone、iPad 和 Windows Phone 应用程序部署为什么？

> ID：12121679
> 
> 赞同：3
> 
> 时间：2012-08-25T11:49:25.470
> 
> 标签：java, android, iphone, deployment, window-position

我的理解是Android应用程序都编译并构建成APK文件，就像可执行的JAR。这些是 Android 开发人员在 Android Marketplace 上托管并由用户在销售点下载的文件。

iPhone、iPad 和 Windows Phone 设备的 APK 等效项是什么？令人惊讶的是，关于此的公开信息很少甚至*没有*（至少不必下载和安装相应的 SDK，我不应该这样做！）。寻找开发人员必须上传到相应市场/应用商店的文件类型，该文件类型被相应平台上的 appp 用户拉下并在客户端运行。

如果有人碰巧知道，也对 Blackberry、Nook 和 Kindle 感兴趣。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T11:54:32.430

1.  iOS =`.ipa`
2.  安卓 =`.APK`
3.  视窗电话 =`.XAP`
4.  黑莓 = `.cod`/`.jad`
5.  Kindle =`.azw`用于书籍`.txt`、 和`.MOBI`
6.  Nook = `.APK`（据我所知）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T12:08:31.700

带有一些信息链接的文件格式；

iOS - Android、Nook、[Kindle Fire](http://www.netnavi.tv/2011/12/28/getting-started-with-kindle-fire-and-android-development/) - Windows Phone - 黑莓 -和[`ipa`](http://en.wikipedia.org/wiki/.ipa_(file_extension))
[`apk`](http://en.wikipedia.org/wiki/APK_(file_format))
[`xap`](http://beyondrelational.com/modules/2/blogs/433/posts/12013/silverlight-tutorial-what-is-xap-file.aspx)
[`jad`](http://en.wikipedia.org/wiki/JAD_(file_format))[`cod`](http://drbolsen.wordpress.com/2006/07/26/blackberry-cod-file-format/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T11:51:49.330

```
Android for APK
Iphone for ipa
windows phone for  xap
Blackberry for .cod files

application package file (APK) .

An .ipa file is an iPhone application archive file which stores an iPhone app. 
```

应用程序包 ( . XAP ) - 在 Windows Phone 7 中用于安装程序。是一种压缩档案的文件格式，实际上是-zip档案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T11:51:52.957

```
android = apk
iphone/ipad = ipa
windows phone = xap 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-29T18:08:54.013

.xap 是根据 Wikipedia 压缩的 .zip。此外，所有 .xap 都被重新制作成 .appx，这是新的 windows phone 格式，也适用于 windows 8.1。因此，如果您没有 Windows 8.1（或更高版本），您将无法运行 Windows 应用程序，甚至是非 Windows 手机应用程序

# android - 从 Android 照片库中获取所有图像

> ID：12121690
> 
> 赞同：1
> 
> 时间：2012-08-25T11:50:37.137
> 
> 标签：android, android-layout, android-intent

我想从 android 照片库中获取我的应用程序中的所有图像。因为我想在将图像保存到 android 库后再次将其加载到我的应用程序中。为了将我的图像保存到图库中，我使用以下方法。

```
MediaStore.Images.Media.insertImage(ContentResolverObj, bitMap, "uniqueTitle", "description"); 
```

现在，我想以编程方式将所有图像提取到我的应用程序中，并希望在 tile 的基础上获得高于保存的图像。这里有两个问题。1st：我可以从 android 的照片库中获取所有图像吗？第二：我可以在获取后读取单张照片的详细信息，例如标题等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:01:42.170

通过使用此代码，我可以在 gridview 中显示手机图库图像，具体取决于您的要求更改此..

```
public class MyPhoneGallery extends Activity  {

  /** Called when the activity is first created. */
  private Cursor imagecursor, actualimagecursor;
  private int image_column_index, actual_image_column_index;
  GridView imagegrid;
  private int count;
  @Override
  public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gallery);
        init_phone_image_grid();
  }
  private void init_phone_image_grid() {
        String[] img = { MediaStore.Images.Thumbnails._ID };
        imagecursor = managedQuery(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, img, null,null, MediaStore.Images.Thumbnails.IMAGE_ID + "");
        image_column_index = imagecursor.getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);
        count = imagecursor.getCount(); 
        imagegrid = (GridView) findViewById(R.id.PhoneImageGrid);
        imagegrid.setAdapter(new ImageAdapter(getApplicationContext()));
        imagegrid.setOnItemClickListener(new OnItemClickListener() {
          public void onItemClick(AdapterView<?> parent, View v,int position, long id) {

              System.gc();
              String[] proj = { MediaStore.Images.Media.DATA };
              actualimagecursor = managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, proj,null, null, null);
              actual_image_column_index = actualimagecursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
              actualimagecursor.moveToPosition(position);
              String i = actualimagecursor.getString(actual_image_column_index);
              System.gc();
              Intent intent = new Intent(getApplicationContext(), ViewImage.class);
              intent.putExtra("filename", i);
              startActivity(intent);

           }
      });
  }

  public class ImageAdapter extends BaseAdapter {
        private Context mContext;
        public ImageAdapter(Context c) {
              mContext = c;
         }
        public int mygetItemId(int position) {
            // TODO Auto-generated method stub
            return 0;
        }
        public int getCount() {
              return count;
        }
        public Object getItem(int position) {
              return position;
        }
        public long getItemId(int position) {
              return position;
        }
        public View getView(int position,View convertView,ViewGroup parent) {
              System.gc();
              ImageView i = new ImageView(mContext.getApplicationContext());
              if (convertView == null) {
                    imagecursor.moveToPosition(position);
                    int id = imagecursor.getInt(image_column_index);
                    i.setImageURI(Uri.withAppendedPath(MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, ""+ id));
                    i.setScaleType(ImageView.ScaleType.CENTER_CROP);
                    i.setLayoutParams(new GridView.LayoutParams(125, 125));
              }
              else {
                    i = (ImageView) convertView;
              }
              return i;
        }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T06:13:22.803

我使用了这段代码并得到了图像，也许它对你有用

```
final String[] columns = { MediaStore.Images.Media.DATA, MediaStore.Images.Media._ID };
final String orderBy = MediaStore.Images.Media._ID;
imagecursor = getActivity().managedQuery(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, columns, null, null, orderBy);

int image_column_index = imagecursor.getColumnIndex(MediaStore.Images.Media._ID);

this.count = imagecursor.getCount();
this.arrPath = new String[this.count];
ids = new int[count];
for (int i = 0; i < this.count; i++) {
        imagecursor.moveToPosition(i);
        ids[i] = imagecursor.getInt(image_column_index);
        int dataColumnIndex = imagecursor.getColumnIndex(MediaStore.Images.Media.DATA);
        arrPath[i] = imagecursor.getString(dataColumnIndex);
    } 
```

您可以从下面的适配器和 gridview 的 URL [源代码中找到适配器代码 gridview 和 setadapter](http://iandroiddeveloperphotogallery.blogspot.in/)

# objective-c - 以编程方式创建具有特定大小的 NSWindow 失败

> ID：12121691
> 
> 赞同：0
> 
> 时间：2012-08-25T11:50:38.970
> 
> 标签：objective-c, cocoa, nswindow

我正在尝试以编程方式创建一个靠近鼠标光标的无边框 NSWindow 并使用它应该显示的图像大小。但是我总是得到一个更大的窗口（每边大约是它应该大小的三倍）！我仔细检查了我的 imageObj 的大小是否正确，并且所有 NSSize 和 NSRect 结构都是使用正确的值创建的。注释掉的行也不起作用（但是哪个是正确的？）

我已经搜索过这个网站，但我找不到任何类似的问题......我做错了什么？这是我的代码：

```
NSString* imageName = [[NSBundle mainBundle] pathForResource:@"os_unknown" ofType:@"icns"];
NSImage* imageObj = [[NSImage alloc] initWithContentsOfFile:imageName];
[view setImage:imageObj];

NSSize s = [imageObj size];
NSPoint p = [NSEvent mouseLocation];
NSRect r = [NSWindow frameRectForContentRect:NSMakeRect(p.x, p.y, s.width, s.height)
                                   styleMask:NSBorderlessWindowMask];
//NSRect r = {p, s};

if (win) [win release];
win = [[NSWindow alloc] initWithContentRect:r
                                  styleMask:NSBorderlessWindowMask
                                    backing:NSBackingStoreBuffered
                                      defer:false];
[win setLevel:kCGUtilityWindowLevel];

[view setBounds:NSMakeRect(0, 0, s.width, s.height)];
[[win contentView] addSubview:view];
[win orderFront:sender]; 
```

这里 *win 是一个 NSWindow 而 *view 是一个 NSImageView。两者都在我的源文件之上声明。我正在运行 Snow Leopard，因此任何严格大于 10.6.8 的代码都不起作用（已经尝试过）。

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T00:27:33.793

解决了！`NSImageView *view`是在 Interface Builder 中创建的。我得到的尺寸是在那里设置的尺寸，不管我用什么代码来调整它。通过以`NSImageView`编程方式创建一切都很好！

特别感谢让我思考并得到解决方案的*rdelmar ！*

# objective-c - 清理App全局资源的最佳地点？

> ID：12121693
> 
> 赞同：2
> 
> 时间：2012-08-25T11:50:42.997
> 
> 标签：objective-c, macos, nsdocument, nsapplication-delegate

**在您看到以下问题中的单词之前，请**停止按**`retainCount`OK ，请跳到底部的**EDIT ，我已声明我已停止使用它。****

 **我的 Cocoa App 使用[MRR](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)创建了许多全局资源，我在调用`main()`之前加载了这些资源。`NSApplicationMain()`由于`NSApplicationMain()`没有返回，我已经使用 对这些资源进行了清理`atexit()`，如下所示：

```
atexit(cleanup);

if (![CocoaUtil initCocoaUtil] ||
    ![PreferenceController initPreferenceController] ||
    ![ResourceManager initResourceManager])
{
    criticalAlertPanel(@"Failed to initialize application",
                       @"Failed to initialize application");
    return 4;
}

retval = NSApplicationMain(argc, (const char **)argv); 
```

然而，在我的子类中的`cleanup()`任何视图被调用之前被调用（我没有日志消息来显示这一点），因此全局资源中对象的引用计数有时是. 我过于谨慎并试图通过使用这种方法来释放我的全局资源来预防内存泄漏：`NSDocument``dealloc``> 1`

```
+ (void)fullRelease:(id)obj
             format:(NSString *)format, ...
{
    if (obj == nil)
        return;

    NSUInteger retainCount = [obj retainCount];
    if (retainCount > 1)
    {
        va_list va;
        va_start(va, format);
        NSString *objDesc = [[NSString alloc] initWithFormat:format arguments:va];
        logwrn(@"%@ has a reference count of %lu", objDesc, retainCount);
        [objDesc release];
    }

    while (retainCount > 0)
    {
        [obj release];
        retainCount--;
    }
} 
```

我的日志显示以下内容：

```
12:15:04.954 INF -[AppController applicationDidFinishLaunching:] Application launched
12:15:06.702 INF -[AppController applicationShouldTerminate:] Application terminating
12:15:06.703 INF -[AppController applicationWillTerminate:] Application terminating
12:15:06.705 DBG cleanup Cleaning-up
12:15:06.705 INF +[ResourceManager finiResourceManager] Cleaning up
12:15:06.709 WRN +[CocoaUtil fullRelease:format:] _images[2] has a reference count of 2
12:15:06.709 WRN +[CocoaUtil fullRelease:format:] _images[3] has a reference count of 2
12:15:06.709 WRN +[CocoaUtil fullRelease:format:] _images[4] has a reference count of 2
12:15:06.710 WRN +[CocoaUtil fullRelease:format:] _images[5] has a reference count of 2
12:15:06.710 WRN +[CocoaUtil fullRelease:format:] _images[6] has a reference count of 2
12:15:06.710 WRN +[CocoaUtil fullRelease:format:] _images[7] has a reference count of 2
12:15:06.711 WRN +[CocoaUtil fullRelease:format:] _images[8] has a reference count of 2
12:15:06.711 WRN +[CocoaUtil fullRelease:format:] _images[9] has a reference count of 2
12:15:06.721 DBG +[PreferenceController finiPreferenceController] Cleaning up
12:15:06.721 DBG +[CocoaUtil finiCocoaUtil] Cleaning up 
```

我的问题（终于！）是：

`NSDocument`有没有办法确保在所有实例都被销毁后清理我的全局资源并停止收到这些假阴性？

**编辑**：我已经取消了`fullRelease`调用，只是`release`对我的资源执行了正常操作，并且 Instruments 没有检测到任何内存泄漏，所以一切正常，但我很好奇为什么这些`NSDocument`对象在调用之前似乎没有被释放`atexit()`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T12:06:33.903

***不要发布你不拥有的东西！***

每个保留都属于其他人。仅发送`release`到对象以平衡对`new`、`alloc`、`copy`或`retain`(NARC) 的调用。这种行为将不可避免地导致生产代码崩溃。

看起来你想确保一个对象被释放而不是简单地处理。如果您拥有该对象，请释放它一次；对它的其他引用属于其他对象。您的代码中可能*确实*存在内存泄漏（我们不能仅从此代码示例中判断），但通常可以通过静态分析器、仪器和一些肘部油脂找到这些泄漏。

更重要的是：当您的进程退出时，操作系统会为您释放所有内存。这不是 C 标准的一部分，但它只是 OS X 和 iOS 的操作方式，它是支持 Objective-C 的其他平台上的预期行为。因此，当您的进程退出时，您不必做任何特殊的清理工作，除非可能将文件写入磁盘或类似的东西。事实上，*许多 Cocoa 应用程序不会费心去释放它们的应用程序委托所拥有的任何东西*，因为让操作系统转储内存比调用`-release`数千个对象要快。

***不要打电话`-retainCount`！***

它在说谎。干净利落。它包括 Cocoa 使用的临时引用，最重要的是，您*永远不*应该尝试干扰这些引用。*`-retainCount`是一个有毒的符号。*

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-25T16:50:50.660

一些注意事项：

*   不要使用`retainCount`；有关详细信息，请参阅[http://whentouseretaincount.com上的链接](http://whentouseretaincount.com)

*   atexit() 处理程序在高级编程中毫无用处。调用时，应用程序处于相对未定义的状态。框架将拆除一些东西，但正如您所指出的，将有大量的对象永远不会被释放。在某些情况下，可能根本不会调用 atexit()。

*   您不能依赖应用程序终止来执行任何类型的所需状态清理。用户可能会强制退出您的应用程序。系统也可能会被强制重启。终止行为应被视为一种优化；你能做一些能让下一次发射更快的事情吗？

*   在应用程序终止期间，无需释放任何东西。系统将在终止时回收所有应用程序资源，无论应用程序状态如何。换句话说，*终止时留在内存中的对象不是泄漏*。

*   一般来说，“泄漏”检测工具只能用于修复明显的问题。泄漏仅检测内存泄漏。它无法检测到内存增加，其中增加的对象仍以某种方式连接到全局。吸积在技术上不是泄漏，但它们很容易成为问题的巨大来源。

*   [HeapShot 分析](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)将检测泄漏和内存增加。

*   考虑迁移您的应用以使用 ARC。ARC 的指导模式之一是编译器完全了解对象的生命周期。在 MRR 下不明确的表达式在 ARC 下是不允许的（在某些情况下没有适当的标记）。同样，ARC 编译器和分析器可以对您的代码进行更深入的分析，发现许多可能非常微妙的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-25T12:39:35.317

禁用突然终止，不要使用全局变量，只使用常规引用计数规则。在某些情况下，您需要中断强循环引用或手动清除对象的实例变量。最后，在 main 返回之前暂停/中断可能会更有帮助，然后运行`heap`以查看此阶段真正存在的内容（泄漏）。

> 我过于谨慎，并试图通过使用这种方法来释放我的全局资源来预防内存泄漏。

你不应该像这样清除 - 你知道得更好:)

但是，定位和销毁您可以控制的所有引用/对象/分配实际上是一种非常好的做法，以确保您的程序运行良好、可重用，并作为监控应用程序变化时回归的良好指标。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-25T16:25:55.787

正如所有其他人所说：*只*释放你拥有的东西。您的应用程序现在可能不会为您崩溃，但您只是走运了。当你这样做时，它可能会在另一台 Mac 上崩溃，或者在两个小时内，或者其他什么时候。

如果您有一个稀缺资源，某个对象持有该资源*确实*需要注销（例如，与另一台服务器的网络会话，如果未正确向其发送签核消息将导致服务器等待您，保留一些您返回的内部状态），您应该将其构建*到*您的对象中，而不是在您的对象被释放时这样做。

例如，在您的应用程序退出之前，Mac OS X 会发送一个通知，即 NSApplicationWillTerminate。让你的对象为此注册，当它得到它时，让它向服务器发送再见（并记住它已经这样做了）。这样，当您的应用程序退出时，但例如应用程序委托仍持有该对象时，您仍然可以确定会发生签核。

但是您可能还应该检查您是否已经在-dealloc 中注销。有一天，您可能会添加对多个服务器的支持，然后当您发布一个服务器时，您希望它发送再见，即使您的应用程序不会退出。但*只有*在您还没有完成的情况下才进行签字。

当您在内存中有一些数据要在退出前写下时也是如此（例如，这就是 NSUserDefaults 所做的以确保快速访问首选项，但在您退出之前它仍会被写入磁盘）。

但这样的案例真的很少见。通常 NSDocument 会在需要时调用您写入磁盘，并且通常服务器会在连接断开时通知并自行清理。所以你真的*不应该*发布不属于你的东西。您只会导致某些用户在退出时崩溃。它给人的印象非常糟糕，并且可能导致您的应用程序在有机会保存一些数据*之前实际上失败，从而使事情变得更糟。***

# variables - awk 理解变量

> ID：12121697
> 
> 赞同：0
> 
> 时间：2012-08-25T11:51:08.730
> 
> 标签：variables, awk

awk 中的`NF`,`RF`​​ ,等词（可能是变量？）是什么意思？`FS`我相信它们有一些预先定义的含义和用法。

请让我知道，如果初学者必须知道更多这样的变量？

-谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:48:06.067

这些是内置变量，在 awk 中它们具有特殊含义。[GAWK 参考手册中](http://www.gnu.org/software/gawk/manual/gawk.html#Built_002din-Variables)有部分内容涵盖了该主题。尤其：

**FS**：

> 这是输入字段分隔符（请参阅字段分隔符）。该值是与输入记录中的字段之间的分隔符匹配的单字符串或多字符正则表达式。如果该值为空字符串 ("")，则记录中的每个字符都将成为一个单独的字段。（此行为是 gawk 扩展。POSIX awk 未指定 FS 为空字符串时的行为。尽管如此，其他一些版本的 awk 也对 "" 进行了特殊处理。）
> 
> 默认值为“”，由一个空格组成的字符串。作为一个特殊例外，此值意味着任何空格、TAB 和/或换行符的序列都是单个分隔符。它还会导致忽略记录开头和结尾处的空格、制表符和换行符。

**NF**：

> 当前输入记录中的字段数。每次读取新记录、创建新字段或 $0 更改时都会设置 NF（请参阅字段）。
> 
> 与本节中描述的大多数变量不同，为 NF 赋值可能会影响 awk 的内部工作。特别是，分配给 NF 可用于从当前记录中创建或删除字段。请参阅更改字段。

# c++ - 如果我使用 /Yc，Visual C++ 是否会检查是否需要重新生成其 pch

> ID：12121700
> 
> 赞同：-1
> 
> 时间：2012-08-25T11:51:36.763
> 
> 标签：c++, visual-studio-2010, precompiled-headers, pch, stdafx.h

似乎当我将选项设置为 /Yu 时，它只使用任何 pch，而不检查它是否需要更新，这意味着它将保留它预编译的标头列表并检查自上次以来这些文件是否已更新它们被预编译的时间。

但是当我 /Yc 时，它只是在我每次构建我的项目时重新预编译。

我不太确定 Visual C++ 是否能像我想象的那样处理这些行为，或者我是否犯了编辑 .h 文件的错误或其他错误。

那么我是否应该在每次更新标头时设置 /Yc、构建、重置为 /Yu、继续迭代，但重置为 /Yc、重建，然后重置为 /YU？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:23:55.813

您设置一个包含您希望预编译使用的头`/Yc`文件的文件，如果需要，它将生成 pch 文件（即，pch 文件相对于头文件已过时）。然后将包含它的其他文件设置为 use `/Yu`，它们使用您的第一个文件生成的预编译头文件。

如果您使用 Visual Studio 向导生成带有预编译标头的控制台项目，您将看到这一点。该`stdafx.cpp`文件包括`stdafx.h`，并已`/Yc`设置为其生成一个 pch 文件；然后该`main.cpp`文件`stdafx.h`也包含，但已`/Yu`设置，因此它使用 pch 文件。

（起初我发现文档的预编译头部分有点不透明，但是一旦我设置了预编译头并且我看到它们工作，它就开始变得更有意义了。）

# android - WebViewLoadUrl() 在后台使用 asyntask -

> ID：12121702
> 
> 赞同：2
> 
> 时间：2012-08-25T11:51:50.523
> 
> 标签：android, webview

我正在尝试使用 asyntask 在后台加载 webview，同时显示启动画面，当 webview 完成加载时，我希望启动画面消失并显示 webview。由于某种原因，当我尝试在模拟器中编译和运行代码时，我在 LogCat 中遇到了很多错误。

MainActivity.java

```
package dk.zerone.vuc;

import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.util.Log;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

public final boolean networkCheck() {
    ConnectivityManager connec =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

    if ( connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED ||
    connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING ||
    connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING ||
    connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED ) {
        return true;
    } else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED || connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED  ) {
        return false;
    }
    return false;
}

// The definition of our task class
   private class LoadWebView extends AsyncTask<String, Integer, String> {
   @Override
   protected void onPreExecute() {
      super.onPreExecute();
   }

   protected String doInBackground(String... params) {
      String url = params[0];
       WebView webview = new WebView(MainActivity.this);
       webview.loadUrl(url);
       Log.i("WebView", "doInBackground: Done loading url.");
      return "";
   }

   protected void onPostExecute(String result) {
      super.onPostExecute(result);

      }
   }

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /* Splash screen */
    setContentView(R.layout.splash);

    if(networkCheck()) {

        //Instantiating the webview, occupies the whole screen.
        //WebView webview = new WebView(this);
        //webview.loadUrl("http://mobil.vucfyn.dk/mobil");

        new LoadWebView().execute("http://mobil.vucfyn.dk/mobil");
        setContentView(R.layout.webview);
        Log.i("WebView", "Execute asyntask");

        /*webview.setWebViewClient(new WebViewClient() {
              @Override
              public void onPageFinished(WebView view, String url) {
                //super.onPageFinished(view, url);
                  Log.i("WebView", "Finished loading.");
                setContentView(R.layout.webview);
              }
            });*/

    } else {
        AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
        alertDialog.setTitle("Fejl");
        alertDialog.setMessage("Ingen forbindelse til internettet");

        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

            }
        });
        alertDialog.show();
    }
  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
} 
```

来自 LogCat 的错误消息：

```
08-25 11:32:11.544: D/dalvikvm(549): GC_FOR_ALLOC freed 67K, 3% free 10191K/10503K, paused 60ms
08-25 11:32:11.563: I/dalvikvm-heap(549): Grow heap (frag case) to 11.036MB for 1048592-byte allocation
08-25 11:32:11.633: D/dalvikvm(549): GC_CONCURRENT freed 1K, 4% free 11214K/11591K, paused 6ms+3ms
08-25 11:32:11.713: I/WebView(549): SetContentView webview
08-25 11:32:11.733: I/WebView(549): Execute asyntask
08-25 11:32:11.923: D/gralloc_goldfish(549): Emulator without GPU emulation detected.
08-25 11:32:12.593: W/dalvikvm(549): threadid=11: thread exiting with uncaught exception (group=0x409961f8)
08-25 11:32:12.646: E/AndroidRuntime(549): FATAL EXCEPTION: AsyncTask #1
08-25 11:32:12.646: E/AndroidRuntime(549): java.lang.RuntimeException: An error occured while executing doInBackground()
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.os.AsyncTask$3.done(AsyncTask.java:278)
08-25 11:32:12.646: E/AndroidRuntime(549):  at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
08-25 11:32:12.646: E/AndroidRuntime(549):  at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
08-25 11:32:12.646: E/AndroidRuntime(549):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
08-25 11:32:12.646: E/AndroidRuntime(549):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
08-25 11:32:12.646: E/AndroidRuntime(549):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
08-25 11:32:12.646: E/AndroidRuntime(549):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
08-25 11:32:12.646: E/AndroidRuntime(549):  at java.lang.Thread.run(Thread.java:856)
08-25 11:32:12.646: E/AndroidRuntime(549): Caused by: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare()
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.os.Handler.<init>(Handler.java:121)
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.webkit.WebView$PrivateHandler.<init>(WebView.java:8211)
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.webkit.WebView.<init>(WebView.java:437)
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.webkit.WebView.<init>(WebView.java:1040)
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.webkit.WebView.<init>(WebView.java:1029)
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.webkit.WebView.<init>(WebView.java:1019)
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.webkit.WebView.<init>(WebView.java:1010)
08-25 11:32:12.646: E/AndroidRuntime(549):  at dk.zerone.vuc.MainActivity$LoadWebView.doInBackground(MainActivity.java:42)
08-25 11:32:12.646: E/AndroidRuntime(549):  at dk.zerone.vuc.MainActivity$LoadWebView.doInBackground(MainActivity.java:1)
08-25 11:32:12.646: E/AndroidRuntime(549):  at android.os.AsyncTask$2.call(AsyncTask.java:264)
08-25 11:32:12.646: E/AndroidRuntime(549):  at java.util.concurrent.FutureTask$Sync.innerRun  (FutureTask.java:305)
08-25 11:32:12.646: E/AndroidRuntime(549):  ... 5 more
08-25 11:32:16.363: I/Process(549): Sending signal. PID: 549 SIG: 9 
```

我不知道出了什么问题，非常感谢任何帮助。

更新：

```
package dk.zerone.vuc;

import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.graphics.Color;
import android.view.Menu;
import android.view.View;
import android.webkit.WebView;
import android.webkit.WebViewClient;

public class MainActivity extends Activity {

public final boolean networkCheck() {
    ConnectivityManager connec =  (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);

    if ( connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTED ||
    connec.getNetworkInfo(0).getState() == NetworkInfo.State.CONNECTING ||
    connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTING ||
    connec.getNetworkInfo(1).getState() == NetworkInfo.State.CONNECTED ) {
        return true;
    } else if (connec.getNetworkInfo(0).getState() == NetworkInfo.State.DISCONNECTED || connec.getNetworkInfo(1).getState() == NetworkInfo.State.DISCONNECTED  ) {
        return false;
    }
    return false;
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    /* Splash screen */
    setContentView(R.layout.splash);

    if(networkCheck()) {

        String url = "http://mobil.vucfyn.dk/mobil";

        final WebView webview; 
        webview = new WebView(MainActivity.this);

        webview.loadUrl(url); 

        webview.setWebViewClient(new WebViewClient() { 
            @Override 
            public boolean shouldOverrideUrlLoading(WebView view, String url) {     
                //view.loadUrl(url);     
                return false;
            } 

            @Override 
            public void onPageFinished(WebView view, String url) { 
                super.onPageFinished(view, url); 
                setContentView(webview);
             } 
        });

    } else {
        AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create();
        alertDialog.setTitle("Fejl");
        alertDialog.setMessage("Ingen forbindelse til internettet");

        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {

            }
        });
        alertDialog.show();
    }
  }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:57:36.480

你为什么使用`AsyncTask`这可以很容易地通过这个来实现......

最好用这个

```
WebView webview = new WebView(MainActivity.this);
webview.loadUrl(url);

webview.setWebViewClient(new WebViewClient() {
    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {    
        view.loadUrl(url);    
         return false;
    }

    @Override
    public void onPageFinished(WebView view, String url) {
    super.onPageFinished(view, url);

           //------>> EXIT YOUR SPLASH SCREEN HERE
     }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-25T12:21:50.133

问题是你甚至在非 ui 线程中初始化 webview。将初始化部分移到 doinbackground 之外。将行下移到 OnPreexcecute 最好还是将其移到 Oncreate

```
WebView webview;

webview = new WebView(MainActivity.this); 
```

编辑：

对于编辑后的代码，webview 没有显示，因为您没有设置正确的内容

采用

```
setContentView(webview); 
```

内页已完成

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T11:46:37.153

启用 JavaScript 就成功了。

```
 webview.getSettings().setJavaScriptEnabled(true); 
```

# java - 如何加速 Java Web 测试

> ID：12121704
> 
> 赞同：0
> 
> 时间：2012-08-25T11:52:07.517
> 
> 标签：java

我在 Spring Controller 中编写了一个复杂的方法，该方法将 request.getParameterMap() 作为输入。在迭代开发该方法时，每次我进行调整时，我都必须部署，然后通过 Web 表单上的步骤。

该过程可能需要几分钟，只需调整一个小的代码更改。

有什么技巧或方法可以加快这个过程吗？我真正需要的是request.getParameterMap() 的输入。我可以以某种方式序列化该地图数据并重新使用它吗？

如果相关的话，我正在使用 Netbeans。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:25:03.343

根据我的经验，最好的方法是设置一个 JUnit 测试，它根本不使用 Web 服务器，而只是实例化控制器，调用方法并检查结果。

由于您的控制器不是针对这种方法从头开始编写的，因此在此阶段要进行此操作可能需要相当多的工作。如果您发布有问题的方法，我们可能会对此有所帮助。

下一个最好的事情是设置一个集成测试，它启动应用程序服务器，执行请求（可能通过使用 selenium 或其他东西的实际 web gui）。

仍然有很多工作要做，但困难较少取决于当前的工作方式。

作为最后的解决方法，您可以尝试加快手动测试的往返速度。可能存在依赖于 IDE 的可能性，因此您必须让我们知道正在使用的 IDE。

我还没有测试过，但是很多人都称赞 JRebel 的这种东西，所以你可能想尝试一下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-25T12:10:10.860

如果您不想一次又一次地填写 Web 表单，请尝试 Jmeter（它是一个免费的负载测试工具）。创建一个测试计划 -> 将线程数设置为 1 -> http请求采样器 -> 设置方法以发布并添加发布参数。一旦一切都设置好了，就会触发请求

请查看以下链接以供参考
[http://community.blazemeter.com/knowledgebase/articles/65142-the-new-http-sampler-in-jmeter-2-6](http://community.blazemeter.com/knowledgebase/articles/65142-the-new-http-sampler-in-jmeter-2-6)

# scala - 在 Scala 项目上播放依赖项

> ID：12121706
> 
> 赞同：4
> 
> 时间：2012-08-25T11:52:22.913
> 
> 标签：scala, dependencies, playframework-2.0, sbt

我正在尝试让一个游戏项目将另一个本地 scala 项目作为依赖项。我在我的配置文件中使用这一行将本地 scala 项目部署到我的本地 M2 存储库。

```
publishTo := Some(Resolver.file("file",  new File(Path.userHome.absolutePath+"/.m2/repository"))) 
```

我正在尝试用这条线在我的游戏项目中加载依赖项

```
val appDependencies = Seq(
    "com.experimentalcork" %% "timeywimeyentities" % "0.0.2"
)

val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(   
    resolvers += "Local Maven Repository" at "file://" + Path.userHome.absolutePath + "/.m2/repository",testOptions in Test := Nil 
) 
```

在日志中，当我执行“播放编译”时，它指出它找不到依赖项。它正在寻找我指定依赖关系的地方。

```
[warn] ==== Local Maven Repository: tried
[warn]   file://C:/Users/caelrin/.m2/repository/com/experimentalcork/timeywimeyentities_2.9.1/0.0.2/timeywimeyentities_2.9.1-0.0.2.pom 
```

当我去检查那个目录时，我可以确认 pom 和 jar 文件在那里。我对它如何在包含 pom 的目录中查找却找不到它感到完全困惑。有没有人有这方面的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T14:47:19.993

我认为你也需要一个 .dependsOn 调用。

```
val timeywimeyentities: Project = Project([Put all of your settings here for the project just like you would a play project])

val main = PlayProject(appName, appVersion, appDependencies, mainLang = SCALA).settings(   
    resolvers += "Local Maven Repository" at "file://" + Path.userHome.absolutePath + "/.m2/repository",testOptions in Test := Nil 
).dependsOn(timeywimeyentities % "compile->compile") 
```

添加“compile->compile”使你的play项目的主代码依赖于你的依赖的主代码。如果你想让你的play项目的测试代码也依赖它，你可以使用“compile->test”。如果您只想看到两者的测试代码，您可以使用“test->test”。您也可以将它们链接在一起，例如：“compile->compile;test->test”。如果您想要的只是“编译->编译”，则无需明确说明。

有关更多信息，请参阅[https://github.com/harrah/xsbt/wiki/Getting-Started-Multi-Project](https://github.com/harrah/xsbt/wiki/Getting-Started-Multi-Project)。

# c# - 为什么 BackgroundWorker 不需要在 ProgressChanged 事件处理程序中调用？

> ID：12121708
> 
> 赞同：4
> 
> 时间：2012-08-25T11:52:24.527
> 
> 标签：c#, .net, backgroundworker

由于`ProgressChanged`事件处理程序是从事件处理程序中的某个地方引发的`DoWork`，难道不应该在异步操作线程上调用它们`DoWork`，而不是在 UI 线程上运行，因此需要调用或`BeginInvoke`操作控件？

我的猜测是该`ReportProgress`方法中正在发生一些魔术，但它怎么知道，哪个是调用`ProgressChanged`事件处理程序的正确线程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T12:06:25.680

当您调用`RunWorkerAsync`时，`BackgroundWorker`内部会创建一个[`AsyncOperation`](http://msdn.microsoft.com/en-us/library/system.componentmodel.asyncoperation)与当前同步上下文关联的新上下文，如通过[`AsyncOperationManager.SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.componentmodel.asyncoperationmanager.synchronizationcontext.aspx)静态属性检索的那样。

此同步上下文将是派生自 的类的实例[`SynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext)。具体类型取决于您的应用程序使用的同步模型提供程序。如果您正在运行 Windows 窗体，它会是[`WindowsFormsSynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.windows.forms.windowsformssynchronizationcontext)；在 WPF 上；会的[`DispatcherSynchronizationContext`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatchersynchronizationcontext)。

当您随后调用`ReportProgress`后台线程时，`BackgroundWorker`将在内部调用[`Post`](http://msdn.microsoft.com/en-us/library/system.threading.synchronizationcontext.post)上述`SynchronizationContext`实例，从而将操作异步分派到关联线程。

在 Windows 窗体中，这是作为[`Control.BeginInvoke`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.begininvoke.aspx)调用实现的；在 WPF 上，它变成了一个[`Dispatcher.BeginInvoke`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.begininvoke)调用。

# java - 单个请求的 SOAP Webservice keepalive？

> ID：12121711
> 
> 赞同：2
> 
> 时间：2012-08-25T11:52:39.277
> 
> 标签：java, web-services, jakarta-ee

我有一`@WebService`堂课。如果我从客户端建立连接，有时会有可能持续几分钟的任务。首先，如果此任务完成，soap 应该返回响应。这意味着客户端和 Web 服务器之间的单个请求的连接在这个较长的请求期间不应超时。

如何配置此过程的超时？如果它是可配置的，是在客户端还是服务器端完成？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T18:29:54.570

**服务器端**

我会像配置任何其他请求一样配置它。对于服务器而言，它是网页还是 XML SOAP 消息（Web 服务）并不重要。在 apache tomcat 中，您可以在应用程序的 Web.xml 文件中配置服务器会话超时持续时间。对于 JBoss 和其他应用程序服务器，它应该是相同的。下面的示例将会话超时设置为 30 分钟。

```
 <session-config>
      <session-timeout>30</session-timeout>    
    </session-config> 
```

**客户端**

大多数 SOAP 客户端使用

```
Connection: Keep-Alive 
```

在请求的 HTTP 标头中，所以这应该不是问题。

# sql - SQL：为什么我不能为查询结果设置变量？

> ID：12121713
> 
> 赞同：3
> 
> 时间：2012-08-25T11:52:44.153
> 
> 标签：sql, dataexplorer

我正在尝试在 SO Data Explorer 上运行此查询：

```
DECLARE @totalRep float

SET @totalRep = SELECT SUM(Users.Reputation) FROM Users 
```

我不断得到

> *关键字“SELECT”附近的语法不正确。*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T11:54:53.020

```
SELECT @totalRep = SUM(Users.Reputation) FROM Users 
```

# java - 为什么所有的接口方法都需要在java中实现的类中实现

> ID：12121714
> 
> 赞同：11
> 
> 时间：2012-08-25T11:53:16.810
> 
> 标签：java, interface

我知道这是接口的目的，并且可以将类声明为抽象以逃避它。

但是实现我们在接口中声明的所有方法有什么用吗？如果我们继续定义所有方法，即使它与该类无关，这不会增加代码的重量和复杂性吗？为什么会这样设计？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-25T12:17:45.880

Java 中接口的概念很像*契约*（也许回想起来，这应该是概念的名称）

这个想法是，*实现*接口的类**郑重承诺**提供合同中列出的所有东西，以便**保证**对实现接口的类的任何*使用*都具有可用的功能。

 **以我的经验，这个设施是使在 Java 中建造大教堂成为可能的因素之一。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-25T11:56:59.087

您所批评的正是目标界面实现的目标。如果您不想实现接口，请不要声明您的类实现它。

> 如果我们继续定义所有方法，即使它与该类无关，这不会增加代码的重量和复杂性吗？

当您针对接口进行编程时，您希望其背后的具体对象实现其所有方法。如果您的具体对象不需要或无法实现所有接口方法，您可能需要解决设计问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-25T11:58:08.030

当任何一段代码在不知道它背后是什么类的情况下接收到一个接口的实例时，应该确保该段代码能够调用接口中的任何方法。这就是使接口成为调用者和功能提供者之间的契约的原因。实现这一点的唯一方法是要求所有实现接口的非抽象类为其所有功能提供实现。

有两种通用方法可以处理不实现某些功能的需要：

*   添加一个测试方法和一个抛出的实现`UnsupportedOperationException`，和
*   根据需要将您的界面拆分为部分，以便可以实现部分的所有方法。

这是第一种方法的示例：

```
public interface WithOptionalMehtods {
    void Optional1();
    void Optional2();
    boolean implementsOptional1();
    boolean implementsOptional2();
}

public class Impl implements WithOptionalMehtods {
    public void Optional1() {
        System.out.println("Optional1");
    }
    public void Optional2() {
        throw new UnsupportedOperationException();
    }
    public boolean implementsOptional1() {
        return true;
    }
    public boolean implementsOptional2() {
        return false;
    }
} 
```

这是第二种方法的示例：

```
public interface Part1 {
    void Optional1();
}
public interface Part2 {
    void Optional2();
}
public Impl implements Part1 {
    public void Optional1() {
        System.out.println("Optional1");
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-25T12:13:08.287

> 如果我们继续定义所有方法，即使它与该类无关，这不会增加代码的重量和复杂性吗？

是的，你是对的，它会的。这就是为什么在您的编码中遵循[接口隔离原则是](http://en.wikipedia.org/wiki/Interface_segregation_principle)***最佳实践***，该原则建议*不要强制客户端实现*他们不使用的接口。所以你永远不应该有一个“胖”接口，它有很多方法，但有很多*小*接口*分组方法*，每个组都服务于特定的行为或子模块。 这样，接口的客户端只实现所需的方法，而不会被迫实现他们不需要的方法。

 **** * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T11:58:54.933

它可能取决于[Liskov 替换原则](https://en.wikipedia.org/wiki/Liskov_substitution_principle)

因此，拥有`A implements B`意味着您可以`A`在`B`需要时使用，并且要使其正常工作，`A`必须至少具有与`B`.

请记住，我的答案不是“正确”的答案，因为它不是基于官方来源！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-01-23T08:50:06.047

在实现一个接口时，我们可能不需要定义接口中声明的所有方法。我们可以定义一些我们不需要的方法，在主体内部什么都没有。*****

# php - 在 php 中替换 exit 的另一个命令？

> ID：12121718
> 
> 赞同：0
> 
> 时间：2012-08-25T11:54:27.477
> 
> 标签：php, command, exit

是否有任何其他命令我们可以用作 exit() 的替代方法；在 php.ini 中。

因为如果不满足条件并且脚本必须退出，它会在页面末尾破坏我的 html 代码。

或者如果有人有任何其他想法来解决这个问题？？？

谢谢

更新：

```
html code...

<?php
if username is not in correct format
echo "Please check your username";
exit();

if Username and Password didn't match
echo "Wrong Username or Password.";
exit();

if some other condition not met
echo "Condition not met";
exit();
?>

html code continues... 
```

现在的问题是，如果任何一个条件不满足，脚本必须退出，它下面的html代码，这是一个完整的网页，不显示......

请...我不是计算机极客，有问题所以问它，但为什么人们会否决这个问题？？？不明白……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:02:19.253

您可能应该将您的代码包装成一个`if`语句：

```
<?php
    if($code == 'ok'){
        echo 'ok';
    } else {
        echo 'not ok';
    }
?> 
```

你的脚本不必`exit()`，你可以在你想要的地方和你想要的地方添加语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T13:51:02.237

顾名思义，PHP`exit()`语句将导致您的 PHP 脚本立即退出，并且不执行任何其他操作。如果您希望它继续处理其余代码，请不要使用`exit()`.

查看您的代码，您的目标似乎是向用户显示错误，然后（我猜）重新显示他们错误填写的表单。

与其一发现错误就回显错误，为什么不将它们存储到一个变量中，然后可以在 HTML 中的适当位置显示？即使是最基本的脚本也可以从一些基本的代码结构中受益。

举个例子（我强调这不是这种事情的唯一模式），你可以像这样安排你的文件：

```
if ( /* form has been submitted */ )
{
     $errors = validate_form();
     if ( count($errors) > 0 )
     {
         display_form($errors);
     }
     else
     {
         display_success_message();
     }
}
else
{
     display_form();
}

function validate_form()
{
     $errors = array();

     // Series of if conditions, each adding a message to $errors if appropriate

     return $errors;
}

function display_form($errors=array())
{
     // HTML <ul> list displaying the contents of $errors, if any
     // HTML for form
}

function display_success_message()
{
     // HTML thanking user for a successful form submission
} 
```

# mysql - 缓存 MySQL UNION 查询

> ID：12121723
> 
> 赞同：1
> 
> 时间：2012-08-25T11:55:40.887
> 
> 标签：mysql, caching, union, query-cache

我读过 MySQL 可以缓存`UNION's`，但同时我也读过..

> 避免在查询开始时使用注释（和空格）——查询缓存会进行简单的优化以检查查询是否可以被缓存。正如我提到的，只有 SELECT 查询被缓存——所以它查看查询的第一个字母，如果它是“S”，它会在缓存中继续查询查找，如果不是——跳过它。

来源：[http ://www.mysqlperformanceblog.com/2006/07/27/mysql-query-cache/](http://www.mysqlperformanceblog.com/2006/07/27/mysql-query-cache/)

话虽如此，既然 UNION 以括号开头，它们是如何缓存的？

根据 mysql.com：

```
(SELECT a FROM t1 WHERE a=10 AND B=1 ORDER BY a LIMIT 10)
UNION
(SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY a LIMIT 10); 
```

第一个字母不是“S”，所以会被跳过！？

我也看到你可以做这样的事情..

```
SELECT * FROM (
    (SELECT a FROM t1 WHERE a=10 AND B=1 ORDER BY a LIMIT 10)
    UNION ALL
    (SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY a LIMIT 10)
) AS u 
```

但是它会是一个`sub-select`，因此，根据该页面，也不会被缓存。

那么`UNION`s 是如何被缓存的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T12:07:14.150

这是因为每个`SELECT`查询都可以写成`'S'`它的起始字母。

您不需要编写子查询来缓存此`UNION`查询，因为括号可以从您的查询中删除，并且可以修改为：

```
SELECT a FROM t1 WHERE a=10 AND B=1 ORDER BY a LIMIT 10
UNION
SELECT a FROM t2 WHERE a=11 AND B=2 ORDER BY a LIMIT 10; 
```

# sql - Sybase SQL：如何检查日期或时间戳字段是否为空

> ID：12121724
> 
> 赞同：2
> 
> 时间：2012-08-25T11:55:48.557
> 
> 标签：sql, sybase

如果日期或时间戳字段为空，如何签入 Sybase？不幸的是，“is NULL”并不能胜任这项工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:59:18.180

刚刚找到了解决这个问题的方法：

```
select * from ... where ... and CAST(myDateFieldName as CHAR) is NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-26T20:05:11.663

Visual FoxPro 8.1 ODBC 到 SYBASE v11.1，使用以下查询

```
UPDATE table SET thedatefield = CURDATE() WHERE thedatefield IS NULL or EMPTY(thedatefield) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T12:01:59.893

使用[数据长度](http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.blocks/html/blocks/blocks135.htm)检查字段是否`empty`存在。您可以通过以下方式检查：

```
select column_name
from your_table
where datalength(checking_col_name) = 0 
```

# android - Handle Intent VIEW typ=audio/mpeg

> ID：12121729
> 
> 赞同：0
> 
> 时间：2012-08-25T11:56:55.940
> 
> 标签：android, android-intent, android-file

所以想法是我正在使用设备上已经预装的应用程序打开一个文件。这是我的代码

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_VIEW);
intent.setData(fileUri);
intent.setType(mimeType);
startActivity(intent); 
```

我的错误信息是

```
08-25 12:50:32.900: E/AndroidRuntime(19555): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW typ=audio/mpeg } 
```

任何想法如何解决这个问题？我读到了意图过滤器，但是这里的人告诉我，如果我要使用其他应用程序打开我的文件，那么我不需要指定任何过滤器，是真的吗？

PS 由于某种原因，它可以很好地打开 PDF 文件，以及 JPG 和 TXT

谢谢丹尼斯xx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:22:54.823

> 任何想法如何解决这个问题？

在您的手机上安装一个应用程序，该应用程序具有处理此 MIME 类型的活动。并非所有可能的 MIME 类型都将由您设备上已有的应用程序处理。

如果您认为您设备上的某某应用程序应该能够处理此问题，请使用[AppXplore](https://play.google.com/store/apps/details?id=com.sonyericsson.androidapp.AppExplore&hl=en)检查其清单并查看您出错的地方（例如，`fileUri`正在使用不受支持的方案）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:20:15.480

[在此处](http://developer.android.com/guide/appendix/media-formats.html)查看支持的媒体格式。确保您使用其中之一。

# php - 为什么在 mysql 上总是为结果获得正值？

> ID：12121731
> 
> 赞同：0
> 
> 时间：2012-08-25T11:57:03.017
> 
> 标签：php, mysql

```
<?php

$uname=$_POST['uname'];
$pwd=$_POST['pwd'];
$result="";
echo($uname.'</br>');
echo($pwd);
$con=mysql_connect("localhost","root","");
mysql_select_db("user_login_test",$con);
$sql="SELECT * FROM userlogin WHERE username='".$uname."'";
if($result=mysql_query($sql))
{
echo($result);
echo("Extracted<br>");
}
else
{
echo("NOT Extracted");
}
while($row = mysql_fetch_array($result))
{
    echo $row['username'] . " " . $row['password'];
    echo "<br />";
}
?> 
```

我正在做上面的代码来提取值。如果用户名匹配它显示值但如果我输入错误的文本它也显示“提取”没有值为什么？请帮我？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:03:33.120

如函数的 PHP 手册条目中所述[`mysql_query()`](http://www.php.net/manual/en/function.mysql-query.php)：

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，**mysql_query()**在成功或错误时返回[资源。](http://www.php.net/manual/en/language.types.resource.php)**`FALSE`**

`$result`因此，无论列上是否存在匹配项，您的变量都包含一个 MySQL 资源`username`：使用测试这样的资源`if`将始终评估为**`TRUE`**（除非查询本身引发错误）。

手册继续解释：

> 返回的结果资源应该传递给[`mysql_fetch_array()`](http://www.php.net/manual/en/function.mysql-fetch-array.php)和其他处理结果表的函数，以访问返回的数据。
> 
> 用于[`mysql_num_rows()`](http://www.php.net/manual/en/function.mysql-num-rows.php)查明 SELECT 语句返回了多少行，或者[`mysql_affected_rows()`](http://www.php.net/manual/en/function.mysql-affected-rows.php)查明有多少行受到 DELETE、INSERT、REPLACE 或 UPDATE 语句的影响。

在您的情况下，您可以测试 using`mysql_num_rows()`以确定查询是否返回了任何记录（即是否`WHERE`满足条件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:08:56.530

您为提取用户名编写了错误的逻辑。我已经修改了你的代码检查它。

```
$sql="SELECT * FROM userlogin WHERE username='".$uname."'";
$result=mysql_query($sql)
if(mysql_num_rows($result)>0)
{
echo("Extracted<br>");
}
else
{
echo("NOT Extracted");
} 
```

# c++ - Wavefront obj loader 与 c/cpp 的材料文件

> ID：12121732
> 
> 赞同：3
> 
> 时间：2012-08-25T11:57:27.573
> 
> 标签：c++, opengl, wavefront

我正在寻找一个支持加载材料属性文件的波前 obj 加载器。

基本支持[最低标准](http://paulbourke.net/dataformats/obj/minobj.html)。

此外，我正在为我的向量和矩阵使用数学 glm 库，我正在寻找可以很好地集成这个的东西。

搜索选项时，我发现了另一个名为[glm](http://devernay.free.fr/hacks/glm/)的库（令人困惑？？），到目前为止，它看起来是最好的选择，虽然这比我需要的要多得多，但我只希望加载器不包含一组渲染选项。

到目前为止我看过的其他选项： - assimp，非常广泛，比我需要的要多得多

*   libwave，从 1996 年开始，想做渲染

*   libobj，看起来很有前途，但还不支持材料。

*   Libobj，也许是一个不错的选择，看起来它支持我需要的东西，但它缺少一些基本示例，需要我做一些工作才能将它与我的其余代码集成。

*   libwavefront 不支持素材文件

还有其他适合我的项目的现代选项吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:20:15.803

编写自己的代码大约需要一天时间，您将能够添加和删除功能！这不是很难，而且有很多教程。我推荐这个： [http ://www.youtube.com/watch?v=849hXuOv0i8](http://www.youtube.com/watch?v=849hXuOv0i8)

# php - PHP PDO（使用 libpq V 9.1.4）绑定以使用 CITEXT 的解决方法？

> ID：12121739
> 
> 赞同：5
> 
> 时间：2012-08-25T11:58:39.997
> 
> 标签：php, postgresql, postgresql-9.1

场景

运行 PHP 和 PostgreSQL 的两个系统（不是服务器），版本如下

*   ## 软呢帽 15：

    > ### PHP
    > 
    > PHP 5.3.13 (cli) (built: May 9 2012 14:38:35)
    > Copyright (c) 1997-2012 The PHP Group
    > Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies
    > **pdo_pgsql**
    > PostgreSQL(libpq) 版本9.0.7
    > 模块版本 1.0.2
    > 
    > * * *
    > 
    > ### PostgreSQL
    > 
    > PostgreSQL 9.1.4
    > 启用 CITEXT 扩展。

*   ## ArchLinux：

    > ### PHP
    > 
    > PHP 5.4.6 (cli) (built: Aug 16 2012 12:50:09)
    > Copyright (c) 1997-2012 The PHP Group
    > Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies
    > **pdo_pgsql**
    > PostgreSQL(libpq) 版本9.1.4
    > 模块版本 1.0.2
    > 
    > * * *
    > 
    > ### PostgreSQL
    > 
    > PostgreSQL 9.1.4
    > 启用 CITEXT 扩展。

* * *

当一个简单的查询如

```
select column1 from schema1.table1 where column1= ? 
```

其中 column1 是 CITEXT 类型，通过 PHP PDO 执行

*   在带有 PHP 5.3.13、libpq 9.0.7 的 Fedora 上，查询按预期执行 CITEXT（发生*不区分大小写*的搜索）。
*   在带有 PHP 5.4.6、libpq 9.1.4 的 ArchLinux 上，使用 CITEXT 的查询没有按预期执行（发生*区分大小写*的搜索）。

我猜较新版本的 PHP PDO 库正在做类似的事情：

```
select column1 from schema1.table1 where column1= 'value'::text; 
```

在绑定期间。

*   我对吗？
*   有解决方法吗？否则，在使用较新版本的 PDO 时，使用 CITEXT 作为列数据类型来获得不区分大小写搜索的优势是没有用的。

* * *

### 更新

### 开启语句级登录后，在 ArchLinux 上使用 PHP 5.4.6,libpq 9.1.4 ：

```
LOG:  execute pdo_stmt_00000001: select column1 from schema1.table1 where column1 = $1
DETAIL:  parameters: $1 = 'value'
LOG:  statement: DEALLOCATE pdo_stmt_00000001 
```

其中列的实际`column1`值为`VALUE`。

仍然返回 0 个元素。

当声明

```
select column1 from schema1.table1 where column1 = 'value'; 
```

直接在`PSQL`提示符下执行，返回单行。

```
 column1  
---------
  VALUE
 (1 row) 
```

所以，类型转换不会发生！我仍然无法理解`PDO`/的行为`postgresql`。

* * *

### 更新 2012-08-27 16:15:43.669142+00 (UMT + 0)

### 在尝试直接执行查询而不准备语句之后。

这是用于测试的代码：

```
try {
    $db = new PDO('pgsql:dbname=database1;user=user;password=pass;host=localhost');
    $db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    $sql = "SELECT column1 from schema1.column1 where column1 = 'value'::citext ";
    $retval=$db->query($sql);
    foreach ($retval as $row) {
        print $row['uname'] . '<br>';
    }
}catch (PDOException $PDOerr) {
    echo 'An error occured : <br>';
    var_dump($PDOerr);
    exit;
    //some thing went wrong while performing the action on db.
    } 
```

我得到错误：

```
object(PDOException)#10 (8) { ["message":protected]=> string(211) "SQLSTATE[42704]: \
Undefined object: 7 ERROR: type "citext" does not exist LINE 1: ... 
```

我不明白为什么`citext`没有被检测到！当语句直接在`PSQL`提示符下执行时，一切正常，如上所述。

* * *

### 最终更新

对于我尝试登录的用户来说，这是一个搜索路径问题。我猜我在对`set search_path`其他模式进行会话时创建了用户，而不是默认的 '"$user",public' 它被设置为其他模式。用户根本没有任何访问公共模式的权限。感谢您`Daniel Vérité`为我指明正确的方向。

BTW，用于`ALTER ROLE user SET search_path TO "$user",public;`设置搜索路径。虽然， $user 没有用，因为我没有任何以当前用户命名的模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:37:22.353

1.  为什么要猜？打开语句记录并知道。
2.  如果您认为这是一个错误，请向 PDO 项目提交错误报告，或者至少检查列表档案，看看是否有充分的理由。
3.  尝试以下方法作为解决方法。

    c = (?)::citext

我猜你会不走运，因为看起来类型常量是为所有 dbs 共享的

[http://www.php.net/manual/en/pdo.constants.php](http://www.php.net/manual/en/pdo.constants.php)

祝贺 PDO 团队的设计选择使您的文件系统库仅支持大写 8.3 以保持兼容性是 ms-dos 6.22

* * *

显式 DEALLOCATE 表明之前发布了 PREPARE。这将需要一个类型参数列表，因此大概是在那里设置了文本类型。

*   [http://www.postgresql.org/docs/current/static/sql-prepare.html](http://www.postgresql.org/docs/current/static/sql-prepare.html)
*   [http://www.postgresql.org/docs/current/static/sql-deallocate.html](http://www.postgresql.org/docs/current/static/sql-deallocate.html)

# python - 如何在python中实现前向兼容的字符串文字？

> ID：12121740
> 
> 赞同：1
> 
> 时间：2012-08-25T11:58:50.020
> 
> 标签：python, string, python-3.x, literals

我有一个使用 python 3 运行的脚本，除了字符串文字。Python 2.x 强制我用 u'' 作为字符串文字的前缀，而 python 3 不理解它。怎么解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:09:25.977

在 python 2.x 中运行它时试试这个：

```
>>> from __future__ import unicode_literals
>>> s=['xx','yy','zz','aa']
>>> s
[u'xx', u'yy', u'zz', u'aa'] 
```

在 python 3.x 中执行时同样的事情：

```
>>> from __future__ import unicode_literals
>>> s=['xx','yy','zz','aa']
>>> s
['xx', 'yy', 'zz', 'aa'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:31:18.480

几个选项：

您可以`u("a\u0020")`使用以下兼容性函数将所有 unicode 字符串编写为 。一个类似的技巧可以让你`b('')`在 Python 2.5 下支持字节。不过，额外的函数调用会对性能造成很小的影响。（这是[六](http://pypi.python.org/pypi/six/)2/3 兼容性库使用的）。

```
if sys.version_info < (3,0):
    def u(s):
        return s.decode("unicode_escape")
else:
    def u(s):
        return s 
```

其次，如果您不必支持 Python 2.5，则可以使用`from __future__ import unicode_literals`，并且该模块的 Python 2.6/2.7 字符串的行为与 3.x 相同。

最后，如果您不必支持 Python 3.0-3.2，您可以使用，因为 Python 3.3出于普遍压力（主要来自 web 框架开发人员）`u''`重新添加了对前缀的支持。`u''`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:33:03.707

您使用包装方法，通常称为`u`.

这是我的版本（从[Porting to Python 3](http://python3porting.com/noconv.html)，如果您使用相同的代码同时支持 Python 2 和 Python 3，您应该阅读它。）：

```
import sys
if sys.version < '3':
    import codecs
    def u(x):
        return codecs.unicode_escape_decode(x)[0]
else:
    def u(x):
        return x 
```

然后使用 u('String') 代替 u'String'。对于非 ascii 文本，您需要使用`\x00`,`\u0000`或`\N{name}`语法。

Python 3.3 将再次支持 u'' 语法，以避免这种情况，但它仍处于测试阶段。

该`from __future__ import unicode_literas`功能已被证明几乎没有用，因为您需要使用包装器来制作本机字符串，这不是一种改进。

# git - 如何将我的本地分支推进 1 次提交？

> ID：12121741
> 
> 赞同：5
> 
> 时间：2012-08-25T11:58:49.507
> 
> 标签：git

在我的 git 存储库本地分支中，它落后于 9 次提交。你能告诉我如何将它提前 1 次提交吗？

```
# Your branch is behind 'my-git/remote' by 9 commits, and can be fast-forwarded. 
```

我已阅读[如何以编程方式快进单个 git 提交？](https://stackoverflow.com/questions/2890659/how-can-i-fast-forward-a-single-git-commit-programmatically) 我不明白答案。

我不需要以编程方式进行。有没有我可以使用的命令行方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-25T12:22:06.887

在这种特定情况下，您可以这样做

```
git merge my-git/remote~8 --ff-only 
```

说明：您是说您希望分支“my-git/remote”中的所有提交都合并到您当前的分支中，但最新的 8 个提交除外。除了部分包含在“~8”中。“--ff-only”是为了安全起见，但并非绝对必要。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T12:21:54.780

如果历史没有分歧，前进（或快进）与合并相同。因此，您可以合并到您需要的提交，例如

```
git merge my-git/remote~8 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T13:14:52.157

您还可以执行以下操作：

```
git merge 12345678 --ff-only 
```

其中 12345678 代表您要合并到的特定提交的提交 ID（如果您不想计算必须跳过多少提交）。

# c#-3.0 - 如何在写入文件之前在数据表中寻找位置

> ID：12121750
> 
> 赞同：0
> 
> 时间：2012-08-25T11:59:36.893
> 
> 标签：c#-3.0

我有从 csv 文件中读取的数据表。然后遍历行和列，并在写入也是目标 csv 文件的文件之前附加每个值。我想将特殊字符（“/”）上的一列数据分成两列。例如，数据表的“类型”列是“女装/鞋履和手袋/猜测”。我还有另一列“子类型”，所以我想在写入之前将数据表中的一列分成两列。我只想忽略第三种猜测。有没有办法寻找位置“/”，在第二个“/”之后，我想将该值插入到数据表的另一列“SubType”中。

```
 foreach (DataRow dRow in dtSor.Rows)
    {
        for (int i = 0; i < dtSor.Columns.Count; i++)
        {
            if (dRow[i].ToString().Contains(","))
            {
                dest_csv.Append("\"" + dRow[i].ToString() + "\"" + ",");
            }

            else if (dRow[i].ToString() == "")
            {
                dest_csv.Append("NULL" + ",");
            }

            else
            {
                dest_csv.Append(dRow[i].ToString() + ",");
                //dest_csv.Append(dRow[i].ToString());
            }

        }

        dest_csv.Remove(dest_csv.Length - 1, 1);
        dest_csv.Append(Environment.NewLine);
    }

    File.WriteAllText(destination_file, dest_csv.ToString(), Encoding.Default);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:24:21.180

首先检查特殊字符是否在[indexOf](http://msdn.microsoft.com/en-us/library/kwb0bwyd%28v=vs.85%29)字段中，然后将字段[拆分](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)为 araay 中的特殊字符，并仅获取您感兴趣的部分。

像这样：

```
const char special = '\\';

string maintype ="";
string subtype ="";

string field = dRow[i].ToString();
if (field.IndexOf(special)>-1)
{
  string[] splitted = field.Split(special);
  maintype = splitted[0];
  subtype = splitted[1];
} 
```

# c# - 从单个 DataTable 对象中的存储过程返回多个结果集

> ID：12121758
> 
> 赞同：3
> 
> 时间：2012-08-25T12:00:23.540
> 
> 标签：c#, sql, sql-server, stored-procedures

我有存储过程，它返回多个表作为结果集。我将它存储在 DataTable 中，并将该 DataTable 对象传递给另一个在我的网页中打印表格的表单。我的问题是如何将存储过程返回的多个 ResultSet 存储到 SINGLE DataTable 对象中，我可以将其返回到另一个函数。

```
 public static DataTable[] getGraphData(Int32 type)
{
    SqlConnection oConn = null;
    DataSet dsReturn = null;
    DataTable[] dtReturn=new DataTable[2];
    try
    {
        getConnection(ref oConn, 1);

        using (SqlStoredProcedure sspObj = new SqlStoredProcedure("dbo.usp_getGraphData", oConn, CommandType.StoredProcedure))
        {
            sspObj.AddParameterWithValue("@Type", SqlDbType.Int, 0, ParameterDirection.Input, type);
            dsReturn = sspObj.ExecuteDataSet();
            dtReturn[0] = dsReturn.Tables[0];
            dtReturn[1] = dsReturn.Tables[1];
            dtReturn[2] = dsReturn.Tables[2];
            sspObj.Dispose();
        }
        closeConnection(ref oConn);
    }
    catch (Exception xObj)
    {
        //dtReturn[] = new DataTable();
    }
    return dtReturn;
} 
```

获取所有三个数据表的函数

```
DataTable dtOutput = Generix.getGraphData(type); 
```

如何从这里获取每个数据表？表示第 0 个元素到 dtOutput1 ，第一个元素到 dtOutput2 ..... 明智的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:32:21.310

你为什么不使用podiluska提到的数据集，然后访问DataSet.Tables属性来一张一张地获取你的三个表。

如果三个表结构不同，将它们强制放入一个表是没有意义的。为此，DataSet 是更好的方法。这是你的桌子的一种集合。

编辑关于 DataTable[] 的问题：

```
DataTable[] dtOutputs = Generix.getGraphData(type); 
//dtReturn[0]
DataTable dtOutput0 = dtOutputs[0];
//dtReturn[1]
DataTable dtOutput1 = dtOutputs[1];
//dtReturn[2]
DataTable dtOutput2 = dtOutputs[2]; 
```

或者，如果您不仅需要引用这些表，还需要复制它们，您可以使用 .Copy() ，例如：

```
//dtReturn[0]
DataTable dtOutput1 = dtOutputs[1].Copy; 
```

我仍然认为最好的方法是通过查询返回一个 DataSet（从中进行 DataTable 查询是没有意义的。）

```
public static DataSet getGraphData(Int32 type)
{
    SqlConnection oConn = null;
    DataSet dsReturn = null;
    try
    {
        getConnection(ref oConn, 1);

        using (SqlStoredProcedure sspObj = new SqlStoredProcedure("dbo.usp_getGraphData", oConn, CommandType.StoredProcedure))
        {
            sspObj.AddParameterWithValue("@Type", SqlDbType.Int, 0, ParameterDirection.Input, type);
            dsReturn = sspObj.ExecuteDataSet();
            //You don't need Dispose() - because the using will do that on sspObj
        }

        closeConnection(ref oConn);
    }
    catch (Exception xObj)
    {
        dsReturn = new DataSet("Empty");
    }
    return dsReturn ;
} 
```

并像这样调用方法：

```
 DataSet dsOutput = Generix.getGraphData(type);

    //Simply a reference or Copy() the DataSet's tables:
    DataTable dtOutput0 = dsOutput.Tables[0];
    DataTable dtOutput1 = dsOutput.Tables[1];
    DataTable dtOutput2 = dsOutput.Tables[2]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:04:50.093

在存储过程中使用联合将结果集连接在一起

IE：

```
SELECT * from yourtable WHERE name='bob'
UNION ALL
SELECT * from yourtable WHERE name='jane' 
```

如果要将多个表返回到一个对象中，可以使用 a `DataSet`（包含多个表）而不是`DataTable`. 您以相同的方式填充它。

例如：

```
DataSet dst = new DataSet();
new SqlAdapter(command).Fill (dst); 
```

# c - char *str = "..." 和 char str[N] = "..." 的区别？

> ID：12121759
> 
> 赞同：1
> 
> 时间：2012-08-25T12:00:29.520
> 
> 标签：c, string, c-strings

> **可能重复：**
> [C 中的 char s[] 和 char *s 有什么区别？](https://stackoverflow.com/questions/1704407/what-is-the-difference-between-char-s-and-char-s-in-c)
> [关于C中指针和字符串的问题](https://stackoverflow.com/questions/4380090/question-about-pointers-and-strings-in-c)

我正在阅读 C 中的字符串，我很困惑。我可以通过两种方式“声明”字符串：

```
char *str = "This is string";
char str2[20] = "This is string"; 
```

这两个声明有什么区别？什么时候会`char str2[20]`优先`char *str`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:02:44.273

在 C 中，字符串表示为`char`s 的序列，带有一个 NULL 字符（又名 0, `'\0'`）。它们存储在内存中，您可以使用一种引用它的方式。您已经确定了引用它的两种方式，a`char *`是指向序列的指针`chars`和数组，它是作为实际变量的字符的立即字符串。请注意，字符串“abc”的长度为**4**个字节，因为有一个额外的 NULL 字符来表示字符串的结尾。

除此之外，您实际上是在示例中分配字符串，这还涉及在编译时给出的字符串。

所以两个问题。首先是关于如何表示字符串（`char *`vs `char[]`），其次是关于编译时字符串。

举个例子：

**第**一个在程序的文本中创建一个常量字符串和一个指向它的指针。根据编译器，它可能存储在任何地方。它相当于`mallocing`一个字符串并存储一个指向它的指针，除非您不能更改内存的内容。它是 a `char *`，因此您可以将指针更改为指向其他位置，例如另一个`malloced`字符串或指向您在示例 2 中定义的数组的开头。

**第二个**创建一个 char 数组（这是一种表示字符串的方式）。数组在函数执行期间存储并分配在堆栈上，您可以更改内容。因为它不是指针，所以不能将其更改为指向不同的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:17:20.823

```
char *str = "This is string"; 
```

将字符串放入`constant data section (also known as .rdata)`程序中。此数据不能修改。

```
char str2[20] = "This is string"; 
```

在这种类型的声明中，数据最好`stored in the stack area`是程序的，如果在里面声明，如果在里面`function scope`声明`data section`。`global scope`这个数据是可以修改的。

因此，如果您有必要修改数据，请使用第二种方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T13:27:29.850

`char *str = "This is string";`- 这会将文本段中的字符串保留为只读数据，并将地址存储在本地指针变量`str`中。

```
str[0] = 'a'; //This will leads to crash, because strings are in read only segment.
printf("%d",sizeof(str)); //This will print 4(in 32bit m/c) or 8(in 64 bit m/c) 
```

`char str2[20] = "This is string";`- 这会将字符串作为字符数组保存在本地堆栈中。

```
str2[0] = 'a'; //This will change the first character to a
printf("%d",sizeof(str2)); //This will print 20 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T12:03:31.590

C 没有字符串。所有的都是`char`数组。C 中的数组只是指向第一个元素的指针。

最简单的方法实际上是您的第一个变体。不为文字指定数组的显式长度将使您免于意外地执行类似的操作

```
char[3] = "abc"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T12:17:14.927

C 字符串在内存中是常量，因此：

```
char *str = "This is string"; 
```

将“This is string”存储在内存中并且它是不可变的，您只能为 str 分配另一个地址。

然而

```
char str2[20] = "This si string"; 
```

是的简写

```
char String2[20]={'T','h','i','s',' ','s','i',' ','s','t','r','i','n','g','\0'}; 
```

它不在内存中存储字符串，而是存储独立的字节。

如果你想使用像消息这样的常量字符串，那么使用第一行。如果您想像在文字处理器中那样使用和操作字符串，请使用第二个。

问候

# java - “附加组件”如何为原生应用程序工作？

> ID：12121763
> 
> 赞同：1
> 
> 时间：2012-08-25T12:01:11.590
> 
> 标签：java, android, iphone, windows-phone-7, deployment

我正在使用 GWT 和 PhoneGap 为 Android、iPhone/iPad 和 Windows Phone 设计一个应用程序。GWT 将允许我用 Java 编写整个应用程序（我的强项，与 JavaScript 或 CSS 不同）并将其翻译成跨浏览器的 JavaScript/AJAX。然后，PhoneGap 将包装生成的 JavaScript 并将其转换为上述三个平台中的每一个的本机应用程序。

我想要一个“面向插件的架构”，用户可以选择购买（或通过其他方式获得资格）“附加组件”（插件/扩展），这将增强应用程序的功能。

通常我会通过使用[Java 简单插件框架 (JSPF)](http://code.google.com/p/jspf/)来实现这一点，并允许用户在付费时下载插件 JAR。然后将这些插件 JAR 添加到主应用程序的类路径中，以便下次启动并扫描插件的类路径时，它会找到并加载它们。

**本机应用程序可以做到这一点吗？**我认为除了 APK、IPA 和 XAP（分别为 Android、iPhone 和 WinPhone）文件之外，我无法将任何其他文件部署到这些市场。

在 Java 领域，这就像必须以可执行 JAR（包含其自己的`main`方法）的形式下载“基础”应用程序，然后必须下载也是可执行 JAR 的“插件”应用程序，并且不知何故让两者表现得像一个普通的插件架构（如果你有 1 个可执行的 JAR 基础应用程序，然后有 1 个以上的插件不可执行的 JAR 库）。

所以我问：从部署/下载的角度来看，附加组件如何为原生应用工作？如何让 2 个或更多 APK/IPA/XAP 在客户端相互通信？如果不可能，原生应用程序开发人员如何处理附加组件（我知道它们存在，我见过它们！）？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:05:32.207

至于 iPhone - 唯一的方法是实现附加功能并禁用它们，直到用户在应用程序中购买以解锁该功能。

在 Android 中，您可以让应用程序相互通信，以便用户只需加载仅提供附加功能的附加应用程序。有关此的更多详细信息.. [两个应用程序之间的 android 通信](https://stackoverflow.com/questions/4638939/android-communication-between-two-applications)

WP8 - 我还没有经验

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T18:16:21.883

虽然我不是核心的 Android 开发者，但这里有一些我到目前为止使用 Android 的经验的建议：

Android 的一种可能解决方案是对应用程序使用更新。实现此目的的一种方法是使用后台服务，该服务在应用程序启动时检查更新，或使用 GCM（谷歌云消息传递）将更新消息推送到应用程序。第二种选择要好得多，因为您可以在每个设备的基础上向用户提供即时更新（用户可以拥有多个设备），只要他/她购买了您的附加功能。用户收到更新消息后，您可以下载具有新功能的整个应用程序并在设备上更新应用程序。当然在这种情况下，您需要备份应用程序的现有数据并在安装更新的应用程序后恢复。

我不知道这件事是否可以完成，但在我看来，如果您可以通过 Android Market 为购买了特定插件的合法用户提供更新的应用程序，这也是一个不错的选择。

另一种方法是将每个附加组件创建为[服务](http://developer.android.com/guide/components/services.html)，然后让主应用程序可以在启动时检测（或[绑定](http://developer.android.com/reference/android/content/Context.html#bindService%28android.content.Intent,%20android.content.ServiceConnection,%20int%29)）这些服务，如果它们可用，您的应用程序可以轻松地与它们通信。您甚至可以使用 Intents 和 BroadcastReceivers 从您的主应用程序中调用新部署的插件的 UI 部分。

就 Android 而言，您可能还会发现[这很有用：](http://developer.android.com/guide/components/fundamentals.html)

> 但是，应用程序可以通过多种方式与其他应用程序共享数据以及应用程序访问系统服务：
> 
> 可以安排两个应用程序共享同一个 Linux 用户 ID，在这种情况下，它们可以访问彼此的文件。为了节省系统资源，相同用户ID的应用程序也可以安排在同一个Linux进程中运行并共享同一个VM（应用程序也必须使用相同的证书进行签名）。

希望这能给你一些有用的信息。

# java - Java实现接口

> ID：12121768
> 
> 赞同：2
> 
> 时间：2012-08-25T12:01:52.883
> 
> 标签：java, interface, implements

这是我实现接口的尝试。

我收到以下错误

```
javac MyCollection.java
./au/edu/uow/Collection/DVDAlbum.java:6: cannot find symbol
symbol: class Album
public class DVDAlbum implements Album{ 
```

这是超级班

```
package au.edu.uow.Collection;

public interface Album {

    String getMediaType();

    String getTitle();

    String getGenre();

} 
```

这是子类

```
public class DVDAlbum implements Album{

    private String Title;
    private String Genre;
    private String Director;
    private String Plot;
    private String MediaType;

    public DVDAlbum(String TempTitle, String TempGenre, String TempDirector, String TempPlot){
        Title = TempTitle;
        Genre = TempGenre;
        Director = TempDirector;
        Plot = TempPlot;
    }
    String getMediaType(){
        return MediaType;
    }
    String getTitle(){
        return Title;
    }
    String getGenre(){
        return Genre;
    }
} 
```

[http://www.javabeginner.com/learn-java/java-abstract-class-and-interface](http://www.javabeginner.com/learn-java/java-abstract-class-and-interface) 这是我使用的参考，但它对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:08:01.187

如果您不在声明接口的同一包中，则需要导入它：

```
import au.edu.uow.Collection.Album; 
```

或使用完整的限定名称：

```
public class DVDAlbum implements au.edu.uow.Collection.Album{ } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:07:30.407

添加以下内容

```
import au.edu.uow.Collection.Album;

public class DVDAlbum implements Album{
    //....
} 
```

和

```
import au.edu.uow.Collection.DVDAlbum;
import au.edu.uow.Collection.Album;

public class MyCollection {
    //....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:04:32.867

检查您的接口包是否正确导入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T12:13:06.180

错误信息

```
./au/edu/uow/Collection/DVDAlbum.java:6: cannot find symbol 
```

意味着，`DVDAlbum`并且*打算*`Album`在同一个包中，因此没有必要。*`import`*

 *但是：由于缺少该行，因此不在`DVDAlbum`正确的包中。因此，只需将行从into`package`复制到.`package``Album``DVDAlbum`*

# ms-word - 文本文件作为 MS Word 中 MailMerge 的数据源 - 如何在字段中插入手动换行符而不是段落标记？

> ID：12121771
> 
> 赞同：0
> 
> 时间：2012-08-25T12:02:02.040
> 
> 标签：ms-word, newline, mailmerge

我创建了一个文本文件作为 microsoft word 中邮件合并的数据源。这很好用。现在，我有包含多行值的字段。当我在模板中使用此字段时，它会创建一个“硬”换行符（段落标记）。我必须在文本文件中插入什么，该词将创建“软”换行符（手动换行符）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T16:54:46.860

0x0b（即“垂直选项卡”）可能是唯一的方法，但我会检查您是否在输出中没有文档损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T10:58:34.037

首先：为糟糕的英语语法或词汇使用道歉。

*   方法是在 ms-word 中使用 {quote}，例如 {quote 11} 是换行符或 {quote 12} 是分页符。
*   要在文档中设置它，您应该熟悉字段。

按`Ctrl+F9`插入字段，然后在其中插入“quote ##”（## 是任意数字字符）。然后按`F9`Enter 并执行。

# android - CSS + Android + 毫米

> ID：12121772
> 
> 赞同：0
> 
> 时间：2012-08-25T12:02:11.347
> 
> 标签：android, css

任何人都知道我怎样才能让css毫米（mm）在android中看起来像一个真正的mm？在我的电脑上它工作正常。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:22:46.657

您可以尝试设置`viewport`元标记：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

移动浏览器中的所有比例都较小，导致默认情况下重新计算所有桌面尺寸，以便桌面网站可以适应小移动屏幕

# node.js - 将流式缓冲区转换为 utf8 字符串

> ID：12121775
> 
> 赞同：197
> 
> 时间：2012-08-25T12:02:24.213
> 
> 标签：node.js

我想使用 node.js 发出 HTTP 请求以从网络服务器加载一些文本。由于响应可以包含很多文本（一些兆字节），我想分别处理每个文本块。我可以使用以下代码实现这一点：

```
var req = http.request(reqOptions, function(res) {
    ...
    res.setEncoding('utf8');
    res.on('data', function(textChunk) {
        // process utf8 text chunk
    });
}); 
```

这似乎没有问题。但是我想支持 HTTP 压缩，所以我使用 zlib：

```
var zip = zlib.createUnzip();

// NO res.setEncoding('utf8') here since we need the raw bytes for zlib
res.on('data', function(chunk) {
    // do something like checking the number of bytes downloaded
    zip.write(chunk); // give the raw bytes to zlib, s.b.
});

zip.on('data', function(chunk) {
    // convert chunk to utf8 text:
    var textChunk = chunk.toString('utf8');

    // process utf8 text chunk
}); 
```

`'\u00c4'`这对于由两个字节组成的多字节字符可能是一个问题：`0xC3`和`0x84`. 如果第一个字节被第一个块 ( `Buffer`) 覆盖，第二个字节被第二个块覆盖，那么`chunk.toString('utf8')`将在文本块的结尾/开头产生不正确的字符。我怎样才能避免这种情况？

提示：我仍然需要缓冲区（更具体地说是缓冲区中的字节数）来限制下载的字节数。因此`res.setEncoding('utf8')`，在上面的第一个示例代码中对非压缩数据使用 like 不适合我的需要。

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2012-08-25T14:05:28.917

## 单缓冲器

如果你有一个`Buffer`，你可以使用它的[`toString`](http://nodejs.org/api/buffer.html#buffer_buf_tostring_encoding_start_end)方法，将所有或部分二进制内容转换为使用特定编码的字符串。如果您不提供参数，则默认为`utf8`，但我在此示例中明确设置了编码。

```
var req = http.request(reqOptions, function(res) {
    ...

    res.on('data', function(chunk) {
        var textChunk = chunk.toString('utf8');
        // process utf8 text chunk
    });
}); 
```

## 流式缓冲区

如果您在上面的问题中有流式缓冲区，其中多字节字符的第一个字节`UTF8`可能包含在第一个`Buffer`（块）中，第二个字节包含在第二个中，`Buffer`那么您应该使用[`StringDecoder`](http://nodejs.org/api/string_decoder.html). ：

```
var StringDecoder = require('string_decoder').StringDecoder;

var req = http.request(reqOptions, function(res) {
    ...
    var decoder = new StringDecoder('utf8');

    res.on('data', function(chunk) {
        var textChunk = decoder.write(chunk);
        // process utf8 text chunk
    });
}); 
```

这样，*不完整*字符的字节会被 缓冲，`StringDecoder`直到所有需要的字节都被写入解码器。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2016-10-02T12:02:07.663

```
var fs = require("fs");

function readFileLineByLine(filename, processline) {
    var stream = fs.createReadStream(filename);
    var s = "";
    stream.on("data", function(data) {
        s += data.toString('utf8');
        var lines = s.split("\n");
        for (var i = 0; i < lines.length - 1; i++)
            processline(lines[i]);
        s = lines[lines.length - 1];
    });

    stream.on("end",function() {
        var lines = s.split("\n");
        for (var i = 0; i < lines.length; i++)
            processline(lines[i]);
    });
}

var linenumber = 0;
readFileLineByLine(filename, function(line) {
    console.log(++linenumber + " -- " + line);
}); 
```

# objective-c - NSMutableArray 在调用 modalViewController 后被重置

> ID：12121776
> 
> 赞同：1
> 
> 时间：2012-08-25T12:02:27.010
> 
> 标签：objective-c, ipad, methods, nsmutablearray, modalviewcontroller

**由@TX 解决。我在代码中用“// SOLUTION”标记了更改！！！**

我有以下问题，如果我展示ModalViewController，NSMutableArray“projectsArray”会被重置。

这是我的代码：

这里是 .h 文件：

```
 // ViewController.h
#import <UIKit/UIKit.h>

@class AddProject;

@interface ViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
{
    IBOutlet UITableView *projectsTableView;
    UIAlertView *reallyDelete;

    BOOL candelButtonClicked;
    NSIndexPath *actualIndexPath;

    NSMutableArray *projectsArray;
    NSInteger ID;
    NSString *NAME;

    AddProject *addProject;
    **ViewController *viewContr; // SOLUTION**
}
- (IBAction)addNewProject:(id)sender;

- (void)addToTableView:(NSString *)projectName;

@property (nonatomic, retain) UIAlertView *reallyDelete;
@property (nonatomic) NSInteger cancelButtonIndex;

@property IBOutlet UITableView *projectsTableView;

@property (nonatomic, retain) AddProject *addProject;
**@property (nonatomic, retain) ViewController *viewContr; // SOLUTION**

@end 
```

这里是 .m 文件：

```
 // ViewController.m
#import "ViewController.h"
#import "CustomTableCell.h"
#import "AddProject.h"

@interface ViewController ()

@end

@implementation ViewController

**@synthesize viewContr; // SOLUTION**

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    projectsArray = [[NSMutableArray alloc] init];
    ViewController *element = [[ViewController alloc] init];

    element->ID = 1;
    element->NAME = @"Demo project";
    NSLog(@"viewdidload");
    [projectsArray addObject:element];

    NSLog(@"1\. Array length: %d", [projectsArray count]);
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    if ([projectsArray count] < 1) {
        NSLog(@"2\. Array length: 0");
        return 0;
    } else {
        NSLog(@"2\. Array length: %d", [projectsArray count]);
        return [projectsArray count];
    }
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 78;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *customTableCellIdentifier = @"CustomTableCell";

    CustomTableCell *cell = (CustomTableCell *)[tableView dequeueReusableCellWithIdentifier:customTableCellIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"CustomTableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    ViewController *element = [[ViewController alloc] init];
    element = [projectsArray objectAtIndex:indexPath.row];
    cell.nameLabel.text = element->NAME;
    cell.prepTimeLabel.text = [NSString stringWithFormat:@"%i", element->ID];

    NSLog(@"3\. Array length: %d", [projectsArray count]);

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath {

    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source

        reallyDelete = [[UIAlertView alloc] initWithTitle:@"Deleting" message:@"Do your really want to delete that row?" delegate:self cancelButtonTitle:@"No" otherButtonTitles:@"Yes", nil];
        [reallyDelete show];

        actualIndexPath = indexPath;
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    if (buttonIndex != [reallyDelete cancelButtonIndex])
    {
        //If "Yes" clicked delete
        [projectsArray removeObjectAtIndex:actualIndexPath.row];
        NSLog(@"delete row");

        [self.projectsTableView deleteRowsAtIndexPaths:[NSMutableArray arrayWithObjects:actualIndexPath, nil] withRowAnimation:YES];
        [self.projectsTableView reloadData];
    }
}

#pragma mark Edit

- (IBAction)addNewProject:(id)sender {
    NSLog(@"4\. Array length: %d", [projectsArray count]);

    AddProject *addProjectView = [[AddProject alloc] initWithNibName:@"AddProject" bundle:nil];
    NSLog(@"4.1 Array length: %d", [projectsArray count]);
    addProjectView.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
    NSLog(@"4.2 Array length: %d", [projectsArray count]);
    addProjectView.modalPresentationStyle = UIModalPresentationFormSheet;
    NSLog(@"4.3 Array length: %d", [projectsArray count]);
    **addProjectView.viewContr = self; // SOLUTION**
    [self presentModalViewController:addProjectView animated:YES];
    NSLog(@"4.4 Array length: %d", [projectsArray count]);
    addProjectView.view.superview.frame = CGRectMake(addProjectView.view.center.x/2.5, addProjectView.view.center.y/3, 800, 600);
    NSLog(@"4.5 Array length: %d", [projectsArray count]);
}

- (void)addToTableView:(NSString *)projectName
{
    NSLog(@"Project Array: %@", projectsArray);
    NSLog(@"addToTableView: %@", projectName);    
    NSLog(@"5\. Array length: %d", [projectsArray count]);

    ViewController *element = [[ViewController alloc] init];

    element->ID = 2;
    element->NAME = projectName;

    [projectsArray addObject:element];

    NSLog(@"6\. Array length: %d", [projectsArray count]);

    [self.projectsTableView reloadData];
    [self.projectsTableView setNeedsDisplay];
}

- (void)viewDidUnload
{
    [self setProjectsTableView:nil];
    self.projectsTableView = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

这里是模态视图的 .h 文件：

```
 // AddProject.h
#import <UIKit/UIKit.h>

@class ViewController;

@interface AddProject : UIViewController
{    
    IBOutlet UITextField *projectName;

    ViewController *viewContr;
}

- (IBAction)back:(id)sender;
- (IBAction)next:(id)sender;

@property (nonatomic, retain) ViewController *viewContr;

@end 
```

模态呈现文件的 .m 文件：

```
 // AddProject.m
#import "AddProject.h"
#import "ViewController.h"

@interface AddProject ()

@end

@implementation AddProject

**@synthesize viewContr; // SOLUTION I've mist to synthesize it**

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    **// SOLUTION no new allocation/init of ViewController**
}

- (IBAction)back:(id)sender
{
    [self dismissModalViewControllerAnimated:YES];
}

- (IBAction)next:(id)sender
{
    [viewContr addToTableView:projectName.text];
    [viewContr.projectsTableView reloadData];
    [viewContr.projectsTableView setNeedsDisplay];
    [self dismissModalViewControllerAnimated:YES];
}

- (void)viewDidUnload
{
    projectName = nil;
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

@end 
```

我已经使用断点测试了代码，并且可以在 AddProject 类“viewDidLoad”开始加载时找到问题。但我不知道为什么它会重置数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:24:05.213

您应该在视图控制器的 init 方法中分配 projectsArray，而不是在 viewDidLoad 中。`projectsArray = [[NSMutableArray alloc] init];`加载视图时分配一个新的空数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T16:25:53.403

`ViewController`您从一个屏幕导航到另一个`Add project`屏幕。在`Add Project`Screen 中，您添加了一个新项目，并希望将此信息委托给`ViewController`您来自的 Screen。

现在，您尝试`ViewController`在您的 中创建一个实例，您`AddProject`在方法中新实例化了该实例，`viewDidLoad`并且在添加项目时，您通过调用`- (void)addToTableView:(NSString *)projectName`它来向它提供信息。这不起作用，因为 -`ViewController`您分配的实例是一个新实例，而不是您从中导航的实例。当你这样做时，`alloc + init`你会得到一个新对象。因此，尽管您在`addToTableView:`上被调用`ViewController`，但它不起作用，因为`ViewController`接收此消息的实例是一个新实例，而不是您从中导航的实例。

因此，您需要做的就是 - 在您的 中拥有一个`ViewController`属性，`Add Project`您可以在导航之前设置它。然后您可以向此属性发送消息 - 如[本](https://chat.stackoverflow.com/transcript/message/5086958#5086958)脚本中所述。

我想说 - 但是这个东西有效，它提供了两个控制器之间的紧密耦合。

理想情况下，这可以通过将`ViewController`（您从哪里导航）作为`Add Project`（您导航到哪里）的代表来完成。然后`Add Project`可以将添加的项目委托给它的委托，例如`- (void) addProjectController:(AddProjectViewController *) controller didAddProject:(NSString *) projectName`. 这提供了两个视图控制器之间的丢失耦合。要了解委托概念，请参阅[委托和数据源](http://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)。或者，搜索其他堆栈溢出帖子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:46:44.607

好的，我的问题已通过 stackoverflow 聊天解决。最终解决方案的提示来自用户@TX。我在问题的代码中添加了提示。它们标有“// SOLUTION”。

> 在添加项目视图控制器的 viewDidLoad 方法中，删除行 `viewContr = [[ViewController alloc] init];`。`viewContr`现在让你的类中的变量 成为`ViewController`一个属性。也合成它。最后在`- (IBAction)addNewProject:(id)sender`方法中，在呈现控制器之前，执行`- addProjectView.viewContr = self;`. 它将解决您的问题。

（引自[chat.stackoverflow](https://chat.stackoverflow.com/transcript/message/5086958#5086958) | [@TX](https://stackoverflow.com/users/1082071/t-x)）

# iphone - 如何在 iphone sdk 中创建/生成 .docx 文件

> ID：12121782
> 
> 赞同：0
> 
> 时间：2012-08-25T12:03:18.677
> 
> 标签：iphone, sdk

我正在编辑 .docx 和 .doc 文件并进行编辑我正在使用 webview。当用户完成他的编辑时，我从 webview 中提取了所有 HTML 内容并尝试用 .docx 标签替换 html 标签。现在这不好从 Webview 生成 .docx/.doc 文件的方法。除了上面我如何生成 .docx 文件之外，任何人都知道吗？

# android - 在应用退出时保存 Android 应用数据

> ID：12121783
> 
> 赞同：4
> 
> 时间：2012-08-25T12:03:22.343
> 
> 标签：android, persistence

似乎有大量关于保存**Activity状态的信息，但我在查找****应用程序**状态时找不到太多信息。

我正在寻找一些设计理念来解决我遇到的问题。我正在开发一个具有相当大数据模型（1-2 MB）的游戏。该模型存在于任何 Activity 之外，实际上有许多 Activity 都与它交互。这些活动是短暂的，一直来来去去。

我目前在我的应用程序中保留一个指向数据模型的指针，所有活动都通过它访问数据模型。如果我的应用程序被终止，我需要保存该数据模型，但是每次活动点击 onPause 时保存它太慢了，随着活动的来来去去，这种情况经常发生。

我需要一种方法来确定我的应用程序（以及我的数据模型）正在被破坏。我已经广泛搜索了这个方法或回调，但结果都是空的。

我将不胜感激任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T12:20:32.780

> 在查找应用程序状态时，我无法找到很多东西。

这是因为在 Android 中没有“应用程序状态”，就像在 Web 应用程序中一样。

> 但是每次活动点击onPause时保存它太慢了

虽然您的整个数据模型可能是“1-2 MB”，但对于任何给定的更改，*更改*的数据量将只是其中的一小部分。使用后台线程并且只修改已更改的数据。

> 随着活动的来来去去，这种情况经常发生

听起来你可能有太多的活动。

> 我需要的是一种方法来确定我的应用程序（以及我的数据模型）正在被破坏

这是不可能的。你永远不会发现你正在被摧毁。Android 可以并且将在没有警告的情况下终止您的进程，无论是应用户请求（例如，强制关闭、任务杀手）还是出于操作系统原因（例如，需要 RAM 来处理来电）。

欢迎您使用`onUserLeaveHint()`，当您的整个应用程序失去前台时，在许多情况下都会调用它，但我当然不会指望它作为持久数据模型这样重要的事情。

# applescript - AppleScript 打开“打开最近”文件

> ID：12121803
> 
> 赞同：1
> 
> 时间：2012-08-25T12:06:22.590
> 
> 标签：applescript

是否可以使用 AppleScript 打开最近的文件？我尝试了以下脚本，但它不起作用。

```
on run
    try
        tell application "System Events"
            set theApp to (get name of first process whose frontmost is true)
            click menu bar item "Archivio" of menu bar 1 of process theApp
            click menu item "Apri recente" of menu "Archivio" of menu bar item "Archivio" of menu bar 1 of process theApp
            click menu item " test" of menu "Apri recente" of menu item "Apri recente" of menu "Archivio" of menu bar item "Archivio" of menu bar 1 of process theApp
        end tell
    end try
end run 
```

错误是

> --> 错误号 -1728 来自 «class menE» 的 «class menE» 的 "test" «class menI» 的 "Apri recente" «class menE» 的 "Archivio" «class mbri» 的 "Archivio" «class mbar» 1 of «class prc» "AppleScript Editor"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:41:47.153

**当“ Apri recente** ”子菜单打开时，这似乎是一个错误。但这不是必需的，您可以一键完成。

```
tell application "System Events"
    tell (get first process whose frontmost is true)
        click menu item " test" of menu "Apri recente" of menu item "Apri recente" of menu "Archivio" of menu bar item "Archivio" of menu bar 1
    end tell
end tell 
```

# javascript - Javascript / jQuery 获取所有 url 参数并添加/更改一个

> ID：12121810
> 
> 赞同：5
> 
> 时间：2012-08-25T12:07:17.567
> 
> 标签：javascript, jquery, url, parameters

我有以下网址

```
http://www.domain.com?page=options&tab=general 
```

我希望能够访问 tab 参数并更改它，例如

我有两个选项卡“常规”和“样式”，当我单击样式时，我希望更改一个隐藏字段（具有此 url 作为值），以便它读取相同的 url，但将 tabs 参数更改为样式。所以它看起来像这样

```
http://www.domain.com?page=options&tab=styles 
```

但是，加载页面时，此 url 可能没有参数选项卡，因此我需要能够向 url 查询字符串添加参数。

会有更多选项卡，所以我不能只用样式替换文本一般

有人知道吗？谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T12:13:48.847

```
var s = "http://www.domain.com?page=options&tab=general"
var queryString = s.substring(s.lastIndexOf("?") + 1);
var newQueryString = $.map(queryString.split("&"), function(pair) { 
  var p = pair.split("="); 
  if (p[1] == "general") { 
    p[1] = "styles";
    return p.join("=");
  } else { 
    return pair;
  } 
}).join("&"); 
```

# google-earth - Google Earth API 不会在本地主机上加载地图

> ID：12121811
> 
> 赞同：0
> 
> 时间：2012-08-25T12:07:19.200
> 
> 标签：google-earth, google-earth-plugin

[尽管这个答案](https://stackoverflow.com/questions/3514785/loading-a-local-kml-file-using-google-maps)说了什么，我仍然能够将 KML 加载到谷歌地图中，​​但我的问题是没有来自谷歌服务器的数据。我得到的只是谷歌地球插件附带的默认纹理的模糊地图。将相同的 html 文件上传到公共 Web 服务器是可行的。

![在此处输入图像描述](../Images/5d03b5814773899a60fd480a5b3bb68e.png)

谷歌可能正在发送`window.location`并检查它是否可以从他们的末端访问该 URL - 如果不能，那么它会拒绝对地图数据的任何访问。这是为了防止人们在本地部署应用程序（例如 Intranet）而不购买许可证。我希望能够在本地发展，这限制了这种能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-21T09:55:53.923

我遇到了同样的问题，帮助我的是在我的路由器上打开服务器的 HTTP 端口（如果你有防火墙，你也需要在那里打开端口）。

# iphone - 改变uidraw中的颜色变化

> ID：12121812
> 
> 赞同：1
> 
> 时间：2012-08-25T12:07:23.883
> 
> 标签：iphone, ios, xcode, ipad, drawing

嗨，有什么方法可以通过按钮以编程方式更改颜色？

>

```
-(void)drawToBuffer {

//                  Red  Gr   Blu  Alpha
CGFloat color[4] = {0.0, 0.0, 0.0, 1.0};

if (self.previousPoint != nil) {
    CGContextSetRGBStrokeColor(offScreenBuffer, color[0], color[1], color[2], color[3]);

    CGContextBeginPath(offScreenBuffer);
    CGContextSetLineWidth(offScreenBuffer, 5.0);
    CGContextSetLineCap(offScreenBuffer, kCGLineCapRound);

    CGContextMoveToPoint(offScreenBuffer, previousPoint.location.x, previousPoint.location.y);
    CGContextAddLineToPoint(offScreenBuffer, point.location.x, point.location.y);

    CGContextDrawPath(offScreenBuffer, kCGPathStroke);
} 
```

}

这属于 uidraw 视图，我希望在我的应用程序中为 UiDraw 创建一个橡皮擦功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:51:00.913

只需将颜色值更改为白色...即更改 color[4]={1.0,1.0,1.0,1.0} 即白色...

颜色采用 r,g,b,a 作为颜色分量，浮点值范围为 0.0 到 1.0，int 值范围为 1 到 255。组件 a 代表透明度。

# java - 为什么 HashMap 中较高的负载因子会增加查找成本？

> ID：12121816
> 
> 赞同：7
> 
> 时间：2012-08-25T12:07:54.377
> 
> 标签：java, hashmap, hashtable, hash

从 JavaDoc 的`HashMap`：

> 作为一般规则，默认负载因子 (.75) 在时间和空间成本之间提供了良好的折衷。较高的值会减少空间开销，但会增加查找成本（反映在 HashMap 类的大多数操作中，包括 get 和 put）。

如果我们有更高的值，为什么会增加查找成本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-25T12:16:21.657

哈希表的[*负载因子*](http://en.wikipedia.org/wiki/Hash_table#Load_factor)定义为

> n/s，存储条目数 n 与表的桶数组大小 s 的比值。

当冲突数量较少时，哈希表的高性能得以保持。当负载因子高时，存储相同数量的条目所需的哈希桶数保持较低，从而增加了冲突的概率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-13T18:10:12.327

这里我们首先要了解一下容量和负载率是什么意思：

容量：这是任何给定时间点任何哈希表中的桶数。

负载因子：负载因子是哈希表在其容量自动增加之前允许达到的程度的度量

因此，在容量增加之前，哈希表可能会占用更多的负载因子。

*   现在考虑到 hashCode() 的最佳实现，**只有一个值会放在一个桶中**，这里查找成本将是**最低的**
*   在最坏的情况下，所有值都将放在同一个桶中，并且查找成本将是**最大的**
*   在**一般情况下**，这肯定取决于 hashCode() 实现，但这里还有一个因素是负载因子，**因为集合被占用的越多，冲突的机会就越大，因此更高的负载因子会增加查找非理想情况下的成本。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T12:16:03.430

它与 HashTable 的底层实现方式有关，它使用哈希码，由于计算哈希码的算法并不完美，可能会发生一些冲突，增加负载因子会增加发生冲突的概率，从而减少查找性能...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T12:17:18.507

默认负载系数 (0.75)。

```
If declare load factor as
1 the restructuring process only happens when number of elements are exceeding the capacity of the HashMap. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-17T16:32:35.350

负载因子 0.75 可以使用公式（n/s，存储条目数 n 与表的存储桶数组的大小 s 的比率。）这样解释：

假设你有 75 个值需要存储在哈希表中，并且你有 100 个空数组块来存储它们，这里冲突的机会被最小化并且负载因子为 0.75。

现在假设您有 75 个值要存储并且只有 10 个空数组块（负载因子 7.5），这意味着您将遇到冲突并使用任何会增加搜索时间的冲突解决技术。

现在你有 75 个条目和 1000 个空数组块（负载因子 0.075），这将导致很多空块，这会浪费很多空间。

因此，经验法则是随着负载因子值的增加，您的搜索时间将增加，并且当它接近 0 时，会浪费更多的存储空间。

因此，这是一个时空交易。

# android - 完成除一项以外的所有活动

> ID：12121818
> 
> 赞同：5
> 
> 时间：2012-08-25T12:08:10.983
> 
> 标签：android, android-activity, activity-finish

当我使用此方法时，我会返回登录页面，但我仍然可以单击返回按钮，它会将我返回到上一个活动。为什么它不关闭其他活动？

```
public void restartApplication() {
        Intent i = getBaseContext().getPackageManager().getLaunchIntentForPackage(getBaseContext().getPackageName());
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(i);   
    } 
```

有没有办法完成除了登录活动之外的所有活动？或重新启动整个应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:31:39.640

我认为由于包管理器，活动开始于一个新的历史堆栈。

尝试使用活动名称而不是从包管理器中获取。例如。

```
Intent i = new Intent(getApplicationContext(), LoginActivity.class);
i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:24:57.310

尝试放在`finish();`后面`startActivity(i);`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:31:41.743

尝试使用这个 intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 代替 intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

```
Intent intent = new Intent(getApplicationContext(),
        yourActivity.class);
intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

startActivity(intent); 
```

# ruby-on-rails - Rails 3 下的混合远程和非远程形式

> ID：12121823
> 
> 赞同：0
> 
> 时间：2012-08-25T12:08:50.873
> 
> 标签：ruby-on-rails, forms, jquery

在我的应用程序中，我有一个包含两个提交的表单：一个是典型的提交按钮，它创建一个对象并将用户重定向到它。另一个旨在充当“保存并继续”按钮，该按钮远程创建对象，显示成功闪烁，并清除表单而不将用户发送到不同的页面。

这将如何实施？我对带有 jQ​​uery 的 AJAX 大致熟悉，并且有一些其他形式在整个站点中使用它，但我找不到创建混合表单的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:34:44.697

这不是一个漂亮的方法，但这有效。在`create`控制器中的操作上，当您完成保存记录时，您可以放置​​一些条件逻辑来实现不同的重定向，如下所示：

```
respond_to do |format|
  if @model.save
    if params[:commit] == "Save"
      # Redirect to saved object
    elsif params[:commit] == "Save and Continue"
      # Redirect to other places
    end
  end
end 
```

存储提交按钮的`params[:commit]`字符串，因此您可以使用它来构建混合表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T06:38:10.860

MurifoX 的答案是正确的。这是我所做的事情：

```
 if @model.save
    if params[:commit] == "Save"
      render js: %(window.location.pathname='#{object_path @object}')
    elsif params[:commit] == "Save and Continue"
      respond_to do |format|
        format.js do
          @object = Object.new
          render 'new'
        end
      end
    end
  end 
```

基本上，表单已将远程设置为 true 以正确响应 AJAX 请求（jQuery.ajaxSetup({ 'beforeSend': function(xhr) {xhr.setRequestHeader("Accept", "text/javascript")} 也被使用）。如果单击“保存”，浏览器将通过 JavaScript 重定向到相应的页面。如果单击“保存并继续”，则用于加载表单的相同 _partial.js.erb 会再次 AJAX用一个新对象来清除表单。在实际的代码中，我还做了一个闪烁来显示新对象已经创建。

# iphone - 出现键盘时滚动 Group tableView

> ID：12121826
> 
> 赞同：2
> 
> 时间：2012-08-25T12:09:10.213
> 
> 标签：iphone, objective-c, ios, uitableview, uitextview

我正在尝试创建一个视图，用户可以在其中输入他的信息（姓名、电子邮件、简历...）。

为此，我使用了一个包含 5 个部分 (0..4) 的组表视图，每个部分都有一个具有`UITextField`内部的单元格（第 4 节中具有`UITextView`内部的单元格除外）。

当用户点击其中一个 textFields/textView 时，会出现键盘，并且单元格（带有选定的 textField/textView）滚动到键盘上方的位置。

我的问题是第 4 节的 textView，当键盘出现时，它会以某种方式自动滚动单元格以使其可见，但不完全位于正确的位置（文本视图的一半隐藏在键盘后面）。
当我尝试自己进行滚动时（在键盘完成动画后），我得到了一个难看的 textView 反弹。

看起来难看的反弹的原因是当键盘出现+我的滚动时textView自动滚动。这种（自动滚动）行为仅发生在 textView 中，例如，如果我在第 4 节中使用 textField 而不是 textView，它不会自动滚动。

所以问题是：我怎样才能平滑地将 textView 滚动到正确的位置？

这是我的代码：

```
#pragma mark - UITableViewDataSource

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 5;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];

    switch (indexPath.section) {
        case 0:
            [cell.contentView addSubview:self.textField1];
            break;
        case 1:
            [cell.contentView addSubview:self.textField2];
            break;
        case 2:
            [cell.contentView addSubview:self.textField3];
            break;
        case 3:
            [cell.contentView addSubview:self.textField4];
            break;
        case 4:
            // this is the text view
            [cell.contentView addSubview:self.textView];
            break;
        default:
            break;
    }

    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    return cell;
}

#pragma mark - UITextFieldDelegate

- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField {
    self.activeResponder = textField;
    return YES;
}

#pragma mark - UITextViewDelegate

- (BOOL)textViewShouldBeginEditing:(UITextView *)textView {
    self.activeResponder = textView;
    return YES;
}

- (void)keyboardWillShow:(NSNotification*)notification {
    NSLog(@"keyboard show");
    CGFloat animationDuration = [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];
    CGRect keyboardFrame = [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];

    CGRect tableViewFrame = self.tableView.frame;
    tableViewFrame.size.height -= keyboardFrame.size.height;

    [UIView animateWithDuration:animationDuration delay:0.0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
        self.tableView.frame = tableViewFrame;
    } completion:^(BOOL finished) {
        [self scrollToActiveResponder];
    }];
}

- (void)keyboardWillHide:(NSNotification*)notification {
    NSLog(@"keyboard hide");
    CGFloat animationDuration = [[[notification userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];
    CGRect keyboardFrame = [[[notification userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue];

    CGRect tableViewFrame = self.tableView.frame;
    tableViewFrame.size.height += keyboardFrame.size.height;

    [UIView animateWithDuration:animationDuration delay:0.0 options:UIViewAnimationOptionBeginFromCurrentState animations:^{
        self.tableView.frame = tableViewFrame;
    } completion:^(BOOL finished) {
    }];
}     

- (NSIndexPath *)indexPathForActiveResponder {
        NSIndexPath *indexPath = nil;
        if (self.activeResponder == self.textField1) {
            indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
        }
        else if (self.activeResponder == self.textField2) {
            indexPath = [NSIndexPath indexPathForRow:0 inSection:1];
        }
        else if (self.activeResponder == self.textField3) {
            indexPath = [NSIndexPath indexPathForRow:0 inSection:2];
        }
        else if (self.activeResponder == self.textField4) {
            indexPath = [NSIndexPath indexPathForRow:0 inSection:3];
        }
        else if (self.activeResponder == self.textView) {
            indexPath = [NSIndexPath indexPathForRow:0 inSection:4];
        }
        return indexPath;
    } 

- (void)scrollToActiveResponder {
    NSIndexPath *activeResponderIndexPath = [self indexPathForActiveResponder];
    if (activeResponderIndexPath) {
        [self.tableView scrollToRowAtIndexPath:activeResponderIndexPath atScrollPosition:UITableViewScrollPositionNone animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-26T03:17:41.053

我会尝试这样的事情：

。H

```
@interface YourViewController : UIViewController <UITextViewDelegate> 
```

.m

```
//Set delegate to your textView
textView.delegate = self

#pragma mark - TextView Delegate
//TextView Became First Responder
- (void)textViewDidBeginEditing:(UITextView *)textView{

    NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:4];

    // Other way to get the IndexPath
    //NSIndexPath *indexPath = [self.tableView indexPathForCell:(UITableViewCell *)[[textView superview] superview]];

    CGRect frame = [self.tableView rectForRowAtIndexPath:indexPath];

    //It only works for Portrait iPhone
    CGFloat keyboardHeight = 216.0f;

    CGPoint offset = CGPointMake(0, self.view.frame.size.height - keyboardHeight - frame.size.height - frame.origin.y);
    [self.tableView setContentOffset:offset animated:YES];

} 
```

我没有测试它，但这就是我尝试解决这个问题的方式。您可以在此处找到有关如何计算键盘大小的更多信息：( [http://www.idev101.com/code/User_Interface/keyboard.html](http://www.idev101.com/code/User_Interface/keyboard.html) )

# php - 使用 AND 作为条件

> ID：12121829
> 
> 赞同：1
> 
> 时间：2012-08-25T12:09:24.790
> 
> 标签：php

我遇到了一个使用以下代码的 wordpress 主题：

```
is_file and include 'file.php'; 
```

我以前从未见过这个，所以我很困惑。它在我正在查看的特定 wordpress 主题中运行良好。但是，如果我只使用那行代码并自行运行它，它会包含该文件，但也会给我以下通知：

```
Notice: Use of undefined constant is_file - assumed 'is_file' in (the file path) on line 3 
```

但如果我这样做：

```
is_file('file.php') and include 'file.php'; 
```

它工作正常。

问题 1：为什么这有效，我在哪里可以阅读更多关于使用“和”作为条件的信息？

问题 2：这是不好的编码习惯吗？是不是比较慢？有什么风险吗？等等。

问题 3：为什么它可以在 wordpress 主题中工作，但不能单独工作？（是的，我使用相同的 PHP 设置）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:23:44.823

AND 指令可以被视为一个函数

```
function and($a, $b)
{
    if($a) return $b;
    else return $a;
} 
```

只有一个**例外**。当您将表达式作为第二个参数传递时，当 $a 为 false 时，**它​​甚至不会被执行。**这是内置的语言优化，保证以这种方式运行。通过这种方式，您可以编写一系列表达式，仅当之前的每个表达式都为 false 时才会执行。它是非常常用的功能，不仅在 PHP 中，它不被认为是不好的做法。

同样的事情是关于 $a 或 $b：

```
function or($a, $b)
{
    if($a) return $a;
    else return $b;
} 
```

遗憾的是对wordpress知之甚少。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:19:57.210

在这种情况下，`and`意思是“如果陈述是真的，就这样做”。所以你的 Wordpress 中的代码是不正确的：

```
is_file and include 'file.php' 
```

因为常量应该是大写的。即使它们在这种情况下表示常数，也没有意义。

```
is_file('my_file') and include 'my_file.php' 
```

是正确的方法。

同样的方式，您可以使用`or`：“如果语句为假，则执行此操作”，例如

```
$payed or my_redirect_function('pay.php'); //go to payment page 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T12:20:27.093

```
is_file('file.php') and include 'file.php'; 
```

它有效，因为`is_file('file.php')`返回`TRUE`

```
is_file and include 'file.php'; 
```

它没有用，因为`is_file`什么都不返回。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-25T12:18:34.743

第`and`一个检查左操作数，如果为假，则不需要检查右操作数。

我记得在某处读过它。让我看看能不能找到链接。

# objective-c - 词法或预处理器问题：将 flite1.4-iphone 库用于 TTS 时？

> ID：12121833
> 
> 赞同：1
> 
> 时间：2012-08-25T12:09:55.373
> 
> 标签：objective-c, ios, text-to-speech

我正在使用

> flite1.4-iphone

在我的文字转语音应用程序中。我正在关注此链接-[请参见此处](https://bitbucket.org/sfoster/iphone-tts/)

但我得到了错误

> 词法或预处理器问题：未找到 flite.h

是的，我在谷歌上搜索了这个并应用了我找到的所有解决方案，比如关闭 Xcode 并重新打开、清理项目等，但仍然找不到解决方案。任何人都可以帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:35:44.620

问题是编译器找不到`flite.h`；查看 sfoster/iPhone TTS，似乎该文件是在`flite-1.4-iphone/include/`目录中提供的。

要让编译器找到该文件，请添加所在的目录`flite.h`（例如，添加`$(SRCROOT)/flite-1.4-iphone/include/`到项目的 Header Search Paths 中。（有关如何修改路径的详细信息，请参阅[此 SO Q&A ）。](https://stackoverflow.com/questions/5269029/header-search-path-in-xcode-4)

# jpa - @GeneratedValue 与 TABLE 策略的含义

> ID：12121840
> 
> 赞同：2
> 
> 时间：2012-08-25T12:11:02.583
> 
> 标签：jpa, primary-key

JPA 规范对注解给出了以下解释`@GeneratedValue(strategy=TABLE)`：

> 生成器`TABLE`类型值指示持久性提供程序必须使用底层数据库表为实体分配主键以确保唯一性。

但是“使用底层数据库表”在实践中意味着什么？这是否意味着使用辅助表？还是通过扫描实体表来查找未使用的 ID？或者是其他东西？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-25T12:22:14.713

查看[JavaDoc`TableGenerator`](http://docs.oracle.com/javaee/6/api/javax/persistence/TableGenerator.html)，它有一个很好的例子来说明它是如何工作的：

示例 1：

```
@Entity public class Employee {
    ...
    @TableGenerator(
        name="empGen", 
        table="ID_GEN", 
        pkColumnName="GEN_KEY", 
        valueColumnName="GEN_VALUE", 
        pkColumnValue="EMP_ID", 
        allocationSize=1)
    @Id
    @GeneratedValue(strategy=TABLE, generator="empGen")
    int id;
    ...
} 
```

示例 2：

```
@Entity public class Address {
    ...
    @TableGenerator(
        name="addressGen", 
        table="ID_GEN", 
        pkColumnName="GEN_KEY", 
        valueColumnName="GEN_VALUE", 
        pkColumnValue="ADDR_ID")
    @Id
    @GeneratedValue(strategy=TABLE, generator="addressGen")
    int id;
    ...
} 
```

基本上`ID_GEN`是键值对的内部（非业务）表。每次 JPA 想要生成 ID 时，它都会查询该数据库：

```
SELECT GEN_VALUE
FROM ID_GEN
WHERE GEN_KEY = ... 
```

并增加`GEN_VALUE`列。这种机制可用于模拟序列或进一步控制生成的 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:20:31.360

对于 EclipseLink，它使用一个辅助表。[文件](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Entities/Ids/GeneratedValue)说

> 默认情况下，EclipseLink`TABLE`使用名为`SEQUENCE`, with`SEQ_NAME`和`SEQ_COUNT`columns的表选择策略

# c# - 如何按表名填充 DropDownButton

> ID：12121841
> 
> 赞同：-1
> 
> 时间：2012-08-25T12:11:04.820
> 
> 标签：c#, winforms, datatable

在项目中，我有 db01.accdb 数据库
db01DataSet 是由 vs 2010 中的添加新数据源向导创建的。

我正在尝试将项目添加到 DdropDownButton

```
private void Form1_Load(object sender, EventArgs e)
{
foreach (DataTable dt in db01DataSet.Tables) {
drop01.DropDownItems.Add(dt.TableName);
}} 
```

错误：非静态字段、方法或属性需要对象引用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:22:15.987

尝试从数据库中获取表名：使用此查询

```
SELECT MSysObjects.Name AS table_name FROM MSysObjects WHERE (((Left([Name],1))<>"~") 
    AND ((Left([Name],4))<>"MSys") 
    AND ((MSysObjects.Type) In (1,4,6))) order by MSysObjects.Name 
```

这将为所有 MS 访问表名称提供...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T13:01:46.163

尝试使用 TableName 代替：

```
drop01.DropDownItems.Add(dt.TableName); 
```

但是，当前发布的代码不会产生任何内容，因为 DataSet 刚刚创建并且其中没有任何表。如果 db01DataSet 是由向导创建的，那么您不应该创建“新”数据集，只需使用提供的数据集。

# solr - 使用 Apache solr 搜索 Dublin Core 中的所有字段

> ID：12121842
> 
> 赞同：1
> 
> 时间：2012-08-25T12:11:10.233
> 
> 标签：solr

[这里](https://wiki.duraspace.org/display/ISLANDORA6122/APPENDIX+D+-+SOLR+SCHEMA+%28SEARCH%29+Term+Reference)描述了我们如何配置 Apache Solr 来指定搜索字段。

Dublin Core 中有一些字段，如类型、标题、主题和...，但没有像所有字段这样的字段。

我知道有一种方法可以解决这个问题，因为这里有一个实现：http: [//demo.projectblacklight.org/](http://demo.projectblacklight.org/)

有没有像 dc.all_field 这样的东西？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:28:56.197

您可以使用将所有字段复制到另一个字段的[copyField来执行此操作：](http://wiki.apache.org/solr/SchemaXml)

```
<copyField source="*" dest="all"/> 
```

# winapi - MapViewOfFileEx - 有效的 lpBaseAddress

> ID：12121843
> 
> 赞同：6
> 
> 时间：2012-08-25T12:11:10.833
> 
> 标签：winapi, memory, memory-management

在回答有关将不连续的文件块映射到连续内存的[问题](https://stackoverflow.com/questions/10454964/mapping-non-contiguous-blocks-from-a-file-into-contiguous-memory-addresses)时，一位受访者建议我应该使用[VirtualAllocEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx) () 和 MEM_RESERVE，以便为最终 (lpBaseAddress) 参数建立一个“安全”值对于[MapViewOfFileEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366763%28v=vs.85%29.aspx) ()。

进一步调查显示，这种方法会导致 MapViewofFileEx() 失败并出现错误 487：“尝试访问无效地址”。 [MSDN 页面说](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366887%28v=vs.85%29.aspx)：

> “在用于映射的区域中不能进行其他内存分配，包括使用 VirtualAlloc 或 VirtualAllocEx 函数来保留内存。”

虽然关于有效调用序列的文档可能被认为是模棱两可的，但实验表明使用 VirtualAllocEx() 为 MapViewOfFileEx() 保留内存是无效的。

在网上，我找到了带有硬编码值的示例 -[示例](http://publib.boulder.ibm.com/infocenter/comphelp/v7v91/index.jsp?topic=/com.ibm.vacpp7a.doc/proguide/ref/xumemex1.htm)：

```
#define BASE_MEM     (VOID*)0x01000000 
```

...

```
hMap = MapViewOfFileEx( hFile, FILE_MAP_WRITE, 0, 0, 0, BASE_MEM ); 
```

对我来说，这似乎是不够的和不可靠的......我还不清楚为什么这个地址是安全的，或者有多少块可以安全地映射到那里。考虑到我需要我的解决方案在其他分配的上下文中工作……而且我需要我的源代码在 32 位和 64 位上下文中编译和工作，这似乎更加不稳定。

我想知道的是，是否有**任何**方法可以可靠地保留地址空间池，以便 - 随后 - MapViewOfFileEx 可以可靠地使用它来将块映射到显式内存地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-26T11:38:44.547

您几乎自己解决了问题，但没有完成最后一小步。如您所想，使用`VirtualAlloc`(with `MEM_RESERVE`) 在您的地址空间中查找空间，但之后（和之前`MapViewOfFileEx`）使用`VirtualFree`(with `MEM_RELEASE`)。现在地址范围将再次空闲。然后使用与 相同的内存地址（由 返回`VirtualAlloc`）`MapViewOfFileEx`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T15:59:11.590

如果您提供基地址，该函数将尝试将您的文件映射到该地址。如果它不能使用该基地址（因为某些东西已经在使用全部或部分请求的内存区域），那么调用将失败。

对于大多数应用程序，尝试自己修复地址没有任何意义。如果您是一个复杂的数据库进程，并且出于效率原因，您正在尝试在具有已知配置的机器上仔细管理自己的内存布局，那么这可能是合理的。但你必须为失败做好准备。

在 64 位进程中，虚拟地址空间非常开放，因此可以确定地选择基地址，但我认为我不会打扰。

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366763%28v=vs.85%29.aspx)：

> 虽然可以指定一个现在安全的地址（操作系统不使用），但不能保证该地址会随着时间的推移保持安全。因此，最好让操作系统来选择地址。

我相信“随着时间的推移”是指操作系统的未来版本以及您正在使用的任何运行时库（例如，用于内存分配），这可能会采用不同的内存布局方法。

还：

> 如果 lpBaseAddress 参数指定基本偏移量，则如果指定的内存区域尚未被调用进程使用，则函数成功。系统不确保相同的内存区域可用于其他 32 位进程中的内存映射文件。

所以基本上，你的直觉是对的：指定基地址是不可靠的。你可以尝试，但你必须为失败做好准备。

所以直接回答你的问题：

> 我想知道的是，是否有任何方法可以可靠地保留地址空间池，以便 - 随后 - MapViewOfFileEx 可以可靠地使用它来将块映射到显式内存地址。

不，没有。并非没有对运行时环境施加许多约束（例如，限制为特定版本的操作系统、为所有 DLL 设置基地址、禁止 DLL 注入等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T18:38:43.730

你试图做的事情是不可能的。

从[MapViewOfFileEx 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366763%28v=vs.85%29.aspx)中，您提供的指针是“指向映射开始的调用进程地址空间中的内存地址的指针。这必须是系统内存分配粒度的倍数，否则函数会失败。”

[内存分配粒度为 64K](http://blogs.msdn.com/b/oldnewthing/archive/2003/10/08/55239.aspx)，因此您无法将文件中的不同 4K 页映射到虚拟内存中相邻的 4K 页。

# javascript - 使用 JavaScript 进行计数

> ID：12121849
> 
> 赞同：2
> 
> 时间：2012-08-25T12:12:01.030
> 
> 标签：javascript, count, countdown

我正在尝试用 Javascript 制作计数动画。也就是说，动画将从 0 开始，然后，给定动画持续时间，计数到给定的数字。这在Javascript中可能吗？
此外，是否可以仅在用户向下滚动到页面上的该点时播放动画？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:30:22.393

```
(function (e) {
    setTimeout(function () {
         e += 1;
    }, 1000).call(this, 0); 
```

毕竟，这很重要吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:17:15.410

你试过看看`setInterval(func, delay[, param1, param2, ...])`方法吗？

来自 Mozilla 开发者网络：

> 重复调用函数或执行代码片段，每次调用该函数之间有固定的时间延迟。

请参阅：[https ://developer.mozilla.org/en-US/docs/DOM/window.setInterval?redirectlocale=en-US&redirectslug=window.setInterval](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval?redirectlocale=en-US&redirectslug=window.setInterval)

为了说明如何使用该`setInterval`方法创建一个从 0 开始计数并每秒递增的简单计数器，我创建了这个 jsFiddle：http: [//jsfiddle.net/zrccC/](http://jsfiddle.net/zrccC/) - 该示例还说明了如何清除计时器。

# ruby-on-rails - 如何在 Ruby on rails 中使用 Rspec Capybara 和 Factory Girl 计算循环

> ID：12121850
> 
> 赞同：0
> 
> 时间：2012-08-25T12:12:41.937
> 
> 标签：ruby-on-rails, ruby, unit-testing, rspec, capybara

这个问题是关于我做的一个**测试**，以验证用户页面中的所有 50 个微博都显示

我有这个 rspec 代码：

```
 before(:all) { 50.times {FactoryGirl.create(:micropost, 
                                   user:user, content: "Lorem Ipsum") } } 
```

我想让每个内容更加动态，例如：

```
"Lorem Ispum 0"
"Lorem Ipsum 1"
"Lorem Ipsum 2"
... 
```

我试着写：

```
let(:count_helper) { 0 }
before(:all) { 50.times {FactoryGirl.create(:micropost, 
                                       user:user, 
                                       content: "Lorem Ipsum #{count_helper}") 
                         count_helper += 1} } 
```

它在这里失败了：

```
count_helper += 1 
```

怎样才能写对？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:28:38.417

```
let(:count_helper) { 0 }
before(:all) { 50.times {FactoryGirl.create(:micropost, 
                                       user:user, 
                                       content: "Lorem Ipsum #{count_helper}");
                                       count_helper += 1 } } 
```

注意末尾的分号`FactoryGirl.create(:micropost, user:user, content: "Lorem Ipsum #{count_helper}")`

由于您使用的是单行块语法，因此您应该明确告诉 Ruby 这`count_helper += 1`是另一个语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:40:32.023

这就是代码的编写方式：

```
 before(:all) { 50.times do |count|
                     FactoryGirl.create(:micropost, user:user, 
                     content: "Lorem Ipsum #{count}") 
                   end } 
```

我有两个错误：

1.  当内部只允许一个时创建 2 个代码行`{}`- 我将其更改为`do ... end`

2.  我添加了 |count| 循环的变量，帮助我计算循环

# java - 无法在 Android 中访问网络服务

> ID：12121857
> 
> 赞同：1
> 
> 时间：2012-08-25T12:14:03.190
> 
> 标签：java, android, web-services

无法使用某种 Android 访问 Web 服务。我正在使用 Eclipse 和 ksoap2 库。网上流传的所有代码我都试过了。我正在做的错误在哪里。我再次安装了所有东西，但没有帮助。

[截屏](http://oi48.tinypic.com/2pqke20.jpg)

**错误日志**

08-25 11:32:51.872: E/Trace(972): 打开跟踪文件时出错: 没有这样的文件或目录 (2)

08-25 11:32:56.143: E/dalvikvm(972): 找不到类 'org.ksoap2.serialization.SoapObject'，引用自方法 com.knnklz.webservice04.MainActivity$2.run

08-25 11:32:56.193：E/AndroidRuntime(972)：致命异常：Thread-93

08-25 11:32:56.193: E/AndroidRuntime(972): java.lang.NoClassDefFoundError: org.ksoap2.serialization.SoapObject

08-25 11:32:56.193: E/AndroidRuntime(972): at com.knnklz.webservice04.MainActivity$2.run(MainActivity.java:277)

**安卓Java代码**

```
tx = (TextView)findViewById(R.id.textView1);            

            try {
                SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);
                request.addProperty("Celsius", "85");
                SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

                envelope.dotNet = true;
                envelope.setOutputSoapObject(request);
                HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                androidHttpTransport.debug = true;
                androidHttpTransport.call(SOAP_ACTION, envelope);
                SoapPrimitive response = (SoapPrimitive) envelope.getResponse();

                tx.setText(response.toString());

            } catch (Exception e1) {
                e1.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:19:56.033

您会收到此错误的原因只有三个：

1.  这个类真的不存在。如果您使用官方示例中的代码并获取此代码，请确保您拥有该库的最新版本
2.  您尚未将 jar 添加到构建路径中。要解决此问题，请右键单击 Eclipse 中的 jar，然后执行 Build Path ► Add to Build Path。
3.  您的 jar 不在 /libs 文件夹中。当您将 jar 添加到构建路径时会发生这种情况，但较新版本的 ADT 需要它位于 /libs 中。将其放在那里并将其重新添加到构建路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:20:16.920

在项目目录中创建一个名为“ **libs** ”的文件夹，并将所有外部 jar 文件复制到那里。

Make sure you have added the ksoap library to the Build Path by by right clicking on the jar file and "**Add it to build**"

Plus make sure you are using the latest version of the ksoap library. [Direct download link](http://ksoap2-android.googlecode.com/svn/m2-repo/com/google/code/ksoap2-android/ksoap2-android-assembly/2.6.5/ksoap2-android-assembly-2.6.5-jar-with-dependencies.jar).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-26T06:12:02.490

I removed the following line, and improved.

File: **AndroidManifest.xml**

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

# javascript - plone 能否将 JavaScript 置于底层？

> ID：12121858
> 
> 赞同：2
> 
> 时间：2012-08-25T12:14:07.590
> 
> 标签：javascript, plone

Yslow 建议 javascript 应该放在底部。但是，Plone 的所有系统 javascript 都放在首位。我们可以把js放在底层吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:53:47.830

可能通过将 viewlet 管理器移动到 main_template 的底部来实现。我没想到会产生重大影响。还有许多其他因素会影响网站的性能……只是其中之一。如果您的页面渲染时间从 500 毫秒下降到 450 毫秒……谁在乎？没有人会注意到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T19:17:26.670

您可以在控制面板中使用 Google 分析槽。它将在底部呈现您的脚本。不过，不要期望加载大量代码。为此，您必须通过代码创建一个新的 viewlet。

# c# - 在 newwindow 事件中访问 newwindow

> ID：12121860
> 
> 赞同：2
> 
> 时间：2012-08-25T12:14:18.347
> 
> 标签：c#, internet-explorer-7, interop, webbrowser-control, new-window

我在我的应用程序中使用 webbrowser 控件从特定网页获取数据。此网页不适用于旧版 IE，因为它专门检查 IE 版本。所以我做了一个注册表更改，允许我的应用程序作为 IE 9 工作，并且大部分时间一切正常......

问题是何时必须打开一个新窗口。它不会显示任何东西。我猜newwindow被承认为IE 7，我不知道如何让它伪装成IE9。

我也尝试了相反的方法。我认为如果我截获了新窗口 url，那么我可以将它发送到 IE9 或在另一个 webbrowser 控件实例中打开它。但是 newwindow 事件只允许取消事件。你不能从中得到任何有用的信息。

我相信互操作服务是我需要的，但我对它们一无所知。

所以我有两个问题：
（1）我可以让新窗口识别为IE9吗？（以及如何...）
（2）如何使用互操作服务（或任何东西，我不在乎）获取新窗口 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T16:35:14.447

很奇怪（从我的角度来看）WebBrowser 控件没有显示更有用的 NewWindow3 事件。

[这篇 CodeProject 文章描述了一种非常简单的方法来使其可用。](http://www.codeproject.com/Articles/71592/How-to-easily-capture-the-NewWindow3-event-and-det)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T12:12:36.920

在 NewWindow 事件中，假设您的第一个 Wb 控件名为 WB1，而您要重定向到的那个是 WB2，请在 WB1 NW 事件中执行以下操作。

```
Processed = True ' This cancels the current request.
WB2.Navigate URL ' This redirects it to the second WB2 control. 
```

否则，如果要使用 NW2 (NewWindow2) 事件而不是 NewWindow (NW) 事件，请在 WB1 控件的 NW2 事件中执行此操作。

```
Set ppDisp = WB2.object ' Just swaps the objects around to redirect, don't need to issue a cancel. 
```

此外，您可以通过 BeforeNavigate2（WB1 的）执行此操作。但代码略有不同。

```
Cancel = True ' Cancel Request.
WB2.Navigate2 URL ' Reissue it to WB2. 
```

现在，只要您控制它重定向到的位置，如果我没记错的话，您可以使用 WB2.LocationURL 或 Wb2.Document.URL 轻松获取新窗口 URL。

另外，如果你想把渲染引擎改成IE9（即使你的电脑上安装了IE9，WB控件也会使用IE7渲染引擎来兼容）……网上有文章和关于SO的答案（包括我之前的一些答案） ) 其中阐明了如何更改注册表以确保 WB 控件使用的渲染引擎与已安装版本 (IE9) 的渲染引擎相同，否则将始终使用 IE7。而且，如果您在一台机器上安装了 IE4、5 或 6，它将始终使用 IE4 作为渲染引擎。我认为他们会在 3-4 次版本更改后更新渲染版本。我假设在版本 10 期间，WB 控制渲染版本也将是版本 10。

如果您需要更多帮助，请告诉我，我很想知道您的相处方式以及这是否有助于回答您的问题。我所有的例子都在 VB6 中，但是你可以很容易地转换它们。

干杯。

# javascript - Javascript 正则表达式无法按预期工作

> ID：12121871
> 
> 赞同：1
> 
> 时间：2012-08-25T12:16:48.217
> 
> 标签：javascript, regex

我将变量中的页面中的 HTML 作为纯文本。现在我需要删除文本的某些部分。这是我需要更改的 HTML 的一部分：

```
<div class="post"><a name="6188729"></a>
    <div class="igmline small" style="height: 20px; padding-top: 1px;">
        <span class="postheader_left">
            <a href="#"  style="font-size:9pt;"> RuneRifle </a>
            op 24.08.2012 om 21:41 uur
        </span>
        <span class="postheader_right">
            <a href="http://link">Citaat</a> <a href="http://link">Bewerken</a>
        </span>
        <div style="clear:both;"></div>
    </div>
    <div class="text">Testforum</div>
    <!-- Begin Thank -->
    <!-- Thank End -->
</div> 
```

这些替换工作：

```
pageData = pageData.replace(/href=\".*?\"/g, "href=\"#\"");
pageData = pageData.replace(/target=\".*?\"/g, ""); 
```

但是这个替换根本不起作用：

```
pageData = pageData.replace(
  /<span class=\"postheader_right\">(.*?)<\/span>/g, ""); 
```

我需要删除每个`span`类`postheader_right`及其中的所有内容，但它不起作用。我对正则表达式的了解不是很好，所以如果你能告诉我你是如何得出你的答案的，并对其工作原理做一个小的解释，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:20:04.580

点与换行符不匹配。使用`[\s\S]`而不是点，因为它将匹配所有空白字符或非空白字符（即任何东西）。

As Mike Samuel says regular expressions are not really the best way to go given the complexity allowed in HTML (e.g., if say there is a line break after `<a`), especially if you have to look for attributes which may occur in different orders, but that's the way you can do it to match the case in your example HTML.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:24:19.507

> I need to remove every span with the class postheader_right and everything in it, but it just doesn't work.

Don't use regular expressions to find the spans. [Using regular expressions to parse HTML: why not?](https://stackoverflow.com/questions/590747/using-regular-expressions-to-parse-html-why-not)

```
var allSpans = document.getElementsByClassName('span');
for (var i = allSpans.length; --i >= 0;) {
  var span = allSpans[i];
  if (/\bpostheader_right\b/.test(span.className)) {
    span.parentNode.removeChild(span);
  }
} 
```

should do it.

If you only need to work on newer browsers then [`getElementsByClassName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByClassName) makes it even easier:

> Find all div elements that have a class of 'test'
> 
> ```
> var tests = Array.filter( document.getElementsByClassName('test'), function(elem){
>   return elem.nodeName == 'DIV';
> }); 
> ```

# javascript - 通过 Jquery 在 html5 中更改视频（不同质量）文件

> ID：12121872
> 
> 赞同：3
> 
> 时间：2012-08-25T12:16:52.903
> 
> 标签：javascript, jquery, html, html5-video

Moto：当用户单击按钮时，通过 Jquery 更改正在播放的视频。示例网站：[http](http://sublimevideo.net) ://sublimevideo.net （点击播放器控件中的“hd”按钮）

详细地：

在页面加载时，浏览器将播放源中给出的第一个视频（url：“The-Dark.mp4”）。我想要的是，当用户单击高清按钮（控件）时，浏览器应该播放下一个（url：“The-Dark-hd.mp4”）

它是我的 HTML 代码：

```
 <source src="asserts/The-Dark.mp4" type="video/mp4;" data-quality="sd"></source>            
        <source src="asserts/The-Dark-hd.mp4" type="video/mp4;" codecs="&quot;avc1.42E01E, mp4a.40.2&quot;" data-quality="hd"></source>

        <source src="asserts/The-Dark.ogg" type="video/ogg;" codecs="&quot;theora, vorbis&quot;"></source>

        <source src="asserts/The-Dark-hd.ogg" type="video/ogg;" codecs="&quot;theora, vorbis&quot;"></source>
</video> 
```

请让我知道我需要遵循的 Jquery

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-25T12:26:53.360

```
$('source', 'video')​​.eq(1).prependTo('video');
$('video')[0].load();
$('video')[0].play(); 
```

[**小提琴**](http://jsfiddle.net/bY9mH/)

# php - 如何为mysql数组中的每一行执行一个函数？

> ID：12121878
> 
> 赞同：1
> 
> 时间：2012-08-25T12:17:42.733
> 
> 标签：php, mysql, arrays

更新：我使用 for 循环解决了它：

```
for ($i=0; $i < mysql_num_rows($result); $i++) { 
$row = mysql_fetch_assoc($result);
echo $row['name'];
} 
```

原始问题：

这看起来有点愚蠢。我敢肯定我错过了一些非常简单的东西，因为我之前能够做到这一点。无论如何，我想为数组中的每个项目回显一些文本。这个数组是从 mySQL 派生的。

这是代码

```
while ($row = mysql_fetch_assoc(mysql_query("SELECT * FROM files"))) {
echo $row['name'];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:25:42.530

你能发布完整的代码吗？我想你忘记了数据库连接。

尝试这个：

```
 $result = mysql_query("SELECT * FROM files") or die (mysql_error());
    while ($row = mysql_fetch_assoc($result)) {
        var_dump($row['name']);
    } 
```

这会抛出一个错误，我猜你在那里犯了一个错误。此外， var_dump() 您的 $row 可以 100% 确保您具有“a”值。

另外，您确定该行确实存在吗？如果没有任何记录，则 $row 上的回显将不起作用，因为它不存在。

另外，像这样将错误报告设置为 E_ALL。

```
 error_reporting(E_ALL); 
```

此外，由于您在 while() 循环内运行查询，因此它将永远继续运行。因此，首先运行查询，并将其放入变量中，然后循环遍历结果。（见我上面的一段代码）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:27:04.527

您可以单独执行查询而不是 while 循环，因为如果您的查询返回超过 1 行，它将进入循环。显示您的循环仅打印结果的第一个数据，并且您的循环是无限的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:44:34.690

从您的问题来看，它似乎很简单，试试这种方式它的工作原理。

```
 $sql="SELECT name From files";
    $names = $db->query($sql);
    while($name1 = $db->fetchByAssoc($names))
    {
        echo $name1['name'];
    } 
```

# php - htmlspecialchars 不允许换行？

> ID：12121880
> 
> 赞同：3
> 
> 时间：2012-08-25T12:17:49.363
> 
> 标签：php

我在 mysql 字段中出现了以下内容，

```
 Hello there
 world 
```

当我使用此代码格式化上述内容时：

```
 echo htmlspecialchars($thestring) 
```

它输出这个，

```
 Hello there<br/><br/>world 
```

我怎样才能让它做换行符？

我想继续使用 htmlspecialchars 来帮助处理其他 html 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-05T13:01:36.767

您需要调用`nl2br`以将换行符转换为 html：

```
nl2br(htmlspecialchars($text)) 
```

[http://php.net/manual/en/function.nl2br.php](http://php.net/manual/en/function.nl2br.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-07T06:35:37.763

```
<![CDATA[<br/>]]>
```

这对我有用

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-06T12:07:01.093

如果您`<br>`在字符串中获得标签之后`htmlspecialchars()`，则意味着您的`<br>`字符串中有确切的标签（不是`\n`换行符），因为`htmlspecialchars()`不会转换`\n`为`<br>`.

如果是这样，您必须进行往返的双重`<br>`转换`\n`：

**步骤 1.**转换`<br>`为`\n`

**步骤 2.**运行`htmlspecialchars()`

**步骤 3.**转换`\n`为`<br>`

例子：

```
 <?php
        echo
            str_replace(  // Step 3
                "\n",
                "<br />",
                htmlspecialchars(  // Step 2
                    str_replace(  // Step 1
                        array("<br />", "<br/>", "<br>"), // make sure that you have your version of <br> tag here
                        "\n", 
                        $text
                    ),
                    ENT_QUOTES,
                    'UTF-8'
                )
            );
    ?> 
```

# python - 如何使用 python 获取 UTC 日期时间、自动检测用户时区并将日期时间转换为所需格式？

> ID：12121882
> 
> 赞同：6
> 
> 时间：2012-08-25T12:18:09.677
> 
> 标签：python, datetime, timezone, utc

关于 UTC 日期时间转换有很多问题，而且似乎没有就“最佳方式”达成共识。

据此：[http](http://lucumr.pocoo.org/2011/7/15/eppur-si-muove/) ://lucumr.pocoo.org/2011/7/15/eppur-si-muove/，pytz 是最好的方法。他展示了像这样转换为时区，`datetime.datetime.utcnow().replace(tzinfo=pytz.utc)`但他没有说如何获取用户的时区......

这家伙[https://stackoverflow.com/a/7465359/523051](https://stackoverflow.com/a/7465359/523051)说“`localize`调整夏令时，`replace`没有”

我看到的每个使用 pytz 的人都在提供他们自己的时区（`users_timezone = timezone("US/Pacific")`），我不明白，因为你不知道那是不是你的观众在哪里......

这家伙[https://stackoverflow.com/a/4771733/523051](https://stackoverflow.com/a/4771733/523051)有一种自动检测时区的方法，但这是使用`dateutil`库，而不是 pytz，正如 Armin Ronacher 和官方 python 文档（[http ://docs.python.org/library/datetime.html#strftime-and-strptime-behavior](http://docs.python.org/library/datetime.html#strftime-and-strptime-behavior)，就在黄色框的那个锚点上方）

我需要的是最简单、面向未来、所有夏令时/等考虑的方式来获取我的 datetime.utcnow() 标记 ( `2012-08-25 10:59:56.511479`)，并将其转换为用户的时区。并像这样显示它：

```
Aug 25 - 10:59AM 
```

如果年份不是当年，我想说

```
Aug 25 '11 - 10:59AM 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T13:55:19.033

好的，这就是（也是我对 SO 的第一个贡献 :)）

它确实需要 2 个外部库，这可能会导致一些问题......

```
from datetime import datetime
from dateutil import tz
import pytz

def standard_date(dt):
    """Takes a naive datetime stamp, tests if time ago is > than 1 year,
       determines user's local timezone, outputs stamp formatted and at local time."""

    # determine difference between now and stamp
    now = datetime.utcnow()
    diff = now - dt

    # show year in formatting if date is not this year
    if (diff.days / 365) >= 1:
        fmt = "%b %d '%y @ %I:%M%p"
    else:
        fmt = '%b %d @ %I:%M%p'   

    # get users local timezone from the dateutils library
    # http://stackoverflow.com/a/4771733/523051
    users_tz = tz.tzlocal()

    # give the naive stamp timezone info
    utc_dt = dt.replace(tzinfo=pytz.utc)
    # convert from utc to local time
    loc_dt = utc_dt.astimezone(users_tz)
    # apply formatting
    f = loc_dt.strftime(fmt)

    return f 
```

# php - preg_replace 任何东西，包括点和斜线

> ID：12121883
> 
> 赞同：0
> 
> 时间：2012-08-25T12:18:15.330
> 
> 标签：php, regex, preg-replace

对于小型模板引擎，我正在尝试使用 preg_replace 替换

`{INCLUDE:dir/file.inc.php}`

使用适当的 PHP 等效项。

我尝试使用以下内容，但包含路径中的 / 会导致“除以零”错误：

`$template = preg_replace('~\{INCLUDE:(.*?)}~', '<?php echo $1; ?>', $template);`

（preg_replace 中的 echo 用于调试目的，最终将包含）

当我从包含路径中删除 / 时（所以它只是 file.inc.php），它仍然会删除所有点。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:42:02.897

如果我理解正确，我认为这应该可以正常工作

```
$template = preg_replace('~{INCLUDE:(.*?)}~', '<?php include \'$1\'; ?>', $template); 
```

您的问题是由未引用的 $1 引起的。

# jquery - 显示覆盖以覆盖整个页面

> ID：12121885
> 
> 赞同：5
> 
> 时间：2012-08-25T12:18:41.050
> 
> 标签：jquery, css, iframe, overlay

我有一个在`iframe`. 我需要显示一个覆盖 div 来覆盖整个页面。问题是覆盖当前仅显示在该`iframe`区域中，而不是覆盖整个页面，（我们的应用程序（一个子应用程序）是一组正在加载的应用程序的一部分`iframe`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:33:50.123

你可以做这样的事情

```
<div id="overlay"></div> 
```

**CSS**

```
#overlay
{

  position:fixed;
  top:0;
  left:0;
  bottom:0;
  right:0;
  height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  background: #000000;
  opacity: .3;
  filter: alpha(opacity=30);
  -moz-opacity: .3;
   z-index: 101;
} 
```

**[样本](http://jsfiddle.net/Y7adq/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:26:40.127

尝试类似的东西；

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="EN">
<head>
<style type="text/css">
html 
{
 overflow: auto;
}

html, body, div, iframe 
{
 margin: 0px; 
 padding: 0px; 
 height: 100%; 
 border: none;
}

iframe 
{
 display: block; 
 width: 100%; 
 border: none; 
 overflow-y: auto; 
 overflow-x: hidden;
}
</style>
</head>
<body>

<iframe id="tree" name="myiframe" src="http://www.your_page.com/" frameborder="0" marginheight="0" marginwidth="0" width="100%" height="100%" scrolling="auto"></iframe>

</body>
</html> 
```

或者你可以使用 JavaScript 之类的；

```
<script type="Text/JavaScript" language="JavaScript">
<!--
function resize_iframe()
{
    var height=window.innerWidth;//Firefox
    if (document.body.clientHeight)
    {
        height=document.body.clientHeight;//IE
    }
    //resize the iframe according to the size of the
    //window (all these should be on the same line)
    document.getElementById("cam").style.height=parseInt(height-
    document.getElementById("cam").offsetTop-8)+"px";
}

// this will resize the iframe every
// time you change the size of the window.
window.onresize=resize_iframe; 

//Instead of using this you can use: 
//  <BODY onresize="resize_iframe()">

</script>
</head>
<body>
<iframe id="cam" width="100%" scrolling="yes" src="http://www.your_page.com" onload="resize_iframe()">
</iframe>
</body> 
```

希望这可以帮助。

# node.js - 类型错误：对象# 没有方法'flash'

> ID：12121887
> 
> 赞同：6
> 
> 时间：2012-08-25T12:18:50.527
> 
> 标签：node.js, express

使用 Node.js 和 Express 时出现以下错误。这是我的版本：

```
Node : v0.8.8
Express: 3.0.0rc3 
```

尝试访问页面时出现以下错误：

```
TypeError: Object #<IncomingMessage> has no method 'flash'
    at routes (/Users/nblavoie/Desktop/HotPie/HotPie/apps/authentication/routes.js:23:8) 
```

我试图删除 app.use(app.router); 从 app.js 没有成功。这是导致错误的代码。请参阅 req.flash 行。

```
app.post('/sessions', function(req, res)
{
    if(req.body.user == 'piechief' 
        && req.body.password == '12345')
    {
        req.session.currentUser = req.body.user;
        req.flash('info', "You're logged in as #{req.session.currentUser}");
        res.redirect("/login");
        return;
    }
    else
    {
        req.flash('error', "Those credentials were incorrect. Try again.");
        res.redirect("/login");
        return;
    }
}); 
```

这是我的 app.js 中有趣的部分：

```
var app = express();

app.configure(function(){
  app.set('port', process.env.PORT || 3000);
  app.set('views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(express.favicon());
  app.use(express.logger('dev'));
  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({
    secret: "DBBD6BE563419EDB0E5CBD228E603D4AD232CE05434B4FA95C6908B64EA515C3",
    store: new RedisStore({
      host: "127.0.0.1",
      port: "6379",
      db: "mydb"
    })
  }));
  app.use(app.router);
  app.use(express.static(path.join(__dirname, '/public')));
}); 
```

请问有什么想法吗？我看了一下[Express'flash 文档](http://extjs.github.com/Connect/flash.html)，但看不出我做错了什么。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-25T12:23:55.953

`req.flash`[自3.0](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)起已被删除：

> *   `req.flash()`（只使用会话：`req.session.messages = ['foo']`或类似的）
> *   [connect-flash](https://github.com/jaredhanson/connect-flash)可以用作提供 req.flash() 的中间件

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-13T14:56:20.150

这为我解决了

[https://github.com/jaredhanson/passport/issues/61](https://github.com/jaredhanson/passport/issues/61)

现在我的护照 app.configure 看起来像这样：

```
app.configure(function (){
    app.use(express.cookieParser('keyboard cat'));
    app.use(express.session({ cookie: { maxAge: 60000 }}));
    app.use(passport.initialize());
    app.use(passport.session());
    app.use(flash());
}) 
```

# php - 如何在 wordpress 中使用 json API 获取上传的文件

> ID：12121893
> 
> 赞同：3
> 
> 时间：2012-08-25T12:19:57.607
> 
> 标签：php, json, wordpress, api

使用 json-api 获取上传的文件/图像

我想使用 json api 获取上传的文件，例如图像。请向我提供获得结果的步骤/参数。

[http://wordpress.org/extend/plugins/json-api/](http://wordpress.org/extend/plugins/json-api/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-13T18:19:25.287

您是否阅读过该插件附带的文档？

[http://wordpress.org/plugins/json-api/other_notes/](http://wordpress.org/plugins/json-api/other_notes/)

# javascript - 使 JavaScript 代码适用于任何元素

> ID：12121897
> 
> 赞同：1
> 
> 时间：2012-08-25T12:20:22.143
> 
> 标签：javascript, html, javascript-events

```
document.getElementById("but").onclick = showDropDown;

function showDropDown(e) {
    document.getElementById("but").onclick = function() {};
    if (e.stopPropagation) e.stopPropagation(); // W3C model
    else e.cancelBubble = true; // IE model
    document.getElementById("window").style.display = "inline-block";
    document.onclick = function(e) {
        var ele = document.elementFromPoint(e.clientX, e.clientY);
        if (ele == document.getElementById("but")) {
            hideDropDown();
            return;
        }
        do {
            if (ele == document.getElementById("window")) return;
        } while (ele = ele.parentNode);
        hideDropDown();
    };
}

function hideDropDown() {
    document.onclick = function() {};
    document.getElementById("window").style.display = "none";
    document.getElementById("but").onclick = showDropDown;
}​

<input id="but" type="button" value="pressMe" />
<div id="window" style="display:none">popup</div> 
```

演示：http: [//jsfiddle.net/nazym/](http://jsfiddle.net/nazym/)

我试图使用变量而不是指定元素的名称使 JavaScript 代码动态化，但我做不到。它总是返回错误。我想将它与不同的元素联系起来。

**更新**
我想`id`用变量替换 JavaScript 代码中元素的 s，这样我就可以将它与任何元素一起使用。我试图这样做但失败了。基本上，我想使用变量而不是`id`元素的 s 并以某种方式再次将其链接到元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T12:24:29.400

将代码更改为

```
var showDropdown = function(e) { ... };
document.getElementById("but").onclick = showDropDown; 
```

换句话说，在分配之前将函数存储在变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:37:54.287

在您的代码中：

```
> document.onclick = function(e){ 
```

在支持 IE 事件模型的浏览器中，`e`将是未定义的。为了适应这些浏览器，您可以使用：

```
 e = e || window.event; 
```

要查找被点击的元素，而不是：

```
>   var ele = document.elementFromPoint(e.clientX, e.clientY); 
```

你可以做：

```
 var ele = e.target || e.srcElement; 
```

*这将在比elementFromPoint*更多的浏览器中工作，因此应该更可靠和更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-25T12:49:02.900

改用参数：

```
function showDropDown(element, e) {

    element.onclick = function() {};

    // ....

    hideDropDown(element);

} 
```

你会给元素它的 onclick 事件处理程序，如下所示：

```
document.getElementById('but').onclick = function(event) {
    showDropDown(this, event);
}; 
```

***演示：http:*** [//jsfiddle.net/xNSZm/](http://jsfiddle.net/xNSZm/)

# iphone - 使用多线程时如何锁定方法？

> ID：12121906
> 
> 赞同：0
> 
> 时间：2012-08-25T12:21:17.353
> 
> 标签：iphone, ios, multithreading, ipad, nsthread

如何停止第二个线程以访问第一个线程正在使用的相同方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:25:19.973

一种选择是在方法中使用@synchronized。

```
- (NSString *)someMethod {
  @synchronized(self) {
      // do some work
  }
} 
```

它允许调用该方法，但会自行同步并保护它的工作（更重要的是它正在处理的数据）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:27:36.217

看看 NSLock。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLock_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLock_Class/Reference/Reference.html)

刚刚在寻找 C# lock 语句时发现它，它似乎做同样的事情..

还有另一个与同步有关的 SO 线程：

[在 Objective-C 中 @synchronized 如何锁定/解锁？](https://stackoverflow.com/questions/1215330/how-does-synchronized-lock-unlock-in-objective-c)

# java - java中对象验证的API

> ID：12121911
> 
> 赞同：-1
> 
> 时间：2012-08-25T12:21:54.177
> 
> 标签：java, validation

我在网上搜索在 java 中找到一个验证框架。我找到了几个选择，例如：

*   [屏幕](http://www.i-screen.org/)
*   [Apache 通用验证器](http://commons.apache.org/validator/)
*   Spring Validation Framework（我不知道更多）

所有这些框架都有几个好处和选项，也涵盖了我的要求。

我的问题是：是否有任何`API`验证框架？

（我在'Script Language Invocation'中需要这个要求并通过' [Apache BSF（Bean Scripting Framework）](http://commons.apache.org/bsf/) '解决，它是在java中调用脚本的抽象层）

我不知道java中的验证框架，如果我的问题是错误的对不起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T13:20:33.487

bean 验证 API 已通过 Java Community Process 标准化为[JSR-303](http://jcp.org/en/jsr/detail?id=303)，并包含在[Java EE 6 规范](http://www.oracle.com/technetwork/java/javaee/tech/index.html)中。

关于实现见

[是否有可用的 JSR-303（bean 验证）实现？](https://stackoverflow.com/questions/1384968/is-there-an-implementation-of-jsr-303-bean-validation-available)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T12:59:23.667

我一直发现 OVal 是一个非常有用的验证库 - [http://oval.sourceforge.net/](http://oval.sourceforge.net/)

# c# - 如何通过 TcpClient 获取页面？

> ID：12121912
> 
> 赞同：4
> 
> 时间：2012-08-25T12:21:54.907
> 
> 标签：c#, http, tcp, httpwebrequest, tcpclient

我正在尝试通过 TCP 流向页面发送 GET 请求。

这是我的代码的样子：

```
public class SocketLevelWebClient
{
    public string SendWebRequest(string url, string request)
    {
        using(TcpClient tc = new TcpClient())
        {
            tc.Connect(url, 80);

            using (NetworkStream ns = tc.GetStream())
            {
                using (System.IO.StreamWriter sw = new System.IO.StreamWriter(ns))
                {
                    using (System.IO.StreamReader sr = new System.IO.StreamReader(ns))
                    {
                        sw.Write(request);
                        sw.Flush();
                        return sr.ReadToEnd();
                    }
                }
            }
        }
    } 
```

以及请求本身：

```
 SocketLevelWebClient wc = new SocketLevelWebClient();
            var r=wc.SendWebRequest("www.youtube.com",@"GET http://www.youtube.com/ HTTP/1.1
Accept: application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, */*
Accept-Language: en-US
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: www.youtube.com"+"\r\n\r\n"); 
```

当我调用此代码时，它总是冻结等待来自服务器的响应。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-25T12:32:30.177

问题是`ReadToEnd`只有在流结束时才返回。不幸的是，服务器保持 TCP 连接处于活动状态。因此`ReadToEnd`永远无法察觉真正的结局已经到来。

证明：

```
 sw.Write(request);
                        sw.Flush();
                        var l = sr.ReadLine(); 
```

`l`正在填充请求的第一行。

删除`keep-alive`标题并添加：

```
Connection: close 
```

或者使用响应`Content-Length`头来正确读取它（二进制）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-27T14:24:40.993

```
 A simple example is this:

    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;
    using System.IO;
    using System.Net;
    using System.Net.Sockets;
    using System.Web;
    using System.Data;
    using System.Collections;
    using System.Collections.Specialized;
    using System.Windows.Forms;

    //Some "using" may not be needed
    static public TcpListener listener = new TcpListener(IPAddress.Any, 8080);

     static void Main(string[] args)
            {
             listener.Start();
             TcpClient client = listener.AcceptTcpClient();
             StreamReader sr = new StreamReader(client.GetStream());
             sr.ReadLine();
            }

**For asynchronous Connection:**

 static void Main(string[] args)
     {
       client_listener();
     }
async static public void client_listener()
        {
            while (true)
            {
                listener.Start();
                TcpClient client = await listener.AcceptTcpClientAsync();
                StreamReader sr = new StreamReader(client.GetStream());
                try
                {
                    await sr.ReadLineAsync();
                }
                catch(Exception e)
                {
                }
        }
} 
```

# python - 在 Python 中使用 OpenGL

> ID：12121916
> 
> 赞同：45
> 
> 时间：2012-08-25T12:22:30.540
> 
> 标签：python, opengl, documentation, pyopengl

所以，我只知道如何使用 Python，但我也知道如何在 3d 中建模。我听说过 OpenGL，我真的很想学习如何使用，因为它看起来非常有用（我想用它创建简单的游戏......）。我找到了 PyOpenGL，Op​​enGL 的 Python 绑定，但我找不到任何“真正的”文档，所以唯一的选择是学习用 C++ 或其他东西编写的代码示例和教程。但是，正如我所说，我只知道如何使用 Python。我能做些什么呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-25T12:41:55.177

您应该继续阅读[OpenGL 教程](http://pyopengl.sourceforge.net/context/tutorials/index.xhtml)。

这是一个[pyopengl 演示](http://pypi.python.org/pypi/PyOpenGL-Demo)；其他样品在[这里](http://www.de-brauwer.be/wiki/wikka.php?wakka=PyOpenGL)。

此外，您可以将[pygame](http://www.pygame.org/news.html)与[pyopengl](http://pyopengl.sourceforge.net/)一起使用；一个例子是[here](http://www.willmcgugan.com/blog/tech/2007/6/4/opengl-sample-code-for-pygame/)。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-25T13:39:10.463

您可以尝试更高级别的东西，如果您想做简单的游戏，[Panda3D](http://www.panda3d.org)以学习非常简单（与直接 opengl 相比）着称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-25T12:25:44.063

如果你的目标是用 Python 制作游戏，那么你应该看看 PyGame。它有更好的文档和支持。

[http://www.pygame.org/](http://www.pygame.org/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-29T01:24:54.223

如果您使用[Cython](http://cython.org/)，则可以使用 OpenCL 优化部分代码：

[https://github.com/cython/cython/wiki/enhancements-opencl](https://github.com/cython/cython/wiki/enhancements-opencl)

# jquery - markerclusterer.js、markerclusterer_compiled.js 和 markerclusterer_packed.js 的区别

> ID：12121923
> 
> 赞同：0
> 
> 时间：2012-08-25T12:23:54.407
> 
> 标签：jquery, jquery-plugins, markerclusterer

我在 jquery 插件中看到了很多。我所知道的是，markerclusterer.js 是人类可读的代码，但两个第二个文件之间的区别不是很清楚。谁能向我解释一下区别。在这种情况下，我们使用每种类型的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:45:54.817

我不确定 _compiled.js 但我认为 _packed.js 将所有代码减少到一行，并消除了所有无用的东西，如注释、空格，这使得代码很难理解，但文件大小会更小，因此计算机会更快地读取它，但我不是 100% 确定。

# android - 尝试使用 Intent 传递数据时应用程序被强制关闭

> ID：12121947
> 
> 赞同：0
> 
> 时间：2012-08-25T12:25:37.917
> 
> 标签：android, android-intent

我的主要活动包含几个单选按钮。它们是一个名为 config 的按钮。我想要做的是单击配置新活动将启动并显示选定的单选按钮文本。但是当我点击配置时，应用程序被强制关闭。我无法找出错误。我通过以下链接了解意图 1) [http://www.androidaspect.com/2012/07/passing-data-using-intent-object.html](http://www.androidaspect.com/2012/07/passing-data-using-intent-object.html) 2) [http://www.androidaspect.com/2012 /02/how-to-start-new-activity-using-intent.html](http://www.androidaspect.com/2012/02/how-to-start-new-activity-using-intent.html) 以下是主要活动的 onclick 代码：

```
configbtn.setOnClickListener(new Button.OnClickListener(){
        @Override
        public void onClick(View arg0) {            
            //Toast.makeText(getApplicationContext(), "You have clicked on 'Config'...", Toast.LENGTH_LONG).show();
            if(!mode.equals(""))
            {
            Intent i = new Intent("com.av.android.profiles.configActivity");
            Bundle myBundle = new Bundle();
            myBundle.putString("promode",mode);
            i.putExtras(myBundle);
            startActivityForResult(i, 1);
            }
             else
             {
                Toast.makeText(getApplicationContext(), "Please select profile mode to config...!", Toast.LENGTH_LONG).show();
             }

         }}); 
```

第二个活动的代码：

```
public class configActivity extends Activity{

Bundle myBundle1 = new Bundle();
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.config);
    String myName = null;       
    Bundle extras = getIntent().getExtras();
    if(extras != null)
    {
        myName = extras.getString("promode");
    }

    TextView tvData = (TextView) findViewById(R.id.tvData);
    tvData.setText(myName);
    }} 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:29:09.897

采用

```
if(extras != null)
    {
        myName = extras.getString("promode");
    } 
```

代替

```
if(extras != null)
    {
        myName = extras.getString("Name");
    } 
```

因为你是`promode`作为关键传递而不是`Name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:29:16.127

尝试

```
Intent i = new Intent(CurrentActvity.this,configActivity.class);
Bundle myBundle = new Bundle();
myBundle.putString("promode",mode);
i.putExtras(myBundle);
startActivityForResult(i, 1); 
```

`configActivity`在清单文件中声明。

```
<activity
            android:name=".configActivity" /> 
```

并使用`myName = extras.getString("promode");`

# django - Django MongoDB Queryset 无法打印或迭代

> ID：12121951
> 
> 赞同：3
> 
> 时间：2012-08-25T12:25:51.690
> 
> 标签：django, mongodb, loops, django-queryset

我尝试在 Django 中执行以下类型的 MongoDB 原始查询：

```
queryset= ObjectClass.objects(__raw__={ }) 
```

如果我想打印查询集或迭代，我会收到以下错误消息：

```
"error_message": "cannot convert value of type <class 'mongoengine.queryset.QuerySet'> to bson", 
```

任何建议为什么会发生这种情况，到目前为止我找不到合适的答案，感谢任何提示

乔纳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:17:30.833

只是因为我卸载了mongodb，所以我现在无法自己尝试一下。但在我的脑海里，我记得我有一个类似的问题。

尝试：

```
queryset= list(ObjectClass.objects(__raw__={ }))
for result in queryset:
    print result 
```

# android - Android画布drawText从右到左

> ID：12121961
> 
> 赞同：1
> 
> 时间：2012-08-25T12:27:18.540
> 
> 标签：android, canvas

我也有一个处理阿拉伯语的应用程序，但是我的阿拉伯语用户有一个问题，即 drawText 翻转单词 .. 阿拉伯语必须从右到左。如何使画布从右到左绘制文本？

![](../Images/5f7f4ce3854433dabe240b596c7bfc79.png)

在图片中看到突出显示的文本是正确的文本，它是一个 textView，它很好。但是画布中的 DrawText 是错误的。必须是从右到左，如何让画布drawText从右到左？

我的drawText代码：

```
 c.drawText(txt, (float) (c.getWidth()/2.7), (float) (c.getHeight()/2 + paint.getTextSize()/1.5), paint); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T13:28:03.097

您需要使用 Bidi 类来预处理您的文本：http: [//developer.android.com/reference/java/text/Bidi.html](http://developer.android.com/reference/java/text/Bidi.html)

# iphone - 为核心数据类 iphone 创建实例

> ID：12121963
> 
> 赞同：1
> 
> 时间：2012-08-25T12:27:47.760
> 
> 标签：iphone, objective-c, database, core-data, restkit

我有一个 coredata 类，其基类为`NSManagedObject`. 我正在使用这个类来存储从服务器获取的数据。我使用 Restkit 对象映射存储它。我正在使用相同的类将输入发送到服务器。为此，我创建了一个`classA(NSObject)`，在其中为我的核心数据类创建了一个实例。我正在传递`classA`. 我可以使用 Restkit 检索数据并将其存储到 coredata 中。

问题：

*   当我尝试从数据库中获取详细信息时。我得到 4 个值（实际值为 3，从服务器返回）。从此一个对象变为 nil。我不知道确切的原因。
*   我认为问题出在我的核心数据实例上。如何为核心数据类创建实例。

注意：当我查看我的数据库时，它只显示 3 行。我认为在数据库中保存数据没有问题。

```
NSFetchRequest* fetchRequest = [ClassA fetchRequest]; //ClassA is core data class
NSSortDescriptor* descriptor = [NSSortDescriptor sortDescriptorWithKey:@"locationName" 
                                                             ascending:NO];
[fetchRequest setSortDescriptors:[NSArray arrayWithObject:descriptor]];

NSArray* Objects = [GHSLocation objectsWithFetchRequest:fetchRequest]; 
```

谢谢

# ruby-on-rails - 如何使用 class << self eigenclass 模式从 ruby 的类中动态删除方法？

> ID：12121964
> 
> 赞同：0
> 
> 时间：2012-08-25T12:27:56.137
> 
> 标签：ruby-on-rails, ruby

我试图通过打开类的特征类来动态取消定义方法。我想要类似的东西：

```
def remove_defined_mock_name_method(name)
  if Settings.respond_to?(name)
    class << Settings
      remove_method name
    end
  end
end 
```

其中“名称”是一个符号。问题是重新打开的班级无法使用名称。如何通过方法调用来动态取消定义类方法？

对于那些好奇的人，用例是我想在 rspec for rails 中的每次测试之后取消定义动态定义的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:12:12.517

`name`是一个局部变量。局部变量在定义它们的范围内是局部的，这就是它们被称为局部变量的原因。Ruby 中创建嵌套范围的唯一构造是块，因此如果您想访问 ，则必须使用块`name`，即使用`class_eval`或类似的东西。

但在这种情况下，这不是必需的：

```
def remove_defined_mock_name_method(name)
  Settings.singleton_class.send(:remove_method, name) if Settings.respond_to?(name)
end 
```

# django - 如何升级django注册

> ID：12121965
> 
> 赞同：0
> 
> 时间：2012-08-25T12:28:01.097
> 
> 标签：django, registration

我在我的服务器上使用 django 注册 v0.7。我想将它升级到 v0.8。

据我所知，我可以在下载的文件中运行 setup.py。但后来我想保留旧版本 0.7 作为后备。如果新版本不起作用，我可以将其降级到 v0.7。

你能告诉我如何以正确的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T05:04:34.037

使用 setuptools 或 pip，例如：

```
easy_install django-registration==0.8 
```

回到 0.7：

```
easy_install django-registration==0.7 
```

# magento - 从 magento 创建一个订单处理系统？

> ID：12121966
> 
> 赞同：5
> 
> 时间：2012-08-25T12:28:21.567
> 
> 标签：magento

我想创建一个小型订单处理网站，但我希望该应用程序也能够扩展到电子商务解决方案。所以我决定用magento。

但我不确定是否可以将 magento 剥离为仅一个订单处理系统。通过订单处理我想要：

*   客人应该可以选择产品
*   应该能够将产品添加到购物车
*   但最后，不是通过支付系统处理订单，而是将订单转发到管理员的电子邮件，管理员将单独与他们联系。

如何以这种方式配置 Magento？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T11:46:19.093

这是一个完整的教程，其中包含您需要的所有文件，可供下载：

[http://www.excellencemagentoblog.com/magento-onestep-checkout-remove-payment-method-step](http://www.excellencemagentoblog.com/magento-onestep-checkout-remove-payment-method-step)

这确实使用代码“免费”标记订单，但是，您的话是我们的仆人而不是我们的主人，您可以将“免费”一词更改为“电话销售”（或其他）：

> ...从结帐中删除任何步骤的基本思想是查看为该步骤设置的默认值，以便 magento 订单处理顺利运行。因此，在删除付款方式步骤时，我已将付款方式“零小计结帐”设置为默认付款方式，代码为“免费”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T10:01:22.953

如果我理解你，你只是想避免 CC 处理，在这种情况下，你可以在 Magento 中禁用除“货币/支票”之外的所有支付系统。

> 1.  客人应该可以选择产品
> 2.  应该能够将产品添加到购物车
> 3.  但最后，不是通过支付系统处理订单，而是将订单转发到管理员的电子邮件，管理员将单独与他们联系。

1.  Magento 默认为您提供目录/购物车系统（订购时必须邮寄）
2.  Magento 默认为您提供购物车系统
3.  您可以禁用除“货币/支票”之外的所有支付系统。（这将让用户在不检查付款的情况下确认他们的订单）。然后您可以联系所有用户在后端检查新订单（用户/访客电子邮件将与订单显示一起显示）...

**设置**

*   为任何新订单添加电子邮件通知：

    1.  登录到管理区域
    2.  去`System->Configuration`
    3.  在销售部分，单击`Sales Emails`
    4.  选择第一部分订单。
    5.  在“发送订单电子邮件副本至”字段中输入您的管理员电子邮件。

现在，每个新订单您都会收到一封新邮件。

*   管理付款方式：

*   登录到管理区域

*   去`System->Configuration`
*   在销售部分，单击`Payment Methods`
*   禁用所有除了`Check / Money Orders`

现在您的客户可以在没有任何付款细节的情况下订购。

我认为 Magento 应该适合你，如果“货币/支票”支付系统不适合你，你需要创建一个新模块并添加一个新的支付系统。

我希望这可以帮助您回答您的疑问

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T21:05:52.400

So, as I can understand, you want to finish customers work on the cart step. For example, by clicking Create an Order except Checkout. Yes, you can use cart2quote or something like this. The main idea is to save quote with quote items (from the session) after clicking Create an Order button. For example, you can get Quote and serialize it, get Quote items and also serealize them. When it is needed to show them to admin (in email or in admin section) - deserialize all info and display it. This will not be very easy, but is possible. May be it is better to customize some ready solution.

# events - 调整borderContainer onClick titlePane的大小

> ID：12121968
> 
> 赞同：1
> 
> 时间：2012-08-25T12:28:38.143
> 
> 标签：events, resize, dojo, border-container

我想在 titlePane 的 onClick 事件上调整 dijit borderContainer 的大小，但调整大小函数的行为非常奇怪（Resize() 仅在第二次单击后才有效）。这是我使用的代码：

```
<div data-dojo-type="dijit.layout.BorderContainer" id="borderContainer">
<div data-dojo-type="dijit.TitlePane" region="top" id="titlePane" title="Title">
    <script type="dojo/method">
        dojo.connect(dijit.byId("titlePane"), "onClick", function(){dijit.byId("borderContainer").resize()});
    </script>
</div>
<div data-dojo-type="dijit.layout.TabContainer" region="center" id="tabContainer">
    <div data-dojo-type="dijit.layout.ContentPane" id="contentPane" title="content" selected="true">
        This is the content
    </div>  
</div> 
```

你已经看到这种行为了吗？您的专业知识将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-25T13:40:09.950

实际上，`resize()`第一次也可以工作，但是您看不到任何事情发生，因为您不应该在发生后`resize()`立即调用`onClick`，而是在`titlePane's`调整大小动画完成后（默认为 200 毫秒），否则会`borderContainer`调整为相同的大小。

这就是我的建议：

```
dijit.byId("titlePane").watch("open", function(param, oldValue, newValue) {
    var animation = newValue ? this._wipeIn : this._wipeOut;
    var handler = dojo.connect(animation, "onEnd", this, function() {
        dijit.byId("borderContainer").resize();    
        dojo.disconnect(handler);            
    });
}); 
```

在 jsFiddle 上查看一个工作示例：http: [//jsfiddle.net/phusick/E5CwV/](http://jsfiddle.net/phusick/E5CwV/)

**编辑：**再想一想，您还可以在这两个动画上创建永久连接，但我认为这会导致代码可读性降低：

```
var titlePane = dijit.byId("titlePane");
var borderContainer = dijit.byId("borderContainer");
dojo.connect(titlePane._wipeIn, "onEnd", borderContainer, "resize");
dojo.connect(titlePane._wipeOut, "onEnd", borderContainer, "resize"); 
```

# java - java 程序中堆栈实现的 push() 部分中的 NullPointerException

> ID：12121970
> 
> 赞同：-2
> 
> 时间：2012-08-25T12:28:46.420
> 
> 标签：java, nullpointerexception, stack

我的代码基本上是一个程序，用于检查是否可以使用有序序列 1,2,3..,n 来生成用户指定的该序列的排列，使用堆栈作为临时存储结构。用户可以选择输入 n 和他希望使用 2 种方法生成的排列；通过文本文件或直接在命令行中。因此，例如，如果用户输入 5 1 3 5 4 2，n 将被解释为第一个数字，即 5，然后其余数字是他想查看是否可以从1 2 3 4 5（请注意，1 2 3 4 5 是有序的，1 在该堆栈的顶部）。在这里，您将直接使用 1，然后将 2 存储在堆栈中，然后使用 3，然后将 4 存储在 2 之上，然后使用 5，然后弹出 4 个，然后弹出 2 个以生成排列。我遇到的问题是，每当我尝试生成 1 2 3 ... n 的起始堆栈时，我的程序都会面临 NullPointerException。它指向这段代码的最后一行：

```
public static void main(String args[])
{
    int[] arr;
    arr = null;
       try
       {
        if(args[0].charAt(0) == '2') 
        {   
            try
            {   
                FileInputStream file = new FileInputStream(args[1]);
                arr = input(file);
            }
            catch (FileNotFoundException e)
            {
                System.out.println("File not found.");
                System.exit(0);
            }
        }
        else if (args[0].charAt(0) == '1')
        {   
            arr = input();
        }   
           else 
        {
            System.out.println("Please enter a valid input option.");
            System.exit(0);
        }
    }
    catch (ArrayIndexOutOfBoundsException e)
    {
        System.out.println("Please enter a valid input option."); 
        System.exit(0);
     }
    int x;
    x = arr.length;
    System.out.println(x);
    ArrayPerm start = new ArrayPerm(x);
    ArrayPerm temp = new ArrayPerm(x);
    for (int i = 0; i < x; i++)
    {
        *start.push(x - i);*        
    } 
```

它还指出：

```
public void push(int j)
{
    top++;
    Stack[top] = j;
} 
```

ArrayPerm 类基本上是堆栈实现。我试过这样做：

```
public void push(Integer j)
{
    if (j == null)
    {
        throw new NullPointerException("NULL ELEMENT!");
    }
    else
    {
        top++;
        Stack[top] = j;
    }
} 
```

但它仍然显示异常。如果有人能指出我正确的方向，我将不胜感激。我花了一个小时在我的代码中寻找问题而没有结果。所以，提前谢谢！

编辑：这就是类的定义方式，所以不应该初始化 Stack？

```
public class ArrayPerm
{
  private int[] Stack;
  private int top;
  public int size;

public ArrayPerm(int n)
{
    size = n;
    int[] Stack = new int[n];
    top = -1;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T13:04:31.567

您正在[隐藏](https://en.wikipedia.org/wiki/Variable_shadowing)变量`Stack`。代替

```
int[] Stack = new int[n]; 
```

和

```
stackArray = new int[n]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T12:32:12.110

您尚未初始化“堆栈”成员变量。

# java - 从另一个类引用 MainActivity 中的 RadioButton 时出错

> ID：12121972
> 
> 赞同：0
> 
> 时间：2012-08-25T12:28:59.627
> 
> 标签：java, android, radio-button, stack-overflow, cross-reference

我创建了一个应用程序，它将以二进制形式打印出时间。逻辑工作得很好，但是当我尝试将逻辑和 GUI 分开时，我遇到了一些问题。似乎有一个交叉引用问题，但我似乎无法找到它。

主要活动：

```
package se.macke.binarycounter;

import java.util.GregorianCalendar;
import java.util.Timer;
import java.util.TimerTask;

import android.app.Activity;
import android.os.Bundle;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.TextView;

public class MainActivity extends Activity 
{
    public TextView text0, text;
    public Timer timer;
    public RadioButton rB00,rB01,rB02,rB03, rB04, rB05, rB06, rB07, rB08, rB09, 
                    rB0A, rB0B, rB0C, rB0D, rB0E, rB0F, rB11, rB12;
RadioButton[] rButtons = new RadioButton[18];

public Executive exec = new Executive(); // This is row 25 in the logcat reference
public GregorianCalendar gregCal = (GregorianCalendar) GregorianCalendar.getInstance(); 
```

逻辑类：

```
/**
 * 
 */
 package se.macke.binarycounter;

import static java.lang.System.out;

import java.util.GregorianCalendar;

import android.widget.RadioButton;

/**
 * @author macke
  *
 */
public class Executive
{
//Converts the numbers to a long string with new rows
RadioButton[] rButtons = new RadioButton[18];
GregorianCalendar gregCal = new GregorianCalendar();
MainActivity m = new MainActivity(); // This is row 21 in the LogCat reference

private int sec = gregCal.get(GregorianCalendar.SECOND);                        // time units
private int min = gregCal.get(GregorianCalendar.MINUTE);
private int hour = gregCal.get(GregorianCalendar.HOUR); 
```

logcat 的摘录：

```
08-25 13:43:53.459: E/AndroidRuntime(383): FATAL EXCEPTION: main
08-25 13:43:53.459: E/AndroidRuntime(383): java.lang.StackOverflowError
08-25 13:43:53.459: E/AndroidRuntime(383):  at java.util.Arrays.binarySearch(Arrays.java:405)
08-25 13:43:53.459: E/AndroidRuntime(383):  at org.apache.harmony.luni.internal.util.ZoneInfo.getOffset(ZoneInfo.java:168)
08-25 13:43:53.459: E/AndroidRuntime(383):  at org.apache.harmony.luni.internal.util.ZoneInfo.getOffset(ZoneInfo.java:162)
08-25 13:43:53.459: E/AndroidRuntime(383):  at java.util.GregorianCalendar.fullFieldsCalc(GregorianCalendar.java:495)
08-25 13:43:53.459: E/AndroidRuntime(383):  at java.util.GregorianCalendar.computeFields(GregorianCalendar.java:658)
08-25 13:43:53.459: E/AndroidRuntime(383):  at java.util.Calendar.complete(Calendar.java:839)
08-25 13:43:53.459: E/AndroidRuntime(383):  at java.util.Calendar.setTimeInMillis(Calendar.java:1339)
08-25 13:43:53.459: E/AndroidRuntime(383):  at java.util.GregorianCalendar.<init>(GregorianCalendar.java:339)
08-25 13:43:53.459: E/AndroidRuntime(383):  at java.util.GregorianCalendar.<init>(GregorianCalendar.java:239)
08-25 13:43:53.459: E/AndroidRuntime(383):  at se.macke.binarycounter.Executive.<init>(Executive.java:20)
08-25 13:43:53.459: E/AndroidRuntime(383):  at se.macke.binarycounter.MainActivity.<init>(MainActivity.java:25)
08-25 13:43:53.459: E/AndroidRuntime(383):  at se.macke.binarycounter.Executive.<init>(Executive.java:21)
08-25 13:43:53.459: E/AndroidRuntime(383):  at se.macke.binarycounter.MainActivity.<init>(MainActivity.java:25)
08-25 13:43:53.459: E/AndroidRuntime(383):  at se.macke.binarycounter.Executive.<init>(Executive.java:21)
08-25 13:43:53.459: E/AndroidRuntime(383):  at se.macke.binarycounter.MainActivity.<init>(MainActivity.java:25)
08-25 13:43:53.459: E/AndroidRuntime(383):  at se.macke.binarycounter.Executive.<init>(Executive.java:21) 
```

我知道如果可以避免，逻辑不应该知道 GUI。我应该初始化逻辑类中的按钮吗？在这种情况下，如何初始化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:36:36.757

使用Executive 类的构造函数。添加

```
Executive(MainActivity activity){

m = activity;

} 
```

使用 MainActivity.java:25

```
public Executive exec = new Executive(this); 
```

使用Executive.java:21

```
MainActivity m =null; 
```

# iphone - pdf 在模拟器中显示，但在 iPhone 中不显示

> ID：12121973
> 
> 赞同：0
> 
> 时间：2012-08-25T12:29:01.220
> 
> 标签：iphone, ios, pdf

我一直在努力解决过去几个小时的问题。我以编程方式制作了一个 pdf 并将其保存在 ~/library/Application Support/iPhone Simulator/... 并且这些程序在模拟器中对我来说工作正常。我可以在 webView 中保存和检索 pdf。

但是当我在 iPhone4 设备上测试我的应用程序时，我在检索时看不到 pdf 文件。我是新手，所以我不知道手动检查是否在设备中创建了 pdf。

请给我帮助。

谢谢

我从这段代码中保存了pdf：

```
- (void)generatePdfButtonPressed{

pageSize = CGSizeMake(612, 792);
NSString *fileName = @"Demo.pdf";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

[self generatePdfWithFilePath:pdfFileName];
}

- (void) generatePdfWithFilePath: (NSString *)thefilePath
{
UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);

NSInteger currentPage = 0;
BOOL done = NO;
do
{
    // Mark the beginning of a new page.
    UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

    // Draw a page number at the bottom of each page.
    currentPage++;
    //[self drawPageNumber:currentPage];

    //Draw a border for each page.
  //  [self drawBorder];

    //Draw text fo our header.
    [self drawHeader];

    //Draw a line below the header.
    [self drawLine];

    //Draw personel details
    [self drawPersonelDetail];

    //Draw Education
    [self drawEducation];

    //Draw work Experiences
    [self drawWorkExperiences];

    //Draw work Activities
    [self drawActivities];

    //Draw Skills
    [self drawSkils];

    //Draw some text for the page.
 //   [self drawText];

    yCord=550;
//    [self drawText];

    //Draw an image
//    [self drawImage];
    done = YES;
}
while (!done);

// Close the PDF context and write the contents out.
UIGraphicsEndPDFContext();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T06:14:42.257

经过长时间的努力，我找到了自己问题的解决方案：我在下面提供的解决方案可能对其他任何人都有帮助。

```
- (void)generatePdfButtonPressed{

pageSize = CGSizeMake(612, 792);
NSString *fileName = @"Demo.pdf";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

[self generatePdfWithFilePath:pdfFileName];
}

- (void) generatePdfWithFilePath: (NSString *)thefilePath
{
UIGraphicsBeginPDFContextToFile(thefilePath, CGRectZero, nil);

NSInteger currentPage = 0;
BOOL done = NO;
do
{
// Mark the beginning of a new page.
UIGraphicsBeginPDFPageWithInfo(CGRectMake(0, 0, pageSize.width, pageSize.height), nil);

// Draw a page number at the bottom of each page.
currentPage++;
[self drawPageNumber:currentPage];

//Draw a border for each page.
 [self drawBorder];

//Draw text  our header.
[self drawHeader];

//Draw a line below the header.
[self drawLine];

//Draw personel details
[self drawPersonelDetail];

//Draw Education
[self drawEducation];

//Draw an image
[self drawImage];

done = YES;
}
while (!done);

// Close the PDF context and write the contents out.
UIGraphicsEndPDFContext();
}

And for Display the pdf file the method is :

- (void)showPdfClicked
{

pdf1View.scalesPageToFit = YES;
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];

NSLog(@"%@",documentsDirectory);

NSString *path1 =[documentsDirectory stringByAppendingPathComponent:@"Demo.pdf"];

NSLog(@"Retruve Save path is %@: ",path1);
// NSString *path1 = [[NSBundle mainBundle] pathForResource:@"pdf1" ofType:@"pdf"];
NSURL *targetURL1 = [NSURL fileURLWithPath:path1];
NSURLRequest *request1 = [NSURLRequest requestWithURL:targetURL1];
[pdf1View loadRequest:request1];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T23:25:02.697

我以前遇到过这个问题。我的猜测是内存问题——您尝试加载的 PDF 文件有多大？`UIWebView`似乎在缓冲（如果它确实这样做的话）大文件以进行显示时遇到了一些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T12:19:47.330

我通过此代码通过电子邮件成功发送了我创建的 pdf。可能这对你有帮助（dottorfeelgood）。

```
-(IBAction)emailButtonClicked
{

MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
picker.mailComposeDelegate = self;
[picker setSubject:@"Subject"];

NSString *fileName = @"Demo.pdf";
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *pdfFileName = [documentsDirectory stringByAppendingPathComponent:fileName];

NSMutableData *pdfData = [NSMutableData data];

pdfData = [NSData dataWithContentsOfFile:pdfFileName];

CGRect bounds=CGRectMake(0, 0, 612, 792);
[picker addAttachmentData:pdfData mimeType:@"application/pdf" fileName:@"SomeFile.pdf"];

// Fill out the email body text
NSString *emailBody = @"Image is attached";
[picker setMessageBody:emailBody isHTML:NO];
[self presentModalViewController:picker animated:YES];

//[picker release];

} 
```

快乐编码！！！

# ads - Google 的 DFP 广告服务系统无法正常工作

> ID：12121976
> 
> 赞同：2
> 
> 时间：2012-08-25T12:29:22.157
> 
> 标签：ads, google-dfp

我们有一个正在运行的项目，客户要求在其中实施 Google DoubleClick for Advertising。客户给了我们来自 DFA 的示例代码，我们试图在我们的类别页面中实现它，但它根本不起作用。任何人都可以看看下面，让我知道可能是什么广告根本没有显示并且只抛出错误。

**标题部分**：

```
 <script type='text/javascript'>
vargoogletag = googletag || {};
googletag.cmd = googletag.cmd || [];
(function() {
var gads = document.createElement('script');
gads.async = true;
gads.type = 'text/javascript';
varuseSSL = 'https:' == document.location.protocol;
gads.src = (useSSL ? 'https:' : 'http:') + 
'//www.googletagservices.com/tag/js/gpt.js';
var node = document.getElementsByTagName('script')[0];
node.parentNode.insertBefore(gads, node);
})();
</script>

<script type="text/javascript"> 
googletag.cmd.push(function() {
googletag.defineSlot('/2408346/Asociacion_bottom', [728, 90], 'div-gpt-ad-1340819095858-0').addService(googletag.pubads());
googletag.pubads().enableSingleRequest();
googletag.enableServices();
});
</script> 
```

**文件正文部分**：

```
<div id='div-gpt-ad-1340819095858-0' style='width:728px; height:90px;'>
<script type='text/javascript'>
        googletag.cmd.push(function() { googletag.display('div-gpt-ad-1340819095858-0'); });
</script>
</div> 
```

* * *

抛出错误并且根本不显示任何广告（即使在所有浏览器中）：

**错误列表**：

```
googletag is not defined
[Break On This Error] vargoogletag = googletag || {};

googletag is not defined
[Break On This Error] googletag.cmd.push(function() {

googletag is not defined
[Break On This Error] googletag.cmd.push(function() { goog...y('div-gpt-ad-1340819095858-0'); }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-26T19:56:23.253

看起来您的脚本中有一些语法错误。

这一行：

vargoogletag = 谷歌标签 || {};

应该：

var googletag = googletag || {};

并且 varuseSSL 也应该有一个空格... var useSSL

试试这个：

```
<html>
<head>
    <title>DFP test</title>

    <script type='text/javascript'>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        (function() {
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (useSSL ? 'https:' : 'http:') +
            '//www.googletagservices.com/tag/js/gpt.js';
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
    </script>

    <script type="text/javascript">
        googletag.cmd.push(function() {
            googletag.defineSlot('/2408346/Asociacion_bottom', [728, 90], 'div-gpt-ad-1340819095858-0').addService(googletag.pubads());
            googletag.pubads().enableSingleRequest();
            googletag.enableServices();
        });
    </script>

</head>
<body>

    <div id='div-gpt-ad-1340819095858-0' style='width:728px; height:90px;'>
        <script type='text/javascript'>
                googletag.cmd.push(function() { googletag.display('div-gpt-ad-1340819095858-0'); });
        </script>
    </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-15T22:29:17.933

besides the typos, you probably have a minify plugin that is conflicting with your ads.

# java - Android创建数据库表的问题

> ID：12121984
> 
> 赞同：0
> 
> 时间：2012-08-25T12:30:27.870
> 
> 标签：java, android, sql, sqlite

我已经编写了我的 android 应用程序，它使用了一个数据库，这里是 onCreate 方法：

```
@Override
public void onCreate(SQLiteDatabase database) {
database.execSQL(CREATE_PARK_DETAILS);
insertParks(database);
database.execSQL(CREATE_DIARY);
} 
```

在我的三星 Galaxy S2 上它可以工作，就像其他 100 人从商店下载应用程序的手机一样。但是，一位用户在使用 Android 2.3.4 的 Sony-Ericsson Xperia Arc (LT15i) 上遇到问题。所以我给使用不同手机的其他人测试该应用程序，其中一个在 Android 4.1 上存在相同的问题......一个 SQLException。
之后我发现在这个设备上没有创建第二个表，而只创建了第一个表。
为什么？

CREATE_PARK_DETAILS：

```
CREATE TABLE cableparks (id int, name varchar(100), city varchar(100), state varchar(50), logo varchar(50), xCoord int, yCoord int, url varchar(100) DEFAULT '', street varchar(100) DEFAULT '', cap varchar(10) DEFAULT '', PRIMARY KEY (id)); 
```

创建日记：

```
CREATE TABLE diary (id int, comment text, addDate long, PRIMARY KEY (id), FOREIGN KEY (id) REFERENCES cableparks (id)); 
```

日志猫：

```
08-21 21:29:01.402: E/SQLiteLog(12388): (1) no such table: diary
08-21 21:29:01.402: D/dalvikvm(12388): GC_CONCURRENT freed 176K, 7% free
10130K/10823K, paused 4ms+7ms, total 61ms
08-21 21:29:01.414: W/CursorWrapperInner(12388): Cursor finalized without prior close()
08-21 21:29:01.453: E/TAG(12388):     getFavorite
08-21 21:29:01.453: E/TAG(12388):     android.database.sqlite.SQLiteException: no such table: diary (code 1): , while compiling: SELECT * FROM diary WHERE id=31;
08-21 21:29:01.453: E/TAG(12388):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
08-21 21:29:01.453: E/TAG(12388):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
08-21 21:29:01.453: E/TAG(12388):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
08-21 21:29:01.453: E/TAG(12388):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
08-21 21:29:01.453: E/TAG(12388):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
08-21 21:29:01.453: E/TAG(12388):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
08-21 21:29:01.453: E/TAG(12388):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
08-21 21:29:01.453: E/TAG(12388):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
08-21 21:29:01.453: E/TAG(12388):     at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java:1253)
08-21 21:29:01.453: E/TAG(12388):     at com.emaborsa.cablePark.db.DatabaseManager.getFavorite(DatabaseManager.java:133)
08-21 21:29:01.453: E/TAG(12388):     at com.emaborsa.cablePark.db.DatabaseManager.getPark(DatabaseManager.java:122)
08-21 21:29:01.453: E/TAG(12388):     at com.emaborsa.cablePark.activities.SinglePark.onCreate(SinglePark.java:120)
08-21 21:29:01.453: E/TAG(12388):     at android.app.Activity.performCreate(Activity.java:5008)
08-21 21:29:01.453: E/TAG(12388):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-21 21:29:01.453: E/TAG(12388):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-21 21:29:01.453: E/TAG(12388):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-21 21:29:01.453: E/TAG(12388):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-21 21:29:01.453: E/TAG(12388):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-21 21:29:01.453: E/TAG(12388):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 21:29:01.453: E/TAG(12388):     at android.os.Looper.loop(Looper.java:137)
08-21 21:29:01.453: E/TAG(12388):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-21 21:29:01.453: E/TAG(12388):     at java.lang.reflect.Method.invokeNative(Native Method)
08-21 21:29:01.453: E/TAG(12388):     at java.lang.reflect.Method.invoke(Method.java:511)
08-21 21:29:01.453: E/TAG(12388):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-21 21:29:01.453: E/TAG(12388):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-21 21:29:01.453: E/TAG(12388):     at dalvik.system.NativeStart.main(Native Method)
08-21 21:29:01.496: D/AndroidRuntime(12388): Shutting down VM
08-21 21:29:01.496: W/dalvikvm(12388): threadid=1: thread exiting with uncaught exception (group=0x41b35300)
08-21 21:29:01.504: E/AndroidRuntime(12388): FATAL EXCEPTION: main
08-21 21:29:01.504: E/AndroidRuntime(12388): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.emaborsa.cablePark/com.emaborsa.cablePark.activities.SinglePark}: java.lang.NullPointerException
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.os.Looper.loop(Looper.java:137)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at java.lang.reflect.Method.invokeNative(Native Method)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at java.lang.reflect.Method.invoke(Method.java:511)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at dalvik.system.NativeStart.main(Native Method)
08-21 21:29:01.504: E/AndroidRuntime(12388): Caused by: java.lang.NullPointerException
08-21 21:29:01.504: E/AndroidRuntime(12388):     at com.google.android.maps.ItemizedOverlay.populate(ItemizedOverlay.java:312)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at com.emaborsa.cablePark.map.route.LocationOverlay.addOverlay(LocationOverlay.java:21)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at com.emaborsa.cablePark.activities.SinglePark.setViewValues(SinglePark.java:180)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at com.emaborsa.cablePark.activities.SinglePark.onCreate(SinglePark.java:129)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.app.Activity.performCreate(Activity.java:5008)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-21 21:29:01.504: E/AndroidRuntime(12388):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-21 21:29:01.504: E/AndroidRuntime(12388):     ... 11 more 
```

GetFavorite 方法：

```
public FavoritePark getFavorite(int parkId) {
    FavoritePark favorite = null;
    String query = "SELECT * FROM " + TABLE_DIARY + " WHERE " + ID + "=" + parkId + ";";
    try {
        Cursor cursor = database.rawQuery(query, null);
        try {
        if (cursor.moveToFirst()) {
            int commentIndex = cursor.getColumnIndex(COMMENT);
            String comment = cursor.getString(commentIndex);
            int addedIndex = cursor.getColumnIndex(ADD_TIME);
            Date added = new Date(cursor.getLong(addedIndex));
            favorite = new FavoritePark(comment, added);
        }
        } finally {
            try { cursor.close(); } catch (Throwable ignore) {}
        }
    } catch (Exception e) {
        Log.e("TAG", "getFavorite", e);
    }
    return favorite;
} 
```

# .net - Linq 嵌套 ID 以匹配列表

> ID：12121988
> 
> 赞同：0
> 
> 时间：2012-08-25T12:30:41.560
> 
> 标签：.net, linq

我有一个函数用于通过实体框架检索数据。

```
 public IEnumerable<Deal> GetCategory(int subcategoryId)
    {
        using (var uow = new ReadUow())
        {
            var r = new ReadRepo<Deal>(uow.Context);

            var deals = r.FindBy()
                .Include("DealSubcategories")
                .Where(d => d.DealSubcategories.Any(s => s.SubcategoryId == subcategoryId));

            return deals.ToList();
        }
    } 
```

.Where 子句允许我按单个 subcategoryId 进行过滤（由 Lee 和 Jon Skeet 提供），但我在将其与不同查询中的列表进行比较时同样苦苦挣扎。因此，我会以某种方式与 List 进行比较，而不是单个 subcategoryId。

非常令人沮丧，所以任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T12:35:20.820

假设您有一个`IEnumerable<int>`包含您要搜索的值的被调用 id：

```
var deals = r.FindBy()
            .Include("DealSubcategories")
            .Where(d => d.DealSubcategories.Any(s => ids.Contains(s.SubcategoryId))); 
```

# ios - 喜欢来自原生 iOS 应用程序的 Facebook 页面

> ID：12121996
> 
> 赞同：1
> 
> 时间：2012-08-25T12:31:39.277
> 
> 标签：ios, facebook, facebook-like

我正在尝试从我的原生 iOS 应用程序中点赞一个企业 Facebook 赞页面 (facebook.com/[LikePage])。我已将 FB iOS SDK 用于登录/注销目的。

我已经实现了类似于[http://angelolloqui.com/blog/10-Facebook-Like-Button-on-iOS](http://angelolloqui.com/blog/10-Facebook-Like-Button-on-iOS)的 LIKE 按钮，它是 webview 上社交插件的实现。我这样做是因为我知道要实现自定义 LIKE 按钮，我需要使用 FB 提供的内置 Like，这反过来又需要我的操作得到 FB 的批准。

但是，我注意到社交插件实现不能在 iOS 原生应用程序中使用，只能在移动 Web 应用程序中使用。所以，这是我的问题：-

1.  是不是原生 iOS 应用程序不能使用 facebook 提供的社交插件来点赞 Facebook Page？
2.  为了构建自定义的赞按钮而不是插件，我是否需要使用 Facebook 提供的内置赞，而这又需要批准我的操作类型？（在我的情况下，喜欢一个页面）
    我所需要的只是一些具体的文档，它清楚地让我知道哪个是最好的前进方式。
    仅供参考，需要点赞的业务页面 URL 来自服务器。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T15:04:12.563

没有 API 或自动方法来喜欢 Facebook 页面。内置的开放图操作一旦获得批准，就可以让您喜欢其他带有开放图元标记但没有 Facebook 页面的 URL。

据我所知，Like 按钮插件应该在 web 视图中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:03:20.437

您可以只使用常规的[NSURLRequest](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)来点赞该页面，或者使用另一个库来进行 post 调用：`https://graph.facebook.com/{PAGE_OR_OBJECT_ID}/likes`。确保将[acces_token](https://developers.facebook.com/tools/access_token/)添加为参数。

我使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)发布请求：

```
NSURL *baseURL = [NSURL URLWithString:@"https://graph.facebook.com/"];
AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:baseURL];

NSString *link = [NSString stringWithFormat:@"/%@/likes", myObjectID];
NSDictionary *params = @{@"access_token" : FBSession.activeSession.accessToken};

[httpClient postPath:link parameters:params success:^(AFHTTPRequestOperation *op, id result) {

    NSLog(@"result %@", result);

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {

    NSLog(@"error %@", error);

}]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-23T10:46:24.593

这篇文章的更新：-

“随着 Facebook SDK 版本 4.28.0 的发布，iOS 的 Like 按钮已被弃用。它将支持到 2018 年 2 月 5 日。”

[https://developers.facebook.com/docs/sharing/ios/like-button](https://developers.facebook.com/docs/sharing/ios/like-button)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-06T14:46:08.647

试试这个代码：

我认为这肯定会对您有所帮助：

Fb like Widget 可以嵌入到我们的应用程序中。您只需添加一个 webView 并在[此处获取 Fb Like Widget html 代码/URL](https://developers.facebook.com/docs/plugins/like-button/)。

在 ViewController.h 中要添加 fb like 按钮：

```
#import <UIKit/UIKit.h>

@interface TestViewController : UIViewController <UIWebViewDelegate>

@property (strong, nonatomic) UIWebView * fbLikeWebView;

-(void)embedFBLikeButton;

@end 
```

在 TestViewController.m

```
#import "AboutUsViewController.h"

@implementation AboutUsViewController

@synthesize fbLikeWebView = _fbLikeWebView;

- (void)viewDidLoad
{
    [super viewDidLoad];

    //Add this code for FbLike Webview

    self.fbLikeWebView = [[UIWebView alloc] initWithFrame: CGRectMake(100.0, 50.0, 55.0, 70.0)];
    _fbLikeWebView.opaque = NO;
    _fbLikeWebView.backgroundColor = [UIColor clearColor];
    _fbLikeWebView.delegate = self;
    [self.view addSubview:_fbLikeWebView];

    for (UIScrollView *subview in _fbLikeWebView.subviews)
    {
        if ([subview isKindOfClass:[UIScrollView class]]) {
            subview.scrollEnabled = NO;
            subview.bounces = NO;
        }
    }
} 
```

然后在 ViewWillAppear 方法中调用 enbeddFBLikeButton 方法在 web 视图上添加 fbLike 按钮 wigdet：

```
-(void)viewWillAppear:(BOOL)animated
{
    [self embedFBLikeButton];
    [_fbLikeWebView reload];
}

-(void)embedFBLikeButton
{
    NSString *facebookUrl =  //here paste the url you get from fb developer link above;

    [self.fbLikeWebView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:facebookUrl]]];
} 
```

您现在符合 UIWebViewDelegate ，现在轮到在这里定义 edelegate 方法：

```
#pragma mark - WebView Delgate Methods

- (BOOL)webView:(UIWebView *)webview shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    if ([request.URL.lastPathComponent isEqualToString:@"login.php"])
    {
        [self login];

        return NO;
    }

    return YES;
}

-(void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
    [_fbLikeWebView stopLoading];
} 
```

此方法用于将用户登录到 facebook 帐户：

```
- (void)login
{
    [FBSession setActiveSession: [[FBSession alloc] initWithPermissions:@[@"publish_actions", @"publish_stream", @"user_photos"]]];

    [[FBSession activeSession] openWithBehavior: FBSessionLoginBehaviorForcingWebView completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        switch (status) {
            case FBSessionStateOpen:
                // call the legacy session delegate
                //Now the session is open do corresponding UI changes
                if (session.isOpen) {
                    FBRequest *me = [FBRequest requestForMe];

                    [me startWithCompletionHandler: ^(FBRequestConnection *connection,
                                                      NSDictionary<FBGraphUser> *my,
                                                      NSError *error) {
                        if (!my) {
                            NSLog(@"Facebook error:\n%@", error.description);
                            [[[UIAlertView alloc] initWithTitle: @"Error"
                                                        message: @"Facebook Login error."
                                                       delegate: self
                                              cancelButtonTitle: @"Ok"
                                              otherButtonTitles: nil, nil] show];
                            return;
                        }
                    }];

                    [_fbLikeWebView reload];

                    [[[UIAlertView alloc] initWithTitle: @""
                                                message: @"Successfully Login. Please click on like button"
                                               delegate: self
                                      cancelButtonTitle: @"Ok"
                                      otherButtonTitles: nil, nil] show];
                }
                break;
            case FBSessionStateClosedLoginFailed:
            {
                [_fbLikeWebView reload];
            }
                break;
            default:
                break; // so we do nothing in response to those state transitions
        }
    }];
} 
```

享受编码！

# ios - iOS：自定义颜色作为 UILabel 背景颜色

> ID：12121999
> 
> 赞同：0
> 
> 时间：2012-08-25T12:31:47.243
> 
> 标签：ios, cocoa-touch, uilabel

有没有办法将 #334433 指定为 UILabel 背景颜色？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T12:35:57.637

使用此方法：

```
- (UIColor *) colorWithHexString: (NSString *) hex
{  
     NSString *cString = [[hex stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]] uppercaseString];  

     // String should be 6 or 8 characters  
     if ([cString length] < 6) return [UIColor grayColor];  

     // strip 0X if it appears  
     if ([cString hasPrefix:@"0X"]) cString = [cString substringFromIndex:2];  

     if ([cString length] != 6) return  [UIColor grayColor];  

     // Separate into r, g, b substrings  
     NSRange range;  
     range.location = 0;  
     range.length = 2;  
     NSString *rString = [cString substringWithRange:range];  

     range.location = 2;  
     NSString *gString = [cString substringWithRange:range];  

     range.location = 4;  
     NSString *bString = [cString substringWithRange:range];  

     // Scan values  
     unsigned int r, g, b;  
     [[NSScanner scannerWithString:rString] scanHexInt:&r];  
     [[NSScanner scannerWithString:gString] scanHexInt:&g];  
     [[NSScanner scannerWithString:bString] scanHexInt:&b];  

     return [UIColor colorWithRed:((float) r / 255.0f)  
                       green:((float) g / 255.0f)  
                        blue:((float) b / 255.0f)  
                       alpha:1.0f];  
 } 
```

像这样使用它：

```
[self colorWithHexString:@"334433"] 
```