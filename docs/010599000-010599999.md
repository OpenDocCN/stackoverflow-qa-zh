# StackOverflow 问答 10599000-10599999

# jquery - jQuery关于类删除事件

> ID：10599017
> 
> 赞同：3
> 
> 时间：2012-05-15T10:41:12.417
> 
> 标签：jquery, html

好吧，我得到了这样的东西：

HTML：

```
<div id="main" class="underline" >Hello</div> 
```

JavaScript：

```
$('div').live('click', function(){
    $(this).toggleClass("underline");
});​ 
```

[https://jsfiddle.net/VYukS/](https://jsfiddle.net/VYukS/)

当 div 类被删除时，我必须在事件上运行一些函数，并且我没有任何权限来编辑从 div 添加/删除类的函数。

当课程被取消时，我怎样才能捕捉到该事件？

'click' 事件仅用作示例，因此不仅可以在单击时删除该类

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:44:34.077

没有这样的事件。但你可以做的更简单：

```
$('div').live('click', function(){
    $(this).toggleClass("underline")
    if ($(this).hasClass("underline")) {
        alert("added");
    } else {
        alert("removed");
    }
});​ 
```

**演示：** [https ://jsfiddle.net/VYukS/1/](https://jsfiddle.net/VYukS/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:44:05.877

注意：`live()`已弃用。尝试使用jquery最新版本

```
$('body').on('click', 'div#main', function(){
    $(this).toggleClass("underline");
    // to check the class presence
   if($(this).hasClass('underline'))
     alert('no class');
   else
     alert('has underline');
}); 
```

或使用[委托（）](https://api.jquery.com/delegate)

```
$('body').delegate('div#main', 'click', function(){
    $(this).toggleClass("underline");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:47:41.713

试试这个

```
 $('div').unbind('click', function(){
       $(this).toggleClass("underline");
     }); 
```

# tsql - 在 SSMS 中复制的字符串与原始字符串具有不同的行为

> ID：10599024
> 
> 赞同：0
> 
> 时间：2012-05-15T10:41:28.990
> 
> 标签：tsql, sql-server-2008-r2

我正在尝试半自动化创建我的数据库作为其中的一部分，我想添加列描述的扩展属性。当我尝试在我的脚本中运行 sp_sqlexec 时（甚至只是 Exec(@mystring) 我得到一个错误。但是，如果在调试时，我从监视窗口复制动态 sql 字符串，然后在复制的字符串上单独运行 sp_sqlexec窗口我没有得到任何错误并且扩展属性被正确添加。以下脚本演示了该问题：

```
--Create a table to apply column descriptions to 

Create table dbo.table1 (id int, name nvarchar(20));

--Create the table that contains our column descriptions

Create table dbo.column_descs_table (schemaname nvarchar(20), tablename nvarchar(20), columnname nvarchar(20), column_description nvarchar(20))

Insert into column_descs_table (schemaname, tablename, columnname, column_description)
values ('dbo', 'table1', 'id', 'the id column'), ('dbo' , 'table1', 'name', 'the name column');

--Dynamic sql string varaible to hold the commands
Declare @dyn_sql nvarchar(max);
Set @dyn_sql = 'N'''; --Set to opening quote 

--now create the string containing commands to add column escriptions
SELECT @dyn_sql = @dyn_sql + N' EXEC sp_addextendedproperty ''''Col Desc'''', ''''' + column_description + N''''', ''''SCHEMA'''', ' + schemaname +  N', ''''TABLE'''', ' + tablename + N', ''''COLUMN'''', ' + columnname + N' ;'   
FROM dbo.column_descs_table

Set @dyn_sql = @dyn_sql + ''''; --add the closing quote

Print @dyn_sql --If I copy the contents of @dyn_sql here and run seperately it works OK

Exec sp_sqlexec @dyn_sql -- this line causes error 
```

我得到的错误是 Msg 102, Level 15, State 1, Line 1 Incorrect syntax near 'EXEC sp_addextendedproperty 'Col Desc', 'the id column', 'SCHEMA', dbo, 'TABLE', table1, 'COLUMN', id ; 执行 sp_addextendedprope'。

但是，如果我单步执行代码并复制 @dyn_sql 的内容，则将其粘贴如下：

exec sp_sqlexec N' EXEC sp_addextendedproperty ''Col Desc'', ''id 列'', ''SCHEMA'', dbo, ''TABLE'', table1, ''COLUMN'', id ; EXEC sp_addextendedproperty ''Col Desc'', ''名称列'', ''SCHEMA'', dbo, ''TABLE'', table1, ''COLUMN'', name ;'

然后上面的工作正常，列描述按预期添加。

非常感谢对此特定复制问题的任何帮助。我确实了解动态 sql 的安全问题（一旦我的设置完成，此脚本将从数据库中删除）

提前致谢

裘德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:11:57.157

我相信我已经解决了我的字符串复制问题。SQL 将连接字符串中的双引号检测为空字符串并将其删除。一个显示问题的简单示例和我的解决方案如下：

```
--Example to Select 'simple string' and then 'concat string' into results sets
DECLARE
   @Simplestring nvarchar( max ) = '' , 
   @Concatstring nvarchar( max ) = '' ,
   @Stringvar nvarchar( 10 ) = 'string';

--The double quotes in next line are the quotemark we want plus a quotemark acting 
--as an escape character
--@simplestring will be set to 'Select 'simple string' '
SET @Simplestring = 'Select ''simple string'' ';

--Similarly we need @concatstring to be set to 'Select 'Concat string' '
SET @Concatstring = 'Select  '' concat' + @Stringvar + ''; -- this wont work the last 
--double quote will be removed

--Add a character that cannot appear in any othe part of the concatenation - I've used *
SET @Concatstring = 'Select '' Concat ' + @Stringvar + '*';
--Now replace the * with a quote mark
SET @Concatstring = REPLACE( @Concatstring , '*' , '''' ); -- This will work

EXEC sp_executesql @Simplestring;  
EXEC sp_executesql @Concatstring; 
```

可能有比我的更简单的解决方案。

非常感谢关于使用 sp_executesql 的建议。我正在更改我的代码以使用它（将变量作为参数传入）。

裘德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:27:36.987

看起来这是因为您的前导 N 包含*在*要执行的字符串中；你根本不需要它。换句话说，你最终会得到这样的结果：

`exec sp_execsql 'N'' exec sp_addextendedproperty /* etc. */ '''`

但它应该是这样的：

`exec sp_execsql N'exec sp_addextendedproperty /* etc. */ '`

但是你为什么还要在这里使用动态 SQL 呢？传递给 sp_addextendedproperty 的所有值都可以[作为参数传递，](http://msdn.microsoft.com/en-us/library/ms180047%28v=sql.90%29.aspx)因此没有明显的理由使用动态 SQL，除非您已针对问题进行了简化。

最后，您应该使用 sp_executesql，它是执行动态 SQL的[首选方式。](http://msdn.microsoft.com/en-us/library/ms178115%28v=sql.90%29.aspx)

# vsx - VSIX：订阅命令

> ID：10599025
> 
> 赞同：0
> 
> 时间：2012-05-15T10:41:39.583
> 
> 标签：vsx

如何从我自己的 VSIX 扩展订阅 3rdparty 扩展的命令？比如扩展的 OnClick 事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:21:44.677

如果它是一个命令，您应该能够使用`DTE.Events.CommandEvents[commandGuid, commandId].BeforeExecute`（或`AfterExecute`）捕获它。( [MSDN](http://msdn.microsoft.com/en-us/library/envdte.events.commandevents.aspx) )

如果您不知道 ID 和 GUID，您可以订阅所有命令（因为两个索引器参数都是可选的），添加 ID/GUID 日志记录，然后使用您感兴趣的命令。

**重要提示：**
我相信您必须保留对`DTE.Events.CommandEvents[commandGuid, commandId]`某个地方的引用，这样它就不会被垃圾收集。否则您可能会失去订阅。

# android - 安卓列表选择

> ID：10599029
> 
> 赞同：0
> 
> 时间：2012-05-15T10:41:49.567
> 
> 标签：android, android-listview

如何从屏幕中心的列表视图中获取选定的列表项，而与可扩展列表视图中先前选定的项目无关

# grails - grails removeFrom 一次只删除一个

> ID：10599032
> 
> 赞同：0
> 
> 时间：2012-05-15T10:41:55.957
> 
> 标签：grails

我有一个 grails 应用程序，其中有属于另一个域 contactGroup 的联系人。除了 removeFromContacts 方法外，一切似乎都运行良好。我正在使用以下代码。该代码可以正常工作，但一次只能从组中删除一个联系人。我什至做了一些调试，foreach 循环运行的次数与提供的联系人一样多。没有错误信息。知道可能出了什么问题-

```
 ContactGroup group = ContactGroup.findByIdAndOwner(params.groupId, user)

    def contactIds = request.JSON.data.contact
    contactIds.each {
        Contact contact = Contact.findByContactIdAndOwner(it.contactId, user)
        if(contact) {
            group.removeFromContacts(contact)
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T15:32:18.873

如果关联是延迟加载而不是“真实”实例，我已经阅读了一些关于加载代理的 findAll 方法的内容。

试试这个：

```
 group.removeFromContacts(Contact.get(contact.id)) 
```

“get”应该绕过代理并使用“真实”实例。有一个 JIRA 讨论了这个（Grails-5804）。根据 JIRA（来自 Burt Beckwith）的整体修复是在您的 Contact 类中实现 equals 和 hashCode 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:54:54.040

感谢您的支持。我意识到我没有正确定义域级别的关系，这弄乱了整个事情。当我纠正它工作正常时。

索拉布

# javascript - 2 可变结果不能有两个？

> ID：10599033
> 
> 赞同：2
> 
> 时间：2012-05-15T10:42:04.223
> 
> 标签：javascript

我有：

```
var outcome = $('#outcome') ; 
```

有一个结果“#outcome”，但我想有两个结果

我试过了

```
var outcome = $('#outcome #outcome2') ; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T10:43:05.370

用逗号分隔选择器：

```
var outcome = $('#outcome, #outcome2'); 
```

您当前所拥有的是寻找一个元素匹配`#outcome2`，它是元素匹配的后代`#outcome`。

这记录在jQuery API 中的“[多重选择器”下。](http://api.jquery.com/multiple-selector/)如该页所述，另一种方法是使用该[`add`](http://api.jquery.com/add/)方法（但在这种情况下，我绝对建议坚持使用多重选择器）：

```
var outcome = $('#outcome').add('#outcome2'); 
```

# c# - 类嵌套和访问修饰符

> ID：10599037
> 
> 赞同：2
> 
> 时间：2012-05-15T10:42:25.847
> 
> 标签：c#, class, nested

我有以下代码：

```
class A
{
    public C GetC()
    {
        return new C();
    }
}

class B
{
    //has access to A but can not create C. Must ask A to create C.
    private void method()
    {
        A a = new A();
        C c = a.GetC();//Ok!
        C c2 = new C();//Not allowed.
    }
}

class C
{

} 
```

应该在 C 上使用哪些访问修饰符，以便只能通过 A 访问？（只有 A 类知道如何正确初始化 C 类）还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:57:40.793

如果您使 A 成为 C 中的嵌套类，它应该可以工作。

```
public class B
{
    //has access to A but can not create C. Must ask A to create C.
    private void method()
    {
        var a = new C.A();
        var c = a.GetC();//Ok!
        var c2 = new C();//Not allowed.
    }
}

public class C
{
    private C()
    {
    }

    public class A
    {
        public C GetC()
        {
            return new C();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:51:36.897

从 C 继承 A，并使 C 的构造函数受保护
**编辑**——“由于无法通过限定符访问受保护的成员”，错误来了，作为一种解决方法，引入了静态成员，它将返回实例。这个受保护的成员可以从派生中访问。

```
class A : C
{
    private C GetC()
    {
        C c = C.GetC();
        return c;
    }
}

class C
{
    protected C()
    {
    }
    protected static C GetC()
    {
        return new C();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-01T11:11:25.193

建议的方法从 C 继承 A，并使 C 受保护代码的构造函数不起作用，因为其中存在一些错误。调整此方法代码如下：

```
class B
{
    static void Main(string[] args)
    {
        A a = new A();
        C c = a.GetC();
        C c2 = C(); //Non-invocable member 'C' cannot be used like a method
    }
}
class A : C
{
    public new C GetC()
    {
        C c = C.GetC();
        return c;
    }
}

class C
{
    protected C()
    {
    }
    protected static C GetC()
    {
        return new C();
    }
} 
```

# c - 我可以跳过 cmake 编译器测试或避免“错误：无法识别的选项'-rdynamic'”吗

> ID：10599038
> 
> 赞同：37
> 
> 时间：2012-05-15T10:42:33.823
> 
> 标签：c, cmake, cross-compiling

用于 ARM 目标系统的 cmake（在 Windows 上）的编译选项，但是当我运行 configure 时，它​​开始编译器测试：

```
CMake Error at D:/Program Files/CMake 2.8/share/cmake-2.8/Modules/CMakeTestCCompiler.cmake:52 (MESSAGE):
  The C compiler "D:/Program Files/yagarto/bin/arm-none-eabi-gcc.exe" is not
  able to compile a simple test program.

  It fails with the following output:

   Change Dir: D:/merge/complex/build/CMakeFiles/CMakeTmp

  Run Build Command:D:/PROGRA~1/YAGART~1/bin/make.exe "cmTryCompileExec/fast"

  D:/PROGRA~1/YAGART~1/bin/make.exe -f
  CMakeFiles/cmTryCompileExec.dir/build.make
  CMakeFiles/cmTryCompileExec.dir/build

  make.exe[1]: Entering directory
  `D:/merge/complex/build/CMakeFiles/CMakeTmp'

  "D:/Program Files/CMake 2.8/bin/cmake.exe" -E cmake_progress_report
  D:/merge/complex/build/CMakeFiles/CMakeTmp/CMakeFiles 1

  Building C object CMakeFiles/cmTryCompileExec.dir/testCCompiler.c.o

  "D:/Program Files/yagarto/bin/arm-none-eabi-gcc.exe" -o
  CMakeFiles/cmTryCompileExec.dir/testCCompiler.c.o -c
  D:/merge/complex/build/CMakeFiles/CMakeTmp/testCCompiler.c

  Linking C executable cmTryCompileExec

  "D:/Program Files/yagarto/bin/arm-none-eabi-gcc.exe"
  "CMakeFiles/cmTryCompileExec.dir/testCCompiler.c.o" -o cmTryCompileExec
  -rdynamic 

  arm-none-eabi-gcc.exe: error: unrecognized option '-rdynamic'

  make.exe[1]: *** [cmTryCompileExec] Error 1 
```

使用 Yagatdo 4.6.* 交叉编译工具链

我怎样才能跳过这个测试或修复我得到的 -rdynamic 错误？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-06-04T11:02:03.763

您可以设置`CMAKE_<LANG>_COMPILER_WORKS`为 true 以禁止对该语言进行进一步的编译器检查。

```
set(CMAKE_C_COMPILER_WORKS 1) 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-15T11:08:33.607

`NONE`您可以通过添加到您的`project`调用跳过编译器检查：

```
project(<projectname> NONE) 
```

但这会产生相当深远的影响。有关完整详细信息，请运行

```
cmake --help-command project 
```

我不熟悉 ARM，所以这可能不是你最好的选择。我想你最好看看是否有办法修复`-rdynamic`标志。

### 编辑：

看起来这被[确定为一个](http://www.cmake.org/Bug/view.php?id=9985)实际上仍未解决的错误。错误报告中的评论提到添加以下行作为解决方法（大概在您`project`致电之前）：

```
set(CMAKE_SHARED_LIBRARY_LINK_C_FLAGS "")
set(CMAKE_SHARED_LIBRARY_LINK_CXX_FLAGS "") 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2014-07-18T14:56:49.210

看来您实际上的目标不是 Linux，所以您应该告诉 cmake 您正在为通用案例进行交叉编译：

```
SET(CMAKE_SYSTEM_NAME Generic) 
```

其次是（可选，但很高兴指定）：

```
SET(CMAKE_SYSTEM_PROCESSOR arm)
SET(CMAKE_CROSSCOMPILING 1) 
```

但是，如果您指定（您可能会这样做，因为这在许多在线示例中都有说明）：

```
SET(CMAKE_SYSTEM_NAME Linux) 
```

然后 cmake 将从（假设版本 2.8）文件加载配置文件：

```
/usr/share/cmake-2.8/Modules/Platform/Linux.cmake 
```

它可能从中加载：

```
/usr/share/cmake-2.8/Modules/Platform/Linux-GNU.cmake 
```

此处设置`-rdynamic`标志是出于历史原因：

```
macro(__linux_compiler_gnu lang)
  # We pass this for historical reasons.  Projects may have
  # executables that use dlopen but do not set ENABLE_EXPORTS.
  set(CMAKE_SHARED_LIBRARY_LINK_${lang}_FLAGS "-rdynamic")
endmacro() 
```

而不是通过指定`NONE`为`PROJECT`参数来禁用测试，似乎将`CMAKE_SYSTEM_NAME`( 设置为其他东西`Linux`，例如`Generic`) 是您真正想要做的。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-02-22T10:19:54.170

如果您只是在编译静态库，并且希望避免让 CMake 测试编译器可以生成二进制文件，则可以设置变量[`CMAKE_TRY_COMPILE_TARGET_TYPE`](https://cmake.org/cmake/help/latest/variable/CMAKE_TRY_COMPILE_TARGET_TYPE.html).

```
set(CMAKE_TRY_COMPILE_TARGET_TYPE STATIC_LIBRARY) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-15T11:10:41.377

在没有 -rdynamic 选项的 Windows 交叉编译时，您可以使用

```
-DCMAKE_SYSTEM_NAME="Windows" 
```

与 cmake。然后 Cmake 将使用 -rdynamic 跳过测试。

# android - 在android中使用动画的图像翻转效果

> ID：10599045
> 
> 赞同：0
> 
> 时间：2012-05-15T10:42:52.210
> 
> 标签：android, animation, android-canvas

我目前正在开发一款安卓游戏

我想使用动画创建图像翻转效果。我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:45:40.480

[这里](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)有一个很好的例子

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:45:29.567

试试这个： [Android 动画 - 翻转](https://stackoverflow.com/questions/3364010/android-animation-flip)

或更复杂： http: [//www.inter-fuser.com/2009/08/android-animations-3d-flip.html](http://www.inter-fuser.com/2009/08/android-animations-3d-flip.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-04T17:41:14.493

我设法使用 setScaleX（用于围绕 Y 轴的翻转/反射）实现了这一点。使用 setScaleY 围绕 X 轴进行翻转/反射。

```
final ValueAnimator rotation = ValueAnimator.ofFloat(0, 360); 
```

然后在您的`onAnimationUpdate`函数中，使用角度范围内的余弦函数在 X 或 Y 上设置比例。

```
view.setScaleX((float)Math.cos(Math.toRadians((Float)valueAnimator.getAnimatedValue()))); 
```

希望这可以帮助

# c# - 如何在一个 XAML 窗口上处理多个 DataContexts？

> ID：10599049
> 
> 赞同：0
> 
> 时间：2012-05-15T10:42:57.993
> 
> 标签：c#, .net, wpf, xaml

我有一个类，我们将其称为 SomeClass。SomeClass 实现了 INotifyPropertyChanged ，代码如下：

```
public class SomeClass
{
.
.
.
private bool _isDirty;

public bool IsDirty
{
    get { return this._isDirty; }
    set
    {
    this._isDirty = value;
    this.NotifyPropertyChanged("IsDirty");
    }
}

public event PropertyChangedEventHandler PropertyChanged;

public void NotifyPropertyChanged(string propertyName)
{
    if (this.PropertyChanged != null)
    {
    this.PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
}
} 
```

我有一个使用 的实例的表单`SomeClass`，称为`instanceOfSomeClass`

该属性全部正确触发，但主要问题是我将保存按钮绑定到该属性即。

```
<Button Content="Save" Height="23" Name="btnSave" IsEnabled="{Binding Path=IsDirty}" Width="60" Margin="10, 10" HorizontalAlignment="Right" Click="btnSave_Click" /> 
```

组合框 SelectionChanged 事件应该更改该属性，定义如下：

```
<ComboBox Name="cboListOfUsers" ItemsSource="{Binding}" SelectionChanged="cboSomeCombo_SelectionChanged"/> 
```

（我已经删除了与问题无关的部分组合框定义，例如样式等）

关键是组合框的 DataContext 没有设置为 instanceOfSomeClass，而是自定义类的列表。

SelectionChanged 事件触发，我的代码如下所示：

```
instanceOfSomeClass.IsDirty = true;
instanceOfSomeClass.User = (ApplicationUser) cboSomeCombo.SelectedItem; 
```

这会运行，尽管它确实会更改属性并引发适当的通知，但它不会启用命令按钮。我推测这是因为组合的 DataContext 与命令按钮的 DataContext 不同

我尝试在 SelectionChanged 事件中更改 DataContext ，但这只会导致组合中没有选择任何内容（虽然启用了“保存”按钮！）

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:09:41.860

> 我推测这是因为组合的 DataContext 与命令按钮的 DataContext 不同

不，我不这么认为。您可以尝试不将 ItemsSource 直接绑定到 DataContext，而是使用数据上下文上的成员或使用 RelativeSource、ElementName，直接指定源或其他绑定语法。我强烈建议使用来自属性的集合，而不是将集合设置为数据上下文（我个人认为那是非常糟糕的风格，{Binding} 应该很​​少使用，我只在涉及 ContentControls 时使用它）。

检查按钮上的 Datacontext，使用[snoop](http://snoopwpf.codeplex.com/)来查找此类错误有很大帮助。确保该属性确实被提升了，我无法计算有多少次我们没有进入错误所在的实际 NotifyPropertyChanged。

确保您的按钮在某处不使用命令，因为命令会以某些方式更改 IsEnabled 属性。

确保没有人覆盖 IsEnabled 属性，例如触发器、动画等。

检查输出是否有绑定错误或警告，如果您使用 vs10，请启用它们。

如果您可以提供更多信息，我将更新我的答案，只是为了发表评论。

# asp.net-mvc - asp.net mvc中的Thickbox

> ID：10599053
> 
> 赞同：0
> 
> 时间：2012-05-15T10:43:06.863
> 
> 标签：asp.net-mvc

我想在我的网站中使用Thickbox。我有以下代码：

```
<a href='@Url.Action("GetSchemaImage", "Hall", new {folderName = @Model.FolderName })' class="thickbox"><img src='@Url.Action("GetSchemaImage", "Hall", new {folderName = @Model.FolderName })'/></a> 
```

这是生成的标记：

```
<a class="thickbox" href="/Hall/GetSchemaImage?folderName=marineclub"><img src="/Hall/GetSchemaImage?folderName=marineclub"></a> 
```

图像显示正确，但是当我单击它时，它会在当前窗口中打开。

如何解决？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:25:13.013

为 HTML ActionLink 帮助器尝试另一个签名，看看这是否有效

```
@Html.ActionLink("GetSchemaImage", "Hall",new {folderName = @Model.FolderName },new{}) 
```

# javascript - 这个高阶函数有什么问题？

> ID：10599056
> 
> 赞同：1
> 
> 时间：2012-05-15T10:43:39.380
> 
> 标签：javascript, higher-order-functions

```
mathOp =  function(type){
            return (
               "add" == type?  function(a,b){return a + b}
              :"mul" == type?  function(a,b){return a * b}
              :"sub" == type?  function(a,b){return a - b}
              :"div" == type?  function(a,b){return a / b}

            )
         } 
```

Chrome JS 调试器工具说：**SyntaxError: Unexpected token )**

这种语法有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T10:45:44.117

你忘了最后`: else`一部分。

```
mathOp =  function(type){
            return (
               "add" == type?  function(a,b){return a + b}
              :"mul" == type?  function(a,b){return a * b}
              :"sub" == type?  function(a,b){return a - b}
              :"div" == type?  function(a,b){return a / b}
              : function() { return NaN; /* or throw an exception */ }
            )
         } 
```

您可以使用以下命令使其更具可读性`switch()`：

```
function mathOp(type) {
    switch(type) {
        case 'add': return function(a,b) { return a + b; };
        case 'mul': return function(a,b) { return a * b; };
        case 'sub': return function(a,b) { return a - b; };
        case 'div': return function(a,b) { return a / b; };
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T00:50:26.630

如前所述，缺少 : 。

但是，这是改进此代码的另一种方法。将操作放在表中（作为对象实现）：

```
var ops = {
  add: function(a, b) {return a + b;},
  mul: function(a, b) {return a * b;},
  sub: function(a, b) {return a - b;},
  div: function(a, b) {return a / b;}
}; 
```

然后`mathOp`执行表查找，如果未找到任何操作，则采取适当的错误处理：

```
function mathOp(mytype) {
    var op = ops[mytype];
    if(!op) {
        ... error-handling ...
    }
    return op;
} 
```

这样做的好处是操作函数只创建一次而不是每次`mathOp`调用，它更容易扩展，并且如果需要，该表可以被其他函数使用。

# java - 如何将会话值从一个 servlet 检索到另一个 servlet？

> ID：10599059
> 
> 赞同：8
> 
> 时间：2012-05-15T10:43:47.923
> 
> 标签：java, session, servlets

在一个 servlet 中，我有四个变量。我希望将所有这四个变量检索到另一个 servlet。

我使用 servlet 1 中的代码如下。

```
import javax.servlet.http.HttpSession;

session.setAttribute("id",id); 
```

在另一个 servlet 中，我尝试使用代码获取值..

```
String id = HttpSession.getAttribute("id").toString(); 
```

我认为有一种清晰的方法可以跟踪会话变量。

我在网上见过，但一切都让我感到困惑..

请帮我..

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T10:57:07.703

首先，您需要从请求中获取 Session 对象。

这是发送到 servlet 的 HTTPServletRequest 对象（您可以在 doGet 或 doPost 方法中访问它）。

设置：

```
ses = request.getSession(true);
ses.setAttribute("Name","Value"); 
```

检索：

```
request.getSession(false).getAttribute("name") 
```

`getSession(true)`表示如果会话不存在则创建会话。 `getSession(false)`等于getSession。最后，如果您希望从该点从会话中删除属性，您可以使用

```
request.getSession().removeAttribute("Name"); 
```

[如果您需要更多地了解Java Set、Get 和 Remove Session Attributes，](http://www.tomred.net/java-set-get-and-remove-session-attributes.html)我希望这对您有意义。

汤姆瑞德

# c++ - 如何将字节打印为十六进制？

> ID：10599068
> 
> 赞同：39
> 
> 时间：2012-05-15T10:44:23.057
> 
> 标签：c++, bytearray, type-conversion, data-conversion

我知道在 C# 中你可以使用 String.Format 方法。但是你如何在 C++ 中做到这一点？是否有允许我将字节转换为十六进制的功能？只需要将 8 字节长的数据转换为十六进制，我该怎么做？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-15T11:55:09.920

如果要使用 C++ 流而不是 C 函数，可以执行以下操作：

```
int ar[] = { 20, 30, 40, 50, 60, 70, 80, 90 };
const int siz_ar = sizeof(ar) / sizeof(int);

for (int i = 0; i < siz_ar; ++i)
    cout << ar[i] << " ";
cout << endl;

for (int i = 0; i < siz_ar; ++i)
    cout << hex << setfill('0') << setw(2) << ar[i] << " ";
cout << endl; 
```

非常简单。

**输出：**

```
20 30 40 50 60 70 80 90
14 1e 28 32 3c 46 50 5a 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2012-05-15T10:49:34.413

好吧，您可以一次将一个字节（无符号字符）转换为这样的数组

```
char buffer [17];
buffer[16] = 0;
for(j = 0; j < 8; j++)
    sprintf(&buffer[2*j], "%02X", data[j]); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-11-27T14:32:09.923

C：

```
static void print_buf(const char *title, const unsigned char *buf, size_t buf_len)
{
    size_t i = 0;
    fprintf(stdout, "%s\n", title);
    for(i = 0; i < buf_len; ++i)
    fprintf(stdout, "%02X%s", buf[i],
             ( i + 1 ) % 16 == 0 ? "\r\n" : " " );

} 
```

C++：

```
void print_bytes(std::ostream& out, const char *title, const unsigned char *data, size_t dataLen, bool format = true) {
    out << title << std::endl;
    out << std::setfill('0');
    for(size_t i = 0; i < dataLen; ++i) {
        out << std::hex << std::setw(2) << (int)data[i];
        if (format) {
            out << (((i + 1) % 16 == 0) ? "\n" : " ");
        }
    }
    out << std::endl;
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-11-24T13:07:06.553

# 在现代 C++ 中打印任意结构

到目前为止，所有答案都只告诉您如何打印整数数组，但我们也可以打印任意结构，只要我们知道它的大小。下面的示例创建了这样的结构并通过其字节迭代指针，将它们打印到输出：

```
#include <iostream>
#include <iomanip>
#include <cstring>

using std::cout;
using std::endl;
using std::hex;
using std::setfill;
using std::setw;

using u64 = unsigned long long;
using u16 = unsigned short;
using f64 = double;

struct Header {
    u16 version;
    u16 msgSize;
};

struct Example {
    Header header;
    u64 someId;
    u64 anotherId;
    bool isFoo;
    bool isBar;
    f64 floatingPointValue;
};

int main () {
    Example example;
    // fill with zeros so padding regions don't contain garbage
    memset(&example, 0, sizeof(Example));
    example.header.version = 5;
    example.header.msgSize = sizeof(Example) - sizeof(Header);
    example.someId = 0x1234;
    example.anotherId = 0x5678;
    example.isFoo = true;
    example.isBar = true;
    example.floatingPointValue = 1.1;

    cout << hex << setfill('0');  // needs to be set only once
    auto *ptr = reinterpret_cast<unsigned char *>(&example);
    for (int i = 0; i < sizeof(Example); i++, ptr++) {
        if (i % sizeof(u64) == 0) {
            cout << endl;
        }
        cout << setw(2) << static_cast<unsigned>(*ptr) << " ";
    }

    return 0;
} 
```

这是输出：

```
05 00 24 00 00 00 00 00 
34 12 00 00 00 00 00 00 
78 56 00 00 00 00 00 00 
01 01 00 00 00 00 00 00 
9a 99 99 99 99 99 f1 3f 
```

请注意，此示例还说明了[内存对齐](https://stackoverflow.com/a/4306269/778272)工作。我们看到`version`占用了 2 个字节 ( `05 00`)，然后是`msgSize`2 个字节 ( `24 00`)，然后是 4 个填充字节，之后是`someId`( `34 12 00 00 00 00 00 00`) 和`anotherId`( `78 56 00 00 00 00 00 00`)。然后`isFoo`，它占用 1 个字节 ( `01`) 和`isBar`，另一个字节 ( `01`)，接着是 6 个字节的填充，最后以双字段的 IEEE 754 标准表示结束`floatingPointValue`。

另请注意，所有值都表示为[小端](https://en.wikipedia.org/wiki/Endianness)（最低有效字节在前），因为这是在英特尔平台上编译和运行的。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2021-09-25T15:51:20.063

您可以使用[`std::format`](https://en.cppreference.com/w/cpp/utility/format/format)类似于`String.Format`C# 的 C++20 来执行此操作：

```
std::string s = std::format("{:x}", std::byte(42)); // s == 2a 
```

在`std::format`广泛使用之前，您可以使用基于 ( [godbolt](https://godbolt.org/z/75vsY99de) )[的 {fmt} 库](https://github.com/fmtlib/fmt)：`std::format`

```
std::string s = fmt::format("{:x}", std::byte(42)); // s == 2a 
```

**免责声明**：我是 {fmt} 和 C++20 的作者`std::format`。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-09-05T13:45:32.987

这是 Nibble to Hex 方法的修改版本

```
void hexArrayToStr(unsigned char* info, unsigned int infoLength, char **buffer) {
    const char* pszNibbleToHex = {"0123456789ABCDEF"};
    int nNibble, i;
    if (infoLength > 0) {
        if (info != NULL) {
            *buffer = (char *) malloc((infoLength * 2) + 1);
            buffer[0][(infoLength * 2)] = 0;
            for (i = 0; i < infoLength; i++) {
                nNibble = info[i] >> 4;
                buffer[0][2 * i] = pszNibbleToHex[nNibble];
                nNibble = info[i] & 0x0F;
                buffer[0][2 * i + 1] = pszNibbleToHex[nNibble];
            }
        } else {
            *buffer = NULL;
        }
    } else {
        *buffer = NULL;
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-08-02T20:21:37.637

我不知道比以下更好的方法：

```
unsigned char byData[xxx]; 

int nLength = sizeof(byData) * 2;
char *pBuffer = new char[nLength + 1];
pBuffer[nLength] = 0;
for (int i = 0; i < sizeof(byData); i++)
{
    sprintf(pBuffer[2 * i], "%02X", byData[i]);
} 
```

您可以使用 Nibble to Hex 方法加快速度

```
unsigned char byData[xxx];

const char szNibbleToHex = { "0123456789ABCDEF" };

int nLength = sizeof(byData) * 2;
char *pBuffer = new char[nLength + 1];
pBuffer[nLength] = 0;
for (int i = 0; i < sizeof(byData); i++)
{
    // divide by 16
    int nNibble = byData[i] >> 4;
    pBuffer[2 * i]  = pszNibbleToHex[nNibble];

    nNibble = byData[i] & 0x0F;
    pBuffer[2 * i + 1]  = pszNibbleToHex[nNibble];

} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-02-19T20:05:46.157

另一个答案，如果字节数组被定义为`char[]`，大写并用空格分隔。

```
void debugArray(const unsigned char* data, size_t len) {
    std::ios_base::fmtflags f( std::cout.flags() );
    for (size_t i = 0; i < len; ++i)
        std::cout << std::uppercase << std::hex << std::setfill('0') << std::setw(2) << (((int)data[i]) & 0xFF) << " ";
    std::cout << std::endl;
    std::cout.flags( f );
} 
```

例子：

```
unsigned char test[]={0x01, 0x02, 0x03, 0x04, 0x05, 0x06};
debugArray(test, sizeof(test)); 
```

输出：

`01 02 03 04 05 06`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-12-07T16:42:19.090

**使用 C++ 流并在之后恢复状态**

这是[如何将字节打印为十六进制的变体？](https://stackoverflow.com/questions/10599068/how-do-i-print-bytes-as-hexadecimal/10600155#10600155)但：

*   可运行
*   考虑到这会改变 cout 的状态，并尝试在最后恢复它，如：[Restore the state of std::cout after manipulating it](https://stackoverflow.com/questions/2273330/restore-the-state-of-stdcout-after-manipulating-it)

主文件

```
#include <iomanip>
#include <iostream>

int main() {
    int array[] = {0, 0x8, 0x10, 0x18};
    constexpr size_t size = sizeof(array) / sizeof(array[0]);

    // Sanity check decimal print.
    for (size_t i = 0; i < size; ++i)
        std::cout << array[i] << " ";
    std::cout << std::endl;

    // Hex print and restore default afterwards.
    std::ios cout_state(nullptr);
    cout_state.copyfmt(std::cout);
    std::cout << std::hex << std::setfill('0') << std::setw(2);
    for (size_t i = 0; i < size; ++i)
        std::cout << array[i] << " ";
    std::cout << std::endl;
    std::cout.copyfmt(cout_state);

    // Check that cout state was restored.
    for (size_t i = 0; i < size; ++i)
        std::cout << array[i] << " ";
    std::cout << std::endl;
} 
```

编译并运行：

```
g++ -o main.out -std=c++11 main.cpp
./main.out 
```

输出：

```
0 8 16 24 
00 8 10 18 
0 8 16 24 
```

在 Ubuntu 16.04、GCC 6.4.0 上测试。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-04-22T20:22:18.967

另一个 C++17 替代方案，因为为什么不呢！

```
std::cout<<std::hex<<std::setfill('0');

struct {
    std::uint16_t first{666};
    std::array<char,4> second{'a','b','c','d'};
} my_struct;

auto ptr = reinterpret_cast<std::byte*>(&my_struct);
auto buffer = std::vector<std::byte>(ptr, ptr + sizeof(my_struct));
std::for_each(std::begin(buffer),std::end(buffer),[](auto byte){
    std::cout<<std::setw(2)<<std::to_integer<int>(byte)<<' ';
}); 
```

可执行代码[在这里](https://godbolt.org/z/jr1ofh3z7)。

# iphone - 如何在iphone应用程序中的图形值的y轴上显示$符号

> ID：10599070
> 
> 赞同：0
> 
> 时间：2012-05-15T10:44:30.577
> 
> 标签：iphone, graph, string-formatting

我有图表显示给定值的百分号，但我希望在我的代码中将 $ 我更改为 $ 但它也隐藏了所有值

```
 -(void)drawHistogramWithItem:(ECGraphItem *)item index:(int)index color:(UIColor *)color
    {
if (index != 0) 
    _histogramStartX += _histogramSpacing + item.width;
CGRect rect = CGRectMake(_histogramStartX, _xaxisStart.y - _ySpacingScale*item.yValue,item.width, _ySpacingScale*item.yValue);
[color setFill];
[[UIColor blackColor] setStroke];
CGContextAddRect(_context,rect);
CGContextDrawPath(_context, kCGPathFillStroke);
[[UIColor blackColor] set];
NSString *percentage = [NSString stringWithFormat:@"%.1f%%",item.yValue];

[percentage drawAtPoint:CGPointMake(_histogramStartX,_xaxisStart.y - _ySpacingScale*item.yValue - 15) withFont:[UIFont boldSystemFontOfSize:10]];
[self drawWords:item.name AtPoint:CGPointMake(_histogramStartX + item.width/8 ,_xaxisStart.y + 5)  color:[UIColor blackColor]];
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:59:59.993

只需更改：

```
NSString *percentage = [NSString stringWithFormat:@"%.1f%%",item.yValue]; 
```

对此：

```
NSString *percentage = [NSString stringWithFormat:@"%.1f$",item.yValue]; 
```

它应该工作。希望能帮助到你

# android - Android：解析 JSON 日期

> ID：10599079
> 
> 赞同：1
> 
> 时间：2012-05-15T10:45:19.297
> 
> 标签：android, json, parsing, datetime

我从服务器获取具有这种格式的 Json 对象，`"Date": "/Date(1337032800000+0000)/"`我需要它像“1 April”。

我试图像这样解析它，但我总是得到`"Unparseable date" message`：

```
mDate = jsonArray.getJSONObject(i).getString("Date");
                    String shortDate = mDate.substring(6, mDate.length()-7);
                    String format="yyyy-MM-dd";
                    SimpleDateFormat sdf = new SimpleDateFormat(format);
                    try {
                        Date date = sdf.parse(shortDate);
                    } catch (ParseException e) {
                        e.printStackTrace();
                    } 
```

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:48:36.867

这是时间戳？为什么您不将 String 更改为 long 并且：

```
Date date = new Date();
date.setTime(yourLongVariable); 
```

月：

```
 int month = date.getMonth();

    months = " " + res.getString(R.string.january);
    if(month == 2)
    {
        months = " " + res.getString(R.string.febuary);
    }
    else if(month == 3)
    {
        months = " " + res.getString(R.string.march);
    }
    else if(month == 4)
    {
        months = " " + res.getString(R.string.april);
    }
    else if(month == 5)
    {
        months = " " + res.getString(R.string.may);
    }
    else if(month == 6)
    {
        months = " " + res.getString(R.string.june);
    }
    else if(month == 7)
    {
        months = " " + res.getString(R.string.july);
    }
    else if(month == 8)
    {
        months = " " + res.getString(R.string.august);
    }
    else if(month == 9)
    {
        months = " " + res.getString(R.string.september);
    }
    else if(month == 10)
    {
        months = " " + res.getString(R.string.october);
    }
    else if(month == 11)
    {
        months = " " + res.getString(R.string.november);
    }
    else if(month == 12)
    {
        months = " " + res.getString(R.string.december);
    } 
```

我知道这不是专业的，但它对我有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:49:20.593

您需要修改原始响应，例如替换*/Date/*

```
String data = "/Date(1337032800000+0000)/";
String result = data.replaceAll("^/Date\\(" , "");
result = result.substring(0, result.indexOf('+')); 
```

现在你有了`1337032800000`毫秒的日期。

# c# - 如何在 CanExecute 上使用 Linq 或扩展方法来满足这个条件？

> ID：10599082
> 
> 赞同：1
> 
> 时间：2012-05-15T10:45:28.213
> 
> 标签：c#, wpf

我有一个`ObservableCollection<Data> Items`

数据上有一个“列”属性，它又是一个`ObservableCollection<Column>`.

Column 对象有一个名为“IsActive”的布尔属性。

我有一个案例，我需要确定是否所有“项目”都具有“列”属性，如果是，则所有列都应该将“IsActive”设置为真或假，但不能同时具有两者。

诀窍是我需要将此逻辑放在按钮的 CanExecute 中。我需要使其尽可能高效和快速...有什么想法吗？结构是：

```
public class MyClass
{
     public ObservableCollection<Data> Items
    {
         get{return _items;}
     }
}

public class Data
{
    public ObservableCollection<Column> Columns
    {
         get{return _columns;}
     }
}

public class Column
{

   public bool IsActive{ get; set;}

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:05:06.570

这闻起来像是过早的优化。你测量过简单方法的速度吗？在现代 CPU 上迭代几个不太大的集合只需要几毫秒。

如果您想使用 LINQ 计算所有`Column`对象是活动的还是非活动的，您可以使用此表达式。

```
public Boolean CanExecute {
  get {
    var aggregate = Items
      .SelectMany(i => i.Columns)
      .Aggregate(
        new {
          IsEmpty = true,
          AllAreActive = true,
          AllAreInactive = true
        },
        (a, c) => new {
          IsEmpty = false,
          AllAreActive = a.AllAreActive && c.IsActive,
          AllAreInactive = a.AllAreInactive && !c.IsActive
        }
    );
    return !aggregate.IsEmpty && (aggregate.AllAreActive || aggregate.AllAreInactive);
  } 
```

此代码将遍历所有集合中的所有元素。您可以通过使用`for`循环并在两个布尔变量都变为假时打破它来改进这一点。这也可以通过`TakeWhile`使用具有副作用的谓词在 LINQ 中完成，但简单的`for`循环可能更容易理解。

如果您认为简单的方法太慢，您需要跟踪该级别的`CanExecute`属性。您可以通过为所有实例`MyClass`设置更改通知处理程序来做到这一点。`ObservableCollection`这有点乏味，因为您有两个级别的集合，但它将确保每当`Column`从集合中添加或删除 a 或更改属性时，都会更新支持的`IsActive`布尔变量。`CanExecute``MyClass`

最初`Column`必须实施`INotifyPropertyChanged`：

```
class Column : INotifyPropertyChanged {

  Boolean isActive;

  public Boolean IsActive {
    get { return this.isActive; }
    set {
      if (this.isActive == value)
        return;
      this.isActive = value;
      OnPropertyChanged("IsActive");
    }
  }

  public event PropertyChangedEventHandler PropertyChanged;

  protected void OnPropertyChanged(String propertyName) {
    var handler = PropertyChanged;
    if (handler != null)
      handler(this, new PropertyChangedEventArgs(propertyName));
  }

} 
```

`Data`必须公开所需的属性，由于缺少更好的名称，我已经调用`AllColumnsAreActiveOrInactive`了该属性，并且通过实现来表示对该属性的更改`INotifyPropertyChanged`。

为了跟踪所有列的状态，`CollectionChanged`集合`Column`的处理。当`Column`添加一个新的值时，`AllColumnsAreActiveOrInactive`可以重新计算而不迭代`Column`集合。但是，当`IsActive`一个单一的变化`Column`或当一个`Column`被删除时，集合必须被迭代以确定新的值`AllColumnsAreActiveOrInactive`。

```
class Data : INotifyPropertyChanged {

  readonly ObservableCollection<Column> columns;

  Boolean allColumnsAreActive = true;

  Boolean allColumnsAreInactive = true;

  Boolean allColumnsAreActiveOrInactive = false;

  public Data() {
    this.columns = new ObservableCollection<Column>();
    this.columns.CollectionChanged += CollectionChanged;
  }

  public ObservableCollection<Column> Columns { get { return this.columns; } }

  public Boolean AllColumnsAreActiveOrInactive {
    get { return this.allColumnsAreActiveOrInactive; }
    set {
      if (value == this.allColumnsAreActiveOrInactive)
        return;
      this.allColumnsAreActiveOrInactive = value;
      OnPropertyChanged("AllColumnsAreActiveOrInactive");
    }
  }

  public event PropertyChangedEventHandler PropertyChanged;

  protected void OnPropertyChanged(String propertyName) {
    var handler = PropertyChanged;
    if (handler != null)
      handler(this, new PropertyChangedEventArgs(propertyName));
  }

  void CollectionChanged(Object sender, NotifyCollectionChangedEventArgs e) {
    if (e.Action == NotifyCollectionChangedAction.Reset) {
      RecomputeAllColumnsAreActiveOrInactive();
      return;
    }
    if (e.OldItems != null) {
      foreach (var item in e.OldItems.Cast<Column>())
        item.PropertyChanged -= ColumnPropertyChanged;
      RecomputeAllColumnsAreActiveOrInactive();
      return;
    }
    if (e.NewItems != null) {
      foreach (var column in e.NewItems.Cast<Column>()) {
        column.PropertyChanged += ColumnPropertyChanged;
        this.allColumnsAreActive = this.allColumnsAreActive && column.IsActive;
        this.allColumnsAreInactive = this.allColumnsAreInactive && !column.IsActive;
      }
      UpdateAllColumnsAreActiveOrInactive();
    }
  }

  void ColumnPropertyChanged(Object sender, PropertyChangedEventArgs e) {
    if (e.PropertyName == "IsActive") {
      var column = sender as Column;
      RecomputeAllColumnsAreActiveOrInactive();
    }
  }

  void RecomputeAllColumnsAreActiveOrInactive() {
    this.allColumnsAreActive = this.columns.All(c => c.IsActive);
    this.allColumnsAreInactive = this.columns.All(c => !c.IsActive);
    UpdateAllColumnsAreActiveOrInactive();
  }

  void UpdateAllColumnsAreActiveOrInactive() {
    AllColumnsAreActiveOrInactive = this.columns.Any()
      && (this.allColumnsAreActive || this.allColumnsAreInactive);
  }

}

class Column : INotifyPropertyChanged {

  Boolean isActive;

  public Boolean IsActive {
    get { return this.isActive; }
    set {
      if (this.isActive == value)
        return;
      this.isActive = value;
      OnPropertyChanged("IsActive");
    }
  }

  public event PropertyChangedEventHandler PropertyChanged;

  protected void OnPropertyChanged(String propertyName) {
    var handler = PropertyChanged;
    if (handler != null)
      handler(this, new PropertyChangedEventArgs(propertyName));
  }

} 
```

为了完成这个解决方案`Column/Data`，必须为收集重复收集方法`Data/MyClass`。

# c++ - 如何返回指针指向的值？

> ID：10599085
> 
> 赞同：4
> 
> 时间：2012-05-15T10:45:37.777
> 
> 标签：c++, pointers

我有一个类成员定义为：

```
someType* X; 
```

我明白了：

```
someType* getX() {return x;} 
```

我想获取值而不是指针，即：

```
someType getX() {return x;} //this is wrong 
```

什么是正确的语法？如何获取值而不是指针？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-15T10:47:59.000

```
someType getX() {return *x;} 
```

请注意，尽管这`x` *按值*`x`返回，即它在每次返回时创建一个副本*。因此（取决于`someType`实际情况）您可能更喜欢返回*引用*：

```
someType& getX() {return *x;} 
```

对于构造成本可能很高的非原始类型，建议通过引用返回，并且对象的隐式复制可能会引入细微的错误。

*[在某些情况下，这可以通过*返回值优化*来优化，正如@paul23 在下面正确指出的那样。但是，一般来说，安全的行为并不是指望这一点。如果您不希望创建额外的副本，请通过返回引用（或指针）在代码中为编译器和人类读者明确说明。]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T10:48:32.887

```
someType getX() const { return *x; } 
```

或者，如果`someType`复制成本高，则通过`const`引用返回：

```
someType const &getX() const { return *x; } 
```

请注意`const`方法上的限定符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:47:51.817

```
SomeType getX()
{
  //  SomeType x = *x; // provided there is a copy-constructor if    
  //  user-defined type.
  // The above code had the typo. Meant to be.
  SomeType y = *x;
   return y;
} 
```

# css - 查找 CSS 注释的正则表达式中不必要的星号

> ID：10599089
> 
> 赞同：5
> 
> 时间：2012-05-15T10:45:51.400
> 
> 标签：css, regex, comments, regex-negation

我想问这个作为我[之前类似问题](https://stackoverflow.com/q/9329552/883832)的更新，但它变得太长了。

我试图理解[w3.org](http://www.w3.org/TR/CSS21/grammar.html#scanner)中给出的与 css 注释匹配的正则表达式并得到了这个疑问

他们为什么使用

```
\/\*[^*]*\*+([^/*][^*]*\*+)*\/
----------------^ 
```

而不仅仅是

```
\/\*[^*]*\*+([^/][^*]*\*+)*\/ 
```

?

两者的工作方式相似。为什么他们那里有一颗额外的星星？

1.  我们来看看这部分：

    ```
    \*+([^/*][^*]*\*+)*
    -A- --B--     -C- 
    ```

    正则表达式引擎将解析 A 部分并匹配所有星号，直到没有更多星号或出现换行符。因此，一旦 A 完成，下一个字符必须是换行符或其他任何不是星号的字符。那为什么不使用`[^/]`他们使用的`[^/*]`呢？

2.  另请查看重复捕获组。

    （[任何**一个**不是 / 或 * 的字符][零个或多个不是 * 的字符][一个或多个星号]）

    它捕获以至少一个或多个星号结尾的字符组。因此，C 将在下一轮将 B 中没有星星的所有星星都带走。

    所以B部分根本没有机会见到任何明星。这就是为什么我认为没有必要在那里放一颗星。

但是那个正则表达式在 w3.org 中，所以我想我的理解可能是错误的。请解释我所缺少的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:30:26.560

这已经在[CSS3 语法模块](http://www.w3.org/TR/css3-syntax/#lexical)中得到纠正：

```
\/\*[^*]*\*+([^/][^*]*\*+)*\/   /* ignore comments */ 
```

请注意，多余的星号已消失，使此表达式与您所拥有的相同。

所以看起来这只是他们在为 CSS2 编写语法时的一个错误。我正在挖掘邮件列表档案，看看是否有任何相关的讨论。

# model-view-controller - 在 app.js 中声明商店、模型和视图？

> ID：10599090
> 
> 赞同：1
> 
> 时间：2012-05-15T10:45:59.037
> 
> 标签：model-view-controller, sencha-touch-2

我想知道是否有义务在 app.js 中声明我的应用程序具有的所有商店/模型/视图？我这么说是因为我已经测试了以下情况：在 app.js 中仅声明控制器，然后尝试在相应的 controller.js 中设置所需的商店/模型/视图，但不起作用 [未定义商店...] ！在我的例子中，我在这样的模块中构建应用程序：

```
app.js
Sales
-- salesController.js
-- salesStore.js
-- salesModel.js
-- salesView_1.js
Account
-- accountController.js
-- accountStore.js
-- accountModel.js
-- accountView_1.js
-- accountView_2.js

and so on... 
```

有关于此的任何信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:15:38.767

根据题主所说，他已经知道如何在MVC结构中定义一个应用程序。**关键是：为什么`Ext.require`仅在控制器中不起作用，对吗？**

`controllers,stores,models,views`关于in 的显式定义有一些描述`app.js`：

*   配置文件 - 实例化每个配置文件并确定它是否应该处于活动状态。如果是这样，还会加载 Profile 自己的依赖项
*   控制器 - 加载后实例化每个控制器
*   商店 - 实例化每个商店，如果未指定，则为其提供默认商店 ID

这意味着所有这些必要的东西都是在你的应用程序加载之前和正确的时候**启动的。**但`Ext.require`不是，因为它是为**异步**方式设计的。例如，假设在您的控制器中（您需要所有其他东西：模型、视图、商店），您跳转到使用商店的视图中，该商店由**class**定义，而不是任何已**启动的 instance**，因此它未定义。

简而言之，声明所有必需内容的正式方式`app.js`可确保您在需要时拥有一个（控制器/存储/模型/视图的）实例。但`Ext.require`支持你的类代码，而不是实例初始化。

# jquery - jQuery selector not this child

> ID：10599094
> 
> 赞同：6
> 
> 时间：2012-05-15T10:46:08.703
> 
> 标签：jquery, jquery-selectors, click, children

Is there any way to attach a click event to several elements, and then have all children to the element, except children of THIS (the one clicked), to run a function?

That's a terrible explanation, but I'm looking for something like this:

```
$(".block_header").click(function(){
    $(".block_header span:not(this span)").toggleClass("collapse expand");
    $(".container:not(this+div.container)").slideToggle();
}); 
```

Here's a sample HTML:

```
<h3 id="sender_header" class="block_header"><span>Sender</span></h3>
<div id="sender_container" class="container">
    <p>Show or hide this, based on which H3 is clicked.</p>
</div>
<h3 id="receiver_header" class="block_header"><span>Receiver</span></h3>
<div id="receiver_container" class="container">
    <p>Show or hide this, based on which H3 is clicked.</p>
</div>
<h3 id="delivery_header" class="block_header"><span>Delivery</span></h3>
<div id="delivery_container" class="container">
    <p>Show or hide this, based on which H3 is clicked.</p>
</div>
<h3 id="items_header" class="block_header"><span>Items</span></h3>
<div id="items_container" class="container">
    <p>Show or hide this, based on which H3 is clicked.</p>
</div>
.... etc, etc (many more of the same) 
```

Hope this isn't too complicated. It would save me a LOT of code.

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T10:48:34.443

Rather than excluding the element in the selector, you can use the [`not()`](http://api.jquery.com/not) function, which accepts a DOM element or jQuery object to remove from the jQuery set.

```
$(".block_header").click(function(e) {
    $('.block_header span').not($(this).find('span')).toggleClass("collapse expand");

    $('.container').not($(this).next()).slideToggle();
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-15T10:52:40.000

Try this:

```
$(this).parent('h3').siblings('h3').children('span').addClass('active');
$(this).parent('h3').siblings('h3').next('div.container').slideToggle('active'); 
```

That should do the trick!

However, can I assume that you will only ever have one active?

If that is the case, this is the easiest:

```
$('.active').removeClass('active').parent('h3').next('div.container').slideUp(); 
```

Hope that helps :)

**edit:**

To be extra clever, store the active one as a variable. So on click:

```
$active = $(this); 
```

Then, next time you can do this, without getting jQuery to go finding the element again:

```
$active.removeClass('active').parent('h3').next('div.container').slideUp();
$active = $(this); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T10:49:35.090

```
$(".block_header").click(function(){
    $(".block_header span").not($('span', this)).toggleClass("active");
    $(".container").not($(this).next()).slideToggle();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T10:50:30.347

Do it like

```
 $(".block_header").not(this).find("span").toggleClass("collapse","expand");

 $(".container").not(this).not("div.container").slideToggle(); 
```

# java - Jsoup 尝试测试 javascript 链接

> ID：10599095
> 
> 赞同：0
> 
> 时间：2012-05-15T10:46:13.483
> 
> 标签：java, jsoup

我正在使用 JSoup 解析网页的所有链接，然后测试这些收集到的链接的响应代码。

我遇到的问题是我正在测试的一些页面具有使用以下方式打开 javascript 弹出窗口的链接： 。我确定有一种简单的方法可以避免选择此链接，但我想不通了！

我的代码：

```
PingUrls(String pageUrl) {
        url = pageUrl;
        int i = 0;
        int retries = 3;

        while (i < retries){
            try {
                response = Jsoup.connect(url)
                        .userAgent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/535.21 (KHTML, like Gecko) Chrome/19.0.1042.0 Safari/535.21")
                        .timeout(10000)
                        .execute();
                success = true;
                break;
            } catch (IOException e) {
            }
            System.out.println("Attempt "+i);
            i++;
        }
    }

    public int getUrlStatus(){
        if(success){
            int statusCode = response.statusCode();
            return statusCode;
        }else {
            return 404;
        }
    }

    public ArrayList<String> getLinks(String targetValue){
        ArrayList<String> urls = new ArrayList<String>();
        try {
            Document doc = response.parse();

            Elements element = doc.select(targetValue+" a[href]");
            for (Element page : element){
                urls.add(page.attr("abs:href"));
            }           
            return urls;
        } catch (IOException e) {
            System.out.println(e);
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:15:46.700

首先，我建议使用 Set 而不是 List。（如果你不熟悉 Collections，Set 会确保没有重复的元素）

另外，我会放一个像 manageURL(String url); 这样的方法。在将其添加到集合之前。在其中进行一些测试以确保它以您想要的方式爬行。就像测试 url 的绝对路径、规范路径，并确保它是 http 或 https 协议的。

# asp.net-mvc-3 - Hidden DropDownListFor 的 ASP.NET MVC3 的验证问题

> ID：10599096
> 
> 赞同：0
> 
> 时间：2012-05-15T10:46:16.873
> 
> 标签：asp.net-mvc-3, drop-down-menu, hidden

最后编辑：问题是 ViewBag.PropName == Model.PropName; 修复：ViewBag.PropName ===> ViewBag.PropName2

这是我第一次发帖；我是新来的，我认为我搞砸了布局......很抱歉！我遇到了一些隐藏下拉列表的客户端验证问题。我正在使用 ASP.NET MVC3，并且在此页面上有很多隐藏的 ddl。但是，验证不适用于某些 ddl。以前有人遇到过这个问题吗？

这是2个属性；1 工作，1 失败

```
//VALIDATION FAILS
[Required]
[Range(0, 4)]
public int TiresBack { get; set; }

//VALIDATION WORKS
[Required]
[Range(0, 4)]
public int TechnicalState { get; set; } 
```

这是一块剃须刀：

```
<tr>//THIS DOESN'T WORK
    <td style="width: 38%;">  
        @txtFor("tiresBack")
    </td>
//This is JQuery Star-Rating.
    <td align="center" id="starsTiresBack">
    </td>
    <td>                            
        @Html.DropDownListFor(model => model.TiresBack, ViewBag.TiresBack as IEnumerable<SelectListItem>, new { style = "display:none;" })
        <input class="blueButton" type="button" id="btnBrandRearTires" value="@txtFor("brandTiresBack")" />
        <span>@Html.ValidationMessageFor(model => model.TiresBack)</span> <span>@Html.ValidationMessageFor(model => model.BrandRearTires)</span>
    </td>
</tr>
 //THIS WORKS
<tr>
    <td style="width: 38%;">
        @txtFor("technicalState")                            
    </td>
    <td id="starsTechnicalState" align="center">
    </td>
    <td>
        @Html.DropDownListFor(model => model.TechnicalState, ViewBag.TechState as IEnumerable<SelectListItem>, new { style = "display:none;" })
        <input class="blueButton" type="button" id="btnTechnicalStateDescription" value="@txtFor("technicalStateDescriptionButton")" style="display:none;"/>
        <span>@Html.ValidationMessageFor(model => model.TechnicalState)</span> <span>@Html.ValidationMessageFor(model => model.TechnicalStateDescription)</span>
    </td>
</tr> 
```

EDIT1：使用此方法在控制器中初始化：

```
 public static List<SelectListItem> CreateDefaultStateList(int? selected = -1)
    {
        List<SelectListItem> sl = new List<SelectListItem>();
        for (int i = -1; i < 5; i++)
        {
            SelectListItem sli = new SelectListItem();
            if (i == 0 || i == -1)
                sli.Text = "";
            else
                sli.Text = i.ToString();
            sli.Value = i.ToString();
            if (i == selected)
                sli.Selected = true;
            sl.Add(sli);
        }
        return sl;
    } 
```

EDIT2：创建控制器。defaultstatelist 是从上面发布的方法返回的内容。

```
List<SelectListItem> defaultStateList = CreateDefaultStateList();

[Authorize]
public ActionResult Create()
{
    FillViewBag();
    ViewBag.PropX = defaultStateList;
    ViewBag.TiresFront = defaultStateList;
    ViewBag.TechState = defaultStateList;
    ViewBag.PropY= defaultStateList;
    ViewBag.PropZ= defaultStateList;
    ViewBag.PropA= defaultStateList;
    ViewBag.PropB= defaultStateList;
    ViewBag.PropC= defaultStateList;
    ViewBag.PropD= defaultStateList;  

    return View(); 
} 
```

输入这个我注意到方法中的默认值。可能是这样... ==> 试过了，不是吗。现在将代码更新为“-1”作为默认值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:09:46.100

问题在于`ViewBag.PropName == Model.PropName;` FIX: 重命名`ViewBag.PropName`为`ViewBag.PropName2`.

# sql - JOIN 操作中的 qn 错误

> ID：10599099
> 
> 赞同：0
> 
> 时间：2012-05-15T10:46:24.173
> 
> 标签：sql, ms-access

我有一个无法在 Access 中运行的查询，因为它在 JOIN 操作中出现错误。

这个查询有什么问题？

```
SELECT *
FROM   (((((( 
tb_Fahrzeug AS fze
JOIN tb_Pinnummern AS tpi
ON tpi.SG = fze.Motor_SG)
JOIN tb_bauteile AS bau
ON bau.ID = tpi.Bauteil)
LEFT JOIN Fehlercodes_akt_Liste AS fpl
ON fpl.ID = bau.[FC_Plus])
LEFT JOIN Fehlercodes_akt_Liste AS fmi
ON fmi.ID = bau.[FC_Minus])
LEFT JOIN Fehlercodes_akt_Liste AS fub
ON fub.ID = bau.[FC_Unterbrechung])
LEFT JOIN Fehlercodes_akt_Liste AS fad
ON fad.ID = bau.[FC_Aderschl] )
WHERE  fze.ID = [forms] ! [frm_fahrzeug] ! [id]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:03:00.853

使用“内部联接”而不是 JOIN 关键字。

# c# - 在 Rss20FeedFormatter 序列化中重新排序元素

> ID：10599101
> 
> 赞同：0
> 
> 时间：2012-05-15T10:46:32.947
> 
> 标签：c#, .net, xml, rss

我想知道是否有一种简单的方法可以重新排序 RSS 项目中的元素。我想我可以手动序列化它，但只是想知道是否有更简单的东西。

.NET 将事物序列化为

```
<item>
<link>http://mmu.ac.uk/library.aspx</link>
<title>URGENT Library information: borrowing facilities withdrawn</title>
<description/>
</item> 
```

Wheras 我正在使用一个 JQuery 新闻自动收报机，它希望这是一个不同的顺序

```
<item>
<title>URGENT Library information: borrowing facilities withdrawn</title>
<description/>
<link>http://mmu.ac.uk/library.aspx</link>
</item> 
```

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:13:36.040

您可以在派生的“MyRss20FeedFormatter”类中覆盖 WriteItem 方法，并更改将 syndicationItems 数据写入输出流的顺序

[http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.rss20feedformatter.writeitem.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.syndication.rss20feedformatter.writeitem.aspx)

# android - 如何在android中移动和动画图像？

> ID：10599102
> 
> 赞同：2
> 
> 时间：2012-05-15T10:46:33.103
> 
> 标签：android, animation, imageview

我试图在图像视图中从上到下再向后移动图像..但图像似乎停留在原地并且根本不动。我尝试了动画类型，但它不起作用..这是代码..

```
 setContentView(R.layout.game);
    AnimationSet set=new AnimationSet(true);
    Animation animation=new TranslateAnimation(0,2000,0,1220);
    ImageView img =new ImageView(this);
    img.setImageResource(R.drawable.dig);
    animation.setDuration(3000);
    animation.setFillAfter(true);
    set.addAnimation(animation);
    set.startNow(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:39:45.667

要移动图像，您可以尝试表面视图这里是一个很好的教程如何移动图像

看到这个链接会帮助你

[http://www.edu4java.com/androidgame/androidgame3.html](http://www.edu4java.com/androidgame/androidgame3.html)

# java - 如何将本地日期转换为 GMT

> ID：10599109
> 
> 赞同：15
> 
> 时间：2012-05-15T10:47:18.910
> 
> 标签：java, date

```
Calendar cal = Calendar.getInstance(TimeZone.getTimeZone("GMT"));
java.util.Date fromDate = cal.getTime();
System.out.println(fromDate); 
```

上面的代码不会以 GMT 打印日期，而是以本地时区打印。如何从当前日期获取 GMT 等效日期（假设程序可以在日本或 SFO 运行）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-15T10:54:25.397

这个怎么样 -

```
public static void main(String[] args) throws IOException {
    Test test=new Test();
    Date fromDate = Calendar.getInstance().getTime();
    System.out.println("UTC Time - "+fromDate);
    System.out.println("GMT Time - "+test.cvtToGmt(fromDate));
}
private  Date cvtToGmt( Date date ){
    TimeZone tz = TimeZone.getDefault();
    Date ret = new Date( date.getTime() - tz.getRawOffset() );

    // if we are now in DST, back off by the delta.  Note that we are checking the GMT date, this is the KEY.
    if ( tz.inDaylightTime( ret )){
        Date dstDate = new Date( ret.getTime() - tz.getDSTSavings() );

        // check to make sure we have not crossed back into standard time
        // this happens when we are on the cusp of DST (7pm the day before the change for PDT)
        if ( tz.inDaylightTime( dstDate )){
            ret = dstDate;
        }
     }
     return ret;
} 
```

**测试结果**：
UTC 时间 - 2012 年
5 月 15 日星期二 16:24:14 IST GMT 时间 - 2012 年 5 月 15 日星期二 10:54:14 IST

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-15T10:50:16.143

```
DateFormat gmtFormat = new SimpleDateFormat();
TimeZone gmtTime = TimeZone.getTimeZone("GMT");
gmtFormat.setTimeZone(gmtTime);
System.out.println("Current DateTime in GMT : " + gmtFormat.format(new Date())); 
```

更一般地，您可以通过这种方式转换为任何（有效）时区

* * *

**看**

*   [`DateFormat`](http://docs.oracle.com/javase/1.6/docs/api/java/text/DateFormat.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T10:55:33.447

像这样`SimpleDateFormat dateFormatGmt = new SimpleDateFormat("yyyy-MMM-dd HH:mm:ss"); dateFormatGmt.setTimeZone(TimeZone.getTimeZone("GMT"));`？

# linux - 限制 Squid 只能访问一个站点

> ID：10599122
> 
> 赞同：11
> 
> 时间：2012-05-15T10:47:59.873
> 
> 标签：linux, ubuntu, squid

如何通过我的 Squid 代理限制对**一个网站的访问？**

以下不起作用...

```
acl amazon_ireland src 79.125.0.0/17
acl some_site url_regex google

http_access allow amazon_ireland
http_access allow some_site
http_access deny all 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-15T13:11:49.620

查看 squid 常见问题解答，您的设置有一个完美的示例。

[鱿鱼常见问题](http://wiki.squid-cache.org/SquidFaq/SquidAcl#Is_there_an_easy_way_of_banning_all_Destination_addresses_except_one.3F)

```
 acl GOOD dst 10.0.0.1
 http_access allow GOOD
 http_access deny all 
```

如果你想通过域名匹配

```
 acl GOOD dstdomain .amazon.ie
 http_access allow GOOD
 http_access deny all 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-10T21:55:59.810

这是另一种方式，您可以在其中指定源 IP 地址。并阻止特定网站，例如 youtube facebook

```
acl liberaip src 130.44.0.215
acl block url_regex -i youtube facebook
http_access allow liberaip !block 
```

# jquery-ui - jQuery Ui Slider Handler 没有在 PhoneGap 应用程序中被鼠标拖动

> ID：10599126
> 
> 赞同：0
> 
> 时间：2012-05-15T10:48:17.947
> 
> 标签：jquery-ui, cordova

我正在开发一个 iPhone 应用程序。我在 Xcode4 中使用 PhoneGap 来开发应用程序并使用 iPhone 模拟器 4.3 对其进行测试。

我的问题是我在我的应用程序中使用 jQuery ui 滑块来实现音频栏，滑块随着音频正确移动，但我无法用鼠标拖动滑块手柄，当我使用 Safari 浏览器测试同一个应用程序时，它工作正常那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:31:38.197

jQuery UI 当前不支持触摸事件。我建议使用 jQuery UI Touch Punch 来添加该功能 - [http://touchpunch.furf.com/](http://touchpunch.furf.com/)。

# c# - 将俄语数据从数组中插入数据库

> ID：10599128
> 
> 赞同：0
> 
> 时间：2012-05-15T10:48:20.717
> 
> 标签：c#, sql-server-2005, encoding

我的查询看起来像：

```
string str = string.Format("Insert into [MyDB].[dbo].[tlb1] ([file_path],[CONTENT1],[CONTENT2]) values ('{0}','{1}','{2}');", fullpath, _val[0], _val[1]); 
```

现在，当我将数据插入数据库时​​，如果`array _val[]`它包含英语数据，它会正确插入，但是当数组在数据库中包含俄语数据时，这会显示类似`???????????????????????` Is there a way to insert data in Russian Language from an array。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:11:03.377

根据这个（存档的）微软支持问题：

[**在 SQL Server 中处理 Unicode 字符串常量时，**必须在所有 Unicode 字符串前面加上前缀 N****](https://web.archive.org/web/20150114081311/http://support.microsoft.com:80/kb/239530/en-us "http://support.microsoft.com/kb/239530/en-us 的存档")

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:11:45.960

首先，您应该使用准备好的语句并让数据库驱动程序正确插入占位符（即`SqlCommand`带参数）。然后问题应该会消失（以及任何潜在的 SQL 注入问题）。

作为您的情况的快速修复：为您插入的字符串文字添加前缀`N`：

```
... values (N'{0}',N'{1}',N'{2}') 
```

这会导致文字是 Unicode 文字，而不是任意遗留代码页，从而阻止从 Unicode 转换为遗留代码页（这会导致无法表示的字符出现问号）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:57:02.473

似乎列`[Content1]`和的数据类型`[Content2]`是`nchar`. 您应该转换`nvarchar`用于存储 unicode 数据的列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:59:18.670

首先，您必须在服务器上看到数据库代码页。可能是数据库中的非 Unicode CP，但来自您的应用程序的数据采用 Unicode 格式。**

# grails - 如何在 HTTPBuilder 中为 POST 请求传递数组

> ID：10599141
> 
> 赞同：1
> 
> 时间：2012-05-15T10:48:39.710
> 
> 标签：grails, groovy, httpbuilder

我使用的发布请求代码：

```
def http = new HTTPBuilder(uri)
http.request(Method.POST, ContentType.TEXT){
    send ContentType.URLENC, attrs

    ..Response handler code...         
} 
```

这里的 attrs 是一个带有需要传递的键和值的映射，例如：

```
[param1:'value1', param2:'value2', param3:'value3] 
```

我需要支持为同一个参数传递多个值，因此不能作为映射传递。在这种情况下，我的选择是什么？我需要通过的：

```
[param1:'value1', param1:'value2', param3:'value3'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:53:11.747

你应该能够做到：

```
send URLENC, [param1:['value1','value2'], param3:'value3'] 
```

您的示例不起作用，因为地图不能有多个具有相同名称的键

# linux - copy_from_user 返回错误

> ID：10599144
> 
> 赞同：1
> 
> 时间：2012-05-15T10:48:49.717
> 
> 标签：linux, copy, kernel

我正在尝试为包含整数“timer_interval”（全局变量）的 sysfs 文件创建一个存储函数。

```
static ssize_t sys_store(struct kobject *kobj, struct kobj_attribute *attr, const char *buf,     size_t count)
{
  printk(KERN_ALERT "BUF IS %s and count is %d", buf, count);
  int ret;

  char *pTemp = kmalloc(100, GFP_KERNEL); 
  if (pTemp == NULL) 
  {
     printk(KERN_ALERT "malloc WRONG");
     return -EFAULT;
  }

  printk(KERN_ALERT "AFTER MALLOC");

  if (ret = copy_from_user(pTemp ,buf, count)) 
  {
    printk(KERN_ALERT "COPY WRONG %d", ret);
    kfree(pTemp);
    printk(KERN_ALERT "%d" , pTemp);
    return -EFAULT;
  }

  printk(KERN_ALERT "AFTER COPY");

  if (sscanf(pTemp, "%d", &Timer_interval) < count);
  {
    printk(KERN_ALERT "SCANF WRONG");
    kfree(pTemp);
    return -EFAULT;
  }

  printk(KERN_ALERT "AFTER SCANF COUNT = %d", Timer_interval);
  kfree(pTemp);
  return count;
} 
```

问题在于复制给用户。dmesg 显示分配正常，buf 包含正确的数据，但 copy_from_user 返回缓冲区的大小，这意味着没有复制任何内容。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:59:16.627

很可能`buf`是内核空间指针，您不需要使用`copy_from_user`. copy_from_user 由内核调用。

**更新。**

`buf`是来自用户的直接缓冲区。你应该检查 buf 的数据是否正确。例如，函数可以用文本调用，而它需要数字。

顺便提一句。在 sscanf 调用之前，您不会检查 pTemp 数组包含空终止符的内容。如果您复制缓冲区，则需要检查 src 和 dst 缓冲区的大小，以防止内存损坏或段错误。

# python - 在redis中保存unicode但获取错误

> ID：10599147
> 
> 赞同：6
> 
> 时间：2012-05-15T10:48:54.743
> 
> 标签：python, redis

我正在使用 mongodb 和 redis，redis 是我的缓存。

我正在使用 redis-py 缓存 mongodb 对象：

```
obj in mongodb: {u'name': u'match', u'section_title': u'\u6d3b\u52a8', u'title': 
u'\u6bd4\u8d5b', u'section_id': 1, u'_id': ObjectId('4fb1ed859b10ed2041000001'), u'id': 1} 
```

使用 hgetall(key, obj) 从 redis 获取的 obj 是：

```
{'name': 'match', 'title': '\xe6\xaf\x94\xe8\xb5\x9b', 'section_title': 
'\xe6\xb4\xbb\xe5\x8a\xa8', 'section_id': '1', '_id': '4fb1ed859b10ed2041000001', 'id': '1'} 
```

如您所见，从缓存中获取的 obj 是 str 而不是 unicode，因此在我的应用程序中，出现如下错误：'ascii' codec can't decode byte 0xe6 in position 12: ordinal not in range(128)

任何人都可以提供一些建议吗？感谢你

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-05T16:18:37.700

我想我已经发现了问题所在。读完这篇文章后，我不得不从 redis 显式解码，这很痛苦，但有效。

我偶然发现了一篇博客文章，其中作者的输出都是 unicode 字符串，这与我的 obv 不同。

查看`StrictRedis.__init__`有一个参数`decode_responses`，默认情况下是`False`. [https://github.com/andymccurdy/redis-py/blob/273a47e299a499ed0053b8b90966dc2124504983/redis/client.py#L446](https://github.com/andymccurdy/redis-py/blob/273a47e299a499ed0053b8b90966dc2124504983/redis/client.py#L446)

传递`decode_responses=True`构造，对我来说，这解决了 OP 的问题。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T13:27:54.170

*更新*，对于全局设置，检查[jmoz 的答案](https://stackoverflow.com/a/12285706/165603)。

如果您使用的是第三方库，例如`django-redis`，您可能需要指定一个自定义的`ConnectionFactory`：

```
class DecodeConnectionFactory(redis_cache.pool.ConnectionFactory):
    def get_connection(self, params):
        params['decode_responses'] = True
        return super(DecodeConnectionFactory, self).get_connection(self, params) 
```

* * *

假设您使用的是 redis-py，最好传递`str`而不是传递`unicode`给 Redis，否则[Redis 会自动对其进行编码](https://github.com/andymccurdy/redis-py/blob/master/redis/connection.py#L282)以用于`*set`命令，通常[为 UTF-8](https://github.com/andymccurdy/redis-py/blob/master/redis/connection.py#L165)。对于`*get`命令，Redis 不知道值的形式类型，只需要`str`直接返回值。

因此，正如 Denis 所说，将对象存储到 Redis 的方式至关重要。您需要将值转换为`str`以使 Redis 层对您透明。

此外，[将默认编码设置为 UTF-8](https://stackoverflow.com/questions/7105441/how-to-set-default-encoding-in-pythonsetdefaultencoding-function-does-not-exist)而不是使用`ascii`

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-15T10:54:00.330

对于每个字符串，您可以使用该`decode`函数将其转换为 utf-8，例如，如果代码中的标题字段的值：

```
In [7]: a='\xe6\xaf\x94\xe8\xb5\x9b'

In [8]: a.decode('utf8')
Out[8]: u'\u6bd4\u8d5b' 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-15T12:09:44.473

我建议您在写入 MongoDB 或 Redis（或任何外部系统）之前始终编码为 utf-8。并且当你得到结果时你 decode('utf-8') ，所以你总是在 Python 中使用 Unicode。

# javascript - 如何仅在 JavaScript 中获取当前时间

> ID：10599148
> 
> 赞同：199
> 
> 时间：2012-05-15T10:48:57.003
> 
> 标签：javascript, datetime

如何在 JavaScript 中获取当前时间并在时间选择器中使用它？

我试过`var x = Date()`并得到：

> 2012 年 5 月 15 日星期二 05:45:40 GMT-0500

但我只需要当前时间，例如，`05:45`

如何将其分配给变量？

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-05-15T10:51:15.193

```
var d = new Date("2011-04-20T09:30:51.01");
d.getHours(); // => 9
d.getMinutes(); // =>  30
d.getSeconds(); // => 51 
```

或者

```
var d = new Date(); // for now
d.getHours(); // => 9
d.getMinutes(); // =>  30
d.getSeconds(); // => 51 
```

* * *

## 回答 #2

> 赞同：190
> 
> 时间：2015-11-16T10:36:37.997

简短而简单：

```
new Date().toLocaleTimeString(); // 11:18:48 AM
//---
new Date().toLocaleDateString(); // 11/16/2015
//---
new Date().toLocaleString(); // 11/16/2015, 11:18:48 PM 
```

4小时后（使用milisec：sec==1000）：

```
new Date(new Date().getTime() + 4*60*60*1000).toLocaleTimeString(); // 3:18:48 PM or 15:18:48 
```

2天前：

```
new Date(new Date().getTime() - 2*24*60*60*1000).toLocaleDateString() // 11/14/2015 
```

* * *

## 回答 #3

> 赞同：98
> 
> 时间：2014-08-06T15:13:18.883

# 使用 javascript 有效地获取和设置当前时间

我找不到完全符合我需要的解决方案。我想要干净而小巧的代码，所以我想出了这个：

*（在您的 master.js 中设置一次，并在需要时调用。）*

**纯 JAVASCRIPT**

```
function timeNow(i) {
  var d = new Date(),
    h = (d.getHours()<10?'0':'') + d.getHours(),
    m = (d.getMinutes()<10?'0':'') + d.getMinutes();
  i.value = h + ':' + m;
}
```

```
<a onclick="timeNow(test1)" href="#">SET TIME</a>
<input id="test1" type="time" value="10:40" />
```

* * *

**更新**

现在有足够的浏览器支持来简单地使用：`toLocaleTimeString`

对于**html5**类型`time`，格式必须是`hh:mm`.

```
function timeNow(i) {
  i.value = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
}
```

```
<a onclick="timeNow(test1)" href="#">SET TIME</a>
<input id="test1" type="time" value="10:40" />
```

`[Try it on jsfiddle](http://cssdeck.com/labs/uzhgqsnm)`

* * *

## 回答 #4

> 赞同：29
> 
> 时间：2015-02-04T16:16:02.993

尝试

```
new Date().toLocaleTimeString().replace("/.*(\d{2}:\d{2}:\d{2}).*/", "$1"); 
```

或者

```
new Date().toTimeString().split(" ")[0]; 
```

* * *

## 回答 #5

> 赞同：25
> 
> 时间：2020-06-26T07:24:32.013

您可以简单地使用此方法。

[![](../Images/0bcd45c42c37c0f339194fe871ce1adc.png)](https://i.stack.imgur.com/k6t50.png)

```
console.log(new Date().toLocaleTimeString([], { hour: '2-digit', minute: "2-digit", hour12: false }));
console.log(new Date().toLocaleTimeString([], { hour: '2-digit', minute: "2-digit" }));
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2017-10-06T06:42:54.120

```
const date = Date().slice(16,21);
console.log(date);
```

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2012-05-15T10:51:18.553

你的意思是：

```
var d = new Date();
var curr_hour = d.getHours();
var curr_min = d.getMinutes(); 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-05-15T10:52:27.800

尝试这个：

```
var date = new Date();
var hour = date.getHours();
var min = date.getMinutes(); 
```

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2018-05-21T07:42:48.393

```
function getCurrentTime(){
    var date = new Date();
    var hh = date.getHours();
    var mm = date.getMinutes();

    hh = hh < 10 ? '0'+hh : hh; 
    mm = mm < 10 ? '0'+mm : mm;

    curr_time = hh+':'+mm;
    return curr_time;
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2017-02-07T08:59:33.637

这是你如何做到的。

```
const date = new Date();
const time = date.toTimeString().split(' ')[0].split(':');
console.log(time[0] + ':' + time[1])
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2014-11-13T19:17:13.817

请参阅这些日期方法...

*   toLocaleTimeString - [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toLocaleTimeString)

*   toTimeString - [https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toTimeString](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/toTimeString)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2013-11-09T17:46:53.737

这个 -

```
var x = new Date(); 
var h = x.getHours(); 
var m = x.getMinutes(); 
var s = x.getSeconds(); 
```

所以-

```
 x = date
h = hours
m = mins
s = seconds 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2021-06-09T22:36:11.633

在 ES6 中以您请求的格式 (hh:mm) 执行此操作的一种简单方法是：

```
const goodTime = `${new Date().getHours()}:${new Date().getMinutes()}`;

console.log(goodTime);
```

（显然，控制台日志记录不是解决方案的一部分）

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-05-06T09:39:15.900

将日期和时间分开并与时间和日期 HTML 输入格式兼容的简单函数

```
function formatDate(date) {
  var d         = new Date(date),
      month = '' + (d.getMonth() + 1),
      day   = '' + d.getDate(),
      year  = d.getFullYear();

  if (month.length < 2) month = '0' + month;
  if (day.length < 2) day = '0' + day;

  return [year, month, day].join('-');
}

function formatTime(date) {
        var hours   = new Date().getHours() > 9 ? new Date().getHours() : '0' + new Date().getHours()
        var minutes = new Date().getMinutes() > 9 ? new Date().getMinutes() : '0' + new Date().getMinutes()

        return hours + ':' + minutes
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2021-07-15T07:58:30.760

尝试这个

```
new Date().toTimeString().slice(0, 8); 
```

或者

```
new Date().toTimeString().split(" ")[0]; 
```

它应该工作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2018-11-01T19:24:35.023

```
var today = new Date();  //gets current date and time
var hour = today.getHours();         
var minute = today.getMinutes();
var second = today.getSeconds(); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2016-10-10T18:34:36.417

这是最短的方法。

```
var now = new Date().toLocaleTimeString();
console.log(now) 
```

这也是一种未提及的字符串操作方式。

```
var now = new Date()
console.log(now.toString().substr(16,8)) 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-04-30T12:05:49.663

分配给变量并显示它。

```
time = new Date();

var hh = time.getHours();
var mm = time.getMinutes();
var ss = time.getSeconds() 

document.getElementById("time").value = hh + ":" + mm + ":" + ss; 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2021-09-18T11:15:05.247

这是我这样做的方式：（希望对某人有所帮助）我正在做的是验证用户在 HTML 时间输入中输入的时间不是过去的时间：

```
let inputTime = value; // from time input in html (06:29)

const splittedInputTime = inputTime.split(':');

let currentDate = new Date();
currentDate.setHours(splittedInputTime[0]);
currentDate.setMinutes(splittedInputTime[1]);

const finalInputTime = currentDate.toTimeString().split(" ")[0];

const currentTime = new Date().toTimeString().split(" ")[0];

// Returns a boolean (true/ false)
let validTime = finalInputTime >= currentTime; 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2018-10-06T12:45:27.033

这对我有用，但这取决于你点击时得到的结果`Date()`：

```
Date().slice(16,-12) 
```

* * *

## 回答 #21

> 赞同：-3
> 
> 时间：2018-04-30T11:14:04.860

```
var hours = date.getHours();
        var minutes = date.getMinutes();
        var ampm = hours >= 12 ? 'pm' : 'am';
        hours = hours % 12;
        hours = hours ? hours : 12; // the hour '0' should be '12'
        minutes = minutes < 10 ? '0'+minutes : minutes;
        var strTime = hours + ':' + minutes + ' ' + ampm;
        console.log(strTime);
        $scope.time = strTime;

        date.setDate(date.getDate()+1);
        month = '' + (date.getMonth() + 1),
        day = '' + date.getDate(1),
        year = date.getFullYear();
        if (month.length < 2) month = '0' + month;
        if (day.length < 2) day = '0' + day;
        var tomorrow = [year, month, day].join('-');
        $scope.tomorrow = tomorrow; 
```

# javascript - 用于更改图像鼠标悬停时 div 可见性的 Javascript 函数

> ID：10599149
> 
> 赞同：0
> 
> 时间：2012-05-15T10:48:57.900
> 
> 标签：javascript, onmouseover

目前我的代码如下所示：

```
<div id="content">
<div id="1">
<img src="" alt="" onmouseover="document.getElementById('1').style.visibility = 'visible'; document.getElementById('2').style.visibility = 'hidden'; document.getElementById('3').style.visibility = 'hidden'; document.getElementById('4').style.visibility = 'hidden';" />
<div id="1_content>content</div>
</div>

<div id="2">
<img src="" alt="" onmouseover="document.getElementById('2').style.visibility = 'visible'; document.getElementById('1').style.visibility = 'hidden'; document.getElementById('3').style.visibility = 'hidden'; document.getElementById('4').style.visibility = 'hidden';" />
<div id="2_content">content</p>
</div>

<div id="3">
<img src="" alt="" onmouseover="document.getElementById('3').style.visibility = 'visible'; document.getElementById('1').style.visibility = 'hidden'; document.getElementById('3').style.visibility = 'hidden'; document.getElementById('4').style.visibility = 'hidden';" />
<div id="3_content">content</div>
</div>

<div id="4">
<img src="" alt="" onmouseover="document.getElementById('4').style.visibility = 'visible'; document.getElementById('1').style.visibility = 'hidden'; document.getElementById('2').style.visibility = 'hidden'; document.getElementById('3').style.visibility = 'hidden';" />
<div id="4_content>content</div>
</div>

</div><!-- content --> 
```

每个 div 都位于同一个位置。我将如何创建一个函数来执行此操作？我只是问，因为代码没有通过我正在使用的 DTD 验证，所以我想解决这个问题。另外，因为 div 彼此重叠，当我使一个可见时，我无法突出显示文本在可见的 div 中，因为它的 z-index 保持不变，所以内容被锁定在一个不可见的 div 后面。我将如何解决这个问题？最后，我是否可以简单地用 html 调用该函数`onmouseover="return functionName()"`？这在 XHTML1.0 Strict 中是否有效?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:08:52.000

我猜你需要这样的东西：

```
<html><head>
<script>
function makeVisible(pName) 
{
  var item = document.getElementById(pName);
  var contentPanel = document.getElementById("content");
  var contents = contentPanel.getElementsByTagName("p");

  for (var i = 0; i < contents.length; i++) {
    if (contents[i] != item) {
      contents[i].style.display = "none"
    }
  }
  item.style.display = "";
}
</script>
</head>
<body>
<div id="content">
<div><img src="" alt="" onmouseover="makeVisible('p1')" /></div>
<div><img src="" alt="" onmouseover="makeVisible('p2')" /></div>
<div><img src="" alt="" onmouseover="makeVisible('p3')" /></div>
<div><img src="" alt="" onmouseover="makeVisible('p4')" /></div>

<p id="p1">content 1</p>
<p id="p2">content 2</p>
<p id="p3">content 3</p>
<p id="p4">content 4</p>

</div><!-- content -->
</body></html> 
```

# c# - WCF ServiceKnownType 设计问题

> ID：10599152
> 
> 赞同：1
> 
> 时间：2012-05-15T10:49:05.367
> 
> 标签：c#, wcf

我正在设计一个包含三个项目的新解决方案：

“服务器” - WCF 服务

“客户端” - 将调用 WCF 服务的 winforms 应用程序

“ServiceContract” - 一个包含一些基类和 WCF 服务契约（接口）的类库。这显然会被服务器引用，也被客户端引用（我使用的是`ChannelFactory`而不是让 VS 生成服务引用）。服务合同看起来像这样：-

```
[ServiceContract]
[ServiceKnownType("GetCommandTypes", typeof(CommandTypesProvider))]
public interface INuService
{
    [OperationContract]
    bool ExecuteCommand(CommandBase command);
} 
```

这是一个非常基本的操作——客户端创建一个“命令”对象并将其发送到服务器以执行。将会有许多不同的命令，都继承自`CommandBase`（这个基类驻留在“ServiceContract”项目中）。当我在 WCF 操作签名中使用基类时，我必须指定我正在使用该`ServiceKnownType`属性动态执行的已知类型。这引用了一个帮助类 ( `CommandTypesProvider`)，它返回所有派生自 的类型`CommandBase`。

我已经使用位于“ServiceContract”项目中的几个派生命令类创建了一个简单的概念证明。因此，助手类只需要反映正在执行的程序集中的类型。这一切都很好。

现在在我的“真实”解决方案中，这些命令类将位于不同的项目中。这些项目将引用 ServiceContract 项目，而不是反之亦然，这使得帮助程序难以（或不可能？）反映“命令”程序集。所以我的问题是，我怎样才能提供已知类型？

我考虑过的选项：-

*   “Server”和“Client”项目将引用“ServiceContract”项目**和**各种“command”项目。我的助手可以通过 进行反映`AppDomain.CurrentDomain.GetAssemblies()`，但这会失败，因为“命令”程序集并未全部加载（我可以通过在每个程序中引用一个类型来强制执行此操作，但这感觉不对 - 我希望它是一个动态的、可插入的架构，并且每当我添加一个新的命令项目时都不必修改代码）。
*   在 config.xml 中指定已知类型。同样，如果应用程序是动态的，那就太好了，而不是每次添加命令类时都必须更新配置。
*   有什么方法可以访问客户端和服务器上的底层 DataContractSerializer，并将其传递给已知类型？我想我仍然会遇到无法反映程序集的问题，除非它们已被加载。
*   重构事物以使 ServiceContract 项目能够引用各种命令项目。然后我可以使用“Assembly.GetReferencedAssemblies()”来反映它们。我猜各种命令类*是*服务合同的一部分，所以也许这是要走的路？**编辑：**看起来这有同样的问题，只找到加载的程序集。

任何想法都非常感谢！这是可以实现的还是我需要重新考虑我的架构？！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T22:43:53.227

要考虑的一件事是使用 DataContractResolver。

少量资源：

WCF 可扩展性 – Carlos 的[数据契约解析器](http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/21/wcf-extensibility-data-contract-resolver.aspx)

Kelly[使用 DataContractResolver 构建可扩展的 WCF 服务接口](http://kellabyte.com/2010/11/13/building-extensible-wcf-service-interfaces-with-datacontractresolver/)

动态配置已知类型 - Youssef[介绍 DataContractResolver](http://blogs.msdn.com/b/youssefm/archive/2009/06/05/introducing-a-new-datacontractserializer-feature-the-datacontractresolver.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T07:48:20.283

感谢您对 Data Contract Resolver 人员的回复。我可能通常会沿着这条路线走，但是当我使用温莎时，我能够想出一个使用它的解决方案。

对于任何感兴趣的人，我`IWindsorInstaller`都在我的每个“命令”项目中添加了一个 Windsor 安装程序 ( )，这些项目使用 Windsor 的`container.Install(FromAssembly.InDirectory...`. 这些安装负责注册该项目中所需的任何依赖项，此外它们还注册我的已知类型助手可以从容器中解析的所有命令类。

# jquery - jQuery：获取其他子元素匹配字符串的子元素的值

> ID：10599156
> 
> 赞同：0
> 
> 时间：2012-05-15T10:49:14.583
> 
> 标签：jquery, xml

使用 REST 查询服务器时，我收到以下信息：

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<widgets>
  <widget>
    <wid>wid1007</wid>
    <path>widgets-1007</path>
    <name>Frobnutter</name>
    <id>1</id>
    <version>0</version>
  </widget>
  <widget>
    <wid>wid1008</wid>
    <path>widgets-1008</path>
    <name>Roberts-Coupler</name>
    <id>2</id>
    <version>0</version>
  </widget>
</widgets> 
```

我需要使用“id”的已知值从“widget”中提取“wid”的值。这在 jQuery 中会是什么样子？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T10:54:50.463

```
var xml = //your xml output

$(xml).find('wid').each(function() {
   var content = $(this).text();
   var id = $(this).siblings('id').text();
   //do something with each <wid> tags content
}); 
```

或者

```
$('widget', xml).filter(function() {
    if ($(this).find('id').text() === '1') return $(this); 
}).find('wid'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:55:02.370

[http://jsbin.com/owiteq/edit#javascript,html](http://jsbin.com/owiteq/edit#javascript,html)

var xml = ...

```
$(xml).find("widget").each(function ()
        {
          if ($(this).find("id").text()==1)
         {
            alert($(this).find("wid").text());
         }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:56:58.130

Pass the xml to a variable lets say `rest_data`

```
$(rest_data).find("widget").each(function()
{
  if($(this).find("id").text() == "2")
  {
    //do something
    alert($(this).find("wid").text());
  }
}); 
```

# jquery - 突出显示带有类的选择/下拉列表，当它打开或具有不同于初始默认选择的选项时

> ID：10599167
> 
> 赞同：3
> 
> 时间：2012-05-15T10:49:47.017
> 
> 标签：jquery, html, css

好的，这听起来超级简单！！但它让我发疯，让我大脑褪色:)

假设我有一个基本的选择框，例如：

```
<select id="test">
    <option value="">--- select ---</option>
    <option value="1">One</option>
    <option value="1">Two</option>
</select> 
```

我想要的是在以下状态下将“突出显示”类添加到选择中：

1.  选择处于下拉/打开状态
2.  选择有一个有效的选项被选中（即一个或两个）

但是，如果选择在没有有效选择的情况下被关闭，则需要删除该类（即，它已更改回“--- select ---”）

听起来很容易！！

我尝试了这似乎是显而易见的方式：

```
$(document).ready(function () {

    $('#test').focus(function () {
        $(this).addClass('highlight');
    })

    $('#test').change(function () {
        if ($(this).val() != '') $(this).addClass('highlight');
        else $(this).removeClass('highlight');
    })
}); 
```

但它并不是 100% 有效，但它已经接近了，问题是如果你选择了一些东西，然后将它改回“--- select ---”但是你不会失去下拉的焦点并重新点击然后它不会再次添加“突出显示”类。

我已经尝试了许多添加额外事件的组合，比如点击，但我似乎无法让它完全按照我的意愿工作。这几乎就像我需要在选择上的“开放”事件，但显然不存在。

我在这里错过了一些非常明显的东西吗？因为我是一个称职的网络开发人员，他花了几个小时试图做到这一点！！哈哈...但是在新西兰已经很晚了，所以如果我有的话，这就是我的借口:)

谢谢，卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:57:29.483

```
$('select').on('focus', function() {
    $(this).addClass('highlight').find('option').css('color', '#000');
}).on('blur', function() {
    $(this).removeClass('highlight');
    if (this.value.length) $(this).addClass('highlight');
}).on('change', function() {
    if (this.value.length) $(this).addClass('highlight');
    else $(this).removeClass('highlight')
});​
​ 
```

[演示](http://jsfiddle.net/GSmJ5/3/)

# c# - 在 DataGridView WinForm 中格式化 null DateTime

> ID：10599170
> 
> 赞同：2
> 
> 时间：2012-05-15T10:50:05.710
> 
> 标签：c#, winforms, datetime, datagridview, formatting

如何在datagridview中格式化空日期时间？我以编程方式创建 datagridview 列，在表单加载

```
DataGridViewCellStyle style = new DataGridViewCellStyle();
style.Format = "dd-MM-yyyy";

DataGridViewTextBoxColumn updatedDateColumn = new DataGridViewTextBoxColumn();
updatedDateColumn.DataPropertyName = "UpdatedDate";
updatedDateColumn.HeaderText = "Updated Date";
updatedDateColumn.Name = "UpdatedDate";
updatedDateColumn.DefaultCellStyle = style; 
```

问题是当更新日期值为空时 datagridview 显示 01/01/0001 12:00:00

我试图编辑

```
style.NullValue = string.Empty; 
```

但它没有工作如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-03T00:31:35.853

您可以使用 ISNULL 在 sql server 中将 null 日期设置为 null 并将 datagridviewCellStyle 的 NullValue 属性设置为 string.Empty ；像这个在 sql server

```
ISNULL(DateColumnName , NULL) and set style.NullValue = string.Empty 
```

在 dataGridViewCellStyle

# push-notification - 我的 Web 服务将如何识别 mspn 服务

> ID：10599171
> 
> 赞同：-2
> 
> 时间：2012-05-15T10:50:13.787
> 
> 标签：push-notification, windows-phone, mpns

我正在使用 microsoft 推送通知服务将通知从 web 服务推送到 windows phone 应用程序。我的疑问是，我将如何将消息传递给 mspn 服务（端点）？当我们将应用程序注册到 mspn 服务时，我们会收到任何信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T16:17:16.610

设置推送通知有几个步骤，并解释MSDN 上[Windows Phone 的推送通知概述：](http://msdn.microsoft.com/en-us/library/ff402558%28v=vs.92%29.aspx)

1.  `HttpNotificationChannel`您的应用程序通过类的实例注册推送通知
2.  `HttpNotificationChannel`与 MPNS 进行协商的实例
3.  假设步骤 (2) 成功，实例引发`ChannelUriUpdated`事件
4.  您将属性中的 URI 传递`ChannelUri`给您的 Web 服务（以及您需要确定哪些推送通知应发送到该 URI 所需的任何元数据）
5.  您的 Web 服务向在步骤 (4) 中传递给它的 URI 发出 POST 请求，并使用相关的 XML 作为消息正文（该 XML 将根据您尝试发送的通知类型而改变）
6.  MPNS 服务器将该通知发送到手机，手机将更新 Tile，显示 Toast 通知，或者，如果它是 RAW 通知并且您的应用程序正在运行，则`HttpNotificationChannel`在步骤 1 中创建的对象将引发`HttpNotificationReceived`事件。

总结并直接回答您的问题，端点是来自您的实例`ChannelUri`属性的 URI`HttpNotificationChannel`

# javascript - Javascript物理引擎和模拟无限曲线

> ID：10599173
> 
> 赞同：21
> 
> 时间：2012-05-15T10:50:16.990
> 
> 标签：javascript, box2d, physics, curve, chipmunk

我正在尝试像在 javascript 中那样做一个 Tiny Wings。

我第一次看到[使用 Box2D 的技术](http://www.emanueleferonato.com/2011/07/14/create-a-terrain-like-the-one-in-tiny-wings-with-flash-and-box2d/)，我使用的是[closure-web 版本](https://github.com/SuperSkunk/box2dweb-closure)（因为内存泄漏修复）。
简而言之，我将曲线分解为多边形，如下所示：

![在此处输入图像描述](../Images/b4594e593a568a3df2806d8512f2bd49.png)

我还尝试使用 Chipmunk-js，并使用分段形状来模拟我的地面：

![在此处输入图像描述](../Images/11c5833f83677258154e488324c62281.png)

在这两种情况下，当一个圆圈滚动时，我在多边形或线段之间的公共点处都遇到了一些“崩溃”或“颠簸”。

我向 Chipmunk 询问了这个问题，作者说他为该段实现了一个半径属性以减少这种行为。我试过了，它确实成功了，但它并不完美。我仍然有一些颠簸（我必须设置为 30px 的半径才能获得积极的效果）。

“凹凸”附加在两个多边形之间的共享点处：

![撞虫](../Images/e5fb792c195cceacd0a0da1ed4fa1af3.png)

正如[illandril](https://github.com/illandril)向我建议的那样，**使用边缘技术** （他只测试了多边形-多边形接触）来避免圆在边缘上崩溃：

![边坡修边技术](../Images/8d9e85f0d1b0408f02d1fffa06f4bdf3.png)

还尝试按照 Luc**的建议添加项目符号选项**，但似乎没有任何改变。

这里是问题[的演示](http://superskunk.github.com/Box2DExperiments/Snowball/)。
您可以尝试更改要检查的值：

*   项目符号选项
*   边缘尺寸
*   迭代次数
*   物理学

（仅在最新的开发 Chrome 上测试过）
请耐心等待（或更改水平重力），您会明白我的意思。
这里是感兴趣[的回购](https://github.com/SuperSkunk/Box2DExperiments/tree/develop/Snowball/brunch/app)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T15:25:06.763

最好的解决方案是带有幽灵顶点的边缘形状，但如果您使用的版本/端口中不可用，那么下一个最好的事情就是您的问题中称为“边缘”的图表，但是将多边形进一步扩展到地下浅坡，就像在这个线程中： http: [//www.box2d.org/forum/viewtopic.php? f=8&t=7917](http://www.box2d.org/forum/viewtopic.php?f=8&t=7917)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T15:36:30.897

我首先认为问题可能来自两个相邻段之间的斜率变化，但由于在多边形的平面上仍然有凹凸，我认为问题在于击中多边形的角落。

我不知道你是否可以设置两组多边形，相互重叠？只需使用相同的插值计算并生成第二组多边形，如下图所示：您已经构建了红色的多边形集，并通过将绿色多边形的左顶点设置在红色多边形的中间来添加绿色集，及其在下一个红色多边形中间的右顶点。

![图表][1]

这应该适用于凹曲线，并且......无论如何，你应该飞越凸曲线。

如果这不起作用，请尝试设置大量多边形来构建斜坡。使用圆半径的十分之一作为多边形的宽度，甚至更小。这应该会减少您的坡度不连续性。

## - 编辑

在 Box2D.js 的第 5082 行（至少在[这个 repo](http://code.google.com/searchframe#fbVL2fD7rV0/trunk/Box2D.js)中）你有 PreSolve(contact,manifold) 函数，你可以覆盖它来检查流形（碰撞多边形时雪球的冲击方向）是否正确。

为此，您需要恢复流形矢量并将其与曲线的法线进行比较。它应该看起来像这样（也许不完全是）：

```
Box2D.Dynamics.b2ContactListener.prototype.PreSolve = function (contact, oldManifold) {
    // contact instanceof Box2D.Dynamics.Contacts.b2Contact == true
    var localManifold, worldManifold, xA, xB, man_vect, curve_vect, normal_vect, angle;
    localManifold = contact.GetManifold();

    if(localManifold.m_pointCount == 0)
        return; // or raise an exception

    worldManifold = new Box2D.Collision.b2WorldManifold();
    contact.GetWorldManifold( worldManifold );

    // deduce the impulse direction from the manifold points
    man_vect = worldManifold.m_normal.Copy();

    // we need two points close to & surrounding the collision to compute the normal vector
    // not sure this is the right order of magnitude
    xA = worldManifold.m_points[0].x - 0.1;
    xB = worldManifold.m_points[0].x + 0.1;

    man_vect.Normalize();

    // now we have the abscissas let's get the ordinate of these points on the curve
    // the subtraction of these two points will give us a vector parallel to the curve

    var SmoothConfig;

    SmoothConfig = {
        params: {
            method: 'cubic',
            clip: 'mirror',
            cubicTension: 0,
            deepValidation: false
        },
        options: {
            averageLineLength: .5
        }
    }
    // get the points, smooth and smooth config stuff here
    smooth = Smooth(global_points,SmoothConfig);

    curve_vect = new Box2D.Common.Math.b2Vec2(xB, smooth(xB)[1]);
    curve_vect.Subtract(new Box2D.Common.Math.b2Vec2(xA, smooth(xA)[1]));

    // now turn it to have a normal vector, turned upwards
    normal_vect = new Box2D.Common.Math.b2Vec2(-curve_vect.y, curve_vect.x);
    if(normal_vect.y > 0)
        normal_vect.NegativeSelf();
    normal_vect.Normalize();
    worldManifold.m_normal = normal_vect.Copy();

    // and finally compute the angle between the two vectors
    angle = Box2D.Common.Math.b2Math.Dot(man_vect, normal_vect);

    $('#angle').text("" + Math.round(Math.acos(angle)*36000/Math.PI)/100 + "°");
    // here try to  raise an exception if the angle is too big (maybe after a few ms)
    // with different thresholds on the angle value to see if the bumps correspond
    // to a manifold that's not normal enough to your curve 
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T18:31:44.730

我想说这个问题已经在 Box2D 2.2.0 中得到解决，请参阅[它的手册，第 4.5 节“边缘形状”](http://www.box2d.org/manual.html#_Toc258082970)

问题是[它是 2.2.0 版本的一个功能](http://box2d.org/forum/viewtopic.php?f=2&t=7542)，以及链形的东西，box2dweb 实际上是从 2.2.1a 移植的——不知道 box2dweb-closure。

我通过修改 Box2D.Collision.b2Collision.CollidePolygonAndCircle 进行的任何尝试都导致了不稳定的行为。至少有一部分时间（例如，球在随机方向上碰撞，但仅在它缓慢滚动时）。

# c# - Windows 7 上 C# 中的 Mousemove 事件

> ID：10599175
> 
> 赞同：0
> 
> 时间：2012-05-15T10:50:27.033
> 
> 标签：c#

我在 Windows 7 中遇到了 mousemove 事件问题。我试图在自定义控件的 mousemove 事件上显示工具提示消息 它在 XP 中运行良好，但在 Windows 7 中无法正常工作。在 Windows 7 中，它开始连续触发 mousemove 事件即使鼠标光标停留在控件上而不移动。我从 mousemove 事件中删除了显示工具提示的代码，它开始正常工作。在 mousemove 事件上显示工具提示有什么问题吗？在 mousemove 中显示工具提示的任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:44:53.843

如果它是 Position ！= 最后一个位置，你能保持最后一个 Position 并且只处理 MouseMove 事件吗？

# iphone - 迭代 s UITableView 中的所有单元格

> ID：10599177
> 
> 赞同：1
> 
> 时间：2012-05-15T10:50:36.427
> 
> 标签：iphone, ios, uitableview

我想迭代所有 uitablewview 单元格并显示每个单元格中包含的 uitextview 的文本。我的表格可以有很多行，并且要达到所有您必须滚动的内容。我做了一个实现，但它只显示滚动中当前可见单元格的文本，因为其他的给我null。

```
for (int i = 0; i < [propertiesTableView numberOfRowsInSection:0]; i++) {
    UITableViewCell* cell = [propertiesTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:i inSection:0]];
    UITextView* tx = (UITextView*)[cell viewWithTag:2];
    NSString* temp = tx.text;
    NSLog(@"%@", temp);
} 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:56:44.487

This happens because only the visible cells are instantiated (remember the `dequeueReusableCellWithIdentifier:` function?). You should extract the needed information from the table data source.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:57:10.717

Yes this behavior is expected, because of performance considerations the table view does not holds all cells initialized all the time. Your solution is just to update your data source - if it's an array for example, iterate though it and change the values accordingly - this is the power of MVC (fast UI, separate model)

# eclipse - Eclipse 数据工具平台 (DTP) 选择 * 限制

> ID：10599179
> 
> 赞同：1
> 
> 时间：2012-05-15T10:50:43.043
> 
> 标签：eclipse, oracle, eclipse-dtp

我在 Oracle11g 中有一个数据库，我将 Eclipse 与 Eclipse 数据工具平台 (DTP) 一起使用。我尝试用这个选择一个表中的所有行

```
select * from <table_name>; 
```

但它只返回 500 行。有什么办法可以突破这个限制吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:04:14.967

可以从 Eclipse DTP 中的以下位置配置获取的行数：

*   查看菜单 (Ctrl-F10) / 首选项... / 最大行数
*   窗口 / 首选项 / 数据管理 / SQL 开发 / SQL 结果视图 / 最大行数

# html - 电子邮件通讯 HTML：在 IE 中查看的 Gmail 中的表格单元格间距

> ID：10599180
> 
> 赞同：1
> 
> 时间：2012-05-15T10:50:45.293
> 
> 标签：html, internet-explorer, html-table, html-email, cellspacing

我只是在检查时意识到，`<table cellspacing='10'> </table>`当我在 IE 中查看我的 gmail（我使用的是 IE9）时，它不起作用。

但是使用 FF 或 Chrome，没问题。我使用我的 IE 来查看我的 Hotmail 和 Yahoo 帐户，它们有相同的时事通讯，它的单元格间距很好，那么在查看我的 gmail 帐户时事通讯时，我的 IE 会发生什么？有什么线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-22T16:25:05.530

如果添加 style="border-collapse:separate;" 到标签，它在 IE 中的 Gmail 中工作。仍在努力让它在 Outlook 2007/2010 中工作，但没有同样的运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T04:58:03.683

我认为border-collapse 不再起作用了。在 IE10 gmail 中不适合我。最终的工作是从表格中删除单元格间距并将填充直接添加到 td 元素。

与旧的：

```
<table cellspacing="10"><tr><td>... 
```

与新：

```
<table><tr><td style="padding:10px">... 
```

# delegates - 在 iOS 4.2 的应用程序委托文件中使用其他委托有多可行？

> ID：10599186
> 
> 赞同：0
> 
> 时间：2012-05-15T10:51:00.530
> 
> 标签：delegates, ios4, uiapplicationdelegate

在应用委托文件中使用其他委托有多可行。例如

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, UIAlertViewDelegate>{
BOOL LoadingForFirstTime;
} 
```

这是推荐的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:03:48.607

简而言之，**Yes**可行，**No**不推荐。

通常 AppDelegate 应该处理系统通知、核心数据设置，而不是更多。在此处查看表 2.1： [Apple Docs](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/AppArchitecture/AppArchitecture.html "苹果文档")

我猜，从您定义的 BOOL 来看，您正在检查这是否是第一次加载。这可能有效，但不建议这样做。

# objective-c - 如何链接到 iOS 5 中的特定首选项窗格

> ID：10599200
> 
> 赞同：1
> 
> 时间：2012-05-15T10:51:41.060
> 
> 标签：objective-c, ios, xcode, bluetooth

## 背景

我工作的公司想推出一款 iOS 应用程序，以支持与我们已经生产的一些机械自动化（针对家庭和楼宇自动化）交互的硬件设备。

这种自动化从附近的蓝牙设备接收激活自身所需的脉冲，其 MAC 地址在白名单中是已知的。

我们已经知道需要注册蓝牙硬件的 MFi 程序才能与 Apple 设备有效连接和交谈，交换重要消息，但这里需要的是简单地检测此类 MAC 地址的存在。无需建立协议会话等。

## 事实

研究如何在 iOS 中以编程方式启用/禁用蓝牙接口，我了解到没有私有框架是不可能的，[正如这篇文章所述](https://stackoverflow.com/q/4518406/15908)；这对我们来说不是一个选项，因为该应用程序必须在 App Store 上发布，并且众所周知，Apple 拒绝应用程序，包括来自私有框架的代码。

顺便说一句，应用程序的可用性将极大地受益于直接访问该功能，所以我开始思考是否可以让用户直接访问蓝牙首选项窗格，而不是直接与蓝牙开/关状态交互从应用程序。

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:39:49.930

不，不幸的是这是不可能的。有一个技巧：

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"prefs://"]]; 
```

但它只打开首选项（不是直接打开蓝牙设置），并且在 iOS 5.1 中被禁用。所以你唯一的机会是制作一个非常好的帮助屏幕（可能有漂亮的图形和动画）来解释用户如何启用蓝牙。

# windows - 在我的系统 Windows 7 上找不到 jdk？

> ID：10599207
> 
> 赞同：0
> 
> 时间：2012-05-15T10:52:18.300
> 
> 标签：windows, java

我正在使用 eclipse 进行 android 应用程序开发。在创建 android 应用程序或简单的核心 java 程序时，我没有收到任何错误或任何东西。

`jdk`我在我的系统 Windows 7 上找不到，只有`jre6`那里。

我尝试了以下命令，但没有得到任何路径：

```
C:> for %i in (javac.exe) do @echo.   %~$PATH:i 
```

我`javac.exe`在我的c盘里找过，但没有找到。`C:\Program Files\Java`: `jre1.6.0_18`和中只有两个文件夹`jre6`

如何在我的系统上找到 jdk 的路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:56:38.687

看来您还没有安装JDK，而只安装了JRE。我建议你去[Oracle Java 下载页面](http://www.oracle.com/technetwork/java/javase/downloads/jdk-7u4-downloads-1591156.html)安装它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:55:46.780

一般jdk安装在JRE附近（大多数情况下），如果你想搜索它你可以做窗口搜索`javac.exe`

# c# - DateTime 转换与解析 DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss.fff")

> ID：10599209
> 
> 赞同：3
> 
> 时间：2012-05-15T10:52:20.250
> 
> 标签：c#, .net, datetime, datetime-format, data-conversion

我将一些 DateTime 存储在 CSV 日志中：

```
DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss.fff") 
```

当我尝试阅读它时，我发现了类似的内容：

```
"05/15/2012 10:09:28.650" 
```

问题是当我再次尝试将其转换为 DateTime 时......

```
DateTime.Parse("05/15/2012 10:09:28.650"); 
```

抛出异常“Invalid DateTime”或类似的东西......

如何正确重新读取 DateTime？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T10:55:44.180

您可以使用[`DateTime.ParseExact`](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)：

```
string format = "MM/dd/yyyy hh:mm:ss.fff";
DateTime d = DateTime.ParseExact("05/15/2012 10:09:28.650",
                                format,
                                System.Globalization.CultureInfo.InvariantCulture); 
```

[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T10:54:24.023

使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss)指定格式

```
String dateStr=DateTime.Now.ToString("MM/dd/yyyy hh:mm:ss.fff");
DateTime date = DateTime.ParseExact(dateStr,"MM/dd/yyyy hh:mm:ss.fff",System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T10:59:32.697

您应该使用[此](http://msdn.microsoft.com/en-us/library/kc8s65zs.aspx)方法来解析您的字符串。您必须创建一个类，实现 IFormatProvider，但如果您想使用自定义 DateTime 格式，这是我能想到的最佳方法。

# django - 了解 django 中的用户类

> ID：10599212
> 
> 赞同：0
> 
> 时间：2012-05-15T10:52:32.433
> 
> 标签：django

我使用这个简单的代码在我的 view.py 中创建了一个用户。

```
if not errors:
    user = User.objects.create_user(username, email, password)
    user.save() 
```

除了验证之外，在创建对象之前我对用户名和密码值没有做任何事情。

但我在 Django API 的 User 类中找到了这个。我不知道如何使用帮助文本。如果是帮助文本，它会打印什么？如何找到 algo、salt 和 hexdigest 的默认值？

```
password = models.CharField(_('password'), max_length=128, help_text=_("Use '[algo]$[salt]$[hexdigest]' or use the <a href=\"password/\">change password form</a>.")) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:06:26.263

“如果是帮助文本，它会打印什么？” -> 它打印的正是这个：使用 '[algo]$[salt]$[hexdigest]'

创建用户时，它会自动调用[make_password(password[, salt, hashers])](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.hashers.make_password)

其中：以该应用程序使用的格式创建一个散列密码。它需要一个强制性参数：纯文本密码。或者，如果您不想使用默认值（PASSWORD_HASHERS 设置的第一个条目），您可以提供要使用的盐和散列算法。当前支持的算法有：'pbkdf2_sha256'、'pbkdf2_sha1'、'bcrypt'（参见 Using bcrypt with Django）、'sha1'、'md5'、'unsalted_md5'

你有这方面的问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:21:16.280

`create_user`将自动生成密码哈希并在数据库中创建用户（因此您不需要`user.save()`）

[请参阅有关创建用户](https://docs.djangoproject.com/en/1.4/topics/auth/#creating-users)的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:38:49.760

帮助文本基本上只是在编辑用户对象时显示在 django 管理员中的消息的代码。它旨在向查看编辑表单的人解释为什么密码字段具有类似`sha1$12345$1234567890abcdef1234567890abcdef12345678`而不是为该用户设置的密码。原因当然是为了安全起见对密码进行了哈希处理，并且该表示包含稍后验证用户键入的密码所需的所有信息。

管理员用户编辑表单有一个用于编辑密码的特殊页面。如果要在代码中编辑用户密码，请使用User 对象的 set_password 方法，[check_password](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.set_password)[方法](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.check_password)用于验证提供的密码。

[make_password](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.hashers.make_password)的文档有更多关于 Django 使用和可以使用的算法的信息。Django <1.3 的默认值是`sha1`，Django 1.4 将默认值更改为`PBKDF2`. 的默认值`salt`是一个随机字符串（它的存在是为了使两个相同的密码在数据库中看起来不一样）。`Hexdigest`是密码字符串和使用散列算法散列的盐字符串的值。您可以阅读[github](https://github.com/django/django/blob/master/django/contrib/auth/hashers.py)上代码中的详细信息。

# javascript - 是否在 JavaScript 中按住 shift 键

> ID：10599214
> 
> 赞同：7
> 
> 时间：2012-05-15T10:52:37.300
> 
> 标签：javascript, keypress, keydown, shift

我写了一个只允许输入数字的 JS 函数。该函数的副本如下：

```
function NumbersOnly(e) {
    var evt = e || window.event;
    if (evt) {
        var keyCode = evt.charCode || evt.keyCode;
        //Allow tab, backspace and numbers to be pressed, otherwise return false for everything.
        //(keyCode>=96 && keyCode<=105) are the numpad numbers        
        if ((keyCode >= 48 && keyCode <= 57) || (keyCode >= 96 && keyCode <= 105) || keyCode === 9 || keyCode === 8) {

        }
        else {

            evt.returnValue = false;
        }
    }
} 
```

此功能适用于所有数字，但是当按住 shift 键并按下其中一个数字键时会出现问题。返回的值是数字上方的字符之一。因此，例如，如果我按住 shift 并按 7，则返回 '&' 但 keyCode 仍然是 55！我原以为会有所不同。

所以我的问题是如何检查shift键是否被按住。我尝试了以下检查，但这没有用：

```
 if (keyCode === 16) {
        evt.returnValue = false;
    }
    else {

        if ((keyCode >= 48 && keyCode <= 57) || (keyCode >= 96 && keyCode <= 105) || keyCode === 9 || keyCode === 8) {

        }
        else {

            evt.returnValue = false;
        }
    } 
```

我正在使用 ASP.NET 4.0。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T11:02:46.577

您可以使用以下命令检查是否按下了 shift 键：

```
if(evt.shiftKey) {
 ...  //returns true if shift key is pressed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-23T13:36:43.343

使用 keypress 来按住任何键而不是 keydown

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-05T21:05:17.417

使用**`event.key`**而不是`charCode`. **没有更多的神奇数字！**

```
function onEvent(event) {
    const key = event.key; // "a", "1", "Shift", etc.
    if (isFinite(key)) { // Is number
        // Do work
    }
}; 
```

[Mozilla 文档](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/key)

[支持的浏览器](http://caniuse.com/#feat=keyboardevent-key)

# android - 需要在长按上下文菜单中添加“将单词添加到字典”之类的选项

> ID：10599218
> 
> 赞同：0
> 
> 时间：2012-05-15T10:52:45.040
> 
> 标签：android, contextmenu, long-press

计划为文本（Editext、Textview）实现一个全局上下文菜单。

![全局上下文菜单](../Images/89681545ea806044a441f16d030d8bb6.png)

应该有一个新选项将所选单词添加到我的 wordcollector 类型的应用程序中。如何将上述选项添加到全局上下文菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:11:59.163

您可以像这样更改应用程序的上下文菜单：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v,
    ContextMenuInfo menuInfo) {
  if (v.getId()==R.id.list) {
    AdapterView.AdapterContextMenuInfo info = (AdapterView.AdapterContextMenuInfo)menuInfo;
    menu.setHeaderTitle("EditText");
    String[] menuItems = //your menu item. you can add the "add word to dictionary" as an item here.
    for (int i = 0; i<menuItems.length; i++) {
      menu.add(Menu.NONE, i, i, menuItems[i]);
    }
  }
} 
```

您不能更改全局上下文菜单。如果特定活动没有实现您公开的意图或活动，则无法在系统级别全局覆盖或挂钩功能。即使在发布意图的情况下，除非正在运行的应用程序是消费者，否则所有基本系统应用程序以及显然在您之前的所有应用程序都不会更新要使用的应用程序。

# ruby-on-rails - 在 apache 服务器中从 ruby on rails 应用程序运行 ssh 不起作用，但它适用于 WEBrick

> ID：10599219
> 
> 赞同：0
> 
> 时间：2012-05-15T10:52:47.560
> 
> 标签：ruby-on-rails, ruby, ssh, apache2, webrick

我已经在 上配置了 Ruby On Rails 项目，`Apache`但是`passenger`当我`ssh`使用该应用程序时，它无法正常工作并在 apache 日志中出现此错误。

`Could not create directory '/var/www/.ssh'.`

`Host key verification failed.`

但是当我在服务器上运行相同的项目时，`WEBrick`它工作正常。

我正在按以下方式运行命令。

`system("ssh machine command")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:56:17.933

Check it out : [http://blog.servergrove.com/2010/08/02/ssh-strange-error-host-key-verification-failed/](http://blog.servergrove.com/2010/08/02/ssh-strange-error-host-key-verification-failed/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:41:26.863

主机密钥验证失败是因为您已经尝试连接到同一地址的主机，但标识 SSH 服务器的密钥与您之前连接的密钥不匹配。

### 确保您连接到您认为是的服务器

如果您绝对确定要连接到同一台服务器，则可以执行以下操作之一：

*   删除有问题的密钥，`~/.ssh/known_hosts`然后重试
*   编辑您的 ssh 配置 ( /etc/ssh/ssh_config ) 并禁用主机密钥检查：`StrictHostKeyChecking no`

# javascript - 如果名称包含数字，Twitter 搜索 API 不会返回推文

> ID：10599221
> 
> 赞同：0
> 
> 时间：2012-05-15T10:52:57.393
> 
> 标签：javascript, html, twitter

我正在尝试获取将包含特定句柄的推文的 JSON 对象。

这是我用来发送请求并将响应存储在本地存储中的函数：

```
function sendRequest(handle, noOfTweets, boolDisplay){
        $.getJSON("http://search.twitter.com/search.json?q=from:"+handle+"&rpp="+noOfTweets+"&callback=?", function(data) {
        if(boolDisplay){
            displayTweets(data);
        }
        localStorage.setItem("tweets"+handle, JSON.stringify(data));
      });
} 
```

如果用户名不包含数字，我会收到包含用户推文的响应。如果句柄包含任何数字，则不会返回任何推文。

我已经通过直接使用地址栏来尝试相同的请求。

例如：（以下是句柄名称）

*   ndtv作品
*   工作
*   pranavjain64（我的手柄）*不起作用*
*   CNBCTV18news*不工作*

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:00:27.377

您将希望使用 status api 而不是在此处搜索。

```
 function sendRequest(handle, noOfTweets, boolDisplay){
        $.getJSON("http://api.twitter.com/1/statuses/user_timeline.json?screen_name="+ handle + "&count=" + noOfTweets + "&c
allback=?", function(data) {
        if(boolDisplay){
            displayTweets(data);
        }
        localStorage.setItem("tweets"+handle, JSON.stringify(data));
      });
  } 
```

[https://dev.twitter.com/docs/api/1/get/statuses/user_timeline](https://dev.twitter.com/docs/api/1/get/statuses/user_timeline)

# spring - 使用 FMT 和 SpringMVC 获取新日期

> ID：10599223
> 
> 赞同：0
> 
> 时间：2012-05-15T10:52:59.190
> 
> 标签：spring, jsp, spring-mvc, jstl

我对 FMT 和 SpringMVC 有疑问：

我有一个包含日期字段的对象，所以我使用 fmt 在我的 jsp 页面中显示它，如下所示：

```
<fmt:formatDate value="${form.dtBegin}" type="date" pattern="dd/MM/yyyy HH:mm" /> 
```

问题是当我提交我的页面时，这个字段“form.dtBegin”得到一个新的日期，在我的情况下这个字段不应该改变！

那么你对这个问题有什么想法吗？

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:13:44.220

也许您可以尝试在控制器中绑定日期。

```
@InitBinder
public void initBinder(WebDataBinder dataBinder) {
    dataBinder.registerCustomEditor(Date.class, new CustomDateEditor(new SimpleDateFormat("dd/MM/yyyy HH:mm"), true));
} 
```

# r - 从R中的文件读取数据帧时如何跳过无效行？

> ID：10599224
> 
> 赞同：7
> 
> 时间：2012-05-15T10:53:01.727
> 
> 标签：r, dataframe

我有一个包含大量数据的大文件，我想将它读入数据框，但发现一些无效行。这些无效行会导致 read.table 中断。我尝试以下方法跳过无效行，但似乎性能很差。

```
counts<-count.fields(textConnection(lines),sep="\001")
raw_data<-read.table(textConnection(lines[counts == 34]), sep="\001") 
```

有没有更好的方法来实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-15T11:49:33.390

使用@PaulHiemstra 的样本数据：

```
read.table("test.csv", sep = ";", fill=TRUE) 
```

然后你按照你的意愿照顾 NA。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T11:32:34.460

您可以做的是遍历文件中的行，并且只添加具有正确长度的行。

我定义了以下测试 csv 文件：

```
1;2;3;4
1;2;3;4
1;2;3
1;2;3;4 
```

使用`read.table`失败：

```
> read.table("test.csv", sep = ";")
Error in scan(file, what, nmax, sep, dec, quote, skip, nlines, na.strings,  :                                                                       
  line 3 did not have 4 elements 
```

现在是一种迭代方法：

```
require(plyr)
no_lines = 4
correct_length = 4
file_con = file("test.csv", "r")
result = ldply(1:no_lines, function(line) {
   dum = strsplit(readLines(file_con, n = 1), split = ";")[[1]]
   if(length(dum) == correct_length) {
     return(dum)
   } else {
     cat(sprintf("Skipped line %s\n", line))
     return(NULL)
   }
  })
close(file_con)

> result
  V1 V2 V3 V4
1  1  2  3  4
2  1  2  3  4
3  1  2  3  4 
```

当然，这是一个简单的例子，因为文件非常小。让我们创建一个更具挑战性的示例作为基准。

```
# First file with invalid rows
norow = 10e5    # number of rows
no_lines = round(runif(norow, min = 3, max = 4))
no_lines[1] = correct_length
file_content = ldply(no_lines, function(line) paste(1:line, collapse = ";"))
writeLines(paste(file_content[[1]], sep = "\n"), "big_test.csv")

# Same length with valid rows
file_content = ldply(rep(4, norow), function(line) paste(1:line, collapse = ";"))
writeLines(paste(file_content[[1]], sep = "\n"), "big_normal.csv") 
```

现在进行基准测试

```
# Iterative approach
system.time({file_con <- file("big_test.csv", "r")
    result_test <- ldply(1:norow, function(line) {
       dum = strsplit(readLines(file_con, n = 1), split = ";")[[1]]
       if(length(dum) == correct_length) {
         return(dum)
       } else {
         # Commenting this speeds up by 30%
         #cat(sprintf("Skipped line %s\n", line))
         return(NULL)
       }
      })
    close(file_con)})
   user  system elapsed 
 20.559   0.047  20.775

# Normal read.table
system.time(result_normal <- read.table("big_normal.csv", sep = ";"))
   user  system elapsed 
  1.060   0.015   1.079 

# read.table with fill = TRUE
system.time({result_fill <- read.table("big_test.csv", sep = ";", fill=TRUE)
             na_rows <- complete.cases(result_fill)
             result_fill <- result_fill[-na_rows,]})
   user  system elapsed 
  1.161   0.033   1.203 

# Specifying which type the columns are (e.g. character or numeric)
# using the colClasses argument.
system.time({result_fill <- read.table("big_test.csv", sep = ";", fill=TRUE, 
                                       colClasses = rep("numeric", 4))
             na_rows <- complete.cases(result_fill)
             result_fill <- result_fill[-na_rows,]})
   user  system elapsed 
  0.933   0.064   1.001 
```

所以迭代方法要慢一些，但 100 万行的 20 秒可能是可以接受的（尽管这取决于您对可接受的定义）。特别是当您只需要这样做一次，而不是保存它以`save`供以后检索时使用。@Paolo 建议的解决方案几乎与正常调用`read.table`. 包含错误数量的列（因此`NA`）的行将使用`complete.cases`. 指定列是哪些类进一步提高了性能，我认为当列和行的数量变大时，这种效果会更大。

所以总而言之，最好的选择是使用`read.table`with `fill = TRUE`，同时指定列的类。如果您想更灵活地选择如何读取行，则使用迭代方法`ldply`仅是一个不错的选择，例如，仅在某个值高于阈值时才读取行。但也许这可以通过将所有数据读入 R 来更快地完成，而不是创建一个子集。只有当数据大于您的 RAM 时，我才能想象迭代方法有其优点。

# java - 如何更改所选新图像上的描述文本？

> ID：10599229
> 
> 赞同：-1
> 
> 时间：2012-05-15T10:53:17.193
> 
> 标签：java, android, textview, imageview, wallpaper

你能帮我编码吗？

所以，每次我选择新图像时，我都想在图像下方更改文本女巫。

例如：

我的应用就像 Travis 的壁纸应用教程。-> [http://www.youtube.com/watch?v=oiCKnevQLWU](http://www.youtube.com/watch?v=oiCKnevQLWU) 我想在每次选择新图像时更改文本。

谢谢您的帮助！

部分代码：

```
 public void onClick(View v) {
            // TODO Auto-generated method stub
            switch (v.getId()){

            case R.id.image1:
                display.setImageResource(R.drawable.image1);
                toPhone = R.drawable.image1;

                break;
            case R.id.image2:
                display.setImageResource(R.drawable.image2);
                toPhone = R.drawable.image2;
                break; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:05:57.997

这样会更好。为每个图像使用 setOnClickListener ..

```
your_image.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub

            }
        }); 
```

# extjs4 - Extjs4：多选选项

> ID：10599231
> 
> 赞同：0
> 
> 时间：2012-05-15T10:53:25.163
> 
> 标签：extjs4

在我的表单中，我有一个组合框中的员工列表，我需要将一些员工映射到特定部门。我需要将组合框更改为列表框。场景如下，

```
 1\. List A contains all employees.
 2\. If i click 'Add' button the selected employees must move to list  B
    and list A must contain remaining employees 
```

.

**我搜索了列表框，但在 extjs4 中找不到。**

ext-js4 中的多选列表框是否有任何示例或链接？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:00:06.507

ExtJs4 中没有内置的 ListBox 小部件。但是，[Ext.view.View](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.view.View)经过一些操作后可能会变成一个列表框。

这是一个这样的调整的[例子](https://github.com/molecule-man/ExtJsListbox)`View`。可以在[此处](http://molecule-man.github.com/ExtJsListbox/demos/simple.html)、[此处](http://molecule-man.github.com/ExtJsListbox/demos/panel.html)和[此处](http://molecule-man.github.com/ExtJsListbox/demos/advanced.html)找到演示（这个看起来正是您所需要的）。

您可以创建两个这样的列表框和“添加”按钮。然后将处理程序分配给按钮，该按钮将从第一个列表框的商店中删除所选项目并将其添加到第二个列表框的商店中。

# ajax - 专门用于存储任意数据的 HTML 标记

> ID：10599234
> 
> 赞同：0
> 
> 时间：2012-05-15T10:53:39.297
> 
> 标签：ajax, asp.net-mvc, html, razor

我正在通过 AJAX 加载 Razor[视图](http://www.asp.net/mvc/tutorials/older-versions/views/asp-net-mvc-views-overview-cs)并将内容放入页面上的 div 中。

如果我想将一些任意数据从视图发送到我们的 AJAX 框架，是否有推荐的 HTML 标记来执行此操作？隐藏字段听起来像是错误的 this 用于此。`div`我可以使用带有自定义`data-`属性的空，但同样，a`div`听起来是错误的。

我的数据与此视图中的任何元素都不相关，与视图本身更相关。

是的——这只是一个系统学和美学的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:01:05.123

我使用`data-*`属性，并尝试查找并将它们附加到已经存在的相关元素。asp.net mvc 框架本身也使用此约定 - 当需要加载链接目标时，`data-ajax-*`附加到锚点。当您需要设置表单提交的更新目标时，您附加`data-ajax-*`到表单，因此在大多数情况下可以找到合适的候选人。如果在任何特定情况下都不可能，我看不到使用它的问题`body`。

# c# - 如何记录 Web 服务的 JSON 请求

> ID：10599235
> 
> 赞同：5
> 
> 时间：2012-05-15T10:53:42.943
> 
> 标签：c#, jquery, asp.net, json, trace

我有一个 web 方法，它是从 jquery 的 ajax 方法中调用的，如下所示：

```
$.ajax({
    type: "POST",
    url: "MyWebService.aspx/DoSomething",
    data: '{"myClass": ' + JSON.stringify(myClass) + '}',
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    async: false,
    success: function (result) {
        alert("success");
    },
    error: function () {
        alert("error");
    }
}); 
```

这是我的网络方法：

```
[WebMethod(EnableSession = true)]
public static object DoSomething(MyClass myClass)
{
    HttpContext.Current.Request.InputStream.Position = 0; 
    using (var reader = new StreamReader(HttpContext.Current.Request.InputStream))
    {
    Logger.Log(reader.ReadToEnd());
    }
} 
```

如果 javascript 中的 myClass 被序列化为正确的格式，则执行 DoSomething 方法并将原始 json 保存到数据库。但是，如果 myClass 错误，则该方法根本不会执行，我也无法记录有问题的 json ...

即使序列化失败，总是以某种方式获取和记录我的 Web 方法接收的原始 json 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:57:38.613

在stackoverflow上的一些其他答案的帮助下，我得出了这个结论：

```
public class RequestLogModule : IHttpModule
{
    private HttpApplication _application;

    public void Dispose()
    {
    }

    public void Init(HttpApplication context)
    {
        _application = context;
        _application.BeginRequest += ContextBeginRequest;
    }

    private void ContextBeginRequest(object sender, EventArgs e)
    {
        var request = _application.Request;

        var bytes = new byte[request.InputStream.Length];
        request.InputStream.Read(bytes, 0, bytes.Length);
        request.InputStream.Position = 0;
        string content = Encoding.UTF8.GetString(bytes);

        Logger.LogRequest(
            request.UrlReferrer == null ? "" : request.UrlReferrer.AbsoluteUri,
            request.Url.AbsoluteUri,
            request.UserAgent,
            request.UserHostAddress,
            request.UserHostName,
            request.UserLanguages == null ? "" : request.UserLanguages.Aggregate((a, b) => a + "," + b),
            request.ContentType,
            request.HttpMethod,
            content
        );
    }
} 
```

在 web.config 中：

```
<httpModules>
  <add name="MyRequestLogModule" type="MyNamespace.RequestLogModule, MyAssembly"/>
</httpModules> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-05-15T11:09:11.687

你总是可以在服务器端做到这一点。

当您将请求发送到调用 Web 服务的“MyWebService.aspx/DoSomething”时，您可以将结果（成功/错误）记录到日志文件中。

# c# - 哪个可能是与在线数据库的连接速度较慢（在本地主机上）的原因？

> ID：10599237
> 
> 赞同：0
> 
> 时间：2012-05-15T10:53:56.740
> 
> 标签：c#, .net, sql-server

我真的不知道这怎么可能。从我的 SQL Express 连接到在线数据库并进行查询/等操作是否如此之快。

但是，将 localhost 上的 Web 应用程序运行到在线数据库需要很长时间。比如一个简单的请求需要 20-30 秒。在线观看网站是如此之快。所以主应用程序没有问题。

连接字符串，例如：

```
<add key="ConnectionString_ONLINE" value="data source=95.40.100.200,1900;initial catalog=DBName;USER ID=Username;Password=Password;" /> 
```

可能的主要原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-08T11:09:48.483

我意识到这是很久以前问过的，但为了以后的搜索，我想我会添加这个......

与实时 SQL 服务器盒相比，我还遇到了 localhost SQL 连接速度非常慢的问题。即使通过 VPN，它也比我自己的本地主机快。我最终意识到，每次我在 localhost 上运行应用程序时，都是直接通过 Visual Studio 以某种方式增加了它自己的调试开销。当我编译应用程序并在外部运行 EXE 时，我得到了更快的速度。

值得一提！

# php - 将 href 链接转换为与缩略图一起使用的图像链接

> ID：10599240
> 
> 赞同：1
> 
> 时间：2012-05-15T10:54:11.933
> 
> 标签：php, jquery, mysql

我已经看到了一些好的脚本，但没有一个我真的可以使用。我的网站是 php sql 驱动的，我喜欢用缩略图中的图像更改网站上的链接。我到目前为止的代码是：

```
<a href="<?php echo $link['url'] ;?>"><?php echo openld_htmlspecialchars($link['title']); ?></a> 
```

就脚本而言，我喜欢：

```
$('.post-body a').each(
    function(){
        $('<img />').attr('src','http://open.thumbshots.org/image.aspx?url='+encodeURIComponent(this.href)).replaceAll($(this));
    }); 
```

我使用了 .replaceAll 函数，但它只显示图片而不是点击链接。我使用了 .insertAfter 但文本链接不断显示。

这可能不是脚本代码的巨大变化，但我似乎没有找到我的问题的答案。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:00:49.570

我希望你正在寻找什么...

```
$('.post-body a').each(function(){
    $(this).html("<img src='http://open.thumbshots.org/image.aspx?url="+encodeURIComponent(this.href)">");
}); 
```

# android - webview中的地图添加标记

> ID：10599241
> 
> 赞同：0
> 
> 时间：2012-05-15T10:54:14.570
> 
> 标签：android, google-maps-api-3

我想在我的 android 中添加地图，我无法扩展 MapActivity，因为该地图位于标签蚂蚁中，它扩展了 Fragment。

所以我使用的是WebView，我遵循了这段代码：

[https://developers.google.com/maps/articles/android_v3](https://developers.google.com/maps/articles/android_v3)

问题是当我尝试在我的 html 文件中添加标记时：

```
 function createMarker(lat, lng){
var latlng = new google.maps.LatLng(lat, lng);           
var marker = new google.maps.Marker({
    position: latlng,
    map: map
});

return marker 
```

我想问题是“地图”，因为我不知道如何访问它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:27:08.357

首先，您必须像这样创建另一个类：

```
public class Exchanger extends FragmentMapActivity {

    public static MapView mapView;

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

} 
```

然后在片段类中，您使用类名调用地图视图，然后在地图上添加标记

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    mMapView = Exchanger.mapView; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:27:39.823

你不能扩展`MapActivity`，但你可以实现`LocationListener`。所以你得到一个方法调用`onLocationChanged`。在该方法中，您可以获得`GeoPoint`

```
geoPoint = new GeoPoint((int) (location.getLatitude() * 1E6) , (int) (location.getLongitude() * 1E6)); 
```

然后你可以创建你自己的类来扩展`Overlay`类。在那里你会得到一个方法调用`draw`。在这种方法中，您可以创建自己的点。下面的示例代码...

```
 Point screenPoints = new Point();
        mapView.getProjection().toPixels(geoPoint, screenPoints);

        Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.pushpin);

        canvas.drawBitmap(bitmap, screenPoints.x, screenPoints.y, null); 
```

我希望这能帮到您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:20:29.470

您需要正确初始化地图。请参阅入门教程：

*   入门：[https ://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)
*   简单标记示例：[https ://google-developers.appspot.com/maps/documentation/javascript/examples/marker-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-simple)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T12:31:45.347

有一种方法可以在 Fragment 中使用 MapActivity。这是一个使用 LocalActivityManager 创建 Activity 并将其显示在 Fragment 中的 Fragment 的小技巧。

有关此问题的更多信息，请参阅此问题：[MapView in a Fragment (Honeycomb)](https://stackoverflow.com/questions/5109336/mapview-in-a-fragment-honeycomb)

这不是一个很好的解决方案，但它是在 Fragment 中显示 Android 地图的唯一方法。这将允许您使用正确的 API 来处理 MapItem。这些也不是 Android 最好用的部分，但开发 webview 解决方案会更快，并且也会为您的用户提供更好的可用性。

# java - Android上的图形可视化

> ID：10599242
> 
> 赞同：2
> 
> 时间：2012-05-15T10:54:14.633
> 
> 标签：java, android, graph, information-visualization

我一直在寻找一个可以帮助在 Android 上进行图形可视化的可视化框架。我发现了很多图表框架，但没有一个可以像 JavaScript Infovis 工具包那样允许图形可视化和操作。我正在寻找一个本机库，因为 JavaScript 库对于平板电脑来说性能不够。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T14:42:27.123

我终于咬紧牙关，使用 2d 游戏引擎来渲染图形。我无法在 android 上找到任何处理超图的框架

# php - PHP mcrypt_module_open 导致 500 错误

> ID：10599244
> 
> 赞同：3
> 
> 时间：2012-05-15T10:54:21.433
> 
> 标签：php, codeigniter, encryption

我有这个用于解密文件的 PHP 函数（使用 PHP 5.3），它曾经工作得很好，但现在我搬到了 Amazon EC2（基于 Amazon Linux Image 2012.3），似乎 mcrypt 安装已损坏或根本不可用。

初步测试表明，文件解密确实适用于较小的文件，但不适用于 20MB 以上的文件（这不是特别大的文件）。

我将问题追踪到**这一行，这导致了错误 500**（我**没有**收到`mcrypt_module_open is undefined`，**只是 500 服务器错误**）

```
$td = mcrypt_module_open ('rijndael-128', '', 'cbc', ''); 
```

奇怪的是，我检查了 /etc/php.ini，我根本看不到 mcrypt（当然假设我正在查看正确的 php.ini/path！）

PHP代码/功能是：

```
function decrypt_file ($inputfile, $outputfile)
{
    $key        = FILE_KEY;  // <-- assign private key
    $buffersize = 16384;

    // Open $inputfile for reading binary
    $input      = fopen ($inputfile, 'rb');

    // Error opening $inputfile, return false
    if (!$input)
        return false;

    // Open $outputfile for writing binary
    $output     = fopen ($outputfile, 'wb');

    // Error opening $outputfile, return false
    if (!$output)
        return false;

    // Open the cipher module
    $td = mcrypt_module_open ('rijndael-128', '', 'cbc', '');

    // Read the IV from $inputfile
    $iv = fread ($input, 16);

    // Compute the SHA512 of the IV (salt) and Key and use 32 bytes (256 bit) of the result as the encryption key
    $keyhash = substr (hash ('sha512', $iv . $key, true), 0, 32);

    // Intialize encryption
    mcrypt_generic_init ($td, $keyhash, $iv);

    while (!feof ($input))
    {
        $buffer = fread ($input, $buffersize);

        // Encrypt the data
        $buffer = mdecrypt_generic ($td, $buffer);

        // Remove padding for last block
        if (feof ($input))
        {
            $padsize = ord ($buffer[strlen ($buffer) - 1]);
            $buffer  = substr ($buffer, 0, strlen ($buffer) - $padsize);
        }

        // Write the encrypted data to $output
        fwrite ($output, $buffer, strlen ($buffer));
    }

    fclose ($input);
    fclose ($output);

    // Deinitialize encryption module
    mcrypt_generic_deinit ($td);

    // Close encryption module
    mcrypt_module_close ($td);

    return true;
} 
```

任何人都知道如何解决这个问题？我正在使用 PHP 5.3 和 CodeIgniter 2.1（认为这很可能**与 CodeIgniter 无关**）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T11:30:47.347

看起来你没有安装 mcrypt。尝试运行：

```
sudo yum install php-mcrypt 
```

...从您的实例上的命令行。

# java - 为什么 weblogic 不使用我的部署计划？

> ID：10599252
> 
> 赞同：3
> 
> 时间：2012-05-15T10:54:34.550
> 
> 标签：java, jakarta-ee, weblogic

我在尝试在 weblogic 中调整应用程序的部署设置时遇到了一些麻烦。我觉得我正在尝试做的事情应该很简单，但它并没有按预期工作。

我只是想覆盖 weblogic.xml 中的 context-root 和数据源的 JNDI 名称，所以这些都可以在部署时进行配置。

我已经从 ear 文件中删除了 application.xml，所以这不应该影响覆盖。

到目前为止我所拥有的：

weblogic.xml：

```
<context-root>mosaic</context-root>

<resource-description>
  <res-ref-name>jdbc/LogicalDS</res-ref-name>
  <jndi-name>LogicalDS</jndi-name>
</resource-description> 
```

web.xml

```
<resource-ref>
  <description>A logical reference to the datasource - mapped in deployment plan</description>
  <res-ref-name>jdbc/LogicalDS</res-ref-name>
  <res-type>javax.sql.DataSource</res-type>
  <res-auth>Container</res-auth>
</resource-ref> 
```

计划.xml

```
<?xml version="1.0" encoding="UTF-8"?>
 <wls:deployment-plan xmlns:wls="http://xmlns.oracle.com/weblogic/deployment-plan" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xsi:schemaLocation="http://xmlns.oracle.com/weblogic/deployment-plan http://xmlns.oracle.com/weblogic/deployment-plan/1.0/deployment-plan.xsd http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/j2ee_1_4.xsd" global-variables="true">
 <!--weblogic-version:10.3.5-->
 <wls:application-name>mosaic.ear</wls:application-name>
 <wls:variable-definition>
    <wls:variable>
        <wls:name>datasource_name</wls:name>
        <wls:value xsi:nil="true"></wls:value>
        <wls:description>The name of the datasource to map to the mosaic application</wls:description>
    </wls:variable>
    <wls:variable>
        <wls:name>new_context_root</wls:name>
        <wls:value xsi:nil="true"></wls:value>
        <wls:description>URL to deploy Mosaic at</wls:description>
    </wls:variable>
 </wls:variable-definition>
<wls:module-override>
    <wls:module-name>mosaic.war</wls:module-name>
    <wls:module-type>war</wls:module-type>
    <wls:module-descriptor>
        <wls:root-element>weblogic-web-app</wls:root-element>
        <wls:uri>WEB-INF/weblogic.xml</wls:uri>
        <wls:variable-assignment>
            <wls:name>new_context_root</wls:name>
            <wls:xpath>/weblogic-web-app/context-root</wls:xpath>
            <wls:operation>replace</wls:operation>
        </wls:variable-assignment>
        <wls:variable-assignment>
            <wls:description>Data source for mosaic application</wls:description>
            <wls:name>datasource_name</wls:name>
            <wls:xpath>/weblogic-web-app/resource-env-description/resource-env-ref-name</wls:xpath>
            <wls:operation>replace</wls:operation>
        </wls:variable-assignment>
        <wls:variable-assignment>
            <wls:name>datasource_name</wls:name>
            <wls:xpath>/weblogic-web-app/resource-description/[res-ref-name="jdbc/LogicalDS"]/jndi-name</wls:xpath>
            <wls:operation>replace</wls:operation>
        </wls:variable-assignment>
    </wls:module-descriptor>
  </wls:module-override>
</wls:deployment-plan> 
```

当我使用部署计划时没有任何反应，并且没有任何变量出现在管理控制台的部署计划配置屏幕下。据我了解，至少应该询问我这些变量，因为我已在部署计划中指定它们为空。

当我使用 WLST 浏览树时，我发现运行时配置只是保留为部署描述符中的值。

我已验证部署计划正在管理控制台的常规选项卡中使用。

谁能帮我找出我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T18:48:23.067

我看到您有两次“datasource_name”变量替换。这是故意的吗？您的 xpath 似乎不正确：

资源描述/[res-ref-name= 等。

应该是：

资源描述[res-ref-name=等。

我的建议是一次更改一件事，例如，首先 Web 应用程序上下文，然后进行测试。Web 应用程序上下文也可以在管理控制台中设置，因此您应该在那里看到值。

关于部署计划的好文章很少：

[https://blogs.oracle.com/jamesbayer/entry/11gr1_update_and_a_deployment](https://blogs.oracle.com/jamesbayer/entry/11gr1_update_and_a_deployment)

[http://m-button.blogspot.com/2008/08/how-to-use-deployment-plan.html](http://m-button.blogspot.com/2008/08/how-to-use-deployment-plan.html)

一个好的资源映射文档：

[http://docs.oracle.com/cd/E15523_01/web.1111/e13737/packagedjdbc.htm](http://docs.oracle.com/cd/E15523_01/web.1111/e13737/packagedjdbc.htm) （查找底部附近的图表）。

您的变量是“替换”还是“定义”？

# iphone - 替换字符串 iPhone 中的字符

> ID：10599257
> 
> 赞同：-1
> 
> 时间：2012-05-15T10:55:06.583
> 
> 标签：iphone, objective-c, ios, ipad, nsstring

我想替换字符串中特定位置的单个字符。

*例子*

*字符串：123-456-7890*

*所需输出：123-406-7890（将第五位的 5 替换为 0）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T10:58:09.913

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/)

访问此处并阅读有关字符串的所有信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:02:27.373

使用`stringByReplacingCharactersInRange:withString:`, 形成`NSRange`变量来表示第 5 个位置。

```
NSString *phoneNumber = @"123-456-7890";
NSString *newString = [phoneNumber stringByReplacingCharactersInRange:NSMakeRange(5, 1) withString:@"0"];
NSLog(@"%@", newString); 
```

`Output: 123-406-7890`

阅读所有关于[NSString](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/)的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:04:45.057

替换字符串有很多方法：

```
NSString *str = [yourString stringByReplacingOccuranceOfString:@"5" withString:@"0"]; 
```

第二种方法首先获取字符串范围，例如：

```
NSRange range = [yourSting rangeOfString:@"5"];
NSString *first = [yourString substringToIndex:range.location];
NSString *second = [yourString substringFromIndex:range.location+range.length];
NSString *yourNewStr = [NSString stringWithFormat:@"%@0%@",first,second]; 
```

还有很多其他使用字符串操作的，但第一个是最好的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T11:05:27.557

如果您想实际替换第 5 个字符而不是任何 5，您需要先创建一个范围。

```
NSRange range = NSMakeRange(5, 1);
NSString *newString = [initialString stringByReplacingCharactersInRange:range withString:@"0"]; 
```

编辑：更正了范围长度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T11:06:35.790

您可以使用 ：-

```
NSString *replacechar = @"0";
NSString *newString= [String stringByReplacingCharactersInRange:NSMakeRange(5,1) withString:replacechar]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T11:07:21.237

获取子字符串第一次出现的范围（即索引）。然后用您想要的替换值替换该范围。

```
NSString *originalString = @"123 456 789";
NSRange r = [originalString rangeOfString:@"5"];
NSString *newString = [originalString stringByReplacingCharactersInRange:r withString:@"0"]; 
```

# java - 如何在java中将十进制数字格式化为两个小数点？

> ID：10599258
> 
> 赞同：-3
> 
> 时间：2012-05-15T10:55:10.203
> 
> 标签：java, bigdecimal, number-formatting

> **可能重复：**
> [四舍五入到小数点后两位](https://stackoverflow.com/questions/3596023/round-to-2-decimal-places)

假设在一个变量中我有一个像 3.1426384473 这样的十进制数，但我想要 3.14。现在我如何将十进制数字格式化为两个小数点，如上例所示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:00:08.690

双圆周率=3.1426384473；

System.out.printf("%.2f",pi);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T10:58:40.657

尝试这个....

```
DecimalFormat df = new DecimalFormat("#.##");
df.format(3.1426384473); 
```

或者，如果您只想打印，那么您也可以使用它...

```
System.out.printf("%.2f",d); //d is your number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:57:31.527

```
public static double round(double value, int places) {
    if (places < 0) throw new IllegalArgumentException();

    long factor = (long) Math.pow(10, places);
    value = value * factor;
    long tmp = Math.round(value);
    return (double) tmp / factor;
} 
```

# java - 如何确定按下了哪个同名链接

> ID：10599261
> 
> 赞同：-1
> 
> 时间：2012-05-15T10:55:33.003
> 
> 标签：java, jsp, jakarta-ee, servlets

当用户单击其中一个链接并转到下一个 JSP 页面时，我需要以某种方式获取此记录号

```
<table> <tr>
                    <td><strong><font size="5">User Name</font></strong></td>
                    <td></td>
                    <td><strong><font size="5">Title</font></strong></td>
                    <td></td>
                    <td><strong><font size="5">Description</font></strong></td>
                    <td></td>
                    <td><strong><font size="5">Date Published</font></strong></td></tr>

                <% for (int i = 0; i < list.size(); i++) {
                        IdeaList az = (IdeaList) list.elementAt(i);
                        //     System.out.println(az);
                 %>

                <tr> <td><%=az.getUsername()%></td>
                    <td></td>
                    <td><%=az.getTitle()%></td>
                    <td></td>
                    <td><%=az.getDescription()%></td>
                    <td></td>
                    <td><%=az.getLastModification()%></td>
                    <td><a href="http://localhost:8080/BankOfIdeass/Controller?action=View&idea=<%=az.getIdeaId()%>">View Idea</a></td> 
                </tr>

                <% }%>

            </table> 
```

我想当我点击查看想法时，它会从数据库中打开带有这个想法的详细信息的 jsp

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:01:40.380

传递 URL 中的值并在下一页获取它。例子：

```
book.jsp?id=value 
```

# php - codeigniter index.php 文件 mod 重写

> ID：10599264
> 
> 赞同：0
> 
> 时间：2012-05-15T10:55:35.693
> 
> 标签：php, codeigniter

嗨，我是 codeigniter 的新手，并将其用作我的 url

```
http://localhost/codeigniter/index.php/site 
```

并包含以下 htaccess 文件

```
RewriteEngine On
RewriteBase/codeigniter
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [PT,L] 
```

将此 htaccess filr 包含到 codeigniter 文件夹后，网页在这两个文件夹上都停止工作

```
http://localhost/codeigniter/index.php/site 
```

和

```
http://localhost/codeigniter 
```

基本上我需要

```
http://localhost/codeigniter 
```

去工作

请帮忙

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T10:58:33.693

您在 RewriteBase 和基本 URI 之间缺少一个空格：

```
RewriteBase /codeigniter 
```

这可能是事情停止工作的原因（服务器错误状态 500，您可以在错误日志中找到）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:01:39.573

用这个，

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

更多详情请[点击这里](http://codeigniter.com/user_guide/general/urls.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:06:08.023

为了让您的 codeigniter 站点默认为站点控制器，您需要更新 config/routes.php 以将站点控制器设置为默认路由。

对于重写问题，请参阅@Repox 的回答。

# php - mysql_affected_rows 返回 0

> ID：10599265
> 
> 赞同：1
> 
> 时间：2012-05-15T10:55:38.143
> 
> 标签：php, mysql

我对`mysql_affected_rows()`PHP 中的函数有疑问。我使用 MySQL 更新，在 phpMyAdmin 中我可以看到，“已确认”从 0 变为 1，但`mysql_affected_rows`仍返回 0！我找不到解决方案。我的代码是：

```
$query = "UPDATE visits                 
SET confirmed = 1
WHERE id = ? AND confirmed = 0 AND expire >  now() - INTERVAL 10 MINUTE;";

$stmt = $this->conn->stmt_init();

if($stmt->prepare($query)) {
$stmt->bind_param('i',$id); //$id is a function parameter
$res = $stmt->execute();

$stmt->close();

echo mysql_affected_rows();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T10:57:49.873

It seems you're using PDO, not the mysql_* functions. Therefore, you should uso PDOs rowCount function:

```
$query = "UPDATE visits                 
    SET confirmed = 1
    WHERE id = ? AND confirmed = 0 AND expire >  now() - INTERVAL 10 MINUTE;";

$stmt = $this->conn->stmt_init();

if($stmt->prepare($query)) {
    $stmt->bind_param('i',$id); //$id is a function parameter
    $res = $stmt->execute();

    echo $stmt->rowCount();

    $stmt->close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:02:00.103

使用语句时，使用[affected_rows](http://php.net/manual/en/mysqli-stmt.affected-rows.php)获取受影响的行数：`UPDATE`

```
$stmt = $this->conn->stmt_init();

if($stmt->prepare($query)) {
    $stmt->bind_param('i',$id); //$id is a function parameter
    $res = $stmt->execute();
    echo $stmt->affected_rows;
    $stmt->close();
} 
```

它也需要在`close()`语句之前

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T10:59:43.517

您需要将连接作为参数传递给函数。

```
echo mysql_affected_rows($this->conn); 
```

[http://php.net/manual/en/function.mysql-affected-rows.php](http://php.net/manual/en/function.mysql-affected-rows.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T10:58:41.677

使用这个[http://www.php.net/manual/en/pdostatement.rowcount.php](http://www.php.net/manual/en/pdostatement.rowcount.php)

PDOStatement::rowCount 返回受查询影响的行数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T11:07:15.423

由于每个人似乎都认为您使用[PDO](http://php.net/manual/en/book.pdo.php)，而在我看来它更像[MySQLi](http://php.net/manual/en/book.mysqli.php)，[这](http://php.net/manual/en/mysqli-stmt.affected-rows.php)是 MySQLi 的方式：

```
$query = "
  UPDATE visits                 
  SET confirmed = 1
  WHERE id = ?
    AND confirmed = 0
    AND expire > now() - INTERVAL 10 MINUTE
";

$stmt = $this->conn->stmt_init();

if ($stmt->prepare($query)) {
  $stmt->bind_param('i', $id); //$id is a function parameter
  $res = $stmt->execute();
  echo $stmt->affected_rows; // Here's the good stuff
  $stmt->close();
} 
```

# sql-server-2005 - 为什么我不能在不锁定 SQL Server 2005 中的整个表的情况下插入/更新数据？

> ID：10599275
> 
> 赞同：2
> 
> 时间：2012-05-15T10:56:16.130
> 
> 标签：sql-server-2005, locking, insert-update, database-deadlocks

我正在尝试在 SQL Server 表中插入/更新行（取决于它是否存在）。我正在多台机器上从多个线程执行 SQL，我想避免出现重复的键错误。

我在网上找到了很多解决方案，但它们都导致事务死锁。这是我一直在使用的一般模式：

```
BEGIN TRANSACTION

UPDATE TestTable WITH (UPDLOCK, SERIALIZABLE)
SET Data = @Data 
WHERE Key = @Key

IF(@@ROWCOUNT = 0)
BEGIN
     INSERT INTO TestTable (Key, Data)
     VALUES (@Key, @Data)
END

COMMIT TRANSACTION 
```

我试过了：

*   `WITH XLOCK`代替`UPDLOCK`
*   `SET TRANSACTION ISOLATION LEVEL SERIALIZABLE`一开始是`UPDLOCK`
*   `SET TRANSACTION ISOLATION LEVEL SERIALIZABLE`并且没有表格提示

我还尝试了以下所有组合的模式：

```
BEGIN TRANSACTION

IF EXISTS (SELECT 1 FROM TestTable WITH (UPDLOCK, SERIALIZABLE) WHERE Key=@Key) 
BEGIN
    UPDATE TestTable
    SET Data = @Data 
    WHERE Key = @Key
END
ELSE
BEGIN
    INSERT INTO TestTable (Key, Data)
    VALUES (@Key, @Data)
END

COMMIT TRANSACTION 
```

我可以让它在没有死锁的情况下工作的唯一方法是使用`WITH (TABLOCKX)`.

我使用的是 SQL Server 2005，SQL 是在运行时生成的，因此它不在存储过程中，并且一些表使用复合键而不是主键，但我可以在具有整数主键的表上重现它。

服务器日志如下所示：

```
waiter id=processe35978 mode=RangeS-U requestType=wait
waiter-list
owner id=process2ae346b8 mode=RangeS-U
owner-list
keylock hobtid=72057594039566336 dbid=28 objectname=TestDb.dbo.TestTable indexname=PK_TestTable id=lock4f4fb980 mode=RangeS-U associatedObjectId=72057594039566336
waiter id=process2ae346b8 mode=RangeS-U requestType=wait
waiter-list
owner id=processe35978 mode=RangeS-U
owner-list
keylock hobtid=72057594039566336 dbid=28 objectname=TestDb.dbo.TestTable indexname=PK_TestTable id=lock2e8cbc00 mode=RangeS-U associatedObjectId=72057594039566336 
```

模式明显不同，具体取决于使用的表提示（但进程总是在等待它们已经拥有的模式）。我见过 RangeS-U、RangeX-X 和 U。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T09:34:00.180

如何先在表上进行插入以检查它是否存在：

```
BEGIN TRANSACTION

WITH ToInsert AS(
     SELECT @Key AS Key, @Data AS Data
)
INSERT INTO TestTable (Key, Data)
SELECT ti.Key, ti.Data
FROM ToInsert ti
LEFT OUTER JOIN TestTable t
     ON t.Key = ti.Key
WHERE t.Key IS NULL

IF(@@ROWCOUNT = 0)
BEGIN
     UPDATE TestTable WITH (UPDLOCK, SERIALIZABLE)
     SET Data = @Data 
     WHERE Key = @Key
END

COMMIT TRANSACTION 
```

这样可以确保您的 UPDATE 语句始终存在一条记录，并且您的 INSERT 和 INSERT-check 在同一个原子语句中，而不是两个单独的语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-14T15:40:39.350

今天又看了一遍，发现自己有点不耐烦了。我实际上正在运行：

```
BEGIN TRANSACTION

IF EXISTS (SELECT 1 FROM TestTable WITH (UPDLOCK, SERIALIZABLE) WHERE Key=@Key) 
BEGIN
    UPDATE TestTable
    SET Data = @Data, Key = @Key -- This is the problem
    WHERE Key = @Key
END
ELSE
BEGIN
    INSERT INTO TestTable (Key, Data)
    VALUES (@Key, @Data)
END

COMMIT TRANSACTION 
```

我自己锁了钥匙。呸！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T13:43:34.040

您的死锁在索引资源上。

在执行计划中查找书签/键查找并创建一个覆盖这些字段的非聚集索引 - 这样 UPDATE 数据的“读取”不会与 INSERT 的“写入”发生冲突。

# nhibernate - nhibernate upgrade 2.1 to 3.3, exception when using DistinctRootEntityResultTransformer

> ID：10599277
> 
> 赞同：2
> 
> 时间：2012-05-15T10:56:22.463
> 
> 标签：nhibernate

We've upgraded NHibernate from 2.xx to 3.3\. It works well but we have some usages of

```
SetResultTransformer(new DistinctRootEntityResultTransformer()) 
```

And now we get "Index was outside the bounds of the array" exception when doing

```
.List<Entity>() 
```

The Stack trace shows that the error comes from `at NHibernate.Type.TypeHelper.Disassemble(Object[] row, ICacheAssembler[] types, Boolean[] nonCacheable, ISessionImplementor session, Object owner) at NHibernate.Cache.StandardQueryCache.Put(QueryKey key, ICacheAssembler[] returnTypes, IList result, Boolean isNaturalKeyLookup, ISessionImplementor session) at NHibernate.Loader.Loader.PutResultInQueryCache(ISessionImplementor session, QueryParameters queryParameters, IType[] resultTypes, IQueryCache queryCache, QueryKey key, IList result) at NHibernate.Loader.Loader.ListUsingQueryCache(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes) at NHibernate.Loader.Loader.List(ISessionImplementor session, QueryParameters queryParameters, ISet`1 querySpaces, IType[] resultTypes) at NHibernate.Loader.Criteria.CriteriaLoader.List(ISessionImplementor session) at NHibernate.Impl.SessionImpl.List(CriteriaImpl criteria, IList results)`

Any clues?

I found this: [https://nhibernate.jira.com/browse/NH-2961](https://nhibernate.jira.com/browse/NH-2961)

And if you remove, fetchmode.join or distinctrootentitytransformer or cache, it works.

# ios - Facebook feeds on iOS app?

> ID：10599278
> 
> 赞同：0
> 
> 时间：2012-05-15T10:56:23.117
> 
> 标签：ios, facebook, json, feed

How can I display face book feeds related to a group on an iOS App?

Is there any JSON/JSONP call to fetch the feeds??

Any help is Appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:40:50.710

最简单的 - 只是在网页视图上显示网页。Facebook 自行管理以适应您的 webView 控件的宽度。

```
// Load facebook data
NSString *fbUrlAddress = @"http://www.facebook.com/FLORtiles"; // here you put your own group
//Create a URL object.
NSURL *fbUrl = [NSURL URLWithString:fbUrlAddress];
NSString *webHTMLfb = [NSString stringWithContentsOfURL:fbUrl encoding:NSUTF8StringEncoding error:NULL];
//NSLog(@"webHTML of facebook: %@", webHTMLfb);
//URL Requst Object
NSURLRequest *fbRequestObj = [NSURLRequest requestWithURL:fbUrl];
//Load the request in the UIWebView.
[fbWebView loadRequest:fbRequestObj]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:01:52.350

您可能需要熟悉[Facebook 的 Graph Api](https://developers.facebook.com/docs/reference/api/group/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:40:28.273

通过这个-> [https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)

# jquery - 防止散列标签上的窗口位置移动（使用 Jquery 选项卡）

> ID：10599282
> 
> 赞同：0
> 
> 时间：2012-05-15T10:56:41.663
> 
> 标签：jquery, html, tabs, anchor

好的，我知道以前有很多问题，正在讨论这个话题，但是我很茫然，无法弄清楚。

**我的问题**是，当我单击每个选项卡链接时，整个浏览器窗口都会移动到选项卡内容的锚点，`div`正如您在 scrollTop 链接之类的东西上所期望的那样。有谁知道快速修复？

我正在使用这样的基本选项卡结构：

```
<div id="tabContaier">
  <ul>
    <li><a href="#tab1">Tab 1</a></li>
  </ul>
</div>

<div class="tabDetails">

  <div id="tab1">
    <h1>My Tab Title</h1>
    <p>Whatever goes here</p>
  </div>

</div> 
```

我的 Jquery 如下：

```
$(".tabContents").hide();
$(".tabContents:first").show();

$("#tabContaier ul li a").click(function(){

  var activeTab = $(this).attr("href");
  $("#tabContaier ul li a").removeClass("active");
  $(this).addClass("active");
  $(".tabContents").hide();
  $(activeTab).fadeIn();
}); 
```

与往常一样，非常感谢任何帮助:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:01:46.190

我相信您的意思是当您单击带有哈希作为其 href 属性的锚点时跳转到页面顶部？

如果您想停止此操作，则必须阻止单击处理程序上的默认操作。这是一个例子：

```
$("#example").click(function(e) {

    e.preventDefault(); 

  //Add your code here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:13:16.413

问题是您的浏览器正在关注`href`选项卡...您需要通过执行以下操作来防止这种情况：

```
$("#tabContaier ul li a").click(function(event){
   // your code
   event.preventDefault();
}); 
```

[event.preventDefault() 的文档在这里](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-15T11:04:27.870

试试这个，如果它不起作用让我

```
<div id="tabContaier">
  <ul>
    <li><a href="#tab1" onclick="return false;">Tab 1</a></li>
  </ul>
</div> 
```

# android - Setting first a PNG as background canvas image in ANDROID and then using another image on top but does not work

> ID：10599286
> 
> 赞同：0
> 
> 时间：2012-05-15T10:56:56.890
> 
> 标签：android, android-canvas

I need help to understand what I am doing wrong. I am setting a PNG Image as my background (canvas) and then I want to put another PNG image on top at a particular coordinate. But problem is when I set the background canvas PNG first it stays there but when the other image (on top) loads , the background canvas disappear. So obviously I am not doing something right.

Any suggestion from the android developers community would be highly appreciated.

THANKS!

HERE IS THE CODE BELOW:

StartNewGame.java:

```
package com.firm.armouredassault;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;

public class StartNewGame extends Activity {

    MyGame ourView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        ourView = new MyGame(this);
        setContentView(ourView);

    }

} 
```

Mygame.java

```
package com.firm.armouredassault;

import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;

import android.view.View;

public class MyGame extends View {

    Bitmap BTank, TShell;

    public MyGame(Context context) {
        super(context);
        // TODO Auto-generated constructor stub
        BTank = BitmapFactory.decodeResource(getResources(),     R.drawable.bluetanksm);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        // TODO Auto-generated method stub
        super.onDraw(canvas);

        canvas.drawBitmap(BTank, 10, 200, null);

    }

} 
```

newgame.xml:

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/canvas"
    android:orientation="vertical" >

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:04:41.773

在画布上写一个位图，借助方法和画布作为参数将此画布传递给新画布，然后如果您在新画布上写一个新的位图，它将被写入

# java - SAX finding nodes at max depth

> ID：10599288
> 
> 赞同：0
> 
> 时间：2012-05-15T10:56:59.040
> 
> 标签：java, xml, sax

How can i display node names with the maximum depth in the tree with SAX. The algorithm would be fine for me to understand the concept..

For example what should i do with startelement, endelement, startdocument, enddocument methods and what variables do i need to perform the task?

Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:24:13.900

这更像是一个算法问题。为了解决这个问题，需要注意的是，每次你有一个 startelement 事件，你就会下降一级，而当你有一个 endelement 事件时，你就会上升一级。这个想法是有一个变量（级别），并为每个起始元素增加它（级别++）并为每个结束元素减少它（级别--）。这意味着当找到节点的结束元素时，级别变量的值将是节点的深度。那么你唯一要做的就是跟踪最大值。伪代码版本将如下所示：

```
 startdocument -> level=0;max=0;
 startelement  -> level++
 endelement    -> if (level>max) max=level; level--; 
 endocument    -> System.out.println(max) 
```

希望能帮助到你。

# php - reduce compilation time of C program when there are 30 simultaneous programs

> ID：10599291
> 
> 赞同：3
> 
> 时间：2012-05-15T10:57:05.693
> 
> 标签：php, gcc, windows-xp, cygwin

I am trying to be make a online gcc compiler which can be accessed by the browser. For all this I have use php,cygwin on window XP. Actually I am giving the code window on the browser to the user.

* * *

**The general process is as:**

1.  $source write in .c file
2.  .c file compile by gcc compiler and .exe file created
3.  the output of .exe file is shown to the user.

It's supposed that there is no read function in c program for testing I am use only a single `printf` statement.

* * *

**The problem is:**

If there are about to 30 simultaneous request means 30 users compiler the program at the same point of time then it will produce output in about 15 seconds, which is too long.

Can some please one help me to reduce this time. Each suggestions are welcomed

Can I just read the output of C program with out making a .exe file.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:09:56.493

一个起点可以是探索分布式构建系统。

在 Windows 上，我知道一个（非免费）解决方案是[Incredibuild](http://www.xoreax.com/)。大约 8 年前，我们将它用于我们的一个项目，它将*清理和构建*时间从 25 分钟减少到 5 分钟左右。这里有一篇评论[。](http://gamesfromwithin.com/how-incredible-is-incredibuild)

现在，当我刚刚搜索其他替代方案和非 Windows 解决方案时，我也找到了[distcc](http://code.google.com/p/distcc/)。

这里还有一个关于[Incredibuild 替代品](http://discuss.fogcreek.com/joelonsoftware/default.asp?cmd=show&ixPost=120243)的讨论（看起来很老） 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:08:28.960

如果每个编译请求的 C 源代码几乎相同，则可以使用启用编译器缓存的构建系统。例如。waf 和 cmake。他们可以利用上一个建筑的副本来加快编译速度。

# yii - 将模型永久分配给 CActiveForm

> ID：10599293
> 
> 赞同：0
> 
> 时间：2012-05-15T10:57:09.300
> 
> 标签：yii

可以分配模型以`$model`在每个字段创建上呈现任何没有属性的输入吗？

就像是：

```
 $form = $this->beginWidget( 'CActiveForm', array( 'model' => new Model , ... ) );
 $form->textField('onlyAttributeHere'); 
```

?? 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:12:52.673

从 yii 1.1.10 开始，这是不可能的。

但是，您可以扩展[CActiveForm 类](http://www.yiiframework.com/doc/api/1.1/CActiveForm "http://www.yiiframework.com/doc/api/1.1/CActiveForm")，并为此添加一个新变量，但您还必须更改该类中的所有其他方法（主要是 html 帮助程序），以使用新变量作为模型。

# jquery - jQuery - check if mousedown

> ID：10599296
> 
> 赞同：-2
> 
> 时间：2012-05-15T10:57:16.147
> 
> 标签：jquery, html, file-upload, mouseevent

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:57:22.747

似乎您想将文件从系统拖动到网页，在此 HTML5 中将为您提供帮助。请参考[https://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/html5_code_example_of_file_api_drag_drop_hard_drive_files_to_a_webpage28?lang=en](https://www.ibm.com/developerworks/mydeveloperworks/blogs/bobleah/entry/html5_code_example_of_file_api_drag_drop_hard_drive_files_to_a_webpage28?lang=en)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:13:43.493

```
$('body').on('mousedown', '#rozwin.scroller-off', function() {
  alert('Mouse down happen');
}); 
```

# python - 如果我已经从前一个块中的函数返回，我应该使用 elif 吗？

> ID：10599303
> 
> 赞同：7
> 
> 时间：2012-05-15T10:57:35.407
> 
> 标签：python, coding-style

```
def size(number):
    if number<100:
        return Small()

    if number<1000:
        return Medium()

    return Big()

def size1(number):
    if number<100:
        return Small()
    elif number<1000:
        return Medium()
    else:
        return Big() 
```

关于编码风格：当后面的块，或者最后一个块是一大块代码时，我经常使用前者。这似乎有助于提高可读性。

当各种块有一个共同的概念贯穿它们时，我通常使用后者（如上例所示）。共同的缩进有助于传达他们的关系。

这两者之间是否有任何值得注意的差异（尤其是性能方面）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T11:01:42.367

风格方面，我发现第二个例子更容易理解。

在所有其他方面，没有区别。这两个函数编译为相同的字节码：

```
In [3]: dis.dis(size)
  2           0 LOAD_FAST                0 (number)
              3 LOAD_CONST               1 (100)
              6 COMPARE_OP               0 (<)
              9 POP_JUMP_IF_FALSE       19

  3          12 LOAD_GLOBAL              0 (Small)
             15 CALL_FUNCTION            0
             18 RETURN_VALUE        

  5     >>   19 LOAD_FAST                0 (number)
             22 LOAD_CONST               2 (1000)
             25 COMPARE_OP               0 (<)
             28 POP_JUMP_IF_FALSE       38

  6          31 LOAD_GLOBAL              1 (Medium)
             34 CALL_FUNCTION            0
             37 RETURN_VALUE        

  8     >>   38 LOAD_GLOBAL              2 (Big)
             41 CALL_FUNCTION            0
             44 RETURN_VALUE        

In [4]: dis.dis(size1)
 11           0 LOAD_FAST                0 (number)
              3 LOAD_CONST               1 (100)
              6 COMPARE_OP               0 (<)
              9 POP_JUMP_IF_FALSE       19

 12          12 LOAD_GLOBAL              0 (Small)
             15 CALL_FUNCTION            0
             18 RETURN_VALUE        

 13     >>   19 LOAD_FAST                0 (number)
             22 LOAD_CONST               2 (1000)
             25 COMPARE_OP               0 (<)
             28 POP_JUMP_IF_FALSE       38

 14          31 LOAD_GLOBAL              1 (Medium)
             34 CALL_FUNCTION            0
             37 RETURN_VALUE        

 16     >>   38 LOAD_GLOBAL              2 (Big)
             41 CALL_FUNCTION            0
             44 RETURN_VALUE        
             45 LOAD_CONST               0 (None)
             48 RETURN_VALUE 
```

（为了 100% 准确，第二个版本`return None`的末尾有一个隐式。但是，由于此代码不可访问，因此不会影响性能。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T10:59:44.970

您只能通过对其进行基准测试/计时（或如@aix 所示，查看翻译后的代码，假设代码段足够小）来了解特定案例的性能。

话虽如此，我认为第二个示例的*语义*更清晰，因为语言结构表明选项是互斥的。

一般来说，给定相同的功能，一个`if/elif/else`子句应该比一系列`if`-statement 更有效，其中多个`if`语句可以按顺序执行/评估，即使先前`if`已被发现是正确的。在这个特定的代码示例中，情况并非如此，因为`return`一旦执行了适当的`if`语句主体，就会执行。

# windows-phone-7 - Autoincrement field is not being automatically set

> ID：10599309
> 
> 赞同：0
> 
> 时间：2012-05-15T10:57:51.027
> 
> 标签：windows-phone-7, linq-to-sql

I'm having error with the column Id cannot contain null values but i set to true on IsDbGenerated. what am i doing wrong?

```
private int id;
[Column(IsPrimaryKey=true, CanBeNull=false, DbType="int", IsDbGenerated=true)]
public int Id
{
    get { return id; }
    set
    {
        if (id != value)
        {
            id = value;
            RaisePropertyChanged("Id");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-30T17:25:37.513

尝试这个

```
private int id;
    [Column(IsPrimaryKey=true, IsDbGenerated=true, DbType="INT NOT NULL IDENTITY", CanBeNull=false, AutoSync=AutoSync.OnInsert)]
    public int Id
    {
        get { return id; }
        set 
        {
            if (id != value)
            {
                NotifyPropertyChanging("Id");
                id = value;
                NotifyPropertyChanged("Id");
            }
        }
    } 
```

# asp.net - How to find duplicates in a column of a datatable asp.net vb

> ID：10599310
> 
> 赞同：0
> 
> 时间：2012-05-15T10:57:59.027
> 
> 标签：asp.net, datatable, duplicates

I have used Linq to check duplicates in a column of a datatable. Please see below code.

```
 Dim duplicates = dt.AsEnumerable() _
                        .GroupBy(Function(i) i.Field(Of String)("COLUMNNAME")) _
                        .Where(Function(g) g.Count() > 1) _
                        .Select(Function(g) g.Key)

            For Each ed In duplicates
                isValid = False
            Next 
```

But the problem if there are two or more empty fields, it will take them as duplicates. As the field is optional, it only needs to check if there is data.

Could anyone tell me how to find duplicates in a column in datatabe. Just from a column. It does NOT need to be Linq. I just put the code I have if it can do the job with a small tweak. Thanks a lot.

# java - Need to validate for invalid xml characters in SWT/AWT Text box

> ID：10599311
> 
> 赞同：0
> 
> 时间：2012-05-15T10:58:00.933
> 
> 标签：java, textbox, swt, awt

I have a window that has textbox, with OK and Cancel buttons. upon clicking Ok button, I need to validate the entered text contains invalid xml characters and show a warning popup message.

I am able to perform this by getting text.getText(). However, if tomorrow a new SWT/AWT Textbox appears in the window, again i will have to modify code to get the getText() from the new control.

Is there a generic method so that, when a new SWT/AWT Textbox is added in that window, we can enforce to validate this invalid xml character check ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:54:28.733

使用 SWT.Verify 事件类型。创建一个执行 XML 字符检查的侦听器并将该侦听器添加到窗口中的所有文本框。

这是一个[SWT 片段](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet19.java)，它显示了 SWT.Verify 事件的使用

# sql - 如何以人类可读的格式从 oracle 数据库表中选择所有数据？

> ID：10599316
> 
> 赞同：0
> 
> 时间：2012-05-15T10:58:32.550
> 
> 标签：sql, oracle, oracle-sqldeveloper

对不起，如果我的问题听起来很愚蠢，但我从未使用过 Oracle 数据库。

如果我`select * from table`在 MS Management Studio 中执行，我有 3 个选项来选择该数据。我正在使用网格，有时使用文本。使用网格，您可以轻松地将其复制到 Excel 电子表格中。

当我从 Oracle 数据库表中选择数据时，我必须格式化每一列，但是当我执行时`select * from table`，我得到了一些非常不可读的东西。

我正在使用 SQL 开发人员。有没有办法以更友好的方式检索数据？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:30:48.390

使用`Run Statement`命令（绿色箭头或 Ctrl+Enter）。如果要导出数据，可以右键单击表格并选择`Export..`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:05:34.747

首先，SQL Developer 允许您将选定的数据导出为多种格式，包括“新”XLSX 电子表格格式。所以你真的不需要担心格式化。
但是如果你想自己做，你可以尝试选择很容易转换为Excel电子表格的CSV格式的数据。像这样的东西：

```
SELECT '"' || column1 || '","' || column2 || '"'
FROM   table
WHERE  ... 
```

您可能希望将日期转换为某种通用格式（如 YYYY-MM-DD），如果文本包含双引号，则需要用双引号括起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T13:25:38.327

您可能需要考虑使用 Toad for Oracle，免费版本为您提供了以网格格式查看数据的选项，您还可以将其导出到 Excel 或 csv 中。

# json - 使用 ExtJS 加载存储时出错

> ID：10599325
> 
> 赞同：0
> 
> 时间：2012-05-15T10:59:00.617
> 
> 标签：json, extjs

```
Ext.define('Olvldefnition', {
    extend: 'Ext.data.Model',
    fields: [
        {
                        name : 'defKey'
        },
        {
            name : 'defStructKey',
            type : 'int'
        },
        {
            name : 'defLevelNo',
            type : 'int'
        }, {
            name : 'defLevelDiscP',
            type : 'string'
        }, {
            name : 'defLevelDiscS',
            type : 'string'
        }, {
            name : 'defSeqNo',
            type : 'int'
        }
    ]
});

var storeDef = Ext.create('Ext.data.Store', {
    id: 'storeDef',
    model: 'Olvldefnition',
    proxy: {
       type: 'jsonp',
       api : {
    read : 'definition/view.action'
},
        reader: {
            type: 'json',
             root: 'data',
             idProperty: 'defKey',
             successProperty : 'success',
             messageProperty : 'message'
        }
 }
}); 
```

这是我的代码，它获取如下 JSON 数据。

```
{
"total":3,
"data":[
{"modifiers":{"status":"A","effstartdate":"2012-04-02 00:00:00.0","effenddate":"2012-04-26 00:00:00.0","updateUser":"ARCSADMIN","updateDate":"2012-04-16 16:04:29.162","remarks":null,"entryDate":"2012-04-07 19:34:28.923","entryUser":"ARCSADMIN"},
"defKey":105,
"defSeqNo":2,
"defStructKey":73,
"defLevelNo":1,
"defLevelDiscP":"Branch",
"defLevelDiscS":"Branch",
"olvstructure":{"modifiers":{"status":"A","effstartdate":"2012-04-06 00:00:00.0","effenddate":"2012-04-27 00:00:00.0","updateUser":"ARCSADMIN","updateDate":"2012-04-06 20:03:43.817","remarks":"Remark","entryDate":"2012-04-06 20:03:37.252","entryUser":"ARCSADMIN"},"olsKey":73,"olsSeqNo":1,"olsLevel":3,"olsSeperator":"-"}},{"modifiers":{"status":"A","effstartdate":"2012-04-02 00:00:00.0","effenddate":"2012-05-23 00:00:00.0","updateUser":"ARCSADMIN","updateDate":"2012-04-30 12:22:12.899","remarks":null,"entryDate":"2012-04-07 19:33:58.405","entryUser":"ARCSADMIN"},"defKey":104,"defSeqNo":1,"defStructKey":73,"defLevelNo":2,"defLevelDiscP":"Dept1","defLevelDiscS":"Dept1","olvstructure":{"modifiers":{"status":"A","effstartdate":"2012-04-06 00:00:00.0","effenddate":"2012-04-27 00:00:00.0","updateUser":"ARCSADMIN","updateDate":"2012-04-06 20:03:43.817","remarks":"Remark","entryDate":"2012-04-06 20:03:37.252","entryUser":"ARCSADMIN"},"olsKey":73,"olsSeqNo":1,"olsLevel":3,"olsSeperator":"-"}},{"modifiers":{"status":"I","effstartdate":null,"effenddate":null,"updateUser":null,"updateDate":null,"remarks":null,"entryDate":"2012-04-19 13:52:04.676","entryUser":"ARCSADMIN"},"defKey":118,"defSeqNo":3,"defStructKey":73,"defLevelNo":3,"defLevelDiscP":"sdasda","defLevelDiscS":"dsd","olvstructure":{"modifiers":{"status":"A","effstartdate":"2012-04-06 00:00:00.0","effenddate":"2012-04-27 00:00:00.0","updateUser":"ARCSADMIN","updateDate":"2012-04-06 20:03:43.817","remarks":"Remark","entryDate":"2012-04-06 20:03:37.252","entryUser":"ARCSADMIN"},"olsKey":73,"olsSeqNo":1,"olsLevel":3,"olsSeperator":"-"}}],"message":"view","success":true} 
```

但它显示这样的错误

```
SCRIPT1004: Expected ';' 
view.action?_dc=1337079455042&page=1&start=0&limit=25&callback=Ext.data.JsonP.callback1, line 1 character 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:32:24.993

也许问题是代理`type: 'jsonp'`？

因为在您的示例中，我只看到`json`not`jsonp`并且您的 api url 在同一台服务器上，所以为什么不使用`json`而不是`jsonp`？

例子：

```
var storeDef = Ext.create('Ext.data.Store', {
    id: 'storeDef',
    model: 'Olvldefnition',
    proxy: {
        type: 'ajax',
        api : {
            read : 'definition/view.action'
        },
        reader: {
            type: 'json',
            root: 'data',
            idProperty: 'defKey',
            successProperty : 'success',
            messageProperty : 'message'
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:19:07.333

我认为您在某处遇到了简单的语法错误。它与解析 JSON 数据无关。

# razor - 如何从 sql 数据表中使用 MVC Razor 视图引擎制作动态无序列表？

> ID：10599333
> 
> 赞同：1
> 
> 时间：2012-05-15T10:59:19.477
> 
> 标签：razor

我有一张桌子像：

```
MenuTreeID      ParentID   MenuName
----------      --------   --------
1                0         Menu No 1
2                1         Menu No 1.1
3                1         Menu No 1.2
4                3         Menu No 1.2.1
5                3         Menu No 1.2.2
6                0         Menu No 2
7                6         Menu No 2.1
8                6         Menu No 2.2
9                1         Menu No 1.3
... ...   ...  ... 
```

现在我需要以下 Unorderlist ：

```
Menu No 1
     Menu No 1.1
     Menu No 1.2
          Menu No 1.2.1
          Menu No 1.2.2
     Menu No 1.3
Menu No 2
     Menu No 2.1
     Menu No 2.2

... ... ... ... 
```

如何使用 MVC Razor 视图引擎编码（cshtml 编码）获得它？我尝试以下代码：

```
<ul>   
@foreach (ESimSolMVC05.Models.MenuTree oItem in Model)
             {
                 <li>                
                    @oItem.MenuName
                    @if (oItem.SubItems.Count > 0)
                    {
                        @ShowSubItems(oItem.SubItems)
                    }
                 </li>
             }
</ul>
@helper ShowSubItems(ESimSolMVC05.Models.MenuTrees oSubItems)
    {
     <ul>
         @if (oSubItems.Count > 0)
         {
             foreach (ESimSolMVC05.Models.MenuTree oTempItem in oSubItems)
             {
                 <li>                 
                    @oTempItem.MenuName
                    @if (oTempItem.SubItems.Count>0)
                    {
                        @ShowSubItems(oTempItem.SubItems)
                    }
                 </li>
             }
         }
     </ul>
 } 
```

这里的子项意味着当我创建我的集合时，我通过 (Select * From Menutree Where ParentID = MenuTreeID) 查询获得子项。我的输出 UnOrder List 是：

```
**Menu No 1
     Menu No 1.1
     Menu No 1.2
Menu No 1.1   (Duplicate)
Menu No 1.2   (Duplicate)

Menu No 2
     Menu No 2.1
     Menu No 2.2
Menu No 1.2.1   (Order not maintain)
Menu No 1.2.2   (Order not maintain)
Menu No 1.3     (Order not maintain)** 
```

# c# - LINQ 字典非独特值

> ID：10599338
> 
> 赞同：1
> 
> 时间：2012-05-15T10:59:42.883
> 
> 标签：c#, .net, linq, list, linq-group

我正在努力尝试编写 LINQ 查询来执行以下操作，

```
public class MyClass
{
    public int ID {get; set;}
    public int Name {get; set;}
    public IEnumerable<string> SomeIEnumerable {get; set;}
} 
```

我正在尝试使用 LINQ 从 DB 查询中创建对象，该查询将返回如下内容，

```
ID    Name     SomeString
0     NameA    "MyValue"
1     NameB    "Value1"
1     NameB    "Value2"
2     NameC    "Value" 
```

LINQ 也很容易编写，

```
from DataRow row in dataSet.Tables[0].Rows
select new MyClass
{
    ID = (int)row["ID"],
    Name = row["Name"].ToString(),
    SomeIEnumerable = new List<string>{ row["SomeString"].ToString() }
}; 
```

棘手的部分是我如何把它变成字典 where dictionary[1].SomeIEnumerable = {"Value1", "Value2"}

一个简单的 ToDictionary 会抛出一个`ArgumentException`

这里的主要问题是我如何处理键不明确的事实，并且能够在临时字典中查找现有值以添加我感兴趣的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:03:00.537

而不是打电话`ToDictionary`，打电话[`ToLookup`](http://msdn.microsoft.com/en-us/library/bb353368)。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:22:10.937

您也可以将您的分组，然后使用 IGrouping 检索组中的项目列表

示例代码

```
 var simulatedData = Enumerable.Range(0,10).Select(x=> new {Key=x%3+1, Index=x}); 
    var dict = simulatedData.GroupBy(x=>x.Key).ToDictionary(x=>x.Key, x=>x.Select(t=>t.Index)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T11:44:52.440

感谢@Tilak的回答是，

```
from DataRow row in dataSet.Tables[0].Rows
group row by new
{
    ID = (int) row["ID"],
    Name = row["Name].ToString()
} into rowGroup
select new MyClass
{
    ID = rowGroup.Key.ID,
    Name = rowGroup.Key.Name,
    SomeIEnumerable =
        from row in rowGroup
        select row["SomeString"].ToString()
}; 
```

# android - 未显示带有 android:layout_weight="1" 的 Android ViewPager

> ID：10599339
> 
> 赞同：1
> 
> 时间：2012-05-15T10:59:42.957
> 
> 标签：android

我想在 ViewPager 中显示滚动视图，并在 ViewPager 下方显示操作按钮。于是我设置`android:layout_weight="1"`了ViewPager，但是没有显示出来，只显示了动作按钮。

ViewPager 的布局如下。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="match_parent"
    android:layout_width="match_parent">

    <android.support.v4.view.ViewPager
        android:id="@+id/viewpager"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:layout_weight="1" />

    <LinearLayout
        android:orientation="vertical"
        android:layout_height="wrap_content"
        android:layout_width="match_parent">

    <TextView
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:paddingBottom="10dp"
        android:text="この記事の投稿者に" />

    <LinearLayout
        android:orientation="horizontal"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:gravity="center">

        <Button
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="メールで問い合わせ" />

        <Button
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:text="電話で問い合わせ" />

    </LinearLayout>
</LinearLayout> 
```

ViewPager 中的布局如下。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_height="match_parent"
    android:layout_width="match_parent">

    <ScrollView
        android:layout_height="match_parent"
        android:layout_width="match_parent"
        android:fillViewport="true">

        <LinearLayout
            android:orientation="vertical"
            android:layout_height="match_parent"
            android:layout_width="match_parent">

            <TextView
                android:id="@+id/title"
                android:layout_height="wrap_content"
                android:layout_width="match_parent"
                android:layout_marginTop="10dp"
                android:layout_marginBottom="10dp"
                android:textSize="21sp" />

            <ImageView
                android:id="@+id/image"
                android:layout_height="200dp"
                android:layout_width="200dp"
                android:layout_marginTop="10dp"
                android:layout_marginBottom="10dp"
                android:layout_gravity="center" />

            <TextView
                android:id="@+id/price"
                android:layout_height="wrap_content"
                android:layout_width="wrap_content"
                android:layout_marginTop="10dp"
                android:layout_marginBottom="10dp"
                android:textSize="34sp"
                android:textColor="#FF0000" />

            <TextView
                android:id="@+id/text"
                android:layout_height="wrap_content"
                android:layout_width="match_parent"
                android:layout_marginTop="10dp"
                android:layout_marginBottom="10dp"
                android:textSize="21sp" />

        </LinearLayout>
    </ScrollView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:04:45.650

当您在布局中使用权重时，您需要使用“0dp”的高度或宽度，具体取决于方向

```
<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_height="0dp"
    android:layout_width="match_parent"
    android:layout_weight="0.8" />

<LinearLayout
    android:orientation="vertical"
    android:layout_height="0dp"
    android:layout_width="match_parent"
    android:weight="0.2">

<TextView
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    android:paddingBottom="10dp"
    android:text="この記事の投稿者に" />

<LinearLayout
    android:orientation="horizontal"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:gravity="center">

    <Button
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="メールで問い合わせ" />

    <Button
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="電話で問い合わせ" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:10:58.040

这应该可以解决问题：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_height="match_parent"
android:layout_width="match_parent">

<android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:layout_weight="0" />

<LinearLayout
    android:orientation="vertical"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    android:layout_weight="1">
</LinearLayout>
</LinearLayout> 
```

# windows-phone-7 - windows phone 中的死机识别是如何进行的

> ID：10599342
> 
> 赞同：1
> 
> 时间：2012-05-15T10:59:52.037
> 
> 标签：windows-phone-7, notifications, push-notification, mpns

windows phone 在使用 micosoft 推送通知服务时如何识别死机？mspn 是否存储有关此类设备的信息？应用程序是否可以检索列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T16:37:39.447

Uri 通道可能会过期。这就是为什么您应该定期从客户端检查和刷新它们的原因。

如果通道不再有效（当应用程序长时间不使用并且 URI 过期时会发生这种情况），当您尝试发送消息时，您将在响应中收到错误消息。
您应该使用此方法来检测不再有效的 URI。

在不发送消息的情况下，无法获取不再有效的 URI 列表或测试有效性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T23:24:44.220

无法向服务器询问任何过期的通知渠道，但是如果您在尝试（从您的服务器）发送通知时查看从 MS 服务返回的响应代码，您将能够确定是否频道已过期。如果您查看[Windows Phone 的推送通知服务响应代码，](http://msdn.microsoft.com/en-us/library/ff941100%28v=vs.92%29.aspx "Windows Phone 的推送通知服务响应代码")您会注意到，基本上，如果您`404 Not Found`从服务中获得回复，那么通道已经过期，您应该停止向它发送。处理其他情况也是值得的。例如。正确处理`200 OK`/`QueueFull`消息允许您通过暂停该订阅的通知一段时间来减轻服务器上的工作量。

# arguments - Python 中可选参数的默认值：

> ID：10599346
> 
> 赞同：3
> 
> 时间：2012-05-15T11:00:01.427
> 
> 标签：arguments, python

我有以下方法：

```
def get_data(replace_nan=False):
    if replace_nan is not False
        data[numpy.isnan(data)] = replace_nan
        return data
    else:
        return data[~numpy.isnan(data)] 
```

因此，如果`replace_nan`为 False，我们返回一些数据数组但删除`NaN`s，如果是其他，我们将`NaN`s 替换为参数。

问题是，我可能想`NaN`用`False`. 或者别的什么，为了这个。最pythonic的方法是什么？这：

```
def get_data(**kwargs):
    if "replace_nan" in kwargs:
       ... 
```

有效，但在语义上很难看（因为我们真的只对一个关键字参数感兴趣，`replace_nan`）有什么建议如何处理这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:01:24.280

通常人们使用`None`默认值，然后检查`is not None`.

如果您也需要允许`None`，请使用虚拟对象：

```
__default = object()
def get_data(replace_nan=__default):
    if replace_nan is __default:
        ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:25:30.400

numpy 将数组内的 False 评估为 0：

```
 >>>np.array([False,True,2,3])
    array([0, 1, 2, 3]) 
```

所以这可能不是你想要发生的。

```
 def get_data(replace_nan=False):
       if replace_nan:
          return np.where(np.isnan(data),replace_nan,data)
       else:
          return data[~numpy.isnan(data)] 
```

numpy.where 函数使用您的条目为 NaN 的索引构建一个数组。它在那里用replace_nan替换条目，在其他任何地方它都保留条目。

从[手册页](http://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html)：

```
numpy.where(condition[, x, y])
Return elements, either from x or y, depending on condition. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T11:48:17.053

我想将此作为评论放在 ThiefMaster 的答案下方，但不允许在评论中格式化，所以...：

如果您担心命名空间混乱，您可以在定义函数后使用一些技巧<code>del 变量。

```
__default = object()
def get_data(replace_nan=__default, __default=__default):
  if replace_nan is __default:
    ...
del __default 
```

或者：

```
__default = object()
def get_data(replace_nan=__default):
  if replace_nan is get_data.default_replace_nan:
    ...
get_data.default_replace_nan = __default
del __default 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T14:32:48.707

避免 ThiefMaster 方法混乱的另一种方法是：

```
def get_data(replace_nan=object()):
  if replace_nan is get_data.func_defaults[0]:
    ... 
```

但是它使用了可能不那么便携的python interna（pypy/stackles/next version/…）。

# python - 如何使用 Python 处理 URL

> ID：10599347
> 
> 赞同：0
> 
> 时间：2012-05-15T11:00:06.737
> 
> 标签：python, url

我有以下代码（doop.py），它剥离了所有“废话”html脚本的.html文件，只输出“人类可读”文本；例如。它将包含一个包含以下内容的文件：

```
<html>
<body>

<a href="http://www.w3schools.com">
This is a link</a>

</body>
</html> 
```

并给

```
$ ./doop.py
File name: htmlexample.html

This is a link 
```

接下来我需要添加一个函数，如果文件中的任何 html 参数表示 URL（网址），程序将读取指定网页的内容而不是磁盘文件。（对于目前的目的，doop.py 将一个以 http:// 开头的参数（在任何字母大小写的混合中）识别为 URL 就足够了。）

我不知道从哪里开始 - 我确定它会涉及告诉 python 打开一个 URL，但我该怎么做呢？

谢谢，

一个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:21:46.397

除了`urllib2`已经提到的其他内容，您可以查看 Kenneth Reitz 的[Requests](http://docs.python-requests.org/en/latest/index.html)模块。它的语法比`urllib2`.

```
import requests
r = requests.get('https://api.github.com', auth=('user', 'pass'))
r.text 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:12:05.153

与大多数pythonic一样：有一个库。

这里需要 urllib2 库

这允许您像打开文件一样打开 url，并像文件一样从中读取和写入。

您需要的代码如下所示：

```
import urllib2

urlString = "http://www.my.url"
try:
    f = urllib2.urlopen(urlString)  #open url
    pageString = f.read()           #read content
    f.close()                       #close url
    readableText = getReadableText(pageString)
    #continue using the pageString as you wish
except IOException:
    print("Bad URL") 
```

更新：（我手头没有 python 解释器，所以无法测试这段代码是否可以工作，但它应该！！）打开 URL 是很容易的部分，但首先你需要从中提取 URL你的 html 文件。这是使用正则表达式（regex's）完成的，不出所料，python 有一个库（re）。我建议您阅读这两个正则表达式，但它们基本上是您可以匹配文本的模式。

所以你需要做的是编写一个匹配 URL 的正则表达式：

> (http|ftp|https)://[\w-_]+(.[\w-_]+)+([\w-.,@?^=%&:/~+#]*[\ w-\@?^=%&/~+#])? 如果您不想通过 url 访问 ftp 资源，请删除“ftp|” 从模式的开始。现在，您可以扫描输入文件以查找与此模式匹配的所有字符序列：

```
import re

input_file_str = #open your input file and read its contents
pattern = re.compile("(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:/~\+#]*[\w\-\@?^=%&amp;/~\+#])?") #compile the pattern matcher
matches = pattern.findall(input_file_str) #find all matches, storing them in an interator
for match in matches :  #go through iteratr
    urlString = match   #get the string that matched the pattern
    #use the code above to load the url using matched string! 
```

应该这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:12:45.930

您可以使用第三方库，例如`beautifulsoup`或 Standard `HTML Parser`。这是以前的堆栈溢出问题。[html解析器python](https://stackoverflow.com/questions/8003173/html-parser-python)

## 其他链接

[http://unethicalblogger.com/2008/05/03/parsing-html-with-python.html](http://unethicalblogger.com/2008/05/03/parsing-html-with-python.html)

## 标准库

[http://docs.python.org/library/htmlparser.html](http://docs.python.org/library/htmlparser.html)

## 性能对比

[http://blog.ianbicking.org/2008/03/30/python-html-parser-performance/](http://blog.ianbicking.org/2008/03/30/python-html-parser-performance/)

解析时需要解析`http`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T11:13:30.967

与其编写你自己的 HTML Parser / Scraper，我个人会推荐[Beautiful Soup](http://www.crummy.com/software/BeautifulSoup/)，你可以使用它来加载你的 HTML，从中获取你想要的元素，找到所有的链接，然后使用[urllib](http://docs.python.org/library/urllib.html)来获取新的链接您可以进一步解析和处理。

# ruby - 在模型中查看逻辑

> ID：10599350
> 
> 赞同：0
> 
> 时间：2012-05-15T11:00:23.340
> 
> 标签：ruby, model-view-controller

我有一个这样的模型：

```
class MyModel
  attr_accessor :size
end 
```

现在我想以人类可读的格式显示大小。我可以通过添加以下代码来做到这一点：

```
class MyModel

  attr_accessor :size

  def size_hr(bytes = nil, counter = -1)
    counter += 1
    bytes ||= size
    if bytes < 1024
      return "#{bytes.round(2)} #{unit_for(counter)}"
    else
      size_hr bytes/1024, counter
    end
  end

  def unit_for(counter)
    case counter
    when 0 then "B"
    when 1 then "KiB"
    when 2 then "MiB"
    when 3 then "GiB"
    end
  end
end 
```

但是我对此感到有些不好，因为我会将视图内容混合到模型中。我正在寻找一种设计模式，这将是做到这一点的正确方法。我读过关于装饰者和演示者的文章，但我认为它们不适合这里。什么是正确的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:28:29.947

您可以使用 Rails View Helpers，这是一种简单直接的方式。恕我直言，帮助者最终会成为各种事情的垃圾抽屉。因此，我们更喜欢使用[Deocrator Pattern](http://en.wikipedia.org/wiki/Decorator_pattern)。做到这一点的好宝石是[draper](https://github.com/jcasimir/drape)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:03:58.620

这是Rails中*Helper 类的目的。*

出于这个原因，Helper 类有时也称为*View Helpers 。*

在文件`/app/helpers/my_model_helper.rb`中，您将定义这个模块（rails 自动混入）。

```
module MyModelHelper

  def size_hr(@my_model, counter = -1)
    counter += 1
    bytes = @my_model.size
    if bytes < 1024
      return "#{bytes.round(2)} #{unit_for(counter)}"
    else
      size_hr bytes/1024, counter
    end
  end

  def unit_for(counter)
    case counter
    when 0 then "B"
    when 1 then "KiB"
    when 2 then "MiB"
    when 3 then "GiB"
    end
  end

end 
```

然后在您看来，您只需像这样调用该方法：

```
size_hr(@myModel) 
```

视图还具有[相对容易编写单元测试](https://www.relishapp.com/rspec/rspec-rails/v/2-1/docs/helper-specs/helper-spec)的优点。

# ios - 遵循字体形状的 iOS UIBezierPath

> ID：10599355
> 
> 赞同：10
> 
> 时间：2012-05-15T11:00:54.410
> 
> 标签：ios, character, uibezierpath

我是一个iOS新手。如何使我成为遵循字母表的 UIBezierPath 说“B”。目标是沿着这条路径跟踪触摸。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-31T12:41:46.223

CoreText.framework 提供了获取单词路径的方法

见[http://www.codeproject.com/Articles/109729/Low-level-text-rendering](http://www.codeproject.com/Articles/109729/Low-level-text-rendering)

Ole Begemann 创建的代码示例。抱歉，我忘记了名为 AnimatedPath 的演示的下载网址。

```
CGMutablePathRef letters = CGPathCreateMutable();

CTFontRef font = CTFontCreateWithName(CFSTR("Helvetica-Bold"), 72.0f, NULL);
NSDictionary *attrs = [NSDictionary dictionaryWithObjectsAndKeys:
                       (id)font, kCTFontAttributeName,
                       nil];
NSAttributedString *attrString = [[NSAttributedString alloc] initWithString:@"Hello World!"
                                                                 attributes:attrs];
CTLineRef line = CTLineCreateWithAttributedString((CFAttributedStringRef)attrString);
CFArrayRef runArray = CTLineGetGlyphRuns(line);

// for each RUN
for (CFIndex runIndex = 0; runIndex < CFArrayGetCount(runArray); runIndex++)
{
    // Get FONT for this run
    CTRunRef run = (CTRunRef)CFArrayGetValueAtIndex(runArray, runIndex);
    CTFontRef runFont = CFDictionaryGetValue(CTRunGetAttributes(run), kCTFontAttributeName);

    // for each GLYPH in run
    for (CFIndex runGlyphIndex = 0; runGlyphIndex < CTRunGetGlyphCount(run); runGlyphIndex++) 
    {
        // get Glyph & Glyph-data
        CFRange thisGlyphRange = CFRangeMake(runGlyphIndex, 1);
        CGGlyph glyph;
        CGPoint position;
        CTRunGetGlyphs(run, thisGlyphRange, &glyph);
        CTRunGetPositions(run, thisGlyphRange, &position);

        // Get PATH of outline
        {
            CGPathRef letter = CTFontCreatePathForGlyph(runFont, glyph, NULL);
            CGAffineTransform t = CGAffineTransformMakeTranslation(position.x, position.y);
            CGPathAddPath(letters, &t, letter);
            CGPathRelease(letter);
        }
    }
}
CFRelease(line);

UIBezierPath *path = [UIBezierPath bezierPath];
[path moveToPoint:CGPointZero];
[path appendPath:[UIBezierPath bezierPathWithCGPath:letters]];

CGPathRelease(letters);
CFRelease(font); 
```

替换“Hello World！” 用“你需要的词”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T06:59:43.623

对于 Quartz2D 中的绘图，我使用一个名为 PaintCode ( [http://www.paintcodeapp.com/](http://www.paintcodeapp.com/) ) 的 OSX 应用程序。它基本上是一个矢量绘图应用程序，可以生成您所做的绘图的石英代码。它实际上非常棒。有一个类似的应用程序叫做不透明度，但我还没有尝试过。

使用此类应用程序，您可以在背景上使用 B 作为指南，并在其上绘制 BezierPath。完成后，只需复制生成的代码并将其粘贴到您的项目中。

希望能帮助到你。

# java - java中的这些注释会抛出什么异常？

> ID：10599356
> 
> 赞同：1
> 
> 时间：2012-05-15T11:01:00.907
> 
> 标签：java, hibernate, jpa, exception-handling, bean-validation

正如标题所说，在以下这些条件下，我的持久化 java 类会引发哪些异常：

```
@Column(name = "USERNAME", nullable=false, unique=true)
private String username;

@Column(name = "PASSWORD")
@NotNull
@Size(min = 5, max = 25)
private String password; 
```

使用`@NotNull`和 和有什么不一样`@Column(nullable=false)`？

我找不到任何解释这一点的 api 文档以及如果`username`为 null 且不是唯一的可能发生的异常类型。如果`password`为空，则抛出的内容少于字符，多于 25 个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:15:25.040

`javax.persistence.Column`用于指定数据库列的详细信息。该`nullable`属性一般只在生成表定义时使用，而不是在运行时用于验证。

`javax.validation.constraints.NotNull`假设启用并配置了验证提供程序，则在运行时用于在持久化数据之前对其进行验证。违规将抛出`ValidationException`.

> `username`如果为 null 且不唯一，则可能发生的异常类型

应用程序本身不会抛出异常，但如果数据库的表定义是从这些注解生成的，则会抛出一些 JPA 异常。

> 如果`password`为空，则抛出的内容少于字符，多于 25 个字符。

`ValidationException`某种形式的A。

# facebook - AS3 Facebook API JSON.encode 编译器错误

> ID：10599358
> 
> 赞同：0
> 
> 时间：2012-05-15T11:01:12.990
> 
> 标签：facebook, actionscript-3, facebook-graph-api

![错误截图](../Images/6c4de53cdc57754b06d3e2554ad85670.png)

尽管我下载了最新的 API，但在编译时出现 JSON.encode 错误，这是一个 Flash 专业项目。

```
 private function connect(id:String):void {  
          Security.loadPolicyFile("https://fbcdn-profile-a.akamaihd.net/crossdomain.xml");
          Facebook.init(id, initHandler);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T14:40:10.930

JSON 现在是 as3 中的一个内在类，如果您使用的是 adobe.com.serialization.JSON，您应该在使用它时指定完整的包，如下所示：

```
com.adobe.serialization.json.JSON.encode(object) 
```

代替

```
JSON.encode(object) 
```

请参阅此处：[http ://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/JSON.html](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/JSON.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:06:48.993

要么您没有将**com.adobe.serialization.json**添加到导入中，要么没有将 as3lib 添加到您的项目中。此外，如果您尝试使用 FlexSDK 4.6 构建您的应用程序，则 JSON 包含在默认包中，但**encode**被重命名为**stringify**并且**decode**被重命名为**parse**

# asp.net-mvc - 如何在 mvc 3 的剃刀视图中隐藏下拉列表？

> ID：10599360
> 
> 赞同：-1
> 
> 时间：2012-05-15T11:01:24.953
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我想根据 asp.net mvc 3 razar 视图中的类属性值隐藏下拉列表

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:05:35.293

您可以将 CSS 类应用于下拉列表：

```
@Html.DropDownListFor(x => x.SelectedItemId, Model.Items, new { @class = "hidden" }) 
```

然后定义隐藏的 CSS 类：

```
.hidden {
    display: none;
} 
```

这个隐藏类当然可以根据视图模型的某些属性值动态应用。例如，您可以编写一个自定义 HTML 帮助器，可以像这样使用：

```
@Html.DropDownListFor(
    x => x.SelectedItemId, 
    Model.Items, 
    Html.GetHtmlAttributes(Model.IsHidden)
) 
```

其中`GetHtmlAttributes`是您可以编写的自定义扩展方法：

```
public static class HtmlExtensions
{
    public static RouteValueDictionary GetHtmlAttributes(bool isHidden)
    {
        if (!isHidden)
        {
            return null;
        }

        return new RouteValueDictionary(new { @class = "hidden" });
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T11:09:40.040

你想简单地完全排除下拉菜单吗？

```
@if (!Model.DontShowDropdown)
{
    @Html.DropDownListFor(....)
} 
```

或者，你想隐藏它吗？

```
Html.DropDownListFor(..., new { "style" = Model.DontShowDropDown ? "display:none" : "" }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:08:37.247

**你可以使用这个前：**

```
@Html.DropDownList("mydropdown", new SelectList(new[] {
    new SelectListItem{ Value = "0",Text="Item1"},
    new SelectListItem{ Value = "1",Text="Item2"},
    new SelectListItem{ Value = "2",Text="Item3"},
    new SelectListItem{ Value = "3",Text="Item4"}
}, "Value", "Text", "2"), new
{
    id = "mydropdown",
    @class = "myddClass",
    style = ""
}) 
```

在 css 添加**#mydropdown**或**.myddClass**，然后你可以添加**display:none;** 在外部 css 中或将其添加到内联 css，如**style = "display:none;"**

# c++ - C++ 中的 QuadTree 或 Octree 模板化实现

> ID：10599362
> 
> 赞同：6
> 
> 时间：2012-05-15T11:01:29.180
> 
> 标签：c++, template-meta-programming, quadtree, kdtree, octree

我将编写一个 KDTree 的模板化实现，它现在只能用作 BarnesHut 实现的 Quadtree 或 Octree。

这里的关键是设计，我想指定树定义为模板参数的维数，然后简单地声明一些常用方法，它们会自动以正确的方式运行（我认为那时需要一些模板专业化）。

我想专门化模板以获得 2^2（四叉树）或 2^3（八叉树）节点。

有人有一些设计理念吗？我想避免继承，因为它限制我进行动态内存分配而不是静态分配。

这里 N 可以是 2 或 3

```
template<int N>
class NTree
{
public:
    NTree<N>( const std::vector<Mass *> &);
    ~NTree<N>()
    {
       for (int i=0; i<pow(2,N); i++)
          delete nodes[i];
    }
 private:
    void insert<N>( Mass *m );
    NTree *nodes[pow(2,N)]; // is it possible in a templatized way?
}; 
```

另一个问题是四叉树有 4 个节点但 2 维，八叉树有 8 个节点但 3 维，即节点数为`2^dimension`。我可以通过模板元编程指定这个吗？我想保留数字 4 和 8，以便循环展开器可以更快。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T11:17:05.770

您可以使用`1 << N`而不是`pow(2, N)`. 这是有效的，因为`1 << N`它是一个编译时常量，而`pow(2, N)`不是一个编译时常量（即使它无论如何都会在编译时被评估）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:14:52.590

如果您使用的是支持的 C++11 编译器，`constexpr`您可以自己编写一个`constexpr`-version`pow`来在运行时进行计算。

# iphone - 在 iPhone 底部添加 StatusBar

> ID：10599363
> 
> 赞同：3
> 
> 时间：2012-05-15T11:01:32.633
> 
> 标签：iphone, ios, uikit, uiapplication

我想在 iPhone 底部显示一个状态栏，就像 Gmail 帐户中的状态栏一样，它似乎表明它正在检查邮件。我在此线程中尝试了以下解决方案 [在 iPhone 中的 StatusBar 上添加视图](https://stackoverflow.com/questions/2833724/adding-view-on-statusbar-in-iphone?answertab=active#tab-top)

但是状态栏没有出现，然后我使用相同的代码没有任何修改将其显示在默认状态栏的顶部，它也没有出现。

我还尝试了另一种使用[MTStatusBarOverlay](https://github.com/myell0w/MTStatusBarOverlay)的解决方案，当我尝试将其框架更改为底部时，我在屏幕中间看到了一个黑色矩形

有什么帮助吗？

这是代码

```
// new class i have created
@interface BottomStatusBarOverlay :  UIWindow

@end

@implementation BottomStatusBarOverlay
- (id)initWithFrame:(CGRect)frame {
    if ((self = [super initWithFrame:frame])) {
        // Place the window on the correct level and position
        self.windowLevel = UIWindowLevelStatusBar+1.0f;
        self.frame = [[UIApplication sharedApplication] statusBarFrame];
        self.alpha = 1;
        self.hidden = NO;
        // Create an image view with an image to make it look like a status bar.
        UIImageView *backgroundImageView = [[UIImageView alloc] initWithFrame:self.frame];
        backgroundImageView.image = [[UIImage imageNamed:@"statusBarBackgroundGrey.png"] stretchableImageWithLeftCapWidth:2.0f topCapHeight:0.0f];
        [self addSubview:backgroundImageView];
    }
    return self;
}
@end

// usage in my view controller in a button action
@implementation MainViewController
-(IBAction)showBottomStatusbar:(id)sender {
    BottomStatusBarOverlay *bottomStatusBarOverlay = [[BottomStatusBarOverlay alloc] init];
    bottomStatusBarOverlay.hidden = NO;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T21:18:58.960

您发布的代码显示您的 showBottomStatusbar 方法创建了一个 BottomStatusBarOverlay 实例，但您实际上从未将它作为子视图添加到任何内容。

我不在 iPhone 上使用 Gmail 应用程序。所以，我不确定它的外观或功能。但是，我过去创建了一个通知栏，看起来与您描述的相似。它动画到屏幕底部，显示一条消息三秒钟，然后滑回。我通过将栏添加到应用程序的窗口来实现这一点，这将确保它覆盖应用程序当前显示的任何视图。但是，如果您的应用程序中不需要全局栏，您可以将栏添加到当前处于活动状态的任何视图中。以下是获取应用程序窗口引用的方法：

```
UIApplication* app = [UIApplication sharedApplication];
UIWindow* appWin = app.delegate.window; 
```

要制作动画，您可以使用 animateWithDuration，如下所示：

```
[UIView animateWithDuration:0.3 
                 animations:^ { 
                     // However you want to animate on to the screen.
                     // This will slide it up from the bottom, assuming the
                     // view's start position was below the screen.
                     view.frame = CGRectMake(0, 
                                             winHeight - viewHeight, 
                                             winWidth, 
                                             viewHeight);
                 }
                 completion:^(BOOL finished) {
                     // Schedule a timer to call a dismiss method after
                     // a set period of time, which would probably perform
                     // an animation off the screen.
                     dismissTimer = [NSTimer 
                                     scheduledTimerWithTimeInterval:3
                                     target:globalMessage
                                     selector:@selector(dismiss)
                                     userInfo:nil
                                     repeats:NO];
                 }]; 
```

希望这可以帮助。

# java - 使用 RMI 在远程系统上打开记事本

> ID：10599365
> 
> 赞同：1
> 
> 时间：2012-05-15T11:01:39.877
> 
> 标签：java, ssh, rmi

我正在尝试使用 RMI 在远程系统中打开记事本。是否可以使用 RMI 做到这一点？或者我必须使用 SSH 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:04:29.987

比较 RMI 和 SSH 有点像比较苹果和橘子。RMI 更像是用于通过网络执行请求的通用 API，而 SSH 是用于建立安全 shell 连接的程序，您可以通过该连接发送 shell 命令。

要在远程主机上打开记事本，您可以使用 RMI 或 SSH，因为两者都能够通过网络进行通信。

在任何一种情况下，您都需要在接收端有一个服务器来处理您的命令并为您打开记事本。如果您使用 SSH，您可以随时使用它，以`sshd`守护程序的形式。如果您选择 RMI，我不知道任何预定义的服务器实现。我建议您编写自己的服务器来满足您的特定请求。

# ruby - ROR + 检测 ruby 应用程序正在运行多少端口

> ID：10599373
> 
> 赞同：0
> 
> 时间：2012-05-15T11:01:52.363
> 
> 标签：ruby, ruby-on-rails-3

在我的 ruby​​ on rails 项目中，我必须采取`pull from sql-server to my mysql database.`

当我在端口上运行我的项目时`3000`，当我想拉时它会使系统忙碌。

我想要系统可以检测到的这种方法或方式，ruby 应用程序正在运行多少个端口，如果它不使用如何关闭？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:57:36.933

很难准确理解您的要求，但我假设当您同步数据库时，系统会变得很忙，您无法提供任何页面。这是使用后台作业的完美示例，它允许您在不影响 Rails 应用程序的情况下执行此类任务。想到的两个可以让你做到这一点的宝石是 Delayed_job 和 Resque。下面还列出了用于执行此类操作的出色截屏视频。

[http://github.com/collectiveidea/delayed_job](http://github.com/collectiveidea/delayed_job)

[https://github.com/defunkt/resque/](https://github.com/defunkt/resque/)

[http://railscasts.com/episodes/171-delayed-job](http://railscasts.com/episodes/171-delayed-job)

[http://railscasts.com/episodes/271-resque](http://railscasts.com/episodes/271-resque)

# python - Object-based default value in SQLAlchemy declarative

> ID：10599376
> 
> 赞同：6
> 
> 时间：2012-05-15T11:02:06.310
> 
> 标签：python, sqlalchemy, hook

With SQLAlchemy, it is possible to add a default value to every function. As I understand it, this may also be a callable (either without any arguments or with an optional ExecutionContext argument).

Now in a declarative scenario, I wonder if it is somehow possible to have a default function which is called with the *object* that is being stored. I.e. possibly like so:

```
Base = sqlalchemy.ext.declarative.declarative_base()
class BaseEntity(Base):
    value = Column('value', String(40), default=BaseEntity.gen_default)

    def gen_default(self):
        # do something with self, for example
        # generate a default value using some other data
        # attached to the object
        return self.default_value 
```

Is something like this possible? Or do I have to somehow set up an *before-insertion* hook for this (how?)?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T21:24:14.883

before_insert is documented here:

[http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#sqlalchemy.orm.events.MapperEvents.before_insert](http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#sqlalchemy.orm.events.MapperEvents.before_insert)

examples here:

[http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#mapper-events](http://docs.sqlalchemy.org/en/rel_0_7/orm/events.html#mapper-events)

i.e.

```
from sqlalchemy import *
from sqlalchemy.orm import *
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy import event

Base= declarative_base()

class A(Base):
    __tablename__ = "a"

    id = Column(Integer, primary_key=True)
    data = Column(String)
    otherdata = Column(String)

@event.listens_for(A, "before_insert")
def gen_default(mapper, connection, instance):
    instance.data = "Some default %s" % instance.otherdata

e = create_engine("sqlite://")
Base.metadata.create_all(e)

a = A(otherdata="some other data")
s = Session(e)
s.add(a)
s.commit()

assert a.data == "Some default some other data" 
```

# android - 在Android中为复选框执行全部标记

> ID：10599377
> 
> 赞同：0
> 
> 时间：2012-05-15T11:02:18.997
> 
> 标签：android, checkbox, selectall

我正在开发一个包含许多活动和课程的 android 项目。

在少数几个布局中，我有一个工具，用户可以在其中选择全部标记，以便选中所有复选框。

但是，我面临的问题是我只知道这样做的一种方法（太长了） - 通过为每个现有布局创建一个标记布局，将原始布局代码粘贴到标记布局代码中，然后给出所有复选框已选中。这要求我也为每个布局创建所有取消标记的 xml。

请告诉我一种方法，我可以为 markall 创建一个已选中所有复选框的 xml，然后在单击全部标记时在原始布局之上调用该布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:23:39.570

假设您有以下布局

```
<LinearLayout
   android:id="@+id/checkbox_container"
   ...params>
   <CheckBox ...params/>
   <TextView ...params/>
   <CheckBox ...params/>
   <SomeView ...params/>
   <CheckBox ...params/>
</LinearLayout> 
```

像这样在 Activity 中获取您的 checkBoxLayout

```
LinearLayout container = (LinearLayout)findViewById(R.id.checkbox_container); 
```

像这样迭代容器内的孩子：

```
for (int i = 0; i < container.getChildCount(); i++){
    View v = container.getChildAt(i);
    if (v instanceof CheckBox){
        CheckBox cb = (CheckBox)v;
        // isChecked should be a boolean indicating if every Checkbox should be checked or not
        cb.setChecked(isChecked)
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:38:53.897

```
CheckBox MarkAllCheckBox =
    (CheckBox) findViewById( R.id.MarkAllCheckBox);
MarkAllCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener()
{
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
    {
        if ( isChecked )
        {
            checkBox1.setChecked("true");
            checkBox2.setChecked("true");
            checkBox3.setChecked("true");
            //so on
        }
    }
}); 
```

# php - 保存与 Yii 多对多关系的模型

> ID：10599379
> 
> 赞同：3
> 
> 时间：2012-05-15T11:02:21.273
> 
> 标签：php, yii, many-to-many, relationship

我有 3 个这样的表： User(ID,Name) | 教程(ID, Tutcontent) | 用户教程（ID、IDUser、IDTutorial）。我使用此代码保存模型

```
 $user = User::model()->findByPk(1);
    $tutorial = Tutorial::model()->findByPk(1);
    $userTutorial = new UserTutorial;
    $userTutorial->IDUser = $user->ID;
    $userTutorial->IDTutorial = $tutorial->ID;
    $userTutorial->save(); 
```

它不会在 mydatabase 中保存新记录

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:08:01.473

尝试这个..

```
 $user = User::model()->findByPk(1);
    $tutorial = Tutorial::model()->findByPk(1);
    $userTutorial = new UserTutorial;
    $userTutorial->IDUser = $user->ID;
    $userTutorial->IDTutorial = $tutorial->ID;
    $userTutorial->save(false); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:16:37.400

这是对您的任务非常有用的扩展：[CAdvancedArBehavior](http://www.yiiframework.com/extension/cadvancedarbehavior/)
不要忘记正确定义模型的关系：[关于关系的精彩教程](http://www.yiiframework.com/doc/guide/1.1/en/database.arr)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-03T21:40:02.267

```
$user = User::model()->findByPk(1);
$tutorial = Tutorial::model()->findAll("id=2");     
$user->**RELATION_ALIAS** = $tutorial;
$user->save(); 
```

# nsis - 如何向 NSIS 许可证页面添加标题？

> ID：10599388
> 
> 赞同：0
> 
> 时间：2012-05-15T11:02:51.847
> 
> 标签：nsis

我的 NSIS 许可证页面的顶部看起来很明显：

![在此处输入图像描述](../Images/226d6b8581e2f987fb2779d540d3ebaa.png)

我看不到任何通过正常渠道修改页面标题/副标题的方法。 [`LicenseText`](http://nsis.sourceforge.net/Docs/Chapter4.html#4.8.1.28)看起来很接近，但它似乎只修改了对话框*底部的文本。*

有什么方法可以在页面中添加标题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:45:49.553

如果您使用的是现代 UI，请定义`MUI_HEADERIMAGE_BITMAP`图像的路径（您可以在[MUI 文档](http://nsis.sourceforge.net/Docs/Modern%20UI/Readme.html)中查看。

`HeaderBitmap.nsi`您在MUI2 附带的脚本中有一个示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T19:25:16.143

您必须包含一种语言才能完全初始化 MUI：

```
!include "MUI.nsh"
!insertmacro MUI_PAGE_LICENSE "License.rtf"
!insertmacro MUI_PAGE_COMPONENTS
!insertmacro MUI_PAGE_...
!insertmacro MUI_LANGUAGE "English" 
```

如果您想在标题中使用位图而不是 .exe 图标，那么您应该查看 Seki 谈到的定义...

# asp.net - 打开excel文件的标签

> ID：10599390
> 
> 赞同：1
> 
> 时间：2012-05-15T11:02:55.423
> 
> 标签：asp.net, html, asp.net-controls

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:06:51.143

您的 href 需要不同

像这样的东西

文件：///S:/BettyTest.xlsx

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:07:46.933

您可以使用 Google Document Viewer 查看所有文件

这是要查看的网址

```
http://docs.google.com/gview?url=YOUR_FILE_URL 
```

我不确定它是如何工作的，但它会打开你的文件而不是下载

谢谢

# sql-server - SQL Server 2008 R2 和 SQL Server 2008 R2 RTM 之间的差异

> ID：10599395
> 
> 赞同：1
> 
> 时间：2012-05-15T11:03:20.770
> 
> 标签：sql-server, sql-server-2008, tsql

我想知道这两个版本之间是否有区别？10.50.2500 SQL Server 2008 R2 10.50.1600 SQL Server 2008 R2 RTM

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T11:13:00.297

不同版本的 SQL Server 的定义如下

*   CTP 表示社区技术预览。这意味着您可以使用它，但它不是软件的最终版本，当产品最终发布时，情况可能会发生变化。

*   RTM 意味着发布到制造。

*   SP 是服务包。这意味着该版本的产品更新和错误修复
    。

*   虽然 R2 指的是第 2 版，但它通常包含不能作为服务包的一部分包含的增强功能。[你可以在这里](http://social.msdn.microsoft.com/Forums/en/sqlgetstarted/thread/d83c426a-9b15-48e0-a99f-f14f8d4f8818)
    阅读更多 为了确定你可以[在这里看到的当前版本](http://support.microsoft.com/kb/321185)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T11:07:40.600

10.50.2500.0 实际上是带有**Service Pack 1的 2008 R2**

Service Pack 1 解决了 R2 RTM 中的许多问题 - 有关详细信息，请参阅该 Service Pack 发行说明：

[http://social.technet.microsoft.com/wiki/contents/articles/2973.microsoft-sql-server-2008-r2-sp1-release-notes.aspx](http://social.technet.microsoft.com/wiki/contents/articles/2973.microsoft-sql-server-2008-r2-sp1-release-notes.aspx)

和

[http://support.microsoft.com/kb/2463333](http://support.microsoft.com/kb/2463333)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T07:31:20.817

10.50.2500 SQL Server 2008 R2 - 这是带有 Service Pack 1 的 Sql Server 2008

这里 10.50 代表版本号，2500 代表 Sql serevr Service Pack 级别。

10.50.1600 SQL Server 2008 R2 RTM-这是 sql server R2 RTM 意味着发布到制造商意味着客户可以使用测试版之后的最终版本许可证使用此版本。

微软每三个月发布一次服务包。

# gwt - 将 GWT 单元树打开到特定节点

> ID：10599396
> 
> 赞同：2
> 
> 时间：2012-05-15T11:03:22.123
> 
> 标签：gwt, tree, cell

我有一个文件浏览器类型的应用程序，它由一个显示层次结构的 CellTree 和一个显示当前节点内容的浏览器窗格组成。

应用程序必须处理可能对 CellTree 来说太大而无法有效处理的层次结构，因此浏览器窗格中显示的位置与树中的打开节点没有强耦合。

我希望实现一个按钮，它将打开 CellTree 中的当前浏览位置。我的服务器端数据模型在所有对象上都有父/子引用，因此获取层次结构很简单，但我正在努力将其应用于树。

这是我目前的尝试，它是包含我的树的小部件上的一个方法，并从接收器调用。每个 RecordTreeLevel 对象代表树中的一个级别。

```
public void navigateTo(List<RecordTreeLevelProxy> hierarchy) {
    TreeNode currentNode = tree.getRootTreeNode();

    ListIterator iter = hierarchy.listIterator(hierarchy.size());

    while (iter.hasPrevious()){
        RecordTreeLevelProxy level = (RecordTreeLevelProxy) iter.previous();
        Integer nodeIndex = locateNode(level.getUniqueRef(), currentNode);
        if (nodeIndex != null){
            currentNode = currentNode.setChildOpen(nodeIndex, true, true);
        }
    }
} 
```

这是行不通的，因为在将子节点添加到任何节点之前，循环在其整体中完成。因此，第一级节点按应有的方式打开，但在第二次循环出现时没有任何子节点。

我不禁觉得我遗漏了一些明显的东西，或者以错误的方式做这件事，但我看不到。非常感谢任何帮助（即使是说“别傻了，你不能那样做）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T12:19:33.590

如果您从您**的同步填充数据**，您的代码应该可以工作`TreeViewModel`（前提是按照我的想法进行，即使用between和`locateNode`进行迭代）。`currentNode.getChildValue(i)``i``0``currentNode.getChildCount()`

我在类似的场景中所做的（我实际上是用 a 做的`CellBrowser`）是我使用*层次结构**预加载缓存*（我正在缓存树的各个*分支*的响应）到所选节点，然后运行与您的代码非常相似的代码。如果值在缓存中，则同步运行，否则异步运行（向服务器询问打开的节点的子节点）。*`TreeViewModel`*

 *例如，对于以下树：

```
- A
  +- A1
     +- A1a
  +- A2
     +- A2a
     +- A2b
- B
  +- B1
  +- B2 
```

如果应该预先选择 A2a 节点，我首先加载根分支、`A`分支，然后是`A2`分支：

```
<root> -> [ A, B ]
A      -> [ A1, A2 ]
A2     -> [ A2a, A2b ] 
```

这样，我确信我`TreeViewModel`的节点会同步运行`<root>`，`A`并且`A2`.

然后只有我运行`setChildOpen`代码。因为`TreeViewModel`这些节点是同步的，所以`setChildOpen`返回一个非空值。*

# php - ZendFramework - 为什么 isValid 的结果总是失败？

> ID：10599397
> 
> 赞同：1
> 
> 时间：2012-05-15T11:03:29.510
> 
> 标签：php, zend-framework, zend-validate

我的帖子数据来自验证码适配器，如下所示：

```
 ["ffck"] => array(2) {
    ["id"] => string(32) "661db3996f5e60e71a60671496ec71a9"
    ["input"] => string(3) "dys"
  } 
```

我的代码现在正在尝试验证，但总是失败：

```
 Zend_Loader::loadClass('Zend_Captcha_Image');      
  $captcha = new Zend_Captcha_Image();
  $captchaArray = array(
    'id' => $post['ffck']['id'], // valid id
    'input' =>     $post['ffck']['input'] // valid input
  );

  if ($captcha->isValid($captchaArray)) {  // FAILs!!!!
    echo "working";
  } else {
    echo "fails";
  }
  Zend_Debug::dump($post) ; // 100% valid ....

  exit; 
```

如何解决？或者是什么导致这个失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:26:02.613

检查生成的 html，你应该只有两个输入：name="captcha[id]" 和 name="captcha[input]"，如果你有第三个 name="captcha"，那么你必须删除 viewhelper在渲染之前来自验证码元素。

前任。：

```
$form->getElement('captcha')->removeDecorator("viewhelper"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:44:33.613

您传递给 CAPTCHA 对象的数组应该只包含两个键，所以请尝试：

```
$captchaArray = $post['ffck'] 
```

而不是你目前正在做的事情。

但是您发布的代码无论如何都无效，因为您从未生成验证码图像。我想您已经减少了代码示例以保持问题简短，因此如果上述修复不起作用，请编辑您的示例以包括生成验证码图像的方式和位置。

# hash - 将相似的字符串散列到相同的散列值

> ID：10599401
> 
> 赞同：4
> 
> 时间：2012-05-15T11:03:51.347
> 
> 标签：hash, similarity

是否有一些散列算法可以将相似的文本文档散列到特定的散列值？

例如，

A = “这是示例文本 1” B = “这是示例文本 2”

A 和 B 需要散列到相同的值。

我做了一些研究并阅读了有关 SimHash 和 LSH 算法的信息。Simhash 会导致哈希冲突，并且可以使用汉明距离来定义相似性。

理想情况下，我想要类似“如果字符串 A 和字符串 B 相差可接受的相似性阈值 (t < tmax)，则将 A 和 B 哈希为相同的哈希值。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:18:19.290

一个明显的选择是使用[Soundex](http://en.wikipedia.org/wiki/Soundex)或其变体之一（取决于这些词的语言）。

你没有指定你需要这个。

*   如果您需要创建某种哈希表变体，将相似的字符串放在同一个存储桶中，soundex 变体可以工作，但您需要考虑到可能发生冲突的可能性。
*   如果您只需要说明两个字符串的相似程度，您还可以查看一个名为 Simil 的算法；请参阅[此链接](http://www.accessmvp.com/tomvanstiphout/simil.htm)，或拼写检查相关算法。

# sql - 多级联路径

> ID：10599404
> 
> 赞同：1
> 
> 时间：2012-05-15T11:04:07.103
> 
> 标签：sql, sql-server

我有多个级联路径错误的问题。这是我的表：

**表（公司）**
公司代码（PK）
....

**表 (Aircraft)**
AircraftRegistration (PK)
OwnerCode (FK to CompanyCode)
OperatorCode (FK to CompanyCode)
....

当我更新公司的主键时，我只想更新飞机表中的 ownercode 和 operatorcode 外键。

解决这个问题的正确方法是使用触发器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:35:39.013

您可以将[ON UPDATE CASCADE](http://msdn.microsoft.com/en-us/library/ms186712%28v=sql.100%29)添加到您的外键定义中，然后如果引用的键（即 Companies.CompanyCode）发生更改，值将自动更新。

**编辑：**但是正如您在评论中指出的那样，这不适用于具有两个外键引用同一列的表，因此对于这些情况，您必须使用触发器或以“受控”方式进行所有更新，例如通过更新引用列的存储过程。哪种方法更好取决于您的应用程序设计和数据库的使用方式。

# php - PHP 中 printf() 函数的用途是什么？

> ID：10599405
> 
> 赞同：14
> 
> 时间：2012-05-15T11:04:07.913
> 
> 标签：php, printf

这似乎是一个非常愚蠢的问题，但是`printf()`PHP 中存在该函数的原因是什么？

在我看来， using`echo`将获得完全相同的结果，如果您在一行上输出多个变量，您不会感到困惑（真的，您可以使用`%1$s`而不是 just `%s`，但它仍然可以声明了一些变量，弄得一团糟）。

我知道您也可以定义变量的类型，而无需在输出字符串之前对其进行修改，但对我而言，这似乎不足以阻止创建函数。

也许我错了，也许我遗漏了一些明显的东西，但如果有人能帮助我理解它为什么存在（这样我就知道我是否应该真的使用它！）我会很感激它。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-15T11:08:36.963

`echo`是语言结构，`printf`是函数。这意味着您将无法以`echo`与`printf`.

**这不仅仅是个人品味**

查看这两个功能的手册页：

*   回声： http: [//php.net/manual/en/function.echo.php](http://php.net/manual/en/function.echo.php)
*   printf： http: [//php.net/manual/en/function.printf.php](http://php.net/manual/en/function.printf.php)

那里讨论了这个主题，例如，您不能`echo`使用变量函数调用。此外，他们获取和管理输入的方式也不同。如果您不需要您应该使用提供的参数**FORMATTING**（它会稍微快一些）。`printf``echo`

## 例子

我再次强调一些关键词：**formatting**和**function**。使用`printf`is 不是连接字符串或从占位符构建字符串，而是使用自定义格式（可能来自配置、用户输入或其他任何内容）来完成。

我写了一些代码来解释我的意思（我发布的链接中的原始来源）。

此代码无效，`echo`不是函数，因此它不会返回打印值（您可以使用`print`or `sprintf`，但`print`不提供字符串连接）。

```
($some_var) ? echo 'true' : echo 'false'; 
```

以下代码打印格式化字符串，在这种情况下，格式来自文字变量，但它可能来自（例如）GET 请求或其他任何内容。您可以使用`echo`从配置中获取的格式字符串重写它吗？

```
%format = "%'.-15.15s%'.6.6s\n";
printf($format, $heading1, $value1); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-15T11:07:27.713

printf() 是 C 的 printf() 函数的一个端口，因此有编写 C 代码背景的人更熟悉语法并更喜欢它。然而，大多数开始使用 PHP 的人都觉得它相当混乱。

为了比较：

```
$query = sprintf("SELECT * FROM users WHERE user='%s' AND password='%s'",
        mysql_real_escape_string($user),
        mysql_real_escape_string($password)); 
```

（我使用了 sprintf()，它与 ​​printf 相同，但它实际上不会打印字符串，它只是返回它）

* * *

```
$query = "SELECT * FROM users WHERE user='" . mysql_real_escape_string($user) . "' AND password='" . mysql_real_escape_string($password) . "'"; 
```

这只是一个偏好问题！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-10-15T02:04:53.983

**这是关于分离静态字符串和格式以及数据。**

我所知道的每一种编程语言都鼓励这种分离，因为：

*   **程序员的意图更加清晰和强制**

    *意图很明确*：当您阅读本文时，您知道每个字段等待什么类型：

    ```
     printf("a: %.2f, b: %s, c: %d", $a, $b, $c) 
    ```

    *强制执行意图*：愚蠢的类型错误是有限的（至于安全问题）。

*   **它更安全**

    因为它限制了意外元字符串的愚蠢注入：

    ```
     $avg = 3.1415;
       // $avg = '3</td><a href="http://www.badsite.com">pawned!</a>';
       printf("average: %.2f", $avg); 
    ```

    SQL中的情况更糟......

*   **通常更容易阅读**

    Appart 比你对作者的意图有更多的线索，字符串显然是在一个独特的清晰块中。数据一一列明。您不会在所有地方过度使用`"`,`.`之类的东西。

*   **它非常强大**

    我很想知道您将如何在没有以下内容的情况下执行以下操作`printf`：

    ```
     printf("%.2f %5d", $v1, $v2); 
    ```

*   **这是某种编程标准**

    许多其他编程语言（C、C++、Java、Python、Bash...）将具有类似的`printf`格式和处理字符串的方式。所以你知道它对你有好处，对于那些已经知道的人来说，它更容易。因此，在这个主题上到处都有大量的文档和教程，还有一个维基百科页面：[打印格式字符串](http://en.wikipedia.org/wiki/Printf_format_string)

*   **字符串可以自动从您的数据中分离出来**

    这意味着它可用于翻译或语法校正。

**您会发现类似的问题：**

*   mysql 中的prepared statements 现在`mysql_query`在php 5.5 中被弃用，以支持prepared statements。
*   所有模板语言：您的模板通常使用不同的语言，而另一端的数据则呈现模板。
*   维基百科涵盖了更一般的主题：[字符串插值](http://en.wikipedia.org/wiki/String_interpolation)

**最后一个精度：**

`echo`无非就是输出一个字符串。并`printf`进行字符串插值，并输出一个字符串。

所以公平地说，我们在这里比较的是通过*字符串连接*和*字符串插值*构建字符串。因为用 . 输出字符串并没有错`echo`。所以这不是关于`echo`你如何制作你的字符串。即使像这样使用，您也在进行*字符串插值*`echo`：

```
echo sprintf("avg: %.3f", $avg); 
```

但是，那么，最后一种形式和：

```
printf("avg: %.3f", $avg); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T11:08:42.937

`printf`可能存在是因为 PHP 是在 C 中创建的，并且`printf`传统上用于在 C 中输出格式化的字符串。 `printf`实际上可以做更多的事情，而不是`echo`因为它可以输出各种格式的变量，包括到某些位置的小数，甚至可能更多。

话虽如此，您可以使用 PHP 函数的某种组合来做任何可以做的事情`printf`，并且根据您的背景可能更有意义。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T00:56:49.873

我只是解释一下我做了什么，以便您有一个明显的区别，我不是 PHP Pro，所以也许我错了，有更好或更简单的方法，而且我的示例可能对您没有那么有用出色地。

我将每个要翻译的字符串传递给一个函数，它会根据源字符串和当前语言返回翻译后的字符串，这样它就会翻译：

> "这只猫有 %d 只小猫。" （英语）<=>“Katua %d kume ditu。” （尤斯克拉）

事实是，无法翻译回显的拆分字符串，因为数字前面的部分对于每种语言都不相同，因此必须将其翻译为“单个实体”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T11:07:44.903

它是 PHP 语言继承的 C 的遗产

功能[http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-15T11:10:49.850

printf 以不同的方式接受输入：您可以提供格式字符串，然后列出所有必需的输入（就像在 C/C++ 中一样）。

'echo' 和 'print' 只接受字符串并且更容易使用。

你的愿望，你的风格:)

**不是那个：**

正如其他人所说，echo 是一种语言结构，而 printf 是一个真正的函数，你可以用 printf 做很多事情。

来自 C/C++ 背景的人知道很多格式字符串，例如 %f、%d、%.2f 等等！！！！！！！他们更喜欢 printf 来回显这种情况，因为这些浮点精度格式和其他格式将触手可及。与 PHP 的内置格式函数相比，他们更喜欢这些。

# powershell - intellij IDEA 有什么好的 PowerShell 插件吗？

> ID：10599407
> 
> 赞同：9
> 
> 时间：2012-05-15T11:04:13.987
> 
> 标签：powershell, intellij-idea, ide, powershell-2.0

我们正在开发一种用 Java 编写并调用 PowerShell 脚本的产品。我们的测试项目结合了 JUnit 和 PowerShell 脚本（数千行）。为了编写脚本，我们使用另一个编辑器，然后将脚本剪切并粘贴到 IntelliJ IDEA（我不是在谈论修复损坏的脚本）。当然，这是一种可笑的工作方式。

有没有为 IntelliJ IDEA 开发 PowerShell 插件的计划？对于我们的团队来说，这是非常重要和有用的。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2017-04-07T23:11:23.043

> 还没有，但是有一个用于语法高亮的 XML。[https://youtrack.jetbrains.com/issue/IDEABKL-6738#comment=27-2092679](https://youtrack.jetbrains.com/issue/IDEABKL-6738#comment=27-2092679)上的安装说明

请在 JetBrains 错误跟踪器中提出您的问题 - [https://youtrack.jetbrains.com/issue/IDEABKL-6738](https://youtrack.jetbrains.com/issue/IDEABKL-6738)

# embedded - mplab 或 picc 编译器的 HPDPIC 可移植性

> ID：10599410
> 
> 赞同：0
> 
> 时间：2012-05-15T11:04:25.420
> 
> 标签：embedded

代码是用 HPDPIC 编写的（由我的高级同学编写）。现在我需要对其进行一些更改。但是在 HPDPIC 中更改参数非常困难（HPDPIC 是相当老的编译器，我不明白如何使用它，因此想到在另一个知道的编译器中更改代码）。

因此，在进行任何更改之前，我按原样复制了代码，以查看它是否与我的任何一个编译器（mplab 或 ccs picc）兼容。我做了必要的语法级别更改，但它仍然在目标文件中显示错误。

HPDPIC 上的 C 代码是否可以在另一个编译器上工作（当然还有一些语法更改）？

# php - 是否可以将unity3d与php结合起来？

> ID：10599412
> 
> 赞同：3
> 
> 时间：2012-05-15T11:04:28.030
> 
> 标签：php, unity3d

我想使用 php 构建网络浏览器游戏。我需要图形，所以我在网上搜索并找到了通过搅拌机设计 3d 模型的选项，并且可以选择将模型及其对象传输/导出到网络。直到这里对我来说非常好。问题是，是否有使用 php 控制对象和模型的选项？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:17:20.963

是的，您可以使用 Tempests 的 Web 套件：http: [//forum.unity3d.com/threads/17674-Unity-Web-Suite-](http://forum.unity3d.com/threads/17674-Unity-Web-Suite-(Examples-Tutorials) (Examples-Tutorials )

向下滚动到 PHPHandler ;)

# iphone - 在另一个循环内循环

> ID：10599416
> 
> 赞同：0
> 
> 时间：2012-05-15T11:04:41.990
> 
> 标签：iphone, objective-c, ios, xcode

我有这个代码：

```
//Value of userCount is 25
auxCount = 0;
for (int y_axis=0; y_axis<=8; y_axis++)  //ROWS
    {
        for (int x_axis=0; x_axis<=2; x_axis++) //COLUMNS
        {
            if (auxCount<userCount) {     
                NSLog(@"auxCount: %i\n",auxCount);
                NSLog(@"userCount: %i\n\n",userCount);
                UIButton *btn=       [[UIButton alloc] initWithFrame:CGRectMake(16+100*x_axis,115.0*y_axis,88.0 ,88.0)];
                UILabel *userLabel = [[UILabel alloc] initWithFrame:CGRectMake(16+100*x_axis,90+115.0*y_axis, 88.0, 15.0)];
                userLabel.textAlignment = UITextAlignmentCenter;
                userLabel.text = mensaje;

                btn.backgroundColor=[UIColor groupTableViewBackgroundColor];
                [scrollViewUsers addSubview:btn];
                [scrollViewUsers addSubview:userLabel];

                auxCount++;

            }
        }
    } 
```

有了这个，我想要一个 3 列和 X 行的矩阵，但只显示 3 行，第三行只显示 1 个按钮。并在 Debug 区域出现： auxCount: 0 userCount: 25

辅助计数：4 用户计数：25

辅助计数：8 用户计数：25

辅助计数：12 用户计数：25

辅助计数：16 用户计数：25

辅助计数：20 用户计数：25

辅助计数：24 用户计数：25

auxCount 以 4 为单位递增 4。我认为这是因为 if 指令仅由第一个 for 循环执行，但我不知道为什么。拜托我需要你的帮忙。

ps：对不起我的英语！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:13:12.450

试试这个 for 循环，就像我在我的应用程序中使用的那样，它对我有用。

根据列数和总数找出行数

```
int r;
float rem = [dao libraryCount] % kCol;
if(rem == 0.0f)
    r = floor([dao libraryCount]/kD);
else
    r = ceil([dao libraryCount]/kD); 
```

`r`如果行`[dao libraryCount`是项目总数并且`kCol`是固定的列数，则这里是数字，它是 3，并且与唯一的区别`kD`相同的`kCol`是它是浮点类型，即在您的情况下为 3.0

然后使用for循环如下

```
for (int row = 0; row < r; ++row)
{
    for (int col = 0; col < kCol; ++col)
    {
       //Your Code to display or any thing
    }
} 
```

使用`auxCount`此代码

```
int index = (row * kCol) + col;
        if(index < [dao libraryCount])
        {
            //Your Code to display or any thing
        } 
```

将其放在两个`for`循环中，而不是`++` 仅使用更改两个循环并用适当的变量`for`替换条件`if`

享受编码 :) 祝你好运

**需要任何帮助只是评论我我很乐意帮助你**

# java - 如何合并 2 个 java 程序的输出？

> ID：10599417
> 
> 赞同：0
> 
> 时间：2012-05-15T11:04:43.127
> 
> 标签：java, automation

我在这里有一个有趣的要求，我有一个已经存在的 java 程序，我必须用 java 编写一个自动化程序。我必须将两个程序的合并输出显示为报告。

输出应该有点像这样：

```
Output from program1 after executing line1
Output from myAutomation after executing line1

Output from program1 after executing line2
Output from myAutomation after executing line2

Output from program1 after executing line2
Output from myAutomation after executing line2 
```

我怎样才能在java中实现这一点？AFAIK，每个java程序在JVM中单独运行并且是隔离的，那么这种东西可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:07:01.300

您提出了一个非常模糊的问题，如果没有任何代码，可能很难回答您的问题。

我的建议是您合并这两个应用程序。您将它们视为两个单独的对象，它们都响应一个控制器。如果你不能，那我有点不知所措。另一种选择是，两个程序都写入同一个文件，然后对文件中的输出进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:18:13.483

一种解决方案是使用 log4j 并将现有程序的控制台输出重定向到一个文件，并将其他程序配置为在同一文件上输出。

# salesforce - 使用带有 REGEX 组件的验证规则时出现问题

> ID：10599420
> 
> 赞同：1
> 
> 时间：2012-05-15T11:04:46.903
> 
> 标签：salesforce

我有验证规则不能验证为真，我不明白为什么不是。公式如下：

```
AND( 
$RecordType.Name = "GSM Yfirsýn", 
INCLUDES( mplGSM_Yfirlit_Extras__c , "Netið"), 
REGEX(LEFT( txPayerKennitala__c ,1), "[4-6] {1}") 
) 
```

它查找特定的记录类型，检查多选选项列表 mplGSM_Yfirlit_Extras_c 中的任何选定值是否*包含单词“Netið”，并且还对 txPayerKennitala* _c 中包含的文本字符串的第一个字母是否为4,5 或 6。如果这些都是真的，它应该被触发。但事实并非如此。我认为 REGEX 部分配置错误。我可以这样做 - 使用 LEFT() 操作检查第一个字母，然后将其传递给验证的 REGEX 函数？还是我不在基地？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T14:06:03.660

您的 REGEX`[4-6] {1}`在`{1}`. 它验证有数字 4、5 或 6，以及一个空格，但仅比较 .LEFT 的第一个字符`txPayerKennitala__c`。将您的 REGEX 更改为`[4-6]{1}`，看看是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T09:19:20.123

我让它工作得很好。当我删除空间时，正则表达式部分开始工作。我的问题也源于 INCLUDES 部分。我在多选选项列表中有 5 个不同的值要评估，我必须在它们之间使用 OR 语句。因此，对于任何偶然发现这一点的人来说，这对我来说都是正确的规则公式：

```
AND( 
$RecordType.Name = "GSM Yfirsýn", 
OR( 
INCLUDES(mplGSM_Yfirlit_Extras__c ,"Netið í Símann 1" ), 
INCLUDES(mplGSM_Yfirlit_Extras__c ,"Netið í Símann 2" ), 
INCLUDES(mplGSM_Yfirlit_Extras__c ,"Netið í Símann 3" ), 
INCLUDES(mplGSM_Yfirlit_Extras__c ,"Netið í Símann 4" ), 
INCLUDES(mplGSM_Yfirlit_Extras__c ,"Netið í Símann 5" )), 
REGEX(LEFT( txPayerKennitala__c ,1),"[4-6]{1}") 
) 
```

# .htaccess - CakePHP 2.0：如何将 /details.php?id=1234 之类的 url 重定向到 /articles/show/1234？

> ID：10599421
> 
> 赞同：0
> 
> 时间：2012-05-15T11:04:53.513
> 
> 标签：.htaccess, url, cakephp, redirect

我已经检查了这个：[CakePHP and .htaccess: how to redirect url with query string](https://stackoverflow.com/questions/4006825/cakephp-and-htaccess-how-to-redirect-url-with-query-string)但它对我不起作用。

我在 Google 中有这样的 url：/details.php?id=1234 并希望它重定向到 url /details/1234

有没有办法使用蛋糕重定向：[http](http://book.cakephp.org/2.0/en/development/routing.html#redirect-routing) ://book.cakephp.org/2.0/en/development/routing.html#redirect-routing ？

还是我需要在 htaccess 中执行此操作？如果是，在哪一个？/root/htaccess 还是 /root/webroot/htaccess？

请指教！提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:37:07.200

我的应用程序中有类似的情况，我正在以下列方式处理：

基本上，我使用的 URL 系统与现在不同。书签在 Facebook 和整个网络上......无论如何，人们正在访问我的页面

```
http://www.domain.com/?c=123&a=2261 
```

c=123 指的是文章所属的类别，a=2261 是指迁移到我的新站点的文章 id。现在我的网址如下：

```
http://www.domain.com/article/slug-for-the-article-in-question 
```

我在我的`app_controller.php`

```
function CheckOldUrl(){
    preg_match("/a=(\\d{1,})/ui", $_SERVER['REQUEST_URI'], $matches);
    if(!$matches == NULL){
        $this->redirect('/articles/articleRedirect/'.$matches[1]);
    }
} 
```

然后我在我的文章控制器（articleRedirect）中设置了一个函数来检查数据库中的正确文章，获取它的 slug 并重定向到正确的新文章 url。

```
function articleRedirect($article_id = NULL){
        $this->Article->recursive = -1;
        $slug = $this->Article->findById($article_id);        
        if($slug == NULL){
            $this->Session->setFlash('This article does not exist!','default',array('class'=>'alert_error'));
            $this->redirect('/articles');
        }else{
            $this->redirect('/article/'.$slug['Article']['slug']);
        }
} 
```

* * *

* * *

## **无论如何，对于您，我会建议以下内容，尽管我尚未对其进行测试....**

```
function beforeFilter(){
    ...
    $this->CheckOldUrl();
    ...
}

function CheckOldUrl(){
    preg_match("/id=(\\d{1,})/ui", $_SERVER['REQUEST_URI'], $matches);
    if(!$matches == NULL){
        $this->redirect('/articles/show/'.$matches[1]);
    }
} 
```

# pdf - 为打印机输出创建和缩放 SVG

> ID：10599432
> 
> 赞同：6
> 
> 时间：2012-05-15T11:05:46.500
> 
> 标签：pdf, layout, canvas, svg

我有一个应用程序可以创建一个大约 300 x 150 像素的基本 svg 瓷砖。我需要复制这个图块，这样我就可以在两个 A4 页面或一个 A3 页面上创建一个漂亮的打印输出。所以，基本上，我只是在svg而不是Photoshop/whatever中做页面布局101。

谁能给我任何关于如何开始的指示？目前，我非常天真地这样做：

1.  设置一个大画布，大约 1500 x 1500px
2.  在 JavaScript 中复制磁贴 4 x 6 次
3.  从浏览器打印

这或多或少可以通过，但看起来并不好。设置物理尺寸为 A4 页面的画布是否有帮助？如果我这样做，我就会遇到问题，即图块是我当前使用像素单位创建的复杂图形。即使我这样做，浏览器也可能会忽略画布大小。还是我应该先转换成pdf？如果我这样做，我仍然需要弄清楚如何设置一个可以很好地转换为 pdf 的 svg“页面”。并且有任何工具实际上支持 svg 1.2 页面的东西吗？

请注意，我不能使用 Inkscape，因为我的 svg 代码完全是 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:44:52.637

不要为此使用画布！

SVG 的重点是可缩放的图形。您可以在浏览器中自己缩放 SVG，然后从那里打印。

如果您想缩放 SVG，那么您所要做的就是应用 CSS 缩放：

[http://jsfiddle.net/simonsarris/xYZyf/](http://jsfiddle.net/simonsarris/xYZyf/)

或 SVG 比例：

[http://jsfiddle.net/simonsarris/xYZyf/1/](http://jsfiddle.net/simonsarris/xYZyf/1/)

# android - Android View 扩展类强制关闭错误

> ID：10599433
> 
> 赞同：1
> 
> 时间：2012-05-15T11:05:56.840
> 
> 标签：android

我正在使用绘图应用程序。我是 Draw View Class Extends View for Draw below For Draw.java 类：

```
package com.draw;
import java.util.ArrayList;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;

import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.ImageView;

public class DrawView extends View implements OnTouchListener {
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint       mPaint;   
    private ArrayList<Path> paths = new ArrayList<Path>();
    private ArrayList<Path> undonePaths = new ArrayList<Path>(); 

    private Bitmap im;
    public DrawView(Context context) 
    {
        super(context);
        setFocusable(true);
        setFocusableInTouchMode(true);      
        this.setOnTouchListener(this);
        mPaint = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFFFFFFFF);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(6);
        mCanvas = new Canvas();
        mPath = new Path();
        paths.add(mPath);

        im=BitmapFactory.decodeResource(context.getResources(),R.drawable.ic_launcher);

    }               
        @Override
        protected void onSizeChanged(int w, int h, int oldw, int oldh) {
            super.onSizeChanged(w, h, oldw, oldh);
        }

        @Override
        protected void onDraw(Canvas canvas) {            

            for (Path p : paths){
                canvas.drawPath(p, mPaint);
            }
        }

        private float mX, mY;
        private static final float TOUCH_TOLERANCE = 4;

        private void touch_start(float x, float y) {
            mPath.reset();
            mPath.moveTo(x, y);
            mX = x;
            mY = y;
        }
        private void touch_move(float x, float y) {
            float dx = Math.abs(x - mX);
            float dy = Math.abs(y - mY);
            if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
                mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
                mX = x;
                mY = y;
            }
        }
        private void touch_up() {
            mPath.lineTo(mX, mY);
            // commit the path to our offscreen
            mCanvas.drawPath(mPath, mPaint);
            // kill this so we don't double draw            
            mPath = new Path();
            paths.add(mPath);
        }

        public void onClickUndo () { 
            if (paths.size()>0) 
            { 
               undonePaths.add(paths.remove(paths.size()-1));
               invalidate();
             }
            else
            {

            }
             //toast the user 
        }

        public void onClickRedo (){
           if (undonePaths.size()>0) 
           { 
               paths.add(undonePaths.remove(undonePaths.size()-1)); 
               invalidate();
           } 
           else 
           {

           }
             //toast the user 
        }

    @Override
    public boolean onTouch(View arg0, MotionEvent event) {
          float x = event.getX();
          float y = event.getY();

          switch (event.getAction()) {
              case MotionEvent.ACTION_DOWN:
                  touch_start(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_MOVE:
                  touch_move(x, y);
                  invalidate();
                  break;
              case MotionEvent.ACTION_UP:
                  touch_up();
                  invalidate();
                  break;
          }
          return true;
    }
} 
```

我在下面提到了我的布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <RelativeLayout
        android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

        <com.draw.DrawView
            android:id="@+id/view1"
            android:layout_width="fill_parent"
            android:layout_height="400dp"
             />

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:text="Undo" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_centerHorizontal="true"
            android:text="Redo" />

    </RelativeLayout>

</LinearLayout> 
```

我的活动类代码如下：

```
package com.draw;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageButton;
import android.widget.Toast;

public class Draw extends Activity {
    DrawView draw_view ;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        //drawView = new DrawView(this);
        setContentView(R.layout.main);
        //drawView.requestFocus();
        try
        {
         draw_view=(DrawView) findViewById(R.id.view1);
        }
        catch (Exception e) {
            // TODO: handle exception
            Toast.makeText(getApplicationContext(), e.toString(),4000).show();
        }
        Button btn_undo=(Button) findViewById(R.id.button1);
        btn_undo.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                draw_view.onClickUndo();
            }
        });
    }

} 
```

Logcat中发生xml加载错误

```
05-15 16:27:01.407: E/AndroidRuntime(1064): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.draw/com.draw.Draw}: android.view.InflateException: Binary XML file line #13: Error inflating class com.draw.DrawView 
```

我的代码有什么问题？

# javascript - 检测另一个框架中存在的按钮的 onClick

> ID：10599434
> 
> 赞同：0
> 
> 时间：2012-05-15T11:05:57.667
> 
> 标签：javascript, jquery

在我的 HTML 页面中，我有两个框架`top_frame`- & `bottom_frame`。里面有`top_frame`个按钮`<input type='button' id='test' value='Test' name='test'>`

现在`bottom_frame`我想检测是否`top_frame`点击了按钮。

现在通常没有框架我可以这样做 -

```
$("#test").click(function(){
   alert("You Clicked Me!!");
}); 
```

我怎样才能在框架中做同样的事情？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:09:34.330

使用 jquery 选择器的第二个参数。它设置上下文...

```
$("#test", window.parent.frames[0].document).click(function(){
   alert("You Clicked Me!!");
}); 
```

# php - LxWxH 的 RegEx 测试模式

> ID：10599436
> 
> 赞同：0
> 
> 时间：2012-05-15T11:06:01.610
> 
> 标签：php, javascript, html, regex

我正在寻找可以验证描述项目尺寸的字符串的正则表达式测试模式。该字符串将被格式化为 LxWxH（例如 20x40x10）。它应该能够接受 x 或 X 作为分隔符。

现在我有： `/.*?([0-9](?:\s+x\s+[0-9]+[HWD])*)\s*\-?;/`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:08:19.677

如果我很好理解：

```
var size = "20x50x68";

/^\d+x\d+x\d+$/i.test(size); 
```

如果 measure 可以有可选的小数部分（例如`23.4x59x80.2633333`），则正则表达式需要是

```
/^\d+(\.\d+)?x\d+(\.\d+)?x\d+(\.\d+)?$/i.test(size); 
```

# iphone - 如何自定义 UITableViewCell 使文本不重叠

> ID：10599439
> 
> 赞同：0
> 
> 时间：2012-05-15T11:06:10.037
> 
> 标签：iphone, objective-c, ios, uitableview

知道如何移动 UITableViewCell 文本，使其不与左侧的小图像重叠吗？

这是一个屏幕截图：

![在此处输入图像描述](../Images/906d1d0aefc6b824ef5acd6599d3a96e.png)

谢谢你的帮助

这是我的 TableCell 代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView1 cellForRowAtIndexPath:(NSIndexPath *)indexPath{ 
    UILabel* nameLb;
    UILabel* detailsLb; 

    UITableViewCell *cell = [tableView1 dequeueReusableCellWithIdentifier:@"log-cell"]; 
    if (cell == nil){
        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:@"log-cell"] autorelease];        

        UIImage* img = [ImgUtil image:[NSString stringWithFormat:@"butList3_%d.png", [[SelectCategory instance] select] + 1 ]];
        UIImageView* bgImage = [[[UIImageView alloc] initWithImage:img ]autorelease];
        [cell addSubview:bgImage ];
        [cell sendSubviewToBack:bgImage ];

        nameLb = [[[UILabel alloc] initWithFrame:CGRectMake(5, 5, 250, 40)] autorelease];
        [nameLb setNumberOfLines:4];
        [nameLb setBackgroundColor:[UIColor clearColor]];
        [nameLb setTextColor:[UIColor whiteColor]];
        [nameLb setTag:NAME_TEXT];
        [nameLb setFont:[UIFont fontWithName:@"Helvetica-Bold" size:15]];
        [nameLb setMinimumFontSize:10];

        [cell addSubview:nameLb];

        //add UIImage
        cell.imageView.image = [UIImage imageNamed:@"shop.png"];

        detailsLb = [[[UILabel alloc] initWithFrame:CGRectMake(5, 45, 250, 20)] autorelease];
        [detailsLb setBackgroundColor:[UIColor clearColor]];
        [detailsLb setTextColor:[UIColor whiteColor]];
        [detailsLb setTag:DETAILS_TEXT];
        [detailsLb setFont:[UIFont fontWithName:@"Helvetica" size:12]];
        [cell addSubview:detailsLb];

    }else {

        nameLb = (UILabel*)[cell viewWithTag:NAME_TEXT];
        detailsLb = (UILabel*)[cell viewWithTag:DETAILS_TEXT];

    }

    ObjectInfo* obj = [myList objectAtIndex:indexPath.row ] ;
    nameLb.text = [obj name];
//    cell.textLabel.textColor = [UIColor whiteColor];
//    cell.textLabel.font = [UIFont boldSystemFontOfSize:17];

    double distance = [ProjUtil getDistanceWithLat1:currentLocation.latitude long1:currentLocation.longitude lat2:obj.location.latitude long2:obj.location.longitude];
    detailsLb.text = [NSString stringWithFormat:@"%.2f miles", [ProjUtil kmToMi:distance]];
//    cell.detailTextLabel.textColor = [UIColor whiteColor];
//    cell.detailTextLabel.font = [UIFont systemFontOfSize:15];

    [cell setSelectionStyle:UITableViewCellSelectionStyleNone];
    [cell setBackgroundColor:[UIColor clearColor]];

    ///[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:09:12.470

（给出我的一个代码，没有修改 sry）

我看不到图像，但您应该创建一个自定义单元格，您可以在方法中设置单元格控件的框架：-

```
-(void)layoutSubviews
{

} 
```

示例代码： -

```
#import <UIKit/UIKit.h>

@interface CustomizedCellProductDetails : UITableViewCell {

    UILabel *sNO;
    UILabel *abcWine;
    UILabel *redWine;
    UILabel *two;
    UILabel *hundred;
    UILabel *fourTwo;
    UILabel *twoOne;
    UIImageView *imgView;

    UILabel *itemNo;
    UILabel *itemName;
    UILabel *itemDesc;
    UILabel *department;
    UILabel *qtyAvailable;

    UIButton *check;

}

@property (nonatomic , retain) UILabel *sNO;
@property (nonatomic , retain) UILabel *abcWine;
@property (nonatomic , retain) UILabel *redWine;
@property (nonatomic , retain) UILabel *two;
@property (nonatomic , retain) UILabel *hundred;
@property (nonatomic , retain) UILabel *fourTwo;
@property (nonatomic , retain) UILabel *twoOne;
@property (nonatomic , retain) UIImageView *imgView;

@property (nonatomic , retain) UILabel *itemNo;
@property (nonatomic , retain) UILabel *itemName;
@property (nonatomic , retain) UILabel *itemDesc;
@property (nonatomic , retain) UILabel *department;
@property (nonatomic , retain) UILabel *qtyAvailable;
@property (nonatomic , retain) UIButton *check;

-(void) clicked;
@end

#import "CustomizedCellProductDetails.h"

@implementation CustomizedCellProductDetails
@synthesize sNO,abcWine,redWine,two,hundred,fourTwo,twoOne,imgView,itemNo,itemName,itemDesc,department,qtyAvailable,check;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {

    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        sNO=[[UILabel alloc] init];
        abcWine=[[UILabel alloc] init];
        redWine=[[UILabel alloc] init];
        two=[[UILabel alloc] init];
        hundred=[[UILabel alloc] init];
        fourTwo=[[UILabel alloc] init];
        twoOne=[[UILabel alloc] init];
        imgView=[[UIImageView alloc] init];

        itemNo=[[UILabel alloc] init];
        itemName=[[UILabel alloc] init];
        itemDesc=[[UILabel alloc] init];
        department=[[UILabel alloc]init];
        qtyAvailable=[[UILabel alloc] init];

        check=[UIButton buttonWithType:UIButtonTypeCustom];
        [check addTarget:self action:@selector(clicked) forControlEvents:UIControlEventTouchUpInside];
        [check setTitle:@"Check" forState:UIControlStateNormal];

        [self.contentView addSubview:sNO];
        [self.contentView addSubview:abcWine];
        [self.contentView addSubview:redWine];
        [self.contentView addSubview:two];
        [self.contentView addSubview:hundred];
        [self.contentView addSubview:fourTwo];
        [self.contentView addSubview:twoOne];
        [self.contentView addSubview:itemNo];
        [self.contentView addSubview:itemName];
        [self.contentView addSubview:itemDesc];
        [self.contentView addSubview:department];
        [self.contentView addSubview:qtyAvailable];
        [self.contentView addSubview:check];

    }
    return self;
}

- (void)layoutSubviews {

    [super layoutSubviews];

    CGRect contentRect = self.contentView.bounds;

    CGFloat boundsX = contentRect.origin.x;

    CGRect frame;

    frame=CGRectMake(boundsX+10, 0, 50, 40);

    sNO.frame = frame;

    frame= CGRectMake(boundsX+70 ,0, 150, 40);

    abcWine.frame = frame;

    frame= CGRectMake(boundsX+230 ,0, 150, 40);

    redWine.frame = frame;

    frame= CGRectMake(boundsX+390 ,0, 50, 40);

    two.frame = frame;

    frame= CGRectMake(boundsX+450 ,0, 50, 40);

    hundred.frame = frame;

    frame= CGRectMake(boundsX+510 ,0, 50, 40);

    fourTwo.frame = frame;

    frame= CGRectMake(boundsX+570 ,0, 50, 40);

    twoOne.frame = frame;

    /************************                      ***********************/

    frame= CGRectMake(boundsX+10 ,50, 100, 200);

    imgView.frame = frame;

    }

-(void) clicked
{

}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated {

    [super setSelected:selected animated:animated];

    // Configure the view for the selected state.
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

还可以更改 uitableviewcell 的 cellForRowAtIndexPath 委托方法中的高度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:09:36.710

在 cellForRowAtIndexPath 中生成单元格时，使用此代码更新标签的创建以正确设置框架

```
nameLb = [[[UILabel alloc] initWithFrame:CGRectMake(bgImage.frame.origin.x + bgImage.frame.size.width + 5, 5, 250, 40)] autorelease];
detailsLb = [[[UILabel alloc] initWithFrame:CGRectMake(bgImage.frame.origin.x + bgImage.frame.size.width + 5, 5, 250, 40)] autorelease]; 
```

这将在图像右侧动态创建您的自定义行文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T11:19:28.080

创建标签时，您将使用以下行定位它们：

```
detailsLb = [[[UILabel alloc] initWithFrame:CGRectMake(5, 45, 250, 20)] autorelease]; 
```

这会设置标签的框架。CGRectMake 是一个为您提供 CGRect 的函数，在本例中为原点 (5,45)，宽度为 250，高度为 20。

如果要将标签向右移动，请增加框架的 x 值（上面的 CGRectMake 调用中的 5）。

# objective-c - 获取特定 Twitter 帐户的所有推文？

> ID：10599441
> 
> 赞同：1
> 
> 时间：2012-05-15T11:06:19.070
> 
> 标签：objective-c

我只想获取特定 Twitter 帐户的所有推文。我想使用下面的 url，但不知道如何获取 Twitter 帐户的 user_id 或 screen_name，我们想要获取其推文。

资源 URL [http://api.twitter.com/1/statuses/user_timeline.format](http://api.twitter.com/1/statuses/user_timeline.format)参数 请求用户时间线时始终指定 user_id 或 screen_name。

有没有人有任何想法或源代码或参考。任何帮助都将是非常可观的。

我正在使用以下函数来获取 200 条推文，但它显示在 NSLog 中

> HTTP 响应状态：403 消息

功能

```
- (IBAction)followOnTwitter:(id)sender
{
    ACAccountStore *accountStore = [[ACAccountStore alloc] init];

    ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

    [accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
        if(granted) {
            // Get the list of Twitter accounts.
            NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

            // For the sake of brevity, we'll assume there is only one Twitter account present.
            // You would ideally ask the user which account they want to tweet from, if there is more than one Twitter account present.
            if ([accountsArray count] > 0) {
                // Grab the initial Twitter account to tweet from.
                ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

                NSMutableDictionary *tempDict = [[NSMutableDictionary alloc] init];
                [tempDict setValue:@"rohit40793982" forKey:@"screen_name"];
                //[tempDict setValue:@"true" forKey:@"follow"];
               // [tempDict setValue:@"683286" forKey:@"user_id "];

                TWRequest *postRequest = [[TWRequest alloc] initWithURL:[NSURL URLWithString:@"http://api.twitter.com/1/statuses/user_timeline.format"] 
                                                             parameters:tempDict 
                                                          requestMethod:TWRequestMethodPOST];

                [postRequest setAccount:twitterAccount];

                [postRequest performRequestWithHandler:^(NSData *responseData, NSHTTPURLResponse *urlResponse, NSError *error) {
                    NSLog(@"%@",urlResponse);
                    tweets = [NSJSONSerialization JSONObjectWithData:responseData
                                                            options:kNilOptions 
                                                              error:&error];
                    NSString *output = [NSString stringWithFormat:@"HTTP response status: %i", [urlResponse statusCode]];
                    NSLog(@"%@", output);
                    [self performSelectorOnMainThread:@selector(displayText:) withObject:output waitUntilDone:NO];

                }];
            }
        }
    }];
} 
```

我没有收到所有推文的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:07:11.570

我认为你的错误在于这条线

```
http://api.twitter.com/1/statuses/user_timeline.format 
```

“.format”是您想要响应的格式。例如，如果您想要 XML，请使用

```
https://api.twitter.com/1/statuses/user_timeline.xml 
```

或者对于 JSON，使用

```
https://api.twitter.com/1/statuses/user_timeline.json 
```

您还需要附加 screen_name 作为查询。例如，要将我的所有推文作为 JSON 格式，请使用

```
https://api.twitter.com/1/statuses/user_timeline.xml?screen_name=edent 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:10:19.863

screen_name 基本上是帐户名称。它是在“@”之后的名称。就像 WOW 的 screen_name 是 @Warcraft。

哦，事实上 .format 是问题所在。您必须指定以下 3 种之一：atom、json 或 xml。（我认为获取用户时间线不允许xml返回，只需阅读API）

由于我是一名 Java 程序员，恐怕我无法再提供帮助了：/

# c# - Xml Reader 读取标签

> ID：10599445
> 
> 赞同：-1
> 
> 时间：2012-05-15T11:06:35.653
> 
> 标签：c#, xml, xmlreader

我必须阅读 xml 文件。我做到了，但我遇到了问题。我有这样的xml

```
 <?xml version="1.0" encoding="windows-1254" ?> 
- <Xm>
- <Products>
  <Product_No>NT-7</Product_No> 
  <Stok>1</Stok> 
  <Product_Details>something</Product_Details> 
  <Desi>0,2</Desi> 
- <Variant>
  <VariantAd>size</VariantAd> 
  <Options>68 cm</Options> 
  </Variant>
  </Products>
- <Products>
  <Product_No>NT-15</Product_No> 
  <Stok>1</Stok> 
  <Product_Details>something</Product_Details> 
  <Desi>0,2</Desi> 
- <Variant>
  <VariantAd>size</VariantAd> 
  <Options>68 cm</Options> 
  <Options>74 cm</Options> 
  </Variant>
  </Products>
  </Xm> 
```

我可以阅读所有内容，但我的问题是我无法单独选择。

```
 <Options>68 cm</Options> 
  <Options>74 cm</Options> 
```

我不能一起读。我需要一起阅读并将它们作为字符串加入。

```
System.Xml.XmlNodeList lst = root.GetElementsByTagName("Product_No");
foreach (System.Xml.XmlNode n in lst)
{
    Product_No.Add(n.InnerText);
}
lst = root.GetElementsByTagName("Stok");
foreach (System.Xml.XmlNode n in lst)
{
    Stok.Add(n.InnerText);
}
lst = root.GetElementsByTagName("Product_Details");
foreach (System.Xml.XmlNode n in lst)
{
    Product_Details.Add(n.InnerText);
}
lst = root.GetElementsByTagName("Options");
foreach (System.Xml.XmlNode n in lst)
{
    Options.Add(n.InnerText);
} 
```

我如何阅读和加入他们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:15:49.647

Linq2Xml 可以让生活更轻松

```
var items = xDoc.Descendants("Products")
    .Select(p => new
    {
        ProductNo=p.Element("Product_No").Value,
        Stok = p.Element("Stok").Value,
        ProductDetails = p.Element("Product_Details").Value,
        Options = String.Join(";",p.Descendants("Options").Select(o=>o.Value))
    })
    .ToArray(); 
```

# sublimetext2 - 有没有办法在 Sublime Text 2 中进行项目特定的包设置？

> ID：10599447
> 
> 赞同：9
> 
> 时间：2012-05-15T11:06:41.767
> 
> 标签：sublimetext2

我已经通过 Sublime Text 2 的包管理器安装了 JSMinifier，我想为特定项目设置编译器设置。

我可以找到如何设置特定于包的设置，并且我知道如何进行特定于项目的设置，但是有没有办法设置特定于项目的包设置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-06-03T23:28:01.440

从 PackageControl试用[ProjectSpecific](http://bitbucket.org/klorenz/projectspecific)包。我刚刚添加了对项目特定包设置的支持。

假设您只想为当前项目打开 scope_hunter.sublime-settings 的“console_log”，然后（在安装 ProjectSpecific 之后）将以下行添加到您的 .sublime-project 文件中：

```
{
    ...
    "settings": {
        "project-specific": {
            "sublime-settings": {
                "scope_hunter": {
                    "console_log": true
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:11:41.417

似乎它不能在本地完成。必须对包进行编程以使用项目特定文件（如 SFTP 那样），但这可能会有所帮助：http: [//yuji.wordpress.com/2011/07/13/sublime-text-2-beta-project-specific -设置/](http://yuji.wordpress.com/2011/07/13/sublime-text-2-beta-project-specific-settings/)

# android - 键盘出现时如何使android视图可滚动？

> ID：10599451
> 
> 赞同：16
> 
> 时间：2012-05-15T11:06:49.370
> 
> 标签：android, android-layout, android-scrollview, android-keypad

我有一些字段（姓名、电子邮件、密码、注册按钮）的视图：

```
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ViewFlipper
        android:id="@+id/viewflipper"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        //Layouts

    </ViewFlipper>

</ScrollView> 
```

当我关注一个edittext字段时，键盘会出现并覆盖视图上的下部字段。所以当键盘出现时我看不到它们。我想知道如何使视图可滚动，以便我可以看到较低的字段。此外，如何使视图自动滚动以使焦点字段可见。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-15T11:11:35.077

您需要`android:windowSoftInputMode="adjustResize"`在 AndroidManifest.xml 文件中包含您的活动的属性 - 然后 Android 应该自动为您调整大小：

```
<activity android:name="..."
          ...
          android:windowSoftInputMode="adjustResize">
    ...
/> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-15T12:13:48.090

我创建了简单的 xml 文件。

**步骤 1**。当键盘出现时，您可以滚动。

**步骤 2**。当您单击文本字段时，它将出现在焦点/键盘上方。

```
<ScrollView android:id="@+id/ScrollView01"
xmlns:android="http://schemas.android.com/apk/res/android"
android:fillViewport="true" 
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<LinearLayout 
    android:orientation="vertical"
    android:layout_width="fill_parent" 
    android:weightSum="1.0" 
    android:layout_height="match_parent"
    android:focusable="true"
    android:focusableInTouchMode="true" 
    android:id="@+id/l_layout">
    <EditText 
        android:layout_height="wrap_content" 
        android:layout_width="match_parent" 
        android:id="@+id/editText1" 
        android:layout_marginTop="100dp">
        <requestFocus></requestFocus>
    </EditText>
    <EditText 
        android:layout_height="wrap_content" 
        android:layout_width="match_parent" 
        android:id="@+id/editText2" 
        android:layout_marginTop="100dp">
        </EditText>
    </LinearLayout> 
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:14:24.653

```
<ScrollView
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >

<ViewFlipper
    android:id="@+id/viewflipper"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <ScrollView 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/scroll_container">
        //Layouts
    </ScrollView>

</ViewFlipper> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-05T18:54:31.570

就我而言，@Aleks G 解决方案不起作用。所以我解决了我的问题

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    >

<ScrollView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:id="@+id/registration_scroll_view"
    android:layout_alignParentTop="true"
    android:layout_above="@+id/btn_register_submit"
    >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:orientation="vertical">

       <!--This comment will be replaced 
           by your focusable views-->

    </LinearLayout>
</ScrollView>

<Button
    android:id="@+id/btn_register_submit"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:background="@drawable/form_action_button_green"
    android:gravity="center"
    android:text="@string/submit"
    />

</RelativeLayout> 
```

# flash - 如何在 Flash Firebug 上运行计时器？

> ID：10599467
> 
> 赞同：1
> 
> 时间：2012-05-15T11:08:19.663
> 
> 标签：flash, actionscript, timer, firebug

> **可能重复：**
> [flashfirebug As3 控制台计时器或 setInterval 不起作用](https://stackoverflow.com/questions/10579309/flashfirebug-as3-console-timer-or-setinterval-not-working)

任何人都知道如何在 flashfirebug Pro 的 ActionScript 3.0 控制台上运行计时器？

```
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.display.Sprite;    

var myTimer = new Timer(1000, 2);
myTimer.addEventListener(TimerEvent.TIMER, timerHandler); //I have typed wrong not "TIMER"
myTimer.start();

function timerHandler(event:TimerEvent){trace("timerHandler: ");} 
```

//但它给出了这个错误：

```
Error #1034: Type Coercion failed: cannot convert r1.deval.rt::FunctionDef@50ef781 to Function. 
```

似乎无法访问此控制台中的计时器。我已询问 o-minds 开发人员，但没有对此作出答复。还尝试从萤火虫回调计时器，但再次没有可用的回调函数......目标是在控制台上执行自动脚本（唯一的方法是使用计时器）。

有任何想法吗？谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:14:05.103

它应该是：

```
myTimer.addEventListener(TimerEvent.TIMER, timerHandler); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:14:41.223

您需要一个类型的计时器声明和 TimerEvent.TIMER 作为您的事件名称：

```
import flash.utils.Timer;
import flash.events.TimerEvent;
import flash.display.Sprite;    

var myTimer:Timer = new Timer(1000, 2);
myTimer.addEventListener(TimerEvent.TIMER, timerHandler);
myTimer.start();

function timerHandler(event:TimerEvent){trace("timerHandler: ");} 
```

我已经用我测试过的有效解决方案更新了我的代码。

# http - 实体签名的 HTTP 标头

> ID：10599469
> 
> 赞同：1
> 
> 时间：2012-05-15T11:08:20.430
> 
> 标签：http, web-standards, dsa

有一个标准标头用于给出 HTTP 请求正文的摘要 ( `Content-MD5`)。

是否有一个常用的标头名称来包含摘要的 DSA 签名（使用 生成`openssl dgst -dss1 -sign <keyfile>`），还是我只需要发明一个特定于应用程序的标头名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:12:27.973

在我看来，您需要发明一个特定于应用程序的标题（快速的谷歌搜索没有发现任何结果），但如果其他人确实使用它，那么最常见的标题可能是类似`X-Content-DSA`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T10:20:15.433

我想我想看看[S/MIME](https://www.rfc-editor.org/rfc/rfc3851#section-3.4)，它是构建加密和/或签名实体主体的标准。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-15T07:41:34.473

有[一个签署 HTTP 消息的提议](https://datatracker.ietf.org/doc/draft-cavage-http-signatures/)。它于 2013 年首次提出，在过去两年中进行了多次修订，希望表明它正在向前推进。

根据该提议，请求发送者可以使用他们选择的算法对所需数量的标头字段和 URL 进行签名。`Authorization`使用具有特定格式的标头添加签名。为了对请求有效负载进行签名，有效负载摘要包含在[HTTP`Digest`标头](https://www.rfc-editor.org/rfc/rfc3230#section-4.3.2)中，并且该标头包含在签名中。

# objective-c - UIDocument saveToURL：导致严重滞后

> ID：10599476
> 
> 赞同：0
> 
> 时间：2012-05-15T11:08:40.773
> 
> 标签：objective-c, ios, cocoa-touch, uidocument

UIDocument`saveToURL:forSaveOperation:completionHandler:`假设是异步的（在文档中，它说它在后台队列上执行此操作），但我的代码在调用它时有 7-10 秒的延迟。

这是代码：

```
NSLog(@"saving image...");
[picDoc saveToURL:[picDoc fileURL] 
 forSaveOperation:UIDocumentSaveForCreating 
completionHandler:^(BOOL success) {

    dispatch_async(dispatch_get_main_queue(), ^{
        if (success) {
            NSLog(@"image save successful!");
            UIImage *thumbnail = [image imageByScalingAndCroppingForSize:CGSizeMake(146, 110)];
            Picture *picture = [[Picture alloc] initWithThumbnail:thumbnail filename:fileName];
            [[set pictures] addObject:picture];

            [self setupPictures];

            [scrollView scrollRectToVisible:((UIView *)[[scrollView subviews] lastObject]).frame animated:YES];
            currentIndex = [[set pictures] count] - 1;
            [self showPicture];

        } else {
            NSLog(@"failed saving image");
        }
        [SVProgressHUD dismiss];
    });

    [picDoc closeWithCompletionHandler:nil];
}];
NSLog(@"exit"); 
```

和控制台：

```
2012-05-15 07:07:27.417 Picventory[5939:707] saving image...
2012-05-15 07:07:34.120 Picventory[5939:707] exit
2012-05-15 07:07:34.740 Picventory[5939:707] image save successful! 
```

为什么异步调用会有这么大的延迟？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:16:36.660

将文件写入磁盘是异步的，但获取文档数据的快照不是。您应该使用 Instruments 中的 Time Profiler 来找出实际需要这么长时间的原因。我猜您可能需要优化您的`contentsForType:error:`（或等效的）方法，但首先要测量！

# sql-server-2005 - 访问在不同服务器上安装 SQL Server 2005 上的 SQL Server 2008 R2 上创建的数据库

> ID：10599485
> 
> 赞同：1
> 
> 时间：2012-05-15T11:09:30.163
> 
> 标签：sql-server-2005, sql-server-2008-r2

我在服务器 A 上托管的 SQL Server 2008 R2 上创建了一个数据库。由于某些奇怪的原因，我可能必须从安装在不同服务器上的 SQL Server 2005 访问该数据库。

问题是，这可能吗，我可以在 SQL Server 2005 上访问 2008 R2 创建的数据库吗？如果是，在这样做的过程中是否会出现我应该预料到的任何问题或问题？

我是整个 SQL Server 和 .Net 世界的新手，我可能没有提供这里需要的所有信息让你们提供答案，所以我事先道歉。请帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:12:42.877

您可以使用SQL Server 2005 Service Pack 2 的[累积更新包 5](http://support.microsoft.com/kb/943656)连接到 2008。

# perl - 安全地从信号处理程序访问共享数据结构

> ID：10599487
> 
> 赞同：4
> 
> 时间：2012-05-15T11:09:35.230
> 
> 标签：perl, signal-handling

我正在尝试确定从为 构建的 perl (v5.14.2) 中的信号处理程序访问公共（读取：在处理程序代码和程序的其余部分之间共享）数据结构是否安全`x86_64-linux-thread-multi`，但目标平台是 solaris11）。

[perlipc](http://perldoc.perl.org/perlipc.html)有以下示例代码：

```
use POSIX ":sys_wait_h"; # for nonblocking read
my %children;
$SIG{CHLD} = sub {
    # don't change $! and $? outside handler
    local ($!, $?);
    my $pid = waitpid(-1, WNOHANG);
    return if $pid == -1;
    return unless defined $children{$pid};
    delete $children{$pid};
    cleanup_child($pid, $?);
};
while (1) {
    my $pid = fork();
    die "cannot fork" unless defined $pid;
    if ($pid == 0) {
        # ...
        exit 0;
    } else {
        $children{$pid}=1;
        # ...
        system($command);
        # ...
   }
} 
```

因此，`%children`从 while 循环和处理程序访问。这似乎没有问题，因为：

1.  不会有两个进程相同`pid`
2.  访问是由`pid`（但我不确定是否`$childer{pid}=1`是原子的和可中断的而不会导致损坏。）

现在，我正在尝试在我的处理程序中做更多的事情：

```
my %categoryForPid;
my %childrenPerCategory;

$SIG{CHLD} = sub {
    # ... acquire pid like above
    my $category = $categoryForPid{$pid};
    $childrenPerCategory{$category}--;
    delete $categoryForPid{$pid};
}

while (1) {
    # ... same as above
    } else {
        $children{$pid}=1;
        my $category = # ... chose some how
        $childrenPerCategory{$category}++;
        $categoryForPid{$pid} = $category;
        # ...
    }
} 
```

这里的想法是：每个孩子都属于某个类别（N 到 1）。我想跟踪每个类别有多少孩子。该信息可能来自`$categoryForPid`，但我认为这也可能是有问题的（例如，当进行计算的子程序在总结时被中断）。

所以我的问题是：

*   我需要以某种方式在这里同步吗？

附带说明：

*   在 perl 5.12 中是否可以嵌套调用信号处理程序，或者它们是否被解释器线性化？

## 更新

除了@goldilocks 和他提出的解决方案发现的问题之外，我现在在更新数据结构以确保“原子性”时阻止信号：

```
my $sigset = POSIX::SigSet->new(SIGCHLD);

sub ublk {
    unless (defined sigprocmask(SIG_UNBLOCK, $sigset)) {
        die "Could not unblock SIGCHLD\n";
    }
}

sub blk {
    unless (defined sigprocmask(SIG_BLOCK, $sigset)) {
        die "Could not block SIGCHLD\n";
    }
}

while (1) {
    # ... same as above
    } else {
         blk;
         $children{$pid}=1;
         my $category = # ... chose some how
         $childrenPerCategory{$category}++;
         $categoryForPid{$pid} = $category;
         ublk;
         # ...
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:48:50.250

对我来说似乎是个坏主意。 **IPC::Semaphore** *可能会*解决这个问题，如果你能让它们在信号处理程序中正常工作——如果控制在处理程序退出之前没有返回，那么你就不走运了。但是，您可以通过锁定父项并让子项等待锁定直到初始化完成来解决此问题；处理程序不涉及信号量。我想你实际上只需要一把锁。反正：

```
my @array = (1..10);
my $x = 'x';

$SIG{'USR1'} = sub {
    print "SIGUSER1\n";
    undef @array;
    $x = '!!';
};

print "$$\n";

foreach (@array) {
    print "$_:\n";
    sleep(2);
    print "\t$x\n";
    print "\t$array[$_ - 1]\n";
} 
```

毫不奇怪，这样做：

```
2482
1:
    x
    1
2:
    x
    2
3:
SIGUSER1
    !!
Use of uninitialized value within @array in concatenation (.) or string at ./test.pl line 42. 
```

暗示如果你此时捕捉到信号：

```
 my $category = # ... chose some how 
```

`$categoryForPid{$pid}`处理程序中将不存在。等等。也就是说，是的，你必须同步。

# javascript - 当我在页面之间切换时，行没有突出显示

> ID：10599490
> 
> 赞同：0
> 
> 时间：2012-05-15T11:09:37.510
> 
> 标签：javascript, jsf, jsf-2

我有这个 JSF 表，其中的行在单击时突出显示：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="DX-57" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="logodiv" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <ui:debug />

                        <!-- The sortable data table -->
                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" binding="#{table}" var="item">
                            <!-- Check box -->
                            <h:column>
                                <f:facet name="header">
                                    <h:outputText value="Select" />
                                </f:facet>
                                <h:selectBooleanCheckbox onclick="highlight(this)" value="#{SessionsController.selectedIds[item.aSessionID]}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="№" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="№" value="№" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{table.rowIndex + SessionsController.firstRow + 1}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>    

                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" >
                                <f:ajax render="@form" execute="@form"></f:ajax>   
                            </h:commandLink>
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                        <h:commandButton value="Delete" action="#{SessionsController.deleteSelectedIDs}" >
                            <f:ajax render="@form" execute="@form"></f:ajax>
                        </h:commandButton>

                        <script type="text/javascript">
                            $("tr").not(':first').hover(
                            function () {
                                $(this).css("background","#707070");
                            }, 
                            function () {
                                $(this).css("background","");
                            }
                        );              

                            function highlight(param) {  
                                var row = jQuery(param).parent().parent().children();
                                row.toggleClass('highlited');
                            }        
                        </script>

                    </h:form>                  

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

    </h:body>
</html> 
```

当我选择一行时，该行突出显示：

![在此处输入图像描述](../Images/7bd4b8f839204d273184f3b8e3fc1807.png)

但是当我移动到其他页面并返回时，选定的行没有突出显示。他们只被检查：

![在此处输入图像描述](../Images/f51d7169c686c16ad579894efeff4a21.png)

也许我需要这个标签中的其他参数：

```
<h:selectBooleanCheckbox onclick="highlight(this)" value="#{SessionsController.selectedIds[item.aSessionID]}" /> 
```

或者我必须修改 JavaScript？我该如何解决这个问题？

PS。我如何修改 JavaScript 以突出显示每个选定的复选框。不只是在从`onclick`事件中调用它的时候？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:52:59.760

我认为当您更改页面并返回时，会重新渲染行，因此所有应用的 css 都会丢失。

您可以考虑使用组件库，例如 Primefaces，它可以开箱即用地处理这些问题。在这里你可以看到演示：

[http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf](http://www.primefaces.org/showcase/ui/datatableRowSelectionRadioCheckbox.jsf)

# javascript - knockoutjs 点击绑定在嵌套的 foreach 中不起作用

> ID：10599494
> 
> 赞同：9
> 
> 时间：2012-05-15T11:10:06.133
> 
> 标签：javascript, jquery, asp.net-mvc-3, knockout.js, knockout-2.0

所以我有一个非常奇怪的问题，即敲除js点击绑定没有附加到锚标签。其他 data-bind="" 有效，但点击绑定无效。

下面你可以看到 HTML 和 viewmodel js 文件的一部分

```
var tag = function (data) {
    this.count = data.Count;
    this.id = data.Id;
    this.title = data.Title;
    this.tagGroup = data.TagGroup;
};
 var tagContainer = function (data) {
    this.tagList = $.map(data.Tags, function (item) { return new tag(item); }); 
    this.letter = ko.observable(data.Letter);
};

var searchViewModel = function(){
   var self = this;

   self.tagContainerList = ko.observableArray([]); 

   self.addFilter = function (tag) { 
    //move tag to active filters and do some more cool stuff here 
    };

};

<div id="modal-all-tags" data-bind="with:searchViewModel">
    <ul data-bind="foreach:tagContainerList">
        <li>
            <span data-bind="text:$data.letter()"></span>
            <ul data-bind="foreach:tagList">
                <li><a href="#" data-bind="click:$root.addFilter"><span data-bind="text:title"></span></a></li>

            </ul>
        </li>
    </ul>

      <a class="close-reveal-modal">&#215;</a>
</div> 
```

基本上它是一个模态弹出窗口，当用户单击页面上的链接时会加载它。我向服务器发送一个请求，它返回一个标签容器列表，每个标签容器都有起始字母和要在字母下方呈现的标签列表，如下所示： A a word 1 a word 2 B b word 1 b word 2 C c单词 1 c 单词 2

等等...

字母正确呈现 A、B、C 并且每个字母都在它们下方呈现正确的标签列表，并且 text:title 正确显示。

除了 addFilter(); 一切正常 我想绑定到 taglist 中的每个链接的函数。浏览器只是跳起来并在 url 中添加一个哈希字符。Firebug 也没有在绑定上显示任何错误。

div 容器具有 with:searchViewModel 的原因是因为整个页面都有一个主视图模型。但这无关紧要，因为它正在项目的所有其他页面上工作。

我唯一能想到的是点击绑定 $root.addFilter 是错误的，但我尝试了 addFilter ，其中萤火虫给出了错误“addFilter is not defined;”

我尝试了 $parent 和 $root。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-15T11:29:11.993

我有一个想法。您的`addFilter`函数需要一个参数 ( `tag`) 但您没有在绑定中传递任何内容：

```
<a href="#" data-bind="click:$root.addFilter"> 
```

这可能是问题吗？

也许是这样的：

```
<a href="#" data-bind="click:function() { $root.addFilter($data) }"> 
```

有助于？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-01T15:09:07.190

我遇到了类似的事情，起初我跑了`data-bind="click:function() { console.log($parents) }"`。请注意，它`$parents`不是`$parent`. 我想找到上下文，我需要的那个看起来像`data-bind="click:$parents[1].onCardClick"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-26T06:58:21.380

我在 ko 上下文中找到并尝试使用如下示例。 *$parentContext.$parent.onButtonClick*

# c# - 价值上传器和数据库保存在多个文件上

> ID：10599500
> 
> 赞同：0
> 
> 时间：2012-05-15T11:10:39.443
> 
> 标签：c#, asp.net

我正在使用带有 ashx 文件示例的 valums 上传器，我发现和 tweeked，并且希望在上传时将每个文件的数据保存到数据库中，单步执行代码，似乎没有任何方法可以区分上传的文件哪个命令，看某个变量，代码到处乱跳。它适用于单个文件，但超过 1 个是一个问题。此外， context.Request.Files.Count 始终为 0

```
 byte[] buffer = new byte[request.ContentLength];

            fileName = request.RawUrl.Split('=')[1];
            fmt = Path.GetExtension(fileName);

            using (BinaryReader br = new BinaryReader(request.InputStream)) 
            br.Read(buffer, 0, buffer.Length);

            File.WriteAllBytes(StorageRoot + request["qqfile"], buffer);

            success = false;
            context.Response.Write("{success:true}");
            HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:11:23.830

我使用 valuems 上传器没有问题。不同的浏览器以不同的方式上传文件。IE 将使用文件上传 html 控件，而 Firefox 和 Chrome 可以使用 Ajax 样式。我编写了自己的上传处理程序，但您需要做的第一件事是确定使用了哪种方法。

我这样做：

```
if (HttpContext.Current.Request.QueryString["qqfile"] != null)
    file = new UploadedFileXhr();
else if (HttpContext.Current.Request.Files.Count > 0)
    file = new UploadedFileForm();
else
    return new UploadResult("Request was not valid."); 
```

XHR 上传意味着您从输入缓冲区读取数据，如下所示：

```
int read = HttpContext.Current.Request.InputStream.Read(buffer, 0, buffer.Length);

while (read == buffer.Length)
{
    ms.Write(buffer, 0, buffer.Length);
    read = HttpContext.Current.Request.InputStream.Read(buffer, 0, buffer.Length);
}

ms.Write(buffer, 0, read); 
```

文件上传更简单，如下所示：

```
UploadResult result = new UploadResult(true);
result.Stream = _File.InputStream;
result.Name = System.IO.Path.GetFileName(_File.FileName); 
```

即使您在客户端添加多个文件，每个文件也会单独上传。

# objective-c - 无法启动使用 RestKit 存档的 Mac OS X 10.7 应用程序

> ID：10599509
> 
> 赞同：2
> 
> 时间：2012-05-15T11:11:16.137
> 
> 标签：objective-c, macos, restkit

我是 RestKit 和开发 Mac OS X 应用程序的新手。

我正在尝试使用 RestKit 开发 Mac OS X 应用程序。我可以在 Xcode 的调试模式下运行该应用程序。

但我无法在生产模式下运行应用程序（这意味着归档应用程序）。启动应用程序，将出现此错误。

> > 由于出现问题，无法打开 TestRestKit。与开发人员核实以确保 TestRestKit 与 Mac OS X 版本兼容。您可能需要重新安装该应用程序。请务必为应用程序和 Mac OS X 安装任何可用的更新。
> > 
> > 单击报告以查看更多详细信息并向 Apple 发送报告。

我检查了系统日志，然后我找到了这些日志。

> > 5 月 14 日 12:41:01 black-umbrella [0x0-0x26b26b].jp.co.test.TestRestKit[30585]：dyld：库未加载：@executable_path/../Frameworks/RestKit.framework/Versions/A/RestKit 5 月 14 日 12:41:01 black-umbrella [0x0-0x26b26b].jp.co.test.TestRestKit[30585]：引用自：/Users/tfmagician/Desktop/TestRestKit.app/Contents/MacOS/TestRestKit 12 年 5 月 14 日： 41:01 black-umbrella [0x0-0x26b26b].jp.co.fuller.TestRestKit[30585]：原因：找不到图像 5 月 14 日 12:41:02 black-umbrella com.apple.launchd.peruser.501[235] （[0x0-0x26b26b].jp.co.fuller.TestRestKit[30585]）：作业似乎已崩溃：跟踪/BPT 陷阱：5

所以我在应用归档时注意到了警告。

> > 检查依赖项警告：安装目录以@executable_path 开头，但跳过安装已禁用。

我按照这个文档安装了 RestKit。

[https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x](https://github.com/RestKit/RestKit/wiki/Installing-RestKit-in-Xcode-4.x)

Xcode 版本是 4.3.2，我使用的是 RestKit 的 master 分支。

请帮助我，如果我能对这个问题有所了解，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-28T05:55:55.210

在目标的`Build Phases`

![项目设置](../Images/ee40567b605229e5ed6a8a263f7422d1.png)

单击`Add Build Phase`（右下角），`Add Copy Files`然后添加：

![在此处输入图像描述](../Images/4e0f774b96b95cf19b54377a36c97ac8.png)

# javascript - pure.js 必须与现有的页面节点一起使用？

> ID：10599513
> 
> 赞同：2
> 
> 时间：2012-05-15T11:11:37.137
> 
> 标签：javascript, templates, pure-js

```
<html lang="en">
  <head>
    <meta charset="utf-8">
    <script type='text/javascript' src="js/jquery/jquery-min.js"></script>
    <script type='text/javascript' src="js/pure/pure.js"></script>
  </head>
  <body>
    <div class='result'>Test Page</div>

    <script type='text/javascript'>
      $(document).ready(function(){
        var p;
        p = $("<div><ul><li></li></ul></div>");
        directives = {"li": "error"};
        data = {"error": "name must be between 3 and 250 characters long"};
        p.render(data, directives);
        $(".result").after(p);
        });
    </script>
  </body>
</html> 
```

上面的代码不会将数据插入到 p 对象中。但是下面的工作，

```
<html lang="en">
  <head>
    <meta charset="utf-8">
    <script type='text/javascript' src="js/jquery/jquery-min.js"></script>
    <script type='text/javascript' src="js/pure/pure.js"></script>
  </head>
  <body>
    <div class='result'>Test Page</div>

    <script type='text/javascript'>
      $(document).ready(function(){
        var p;
        p = $("<div><ul><li></li></ul></div>");
        $(".result").after(p);
        directives = {"li": "error"};
        data = {"error": "name must be between 3 and 250 characters long"};
        p.render(data, directives);
        });
    </script>
  </body>
</html> 
```

好像插入数据，jquery对象（这里是p）一定要操作已有的html标签？像后者不合理，我希望第一个代码插入数据，但是如何？谢谢， ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:59:14.153

`render`总是返回一个节点。如果模板在 DOM 中，它会被渲染的节点替换。

你可以这样做：

```
p = p.render(data, directives);
$(".result").after(p); 
```

或者

```
$(".result").after( p.render(data, directives) ); 
```

# java - 如何从 url 生成识别的文件名？

> ID：10599522
> 
> 赞同：0
> 
> 时间：2012-05-15T11:12:30.567
> 
> 标签：java, android

现在我必须下载一个 url 已知的文件。下载操作完成后，我需要将其保存到 SD 卡中。问题是我应该在下载之前知道文件是否存在。因此，我计划使用从 url 生成的已识别文件名保存文件。所以当我得到网址时，我可以计算出他对应的文件名。我应该使用哪种算法？

顺便说一句，我正在使用 JAVA。

也许，我没有把我的要求说清楚。从网址“www.yahoo.com/abc.png”获取文件名“abc.png”不是我需要的。因为“www.google.com/abc.png”会产生相同的文件名。我需要从 url 生成一个唯一的文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:20:33.997

完整的示例工作...几天前我尝试过自己..我相信它会有所帮助..

```
package com.imagedownloader;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import java.net.URLConnection;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.widget.ImageView;

public class ImageDownloaderActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Bitmap bitmap=DownloadImage("http://www.allindiaflorist.com/imgs/arrangemen4.jpg");
        ImageView img =(ImageView)findViewById(R.id.imageView1);
        img.setImageBitmap(bitmap);

    }

    private Bitmap DownloadImage(String URL) {
        // TODO Auto-generated method stub
        Bitmap bitmap=null;
        InputStream in=null;
        try {

        in=OpenHttpConnection(URL);
        bitmap=BitmapFactory.decodeStream(in);

            in.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        return bitmap;
    }

    private InputStream OpenHttpConnection(String stingurl) throws IOException {
        // TODO Auto-generated method stub
        InputStream in=null;
        int response=-1;

            URL url = new URL(stingurl);
            URLConnection conn=url.openConnection();

            if(!(conn instanceof HttpURLConnection))
                    throw new IOException("not and http exception");

            try{

                HttpURLConnection httpconn=(HttpURLConnection)conn;
                httpconn.setAllowUserInteraction(false);
                httpconn.setInstanceFollowRedirects(true);
                httpconn.setRequestMethod("GET");
                httpconn.connect();

                response=httpconn.getResponseCode();
                if(response==HttpURLConnection.HTTP_OK)
                {
                    in=httpconn.getInputStream();

                }

            }
            catch(Exception ex)
            {throw new IOException("Error connecting");   }
        return in;
    }
} 
```

# linux - linux内核中的调度算法

> ID：10599524
> 
> 赞同：4
> 
> 时间：2012-05-15T11:12:44.697
> 
> 标签：linux, process, kernel, scheduling

linux内核中实现了多少种不同的算法？只有FIFO和Round Robin，还是有其他？

我在哪里可以找到关于这个主题的好文档？

假设我想实现这些算法 myslef，我应该从哪里开始？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T11:16:45.053

在实时调度器方面，linux 提供了 FIFO 和 Round-Robin（POSIX`SCHED_FIFO`和`SCHED_RR`）。还有一个分时调度程序，称为[完全公平调度程序 (CFS)](http://en.wikipedia.org/wiki/Completely_Fair_Scheduler)，它足够复杂，您可以将其称为多个调度程序（即多核，以及针对不同负载的多种抢占风格/风格）。CFS 在内核文档 ( [sched-design-CFS](http://www.kernel.org/doc/Documentation/scheduler/sched-design-CFS.txt) ) 中有详细描述，但建议仔细阅读相关来源。CFS 是 linux 对 POSIX`SCHED_OTHER`策略的实现。

此外，还有一些补丁可以添加其他调度策略，例如[新的实时最早截止日期优先 (EDF) 调度程序](http://www.evidence.eu.com/sched_deadline.html)。

除了一些关于该主题的书籍（其中许多在出版时立即过时）之外，您可以在[此处](http://www.kernel.org/doc/Documentation/scheduler/)或在 docs/scheduler 下的内核树中参考内核文档。[仔细阅读LKML 档案以讨论该主题](http://marc.info/?l=linux-kernel&w=2&r=1&s=scheduler&q=b)也很有用。

如果您刚刚开始或想要使用更广泛的实时调度程序，您可以考虑 UNC 的[LITMUS-RT 框架](http://www.litmus-rt.org/)。

# android - 如何获取视图或 LinearLayout 的坐标、高度、宽度

> ID：10599530
> 
> 赞同：0
> 
> 时间：2012-05-15T11:12:52.830
> 
> 标签：android, android-layout

我有一个视图子视图，它被添加到我的主布局上的 LinearLayout 中。我想在屏幕上获取此视图的坐标，我使用`getLocationOnWindow()`,`getHeight()`和`getWidth()`方法，但总是得到 0。最后我找到了原因。无论我在哪里调用这些方法都是在`onCreate()`方法期间。我的意思是，我总是在所有布局、视图……等布置好之前打电话。但我不知道我应该什么时候打电话？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:21:03.393

不知道你在说什么，但你`setContentView(R.layout.my_layout)`在尝试之前打过电话吗`View myView = (View) findViewById(R.id.idofview)`

# java - selectOne 项目并呈现一个“inputText”

> ID：10599532
> 
> 赞同：1
> 
> 时间：2012-05-15T11:12:58.627
> 
> 标签：java, jsf, jsf-2

我有一个下拉框和一个 inputText。这是我的 xhtml 代码：

```
<h:panelGroup id="inputs">
<h:selectOneMenu value="#{tabBean.refundCharge}" name="reCharge">
    <f:selectItems value="#{tabBean.reChargeList}" />
    <f:ajax render="inputs" />
    </h:selectOneMenu>

    <p:inputText value="#{tabBean.refundDescr}"  rendered="#{tabBean.refundCharge == 'Item2'}"/>
</h:panelGroup> 
```

这是 TabBean ：

```
 private String            refundCharge;

    public String[] getReChargeList() {

        ResourceBundle config = ResourceBundle.getBundle("config");
        String reChargeList=   "Item1 % Item2 % Item3";
        String delimeter = "[%]";
        String[] reChargeDescr = reChargeList.split(delimeter);

        return reChargeDescr;
    } 
```

未显示 inputText。当我从 dropDownList 中单击 Item2 值时，必须显示输入文本。但这些代码不起作用。

它必须在我单击 Item2 时才显示。错误在哪里？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:53:34.793

`%`在`reChargeList`. _ 所以有效地分割值是`"Item1 "`和。不等于您在属性中指定的值，因此它永远不会被渲染。`" Item2 "``" Item3"``" Item2 "``"Item2"``rendered`

删除这些空格或将拆分分隔符更改为`\\s*%\\s*`

# django - Django：在测试期间从 STATIC_ROOT 读取

> ID：10599533
> 
> 赞同：2
> 
> 时间：2012-05-15T11:12:59.987
> 
> 标签：django, testing, static

我从项目中的一些模板中渲染了一些 pdf。嗯，它似乎工作，但...

...我想测试它！

问题是我在渲染过程中读取的一些文件位于 STATIC_ROOT - 所以我需要在运行测试时收集静态文件（有点奇怪！）。

问题是：有没有办法在测试期间使用 STATIC_ROOT，但没有“真正的”收集静态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:53:41.420

我使用以下方式。在您的项目目录中创建一个以`dev_static_finder.py`这些内容命名的文件。

```
# -*- coding: utf-8 -*-
from django.core.files.storage import FileSystemStorage
from django.contrib.staticfiles.finders import BaseStorageFinder
from django.conf import settings

class StaticRootFinder(BaseStorageFinder):
    storage = FileSystemStorage(settings.STATIC_ROOT, settings.STATIC_URL) 
```

将此行添加到您的`settings.py`

```
STATICFILES_FINDERS += ('dev_static_finder.StaticRootFinder',) 
```

我不知道更简单的方法。

# macos - POST 接收器（服务器）

> ID：10599535
> 
> 赞同：1
> 
> 时间：2012-05-15T11:13:01.420
> 
> 标签：发布, macos, macos, http, http-post, netcat

我发现自己需要一种方法来测试从我的应用程序发出的[发布](/questions/tagged/post "显示标记为“帖子”的问题")请求。

我将我的请求发送到`http://macbook-pro.local/`，并试图找出我可以运行什么服务来读取和显示请求。

我在没有任何运气的情况下调查了[RestKit 。](http://restkit.org/)

使用[SignalR](https://github.com/SignalR/SignalR)可以工作，但到[macos](/questions/tagged/macos "显示标记为“macos”的问题")的端口没有按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T13:56:17.313

你想要的基本上是一个非常简单的 Web 服务器，但如果你想要的只是打印出 HTTP POST 请求中的内容，你可以使用内置的“nc”命令。您可以使用终端通过在这样的循环中运行“nc”来打印本地端口 10000 上传入请求的内容：

```
while true; do nc -l 10000 < /dev/null ; printf '\n\n\n'; done 
```

然后，您可以`http://localhost:10000`在浏览器中访问并查看 HTTP 请求出现在您的终端窗口中。网络浏览器将给出错误消息，因为“nc”不够聪明，无法回复。

要测试 HTTP POST 请求，您可以使用“curl”：

```
curl --data "this-is-POST-data" http://localhost:10000 
```

同样，curl 会给出一条错误消息，因为 'nc' 只是关闭连接而没有给出正确的 HTTP 回复。您可以使用静态 HTTP 响应对所有请求进行“nc”回复，如下所示：

```
while true; do printf 'HTTP/1.0 200 OK\r\nContent-type: text-plain\r\n\r\nHello, world!' | nc -l 10000  ; printf '\n\n\n'; done 
```

如果您需要使用端口 80，您需要以 root 身份运行“nc”（例如使用“sudo”）。

但是，如果您需要进行任何类型的真实 HTTP 流量，则需要获得合适的 Web 服务器。OS X 带有 Apache Web 服务器，可以使用命令“apachectl start”（“apachectl stop”来停止它）启动它。CGI 已启用，因此您可以将可执行文件放入 /Library/WebServer/CGI-Executables 并使用`http://localhost/cgi-bin/filename`. 例如，如果您创建以下 CGI 脚本：

```
#!/bin/sh

printf 'Content-type: text/plain\r\n\r\n'
cat > /tmp/post-data
echo OK 
```

称它为“test.sh”并将其放在 CGI-Executables 文件夹中，然后运行：

```
chmod +x /Library/WebServer/CGI-Executables/test.sh 
```

然后，每当您向其发送 POST 请求时`http://localhost/cgi-bin/test.sh`，会将 POST 数据的内容保存到计算机上的文件 /tmp/post-data 中。

注意：在所有示例中，如果这是您的计算机主机名，则“localhost”可以替换为“macbook-pro.local”以通过网络进行访问。

另请注意，您的 OS X 防火墙权限可能会阻止“nc”和其他软件侦听 TCP 端口。通常你应该得到一个权限对话框，但如果你只是得到“权限被拒绝”，请在系统偏好设置 -> 防火墙 -> 防火墙选项中调整你的防火墙设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:33:59.667

寻找[SBJson 框架](https://github.com/stig/json-framework)

这些是您可以编写以解析 GET 数据的示例行。

```
SBJsonParser *parser = [[SBJsonParser alloc] init];
NSDictionary *dict = [parser objectWithData:urlData];
[dictionary setDictionary:dict];
[parser release]; 
```

这些是您可以写入 POST 数据的示例行。

```
SBJsonWriter *writer = [[SBJsonWriter alloc] init];
jsonStr = [writer stringWithObject:dictionary];
[writer release]; 
```

*框架中有更多方法可以做一些有用的事情。*

# jersey - 使用 Jersey InMemoryTestContainerFactory 的示例/教程

> ID：10599543
> 
> 赞同：3
> 
> 时间：2012-05-15T11:13:46.323
> 
> 标签：jersey

有人可以指点我一个使用`InMemoryTestContainerFactory`, from`jersey-test-framework-inmemory`调用虚拟资源的示例 JUnit 测试吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:44:02.843

[http://java.net/projects/jersey/sources/svn/content/trunk/jersey/jersey-test-framework/jersey-test-framework-inmemory/src/test/java/com/sun/jersey/test/框架/impl/container/inmemory/testpackage/InMemoryPackageTest.java?rev=5700](http://java.net/projects/jersey/sources/svn/content/trunk/jersey/jersey-test-framework/jersey-test-framework-inmemory/src/test/java/com/sun/jersey/test/framework/impl/container/inmemory/testpackage/InMemoryPackageTest.java?rev=5700)

# c# - C#中的倒数计时器跳过时间

> ID：10599547
> 
> 赞同：0
> 
> 时间：2012-05-15T11:14:19.897
> 
> 标签：c#, string, timer, countdown, countdowntimer

我在 C# 中有这个

```
private void counter_Tick(object sender, EventArgs e)
    {
        Time.Text = String.Format("{0:000}", Hour) + ":" + String.Format("{0:00}", Minute) + ":" + String.Format("{0:00}", Second);
        if (Second != 00)
        {
            Second = Second - 1;
        }
        else if (Minute != 00)
        {
            Minute = Minute - 1;
            Second = 59;
        }
        else if (Hour != 00)
        {
            Hour = Hour - 1;
            Minute = 59;
        }
        else
        {
            counter.Stop();
            Time.ForeColor = Color.Red;
        }
    } 
```

哪个有效，但是当分钟数减少到一小时时，它会从 00 分钟变为 58 分钟，而不是 59

例如。

```
From: 001:00:00
To:   000:58:59 
```

有没有更好的方法来制作一个倒数计时器，当它到达 000:00:00 时会做一些事情？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T11:19:02.057

好吧，让我们看看时间到了会发生什么`10:00:00`。

1.  减去一小时：`09:00:00`.
2.  将分钟设置为 59: `09:59:00`。

如果您发现时间差了一分钟 ( `10:00:00 - 09:59:00 = 00:01:00`)。解决方案是将秒数也设置为 59。所以现在我们的代码是。

```
// ...
else if (Hour != 00)
{
    Hour = Hour - 1;
    Minute = 59;
    Second = 59;
}
// ... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:36:18.280

您可以使用标准的 .Net 类来减去时间：

```
private TimeSpan timeSpan;
private TimeSpan oneSecond = new TimeSpan(0, 0, 1);

private void timer_Elapsed(object sender, ElapsedEventArgs e)
{
    Time.Text = timeSpan.ToString();

    if (timeSpan == TimeSpan.Zero)
    {
        Time.ForeColor = Color.Red;
        timer.Stop();
        return;
    }

    timeSpan -= oneSecond;
} 
```

启动计时器时初始化时间跨度（我使用 System.Timers.Timer）：

```
timeSpan = new TimeSpan(1, 0, 0);
Timer timer = new Timer(1000);
timer.Elapsed += new ElapsedEventHandler(timer_Elapsed);
timer.Start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T11:19:17.463

您还需要设置`Second`为`59`. 否则，一旦计时器再次滴答作响，它会立即切换到并将（已经是）`else if (Minute != 00)`减一。`Minute``59`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T11:26:37.967

```
DateTime start;
DateTime final;

private void start()
{
    start = DateTime.Now;
    final = start + TimeSpan.FromHours(1);
}

private void counter_Tick(object sender, EventArgs e)
{
    start = DateTime.Now;
    Time.Text = (final-start).Hours.ToString() + ":" + (final-start).Minutes.ToString() + ":" + (final-start).Seconds.ToString();    
    if (final == start)
    {
        //final code
    }        
} 
```

# mysql - 使用 hp cloud 和 xeround 在 Internet 上的 mysql 主机

> ID：10599551
> 
> 赞同：0
> 
> 时间：2012-05-15T11:14:29.690
> 
> 标签：mysql, mysqldump, hp-cloud-services

我是“云”概念的新手，我有一个基于 Java 的数据输入应用程序，它在我的 LAN 上运行良好。

在我的局域网上，我安装：

*   mysql
*   配置实例（用户名- `root`，pass- `******`）
*   转储格式`entry_db`为的虚拟数据库`raw`

然后我有一个 jar 可执行文件，它在运行时会显示一个登录屏幕。

我设法使用预定义的 ID 和 PASSWORD 成功登录（用户 -`config`通行证 - `******`）

登录后我配置（d）：

*   数据库类型
*   数据库 IP
*   用户名 ( `Root`)
*   密码`****`
*   数据库名称（它自动选择数据库命名`entry_db`）

在另一个窗口中，我配置（d）网络文件共享位置：

*   文件共享位置
*   图像路径
*   备份数据路径
*   xml中的配置文件位置

（注意 - 当我选择文件共享位置时，所有其他文件会自动采用相同的路径）

然后我创建`Admin account`而不是`Supervisor account`或`operator account`使用管理员帐户登录，我现在可以上传数据并分发给所有操作员。

这是我的问题：

*   **我在Hp Cloud**上配置了一台云计算机 （他们为我提供了一个静态 ip），然后从 xeround.com 导入数据库。

我现在有一个 dns 和端口号，还有一个使用**MY PHP CLIENT**的登录表单 我 如何将所有这些打包到同一个可执行 jar 文件中以便在任何地方使用？我怎样才能像在我的局域网上一样从网络上使用它？

什么是最佳配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:54:45.037

我在 Xeround 工作。

我已经阅读了你的问题，我想指出一些事情；您应该在用于放置 MYSQL 服务器机器的主机名/IP 的连接字符串中使用 DNS，以及用于放置 MySQL 默认端口（3306）的端口号。除此之外，您可以从可以访问实例的任何地方进行连接。我建议如果您的 jar 在 HP 云中运行，您也可以在那里创建 Xeround 数据库实例（这将提高性能）。如果您仍然需要帮助，我们将非常乐意为您提供帮助。只需向我们发送一封快速电子邮件至 support@xeround.com，我们将从那里接收。

干杯，尤瓦尔

# sql - 删除并重新创建主键

> ID：10599552
> 
> 赞同：2
> 
> 时间：2012-05-15T11:14:35.477
> 
> 标签：sql, sql-server, tsql, ssms

我想更改数据库表上的主键/索引以将索引选项更改`ignore_dup_key`为“on”。

根据这个问题“[我可以为主键设置ignore_dup_key吗？](https://stackoverflow.com/questions/2594193/can-i-set-ignore-dup-key-on-for-a-primary-key) ”我需要删除索引并创建一个新索引。

在删除索引之前，如何获取重新创建它的命令？那我就换个`ignore_dup_key`选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T17:05:57.093

右键单击 SSMS 中的主键，然后选择 Script -> As Create -> To New Window

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T14:28:19.407

正如[另一个相关问题的评论者](https://stackoverflow.com/a/11207687/1111662)所指出的，您可以为表启用 IGNORE_DUP_KEY ：

```
ALTER TABLE [TableName] REBUILD WITH (IGNORE_DUP_KEY = ON); 
```

并恢复：

```
ALTER TABLE [TableName] REBUILD WITH (IGNORE_DUP_KEY = OFF); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T14:37:00.830

我认为 SQL 不允许使用 IGNORE_DUP_KEY = on 进行 PK，因此我在 SQL 2008 R2 上进行了测试。
通过脚本可以创建一个 PK IGNORE_DUP_KEY = on 的表。但即使使用 drop 和 create 也无法将 PK 从 off 更改为 on。有趣的是脚本运行没有错误，但它没有将 PK 从关闭更改为打开。您可能会在您的环境中找到不同的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T14:54:20.007

要删除索引，您可以运行

```
DROP INDEX [IndexName] ON [TableName] 
```

使用 Ignore_Dup_Key 选项创建索引

```
CREATE UNIQUE INDEX [IndexName] ON [TableName]([ColumnNam])
WITH (IGNORE_DUP_KEY = ON) 
```

# magento - Magento 编辑订单电子邮件中的“项目”表

> ID：10599557
> 
> 赞同：1
> 
> 时间：2012-05-15T11:14:55.310
> 
> 标签：magento

我正在使用magento 1.6。我想编辑每封订单电子邮件中显示的项目表。我在哪里可以找到这个模板？

更具体地说，在“产品名称”下，我想添加名为“字幕”的自定义属性。

如果您知道模板在哪里，我应该能够解决其余的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:24:08.483

尝试这个：

```
$_item = $this->getItem();    
$_product = Mage::getModel('catalog/product')->loadByAttribute('sku',$_item->getSku()); 
```

而不是 $this->getProduct()。比你可以使用 $_product->getSubtitle();

# java - 如何获取xml的命名空间

> ID：10599566
> 
> 赞同：1
> 
> 时间：2012-05-15T11:15:45.523
> 
> 标签：java, xml

我有这个xml：

```
InputStream is = new ByteArrayInputStream(
        "<data:RobCtiAifoData xmlns:data=\"urn:cz:isvs:rob:schemas:RobDotazyData:v1\" xmlns:reg=\"urn:cz:isvs:reg:schemas:RegTypy:v1\" xmlns:soapenv=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:urn=\"urn:cz:isvs:rob:schemas:RobUnivDotazy:v1\"><data:Aifo a=\"b\">1</data:Aifo><data:VyuzitiPoskytnuti>vyuziti</data:VyuzitiPoskytnuti> </data:RobCtiAifoData>"
                .getBytes());

// InputStream is = new ByteArrayInputStream(xml.getBytes());
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document document = db.parse(is);
Node node = document.getDocumentElement(); 
```

当想要获取没有命名空间的元素名称时，我想调用没有前缀的元素名称的子字符串

`node.getNodeName()`给我**`data:VyuzitiPoskytnuti`** 和`node.getNamespaceURI()`或`node.getPrefix()`给我只是**`null`**。那么我怎样才能得到节点的前缀呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T11:20:15.490

尝试启用命名空间支持：

```
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
dbf.setNamespaceAware(true);
DocumentBuilder db = dbf.newDocumentBuilder(); 
```

来自[JavaDoc](http://docs.oracle.com/javase/6/docs/api/javax/xml/parsers/DocumentBuilderFactory.html#setNamespaceAware%28boolean%29)的`setNamespaceAware`：

> 指定此代码生成的解析器将提供对 XML 名称空间的支持。默认情况下，此值设置为`false`

# php - 以编程方式检查网站重定向

> ID：10599570
> 
> 赞同：5
> 
> 时间：2012-05-15T11:15:49.647
> 
> 标签：php, python, redirect, web, blocking

在我的国家，许多网站被审查和封锁，而是被重定向到某个页面。我不知道他们到底是怎么做到的。但是是否可以在不加载整个内容的情况下以编程方式确定网站**是**被阻止还是**未被阻止？**我想这样做的原因是使用网络搜索 API（可能是谷歌的）并制作一个只带来未被阻止的结果的网络服务。

如果有帮助，则加载的页面内容如下所示：

```
<html><head><meta http-equiv="Content-Type" content="text/html; charset=windows-1256"><title>M3-5
</title></head><body><iframe src="http://10.10.34.34?type=Invalid Site&policy=MainPolicy " style="width: 100%; height: 100%" scrolling="no" marginwidth="0" marginheight="0" frameborder="0" vspace="0" hspace="0"></iframe></body></html> 
```

我了解运行该服务的服务器必须拥有我所在国家/地区的 IP。

如果有一种方法可以在 PHP 或 Python 中执行此操作，那将是最好的。

我感谢任何帮助或想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:28:11.917

这在 PHP 和 Python 中应该是完全可能的。基本上，您想向相关站点发出一个 http 请求，然后分析您返回的响应。看看[PHP 的 cURL](http://php.net/manual/en/book.curl.php)或[Python 的 Pycurl](http://pycurl.sourceforge.net/)来梳理一下如何发出这些 http 请求以及如何处理响应。

收到响应后，只需将模式与被阻止站点的某些可靠模式进行匹配即可。我的第一个猜测是您可以`<body><iframe src="http://10.10.34.34?type=Invalid Site`在响应中查找，但是您必须检查更多被阻止的页面以查看它们是否都包含该字符串。例如，如果 IP 或类型查询字符串参数从一个被阻止的站点到另一个站点不同，您最终可能需要将检查范围扩大到一个特定的正则表达式。

# java - Guava 和 SQL：将 int 转换为 Ints

> ID：10599571
> 
> 赞同：0
> 
> 时间：2012-05-15T11:15:52.127
> 
> 标签：java, guava

我从 MSSQL 服务器中提取数据，应用程序的其余部分严重依赖番石榴。有没有办法将 int 从 SQL 转换为 Ints (guava)？我试过了

```
Primitives.wrap(Ints.class).cast(resultSet.getInt(3))) 
```

并得到“java.util.concurrent.ExecutionException: java.lang.ClassCastException: Cannot cast java.lang.Integer to com.google.common.primitives.Ints”错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:38:30.480

[`Ints`](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/index.html)是一个静态实用程序类，它没有实例。它在那里提供了操作原语`int`的常用方法。如果你需要将它包装在一个类中，自然是`java.lang.Integer`.

[`Primitives.wrap()`](http://docs.guava-libraries.googlecode.com/git-history/v12.0/javadoc/index.html)是一种元实用程序。它告诉您哪个*类*实现了给定*类*的包装器。如果您提供原语`int.class`，它将返回`Integer.class`。同样，它操作类，它不包装原始值。

如果你想包装一个`int`，你只需要：

```
int fooToWrap = 42;
Integer fooWrapped = Integer.valueOf(fooToWrap); 
```

你想达到什么目的？

鉴于您的评论，我认为您想要的是：

```
Integer.valueOf(resultSet.getInt(3)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:20:21.753

如果我没记错的话，如果 int 扩展 int，你只能做这样的转换。您是否尝试过将其变成 Integer 对象，而不仅仅是 int 数据类型？

# batch-file - 批处理文件在字符串中查找字符串

> ID：10599572
> 
> 赞同：0
> 
> 时间：2012-05-15T11:15:54.680
> 
> 标签：batch-file, cmd, environment-variables

在批处理文件中，我想查看 %1 是否在集合中。

例如，作为替代

```
if %1 equ /? goto help
if /I %1 equ -? goto help
if /I %1 equ /help goto help
etc 
```

看起来它应该很简单，但我无法让它工作。我尝试过使用和不使用 FOR 循环和搜索：字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:25:49.227

```
@echo off
setlocal enabledelayedexpansion
set "helpoptions=@/?@-?@/help@"
if not "!helpoptions:@%~1@=!"=="%helpoptions%" goto help
goto :eof
:help
echo Help 
```

将是一种选择，尽管不是一个非常漂亮的选择。

# javascript - Async.js 瀑布（在数组之外定义的函数）

> ID：10599574
> 
> 赞同：2
> 
> 时间：2012-05-15T11:16:06.007
> 
> 标签：javascript, node.js, asynchronous

我第一次使用 async.js，想将函数数组分离成单独的函数。我有：

**工作代码**

```
 async.waterfall([
        function(callback)
        {
            var querySuccess = function (tx, result)
            {
                callback(null, result.rows.item(0).EventImportTime || "");
            };

            var queryError = function (tx, e)
            {
                callback("Query Error")
            };

            database.open();
            database.query("SELECT EventImportTime FROM Contact WHERE Contact.Id = ?", [contactId], querySuccess, queryError);
        },
        function(lastImportTime, callback)
        {
            var url = "";
            url += 'MobileGetvents.aspx?';
            url += '&LastImportTime=';
            url +=  lastImportTime;
            url += '&Format=JSON';

            callback(null, url)
        },
    ],
    function(err, result)
    {
        if (err)
            console.log("Error Happened");
        else 
        {
            console.log(result);
            getJSON(result, callback, 

errorCallback)
            }
        }) 
```

**我想**

```
async.waterfall([
            getLastImportTime(callback) ,
            buildUrl(lastImportTime, callback),
        ],
        //callback
); 
```

但是，当我运行此代码时，它总是返回

> 未捕获的 ReferenceError：未定义 lastImportTime

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T11:28:16.343

我会假设你想要这个：

```
var getLastImportTime = function(callback) { };
var buildUrl = function(lastImportTime, callback) { };

async.waterfall([
            getLastImportTime,
            buildUrl,
        ],
        //callback
); 
```

# android - 访问联系人并获取电子邮件地址

> ID：10599578
> 
> 赞同：7
> 
> 时间：2012-05-15T11:16:31.423
> 
> 标签：android, email, contacts

我有一个用于访问联系人的代码片段。当用户单击按钮时，联系人列表将打开，用户可以从联系人中选择一个人，该人的电子邮件地址应写在编辑文本上。我可以收到用户选择的人的电子邮件。但我无法将其设置为edittext。

```
static String email = "";

imgbtnaddfromcontacts.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                if (v == imgbtnaddfromcontacts) {
                    try 
                    {
                        Intent intent = new Intent(Intent.ACTION_PICK,
                                ContactsContract.Contacts.CONTENT_URI);
                        startActivityForResult(intent, 1);

                    } catch (Exception e) {
                        e.printStackTrace();
                        Log.e("Error in intent : ", e.toString());
                    }
                }
            }
        });
        kimeTxt.setText(email);
    }

    @Override
    public void onActivityResult(int reqCode, int resultCode, Intent data) {
        super.onActivityResult(reqCode, resultCode, data);

        try {
            if (resultCode == Activity.RESULT_OK) {
                // Get data
                Uri contactData = data.getData();
                // Cursor
                Cursor cur = managedQuery(contactData, null, null, null, null);
                ContentResolver contect_resolver = getContentResolver();

                // List
                if (cur.moveToFirst()) {
                    String id = cur
                            .getString(cur
                                    .getColumnIndexOrThrow(ContactsContract.Contacts._ID));

                    Cursor phoneCur = contect_resolver.query(
                            ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                            null,
                            ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                    + " = ?", new String[] { id }, null);

                    Cursor emailCur = contect_resolver.query(
                            ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                            null,
                            ContactsContract.CommonDataKinds.Email.CONTACT_ID
                                    + " = ?", new String[] { id }, null);

                    if (phoneCur.moveToFirst()) {
                        name = phoneCur
                                .getString(phoneCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                        no = phoneCur
                                .getString(phoneCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                    }

                    while (emailCur.moveToNext()) {
                        // This would allow you get several email addresses
                        // if the email addresses were stored in an array
                        email = emailCur
                                .getString(emailCur
                                        .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));

                        if (email != null) 
                        {
                            seciliEmail = email;
                        } else {
                            Toast.makeText(EpostaIletActivity.this,
                                    "Kişinin eposta hesabı bulunmamaktadır.",
                                    Toast.LENGTH_SHORT);
                            Log.w("Error: ", "Kişinin eposta hesabı yok.");
                        }
                    }

                    Log.e("Phone no & name & email :***: ", name + " : " + no + ":" + email);
                    // txt.append(name + " : " + no + "\n");

                    id = null;
                    name = null;
                    no = null;
                    seciliEmail = "xxx";
                    phoneCur = null;
                    emailCur.close();
                }
                contect_resolver = null;
                cur = null;
                // populateContacts();

            }
        } catch (IllegalArgumentException e) {
            e.printStackTrace();
            Log.e("IllegalArgumentException :: ", e.toString());
        } catch (Exception e) {
            e.printStackTrace();
            Log.e("Error :: ", e.toString());
        }
    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-15T11:20:09.213

我正在使用以下代码从选定的联系人获取电子邮件地址 -

```
public void doLaunchContactPicker(View view) {
    Intent contactPickerIntent = new Intent(Intent.ACTION_PICK,Contacts.CONTENT_URI);
    startActivityForResult(contactPickerIntent, CONTACT_PICKER_RESULT);
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) 
{
    if (resultCode == RESULT_OK) {
        switch (requestCode) 
        {
        case CONTACT_PICKER_RESULT:
            Cursor cursor = null;
            String email = "", name = "";
            try {
                Uri result = data.getData();
                Log.v(DEBUG_TAG, "Got a contact result: " + result.toString());

                // get the contact id from the Uri
                String id = result.getLastPathSegment();

                // query for everything email
                cursor = getContentResolver().query(Email.CONTENT_URI,  null, Email.CONTACT_ID + "=?", new String[] { id }, null);

                int nameId = cursor.getColumnIndex(Contacts.DISPLAY_NAME);

                int emailIdx = cursor.getColumnIndex(Email.DATA);

                // let's just get the first email
                if (cursor.moveToFirst()) {
                    email = cursor.getString(emailIdx);
                    name = cursor.getString(nameId);
                    Log.v(DEBUG_TAG, "Got email: " + email);
                } else {
                    Log.w(DEBUG_TAG, "No results");
                }
            } catch (Exception e) {
                Log.e(DEBUG_TAG, "Failed to get email data", e);
            } finally {
                if (cursor != null) {
                    cursor.close();
                }
                EditText emailEntry = (EditText) findViewById(R.id.editTextv);
                EditText personEntry = (EditText) findViewById(R.id.person);
                emailEntry.setText(email);
                personEntry.setText(name);
                if (email.length() == 0 && name.length() == 0) 
                {
                    Toast.makeText(this, "No Email for Selected Contact",Toast.LENGTH_LONG).show();
                }
            }
            break;
        }

    } else {
        Log.w(DEBUG_TAG, "Warning: activity result not ok");
    }
} 
```

`doLaunchContactPicker`是`Button`在任何你想要的地方使用代码的点击。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T12:59:33.600

确保您的应用程序已获得许可，否则您会得到奇怪的异常

在 AndroidManifest.xml 中：

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:24:06.517

```
You can achieve it like this     

   public class Abc extends Activity{
        EditText kimeTxt;
            Intent i;                                  
              Bundle b ;    
            @Override  

            protected void onCreate(Bundle savedInstanceState) {
                // TODO Auto-generated method stub
                super.onCreate(savedInstanceState);
                setContentView(R.layout.add_course);
        kimeTxt= (EditText)findViewById(R.id.emailid);

        }

        @Override
            public void onActivityResult(int reqCode, int resultCode, Intent data) {
                super.onActivityResult(reqCode, resultCode, data);

                try {
                    if (resultCode == Activity.RESULT_OK) {
                        // Get data
                        Uri contactData = data.getData();
                        // Cursor
                        Cursor cur = managedQuery(contactData, null, null, null, null);
                        ContentResolver contect_resolver = getContentResolver();

                        // List
                        if (cur.moveToFirst()) {
                            String id = cur
                                    .getString(cur
                                            .getColumnIndexOrThrow(ContactsContract.Contacts._ID));

                            Cursor phoneCur = contect_resolver.query(
                                    ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                                    null,
                                    ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                            + " = ?", new String[] { id }, null);

                            Cursor emailCur = contect_resolver.query(
                                    ContactsContract.CommonDataKinds.Email.CONTENT_URI,
                                    null,
                                    ContactsContract.CommonDataKinds.Email.CONTACT_ID
                                            + " = ?", new String[] { id }, null);

                            if (phoneCur.moveToFirst()) {
                                name = phoneCur
                                        .getString(phoneCur
                                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
                                no = phoneCur
                                        .getString(phoneCur
                                                .getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

                            }

                            while (emailCur.moveToNext()) {
                                // This would allow you get several email addresses
                                // if the email addresses were stored in an array
                                email = emailCur
                                        .getString(emailCur
                                                .getColumnIndex(ContactsContract.CommonDataKinds.Email.DATA));

                                if (email != null) 
                                {
                                    seciliEmail = email;
                                } else {
                                    Toast.makeText(EpostaIletActivity.this,
                                            "Kişinin eposta hesabı bulunmamaktadır.",
                                            Toast.LENGTH_SHORT);
                                    Log.w("Error: ", "Kişinin eposta hesabı yok.");
                                }
                            }

                            Log.e("Phone no & name & email :***: ", name + " : " + no + ":" + email);
                            // txt.append(name + " : " + no + "\n");

                            id = null;
                            name = null;
                            no = null;
                            seciliEmail = "xxx";
                            phoneCur = null;
                            emailCur.close();
                        }

    // can set email id here 

      kimeTxt.setText(email);

                        contect_resolver = null;
                        cur = null;
                        // populateContacts();

                    }
                } catch (IllegalArgumentException e) {
                    e.printStackTrace();
                    Log.e("IllegalArgumentException :: ", e.toString());
                } catch (Exception e) {
                    e.printStackTrace();
                    Log.e("Error :: ", e.toString());
                }
        } 
```

# php - cakePHP登录，多个控制器可能吗？

> ID：10599583
> 
> 赞同：0
> 
> 时间：2012-05-15T11:16:44.693
> 
> 标签：php, cakephp

嗨，我试图抓住蛋糕（被扔到最深处，没有太多帮助，教程似乎有点稀缺）

我的问题是我们有三种不同类型的用户——企业、企业用户、个人，我们为每三个用户创建了一个表、模型和控制器。是否可以在使用三种类型的控制器时创建一个登录页面，还是我们需要将所有内容组合到一个控制器中并从那里开始？

对于这样一个初学者的问题，我很抱歉，但在这一点上，我有点绝望。

业务 - 顺便说一句，有很多业务用户

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T13:26:36.473

听起来你的模型需要一些调整。我建议以下架构：

```
users table (User model)
- Contains information shared by all user types (name, password, etc.)

business table (Business model)
- Contains information unique to a business

business_users (BusinessUser)
- Contains information unique to a business user

individuals (Individual)
- Contains information unique to an individual (can this be combined with the User model?) 
```

现在，您可以像这样链接它们：

```
User hasOne Business
User hasOne BusinessUser
User hasOne Individual

Business belongsTo User
BusinessUser belongsTo User
Individual belongsToUse 
```

业务将被定义为具有关联业务模型等的用户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T14:04:13.243

您**可以**创建三个单独的登录，如果它们是三个完全不同的系统，它们永远不会共享数据或需要交互。

但重新思考你的想法可能是一个更好的主意。

`User hasMany UserGroups`.

`UserGroup`- `id`，`role`（例如业务用户、个人）。这种方法允许您在需要时进行扩展，而无需为不同的角色创建新的控制器。它确实取决于您试图通过这些“用户组”实现的目标。

在控制器中处理登录`user`，然后根据用户组，相应地控制访问。

或者甚至只是给出`user`a `role`，然后再次根据角色控制访问。

食谱提供了一个[类似的例子](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog-auth-example/auth.html)

# jquery - jQuery 表单验证警报

> ID：10599585
> 
> 赞同：0
> 
> 时间：2012-05-15T11:16:55.513
> 
> 标签：jquery, forms, validation, alert

我的表单中有这个 jQuery 验证控件。它正在工作：

```
$("#webform-client-form-45").submit(function(){

  if($("#edit-submitted-name-surname").val() == "" || $("#edit-submitted-name-surname").val() == "Name Surname"){

        return false;
    }else if($("#edit-submitted-telephone").val() == "" || $("#edit-submitted-telephone").val() == "Telephone"){

        return false;
    }else if($("#edit-submitted-e-posta").val() == "" || $("#edit-submitted-e-posta").val() == "E-MAIL"){

        return false;

    }else{  if($("#edit-submitted-messages").text() == "" || $("#edit-submitted-messages").text() == "Message"){

                return false;
            }else
        return true;
    }
}); 
```

但是当用户将该字段留空或在此字段中写入错误时，我想显示一个警报。例如，“请输入电子邮件地址””

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:18:34.543

使用警告框：

```
if($("#edit-submitted-name-surname").val() == "" || $("#edit-submitted-name-surname").val() == "Name Surname")
{
alert("Please input your name");
return false;
} 
```

使用 div：

//html

```
<input type = "text" name = "edit-submitted-name-surname" id = "edit-submitted-name-surname" />
<div class = "error" id = "name_error">Please input your name</div> 
```

//css

```
.error{ display: none; color: red;} 
```

//jQuery

```
Put this at the top of the function: $('.error').hide();

if($("#edit-submitted-name-surname").val() == "" || $("#edit-submitted-name-surname").val() == "Name Surname")
    {
    $('#name_error').show();
    return false;
    } 
```

# javascript - 允许跨域脚本和两个域之间的访问

> ID：10599590
> 
> 赞同：-1
> 
> 时间：2012-05-15T11:17:15.723
> 
> 标签：javascript, .htaccess, cross-domain, xss

我有两个域：domain1.com 和 domain2.com

我想允许这两个域之间的任何跨域脚本或通信。如何在这两个域之间使用内容时不会出现任何跨域错误？

另外，希望通过 iframe 访问页面并通过这两个域之间的 iframe 运行脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:23:05.190

如果您想使用浏览器作为一种通信方式，您可以启用/使用[CORS](http://en.wikipedia.org/wiki/Cross-Origin_Resource_Sharing)。由于跨域脚本是浏览器的限制，您还可以实现服务器端通信路径，您可以通过 web 服务在域之间进行通信

# python - 如何在 Python 包的 distutils 安装的构建阶段编译 CoffeeScript？

> ID：10599593
> 
> 赞同：6
> 
> 时间：2012-05-15T11:17:24.820
> 
> 标签：python, django, coffeescript, distutils, pypi

我正在开发一个 Python Django 包，它的前端组件使用了一些 CoffeeScript。

现在，我有一个相当脑残的外部脚本来处理 CoffeeScript 编译。它只是`coffee`为 src/coffee/ 目录中的每个 *.coffee 文件运行一个编译命令，并将输出存储在 src/static/js 中——这类似于`python ./setup.py build_ext --inplace`将 C 扩展的构建文件存储在开发源代码树中的方式。

这暂时有效，但它很俗气——它强制使用平面目录结构，并修改 src/static 中的文件（这与“静态”所暗示的相反）。

我想最大限度地了解事情，所以我研究了修改`distutils.ccompiler.CCompiler`以`coffee`作为 setup.py "build_ext" 子命令的子命令运行——我设想能够做这样的事情：

```
% python ./setup.py build_coffee
% python ./setup.py build_coffee --inplace
% python ./setup.py build_ext --inplace # implying 'build_coffee --inplace' 
```

...但我发现 distutils 的编译器 API 过于关注在这种情况下没有类似物的 C 编译细微差别，例如预处理、链接等。我还查看了 Cython 的代码（特别是 Cython 的`CCompiler`子类，它预处理 .pyx 文件进入 .c 源代码），但这看起来同样专业，并不适合这种情况。

有没有人有一个用 distutils setup.py 脚本编译 CoffeeScript 的好解决方案？或者，除此之外，一个好的替代建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:14:43.160

你可以有一个[预提交钩子](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)* 将 coffescript 编译成 javascript。

因此，每次您在 coffescript 中提交更改时，都会更新 javascript 版本。

*pre commit hook：实现方式取决于您使用的 VCS，并取决于您使用的是健全的 VCS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:17:44.773

您可以将其滚动到自定义的 manage.py 命令中。 [请在此处查看官方 Django 文档，](https://docs.djangoproject.com/en/1.4/howto/custom-management-commands/)这样每次服务器运行时脚本都会运行，始终会生成干净的 js。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-03T08:38:30.623

也许看看**[DukPy](https://github.com/amol-/dukpy)** ...它是一个简单的 Python javascript 解释器，可以编译`CoffeeScript`、和. 用法很简单，导入编译如下：`TypeScript``BabelJS``JSX`

```
import dukpy
dukpy.coffee_compile("CoffeeScript goes here!") 
```

**注意：** DukPy 是[Python-CoffeeScript](https://github.com/doloopwhile/Python-CoffeeScript)包的继承者，不再维护。

# active-directory - 调用 Active Directory FindAll() 时出现 System.AccessViolationException

> ID：10599594
> 
> 赞同：4
> 
> 时间：2012-05-15T11:17:27.387
> 
> 标签：active-directory, access-violation, directoryservices, findall

我在 C# .Net 4 中有一个简单的代码片段，在 System.DirectoryServices 中的 DirectorySearcher 上调用 .FindAll() 时随机给出访问冲突

该方法所做的只是找出用户是否已加载到 Active Directory 中并返回目录条目。

我在网上搜索过，可以在 SharePoint 博客和论坛中找到多次提到的异常，但没有来自普通的 C# .net 4 服务。

我的问题是我的服务是否会发生同样的访问违规，因此我需要相同的修补程序来解决我的问题吗？

修补程序： [http ://social.technet.microsoft.com/forums/en-US/sharepointadmin/thread/4634f4f4-7857-4de3-9bc5-fcbb946bd8df](http://social.technet.microsoft.com/forums/en-US/sharepointadmin/thread/4634f4f4-7857-4de3-9bc5-fcbb946bd8df)

编码：

```
 deSearch.Filter = String.Format("(&(SAMAccountName={0}))", userName);

            using (SearchResultCollection results = deSearch.FindAll())
            {
                if (results.Count > 0)
                {
                    de = results[0].GetDirectoryEntry();
                    return de;
                }
                else
                    return null;
            } 
```

例外：

System.AccessViolationException：试图读取或写入受保护的内存。这通常表明其他内存已损坏。在 System.DirectoryServices.Interop.UnsafeNativeMethods.IntADsOpen.GetObject(String className, String relativeName) 在 System.DirectoryServices.DirectoryEntries.Find(String name, String schemaClassName) 在 System.DirectoryServices.DirectoryEntries.Find(String name)

# html - 为什么当我在谷歌字体中使用流沙字体时»显示为«？

> ID：10599595
> 
> 赞同：3
> 
> 时间：2012-05-15T11:17:42.353
> 
> 标签：html, utf-8, character, webfonts, google-webfonts

我想在网页上打印一个“»”。我使用 UTF-8 编写字符（没有字符码只是字符）

使用来自谷歌网络字体目录的特定字体“流沙”字体重量 700，它指向左侧而不是右侧。目录中的其他字体工作正常。

我想要的角色叫 » 但我得到的角色是 «

它们也被称为：角引号，左，charcode：«
角引号，右字符码：»

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:20:34.833

大概是因为字体文件有错误。向谷歌报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-05T11:05:40.250

强制该字符为正常字体粗细，例如：

```
<span style="font-weight:normal">&raquo;</span> 
```

尽管这是一个至少 3 年的错误，但没有人会费心去修复字体。

# c# - 使用 Compression.DeflateStream 压缩和解压缩 Stream

> ID：10599596
> 
> 赞同：25
> 
> 时间：2012-05-15T11:17:42.767
> 
> 标签：c#, .net, stream, compression

我正在尝试使用[Compression.DeflateStream](http://msdn.microsoft.com/en-us/library/system.io.compression.deflatestream.aspx)压缩和解压缩 Stream 。压缩似乎可以正常工作，因为下面的代码将我的 Stream 压缩为 110 字节长的数组。但是，读取解压缩的 Stream 会导致一个空字符串。

```
class Program
{
    static void Main(string[] args)
    {
        // Compress a random string value
        string value = Path.GetRandomFileName();
        byte[] compressedBytes;

        using (var writer = new StreamWriter(new MemoryStream()))
        {
            writer.Write(value);
            writer.Flush();
            writer.BaseStream.Position = 0;

            compressedBytes = Compress(writer.BaseStream);
        }

        // Decompress compressed bytes
        Stream decompressedStream = Decompress(compressedBytes);
        // here already applies: decompressedStream.Length == 0

        using (var reader = new StreamReader(decompressedStream))
        {
            string decompressedValue = reader.ReadToEnd();

            if (value == decompressedValue)
                Console.WriteLine("Success");
            else
                Console.WriteLine("Failed");
        }
    }

    private static byte[] Compress(Stream input)
    {
        using (var compressStream = new MemoryStream())
        using (var compressor = new DeflateStream(compressStream, CompressionMode.Compress))
        {
            input.CopyTo(compressor);
            return compressStream.ToArray();
        }
    }

    private static Stream Decompress(byte[] input)
    {
        var output = new MemoryStream();

        using (var compressStream = new MemoryStream(input))
        using (var decompressor = new DeflateStream(compressStream, CompressionMode.Decompress))
            decompressor.CopyTo(output);

        output.Position = 0;
        return output;
    }
} 
```

谁能帮我解决这个问题？非常感谢。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-15T11:31:25.763

修复你的`Compress`功能：

```
private static byte[] Compress(Stream input)
{
    using(var compressStream = new MemoryStream())
    using(var compressor = new DeflateStream(compressStream, CompressionMode.Compress))
    {
        input.CopyTo(compressor);
        compressor.Close();
        return compressStream.ToArray();
    }
} 
```

在返回结果字节数组之前未刷新压缩流。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-27T21:36:30.540

所有这些答案都与理想形式相去甚远，因为你们都忘记了“使用”处理和关闭流意味着不需要额外的 Close() 。我认为理想的代码是这样的：

```
public static class CompressionHelper
{
    public static byte[] Compress(byte[] data)
    {
        byte[] compressArray = null;
        try
        {
            using (MemoryStream memoryStream = new MemoryStream())
            {
                using (DeflateStream deflateStream = new DeflateStream(memoryStream, CompressionMode.Compress))
                {
                    deflateStream.Write(data, 0, data.Length);
                }
                compressArray = memoryStream.ToArray();
            }
        }
        catch (Exception exception)
        {
            // do something !
        }
        return compressArray;
    }

    public static byte[] Decompress(byte[] data)
    {
        byte[] decompressedArray = null;
        try
        {
            using (MemoryStream decompressedStream = new MemoryStream())
            {
                using (MemoryStream compressStream = new MemoryStream(data))
                {
                    using (DeflateStream deflateStream = new DeflateStream(compressStream, CompressionMode.Decompress))
                    {
                        deflateStream.CopyTo(decompressedStream);
                    }
                }
                decompressedArray = decompressedStream.ToArray();
            }
        }
        catch (Exception exception)
        {
            // do something !
        }

        return decompressedArray;
    }
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-15T11:36:32.063

尝试关闭流：

```
class Program
{
    static void Main(string[] args)
    {
        // Compress a random string value
        string value = DateTime.Now.ToLongTimeString();
        byte[] compressedBytes;

        using (var stream = new MemoryStream(Encoding.UTF8.GetBytes(value)))
        {
            compressedBytes = Compress(stream);
        }

        // Decompress compressed bytes
        using (var decompressedStream = Decompress(compressedBytes))
        using (var reader = new StreamReader(decompressedStream))
        {
            string decompressedValue = reader.ReadToEnd();

            if (value == decompressedValue)
                Console.WriteLine("Success");
            else
                Console.WriteLine("Failed");
        }
    }

    public static byte[] Compress(Stream input)
    {
        using (var compressedStream = new MemoryStream())
        using (var zipStream = new GZipStream(compressedStream, CompressionMode.Compress))
        {
            input.CopyTo(zipStream);
            zipStream.Close();
            return compressedStream.ToArray();
        }
    }

    public static Stream Decompress(byte[] data)
    {
        var output = new MemoryStream();
        using(var compressedStream = new MemoryStream(data))
        using(var zipStream = new GZipStream(compressedStream, CompressionMode.Decompress))
        {
            zipStream.CopyTo(output);
            zipStream.Close();
            output.Position = 0;
            return output;
        }
    }
} 
```

# delphi - TParam.LoadFromStream 在 Delphi XE2 中不起作用？

> ID：10599607
> 
> 赞同：1
> 
> 时间：2012-05-15T11:18:37.953
> 
> 标签：delphi, delphi-xe2

我在 Delphi XE2 中编写了以下代码。

```
var
stream : TStringStream;

begin
stream := TStringStream.Create;

//Some logic to populate stream from memo.

ShowMessage(stream.datastring); //This line is showing correct data

// some Insert query with below parameter setting
ParamByName('Text').LoadFromStream(stream , ftMemo); 
```

但这将文本存储为???? 在表中。

这种类型的代码在 Delphi 4 中运行良好。

Delphi XE2 中的 TParam.LoadFromStream 函数有什么问题吗？

**编辑：** 表格字段的类型为“文本”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:49:30.213

您问题的根源`TStringStream`在于 D2009+ 中的操作方式与 D4 中的操作方式不同。

在 D4 中，`TStringStream`是一个简单的`AnsiString`变量包装器。该`DataString`属性只是返回对该变量的直接引用，并且所有读/写操作都直接在该变量的内容上进行。流的字节和字符串字符在当时基本上是一回事。

在 D2009+ 中，`TStringStream`现在是围绕`TBytes`编码字节数组的包装器，其中默认编码是您的应用程序运行的操作系统的默认 Ansi 编码。如果使用 将字符串写入流`WriteString()`，它会使用流的编码从 Unicode 编码为字节，然后存储这些编码的字节。如果使用`ReadString()`或读取`DataString`属性从流中读取字符串，则存储的字节将被解码为 Unicode 字符串。任何其他读/写操作都对原始编码字节进行操作，就像任何其他流类型一样。因此，当您调用 时`TParam.LoadFromStream()`，它正在读取原始编码字节，而不是 Unicode 字符串。流的原始字节和字符串字符不再是**一回事**了。所以你看到的数据`ShowMessage()`不是`TParam`看到的相同数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T10:31:11.693

在做了一些试验和错误方法之后，我找到了解决这个问题的方法。我们可以使用下面的代码，

```
ParamByName('Text').AsMemo := SampleMemo.Text; 
```

# c# - 尝试将图像保存到硬盘给我错误：不支持 URI 格式

> ID：10599613
> 
> 赞同：1
> 
> 时间：2012-05-15T11:19:08.733
> 
> 标签：c#

这是我正在使用的功能，我想将图像保存在我从网站上获得的链接中的硬盘上。

```
public void GetAllImages()
{

  // Bing Image Result for Cat, First Page
  string url = "http://www.bing.com/images/search?q=cat&go=&form=QB&qs=n";

  // For speed of dev, I use a WebClient
   WebClient client = new WebClient();
   string html = client.DownloadString(url);

   // Load the Html into the agility pack
   HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
   doc.LoadHtml(html);

   // Now, using LINQ to get all Images
   /*List<HtmlNode> imageNodes = null;
   imageNodes = (from HtmlNode node in doc.DocumentNode.SelectNodes("//img")
                              where node.Name == "img"
                              && node.Attributes["class"] != null
                              && node.Attributes["class"].Value.StartsWith("sg_t")
                              select node).ToList();*/

   var imageLinks = doc.DocumentNode.Descendants("img")
        .Where(n => n.Attributes["class"].Value == "sg_t")
        .Select(n => HttpUtility.ParseQueryString(n.Attributes["src"].Value["amp;url"])
        .ToList();

   foreach (string node in imageLinks)
     {
      y++;
      //Console.WriteLine(node.Attributes["src"].Value);
      richTextBox1.Text += node + Environment.NewLine;
      Bitmap bmp = new Bitmap(node);
      bmp.Save(@"d:\test\" + y.ToString("D6") + ".jpg");

      }

 } 
```

在 foreach 的底部，我使用 Bitmap，但后来我得到了错误。为什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:34:04.337

您将必须先下载图像。您不能像这样从 URI 中保存图像。使用 WebClient 获取图像的字节，然后使用该数据创建图像。

像这样的东西：

```
private System.Drawing.Image GetImage(string URI)
    {
        WebClient webClient = new WebClient();
        byte[] data = webClient.DownloadData(URI);
        MemoryStream memoryStream = new MemoryStream(data);
        return System.Drawing.Image.FromStream(memoryStream);
    } 
```

然后，我建议使用 System.Drawing.Image.Save 将其保存出来：http: [//msdn.microsoft.com/en-us/library/system.drawing.image.save.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.image.save.aspx)

# linux - 压缩 Web Root：为什么不能很好地减少 CPU 负载？

> ID：10599614
> 
> 赞同：1
> 
> 时间：2012-05-15T11:19:10.647
> 
> 标签：linux, find, zip, nice

```
nice -n 19 find . -type f \( -iname "*.php" -o -iname "*.js" -o -iname "*.inc" \) \
  -exec zip live.zip '{}' \; 
```

上述命令在我们的实时 CentOS 服务器上运行，就好像该`nice`命令不存在一样。大约 60 秒后，我可以看到使用该命令`zip`时它位于“顶部” 。`top`服务器开始翻倒，我不得不让命令崩溃。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:45:21.253

从评论中我推断您的服务器内存不足，这实际上根本不是 CPU 或 I/O 或优先级问题。

尝试用 tar 之类的流式解决方案替换压缩。这应该会大大减少所需的内存：

```
find . -type f \( -iname "*.php" -o -iname "*.js" -o -iname "*.inc" \) -print0 \
    | xargs -0 tar cvzf live.tar.gz 
```

在此命令上使用`nice`仍然是进一步减少影响的选择。它必须与可能更长的运行时间和同时使用的其他资源（尤其是内存）相平衡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:37:13.410

`nice`只设置一个进程的调度优先级。它不限制它消耗多少 CPU 时间。

所以：如果一个低优先级的进程想要消耗大量的 CPU 时间/资源，那么它*会*得到它们。*直到具有更高优先级的进程占用 CPU 时间。*

关键是：如果 CPU 没有其他事情可做，那么为什么不将所有 CPU 时间提供给需要它的进程，即使它没有高优先级？

如果您想将 CPU 使用率限制为最大值的百分比，请考虑使用类似[`cpulimit`](http://cpulimit.sourceforge.net/)

* * *

编辑：

`zip`可能会严重减慢速度的其他原因是：

1.  磁盘 I/O：您可以[`ionice`](http://linux.die.net/man/1/ionice)在某些发行版上控制它（不确定 CentOS 是否默认具有它） - David Schmitt 在下面的评论中指出了这一点。

2.  `zip`可能会分配大量内存，并换出其他进程。然后，当这些进程唤醒时（比如`mysqld`收到查询），它们就会变得迟缓。您可以通过减少[Swappiness](http://en.wikipedia.org/wiki/Swappiness)来解决这个问题。但这是一个系统级参数，您可能希望保持不变。

# sql-server - 日志表架构更改

> ID：10599616
> 
> 赞同：2
> 
> 时间：2012-05-15T11:19:16.587
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, triggers

每当我进行架构更改时，有什么方法可以记录对`Schema`a所做的更改？`Table`

我在这里阅读了一篇关于**[DDL Triggers](http://www.sqlteam.com/article/using-ddl-triggers-in-sql-server-2005-to-capture-schema-changes)**的文章。但它没有说明在表的模式中所做的具体更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:23:48.880

这将非常困难，因为在 SSMS 中，表实际上会在后台被删除并重建（取决于架构更改的复杂性以及您是否启用了“防止保存需要重新创建表的更改” SSMS 中的选项） - 记录所有不同类型的更改将是一场噩梦。（约束被删除，只能重新创建 - 当您可能所做的只是重新排列连接表中的列时，批量重新插入、重命名等）

如果您认真对待跟踪架构更改，我强烈建议您编写架构脚本（使用 MSSMS 中的生成脚本选项）并将生成的文件检查到 SVN / SourceSafe / TFS 并使用可用于这些系统的许多比较工具。

或者，您可以使用为您完成所有这些工作的 3rd 方产品，例如 Red Gates SQL Source Control：

[http://www.red-gate.com/products/sql-development/sql-source-control/](http://www.red-gate.com/products/sql-development/sql-source-control/)

**编辑：您可能会发现这很有用 - 它利用了 Service Broker (SQL 2005+) 和 SSB 队列：**

[http://www.mssqltips.com/sqlservertip/2121/event-notifications-in-sql-server-for-tracking-changes/](http://www.mssqltips.com/sqlservertip/2121/event-notifications-in-sql-server-for-tracking-changes/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-02T11:39:28.257

对于这个问题，我可能会使用[Event Notifications](http://msdn.microsoft.com/en-us/library/ms189453.aspx)。尽管我认为 DDL 触发器确实说明了对表所做的特定更改，但仅触发器定义：

```
Create Trigger tr_DDLNotikums
    On DataBase
For **DDL_DATABASE_LEVEL_EVENTS** 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-21T23:06:31.310

Use DDL Trigger In Below Format

```
 CREATE TRIGGER tr_DDL_Database ON DATABASE 
 FOR DDL_SCHEMA_EVENTS
 AS Begin
   Insert Into LogTable (XmlColumn)
   SELECT EVENTDATA()
 End 
```

# tsql - 排序分层表 CTE 查询

> ID：10599624
> 
> 赞同：1
> 
> 时间：2012-05-15T11:19:38.193
> 
> 标签：tsql, hierarchy

如何使用 CTE 查询对分层表进行排序？

样品表：

```
|ID|Name  |ParentID|
| 0|      |-1      |
| 1|1     |0       |
| 2|2     |0       |
| 3|1-1   |1       |
| 4|1-2   |1       |
| 5|2-1   |2       |
| 6|2-2   |2       |
| 7|2-1-1 |5       | 
```

我最喜欢的结果是：

```
|ID|Name  |ParentID|Level
| 0|      |-1      |0
| 1|1     |0       |1
| 3|1-1   |1       |2
| 4|1-2   |1       |2
| 2|2     |0       |1
| 5|2-1   |2       |2
| 7|2-1-1 |5       |3
| 6|2-2   |2       |2 
```

另一个样本：

另一个样本：

```
|ID|Name      |ParentID|
| 0|          |-1      |
| 1|Book      |0       |
| 2|App       |0       |
| 3|C#        |1       |
| 4|VB.NET    |1       |
| 5|Office    |2       |
| 6|PhotoShop |2       |
| 7|Word      |5       | 
```

我最喜欢的结果是：

```
|ID|Name      |ParentID|Level
| 0|          |-1      |0
| 1|Book      |0       |1
| 3|C#        |1       |2
| 4|VB.NET    |1       |2
| 2|App       |0       |1
| 5|Office    |2       |2
| 7|Word      |5       |3
| 6|PhotoShop |2       |2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:08:36.937

该[`hierarchyid`](http://msdn.microsoft.com/en-us/library/bb677290.aspx)数据类型能够表示分层数据，并且已经具有所需的排序顺序。如果您无法*替换*`ParentID`列，则可以即时转换为它：

（这个脚本大部分是数据设置，实际答案很小）

```
declare @t table (ID int not null,Name varchar(10) not null,ParentID int not null)
insert into @t(ID,Name,ParentID)
select 0,''          ,-1 union all
select 1,'Book'      ,0  union all
select 2,'App'       ,0  union all
select 3,'C#'        ,1  union all
select 4,'VB.NET'    ,1  union all
select 5,'Office'    ,2  union all
select 6,'PhotoShop' ,2  union all
select 7,'Word'      ,5

;With Sensible as (
    select ID,Name,NULLIF(ParentID,-1) as ParentID
    from @t
), Paths as (
    select ID,CONVERT(hierarchyid,'/' + CONVERT(varchar(10),ID) + '/') as Pth
    from Sensible where ParentID is null
    union all
    select s.ID,CONVERT(hierarchyid,p.Pth.ToString() + CONVERT(varchar(10),s.ID) + '/')
    from Sensible s inner join Paths p on s.ParentID = p.ID
)
select
    *
from
    Sensible s
        inner join
    Paths p
        on
            s.ID = p.ID
order by p.Pth 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:32:47.187

`ORDER BY Name`应该按需要工作：

```
WITH CTE 
AS(
    SELECT parent.*, 0 AS Level
    FROM @table parent
    WHERE parent.ID = 0

    UNION ALL

    SELECT parent.*, Level+1
    FROM @table parent
    INNER JOIN CTE prev ON parent.ParentID = prev.ID
)

SELECT * FROM CTE 
ORDER BY Name 
```

这是您的示例数据（下次自己添加）：

```
declare @table table(ID int,Name varchar(10),ParentID int);
insert into @table values(0,'',-1);
insert into @table values(1,'1',0);
insert into @table values(2,'2',0);
insert into @table values(3,'1-1',1);
insert into @table values(4,'1-2',1);
insert into @table values(5,'2-1',2);
insert into @table values(6,'2-2',2);
insert into @table values(7,'2-1-1',5); 
```

结果：

```
ID  Name    ParentID    Level
0             -1          0
1    1         0          1
3    1-1       1          2
4    1-2       1          2
2    2         0          1
5    2-1       2          2
7    2-1-1     5          3
6    2-2       2          2 
```

# java - 导航结果集是否取决于所使用的驱动程序类型？

> ID：10599626
> 
> 赞同：0
> 
> 时间：2012-05-15T11:19:43.107
> 
> 标签：java, database, jdbc, resultset

假设我正在使用驱动程序并正在执行数据库调用以获取一些数据。我将数据存储在结果集中。

我的问题是，遍历由 DB 调用形成的 resultSet 是否取决于潜水员？如果我们只能进行仅向前遍历或方向不敏感的遍历并且全部取决于所使用的驱动程序的类型？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T17:47:17.493

是的，对 ResultSet 类型的支持取决于驱动程序。所有 JDBC 驱动程序都必须支持`TYPE_FORWARD_ONLY`，所有其他 ResultSet 类型都是可选的：一些数据库不支持滚动，驱动程序实现者并不总是希望通过检索所有行并将它们保存在内存驱动程序中来模拟它（更不用说潜在的以这种方式耗尽所有可用内存）。

# ruby-on-rails - Ruby 1.8 上的 Gem 为 Gem::Specification:Class (NoMethodError) 提供了“未定义的方法 `dirs'”

> ID：10599638
> 
> 赞同：0
> 
> 时间：2012-05-15T11:20:43.030
> 
> 标签：ruby-on-rails, ruby, rubygems

Rubygems `NoMethodError`(Ruby 1.8) 出现错误。

这些是旧的 Rails 2.3 站点，所以我希望不必升级到 1.9。

它发生在所有 gem 命令中，包括`gem -v`.

错误是`rubygems.rb:959:in '_deprecated_source_index': undefined method 'dirs' for Gem::Specification:Class (NoMethodError)`。

这是完整的堆栈跟踪：

```
NOTE: Gem.searcher is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.searcher called from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:34.
NOTE: Gem.source_index is deprecated, use Specification. It will be removed on or after 2011-11-01.
Gem.source_index called from /usr/lib/ruby/site_ruby/1.8/rubygems/gem_path_searcher.rb:81.
/usr/lib/ruby/site_ruby/1.8/rubygems.rb:959:in `_deprecated_source_index': undefined method `dirs' for Gem::Specification:Class (NoMethodError)
    from /usr/lib/ruby/site_ruby/1.8/rubygems/deprecate.rb:39:in `skip_during'
    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:958:in `_deprecated_source_index'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/deprecate.rb:63:in `send'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/deprecate.rb:63:in `source_index'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/gem_path_searcher.rb:81:in `init_gemspecs'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/gem_path_searcher.rb:13:in `initialize'
    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:951:in `new'
    from /usr/lib/ruby/site_ruby/1.8/rubygems.rb:951:in `_deprecated_searcher'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/deprecate.rb:63:in `send'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/deprecate.rb:63:in `searcher'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:34:in `require'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/config_file.rb:50
    from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/gem_runner.rb:8
    from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require'
    from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'
    from /usr/bin/gem:9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:29:44.800

降级您的红宝石。您必须直接从源代码安装它，因为您的 gem 命令不起作用。

我自己使用 Ruby 1.8.7，到目前为止似乎运行良好的 ruby​​gems 版本是 1.6.0。

[http://rubyforge.org/frs/?group_id=126](http://rubyforge.org/frs/?group_id=126)

# android - Android：在横向模式下拍摄的照片力

> ID：10599639
> 
> 赞同：1
> 
> 时间：2012-05-15T11:20:46.503
> 
> 标签：android, image, camera, photo

嗨，已经建立在[Camera Preview](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/CameraPreview.html)上。

最初它甚至在纵向模式下也显示横向预览。我用一些额外的代码改变了这个。但是，无论您的横向/纵向，它始终以横向模式保存图像。

我现在也强制它进入纵向模式：

```
setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

**基本上我拍摄的任何图像都是横向的。（旋转肖像拍摄的图像）。**

我如何让它以定向模式保存照片，或锁定为纵向假设？

我考虑过拍摄照片阵列并旋转 90 度。但这需要将图像绘制到位图，旋转然后存储回数组。过度杀伤力？除非您可以直接旋转图像阵列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-15T12:59:59.200

首先使用以下片段检查相机方向：

```
 private int lookupRotation() {       
       WindowManager mWindowManager = (WindowManager) getSystemService(WINDOW_SERVICE);
       Display mDisplay = mWindowManager.getDefaultDisplay();
       int rotation = mDisplay.getRotation();
       Log.v(LOG_TAG, "rotation: " + rotation);
       return rotation;
   } 
```

然后使用检查您想要的旋转并设置您的方向：

```
if (rotation == Surface.ROTATION_0) {
    int degreesRotate = 90;
} 
```

使用以下 Snippet 调整位图大小并根据方向旋转您的位图：

```
 private Bitmap createBitmap(byte[] imageData, int maxWidth, int maxHeight,
        int rotationDegrees) throws FileNotFoundException {

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize = 2;
    options.inDensity = 240;
    int imageWidth = 0;
    int imageHeight = 0;

    Bitmap image = BitmapFactory.decodeByteArray(imageData, 0,
            imageData.length, options);

    imageWidth = image.getWidth();
    imageHeight = image.getHeight();

    if (imageWidth > maxWidth || imageHeight > maxHeight) {

        double imageAspect = (double) imageWidth / imageHeight;
        double desiredAspect = (double) maxWidth / maxHeight;
        double scaleFactor;

        if (imageAspect < desiredAspect) {
            scaleFactor = (double) maxHeight / imageHeight;
        } else {
            scaleFactor = (double) maxWidth / imageWidth;
        }

        float scaleWidth = ((float) scaleFactor) * imageWidth;
        float scaleHeight = ((float) scaleFactor) * imageHeight;

        Bitmap scaledBitmap = Bitmap.createScaledBitmap(image,
                (int) scaleWidth, (int) scaleHeight, true);
        image = scaledBitmap;
    }

    if (rotationDegrees != 0) {

        int w = image.getWidth();
        int h = image.getHeight();
        mtx.postRotate(rotationDegrees);
        Bitmap rotatedBMP = Bitmap.createBitmap(image, 0, 0, w, h, mtx,
                true);
        image = rotatedBMP;
    }

    return image;
} 
```

上述方法将根据方向返回位图。

# css - 使用 px 值相对于右下角定位背景

> ID：10599647
> 
> 赞同：1
> 
> 时间：2012-05-15T11:21:05.627
> 
> 标签：css

我想将其`background-image`放置在距右侧和底部一定距离的位置。
我不想使用`right borrom`，因为它会将其定位在角落，并且 % 或距离会`left top`阻止我的设计响应。
有没有 CSS 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-30T05:29:54.580

是的，您可以尝试使用**calc 进行类似的操作。**

```
.wrapper {
  background-image: url(http://www.bcebhagalpur.ac.in/images/Facebook.png);
  background-repeat: no-repeat;
  background-position: calc(100% - 40px) calc(100% - 40px);
  height: 300px;
  width: 50%;
  background-color: #DDD;
}
```

```
<div class="wrapper">
  <p>Lorem Ipsum Dolor set amet etc etc etc etc .....</p>
</div>
```

或者你可以只用 4 个边定位来做到这一点：

```
.wrapper {
  background-image: url(http://www.bcebhagalpur.ac.in/images/Facebook.png);
  background-repeat: no-repeat;
  background-position: right 40px bottom 40px;
  height: 300px;
  width: 50%;
  background-color: #DDD;
}
```

```
<div class="wrapper">
  <p>Lorem Ipsum Dolor set amet etc etc etc etc .....</p>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:52:21.993

用这个

```
.position
{
position:fixed;
right:200px;
bottom:150px;
} 
```

# python - 尝试，除非不工作

> ID：10599648
> 
> 赞同：1
> 
> 时间：2012-05-15T11:21:10.477
> 
> 标签：python

嗨，我有以下代码。当我运行 getDetails 函数时，try: 确实有效，但异常显示不正确。

```
data_dict = {}
dict_list = []
def createNameDict(filename):
  path = "C:\Users\user\Desktop"
  basename = "ParkingData_Part2.txt"
  filename = path + "//" + basename
  file = open(filename)
  contents = file.read()
  print contents,"\n"

  data_list = [lines.split(",") for lines in contents.split("\n")]

  for line in data_list:
    regNumber = line[0]
    details = (line[1],line[2],line[3])

    data_dict[regNumber] = details
  print data_dict,"\n"
  print data_dict.items(),"\n"

def getDetails(regNumber):
  #if regNumber in data_dict: 
    try:
      if regNumber in data_dict:
        print data_dict[regNumber]

        #print data_dict.get(regNumber)
    except:
      printNow(regNumber, "not in dictionary")
    return
def addRegistration(regNumber, details):
  try:
     data_dict[regNumber] = details

  except:
    print regNumber, "Key Already exist"

 #data_dict.update({regNumber:(details)})
  return data_dict 
```

我的输出是：

```
======= Loading Progam =======
>>> createNameDict("C:\Users\user\Desktop//ParkingData_Part2.txt")
EDF768, Bill Meyer, 2456, Vet_Parking
TY5678, Jane Miller, 8987, AgHort_Parking
GEF123, Jill Black, 3456, Creche_Parking
ABC234, Fred Greenside, 2345, AgHort_Parking
GH7682, Clara Hill, 7689, AgHort_Parking
JU9807, Jacky Blair, 7867, Vet_Parking
KLOI98, Martha Miller, 4563, Vet_Parking
ADF645, Cloe Freckle, 6789, Vet_Parking
DF7800, Jacko Frizzle, 4532, Creche_Parking
WER546, Olga Grey, 9898, Creche_Parking
HUY768, Wilbur Matty, 8912, Creche_Parking 

{'HUY768': (' Wilbur Matty', ' 8912', ' Creche_Parking'), 'GH7682': (' Clara Hill', ' 7689', ' AgHort_Parking'), 'GEF123': (' Jill Black', ' 3456', ' Creche_Parking'), 'WER546': (' Olga Grey', ' 9898', ' Creche_Parking'), 'TY5678': (' Jane Miller', ' 8987', ' AgHort_Parking'), 'ABC234': (' Fred Greenside', ' 2345', ' AgHort_Parking'), 'KLOI98': (' Martha Miller', ' 4563', ' Vet_Parking'), 'EDF768': (' Bill Meyer', ' 2456', ' Vet_Parking'), 'JU9807': (' Jacky Blair', ' 7867', ' Vet_Parking'), 'DF7800': (' Jacko Frizzle', ' 4532', ' Creche_Parking'), 'ADF645': (' Cloe Freckle', ' 6789', ' Vet_Parking')} 

[('HUY768', (' Wilbur Matty', ' 8912', ' Creche_Parking')), ('GH7682', (' Clara Hill', ' 7689', ' AgHort_Parking')), ('GEF123', (' Jill Black', ' 3456', ' Creche_Parking')), ('WER546', (' Olga Grey', ' 9898', ' Creche_Parking')), ('TY5678', (' Jane Miller', ' 8987', ' AgHort_Parking')), ('ABC234', (' Fred Greenside', ' 2345', ' AgHort_Parking')), ('KLOI98', (' Martha Miller', ' 4563', ' Vet_Parking')), ('EDF768', (' Bill Meyer', ' 2456', ' Vet_Parking')), ('JU9807', (' Jacky Blair', ' 7867', ' Vet_Parking')), ('DF7800', (' Jacko Frizzle', ' 4532', ' Creche_Parking')), ('ADF645', (' Cloe Freckle', ' 6789', ' Vet_Parking'))] 

>>> getDetails("GFT245")

>>> getDetails("HUY768")

(' Wilbur Matty', ' 8912', ' Creche_Parking')
>>> getDetails("JU9807")

(' Jacky Blair', ' 7867', ' Vet_Parking')

>>> getDetails("GH7682")

(' Clara Hill', ' 7689', ' AgHort_Parking')
>>> 
```

如果 GFT245 不在字典中，它应该显示 GFT245 不在字典中，但是当我执行程序时它不会那样出现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:25:48.513

问题出在此处：

```
if regNumber in data_dict:
    print data_dict[regNumber] 
```

当您询问`regNumber`字典中是否存在时，永远不会引发异常，因为如果`regNumber`不存在，您将不会尝试对其进行索引，因此不会引发`KeyError`异常。

如果您希望引发异常，那么只需执行以下操作：

```
print data_dict[regNumber] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:26:41.253

在您的`getDetails`函数中，该`except`部分永远不会触发，因为您在访问之前明确检查密钥是否在字典中，您可能希望将其重写为

```
if key in dict:
    # The key exists and do something
else:
    # The key doesn't exist, notify the user 
```

或者

```
try:
    print dict[key]
except KeyError:
    # The key doesn't exist, notify the user 
```

我更喜欢第一种的风格，因为异常是昂贵的，当然如果你知道你只会有少量的键在字典中不存在并且会导致异常，那么你可以优化第二种方式。

并且您的`addRegistration`函数应该重新编写以测试密钥是否已经存在并通知用户，否则添加数据，因为如果密钥已经存在，它不会警告您或引发异常，它只会更新/替换数据那把钥匙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T11:25:59.873

```
if regNumber in data_dict:
  print data_dict[regNumber] 
```

在访问`data_dict`. 如果`regNumber`不在，`dict`则不会尝试访问它。因此不会抛出异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-15T11:25:41.970

```
def getDetails(regNumber):
  #if regNumber in data_dict: 
    try:
      if regNumber in data_dict:
        print data_dict[regNumber]

        #print data_dict.get(regNumber)
    except:
      printNow(regNumber, "not in dictionary")
    return 
```

该`try`块中的任何内容实际上都*没有失败。*

为什么？因为`if regNumber in data_dict`考试。如果代码不在字典中，它将永远不会尝试查找它。

也许你的意思是：

```
def getDetails(regNumber):
    if regNumber in data_dict:
        print data_dict[regNumber]
    else:
        printNow(regNumber, "not in dictionary") 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T11:26:30.290

问题是

```
try:
  if regNumber in data_dict:
    print data_dict[regNumber]

    #print data_dict.get(regNumber)
except:
  printNow(regNumber, "not in dictionary") 
```

如果`regNumber`不在 中`data_dict`，则不会发生异常。将其更改为：

```
try:
    print data_dict[regNumber]
except:
  printNow(regNumber, "not in dictionary") 
```

# c# - WCF Rest 服务中未找到的端点的自定义消息

> ID：10599653
> 
> 赞同：1
> 
> 时间：2012-05-15T11:21:29.080
> 
> 标签：c#, wcf, rest, endpoints, wcf-endpoint

我正在使用 WCF 创建一个 ReSTful 服务。假设我的 OperationContract 是这样的：

```
[OperationContract]
[WebGet(
 ResponseFormat = WebMessageFormat.Json,
 BodyStyle = WebMessageBodyStyle.Wrapped,
 UriTemplate = "GetItemList/{token}/{value}"
)]
Stream GetItemList(string token); 
```

因此，当我调用[http://example.com/Service1.svc/GetItemList/myToken/myValue](http://example.com/Service1.svc/GetItemList/myToken/myValue)时，将调用该服务。

现在我想写一个默认方法说一些链接，'没有方法/端点存在'，当用户调用 [http://example.com/Service1.svc/GetItemList/myToken/](http://example.com/Service1.svc/GetItemList/myToken/)或 [http://example.com/ Service1.svc/GetItemList/myValue/](http://example.com/Service1.svc/GetItemList/myValue/)或 [http://example.com/Service1.svc/GetItemList/](http://example.com/Service1.svc/GetItemList/)

如何在我的代码中实现它？

现在我正在做的是这样的：

```
 [OperationContract]
 [WebGet(
   ResponseFormat = WebMessageFormat.Json,
   BodyStyle = WebMessageBodyStyle.Wrapped,
   UriTemplate = "GetItemList/"
 )]
 string ValidateItemList();

 [OperationContract]
 [WebGet(
   ResponseFormat = WebMessageFormat.Json,
   BodyStyle = WebMessageBodyStyle.Wrapped,
   UriTemplate = "GetItemList/{Val1}"
 )]
 string ValidateItemList(string Val1); 
```

在函数中，我只返回一个字符串“不存在方法”。

有没有更好的办法？我可以为定向到我的服务的 url 自定义错误消息吗？比如说，针对我的服务的所有非现有 url 请求的通用消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T15:26:02.743

基本上，WCF 的体系结构试图将任何协议（在本例中为 http）的低级组件抽象出来，因此您不必担心这些类型的细节。不幸的是，该引擎没有公开处理引擎无法正确路由的请求的好方法。

在这种情况下，URI 不能被“分派”到正确的合约实现类。引擎有这些很棒的组件，等等，Dispatchers，它们可以在 wcf 框架内通过配置或编程方式进行定制。问题是它们实施起来很痛苦。我在对另一个问题的回答中实现了意外消息调度程序，如下所列：

[处理传递给 WCF 服务的无效 URI](https://stackoverflow.com/questions/11193356/handling-invalid-uri-passed-to-a-wcf-service/11570181#11570181)

如果您需要任何进一步的信息，请告诉我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T09:11:24.570

对于上述问题，我没有找到任何可行的解决方案。但我找到了另一种选择。在 VS 2012 中，微软发布了 ASP.NET Web API。他们说，这是 WCF Rest 的下一个版本。所以在那个时候，你可以很容易地处理这些情况。我们可以在其中使用路由方法。

任何对该解决方案感兴趣的人都可以查看这篇文章以获得领先优势：[http ://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web- api](http://www.asp.net/web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api)

# python - 将 Windows [Ctrl+Tab] 键绑定更改为 Emacs 键绑定 Ctrl + xo 更改窗口

> ID：10599661
> 
> 赞同：1
> 
> 时间：2012-05-15T11:22:07.543
> 
> 标签：python, linux, emacs, keyboard-shortcuts, key-bindings

在 python 中编码时，我总是想点击`Ctrl`+`x` `o`以切换到刚刚从 emacs 使用中编码的另一个窗口，但 ipython 不理解这是一个键绑定，也没有任何其他程序。然后得出结论，我希望使用 emacs 样式的键绑定`Ctrl`+`x` `o`来切换窗口，我认为这是不可能的，但只是好奇是否有人尝试过类似的东西。我目前运行基于 Debian 的 linux Ubuntu 10.04。

# wordpress - WP 文档修订和每个组具有不同权限的用户组

> ID：10599665
> 
> 赞同：0
> 
> 时间：2012-05-15T11:22:19.997
> 
> 标签：wordpress

我有一个关于 WP 文档修订的问题。我有一个客户，它有一家母公司和 14 家姊妹公司。他们想要做的是建立一个存储所有文件的文档存储库，但诀窍是每个姊妹公司都有自己的财务状况，这些财务状况应该只对姊妹公司的高层管理人员可见，但需要对所有人都可见母公司的高管。

我已经查看了 WP Document Revisions，它几乎可以满足我对文档部分的要求，但我不知道如何创建用户组并为这些用户组设置权限。换句话说：

1.  设置具有查看和编辑文档权限的执行团队组
2.  每 14 家姊妹公司建立一个高层管理小组，每个公司都有自己的权限
3.  然后当不同的用户登录时，他们应该只看到设置了他们个人权限的文档。

任何人都可以帮我解决这个问题，我已经搜索了高低，但似乎找不到答案，即使有一个不同的插件可以更好地使我能够完成上述操作，我将不胜感激。

问候， 阿尼娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:41:06.787

我是 WP Document Revisions 的首席开发人员。如您所描述的，上述内容应该相对容易。有两种方法可以做到：

首先，您可以设置 WordPress 多站点安装，并为每个子公司设置单独的子站点，并为母公司设置一个父站点。主管可以登录所有站点，而经理可以登录他们的个人子站点和单个父站点。这种方法的优点是灵活性（如果您想将工作空间用于其他任务、品牌推广等），但这种灵活性会以复杂性为代价（设置 14 个子站点）。

另一种方法（也许我会根据您的需要推荐）是将文档分组到自定义分类法（可能是“公司”）中，然后根据文档分配给哪个公司来建立功能。这将允许您拥有一个站点，并且可以根据经过验证和测试的 WordPress 角色和功能系统分配功能。

第二个选项中描述的功能还没有开箱即用，但相对较小，实际上已经在为潜在的“Pro”插件版本开发。

我希望以上内容有所帮助。如果您有兴趣讨论根据您的需要定制插件，如上所述或其他方式，请随时[直接与我联系](http://ben.balter.com/contact/ "联络我")。

**更新：** *更新了联系信息的链接，因为 Stack Exchange 阻止了电子邮件链接。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T19:25:15.933

我相信我有一个附加插件的工作版本，它应该完全符合您的要求。该文件在这里（[https://github.com/benbalter/WP-Document-Revisions-Code-Cookbook/blob/master/taxonomy-permissions.php](https://github.com/benbalter/WP-Document-Revisions-Code-Cookbook/blob/master/taxonomy-permissions.php)），并且可以像任何其他插件一样安装。

[FAQ的最后一个问题（ https://github.com/benbalter/WP-Document-Revisions/wiki/Frequently-Asked-Questions](https://github.com/benbalter/WP-Document-Revisions/wiki/Frequently-Asked-Questions) ）列出了更多信息，但简而言之，它会开箱即用“部门”分类，并将根据添加的任何部门创建功能。然后，您将安装和激活成员（如果您还没有），并使用成员提供的界面来添加角色和分配能力。

如文件中所述，您可以告诉插件创建和使用任何不同的分类法（例如，“公司”而不是“部门”）。

它可能不是 100% 稳定的，因为它还没有在野外进行测试，但它应该可以工作。请让我知道它是否适合您，或者您是否希望我进行设置等。

# email - 通过 Google Places API 发送的电子邮件地址

> ID：10599666
> 
> 赞同：1
> 
> 时间：2012-05-15T11:22:22.147
> 
> 标签：email, google-maps, google-places-api

目前只能通过 Google Places 显示公司地址和电话号码。无论如何，即使没有通过google places api或任何其他google api显示，也可以获得公司电子邮件地址。

如果不是，您认为这在 Google Places API 的路线图上

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T00:44:47.020

As mentioned on the [Google Issue Tracker](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4148), this is not possible and their are no plans to offer email address through the Places API because it would make it too easy to scrape email addresses for the purposes of spamming companies concerned.

# elgg - 如何将drupal与elgg1.7或1.8集成为cms

> ID：10599667
> 
> 赞同：0
> 
> 时间：2012-05-15T11:22:22.777
> 
> 标签：elgg

我目前正在研究基于 elgg 的站点，我想将 drupal 与 elgg1.7 或 1.8 集成为 elgg 的 cms。这可能吗？如果是，请建议我该怎么做？是否有任何插件或任何插件另一种方式？

谢谢你的帮助！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T12:19:28.933

您可以将 Elgg 与任何 CMS 或任何 DB 驱动的站点集成，只要您了解 Elgg API 和通用 php。您可以在 Elgg 和您的外部软件之间共享会话，或者使用 Elgg 的 API 检查用户登录状态并根据该状态让用户登录/注册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T05:08:32.480

目前没有办法直接集成drupal 和elgg 网站。但是，您可以将它们设置为不同子域上的 2 个独立网站。然后添加 drupal/elgg 模块来创建您想要的链接。这取决于您想要什么功能，因此您可以重定向到 drupal 站点以添加内容。然后在 elgg 站点上，您可以在那里有一个模块来拉取 drupal 内容并显示它。

# github - 运行 Gollum wiki 会在以下位置产生 NoMethodError

> ID：10599669
> 
> 赞同：1
> 
> 时间：2012-05-15T11:22:26.133
> 
> 标签：github, github-pages, gollum-wiki

刚刚在 Ubuntu 服务器 11.10 上安装了 Gollum wiki，当我启动它时，我得到了这个错误：

```
NoMethodError at /
private method `settings' called for Precious::App:Class
file: create.rb location: default_markup line: 44 
```

要安装它，我运行了以下命令：

```
sudo apt-get install rubygems
sudo apt-get install libxslt-dev libxml2-dev
sudo gem install nokogiri
sudo gem install gollum
git init myWiki
cd myWiki
gollum ("sudo gollum" fails with the same error) 
```

想法？

注意：如果我注释掉有问题的行，页面将加载 Home.md 进行编辑，然后我可以保存它。但是 CSS 样式和页面图形不加载，我只看到一个格式很差的 html 页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:49:39.863

我有一个类似的设置，我的工作正常，虽然我也安装了 markdown gem：

```
gem install redcarpet 
```

这可能以某种方式设置了默认标记语言。查看代码，看起来有两行可能会有所帮助。在 lib/gollum/frontend/app.rb 我有这一行：

```
set :default_markup, :markdown 
```

在自述文件中，它谈到了运行你自己的 rake 应用程序，并且其中也有这一行：

```
Precious::App.set(:default_markup, :markdown) # set your favorite markup language 
```

由于我对 rake 了解不多，我只是建议进入 app.rb 文件并手动添加“set :default_markup, :markdown (或任何语言)”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T22:06:46.060

我相信我已经安装了 Sinatra 1.0，所以当我安装 gollum 时，它没有安装最新版本的 Sinatra。安装 Sinatra-1.3.2 解决了这个问题。我现在安装了 Sinatra 1.0 和 1.3.2。

由于 Sinatra 升级，我的 wiki 页面的样式现在可以正确加载，即使在取消注释 create.rb 的第 44 行之后 NoMethodError 消息也消失了（尽管我不确定我是否可以归功于 Sinatra 修复了 NoMethodError 消息）

# asp.net-mvc-3 - SyndicationItem 内容编码

> ID：10599672
> 
> 赞同：0
> 
> 时间：2012-05-15T11:22:35.770
> 
> 标签：asp.net-mvc-3, rss, syndication-item

我正在向 SyndicationItem Content 对象添加一些简单的标签，例如

```
var newSyndicationItem = new SyndicationItem(item.Title, item.Brief, new Uri("http://www.x.com/news/" + item.ID));
newSyndicationItem.PublishDate = new DateTimeOffset(item.PublishDate.Value);
newSyndicationItem.Content = SyndicationContent.CreateHtmlContent("<p style='direction:rtl' align='right' ><img src='http://x.sa.net/news/small/" + item.PicName + "' align='right' />" + item.Brief + "</p>"); 
```

并且 rss 输出对 html 标签进行编码，我该如何解决这个问题

```
<item>
      <link>http://www.x.com/news/details/3851</link>
      <title></title>
      <description>&lt;p style='direction:rtl' align='right' &gt;&lt;img src='http://x.sa.net/news/small/587_660.jpg' align='right' /&gt;قال أحمد خيري المتحدث الرسمي باسم حزب المصريين الأحرار في تصريح خاص لـ "الوطن"، أن سبب إصدار بيان الحزب اليوم، الذي يندد بالدعاية الدينية في المساجد&lt;/p&gt;</description>
      <pubDate>Mon, 14 May 2012 17:16:04 +0200</pubDate>
    </item> 
```

请指教。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T09:31:58.637

没有什么需要修复的。那是有效的 XML，每个像样的 XML 解析器都能够正确读取它。如果您没有正确编码描述标签的值，您最终可能会得到无效的 RSS。

# android - 面临在 sencha touch2.0 中隐藏覆盖的问题

> ID：10599675
> 
> 赞同：1
> 
> 时间：2012-05-15T11:22:40.627
> 
> 标签：android, sencha-touch, overlay, panel, sencha-touch-2

我需要在按钮单击时显示叠加层。为此，我编写了以下代码：-

```
 var miscButton = {
                xtype: 'button',
                iconCls: 'star',
                iconMask: true,
                width: 60,
                margin: '0 0 0 15',
                handler: function(){

                  fPanel.showBy(this);
                }
        };

       var fPanel = Ext.create('Ext.Panel',{
                    layout: 'vbox',
                    width: 150,
                    height: 300,
                    style: 'background-color: #5E99CC;',
                    items: [
                            {
                               xtype: 'list',
                               flex: 1,
                               itemTpl: '{item}',
                               data: [
                                          {item: 'item1'},
                                          {item: 'item2'},
                                          {item: 'item3'},
                                          {item: 'item4'},
                                          {item: 'item5'},
                                          {item: 'item6'},
                                          {item: 'item7'},
                                          {item: 'item8'},
                                          {item: 'item9'},
                                          {item: 'item10'},
                                          {item: 'item11'},
                                          {item: 'item12'},
                               ]                    
                            }
                    ]

        }); 
```

当我单击按钮时，它完美地显示了叠加层，但再次单击后它无法隐藏叠加层，如链接[http://docs.sencha.com/touch/2-0/#!/example/中给出的那样覆盖](http://docs.sencha.com/touch/2-0/#!/example/overlays)。

我不明白 showBy() 有什么问题。请帮我解决这个问题。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:30:32.887

要隐藏覆盖面板，只需拨打电话

```
fPanel.hide(); 
```

* * *

仅供参考，如果您希望能够在蒙版点击时隐藏面板，请使用面板的此属性，

```
modal: true,
hideOnMaskTap: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:48:27.630

这似乎是一个非常“丑陋”的解决方法，但它确实有效：

```
handler: function(){
  fPanel.setHidden(!fPanel.getHidden());
} 
```

该片段中可能存在一些输入错误，但我的想法是切换面板的`hidden`属性

# android - 我是否从亚马逊应用商店获得 INSTALL_REFERRER 意图？

> ID：10599678
> 
> 赞同：15
> 
> 时间：2012-05-15T11:22:52.650
> 
> 标签：android, android-intent, installation, amazon, referrer

我找不到任何文档提到亚马逊应用商店是否`Intent`像 Google Play 那样发送推荐安装后。尽管亚马逊的文档确实说我们可以在“ref”下的 URL 中设置引荐来源信息（与 Google Play 中的“引荐来源网址”相比），但它没有明确说明它们将如何传递给应用程序。

如果我确实收到了`Intent`，我应该这样做吗

```
extras.getString("ref") 
```

代替

```
extras.getString("referrer") 
```

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T16:04:06.293

我有同样的问题，我通过邮件询问亚马逊，这是他的反馈：

> 不幸的是，我们没有可供开发人员使用的此功能。

![在此处输入图像描述](../Images/e045844c7f56cda55f20240d45fb8fdb.png)

我坚持但他们说我一样，没有办法。

所以没有办法获得亚马逊推荐人，非常糟糕......

您无法识别唯一的引荐来源网址，只能通过代码中的常量来获得一堆亚马逊应用程序安装事件。

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-10-22T09:09:46.217

在您的清单文件中应该有

```
 <receiver android:name="com.test.Receiver" android:exported="true">
   <intent-filter>
       <action android:name="com.android.vending.INSTALL_REFERRER" />
   </intent-filter>
</receiver> 
```

并像这样为接收器创建类

```
public class Receiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    Bundle extras = intent.getExtras();
    String referrerString = extras.getString("referrer");

    Log.w("test", "Referrer is: " + referrerString);
}

} 
```

确保这会对您有所帮助

# html - 为什么 filter: alpha(opacity=100) 会破坏我的打印输出？(IE7 & IE8)

> ID：10599682
> 
> 赞同：1
> 
> 时间：2012-05-15T11:23:07.860
> 
> 标签：html, css, internet-explorer, internet-explorer-8, internet-explorer-7

我有一个以表格格式列出数据的网页。

标记看起来基本上是这样的：

```
<div style="filter: alpha(opacity=100)">
...Lots of other markup
<table>
    ..data from backend
</table>
</div> 
```

但是，当我使用 IE8 或 IE7 打印此页面时，打印出来的结果很奇怪，表格中缺少几行等。

经过一段时间的测试，我发现删除过滤器： alpha(opacity=100) （由一些花哨的 jquery-ui-script 放置在那里）解决了这个问题。

那么为什么 filter: alpha(opacity=100) 会破坏我的打印输出呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:16:29.420

你为什么首先使用这个指令？如果您希望块元素可见，请将其设置为`display: block`.

无论如何，关于为什么你的元素不显示的问题，你可能想阅读[这个](http://www.satzansatz.de/cssd/onhavinglayout.html)。

# arrays - E1012 常量表达式违反子范围界限；为什么它适用于变量？

> ID：10599685
> 
> 赞同：4
> 
> 时间：2012-05-15T11:23:27.843
> 
> 标签：arrays, delphi

方案项目1；

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

var
  ints: array[1..2] of Integer = (0,0);
  i   : Integer;

begin
  ints[5] := 10;    // doesn't compile
  i := 5;
  ints[i] := 10;    // Seems to works
  Writeln(ints[i]); // and even display the value
  Readln;
end. 
```

我已经为数组设置了一个绑定`ints`。

通常，我在尝试将值设置为有界数组之前检查`Low(ints)`and ......但是当我在寻找另一段[代码](https://stackoverflow.com/questions/10598365/checking-if-character-is-newline)时，我注意到我可以在边界之外使用索引并且它不会引发任何异常...`High(ints)`

我想知道它为什么起作用以及结果是什么？（例如，如果这部分内存没有*保留*，我可以破坏它，...）

我已经搜索了其他问题，但没有找到好的问题...如果存在，请不要犹豫，放置链接并关闭此问题，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T11:38:52.370

因为编译器不执行数据流分析。为了让编译器拒绝此代码，它需要分析您的代码并确保它`i`超出范围，并且编译器根本不会这样做。对更复杂的示例执行此操作需要编译器开发人员付出巨大的努力。

由于如果您打开范围检查，此代码将失败并出现运行时错误，因此我个人认为将此类数据流分析添加到编译器中几乎没有什么收获。如果您没有在启用范围检查的情况下运行，那么您确实应该这样做。

让编译器执行范围检查的众多好处之一是，在许多情况下，您可以删除范围检查代码。这将使您的代码更加清晰。但是，只有在完全控制索引并且可以静态分析代码时才能执行此操作。如果索引来自用户输入，那么显然您需要提供防止滥用的保护。

你问在没有范围检查的情况下运行这段代码会有什么后果。好吧，行为没有定义，真的任何事情都可能发生。最坏的情况是该程序总是对您有效，但对您最重要的客户却以一种关键的方式失败。

# spring-security - Spring：在 Sitemesh 装饰器中存储和使用的对象

> ID：10599691
> 
> 赞同：3
> 
> 时间：2012-05-15T11:23:50.740
> 
> 标签：spring-security

这可能是一个新手问题。

我有一个表 USER，其中包含有关登录、通行证和权限的信息。根据权限或角色，可以在以下之一中找到有关每个用户的详细信息：教师、学生、家长。当用户登录时，存储在 USER 表中的信息可以很容易地从安全上下文中获取。

我想在登录后一直在标题中显示名字和姓氏 - 这些可以从其他表中获取。

我的问题是：如何始终在会话中存储这些对象之一？或者只存储用户（它由spring存储）然后每次我需要详细信息时获取特定表是否可以？

我使用spring security 3、hibernate、jsp、sitemash。

如需更多说明：

我知道如何处理登录用户并限制某些内容。登录详细信息（id、pass、角色）存储在 USER 表中，这没关系 - 我可以获取它并显示在我想要的任何地方。问题是有关特定用户的详细信息（地址、姓名、电子邮件等）存储在另一个表中（学生、教师、家长 - 取决于 USER 表中的角色）。这是我想在每一页上都知道的——例如显示他/她的名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:51:31.377

简而言之 - 1.您需要扩展 spring User 以提供额外的字段。2.你需要实现UserDetailsS​​ervice接口并在安全上下文中引用它。3\. 现在您可以像这样在控制器中获取您的对象： authentication.getPrincipal() - 记住要转换为您的类型。

另外 - 我个人总是有 AbstracController，它是我项目中每个控制器的基础。在那里，除其他外，我有返回当前委托人的方法。

# iphone - AudioUnitInitialize 在初始化 AudioComponentInstance 时抛出错误

> ID：10599694
> 
> 赞同：4
> 
> 时间：2012-05-15T11:24:02.597
> 
> 标签：iphone, ios, core-audio, audio-recording

我正在使用下面的代码来初始化我的音频组件。

```
-(void) startListeningWithCoreAudio
{
     NSError *error = nil;

     [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayAndRecord error:&error];
     if (error) 
          NSLog(@"error setting up audio session: %@", [error localizedDescription]);

     [[AVAudioSession sharedInstance] setDelegate:self];

     OSStatus status = AudioSessionSetActive(YES);
     checkStatus(status);

          // Find the apple mic
    AudioComponentDescription desc;
    desc.componentType = kAudioUnitType_Output;
    desc.componentSubType = kAudioUnitSubType_VoiceProcessingIO;
    desc.componentFlags = 0;
    desc.componentFlagsMask = 0;
    desc.componentManufacturer = kAudioUnitManufacturer_Apple;

    AudioComponent inputComponent = AudioComponentFindNext( NULL, &desc );
    status = AudioComponentInstanceNew( inputComponent, &kAudioUnit );
    checkStatus( status );

          // enable mic output as our input
    UInt32 flag = 1;
    status = AudioUnitSetProperty( kAudioUnit, kAudioOutputUnitProperty_EnableIO, kAudioUnitScope_Input, kInputBus, &flag, sizeof(flag) );
    checkStatus(status);

          // Define mic output audio format
    AudioStreamBasicDescription audioFormat;
    audioFormat.mSampleRate         = 16000.0;
    audioFormat.mFormatID           = kAudioFormatLinearPCM;
    audioFormat.mFormatFlags        = kAudioFormatFlagIsSignedInteger | kAudioFormatFlagIsPacked;
    audioFormat.mFramesPerPacket    = 1;
    audioFormat.mChannelsPerFrame   = 1;
    audioFormat.mBitsPerChannel     = 16;
    audioFormat.mBytesPerPacket     = 2;
    audioFormat.mBytesPerFrame      = 2;

    status = AudioUnitSetProperty( kAudioUnit, kAudioUnitProperty_StreamFormat, kAudioUnitScope_Output, kInputBus, &audioFormat, sizeof(audioFormat) );
    checkStatus(status);

          // Define our callback methods
    AURenderCallbackStruct callbackStruct;
    callbackStruct.inputProc = recordingCallback;
    callbackStruct.inputProcRefCon = self;
    status = AudioUnitSetProperty( kAudioUnit, kAudioOutputUnitProperty_SetInputCallback, kAudioUnitScope_Global, kInputBus, &callbackStruct, sizeof(callbackStruct) );
    checkStatus(status);

          // By pass voice processing
     UInt32 audiobypassProcessing = [[NSUserDefaults standardUserDefaults] boolForKey:VOICE_BY_PASS_PROCESSING];
     status = AudioUnitSetProperty(kAudioUnit, kAUVoiceIOProperty_BypassVoiceProcessing, 
                                   kAudioUnitScope_Global, kInputBus, &audiobypassProcessing, sizeof(audiobypassProcessing));
     checkStatus(status);

          // Automatic Gain Control
     UInt32 audioAGC = [[NSUserDefaults standardUserDefaults]boolForKey:VOICE_AGC];
     status = AudioUnitSetProperty(kAudioUnit, kAUVoiceIOProperty_VoiceProcessingEnableAGC, 
                                   kAudioUnitScope_Global, kInputBus, &audioAGC, sizeof(audioAGC));
     checkStatus(status);

          //Non Audio Voice Ducking
     UInt32 audioDucking = [[NSUserDefaults standardUserDefaults]boolForKey:VOICE_DUCKING];
     status = AudioUnitSetProperty(kAudioUnit, kAUVoiceIOProperty_DuckNonVoiceAudio, 
                                   kAudioUnitScope_Global, kInputBus, &audioDucking, sizeof(audioDucking));
     checkStatus(status);

          //Audio Quality
     UInt32 quality = [[NSUserDefaults standardUserDefaults]integerForKey:VOICE_QUALITY];
     status = AudioUnitSetProperty(kAudioUnit, kAUVoiceIOProperty_VoiceProcessingQuality, 
                                   kAudioUnitScope_Global, kInputBus, &quality, sizeof(quality));
     checkStatus(status);

     status = AudioUnitInitialize(kAudioUnit);
     checkStatus(status);

    status = AudioOutputUnitStart( kAudioUnit );
    checkStatus(status);

    UInt32 audioRoute = (UInt32)kAudioSessionOverrideAudioRoute_Speaker;
    status = AudioSessionSetProperty(kAudioSessionProperty_OverrideAudioRoute, sizeof (audioRoute), &audioRoute);
    checkStatus(status);     
}

-(void) stopListeningWithCoreAudio
{ 
    OSStatus     status = AudioUnitUninitialize( kAudioUnit );
     checkStatus(status);

     status = AudioOutputUnitStop( kAudioUnit );
    checkStatus( status );

//     if(kAudioUnit)
//     {
//          status = AudioComponentInstanceDispose(kAudioUnit);
//          checkStatus(status);
//          kAudioUnit = nil;
//     }

    status = AudioSessionSetActive(NO);
     checkStatus(status);

     NSError *error = nil;
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategorySoloAmbient error:&error];
    if (error)
          NSLog(@"error setting up audio session: %@", [error localizedDescription]);
} 
```

它第一次工作正常。我的意思`startListeningWithCoreAudio`是由按钮按下事件调用。它可以很好地录制/处理音频。在其他事件中，我呼吁`stopListeningWithCoreAudio`停止录制/处理音频。

当我再次尝试调用该函数时，问题就来了`startListeningWithCoreAudio`。它为两个函数抛出错误。`AudioUnitInitialize`并且`AudioOutputUnitStart`从 调用`startListeningWithCoreAudio`。

任何人都可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T09:27:42.110

我找到了解决方案。如果我们背靠背调用下面的函数，就会产生问题。

```
extern OSStatus AudioUnitUninitialize(AudioUnit inUnit)                     
extern OSStatus AudioComponentInstanceDispose(AudioComponentInstance inInstance) 
```

因此，我通过以下方式在主线程上调用了 dispose 方法。

```
[self performSelectorOnMainThread:@selector(disposeCoreAudio) withObject:nil waitUntilDone:NO];

-(void) disposeCoreAudio
{
     OSStatus status = AudioComponentInstanceDispose(kAudioUnit);
     kAudioUnit = nil;
} 
```

它解决了这个问题。因此，正确的顺序是停止录制，取消初始化录制器并在主线程上处理录制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T18:42:19.847

一个可能的问题是您的代码试图在停止之前取消初始化正在运行的音频单元。

# ios - 如何在使用 RestKit 时发帖

> ID：10599696
> 
> 赞同：1
> 
> 时间：2012-05-15T11:24:05.110
> 
> 标签：ios, post, restkit

我知道网站上有多个这样的问题，但没有一个解决方案适合我。

我想做的只是使用 RestKit for iOS 向 Web 服务发布一个简单的帖子。

这是我正在使用的代码：

```
 RKClient *client = [RKClient sharedClient];
            client.authenticationType = RKRequestAuthenticationTypeHTTPBasic;
            [client post:[ACCOUNT_BASE_URL stringByAppendingString:@"/Register"] params:        

     [NSDictionary dictionaryWithObjectsAndKeys:
                                   _dateOfBirth.text, @"DOB",
                                   _emailAddress.text, @"Email",
                                   _firstName.text, @"FirstName",
                                   _lastName.text, @"LastName",
                                   _password.text, @"Password",
                                   _userName.text, @"UserName",
                                   nil] delegate:self]; 
```

我不断收到错误消息：RKResponse.m:164 询问是否可以验证身份验证空间：使用身份验证方法 = NSURLAuthenticationMethodServerTrust

此外，当我开始嗅探从模拟器发送的数据包时，我意识到根本没有发送 POST。

以前有人遇到过这个问题吗？请指出我正确的方向。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T01:44:16.837

确保您正在设置客户端的用户名和密码属性：

```
client.username = @"your_username"
client.password = @"your_password" 
```

# regex - 将tomcat访问日志放入SQL server数据库

> ID：10599701
> 
> 赞同：2
> 
> 时间：2012-05-15T11:24:15.833
> 
> 标签：regex, sed, awk

我有 tomcat 访问日志，其中包含以下条目：

```
50.47.142.25 - - [07/May/2012:00:00:14 +0000] 0 "GET /mywebpage/blah.jsp " 200 123 "-" "-" 
```

我希望将所有条目放在 SQL 表中，然后在其上运行 SQL 查询。

我正在考虑使用 GAWK (gnu AWK) 来获取 CSV 格式的所有行。就像是：

```
gawk '{print $1 ", " $2 ", " , " $3 ", " $4 ", " $5 ", " $6 ", " $7 ", " $8 ", " $9 ", " $9}' 
```

给我

```
50.47.142.25, -, -, [11/May/2012:08:51:02, 0, "GET /mywebpage/blah.jsp" 200, 123, -, - 
```

这让我接近 SQL 插入语句。除了，我需要日期时间的格式：

```
2012-05-11 08:51:02 
```

即没有前导方括号和SQLServer 希望它的格式。有什么提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T13:53:32.593

```
#!/usr/bin/awk -f
BEGIN {
    monthlist = "Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"
    c = split(monthlist, monthsarr)
    for (i = 1; i <= c; i++) {
        months[monthsarr[i]] = i
    }
    fieldlist = "1 2 3 5 8 10 11 14 15 17 20"
    fieldcount = split(fieldlist, fields)
    OFS = ","
}

{
    delim = ""
    c = split($0, logarr, /[ \[\]"]/)
    split(logarr[5], datearr, /[/:]/)
    ts = mktime(datearr[3] " " months[datearr[2]] " " datearr[1] " " datearr[4] " " datearr[5] " " datearr[6])
    logarr[5] = strftime("%F %T", ts)
    for (f = 1; f <= fieldcount; f++) {
        printf "%s%s", delim, logarr[fields[f]]
        delim = OFS
    }
    printf "\n"
} 
```

根据您的示例日志条目，输出如下所示：

```
50.47.142.25,-,-,2012-05-07 00:00:14,0,GET,/mywebpage/blah.jsp,200,123,-,- 
```

引号和方括号被丢弃，因为它们与空格一起用作字段分隔符。此外，这会创建很多错误字段，因此我使用字段列表进行迭代。

请注意，`mktime()`和`strftime()`函数是特定于 GNU AWK ( `gawk`) 的。

# svn - TeamCity v7 - 如果 SVN 外部路径无效，则接收通知

> ID：10599703
> 
> 赞同：0
> 
> 时间：2012-05-15T11:24:23.943
> 
> 标签：svn, teamcity, teamcity-7.0

如何配置 TeamCity，以便在 SVN 外部路径无效时收到通知（电子邮件或托盘）？

情况是构建没有开始，因为 VCS 根步骤失败并出现以下错误：

```
Error collecting changes for VCS repository 'XYZ trunk'
Checkout rule: 
Path is invalid: 
'https://SvnServer:8443/svn/DotNet/Code/Modules/ExternalABC/Tags/2.4.0.0/2.4.0.39711/bin'@39825 
```

在“XYZ 主干”上声明的外部指向无效路径。这已提交，并且**没有**发出任何通知。*自上次实际构建*成功以来，TeamCity 快速视图显示对该项目的绿灯。

就目前情况而言，构建被破坏，因为 XYZ Trunk 的检出​​没有编译（缺少外部 dll），但没有发送通知，托盘中也没有显示错误图标。

这似乎是错误的——我没有做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T18:57:18.653

我假设您已经设置了失败通知的通知规则。如果是这样，您只需要检查有问题的通知规则的“构建无法启动”。

如果您要在要为其设置通知的组下的“管理->组”下执行此操作。如果您想通知所有因更改而失败的构建的“所有用户”，您可以设置一个规则，将“构建失败”、“忽略不是由我的更改引起的失败”和“构建开始”都选中。

请注意，尽管当源代码控制服务器出现问题时，这可能会导致额外的“误报”通知。

# ruby-on-rails - 在 twitter bootstrap 中驯服“span”类

> ID：10599704
> 
> 赞同：0
> 
> 时间：2012-05-15T11:24:28.660
> 
> 标签：ruby-on-rails, css, twitter-bootstrap

我有一个带有 span4 的 div。当我向该 div（my_background_plate）添加带填充的类时，我不再连续获得 3 个 div，而是 2 个（填充将最后一个 span4 推到新行）。如何补偿？

```
 16   <% @projects.each do |p| %>
 17     <div id="projects" class="my_background_plate span4">
 18       <h3>
 19         <%= link_to p.name, project_path(p) %>
 20       </h3>
 21       <p>
 22         <%= p.description %>
 23       </p>                 
 24       <img src="http://placehold.it/205x140" alt="" class="thumbnail">
 25       <p>
 26         <% p.users.each do |u| %>       
 27           | <%= u.name %>
 28         <% end %> |        
 29       </p>
 30     </div>
 31   <% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:45:04.157

我发现答案有点挣扎。整个魔术是让带有 span 类的 div 从您的自定义类中解放出来，并将它们添加到下面的单独 div 中，如下所示。:)

```
 17     <div class="span4">    
 18       <div id="projects" class="my_background_plate"> 
```

# c# - 如果函数被委托调用，UpdatePanel 不会反映更改

> ID：10599707
> 
> 赞同：0
> 
> 时间：2012-05-15T11:24:36.413
> 
> 标签：c#, asp.net, updatepanel, ajaxcontroltoolkit, modalpopupextender

具有以下设置，如果您通过委托/事件处理程序更改它，为什么更新面板不反映标签文本更改？你会如何让它发挥作用？

测试.aspx：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Test.aspx.cs" Inherits="Test"
    EnableEventValidation="false" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title>Test</title>
</head>
<body style="text-align: center">
    <form id="form1" runat="server">
    <ajaxToolkit:ToolkitScriptManager runat="server" ID="ToolkitScriptManager1" EnableScriptGlobalization="true"
        EnableScriptLocalization="true" />
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Label ID="Label1" runat="server" Text="Example label"></asp:Label>
            <asp:Button ID="btnChange" OnClick="btnChange_Click" runat="server" Text="Change">
            </asp:Button>
            <table id="tableMessage" runat="server" style="display: none" >
                <tr>
                    <td>
                        <asp:Label ID="lb5" runat="server" Text="Warning"></asp:Label>
                    </td>
                </tr>
                <tr>
                    <td >
                        <asp:Label ID="lbMessage" runat="server"></asp:Label><br />
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Button ID="btnOk" runat="server" AccessKey="a" Font-Bold="True" Text="Ok"
                            Width="125px" OnClick="btnOk_Click" />
                        <asp:Button ID="btnCancel" runat="server" AccessKey="C" Font-Bold="True" Text="Cancel"
                            Width="125px" OnClick="btnCancel_Click" />
                    </td>
                </tr>
            </table>
            <asp:Button ID="btnOKError" runat="server" Text="OK" Style="display: none" />
            <ajaxToolkit:ModalPopupExtender
                ID="ModalPopupMessage" runat="server" TargetControlID="btnOKError" PopupControlID="tableMessage"
                OkControlID="btnOKError" CancelControlID="btnOKError" DropShadow="true">
            </ajaxToolkit:ModalPopupExtender>
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html> 
```

测试.aspx.cs：

```
using System;
using System.Web.UI;
using AsistenciasCapadatos;

public partial class Test : Page
{

    private EventHandler OkButtonClick
    {
        get { return SessionActual.Get<EventHandler>("OkButtonClick"); }

        set { SessionActual.Set("OkButtonClick", value); }
    }

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void btnChange_Click(object sender, EventArgs e)
    {
        MessageConfirm("Do you want to change label?", btnChange1_Click);
    }
    protected void btnChange1_Click(object sender, EventArgs e)
    {//the text property changes correctly but the updatepanel doesnt reflect it...viewstate ajax bug?
        Label1.Text = "Change1"; 
    }
    protected void btnChange2_Click(object sender, EventArgs e)
    {
        Label1.Text = "Change2";
    }

    protected void btnOk_Click(object sender, EventArgs e)
    {
        //Label1.Text = "Change1"; //this way works
        OkButtonClick.Invoke(sender, e); //this doesnt
    }
    protected void btnCancel_Click(object sender, EventArgs e)
    {

    }

    public void MessageConfirm(string message, EventHandler btnclick)
    {
        OkButtonClick = btnclick;
        lbMessage.Text = message;
        ModalPopupMessage.Show();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:49:47.157

最后我解决了它，改变了以下几行：

```
Page.GetType().InvokeMember(OkButtonClick.Method.Name, BindingFlags.InvokeMethod, null, Page, new []{sender, e}); //this works
//OkButtonClick.Invoke(sender, e); //this doesnt 
```

但我想知道为什么它会以这种方式工作......所以如果有人能解释它，我将给予他/她的答案......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:30:01.467

您是否尝试过调试通话完成`OkButtonClick`时获得的值`btnChange_Click`..

```
(new EventHandler(btnChange1_Click)).Invoke(sender, e); //this should work 
```

# r - read.table 和 read.delim 函数之间的区别

> ID：10599708
> 
> 赞同：9
> 
> 时间：2012-05-15T11:24:37.863
> 
> 标签：r, read.table

R语言中的`read.table()`和函数有什么区别？`read.delim()`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-15T12:57:44.233

当您不确定函数的作用时，除了阅读帮助页面外，您还可以检查函数的实际代码。例如，输入`read.delim`显示该函数包含以下代码：

```
> read.delim
function (file, header = TRUE, sep = "\t", quote = "\"", dec = ".", 
    fill = TRUE, comment.char = "", ...) 
read.table(file = file, header = header, sep = sep, quote = quote, 
    dec = dec, fill = fill, comment.char = comment.char, ...) 
```

因此，`read.delim()`它只是一个`read.table()`带有默认参数值的包装函数，在读取制表符分隔的数据时很方便。它与调用完全相同：

```
read.table(file, header = TRUE, sep = "\t", quote = "\"", 
    dec = ".", fill = TRUE, comment.char = "") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-15T11:27:21.747

来自 R 帮助：

*类似地，read.delim 和 read.delim2 用于读取分隔文件，默认使用 TAB 字符作为分隔符。请注意，这些变体中的 header = TRUE 和 fill = TRUE，并且注释字符被禁用。*

# ruby-on-rails - 路由错误或rails错误？

> ID：10599709
> 
> 赞同：1
> 
> 时间：2012-05-15T11:24:57.577
> 
> 标签：ruby-on-rails, routes, dev-to-production

我已经将我的路线设置到命名空间中，所以它看起来像

```
root to: "home#index"

namespace :users do
  root to: "profile#index"
  resources :registrations
  resources :sessions
end

namespace :admin do
  root to: "base#index"
end

rake routes |grep root
                root          /                               home#index
          admin_root          /admin(.:format)                admin/base#index
          users_root          /users(.:format)                users/profile#index 
```

在我的标题导航中，我有`= link_to "home", root_path`

在开发模式下一切正常，但在生产中完全崩溃

我`No route matches {:controller=>"users/home"}`在尝试访问会话/注册控制器（用户/会话/新）时得到

我的标头中的 root_path 尝试在命名空间中获取`home`控制器`users`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:31:54.797

区分每个的根路径，然后尝试

```
root to: "home#index" , :as => home_root

namespace :users do
  root to: "profile#index" , :as => users_root
  resources :registrations
  resources :sessions
end

namespace :admin do
  root to: "base#index" , :as => admin_root
end 
```

使用路径，如：home_root_path、users_root_path、admin_root_path

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:01:13.540

用户命名空间中没有主控制器，用户命名空间中有配置文件控制器。

您需要 users_root_path 才能访问“users/profile#index”。

但你是对的，我希望 root_path 去“home#index”。

# java - 弱哈希映射示例

> ID：10599710
> 
> 赞同：22
> 
> 时间：2012-05-15T11:25:06.530
> 
> 标签：java, weakhashmap

我创建一个 WeakHashMap 作为

```
WeakHashMap<Employee,String> map = new WeakHashMap<Employee,String>();
map.put(emp,"hello"); 
```

其中 emp 是一个 Employee 对象。现在，如果我执行 emp = null 或说不再引用 emp 对象，那么该条目是否会从 WeakHashMap 中删除，即 Map 的大小是否为零？
如果是 HashMap，反之亦然吗？
我对 WeakHashMap 的理解正确吗？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-15T11:58:05.780

一个非常简单的例子，可以启发已经说过的内容：

```
import java.util.WeakHashMap;

public class WeakHashMapDemo {

    public static void main(String[] args) {
        // -- Fill a weak hash map with one entry
        WeakHashMap<Data, String> map = new WeakHashMap<Data, String>();
        Data someDataObject = new Data("foo");
        map.put(someDataObject, someDataObject.value);
        System.out.println("map contains someDataObject ? " + map.containsKey(someDataObject));

        // -- now make someDataObject elligible for garbage collection...
        someDataObject = null;

        for (int i = 0; i < 10000; i++) {
            if (map.size() != 0) {
                System.out.println("At iteration " + i + " the map still holds the reference on someDataObject");
            } else {
                System.out.println("somDataObject has finally been garbage collected at iteration " + i + ", hence the map is now empty");
                break;
            }
        }
    }

    static class Data {
        String value;
        Data(String value) {
            this.value = value;
        }
    }
} 
```

输出 ：

```
 map contains someDataObject ? true
    ...
    At iteration 6216 the map still holds the reference on someDataObject
    At iteration 6217 the map still holds the reference on someDataObject
    At iteration 6218 the map still holds the reference on someDataObject
    somDataObject has finally been garbage collected at iteration 6219, hence the map is now empty 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-06-29T13:06:36.073

`HashMap`我运行示例代码以了解和之间的区别`WeakHashMap`

```
 Map hashMap= new HashMap();
            Map weakHashMap = new WeakHashMap();

            String keyHashMap = new String("keyHashMap");
            String keyWeakHashMap = new String("keyWeakHashMap");

            hashMap.put(keyHashMap, "helloHash");
            weakHashMap.put(keyWeakHashMap, "helloWeakHash");
            System.out.println("Before: hash map value:"+hashMap.get("keyHashMap")+" and weak hash map value:"+weakHashMap.get("keyWeakHashMap"));

            keyHashMap = null;
            keyWeakHashMap = null;

            System.gc();  

            System.out.println("After: hash map value:"+hashMap.get("keyHashMap")+" and weak hash map value:"+weakHashMap.get("keyWeakHashMap")); 
```

输出将是：

```
Before: hash map value:helloHash and weak hash map value:helloWeakHash
After: hash map value:helloHash and weak hash map value:null 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-15T11:28:26.267

> *是否会从 WeakHashMap 中删除该条目，即 Map 的大小是否为零？*

如果`emp`包含使 Employee[可强访问的最后一个引用，则](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/ref/package-summary.html#reachability)*可以*删除映射中的条目。

Java 文档总结得很好：

> 具有弱键的基于哈希表的 Map 实现。WeakHashMap 中的条目在其键不再常用时将被自动删除。更准确地说，给定键的映射的存在不会阻止该键被垃圾收集器丢弃[...]。当一个键被丢弃时，它的条目被有效地从映射中删除，所以这个类的行为与其他映射实现有些不同。

> *如果是 HashMap，反之亦然吗？*

从 WeakHashMap 中删除条目不会影响程序中的任何其他引用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-16T11:33:12.210

弱哈希映射示例：

```
Map map = new WeakHashMap();
Foo foo =  new Foo();
map.put(foo, "bar");
foo=null; // strong refrence is removed and object is available for garbage collection. 
```

哈希映射示例：

```
Map map = new HashMap();
Foo foo =  new Foo();
map.put(foo, "bar");
foo=null; // even though the reference is nullified object will not garbage collected because map is having Strong refrence. 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-13T14:18:27.923

在其他 Map 实现（如 HashMap）中，键是强可达的。例如，如果 HashMap 具有如下所示的 Person 类的键，并且如果 Person 对象设置为 null，即使在此之后，如果我们执行 map.get(Person)，我们也会从内存中获取值，因为键是强引用的在 HashMap 中。

```
wm.put(person, person.getFirstName());
person = null;
System.gc();
System.out.println("Hash Map :" + wm.toString()); 
```

输出：哈希图：{test.Person@12dacd1=John}

与 HashMap 相比，WeakHashMap 是一种一旦键在内存中没有引用就会删除它的条目。例如，如果 WeakHashMap 具有如下所示的 Person 类的键，并且如果 Person 对象设置为 null，那么现在如果您执行 map.get(Person)，我们将得到 null，因为该键没有引用（或者说是弱引用）可达）。

```
wm.put(person, person.getFirstName());
person = null;
System.gc();
System.out.println("Weak Hash Map :" + wm.toString()); 
```

输出：弱哈希映射：{}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-08T15:01:13.607

java中的引用是创建的对象在内存中指向的内存地址。在 WeakHashMap 中，使用了弱引用的概念。

一旦您在 java 中创建一个对象并将其分配给某个变量，它就变得非常可访问。

弱引用对象可能有点类似于没有内存引用的对象，即它现在可以被垃圾收集。

# r - R：正确使用 table()

> ID：10599712
> 
> 赞同：-2
> 
> 时间：2012-05-15T11:25:12.410
> 
> 标签：r, matrix, statistics

编辑：

因为我仍在为此苦苦挣扎，所以这里有更多信息：

该矩阵具有 SessionID、UserID、query、[一些基于时间的参数]、单词长度和字符长度列

我想得到一个查询和长度的频率表，即查询，矩阵中查询的频率，长度。

```
table(matrix$query,matrix$length) 
```

生成一个不显示实际查询名和一大堆列的表

如何正确使用 table() 来获取我想要的表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:30:38.517

我认为您可以使用该`table`功能：它非常快，并且会给出每个查询的频率（您也可以对其进行排序），例如：

```
sort(table(mat[,"query"])) 
```

# mysql - Mysql 数据库显示 'b' 代替位类型字段

> ID：10599714
> 
> 赞同：2
> 
> 时间：2012-05-15T11:25:15.253
> 
> 标签：mysql

Mysql Table显示值'b'代替位类型的数据为什么？如何将其再次转换为原始格式有人知道吗？

我希望这些列中的值为 0 或 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:32:28.280

取自[位域文字](http://dev.mysql.com/doc/refman/5.0/en/bit-field-literals.html)

> 从 MySQL 5.0.3 开始，位域值可以使用 b'value' 或 0bvalue 表示法写入。value 是使用 0 和 1 写入的二进制值。
> 
> 位值作为二进制值返回。要以可打印形式显示它们，请添加 0 或使用转换函数，例如 BIN()。转换值中不显示高位 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:23:31.140

我找到了解决方案。

只需使用 sql 查询调用 value，此查询将只返回 0 或 1 作为位值，尽管 mysql 将 value 表示为 'b'。

不必担心。

我将其尝试为“从 id = 1 的表中选择标志 * 4”，答案为 0，即 0 * 4 = 0。

# iphone - 如何使用 ARC 和 Storyboard 弹出ToViewController

> ID：10599715
> 
> 赞同：0
> 
> 时间：2012-05-15T11:25:20.897
> 
> 标签：iphone, ios, xcode, storyboard, poptoviewcontroller

有人知道如何 popToViewController 吗？

例如：introvideo->welcomeview & tutorialview-> mainviewcontroller->scannerviewcontoller-> questionview ->（如果回答正确 -> correctView） else ->wrongView

我如何弹回 mainView 控制器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:31:26.637

一种方法是遍历`viewControllers`导航控制器的数组。您可以通过标签、类名等来识别正确的一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:55:58.403

根据您所写的内容，看起来 MainViewController 是导航堆栈上的第四个 ViewController。

```
 [self.navigationController popToViewController:[arrayOfViewControllers objectAtIndex:3] animated:YES]; 
```

应该做的伎俩。

# postgresql - 将多条几何线合并为一条几何线

> ID：10599719
> 
> 赞同：0
> 
> 时间：2012-05-15T11:25:44.253
> 
> 标签：postgresql, postgis

现在我有 3 行 (LINESTRING) 具有 3 个不同的几何值。

```
Line#1 : "11AABB"
Line#2 : "22CCDD"
Line#3 : "33EEFF" 
```

如何通过 PostGIS 功能将这些行合并为一行？

我曾经知道它使用[ST_LineMerge](http://postgis.refractions.net/docs/ST_LineMerge.html)或[ST_Union](http://postgis.refractions.net/docs/ST_Union.html)但我不确定如何将它与几何值一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T15:48:41.573

你可以再详细一点吗？

使用您提供的示例，您可以尝试以下操作：

```
SELECT ST_Union('11AABB'::geometry , ST_Union('22CCDD'::geometry,'33EEFF'::geometry ) ); 
```

您的几何值无效，但这是您想要的查询的正确语法。您应该使用您提供的示例收到此错误：“错误：解析错误 - 无效几何”

# email - Email-ext Jenkins 插件本地化

> ID：10599722
> 
> 赞同：0
> 
> 时间：2012-05-15T11:25:48.730
> 
> 标签：email, localization, jenkins, email-ext

我使用 Jenkins 作为 CI 工具，并使用 Email-ext 插件发送电子邮件通知。Jenkins 使用 En 语言环境在 Win2003 上运行，我正在使用 Ru 语言环境从浏览器启动作业。所以我收到一封带有不正确编码的俄文字母的电子邮件。如何将电子邮件区域设置为 en？

PS：我需要所有的英文文本，因为有些队友不懂俄语。

PPS：我正在使用果冻脚本“html-with-health-and-console.jelly”，
字符串 ${build.durationString} 包含 russain 字符和 ${healthReport.description}

# testing - JavaFX 2 的 GUI 测试框架

> ID：10599724
> 
> 赞同：14
> 
> 时间：2012-05-15T11:25:49.890
> 
> 标签：testing, javafx, javafx-2, javafx-8, gui-testing

我目前正在阅读《[Growing Object-Oriented Software Guided by Tests](http://growing-object-oriented-software.com/) 》一书，它对测试驱动开发进行了不错的介绍。

一个缺点是通过本书开发的代码是基于 Swing 的。对于我的下一个项目，我想使用 Java FX 2，我想知道是否有任何 GUI 测试框架可以用于它？本书介绍了[windowlicker](http://code.google.com/p/windowlicker/)，它只允许测试 Swing 应用程序。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-18T16:13:27.133

还有另一个新的 JavaFX 测试库，称为[TestFX](https://github.com/SmartBear/TestFX)。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-15T12:29:40.590

有一个名为 JemmyFX 的库。[Jemmy](http://java.net/projects/jemmy/sources/jemmy3/show)本身是一组用于测试 UI 应用程序的库和工具（主要是基于 Java 的：Swing、AWT、SWT；但现在正在扩展到原生）。JemmyFX 涵盖了 JavaFX。

JemmyFX 可以作为OpenJFX 2 （JavaFX 的开源部分）[的测试分支的一部分下载。](http://hg.openjdk.java.net/openjfx/2.1/master/tests/)

对于**JavaFX 8**，[测试分支](http://hg.openjdk.java.net/openjfx/8/master/tests/)包括对新控件和其他修复的支持。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-20T21:33:11.497

[有一个名为MarvinFX](http://www.guigarage.com/2013/03/introducing-marvinfx/)的新测试机器人：

> MarvinFX 的目标是轻松测试 JavaFX 控件和场景，并特别关注属性。

这篇[文章](http://www.guigarage.com/2013/03/assertions-and-rules-in-marvinfx/)展示了如何在 MarvinFX 中使用断言和规则。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-06-19T16:29:10.100

另一个库（我没有使用或测试过）是[TestComplete](http://support.smartbear.com/viewarticle/30971/)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-11-11T22:35:26.393

[Automaton](https://github.com/renatoathaydes/Automaton)是另一个用于 JavafX 和 Swing GUI 的测试库，它出自与 TestFX 相同的[团队](https://github.com/SmartBear/TestFX)

> *   Swing 和 JavaFX 应用程序的简单测试
> *   为测试人员编写。只需要基本的编码技能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-11-28T01:40:28.933

根据[Eclipse 网站](https://marketplace.eclipse.org/category/free-tagging/gui-testing)，2015 年 JavaFX 的现代测试工具是[Squish](https://marketplace.eclipse.org/content/squish-automated-cross-platform-cross-technology-eclipse-gui-testing-tool)和[Jubula](https://marketplace.eclipse.org/content/jubula-automated-functional-testing-standalone-version)。但是 Squish 是商业的。Jubula 是部分免费的——JavaFX 属于免费部分。并且在 Eclipse Mars 版本中已经存在测试发行版。使用 Jubula 进行 UI 测试。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-12-04T07:52:25.830

Jubula 现在完全免费，并且确实支持 JavaFX。

# asp.net-mvc-3 - 如何使用 ADO.NET 从 asp.net mvc 3 中的数据库中获取结果

> ID：10599726
> 
> 赞同：0
> 
> 时间：2012-05-15T11:26:00.250
> 
> 标签：asp.net-mvc-3, ado.net

我编写了返回列表的模型类，然后我将其传递给视图，但是当请求页面时，视图多次调用模型然后崩溃页面，这是我的代码，请帮助我我是 asp.net MVC 的新手

模型

```
public List<string> DoWork()
    {
        List<string> results = new List<string>();
        using (SqlConnection con = new SqlConnection(@"Connection String Here"))
        {
            con.Open();
            using (SqlCommand cmd = new SqlCommand(@"SELECT Column1 FROM Table1", con))
            {
                using (SqlDataReader rdr = cmd.ExecuteReader())
                {
                    while (rdr.Read())
                    {
                        results.Add(rdr.GetString(0));
                    }
                }
            }
        }
        return results;
    } 
```

控制器

```
 public ActionResult Index()
    {
        MyData data = new MyData();
        return View(data);
    } 
```

看法

```
<ul>
@for (int i = 0; i <@Model.DoWork().Count; i++)
{
<li>
  @Model.DoWork()[i]
</li>
}
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:08:35.897

这个想法是DB层和View层应该分开。话虽这么说，您应该在控制器操作方法中获取数据库实体，而不是在视图中，并使用 ViewModel 模式将其吐到视图中。在您的情况下，您有一个简单的视图模型 IEnumerable，但它可以是任何实体。

```
public ActionResult Index()
    {
        MyData data = new MyData();
        IEnumerable<string> thelist = data.DoWork();
        return View(thelist);
    } 
```

在你的视图中，使用 IEnumerable 作为你的模型，并循环它，而不是调用数据库来获取你的数据：

```
@model IEnumerable<string>
......
@foreach(string s in Model)
{
  <li>@s<li>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:34:12.430

`DoWork`每次要使用结果时都在调用该方法...

将结果存储在一个变量中，然后使用它。

```
<ul>
@{ List<string> works = Model.DoWork(); }
@for (int i = 0; i < works.Count; i++)
{
<li>
  @works[i]
</li>
}
</ul> 
```

# android - 来自二维码的电话号码

> ID：10599727
> 
> 赞同：1
> 
> 时间：2012-05-15T11:26:06.653
> 
> 标签：android, iphone, ios, qr-code

我遇到了一个似乎无法解决的问题。问题在于生成将呼叫一个特定号码的二维码。号码格式为 *103*14 位激活号码#，使用 android 二维码应用程序读取它会导致呼叫表单中没有井号 (#)。我用谷歌搜索了它，结论是android API出于某种原因阻止从二维码读取哈希符号。android 操作系统的解决方法是使用 URI 编码作为 %23 的哈希值，在这种情况下，它就像一个魅力。但是使用 iOS QRReader 应用程序读取相同的 QR 码不会将 %23 转换为哈希值，而只会显示 23。有没有解决所有这些问题的解决方案？先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:57:00.920

您必须对哈希进行双重编码，因此百分号也被编码。

所以，# 变成 %2523

扫描此二维码，您的电话拨号器应显示 *#67#

![URI 编码的 USSD 有 QR](../Images/322107e8b2696683d98849fdb6548629.png)

请参阅有关 Zxing 的此[错误报告](http://code.google.com/p/zxing/issues/detail?id=962)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:40:55.933

也许，您需要在将 String 传递给 Intent 之前对其进行编码：

```
String qrCode = "*103*14#";
String uri = Uri.encode("tel:" + qrCode);
Intent intent = new Intent(Intent.ACTION_CALL, uri); 
```

# ruby - 如何使用每个元素从第二个元素开始在数组中循环？- 红宝石

> ID：10599729
> 
> 赞同：7
> 
> 时间：2012-05-15T11:26:12.053
> 
> 标签：ruby

假设我有一个这样的数组：

```
["auburn", "http://auburn.craigslist.org/web/", "http://auburn.craigslist.org/cpg/", "http://auburn.craigslist.org/eng/", "http://auburn.craigslist.org/sof/", "http://auburn.craigslist.org/sad/"] 
```

我想做的只是处理这个数组中的 URL——它总是从开始`element[1]`并上升。

我怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-15T11:36:52.227

这里只显示从 1 开始的元素（第二个元素），-1 代表最后一个元素

```
a = ["auburn", "http://auburn.craigslist.org/web/", "http://auburn.craigslist.org/cpg/", "http://auburn.craigslist.org/eng/", "http://auburn.craigslist.org/sof/", "http://auburn.craigslist.org/sad/"] 

p a[1..-1]
=> ["http://auburn.craigslist.org/web/", "http://auburn.craigslist.org/cpg/", "http://auburn.craigslist.org/eng/", "http://auburn.craigslist.org/sof/", "http://auburn.craigslist.org/sad/"] 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-15T11:49:03.243

```
a = ["auburn", "http://auburn.craigslist.org/web/", "http://auburn.craigslist.org/cpg/", "http://auburn.craigslist.org/eng/", "http://auburn.craigslist.org/sof/", "http://auburn.craigslist.org/sad/"]

a.drop(1).each { |m| puts m }

#=> http://auburn.craigslist.org/web/
#   http://auburn.craigslist.org/cpg/
#   http://auburn.craigslist.org/eng/
#   http://auburn.craigslist.org/sof/
#   http://auburn.craigslist.org/sad/ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-15T11:37:41.833

a[1..-1] 将返回删除第一项的数组。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-15T12:21:03.120

只是简单地选择你需要的元素怎么样：

```
a.grep(/^http:/).each { ... } 
```

或者，如果您不希望不必要地创建新的数组副本：

```
a.each { |e| 
  next if !e.match(/^http:/)
  ...
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-15T11:46:24.197

尝试**切片**：

```
arr = ["auburn", "http://auburn.craigslist.org/web/", "http://auburn.craigslist.org/cpg/", "http://auburn.craigslist.org/eng/", "http://auburn.craigslist.org/sof/", "http://auburn.craigslist.org/sad/"]
arr.slice(1..-1) 
```

**编辑**：

像这样使用它：

```
arr.slice(1..-1).each do |p|
  puts p
end 
```

# java - 编译器树 api：获取完全限定名称

> ID：10599732
> 
> 赞同：2
> 
> 时间：2012-05-15T11:26:19.600
> 
> 标签：java, parsing, java-compiler-api

我正在使用 Java Compiler Tree API 来解析 Java 源代码。

目前我遇到了以下问题。考虑我有一个使用“Foo”类型的导入变量的方法。Foo 类类似于某些包中的类。

有没有办法获得这个类的完全限定名称？

我想

*   如果它是进口的，比它容易查找
*   但是，它可能在同一个包中（这应该知道编译器？），因此它没有被导入
*   甚至它可能在某个外部库中并使用通配符链接 - 我无法查找它。

这个问题有什么解决办法吗？

谢谢。

# jquery - 如何检查元素是否在视口中？

> ID：10599733
> 
> 赞同：1
> 
> 时间：2012-05-15T11:26:21.493
> 
> 标签：jquery, notifications

我正在尝试在我的网站中实施通知系统。我从[http://www.red-team-design.com/cool-notification-messages-with-css3-jquery](http://www.red-team-design.com/cool-notification-messages-with-css3-jquery)中汲取了一些想法（别担心，它非常简单），我稍微修改了一下以适应用我的系统。

我的情况是我正在使用其中一个 div，`'.info'`确切地说是每次向该用户发送新消息时。到目前为止，我已经对其进行了设置，因此每次用户单击页面时，通知都会移出视口。

```
$(document).on('click',function()
{
    hideAllNotifications();
}); 
```

但是，我不希望在收到新消息时发生这种情况，因为用户可能没有注意到通知的出现，因此它应该是持久的，直到`'.info'`被按下，即当用户单击 .info 横幅时。但是，如果用户在视图中单击身体，`.info`那么它应该仍然存在。另一方面，如果所有其他通知 div`.success, .error`都是可见的，那么单击 body 应该只是隐藏这些 div。

那我该如何实现呢？我一直在尝试使用 offset()、position() 和 height() 检查信息是否在视口中，但它们不一致。

我试过了：

```
if(($('.info').position().top < 0))
{
    $(document).on('click',function()
    {
        hideAllNotifications();
    });
//      alert("info is out of view");
}
else
{
    $('.info').on('click',function()
    {
        hideAllNotifications();
    });
//      alert("info is inside our view");
} 
```

这是我在页面刷新时获取新消息的功能：

```
function getNewMessage()
{
    //retrieve new messages
    showNotification('info', 'You have a new message');
} 
```

# android - android webview 浏览器是否支持 html5 功能？

> ID：10599739
> 
> 赞同：20
> 
> 时间：2012-05-15T11:26:46.140
> 
> 标签：android, html, webview

我有基于 HTML5 的 Web 应用程序，我希望它与 WebView 集成，那么 android webview 浏览器是否支持 html5 功能？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-15T11:30:59.963

A`WebView`支持它们，**但您必须打开它们**。我使用以下代码打开所有可用的功能。这是必要的，因为所有 Android 版本都不支持应用程序缓存：

```
 wv = (WebView) findViewById(R.id.webview);
    WebSettings ws = wv.getSettings();

    ws.setJavaScriptEnabled(true);
    ws.setAllowFileAccess(true);

    if (Build.VERSION.SDK_INT>=Build.VERSION_CODES.ECLAIR) {
        try {
            Log.d(TAG, "Enabling HTML5-Features");
            Method m1 = WebSettings.class.getMethod("setDomStorageEnabled", new Class[]{Boolean.TYPE});
            m1.invoke(ws, Boolean.TRUE);

            Method m2 = WebSettings.class.getMethod("setDatabaseEnabled", new Class[]{Boolean.TYPE});
            m2.invoke(ws, Boolean.TRUE);

            Method m3 = WebSettings.class.getMethod("setDatabasePath", new Class[]{String.class});
            m3.invoke(ws, "/data/data/" + getPackageName() + "/databases/");

            Method m4 = WebSettings.class.getMethod("setAppCacheMaxSize", new Class[]{Long.TYPE});
            m4.invoke(ws, 1024*1024*8);

            Method m5 = WebSettings.class.getMethod("setAppCachePath", new Class[]{String.class});
            m5.invoke(ws, "/data/data/" + getPackageName() + "/cache/");

            Method m6 = WebSettings.class.getMethod("setAppCacheEnabled", new Class[]{Boolean.TYPE});
            m6.invoke(ws, Boolean.TRUE);

            Log.d(TAG, "Enabled HTML5-Features");
        }
        catch (NoSuchMethodException e) {
            Log.e(TAG, "Reflection fail", e);
        }
        catch (InvocationTargetException e) {
            Log.e(TAG, "Reflection fail", e);
        }
        catch (IllegalAccessException e) {
            Log.e(TAG, "Reflection fail", e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-15T11:32:17.593

在您的 android 浏览器上打开此链接：[http](http://html5test.com) ://html5test.com ，它将为您提供所需的所有信息：解析规则、画布、视频、音频、元素、表单、webapp...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T07:56:52.930

感谢@theomega 我使用以下方式启用轻触来进行选择并激活鼠标悬停。

```
try {
    WebSettings.class.getMethod("setLightTouchEnabled", new Class[]{Boolean.TYPE});
} catch (SecurityException e) {         
    e.printStackTrace();
} catch (NoSuchMethodException e) {         
    e.printStackTrace();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T11:28:21.757

您没有具体说明您正在寻找哪些功能，
但 Android（和 iOS）使用 Webkit。所以是的。

# iphone - 使用 MKstorekit4 实施不可再生订阅？

> ID：10599749
> 
> 赞同：12
> 
> 时间：2012-05-15T11:27:25.203
> 
> 标签：iphone

我有 Iphone 应用程序，我想在其中使用 Non_Renewable 订阅。根据文档，MKstorekit 支持 Non Renewable 订阅。但到处都在说 Auto_renewables。有人知道如何使用 MKstorekit4 实现不可更新订阅。我整天都在谷歌搜索.但是没有运气。有人能帮我吗？有人用mkstorekit做过这种应用吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T09:20:11.303

在非续订订阅中，我们需要使用服务器跟踪。在非续订订阅中，您将获得包含购买日期的一些购买详细信息的收据数据，将收据存储在您的服务器中并从购买日期计算到期日期并使用此服务器跟踪要再次显示您的购买视图，您需要存储与用户详细信息相对应的收据，以便在用户使用的所有设备上获取此信息

# jquery - jquery自定义过渡，如发现 - 需要即时设置方向

> ID：10599752
> 
> 赞同：0
> 
> 时间：2012-05-15T11:27:35.983
> 
> 标签：jquery, cycle, jquery-cycle

快速jQuery循环问题：

```
$.fn.cycle.transitions.uncover = function($cont, $slides, opts) {
    var d = opts.direction || 'left';
    var w = $cont.css('overflow','hidden').width();
    var h = $cont.height();
    opts.before.push(function(curr, next, opts) {
        $.fn.cycle.commonReset(curr,next,opts,true,true,true);
        if (d == 'right')
            opts.animOut.left = w;
        else if (d == 'up')
            opts.animOut.top = -h;
        else if (d == 'down')
            opts.animOut.top = h;
        else
            opts.animOut.left = -w;
    });
    opts.animIn.left = 0;
    opts.animIn.top = 0;
    opts.cssBefore.top = 0;
    opts.cssBefore.left = 0;
}; 
```

这是 jQuery 循环发现过渡。

我想即时决定效果方向是向上还是向下。

*   如果当前幻灯片是 5 张中的 2 张，并且我单击链接到幻灯片 1 的页面导航，那么它应该是“向上”。
*   如果当前幻灯片是 2 of 5 并且我单击链接到幻灯片 5 的页面导航，则方向应该是“向下”

从逻辑部分来看，这似乎是通过一个简单的“if”语句来完成的，但我已经尝试过并且无法真正完成工作。

任何提示将不胜感激！

还有一件事：我知道有类似 scrollVert 的东西——但它不能满足我的需求。我需要以两种方式（上/下）几乎就像 scrollVert 一样工作，但不完全以同样的方式。

另外，scrollVert 是：

```
$.fn.cycle.transitions.scrollVert = function($cont, $slides, opts) {
    $cont.css('overflow','hidden');
    opts.before.push(function(curr, next, opts, fwd) {
        if (opts.rev)
            fwd = !fwd;
        $.fn.cycle.commonReset(curr,next,opts);
        opts.cssBefore.top = fwd ? (1-next.cycleH) : (next.cycleH-1);
        opts.animOut.top = fwd ? curr.cycleH : -curr.cycleH;
    });
    opts.cssFirst.top = 0;
    opts.cssBefore.left = 0;
    opts.animIn.top = 0;
    opts.animOut.left = 0;
}; 
```

我试图更改 scrollvert 功能，但在发现中有一个 if d == ... 并且不知道如何将该条件从发现传输到 scrollvert

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T13:13:56.580

[您可以使用$.index](http://api.jquery.com/index/)在`uncover`转换中确定当前正在显示哪张幻灯片以及下一张是哪张幻灯片，如下所示

```
$.fn.cycle.transitions.uncover = function($cont, $slides, opts) {
    var d = opts.direction || 'left';
    var w = $cont.css('overflow','hidden').width();
    var h = $cont.height();
    opts.before.push(function(curr, next, opts) {
        $.fn.cycle.commonReset(curr,next,opts,true,true,true);
        // find index of Current slide
        var curIndex = $slides.index(curr) + 1;// as it's 0 based
        // find index of Next Slide 
        var nextIndex = $slides.index(next) + 1;
        // now set d based on this two values
        if(curIndex == 2 && nextIndex == 1)
           d = 'up';
        if(curIndex == 2 && nextIndex == 5)
           d = 'down';
        // add as many condition as you want
        if (d == 'right')
            opts.animOut.left = w;
        else if (d == 'up')
            opts.animOut.top = -h;
        else if (d == 'down')
            opts.animOut.top = h;
        else
            opts.animOut.left = -w;
    });
    opts.animIn.left = 0;
    opts.animIn.top = 0;
    opts.cssBefore.top = 0;
    opts.cssBefore.left = 0;
}; 
```

我希望你现在可以从上面的代码中弄清楚你想要什么。或者让我知道您是否愿意。

# c# - VB6 到 C# XML 字符串转换特殊字符

> ID：10599766
> 
> 赞同：2
> 
> 时间：2012-05-15T11:28:27.363
> 
> 标签：c#, vb6, xml-serialization, special-characters, msxml

我一直在使用`DOMDocument`VB6 (MSXML) 中的对象来创建和保存具有加密字符串的 XML 文件。但是，我认为这个字符串有某些特殊字符......

```
<EncryptedPassword>ÆÔ¤ïÎ
    ß¯8KHÖN›¢)Þ,qiãÔÙ</EncryptedPassword> 
```

有了这个，我进入我的 C# 项目，并以 UTF-8 编码反序列化这个 XML 文件，但它在这个字符串上失败了。我尝试过通过 ASCII 进行序列化，这又多了几个字符，但仍然失败。如果我在这个地方放一个纯文本字符串，一切都好！:(

我在想，也许我最好先将字符串从 VB6 转换为 MD5 类型的字符串，然后在 .NET 中解码 MD5 字符串，然后用特殊字符解密实际的字符串，但这是编码所有这些的额外步骤并希望有人在这里对我有更好的想法？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T16:19:56.360

对您来说最好的做法是将加密字符串编码为将使用 ASCII 字符集的内容。最简单的方法是获取您的加密字符串，然后将其编码为 Base64 并将此编码值写入 XML 元素。

而在 .net 中，只需获取 XML 元素的值并从 Base64 解码它并“瞧”，您就有了加密字符串。

.Net 可以轻松解码 base64 字符串，请参阅：http: [//msdn.microsoft.com/en-us/library/system.text.encoding.ascii.aspx](http://msdn.microsoft.com/en-us/library/system.text.encoding.ascii.aspx)。（此页面可能使它看起来比实际情况更复杂）。

VB6 没有对 Base64 编码的原生支持，但在 google 上的快速搜索给出了一些关于如何轻松实现它的示例：

[http://www.vbforums.com/showthread.php?t=379072](http://www.vbforums.com/showthread.php?t=379072)

[http://www.nonhostile.com/howto-encode-decode-base64-vb6.asp](http://www.nonhostile.com/howto-encode-decode-base64-vb6.asp)

[http://www.mcmillan.org.nz/Programming/post/Base64-Class.aspx](http://www.mcmillan.org.nz/Programming/post/Base64-Class.aspx)

[http://www.freevbcode.com/ShowCode.asp?ID=2038](http://www.freevbcode.com/ShowCode.asp?ID=2038)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:30:48.167

我得出的结论是，将这些字符存储在 XML 文件中是错误的。VB6 允许这样做，但.NET 不允许！因此，我已根据此链接将字符串转换为 Base64 数组：-

[http://www.nonhostile.com/howto-encode-decode-base64-vb6.asp](http://www.nonhostile.com/howto-encode-decode-base64-vb6.asp)

现在，在 .NET 端，文件将反序列化回我的类中，我现在将密码存储为字节数组。然后我将它转换回我需要解密的字符串，现在这似乎引发了另一个问题！

```
 string password = Encoding.UTF7.GetString(this.EncryptedPassword); 
```

通过这种编码转换，我得到的字符串几乎完全回到了我想要的状态，但是有一个大于字符的小字符没有正确翻译！然后有同事发现了一个栈溢出帖子，有最终答案！在这种类型的转换上，VB6 和 .NET 之间存在差异。执行以下操作可以解决问题：-

```
 string password = Encoding.GetEncoding(1252).GetString(this.EncryptedPassword); 
```

感谢所有的帮助，非常感谢。关于这个的原始帖子是@ [.Net unicode question, vb6 legacy](https://stackoverflow.com/questions/1058270/net-unicode-problem-vb6-legacy)

# php - 为什么strtotime返回false？

> ID：10599768
> 
> 赞同：-1
> 
> 时间：2012-05-15T11:28:32.070
> 
> 标签：php, date, strtotime

```
if(strtotime($date_in)==false){
    echo $date_in." wtf?";
} 
```

输出：

> 2012-05-12 怎么回事？

为什么 `strtotime($date_in)`返回`false`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:32:42.117

尝试：

```
if(strtotime($date_in)===false){
    echo "[$date_in] wtf?";
} 
```

如果测试`false`总是使用`===`. 还`$date_in`用括号括起来变量可以帮助您查看是否有任何空格。

[http://php.net/manual/en/function.strtotime.php](http://php.net/manual/en/function.strtotime.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:46:57.353

我试图成功地复制这个问题，但只有在我将默认时区更改为：

```
date_default_timezone_set('Europe/Brussels'); 
```

所以，也许你可以检查你的 ini 文件，或者使用`date_timezone_get`并确保你的设置知道如何处理你正在使用的日期格式？

或者，或者如果 php.ini 出于某种原因不受限制，您可以查看[datetime object](http://www.php.net/manual/en/datetime.createfromformat.php)。

# linux - 通过创建新的屏幕窗口附加到“屏幕”会话

> ID：10599769
> 
> 赞同：11
> 
> 时间：2012-05-15T11:28:41.033
> 
> 标签：linux, shell, gnu-screen, detach

我有一个使用多个窗口运行的屏幕会话。我想附加到它，在其中创建一个新的屏幕窗口并在该新窗口中启动一个外壳。

**问题：如何从屏幕会话之外的命令行执行此操作？**

我已经尝试了很多，例如`screen -x`（但它附加到现有的屏幕窗口之一；它不会创建新的，也不会启动新的外壳）。欢迎任何提示。

环境是 Linux (Ubuntu 12.04)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T12:38:39.973

我在邮件列表上找到了一些东西，谢谢 tuxuday :)

我现在这样做：

```
#!/bin/bash
screen -X screen -t NEWWINDOW  # create new window (switches existing attached terminal)
sleep 0.1
screen -X other  # switch existing attached terminal back to its old window
sleep 0.1
gnome-terminal -e 'screen -x -p NEWWINDOW'  # connect to new window 
```

我不确定那些睡眠，也许它们在所有环境中都不是必需的，但我可以轻松地等待那些 0.2 秒。

我`.bash_aliases`正在延迟更改屏幕窗口标题，因此尴尬`NEWWINDOW`不会持续很长时间（因此不会妨碍对该脚本的进一步调用）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-06-26T22:39:11.463

添加新的分离窗口`sesion_name`并运行`command`

```
screen -S sesion_name -x -X screen bash -c 'command; exec bash' 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-03-04T19:06:24.777

要选择要加入的窗口，请使用该`-p`选项。捐赠`+`将创建一个新的，因此您的命令很简单：

```
screen -x session_name -p + 
```

这记录在手册页上：

> -p n̲u̲m̲b̲e̲r̲_o̲r̲_n̲a̲m̲e̲|̲-̲|̲=̲|̲+̲
> 
> ```
> Preselect a window. This is useful when you want to reattach to a  
> specific windor or you want to send a command via the "-X" option  
> to a specific window. As with screen's select commant, "-" selects  
> the blank window. As a special case for reattach, "=" brings up the  
> windowlist on the blank window. 
> ```

# python - 如何遍历在 Tkinter 中显示 jpg 的子文件夹？

> ID：10599771
> 
> 赞同：2
> 
> 时间：2012-05-15T11:28:50.487
> 
> 标签：python, loops, tkinter, directory

这是一个 Python 初学者的问题。
我想遍历父文件夹的几个子文件夹（子文件夹包含*jpg*和*txt*文件）。我想使用 Tkinter 显示图像。旁边应该有一个图像和**下一个**按钮 - 当单击按钮时，应该加载列表中的下一个图像。

如何强制应用程序在每个图像上停止并等待用户反应？
在下面的测试代码中，加载的图像来自循环中的最后一个目录（来自其他目录的图像不显示，尽管我可以在循环运行期间打印它们的名称）。

```
import Tkinter, os, glob
from PIL import Image, ImageTk

class simpleapp_tk(Tkinter.Tk):
    def __init__(self,parent):
        Tkinter.Tk.__init__(self,parent)
        self.parent = parent
        self.initialize()

    def initialize(self):
        self.grid

        parentSrcFolder = r"D:\2012\RCIN\test"
        srcFoldersLst = os.listdir(parentSrcFolder)
        for srcFolder in srcFoldersLst:
            jpgFilesPathLst = glob.glob(os.path.join(parentSrcFolder, srcFolder, "*.jpg"))

            self.labelVariable = Tkinter.StringVar()
            label = Tkinter.Label(self,textvariable=self.labelVariable,anchor="w")
            label.grid(column=0,row=0,columnspan=2,sticky='EW')
            self.labelVariable.set(jpgFilesPathLst[0])

            cardImage = Image.open(jpgFilesPathLst[0])
            indexCard = ImageTk.PhotoImage(cardImage)
            labelImage = Tkinter.Label(self,image=indexCard)
            labelImage.image = indexCard
            labelImage.grid(column=0,row=3)

def main():
    app = simpleapp_tk(None)
    app.title('my application')
    app.mainloop()

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:41:24.823

我能想到的最简单的方法是：

首先，创建一个方法，该方法`display_next`将增加索引并在列表中显示与该索引关联的图像（假设列表是文件名列表）。将列表查询包含在 try/except 子句中将让您捕捉到`IndexError`当您用完要显示的图像时发生的情况——此时您可以将索引重置为 -1 或您想要在该点发生的任何事情。

获取文件名列表`__init__`并将某些索引初始化为-1（例如`self.index=-1`）。

像这样创建一个 tk.Button `__init__`：

```
self.Button = Tkinter.Button(self,text="Next",command=self.display_next) 
```

另一个注意事项，您可以使用小部件的配置方法即时更新小部件（而不是一直重新创建它）。换句话说，将所有小部件创建移动到`__init__`然后`display_next`使用`config`. 此外，从 Tkinter.Frame 继承可能会更好......

```
class SimpleAppTk(Tkinter.Frame):
    def __init__(self,*args,**kwargs):
        Tkinter.Frame.__init__(self,*args,**kwargs)

        self.filelist=[]  #get your files here
        #it probably would look like:
        #for d in os.listdir(parentDir):
        #    self.filelist.extend(glob.glob(os.path.join(parentDir,d,'*.jpg'))
        self.index=-1
        self.setup()
        self.display_next()

    def setup(self):
        self.Label=Tkinter.Label(self)
        self.Label.grid(row=0,column=0)
        self.Button=Tkinter.Button(self,text="Next",command=self.display_next)
        self.Button.grid(row=0,column=1)

    def display_next(self):
        self.index+=1
        try:
            f=self.filelist[self.index]
        except IndexError:
            self.index=-1  #go back to the beginning of the list.
            self.display_next()
            return

        #create PhotoImage here
        photoimage=...
        self.Label.config(image=photoimage)
        self.Label.image=photoimage

if __name__ == "__main__":
   root=Tkinter.Tk()
   my_app=SimpleAppTk(root)
   my_app.grid(row=0,column=0)
   root.mainloop() 
```

**编辑**

我已经给出了一个如何实际对 Frame 进行网格化的示例。在您之前的示例`self.grid`中，您的初始化代码中有。这真的什么都没做。你得到结果的唯一原因是因为你继承了`Tkinter.Tk`自动网格化的结果。通常，最好在创建对象后进行网格化，因为如果您稍后回来并决定将该小部件放在不同的 gui 中的其他位置，那么这样做很简单。我还更改了类的名称以使用与 PEP 8 一致的 CamelCase ...但是如果您愿意，可以将其更改回来。

# frameworks - 在电晕中创建框架

> ID：10599772
> 
> 赞同：0
> 
> 时间：2012-05-15T11:28:56.407
> 
> 标签：frameworks, lua, coronasdk

如何为电晕中的角色创建一个框架，以便我可以在不同级别使用它？eg.我想制作一个物理角色，这样我就可以在不同的层次上使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T12:46:23.147

将其创建为单独的 Lua 模块，以便您可以`require("your_character")`在其他代码文件（级别）中。

# asp.net-mvc-3 - 重新加载 jqgrid，但也重新加载通过 ajax 在添加/编辑模式中动态加载的选择列表

> ID：10599773
> 
> 赞同：1
> 
> 时间：2012-05-15T11:28:56.957
> 
> 标签：asp.net-mvc-3, jquery-ui, jqgrid

在标题中我提到了我试图实现的目标，这是我正在使用的代码

我有`colModel`

```
....
editoptions:{value:getNames()}
....

function getNames() {
    var Names = $.ajax({
        url: '/Account/GetNames',
        async: false
    }).responseText;
    return Names;
} 
```

现在，当我触发时`$("#grid").trigger("reloadGrid");`，网格正在重新加载，但`GetNames`没有调用 Action，因此我的添加/编辑模式上的选择列表没有填充来自服务器的最新数据。

我使用 jquery ui 选项卡，每个选项卡有 2 个选项卡，每个选项卡会重新生成一个 jqgrid，所以假设在第一个选项卡中添加一个名称，现在在第二个选项卡上添加联系人时，我在选择列表中显示名称，因为两个网格都加载一次，我尝试按需重新加载选项卡，现在重新加载网格，但是发出 ajax 请求以获取名称的脚本函数没有被击中......

**注意**：加载页面时，第一次加载工作正常，即如果我在第一个选项卡上添加名称后刷新页面，我的选择列表将被填充。

# android - How do I make global changes throughout my app in Android?

> ID：10599775
> 
> 赞同：1
> 
> 时间：2012-05-15T11:29:08.230
> 
> 标签：android, global

I have a settings menu in my app which controls the units used throughout the app - metric or US units. So when the user selects one of these in the options in the menu, I want my app to use the chosen units throughout in display and calculations.

I plan to do this by storing a boolean in sharedpreferences, then check the value of the boolean every time an activity is opened, and then make the appropriate changes.

Is there a better method to go about doing this?

Thanks

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T11:40:00.520

Yes you can extends **Applications class** and store your data over there using Getter and setter.

So that your data will be retained throughout the Application.

```
public class SocketManager extends Application {
private static SocketManager singleton;
public int mBluetoothState;

public synchronized static SocketManager getInstance(Context context) {
    if (null == singleton) {
        singleton = new SocketManager();
    }
    return singleton;
}

public synchronized void setState(int state) {
    mBluetoothState = state;
}

public synchronized int getState() {
    return mBluetoothState;
}
} 
```

Access it in Activity like :

```
 SocketManager socketManager = SocketManager.getInstance(this);
  socketManager.setState(10);
  socketManager.getState(); 
```

Add your Application to Maanifest file like this :

```
 <application
  android:name=".SocketManager"
  android:icon="@drawable/first_aid"
  android:label="@string/app_name" >

   <activity .... />

 </application> 
```

**Edit :**

You should add your class name that extends Application into **Application Tag** not on Activity Tag

For further refrence check this [link](http://trace.adityalesmana.com/2010/08/declare-global-variable-in-android-via-android-app-application/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:34:01.213

You can have a look at Android Storage options: [http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

However, it seems like for your case `SharedPreferences` is OK

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T11:39:03.113

For just a boolean? If its just a single activity calling `SharedPreferences`and assigning it would be fine.

If you have multiple activities in an application you could call it once and load it into a static class and call it that way or [subclass the Application](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables) class.

But even then it's just a boolean and you should do whatever is most convenient for you.

# objective-c - adding SBJson framwork + ShareKit/ShareKit to the same XCode Project

> ID：10599777
> 
> 赞同：1
> 
> 时间：2012-05-15T11:29:34.333
> 
> 标签：objective-c, ios, xcode, sharekit, sbjson

I want to include SBJson and Sharekint libraries in my Xcode Project the problem is sharekit already contains SBJson but with different methods .. the result is that i ended up with duplicate files containing different code and hence i receive "duplicate symbole" error at compile time .

what would be a solution that wouldn't involve renaming file names and classes because the code will endup to be a complete mess.

thnks in advance .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:12:27.997

SBJson is used in FBConnect. Few solutions come to my mind:

1.  If you do not use Facebook, you can remove whole sharer from your project (with older sbjson).
2.  Audit SBJson methods used in your project, and if possible refactor them to use FBConnect's version. Then you can get rid of your project's SBJson files.
3.  even better, if you support only iOS 5+ you might get rid of SBJson in your project completely, and use native iOS 5 NSJSONSerialization class. This is more future-safe solution than 2.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:55:17.147

Make one folder common with all methods of SBJson and delete the other one .. this will work

# facebook - 使用 Facebook 登录的 SSO 网站网络

> ID：10599778
> 
> 赞同：0
> 
> 时间：2012-05-15T11:29:46.393
> 
> 标签：facebook, single-sign-on

## 我目前正在开发一个 SSO 网站网络。

它有一些网站，不幸的是，它们都是独立的域，例如：

*   域名.de
*   domain-specials.de
*   域-otherthings.de
*   别的东西.de

我已经设法使用 JSONP / Ajax 创建了一个[SSO](http://en.wikipedia.org/wiki/Single_sign-on)，因此当您登录到任何站点时，您也会登录到其他站点。

现在我需要实现与当前 SSO 一起使用的“[使用 facebook 登录”功能。](http://developers.facebook.com/docs/authentication/)

这里的问题是 Facebook 应用程序只能使用一个根域，因此如果您尝试在另一个网站上使用 Facebook 应用程序，您通常会遇到安全错误。

我尝试了 Facebook 客户端身份验证，除了我创建 Facebook-App 的网站之外，它当然不适用于任何其他网站：

```
API Error Code: 191
API Error Description: The specified URL is not owned by the application 
```

我还尝试在 FB.init 中使用当前在所有网站上使用的通道文件：

```
FB.init({
    appId      : '1234567890', // app id
    channelUrl : 'http://www.domain.de/channel.html', // fqd-path to channel file
    status     : true, // check login status
    cookie     : true, // allow the server to access the session
    xfbml      : true, // parse XFBML
    oauth      : true // ?
}); 
```

现在我正在尝试使用服务器端身份验证，但我仍然不确定是否有更好的方法来解决这个问题，因为它迫使我重定向到我在 Facebook-App 中使用的域。这里的主要问题是用户流。

**客户流程非常好**

1.  点击使用 Facebook 登录
2.  脸书弹出窗口
3.  单击是或否
4.  完毕！

**虽然服务器流量不是那么流畅**

1.  点击使用 Facebook 登录
2.  重定向到 Facebook
3.  单击是或否
4.  重定向到根域
5.  以某种方式重定向到原始域
6.  完毕！

我还考虑过为每个站点创建一个应用程序；但这只是愚蠢的。

因此，如果有人知道此问题的更好解决方案或需要更多说明，请告诉我。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T10:43:11.247

最后，我不得不创建一个小解决方法。通过对所有登录使用指定的登录脚本，我能够将用户重定向回引用页面。

此 Facebook 链接重定向到[http://mydomain.de/fb_connect/1/](http://mydomain.de/fb_connect/1/)

```
https://www.facebook.com/dialog/oauth?client_id=[your_app_id]&redirect_uri=http%3A%2F%2F[your_domain]`%2Ffb_connect%2F[domain_id]%2F&state=[some_hash]&scope=email 
```

[your_app_id] = Facebook 应用程序 ID
[your_domain] = www.domain.com 或任何您的域
[domain_id] = 我用它来知道用户来自哪里
[some_hash] = Facebook 用来防止 xsrf

然后我准备了一点 PHP 脚本来使用 apaches mod_rewrite 处理传入的数据

我服务器上 fb_connect 文件夹中的 .htaccess

```
RewriteEngine On
RewriteRule . index.php [L] 
```

在 index.php 中我使用了类似的东西

```
<?php

/* App-Id / Secret */
$sAppId     = '1234567890';
$sAppSecret = 'sdafuh347890oqtgfuasd';

/* Domains and IDs */
$aDomains = array(
    'www.domain.de' => 1,
    'www.domain-name.de' => 2,
     ...
);

/* Save a flipped copy */
$aFlip = array_flip($aDomains);

/* Save the request uri */
$sUri = $_SERVER['REQUEST_URI'];

/* Explode the uri; facebook adds everything after the '?' */
$aParts = explode('?', $sUri);

/* Save the first part */
$sUri = $aParts[0];

/* Explode using slash */
$aParts = explode('/', $sUri);

/* This position should be the domain-id */
$iDomainId = $aParts[2];

/* get the domain name */
$sDomain = $aFlip[$iDomainId];

/* If the user authorizes the app this parameter is set */
if (!empty($_GET['code'])) {

    /*
     * The redirect uri is needed as a security parameter and needs to be EXACTLY
     * like in the refereing URI above
     */
    $sRedirectUri = 'http://www.domain.de/fb_connect/' . $iDomainId . '/';

    /* Get the access token url for the user */
    $sTokenUrl = 'https://graph.facebook.com/oauth/access_token?'
       . 'client_id=' . $sAppId
       . '&client_secret=' . $sAppSecret
       . '&redirect_uri=' . urlencode($sRedirectUri)
       . '&code=' . $_GET['code'];

    /* Use CURL because file_get_contents() can't handle the length of the uri */
    $ch = curl_init();

    /* Url */
    curl_setopt($ch, CURLOPT_URL, $sTokenUrl);

    /* Header */
    curl_setopt($ch, CURLOPT_HEADER, 0);

    /* Return the response instead of echoing it */
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    /* Exec the request */
    $sResponse = curl_exec($ch);

    /* close CURL */
    curl_close($ch);

    /* Initialize the Array for the returned data */
    $aParams = array();

    /* From the Facebook tutorial ;D */
    parse_str($sResponse, $aParams);

    /* Build the URI to query the opengraph with a user token */
    $sGraphUrl =
       'https://graph.facebook.com/me?access_token=' . $aParams['access_token'];

    /* get, decode and save the returned values */
    $aUser = (array)json_decode(file_get_contents($sGraphUrl));

    // You should now have the requested userdata and use it to create an account
    // or whatever ;D

    /* Redirect the user to the refering domain */
    header('Location: http://' . $sDomain);
    die;
}

/*
 * If the user doesn't authorize the app, this parameter is set.
 * Do whatever is needed here (logging, crying...) and redirect the user somewhere ;D
 */
if (!empty($_GET['error'])) {
    header('Location: http://' . $sDomain);
    die;
}

/*
 * If the user deletes the app using the control panel in facebook, your script will
 * recieve a ping containging this parameter. This is pretty much the same as if 
 * your app would run inside the facebook canvas.
 */
if (!empty($_POST['signed_request'])) {
    // Decode the signed request using the facebook tutorial methods, and delete
    // the user from your system :D
}

?> 
```

这对我来说几乎是诀窍。如果您有任何问题随时问。

问候

# jenkins - 来自 sbt 依赖项的 Jenkins 依赖项？

> ID：10599779
> 
> 赞同：3
> 
> 时间：2012-05-15T11:29:47.863
> 
> 标签：jenkins, sbt

是否可以自动将 Jenkins 构建依赖项与 sbt 依赖项同步？例如，如果项目 B 的 build.sbt 说项目 A（我也写过）是它的依赖项，那么项目 B 的 Jenkins 构建是否可以自动检测到这一事实 - 并检测可能添加的任何其他依赖项或将来删除到 build.sbt 文件中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T22:01:07.657

您可以使用[ScriptTrigger 插件](https://wiki.jenkins-ci.org/display/JENKINS/ScriptTrigger+Plugin)编写适当的代码。或者您可以编写自己的插件并查看[IvyTrigger](https://wiki.jenkins-ci.org/display/JENKINS/IvyTrigger+Plugin)或[Maven 依赖更新触发器](https://wiki.jenkins-ci.org/display/JENKINS/Maven+Dependency+Update+trigger)。这可能对[sbt 插件](https://wiki.jenkins-ci.org/display/JENKINS/sbt+plugin)有很好的增强作用。

# android - 使用无 Activity 的 ActionBar

> ID：10599781
> 
> 赞同：2
> 
> 时间：2012-05-15T11:29:52.780
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-actionbar

是否可以在没有活动的情况下使用 ActionBar？我想在 StatusBar 视图中使用它，而不是用紫色突出显示的视图。

![在此处输入图像描述](../Images/b65384cd04e52d65d3ace93652092f48.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T14:56:12.787

此屏幕截图基于来自[Android ui 页面](http://developer.android.com/design/get-started/ui-overview.html)的图像，标记了不同的组件，以确保我们谈论的是同一件事。

![在此处输入图像描述](../Images/303b11776db205b5a80a5a59381515cc.png)

您不能在 Activity 之外添加 ActionBar。您需要一个 Activity 来获取 ActionBar 引用。ActionBar 引用是通过 Activity API 检索的，方法是在 Activity 中调用 getActionBar() 方法。

所以不能用 ActionBar 来代替 StatusBar。您*可以*更改状态栏的颜色，可能还有布局，但只能在有根手机上。有关该问题的一些观点，请参阅此[论坛讨论](http://androidforums.com/motorola-droid/25718-changing-statusbar-color.html)。

AFAIK，没有用于更改通知抽屉布局和功能的 API。没有 API 方法允许我们将 ActionBar 放置在通知之外的抽屉内，例如在您的屏幕截图中的抽屉顶部。

您*可以*为通知（抽屉内的消息）创建自定义布局。Android 开发者页面有一个关于如何做到这一点的[示例](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)（请参阅页面底部的“创建自定义通知布局”）。同样，您不能使用 ActionBar，但可以将[视图](http://developer.android.com/reference/android/view/View.html)添加到通知布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T19:04:53.767

使用通知。您将在状态栏中看到一些内容，并且不会涉及任何活动。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-07T09:36:09.837

有一种方法可以从 Activity 中声明的类更改 ActionBar：

(1) 在activity中创建方法到.setTitle

（2）将Activity上下文传递给Activity中声明的Controller类（MVC）

(3)有Controller类调用activity方法修改actionBar

...你怎么看？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T14:30:31.407

您应该制作一个自定义 rom 来更改该视图。

Purple View 不是您的应用程序的一部分，而是 Android 的一部分。

如果你不想要一个活动，为什么不让它透明。
[如何在 Android 上创建一个透明的 Activity？](https://stackoverflow.com/questions/2176922/how-to-create-transparent-activity-in-android)

# .net - TCP读写问题.net

> ID：10599782
> 
> 赞同：0
> 
> 时间：2012-05-15T11:29:54.710
> 
> 标签：.net, tcpclient, tcplistener

我正在使用以下代码从特定服务器发送消息

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    send("Hello there")
    TextBox1.Text = TextBox1.Text + "Send Successful"
End Sub

Public Sub send(ByVal data As String)
    Dim tcpClient As New TcpClient()
    Try
        tcpClient.Connect("10.xxx.xx.xx", 7000)
        TextBox1.text = TextBox1.Text + "Conneecte"
    Catch e As Exception
        Console.WriteLine(e)
    End Try
    If tcpClient.Connected Then
        Dim networkStream As NetworkStream = tcpClient.GetStream()
        Dim streamWriter As New StreamWriter(networkStream)
        Console.WriteLine("Messege {0} to {1}", data, tcpClient.Client.RemoteEndPoint)
        streamWriter.WriteLine(data)
        streamWriter.Flush()
        tcpClient.Close()
    End If
End Sub 
```

并且发送成功。

下面的代码是从另一个系统读取的。并且代码挂在do while循环中

```
Private Sub Button3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button3.Click
    Dim tcpClient As New System.Net.Sockets.TcpClient()
    Try
        tcpClient.Connect("10.xxx.xx.xx", 7000)
        Dim networkStream As NetworkStream = tcpClient.GetStream()
        If networkStream.CanWrite And networkStream.CanRead Then
            'Dim sendBytes As [Byte]() = Encoding.ASCII.GetBytes("$gimme")
            'networkStream.Write(sendBytes, 0, sendBytes.Length)
            ' 'Read the NetworkStream into a byte buffer.
            Do
            Loop Until networkStream.DataAvailable
            Dim bytes(tcpClient.ReceiveBufferSize) As Byte
            networkStream.Read(bytes, 0, CInt(tcpClient.ReceiveBufferSize))
            Dim returndata As String = Encoding.ASCII.GetString(bytes)
            ''Label1.Text = returndata
            tcpClient.Close()
        Else
            If Not networkStream.CanRead Then
                tcpClient.Close()
            Else
                If Not networkStream.CanWrite Then
                    tcpClient.Close()
                End If
            End If
        End If
    Catch ex As Exception
        'sLabel1.Text = "Exception Caught"
    End Try
End Sub 
```

并且代码挂在这里在读取部分

循环直到 networkStream.DataAvailable

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:50:12.543

根据以下代码，您的代码逻辑似乎有缺陷。

```
' Examples for CanRead, Read, and DataAvailable.
' Check to see if this NetworkStream is readable.
If myNetworkStream.CanRead Then
   Dim myReadBuffer(1024) As Byte
       Dim myCompleteMessage As StringBuilder = New StringBuilder()
   Dim numberOfBytesRead As Integer = 0

   ' Incoming message may be larger than the buffer size.
   Do
      numberOfBytesRead = myNetworkStream.Read(myReadBuffer, 0, myReadBuffer.Length)
           myCompleteMessage.AppendFormat("{0}", Encoding.ASCII.GetString(myReadBuffer, 0, numberOfBytesRead))
   Loop While myNetworkStream.DataAvailable

   ' Print out the received message to the console.
       Console.WriteLine(("You received the following message : " + myCompleteMessage.ToString()))
Else
   Console.WriteLine("Sorry.  You cannot read from this NetworkStream.")
End If 
```

我建议你再考虑一下这个[NetworkStream.DataAvailable 属性](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.dataavailable%28v=vs.100%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T14:41:03.187

问题是没有已知的方法可以立即读取所有字节，而不会阻塞 read()。**要以inputstream.ReadLine()**的方式读取一行，最好逐个字符地读取，直到读取到行尾字符：

```
Function readln(ByRef inputstream as Stream) as String
 Dim r as String = ""
 do
  Dim c as Char = Chr(inputstream.Read())
  If c = vbCr Then Exit loop    'vbCr or vbLf depending on application'
  r += c
 loop
 Return r
End Function 
```

不是很好但很实用。并且在数据到达缓慢或延迟时不会消耗 CPU 性能。**inputstream.Read()**为您阻塞，直到一个字符可用。

# java - HttpExchange getRequestURI 在第一个 & 符号之前结束

> ID：10599783
> 
> 赞同：0
> 
> 时间：2012-05-15T11:30:01.570
> 
> 标签：java, parameters, uri, com.sun.net.httpserver

原始 URI 是（假设）： `http://xx.xx.xxx.xx:8000/mypath?parm1=1&parm2=he`

`getRequestURI`返回：`http://xx.xx.xxx.xx:8000/mypath?parm1=1` 它忽略第二个参数。

如果我用`&`逗号替换，它将返回包含所有参数的完整 URI。

你遇到过同样的问题吗？你有什么解决办法吗？它是通过另一种方法读取第一个 GET 标题行的方法吗？（使用`HTTPServer`）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T07:56:41.317

发送 URI URLencoded，即用百分比 uuencode 代码替换特殊字符，可以解决问题。

例子：`http://xx.xx.xxx.xx:8000/mypath?parm1=1&parm2=he`

变成：`http://xx.xx.xxx.xx:8000/mypath?parm1=1&parm2=he`

甚至：（`http://xx.xx.xxx.xx:8000/mypath?parm1=1&parm2=he`无需编码第一部分）

并`getRequestURI`返回所有参数。

# opengl - 使用 OpenGL 和 Cg 的环境映射

> ID：10599784
> 
> 赞同：1
> 
> 时间：2012-05-15T11:30:11.000
> 
> 标签：opengl, graphics, 3d, cg

我写了一个程序，使用OpenGL和Cg着色器语言实现环境映射。但是结果不是很正确。计算模型的颜色时，我们会将反射与贴花纹理混合。一个称为**反射率**的统一参数允许应用程序控制材料的反射程度。

首先我列出我的片段 Cg 代码：

```
void main_f(float2 texCoord : TEXCOORD0,
    float3 R : TEXCOORD1,

    out float4 color : COLOR,

    uniform float reflectivity,
    uniform sampler2D decalMap,
    uniform samplerCUBE environmentMap)
{
//fetch reflected environment color
float3 reflectedColor = texCUBE(environmentMap,R);

//fetch the decal base coloe
float3 decalColor = tex2D(decalMap,texCoord);
color.xyz = lerp(reflectedColor,decalColor,reflectivity);//change !!!!!!!!
color.w = 1;
} 
```

我将统一参数反射率设置为 0.6。结果是： ![在此处输入图像描述](../Images/994686d05b6ff0f1c079eecef2e7af26.png)

我们可以看到，**贴花纹理的颜色信息丢失了**。只有环境立方体纹理的颜色信息。如果我将反射率设置为 0，模型会变暗。但是，如果我将片段 cg 代码中的 color.xyz 更改为：

```
color.xyz = decalColor; 
```

我可以得到正确的结果（只有贴花纹理的颜色）： ![在此处输入图像描述](../Images/1cc1e380e14ff3588ce08a465398265c.png)

如果我将片段 cg 代码中的 color.xyz 更改为：

```
color.xyz = reflectedColor; 
```

我也可以获得正确的结果（只有环境立方体纹理中的颜色）： ![在此处输入图像描述](../Images/02b73a15f34fba6bacb1289268937388.png)

**我的问题是：为什么当我使用 Cg 函数lerp**将贴花纹理的颜色信息与环境立方体纹理的颜色信息混合时它不起作用？

最后我列出了我的 cg 顶点着色器和 cpp 文件：vertex.cg：

```
void main_v(float4 position : POSITION,
                float2 texCoord : TEXCOORD0,//decal texture
                float3 normal : NORMAL,

                out float4 oPosition : POSITION,
                out float2 oTexCoord : TEXCOORD0,//out decal texture
                out float3 R : TEXCOORD1,//reflective vector

                uniform float3 eyePositionW,//eye position in world space
                uniform float4x4 modelViewProj,
                uniform float4x4 modelToWorld
                )
{
        modelViewProj = glstate.matrix.mvp;
        oPosition = mul(modelViewProj,position);        
        oTexCoord = texCoord;

        float3 positionW = mul(modelToWorld,position).xyz;
        float3 N = mul((float3x3)modelToWorld,normal);
        N = normalize(N);

        float3 I = positionW - eyePositionW;//incident vector
        R = reflect(I,N);
} 
```

主.cpp：

```
#pragma comment(lib,"glew32.lib")
#pragma comment(lib,"GLAUX.LIB")
#pragma comment(lib,"cg.lib")
#pragma comment(lib,"cgGL.lib")

#include <GL/glew.h>
#include <GL/glut.h>
#include <GL/glaux.h>
#include <CG/cg.h>
#include <CG/cgGL.h>
#include "MonkeyHead.h"
#include <iostream>
#include <cmath>

using namespace std;

int loop;
/* Use enum to assign unique symbolic OpenGL texture names. */
enum {
    TO_BOGUS = 0,
    TO_DECAL,
    TO_ENVIRONMENT,
};
const double myPi = 3.14159;
//for Cg shader
static CGcontext myCgContext;
static CGprofile myCgVertexProfile,myCgFragmentProfile;
static CGprogram myCgVertexProgram,myCgFragmentProgram;
static const char *myProgramName = "CgTest18CubeMapReflective",
                        *myVertexProgramFileName = "vertex.cg",
                        *myVertexProgramName = "main_v",
                        *myFragmentProgramFileName = "fragment.cg",
                        *myFragmentProgramName = "main_f";
static CGparameter myCgVertexParam_modelToWorld;

//bmp files for cube map
const char *bmpFile[6] = {"Data/1.bmp","Data/2.bmp","Data/3.bmp",
                                        "Data/4.bmp","Data/5.bmp","Data/6.bmp"};
const char *decalBmpFile = "Data/decal.bmp";
static float eyeAngle = 0.53;
static float eyeHeight = 0.0f;
static float headSpain = 0.0f;
static const GLfloat vertex[4*6][3] = {
    /* Positive X face. */
    { 1, -1, -1 },  { 1, 1, -1 },  { 1, 1, 1 },  { 1, -1, 1 },
    /* Negative X face. */
    { -1, -1, -1 },  { -1, 1, -1 },  { -1, 1, 1 },  { -1, -1, 1 },
    /* Positive Y face. */
    { -1, 1, -1 },  { 1, 1, -1 },  { 1, 1, 1 },  { -1, 1, 1 },
    /* Negative Y face. */
    { -1, -1, -1 },  { 1, -1, -1 },  { 1, -1, 1 },  { -1, -1, 1 },
    /* Positive Z face. */
    { -1, -1, 1 },  { 1, -1, 1 },  { 1, 1, 1 },  { -1, 1, 1 },
    /* Negative Z face. */
    { -1, -1, -1 },  { 1, -1, -1 },  { 1, 1, -1 },  { -1, 1, -1 },
};
static float reflectivity = 0.6;
GLuint decalTexture;
bool animating = false;//enable animating or not

static void drawMonkeyHead()
{
    static GLfloat *texCoords = NULL;
    const int numVertices = sizeof(MonkeyHead_vertices)
        / (3 * sizeof(MonkeyHead_vertices[0]));
    const float scaleFactor = 1.5;
    //generate texcoords
    texCoords = (GLfloat*)malloc(2 * numVertices * sizeof(GLfloat));
    if (!texCoords)
    {
        cerr << "ERROR : Monkey head texcoords memory malloc failed !" << endl;
        exit(1);
    }
    for (loop = 0;loop < numVertices;++loop)
    {
        texCoords[loop * 2] = scaleFactor * MonkeyHead_vertices[3 * loop];
        texCoords[loop * 2 + 1] = scaleFactor * MonkeyHead_vertices[3 * loop + 1];
    }

    //use vertex array
    //enable array
    glEnableClientState(GL_VERTEX_ARRAY);
    glEnableClientState(GL_NORMAL_ARRAY);
    glEnableClientState(GL_TEXTURE_COORD_ARRAY);
    //assign array data
    glVertexPointer(3,GL_FLOAT,3 * sizeof(GLfloat),MonkeyHead_vertices);
    glNormalPointer(GL_FLOAT,3 * sizeof(GLfloat),MonkeyHead_normals);
    glTexCoordPointer(2,GL_FLOAT,2 * sizeof(GLfloat),texCoords);

    glDrawElements(GL_TRIANGLES,3 * MonkeyHead_num_of_triangles,
        GL_UNSIGNED_SHORT,MonkeyHead_triangles);
}

//read bmp image file
AUX_RGBImageRec *LoadBMP(const char *FileName)
{
    FILE *File = NULL;
    if(!FileName)
        return NULL;
    File = fopen(FileName,"r");
    if (File)
    {
        fclose(File);
        return auxDIBImageLoad(FileName);
    }
    return NULL;
}

//load decal texture from a bmp file
int loadDecalTexture()
{
    int status = 1;
    AUX_RGBImageRec *TextureImage = NULL;
    if ((TextureImage = LoadBMP(decalBmpFile)))
    {
        glGenTextures(1,&decalTexture);
        glBindTexture(GL_TEXTURE_2D,decalTexture);
        glTexImage2D(GL_TEXTURE_2D,0,GL_RGB,TextureImage->sizeX,
            TextureImage->sizeY,0,GL_RGB,GL_UNSIGNED_BYTE,
            TextureImage->data);//指定纹理
        glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);//指定过滤模式
        glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
    }
    else
        status = 0;
    if (TextureImage)
    {
        if (TextureImage->data)
            free(TextureImage->data);
        free(TextureImage);
    }

    return status;
}

//load cube map from 6 bmp files
int loadCubeMap()
{
    int status = 1;
    AUX_RGBImageRec *TextureImage[6] = {NULL,NULL,NULL,NULL,NULL,NULL};
    for (loop = 0;loop < 6;++loop)
    {
        if (!(TextureImage[loop] = LoadBMP(bmpFile[loop])))
        {
            cout << "ERROR :load bmp file " << loop << " failed !" << endl;
            status = 0;
        }
    }

    glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_X, 0, GL_RGB, TextureImage[0] ->sizeX, TextureImage[0] ->sizeY,
        0, GL_RGB, GL_UNSIGNED_BYTE, TextureImage[0] ->data);
    glTexImage2D(GL_TEXTURE_CUBE_MAP_NEGATIVE_X, 0, GL_RGB, TextureImage[1] ->sizeX, TextureImage[1] ->sizeY,
        0, GL_RGB, GL_UNSIGNED_BYTE, TextureImage[1] ->data);
    glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_Y, 0, GL_RGB, TextureImage[2] ->sizeX, TextureImage[2] ->sizeY,
        0, GL_RGB, GL_UNSIGNED_BYTE, TextureImage[2] ->data);
    glTexImage2D(GL_TEXTURE_CUBE_MAP_NEGATIVE_Y, 0, GL_RGB, TextureImage[3] ->sizeX, TextureImage[3] ->sizeY,
        0, GL_RGB, GL_UNSIGNED_BYTE, TextureImage[3] ->data);
    glTexImage2D(GL_TEXTURE_CUBE_MAP_POSITIVE_Z, 0, GL_RGB, TextureImage[4] ->sizeX, TextureImage[4] ->sizeY,
        0, GL_RGB, GL_UNSIGNED_BYTE, TextureImage[4] ->data);
    glTexImage2D(GL_TEXTURE_CUBE_MAP_NEGATIVE_Z, 0, GL_RGB, TextureImage[5] ->sizeX, TextureImage[5] ->sizeY,
        0, GL_RGB, GL_UNSIGNED_BYTE, TextureImage[5] ->data);

    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_CUBE_MAP, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    //free memory
    for (loop = 0;loop < 6;++loop)
    {
        if (TextureImage[loop])
        {
            if (TextureImage[loop] ->data)
            {
                free(TextureImage[loop] ->data);
            }
            free(TextureImage[loop]);
        }
    }

    return status;
}

//draw th surroundings as a cube with each face of 
//the cube environment map applied.
void drawSurroundings(const GLfloat *eyePosition)
{
    const float surroundingsDistance = 8;

    glLoadIdentity();
    gluLookAt(eyePosition[0],eyePosition[1],eyePosition[2],
        0,0,0,0,1,0);
    glScalef(surroundingsDistance,
        surroundingsDistance,
        surroundingsDistance);

    glEnable(GL_TEXTURE_CUBE_MAP);
    glBindTexture(GL_TEXTURE_CUBE_MAP,TO_ENVIRONMENT);
    glTexEnvi(GL_TEXTURE_ENV,GL_TEXTURE_ENV_MODE,GL_REPLACE);

    glBegin(GL_QUADS);
        for (loop = 0;loop < 4 * 6;++loop)
        {
            glTexCoord3fv(vertex[loop]);
            glVertex3fv(vertex[loop]);
        }
    glEnd();
}

static void checkForCgError(const char *situation)
{
    CGerror error;
    const char *string = cgGetLastErrorString(&error);

    if (error != CG_NO_ERROR) {
        cout << "ERROR : " << myProgramName << situation << string << endl;
        if (error == CG_COMPILER_ERROR) {
            cout << cgGetLastListing(myCgContext) << endl;
        }
        exit(1);
    }
}

//init Cg shaders
void initCg()
{
    myCgContext = cgCreateContext();

    myCgVertexProfile = cgGLGetLatestProfile(CG_GL_VERTEX);
    cgGLSetOptimalOptions(myCgVertexProfile);
    checkForCgError("selecting vertex profile");

    myCgVertexProgram = cgCreateProgramFromFile(
        myCgContext,
        CG_SOURCE,
        myVertexProgramFileName,
        myCgVertexProfile,
        myVertexProgramName,
        NULL);
    checkForCgError("Creating vertex Cg program from file");

    cgGLLoadProgram(myCgVertexProgram);
    checkForCgError("loading vertex program");

    myCgFragmentProfile = cgGLGetLatestProfile(CG_GL_FRAGMENT);
    cgGLSetOptimalOptions(myCgFragmentProfile);
    checkForCgError("selecting fragment profile");

    myCgFragmentProgram = cgCreateProgramFromFile(
        myCgContext,
        CG_SOURCE,
        myFragmentProgramFileName,
        myCgFragmentProfile,
        myFragmentProgramName,
        NULL);
    checkForCgError("Creating fragment Cg program from file");

    cgGLLoadProgram(myCgFragmentProgram);
    checkForCgError("loading fragment program");
}

//compute rotate transformation matrix
void makeRotateMatrix(float angle,
                      float ax,float ay,float az,
                      float m[16])
{
    float radians, sine, cosine, ab, bc, ca, tx, ty, tz;
    float axis[3];
    float mag;

    axis[0] = ax;
    axis[1] = ay;
    axis[2] = az;
    mag = sqrt(axis[0]*axis[0] + axis[1]*axis[1] + axis[2]*axis[2]);
    if (mag) {
        axis[0] /= mag;
        axis[1] /= mag;
        axis[2] /= mag;
    }

    radians = angle * myPi / 180.0;
    sine = sin(radians);
    cosine = cos(radians);
    ab = axis[0] * axis[1] * (1 - cosine);
    bc = axis[1] * axis[2] * (1 - cosine);
    ca = axis[2] * axis[0] * (1 - cosine);
    tx = axis[0] * axis[0];
    ty = axis[1] * axis[1];
    tz = axis[2] * axis[2];

    m[0]  = tx + cosine * (1 - tx);
    m[1]  = ab + axis[2] * sine;
    m[2]  = ca - axis[1] * sine;
    m[3]  = 0.0f;
    m[4]  = ab - axis[2] * sine;
    m[5]  = ty + cosine * (1 - ty);
    m[6]  = bc + axis[0] * sine;
    m[7]  = 0.0f;
    m[8]  = ca + axis[1] * sine;
    m[9]  = bc - axis[0] * sine;
    m[10] = tz + cosine * (1 - tz);
    m[11] = 0;
    m[12] = 0;
    m[13] = 0;
    m[14] = 0;
    m[15] = 1;
}

//compute translation transformation matrix
static void makeTranslateMatrix(float x, float y, float z, float m[16])
{
    m[0]  = 1;  m[1]  = 0;  m[2]  = 0;  m[3]  = x;
    m[4]  = 0;  m[5]  = 1;  m[6]  = 0;  m[7]  = y;
    m[8]  = 0;  m[9]  = 0;  m[10] = 1;  m[11] = z;
    m[12] = 0;  m[13] = 0;  m[14] = 0;  m[15] = 1;
}

//multiply a floar4x4 matrix by another float4x4 matrix
static void multMatrix(float dst[16],const float src1[16],const float src2[16])
{
    for (int i = 0;i < 4;++i)
    {
        for (int j = 0;j < 4;++j)
        {
            dst[i * 4 + j] = src1[i * 4 + 0] * src2[0 * 4 + j] +
                                    src1[i * 4 + 1] * src2[1 * 4 + j] +
                                    src1[i * 4 + 2] * src2[2 * 4 + j] +
                                    src1[i * 4 + 3] * src2[3 * 4 + j];
        }
    }
}

void init()
{
    glewInit();
    glClearColor(0.0,0.0,0.0,1.0);
    glShadeModel(GL_SMOOTH);
    glEnable(GL_DEPTH_TEST);

    if (!loadDecalTexture())
    {
        cout << "ERROR : load decal texture from bmp file failed !" << endl;
        exit(1);
    }

    glBindTexture(GL_TEXTURE_CUBE_MAP,TO_ENVIRONMENT);
    if (!loadCubeMap())
    {
        cout << "ERROR : load cube map from bmp file failed !" << endl;
        exit(1);
    }

    initCg();
}

void display()
{
    const GLfloat eyePosition[4] = {6 * sin(eyeAngle),
                                                eyeHeight,
                                                6 * cos(eyeAngle),
                                                1};
    float tranlateMatrix[16],rotateMatrix[16],modelMatrix[16];
    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    cgGLEnableProfile(myCgVertexProfile);
    checkForCgError("enabling vertex profile");

    cgGLEnableProfile(myCgFragmentProfile);
    checkForCgError("enabling fragment profile");

    cgGLBindProgram(myCgVertexProgram);
    checkForCgError("binding vertex program");

    cgGLBindProgram(myCgFragmentProgram);
    checkForCgError("binding fragment program");

    glLoadIdentity();
    glTranslatef(0.0,0.0,-5.0);
    glRotatef(headSpain,0,1,0);

    //set some uniform parameters in Cg shader
    cgGLSetParameter3fv(
        cgGetNamedParameter(myCgVertexProgram,"eyePositionW"),
        eyePosition);
    checkForCgError("setting eyePositionW parameter");

    makeRotateMatrix(headSpain,0,1,0,rotateMatrix);
    makeTranslateMatrix(0.0,0.0,-5.0,tranlateMatrix);
    multMatrix(modelMatrix,tranlateMatrix,rotateMatrix);
    //set the Cg matrix parameter : modelToWorld 
    cgSetMatrixParameterfr(
        cgGetNamedParameter(myCgVertexProgram,"modelToWorld"),
        modelMatrix);
    checkForCgError("setting modelToWorld parameter");
    cgGLSetParameter1f(
        cgGetNamedParameter(myCgFragmentProgram,"reflectivity"),
        reflectivity);
    checkForCgError("setting reflectivity parameter");

    cgGLSetTextureParameter(
        cgGetNamedParameter(myCgFragmentProgram,"decalMap"),
        decalTexture);
    checkForCgError("setting decalTexture parameter");
    cgGLSetTextureParameter(
        cgGetNamedParameter(myCgFragmentProgram,"environmentMap"),
        TO_ENVIRONMENT);
    checkForCgError("setting environmentMap parameter");

    drawMonkeyHead();

    cgGLDisableProfile(myCgVertexProfile);
    checkForCgError("disabling vertex profile");

    cgGLDisableProfile(myCgFragmentProfile);
    checkForCgError("disabling fragment profile");

    drawSurroundings(eyePosition);

    glutSwapBuffers();
}

static void idle()
{
    headSpain += 0.5;
    if (headSpain > 360)
    {
        headSpain -= 360;
    }
    glutPostRedisplay();
}

static void keyboard(unsigned char key,int x,int y)
{
    switch(key)
    {
    case ' ':
        animating = !animating;
        if (animating)
        {
            glutIdleFunc(idle);
        }
        else
            glutIdleFunc(NULL);
        break;
    case 'r':
        reflectivity += 0.1;
        if (reflectivity > 1.0)
        {
            reflectivity = 1.0;
        }
        cout << "reflectivity : " << reflectivity << endl;
        glutPostRedisplay();
        break;
    case 'R':
        reflectivity -= 0.1;
        if (reflectivity < 0.0)
        {
            reflectivity = 0.0;
        }
        cout << "reflectivity : " << reflectivity << endl;
        glutPostRedisplay();
        break;
    case 27:
        cgDestroyProgram(myCgVertexProgram);
        cgDestroyContext(myCgContext);
        exit(0);
        break;
    }
}

void reshape(int w,int h)
{
    glViewport(0,0,(GLsizei)w,(GLsizei)h);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(60.0,1,1.0,20.0);
    glMatrixMode(GL_MODELVIEW);
    glLoadIdentity();
}

int main(int argc,char** argv)
{
    glutInit(&argc,argv);
    glutInitDisplayMode(GLUT_DOUBLE | GLUT_RGB | GLUT_DEPTH);
    glutInitWindowPosition(0,0);
    glutInitWindowSize(600,600);
    glutCreateWindow("CubeMapReflection");
    init();
    glutDisplayFunc(display);
    glutReshapeFunc(reshape);
    glutKeyboardFunc(keyboard);

    glutMainLoop();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T16:15:43.760

我看到的第一件事是 lerp 语句需要反转它的值。

```
color.xyz = lerp(reflectedColor,decalColor,reflectivity);//change !!!!!!!! 
```

应该

```
color.xyz = lerp(decalColor, reflectedColor, reflectivity); 
```

因为[lerp 文档](http://http.developer.nvidia.com/Cg/lerp.html)说：

lerp(a, b, w) 在 w = 0 时返回 a，在 w = 1 时返回 b，当反射率 = 0 时您想要完全贴花，而当反射率 = 1 时返回完全反射。

我看到你想要达到的效果类似于 GL_MODULATE。您将需要将这些值组合在一起，而不是在它们之间徘徊。试试这个，它应该可以工作并给你想要的效果。

```
color.xyz = (reflectedColor.xyz * reflectivity) * decalColor; 
```

# mysql - MySQL GROUP BY 和 COUNT

> ID：10599789
> 
> 赞同：2
> 
> 时间：2012-05-15T11:30:41.960
> 
> 标签：mysql, count, group-by

在对mysql表中的一些元素进行分组后，我有一个关于计数的小问题，我有一个订单表..其中每个订单都有几行按代码分组（命名为codcomanda）......我必须做一个查询计算每个客户的订单数量，并仅列出订单的名称和数量。

这就是我想出的（这可能很愚蠢......我不是专业程序员）

```
SELECT a.nume, a.tel, (
    SELECT COUNT(*) AS `count` 
      FROM (
        SELECT id AS `lwtemp` 
          FROM lw_comenzi_confirmate AS yt 
         WHERE status=1 AND yt.tel LIKE **a.tel** 
         GROUP BY yt.codcomanda
      ) AS b
  ) AS numar_comenzi 
  FROM lw_comenzi_confirmate AS a 
 WHERE status=1 
 GROUP BY tel; 
```

nume = NAME
tel = PHONE（这是客户端的唯一标识符，因为没有登录系统）

上述查询的问题是我不知道如何将**a.tel**与第一个选择所在的那个匹配。如果我用数据库中的数字替换它，它就可以工作......

谁能帮助我如何引用该变量？或者关于如何完成这项工作的另一种解决方案？

如果需要更多信息，我会尽快提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:18:25.513

如果我对您的架构的理解有误，请纠正我：

*   `lw_comenzi_confirmate`包含`nume`和`tel`属于客户；
*   `lw_comenzi_confirmate`包含订单详情（同一张表）；
*   一个订单在表中可以有多个条目`lw_comenzi_confirmate`，订单以`codcomanda`字段区分。

首先，我*强烈*建议阅读有关[规范化](http://en.wikipedia.org/wiki/Database_normalization)和修复数据库设计的内容。

以下应该为您完成这项工作：

```
SELECT nume, tel, count(DISTINCT codcomanda) AS cnt
  FROM lw_comenzi_confirmate
 WHERE status = 1
 GROUP BY nume, tel
 ORDER BY nume, tel; 
```

[您可以在SQL Fiddle](http://www.sqlfiddle.com/#!2/cfd00/3)上测试此查询。

# iphone - stringByEvaluatingJavaScriptFromString：不会返回任何字符串

> ID：10599792
> 
> 赞同：0
> 
> 时间：2012-05-15T11:30:49.207
> 
> 标签：iphone

我准备编写一段代码来提取网页的某些部分，所以我决定使用 stringByEvaluatingJavaScriptFromString: 来解析 HTML。下面是我的测试代码

```
[webView loadHTMLString:@"<html><body><div id='hi'><font size=20>hello world</font></div></body></html>" baseURL:nil];

NSString *hiValue = [webView stringByEvaluatingJavaScriptFromString:@"document.body.getElementById('hi')"];  

NSLog(@"value: %@",hiValue); 
```

NSLog 不会在控制台上返回任何字符串。有没有人给我一些帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:51:50.503

我的猜测是您在网页完成加载之前执行此代码。

尝试`webViewDidFinishLoad:`使用[UIWebViewDelegate](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebViewDelegate_Protocol/Reference/Reference.html#//apple_ref/doc/uid/TP40006951)在方法中调用您的代码。

```
- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    [webView loadHTMLString:@"<html><body><div id='hi'><font size=20>hello world</font></div></body></html>" baseURL:nil];

    NSString *hiValue = [webView stringByEvaluatingJavaScriptFromString:@"document.body.getElementById('hi')"];  

    NSLog(@"value: %@",hiValue);
} 
```

不要忘记将委托设置为`viewDidLoad:`：

```
webView.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T10:04:25.540

getElementsById 返回一个对象而不是字符串。你应该这样使用：

```
document.body.getElementById('hi').outerHTML 
```

# css - 分组表格行和分页符

> ID：10599793
> 
> 赞同：6
> 
> 时间：2012-05-15T11:30:50.353
> 
> 标签：css

我有一张比较长的桌子。每条记录有六行。因此，标识符为 16 的项目有`<tr-16-1><tr-16-2>.....<tr-16-6>`，标识符 25 将是`<tr-25-1><tr-25-2>.....<tr-25-6>`，等等。

我希望分页符不拆分六行的任何分组。因此，如果`<tr-25-6>`要在新页面上继续，我希望所有人都`<tr-25's>`打破它。

如果有帮助，我可以轻松地将一个类附加到所有六行。谁能指出我如何做到这一点的正确方向？非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T11:44:50.860

一种可能性是将引用同一记录的所有行分组在一个单一的行中`tbody`，因此您有更多`tbody`的每行包含 6 行（[这非常好](https://stackoverflow.com/questions/3076708/can-we-have-multiple-tbody-in-same-table)，并且作为一个原子组似乎是合乎逻辑的），然后为媒体打印添加此规则

```
@media print {
    tbody {
        page-break-inside: avoid;
    }
} 
```

`tbody`这样可以避免a 内的分页符。
不幸的是，[除 Firefox 之外](https://developer.mozilla.org/en/CSS/page-break-inside#section_5)`page-break-inside`的所有现代浏览器都支持（错误[#132035](https://bugzilla.mozilla.org/show_bug.cgi?id=132035)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-30T07:02:36.310

如果您不想使用@media 标签，这是另一种方式：

添加`class=print-entire`到您的表中，并添加此样式：

```
table.print-entire tr td, table.print-entire tr th {
        page-break-inside: avoid;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-25T19:38:35.560

我会试一试：

```
@media print {
    tr, td, th { page-break-inside:avoid }
} 
```

# php - PHP MVC 类结构

> ID：10599795
> 
> 赞同：0
> 
> 时间：2012-05-15T11:31:09.857
> 
> 标签：php, model-view-controller, class

我正在 MVC 文件结构中创建一个购物车，并且我有一个购物车控制器，它具有一组用于前端和后端的功能。

```
Class ShoppingCartController{

    //frontend function
    public function viewCart(){
          //do something
          require 'view/viewCart.php';
    }

    //backend function
    public function viewOrders(){
          //do something
          require 'view/viewOrders.php';
    }
}

$controll = new ShoppingCartController();

if(isset($_GET['action']) && in_array($_GET['action'], get_class_methods($controll))){
    call_user_func(array($controll, $_GET['action']));
} 
```

我想要做的是防止来自前端的任何人能够调用后端函数。所以我想我应该将函数设置为受保护并编写两个扩展类来规范权限。像这样

```
 Class ShoppingCartController{

    //frontend function
    protected function viewCart(){
          //do something
          require 'view/viewCart.php';
    }

    //backend function
    protected function viewOrders(){
          //do something
          require 'view/viewOrders.php';
    }
}

Class ShoppingCartFrontendController Extends ShoppingCartController{
    //frontend function
    public function viewCartExtended(){
          //do something
          $this->viewCart();
    }
}

Class ShoppingCartBackendController Extends ShoppingCartController{
    //backend function
    public function viewOrdersExtended(){
        //do something
        $this->viewOrders();
    }
} 
```

其他人都会这样做还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T15:37:40.187

我想你可以从阅读[这条旧评论](https://stackoverflow.com/questions/3430181/acl-implementation/9685039#9685039)开始。

基本思想是将控制器包裹在一个“保护壳”上，它负责保护里面的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:01:58.330

如果我这样做，我会添加

```
//frontend function
public function viewCartExtended(){
      //do something
      $this->viewCart();
} 
```

和

```
//backend function  
public function viewOrdersExtended(){
    //do something
    $this->viewOrders();
} 
```

到我的控制器。一个阶级来统治他们。

```
//frontend function
private function viewCartExtended(){
      //do something
      require 'view/viewCart.php';
}  
//backend function
private function viewOrdersExtended(){
    //do something
    require 'view/viewOrders.php';
}
//public method
public function get_view($foo){
    //test if authed etc..
    switch($foo){
      case "foo":
          return viewCartExtended();
      break;
      case "bar":
          return viewOrdersExtended(); 
      break;
      ... .. . .
      .. . 
```

等等。
不过，我不是 CI 高手。所以这可能不是“最好”的方式；但它保持简单。

# android - 多项目一源

> ID：10599796
> 
> 赞同：6
> 
> 时间：2012-05-15T11:31:14.240
> 
> 标签：android, ios, flash, air, flash-builder

我们有一个希望跨多个设备部署的程序。

*   独立俘虏 AIR
*   基于网络的 Flash 应用程序
*   iOS 应用
*   安卓应用

除了一些 UI 内容之外的代码在很多部分都是相同的。我想知道最好的方法是什么。我们应该有一个共享库项目，还是应该有一个具有不同编译器设置的大项目，通过 ant 或其他方法控制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:34:32.940

访问和使用共享库项目是实现跨平台项目的最佳方式。除了这种方法，您还可以使用 ant Build。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T14:34:03.540

答案通常与不同的“UI 东西”有很大关系，但因为听起来你是 Flash/AIR，所以这可能不是一个大问题。如果是我，我会采用“一个大项目”的方法，并获得一个与我的 IDE 兼容的严肃 CI/NI 和 SCM 套件。如果您使用的是[Eclipse](http://www.eclipse.org/) / [Aptana](http://aptana.com/)，我喜欢[Husdon](http://hudson-ci.org/) / [Surround](http://www.seapine.com/surroundscm.html). （完全披露：我曾经在 @Seapine 工作。）如果您不使用 Eclipse，您应该查看与您的 IDE 集成的 CI/SCM 选项（以及它们本身；例如，Hudson 有一个环绕模块，反之亦然） . 共享库的东西可以工作，但由于 Flash 几乎无处不在，我认为不需要增加单独项目的划分。功能齐全的 CI 可以非常有效地为您管理编译器差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-07T14:59:14.927

我们正在将这种方法组合用于目前存在于 IOS AppStore 中的大型移动/网络项目，并将很快在 Android 和网络上发布：

*   一个使用编译器指令来处理特定平台逻辑和元素的**主要项目**
*   **用于处理主项目代码库中特定平台逻辑的**编译器指令****
***   **我们的视频和交互引擎**的一个单独项目，它主要是平台独立的，使用 switch 语句来实现特定于平台的逻辑*   **一个用于图形资产的**共享SWC 。平台特定元素以平台和下划线为前缀。编译器指令用于指定哪些影片剪辑显示在屏幕上*   **为各种平台进行编译的**Ant 脚本*******   **与硬件特定功能接口的**本机扩展********

 ****我们使用一些商业的、一些开源的和一些自制的 ANE 来实现 AppStore 集成、社交媒体功能、网络监控、通知和应用程序间通信。

*   com.adobe.extension.NetworkInfo.ane
*   com.milkmangames.extensions.EasyPush.ane
*   com.milkmangames.extensions.GoViral.ane
*   com.milkmangames.extensions.StoreKit.ane

*（我与 Milkmangames 没有任何关系）*

我目前正在编写一个 Android ANE 来使用 Intents 处理应用间通信。这是我开源的一个项目：

**[https://github.com/interactivenyc/ANESampleProject](https://github.com/interactivenyc/ANESampleProject)**。

我目前在那里遇到一个问题，如果有人有兴趣关注该项目，我将很快发布一个包含详细信息的问题。在项目首页上显示的自述文件中对项目设置进行了很好的描述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-07T15:20:18.080

如果您使用 git 进行版本控制，请查看子模块。我用它把所有东西都保存在一个项目中，但是分别对每个模块进行版本控制，它产生了一个很好的解决方案。****

# php - 在php中获取最近的日期

> ID：10599799
> 
> 赞同：1
> 
> 时间：2012-05-15T11:31:30.680
> 
> 标签：php, mysql, sql, phpmyadmin

我有事件列表，所以每个事件的开始日期到结束日期，所以每个事件都有事件开始日期和结束日期之间的时间表列表我只需要获得第一个最近的日期我的意思是第一个事件的时间表日期。

这是我的代码

```
SELECT
  s.schedule_id, s.schedule_start_time, s.schedule_end_time, s.schedule_topic, s.Parallel,
  c.speaker_name
FROM schedule_table AS s, speaker_profile_table AS c
WHERE
  s.event_id='23'
  OR s.schedule_date LIKE '%2012-06-07%'
  AND c.speaker_id = s.speaker_id
ORDER BY s.schedule_start_time ASC 
```

在这里，我得到所有这样的时间表

> 时间表1：2012-06-06，时间表2：2012-06-06，时间表3：2012-06-08

在这里我只需要 schedule1 和 schedule2 我不需要 schedule3 我怎么能得到这个请指导我

感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:41:27.247

如果我正确理解您想要什么，这应该可以完成工作（已**编辑**）：

```
SELECT
  s.schedule_id, s.schedule_start_time, s.schedule_end_time, s.schedule_topic, s.Parallel,
  c.speaker_name
FROM schedule_table s
LEFT JOIN speaker_profile_table c ON c.speaker_id = s.speaker_id
WHERE s.schedule_date = (
  SELECT schedule_date
  FROM schedule_table
  WHERE
    event_id = '23'
    OR schedule_date LIKE '%2012-06-07%'
  ORDER BY schedule_date ASC
  LIMIT 1
)
ORDER BY s.schedule_start_time ASC 
```

# javafx - 使用 swing.filechooser 部署 javafx 1.3 应用程序

> ID：10599801
> 
> 赞同：1
> 
> 时间：2012-05-15T11:31:38.950
> 
> 标签：javafx, jnlp, java-web-start

我有一个 Java 应用程序，并在其上集成了**JavaFX 1.3**。我花了三天多的时间尝试将其部署为 Web Start 应用程序，但这是不可能的。

我有一个使用控制台（`javafx -jar MatchTestCaseGenerator-2.0-jar-with-dependencies.jar`）运行的 jar，但是当我尝试执行 jnlp 时出现以下错误：

```
java.security.AccessControlException: access denied (java.util.PropertyPermission user.home read)
at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
at java.security.AccessController.checkPermission(AccessController.java:546)
at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
at java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:1285)
at java.lang.System.getProperty(System.java:667)
at sun.awt.shell.ShellFolderManager.get(ShellFolderManager.java:57)
at sun.awt.shell.ShellFolder.get(ShellFolder.java:227)
at javax.swing.filechooser.FileSystemView.getDefaultDirectory(FileSystemView.java:404)
at javax.swing.JFileChooser.setCurrentDirectory(JFileChooser.java:552)
at javax.swing.JFileChooser.<init>(JFileChooser.java:334)
at javax.swing.JFileChooser.<init>(JFileChooser.java:286) ... 
```

我对 jar 文件进行了签名和验证，我的 JNLP 文件是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp spec="1.0+" codebase="file:/Users/ana/Projects/Java/workspace/Match Test Case Generator 2.0/target" href="MatchTestCaseGenerator.jnlp">
 <information>
    <title>Match Test Case Generator</title>
    <vendor>KV </vendor>
    <homepage href=""/>
    <description>some_description</description>
    <offline-allowed/>
    <shortcut>
        <desktop/>
    </shortcut>
  </information>
  <resources>
    <j2se version="1.6+"/>
      <extension name="JavaFX Runtime" href="http://dl.javafx.com/1.3/javafx-rt.jnlp"/>
    <jar href="MatchTestCaseGenerator-2.0-jar-with-dependencies.jar" main="true"/>
  </resources>
  <application-desc main-class="com.sun.javafx.runtime.main.Main" progress-class="com.javafx.progressbar.ProgressManager">
     <argument>MainJavaFXScript=com.knowledgevalues.mtcg.javafx.MainFx</argument>
  </application-desc>
</jnlp> 
```

我错过了什么吗？我应该在 jar 中引入一个策略文件吗？我完全迷路了

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T14:38:33.513

尝试将下一部分添加到您的 jnlp 文件中：

```
<security>
  <all-permissions/>
</security> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T08:36:50.953

最终的解决方案是删除所有包含 javafx 类的文件夹，但 Main 类除外。

有了它，它没有问题！

# java - 进度条不随线程更新

> ID：10599802
> 
> 赞同：2
> 
> 时间：2012-05-15T11:31:43.600
> 
> 标签：java, multithreading, swing, jprogressbar

好的，我又来这里问一个愚蠢的问题。我有一个自定义对话框框架，上面有进度条。所以我也有一个遗传算法（它的工作时间相当长）。

据我了解所有情况，我需要为算法、进度条执行单独的线程，并将主线程留给对话框（让他有机会响应用户操作）。所以我尝试实现这一点，并得到以下结果：

```
public class ScheduleDialog extends JDialog {

    private final JPanel contentPanel = new JPanel();

    private static Data data;
    private static GeneticEngine geneticEngine;
    private static Schedule schedule;

    private static JProgressBar progressBar;
    private static JLabel statusLabel;

    public static void showProgress() {
        try {
            ScheduleDialog dialog = new ScheduleDialog();
            dialog.setDefaultCloseOperation(JDialog.DISPOSE_ON_CLOSE);
            dialog.setVisible(true);
            startScheduleComposing();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private static void startScheduleComposing() {
        BackGroundWorker backGroundWorker = new BackGroundWorker();
        GeneticEngineWorker geneticEngineWorker = new GeneticEngineWorker();
        new Thread(geneticEngineWorker).start();
        new Thread(backGroundWorker).start();
    }

    private ScheduleDialog() {

        this.data = Data.getInstance();

        setTitle("");
        setModal(true);
        setBounds(100, 100, 405, 150);
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
        Dimension dialogSize = getSize();
        setLocation((screenSize.width - dialogSize.width) / 2, (screenSize.height - dialogSize.height) / 2);
        getContentPane().setLayout(new BorderLayout());
        contentPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
        getContentPane().add(contentPanel, BorderLayout.CENTER);
        contentPanel.setLayout(new GridLayout(0, 1, 0, 0));
        {
            progressBar = new JProgressBar();
            progressBar.setBackground(Color.RED);
            contentPanel.add(progressBar);
        }
        {
            statusLabel = new JLabel("");
            contentPanel.add(statusLabel);
        }
        {
            JPanel buttonPane = new JPanel();
            buttonPane.setLayout(new FlowLayout(FlowLayout.RIGHT));
            getContentPane().add(buttonPane, BorderLayout.SOUTH);
            {
                JButton okButton = new JButton("Прервать");
                okButton.setActionCommand("OK");
                buttonPane.add(okButton);
                getRootPane().setDefaultButton(okButton);
            }
        }

    }

    protected static class BackGroundWorker implements Runnable {
        @Override
        public void run() {
          while(true){
            int barValue = 100 - (geneticEngine.getCurrentBestFitness() / geneticEngine.getInitialFitness());
            progressBar.setValue(barValue);
            progressBar.repaint();
            statusLabel.setText(String.valueOf(geneticEngine.getCurrentBestFitness()));
            statusLabel.repaint();
            try{
                Thread.sleep(10000);
            } catch (InterruptedException e) {
                e.printStackTrace();  
            }
          }
        }
    }

    protected static class GeneticEngineWorker implements Runnable{

        @Override
        public void run() {
            geneticEngine = new GeneticEngine(data);
            schedule = geneticEngine.GeneticAlgorithm();
        }
    }
} 
```

看来，这`new Thread(geneticEngineWorker).start();`是有效的，但进度条没有任何反应。我认为这部分代码：

```
private static void startScheduleComposing() {
            BackGroundWorker backGroundWorker = new BackGroundWorker();
            GeneticEngineWorker geneticEngineWorker = new GeneticEngineWorker();
            new Thread(geneticEngineWorker).start();
            new Thread(backGroundWorker).start();
        } 
```

我们`new Thread(backGroundWorker).start();`只有在停止之后`new Thread(geneticEngineWorker).start();`才会被执行。
所以，如果我是对的，你能告诉我如何重组代码来完成这项工作，如果我错了，你能指出我的错误吗？

提前谢谢大家！

* * *

添加

我对其进行了调试，正如我所想的那样，backGroundWorker 仅在genericEngineWorker 结束或用户关闭对话框后才开始工作（在这种情况下例外）；

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:06:46.327

是的，有两种基本的使用方法

[SwingWorker](https://stackoverflow.com/questions/8169964/is-mvc-in-swing-thread-safe)，需要对公司最深入的了解`Java Essential Classes`。`Generics`也

和

`Runnable#Thread`只需要将 GUI 的输出包装到`invokeLater()`

关于想法不需要特别努力的简单示例`Runnable#Thread`，`JProgressBar`全部输入`JTable`，这意味着代码行`model.setValueAt(value, row, column);`应该被包装到`invokeLater`，但在另一方面`setText()`被声明为线程安全，我建议`invokeLater`在所有情况下都将其包装到

![在此处输入图像描述](../Images/f7100aeca28f8da612bdce8df6d630af.png) ![在此处输入图像描述](../Images/28879b98631d4af14cb3692b8de0df5b.png)

```
import java.awt.Component;
import java.util.Random;
import javax.swing.JFrame;
import javax.swing.JProgressBar;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.SwingUtilities;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableCellRenderer;

public class TableWithProgressBars {

    private static final int maximum = 100;

    public void createGUI() {
        final JFrame frame = new JFrame("Progressing");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Integer[] oneRow = {0, 0, 0, 0};
        String[] headers = {"One", "Two", "Three", "Four"};
        Integer[][] data = {oneRow, oneRow, oneRow, oneRow, oneRow,};
        final DefaultTableModel model = new DefaultTableModel(data, headers);
        final JTable table = new JTable(model);
        table.setDefaultRenderer(Object.class, new ProgressRenderer(0, maximum));
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        frame.add(new JScrollPane(table));
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
        new Thread(new Runnable() {

            @Override
            public void run() {
                Object waiter = new Object();
                synchronized (waiter) {
                    int rows = model.getRowCount();
                    int columns = model.getColumnCount();
                    Random random = new Random(System.currentTimeMillis());
                    boolean done = false;
                    while (!done) {
                        int row = random.nextInt(rows);
                        int column = random.nextInt(columns);
                        Integer value = (Integer) model.getValueAt(row, column);
                        value++;
                        if (value <= maximum) {
                            model.setValueAt(value, row, column);
                            try {
                                waiter.wait(15);
                            } catch (InterruptedException e) {
                                e.printStackTrace();
                            }
                        }
                        done = true;
                        for (row = 0; row < rows; row++) {
                            for (column = 0; column < columns; column++) {
                                if (!model.getValueAt(row, column).equals(maximum)) {
                                    done = false;
                                    break;
                                }
                            }
                            if (!done) {
                                break;
                            }
                        }
                    }
                    frame.setTitle("All work done");
                }
            }
        }).start();
    }

    public static class ProgressRenderer extends JProgressBar implements TableCellRenderer {

        private static final long serialVersionUID = 1L;

        public ProgressRenderer(int min, int max) {
            super(min, max);
            this.setStringPainted(true);
        }

        @Override
        public Component getTableCellRendererComponent(JTable table, Object value,
                boolean isSelected, boolean hasFocus, int row, int column) {
            this.setValue((Integer) value);
            return this;
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TableWithProgressBars().createGUI();
            }
        });

    }
} 
```

# android - 去掉6位后的经纬度小数部分

> ID：10599808
> 
> 赞同：3
> 
> 时间：2012-05-15T11:31:58.120
> 
> 标签：android, latitude-longitude

我以这种格式获得经纬度

纬度23.132679999999997，经度72.20081833333333

但我想以这种格式

纬度 = 23.132680 和经度 72.200818

我怎样才能转换

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T11:41:06.280

```
double Latitude = 23.132679999999997;
int precision =  Math.pow(10, 6);
double new_Latitude = double((int)(precision * Latitude))/precision; 
```

这将只给您小数点后的 6 位数字。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-15T11:37:53.750

```
double d=23.132679999999997;
DecimalFormat dFormat = new DecimalFormat("#.######"); 

d= Double.valueOf(dFormat .format(d)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T12:04:30.590

一旦我像这样解决了我的问题-

```
String.format("%.6f", latitude); 
```

返回值为字符串。因此，如果您需要字符串结果，您可以使用它。

如果您需要双精度，您可以使用`Double.parseDouble()`方法进行转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T11:38:00.973

因此，您希望[将 double 舍入为任意位数](https://stackoverflow.com/a/1581007/914874)，不是吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T11:37:58.700

可以使用

```
DecimalFormat df = new DecimalFormat("#,###,##0.00");
System.out.println(df.format(364565.14343)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-15T11:39:59.540

如果您将纬度和经度作为字符串，那么您可以这样做

```
latitude = latitude.substring(0,latitude.indexOf(".")+6); 
```

当然，您应该检查“。”之后是否至少有 6 个字符。通过检查字符串长度

# email - Drupal 不发送电子邮件

> ID：10599810
> 
> 赞同：0
> 
> 时间：2012-05-15T11:32:10.463
> 
> 标签：email, drupal-6

我在远程服务器上安装了 Drupal 站点。当用户注册时，Drupal 会尝试发送一封包含新密码的电子邮件，但它似乎无法发送任何电子邮件。

Drupal 或服务器上是否有任何配置设置来解决此问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:36:33.910

从drupal网站：

*   站点电子邮件地址（发送通知电子邮件时使用，大多数发送电子邮件的模块的默认值）可以通过站点配置>站点信息页面（管理员/设置/站点信息）进行设置。
*   许多发送电子邮件的模块都提供了用于发送电子邮件的地址的设置，以及可选的回复地址。检查电子邮件密集型模块的模块设置和文档。
*   您服务器的 PHP 配置文件 (php.ini) 定义了要使用的出站邮件服务器（如果有）。如果设置正确，那么您无需再做任何事情。如果您无法编辑 php.ini 文件或需要针对出站电子邮件使用不同的 SMTP 服务器，请查看[SMTP 身份验证支持模块](http://drupal.org/project/smtp)。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-05T11:42:13.940

检查您的电子邮件设置。

我遇到了同样的问题，Drupal 不发送任何电子邮件。一年前我更改了域，但我忘记更改默认电子邮件。我只是将新的默认电子邮件设置为`something@mynewsite.com`. 如果您从另一个门设置电子邮件，它也可能落入垃圾邮件。

# java - 托管多个基于 tomcat 的 Web 应用程序时的最佳实践是什么

> ID：10599814
> 
> 赞同：4
> 
> 时间：2012-05-15T11:32:21.913
> 
> 标签：java, tomcat, web-applications

我确实理解为多个 Web 应用程序使用相同的 tomcat 实例有一些风险（例如，如果一个 web 应用程序崩溃 tomcat，它也会终止其他 web 应用程序。）。好处当然是成本效益，因为一台服务器就足够了，并且将所有 Web 应用程序放在一个地方使得管理变得非常容易。

是否有关于在 tomcat 上具有多个 Web 应用程序的良好设置应该是什么样的行业指南？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:39:12.797

# 优点

*   一个要监控的 JVM
*   可以共享公共库（有时有风险）

# 缺点

*   所有应用程序都在使用的通用 HTTP 线程池（但是，您可以使用不同的线程池配置多个连接器）
*   一个故障应用程序可以关闭整个服务器
*   重新启动一个应用程序需要重新启动所有应用程序（如果不使用热部署）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:43:45.790

您是对的，在一个应用程序服务器/Web 容器（Tomcat 或其他）上托管多个我们的应用程序有好处。

当一个应用程序可能导致另一个应用程序失败时，您提到了健壮性问题。但是让我们简化一下：即使您只有一个应用程序，您仍然需要 24*7 的可用性。为了实现这一目标，人们通常会运行多个应用程序服务器实例，每个实例上都有相同的应用程序，并在站点入口处运行负载均衡器。这同样适用于几个 Web 应用程序。只需运行 N 个（最少 2 个）应用程序服务器，部署相同的 Web 应用程序集和负载均衡器。如果服务器失败或停止响应等，您可能需要一种重新启动服务器的看门狗。

在某些情况下，需要某种聚类。但这是另一个故事。

# c++ - 我如何理解这个 makefile 规则的本质？

> ID：10599820
> 
> 赞同：2
> 
> 时间：2012-05-15T11:32:36.730
> 
> 标签：c++, makefile

```
$(OBJDIR)/NetStats.o: ../../../source/network/NetStats.cpp $(GCH) | prebuild
    $(CXX) $(CXXFLAGS) -MF $(OBJDIR)/NetStats.d -MT "$@" -o "$@" -c "$<" 
```

`NetStats.o`依赖于`3`对象，但编译中只涉及第一个（`$<`），这是什么原理？

-MF -MT 是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:35:36.050

第一的，

```
 -MF $(OBJDIR)/NetStats.d 
```

生成依赖文件，如果头文件发生变化，则允许自动重建源文件。

因此，如果 NetStats.cpp 发生更改，它将在您使用依赖于 NetStats.o 的目标运行 make 后立即重建

其次，来自 GCC 文档：

```
 -MT target 
```

更改依赖生成发出的规则的目标。默认情况下，CPP 采用主输入文件的名称，包括任何路径，删除任何文件后缀，例如“.c”，并附加平台常用的对象后缀。结果就是目标。

-MT 选项会将目标设置为您指定的字符串。如果需要多个目标，可以将它们指定为 -MT 的单个参数，或使用多个 -MT 选项。

例如，-MT '$(objpfx)foo.o' 可能会给出 $(objpfx)foo.o: foo.c

* * *

.d 文件看起来就像 makefile 的一部分。这是我的一个项目的 Canvas.d 的摘录：

```
 Out/Mac/ppc64/Obj/Canvas.o: Src/Linderdaum/Renderer/Canvas.cpp \
     Src/Linderdaum/Renderer/Canvas.h Src/Linderdaum/Core/iObject.h \
    /usr/include/c++/4.0.0/deque /usr/include/c++/4.0.0/bits/functexcept.h \
    /usr/include/c++/4.0.0/exception_defines.h \
    ..... 
```

基本上，预处理器会搜索 .cpp 文件中的所有依赖项并生成一个附加目标来指定这些依赖项。

要查看真正的 .d 文件，可以尝试编写 test.c

```
 #include <stdio.h>
 #include <stdlib.h>
 int main() { return 0; } 
```

并运行 gcc -MD -c test.c 命令

对于我的 MingW 环境，它是

```
test.o: test.c \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/stdio.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/_mingw.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/_mingw_mac.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/vadefs.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/sdks/_mingw_directx.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/sdks/_mingw_ddk.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/_mingw_print_push.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/sec_api/stdio_s.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/_mingw_print_pop.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/stdlib.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/include-fixed/limits.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/include-fixed/syslimits.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/limits.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/sec_api/stdlib_s.h \
 c:\eqmingw\bin\../lib/gcc/x86_64-w64-mingw32/4.6.0/../../../../x86_64-w64-mingw32/include/malloc.h 
```

要从依赖项列表中排除系统包含文件，还可以使用 -MM 开关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:36:51.510

通常情况下，目标文件可能依赖于比您必须编译的更多的东西。经典例子：

```
myprog.o: myprog.c header1.h header2.h
    gcc -c -o myprog.o myprog.c 
```

在这种情况下，您不要将标头提供给编译行，它们是在处理源代码时由编译器本身购买的。

但是您*仍然*需要依赖项，因为如果包含的任何标头`myprog.c`发生更改，您需要重新编译。

# java - Listbox outofbound error

> ID：10599825
> 
> 赞同：0
> 
> 时间：2012-05-15T11:32:52.493
> 
> 标签：java, gwt, listbox, gwt2, uibinder

I have a trying to put value from arrayList to List box. but it gives me error out of bound exception.

`getListValue()` returns arrayList.

```
for(int i = 0;i<getListValue().size();i++){
                System.out.println("qsdq " +getListValue().toString()+" "+ getListValue().size());
                listBox.addItem(getListValue().get(i)); // ErrorPoint
            } 
```

**output** qsdq [xyz, abc] 2

Stacktrace

```
 at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.IndexOutOfBoundsException: null
    at com.google.gwt.user.client.ui.ListBox.checkIndex(ListBox.java:595)
    at com.google.gwt.user.client.ui.ListBox.setValue(ListBox.java:511)
    at com.client.GUI.MultivaluedPopup.getListBox(MultivaluedPopup.java:92) // error point 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:39:38.183

You should probably add the items first. The `setValues` only sets the value (as the name suggests) but no new item is added.

Use `listBox.Items.add` before setting the value, or add the new item with right value in the first place by add.

```
ArrayList list = getListValue();
listBoc.Items.clear();
for(int i = 0;i<list.size();i++){
                System.out.println("qsdq " +list.toString()+" "+ list.size());
                listBox.addItem(list.get(i));
            } 
```

# google-sheets - 如何根据电子表格中的背景颜色计算单元格值

> ID：10599828
> 
> 赞同：2
> 
> 时间：2012-05-15T11:33:30.437
> 
> 标签：google-sheets, google-apps-script

我正在尝试根据背景颜色计算单元格中的值。有人我在网上搜索时得到了一些帮助，我没有得到完整的解决方案。有没有人帮我解决这个问题。我有从在线搜索中获得的示例代码脚本。

此外，我在此处粘贴的脚本正在对值进行分组（例如，如果我在三个单元格中有一个值 A，它应该将值返回为 3，而不是返回 AAA。有人可以帮助我使用脚本来计算值并返回它基于背景颜色

提前致谢，

这是脚本：

```
function sumBackgroundColors(rangeString, color) {
var ss = SpreadsheetApp.getActiveSpreadsheet();
var s = ss.getActiveSheet();
var sumRange = s.getRange(rangeString);
var sum = 0;
var sumRangeBackground = sumRange.getBackgroundColors();
var sumRangeValues = sumRange.getValues();

for(var row = 0; row < sumRangeBackground.length; row++ ) {
for(var col = 0; col < sumRangeBackground[0].length; col++ ) {
if( sumRangeValues[row][col]=="LG M"&& sumRangeBackground[row][col] == color ) {
sum = sum + parseFloat(sumRangeValues[row][col]);

} 
}
}
return sum;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:41:07.393

我建议您不要使用自定义函数来执行此操作，因为它具有缓存功能（[在此处](https://stackoverflow.com/questions/9022984/google-apps-script-to-summarise-data-not-updating/9023954#9023954)进行说明）。

```
function countBackgroundColors() {
  var rangeString = "A1:A100";
  var color = "green";

  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var s = ss.getActiveSheet();
  var range = s.getRange(rangeString);
  var count = 0;
  var rangeColors = range.getBackgroundColors();

  for( var i in rangeColors )
    for( var j in rangeColors[i] )
      if( rangeColors[i][j] == color )
        ++count;
  return count;
} 
```

# php - 允许操作资源发挥作用

> ID：10599829
> 
> 赞同：0
> 
> 时间：2012-05-15T11:33:35.720
> 
> 标签：php, zend-framework, acl

我想允许资源在 Zend 框架中使用 ACL 来扮演角色

我有模块权限和帐户。

特权模块具有用户和特权控制器。每个控制器都有索引、查看和编辑操作。

如何将 action aresource 授予角色？我面临的问题是我可以授予对整个模块的访问权限，但我无法授予对控制器中特定操作的访问权限..

```
 $this->addRole(new Zend_Acl_Role('admin'));

    $this->add(new Zend_Acl_Resource('privileges'))
            ->add(new Zend_Acl_Resource('privileges-privilege'))
            ->add(new Zend_Acl_Resource('privileges-users'))
            ->add(new Zend_Acl_Resource('account'))
            ->add(new Zend_Acl_Resource('default'));

    $this->deny('admin'); //deny every thing
    $this->allow('admin', 'account');
    $this->allow('admin', 'privileges-privilege' , array('index','view','edit')); 
```

我也另辟蹊径

```
 $this->add(new Zend_Acl_Resource('privileges'))
      ->add(new Zend_Acl_Resource('privilege'), 'privileges')
       ->add(new Zend_Acl_Resource('Privilege'),array('index','view','edit'))
      ->add(new Zend_Acl_Resource('users', 'privileges'))
      ->add(new Zend_Acl_Resource('account'))
      ->add(new Zend_Acl_Resource('account:account'), 'account')
      ->add(new Zend_Acl_Resource('default'));

     $this->deny('admin'); //deny every thing
    $this->allow('admin', 'account');
      $this->allow('admin', 'Privilege', array('index','view','edit')); 
```

但它不起作用，两种方式都会导致同样的问题，即不授予对特权模块的任何访问权限！并且只允许帐户模块..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:31:10.207

我做到了，我在模块和控制器之间进行连接，我这样做

模块名称-控制器名称。

我将角色和连接的模块和控制器作为资源传递，操作是特权。

```
 if (!$this->_acl->isAllowed($role, $request->getModuleName() . '-' . $request->getControllerName(), $request->getActionName())) {
                $request->setModuleName('account')
                ->setControllerName('account')
                ->setActionName('error');
                 return false;
    } 
```

以及我如何添加资源

```
 $this->add(new Zend_Acl_Resource('privileges'))
            ->add(new Zend_Acl_Resource('privileges-privilege'))
            ->add(new Zend_Acl_Resource('privileges-users'))
            ->add(new Zend_Acl_Resource('privileges-index'))
            ->add(new Zend_Acl_Resource('account'))
              ->add(new Zend_Acl_Resource('account-account'))
            ->add(new Zend_Acl_Resource('default'))
            ->add(new Zend_Acl_Resource('error'))
            ->add(new Zend_Acl_Resource('default-index'));

    // $this->allow('admin'); //allow every thing
    $this->allow('admin', 'account-account');
    $this->allow('admin', 'default');
    $this->allow('admin', 'default-index');
    $this->allow('admin', 'privileges-users', array('index','add-User','get-Group-Users'));
    $this->allow('admin', 'privileges-index', 'index');
    $this->allow('admin', 'privileges-privilege', array('index', 'get-privileges', 'update-privileges','get-User-Privileges','get-Group-Privileges')); 
```

# mysql - 如何在 MySQL 中使用 case 语句

> ID：10599830
> 
> 赞同：0
> 
> 时间：2012-05-15T11:33:42.673
> 
> 标签：mysql

我在使用 where 条件的 mysql 语句中使用三个查询，例如，如何将其作为单个查询

```
SELECT COUNT(*) as A FROM tbl_user WHERE (b=1 AND c=0)  AND (d=1 AND e=1)
SELECT COUNT(*) as M FROM tbl_user WHERE (H=1 AND I=0)  AND (J=1 AND K=1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:37:43.537

```
SELECT 
sum(case when (b=1 AND c=0)  AND (d=1 AND e=1) then 1 else 0 end) as CountA,
sum(case when (H=1 AND I=0)  AND (J=1 AND K=1) then 1 else 0 end) as CountM
 FROM tbl_user 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:37:53.877

您不需要`CASE`声明来执行此操作（尽管它可能比使用`IF`if 条件包含`OR`s 更容易阅读），使用 s 可以更好地传达意图`IF`：

```
SELECT SUM(IF(b=1 AND c=0 AND d=1 AND e=1, 1, 0)) AS A,
       SUM(IF(H=1 AND I=0 AND J=1 AND K=1, 1, 0)) AS M
FROM tbl_user 
```

# c# - 通过比较返回 lambda 表达式的扩展方法

> ID：10599831
> 
> 赞同：9
> 
> 时间：2012-05-15T11:33:43.127
> 
> 标签：c#, .net, linq, lambda, expression

我正在为我们这个庞大的项目创建一个更精细的过滤系统。主要谓词之一是能够通过字符串参数传递比较。这以以下形式表示：“>50”或“5-10”或“<123.2”

我有什么（作为一个例子来说明）

视图模型：

```
TotalCost (string) (value: "<50")
Required (string) (value: "5-10") 
```

英孚型号：

```
TotalCost (double)
Required(double) 
```

我想使用的表达式：

```
model => model.Where(field => field.TotalCost.Compare(viewModel.TotalCost) && field.Required.Compare(viewModel.Required)); 
```

我想收到的表达：

```
model => model.Where(field => field.TotalCost < 50 && field.Required > 5 && field.Required < 10); 
```

或类似的东西

但是......我不知道从哪里开始。我已经缩小到

```
public static Expression Compare<T>(this Expression<Func<T, bool>> value, string compare) 
```

它甚至可能不正确，但这就是我所拥有的一切。比较构建器不是问题，这很容易。困难的部分实际上是返回表达式。我从未尝试过将表达式作为函数值返回。所以基本上我需要保留的是字段并返回一个比较表达式，差不多。

有什么帮助吗？：X

**更新：**

唉，这并不能解决我的问题。可能是因为我过去 23 小时一直在工作，但我对如何将其变成扩展方法一无所知。正如我所说，我想要的......基本上是一种写​​作方式：

```
var ex = new ExTest();
var items = ex.Repo.Items.Where(x => x.Cost.Compare("<50")); 
```

我塑造该功能的方式（可能完全错误）是

```
public static Expression<Func<decimal, bool>> Compare(string arg)
{
    if (arg.Contains("<"))
        return d => d < int.Parse(arg);

    return d => d > int.Parse(arg);
} 
```

它缺少首先要比较的“this -something- value”，而且我还没有弄清楚如何让它能够获得表达式输入......至于 ReSharper，它建议我转换它改为布尔值......

此刻我的脑袋里满是绒毛……

**更新 2：**

我设法找到一种方法，让一段代码在控制台应用程序的内存存储库中工作。不过，我还没有尝试使用实体框架。

```
public static bool Compare(this double val, string arg)
    {
        var arg2 = arg.Replace("<", "").Replace(">", "");
        if (arg.Contains("<"))
            return val < double.Parse(arg2);

        return val > double.Parse(arg2);
    } 
```

但是，我非常怀疑这就是我所追求的

**更新 3：**

对，在坐下来再次查看 lambda 表达式之后，在最后一个答案之前，我想出了类似于以下内容的东西，它不符合“Compare()”的确切要求，但它是一个“重载”哪里方法：

```
public static IQueryable<T> WhereExpression<T>(this IQueryable<T> queryable, Expression<Func<T, double>> predicate, string arg)
    {
        var lambda =
            Expression.Lambda<Func<T, bool>>(Expression.LessThan(predicate.Body, Expression.Constant(double.Parse(50.ToString()))));

        return queryable.Where(lambda);
    } 
```

然而，尽管在我看来，一切似乎都是合乎逻辑的，但我得到了运行时异常：

```
System.ArgumentException was unhandled
  Message=Incorrect number of parameters supplied for lambda declaration
  Source=System.Core
  StackTrace:
       at System.Linq.Expressions.Expression.ValidateLambdaArgs(Type delegateType, Expression& body, ReadOnlyCollection`1 parameters)
       at System.Linq.Expressions.Expression.Lambda[TDelegate](Expression body, String name, Boolean tailCall, IEnumerable`1 parameters)
       at System.Linq.Expressions.Expression.Lambda[TDelegate](Expression body, Boolean tailCall, IEnumerable`1 parameters)
       at System.Linq.Expressions.Expression.Lambda[TDelegate](Expression body, ParameterExpression[] parameters) 
```

这显然是罪魁祸首：

```
var lambda =
                Expression.Lambda<Func<T, bool>>(Expression.LessThan(predicate.Body, Expression.Constant(double.Parse(50.ToString())))); 
```

我非常接近解决方案。如果我能摆脱这个错误，我相信 EF 应该能够将它翻译成 SQL。否则......好吧，最后的回应可能会消失。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-15T18:05:36.400

要生成表达式，您应该手动生成将其转换为 SQL (eSQL) `Expression`。这是*GreaterThan*过滤器创建的示例，其他过滤器可以使用类似的技术制作。

```
static Expression<Func<T, bool>> CreateGreaterThanExpression<T>(Expression<Func<T, decimal>> fieldExtractor, decimal value)
{
    var xPar = Expression.Parameter(typeof(T), "x");
    var x = new ParameterRebinder(xPar);
    var getter = (MemberExpression)x.Visit(fieldExtractor.Body);
    var resultBody = Expression.GreaterThan(getter, Expression.Constant(value, typeof(decimal)));
    return Expression.Lambda<Func<T, bool>>(resultBody, xPar);
}

private sealed class ParameterRebinder : ExpressionVisitor
{
    private readonly ParameterExpression _parameter;

    public ParameterRebinder(ParameterExpression parameter)
    { this._parameter = parameter; }

    protected override Expression VisitParameter(ParameterExpression p)
    { return base.VisitParameter(this._parameter); }
} 
```

这是使用示例。（假设我们有`StackEntites`实体集 TestEnitities 的 EF 上下文`TestEntity`）

```
static void Main(string[] args)
{
    using (var ents = new StackEntities())
    {
        var filter = CreateGreaterThanExpression<TestEnitity>(x => x.SortProperty, 3);
        var items = ents.TestEnitities.Where(filter).ToArray();
    }
} 
```

更新：为了您创建复杂的表达式，您可以使用如下代码：（假设已经制作`CreateLessThanExpression`和`CreateBetweenExpression`功能）

```
static Expression<Func<T, bool>> CreateFilterFromString<T>(Expression<Func<T, decimal>> fieldExtractor, string text)
{
    var greaterOrLessRegex = new Regex(@"^\s*(?<sign>\>|\<)\s*(?<number>\d+(\.\d+){0,1})\s*$");
    var match = greaterOrLessRegex.Match(text);
    if (match.Success)
    {
        var number = decimal.Parse(match.Result("${number}"));
        var sign = match.Result("${sign}");
        switch (sign)
        {
            case ">":
                return CreateGreaterThanExpression(fieldExtractor, number);
            case "<":
                return CreateLessThanExpression(fieldExtractor, number);
            default:
                throw new Exception("Bad Sign!");
        }
    }

    var betweenRegex = new Regex(@"^\s*(?<number1>\d+(\.\d+){0,1})\s*-\s*(?<number2>\d+(\.\d+){0,1})\s*$");
    match = betweenRegex.Match(text);
    if (match.Success)
    {
        var number1 = decimal.Parse(match.Result("${number1}"));
        var number2 = decimal.Parse(match.Result("${number2}"));
        return CreateBetweenExpression(fieldExtractor, number1, number2);
    }
    throw new Exception("Bad filter Format!");
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-15T12:06:52.130

C# 编译器的一个乍看之下神奇的功能可以为您完成繁重的工作。你可能知道你可以这样做：

```
Func<decimal, bool> totalCostIsUnder50 = d => d < 50m; 
```

也就是说，使用 lambda 表达式来分配`Func`. 但是你知道你也*可以*这样做：

```
Expression<Func<decimal, bool>> totalCostIsUnder50Expression = d => d < 50m; 
```

也就是说，**使用 lambda 表达式来分配`Expression`表示 a 的 a`Func`**？这很整洁。

鉴于你说

> 比较构建器不是问题，这很容易。困难的部分实际上是返回表达式

我假设您可以在这里填写空白；假设我们将 `"<50" 传递给：

```
Expression<Func<decimal, bool>> TotalCostCheckerBuilder(string criterion)
{
    // Split criterion into operator and value

    // when operator is < do this:
    return d => d < value;

    // when operator is > do this:
    return d => d > value;

    // and so on
} 
```

最后，要将您`Expression`的 s 与`&&`（并且仍然有一个`Expression`）组合在一起，请执行以下操作：

```
var andExpression = Expression.And(firstExpression, secondExpression); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T21:54:47.093

> 困难的部分实际上是返回表达式。

将字符串转换为更结构化的结构，如枚举和类，以定义属性、运算符和过滤器：

```
Enum Parameter
    TotalCost
    Required
End Enum

Enum Comparator
    Less
    More
    Equals
End Enum

Class Criterion
    Public ReadOnly Parameter As Parameter
    Public ReadOnly Comparator As Comparator
    Public ReadOnly Value As Double

    Public Sub New(Parameter As Parameter, Comparator As Comparator, Value As Double)
        Me.Parameter = Parameter
        Me.Comparator = Comparator
        Me.Value = Value
    End Sub
End Class 
```

然后定义了一个创建表达式的函数：

```
Function CreateExpression(Criteria As IEnumerable(Of Criterion)) As Expression(Of Func(Of Field, Boolean))
    Dim FullExpression = PredicateBuilder.True(Of Field)()

    For Each Criterion In Criteria
        Dim Value = Criterion.Value

        Dim TotalCostExpressions As New Dictionary(Of Comparator, Expression(Of Func(Of Field, Boolean))) From {
            {Comparator.Less, Function(Field) Field.TotalCost < Value},
            {Comparator.More, Function(Field) Field.TotalCost > Value},
            {Comparator.Equals, Function(Field) Field.TotalCost = Value}
        }

        Dim RequiredExpressions As New Dictionary(Of Comparator, Expression(Of Func(Of Field, Boolean))) From {
            {Comparator.Less, Function(Field) Field.Required < Value},
            {Comparator.More, Function(Field) Field.Required > Value},
            {Comparator.Equals, Function(Field) Field.Required = Value}
        }

        Dim Expressions As New Dictionary(Of Parameter, IDictionary(Of Comparator, Expression(Of Func(Of Field, Boolean)))) From {
            {Parameter.TotalCost, TotalCostExpressions},
            {Parameter.Required, RequiredExpressions}}

        Dim Expression = Expressions(Criterion.Parameter)(Criterion.Comparator)

        FullExpression = Expression.And(Expression)
    Next

    Return FullExpression
End Function 
```

`PredicateBuilder`[此处](https://petemontgomery.wordpress.com/2011/02/10/a-universal-predicatebuilder/)需要将两个表达式与`AND`运算符结合起来。

用法：

```
Function Usage() As Integer

    Dim Criteria = {
        New Criterion(Parameter.TotalCost, Comparator.Less, 50),
        New Criterion(Parameter.Required, Comparator.More, 5),
        New Criterion(Parameter.Required, Comparator.Less, 10)}

    Dim Expression = CreateExpression(Criteria)
End Function 
```

它将创建与示例中提供的完全一样的表达式

```
field => field.TotalCost < 50 && field.Required > 5 && field.Required < 10 
```

# mysql - Mysql查询哪里的列是空格？

> ID：10599832
> 
> 赞同：2
> 
> 时间：2012-05-15T11:33:57.247
> 
> 标签：mysql, query-optimization, whitespace

这似乎是一个简单的问题。我想查询列为空、“”或空格的 MySQL 数据库。我现在的做法是这样的：

```
select * from table where column_1 is null or REPLACE(column_1," ","") = ""; 
```

有一个更好的方法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-15T11:39:51.597

[由于三值逻辑](http://en.wikipedia.org/wiki/Null_%28SQL%29)，您当前的方法不会显示 NULL

```
select * from table where column_1 IS NULL OR TRIM(column_1) = ''; 
```

或者

```
select * from table where COALESCE(TRIM(column_1), '') = ''; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:40:10.783

尝试这个：

```
select * from table where column_1 is null or column_1 = ''; 
```

# redirect - 重定向到结果页面的搜索表单

> ID：10599846
> 
> 赞同：0
> 
> 时间：2012-05-15T11:34:51.120
> 
> 标签：redirect, jsf-2, primefaces

你好我有以下问题。

我有一个搜索页面，我们称之为 search.xhtml，您可以搜索条形码。此值是唯一的，因此结果始终是数据库中的一个或零个对象

```
<p:panelGrid columns="1" style="margin:20px;">
  <h:form>
    <p:messages id="messages" globalOnly="true" showDetail="false" />
    <p:message for="barcode" />

    <p:inputText id="barcode" value="#{searchForm.barCode}"
                 required="true" requiredMessage="Value needed" />

    <p:commandButton value="search"
                     action="#{searchForm.searchBarcode}" id="search"/>

  </h:form>
</p:panelGrid> 
```

这是backingbean：

```
@ManagedBean
@ViewScoped
public class SearchForm extends BasePage {
  private Long barCode;

  @ManagedProperty("#{daoManager}")
  public DaoManager daoManager;

  public void setDaoManager(DaoManager daoManager) {
    this.daoManager = daoManager;
  }
  public Long getBarCode() {
    return barCode;
  }
  public void setBarCode(Long barCode) {
    this.barCode = barCode;
  }
  public String searchBarcode() {
    //request to dao to get the object
    DataList<Data> data = daoManager.findbybarcode(barCode);
    if (data.size() == 0) {
      this.addMessage(FacesMessage.SEVERITY_ERROR,
                      "Not Found: " + barCode);
      return null;
    } else {       
      getFacesContext().getExternalContext().
        getRequestMap().put("id", data.getId());
      return "details";
    }
  } 
```

因此，如果我转到我的详细信息页面，该页面需要参数 id，这不会发送到详细信息页面。

支持 bean 详细信息页面：

```
@ManagedBean
@ViewScoped
public class DetailBean extends BasePage implements Serializable {
  @PostConstruct
  public void init() {
    if (id != null) {
      //Go on with the stuff
    } else {
      addMessage(FacesMessage.SEVERITY_ERROR,"Object not found");
    }       
  }
} 
```

我究竟做错了什么？这是对 JSF 的错误使用吗？我知道我可以生成一个列表并单击结果，但这不是我想要的。我也可以从第一个 bean 中获取条形码并将其作为参数传递，但我希望详细信息页面只接受来自对象的 id。那我的想法错了吗？或者有没有办法得到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:13:01.213

如果我理解正确，您希望将条形码的 ID 传递到`details`页面，是的，这是可能的。

```
getFacesContext().getExternalContext().getRequestMap().put("id", data.getId()); 
```

以下行将 ID 参数放入客户端刚刚向您发送的请求中，但导航操作`details`将导致不同的请求。试试这个：

```
return "details?faces-redirect=true&id=" + data.getId(); 
```

这将返回一个 HTTP GET 导航操作，其中条形码的 ID 作为请求中的请求参数传递。

# c++ - 将 irr::c8 转换为 wchar_t*

> ID：10599847
> 
> 赞同：1
> 
> 时间：2012-05-15T11:34:52.133
> 
> 标签：c++, type-conversion, wchar-t, irrlicht

我正在制作一个 3D 环境，并且我想制作它，以便当您将十字准线通过对象时，会弹出一些带有其描述的文本。但是我遇到了这个非常烦人的字符串格式。

```
 info.setText(CollMan->getSceneNodeFromScreenCoordinatesBB(blah)->getName()); 
```

info 是文本对象，而 getSceneNodeblahblah->getName 是我想要的描述。

这不起作用，因为 setText 需要 wchar_t* 而 getName() 提供了 irr::c8。.c_str() 似乎没有任何帮助。

我怎样才能让这两个玩得很好？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:32:45.850

如果我正确阅读了文档，您应该能够通过首先将其转换为 irr::core::stringw 来做到这一点，如下所示：

```
info.setText( irr::core::stringw( CollMan->getSceneNodeFromScreenCoordinatesBB(blah)->getName() ).c_str() ); 
```

# iphone - 在不直接知道的情况下铸造一个班级？

> ID：10599849
> 
> 赞同：0
> 
> 时间：2012-05-15T11:35:00.567
> 
> 标签：iphone, objective-c, ios, ipad, class

有什么方法可以让我在不直接知道实际课程的情况下上课吗？

例如

```
if ([editedObject isKindOfClass:[object class]])
{
    object = editedObject;
} 
```

我有这段代码，我将一个对象传递给名为“对象”的方法。Let say`object`是一个`Person`类，但它也可以是一个`Animal`类。所以我不能这样做：

`object = (Person *)editedObject;`

因为我不确定它的那个类。那么我怎样才能在不直接知道的情况下投射课程呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T21:19:47.723

你试图做的事情没有意义。不同的对象指针类型纯粹是编译时的事情。从一个对象指针类型到另一个对象指针类型的转换纯粹是为了语法方便，并且在运行时不执行任何“操作”（它甚至不检查对象是否是您将其转换为的类型）。

因此，如果您在编译时“不知道”类型，那么通过强制转换就无法利用语法便利。因此，“铸造”完全没有意义。

# ajax - 在Struts1.3.8中使用JSP显示处理或等待页面，何时发出AJAX请求？

> ID：10599850
> 
> 赞同：0
> 
> 时间：2012-05-15T11:35:06.597
> 
> 标签：ajax, jsp, struts, pleasewait

在我的应用程序中有一个下拉框，第二个下拉框的值取决于第一个。我使用 AJAX 和 Struts1.3.8 开发它。
当第二个下拉框项被选中时，会显示选择选项的选中项的一些信息。这里处理请求需要很多时间。但是最终用户认为它不起作用。所以为了避免我想显示显示
“正在处理请求..请稍候....”的临时页面
，如何使用 AJAX 和 Struts1.3.8 实现它。
在 struts2 中它是预定义的，使用停止和等待我们可以实现它..
但是在 Struts1.3.8 中怎么办？
任何想法和回应都非常值得赞赏。

在此先感谢，
拉克斯曼杂烩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:28:54.513

在你的 ajax 代码中..使用这个

```
document.getElementById(disid).innerHTML= "Processing request.. Please wait...."; 
```

以相同的方式保持其余的 ajax 代码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T10:07:25.453

这对您的要求很有用。试试吧

```
<script type="text/javascript">
        function callLoadingDiv(){
            $("#spinner").fadeIn("fast");
        }
</script>
<style type="text/css">
#spinner {
    position: fixed;left: 0px;top: 0px;width: 100%;height: 100%;z-index: 9999;background: url(images/loading.jpg) 50% 50% no-repeat #ede9df;
}
</style> 
```

# java - Memcached 不同类型的缓存

> ID：10599852
> 
> 赞同：1
> 
> 时间：2012-05-15T11:35:29.337
> 
> 标签：java, database, caching, memcached

谁能用简单的英语解释一下 memcached 中的 singleCache、multiCache、assignCache 有什么区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:03:40.290

在 memcached 中没有区别。memcached 中的所有数据都存储为对 key -> value。

术语 singleCache、multiCache、assignCache 来自[Simple Spring Memcached](http://code.google.com/p/simple-spring-memcached/)项目，意思是：

*   assignCache：用于独立于截获的方法的参数在同一缓存键下/从同一缓存键下存储/获取单个值
*   singleCache：用于在/从连接命名空间创建的单个缓存键下存储/获取单个值，并截获使用 ParameterValueKeyProvider 注释的方法的[参数](https://simple-spring-memcached.googlecode.com/svn/docs/2.0.0/apidocs/com/google/code/ssm/api/ParameterValueKeyProvider.html)
*   multiCache：用于存储/获取许多值，这些值位于通过连接命名空间创建的许多缓存键下/来自许多缓存键，并截获了用 ParameterValueKeyProvider 注释的方法的参数[，](https://simple-spring-memcached.googlecode.com/svn/docs/2.0.0/apidocs/com/google/code/ssm/api/ParameterValueKeyProvider.html)其中一个带注释的参数是集合，方法的结果也是一个集合。

# javascript - 从我的应用程序打开/关闭或取消授权用户，并从应用程序列出用户的操作

> ID：10599854
> 
> 赞同：1
> 
> 时间：2012-05-15T11:35:31.930
> 
> 标签：javascript, facebook

我通过 javascript 向 Facebook 提交了一个带有开放图形新闻阅读类型的应用程序。用户要求授权我的应用程序的流程做得很好，并显示按钮帮助用户可以公开文章，然后他们可以根据需要删除。

今天我收到了 Facebook 的请求，需要更改我的应用程序：

> 要求（https://developers.facebook.com/docs/opengraph/actions/builtin/#read）。请确保您的用户可以 (1) 在文章出现的每个页面上全局打开/关闭共享。(2) 在文章出现的每个页面上删除他们在您的应用中共享的文章。(3) 仅当您确定有人有兴趣阅读文章时才生成阅读操作 - 仅在 10 秒后发布。

第三个请求很简单，只需在用户阅读文章后使用超时显示按钮提交即可。

几秒钟太难了，因为我不知道如何填写用户使用我的应用程序执行的传递操作的数组列表，包括操作 ID 和他们发布的文章的标题，我可以使用它们为每个人创建“删除链接”，如果用户想要。

第一个请求我确实搜索了 javascript 的方法来取消用户对应用程序的授权（而不是撤销权限），因此我可以要求用户在需要时重新授权。

请帮忙。

除了我在公会页面中看到非常好的 2 示例

```
https://developers.facebook.com/attachment/OG_App_PublishToggle.png
https://developers.facebook.com/attachment/OG_App_DeleteActivity.png 
```

但是他们没有给出使用它的实时站点的链接。或者可能是类似于“推荐框”的 Facebook 标记之一，但是我们如何/在哪里可以获得它？

请为脚本或示例提供建议，因为 Facebook 剂量将有助于充分的问候

**更新 1**我找到了重新授权所有应用程序或撤销一项权限的方法。这里的功能：

```
var permsNeededPub = "publish_stream";
///notice that if permission is "publish_actions" revoke function not work
function xlfb_revokePerm() {
        FB.api("/me/permissions", "delete",{permission:permsNeededPub}, function(response){
            console.log(response);      
            if(response){
                console.log(' Remove success '+permsNeededPub);
            }
        });

}

function xlfb_removeApp() {
    FB.api("/me/permissions", "delete", function(response){
        console.log("User removed the app from acount: "+response);                                  
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:02:47.310

> 几秒钟太难了，因为我不知道如何填写用户使用我的应用程序执行的传递操作的数组列表，包括操作 ID 和他们发布的文章的标题，我可以使用它们为每个人创建“删除链接”，如果用户想要。

每当用户在您的站点上执行 OG 操作时 - 保存您从 API 调用返回的 action_instance_id 以及您可能需要到数据库的任何额外数据。

> 第一个请求我确实搜索了 javascript 的方法来取消用户对应用程序的授权（而不是撤销权限），因此我可以要求用户在需要时重新授权。

为什么要取消对应用的授权？

这里所需要做的就是为所有共享活动设置一个全局开/关开关——因此，如果用户将其设置为*off*，那么只要他将此设置设置为 off ，您就不会为他发布任何*操作*。

# php - PHP如何使用从右边开始的php分割带有2个分隔符的字符串

> ID：10599859
> 
> 赞同：-1
> 
> 时间：2012-05-15T11:35:53.970
> 
> 标签：php, string, substring, delimiter

我需要分隔一个字符串（它是 html），我需要提取一个子字符串，但我只有一个函数来分隔左侧：

```
function ddd($str, $sLeft, $sRight)
{
$pleft = strpos($str, $sLeft, 0);
$pright = strpos($str, $sRight, $pleft + strlen($sLeft));
return (substr($str, $pleft + strlen($sLeft), ($pright - ($pleft + strlen($sLeft)))));
} 
```

但我需要从右边开始（$sRight）并在 $sLeft 结束。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:31:49.277

如果我理解正确，您需要在左侧和右侧搜索字符串。如果是这种情况，您可以使用此[功能](http://www.php.net/manual/en/function.strrpos.php#92158)：

**PHP**

```
<?php

// Function from php.net, see the link above.
// Starts searching the value from the right side
// of the string, returning the pos
function backwardStrpos($haystack, $needle, $offset = 0){
    $length = strlen($haystack);
    $offset = ($offset > 0)?($length - $offset):abs($offset);
    $pos = strpos(strrev($haystack), strrev($needle), $offset);
    return ($pos === false) ? (false) : ($length - $pos - strlen($needle));
}

$string = 'My string is this, and it is a good dialog';
echo backwardStrpos($string, "i"); // outputs 37
echo strpos($string, "i", 0);      // outputs 6

?> 
```

**输出的图解版本：**

![在此处输入图像描述](../Images/2f0a490df45eb6d6ffe52ba7063809c8.png)

* * *

# 已编辑

您刚刚发表了与您正在尝试做的事情相关的评论。

**为此，您可以使用[PHP strip_tags](http://php.net/manual/en/function.strip-tags.php)：**

```
<?php

$str = '<div><span class="some style bla bla assd dfsdf">ImportantText</span>';

echo strip_tags($str); //outputs: ImportantText

?> 
```

* * *

# 已编辑

要在 HTML 标记之间提取文本：

```
<?php

function getTextBetweenTags($string, $tagname) {
    $pattern = "/<$tagname ?.*>(.*)<\/$tagname>/";
    preg_match($pattern, $string, $matches);
    return $matches[1];
}

$str = '<div><span class="some style bla bla assd dfsdf">ImportantText</span>';
$txt = getTextBetweenTags($str, "span");
echo $txt; // outputs: ImportantText

?> 
```

这来自一个同胞的stackoverflow！[关联](https://stackoverflow.com/q/828870/352449)

# mvvm - 是否有可能在 Knockout 中有一个带有参数的计算 observable

> ID：10599860
> 
> 赞同：3
> 
> 时间：2012-05-15T11:36:03.227
> 
> 标签：mvvm, knockout.js

> **可能重复：**
> [knockoutjs：我们可以创建一个带参数的dependentObservable 函数吗？](https://stackoverflow.com/questions/6706281/knockoutjs-can-we-create-a-dependentobservable-function-with-a-parameter)

在我的视图模型中，我有一个函数可以根据项目的类型返回项目的总和：

```
var ViewModel = function(data) {
    var self = this;

    this.Results = ko.observableArray(data);

    this.totalPerType = function(type) {
        var total = 0;
        for (var index in self.Results()) {
            if (self.Results()[index].Type == type)
                total += self.Results()[index].Quantity;
        }

        return total;
    };
}; 
```

当用户编辑其中一项时，总数不会自动更新，因为它不是计算出的 observable。是否可以将函数*totalPerType*更改为计算的 observable，而不必将类型参数放入视图模型（将其保留为参数）？

我创建了一个小提琴，以便更容易尝试一些事情：http: [//jsfiddle.net/7PK9r/](http://jsfiddle.net/7PK9r/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T12:42:46.140

我认为这回答了你的问题：

[knockoutjs：我们可以创建一个带参数的dependentObservable 函数吗？](https://stackoverflow.com/questions/6706281/knockoutjs-can-we-create-a-dependentobservable-function-with-a-parameter)

（注意：`dependentObservable`是在knockout.js v2.0 之前调用的计算的可观察对象）

# data-binding - Grails - 控制器中的日期绑定

> ID：10599862
> 
> 赞同：3
> 
> 时间：2012-05-15T11:36:08.150
> 
> 标签：data-binding, grails

我正在尝试在我的控制器中绑定日期参数。我在某处读到，如果我有格式的日期就足够了 `yyyy-MM-dd HH:mm:ss.S`。但这不起作用。我读到的另一个选项是在我要解析的属性中添加`_day`、`_month`、`_year`等后缀，但这种方法也不起作用。

所以它基本上是一对多的关系，当多方是日期时（一个动作有一个 `VisitList<Visit>`，访问有日期）。

```
// domain classes
class Action {
   List<Visit> visitList
   static hasMany = [visitList: Visit]
}

class Visit {
   Action action 
   static belongsTo = [action: Action]

   Date date
   String description
} 
```

我将所有参数解析为动作实例，如下所示：

```
// in controller
def save(){
   Action actionInstance = new Action()
   action.properties = params
   action.save()
} 
```

日期是从视图发送的，格式如下：

```
visitList[0].date=2012-05-15 00:00:00.0000 
```

但日期仍然为空。该访问还具有描述属性，并且效果很好。该属性的参数是：

```
visitList[0].description=description 
```

感谢您的任何建议或意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T01:23:58.267

您是否尝试先保存访问然后保存操作？如果这不起作用，您可能必须将日期从字符串转换为 Date，Date.parse() 方法在 grails 2.0 中已被弃用，试试这个：

```
Date date = new SimpleDateFormat("yyyy-MM-dd hh:mm:ss").parse(dateString)
def action = new Action()
def visit = new Visit(date: date, description: description?:"", action: action)
visit.save()
action.visitList.add(visit)
action.save() 
```

-HTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:46:21.373

没有看到更多的代码很难说。您可能想尝试一个[Command Object](http://grails.org/doc/latest/guide/single.html#commandObjects)。你的输入来自哪里？一个看法？如果是这样，通常使用和标签来控制输入。如果您不使用这些，您可能必须使用[DateFormat](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/DateFormat.html) {提示，使用`parse()`方法} 手动解析日期。

# php - 表现不佳

> ID：10599863
> 
> 赞同：3
> 
> 时间：2012-05-15T11:36:17.857
> 
> 标签：php, symfony, apache2, benchmarking, apachebench

我正在为我的硕士论文做性能测试，但 Symfony2 简单应用程序的性能很差。这是一个简单的应用程序，一个查询和一些数学运算。

命令的测试结果：

> ab -c10 -t60 [http://sf2.cities.localhost/app.php](http://sf2.cities.localhost/app.php)

```
Server Software:        Apache/2.2.20
Server Hostname:        sf2.cities.localhost
Server Port:            80

Document Path:          /app.php
Document Length:        2035 bytes

Concurrency Level:      10
Time taken for tests:   60.162 seconds
Complete requests:      217
Failed requests:        68
   (Connect: 0, Receive: 0, Length: 68, Exceptions: 0)
Write errors:           0
Non-2xx responses:      68
Total transferred:      393876 bytes
HTML transferred:       321102 bytes
Requests per second:    3.61 [#/sec] (mean)
Time per request:       2772.458 [ms] (mean)
Time per request:       277.246 [ms] (mean, across all concurrent requests)
Transfer rate:          6.39 [Kbytes/sec] received

Connection Times (ms)
              min  mean[+/-sd] median   max
Connect:        0    0   2.1      0      11
Processing:   230 2641 2493.1   1778   17146
Waiting:      230 2641 2493.1   1778   17146
Total:        230 2642 2492.9   1778   17146 
```

在测试之前，我启动了两个命令：

> php 应用程序/控制台 --env=prod 缓存：清除 php 应用程序/控制台 --env=prod 缓存：预热

Symfony 检查页面告诉我，我只是没有 intl 扩展名，所以 apc 可能没问题。

我的 PHP 版本是：

> 带有 Suhosin 补丁的 PHP 5.3.6-13ubuntu3.6

有人可以给我建议我还应该在我的环境中检查什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:07:29.443

它可以是任意数量的事情，包括您的计算机无法处理负载。不过，我可以给你一些指示。

您收到一些错误返回`Failed requests: 68`。查看 apache 日志文件，它们可能表明存在问题。如果您在其中找不到任何内容，请确保启用了日志记录并且您的配置文件设置了正确的日志级别。您的`VirtualHost`定义应包含类似

```
 LogLevel debug
 CustomLog /var/log/apache2/access-localhost.log vhost_combined
 ErrorLog /var/log/apache2/error-localhost.log 
```

仅用于`LogLevel debug`调试。您需要将其设置为`warn`或`error`用于生产。

在 php.ini 和您的脚本中启用错误日志记录，并检查您的 php 错误日志是否有任何问题。

确保您的 apache2.conf 配置正确，尤其是 mpm 模块。这是一个标准，尽管远非完美配置：

```
<IfModule mpm_prefork_module>
    StartServers          5
    MinSpareServers       5
    MaxSpareServers      10
    MaxClients          150
    MaxRequestsPerChild   0
</IfModule>

<IfModule mpm_worker_module>
    StartServers          2
    MaxClients          150
    MinSpareThreads      25
    MaxSpareThreads      75
    ThreadsPerChild      25
    MaxRequestsPerChild   0
</IfModule> 
```

确保你有足够的内存，你只需要大约 1GB 的 apache2 （至少在 linux 下）

您还可以尝试针对一个小的静态文本文件（大约 2kb）检查性能，看看性能是什么样的。之后检查简单`<? php echo 'Hello World!' ?>`以查看 php 解释器的性能影响。这两个测试都应该让您了解您的 apache 在当前配置下的能力。如果两个测试中的性能都可以接受，那么就是您的应用程序运行缓慢。

要尝试的另一件事是在测试中禁用并发，看看是否有帮助。这表明您的应用程序或数据库访问存在并发问题。

```
ab -c1 -t60 http://sf2.cities.localhost/app.php 
```

如果它仍然很慢，谷歌`apache performance tuning`和（假设你使用 MySQL 作为你的数据库）`mysql performance tuning`

# javascript - AJAX Lightbox Spinner PopUp 从一个页面显示到另一个页面

> ID：10599867
> 
> 赞同：0
> 
> 时间：2012-05-15T11:36:22.897
> 
> 标签：javascript, jquery, ajax, spinner, lightbox

每次用户从网站上的一个页面导航到另一个页面时，是否有一些技术可以在页面中心显示一个 Lightbox AJAX 'Spinner'？

**因此，在每次“点击”超链接时，它都会在页面加载时弹出一个微调器动画。**

这很容易实现吗？

**非常感谢您的任何指点。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:39:22.080

那里有几个例子，但我想到的是 BlockUI。看看[http://jquery.malsup.com/block](http://jquery.malsup.com/block)。您需要将此与您的 ajax succes/error/always 回调结合起来，但这些示例应该可以帮助您朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:40:05.453

你可以使用[.ajaxStart()](http://api.jquery.com/ajaxStart/)和[.ajaxStop()](http://api.jquery.com/ajaxStop/)

```
$(document).ajaxStart(function() {
    $('#spinner').show();
})
.ajaxStop(function() {
    $('#spinner').hide();
}) 
```

# assembly - 带有 x86 代码的段错误

> ID：10599870
> 
> 赞同：-1
> 
> 时间：2012-05-15T11:36:27.313
> 
> 标签：assembly, x86

我正在使用 ac 到 x86 编译器，实际上我正在生成一些代码行，但是当我尝试启动它时出现分段错误，我无法找出错误的来源。这是代码：

```
 .file   "test.c"
    .text            
    .globl main
    .type main, @function  
main:                        
    pushl   %ebp                     
    movl    %esp,   %ebp               
    subl    $32,    %esp             
    movl    $2, %eax                        
    movl    %eax,   -4(%ebp) 
    movl    $3, %eax                         
    movl    %eax,   -8(%ebp) 
    movl    -4(%ebp), %eax        
    popl    %ecx         
    addl    %ecx,   %eax  
    pushl   %eax        
    movl    -8(%ebp), %eax                         
    movl    %eax,   -12(%ebp) 
```

段错误似乎出现在第一条指令“pushl %ebp”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T12:38:01.590

好吧，假设您告诉我们的内容是正确的，对于可能出现的问题，大致有两种解释：

完全不考虑“外面”的解释，比如“你的 CPU 坏了”，一条`push`指令的段错误可能有两个原因：

*   堆栈未正确设置，因此指令试图将数据推送到只读或未映射地址，或
*   包含指令*本身*的内存页未标记为可执行。

根据给出的信息，不可能说这两者中的哪一个导致了问题。你必须确定这一点。（或者给我们一些更多的信息，例如，关于代码是如何被执行的）

# c++ - MS Visual C++ 中的 dllimport 和模板

> ID：10599879
> 
> 赞同：0
> 
> 时间：2012-05-15T11:37:01.087
> 
> 标签：c++, function, templates, dllimport, dllexport

我有这样的课

```
class A_DLL A
{
   ...
   template <class T> someFunction(const T &v);
} 
```

在库 a.dll 中。A_DLL 是`__declspec(dllexport)`在构建 a.dll 和`__declspec(dllimport)`使用 a.dll 时。

问题是当我尝试在与 a.dll 链接的某些可执行模块中使用“someFunction”时，它可以工作。但是，当我在其他一些库（b.dll）中使用它时，它会给我一条关于未解决的外部（someFunction 和其他模板）的错误消息。显然我不应该`__declspec`在模板上使用，但是如何创建一个类`__declspec`呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T11:41:11.257

您可以使用如下声明：

```
template class A_DLL MyTemplateClass<int>; 
```

该语句将生成模板类实例化并将其导出到您正在构建的 DLL 中（或根据预处理器设置 A_DLL 的方式导入它）。

您也可以点击此[链接](http://www.codesynthesis.com/~boris/blog/2010/01/18/dll-export-cxx-templates/)获取更详细的说明。

# jquery - 从中获取文本 's & 检查重复项 & .append it... by jQuery

> ID：10599885
> 
> 赞同：5
> 
> 时间：2012-05-15T11:37:34.327
> 
> 标签：jquery, text, get, duplicates

HTML：

```
<li>Tue, 15th May 2012 10:11</li>
<li>Tue, 15th May 2012 10:12</li>
<li>Tue, 15th May 2012 10:13</li>
<li>Tue, 15th May 2012 10:14</li>
<li>Tue, 15th May 2012 10:15</li>
<li>Tue, 16th May 2012 21:08</li>
<li>Tue, 16th May 2012 21:07</li>
<li>Tue, 16th May 2012 21:06</li>
<code></code> 
```

jQuery :

```
$("li").each(function () {
    words = $(this).text().split(' ');
    xxx = words[1]+" "+words[2]+" "+words[3]+",";
    $("code").append(xxx); 
}); 
```

我现在来到这一步，但我不知道如何检查重复日期并附加唯一日期

演示：http: [//jsfiddle.net/4kvUy/](http://jsfiddle.net/4kvUy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:41:37.700

一种选择是使用[`:contains`](http://api.jquery.com/contains-selector/)选择器。

```
$("li").each(function() {
    words = $(this).text().split(' ');
    xxx = words[1] + " " + words[2] + " " + words[3] + ",";
    $("code:not(:contains(" + xxx + "))").append(xxx);
});​ 
```

**演示：http:** [//jsfiddle.net/4kvUy/2/](http://jsfiddle.net/4kvUy/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:46:18.087

这样做： -

```
if ($("code:contains('"+xxx+"')").length == 0)
   $("code").append(xxx); 
```

## 编辑：

要处理逗号，请尝试以下方式：-

```
if ($("code:contains('"+xxx+"')").length == 0){
    if ($("code").text() == '')
        $("code").append(xxx);
    else
        $("code").append(","+xxx);
} 
```

## 编辑2：

要处理这种类型的输出，请尝试以下方式：-

```
$("li").each(function () {
    words = $(this).text().split(' ');
    xxx = words[1]+" "+words[2]+" "+words[3];
    if ($("code:contains('"+xxx+"')").length == 0){     
        if ($("code").text() == '')         
            $("code").append('["'+xxx);     
        else         
            $("code").append('","'+xxx); 
    }
});
$("code").append('"]'); 
```

**输出：**

```
["15th May 2012","16th May 2012"] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T11:45:40.550

[在 jsfiddle 上](http://jsfiddle.net/parush/4kvUy/4/)试试这个，它似乎工作。

# iphone - 使用来自 ws 的图像更改飞溅

> ID：10599892
> 
> 赞同：0
> 
> 时间：2012-05-15T11:37:59.053
> 
> 标签：iphone

我是 iphone 的新手，我需要使用第一次从 Web 服务输入后出现的图像设置启动画面。如何以及在哪里找到它？如何将新的启动画面设置为启动画面？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-15T11:42:02.067

你不能，“启动画面”被称为`Default.png`ans 存储在应用程序包中。应用程序包是只读的，不能修改。

您可以在应用程序启动后添加一个额外的启动屏幕，但这将不得不延迟您的应用程序的启动，Apple 不会继续这样做。

# encryption - 在 Java 中使用 BouncyCastle 的椭圆曲线加密 API 进行加密

> ID：10599902
> 
> 赞同：1
> 
> 时间：2012-05-15T11:38:45.287
> 
> 标签：encryption, cryptography, bouncycastle, elliptic-curve

我正在寻找在 bouncy-castle 的 java 实施中使用“ECKey”加密/解密字节 [] 的示例代码。特别是我需要知道如何指定算法、填充等。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:51:26.817

在 BouncyCastle API 中，IESEngine（集成加密方案）使用 BasicAgreement 和 KDF 对象，您可以在[ECIESTest.java](https://github.com/bcgit/bc-java/blob/adecd89d33edf278a5c601af2de696f0a6f65251/prov/src/test/java/org/bouncycastle/jce/provider/test/ECIESTest.java)中找到它的示例。它详细展示了这个类的使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T19:37:43.133

仅此一次，因为示例源仍然无法单独下载。这只是内部充气城堡示例的代码。[下载最新的资源或在此处](http://www.koders.com/java/fid33E10C31D0C65B6922AFAF45F0FFB8218C052FE9.aspx)查找 EC IES 测试（只是在 google 上搜索过）。

# android - 为什么“\n”不能作为 HTML 电子邮件中的换行符？

> ID：10599908
> 
> 赞同：-1
> 
> 时间：2012-05-15T11:39:08.167
> 
> 标签：android, newline, jakarta-mail, forward

我的代码示例是：

```
private String _body;
private String _forward;

// setup message body
            BodyPart messageBodyPart = new MimeBodyPart();
            messageBodyPart.setContent(_body + "\n" + "--------------------------------" + "\n" + _forward , "text/html");
            _multipart.addBodyPart(messageBodyPart); 
```

当我将此消息发送到我的电子邮件地址时，它显示：

_body = "耶尼雅子" and _forward = "deneme mail 2"

![在此处输入图像描述](../Images/d89a8296cb59788d252ea7457af73d41.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T11:42:08.173

由于您将电子邮件作为 HTML 文本发送，因此您应该使用`<br>`HTML 换行符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T11:49:33.060

改为使用`System.getProperty("line.separator")`，以使您的代码在所有操作系统上工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:46:38.207

请使用`\r\n`而不是使用`\n`. 对于**windows 操作系统**，`\n`没有帮助。`\n`在**Linux 操作系统中完美运行**

# javascript - 项目模板内的 Telerik ComboBox FindControl

> ID：10599914
> 
> 赞同：-1
> 
> 时间：2012-05-15T11:39:48.257
> 
> 标签：javascript, asp.net, telerik, telerik-combobox

```
<Telerik:RadComboBox ID="ddlInvoiceNumber" CssClass="feilds" runat="server" AutoPostBack="false"
    OnClientDropDownClosed="onDropDownClosed" EmptyMessage="-- Select Invoice --"
    LoadingMessage="Please wait" CheckBoxes="true" AppendDataBoundItems="true" SkinID="Windows7"
    Width="450" HighlightTemplatedItems="true">
    <HeaderTemplate>
        <table style="width: 420px;" cellspacing="0" cellpadding="0">
            <tr>
                <td style="width: 180px; float: left">
                    Invoice
                </td>
                <td style="width: 60px; float: left">
                    Value
                </td>
                <td style="width: 60px; float: left">
                    Balance
                </td>
                <td style="width: 60px; float: right">
                    Requested
                </td>
            </tr>
        </table>
    </HeaderTemplate>
    <ItemTemplate>
        <table style="width: 420px;" cellspacing="0" cellpadding="0">
            <tr>
                <td style="width: 180px; float: left" class="smalltext">
                    <%#DataBinder.Eval(Container, "Text")%>
                </td>
                <td style="width: 60px; float: left" class="smalltext">
                    <%#DataBinder.Eval(Container, "Value")%>
                </td>
                <td style="width: 60px; float: left" class="smalltext">
                    <%#Eval("BalanceAmount")%>
                </td>
                <td style="width: 60px; float: right" class="smalltext">
                    <asp:TextBox ID="txtDDLInvoiceAmount" runat="server" Text='<%#Eval("BalanceAmount")%>'
                        Width="58px"></asp:TextBox>
                </td>
            </tr>
        </table>
    </ItemTemplate>
</Telerik:RadComboBox> 
```

onDropDownClosed 上的 Javascript 函数

```
 function onDropDownClosed(sender, eventArgs) {

      for (var i = 0; i < Length; i++) {
          document.getElementById('<%= lblInvoiceNumberDisplay.ClientID %>').innerHTML += sender.get_checkedItems()[i].get_text() + ", ";
          sum += parseFloat(sender.get_checkedItems()[i].get_value(), 10);

          // Here i want checked textbox values 
      }
  } 
```

请帮助 - 我如何`FindControl`在客户端的 ComboBox 项目模板中使用 TextBox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:27:58.127

我正在回答我自己的问题

findControl 需要控件的 ID，但它返回使用该 ID 找到的客户端对象，例如在内部它使用 $find() 方法获取 javascript 对象。隐藏字段没有这样的客户端对象，这就是它找不到它的原因。您可以使用这种方法来获取 DOM 元素：

```
$telerik.findElement(sender.get_items().getItem(0).get_element(), "txtDDLInvoiceAmount").value 
```

# php - Setlocale() 不适用于大写重音字符

> ID：10599922
> 
> 赞同：5
> 
> 时间：2012-05-15T11:40:06.513
> 
> 标签：php, character-encoding

我有一些带有（瑞士）法语字符的字符串，我想大写（PHP 5.3）。

```
echo strtoupper('société'); 
```

由于`strtoupper()`不适用于accuentuated字符，我做了一个`setlocale()`（这个语言环境在我们的Ubuntu dev和debian prod服务器上可用），它不起作用：

```
setlocale(LC_CTYPE, 'fr_CH');
echo strtoupper('société'); 
```

预期结果：

```
SOCIÉTÉ 
```

结果：

```
SOCIéTé 
```

可用的语言环境：

```
$ locale -a
...
fr_CH
fr_CH.iso88591
fr_CH.utf8
fr_FR
fr_FR.iso88591
fr_FR.iso885915@euro
fr_FR.utf8
fr_FR@euro
...

$ locale
LANG=
LANGUAGE=
LC_CTYPE="POSIX"
LC_NUMERIC="POSIX"
LC_TIME="POSIX"
LC_COLLATE="POSIX"
LC_MONETARY="POSIX"
LC_MESSAGES="POSIX"
LC_PAPER="POSIX"
LC_NAME="POSIX"
LC_ADDRESS="POSIX"
LC_TELEPHONE="POSIX"
LC_MEASUREMENT="POSIX"
LC_IDENTIFICATION="POSIX"
LC_ALL= 
```

注意：该`mbstring`模块不可用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-15T11:42:30.627

使用 mb_strtoupper() 函数。`mb_strtoupper($str, 'UTF-8');`

[http://in3.php.net/manual/en/function.mb-strtoupper.php](http://in3.php.net/manual/en/function.mb-strtoupper.php)

## 信息

strtoupper 不支持 Unicode。您应该使用多字节版本的字符串函数

## 选择

```
<?php function mb_strtoupper_new($str, $e='utf-8') {
    if (function_exists('mb_strtoupper')) {
        return mb_strtoupper($str, $e='utf-8'); 
    }
    else {
        foreach($str as &$char) {
            $char = utf8_decode($char);
            $char = strtr(char,
                "abcdefghýijklmnopqrstuvwxyz".
                "\x9C\x9A\xE0\xE1\xE2\xE3".
                "\xE4\xE5\xE6\xE7\xE8\xE9".
                "\xEA\xEB\xEC\xED\xEE\xEF".
                "\xF0\xF1\xF2\xF3\xF4\xF5".
                "\xF6\xF8\xF9\xFA\xFB\xFC".
                "\xFE\xFF",
                "ABCDEFGHÝIJKLMNOPQRSTUVWXYZ".
                "\x8C\x8A\xC0\xC1\xC2\xC3\xC4".
                "\xC5\xC6\xC7\xC8\xC9\xCA\xCB".
                "\xCC\xCD\xCE\xCF\xD0\xD1\xD2".
                "\xD3\xD4\xD5\xD6\xD8\xD9\xDA".
                "\xDB\xDC\xDE\x9F");
            $char =  utf8_encode($char);
        }
        return $str;
    }
}
echo mb_strtoupper_new('société'); 
```

来源：[http ://www.php.net/manual/es/function.ucfirst.php#63799](http://www.php.net/manual/es/function.ucfirst.php#63799)

# javascript - 避免 jQuery（预）加载图像

> ID：10599926
> 
> 赞同：7
> 
> 时间：2012-05-15T11:40:26.653
> 
> 标签：javascript, jquery

我有一个 HTML 字符串，用作 jQuery 输入文档。

```
// the variable html contains the HTML code

jQuery( html ).find( 'p' ).each( function( index, element ) {
    // do stuff
}); 
```

虽然，我不断收到图像不存在的错误（在我的变量中`html`）。HTML 中的图像具有与我主机上的图像不对应的相对 URL，因此自然无法找到它们，因此我在控制台中收到 404 错误。

**有没有一种 jQuery 方式来避免 jQuery 加载图像？**如果没有，我将不得不查找所有图像并使用非 jQuery 替换 src，这有点令人难过，因为这正是 jQuery 派上用场的地方：p

* * *

编辑：

我会一步一步解释。

我有一个变量，`html`它包含来自另一个站点的一些 HTML 代码。我将该变量放在 jQuery 构造函数中，因为我想对该 HTML 执行操作。

`jQuery( html );`

此时我得到 404 错误，因为 HTML 源中的图像是相对的；它们与我在主机上的图像不对应。

*   我不能使用 jQuery 删除 src 标签，因为我仍然得到错误
*   编写一些 javascript 来修改 src 值是很愚蠢的；这就是我使用 jQuery 的原因

所以，再一次，**我要问的是是否有一个设置或任何东西可以避免 jQuery 在提供的源中加载图像。**

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:45:08.813

在您获得 html 之后 - 将 src 替换为其他内容（）可能是您自己的图片 [全局 url]。（简单的字符串替换）

这将帮助您避免在控制台中出现 404 - not found 错误。

您也可以将 html 设为 jQuery - 并使用您的 SRC 设置所有 $("img") 或根据需要将其删除。

*告诉我，如果那是你所追求的。*

## 编辑

关于什么

```
$("img").removeAttr("src"); 
```

## 编辑2

```
 string html = @"
<h1>
<img src="" ... >
</img>
<img></img>-bad
<img/>-bad
<img src="" ... />
</h1>";
            string result = Regex.Replace(html, @"<img\s[^>]*/>", "", RegexOptions.IgnoreCase); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T12:08:13.593

要停止图像加载，您需要在创建对象**之前修改 html。**`jQuery( html )`您也可以为此使用 jquery。

```
var newhtml = html.replace('src=','nosrc=');
jQuery( newhtml ).find( 'p' ).each( function( index, element ) {
    // do stuff
}); 
```

# iphone - 在应用程序目录 iPhone 中创建的文件夹的限制是什么

> ID：10599928
> 
> 赞同：1
> 
> 时间：2012-05-15T11:40:28.287
> 
> 标签：iphone, objective-c, avassetwriter

我正在尝试使用 AVAssetWriter 创建一个包含大约 20 个图像的 MPEG4 ..

对于 10 张图片，我可以在我的 app 目录中创建一个文件，但是对于 20 张图片，我无法创建一个文件。

这是我尝试保存图像 mpeg4 格式文件的路径（设备路径）：

```
var/mobile/Applications/FED8E776-92CC-47BC-AA47-845DAED5CBE7/Library/Caches/videoOutput1234videoOutput1234.mp4 
```

**这里我的问题是：在应用程序目录中创建的文件夹是否有任何限制，如果有，限制是什么以及如何找到创建文件的大小**

这是我的代码：

```
-(void)writeImageAsMovie:(NSMutableArray *)array toPath:(NSString*)path size:(CGSize)size duration:(int)duration 
{
CFDataRef imgData;
CGDataProviderRef imgDataProvider;
CGImageRef image1;

if ([[NSFileManager defaultManager] fileExistsAtPath:path])
    [[NSFileManager defaultManager] removeItemAtPath:path error:nil];

NSError *error = nil;

AVAssetWriter *videoWriter = [[AVAssetWriter alloc] initWithURL:[NSURL fileURLWithPath:path] fileType:AVFileTypeMPEG4 error:&error];

NSParameterAssert(videoWriter);

NSDictionary *videoSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                               AVVideoCodecH264, AVVideoCodecKey,
                               [NSNumber numberWithInt:size.width], AVVideoWidthKey,
                               [NSNumber numberWithInt:size.height], AVVideoHeightKey,
                               nil];
AVAssetWriterInput* writerInput = [[AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:videoSettings] retain];

AVAssetWriterInputPixelBufferAdaptor *adaptor = [AVAssetWriterInputPixelBufferAdaptor assetWriterInputPixelBufferAdaptorWithAssetWriterInput:writerInput sourcePixelBufferAttributes:nil];

NSParameterAssert(writerInput);
NSParameterAssert([videoWriter canAddInput:writerInput]);

writerInput.expectsMediaDataInRealTime = YES;
[videoWriter addInput:writerInput];

[videoWriter startWriting];
[videoWriter startSessionAtSourceTime:kCMTimeZero];

CVPixelBufferRef buffer = NULL;

int frameCount = 0;

for(int i = 0; i<[array count]; i++)
{
    imgData = (CFDataRef)[array objectAtIndex:i];
    imgDataProvider = CGDataProviderCreateWithCFData (imgData);
    image1 = CGImageCreateWithPNGDataProvider(imgDataProvider, NULL, true, kCGRenderingIntentDefault);

    buffer = [self pixelBufferFromCGImage:image1];

    BOOL append_ok = NO;
    int j = 0;
    while (!append_ok && j < 30) 
    {
        if (adaptor.assetWriterInput.readyForMoreMediaData) 
        {
            printf("appending %d attemp %d\n", frameCount, j);
            CMTime frameTime;

            int64_t value = [[dataBaseTimeArray objectAtIndex:i] intValue];
            int32_t preferredTimeScale = 1;
            frameTime = CMTimeMake(value, preferredTimeScale);

            append_ok = [adaptor appendPixelBuffer:buffer withPresentationTime:frameTime];
                            }
        } 
        else 
        {
            printf("adaptor not ready %d, %d\n", frameCount, j);
            [NSThread sleepForTimeInterval:0.1];
        }
        j++;
    }
    if (!append_ok) {
        printf("error appending image %d times %d\n", frameCount, j);
    }
    frameCount++;
    CVBufferRelease(buffer);
}

if (AVAssetWriterStatusCompleted) {
    [writerInput markAsFinished];
    [videoWriter finishWriting];
}
} 
```

# jquery - 选项卡中的 Jquery 验证

> ID：10599929
> 
> 赞同：0
> 
> 时间：2012-05-15T11:40:29.150
> 
> 标签：jquery, validation, tabs

这是我一直在尝试的。

一个表单将具有三个选项卡，如上所示。

当使用单击特定选项卡并尝试填充数据时，它已经验证了文本框的空验证。

当用户单击第一个选项卡并在文本框 id="textbox_four" 中填写一些数据时，如果他单击下一个选项卡，则数据必须在 id="textbox_five" 中，当他单击第三个选项卡时也是如此，它必须在“textbox_six”中，数据必须不断传递。

[http://jsfiddle.net/CuA9V/2/](http://jsfiddle.net/CuA9V/2/)

如果你能在这里有所启发，那就太好了。

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T11:42:25.920

检测值 onkeyup 并将输入复制到其他文本字段：

```
$('#textbox_four').keyup(function(){

$('#textbox_five').val($(this).val());
$('#textbox_six').val($(this).val());

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-15T11:52:03.930

这将使它们保持同步。我*想*这就是你要问的？哈哈

```
$('#textbox_four, #textbox_five, #textbox_six').keyup(function(){
    $('#textbox_four').val($(this).val());
    $('#textbox_five').val($(this).val());
    $('#textbox_six').val($(this).val());
}); 
```

编辑：您可以在验证期间检查选定的选项卡，如下所示

```
$('#submitButton').click(function()
{
    var selected = $("#tabs").tabs('option', 'selected');

    if (selected == 0) {
        // Do this
    } else if (selected == 1) {
        // Do that
    } else if (selected == 2) {
        // Etc
    }
}; 
```

更新：http: [//jsfiddle.net/trapper/CuA9V/5/](http://jsfiddle.net/trapper/CuA9V/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T12:07:38.623

您可以使用此 jquery 使其工作并看起来更好

[http://tympanus.net/codrops/2010/06/07/fancy-sliding-form-with-jquery/](http://tympanus.net/codrops/2010/06/07/fancy-sliding-form-with-jquery/)

# jquery - 如何使用 jQuery 将图像粘贴到另一个图像上？

> ID：10599930
> 
> 赞同：0
> 
> 时间：2012-05-15T11:40:32.127
> 
> 标签：jquery, css, z-index

介词：

我有一个带有许多固定位置 div 标签的 HTML 代码，例如：head、content、content _text、graph1、graph2 等。在这种情况下，#content div 垂直位于 #head div 下方。#content_text 在#content 中，而#content 具有overflow:auto CSS 属性。

```
<div id="head"><img src="..."></div>
<div id="content">
    <div id="content_text">
        <img src="...">
    </div>
</div> 
```

现在的问题是，当我将一个新的 img 标签添加到“body”标签并且这个 img 给出位置：绝对，然后顶部和左侧工作正常时，图像就是我想要的。

当我滚动 #content_text 时，这个新的 img 在我设置时会保留，但我可以使用 jQuery $('#content_text').scroll(...) 函数重新定位它。

这是真正的问题：

当我滚动并重新定位新的 img 标记时，#head 元素上方并且在它滚动出 #content_text 时没有隐藏。

我试图找到原始图像的 z-index 属性，但它得到了“自动”。

有人有什么想法吗？

# java - 用“Sysdeo Eclipse Tomcat Launcher 插件”维护J

> ID：10599931
> 
> 赞同：1
> 
> 时间：2012-05-15T11:40:47.337
> 
> 标签：java, reverse-engineering

我正在使用 Eclipse 和“Sysdeo Eclipse Tomcat Launcher 插件”中的 tomcat 服务器插件。

现在我想在我的配置中使用 Maintainj（Sysdeo Eclipse Tomcat Launcher 插件），请帮我配置任何一个。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T12:48:57.247

将 MaintainJ.war 添加到 Tomcat 并按照向导的说明进行操作。在第 2 步之后，您将看到添加到服务器类路径和 JVM 参数的说明。您必须手动进行这些更改才能完成 MaintainJ 的配置。

# javascript - 在 JavaScript 中将长数字转换为缩写字符串，具有特殊的短要求

> ID：10599933
> 
> 赞同：96
> 
> 时间：2012-05-15T11:40:52.160
> 
> 标签：javascript, numbers

在 JavaScript 中，如何编写一个函数，将给定的 [edit: *positive integer* ] 数字（低于 1000 亿）转换为 3 个字母的缩写——其中 0-9 和 az/AZ 算作一个字母，但点（因为它在许多比例字体中是如此之小）不会，并且会在字母限制方面被忽略？

这个问题与[这个有用的线程](https://stackoverflow.com/questions/2685911/is-there-a-way-round-numbers-into-a-friendly-format-e-g-1-1k)有关，但不一样；例如，该函数将变为例如“123456 -> 1.23k”（“123.5k”是5个字母）我正在寻找可以执行“123456 -> 0.1m”的东西（“0[.]1m”是3个字母）。例如，这将是希望函数的输出（左原始，右理想返回值）：

```
0                      "0"
12                    "12"
123                  "123"
1234                "1.2k"
12345                "12k"
123456              "0.1m"
1234567             "1.2m"
12345678             "12m"
123456789           "0.1b"
1234567899          "1.2b"
12345678999          "12b" 
```

谢谢！

**更新：谢谢！当进行以下修改时，答案就在其中并按照要求工作：**

```
function abbreviateNumber(value) {
    var newValue = value;
    if (value >= 1000) {
        var suffixes = ["", "k", "m", "b","t"];
        var suffixNum = Math.floor( (""+value).length/3 );
        var shortValue = '';
        for (var precision = 2; precision >= 1; precision--) {
            shortValue = parseFloat( (suffixNum != 0 ? (value / Math.pow(1000,suffixNum) ) : value).toPrecision(precision));
            var dotLessShortValue = (shortValue + '').replace(/[^a-zA-Z 0-9]+/g,'');
            if (dotLessShortValue.length <= 2) { break; }
        }
        if (shortValue % 1 != 0)  shortValue = shortValue.toFixed(1);
        newValue = shortValue+suffixes[suffixNum];
    }
    return newValue;
} 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-05-15T13:05:16.177

我相信 ninjagecko 的解决方案不太符合您想要的标准。以下函数执行：

```
function intToString (value) {
    var suffixes = ["", "k", "m", "b","t"];
    var suffixNum = Math.floor((""+value).length/3);
    var shortValue = parseFloat((suffixNum != 0 ? (value / Math.pow(1000,suffixNum)) : value).toPrecision(2));
    if (shortValue % 1 != 0) {
        shortValue = shortValue.toFixed(1);
    }
    return shortValue+suffixes[suffixNum];
} 
```

对于大于 99 万亿的值，不会添加任何字母，可以通过附加到“后缀”数组来轻松修复。

**Philipp 编辑如下：**通过以下更改，它完全符合所有要求！

```
function abbreviateNumber(value) {
    var newValue = value;
    if (value >= 1000) {
        var suffixes = ["", "k", "m", "b","t"];
        var suffixNum = Math.floor( (""+value).length/3 );
        var shortValue = '';
        for (var precision = 2; precision >= 1; precision--) {
            shortValue = parseFloat( (suffixNum != 0 ? (value / Math.pow(1000,suffixNum) ) : value).toPrecision(precision));
            var dotLessShortValue = (shortValue + '').replace(/[^a-zA-Z 0-9]+/g,'');
            if (dotLessShortValue.length <= 2) { break; }
        }
        if (shortValue % 1 != 0)  shortValue = shortValue.toFixed(1);
        newValue = shortValue+suffixes[suffixNum];
    }
    return newValue;
} 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2015-09-17T19:27:03.820

这也可以处理非常大的值，并且更加简洁和高效。

```
abbreviate_number = function(num, fixed) {
  if (num === null) { return null; } // terminate early
  if (num === 0) { return '0'; } // terminate early
  fixed = (!fixed || fixed < 0) ? 0 : fixed; // number of decimal places to show
  var b = (num).toPrecision(2).split("e"), // get power
      k = b.length === 1 ? 0 : Math.floor(Math.min(b[1].slice(1), 14) / 3), // floor at decimals, ceiling at trillions
      c = k < 1 ? num.toFixed(0 + fixed) : (num / Math.pow(10, k * 3) ).toFixed(1 + fixed), // divide by power
      d = c < 0 ? c : Math.abs(c), // enforce -0 is 0
      e = d + ['', 'K', 'M', 'B', 'T'][k]; // append power
  return e;
} 
```

结果：

```
for(var a='', i=0; i < 14; i++){ 
    a += i; 
    console.log(a, abbreviate_number(parseInt(a),0)); 
    console.log(-a, abbreviate_number(parseInt(-a),0)); 
}

0 0
-0 0
01 1
-1 -1
012 12
-12 -12
0123 123
-123 -123
01234 1.2K
-1234 -1.2K
012345 12.3K
-12345 -12.3K
0123456 123.5K
-123456 -123.5K
01234567 1.2M
-1234567 -1.2M
012345678 12.3M
-12345678 -12.3M
0123456789 123.5M
-123456789 -123.5M
012345678910 12.3B
-12345678910 -12.3B
01234567891011 1.2T
-1234567891011 -1.2T
0123456789101112 123.5T
-123456789101112 -123.5T
012345678910111213 12345.7T
-12345678910111212 -12345.7T 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2019-05-04T22:44:18.283

## 方法一：内置库

我建议使用 Javascript 的内置库方法[Intl.NumberFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat)

```
Intl.NumberFormat('en-US', {
  notation: "compact",
  maximumFractionDigits: 1
}).format(2500); 
```

## 方法 2：没有库

但是您也可以使用简单`if`的语句创建这些缩写，而无需复杂的`Math`, `maps`, `regex`, `for`-loops 等。

**用 K 格式化现金价值**

```
const formatCash = n => {
  if (n < 1e3) return n;
  if (n >= 1e3) return +(n / 1e3).toFixed(1) + "K";
};

console.log(formatCash(2500)); 
```

**使用 KMBT 格式化现金价值**

```
const formatCash = n => {
  if (n < 1e3) return n;
  if (n >= 1e3 && n < 1e6) return +(n / 1e3).toFixed(1) + "K";
  if (n >= 1e6 && n < 1e9) return +(n / 1e6).toFixed(1) + "M";
  if (n >= 1e9 && n < 1e12) return +(n / 1e9).toFixed(1) + "B";
  if (n >= 1e12) return +(n / 1e12).toFixed(1) + "T";
};

console.log(formatCash(1235000)); 
```

**使用负数**

```
let format;
const number = -1235000;

if (number < 0) {
  format = '-' + formatCash(-1 * number);
} else {
  format = formatCash(number);
} 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2020-04-01T21:32:50.947

现代、简单、内置、高度可定制和“无代码”的方式：[Intl.FormatNumber](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat)的[格式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat/format)函数（[兼容性图](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NumberFormat#Browser_compatibility)）

```
var numbers = [98721, 9812730,37462,29,093484620123, 9732,0283737718234712]
for(let num of numbers){
  console.log(new Intl.NumberFormat( 'en-US', { maximumFractionDigits: 1,notation: "compact" , compactDisplay: "short" }).format(num));
}
98.7K
9.8M
37.5K
29
93.5B
9.7K
283.7T 
```

笔记：

*   如果您使用的是打字稿，请在`//@ts-ignore`之前添加一个`notation`（[source](https://github.com/microsoft/TypeScript/issues/36533#issuecomment-607081387)）
*   以及参数中所有键的列表`options`：[https ://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat#parameters](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat/NumberFormat#parameters)
*   使用时`style: 'currency'`，您必须删除 maximumFractionDigits，因为它会为您解决这个问题。

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2017-09-09T19:53:12.287

这是我认为是一个相当优雅的解决方案。**它不会尝试处理负数**：

```
const COUNT_ABBRS = [ '', 'K', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y' ];

function formatCount(count, withAbbr = false, decimals = 2) {
    const i     = 0 === count ? count : Math.floor(Math.log(count) / Math.log(1000));
    let result  = parseFloat((count / Math.pow(1000, i)).toFixed(decimals));
    if(withAbbr) {
        result += `${COUNT_ABBRS[i]}`; 
    }
    return result;
} 
```

**例子**：

```
 formatCount(1000, true);
=> '1k'
   formatCount(100, true);
=> '100'
   formatCount(10000, true);
=> '10k'
   formatCount(10241, true);
=> '10.24k'
   formatCount(10241, true, 0);
=> '10k'
   formatCount(10241, true, 1)
=> '10.2k'
   formatCount(1024111, true, 1)
=> '1M'
   formatCount(1024111, true, 2)
=> '1.02M' 
```

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2016-07-27T05:31:16.543

我认为你不能尝试这个[numericjs/](http://numeraljs.com/)

如果你想将 1000 转换为 1k

```
console.log(numeral(1000).format('0a')); 
```

如果你想将 123400 转换为 123.4k 试试这个

```
console.log(numeral(123400).format('0.0a')); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2012-05-15T12:27:44.010

根据我在[https://stackoverflow.com/a/10600491/711085](https://stackoverflow.com/a/10600491/711085)的回答，您的回答实际上更短，通过使用`.substring(0,3)`：

```
function format(n) {
    with (Math) {
        var base = floor(log(abs(n))/log(1000));
        var suffix = 'kmb'[base-1];
        return suffix ? String(n/pow(1000,base)).substring(0,3)+suffix : ''+n;
    }
} 
```

（像往常一样，除非您确切地知道自己在做什么，否则不要使用数学；分配`var pow=...`等会导致疯狂的错误。请参阅链接以获取更安全的方法。）

```
> tests = [-1001, -1, 0, 1, 2.5, 999, 1234, 
           1234.5, 1000001, Math.pow(10,9), Math.pow(10,12)]
> tests.forEach(function(x){ console.log(x,format(x)) })

-1001 "-1.k"
-1 "-1"
0 "0"
1 "1"
2.5 "2.5"
999 "999"
1234 "1.2k"
1234.5 "1.2k"
1000001 "1.0m"
1000000000 "1b"
1000000000000 "1000000000000" 
```

如果您对 3 个字符的要求很严格，您将需要捕捉结果 >=1 万亿的情况，否则您可能会创建损坏的数据，这将是非常糟糕的。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-11-15T21:47:45.027

这是另一种看法。我希望 123456 是 123.4K 而不是 0.1M

```
function convert(value) {

    var length = (value + '').length,
        index = Math.ceil((length - 3) / 3),
        suffix = ['K', 'M', 'G', 'T'];

    if (length < 4) return value;

    return (value / Math.pow(1000, index))
           .toFixed(1)
           .replace(/\.0$/, '') + suffix[index - 1];

}

var tests = [1234, 7890, 123456, 567890, 800001, 2000000, 20000000, 201234567, 801234567, 1201234567];
for (var i in tests)
    document.writeln('<p>convert(' + tests[i] + ') = ' + convert(tests[i]) + '</p>');
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-02-02T16:37:30.527

**代码**

```
const SI_PREFIXES = [
  { value: 1, symbol: '' },
  { value: 1e3, symbol: 'k' },
  { value: 1e6, symbol: 'M' },
  { value: 1e9, symbol: 'G' },
  { value: 1e12, symbol: 'T' },
  { value: 1e15, symbol: 'P' },
  { value: 1e18, symbol: 'E' },
]

const abbreviateNumber = (number) => {
  if (number === 0) return number

  const tier = SI_PREFIXES.filter((n) => number >= n.value).pop()
  const numberFixed = (number / tier.value).toFixed(1)

  return `${numberFixed}${tier.symbol}`
}

abbreviateNumber(2000) // "2.0k"
abbreviateNumber(2500) // "2.5k"
abbreviateNumber(255555555) // "255.6M" 
```

**测试：**

```
import abbreviateNumber from './abbreviate-number'

test('abbreviateNumber', () => {
  expect(abbreviateNumber(0)).toBe('0')
  expect(abbreviateNumber(100)).toBe('100')
  expect(abbreviateNumber(999)).toBe('999')

  expect(abbreviateNumber(1000)).toBe('1.0k')
  expect(abbreviateNumber(100000)).toBe('100.0k')
  expect(abbreviateNumber(1000000)).toBe('1.0M')
  expect(abbreviateNumber(1e6)).toBe('1.0M')
  expect(abbreviateNumber(1e10)).toBe('10.0G')
  expect(abbreviateNumber(1e13)).toBe('10.0T')
  expect(abbreviateNumber(1e16)).toBe('10.0P')
  expect(abbreviateNumber(1e19)).toBe('10.0E')

  expect(abbreviateNumber(1500)).toBe('1.5k')
  expect(abbreviateNumber(1555)).toBe('1.6k')

  expect(abbreviateNumber(undefined)).toBe('0')
  expect(abbreviateNumber(null)).toBe(null)
  expect(abbreviateNumber('100')).toBe('100')
  expect(abbreviateNumber('1000')).toBe('1.0k')
}) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-07-04T15:27:20.947

Intl 是用于实现国际化行为的 Javascript 标准“包”。Intl.NumberFormatter 是专门的本地化数字格式化程序。因此，此代码实际上尊重您本地配置的千位和小数分隔符。

```
intlFormat(num) {
    return new Intl.NumberFormat().format(Math.round(num*10)/10);
}

abbreviateNumber(value) {
    let num = Math.floor(value);
    if(num >= 1000000000)
        return this.intlFormat(num/1000000000)+'B';
    if(num >= 1000000)
        return this.intlFormat(num/1000000)+'M';
    if(num >= 1000)
        return this.intlFormat(num/1000)+'k';
    return this.intlFormat(num);
} 
```

abbreviateNumber(999999999999) // 给出 999B

相关问题：[在 JavaScript 中将本地化数字缩写为千 (1k) 和百万 (1m)](https://stackoverflow.com/questions/25611937/abbreviate-a-localized-number-in-javascript-for-thousands-1k-and-millions-1m)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-29T15:05:10.300

经过一番尝试，这种方法似乎符合要求的标准。从@chuckator 的回答中获得一些灵感。

```
function abbreviateNumber(value) {

    if (value <= 1000) {
        return value.toString();
    }

    const numDigits = (""+value).length;
    const suffixIndex = Math.floor(numDigits / 3);

    const normalisedValue = value / Math.pow(1000, suffixIndex);

    let precision = 2;
    if (normalisedValue < 1) {
        precision = 1;
    }

    const suffixes = ["", "k", "m", "b","t"];
    return normalisedValue.toPrecision(precision) + suffixes[suffixIndex];
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-06-13T10:35:22.720

我正在使用这个函数来获取这些值。

```
function Converter(number, fraction) {
    let ranges = [
      { divider: 1, suffix: '' },
      { divider: 1e3, suffix: 'K' },
      { divider: 1e6, suffix: 'M' },
      { divider: 1e9, suffix: 'G' },
      { divider: 1e12, suffix: 'T' },
      { divider: 1e15, suffix: 'P' },
      { divider: 1e18, suffix: 'E' },
    ]
    //find index based on number of zeros
    let index = (Math.abs(number).toString().length / 3).toFixed(0)
    return (number / ranges[index].divider).toFixed(fraction) + ranges[index].suffix
} 
```

每个 3 位数字都有不同的后缀，这就是我首先要找到的。

**因此，如果存在**则删除负号，然后找出这个数字中有多少个 3 位。

之后根据先前的计算找到适当的后缀添加到除数。

```
Converter(1500, 1) 
```

将返回：

```
1.5K 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-09-16T12:50:35.237

印度货币格式为**(K, L, C)**千、十万、克罗

```
const formatCash = n => {
  if (n < 1e3) return n;
  if (n >= 1e3 && n < 1e5) return +(n / 1e3).toFixed(1) + "K";
  if (n >= 1e5 && n <= 1e6) return +(n / 1e5).toFixed(1) + "L";
  if (n >= 1e6 && n <= 1e9) return +(n / 1e7).toFixed(1) + "C";
}; 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-04-04T09:34:58.250

@nimesaram

您的解决方案不适用于以下情况：

```
Input 50000
Output 50.0k 
```

* * *

以下解决方案将正常工作。

```
const convertNumberToShortString = (
  number: number,
  fraction: number
) => {
  let newValue: string = number.toString();
  if (number >= 1000) {
    const ranges = [
      { divider: 1, suffix: '' },
      { divider: 1e3, suffix: 'k' },
      { divider: 1e6, suffix: 'm' },
      { divider: 1e9, suffix: 'b' },
      { divider: 1e12, suffix: 't' },
      { divider: 1e15, suffix: 'p' },
      { divider: 1e18, suffix: 'e' }
    ];
    //find index based on number of zeros
    const index = Math.floor(Math.abs(number).toString().length / 3);
    let numString = (number / ranges[index].divider).toFixed(fraction);
    numString =
      parseInt(numString.substring(numString.indexOf('.') + 1)) === 0
        ? Math.floor(number / ranges[index].divider).toString()
        : numString;
    newValue = numString + ranges[index].suffix;
  }
  return newValue;
};

// Input 50000
// Output 50k
// Input 4500
// Output 4.5k 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-08-04T14:49:23.580

## 用作数字原型

让您轻松而直接。只需制作它的原型。这是一个例子。

```
Number.prototype.abbr = function (decimal = 2): string {
  const notations = ['', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y'],
    i = Math.floor(Math.log(this) / Math.log(1000));
  return `${parseFloat((this / Math.pow(1000, i)).toFixed(decimal))}${notations[i]}`;
}; 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-08-29T02:24:03.207

```
 function converse_number (labelValue) {

                    // Nine Zeroes for Billions
                    return Math.abs(Number(labelValue)) >= 1.0e+9

                    ? Math.abs(Number(labelValue)) / 1.0e+9 + "B"
                    // Six Zeroes for Millions 
                    : Math.abs(Number(labelValue)) >= 1.0e+6

                    ? Math.abs(Number(labelValue)) / 1.0e+6 + "M"
                    // Three Zeroes for Thousands
                    : Math.abs(Number(labelValue)) >= 1.0e+3

                    ? Math.abs(Number(labelValue)) / 1.0e+3 + "K"

                    : Math.abs(Number(labelValue));

                } 
```

警报（converse_number（100000000000））；

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2021-05-30T09:16:58.167

## 更多的*缩写？*

让我们将“Qa”设为 Quadrillions，将“Qi”设为 Quintillions……也许是“Sx”Sextillions，等等……

```
if (num >= 1e3 !& num >= 1e6) {num2 = num/1e3 + "K";};
if (num >= 1e6 !& num >= 1e9) {num2 = num/1e6 + "M";};
if (num >= 1e9 !& num >= 1e12) {num2 = num/1e9 + "B";};
if (num >= 1e12 !& num >= 1e15) {num2 = num/1e12 + "T";};
if (num >= 1e15 !& num >= 1e18) {num2 = num/1e15 + "Qa";};
if (num >= 1e18 !& num >= 1e21) {num2 = num/1e18 + "Qi";};
if (num >= 1e21 !& num >= 1e24) {num2 = num/1e21 + "Sx";};
if (num >= 1e24 !& num >= 1e27) {num2 = num/1e24 + "Sp";};
if (num >= 1e27 !& num >= 1e30) {num2 = num/1e27 + "Oc";};
if (num >= 1e30 !& num >= 1e93) {num2 = num/1e30 + "No";};
if (num >= 1e33 !& num >= 1e36) {num2 = num/1e33 + "Dc";};
if (num >= 1e36 !& num >= 1e39) {num2 = num/1e36 + "UDc";};
if (num >= 1e39) {num2 = num/1e39 + "DDc";}; 
```

# c++ - SAFESEH 图像 C++ 的模块不安全

> ID：10599940
> 
> 赞同：90
> 
> 时间：2012-05-15T11:41:10.420
> 
> 标签：c++, visual-studio, visual-c++

我正在使用 Microsoft Visual Studio 2011 Professional Beta

我正在尝试运行我使用 cMake 和 Visual Studio 编译器编译的 OpenCV C++ 文件 ( [http://opencv.willowgarage.com/wiki/Welcome )。](http://opencv.willowgarage.com/wiki/Welcome)

然而，当我去调试项目时，我得到了 600 多个错误，其中大部分是：

> 错误 LNK2026：模块对 SAFESEH 图像不安全。

显然这些文件在 opencv_ffmpeg 项目中，但我找不到它们，我查看了 Microsoft 帮助页面上的 safeseh 安全异常处理程序页面，但我找不到任何明确的答案。

我想知道是否有其他人遇到过这个问题，以及他们是否设法解决了这个问题。

* * *

## 回答 #1

> 赞同：153
> 
> 时间：2013-11-03T16:36:08.377

在项目属性-> 配置属性-> 链接器-> 高级选项卡中禁用选项“图像具有安全异常处理程序”对我有帮助。

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2012-10-19T18:51:16.020

从评论：

> 当您链接包含由早期版本的编译器创建的代码的 .obj 或 .lib 时，会发生这种情况。如果您下载了 opencv_ffmpeg 的二进制文件而不是源代码，这当然很常见。您可以关闭链接器选项，但您仍然会遇到可以字节的 CRT 版本不兼容性。从源代码重建库。– Hans Passant 5 月 15 日 13:01  
>  
> 感谢您的帮助，它奏效了 – Aaron Thompson 5 月 17 日 14:50

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2017-11-27T10:03:34.690

如果您在 Visual Studio 中构建 ZLIB 时遇到此错误，这里是解决方案。查找`contrib\masmx86\bld_ml32.bat`并添加`/safeseh`为选项

**前**

```
ml /coff /Zi /c /Flmatch686.lst match686.asm
ml /coff /Zi /c /Flinffas32.lst inffas32.asm 
```

**后**

```
ml /safeseh /coff /Zi /c /Flmatch686.lst match686.asm
ml /safeseh /coff /Zi /c /Flinffas32.lst inffas32.asm 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-09-10T16:48:43.120

另一种方法是在 asm 文件中添加一些 SEH 处理程序（例如为空）并使用`/safeseh`选项编译它们，然后使用编译器选项正常编译其他代码`/SAFESEH:YES`。

空 SEH 处理程序：

```
.safeseh SEH_handler

SEH_handler   proc
;handler
ret

SEH_handler   endp 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-15T18:38:06.340

您的里程可能会有所不同，但上述建议都不适合我（尽管我没有尝试滚动我自己的 asm 异常处理程序）。

起作用的是选择构建目标 Release/x64。

我在 64 位机器上运行 Windows 10，并使用 Visual Studio 2015。

目标 Release/Win32 也可以。我想主要是选择“发布”。

# python - 在 Python 和 matplotlib 中的 3D 散点图中的两点之间绘制矩形或条形

> ID：10599942
> 
> 赞同：4
> 
> 时间：2012-05-15T11:41:16.417
> 
> 标签：python, matplotlib, mplot3d

我有一个 3D 散点图，它在其中一个平面上为每个日期绘制 2 个点。我问[过如何在每对点之间画一条线](https://stackoverflow.com/questions/10572939/connecting-two-points-in-a-3d-scatter-plot-in-python-and-matplotlib)，并收到了我很感激的答案。我现在想要的是绘制一个 BAR 或 RECTANGLE 来连接点，而不仅仅是一条线。

[这](https://stackoverflow.com/questions/10572939/connecting-two-points-in-a-3d-scatter-plot-in-python-and-matplotlib)是该图目前的样子，但我希望它看起来有点像[matplolib 文档中的 3D 条形演示中](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#bar-plots)的图，除了条形“浮动”而不是锚定到轴上。

我尝试过使用`Axes3D.bar`（如 matplotlib 页面上所述），但它希望我为每个条形提供一个“高度”而不是两个实际坐标，并且该高度将锚定到轴上。

这是代码，任何帮助表示赞赏。

```
import matplotlib.pyplot
from mpl_toolkits.mplot3d import Axes3D

dates       = [20020514, 20020515, 20020516, 20020517, 20020520]
highs       = [1135, 1158, 1152, 1158, 1163]
lows        = [1257, 1253, 1259, 1264, 1252]
upperLimits = [1125.0, 1125.0, 1093.75, 1125.0, 1125.0]
lowerLimits = [1250.0, 1250.0, 1156.25, 1250.0, 1250.0]

zaxisvalues0= [0, 0, 0, 0, 0]
zaxisvalues1= [1, 1, 1, 1, 1]
zaxisvalues2= [2, 2, 2, 2, 2]

fig = matplotlib.pyplot.figure()
ax  = fig.add_subplot(111, projection = '3d')

ax.plot(dates, zaxisvalues1, lowerLimits, color = 'b')
ax.plot(dates, zaxisvalues2, upperLimits, color = 'r')

for i,j,k,h in zip(dates,zaxisvalues0,lows,highs):
    ax.plot([i,i],[j,j],[k,h],color = 'g')

ax.scatter(dates, zaxisvalues0, highs, color = 'g', marker = "o")
ax.scatter(dates, zaxisvalues0, lows, color = 'y', marker = "^")

matplotlib.pyplot.show() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T14:23:24.980

我认为使用 PolyCollection 会更容易。这接近你所追求的吗？

![在此处输入图像描述](../Images/cd773e9e9f5a35d4083aec0f712df6d9.png)

```
import matplotlib.pyplot
from mpl_toolkits.mplot3d import Axes3D
from matplotlib.collections import PolyCollection
import random

dates       = [20020514, 20020515, 20020516, 20020517, 20020520]
highs       = [1135, 1158, 1152, 1158, 1163]
lows        = [1257, 1253, 1259, 1264, 1252]
upperLimits = [1125.0, 1125.0, 1093.75, 1125.0, 1125.0]
lowerLimits = [1250.0, 1250.0, 1156.25, 1250.0, 1250.0]

zaxisvalues0= [0, 0, 0, 0, 0]
zaxisvalues1= [1, 1, 1, 1, 1]
zaxisvalues2= [2, 2, 2, 2, 2]

fig = matplotlib.pyplot.figure()
ax  = fig.add_subplot(111, projection = '3d')

ax.plot(dates, zaxisvalues1, lowerLimits, color = 'b')
ax.plot(dates, zaxisvalues2, upperLimits, color = 'r')

verts = []; fcs = []
for i in range(len(dates)-1):
   xs = [dates[i],dates[i+1],dates[i+1],dates[i],dates[i]] # each box has 4 vertices, give it 5 to close it, these are the x coordinates
   ys = [highs[i],highs[i+1],lows[i+1],lows[i], highs[i]]  # each box has 4 vertices, give it 5 to close it, these are the y coordinates
   verts.append(zip(xs,ys))
   fcs.append((random.random(),random.random(),random.random(),0.6))

poly = PolyCollection(verts, facecolors = fcs, closed = False)
ax.add_collection3d(poly, zs=[zaxisvalues0[0]] * len(verts), zdir='y') # in the "z" just use the same coordinate

ax.scatter(dates, zaxisvalues0, highs, color = 'g', marker = "o")
ax.scatter(dates, zaxisvalues0, lows, color = 'y', marker = "^")

matplotlib.pyplot.show() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-15T12:44:23.223

您应该能够混合使用：

[matplolib 文档中的 3D 条形演示](http://matplotlib.sourceforge.net/mpl_toolkits/mplot3d/tutorial.html#bar-plots)

和

[条形堆叠示例](http://matplotlib.sourceforge.net/examples/pylab_examples/bar_stacked.html)

即在 3D 图形中绘制条形图，但使用“底部”参数设置条形图的起始高度。

亚历克西斯

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T10:58:13.693

感谢您的帮助亚历克西斯和马克。我想现在已经解决了。

我使用了 Alexis 的提示来使用 'zdir' 属性。

> 至于错误的平面问题，你可以用参数 zdir 来修复它，例如 ax.bar(dates, highs,zdir='y',bottom=highs, zs=0, color = 'b') – Alexis

起初，它生成的柱线高度是应有的两倍，因为它是从底部测量的（即“低点”值），然后向其添加一个高度（从“高点”值开始）。

所以我最终引入了一个新的列表，“位移”，它测量每个高点和每个低点之间的距离（在这个过程中我发现我的低点和高点交换了。呃，对不起）。所以现在我正在绘制“位移”而不是高点。

我在 Alexis 的行中添加了宽度、对齐方式、edgecolor 和 alpha（用于透明度）；然后加厚了 ax.scatter 图的标记。现在代码可以工作了（嗯，几乎，除了第 4 条上的箭头高于它应该是......嗯）

```
import matplotlib.pyplot
from mpl_toolkits.mplot3d import Axes3D

dates       = [20020514, 20020515, 20020516, 20020517, 20020520]
lows        = [1135, 1158, 1152, 1158, 1163]
highs       = [1257, 1253, 1259, 1264, 1252]
upperLimits = [1125.0, 1125.0, 1093.75, 1125.0, 1125.0]
lowerLimits = [1250.0, 1250.0, 1156.25, 1250.0, 1250.0]

zaxisvalues0= [0, 0, 0, 0, 0]
zaxisvalues1= [1, 1, 1, 1, 1]
zaxisvalues2= [2, 2, 2, 2, 2]

fig = matplotlib.pyplot.figure()
ax  = fig.add_subplot(111, projection = '3d')

ax.plot(dates, zaxisvalues1, lowerLimits, color = 'b')
ax.plot(dates, zaxisvalues2, upperLimits, color = 'r')

ax.scatter(dates, zaxisvalues0, highs, color = 'g', marker = "^", linewidth=4)
ax.scatter(dates, zaxisvalues0, lows,  color = 'y', marker = "o", linewidth=4)

displacements = []
for i in lows:
    position = lows.index(i)
    disp = highs[position] - i
    displacements.append(disp)

ax.bar(dates, displacements, zdir='y', bottom=lows, zs=0, width=0.2, align='center', alpha=0.6, edgecolor='k')

matplotlib.pyplot.show() 
```

这是结果：

![阴谋](../Images/2411aa4f73e7d88af4070588587d9252.png)

# css - CSS-border 不与图像对齐

> ID：10599950
> 
> 赞同：0
> 
> 时间：2012-05-15T11:41:44.547
> 
> 标签：css, image, border, css-float

我是 css 新手，在 code academy 等网站上做过几次练习，但现在正在尝试自己的页面，缺乏很多实践经验。

我知道您可以使用“浮动”将文本环绕在图像周围，但我想将文本保持在直线和边框中。但是，边框和背景会忽略图像的位置并在其后面运行。用图像定位段落和边框的最佳方法是什么，以便边框停止在图像上？这些是与此相关的部分：

```
img { 
    margin:5px; 
    float:right; } 
p   { 
    background:white; 
    margin-left:40px; 
    margin-bottom:0px; 
    margin-right:0px; 
    font-family:veranda; 
    border:2px solid #045FB4; 
    padding:5px; } 
```

p 和 img 标签在正文部分示例中没有样式：http: [//jimbob.webatu.com/](http://jimbob.webatu.com/)
任何其他定位技巧将不胜感激：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:36:22.053

不确定您在提到边框时的意思，但为了使文本正确对齐图像，请使用：

```
p {
    text-align: justify;
} 
```

# jquery - 对于给定的浏览器，我如何确定哪些元素支持哪些事件？

> ID：10599951
> 
> 赞同：0
> 
> 时间：2012-05-15T11:41:55.920
> 
> 标签：jquery, dom, dom-events

我试图弄清楚为什么我的 onblur 和 onfocus 不能在 Chrome 中处理 TD。经过一些研究和实验，我发现来自不同网络资源的信息相互冲突，似乎 TD 不支持 onblur 和 onfocus。

因此，一般来说，为了节省时间和麻烦，最好在给定的浏览器上确定支持哪些（元素，事件）对。有没有方便列出的地方？

我可以自己做实验，但如果事件没有触发，谁知道呢，它可能因为其他未知原因而没有触发，而不是因为它不受元素支持。

使用 jQuery 会让这更容易吗？我注意到即使 jQuery 文档也没有说明支持哪些元素：http: [//api.jquery.com/blur/](http://api.jquery.com/blur/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T08:51:03.270

好吧，正如您在[DOM Events](http://www.w3.org/TR/DOM-Level-3-Events/#event-types)的“DOM3 事件类型列表”部分中看到的那样，所有`Element`s 都支持 blur 事件。与焦点相关的事件的问题是某些元素默认情况下是不可聚焦的，即您无法使用`Tab`键导航到它们。实际上，默认情况下只有少数元素（主要是输入元素）是可聚焦的。

那么，我们可以改变这个默认行为吗？是的，我们可以`tabIndex`在我们拥有焦点的元素上使用属性。你可以在这里找到我的示例 HTML 页面：http: [//martianboy.handcraft.com/focusEvents](http://martianboy.handcraft.com/focusEvents)

所有`td`元素都可以在那里聚焦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:47:24.997

你可以在这里查看：[事件兼容性](http://quirksmode.org/dom/events/)

W3 也有关于这些事件的详细文档。可以参考[DOM 事件](http://www.w3.org/TR/DOM-Level-3-Events/#event-types)

# java - 这个 JAX-WS 客户端调用线程安全吗？

> ID：10599959
> 
> 赞同：33
> 
> 时间：2012-05-15T11:42:09.697
> 
> 标签：java, jax-ws, webservice-client, java-metro-framework

由于 WS 客户端服务和端口的初始化需要很长时间，我喜欢在启动时初始化它们一次并重用相同的端口实例。初始化看起来像这样：

```
private static RequestContext requestContext = null;

static
{
    MyService service = new MyService(); 
    MyPort myPort = service.getMyServicePort(); 

    Map<String, Object> requestContextMap = ((BindingProvider) myPort).getRequestContext();
    requestContextMap = ((BindingProvider)myPort).getRequestContext(); 
    requestContextMap.put(BindingProvider.USERNAME_PROPERTY, uName); 
    requestContextMap.put(BindingProvider.PASSWORD_PROPERTY, pWord); 

    rc = new RequestContext();
    rc.setApplication("test");
    rc.setUserId("test");
} 
```

我班上某处的电话：

```
myPort.someFunctionCall(requestContext, "someValue"); 
```

我的问题：这个调用是线程安全的吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-15T13:35:47.297

根据[CXF 常见问题解答](http://cxf.apache.org/faq.html#FAQ%2DAreJAX%2DWSclientproxiesthreadsafe%3F)：

> **JAX-WS 客户端代理线程安全吗？**
> 
> **官方 JAX-WS 回答：**不。根据 JAX-WS 规范，客户端代理不是线程安全的。要编写可移植代码，您应该将它们视为非线程安全的并同步访问或使用实例池或类似的。
> 
> **CXF 回答：** CXF 代理对于许多用例来说都是线程安全的。例外情况是：
> 
> *   使用`((BindingProvider)proxy).getRequestContext()`- 根据 JAX-WS 规范，请求上下文是 PER INSTANCE。因此，在那里设置的任何内容都会影响其他线程上的请求。使用 CXF，您可以：
>     
>     
>     
>     ```
>     ((BindingProvider)proxy).getRequestContext().put("thread.local.request.context","true"); 
>     ```
>     
>     
>     
>     并且将来对 getRequestContext() 的调用将使用线程本地请求上下文。这允许请求上下文是线程安全的。（注意：响应上下文在 CXF 中始终是线程本地的）
>     
>     
> *   管道上的设置 - 如果您使用代码或配置直接操作管道（例如设置 TLS 设置或类似设置），则这些不是线程安全的。管道是每个实例的，因此这些设置将被共享。此外，如果您使用 FailoverFeature 和 LoadBalanceFeatures，则会即时更换管道。因此，在导管上设置的设置在用于设置线程之前可能会丢失。
>     
>     
> *   会话支持 - 如果您打开会话支持（请参阅 jaxws 规范），会话 cookie 将存储在管道中。因此，它将落入上述关于管道设置的规则中，因此可以跨线程共享。
> *   WS-Security 令牌 - 如果使用 WS-SecureConversation 或 WS-Trust，检索到的令牌将缓存在端点/代理中，以避免对 STS 进行额外（且昂贵）的调用以获取令牌。因此，多个线程将共享令牌。如果每个线程都有不同的安全凭证或要求，则需要使用单独的代理实例。
> 
> 对于导管问题，您可以安装一个使用本地线程或类似线程的新 ConduitSelector。不过这有点复杂。
> 
> 对于大多数“简单”用例，您可以在多个线程上使用 CXF 代理。以上概述了其他人的解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-11T12:54:36.117

一般来说，没有。

根据 CXF FAQ [http://cxf.apache.org/faq.html#FAQ-AreJAX-WSclientproxiesthreadsafe?](http://cxf.apache.org/faq.html#FAQ-AreJAX-WSclientproxiesthreadsafe?)

> **官方 JAX-WS 回答：**不。根据 JAX-WS 规范，客户端代理不是线程安全的。要编写可移植代码，您应该将它们视为非线程安全的并同步访问或使用实例池或类似的。
> 
> **CXF 回答：** CXF 代理对于许多用例来说都是线程安全的。

有关例外列表，请参阅常见问题解答。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-17T16:30:04.987

正如您从上面的答案中看到的那样，JAX-WS 客户端代理不是线程安全的，所以我只想与其他人分享我的实现来缓存客户端代理。我实际上遇到了同样的问题，并决定创建一个 Spring bean 来缓存 JAX-WS 客户端代理。您可以查看更多详细信息[http://programtalk.com/java/using-spring-and-scheduler-to-store/](http://programtalk.com/java/using-spring-and-scheduler-to-store/)

```
import java.util.Map;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.Executors;
import java.util.concurrent.ScheduledExecutorService;
import java.util.concurrent.TimeUnit;

import javax.annotation.PostConstruct;

import org.apache.commons.lang3.concurrent.BasicThreadFactory;
import org.apache.logging.log4j.Logger;
import org.springframework.stereotype.Component;

/**
 * This keeps the cache of MAX_CUNCURRENT_THREADS number of
 * appConnections and tries to shares them equally amongst the threads. All the
 * connections are created right at the start and if an error occurs then the
 * cache is created again.
 *
 */
/*
 *
 * Are JAX-WS client proxies thread safe? <br/> According to the JAX-WS spec,
 * the client proxies are NOT thread safe. To write portable code, you should
 * treat them as non-thread safe and synchronize access or use a pool of
 * instances or similar.
 *
 */
@Component
public class AppConnectionCache {

 private static final Logger logger = org.apache.logging.log4j.LogManager.getLogger(AppConnectionCache.class);

 private final Map<Integer, MyService> connectionCache = new ConcurrentHashMap<Integer, MyService>();

 private int cachedConnectionId = 1;

 private static final int MAX_CUNCURRENT_THREADS = 20;

 private ScheduledExecutorService scheduler;

 private boolean forceRecaching = true; // first time cache

 @PostConstruct
 public void init() {
  logger.info("starting appConnectionCache");
  logger.info("start caching connections"); ;;
  BasicThreadFactory factory = new BasicThreadFactory.Builder()
    .namingPattern("appconnectioncache-scheduler-thread-%d").build();
  scheduler = Executors.newScheduledThreadPool(1, factory);

  scheduler.scheduleAtFixedRate(new Runnable() {
   @Override
   public void run() {
    initializeCache();
   }

  }, 0, 10, TimeUnit.MINUTES);

 }

 public void destroy() {
  scheduler.shutdownNow();
 }

 private void initializeCache() {
  if (!forceRecaching) {
   return;
  }
  try {
   loadCache();
   forceRecaching = false; // this flag is used for initializing
   logger.info("connections creation finished successfully!");
  } catch (MyAppException e) {
   logger.error("error while initializing the cache");
  }
 }

 private void loadCache() throws MyAppException {
  logger.info("create and cache appservice connections");
  for (int i = 0; i < MAX_CUNCURRENT_THREADS; i++) {
   tryConnect(i, true);
  }
 }

 public MyPort getMyPort() throws MyAppException {
  if (cachedConnectionId++ == MAX_CUNCURRENT_THREADS) {
   cachedConnectionId = 1;
  }
  return tryConnect(cachedConnectionId, forceRecaching);
 }

 private MyPort tryConnect(int threadNum, boolean forceConnect) throws MyAppException {
  boolean connect = true;
  int tryNum = 0;
  MyPort app = null;
  while (connect && !Thread.currentThread().isInterrupted()) {
   try {
    app = doConnect(threadNum, forceConnect);
    connect = false;
   } catch (Exception e) {
    tryNum = tryReconnect(tryNum, e);
   }
  }
  return app;
 }

 private int tryReconnect(int tryNum, Exception e) throws MyAppException {
  logger.warn(Thread.currentThread().getName() + " appservice service not available! : " + e);
  // try 10 times, if
  if (tryNum++ < 10) {
   try {
    logger.warn(Thread.currentThread().getName() + " wait 1 second");
    Thread.sleep(1000);
   } catch (InterruptedException f) {
    // restore interrupt
    Thread.currentThread().interrupt();
   }
  } else {
   logger.warn(" appservice could not connect, number of times tried: " + (tryNum - 1));
   this.forceRecaching = true;
   throw new MyAppException(e);
  }
  logger.info(" try reconnect number: " + tryNum);
  return tryNum;
 }

 private MyPort doConnect(int threadNum, boolean forceConnect) throws InterruptedException {
  MyService service = connectionCache.get(threadNum);
  if (service == null || forceConnect) {
   logger.info("app service connects : " + (threadNum + 1) );
   service = new MyService();
   connectionCache.put(threadNum, service);
   logger.info("connect done for " + (threadNum + 1));
  }
  return service.getAppPort();
 }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-02-15T14:13:17.010

对此的一般解决方案是在池中使用多个客户端对象，然后使用充当外观的代理。

```
import org.apache.commons.pool2.BasePooledObjectFactory;
import org.apache.commons.pool2.PooledObject;
import org.apache.commons.pool2.impl.DefaultPooledObject;
import org.apache.commons.pool2.impl.GenericObjectPool;

import java.lang.reflect.InvocationHandler;
import java.lang.reflect.Method;
import java.lang.reflect.Proxy;

class ServiceObjectPool<T> extends GenericObjectPool<T> {
        public ServiceObjectPool(java.util.function.Supplier<T> factory) {
            super(new BasePooledObjectFactory<T>() {
                @Override
                public T create() throws Exception {
                    return factory.get();
                }
            @Override
            public PooledObject<T> wrap(T obj) {
                return new DefaultPooledObject<>(obj);
            }
        });
    }

    public static class PooledServiceProxy<T> implements InvocationHandler {
        private ServiceObjectPool<T> pool;

        public PooledServiceProxy(ServiceObjectPool<T> pool) {
            this.pool = pool;
        }

        @Override
        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
            T t = null;
            try {
                t = this.pool.borrowObject();
                return method.invoke(t, args);
            } finally {
                if (t != null)
                    this.pool.returnObject(t);
            }
        }
    }

    @SuppressWarnings("unchecked")
    public T getProxy(Class<? super T> interfaceType) {
        PooledServiceProxy<T> handler = new PooledServiceProxy<>(this);
        return (T) Proxy.newProxyInstance(interfaceType.getClassLoader(),
                                          new Class<?>[]{interfaceType}, handler);
    }
} 
```

要使用代理：

```
ServiceObjectPool<SomeNonThreadSafeService> servicePool = new ServiceObjectPool<>(createSomeNonThreadSafeService);
nowSafeService = servicePool .getProxy(SomeNonThreadSafeService.class); 
```

# vb.net - 从选定行中选择单个单元格数据 - DataGridView

> ID：10599960
> 
> 赞同：3
> 
> 时间：2012-05-15T11:42:11.730
> 
> 标签：vb.net

我有一个包含数据的datagridview，我已经设置了它，所以你一次只能选择一行和一个。

但是，我需要从所选行中的一个单元格中获取数据，我已经尝试过了；

```
Dim data As String = DataGridView1.SelectedRows.Cells(5).toString 
```

类似的东西，但我无法获得它的价值，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T12:13:30.957

也许正确的语法是：

```
Dim data As String = DataGridView1.SelectedRows(0).Cells(5).Value.ToString 
```

请参阅[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.value)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-05T12:34:14.723

```
Dim data As String = YourDataGrid.Item("YourColumnHere", YourDataGrid.CurrentRow.Index).Value 
```

希望这有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-15T11:47:55.840

SelectedRows 需要一个索引参数。如果您将其设置为仅选择一行，则它将始终为 0。尝试将该行更改为：

```
Dim data As String = DataGridView1.SelectedRows(0).Cells(5).Value.toString() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-02T15:06:51.897

'希望这段代码也是另一种方式............ DataGridView1.SelectedRows(DataGridView1.CurrentRow.Index).Cells(5).Value.ToString()

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-13T19:23:16.890

如果在与 datagridview 相关的事件中使用此调用，而不是使用序号来标识您选择的行，则应该有一个值传递给名为“e”的事件，它是事件参数的结构。如果 e.RowIndex 对该 eventarg 结构有效，则可以将其用作所选行的值：

> 将 strCellValue 调暗为字符串 = DataGridView1.Rows(e.RowIndex).Cells(6).Value

您还可以从该参数中获取 e.ColumnIndex 。

# c# - 对齐控件以在 FlowLayout 中居中

> ID：10599961
> 
> 赞同：21
> 
> 时间：2012-05-15T11:42:13.337
> 
> 标签：c#, .net, winforms

我有一个流程布局如下：

![在此处输入图像描述](../Images/230d92970904676c84085a8baf092808.png)

我需要将表单上的所有控件居中（换句话说，假设表单的宽度为 200。btnOpt1 到 btnOpt4 的`Left`起点应该是 100 减去按钮宽度的一半，**而不是 0。**）

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-15T15:15:30.790

您可以通过两种方式做到这一点，但每种方式都有一些限制。

1.  使用`Anchor`属性
2.  `Docking`在和`Anchor`属性的帮助下使用布局控件。

**方法一：锚属性**

> 控件默认锚定在表单的左上角，这意味着当表单大小发生变化时，它们与表单左上角的距离将保持不变。如果将控件锚点更改为左下角，则在调整窗体大小时，控件将与窗体的底部和左侧保持相同的距离。
> 
> 关闭某个方向的锚点将使控件在调整大小时保持在该方向的中心。

例子 ：

```
public TestForm12()
{
   InitializeComponent();

   Button btn = new Button();
   btn.Width = this.Width - 10;
   btn.Height = 20;
   btn.Left = (this.ClientSize.Width - btn.Width) / 2;
   btn.Top = (this.ClientSize.Height - btn.Height) / 2;
   btn.Text = "click me";
   this.Controls.Add(btn);
   btn.Anchor = AnchorStyles.None;               

} 
```

**2.使用布局控件**

1.  添加 TableLayout 控件，将其 Dock 属性设置为 Fill。
2.  添加 1 行大小类型样式百分比 100%
3.  添加 3 列 Column1（大小类型 - 百分比（100%）），Column2（大小类型 - 绝对（200px）），Column3（大小类型 - 百分比（100%））。
4.  现在将面板控件添加到 Column2 并将其 Dock 属性设置为 Fill
5.  将按钮添加到此控件并根据需要设置它们的大小并将它们的锚属性设置为 AnchorStyles.Left | AnchorStyles.Right | AnchorStyles.Top

示例 - 表单的 Designer.cs 代码片段。

```
private void InitializeComponent()
 {
     this.tableLayoutPanel1 = new System.Windows.Forms.TableLayoutPanel();
     this.panel1 = new System.Windows.Forms.Panel();
     this.button1 = new System.Windows.Forms.Button();
     this.button2 = new System.Windows.Forms.Button();
     this.tableLayoutPanel1.SuspendLayout();
     this.panel1.SuspendLayout();
     this.SuspendLayout();
     // 
     // tableLayoutPanel1
     // 
     this.tableLayoutPanel1.ColumnCount = 3;
     this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 50F));
     this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Absolute, 200F));
     this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 50F));
      this.tableLayoutPanel1.Controls.Add(this.panel1, 1, 0);
      this.tableLayoutPanel1.Dock = System.Windows.Forms.DockStyle.Fill;
      this.tableLayoutPanel1.Location = new System.Drawing.Point(0, 0);
      this.tableLayoutPanel1.Name = "tableLayoutPanel1";
      this.tableLayoutPanel1.RowCount = 1;
      this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 100F));
      this.tableLayoutPanel1.Size = new System.Drawing.Size(284, 262);
      this.tableLayoutPanel1.TabIndex = 0;
      // 
      // panel1
      // 
      this.panel1.Controls.Add(this.button2);
      this.panel1.Controls.Add(this.button1);
      this.panel1.Dock = System.Windows.Forms.DockStyle.Fill;
      this.panel1.Location = new System.Drawing.Point(45, 3);
      this.panel1.Name = "panel1";
      this.panel1.Size = new System.Drawing.Size(194, 256);
      this.panel1.TabIndex = 0;
      // 
      // button1
      // 
      this.button1.Anchor = ((System.Windows.Forms.AnchorStyles)(((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Left) 
    | System.Windows.Forms.AnchorStyles.Right)));
    this.button1.Location = new System.Drawing.Point(3, 9);
    this.button1.Name = "button1";
    this.button1.Size = new System.Drawing.Size(188, 23);
    this.button1.TabIndex = 0;
    this.button1.Text = "button1";
    this.button1.UseVisualStyleBackColor = true;
    // 
    // button2
    // 
    this.button2.Anchor = ((System.Windows.Forms.AnchorStyles)(((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Left) 
    | System.Windows.Forms.AnchorStyles.Right)));
    this.button2.Location = new System.Drawing.Point(3, 38);
    this.button2.Name = "button2";
    this.button2.Size = new System.Drawing.Size(188, 23);
    this.button2.TabIndex = 0;
    this.button2.Text = "button1";
    this.button2.UseVisualStyleBackColor = true;
    // 
    // TestForm11
    // 
    this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
    this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
    this.ClientSize = new System.Drawing.Size(284, 262);
    this.Controls.Add(this.tableLayoutPanel1);
    this.Name = "TestForm11";
    this.Text = "TestForm11";
    this.tableLayoutPanel1.ResumeLayout(false);
    this.panel1.ResumeLayout(false);
    this.ResumeLayout(false);

}

 #endregion

private System.Windows.Forms.TableLayoutPanel tableLayoutPanel1;
private System.Windows.Forms.Panel panel1;
private System.Windows.Forms.Button button2;
private System.Windows.Forms.Button button1; 
```

希望这有帮助..

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-15T11:59:41.487

我会用[TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)代替：

*   将 TableLayoutPanel 放在您的表单上
*   将停靠样式设置`Fill`为面板
*   在面板内只保留一列
*   为每个按钮创建行（并将按钮放入表格单元格）
*   设置行大小类型`Autosize`
*   为每个按钮设置停靠样式`Fill`，除了最后一个
*   将停靠样式设置`Top`为最后一个按钮

顺便说一句，在您的解决方案中，您应该迭代 flowLayoutPanel 控件而不是表单控件。还要考虑从宽度中减去水平边距和填充：

```
foreach (Control control in flowLayoutPanel.Controls)
{
    control.Size = new Size(flowLayoutPanel.Width - control.Margin.Horizontal,
                            control.Height); 
} 
```

但我建议您改用 TableLayoutPanel。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-28T20:45:13.403

我通过更改边距值解决了这个问题。我正在将我的内容添加到面板中。

**C＃：**

```
int horizontalMargin = (int)(0.5 * (this.containingPanelOrForm.Width - this.button.Width));
this.btnOptX.Margin = new Padding(horizontalMargin, 0, horizontalMargin, 0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-16T14:10:29.320

我不擅长 C#，但您也可以在 flowlayoutpanel 中添加一个与 flowlayoutpanel 宽度相同的面板。然后您可以在运行时创建的面板中添加您想要的按钮并将停靠栏设置为向左或向右。如你所愿。让我在 VB.net 和 C# 中展示一个示例（使用在线转换）

**VB.net**

```
 Dim btn As New Button
            btn.Text = "Example"
            btn.Name = "Button"
            btn.Size = New Size(60,10)
            Dim panel As New Panel
            panel.Size = New Size(FlowLayoutPanel1.Width, 10) 'size of the flowlayoutpanel + height of button
            btn.Dock = DockStyle.Right
            FlowLayoutPanel1.Controls.Add(panel)
panel.controls.add(btn) 
```

**C＃**

```
Button btn = new Button();
btn.Text = "Example";
btn.Name = "Button";
btn.Size = new Size(60, 10);
Panel panel = new Panel();
panel.Size = new Size(FlowLayoutPanel1.Width, 10);
//size of the flowlayoutpanel + height of button
btn.Dock = DockStyle.Right;
FlowLayoutPanel1.Controls.Add(panel);
panel.controls.@add(btn); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T12:39:55.637

或者您可以改用网格布局。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-06T04:59:38.237

创建 Name = lblEmpty 和 AutoSize = False 的空标签。将此控件首先放在 FlowLayoutPanel1 中的控件列表中，然后在下面添加代码。

示例：假设 FlowLayoutPanel1 中存在三个标签，则结果应依次为 lblEmpty、LabelExisting1 和 LabelExisting2。

```
Dim MarginLabelEmpty As Integer = ((FlowLayoutPanel1.Width - (LabelExisting1.Width + LabelExisting2.Width)) / 2)
        lblEmpty.Width = MarginLabelEmpty 
```

我通过创建此代码解决了我的问题。

在您使用按钮控件的情况下，使用**.Text=""**（**空）创建****4 个**新标签，并将每个标签放在每个按钮的开头，**命名标签**如下：lblEmpty1、lblEmpty2、lblEmpty3、lblEmpty4。

 ******然后添加以下代码：

```
Dim MarginLeftbtnOptAll As Integer = ((FlowLayoutPanel1.Width - btnOpt1.Width) / 2)
        lblEmpty1.AutoSize = False
        lblEmpty1.Width = MarginLeftbtnOptAll
        lblEmpty2.AutoSize = False
        lblEmpty2.Width = MarginLeftbtnOptAll
        lblEmpty3.AutoSize = False
        lblEmpty3.Width = MarginLeftbtnOptAll
        lblEmpty4.AutoSize = False
        lblEmpty4.Width = MarginLeftbtnOptAll 
```

这个中心按钮，根据FlowLayoutPanel1的宽度增加空标签的宽度

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-10-09T12:17:39.577

将按钮直接扔到表单或面板（不是 FlowLayoutPanel），并`Anchor = Top`为所有按钮设置（仅顶部），它们不会居中，但在调整大小时将始终与表单（或容器）的边成比例地移动。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-01-25T09:43:03.490

```
Private Sub FlowLayoutPanel1_SizeChanged(sender As Object, e As EventArgs)` Handles FlowLayoutPanel1.SizeChanged

        Dim TotalWidth As Integer = FlowLayoutPanel1.Controls.Count * button.Width
        Dim LeftPadding As Integer = (FlowLayoutPanel1.Width - TotalWidth) / 2
        Dim GapPadding As Integer = FlowLayoutPanel1.Controls.Count * 5

        If TotalWidth <= FlowLayoutPanel1.Width Then
            FlowLayoutPanel1.Padding = New Padding(LeftPadding - GapPadding, 0, 0, 0)
        End If

End Sub 
```******

# php - PHP 中的 SVN 提交

> ID：10599964
> 
> 赞同：-2
> 
> 时间：2012-05-15T11:42:19.380
> 
> 标签：php, svn

我有一个生成一些密钥的脚本。这个脚本必须在 svn-server 上提交它们。它们不一样。你能帮我出个主意吗？

我想到了 svn php lib 和 system / exec，但不知道如何与 svn-server 连接并在那里保存文件。

PS更多关于问题。这是不可能的。我们的生产服务器从 SVN 存储库部署，有时会为帐户生成文档。我们需要将它们保存在我们的存储库中，该存储库已从生产中关闭以供编写。所以我们用另一种方式。很抱歉让您失望了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:47:24.717

编辑：在开始之前，请检查存储库的新副本。SVN 会记住服务器并自动将所有提交的内容保存在那里。

```
$ svn co svn-server/path/to/repo /path/to/working/copy 
```

您可以使用 svn 客户端和 exec() 方法提交特定路径中的所有文件，并带有特定的提交消息。只要 PHP 的颠覆绑定不稳定，我就会使用它：

```
<?php
  /* To commit all files in /path/to/working/copy */
  $message="'This is my commit message'";
  $command = "svn ci -q -m $message /path/to/working/copy";

  exec($path); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:49:44.840

SVN lib 非常简单。首先，设置用户名和密码

```
svn_auth_set_parameter(SVN_AUTH_PARAM_DEFAULT_USERNAME, 'username');
svn_auth_set_parameter(SVN_AUTH_PARAM_DEFAULT_PASSWORD, 'password');
svn_update(realpath('working-copy'));
//TODO: change files in working copy
var_dump(svn_commit('Changelog', array(realpath('working-copy')))); 
```

如果您没有工作副本使用`svn_checkout`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:45:07.087

[在 PHP 中](http://www.php.net/manual/en/ref.svn.php)查看以下SVN 函数

[svn_commit](http://php.net/manual/en/function.svn-commit.php)就是其中之一...

**笔记**

> 此功能是实验性的。在 PHP 的未来版本中，此函数的行为、其名称和相关文档可能会更改，恕不另行通知。使用此功能应由您自担风险。

# umbraco - Umbraco 数据插入

> ID：10599974
> 
> 赞同：0
> 
> 时间：2012-05-15T11:42:49.763
> 
> 标签：umbraco, umbraco5

我正在从事 Umbraco CMS 5 项目。我有两个问题：

1.  如何为现有视图添加控制器？

2.  数据可以插入 Umbraco 数据库吗？例如，如果有人在网页中提交他/她的信息，则数据将保存在 Umbraco 数据库（Umbraco.sdf）中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T06:44:22.133

1.  1.  在项目的控制器文件夹中创建一个控制器。
    2.  在该控制器中创建一个返回类型为 ActionResult 的操作方法。
    3.  在该操作方法中进行操作，然后返回视图路径 `return View("~/Views/Umbraco/Your view name.cshtml");`
2.  您可以在 umbraco.sdf 中使用您需要的列创建自己的自定义表，并且可以使用 Sql 或 linq（如果您创建实体）提交您的信息。

# java - 使用 Web 服务在 Java 中调用 C#.Net 函数

> ID：10599977
> 
> 赞同：2
> 
> 时间：2012-05-15T11:42:55.337
> 
> 标签：java, android, asp.net, web-services, c#-4.0

伙计们，我在这里有一个情况..

我使用 C# .Net 框架 4.0 开发了一个网站，我的好友正在为它开发一个 Android 应用程序（它使用 Java 语言）。

问题是。

1.  如何从 Java 语言调用用 C# 语言创建的函数？
2.  如果可能，这样做的先决条件是什么？

期待各位大佬提供有价值的解决方案，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T11:50:38.350

从开发的 C# 网站公开 WCF 方法或 Webservice 方法，然后从您的 Java 开发中通过 SOAP 调用它们。

谷歌：[http ://www.google.co.za/search?ix=sea&sourceid=chrome&ie=UTF-8&q=java+call+.net+WCF](http://www.google.co.za/search?ix=sea&sourceid=chrome&ie=UTF-8&q=java+call+.net+WCF)

这应该给你一个好的开始。

# windows-8 - 您的开发人员许可证已过期 (Windows 8)

> ID：10599978
> 
> 赞同：6
> 
> 时间：2012-05-15T11:43:00.850
> 
> 标签：windows-8

我的临时开发人员许可证（使用 Visual Studio 2011 Beta 和 Windows 8 Consumer Preview）已过期，弹出窗口要求我申请新许可证。这一切似乎都有效，但是当我构建并部署到本地计算机时，它会将我带到应用商店并告诉我开发人员许可证已过期。

我试过了：

*   从主屏幕卸载我的应用程序
*   清理我的项目解决方案
*   使用 powershell 命令 Unregister-WindowsDeveloperLicense 删除我的开发人员许可证并再次获得新许可证
*   重启机器

我可以创建可以很好地构建和部署的新项目，但是我现有的项目已经塞满了。旧许可证是否缓存在某个地方，我怎样才能让它忘记它。

[MSDN 上](http://msdn.microsoft.com/en-us/library/windows/apps/hh696646%28v=vs.110%29.aspx)有类似的问题。有人设法解决了它，但那里的解决方案对我不起作用，还有其他人说它对他们不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-15T13:50:26.633

第一个月这发生在我身上，重启解决了它。第二次没有。我进入了我的包清单并更改了包 ID。它看起来像一个 GUID，我只是把 kmg 放在最后。然后一切正常。后来我尝试改回来，但又失败了，所以我猜我的包裹 ID 现在以 kmg 结尾:-)

我相信这是因为您试图覆盖由“不同开发人员”提供的软件包。他们将不得不以某种方式解决这个问题，但是嘿，这就是 beta ^H^H^H^H^H 预览的用途，对吧？

# assembly - Windows 7 上的 Masm

> ID：10599979
> 
> 赞同：3
> 
> 时间：2012-05-15T11:43:03.830
> 
> 标签：assembly, windows-7, x86, masm

我想在 Windows 7 上编译和执行程序集文件。在学校里，他们使用 DOS，我们可以在其中运行 MASM 来编译和链接并执行键入的 .asm 文件。

有没有办法在 Windows 7 上对这些 .asm 文件做同样的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-15T12:07:17.447

在那里安装`XP Mode`或`DosBox`运行 MASM 和您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T11:56:28.343

你可以使用 MASM32，从[这里](http://www.masm32.com/)下载 SDK ，还有一个很好的 win32 ASM 教程在

[http://win32assembly.online.fr/tutorials.html](http://win32assembly.online.fr/tutorials.html)

替代方案是 Microsoft MASM，但我没有尝试在 Windows 上使用它，这是链接

[http://www.microsoft.com/en-us/download/details.aspx?id=12654](http://www.microsoft.com/en-us/download/details.aspx?id=12654)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-31T17:09:13.887

如果您只想要 Windows 7 的 masm，请在此处获取：

[http://www.microsoft.com/en-us/download/details.aspx?id=12654](http://www.microsoft.com/en-us/download/details.aspx?id=12654)

您可能还需要安装这个：

[http://www.microsoft.com/en-us/download/details.aspx?id=5555](http://www.microsoft.com/en-us/download/details.aspx?id=5555)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T10:16:59.880

您使用的是哪个版本的 MASM？如果您只是从命令行启动它们，最新版本的 MASM (`ml.exe`和) 可以正常工作（即)。据我记得，有编译为 32 位和 64 位版本的 MASM 可执行文件。`ml64.exe``cmd.exe`

# c# - 如何在 XNA 中使用 StreamReader

> ID：10599981
> 
> 赞同：1
> 
> 时间：2012-05-15T11:43:07.200
> 
> 标签：c#, xna, streamreader

我对 StreamReader 有一些问题。首先，下面是我的简单代码：

```
using (StreamReader reader = new StreamReader("Content/Levels/" + mapName + ".txt"))
{
    for (int i = 0; i < 20; i++)
        for (int j = 0; j < 36; j++)
        {
            string[] objLoc = reader.ReadLine().Split(',');
            map[i, j] = Convert.ToInt32(objLoc[j]);
        }
} 
```

所以，我有一个包含行和列的文本文件，就像一个数组一样。每个位置都有一个整数。这些整数由**,**字符分隔。

我想从文本文件中的位置读取每个字符，然后将其转换为实际整数并将其添加到单独的数组中。在我向您展示的代码之后，我将从该数组中读取以构建地图。

作为 C# 和编程的新手，我假设我的代码实际上是使用该 Split 方法从一行中读取每个位置，然后我使用 read char 将其插入到 map 数组中。

我做对了吗？目前，我遇到了一个例外：

**NullReferenceException 未处理**：对象引用未设置为对象的实例。

我也阅读了 MS 的文档。偶然发现了许多类似的问题，但没有一个能解决我的问题。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T11:59:00.647

您正在内部循环中读取一个全新的行，这意味着您很快就会用完行。您需要在外部循环中读取一个新行，并在内部循环中遍历拆分的结果（单个元素）

尝试类似的东西

```
using (StreamReader reader = new StreamReader("Content/Levels/" + mapName + ".txt"))
{
  for (int i = 0; i < 20; i++) {
    string[] objLoc = reader.ReadLine().Split(',')
    for (int j = 0; j < 36; j++) {
      map[i, j] = Convert.ToInt32(objLoc[j]);
    }
  }
} 
```

*注意*：如果行不包含足够的元素或文件太短，您将需要检查错误。转换为`int`也可能失败

# java - 如何使用 java 以编程方式清除 Lotus 数据库中的所有复制选项

> ID：10599982
> 
> 赞同：1
> 
> 时间：2012-05-15T11:43:10.623
> 
> 标签：java, replication, lotus-notes

有没有一种*可行*的方法来删除 Lotus Notes 数据库中设置的所有复制选项（使用 java）？

我尝试了以下方法：

我更改了复制设置（添加公式、“高级”选项卡中的启用/禁用标志等）。

然后我调用了代码：

```
Replication replication = currentDb.getReplicationInfo();
ReplicationEntry any2AnyEntry = replication.getEntry("-", "-");
ReplicationEntry any2ThisSrvEntry = replication.getEntry("-", currentDb.getServer());
.... 
```

如果一个条目不为空，我调用`someReplicationEntry.remove();`，然后我调用`replication.save();`

但是，当我在 Notes 客户端中检查复制选项时，会发现与以前相同的设置。

如何将复制选项重置为刚刚创建的 Notes 数据库的状态？有办法吗？（尝试`replication.reset()`保存，但没有成功）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:35:51.467

不要在 remove() 之后调用 replication.save()，因为您只是再次创建文档。

此处详述的示例代码：

[http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_EXAMPLES_REMOVE_METHOD_RE_JAVA.html](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/topic/com.ibm.designer.domino.main.doc/H_EXAMPLES_REMOVE_METHOD_RE_JAVA.html)

# scala - Scala 代码作为数据

> ID：10599987
> 
> 赞同：3
> 
> 时间：2012-05-15T11:43:43.750
> 
> 标签：scala, functional-programming, eval

> **可能重复：**
> [Scala 中的“eval”](https://stackoverflow.com/questions/1183645/eval-in-scala)

Subramaniam 博士在他的演讲[http://www.youtube.com/watch?v=LH75sJAR0hc](http://www.youtube.com/watch?v=LH75sJAR0hc)在 30 分钟开始谈论 Scala 中的函数式风格时，他给出了这个例子

```
class Car {
  def turn(direction: String) = {
    println("turning " + direction)
  }
}

val car = new car
car turn "left" 
```

然后他说可以从数据文件中读取最后一行并进行评估。所以，数据变成代码，代码变成数据。

Scala 如何支持这一点？它有`eval`功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T12:23:02.007

几乎每一种语言都支持一个`eval`函数（即使是像 Haskell 这样的强静态类型语言）。许多为主要通过字节码解释实现的语言（例如类 Lisp 语言、Erlang 或 Java）构建的语言运行时支持在运行时插入新（字节）代码的能力。

*一旦可以动态插入新代码，就可以编写 eval*。

Scala 就是这种语言的一个例子，其中[JVM 在运行时可用](http://blog.darevay.com/2009/01/remedial-scala-interpreting-scala-from-scala/)。

即使在没有特定支持完整元编程甚至动态链接的语言实现中，通常也有一些方法可以在程序员的控制下动态生成代码，或者通过反射机制或代码生成支持库（例如 LLVM）。

除了简单的单阶段评估之外，更一般地说，支持多阶段计算的语言允许生成从一个阶段到下一个阶段的程序，用于任意数量的阶段，从而可以安全、任意地嵌套评估。

**背景阅读**

*   McCarthy，John，[LISP 的历史](http://www-formal.stanford.edu/jmc/history/lisp.ps)，SIGPLAN 不是。1978\. -- 介绍`eval`

# ios - 未从 UITableViewController 调用 didDeselectRowAtIndexPath 从情节提要添加到 UIViewController

> ID：10599996
> 
> 赞同：0
> 
> 时间：2012-05-15T11:44:11.677
> 
> 标签：ios, uitableview, uistoryboard

我正在使用拆分视图控制器并希望将多个表视图添加到主视图控制器。

所以我可以利用（我相信）你只能从 UITableViewController 获得的原型单元，我已将 UITableViewController 放入应用程序的第二个故事板中。然后我用以下方式证实它：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"SecondStoryboard" bundle:nil];
MyTableViewController *myTableViewController = [storyboard instantiateInitialViewController]; 
```

然后我将此 UITableViewController 的视图添加为我的 UIViewController 的子视图。

```
[self.view addSubview:myTableViewController.view]; 
```

当我运行它时，我可以很好地选择和突出显示行。但是由于某种原因没有调用 didSelectRowAtIndexPath 吗？

感谢您的帮助，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T10:03:52.117

事实证明，我还需要将 uitableviewcontroller 添加为 uiviewcontroller 的子控制器。仅仅添加视图是不够的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-15T13:09:30.637

添加这一行

`myTableViewController.view.delegate = myTableViewController;`

或确保您在 XIB(Interface Builder) 中完成了相同的操作。

# wpf - WPF MVVM 中的 IDataErrorInfo() 接口

> ID：10599998
> 
> 赞同：0
> 
> 时间：2012-05-15T11:44:15.310
> 
> 标签：wpf, validation, mvvm, idataerrorinfo

当我在 DataGrid 的行中输入错误时，我想通知验证错误。

```
<DataGridTextColumn Header="Name" Binding="{Binding Path=Name, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}"/>
<DataGridTextColumn Header="Age" Binding="{Binding Path=Age}"/>
<DataGridTextColumn Header="Date Of Birth" Binding="{Binding Path=DateOfBirth, ValidatesOnDataErrors=True, ValidatesOnExceptions=True, NotifyOnValidationError=True}"/> 
```

我使用以下属性在 ViewModel 中实现了 IDataErrorInfo。

```
public string this[string propname]
        {
            get 
            {
                switch (propname)
                {
                    case "Age":
                        int age=0;
                        if (int.TryParse("Age", out age))
                        {
                            if (age <= 0 && age > 99)
                            {
                                return "Please enter the valid Age...";
                            }
                        }
                        else
                            return "Please enter the valid Age...";

                        break;
                    case "Name":
                        if (string.IsNullOrEmpty("Name"))
                        {
                            return "Enter the valid Name";
                        }
                        break;
                    case "Address":
                        if (string.IsNullOrEmpty("Address"))
                        {
                            return "Enter the valid Address";
                        }
                        break;
                    case "DateOfBirth":
                        DateTime datetime;
                        if (!DateTime.TryParse("DateOfBirth", out datetime))
                        {
                            return "Please enter the valid Date of Birth";
                        }
                        break;
                }
                return string.Empty;
            }
        } 
```

但是验证没有发生。我需要这样的要求，如果我在 DataGridCell 中的 DateTime 属性中键入文本，则应该有红色气球来指示验证错误。

有可能吗？..有人吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-15T14:15:13.317

这一行：

```
if (int.TryParse("Age", out age)) 
```

不可能是正确的。

如果您想要一个红色气球出现，您需要提供红色气球：

```
<Style x:Key="TextBlockStyle" TargetType="{x:Type TextBlock}">
    <Style.Triggers>
        <Trigger Property="Validation.HasError" Value="true">
            <Setter Property="ToolTip"
                    Value="{Binding RelativeSource={RelativeSource Self},
                    Path=(Validation.Errors)[0].ErrorContent}"/>
       </Trigger>
    </Style.Triggers>
</Style> 
```

和：

```
<DataGridTemplateColumn.CellTemplate>
    <DataTemplate>
        <TextBlock Style="{StaticResource ResourceKey=TextBlockStyle}" 
                   Text="{Binding Path=Name,  UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, NotifyOnValidationError=True}"/>
    </DataTemplate>
</DataGridTemplateColumn.CellTemplate> 
```

我把它留给你让它变红。

# java - 使用凭据将 I/O 文件写入共享网络驱动器

> ID：10599999
> 
> 赞同：14
> 
> 时间：2012-05-15T11:44:20.877
> 
> 标签：java, file-io, filesystems

我想在共享网络驱动器上放置一个 .txt 文件。该路径是网络驱动器上的地图，需要凭据（登录名和密码）。我可以使用 FileOutputStream 传递这些参数吗？

```
FileOutputStream fos;
DataOutputStream dos;

try {
    File file= new File(path + "/" + fileName + ".txt");
    fos = new FileOutputStream(file);
    dos=new DataOutputStream(fos);
    dos.writeChars(stringContent);
    dos.close();
    fos.close();
}
catch(IOException eio){
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-15T11:51:37.520

不，使用 java [CIFS 客户端库](http://jcifs.samba.org/)。你可以通过java连接远程windows机器。例子 -

```
String user = "user:password";
NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(user);
String path = "smb://my_machine_name/D/MyDev/test.txt";
SmbFile sFile = new SmbFile(path, auth);
SmbFileOutputStream sfos = new SmbFileOutputStream(sFile);
sfos.write("Test".getBytes());
sfos.close(); 
```

谢谢

**编辑**：JCIFS 仅支持不安全的 SMB1 协议，并且多年来一直处于维护模式。[使用 jcifs-ng](https://github.com/AgNO3/jcifs-ng)获得 Windows 10 所需的 SMB2/SMB3 支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-16T09:47:52.367

这段代码对我有用：

```
 public void downloadFromNetworkDrive3() throws MalformedURLException, SmbException, IOException {
      String user = "domain;username:password";//domain name which you connect
      NtlmPasswordAuthentication auth = new NtlmPasswordAuthentication(user);
      String path = "smb://198.168.20.27/D$/MICROS/opera/export/OPERA/dinaamum/audit/Thumbs.db";

      SmbFile sFile = new SmbFile(path, auth);
      SmbFileOutputStream sfos;
      SmbFileInputStream sfis;
      try {
//        sfos = new SmbFileOutputStream(sFile);
          sfis = new SmbFileInputStream(sFile);

//        sfos.write("hihowareyou".getBytes());
          File tempFile = null;
          String filePath = null;
          filePath = "c://usr/local/cache/leelafiles";
          tempFile = new File(filePath);
          if (tempFile.exists()) {
          } else {
              tempFile.mkdirs();
          }
          tempFile = new File(filePath);
//        File[] allFilesAndDirs = tempFile.listFiles();
          FileOutputStream writer = new FileOutputStream(tempFile + File.separator + "Thumbs.db");
          byte[] b = new byte[8192];
          int n;
          while ((n = sfis.read(b)) > 0) {
              System.out.write(b, 0, n);
              writer.write(b, 0, n);
          }
          sfis.close();
          writer.close();

      } catch (UnknownHostException ex) {
          Logger.getLogger(ReportSchedulerJob.class.getName()).log(Level.SEVERE, null, ex);
      }

  } 
```