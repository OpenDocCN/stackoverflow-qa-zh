# StackOverflow 问答 11332000-11332999

# python - 在 mac 10.6.5 上安装 scipy

> ID：11332000
> 
> 赞同：0
> 
> 时间：2012-07-04T15:32:46.583
> 
> 标签：python, scipy

我有一台 MacBook Pro（10.6.5）并尝试使用 pip 安装 scipy。请注意，我对 python 世界很陌生。顺便说一句，我使用了以下命令：

```
pip install --user scipy 
```

我有以下错误：

```
 Command python setup.py egg_info failed with error code 1 in /Users/hk3/build/scipy

    Exception information:
    Traceback (most recent call last):
    File "/Users/hk3/Library/Python/2.6/site-packages/pip-1.1-py2.6.egg                                                     /pip/basecommand.py", line 104, in main
   status = self.run(options, args)
    File "/Users/hk3/Library/Python/2.6/site-packages/pip-1.1-py2.6.egg/pip/commands /install.py", line 245, in run
   requirement_set.prepare_files(finder, force_root_egg_info=self.bundle,  bundle=self.bundle)
    File "/Users/hk3/Library/Python/2.6/site-packages/pip-1.1-py2.6.egg/pip/req.py", line 1009, in prepare_files
   req_to_install.run_egg_info() 
```

文件“/Users/hk3/Library/Python/2.6/site-packages/pip-1.1-py2.6.egg/pip/req.py”，第225行，在run_egg_info command_desc='python setup.py egg_info'）文件“/Users/hk3/Library/Python/2.6/site-packages/pip-1.1-py2.6.egg/pip/init .py”，第 256 行，在**call_subprocess** % (command_desc, proc.returncode, cwd)) InstallationError : 命令 python setup.py egg_info 失败，错误代码 1 在 /Users/hk3/build/scipy

如果有人能指出我做错了什么，我将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T05:31:14.900

我在 Mac 的 Enthought python 发行版上取得了巨大的成功。安装在 10.7.4

订阅版本在此处描述： [http ://www.enthought.com/products/epd.php](http://www.enthought.com/products/epd.php)

免费版本在这里描述： [http ://www.enthought.com/products/epd_free.php](http://www.enthought.com/products/epd_free.php)

# java - Java 命令提示符退出

> ID：11332003
> 
> 赞同：0
> 
> 时间：2012-07-04T15:33:07.240
> 
> 标签：java

我有一个关于 java 中的 Runtime.getRuntime.exec("") 命令的简短问题。

我正在尝试通过 SSH 与网关计算机建立隧道：

```
String tunnel = "C:\\Program Files\\PuTTY\\putty.exe -ssh -X -P " + localPort + " " + tempUsername + "@" + localIP
                    + " -pw " + tempPassword + " -L " + tunnelPort + ":" + gatewayName + ":"+gatewayPort;

Runtime.getRuntime().exec(tunnel); 
```

除了出现命令提示符这一恼人的事实外，这段代码可以正常工作。

现在我在执行代码后尝试退出提示：

```
String tunnel = "C:\\Program Files\\PuTTY\\putty.exe -ssh -X -P " + localPort + " " + tempUsername + "@" + localIP
                    + " -pw " + tempPassword + " -L " + tunnelPort + ":" + gatewayName + ":"+gatewayPort;

String cmdCommands [] = {tunnel, "exit"};

Runtime.getRuntime().exec(cmdCommands); 
```

是否可以像我一样以类似的方式关闭命令提示符，或者有更好的方法吗？（此代码不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:51:52.817

您需要直接使用实际的 SSH 库而不是 putty，如注释中所示，或者捕获 IO 流`exec`

```
Process p = Runtime.getRuntime().exec(cmdCommands);
InputStream is = p.getInputStream();
OutputStream os = p.getOutputStream();
os.write("exit\n"); 
```

出于平台原因，硬编码 \n 通常不是一个好主意，但你明白了。此外，您还需要选择正确的 OutputStream。有几个可能有用的子类（缓冲等）。

# delphi - 枚举常量属性不流式传输

> ID：11332004
> 
> 赞同：2
> 
> 时间：2012-07-04T15:33:10.593
> 
> 标签：delphi, delphi-xe

给定以下类型声明：

```
 TMyEnum = (onehundred,twohundred,threehundred);
  TMyEnum2 = (Aonehundred = 100 , Atwohundred = 200 , Athreehundred = 300);

  TMyComponent = class(TComponent)
  private
    FMyEnum: TMyEnum;
    FMyEnum2: TMyEnum2;
  published
    property MyEnum: TMyEnum read FMyEnum write FMyEnum;
    property MyEnum2: TMyEnum2 read FMyEnum2 write FMyEnum2;
  end; 
```

使用 TStream.WriteComponent 不会流式传输 MyEnum2。有谁知道这是为什么，如果可以解决？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T15:38:03.447

不幸的是，这是流媒体系统的限制。[文档](http://docwiki.embarcadero.com/RADStudio/en/Classes_and_Objects#Published_Members)说（强调我的）：

> 某些属性虽然是可发布的，但流系统并不完全支持。其中包括记录类型的属性、所有可发布类型的数组属性以及**包含匿名值的枚举类型的**属性。如果您发布此类属性，Object Inspector 将无法正确显示它，并且在将对象流式传输到磁盘时也不会保留该属性的值。

您无法轻松解决此问题，需要提供您自己的[自定义流式传输](http://docwiki.embarcadero.com/RADStudio/en/Creating_Methods_to_Store_and_Load_Property_Values)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:51:36.830

就像 David 说的那样，`TMyEnum2`具有匿名值，这就是流机制无法正确处理类型的原因。您确实可以提供自己的自定义流，或者您可以简单地省略枚举（放弃一点类型安全）并使用`Integer`和常量：

```
type
  TMyEnum = (onehundred, twohundred, threehundred);
  TMyEnum2 = type Integer;

const
  Aonehundred = 100; 
  Atwohundred = 200; 
  Athreehundred = 300; 
```

现在，您可以随意使用和流式传输`TMyEnum2`（重命名为有用的名称后）。

# c# - Jquery 图像幻灯片放映

> ID：11332008
> 
> 赞同：0
> 
> 时间：2012-07-04T15:33:31.447
> 
> 标签：c#, jquery, asp.net

我已经创建了一个带有母版页的网站。除此之外，我还创建了一个名为 Home.aspx 的子页面，在这个 home.aspx 文件中，我使用了一个 Jquery 滑块来显示图像的幻灯片。

图像一开始就成功出现（没有错误）。但是，在添加更多子页面并向母版页添加登录控件后，图像不再出现。另外，图片的文件路径出现了错误——“Warning File 'Images/h1.jpg' is not found”。

我曾尝试评论母版页内的登录控件，以检查它是否影响 jquery，但最终没有。

这是我在 jquery 中添加的母版页头部分的代码：

```
<head runat="server">
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>BedOfRoses</title>
<link href="http://fonts.googleapis.com/css?family=Oswald" rel="stylesheet" type="text/css" />
<link href='http://fonts.googleapis.com/css?family=Arvo' rel='stylesheet' type='text/css'/>
<link href="style.css" rel="stylesheet" type="text/css" media="screen" />
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="jquery.slidertron-1.0.js"></script>

 <asp:ContentPlaceHolder id="head" runat="server">
 </asp:ContentPlaceHolder>
</head> 
```

以下是 Home.aspx 文件代码：

```
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" Runat="Server">
            <div id="banner">
            <div id="slider">
            <div class="viewer">
            <div class="reel">
                <div class="slide"> <img src="Images/H1.jpg" alt="" /> </div>
                <div class="slide"> <img src="Images/H2.jpg" alt="" /> </div>
                <div class="slide"> <img src="Images/H3.jpg" alt="" /> </div>
                <div class="slide"> <img src="Images/H4.jpg" alt="" /> </div>
                <div class="slide"> <img src="Images/H4.jpg" alt="" /> </div>
                <div class="slide"> <img src="Images/H6.jpg" alt="" /> </div>

                                </div>
                            </div>
                        </div>
                        <script type="text/javascript">
                            $('#slider').slidertron({
                                viewerSelector: '.viewer',
                                reelSelector: '.viewer .reel',
                                slidesSelector: '.viewer .reel .slide',
                                advanceDelay: 3000,
                                speed: 'slow'
                            });
            </script>
                    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:37:33.807

Are these pages placed in a separate folder than the root one? Use the root selector instead of the current dir selector?

This

```
<div class="slide"> <img src="/Images/H1.jpg" alt="" /> </div> 
```

instead of this

```
<div class="slide"> <img src="Images/H1.jpg" alt="" /> </div> 
```

# android - AVD Manager - 不能再运行多个模拟器

> ID：11332012
> 
> 赞同：3
> 
> 时间：2012-07-04T10:29:24.273
> 
> 标签：android, avd

我知道 AVD 管理器可以运行多个模拟器，但在最近几天它停止工作的新版本。它停止了启动 4 个命令提示符窗口的事情，它只有一个加载栏，但现在我一次不能运行超过 1 个。当我单击开始时，加载栏完成但没有模拟器加载，没有可见的变化。

Eclipse 中 logcat 中的唯一错误是：

```
07-04 10:12:18.563: D/SntpClient(71): request time failed: java.net.SocketException: 
    Address family not supported by protocol 
```

不知道这是否相关。

编辑我有时在启动模拟器时似乎也遇到了这个问题：

```
Starting emulator for AVD 'Android_2_2_480x854'
WARNING: Data partition already in use. Changes will not persist!
WARNING: SD Card image already in use: C:\Users\USERNAME\.android\avd\Android_2_2_480x854.avd/sdcard.img
ko:Snapshot storage already in use: C:\Users\USERNAME\.android\avd\Android_2_2_480x854.avd/snapshots.img 
```

这是一个由另一个开发团队创建的应用程序，我们只是一个测试团队，所以我无法更改任何内容（只需要测试的 apk）。

到目前为止尝试的事情：

*   重启亚行
*   在 Google 上查找错误
*   重启亚行管理器/Eclipse

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:10:42.840

对，自更新以来也不为我工作。已向[Google-issues](http://code.google.com/p/android/issues/detail?id=34221)报告此问题订阅/投票，以便他们尽快修复。

同时，一个不错的选择是设置一个运行 x86 Android 版本的 Virtual Box。它也比 ARM 模拟器快得多，虽然设置网络有点棘手，而且不像从 Eclipse 创建和启动模拟器那样自动。

# mpi - 共享内存的 MPI 与 openMP

> ID：11332018
> 
> 赞同：28
> 
> 时间：2012-07-04T15:34:00.003
> 
> 标签：mpi, openmp, shared-memory

假设有一台计算机有 4 个 CPU，每个 CPU 有 2 个内核，所以总共有 8 个内核。以我有限的理解，我认为在这种情况下所有处理器共享相同的内存。现在，是直接使用 openMP 更好还是使用 MPI 使其通用，以便代码可以在分布式和共享设置上工作。另外，如果我将 MPI 用于共享设置，与 openMP 相比，性能会下降吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-07-05T13:01:44.947

您是否需要或想要 MPI 或 OpenMP（或两者）在很大程度上取决于您正在运行的应用程序的类型，以及您的问题主要是内存限制还是 CPU 限制（或两者兼而有之）。此外，这取决于您运行的硬件类型。几个例子：

**示例 1**

> 您需要并行化，因为您的内存不足，例如，您有一个模拟并且问题规模如此之大，以至于您的数据不再适合单个节点的内存。但是，您对数据执行的操作相当快，因此您不需要更多的计算能力。

在这种情况下，您可能希望使用 MPI 并在每个节点上启动一个 MPI 进程，从而最大限度地利用可用内存，同时将通信限制在最低限度。

**示例 2**

> 您通常拥有较小的数据集，并且只想加快计算量很大的应用程序的速度。此外，您不想花太多时间考虑并行化，而是更多地考虑您的算法。

在这种情况下，OpenMP 是您的首选。您只需要在这里和那里添加一些语句（例如，在您想要加速的 for 循环前面），如果您的程序不太复杂，OpenMP 会自动为您完成其余的工作。

**示例 3**

> 你想要这一切。您需要更多内存，即更多计算节点，但您还希望尽可能加快计算速度，即在每个节点上运行多个内核。

现在您的硬件开始发挥作用。根据我的个人经验，如果每个节点只有几个内核 (4-8)，则使用 OpenMP 的一般开销（即启动 OpenMP 线程等）造成的性能损失超过处理器内部的开销MPI 通信（即在实际共享内存且不需要 MPI 进行通信的进程之间发送 MPI 消息）。
但是，如果您正在使用每个节点具有更多内核 (16+) 的机器，则有必要使用*混合*方法，即同时与 MPI 和 OpenMP 并行化。在这种情况下，混合并行化将是充分利用您的计算资源所必需的，但它也是最难编码和维护的。

**总结**
如果您遇到的问题小到只能在一个节点上运行，请使用 OpenMP。如果您知道需要多个节点（因此肯定需要 MPI），但您更喜欢代码可读性/工作量而不是性能，请仅使用 MPI。如果仅使用 MPI 不能为您提供您想要/要求的加速，那么您必须全部完成并采用混合方式。

对于您的第二个问题（如果不清楚）：
如果您的设置完全不需要 MPI（因为您将始终只在一个节点上运行），请使用 OpenMP，因为它会更快。但是，如果您知道无论如何都需要 MPI，那么我会从那个开始，稍后再添加 OpenMP，当您知道您已经用尽了 MPI 的所有合理优化选项时。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-07-04T16:19:58.927

现在大多数分布式内存平台都由 SMP 或 NUMA 节点组成，不使用 OpenMP 是没有意义的。OpenMP*和*MPI 可以完美地协同工作；OpenMP 为每个节点上的内核提供数据，而 MPI 在节点之间进行通信。这称为混合编程。10 年前它被认为是异国情调，但现在它已成为高性能计算的主流。

至于问题本身，鉴于所提供的信息，正确答案始终是相同的：**IT DEPENDS**。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-04T15:42:16.923

对于在这样的单个共享内存机器上使用，我建议使用 OpenMP。它使问题的某些方面更简单，并且**可能**更快。

如果您打算迁移到分布式内存机器，请使用 MPI。它会帮助你解决同样的问题两次。

我说 OpenMP 可能更快的原因是因为 MPI 的良好实现可能足够聪明，可以发现它正在共享内存环境中使用并相应地优化其行为。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-04T21:30:42.323

从更大的角度来看，混合编程已经变得流行，因为 OpenMP 通过使用相同的地址空间从缓存拓扑中受益。由于 MPI 可能会在内存上复制相同的数据（因为进程无法共享数据），因此它可能会遭受缓存取消的影响。

另一方面，如果您正确地对数据进行分区，并且每个处理器都有一个私有缓存，那么您的问题可能完全适合缓存。在这种情况下，您将获得超线性加速。

通过谈论缓存，最近的处理器上有非常不同的缓存拓扑，并且始终：**它取决于...**

# php - PHP - 在文件中每行使用一次explode()

> ID：11332020
> 
> 赞同：1
> 
> 时间：2012-07-04T15:34:03.210
> 
> 标签：php, file, explode

如何从文本文件中使用 explode() 在每行中获取第 2 项（使用逗号作为分隔符）？

* * *

用户名检查正在工作。
然而，电子邮件不是。
countEmail 没有改变。

这是我得到的输出：（
试图添加一个现有的电子邮件并且 countEmail 没有改变）

```
array(3) {    <--- Previous user
  [0]=>
  string(11) "blabla123"
  [1]=>
  string(28) " blahblah@blah.com"
  [2]=>
  string(11) " 123, 1990
"
}
array(1) {
  [0]=>
  string(1) "
"
}

Notice: Undefined offset: 1 in C:\xampp\htdocs\Brets\register.php on line 35

Notice: Undefined offset: 1 in C:\xampp\htdocs\Brets\register.php on line 36
00 (countUser and countEmail) 
```

这是我使用的代码：

```
<form action="register.php" method="POST">
    Username: <br> <input type="text" name="username"> <br>
    Password: <br> <input type="password" name="password"> <br>
    Email: <br> <input type="text" name="email"> <br>
    Year of Birth: <br> <select name="year">
                            <option value="1990">1990</option>
                            <option value="1991">1991</option>
                            <option value="1992">1992</option>
                            <option value="1993">1993</option>
                        </select> <br>
    <input type="submit" value="Submit">
</form>

<?php
$next = 'register.php';
$greet = 'Welcome! <p>Please register using the form above.</p>';

if (isset($_POST['username']) && isset($_POST['password']) && isset($_POST['email']) && isset($_POST['year'])) {
    $username = htmlentities($_POST['username']);
    $password = htmlentities($_POST['password']);
    $email = htmlentities($_POST['email']);
    $year = htmlentities($_POST['year']);

    if (!empty($username) && !empty($password) && !empty($email) && !empty($year)) {
        $countEmail = 0;
        $countUser = 0;
        $filename = 'user.txt';
        $handle = fopen($filename, "a+");
        if ($handle) {
            while (($line = fgets($handle, filesize($filename))) !== false) {
                $line=explode(',', $line, 3);
                echo '<pre>';
                var_dump($line);
                echo '</pre>';
                if (($line[0] == $email) || ($line[1] == $email)) { $countEmail++; }
                if (($line[0] == $username) || ($line[1] == $username)) { $countUser++; }
            }
            if (!feof($handle)) {
                echo "Error: unexpected fgets() fail\n";
            }
        }
        if ($countEmail == 0 && $countUser == 0) {
            fwrite($handle, "$username, $email, $password, $year\r\n");
            fclose($handle);
            $greet = 'Thank you!';
        }
        if ($countEmail != 0) {$greet = 'An account with that email aready exists.';}
        if ($countEmail != 0) {$greet = 'Username already taken.';}
    } else { $greet = 'Fill in all fields.';}
}
echo $greet;

?> 
```

如果我听起来令人困惑，我深表歉意。
另外，我知道可能有更好的方法可以做到这一点，但我刚刚开始学习 php :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:39:13.457

php 函数[fgets](http://php.net/manual/en/function.fgets.php)将逐行读取文件，然后允许您逐行处理和分解。

从手册：

```
<?php
$handle = @fopen($filename, "r");
if ($handle) {
    while (($line = fgets($handle, 4096)) !== false) {
        // do something with $line here
    }
    if (!feof($handle)) {
        echo "Error: unexpected fgets() fail\n";
    }
    fclose($handle);
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:37:35.863

应该很简单：

```
list($item1, $item2) = explode(',', $str); 
```

用于逐行`fgets()`读取。

顺便说一句，如果数据是逗号分隔的，你也可以看看[`fgetcsv()`](http://au2.php.net/manual/en/function.fgetcsv.php)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:42:38.873

```
$dataLines = explode("\n", $dataIn); 
```

...

```
foreach ($dataLines as $line) {
  $line=explode(',', $line,3);
  if (siezof($line)<2) continue;
  if (($line[0] == $email) || ($line[0] == $email)) { $countEmail++; }
  if (($line[0] == $username) || ($line[0] == $username)) { $countUser++; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:42:51.240

在explode 中使用限制将留下包含其余字符串的最后一个元素。

[http://php.net/manual/en/function.explode.php](http://php.net/manual/en/function.explode.php)

所以如果你只想要前两个元素，

例如，从 "a,b,c,d" 你想要 ["a", "b"] 使用：

```
$result = explode(",", $array, 3) 
=> ["a", "b", "c,d"] 
```

然后弹出删除最后一个：

```
array_pop($result);
print_r($result);
=> ["a", "b"] 
```

# android - 谷歌 GCMIntentService 实例化

> ID：11332034
> 
> 赞同：16
> 
> 时间：2012-07-04T15:34:56.563
> 
> 标签：android, google-cloud-messaging

> **可能重复：**
> [Android RuntimeException：无法实例化服务](https://stackoverflow.com/questions/5027147/android-runtimeexception-unable-to-instantiate-the-service)

尝试启动并运行 GCM，但我的设备正在发送注册请求，但没有从 GCM 服务器得到响应。下面我包括了我的清单和 GCMIntentService 定义，以及我向 GCM 服务器注册的调用。我一直盯着它这么久，我可能会遗漏一些明显的东西，如果是这样，我道歉。

欢迎所有想法！

**这是我的清单：**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="PACKAGE"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <permission android:name="PACKAGE.permission.C2D_MESSAGE" android:protectionLevel="signature" />
    <uses-permission android:name="PACKAGE.permission.C2D_MESSAGE" /> 
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <service android:name=".GCMIntentService" 
            android:enabled="true"/>

        <receiver
            android:name="com.google.android.gcm.GCMBroadcastReceiver"
            android:permission="com.google.android.c2dm.permission.SEND" >
            <intent-filter>
                <action android:name="com.google.android.c2dm.intent.RECEIVE" />
                <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

                <category android:name="PACKAGE.GCMIntentService" />
            </intent-filter>
        </receiver>

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**这是我的 GCMIntentService 来处理来自 GCM 的返回：**

```
import com.google.android.gcm.GCMBaseIntentService;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class GCMIntentService extends GCMBaseIntentService {
    public static String TAG = "GCMIntentService";

    public GCMIntentService(String senderId) {
        super(senderId);
        Log.d("GCMIntentService", senderId);
    }

    @Override
    protected void onError(Context arg0, String arg1) {
        Log.d("onError", arg1);
    }

    @Override
    protected boolean onRecoverableError(Context context, String errorId){
        Log.d("onRecoverableError", errorId);
        return false;
    }

    @Override
    protected void onMessage(Context arg0, Intent arg1) {
        Log.d("onMessage", String.valueOf(arg1));
    }

    @Override
    protected void onRegistered(Context arg0, String arg1) {
        Log.d("onRegistered", arg1);
    }

    @Override
    protected void onUnregistered(Context arg0, String arg1) {
        Log.d("onUnregistered", arg1);
    }
} 
```

**我尝试在我的主类的 onCreate 方法中注册以下内容：**

```
GCMRegistrar.checkDevice(this);
GCMRegistrar.checkManifest(this);

final String regId = GCMRegistrar.getRegistrationId(this);
if (regId.equals("")) {
    GCMRegistrar.register(this, SENDER_ID);
} else {
    Log.d(TAG, "Already registered");
} 
```

***更新*** 我尝试了 Raz 的建议，但出现以下错误：

```
07-03 12:07:40.459: W/dalvikvm(341): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
07-03 12:07:40.508: E/AndroidRuntime(341): FATAL EXCEPTION: main
07-03 12:07:40.508: E/AndroidRuntime(341): java.lang.RuntimeException: Unable to instantiate service package.gcm2.GCMIntentService: java.lang.InstantiationException: package.gcm2.GCMIntentService
07-03 12:07:40.508: E/AndroidRuntime(341):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2943)
07-03 12:07:40.508: E/AndroidRuntime(341):  at android.app.ActivityThread.access$3300(ActivityThread.java:125)
07-03 12:07:40.508: E/AndroidRuntime(341):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2087)
07-03 12:07:40.508: E/AndroidRuntime(341):  at android.os.Handler.dispatchMessage(Handler.java:99)
07-03 12:07:40.508: E/AndroidRuntime(341):  at android.os.Looper.loop(Looper.java:123)
07-03 12:07:40.508: E/AndroidRuntime(341):  at android.app.ActivityThread.main(ActivityThread.java:4627)
07-03 12:07:40.508: E/AndroidRuntime(341):  at java.lang.reflect.Method.invokeNative(Native Method)
07-03 12:07:40.508: E/AndroidRuntime(341):  at java.lang.reflect.Method.invoke(Method.java:521)
07-03 12:07:40.508: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
07-03 12:07:40.508: E/AndroidRuntime(341):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
07-03 12:07:40.508: E/AndroidRuntime(341):  at dalvik.system.NativeStart.main(Native Method)
07-03 12:07:40.508: E/AndroidRuntime(341): Caused by: java.lang.InstantiationException: package.gcm2.GCMIntentService
07-03 12:07:40.508: E/AndroidRuntime(341):  at java.lang.Class.newInstanceImpl(Native Method)
07-03 12:07:40.508: E/AndroidRuntime(341):  at java.lang.Class.newInstance(Class.java:1429)
07-03 12:07:40.508: E/AndroidRuntime(341):  at android.app.ActivityThread.handleCreateService(ActivityThread.java:2940)
07-03 12:07:40.508: E/AndroidRuntime(341):  ... 10 more
07-03 12:08:34.560: I/Process(341): Sending signal. PID: 341 SIG: 9 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-04T15:41:57.500

在你的清单中试试这个：

```
<receiver
        android:name="com.google.android.gcm.GCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="eimmer.liav.elucidate.gcm2" />
        </intent-filter>
    </receiver> 
```

### 类别名称需要是您的应用程序包。

如果该服务位于相同的包名称中，请像您一样将其保留，否则将其更改为您的真实包，而不是但是`.GCMIntentService`您还需要`extend`和`override`.`GCMBroadcastReceiver`

如果您的包不是`eimmer.liav.elucidate.gcm2.GCMIntentService`，那么您必须扩展**GCMBroadcastReceiver**并覆盖函数**getGCMIntentServiceClassName()**。在该函数中，以字符串示例返回真正的包和类：`eimmer.liav.example.GCMIntentService`.

也不要忘记**将接收器名称更改**为新名称。例子：

```
 <receiver
        android:name="eimmer.liav.example.MyGCMBroadcastReceiver"
        android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />

            <category android:name="eimmer.liav.elucidate.gcm2" />
        </intent-filter>
    </receiver> 
```

进一步**将您的服务名称更改**为：

```
<service android:name="eimmer.liav.example.GCMIntentService" 
            android:enabled="true"/> 
```

根据 Google 的另一件事，您需要将**构造函数更改为默认构造函数**并发送一些字符串，如下所示：

```
public GCMIntentService() {
        super("Test");
    } 
```

据我所知，字符串并不重要。

玩得开心。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-09T17:48:29.103

您的代码中有什么问题是在您的 GCMIntentService 中，您需要使用 NO 参数覆盖默认构造函数。要仍然传递 senderID，请执行以下操作：

```
public static final String SENDER_ID = "sender-id-here";

public GCMIntentService() 
{
    super(SENDER_ID);
} 
```

这很可能是人们的常见问题，因为 eclipse 会自动生成一个以字符串为参数的受保护构造函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-28T09:00:36.720

> 此意图服务将由 GCMBroadcastReceiver（由 GCM 库提供）调用，如下一步所示。它必须是 com.google.android.gcm.GCMBaseIntentService 的子类，必须包含公共构造函数，并且应该命名为 my_app_package.GCMIntentService（除非您使用覆盖用于命名服务的方法的 GCMBroadcastReceiver 的子类）。

您应该只覆盖**GCMBroadcastReceiver类的****getGCMIntentServiceClassName**方法并设置您的自定义 IntentService 类名。然后修复**AndroidManifest.xml**。

 ****您可以在[此处](http://dexxtr.com/post/28188228252/rename-or-change-package-of-gcmintentservice-class)找到更多详细信息和示例代码。****

# javascript - 是否可以使用javascript从目录中读取文件？

> ID：11332042
> 
> 赞同：2
> 
> 时间：2012-07-04T15:35:52.773
> 
> 标签：javascript, html

我想读取一个目录并用这些文件的名称填写一个列表。

是否可以使用 javascript 执行此任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:37:17.950

不，这是不可能的。您希望有人阅读*您*目录的内容吗？

**更新**：我想你可以通过使用`webkitdirectory`属性得到最接近的：

*HTML*

```
<input type="file" id="file_input" webkitdirectory="" directory="" />
<div id="list_of_files"></div>
... 
```

*JS*

```
var $list = $('#list_of_files');
$('#file_input').change(function(event) {
  var listOfFiles = event.target.files;
  for (var i = 0, l = listOfFiles.length; i < l; ++i) {
     $list.append($('<p>'+ listOfFiles[i].name +'</p>'));
  }
}); 
```

[... 如此处](http://jsfiddle.net/naL9v/1/)所示。但它仅在 Chrome 中有效（并且建议的`mozdirectory`属性用法没有帮助）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T15:37:38.810

不，出于安全原因。

您可以通过调用 ActiveX 或 Flash 并让用户同意允许从这些插件访问文件系统来做到这一点，但是 - 请不要。

10 年后编辑：不仅请不要这样做，而且现在除了使用没有更新的旧设备之外 - 您**不能**使用 Flash/ActiveX 执行此操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T15:39:12.790

您可以尝试使用[`FileReader`](https://developer.mozilla.org/en/DOM/FileReader)对象，但浏览器对它的支持很差。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T15:39:56.407

在谷歌浏览器中，您可能会提示客户端选择一个目录，然后使用它来列出目录及其子目录中包含的文件：

```
<input type="file" webkitdirectory onchange="listContents(this.files)"> 
```

`listContents`将是您的实施。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T15:40:44.860

我不知道你是否在做安全研究等等。所以除了说“你不应该这样做”之外，问题的实际答案是，你实际上可以利用写得不好的 JS 代码来阅读文件，这就是为什么你应该编码......防御性。

然后是这个：[http ://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T15:43:13.273

是的，取决于您使用的浏览器。

尽管这不是一种常见的做法，但您可以使用某些浏览器，例如 Chrome（使用 webkitRequestFileSystem 支持的 requestFileSystem）或在 Internet Explorer 中使用文件系统对象。

# sql - 不能在 SQL Server 存储过程的 try..catch 块中使用 throw 或 raiseerror

> ID：11332054
> 
> 赞同：0
> 
> 时间：2012-07-04T15:37:14.650
> 
> 标签：sql, sql-server, sql-server-2008, tsql, stored-procedures

我有这个存储过程，我不能使用 Throw 或`RAISEERROR`出于某种原因。我不得不说我是 SQL Server 的新手，我以前从未使用过这个语句，但是由于某种原因，当我输入它们时不会变成蓝色。

```
ALTER PROCEDURE [dbo].[del_pay_plan_proc]
@id INT
AS
BEGIN TRANSACTION
BEGIN TRY

DELETE FROM test_table WHERE [Id] = @id;

COMMIT TRANSACTION;
END TRY
BEGIN CATCH

THROW

END CATCH 
```

我正在使用 SQL Server 2008 R2。

我无法调用函数`RAISEERROR`或使用`THROW`语句的原因是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:43:54.053

根据我的理解，它应该如下所示......

```
ALTER PROCEDURE [dbo].[del_pay_plan_proc]
@id INT
AS
Begin Try
    SET NOCOUNT ON
    SET XACT_ABORT ON
    Begin Tran
         DELETE FROM test_table WHERE [Id] = @id;
         Select '' Msg
    Commit Tran
End Try

Begin Catch
    RollBack Tran
    Select Error_Message() as Msg
End Catch 
```

通过这样做，如果发生错误，则不需要抛出任何异常。如果发生任何错误，控件将自动在 Catch 块内移动。

* * *

**[从这里参考](http://msdn.microsoft.com/en-us/library/ms188792.aspx)**

# c# - 如何从 MVC4 中的异步操作重定向到另一个操作

> ID：11332057
> 
> 赞同：0
> 
> 时间：2012-07-04T15:37:22.350
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, asynchronous, asp.net-mvc-4

我目前正在尝试编写一些代码来接受一些 FTP 详细信息，获取文件列表，然后允许用户下载文件。

这一切都很好，除了我必须等待文件完成下载才能执行任何操作。我正在使用异步控制器，因为我认为这是为了帮助解决这类问题。

请在下面查看我的代码选择，我省略了所有不相关的代码：

```
 [HttpPost]
    public ActionResult FtpAsync(Downloads model)
    {
        var ftpAddress = model.Url;
        if (!ftpAddress.StartsWith("ftp://"))
            ftpAddress = String.Concat("ftp://", ftpAddress);

        var serverPath = Server.MapPath(ThumbnailSupport.CreateBaseVirtualPathForClient(StandardFileLinks.DropBoxLocation,
                                                                        _website.Client));

        if (!Directory.Exists(serverPath))
            Directory.CreateDirectory(serverPath);

        foreach (string file in model.SelectedFiles)
        {

            var webClient = new WebClient();

            AsyncManager.OutstandingOperations.Increment();

            AsyncManager.Parameters["FilesToDownload"] = model.SelectedFiles;
            webClient.Credentials = new NetworkCredential(model.Username, model.Password);

            webClient.DownloadFileAsync(new Uri(ftpAddress + "/" + file), serverPath + "\\" + file);
            AsyncManager.OutstandingOperations.Decrement();
        }

        return RedirectToAction("Transfer");

    }

    public ActionResult FtpCompleted(Downloads model)
    {
        return RedirectToAction("Complete");
    }

    public ActionResult Transfer()
    {
        return PartialView();
    } 
```

它可以很好地触发 FtpCompleted 操作，但问题是这是为了处理潜在 GB 信息的文件传输。我不希望用户在等待文件下载时坐着看旋转的光盘。因此，我试图将他们重定向到传输操作的原因是，此操作仅显示一条消息，告诉他们传输可能需要一段时间，一旦完成，他们将收到通知。但是，此操作实际上从未被调用。我在调试中逐步执行代码并调用它，但它从不显示消息，并且根据 FireBug 它永远不会到达浏览器。

我是在做一些愚蠢的事情还是不可能做到这一点？

我会很感激人们可以在这里提供的任何帮助，因为我在这里浏览了谷歌和其他帖子后完全被卡住了。即使是我的老板，他是一个更有经验的编码员，也不知道如何处理这个问题。

提前致谢，

天然气

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:50:54.457

如[文档](http://msdn.microsoft.com/en-us/library/ee728598.aspx)中所述，异步控制器操作由 2 个方法组成：

1.  返回**void**并具有`Async`后缀和操作名称前缀的方法
2.  返回**ActionResult**并具有`Completed`后缀和操作名称前缀的方法

第一种方法触发异步操作并立即返回。整个操作完成后调用第二个方法。

所以这里是正确的动作签名：

```
[HttpPost]
public void FtpAsync(Downloads model)
{
    ...
}

public ActionResult FtpCompleted(Downloads model)
{
    return Content("Complete");
} 
```

现在，如果您不想在整个操作过程中冻结浏览器，则必须使用 AJAX 调用第一个控制器操作。就 HTTP 协议而言，异步控制器不会改变任何东西。从客户的角度来看，它是完全一样的。与标准控制器操作的唯一区别是您不会在整个操作期间危及工作线程。您现在依赖于 IOCP（IO/完成端口），它是由`WebClient`. 这个想法是，当您启动一个 IO 密集型操作时，会创建一个 IOCP 端口，并且控制器操作会立即将线程返回到 ASP.NET 线程池。然后操作可能会持续数小时，一旦完成，就会发出 IOCP 信号，从线程池中提取一个池，并在该线程上调用 Completed 操作。所以就线程而言，它非常有效。但是执行的总时间与您使用标准控制器动作时完全一样。许多人认为，因为异步控制器被称为异步，它们从客户端的角度来看是异步运行的。那是一种错误的印象。异步操作不会让您的操作奇迹般地运行得更快。从客户端的角度来看，它们仍然是完全同步的，因为这就是 HTTP 协议的工作方式。

所以你有两种可能性：

*   使用 AJAX 调用控制器操作以避免阻塞浏览器。
*   使用 COMET/PUSH 技术，其中通知客户端的是服务器。例如，在 HTML5 中有一个 WebSockets 标准可以用来实现这一点。在 .NET 世界中， [SignalR](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)是一个很好的框架，它封装了这种 PUSH 技术。

如果您想要一个真正有效的解决方案，建议使用第二种方法。

# android - Android 从数组中获取字符串并创建另一个数组

> ID：11332063
> 
> 赞同：0
> 
> 时间：2012-07-04T15:37:36.630
> 
> 标签：android

嗨，我正在创建一个列表，其中包含日期标题和下面的内容。我有一个 JSON 提要，其中每个内部包含灯具是一个数组，其中包含每个灯具的数据我需要的一个字符串是 matchdate 来创建我的标题但是如果我只是通过它运行它将创建同一比赛日的多个实例所以 id例如，有 3 个具有相同日期的标题。我如何提取该信息并创建另一个数组来说明该日期是否已经存在，然后通过下一个等。我知道这是一个非常具体的问题，但如果有人至少可以指出我正确的方向。提前致谢。

这是我的饲料

```
 fixturesArray = [{"awayteam":"Team 1","comp":"LGE","location":null,"attendance":null,"awayscore":null,"division":"Testing 1","homescore":null,"fixture_note":null,"kickoff":"15:30:00","awayteam_id":"64930","matchdate":"2012-07-07","awaypens":null,"homepens":null,"division_id":"5059","hometeam":"Team 3","hometeam_id":"64932"},{"awayteam":"Team 2","comp":"LGE","location":null,"attendance":null,"awayscore":null,"division":"Testing 1","homescore":null,"fixture_note":null,"kickoff":"15:00:00","awayteam_id":"64931","matchdate":"2012-07-07","awaypens":null,"homepens":null,"division_id":"5059","hometeam":"Team 4","hometeam_id":"64933"},{"awayteam":"Team 4","comp":"LGE","location":null,"attendance":null,"awayscore":null,"division":"Testing 1","homescore":null,"fixture_note":null,"kickoff":"15:00:00","awayteam_id":"64933","matchdate":"2012-07-14","awaypens":null,"homepens":null,"division_id":"5059","hometeam":"Team 1","hometeam_id":"64930"}] 
```

这是我到目前为止所尝试的

```
Log.v("MyFix", "fixturesArray = " + fixturesArray);
       if(fixturesArray.length() < 1){

             TextView emptytext = (TextView) fixturesView.findViewById(R.id.TextView02);
             emptytext.setText("No Upcoming Fixtures Available");

       }else{
        try{   

            JSONArray datesArray = null;
            fixturesInfo = null;
            String matchDateTemp = "";

            for(int t = 0; t < fixturesArray.length(); t++){
               JSONObject matchDateDict = fixturesArray.getJSONObject(t);
               String matchDate = matchDateDict.getString("matchdate");
               JSONArray matchdates = matchdates.put(matchDate);

               Log.v("MyFix", "matchdate = " + matchDate);

               tempArray.put(t, fixturesArray);
               fixturesInfo.put(matchDate, tempArray);

            }

            Log.v("MyFix", "fixturesInfo = " + fixturesInfo);
            Log.v("MyFix", "tempArray = " + tempArray);

        }catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:02:28.387

只需获取一条数据，然后在添加之前遍历新的 arraylist 检查是否存在重复项。

```
int matchCount=0;                                           // set count of matches to 0
String matchDate = matchDateDict.getString("matchdate");    // get the data to compare
for (int i = 0; i < uniqueDateArrayList.size(); i++){       // set loop to iterate through unique date arraylist
    if (matchDate.equals(uniqueDateArray[i])){              // compare the date to the date stored at position i
        matchCount++;                                       // if it matches increase the match count
    }
}

if (matchCount == 0) {
    uniqueDateArrayList.add(matchDate)                       // if there is no matching date, add it to the unique date arraylist
} 
```

这应该会为您提供一个包含数据中所有唯一日期的数组列表。

# c++ - 比较没有 RTTI 的 C++ 中的多态基类型

> ID：11332075
> 
> 赞同：7
> 
> 时间：2012-07-04T15:38:23.987
> 
> 标签：c++, polymorphism

我有一些指向基本类型 Shape 的指针。我想使用 == 运算符比较这些对象。如果对象属于不同的派生类型， == 运算符显然应该返回 false。如果它们属于相同的派生类型，则应比较派生类型的成员。

我读过使用 C++ RTTI 是不好的做法，应该只在极少数和必要的情况下使用。据我所知，如果不使用 RTTI，这个问题通常无法解决。每个重载的 == 运算符都必须检查 typeid，如果它们相同，则执行 dynamic_cast 并比较成员。这似乎是一种普遍的需求。这个问题有某种成语吗？

```
#include <iostream>
using namespace std;

class Shape {
  public:
    Shape() {}
    virtual ~Shape() {}
    virtual void draw() = 0;

    virtual bool operator == (const Shape &Other) const = 0;
};

class Circle : public Shape {
  public:
    Circle() {}
    virtual ~Circle() {}
    virtual void draw() { cout << "Circle"; }

    virtual bool operator == (const Shape &Other) const {
      // If Shape is a Circle then compare radii
    }

  private:
    int radius;
};

class Rectangle : public Shape {
  public:
    Rectangle() {}
    virtual ~Rectangle() {}
    virtual void draw() { cout << "Rectangle"; }

    virtual bool operator == (const Shape &Other) const {
      // If Shape is a Rectangle then compare width and height
    }

  private:
    int width;
    int height;
};

int main() {
  Circle circle;
  Rectangle rectangle;

  Shape *Shape1 = &circle;
  Shape *Shape2 = &rectangle;

  (*Shape1) == (*Shape2); // Calls Circle ==
  (*Shape2) == (*Shape1); // Calls Rectangle ==
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T10:34:57.020

使用 RTTI。使用`typeid`，但使用`static_cast`而不是`dynamic_cast`。

从设计的角度来看，我想说这正是 RTTI 的用途，任何替代解决方案必然会变得更丑陋。

```
virtual bool operator == (const Shape &Other) const {
    if(typeid(Other) == typeid(*this))
    {
        const Circle& other = static_cast<const Circle&>(Other);
        // ...
    }
    else
        return false;
} 
```

从性能的角度来看： `typeid`往往是便宜的，一个简单的查找存储在虚拟表中的指针。您可以廉价地比较动态类型的相等性。

然后，一旦你知道你有正确的类型，你就可以安全地使用`static_cast`.

`dynamic_cast`以慢而著称（即“与虚函数调用相比”慢，而不像“与 Java 中的强制转换相比”慢），因为它还将分析类层次结构以处理继承（以及多个继承，也是）。你不需要在这里处理它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-05T10:14:56.850

当然，它可以在不使用`typeid`和铸造的情况下完成。但这有点麻烦，因此您必须决定是否值得这样做。

## **版本一 - 双重访客**

使用[访客模式](http://en.wikipedia.org/wiki/Visitor_pattern)

```
class ShapeVisitor
{
public:
    virtual void visitCircle(Circle const &) = 0;
    virtual void visitRectangle(Rectangle const &) = 0;
    // other shapes
} 
```

类`Shape`添加

```
virtual void acceptVisitor(ShapeVisitor &) = 0; 
```

和游客

```
class CircleComparingVisitor : public ShapeVisitor
{
    Circle const & lhs; // shorthand for left hand side
    bool equal; // result of comparison
public:
    CircleComparingVisitor(Circle const & circle):lhs(circle), equal(false){}
    virtual void visitCircle(Circle const & rhs) {equal = lhs.radius == rhs.radius;}
    virtual void visitRectangle(Rectangle const &) {}
    // other shapes
    bool isEqual() const {return equal;}
}
// other shapes analogically

class ShapeComparingVisitor
{
    Shape const & rhs; // right hand side
    bool equal;
public:
    ShapeComparingVisitor(Shape const & rhs):rhs(rhs), equal(false) {}

    bool isEqual() const {return equal;}

    virtual void visitCircle(Circle const & lhs)
    {
        CircleComparingVisitor visitor(lhs);
        rhs.accept(visitor);
        equal = visitor.isEqual();
    }
    virtual void visitRectangle(Rectangle const & lhs)
    {
        RectangleComparingVisitor visitor(lhs);
        rhs.accept(visitor);
        equal = visitor.isEqual();
    }
} 
```

终于`operator==`不需要虚拟了

```
bool Shape::operator==(const Shape &rhs) const
{
    ShapeComparingVisitor visitor(rhs);
    this->accept(visitor);
    return visitor->isEqual();
} 
```

第二个想法 -`operator==`可能是虚拟的并使用适当的比较访问者 - 这样你就可以摆脱`ShapeComparingVisitor`

## **版本二——双重调度**

你添加到`Shape`

```
virtual bool compareToCircle(Circle const &) const == 0;
virtual bool compareToRectangle(Rectangle const &) const == 0; 
```

并以特定的形状实现

现在例如

```
bool Circle::operator==(Shape const & rhs) const
{
    return rhs.compareToCircle(*this);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T15:51:14.207

这正是 RTTI 的用途。在编译时，您只知道它是一个`Shape&`，因此您只需进行运行时检查以查看它实际上是什么派生类型，然后才能进行有意义的比较。在不违反多态性的情况下，我不知道有任何其他方法可以做到这一点。

您可以为不同的派生类型组合定义许多自由函数`operator ==`，但它不会具有多态行为，因为您可能通过`Shape&`指针处理这些行为，因此即使调用代码实际上也不知道对象是什么类型。

因此，RTTI 在这里（几乎）是不可避免的，而且确实这种情况正是 RTTI 存在的原因。在某些情况下它只是被认为是不好的做法，因为它增加了一定的脆弱性（当事情不是你知道如何处理的类型时，你必须确保你处理，因为任何人都可以出现并创建一个新的子类`Shape`），它增加了运行时成本。但是您已经通过使用虚拟方法支付了运行时成本。

我说“几乎不可避免”，因为您可能会编造一些系统，对传入的对象进行进一步的虚拟方法调用`operator ==`以获得正确的比较行为，但实际上是另一种虚拟方法查找（请记住，虚拟方法也有运行时性能损失，因为编译器不知道将调用哪个实现，因此无法放入具体的函数地址）可能不会比 RTTI 的成本快。

如果有人知道一种完全不用花费成本的方法，我很乐意看到它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T04:17:31.720

我的感觉是，当您深入研究对象的内部表示时，这里根本违反了 Liskov 替换原则。但是，如果您乐于公开对象的内部表示（或者出于其他原因必须这样做），那么这样的事情就会起作用。

```
class Shape
{
   virtual void std::string serialize() const =0;
   bool operator==( const Shape & s )
   {
      return this.serialize() == s.serialize();
   }
}; 
```

# stored-procedures - 创建一个检索我的表上的所有索引并重建的过程

> ID：11332076
> 
> 赞同：5
> 
> 时间：2012-07-04T15:38:26.907
> 
> 标签：stored-procedures, oracle10g, indexing, rebuild

我想创建一个检索表上所有索引并重建的过程

我用这个查询检索所有索引：

```
select index_name from user_indexes where table_name='your_table_name' 
```

我用这个查询重建：

```
alter index <index_name> rebuild; 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T18:48:53.507

```
create or replace procedure rebuild_indexes(
    p_owner in varchar2,
    p_table_name in varchar2
) as
begin
    for indexes_to_rebuild in
    (
        select index_name
        from all_indexes
        where owner = p_owner
            and table_name = p_table_name
    ) loop
        execute immediate 'alter index '||p_owner||'.'
            ||indexes_to_rebuild.index_name||' rebuild';
    end loop;
end;
/ 
```

尽管这只适用于最简单的索引。重建有很多[限制](https://docs.oracle.com/en/database/oracle/oracle-database/12.2/sqlrf/ALTER-INDEX.html#GUID-D8F648E7-8C07-4C89-BB71-862512536558__GUID-661B504B-464A-481C-8356-27ABCE58D4E6)。例如，如果索引是分区的，您需要重建每个分区或子分区。

您可能需要考虑许多选项。例如，`ONLINE`如果您希望其他人在重建期间使用索引，请添加一个`PARALLEL`选项以更快地重建（但这也会更改索引的并行设置，这可能会导致问题）等。

请记住，许多顶级 Oracle 专家认为重建索引通常是浪费时间。在极少数情况下，重建可以帮助索引，例如稀疏删除单调递增的值。但是大多数索引重建都是因为可以通过阅读 Richard Foote 的演讲[Index Internals - Rebuilding the Truth](https://richardfoote.files.wordpress.com/2007/12/index-internals-rebuilding-the-truth.pdf)来消除的神话。

重建将使您的索引*最初*运行得更快并且看起来更小，但这是因为缓存和减少了段空间分配等开销。一周后，您的索引可能会回到它们开始的位置。

# tinymce - Umbraco 富文本编辑器未加载

> ID：11332077
> 
> 赞同：2
> 
> 时间：2012-07-04T15:38:31.383
> 
> 标签：tinymce, umbraco

我一直在摸索这个问题，希望有人可以提供一些反馈。

Umbraco 版本：4.7.2

**问题**

我为一家公司开发的解决方案在加载富文本编辑器时遇到问题。他们有一个虚拟 IP 解决方案充当其服务器的代理。在客户端上调试后，我们注意到编辑器（小 mce）没有加载，因为出于某种原因，它通过 IP 而不是 URL 请求脚本和图标。显然IP在任何地方都没有硬编码......

**需要帮忙...**

客户IT部门坚持配置ok；我认为他们是对的，Umbraco 的其他一切似乎都正常工作。所以我需要帮助...

*   无论如何我可以强制从特定 URL 加载编辑器吗？

*   我已经尝试过更改 umbraco_client 上的 JS，但是当我加载编辑器时这些更改没有显示出来。它们似乎被缓存在某个地方（由压缩器处理），我重新启动了应用程序并清除了我的缓存，但没有运气。*我怎样才能让我的 JS 更改被拾取？*

**我试过的**

*   设置 document.domain="my-url"。没运气。
*   在 tinyMceConfig.config 上设置 document_base_url。当然这是用于编辑器中的链接，所以.. 不走运

我尝试过的所有其他更改都在 /umbraco_client/tinymce3/ 上的 JS 文件上，但我无法显示它们。

任何指针？

谢谢，

-科沃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:19:47.400

RTE 是不是在 umbraco 中自己呈现，还是内容不是在前端呈现？

这是一个非常好的问题 - 您是否尝试过删除该属性并再次添加？

除了你到目前为止所尝试的之外，除了上述抱歉之外，我没有其他建议。

# javascript - JavaScript html 滚动就像在 iOS 中一样

> ID：11332081
> 
> 赞同：0
> 
> 时间：2012-07-04T15:38:48.997
> 
> 标签：javascript, actionscript-3, touchscreen, stagewebviewbridge

我正在为桌面创建一个 Flash Air 应用程序。目标是创建一个应用程序，它可以打开网页、显示虚拟键盘并复制 iOS 浏览器中的滚动行为：你用手指滚动——而不是滚动条。

当我在桌面上创建它时，我需要用鼠标滚动它。应用程序几乎完成了。我正在使用 StageWebViewBridge 将网页与 Air 应用程序连接起来。现在我需要为滚动创建触摸屏效果。

为此 - 我需要 JavaScript。任何人都可以提出一些建议吗？

这是参考：[http](http://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/list) ://dev.sencha.com/deploy/touch/examples/production/kitchensink/#demo/list PS：这是 Sencha 框架 - 适用于移动设备。我的桌面设备上需要那种拖动滚动条！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:35:06.027

如果您正在寻找与 iOS 中相同类型的滚动，您应该搜索**动量滚动**。例如，您会发现那些 JavaScript 库“iScroll”和“Scrollability”。看看他们如何管理滚动。

这篇关于 iOS 上滚动如何工作的文章也很有趣：

[http://ariya.ofilabs.com/2011/10/flick-list-with-its-momentum-scrolling-and-deceleration.html](http://ariya.ofilabs.com/2011/10/flick-list-with-its-momentum-scrolling-and-deceleration.html)

希望这会有所帮助，并祝重构愉快。;)

# javascript - 将 JS 动作与 JSF 同步

> ID：11332089
> 
> 赞同：0
> 
> 时间：2012-07-04T15:39:09.260
> 
> 标签：javascript, jsf, jsf-2, onchange

在我的 JSF 页面中，我有一个带有 inputText、outputText 和提交按钮的隐藏表单。我正在使用一个脚本，它在某些事件上填充 inputText 并单击按钮。该按钮调用支持 bean 中的一个方法，我需要在其中执行一些操作，然后设置 outputText 的值。为此，我找到 UIOutput 组件并设置它的值。在我的 javascript 中，我需要在单击按钮后执行一些其他操作，但问题是完成该操作并用返回值填充 outputText 可能需要一些时间。因此 javascript 中的下一个操作不会读取正确的值。我想在 outputText 上添加一个更改事件，以便仅在更新值后执行我的操作，但我遇到了与此相同的问题[JS 事件：挂钩文本输入上的值更改事件](https://stackoverflow.com/questions/1847893/js-events-hooking-on-value-change-event-on-text-inputs)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:51:55.957

因此，如果您使用的是`a4j:commandButton`，则可以将`oncomplete`属性用于某些 JS 代码，这些代码将在完成 AJAX 请求后执行。

由于您使用的是 a`h:commandButton`和 an `f:ajax`，因此方法是使用 f:ajax 属性`onevent`，并检查它是否成功，如下所示：

```
<script>
    function doWhatever(e){
        if(e.status == 'success'){
            doYourThingHere();
        }
    }
</script>
<h:commandButton action="#{someMB.someAction}">
    <f:ajax ... onevent="doWhatever" />
</h:commandButton> 
```

如果您使用 Richfaces，您可能需要查看`a4j:ajax`组件，请参阅[此问题](https://stackoverflow.com/questions/7590361/is-there-any-difference-between-fajax-and-a4jajax)。

**更新：**删除不正确的 else 假设请求没有成功。请参阅[此问题的答案以](https://stackoverflow.com/questions/8570592/trigger-jsf-ajax-before-javascript/8574487#8574487)查看 status 属性的其他含义。

# linux - perl 获取 linux 缓存的内存号

> ID：11332094
> 
> 赞同：3
> 
> 时间：2012-07-04T15:39:34.693
> 
> 标签：linux, perl, caching, memory

我正在编写一个 perl 脚本，我真的很想获得当前在我的 linux 机器上使用的缓存内存量。当你运行“ `free -m`”时，你会得到这个输出：

```
 total       used       free     shared    buffers     cached
Mem:           496        322        173          0         33        106
-/+ buffers/cache:        183        312
Swap:         1023         25        998 
```

“缓存”下的数字是我想要的值。我一直在使用[Linux::SysInfo](http://search.cpan.org/~vpit/Linux-SysInfo-0.13/lib/Linux/SysInfo.pm)，它可以帮助我获得很多关于我的盒子的有用信息，但似乎缺少缓存内存。有谁知道 perl 中的另一个模块或优雅的方式来获取我机器上的缓存内存量？我知道我可以通过运行它来获得它：

```
my $val = `free -m`; 
```

然后在 上运行正则表达式`val`，但如果存在，我更喜欢另一种解决方案。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T15:43:43.423

运行`strace free -m`显示它正在使用`/proc/mem`：

> 打开（“/proc/meminfo”，O_RDONLY）= 3

`cat /proc/meminfo`确认其中包含您要查找的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:56:31.490

我不确定您是否*只*需要 Perl 解决方案，或者是否可以接受任何命令行解决方案。以防万一，这是一个简单的[AWK](http://www.gnu.org/software/gawk/manual/gawk.html)解决方案：

```
free -m | awk '/^Mem:/{print $NF}' 
```

这将打印您感兴趣的号码。

如果有必要，您可以将其分配给某个 shell 变量：

```
$ c_val=`free -m | awk '/^Mem:/{print $NF}'`
$ echo $c_val 
```

将显示要验证的值。

*`awk`命令解释*：

`/^Mem:/`搜索包含`Mem:`开头字符串的行。如果找到它，它会打印该行上的*最后*一项，这是我们感兴趣的数字。在 awk 中，该行根据空格拆分为字段。`$0`是整行，`$1`第一个字段，`$2`第二个等。每行的字段数由预定义的 awk`NF`变量给出，因此我们可以使用`$NF`.

我们也可以使用这个 awk 命令：

```
awk 'NR==2{print $NF}' 
```

它使用`NR`包含当前行号的预定义 awk 变量。在这种情况下，我们在第二行打印最后一项（字段）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T20:29:32.547

您可以从以下位置阅读`/proc/meminfo`：

```
perl -ne's/^Cached: *//&&print' /proc/meminfo 
```

或直接仅以 kB 为单位的值：

```
perl -anE'/^Cached/&&say$F[1]' /proc/meminfo 
```

# javascript - 如何刷新 jquery 移动复选框主题？

> ID：11332099
> 
> 赞同：2
> 
> 时间：2012-07-04T15:39:56.373
> 
> 标签：javascript, jquery, jquery-mobile, cordova

我有一个从数据库动态填充的组合框列表。

html:

```
<div data-role="fieldcontain" id="WeekDays">
<fieldset id ="WeekDaysFieldSet" data-role="controlgroup"> 
```

Javascript：

```
var len = results.rows.length;
$("#WeekDaysFieldSet").empty();
for (var i=0; i<len; i++)
{
    $("#WeekDaysFieldSet").append('<input type="checkbox" name="'+ results.rows.item(i).DayName + '"  CheckboxId="'+results.rows.item(i).id+'" class="custom"/><label for="'+results.rows.item(i).DayName+'" >'+results.rows.item(i).DayName+'</label>'); 
} 
```

当我在函数之后添加这一行时，什么都没有发生，只是选中了所有复选框，但没有添加主题。

```
 $("input[type='checkbox']:first").attr("checked",true).checkboxradio("refresh"); 
```

是否有一个特定的地方我必须在其中添加令人耳目一新的行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:08:49.277

我有一种类似的解决方案：

```
$("#group").append('<fieldset data-role="controlgroup">'
    +'<input type="checkbox" id="cb1" /><label for="cb1">text</label>'
    +'<input type="checkbox" id="cb2" /><label for="cb2">More text</label></fieldset>'
    )
    .trigger("create");

$("#check").click(function(){
    $("input[type='checkbox']:first").attr("checked",true).checkboxradio("refresh");
}); 
```

检查演示：http: [//jsfiddle.net/dhavaln/jzGv5/](http://jsfiddle.net/dhavaln/jzGv5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:56:58.430

您可以使用添加新类来应用新类

```
$("input[type='checkbox']:first").attr("checked",true).addClass('refresh'); 
```

# python - 在 python 2.7 中使用套接字连接到 python 服务器

> ID：11332102
> 
> 赞同：0
> 
> 时间：2012-07-04T15:40:01.790
> 
> 标签：python, sockets, python-2.7

`8000`我使用在端口上创建了一个 python 服务器`python -m SimpleHTTPServer`。

当我从我的网络浏览器访问此网址时，它会显示以下内容

![在此处输入图像描述](../Images/6990e8f7a53dea3f5041576098650dd6.png)

现在，我想使用 python 获取上述内容。所以，为此我所做的是

```
>>> import socket
>>> s = socket.socket(
...     socket.AF_INET, socket.SOCK_STREAM)
>>> s.connect(("localhost", 8000))
>>> s.recv(1024) 
```

但是在`s.recv(1024)`没有发生任何事情之后，它只是在那里等待并且什么也不打印。

所以，我的问题是如何使用 python 获得以上目录内容输出。也有人可以建议我一个关于`socket programming with python`. 我不太喜欢官方教程。

当我尝试使用 python 接收内容时，我还观察到一件奇怪的事情，当时没有任何反应，我无法`localhost:8000`从我的网络浏览器访问，但只要我杀死我的 python 程序，我就可以访问它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:49:18.697

可以说，在 python 中通过 http 获取内容的最简单方法是使用 urllib2 模块。例如：

```
from urllib2 import urlopen
f = urlopen('http://localhost:8000')
for line in f:
    print line 
```

这将打印出 SimpleHTTPServer 托管的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T16:47:43.240

> 但是在 s.recv(1024) 之后什么都没有发生，它只是在那里等待并且什么也不打印。

您只需打开一个套接字并等待数据，但这不是 HTTP 协议的工作方式。如果您想收到响应，您必须先发送请求（基本上，您必须告诉服务器您要列出哪个目录或下载哪个文件）。如果您真的想要，您可以使用原始套接字发送请求来训练您的技能，但强烈建议使用适当的库（请参阅 Matthew Adams 的回复和`urllib2`示例）。

> 当我尝试使用 python 接收内容时，我还观察到一件奇怪的事情，当时没有任何反应，我无法从我的网络浏览器访问 localhost:8000，但是一旦我杀死我的 python 程序，我就可以访问它。

这是因为 SimpleHTTServer 是单线程的，不支持同时多个连接。如果您想修复它，请查看此处的答案：[BasicHTTPServer、SimpleHTTPServer 和并发](https://stackoverflow.com/questions/2455606/basichttpserver-simplehttpserver-and-concurrency)。

# oracle - 欧元符号如何存储在 Oracle 的 CLOB 字段中（AL32UTF8 字符集）？

> ID：11332105
> 
> 赞同：0
> 
> 时间：2012-07-04T15:40:13.883
> 
> 标签：oracle, utf-8, clob, euro

我正在使用在 WebSphere 上运行并与 Oracle 数据库交互的 Web 应用程序（使用 AL32UTF8 字符集）。

如果我使用 Web 应用程序输入一些文本，然后按“保存”按钮，我希望将文本保存到 Oracle 数据库中的 CLOB 字段。Web 应用程序具有通过从数据库中检索文本来查看文本的功能。

当我输入包含欧元符号 (€) 的文本时，按“保存”按钮，并使用 Web 应用程序查看文本，我发现欧元符号已损坏为“？”。

我正在尝试查找数据库中的文本是否已损坏。

1.  欧元符号是否在 Oracle 中存储为“0xE2 0x82 0xAC”（3 个字节）？

2.  如果是这种情况，是否有可以确认这一点的数据库查询？（假设该表称为 SOME_TABLE，CLOB 字段称为 SOME_FIELD。）

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:25:56.303

它的存储方式与 a 相同`varchar2`，并且看起来确实是 3 个字节。您可以使用该[`dump`函数](http://docs.oracle.com/cd/E11882_01/server.112/e10592/functions055.htm#sthref1091)查看它是如何存储的，但`clob`您需要提取相关字符（在这种情况下为 3 个字节），例如使用`dbms_lob.substr`. 这是来自 Linux 上的 11gR2：

```
create table t42 (x clob, y varchar2(10));

insert into t42(x, y) values ('€','€');

select dump(dbms_lob.substr(x,3,1)) from t42;

DUMP(DBMS_LOB.SUBSTR(X,3,1))
--------------------------------------------------------------------------------
Typ=1 Len=6: 195,162,194,130,194,172

select dump(y) from t42;

DUMP(Y)
--------------------------------------------------------------------------------
Typ=1 Len=6: 195,162,194,130,194,172 
```

或十六进制：

```
select dump(dbms_lob.substr(x,3,1),16) from t42;

DUMP(DBMS_LOB.SUBSTR(X,3,1),16)
--------------------------------------------------------------------------------
Typ=1 Len=6: c3,a2,c2,82,c2,ac 
```

# python - django中的时间戳字段

> ID：11332107
> 
> 赞同：21
> 
> 时间：2012-07-04T15:40:15.390
> 
> 标签：python, mysql, django

我有一个 MySQL 数据库，现在我将所有日期时间字段生成为`models.DateTimeField`. 有没有办法`timestamp`代替？我希望能够在创建和更新等时自动更新。

django 上的文档没有这个？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-04T15:43:28.600

实际上有一篇非常好的和信息丰富的文章。这里：http: [//ianrolfe.livejournal.com/36017.html](http://ianrolfe.livejournal.com/36017.html)

页面上的解决方案略有弃用，所以我做了以下事情：

```
from django.db import models
from datetime import datetime
from time import strftime

class UnixTimestampField(models.DateTimeField):
    """UnixTimestampField: creates a DateTimeField that is represented on the
    database as a TIMESTAMP field rather than the usual DATETIME field.
    """
    def __init__(self, null=False, blank=False, **kwargs):
        super(UnixTimestampField, self).__init__(**kwargs)
        # default for TIMESTAMP is NOT NULL unlike most fields, so we have to
        # cheat a little:
        self.blank, self.isnull = blank, null
        self.null = True # To prevent the framework from shoving in "not null".

    def db_type(self, connection):
        typ=['TIMESTAMP']
        # See above!
        if self.isnull:
            typ += ['NULL']
        if self.auto_created:
            typ += ['default CURRENT_TIMESTAMP on update CURRENT_TIMESTAMP']
        return ' '.join(typ)

    def to_python(self, value):
        if isinstance(value, int):
            return datetime.fromtimestamp(value)
        else:
            return models.DateTimeField.to_python(self, value)

    def get_db_prep_value(self, value, connection, prepared=False):
        if value==None:
            return None
        # Use '%Y%m%d%H%M%S' for MySQL < 4.1
        return strftime('%Y-%m-%d %H:%M:%S',value.timetuple()) 
```

要使用它，您所要做的就是： `timestamp = UnixTimestampField(auto_created=True)`

在 MySQL 中，该列应显示为： `'timestamp' timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,`

唯一的缺点是它只适用于 MySQL 数据库。但是您可以轻松地为其他人修改它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-28T09:27:25.083

要在插入和更新时自动更新，请使用以下命令：

```
created = DateTimeField(auto_now_add=True, editable=False, null=False, blank=False)
last_modified = DateTimeField(auto_now=True, editable=False, null=False, blank=False) 
```

DateTimeField 应该存储 UTC（检查您的数据库设置，我从 Postgres 知道就是这种情况）。您可以通过以下方式`l10n`在模板和格式中使用：

```
{{ object.created|date:'SHORT_DATETIME_FORMAT' }} 
```

自 Unix 纪元以来的秒数：

```
{{ object.created|date:'U' }} 
```

请参阅[https://docs.djangoproject.com/en/1.10/ref/templates/builtins/#date](https://docs.djangoproject.com/en/1.10/ref/templates/builtins/#date)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-17T21:23:46.190

pip 包 django-unixdatetimefield 提供了一个 UnixDateTimeField 字段，您可以直接使用它（[https://pypi.python.org/pypi/django-unixdatetimefield/](https://pypi.python.org/pypi/django-unixdatetimefield/)）。

示例模型：

```
from django_unixdatetimefield import UnixDateTimeField

class MyModel(models.Model):
    created_at = UnixDateTimeField() 
```

Python ORM 查询：

```
>>> m = MyModel()
>>> m.created_at = datetime.datetime(2015, 2, 21, 19, 38, 32, 209148)
>>> m.save() 
```

数据库：

```
sqlite> select created_at from mymodel;
1426967129 
```

如果有兴趣，这里是源代码 - [https://github.com/Niklas9/django-unixdatetimefield](https://github.com/Niklas9/django-unixdatetimefield)。

免责声明：我是这个 pip 包的作者。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-26T16:32:28.803

[django-extensions](https://github.com/django-extensions/django-extensions/)有一个有用的`TimeStampedModel`：[https ://django-extensions.readthedocs.io/en/latest/model_extensions.html](https://django-extensions.readthedocs.io/en/latest/model_extensions.html)

# c - C中的IPv6地址复制优化

> ID：11332108
> 
> 赞同：3
> 
> 时间：2012-07-04T15:40:15.390
> 
> 标签：c, linux, ipv6, glibc, memcpy

由于`memcpy`现在应该高度优化，使用显式循环展开优化 IPv6 地址的副本是否仍然有意义？

```
#include <netinet/in.h>

struct in6_addr IP_1;
struct in6_addr IP_2;
;
;
IP2.__in6_u.__u6_addr32[0] = IP1.__in6_u.__u6_addr32[0];
IP2.__in6_u.__u6_addr32[1] = IP1.__in6_u.__u6_addr32[1];
IP2.__in6_u.__u6_addr32[2] = IP1.__in6_u.__u6_addr32[2];
IP2.__in6_u.__u6_addr32[3] = IP1.__in6_u.__u6_addr32[3]; 
```

请注意，上面的代码最适合 32 位架构。

有没有我不知道的最佳做法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T16:00:20.023

你应该这样做`IP2 = IP1;`，并让编译器处理它。

# android - 当复选框更改状态时如何做某事？

> ID：11332111
> 
> 赞同：11
> 
> 时间：2012-07-04T15:40:36.263
> 
> 标签：android, checkbox, oncheckedchanged, android-checkbox

这是我的代码：

```
 <CheckBox
        android:id="@+id/sprint_checkbox"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/sprint_game" />

    <CheckBox
        android:id="@+id/marathon_checkbox"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/marathon" />

    <CheckBox
        android:id="@+id/never_ending_checkbox"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/never_ending" /> 
```

我想要做的是“检测”其中一个被选中，然后将另外两个设置为“禁用”，这样用户一次只能选择一个。我尝试使用“.setOnCheckedChangeListener”，但我不能这样做，有人可以帮我一些代码吗？非常感谢你们！

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-07-04T15:51:46.263

这是通知您检查更改的方式：

```
CheckBox check = findViewById(R.id.sprint_checkbox);
check.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            //do stuff

        }
    }); 
```

您还可以让您的活动实现 OnCheckedChangeListener 接口，然后：

```
CheckBox check1 = findViewById(R.id.sprint_checkbox);
CheckBox check2 = findViewById(R.id.marathon_checkbox); 
CheckBox check3 = findViewById(R.id.never_ending_checkbox);

check1.setOnCheckedChangeListener(this);
check2.setOnCheckedChangeListener(this);
check3.setOnCheckedChangeListener(this); 
```

重写接口方法：

```
@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
    switch(buttonView.getId()){
               case R.id.sprint_checkbox:
                 //do stuff
               break;
               case R.id.marathon_checkbox:
                 //do stuff
               break;
               case R.id.never_ending_checkbox:
                //do stuff
               break;

            }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:53:03.367

我相信 RadioButton 会更适合您的目标。

```
<RadioGroup
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:id="@+id/radio_group1">
    <RadioButton
        android:id="@+id/sprint"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/rad_option1"
        android:checked="true"
    android:onClick="onRadioButtonClick"
        />
    <RadioButton
        android:id="@+id/marathon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/rad_option2"
        android:onClick="onRadioButtonClick"
         />
    <RadioButton
        android:id="@+id/neverending"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/rad_option3"
        android:onClick="onRadioButtonClick"
         />
</RadioGroup> 
```

然后在您的代码中：

```
public void onRadioButtonClick(View v) {
    RadioButton button = (RadioButton) v;
    // DO YOUR THING HERE DEPENDING ON WHICH RADIOBUTTON IS PICKED
} 
```

在这种情况下，您不必处理禁用其他选项。默认情况下，用户只有一个选项可供选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-08T19:05:46.263

```
@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

    int id = buttonView.getId();

    if(isChecked){
       switch(id){
          case R.id.sprint:
          //add to database
          ...
       }
    }
    else{
      switch(id){
          case R.id.sprint:
          //remove from database
          ...
       }
   }
} 
```

这应该允许您使用 ID。希望它有效。

# google-apps-script - 更改站点中脚本的所有者

> ID：11332116
> 
> 赞同：0
> 
> 时间：2012-07-04T15:40:48.620
> 
> 标签：google-apps-script

我在一个网站上写了一些脚本。该脚本创建一个新的电子表格并向登录用户发送邮件。我将网站的所有者更改为另一个帐户，让我只是一个编辑。但似乎脚本由我的帐户运行，许多电子表格出现在我的文档列表中，许多电子邮件是从我的地址发送的。为什么网站的所有者改变了，但脚本的所有者没有改变？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:52:09.103

您是否阅读[过有关他的主题的文档中的章节](https://developers.google.com/apps-script/scripts_google_accounts?hl=fr-FR#understandingPermissions)？它最近发生了变化，并且有几个选项可用。

![在此处输入图像描述](../Images/872e3a296e262006309a902dbd95bf80.png)

# c# - Arduino HTTP 请求循环在第一个循环后失败

> ID：11332117
> 
> 赞同：0
> 
> 时间：2012-07-04T15:40:59.280
> 
> 标签：c#, http, arduino

我试图创建一个 HTTP 请求循环，但是，它似乎在第一次之后就失败了。我不知道为什么会这样，我在网上浏览了一下，这与关闭请求然后重新启动它有关（我认为），但我似乎做不到？

我的循环代码可在此处获得[http://pastie.org/4199450](http://pastie.org/4199450)

当我运行它时，我得到以下信息：

成功！连接失败 连接失败..

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:50:45.823

您连接到服务器/端口一次，之后没有断开连接。

然后，您尝试再次连接，但仍处于连接状态。这可能是连接线第二次失败的原因。

# facebook - Internet Explorer 的 Facebook Like Box 背景问题 - 不管是浅色主题

> ID：11332118
> 
> 赞同：1
> 
> 时间：2012-07-04T15:41:01.310
> 
> 标签：facebook, internet-explorer, facebook-likebox

在 Internet Exploder 中实现 FB likebox 有点头疼。我知道这听起来很简单，但由于某种原因，我似乎无法摆脱浅色主题背景。

[http://samrowsell.co.uk/emerald/contact.php](http://samrowsell.co.uk/emerald/contact.php)

背景颜色在 Chrome、Opera、FF 和 Safari 中很好，但在 IE 中不透明！

任何帮助都会感激不尽！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:03:06.763

我猜你的意思是你需要“喜欢框”的背景颜色在 IE 中是绿色的？

我可以看到您正在 #likebox-frame 上设置背景颜色。您是否尝试过更换

```
background-color: #214401; 
```

至

```
background-color: #214401!important; 
```

那可能会覆盖它？

# c++ - 使用 QtDesigner 创建的 QWidget 添加到 QToolBar 时不可见

> ID：11332119
> 
> 赞同：1
> 
> 时间：2012-07-04T15:41:01.383
> 
> 标签：c++, qt, qt-designer

我创建了一个带有一堆 QToolButtons 的 QWidget，我设法成功地初始化它并将其显示为一个单独的窗口，使用

```
myWidget.setVisible(true) 
```

然而，我的最终目标是将此小部件添加到 QToolBar 以显示在我的 QMainWindow 的*Qt::LeftToolBarArea上。*我将*myWidget*添加到 QToolBar 使用

```
myToolBar.addWidget(myWidget) 
```

QToolBar 已成功添加到我的 QMainWindow 中（我可以看到用于在 QMainWindow 的不同工具栏区域周围移动它的句柄，并且可以移动它）。但是我的 QWidget 不可见。我试过了

```
myToolBar.addWidget(myWidget).setVisible(true) 
```

按照手册的规定，因为*setVisible()*除非在 QAction 上调用，否则将不起作用。我尝试将其他预制小部件（例如 QPushButton）添加到我的 QToolBar 中，并且已成功可视化。

我需要对我的小部件执行什么特别操作才能使其在 QToolBar 中可见？

问候，

C

<< 编辑 >>

因此，正如我所说，我使用 qtDesigner 创建了 myWidget，这样我就可以向您展示创建的内容，希望不会太长：

*OnlineAssemblerPlayer.ui*

```
<?xml version="1.0" encoding="UTF-8"?>
<ui version="4.0">
 <class>OnlineAssemblerPlayer</class>
 <widget class="QWidget" name="OnlineAssemblerPlayer">
  <property name="geometry">
   <rect>
    <x>0</x>
    <y>0</y>
    <width>211</width>
    <height>30</height>
   </rect>
  </property>
  <property name="windowTitle">
   <string>Form</string>
  </property>
  <widget class="QWidget" name="horizontalLayoutWidget">
   <property name="geometry">
    <rect>
     <x>0</x>
     <y>0</y>
     <width>211</width>
     <height>31</height>
    </rect>
   </property>
   <layout class="QHBoxLayout" name="horizontalLayout">
    <item>
     <widget class="QToolButton" name="toolButton_2">
      <property name="text">
       <string>...</string>
      </property>
     </widget>
    </item>
    <item>
     <widget class="QToolButton" name="toolButton">
      <property name="text">
       <string>...</string>
      </property>
     </widget>
    </item>
    <item>
     <widget class="QComboBox" name="comboBox"/>
    </item>
   </layout>
  </widget>
 </widget>
 <resources/>
 <connections/>
</ui> 
```

*OnlineAssemblerPlayer.h*

```
#ifndef ONLINEASSEMBLERPLAYER_H
#define ONLINEASSEMBLERPLAYER_H

#include <QWidget>

namespace Ui {
class OnlineAssemblerPlayer;
}

class OnlineAssemblerPlayer : public QWidget
{
    Q_OBJECT

public:
    explicit OnlineAssemblerPlayer(QWidget *parent = 0);
    ~OnlineAssemblerPlayer();

private:
    Ui::OnlineAssemblerPlayer *ui;
};

#endif // ONLINEASSEMBLERPLAYER_H 
```

*OnlineAssemblerPlayer.cc*

```
#include "OnlineAssemblerPlayer.h"
#include "ui_OnlineAssemblerPlayer.h"

OnlineAssemblerPlayer::OnlineAssemblerPlayer(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::OnlineAssemblerPlayer)
{
    ui->setupUi(this);
}

OnlineAssemblerPlayer::~OnlineAssemblerPlayer()
{
    delete ui;
} 
```

以及 Qt 生成的 *ui_OnlineAssemblerPlayer.h*

```
/********************************************************************************
** Form generated from reading UI file 'OnlineAssemblerPlayer.ui'
**
** Created: Wed Jul 4 16:23:39 2012
**      by: Qt User Interface Compiler version 4.8.1
**
** WARNING! All changes made in this file will be lost when recompiling UI file!
********************************************************************************/

#ifndef UI_ONLINEASSEMBLERPLAYER_H
#define UI_ONLINEASSEMBLERPLAYER_H

#include <QtCore/QVariant>
#include <QtGui/QAction>
#include <QtGui/QApplication>
#include <QtGui/QButtonGroup>
#include <QtGui/QComboBox>
#include <QtGui/QHBoxLayout>
#include <QtGui/QHeaderView>
#include <QtGui/QToolButton>
#include <QtGui/QWidget>

QT_BEGIN_NAMESPACE

class Ui_OnlineAssemblerPlayer
{
public:
    QWidget *horizontalLayoutWidget;
    QHBoxLayout *horizontalLayout;
    QToolButton *toolButton_2;
    QToolButton *toolButton;
    QComboBox *comboBox;

    void setupUi(QWidget *OnlineAssemblerPlayer)
    {
        if (OnlineAssemblerPlayer->objectName().isEmpty())
            OnlineAssemblerPlayer->setObjectName(QString::fromUtf8("OnlineAssemblerPlayer"));
        OnlineAssemblerPlayer->resize(211, 30);
        horizontalLayoutWidget = new QWidget(OnlineAssemblerPlayer);
        horizontalLayoutWidget->setObjectName(QString::fromUtf8("horizontalLayoutWidget"));
        horizontalLayoutWidget->setGeometry(QRect(0, 0, 211, 31));
        horizontalLayout = new QHBoxLayout(horizontalLayoutWidget);
        horizontalLayout->setObjectName(QString::fromUtf8("horizontalLayout"));
        horizontalLayout->setContentsMargins(0, 0, 0, 0);
        toolButton_2 = new QToolButton(horizontalLayoutWidget);
        toolButton_2->setObjectName(QString::fromUtf8("toolButton_2"));

        horizontalLayout->addWidget(toolButton_2);

        toolButton = new QToolButton(horizontalLayoutWidget);
        toolButton->setObjectName(QString::fromUtf8("toolButton"));

        horizontalLayout->addWidget(toolButton);

        comboBox = new QComboBox(horizontalLayoutWidget);
        comboBox->setObjectName(QString::fromUtf8("comboBox"));

        horizontalLayout->addWidget(comboBox);

        retranslateUi(OnlineAssemblerPlayer);

        QMetaObject::connectSlotsByName(OnlineAssemblerPlayer);
    } // setupUi

    void retranslateUi(QWidget *OnlineAssemblerPlayer)
    {
        OnlineAssemblerPlayer->setWindowTitle(QApplication::translate("OnlineAssemblerPlayer", "Form", 0, QApplication::UnicodeUTF8));
        toolButton_2->setText(QApplication::translate("OnlineAssemblerPlayer", "...", 0, QApplication::UnicodeUTF8));
        toolButton->setText(QApplication::translate("OnlineAssemblerPlayer", "...", 0, QApplication::UnicodeUTF8));
    } // retranslateUi

};

namespace Ui {
    class OnlineAssemblerPlayer: public Ui_OnlineAssemblerPlayer {};
} // namespace Ui

QT_END_NAMESPACE

#endif // UI_ONLINEASSEMBLERPLAYER_H 
```

然后我在我的 QMainWindow 的构造函数中初始化它，如下所示：

```
OnlineAssemblerPlayer *mOnlineAssemblerPlayer = new OnlineAssemblerPlayer;

QToolBar *mToolbarAssemblerPlayer = new QToolBar(tr("AssemblerPlayer"));

mToolbarAssemblerPlayer->addWidget(mOnlineAssemblerPlayer);
mToolbarAssemblerPlayer->setMovable(true);
mToolbarAssemblerPlayer->setAllowedAreas(Qt::AllToolBarAreas);
addToolBar(Qt::LeftToolBarArea, mToolbarAssemblerPlayer); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:50:11.283

您不必设置工具栏的可见性。您确定要在小部件外观中添加任何内容吗？我几乎可以肯定您没有设置任何小部件外观。您能否向我们展示“myWidget”的代码以及将小部件添加到工具栏的更多内容？

编辑

尝试添加

```
setLayout(ui->horizontalLayout); 
```

紧接着

```
retranslateUi(OnlineAssemblerPlayer); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-04T19:31:39.237

我偶然发现了类似的问题：创建了一个自定义小部件（`QWidget`带有成员的子类`QListView`）并尝试将其添加到`QToolBar`我的`QMainWindow`. 尽管成功地重新成为父母，但无论我做什么，它都没有出现`QToolBar`。虽然简单的默认小部件（按钮、文本编辑器甚至列表视图）是可见的并且运行良好。

我最终没有让它工作，但发现`QToolBar`实际上不是使用`QWidgets`而是使用`QActions`：即使通过 addWidget(wgt*) 添加小部件，它也只会添加一些与 wgt 连接的 QAction。

现在，添加包含一些默认小部件（如 QButton）的自定义小部件似乎是合乎逻辑的，QToolBar 只是不知道如何显示它。据我了解，它已经解决了**`QWidgetAction`**，它是为了将自定义小部件功能添加到`QToolBar`等`QMenu`- 所有使用`QActions`. `QWidgetAction`的虚拟功能`createWidget(QWidget*)`并`deleteWidget(QWidget*)`服务于该目标。

但在我的情况下，我避免了这个问题：不是从 继承`QWidget`，添加`QListView`它，而是直接从`QListView`. 这样我就可以用它的`addWidget()`.

# php - 类对象在 ob_start 回调中不起作用

> ID：11332122
> 
> 赞同：10
> 
> 时间：2012-07-04T15:41:07.620
> 
> 标签：php

我不知道为什么，但这个代码一个月前对我有用......也许我升级了 php 但不记得了。用 PHP 5.2.17 和 5.3.6 试过这个

为什么不能在 ob_start 函数的回调中使用类对象？

```
<?php
$f=new stdClass();
$f->title="awesome Title";

function callback($buffer) 
{
    global $f;
    $buffer=str_replace("###TITLE###", $f->title, $buffer);
    return $buffer;
}
ob_start("callback");
?>

This is the ###TITLE### 
```

输出是：

```
PHP Notice:  Trying to get property of non-object in /Users/qxxx/Sites/test/test.php on line 8
This is the 
```

应该：

> 这是很棒的标题

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T15:49:37.263

这是因为输出缓冲区被脚本终止隐式刷新。

此时 PHP 已经销毁了未引用的变量，所以在执行你的回调函数时，该变量`$f`在全局范围内并不存在。

您可以通过在关闭开始销毁对象之前显式刷新缓冲区来解决此问题，方法是将以下行放在脚本中的某个位置。

`register_shutdown_function('ob_end_flush');`

**编辑：**

我想补充一点，尽管这是目前公认的解释*“为什么”*的答案，但此处提供的解决方案并未解决问题的根本原因；`global`正在使用的事实。

很多人会告诉你这`global`是邪恶的，但没有给出理由。在这里您可以看到原因之一。

**Jack**提供的答案提供了一个更“最佳实践”的解决方案（使用闭包来维护变量引用），并且应该被视为避免`global`在新代码库中使用的正确方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T15:53:36.840

Leigh 已经很好地概述了其原因。在这种情况下使用闭包会更好：

```
ob_start(function($b) use ($f) {
        return str_replace('###TITLE###', $f->title, $b);
}); 
```

这是因为闭包将`$f`在脚本结束时保持对活动的引用，以便在运行回调函数之前不会收集垃圾。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T15:50:33.357

从 php 手册页`ob_start`和[错误报告](https://bugs.php.net/bug.php?id=40104)中我了解到，从 5.2 开始，所有对象都被销毁 @ob_start

> 此函数的行为在 php 5.2.0 中已更改：

```
<?
    global $AP;
    $AP = new ap;
    ob_start("ob_end");
    function ob_end()
    {
        global $AP;
        $r = $AP->test();
        return $r;
    }
    class ap
    {
        function test()
        {
            return "debug";
        }
    }
?> 
```

> 在旧版本中，它显示：“调试”。但是最新的 php 版本会导致错误：PHP 致命错误：在 > 非对象上调用成员函数 test()。这不是一个错误：[http ://bugs.php.net/bug.php?id=40104](http://bugs.php.net/bug.php?id=40104)

*从手册页*

# asp.net - 如何检索当前 asp.net 应用程序的性能计数器

> ID：11332125
> 
> 赞同：4
> 
> 时间：2012-07-04T15:41:21.427
> 
> 标签：asp.net, performancecounter

我想从我的 ASP.NET 应用程序中检索“ASP.NET 应用程序”类别的一些性能计数器。

我的问题是，我不知道如何为当前正在运行的 ASP.NET 应用程序确定正确的实例名称。

我目前使用此代码：

```
string instanceName = GetCurrentProcessInstanceName();

_perfCounters.Add(new PerformanceCounter("ASP.NET", "Application Restarts"));
_perfCounters.Add(new PerformanceCounter("ASP.NET Applications", "Pipeline Instance Count", instanceName));
_perfCounters.Add(new PerformanceCounter("ASP.NET Applications", "Requests Executing", instanceName));
_perfCounters.Add(new PerformanceCounter("ASP.NET Applications", "Requests/Sec", instanceName));
_perfCounters.Add(new PerformanceCounter("ASP.NET Applications", "Requests Failed", instanceName)); 
```

对于 GetCurrentProcessInstanceName，我根据在 intertubes 上找到的信息和代码片段定义了这些辅助方法：

```
 private static string GetCurrentProcessInstanceName()
    {
        return GetProcessInstanceName(GetCurrentProcessId());
    }

    private static int GetCurrentProcessId()
    {
        return Process.GetCurrentProcess().Id;
    }

    private static string GetProcessInstanceName(int pid)
    {
        PerformanceCounterCategory cat = new PerformanceCounterCategory("Process");

        string[] instances = cat.GetInstanceNames();
        foreach (string instance in instances)
        {

            using (PerformanceCounter cnt = new PerformanceCounter("Process", "ID Process", instance, true))
            {
                int val = (int) cnt.RawValue;
                if (val == pid)
                {
                    return instance;
                }
            }
        }

        return null;
    } 
```

现在的问题是，我收到以下错误： **指定类别中不存在实例“w3wp”。**

很明显，代码片段没有返回当前应用程序的正确实例 ID。

我的问题是：**如何确定（可靠）正确的值？**

附加信息：由于我了解到应该首先创建一个性能计数器对象并重新使用此实例（而不是在每次需要此对象时创建此对象），因此我在应用程序启动时启动了一个单例。出于这个原因，我无法访问当前的 HttpRequest，因为这发生在请求到达应用程序之前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-12T09:14:57.533

我找到了解决方案，而且非常简单：

```
string curentWebApplicationInstanceName = System.Web.Hosting.HostingEnvironment.ApplicationID.Replace('/', '_'); 
```

# java - 字符串连接在java中不起作用

> ID：11332132
> 
> 赞同：-1
> 
> 时间：2012-07-04T15:41:57.173
> 
> 标签：java, string, concat

我有以下代码：

```
private String foo;

public void setFoo(String bar)
{
  foo = bar + "bin/";
} 
```

我希望这段代码能够连接 bar 并`"bin/"`使用重载`'+'`运算符。当我在调试器中执行相同的代码示例时，它工作正常。出于某种原因，尽管 foo 总是等于 bar 并且从来没有`"bin/"`在其中。

实际代码：

```
 private String execpath_;

  public void setMambaPath(String executable)
  {

    if (!(executable.endsWith("/")))
      executable = executable.concat("/");

    execpath_ = executable + "bin/";
  } 
```

execpath_ = 在没有 bin/ 的情况下可以执行的其他地方：

```
StringBuilder cmd = getSshCommand_();
cmd.append(execpath_ + "mambaService"); 
```

我不在其他任何地方使用 execpath_

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:47:57.650

`String`是不可变的变量，不包含改变`String`对象本身内容的方法。所以你需要使用`concat()`方法。

或者您可以使用的第二种方法`StringBuilder`

```
private String foo;

public void setFoo(String bar)
{
  StringBuilder builder = new StringBuilder();
  builder.append(bar + "bin/");
  foo = builder.toString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:03:44.983

什么有效：

```
 public void setMambaPath(String executable)
  {

    if (!(executable.endsWith("/")))
      executable = executable.concat("/");

    executable = executable.concat("bin/");

    execpath_ = executable;
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:44:59.597

发布更多代码（包括您`foo`以后使用的地方）。要么`foo`在其他地方被修改，要么`setFoo`有一个`foo`正在修改的本地而不是`this.foo`. 我很确定这是第一个。

# iis - IIRF 重定向重写循环 (IIS6)

> ID：11332137
> 
> 赞同：0
> 
> 时间：2012-07-04T15:42:22.883
> 
> 标签：iis, mod-rewrite, redirect, loops, iirf

我正在尝试使用IIRF 指南中的[这种技术进行简单的重定向。](http://cheeso.members.winisp.net/Iirf21Help/html/2e820208-c2eb-4d6d-a134-c63f7d41244f.htm)我的规则是：

```
ReWriteRule ^/endpage /highly/embedded/page.aspx [L]
RedirectRule ^/.*page\.aspx http://www.myurl.com/endpage [R=301] 
```

我收到一条浏览器消息，提示*“Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。”*

有小费吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:49:57.500

我要做的是检查 IIRF 日志文件，看看循环发生在哪里。

然后修改规则以确保它们终止。

可能会出现意想不到的、无法想象的循环。从日志文件中应该很容易看到。

祝你好运。

# iphone - '用&'取地址是什么意思？

> ID：11332141
> 
> 赞同：0
> 
> 时间：2012-07-04T15:42:42.883
> 
> 标签：iphone, objective-c, ios

一个名为 getTimerInterval 的函数返回一个 NSTimerInterval 值

```
-(NSTimeInterval *)getInterval {
    NSTimeInterval interval = 1;
    return interval;
} 
```

Xcode 警告我

> 从具有不兼容结果类型“NSTimeInterval *”（又名“double *”）的函数返回“NSTimeInterval”（又名“double”）；在“返回间隔”行中获取带有 &” 的地址

好吧，NSInteger 类型很好：

```
-(NSIntefer)getInteger {
    NSIntefer result = 1;
    return result;
} 
```

以及直接返回号码：

```
 -(NSTimeInterval *)getInterval {
     return 1;
 } 
```

好的，在那之后调用 getInterval 函数得到一个警告：

```
[NSTimer scheduledTimerWithTimeInterval:[self getInterval] target:self selector:@selector(timerFired:) userInfo:nil repeats:YES]; 
```

> 将“NSTimeInterval *”（又名“double *”）发送到不兼容类型“NSTimeInterval”（又名“double”）的参数；取消引用 *

我对 & 和 * 感到困惑，我应该在哪里使用 & 或 *？那实际上是什么意思？
我只知道它是关于指针或其他东西的 c++ 语法，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:52:01.053

为了修复编译器警告，您需要返回它的地址，如下所示：

```
-(NSTimeInterval *)getInterval {
    NSTimeInterval interval = 1;
    return &interval;
} 
```

**但是这很糟糕**，因为您将返回方法堆栈帧上的地址，该地址在返回后消失。为什么不像这样返回它：

```
-(NSTimeInterval)getInterval {
    NSTimeInterval interval = 1;
    return interval;
} 
```

我相信这也将解决您的其他编译器错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:49:55.140

它是基本的 C（因此也是 Objective-c）语法，意思是“变量的地址”（`&`），以及相反的“地址处的值”（`*`）。该地址称为*指针*。有数百个网站非常详细地解释了这一点。

一个简单的例子：

```
NSInteger i=1;
NSInteger *ptr;

ptr = &i;

NSLog(@"The pointer %p points to value %d (which is equal to %d)",ptr,*ptr,i); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:51:49.757

Objective-C 中的指针是内存的字面位，因此当您使用指针 (*) 传递一个值时，它的内存地址随之而来。另一方面，& 符号的字面意思是“地址”，通常用于原始数据类型变量，例如 int、BOOL、double 等，在我们希望方法修改变量本身的情况下（通常是它所指向的to as well) 并返回一个可用的值。NSError 相当一致地遵循这个逻辑。

# c++ - 类设计：数组与多变量

> ID：11332146
> 
> 赞同：10
> 
> 时间：2012-07-04T15:42:52.630
> 
> 标签：c++, arrays, class-design

我有一点理论问题，但这是我在设计类时有时会遇到的问题，我在阅读其他代码时发现它的做法有所不同。以下哪一项会更好，为什么：

示例 1：

```
class Color
{
public:
  Color(float, float, float);
  ~Color();

  friend bool operator==(Color& lhs, Color& rhs);
  void multiply(Color);
  // ...
  float get_r();
  float get_g();
  float get_b();

private:
  float color_values[3];
} 
```

示例 2：

```
class Color
{
public:
  // as above

private:
  float r;
  float g;
  float b;
} 
```

在这种情况下是否应该遵循一般规则，或者它只是由程序员决定，什么似乎更有意义？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T15:55:40.607

两个都！

用这个：

```
class Color {

    // ...

private:

    union {
       struct {
           float r, g, b;
       };
       float c[3];
    };

}; 
```

然后`c[0]`将等价于`r`, 等等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T15:53:20.787

这取决于，您是否打算遍历整个数组？

在这种情况下，我认为解决方案 1 更合适。当您有在数据循环中操作的函数时，拥有这样的数组非常有用

例如

```
void BumpColors(float idx)
{
    for (int i = 0; i < 3; ++i)
        color_values[i] += idx;
} 
```

对比

```
void BumpColors(float idx)
{
    color_values[0] += idx;
    color_values[1] += idx;
    color_values[2] += idx;
} 
```

*当然*这是微不足道的，我认为这确实是一个偏好问题。不过，在极少数情况下，您可能会使用带有指向数据的指针的 API，尽管您可以这样做

```
awesomeAPI((float*)&r); 
```

我更喜欢做

```
awesomeAPI((float*)&color_values[0]); 
```

因为数组将保证其连续性，而您可能会通过错误地添加另一个在 float r 之后不相关的成员变量来弄乱连续性。

性能方面没有区别。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-04T15:48:44.083

我会说第二个是最好的。

首先，您的变量包含的数据不应该（物理上）在数组中。例如，如果你的班级有 3 个学生，不多也不少，你会把他们放在一个数组中，因为他们是一组学生，但在这里，它只是颜色。

其次，阅读您的代码的人也可以在第二种情况下非常快地理解您的变量包含的内容（r 是红色等）。数组不是这种情况。

第三，bug少了，不用记住“哦，在我的数组中，red是0，g是1，b是2”，不会误替换

```
return color_values[0] 
```

经过

```
return color_values[1] 
```

在你的代码中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-04T15:51:59.637

我认为您是对的：“这取决于程序员，而且似乎更有意义。” 如果这是我的程序，我会选择一种形式或另一种形式而不必太担心，然后编写程序的其他部分，然后再重新考虑。

面向类的设计的好处之一是它使这种内部实现细节成为*私有的，*这样以后可以方便地更改它们。

我认为您的问题确实很重要，只是我怀疑在编写更多代码之前能否很好地回答它。在摘要中，只有三个元素，并且这三个元素都有名称——红色、绿色和蓝色——所以我认为你可以选择任何一种方式。如果被迫选择，我选择示例 2。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-04T15:46:00.010

> 在这种情况下是否应该遵循一般规则，或者它只是由程序员决定，什么似乎更有意义？

这绝对取决于程序员，任何更有意义的事情。

在您的情况下，第二个选项似乎更合适。毕竟，从逻辑上思考，您的成员不是一个值数组，而是`r`,`g`和的值`b`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T15:48:17.920

使用数组的优点：

*   可维护性：可以使用数组中的值进行循环
*   可维护性：什么时候应该添加一个值（比如黄色？）而不需要更改很多代码。

坏处：

*   可读性：“值”具有更清晰的名称（在这种情况下为 r、g、b）。

在您的情况下，r、g、b 变量可能是最好的，因为不太可能添加颜色，并且超过 3 个元素的循环的重要性可能低于可读性。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-10T08:30:53.037

有时程序员会使用数组（或数据结构），以便使用 1 次写入操作将数据更快地保存到磁盘（或内存）。如果您正在读取和写入大量数据，这将特别有用。

# java - 弹簧配置错误：（cvc-etl.1）

> ID：11332147
> 
> 赞同：0
> 
> 时间：2012-07-04T15:43:05.847
> 
> 标签：java, spring, jsp

我尝试了我能想到的一切，但似乎没有任何效果。

我`Spring Framework (3.2)`在我的 java web 应用程序中使用当前版本。每次我开始我的项目时，我都会收到以下错误：

> cvc-elt.1：找不到元素“beans”的声明

这是我的 applicationContext.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.springframework.org/schema/beans      
               http://www.springframework.org/schema/beans/spring-beans-3.0.xsd"

</beans> 
```

我尝试过了 ：

1.  更改架构的版本（3.2、2.0...）
2.  将 jar 中的模式复制到 WEB-INF
3.  将 unix EOL 更改为 Windows EOL

除了使用 DTD 声明而不是 XSD 之外，似乎没有任何效果。我应该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:47:09.427

当我将 xsd 粘贴到浏览器中时，它对我来说很好。

这对我来说很好用：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
         http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
         http://www.springframework.org/schema/context
         http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <context:annotation-config/>
    <context:component-scan base-package="example"/>

</beans> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:25:03.703

Spring 无法找到 xsds。看看[这个 SO 帖子](https://stackoverflow.com/questions/10182857/getting-error-message-with-spring-cvc-elt-1-cannot-find-the-declaration-of-ele)。如果您确定您的类路径中有所需的 spring-beans jar，则您的 META-INF/spring.schemas 文件可能已损坏。spring.schemas 文件告诉 spring 使用哪个类路径在 spring jar 中找到相应的 xsd 文件。我在使用配置不正确的 maven-shade 插件时发生了这种情况。

# mysql - 选择N个具有一定类别限制的随机记录，如果少则翻转到下一个

> ID：11332148
> 
> 赞同：0
> 
> 时间：2012-07-04T15:43:10.397
> 
> 标签：mysql

我有一张表，我尝试检索一定数量的随机条目，并且我想将某个类别的某个最大条目数放在顶部，然后是另一个类别的一定数量。

如果第一个类别中没有条目，则将其允许的条目数添加到 2sd 类别的条目数中。

例如，我的表有 3 个类别（类别：“完整”、“部分”、“空”）。我想总共显示 12 个条目。

对于“完整”类别，我想显示 8。然后显示 3 个部分，最后 1 个为空。

如果少于 8 个完整，假设有 5 个，那么它将显示 5 个完整、6 个部分和 1 个空。（缺少 3 个完整的，所以 3 个基本部分 + 3 个额外的 1 = 6）。

这样做的查询是什么？

这是我实际有的查询：

```
SELECT *
FROM items
ORDER BY category='complete' DESC, category='partial' DESC, category DESC, RAND() ASC
LIMIT 12 
```

上述查询的问题是它完成了 12 次，这并不是我想要的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:52:39.163

您可以使用`USION DISTINCT`语句。

试试这样：

```
(SELECT * FROM items WHERE category = "complete" LIMIT 8)
UNION DISTINCT (SELECT * FROM items WHERE category = "partial" LIMIT 3)
UNION DISTINCT (SELECT * FROM items WHERE category = "" LIMIT 1) 
```

# r - 在 blogger 或 quantstrat 中为 R 的 addTxns() 函数添加费用

> ID：11332151
> 
> 赞同：1
> 
> 时间：2012-07-04T15:43:29.930
> 
> 标签：r, quantstrat

嗨，我正在查看吸墨纸中的 addTxns 函数，我想在 TxnData 参数（作为一列）中添加费用数据/信息。

在查看函数时，通过运行

```
blotter:::addTxns 
```

它似乎使用列名“价格”和“数量”，但自动将 TxnFees 设置/分配为零。

有没有办法覆盖它，以便它可以包含在我的分析中？

这是一个例子：

```
rm(list=ls(pos=.blotter),pos=.blotter)
rm(list=ls(pos=.instrument),pos=.instrument)
rm(list=ls(pos=.strategy),pos=.strategy)

currency('USD')
stock("SPY", currency="USD", mulitplier=1)

getSymbols('SPY', from='2012-03-01', to='2012-07-04')

portf.name <- "dummy.Portfolio"  

initPortf(portf.name, 'SPY', initDate='2012-02-29')
initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)

qty <- rep(c(1,-1), nrow(SPY)/2)
price <- SPY[,4]
txnfees <- rep(-5, nrow(SPY))
txndata <- cbind(qty, price, txnfees)
colnames(txndata) <- c("Quantity","Price","txnfees")

blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )

txns <- getTxns(Portfolio=portf.name, Symbol='SPY')

head(txns) 
```

这将显示收盘时隔日买卖 1 股，但不会显示与每笔交易相关的任何费用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T00:06:23.013

[在修订版 1100 中修补。](https://r-forge.r-project.org/scm/?group_id=316)

在[签出](https://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages)、构建和安装新代码之后，我相信这会满足您的要求：

```
library(blotter)
currency('USD')
stock("SPY", currency="USD", mulitplier=1)
getSymbols('SPY', from='2012-03-01', to='2012-07-04')
portf.name <- "dummy.Portfolio"
initPortf(portf.name, 'SPY', initDate='2012-02-29')
initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
qty <- rep(c(1,-1), nrow(SPY)/2)
price <- SPY[,4]
txnfees <- rep(-5, nrow(SPY))
txndata <- cbind(qty, price, txnfees)
colnames(txndata) <- c("Quantity","Price","TxnFees")
blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
head(txns) 
```

（这里是[我们关于 r-sig-finance 讨论的链接](https://stat.ethz.ch/pipermail/r-sig-finance/2012q3/010494.html)）

# objective-c - 使用 viewDid/WillMoveToSuperview 设置 NSView

> ID：11332156
> 
> 赞同：1
> 
> 时间：2012-07-04T15:43:55.267
> 
> 标签：objective-c, cocoa

我想知道哪种是设置 NSView 的最佳方式。

唯一适合此目的的方法似乎是`viewDidMoveToSuperview`. 在这种方法中，我可以添加子视图，并且`viewWillMoveToSuperview`可以对框架等进行几何操作。

但这些只是我的假设......我找不到有用的文档来解释执行设置操作的更好功能在哪里。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:15:38.907

您没有找到有关在何处设置`NSView`s 的任何文档的原因可能是您可以通过几乎任何方法设置视图、添加子视图等，只要在主线程上调用它即可。

对于简单`applicationDidFinishLaunching:`的应用程序，应用程序委托是一个有用的地方。

当应用程序增长时，您可能需要考虑在打开新窗口或添加视图时懒惰地执行此操作。

对于普通应用程序，您无需在`viewWillMoveToSuperview`/中执行任何操作`viewDidMoveToSuperview`。

# javascript - 从服务器 a 向服务器 b 提交 utf-8 到 iso-8859-1 问题

> ID：11332158
> 
> 赞同：1
> 
> 时间：2012-07-04T15:44:02.863
> 
> 标签：javascript, jquery, utf-8

我真的不知道怎么问这个，这是场景

在服务器 A 上，它是 utf-8，我在服务器 A 上有一个搜索表单，它提交给服务器 b，它是 iso-8859-1。因此，当我在它到达服务器 B 时提交一个像“Carrières”这样的法语单词时，它会显示为“Carrières”。

我无法更改服务器 A 或 B 上的编码，那么有没有办法从 A 提交它并且仍然在 B 上获得正确的查询？我只能编辑服务器 A 文件。

我尝试在提交之前将其转换为 html 实体，但结果是这样。我尝试将 enctype 添加到表单元素（enctype="application/x-www-form-urlencoded; charset=ISO-8859-1"），但它似乎不起作用。我还尝试了接受字符集，它似乎适用于除 IE 之外的所有内容（accept-charset="ISO-8859-1"）。

除了这些，我还有什么可以尝试的吗？也许只适用于 IE，所以我可以使用接受字符集方法？

我可以使用 jquery 1.4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T19:22:06.030

用java写了一点服务器端脚本来解决这个问题，没有找到任何JS解决方案

# jquery - 对象在 Jquery 中不支持此属性或方法错误

> ID：11332160
> 
> 赞同：1
> 
> 时间：2012-07-04T15:44:20.413
> 
> 标签：jquery, struts2

当我尝试在页面加载时使用 jquery 从表单属性中获取值时，我收到 java 脚本错误，***“对象不支持此属性或方法”。***让我知道这方面的问题。

```
alert($("[name=searchAttribute.brand.attributeValue]").val()); 
```

我正在使用 struts2 和 Jquery。在动作内部，我将 searchAttribute 作为 ValueObject 属性，其中我将品牌作为另一个属性，在其中将 attributeValue 作为另一个属性。

我需要在页面加载时根据此值加载下拉列表。

```
<script type="text/javascript">
    $(document).ready(
            function() {

            fetchDropDownValues($("#idGMMHouse").val(),'<s:property value="brandloadUrl"/>','idGMMBrand','idGMMLine');
            var fieldname = '';

                alert($("[name="+ 'searchAttribute.brand.attributeValue' +"]").val()); 

            });
</script>

<tr>
                    <td width="80px"><s:text name="filter.price.gmmhouse" /></td>
                    <td width="1px"><s:text name="filter.colon" /></td>
                    <td width="270px"> <s:select cssClass="drop" tabindex="1"
                        listKey="code" listValue="value" headerKey="0"
                        headerValue="Select One"
                        onchange="fetchDropDownValues(this.value,'%{brandloadUrl}','idGMMBrand','idGMMLine');" id="idGMMHouse"
                        name="searchAttribute.house.attributeValue" list="lstGMMHouse"></s:select></td>
                    <td width="80px"><s:text name="filter.price.gmmbrand" /></td>
                    <td width="1px"><s:text name="filter.colon" /></td>
                    <td width="160px"><s:url action="loadGMMLineDropDown"
                        id="lineloadUrl"></s:url><s:select cssClass="drop" tabindex="1"
                        id="idGMMBrand"
                        onchange="fetchDropDownValues(this.value,'%{lineloadUrl}','idGMMLine');"
                        headerKey="0" headerValue="Select One"
                        name="searchAttribute.brand.attributeValue" list="{}"></s:select></td>
                    <td width="80px"><s:text name="filter.brand.desc" /></td>
                    <td width="1px"><s:text name="filter.colon" /></td>
                    <td width="270px"><s:select cssClass="drop" tabindex="1"
                        id="idGMMLine" headerKey="0" headerValue="Select One"
                        name="searchAttribute.line.attributeValue" list="{}"></s:select></td>
                    <td align="LEFT">&nbsp;</td>
                </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:08:17.313

您使用的是什么版本的 jQuery？如果是 1.7.2，我认为它不再支持 [name=whatever] 语法。我一直在使用 jQuery/Sharepoint 进行一些 SharePoint 开发，并且在使用类似标记解析 xml 时遇到了这个问题。尝试使用`.filter()`方法来做你需要的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:15:50.683

jQuery 的 $ 选择器总是返回一个 DOM 元素的数组，即使选择器本身只匹配一个元素。因此，您应该遍历这些元素，或者如果您确定只有其中一个，则可以通过向选择器添加 [0] 数组索引来引用它。

val() 函数只能在单个 DOM 元素上解释，不能在数组上解释。

所以这

```
alert($("[name=searchAttribute.brand.attributeValue]")[0].val()); 
```

应该解决您的问题 - 当然，您应该检查数组的长度并确保其中至少有一个元素，然后再引用第一个元素。

# ruby-on-rails - Koala Rails 身份验证

> ID：11332170
> 
> 赞同：1
> 
> 时间：2012-07-04T15:45:01.427
> 
> 标签：ruby-on-rails, facebook, authentication, koala

我有以下代码：

# application_controller.rb

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :current_user

  def facebook_cookies
    @facebook_cookies ||= Koala::Facebook::OAuth.new.get_user_info_from_cookie(cookies).symbolize_keys!
  end

  def current_user
    begin
      # allow for ?access_token=[TOKEN] for iOS calls.
      @access_token = params[:access_token] || facebook_cookies[:access_token]
      @graph = Koala::Facebook::API.new(@access_token)
      # TODO: move this to session[:current_user]..
      @current_user ||= User.from_graph @graph.get_object('me', { fields: 'id,first_name,last_name,gender,birthday' })
    rescue
      nil # not logged in
    end
  end

  def authenticate
    redirect_to(root_url) if current_user.nil?
  end
end 
```

（我已经按照这里的描述设置了考拉[https://github.com/arsduo/koala/wiki/Koala-on-Rails](https://github.com/arsduo/koala/wiki/Koala-on-Rails)）

我真的不想介绍 OmniAuth，因为我想做的事情相当简单。上面的代码有效，问题是它为每个页面加载调用 Facebook = 不好。我猜我需要存储`session[:user_id]`，然后`User.find(session[:user_id])`在用户通过身份验证后调用每个后续请求？

任何人都可以提出解决这个问题的最有效方法，这样我就不用在每个页面加载时等待 Facebook 了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:05:13.980

你可以尝试这样的事情：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  before_filter :current_user, if: Proc.new{ !current_user? }

  def facebook_cookies
    @facebook_cookies ||= Koala::Facebook::OAuth.new.get_user_info_from_cookie(cookies).symbolize_keys!
  end

  def current_user
    begin
      # allow for ?access_token=[TOKEN] for iOS calls.
      @access_token = params[:access_token] || facebook_cookies[:access_token]
      @graph = Koala::Facebook::API.new(@access_token)
      # TODO: move this to session[:current_user]..
      @current_user ||= User.from_graph @graph.get_object('me', { fields: 'id,first_name,last_name,gender,birthday' })
    rescue
      nil # not logged in
    end
  end

  def authenticate
    redirect_to(root_url) if current_user.nil?
  end

  def current_user?
    !!@current_user
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:17:56.520

我有一个用于我的 facebook 身份验证和授权的实现。代码分为非状态改变方法和状态改变方法。

随意使用代码。

```
## checks if we have access to fb_info and it is not expired
## Non stagechanging
def oauth_is_online
  return !(session[:fb_cookies].nil? or session[:fb_cookies]['issued_at'].to_i + session[:fb_cookies]['expires'].to_i < Time.now.to_i - 10)
end

## checks if the user is in the database
## Non stats changing
def oauth_is_in_database
  return oauth_is_online && 0 < User.where(:fb_id => session[:fb_cookies]['user_id']).count
end

## Returns true if it is the specified user
## Non stagechanging
def oauth_is_user(user)
  return oauth_is_online && session[:fb_cookies]['user_id'] == user.fb_id
end

## Requires the user to be online. If not, hell breaks loose.
def oauth_require_online
  if !oauth_ensure_online
    render :file => "public/401.html", :status => :unauthorized, :layout => false
    return false
  end
  return session[:fb_cookies]
end

## Requires the user to be online and the correct user. If not, hell breaks loose.
def oauth_require_user(user)
  c = oauth_require_online
  return false unless c
  return c unless !oauth_is_user(user)
  render :file => "public/403.html", :status => :unauthorized, :layout => false
  return false
end

## Ensures that the user is online  
def oauth_ensure_online
  begin
    # Checks if the user can be verified af online
    if !oauth_is_in_database
      # the user is not online. Now make sure that they becomes online.
      logger.info "Creates new FB Oauth cookies"
      fb_cookies = Koala::Facebook::OAuth.new.get_user_info_from_cookie(cookies)

      # TODO In the future the session should be reset at this point
      # reset_session
      session[:fb_cookies_reload] = false
      session[:fb_cookies] = fb_cookies

      logger.info "Updating user in database."

      # Tries to load the user
      @current_user = User.where(:fb_id => session[:fb_cookies]['user_id']).first
      logger.info "User exists? => #{@current_user.nil?}"

      # creating if not found
      @current_user = User.new(:fb_id => session[:fb_cookies]['user_id']) unless !@current_user.nil?

      # Loading graph
      @fb_graph = Koala::Facebook::API.new(session[:fb_cookies]['access_token'])

      # Loading info from graph
      me = @fb_graph.get_object('me')

      @current_user.name_first = me['first_name'].to_s
      @current_user.name_last = me['last_name'].to_s
      @current_user.email = me['email'].to_s
      @current_user.fb_access_token = session[:fb_cookies]['access_token'].to_s

      # Saving the updated user
      @current_user.save!
      return oauth_is_online
    else
      # the user is online. Load variables.
      @current_user = User.where(:fb_id => session[:fb_cookies]['user_id']).first
      @fb_graph = Koala::Facebook::API.new(@current_user.fb_access_token)
    end
    return oauth_is_online
  rescue Koala::Facebook::OAuthTokenRequestError => oe
    ## TODO handle the diferent errors
    # user is not online on facebook
    # user have not authenticatet us
    # token is used allready once.
    logger.debug "FB koala OAuthTokenRequestError: #{oe}"
    return false
  end
end 
```

# python - python opencv中没有cv2.convexityDefects？（ubuntu 12.04）

> ID：11332172
> 
> 赞同：0
> 
> 时间：2012-07-04T15:45:09.310
> 
> 标签：python, ubuntu, opencv

当我尝试用 opencv+python 捕捉图像中的凸性缺陷时，但是“python 说”：

```
 defects = cv2.convexityDefects(cnt,hull)
    AttributeError: 'module' object has no attribute 'convexityDefects' 
```

python 脚本在存储库中的 ubuntu 12.04+python 2.7+opencv 下运行。代码修改自[http://opencvpython.blogspot.fr/2012/06/contours-4-ultimate.html](http://opencvpython.blogspot.fr/2012/06/contours-4-ultimate.html)

感谢您的帮助

让帕特

# javascript - 增加图像地图点击的变量计数

> ID：11332174
> 
> 赞同：1
> 
> 时间：2012-07-04T15:45:10.383
> 
> 标签：javascript, html, click, imagemap

我有一个图像地图，想跟踪它在 javascript 中被点击的次数，但我不知道如何记录点击次数。

```
<p>
    <img src="image.png" alt="missing" width="396" height="376" border="0" usemap="#thatPageMap" />

    <map name="imageMap" id="thatPageMap">
        <area shape="poly" coords="0,376,-3,269,50,251,60,234,71,225,76,192,69,178,44,127,50,82,73,62,94,48,69,46,108,30,145,20,162,29,162,16,183,34,193,41,228,35,247,38,225,47,242,47,279,53,306,78,324,117,326,150,335,179,327,200,327,221,351,234,357,263,393,275,394,378" href="thatpage.com" alt="Refresh" />
    </map>
</p> 
```

上面是图像映射，下面是 javascript 和带有计数 ID 的段落。

```
<script type="text/javascript">

    var count;

    document.getElementById("counted").innerHTML = "This has been clicked " + count + " times.";

</script>

<p id="counted"></p> 
```

每次单击图像映射时，如何增加变量计数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:47:44.077

例如像这样：

```
<script type="text/javascript">
    var count = 0;
    function updateCounter( ) {
        count++;  
        document.getElementById("counted").innerHTML = "This has been clicked " + count + " times.";
    }
</script>

<p id="counted"></p>

<map name="imageMap" id="thatPageMap" onclick="updateCounter()">
    <area shape="poly" coords="0,376,-3,269,50,251,60,234,71,225,76,192,69,178,44,127,50,82,73,62,94,48,69,46,108,30,145,20,162,29,162,16,183,34,193,41,228,35,247,38,225,47,242,47,279,53,306,78,324,117,326,150,335,179,327,200,327,221,351,234,357,263,393,275,394,378" href="thatpage.com" alt="Refresh" />
</map> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:47:56.000

给你：http: [//jsfiddle.net/PUs9g/](http://jsfiddle.net/PUs9g/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:49:10.490

创建一个函数来增加点击次数，然后从该区域的 onclick 中调用它。

```
<script type="text/javascript">

    var count;

    function clicked() {
        count = count + 1;
        document.getElementById("counted").innerHTML = "This has been clicked " + count + " times.";
   }

</script>

<p>
    <img src="image.png" alt="missing" width="396" height="376" border="0" usemap="#thatPageMap" />

    <map name="imageMap" id="thatPageMap">
        <area onclick="clicked();" shape="poly" coords="0,376,-3,269,50,251,60,234,71,225,76,192,69,178,44,127,50,82,73,62,94,48,69,46,108,30,145,20,162,29,162,16,183,34,193,41,228,35,247,38,225,47,242,47,279,53,306,78,324,117,326,150,335,179,327,200,327,221,351,234,357,263,393,275,394,378" href="thatpage.com" alt="Refresh" />
    </map>
</p> 
```

或者将 onclick 添加到地图本身。但是，如果您要计算特定区域，请从那里调用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:49:55.737

如果您在没有关键字 var 的情况下定义计数器，则它是一个全局变量。

你只需要改变

```
var count; 
```

到

```
count; 
```

# android - 如何删除数据库中没有id的行

> ID：11332176
> 
> 赞同：-2
> 
> 时间：2012-07-04T15:45:13.597
> 
> 标签：android, sqlite

我的应用程序中有一个空闲数据库。如何删除任何行？我的数据库代码如下：

```
mydb=Nickname.this.openOrCreateDatabase("private", 0, null);
            mydb.execSQL("CREATE TABLE IF NOT EXISTS numbers(nickname varchar,number INT(13))"); 
```

有谁知道这怎么可能？

```
mydb=Clear.this.openOrCreateDatabase("private", 0, null);
            mydb.execSQL("CREATE TABLE IF NOT EXISTS numbers(_id INTEGER PRIMARY KEY,nickname varchar,number INT(13))");
mydb.execSQL("DELETE FROM numbers WHERE id='=?' AND number='"+num+"'");

//num is string which contains which number i wish to delete 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:49:47.280

[SQLDatabase](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#delete%28java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)对象有一个删除方法。public int delete (String table, String whereClause, String[] whereArgs)

```
mydb.delete(TABLE, "nickname = "+ DatabaseUtils.sqlEscapeString(name), null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:48:40.880

```
mydb.execSQL("DELETE FROM your_db.your_table WHERE  <write your SQL conditions here> "); 
```

# javascript - 将 Outlook 邀请嵌入电子邮件

> ID：11332182
> 
> 赞同：0
> 
> 时间：2012-07-04T15:45:31.787
> 
> 标签：javascript, html

我想在活动的电子邮件邀请中使用日历安排功能。有没有办法将它嵌入到电子邮件中，以便人们可以从电子邮件中单击并自动将日期添加到他们在 Outlook 或 gmail 上的日记中？

首选 HTML 或 Javascript，如果是简单的是或否，那就完美了！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T10:22:28.100

没有办法 - 但您可以在链接中托管 iCalendar 邀请。

# php - 在 Ipad 上上传 PHP 文件

> ID：11332186
> 
> 赞同：0
> 
> 时间：2012-07-04T15:45:46.047
> 
> 标签：php, iphone, ipad, file-upload

早安你们会的

我有这个 php 文件上传并在计算机上运行良好，但昨晚它在 ipad 上进行了测试，但它没有工作....我不确定这是一个复杂的答案还是一个简单的答案......可能很复杂...但是如果有人能指出我正确的方向那就太好了..这是我的代码

```
<div class="content">
<form action="Gallery.php?action=insertsubmitImage" method="post" enctype="multipart/form-data">
<input type="hidden" name="MAX_FILE_SIZE" value="500000000000">
<input type="hidden" value="<?php echo $array['id']; ?>" name="id" />
<p>
<label for="image">Image</label>
<input type="file" name="image" id="image" />
</p>

<p>
<input type="submit" name="submit" id="submit" value="Add" />
</p>

</form>

</div><!--content--> 
```

任何帮助将不胜感激，并感谢您的时间:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T15:47:06.027

Mobile Safari 无法上传文件（iOS 也没有向用户公开的传统文件系统）。

如果它暴露（例如）照片库会很好，但这不是Apple已经实现的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:53:54.110

iPad（实际上是 iOS）不支持文件上传。不幸的是，您对此无能为力。iOS 6 会在出现图像等基本内容时出现。该问题的解决方法是允许用户通过使用 php 脚本将图像添加到您的画廊的特殊电子邮件地址通过电子邮件将文件附件发送到您的网站。

如果你走那条路，[这应该让你开始解析电子邮件。](http://www.electrictoolbox.com/extract-attachments-email-php-imap/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-04T15:54:37.337

Mobile Safari 不支持文件上传。这可能是因为 iOS 没有文件系统。

我认为 iOS 6 将在今年秋季推出时具有此功能。

# javascript - javascript旋转翻译函数

> ID：11332188
> 
> 赞同：2
> 
> 时间：2012-07-04T15:46:00.463
> 
> 标签：javascript, math, trigonometry

有没有人在javascript中旋转后有x/y位置的翻译功能？

例如：

```
this.mousex = event.clientX - this.el.offsetLeft;
this.mousey = event.clientY - this.el.offsetTop; 
```

给了我鼠标位置，但是我的父 div 旋转了 x 度，这当然意味着 mousex/mousey 不正确。javascript 是否有内置的功能（不是我见过的，但是..）？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T20:34:45.410

假设您的 div 顺时针旋转`t`弧度。那么变换后的坐标为：

> x' = cos(t)*x - sin(t)*y
> 
> y' = sin(t)*x + cos(t)*y

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:38:32.163

我刚刚为你写了以下内容，我已经检查过它`(1,0,Math.PI/2)`并且`(0,1,Math.PI/2)`它有效。

```
function rotatePoints(x,y,angle){
   var point={};
   point.x = x*Math.cos(angle)- y*Math.sin(angle);
   point.y = x*Math.sin(angle) + y*Math.cos(angle);
   return point;
} 
```

应该可以，请参阅[Wikipedia 中的旋转矩阵](http://en.wikipedia.org/wiki/Rotation_matrix "维基百科中的旋转矩阵")

当然，角度应该以弧度为单位。您可以通过乘以`Math.PI`并除以 180 将度数转换为弧度。角度是逆时针方向，如果您想顺时针旋转通过 -angle 或将 sin 更改为 -sin 应该可以。

# git - 轻松地将旧 svn 存储库中的错误修复复制到新的 git 存储库中。

> ID：11332191
> 
> 赞同：8
> 
> 时间：2012-07-04T15:46:24.077
> 
> 标签：git, svn, interop

我们已将大部分代码库从单一`svn`存储库移至一组`git`存储库。由于各种原因，一些工作（在现场部署的旧版本项目上）必须在旧`svn`分支中继续，在它们被移动到`git`并从 subversion 中删除之后`trunk`。

我刚刚在一个`svn`分支上做了一些这样的工作，并通过执行以下操作将存储库中的更改重新应用到`svn`存储`git`库中：

```
cd <common_svn_commit_root>
svn diff -r 12344:12345 > ~/r12345.diff
gedit ~/r12345.diff
cd <common_git_commit_root>
git apply ~/r12345.diff 
```

但是对于每次`svn`提交都执行此操作相当麻烦，尤其是在`gedit`步骤中，我必须手动将`svn`路径转换为`git`路径（通常通过在顶级目录名称前加上前缀）。

尝试到目前为止提出的一些选项的一个问题是旧`svn`回购和新`git`回购的结构不同。这是我必须编辑补丁文件的原因之一。

旧的目录结构是

```
svn
    configurations
        blah
        mine
        blam
    plugins
        foo
        core
        mine
        bar 
```

鉴于新结构是

```
svn
    plugins
        bar
git
    my_git
        my_config
        plugins
            mine
    core_git
        plugins
            core
    foo_git
        plugins
            foo 
```

我真的很想知道是否有更简单的方法来做到这一点，并了解这种情况下的最佳做法是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T09:51:19.710

您可以使用 git svn 将您的 git repo 与 svn 的更改同步。

```
git svn --authors-file=authors.txt clone https://repo/svn/reponame/trunk reponame-git-svn

# if something aborts:
cd reponame-git-svn
git svn fetch

# create a new branch
git checkout -b dvcs

git remote add dvcs-svn https://repo/git/reponame.git 
```

这将使您在 git 分支中获得 svn 源代码。从 svn 同步到 git：

```
git checkout master
# get the changes from svn
git svn rebase
git checkout dvcs

# apply the changes from svn
git rebase master

# fetch the changes from git repo to the local repo
git fetch dvcs-svn

# apply the changes from git repo to the branch dvcs
git rebase dvcs-svn/master

# push all changes back to git repo
git push dvcs-svn dvcs:master 
```

与合并相比，我们在变基方面有更好的经验。希望这对你也有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-10T09:44:06.750

没有什么可以禁止您在源代码树中拥有`git`和`svn`共存。这使得提交的选择比在不同的源树之间打补丁和复制要容易得多。

1.  `svn checkout`您已经在 git 中的分支和修订。
2.  `git clone`以及`git checkout`与步骤 1 中相同的源树状态（如果存储库非常庞大，则此处可能存在涉及裸存储库的捷径 - 您只需要`.git/`存储库数据）。
3.  将`.git/`目录复制到您的 svn checkout 根目录中。
4.  通过添加到您的文件中来告诉`git`忽略颠覆元数据。`.svn``.gitignore`
5.  如果可以的话，你也可以跑去`svn propset svn:ignore dirname .git`告诉`svn`忽略 .git 导演。

现在有很多方法可以导出提交。如果您想选择提交，这是一种方法`r12345`（假设如上所述，svn 和 git 都是最新的）：

1.  创建并签出临时 git 分支（`git checkout -b throway-branch`）；
2.  在所需的 svn 提交下获得一个`svn co -r12344`；
3.  将这些更改（将被忽略）提交到您的`git`存储库中，如下`git add -A`所示`git commit -m "SVN -r12344 (uninteresting stuff)"`；
4.  签出有趣的 svn commit by `svn co -r12345`and
5.  将其保存到您的 git 存储库：（`git add -A && git commit --date <svn commit date>` 使用此处`--date <svn commit date>`假设您要保留 svn 提交日期）。
6.  现在，您可以`git cherry-pick`对您计划向世界发布的实际分支进行最后一次有意义的提交。

当我曾经在`git`本地使用时必须处理上游颠覆存储库时，这种双存储库设置对我来说非常有效。我最终制作了一些脚本来简化这一切。例如，对您而言，脚本可以获取 svn 提交日期和消息，并为您创建一个具有相同日期和消息的 git 提交（将 svn 修订号添加到消息中以与 svn 提交匹配）。

或者，您可以像您在帖子中提到的那样使用`svn diff --git`和`git am`，这更方便，因为您不需要在不同目录之间移动补丁，并且您可以随时将您的单个工作目录与您的`svn checkout`当前目录进行比较`git commit`。

我不`git svn`知道这是否对您有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-13T14:40:05.437

假设您的源的目录结构保持不变，我建议您将远程添加到旧的 SVN 分支：

```
$ git config --add svn-remote.svn-branch.url http://my.svn.server/project/branches/my-branch
$ git config --add svn-remote.svn-branch.fetch :refs/remotes/old-svn-branch 
```

这样，您将能够跟踪旧 SVN 分支和本地分支中全新 Git 服务器上的更改，并使用[git-cherry-pick](http://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)在 Git 服务器分支上应用包含修复的提交。

编辑

Git 会跟踪文件移动。

我自己没有尝试过，但是如果您克隆 SVN 存储库，然后在本地移动目录以匹配您的新 Git 服务器结构，cherry-pick 合并可以将其应用于移动的文件。

它已经为我工作了一些文件，但也许有一些限制。这绝对值得一试。

# python - 在Python中循环文件对象时重新读取文件

> ID：11332192
> 
> 赞同：3
> 
> 时间：2012-07-04T15:46:25.220
> 
> 标签：python

从这个背景来看：

```
import itertools
lines = itertools.cycle(open('filename')) 
```

我想知道如何实现相同的“功能”，但在文件到达末尾时重新读取文件，因此如果文件在第一次迭代后发生更改，则会在开始另一个循环之前重新加载。（希望我已经解释得很好）

先感谢您！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:59:10.193

我会使用：

```
itertools.chain.from_iterable(itertools.starmap(open, itertools.repeat(("filename",)))) 
```

或者：

```
itertools.chain.from_iterable(itertools.starmap(lambda: open("filename"), itertools.repeat(()))) 
```

你也可以写一个生成器理解（我想我最喜欢这个！）：

```
(line for _ in itertools.repeat(()) for line in open("filename")) 
```

这是命令式（基于语句）等价物：

```
def cycle_file(filename):
    while True:
        for line in open(filename):
            yield line 
```

或者，使用 Python 3.3（使用[PEP 380](http://www.python.org/dev/peps/pep-0380/)子生成器委托）：

```
def cycle_file(filename):
    while True:
        yield from open(filename) 
```

所有这些的一个问题是（在 GC 平台上，例如 Jython）在文件对象被 GC 之前不会关闭文件，这可能会在一段时间后发生。为了防止打开的文件泄漏，您必须调用`close`它或使用上下文管理器（`with`语句）。这很自然地以命令式形式出现：

```
def cycle_file(filename):
    while True:
        with open(filename) as f:
            for line in f:
                yield line 
```

或者

```
def cycle_file(filename):
    while True:
        with open(filename) as f:
            yield from f 
```

试图用生成器理解关闭文件变得非常做作：

```
(line for f in (itertools.chain(f, (f for f in (f,) if f.close() and False))
                for f in (open("filename") for _ in itertools.repeat(())))
 for line in f) 
```

如果 Python 有办法指定`open`ed 文件在到达文件末尾时自行关闭，或者告诉上下文管理器迭代器在`StopIteration`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:51:28.427

就像是

```
def cycle_file(f):
    while True:
        ln = f.readline()
        if ln == "":
            f.seek(0)
            continue
        yield ln 
```

除了检查空文件可能会很好，我将把它留给你。

# ios - 如何使用Phonegap处理iOS上的后退按钮？

> ID：11332195
> 
> 赞同：0
> 
> 时间：2012-07-04T15:46:40.033
> 
> 标签：ios, cordova, back-button

我知道 Phonegap 有一个返回按钮的[事件](http://docs.phonegap.com/en/1.0.0/phonegap_events_events.md.html#backbutton)，但它只适用于 Android。不得不说，我手上没有任何iOS设备，不知道他们是否有不同的“回去”行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:48:17.260

如果你有一个，你就会知道 iPhone 没有后退按钮。

# ruby-on-rails - 使用 Rails 作为 API 应用程序时获取引用

> ID：11332196
> 
> 赞同：1
> 
> 时间：2012-07-04T15:46:44.407
> 
> 标签：ruby-on-rails, ruby, rack

我有一个 API 并想存储引用者，但是如果我执行 request.referer 或 request.env["HTTP_REFERER"] 之类的操作，我会得到 api 应用程序的 url，而不是调用者。

我之前是否曾在某种中间件中抓住它？

总结一下：

**http://www.website.com**调用**GET [http://www.api.com/ressource](http://www.api.com/ressource)**并且我想将 www.website.com 作为引用者存储在 API 应用程序中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:57:56.010

HTTP_REFERER 是浏览器在请求中设置的 HTTP 标头，包含前一个网页的地址，从该网页链接到当前请求的页面。直接导航到页面时不会设置。

当我们请求 API 时，我们必须将 HTTP_REFERER 设置为 Request Header。

例如，

[从http://client.com](http://client.com)调用[http://api.com](http://api.com)然后将 HTTP_REFERER 设置为[http://client.com](http://client.com)

希望这对你有帮助。

# wcf - wcf async with task和messageContract，为什么参数不正确？

> ID：11332197
> 
> 赞同：0
> 
> 时间：2012-07-04T15:47:01.910
> 
> 标签：wcf, asynchronous

在我的服务中，我有所有异步方法，以及我如何使用 C# 4.0，O 不能使用新的 CTP，所以我已经实现了所有的 Begin/end 方法。

当我需要从客户端调用方法时，我使用以下方式：

```
Task<bool> myTask = Task<bool>.Factory.FromAsync(myProxy.BeginMethod1, miServicio.EndMethod1, CustomClass Parameters, null);
    result = await myTask; 
```

这至少在 CustomClass 是 DataContract 时有效。

现在，我需要使用 MessageDataContract，当我使用相同的方式时，我收到一个错误，说参数数量或类型不正确。在这种情况下，我有相同的 Begin/end 方法，messageContract 作为参数，null 作为状态。

我已经检查了服务的合同和实施，我没有发现任何错误，并且服务编译正确。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:09:02.167

我建议您在客户端使用`TaskWsdlImportExtension`to create -based 异步 WCF 代理。`Task`VS2012 默认会这样做，但是你必须在 VS2010+AsyncCTP[上自己设置。](http://social.msdn.microsoft.com/Forums/en/async/thread/47994f10-da43-4c7b-9756-6432a6188d98#4710c459-43e1-4705-8692-f0b5d1106881)

# php - 没有为 CCaptcha 保留 Yii 会话数据

> ID：11332200
> 
> 赞同：3
> 
> 时间：2012-07-04T15:47:05.170
> 
> 标签：php, session, yii

要在 Yii 中启用会话，您需要做些什么特别的事情吗？

我在使用 Yii 的 CCaptcha 包时遇到了麻烦。我遇到的最终问题是验证码验证每次都失败，因为以前的验证码字符串在浏览量之间没有保留。在我的本地环境中一切正常，但在生产服务器上失败。

我已经将所有内容追溯到会话。

如果我清除我的 cookie，我可以看到`PHPSESSION`正在设置的 cookie，因此 PHP 正在完成它的工作。

但是如果我把这段代码放到页面中......

```
$session=new CHttpSession;
$session->open();
header("X-Session: " . $session['testval']. ' at ' . time());
$session['testval'] = time(); 
```

...我在我的（工作）开发服务器上得到这个结果：

*   页面浏览1：`X-Session: at 1341416149`
*   页面查看 2：`X-Session: 1341416149 at 1341416152`
*   页面查看 3：`X-Session: 1341416152 at 1341416163`

但是在生产服务器上我得到了这个：

*   页面浏览1：`X-Session: at 1341415456`
*   页面查看 2：`X-Session: at 1341415518`
*   页面查看 3：`X-Session: at 1341415530`

很明显，会话数据没有被保留。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:29:40.440

我讨厌回答自己的问题，但就我而言，问题是`CHttpSession`生产服务器上的配置不正确。我不确定`savePath`指向哪里，但是当我明确将其设置为时，`/tmp`我可以看到会话数据在页面视图中得到保留。这就是我最终在我的`/protected/config/main.php`：

```
// application components
'components'=>array(
    'session'=>array(
        'autoStart'=>true,
        'sessionName'=>'session',
        'savePath'=>'/tmp', // this is the default, but still needs to be explicitly set
        'timeout'=>1440
    ),
    ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T09:24:22.083

这不是因为“savePath”变量......而是因为您设置了一个没有空格的自定义 sessionName。Yii 默认生成会话名称为 "name-of-project" + {space} + "session" (pe "project session")

# iphone - NSObjCRuntime.h 中的 Cocos2d-x、Xcode4 构建错误

> ID：11332203
> 
> 赞同：0
> 
> 时间：2012-07-04T15:47:10.540
> 
> 标签：iphone, xcode4, objective-c++, cocos2d-x, build-error

我一直在做 QNX 平台的 cocos2d-x 项目，现在我正在转移到 iPhone 平台完成开发。我复制了所有文件并创建了一个新的 Xcode4 项目，然后将它们导入，但是当我去编译它时，我在 NSObjCRuntime.h 中得到了 40 个错误。然后它说：发出了太多错误，现在停止。一些错误阅读：未知类型名称'NSString'；你的意思是“CCString”吗？使用未声明的标识符“NSString”；你的意思是“CCString”吗？使用未声明的标识符“协议” 使用未声明的标识符“格式”；您指的是 'normal' 吗？使用未声明的标识符“namestr”

我查看了我的 Prefix.pch 文件，经过研究，这似乎是问题的一部分，但所有内容都包含在 #ifdef **OBJC** ... #endif 条件中，所以我认为这不是问题所在。我什至尝试在那里注释掉代码，但它仍然给了我同样的错误。

我怎样才能解决这个问题？

谢谢！

编辑：这实际上似乎是 OpenGLES 库的问题。当它不包括在内并且我注释掉所有 gl 调用时，错误就会消失。有什么想法吗？我使用此代码加载 OpenGLES 库：

```
#import <OpenGLES/EAGL.h> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-07T16:10:36.033

我想到了！这是因为在 Cocos2d-x 2.0 中，他们从版本 1 中改变了很多绘图功能。它不再像普通的 OpenGLES，你必须使用他们的内置方法来设置 OpenGLES。

请参阅此链接：[迁移到 v2.0](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3amigrate_to_v2.0#internals)

# python - 在numpy数组中查找包含最大值的行或列

> ID：11332205
> 
> 赞同：16
> 
> 时间：2012-07-04T15:47:18.660
> 
> 标签：python, numpy

如何在 2d numpy 数组中找到包含数组范围最大值的行或列？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-04T16:16:02.830

如果您只需要其中一个：

```
np.argmax(np.max(x, axis=1)) 
```

对于列，和

```
np.argmax(np.max(x, axis=0)) 
```

为行。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-04T15:58:16.970

您可以使用`np.where(x == np.max(x))`.

例如：

```
>>> x = np.array([[1,2,3],[2,3,4],[1,3,1]])
>>> x
array([[1, 2, 3],
       [2, 3, 4],
       [1, 3, 1]])
>>> np.where(x == np.max(x))
(array([1]), array([2])) 
```

第一个值是行号，第二个值是列号。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-07-04T16:07:14.447

您可以使用`np.argmax`with `np.unravel_index`as in

```
x = np.random.random((5,5))
print np.unravel_index(np.argmax(x), x.shape) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-01T19:06:10.127

`np.argmax`只返回展平数组中（第一个）最大元素的索引。因此，如果您知道数组的形状（您知道），您可以轻松找到行/列索引：

```
A = np.array([5, 6, 1], [2, 0, 8], [4, 9, 3])
am = A.argmax()
c_idx = am % A.shape[1]
r_idx = am // A.shape[1] 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2019-01-08T04:03:36.053

你可以`np.argmax()`直接使用。

[该示例是从官方文档](https://numpy.org/doc/stable/reference/generated/numpy.argmax.html)中复制的。

[![在此处输入图像描述](../Images/2f0120240526de76e9e90ff93ec0eeab.png)](https://i.stack.imgur.com/QVWKV.png)

`axis = 0`是在每一列`axis = 1`中找到最大值，而在每一行中找到最大值。返回是列/行索引。

# php - 用于传递 HTML 表单数据的 cgi 命令是什么？

> ID：11332214
> 
> 赞同：-3
> 
> 时间：2012-07-04T15:47:27.560
> 
> 标签：php, html, cgi

什么命令将从 HTML 表单传递的 CGI 参数列表以及相关值放入名为 $cgi_vars 的数组中？

```
$cgi_vars = $_REQUEST;
$cgi_vars = $_CGI_VARIABLE;
$cgi_vars = get_env($HTTP_SERVER_VARS);
$cgi_vars = print_r($HTTP_SERVER_VARS); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:49:55.357

有`$_GET`和`$_POST`，具体取决于您用于提交表单的方法。`$_REQUEST`也可以，但应该避免，因为从中获得的内容取决于 PHP 设置，并且混合模式提交（例如 POST 表单，但在 URL 中使用查询变量）取决于这些设置。

所以你会有

```
$get_vars = $_GET;
$post_vars = $_POST; 
```

但是没有理由这样做 - $_GET/POST 数组是超全局的，并且可以在 PHP 中的任何地方使用。您的新变量只是普通变量，受 PHP 范围规则的约束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:50:06.140

`$_POST`包含 POST 数据并`$_GET`包含来自查询字符串的数据

# android - Actionbar and Tabs and Viewpager and Fragments and Screenorientation

> ID：11332215
> 
> 赞同：3
> 
> 时间：2012-07-04T15:47:28.530
> 
> 标签：android, android-fragments, android-actionbar, android-viewpager, actionbarsherlock

我正在努力完成这项工作。我想要一个带有选项卡和 Viewpager 的操作栏。在选项卡中，应有一个或两个片段，具体取决于屏幕方向。

一或两个片段必须是 (Sherlock)ListFragments。

到目前为止，这有效。但是片段中没有任何内容。甚至没有调用第一个片段的 onCreate 或 onCreateView 。

这里主要活动：

```
public class tabActivity extends SherlockFragmentActivity
{
    private ViewPager mViewPager;
    private TabsAdapter mTabsAdapter;

    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        setTheme(R.style.Theme_Sherlock);
        super.onCreate(savedInstanceState);

        mViewPager = new ViewPager(this);
        //mViewPager.setId(R.id.pager);

        setContentView(R.layout.main);

        ActionBar bar = getSupportActionBar();
        bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
        bar.setDisplayOptions(0, ActionBar.DISPLAY_SHOW_TITLE);

        mTabsAdapter = new TabsAdapter(this, mViewPager);
        mTabsAdapter.addTab(bar.newTab().setText("Advanced"),TitlesFragment.class, null);
    } 
```

其次是强制性的 TabsAdapter。我已经使它与 ABS 一起工作。标题片段：

```
public static class TitlesFragment extends SherlockListFragment 
{
    boolean mDualPane;
    int mCurCheckPosition = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {

        View detailsFrame = getActivity().findViewById(R.id.details);
        mDualPane = detailsFrame != null && detailsFrame.getVisibility() == View.VISIBLE;

        if (savedInstanceState != null) {

            mCurCheckPosition = savedInstanceState.getInt("curChoice", 0);
        }

        if (mDualPane) {

            getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);

            DetailsFragment details = (DetailsFragment)getFragmentManager().findFragmentById(R.id.details);

            if (details == null)
            {
                details = DetailsFragment.newInstance();
                FragmentTransaction ft = getFragmentManager().beginTransaction();
                ft.replace(R.id.details, details);
                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                ft.commit();
            }
        }
    }
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState)
    {
        View mView = inflater.inflate(R.layout.list_entervalues, container, false);
        Activity mFracmentActivity = super.getSherlockActivity();
        setListAdapter(new SpecListAdapter(mFracmentActivity, Shakespeare.TITLES));

        return mView;
    }
} 
```

如果我使用 SpecListAdapter 或尝试调用 setListAdapter(new ArrayAdapter(getActivity(), android.R.layout.simple_list_item_activated_1, Shakespeare.TITLES)); 在 TitlesFragment 的 onCreate() 方法中。

main.xml（资源/布局）：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >
    <android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" />
</LinearLayout> 
```

main.xml (res/layout-land):

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="horizontal" >
    <android.support.v4.view.ViewPager
    android:id="@+id/viewpager"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1" />

    <FrameLayout android:id="@+id/details" android:layout_weight="1"
            android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:background="?android:attr/detailsElementBackground" />
</LinearLayout> 
```

# android - 使用现有 .p12 文件从 .apk 为 Playbook 创建 .bar

> ID：11332216
> 
> 赞同：1
> 
> 时间：2012-07-04T15:47:28.637
> 
> 标签：android, blackberry, apk, blackberry-playbook, pkcs#12

长话短说，一位前员工创建了我们最新版本的 Android for Playbook .bar 文件。当他离开时，他给我留下了 .p12 文件和密码，但没有留下 barsigner.csk 和 barsigner.db，如下所述：http: [//supportforums.blackberry.com/t5/Testing-and-Deployment/Backup-and-恢复-BlackBerry-Code-Signing-Keys/ta-p/837925](http://supportforums.blackberry.com/t5/Testing-and-Deployment/Backup-and-Restore-BlackBerry-Code-Signing-Keys/ta-p/837925)。是否可以仅使用 .p12 文件和密码更新 .bar 文件，而不必从 RIM 请求新的签名密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:15:48.547

据我所知，答案是否定的。更复杂的是，您将无法使用新密钥更新 AppWorld 中的现有应用程序。您应该将此问题提交给 RIM 开发人员支持以确定最佳行动方案。

# java - 静态字段无法在静态块中被前向引用，但能够被赋值

> ID：11332217
> 
> 赞同：3
> 
> 时间：2012-07-04T15:47:37.280
> 
> 标签：java, jvm

看一个测试用例：

```
public class StaticFieldTest {
    public  static  int A= 1;
    static {
        A=2;
        NAME="AAA";
        //  System.out.println(NAME);  // Can't forward reference
    }
    public  static  String NAME = "Archer";

    public static void main(String[] args) {
        System.out.println(NAME);
    }
} 
```

输出是`Archer`。很明显，这`NAME="AAA"`很乏味。为什么 Java 允许这种写法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:22:52.427

他们的[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.3)建议这是为了“在编译时捕获循环或其他格式错误的初始化”。

`NAME = AAA;`你是可编译的原因`NAME`是在语句的左侧。

* * *

[8.3.2.3。初始化期间使用字段的限制](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.3)

仅当成员是类或接口 C 的实例（分别为静态）字段并且满足以下所有条件时，成员的声明才需要在使用之前以文本形式出现：

*   该用法出现在 C 的实例（分别为静态）变量初始化器或 C 的实例（分别为静态）初始化器中。

*   **用法不在作业的左侧。**

*   用法是通过一个简单的名称。

*   C 是包含用法的最里面的类或接口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:55:50.303

您必须了解初始化的顺序

静态初始化程序和类变量初始化程序按文本顺序执行。在您的示例中，静态块在静态变量分配之前。如果换了顺序，答案就会不一样。

当一个类被实例化（对象被创建）时，**实例变量**被初始化，然后**构造**器被调用。

# python - 如何使用生成器一次性计算百分位数和排名？

> ID：11332220
> 
> 赞同：1
> 
> 时间：2012-07-04T15:47:47.453
> 
> 标签：python, algorithm, statistics, generator, median

建立更早的问题：[在单程中计算生成器的统计数据。Python](https://stackoverflow.com/questions/11308146/computing-stats-on-generators-in-single-pass-python)

正如我之前提到的，一次通过生成器计算统计数据非常快速且内存高效。复杂的统计和排名属性，如第 90 个百分位和第 n 个最小的，通常需要比标准差和平均值更复杂的工作（在上面解决了）。在处理 map/reduce 作业和大型数据集时，这些方法变得非常重要，因为将数据放入列表或计算多次传递变得非常缓慢。

下面是一个 O(n) 快速排序风格的算法，用于根据排名顺序查找数据。用于查找中位数、百分位数、四分位数和十分位数。当数据已经排序时，等价于 data[n]。但需要列表中可以拆分/透视的所有数据。

**如何使用生成器一次性计算中位数、百分位数、四分位数和十分位数？**

需要完整列表的快速排序风格算法

```
import random

def select(data, n):
    "Find the nth rank ordered element (the least value has rank 0)."
    data = list(data)
    if not 0 <= n < len(data):
        raise ValueError('not enough elements for the given rank')
    while True:
        pivot = random.choice(data)
        pcount = 0
        under, over = [], []
        uappend, oappend = under.append, over.append
        for elem in data:
            if elem < pivot:
                uappend(elem)
            elif elem > pivot:
                oappend(elem)
            else:
                pcount += 1
        if n < len(under):
            data = under
        elif n < len(under) + pcount:
            return pivot
        else:
            data = over
            n -= len(under) + pcount 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:22:16.993

您将需要存储大部分数据。直到完全存储它可能会有所回报。除非你愿意接受一个近似算法（当你知道你的数据是独立的时这可能是非常合理的）。

考虑您需要找到以下数据集的中位数：

```
0  1  2  3  4  5  6  7  8  9 -1 -2 -3 -4 -5 -6 -7 -8 -9 
```

中位数很明显`0`。但是，如果您只看到前 10 个元素，那是您当时最糟糕的猜测！`n/2`因此，为了找到 n 个元素流的中位数，您需要在内存中至少保留候选元素。如果你不知道总大小`n`，你需要保留所有！

以下是每种奇数情况的中位数：

```
0  _  1  _  2  _  3  _  4  _  4  _  3  _  2  _  1  _  0 
```

虽然他们从来都不是候选人，但您还需要记住元素 5 - 9：

```
0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 
```

产生中位数`9`。对于大小为 n 的系列中的每个元素，我可以找到一个大小为 O(2*n) 的连续系列，其中该元素为中位数。但显然，这些系列不是随机/独立的。

请参阅[用于估计统计中位数、众数、偏度、峰度的“在线”（迭代器）算法？](https://stackoverflow.com/questions/1058813/on-line-iterator-algorithms-for-estimating-statistical-median-mode-skewnes)有关相关方法的概述。

# python - Python：两个脚本使用同一个文件，一个更新它，另一个在处理时删除数据

> ID：11332225
> 
> 赞同：0
> 
> 时间：2012-07-04T15:47:58.363
> 
> 标签：python, synchronization

首先，我是 Python 新手。现在我的问题是这样的：

我有一个在远程机器上运行的回调脚本，它发送一些数据并在本地机器上运行一个脚本，处理该数据并写入文件。现在我的另一个脚本在本地需要一个一个处理文件数据，如果完成的话从文件中删除它们。问题是文件可能会不断更新。我如何对工作进行 schyncronize 以便它不会弄乱我的文件。如果可以以更好的方式完成相同的工作，请建议我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:18:18.967

我建议您查看似乎比文件更适合您的目的的命名管道或套接字。如果它真的只是在这两个应用程序之间，并且您可以控制两者的源代码。

例如，在 unix 上，您可以创建一个类似的管道（参见[os.mkfifo](http://docs.python.org/library/os.html#os.mkfifo)）：

```
import os
os.mkfifo("/some/unique/path") 
```

然后像文件一样访问它：

```
dest = open("/some/unique/path", "w")  # on the sending side
src = open("/some/unique/path", "r")   # on the reading side 
```

数据将在您的进程之间排队。这确实是[先进先出](https://en.wikipedia.org/wiki/FIFO)，但它的行为就像一个文件（大部分）。

如果你不能像这样使用命名管道，我建议在[`socket`](http://docs.python.org/library/socket.html)模块中使用本地主机上的 IP 套接字，最好是 DGRAM 套接字，因为你不需要在那里进行一些连接处理。您似乎已经知道如何建立网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:58:47.067

我建议使用其事务允许并发处理的数据库。

# ruby-on-rails - Rails 3 和 Flex，最常用的连接方式

> ID：11332232
> 
> 赞同：0
> 
> 时间：2012-07-04T15:48:39.837
> 
> 标签：ruby-on-rails, apache-flex

我想创建一个以 Flex 作为前端，Ruby on Rails 3 作为后端的应用程序。我对 Rails 有一些经验，但我以前从未使用过 Flex。因此，我正在搜索有关如何将它们一起使用的任何信息。

我发现有 RubyAMF、WebORB、RestfulX ......但是关于它们的大部分信息已经过时了。现在用什么？使用了哪些编辑器或 IDE（我使用 Redcar for Ruby，我不知道它是否与 Flex 兼容）？哪个版本的 Flex 值得在生产中使用（它是 4，不是吗）？

我还找到了“Flexible Rails”一书，但它描述了 Flex 3 和 Rails 2。也许有人知道更现代的书籍？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:11:40.500

Redcar 是一位编辑器，我不确定您所说的“与 Flex 兼容”是什么意思。

无论如何，没有任何最新的 Flex + Rails 特定书籍。

使用 Rails 作为服务层和 Flex 作为 UI 层将是唯一有意义的事情（假设在客户端使用 Flex 是有意义的，这是值得商榷的）。

据我所知，除了特定于版本的差异之外，这仍然适用于 Rails 3 + Flex 4.5。

# python - Django如何按多对多事件排序

> ID：11332235
> 
> 赞同：2
> 
> 时间：2012-07-04T15:48:42.673
> 
> 标签：python, django

假设我有 2 个模型：

```
class Recipe(models.Model):
    recipe = models.TextField()
    ingredients = models.ManyToManyField(Ingredient)

class Ingredient(models.Model):
    name = models.CharField() 
```

我想知道所有食谱中使用最多的成分是什么。

我该如何查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:26:12.940

[在https://docs.djangoproject.com/en/dev/topics/db/aggregation/](https://docs.djangoproject.com/en/dev/topics/db/aggregation/)阅读有关聚合和注释的信息

要获得最常见成分的名称：

```
from django.db.models import Count
most_common = Ingredient.objects.annotate(num_recipes=Count('recipe')).order_by('-num_recipes')[0]
print most_common.name 
```

# java - 是否可以从 gc 的角度将 java 对象标记为不可收集以节省 gc 扫描时间？

> ID：11332239
> 
> 赞同：9
> 
> 时间：2012-07-04T15:48:54.423
> 
> 标签：java, garbage-collection

是否可以从 gc 的角度将 java 对象标记为不可收集以节省 gc 扫描时间？

[类似于http://wwwasd.web.cern.ch/wwwasd/lhc++/Objectivity/V5.2/Java/guide/jgdStorage.fm.html](http://wwwasd.web.cern.ch/wwwasd/lhc++/Objectivity/V5.2/Java/guide/jgdStorage.fm.html)的东西，特别是那里*的非垃圾收集容器*（非垃圾-可收藏？）。

问题是我有很多普通的临时对象，但我有更大（几个 Gigs）的对象存储用于缓存目的。Java GC 不应该无缘无故地遍历所有那些试图找到任何要收集的缓存千兆字节，因为它们包含有自己超时的缓存数据。

通过这种方式，我可以以自定义方式将我的数据划分为无限生命和正常生命的对象，并且希望 GC 会非常快，因为普通对象的生命周期不会那么长并且数量较少。

这个问题有一些解决方法，例如[Apache DirectMemory](http://incubator.apache.org/projects/directmemory.html)和 Commercial Terracotta BigMemory(http://terracotta.org/products/bigmemory)，但是 java-native 解决方案会更好（我的意思是免费并且可能更可靠？）。另外我想避免序列化开销，这意味着它应该发生在同一个 jvm 中。据我了解，DirectMemory 和 BigMemory 主要*在堆外*运行，这意味着对象必须在 jvm 外部的内存中序列化/反序列化。简单地在 jvm 中标记非 gc 区域似乎是一个更好的解决方案。使用文件进行缓存也不是一种选择，它具有相同的无法承受的序列化/反序列化开销 - 用例是一个 HA 服务器，其中大量数据以随机（人工）顺序使用并且需要低延迟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:34:09.520

JVM 管理的任何内存也由 JVM 进行垃圾收集。任何无需反序列化即可直接用于 Java 方法的“活动”对象都必须存在于 JVM 内存中。因此，据我了解，您不能拥有不受垃圾收集影响的活动对象。

另一方面，您描述的用法应该使垃圾收集的分代方法非常有效。如果您的大物件在附近停留了一段时间，它们会被检查回收的频率降低。所以我怀疑避免这些检查会带来很多好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:52:44.433

> 是否可以从 gc 的角度将 java 对象标记为不可收集以节省 gc 扫描时间？

不，这是不可能的。

您可以通过保持对象可访问性来防止对象被垃圾收集，但 GC 仍需要跟踪它们以检查每个完整对象的可访问性；GC（至少）。

> 只是我的假设，当 jvm 饿死时，它也开始扫描所有那些不必要的对象。

是的。那是对的。但是，除非您有很多想要以这种方式处理的对象，否则开销可能微不足道。（无论如何，一个更好的主意是给 JVM 更多内存……如果可能的话。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:58:45.653

很简单，为了能够做到这一点，垃圾收集算法需要知道这样的标志，并在工作时考虑到它。

我不知道有任何标准 GC 算法具有这样的标志，因此要使其工作，您需要编写自己的 GC 算法（在确定一些可行的方式来传达此信息之后）。

原则上，事实上，您已经开始走这条路——您正在决定应该如何进行垃圾收集，而不是乐于将其留给 JVM 的 GC 算法。你描述的情况是你可以衡量的问题吗？现有垃圾收集不足但您的计划可行的东西？垃圾收集器经过了非常好的调整，所以如果“低效”的默认策略实际上比您天真的最优策略更快，我不会感到惊讶。

（在最好的情况下，进行手动内存管理很棘手且容易出错；在使用库存垃圾收集器处理其余部分时自己管理*一些*内存似乎更糟。我希望您会遇到很多边缘情况，其中 GC假设它“知道”整个堆发生了什么，这将不再是真的。如果可以的话，请避开......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T17:23:28.217

推荐的方法是使用商业 RTSJ 实现来避免 GC，或者使用堆外内存。也可以查看缓存的软引用（它们确实被收集）。

不建议这样做：如果由于某种原因您认为这些选项不够用，您可以查看不安全的直接内存访问（sun.misc.Unsafe 的一部分）。您可以使用“theUnsafe”字段来获取“Unsafe”实例。Unsafe 允许通过 'allocateMemory' 和 'freeMemory' 分配/释放内存。这不受 GC 控制，也不受 JVM 堆大小的限制。一旦你走这条路，就不能保证对 GC/应用程序的影响——这就是为什么使用字节缓冲区可能是要走的路（如果你不使用类似 RTSJ 的实现）。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T19:30:19.243

活着的 Java 对象将**始终**是 GC 生命周期的一部分。或者换一种说法，将对象标记为非 gc 与让对象被根引用（例如静态最终映射）引用的开销顺序相同。

但再想一想，放入缓存中的数据很可能是临时的，最终会被驱逐。那时你会重新开始喜欢 JVM 和 GC。如果您有 100 GB 的永久数据，您可能需要重新考虑应用程序的架构，并尝试对数据进行分片和分发（水平可扩展性）。

最后但并非最不重要的一点是，围绕序列化做了很多工作，序列化的开销（我不是在谈论 ObjectInputStream 和 ObjectOutputStream 的不良声誉）并没有那么大。不仅如此，如果您的数据主要由原始类型（包括字节数组）组成，那么有一种有效的方法可以从*堆外*缓冲区（例如[netty.io 的 ChannelBuffer](http://static.netty.io/3.5/api/org/jboss/netty/buffer/ChannelBuffer.html) ）中读取 readInt() 或 readBytes( ) 。这可能是一条路。

# c# - DataGrid.SelectedItems MVVM

> ID：11332244
> 
> 赞同：1
> 
> 时间：2012-07-04T15:49:17.947
> 
> 标签：c#, .net, wpf, xaml, mvvm

我在 MVVM 模式上开发了我的 UI，现在坚持使用 SelectedItems。您能否修改我的 XAML 并提供如何让它们进入 ViewModel 类的示例。

```
<xcdg:DataGridControl Name="ResultGrid" ItemsSource="{Binding Results}"  Height="295" HorizontalAlignment="Left" Margin="6,25,0,0" VerticalAlignment="Top" Width="1041" ReadOnly="True">
                    <xcdg:DataGridControl.View>
                        <xcdg:TableflowView UseDefaultHeadersFooters="False">
                            <xcdg:TableflowView.FixedHeaders>
                                <DataTemplate>
                                    <xcdg:ColumnManagerRow />
                                </DataTemplate>
                            </xcdg:TableflowView.FixedHeaders>
                        </xcdg:TableflowView>
                    </xcdg:DataGridControl.View>
                </xcdg:DataGridControl> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:05:31.653

您可以使用附加行为将 SelectedItems 获取/设置为数据网格。

我在 Metro 应用程序中遇到了类似的问题，所以不得不自己编写。

下面是链接

[http://www.codeproject.com/Articles/412417/Managing-Multiple-selection-in-View-Model-NET-Metr](http://www.codeproject.com/Articles/412417/Managing-Multiple-selection-in-View-Model-NET-Metr)

虽然我为 Metro 应用程序编写过，但同样的解决方案可以在 WPF/Silverlight 中进行调整。

```
 public class MultiSelectBehavior : Behavior<ListViewBase>
        {
            #region SelectedItems Attached Property
            public static readonly DependencyProperty SelectedItemsProperty = DependencyProperty.Register(
                "SelectedItems",
                typeof(ObservableCollection<object>),
                typeof(MultiSelectBehavior),
                new PropertyMetadata(new ObservableCollection<object>(), PropertyChangedCallback));

            #endregion

            #region private
            private bool _selectionChangedInProgress; // Flag to avoid infinite loop if same viewmodel is shared by multiple controls
            #endregion

            public MultiSelectBehavior()
            {
                SelectedItems = new ObservableCollection<object>();
            }

            public ObservableCollection<object> SelectedItems
            {
                get { return (ObservableCollection<object>)GetValue(SelectedItemsProperty); }
                set { SetValue(SelectedItemsProperty, value); }
            }

            protected override void OnAttached()
            {
                base.OnAttached();
                AssociatedObject.SelectionChanged += OnSelectionChanged;
            }

            protected override void OnDetaching()
            {
                base.OnDetaching();
                AssociatedObject.SelectionChanged -= OnSelectionChanged;
            }

            private static void PropertyChangedCallback(DependencyObject sender, DependencyPropertyChangedEventArgs args)
            {
                NotifyCollectionChangedEventHandler handler =  (s, e) => SelectedItemsChanged(sender, e);
                if (args.OldValue is ObservableCollection<object>)
                {
                    (args.OldValue as ObservableCollection<object>).CollectionChanged -= handler;
                }

                if (args.NewValue is ObservableCollection<object>)
                {
                    (args.NewValue as ObservableCollection<object>).CollectionChanged += handler;
                }
            }

            private static void SelectedItemsChanged(object sender, NotifyCollectionChangedEventArgs e)
            {
                if (sender is MultiSelectBehavior)
                {
                    var listViewBase = (sender as MultiSelectBehavior).AssociatedObject;

                    var listSelectedItems = listViewBase.SelectedItems;
                    if (e.OldItems != null)
                    {
                        foreach (var item in e.OldItems)
                        {
                            if (listSelectedItems.Contains(item))
                            {
                                listSelectedItems.Remove(item);
                            }
                        }
                    }

                    if (e.NewItems != null)
                    {
                        foreach (var item in e.NewItems)
                        {
                            if (!listSelectedItems.Contains(item))
                            {
                                listSelectedItems.Add(item);
                            }
                        }
                    }
                }
            }

            private void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
            {
                if (_selectionChangedInProgress) return;
                _selectionChangedInProgress = true;
                foreach (var item in e.RemovedItems)
                {
                    if (SelectedItems.Contains(item))
                    {
                        SelectedItems.Remove(item);
                    }
                }

                foreach (var item in e.AddedItems)
                {
                    if (!SelectedItems.Contains(item))
                    {
                        SelectedItems.Add(item);
                    }
                }
                _selectionChangedInProgress = false;
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T15:57:43.637

如果您想要多选并且想要获得那些选定的项目，可能还有更多工作要做。您是否要存储选定的项目，并且在执行某些操作（单击按钮或类似的操作）时，您想使用这些 selectedItems 并对其进行处理？

这里有一个很好的例子：

[使用 MVVM 从 DataGrid 中获取 SelectedItems](http://asimsajjad.blogspot.de/2011/07/get-selecteditems-from-datagrid-using.html)

它声明它是为 Silverlight 设计的，但它也可以在带有 MVVM 的 WPF 中工作。

也许这是一种更直接的方法：

[获取 WPF 数据网格中的选定项目](http://www.codeproject.com/Questions/119505/Get-Selected-items-in-a-WPF-datagrid)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-21T18:00:03.153

为连接每个只读集合或非依赖属性创建附加行为将需要大量工作。一个简单的解决方案是使用视图将引用传递给视图模型。

```
Private ReadOnly Property ViewModel As MyViewModel
    Get
        Return DirectCast(DataContext, MyViewModel)
    End Get
End Property

Private Sub MyView_Loaded(sender As Object, e As RoutedEventArgs) Handles Me.Loaded
    If ViewModel.SelectedItems Is Nothing Then
        ViewModel.SelectedItems = MyDataGrid.SelectedItems 
    End If
End Sub 
```

# django - 如何在 Django 中制作 i18n 页面？

> ID：11332246
> 
> 赞同：0
> 
> 时间：2012-07-04T15:49:22.017
> 
> 标签：django, model, internationalization, django-hvad

是否有任何模块或正确的方法可以在 Django 中制作简单的多语言页面？

我应该使用一些模型模式吗？或者我可以按照我想要的方式制作它？django-multilingual 仍然是实际的吗？

例如这是我的模型

```
class Page(models.Model) :
    title = models.CharField(max_length=200)
    body = models.TextField()
    creation_date = models.DateField() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T09:44:43.067

是的，我需要使用一些应用程序以使其正确。Django-multilingual 现在不在开发中（它甚至不适用于当前的 Django 版本）。

所以，我找到了两个满足我需求的包。本来是 django-hvad 和 django-modeltranslation，但是 django-hvad 仍然是 aplha 并且有一些麻烦（[像这样](https://github.com/KristianOellegaard/django-hvad/issues/60)），所以我选择了 django-modeltranslation。

# javascript - 使用 javascript 或 Jquery 从 iFrame 重定向

> ID：11332247
> 
> 赞同：2
> 
> 时间：2012-07-04T15:49:22.523
> 
> 标签：javascript, jquery, html

如果将网站加载到 iframe 中，我需要在该 iFrame 的子页面上放置什么代码才能脱离 iFrame 并将该页面加载为顶部文档或重定向到该页面

刚刚找到代码

```
<script>
if(window.top !== window.self){
window.top.location.href = "http://www.blah.com"; 
}
</script> 
```

更好的代码：

```
<style> html{display : none ; } </style>
<script>
   if( self == top ) {
       document.documentElement.style.display = 'block' ; 
   } else {
       top.location = self.location ; 
   }
</script> 
```

下面的代码示例：

```
<!DOCTYPE html>
<html lang="en">
<head>
blah
</head>
<body>
<iframe src="www.blah.com"></iframe>
</body>
</html> 
```

我需要在（在本例中）www.blah.com 上放置什么 JQuery 或 javascript，以便它脱离 iframe 并直接向用户显示 www.blah.com？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:51:19.130

这应该工作： -

```
<script type="text/javascript">
  if (window!=top){top.location.href=location.href;}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T15:55:02.677

您正在寻找的东西称为[Framekiller](http://en.wikipedia.org/wiki/Framekiller)

这是该文章中建议的实现：

```
<style> html{display : none ; } </style>
<script>
   if( self == top ) {
       document.documentElement.style.display = 'block' ; 
   } else {
       top.location = self.location ; 
   }
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T15:53:16.880

```
window.top.location.href = "http://blah.com/"; 
```

如此处所述（有更完整的解释）： [Redirect parent window from an iframe action](https://stackoverflow.com/questions/580669/redirect-parent-window-from-an-iframe-action-using-javascript)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T15:55:38.393

如果您使用链接设置 target="_top" 属性可能会完成这项工作。

# php - 修改PHP电子邮件中的日期标题？

> ID：11332255
> 
> 赞同：4
> 
> 时间：2012-07-04T15:49:58.657
> 
> 标签：php, email, sendmail

是否可以使用 PHP 的邮件功能/sendmail 操作日期标头（网站服务器是 linux，所以我相信它在下面使用 sendmail）？

我正在尝试测试（基于 Windows）电子邮件检查器的错误处理，并且需要在消息中生成无效的日期标头，但是当我使用 php 邮件发送消息时，即使我包含自定义日期标头，它似乎被邮件服务器覆盖，我的自定义标头被忽略了。我猜我可能需要一个用于 sendmail 的附加参数来篡改该标头，但我似乎无法找到该参数是什么，或者这是否可能。

这是我要发送的内容（删除了个人域信息）

```
$headers = "From: ..................\r\n";
$headers .= "Message-ID: <" . md5(uniqid(time())) . "@..................>\n";
$headers .= "MIME-Version: 1.0\n";
//$headers .= "Date: ".date("D, d M Y H:i:s") . " UT\n"; //a valid header for comparison
$headers .= "Date: Tuesday\n"; // intentionally bogus email header
$headers .= "Reply-To: ..................\n";
$headers .= "Return-Path: ..................\r\n";
$headers .= "X-Priority: 3\r\nX-MSMail-Priority: Normal\n";
$headers .= "X-Mailer: PHP/".phpversion()."\n";
$headers .= "Content-type: text/plain; charset=iso-8859-1\n";
$headers .= "\n";
$success=mail($to, $s_subject, $s_emailmsg, $headers); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:04:11.093

假设您编写了一个通过 运行的电子邮件检查器`procmail`，一种更简单的方法可能是自己构建电子邮件消息并通过标准输入将其直接发送到测试脚本。

以这种方式编写单元测试更容易，因为它绕过了其他邮件服务器的任何干扰。当您执行此操作时，请确保第一行以`MAIL FROM xx@yy.com`.

# html - 相同 CSS 类的图像（Bootstrap 中的 .thumbnail）以各种尺寸显示

> ID：11332257
> 
> 赞同：3
> 
> 时间：2012-07-04T15:50:03.567
> 
> 标签：html, css, twitter-bootstrap, thumbnails

我遇到了设计/css 问题。我正在使用 Twitter Bootstrap 并有一个 .row-fluid，其中包含一个无序列表的类缩略图。在其中，我有三个 .span3 类，我在其中显示作为 .thumbnail 类链接的图像（下面的代码）。问题是，由于某种原因，图像显示为不同的尺寸。您可以参考我在这里谈论的内容：http: [//douglascrescenzi.com/#portfolio](http://douglascrescenzi.com/#portfolio)

HTML 代码：

```
<div class="row-fluid">
    <ul class="thumbnails">
        <li class="span3">
            <h2>Companies I've founded</h2>
            <a href="http://www.herodaysecurity.com" class="thumbnail" target="_blank">
            <img src="images/hero-day.jpg" alt="Hero Day Security"></a>
            <br>
            <br>
            <a href="http://www.crowdrouser.com" class="thumbnail" target="_blank">
            <img src="images/crowdrouser.jpg" alt="CrowdRouser"></a>
        </li>
        <li class="span3">
            <h2>Employers</h2>
            <a href="http://syracusestudentsandbox.com/" class="thumbnail" target="_blank">
            <img src="images/student-sandbox.jpg" alt="Syracuse Student Sandbox"></a>
            <br>
            <br>
            <a href="http://ischool.syr.edu/" class="thumbnail" target="_blank">
            <img src="images/su-informaiton-studies.jpg" alt="Syracuse University - School of Information Studies"></a>
            <br>
            <br>
            <a href="http://www.mitre.org" class="thumbnail" target="_blank">
            <img src="images/mitre.jpg" alt="The MITRE Corporation"></a>
        </li>
        <li class="span3">
            <h2>Freelance</h2>
            <a href="http://www.accsocialsecurityservices.com/" class="thumbnail" target="_blank">
            <img src="images/acc-sss2.png" alt="ACC Social Security Services"></a>
        </li>
    </ul>
</div> <!--row-fluid --> 
```

引导 CSS：

```
.thumbnails {
  margin-left: -20px;
  list-style: none;
  *zoom: 1;
}

.thumbnails:before,
.thumbnails:after {
  display: table;
  content: "";
}

.thumbnails:after {
  clear: both;
}

.row-fluid .thumbnails {
  margin-left: 0;
}

.thumbnails > li {
  float: left;
  margin-bottom: 18px;
  margin-left: 20px;
}

.thumbnail {
  display: block;
  padding: 4px;
  line-height: 1;
  border: 1px solid #ddd;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
  -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075);
     -moz-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075);
          box-shadow: 0 1px 1px rgba(0, 0, 0, 0.075);
}

a.thumbnail:hover {
  border-color: #0088cc;
  -webkit-box-shadow: 0 1px 4px rgba(0, 105, 214, 0.25);
     -moz-box-shadow: 0 1px 4px rgba(0, 105, 214, 0.25);
          box-shadow: 0 1px 4px rgba(0, 105, 214, 0.25);
}

.thumbnail > img {
  display: block;
  max-width: 100%;
  margin-right: auto;
  margin-left: auto;
}

.span3 {
  width: 220px;
}

.row-fluid .span3 {
  width: 23.404255317%;
  *width: 23.3510638276383%;
} 
```

我确信这不是最好的做事方式，但它几乎可以工作（除了显示的图像大小略有不同。

任何想法，建议都非常感谢。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:56:31.917

您的图像以不同的尺寸显示，因为它们具有不同的高度/宽度比。它们都被缩小到`340px`宽度，但如果它们中的一个最初`680x680`和另一个`680x340`在缩小之后，它们将分别是`340x340`和`340x170`。

要解决此问题，您可能希望自己将图像剪切为合适的尺寸。另外我建议进行一些图像优化，因为您在该页面上的图像宽度超过 2000 像素，但您只需要 340。这将节省大量带宽并使您的页面加载速度更快。

有一个快速肮脏的修复，我**不**建议使用，但你应该知道它 - 只需将图像的高度设置为相同：

```
.thumbnail > img {
    display: block;
    height: 100px; /* add this */
    margin-left: auto;
    margin-right: auto;
    max-width: 100%;
} 
```

# mysql - mysql字段索引

> ID：11332260
> 
> 赞同：0
> 
> 时间：2012-07-04T15:50:09.400
> 
> 标签：mysql, indexing

我有一张桌子`products`，我有像`product_name`, `product_id`AND之类的列`product_code`。索引这三个字段的最佳方法是什么？将它们一一索引，还是应该为三者的组合创建一个索引？请记住，将有一个搜索引擎列出我的产品，并带有这三个字段的过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:54:07.540

您应该始终根据影响您的表**的查询**来索引列的不同组合。单个列索引无效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:56:08.800

如果列的组合应该是唯一的，则使用所有三列创建一个唯一索引。否则索引查询中常用的列。如果您创建包含许多或一列的索引，我认为这并不重要。

# c++ - C/C++：使用 netbeans 7.1.2 构建由相互依赖的子项目组成的项目

> ID：11332264
> 
> 赞同：1
> 
> 时间：2012-07-04T15:50:26.820
> 
> 标签：c++, eclipse, netbeans, eclipse-cdt, dependency-management

我正在构建一个由多个子组件（共享库和实际应用程序）组成的应用程序框架。

我想使用 netbeans 7.1.2 来构建项目。然而，在过去，我只使用 Netbeans 构建了单一的 C/C++ 应用程序。

我徒劳地寻找有关如何使用netbeans创建/构建具有多个相互依赖的子项目的项目的说明（类似于.Net世界中“解决方案”的概念）。

有没有人设法使用 Netbeans 构建一个由相互依赖的子项目组成的 C 项目和/或是否有显示如何执行此操作的链接？

**[[更新]]**

看起来这是一个[已知的缺失功能](http://wiki.netbeans.org/CNDProjectsGroupsSpec)，或者我错过了什么（双关语无意）。

如果 Netbeans 无法解决这个问题而 Eclipse 可以，这将是迁移到 Eclipse 的好时机（我已经下载了 Juno 并且现在正在熟悉 GUI ......）

# jquery - 悬停或单击时的 Jquery 下拉菜单

> ID：11332265
> 
> 赞同：3
> 
> 时间：2012-07-04T15:50:30.330
> 
> 标签：jquery, click, hover, drop-down-menu, children

我有一个菜单，如下所示。我希望第一级孩子出现在悬停或点击时（因此它也适用于 iPad）。当悬停（或单击）一个一级子级时，我希望它的二级子级出现（如果它们存在）。在悬停或单击不同的 DOM 元素时，所有子菜单都应再次隐藏。

此外，当用户在页面上时，我希望将菜单折叠起来，直到他将鼠标悬停在或单击不同的菜单项，以便他始终可以看到他在导航中的位置。

我正在为一个应该能够使用后端创建和更改他的导航菜单的朋友在 Wordpress 中构建它。因此，向某些元素添加特定的类或 ID 不是一种选择。

```
<style>
.sub-menu {display: none;}
</style>

<ul class="menu">
  <li>child 1
    <ul class="sub-menu">
      <li>child 1.1
        <ul class="sub-menu">
          <li>child 1.1.1</li>
          <li>child 1.1.2</li>
        </ul>
      </li>
      <li>child 1.2
        <ul class="sub-menu">
          <li>child 1.2.1</li>
          <li>child 1.2.2</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>child 2
    <ul class="sub-menu">
      <li>child 2.1</li>
      <li>child 2.2</li>
    </ul>
  </li>
</ul> 
```

这是我想出的，但它不起作用。当悬停在子 1.1 上时，会显示 1.1 和 1.2 的兄弟姐妹。

```
$("ul.menu li").hover(function() { 
    $(this).find("ul.sub-menu").not("ul.sub-menu li ul.sub-menu").slideDown(); 
} , function() {  
    $(this).find("ul.sub-menu").hide(); 
});

$("ul.menu li ul.sub-menu").hover(function() { 
    $(this).find("ul.sub-menu").slideDown(); 
} , function() { 
    $(this).find("ul.sub-menu").hide(); 
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:11:56.613

通过直接定位来尝试以下解决方案`ul`

***解决方案 A***：

* * *

```
//  previous (following) is very inefficient and slow:
//   -- $(this).find("ul.sub-menu").not("ul.sub-menu li ul.sub-menu").slideDown(); 
//  Rather, target the exact ULs which are Direct Children

$("ul.menu").find('li').hover(
    function() {
        $(this).find('> ul').slideDown();
    },
    function() {
        $(this).find('> ul').slideUp();
        //  If something Slides Down, it should slide up as well,
        //  instead of plain hide(), your choice - :)
    }
); 
```

***解决方案 B***：

* * *

在两个 UL 上获得更高的精度

**更新**：解决方案 A 工作正常并使 B 变得多余

```
$("ul.menu").find('> li').hover(
    function() {
        $(this).find('> ul').slideDown();
    },
    function() {
        $(this).find('> ul').hide();
    }
);

$("ul.sub-menu").find('> li').hover(
    function() {
        $(this).find('> ul').slideDown();
    },
    function() {
        $(this).find('> ul').hide();
    }
); 
```

检查**[小提琴](http://jsfiddle.net/OMS_/XDkXq/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:00:42.377

这是未经测试的..您必须对其进行一些扩展。

```
$('ul.menu li').siblings('ul:first-child').on('click', function() {
if($(this).is(':visible')) {
    $(this).hide();
}
else {
    $(this).show(); 
}
})

$('ul.menu li').siblings('ul:first-child').hover(
function() {
    $(this).show();
},
function() {
    $(this).hide();
}
) 
```

编辑：我看到你的结构不一致。有时您将列表放置在 li 元素中，有时将其放置为同级元素...

# iphone - didFailToRegisterForRemoteNotificationsWithError 被触发，如何获取更多信息？

> ID：11332267
> 
> 赞同：0
> 
> 时间：2012-07-04T15:50:43.997
> 
> 标签：iphone, ios, objective-c, apple-push-notifications

我第一次使用 APNS，我尝试使用 iOS 5.0.1 设备运行概念验证，结果`didFailToRegisterForRemoteNotificationsWithError`被触发。我知道它已被解雇，因为我显示`UIAlertView`通知错误：

```
- (void)application:(UIApplication*)application
   didFailToRegisterForRemoteNotificationsWithError:(NSError*)error
{
   // Inform the user that registration failed
   NSString* failureMessage = @"There was an error while trying to \

     register for push notifications.";

   UIAlertView* failureAlert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                      message:failureMessage
                                                     delegate:nil
                                            cancelButtonTitle:@"OK"
                                            otherButtonTitles:nil];

   [failureAlert show];
   [failureAlert release];
} 
```

如何获取有关错误的更多信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T15:59:11.253

尝试做类似`NSLog(@"%@", error.userInfo");`的事情，应该将一些信息输出到终端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:37:26.423

我最终得到了这段代码，它有效，让我进步了一点：

```
NSString* failureMessage = error.localizedDescription;    
UIAlertView* failureAlert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                 message:failureMessage
                                                 delegate:nil
                                                 cancelButtonTitle:@"OK"
                                                 otherButtonTitles:nil];
[failureAlert show]; 
```

对不起，这里是 iObjectiveC 菜鸟。

# ruby-on-rails-3 - rails 路由到特定脚本

> ID：11332269
> 
> 赞同：0
> 
> 时间：2012-07-04T15:50:46.627
> 
> 标签：ruby-on-rails-3

我需要创建`/branch`运行脚本的路由`/lib/branch.rb`，我只需要显示一个字符串，该字符串显示在浏览器中我当前部署在登台服务器上的 git 分支。我已经写了脚本，但不明白如何将它安装到 rails 路线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:55:28.947

Rails 路由将请求路由到控制器。

所以把你的代码放在 /app/controllers/branch-controller.rb

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:06:35.170

Rails 路由将请求分派到应用程序。您可以将代码放入 Controller 或 Rack 应用程序（仅限 Rails 3）。

如果你使用的是 Rails 3，你可以使用 Rack API 在你的`routes.rb`.

`match "/branch" => proc { |env| [ 200, {}, [ %{your script call} ] ] }`

看看这篇文章：[http ://www.railsdispatch.com/posts/rails-routing](http://www.railsdispatch.com/posts/rails-routing)

# redirect - 如何为 301 重定向用户在新站点上弹出窗口？

> ID：11332270
> 
> 赞同：2
> 
> 时间：2012-07-04T15:50:47.237
> 
> 标签：redirect, popup

我刚刚将一个站点迁移到一个新域（采用新设计），并使用 .htaccess 将旧站点重定向到新站点并重定向 301。由于新站点完全不同，我担心用户可能会迷失方向。有没有办法在新站点上弹出一个只有当用户从旧站点重定向时才能获得的弹出窗口？一直在对此进行搜索，但关键字似乎只会导致弹出重定向到另一个站点的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:00:59.427

我可以想到几种方法来做到这一点：

*   在 301 中重定向到另一个页面（www.blah.com/tour 而不是 www.blah.com），我会在那里放置逻辑以显示弹出窗口

*   在 301 中重定向到另一个页面并在那里设置一个 cookie 并重定向到原始页面。然后，向原始页面添加逻辑以在 cookie 存在时显示弹出窗口（并删除 cookie）

*   检查新站点中的推荐人，如果它与旧站点匹配，则显示弹出窗口

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:03:40.123

您的问题归结为检测来自 301 重定向的请求 - 弹出窗口和可用性是一个单独的（更简单？！）问题。

不幸的是，检测 301 重定向是不精确的事情之一，需要多种技术才能接近 100%。我说附近，但从来没有完全在那里 - 有点像浏览器检测。

一种选择是将查询字符串 (GET) 参数附加到重定向的 URL，例如

```
www.example.com/LandingPage.html?isRedirected=true 
```

您还可以在 cookie 中设置相同的信息（但如果 cookie 被禁用或清除，则无法使用）。

另一种选择是检查[Referrer](http://en.wikipedia.org/wiki/Referer)标头 - 但同样，这些可能会根据浏览器的实现而有所不同，并且可能会被伪造，尽管如果有人伪造重定向，我认为您无需担心引导他们完成新设计！

# java - 在 Java 的 MessageFormat 中是否可以接收堆栈跟踪？

> ID：11332280
> 
> 赞同：0
> 
> 时间：2012-07-04T15:51:18.540
> 
> 标签：java, stack-trace, messageformat

代码：

```
String message = MessageFormat.format("error {0}",e); 
```

例如消息：

```
 java.text.ParseException: Unparseable date: "sdf sf sa dg " 
```

我需要接收所有堆栈跟踪，例如：

```
java.text.ParseException: Unparseable date: "sdf sf sa dg "
at java.text.DateFormat.parse(Unknown Source)
 ................ 
```

这可能吗 ？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T15:56:12.780

您可以使用此方法捕获字符串中的堆栈跟踪

```
public String getStackTrace(Throwable t) {
    StringWriter sw = new StringWriter();
    PrintWriter pw = new PrintWriter(sw);
    t.printStackTrace(pw);
    pw.flush();
    return sw.toString();
} 
```

编辑：[Thomas 链接的 SO 文章](https://stackoverflow.com/questions/1149703/stacktrace-to-string-in-java?lq=1)也非常好读！

# css - CSS 媒体查询和 Firefox 的滚动条宽度

> ID：11332284
> 
> 赞同：2
> 
> 时间：2012-07-04T15:51:24.903
> 
> 标签：css, firefox, width, scrollbar, media-queries

> **可能重复：**
> [CSS 媒体查询问题（滚动条）](https://stackoverflow.com/questions/8146874/issue-with-css-media-queriesscrollbar)

因此，Firefox 在其窗口宽度计算中包含了滚动条宽度，而 Webkit 则没有。这会导致浏览器之间的不一致。

现在，我知道从技术上讲，Firefox 通过计算滚动条作为窗口宽度的一部分来遵循规范，但这对我来说似乎真的违反直觉。毕竟，移动设备没有滚动条，滚动条宽度因浏览器而异/操作系统因操作系统而异。

我能做些什么来防止 Firefox 包含滚动条宽度吗？也许一个 jQuery 可以让我的媒体查询在浏览器中正确触发？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T23:13:39.597

如果您只是使用媒体查询，那么侧边栏的偏移量不会在浏览器之间产生任何差异。

但是，如果您尝试将 jQuery 与媒体查询一起使用，您可能会遇到一些小问题，因为 jQuery 中返回的宽度是一致的，然后会显示偏移量。

要解决此问题，您只需计算 Firefox 浏览器中侧边栏的偏移量，然后从您想要同步的任何点减去该偏移量。IE

```
var scrollBarWidth = 0;
if ($.browser.mozilla)
  scrollBarWidth = window.innerWidth - jQuery("body").width(); 
```

然后稍后当您指定同步时...

```
if ($(window).width() < mediaQueryWidth - scrollBarWidth) {
  //act to do along with the media query
} 
```

希望这有帮助

# spring - Spring 预计至少有 1 个 bean 有资格作为此依赖项的自动装配候选者

> ID：11332289
> 
> 赞同：18
> 
> 时间：2012-07-04T15:51:49.247
> 
> 标签：spring, dependency-injection, autowired

我对这个 Autowire 有问题：

```
@Controller
public class ChiusuraController {

    @Autowired
    private ChiusuraProvider chiusuraProvider;
} 
```

用这个豆子：

```
@Service @Transactional
public class ChiusuraProvider extends ThreadProvider {

    public void run() {}
} 
```

延伸

```
public abstract class ThreadProvider extends Thread implements InitializingBean, Runnable, DisposableBean {
...
} 
```

我收到此错误：

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chiusuraController': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: private com.cinebot.service.ChiusuraProvider com.cinebot.web.controller.ChiusuraController.chiusuraProvider; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.cinebot.service.ChiusuraProvider] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)} 
```

**我看到如果我删除自动装配类的扩展 ThreadProvider**，我没有得到这个错误 ，但我真的需要 ThreadProvider 抽象类。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-04T18:56:02.553

如果 ThreadProvider 层次结构中的任何地方都有接口，请尝试将接口的名称作为服务提供者的类型，例如。如果你说这个结构：

```
public class ThreadProvider implements CustomInterface{
...
} 
```

然后在你的控制器中试试这个：

```
@Controller
public class ChiusuraController {

    @Autowired
    private CustomInterface chiusuraProvider;
} 
```

发生这种情况的原因是，在您没有`ChiusuraProvider`扩展`ThreadProvider`Spring 的第一种情况下，可能是为您创建基于 CGLIB 的代理（以处理 @Transaction）。

当您从`ThreadProvider`假设 ThreadProvider 扩展某个接口进行 DID 扩展时，Spring 在这种情况下会创建一个基于 Java 动态代理的代理，这似乎是该接口的实现而不是`ChisuraProvider`类型。

如果您绝对需要使用`ChisuraProvider`，您可以尝试使用 AspectJ 作为替代方案，或者在使用 ThreadProvider 的情况下强制使用基于 CGLIB 的代理，也可以这样：

```
<aop:aspectj-autoproxy proxy-target-class="true"/> 
```

以下是来自 Spring Reference 站点的更多参考：http: [//static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/classic-aop-spring.html#classic-aop -pfb](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/classic-aop-spring.html#classic-aop-pfb)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-04T16:29:13.250

您应该将此行放在您的应用程序上下文中：

```
<context:component-scan base-package="com.cinebot.service" /> 
```

[在文档中阅读有关*自动检测类和注册 bean 定义*](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/htmlsingle/spring-framework-reference.html#beans-scanning-autodetection)的更多信息。

# ruby-on-rails - 在哪里放置通用应用程序方法？

> ID：11332293
> 
> 赞同：0
> 
> 时间：2012-07-04T15:51:56.167
> 
> 标签：ruby-on-rails

我有一个带有通常 application_controller 的 Rails 应用程序，以及每个表的控制器（和模型）。我还添加了一个 pages_controller，对于我的应用程序使用的其他网页，这只是一个支持相应视图的空方法。

现在我想添加一些方法和页面，为应用程序提供一些总体每月统计数据，从每个表中提取数据，按月份分组。

Rails 约定说我应该把这些方法放在哪里？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:16:06.520

我不确定这里是否有足够的信息来创建有意义的答案。

如果您想要特定于模型的统计信息，那么模块/mixin 可能是有意义的。它将提供对特定模型数据的规范化访问。根据您的实际需要，每个模型都可以具有特定的统计数据表示层。

有很多方法可以实现这一点，但代码本身可能存在于命名空间`lib`目录中（如果您特别询问物理位置​​）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:54:12.217

如果您有一个单独的统计模型，您可以将统计逻辑添加到您的模型中。或者你可以创建一些类来为你处理，因此这个文件应该在`lib/`.

# git - github只能通过VPN访问

> ID：11332297
> 
> 赞同：4
> 
> 时间：2012-07-04T15:52:13.830
> 
> 标签：git, version-control, github

我将 github 视为源代码控制存储库。我从来没有使用过它，除了它有良好的声誉外，我对它了解不多。

我的问题是：是否可以将对 github 帐户的访问限制为仅来自某个 VPN 的 IP 地址？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:54:56.263

不。

但是，有一个[自托管版本](https://enterprise.github.com/)。

# .net - 自动完成组合框和实体框架

> ID：11332305
> 
> 赞同：0
> 
> 时间：2012-07-04T15:52:47.250
> 
> 标签：.net, winforms, entity-framework, autocomplete, combobox

我有一个带有自动完成功能的组合框，它通过 EF 加载了一些值。我想要的是对该字段进行自动完成匹配，以及实体上的第二个字段。为了解释更多，这里是数据模型：

```
AccountCode
ID   |   Ref   |   Desc
-----------------------
1    |   ABC   |  DEF
2    |   XZY   |  WUV 
```

当前 ref 字段正在加载到自动完成中，因此当用户在组合中键入“AB”时，ABC 会呈现给用户。我想要的是，如果用户键入“DE”，它也会出现 ABC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T18:33:05.343

我不认为你可以用组合框来做到这一点。但是您可以使用文本框和按钮来完成。

我以前在银行应用程序中看到过这个功能。那里的要求是用户应该能够键入帐号或帐户所有者的姓名。他们还应该能够从列表中进行选择。

从文本框开始，捕获更改事件并尝试匹配 Ref 和 Desc 的内容。然后在文本框旁边放置一个按钮，允许用户从列表中进行选择。

# wpf - 是否有一个容器可以定位多个元素的样式

> ID：11332306
> 
> 赞同：0
> 
> 时间：2012-07-04T15:52:52.420
> 
> 标签：wpf

在 WPF 中是否有像 HTML div 这样的容器（这很容易），我可以在其中定位该容器中的所有文本块？所以我不必在每个文本块上**指定样式**？

我有一个复杂的画布，我只想在一个区域中定位文本块。

与此有关的东西（除了 StackPanel 之外的东西可以用作样式定位容器）：

```
 <StackPanel>
            <StackPanel.Resources>
                <Style TargetType="{x:Type TextBlock}">
                    <Setter Property="Foreground" Value="White"></Setter>
                    <Setter Property="FontFamily" Value="Arial"></Setter>
                </Style>
            </StackPanel.Resources>

            <TextBlock Canvas.Left="87" Canvas.Top="210">
            mytext1
            </TextBlock>
            <TextBlock Canvas.Left="87" Canvas.Top="232">
            mytext2
            </TextBlock>
            <TextBlock Canvas.Left="87" Canvas.Top="254">
            mytext2
            </TextBlock>
        </StackPanel> 
```

因此，如果我尝试使用网格，画布坐标将被忽略，并且我的文本块出现在画布的顶部。

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Window1" Height="300" Width="300">
<Canvas Width="500" Height="500">
    <Grid>
        <Grid.Resources>
            <Style TargetType="TextBlock">
                <Setter Property="Foreground" Value="Red"></Setter>
            </Style>
        </Grid.Resources>
    <TextBlock Text="MyTextBlock1" Canvas.Left="300" Canvas.Top="300">
    </TextBlock>
    </Grid>
</Canvas> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:04:58.790

在这种情况下，您使用画布坐标在左侧提供 87 个间距，在元素顶部之间提供 22 个间距。StackPanel 已经在一个接一个地布置项目。你只需要为你的文本块设置边距

```
 <StackPanel>
        <StackPanel.Resources>
            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="Foreground" Value="Red"></Setter>
                <Setter Property="FontFamily" Value="Arial"></Setter>
                <Setter Property="FontSize" Value="14" />
                <Setter Property="Margin" Value="87,4, 0, 4" />
            </Style>
        </StackPanel.Resources>
        <TextBlock>mytext1</TextBlock>
        <TextBlock>mytext2</TextBlock>
        <TextBlock>mytext3</TextBlock>
    </StackPanel> 
```

要回答您的问题，您可以在希望隔离资源部分的任何地方使用网格控件（或 Canvas 或任何其他元素）。Grid 不执行任何布局。

```
<StackPanel>
        <StackPanel.Resources>
            <Style TargetType="{x:Type TextBlock}">
                <Setter Property="Foreground" Value="White"></Setter>
                <Setter Property="FontFamily" Value="Arial"></Setter>
            </Style>
        </StackPanel.Resources>

        <TextBlock>
            mytext1
        </TextBlock>
        <Canvas>
            <Canvas.Resources>
                <Style TargetType="{x:Type TextBlock}">
                    <Setter Property="Foreground" Value="Red"></Setter>
                    <Setter Property="FontFamily" Value="Times"></Setter>
                </Style>
            </Canvas.Resources>
            <TextBlock Canvas.Left="87" Canvas.Top="210">mytext2</TextBlock>
            <TextBlock Canvas.Left="87" Canvas.Top="232">mytext2</TextBlock>
        </Canvas>
    </StackPanel> 
```

# c# - 从代码隐藏添加资源并在 XAML 中使用

> ID：11332312
> 
> 赞同：3
> 
> 时间：2012-07-04T15:53:40.150
> 
> 标签：c#, wpf, xaml, binding, resources

我正在尝试添加一个资源，它是一个标准的 IValueConverter 实例。我想在 XAML 中使用该转换器，但我得到的只是一个异常，说没有找到具有提供的密钥的资源。

这是代码：

```
 public CallLogs(IMessenger messenger, IKernel kernel)
    {
        InitializeComponent();

        _kernel = kernel;
        var phoneToContactConverter = _kernel.Get<PhoneNumberToContactConverter>();
        Resources.Add("PhoneNumberToContactConverter", phoneToContactConverter);
    } 
```

这是 XAML

```
<TextBlock Text="{Binding Number, Converter={StaticResource PhoneNumberToContactConverter}, ConverterParameter={Binding}}" /> 
```

我得到一个例外说

> {“找不到名为‘PhoneNumberToContactConverter’的资源。资源名称区分大小写。”}。

知道如何从后面的代码中引用资源吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:01:41.447

我目前无法访问 C# 编译器，因此无法尝试，但尝试在添加资源后移动 InitializeComponent()。InitializeComponent 执行 XAML 中指定的所有内容，但您绑定到的资源此时不存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T15:56:48.393

您好，您可以尝试动态资源（资源类型不匹配）

```
<TextBlock Text="{Binding Number, Converter={DynamicResource PhoneNumberToContactConverter}, ConverterParameter={Binding}}" /> 
```

# java - java游戏算法中的加权随机性

> ID：11332313
> 
> 赞同：0
> 
> 时间：2012-07-04T15:53:51.003
> 
> 标签：java, android, andengine

我有一个随机生成器，我想用于 4 个项目。

我想要发生的是我希望每个项目都具有加权随机性。因此，随机性最高的当然比其他人更容易被选中。

我有 4 个项目可供随机生成器选择。

```
Random rand = new Random();

int itemNumber = rand.nextInt(4) + 1; 
```

所以基本上我只是希望每个项目都能够相互权衡。我还需要能够在整个程序生命周期中更改权重。所以每个项目的重量不会是最终的。I have a pool that i use to recycle the items to save on memory so when a item is chosen it is pulled from the pool.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:59:58.447

将权重加到总和中，从该范围中选择一个随机数，然后按范围选择项目。

如果您有 4 个项目，权重分别为 4、3、2、1，那么您的总数为 10 (0-9)。0-3是第一项，4-6是第二项，7-8是第三项，9是最后一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:00:57.977

您可以使用如下功能。传入权重 - 它会返回一个对应的随机整数，介于 1 和传入的权重数之间。

```
public weightedRandom(int[] weights) {
    int total = 0;
    for(int i=0; i<weights.lenght; i++) {
        total += weights[i];
    }

    int nnum = rand.nextInt(total);
    for(int i=0; nnum > 0; i++) {
        nnum -= weights[i];
    }

    return i + 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:01:01.067

如果每个项目都有一个权重，那么您可以生成一个随机数 0-(sum(weights)) 并根据它所在的范围进行选择。

前任：

```
int weights[] = new int[]{1,2,3,4};
int sum = 10;//I'm cheating, it will need to be calculated
Random rand = new Random();
int choice = rand.nextInt(sum)+1;
for (int x = 0; x < weights.length; x++)
  if (choice-= weights[x] <=0)
    //use item X 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T16:04:20.867

创建一个可能项目的数组列表，随着项目权重的变化，将更多此类项目添加到数组中，并为随机项目调用数组的随机索引。像这样：

```
ArrayList<int> rand = {1,2,3,4}
//This would add more weight to the number 1
rand.add(0,1)

//then to choose a random item, just call for a random index
rand.get((int)(Math.random*rand.size()) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T16:08:12.400

刚刚写了一个小算法，首先根据百分比权重随机选择项目，然后从这些选定的项目中进行随机选择。:)

int weightPercentages[] = {50,10,20,20};

```
int randomPercentage =(int) (Math.floor(Math.random()*100);

int countSelected = 0;

Arraylist<Integer> selectedItems = new ArrayList<Integer>();

for(int lop=0; lop<weightPercentages.length; lop++){
     if(weightPercentage[lop]>randomPercentage)
          selectedItems.add(weightPercentage[lop]);
}

int selectedItem = (int) (Math.floor(Math.random()*selectedItems.size());

System.out.println(randomPercentage[selectedItem]); 
```

# c# - UpdatePanel 和 RegisterStartupScript 之间的冲突？

> ID：11332316
> 
> 赞同：0
> 
> 时间：2012-07-04T15:54:02.893
> 
> 标签：c#, javascript, asp.net

我有一个带有一些自定义客户端验证的用户控件。当我在页面上有用户控件时，它没有问题。但是，如果该页面有回发事件（从下拉列表中选择某个选项，并显示更多字段），我的验证似乎不再有效。我的验证如下：

```
protected void Page_Load(object sender, EventArgs e)
{
    Type cstype = this.GetType();

    if (!Page.ClientScript.IsStartupScriptRegistered(cstype, "ValidatorType"))
    {
        String DateValidator;
        DateValidator = "<script type=\"text/javascript\">\n";
        DateValidator += "function ValidateDate(source, args) {\n";
        DateValidator += "   var ddDay = document.getElementById(source.day);\n";
        DateValidator += "   var day = ddDay.selectedIndex;";
        DateValidator += "   var ddMonth = document.getElementById(source.month);\n";
        DateValidator += "   var month = ddMonth.selectedIndex;\n";
        DateValidator += "   var ddYear = document.getElementById(source.year);\n";
        DateValidator += "   var year = ddYear.selectedIndex;\n";
        DateValidator += "   if (day == 0 || month == 0 || year == 0)\n";
        DateValidator += "      args.IsValid = false;\n";
        DateValidator += "   else\n";
        DateValidator += "      args.IsValid = true;\n";
        DateValidator += "   }\n";
        DateValidator += "</script>";
        Page.ClientScript.RegisterStartupScript(cstype, "ValidatorType", DateValidator);
    }
    Page.ClientScript.RegisterExpandoAttribute(reqDueDate.ClientID, "month", ddMonth.ClientID);
    Page.ClientScript.RegisterExpandoAttribute(reqDueDate.ClientID, "day", ddDay.ClientID);
    Page.ClientScript.RegisterExpandoAttribute(reqDueDate.ClientID, "year", ddYear.ClientID);
} 
```

我难住了。有什么建议吗？

**编辑：**

这是我正在使用的用户控件。

```
<asp:DropDownList ID="ddMonth" runat="server" AppendDataBoundItems="true">
   <asp:ListItem Value="">--Month--</asp:ListItem>
</asp:DropDownList>
<asp:DropDownList ID="ddDay" runat="server" AppendDataBoundItems="true">
    <asp:ListItem Value="">--Day--</asp:ListItem>
</asp:DropDownList>
<asp:DropDownList ID="ddYear" runat="server" AppendDataBoundItems="true">
    <asp:ListItem Value="">--Year--</asp:ListItem>
</asp:DropDownList>
<asp:CustomValidator ID="reqDueDate" EnableClientScript="true" ClientValidationFunction="ValidateDate" runat="server" ErrorMessage="Required" CssClass="input-notification error png_bg" Display="Dynamic"></asp:CustomValidator> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T14:19:28.943

事实证明，我需要做两件事。在我的用户代码中放置一个更新面板，然后更改行

```
Page.ClientScript.RegisterExpandoAttribute(reqDueDate.ClientID, "day", ddDay.ClientID); 
```

到

```
ScriptManager.RegisterExpandoAttribute(UpdatePanelDDD, reqDueDate.ClientID, "day", ddDay.ClientID, false); 
```

Thanks all for your help and [http://www.aspnetajaxtutorials.com/2010/09/customvalidator-registerexpandoattribut.html](http://www.aspnetajaxtutorials.com/2010/09/customvalidator-registerexpandoattribut.html) for the guidance.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T18:44:17.050

你可以做*类似*这样的事情：

```
<script type="text/javascript">
Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);

var btn = null;

var EndRequestHandler = function(sender, args) {
    btn = document.getElementById('<%= YourButton.ClientID %>');
    btn.onclick = ValidateDate;
};
</script> 
```

或者您可以将其附加到客户端的表单提交事件中

**编辑**：`endRequest`当 MS Ajax 完成任何 asyc 请求时触发该事件，例如`UpdatePanel`更新 DOM。您可以[在此处找到更多详细信息](http://msdn.microsoft.com/en-us/library/bb383810.aspx)

# android - 在地图上移动带有图像的视图

> ID：11332321
> 
> 赞同：1
> 
> 时间：2012-07-04T15:54:13.910
> 
> 标签：android, android-layout

我有一个 MapView (Google)，我想在 MapView 上添加另一个看起来像图钉的视图。这个 PinView 应该是可移动的（使用触摸）。我的问题是：如何为此目的组织布局？我应该更好地使用 ImageView 作为 PinView 还是使用 onDraw 方法的自定义视图？

# postgresql - 从此 SQL 连接中删除重复项

> ID：11332325
> 
> 赞同：2
> 
> 时间：2012-07-04T15:54:41.577
> 
> 标签：postgresql, join, duplicates

我有下表

```
drop table names;
create table names(
    name    varchar(200),
    surname varchar(200),
    primary key(name, surname)
);

insert into names values ('john', 'doe');
insert into names values ('john', 'richards'); 
```

我想列出名字相同的姓氏。即我想要这个结果

```
----------+----------
 doe      | richards
 doe      | doe
 richards | richards 
```

（这只是一个例子，真正的问题是完全不同的）

以下查询返回重复项

```
select n1.surname, n2.surname
from names n1 join names n2
on n1.name = n2.name;

 surname  | surname  
----------+----------
 doe      | richards
 doe      | doe
 richards | richards
 richards | doe 
```

所以，我使用了`least`和`greatest`postgresql 函数，得到了我的结果。但是：`least`并且`greatest`不是标准 SQL，我想知道是否存在更有效的解决方案，因为使用我现在无法想象的连接条件。

```
select distinct least(n1.surname, n2.surname), greatest(n1.surname,
n2.surname)
from names n1 join names n2
on n1.name = n2.name;

  least   | greatest 
----------+----------
 doe      | richards
 doe      | doe
 richards | richards 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T15:58:37.027

如果您只想要一个决胜局，请使用 < of > 或 >= 或 <=

```
SELECT n1.surname, n2.surname
FROM names n1 
JOIN names n2 ON n1.name = n2.name
WHERE n1.surname >= n2.surname
   ; 
```

# c# - EPPlus，查找并设置命名范围的值

> ID：11332326
> 
> 赞同：6
> 
> 时间：2012-07-04T15:54:42.180
> 
> 标签：c#, excel, epplus

我一直在努力尝试使用 ExcelPackage (3.0.1) 库设置命名范围（在本例中为单个命名单元格）的值，它应该很简单：

```
ExcelNamedRange er = xlPackage.Workbook.Names["Customer"];
er.Value = "Foo Bar"; 
```

我显然做错了 - 有没有人有我可以效仿的例子

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-04T16:12:30.437

我查找 ExcelPackage 文档以查看 Names[] 集合返回的类型，发现文档很快就会出现，或者至少他们在 2007 年是这么说的。

我建议您使用 EPPlus，它是一个对我非常有用的 excel 库（仅限 xlsx）。

[官方链接](http://epplus.codeplex.com/)

现在，为命名范围中的每个单元格设置一个值：

```
ExcelWorksheet sheet = _openXmlPackage.Workbook.Worksheets["SheetName"];
using (ExcelNamedRange namedRange = sheet.Names["RangeName"])
{
    for (int rowIndex = Start.Row; rowIndex <= namedRange.End.Row; rowIndex++)
    {
        for (int columnIndex = namedRange.Start.Column; columnIndex <= namedRange.End.Column; columnIndex++)
        {
            sheet.Cells[rowIndex, columnIndex].Value = "no more hair pulling";                        
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:05:36.710

我不得不改用单元格值来解决问题。

```
using (ExcelPackage xlPackage = new ExcelPackage(newFile))
            {
                foreach (ExcelWorksheet worksheet in xlPackage.Workbook.Worksheets)
                {

                    var dimension = worksheet.Dimension;
                    if (dimension == null) { continue; }
                    var cells = from row in Enumerable.Range(dimension.Start.Row, dimension.End.Row)
                                from column in Enumerable.Range(dimension.Start.Column, dimension.End.Column)
                                //where worksheet.Cells[row, column].Value.ToString() != String.Empty
                                select worksheet.Cells[row, column];
                    try
                    {
                        foreach (var excelCell in cells)
                        {
                            try
                            {
                                if (excelCell.Value.ToString().Equals("[Customer]")) { excelCell.Value = "Customer Name"; }

                            }
                            catch (Exception) { }
                        }

                    }
                    catch (Exception a) { Console.WriteLine(a.Message); }
                } 
```

# java - cublasSgemmBatched 与 jcuda 的使用

> ID：11332327
> 
> 赞同：1
> 
> 时间：2012-07-04T15:54:48.980
> 
> 标签：java, cuda, cublas, jcuda

我一直在尝试在[jcuda](http://www.jcuda.de/)中使用 cublasSgemmBatched() 函数进行矩阵乘法，但我不确定如何正确处理指针传递和批处理矩阵的向量。如果有人知道如何修改我的代码以正确处理此问题，我将非常感激。在此示例中，C 数组在 cublasGetVector 之后保持不变。

```
public static void SsmmBatchJCublas(int m, int n, int k, float A[], float B[]){

    // Create a CUBLAS handle
    cublasHandle handle = new cublasHandle();
    cublasCreate(handle);

    // Allocate memory on the device
    Pointer d_A = new Pointer();
    Pointer d_B = new Pointer();
    Pointer d_C = new Pointer();

    cudaMalloc(d_A, m*k * Sizeof.FLOAT);
    cudaMalloc(d_B, n*k * Sizeof.FLOAT);
    cudaMalloc(d_C, m*n * Sizeof.FLOAT);

    float[] C = new float[m*n];
    // Copy the memory from the host to the device
    cublasSetVector(m*k, Sizeof.FLOAT, Pointer.to(A), 1, d_A, 1);
    cublasSetVector(n*k, Sizeof.FLOAT, Pointer.to(B), 1, d_B, 1);
    cublasSetVector(m*n, Sizeof.FLOAT, Pointer.to(C), 1, d_C, 1);

    Pointer[] Aarray = new Pointer[]{d_A};
    Pointer AarrayPtr = Pointer.to(Aarray);
    Pointer[] Barray = new Pointer[]{d_B};
    Pointer BarrayPtr = Pointer.to(Barray);
    Pointer[] Carray = new Pointer[]{d_C};
    Pointer CarrayPtr = Pointer.to(Carray);

    // Execute sgemm
    Pointer pAlpha = Pointer.to(new float[]{1});
    Pointer pBeta = Pointer.to(new float[]{0});

    cublasSgemmBatched(handle, CUBLAS_OP_N, CUBLAS_OP_N, m, n, k, pAlpha, AarrayPtr, Aarray.length, BarrayPtr, Barray.length, pBeta, CarrayPtr, Carray.length, Aarray.length);
    // Copy the result from the device to the host
    cublasGetVector(m*n, Sizeof.FLOAT, d_C, 1, Pointer.to(C), 1);

    // Clean up
    cudaFree(d_A);
    cudaFree(d_B);
    cudaFree(d_C);
    cublasDestroy(handle);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T13:29:23.957

我在官方jcuda论坛上问过，很快就在[这里](http://forum.byte-welt.de/showthread.php?t=3988)得到了答案。

# iphone - UIPageViewController 延迟换页动画

> ID：11332329
> 
> 赞同：4
> 
> 时间：2012-07-04T15:54:54.657
> 
> 标签：iphone, objective-c, ios5, delay, uipageviewcontroller

我正在开发一个使用 UIPageViewController 的应用程序。我注意到如果我太快地更改多个页面，它会在运行时导致几个问题。

有没有办法在两次页面更改之间设置延迟（例如 2 或 3 毫秒）？提前致谢。

****** *** ** *** ** *** *******详细解答******* *** ** *** ** *** ** *** *********

 *****解决方案是这样的：

```
-(void)pageViewController:(UIPageViewController *)pageViewController didFinishAnimating:(BOOL)finished previousViewControllers:(NSArray *)previousViewControllers transitionCompleted:(BOOL)completed{

    if(completed) {
        [pageViewController.view setUserInteractionEnabled:NO];
        [self performSelector:@selector(enableUserInteraction) withObject:nil afterDelay:0.2];
    }
}

-(void)enableUserInteraction{
    [self.view setUserInteractionEnabled:YES];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T18:17:41.427

在您的动画块中，设置 userInteraction = NO 直到动画完成。这意味着用户将无法与屏幕交互并因此更改页面，直到它完成动画。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T11:22:53.377

我把它放在**pageViewController:willTransitionToViewControllers:**中并使用了**dispatch_after**。使用此解决方案，用户无法像在 pageViewController:didFinishAnimating:previousViewControllers:transitionCompleted 中那样快速滑动 2-3 次：

```
- (void)pageViewController:(UIPageViewController *)pageViewController willTransitionToViewControllers:(NSArray<UIViewController *> *)pendingViewControllers {
pageViewController.view.userInteractionEnabled = NO;
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(2.0 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
    pageViewController.view.userInteractionEnabled = YES;

});

} 
```*****

# css - DIV width:100% and text-align: center dows 在 IE 7 中不起作用 - 需要 IE 7 CSS hack

> ID：11332334
> 
> 赞同：0
> 
> 时间：2012-07-04T15:55:10.330
> 
> 标签：css, html

我有一个页脚 DIV

```
<div id=footer"> 
```

里面

```
<div id="wrapper"> 
```

我已将`width: 100%`and设置`text-align:center`为`footer`...它在 chrome、IE 9、8 和 Firefox 上运行良好。

但是在 IE 7 中它不起作用，我不得不使用`margin`它来正确对齐它。

请帮忙。

* * *

## // 这适用于 Chrome、IE 9、IE 8、FF

```
 #footer .footertc {
    text-align: center;
    margin: 35px 0px 0px 0px;
    display: block;
    width: 100%;
    height: 75px;
    background: #F1F1EF;
    padding: 0px;
    font-size: 10px;
    clear: both;
 }

#wrapper {
background: white;
background-position: 50% 0px;
width: 984px;
margin: 0px auto 0 auto;
text-align: center;
} 
```

* * *

## // 这适用于 IE 7 --> 我被迫使用 margin-left

```
*+html #footer .footertc { 
           text-align:center;    -> this does not work
           margin:50px 0px 0px 550px; 
           display:block; 
           width:100%;    --> this does not work 
           height:75px; 
           background:#F1F1EF;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T20:47:59.503

您可以尝试 reset.css 以尽量减少跨浏览器 css 问题。您可以[在此处查看更多详细信息。](http://www.cssreset.com/scripts/yahoo-css-reset-yui-3/)

# css - 使用带有 css font-face 的自定义字体，在不同的浏览器上有所不同

> ID：11332337
> 
> 赞同：0
> 
> 时间：2012-07-04T15:55:18.463
> 
> 标签：css, fonts, font-face

让我举几个例子：

火狐 13：

![在此处输入图像描述](../Images/7b909e6866e20d60799d1ca51eebebe4.png)

铬（最新）：

![在此处输入图像描述](../Images/c8e435927658c0fa7e5d6fb66d8f411d.png)

如您所见，在 Firefox 中字体看起来更平滑，而在 Chrome 中则更流畅。我很好奇为什么会发生这种情况，以及我可以采取哪些步骤来平衡我的用户体验。

我正在使用 .otf 字体：

```
HelveticaNeueLTPro-LtCn.otf 
```

并使用以下 CSS 规则应用此自定义字体：

```
@font-face {
    font-family: "Helvetica Neue LTPro";
    src: url("/Public/assets/fonts/HelveticaNeueLTPro-LtCn.otf");
}

a {
    color: #665548;                
    display: block;
    font-family: "Helvetica Neue LTPro";
    font-size: 15px;
    padding: 17px;                
} 
```

你建议我用什么来消除字体差异？或者更好的是，使用“Web 安全”字体的好方法是什么？这样的事情存在吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T23:05:21.273

不幸的是，您不能只采用任何字体，对其进行转换并使其在所有浏览器中都能正常工作。如果可以，我会喜欢它，但你不能。

获得良好结果的最佳选择是使用字体交付服务，例如[typekit](https://typekit.com/fonts)或[fontdeck](http://fontdeck.com/)，它们提供的字体专为跨浏览器交付而设计，因此有更好的一致性呈现机会。尽管如此，您仍然可能会在浏览器和操作系统之间获得微小的变化，这就是网络的本质。

但具体回答您的问题时，没有设置或解决方法可以使该字体始终显示。对于它的价值，我认为他们看起来都很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:01:58.050

这仅取决于浏览器如何解释字体。我从来没有真正使用过它，但是有一个名为 fontsquirrel 的网站会采用一种字体并将其分解为不同的字体扩展名，以供不同的浏览器使用。一探究竟。[http://www.fontsquirrel.com/](http://www.fontsquirrel.com/)

# java - 如何在android中正确对齐PreferencesActivity？

> ID：11332340
> 
> 赞同：14
> 
> 时间：2012-07-04T15:55:29.830
> 
> 标签：java, android, android-preferences, arabic

我有`PreferencesActivity`它，我需要它正确对齐，因为我想使用阿拉伯语，我尝试使用它`android:layout_gravity="right"`，`PreferenceScreen`但它没有用。

这是我的 XML：

```
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" android:layout_gravity="right">
        <PreferenceCategory android:title="General Settings">
                <CheckBoxPreference
                        android:title="Full Screen"
                        android:defaultValue="false"
                        android:summary="Always view as Full Screen"
                        android:key="fullScreenPref" />
        <Preference
                android:title="Report Bugs"
                android:summary="Notify us for any Bugs or Errors"
                android:key="bugs"/>
        <Preference
                android:title="About"
                android:summary="Version 1.0.0"
                android:key="about"/>
        </PreferenceCategory>
</PreferenceScreen> 
```

这就是我在里面使用 XML 的方式`PreferencesActivity`：

```
addPreferencesFromResource(R.layout.preferences); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-01-12T13:14:40.700

在花了一些时间搜索我们共同的问题后，我发现没有任何用处。显然 android api 不支持 RTL 偏好。这意味着不支持波斯语/希伯来语/阿拉伯语。但毕竟我试图找到一些方法来右对齐editText。我驱动了 EditTextPreference 类并再次实现了 onCreateView 方法。这是我的代码：

```
/**
 * Created by omid on 1/12/14.
 */
public class RtlTextPreference extends EditTextPreference {

    public RtlTextPreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected View onCreateView(ViewGroup parent) {
        View view = super.onCreateView(parent);

        RelativeLayout layout = (RelativeLayout) ((LinearLayout) view).getChildAt(1);
        layout.setGravity(Gravity.RIGHT);
        return view;
    }
} 
```

标准 android api 中的其他首选项应该是相同的（顺便说一句，我还没有尝试过）。也许有一天我们应该在 android 首选项中完全实现 rtl 支持并将其托管在 github 上。希望此代码段对您有所帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-04T16:16:03.970

不幸的是，基本的 Preference 组件（[PreferenceScreen](http://developer.android.com/reference/android/preference/PreferenceScreen.html)、[Preference](http://developer.android.com/reference/android/preference/Preference.html)等）是以相当不可配置的方式实现的。它们被设计为以特定方式工作，并且不是非常可定制的。

为了做你想做的事，你可能必须实现你自己的 PreferenceScreen 版本（或者可能只是你正在使用的 Preference 类型，例如 CheckBoxPreference）。它的设计方式是，当它扩展 XML 布局时，它会假设很多关于它们的事情并为您处理（文本大小、填充、布局、换行等）。如果您希望它看起来像默认设置，这很好，但如果您需要调整这些配置，则不是很好。

（注意：如果您不想实现偏好屏幕，您可以只使用列表视图并将其视为偏好页面。但是，无论哪种方式，您基本上都必须实现自己的偏好版本。）

（注2：基于我看到的关于阿拉伯文本的其他问题，它的*POSSIBLE* android 足够聪明，可以默认尝试右对齐。但是，如果是这种情况，我会感到惊讶。不过，值得一试。）

对不起，我没有更好的答案给你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-04T07:36:38.167

In your manifest file under application tag add this line,

android:supportsRtl="true"

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-04-23T20:49:49.510

在检查了一些解决方案后，我发现了一些可能有帮助的东西。它不优雅，仅适用于 4 及以上，但总比没有好......

将此代码添加到 onResume()

```
 Locale locale = new Locale("iw");// Hebrew in this case
    Locale.setDefault(locale);
    Configuration config = new Configuration();
    config.locale = locale;
    getBaseContext().getResources().updateConfiguration(config,
          getBaseContext().getResources().getDisplayMetrics()); 
```

当然，您可以选择仅在 MainActivity 的 onResume() 将语言环境更改回您的首选（或用户定义的）语言环境中的偏好活动 onResume() 方法中更改语言环境。

希望这可以帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-08-15T10:05:45.017

好吧，这可能已经很晚了，但无论如何，如果你的目标是 Android 3.0 或更高版本，你应该使用 PreferenceFragment 可以以某种方式制作 RTL。

所以你应该在你的代码中创建一个片段，如下所示：

```
import android.os.Bundle;
import android.preference.PreferenceFragment;

public class SettingsFragment extends PreferenceFragment {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        addPreferencesFromResource(R.xml.preferences);
    }
} 
```

现在您应该创建一个 Activity 将此片段添加到其布局中。`FragmentManager`您可以为您的活动创建一个布局，并通过 xml 元素或使用该类将片段放入其中。但是使首选项从右到左的关键是在片段的父元素的布局文件中放置一个 layout_direction="rtl" 属性。IE

```
<?xml version="1.0" encoding="utf-8"?>

<RelativeLayout
    android:id="@+id/rootView"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layoutDirection="rtl"
    android:orientation="vertical">

    <fragment
        class="blah.blah.SettingsFragment"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"/>
</RelativeLayout> 
```

注意解决问题`android:layoutDirection="rtl"`的`RelativeLayout`元素。

现在像任何其他活动一样添加活动 Java 代码并添加到您的清单文件中。

希望还为时不晚:)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-11T14:50:30.600

```
public class RtlEditTextPreference extends EditTextPreference {

    @Override
    protected View onCreateView(ViewGroup parent) {
        View view = super.onCreateView(parent);

        RelativeLayout relativeLayout = (RelativeLayout)(((LinearLayout)view).getChildAt(1));
        relativeLayout.setGravity(Gravity.RIGHT);

        TextView title = (TextView) relativeLayout.getChildAt(0);
        TextView summary = (TextView) relativeLayout.getChildAt(1);

        RelativeLayout.LayoutParams titleLayoutParams = (RelativeLayout.LayoutParams)title.getLayoutParams();
        titleLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
        title.setLayoutParams(titleLayoutParams);

        RelativeLayout.LayoutParams summaryLayoutParams = (RelativeLayout.LayoutParams)summary.getLayoutParams();
        summaryLayoutParams.addRule(RelativeLayout.ALIGN_RIGHT, title.getId());
        summaryLayoutParams.addRule(RelativeLayout.ALIGN_LEFT, -1); // Override default left alignment to the title
        summary.setLayoutParams(summaryLayoutParams);

        return view;
    }

} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-19T11:05:33.080

在我看来，这可能是解决方案：将每个视图的 LayoutDirection 设置为 rtl；

```
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
View view = super.onCreateView(inflater, container, savedInstanceState);

view.setLayoutDirection(View.LAYOUT_DIRECTION_RTL);

return view;} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-06-29T03:36:11.860

对于首选项片段，您可以使其容器具有此属性

```
android:layoutDirection="rtl" 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-05-28T12:02:18.830

创建一个`xml`名为`preference_checkbox.xml`paste this 的布局文件（将颜色更改为您想要的，只有设置为填充父级的重力和宽度很重要）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent" android:layout_height="wrap_content"
android:minHeight="?android:attr/listPreferredItemHeight"
android:gravity="center_vertical" android:paddingRight="?android:attr/scrollbarSize">

<RelativeLayout android:layout_width="wrap_content"
    android:layout_height="wrap_content" android:layout_marginLeft="15dip"
    android:layout_marginRight="6dip" android:layout_marginTop="6dip"
    android:layout_marginBottom="6dip" android:layout_weight="1">

    <TextView android:id="@+android:id/title"
        android:layout_width="fill_parent" android:layout_height="wrap_content" android:gravity="right"
        android:singleLine="true" android:textAppearance="?android:attr/textAppearanceMedium"
        android:ellipsize="marquee" android:fadingEdge="horizontal"
        android:textColor=#000000 />

    <TextView android:id="@+android:id/summary"
        android:layout_width="fill_parent" android:layout_height="wrap_content" android:gravity="right"
        android:layout_below="@android:id/title" android:layout_alignLeft="@android:id/title"
        android:textAppearance="?android:attr/textAppearanceSmall" android:textColor=#000000
        android:maxLines="4" />

</RelativeLayout>

<!-- Preference should place its actual preference widget here. -->
<LinearLayout android:id="@+android:id/widget_frame"
    android:layout_width="wrap_content" android:layout_height="match_parent"
    android:gravity="center_vertical" android:orientation="vertical" />

</LinearLayout>

and then in the preferences xml file for each row in the settings list that you want to right align add this: android:layout="@layout/preference_checkbox"

thats it!
got the solution from : http://stackoverflow.com/questions/7094584/checkboxpreference-with-own-layout 
```

那里的问题是关于带有图像的复选框，但它是相同的技术。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-21T04:41:58.237

和我的问题一样，这是解决方案：

在您的 PreferenceFragment 中：

```
@Override
    public View onCreateView(LayoutInflater paramLayoutInflater,
            ViewGroup paramViewGroup, Bundle paramBundle) {
        getActivity().setTitle(R.string.fragment_title_settings);
        View v = super.onCreateView(paramLayoutInflater, paramViewGroup,
                paramBundle);
        rtlView(v);
        return v;
    }
    public void rtlView(View v){
        if(v instanceof ListView){
            rtllater((ListView) v);
        }
        else
        if(v instanceof ViewGroup){
            if(v instanceof RelativeLayout){
                ((RelativeLayout)v).setGravity(Gravity.RIGHT);
            }
            else
            if(v instanceof LinearLayout){
                ((LinearLayout)v).setGravity(Gravity.RIGHT);
            }
            for (int i=0;i<((ViewGroup)v).getChildCount();i++){
                rtlView(((ViewGroup)v).getChildAt(i));
            }
        }
        else
            if(v instanceof TextView){
                v.getLayoutParams().width=v.getLayoutParams().MATCH_PARENT;
                ((TextView)v).setGravity(Gravity.RIGHT);
            }
    }
    public void rtllater(ListView v){
        v.setOnHierarchyChangeListener(new ViewGroup.OnHierarchyChangeListener() {
            @Override
            public void onChildViewAdded(View view, View view1) {
                rtlView(view1);
            }
            @Override
            public void onChildViewRemoved(View view, View view1) {

            }
        });
    } 
```

结果是这样的图像：[从右到左偏好](http://i.stack.imgur.com/7b1bT.jpg)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-01-28T22:54:58.273

您可以通过调用自定义布局来做到这一点[`setLayoutResource(int layoutResId)`](http://developer.android.com/reference/android/preference/Preference.html#setLayoutResource%28int%29)。

**res/layout/preference_layout.xml：（**注意这是基于 HoloEverywhere 库 org.holoeverywhere.preference.Preference）

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:baselineAligned="false"
    android:gravity="center_vertical"
    android:minHeight="?attr/listPreferredItemHeight"
    android:paddingRight="@dimen/preference_item_padding_side"
    android:paddingLeft="?android:attr/scrollbarSize" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center"
        android:minWidth="@dimen/preference_icon_minWidth"
        android:orientation="horizontal" >

        <ImageView
            android:id="@+id/icon"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:minWidth="48dp"
            android:contentDescription="@string/emptyString"
            android:paddingRight="@dimen/preference_item_padding_inner" >
        </ImageView>
    </LinearLayout>

    <RelativeLayout
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:paddingBottom="6dip"
        android:gravity="right"
        android:layout_gravity="right"
        android:paddingLeft="@dimen/preference_item_padding_inner"
        android:paddingTop="6dip" >

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal"
            android:gravity="right"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceMedium" >
        </TextView>

        <TextView
            android:id="@+id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@id/title"
            android:gravity="right"
            android:layout_below="@id/title"
            android:maxLines="10"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="?android:attr/textColorSecondary" >
        </TextView>
    </RelativeLayout>

    <LinearLayout
        android:id="@+id/widget_frame"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center"
        android:minWidth="@dimen/preference_widget_width"
        android:orientation="vertical" >
    </LinearLayout>

</LinearLayout> 
```

在您的自定义首选项中：

```
@Override
protected View onCreateView(ViewGroup parent)
{
    setLayoutResource(R.layout.preference_layout);

    return super.onCreateView(parent);
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-09-11T14:54:55.040

```
public class RtlEditTextPreference extends EditTextPreference {
public RtlEditTextPreference(Context context, AttributeSet attrs) {
    super(context, attrs);
}

public RtlEditTextPreference(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
}

public RtlEditTextPreference(Context context) {
    super(context);
}

@Override
protected View onCreateView(ViewGroup parent) {
    View view = super.onCreateView(parent);

    RelativeLayout relativeLayout = (RelativeLayout)(((LinearLayout)view).getChildAt(1));
    relativeLayout.setGravity(Gravity.RIGHT);

    TextView title = (TextView) relativeLayout.getChildAt(0);
    TextView summary = (TextView) relativeLayout.getChildAt(1);

    RelativeLayout.LayoutParams titleLayoutParams = (RelativeLayout.LayoutParams)title.getLayoutParams();
    titleLayoutParams.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
    title.setLayoutParams(titleLayoutParams);

    RelativeLayout.LayoutParams summaryLayoutParams = (RelativeLayout.LayoutParams)summary.getLayoutParams();
    summaryLayoutParams.addRule(RelativeLayout.ALIGN_RIGHT, title.getId());
    summaryLayoutParams.addRule(RelativeLayout.ALIGN_LEFT, -1); // Override default left alignment to the title
    summary.setLayoutParams(summaryLayoutParams);

    return view;
} 
```

}

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-09T13:31:09.777

这种方法对我有用：

```
 @Override
public View onCreateView(View parent, String name, Context context, AttributeSet attrs)
{
    View v = super.onCreateView(parent, name, context, attrs);
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR1)
    {
        if(parent != null)
            parent.setLayoutDirection(View.LAYOUT_DIRECTION_RTL);
        if(v != null)
            v.setLayoutDirection(View.LAYOUT_DIRECTION_RTL);
    }
    return v;
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2012-07-04T16:17:53.427

阿拉伯文本给许多用户带来了问题，这意味着类似的（如果不相同的话）问题已经被回答了好几次。

我就把这些留在这里

[Android阿拉伯语文本对齐](https://stackoverflow.com/questions/9837230/android-arabic-text-aligment)和

[如何在 Android 中支持阿拉伯语文本？](https://stackoverflow.com/questions/7962704/how-to-support-arabic-text-in-android)

# collision-detection - Unity3D：碰撞，获取碰撞表面的法线（不是冲击角度）

> ID：11332342
> 
> 赞同：2
> 
> 时间：2012-07-04T15:55:34.260
> 
> 标签：collision-detection, unity3d

我现在正在处理我的第一个 Unity 项目（有点自我规定的速成课程），我遇到了一个小问题。

我正在尝试将一个物体从另一个物体上偏转（通过碰撞）。现在，偏转应该是一个完美的镜像角度。没问题！我心想，我看到了这个超级方便的`contact.normal`属性；看起来很简单（我在二维平面上工作，所以从那里开始应该是一帆风顺的）。

几次令人沮丧的失败尝试，以及数千个`drawRay`命令后，我意识到法线不是撞击面的法线，而是撞击的法线（即反映撞击角度）。

这实际上是有用的信息，但要有用，我需要一个面法线来反映撞击的角度。

移动物体正在使用`this.rigidbody.velocity =`，所以我不能依赖内置的物理；我也非常喜欢这种反弹的外观，所以我真的很想保持对它的完全控制。

相关代码如下：

```
function OnCollisionEnter(collision : Collision)
{
    var contactCount : int = 0;
    var normalAve : Vector3 = Vector3(0,0,0);
    var velocityAve : Vector3 = Vector3.zero;

    for (var contact : ContactPoint in collision.contacts)
    {
        contactCount++;
        normalAve += contact.normal;

        velocityAve += collision.relativeVelocity;
        Debug.DrawRay(contact.point, contact.normal, Color.green, 2, false);
    }

    normalAve /= contactCount;
    velocityAve /= contactCount;

    var damage = Vector3.Dot(normalAve, velocityAve) * collision.rigidbody.mass;

    life -= damage;

    if(life <= 0)
    {
        // Stackoverflow people can ignore this, bounces
        // don't happen when you're dead
        this.rigidbody.useGravity = this.GetComponent(ship_small_physics).stage.GetComponent(stage_params).grav_on_hit;

        this.GetComponent(ship_small_physics).impact();
    }else{
        // Stackoverflow people! Right here!
        Debug.Log("survived! with " + life + " life");
        this.GetComponent(ship_small_physics).small_impact(normalAve, velocityAve);
    }
} 
```

那么，在`.small_impact`

```
function small_impact(n : Vector3, v : Vector3)
{
    var h_angle : Vector3 = Vector3(n.x, 0, n.z);
    Debug.DrawRay(this.transform.position, n, Color.blue, 2, false);
    Debug.DrawRay(this.transform.position, h_angle, Color.red, 2, false);
} 
```

澄清一下：游戏是某种 3D 的，但由于各种原因，在这种情况下，我只关心飞机中的碰撞法线`x-z`（飞机旧物理引擎不会这样做的另一个原因）。这就是为什么我创建一个新向量`h_angle`，它本质上是碰撞法线在`x-z`平面上的投影。

# python - 使用 cookielib 的 Twitter 身份验证

> ID：11332352
> 
> 赞同：0
> 
> 时间：2012-07-04T15:56:15.107
> 
> 标签：python, authentication, twitter, cookielib

有人可以告诉我为什么这不起作用吗？

```
import cookielib
import urllib
import urllib2
cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
data = urllib.urlencode({'session[username_or_email]':'twitter handle' , 'session[password]':'password'})
opener.open('https://twitter.com' , data)
stuff = opener.open('https://twitter.com')
print stuff.read() 
```

为什么登录后不给页面的html？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:18:55.890

请考虑为您的任务使用 Oauth 库。不建议使用 mechanize 抓取站点，因为 twitter 可以随时更改 HTML 特定的内容，然后您的代码将中断。

看看这个：[http ://code.google.com/p/python-twitter/上的 Python-twitter](http://code.google.com/p/python-twitter/)

发布更新的最简单示例：

```
>>> import twitter
>>> api = twitter.Api(
            consumer_key='yourConsumerKey',
            consumer_secret='consumerSecret',
            access_token_key='accessToken',
            access_token_secret='accessTokenSecret')
>>> api.PostUpdate('Blah blah lbah!') 
```

* * *

失败的原因可能有很多：

*   Twitter 可能需要一个`User-Agent`您没有提供的标题。
*   我没有看 HTML，但是在实际提交表单之前，很多人都在玩一些 Javascript（我实际上认为是这种情况，因为我隐约记得在这个确切的事情上写了一个非常详细的答案（而且我似乎没有找到它的链接！））。

# vhdl - HDL中的组合循环

> ID：11332363
> 
> 赞同：3
> 
> 时间：2012-07-04T15:57:02.090
> 
> 标签：vhdl, verilog

这只是我试图围绕我的大脑进行的一个实验。

所以我有两个寄存器 r1 r2 和两条线 w1 w2。我想要的是，如果两个r都是1，那么两个w都应该是1。如果一个r是1，对应的w应该是1，另一个应该是0。如果两个r都是0，w1应该是1，w2应该是0。

11=>11

10=>10

01=>01

00=>10

需要注意的是，我希望 w1 的分配不要直接包含 r2，反之亦然。所以，我有（例如在 Verilog 中——VHDL 的答案也很好）

```
assign w1 = r1 | !w2;
assign w2 = r2 | !w1; 
```

这是必要的，但还不够。上述所有情况都为真，但 00=>01 也为真。事实上，当 r1=r2=0 时，它只是创建了一个没有驱动程序的电线循环，所以我认为结果是不确定的。

有没有什么方法可以得到我正在寻找的结果而不包括 r2 在 w1 的分配中，反之亦然？（并且没有引入新变量）。基本上只是为了确保在一个导线周期中，w1 被拉高而 w2 被拉低？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T16:15:39.060

不，我认为没有额外的电线/信号并且没有交叉依赖，没有干净的方法可以做到这一点。

顺便说一句，您的“循环线”通常被称为**组合循环**，避免这些是一个好习惯。

1.  对于具有组合回路的 VHDL 模型的仿真，只要仿真器收敛到一个稳定点，即不再有信号值变化，结果是确定性的。如果信号值不断变化，那么您很可能会达到模拟器的迭代限制。我不知道 Verilog，但我认为它也是确定性的。
2.  至于综合，工具要么拒绝此构造并引发错误，要么尝试处理此问题，这可能对时序产生非常糟糕的影响。

同样，即使您的仿真没问题并且您的综合工具允许这样做，也应该避免组合循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T22:48:22.713

您目前拥有的与 SR 锁存器非常相似，因此它具有亚稳态条件（也称为竞争条件）。

不过，从上面的真值表来看，看起来 w2 应该只设置为 r2。 `assign w2 = r2;`

该更改应该可以解决您的比赛状况；尽管如上所述，但要警惕组合逻辑造成的巨大限制。

# php - wordpress 根目录

> ID：11332364
> 
> 赞同：0
> 
> 时间：2012-07-04T15:57:11.007
> 
> 标签：php, wordpress

> **可能重复：**
> [Wordpress 根目录](https://stackoverflow.com/questions/2354633/wordpress-root-directory)

我需要在 wordpress 安装的根目录中写入一个文件。这需要与 wp-config.php 文件位于同一位置。

但我需要一种方法来调用根 url。

是否有类似 wp_root_dir() 的函数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:06:10.127

你想要**根 url**还是**根目录**？

鉴于您将此文件放入 wordpress 的根目录中，我假设它不是插件或类似的东西。

这是获取**根网址的方法**

```
<?php echo get_bloginfo('url'); ?> 
```

否则，如果您想要路径（`include()`例如），那么这样做是完全合理的：

`../../../file-in-root.php -> as many ../s as you need to go back directories`

我一直这样做。如果您认为您的目录结构可能会发生很大变化，您可以将整个路径放入文件，例如

`/home/w/o/wordpress/web/public_html/file-in-root.php`

如果您正在创建一个插件并且您不知道文件的路径，那么显然它会有所不同，但是有 wordpress 功能。但是，当您使用 root 时，我想这仅适用于您自己的服务器/网站配置，这会很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:18:17.950

如果您的意思是在客户端 ( `http://www.myreallyawesomewebsitethatuseseordpress.com/blog/wordpress/`)，您可以使用`get_bloginfo('url')`. 这将返回安装 wordpress 的 url。

如果您的意思是在服务器端，则可以使用该`ABSPATH`变量。

用法：

客户端：

```
<?php
    echo "You are using this site. Wordpress is on" . get_bloginfo('url');
?> 
```

服务器端：

```
<?php
    echo "On the server, Wordpress is installed on" . ABSPATH;
?> 
```

# devexpress - 两个 ASPxDockPanel 之间的 zIndex 问题

> ID：11332371
> 
> 赞同：0
> 
> 时间：2012-07-04T15:57:59.473
> 
> 标签：devexpress, z-index, dockpanel, aspxcombobox

我在同一个 ASPxDockZone（垂直）中有两个 ASPxDockPanel。第一个面板有一个带有下拉列表的 ASPxCombobox，它应该越过第二个面板。然而，下拉列表只是在第二个面板后面呈现。

[第一个面板的 z-index 为 12000，而第二个面板的 z-index 为 12002，这解释了这个问题，所以我尝试按照devexpress 网站](http://www.devexpress.com/Support/Center/p/Q365005.aspx)上的建议在每个面板上应用 CssClass 属性，但它仍然不起作用。

提前感谢您的帮助，TheRainFall。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T09:34:05.960

我从 DevXpress 支持人员那里得到了答案。

它与[IE z-index bug](http://therealcrisp.xs4all.nl/meuk/IE-zindexbug.html) (IE7) 有关。由于我使用的是 IIS 6，虽然用户使用的是 IE8，但似乎在 IE7 上设置了基本兼容模式。

# html - 在提要中的相关消息旁边显示用户

> ID：11332373
> 
> 赞同：0
> 
> 时间：2012-07-04T15:58:06.527
> 
> 标签：html, ruby-on-rails, ruby

尽管我遇到了麻烦，但应该很容易回答的快速问题：

我有一个简单的 Rails 应用程序，带有一个消息（'intro'）选项卡，显示发送和接收的消息（'intro'）。我将消息从用户适当地路由到用户，并且消息的内容在用户收件箱中显示良好。但是，我无法在消息本身旁边显示与消息关联的用户的名称

我有一个用户模型：

```
class User < ActiveRecord::Base
    attr_accessible :name, :email, :one_liner, :password, :password_confirmation
    has_secure_password

    has_many :sent_intros, foreign_key: "sender_id", dependent: :destroy, class_name: "Intro"
    has_many :received_intros, foreign_key: "receiver_id", dependent: :destroy, class_name: "Intro"

    has_many :receivers, through: :sent_intros, source: :receiver
    has_many :senders, through: :received_intros, source: :sender

        ... 
```

，一个介绍（消息）模型：

```
class Intro < ActiveRecord::Base
  attr_accessible :content, :receiver_id, :sender_id

  belongs_to :sender, class_name: "User"
  belongs_to :receiver, class_name: "User"

  ... 
```

这是用户控制器的相关代码：

```
class UsersController < ApplicationController
  before_filter :signed_in_user, only: [:index, :edit, :update, :destroy]
  before_filter :correct_user, only: [:edit, :update]
  before_filter :admin_user, only: :destroy

  def show
    @user = User.find(params[:id])
    @intro = Intro.find(params[:id])

    @sent_intros = current_user.sent_intros.paginate(page: params[:page])
    @received_intros = current_user.received_intros.paginate(page: params[:page])
  end
  ... 
```

我的 .erb 显示页面：

```
<% provide(:title, @user.name) %>
<div class="row">
    <aside class="span4">
        <section>
            <h1>

                <%= @user.name %>
            </h1>
        </section>
    </aside>
    <div class="span8">
        <% if@user.received_intros.any? %>
            <h3>Received intros (<%= @user.received_intros.count %>)</h3>
            <ol class="intros">
                <%= render @received_intros %>
            </ol>
            <%= will_paginate @received_intros %>
        <% end %>

        <% if@user.sent_intros.any? %>
            <h3>Sent intros (<%= @user.sent_intros.count %>)</h3>
            <ol class="intros">
                <%= render @sent_intros %>
            </ol>
            <%= will_paginate @sent_intros %>
        <% end %>
    </div>
</div> 
```

所以我关心这个页面的 <%= render @received_intros %> 和 <%= render @sent_intros %> 行

目前，它显示以下内容（没有关联用户的介绍内容）：

![在此处输入图像描述](../Images/7e9eacbebe22da7477a3be6395eb8811.png)

如何将这些用户名添加到各自的介绍中？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:29:37.687

看起来您正在根据与控制器操作中的用户相同的 ID 查找 Intro。由于它是第二次查找的，它覆盖了@user 变量。这是你的代码：

```
@user = User.find(params[:id])
@intro = Intro.find(params[:id]) 
```

我猜您可能希望第二行类似于 params[:intro_id]，但如果没有看到链接到该页面的视图代码以及可能是您的路由文件，则不能完全确定。

# scala - Scala Dispatcher - 将一组 Actor 绑定到一组预定义的线程

> ID：11332380
> 
> 赞同：1
> 
> 时间：2012-07-04T15:58:32.173
> 
> 标签：scala, akka

我正在使用阿卡。我正在尝试解决如何绑定一组参与者（数千个），以便每个唯一的参与者都由同一个线程处理。例如，我的操作系统有 24 个本机线程，我有 1000 个参与者，每个参与者处理一个独特的数据：d1、d2、d3、.. dn，我总是希望 d1 由同一个线程 1 处理。在 Java 中，我会预先- 分配 24 个线程并维护 id 到线程的映射，以循环方式分配它们。示例：2 个线程，5 个数据 d1,d3, d5 th1 d2, d4 th2

我查看了 Akka 文档，在 4 个调度程序中，没有一个能满足我的需求。最接近的是 PinnedDispatcher - 但它不断创建本机线程，结果是 OOME。

除了创建我自己的调度程序之外，对此有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:31:49.200

你不需要创建你自己的调度器，你只需要创建你自己的 ExecutorService，你使用 ExecutorServiceConfigurator 提供给任何调度器，这样当actor被安排执行时，你将它发送到“它的”线程。您基本上可以保留单线程[ExecutorServices的地图](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28java.util.concurrent.ThreadFactory%29)

希望有帮助！

干杯，√</p>

# java - writeUnshared 写入类似 writeObject 的字段

> ID：11332383
> 
> 赞同：0
> 
> 时间：2012-07-04T15:58:54.157
> 
> 标签：java, serialization

所以我有一个像这样的包装类：

```
class VeryWrapper
{
    Wrapper wrp = new Wrapper();
    int val = 0;
} 
```

其中`Wrapper`定义为：

```
class Wrapper
{
    int val = 0;
} 
```

现在，如果我想将其序列化为流，请同时更改`val`and`wrp.val`并使用新状态对其进行序列化。我知道使用`writeObject`会导致在流的另一端接收旧状态。所以`writeUnshared`在这种情况下必须使用。但问题是，使用这种方法只有对象本身将被取消共享，而不是它的字段（`wrp`我的意思是字段），因此值`val`将被更新，但值`wrp.val`仍然是旧值。你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:00:53.327

`reset()`定期调用以避免内存泄漏是个好主意。在您的情况下，它将确保所有对象都将被再次发送。

# postgresql - Symfony2 和 postgres 的引用标识符问题

> ID：11332386
> 
> 赞同：1
> 
> 时间：2012-07-04T15:59:07.867
> 
> 标签：postgresql, symfony, quotes, quote

我对 symfony2 和 postgres 有疑问。我有一个数据库，其中包含大写的表和序列，我无法修改。

我已经生成了实体（逆向工程），引用了标识符，当我尝试进行任何类型的修改时（php app/console 学说：schema:update --force），它返回错误：

**[PDOException] SQLSTATE [42P01]：未定义表：7 错误：不存在关联 «base_id_se q» 第 1 行：选择 min_value，increment_by FROM BASE_id_seq**

我的基本实体的代码是：

```
namespace Slip\CoreBundle\Entity;

use Doctrine\ORM\Mapping\ClassMetadata;
use Doctrine\ORM\Mapping as ORM;
use Doctrine\Common\Collections\ArrayCollection;
use Slip\ContactBundle\Entity\Criterion;
/**
 * Slip\CoreBundle\Entity\Base
 *
 * @ORM\Entity(repositoryClass="Slip\CoreBundle\Repository\BaseRepository")
 * @ORM\Table(name="""BASE""")
 */
class Base
{
    /**
     * @var bigint $id
     * 
     * @ORM\Column(name="id", type="bigint", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="SEQUENCE")
     * @ORM\SequenceGenerator(sequenceName="""BASE_id_seq""", allocationSize=1, initialValue=1)
     */
    private $id;
    /**
     * @var string $name
     * @ORM\Column(name="name", type="string", length=1024, nullable=false)
     */
    private $name; 
```

.....................

如果我将序列的名称更改为小写所有作品，并将修改应用于数据库，但我无法在生产环境中执行此操作

我不明白为什么如果我在数据库中进行任何修改，在不是 BASE 表的其他表中会出现此错误。

感谢您的合作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T20:44:08.947

顺便说一句，Symfony 没有在它提交给 PostgreSQL 的 SQL 中引用标识符。您可以通过 SQL 跟踪来验证这一点；请参阅[log_statement](http://www.postgresql.org/docs/8.2/static/runtime-config-logging.html)的文档。与 SQL Server 以外的任何 DBMS 一样，如果您使用引号创建标识符，则必须在引用它们的所有后续 SQL 中引用这些标识符。

我对 Symfony 一无所知，但它可能有一个选项可以强制使用带引号的标识符，或者至少允许您手动在标识符名称中强制使用引号。

如果没有，并且您无法触摸 PROD 表，那么您就处于困境中。[似乎 PostgreSQL 对可更新视图](http://wiki.postgresql.org/wiki/Updatable_views)的支持有限。你也许可以结合视图和规则来完成你所追求的，但它可能很丑陋。首先尝试 Symfony 方法。

# scorm - scorm 2004 第 3 版中的 scorm 1.2 必备元素

> ID：11332391
> 
> 赞同：1
> 
> 时间：2012-07-04T15:59:24.750
> 
> 标签：scorm, scorm2004, scorm1.2

我有一个关于scorm的问题。

以下代码是 scorm 1.2 中的先决条件：

*活动1 & 活动2*

scorm 2004 3rd edition 中对应的代码是什么？

# maven - 从 Eclipse(Juno) 使用 m2e 时缺少 Maven 目标

> ID：11332393
> 
> 赞同：3
> 
> 时间：2012-07-04T15:59:44.897
> 
> 标签：maven

在 Windows 7 机器上全新安装 Eclipse (Juno) 和 m2Eclipse 后，我在选择 Maven 目标时遇到问题。M2Eclipse 是通过 Eclipse 市场安装的。

我通过 Eclipse 向导生成了一个非常简单的应用程序。我从上下文菜单中选择了 Run as.../Maven build... 选项，然后单击 Select 以获取目标列表。但是，列表是空的。

然后我按照这篇文章中的说明准确描述了我的问题：

[空的 Maven 目标列表](https://stackoverflow.com/questions/5088929/empty-goals-list-in-m2eclipse-maven)

不幸的是，这对我不起作用：列表仍然是空的。

如果有人对我还能检查什么有任何想法，我将不胜感激。

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T20:00:19.647

这是正常行为......只需输入您要运行的目标。例如，清洁包装

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-26T18:26:23.437

根据 m2e 开发人员的说法，这应该是一个没有完全实现的功能。许多用户建议删除该按钮。我会忽略它并手动输入它们，假装按钮不存在。

见：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=344997](https://bugs.eclipse.org/bugs/show_bug.cgi?id=344997)

# java - 尝试将项目添加到tomcat时抛出错误

> ID：11332394
> 
> 赞同：0
> 
> 时间：2012-07-04T15:59:46.980
> 
> 标签：java, eclipse, tomcat, eclipse-indigo

我创建了一个 Maven 项目，但是当我尝试将它添加到我的服务器时，我收到了这个错误：

![在此处输入图像描述](../Images/bb778605fccd859d25e450e92f3f952b.png)

我通过更新其方面将项目转换为“动态 Web 项目”。还有什么我错过的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:19:31.863

事实证明，不断变化的方面有时很丑陋。甚至更改现有的动态 web 项目（其中一个方面，例如动态 web 模块从 2.5 到 2.6）也会带来很多麻烦。

建议：暂时搁置 Maven，然后从头开始一个新的动态 Web 项目。导入您需要的源（不要复制它们，导入它们，发现这是控制版本环境的好习惯）。将服务器与项目关联并尝试部署它。

# optimization - 优化某些方程的所有排列

> ID：11332398
> 
> 赞同：1
> 
> 时间：2012-07-04T16:00:03.953
> 
> 标签：optimization, automation, wolfram-mathematica, linear-programming

我正在解决 Mathematica 中的优化问题。我想生成额外的方程，其中变量 z_k 用 (z_k - 1) 或 (z_k + 1) 代替。

我怎样才能自动化这个并将这些方程添加到 Maximize[] 函数中？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T12:45:28.207

定义

```
vars = {z1, z2, z3, z4};
shifts = {-1, 0, 1}; 
```

生成所有替换规则的一种方法如下：首先制作一个包含每个变量（`Outer`位）的所有可能新值的列表，然后从每个列表中选择一个元素的所有组合（使用`Tuples`）。

```
rules = Tuples[Outer[#1 -> #1 + #2 &, vars, shifts]]; 
```

然后你可以这样做：

```
Union[eq12 /. rules] 
```

`Union[]`是必需的，因为某些转换不会影响`eq12`.

或者您可以定义一个函数来一次性完成所有操作：

```
generateAdditionalEqs[eq_, vars_, shifts_] := (eq /. 
  Tuples[Outer[#1 -> #1 + #2 &, vars, shifts]]) // Union 
```

# ruby - 路径中的参数包括 Sinatra 中的查询字符串。那是对的吗？

> ID：11332399
> 
> 赞同：0
> 
> 时间：2012-07-04T16:00:05.163
> 
> 标签：ruby, sinatra, passenger

我在乘客下运行一个 Sinatra 应用程序。我有一个大致如下所示的动作：

```
get '/pic/:id' do
  # do stuff ...
  canonical_image_url = "/img/%d.jpg" % params[:id]
end 
```

但是我看到我的应用程序失败并出现以下异常 `ArgumentError (invalid value for Integer(): "22?fill=width&width=512&sig=173798632b6ce659234a34c05324196c92b9a8ef")`

这意味着以某种方式没有从路径中提取 QS 参数。这是某种奇怪的逃避问题吗？（我的应用程序的某些部分使用双编码查询字符串请求）还是这是一个已知问题？还是这样设计的，路径参数和QS参数不能同时使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:39:18.293

一种更简单的编写方法（这可能无助于解决您的问题，但评论太长了）：

```
get '/pic/:id' do |id|
  # do stuff ...
  canonical_image_url = "/img/%d.jpg" % id
end 
```

# multidimensional-array - 旋转多维数组

> ID：11332403
> 
> 赞同：2
> 
> 时间：2012-07-04T16:00:38.110
> 
> 标签：multidimensional-array

所以我想将一个二维数组与另一个二维数组（实际上是另一个更大的二维数组的一部分）进行比较。我需要做的是将第一个数组与第二个数组进行比较，但我还需要从多个角度进行比较，如果你愿意，可以旋转其中一个。

我正在用 C++ 编写这个并且我正在使用向量（如果有特定的算法或函数可以帮助这些）

这是我需要做的一个例子：

```
Take this map:

0001000
0001000
0001000
0001111
0000000

Compare it to this (which means if 1 is road and 0 is grass, this would help 
me find 'turns' in the road):

010
110
000

Comparing it like that won't yield any results, BUT, if I rotate it to 180
degrees:

010
011
000

It fits. 
```

更具体地说，我会将一大堆小数组与大数组进行比较。我不会比较大阵列上的每个位置，只随机选择一个位置和一个小阵列，将小阵列旋转到所有 4 个边，看看它们是否匹配。我将重复此操作数百次，以找到一个不错的位置样本，其中随机选择的小地图样本与大地图相比呈正比。

基本上... ：）

Atm 我正在努力解决这个问题，但如果我能帮上忙，我不想重新发明轮子。

（更新：接近解决这个问题！我意识到我实际上需要将较小的网格旋转 8 次，我需要匹配每个镜像！更新 2：大声笑我解决了这个问题。一旦我理解了代码的实际作用，我就会发布，也可以。早上 5 点我就这样疯了！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:35:32.203

哈哈。有趣的问题。我也想试试。尝试读入旋转矩阵。当涉及到旋转整个矩阵时，它们有点简单，如果旋转角度非常关心你。

[http://en.wikipedia.org/wiki/Rotation_matrix](http://en.wikipedia.org/wiki/Rotation_matrix)

# php - 删除标签及其内容

> ID：11332405
> 
> 赞同：-1
> 
> 时间：2012-07-04T16:00:51.350
> 
> 标签：php, dom

我正在编写一个利用页面源代码的程序，但是在某些情况下我想忽略它的一部分。最终，我想删除具有 id 导航及其所有内容的标签，然后输出 HTML。

编辑代码：

```
<?php
$lol = new DOMDocument();
$fh = fopen("test.txt", "r");

$lol->loadHTML(fread($fh, filesize("test.txt")));
$lol->saveHTML();

 $xpath = new DOMXpath($lol);
 $nodeList = $xpath->query('//navigation');
 foreach ($nodeList as $element) {
    $element->parentNode->removeChild($element);
 }

/*
foreach($divs AS $div) {
    if($div->getAttribute('id') == "navigation") {
        $lol->removeChild($div);
    }
}
*/

$out = $lol->saveHTML();

echo $out;
?> 
```

从我在网上阅读的内容来看，我本以为这会起作用，但事实并非如此。

任何建议表示赞赏。

test.txt 只是一个带有页面源代码的文本文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T23:52:40.573

看起来评论让你大部分时间都在那里。看起来 XPath 需要稍微调整一下。`$xpath->query('//navigation')`将搜索`<navigation>`标签，而您正在寻找带有*id*导航的标签：

```
 $xpath = new DOMXpath($lol);
 $nodeList = $xpath->query("//*[@id='navigation']");
 foreach ($nodeList as $element) {
    $element->parentNode->removeChild($element);
 } 
```

XPath 对于这类事情非常强大，这个[W3 教程](http://www.w3schools.com/xpath/xpath_syntax.asp)是开始学习更多内容的好地方。

（如果这不起作用，我会回应发布相关 HTML 的调用）。

# html - CSS中的重复背景-向下滚动时帧率下降

> ID：11332408
> 
> 赞同：0
> 
> 时间：2012-07-04T16:00:57.793
> 
> 标签：html, css

我刚刚在我网站的博客上设置了一个重复的背景 (url)，大小为 480 x 300。

但是，当我向下滚动时，我注意到帧速率丢失——与旧的基于背景颜色的布局相比，页面不再平滑地向下滚动。我认为这是因为重复背景所需的渲染。

有没有办法优化我的背景以快速加载，同时提高帧率？1920x1200 背景会比我现在使用的更好吗？（480 x 300）？

哦，我指的是博客部分：[http ://blog.aptitudedigital.com/](http://blog.aptitudedigital.com/)

（网站仍然是 WIP，但我会感谢下面评论中的建议）

# tfs - 移动类和改变命名空间。未签入 TFS 的类

> ID：11332410
> 
> 赞同：0
> 
> 时间：2012-07-04T16:00:57.977
> 
> 标签：tfs

在 Visual Studio 2010 中使用 TFS。

有没有人注意到，如果您使用解决方案资源管理器（同时更改命名空间）将一个类从一个文件夹移动到另一个文件夹，然后签入您的更改：

*   原始类文件已正确删除
*   新的类文件（移动的）未添加到源代码管理中

没有给出警告。只有当其他人检查该项目时，它才会意识到缺少某些东西。TFS 源代码管理资源管理器就像文件已签入一样。

我可以解决此问题的唯一方法是进入 Windows 资源管理器并手动添加已使用 TFS 电动工具移动的每个类。然后再次入住。

我现在已经遇到这个问题大约 5 次了。

这是 TFS 的预期工作方式还是一个错误？还是只有我，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:49:34.553

您需要安装所有 Visual Studio 更新。

如果 TFS 服务器版本领先于您的 Visual Studio 版本，您可能会遇到这些奇怪的问题。

VS2010 有一个免费的（虽然有点刻薄）扩展，它可以让您知道您缺少哪些更新，称为[VersionInfo](http://tinyurl.com/7xueeys)。

# html - 我们能想到的最简单的垂直对齐方式

> ID：11332414
> 
> 赞同：3
> 
> 时间：2012-07-04T16:01:33.467
> 
> 标签：html, css

总而言之，在容器中垂直对齐内容的方法很少。这些是主要的方法（如果你现在有一些完全不同的方法，你提供例子会非常慷慨——我会在这里合并）

1.  使用`position`和`transform`属性 - [http://jsfiddle.net/EjV4V/3/](http://jsfiddle.net/EjV4V/3/)这个很好，但对我来说，有点过头了，特别是如果我们考虑渲染优化问题。适用于所有现代浏览器，不适用于 IE7。
2.  使用`display: inline-block`带有一个附加辅助块的属性 - [http://jsfiddle.net/mmxm4/3/](http://jsfiddle.net/mmxm4/3/)。因为使用了额外的 DOM 元素，所以不认为这种方法很好。在 IE7 中不起作用。值得一提的是（感谢@nclenorton 提到这一点），我们可以使用`:before`或`:after`生成内容。但是，再一次 -[不在 IE7 中](http://caniuse.com/#search=%3abefore)。
3.  使用`display: table`和`display: table-cell`属性 - [http://jsfiddle.net/Ppk3p/2/](http://jsfiddle.net/Ppk3p/2/)。有时这种方法很简洁，有时则不然。请注意，与提供的其他示例相反，子单元格宽度存在问题。无论如何，在IE7中不起作用。
4.  使用`display: box`- [http://jsfiddle.net/9Phgg/9/](http://jsfiddle.net/9Phgg/9/) - 这是处理事情的最性感方式，但正如我们所知，规范并非 100% 完成。此外，Opera 不支持弹性盒子。是的，当然，甚至不要考虑在 IE7 中尝试这样的事情。

    我的问题是：“关于上述所有方法在 IE7 中都将失败的事实，在所有现代浏览器**和**IE7 中垂直居中元素的最通用、优雅、简单和正确的方法是什么？”。

    我有一种强烈的感觉，helas，虽然现在是 2012 年，但使用表格布局仍然是答案。我见过一些奇特的方法，例如使用`position: absolute`甚至是 javascript 表达式，但这远非优雅和简单。

经验丰富的 html 开发人员，如果我错了，请纠正我。

**UPD：** 实际上，还有另一种方法，但我发现它完全错误且不可行，原因有很多。但值得一提。默认情况下，按钮中的任何内容都垂直居中，所以请注意 - [http://jsfiddle.net/s5nz4/3/](http://jsfiddle.net/s5nz4/3/)。这将在 IE7 中工作，但我们都是成年人，我希望，理解这是不合适的 )))

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:13:46.080

如果我需要 IE7 支持，我倾向于选择“`display: inline-block`带有额外元素”的方法。这在 IE7 中*确实有效，只需*[稍作改动](https://stackoverflow.com/questions/5838454/inline-block-doesnt-work-in-internet-explorer-7-6/5838575#5838575)，这里有[一个示例](https://stackoverflow.com/questions/10998614/ie7-vertically-align-middle-not-working/10998683#10998683)。

如果我不需要IE7支持，我通常使用该`display: table-cell`方法。

有时，我不能使用该`display: table-cell`方法，通常是当我需要在元素底部使用绝对定位的东西时`display: table-cell`。`position: relative`至少在 Firefox 中不适用于表格单元格。在这些情况下，我使用该`display: inline-block`方法，除了通过 插入“额外元素” `:before`，这使 HTML 保持干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:13:02.400

如果您知道要居中的高度，则可以使用绝对将框定位在距顶部 50% 的位置，然后使用框高度一半的负边距将其居中。让它在 ie7 上运行非常复杂，但它确实有效。

[http://css-tricks.com/snippets/css/exactly-center-an-imagediv-horizo​​ntally-and-vertically/](http://css-tricks.com/snippets/css/exactly-center-an-imagediv-horizontally-and-vertically/)

例子：

```
.center {
    width: 300px;
    height: 300px;
    position: absolute;
    left: 50%;
    top: 50%; 
    margin-left: -150px;
    margin-top: -150px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:40:42.540

这不是最好的方法，但您可以使用两个 div 来强制粉红色框始终居中，一个“推动”另一个：

[http://jsfiddle.net/EjV4V/25/](http://jsfiddle.net/EjV4V/25/)

这种方法应该适用于 IE7，尽管您总是必须使用固定边距。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T16:53:22.427

虽然它在 IE7 中不起作用，但使用伪元素而不是“spreader”应该适用于所有主要浏览器：http: [//jsfiddle.net/mmxm4/6/](http://jsfiddle.net/mmxm4/6/)

至于 IE <= 7，`after`我想，添加.htc 行为创建一个带有类的元素并不是犯罪。至少，不超过使用 PIE。

这是代码（在几个项目中测试过）：

```
<PUBLIC:COMPONENT lightWeight="true">
<!-- saved from url=(0014)about:internet -->

    <PUBLIC:ATTACH EVENT="oncontentready" FOR="element" ONEVENT="append_after()" />
    <PUBLIC:ATTACH EVENT="ondocumentload" FOR="element" ONEVENT="append_after()" />

    <script type="text/javascript">
        function append_after() {
            if (!this.after) {
                var el = element,
                    doc = el.document,
                    aft_el = doc.createElement('div');

                this.after = "true";
                aft_el.setAttribute('class', 'after');
                this.appendChild(aft_el);
                aft_el.outerHTML = aft_el.outerHTML;

                this.runtimeStyle.behavior = "none";
            }
        }
    </script>

</PUBLIC:COMPONENT> 
```

如果您使用条件类，只需添加如下内容：

```
.lte-ie7 .parent {
  behavior: url(/path/from/the/site/root/after.htc);
} 
```

然后，对于这两个`inline-block`元素，添加`display: inline; zoom: 1;`到样式中。不过，更优雅的解决方案是使用“[跨浏览器内联块](http://blog.mozilla.org/webdev/2009/02/20/cross-browser-inline-block/)”技术：为内联块定义一个全局类，并在需要的地方使用它：

```
.inline-block {
    display: -moz-inline-box;
    display: inline-block;
    vertical-align: top;
}

.lte-ie7 .inline-block {
    display: inline;
    zoom: 1;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T16:16:30.310

对此的 CSS3 解决方案是`box-align`

[http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_box-pack](http://www.w3schools.com/cssref/tryit.asp?filename=trycss3_box-pack)

但某些浏览器不支持它，所以我会使用一些 jQuery 插件，例如：

[http://www.nealgrosskopf.com/tech/thread.php?pid=37](http://www.nealgrosskopf.com/tech/thread.php?pid=37)

# .net - DotNetNuke 数据库升级问题（v05.03.00 失败）

> ID：11332416
> 
> 赞同：0
> 
> 时间：2012-07-04T16:01:45.377
> 
> 标签：.net, dotnetnuke

我正在尝试使用 IIS 在我的本地计算机上设置现有的 DNN 项目。我已经下载并恢复了实时数据库的副本，然后从 FTP 下载网站文件并将它们放入我机器上的虚拟目录中。

此时，当我导航到主页时，会看到 DotNetNuke 安装向导。当我继续使用该向导时，它开始执行数据库更新并在版本 05.03.00 上失败。这是输出的屏幕截图：

![在此处输入图像描述](../Images/6ba853a3b1d9bb62a8b0be926339f090.png)

我能找到的唯一日志是数据库上的 EventLog 表，但它不包含有关错误的任何有用信息。

有趣的是网站在生产服务器上运行良好，因此 DNN 文件版本应该与数据库版本相同，因此不需要更新数据库。

我上周安装了 DNN 社区版 v06.02.00（连同 MS WebMatrix），但在设置此项目之前将其删除。我认为这可能与这个问题有关。如果有人遇到过此类问题，也许您可​​以在这里为我指明正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:02:07.900

根据您提到的内容，我猜您需要更新 web.config 中的 ConnectionString 以指向正确的数据库。（你恢复的那个）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T14:42:18.287

在 SQL 脚本运行时，您可能会遇到各种错误，而且发生的任何错误都可能不是问题。

要查看发生的错误，请查看：/Providers/DataProviders/SqlDataProvider/05.03.00.log.resources

这将向您显示哪些脚本失败以及错误是什么。您可以通过 Host-SQL 手动运行这些脚本，也可以直接在 SQL Server 中运行它们，但您需要将 {databaseowner} 和 {objectqualifier} 标记替换为适当的信息（通常是“dbo”和“”没有引号）。

# android - MonoDroid 自定义视图不显示子项

> ID：11332420
> 
> 赞同：3
> 
> 时间：2012-07-04T16:02:05.353
> 
> 标签：android, custom-controls, xamarin.android

我有非常简单的自定义视图：

```
public class TestControl : RelativeLayout
{
    private readonly Context _context;

    private TextView _textLabel;

    public TestControl(Context context) : base(context)
    {
        _context = context;

        LayoutParameters = new LayoutParams(300, 200);
        SetBackgroundColor(Color.Green);

        _textLabel = new TextView(_context);
        _textLabel.SetText("Test test test test test test", TextView.BufferType.Normal);
        _textLabel.SetTextColor(Android.Graphics.Color.Black);
        _textLabel.LayoutParameters = new ViewGroup.LayoutParams(200, 50);
        _textLabel.SetBackgroundColor(Color.Red);

        AddView(_textLabel);
    }

    protected override void OnLayout(bool changed, int l, int t, int r, int b)
    {

    }
} 
```

当我尝试将其作为视图添加到我的主要活动布局中时：

```
var myControl = new TestControl(this);
myMainLayout.AddView(myControl); 
```

我只看到绿色矩形（300 x 200）但没有 TextView。

我究竟做错了什么？任何关于如何在一些彩色布局中至少显示 TextView 的帮助都非常感谢，因为我实际上需要更复杂的自定义视图。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T10:50:21.030

您可能需要执行类似于[此处](https://stackoverflow.com/questions/4163918/my-custom-view-gets-drawn-only-when-added-in-oncreate)解释的操作。[在这种情况下， SetWillNotDraw](http://developer.android.com/reference/android/view/View.html#setWillNotDraw%28boolean%29)可以对你耍一些花招。

# android - 在android中动态更改视图的内容

> ID：11332421
> 
> 赞同：1
> 
> 时间：2012-07-04T16:02:09.230
> 
> 标签：android, android-view

我是 android 新手，我对我现在正在做的项目有一些疑问。我正在开发一个应用程序，它总共显示 9 张 3x3 图像，如下图所示。 ![图1](../Images/3ffe2a18cddd8abaa136f4d500f2cf6c.png)

当我按下下一个按钮时，图像变为另外 9 个图像。如果剩余图像不是 9，则图像将按照剩余数量显示，如下图所示。（示例剩余为 6 张图片）

![图2](../Images/dfa1c57c7b50319ddacbadb575d6714d.png)

问题是：

1.  显示图像的最佳方法是什么？我的想法是创建一个包含 9 个 ImageViews 的视图

2.  如果我有 2 个 xml 布局，第一个是主布局，第二个是包含 ImageViews 的布局，如何将第二个插入到第一个？

3.  以及如何根据上面的解释动态插入图像？ ![问题3](../Images/73d8eb6cc4bfe1fb03b8209160315abd.png)

请帮我一些代码。我非常感谢任何帮助。对不起，如果我的英语不是那么好。

先感谢您。

* * *

**更新**

我已经尝试在这种情况下使用 GridView，这是我第一次使用`GridView`，所以我使用[这里](http://www.mkyong.com/android/android-gridview-example/)的示例并将其实现到我的（我已经尝试了包含在那里的示例，它的工作原理）。

但是，我检查了很多次，LogCat 没有错误，没有强制关闭，图像没有显示。我不知道哪里错了。

这是我的代码：

选择图片.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
    android:background="@drawable/bg_inner">

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/book_inner"
            android:layout_marginTop="50dp"
        />

        <ImageButton
            android:id="@+id/homeBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/home_btn"
            android:background="@null"
        />

        <ImageView
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:src="@drawable/bg_arrow_btn"
            android:layout_alignParentRight="true"    
        />

        <ImageButton
            android:id="@+id/nextBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/right_arrow"
            android:background="@null"
            android:layout_alignParentRight="true"
            android:layout_marginTop="5dp"
            android:layout_marginRight="7dp"
            android:layout_marginLeft="7dp"
        />

        <ImageButton
            android:id="@+id/prevBtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/left_arrow"
            android:background="@null"
            android:layout_toLeftOf="@+id/nextBtn"
            android:layout_marginTop="5dp"
        />

        <GridView
            android:id="@+id/gridView1"
            android:numColumns="3"
            android:gravity="center"
            android:columnWidth="30dp"
            android:stretchMode="columnWidth"
            android:layout_width="300dp"
            android:layout_height="200dp"
            android:layout_marginLeft="60dp"
            android:layout_marginTop="70dp"
        >

        </GridView>
</RelativeLayout> 
```

动物按钮.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/grid_item_image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_launcher"
    />
</LinearLayout> 
```

ImageAdapter.java

```
 public class ImageAdapter extends BaseAdapter{

    private Context context;
    private final String[] animalValues;

    public ImageAdapter(Context context, String[] animalValues) {
        this.context = context;
        this.animalValues = animalValues;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View gridView;

        if (convertView == null) {

            gridView = new View(context);

            // get layout from mobile.xml
            gridView = inflater.inflate(R.layout.animalbutton, null);

            // set image based on selected text
            ImageView imageView = (ImageView) gridView.findViewById(R.id.grid_item_image);

            String animal = animalValues[position];

            if (animal.equals("Cat")) {
                imageView.setImageResource(R.drawable.anim_cat);
            } else if (animal.equals("Cow")) {
                imageView.setImageResource(R.drawable.anim_cow);
            } else if (animal.equals("Croc")) {
                imageView.setImageResource(R.drawable.anim_croc);
            } else if(animal.equals("Duck")){
                imageView.setImageResource(R.drawable.anim_duck);
            } else if(animal.equals("Elephant")){
                imageView.setImageResource(R.drawable.anim_elephant);
            } else if(animal.equals("Giraffe")){
                imageView.setImageResource(R.drawable.anim_giraffe);
            } else if(animal.equals("Lion")){
                imageView.setImageResource(R.drawable.anim_lion);
            } else if(animal.equals("Moose")){
                imageView.setImageResource(R.drawable.anim_moose);
            } else if(animal.equals("Mouse")){
                imageView.setImageResource(R.drawable.anim_mouse);
            }else {imageView.setImageResource(R.drawable.ic_launcher);}

        } else {
            gridView = (View) convertView;
        }

        return gridView;
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return 0;
    }

    @Override
    public String getItem(int position) {
        // TODO Auto-generated method stub
        return animalValues[position];
    }

    @Override
    public long getItemId(int position) {
        // TODO Auto-generated method stub
        return 0;
    }
} 
```

选择pic.java

```
 public class choosepic extends Activity {
    /** Called when the activity is first created. */

    ImageAdapter mAdapter;
    GridView gridView;
    static final String[] animal = new String[] { 
        "Cat", "Cow","Croc", "Duck", "Elephant", "Giraffe", "Lion", "Moose", "Mouse"};

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.choosepic);

        mAdapter = new ImageAdapter(this, animal);

        gridView = (GridView) findViewById(R.id.gridView1);
        gridView.setAdapter(mAdapter);

        gridView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View v, int position, long id) {
                Toast.makeText(getApplicationContext(), mAdapter.getItem(position), Toast.LENGTH_SHORT).show();

            }
        });
    }
} 
```

我需要一些帮助。先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T08:27:12.767

我已经找到答案了。

1.  我正在使用 GridView 来显示图像。只需更改适配器即可更改内容

2.  这个问题不必回答。

3.  与答案相同。1.代码就像我之前发布的choosepic.xml。

以及为什么我``GridView`没有显示图像的问题，因为`getCount()`ImageAdapter 中的返回 0，所以 GridView 中没有显示图像。我改变`return 0;`了`return animalValues.size()`

# node.js - 如何增加 Node.js 中的最大调用堆栈大小

> ID：11332422
> 
> 赞同：61
> 
> 时间：2012-07-04T16:02:11.977
> 
> 标签：node.js, stack-overflow, callstack

这与其他关于 Node 中读取**RangeError: Maximum call stack size exceeded**的错误消息的问题不同，因为我确切地知道为什么会收到此错误消息。发生这种情况是因为我在递归，实际上递归了很多。

谢谢。

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-07-04T16:05:31.193

来自`node --help`：

```
node --max-stack-size=val 
```

更新：正如评论所指出的，即使帮助文本仍然列出了该`--max-stack-size`选项，在节点 v0.10.x 中您也需要使用它`--stack-size`。

```
node --stack-size=val 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-07-06T07:06:19.787

在节点版本 5 和 6 中，我已验证设置最大堆栈大小的选项是“--stack_size”（带下划线）：

```
$  node --v8-options
[...]
--stack_size (default size of stack region v8 is allowed to use (in kBytes))
      type: int  default: 984 
```

要增加最大堆栈大小，只需发出如下内容：

```
$ node --stack_size=1200 
```

正如其他人所指出的，请注意，增加此值可能会导致分段错误。对我来说，版本 6 的最大安全值是 1361，但版本 5 似乎更高。

纵观全局，增加堆栈大小可能无法解决所有问题。在 node 中编写递归函数时，最好的策略是以[尾递归](http://medium.com/@dai_shi/tail-call-optimization-tco-in-node-v6-e2492c9d5b7c) [方式](http://benignbemine.github.io/2015/07/19/es6-tail-calls/)编写它们，因为版本 6 支持正确的尾调用。这将消除堆栈大小溢出。

# mysql - 带有条件逻辑的Mysql选择

> ID：11332428
> 
> 赞同：0
> 
> 时间：2012-07-04T16:03:05.843
> 
> 标签：mysql, select

我需要一些帮助：（
我的描述可能看起来很奇怪，下面的示例图片:)

为了生成图表，我想根据表单生成的查询选择“天”（在此阶段，查询将仅包含“来自”和“到”国家/地区）。

我的问题是我不知道如何选择使用条件逻辑，因此它从每个具有匹配“来自”和“到”的“item_id”中选择“天”。

（另一个问题是我不知道任何好的关键字或实际上如何调用它，所以请原谅我，我只是做了一些盲目的谷歌搜索并试图在这里找到类似的问题）

![例子](../Images/6829c86d27f32c15e11ca5d2f662cd41.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:47:59.123

```
SELECT days.meta_value
FROM tableName AS from_country,
     tableName AS to_country,
     tableName AS days
WHERE from_country.item_id = to_country.item_id
  AND from_country.item_id = days.item_id
  AND from_country.field_id = 90
  AND to_country.field_id = 93
  AND days.field_id = 251 
```

如果您想按`from_country.meta_value`或类似过滤条件，您可以添加更多限制。你应该`tableName`用表的实际名称替换。

将和视为指向表中行`from_country`的三个不同指针，或者从关系中获取值的不同变量。您希望它们三个都描述同一个项目，并且还希望它们每个都引用与其名称关联的字段。这导致了上述条件。`to_country``days`

您甚至可以创建一个视图，以便像正确设计的那样访问这个设计不佳的表：

```
CREATE VIEW viewName AS
SELECT item.item_id AS item_id,
       from_country.meta_value AS from_country,
       to_country.meta_value AS to_country,
       days.meta_value AS days
FROM (SELECT DISTINCT item_id FROM tableName) AS item
     LEFT JOIN tableName AS from_country
            ON (from_country.item_id = item.item_id AND
                from_country.field_id = 90)
     LEFT JOIN tableName AS to_country
            ON (to_country.item_id = item.item_id AND
                to_country.field_id = 93)
     LEFT JOIN tableName AS days
            ON (days.item_id = item.item_id AND
                days.field_id = 251) 
```

这将创建一个包含四列的视图，您可以从中简单地选择：

```
SELECT days FROM viewName WHERE from_country LIKE 'A%' 
```

或任何你想选择的。请注意，由于左连接，某些项目的缺失值将导致`NULL`值。这与上面的查询形成对比，上面的查询将省略任何没有指定所有三个值的项目。使用更适合您的情况的任何东西。

# c# - 如何获取应用程序的 AppData VirtualStore 路径？

> ID：11332431
> 
> 赞同：6
> 
> 时间：2012-07-04T16:03:28.380
> 
> 标签：c#, .net, windows-7

我想获取应用程序的路径`VirtualStore`。

例如，我需要的文件在这个目录中（我从注册表中获取这个路径）

> C:\Program Files (x86)\Example App\data.ini

我怎样才能得到这条路？

> C:\Users\User388\AppData\Local\VirtualStore\Program Files (x86)\Example App\data.ini

**更新：**

这不是我的应用程序中的路径。

我问当只知道程序文件中的winodows用户名和路径时，如何获取应用程序数据中的路径

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:14:26.427

假设这`Example App`是运行代码的应用程序，第一个目录是使用检索的

```
string strFilePath = Path.Combine(Application.ExecutablePath, "Data.ini"); 
```

第二个乍一看并不像一个固定的位置，但是为此您可以尝试使用[`Application`](http://msdn.microsoft.com/en-us/library/system.windows.forms.application.aspx)和[`Environment`](http://msdn.microsoft.com/en-us/library/system.environment.aspx)类。尝试类似的东西

```
string strFilePath = Path.Combine(Application.UserAppDataPath, "Data.ini"); 
```

我希望这有帮助。

*编辑：请参阅此链接[https://stackoverflow.com/a/3916868/626442](https://stackoverflow.com/a/3916868/626442)以获得您的答案。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-11T08:47:05.693

过去，一些应用程序在当前的安全状态下，在不建议的地方读写ini配置文件，微软的windows操作系统（os）非常高兴。在 Windows 7、8 和 10 中，操作系统保护这些文件夹，将新版本存储在用户配置文件 VirtualStore 下。

下面的 C# 和 VB.net 代码检查文件是否存在于 VirtualStore 路径中（即“C:\Users\\AppData\Local\VirtualStore\Program Files (x86)\Example App”）以及它是否不存在，在原来的地方检查（“C:\Program Files (x86)\Example App”）。CheckFile() 将返回文件的完整文件路径。

> FullFilePath = CheckFile("C:\Program Files (x86)\Example App", "data.ini"));

它也适用于您的遗留代码可能会尝试弄乱的其他文件夹（如“C:\Windows”）。

下面是 C# 代码：

```
public void Main()
{
    string Path = "";
    string File = "data.ini";
    string FullFilePath = "";

    // we can get
    Path = System.Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData);
    //Path = "C:\Program Files (x86)\Example App"
    FullFilePath = CheckFile(Path, File);

    Interaction.MsgBox("FullFilePath: " + FullFilePath, MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "Example Debug");
}

/// <summary>
/// CheckFile() - Check the String with Path and Filename. Make sure path is padded to the right with a \
/// </summary>
/// <param name="FilePath">Path of the file</param>
/// <param name="FileName">File name</param>
/// <returns>String with Path and Filename</returns>
/// <remarks>
/// Support the file search in user VirtualStore first and original path later.
/// </remarks>
public string CheckFile(string FilePath, string FileName)
{
    string OriginalPath = "";
    string VirtualStorePath = "";

    // Make sure path is padded to the right with a \
    if (FilePath.EndsWith("\\")) {
        OriginalPath = FilePath;
    } else {
        OriginalPath = FilePath + "\\";
    }

    VirtualStorePath = System.Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData) + "\\VirtualStore\\" + OriginalPath.Substring(3);
    //MsgBox("VirtualStorePath: " & VirtualStorePath & vbNewLine & "OriginalPath: " & OriginalPath,
    //       MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "AIMS Debug")

    // return first VirtualStorePath if the file exists in user VirtualStore
    if (IO.File.Exists(VirtualStorePath + FileName)) {
        FilePath = VirtualStorePath;
        return VirtualStorePath + FileName;
    }
    if (IO.File.Exists(OriginalPath + FileName)) {
        return OriginalPath + FileName;
    } else {
        Interaction.MsgBox("No file in CheckFile(FilePath: " + FilePath + Constants.vbNewLine + "FileName: " + FileName + ")", MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "Example Debug");
        // we don't have this file
        return OriginalPath + FileName;
    }
} 
```

下面是 VB.net 代码：

```
Sub Main()
        Dim Path As String = ""
        Dim File As String = "data.ini"
        Dim FullFilePath As String = ""

        ' we can get
        Path = System.Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData)
        'Path = "C:\Program Files (x86)\Example App"
        FullFilePath = CheckFile(Path, File)

        MsgBox("FullFilePath: " & FullFilePath, MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "Example Debug")
    End Sub

    ''' <summary>
    ''' CheckFile() - Check the String with Path and Filename. Make sure path is padded to the right with a \
    ''' </summary>
    ''' <param name="FilePath">Path of the file</param>
    ''' <param name="FileName">File name</param>
    ''' <returns>String with Path and Filename</returns>
    ''' <remarks>
    ''' Support the file search in user VirtualStore first and original path later.
    ''' </remarks>
    Function CheckFile(ByVal FilePath As String, ByVal FileName As String) As String
        Dim OriginalPath As String = ""
        Dim VirtualStorePath As String = ""

        ' Make sure path is padded to the right with a \
        If FilePath.EndsWith("\") Then
            OriginalPath = FilePath
        Else
            OriginalPath = FilePath & "\"
        End If

        VirtualStorePath = System.Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData) & "\VirtualStore\" & OriginalPath.Substring(3)
        'MsgBox("VirtualStorePath: " & VirtualStorePath & vbNewLine & "OriginalPath: " & OriginalPath,
        '       MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "AIMS Debug")

        ' return first VirtualStorePath if the file exists in user VirtualStore
        If IO.File.Exists(VirtualStorePath & FileName) Then
            FilePath = VirtualStorePath
            Return VirtualStorePath & FileName
        End If
        If IO.File.Exists(OriginalPath & FileName) Then
            Return OriginalPath & FileName
        Else
            MsgBox("No file in CheckFile(FilePath: " & FilePath & vbNewLine & "FileName: " & FileName & ")",
                   MsgBoxStyle.Information + MsgBoxStyle.OkOnly, "Example Debug")
            ' we don't have this file
            Return OriginalPath & FileName
        End If
    End Function 
```

# c#-4.0 - 实体框架 4.1 和现有数据库

> ID：11332436
> 
> 赞同：0
> 
> 时间：2012-07-04T16:03:45.413
> 
> 标签：c#-4.0, entity-framework-4.1, ef-code-first

嗨，我有一个现有数据库，其中包含一个包含 30 个字段的表，我想将表拆分为多个模型，以便我可以检索/保存我需要的字段，而不是每次都从数据库中检索/保存整个对象。使用 c#。

我想我应该使用 Code-First。有人可以提供示例或教程链接吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:15:34.880

您无需拆分表即可加载字段子集或保留字段子集。这两种操作也适用于映射到单个实体的整个表。

对于选择，您只需使用投影：

```
var data = from x in context.HugeEntities
           select new { x.Id, x.Name }; 
```

您可以在投影中使用匿名类型或任何非映射类。

对于更新，您可以简单地使用：

```
var data = new HugeEntity { Id = existingId, Name = newName };
context.HugeEntities.Attach(data);
var dataEntry = context.Entry(data);
dataEntry.Property(d => d.Name).IsModified = true; // Only this property will be updated
context.SaveChanges(); 
```

或者：

```
var data = new HugeEntity { Id = existingId };
context.HugeEntities.Attach(data);
data.Name = newName; 
context.SaveChanges(); // Now EF detected change of Name property and updated it 
```

将多个实体映射到单个表必须遵循非常严格的规则，并且只有在表拆分时所有实体都必须与一对一关系相关（并且首先在代码中每个拆分表有两个以上实体存在一些问题）或使用按层次结构的表继承。我认为您不想在这种情况下使用它们中的任何一个。

# mysql - 如何在面向对象的 Coldfusion 设置中参数化动态数量的表单字段？

> ID：11332442
> 
> 赞同：2
> 
> 时间：2012-07-04T16:04:01.293
> 
> 标签：mysql, oop, dynamic, coldfusion, parameters

我用[这个](http://www.bennadel.com/blog/1557-Object-Oriented-Form-Helpers-And-Reusing-Form-Validation-On-The-Client.htm)例子建立了一个小型的面向对象项目

我正在重做的页面有一些带有动态输入字段数量的订单功能（比如文章的大小，一些大小 S-XL，一些大小 S-5XL。

在动态标记的 Coldfusion 字段中，如下所示：

```
<input type="button" name="qty#counter#" id="qty-field#counter#" 
```

在我的 CFC 中，我列出了所有表单字段，如下所示：

```
<cfcomponent output="false" hint="">
   <cfscript>
     VARIABLES.Instance.Validation = {
         field_a="validation_criteria",
         field_b="validation_criteria",
         ...
         }
   </cfscript>
   <cffunction name="Defaults" access="public" returntype="struct" output="false" hint="">
      <cfscript>
      // form defaults
      var formDefaults = {
         field_a="", 
         field_b="",
     ...
         }
     </cfscript>
  <cfreturn formDefaults />     
</cffunction>

<cffunction name="Commit" ... do something with db

  <cfscript>                
var LOCAL = {};
    structAppend(defaultValues, VARIABLES.Instance.FormData);
    LOCAL.xxx = defaultValues;
  </cfscript>

  ... do stuff with LOCAL 
```

所以我正在创建一个包含所有传递的表单字段的对象，并在 CFC 中做我的事情。有点像非面向对象页面中的 cfparam。

**我的问题**：
如果我在一个页面上有 200 个输入（简单...），我不可能将它们分别设置为 1-200 或将我的默认值扩展 200 个输入。所以，我的问题：有没有比添加虚拟字段 1-500 更简单的方法来“参数化”表单字段的动态数量，并希望这对所有情况都足够了（这是最糟糕的选择......）

**并且**：如果我想将它移植到 MySQL 中......在 Coldfusion 中，我有一个类似的查询：

```
<cfoutput query="s">
    <cfquery datasource="db">
    UPDATE pos
    SET qty = "#evaluate("qty#id#")#"
    WHERE id = "#client_id#" and id = "#id#"
    </cfquery>
</cfoutput> 
```

除了在 Coldfusion 中循环并调用 storedProc i 次之外，还有其他选择吗？

感谢您的输入！

**编辑：**
所以我目前的解决方案如下所示：

```
 , ean1="", ean2="", ean3="", ean4="", ean5="", ean6="", ean7="", ean8="", ean9="", ean10=""
, ean11="", ean12="", ean13="", ean14="", ean15="", ean16="", ean17="", ean18="", ean19="", ean20=""
, ean21="", ean22="", ean23="", ean24="", ean25="", ean26="", ean27="", ean28="", ean29="", ean30="" 
, ean31="", ean32="", ean33="", ean34="", ean35="", ean36="", ean37="", ean38="", ean39="", ean40="" 
, ean41="", ean42="", ean43="", ean44="", ean45="", ean46="", ean47="", ean48="", ean49="", ean50="" 
, ean51="", ean52="", ean53="", ean54="", ean55="", ean56="", ean57="", ean58="", ean59="", ean60="" 
, ean61="", ean62="", ean63="", ean64="", ean65="", ean66="", ean67="", ean68="", ean69="", ean70="" 
, ean71="", ean72="", ean73="", ean74="", ean75="", ean76="", ean77="", ean78="", ean79="", ean80="" 
, ean81="", ean82="", ean83="", ean84="", ean85="", ean86="", ean87="", ean88="", ean89="", ean90="" 
, ean91="", ean92="", ean93="", ean94="", ean95="", ean96="", ean97="", ean98="", ean99="", ean100=""

// more
, menge1="", menge2="", menge3="", menge4="", menge5="", menge6="", menge7="", menge8="", menge9="", menge10=""
, menge11="", menge12="", menge13="", menge14="", menge15="", menge16="", menge17="", menge18="", menge19="", menge20=""
, menge21="", menge22="", menge23="", menge24="", menge25="", menge26="", menge27="", menge28="", menge29="", menge30="" 
, menge31="", menge32="", menge33="", menge34="", menge35="", menge36="", menge37="", menge38="", menge39="", menge40="" 
, menge41="", menge42="", menge43="", menge44="", menge45="", menge46="", menge47="", menge48="", menge49="", menge50="" 
, menge51="", menge52="", menge53="", menge54="", menge55="", menge56="", menge57="", menge58="", menge59="", menge60="" 
, menge61="", menge62="", menge63="", menge64="", menge65="", menge66="", menge67="", menge68="", menge69="", menge70="" 
, menge71="", menge72="", menge73="", menge74="", menge75="", menge76="", menge77="", menge78="", menge79="", menge80="" 
, menge81="", menge82="", menge83="", menge84="", menge85="", menge86="", menge87="", menge88="", menge89="", menge90="" 
, menge91="", menge92="", menge93="", menge94="", menge95="", menge96="", menge97="", menge98="", menge99="", menge100=""
}; 
```

因此，在我的动态表单吐出 100 多个字段之前，我很不高兴但很安全……如果有人知道设置“参数”/空变量的代码密集程度低于上述方法，请加入。谢谢！

```
 , 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T19:29:11.013

在循环中执行 cfparam 有什么问题？

```
<cfset numOfFields = 200>
<cfset fields = "ean,menge">
<cfloop list="#fields#" index="field">
    <cfloop from="1" to="#numOfFields#" index="i">
        <cfparam name="Form.#field##i#" default="">
    </cfloop>
</cfloop> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T13:38:01.227

遍历表单范围并解析字段名以查找相关输入。

这是一个示例表单，用于生成具有随机值的随机输入数：

```
<form name="dynamicForm" action="update.cfm" method="post">
<cfoutput>      
<cfloop from="1" to="#randrange(1,100)#" index="i">
        <br>#i#:<input type="text" name="qty#i#" value="#randrange(1,100)#">    
    </cfloop>
    <br><input type="submit" name="submit" value="submit">
</cfoutput> 
</form> 
```

然后，在 update.cfm 中，执行以下操作：

```
<cfloop list="#form.fieldnames#" index="fieldname">
    <cfif lcase(left(fieldname,3)) EQ "qty">
        <cfset id = mid(fieldname,4,len(fieldname)) >
        <cfstoredproc 
             procedure="schema.updQTY"
             datasource="myDSN">
             <cfprocparam type="IN" cfsqltype="CF_SQL_INTEGER" value="#id#">
             <cfprocparam type="IN" cfsqltype="CF_SQL_INTEGER" value="#form[fieldname]#">
        </cfstoredproc>
    </cfif>
</cfloop> 
```

就个人而言，我会将输入字段命名为更像“qty_XXX”的名称，并使用`listfirst`and`listlast`来解析字段名，但这是纯粹的偏好。

# php - 在命名空间 Simplexml 中读取节点

> ID：11332443
> 
> 赞同：0
> 
> 时间：2012-07-04T16:04:02.060
> 
> 标签：php, namespaces, simplexml, xml-namespaces

我有以下 xml 代码：

文件 1.xml

```
<?xml version="1.0" encoding="utf-8"?>
 <DataSet xmlns="">
  <diffgr:diffgram xmlns:msdata="urn:schemas-microsoft-com:xml-msdata" xmlns:diffgr="urn:schemas-microsoft-com:xml-diffgram-v1">
   <dsAanbod>
    <Pand diffgr:id="Pand1" msdata:rowOrder="0" diffgr:hasChanges="inserted">
      <PandID>231384</PandID>
    </Pand>
   </dsAanbod>
 </diffgr:diffgram>
</DataSet> 
```

我如何读取之间的数据

我有以下php代码

```
<?php 

    $xml_url = "1.xml";
    $xml = simplexml_load_file($xml_url);

    foreach ($xml as $entry){

       //Use that namespace
       $namespaces = $entry->getNameSpaces(true);
       //Now we don't have the URL hard-coded
       $diffgr = $entry->children($namespaces['diffgr']); 
       echo $diffgr->diffgram->dsAanbod->Pand->PandID;
}

?> 
```

但这不起作用。

有人可以帮助我访问一个节点，它是命名空间元素的子节点。

亲切的问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:49:15.300

哦，从哪里开始。此工作代码可能说明了一些问题：

```
<?php
    $xml_url = "1.xml";
    $xml = simplexml_load_file($xml_url);
    foreach($xml->children('diffgr',true) as $diffgr){
            $weirdemptynamespace = $diffgr->children('',true);
            echo $weirdemptynamespace->dsAanbod->Pand->PandID;
   } 
```

举几个问题：

1.  `xmlns=""`与没有命名空间不同，而且，在我看来，只是......好吧，很奇怪。
2.  你`foreach`是不成熟的（`children('diffgr')`应该在根元素（`Dataset`）上调用。
3.  如果您只对命名空间前缀感兴趣，只需将第二个参数设置`children()`为`true`。

# playframework - 从 Play 框架 YAML 中的文件加载数据

> ID：11332447
> 
> 赞同：0
> 
> 时间：2012-07-04T16:04:32.547
> 
> 标签：playframework, yaml, load-data-infile

当 play 将进化应用于数据库时，我想将存储在文件中的一些数据加载到我的 mysql 数据库中。
基本上当play运行1.sql来升级数据库时，我想运行“LOAD DATA INFILE”或等效的。

yaml 中是否存在 LOAD DATA INFILE 的等价物？

如果是，我怎么能实现类似的东西
`LOAD DATA INFILE "/path/to/myfile" INTO TABLE myTable FIELDS TERMINATED BY '|' LINES TERMINATED BY '\n';`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T07:24:53.203

这`LOAD DATA INFILE`是[MySQL 特定](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)的。您必须使用此 MySQL 命令使用的语法。

AFAIK，您可以使用此 MySQL 语句从 Evolution 的 SQL 文件中加载数据。棘手的部分是正确定位您的数据文件，因为当您使用该`play dist`命令时，进化文件存储在您的应用程序 jar 中（即在您的类路径中）。因此，当您要在生产中部署时必须小心，并将数据文件添加到生成的 zip 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T10:04:49.087

我找到了解决这个问题的方法，

在 global.java 中，当应用程序重新启动时，我检查表是否为空，
`if(Ebean.find(MyClass.class).findRowCount() == 0)`
然后使用 FileInputStream 以经典方式读取文件，使用 java string split() 函数拆分行并使用 save 更新 mysql 表() 我的模型的功能

# solr - 查找或配置 Solr 主目录

> ID：11332448
> 
> 赞同：7
> 
> 时间：2012-07-04T16:04:32.793
> 
> 标签：solr

我正在按照本教程设置 django-haystack 和 solr：[http ://django-haystack.readthedocs.org/en/latest/tutorial.html](http://django-haystack.readthedocs.org/en/latest/tutorial.html)

我在这里遇到了一个绊脚石：

> 如果您使用的是 Solr 后端，那么您还有一个额外的步骤。Solr 的配置是基于 XML 的，因此您需要手动重新生成模式。您应该首先运行 ./manage.py build_solr_schema，**将 XML 输出放到 Solr 的 schema.xml 文件中**，然后重新启动 Solr 服务器。

我的 schema.xml 文件在哪里？它说它应该在 Solr 主目录和 .conf 文件夹中。但是 Solr 主目录在哪里，和/或如何配置它的位置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:34:45.680

solr home 是您可以找到您的[`schema.xml`](http://wiki.apache.org/solr/SchemaXml)and[`solrconfig.xml`](http://wiki.apache.org/solr/SolrConfigXml)以及其他一些文件的地方，具体取决于您使用的文本分析（用于词干、停用词等的字典），以及默认创建索引的位置。

有几种方法可以配置 solr home，因为它位于 servlet 容器之外：

*   solr.solr.home java系统属性（最常用的一个）
*   java:comp/env/solr/home 用于 JNDI 查找

您可以检查您的 servlet 容器配置或转到 Solr 管理页面`http://host:port/solr/admin`，该页面会打印出实际的 solr 主位置以及有关正在运行的 solr 实例的其他信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-11-20T05:55:08.543

首先检查您的 Solr 实例是否正常工作。去 -> [http://localhost:8983/solr](http://localhost:8983/solr)

如果您可以看到 Solr Web 面板，则您有一个实时 Solr 实例。现在转到**Java 属性** [![Solr Java 属性链接](../Images/464abcb0f4b30af891b064d859382b1f.png)](https://i.stack.imgur.com/ZMP30.png)

在这里，您将看到变量。这是您可以找到家庭 DIR 的地方 [![在此处输入图像描述](../Images/ece0b9e7070fcfb34674a4c1dbbb6b0a.png)](https://i.stack.imgur.com/rqh87.png)

现在管理笔记模式。如果你想覆盖它，你将不得不修改它。[在这里](https://stackoverflow.com/a/43713143/1998725)检查

# java - 在客户端和服务器之间传递 json 数据

> ID：11332452
> 
> 赞同：0
> 
> 时间：2012-07-04T16:05:12.043
> 
> 标签：java, json, web-services, spring, web-applications

我需要实现 Web 服务，将 json 发送到服务器并读取响应。所有请求都发送到服务[https://api.polldaddy.com/](https://api.polldaddy.com/) 这将在 Web 应用程序中进行。这是我必须实现的 api：

[http://support.polldaddy.com/api/](http://support.polldaddy.com/api/)

看起来很简单，只需向服务器发送一些 json 并使用发回的 json 响应。执行这项任务似乎有很多选择，从哪里开始有点令人生畏？

那么，学习如何实现此服务的最佳起点是哪里，即：将 json 发送到服务器并使用响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:14:49.360

如果没有已经编写的 JAVA API，我会使用 JAX-RS 方法和客户端框架，如 jersey 客户端。查看[http://jersey.java.net/nonav/documentation/latest/client-api.html](http://jersey.java.net/nonav/documentation/latest/client-api.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:16:33.303

首先，您使用了错误的术语。“实现 web 服务”意味着你将创建一个服务，听起来你只是想调用一个 web 服务。如果您需要将其作为商务诉求，您可以说“利用 Web 服务”。

更难的方式。如果您无法添加任何其他库，请使用 java.net.HttpURLConnection。

更简单的方法。如果您可以添加库，请使用 Jersey 客户端 API。[http://jersey.java.net/nonav/documentation/latest/user-guide.html#client-api](http://jersey.java.net/nonav/documentation/latest/user-guide.html#client-api)

Java EE 7 将包含官方客户端 API，EE 6 仅包含 REST 服务器端 API。

但是您自己应该更喜欢 XML 内容而不是 JSON 内容。JSON 很棒，因为它很容易被 JavaScript 解析。Java 解析 XML 的方法比解析 JSON 的方法多。如果你真的想使用 JSON，你可以看看[http://jettison.codehaus.org/](http://jettison.codehaus.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:11:25.490

由于您正在创建一个需要进行 HTTP 请求处理的 Web 应用程序......从 Tomcat 或 Jetty 和 Apache HTTP 客户端开始，并使用 JSON 库，例如 json.org 提供的。

如果您熟悉 maven，您可以在 10 分钟内完成所有这些并构建。否则，您必须自己构建 webapp 并处理依赖项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-20T13:17:24.260

如果您使用的是 Java EE 7 并且想要使用包含的 JAX-RS 2.0 API，请查看[https://github.com/tobiasdenzler/jee7-rest-crud](https://github.com/tobiasdenzler/jee7-rest-crud)。它是一个使用 JSON 的简单 CRUD 项目。

# sql - 避免全表扫描

> ID：11332455
> 
> 赞同：0
> 
> 时间：2012-07-04T16:05:16.287
> 
> 标签：sql

我有一个要调整的 SQL 选择查询。在查询中有一个 View in from 子句，它是通过 4 个表形成的。执行此查询时，会在所有这 4 个表上进行全表扫描，这会导致 CPU 峰值。这四个表都有建立在它们上面的有效索引。

查询类似于以下内容：

```
SELECT DISTINCT ID, TITLE,...... 
FROM FINDSCHEDULEDTESTCASE 
WHERE STEP_PASS_INDEX = 1  AND LOWER(COMPAREANAME) ='abc'   ORDER BY ID; 
```

圆点表示还有更多列。这里 FINDSCHEDULEDTESTCASE 是四个表的视图。

有人可以指导我如何避免对这四个表进行全表扫描。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:32:27.327

在任何情况下使用你的条件

```
AND LOWER(COMPAREANAME) ='abc' 
```

您将对 COMPAREANAME 值进行全面扫描，因为必须计算每个值函数 LOWER。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:38:59.957

这取决于很多事情！

```
SELECT DISTINCTG ID, TITLE, ...... 
```

根据您选择的列数，SQL Server 可能决定执行表扫描而不是使用您的索引。

此外，根据您的“WHERE”条件，SQL Server 还可以决定执行表扫描而不是使用您的索引。

您使用的是哪个版本的 SQL Server？

有一些方法可以改进表上的索引，例如，如果“WHERE”中的条件代表少于 50% 的行，并且您使用的是 SQL 2008。（使用过滤索引[http:// msdn.microsoft.com/en-us/library/ms188783.aspx](http://msdn.microsoft.com/en-us/library/ms188783.aspx)）

或者您可以在视图上创建索引 ( [http://msdn.microsoft.com/en-us/library/ms191432.aspx](http://msdn.microsoft.com/en-us/library/ms191432.aspx) )

您的问题中确实没有足够的细节来真正帮助您。

# php - 第一次使用 PDO 遇到问题

> ID：11332458
> 
> 赞同：6
> 
> 时间：2012-07-04T16:05:26.997
> 
> 标签：php, mysql, pdo

我正在尝试开始使用 PDO，但遇到了一些麻烦。这是我的原始代码：

```
 $query = "
              UPDATE `products` 
              SET `product_qty` = '{$_GET['product_qty']}'
              WHERE `product_id` = '{$_GET['product_id']}'
    ";

    mysql_query($query) or die(mysql_error()); 
```

这很好用，但是当我尝试将其转换为 PDO 语法时：

```
 $db->prepare('
    UPDATE products 
    SET product_qty = :product_qty
    WHERE product_id = :product_id
    ');

    try 
    {
        $db->execute(array(':product_qty' => $_GET['product_qty'], ':product_id' => $_GET['product_id']));
    }
    catch (PDOException $e) 
    {
        print "Error!: " . $e->getMessage() . "<br/>";
        die();
    } 
```

我得到错误：

> 致命错误：调用未定义的方法 PDO::execute() in ...

有人可以帮我完成我的第一个 PDO 查询吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T16:07:16.537

`$db->prepare()`返回`PDOStatement`具有该`execute()`方法的a。

```
$stmt = $db->prepare('UPDATE products 
    SET product_qty = :product_qty
    WHERE product_id = :product_id');

$stmt->execute(array(
    ':product_qty' => $_GET['product_qty'], 
    ':product_id' => $_GET['product_id']
)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T16:07:15.943

`$db->prepare()`返回一个`PDOStatement`对象。您需要调用`execute()`它，而不是调用`$db`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:08:54.180

我向你推荐这个例子......准备创建一个语句，它就是你运行execute（）......

```
<?php
/* Execute a prepared statement by passing an array of insert values */
$calories = 150;
$colour = 'red';
$sth = $dbh->prepare('SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour');
$sth->execute(array(':calories' => $calories, ':colour' => $colour));
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T16:09:34.710

调用`prepare`返回 a `PDOStatement`，这就是您需要的`execute`。尝试以下操作：

```
$sth = $db->prepare('
  UPDATE products 
  SET product_qty = :product_qty
  WHERE product_id = :product_id
');

$sth->execute(array(':product_qty' => $_GET['product_qty'], ':product_id' => $_GET['product_id'])); 
```

# sql - 最有效的检索 sql

> ID：11332462
> 
> 赞同：5
> 
> 时间：2012-07-04T16:05:42.410
> 
> 标签：sql

我有这张桌子

```
 ----------------
|   X    |   Y   |
 ----------------
|   a    |   1   |
|   c    |   6   |
|   e    |   3   |
|   d    |   6   |
|   c    |   4   |
|   b    |   1   |
|   a    |   5   |
|   g    |   1   |
 ---------------- 
```

当我得到一个数组 [c,d] 时，我需要在上表中找到“6”。即对于每组元素，我需要找到集合中所有元素共享的 Y 值，但前提是没有其他元素（即不在给定数组中的元素）共享该值。数组中的元素数量没有理论上的限制。

更多示例：对于 [a,b,c] 我什么都不需要。对于 [a,b] 我也不需要找到任何东西（因为 g 也有一个 Y = 1 的条目，所以对于 [a,b,g] 我确实需要找到“1”）。

我当然可以遍历数组，逐个查询，但这似乎是一种效率低下的方式。在 SQL 中执行此操作的最佳方法是什么？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:25:06.660

这些类型的查询在大型数据集和/或 Y 中的许多值共享 X 中的相同值的情况下*永远不会特别高效。*

也就是说，这是我正常做法的简单版本......

```
CREATE TEMPORARY TABLE params (
  item VARCHAR(16)
)
INSERT INTO params SELECT 'a'
INSERT INTO params SELECT 'b'
INSERT INTO params SELECT 'g'

SELECT
  yourTable.Y
FROM
  yourTable
LEFT JOIN
  params
    ON yourTable.X = params.item
GROUP BY
  yourTable.Y
HAVING
  COUNT(DISTINCT yourTable.X) = COUNT(DISTINCT params.item) 
```

另一个不需要参数表的选项，虽然我不认为它更高效......

```
SELECT
  y
FROM
  yourTable
GROUP BY
  y
HAVING
  COUNT(DISTINCT x) = COUNT(DISTINCT CASE WHEN x IN ('a', 'b', 'g') THEN x ELSE NULL END) 
```

这没有连接，但是以进行全表扫描为代价。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:30:46.963

这是一种将“查询”值放在单独的表中的方法。

```
create table t ( x varchar(1), y int);

insert into t (x, y) values ('a', 1);
insert into t (x, y) values ('c', 6);
insert into t (x, y) values ('e', 3);
insert into t (x, y) values ('d', 6);
insert into t (x, y) values ('c', 4);
insert into t (x, y) values ('b', 1);
insert into t (x, y) values ('a', 5);
insert into t (x, y) values ('g', 1);

create table q ( x varchar(1) );

insert into q (x) values ('a');
insert into q (x) values ('b');

select a.y from
(
   select t.y
     from t join q on (t.x = q.x)
   group by t.y
   having count(*) = (select count(*) from q)
) a 
join t on (a.y = t.y) 
group by a.y
having count(*) = (select count(*) from q) 
```

[这是一个示例 SQLFiddle](http://sqlfiddle.com/#!2/d4c8c/1)。

这假设您不能有重复的组合。

如果您想在没有第二个表的情况下执行此操作，您可以将 in 替换为`select count(*)`您在 IN 列表中匹配的值的数量，而不是在内部子查询上执行连接，而是使用 where 子句。

```
select a.y from
(
select t.y
from t
  where t.x in ('c', 'd')
group by t.y
having count(*) = 2
) a 
join t on (a.y = t.y) 
group by a.y
having count(*) = 2 
```

# jquery - 如何从 Python 返回值作为 JSON？

> ID：11332465
> 
> 赞同：11
> 
> 时间：2012-07-04T16:06:03.283
> 
> 标签：jquery, python, ajax, json

我从如下所示的 jQuery 文件发送 ajax 请求，该文件需要 JSON 响应。

```
jQuery.ajax({
    url: '/Control/getImageDetails?file_id='+currentId,
    type: 'GET',
    contentType: 'application/json',
    success: function (data){
        alert(data);
    }
 });
}); 
```

在 Python 上，我发送了对 Ajax 请求的响应，如下所示：

```
 record = meta.Session.query(model.BannerImg).get(fid)
 return_info = [record.file_id, record.filename, record.links_to]
 return result_info 
```

这会以纯文本形式返回参数，使其无法读取为不同的值。我相信从 python 发送响应作为 JSON 可以解决这个问题。我以前用过 JSON。如何以 JSON 格式返回响应？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-04T17:41:48.720

`return json.dumps(return_info)`

主要问题是

```
return_info = [record.file_id, record.filename, record.links_to] 
```

因为 JSON 格式一般像

例子：

```
json.dumps({'file_id': record.file_id, 'filename': record.filename , 'links_to' : record.links_to}) 
```

并且您将收到的消息是`[object Object]`如果您使用`alert(data)`

因此`alert(data.file_id);`，如果您使用示例，请使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T16:08:53.787

使用模块中的函数对其进行编码[`json`](http://docs.python.org/library/json.html)。

# php - 如何使用 php Zend 框架配置 MySQL 数据？

> ID：11332468
> 
> 赞同：1
> 
> 时间：2012-07-04T16:06:12.570
> 
> 标签：php, mysql, zend-framework

我正在使用核心 php 至少一年。现在我想使用一个框架，我决定使用 Zend Framework。但是我无法使用 Zend Framework 配置/使用 MySQL 数据库。

任何人都可以告诉我如何做到这一点，或者提供一个链接或教程，我可以自己做。

谢谢埃纳穆尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:04:06.333

我刚刚提供了可能有助于您入门的类似问题的答案。Zend_Db 组件在开始时可能会令人困惑，因为使用它有很多选择。事实上，至少有 3 种不同的方式可以连接到数据库。

[如何使用 Zend Adapter 从数据库中检索信息](https://stackoverflow.com/questions/11336018/how-to-use-zend-adapter-to-retrieve-information-from-database/11357335#11357335)

# php - 限制每秒总 Web 脚本访问：好主意还是不好？如何实施？

> ID：11332473
> 
> 赞同：1
> 
> 时间：2012-07-04T16:06:41.343
> 
> 标签：php

我想知道如何在全球范围内限制每秒访问次数 - 对于所有 IP，而不是每个 IP - 以防止僵尸网络或类似网络破解密码。这将有效地将密码破解攻击转变为 DDOS 攻击。

请注意，此脚本的预期流量非常低（每天 1 次访问）。

例如

```
//pseudocode...
while (now() - last_access < 1 second)
    sleep(0.3 seconds)

last_access = now() 
```

两个问题

1.  这是一个好主意吗？
2.  如何在 PHP 中做到这一点？（因为我无法控制 apache 配置）

**编辑：** 如果 n 用户试图一次访问该站点，我很高兴每个用户等待 n 秒。他们只需要每人加载一页。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:12:27.987

嗯，首先，你需要弄清楚你的门槛。什么算作更高的负载，什么算作 DDOS 攻击？

其次，您需要将 last_access 变量保存在更永久的位置，例如数据库。

但是，是的，您正在寻找的东西是可能的，如果您的网站经常受到攻击，建议您使用。

而不是 sleep （这在攻击的情况下是无用的），只需显示一个通用的

```
<h1>The server is currently experiencing extreme load. Please try again later</h1> 
```

您的阈值应该更像是最后几秒钟内的 5 个用户（在这种情况下，您需要记录过去几秒钟内的所有访问，并自己计算。

* * *

更好的方法是强制用户注册，并在注册时使用验证码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:15:13.960

如果您绝对确定该站点每天仅合法访问一次，您当然可以这样做。

您可以使用 PHP 写入一个 txt 文件并将最后一次访问存储在那里 - 也就是说，如果您无权访问数据库或其他一些存储该信息的方式。

正如您自己提到的，这可能会导致您的站点永久关闭，因为即使是非常小的攻击（每秒 3-4 次点击几乎不能称为 DOS 攻击）也足以将您锁定在外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:12:51.137

有更好的方法来防止机器人。首先，强迫用户不能快速使用您的网站并不是一个好主意。相反，使用相同的方法，您可以测试以查看 IP 尝试登录以来的时间。例如，如果它不到 1 秒，甚至不处理输入，只输出“慢下来！”。更好的方法是使用类似于 captha 的方法，例如简单的数学问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T10:23:39.563

想想看。

这基本上是一个“How-to-DDoS-Myself”的解释。

如果您设置了限制并从那时起阻止访问，那么您只是在使您自己的站点崩溃——这无论如何都是 DDoS 攻击的最终目标。此外，设置这样的人为限制会比任何 DDoS 更快地使您的网站崩溃（因为脚本需要在达到真正的“硬限制”之前激活）。

DDoS 缓解解决了一个问题：“如何在 DDoS 攻击期间保持正常运行？” 关闭自己不是答案。

这就像用氰化物治疗头痛一样——它会“从技术上”奏效，但我不会称它为治愈方法。

# ruby-on-rails - 查询匹配多个属性的嵌入文档

> ID：11332474
> 
> 赞同：1
> 
> 时间：2012-07-04T16:06:54.317
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我有以下结构：

```
class User
  include Mongoid::Document
end

class Resource
  include Mongoid::Document
  embeds_many :permissions
end

class Permission
  include Mongoid::Document
  embedded_in :resource

  field :read, type: Boolean
  field :write, type: Boolean

  field :user_id, type: BSON::ObjectId
end 
```

现在假设我有以下数据：

```
1.9.3p194 :001 > a = User.create
 => #<User _id: 4ff46818f83222daf9000001, _type: nil> 
1.9.3p194 :002 > b = User.create
 => #<User _id: 4ff4681bf83222daf9000002, _type: nil> 
1.9.3p194 :003 > r = Resource.create
 => #<Resource _id: 4ff46822f83222daf9000003, _type: nil> 
1.9.3p194 :004 > r.permissions.create(read: true, user_id: a.id)
 => #<Permission _id: 4ff46835f83222daf9000004, _type: nil, read: true, write: nil, user_id: 4ff46818f83222daf9000001> 
1.9.3p194 :005 > r.permissions.create(read: true, write: true, user_id: b.id)
 => #<Permission _id: 4ff4684af83222daf9000005, _type: nil, read: true, write: true, user_id: 4ff4681bf83222daf9000002> 
```

现在我想查找用户 A 具有写入权限的所有资源（应该没有）

```
1.9.3p194 :007 > Resource.where('permissions.write' => true).where('permissions.user_id' => a.id).all.entries
 => [#<Resource _id: 4ff46822f83222daf9000003, _type: nil>] 
```

这显然失败了，因为每个`where`子句都有一个匹配项。什么是正确的解决方案？有没有办法`and`进行嵌入式文档查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:23:50.663

尝试这个

```
Resource.where(:permissions.matches => {:write => true, :user_id => a.id}).all 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-04T18:12:26.950

试试这个：

Resource.Permission.where(write: true,user_id: a.id)

# asp.net-mvc - 使用 ef/codefirst 和 sql server 将 mvc2 迁移到 mvc4 到内存数据库

> ID：11332481
> 
> 赞同：0
> 
> 时间：2012-07-04T16:07:32.613
> 
> 标签：asp.net-mvc, in-memory-database

我的 ASP.NET mvc2 Web 应用程序已经在两台机器上运行并与 sql server 连接。我的数据库最大为 200mb。我想迁移我的 Web 应用程序以使用 mvc4 和 EF，我还想通过删除 sql server 在内存数据库中使用一些。

我在 Internet 上进行了检查，我可以将我的应用程序迁移到 mvc4 和 EF，但我无法找到有关我可以在 EF/Codefirst 中使用哪些内存数据库的帮助。另外，如何将内存数据库备份到一些基于 Web 的存储，如 Amazon S3 或 Azure 存储？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:12:25.057

首先，为什么要使用内存数据库？Sql 数据库具有很强的可靠性和查询能力。

当使用两台服务器时，内存数据库将无法工作，因为内存将位于每台服务器的本地。您可以使用分布式缓存或其他东西来完成这项工作。

实体框架不适合这种情况。它是一个对象关系*数据库*映射器。将它与内存数据库一起使用是没有意义的。ORM 将对象转换为关系存储（如数据库）。在内存中，您只处理对象，因此您不需要 ORM。

如果你的数据库只有 200mb，你不会有任何性能问题。数据库针对您的场景进行了优化，而像实体框架这样的 ORM 将加快您的开发时间。

# android - FragmentManager、LocalActivityManager 和 TabHost.setup()

> ID：11332482
> 
> 赞同：2
> 
> 时间：2012-07-04T16:07:36.440
> 
> 标签：android, android-fragments, android-fragmentactivity

好的，我有一个继承自 FragmentManager 的类。在这个类中，我有一个 FragmentPagerAdapter，它创建一些片段选项卡并插入到我的 TabHost 中。代码编译得很好并且可以工作。我把这些课程的一些部分放在下面。我用来做这个 android supprt package v4

```
public class TabMenu extends FragmentActivity implements TabHost.OnTabChangeListener, ViewPager.OnPageChangeListener{
...
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabs_container);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    tabHost = (TabHost)findViewById(android.R.id.tabhost);
    tabHost.setup();

    viewPager = (ViewPager)findViewById(R.id.viewpager);

    ...

    menuAdapter = new MenuPagerAdapter(this, tabHost, viewPager);
    menuAdapter.addTab("meutime", "Meu Time", MeuTime.class, extras);
    ...
    tabHost.setOnTabChangedListener(this);
    viewPager.setOnPageChangeListener(this);
            ...

public class MenuPagerAdapter extends FragmentPagerAdapter{
    public MenuPagerAdapter(FragmentActivity fragmentActivity, TabHost tabHost, ViewPager viewPager) {
        ...
    }

    @Override
    public Fragment getItem(int position) {
        String currentFragment = tabNames.get(position);
        return fragmentManager.findFragmentByTag(currentFragment);
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return tabNames.size();
    }

    public void addTab(String tag, String tabLabel, Class<?> cls, Bundle bundle){
        TabHost.TabSpec tabSpec = tabHost.newTabSpec(tag).setIndicator(createTab(tabLabel));
        Intent intent = new Intent();
        intent.setClass(context, cls);
        intent.putExtras(bundle);
        tabSpec.setContent(intent);
        tabNames.add(tag);
        tabHost.addTab(tabSpec);
        notifyDataSetChanged();
    }

    private View createTab(String tabLabel){
        View view = LayoutInflater.from(context).inflate(R.layout.tab_spec_layout, null, false);
        ...
        return view;
    }
} 
```

当我实例化这个 FragmentActivity 时，我收到了以下异常：

```
java.lang.IllegalStateException: Did you forget to call 'public void setup(LocalActivityManager activityGroup)'? 
```

在 Android 开发者网站上阅读 LocalActivityManager 已被弃用。但它在 TabHost.setup(LocalActivityManager) 中使用。如果不推荐使用此类，是否有针对这种情况的解决方案？我不能使用 TabContentFactory。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T15:22:28.550

不幸的是，我使用了 TabContentFactory。就我个人而言，我不喜欢这种创建空视图但有效的解决方案。

```
public void addTab(String tag, final String tabLabel, Class<?> cls, Bundle bundle){
        TabHost.TabSpec tabSpec = tabHost.newTabSpec(tag).setIndicator(createTab(tabLabel));
        tabSpec.setContent(new TabHost.TabContentFactory() {
            public View createTabContent(String tag) {
                View view = new View(context);
                view.setMinimumHeight(0);
                view.setMinimumWidth(0);
                return view;
            }
        });

        fragContentInstances.add(new FragContentInfos(cls, bundle));
        tabHost.addTab(tabSpec);
        notifyDataSetChanged();
    }

    private class FragContentInfos{
        private Class<?> cls;
        private Bundle bundle;
        public FragContentInfos(Class<?> cls, Bundle bundle){
            this.cls = cls;
            this.bundle = bundle;
        }
    } 
```

# php - 带有 php 脚本的 Jquery 移动电子邮件表单

> ID：11332483
> 
> 赞同：0
> 
> 时间：2012-07-04T16:07:43.933
> 
> 标签：php, jquery, forms, email

我在移动网站上工作，但我的电子邮件表单出现问题 问题是当我收到通过表单发送的邮件时，它不包含任何数据。用户输入的所有数据都丢失了。

这是表单代码

```
<form action="correo.php" method="post" data-ajax="false">
<div>
<p><strong>You can contact us by filling the following form</strong></p>
</div>
<div data-role="fieldcontain">
<fieldset data-role="controlgroup" data-mini="true">
<label for="first_name">First Name</label>
<input id="first_name" placeholder="" type="text" />
</fieldset>
</div>
<div data-role="fieldcontain">
<fieldset data-role="controlgroup" data-mini="true">
<label for="last_name">Last name</label>
<input id="last_name" placeholder="" type="text" />
</fieldset>
</div>
<div data-role="fieldcontain">
<fieldset data-role="controlgroup" data-mini="true">
<label for="email">Email</label>
<input id="email" placeholder="" type="email" />
</fieldset>
</div>
<div data-role="fieldcontain">
<fieldset data-role="controlgroup" data-mini="true">
<label for="telephone">Phone</label>
<input id="telephone" placeholder="" type="tel" />
</fieldset>
</div>
<div data-role="fieldcontain">
<fieldset data-role="controlgroup" data-mini="true">
<label for="age">Age</label>
<input id="age" placeholder="" type="number" />
</fieldset>
</div>
<div data-role="fieldcontain">
<fieldset data-role="controlgroup" data-mini="true">
<label for="country">Country</label>
<input id="country" placeholder="" type="text" />
</fieldset>
</div>
<div data-role="fieldcontain">
<fieldset data-role="controlgroup">
<label for="message">Your message</label>
<textarea id="message" placeholder="" data-mini="true"></textarea>
</fieldset>
</div>
<input data-inline="true" data-theme="e" value="Submit" data-mini="true" type="submit" />
</form> 
```

这是PHP代码

```
<?
/* aqui se incializan variables de PHP */
if (phpversion() >= "4.2.0") {
        if ( ini_get('register_globals') != 1 ) {
                $supers = array('_REQUEST',
                                '_ENV',
                                '_SERVER',
                                '_POST',
                                '_GET',
                                '_COOKIE',
                                '_SESSION',
                                '_FILES',
                                '_GLOBALS' );

                foreach( $supers as $__s) {
                        if ( (isset($$__s) == true) && (is_array( $$__s
) == true) ) extract( $$__s, EXTR_OVERWRITE );
                }
                unset($supers);
        }
} else {
        if ( ini_get('register_globals') != 1 ) {

                $supers = array('HTTP_POST_VARS',
                                'HTTP_GET_VARS',
                                'HTTP_COOKIE_VARS',
                                'GLOBALS',
                                'HTTP_SESSION_VARS',
                                'HTTP_SERVER_VARS',
                                'HTTP_ENV_VARS'
                                 );

                foreach( $supers as $__s) {
                        if ( (isset($$__s) == true) && (is_array( $$__s
) == true) ) extract( $$__s, EXTR_OVERWRITE );
                }
                unset($supers);
        }
}

/*  DE AQUI EN ADELANTE PUEDES EDITAR EL ARCHIVO */
    /* reclama si no se ha rellenado el campo email en el formulario */

/* aquí se especifica la pagina de respuesta en caso de envío exitoso */
$respuesta="index.html#respuesta";
// la respuesta puede ser otro archivo, en incluso estar en otro servidor

/* AQUÍ ESPECIFICAS EL CORREO AL CUAL QUEIRES QUE SE ENVÍEN LOS DATOS
DEL FORMULARIO, SI QUIERES ENVIAR LOS DATOS A MÁS DE UN CORREO,
LOS PUEDES SEPARAR POR COMAS */
$para ="some@mail.com;" /* this is not my real email, of course */

/* AQUI ESPECIFICAS EL SUJETO (Asunto) DEL EMAIL */
$sujeto = "Mail de la página - Movil";

/* aquí se construye el encabezado del correo, en futuras
versiones del script explicaré mejor esta parte */ 
$encabezado = "From: $first_name $last_name <$email>";
$encabezado .= "\nReply-To: $email";
$encabezado .= "\nX-Mailer: PHP/" . phpversion();

/* con esto se captura la IP del que envío el mensaje */
$ip=$REMOTE_ADDR;

/* las siguientes líneas arman el mensaje */
$mensaje .= "NOMBRE: $first_name\n";
$mensaje .= "APELLIDO: $last_name\n";
$mensaje .= "EMAIL: $email\n";
$mensaje .= "TELEFONO: $telephone\n";
$mensaje .= "EDAD: $age\n";
$mensaje .= "PAIS: $country\n";
$mensaje .= "MENSAJE: $message\n";

/* aqui se intenta enviar el correo, si no se
tiene éxito se da un mensaje de error */
if(!mail($para, $sujeto, $mensaje, $encabezado))
{
    echo "<h1>No se pudo enviar el Mensaje</h1>";
    exit();
}
else
{
    /* aqui redireccionamos a la pagina de respuesta */
    echo "<meta HTTP-EQUIV='refresh' content='1;url=$respuesta'>";
}

?> 
```

请问有什么帮助吗？在此先感谢巴勃罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:11:29.313

您的`input`元素没有任何`name`属性。这些`name`属性应该与您稍后在 PHP 代码中使用的变量相匹配。

编辑：您的 PHP 代码实际上并没有尝试`$_POST`直接访问，而是似乎强制 register_globals 除非它已经打开。我会说这是非常*糟糕的做法。*我会删除顶部的所有 register_globals-stuff 并执行以下操作：

```
$mensaje .= "NOMBRE: {$_POST['first_name']}\n";
$mensaje .= "APELLIDO: {$_POST['last_name']}\n";
$mensaje .= "EMAIL: {$_POST['email']}\n"; 
```

等等。

# c# - DataBind 通用“动态”类到 GridView

> ID：11332485
> 
> 赞同：0
> 
> 时间：2012-07-04T16:07:47.127
> 
> 标签：c#, asp.net, data-binding, gridview

如何将 GridView 数据绑定到如下类？

```
public class GenericEntity
{
    private readonly Dictionary<string, object> properties = new Dictionary<string, object>();
    public object this[string propertyName]
    {
        get
        {
            if (properties.ContainsKey(propertyName))
                return properties[propertyName];
            else
                return null;
        }
        set
        {
            if (value == null)
                properties.Remove(propertyName);
            else
                properties[propertyName] = value;
        }
    }
} 
```

此类可能有任意数量的属性，并且无法在编译时知道它们中的任何一个，只能在运行时知道，这是因为属性直接映射到来自 BD 的结果集的列。

如何将此 GenericEntity 类的列表数据绑定到 GridView？我尝试了以下方法，但出现了“类不包含具有名称的属性...”的异常

```
var newColumn = new BoundField();
newColumn.HeaderText = resultsetDescription.FieldDisplayName;
newColumn.DataField = resultsetDescription.FieldName;
myGridView.Columns.Add(newColumn);

myGridView.DataSource = GetListOfGenericEntities(args);
myGridView.DataBind(); 
```

**编辑：**

我已经实现了这个[SO 答案](https://stackoverflow.com/questions/882214/data-binding-dynamic-data)中提到的方法，但它仍然抛出属性异常......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:22:11.330

如果您只需要将此通用列表绑定到 a`GridView`我会将其转换为 a `DataTable`，然后将其绑定`DataTable`到`GridView`. 你检查过[匿名类型](http://msdn.microsoft.com/en-us/library/bb397696.aspx)吗？您可以创建一个匿名类型的通用列表，然后将其绑定到您的`GridView`的。

祝你好运！

# visual-studio-2010 - CUDA 4.2。工具箱和VS2010

> ID：11332488
> 
> 赞同：1
> 
> 时间：2012-07-04T16:08:05.327
> 
> 标签：visual-studio-2010, cuda

我正在尝试编译 Cuda SDK 示例，但我收到“MSB3721 错误”，因为“nvcc”是“以代码 1 退出”。完整的输出：

> "C:\Program Files (x86)\MSBuild\Microsoft.Cpp\v4.0\BuildCustomizations\CUDA 4.2.targets(361,9): 错误 MSB3721: 命令 ""C:\Program Files\NVIDIA GPU Computing Toolkit\ CUDA\v4.2\bin\nvcc.exe" -gencode=arch=compute_10,code=\"sm_10,compute_10\" -gencode=arch=compute_20,code=\"sm_20,compute_20\" -gencode=arch=compute_30 ,code=\"sm_30,compute_30\" --use-local-env --cl-version 2010 -ccbin "C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\bin\x86_amd64" -I"。 /"-I"../../common/inc"-I"../../../shared/inc"-I"C:\Program Files\NVIDIA GPU Computing Toolkit\CUDA\v4.2 \include" -G --keep-dir "x64\Debug" -maxrregcount=0 --machine 64 --compile -g -Xcompiler "/EHsc /nologo /Od /Zi /MTd " -o "x64/Debug/bandwidthTest .cu.obj" "C:\ProgramData\NVIDIA Corporation\NVIDIA GPU Computing SDK 4.2\C\src\bandwidthTest\bandwidthTest.cu"" 以代码 1 退出。"

Cuda toolkit 4.2 用于带有 VS2010 Ultimate 的 Win7 x64 Ultimate 系统。使用“配置管理”中的“win32”选项时，错误仍然存​​在。

有什么建议吗？

！！！！！！最后在构建新计算机（Z77 mobo + i7 + GTX550Ti）后重新安装Win7 + VS2010 + CUDA驱动程序超过10次后阅读所有可用的NVIDIA手册关于“CUDA入门”后，等待数月后，我发现NVIDIA论坛复活当在我桌面上的 VS2010 快捷方式上选择“以管理员身份运行”选项时，nvcc 构建错误“以代码 1 退出”的问题消失了！！！！！！尽管我使用的是管理员帐户（PC 上的唯一帐户），但无法构建任何 CUDA 示例。可执行文件运行没有任何问题，但我无法使用 VS2010 构建源代码！

！！！！！！谢谢大家的支持！！！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T14:57:33.977

我会尝试从头开始。删除 CUDA、Nsight 和 Visual Studio。重启。手动删除可能留下的任何程序文件夹。我不能保证删除这些是安全的，但如果任何其他 NVIDIA 或 Microsoft 产品因此而损坏，我会在修复 CUDA 后修复它们：

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0
C:\Program Files (x86)\Microsoft Visual Studio 9.0
C:\Program Files (x86)\NVIDIA Parallel Nsight 2.1
C:\Program Files (x86)\NVIDIA Parallel Nsight Monitor 2.1
C:\Program Files\Microsoft Visual Studio 10.0
C:\Program Files\NVIDIA GPU Computing Toolkit 
```

手动删除任何剩余的应用数据文件夹：

```
C:\Users\<your user folder>\AppData\Roaming\NVIDIA
C:\Users\<your user folder>\AppData\Roaming\NVIDIA Corporation 
```

您可能还想查找注册表项。

然后重新安装一切。Nsight 带有 CUDA，所以我先安装 VS，然后再安装 Nsight。这应该是所有需要的。然后，从头开始创建一个 CUDA 项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T15:14:03.193

您可能想查看此线程，也许它可以帮助您解决问题： [How to Compile CUDA App is Visual Studio 2010?](https://stackoverflow.com/questions/3953326/how-to-compile-cuda-app-is-visual-studio-2010)

# clojure - 从集合到有序集合

> ID：11332493
> 
> 赞同：1
> 
> 时间：2012-07-04T16:08:22.627
> 
> 标签：clojure, destructuring

我遇到了某种与解构相关的心理障碍……

```
(sorted-set 4 2 5) 
```

给出：

```
#{2 4 5} 
```

但是我如何从以下位置获得相同的排序集：

```
((fn [???] (sorted-set ???)) [4 2 5]) 
```

或从作为参数传递的集合（未排序）中：

```
((fn [???] (sorted-set ???)) #{4 2 5}) 
```

我尝试了几次解构，我在想：

```
((fn [#{elems}] (sorted-set elems)) #{4 2 5}) 
```

会起作用，但事实并非如此。

我想知道如何做到这一点，如果你能解释为什么我的推理方式是虚假的，那就更好了......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T16:13:20.700

sorted-set 函数参数是一个 var-arg: [& 键]，这意味着如果你有一个集合并且你想调用该函数，你需要使用 apply 函数，例如：

```
user=> (def v [4 8 2])
#'user/v
user=> (apply sorted-set v)
#{2 4 8} 
```

接受集合并返回排序集的函数的签名如下：

```
user=> (defn to-ss [c] (apply sorted-set c))
#'user/to-ss
user=> (to-ss v)
#{2 4 8} 
```

您还可以创建一个空的排序集，然后将集合的所有元素添加到其中：

```
(defn to-ss [c] (into (sorted-set) c)) 
```

请注意，如果您要使用 var-arg 参数定义函数，则需要使用 apply 来调用函数并创建排序集：

```
user=> (defn to-ss [& items] (apply sorted-set items))
#'user/to-ss
user=> (apply to-ss v)
#{2 4 8} <-- expected value
user=> (to-ss v)
#{[4 8 2]} <-- sorted-set with just one value 
```

# c# - 为什么 Main() 方法应该是静态的？

> ID：11332494
> 
> 赞同：52
> 
> 时间：2012-07-04T16:08:33.320
> 
> 标签：c#

我尝试`public void Main()`在 C# 中创建；它说*no static void Main found*。静态
到底是什么意思？`Main`我知道代码适用于`public static void Main()`.

但为什么`Main`一定要`static`呢？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-07-04T16:12:22.247

您需要一个进入程序的入口点。静态意味着您可以调用函数而无需实例化类的对象/实例。这有点“鸡和蛋”……在您进入程序之前，您无法实例化对象。

可以在不实例化对象的情况下调用静态方法。因此`main()`需要是静态的，以允许它成为您程序的入口。

正如大卫所说，您只需将关键字添加`static`到函数定义中即可更改它。值得研究静态（类）方法与实例方法，并且知道它们之间的区别有时会很有用。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-04T17:42:54.793

只有静态 main 方法可以完成这项工作，因为有一个定义此行为的约定。没有其他原因。

看看[C# 语言规范](https://www.ecma-international.org/publications/files/ECMA-ST/ECMA-334.pdf "ECMA-334，当前版本")：

> ***应用程序启动***发生在执行环境调用指定方法时，该方法称为应用程序的***入口点***。此入口点方法始终命名为`Main`，并且应具有以下签名之一：
> 
> ```
>  static void Main() {…}  
>      static void Main(string[] args) {…}  
>      static int Main() {…}  
>      static int Main(string[] args) {…} 
> ```
> 
> 如图所示，入口点可以选择返回一个`int`值。此返回值用于应用程序终止（第 10.2 节）。

[注：以上引自第[4 版](http://ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-334%204th%20edition%20June%202006.pdf "ECMA-334，第 4 版（历史）")[，^现](http://ecma-international.org/publications/files/ECMA-ST-ARCH/ECMA-334%204th%20edition%20June%202006.pdf "ECMA-334，第 4 版（历史）")标为“历史”。当前版本的措辞不同。]

除此之外，名称`Main`可以更改为其他名称。在这种情况下，必须添加一个编译器选项，告诉 C# 编译器将不同的方法标记为程序的入口点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-08-04T10:53:33.773

类中有两种类型的方法：

1.  非静态方法
2.  静态方法

```
// Example of static and non-static methods and how to call
namespace TestStaticVoidMain
{
    class Program
    {
        Static Void Main(string[] args)
        {
           // Instantiate or create object of the non-static method:
            Exam ob = new Exam();
            // Call the instance:
            ob.Test1();

            // Directly the call the static method by its class:
            Exam.Test2();

            Console.ReadKey();
        }
    }
    class Exam
    {
        public void Test1()
        {
            Console.WriteLine("This is a non-static method");
        }

        public static void Test2()
        {
            Console.WriteLine("This is a static method");
        }
    }
} 
```

**1.静态方法：**

要调用静态方法（函数），我们不需要实例化或创建该方法的对象。我们不能使用`new`关键字，因为在加载和编译类时，`static`关键字**默认**实例化或创建该类方法的对象，所以我们直接调用静态方法。

关于参考`static void Main(string[] args)`，我们已经讨论过了`static`。余数为`void Main(string[] args)`。`void`是一种不返回任何内容的数据类型。`Main()`是执行 C# 程序的标准入口点。可选参数`string[] args`接收程序运行时使用的可选“命令行”参数。

**2.非静态方法：**

要调用非静态方法，我们必须实例化或创建类方法的对象，以使用关键字调用类的方法（函数）`new`。

如果一个名为的类`Test`有一个名为的**非静态**方法`show()`，那么它将如何调用一个实例：

```
// to call non-static method
Test ob=new Test();
ob.show(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-14T18:38:23.490

从概念上讲，框架可以指定不是使用特定的静态方法来运行程序，而是构造某个特定类的默认实例并在其上运行某些特定方法。如果一个框架通过让静态方法成为编译器初始化的单例实例的实例成员来实现静态方法，那么这种方法可能是完全合理的，因为无论如何框架都必须在调用主函数之前生成一个新的对象实例.

但是，如果调用静态方法比构造新对象实例并在其上调用方法“更容易”，那么要求框架使用更昂贵的操作过程并没有太多好处。任何想要使用后一种方法的代码都可以完全免费使用：

```
public static void Main( [[params]] )
{
  var mainObject = new MainObject();
  mainObject.Main( [[params]] );
} 
```

让系统包含自己的静态方法可能会带来一些潜在的好处，如下所示：

```
public static void SysMain( [[params]] )
{
  using (Application app = new UserApp( [[params]] )) // UserApp derives from Application
  {
    app.Start(); // Virtual method
    app.AllowNext(); // Base method--see text
    app.Run(); // Abstract method
  }
} 
```

有`app.AllowNext()`一种方法可以与基本上同时启动的其他应用程序实例进行协调，以确保重复尝试在后台启动应用程序将`Start`严格按顺序处理它们的调用。然而，如果没有这样的协调方案，要求框架在运行之前构造一个应用程序对象并没有太大的好处。成本不会很大，但如果没有任何潜在的可识别利益，即使是微不足道的成本也没有多大意义。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-02-06T12:13:29.657

main 应该是静态的，它首先加载并成为您程序的入口点，因此 main 是静态的至关重要。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-26T10:51:24.057

在应用程序启动期间，当没有创建类的对象时，必须调用 Main 方法开始程序执行。Main 有时被称为应用程序的入口点。将 Main 声明为静态允许执行环境调用 Main 而无需创建类的实例。方法 Main 通常使用标头声明：

```
static void Main(){..} 
```

但也可以用标题声明：

```
static void Main(string[] args){..} 
```

您可以使用返回类型 int（而不是 void）声明 Main — 如果一个应用程序由另一个应用程序执行并且需要向另一个应用程序返回成功或失败的指示，这将很有用。

# windows - 为什么 git rebase 说“致命：无法将 etf8 转换为 utf8”？

> ID：11332497
> 
> 赞同：2
> 
> 时间：2012-07-04T16:08:46.977
> 
> 标签：windows, git, utf-8, rebase

我`git`在 Windows 机器上使用，我正在尝试将它与 cygwin 终端和 Git Bash 一起使用。当我尝试将主题分支变基为 master 时，我收到以下神秘错误：

```
☻~/code/project $ git rebase master
First, rewinding head to replay your work on top of it...
fatal: cannot convert from etf8 to utf8 
```

这是什么意思，我该如何解决？谷歌在这方面给了我零结果。

我的语言环境是`en_US.UTF-8`，但我没有任何`LC`环境变量。

```
~ $ env | grep LC
~ $ env | grep LANG
LANG=en_US.UTF-8 
```

这是我正在使用的版本：

```
~ $ git --version
git version 1.7.9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T19:02:50.293

我认为您的存储库中有一些损坏的文件或混乱的配置。

我的 google-fu 没有提出一个名为`etf8`. 我认为这`utf8`封信中有一点错误（第五个位置）`u`：

*   的[ASCII](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)码`u`是 0x75 或`0111 0101`二进制
*   的[ASCII](http://en.wikipedia.org/wiki/ASCII#ASCII_printable_characters)码`e`是 0x65 或`0110 0101`二进制

在我看来，这是由`git`.

它可能可以通过编辑内部文件或 repo 中的一些配置值来修复（但不幸的是，我对`git`内部结构不知道去哪里看）。

# sql-server-2008 - 预处理（经典）ASP 页面

> ID：11332504
> 
> 赞同：0
> 
> 时间：2012-07-04T16:09:22.453
> 
> 标签：sql-server-2008, asp-classic

我正在运行一个带有 SQL2008 数据库的经典 vbscript ASP 站点。有一些页面需要大量处理器，但实际上并不经常更改。理想情况下，我希望服务器每晚处理一次这些，也许是 HTML 页面，然后可以离开服务器，而不必为每个用户处理。

有什么想法可以实现吗？

应用程序本身运行良好，所以我不热衷于用另一种脚本语言重写整个东西，即使经典的 asp 有点过头了！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:35:33.750

是的 ：

您没有指定页面的哪些部分是“处理器繁重的”，但我会假设它是 SQL 数据的查询和处理。一种想法是检索数据并将其作为缓存文件存储在文件系统中。XML 是一种不错的数据格式选择。

而您的原始代码是这样的：

```
 (psuedocode)
 get results from database
 process results to generate html file 
```

...您修改后的代码如下所示：

```
check if cache file exists
if not exist
   get results from database
   store results in cache file
get results from cache file
process results to generate html file. 
```

这是一种通用的缓存方法，可以应用于您有查询参数确定输出的情况。只需根据所有组成参数生成缓存文件的名称。因此，如果结果取决于名为 p1 和 p2 的查询参数，那么当`p1`和分别`p2`具有值`1234`和时`blue`，缓存文件可能被命名为 `cache-1234-blue.xml`. 如果您有 5 个不同的查询，您可以将它们缓存为`query1-1234-blue.xml`，`query2-1234-blue.xml`依此类推。

您无需“每晚”执行此操作。您可以在代码中包含缓存生命周期，并使用“如果缓存文件存在并且是新鲜的”来代替“如果缓存文件存在”测试。为此，只需获取缓存文件上最后修改的时间戳，并查看它是否早于您的缓存生命周期。

```
Function FileOlderThan(fname, age)
    'function returns True if the file is older than the age,
    '  specified in minutes.
    Dim LastModified, FSO, DateDifference

    Set FSO = CreateObject("Scripting.FileSystemObject")
    LastModified = FSO.GetFile(fname).DateLastModified
    DateDifference = DateDiff("n", LastModified, Now())
    If DateDifference > age Then
        FileAge = False
    Else
        FileAge = True
    End If
End Function

fname = Server.MapPath(".") & cacheFileName
If FileOlderThan(fname, 10) Then
   ... retrieve fresh data ...
End If 
```

这可能是 10 分钟、10 小时、10 个请求，无论你喜欢什么。

上面说过，对于cachefile中的数据格式，XML是一个不错的选择。ADO 有一个 SaveAsXML 方法，您还可以使用`FOR XML`附加到查询的子句直接从 SQL2008 生成 XML。

* * *

如果“处理器重”部分不是查询和检索，而是生成 html 页面，那么您可以应用相同的方法，只是直接缓存 html 文件。

# android - 将对象传递给活动

> ID：11332506
> 
> 赞同：0
> 
> 时间：2012-07-04T16:09:40.117
> 
> 标签：android

我可以在我的第一个活动中初始化对象，而你可以在所有活动中初始化它吗？？？

```
public class Calc{
    int x;
    int y;
    public Calc(int x, int y) {
       this.x = x;
       this.y = y;
    }
    public int sum() {
        return x + y;
    }
}
public class MainActivity extends Activity {

private int progressStatus = 0;
private Handler handler = new Handler();
private ProgressBar loading;
private static int progress;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Calc c = new Calc(3, 4);
}
}

public class PreviewActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.preview);

            TextView txt = (TextView) findViewById(R.id.txt);
            txt.setText(Integer.toString(c.sum));
}
} 
```

我如何在 MainActivity 中初始化 Calc 对象并使用它 PreviewActivity。

我如何将其传递给另一个活动或如何使其与其他活动共享

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:28:57.967

`Application`通过扩展它并编写您的自定义类来使用`Application`类，并将您的对象保留在您需要的此类中`Activities`

```
class MyApplication extends Application{
    Object a;

    public void setA(Object a){
         this.a = a;
    }

    public Object getA(){
         return a;
    }

} 
```

现在让我们假设在您的 A 活动中创建类对象`Object`并希望在 B 活动中使用它。

这样做，

```
class ActivityA extends Activity(){

...
// some where in activity, set your object this way.
     Object aObj = new Object();
     ((MyApplication)getApplication()).setA(aObj);

...

}

class ActivityB extends Activity(){

...
// some where in activity, get your object this way.
     Object aObj = ((MyApplication)getApplication()).getA( );

...

} 
```

你需要告诉你`androidManifest.xml`关于你的扩展`Application`课程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:16:14.890

制作

```
public class Calc implements Serializable {
int x;
int y;
public Calc(int x, int y) {
   this.x = x;
   this.y = y;
}
public int sum() {
    return x + y;
} 
```

}

和

当你开始你的 PreviewActivity

```
Intent intent = new Intent(mContext, PreviewActivity .class);
intent.putParcelableArrayListExtra("data",c);
startActivity(intent); 
```

并在您的 PreviewActivity 中执行此操作

```
Calc c=(Calc ) getIntent().getSerializableExtra("data"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:11:10.813

> 我如何将其传递给另一个活动或如何使其与其他活动共享

只需使用*Intent*：

```
intent.putExtra("calc" new Calc(3, 4)); 
```

`Object`当你想开始另一个时传递这个`Activity`。

然后在您的第二个`Activity`电话中：

```
Calc c = getIntent().getParcelableExtra("calc"); // getSerializableExtra("calc"); 
```

你的`Calc`班级必须实施`Parcelable`或`Serializable`

```
public class Calc implements Parcelable { 
 ...
} 
```

# ruby-on-rails-3 - has_many 与 ActiveRecord 上的条件的关联

> ID：11332507
> 
> 赞同：0
> 
> 时间：2012-07-04T16:09:44.773
> 
> 标签：ruby-on-rails-3, activerecord, associations, polymorphic-associations

我有这个模型：`Store`和`Address`。

第二个模型`Address`我将它与其他模型一起使用，并且内部有一些用于不同模型的自定义字段。

是的，就像多态但没有`varchar`Class 的字段，我使用的是整数。（优化的东西）

现在在我的`Store`模型上，集合中的关联是这样的：

```
class Store < ActiveRecord::Base
    has_many :addresses, :foreign_key => "parent_id", :conditions => ['parent_kind = ?', 2]
    accepts_nested_attributes_for :addresses
end 
```

现在在我的控制器中，我这样做：

`@store.addresses.build`

我可以`f.fields_for :addresses...`在表格内使用。

当我提交表单并将数据保存到数据库时，问题就出现了。

`stores`表中的记录已保存，记录中的记录与存储的`addresses`一起保存`parent_id`，但`parent_kind`在`0`其中是 MySQL 上该属性的默认值。

我的快速修复是这样的：

```
@store = Store.new(params[:store])
    @store.addresses[0].parent_kind = 2
    if @store.save
    .... 
```

但我知道必须有另一种方式。

有什么建议吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:29:12.090

您是否尝试在嵌套表单中使用隐藏字段？

```
<%= f.fields_for :addresses, Address.new do |ff| %>
  <%= ff.hidden_field :parent_kind, :value => 2 %>
  ... 
```

**编辑**

如果您出于安全考虑不想使用它，这里有另一种可能会有所帮助的方法。您可以尝试使用这样的[关联回调](http://guides.rubyonrails.org/association_basics.html#association-callbacks)：

```
class Store < ActiveRecord::Base
  has_many :addresses, :foreign_key => "parent_id", 
                       :conditions => ['parent_kind = ?', 2],
                       :before_add => Proc.new { |store,address| address.parent_kind = 2}
  accepts_nested_attributes_for :addresses
end 
```

# c - 欧拉计划 #14

> ID：11332508
> 
> 赞同：5
> 
> 时间：2012-07-04T16:09:45.030
> 
> 标签：c

我目前正在解决[Project Euler 问题 14](http://projecteuler.net/problem=14)：

> 为正整数集定义了以下迭代序列：
> 
> ```
> n → n/2 (n is even)
> n → 3n + 1 (n is odd)  
> 
> Using the rule above and starting with 13, we generate the following sequence:
>                13 → 40 → 20 → 10 → 5 → 16 → 8 → 4 → 2 → 1  
> 
> Which starting number, under one million, produces the longest chain? 
> ```

我设计了以下算法来解决这个问题：

*   我没有为每个数字单独查找序列，这将包含大量冗余计算，而是尝试从 1 向后开发序列。也就是说，从数字开始并预测它之前的元素。
*   由于可以生成多个系列，因此使用链表存储所有系列的最近编号。（这个想法是只存储那些具有较长系列的元素。）
*   我将循环这个，直到找到所有低于给定限制的数字；限制下的最后一个数字将具有最长的系列。

这是我的代码：

```
void series_generate(long num)
{
    long n = 1;
    addhead(n);             //add 1 to list.
    while (n < num) 
    {
            series *p;
            for (p = head; p != NULL; p = p->next)
            {
                    long bf = p->num - 1;
                    if (p->num%2 == 0 && bf != 0 && bf%3 == 0) {
                            bf /= 3;
                            if (bf != 1)
                                    addhead(bf);
                            if (bf < num)
                                    n++; 
                    }
                    p->num *= 2;
                    if ( p->num < num)
                            n++;

            }       
    }       
} 
```

[这是完整代码的链接。](http://ideone.com/4QIZX) 但是，我没有得到预期的答案。谁能解释为什么这个算法不起作用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-04T18:44:26.567

您正在尝试逐级构建 Collat​​z 树。因此`k`，在内部循环的第 - 次迭代之后，列表包含（虽然没有发生溢出）所有需要精确`k`步骤才能在其 Collat​​z 序列中达到 1 的数字。

这种方法有两个严重的问题。

1.  级别的大小呈指数增长，大小大约每三个级别增加一倍。您没有足够的内存来存储不超过 100 的级别。
2.  级别中最大的成员`k`是 2 ^k。根据`num`成员使用的类型，您会在级别 31、32、63 或 64 处溢出。然后，如果您使用有符号类型，您将有未定义的行为，可能是列表中的负数，并且一切都变得混乱。如果您使用无符号类型，您的列表包含一个 0，并且一切都变得混乱。

由于 27 需要 111 步才能达到 1，所以你有溢出时`num > 27`，因此你得到错误的结果。

# ios - 如何从 JSON NSDictionary 创建对象

> ID：11332509
> 
> 赞同：0
> 
> 时间：2012-07-04T16:09:46.163
> 
> 标签：ios, json, cocoa, object, nsdictionary

我有一个`PHP`Web 服务，它返回一个`JSON`具有这种格式的字符串：

```
[{"latitud":"37.995914","longitud":"-1.139705","nombre":"Miguel de 
Unamuno"},{"latitud":"37.995433","longitud":"-1.140143","nombre":"Calle
 Pina"},{"latitud":"37.99499","longitud":"-1.140361","nombre":"Calle 
Moncayo"},{"latitud":"37.993918","longitud":"-1.139392","nombre":"Calle 
Moncayo2"},{"latitud":"37.994588","longitud":"-1.138543","nombre":"Calle 
Salvador de Madriaga"}] 
```

在我的项目中，我有一个具有下一个结构的自定义类：

```
#import <Foundation/Foundation.h>
#import <MapKit/MapKit.h>

@interface PCoordenada : NSObject

@property (nonatomic) CLLocationCoordinate2D *punto;
@property (nonatomic,strong) NSString *nombre;
@end 
```

然后，我在主应用程序中使用其他类：

```
#import <UIKit/UIKit.h>
#import "PCoordenada.h"

@interface TestViewController : UIViewController

@property (nonatomic,strong) NSData * HTTPResponse;
@property (nonatomic,strong) NSDictionary * dic;
@property (nonatomic,strong) NSMutableArray *arrayCoord;
@property (nonatomic,strong) PCoordenada *coor;

-(IBAction)GetDataFrom:(id)sender;

@end 
```

我想知道如何制作包含 JSON 字符串信息的 PCoordenada 对象数组。

任何人都可以帮助我吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:18:44.017

做这个：

```
NSData *theData = [NSData dataWithContentsOfURL:[NSURL URLWithString:YOUR_URL]];
NSArray *arrRequests = [NSJSONSerialization JSONObjectWithData:theData options:NSJSONReadingMutableContainers error:nil]; 
```

这会将 JSON 放入对象的 NSArray 中。这些对象中的每一个都是一个 NSDictionary。那么你只需要遍历 NSArray 来获取每个的 NSDictionary 。

```
//now let's loop through the array and generate the necessary annotation views
for (int i = 0; i<= arrRequests.count - 1; i++) {
    //now let's dig out each and every json object
    NSDictionary *dict = [arrRequests objectAtIndex:i];} 
```

您从循环中获取的每个 NSDictionary 都将 JSON 属性作为 NSDictionary 中的键：

```
 NSString *address = [NSString stringWithString:[dict objectForKey:@"Address"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:59:54.397

在读取 JSON 以获得更好的性能时，使用多线程也是一个很好的做法。 [本文](http://www.raywenderlich.com/5492/working-with-json-in-ios-5)有一个非常简单的操作方法。我推荐阅读。

# ruby-on-rails - Rails ActiveRecord 模型链表

> ID：11332517
> 
> 赞同：6
> 
> 时间：2012-07-04T16:10:34.637
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, linked-list

经过密集的谷歌搜索后，我现在将指出一个似乎不经常发生但仍然非常基本的问题。Active Record 中的链表。就我现在而言，我们需要模型中的两个关联：

```
class Child < ActiveRecord::Base
  belongs_to :parent
  belongs_to :next, :class_name => 'Child', :foreign_key => 'next_id'
  belongs_to :previous, :class_name => 'Child', :foreign_key => 'previous_id'
end 
```

所以现在我们可以得到一个父母的所有孩子：

```
children = Child.where("parent_id = ?", parent_id) 
```

现在问题来了：我当然想用一个查询从数据库中获取所有孩子，但我也想按链接顺序遍历孩子，这意味着第一个将是前一个属性为 nil 的孩子，下一个孩子将是由第一个下一个属性连接的那个，依此类推，直到下一个属性为零。是否可以这样做，或者我是否需要查询第一个孩子，然后在没有“预缓存”的情况下从一个孩子到另一个孩子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-12T14:55:53.703

[度假村](https://github.com/codegram/resort)和排名[模型](https://github.com/mixonic/ranked-model)宝石是其他选择。第一个使用类似于链表的方法。第二个使用位置属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:20:56.040

您可能应该使用 Rails 的[acts_as_list](https://github.com/swanandp/acts_as_list) gem。它存储项目在列表中的位置，甚至是列表和父对象的范围`belongs_to`。它也可以通过允许您查询所有元素然后对它们进行正确排序来解决这个问题。

# php - Facebook 应用程序需要 PHP 吗？

> ID：11332519
> 
> 赞同：3
> 
> 时间：2012-07-04T16:10:39.647
> 
> 标签：php, facebook, gwt, iframe

我已经用 GWT 编写了一个小型网络应用程序，并且正在研究如何在 Facebook 上“克隆”它（作为 FB 应用程序）。在花了一些时间阅读开发文档之后，看起来 Facebook 应用程序只是一个虚荣画布，它指向另一个 URL（通过`iframe`）。

所有 FB 开发文档都在不断强调以 PHP 为中心的开发。并不是说我反对 PHP（！），只是我希望能够将 FB 应用程序指向我的（现有）网络应用程序主屏幕，而不必重新编写任何代码。

所以......我的问题归结为：**我可以只`iframe`将 FB 应用程序的画布添加到我现有的网络应用程序中，还是我必须用 PHP 完全重新编写我的应用程序？**提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:12:12.253

就像你说的，它只是一个 IFrame，Facebook 不知道你使用什么语言。所以你可以使用任何东西，尽管它必须支持某些东西，比如 URL 参数。

PHP文档的原因是因为有一个官方的PHP SDK，但该区域没有其他（也有JS和智能手机SDK），所有其他SDK都是第三方的。

# build - 为什么我的 Makefile 中的 eval 函数不起作用？

> ID：11332523
> 
> 赞同：0
> 
> 时间：2012-07-04T16:11:01.913
> 
> 标签：build, makefile, eval

当我尝试运行以下 make 文件时（使用以下建议进行了更新）：

```
# Build Directories
src_dir=src
obj_dir=obj
bin_dir=bin

cc=cl
cc_flags=

configs = dbg rel

# create the directory for the current target.
dir_guard=@mkdir -p $(@D)

# source files
src = MainTest.cpp

define build_template = 
# object files - replace .cpp on source files with .o and add the temp directory prefix
obj_$(1) = $$(addprefix $$(obj_dir)/$(1)/, $$(addsuffix .obj, $$(basename $$(src))))

testVar = "wooo"

# build TwoDee.exe from all of the object files.
$$(bin_dir)/$(1)/MainTest.exe : $$(obj_$(1))
    $$(dir_guard)
    $$(cc) -out:$$@ $$(obj_$(1)) -link

# build all of the object files in the temp directory from their corresponding cpp files.
$$(obj): $$(obj_dir)/$(1)/%.obj : $$(src_dir)/%.cpp
    $$(dir_guard)
    $$(cc) $$(cc_flags) -Fo$$(obj_dir)/$$(1) -c $$<
endef

$(foreach cfg_dir,$(configs),$(eval $(call build_template,$(cfg_dir))))

release: $(bin_dir)/rel/MainTest.exe

debug: cc_flags += -Yd -ZI
debug: $(bin_dir)/dbg/MainTest.exe

$(warning testVar $(testVar)) 
```

我得到的是：

```
$ make
Makefile:41: testVar
make: *** No rule to make target `bin/rel/MainTest.exe', needed by `release'.  Stop. 
```

您可以从输出中看到从未设置 testVar 变量。我根据上一个问题进行了这些更改：[为什么我的 makefile 目标特定变量不起作用？](https://stackoverflow.com/questions/11331390/why-doesnt-my-makefile-target-specific-variable-work)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:41:26.597

有一些空格使 Make 感到困惑。试试这个：

```
$(foreach cfg_dir,$(configs),$(eval $(call build_template,$(cfg_dir)))) 
```

还要确保您指定要链接的正确对象：

```
 $$(cc) -out:$$@ $$(obj_$(1)) -link 
```

正如@Beta 在下面的评论中指出的那样，`=`模板定义语法中的 GNU make 3.82 或更高版本。所以最好从行中省略它：

```
define build_template 
```

# jquery - jQuery单击未在图像上触发

> ID：11332527
> 
> 赞同：1
> 
> 时间：2012-07-04T16:11:19.960
> 
> 标签：jquery

以下 jQuery 未按预期工作。我只是想在单击图像时触发一个事件。

```
$(document).ready(function () {
    alert("document.ready has fired");

    $("img").click(function () {
        alert("image has been clicked");
    });
}); 
```

我在页面加载时看到“document.ready 已触发”警报，因此正确引用了 jQuery 和我的自定义 .js 文件。

我怀疑我遗漏了一些非常明显的东西，但是什么？

**更新：** jQuery 是正确的（在新页面中有效，但在我现有的页面上无效），因为我现在的解决方法是`onclick`在`<img>`标签上使用，因为这必须是“快速修复”，我会调查发生了什么不过，感谢大家的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:13:57.427

如果您的所有图像都没有在页面加载时直接加载，您可以试试这个

```
$(window).load(function () {
    alert("window.load has fired");

    $("img").click(function () {
        alert("image has been clicked");
    });
}); 
```

或者

```
$("body").on("click", "img", function () {... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:25:05.217

只是一个猜测：

试试这个：

```
$("img").each(function(){
    $(this).click(function () {
        alert("image has been clicked");
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:28:23.450

我倾向于使用 jQuery 的绑定函数，因为如果在 DOM 中动态更改了任何内容，它仍然会接收该事件，因为我过去使用 jQuery 的 .click 函数也遇到过问题，这导致了同样的问题。

```
$(document).ready(function () {
    alert("document.ready has fired");

    $("img").bind('click', function () {
        alert("image has been clicked");
    });
}); 
```

# mongomapper - 在 MongoMapper 中更新/销毁 EmbeddedDocuments

> ID：11332528
> 
> 赞同：1
> 
> 时间：2012-07-04T16:11:21.413
> 
> 标签：mongomapper

我似乎无法弄清楚如何在 MongoMapper 中更新或销毁 EmbeddedDocuments。通过谷歌搜索，我看到了不同的方法`delete_if {}`和其他方法，但在语义上似乎没有一个对我有用。MongoMapper 有内置的东西来帮助解决这个问题吗？

```
class Schedule
  include MongoMapper::Document

  key :name, String
  key :description, String
  key :active, Boolean, :default => false

  many :periods

  validates_presence_of :name

  def activate!
    set({:active => true}, :active => false)

    self.active = true
  end
end

class Period
  include MongoMapper::EmbeddedDocument

  key :number, Integer
  key :text, String
  key :start, Time
  key :finish, Time

  embedded_in :schedule

  before_validation :number!

  validates_presence_of :number
  validates_presence_of :text
  validates_presence_of :start
  validates_presence_of :finish

  validates_format_of :start, :with => /^(2[0-3]|[01]?[0-9]):([0-5]?[0-9])$/
  validates_format_of :finish, :with => /^(2[0-3]|[01]?[0-9]):([0-5]?[0-9])$/

  def number!
    unless self.number
      number = schedule.periods.count + 1
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T19:02:34.473

以下测试显示了如何以两种方式更新和删除嵌入文档的示例：(1) 通过 Ruby 使用标准数组访问器和方法，以及 (2) 通过 Mongo (MongoMapper / MongoDB) 更新和删除数据库上的嵌入文档服务器

参考：

```
http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-delete_if
http://mongomapper.com/documentation/plugins/modifiers.html#set
http://www.mongodb.org/display/DOCS/Updating#Updating-%24set 
```

请注意，包含 '.' 的哈希键 需要使用旧的 ( => ) 语法。希望这会有所帮助。

测试/单元/period_test.rb

```
require 'test_helper'

def ppp(obj)
  puts obj.inspect.gsub(/(, |\[)#/, "\\1\n #")
end

class PeriodTest < ActiveSupport::TestCase
  def setup
    Schedule.delete_all
    @today = Time.now.midnight
  end

  test "update and remove embedded documents" do
    schedule = Schedule.create(name: 'George')
    assert_equal(1, Schedule.count)
    schedule.periods << Period.new(number: 1, text: 'period 1', start: @today + 8.hours, finish: @today + 9.hours)
    schedule.periods << Period.new(number: 2, text: 'period 2', start: @today + 9.hours, finish: @today + 10.hours)
    schedule.periods << Period.new(number: 3, text: 'period 3', start: @today + 10.hours, finish: @today + 11.hours)
    schedule.periods.last.finish = @today + 12.hours #update in Ruby
    schedule.save
    assert_equal(1, Schedule.count)
    puts "schedule with three periods --------"
    ppp Schedule.first
    schedule.periods.delete_if {|period| period.text == 'period 2'} #remove in Ruby
    schedule.save
    puts "schedule after removing period 2 in Ruby --------"
    ppp Schedule.first
    Schedule.set( {name: 'George', 'periods.text' => 'period 1'}, {'periods.$.finish' => @today + 10.hours} ) #update embedded document in MongoDB
    puts "schedule after updatting period 1 via Mongo --------"
    ppp Schedule.first
    Schedule.pull( {name: 'George'}, { periods: { text: 'period 1'} } ) #remove embedded document in MongoDB
    puts "schedule after pulling period 1 via Mongo --------"
    ppp Schedule.first
  end
end 
```

输出

```
Run options: --name=test_update_and_remove_embedded_documents

# Running tests:

schedule with three periods --------
#<Schedule _id: BSON::ObjectId('4ff732e77f11ba6fe9000001'), active: false, name: "George", periods: [
 #<Period _id: BSON::ObjectId('4ff732e77f11ba6fe9000002'), finish: Fri, 06 Jul 2012 13:00:00 UTC +00:00, number: 1, start: Fri, 06 Jul 2012 12:00:00 UTC +00:00, text: "period 1">,
 #<Period _id: BSON::ObjectId('4ff732e77f11ba6fe9000003'), finish: Fri, 06 Jul 2012 14:00:00 UTC +00:00, number: 2, start: Fri, 06 Jul 2012 13:00:00 UTC +00:00, text: "period 2">,
 #<Period _id: BSON::ObjectId('4ff732e77f11ba6fe9000004'), finish: Fri, 06 Jul 2012 16:00:00 UTC +00:00, number: 3, start: Fri, 06 Jul 2012 14:00:00 UTC +00:00, text: "period 3">]>
schedule after removing period 2 in Ruby --------
#<Schedule _id: BSON::ObjectId('4ff732e77f11ba6fe9000001'), active: false, name: "George", periods: [
 #<Period _id: BSON::ObjectId('4ff732e77f11ba6fe9000002'), finish: Fri, 06 Jul 2012 13:00:00 UTC +00:00, number: 1, start: Fri, 06 Jul 2012 12:00:00 UTC +00:00, text: "period 1">,
 #<Period _id: BSON::ObjectId('4ff732e77f11ba6fe9000004'), finish: Fri, 06 Jul 2012 16:00:00 UTC +00:00, number: 3, start: Fri, 06 Jul 2012 14:00:00 UTC +00:00, text: "period 3">]>
schedule after updatting period 1 via Mongo --------
#<Schedule _id: BSON::ObjectId('4ff732e77f11ba6fe9000001'), active: false, name: "George", periods: [
 #<Period _id: BSON::ObjectId('4ff732e77f11ba6fe9000002'), finish: Fri, 06 Jul 2012 14:00:00 UTC +00:00, number: 1, start: Fri, 06 Jul 2012 12:00:00 UTC +00:00, text: "period 1">,
 #<Period _id: BSON::ObjectId('4ff732e77f11ba6fe9000004'), finish: Fri, 06 Jul 2012 16:00:00 UTC +00:00, number: 3, start: Fri, 06 Jul 2012 14:00:00 UTC +00:00, text: "period 3">]>
schedule after pulling period 1 via Mongo --------
#<Schedule _id: BSON::ObjectId('4ff732e77f11ba6fe9000001'), active: false, name: "George", periods: [
 #<Period _id: BSON::ObjectId('4ff732e77f11ba6fe9000004'), finish: Fri, 06 Jul 2012 16:00:00 UTC +00:00, number: 3, start: Fri, 06 Jul 2012 14:00:00 UTC +00:00, text: "period 3">]>
.

Finished tests in 0.038952s, 25.6726 tests/s, 51.3452 assertions/s.

1 tests, 2 assertions, 0 failures, 0 errors, 0 skips 
```

# javascript - 将 json 展平为 csv 格式

> ID：11332530
> 
> 赞同：4
> 
> 时间：2012-07-04T16:11:23.237
> 
> 标签：javascript, arrays, json, csv, hash

我正在尝试根据用户选择的字段将 json 值转换为平面 csv。我的 json 看起来像

```
var data = {
"_index": "test",
"_type": "news",
"_source": {
    "partnerName": "propertyFile 9",
    "relatedSources": "null",
    "entityCount": "50",
    "Categories": {
        "Types": {
            "Events": [{
                "count": 1,
                "term": "Time",
                "Time": [{
                    "term": "Dec 9",
                    "Dec_9": [{
                        "count": 1,
                        "term": "2012"
                    }]
                    }]
                }, {
                "count": 4,
                "term": "News",
                "News": [{
                    "term": "Germany",
                    "Germany": [{
                        "count": 1,
                        "term": "Election"
                    }],
                    "currency": "Euro (EUR)"
                }, {
                    "term": "Egypt",
                    "Egypt": [{
                        "count": 1,
                        "term": "Revolution"
                    }]
                    }]
                }]
            }
    }
}}; 
```

我已经能够收集所有出现的值并将其存储为 csv，但我想从根本身保存详细信息..

如果我选择时间，csv 输出应该是这样的，

```
"test", "news", "propertyFile 9","null", "50", "Events": "Time", "Dec 9", "2012" 
```

是否可以展平 json .. 我将添加 json fiddle 链接以显示我已经用这个东西到达了哪里.. [http://jsfiddle.net/JHCwM/](http://jsfiddle.net/JHCwM/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:20:57.210

您的`data`值不是 JSON（字符串） - 它是一个对象。有很多方法可以“展平”这个对象，这个小功能可能会有所帮助：

```
var recMap = function(obj) {
  return $.map(obj, function(val) { 
    return typeof val !== 'object' ? val : recMap(val); 
  });
} 
```

这是它[的](http://jsfiddle.net/ybXTQ/)使用方法。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-10T17:32:06.573

这是将对象展平为键/值对的另一种方法，其中键是属性的完整路径。

```
let data = {
  pc: "Future Crew",
  retro: {
    c64: "Censor Design",
    amiga: "Kefrens"
  }
};

let flatten = (obj, path = []) => {
  return Object.keys(obj).reduce((result, prop) => {
    if (typeof obj[prop] !== "object") {
      result[path.concat(prop).join(".")] = obj[prop];
      return result;
    }
    return Object.assign(result, flatten(obj[prop], path.concat(prop), result));
  }, {});
}

console.log(
  flatten(data)
);
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-01-05T16:04:41.160

有一个 npm 库，有很多选项：[https ://mircozeiss.com/json2csv/](https://mircozeiss.com/json2csv/)

```
# Global install so it can be called from anywhere
$ npm install -g json2csv

## Generate CSV file
$ json2csv -i data.json -o out.csv --flatten-objects
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T12:45:09.700

尝试以下操作：

[http://codebeautify.org/view/jsonviewer](http://codebeautify.org/view/jsonviewer)

使用“导出到 CSV”按钮

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T16:17:54.597

试试看这里：

[http://www.zachhunter.com/2011/06/json-to-csv/](http://www.zachhunter.com/2011/06/json-to-csv/)

和这里：

[如何将 JSON 转换为 CSV 格式并存储在变量中](https://stackoverflow.com/questions/8847766/how-to-convert-json-to-csv-format-and-store-in-a-variable)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-09-08T11:46:53.050

检查这个以展平Json

```
// Convert Nested Json to Flat Json
// Check the final json in firebug console.
var fullData = {"data":[{"Vehicle":"BMW","Date":"30, Jul 2013 09:24 AM","Location":"Hauz Khas, Enclave, New Delhi, Delhi, India","Speed":42,"Children":[{"Vehicle":"BMW","Date":"30, Jul 2013 09:24 AM","Location":"Hauz Khas, Enclave, New Delhi, Delhi, India","Speed":42,"Children":[{"Vehicle":"BMW","Date":"30, Jul 2013 09:24 AM","Location":"Hauz Khas, Enclave, New Delhi, Delhi, India","Speed":42,"Children":[]}]},{"Vehicle":"Honda CBR","Date":"30, Jul 2013 12:00 AM","Location":"Military Road,  West Bengal 734013,  India","Speed":0,"Children":[]}]},{"Vehicle":"Honda CBR","Date":"30, Jul 2013 12:00 AM","Location":"Military Road,  West Bengal 734013,  India","Speed":0,"Children":[]},{"Vehicle":"Supra","Date":"30, Jul 2013 07:53 AM","Location":"Sec-45, St. Angel's School, Gurgaon, Haryana, India","Speed":58,"Children":[]},{"Vehicle":"Land Cruiser","Date":"30, Jul 2013 09:35 AM","Location":"DLF Phase I, Marble Market, Gurgaon, Haryana, India","Speed":83,"Children":[]},{"Vehicle":"Suzuki Swift","Date":"30, Jul 2013 12:02 AM","Location":"Behind Central Bank RO, Ram Krishna Rd by-lane, Siliguri, West Bengal, India","Speed":0,"Children":[]},{"Vehicle":"Honda Civic","Date":"30, Jul 2013 12:00 AM","Location":"Behind Central Bank RO, Ram Krishna Rd by-lane, Siliguri, West Bengal, India","Speed":0,"Children":[]},{"Vehicle":"Honda Accord","Date":"30, Jul 2013 11:05 AM","Location":"DLF Phase IV, Super Mart 1, Gurgaon, Haryana, India","Speed":71,"Children":[]}]}
var finalData = [];
loopJson(fullData.data);
function loopJson(data) {
    $.each(data, function(i, e) {
        if (e.Children.length>0) {
            var ccd = e.Children;
            delete e.Children;
            finalData.push(e);
            loopJson(ccd);
        } else {
            delete e.Children;
            finalData.push(e);
        }
    });
}
console.log(finalData);
```

这是Js小提琴链接[http://jsfiddle.net/2nwm43yc/](http://jsfiddle.net/2nwm43yc/)

# jquery - jQuery 移动（点击事件）

> ID：11332533
> 
> 赞同：4
> 
> 时间：2012-07-04T16:11:29.870
> 
> 标签：jquery, events, mobile, button, click

我正在开发智能手机混合应用程序。

我正在尝试`<div>`用`slideDown`/隐藏/显示一个`slideUp`。

当我单击按钮时，菜单`<div>`应该根据上下文隐藏/显示。一切在我的电脑上运行良好，但在我的手机上根本无法运行，没有任何反应。

这是我的 HTML 代码

```
<a class="btnMenuDyn" data-role="button">Masquer le menu</a> 
```

这里是我的 jQuery 移动代码：

```
$(document).bind('pageinit', function(e){

// définition des variables
var btnMenuDyn = $('a.btnMenuDyn'),
    menuDyn = $('div.menuDyn');

$(btnMenuDyn).bind('click', function(){

    // condition pour afficher ou non le menu
    if ($(menuDyn).hasClass("menuDynHide"))
    {
        $(menuDyn).slideDown().removeClass("menuDynHide");
    }
    else{
        $(menuDyn).slideUp().addClass("menuDynHide");
    }

});
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T16:34:22.027

这个问题是手机不支持点击他们使用 touchstart 和 touchend 所以可以跟踪移动如果你仍然想在电脑上测试你可以这样做

```
$(btnMenuDyn).bind('touchstart mousedown', function(event){
    event.preventDefault();
    if ($(menuDyn).hasClass("menuDynHide"))
    {
        $(menuDyn).slideDown().removeClass("menuDynHide");
    }
    else{
        $(menuDyn).slideUp().addClass("menuDynHide");
    }

}); 
```

浏览器中具有相同答案的另一个问题[jquery touchstart](https://stackoverflow.com/questions/9389968/jquery-touchstart-in-browser)

更多信息可以在[http://backtothecode.blogspot.com/2009/10/javascript-touch-and-gesture-events.html找到](http://backtothecode.blogspot.com/2009/10/javascript-touch-and-gesture-events.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:22:20.693

我建议使用`on()`而不是`bind()`

既然你这样做了：

```
var btnMenuDyn = $('a.btnMenuDyn') 
```

`btnMenuDyn`是一个 jquery dom 元素，所以改变这个：

```
if ($(menuDyn).hasClass("menuDynHide")) 
```

对此

```
if (menuDyn.hasClass("menuDynHide")) 
```

最好像这样声明 jquery dom 元素：

```
var $btnMenuDyn = $('a.btnMenuDyn') 
```

# java - 如何在java方法中将数组作为参数传递？

> ID：11332535
> 
> 赞同：11
> 
> 时间：2012-07-04T16:12:00.590
> 
> 标签：java, arrays, methods, parameters

代码：

```
Object[] a={ myObject};
someMethod(Object ...arg); 
```

当我尝试时：

```
someMethod ( {myObject} ); 
```

我在 Eclipse 中收到错误。

但当：

```
someMethod ( a ); 
```

一切都好。为什么会有这种差异？谢谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-04T16:14:28.437

因为`{ myObject }`语法是[特殊的语法糖](http://docs.oracle.com/javase/specs/jls/se7/html/jls-10.html#jls-10.6)，仅在初始化数组变量时适用。这是因为赋值本身缺少类型信息；但在赋值的特殊情况下，类型是完全从变量中推断出来的。

在第一个示例中，编译器知道您要分配给`a`（这是一个`Object[]`），因此允许使用此语法。在后者中，您没有初始化变量（并且由于 Java 类型推断的弱点，它甚至也无法完全计算出参数分配的上下文）。所以它不会知道数组应该是什么类型，即使它可以明确地确定这就是你想要做的（而不是例如声明一个块）。

打电话

```
someMethod ( new Object[] { myObject } ) 
```

如果您想在不使用变量的情况下就地定义数组，则可以使用。

* * *

虽然上面回答了您的问题，但我注意到您调用的方法是[*可变参数*](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)，而不是明确需要数组参数。所以在这种情况下，你可以简单地调用

```
someMethod(myObject); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-04T16:13:23.413

```
someMethod(new Object[] { "" }); 
```

应该做的伎俩！

# forms - 查找客户类型并直接获取相关信息

> ID：11332542
> 
> 赞同：1
> 
> 时间：2012-07-04T16:12:40.993
> 
> 标签：forms, login, expressionengine

我正在开发一个向零售客户和批发客户销售一些饮料的网站。

我想在登录页面中保留一个登录表单，以帮助客户根据他们的客户类型（零售或批发）访问网站

我使用了 member:log in_form 并检查了我的 member_group。它是“1”，因为我已经登录到我的系统。

这在 EE 中是否可行：为零售创建一个按钮，为批发创建一个按钮。然后，当客户单击按钮时，系统会选择客户选项并使用下面的代码片段授予对相关成员组的访问权限。

```
{if member_group == 7}
  Access to Retail group
{/if: elseif member_group == 8}
  Access to wholesale group
{if:else}
  Welcome to our site.
{/if} 
```

如果不可能，请引导我走上正确的道路。我是 EE 的新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:29:15.563

您的建议正是这样做的方法，只需对代码稍作改动：

```
{if member_group == 7}
  Access to Retail group
{if:elseif member_group == 8}
  Access to wholesale group
{if:else}
  Welcome to our site.
{/if} 
```

请注意第 3 行的变化——只是一些错别字。

高级条件句的速度是出了名的慢，因此请查看 Mark Croxton 的 Switchee 以了解速度。您可以更轻松地创建整个块并使用 Switchee 对它们进行整体测试，并且总体上比在每个组件的基础上工作要快得多。

# algorithm - 计算算法的时间和空间复杂度

> ID：11332544
> 
> 赞同：-3
> 
> 时间：2012-07-04T16:12:49.197
> 
> 标签：algorithm

我需要对一些排序算法进行一些基准测试并比较那里的性能。所以我需要问的是是否有任何工具可以帮助监控程序的时间和空间复杂性。我确实试图在谷歌上找到，但搜索结果并没有引导我找到正确的方向。提前谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:23:47.473

正如@OliCharlesworth 已经指出的那样，您的问题与时间/空间“复杂性”无关：时间复杂度是您的算法在理想计算模型（如[RAM 机器](http://en.wikipedia.org/wiki/Random_access_machine)或[图灵](http://en.wikipedia.org/wiki/Universal_Turing_machine)机器）中采取多少步的渐近度量。

您真正想要做的只是测量算法的**具体实现所占用的时间和空间量。**当然，这取决于您使用哪种语言来执行此操作。[如果您正在使用可编译为可执行文件的东西，您可能会对Valgrind](http://valgrind.org/)工具套件感兴趣，特别是 Massif（内存分析器）和 Callgrind（时间分析器）。

# ios - iOS如何做预填充Core数据？

> ID：11332556
> 
> 赞同：3
> 
> 时间：2012-07-04T16:14:09.197
> 
> 标签：ios, xcode, core-data, ios5

我需要我的应用程序工作如下：

1-用户下载并启动应用程序。

2- 应用程序将自动用特定记录填充（基于核心数据）。3-应用程序可以正常工作。

4-当用户关闭应用程序并重新启动它时。

5_应用程序**不会**自动用特定记录填充核心数据，因为它已经存在。

6-用户将无法添加/删除/更新数据。

是否有一种仅使用核心数据并被 Apple 接受的好技术来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:14:50.477

1.  在模拟器中填充数据
2.  从模拟器文件夹复制 SQLITE 数据库
3.  将数据库作为资源添加到您的项目中。
4.  在初始化你的核心数据堆栈之前做这样的事情：

代码：

```
// Put down default db if it doesn't already exist
NSFileManager *fileManager = [NSFileManager defaultManager];
if (![fileManager fileExistsAtPath:storePath]) {
    NSString *defaultStorePath = [[NSBundle mainBundle] 
                                  pathForResource:@"MyDataFile" ofType:@"sqlite"];
    if (defaultStorePath) {
        [fileManager copyItemAtPath:defaultStorePath toPath:storePath error:NULL];

    }
} 
```

未显示，但很重要：根据 App Store 指南，您预填充数据的所有文件都**必须**标记为“不备份”，否则您将被拒绝。有关如何执行此操作的一些详细信息，请参阅此 SO 问题：[使用此代码从 iCloud 备份中排除文件后，为什么我的应用程序仍然被拒绝？](https://stackoverflow.com/questions/10588652/why-was-my-application-still-rejected-after-excluding-files-from-icloud-backup-u)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T17:02:46.287

我可以告诉你一种非常简单的方法。在应用程序委托中，在 NSUserDefaults 中创建一个变量，并在第一次加载应用程序时更改其值。然后根据 NSUserDefaults 的值，在 Core Data 存储中填充您想要的数据。这只会发生一次，因为 NSUserDefaults 变量的值不会再次改变。

# javascript - 如何检查所有孩子检查

> ID：11332557
> 
> 赞同：-1
> 
> 时间：2012-07-04T16:14:09.760
> 
> 标签：javascript, jquery

嗨，我有以下结构：

```
<ul class="main">
  <li class="toggle">
   <input type="checkbox"> information
  </li>
  <ul>
<li class="modulo">
   <input type="checkbox"> General
</li>
<ul>
   <li class="example1">
    <input type="checkbox">
   </li>
   <li class="example2">
    <input type="checkbox">
   </li>
</ul>
  </ul>
</ul> 
```

我现在需要知道当用户选中主父复选框时如何将所有子复选框设置为“选中”

我正在使用 jQuery，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:19:01.800

您可以更改标记，如下所示：

```
<ul class="main">
  <li class="toggle">
   <input type="checkbox"> information
    <ul>
     <li class="example1">
      <input type="checkbox">
     </li>
     <li class="example2">
      <input type="checkbox">
     </li>
   </ul>
  </li>   

  <li class="modulo">
   <input type="checkbox"> General
   <ul>
     <li class="example1">
      <input type="checkbox">
     </li>
     <li class="example2">
      <input type="checkbox">
     </li>
   </ul>
  </li>
</ul> 
```

***jQuery***

```
$('ul.main > li > :checkbox').change(function() {
    $(this).next('ul').find(':checkbox').prop('checked', this.checked);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:19:09.553

如果您更正标记：

```
<ul class="main">
    <li class="toggle">
        <input type="checkbox"> information
        <ul>
            <li class="modulo">
            <input type="checkbox"> General
            <ul>
                <li class="example1">
                <input type="checkbox">
                </li>
                <li class="example2">
                <input type="checkbox">
                </li>
            </ul>
            </li>
        </ul>
    </li>
</ul> 
```

...应该这样做：

```
$(".main input[type='checkbox']").click(function() {
    $(this).parent().find("input[type='checkbox']").prop("checked", this.checked);
}); 
```

[实例](http://jsbin.com/eyozut)| [资源](http://jsbin.com/eyozut/edit)

然后您将要处理相反的情况（如果您取消选中祖先，则取消选中父级，以便不再检查所有祖先），但我将其留给您作为练习。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-04T16:23:03.267

这会切换检查：http: [//jsfiddle.net/](http://jsfiddle.net/)

我建议你缩进你的代码以便更容易阅读。

# c# - 回发导致页面像第一次一样加载

> ID：11332564
> 
> 赞同：0
> 
> 时间：2012-07-04T16:15:06.200
> 
> 标签：c#, asp.net, postback

我在用：

```
Response.Redirect(Request.RawUrl); 
```

在我的网页上强制回发。但是，代码中的执行路径就像是第一次加载页面一样。我如何引起普通的回发？

任何建议表示赞赏。

问候。

编辑：

这篇文章似乎吸引了很多负面情绪。在 Google 搜索强制**回**发后，我从 Stock Overflow 帖子中获得了这种方法。因此，反对者可能应该在那个帖子而不是我的帖子上表达他们的挫败感。

为了澄清对我的问题的一些误解：

我有一个事件 Button_Click，其中包含方法主体中的逻辑——显然。然而，代码的执行流程是这样的：

Button_Click --> Page_Load (IsPostBack == true) --> Button_Click body --> 执行结束。

所以我的问题是 Button_Click 正文中的任何逻辑都没有显示在页面上，因为回发是在 Button_Click 正文中的任何代码执行之前完成的。

编辑：

这是事件：

```
protected void RedoEdits_Click(Object sender, EventArgs e)
{
    // Goes to Page_Load here with IsPostBack == true
    string trendsFileLocation = currDir + "\\" + reportDir + "\\" + trendsFile;
    string messagesFileLocation = currDir + "\\" + reportDir + "\\" + messagesFile;
    if (File.Exists(trendsFileLocation))
    {
        File.Delete(trendsFileLocation);
    }
    if (File.Exists(messagesFileLocation))
    {
        File.Delete(messagesFileLocation);
    }
    trendsXML.Clear();
    editMode = "redo";
} 
```

IsPostBack == true 的代码片段：

```
if (editMode.Equals("redo"))
{
    editMode = "";
    ViewReport_Click(null, null);
} 
```

代码片段永远不会被执行，因为回发首先发生，跳过片段，因为editMode！=重做，然后以RedoEdits_Click的主体结束，最终设置editMode ==重做，但由于回发已经发生，我们没有到达ViewReport_Click。

顺便说一句，editMode 是一个会话变量，因此它会持续存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:17:23.957

那是因为重定向确实会像第一次一样加载页面。它根本没有发回。这可能在像按钮单击这样的事件处理程序中，但是一旦您在该回发事件处理程序中重定向，它就不再在同一实例的回发中，您正在从头开始重新加载页面。

例子

```
private void MyButton_Click(Object sender, EventArgs e)
{
   lblStatus.Text = "Button Clicked!";  // still within a postback
   Response.Redirect(Request.RawUrl);  // now leaving the postback.  At this point, exexution stops and the page is loaded from scratch, as if we're not in a postback.

   lblStatus.Text = "Done posting back";  // This code will never execute.,  Response.Redirect throws a System.ThreadAbortException, and by default, code execution stops once Response.Redirect happens.

} 
```

如果您想触发真正的回发而不从头开始加载页面，请在屏幕上放置一个按钮或一些控件并使用它来触发真正的回发，并且不要调用 Response.Redirect()。

* * *

由于下面的hte评论而添加：

熟悉[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。如果您在 Page_Load 中发生了您不想在回发中发生的事情，那么您应该用

```
if(!Page.IsPostback)
{
  // stuff that should only happen on initial load here.
} 
```

或者考虑在不同的事件中做这些事情。例如，如果您正在快速创建控件，则应在 Page_Init 中完成，因为它发生在应用 ViewState 之前。如果这样做，则在每次回发时在 Page_Init 中创建控件，然后从 Viewstate 应用值，然后到达 Page_Load，您可以在其中使用它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:19:00.693

您不能从代码隐藏中强制回发。你会怎么做？例如，当您单击按钮时会发生回发。即使可以从代码隐藏中强制它（当然有办法），你会得到什么？只要调用一个你想要的方法，不要做这种愚蠢的事情。

回发 = 将数据/请求回发到同一页面。重定向显然是行不通的。

**基于 OPs 编辑的编辑**：****

 **您需要重新考虑您的工作流程，所以也许可以这样做：

```
protected void RedoEdits_Click(Object sender, EventArgs e)
{
    // Goes to Page_Load here with IsPostBack == true
    string trendsFileLocation = currDir + "\\" + reportDir + "\\" + trendsFile;
    string messagesFileLocation = currDir + "\\" + reportDir + "\\" + messagesFile;
    if (File.Exists(trendsFileLocation))
    {
        File.Delete(trendsFileLocation);
    }
    if (File.Exists(messagesFileLocation))
    {
        File.Delete(messagesFileLocation);
    }
    trendsXML.Clear();

    ViewReport_Click(null, null);
} 
```

尝试模仿回发确实不是一个好主意。

或者，也许更好的方法 - 定义一个新事件，比如说 EditModeActive（或任何你想要的名称），每次你分配 editMode = "redo" 时都会启动它。然后只需订阅此活动并做任何您想做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T15:25:36.747

我需要重新加载页面来恢复我原始的、未经编辑的 HTML。编辑表格的过程取代了一些 InnerHTML，我需要重新开始重新进行编辑。所以我只是移动了在 IsPostBack 的代码中重做编辑所需的逻辑！= true 并留在 Response.Redirect(Request.RawUrl)。奇迹般有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T16:17:21.413

Response.Redirect() 不会导致任何回发，因为它只向服务器发送一个简单的 GET 请求。**

# drupal - 如何在 Drupal 视图中显示上传的图片？

> ID：11332565
> 
> 赞同：0
> 
> 时间：2012-07-04T16:15:06.483
> 
> 标签：drupal, drupal-views

我正在用 Drupal 建立一个网站。我想展示一些关于艺术眼镜的信息，包括一些图片。当我定义要在相应视图中显示的字段并将图像作为内容包含在“字段”部分中时，相应的查询将返回图像的路径，而不是图像本身，这是想要的行为。我想知道一种在 Drupal 中创建视图的方法，它允许我显示图像而不是它们的路径。如果问题不够清楚，请告诉我，我帮助您理解。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:15:55.767

我在 Views 上遇到过类似的问题，但实际上希望您遇到的行为。只要你有图像的路径，你就可以把它写到包裹在 HTML`<img>`标签中的 View 的输出中。例如，`<img src="[image path your view is outputting]" alt="">`. 这应该为您显示图像。

根据您的 Drupal 版本，有一些很棒的附加模块可以使视图更加灵活。

[这个 Views PHP 模块](http://drupal.org/project/views_php)适用于 Drupal 7（我没有亲自测试过），并允许您将常规 PHP 代码合并到 Views 输出中。我在 Drupal 6 中广泛使用了[Views Custom Field](http://drupal.org/project/views_customfield/)，效果很好。

# xcode - 在 UIWebView 中加载单个 div

> ID：11332567
> 
> 赞同：1
> 
> 时间：2012-07-04T16:15:16.113
> 
> 标签：xcode, html, uiwebview

我在互联网上搜索了很多，但我找不到答案，所以我想问你是否有办法在 UIWebView 中只加载网页的一个 div。我认为我应该使用一些注入的 js，但我不知道该怎么做。

# javascript - JavaScript 使用两种方法、两种行为调用 iFrame 位置...为什么

> ID：11332569
> 
> 赞同：0
> 
> 时间：2012-07-04T16:15:21.987
> 
> 标签：javascript, iframe

我有几个项目尝试使用这两行代码来调用 iFrame 的 url。它们在 IE9+ 和 FF 中的行为不同（IE7 和 IE8 与第一行完美配合。我没有在 IE7 和 IE8 中测试过第二行）。

有人知道为什么是这样吗？我想它必须做 IE webkit 之类的？但是，我不确定。

```
// This calls the iFrame once, but if you call it again with this command, it throws
// a null object error
window.frames["el"].location 

//versus 

// This seems to work the same each time.
document.getElementById("el").src 
```

任何见解都会很酷......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:18:42.507

第一种方法，`frames`直接访问一个窗口，并读取实时位置属性。它只有一个限制：当帧的来源不同时，它会失败。

第二种方法读取帧的 src**属性**。当框架导航离开时，它不会更新。因此，该属性是不可靠的。

另一种选择是`location`从框架的`contentWindow`属性中读取。它与第一种方法具有相同的限制，但您不必将`name`属性附加到框架。

```
document.getElementById("el").contentWindow.location 
```

# tsql - TSQL - 查询 | 一步一步非常快 - 但作为一个查询非常慢

> ID：11332570
> 
> 赞同：0
> 
> 时间：2012-07-04T16:15:26.720
> 
> 标签：tsql, sql-server-2008-r2

有人可以告诉我区别吗...我不知道是什么问题，也不知道如何用几句话来描述它，以便在上面搜索stackoverflow，）........

我的 SQL Server 2008 R2 x64 上的这个选择大约需要**1 分钟和 16 秒**：

```
select T_MESSAGE.MSG_GUID from T_MESSAGE
where 
T_MESSAGE.MSG_BODY like @searchpattern
or T_MESSAGE.MSG_COMMENT like @searchpattern
or T_MESSAGE.MSG_SEDERDISPLAYINFORMATION like @searchpattern 
or (select COUNT(*) from T_RECIPIENT 
          join T_RECIPIENT_ANDROID on T_RECIPIENT_ANDROID.RAND_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_ANDROID.RAND_DEVICETOKEN like @searchpattern) > 0   
or (select COUNT(*) from T_RECIPIENT 
    join T_RECIPIENT_IOS on T_RECIPIENT_IOS.RIOS_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_IOS.RIOS_DEVICETOKEN like @searchpattern) > 0
or (select COUNT(*) from T_RECIPIENT 
    join T_RECIPIENT_SMS on T_RECIPIENT_SMS.RSMS_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_SMS.RSMS_PHONENUMBER like @searchpattern) > 0
or (select COUNT(*) from T_RECIPIENT 
    join T_RECIPIENT_SMTP on T_RECIPIENT_SMTP.RSMTP_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_SMTP.RSMTP_ADDRESS like @searchpattern) > 0 
```

这段代码只需要**几毫秒**..

```
select T_MESSAGE.MSG_GUID from T_MESSAGE
where 
T_MESSAGE.MSG_BODY like @searchpattern
or T_MESSAGE.MSG_COMMENT like @searchpattern
or T_MESSAGE.MSG_SEDERDISPLAYINFORMATION like @searchpattern 
or (select COUNT(*) from T_RECIPIENT 
          join T_RECIPIENT_ANDROID on T_RECIPIENT_ANDROID.RAND_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_ANDROID.RAND_DEVICETOKEN like @searchpattern) > 0   
or (select COUNT(*) from T_RECIPIENT 
    join T_RECIPIENT_IOS on T_RECIPIENT_IOS.RIOS_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_IOS.RIOS_DEVICETOKEN like @searchpattern) > 0
or (select COUNT(*) from T_RECIPIENT 
    join T_RECIPIENT_SMS on T_RECIPIENT_SMS.RSMS_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_SMS.RSMS_PHONENUMBER like @searchpattern) > 0 
```

....是的！你说得对，我刚刚删除了我的“或块”之一......但我删除了哪一个并不重要

如果我有超过 3 个（！）查询需要很长时间（顺便说一句：如果一个块的结果是 0 并且不仅结果而且表也是空的）

而现在来了……

这一个也非常快（**不到一秒**），我已经包含了所有的“或块”

```
declare @searchpattern as varchar(MAX)
set @searchpattern = 'mysearchstring'

declare @guidTable table
( 
    MSG_GUID UniqueIdentifier
)

insert into @guidTable 
select T_MESSAGE.MSG_GUID from T_MESSAGE
where 
T_MESSAGE.MSG_BODY like @searchpattern
or T_MESSAGE.MSG_COMMENT like @searchpattern
or T_MESSAGE.MSG_SENDERDISPLAYINFORMATION like @searchpattern 
or (select COUNT(*) from T_RECIPIENT 
    join T_RECIPIENT_ANDROID on T_RECIPIENT_ANDROID.RAND_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_ANDROID.RAND_DEVICETOKEN like @searchpattern) > 0   

insert into @guidTable 
select T_MESSAGE.MSG_GUID from T_MESSAGE 
where
(select COUNT(*) from T_RECIPIENT 
    join T_RECIPIENT_IOS on T_RECIPIENT_IOS.RIOS_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_IOS.RIOS_DEVICETOKEN like @searchpattern) > 0 

insert into @guidTable 
select T_MESSAGE.MSG_GUID from T_MESSAGE 
where
(select COUNT(*) from T_RECIPIENT 
    join T_RECIPIENT_SMS on T_RECIPIENT_SMS.RSMS_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_SMS.RSMS_PHONENUMBER like @searchpattern) > 0

insert into @guidTable 
select T_MESSAGE.MSG_GUID from T_MESSAGE 
where 
(select COUNT(*) from T_RECIPIENT 
    join T_RECIPIENT_SMTP on T_RECIPIENT_SMTP.RSMTP_REC_GUID = T_RECIPIENT.REC_GUID 
    where T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID 
    and T_RECIPIENT_SMTP.RSMTP_ADDRESS like @searchpattern) > 0

select * from @guidTable 
```

...我只是拆分选择并将结果查询逐个查询写入一个新的声明表...

目前我通过在 sql 中创建一个函数来解决这个任务 - 但谁能告诉我可能是什么问题？

（顺便说一句：数据库目前只有大约 5000 个条目）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:49:34.027

这应该更快使用`exists`而不是获取您不需要的计数：

```
select T_MESSAGE.MSG_GUID from T_MESSAGE 
where  
T_MESSAGE.MSG_BODY like @searchpattern 
or T_MESSAGE.MSG_COMMENT like @searchpattern 
or T_MESSAGE.MSG_SEDERDISPLAYINFORMATION like @searchpattern  
or exists (select 42 from T_RECIPIENT  
          join T_RECIPIENT_ANDROID on T_RECIPIENT_ANDROID.RAND_REC_GUID = T_RECIPIENT.REC_GUID  
    and T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID  
    and T_RECIPIENT_ANDROID.RAND_DEVICETOKEN like @searchpattern)
or exists (select 42 from T_RECIPIENT  
    join T_RECIPIENT_IOS on T_RECIPIENT_IOS.RIOS_REC_GUID = T_RECIPIENT.REC_GUID  
    and T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID  
    and T_RECIPIENT_IOS.RIOS_DEVICETOKEN like @searchpattern)
or exists (select 42 from T_RECIPIENT  
    join T_RECIPIENT_SMS on T_RECIPIENT_SMS.RSMS_REC_GUID = T_RECIPIENT.REC_GUID  
    and T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID  
    and T_RECIPIENT_SMS.RSMS_PHONENUMBER like @searchpattern)
or exists (select 42 from T_RECIPIENT  
    join T_RECIPIENT_SMTP on T_RECIPIENT_SMTP.RSMTP_REC_GUID = T_RECIPIENT.REC_GUID  
    and T_RECIPIENT.REC_MSG_GUID = T_MESSAGE.MSG_GUID  
    and T_RECIPIENT_SMTP.RSMTP_ADDRESS like @searchpattern) 
```

您还应该确认适当的索引支持连接。

# visual-studio - Visual Studio ItemsTemplate - $safeitemrootname$ 没有达到预期的效果

> ID：11332572
> 
> 赞同：1
> 
> 时间：2012-07-04T16:15:36.017
> 
> 标签：visual-studio, parameters, itemtemplate, visual-studio-templates

我正在尝试创建一个包含多个文件的 ItemTemplate。到目前为止，一切都很好。我的两个文件都已创建并且它们具有正确的名称。现在，其中一个被命名为用户输入的名称。另一个必须使用该名称。我认为这`$safeitemrootname$`是应该做的。我如何得到与`$safeitemname$`. 我能怎么做？

谢谢

# windows - VisualC++ /vmg /vms 的 G++ 等价物

> ID：11332585
> 
> 赞同：2
> 
> 时间：2012-07-04T16:16:14.757
> 
> 标签：windows, visual-c++, g++, pointer-to-member

我想将应用程序的插件编译为动态库。通常，插件是用 VisualC++ 编译的，但我想用 G++。SDK 文档明确指出

> 在 C++ tab/C++ 语言 (/vmg /vms) 中，Pointer-to-member 表示的编译器选项**必须设置为“General-Purpose Always”和“Point to Single-Inheritance Classes”。**如果不设置插件**会**立即崩溃！

事实上，只要我将值从插件传递到应用程序，它就会立即崩溃。`/vmg /vms`是否有任何选项导致与VisualC++中相同的行为？

* * *

**平台**：Windows 7 x64
**编译器**：MingW32 G++ 4.6.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T18:22:45.253

由于指向成员的表示是一个实现细节，而且 GCC ABI 的设计不是为了与 MSVC 兼容，所以永远不会有等价物。

只要工作取决于特定于实现（未指定）的细节，如指针表示，您将无法混合使用所述编译器编译的二进制文件。

# java - Java中的DSA数据转换

> ID：11332589
> 
> 赞同：-1
> 
> 时间：2012-07-04T16:16:39.013
> 
> 标签：java, encryption, rsa, dsa

我想检查公钥是否对应于私钥 - 是否正确。

也没有称为 BC 的提供商。我有这个实现，但我不知道 Utils.createFixedRandom() 应该做什么。我没有这样的库和方法。

此外，如果您有一个没有 java.security 的原始实现，那就太棒了。

```
import java.security.KeyPair;
import java.security.KeyPairGenerator;
import java.security.SecureRandom;
import java.security.Signature;

public class BasicDSAExample {
    public static void main(String[] args) throws Exception {
        KeyPairGenerator keyGen = KeyPairGenerator.getInstance("DSA", "BC");
        keyGen.initialize(512, new SecureRandom());
        KeyPair keyPair = keyGen.generateKeyPair();
        Signature signature = Signature.getInstance("DSA", "BC");

        signature.initSign(keyPair.getPrivate(), Utils.createFixedRandom() );
        byte[] message = new byte[] { (byte) 'a', (byte) 'b', (byte) 'c' };
        signature.update(message);
        byte[] sigBytes = signature.sign();

        signature.initVerify(keyPair.getPublic());
        signature.update(message);
        if (signature.verify(sigBytes)) {
            System.out.println("pow");
        } else {
            System.out.println("nie");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:19:02.507

您不能使用[DSA](http://en.wikipedia.org/wiki/Digital_Signature_Algorithm)进行加密和解密，它是一种数字签名算法。数字签名是通过使用签名者的私钥加密消息的散列来创建的，以便可以使用他们的公钥对其进行验证。但是因为它是散列的，所以消息无法恢复。

**在您的编辑之后：**

如果您有私钥和公钥，则无论如何都可以从私钥派生公钥，无需使用密钥和验证任何内容。私钥包含构造 a 的所有信息`KeyPair`，然后该`getPublic()`方法将检索等效的公钥。如果您想查看给定的公钥是否正确，只需与此进行比较。

# image-processing - JPEG伪影检测

> ID：11332590
> 
> 赞同：4
> 
> 时间：2012-07-04T16:16:51.697
> 
> 标签：image-processing

是否有已知的算法可以在不查看图像的情况下以编程方式检测图像质量下降？

我考虑有损重新编码的明显（可见）图像伪影，如颜色失真、边缘噪声、块状等
。例如，从原始源编码的 JPEG 质量 80 的图像很好。

*我希望这是一个正确的地方，但如果版主认为我应该在 DSP stackexange 或类似网站上提问，请重新链接。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-06T15:06:38.877

有一个名为 CMFD（Copy-Move Forgery Detection）的库，它执行伪影检测和其他算法来检测图像伪造。它可从[http://www5.cs.fau.de/research/software/copy-move-forgery-detection/](http://www5.cs.fau.de/research/software/copy-move-forgery-detection/)免费获得。

从我所做的少数测试来看，它确实可以很好地检测到伪造品，但有很多误报。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-07T19:22:48.947

您需要评估用于查找您定义的工件的方法。一旦你有了这些特征，你就需要编写每个方法来找到这些工件。这些方法可能最好用于差异图像 - 原始（或中间）减去编码文件。您可能必须分别分析每个颜色通道。最简单的是一个阈值——编码图像的任何部分是否偏离了某个阈值？对于块状和边缘噪声，我想您可能会使用某种霍夫变换来识别差异图像中的形状/线条，并可能使用小波变换或类似的东西，可以调整到特定的频率模式以挑选出边缘周围的振铃.

**编辑**（回应 klo 的评论）：没有参考，我不确定你是否能够完成你想要的。您仍然可以尝试在单个颜色通道上应用我提到的技术。困难的部分是，如果没有参考，您不一定会测量任何工件，而是测量图像特征。您仍然可以使用一些先验信息，例如任何块状将完全与图像框架定向 - 不旋转。任何真实的图像都不太可能有许多完全以框架为导向的块状特征。您还可以应用边缘查找算法，例如高斯差分或 Canny 边缘检测，然后在定位边缘附近应用小波滤波器以查找振铃。

对于已知的可编程方法，请参阅 python 的 scikits-image（您从您的帖子到邮件列表中了解）或可能具有 Python 绑定的 OpenCV。我不熟悉 Matlab 的功能，但这可能也可以。

# visual-studio-2010 - 如何使用 Visual Studio 代理自动化测试

> ID：11332592
> 
> 赞同：1
> 
> 时间：2012-07-04T16:17:06.937
> 
> 标签：visual-studio-2010, testing

我有一个测试项目，我想在测试服务器上自动化。目前，我已经在本地机器上安装了 Visual Studio 代理（测试控制器、测试代理和测试实验室），因为我希望在接触测试服务器上的任何东西之前先在这里试用一下。

我遇到的问题是我找不到有关使用 Visual Studio 代理工具自动化测试的足够文档。我已经在我的本地机器上成功设置和配置了测试代理和测试控制器，但我不确定我从这里去哪里。测试控制器连接到 Team Foundation Server。我有一个包含在 TFS 中的测试项目 - 我想在其中运行测试。

我尝试启动 VS 测试管理器并试图找到一种从那里运行测试的方法，但我没有成功。

我该怎么做呢？（简单的步骤）

我之前的经验是使用 NUnit，启动自动化测试就像启动命令行 NUnit 程序一样简单，为它提供测试项目的路径和一些其他参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T11:41:53.407

正确设置和配置 Visual Studio 代理后，只需针对连接到测试控制器的 .testsettings 文件运行测试即可。

运行测试时（通过 Visual Studio GUI 或 mstest.exe 命令行程序），活动的 testsettings 文件将在连接到测试控制器的任何测试代理上运行测试。

因此，在自动化测试方面，只需将正确的 testsettings 文件指定为 MSTest.exe 的命令行开关之一。

测试设置文件既可以在 Visual Studio 解决方案中创建，也可以在 Microsoft 测试管理器中创建（也可以使用 MS 测试管理器命令行程序 tcm.exe 安排自动测试）。

要在从 Visual Studio 2010 运行测试时选择要使用的活动测试设置文件，请选择工具栏上的“测试”菜单，然后选择“选择活动测试设置”。

# android - 具有多类型数组的初始化对象

> ID：11332597
> 
> 赞同：0
> 
> 时间：2012-07-04T16:17:43.983
> 
> 标签：android, arrays, json, object

我在 Android 应用程序中使用 JSON 解析器时遇到问题。我从这个平台开始，并希望：

*   从 JSON API 获取一些值（不同类型）
*   轻松地用这些值初始化一个自定义类

因此，在 iOS 应用程序中，我使用 NSDictionnary 将值设置为我的类。有可能在 Java 中做这样的事情吗？

我有我的用户类：

```
public class User {
    protected String id;
    protected GregorianCalendar registredAt;
    protected String username;
    protected String email;
    protected Integer score;
    protected Integer bonus;
    protected Integer sessionsOpened;
    protected Integer sessionsWon;
    protected Team team;
    protected String avatar;
} 
```

当然，我可以创建一个包含每个值的大型构造函数......

```
public User(String id, GregorianCalendar registredAt, String username, String email, Integer score, Integer bonus, Integer sessionsOpened, Integer sessionsWon, Team team, String avatar) {
    this.id = id;
    this.registredAt = registredAt;
    ...
} 
```

但是，要做到这一点，我必须先管理我的 JSONObject 才能初始化我的 User 类......我要做的是用我可以从 JSONObject 获得的多类型值数组初始化这个类......（[转换Json Array 到普通 Java Array](https://stackoverflow.com/questions/3395729/convert-json-array-to-normal-java-array) )

可能吗 ？从 JSONObject 或 JSONArray 获取干净数组的最佳方法是什么？

如果不可能，另一种方法是直接使用 JSONObject 创建用户...

```
public User(JSONObject attributes) {

} 
```

但如果可能的话，我更喜欢 java 数组。

提前谢谢你，鲍比。

# lisp - 允许将特殊形式视为正常值会产生什么后果？

> ID：11332601
> 
> 赞同：1
> 
> 时间：2012-07-04T16:18:00.840
> 
> 标签：lisp, language-implementation, special-form

我发现在 Clojure 中，特殊形式不能作为参数传递或保存在变量中：

```
user=> (defn my-func 
         [op] 
         (op 1 2 3))
#'user/my-func
user=> (my-func +)
6
user=> (my-func if)
java.lang.Exception: Unable to resolve symbol: if in this context (NO_SOURCE_FILE:5)
user=> (def my-if if)
java.lang.Exception: Unable to resolve symbol: if in this context (NO_SOURCE_FILE:9) 
```

在球拍/方案中：

```
> (define (my-func op)
    (op 1 2 3))
> (my-func +)
6
> (my-func if)
  if: bad syntax in: if
> (define my-if if)
  *if: bad syntax in: if 
```

这很酷，我很好，我知道我可以编写一个函数来包装一个特殊的表单，然后传递那个函数。

但我想知道为什么 Lisps 有这个限制，以及允许这样做会产生什么负面影响。他们是否有任何允许这样做的主要方言？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T17:14:40.977

特殊形式不是函数：函数将值作为参数，而特殊形式采用形式。例如，看看你的例子`if`：

```
(if 1 2 3) 
```

好的，这很容易，因为 2 和 3 已经是值。但是这个呢？

```
(define (modadd a b n)
  (if (zero? n) #f (modulo (+ a b) n))) 
```

在这种情况下，`if`实际是接收`#f`and`(modulo (+ a b) n)`作为形式，而不是值。这很重要！`(modulo x n)`如果为 0 将失败`n`：这就是为什么在我们知道它`n`不是 0 之前不对其进行评估的原因。

能够将特殊形式作为一等对象传递的问题在于，高阶函数不能使用可预测的语义调用这些对象：它是一个函数对象，以便您传递值，还是它是一个特殊形式，这样你就可以传递表格了吗？这将是一个*巨大*的混乱。

是的，您可以编写一个封装函数，例如 my `modadd`，它封装`if`. 但是，您无法仅将其重新实现`if`为一个函数，同时仍保留唯一评估一个分支的行为。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-04T18:42:09.440

It makes evaluation more complicated and compilation hard.

If you have a form `(a b c)`, then you need to resolve at runtime the value of `a` and then apply it somehow to the forms `b` and `c`.

The simpler model of a few limited number of special forms and otherwise strict evaluation is then gone.

See also: [FEXPR](http://en.wikipedia.org/wiki/Fexpr)

# javascript - 了解 HTML 5 画布比例和翻译顺序

> ID：11332608
> 
> 赞同：14
> 
> 时间：2012-07-04T16:18:29.897
> 
> 标签：javascript, html, canvas, transform, scale

我正在围绕中心 X，Y 0,0 绘制一些图形。当需要渲染时，我使用翻译重新定位，然后使用缩放使图形填充画布（例如，将所有内容缩放 50%）。

我注意到，无论您调用缩放然后翻译，还是先翻译然后缩放，这都很重要，我无法完全理解它。这是一个问题，因为并非所有东西都适合，但我的心智模型并不完整，因此很难修复它。

有人可以解释为什么比例和翻译调用的顺序很重要吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-04T17:56:10.050

所以让我们在 300x300 的画布上画一个网格：

[http://jsfiddle.net/simonsarris/4uaZy/](http://jsfiddle.net/simonsarris/4uaZy/)

![在此处输入图像描述](../Images/9b62a1b18279d57bddfe230abc1fac01.png)

这会做。没什么特别的。一条红线表示通过 (0,0) 并延伸非常非常远的原点所在的位置，所以当我们翻译它时，我们会看到一些东西。这里的原点是左上角，红线在 (0,0) 处相交。

**下面的所有翻译都发生在我们绘制网格之前，所以我们将移动网格。**这使您可以准确地看到原始点发生了什么。

* * *

因此，让我们将画布平移 100,100，将其向下+向右移动：

![在此处输入图像描述](../Images/0dac92471acbe5b2017cfc4a3c2ca220.png)

[http://jsfiddle.net/simonsarris/4uaZy/1/](http://jsfiddle.net/simonsarris/4uaZy/1/)

所以我们翻译了原点，也就是红色 X 的中心位置。原点现在为 100,100。

* * *

现在我们将平移然后缩放。注意原点是如何与最后一张图像在同一个地方的，一切都只是两倍大。

![在此处输入图像描述](../Images/988af321da5ab2e42a2bcb47d8d71f63.png)

[http://jsfiddle.net/simonsarris/4uaZy/2/](http://jsfiddle.net/simonsarris/4uaZy/2/)

繁荣。原点数仍为 100,100。不过，一切都被夸大了2。原点改变了，然后一切都在原地膨胀。

* * *

现在让我们反过来看它们。这次我们先扩展，所以一切从一开始就很胖：

![在此处输入图像描述](../Images/3f68ac063270bf36e440b785d13a1be1.png)

[http://jsfiddle.net/simonsarris/4uaZy/3/](http://jsfiddle.net/simonsarris/4uaZy/3/)

一切都膨胀了 2。原点在 0,0，它的起点。

* * *

现在我们做一个规模，然后一个翻译。

![在此处输入图像描述](../Images/fdb8896838299e5cd7ab8f8093381afe.png)

[http://jsfiddle.net/simonsarris/4uaZy/4/](http://jsfiddle.net/simonsarris/4uaZy/4/)

我们仍然平移了 100,100，但原点移动了 200,200 实际像素。将此与之前的两个图像进行比较。

这是因为*在缩放之后发生的所有事情都必须进行缩放*，包括额外的变换。因此，在缩放的画布上变换 (100,100) 会导致它移动 200、200。

* * *

这里要记住的要点是，改变转换会影响从那时起绘制（或转换！）的方式。如果缩放 x2，然后平移，则平移将为 x2

如果您想从数学上查看每个步骤发生的情况，我鼓励您查看此处的代码：

[https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js](https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js)

这模仿了画布完成的整个转换过程，让您看到之前的转换如何修改之后的转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:26:46.473

缩放和旋转是相对于原点完成的，因此，例如，如果您的变换有平移，那么这将使顺序变得重要。

这是一本好书： [为什么转型顺序很重要](http://msdn.microsoft.com/en-us/library/windows/desktop/ms533864%28v=vs.85%29.aspx)

# objective-c - 创建可自定义 uiview 的正确方法

> ID：11332621
> 
> 赞同：0
> 
> 时间：2012-07-04T16:19:17.047
> 
> 标签：objective-c, ios

这个问题是关于“风格”的，因为我认为这是一个非常普遍的问题，我正在寻找一个优雅的解决方案。我创建了一些“高级” UIView，并尝试使它们非常可定制。通常我在自定义 init 方法中创建 UIView 结构，但我需要知道 init 方法中所有可自定义参数的值，所以有时我需要一个很长的 init 方法，例如：

initWithFrame:color:font:verticalspace:verylonglist:

我尝试使用委托设计模式，但我还需要在 init 方法中传递委托。

我实际的最佳解决方案是将 init 方法留空，并在“配置”方法中移动有关布局的所有内容。每次我遇到像背景颜色或字体这样的属性时，我都会调用此方法并重建视图。

我认为有一个最好的方法来解决这个问题......我很想看看 UITableView 类的代码，因为使用那个类你可以在 init 方法之外传递一个委托。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:28:17.510

查看类似 a`UIButton`或的内容`UILabel`。它们都有大量可配置的方面，但是要简单地创建其中一个对象的实例，它们只需要很少的信息。

通常，提供一些 init 方法，允许您的类的使用者指定*最少的信息量*以使该类工作。

如果您确实想为消费者提供一种使用一堆值初始化类的方法，请考虑使用某种`initWithDictionary:`带有`NSDictionary`参数的方法。这使您的方法名称保持简短，并允许用户为您的类自定义任意数量的设置。

您还可以考虑为消费者提供一种方法来请求具有一些标准值集的实例。`UITableViewCell`，例如，有一个`initWithStyle:reuseIdentifier:`方法。重要的部分是样式 -`UITableViewCell`提供了几种默认样式，例如`UITableViewCellStyleDefault`和`UITableViewCellStyleSubtitle`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:30:20.423

我不知道这是否是标准/最佳实践方式，但我在这种情况下使用字典并将其传递给`initWithDictionary`初始化程序。也可以创建一个返回“默认设置”类型字典的类方法，然后可以对其进行自定义（和委托集），因此在使用类时不需要指定每个参数。

# c# - 在 C# 中获取推特数据

> ID：11332635
> 
> 赞同：-3
> 
> 时间：2012-07-04T16:20:59.773
> 
> 标签：c#, c#-4.0, twitter, twitter-oauth

我想获得 90 天的转发，在 C# 中提及。我使用[了这个](https://api.twitter.com/1/users/show.json?screen_name=kool_aid_wino)，但它在 90 天内不起作用，并且只返回一条推文。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:45:48.147

您使用的 REST 方法用于获取由用户名（`screen_name`参数）定义的用户的详细信息。它返回用户。

要获得转发，请参阅这些方法：

*   `GET http://api.twitter.com/1/statuses/retweeted_by_me.json`对于经过身份验证的用户转发的推文（[此处](https://dev.twitter.com/docs/api/1/get/statuses/retweeted_by_me)的文档）。
*   `GET http://api.twitter.com/1/statuses/retweeted_by_user.json`对于由随机用户转发的推文（[此处](https://dev.twitter.com/docs/api/1/get/statuses/retweeted_by_user)的文档）。

如需提及，请使用`GET http://api.twitter.com/1/statuses/mentions.json`（[此处](https://dev.twitter.com/docs/api/1/get/statuses/mentions)的文档）。

但是，它会返回最新的推文。90 天的转发和提及可能不足以检索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T20:33:29.493

要获得转发，请参阅这些方法：

获取[http://api.twitter.com/1/statuses/retweeted_by_me.json](http://api.twitter.com/1/statuses/retweeted_by_me.json)以获取经过身份验证的用户转发的推文（此处的文档）。

# authentication - 如何从 OAuth2 获取唯一令牌？

> ID：11332636
> 
> 赞同：1
> 
> 时间：2012-07-04T16:21:24.890
> 
> 标签：authentication, oauth-2.0, google-api

我正在构建一项服务，用户无需创建帐户即可注册，但可以像 Stackoverflow.com 一样使用 Google 帐户

我的问题是 OAuth2 中用户的任何唯一信息永远不会改变，因此我可以将其用作数据库中的用户 ID。

在查看了 Google OAuth2 API 之后，我发现每次建立会话时所有令牌都是任意的。

我想知道诸如 Stackoverflow 之类的网站如何提取用户信息进行注册。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:24:02.833

获取初始访问令牌后，使用`tokeninfo`端点获取`user_id`.

```
https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=" +
     Uri.EscapeDataString(response.AccessToken)) 
```

# javascript - 正则表达式 - 值不等于 0,00

> ID：11332637
> 
> 赞同：0
> 
> 时间：2012-07-04T16:21:25.733
> 
> 标签：javascript, regex, dojo

我有一个正则表达式来验证输入值。

在这一点上，我有：

```
([0-9]{0,3}[.]?)*[0-9]{1,3},[0-9]*|[0-9] 
```

它的工作，但现在我需要添加一个验证以查看该值是否不是 0,00

输入是金额值。可能的值：

```
12,31
1.234,56
1.234.567,89 
```

不可能的值：

```
0,00 
```

我需要在 dijit.form.ValidationTextBox 中使用它。就像是：

```
dijit.byId(nameID).regExp = "([0-9]{0,3}[.]?)*[0-9]{1,3},[0-9]*|[0-9]"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:33:31.340

我认为你必须完全重新考虑你的正则表达式，因为它测试真正的字符串，如“1.23.4,56”和“0”，但我认为这不是你想要的。

尝试这样的事情：

```
(?:(?:[1-9]\d{0,2})(?:\.\d{3})*(?:,\d{2})|0,(?:[1-9]\d|0[1-9])) 
```

[使用RegExr](http://gskinner.com/RegExr/)测试您的正则表达式，但请记住，Javascript 不支持最完整的正则表达式引擎的*所有功能。*事实上，它很穷。

还有一些注意事项：

1.  不要使用标记`[.]`来匹配点。它很慢。只需避开点：`\.`
2.  您可以使用`\d`而不是`[0-9]`简称，也可以在方括号中使用它：`[a-f\d\-]`用于所有十六进制整数字符。

# delphi - 如何创建一个简单的只读 TDataSet 来访问内存结构

> ID：11332638
> 
> 赞同：0
> 
> 时间：2012-07-04T16:21:39.730
> 
> 标签：delphi, delphi-xe2, tdataset

我有一个（几乎）静态和只读的内存结构。我想将其数据呈现​​为 TDataSet 后代，以使我能够使用 DB 网格等来查看/报告数据。我不需要编辑（事实上这是必须禁止的）。我已经看到[了这个 SO question](https://stackoverflow.com/questions/9533760/how-can-i-get-a-dataset-of-in-memory-objects)和其他一些建议，即一些自制代码“书签有问题”。我真的只想要一个简单的解决方案，理想情况下，我可以用我已知的字段类型创建一个简单的“虚拟”表，然后为每个表提供一个“OnGetFieldData”事件。我的另一个选择是使用 DevExpress TDxMemData 内存表并根据我的数据更改填充它，但这效率较低且更混乱。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:49:06.487

不要使用 TDataSet 后代，而是使用 LiveBindings。你的情况正是他们被创造出来的。以下是一些关于它们使用的视频：[http ://www.embarcadero.com/coderage/sessions](http://www.embarcadero.com/coderage/sessions)

# css - 如何在 HTML 和 CSS 中做到这一点？

> ID：11332643
> 
> 赞同：-4
> 
> 时间：2012-07-04T16:22:27.133
> 
> 标签：css, html

我有一种情况，图像或图标位于左浮动，详细信息也在左浮动

问题是 Shadowed-DIV 没有环绕内容。

这个怎么做？

![截图：问题](../Images/90931660024d61a5e69c9f55fed6a364.png)

编辑 HTML 的结构是：

```
<div "shadowed one"> // no overflow: auto; but it doesn't have any effect +/- overflow
  <div "+/- overflow: auto">
   <div "floating left">Icon</div>
   <div "floating left">Details</div
  <div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:31:18.957

我在[JS Fiddle](http://jsfiddle.net/Sohnee/uqSGM/)上为您创建了一个示例。

而不是浮动两个部门，浮动图像并在描述中添加边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:28:27.770

尝试更改阴影 div 的高度和填充

如果它已经是一个设定的高度，它不会神奇地适合内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:35:45.400

您可以考虑使用[*clearfix*](http://themergency.com/css-clearfix-demystified/)技巧或 CSS 属性`clear: both`

带有 clearfix 的示例：

```
<!-- Clearfix on the parent div -->
<div class="shadowed one clearfix">
    <!-- Floating divs with different height -->
    <div class="floating left">Icon</div>
    <div class="floating left">Details</div>
</div> 
```

# android - ADT 插件在 Eclipse 中消失了

> ID：11332644
> 
> 赞同：4
> 
> 时间：2012-07-04T16:22:28.790
> 
> 标签：android, eclipse, macos, sdk, adt

..我正在尝试从 Android SDK 管理器中的 Extra 安装 Google Cloud Messaging for Android Library。

由于没有出现，我将 Android SDK Tools 和 Android SDK Platform-Tools 更新到了最新版本（如下图：[Android 中的 Google Cloud Messaging Service 是如何工作的？](https://stackoverflow.com/questions/11241756/how-google-cloud-messaging-service-in-android-works)）。

两者都更新后，我仍然找不到任何 Extras--> Google Cloud Messaging for Android Library（只是“英特尔硬件加速执行管理器”）。所以我也更新了 Eclipse（3.6 版）（Help->Check for Updates），但除了**ADT 插件不再存在**之外什么也没发生：Preferences 下没有 Android 菜单，无法创建 Android 项目等等。

我取消了插件，从插件目录中删除了文件，安装了另一个版本的 Eclipse（3.8）并添加了插件，但**没有任何改变**。

有任何想法吗？

我正在使用 Mac OS X Leopard。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T08:21:15.067

问题是新的 ADT 插件 (v20) 需要 Java 1.6。

所以，首先，我必须更改 Java Preferences，调出 1.6 Java 版本。

然后，由于我的 Eclipse 设置为 Java 1.5 32 位，我不得不下载 64 位 Eclipse 版本（因为我的 1.6 Java 版本是 64 位）。

一切都再次奏效。

希望这能有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T08:30:16.490

从 ADT 17 开始，“ADT 17.0.0 需要 Java 1.6 或更高版本”。 [http://developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)

# jsoup - 在兄弟姐妹或后代之后出现的第一个元素？

> ID：11332646
> 
> 赞同：4
> 
> 时间：2012-07-04T16:22:38.397
> 
> 标签：jsoup

我试图始终使用单个 Jsoup select() 语句找到后面的**第一个，最好不循环。** `<ul>``<h2>`

例如，它`<ul>`可以是`<h2>`以下 HTML 片段中所示的兄弟：

```
<!-- lots of things can come before -->

<h2 class="C" id="S3">
<button class="B">Click Me</button>
<span id="targetSpan">Target Span</span>
</h2>

<ul>
<li> List item 1</li>
<li> List item 2</li>
</ul>

<!-- lots of things can come after --> 
```

或者它可以是 的兄弟姐妹的后代（不一定是直系孩子！）`<h2>`。兄弟元素可能是也可能不是之后的第一个兄弟元素`<h2>`，但`<ul>`始终*是*`<ul>`之后的第一个元素`<h2>`。例如：

```
<!-- lots of things can come before -->

<h2 class="C" id="S3">
<button class="B">Click Me</button>
<span id="targetSpan">Target Span</span>
</h2>

<div>
<ul>
<li> List item 1</li>
<li> List item 2</li>
</ul>
</div>

<!-- lots of things can come after --> 
```

我可以`<h2>`很容易地找到：

```
Element h2 = select("h2 > span#targetSpan").first().parent(); 
```

但是一旦我有了h2，我如何找到`<ul>`它之后的第一个？（可能是兄弟姐妹或后代，我不控制该 HTML 代码）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T22:55:52.473

你无法避免自己的循环。您必须遍历所有下一个元素兄弟，直到找到下一个`<ul>`：

```
 Element h2next = h2.nextElementSibling();
  do {
    ul = h2next.select("ul:not([class]))").first();         
  } while (h2next!=null && ul==null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T11:52:46.310

也许您可以使用该方法

```
nextElementSibling() 
```

并从中获得 UL。

[http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#nextElementSibling](http://jsoup.org/apidocs/org/jsoup/nodes/Element.html#nextElementSibling) ()

# validation - 验证批处理文件中的输入是否为 dd.mm.yyyy 格式

> ID：11332647
> 
> 赞同：-2
> 
> 时间：2012-07-04T16:22:40.520
> 
> 标签：validation

我有一个需要两个输入的批处理文件。一个是服务器名称，另一个是日期。我希望用户强制以 dd.mm.yyyy 格式输入日期。

我该怎么做？

任何帮助都会得到帮助。

-咔咔-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:27:28.600

你可以检查这个 jQuery 插件：[http](http://digitalbush.com/projects/masked-input-plugin/)
://digitalbush.com/projects/masked-input-plugin/ 然后你可以这样做：

```
$(function(){
    $("#date").mask("99.99.9999");
}); 
```

# android - android Setonclicklistener 不适用于菜单项

> ID：11332653
> 
> 赞同：0
> 
> 时间：2012-07-04T16:23:13.357
> 
> 标签：android

我有一个只包含一个项目的菜单。

```
Button exit;
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // TODO Auto-generated method stub
        super.onCreateOptionsMenu(menu);
        MenuInflater blowUp = getMenuInflater();
        blowUp.inflate(R.menu.exitmenu, menu);
        return true;
    }
exit=(Button)findViewById(R.id.bexitMenuExit); 
```

如果我将侦听器添加到退出按钮，我得到了 excpetion（空指针），我确信没有语法错误，按钮退出来自此菜单

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
    <item android:id="@+id/bexitMenuExit"
        android:title="Exit"

        android:icon="@android:drawable/ic_menu_close_clear_cancel"
        ></item>
</menu> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:28:17.303

无需初始化`Button`，这对我来说没有意义。只需膨胀您的`Menu`并*覆盖 onOptionsItemSelected*方法：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
   new MenuInflater(getApplicationContext()).inflate(R.menu.exitmenu, menu);
   return super.onCreateOptionsMenu(menu);
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
   switch(item.getId()) {
      case R.id.bexitMenuExit:
         // work that will start when you click on this
      ...
   }
} 
```

另外，没有必要使用`OnClickListener`，因为这是有`onOptionsItemSelected`方法的，你应该使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-17T18:52:28.020

对于菜单项，如 Sajmon 所述，您可以使用 onOptionsIemsSelected 函数。onClickListener 由视图使用，而此功能被设计为专门由使用 switch case 的菜单项使用。

# ruby-on-rails - Rails 3 and Devise：如何在注册页面注册账号和用户？

> ID：11332655
> 
> 赞同：0
> 
> 时间：2012-07-04T16:23:52.980
> 
> 标签：ruby-on-rails, ruby, devise

我需要一个注册页面来记录一个将用户作为嵌套属性的新帐户。例如：

**楷模**

```
class User < ActiveRecord::Base

  belongs_to :account
  validates :account_id, :presence => true
  ...

class Account < ActiveRecord::Base
  has_many :users, :dependent => :destroy
  accepts_nested_attributes_for :users
  ... 
```

**表格**

```
accounts
  id: 5

users
  id: 32
  email: someuser@gmail.com
  account_id: 5 
```

我知道要覆盖注册控制器，我必须做这样的事情......

```
class RegistrationsController < Devise::RegistrationsController
  def new
    super
  end

  def create
    super
  end
end 
```

我有设计默认注册页面。但是如何注册一个帐户和属于该帐户的用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:51:53.707

看起来您的设计资源是用户，也许您想在用户上使用嵌套属性，而不是帐户。

然后，您将能够使用嵌套属性进行注册，然后为其分配一个帐户。

# ruby-on-rails - Rails 路由范围/命名空间问题

> ID：11332657
> 
> 赞同：2
> 
> 时间：2012-07-04T16:23:54.347
> 
> 标签：ruby-on-rails, routing, namespaces

我正在开发一个包含多个部分和开发人员的项目。我们使用 mongodb 并因此在模型中声明 db 的东西。尽管项目有几个独立的服务器，但只有一个数据库，我们将模型存储在一个公共目录和一个 gem 中。

这意味着我们有一个模型的命名空间，public_models

为了避免像 /public_models/users/... 这样的路线，我声明了以下路线：

```
scope :module => "public_models" do
  resources :users
end 
```

这在许多情况下都有效，并且会产生人们期望的麻烦。

```
users     GET    /users(.:format)          public_models/users#index
          POST   /users(.:format)          public_models/users#create
 new_user GET    /users/new(.:format)      public_models/users#new
edit_user GET    /users/:id/edit(.:format) public_models/users#edit
     user GET    /users/:id(.:format)      public_models/users#show
          PUT    /users/:id(.:format)      public_models/users#update
          DELETE /users/:id(.:format)      public_models/users#destroy 
```

但是，我必须更改几个链接才能使其正常工作。index.html.erb

```
link_to 'Show', user_path(user) instead of link_to 'Show', user 
```

form_for 我必须指定网址。如果我指定问题：

```
form_for @user, :url => user_path(:id => @user) do |f| 
```

然后更新工作，但不是新的我得到“没有路线匹配[POST]”/user/287944764774”如果我把它改成

```
form_for @user, :url => users_path(@user) do |f| 
```

然后新的作品就像一个魅力，但我得到这个更新错误

```
"No route matches [PUT] "/user.287944764774" 
```

更不用说我需要使用的 redirect_to 了：

```
redirect_to user_path(:id => @user.id) 
```

这一切都非常令人困惑和奇怪！我的意思是这不可能是第一次有人想要将模型存储在另一个地方。它真的必须销毁所有表单助手等吗？这样做的正确方法是什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:26:46.580

我以前在这个问题上遇到过很多麻烦。难以理解的主要原因是，form_for 和 helper 链接在与简单模型一起使用时为我们做了很多工作。

在深入潜水之前，我可以请您尝试一下吗

```
link_to 'Show', [:public_models, user] 
```

而且，在一个新的虚拟项目中，类似

```
rails g scaffold 'PublicModels::User' name:string 
```

我不确定这些是否是您问题的确切答案，但我认为它们可以为正在发生的事情提供一些线索。

编辑

关于表单提交，您可以从路由输出中看到，post url (new) 的路径是

```
users_path 
```

但对于 put url (edit) 是

```
user_path(@user) 
```

所以你可以尝试类似的东西

```
:url => (@user.new_record? ? users_path : user_path(@user)) 
```

或者只是分开两个表单并处理不同代码块中的 url / 方法参数

# javascript - Emberjs车把内容绑定编辑字段不起作用

> ID：11332660
> 
> 赞同：1
> 
> 时间：2012-07-04T16:23:59.770
> 
> 标签：javascript, ember.js, handlebars.js, observers

我有一个 emberJS 对象，通过可编辑字段视图查看，以便能够使用绑定对其进行编辑。我修改视图以便能够替换文本中的链接。我的问题是，如果我使用内部视图（Zs.RealValue）渲染函数，它不会像简单的 {{value}} 那样在每次更新时刷新，只有当我擦除文本并在擦除第一个更改之后.

我这里有一个简单的例子：

步骤：双击其中一个编辑字段，出现编辑框，尝试修改值，您会看到正在更新简单视图，而不是其他文本视图。

[http://jsfiddle.net/symunona/hCjEc/7/](http://jsfiddle.net/symunona/hCjEc/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-14T14:31:31.573

出现问题是因为您尝试`render`在`RealValue`. 如果你改为`RealValue`这样：

```
Zs.RealValue = Ember.View.extend({
    template: Ember.Handlebars.compile("{{value}}")
}); 
```

然后该[示例有效](http://jsfiddle.net/hCjEc/9/)。

# delphi - TPageControl 和 Startmargin

> ID：11332664
> 
> 赞同：-2
> 
> 时间：2012-07-04T16:24:21.690
> 
> 标签：delphi, delphi-xe

我需要一个`TPageControl`类似`StartMargin`in的属性`TTabSet`。有谁知道，我怎样才能`StartMargin`在其中创建财产`TPageControl`？

对于不熟悉[StartMargin](http://docwiki.embarcadero.com/Libraries/en/Vcl.Tabs.TTabSet.StartMargin)的任何人，以下是其文档中的相关文本：

> 确定第一个选项卡从选项卡集控件的左边缘出现的距离（以像素为单位）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:58:34.707

如果我理解正确，那么您可以使用标准控件执行此操作。

在对象检查器中设置 TPageControl --> Margins --> Left 说 50。然后将 AlignWithmargins 设置为 True。

同样适用于 TTabSheet

或者你需要一些不同的东西？

编辑参考您的评论：同样适用于 TTabSet：设置左边距、AlignWithMargins 并在面板上对齐顶部。这会给你你的效果。但是现在您必须管理自己的页面可见性和页面切换:(

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T21:25:21.110

或者，对于多版本解决方案：

```
uses 
  ..., 
  CommCtrl; 

type 
  TPageControl = class(ComCtrls.TPageControl) 
  private 
    procedure TCMAdjustRect(var Msg: TMessage); message TCM_ADJUSTRECT; 
  end; 

  TForm1 = class(TForm) 
    ... 
  end; 

... 

procedure TPageControl.TCMAdjustRect(var Msg: TMessage); 
begin 
  inherited; 
  if Msg.WParam = 0 then
    Inc(PRect(Msg.LParam)^.Left, 50)
  else
    Dec(PRect(Msg.LParam)^.Left, 50);
end; 
```

# c# - UserControl 具有传播到内部控件的绑定

> ID：11332665
> 
> 赞同：1
> 
> 时间：2012-07-04T16:24:21.690
> 
> 标签：c#, wpf, mvvm, wpf-controls

这可能不是一个火箭科学问题，所以请原谅我是一个新人！我有一个用于设置人名的 UserControl（简单用于测试目的）。

PersonNameControl.xaml：

```
<UserControl x:Class="BindingPropagationTest.Controls.PersonNameControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" Width="120" Height="23" Margin="0,0,0,0"
             >
    <TextBox Name="TextBox" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
</UserControl> 
```

如您所见，它包含一个 TextBox，它是“真正的”文本框。后面的代码是这样的。

PersonNameControl.xaml.cs：

```
using System.Windows.Controls;
using System.Windows;
using System.Diagnostics;

namespace BindingPropagationTest.Controls
{
    public partial class PersonNameControl : UserControl
    {
        public static DependencyProperty nameProperty
            = DependencyProperty.Register("PersonName", typeof(string), typeof(PersonNameControl));

        public string PersonName
        {
            get
            {
                Debug.WriteLine("get PersonNameControl.PersonName = " + TextBox.Text);
                return TextBox.Text;
            }

            set
            {
                Debug.WriteLine("set PersonNameControl.PersonName = " + value);
                TextBox.Text = value;
            }
        }

        public PersonNameControl()
        {
            InitializeComponent();
        }
    }
} 
```

我在 MainWindow.xaml 中使用用户控件：

```
<Window x:Class="BindingPropagationTest.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:my="clr-namespace:BindingPropagationTest.Controls"
        xmlns:items="clr-namespace:BindingPropagationTest.ComboBoxItems"
        Title="Testing binding in UserControl"
        Width="179" Height="310">
  <Canvas Height="241" Width="144">

        <Label Canvas.Left="11" Canvas.Top="10" Content="Name" Height="28" Padding="0" />
        <my:PersonNameControl x:Name="nameControl"
                Width="120" Height="23"
                HorizontalAlignment="Left" VerticalAlignment="Top"
                PersonName="{Binding name}"
                Canvas.Left="11" Canvas.Top="28" />

        <Label Canvas.Left="11" Canvas.Top="57" Content="Address" Height="28" Padding="0" />
        <TextBox Canvas.Left="11" Canvas.Top="75" Width="120" Text="{Binding address}"></TextBox>

        <Label Canvas.Left="11" Canvas.Top="103" Content="Age" Height="28" Padding="0" />
        <TextBox Canvas.Left="11" Canvas.Top="122" Height="23" Name="textBox1" Width="120" Text="{Binding age}" />

        <ComboBox Canvas.Left="11" Canvas.Top="173" Height="23"
                Name="comboBox1" Width="120" SelectionChanged="comboBox1_SelectionChanged">
            <items:PersonComboBoxItem age="41" name="Donald Knuth" address="18 Donut Street" Height="23" />
            <items:PersonComboBoxItem age="23" name="Vladimir Putin" address="15 Foo Street" Height="23" />
            <items:PersonComboBoxItem age="32" name="Mike Hammer" address="10 Downing Street" Height="23" />
        </ComboBox>
    </Canvas>
</Window> 
```

如您所见，还有一些普通的文本框。

在 MainWindow 后面的代码中

MainWindow.xaml.cs：

```
using System.Windows;
using System.Windows.Controls;
using BindingPropagationTest.ComboBoxItems;

namespace BindingPropagationTest
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = new Person();
        }

        private void comboBox1_SelectionChanged
            (object sender, SelectionChangedEventArgs e)
        {
            updateForm();
        }

        private void updateForm()
        {
            var item = (PersonComboBoxItem)comboBox1.SelectedItem;

            DataContext = new Person()
            { age = item.age, name = item.name, address = item.address };           
        }
    }
} 
```

您会看到我将 DataContext 设置为“人”。

个人.cs：

```
namespace BindingPropagationTest
{
    public class Person
    {
        public string name {get; set; }
        public int age { get; set; }
        public string address { get; set; }
    }
} 
```

正如你所注意到的，我发明了一个像这样的自己的 ComboBoxItem。PersonComboBoxItem.cs：

```
using System.Windows.Controls;
using System.Diagnostics;

namespace BindingPropagationTest.ComboBoxItems
{
    public class PersonComboBoxItem : ComboBoxItem
    {
        private string _name = "";
        public string name
        {
            get
            {
                return _name;
            }
            set
            {
                _name = value;
                Content = _name;
            }
        }

        public int age { get; set; }
        public string address { get; set; }

        public override string ToString()
        {
            Debug.WriteLine("name: " + name);
            return name;
        }
    }
} 
```

运行这个应用程序会给你这个窗口：

![在此处输入图像描述](../Images/2fda4754da9081c6750f20993bffb49e.png)

并选择一个组合框项目给你这个：

![在此处输入图像描述](../Images/04669e4be5a7352a9b2f66d956c2dd85.png)

如您所见，名称不会被填写。为什么不呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:14:14.813

你快到了，你需要改变一些事情

依赖属性的使用方式如下

```
 public static DependencyProperty NameProperty = DependencyProperty.Register(
    "Name",
    typeof(string),
    typeof(PersonNameControl));

    public string Name
    {
        get
        {
            return (string)GetValue(NameProperty);
        }
        set
        {
            SetValue(NameProperty, value);
        }
    } 
```

依赖属性有一个非常严格的约定。如果属性称为名称，则必须将其称为“名称属性”。该属性也只是设置并获取依赖属性。

您可以将文本框绑定到用户控件中的属性，例如

```
<UserControl x:Class="BindingPropagationTest.Controls.PersonNameControl"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         x:Name="UserControl"
         mc:Ignorable="d" Width="120" Height="23" Margin="0,0,0,0"
         >
    <TextBox Text="{Binding ElementName=UserControl, Path=Name}" Name="TextBox" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" />
</UserControl> 
```

我在顶部添加了 x:Name="UserControl" 指令，您可以将其命名为任何名称，只要它与 Binding 中的 ElementName 匹配即可

关于如何填充组合框的额外说明

您可以在 MainWindow 上添加一个属性

```
 private ObservableCollection<Person> _thePeople;
    public ObservableCollection<Person> ThePeople
    {
        get
        {
            if (_thePeople == null)
            {
                List<Person> list = new List<Person>()
                {
                    new Person() { name = "Bob" , address = "101 Main St." , age = 1000 },
                    new Person() { name = "Jim" , address = "101 Main St." , age = 1000 },
                    new Person() { name = "Mip" , address = "101 Main St." , age = 1000 },
                };
                _thePeople = new ObservableCollection<Person>(list);
            }
            return _thePeople;
        }
    } 
```

然后您可以将用户控件上使用的 x:Name 指令添加到主窗口中

```
x:Name="TheMainWindow" 
```

然后，您可以在组合框中使用数据模板，如下所示

```
 <ComboBox ItemsSource="{Binding ElementName=TheMainWindow, Path=ThePeople}"
          Height="23"
          Name="comboBox1" Width="120" >
        <ComboBox.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding name}" />
                    <TextBlock Text="{Binding address}" />
                    <TextBlock Text="{Binding age}" />
                </StackPanel>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

因为在代码隐藏中使用了 ObservableCollection，所以每当代码隐藏从“ThePeople”集合中添加或删除项目时，组合框将自动获取添加或删除的项目。打电话

```
ThePeople.Add(new Person()); 
```

并且组合框将自动填充一个新条目

# jquery - 带有文本替换的 jQuery 手风琴式菜单

> ID：11332668
> 
> 赞同：0
> 
> 时间：2012-07-04T16:24:27.743
> 
> 标签：jquery

我想用“加号”表示菜单的可扩展性/可折叠性。当项目展开时，我想用减号替换加号。

目前唯一的问题是当我单击另一个项目时将减号返回到加号。

有什么建议么？

小提琴：http: [//jsfiddle.net/saltcod/Lg9Mn/](http://jsfiddle.net/saltcod/Lg9Mn/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:28:20.267

试试这个 - [http://jsfiddle.net/Lg9Mn/2/](http://jsfiddle.net/Lg9Mn/2/)

```
jQuery(function($){
    var allMetaFields = $('.meta-field').hide();

    $('.topics-meta h3').on('click', function(){
        $('.topics-meta span').text('+');
        $(this).find('span').text('-');
        allMetaFields.slideUp();

        if ( $(this).next().is(":visible") ) {
            $(this).find('span').text('+');
        } else {
            $(this).next().slideDown();
        }

        return false;
    });
}); 
```

# vb.net - VB.NET - 多个 SQLDataReader 的

> ID：11332670
> 
> 赞同：2
> 
> 时间：2012-07-04T16:24:32.173
> 
> 标签：vb.net

我在 ASP.NET 中进行了很多开发，并且我知道每个 SQLConnection 只能打开一个 SQLDataReader。但是，在 VB.NET（表单应用程序）中似乎并非如此，即我为一个连接对象打开了多个 SQLDataReader。这在 VB.NET 中是否允许？

如果对此没有明显的答案，那么我将发布一些代码。

这是一些代码：

```
Public Function CheckActiveReviews()
            Dim objCon As SqlConnection
            Dim objCommand As SqlCommand, objCommand2 As SqlCommand
            Dim objDR As SqlDataReader, objDR2 As SqlDataReader
            Try
                objCon = New SqlConnection("Data Source=TestDatabase;Initial Catalog=TestTable;User ID=TestUser;Password=TestPassword;MultipleActiveResultSets=True")
                objCommand = New SqlCommand
                objCommand.Connection = objCon
                objCommand2 = New SqlCommand
                objCommand2.Connection = objCon
                objCon.Open()
                objCommand.CommandText = "SELECT ID FROM Person WHERE PersonID > 1000"
                objDR = objCommand.ExecuteReader()
                Do While objDR.Read
                    objCommand2.CommandText = "SELECT * FROM Sport WHERE PersonID = @PersonID "
                    objCommand2.Parameters.AddWithValue("@PersonID", objDR("ID"))
                    objDR2 = objCommand2.ExecuteReader
                Loop

            Catch ex As Exception

            End Try

        End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:27:32.593

如果您使用[MARS（多个活动结果集），则](http://msdn.microsoft.com/en-us/library/cfa084cz%28v=vs.80%29.aspx)*可以*使用多个数据阅读器，但我不建议您这样做，除非您真的需要它。

相反，我建议`SqlConnection`您在每次需要时创建一个新对象 - 尽可能短地使用它，然后将其丢弃（使用`Using`语句为您执行此操作）。连接池将尽可能地重用“物理”网络连接的效率。这样您就不必担心是否`SqlConnection`已经打开等 - 您每次都遵循相同的“创建、打开、使用、处置”模式。

# javafx-2 - 带有 GUI 的 JavaFX 控制台服务

> ID：11332679
> 
> 赞同：0
> 
> 时间：2012-07-04T16:25:11.147
> 
> 标签：javafx-2

我需要制作一个作为服务器运行的应用程序，该服务器接受来自各种客户端的连接并响应他们的请求（通过专有协议）。该服务器还需要一个用于配置和监控的 GUI。我（当然）需要将服务器作为服务运行，并且 GUI 必须仅在特定时刻可用。由于服务器服务和 GUI 共享一些硬件资源和部分配置，它们将在同一台机器上运行。我希望 GUI 和整个长期运行的服务是一个将在后台运行的进程；只有在需要时才调用（显示）GUI。

我的问题是：这可以用 JavaFX 2 GUI 来完成吗？怎么做？

提前谢谢约西普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:33:45.620

那么您需要在 Java 应用程序中进行监控和管理吗？您应该使用 Java 管理扩展 (JMX) 技术。[http://docs.oracle.com/javase/6/docs/technotes/guides/management/overview.html](http://docs.oracle.com/javase/6/docs/technotes/guides/management/overview.html)

如果您决定不能只使用标准 JMX 客户端或创建插件，那么您可以将 JavaFX 应用程序创建为 JMX 客户端。

# c# - 使用 NHibernate/C# 从数据库预加载树/层次结构

> ID：11332682
> 
> 赞同：0
> 
> 时间：2012-07-04T16:25:30.130
> 
> 标签：c#, sql, nhibernate, hierarchy, hierarchical-data

我需要填充一些树层次结构并遍历它们以建立类别菜单。每个类别可以有超过 1 个父级。问题是如何有效地做到这一点，并尽量避免这个`Select N+1`问题。

目前，它是通过使用两个表/实体来实现的：

```
Category
--------
ID
Title

CategoryLink
---------
ID
CategoryID
ParentID 
```

理想情况下，我会使用普通的对象遍历来遍历节点，即通过`Category.ChildCategories`等。这可以在一个 SQL 语句中完成吗？而且，这可以在 NHibernate 中完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:38:16.787

`batch-size`在`Category.ChildCategories`映射上指定 a 。这将导致 NHibernate 分批获取指定大小的子节点，而不是一次一个（这将缓解 N+1 问题）。

如果您使用的是`.hbm`文件，则可以`batch-size`这样指定：

```
<bag name="ChildCategories" batch-size="30"> 
```

或使用流利的映射

```
HasMany(x => x.ChildCategories).KeyColumn("ParentId").BatchSize(30); 
```

有关详细信息，请参阅[NHibernate 文档](http://nhforge.org/doc/nh/en/index.html#performance-fetching-batch)。

**编辑**

好的，我相信我理解您的要求。使用以下配置

```
HasManyToMany<Item>(x => x.ChildCategories)
    .Table("CategoryLink")
    .ParentKeyColumn("ParentId")
    .ChildKeyColumn("CategoryID")
    .BatchSize(100)
    .Not.LazyLoad()
    .Fetch.Join(); 
```

您应该能够使用以下行在一次调用中获取整个层次结构。

```
var result = session.CreateCriteria(typeof(Category)).List(); 
```

出于某种原因，检索这样的单个类别

```
var categoryId = 1;
var result = session.Get<Category>(categoryId); 
```

导致层次结构中的每一级调用一次。我相信这仍会显着减少对数据库的调用次数，但我无法让上面的示例与对数据库的单个调用一起工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T16:43:21.880

这将检索所有类别及其子类别：

```
var result = session.Query<Category>()
                    .FetchMany(x => x.ChildCategories)
                    .ToList(); 
```

问题是确定什么是根类别。您可以使用标志，也可以映射逆向集合 ( `ParentCategories`) 并执行以下操作：

```
var root = session.Query<Category>()
                  .FetchMany(x => x.ChildCategories)
                  .FetchMany(x => x.ParentCategories)
                  .ToList()
                  .Where(x => !x.ParentCategories.Any()); 
```

所有排序都应在客户端完成（即之后`ToList`）

# java - Java中的方法覆盖引发异常

> ID：11332684
> 
> 赞同：4
> 
> 时间：2012-07-04T16:25:39.797
> 
> 标签：java, exception, overriding

我试图了解对象转换和方法覆盖。

我有一段代码：

```
 public class ExceptionClass{
        void m() throws SQLException{}

    }

    class A extends ExceptionClass{

        void m() throws Exception{}
    } 
```

这会给出错误“异常异常与 ExceptionClass.m() 中的 throws 子句不兼容”。

如果我写为：

```
 public class ExceptionClass{
        void m() throws SQLException{}
    }

    class A extends ExceptionClass{

        void m() throws RuntimeException{}
    } 
```

这不会给出任何错误，并且方法也被正确覆盖。经过一些分析，我认为可能是因为 SQLException 从 Exception 类扩展，因此我们不能在子类中用“Exception”替换“SQLException”（我们正在更改覆盖方法的签名）。

但后来我这样做了：

```
 public class ExceptionClass{
        void m() throws NullPointerException{}
    }

    class A extends ExceptionClass{
        void m() throws RuntimeException{}  
    } 
```

但是这里没有错误..！由于我上面提到的原因，我认为它应该给出相同的错误。

我不确定它为什么会这样。当我们重写方法时要遵循什么规则，这会在方法签名中抛出异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:28:46.010

`NullPointerException`并且`RuntimeException`都是*未经检查*的异常。

它们不需要在`throws`子句中列出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-04T16:29:24.197

您只能减少或消除覆盖方法中引发的异常。该语言不允许抛出更广泛的异常。

来自[Java 文档](http://docs.oracle.com/javase/specs/jls/se5.0/html/exceptions.html)：

> “覆盖方法的 throws 子句可能未指定此方法将导致抛出任何已检查的异常，而覆盖方法的 throws 子句不允许抛出该异常。”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:29:12.710

是的，您说得对，第一个问题是由于方法签名的更改而发生的。使用 NPE 和 RuntimeException 进一步激发它是不正确的，因为不需要在签名上声明运行时异常。

# c# - 使线程将异常传播到上层线程

> ID：11332686
> 
> 赞同：2
> 
> 时间：2012-07-04T16:25:53.060
> 
> 标签：c#, multithreading, exception, threadpool

如果我错了，请纠正我，但我注意到从池中选择的线程`ThreadPool.QueueUserWorkItem(GoneFishing)`显然“吞下了”该线程中发生的任何异常。

这给我们带来了很多麻烦，因为我们设计了一个有序的线程链，所以如果一个线程没有很好地完成，那么后面的所有链都会被打乱。

以适当的方式处理这个问题的最方便的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:28:10.207

如果您考虑使用 .NET 4.0，则 a 引发的任何异常都会`Task`在加入时自动传播到父线程`Task`。看看这里：http: [//msdn.microsoft.com/en-us/library/dd997415.aspx](http://msdn.microsoft.com/en-us/library/dd997415.aspx)

对于其他相关解决方案，请检查以下问题：[Safe to throw an exception created on another thread C#](https://stackoverflow.com/questions/11326544/safe-to-throw-an-exception-created-on-another-thread-c-sharp/11327211#11327211)

# sqlite - 从 C# 查询 Thunderbird 的 SQLite 消息数据库

> ID：11332692
> 
> 赞同：6
> 
> 时间：2012-07-04T16:26:34.603
> 
> 标签：sqlite, thunderbird

我想从我正在开发的 C# 应用程序中查询 Thunderbird 存储的电子邮件消息。

目前我可以通过查询 SQLite 数据库 global-messages-db.sqlite 来获取一些消息部分，例如 From address 和 Subject。

```
SELECT subject FROM messagesText LIMIT 10; 
```

我无法找到邮件正文。我搜索了 Thunderbird 存储的文档，但找不到任何描述存储位置的信息。

消息的正文存储在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T16:55:59.223

根据我自己的实验，您似乎可以通过以下方式获取消息列表。

```
select * from messages; 
```

在该结果集中，您会注意到每条消息都有一个 ID。要获取特定消息的内容，您可以执行以下操作。

```
select c0body,c1subject,c2attachmentNames,c3author,c4recipients from messagesText_content where docid = 1234; 
```

这是假设您想要的消息的 id 是 1234。

# drupal - 无法使用 image_style_url 生成派生图像

> ID：11332697
> 
> 赞同：6
> 
> 时间：2012-07-04T16:27:02.843
> 
> 标签：drupal, drupal-7, thumbnails

当我尝试在图像上使用[image_style_url](http://api.drupal.org/api/drupal/modules!image!image.module/function/image_style_url/7)函数时，我在报告中看到以下消息：“无法生成位于 public://... 的派生图像”

我已确保该目录属于 Apache 的所有权，并且将图像附加到其他节点上没有问题。

样式名称“模板”已在 Drupal 管理面板的“图像样式”菜单中设置。

调用该函数时，将返回一个图像 URL，但该图像未显示，因为该图像不是由服务器创建的。

有没有人对我如何解决这个问题有任何想法？

我只是打印 image_style_url，其中“缩略图”是在管理区域中创建的图像样式的名称。

```
$img_url = $node->field_image[0]['uri'];
print image_style_url("thumbnail", $img_url); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-28T09:23:18.840

我刚刚在生成站点/默认/文件/样式/newsletter_thumbnail/public/Scotland_bankers_2.jpg 时遇到了这个问题 - 原来 /files/ 文件夹中不存在文件 Scotland_bankers_2.jpg，所以没有任何东西可以生成！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T07:50:37.747

您传递的 $img_url 可能无效。检查 uri 值是否可访问。您是否在一个字段中有多个图像？

我认为您应该像这样访问数据：

```
$node->field_image[$node->language][0]['uri'] 
```

在我的图像被删除之前，我遇到了同样的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-05T13:46:39.727

你为那张图片设置了样式吗？这是如何从自定义模板打印 img

```
 $style='full_content_width';
 $path=$node->my_img_field['und']['0']['uri'];
 $style_url = image_style_url($style, $path);
  print "<img src=".file_create_url($style_url)." >"; 
```

# java - Hibernate：从映射迁移到注释 - 是否可以混合使用 hbm 和注释？

> ID：11332698
> 
> 赞同：11
> 
> 时间：2012-07-04T16:27:13.530
> 
> 标签：java, spring, hibernate, annotations, hibernate-mapping

我目前正在将我的项目从 Hibernate HBM Mappings 迁移到 Annotations。就我处理小班而言，一切都很容易。但是我有同样巨大的类，我尝试为这个类混合映射和注释。我读到这可以通过使用休眠属性“hibernate.mapping.precedence”并将其设置为“class，hbm”而不是“hbm，class”。（请参阅：[在 Hibernate 中：是否可以为实体混合注释和 XML 配置？](https://stackoverflow.com/questions/8643166/in-hibernate-is-it-possible-to-mix-annotations-and-xml-configuration-for-an-ent)）

例如，我有以下 Document 类：

```
@Entity
@Table(name="DOCUMENT")
public class Document  {
   @Column(name="DESCRIPTION")
   private String description;
} 
```

和以下 Document.hbm.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN" 
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">    
<hibernate-mapping>
  <class name="Document" table="DOCUMENT" >
    <id name="id" column="DOCUMENT_ID" type="long" />
  </class>
</hibernate-mapping> 
```

在我的 hibernate.cfg.xml 文件中，我放了：

```
<property name="hibernate.mapping.precedence">class, hbm</property>
<mapping class="Document"/>
<mapping resource="Document.hbm.xml"/> 
```

我的问题是： - 如果我把“class, hbm”作为优先级，那么我在类 Document 中只有我的注释 - 如果我把“hbm，class”那么我只有我的映射在 hbm 资源中

有谁知道是否有办法同时拥有注释和 HBM 映射？

谢谢

卡姆兰

PS：我使用：Hibernate 4.1.4 和 Spring Framework 3.1.1

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-04T17:12:40.330

您不能将它们混合用于同一个课程。[在休眠注释第 1.2 节](http://docs.jboss.org/hibernate/annotations/3.5/reference/en/html_single/#setup-configuration)的末尾：

*您可以将带注释的持久类和经典的 hbm.cfg.xml 声明与相同的 SessionFactory 混合使用。**但是，您不能多次声明一个类**（无论是注释还是通过 hbm.xml）。您也不能在实体层次结构中混合配置策略（hbm 与注释）。*

*为了简化从 hbm 文件到注解的迁移过程，配置机制检测注解和 hbm 文件之间的映射重复。**HBM 文件然后在类到类的基础上**优先于带注释的元数据。您可以使用 hibernate.mapping.precedence 属性更改优先级。默认是hbm，class，改成class，当发生冲突时，hbm会优先注释的类优先于hbm文件。*

使用注解和 hbm 文件是两次声明一个类。因此，在类到类的基础上，一个将优先于另一个（类到类的基础意味着对于每个类，仅使用 hbm 文件或注释）。

# mysql - MySQL 正则表达式只返回一行

> ID：11332700
> 
> 赞同：2
> 
> 时间：2012-07-04T16:27:27.370
> 
> 标签：mysql, regex

我一直在 MySQL 中编写一个 REGEX 来识别那些具有 .com TLD 的域。URL 通常采用以下形式

```
http://example.com/ 
```

我想出的正则表达式如下所示：

```
REGEXP '[[.colon.]][[.slash.]][[.slash.]]([:alnum:]+)[[...]]com[[./.]]' 
```

我们匹配 :// 的原因是我们不会选择 URL，例如`http://example.com/error.com/wrong.com`

因此我的查询是

```
SELECT DISTINCT name
FROM table 
WHERE name REGEXP '[[.colon.]][[.slash.]][[.slash.]]([:alnum:]+)[[...]]com[[./.]]'" 
```

但是，当它实际上应该返回更多（超过一千）时，它只返回一行。我在查询中犯了什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:37:24.877

不确定这是否是问题，但应该是`[[:alnum:]]`，不是`[:alnum:]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:35:12.680

您当前的查询只匹配以斜杠`name`结尾的 s，`.com/`而不是`.com`后跟以斜杠开头的任何内容。尝试以下操作：

```
SELECT DISTINCT name
FROM table 
WHERE name REGEXP '[[.colon.]][[.slash.]][[.slash.]]([:alnum:]+)[[...]]com([[./.]].*)?'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:40:12.240

拆分 URL 可能比正则表达式更清晰

```
SELECT DISTINCT name FROM table
WHERE SUBSTRING_INDEX((SUBSTRING_INDEX(name,'/',3),'.',-1)='com'; 
```

# jquery-ui - Backbone.js 与 jQuery 可拖动/可放置。可丢弃不工作

> ID：11332703
> 
> 赞同：0
> 
> 时间：2012-07-04T16:27:34.037
> 
> 标签：jquery-ui, backbone.js, coffeescript

我有一个 Backbone 应用程序，我在其中创建 2 个视图，一个可拖动，一个可放置。拖动工作正常，但永远不会触发 droppable 回调。如何让可放置视图“看到”可拖动视图？

我的“可丢弃”视图：

```
class App.Views.Folder extends Backbone.View

template: JST['folders/folder']

  className: "folder"

  initialize: (options) ->
    @collection.on('add', @addOne, @)
    @collection.on('reset', @addAll, @)

  render: ->
    @$el.html(@template(@model.toJSON()))
   this.$el.droppable(
      drop: -> alert("dropped!")
   ); 
```

可拖动：

```
class App.Views.QuestionSet extends Backbone.View

  template: JST['question_sets/question_set']

  className: "question-set"

  initialize: (options) ->
    @collection.on('add', @addOne, @)
    @collection.on('reset', @addAll, @)
    @$el.draggable(
      handle: ".drag-question-set"
      revert: true
    )

  render: ->
    @$el.html(@template(@model.toJSON())) 
```

## 更新：

当我将可放置元素插入与`$(draggable.el)`可放置视图相同的容器潜水时，可放置元素正确触发回调。当他们在单独的html父母中时，它只是不喜欢它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T08:57:56.283

您的帖子中没有太多信息，但根据您的描述，如果这取决于您在 html 中放置 droppable 的位置，您可以尝试用`@$el`just 替换您的引用`$("#someid")`。另外，请记住，对于主干，快捷方式`@$("#someid")`的范围是主干视图元素（构造函数中设置的全局文档的某些子元素），而不是全局文档本身。假设您使`$("#someid")`零件正常工作，那很可能只是范围界定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:48:08.143

我想通了......原来这是 Droppable 插件的“容忍”问题。设置`{tolerance: "pointer"}`解决了我的问题。

# php - PHP + PDO，我的转义字符在显示时不会显示

> ID：11332707
> 
> 赞同：0
> 
> 时间：2012-07-04T16:27:52.103
> 
> 标签：php, postgresql, pdo

首先，我要道歉，我还是个初学者。

出于学习目的，我正在创建一个博客引擎，我只是注意到，当我列出评论时，回车（按 Enter）等转义字符会正确显示在数据库中，但在显示评论时只有一个空格字符。

我正在使用 PostgreSQL 8.3。

在这里您可以看到一个示例数据库条目：

```
fema=> select * from comments where id = 54;
-[ RECORD 1 ]-------------------------
id       | 54
authorid | 1
text     | This new line won't show.\r
        : No\r
        : \r
        : new\r
        : \r
        : \r
        : \r
        : lines.
time     | 1341417673
postid   | 15
answerid | 0 
```

在这里您可以看到 var_dump() 显示的内容：

```
string(50) "This new line won't show. No new lines." 
```

这就是我获取数据的方式：

```
$stmt = db::$db->prepare("select comments.id as commentid ,authorid,text,time,postid,answerid,users.* from comments left join users on users.id = comments.authorId where postid = :postId");
            $stmt->execute(array('postId' => $_GET['p']));
        $commentRslt = $stmt->fetchAll(); 
```

然后 foreach 遍历它们并替换我用来识别我必须替换的东西的标记：

```
$currComment = str_replace('{{{cms:comment:text}}}', $commentRslt[$key]['text'], $currComment); 
```

这就是我将新评论插入数据库的方式：

```
$stmt = self::$db->prepare('INSERT INTO comments (authorId, text, time, postId, answerId) VALUES (:authorId, :text, :time, :postId, :answerId)');
$stmt->execute(array(   'authorId' => $_SESSION['userId'],
                        'text' => str_replace(array('<','>'), array('&lt','&gt'), isset($_POST['newCommentArea']) ? $_POST['newCommentArea'] : $_SESSION['newCommentArea']),
                        'time' => time(),
                        'postId' => isset($_POST['commentNew']) ? $_POST['commentNew' ] : $_SESSION['postId'],
                        'answerId' => $answerId)); 
```

很抱歉有很多代码示例，但我什至不知道问题出在哪里，我想彻底。

那么谁能告诉我如何解决这个问题？如果只是告诉我我在哪里犯了错误。我真的一点头绪都没有。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:31:02.063

只是在这里猜测，但是：

**HTML/浏览器**将连续的空格折叠成一个空格。`<br>`如果要保留换行符，请使用标签替换换行符[`nl2br`](http://php.net/nl2br)。

# windows-phone-7 - 配置动态磁贴的大小

> ID：11332710
> 
> 赞同：0
> 
> 时间：2012-07-04T16:27:57.427
> 
> 标签：windows-phone-7, windows-phone-7.1, microsoft-metro, live-tile

我看到一些应用程序，如 twitter，最近在 Live Tiles 上发布了推文。Tiles 是矩形的，占据整个空间，而不是像所有其他应用程序那样是方形的。如何更改或创建矩形动态图块..？任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:46:21.443

目前不可能有矩形瓷砖。使用 7.8 和 8 版本的应用程序将能够拥有多种尺寸的图块。对于 7.5，我们仅限于方形瓷砖。使用方形瓷砖，您可以放入背面瓷砖。要更新磁贴，请参阅msdn 上的磁[贴概览](http://msdn.microsoft.com/en-us/library/hh202948%28v=vs.92%29.aspx)示例。[您可以在此处](http://go.microsoft.com/fwlink/?LinkId=219077)下载完整的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T03:29:04.010

这不可能。目前在 7.5 中，只有日历和图片等 Microsoft 原生应用程序具有矩形磁贴。

因此，您现有的瓷砖只能是正方形。

您必须等待 7.8 或 8.0 才能这样做。

# python - 错误：命令失败，rc=65536 python 和 mod_wsgi

> ID：11332717
> 
> 赞同：4
> 
> 时间：2012-07-04T16:28:24.137
> 
> 标签：python, mod-wsgi

我遇到了这个问题：

我正在运行 pythonbrew 来获取 python2.7，所以我重新编译了 mod_wsgi 以使用 2.7 python。

为此，我遵循了本教程：

code.google.com/p/modwsgi/wiki/QuickInstallationGuide

这涉及下载文件-我得到了一个 tar.gz 文件-然后使用“配置它” `./configure --with-python=/home/bharal/.pythonbrew/pythons/Python-2.7.2/bin/python --enable-shared`

现在我假设这是为我的 python 附加的正确位置 - 上面 with-python 的值只是我得到的响应`which python`

好的！所以，现在的问题。运行上面的配置后，我运行`make`并得到：

```
/usr/include/features.h:160:1: warning: this is the location of the previous definition
/usr/share/apr-1.0/build/libtool --silent --mode=link --tag=disable-static x86_64-linux-gnu-gcc -o mod_wsgi.la  -rpath /usr/lib/apache2/modules -module -avoid-version    mod_wsgi.lo -L/home/aiyer    /.pythonbrew/pythons/Python-2.7.2/lib -L/home/aiyer/.pythonbrew/pythons/Python-2.7.2/lib  /python2.7/config -lpython2.7 -lpthread -ldl -lutil -lm
/usr/bin/ld: /home/bharal/.pythonbrew/pythons/Python-2.7.2/lib/libpython2.7.a(abstract.o): relocation R_X86_64_32 against `.rodata.str1.8' can not be used when making a shared object; recompile with -fPIC
/home/aiyer/.pythonbrew/pythons/Python-2.7.2/lib/libpython2.7.a: could not read symbols: Bad  value
collect2: ld returned 1 exit status
apxs:Error: Command failed with rc=65536 
```

我不知道该怎么做。我遇到了这个答案是这样的：

[https://stackoverflow.com/a/6118155/1061426](https://stackoverflow.com/a/6118155/1061426)

但这对我没有多大帮助-据我所知，这不是一系列步骤，而是更多值得思考的有趣花絮。

我运行了这个命令来检查我是否有 python 64 位：

```
import sys
print maxint 
```

如果 64 位 ==> 9223372036854775807 如果 32 位 ==> 2147483647

好的，所以我是运行 64 位的手提袋，因为我得到了更大的数字。所以我在这里读了这个文档：

[http://code.google.com/p/modwsgi/wiki/InstallationIssues#Mixing_32_Bit_And_64_Bit_Packages](http://code.google.com/p/modwsgi/wiki/InstallationIssues#Mixing_32_Bit_And_64_Bit_Packages)

*因为*我正在运行 64 位 python，这是否*意味着*我的问题不在于：

> 这个错误被认为是因为使用的 Python 版本最初是为通用 X86 32 位架构编译的，而 mod_wsgi 是为 X86 64 位架构编译的。在这种情况下会出现实际错误，因为“libtool”似乎无法从 X86 32 位静态库中为 X86 64 位体系结构生成可动态加载的模块。

而是这个？

> 或者，问题是由于此平台上的“libtool”在所有情况下都无法从 X86 64 位静态库创建可加载模块。

（以上引用来自上述链接）

如果*是*这样，我该怎么办？*在这两种*情况下我都没有最模糊的概念——是的，我阅读了该页面的其余部分，但它也可能是用希腊语写的（我不会说希腊语）。

有什么建议么？

更新：我从来没有解决这个问题，最终使用了我的 ubuntu 附带的 python - 从我的代码运行的角度来看没有区别。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T23:48:55.790

文档说：

> 如果是第一个问题，解决这个问题的唯一方法是为 X86 64 位架构重新编译 Python。这样做时，最好并且实际上可能有必要确保在编译和安装 Python 的“配置”脚本时为其提供“--enable-shared”选项。

因此，您需要从源代码重新安装 Python，确保在运行“make”之前将“--enable-shared”选项提供给 Python 的“configure”命令。

如果“pythonbrew”不允许您这样做，那么请告诉 pythonbrew 人员，他们构建具有共享库支持的 Python 版本的方式可能会被破坏，并且会阻止许多嵌入式系统运行失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T13:34:26.077

我自己在 Fedora 19 64bit 上遇到过这个问题，我发现如果我同时安装了 Python-devel 和 httpd-devel 软件包，mod_wsgi 会从源代码编译和安装。

但是，我没有使用 pythonbrew。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-18T06:28:09.830

我亲爱的 Python 开发人员，我也遇到了同样的错误，这就是我修复它的方法。第一步是您将安装带有`--enable-shared`选项的python。接下来，确保您为 Apache 和 Python 安装了开发依赖项。`sudo apt-get install apache2-dev`和`sudo apt-get install python3.8-dev`。我使用的是 Python 3.8，所以我安装了`python3.8-dev`. 您需要安装与您的 python 版本匹配的那个。

除此之外，请阅读这篇文章并密切遵循此处给出的说明[https://modwsgi.readthedocs.io/en/develop/user-guides/quick-installation-guide.html#apache-requirements](https://modwsgi.readthedocs.io/en/develop/user-guides/quick-installation-guide.html#apache-requirements)

我只是跟着它，并且能够使它正常工作。

# rfid - rfid标签：相同的标签，不同的阅读器上的不同代码

> ID：11332718
> 
> 赞同：0
> 
> 时间：2012-07-04T16:28:26.747
> 
> 标签：rfid

有人熟悉这里的 RFID 代码吗？

我这里有一个 EM4102 类型的标签。我的手持阅读器在显示屏上显示：

```
EM4102 tag, ID 04178649C1 
```

相同的标签，当在 Gigatek/Promag PCR125 CF 卡读卡器上读取时，给了我完全相同的代码：

```
04178649C1 
```

然而，一个 ACG RF PC CF 卡读卡器给了我代码

```
20E8619283 
```

该阅读器能够读取不同类型的标签并报告正确的类型（EM4x02，长度 5 个字节）。

我尝试了几个相同型号的阅读器，他们都给了我相同的代码。

我猜读者只是以不同的方式报告代码。也许我必须移动一些位（不会是第一次）或者代码中仍然包含纠错位？

仅供参考，读者[在此处](http://www.cardnology.com/files/20090221164810_lf_multitag_v1_0_user_manual_02.pdf)记录。有关此类标签的部分仅说明：

> EM4x02 标签仅提供 5 个字节的序列号。标签在进入激励场后立即开始发送响应。每个转发器都有自己唯一的序列号，不能更改。

知道读者在做什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T08:00:14.747

我自己想通了。

二进制的 20E8619283 是：

```
0010 0000   1110 1000   0110 0001   1001 0010   1000 0011 
```

这些是五个字节，每个字节有两个半字节。镜像每个字节的位顺序（位 0 变为位 7，位 1 变为 2 等）我得到：

```
0000 0100   0001 0111   1000 0110   0100 1001   1100 0001 
```

以十六进制表示的正确代码为 04178649C1。

所以显然读者没有以正确的顺序解释/报告这些位......

# c# - 打破 C# 实例化的批处理脚本以获取 shell？

> ID：11332722
> 
> 赞同：2
> 
> 时间：2012-07-04T16:28:42.003
> 
> 标签：c#, batch-file, dos

我正在尝试验证应用程序的安全性。场景是这样的：
AC# WinForms 应用程序由有限的用户通过终端服务（没有桌面，只有应用程序）运行。这个 C# 应用程序可以做的一件事是执行一个批处理文件，该文件以提升的权限运行一个冗长的进程。恐怕受限用户可能会中断批处理脚本（vua Ctrl+C 或其他方法）并获得对底层提升外壳的访问权限。

我自己尝试使用 Ctrl+C 和 Ctrl+Break 等的各种组合来执行此操作。我能得到的只是“终止批处理作业？（Y/N）”提示，如果您选择终止，则立即进行控制返回到 C# 应用程序（这很好）。我还没有找到解决这个问题的方法，但这对我来说似乎很危险。

有谁知道打破 C# 实例化批处理脚本并在不返回 C# 应用程序的情况下访问底层 shell 的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:31:32.250

不，不要认为有一个。但如果你真的很担心，为什么不在你可能用来阻止用户交互的对象`CreateNoWindow`上设置属性呢？`ProcessStartInfo``true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:41:46.553

不是您描述的场景的完全答案，而是另一种看待它的方式。

如果可能的话，我将拥有一个“作业服务器”，其唯一职责是运行您的终端服务运行应用程序创建的作业。然后，您将通过 WCF 将作业（或只是参数）传达给服务器。用户将无权访问服务器并且对作业的控制很少（可能只是取消选项和成功/失败状态报告）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T08:36:01.157

你可以做这样的事情（在你的应用程序上有一个文本框）

```
ProcessStartInfo info = new ProcessStartInfo();
info.Arguments = "/C ping 127.0.0.1";
info.WindowStyle = ProcessWindowStyle.Hidden;
info.CreateNoWindow = true;
info.FileName = "cmd.exe";
info.UseShellExecute = false;
info.RedirectStandardOutput = true;
using (Process process = Process.Start(info))
{
    using (StreamReader reader = process.StandardOutput)
    {
        string result = reader.ReadToEnd();
        textBox1.Text += result;
    }
} 
```

然后你可以看到批处理的结果，而用户根本无法真正看到窗口，这样它就只能作为一个进程可见，所以他们不能中断它。

![在此处输入图像描述](../Images/ec9ff0172c9e031281ebd5a138df69d0.png)

# flash - 如何改变刚刚绘制的Shape的颜色（ActionScript）

> ID：11332724
> 
> 赞同：0
> 
> 时间：2012-07-04T16:28:53.657
> 
> 标签：flash, actionscript

我已经画了一些图形（圆形、矩形或只是一条线），然后我想改变它们的颜色而不绘制另一个覆盖它们的图形，这可能吗？

```
graphics.beginFill(0x000000, 1);
graphics.drawCircle(70, 67, 2);
graphics.drawCircle(90, 67, 2);
graphics.endFill(); 
```

在这段代码之后可以改变那些圆圈的颜色吗？过段时间再说吧……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:19:14.727

它是，它不是。一旦你绘制了那个形状，它就会被烘焙到该帧的绘制缓冲区中。如果您已将其绘制到主帧缓冲区，就是这样，没有变化。您可以做的是将其绘制到 a`Sprite`或`MovieClip`和 use的单独实例中[`ColorTransform`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/ColorTransform.html)。

```
var mc:MovieClip=new MovieClip();

mc.graphics.beginFill(0x000000, 1);
mc.graphics.drawCircle(70, 67, 2);
mc.graphics.drawCircle(90, 67, 2);
mc.graphics.endFill(); 
```

然后：

```
var c:ColorTransform = new ColorTransform();
c.color = (Math.random() * 0xFFFFFF);
mc.transform.colorTransform = c; 
```

将形状放入 a`MovieClip`还具有不必在每一帧上手动重绘它的优点（清除正常的帧缓冲区不会清除's），还意味着您可以使用and`MovieClip`轻松移动它。`mc.x``mc.y`

只是出于好奇，为什么不能在绘制时设置颜色？

# c++ - 将 OpenCv Mat 插入 C++ std::vector

> ID：11332726
> 
> 赞同：1
> 
> 时间：2012-07-04T16:28:59.170
> 
> 标签：c++, opencv, stl, vector

我将 Mat 对象推入 std::vector。

但是，当我在那之后尝试访问元素（Mat）时，它并没有给我之前推送的图像，这取决于 frameOrientation。

例如，在下面的情况下，我得到与“before_push_rotated3.jpg”相同的“after_push_rotated2.jpg”，这不应该是。

如果我将 frameOrientation 设置为所有“2s”或“4s”，“after_push_rotated1/2/3.jpg”都是相同的并且等于“before_push_rotated3.jpg”。

这里有什么问题？

```
#include <cv.h>
#include <cxcore.h>
#include <highgui.h>
#include <iostream>
#include <vector>

using namespace cv;
using namespace std;

vector<Mat> checkOrientationAndRotate()
{
    Mat frame1 = imread("1.jpg" );
    Mat frame2 = imread("2.jpg" );
    Mat frame3 = imread("3.jpg" );

    vector<Mat> frameList;
    vector<Mat> frameList_rotated;

    frameList.push_back(frame1);
    frameList.push_back(frame2);
    frameList.push_back(frame3);

    Mat transposedFrame;
    Mat rotatedFrame;

    int i=0;
    for (vector<Mat>::iterator iter = frameList.begin(); iter != frameList.end(); iter++)
    {
        //Check for orientation of that frame
        int frameOrientation;
        if (i==0) frameOrientation = 1;
        if (i==1) frameOrientation = 2;
        if (i==2) frameOrientation = 4;

        switch (frameOrientation)
        {
        case 1: //1 - no rotate
            rotatedFrame = *iter;
            break;

        case 2: //2 - rotate it ACW 90 deg
            transpose(*iter, transposedFrame);
            flip(transposedFrame, rotatedFrame, 0);
            break;

        case 3: //3 - rotate it 180deg
            flip(*iter, rotatedFrame, -1);
            break;

        case 4: //4 - rotate it CW 90 deg
            transpose(*iter, transposedFrame);
            flip(transposedFrame, rotatedFrame, 1);
            break;
        default:
            break;
        }

        //Check frame before pushing into vector
        if (i==0) imwrite("before_push_rotated1.jpg",rotatedFrame);
        if (i==1) imwrite("before_push_rotated2.jpg",rotatedFrame);
        if (i==2) imwrite("before_push_rotated3.jpg",rotatedFrame);

        frameList_rotated.push_back(rotatedFrame);

        //Check frame after pushing into vector.
        //Depending on the frameorientation, the frames are not the frames pushed in earlier!
        int n=0;
        for (vector<Mat>::iterator iter = frameList_rotated.begin(); iter != frameList_rotated.end(); iter++)
        {
            Mat frame = *iter;
            if (n==0) imwrite("after_push_rotated1.jpg",frame);
            if (n==1) imwrite("after_push_rotated2.jpg",frame);
            if (n==2) imwrite("after_push_rotated3.jpg",frame);
            n++;
        }

        i++;
        } //for

        return frameList_rotated;

}

void main()
{
    vector<Mat> frameList_rotated = checkOrientationAndRotate();
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T16:53:16.030

*[我最近没有使用 OpenCV，所以我可能是错的，如果我是，请告诉我:)]*

`Mat`表示（某种）图像标题，而不是图像数据。OpenCV 在内部维护了一种引用计数机制，以避免在不同区域之间复制大量图像像素数据。当你说：

```
Mat a = b; // Only headers are copied, both a and b refer to the same image. 
```

在上述情况下，如果您修改`b`，更改也将反映在`a`中。在这种情况下您需要使用的是：

```
Mat a = b.clone(); 
```

* * *

关于您的情况，我真的认为以下行应该可以解决问题（如果没有，控制流可能还有其他问题，呵呵）：

尝试更换：

```
Mat transposedFrame;
Mat rotatedFrame; 
```

和：

```
 //create a new image, not just the headers..
Mat transposedFrame(Size(image_width, image_height), image.type());
Mat rotatedFrame(Size(image_width, image_height), image.type()); 
```

# c# - 如何通过代码在一个实例中创建 .NET 程序的另一个实例？

> ID：11332731
> 
> 赞同：4
> 
> 时间：2012-07-04T16:29:23.880
> 
> 标签：c#, .net, winforms, c#-4.0, .net-4.0

我需要能够在单击按钮时创建另一个全新的程序实例，同时保留现有实例。

```
this.ShowDialog(new Form1()); 
```

上面的语句导致当前表单成为新表单的所有者，我需要第二个实例独立于现有实例。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T16:53:05.637

在这里阐述 Desolator 的答案是一个简单的例子，你可以尝试一个表单和一个按钮：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Process p = new Process();
        p.StartInfo.FileName = Application.ExecutablePath;
        p.Start();
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-04T16:31:56.630

您可以使用 instead `new Form1().Show();`，但是当您当前的实例存在时，另一个也将退出。因此，要完全独立，最好使用[`System.Diagnostics.Process.Start(string path)`](http://msdn.microsoft.com/en-us/library/53ezey2s.aspx)哪个启动您的程序，就像双击它一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:33:51.363

```
(new Form1()).Show();

(new Form1()).Show(); 
```

# jquery - 我如何根据语言环境在 RAD 门户服务器中本地化 jquery datepicker 为法语或英语

> ID：11332736
> 
> 赞同：1
> 
> 时间：2012-07-04T16:29:42.173
> 
> 标签：jquery, jquery-ui, localization, rad, websphere-portal

在我拥有的任何jsp中

```
<f:view locale="javaclass.locale"> 
```

usercontext.java 存储登录用户的语言环境。我可以访问语言环境

```
usercontext.getlocale(); 
```

我需要日期选择器根据登录用户自动以法语或英语显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T23:46:46.927

[使用与http://jqueryui.com/datepicker/#localization](http://jqueryui.com/datepicker/#localization)上的本地化演示类似的方法，您可以使用一个小脚本在通过 jQuery 创建日期选择器之前在日期选择器上设置默认语言环境。

```
<script type="javascript">
    $.datepicker.setDefaults($.datepicker.regional["${usercontext.locale}"]);
</script> 
```

或者您可以在创建日期选择器时设置它的语言环境。

```
<script type="javascript">
    $("#datepicker").datepicker($.datepicker.regional["${usercontext.locale"]);
</script> 
```

# razor - windows 的咆哮 - 未解析 rss 提要 - 格式错误？

> ID：11332738
> 
> 赞同：2
> 
> 时间：2012-07-04T16:29:53.520
> 
> 标签：razor, rss, xml-parsing, growl-for-windows

所以我正在尝试使用自定义订户 SDK for Growl for Windows。尝试动态创建 RSS 提要。使用 C#，带有 Razor 视图。这是我指向订阅者 url 的视图的示例：

```
@model GrowlExtras.Subscriptions.FeedMonitor.FeedItem
<?xml version="1.0" encoding="UTF-8" ?>

@{
    Response.ContentType = "application/rss+xml";
    ViewBag.Title = "Feed";
}

<rss version="2.0">
    <channel>
        <title>@Model.Title</title>
        <link>@Url.Action("Feed", "Home", null, "http")</link>
        <description>@Model.Description</description>
        <lastBuildDate>@Model.PubDate</lastBuildDate>
        <language>en-us</language>
    </channel>
</rss> 
```

使用此 url 在本地（目前）访问此页面：`http://localhost:2751/Home/Feed`。所以，我将这个 url 作为“订阅通知弹出窗口”上的“Feed Url：”.. 但是收到错误“无法解析 feed”并且 OpenReadCompletedEventArgs e 结果引发异常“OpenReadCompletedEventArgs '（e .Result).Length' 引发了“System.NotSupportedException”类型的异常”

欢迎任何帮助！我是在这里完全找错了树，还是只是在提要文件的格式上遗漏了一些东西？不要认为这与页面目前在本地托管的事实有关吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T21:40:57.187

真正的答案是 Razor 会验证您尝试编写的内容是否是有效的 HTML。如果你不这样做，Razor 就会失败。

您的代码试图编写不正确的 HTML：

如果您查看[w3schools 中链接标签的文档，](http://www.w3schools.com/tags/tag_link.asp)您可以阅读以不同方式表达的相同内容：

*   “该元素是一个空元素，它只包含属性。”
*   “在 HTML 中，标签没有结束标签。”

这意味着链接是一个单例标签，因此您必须将此标签写为自闭合标签，如下所示：

`<link atrib1='value1' attrib2='value2' />`

所以你不能做你想做的事情：使用带有内容的开始和结束标签。

这就是 Razor 无法生成此`<xml>`文档的原因。

但是有一种方法可以欺骗 Razor：不要让它知道你正在编写标签，如下所示：

`@Html.Raw("<link>")--your link's content--@Html.Raw("</link>")`

请记住，Razor 用于编写 HTML，因此使用它编写 XML 可能会有些棘手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T08:45:38.960

对。现在整理好了这个。

需要更多的挖掘！上面的页面没有正确解析为有效的 xml 页面，例如 - 此处正在生成 html 标记，这会引发相关插件的 rss 解析器。

我最终做的是使用内置的 RSS Syndication 类，并从这些帖子/有关该主题的相关答案中获得一些帮助。

```
<http://stackoverflow.com/a/825016/1152015>
<http://stackoverflow.com/a/684518/1152015>
<http://stackoverflow.com/a/1292769/1152015>
<http://stackoverflow.com/a/2690302/1152015>
<http://stackoverflow.com/a/3098559/1152015>
<http://msdn.microsoft.com/en-us/library/bb412174> 
```

所以，澄清一下 - 我有使用 rss 提要的代码，但是动态生成的页面没有被我使用的解析器正确解析。

# android - 在android中实现View Pager

> ID：11332739
> 
> 赞同：0
> 
> 时间：2012-07-04T16:30:05.497
> 
> 标签：android

我有一个问题，我必须将水平滑动视图实现为分页系统，并且每个页面都显示来自服务器的数据，这意味着每个页面都在运行时显示动态数据。我认为 View Pager 是可能的，但在 View Pager 中没有任何固定的布局显示在特定页面上，所以，首先我们如何做到这一点，其次在 View Pager 中，所有视图都应该预先设计或预先实现，或者我们可以说我们必须知道的观看次数。但是当我们想在用户滑动页面时使其动态化时，它会转到下一页，但会出现进度条以显示相应页面的数据。那么，我们怎样才能做到这一点呢？请向我建议任何有关相同的解决方案。

**查看寻呼机：**

**查看寻呼机演示**`http://android-developers.blogspot.in/2011/08/horizontal-view-swiping-with-viewpager.html`

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:43:39.653

您是否尝试过实施

```
viewPager.setOnPageChangeListener(this); 
```

检测页面变化并加载页面内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T14:40:27.757

该解决方案不在 ViewPager 中，而是在您的自定义 PagerAdapter 中。您必须继承 PagerAdapter 并添加一个方法来向您的适配器添加内容并在此方法中调用方法 notifyDataSetChanged ：

```
public void addPage(Object page) {
    // Add page to the arraylist of adapter 
    notifyDataSetChanged();
} 
```

# amazon-ec2 - 是否可以将新的 EC2 实例附加到当前附加到另一个在可达性检查中失败的 EC2 实例的 EBS 卷？

> ID：11332740
> 
> 赞同：2
> 
> 时间：2012-07-04T16:30:07.770
> 
> 标签：amazon-ec2, amazon-web-services, amazon-ebs

我有一个 EC2 小实例，它附加了两个 EBS 卷并将 EBS 作为根设备。现在由于某种原因无法访问 EC2 实例（AWS 工程师正在调查它）。与此同时，我们正在考虑启动另一个 EC2 实例并将其附加到两个 EBS 卷。为此目的的最佳做法是什么？在重新附加到新的 EC2 实例之前，我是否需要拍摄卷的快照？我们可以在不破坏卷上现有数据的情况下附加到它们吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T17:45:43.480

您无需拍摄快照即可将卷附加到新实例。您可以简单地分离卷并将它们重新附加到新实例。
您的数据不会在此过程中被破坏。
希望能帮助到你。

# biopython - 通过 biopython 连接到 Ensembl

> ID：11332743
> 
> 赞同：4
> 
> 时间：2012-07-04T16:30:25.073
> 
> 标签：biopython

我刚刚加入 python 和 biopython 工作，喜欢连接 Ensebml 并获取一些序列和其他数据，如 TSS、一些基因列表等。但我的问题是我似乎无法在 biopython 中找到任何方法或模块来做所以。我知道这是使用 Ensembl API 在 perl 中非常常规的事情。如果有人告诉我或将我指向一个文档以了解这些事情是如何在 biopython 中完成的，我真的很感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T10:07:04.533

您需要使用并安装 pyCogent 模块。然后与 Ensembl 相关的具体内容在这里： http: [//pycogent.org/examples/query_ensembl.html](http://pycogent.org/examples/query_ensembl.html)

根据您想要做什么，您可能更喜欢使用 Ensembl 的 REST API，它位于：http: [//beta.rest.ensembl.org](http://beta.rest.ensembl.org)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:49:01.553

BioStar有[一个类似的问题和一些答案](http://www.biostars.org/post/show/536/is-there-a-non-perl-alternative-to-accessing-ensembls-api/)。

# c++ - 未找到使用 NDK + Cygwin 的 OpenCV 库

> ID：11332745
> 
> 赞同：0
> 
> 时间：2012-07-04T16:30:47.213
> 
> 标签：c++, opencv, android-ndk, cygwin

我正在使用 NDK 为 Android 做一个应用程序。这是我编译 de C++ 代码时收到的代码：

```
Compile++ thumb  : pfc_paquete_libreria_PFClib <= pfc_paquete_libreria_PFClib.cpp
In file included from jni/opencv2/core/core.hpp:4342,
             from jni/pfc_paquete_libreria_PFClib.cpp:5:
jni/opencv2/core/operations.hpp:62:33: error: ext/atomicity.h: No such file or directory 
```

我在 Cygwin 的库中找到了“atomicity.h”，但 GCC 编译器没有找到它们。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:35:15.410

如果您知道 atomicity.h 在哪里，只需使用编译器的 -I 开关将它所在的目录添加到包含目录即可。

# android - 如何在 OpenCv 中将浮点图像转换为 32 位单通道？

> ID：11332754
> 
> 赞同：1
> 
> 时间：2012-07-04T16:31:23.033
> 
> 标签：android, image-processing, opencv, computer-vision

我正在进行分水岭分割，标记图像是从经过距离变换的源图像派生的。距离变换返回一个浮点图像（我不知道位深度），我无法通过分水岭方法将其放入，因为它需要 32 位单通道图像。

我可以使用 mat 的 convertTo 方法将位深度设置为 32 吗？我也很难显示浮点图像，因为 matToBitmap() 方法似乎不接受它们。（在安卓中）

```
Mat mImg = new Mat();
Mat mThresh = new Mat();
Mat mDist = new Mat();

ImageView imgView = (ImageView) findViewById(R.id.imageView);
Bitmap bmpIn = BitmapFactory.decodeResource(getResources(),
        R.drawable.w1);

Utils.bitmapToMat(bmpIn, mImg);

Imgproc.cvtColor(mImg, mImg, Imgproc.COLOR_BGR2GRAY);
Imgproc.threshold(mImg, mThresh, 0, 255, Imgproc.THRESH_BINARY
        | Imgproc.THRESH_OTSU); 

//Marker image for watershed
Imgproc.distanceTransform(mThresh, mDist, Imgproc.CV_DIST_L2, Imgproc.CV_DIST_MASK_PRECISE);

//Conversions for watershed
Imgproc.cvtColor(mThresh, mThresh, Imgproc.COLOR_GRAY2BGR, 3);

//Floating-point image -> 32-bit single-channel
mDist.convertTo(...);

Imgproc.watershed(mThresh, mDist); //

Bitmap bmpOut = Bitmap.createBitmap(mThresh.cols(), mThresh.rows(),
        Bitmap.Config.ARGB_8888);       

Utils.matToBitmap(mThresh, bmpOut);
imgView.setImageBitmap(bmpOut); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:08:44.793

是的，您可以使用 convertTo 函数将任何 opencv 矩阵转换为另一种类型。要转换的类型应设置在具有相同大小的目标矩阵中。convertTo 具有可选参数 scale 和 shift，因此您可以在转换为定点深度时避免裁剪和量化错误。所以对于你的代码：

```
Mat mDist32 = Mat(mDist.rows,mDist.cols,CV_32SC1); // 32 bit signed 1 channel, use CV_32UC1 for unsigned
mDist.convertTo(mDist32,CV_32SC1,1,0);
Imgproc.watershed(mThresh,mDist32); 
```

# html - DIV 布局使用浮动或块内将 div 向右对齐

> ID：11332759
> 
> 赞同：1
> 
> 时间：2012-07-04T16:31:51.383
> 
> 标签：html, css

我正在尝试将一些 div 对齐到此结构中，但没有任何效果。

```
<div>
     <div>top</div>
     <div>middle
          <div>left</div> <div>right</div>
     </div>
     <div>bottom</div>
</div> 
```

我尝试过使用带有绝对值、块等的浮点数，我得到的最接近的是块内联，但我需要右对齐的 div 只是靠近左 div，我添加了文本右对齐，没有任何乐趣。

非常感谢 D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:42:10.930

试试这个

```
<div>
    <div>top</div>
    <div>
        <div style="float:left;">left</div>
        <div style="float:left;">right</div>
    </div>
    <div style="clear:both;">bottom</div>
</div> 
```

带有 clear:both 的底部 div 可能还不够，但在这个特定示例中可以解决问题

谷歌clearfix为此

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:41:54.700

给`left`和`right`div a`width`让他们`float`

确保您还通过在下面添加一个额外的 div 来清除浮动：`clear: both;`

代码：

```
<div id="wrap">
     <div id="top">top</div>
     <div id="mid">
         <div id="left">left</div>
         <div id="right">right</div>
         <div class="clear"></div>
     </div>
     <div id="bot">bottom</div>
</div>​ 
```

CSS：

```
div {
    background: #ccc;
    height: 15px;
    margin-bottom: 10px;
}

.clear {
    clear: both;
}

#wrap {
    width: 400px;
}

#top {

}

#mid {

}

#left {
    float: left;
    width: 200px;
}

#right {
    float: left;
    width: 200px;
}

#bot {

}
​ 
```

请参阅实际代码：http: [//jsfiddle.net/GZg6y/](http://jsfiddle.net/GZg6y/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:55:35.000

您可以通过不同的方式执行此操作，一种通过 float css 属性，确保您指定宽度，如下例所示：

```
<div class="container">
<div class="top">top</div>
<div class="middle">
   <div class="left">left</div> <div class="right">right</div>
</div>
<div  class="bottom">bottom</div> 
```

你的CSS应该是这样的：

```
.left{
float:left;
width:50%;
background:green;
}
.right{
float:right;
width:50%;
background:blue;
}
.bottom{
clear:both;
}​ 
```

见这里[http://jsfiddle.net/M3met/1/](http://jsfiddle.net/M3met/1/)

# javascript - IE6 和 7，JavaScript“未找到成员”错误

> ID：11332769
> 
> 赞同：1
> 
> 时间：2012-07-04T16:33:57.227
> 
> 标签：javascript, css, internet-explorer, internet-explorer-7, internet-explorer-6

我编写了一些将图像嵌入页面的 JavaScript。

最终结果在所有浏览器（甚至 IE6 和 7）上都是成功的，但在 IE6 和 7 上，我收到消息“第 15 行，第 5 个字符，未找到成员”。这是代码：

```
09: var url = getUrl();
10: url += 'Impression';
11: url += '?' + getParams();

12: var img = new Image();
13: img.src = url;
14: img.style = "display = 'none';";
15: document.body.insertBefore(img, document.body.firstChild); 
```

`document.body.insertBefore`IE6或7是否`document.body.firstChild`完全支持？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T16:38:55.633

IE 为无效的 CSS 属性分配引发错误。在这种情况下，`img.style = "display = 'none';";`无效。

它应该是以下之一：

*   `img.style.display = 'none';`
*   `img.style.cssText = "display:none;";`

# c# - c#处理来自mysql查询的空字节数组

> ID：11332770
> 
> 赞同：2
> 
> 时间：2012-07-04T16:34:02.447
> 
> 标签：c#, mysql, bytearray, byte, blob

我创建了一个基本上在 mysql 服务器上查找 blob 记录的应用程序我遇到的问题是，如果由于某种原因 blob 字段为空，则应用程序崩溃。我想到了类似的东西

我目前有

```
byte[] data = (byte[])DbReader[2]; 
```

但我想知道是否有任何方法可以做类似的事情

```
if (DbReader.IsDbNull(2)
    byte[] data = /* DEFAULT VALUE */
else
    byte[] data = (byte[])DbReader[2]; 
```

但我可以设置一个默认值吗？我尝试过的一切都失败了:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T16:37:20.230

这个怎么样：

```
byte[] data = null; 
```

数组是引用类型，因此您可以将 null 分配给它们。稍后您将能够像这样查看数据是否为空：

```
if(data != null)
{
    //there is data inside that array, you can go ahead and use it.
} 
```

**编辑：简化**

你可以像这样简化你的代码：

```
byte[] data = DbReader.IsDbNull(2) ? null : (byte[])DbReader[2]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:40:26.080

您可以将其设置为空数组：

```
byte[] data = new byte[0]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T17:42:13.763

如果你打算在多个地方使用它，你可以将它封装在一个扩展方法中......

```
public static class DbDataReaderExt {
    public static T GetOrDefault<T>(this DbDataReader reader, int index, T default_value = default(T)) {
        if (reader.IsDBNull(index))
            return default_value;
        return (T)reader[index];
    }
} 
```

...然后就这样使用它...

```
var data = reader.GetOrDefault<byte[]>(2); 
```

...或者像这样：

```
var data = reader.GetOrDefault(2, new byte[] { 1, 2, 3 }); 
```

顺便说一句，这也适用于非`byte[]`类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T16:41:29.563

您可以尝试[IsDBNull](http://msdn.microsoft.com/en-us/library/system.convert.isdbnull.aspx)方法：

```
object value = DbReader[2];
byte[] data = ... some default value
if (!Convert.IsDBNull(value))
{
    data = (byte[])value;
} 
```

# java - java字符串拆分除撇号以外的所有非字母数字

> ID：11332772
> 
> 赞同：26
> 
> 时间：2012-07-04T16:34:13.730
> 
> 标签：java, regex

所以我想在任何非字母数字字符上拆分java中的字符串。

目前我一直在这样做

```
words= Str.split("\\W+"); 
```

但是我想在其中保留撇号（“'”）。是否有任何正则表达式可以保留撇号但踢掉其余的垃圾？谢谢。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-07-04T16:35:47.140

```
words = Str.split("[^\\w']+"); 
```

只需将其添加到字符类。`\W`相当于`[^\w]`，然后您可以添加`'`到。

但是请注意，这`\w`实际上也包括下划线。如果您还想在下划线上拆分，则应该`[^a-zA-Z0-9']`改用。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-07-04T16:36:24.743

对于基本英文字符，使用

```
words = Str.split("[^a-zA-Z0-9']+"); 
```

如果要包含带有特殊字符的英文单词（例如*fiance*）或使用非英文字符的语言，请使用

```
words = Str.split("[^\\p{L}0-9']+"); 
```

# sql-server - 从访问 MSSQL 获取经纬度

> ID：11332773
> 
> 赞同：0
> 
> 时间：2012-07-04T16:34:19.797
> 
> 标签：sql-server, ms-access, spatial-index

我有一个包含场地信息的访问表。我正在玩弄[最近邻居](http://msdn.microsoft.com/en-us/library/ff929109.aspx)的东西，以向网站查看者展示离他们最近的即将发生的事件。

主要的内部数据库是 Access，但该网站从 MSSQL 中提取数据。我目前所做的是维护 Access 数据库，将表导出为 Excel 2003，将 .xls 传输到 Web 服务器，删除表并导入 .xls（在 SQL Management Studio 中）。

这是一个费力的过程，我刚刚意识到，当我导入 .xls 时，我将不得不检查并重置所有空间信息（设置主键，将 lat/lng 的数据类型设置为地理，给它一个空间索引）。

有没有办法自动化这个过程？有没有办法在导入过程中设置数据类型和键？显然，正确的做法是使用 MSSQL 作为后端并放弃所有工作。不幸的是，我的上级并没有接受做出改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:01:22.140

我在[使用基本空间数据的页面](http://www.west-wind.com/weblog/posts/2012/Jun/21/Basic-Spatial-Data-with-SQL-Server-and-Entity-Framework-50)上发现了一些信息，这些信息表明您可以将 lat/lng 作为单独`float`的字段和/或`POINT(lng,lat)`地理字段。

话虽如此，我可以在 Access 中有一个单独的 lat/lng 字段，它们应该导入 MSSQL。通过该页面，我什至不需要地理字段（浮动将使用一些额外的代码。假设，我应该能够使用查询从浮动字段填充地理字段。

# javascript - 删除对象/关联数组

> ID：11332776
> 
> 赞同：2
> 
> 时间：2012-07-04T16:34:25.340
> 
> 标签：javascript, object

假设我在 JavaScript 中创建了一个对象及其属性，如下所示 -

```
 var obj = {};
   obj['bar'] = 123;
   obj['bar']['foo'] = new Array();
   obj['bar']['xyz'] = new Array(); 
```

在此之后，我将元素推送到两个数组中。如果我再写

```
 delete obj['bar']; 
```

这两个数组也会被删除吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:40:39.113

> 这两个数组也会被删除吗？

假设没有其他任何东西对它们有任何引用，它们将有*资格进行垃圾收集。*根据该代码，什么都不会。何时以及是否*真正*清理它们取决于实施。

但请注意，即使在您 remove 之前，它们也有资格获得 GC `bar`，因为您的代码正在做一些非常奇怪的事情。见评论：

```
// Creates a blank object, so far so good.
var obj = {};

// Sets the `bar` property to the number 123.
obj['bar'] = 123;

// Retrieves the value of `bar` (the primitive number 123) and
// *converts* it into a `Number` instance (object), then
// creates a property on that object called `foo`, assigning a
// blank array to it. Because the Number object is never stored
// anywhere, both it and the array are IMMEDIATELY eligible for
// garbage collection. The value of `obj['foo']` is unaffected,
// it remains a primitive number.
obj['bar']['foo'] = new Array();

// The same happens again, a temporary Number instance and
// array are created, but both are IMMEDIATELY eligible for
// garbage collection; the value of `obj['bar']` is unaffected.
obj['bar']['xyz'] = new Array(); 
```

因此，您甚至不必删除`bar`，数组立即有资格进行垃圾收集。发生这种情况是因为在 JavaScript 中，数字是可以自动提升为`Number`对象的基元——但这不会影响分配给基元数字的属性的值。所以：

```
var obj = {};
obj['bar'] = 123;
obj['bar']['foo'] = [];         // [] is a better way to write new Array()
console.log(obj['bar']['foo']); // "undefined" 
```

如果您将`obj['bar'] =`线路更改为：

```
obj['bar'] = {}; 
```

或者

```
obj['bar'] = []; // Arrays are objects 
```

...然后`foo`and`xyz`属性不会立即消失，并且数组会一直存在直到`bar`被清理干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:36:55.727

`delete`本身不会清除数组，但会删除对它们的唯一现有引用。除非您在其他地方捕获对它们的引用，否则它们将被 GC 声明，因为在那之后它们将没有引用。

GC 何时、如何或是否实际回收它们的内存取决于实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:45:18.850

是的，您可以删除`obj['bar']`使关联数组`obj['bar']`符合垃圾收集条件的属性（假设在其他地方没有其他对它们的引用）。

你不能`delete obj`。但是，您可以使用`obj = null;`释放 obj 的属性以进行潜在的垃圾收集。

如果函数成功删除了某些内容，则该`delete`函数返回，如您在此[jsfiddle中所见](http://jsfiddle.net/8gVxy/)`true`

```
alert(delete obj['bar']); // alerts true; 
```

但是，您不能删除变量或函数。

```
var x = 2;
alert(delete x); // alerts false;

function x(){};
alert(delete x); // alerts false; 
```

如需进一步阅读，这里有一篇关于 javascript`delete`功能的精彩文章：http: [//perfectkills.com/understanding-delete/](http://perfectionkills.com/understanding-delete/)

# php - smarty tpl foreach

> ID：11332778
> 
> 赞同：0
> 
> 时间：2012-07-04T16:34:33.650
> 
> 标签：php, foreach, smarty

我使用 smarty tpl。

现在我有一个 php 代码，我想在 tpl 中使用它：

Tis 是数组的输出。

```
 stdClass Object
(
[Status] => success
[Time] => 2011-01-01 12:00:00
[IP] => 12.34.56.789
[Count] => 1
[Filter] => stdClass Object
    (
        [Sort] => ProductCode
        [Order] => DESC
        [Search] => 
        [ProductCode] => P001
        [ProductType] => 
    )

[Result] => stdClass Object
    (
        [Products] => Array
            (
                [0] => stdClass Object
                    (
                        [Identifier] => 1
                        [ProductCode] => test
                        [ProductName] => test
                    )

            )

    ) 
```

Tis 是有效的 php 代码：

```
 foreach ($product_list->Result->Products as $product) {
        echo $product->ProductName;
} 
```

我使用以下 tpl 代码，但这不起作用

```
 //in php
    $smarty->assign("data", $product_list); 

     //in tpl file
    {foreach item=item from=$data}

<tr>
    <td align="center">{$item.Result->Products->ProductName}</td>
    <td align="center"></td>
    <td align="center"></td>
    <td align="center"><a href="" class="usuallink">{$header.order}</a></td>
</tr>
{/foreach} 
```

有谁现在我可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:49:05.200

来自 php 的工作代码如下所示：

```
{foreach from=$data->Result->Products item=item}
    {$item->ProductName}
{/foreach} 
```

在 smarty3 中，它看起来更像纯 php：

```
{foreach $data->Result->Products as $item}
    {$item->ProductName}
{/foreach} 
```

# ios - 如何将用作 UITextField 中的 leftView 的 UILabel 与 textField 的文本垂直对齐？

> ID：11332782
> 
> 赞同：4
> 
> 时间：2012-07-04T16:34:58.790
> 
> 标签：ios, xcode, ios5, uitextfield, uilabel

我正在使用 a`UILabel`作为`leftView`a 的`UITextField`。问题是 textField 的文本高于标签的文本。

这是我到目前为止使用的代码

```
UILabel *startsWith = [[UILabel alloc] init];
startsWith.font = [UIFont systemFontOfSize:14];
startsWith.textColor = [UIColor blackColor];
startsWith.backgroundColor = [UIColor clearColor];
startsWith.text = @"Text";
[startsWith sizeToFit];
self.textField.leftViewMode = UITextFieldViewModeAlways;
self.textField.leftView = startsWith; 
```

我已经尝试稍微改变标签的框架，但它没有用......

如何对齐两个文本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T17:26:08.780

您可以创建一个容器视图，将`UILabel`1px 放置在其中。

```
 UIView * v = [[UIView alloc] init];
    v.backgroundColor = [UIColor clearColor];

    UILabel *startsWith = [[UILabel alloc] init];
    startsWith.font = self.textfield.font;
    startsWith.textAlignment = self.textfield.textAlignment;
    startsWith.textColor = [UIColor blackColor];
    startsWith.backgroundColor = [UIColor clearColor];
    startsWith.text = @"Text";
    [startsWith sizeToFit];

    startsWith.frame = CGRectOffset(startsWith.frame, 0, -1);
    v.frame = startsWith.frame;
    [v addSubview:startsWith];
    self.textfield.leftViewMode = UITextFieldViewModeAlways;
    self.textfield.leftView = v; 
```

# html - Bootstrap 2 CSS - 按钮下拉不超过表格内容

> ID：11332785
> 
> 赞同：2
> 
> 时间：2012-07-04T16:35:12.883
> 
> 标签：html, css, twitter-bootstrap

[这与https://github.com/twitter/bootstrap/issues/3287](https://github.com/twitter/bootstrap/issues/3287) （见图）相同的问题，但我不明白解决方案！

我有以下 HTML：

```
<div class="btn-toolbar">
   <div class="btn-group">
   <button class="btn dropdown-toggle" data-toggle="dropdown">Options<span class="caret"</span></button>
   <ul class="dropdown-menu">
      <li><a href="del"> Action 1</a></li>
      <li><a href="details"> Action 2</a></li>
      <li><a href="edit"> Action 2</a></li></ul></div></div>
   </ul>
   </div>
</div> 
```

它应该制作一个带有按钮的表格，可以单击该按钮以显示按钮中的一些下拉选项。

非常感谢 ：）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:52:10.723

这对我有用

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Test Page</title>
    <link rel="stylesheet" type="text/css" href="includes/bootstrap/css/bootstrap.min.css" />
</head>
<body>
 <table class="table">
    <tbody>
        <tr><td>some stuff</td><td>some more stuff</td></tr>
        <tr>
            <td>here's something</td>
            <td>
                <div class="btn-toolbar">
                    <div class="btn-group">
                        <button class="btn dropdown-toggle" data-toggle="dropdown">Options<span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li><a href="del"> Action 1</a></li>
                            <li><a href="details"> Action 2</a></li>
                            <li><a href="edit"> Action 2</a></li></ul></div></div>
                        </ul>
                    </div>
                </div>
            </td>
        </tr>
        <tr>
            <td>another row</td>
            <td>with more stuff</td>
        </tr>
    </tbody>
</table>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>
<script type="text/javascript" src="includes/bootstrap/js/bootstrap.min.js"></script>
</body>
</html> 
```

# php - 如何在 Joomla 中创建自定义插件！为周年纪念送上祝贺？

> ID：11332794
> 
> 赞同：0
> 
> 时间：2012-07-04T16:36:02.843
> 
> 标签：php, plugins, joomla

需要为我的客户发送周年祝贺。

知道如何开发吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:55:41.227

非常平淡的问题，但请您指点一下。

为此，您将需要两件主要的事情。

1.  用户数据库表中存储周年日期的列。
2.  一个基本的 PHP 脚本，在特定日期回显祝贺消息和用户名。

我不会为您编写代码，因为数据库列很简单，您可以从[Kunena 生日模块](http://extensions.schultschik.de/mod_sw_kbirthday)中获得脚本的灵感。

祝你好运

# sql - sql计算出查询的增长

> ID：11332796
> 
> 赞同：0
> 
> 时间：2012-07-04T16:36:22.623
> 
> 标签：sql

我正在尝试计算 2 年之间的增长百分比，但它返回的增长为 0。

```
SELECT my.finmonth,
   my.trnyear,
   my.drawofficenum,
   my1.ytdty,
   ly1.ytdly,
   CASE
     WHEN my1.ytdty <> 0 THEN ( my1.ytdty - ly1.ytdly ) / ly1.ytdly * 100
     ELSE 0
   END AS Growth2012
FROM   salestymonth my
   LEFT JOIN salestyytd my1
          ON my.finmonth = my1.finmonth
             AND my.trnyear = my1.trnyear
             AND my.drawofficenum = my1.drawofficenum
   LEFT JOIN saleslyytd ly1
          ON my.finmonth = ly1.finmonth
             AND my.trnyear = ly1.trnyear
             AND my.drawofficenum = ly1.drawofficenum
WHERE  my.finmonth = '1'
ORDER  BY ytdty DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T21:41:03.293

尝试 1.00*(my1.YTDTY - ly1.YTDLY) / ly1.YTDLY。如果您的列类型是整数，则除法不会得到非整数结果，除非您强制分子为小数或浮点数。

# .net - 在 .NET 中优雅地处理内存不足异常（或完全避免）

> ID：11332800
> 
> 赞同：3
> 
> 时间：2012-07-04T16:36:25.603
> 
> 标签：.net, out-of-memory

我有一个作业处理器，它需要并行处理约 300 个作业（作业最多可能需要 5 分钟才能完成，但它们*通常是*网络绑定的）。

我遇到的问题是，工作往往以特定类型的形式出现。为简单起见，假设有六种工作类型，`JobA`通过`JobF`.

`JobA`-`JobE`是网络绑定的，可以很高兴地让 300 个一起运行而不会对系统造成任何负担（实际上，我已经设法在测试中让超过 1,500 个并排运行）。`JobF`（一种新的作业类型）也是网络绑定的，但它需要大量内存并且实际上使用 GDI 功能。

我确保我仔细处理所有带有`using`s 的 GDI 对象，并且根据分析器，我没有泄漏任何东西。只是`JobF`并行运行 300 比 .NET 愿意给我的内存更多。

处理这个问题的最佳实践方法是什么？我的第一个想法是确定我有多少内存开销，并在我接近极限（至少是`JobF`作业）时限制生成新作业。我无法实现这一点，因为我找不到任何方法来可靠地确定框架愿意在内存方面分配给我什么。我还必须猜测一个看起来有点古怪的工作使用的最大内存。

我的下一个计划是在我收到 OOM 时简单地限制并重新安排失败的作业。不幸的是，OOM​​ 可能发生在任何地方，而不仅仅是在有问题的作业内部。事实上，最常见的地方是管理作业的主工作线程。就目前情况而言，这会导致进程正常关闭（如果可能）、重新启动并尝试恢复。虽然这很有效，但它既讨厌又浪费时间和资源——比仅仅回收那个特定的工作要糟糕得多。

是否有处理这种情况的标准方法（添加更多内存是一种选择并且会完成，但应用程序应该正确处理这种情况，而不仅仅是炸弹）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T19:14:32.320

> 只是并行运行 300 个 JobF 使用的内存比 .Net 愿意给我的要多。

那么，不要这样做。[在系统ThreadPool](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.aspx)中排队您的作业。或者，或者，横向扩展并将负载分配到更多系统。

此外，如果发生内存不足异常，请查看[CER以至少运行清理代码。](http://msdn.microsoft.com/en-us/magazine/cc163716.aspx)

**更新**：另一件要注意的事情，因为你提到你使用 GDI，它可以抛出一个[不是](https://stackoverflow.com/a/3848178/31158)[内存不足](https://stackoverflow.com/a/3848178/31158)[*的*](https://stackoverflow.com/a/3848178/31158)`OutOfMemoryException`东西。[](https://stackoverflow.com/a/3848178/31158)

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T00:53:08.547

我正在做一些与您的情况类似的事情，并且我选择了一种方法，其中我有一个任务处理器（在一个节点上运行的主队列管理器）和在一个或多个节点上运行的尽可能多的代理。

每个代理都作为一个单独的进程运行。他们：

*   检查任务可用性
*   下载所需数据
*   处理数据
*   上传结果

队列管理器的设计方式是，如果任何代理在作业执行期间失败，它将在一段时间后简单地重新分配给另一个代理。

![8 个代理在一个盒子中并排运行](../Images/b9f06e89b520d624c5c4434ba3f54f46.png)

顺便说一句，考虑不要让所有任务同时并行运行，因为在切换上下文时确实存在一些开销（可能很大）。在您的情况下，您可能会使用不必要的 PROTOCOL 流量而不是真实的 DATA 流量使网络饱和。

这种设计的另一个优点是，如果我开始在数据处理方面落后，我总是可以再打开一台机器（比如 Amazon C2 实例）并运行多个代理，这将有助于更快地完成任务库。

回答你的问题：

每个主机都将尽可能多地占用，因为在一台主机上运行的代理数量是有限的。当一项任务完成时，另一项任务将被无限期执行。我不使用数据库。任务不是时间关键的，所以我有一个进程可以在传入的数据集上循环运行，并在之前的运行失败时创建新任务。具体来说：

[http://access3.streamsink.com/archive/](http://access3.streamsink.com/archive/)（源数据）

[http://access3.streamsink.com/tbstrips/](http://access3.streamsink.com/tbstrips/)（计算结果）

在每次运行队列管理器时，都会扫描源和目标，减去结果集并将文件名转换为任务。

还有更多：

我正在使用 Web 服务来获取工作信息/返回结果，并使用简单的 http 来获取数据进行处理。

最后：

这是我拥有的 2 个经理/代理对中的一个更简单 - 另一个更复杂，所以我不会在这里详细介绍。使用电子邮件:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T23:09:32.283

理想情况下可以划分为进程配置文件。CPU 绑定，内存绑定，IO 绑定，网络绑定。我是并行处理方面的新手，但 TPL 擅长的是 CPU 限制，并且无法真正调整超过 MaxDegreeOfParallelism。

开始是 CPU 绑定获取 MaxDegreeOfParallelism = System.Environment.ProcessorCount -1

其他一切都得到 MaxDegreeOfParallelism = 100。我知道你说过网络的东西会扩大，但在某些时候限制是你的带宽。增加 300 个作业（占用内存）真的可以提高吞吐量吗？如果是这样，请查看 Joradao 的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T16:55:19.700

如果您的对象实现 IDisposable 接口，则不应依赖垃圾回收器，因为这可能会产生内存泄漏。

例如，如果您有该课程：

```
class Mamerto : IDisposable
{
    public void methodA()
    {
        // do something
    }

    public void methodB()
    {
        // do something
    }

    public void Dispose()
    {
        // release resources
    } 
```

你以这种方式使用那个类：

```
using( var m = new Mamerto() )
{
    m.methodA();
    m.methodB();
    // you should call dispose here!
} 
```

垃圾回收器会将 m 对象标记为“准备删除”，将其放入 Gen 0 回收中。当垃圾回收器尝试删除 Gen 0 上的所有对象时，检测到 Dispose 方法并自动将对象提升到 Gen 1（因为删除该对象并不“那么容易”）。Gen 1 对象的检查频率不如 Gen 0 对象，因此可能导致内存泄漏。

请阅读该文章以获取更多信息[http://msdn.microsoft.com/en-us/magazine/bb985011.aspx](http://msdn.microsoft.com/en-us/magazine/bb985011.aspx)

如果您继续进行明确的 Dispose，那么您可以避免这种烦人的泄漏。

```
using( var m = new Mamerto() )
{
    m.methodA();
    m.methodB();
    m.Dispose();
} 
```*

# c++ - 异常期间是否释放类中映射数据成员的内存

> ID：11332801
> 
> 赞同：2
> 
> 时间：2012-07-04T16:36:26.120
> 
> 标签：c++, memory-leaks

```
typedef struct {
    guint8  mode;     
    vector <string> match_src;  
} structConfig_t;

map < guint64, vector <structConfig_t> > mapConfig_t; 
```

然后上课如下

```
class Config {
  private :
     mapConfig_t mapConfig;

  public :
     Config(const char * config_fn) throw (string);
} 
```

构造函数解析 "config_fn" 提供的文件中的每一行，并构建 mapConfig 数据结构。在解析问题上，构造函数引发异常。

好奇地知道，如果在文件中间解析失败并引发异常，并且 mapConfig 到目前为止已经解析了数据，会发生什么情况，在这种情况下，mapConfig 使用的内存会自动放弃吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:44:02.267

> 如果解析失败 [...] 并引发异常 [...]，mapConfig 使用的内存会在这种情况下自动放弃吗？

是的; 如果构造函数体抛出异常，则所有成员和基类子对象将自动销毁。如果对象是使用 创建的`new`，那么分配的内存也将被自动释放。

顺便说一句，扔有点不寻常`string`；抛出从`std::exception`. 此外，异常说明符通常被认为是一个坏主意，并且在该语言的最新版本中已被弃用。

# iphone - iPhone 保存图像

> ID：11332803
> 
> 赞同：2
> 
> 时间：2012-07-04T16:36:36.447
> 
> 标签：iphone, objective-c, ios

我有一个带有缩略图的自定义单元格，用户可以从他们的相册中选择。我知道将图像保存到 Core Data 会导致性能不佳，我应该使用文件系统。

任何人都推荐一些很好的教程。如果我不在那里存储图像，我应该在核心数据中存储什么。

我还将存储更大的图像，而不仅仅是缩略图。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:56:31.087

```
UIImage*image = [UIImage imageNamed:@"the image you wish to save.jpg"];

//build the path for your image on the filesystem
NSArray *dirPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *docsDir = [dirPath objectAtIndex:0];
NSString* photoName = @"imageName.jpg";
NSString *photoPath = [docsDir stringByAppendingPathComponent:photoName];

//get the imageData from your UIImage
float imageCompression = 0.5;
NSData *imageData = UIImageJPEGRepresentation(image, imageCompression);

//save the image                  
if(![imageData writeToFile:path atomically:YES]){
    return FALSE;
}

//store the imagePath to your model
photoModal.filePathImage = photoPath; 
```

尖端：

*   避免重复名称，这样您就不会覆盖现有文件（不要担心您会收到警告）
*   删除模型时记得删除照片
*   构建与您的模型匹配的逻辑路径和文件夹结构，例如 - album.photo 应该有一个名为专辑的文件夹，您应该在其中存储文件，在您删除相册模型时提供帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:42:40.703

您的核心数据数据库中应该有两个字段`thumbnailPath`：：`NSString`和`originalPath`：`NSString`

使用文件管理器，您可以在特定路径上创建缩略图和原始图像。所以您将拥有： ..../thumbs/myPicture_thumb.jpg 和 ..../originals/myPicture.jpg 然后您只需将这两个路径存储到您的核心数据数据库。

当您想显示其中一个时，您只需使用`UIImage`方法：[imageWithContentsOfFile](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/Reference/Reference.html)

就这样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:42:04.453

您可以将图像存储`Application Documents Folder`在 CoreData 或 sqlite 中，并将图像的路径保存在。参考图像及其路径。

# google-maps - 通过 Google Maps API v3 查询现有的公共 Google Map

> ID：11332804
> 
> 赞同：4
> 
> 时间：2012-07-04T16:36:39.847
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我正在尝试将现有的公共 Google 地图嵌入到网站中。特别是这个：http: [//goo.gl/maps/cHf2](http://goo.gl/maps/cHf2)

当然，我可以使用 iframe embed 来实现这一点，但我想要对地图进行更多控制……我想象能够从地图中提取所有标记并将它们显示为地图旁边的索引。有点像谷歌已经做的，但是用我自己的样式和图像嵌入到我的页面中。

我一直在挖掘 Google、Stack Overflow 和 API 说明，但找不到任何相关的帖子。在谷歌地图的 GET 字符串中，我们可以看到这个块：

*&msid=212828439842926497866.0004bfae4da003d8ffd1f&mid=1341413217*

我想可能有一个地图ID，我可以用它通过API查询地图的内容？其目的是将谷歌地图作为 CMS 用于技术意识较弱的人，而不是在我们自己的 CMS 中处理地理数据。

任何帮助将不胜感激。也许我只是为了树木而想念森林。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T17:05:56.973

您可以下载在该页面中指定标记的 kml，并将其显示在基于 API 的地图上。[此示例](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_linktoB.html?filename=http://www.geocodezip.com/geoxml3_test/ESPI_Lunch_map_kml.xml)默认使用 geoxml3 显示它，但您可以隐藏它并显示 KmlLayer 版本。

您应该能够将 KmlLayer 指向链接（我下载了 kml 并将其放在我的服务器上，以便它可以与 geoxml3 一起使用）。

[这是一个示例（直接取自文档）](http://www.geocodezip.com/v3_GoogleEx_layer-kml_A.html)

[这是原版](https://google-developers.appspot.com/maps/documentation/javascript/examples/layer-kml)

# c# - 如何在没有 try catch 块的情况下找出是否编写了任何方法

> ID：11332807
> 
> 赞同：1
> 
> 时间：2012-07-04T16:37:06.510
> 
> 标签：c#, regex, visual-studio-2010, visual-studio, code-standards

在 Visual Studio 2010 C# 项目中，如何确定是否编写了没有 try-catch 块的任何方法？

有时作为代码审查者，很难搜索未根据代码标准正确编写的函数/方法，尤其是：没有 try-catch 块。

我知道 Visual Studio 中的*Find*选项支持正则表达式。但是可以巧妙地完成这项工作的正则表达式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-04T16:46:14.007

**编辑（首先给出直接答案）：**实际上很容易使用[Assembly.ReflectionOnlyLoadFrom](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.reflectiononlyloadfrom.aspx)，然后枚举[类型](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.gettypes)和这些类型的[方法](http://msdn.microsoft.com/en-us/library/system.type.getmethods)，然后为每个[方法体](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.getmethodbody)检查[ExceptionHandlingClauses](http://msdn.microsoft.com/en-us/library/system.reflection.methodbody.exceptionhandlingclauses)。

**评论如下：**

Red Gate 曾经提供[Exception Hunter](http://www.red-gate.com/products/dotnet-development/exception-hunter/)工具来追踪可能的异常问题。如该页面所述，即使在自动分析工具的帮助下，您所请求的*特定*任务（广泛搜索任何未处理的异常）也不会导致更高质量的软件。

如果我需要查找没有受保护区域的所有方法的列表，我可以~~简单地使用我的一个实验性程序集加载器（根据 ECMA-335 相对容易地编写）并检查 ECMA-335，分区 II 中描述的元数据， §25.4.5 和 §25.4.6~~（更容易使用这个答案的第一部分）。如果我需要找到这些方法的列表以便为每个方法添加受保护区域以符合编码标准，我会报告他们需要找到另一个开发人员来执行此操作，因为我故意和故意拒绝降低我工作的软件的质量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:59:27.730

如果您有权访问 Visual Studio 2012（测试版可免费下载！），您可以使用“搜索代码克隆”选项。

通常这将搜索您的整个解决方案，但您可以将其范围限定为特定的代码段。您可以轻松地使用它来查找所有代码，例如，使用一次性对象。然后，您可以检查是否在任何地方都使用了 using 语句。

同样的机制可用于检查某段代码是否在 try/catch 块中使用。

这是一些 MSDN[文档](http://msdn.microsoft.com/en-us/library/tfs/hh205279%28v=vs.110%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:59:37.167

我**认为**您可以使用[Roslyn](http://en.wikipedia.org/wiki/Microsoft_Roslyn)来处理代码，并通过检查表达式树来查找哪些方法具有或不具有 try/catch 块。

我不建议您使用正则表达式来做到这一点。您必须编写一个非常复杂的脚本，该脚本将是一个基于方法块何时开始和何时完成的状态机，然后检查其中是否有 try-catch。

# ios - 在后台线程中搜索核心数据，函数随机终止

> ID：11332808
> 
> 赞同：0
> 
> 时间：2012-07-04T16:37:13.797
> 
> 标签：ios, multithreading, search, core-data, nsthread

这是我的搜索功能：

```
- (void)searchingMethod:(NSString *)aText{
    NSManagedObjectContext *context = [self managedObjectContext];
    NSEntityDescription *entity = [NSEntityDescription 
         entityForName:@"Entity" inManagedObjectContext:context];
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init]; 
    [fetchRequest setEntity:entity];
    NSPredicate *predicate = [NSPredicate 
          predicateWithFormat:@"word LIKE %@", 
          [searchBar.text lowercaseString]];
    [fetchRequest setPredicate:predicate];
    //fetching array
    NSLog(@"Place 1");
    NSArray *wordArray = [context 
    executeFetchRequest:fetchRequest 
    error:nil];
    NSLog(@"Place 2");

    [self performSelectorOnMainThread:@selector(refreshTableView:) 
                             withObject:wordArray waitUntilDone:NO];
    NSLog(@"Searching End");
} 
```

我用这个方法调用搜索函数：

```
- (void)searchBar:(UISearchBar *) searchBar textDidChange:(NSString *)Tosearch{
if([[searchBar text] length] >0)
{
    NSThread *aThread = [[NSThread alloc] 
        initWithTarget:self 
        selector:@selector(searchingMethod:) 
        object:searchBar.text];
    [aThread start];
}
else
{ 
    //others...
}
return;
} 
```

通常，我会得到这样的结果：</p>

```
2012-07-05 00:04:46.706 MyApp[2376:207] Place 1
2012-07-05 00:04:46.783 MyApp[2376:207] Place 2
2012-07-05 00:04:46.823 MyApp[2376:207] searching End 
```

搜索方法执行了十几遍后，就停在了这个位置。

```
2012-07-05 00:11:42.174 MyApp[2376:207] Place 1 
```

继续搜索几次，就恢复正常了。然后又奇怪了……这让我很困惑。

我花了很多天尝试不同的多线程方法，结果还是一样。
请帮帮我！谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T05:51:58.253

Core Data 不是线程安全的。`NSManagedObjectContext`您需要在后台线程上创建自己的。有了它，您可以在后台进行搜索。然后，您不能简单地将托管对象直接发送到主线程。您必须在主线程上传送对象 ID，并使用其`objectWithID:`方法从主上下文中为它们获取对象。

# google-apps-script - 在 Google Apps 脚本中使用 UTF-8 字符集

> ID：11332816
> 
> 赞同：2
> 
> 时间：2012-07-04T16:37:45.417
> 
> 标签：google-apps-script, utf-8, utf-16

我在脚本中使用以下内容：

```
var JSONResult = Maps.newGeocoder().geocode(member.address);
var AddressFormatted= JSONResult.results[0].formatted_address; 
```

结果有时看起来像

> Rue de Cognelée

我想强制将结果设为 UTF-8 字符集。我怎样才能做到这一点 ？

文森特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T06:02:53.260

您可以使用 Blob 进行字符集转换。此示例将“foo”从 UTF-8 转换为 UTF-16。

```
Utilities.newBlob("").setDataFromString("foo", "UTF-8").getDataAsString("UTF-16") 
```

# android - 无法在 Android 上加载 libGL.so

> ID：11332817
> 
> 赞同：82
> 
> 时间：2012-07-04T16:38:07.837
> 
> 标签：android

我正在使用带有 Oracle [JDK 7 的](http://en.wikipedia.org/wiki/Java_Development_Kit)[Ubuntu 12.04](http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_12.04_LTS_.28Precise_Pangolin.29) (Precise Pangolin) ，当我从[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29)运行 Android 模拟器时，它给出了这个错误：

```
[2012-07-04 02:52:10 - Emulator] error libGL.so: cannot open shared object file: No such file or directory 
[2012-07-04 02:52:10 - Emulator] Failed to load libGL.so 
```

模拟器也很慢。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-09-27T12:19:13.553

我将 Android SDK 安装到 ~/android-sdk-linux_x86 中，所以我做了：

```
ln -s /usr/lib/libGL.so.1 ~/android-sdk-linux_x86/tools/lib/libGL.so 
```

这解决了错误，就像链接到 /usr/lib 一样，但它不需要 root 并且不会与核心系统目录混淆。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2012-07-23T10:26:14.070

在 64 位 Ubuntu 12.04 上，这样做：

```
$ sudo apt-get install git-core gnupg flex bison gperf build-essential \
  zip curl libc6-dev libncurses5-dev:i386 x11proto-core-dev \
  libx11-dev:i386 libreadline6-dev:i386 libgl1-mesa-glx:i386 \
  libgl1-mesa-dev g++-multilib mingw32 openjdk-6-jdk tofrodos \
  python-markdown libxml2-utils xsltproc zlib1g-dev:i386
$ sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1 /usr/lib/i386-linux-gnu/libGL.so 
```

来源：*[安装所需的软件包（Ubuntu 12.04）](http://source.android.com/source/initializing.html)*

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-07-10T07:15:02.213

I am using Ubuntu 12.04 64-bit. Using the following command to solve the problem

```
 sudo ln -s /usr/lib32/fglrx/libGL.so.1.2 /usr/lib/libGL.so 
```

**Note**: This is applicable only to those who use the AMD/ATI graphic drivers.

* * *

## 回答 #4

> 赞同：32
> 
> 时间：2012-10-12T05:54:35.540

对于 32 位 Ubuntu 12.04 LTS，这有效：

```
sudo apt-get install libgl1-mesa-dev 
```

以下方法均无效：

```
cd /usr/lib/i386-linux-gnu/mesa/
sudo ln -s libGL.so.1.2 libGL.so 
sudo ln -s libGL.so.1.2 /usr/lib/libGL.so
ln -s libGL.so.1.2 ~/android/android-sdk-linux/tools/lib/libGL.so 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-01-30T12:26:21.327

对我有用的（ubuntu 12.04 64bit）只是运行：

```
 sudo apt-get install libgl1-mesa-dev 
```

我发现`libGL.so`目录中存在`/usr/lib/x86_64-linux-gnu/`

安装 32 位版本无法正常工作。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-07-05T08:00:26.473

在 64 位 Ubuntu 12.04 上，没有 /usr/lib64。它只是 /usr/lib。另外，在我的机器上，libGL.so 不存在。相反，该文件是 libGLEW.so

要安装 /usr/lib/LibGL.so，您可以运行： sudo apt-get install libgl1-mesa-dev

但是，它并没有为我解决问题。事实上，它可能搞砸了我的系统。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-18T17:44:05.017

这适用于 64 位 Ubuntu 12.10 和 ADT 捆绑包：

```
ln -s /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1 ~/adt-bundle-linux-x86_64/sdk/tools/lib/libGL.so 
```

如果你还没有`/usr/lib/x86_64-linux-gnu/mesa/libGL.so.1`安装`libgl1-mesa-glx`

```
sudo apt-get install libgl1-mesa-glx 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-07-11T16:15:40.107

我想我做对了，没有警告，也没有缓慢……不过，这可能不适用于专有驱动程序。

确保已安装 libgl1-mesa-glx:i386（即使您有 x64 SO 文件）。然后做：

```
sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1.2 /usr/lib/libGL.so 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-11-28T18:32:43.523

英伟达擎天柱：

在双显卡（英特尔和英伟达）上运行，我使用了以下内容：

1.  安装 Bumblebee（参见：[https](https://wiki.ubuntu.com/Bumblebee#Installation) ://wiki.ubuntu.com/Bumblebee#Installation ）
2.  安装所需的库。
3.  在 nvidia 独立卡上运行模拟器。

这应该可以解决问题：

```
sudo add-apt-repository ppa:bumblebee/stable
sudo add-apt-repository ppa:ubuntu-x-swat/x-updates
sudo apt-get update 
sudo apt-get install bumblebee bumblebee-nvidia linux-headers-generic 
sudo apt-get install ia32-libs 
```

每当您希望运行模拟器时，只需使用 optirun：

```
optirun emulator @<avd_name> 
```

我应该警告我昨天才安装 Linux。所以我真的不知道我在做什么......

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2012-08-22T03:57:10.760

参考[http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html)，我安装了 ia32-libs 并做了：

```
ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1.2 /usr/lib/i386-linux-gnu/mesa/libGL.so 
```

这就是我为解决这个问题所做的一切。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-07-17T02:06:49.047

我使用[Linux Mint](http://en.wikipedia.org/wiki/Linux_Mint) 14 - 64 位，对我来说，它有效:)：

```
sudo apt-get install libgl1-mesa-glx libgl1-mesa-dev 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2014-07-27T06:58:47.920

**在 64 位的 Ubuntu 上，**

**1.检查libGL，**

```
$ locate libGL.so
/usr/lib/i386-linux-gnu/mesa/libGL.so.1
/usr/lib/i386-linux-gnu/mesa/libGL.so.1.2.0
/usr/lib/x86_64-linux-gnu/mesa/libGL.so.1
/usr/lib/x86_64-linux-gnu/mesa/libGL.so.1.2.0 
```

**2.创建安装SDK的符号链接**

```
ln -s /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1 /usr/local/android-studio/sdk/tools/lib/libGL.so 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2013-01-13T20:40:37.917

要使其在64 位[Ubuntu 12.10 (Quantal Quetzal) 上运行，您必须做两件事：](http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_13.04_.28Raring_Ringtail.29)

1）您必须初始化 LD_LIBRARY_PATH

示例：

```
export LD_LIBRARY_PATH=~/tests/android/adt-bundle-linux-x86_64/sdk/tools/lib 
```

评论：更改您所在位置的路径

2）您必须创建一个符号链接

a)`locate libGL`用于查找正确的库：

```
rudy@vsolutions:~$ locate libGL
/home/rudy/opt/android/android-sdk-linux/tools/lib/libGLES_CM_translator.so
/home/rudy/opt/android/android-sdk-linux/tools/lib/libGLES_V2_translator.so
/usr/lib/i386-linux-gnu/libGLU.so.1
/usr/lib/i386-linux-gnu/libGLU.so.1.3.1
...
/usr/lib32/nvidia-current/libGL.so.304.43 
```

b) 创建软链接

```
sudo ln -s /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1.2.0 /usr/lib/libGL.so 
```

点评：在 64 位操作系统上使用 64 位库！

**现在启动模拟器** 我的系统是[擎天柱](http://en.wikipedia.org/wiki/Nvidia_Optimus)，我已经安装了[大黄蜂](http://en.wikipedia.org/wiki/Nvidia_Optimus#Bumblebee)。我可以使用“英特尔开源技术中心”“Mesa DRI Intel(R) Ironlake Mobile”“2.1 Mesa 9.0”或“NVIDIA Corporation”“GeForce GT 330M/PCIe/SSE2”“3.3.0 NVIDIA 304.43”。

a) 英特尔

```
/home/rudy/tests/android/adt-bundle-linux-x86_64/sdk//tools/emulator64-arm -avd avd_42 -scale 0.46 -gpu on -verbose 
```

b) 英伟达

```
optirun /home/rudy/tests/android/adt-bundle-linux-x86_64/sdk//tools/emulator64-arm -avd avd_42 -scale 0.46 -gpu on -verbose 
```

注释：

*   我没有看到 Intel 和 Nvidia 卡之间有任何区别……这当然是因为模拟器不是[GPU](https://en.wikipedia.org/wiki/Graphics_processing_unit)密集型的。
*   在我的英特尔酷睿 i5 系统上，启动模拟器需要将近 1 分钟...请耐心等待...我发现模拟器在加载后相当快（等待 1 分钟）。如果您从[Eclipse](http://en.wikipedia.org/wiki/Eclipse_%28software%29) [IDE](http://en.wikipedia.org/wiki/Integrated_development_environment)启动模拟器，那么模拟器会进行软件模拟（GPU 已关闭）并需要 1 分钟 30 分钟才能启动......这比使用 Intel 或 Nvidia 卡要慢得多！！！
*   `verbose`是用于显示更多诊断的参数
*   `optirun`是在 Bumblebee 上使用 Nvidia 的命令。如果您没有 Bumblebee，请不要使用它！
*   `avd`是一个虚拟设备
*   `gpu on`使用图形卡

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2012-10-18T12:12:51.620

On Ubuntu 12.04 64-bit, [GNOME](http://en.wikipedia.org/wiki/GNOME) 3.4, I first referred to [http://developer.android.com/sdk/installing/index.html](http://developer.android.com/sdk/installing/index.html) and installed ia32-lib, which will generate /usr/lib/i386-linux-gnu/mesa/libGL.so.1.2.0

Then I run the below command and solved this problem:

```
sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1.2.0 /usr/lib/libGL.so 
```

This is slightly different from gridstation's answer.

I guess there's no need to install the Mesa driver locally, which may cause issues with your real video drivers.

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-08-27T00:27:11.660

与 user1289608 类似，我能够从 Mesa 的现有安装中进行符号链接：

```
sudo ln -s /usr/lib/i386-linux-gnu/mesa/libGL.so.1.2 /usr/lib/libGL.so 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2013-12-31T10:13:59.097

我遇到过同样的问题。但就我而言，我以另一种（我认为更好）的方式解决了它。

在我的情况下（Lubuntu 13.10），只需`libgl1-mesa-dev`通过 Synaptic 包管理器安装库就足够了（在`libgl1-mesa-dri`设置 Lubuntu 发行版时，默认情况下已经安装了库）。

这解决了将链接从一个文件链接到另一个文件的所有麻烦，还可以防止污染您的系统：

*   几个月（或几年）之后，您如何知道您放置了哪些专用链接来保持系统运行？
*   如果您自己开始做这些事情，那么未来的更新呢？是否会因“人工干预”而损坏/不更新？

如果你使用“系统机制”，这一切都为你完成。并正确完成。这就是为什么这些工具首先存在的原因。

最好的rgds，

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2012-07-04T18:23:08.387

**OSError：libGL.so：无法打开共享对象文件：没有这样的文件或目录**

当您第一次尝试启动 VNL 时，它可能会出现在 Linux 系统上。要解决它，请（以管理员身份）在以下位置创建一个新链接`/usr/lib`：

```
sudo ln -s /usr/lib/libGL.so.1.2 /usr/lib/libGL.so 
```

如果您有 64 位 Linux，请使用`/usr/lib64 instead`.

首先检查你是否真的`libGL.so.1.2`有`/usr/lib`or `/usr/lib64`; 根据视频驱动程序，它可能会被调用`libGL.so.1`或其他名称，或者位于另一个目录中。

您可以使用 locate`libGL`来查找要链接到的正确文件。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-07-07T03:41:38.907

这对我有用：

从 DDMS 重新启动 adb：
在 Eclipse 中：Window > Open Perspective... > Other > DDMS。从左侧窗格中选择模拟器，然后选择“重新启动 adb”

您还可以从终端窗口重新启动 adb 服务器。

```
android-sdk-linux/platform-tools/adb kill-server
android-sdk-linux/platform-tools/adb start-server 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-03-18T11:01:29.293

我通过命令“locate”找到了 libGL 的文件夹

原来是在 /usr/lib/i386-linux-gnu/

> ~$ 定位 libGL
> /usr/lib/i386-linux-gnu/libGLEW.so.1.8
> /usr/lib/i386-linux-gnu/libGLEW.so.1.8.0
> /usr/lib/i386-linux-gnu/libGLEWmx .so.1.8
> /usr/lib/i386-linux-gnu/libGLEWmx.so.1.8.0
> /usr/lib/i386-linux-gnu/libGLU.so.1
> /usr/lib/i386-linux-gnu/libGLU .so.1.3.1
> /usr/lib/i386-linux-gnu/mesa/libGL.so.1
> /usr/lib/i386-linux-gnu/mesa/libGL.so.1.2.0

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2012-07-06T15:51:45.103

我正在使用 Ubuntu 12.04 64 位。链接`/usr/lib64/libGLC.so.0`到`/usr/lib64/libGL.so`似乎可以解决问题。

**编辑：**它会停止错误消息，但模拟器对我来说仍然很慢。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-08-21T15:15:10.923

我遇到了这个问题，因为我在创建 AVD 时检查了“使用主机 GPU”。我在未选中该选项的情况下进行了尝试，并且能够成功启动模拟器。这对于我的测试目的是可以接受的，但如果使用主机 GPU 很重要，您可能会想在这里尝试一些其他解决方案。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-07-14T10:06:31.663

```
sudo apt-get install libgl1-mesa-dev
cd ~/Development/adt-bundle-linux-x86_64-20140321/sdk/tools/lib
unlink libGL.so 
ln -s /usr/lib/x86_64-linux-gnu/mesa/libGL.so.1.2.0 libGL.so 
```

而已！

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2012-07-16T06:14:59.473

我有同样的问题。重新安装[Nvidia](http://en.wikipedia.org/wiki/Nvidia)驱动程序为我修复了[分段错误](http://en.wikipedia.org/wiki/Segmentation_fault)。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2013-12-10T03:53:28.580

对于我的 Debian 7 'Wheezy' 安装，我使用了以下命令：

```
ln -s /usr/lib/x86_64-linux-gnu/libGL.so.1 opt/android/tools/lib/libGL.so 
```

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2012-08-31T14:55:25.970

我通过重新安装 64 位和 32 位库 libgl1 解决了这个问题：

```
$ sudo apt-get install --reinstall libgl1-mesa-glx libgl1-mesa-glx:i386 
```

背景：以前我从免费的 radeon 驱动程序切换回 fglrx。我想这不知何故搞砸了我的 libgl1，因为 fglrx 有它自己的版本。

此外，我认为这里提供的其他解决方案可能很危险，因为将 32 位共享库符号链接到（64 位）/lib/ 目录是错误的。

* * *

## 回答 #26

> 赞同：-2
> 
> 时间：2012-07-04T22:16:52.543

检查您是否安装了`libgl1-mesa-*`软件包。如果是这样，请安装`libgl1-mesa-dev`软件包以获取未版本化的共享对象。

你不应该这样做——这是 Android 团队的错误。让他们休息一下，他们只是 Java 开发人员。

# javascript - 页面上任何图像的 javascript img src

> ID：11332819
> 
> 赞同：-1
> 
> 时间：2012-07-04T16:38:19.153
> 
> 标签：javascript, this, image, alert, src

我是 JS 新手 - 还在学习。我正在寻找类似于[此示例的解决方案](https://stackoverflow.com/questions/7882356/javascript-get-img-src-and-set-as-variable)

用于使用 onclick 在警报中显示图像的源链接。但是，我想将它应用于页面上的*任何*图像，并且任何图像上都没有 ID。或许这就是神秘的“this”的应用？谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:45:31.413

不，这与委托事件侦听器以及事件在 DOM 中传播的方式有关。

当您单击页面中的元素时，`click`会生成一个事件。对于您的目的而言，此事件在元素上触发，并被您定义的函数捕获`onclick`。

但是该事件也会“冒泡”到父级，并且它被`onclick`那里定义的函数（如果有的话）捕获。然后到父级的父级，依此类推。

现在，您要做的就是在根元素上捕获事件，它是`document`对象本身，或者`document.body`如果您仍想使用该元素`onclick`（已弃用），则可能是该元素。

事件对象被传递给 onclick 函数，它包含触发事件的原始元素：

```
document.body.onclick = function(e) {
    var tgt = e.target || e.srcElement;
    if (tgt.tagName === "IMG")
        alert(tgt.src);
} 
```

（这`e.target || e.srcElement`部分是因为在 IE<9`target`中调用了该属性`srcElement`。）这就是您定义委托事件侦听器的方式。`<img>`如您所见，它不是在元素上定义的，而是在它们的共同祖先上定义的。

但是由于您可以`click`以传统方式仅定义一个事件侦听器，因此我强烈建议您使用更现代的方法，例如该`addEventListener`方法，它允许您在同一元素上为同一事件类型添加多个事件侦听器：

```
document.body.addEventListener("click", function(e) {
    ...
}); 
```

在 Internet Explorer <9 中，您必须使用`attachEvent`，它非常相似但不一样。对于跨浏览器解决方案，请使用常见的 JS 框架，如 jQuery、Prototype 或其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:42:35.503

如果我理解您的问题，这就是您的解决方案，

```
var img = document.getElementsByTagName('img');
for(var i=0;i<img.length;i++){
    alert(img[i].src);
} 
```

# java - BeanUtils.setProperty 不适用于布尔值？

> ID：11332820
> 
> 赞同：6
> 
> 时间：2012-07-04T16:38:23.303
> 
> 标签：java, apache-commons-beanutils

我有这个简单的 Bean 类并尝试使用 BeanUtils.setProperty 设置一些值 问题是，似乎 String 工作得很好，但是当我尝试设置一个布尔值时它就不起作用了。我已经尝试将该字段定义为公共但仍然无法正常工作。有什么帮助吗？为什么这不起作用？

```
public class TestBean {

protected Boolean someBoolean;
protected String name;

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public boolean isSomeBoolean() {
    if (someBoolean == null) {
        return true;
    } else {
        return someBoolean;
    }
}

public void setSomeBoolean(Boolean value) {
    this.someBoolean = value;
}

public static void main(String[] args) {
    TestBean o = new TestBean();
    Boolean b = new Boolean(false);
    BeanUtils.setProperty(o, "someBoolean", b);
    BeanUtils.setProperty(o, "name", "A name");
    System.out.println(((TestBean)o).isSomeBoolean());
    // Output = true WHY?????
    System.out.println(((TestBean)o).getName());
    // Output = A name 

    BeanUtils.setProperty(o, "someBoolean", false);
    BeanUtils.setProperty(o, "name", "Another name");

    System.out.println(((TestBean)o).isSomeBoolean());
    // Output = true WHY????
    System.out.println(((TestBean)o).getName());
    // Output = Another name        

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-04T16:44:15.840

你需要改变它

```
protected Boolean someBoolean; 
```

至

```
protected boolean someBoolean; 
```

您将从这里获得更多信息。

[Java Bean、BeanUtils 和布尔包装类](https://stackoverflow.com/questions/5266531/java-beans-beanutils-and-the-boolean-wrapper-class)

# c# - 定期将文本保存到文件

> ID：11332822
> 
> 赞同：0
> 
> 时间：2012-07-04T16:38:54.183
> 
> 标签：c#, vb.net

我想定期将一些纯文本保存到文本文件中，如果我能最大限度地减少损坏文件的机会，以防应用程序终止或系统重新启动，那就更好了。有什么方法可以确保纯文本文件总是好的。

# 编辑

我将从 USB 驱动器运行程序，因此如果我在不关闭应用程序的情况下弹出驱动器，我想确保文件仍然完美。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:46:17.403

使用文件。[AppendAllText](http://msdn.microsoft.com/en-us/library/ms143356.aspx)可一次性打开、追加和关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:40:53.503

不要使用 option `FileMode.Create`，它会覆盖现有文件。相反，`FileMode.Append`在创建文件流时使用选项，以便将任何文本附加到文件而不修改最后的数据。

但是，尽量不要让文件长时间打开，只需打开它们并读取或写入然后`Dispose`它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:56:37.543

你可以看看在[NTFS 文件系统上使用事务](http://msdn.microsoft.com/en-us/aa365008)，假设 U 盘是 NTFS 格式并且你的操作系统是 Vista 或更好。

# ibm-mq - 将消息加载到 MQ 时出现问题

> ID：11332824
> 
> 赞同：2
> 
> 时间：2012-07-04T16:38:56.400
> 
> 标签：ibm-mq

将消息加载到 mq 通道时面临的问题，收到如下粘贴的错误

```
MQOPEN ended with reason code 2001

unable to open queue for output 
```

我该如何解决上述问题，请任何人提供相同的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:19:22.927

返回码解析如下：

```
C:\>mqrc 2001

      2001  0x000007d1  MQRC_ALIAS_BASE_Q_TYPE_ERROR 
```

此返回代码的[信息中心页面](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r1/topic/com.ibm.mq.doc/fm12080_.htm)提供以下说明：

* * *

**2001 (07D1) (RC2001)：MQRC_ALIAS_BASE_Q_TYPE_ERROR**

*解释*

发出 MQOPEN 或 MQPUT1 调用，指定别名队列作为目标，但别名队列定义中的 BaseQName 解析为不是本地队列、远程队列的本地定义或集群队列的队列。完成代码

*MQCC_FAILED 程序员响应*

更正队列定义。

* * *

换句话说，您的应用打开的队列是别名队列。如果您正在打开输入并且基本队列不是本地队列，则会导致此错误。如果您打开输出并且基本队列不是本地队列、远程队列的本地定义或集群队列，您也会收到此错误。

上面的错误代码中没有提到的是，如果别名队列直接指向传输队列，您也会收到此错误。在这种情况下，您需要的是 QRemote 而不是别名。

# java - 写入未完成时如何检测我正在从文件中读取？

> ID：11332827
> 
> 赞同：0
> 
> 时间：2012-07-04T16:39:23.043
> 
> 标签：java, multithreading, file-io, concurrency, java-io

我们有一个多线程程序，它执行以下操作：

`thread_1`是硬盘的监听器，用于检测创建的​​新文件。我们`WatchService`在 Java 7 中使用 api。当另一个程序创建新文件时，`thread_1`检测并获取它并将其放入`PriorityBlockingQueue`ex：

```
priorityBlockingQueue.add(FileObject) 
```

`FileObjComparator`是一个自定义对象实现比较器。当检测到此文件时，它按我从系统时间获取的创建时间和`fileCreatedTime`字段排序：`FileObject`

```
 public int compare(FileObject o1, FileObject o2) {
        return o1.getFileCreatedTime().compareTo(o2.getFileCreatedTime());
    } 
```

`priorityBlockingQueue`初始化为：

```
DataFileQueue.priorityBlockingQueue = new PriorityBlockingQueue<FileObject>(100000, new FileObjComparator()); 
```

并将`Thread_2`在此文件中的最后一个文件旁边处理它`priorityBlockingQueue`

```
if(priorityBlockingQueue.size) > 1)
   process(priorityBlockingQueue.poll()); 
```

2 个线程并行运行，但是当我处理许多大文件时，有时会**在写入文件时**`Thread_2`处理它。我检测到这一点是因为重新检查内容文件和处理结果。

 **该程序在 Centos 6.2 上运行，该硬盘分区以异步模式挂载。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T16:55:32.973

如果您真的在处理倒数第二个文件，那么我很惊讶它的大小正在增长，除非多个进程或线程正在生成输入文件。确保创建文件的另一个进程在写入下一个文件*之前刷新并关闭每个文件。*

*   您可以分块读取文件，然后在一段时间内返回以查看是否向文件中添加了任何其他数据，并在当时使用`RandomAccessFile`. 如果您正在逐行阅读文件，那么不幸的是，您需要自己进行分页。如果文件是基于行的，那么您应该确保行终止字符关闭文件。

*   您可以尝试的另一件事是稍微延迟文件的处理以让文件系统刷新其缓冲区。丑陋且不可靠，但也许是必要的。

*   如果您可以调整输出过程，那么您可以用魔术字符串结束文件，然后在看到魔术字符串之前不处理文件。

*   您可以让进程写入文件，将文件的大小写入带有“.size”扩展名（或其他内容）的单独文件中。大小文件将帮助您验证您正在读取的字符数是否正确。

*   要尝试的另一件事是，`Runtime.exec("/bin/sync");`如果您在 ~unix 系统上运行，则在开始从文件读取以同步文件系统之前。问题是对此的支持高度依赖于操作系统。它也可以成为真正的性能杀手。他是我 Mac 上的手册页：

    > 可以调用同步实用程序以确保所有磁盘写入都已完成

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:46:26.587

您可以尝试使用信号量来组织对每个文件的访问，因为一次不会有多个线程写入任何文件。我认为每个文件对象都应该有自己的信号量，每个线程都应该在写入文件之前尝试获取信号量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-07T02:48:38.463

您的比较器应按上次修改时间排序，而不是创建时间。例如，我不知道您如何知道以 A、B 顺序打开的两个文件将完全以相同的顺序写入，除非您肯定知道文件生成是严格按顺序进行的。你还没说呢。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-04T18:34:59.737

**编辑**更详细的答案。

问题是 ...

**你写道**：

**它是按创建时间和 FileObject 中的 fileCreatedTime 字段排序的，我在检测到这个文件时从系统时间获得：** ...

**thread_1 是**硬盘监听器，用于检测创建的​​新文件。我们在 Java 7 中使用 WatchService api。当**另一个程序创建**新文件时。... **thread_1 检测并获取它**并将**其放入 PriorityBlockingQueue ex**：

*   创建时间和“文件写入完成时间”可能有很大不同。（取决于文件大小）。

**例如：**

打开文件管理器。开始下载大约 60 mb 的文件。注意创建时间。大约 3 分钟后，看看最后的时间。

要检测新文件，查看创建时间是“**将其放入 PriorityBlockingQueue ex** :”的**错误时刻**

 **thraed_1 必须等到文件写入**完成**。然后他可以把它放到“**一个 PriorityBlockingQueue ex** :”

**如何检测文件的写入是否完成？**

3个不太复杂的选项

*   a.) 比较文件已创建和文件就绪时间。 **或者**
*   b.) 观察文件的大小正在稳步增长。如果文件完成，它将停止增长。 **或者**
*   c.) 尝试将其移动到临时文件夹。

**你更喜欢什么？**

我更喜欢解决方案c。

无法移动为写入而打开的文件。在第**3 方程序**关闭文件后，它可以被移动。

**必要的步骤。**

*   thread_1 正在监视由**3rd 方程序**创建的文件。
*   thread_1 试图将其移动到 xyztmp 文件夹（每 10 或 20 或 ... 秒）。
*   thread_1 在 xyztmp 文件夹中寻找新的传入文件并将其放入 PriorityBlockingQueue ex。

* * *

**解决方案 b. 更复杂。**

thread_1 将传入的文件名和大小放在一个控制数组中以比较 3-5 次。（每 5 秒或更长时间）。

大批

```
(filenamexyz.dat, size1, size2, size3, ...).
(filenameabc.dat, size1, size2, size3, ...).
(filenamefgh.dat, size1, size2, size3, ...).
.... 
```

如果每 5 个比较大小由名称标识的文件相同，则**第 3 方程序**已完成对该文件的写入。

现在可以将其放入 PriorityBlockingQueue 例如：

**让我们一步一步看**

我们假设 thread_2 在 list.size 为 2 时启动！

*   3rd 方程序开始一一写入文件。
*   第 3 方程序开始写入 FILE_1。
*   thread_1 检测到创建的 FILE_1，将其放入列表中。
*   第 3 方程序完成写入 FILE_1。
*   第 3 方程序开始写入 FILE_2。
*   thread_1 检测到创建的 FILE_2，将其放入列表中。
*   if(priorityBlockingQueue.size) > 1) 真
*   thread_2 从读取和处理列表 FILE_1 中的第一个文件开始。

* * *

*   第 3 方程序完成写入 FILE_2。
*   第 3 方程序开始写入 FILE_3。
*   thread_1 检测到创建的 FILE_3，将其放入列表中。
*   thread_2 完成处理 FILE_1。
*   thread_2 从列表 FILE_2 中的下一个文件开始。

* * *

*   第 3 方程序完成写入 FILE_3。
*   第 3 方程序开始写入 FILE_4。
*   thread_1 检测到创建的 FILE_4，将其放入列表中。
*   thread_2 完成处理 FILE_2。
*   thread_2 从列表 FILE_3 中的下一个文件开始。

    现在麻烦开始了

* * *

*   第 3 方程序完成写入 FILE_4。
*   第 3 方程序开始写入 FILE_5。（FILE_5 大于 FILE_4）。
*   thread_1 检测到创建的 FILE_5，将其放入列表中。
*   thread_2 完成处理 FILE_3。
*   thread_2 从列表 FILE_4 中的下一个文件开始。
*   **thread_2 完成处理 FILE_4。**
*   **thread_2 从列表 FILE_5 中的下一个文件开始。**
*   **thread_2 完成处理 FILE_5。**
*   第 3 方程序完成写入 FILE_5。

如果第 3 方程序写入的文件**较大，需要更多时间**来写入，并且 thread_2 已完成读取较小的 FILE_4 。

thread_2 将下一个文件从列表中取出 - FILE_5，无论该文件是否已准备好读取。

FILE_5 是第 3 方程序仍在写入的文件。FILE_5 是thread_2 正在读取和处理的文件。thread_2**读取**的字节只是第**3 方程序**此时写入的字节。****

# apache-flex - 带有多行 ItemRenderers 的 Spark ComboBox

> ID：11332828
> 
> 赞同：2
> 
> 时间：2012-07-04T16:39:25.397
> 
> 标签：apache-flex, layout, combobox

我希望创建一个带有 ItemRenderers 的 ComboBox，它可以有多行（或没有）。一张图片说了一千多个单词，所以这里是：

![在此处输入图像描述](../Images/5e4c8bbfbe7d8bd7c486d015ebfaeb6e.png)

这是非常简单的代码：

```
<s:ComboBox>
    <s:layout>
        <s:VerticalLayout gap="0" requestedMinRowCount="1" requestedMaxRowCount="6"
                          horizontalAlign="justify" variableRowHeight="true" />
    </s:layout>
</s:ComboBox> 
```

现在的问题是，每隔一段时间，当 dataProvider 真的很大并且一些标签很长时，ComboBox 就会完全发疯。有时弹出窗口会闪烁并消失，然后再也不回来了。有时我可以看到弹出窗口，但它不在正确的位置（位于 TextInput 的正下方）并且它显示的项目太多（如果您查看我的代码，您会看到我设置了`requestedMaxRowCount="6"`）。

这看起来很像组件或布局类中的错误。我不认为这是一个非常罕见的用例，所以我希望有人已经找到了解决这个问题的可行方法。

请注意，在 ItemRenderer 上设置固定宽度并使用`horizontalAlign="contentJustify"`是不可接受的选项。该解决方案必须是可重用的，并且我不想为应用程序中的每个 ComboBox 创建自定义 ItemRenderer。（图片中使用的自定义主题也不是问题；我也使用默认的 Spark 主题进行了测试）。

# memory-management - OpenGLES问题释放然后需要返回的变量

> ID：11332829
> 
> 赞同：0
> 
> 时间：2012-07-04T16:39:33.847
> 
> 标签：memory-management, opengl-es, free, opengl-es-2.0

我已经在我的一个 OpenGL 项目中实现了 Bill Dudney 的 .Obj[模型加载器](http://bill.dudney.net/roller/objc/entry/wave_front_obj_textures_working)，并且目前存在大量内存泄漏！

使用仪器，我设法将其缩小到以下功能。而且我认为这与 ptr 从未被释放有关，但我仍然需要在函数末尾返回 ptr 。

```
const void * TextureCoordBytes(CFAllocatorRef allocator, const void *value, GLuint *size)
{
// extract the count
GLuint count = ((GLuint *)value)[0];
void *ptr = NULL;
if(1 == count)
{ // a 1D texture
    ptr = CFAllocatorAllocate(allocator, sizeof(GLfloat), 0);
    ((GLfloat*)ptr)[0] = ((TextureCoord1D *)value)->u;
    *size = sizeof(GLfloat);
}
else if(2 == count)
{ // a 2D texture
    ptr = CFAllocatorAllocate(allocator, 2 * sizeof(GLfloat), 0);
    ((GLfloat*)ptr)[0] = ((TextureCoord2D *)value)->u;
    ((GLfloat*)ptr)[1] = ((TextureCoord2D *)value)->v;
    *size = 2 * sizeof(GLfloat);
}
else if(3 == count)
{ // a 3D texture
    ptr = CFAllocatorAllocate(allocator, 3 * sizeof(GLfloat), 0);
    ((GLfloat*)ptr)[0] = ((TextureCoord3D *)value)->u;
    ((GLfloat*)ptr)[1] = ((TextureCoord3D *)value)->v;
    ((GLfloat*)ptr)[2] = ((TextureCoord3D *)value)->w;
    *size = 3 * sizeof(GLfloat);
}
return ptr;
} 
```

有没有人知道我在这里缺少的东西或者我可以使用`free(ptr);`并且仍然`return ptr;`在使用它的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:02:34.110

您必须先返回 ptr，使用分配的数据，然后释放它。返回的 ptr-s 的使用者应在不再需要时或在应用程序退出时处理释放。

# iphone - 如何在启动应用程序时锁定方向并在导航到 Viewcontroller 时解锁它

> ID：11332831
> 
> 赞同：0
> 
> 时间：2012-07-04T16:40:00.267
> 
> 标签：iphone, locking, rotation, uiinterfaceorientation, device-orientation

我想在用户启动应用程序时向他们显示图像。此图像显示 20 秒。

我想要一个功能，当用户在横向启动应用程序时，应用程序保持在横向。当用户以纵向启动应用程序时，应用程序将保持纵向。

我真的很难在 Appdelegate 中配置它，所以我制作了一个单独的视图控制器来显示这个图像。计时器完成后，我导航到下一个应该启用旋转的视图。

那么如何临时锁定 iPad 的 UI 呢？

编辑：

我通过在 Appdelegate 之后的第一个 Viewcontroller 中的 viewDidLoad 中实现方向检查来解决此问题。对于每个方向，我都保存了一个值。执行 shouldAutorotate 时：我首先检查禁用方向更改的保存值。

代码中的解决方案：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    NSUserDefaults * defaults = [NSUserDefaults standardUserDefaults];
    if (UIDeviceOrientationIsLandscape([UIDevice currentDevice].orientation)) {
        [[NSUserDefaults standardUserDefaults] setInteger:1 forKey:@"PortraitLandscapeIndicator"];
    }
    else {
        [[NSUserDefaults standardUserDefaults] setInteger:0 forKey:@"PortraitLandscapeIndicator"];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    //the latest saved orientation is our orientation
    if([[NSUserDefaults standardUserDefaults] integerForKey:@"PortraitLandscapeIndicator"] == 1){
         return ((interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight));
    }
    else{
        return ((interfaceOrientation == UIInterfaceOrientationPortrait) || (interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown));

    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:56:08.013

听起来你将不得不做一些事情，其中​​一个特殊的 viewController 在启动时显示，在 loadView 或 init 中获取设备方向，然后适当地设置视图框架，并且基于任何模式纵向或横向，然后只返回允许的方向[shouldAutorotateToInterfaceOrientation:]。

计时器到时后，您可以将控制权传递给其他视图控制器以从那里获取它或随后允许其他方向。

但最重要的是，我认为您将不得不通过最适合您的方案以编程方式执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:47:19.743

您应该`interfaceOrientation`在第一次显示图像时保存初始值（视图控制器上的属性），然后在您的`shouldAutorotateToInterfaceOrientation:`方法中，仅当方向与初始保存值相同时才返回 YES

计时器完成后，您可以允许旋转到任何支持的方向

# iphone - Corona SDK，为 iOS 设备构建的工作不正确

> ID：11332835
> 
> 赞同：1
> 
> 时间：2012-07-04T16:40:30.660
> 
> 标签：iphone, ios, ipad, sdk, coronasdk

我为 iPhone 模拟器构建了我的 Corona 应用程序，它运行良好。但是如果我在我的设备（iPad）上安装了我的应用程序，并且我有很多问题（没有滚动视图和标签栏工作）按钮是可见的。如何解决问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T09:18:08.430

看看当你在 iPad 模拟器中运行它时会发生什么——如果你在 iPad 上运行应用程序时检查它，你会在控制台中得到任何错误吗？如果是这样，这可能会对这个问题有所了解。一种可能性是图像损坏或图像格式不正确。

如果只有按钮可见，听起来您的应用程序有一个错误，阻止了所有显示对象的加载。（仅基于您提到按钮显示的事实，但仅此而已。）

# ampl - MathProg (GLPK) 中的“域外”错误

> ID：11332836
> 
> 赞同：1
> 
> 时间：2012-07-04T16:40:31.290
> 
> 标签：ampl, glpk, operations-research, mathprog

我正在为 MathProg 中一个看似简单的模型而苦苦挣扎。模型如下：

```
set W;
set V;

param b {W, V} binary;
param p;

var w {j in W} <= 0, >= 1;

minimize obj: 0;

subject to within_radius_of {i in V}:
    sum {j in W} b[i,j] * w[j] >= 1;

subject to p_limit:
    sum {j in W} w[j] <= p;

end; 
```

当我运行它时，它给了我错误`feasibility.glp:11: b[v1,w1] out of domain`。我不知道出了什么问题。对我来说更奇怪的是，如果我将相关行更改为`b[j,i]`它会一直给出完全相同的错误（不像`b[w1,v1]`我预期的那样）。

我仔细检查了[AMPL 饮食示例](http://www.ampl.com/EXAMPLES/MCDONALDS/diet1.mod)，尽管我发现模型的相关部分没有任何差异，但它仍然不起作用。怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T00:22:15.863

参数`b`被声明为`binary`只能取值 0 或 1。您尚未提供数据文件，但错误消息表明数据`b`超出域（不是 0 或 1），例如：

```
data;
set W := w1;
set V := v1;
param b := w1 v1 0.5; 
```

在这种情况下，AMPL 会给出更详细的错误消息：

```
error processing param b['w1','v1']:
    failed check: param b['w1','v1'] = 0.5
        is not binary (0 or 1); 
```

在这种情况下，索引顺序无关紧要的原因是`b`在模型实际实例化之前完全检查了数据。所以看起来，`w1`并且`v1`可能在数据文件中被交换。

# html - css：如何使用 css 制作“方形”div

> ID：11332837
> 
> 赞同：2
> 
> 时间：2012-07-04T16:40:39.013
> 
> 标签：html, css

我正在尝试构建一个仅限移动设备的 HTML 页面，它将屏幕拆分为图块。

我每行有 5 个图块，因此图块宽度确定为屏幕的 20%。我希望高度相同 - 屏幕**宽度**的 20% 。请注意，高度 = 设备宽度的 20%，而不是高度。如果有更多图块，页面将向下滚动。

有没有办法用 CSS 做到这一点？除非必须，否则我宁愿不必使用 javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:44:13.410

我不相信 CSS 可以自己做。使用 Javascript，或者更好更简单，使用 LessCSS (lesscss.org)

# haskell - 明确确定使用哪个纯函数

> ID：11332840
> 
> 赞同：5
> 
> 时间：2012-07-04T16:40:52.387
> 
> 标签：haskell, functional-programming

[Learn You a Haskell](http://learnyouahaskell.com/functors-applicative-functors-and-monoids#applicative-functors)中的一个例子是：

`pure (+) <*> Just 3 <*> Just 5`

他说：

> *所以一开始，我们有`pure (+)`，即`Just (+)`*

我假设 Haskell 正在函数上使用类型推断`<*>`来确定`pure`LHS 上的函数将来自类型类的`Maybe`实例`Applicative`（基于我们在`Just 5`RHS 上使用的事实，并且`Just`是 a `Maybe`）。

但是，是否有过这样的情况，您想使用该`pure`方法将一个值转换为 Applicative Functor，但您不会立即通过该`<*>`函数使用它，因此 Haskell 无法确定要使用哪个`pure`函数利用？如果是这样，**您将如何明确说明`pure`要使用哪个功能**？

或者，是不是 Haskell 不会尝试确定哪个`pure`函数，直到函数的结果`pure`在某些上下文中使用（例如当你`<*>`在某个时候将它提供给函数时）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-04T16:48:50.620

你会给它一个类型注释。如果您将其定义为变量，您将使用顶级类型签名：

```
foo :: Maybe (Integer -> Integer -> Integer)
foo = pure (+) 
```

（这也适用于`let`and`where`子句。）

或者如果你在表达式中使用它，你会写`(pure (+) :: Maybe (Integer -> Integer -> Integer))`.

您还可以获取相关`pure`函数，而无需将其应用于参数。因为我们有：

```
pure :: (Applicative f) => a -> f a 
```

...我们可以说`(pure :: a -> Maybe a)`得到`pure`所需类型的 a。But`(pure :: a -> Maybe a) (+)`比 更令人困惑`pure (+) :: Maybe (Integer -> Integer -> Integer)`，因此后者通常可能更有用。

但是，您问题的最后一句话是正确的：您可以分配`pure (+)`给没有类型签名的变量，然后在特定的具体类型（例如`Maybe (Integer -> Integer -> Integer)`）中使用它，而根本不必使用任何类型注释。（有一个轻微的限制：如果你将它定义为没有任何类型签名的顶级变量，那么你只能将它用作*一个*特定类型，而不是两个在不同的地方，由于[单态限制](http://www.haskell.org/haskellwiki/Monomorphism_restriction)......但你可能不不必担心这一点。）

# jquery - jQuery输入文本清除，返回默认无条目

> ID：11332842
> 
> 赞同：1
> 
> 时间：2012-07-04T16:41:06.553
> 
> 标签：jquery, forms, textinput

我目前正在使用内联 javascript 来清除输入文本的焦点默认值。如果用户没有输入任何内容，则默认值会在模糊后显示。代码如下：

```
onfocus="if(this.value==this.defaultValue) this.value='';" onblur="if(this.value=='') this.value=this.defaultValue;" 
```

问题在于我必须将此片段添加到整个站点的每个文本输入中。与此等效的 jQuery 会自动为每个文本输入 (:text) 执行此操作。

我编造了以下两个错误。(1) 它清除文本字段可能具有的任何值。如果值是默认的 attr 值，我只希望它清除它。(2) blur 函数不插入默认值。我很确定我错过了一些非常简单的东西。

```
$(':text').focus(function() {
            var value = $(this).val();
            var defval = $(this).attr('value');
            if(value == defval) {
                $(this).val('');
            }
        });
        $(':text').blur(function() {
            var value = $(this).val();
            var defval = $(this).attr('value');
            if(value == '') {
                $(this).val(defval);
            }
        }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T17:08:11.760

我建议使用 html5 占位符而不是 defaultValue，并让现代浏览器处理这个问题，只有在不支持占位符的情况下才回退到 JS。

无论如何，这是一个使用 defaultValue 的简单实现：

```
$('input[type="text"]').on({
    focus: function(){
        var $this = $(this);
        if($this.val() === $this[0].defaultValue) $this.val('');
    },
    blur: function(){
        var $this = $(this);
        if($this.val() === '') $this.val($this[0].defaultValue);
    }
}); 
```

另外，我强烈建议使用插件，因为它可以处理所有这些以及一些可能的极端情况......

看一看：

[http://unwrongest.com/projects/defaultvalue/](http://unwrongest.com/projects/defaultvalue/)

# wordpress - Fishpig Magento/Wordpress 集成自定义帖子类型和页面模板

> ID：11332843
> 
> 赞同：0
> 
> 时间：2012-07-04T16:41:11.847
> 
> 标签：wordpress, magento, integration, magento-1.6, fishpig

我有 Magento v1.6.2.0 CE 和最新版本的 Fishpig 集成插件，如何让自定义页面模板功能正常工作？目前它只是显示，就像任何其他页面一样。

另外，我如何才能使自定义帖子类型功能也起作用，目前我加载它时它只是 404。我使用了正确的重写 slug 和刷新的永久链接作为标准，它适用于普通的 wordpress（没有集成）。

如果有人能对此有所了解，将不胜感激，否则我将不得不回到绘图板并以不同的方式整合它！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-04T20:29:55.977

我假设您已经使用了完全集成 - 在 Wordpress 安装中似乎没有什么工作的原因是因为所有主题文件都将在您的 Magento 安装的 base/default/templates/wordpress 中（假设您通过Magento 连接）。

我第一次打它时花了一些时间来解决这个问题。我会说您将需要一些 Magento 工作来让您的自定义帖子类型正常工作，甚至可能更快地进行部分集成并编写一个 Wordpress 主题以匹配您的 Magento 主题。

# python - Dajaxice 形式的 cookie

> ID：11332844
> 
> 赞同：0
> 
> 时间：2012-07-04T16:41:20.987
> 
> 标签：python, django, dajaxice

`function create_comment(){`

```
 data = $('.comment_form form').serializeObject();   
 Dajaxice.iwebs.create_comment(Dajax.process,{'content':data.content,'post_id':data.post_id});
 return false;}` 
```

在 HTML 表单中，我使用`{% csrf_token %}`cookie。Django 想用`X-CSRFToken` [https://docs.djangoproject.com/en/1.2/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/1.2/ref/contrib/csrf/#ajax) 怎么实现呢？

我的`ajax.py`

`@dajaxice_register`

`def create_comment(request, content, post_id):
dajax = Dajax() /n dajax.alert('foobar') /n return dajax.json()`

Dajaxice 工作正常，但不是形式。错误是“出了点问题”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:50:03.480

每当我设置 {% csrf_token %} 时，dajaxice 对我来说都很好。试试这个：

```
data = $('#<form_id>').serializeObject();
Dajaxice.iwebs.create_comment(Dajax.process,{'data':data}); 
```

请使用 firebug 看看你得到了什么错误，403 可能意味着 csrf 令牌问题，而如果你得到 'Dajaxice Exception'，这可能是因为内部错误

# php - Jquery - 连续的 .get() 请求失败

> ID：11332845
> 
> 赞同：1
> 
> 时间：2012-07-04T16:41:25.070
> 
> 标签：php, jquery

我正在创建一个 Year-Make-Model 选择器。

最初，所有三个选择框都被禁用（并且没有选项）。“年”下拉列表加载基于通过 .get() 运行的数据库查询，它在眨眼之间加载。

选择年份后，将根据所选年份加载品牌列表。这是它崩溃的地方，不加载品牌以允许连续加载该品牌下的模型。

可视化：

```
[Years-----v]
[-Make-----v]
[-Model----v] 
```

选择一年后

```
[1978------v]
[Makes-----v]
[-Model----v] 
```

这是我用来完成此操作的 JavaScript：

```
<script type="text/javascript">
    $(function() {
        // LOAD YEARS
        $.get("/ymm/get.php", { func: "get_years", select_name: "year_select" },
            function(data){
                $("#ymm_year_select").html(data);
            });

        // LOAD MAKES
        $("#year_select").on("change", function() {
            var selected_value = $(this).val();

            $.get("/ymm/get.php", { func: "get_makes", select_name: "make_select", year: selected_value },
                function(data){
                    $("#ymm_make_select").html(data);
                });
        });

        // LOAD MODELS
        $("#make_select").on("change", function() {
            var selected_value = $(this).val();

            $.get("/ymm/get.php", { func: "get_models", select_name: "model_select", make: selected_value },
                function(data){
                    $("#ymm_model_select").html(data);
                });
        });

    });
</script> 
```

作为参考，这里是`/ymm/get.php`这样的：

```
<?php
header("Expires: Mon, 26 Jul 1990 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
header("Cache-Control: no-store, no-cache, must-revalidate"); 
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

include("../includes/class/PhpConsole.php");
PhpConsole::start();
include("../includes/configure.php");
include("../includes/class/DB.class.php");

/////////////////////////////////////////////////////////////////////////

function make_select($name, $data, $id = NULL) {
$id = (NULL === $id ? $name : $id);

?>
<select name="<?=$name?>" id="<?=$id?>">
    <option>--Select--</option>
    <?php
        if(!empty($data)) {
            foreach($data as $val => $display) {
    ?>
    <option value="<?=$val?>"><?=$display?></option>
    <?php
            }
        }
    ?>
</select>
<?php
}

$sql['get_years'] = "SELECT DISTINCT(`year`) FROM `ymm` WHERE `id` IN(SELECT `ymm` FROM `ymm_to_products` WHERE `products_id` IS NOT NULL AND `products_id` != '') ORDER BY `year` ASC";
$sql['get_makes'] = 'SELECT DISTINCT(`name`), `id` FROM `make` WHERE `id` IN(SELECT `make_id` FROM `ymm` WHERE `year`=%04d) ORDER BY `name` ASC';
$sql['get_models'] = 'SELECT DISTINCT(`name`), `id` FROM `model` WHERE `make_id`=(SELECT `id` FROM `make` WHERE `name` = \'%s\') ORDER BY `name`';

if(isset($_GET['func'])) {
$func = trim($_GET['func']);
$control_name = $_GET['select_name'];

    switch($func) {
        case 'get_years':
        debug('YEARS!');
        $years = DB::select_all($sql['get_years']);

        if(false !== $years && !empty($years)) {
            foreach($years as $year) {
                $year = intval($year['year']);
                $data[$year] = $year;
            }
        }

        make_select($control_name, $data);
        die();
        break;
        case 'get_makes':
        debug('MAKES!');
        $year = (int) $_GET['year'];
        $makes = DB::select_all(sprintf($sql['get_makes'], $year));

        if(false !== $makes && !empty($makes)) {
            foreach($makes as $make) {
                $name = $make['id'];
                $data[$name] = $make['name'];
            }
        }

        make_select($control_name, $data);
        die();
        break;
        case 'get_models':
            debug('MODELS!');
            $make = strip_tags(trim($_GET['make']));
            $models = DB::select_all(sprintf($sql['get_models'], $make));

            if(false !== $models && !empty($models)) {
            foreach($models as $model) {
                $name = $model['id'];
                $data[$name] = $model['name'];
                }
            }

            make_select($control_name, $data);
            die();
        break;
    }
}

?> 
```

它加载品牌（PhpConsole 输出“YEARS！”，但从不“MAKES！”或“MODELS！”。

我应该使用 jquery 的 .bind() 还是 .live()？

* * *

我已经为我自己的问题提供了答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:48:03.783

你用的是jquery 1.7吗，因为1.7中增加了.on函数。如果您使用的是旧版本而不是尝试这个

```
$("#make_select").change(function() {
     // your existing stuff
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T17:02:23.047

事实证明，我需要将 .on() 事件附加到包含（父）元素，以便它可以“冒泡”或其他任何东西。由于目标元素是从前一个请求动态加载的，因此必须这样做：

```
...
// LOAD MAKES
$("#application-search").on("change", "#year_select", function() {
var selected_value = $("#year_select").val();

$.get("/ymm/get.php", { func: "get_makes", select_name: "make_select", year: selected_value },
    function(data){
        $("#ymm_make_select").html(data);
    });
});

// LOAD MODELS
$("#application-search").on("change", "#make_select", function() {
var selected_value = $("#make_select").val();

$.get("/ymm/get.php", { func: "get_models", select_name: "model_select", make: selected_value },
    function(data){
        $("#ymm_model_select").html(data);
    });
});
... 
```

# android - 手机进入飞行模式后如何开启NFC

> ID：11332853
> 
> 赞同：1
> 
> 时间：2012-07-04T16:41:51.130
> 
> 标签：android, nfc

我正在实现一个使用 NFC 芯片的应用程序。当手机设置为飞行模式时，NFC 将关闭，可以通过首选项手动打开。我想以编程方式打开它，这样我就可以继续使用 NFC 芯片来达到我的目的。

我发现这似乎不适用于我的银河系 (API 14)。作者提到他只在 API 15 上测试过。

```
public boolean changeNfcEnabled(Context context, boolean enabled) {
    // Turn NFC on/off
    final boolean desiredState = enabled;
    mNfcAdapter = NfcAdapter.getDefaultAdapter(context);

    if (mNfcAdapter == null) {
        // NFC is not supported
        return false;
    }

    new Thread("toggleNFC") {
        public void run() {
            Log.d(TAG, "Setting NFC enabled state to: " + desiredState);
            boolean success = false;
            Class<?> NfcManagerClass;
            Method setNfcEnabled, setNfcDisabled;
            boolean Nfc;
            if (desiredState) {
                try {
                    NfcManagerClass = Class.forName(mNfcAdapter.getClass().getName());
                    setNfcEnabled   = NfcManagerClass.getDeclaredMethod("enable");
                    setNfcEnabled.setAccessible(true);
                    Nfc             = (Boolean) setNfcEnabled.invoke(mNfcAdapter);
                    success         = Nfc;
                } catch (ClassNotFoundException e) {
                } catch (NoSuchMethodException e) {
                } catch (IllegalArgumentException e) {
                } catch (IllegalAccessException e) {
                } catch (InvocationTargetException e) {
                }
            } else {
                try {
                    NfcManagerClass = Class.forName(mNfcAdapter.getClass().getName());
                    setNfcDisabled  = NfcManagerClass.getDeclaredMethod("disable");
                    setNfcDisabled.setAccessible(true);
                    Nfc             = (Boolean) setNfcDisabled.invoke(mNfcAdapter);
                    success         = Nfc;
                } catch (ClassNotFoundException e) {
                } catch (NoSuchMethodException e) {
                } catch (IllegalArgumentException e) {
                } catch (IllegalAccessException e) {
                } catch (InvocationTargetException e) {
                }
            }
            if (success) {
                Log.d(TAG, "Successfully changed NFC enabled state to "+ desiredState);
            } else {
                Log.w(TAG, "Error setting NFC enabled state to "+ desiredState);
            }
        }
    }.start();
    return false;
}//end method 
```

[https://stackoverflow.com/a/11286431/1018288](https://stackoverflow.com/a/11286431/1018288)

我总是得到 Log.w(TAG, "Error setting NFC enabled state to "+ desiredState); 执行时的消息。有任何想法吗？

# c# - MonoTouch ZXING 相机打不开

> ID：11332855
> 
> 赞同：3
> 
> 时间：2012-07-04T16:41:56.427
> 
> 标签：c#, xamarin.ios, zxing

我正在使用这个应用程序来扫描 ZXING 条码：

[https://github.com/jmawebtech/BarcodeReader-MonoTouch](https://github.com/jmawebtech/BarcodeReader-MonoTouch)

如果我进入应用程序，扫描条形码，按主页按钮，重新进入应用程序，然后单击扫描，我会看到一个看起来像相机快门永远不会打开的黑屏。我在这张票上附上了一张图片。

如果我按取消，然后返回扫描，我会看到相机再次打开。

为什么相机在某些情况下永远不会打开？

![相机图像保持关闭](../Images/2c1ffe8650e252a4ec56c08b376f8f4c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T01:57:44.080

我不得不将此代码添加到 Info.plist：

UIApplicationExitsOnSuspend 是

对于 App Delegate，我必须添加以下代码：

```
 public override void OnResignActivation (UIApplication application)
    {
        UIApplication.SharedApplication.PerformSelector(new Selector("terminateWithSuccess"), null, 0f);
    } 
```

该软件中使用的录像机无法在后台线程上运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T04:41:45.803

我通过创建自己的扫描方法解决了这个问题，该方法保留了对先前显示的引用`ViewController`并在显示新方法之前将其处理掉。

```
public static class BarcodeScanner
{
    private static ZxingCameraViewController currentBarcodeScanner;

    public static Task<Result> Scan(UIViewController hostController, MobileBarcodeScanner scanner, MobileBarcodeScanningOptions options)
    {
        return Task.Factory.StartNew(delegate
        {
            Result result = null;

            var scanResultResetEvent = new ManualResetEvent(false);

            hostController.InvokeOnMainThread(delegate
            {
                // Release previously displayed barcode scanner
                if (currentBarcodeScanner != null)
                {
                    currentBarcodeScanner.Dispose();
                    currentBarcodeScanner = null;
                }

                currentBarcodeScanner = new ZxingCameraViewController(options, scanner);

                // Handle barcode scan event
                currentBarcodeScanner.BarCodeEvent += delegate(BarCodeEventArgs e)
                {
                    currentBarcodeScanner.DismissViewController();
                    result = e.BarcodeResult;
                    scanResultResetEvent.Set();
                };

                // Handle barcode scan cancel event
                currentBarcodeScanner.Canceled += delegate
                {
                    currentBarcodeScanner.DismissViewController();
                    scanResultResetEvent.Set();
                };

                // Display the camera view controller
                hostController.PresentViewController(currentBarcodeScanner, true, delegate{});
            });

            // Wait for scan to complete
            scanResultResetEvent.WaitOne();

            return result;
        });
    }
} 
```

然后你像这样使用它

```
BarcodeScanner.Scan(this)
    .ContinueWith(t => InvokeOnMainThread(() =>
    {
        if (t.Result == null)
        {
            new UIAlertView("Scan Cancelled", "The barcode scan was cancelled", null, null, "OK").Show();
        }
        else
        {
            new UIAlertView("Scan Complete", "Result from barcode scan was " + t.Result, null, null, "OK").Show();
        }
    })) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T04:15:43.440

你不必极端地改变你的应用程序而不是在后台运行。

我通过在 AppDelegate 上创建一个 viewcontroller 属性来解决这个问题，每次我启动 cameraviewcontroller 以打开相机时，我都会指向这个属性。我称它为 cvc。

我通过以下方式引用该属性来访问该属性：

AppDelegate ad = (AppDelegate)UIApplication.SharedApplication.Delegate;

然后在 AppDelegate 我有这个代码：

```
 public override void OnResignActivation (UIApplication application)
    {
        cvc.PerformSelector(new Selector("terminateWithSuccess"), null, 0f);
    } 
```

感谢您的启动

# php - Symfony 任务 - 内存泄漏

> ID：11332864
> 
> 赞同：1
> 
> 时间：2012-07-04T16:42:42.763
> 
> 标签：php, memory-leaks, symfony1, propel

我写了一个 symfony 任务来填充样本数据的数据库。这是一段示例代码：

```
gc_enable();
Propel::disableInstancePooling();

public function test()
{
    for($i = 0; $i < 10000; $i++) {
        $this->doIt($i);
    }
}

public function doIt($i)
{
    $user = new User();
    $user->setUsername('user' . $i . "@example.com");
    $user->setPassword('test');
    $user->setFirstName('firstname' . $i);
    $user->setLastName('surname' . rand(0, 1000));

    $user->save();
    $user->clearAllReferences(true);
    $user = null;
    gc_collect_cycles();
} 
```

如何限制内存的使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T16:42:48.353

这是最终代码。它可以在相同的内存使用级别下工作一段时间。谢谢大家。

```
public function test()
{
    for($i = 0; $i < 10000; $i++) {
        $this->doIt($i);
    }
}

public function doIt($i)
{
    gc_enable();
    Propel::disableInstancePooling();

    $user = new User();
    $user->setUsername('user' . $i . "@example.com");
    $user->setPassword('test');
    $user->setFirstName('firstname' . $i);
    $user->setLastName('surname' . rand(0, 1000));

    $user->save();
    $this->delete($user);
}

public function delete($obj)
{
    $obj->clearAllReferences(true);
    unset($obj);
    // redundant
    // gc_collect_cycles();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:48:14.213

symfony CLI 任务需要相当多的 PHP 内存，尤其是在 Windows 上。如果 Propel 任务失败，我建议将内存分配的 php.ini 文件设置永久更改为至少 256M。我知道这似乎很高，但您应该只在开发机器上需要这些任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T07:19:59.977

[您在 SO 的另一个线程](https://stackoverflow.com/questions/2097744/php-symfony-doctrine-memory-leak)中有一些很好的提示。

这是一篇关于[使用 propel 的内存泄漏](http://www.pmsipilot.org/2012/01/13/eviter-les-fuites-memoire-avec-propel/)的非常好的博客文章。它是法语的，但它真的很有趣。

而且，如果您正在处理大数据（例如批量导入），您还应该查看 pcntl_fork（[请参阅此要点](https://gist.github.com/396110)）。pcntl_fork 在 Windows 上不起作用。我用这种方法来处理大的导入，它真的很快而且不会吃掉你所有的记忆。

# c# - 如何将桌面应用程序转换为 Windows Phone 应用程序

> ID：11332865
> 
> 赞同：0
> 
> 时间：2012-07-04T16:42:50.763
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

我有一个为图像处理而创建的桌面应用程序。现在我想将它转换为 Windows 手机应用程序，在该应用程序中将拍摄照片并将其发送到服务器并完成图像处理部分。但我很困惑如何制作服务器端，是 ASP.net 页面还是 WCF 服务应用程序？以及如何从电话到服务器进行通信？

任何人都可以在这方面指导我。提前谢谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:01:45.290

你不需要网页，你想要的是一个网络服务，你只需从客户端调用网络服务，传递你的图像和一些额外的信息，网络服务将使用它并将其存储（可能保存在数据库中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:00:06.057

很笼统的问题。

你可以用 asp.net 来做，如果你愿意，可以使用 WCF。这是拥有独立于平台的网站的一种方法（前提是您整理了样式），因为它不是托管在使用它的设备上。

如果您想直接为 Windows phone 7 编写应用程序……那么您可能想使用 google ;) 您可以使用 Silverlight 来制作 UI 和诸如过渡之类的东西，并且一般页面布局很时髦（插入您自己的咒骂）-并且非常容易。

如果您需要一个许多用户连接到的数据库，或者有理由集中某些东西并需要通过 Internet 进行通信，那么 WCF 非常方便。但是，您并非在所有情况下都需要它。

Windows phone 7 有一些简单的本地存储机制......事实上，我还没有编写一个真正需要 WCF 服务的 WP7 应用程序（而且我是一个 WCF 垃圾）。

但是，我不知道直接从 Windows 窗体-> wp7 去的方法。我想有几个人会有一些你可以购买的软件来完成它，因为总是有很多人在从事类似的项目。

如果你想要简单的路线......制作一个asp.net网页并为WP7设计它。但是，如果您想要具有 WP7 体验的东西，那么您想玩 WPF - 这相当容易……尤其是如果您可以玩表情混合。Expression blend 是使 WPF/silverlight 变得有趣的工具。

# ruby-on-rails - fields_for -- 访问访问关联模型的值并存储在变量中

> ID：11332870
> 
> 赞同：0
> 
> 时间：2012-07-04T16:43:36.753
> 
> 标签：ruby-on-rails

感谢您对此提供的帮助：

我有 2 个模型，书籍和作者，其中书籍有很多作者，作者属于书籍

我有下面的代码，它允许用户添加多个作者来预订。

```
<% fields_for @book do |f| %>
  <% f.fields_for :authors do |builder| %>
    <%= render 'author_fields', :f => builder %>
  <% end %>

  <p><%= link_to_add_fields "Add Authors", f, :authors %></p>
<% end %> 
```

**_author_fields.html.erb**

```
<%= f.text_field :author_name %> 
```

编辑书籍条目时，我想访问“_author_fields”部分中的作者姓名并将其存储在变量中。

类似的东西：`<%= author.author_name %>`**这不起作用

我怎么做？

感谢您的任何建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:48:18.623

您可以在“author_fields”表单中使用您传递的本地 f 获取作者：

```
<% author = f.object %> 
```

然后你可以用 author.name 得到名字

# java - 如何在 Eclipse 中配置 Java Web 应用程序以反映在 tomcat 上部署后后端 jar 中的更改

> ID：11332871
> 
> 赞同：0
> 
> 时间：2012-07-04T16:43:45.480
> 
> 标签：java, eclipse, web-applications, tomcat6

我在eclipse中有java web项目。该项目依赖于其他非 Web 项目（比如说后端项目）。当我在后端项目中进行更改，然后将 Web 项目部署到 tomcat 并启动 tomcat 时，不会出现更改。
它只能通过以下方式工作：我必须构建 backend.jar，将其复制到 web 项目 web-inf/lib 目录，然后将其部署到 tomcat 并运行它。

java se6、tomcat 6、eclipse 3.7

你知道如何处理这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:56:28.100

我不确定我是否理解这个问题，但是......如果你想让你的 web 项目看到“后端项目”的变化，web 项目必须包含更新的后端项目 jar。

我有几个这样的项目，通常我构建创建 backend.jar 的后端项目。如果 Tomcat 正在运行，我将停止它。然后，我将构建 Web 项目（它依赖于 backend.jar）。Web 项目将生成它的输出文件夹，包括将新的 backend.jar 放在 WEB-INF/lib 目录中。当 Tomcat 启动时，新的 backend.jar 更改是可见的。

您的 Web 应用程序构建是否没有选择新的 backend.jar？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:02:25.977

激活`Project->Build Automatically`。每次对依赖的项目进行更改时，您只需发布到 tomcat。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T19:30:57.703

所以右键单击您的 Web 项目 -> 属性 -> 部署程序集。

有可能“添加”。您可以选择文件夹、jar 或项目。之后，删除您的 Web 项目并将其添加回 Web 服务器。你应该在项目旁边看到小箭头。单击它时，将显示所有引用的项目。就是这样。

也许对后端项目设置方面“实用程序模块”也很重要。

# javascript - Javascript - 检查多维数组是否未定义

> ID：11332877
> 
> 赞同：6
> 
> 时间：2012-07-04T16:44:10.593
> 
> 标签：javascript, arrays, multidimensional-array

是否有比以下方法更简洁/更短的方法来检查多维数组是否未定义（避免在任何维度出现未定义错误）：

```
if(arr != undefined && arr[d1] != undefined && arr[d1][d2] != undefined){
    // arr[d1][d2] isn't undefined
} 
```

如果`arr`或`arr[d1]`未定义，则执行以下操作将引发错误：

```
if(arr[d1][d2] != undefined){
    // arr[d1][d2] isn't undefined
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T12:34:39.483

这将使用 try/catch 在一次检查中返回它。

```
function isUndefined(_arr, _index1, _index2) {
    try { return _arr[_index1][_index2] == undefined; } catch(e) { return true; }
} 
```

**演示：http:** [//jsfiddle.net/r5JtQ/](http://jsfiddle.net/r5JtQ/)

**使用示例：**

```
var arr1 = [
    ['A', 'B', 'C'],
    ['D', 'E', 'F']
];

// should return FALSE
console.log(isUndefined(arr1, 1, 2));

// should return TRUE
console.log(isUndefined(arr1, 0, 5));

// should return TRUE
console.log(isUndefined(arr1, 3, 2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-18T12:22:05.223

令人沮丧的是，您无法直接测试 arr[d1][d2] 。但据我所知，javascript 不支持多维数组。

所以你唯一的选择就是你所建议的

```
if(arr != undefined && arr[d1] != undefined && arr[d1][d2] != undefined){
    // arr[d1][d2] isn't undefined
} 
```

如果您经常使用它，或者包装在一个函数中。

```
function isMultiArray(_var, _array) {

    var arraystring = _var;

    if( _array != undefined )
        for(var i=0; i<_array.length; i++)
        {
            arraystring = arraystring + "[" + _array[i] + "]";
            if( eval(arraystring) == undefined ) return false;
        }

    return true;
}

if( ! isMultiArray(arr, d) ){
    // arr[d1][d2] isn't undefined
} 
```

# python - 与 uwsgi 一起使用时 PasteDeploy 抛出 TypeError

> ID：11332879
> 
> 赞同：1
> 
> 时间：2012-07-04T16:44:14.583
> 
> 标签：python, python-3.x, pyramid, uwsgi

我正在尝试使用 uwsgi 的 --paste 选项来为金字塔应用程序提供服务，但是 PasteDeploy 正在抛出 TypeError（我猜来自 Python3）

```
File "/home/admin/.mozaiqu.es.env/lib/python3.2/site-packages/paste/deploy/loadwsgi.py", line 277, in loadcontext
    if '#' in uri:
TypeError: Type str doesn't support the buffer API 
```

我正在使用的命令：

```
uwsgi --paste development.ini --socket :3031 -H /home/admin/.mozaiqu.es.env 
```

我认为 PasteDeploy 和 uwsgi 对 Python3 很友好，不是吗？

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T00:14:41.733

我刚刚在 python 3.2 中遇到了同样的问题。`loadcontext`我通过在of 中添加以下内容暂时解决了该问题`loadwsgi.py`：

```
if isinstance(uri, bytes):
    uri = uri.decode('utf-8') 
```

这是带有一点上下文的添加：

```
def loadcontext(object_type, uri, name=None, relative_to=None,
                global_conf=None):
    if isinstance(uri, bytes):
        uri = uri.decode('utf-8')
    if '#' in uri:
        if name is None:
            uri, name = uri.split('#', 1)
        else:
            # @@: Ignore fragment or error?                                             
            uri = uri.split('#', 1)[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:56:17.780

请参阅[Python 3.0 urllib.parse 错误“类型 str 不支持缓冲区 API”](https://stackoverflow.com/questions/540342/python-3-0-urllib-parse-error-type-str-doesnt-support-the-buffer-api)

它解释了您遇到的错误，只是在不同的上下文中。该错误基本上是python 3.x中的一个错误。字节字符串和 unicode 字符串之间的网格存在问题，因此会出现几个错误。上面帖子中的第一个答案更清楚地解释了它。

# javascript - jQuery追加css

> ID：11332881
> 
> 赞同：0
> 
> 时间：2012-07-04T16:44:33.040
> 
> 标签：javascript, jquery

我正在尝试制作一个简单的图像缩放脚本。

[http://jsfiddle.net/GbDw9/1051/](http://jsfiddle.net/GbDw9/1051/)

问题是边距样式仅在第二次 a[data-onclick="zoom"] 单击后应用。

为什么这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:24:07.017

我会尝试一些不同的东西，比如：

```
 $("a[data-onclick='zoom']").click(function() {

    // remove if exists
    if($(".image-zoom").length > 0)
      $(".image-zoom").remove();

    // add image
    $("<img />", { 
      "src": $(this).attr("data-image"), 
      "class": "image-zoom" }).appendTo("body");

    // get image size
    var h = $(".image-zoom").height(),
        w = $(".image-zoom").width();

    //animate
    $(".image-zoom")
      .css({
        "height": 0
      })
      .animate(
      {
        "opacity": 1,
        "height": h
      }, 1000);

      return false;
  }); 
```

您将在 HTML 中的哪个位置：

```
<a href="#" 
   data-onclick="zoom" 
   data-image="http://samurai.releasetracker.ru/media/images/movie/original/jCH93cL8b6uYVK9jWs6xw3IvQbA_1.jpg"
   >click</a> 
```

这是一个**[现场演示](http://jsbin.com/asefey/2/edit#preview)**。

如果，正如我在评论中所说，这是你想要完成的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:46:09.930

```
$('a[data-onclick="zoom"]').click(function () {
   $('body')
       // append complete
       .append('<div id="image-zoom"><span id="close"></span><img src="http://samurai.releasetracker.ru/media/images/movie/original/jCH93cL8b6uYVK9jWs6xw3IvQbA_1.jpg"></div>')
       // find last appended div
       .find('#image-zoom:last')
       // giving CSS
       .css({
         'margin': '-' + ($('#image-zoom > img').height() / 2) + 'px 0 0 -' + ($('#image-zoom > img').width() / 2) + 'px'
       });
   return false;
}); 
```

**[演示](http://jsfiddle.net/GbDw9/1059/)**

### 笔记

您正在使用`image-zoom`as `id`，但如果您想要多个相同的项目`id`然后更改`id`为`class`，因为`id`多个元素相同是不允许的文档页面。

# java - 将元素从多维数组复制到平面数组的最有效方法？

> ID：11332883
> 
> 赞同：0
> 
> 时间：2012-07-04T16:44:36.663
> 
> 标签：java, android, arrays, multidimensional-array

我有一个以下格式的多维数组：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<string-array name="country_array">
<item>
    <country>Afghanistan</country>
    <code>AF</code>
    <prefix>088</prefix>
</item>
<item>
    <country>Albania</country>
    <code>AL</code>
    <prefix>068</prefix>
</item>
</string-array>
</resources> 
```

基本上，我需要这个字符串数组让用户选择一个国家，然后访问这些国家的其他数据，比如他们的国家代码等，但是 Android 的 Spinner 元素不喜欢多维数组，而只喜欢平面数组。：/

所以我正在与这个问题作斗争：创建一个仅由我的多维数组（国家名称）的第一个元素组成的新数组的最有效方法是什么？

然后我可以将平面数组用于 Android 的微调器适配器并轻松检索其他值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:52:23.753

使用[SAXParser](http://mobile.tutsplus.com/tutorials/android/android-sdk-build-a-simple-sax-parser/)填充已知大小的字符串数组。这个 XML Parser 工作得非常快，从我的角度来看，这将是一个很好的方法。

只需创建一个索引变量，当解析器到达一个 xml`country`标签时，获取标签文本并将其设置为相关的字符串数组项。在那之后增加索引，做`index++`.

就是这样，它应该非常适合你。

# c++ - typedef 同义替换

> ID：11332885
> 
> 赞同：0
> 
> 时间：2012-07-04T16:44:51.447
> 
> 标签：c++

我的理解是 typedef 充当类型的同义词，或者可以用作特定类型的别名。此外，下面的简化代码完美构建。这里的问题是，如果我将 main 函数中的第二行更改为：

```
Array<int>::ArrayIter<T> pa = a.begin(); // substituting back the typedef  “iterator” to its original form of ArrayIter<T>. 
```

我在编译期间收到以下错误消息：

> “ArrayIter”不是“Array”的成员</p>

但是使用“typedef”（迭代器）表示法完美编译的代码。为什么“迭代器”和 ArrayIter 突然不再是同义词了：

参考代码如下：

```
template<class T> class ArrayIter {
public:
ArrayIter(T* p) : m_p(p) {
}

private:
T* m_p;
};

template<class T> class Array {

public:
  Array(int size) throw (const char*) {
    if ( size > 0 ) {
       m_p = new T[size];
       m_size = size;
    } else {
   throw "Array: invalid array dimension";
}
  }

  // typedef and methods to support the new iterator for this class
  typedef ArrayIter<T> iterator;

  ArrayIter<T> begin() {
  return ArrayIter<T>(m_p);
  }

private:
  T* m_p;
  int m_size;
};

int main(int argc, char* argv[]) {

  Array<int> a(10);
  Array<int>::iterator pa = a.begin();

 return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:50:49.050

正如错误所说，`ArrayIter`is not a member of `Array`: 它是一个单独的类，在周围的命名空间中声明。因此，`Array<int>::ArrayIter<T>`是无效的，应该只是`ArrayIter<int>`.

`iterator` *是*的成员`Array`，因此`Array<int>::iterator` *是*有效的，并且是 的别名`ArrayIter<int>`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:49:57.570

`ArrayIter`不是内部的嵌套类，`Array`因此`Array::ArrayIter`声明无效。`ArrayIter`仅在全局范围内定义，因此您可以`ArrayIter<int> iter = a.begin();`. typedef`iterator`是在内部定义的`Array`，因此您可以将其作为`Array<int>::iterator`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:50:45.173

`ArrayIter<T>`绝对不是 的成员`Array`，当它在外面宣布时，怎么可能？

您理解的差距在于范围界定的工作原理。

```
class A
{
}; 
```

`A`现在是全局命名空间中的类型。现在，让我们假设第二类：

```
class B
{
public:
    typedef ::A C;
}; 
```

`C`被定义在里面`B`，所以它的全名是`B::C`。但是，`A`仍然在全局命名空间中！`typedef`将其转换为某物不会改变原始名称的范围，因此在这种情况下`A`永远不是 的成员。`B`

总而言之 - 在全局命名空间中，以下（取自您的代码）是相同的：

```
Array<int>::iterator pa = a.begin(); 
```

是相同的

```
ArrayIter<int> pa = a.begin(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T16:51:34.377

我没有看到变体之间的任何等效性。`ArrayIter`不是类型，它是模板。您示例中的 typedef 名称`iterator`是指`ArrayIter`模板的特定专业化。里面`Array<int>`会提到`ArrayIter<int>`。里面`Array<double>`会提到`ArrayIter<double>`。这正是您要求编译器通过您的`typedef`.

它不会以任何方式将`ArrayIter`模板带入`Array`类中。它仍然不是会员。它仍然存在于全局命名空间中，`Array<>::iterator`只是简单地引用它。

最重要的是，完全不清楚`T`您要在里面指的是什么`main`。那里没有`T`。

如果要作为模板`ArrayIter`引入`Array`，可以使用 C++11 标准的一个新特性，称为“模板类型定义”或“模板别名声明”

```
template <typename T>
class Array {
  ...
  template <typename U>  using ArrayIter = ::ArrayIter<U>;
  ...
}; 
```

现在您可以`Array::ArrayIter`用作模板。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-04T16:54:28.007

好吧，您说过要“撤消” typedef。您的 typedef 如下所示：

```
typedef ArrayIter<T> iterator; 
```

当在 Array[int] 中使用时，它“扩展”为

```
typedef ArrayIter<int> iterator; 
```

所以，给定这条线

```
Array<int>::iterator pa = a.begin(); 
```

使用typedef，你可以手动撤消typedef来获取

```
ArrayIter<int> pa = a.begin(); 
```

效果很好:-)

基本上，typedef 被命名为“Array[int]::iterator”，而不仅仅是“iterator”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-04T17:01:02.067

这是因为您的迭代器是在范围内定义的，`Array`而您`ArrayIter`是在全局范围内定义的。要实现你所说的，你应该把`ArrayIter`里面`Array`

```
template<class T> class Array { 

public: 
    template<class T> class ArrayIter { 
    public: 
        ArrayIter(T* p) : m_p(p) { 
        } 

    private: 
        T* m_p; 
    }; 

    Array(int size) throw (const char*) { 
        if ( size > 0 ) { 
            m_p = new T[size]; 
            m_size = size; 
        } else { 
            throw "Array: invalid array dimension"; 
        } 
    } 

    // typedef and methods to support the new iterator for this class 
    typedef ArrayIter<T> iterator; 

    ArrayIter<T> begin() { 
        return ArrayIter<T>(m_p); 
    } 

private: 
    T* m_p; 
    int m_size; 
}; 

int main(int argc, char* argv[]) { 

    Array<int> a(10); 
    Array<int>::ArrayIter<int> pa = a.begin(); 

    return 0; 
} 
```

# python - 寻找用于读取 iPod 数据库的库

> ID：11332889
> 
> 赞同：4
> 
> 时间：2012-07-04T16:45:32.367
> 
> 标签：python, database, perl, ipod

我正在寻找一个库，它可以让我以编程方式检查和修改 iPod 的内部数据库。

我的主要目标是删除一些严重占用空间的文件，由于太复杂而无法进入，iTunes 界面不允许我删除这些文件。

因此，确定与 iPod 中的各个条目相关联的实际文件路径对我来说至关重要。（iTunes 混淆了这些路径以隐藏它们的内容。它们与 Perl 正则表达式匹配`m,^.*/iPod_Control/Music/F\d\d/[A-Z]{4}.[a-zA-Z]+$,`。）

作为次要目标，我想修改我 iPod 的内部簿记，以便正确记录这些删除。

万一这很重要，我需要从 OS X 执行此操作。

我更喜欢 Python 库，但如果不存在这样的库，Perl 库也可以。

谢谢！

PS 起初我尝试使用一些合适的 3rd 方应用程序来完成这项任务，但我检查过的那些应用程序都没有激发我让我的 iPod 处于健全/未损坏状态的任何信心。因此，我决定编写一个脚本来执行此操作。

PS 2：我要删除的文件没有显示在 iTunes 运行导出命令时生成的 xml 文件中。（不过，这些文件肯定在我的 iPod 中，因为我可以播放它们。）因此，任何基于此 xml 文件的解决方案都已过时。

PS 3：我需要删除的文件都不是 mp3，甚至不是音频，因此任何面向 mp3 或面向音频文件的解决方案都已淘汰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:25:27.167

libgpod [http://www.gtkpod.org/wiki/Libgpod](http://www.gtkpod.org/wiki/Libgpod)有 Python 绑定。

# jquery - 如何在 div 容器内的图像上放置图层？

> ID：11332892
> 
> 赞同：0
> 
> 时间：2012-07-04T16:45:41.673
> 
> 标签：jquery, html, css

我正在努力写一个小画廊。有一些拇指并排显示，我想要这些拇指上的黑色层。后来我想让图层透明并在悬停时让它动画......

[编辑]我希望每张图像上都覆盖黑色，img 的宽度和高度相同......所以所有图像都是完全黑色的

目前，黑盒子漂浮在某处，但并不完全在图像上方......

** [http://jsfiddle.net/2NXF8/](http://jsfiddle.net/2NXF8/) **

我的 html 看起来像这样：

```
 <div id ="gallery_container">

        <div class ="image-container">

            <img src="http://polpix.sueddeutsche.com/polopoly_fs/1.394491.1273512871!/image/image.jpg_gen/derivatives/120x120_fit2max/image.jpg" alt="" title="" />
            <div class="overlay"></div>
        </div>

        <div class ="image-container">

            <img src="http://polpix.sueddeutsche.com/polopoly_fs/1.394491.1273512871!/image/image.jpg_gen/derivatives/120x120_fit2max/image.jpg" alt="" title="" />
            <div class="overlay"></div>
        </div>

        <div class ="image-container">

            <img src="http://polpix.sueddeutsche.com/polopoly_fs/1.394491.1273512871!/image/image.jpg_gen/derivatives/120x120_fit2max/image.jpg" alt="" title="" />
            <div class="overlay"></div>
        </div>

        <div class ="image-container">

            <img src="http://polpix.sueddeutsche.com/polopoly_fs/1.394491.1273512871!/image/image.jpg_gen/derivatives/120x120_fit2max/image.jpg" alt="" title="" />
            <div class="overlay"></div>
        </div>

        <div class ="image-container">

            <img src="http://polpix.sueddeutsche.com/polopoly_fs/1.394491.1273512871!/image/image.jpg_gen/derivatives/120x120_fit2max/image.jpg" alt="" title="" />
            <div class="overlay"></div>
        </div>

    </div>
</div> 
```

我的CSS看起来像这样：

```
#gallery_container{
    width:100%;
}
.image-container{
    /*width:200px;*/
    height:170px;
    float:left;
    width:196px;
    text-align: center;
    overflow:hidden;
    border: 1px solid #a9b0ba;
}
.image-container img{
    width:auto;
    height:170px;
    cursor: pointer;
}

.overlay{
   position:absolute;
   height:33%;
   width:33%;
   background-color: black;
   z-index:2;
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:07:28.207

试试这个修改过的小提琴......

[http://jsfiddle.net/2NXF8/4/](http://jsfiddle.net/2NXF8/4/)

I had to remove the width:auto from the image, but it's not required anyway. It wraps the image with a span and then inserts a div after the image, the same size with a black background.

# javascript - 打印多列条码

> ID：11332893
> 
> 赞同：0
> 
> 时间：2012-07-04T16:46:02.453
> 
> 标签：javascript, printing, barcode

我有一个打印出书籍的条形码和 isbn 的文档，我的问题是它只在一页上打印一列。我想每页打印 2 或 3 列（如果页面支持那么多列）。我正在使用 javascript 生成带有书名的条形码。这是代码：

```
 for (x=0;x<data.isbn.length;x++)
    {
                if (x == 5){
                '<div class="page-break"></div>';
                } else 
                first += '$("#'+indexGlobal+'").barcode("'+isbn[x]+'", "codabar",{barHeight:40, fontSize:30, output:"bmp"});';
        second += '<div class="wrapper"><div id="'+indexGlobal+'"></div><div class="fullSKU">&nbsp &nbsp &nbsp '+isbn[x]+
                '</div><br/><div class="title">'+title[x]+'</div></div>&nbsp &nbsp';
        indexGlobal++;

                }
                }
            });//end of ajax call

        var barcode =  window.open('','BarcodeWindow','width=400');
        var html = '<html><head><title>Barcode</title><style type="text/css">'+
        '.page-break{display:block; page-break-before:always; }'+
        'body{width: 2in;}'+
        '.wrapper{height: 1in;margin-left:10px;margin-top:5px;margin-right:5px;}'+
        '.fullSKU{float: left;}'+
        '.shortSKU{float: right;font-size:25px;font-weight:bold;}'+
        '.title{float: left;}'+
        '</style><script type="text/javascript"src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.js"></script><script type="text/javascript" src="../barcode/jquery-barcode.js"></script><script>$(document).ready(function() {'+first+'window.print();window.close();});</script></head><body>'+second+'</body></html>';
        barcode.document.open();
        barcode.document.write(html);
        barcode.document.close(); 
```

有什么建议可以将此打印在多个列中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T12:12:28.697

我的一个朋友给我指出了正确的方向。我改变了身体的宽度

```
'body{width: 2in;}'+ 
```

成为页面的大小（10 英寸，因为它将打印横向），然后使用 3 列的 css3 属性：

```
'body{width: 10in;-moz-column-count:3; -webkit-column-count:3;column-count:3;}' 
```

希望这会帮助别人。

# vb.net - CookieContainer (VB.NET)

> ID：11332894
> 
> 赞同：0
> 
> 时间：2012-07-04T16:46:03.877
> 
> 标签：vb.net

我是一个初学者.NET 程序员。

如何将 CookieContainer 存储为全局变量，而不是在函数内部？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:52:03.647

如果*全局*是指*静态*的，则可以使用[Shared](http://msdn.microsoft.com/en-us/library/4hbsxy95%28v=vs.80%29.aspx)关键字：

```
Public Class SomeClass
    Public Shared Container As CookieContainer = New CookieContainer();

    ...
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:52:44.027

将其存储在应用程序变量中。

```
Dim CookieJar as new CookieContainer()
Application.Add("MyCookieJar", CookieJar) 
```

# javascript - 只适用一个条件

> ID：11332903
> 
> 赞同：0
> 
> 时间：2012-07-04T16:47:01.860
> 
> 标签：javascript, if-statement

```
if(bmi < 18.5 )
{
    element1.backgroundColor =  colour;
    $(document).ready(function(){
      $(".C_underArrow").show();
       });
}

else if (bmi>= 18.5 && bmi<= 24.9)
{
  element2.backgroundColor =  colour;
   $(document).ready(function(){    
     $(".C_normalArrow").show();
    });
} 
```

我正在尝试为表格行着色。

根据输入“bmi”.. 决定使用哪个条件，例如第一个条件，然后为 element1 着色。

当我更改输入值 .. 并进入另一个条件并着色 element2 .. 它使 element1 保持颜色。

我想在每个新输入值上为一行着色

我该如何解决？

编辑：添加 HTML 代码

```
<table class="C_resultTable">

<tr id="id1">
<td >
<img id="ID_underArrow" class="C_underArrow" width="30" height="30" src="right-arrow.gif" />
</tr>
</td>

<tr id="id2">
<td >
<img id="ID_normalArrow" class="C_normalArrow" width="30" height="30" src="right-arrow.gif" />
</tr>
</td>

<tr id="id3">
<td >
<img id="ID_overArrow" class="C_overArrow" width="30" height="30" src="right-arrow.gif" />
</tr>
</td>

<tr id="id4">
<td >
<img id="ID_ObeseArrow" class="C_ObeseArrow" width="30" height="30" src="right-arrow.gif" />
</td>
</td>       

</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T16:51:48.377

您可以存储在当前彩色行的全局变量上。（`colouredElement`我的代码片段上的变量）

**没有 jQuery**

```
if (colouredElement != null)
    colouredElement.backgroundColor = '';

if(bmi < 18.5 )
{
    colouredElement = element1;
    element1.backgroundColor =  colour;
    $(document).ready(function(){
      $(".C_underArrow").show();
    });
}    
else if (bmi>= 18.5 && bmi<= 24.9)
{
     colouredElement = element2;
     element2.backgroundColor =  colour;
     $(document).ready(function(){  
      $(".C_normalArrow").show();
    });
} 
```

**使用 jQuery**

```
if ($colouredElement != null)
    $colouredElement.css({ backgroundColor: ''});

if(bmi < 18.5 )
{
    $colouredElement = $('table.C_resultTable tr:nth-child(1)');
    $colouredElement.css({backgroundColor: colour});
    $(document).ready(function(){
      $(".C_underArrow").show();
    });
}    
else if (bmi>= 18.5 && bmi<= 24.9)
{
    $colouredElement = $('table.C_resultTable tr:nth-child(2)');
    $colouredElement.css({backgroundColor: ''});
     $(document).ready(function(){  
      $(".C_normalArrow").show();
    });
} 
```

# javascript - 如何使用 javascript 将此页面滚动到最后？

> ID：11332904
> 
> 赞同：-1
> 
> 时间：2012-07-04T16:47:03.340
> 
> 标签：javascript

我想到达这个网站的底部，但我没有时间去做。[http://thedeepestsite.com/](http://thedeepestsite.com/)

顺便说一句，这是一个很棒的广告特技！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:50:28.773

您可以使用[`window.scrollTo()`](https://developer.mozilla.org/en/window.scrollTo)：

```
window.scrollTo(0, 0); 
```

如果你想要 jQuery，[也有一个不错的插件，](http://demos.flesler.com/jquery/scrollTo/)同名。

# web - 什么是网络方法

> ID：11332905
> 
> 赞同：2
> 
> 时间：2012-07-04T16:47:04.183
> 
> 标签：web, webmethod

Web方法到底是什么？它是一种语言，一种框架或应用程序，还是纯粹是一家负责应用程序集成的公司，即提供一个框架来实现集成。

请简要介绍一下。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-04T16:52:13.193

这个词让我想起了一些非常不同的事情：

*   .NET [WebMethodAttribute](http://msdn.microsoft.com/en-us/library/system.web.services.webmethodattribute%28v=vs.80%29.aspx)
*   Java [WebMethod 注释](http://docs.oracle.com/javase/6/docs/api/javax/jws/WebMethod.html)
*   Software AG [webMethods 产品](http://www.softwareag.com/uk/products/wm/default.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T16:51:18.570

据我所知，不是一种语言。

Web 服务具有您可以调用的方法 - REST 或 SOAP 或 RPC-XML。您可以用多种语言实现它们。

有一个名为[webMethods](https://www.softwareag.com/jp/products/webmethods_integration/integration/integration_server/default)的 EAI 服务器；在被 Software AG 收购之前，它是一家独立公司。

# objective-c - “自动释放”的问题

> ID：11332907
> 
> 赞同：0
> 
> 时间：2012-07-04T16:47:22.013
> 
> 标签：objective-c, release

我对“autorelease”有问题，看看我的代码：然后在“autorelease”中出现 2 条消息错误：

-'autorelease' 不可用：在自动引用计数模式下不可用

和：

ARC 禁止“自动释放”//代码的显式消息发送

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // Return the number of rows in the section.
    return 25;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
  (NSIndexPath *)indexPath{ 
                           static NSString *CellIdentifier = @"Cell"; 
                           UITableViewCell *cell = [tableView
                                         dequeueReusableCellWithIdentifier:CellIdentifier];      
         if(cell==nil){
        cell=[[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] ***autorelease***];

    } 

    // Configure the cell...
    cell.textLabel.text=[NSString stringWithFormat:@"Rental Property:%d", indexPath.row];
    NSLog(@"Rental Property %d", indexPath.row);
    return cell;    return cell;
} 
```

有人可以帮忙吗？

谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:50:51.777

只需删除对`-autorelease`. 在 ARC 模式下不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T18:21:16.177

如果这不是您的代码，而是您复制和粘贴的第三方库，则应在 Targets-> Build Phases -> Compile Sources 下以及在违规文件类型的编译器标志下关闭 ARC 专门用于实现文件

> -fno-objc-弧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T16:51:44.100

使用 ARC 时不需要使用 autorelease。ARC 代表“自动引用计数”，它自动处理对象的保留和释放。

# css - CSS继承和覆盖

> ID：11332908
> 
> 赞同：2
> 
> 时间：2012-07-04T16:47:25.957
> 
> 标签：css, twitter-bootstrap

我正在使用 twitter bootstrap css，并且`table`只想在选定的屏幕中覆盖该类。

我可以这样做：

```
.table th, td,
{
    border-top: 0;
} 
```

并且边界被删除，正如我所希望的那样。但是，这是针对每个表完成的。

我想指定哪些表应该删除边框。

所以如果我做了这样的事情：

```
<table class="edit_table">
            <tbody>
                <tr>
                    <td> 
```

如何指定 edit_table 继承`table`和删除边框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:51:57.440

如果我对您的理解正确，您可以同时给它`table`和`edit_table`类：

```
<table class="table edit_table"> 
```

**编辑：**为了清楚起见，我还想提一下，你可以`edit_table`随心所欲地设计风格。然后该元素将同时应用`table`和的样式`edit_table`。

# iphone - 使用 iOS 在 Phonegap 中打开外部链接

> ID：11332909
> 
> 赞同：0
> 
> 时间：2012-07-04T16:47:30.163
> 
> 标签：iphone, ios, cordova

我正在尝试使用如下锚标记链接到外部链接：[Google](https://www.google.com.sg/)。

为了做到这一点，我在 appDelegate.m 中添加了这段代码（代码来自这里：[https](https://gist.github.com/2012253) ://gist.github.com/2012253 ）：

```
- (BOOL)webView:(UIWebView *)theWebView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    NSURL *url = [request URL];

    // Intercept the external http requests and forward to Safari.app
    // Otherwise forward to the PhoneGap WebView
    if ([[url scheme] isEqualToString:@"http"] || [[url scheme] isEqualToString:@"https"]) {
        [[UIApplication sharedApplication] openURL:url];
        return NO;
    }
    else {
        return [ super webView:theWebView shouldStartLoadWithRequest:request navigationType:navigationType ];
    }
} 
```

但我仍然无法链接到谷歌......我做错了什么吗？需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:27:22.017

确保您`ExternalHosts`在 Cordova.plist 文件中的属性设置正确。ExternalHosts 是您列入白名单的主机数组，以便可以从您的应用程序访问它。

对于谷歌（http 和 https）

```
google.com 
```

[http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html#Domain%20Whitelist%20Guide)

例如，[在这里查看我的演示应用程序](https://github.com/dhavaln/cordova-examples/tree/master/ios-cordova-video/ios-cordova-video)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T06:37:54.163

我在科尔多瓦 1.7.0 科尔多瓦 1.9.0 和科尔多瓦 2.1.0 的 MainViewController.m 中使用了那段代码，它工作得很好。您只需将该代码移动到正确的文件中。

# ruby - 一个哈希是否包含另一个哈希

> ID：11332910
> 
> 赞同：1
> 
> 时间：2012-07-04T16:47:39.613
> 
> 标签：ruby

假设我们有“深度哈希”，例如：

```
b = {1 => {2 => {} }, 4 => {} }
a = {1 => {2 => {3 => {} }}, 4 => {}, 5 => "123" } 
```

或者

```
b = {1 => {children: {2 => {children: false} }}}
a = {1 => {name: "name", surname:"sur", children: {2 => {name: "name", surname:"sur", children: false}}}, 3 => {}} 
```

`a`包括`b`但反之亦然；

这是我的尝试：

```
class Hash

  def >=(b)
    eq ||= true     
    b.each do |k, v| 
      if !(self.include? k) 
        eq = false 
      elsif ( ((self[k]&&v).is_a? Hash) && !((v||self[k]).empty?) )
        self[k]>=v 
      end 
    end

    return eq
  end
end

a >= b # true
b >= a # false 
```

精简版：

```
class Hash

  def >=(b)  
    eq = true
    b.each { |k, v| eq &= !(self.include? k) ? false : ( ( ((self[k]&&v).is_a? Hash) && !((v||self[k]).empty?) ) ? self[k]>=v : true)}

    return eq
  end
end 
```

我的问题：有没有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:06:39.300

功能方法：

```
class Hash
  def >=(other)
    other.all? do |key, value|
      if self.has_key?(key) 
        value.is_a?(Hash) ? (self[key].is_a?(Hash) && self[key] >= value) : (self[key] == value)
      else
        false
      end
    end 
  end
end 
```

# pagination - 不使用 jquery UI 的分页滑块

> ID：11332917
> 
> 赞同：0
> 
> 时间：2012-07-04T16:48:15.953
> 
> 标签：pagination

我想建立一个分页系统，就像这个网站底部的[http://www.dirty.ru/](http://www.dirty.ru/)一样。

问题是，我不想使用任何 UI。有可能吗？有没有人有我的例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T17:01:45.523

看看`HTML5 input type="range"`：[http](http://webhole.net/2010/04/24/html-5-slider-input-tutorial/) ://webhole.net/2010/04/24/html-5-slider-input-tutorial/ 如果你使用的是谷歌浏览器，你会看到它的样子......

但由于并非所有浏览器都支持这一点，您可能会考虑将`div`边框设置为 1px，在单独的元素中添加图标或其他任何内容，并让 jquery 完成工作......

就在我的脑海中，快速浏览一下他们的代码，我认为他们就是这样做的......
页码的范围，我相信，他们已经放入了一个非常宽的 div 并防止了换行符，设置`overflow:hidden;`。然后使用jquery或其他东西来移动内容......

# scripting - TCL / Expect Scripting - 使用条件语句尝试二次登录密码

> ID：11332920
> 
> 赞同：1
> 
> 时间：2012-07-04T16:48:19.337
> 
> 标签：scripting, tcl, expect, login-script, activetcl

我非常接近完成一个通过串行连接（RS232} 登录到 Cisco 接入点并为其提供 IP 地址的 TCL/TK 应用程序（非常基本）

但是，如果第一个密码失败，我希望我的脚本尝试使用辅助密码

这是在输入错误密码 3 次时 Cisco CLI 在串行连接中的行为方式（不需要用户名，仅提示输入密码）

```
Password:
Password:
Password:
% Bad secrets 
```

同样，如果“Cisco”的默认密码不起作用，我需要脚本来尝试“Cisco2”的二级密码

以下是我最近在这个问题上的不成功尝试。

```
 expect "*>" {send "en\r"}

    expect {
    "Password:" {send "Cisco\r"; exp_continue}
    "Password:" {send "Cisco2\r"; exp_continue}
    }

    expect "*#" {send "config t\r"} 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T22:53:35.237

最简单的方法是有一个密码列表来尝试，您可以逐步尝试：

```
set passwords {"Cisco" "Cisco2"}
set idx 0
expect "*>"
send "en\r"
expect {
   "Password:" {
      send "[lindex $passwords $idx]\r"
      incr idx
      exp_continue;   # Continue to wait for the "after" prompt
   }
   "*#" {send "config t\r"}
} 
```

诀窍是你还必须处理*后面* `expect`的事情，这样你就不会依赖超时或类似的事情。（好吧，假设您不希望超时。如果您这样做，请继续！）这是因为*同时*`expect`等待其*所有*匹配子句。在您的错误代码中，您有两个具有相同匹配文本的子句，因此它总是选择其中的第一个（IIRC，如果多个子句在当前点匹配，则第一个可能的分支是选择的那个）。

# android - Android 对话框自定义样式

> ID：11332928
> 
> 赞同：2
> 
> 时间：2012-07-04T16:49:18.427
> 
> 标签：android, dialog, styles, themes

我有一个应用于活动的自定义主题：

```
<style name="Sample" parent="android:Theme">
  <item name="android:dialogTheme">@style/Sample.Dialog</item>
</style>

<style name="Sample.Dialog" parent="android:Theme.Dialog">
  <item name="android:windowBackground">@drawable/sample_background</item>
</style> 
```

我正在创建一个这样的示例对话框：

```
Dialog dialog = new Dialog(SampleActivity.this);
dialog.setContentView(R.layout.sample_layout);
dialog.show(); 
```

我的自定义对话框样式未应用。创建的对话框仍然具有标准背景。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T23:54:09.667

On initializing :

```
Dialog dialog = new Dialog(SampleActivity.this, R.style.Sample.Dialog); 
```

# python - 如何在 Python 中控制类实例的标题？

> ID：11332933
> 
> 赞同：1
> 
> 时间：2012-07-04T16:49:39.047
> 
> 标签：python, class

纯粹是一个装饰性的东西，但是当我在 python 中创建一个类时，我如何控制它的实例的标题？例如对于

```
class Foo():
    def __init__(self, name):
         self.name = name 
```

然后我可以创建一个实例：

```
>> f = Foo('bar')
>> f
<Foo instance at 0x10ab41a28> 
```

如果我想让它返回`bar`，我会怎么做？（在 Django 中，您使用`__unicode__`类的方法，但我尝试将`__unicode__`和`__str__`函数都设置为 return `self.name`，虽然它们自己工作，但它们不会影响类的值。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:54:33.163

我通常定义`__str__`返回一个字符串表示，然后在`__repr__`方法中返回字符串，像这样：

```
>>> class Foo():
...     def __init__(self, name):
...          self.name = name
...     def __str__(self):
...          return '<Foo name=%s>' % self.name
...     def __repr__(self):
...          return str(self)
... 
>>> f = Foo('bar')
>>> f
<Foo name=bar> 
```

有关详细信息，请参阅[Python 中](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)[**str**](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)[和](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)[**repr**](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)[之间的区别](https://stackoverflow.com/questions/1436703/difference-between-str-and-repr-in-python)

 ***** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-04T16:53:29.053

而是定义`__repr__`-这将使您解决问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-04T16:54:12.377

在这种情况下，这不是您的班级的问题。

```
class Foo(object):
  def __init__(self, name):
    self.name = name
  def __str__(self):
    return self.name

>>> f = Foo()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: __init__() takes exactly 2 arguments (1 given)
>>> f = Foo("bar")
>>> f
<__main__.Foo object at 0x7f2a9b9b7590>
>>> print(f)
bar 
```

问题是，只需键入`f`，您将获得输出`repr()`而不是`str()`。如果你想改变它，你需要定义`__repr__`而不是`__str__`or `__unicode__`。

通常，无论如何您都会使用`str()`输出（打印使用它，当强制字符串时它被使用）。`repr()`仅在您要求时才使用，例如：

```
>>> print("{0!r}".format(f))
<__main__.Foo object at 0x7f2a9b9b7590> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-04T16:54:55.047

你混淆了一些东西，

使用时设置类的名称`Class Foo:`。这创建了一个`class`名为`Foo`.

现在，当您执行`f = Foo('bar')`then`f`时，解释器会轻松调用您实例的`__repr__`方法：

```
>>> class Foo():
...  def __repr__(self):
...   return 'REPR'
... 
>>> f = Foo()
>>> 
>>> f
REPR
>>> 
```

长话短说，`__repr__`如果您想控制解释器在您编写时返回的内容，请使用该方法`f`。

如果你不这样做，口译员或多或少会为你做：

```
>>> class F():
...  pass
... 
>>> f = F()
>>> f.__repr__
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: F instance has no attribute '__repr__'
>>> repr(f)
'<__main__.F instance at 0x7f00381e2368>' 
```****

# java - Java GUI：JLabel 作为 Bullet 应该飞过 Jpanel，只给出“结果”

> ID：11332939
> 
> 赞同：0
> 
> 时间：2012-07-04T16:50:17.720
> 
> 标签：java, user-interface

首先：我对这个东西很陌生，但非常感兴趣。我很确定我的问题的答案已经在某个地方，但由于缺乏知识，我无法真正理解它。

直奔问题：

JLabel player : 你控制的标签 JLabel bullet : 你射击的标签，当触发时（已经在主类中解决了）

```
public class Shoot extends Thread {

  public Shoot(JLabel bullet, JLabel player) {

    bullet.setLocation(player.getX(),player.getY());
    int bulletX = player.getX();
    int bulletY = player.getY();

    for (int i = 0; i <= 20; i++) {
       bullet.setText("o"); 
       bullet.setLocation(bulletX,bulletY - 20); 

       try {
         sleep(200);
       }catch (InterruptedException ie){} 

       bullet.setText("");        
     }
   }
} 
```

这里的问题是，子弹的“进度”是不可见的。我希望子弹仍在飞行时被看到，并在达到射程时消失。（当 i = 20 时）

请帮我

丹尼斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:53:30.943

是的，解决方案就在那里：不要在 Swing 事件线程上调用 Thread.sleep(...) ，因为这会使你的整个 GUI 进入睡眠状态。相反，请使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-04T20:10:19.390

你是子类`Thread`，所以我假设你希望在线程中运行你的循环。为此，您应该重写`run`（让您的代码在`Shoot`构造函数中只是一个方法调用）：

```
public class Shoot extends Thread {
    JLabel bullet; 
    JLabel player;

    public Shoot(JLabel bullet, JLabel player) {
        this.bullet = bullet;
        this.player = player;
    }

    public void run() {
        // Your code from here on...
        bullet.setLocation(player.getX(),player.getY());
        int bulletX = player.getX();
        int bulletY = player.getY();

        for (int i = 0; i <= 20; i++) {
            bullet.setText("o"); 
            bullet.setLocation(bulletX,bulletY - 20); 

            try {
                sleep(200);
            }catch (InterruptedException ie){} 

            bullet.setText("");        
        }
    }
} 
```

你可能会在某个地方这样做：

```
Shoot shoot = new Shoot(bullet, player); 
```

要真正让线程运行，请添加以下行：

```
shoot.start(); 
```

现在出现了不好的部分：您不应该在事件调度线程 (EDT) 之外调用大多数 Swing 方法。EDT 很可能是您创建`Shoot`. Shoot 类中的线程与 EDT 不同。要从那里调用 Swing 方法，您需要使用`SwingUtilities.invokeLater`：

```
SwingUtilities.invokeLater(new Runnable() {
    public void run() {
        bullet.setText("o"); 
        bullet.setLocation(bulletX,bulletY - 20); 
    }
}); 
```

您可以使用基于线程的方法来了解这一点。如果你的代码不仅仅是一个练习，你不应该固定在 Swing 上。（正如其他评论和答案中已经提到的）

如果你想走多线程 Swing 路线，你可能想看看`SwingWorker`并`SwingUtilities.invokeLater`记住要小心你可以在`EDT`.

# php - 当我们在页面中选择文本框时，在选择该 chk 框时在另一个页面中显示一些文本

> ID：11332948
> 
> 赞同：0
> 
> 时间：2012-07-04T16:51:11.510
> 
> 标签：php, javascript, html

我使用 html 设计了 ​​2 个页面，在这里当我们在一个页面中选择复选框时，我必须在另一个页面中显示一些文本。我该怎么做。任何人都可以帮助我。

第一页的代码是

```
<p style="margin: 25px 0px 0px 10px; font:13px verdana;">would you like to show others to copy ?</p>

<input type="checkbox" name="remember" id="remember1"  style="border: 0px;padding: 10px; margin-left:125px;font-size:12px;" />Yes<a href="#"></a><br/>
<input type="checkbox" name="remember" id="remember2" style="border: 0px;padding: 10px; margin-left:125px;font-size:12px;" />No<a href="#"></a> 
```

在这里，当我在此选择“是”时，我必须将文本显示为“您必须向其他人展示”。当我选择“否”时，它必须显示为“您无权向其他人展示”。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:30:04.153

首先，您可以使用 type="radio" 来避免选择 yes 和 no ：

```
 <input onchange="setCookie('choice','yes');" type="radio" name="remember" id="remember1"
           style="border: 0px;padding: 10px; margin-left:125px;font-size:12px;" />Yes<a href="#"></a><br/>
    <input onchange="setCookie('choice','no');" type="radio" name="remember" id="remember2"
           style="border: 0px;padding: 10px; margin-left:125px;font-size:12px;" />No<a href="#"></a> 
```

然后，您可以使用 cookie 将选择从一个页面传递到另一个页面。在输入的页面中：

```
 <script type="text/javascript">
        // set default
        document.getElementById("remember1").checked="true";
        setCookie('choice','yes');

        function setCookie(cookieName, cookieVal) {
            //alert("setCookie "+cookieName+"="+cookieVal);
            document.cookie=cookieName+"="+cookieVal;
        }
   </script> 
```

并在页面中召回选择：

```
 <script type="text/javascript">
        function getCookie(cookieName) {
            var cookies = document.cookie.split(";");
            for(var i = 0; i<cookies.length; i++) {
                var cookie = cookies[i].replace(/^\s+/, "");
                var nameVal = cookie.split("=");
                var name = nameVal[0];
                var val = cookie.substr(name.length+1);
                if(name==cookieName) return val;
            }
            return null;
        }
        alert(getCookie("choice"));
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:54:23.047

您的唯一方法是使用 _POST 或 _GET 使用 PHP ASP 等服务器端语言将其发布到另一个页面，因此当用户提交表单时，无论您是否愿意，它都会显示在另一个页面上是。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:00:56.663

您必须使用表单或 AJAX 将该值发布到您的服务器。然后在此过程中将该值写入数据库。因此，您将知道将显示或不显示哪个文件/页面/副本/任何内容。

--

（ps如果它只是用于单一用途，请尝试将值分配给会话变量-以防万一您没有数据库。-）

# php - android和php之间的套接字

> ID：11332951
> 
> 赞同：0
> 
> 时间：2012-07-04T16:51:25.900
> 
> 标签：php, android, sockets, mediarecorder

我是套接字的新手，我想将视频从我的 android 手机直播到我的 php 服务器。我找到的解决方案是使用带有 a`PareFileDescriptor`作为的`OutPutFile`套接字`MediaRecorder` 这是我的代码：

客户端（安卓）：

```
 Socket soc = new Socket("http://192.168.1.23/php/live.php",80);
    ParcelFileDescriptor pfd= ParcelFileDescriptor.fromSocket(soc);
    recorder.setOutputFile(pfd.getFileDescriptor()); 
```

服务器（php），我是 php 的新手...：

```
 <?php
 $socket = stream_socket_server("tcp://192.168.1.5:80", $errno, $errstr);
 if (!$socket) {
 echo "$errstr ($errno)<br />\n";
 } else {

 while ($conn = stream_socket_accept($socket)) {

fwrite($conn, 'The local time is ' . date('n/j/Y g:i a') . "\n");
fclose($conn);
}
fclose($socket);
}
?> 
```

在android端我得到这个错误：

```
 java.net.UnknownHostException: http://192.168.1.23/php/live.php 
```

在 PHP 中，如果我访问我的页面 live.php，我会得到：

```
 Warning: stream_socket_server() [function.stream-socket-server]: unable to connect to tcp://192.168.1.5:80 (L’adresse demandée n’est pas valide dans son contexte. ) in C:\wamp\www\php\live.php on line 4 
```

编辑1：

我更正了客户端，所以现在我没有错误，但服务器端仍然没有任何内容

# sharepoint-2010 - SharePoint 2010 PeoplePicker 控件不显示用户数据

> ID：11332952
> 
> 赞同：1
> 
> 时间：2012-07-04T16:51:27.027
> 
> 标签：sharepoint-2010, user-profile, peoplepicker, sharepoint-userprofile

**更新 - 2012 年 8 月 27 日**

我的公司已与 Microsoft 支持人员进行了交谈，这种行为被描述为基于声明的身份验证的“设计使然”。嗯。Microsoft 建议的解决方法是开发一个自定义声明提供程序来填充缺失的字段。

**-------------------------------------------------- ----------------------------------**

在测试 SharePoint 环境中，我已配置用户配置文件服务，并且已使用目标域中的用户配置文件同步服务将用户配置文件成功填充到 UPS。用户配置文件中的数据正确反映了 AD 中用户的数据。特别是，以下字段的数据（在 CBA 站点上使用的人员选取器中显示的字段）在 UPS 中正确显示：

*   显示名称
*   电子邮件
*   地址
*   标题
*   部门
*   在场
*   工作电话
*   地点

但是，在使用基于声明的身份验证的站点上，每当在人员选取器控件中搜索特定用户时，当该用户显示在列表视图中时，不会显示工作电话或位置的值，即使当值出现在 UPS 和 AD 中。正确的详细信息将显示在指定用户的人物搜索结果中，以及用户的个人资料页面中。

已检查各个字段（WorkTelephone、位置）的搜索服务元数据属性并正确映射。

我认为由于 UPS 和站点的用户信息列表之间的同步问题，缺少列数据。我通过更新 UPS 中特定用户的各种字段值（包括工作电话和位置）来测试这一点。运行用户配置文件到 SharePoint 快速同步计时器作业时，配置文件页面中的数据、人员搜索结果和用户信息列表中为用户显示的信息都正确更新。人员选取器中同一用户的信息未更新 - 工作电话和位置仍未显示值，显示名称等其他字段未显示更新的信息。

每个环境的当前 SharePoint 补丁级别（内部版本）为 14.0.6120.5006（应用了带有 SP1 和 2012 年 4 月 CU 的 SharePoint 2010 Server）。

谁能帮助确定 PeoplePicker 控件中显示的用户信息未显示正确信息的原因？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T17:29:01.673

同样的问题 - UPS 从 AD 正确填充，但没有任何更新进入 SharePoint 网站 (2010/SQL2012)。

已重置 IIS，甚至重新启动服务器。删除所有用户并重新添加他们的策略对我们不起作用。

* * *

找到了一个适合我们需要的解决方案.... [http://blog.falchionconsulting.com/index.php/2011/12/updating-sharepoint-2010-user-information/](http://blog.falchionconsulting.com/index.php/2011/12/updating-sharepoint-2010-user-information/) 与其说是脚本不如说是洞察力...

set-spuser -identity 'domain\username' -web [http://yoursitehere.com](http://yoursitehere.com) -email 'username@yoursitename.com'

Powershell 需要引号。我希望显示电子邮件地址！

PS中非常好的示例（get-help set-SPUser）

# jenkins - 如何编写 Jenkins 电子邮件分机模板来显示测试结果，如标准测试报告

> ID：11332956
> 
> 赞同：18
> 
> 时间：2012-07-04T16:51:33.847
> 
> 标签：jenkins, hudson, jelly, email-ext

我已经调整了标准果冻模板以在表格中显示当前测试结果，但是我真的希望能够显示 Jenkins 自己的测试结果页面中看到的差异。

例如：

```
JUnit Tests: 0 failures (±0) , 1 skipped (+1)

Package               Duration   Fail  (diff)  Skip  (diff)  Total  (diff)
foo.bar.baz              89 ms      0      0     1       +1     5       +2 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T20:24:18.270

为电子邮件分机插件编写一个 Groovy 模板，而不是 Jelly 模板。在 Groovy 模板中，您可以访问[构建](http://javadoc.jenkins-ci.org/hudson/model/Build.html)对象以进行构建。然后，您可以在其上调用[getTestResultAction](http://javadoc.jenkins-ci.org/hudson/model/AbstractBuild.html#getTestResultAction%28%29)以获取构建的[AbstractTestResultAction](http://javadoc.jenkins-ci.org/hudson/tasks/test/AbstractTestResultAction.html)，然后您可以查询所需的一切。

这是[Jenkins Main Module API](http://javadoc.jenkins-ci.org)的链接。Ext Email 插件的示例 Groovy 模板可以在`$JENKINS_HOME/plugins/email-ext/WEB-INF/classes/hudson/plugins/emailext/templates/groovy-html.template`. 有关 Groovy 模板/脚本使用的更多信息可以在[Email Ext 插件文档](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+plugin)中找到。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-08T14:22:08.793

如果您正在为如何通过内部 API 访问它而苦恼（很难知道并且总是存在限制），还有另一种更灵活的方法可以做到这一点。

> 使用 FILE 令牌而不是 groovy 模板

1.  使用脚本通过[Jenkins API](https://wiki.jenkins-ci.org/display/JENKINS/Remote+access+API)访问您的测试数据，对于您的情况，它就像[http://jenkins.server/job/yourjob/lastCompletedBuild/testReport/api/xml](http://jenkins.server/job/yourjob/lastCompletedBuild/testReport/api/xml)`email.html`并在工作区下生成您自己的 html 文件
2.  在`Default Content`email-ext 配置中的表单中，使用 FILE 令牌直接发送电子邮件`${FILE, path="email.html"}`

在上面的第 1 步中，你也可以使用更灵活的方式为你自己的模板，我使用 python 脚本和简单的字符串模板。

它对我来说很完美。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-23T10:16:52.150

要扩展这个答案：为电子邮件分机插件而不是果冻模板编写一个 Groovy 模板。在可编辑的电子邮件通知内容中

*   将内容类型设置为“HTML”或“HTML 和纯文本”
*   并包括这样的 groovy 脚本：

    ${SCRIPT, template="test.groovy"}

*   将 groovy 脚本放在电子邮件模板主页中，例如 /var/lib/jenkins/email-templates。请参阅下面的 test.groovy。

在下面的示例中，通过获取以下每个对象来迭代每个测试：'''junitResult.getChildren()'''。如果只想迭代失败的测试，那么可以使用 junitResult.getFailedTests()。请参阅 hudson.tasks.junit.TestResult API：[http](http://hudson-ci.org/javadoc/hudson/tasks/junit/PackageResult.html) ://hudson-ci.org/javadoc/hudson/tasks/junit/PackageResult.html 另请参阅 [http://hudson-ci.org/javadoc/hudson/model/构建.html](http://hudson-ci.org/javadoc/hudson/model/Build.html)

```
Collection<ClassResult> getChildren()
List<CaseResult>    getFailedTests() 
```

来自 email-ext-plugin 的示例/模板可以在这里看到： [https ://github.com/jenkinsci/email-ext-plugin/blob/master/src/main/resources/hudson/plugins/emailext/templates/groovy- html.template](https://github.com/jenkinsci/email-ext-plugin/blob/master/src/main/resources/hudson/plugins/emailext/templates/groovy-html.template)

此示例显示了每个测试套件和单个测试的摘要测试结果和结果表。测试.groovy：

```
<html>
<body>
<%

    import hudson.model.*

    def build = Thread.currentThread().executable
    def buildNumber = build.number
    def buildNumHash = build.getDisplayName()

    def testCount = "0"
    def testPassed = "0"
    def testFailed = "0"
    def testSkipped = "0"
    def buildDuration = "0"
    if(build.testResultAction) {
        def testResult = build.testResultAction
        testCount = String.format("%d",(testResult.totalCount))
        testPassed = String.format("%d",(testResult.result.passCount))
        testFailed = String.format("%d",(testResult.result.failCount))
        testSkipped = String.format("%d",(testResult.result.skipCount))
        testDuration = String.format("%.2f",(testResult.result.duration ))
    }

    def workspace = build.getEnvVars()["WORKSPACE"]
    def buildName = build.getEnvVars()["JOB_NAME"]
    def BUILD_STATUS = build.getEnvVars()["BUILD_STATUS"]
    def BUILD_URL = build.getEnvVars()["BUILD_URL"]

    def testResult = hudson.tasks.junit.TestResult

    def testResult2 = build.getAction(hudson.tasks.junit.TestResultAction.class)

%>

start test.groovy <br><br>
<b>TEST RESULT:</b> $testCount total, <b>$testPassed pass</b>, <b>$testFailed fail</b>, $testSkipped skip.<br>
Workspace : $workspace<br>
Project Name : $buildName $buildNumHash<br><br>

<!-- GENERAL INFO -->

<TABLE>
  <TR><TD align="right">
    <j:choose>
      <j:when test="${build.result=='SUCCESS'}">
        <IMG SRC="${rooturl}static/e59dfe28/images/32x32/blue.gif" />
      </j:when>
          <j:when test="${build.result=='FAILURE'}">
        <IMG SRC="${rooturl}static/e59dfe28/images/32x32/red.gif" />
      </j:when>
      <j:otherwise>
        <IMG SRC="${rooturl}static/e59dfe28/images/32x32/yellow.gif" />
      </j:otherwise>
    </j:choose>
  </TD><TD valign="center"><B style="font-size: 200%;">BUILD ${build.result}</B></TD></TR>
  <TR><TD>Build URL</TD><TD><A href="${rooturl}${build.url}">${rooturl}${build.url}</A></TD></TR>
  <TR><TD>Project:</TD><TD>${project.name}</TD></TR>
  <TR><TD>Date of build:</TD><TD>${it.timestampString}</TD></TR>
  <TR><TD>Build duration:</TD><TD>${build.durationString}</TD></TR>
  <TR><TD>Test duration:</TD><TD>${testDuration}</TD></TR>
</TABLE>
<BR/>

<!-- JUnit TEMPLATE  hudson.tasks.junit.TestResult   -->

<% def junitResultList = it.JUnitTestResult
try {
 def cucumberTestResultAction = it.getAction("org.jenkinsci.plugins.cucumber.jsontestsupport.CucumberTestResultAction")
 junitResultList.add(cucumberTestResultAction.getResult())
} catch(e) {
        //cucumberTestResultAction not exist in this build
}
// API: http://hudson-ci.org/javadoc/hudson/tasks/junit/PackageResult.html
%>

<!-- JUnit TEMPLATE: all tests PASS FAIL SKIP >
<% 
if (junitResultList.size() > 0) { %>
 <TABLE width="100%">
 <TR><TD class="bg1" colspan="2"><B>${junitResultList.first().displayName}</B></TD></TR>
 <% junitResultList.each{
  junitResult -> %>
     <% junitResult.getChildren().each { packageResult -> %>
        <TR><TD class="bg2" colspan="2"> <B>TEST SUITE: ${packageResult.getName()} Failed: ${packageResult.getFailCount()} test(s), Passed: ${packageResult.getPassCount()} test(s)</B>, Skipped: ${packageResult.getSkipCount()} test(s), Total: ${packageResult.getPassCount()+packageResult.getFailCount()+packageResult.getSkipCount()} test(s)</TD></TR>
        <% packageResult.getChildren().each{ suite -> 
               suite.getChildren().each{ test ->
           def colour = "lightgreen"
           def highlight1=""
           def highlight2=""
           RESULT = test.getStatus() // FAILED or PASSED or SKIPPED
           if (RESULT == hudson.tasks.junit.CaseResult.Status.FAILED || RESULT == hudson.tasks.junit.CaseResult.Status.REGRESSION) {
               colour = "#ffcccc" 
               highlight1="<B>"
               highlight2="</B>"
           }
           if (RESULT == hudson.tasks.junit.CaseResult.Status.SKIPPED) { colour = "#ffffb3" }
         %>
          <TR bgcolor="${colour}"><TD class="test" colspan="2">${highlight1}<li>${RESULT}: ${test.getFullName()} </li>${highlight2}</TD></TR>
        <% } }
      }
 } %>
 </TABLE>
 <BR/>
<%
} %>

end of test.groovy

</body>
</html> 
```

例如输出（只有文字没有颜色/格式）

```
start test.groovy 

TEST RESULT: 18 total, 18 pass, 0 fail, 0 skip. 
Workspace : /var/lib/jenkins/jobs/jobname-1/workspace 
Project Name : jobname-1 #20

BUILD SUCCESS 

Build URL   http://jenkinsurl:port/job/jobname-1/20/
Project:    jobname-1 
Date of build:  Mon, 23 Jan 2017 09:29:00 +0000 
Build duration: 10 min 
Test duration:  267.12

Test Results 
TEST SUITE: suitename1 Failed: 0 test(s), Passed: 3 test(s), Skipped: 0 test(s), Total: 3 test(s) 
 * PASSED: suitename1.testclass.testname1
 * PASSED: suitename1.testclass.testname2
 * PASSED: suitename1.testclass.testname3
TEST SUITE: suitename2 Failed: 2 test(s), Passed: 1 test(s), Skipped: 0 test(s), Total: 3 test(s) 
 * PASSED: suitename2.testclass.testname1
 * FAILED: suitename2.testclass.testname2
 * REGRESSION: suitename2.testclass.testname3

end of test.groovy 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-03-06T10:08:16.483

我在 Jelly 中的解决方案基于默认的 static-analysys.jelly 脚本

```
 <!-- JUnit TEMPLATE -->
  <j:set var="junitResultList" value="${it.JUnitTestResult}" />
  <j:if test="${junitResultList.isEmpty()!=true}">
    <div class="content">
      <a href="${rooturl}${build.url}/testReport">
        <h1>JUnit Tests</h1>
      </a>
      <table class="border">
        <tr>
          <th class="border">Package</th>
          <th class="border">Failed</th>
          <th class="border">Failed (diff)</th>
          <th class="border">Passed</th>
          <th class="border">Passed (diff)</th>
          <th class="border">Skipped</th>
          <th class="border">Skipped (diff)</th>
          <th class="border">Total</th>
          <th class="border">Total (diff)</th>
        </tr>
        <j:forEach var="junitResult" items="${it.JUnitTestResult}">
          <j:forEach var="packageResult" items="${junitResult.getChildren()}">
            <tr>
              <td class="border">
                <tt>${packageResult.getName()}</tt>
              </td>
              <td class="border test_failed">${packageResult.getFailCount()}</td>
              <td class="border test_failed">${packageResult.getFailCount()-packageResult.previousResult.getFailCount()}</td>
              <td class="border test_passed">${packageResult.getPassCount()}</td>
              <td class="border test_passed">${packageResult.getPassCount()-packageResult.previousResult.getPassCount()}</td>
              <td class="border test_skipped">${packageResult.getSkipCount()}</td>
              <td class="border test_skipped">${packageResult.getSkipCount()-packageResult.previousResult.getSkipCount()}</td>
              <td class="border">
                <b>${packageResult.getPassCount()+packageResult.getFailCount()+packageResult.getSkipCount()}
                </b>
              </td>
              <td class="border">
                <b>${packageResult.getPassCount()+packageResult.getFailCount()+packageResult.getSkipCount()-packageResult.previousResult.getPassCount()-packageResult.previousResult.getFailCount()-packageResult.previousResult.getSkipCount()}
                </b>
              </td>
            </tr>
            <j:forEach var="failed_test"
              items="${packageResult.getFailedTests()}">
              <tr>
                <td class="test_failed" colspan="5">
                  <tt>${failed_test.getFullName()}</tt>
                </td>
              </tr>
            </j:forEach>
          </j:forEach>
        </j:forEach>
      </table>
      <br />
    </div>
  </j:if> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-10-09T14:21:18.130

**用Allure**和**JUnit**制作了一个

 **[https://gist.github.com/unickq/036224c766a76bdd9eb5de379a187af5](https://gist.github.com/unickq/036224c766a76bdd9eb5de379a187af5) [![在此处输入图像描述](../Images/e128d8faeff8ca6c0f05549e5a40b50d.png)](https://i.stack.imgur.com/JuItd.png)**

# c# - C# linq .FirstOrDefault() 从 XML 获取更多元素

> ID：11332966
> 
> 赞同：1
> 
> 时间：2012-07-04T16:52:11.673
> 
> 标签：c#, xml, linq

上次我询问 linq，如果对象可能存在或不存在，如何从我的数据库中获取有关元素的信息。答案是：

```
 var elements = XElement.Load("objects.xml");
    var query1 = from query in elements.Descendants("Lemma")
                let null_LemmaSign = query.Element("Lemma.LemmaSign")
                et null_TE = query.Descendants("TE.TE").FirstOrDefault()
                where wyszuk == query.Element("Lemma.LemmaSign").Value
                select new
                {
                  word = null_LemmaSign == null ? "none" : null_LemmaSign.Value,
                  te = null_TE == null ? "none" : null_TE.Value,
                };

    foreach (var e in query1)
    {
     MessageBox.Show(e.word.ToString() + " - " + e.te.ToString());
    } 
```

另一种可能性是

```
let null_TE = query.Element("Sense").Element("TE").Element("TE.TE") 
```

但是现在我遇到的情况是，我必须获得的不仅仅是第一个元素`<TE>`。

来自数据库的示例（现在我只能选择第一项，猫，但我希望将它们全部收集）

```
<TE><TE.TE> cat</TE.TE></TE>,<TE><TE.TE> cat2</TE.TE></TE>,<TE><TE.TE> cat3</TE.TE></TE> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T16:55:56.793

使用`.ToList()`而不是`.FirstOrDefault()`. 子句中的第二行`select`必须更改，因为您将处理列表而不是单个元素

请注意，列表永远不会为空，但它可以包含 0 个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T16:54:01.250

你想使用 .Take() 并使用你想要的元素数量

同样有用的功能是 .Skip()

所以很容易做一些像分页这样的事情，例如结合它们。

# android - 从我的 android 应用程序中的任何活动中清除通知

> ID：11332973
> 
> 赞同：1
> 
> 时间：2012-07-04T16:53:04.467
> 
> 标签：android

假设我的应用中有 2 个活动，分别名为 Act1 和 Act 2。现在，Act1 在关闭时会发送一个状态通知，该通知会调用 Act2。使用 Act2，我可以清除该通知。现在假设用户没有点击通知并再次调用 Act1，通知不会被清除。我希望那发生。我怎么能那样做？

谢谢，罗希特

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T16:58:56.853

使用`android.app.NotificationManager`您可以通过通知 ID 清除通知。

```
NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
notificationManager.cancel(notificationId); 
```

# android - sharedpreferences 不保存数据

> ID：11332981
> 
> 赞同：0
> 
> 时间：2012-07-04T16:53:58.210
> 
> 标签：android

我想在第一个活动中保存数据并在第二个活动中使用它，在第一个活动中我使用了这个：

```
android.content.SharedPreferences someData;
public static String filename = "mySharedString";
someData = getSharedPreferences(filename, 0);
android.content.SharedPreferences.Editor editor = someData.edit();
editor.putString("HostIP", "192.168.1.101"); 
```

在第二个活动中我使用了这个

```
android.content.SharedPreferences someData;
TextView Message;
public static String filename = "mySharedString";
String HostIP;
someData = getSharedPreferences(filename, 0);
HostIP = someData.getString("HostIP", "0");
phoneNumber.setText(HostIP); 
```

但在电话号码上打印的结果`0`不是`192.168.1.101`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T16:54:47.607

在 sharedPrefrence 中编辑数据后，[commit()](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#commit%28%29)它。

```
editor.commit(); 
```

*   [看这里](http://developer.android.com/guide/topics/data/data-storage.html)

# php - jQuery 对 PHP 的 AJAX 响应的困难

> ID：11332984
> 
> 赞同：3
> 
> 时间：2012-07-04T16:54:04.563
> 
> 标签：php, javascript, jquery, ajax

我对 AJAX 相当陌生。我试图让一个简单的登录脚本工作。这是使用 jQuery 1.6.4。在下面的 AJAX 中，当用户单击一个按钮时，它会将电子邮件地址和密码发送到 login.php。这一切似乎都很好。问题在于成功功能。当电子邮件和密码正确时，它应该返回 true。当它不起作用时，它应该返回 false。使用 Firebug，我发现它可以与 console.log 一起使用。如果我写警报（响应）；它也可以正常工作。但是，即使 response 等于 true，条件始终评估为 false。我已经尝试了 `if(response=="true")`and `if(response==="true")`，将变量放在函数之外，以及其他一些没有成功的事情。有人对如何解决这个问题有任何想法吗？

谢谢你的任何帮助或想法，杰森。

阿贾克斯：

```
$("#firstpage").live('pageinit', function (evt) {
$('#button').click(function(){       
var $form = $('#login'),
$inputs = $form.find("input"),
serializedData = $form.serialize();
$.ajax({
  type: 'POST',
  url: 'php/login.php',
  data: serializedData,
  success: function(response){
    console.log("Response: "+response);
    if(response=="true") 
    {
$('#firstpage #wrong').text("Login script is working");
} else {
$('#firstpage #wrong').text("Your email and password combination did not match.");
}

    },      
  dataType: 'json'
});
});  
}); 
```

如果有帮助，这是我的 login.php 脚本。

```
$email = $_POST['email'];
$password = $_POST['password'];
require_once("DB.php");
$connection = mysql_connect($host, $user, $pass) or die ("Unable to connect!"); 
mysql_select_db($db) or die ("Unable to select database!"); 

$query = "SELECT * FROM member WHERE email='$email' AND password='".md5($_POST['password'])."'";
$result = mysql_query($query) or die ("Error in query: $query. ".mysql_error()); 

$num_rows = mysql_num_rows($result);
if($num_rows>0){
$output = true;
} else {
$output = false;
}
echo json_encode($output); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:02:22.293

响应是一个对象，因为您有“dataType：'json'”。jQuery 将尝试将 responseText 转换为 JSON。如果您需要检查服务器返回的数据，请尝试使用

```
if (response === true) {

} 
```

或者干脆

```
if (response) {

} 
```

或者只是让 jQuery 通过删除数据类型返回字符串：'json'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:01:11.063

不要使用完全等号的引号`===`。采用

```
if (response === true) 
```

因为您的 PHP 脚本返回`true`，而不是`"true"`.

我不热衷于 PHP，但尝试删除 true 周围的引号。

# php - PDO 更新未替换准备好的语句中的占位符

> ID：11332987
> 
> 赞同：5
> 
> 时间：2012-07-04T16:54:13.793
> 
> 标签：php, mysql, pdo

我正在尝试使用以下代码更新表。如果我更改`WHERE temp_booking_id = ':temp_booking_id'");`为使用实际的当前会话`temp_id`，则查询将运行，但会将占位符添加到表中（例如：签出）作为值。

`$data`持有正确的值，但没有替换占位符。

盯着这个看了好几个小时，我一生都无法弄清楚问题是什么，环顾四周，但没有找到解决方案。

`PDOStatement:errorInfo()`正在返回

> PDOStatement::errorInfo(): 数组 ( [0] => 00000 )

如果我删除占位符周围的逗号，它会返回

> PDOStatement::errorInfo(): 数组 ( [0] => HY093 )

有任何想法吗？

```
try {
  $data = array(
    'temp_booking_id' => $_SESSION['temp_id'],
    'check_in' => $in,
    'check_out' => $out, 
    'adults' => $a,
    'children1' => $c1,
    'children2' => $c2,
    'infants' => $i,
    'cots' => $c,
    'promo_code' => $pc
 );

 $STH = $DBH->prepare("UPDATE b_temp_booking 
   SET check_in = ':check_in',
   check_out = ':check_out',
   adults = ':adults',
   children1 = ':children1',
   children2 = ':children2',
   infants = ':infants',
   cots = ':cots',
   promo_code = ':promo_code' 
   WHERE temp_booking_id = ':temp_booking_id'");

 $STH->execute($data);

 echo "\nPDOStatement::errorInfo():\n";
 $arr = $STH->errorInfo();
 print_r($arr);

} catch(PDOException $e) {
  echo 'ERROR: ' . $e->getMessage();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-04T17:30:56.283

嗯，您的 SQL 语句似乎不需要单引号。例如，您可以尝试运行此块：

```
 $STH = $DBH->prepare("UPDATE b_temp_booking 
   SET check_in = :check_in,
   check_out = :check_out,
   adults = :adults,
   children1 = :children1,
   children2 = :children2,
   infants = :infants,
   cots = :cots,
   promo_code = :promo_code 
   WHERE temp_booking_id = :temp_booking_id"); 
```

查看关于 PDO 准备语句的 PHP 手册：[http](http://www.php.net/manual/en/pdo.prepared-statements.php) : //www.php.net/manual/en/pdo.prepared-statements.php 在这里看起来命名占位符周围不需要引号。

另外，请尝试按照他们使用 bindParam() 方法的示例进行操作：

```
$STH->bindParam(':temp_booking_id', $temp_booking_id);

$temp_booking_id = $_SESSION['temp_id']; // Not sure how binding the environment variable will work, so decoupling it.

$STH->bindParam(':check_in', $in);
$STH->bindParam(':check_out', $out); 
$STH->bindParam(':adults', $a);
$STH->bindParam(':children1', $c1);
$STH->bindParam(':children2', $c2);
$STH->bindParam(':infants', $i);
$STH->bindParam(':cots', $c);
$STH->bindParam(':promo_code', $pc); 
```

当您准备好执行时，您可以运行以下行：

```
$STH->execute(); 
```

检查一下，看看绑定参数是否是您正在寻找的。

# javascript - Javascript/jQuery：确定给定 URL 的域：“youtube.com”还是“vimeo.com”？

> ID：11332988
> 
> 赞同：-1
> 
> 时间：2012-07-04T16:54:20.910
> 
> 标签：javascript, jquery, parsing, url

我需要用 JS 处理 URL 并找出它们是否属于 youtube.com、vimeo.com 或不属于它们。我怎么做？

我发现了这个问题[How to get Domain name from URL using jquery ..?](https://stackoverflow.com/questions/4815559/how-to-get-domain-name-from-url-using-jquery) ，但它保留“ [http://www](http://www)。” 如果它包含在 URL 中，则为部分。

**编辑：**人们提出`indexOf`解决方案：如果`youtube.com`URL 路径中有一个怎么办？这甚至可能吗？如`www.example.com/?article=why_youtube.com_is_the_best`? 这个问题[可以。（句点）是 URL 路径部分的一部分吗？](https://stackoverflow.com/questions/7555553/can-period-be-part-of-the-path-part-of-an-url)似乎表明这是一个有效的 URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:05:21.170

```
var a = 'http://www.youtube.com/somevideo/vimeo';
var b = 'http://vimeo.com/somevideo/youtube';

var test = checkUrl(b);
console.log(test); //prints Vimeo

function checkUrl(test_url) {
    var testLoc = document.createElement('a');
        testLoc.href = test_url.toLowerCase();
    url = testLoc.hostname;
    var what;
    if (url.indexOf('youtube.com') !== -1) {
        what='Youtube';
    }else if (url.indexOf('vimeo.com') !== -1) {
        what='Vimeo';
    }else{
        what='None';
    }
    return what;
} 
```

[小提琴](http://jsfiddle.net/9xxxu/2/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-04T17:03:23.793

```
url = url.toLowerCase();

if (url.indexOf('youtube.com') > -1 || url.indexOf('vimeo.com') > -1) ..... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-04T17:05:07.017

```
 if(domain_name.indexOf("youtube.com") != -1 || domain_name.indexOf("vimeo.com") != -1){
        //...
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-04T17:12:54.800

```
var url = 'http://www.youtube.com/myurl/thevideo/';
var host = $('<a>click</a>').attr('href',url)[0].host;

if(host === 'www.youtube.com'){

} 
```

**编辑：**

如果要删除`www`，请使用此

```
var host = $('<a>click</a>').attr('href',url)[0].host.replace('www.',''); 
```

# android - 从锁定屏幕返回时出现空白屏幕

> ID：11332989
> 
> 赞同：2
> 
> 时间：2012-07-04T16:54:22.250
> 
> 标签：android, lockscreen

我是安卓新手。我正在开发一个应用程序，它将使用相似方法检测声音的频率幅度、相位和幅度。

我的申请需要很长时间才能完成。处理时间总是超过锁屏时间（整个过程通常需要7-10分钟）。

问题是：当我想返回我的应用程序（通过解锁屏幕）时，有时我的应用程序会变为空白。未显示任何元素。没有这样的消息说“进程 bla bla bla 已意外停止”。它只是空白。

我只希望即使屏幕被锁定也能运行该过程（不能像这样阻止屏幕锁定->[在使用android应用程序时防止屏幕锁定在调光/待机？](https://stackoverflow.com/questions/10446299/prevent-screen-lock-on-dimming-standby-while-using-android-app)）。

谁能告诉我这里发生了什么？以及如何解决这个问题？谢谢。

# facebook - 如何识别在我的 Blogger 博客上单击 Facebook Like 按钮的用户？

> ID：11332996
> 
> 赞同：0
> 
> 时间：2012-07-04T16:54:44.933
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我在我的博客上使用like按钮，我需要通过api获取点击它的人。我想知道用户 ID 或可以让我知道的东西。

我正在为我的论文开发一个应用程序，用于对社交网络和可视化进行数据挖掘。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T17:23:44.283

不幸的是，获取此信息需要安装。由于您提到您正在使用 Blogger，因此您几乎可以使用 JavaScript。

最好的办法是确保他们在点击“喜欢”按钮*之前*已经安装，因为这样会更容易处理。安装看起来像这样（为了简洁，也使用了一些 jQuery）：

```
<div id="fb-root"></div>
<script src="//connect.facebook.net/en_US/all.js" type="text/javascript">
<script type="text/javascript">
    FB.init({
        appId      : 'YOUR_APP_ID', // App ID
        status     : true, // check login status 
    });

    $('#button').click(function(evt)
    {
       FB.login(function(response)
       {
            if (response.authResponse)
            {
                // yay! logged in!
            }
       }); 
    }); 
```

现在您已经安装好了，您需要做的就是加入“Like”事件。

```
FB.Event.subscribe("edge.create", function(url)
{
   FB.getLoginStatus(function(response)
   {
       if (response.status === 'connected')
       {
           var userId =  response.authResponse.userID;

           // you now have the userId and the URL of the object they liked.
       }
    }
}); 
```

一旦你有了用户 ID 和 URL，你就可以在某个地方发起一个 AJAX 请求，这样你就可以跟踪谁喜欢什么。

更多文档：

*   [JS FB SDK](http://developers.facebook.com/docs/reference/javascript/)
*   [`FB.login`](http://developers.facebook.com/docs/reference/javascript/FB.login/)
*   [`FB.getLoginStatus`](http://developers.facebook.com/docs/reference/javascript/FB.getLoginStatus/)
*   [`FB.Event.subscribe`](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# core-data - 核心数据 NSMutable 集

> ID：11332998
> 
> 赞同：0
> 
> 时间：2012-07-04T16:54:51.697
> 
> 标签：core-data, one-to-many, entities

我正在使用核心数据并为我的一个实体设置一对多关系。我有两个实体。“团队”和“玩家”我正在尝试将 NSMutableSet 的玩家添加到团队中。

以下是我尝试将一名球员添加到球队中的方式。

```
-(void)addPlayerButton {

[_tempSet addObject:@""];

NSLog(@"number of cells in _tempSet is:%i",[_tempSet count]);

[self.tableView reloadSections:[NSIndexSet indexSetWithIndex:1]  withRowAnimation:UITableViewRowAnimationFade]; 

} 
```

这就是我保存的方式

```
-(void)saveButtonWasPressed {

self.team =[NSEntityDescription insertNewObjectForEntityForName:@"Team" inManagedObjectContext:self.managedObjectContext];

self.player = [NSEntityDescription insertNewObjectForEntityForName:@"Player" inManagedObjectContext:self.managedObjectContext];
[team addPlayersObject:player];

team.schoolName = _schoolName.text;
team.teamName = _teamName.text;
team.teamID = _teamName.text;
team.season =  _season.text;
team.headCoach = _headCoach.text;
team.astCoach = _assistantCoach.text;

player.firstName = cell.playerFirstName.text;
player.lastName = cell.playerLastName.text;
player.number  = cell.playerNumber.text;

[self.team addPlayers:_tempSet];

[self.managedObjectContext save:nil];
[self.navigationController popViewControllerAnimated:YES]; 
```

}

有两件事出错了，一​​是 _tempSet 只添加了一个对象，不能再添加了。*当我在 [self.team addPlayers: tempSet]*行之前单击保存时，第二个崩溃；*出现错误 [* _NSCFConstantString _isKindOfEntity:]: unrecognized selector sent to instance 0xd7cd8'

我对 Core Data 比较陌生，所以如果我做错了什么，请随时纠正我......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T18:22:35.053

在第一个功能中，您有这条线

```
[_tempSet addObject:@""]; 
```

然后稍后：

```
[self.team addPlayers:_tempSet]; 
```

因此，当您需要添加 Player 实体时，您将 NSString 添加到团队的玩家关系中。在第一个函数中尝试类似：

```
Player *newPlayer = (Player *)[NSEntityDescription insertNewObjectForEntityForName:@"Player" 
inManagedObjectContext:managedObjectContext];
[_tempSet addObject:newPlayer]; 
```

但是您可能还想为球员设置一些属性，而不仅仅是为球队添加一个空球员。

# javascript - Node.js 文件流的部分下载问题：写入约 400 字节的 100 kB 图像文件并继续前进，没有任何错误

> ID：11332999
> 
> 赞同：0
> 
> 时间：2012-07-04T16:54:52.927
> 
> 标签：javascript, node.js

在尝试学习使用 Node 文件流时，我编写了一些测试应用程序，它们从远程服务器获取图像并将它们保存到磁盘。问题是，虽然一些测试图像下载得很好，但其他测试图像以一种奇怪的方式失败，没有返回错误，并且只写入了 400 到 460 字节的 100+ kB 图像。在这里，您可以看到 nautilus 在左侧显示成功下载，在右侧显示从未抛出任何错误的部分下载失败。部分下载始终在 400 到 460 字节范围内。

![左侧下载成功，右侧部分下载  ](../Images/22765f7b3a4ae4ee246d347f39f14602.png)

这是我用于测试的示例代码；一些图像下载正常，其他图像部分下载并且没有错误：

```
var 
    express = require( 'express' )
,   app     = express.createServer()
,   request = require( 'request' )
,   fs      = require( 'fs' )
,   url     = 'http://static.designspiration.net/data/assets/012311-010912AM_158289.jpg';

app.get( '/', function( req, res){
    request( url, function( err ){
        if( err ){ console.log( err ); }
    }).pipe( fs.createWriteStream( './Downloads/testimage.jpg' ) );
});

app.listen( 8083 ); 
```

有人知道发生了什么吗？