# StackOverflow 问答 000144000-000144999

# architecture - 选择数据库类型

> ID：144001
> 
> 赞同：4
> 
> 时间：2008-09-27T16:59:45.387
> 
> 标签：architecture, relational, amazon-simpledb, bigtable

你什么时候会使用 bigtabe/simpledb 数据库和关系数据库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-27T17:22:37.547

关系数据库为您提供了更多的布局和查询灵活性，并且更易于使用，但如果您以后需要对数据进行分区，如果它不适合单个数据库服务器/集群，那么您最终也会感到更加痛苦。BigTable 和类似的东西本质上是无限扩展的，但是这样做是通过不提供一堆关系数据库功能并使设计问题变得更加困难来实现的。

鉴于可能有 0.1% 的地方最终需要 BigTable 级别的可扩展性，因此使用关系数据库几乎总是更好。如果您的数据模型足够简单，任何一个都可以工作，那么我*仍然*倾向于选择关系数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-27T17:17:50.210

大小、冗余和性能都是我脑海中浮现的关键词。

创建一个完成其工作的小型数据库相当容易，但是当您需要进行显着的扩展和冗余时，同时保持它以光速运行，对于很多人来说，将工作交给亚马逊会更便宜。这样做的时间比我们大多数人要长得多。

# flash - 如果用户更改页面，如何让 Flash mp3 播放器继续播放？

> ID：144017
> 
> 赞同：3
> 
> 时间：2008-09-27T17:10:34.457
> 
> 标签：flash, streaming, mp3, audio-player

我真的很喜欢 8tracks.com 上的 mp3 播放器，并且想知道他们是如何在我换页时也能保持 mp3 播放的？

例如，在[http://8tracks.com/mixes?q=Aztec+Camera](http://8tracks.com/mixes?q=Aztec+Camera)收听曲目，然后单击其中一个链接到另一个页面。音乐中断了 1/4 秒，然后在正确的时间点重新出现！

我认为它没有使用流媒体服务器，所以想知道它是否是 Flash 的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-27T17:26:17.787

保持简单：让播放器在 onunload 触发时将当前曲目/时间存储在 cookie 中，然后在下一页加载时从那里开始。您需要在 JavaScript 中编写几个支持函数，因为 AFAIK Flash 无法访问浏览器 cookie 或 JS 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-27T17:15:00.797

不知道他们是不是这样做的，但是您总是可以将音乐播放器和主页放在两个不同的框架中（只有主内容框架可见）。当然，这对（例如）在地址栏中输入新地址无济于事。

编辑：这不是他们的做法。大概他们将歌曲和播放位置保存在 cookie 中，并使用它在每个新页面上重新启动播放器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T17:23:19.947

您可以通过 Ajax 来做到这一点，这样您的内部“链接”实际上不会导航到另一个页面，而只是将内容加载到您的主要内容 div 中。这将允许任何流媒体不间断地继续，只要它位于内容被替换的 div 之外。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T17:25:48.383

或者避免使用 ajax 而是使用 iframe

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2008-09-27T17:18:26.963

是的，但是您会遇到与框架有关的所有问题，您将结束在所有页面上添加脚本代码以在用户直接进入站点而没有框架定义站点时小心

# ruby - 如何将 Interactive Ruby 整合到我的开发过程中？

> ID：144046
> 
> 赞同：6
> 
> 时间：2008-09-27T17:17:27.653
> 
> 标签：ruby, debugging, irb

我正在尝试找到一种将 IRB 与我的正常 ruby​​ 开发集成的更好方法。目前我很少在我的代码中使用 IRB。我只用它来验证语法或尝试一些小的东西。

我知道我可以将自己的代码加载到 ruby​​ 中

```
require 'mycode' 
```

但这通常不符合我的编程风格。有时我要检查的变量超出范围或在循环内。有没有一种简单的方法来启动我的脚本并在 IRB 内部的某个点冻结？我想我正在寻找一种更简单的方法来调试我的 ruby​​ 代码，而不会破坏我的 F5（编译）键。

或许有经验的 ruby​​ 开发者可以和我分享一个更精简的开发方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-28T00:44:40.853

安装 ruby​​-debug gem。当然，在您的应用程序中需要它（仅在开发/测试模式下）。现在您可以在要停止执行的地方编写“调试器”。

一旦您的应用程序在断点处停止，您可以键入“帮助”以了解所有命令。其中之一是“irb”。它启动一个 IRB 会话，您可以在其中访问当前上下文中的所有方法。

我个人主要使用 p（打印）、eval、vi（实例变量）和 vl（本地变量）。当然，n 代表下一个，c 代表继续。

但是，退出给定块/方法的命令对我来说从来没有用过。我从来没有调查过为什么:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T17:25:28.977

我不倾向于直接使用 irb，因为我倾向于在 rails 内部，所以使用脚本/控制台一堆，但我喜欢使用 ruby​​ 调试器（Ruby Debug gem）。它可以让你基本上设置一个断点，然后逐行遍历你的代码。

这是一个我实际上没有看过的关于它的截屏视频，但快速搜索了一下，它可能很有用：

[http://brian.maybeyoureinsane.net/blog/2007/05/07/ruby-debug-basics-screencast/](http://brian.maybeyoureinsane.net/blog/2007/05/07/ruby-debug-basics-screencast/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-02-11T00:31:35.637

对于 Eclipse 中的 Ruby 开发：现在可以使用 RDT（Ruby 开发工具）的改进版本。要直接在 Eclipse 中安装它，请单击帮助 > 软件更新 > 查找并安装 > 搜索新功能单选按钮 > 下一步 > 新远程站点 > 名称 = Ruby 和 URL = [http://update.aptana.com/update/rdt/ 3.2/](http://update.aptana.com/update/rdt/3.2/)

另一个 Ruby 插件是闪亮的新 Eclipse DLTK（动态语言工具包）。 [DLTK 稳定版 1.0.M5](http://download.eclipse.org/technology/dltk/downloads/)前几天刚出来。这里有一些[有用的安装技巧](http://wiki.openqa.org/display/WTR/Setting+up+Eclipse+for+Ruby)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T17:23:12.023

我只是使用 rdebug 来调试我的任何 ruby​​ 或 RoR 代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T19:50:10.890

如果您愿意使用 IDE 进行调试，我知道[Eclipse](http://www.eclipse.org/ "蚀")（通过[Ruby 开发工具](http://rubyeclipse.sourceforge.net/)）有一个相对简单的界面。如果您正在使用 rails，那么有一个名为[RadRails](http://www.aptana.com/rails)的特定 Eclipse 构建，它也可能会有所帮助（尽管我没有将它用于调试）

# linux - 为小型站点推荐的 IRC 服务器 (ircd)？

> ID：144049
> 
> 赞同：11
> 
> 时间：2008-09-27T17:17:54.237
> 
> 标签：linux, comparison, irc

情况：

我想使用 IRC 机器人作为我正在调查的其他代码的通用通信接口。服务器硬件将是旧的和低内存的，但在相对最新的 Debian GNU/Linux 安装上运行。我预计一次不会超过一百个用户，最多，而且大多数时候可能只有个位数。这里的接口比服务器本身更有趣，所以我更喜欢维护相对简单的东西，而不是具有大量配置和调整选项的东西，这些选项对更大的站点更有用。

参考[Wikipedia 比较](http://en.wikipedia.org/wiki/Comparison_of_IRC_daemons)和[Google PageRank 列表](http://www.google.com/Top/Computers/Software/Internet/Servers/Chat/IRC/)与 Debian 的可用软件包列表，得出以下顶级竞争者：[Undernet](http://coder-com.undernet.org/) (ircd-ircu)、[Ratbox](http://www.ircd-ratbox.org/) (ircd-ratbox) 和[Inspire](http://www.inspircd.org/) (inspirecd)。不幸的是，我找不到对它们进行任何认真的比较，所以我希望在这里提问能够提供一种更快的解决方案，而不是一次尝试一个，直到某些事情让我感到沮丧以至于无法行动。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-27T17:25:51.657

[如果设置有点复杂， Unreal IRCd](http://www.unrealircd.com/)功能齐全。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-06-13T07:13:02.947

在过去的几天里，我一直在用 Python 和 IRCLib 编写一个机器人。由于我正在编写通信接口，因此我需要查看在服务器和客户端之间传输的原始数据。所以，我需要一个 IRC 服务器来支持它。起初我使用的是 IRCD，它完全没问题。但过了一段时间，我意识到我错过了一些 IRCD 过时以来没有的功能。因此，经过进一步研究，我发现了 ngIRCd。

我使用这些选项“--enable-sniffer --enable-debug”从源代码编译它。现在，当我想查看我的机器人和我的客户端之间发送的信息时，我只需要使用 -n 和 -s 选项启动服务器。像这样：ngircd -n -s

这是服务器的网站：http: [//ngircd.barton.de/](http://ngircd.barton.de/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-27T19:45:25.737

我最终选择了 Unreal IRCd 来托管 IRCD。为什么？Halfop、管理员/保护、创始人/所有者、高级操作员 acl、通过 i:line 的 vHost 等...

另见

*   [http://en.wikipedia.org/wiki/Comparison_of_IRC_daemons](http://en.wikipedia.org/wiki/Comparison_of_IRC_daemons)
*   [http://www.howtoforge.com/linux_irc_server_anope_services](http://www.howtoforge.com/linux_irc_server_anope_services)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T17:53:21.530

请改用 XMPP。IRC 不是为您的情况而设计的；它可以工作，但这是一个很大的痛苦。

# java - Eclipse Ganymede 未正确验证 JSP

> ID：144058
> 
> 赞同：7
> 
> 时间：2008-09-27T17:19:32.173
> 
> 标签：java, eclipse, validation, jsp, ganymede

我刚刚安装了 Ganymede，并且正在探索其中的一个旧项目。我所有的 JSP 都给了我奇怪的验证错误。我看到的东西像 -

```
Syntax error on token "}", delete this token
Syntax error on token "catch", Identifier expected
Syntax error, insert "Finally" to complete TryStatement 
```

我在这里做最佳实践，没有任何脚本或任何东西，所以我认为 Eclipse 错误地将 Java 类验证器应用于我的 JSP。关于如何阻止这种情况发生的任何想法？

在选项/编辑器/文件关联下，我为 JSP 提供了以下内容：

```
JSP Editor (default)
Web Page Editor
Text Editor
CSS JSP Editor 
```

我错过了什么吗？

我也认为这是正确的，但以防万一，这是我的页面指令-

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
pageEncoding="ISO-8859-1"%> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-11-14T16:59:36.833

我实际上通过[eclipse webtools usergroup](http://www.eclipse.org/newsportal/article.php?id=17447&group=eclipse.webtools#17447)发现了我的问题。对我来说，问题是使用 Spring 表单自定义标签库。如果您自行关闭标签...

```
<form:errors path="*" /> 
```

...然后你会得到愚蠢的 JSP 验证错误。如果您关闭标签，就好像有正文内容一样...

```
<form:errors path="*"></form:errors> 
```

然后错误消失。我需要跟进 Ganymede 团队的一个错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-10-15T06:06:34.170

这实际上与编辑器本身无关。

这通常是因为
A) 缺少开始或结束标记的自定义标记导致翻译不平衡
或
B) 是 JSP 验证器对自定义标记的脚本变量处理不当的结果。

一个是 JSP 文件的错误，另一个是验证器的错误。在即将发布的 WTP 3.0.3 和 Ganymede SR2 版本中，两者都不会导致此问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-03-03T00:07:05.173

我刚刚下载了 Ganymede 3.4.2 并添加了 WTP 3.0.4，这个错误对我来说已经消失了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2010-03-07T19:55:13.760

我刚刚运行了软件更新-> Gynemede 更新站点->“Web 和 Java EE 开发”的更新，错误似乎消失了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-27T17:39:38.007

在首选项 -> 编辑器 -> 文件关联下，您可以看到哪些编辑器与 .jsp 文件相关联。也许它与错误的编辑器和内容检查有关。您可以在 Web 工具平台 (WTP) 工具包中找到相当不错的 JSP 编辑器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-11-11T15:56:18.467

我有同样的问题。Ganymede 中的任何 JSP 编辑器都不喜欢我的 if/else 脚本：

```
<%  if(message != null) { %>
    <p id="message"><%=message %></p>
<%  } else { %>
    <p>Please login to view your account information.</p>
<%  } %> 
```

它告诉我：

```
Syntax error on token "}", delete this token
Syntax error on token "catch", Identifier expected
Syntax error, insert "Finally" to complete TryStatement 
```

...在最后的右括号上。我与原始海报具有相同的文件关联。我想我会尝试在 WTP 工具包中找到另一个 JSP 编辑器，但我的印象是我的构建附带的。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-01-20T14:45:13.683

不幸的是，这显然是在 Ganymede 的 Service Release 1（Eclipse Ganymede SR1，v 3.4.1）中引入的一个已知错误。

有关详细信息，请参阅以下页面：

[http://www.coderanch.com/t/106846/IDEs-Version-Control-other-tools/Ganymede-bug-using-jsp-include](http://www.coderanch.com/t/106846/IDEs-Version-Control-other-tools/Ganymede-bug-using-jsp-include)

[http://www.eclipse.org/newsportal/article.php?id=17447&group=eclipse.webtools#17447](http://www.eclipse.org/newsportal/article.php?id=17447&group=eclipse.webtools#17447)

该错误已在 WTP 3.0.3 中修复。请注意，要通过 Eclipse 的“软件更新”功能进行修复，您必须手动将 WTP 更新站点添加到更新期间搜索的站点列表中，方法是使用“Maage Sites...”功能并检查 Eclipse网络工具网站。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-02-18T19:25:35.323

嗯，我升级到3.0.3，没有效果。这主要发生在 <%@ include file="somefile.jsp" %> -style 包含中。令人难以置信的沮丧——当我有 300 多个错误时，很难找到真正的错误。任何人有幸回到早期版本的 WTP 吗？

# asp.net-mvc - 如何在 ASP.NET MVC 中传递页面的元标记？

> ID：144088
> 
> 赞同：9
> 
> 时间：2008-09-27T17:29:17.593
> 
> 标签：asp.net-mvc, master-pages

最近几天我在玩 ASP.NET MVC，并且能够构建一个小型站点。一切都很好。

现在，我需要通过 ViewData 传递页面的 META 标记（标题、描述、关键字等）。（我正在使用母版页）。

你是如何处理这个问题的？先感谢您。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-27T17:45:31.657

这是我目前的做法......

在母版页中，我有一个带有默认标题、描述和关键字的内容占位符：

```
<head>
<asp:ContentPlaceHolder ID="cphHead" runat="server">
    <title>Default Title</title>
    <meta name="description" content="Default Description" />
    <meta name="keywords" content="Default Keywords" />
</asp:ContentPlaceHolder>
</head> 
```

然后在页面中，您可以覆盖所有这些内容：

```
<asp:Content ID="headContent" ContentPlaceHolderID="cphHead" runat="server">
    <title>Page Specific Title</title>
    <meta name="description" content="Page Specific Description" />
    <meta name="keywords" content="Page Specific Keywords" />
</asp:Content> 
```

这应该让您了解如何设置它。现在您可以将此信息放入您的 ViewData (ViewData["PageTitle"]) 或将其包含在您的模型中（ViewData.Model.MetaDescription - 对博客文章等有意义）并使其成为数据驱动的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-09-29T04:19:28.177

把它放在你的视图数据中！执行以下操作...

BaseViewData.cs - 这是一个 viewdata 类，所有其他 viewdata 类都将从中继承

```
public class BaseViewData
{
    public string Title { get; set; }
    public string MetaKeywords { get; set; }
    public string MetaDescription { get; set; }
} 
```

然后您的 Site.Master （或其他）类应定义如下：

```
public partial class Site : System.Web.Mvc.ViewMasterPage<BaseViewData>
{
} 
```

现在在您的 Site.Master 页面中只需

```
<title><%=ViewData.Model.Title %></title>
<meta name="keywords" content="<%=ViewData.Model.MetaKeywords %>" />
<meta name="description" content="<%=ViewData.Model.MetaDescription %>" /> 
```

而你却在笑！

HTH，查尔斯

附言。然后您可以扩展这个想法，例如将您的 User (IPrincipal) 类的 getter 放入 LoggedInBaseViewData 类。

# database-design - 数据库设计

> ID：144090
> 
> 赞同：0
> 
> 时间：2008-09-27T17:29:33.863
> 
> 标签：database-design, resources

我需要创建一个数据库来存储模拟结果。有什么资源可以帮助我设计这个？

编辑：对于那些想要更多细节的人......

我们使用军方使用的离散事件模拟。因此，重要的模拟事件是武器开火、击杀发生时以及武器未能击杀目标时。其他重要事件是检测到目标或不再跟踪目标。我们保留了非常详细的日志文件，然后我们会挖掘这些文件来计算平均值和其他统计数据。这主要是我关心存储在数据库中的统计数据。

我想包括的另一件事是案例 ID。我们使用与系统和重要输入参数的特定组合相对应的字母数字案例 ID 字符串来识别不同案例。例如，假设传感器可以根据模式在 3 个不同范围内检测到目标，则案例 ID 中将有一个字符对应于每个检测范围级别，标记为 0、1 或 2。如果有足够的级别对于给定的案例，案例 ID 字符在 9 之后切换为字母。这个案例 ID 肯定是数据库中的一个重要键。一旦我们存储了数据，我们需要检索某些数字来制作比较不同情况的图表。我们目前在 Excel 中制作图表，但我最近一直在添加更多 MATLAB。

至于数据库技术，我想我会在Access中做表设计来原型化，然后在MS SQL Server中实现它。我打算使用 Ruby 创建带有数据表和图表的 HTML 报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-27T17:38:27.977

提供以下内容，您将获得有用的答案

1.  数据库类型（MsSQL、MySQL 等）
2.  您使用的任何其他语言（C#、PHP）
3.  您要存储的数据
4.  您打算如何处理数据（它可能会影响如何最好地存储和查询它），这一步是非常可选的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T18:01:26.877

可以提供帮助的一件事是拥有实体关系图。这将帮助您设计您希望使用的不同表格以及这些表格是如何相互关联的。如果您的模拟不需要使用超过几个表，这对于您的需求可能是多余的。

我们使用的一个便宜的解决方案（不是免费的）是[Happy Fish](http://www.polderij.nl/happyfish/ "快乐鱼")。它提供了一种可视化数据的好方法，即使对于具有一百多个表的复杂应用程序也是如此。此工具将自动生成模式 DDL 来为您的环境创建必要的表、索引、外键约束（包括对 Oracle、MySQL、Microsoft SQL Server 等的支持）。

这方面还有许多其他工具。[您可以从Wikipedia](http://en.wikipedia.org/wiki/Entity-relationship_model#Free_software_Diagram_tools "来自维基百科的免费 ERD 工具")中找到一系列免费工具。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T17:35:22.773

有一个名为“Stack Overflow”的网站有一群可以提供帮助的聪明人。;-)

提供有关您要存储的内容的更多详细信息，我相信您会得到很多有用的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T18:01:33.537

如果您使用的是关系数据库（提示：可能是），那么首先要知道的是如何规范化您的数据（即正确地构建表格）。

好的起点：这篇[维基百科文章](http://en.wikipedia.org/wiki/Database_normalization)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-27T18:05:47.867

模拟什么？

David C. Hay所著的[Data Model Patterns: Conventions of Thought一书为许多业务类型提供了设计秘诀。](http://www.dorsethouse.com/books/dmp.html)也许您可以从那里的模型中获得灵感？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-27T21:02:02.543

我建议您在计划使用的数据库中制作原型。从长远来看，访问不适用于此类数据。由于 Access Sql 与 SQL Server t-sql 非常不同，并且访问数据类型与 SQL Server 数据类型不同（并且向导在转换时做出了非常糟糕的选择），因此使用 Access 原型不会为您带来任何好处，并且可能会创建更多的工作来重新创建您的东西已经解决了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-27T18:08:30.853

通常，我们会写下用例——谁将使用它以及他们将要做什么。

有时，我们会记下数据库中的内容。实体、它们的属性以及实体所做的不同事情。

一旦我们有了一些基本的背景，我们经常会绘制实体图以及它们之间的关系。

鉴于所有这些，我们试图找到有经验的人，他们可以帮助我们将我们的图片映射到可用的技术上，并为下一步提出一些建议。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-27T21:05:11.913

就 DBMS 基础而言：使用 SQL Server Express，然后根据需要迁移到 SQL Server。不要为此使用 Access。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-29T10:37:11.030

If you're going to use Ruby, then consider building your database using [ActiveRecord](http://wiki.rubyonrails.org/rails/pages/ActiveRecord) (a core component of Rails, but is not exclusively tied to it). That way you get to evolve your schema using migrations, which is a nice way to manage things. By default your database gets implemented in SQLite, which if you don't mind losing the graphical aspects of Access, is a nice little package (and probably the most-implemented DB software in the world, which not a lot of people know). Moving up to SQL Server should be fairly pain-free (I've done it - no major scars).

If you go that route, and plan to output HTML via Ruby from your data, why not go the whole hog and build the whole thing as a [Rails](http://www.rubyonrails.org/)-based web site? The number of wheels you avoid reinventing might be worth it.

(Disclaimer: I'm a born-again Rails programmer with a long history of Windows-based DB application development. Apologies for any inadvertent evangelism.)

# .net - 举办活动的合适地点？

> ID：144106
> 
> 赞同：0
> 
> 时间：2008-09-27T17:36:01.603
> 
> 标签：.net, events, event-based-programming

我有一个刚刚开始的 Windows 窗体项目。在表单上，​​我有一个正在加载产品的列表框。当有人双击产品时，我希望它引发 ProductChanged 事件。我项目中的其他内容将订阅此事件并在产品更改时更新 GUI 其他部分的内容。

我的问题是，该事件应该在哪里以及应该由谁提出？事件是否应该在表单上并由列表框的双击处理程序引发？或者我应该在我的 Products 类中的事件所在的位置设置它，并且列表框调用此类上的方法以让它知道产品已更改。然后 Product 类会引发事件？还是应该以其他方式完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-27T17:37:56.560

更改的产品是一个 UI 事件，如果它在表单上引发，并且其他 UI 元素订阅该事件，这将是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-27T17:38:39.553

列表框应该引发事件，因为它的产品已更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T19:02:34.810

名称*ProductChanged*意味着在产品更改时触发事件。我会在产品类中引发事件，因为在这种情况下，每次更改都会触发事件。如果您在 GUI 中触发它，然后添加（例如）导入功能，则很可能您忘记在更改后触发事件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T17:42:21.760

取决于你的事件意味着什么。如果目的是通知订阅者 Product 对象已被修改，那么它属于 Product 类并且应该由该类中的代码触发。如果目的是通知选择了另一个产品对象，那么它属于管理产品列表（您的列表框/表单）的视图。

# sql - SQL Server 规范化策略：varchar vs int Identity

> ID：144109
> 
> 赞同：2
> 
> 时间：2008-09-27T17:37:39.977
> 
> 标签：sql, sql-server, database-design, optimization, normalization

我只是想知道这里的最佳解决方案是什么。

假设我有一个规范化的数据库。整个系统的主键是一个varchar。我想知道我应该将此 varchar 与 int 关联以进行规范化还是保留它？保留为 varchar 更简单，但可能更理想

例如我可以有

```
People
======================
name      varchar(10)   
DoB       DateTime    
Height    int  

Phone_Number
======================
name      varchar(10)   
number    varchar(15) 
```

或者我可以

```
People
======================
id        int Identity   
name      varchar(10)   
DoB       DateTime  
Height    int  

Phone_Number
======================
id        int   
number    varchar(15) 
```

当然，还要添加几个其他的一对多关系。

大家怎么看？哪个更好？为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-27T19:28:47.010

我相信大多数开发过任何大型现实世界数据库应用程序的人都会告诉您代理键是唯一现实的解决方案。
我知道学术界会不同意，但这就是理论纯度和实用性之间的区别。

任何必须在使用非代理键的表之间进行连接的合理大小的查询，其中一些表具有复合主键，很快就会变得不可维护。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-27T17:59:44.417

你真的可以使用名称作为主键吗？几个人同名的风险不是很大吗？

如果您真的很幸运，您的 name 属性可以用作主键，那么 - 无论如何 - 使用它。但是，通常您必须编造一些东西，例如 customer_id 等。

最后：“NAME”是至少一个 DBMS 中的保留字，因此请考虑使用其他名称，例如全名。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-27T18:15:24.550

使用任何类型的非合成数据（即来自用户的任何数据，而不是由应用程序生成的数据）作为 PK 都是有问题的；您必须担心文化/本地化差异、区分大小写（以及其他取决于数据库排序规则的问题），如果/当用户输入的数据发生变化时，可能会导致数据问题等。

使用非用户生成的数据（顺序 GUID（如果您的数据库不支持它们或您不关心页面拆分，则为非顺序）或身份整数（如果您不需要 GUID））更容易，并且安全得多。

关于重复数据：我看不出使用非合成密钥如何保护您免受这种影响。您仍然会遇到用户输入“Bob Smith”而不是“Bob K. Smith”或“Smith, Bob”或“bob smith”等的问题。无论您的密钥是否是合成的，重复管理都是必要的（并且几乎相同）或非合成和非合成密钥有许多其他潜在问题，合成密钥可以巧妙地避免。

许多项目不需要担心这一点（例如，严格限制的排序规则选择会避免其中的许多），但总的来说，我更喜欢合成键。这并不是说有机键不能成功，显然可以，但对于许多项目来说，它们并不是更好的选择。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-27T18:05:17.600

我认为如果您的 VARCHAR 更大，您会注意到您在整个数据库中复制了相当多的数据。而如果您使用数字 ID 列，则在将外键列添加到其他表时，您不会复制几乎相同数量的数据。

此外，就比较而言，文本数据是一种皇家痛苦，当您执行**WHERE id = user_id**与**WHERE name LIKE inputname**（或类似的东西）时，您的生活会容易得多。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-27T19:46:39.837

如果“名称”字段确实适合作为主键，那么就这样做。在这种情况下，通过创建代理键*不会*使数据库更加规范化。您将获得一些外键重复的字符串，但这不是规范化问题，因为 FK 约束保证字符串的完整性，就像它在代理键上一样。

但是，您并没有解释“名称”是什么。在实践中，字符串很少适合作为主键。如果是一个人的名字，就不能PK，因为多人可以同名，人可以改名等等。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-27T20:56:41.637

其他人似乎没有提到的一件事是 int 字段上的连接往往比 varchar 字段上的连接性能更好。

而且我肯定会始终使用代理键而不是使用（人或企业的）名称，因为它们永远不会随着时间的推移而唯一。例如，在我们的数据库中，我们有 164 个名称，其中有超过 100 个同名实例。这清楚地表明了考虑使用名称作为关键字段的危险。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-28T19:40:09.220

最初的问题不是标准化问题。如您所说，如果您有一个规范化的数据库，那么出于规范化的原因，您不需要更改它。

你的问题确实有两个问题。首先是整数或 varchars 是否更适合用作主键和外键。第二个是你是否可以使用问题定义中给出的自然键，或者你是否应该生成一个合成键（代理键）来代替自然键。

int 比 varchars 更简洁一些，并且对于诸如索引处理之类的事情更有效。但差异并不是压倒性的。您可能不应该仅在此基础上做出决定。

提供的自然键是否真的作为自然键起作用的问题要重要得多。“名称”列中的重复问题并不是唯一的问题。还有一个问题是当一个人改变她的名字时会发生什么。这个问题可能不会在您给出的示例中出现，但它确实会出现在许多其他数据库应用程序中。一个例子是一个学生四年的所有课程的成绩单。一个女人可能会在四年内结婚并改名，现在你被困住了。

您要么必须保持名称不变，在这种情况下它不再与现实世界一致，要么在此人参加的所有课程中追溯更新它，这使得数据库与当时制作的打印名册不一致。

如果您决定使用合成密钥，您现在必须决定应用程序是否要向用户社区揭示合成密钥的价值。那是另一个完整的蠕虫罐头，超出了本次讨论的范围。

# sql - ORA-01031: 创建包时权限不足

> ID：144113
> 
> 赞同：11
> 
> 时间：2008-09-27T17:38:54.623
> 
> 标签：sql, oracle, packages

我收到 ORA-01031：我自己的架构创建包时权限不足。我不应该完全控制我的架构。如果不是这种情况，我的架构需要什么权限？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2008-09-27T17:48:24.397

您可能需要*GRANT CREATE PROCEDURE TO USERNAME*。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-27T18:39:19.673

如果您引用的表不在您的架构中，即使您可以从表中选择数据，您也可能会收到此错误。问题是角色授予的权限适用于 sql，但不适用于 PL/SQL。PL/SQL 要求授予用户权限。

另一个可能的问题是您没有创建过程所需的创建过程系统特权。

# text-to-speech - 浏览器有免费的文字转语音吗？

> ID：144117
> 
> 赞同：12
> 
> 时间：2008-09-27T17:40:30.890
> 
> 标签：text-to-speech

想知道是否有任何文本转语音软件可用作 IE 或 Firefox 的插件。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-27T17:54:23.010

[WebAnywhere](http://webanywhere.cs.washington.edu/)是一个大学项目，旨在创建一个站点，该站点允许您在任何位置从任何浏览器使用文本到语音，而无需安装任何东西或使用任何插件。

你可以[试试看](http://webanywhere.cs.washington.edu/wa.php)，自己看看。当我第一次听说它时，我对它印象深刻。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T21:06:14.903

还有[NVDA](http://www.nvda-project.org/) (NonVisual Desktop Access)，它是一个用于 Windows 的开源通用屏幕阅读器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-27T22:25:34.947

它是为 Mac OSX 上的 Safari 内置的。突出显示任何文本并转到菜单，Safari > 服务 > 语音 > 开始朗读文本。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T18:07:40.543

*   [火之声](http://www.firevox.clcworld.net/)
*   [獠牙](http://www.standards-schmandards.com/projects/fangs/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-27T21:59:11.783

我知道您要求为 IE 和 Firefox 提供插件，但我想我只是补充说 Opera 支持文本到语音（用于发出命令和 Opera 向您读取网络/电子邮件）开箱即用（在 Windows 和可能的 Mac 中）操作系统）。

请参阅[Opera 语音](http://www.opera.com/products/desktop/voice/)页面。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-27T22:13:00.157

Windows 讲述人是默认 XP 安装的一部分，可以在任何浏览器中使用。我还建议您试用[迅雷](http://www.screenreader.net/)，它是免费的，可以与 IE 和大多数其他 Windows 应用程序一起使用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-11-11T19:53:24.270

对于 Firefox，有 LowBrowse，它具有光标所在段落的文本到语音。

# xml - JAXB 绑定自定义

> ID：144118
> 
> 赞同：4
> 
> 时间：2008-09-27T17:40:45.663
> 
> 标签：xml, xsd, jaxb

尝试从 xsd 生成类时，出现此错误：

```
java.lang.IllegalArgumentException: Illegal class inheritance loop.  Outer class OrderPropertyList may not subclass from inner class: OrderPropertyList 
```

我的 xsd 定义了一个元素来对无界元素进行分组，如下所示：

```
 <element minOccurs="0" name="orderPropertyList">
    <complexType>
      <sequence>
        <element maxOccurs="unbounded" name="orderProperty" type="tns:orderProperty" />
      </sequence>
    </complexType>
  </element> 
```

我的自定义绑定遵循[此页面](http://java.sun.com/webservices/docs/1.5/tutorial/doc/JAXBUsing4.html)上的指定，但它不起作用。这是我的绑定：

```
<jaxb:bindings schemaLocation="../xsd/Schema.xsd" node="/xs:schema">
    <jaxb:bindings node="//xs:element[@name='orderPropertyList']">
        <jaxb:class name="OrderPropertyList"/>
    </jaxb:bindings>
</jaxb:bindings> 
```

我的意图是为 orderPropertyList 生成一个单独的类，而不是在 xsd 的根元素内生成内部类的默认行为。

[我在这里](http://forums.java.net/jive/thread.jspa?threadID=15633)和[这里](http://forums.java.net/jive/message.jspa?messageID=228180)看到过有同样意图的人，但它对我来说不能正常工作。:(

JAXB 版本：

```
Specification-Version: 2.1
Implementation-Version: 2.1.8 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-10-07T19:15:49.677

我相信您需要设置：

```
<jaxb:globalBindings localScoping="toplevel"/> 
```

这将生成独立类而不是嵌套类。

正在做

```
<jaxb:bindings schemaLocation="../xsd/Schema.xsd" node="/xs:schema">
    <jaxb:bindings node="//xs:element[@name='orderPropertyList']">
            <jaxb:class name="OrderPropertyList"/>
    </jaxb:bindings>
</jaxb:bindings> 
```

是一个冗余绑定，因为 orderPropertyList 将默认映射到 OrderPropertyList。包的名称包括默认情况下嵌套的外部类名称，因此您无需更改它。

另外，如果您确实想更改生成类的名称，我认为 XPath 实际上是：

```
<jaxb:bindings node="//xs:element[@name='orderPropertyList']/xs:complexType"> 
```

以 complexType 结尾。我认为排除这是导致您收到错误消息的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2011-10-15T01:09:52.870

当你有如下模式时，这真的很有趣：

```
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.0">
    <xsd:element name="TopLevelElement">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="Something">
                    <xsd:complexType>
                        <xsd:sequence>
                            <xsd:element name="Something" maxOccurs="unbounded">
                                <xsd:complexType>
                                    <xsd:sequence>
                                        <xsd:element name="somethingFieldA" type="xsd:string"/>
                                        <xsd:element name="somethingFieldB" type="xsd:string"/>
                                    </xsd:sequence>
                                </xsd:complexType>
                            </xsd:element>
                        </xsd:sequence>
                    </xsd:complexType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

在这种情况下，xjc 似乎试图实际生成四个名为 的类`Something`，一个用于每个名为 的元素`Something`，一个用于它们的每个`complexType`s。因此，您需要提供一个绑定，该绑定专门针对这四个元素**和**复杂类型中的每一个，特别是在它们出现在模式中的级别（实际上只有三个，因为那样第四个就可以成为唯一的`Something`类）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T18:04:09.413

我相信这种情况正在发生，因为生成的表示“orderProperty”序列的 Java 类本身很可能被命名为“OrderPropertyList”。

我要做的是首先在没有任何自定义绑定的情况下生成它，然后查看它生成的类名和层次结构。然后，考虑你想要覆盖什么，以及如何覆盖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2011-10-25T14:31:37.533

我需要对类似**jeff303**提供的模式进行自定义。我的场景稍有不同，因为模式是内联在 WSDL 文档中的。

**philvarner**指出的一件事是元素的*节点选择应该以 '/xs:complexType' 结尾，*这似乎非常重要，因为如果没有它，编译器将不断生成与循环继承相关的 IllegalArgumentException。

这些帖子是相关的，所以我认为返回链接将对最终出现在这里的“谷歌搜索”有所帮助。

查看问题[7881883](https://stackoverflow.com/questions/7881883/jaxb-customizations-with-a-poorly-formed-wsdl/7884729#7884729)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-23T09:33:07.753

`/xs:complexType`在元素末尾输入 this有助于修复非法类继承循环错误。

# c - C 整数和字符之间的兼容性

> ID：144134
> 
> 赞同：1
> 
> 时间：2008-09-27T17:51:15.467
> 
> 标签：c, compatibility

C如何处理整数和字符之间的转换？假设您声明了一个整数变量并要求用户输入一个数字，但他们输入了一个字符串。会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-27T17:55:51.167

用户输入被视为需要使用 atoi 或其他转换函数转换为 int 的字符串。如果字符串不能被解释为数字，Atoi 将返回 0，因为它包含字母或其他非数字字符。

您可以在 MSDN 上的 atoi 文档中阅读更多内容 - [http://msdn.microsoft.com/en-us/library/yd5xkb5c(VS.80).aspx](http://msdn.microsoft.com/en-us/library/yd5xkb5c(VS.80).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T17:52:52.997

呃？你总是输入一个字符串。然后，您使用各种方式（再次询问、采用默认值等）处理各种错误（溢出、不正确的字符等），将此字符串解析为数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-27T18:27:34.210

另一件需要注意的是，在 C 语言中，字符和整数在某种程度上是“兼容的”。任何字符都可以分配给一个 int。反过来也可以，但是如果整数值不适合字符，您将丢失信息。

```
char foo = 'a'; // The ascii value representation for lower-case 'a' is 97
int bar = foo; // bar now contains the value 97 
bar = 255; // 255 is 0x000000ff in hexadecimal
foo = bar; // foo now contains -1 (0xff) 
unsigned char foo2 = foo; // foo now contains 255 (0xff) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-27T19:54:29.693

正如其他人所指出的，数据通常以字符串形式输入——唯一的问题是使用哪个函数进行读取。如果您使用的是 GUI，该函数可能已经以适当的方式处理转换为整数并报告错误等。如果您正在使用标准 C，通常更容易将值读入字符串（可能使用`fgets()`然后转换。虽然`atoi()`可以使用，但它很少是最佳选择；麻烦在于确定转换是否成功（并产生零，因为用户输入了零的合法表示）或不。

通常，使用`strtol()`或其亲属之一（`strtoul()`, `strtoll()`, `strtoull()`）；用于转换浮点数，使用`strtod()`或类似的功能。整数转换例程的优点包括：

*   可选的基数选择（例如，以 10 为基数，或以 10 为基数 - 十六进制，或以 8 为基数 - 八进制，或使用标准 C 约定的上述任何一种（007 用于八进制，0x07 用于十六进制，7 用于十进制）。
*   可选的错误检测（通过知道转换停止的位置）。

[我在POSIX](http://www.opengroup.org/onlinepubs/009695399/toc.htm)网站（其中包括 C99 函数）中获取许多这些功能规范（当我不查看实际 C 标准的副本时）。它以 Unix 为中心，而不是以 Windows 为中心。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T17:52:33.607

程序会崩溃，你需要调用atoi函数。

# javascript - 在 JScript 中遍历负数组索引

> ID：144147
> 
> 赞同：3
> 
> 时间：2008-09-27T17:59:39.020
> 
> 标签：javascript, arrays, sparse-matrix

我在 Jscript 中有一个稀疏数组，非空元素出现在负索引和正索引处。当我尝试使用 for in 循环时，它不会将数组从最低（负）索引遍历到最高正索引。相反，它按照我添加元素的顺序返回数组。枚举也不起作用。有什么方法可以让我这样做吗？

**例子**

```
arrName = new Array();
arrName[-10] = "A";
arrName[20] = "B";
arrName[10] = "C"; 
```

循环时，它应该给我 A 然后 C 给 B。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-27T18:18:35.947

从技术上讲，“A”根本不在数组中，因为您不能有负索引。它只是 arrName 对象的一个​​成员。如果您检查 arrName.length 您将看到它是 21 (0,1,2,...,20) 为什么不使用普通对象（作为哈希表）。像这样的东西应该工作：

```
<script type="text/javascript">
//define and initialize your object/hastable
var obj = {};
obj[20] = 'C';
obj[10] = 'B';
obj[-10] = 'A';

// get the indexes and sort them
var indexes = [];
for(var i in obj){
    indexes.push(i);
}
indexes.sort(function(a,b){
    return a-b;
});

// write the values to the page in index order (increasing)
for(var i=0,l=indexes.length; i<l; i++){
    document.write(obj[indexes[i]] + ' ');
}
// Should print out as "A B C" to the page
</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-27T18:23:34.250

您遇到了Javascript 中`Array`s 和s 之间的界限。`Object`数组元素按序号访问，序号是 0 到 4294967294 之间的整数（最大无符号 32 位整数 - 1），包括 0 和 4294967294。对象属性按名称访问。由于 -10 不是一个有效的序数，它被解释为一个名称。这是一个更简单的例子：

```
var arr = new Array();
arr[0] = 'A';
arr[1] = 'B';
arr[-1] = 'C';
arr.length 
```

结果为 2 - 数组中只有两个元素，索引为 0 和 1。

# excel - 如何防止 Excel 在我的宏计算电子表格时呈现它？

> ID：144151
> 
> 赞同：8
> 
> 时间：2008-09-27T18:01:48.903
> 
> 标签：excel

我的宏用数字更新了一个大型电子表格，但它运行非常缓慢，因为 excel 在计算结果时会渲染结果。如何在宏完成之前停止 excel 渲染输出？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2008-09-27T18:11:49.177

我使用了两种建议的解决方案：

```
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual
...
...
...
Application.Calculation = xlCalculationAutomatic
Application.ScreenUpdating = True 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T18:05:28.693

Application.ScreenUpdating = False

当然，完成后再次将其设置回 True，即使出现错误也是如此。例子：

```
Public Sub MyMacro
    On Error GoTo ErrHandler
    Application.ScreenUpdating = False
    ... do my stuff that might raise an error
    Application.ScreenUpdating = True
    Exit Sub
ErrHandler:
    Application.ScreenUpdating = True
    ... Do something with the error, e.g. MsgBox       
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-01-17T00:30:38.473

我也更喜欢使用这两种建议的解决方案，但也保持用户以前的计算模式。

对于这个特定的应用程序，这可能没什么大不了的，但通常最好的做法是让用户在您的过程完成后恢复他们的设置：

```
Application.ScreenUpdating = False
PreviousCalcMode = Application.Calculation
Application.Calculation = xlCalculationManual
   ...  
   ...
   ...
Application.Calculation = PreviousCalcMode
Application.ScreenUpdating = True 
```

注意。如果您原本出色的代码中发生错误，那么插入一些打开 Application.ScreenUpdating 的错误处理也是值得的；）如果我没记错的话，当 ScreenUpdating = false 时，Excel 不会显示任何错误消息等。像这样的东西：

```
Sub DoSomeThing

On Error Goto DisplayError

Application.ScreenUpdating = False
PreviousCalcMode = Application.Calculation
Application.Calculation = xlCalculationManual
   ...  
   ...
   ...
Application.Calculation = PreviousCalcMode
Application.ScreenUpdating = True

Exit Sub

DisplayError:
Application.Calculation = PreviousCalcMode
Application.ScreenUpdating = True

MsgBox Err.Description
End 'This stops execution of macro, in some macros this might not be what you want'
    '(i.e you might want to close files etc)'
End Sub 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T18:49:53.733

基于 Joe 和 SeeR（这使用旧语法，因此它与 Office 2000 的 VBA 兼容）：

```
On Error Goto AfterCalculation
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual
...

AfterCalculation:
Application.Calculation = xlCalculationAutomatic
Application.ScreenUpdating = True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T18:03:17.030

您可以在选项对话框中关闭自动计算，它将其设置为仅在您按 F9 时计算。

# mysql - 你将如何在 Ruby 中处理一个非常大的向量？

> ID：144166
> 
> 赞同：3
> 
> 时间：2008-09-27T18:07:50.153
> 
> 标签：mysql, ruby

我打算用 Ruby 编写一个程序来分析一些从在线问卷调查中返回的数据。有数十万个回复，每个回复者回答大约 200 个问题。每个问题都是多项选择，因此每个问题都有固定数量的可能答案。

目的是使用每个受访者提供的一段人口统计数据来训练一个系统，然后该系统可以从回答相同问卷但未指定人口统计的受访者那里猜测相同的人口统计数据（例如年龄）数据。

所以我计划使用一个向量（在数学意义上，而不是在数据结构意义上）来表示给定受访者的答案。这意味着每个向量都会很大（超过 200 个元素），并且总数据集会很大。我计划将数据存储在 MySQL 数据库中。

所以。2个问题：

1.  我应该如何将它存储在数据库中？对单个问题的每个回答一行，还是每个受访者一行？或者是其他东西？

2.  我打算使用类似 k 近邻算法或简单的机器学习算法（如朴素贝叶斯分类器）来学习对新响应进行分类。我应该纯粹通过 SQL 来操作数据，还是应该将其加载到内存中并将其存储在某种庞大的数组中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-27T18:26:47.830

首先想到的是：将其存储在内存中对于处理目的是绝对合理的。假设您为每个答案保留一个字节，您有 100 万个响应和 200 个问题，那么您有一个 200 MB 的数组。即使使用 32 位操作系统，现代桌面上的内存也不小，但绝对不会耗尽内存。

至于数据库，我认为您应该有三个表。一个用于带有人口统计数据的受访者，一个用于问题，并且由于这些表之间存在：m 关系，因此第三个带有响应者 ID、问题 ID 和答案代码。

如果您不需要问题的其他数据（例如问题文本或其他内容），您甚至可以优化问题表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T19:14:36.000

在内存中使用数组数组。我刚刚创建了一个 500000x200 阵列，它需要大约 500MB 的 RAM。在 2GB 的机器上很容易管理，而且比使用 SQL 快很多很多数量级。

就个人而言，我根本不会费心将数据放入 MySQL。只需将其编组进出，和/或使用 JSON 或 CSV。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-27T19:46:58.450

如果您确实需要数据库存储，并且其他地方有关替代方案的评论值得考虑，那么我建议您不要在 200 多行中存储 200 多条响应：您似乎对这样的灵活性没有任何明显的需求设计将给予数十万受访者的性能，这将是可怕的。

使用 RDBMS 使您能够存储大量数据，以各种多维方式访问它们，并随着时间的推移扩展数据的结构。但是，与平面文件（或编组或其他）选项相比，您获得的灵活性通常会在性能上有所损失。我不得不承认我自己太早达到了第三范式。我想问题是，您预计查询需要多大的灵活性，以及​​您认为您的数据可能会发生多少变化？如果您认为自己处于两者的低端，请考虑将 SQL 搁置。如果您将数据访问抽象到一个单独的层中，那么以后更改应该很便宜。只是一个想法...

我希望您可以对个人的响应进行编码，使其可以轻松地在代码中使用，并且不太可能占用超过 200 个字符，如果您使用某种打包或位映射，则更少。我更喜欢位图的想法，想一想 - 它使用汉明距离之类的东西进行简单的比较绝对是轻而易举的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T19:44:51.980

我不是一个伟大的数据库人，所以我只会回答＃2：

如果您真的想节省内存（或预见到会有更多数据的情况），您可以两全其美：使用 ruby​​ 作为数据挖掘工具。让它从数据库中提取一些数据，然后将结果写回数据库（可能完全在不同的表或数据库下）。这样做的好处是只使用您想要的内存。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-03T07:23:21.527

不要忘记 Ruby 是一种动态对象语言，因此，一个简单的整数可能会比 C 中的一个简单的 int 占用更多的空间。它需要额外的空间来表征它是否被任何额外的“装饰”信息、方法等

# sql - 如何格式化 Oracle SQL 纯文本选择输出

> ID：144167
> 
> 赞同：5
> 
> 时间：2008-09-27T18:07:54.350
> 
> 标签：sql, oracle, formatting

我正在使用 Oracle SQL（在 SQLDeveloper 中，因此我无法访问 SQLPLUS 命令，例如 COLUMN）来执行如下所示的查询：

```
select assigner_staff_id as staff_id, active_flag, assign_date,
  complete_date, mod_date
from work where assigner_staff_id = '2096'; 
```

它给我的结果看起来像这样：

```
STAFF_ID ACTIVE_FLAG ASSIGN_DATE COMPLETE_DATE MOD_DATE                  
---------------------- ------------ ----- -------- ------------------------- ----- --------
2096 F 25-SEP-08 27-SEP-08 27-SEP-08 02.27.30.642959000 下午
2096 F 25-SEP-08 25-SEP-08 25-SEP-08 01.41.02.517321000 上午

已选择 2 行

```

当我尝试将结果作为格式良好的快速-n-脏文本块粘贴到电子邮件或问题报告等中时，这可以很容易地生成一个非常宽泛且笨拙的文本报告。什么是最好的摆脱当我只使用普通的 Oracle SQL 时，输出列中的所有额外空白是多少？到目前为止，我所有的网络搜索都没有出现太多，因为所有的网络搜索结果都在向我展示如何使用 SQLPLUS 中的 COLUMN 等格式化命令（我没有）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T20:44:00.820

在您的声明中，您可以指定要查找的输出类型：

```
select /*csv*/ col1, col2 from table;
select /*Delimited*/ col1, col2 from table; 
```

还有其他可用的格式，例如 xml、html、text、loader 等。

您可以在工具 > 首选项 > 数据库 > 实用程序 > 导出下更改这些特定选项的格式

请务必选择运行脚本而不是运行语句。

* 这是针对 Oracle SQL Developer v3.2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T18:22:56.327

你用什么来得到结果？您粘贴的输出看起来像是来自 SQL*PLUS。可能是您用来生成结果的任何工具都有一些修改输出的方法。

默认情况下，Oracle 根据标题的宽度或列数据的宽度（哪个更宽）输出列。

如果您想让列更小，您需要重命名它们或将它们转换为文本并使用 substr() 使默认值更小。

```
select substr(assigner_staff_id, 8) as staff_id, 
      active_flag as Flag, 
      to_char(assign_date, 'DD/MM/YY'),
      to_char(complete_date, 'DD/MM/YY'), 
      mod_date
from work where assigner_staff_id = '2096'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T18:33:48.780

您可以使用 sql 做什么受您的工具的限制。SQL Plus 具有格式化列的命令，但它们并不易于使用。

一种快速的方法是将输出粘贴到 excel 中并在那里格式化，或者只是附加电子表格。一些工具会将输出直接保存为电子表格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T18:26:18.643

好问题。我真的不得不考虑一下。

您可以做的一件事是更改您的 SQL，以便它只返回最窄的可用列。

例如（我对 oracle 语法不是很感兴趣，但类似的东西应该可以工作）：

```
select substring( convert(varchar(4), assigner_staff_id), 1, 4 ) as id, 
       active_flag as act, -- use shorter column name

       -- etc. 

from work where assigner_staff_id = '2096'; 
```

那有意义吗？
如果您在 unix/linux 上执行此操作，我建议您从命令行运行它并通过 awk 脚本对其进行管道传输。

如果我错过了理解，那么请更新您的问题，我会再试一次:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T02:42:04.037

如果您没有返回很多行，我会经常使用[Tom Kytes print_table](http://asktom.oracle.com/pls/asktom/f?p=100:11:2264752026530068::::P11_QUESTION_ID:1035431863958)函数。

```
SQL> set serveroutput on 
SQL> execute print_table('select * from all_objects where rownum < 3');
OWNER                         : SYS
OBJECT_NAME                   : /1005bd30_LnkdConstant
SUBOBJECT_NAME                :
OBJECT_ID                     : 27574
DATA_OBJECT_ID                :
OBJECT_TYPE                   : JAVA CLASS
CREATED                       : 22-may-2008 11:41:13
LAST_DDL_TIME                 : 22-may-2008 11:41:13
TIMESTAMP                     : 2008-05-22:11:41:13
STATUS                        : VALID
TEMPORARY                     : N
GENERATED                     : N
SECONDARY                     : N
-----------------
OWNER                         : SYS
OBJECT_NAME                   : /10076b23_OraCustomDatumClosur
SUBOBJECT_NAME                :
OBJECT_ID                     : 22390
DATA_OBJECT_ID                :
OBJECT_TYPE                   : JAVA CLASS
CREATED                       : 22-may-2008 11:38:34
LAST_DDL_TIME                 : 22-may-2008 11:38:34
TIMESTAMP                     : 2008-05-22:11:38:34
STATUS                        : VALID
TEMPORARY                     : N
GENERATED                     : N
SECONDARY                     : N
-----------------

PL/SQL procedure successfully completed.

SQL> 
```

如果它有很多行，我将在 SQL Developer 中进行查询并保存为 xls，商务类型出于某种原因喜欢 excel。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-20T14:43:52.113

为什么不直接使用“cast”功能呢？

```
select 
(cast(assigner_staff_id as VARCHAR2(4)) AS STAFF_ID,
(cast(active_flag as VARCHAR2(1))) AS A,
(cast(assign_date as VARCHAR2(10))) AS ASSIGN_DATE,
(cast(COMPLETE_date as VARCHAR2(10))) AS COMPLETE_DATE,
(cast(mod_date as VARCHAR2(10))) AS MOD_DATE
from work where assigner_staff_id = '2096'; 
```

# oracle - 用户权限

> ID：144175
> 
> 赞同：1
> 
> 时间：2008-09-27T18:12:58.067
> 
> 标签：oracle, privileges

为什么用户需要对自己的架构具有特权才能创建包和触发器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T07:30:11.050

您是否在问为什么用户需要特定的权限（即 CREATE TABLE、CREATE PROCEDURE 等）才能在他们自己的模式中创建特定类型的对象？

如果是这样，自然的答案是良好的安全性始于最小权限原则——也就是说，用户应该只拥有他们真正需要的权限来完成他们的工作，而不是更多。DBA 经常希望为生产数据库中的用户创建只读帐户（例如，业务分析师经常需要执行不同类型的临时报告，开发人员可能需要访问以解决某些类型的问题等）。如果用户总是能够在他们自己的模式中创建对象，那么那些只读用户将突然能够将代码部署到生产数据库，而无需进行更改控制，甚至不必进行任何测试。这通常会导致代码的扩散基本上做同样的事情（即

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-27T18:50:32.890

我不能给你“官方”的答案，但我可以尝试一下它是如何工作的。在我从事的项目中，Oracle 开发人员负责将触发器和包部署到数据库模式中。但是我们还有其他的 Java 开发人员和测试人员等团队。一旦架构迁移到测试环境，然后是生产环境，我们不希望测试人员或最终用户应用程序能够任意修改与相关联的触发器和包该模式，因为这可能会使他们正在进行的任何测试的完整性无效（或在生产系统上导致更严重的问题）。

因此，在测试/生产环境中，您希望测试人员、Java 开发人员和最终用户应用程序能够在模式中读取和写入数据，但不修改包含基线代码的触发器和包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T10:02:56.130

> 为什么用户需要对他自己的模式的权限来创建包和触发器他们不需要。

他们自己的架构意味着由 username.object 定义的所有权（或命名空间） 用户在自己的架构中创建触发器所需的所有内容是： 在他们自己的架构中的表 创建触发器权限

用户在自己的模式中创建包所需的只是：创建包权限

如果用户想要在另一个模式中创建对象或引用其他对象，或者需要存储在表空间中，那么他们将需要对这些外部对象的权限。

# c# - 将可能以空结尾的 ascii 字节 [] 转换为字符串的最快方法？

> ID：144176
> 
> 赞同：23
> 
> 时间：2008-09-27T18:13:37.627
> 
> 标签：c#, .net, string, ascii

我需要将（可能）以空结尾的 ascii 字节数组转换为 C# 中的字符串，我发现最快的方法是使用下面显示的 UnsafeAsciiBytesToString 方法。此方法使用 String.String(sbyte*) 构造函数，该构造函数在其备注中包含警告：

"假定 value 参数指向一个数组，该数组表示使用默认 ANSI 代码页（即 Encoding.Default 指定的编码方法）编码的字符串。

注意：*** 因为默认的 ANSI 代码页是系统相关的，所以此构造函数从相同的有符号字节数组创建的字符串在不同的系统上可能会有所不同。*** ...

*** 如果指定的数组不是以 null 结尾的，则此构造函数的行为取决于系统。例如，这种情况可能会导致访问冲突。*** "

现在，我很肯定字符串的编码方式永远不会改变......但我的应用程序运行的系统上的默认代码页可能会改变。那么，有什么理由我不应该为此目的使用 String.String(sbyte*) 尖叫吗？

```
using System;
using System.Text;

namespace FastAsciiBytesToString
{
    static class StringEx
    {
        public static string AsciiBytesToString(this byte[] buffer, int offset, int maxLength)
        {
            int maxIndex = offset + maxLength;

            for( int i = offset; i < maxIndex; i++ )
            {
                /// Skip non-nulls.
                if( buffer[i] != 0 ) continue;
                /// First null we find, return the string.
                return Encoding.ASCII.GetString(buffer, offset, i - offset);
            }
            /// Terminating null not found. Convert the entire section from offset to maxLength.
            return Encoding.ASCII.GetString(buffer, offset, maxLength);
        }

        public static string UnsafeAsciiBytesToString(this byte[] buffer, int offset)
        {
            string result = null;

            unsafe
            {
                fixed( byte* pAscii = &buffer[offset] )
                { 
                    result = new String((sbyte*)pAscii);
                }
            }

            return result;
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            byte[] asciiBytes = new byte[]{ 0, 0, 0, (byte)'a', (byte)'b', (byte)'c', 0, 0, 0 };

            string result = asciiBytes.AsciiBytesToString(3, 6);

            Console.WriteLine("AsciiBytesToString Result: \"{0}\"", result);

            result = asciiBytes.UnsafeAsciiBytesToString(3);

            Console.WriteLine("UnsafeAsciiBytesToString Result: \"{0}\"", result);

            /// Non-null terminated test.
            asciiBytes = new byte[]{ 0, 0, 0, (byte)'a', (byte)'b', (byte)'c' };

            result = asciiBytes.UnsafeAsciiBytesToString(3);

            Console.WriteLine("UnsafeAsciiBytesToString Result: \"{0}\"", result);

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-27T16:17:52.303

Oneliner（假设缓冲区实际上包含一个格式良好的空终止字符串）：

```
String MyString = Encoding.ASCII.GetString(MyByteBuffer).TrimEnd((Char)0); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2008-09-27T18:23:43.047

有什么理由不使用`String(sbyte*, int, int)`构造函数？如果你已经确定了你需要缓冲区的哪一部分，剩下的应该很简单：

```
public static string UnsafeAsciiBytesToString(byte[] buffer, int offset, int length)
{
    unsafe
    {
       fixed (byte* pAscii = buffer)
       { 
           return new String((sbyte*)pAscii, offset, length);
       }
    }
} 
```

如果你需要先看：

```
public static string UnsafeAsciiBytesToString(byte[] buffer, int offset)
{
    int end = offset;
    while (end < buffer.Length && buffer[end] != 0)
    {
        end++;
    }
    unsafe
    {
       fixed (byte* pAscii = buffer)
       { 
           return new String((sbyte*)pAscii, offset, end - offset);
       }
    }
} 
```

如果这确实是一个 ASCII 字符串（即所有字节都小于 128），那么代码页问题应该不是问题，除非您有一个*特别*奇怪的不基于 ASCII 的默认代码页。

出于兴趣，您是否真的分析过您的应用程序以确保这确实是瓶颈？您是否确实需要绝对最快的转换，而不是更具可读性的转换（例如，使用 Encoding.GetString 进行适当的编码）？

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-12-02T19:18:24.103

我不确定速度，但我发现在编码之前使用 LINQ 删除空值是最简单的：

```
string s = myEncoding.GetString(bytes.TakeWhile(b => !b.Equals(0)).ToArray()); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2011-11-23T21:00:23.520

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestProject1
{
    class Class1
    {
    static public string cstr_to_string( byte[] data, int code_page)
    {
        Encoding Enc = Encoding.GetEncoding(code_page);  
        int inx = Array.FindIndex(data, 0, (x) => x == 0);//search for 0
        if (inx >= 0)
          return (Enc.GetString(data, 0, inx));
        else 
          return (Enc.GetString(data)); 
    }

    }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-25T14:09:37.353

```
s = s.Substring(0, s.IndexOf((char) 0)); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-27T18:25:42.637

一种可以考虑的可能性：检查默认代码页是否可接受，并使用该信息在运行时选择转换机制。

这也可以考虑字符串是否实际上是空终止的，但是一旦你这样做了，当然，速度就会消失。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-09-17T13:55:48.410

为了完整起见，您还可以使用 .NET 框架的内置方法来执行此操作：

```
var handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
try
{
    return Marshal.PtrToStringAnsi(handle.AddrOfPinnedObject());
}
finally
{
    handle.Free();
} 
```

好处：

*   它不需要不安全的代码（即，您也可以将此方法用于 VB.NET）和
*   如果您改用它，它也适用于“宽”（UTF-16）字符串`Marshal.PtrToStringUni`。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-07-11T08:27:26.940

使用 .NET 类 System.Text.Encoding 将 byte[] 对象转换为包含其 ASCII 等效项的字符串的一种简单/安全/快速的方法，反之亦然。该类有一个返回 ASCII 编码器的静态函数：

从字符串到字节[]：

```
string s = "Hello World!"
byte[] b = System.Text.Encoding.ASCII.GetBytes(s); 
```

从字节 [] 到字符串：

```
byte[] byteArray = new byte[] {0x41, 0x42, 0x09, 0x00, 0x255};
string s = System.Text.Encoding.ASCII.GetString(byteArray); 
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2010-03-17T22:03:23.350

这有点难看，但您不必使用不安全的代码：

```
string result = "";
for (int i = 0; i < data.Length && data[i] != 0; i++)
   result += (char)data[i]; 
```

# apache-flex - AS3/PureMVC 最佳实践？架构良好的项目的最佳代码示例？

> ID：144193
> 
> 赞同：1
> 
> 时间：2008-09-27T18:25:33.777
> 
> 标签：apache-flex, flash, actionscript-3, puremvc

我是一名学习 PureMVC 的 AS3 新手，我想按照最佳实践编写代码，以便任何其他 AS3 开发人员都可以拿起我的代码并轻松理解我所做的事情，我很想像在 JavaScript 或 Asp.Net/C# 中那样做一些事情，但我有一种感觉，这可能不是最好的方法。

想法？链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T04:46:18.760

1.  在我看到的 Flex 代码中，使用反向域文件夹结构很常见。即：com/mydomain/myproject/view ...模型、业务、控制器（这将使我更容易理解您的代码）更多：[http ://blog.tsclausing.com/post/11](http://blog.tsclausing.com/post/11)

2.  ASDoc 是一个从代码注释自动创建非常漂亮的 HTML 文档的工具：http: //livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Book_Parts&file= [asdoc_127_1.html](http://livedocs.adobe.com/flex/201/html/wwhelp/wwhimpl/common/html/wwhelp.htm?context=LiveDocs_Book_Parts&file=asdoc_127_1.html)

3.  您可能超出了这一点，但我使用了 Cairngorm (MVC)，并且有据可查： http: [//opensource.adobe.com/wiki/display/cairngorm/Cairngorm](http://opensource.adobe.com/wiki/display/cairngorm/Cairngorm)

**代码示例** 这是 Cairngorm 商店，它是标准 Cairngorm 示例： [http ://cairngormdocs.org/blog/?p=17](http://cairngormdocs.org/blog/?p=17)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T00:06:50.587

我发现通读文档有助于我对[PureMVC](http://puremvc.org/)的每个部分都有一个清晰的定义。最重要的是，我下载了演示的源代码并将它们添加到 Flex Builder 中，这样我就可以轻松地查看它们并了解它们是如何构建的，从而了解我应该如何构建我的项目。

您必须记住的一件事是，您可以以任何方式做事，但要使使用该框架有价值，您应该坚持它所建议的结构和做事方式。例如，您可以为您的视图提供对外观的引用，并让它从代理等获取信息。但是您应该保持视图与框架分离，并让它调度事件并让 Mediator 处理外观。

# java - 如何部署 ADF 业务组件？

> ID：144200
> 
> 赞同：3
> 
> 时间：2008-09-27T18:28:17.407
> 
> 标签：java, oracle, jakarta-ee, oracle-adf

如何将 ADF 业务组件部署到中间层并使用[RMI](http://en.wikipedia.org/wiki/Java_remote_method_invocation)调用它？

我只是找不到任何好的文档！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-01-02T19:43:39.337

选择 ADF BC 应用程序模块并使用您的右键创建业务组件部署并选择[EJB](http://en.wikipedia.org/wiki/Enterprise_JavaBean)会话 bean。这将创建您可以部署的不同[EAR文件。](https://en.wikipedia.org/wiki/EAR_%28file_format%29)就这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-29T19:55:01.533

我猜你的意思是这样的：

*   *[如何安装 ADF 10 运行时并将 ADF BC 应用程序部署到在 Linux 上运行的 Oracle WebLogic 103](http://blog.fekw.de/2008/08/23/howto-install-adf-10-runtime-and-deploy-adf-bc-app-to-oracle-weblogic-103-running-on-linux/)*
*   *[Oracle 应用程序开发框架 - 开发指南 (10g)](http://docushare.sf.adfg.state.ak.us/docushare/dsweb/Get/Document-16186/Oracle+Application+Development+Framework+-+Development+Guidelines+%2810g%29.pdf)*（PDF 格式）。

# python - 有没有人为 vim 找到了一套好的 python 插件——特别是模块完成？

> ID：144201
> 
> 赞同：22
> 
> 时间：2008-09-27T18:28:42.507
> 
> 标签：python, vim, code-completion

我正在寻找一套可以帮助我最终全职切换到 vim 的插件。

现在我使用 Komodo 取得了一些成功，但是他们的 vim 绑定有足够的小错误，我已经厌倦了。

不过，我在 Komodo 中最喜欢的是代码完成。所以，这就是我正在寻找的（按重要性排序）。

*   代码完成，含义：编写完整模块/功能/等的能力。在pythonpath 上的*任何模块中，***而不仅仅是系统模块**。完成时显示文档字符串的奖励积分。
*   跳转到类定义。我猜 CTAGS 会这样做，那么你们是如何管理自动更新标签文件的呢？
*   用于管理缓冲区的项目类型管理：理想情况下，能够使用 grep 查找目录结构中的文件名以打开它。在缓冲区打开时显示类定义索引的奖励。
*   Bzr 集成。不是很重要，因为其中大部分我都可以直接放到 shell 中去做。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2008-09-27T18:42:39.540

[在这里您可以找到](http://www.sontek.net/python-with-a-modular-ide-vim)有关此的一些信息。

它涵盖了代码完成，在打开的文件中有一个类和函数的列表。我没有时间为 vim 做一个完整的配置，因为我主要不使用 Python，但我对在更好的 Python IDE 中转换 vim 有同样的兴趣。

**编辑：**原始站点已关闭，因此发现它[保存在网络存档](https://web.archive.org/web/20110106042207/http://sontek.net/python-with-a-modular-ide-vim)中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2011-10-15T19:09:27.237

我写了另一个插件：[https ://github.com/klen/python-mode](https://github.com/klen/python-mode)

旧（现在更强大）截屏在这里：[https ://www.youtube.com/watch?v=67OZNp9Z0CQ](https://www.youtube.com/watch?v=67OZNp9Z0CQ)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-06-24T21:12:36.003

老问题，但我把所有这些都输入了一个误读的问题......

**一般插件推荐**：[LookupFile](http://www.vim.org/scripts/script.php?script_id=1581)和一个用于源代码控制系统的插件（我喜欢[Git](http://git-scm.com/)和[Git-Vim](http://github.com/motemen/git-vim)）。

**Python 插件建议**：如果您使用的是 Linux，我会推荐 ipython 和[ipy.py](http://ipython.scipy.org/moin/Cookbook/IPythonGVim)（更好的交互式解释器）。[改进的语法高亮](http://www.vim.org/scripts/script.php?script_id=790)、[片段](http://www.vim.org/scripts/script.php?script_id=1318)、[pydoc](http://www.vim.org/scripts/script.php?script_id=910)和用于重构的支持[bikerepairman](http://bicyclerepair.sourceforge.net/)。我开始使用[这篇文章](http://www.sontek.net/post/Python-with-a-modular-IDE-(Vim).aspx)。

您可能想尝试查看某人的 vim 文件。[我的在 github 上](http://github.com/pydave/daveconfig/tree/master/multi/vim/)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-27T22:38:49.923

重构：[ropevim](http://rope.sourceforge.net/ropevim.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-27T19:29:39.490

如果您有兴趣，这里有一些关于 Bazaar 集成的信息：

[https://launchpad.net/bzr-vim-commands](https://launchpad.net/bzr-vim-commands)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-29T19:55:24.543

我经常使用[pydoc.vim](http://www.vim.org/scripts/script.php?script_id=910)（实际上是我写的），试试看，告诉我你的想法。我认为非常有用的另一个是更新的语法文件，其中包含您可以启用的所有扩展名，您可以在[此处](http://www.vim.org/scripts/script.php?script_id=790)找到。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-07-18T23:24:25.040

我使用 Pydiction ( [http://www.vim.org/scripts/script.php?script_id=850](http://www.vim.org/scripts/script.php?script_id=850) )，它是 vim 的一个插件，可以让你 Tab-complete python 模块/方法/属性/关键字，包括像 Pygame 这样的 3rd 方的东西、wxPython、Twisted 以及几乎所有内容。它比我尝试过的其他方法更准确，甚至不需要将 python 支持编译到你的 Vim 中。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-29T18:04:00.240

**代码完成：** [PySmell](http://github.com/orestis/pysmell/tree/master)看起来很有希望。它正在进行中，但已经很有用了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-13T13:02:44.380

我个人认为[Jedi Vim](https://github.com/davidhalter/jedi-vim)是最好的，但它与 python-mode 不兼容。

# mysql - 如何确定整个 MySQL DB 都加载到内存中？

> ID：144210
> 
> 赞同：1
> 
> 时间：2008-09-27T18:40:31.370
> 
> 标签：mysql, innodb

我正在运行一个mysql服务器。我想以某种方式确保将整个数据库加载到内存中，因为我听说它会快很多。

这是真的？以及如何验证它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-27T19:21:42.473

如果您使用的是 InnoDB，那么您可以将 innodb_buffer_pool_size 设置为至少与您的数据和索引一样大。然后当您访问数据时，它将被缓存到内存中，所有后续访问都将通过内存进行。

如果你想预先缓存数据，你可以做一些常见的查询，或者全表/索引扫描来强制它把所有的数据加载到内存中。

mysqld 有一个 init-file 选项，它可以让服务器在启动时自动执行一些命令，您可以在其中包含要执行的预缓存查询。

请记住，您不想耗尽内存，因此请小心将 innodb_buffer_pool_size 设置得太大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T18:53:02.480

好吧，一种选择是使用 ramdrive.. 虽然它不是永久性的。

[http://www.linuxforums.org/forum/misc/670-how-create-ram-drive-linux.html](http://www.linuxforums.org/forum/misc/670-how-create-ram-drive-linux.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-29T16:02:56.833

（只是为了完整性，）您可以使用[HEAP](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)作为表引擎。但请记住，当您重新启动服务器时，您放入 HEAP 表中的任何数据都会消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-21T18:59:35.023

RAM 中的表非常快。

您可以通过更改其存储引擎来更改现有表。但是，如果您想在服务器重新启动后使用数据，请进行备份。

ALTER TABLE 测试引擎 = 内存；

请记住，MEMORY 表不能包含 BLOB 或 TEXT 列，并且数据和索引大小受限于可用内存。

# python - 十进制模块中的有效数字

> ID：144218
> 
> 赞同：5
> 
> 时间：2008-09-27T18:47:54.020
> 
> 标签：python, floating-point, decimal, physics, significance

所以我决定尝试通过编写一些python脚本来解决我的物理作业来为我解决问题。我遇到的一个问题是重要的数字似乎并不总是正确地出现。例如，这可以正确处理有效数字：

```
from decimal import Decimal
>>> Decimal('1.0') + Decimal('2.0')
Decimal("3.0") 
```

但这不会：

```
>>> Decimal('1.00') / Decimal('3.00')
Decimal("0.3333333333333333333333333333") 
```

所以两个问题：

1.  我是对的，这不是预期的有效数字数量，还是我需要复习有效数字数学？
2.  有什么方法可以做到这一点而不必手动设置小数精度？当然，我确信我可以使用 numpy 来做到这一点，但我只是想知道是否有一种方法可以使用 decimal 模块来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-27T22:00:35.570

将十进制工作精度更改为 2 位数字*不是*一个好主意，除非您绝对只执行一次操作。

您应该始终以高于显着性水平的精度执行计算，并且只对最终结果进行四舍五入。如果您执行长序列计算并在每一步四舍五入到有效位数，则会累积错误。十进制模块不知道任何特定操作是长序列中的一个还是最终结果，因此它假定它不应该超过必要的舍入。理想情况下，它将使用无限精度，但这太昂贵了，因此 Python 开发人员选择了 28 位。

一旦你得到最终结果，你可能想要的是量化：

```
>>> (Decimal('1.00') / Decimal('3.00')).quantize(Decimal("0.001"))
十进制（“0.333”）

```

您必须手动跟踪重要性。如果要自动进行重要性跟踪，则应使用区间算术。有一些可用于 Python 的库，包括[pyinterval](http://pyinterval.googlecode.com/)和[mpmath](http://code.google.com/p/mpmath/)（支持任意精度）。使用十进制库实现区间算术也很简单，因为它支持定向舍入。

您可能还想阅读[十进制算术常见问题解答：十进制算术是“显着性”算术吗？](http://speleotrove.com/decimal/decifaq4.html#signif)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T18:58:37.927

小数不会像那样丢掉小数位。如果您真的想将精度限制为 2 dp，请尝试

```
decimal.getcontext().prec=2 
```

编辑：您也可以在每次乘法或除法时调用 quantize() （加法和减法将保留 2 dps）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-05T19:23:02.433

只是出于好奇......是否有必要使用十进制模块？当您准备好查看浮点数时，为什么不使用有效数字四舍五入呢？或者您是否尝试跟踪计算的重要数字（例如，当您必须对结果进行误差分析时，将计算误差作为计算中不确定性的函数来计算）？如果您想要一个从数字左侧而不是右侧四舍五入的舍入函数，请尝试：

```
def lround(x,leadingDigits=0): 
    """Return x either as 'print' would show it (the default) 
    or rounded to the specified digit as counted from the leftmost 
    non-zero digit of the number, e.g. lround(0.00326,2) --> 0.0033
    """ 
    assert leadingDigits>=0 
    if leadingDigits==0: 
            return float(str(x)) #just give it back like 'print' would give it
    return float('%.*e' % (int(leadingDigits),x)) #give it back as rounded by the %e format 
```

当您打印它们或将它们转换为字符串时，这些数字看起来是正确的，但如果您在提示符下工作并且没有明确打印它们，它们可能看起来有点奇怪：

```
>>> lround(1./3.,2),str(lround(1./3.,2)),str(lround(1./3.,4))
(0.33000000000000002, '0.33', '0.3333') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T18:53:49.730

小数默认为 28 位精度。
限制它返回的位数的唯一方法是改变精度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T19:17:57.037

浮点数有什么问题？

```
>>> "%8.2e"%  ( 1.0/3.0 )
'3.33e-01' 
```

它专为有效数字数量有限的科学式计算而设计。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2008-09-27T19:11:46.817

如果我理解 Decimal 正确，“精度”是*十进制表示法*中小数点后的位数。

你似乎想要别的东西：有效数字的数量。*这比科学计数法*小数点后的位数多一。

我有兴趣了解一个执行有效数字感知浮点计算的 Python 模块。

# css - CSS ems 总是代表字体大小吗？

> ID：144226
> 
> 赞同：4
> 
> 时间：2008-09-27T18:54:57.153
> 
> 标签：css, font-size

据我所知，CSS 中的 em 关键字表示字体的当前大小。

所以如果你放 1.2 em，就意味着 120% 的字体高度。

尽管 em 像 YUI 网格一样用于设置 div 的宽度等，但这似乎并不正确：

```
margin-right:24.0769em;*margin-right:23.62em; 
```

每次我读到它们时，我都会忘记它真正代表什么。

我希望有人可以向我解释它，所以它会留在我的脑海里。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-27T19:03:20.473

从历史上看，它是字体中“M”的宽度。由此得名！在 CSS2.1 中，它被[定义](http://www.w3.org/TR/CSS21/syndata.html#em-width)为与 font-size 相同。

在许多情况下，使用 em 而不是点或像素似乎更自然，因为它与字体大小有关。例如，您可以定义一个宽度为 40em 的文本列。如果您稍后决定更改字体大小，该列仍将保持每行相同数量的字母。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-27T19:02:16.310

传统上，em 是大写字母 M 的宽度。但实际上，em 是字体的磅值。

[破折号与破折号](http://comm415.wordpress.com/2008/04/04/em-dash-versus-en-dash/)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-27T18:59:32.870

它确实意味着字体的大小，但将其用于宽度/高度对于创建随字体大小缩放的设计很有用。现在大多数浏览器都可以进行整页缩放，这变得不那么有用了。在他们只能更改文本大小之前，使用 em 作为宽度/高度也可以让这些元素缩放。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T19:23:50.143

一个 em 大小与其包含的元素成正比。

例如：

```
<!-- Browser default size (usually 16px) -->
<div style="font-size: 1.00em;">
    <!-- 150 % of the container's size: 16 + (16/2) = 24 -->
    <div style="font-size: 1.50em;"> 
```

[这个编辑器](http://riddle.pl/emcalc/)让我记住了它（关于它是如何工作的）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T19:02:01.177

他们正在重新计算精确的像素值以`em`使其具有可扩展性。

例如，请参阅此[在线计算器](http://riddle.pl/emcalc/)。

# c# - C# / F# 性能比较

> ID：144227
> 
> 赞同：61
> 
> 时间：2008-09-27T18:55:26.327
> 
> 标签：c#, .net, f#, performance

网络上有没有可用的 C#/F# 性能比较来显示新 F# 语言的正确使用？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2010-01-02T22:01:34.847

自然的 F# 代码（例如函数式/不可变的）比自然的（命令式/可变的面向对象的）C# 代码慢。但是，这种 F# 比通常的 C# 代码要短得多。显然，有一个权衡。

另一方面，在大多数情况下，您可以使 F# 代码的性能与 C# 代码的性能相同。这通常需要以命令式或可变的面向对象风格进行编码，分析并消除瓶颈。您使用在 C# 中使用的相同工具：例如 .Net 反射器和分析器。

话虽如此，了解 F# 中一些会降低性能的高生产力结构是值得的。根据我的经验，我见过以下案例：

*   引用（相对于类实例变量），仅在执行数十亿次的代码中

*   F# 比较 (<=) 与 System.Collections.Generic.Comparer，例如在二进制搜索或排序中

*   尾调用——仅在编译器或 .Net 运行时无法优化的某些情况下。如评论中所述，取决于 .Net 运行时。

*   F# 序列比 LINQ 慢两倍。这是由于引用和使用 F# 库中的函数来实现 seq<_> 的翻译。这很容易解决，因为您可以将 Seq 模块替换为使用 Linq、PLinq 或 DryadLinq 的具有相同签名的模块。

*   Tuples，F# tuple 是一个在堆上排序的类。在某些情况下，例如 int*int 元组，使用结构可能需要付费。

*   分配，值得记住的是，闭包是一个类，使用 new 运算符创建，它记住访问的变量。可能值得“提升”闭包，或者将其替换为显式将访问的变量作为参数的函数。

*   尝试使用内联来提高性能，尤其是对于通用代码。

我的经验是先用 F# 编写代码，然后只优化重要的部分。在某些情况下，用 C# 编写慢速函数可能比尝试调整 F# 更容易。但是，从程序员效率的角度来看，在 F# 中启动/原型然后分析、反汇编和优化是有意义的。

底线是，由于程序设计决策，您的 F# 代码最终可能比 C# 慢，但最终可以获得效率。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2008-09-27T18:56:05.187

请参阅我最近提出的这些问题：

*   [程序 F# 是否比 C# 更有效（执行方面）？](https://stackoverflow.com/questions/142985/is-a-program-f-any-more-efficient-execution-wise-than-c)
*   [如何在现实世界中使用函数式编程？](https://stackoverflow.com/questions/142948/how-can-i-use-functional-programming-in-the-real-world)
*   [未来 F# 是否有可能比其他 .Net 语言优化得更多？](https://stackoverflow.com/questions/143708/is-it-possible-that-f-will-be-optimized-more-than-other-net-languages-in-the-fu)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-29T07:04:06.660

以下是有关（或与之相关）该主题的一些链接：

*   [http://cs.hubfs.net/forums/thread/3207.aspx](http://cs.hubfs.net/forums/thread/3207.aspx)
*   [http://strangelights.com/blog/archive/2007/06/17/1588.aspx](http://strangelights.com/blog/archive/2007/06/17/1588.aspx)
*   [http://khigia.wordpress.com/2008/03/30/ocaml-vs-f-for-big-integer-surprising-performance-test/](http://khigia.wordpress.com/2008/03/30/ocaml-vs-f-for-big-integer-surprising-performance-test/)
*   [http://cs.hubfs.net/blogs/f_team/archive/2006/08/15/506.aspx](http://cs.hubfs.net/blogs/f_team/archive/2006/08/15/506.aspx)
*   [http://blogs.msdn.com/jomo_fisher/](http://blogs.msdn.com/jomo_fisher/)

我似乎从 Robert Pickering 的博客（或者是 Scott Hanselman？）上的另一篇文章中记得，最后，因为两者都位于同一个框架上，你*可以*从两者获得相同的性能，但有时你必须“扭曲” ' 语言的自然表达是这样做的。在我记得的示例中，他必须扭曲 F# 才能获得与 C# 相当的性能......

# ads - 广告支持的共享软件平台

> ID：144237
> 
> 赞同：4
> 
> 时间：2008-09-27T19:01:56.810
> 
> 标签：ads, shareware

伙计们，

我正在开发一些我想免费分发的富客户端软件。也就是说，我仍然想通过它赚钱，但我希望收入来自广告。

您知道适合客户端应用的广告平台吗？我希望广告完全不显眼（就像 Google AdSense 用于网站一样）。我讨厌有任何类型的弹出窗口或其他可怕的用户体验。我只想在插件的角落放一个小广告。

如果广告可以是上下文相关的，那就太好了（即，如果平台有一个 API 可以告诉它用户当前正在看什么 - 给出一些关键字 - 以显示最相关的广告）。

有什么想法/想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-30T18:30:11.480

确实，使用 Google Adsense 会违反 TOS，但您可以推出自己的广告引擎。例如，您可以创建一个亚马逊会员帐户，并在您的小广告空间中显示与关键字匹配的书籍。（任何点击这本书并购买的人都会为您赚取每笔销售收入）任何基于会员的（假设您的关键字适合这种事情）都可以。请与附属公司 TOS 核对，但因为他们倾向于支付销售费用，我认为这不是问题。

Eudora 在 90 年代后期做了类似的事情，微软现在也在用他们的“Live”产品做同样的事情。但我不知道有人在做内容交付方面......（那里有机会！）

不幸的是，其他广告软件程序的名声非常糟糕。（例如 Cydoor、Claria）

我的建议是创建一个能够投放广告的应用程序，以及一个从您的网站抓取可用广告的 xml 文件的基本轮询器。最初，您的 xml 文件可能只有“像这个应用程序？Donate'-ad，但是一旦你有很多用户并且看到你的应用程序被使用得相当多，那么就值得尝试在你的应用程序上出售广告空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T19:21:46.823

我从来没有发现过这样的事情。会有很多技术问题，并且客户端软件中的广告不是您经常看到的（我自己从未见过）。

您可以做的一件简单的事情（假设这是 Windows）是**在表单的某个位置放置一个 webad 大小的 Internet Explorer 控件**。您可以创建一个基本上只显示单个 Google 广告（或其他）的网页，并将 IE 控件指向该页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-30T08:27:05.173

歌剧尝试了这一点。他们不再这样做了。我怀疑它不是很有效。也就是说，如果你能做到这一点，那就太好了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-11-24T15:52:51.207

我希望做同样的事情。我的网站上有google adwords，收入还可以，但我想把它放到我的程序中。

# .net - 出错后不关闭数据库连接会有什么后果？

> ID：144246
> 
> 赞同：7
> 
> 时间：2008-09-27T19:04:37.723
> 
> 标签：.net, sql, sql-server, sql-server-2005, web-services

我有一个引起很多头痛的应用程序。它是一个通过 Web 服务连接到 SQL Server 2005 的 .NET 应用程序。该程序的网格由易于超时的长时间运行的存储过程填充。在超时并抛出 SqlException 的情况下，没有执行关闭连接的处理。

这种情况的实际后果是什么？我认为框架或 SQL Server 可能会以一种或另一种方式处理它，但我不确定。

**补充** 程序在早上总是运行良好，但使用一个小时左右后它基本上停止运行。问题不在于我不知道如何正确编码连接。我需要知道这些症状是否可能是由未关闭的连接引起的。更改生产代码是一件大事，我想知道这至少有可能成为问题。

**结论** 我设计这个失败发生在数百个同时连接上。我永远无法在应用程序环境中重现故障情况。将最佳实践答案标记为正确。谢谢大家。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-27T19:36:58.037

由于 SqlConnection 在处理时关闭，我通常使用这种语法

```
using (SqlConnection conn = new SqlConnection())
{
  // SqlCode here 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T19:05:37.427

有连接限制；如果您的应用程序经常崩溃并且没有自动关闭连接，则新的连接请求将被拒绝。

也就是说，如果连接没有关闭，它们会在一段时间后超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T19:33:24.050

如果应用程序在一个小时左右后停止工作，那肯定是由于连接未关闭/处理造成的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T19:38:03.307

这就是为什么在使用 ADO.Net 时“using”关键字如此重要的原因

```
 using ( SqlConnection conn = new SqlConnection() )
 {
     ...
 } 
```

这会强制使用 IDispose 接口对 ADO.Net 对象进行一种确定性垃圾收集。

大多数数据库代码为此使用大量嵌套的“使用”子句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T19:06:08.267

如果它经常发生，您可能会用完可用的连接，您应该在执行命令的任何地方使用 finally 来关闭连接。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-27T19:08:56.340

垃圾收集器最终会敲定你打开的连接对象，但是你不知道下次 GC 什么时候来。在那之前，如果您有大量流量或者它是一个共享的 sql 服务器，您的池中的连接可能会用完。

为什么不将它放在 try/catch 块的 finally 部分？

```
finally
{
   if (cn != null)
   {
      cn.Dispose();
      cn = null;
   }
} 
```

这显然应该在 Web 服务方法中完成。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-27T19:11:27.583

```
try
{
    sqlCommandObject.Execute(); // this line will throw a timeout exception
}
finally
{
    sqlConnectionObject.Close(); // this will execute no matter what happens
} 
```

# iphone - 如何获取iphone上图像上像素的RGB值

> ID：144250
> 
> 赞同：38
> 
> 时间：2008-09-27T19:07:48.370
> 
> 标签：iphone, cocoa-touch, image, bitmap

我正在编写一个 iPhone 应用程序，并且需要基本上实现与 Photoshop 中的“吸管”工具等效的东西，您可以在其中触摸图像上的一个点并捕获相关像素的 RGB 值以确定和匹配其颜色。获取 UIImage 是很容易的部分，但是有没有办法将 UIImage 数据转换为位图表示，我可以在其中提取给定像素的这些信息？一个工作代码示例将不胜感激，并注意我不关心 alpha 值。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2009-03-29T05:20:23.770

## 再详细一点...

我今天晚上早些时候发布了一个合并和一个小补充，对这个页面上所说的内容 - 可以在这篇文章的底部找到。但是，此时我正在编辑帖子，以发布我建议的内容（至少对于我的要求，包括修改像素数据）是一种更好的方法，因为它提供了可写数据（而据我了解，提供的方法由以前的帖子和这篇文章的底部提供了对数据的只读引用）。

方法一：可写像素信息

1.  我定义了常量

    ```
    #define RGBA        4
    #define RGBA_8_BIT  8 
    ```

2.  在我的 UIImage 子类中，我声明了实例变量：

    ```
    size_t bytesPerRow;
    size_t byteCount;
    size_t pixelCount;

    CGContextRef context;
    CGColorSpaceRef colorSpace;

    UInt8 *pixelByteData;
    // A pointer to an array of RGBA bytes in memory
    RPVW_RGBAPixel *pixelData; 
    ```

3.  像素结构（此版本中带有 alpha）

    ```
    typedef struct RGBAPixel {
        byte red;
        byte green;
        byte blue;
        byte alpha;
    } RGBAPixel; 
    ```

4.  位图函数（返回预先计算的 RGBA；将 RGB 除以 A 得到未修改的 RGB）：

    ```
    -(RGBAPixel*) bitmap {
        NSLog( @"Returning bitmap representation of UIImage." );
        // 8 bits each of red, green, blue, and alpha.
        [self setBytesPerRow:self.size.width * RGBA];
        [self setByteCount:bytesPerRow * self.size.height];
        [self setPixelCount:self.size.width * self.size.height];

        // Create RGB color space
        [self setColorSpace:CGColorSpaceCreateDeviceRGB()];

        if (!colorSpace)
        {
            NSLog(@"Error allocating color space.");
            return nil;
        }

        [self setPixelData:malloc(byteCount)];

        if (!pixelData)
        {
            NSLog(@"Error allocating bitmap memory. Releasing color space.");
            CGColorSpaceRelease(colorSpace);

            return nil;
        }

        // Create the bitmap context. 
        // Pre-multiplied RGBA, 8-bits per component. 
        // The source image format will be converted to the format specified here by CGBitmapContextCreate.
        [self setContext:CGBitmapContextCreate(
                                               (void*)pixelData,
                                               self.size.width,
                                               self.size.height,
                                               RGBA_8_BIT,
                                               bytesPerRow,
                                               colorSpace,
                                               kCGImageAlphaPremultipliedLast
                                               )];

        // Make sure we have our context
        if (!context)   {
            free(pixelData);
            NSLog(@"Context not created!");
        }

        // Draw the image to the bitmap context. 
        // The memory allocated for the context for rendering will then contain the raw image pixelData in the specified color space.
        CGRect rect = { { 0 , 0 }, { self.size.width, self.size.height } };

        CGContextDrawImage( context, rect, self.CGImage );

        // Now we can get a pointer to the image pixelData associated with the bitmap context.
        pixelData = (RGBAPixel*) CGBitmapContextGetData(context);

        return pixelData;
    } 
    ```

* * *

## 只读数据（以前的信息） - 方法 2：

* * *

第 1 步。我声明了一个字节类型：

```
 typedef unsigned char byte; 
```

步骤 2\. 我声明了一个对应于像素的结构：

```
 typedef struct RGBPixel{
    byte red;
    byte green;
    byte blue;  
    }   
RGBPixel; 
```

第 3 步。我将 UIImageView 子类化并声明（具有相应的合成属性）：

```
//  Reference to Quartz CGImage for receiver (self)  
CFDataRef bitmapData;   

//  Buffer holding raw pixel data copied from Quartz CGImage held in receiver (self)    
UInt8* pixelByteData;

//  A pointer to the first pixel element in an array    
RGBPixel* pixelData; 
```

步骤 4\. 子类代码我放入一个名为 bitmap 的方法（返回位图像素数据）：

```
//Get the bitmap data from the receiver's CGImage (see UIImage docs)  
[self setBitmapData: CGDataProviderCopyData(CGImageGetDataProvider([self CGImage]))];

//Create a buffer to store bitmap data (unitialized memory as long as the data)    
[self setPixelBitData:malloc(CFDataGetLength(bitmapData))];

//Copy image data into allocated buffer    
CFDataGetBytes(bitmapData,CFRangeMake(0,CFDataGetLength(bitmapData)),pixelByteData);

//Cast a pointer to the first element of pixelByteData    
//Essentially what we're doing is making a second pointer that divides the byteData's units differently - instead of dividing each unit as 1 byte we will divide each unit as 3 bytes (1 pixel).    
pixelData = (RGBPixel*) pixelByteData;

//Now you can access pixels by index: pixelData[ index ]    
NSLog(@"Pixel data one red (%i), green (%i), blue (%i).", pixelData[0].red, pixelData[0].green, pixelData[0].blue);

//You can determine the desired index by multiplying row * column.    
return pixelData; 
```

第 5 步。我做了一个访问器方法：

```
-(RGBPixel*)pixelDataForRow:(int)row column:(int)column{
    //Return a pointer to the pixel data
    return &pixelData[row * column];           
} 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-21T16:43:09.223

这是我对 UIImage 进行颜色采样的解决方案。

这种方法将请求的像素渲染到 1px 大的 RGBA 缓冲区中，并将结果颜色值作为 UIColor 对象返回。这比我见过的大多数其他方法快得多，并且只使用很少的内存。

这对于像颜色选择器这样的东西应该很有效，在任何给定时间，您通常只需要一个特定像素的值。

**uiimage+picker.h**

```
#import <UIKit/UIKit.h>

@interface UIImage (Picker)

- (UIColor *)colorAtPosition:(CGPoint)position;

@end 
```

**uiimage+picker.m**

```
#import "UIImage+Picker.h"

@implementation UIImage (Picker)

- (UIColor *)colorAtPosition:(CGPoint)position {

    CGRect sourceRect = CGRectMake(position.x, position.y, 1.f, 1.f);
    CGImageRef imageRef = CGImageCreateWithImageInRect(self.CGImage, sourceRect);

    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    unsigned char *buffer = malloc(4);
    CGBitmapInfo bitmapInfo = kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big;
    CGContextRef context = CGBitmapContextCreate(buffer, 1, 1, 8, 4, colorSpace, bitmapInfo);
    CGColorSpaceRelease(colorSpace);
    CGContextDrawImage(context, CGRectMake(0.f, 0.f, 1.f, 1.f), imageRef);
    CGImageRelease(imageRef);
    CGContextRelease(context);

    CGFloat r = buffer[0] / 255.f;
    CGFloat g = buffer[1] / 255.f;
    CGFloat b = buffer[2] / 255.f;
    CGFloat a = buffer[3] / 255.f;

    free(buffer);

    return [UIColor colorWithRed:r green:g blue:b alpha:a];
}

@end 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-28T01:12:55.763

您不能直接访问 UIImage 的位图数据。

您需要获取 UIImage 的 CGImage 表示。然后从位图的 CFData 表示中获取 CGImage 的数据提供程序。确保完成后释放 CFData。

```
CGImageRef cgImage = [image CGImage];
CGDataProviderRef provider = CGImageGetDataProvider(cgImage);
CFDataRef bitmapData = CGDataProviderCopyData(provider); 
```

您可能需要查看 CGImage 的位图信息以获取像素顺序、图像尺寸等。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-12-29T01:09:01.050

Lajos 的回答对我有用。要将像素数据作为字节数组获取，我这样做了：

`UInt8* data = CFDataGetBytePtr(bitmapData);`

更多信息：CFDataRef[文档](http://developer.apple.com/DOCUMENTATION/CoreFoundation/Reference/CFDataRef/Reference/reference.html#//apple_ref/c/func/CFDataGetBytePtr)。

另外，记得包括`CoreGraphics.framework`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-20T04:00:58.427

谢谢大家！将其中一些答案放在一起，我得到：

```
- (UIColor*)colorFromImage:(UIImage*)image sampledAtPoint:(CGPoint)p {
    CGImageRef cgImage = [image CGImage];
    CGDataProviderRef provider = CGImageGetDataProvider(cgImage);
    CFDataRef bitmapData = CGDataProviderCopyData(provider);
    const UInt8* data = CFDataGetBytePtr(bitmapData);
    size_t bytesPerRow = CGImageGetBytesPerRow(cgImage);
    size_t width = CGImageGetWidth(cgImage);
    size_t height = CGImageGetHeight(cgImage);
    int col = p.x*(width-1);
    int row = p.y*(height-1);
    const UInt8* pixel = data + row*bytesPerRow+col*4;
    UIColor* returnColor = [UIColor colorWithRed:pixel[0]/255\. green:pixel[1]/255\. blue:pixel[2]/255\. alpha:1.0];
    CFRelease(bitmapData);
    return returnColor;
} 
```

这只需要 x 和 y 的点范围 0.0-1.0。例子：

```
UIColor* sampledColor = [self colorFromImage:image
         sampledAtPoint:CGPointMake(p.x/imageView.frame.size.width,
                                    p.y/imageView.frame.size.height)]; 
```

这对我很有用。我做了几个假设，比如每像素位数和 RGBA 颜色空间，但这应该适用于大多数情况。

另一个注意事项 - 它对我来说既适用于模拟器又适用于设备 - 我过去曾遇到过问题，因为它在设备上运行时发生了 PNG 优化。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-10-01T21:37:36.997

为了在我的应用程序中做类似的事情，我创建了一个小的屏幕外 CGImageContext，然后将 UIImage 渲染到其中。这使我能够快速地一次提取多个像素。这意味着您可以将目标位图设置为易于解析的格式，并让 CoreGraphics 完成在颜色模型或位图格式之间转换的繁重工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-03-14T04:04:57.730

> 我不知道如何根据给定的 X、Y 坐标正确索引图像数据。有人知道吗？

pixelPosition = (x+(y*((imagewidth)*BytesPerPixel)));

//据我所知，音高不是这个设备的问题，可以为零……//（或从数学中提取）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-13T17:15:42.400

使用提供像素级访问（读/写）的[ANImageBitmapRep 。](https://github.com/unixpickle/ANImageBitmapRep)

# android - 开始使用安卓

> ID：144254
> 
> 赞同：47
> 
> 时间：2008-09-27T19:13:21.277
> 
> 标签：android

所以，我将在一个月左右的时间内拿到我的 T-Mobile G1，我很高兴能开始为它开发。

有人开始使用了吗？是否有开发 wiki 或为它设置的任何东西？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-27T19:30:52.013

*   谷歌的安卓群组

这可能是最好的去处。但是，无论如何，在谷歌上进行一次好的搜索很可能会将您带到这些讨论中的一个。在这里，您也可以与核心开发人员讨论您的困难。

*   Anddev.org

他们可能是迄今为止（截至 2008 年 4 月 20 日星期日）在线上关于围绕 android 的开发和互动社区最活跃的团体。除了官方的 google 群组和 irc.freenode.net 上#android 的 irc 频道之外，它们可能是最好的去处或提问的地方。

*   [http://davanum.wordpress.com/](http://davanum.wordpress.com/)

开发在这里停止了，但仍然做了一些相当有趣的事情。

*   phandroid.com

没看到太多发展的东西

*   Androforge.net

一个不错的小存储库，但文件不多。

我从我的开发 wiki 中提取了它，该 wiki 已经有一段时间没有更新了，但祝你好运与 Android ......和 ​​T-Mobile G1

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-28T02:54:21.527

无需等待，[Android SDK](http://code.google.com/android/documentation.html)有一个运行良好的模拟器，看起来很像 HTC Dream。此外，您不希望将代码直接放在手机上，而无需在某种模拟器中进行测试。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2008-09-27T22:14:27.267

在您查看[文档](http://code.google.com/android/documentation.html)之后，另一个可以查看更多内容的示例代码的好地方是[用于 android 的应用程序，](http://code.google.com/p/apps-for-android/)其中 google 开发人员不时发布小示例应用程序。

[Anddev](http://www.anddev.org/)也适用于示例代码，但要注意 - SDK 最近发生了很大变化，所以一些旧的东西已经过时了。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2008-10-02T14:21:28.003

本网站的一些教程[http://mylifewithandroid.blogspot.com/](http://mylifewithandroid.blogspot.com/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-27T19:19:06.037

[http://code.google.com/android/devel/index.html](http://code.google.com/android/devel/index.html)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-27T19:15:05.657

谷歌已经为它设置了一个谷歌代码，并让有限数量的开发人员开始使用它。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2009-06-03T20:44:05.887

也可以访问这里寻求帮助：

[http://andmob.wikidot.com/](http://andmob.wikidot.com/)

我们的一些开发人员聚在一起为大家提供帮助

# wcf - 添加 WCF 服务引用失败。VS2008 退出

> ID：144255
> 
> 赞同：0
> 
> 时间：2008-09-27T19:14:34.923
> 
> 标签：wcf

我有一个超级简单的 WCF 服务。我使用 IIS7 在我的本地机器上托管它。

当我向我的服务添加服务引用时，Visual Studio 告诉我有一个错误。我可以单击详细信息链接，然后会弹出一个对话框：对象引用未设置为对象的实例。

我可以毫无问题地构建我的 WCF 服务，并且我的客户端应用程序也可以成功构建。

我什至可以使用 svcutil [http://localhost/logservice/logservice.svc?wsdl](http://localhost/logservice/logservice.svc?wsdl)来生成客户端。

我在我的 Windows 事件日志/查看器中看到了这个错误：

.NET 运行时版本 2.0.50727.3053 - 致命的执行引擎错误 (706B7706) (80131506)

我在网上找了一个补丁，但是安装不了。。。

我认为这与我添加服务引用的客户端解决方案有关。我可以使用“在解决方案中发现服务”功能添加服务参考。我只需要在其他地方的解决方案中添加服务引用，所以这让我抓狂。

我的 web.config 的 system.serviceModel 如下所示：

```
 <system.serviceModel>
<services>
  <service behaviorConfiguration="LogServiceBehavior" name="LogService">
    <endpoint address="" binding="wsHttpBinding" contract="ILogService">
      <identity>
                    <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="LogServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>
  </serviceBehaviors>
</behaviors> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T08:19:35.537

我已经尝试将问题从我当前的解决方案中分离出来，并进入一个绝对没有复杂性的新解决方案。

1.  从 WCF 服务模板在 Visual Studio 中创建一个新网站。
2.  将 C# 3.5 类库项目添加到解决方案。
3.  构建解决方案。
4.  在 ClassLibrary1 项目上添加服务引用，然后单击发现按钮以发现此解决方案中的 WcfService1。
5.  您将在列表中看到 WcfService1，但是当您单击确定或尝试扩展发现的服务时，您将收到错误消息。有时 VS2008 退出 - 没有任何提示。

我试过运行 C:\Windows\Microsoft.NET\Framework\v3.0\Windows Communication Foundation>ServiceModelReg.exe -r 这没有帮助。

有没有人遇到过这样的事情？

# iphone - 内存泄漏检测工具

> ID：144261
> 
> 赞同：64
> 
> 时间：2008-09-27T19:17:08.443
> 
> 标签：iphone, xcode, memory-management, memory-leaks

Apple 的 Xcode 开发环境是否提供任何用于内存泄漏检测的工具？

我对适用于 iPhone SDK 的工具特别感兴趣。目前我最喜欢的业余编程项目平台

所述工具的文档/教程将非常有帮助。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2008-09-28T00:32:47.920

有一个专门称为`Leaks`并且就像之前的海报所说的那样，运行它的最简单方法是直接从 Xcode 中运行：

> > 运行 -> 从性能工具开始 -> 泄漏

它似乎非常擅长检测内存泄漏，并且对于像我这样的非 C 头来说很容易弄清楚。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-09-27T21:13:34.233

`Profile`从 Xcode 6 的菜单中选择`Product`以启动 Apple 的 Instruments 工具。（该应用程序位于 Xcode 应用程序的包内容中`/Applications/Xcode.app/Contents/Applications/`：）

~~一个商业替代品是[OmniObjectMeter](http://www.omnigroup.com/developer/omniobjectmeter/)。~~（由 Omni 集团停产）

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-28T01:05:14.940

[`Clang Static Analyser`](http://clang-analyzer.llvm.org/)非常适合在 C、C++ 和 Objective-C 代码中查找错误：

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-27T21:21:28.627

您可以在 Xcode 中运行这些工具`menu -> run -> start with performance tool -> ...`

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-08-29T06:47:47.743

这是使用 xcode 中的仪器检测 ios/mac 应用程序的内存泄漏/性能的链接 从 Xcode [运行仪器的步骤](http://www.raywenderlich.com/23037/how-to-use-instruments-in-xcode)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2011-03-29T02:27:59.340

> Apple 的 Xcode 开发环境是否提供任何用于内存泄漏检测的工具？
> 
> 我对适用于 iPhone SDK 的工具特别感兴趣。

是的。苹果称它们为“仪器”（不仅仅是记忆工具）。

参见苹果的[`Introduction to Instruments User Guide`](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html). 特别是，请参阅[`Locating Memory Issues in Your App`](https://developer.apple.com/library/mac/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/MemoryManagementforYourApp/MemoryManagementforYourApp.html#//apple_ref/doc/uid/TP40004652-CH11-SW1)。它提供了如何使用面向内存的跟踪模板的示例。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-09-27T21:11:28.917

ObjectAlloc 和 MallocDebug 都应该对您有所帮助。如果您安装了整个 SDK，它们将在 Developer->Applications->Performance Tools 中找到。

它们的名称为您提供了关于它们的功能的一个很好的线索，OA，跟踪对象创建和 MA 是一个通用的内存泄漏工具。

我还没有在 iPhone 开发中尝试过它们，但我必须相信它们也可以在那里工作。

假设您已注册 ADC iPhone 开发者网站，请点击以下链接：[`Instruments User Guide`](http://developer.apple.com/iphone/library/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/chapter_1_section_1.html)

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2008-09-28T02:20:43.637

使用时[`rustyshelf's solution`](https://stackoverflow.com/questions/144261/memory-leak-detection-tools-in-xcode#144866)请确保您在 iPhone 上而不是在模拟器上进行测试。内存使用情况大不相同。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2010-09-16T12:51:28.823

对主要的内存泄漏工具做了一个总结：[`iphone-essential-performance-tools-list`](http://bcaccinolo.wordpress.com/2010/09/15/iphone-essential-performance-tools-list/)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-04-24T08:09:42.543

[![在此处输入图像描述](https://i.stack.imgur.com/j8qBE.png)](https://i.stack.imgur.com/j8qBE.png)

**步骤 1\. 选择分配工具**

1.  为分配选择分析模板：

[![在此处输入图像描述](https://i.stack.imgur.com/qBOYt.png)](https://i.stack.imgur.com/qBOYt.png)

2.  在 Instruments 主界面上，单击 VM Tracker（如果存在），然后按 Delete 键，因为您不需要该特定仪器：

[![在此处输入图像描述](https://i.stack.imgur.com/o4Ys3.png)](https://i.stack.imgur.com/o4Ys3.png)

通过单击右上角的加号按钮，您可以为不同类型的测试添加更多仪器，但我不会在本教程中介绍它们。

**步骤 2\. 设置仪器设置**

在运行任何分析之前，您需要做一些事情。首先，您需要插入安装了您的应用程序的 iOS 设备。它必须是物理设备，因为 iOS 模拟器仍然是一个模拟器，可能无法准确地表示您的应用程序中的内存使用情况或应用程序在内存压力下的执行情况。

要选择您的目标，请单击顶部附近的**我的电脑**，将鼠标悬停在您的设备上，然后从子菜单中选择您的应用程序：

[![在此处输入图像描述](https://i.stack.imgur.com/fbjEU.png)](https://i.stack.imgur.com/fbjEU.png)

接下来，有一个面板，您可以在其中更改要查看的分配类型的设置。除了确保选中**Created & Persistent**气泡外，您无需事先做太多事情。

[![在此处输入图像描述](https://i.stack.imgur.com/p9KoY.png)](https://i.stack.imgur.com/p9KoY.png)

**Step 3\. 按记录运行仪器**

按下左上角的记录按钮后，您的应用程序将在您的设备上启动，仪器将开始绘制您的分配图表。你需要做的就是运行你的应用程序，关注可能的问题区域，看看分配的内存是否多于释放的内存。这可能意味着要做很多重复性的任务，但你以后会感谢自己的。

您应该看到如下内容：

[![在此处输入图像描述](https://i.stack.imgur.com/umIan.png)](https://i.stack.imgur.com/umIan.png)

我建议你运行一次你的应用程序并在内存中达到一个稳定的点，这样你就有一个很好的基线，可以让任何增加都变得明显。当您对有足够的数据进行测试感到满意时，请按左上角的停止按钮。

**步骤 4\. 分析**

1.  我要做的第一件事是设置检查范围以测量基线处的总持久字节数。该持久字节数位于分配摘要的正下方。

[![在此处输入图像描述](https://i.stack.imgur.com/HrJDb.png)](https://i.stack.imgur.com/HrJDb.png)

要实际设置检查范围，请使用键盘快捷键**Command <**设置左侧检查范围，使用**Command >**设置右侧检查范围。在我们的应用程序中，我们有大约 20MB 的基线。

[![在此处输入图像描述](https://i.stack.imgur.com/LFgLj.png)](https://i.stack.imgur.com/LFgLj.png)

2.  然后，我将我的右检查范围移动到我再次运行应用程序并返回到我们的根的位置。在这里，您可以看到内存大致相同。因此，通过多次执行此操作并看到您的内存恢复到我们的基线，您可以假设没有重大内存问题。

[![在此处输入图像描述](https://i.stack.imgur.com/Il1me.png)](https://i.stack.imgur.com/Il1me.png)

有不同的方法来分析这些数据，我不会在这里介绍，但请注意，有一个完整的下拉菜单可以查看和分析您的数据。

[![在此处输入图像描述](https://i.stack.imgur.com/0ESuZ.png)](https://i.stack.imgur.com/0ESuZ.png)

**步骤 5\. 标记世代**

如果您不想过多地处理检查范围，则有一个称为标记生成的功能。在仪器的右侧面板上有一个按钮。

[![在此处输入图像描述](https://i.stack.imgur.com/Y3xDR.png)](https://i.stack.imgur.com/Y3xDR.png)

此按钮将根据检查线的位置在仪器的时间线上标记点。它这样做是为了跟踪自上一个标记以来的所有分配，或者如果没有其他标记则从头开始跟踪。您可以在运行分配工具时或停止运行后标记世代，如下例所示：

[![在此处输入图像描述](https://i.stack.imgur.com/3ZcJC.png)](https://i.stack.imgur.com/3ZcJC.png)

**步骤 6\. 检查堆栈跟踪**

最后要介绍的是查看堆栈跟踪。为此，您需要设置检查范围以突出显示所有分配，然后查看统计视图，确保在右侧面板上选择了**Created & Persistent气泡。**在统计视图中，确保 Persistent Bytes 从高到低排序。这里有很多分配，很难理解发生了什么，因为其中很多是系统分配。

[![在此处输入图像描述](https://i.stack.imgur.com/dG6el.png)](https://i.stack.imgur.com/dG6el.png)

**深入**

1.  查看最大的分配并单击向右的箭头。很多时候，你点击的那些里面会有分配，其中很多对你没有意义。

[![在此处输入图像描述](https://i.stack.imgur.com/J997n.png)](https://i.stack.imgur.com/J997n.png)

2.  当您在单击箭头后突出显示不同的分配时，请继续查看右侧面板上的扩展详细信息。最终，您会遇到一些粗体文本，这些文本会导致项目中的实际代码，告诉您问题可能是什么。

[![在此处输入图像描述](https://i.stack.imgur.com/P0K7a.png)](https://i.stack.imgur.com/P0K7a.png)

3.  如果您双击堆栈跟踪中的粗体项之一，它将带您进入实际代码（假设您在您拥有的应用程序上运行分配）。

[![在此处输入图像描述](https://i.stack.imgur.com/oopuQ.png)](https://i.stack.imgur.com/oopuQ.png)

4.  这个视图有很多有用的东西，其中一个是右侧大部分黄色的标签，显示每个方法调用占用了多少内存。每个应用程序都是不同的，因此开发人员必须确定突出显示的方法是否存在问题、您可以优化的东西，或者只是应用程序中不可避免的一部分。

5.  在我的例子中，UIColor 变量在我们的应用程序中是持久的和使用的，因此在我们的应用程序的整个生命周期中都是可以接受的。

[在这里找到](http://www.ibm.com/developerworks/library/mo-ios-memory/)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-12-09T21:37:07.363

也试试这个，一个从 Xcode 工具开始的简单教程

内存泄漏工具：[http ://www.raywenderlich.com/2696/](http://www.raywenderlich.com/2696/)

基本：[http ://www.raywenderlich.com/23037/how-to-use-instruments-in-xcode](http://www.raywenderlich.com/23037/how-to-use-instruments-in-xcode)

# c# - StructureMap 中的 AddConcreteType 和 TheDefaultIsConcreteType 有什么区别？

> ID：144272
> 
> 赞同：2
> 
> 时间：2008-09-27T19:24:02.793
> 
> 标签：c#, .net, structuremap

我正在设置 StructureMap，似乎我想做的所有事情都有两种方法可以做到，我不清楚它们之间有什么区别。例如，这两行之间有什么区别：

```
StructureMapConfiguration.ForRequestedType<IConsumer>().AddConcreteType<Consumer>();

StructureMapConfiguration.ForRequestedType<IConsumer>().TheDefaultIsConcreteType<Consumer>(); 
```

同样，使用 AddInstanceOf 和 ForRequestedType 有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-04T14:37:45.403

```
StructureMapConfiguration.ForRequestedType<IConsumer>().AddConcreteType<Consumer>(); 
```

此方法会将 Consumer 类型添加为 IConsumer 的插入类型。如果 IConsumer 没有其他插入类型，则此类型将是默认类型，返回请求 IConsumer 的实例。否则，您将需要使用具体键（默认情况下是该类型的程序集限定名称）来获取此实例。

```
StructureMapConfiguration.ForRequestedType<IConsumer>().TheDefaultIsConcreteType<Consumer>(); 
```

这与 AddConcreteType 类似，只是它也使类型成为默认类型。如果对 IConsumer 的请求未指定具体键，则这是将返回的类型。

至于 AddInstanceOf 和 ForRequestedType 之间的区别，AddInstance of 允许您提供一个委托来处理创建指定类型的实例。ForRequestedType 为您提供了 CreatePluginFamilyExpression 的实例（或 ForRequestedType(Type t) 的情况下的 GenericFamilyExpression），它允许您以流畅的方式配置实例。

# php - phpUnderControl 的替代方案 - 它是最好的吗？

> ID：144274
> 
> 赞同：11
> 
> 时间：2008-09-27T19:25:22.277
> 
> 标签：php, version-control, continuous-integration

我正在为 PHP 寻找一个好的系统，它可以执行 UnitTesting、Subversion、编码标准。

我很想听听你的建议，哪一个是最好的以及为什么。我将在 debian 服务器上运行它，所以在 mac 或 windows 服务器上运行的任何东西都是不可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-11-05T19:50:32.447

我第二次使用 CI 和 PHP 的 Hudson。如果您有兴趣，我已经写了一个关于设置它的教程。

编辑：

我的教程已经过时了。

我强烈推荐：http: [//jenkins-php.org/](http://jenkins-php.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-29T00:48:57.950

我们玩过 Xinc，但我们现在坚持使用 phpUnderControl。当我们评估不同的解决方案时，它似乎更成熟了。

phpug 带有对 phpUnit 的明显支持，还生成文档（phpDocumentor），使用 xdebug 代码覆盖和项目混乱检测，甚至检查 CS（通过 phpcs）。至于 phpUnit，您现在甚至可以使用它运行[phpt](http://qa.php.net/phpt_details.php)样式的测试，这使某些人更容易编写测试。

尽管 phpug 在游戏中添加了 CruiseControl 和 Java，但对我们来说并没有太大的麻烦。反正没有我想象的那么多。:) 我的意思是，这就是基于 Java 的服务的优势。（假设您有 JDK）您只需下载并运行它。就这么简单。我不熟悉 Debian 上的 Java，但上次我检查它不是问题。

至于商业解决方案，我知道很多使用[Bamboo](http://www.atlassian.com/software/bamboo/)的 PHP 商店（以及完整的 Atlassian 套件）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-29T03:39:37.993

[phing](http://phing.info/trac/)是用 php 编写的 Ant clone/workalike。我用它来运行 phpunit 测试、checkstyle 编码标准检查、静态网站生成和应用程序的 tarball 打包。编写自定义任务以将任何 php 应用程序或 shell 脚本可运行程序集成到您尚未支持的构建过程中是相当简单的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-12-29T15:50:07.277

我认为您在谈论持续集成。你可以使用的最好的东西是 CruiseControl + Ant + phpUnderControl + phpUnit + PHP_CodeSniffer + Xdebug。有了这条链子，您将向粉丝挥手 :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-10-01T06:38:11.947

如果您正在寻找的是持续集成，您是否检查过[TeamCity](http://www.jetbrains.com/teamcity/)？它不是专门为 PHP 设计的，但它*很*容易设置和管理。[专业许可证](http://www.jetbrains.com/teamcity/buy/buy.jsp#professional)（20 个构建配置）和[开源项目](http://www.jetbrains.com/teamcity/buy/buy.jsp#openSource)也是免费的。

# .net - Mono .NET 项目是否包含在最流行的 Linux 发行版的最新版本中？

> ID：144277
> 
> 赞同：11
> 
> 时间：2008-09-27T19:29:16.260
> 
> 标签：.net, linux, mono

我想知道 mono.net 是否包含在 Ubuntu、Kubuntu 和 Fedora 以及其他流行发行版的默认安装中？

如果是这样，是否有人有充分的理由不使用它来开发主要针对 linux 的新 GUI 应用程序？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-27T19:34:41.083

它包含在 Fedora、Ubuntu、Mandriva、Debian 和 OpenSUSE 中。

唯一不包含它的主要操作系统是 RHEL，但可以单独下载软件包。

此外，如果需要，您可以将 Mono 与您的应用程序捆绑到一个二进制文件中（不推荐，但总是可以的）。

GUI 方面的 Mono 支持 Unix 和 MacOS 上的 Windows.Forms API，但如果您想要更原生的体验，您可以使用 Gtk# API（这为 GNOME 库堆栈提供了一个 .NET API），或者如果您愿意，您可以使用 Qyoto希望与 KDE API 集成。

有许多使用 Gtk# 和 Mono 开发的 Linux 最佳 GUI 应用程序，其中一些最流行的包括[Gnome-Do](http://do.davebsd.com/)（快速应用程序启动器）、[F-Spot](http://f-spot.org/Main_Page)照片管理软件、[Banshee](http://banshee-project.org/)和Muine 媒体播放器和[MonoDevelop](http://www.monodevelop.com/Main_Page) IDE。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-27T19:39:31.760

GUI 方面的 Mono 支持 Unix 和 MacOS 上的 Windows.Forms API，但如果您想要更原生的体验，您可以使用 Gtk# API（这为 GNOME 库堆栈提供了一个 .NET API），或者如果您愿意，您可以使用 Qyoto希望与 KDE API 集成。

有许多使用 Gtk# 和 Mono 开发的 Linux 最佳 GUI 应用程序，其中一些最流行的包括[Gnome-Do](http://do.davebsd.com/)（快速应用程序启动器）、[F-Spot](http://f-spot.org/Main_Page)照片管理软件、[Banshee](http://banshee-project.org/)和Muine 媒体播放器和[MonoDevelop](http://www.monodevelop.com/Main_Page) IDE。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T19:35:31.410

我很确定它是 Ubuntu 的默认设置。如果不是，我没有注意到安装它。

现代发行版上的包管理器会自动下拉依赖项。在这些发行版上使用任何奇怪的平台都没有很大的障碍。

也就是说，许多 Ubuntu 应用程序是用 GTK# 用 Mono 编写的。最值得注意的是 Tomboy Notes 和 Gnome Do。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-06-04T08:29:20.740

我认为不使用它的最大原因是政治上的。话虽如此，我认为在为 Linux 编写程序时，mono 是一个很好的开发环境，我会向任何编写新应用程序的人推荐它。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2008-09-27T19:33:51.477

> 我想知道 mono.net 是否包含在 Ubuntu、Kubuntu 和 Fedora 以及其他流行发行版的默认安装中？

~~我不相信 Ubuntu 默认自带，Kubuntu 肯定不会。~~

Ubuntu Intrepid，可能还有 Hardy，默认带有 Mono。不知道它在其他发行版上的状态。

> 如果是这样，是否有人有充分的理由不使用它来开发主要针对 linux 的新 GUI 应用程序？

如果它主要针对 Linux，为什么不使用与 Linux 桌面更好集成的技术呢？Python 和 Java 是不错的选择。仅当您将重用大量遗留代码时才使用 .NET。

# sql-server - varchar 和 nvarchar 有什么区别？

> ID：144283
> 
> 赞同：1562
> 
> 时间：2008-09-27T19:34:00.273
> 
> 标签：sql-server, varchar, nvarchar

只是`nvarchar`支持多字节字符吗？如果是这样的话，除了存储问题之外，使用 真的有什么意义`varchars`吗？

* * *

## 回答 #1

> 赞同：1938
> 
> 时间：2008-09-29T02:16:22.780

列可以`nvarchar`存储任何 Unicode 数据。一`varchar`列仅限于 8 位代码页。有些人认为`varchar`应该使用它，因为它占用的空间更少。我相信这不是正确的答案。代码页不兼容是一件痛苦的事，而 Unicode 是解决代码页问题的方法。现在有了便宜的磁盘和内存，真的没有理由再浪费时间在代码页上乱搞了。

所有现代操作系统和开发平台都在内部使用 Unicode。通过使用`nvarchar`而不是`varchar`，您可以避免每次读取或写入数据库时​​进行编码转换。转换需要时间，并且容易出错。从转换错误中恢复是一个不平凡的问题。

如果您正在与仅使用 ASCII 的应用程序交互，我仍然建议在数据库中使用 Unicode。操作系统和数据库排序算法将更好地与 Unicode 配合使用。Unicode 在与*其他*系统交互时避免了转换问题。你将为未来做准备。对于您必须维护的任何遗留系统，您始终可以验证您的数据是否仅限于 7 位 ASCII，即使在享受完整 Unicode 存储的一些好处的同时。

* * *

## 回答 #2

> 赞同：292
> 
> 时间：2008-09-27T19:37:02.390

[**varchar**](http://msdn.microsoft.com/en-us/library/ms176089.aspx)：可变长度、非 Unicode 字符数据。数据库排序规则确定使用哪个代码页存储数据。

[**nvarchar**](http://msdn.microsoft.com/en-us/library/ms186939.aspx)：可变长度的 Unicode 字符数据。依赖于数据库排序规则进行比较。

有了这些知识，就可以使用与您的输入数据匹配的任何一个（ASCII 与 Unicode）。

* * *

## 回答 #3

> 赞同：76
> 
> 时间：2008-09-27T19:37:21.250

我总是使用 nvarchar，因为它允许我正在构建的任何东西承受我扔给它的几乎任何数据。我的 CMS 系统不小心做了中文，因为我使用了 nvarchar。如今，任何新应用程序都不应该真正关心所需的空间量。

* * *

## 回答 #4

> 赞同：35
> 
> 时间：2010-10-07T18:08:57.417

这取决于 Oracle 的安装方式。在安装过程中，会设置 NLS_CHARACTERSET 选项。您可以通过查询找到它`SELECT value$ FROM sys.props$ WHERE name = 'NLS_CHARACTERSET'`。

如果您的 NLS_CHARACTERSET 是 UTF8 之类的 Unicode 编码，那就太好了。使用 VARCHAR 和 NVARCHAR 几乎相同。现在停止阅读，继续阅读。否则，或者如果您无法控制 Oracle 字符集，请继续阅读。

VARCHAR — 数据存储在 NLS_CHARACTERSET 编码中。如果同一台服务器上还有其他数据库实例，您可能会受到它们的限制；反之亦然，因为您必须共享设置。**这样的字段可以存储可以使用该字符集进行编码的任何数据，仅此而已**。因此，例如，如果字符集是 MS-1252，则您只能存储诸如英文字母、少数重音字母和其他一些字符（如 € 和 —）之类的字符。您的应用程序仅对少数地区有用，无法在世界其他任何地方运行。因此，它被认为是一个坏主意。

NVARCHAR — 数据以 Unicode 编码存储。支持每种语言。一个好主意。

储物空间呢？VARCHAR 通常是有效的，因为字符集/编码是为特定语言环境定制设计的。NVARCHAR 字段以 UTF-8 或 UTF-16 编码存储，具有讽刺意味的是，基于 NLS 设置。UTF-8 对于“西方”语言非常有效，同时仍支持亚洲语言。UTF-16 对于亚洲语言非常有效，同时仍支持“西方”语言。如果担心存储空间，请选择一个 NLS 设置以使 Oracle 酌情使用 UTF-8 或 UTF-16。

处理速度呢？大多数新的编码平台本机使用 Unicode（Java、.NET，甚至是几年前的 C++ std::wstring！），所以如果数据库字段是 VARCHAR，它会强制 Oracle 在每次读取或写入时在字符集之间进行转换，效果不太好。使用 NVARCHAR 可以避免转换。

底线：使用 NVARCHAR！它避免了限制和依赖，适合存储空间，通常也最适合性能。

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2008-09-27T19:36:41.127

nvarchar 将数据存储为 Unicode，因此，如果您要在数据列中存储多语言数据（多于一种语言），则需要 N 变体。

* * *

## 回答 #6

> 赞同：20
> 
> 时间：2013-04-19T09:53:33.663

我的两分钱

1.  如果不使用正确的数据类型，索引可能会失败：
    在 SQL Server 中：当您在 VARCHAR 列上创建索引并将其呈现为 Unicode 字符串时，SQL Server 不会使用该索引。当您将 Bi​​gInt 呈现给包含 SmallInt 的索引列时，也会发生同样的事情。即使 BigInt 小到足以成为 SmallInt，SQL Server 也无法使用索引。相反，您没有这个问题（当向索引的 BigInt ot NVARCHAR 列提供 SmallInt 或 Ansi-Code 时）。

2.  不同 DBMS（数据库管理系统）之间的数据类型可能有所不同：
    要知道每个数据库的数据类型略有不同，而 VARCHAR 并不意味着在所有地方都相同。SQL Server 有 VARCHAR 和 NVARCHAR，而 Apache/Derby 数据库只有 VARCHAR，而 VARCHAR 是 Unicode。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2011-12-14T12:09:00.200

主要是**nvarchar**存储 Unicode 字符，**varchar**存储非 Unicode 字符。

“Unicodes”是指 16 位字符编码方案，允许将来自许多其他语言（如阿拉伯语、希伯来语、中文、日语）的字符编码为单个字符集。

这意味着 unicodes 每个字符使用 2 个字节来存储，而非 unicodes 每个字符只使用一个字节来存储。这意味着与非 unicode 相比，unicode 需要双倍的存储容量。

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2017-05-14T06:10:46.437

`Varchar(n)`和之间的主要区别`nvarchar(n)`是：

[![在此处输入图像描述](https://i.stack.imgur.com/sAu3O.jpg)](https://i.stack.imgur.com/sAu3O.jpg)

`Varchar`（可变长度、非 Unicode 字符数据）大小最大为 8000。

1.  它是一种可变长度数据类型
2.  用于存储非Unicode字符
3.  每个字符占用 1 个字节的空间

[![在此处输入图像描述](https://i.stack.imgur.com/l29wf.jpg)](https://i.stack.imgur.com/l29wf.jpg)

`Nvarchar`: 可变长度的 Unicode 字符数据。

1.  它是一种可变长度数据类型
2.  用于存储 Unicode 字符。
3.  数据以 Unicode 编码存储。支持每种语言。（例如阿拉伯语、德语、印地语等语言）

* * *

## 回答 #9

> 赞同：12
> 
> 时间：2008-09-27T19:42:47.493

你是对的。`nvarchar`存储 Unicode 数据，同时`varchar`存储单字节字符数据。除了您已经提到的存储差异（`nvarchar`需要两倍的存储空间）之外，首选的`varchar`主要原因是国际化（即以其他语言存储字符串）。`nvarchar``varchar`

* * *

## 回答 #10

> 赞同：12
> 
> 时间：2021-03-01T14:17:50.890

`varchar`is used for `non-Unicode characters`only 另一方面`nvarchar`，同时用于`unicode`和`non-unicode`字符。下面给出了它们之间的其他一些区别。

## VARCHAR 与 NVARCHAR

|  | VARCHAR | NVARCHAR |
| --- | --- | --- |
| 字符数据类型 | 可变长度的非 Unicode 字符 | 可变长度，Unicode 和非 Unicode 字符，如日语、韩语和中文。 |
| 最大长度 | 取决于`8,000 characters` | 取决于`4,000 characters` |
| 字符大小 | `1 byte`每个字符占用 | 占用`2 bytes`每个 Unicode/非 Unicode 字符 |
| 存储大小 | 实际长度（以字节为单位） | 2 倍实际长度（以字节为单位） |
| 用法 | 当数据长度是可变或可变长度列并且实际数据总是远小于容量时使用 | 由于仅用于存储，仅在您需要 Unicode 支持时使用，例如日文汉字或韩文字符。 |

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2008-09-27T19:36:09.847

nVarchar 将帮助您存储 Unicode 字符。如果您想存储本地化数据，这是要走的路。

* * *

## 回答 #12

> 赞同：10
> 
> 时间：2010-01-25T10:19:26.503

我会说，这取决于。

如果您开发一个桌面应用程序，其中操作系统以 Unicode 工作（就像所有当前的 Windows 系统一样）并且语言本身支持 Unicode（默认字符串是 Unicode，如 Java 或 C#），那么请使用 nvarchar。

如果您开发一个 Web 应用程序，其中字符串以 UTF-8 形式出现，语言是 PHP，它本身仍然不支持 Unicode（在 5.x 版本中），那么 varchar 可能是更好的选择。

* * *

## 回答 #13

> 赞同：9
> 
> 时间：2016-02-15T20:58:27.773

虽然`NVARCHAR`存储 Unicode，但您应该考虑借助排序规则也可以使用`VARCHAR`和保存本地语言的数据。

想象一下下面的场景。

您的数据库的排序规则是波斯语，并且您在数据类型中保存了一个值，例如“علی”（阿里的波斯语书写）`VARCHAR(10)`。没有问题，DBMS 只使用三个字节来存储它。

但是，如果您想将数据传输到另一个数据库并查看正确的结果，您的目标数据库必须与目标数据库具有相同的排序规则，在此示例中为波斯语。

如果您的目标排序规则不同，您会在目标数据库中看到一些问号 (?)。

最后，请记住，如果您使用的是用于本地语言的大型数据库，我建议使用位置而不是使用太多空格。

我相信设计可以不同。这取决于您工作的环境。

* * *

## 回答 #14

> 赞同：8
> 
> 时间：2014-06-04T13:29:55.103

如果使用单个字节来存储一个字符，则有 256 种可能的组合，从而可以保存 256 个不同的字符。排序规则是定义字符以及比较和排序它们的规则的模式。

1252，即 Latin1 (ANSI)，是最常见的。单字节字符集也不足以存储许多语言使用的所有字符。例如，某些亚洲语言有数千个字符，因此每个字符必须使用两个字节。

### 统一码标准

当在网络中使用使用多个代码页的系统时，管理通信变得困难。为了标准化事物，ISO 和 Unicode 联盟引入了*Unicode*。Unicode 使用两个字节来存储每个字符。也就是说可以定义 65,536 个不同的字符，所以几乎所有的字符都可以用 Unicode 覆盖。如果两台计算机使用 Unicode，则每个符号都将以相同的方式表示，并且不需要转换——这就是 Unicode 背后的理念。

SQL Server 有两类字符数据类型：

*   非 Unicode（char、varchar 和 text）
*   Unicode（nchar、nvarchar 和 ntext）

如果我们需要保存来自多个国家/地区的字符数据，请始终使用 Unicode。

* * *

## 回答 #15

> 赞同：8
> 
> 时间：2017-01-05T11:49:25.870

我查看了答案，许多人似乎建议使用`nvarchar`over `varchar`，因为空间不再是问题，因此启用 Unicode 以获取少量额外存储并没有什么坏处。好吧，当您想在列上应用索引时，情况并非总是如此。SQL Server 对可以索引的字段的大小有 900 个字节的限制。所以如果你有一个`varchar(900)`你仍然可以索引它，但不是`varchar(901)`. 使用`nvarchar`，字符数减半，因此您最多可以索引`nvarchar(450)`. 所以如果你确信你不需要`nvarchar`，我不建议使用它。

一般来说，在数据库中，我建议坚持你需要的大小，因为你总是可以扩展的。比如同事曾经认为用`nvarchar(max)`for列没有什么坏处，因为我们存储完全没有问题。后来，当我们尝试在该列上应用索引时，SQL Server 拒绝了。但是，如果他从 even 开始`varchar(5)`，我们可以稍后将其扩展为我们需要的，而不会出现需要我们执行现场迁移计划来解决此问题的问题。

* * *

## 回答 #16

> 赞同：6
> 
> 时间：2013-11-20T11:06:37.920

我必须在这里说（我意识到我可能会向自己敞开心扉！），但肯定是唯一比所有排序规则更有用的时候`NVARCHAR`（注意*那里*的*更多*！）`VARCHAR`依赖系统和数据库本身是相同的......？如果不是，那么排序规则转换无论如何都必须发生，因此`VARCHAR`与`NVARCHAR`.

除此之外，一些数据库系统，例如[SQL Server（2012 年之前）](http://support.microsoft.com/kb/2663912)的页面大小约为 8K。因此，如果您正在考虑存储未保存在类似`TEXT`or`NTEXT`字段中的可搜索数据，则`VARCHAR`提供完整的 8k 空间，而`NVARCHAR`仅提供 4k（双倍字节，双倍空间）。

我想，总而言之，两者的使用取决于：

*   项目或背景
*   基础设施
*   数据库系统

* * *

## 回答 #17

> 赞同：6
> 
> 时间：2014-01-29T17:22:22.587

遵循*[Sql Server VARCHAR 和 NVARCHAR 数据类型之间的区别](http://sqlhints.com/2011/12/23/difference-between-varchar-and-nvarchar/)*。在这里，您可以以非常具有描述性的方式看到。

一般来说，nvarchar 将数据存储为 Unicode，因此，如果您要在数据列中存储多语言数据（多于一种语言），则需要 N 变体。

* * *

## 回答 #18

> 赞同：6
> 
> 时间：2019-04-09T05:01:24.857

信誉评分约为 47000 的 Jeffrey L Whitledge 建议使用 nvarchar

Solomon Rutzky 信誉得分约为 33200，建议：不要总是使用 NVARCHAR。这是一种非常危险且通常代价高昂的态度/方法。

[varchar 和 nvarchar SQL Server 数据类型之间的主要性能差异是什么？](https://stackoverflow.com/questions/35366/what-are-the-main-performance-differences-between-varchar-and-nvarchar-sql-serve)

[https://www.sqlservercentral.com/articles/disk-is-cheap-orly-4](https://www.sqlservercentral.com/articles/disk-is-cheap-orly-4)

这么高的名气，学习sql server的数据库开发者怎么选？

如果您的选择不一致，答案和评论中会出现许多关于性能问题的警告。

有关于性能的评论 pro/con nvarchar。

有评论 pro/con varchar 以提高性能。

我对具有数百列的表有特殊要求，这本身可能很不寻常？

我选择 varchar 是为了避免接近 SQL*server 2012 的 8060 字节表记录大小限制。

对我来说，使用 nvarchar 超过了这个 8060 字节的限制。

我也在想我应该把相关代码表的数据类型与主中心表的数据类型相匹配。

我已经看到以前经验丰富的数据库开发人员在南澳大利亚政府的这个工作地点使用 varchar 列，其中表的行数将达到数百万或更多（并且在这些非常大的表），因此可能预期的数据行量成为此决定的一部分。

* * *

## 回答 #19

> 赞同：3
> 
> 时间：2020-10-05T15:53:26.290

[由于 SQL Server 2019 varchar 列支持 UTF-8 编码。](https://techcommunity.microsoft.com/t5/sql-server/introducing-utf-8-support-for-sql-server/ba-p/734928)

因此，从现在开始，区别在于大小。

在转换为速度差异的数据库系统中。

更小的尺寸 = 更少的 IO + 更少的内存 = 总体上更快的速度。阅读上面的文章了解数字。

从现在开始使用 UTF8中的**varchar！**

仅当您有**大量**数据的字符在 2048 - 16383 和 16384 - 65535 范围内时 - 您必须测量

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2017-08-10T07:26:36.390

`nvarchar``varchar`与使我们的代码无错误（类型不匹配）相比，使用起来更安全，因为`nvarchar`也允许使用 unicode 字符。当我们`where`在 SQL Server 查询中使用条件并且使用`=`运算符时，有时会抛出错误。可能的原因是我们的映射列将定义在`varchar`. 如果我们在`nvarchar`这个问题中定义它，我不会发生。我们仍然坚持`varchar`并避免这个问题，我们最好使用`LIKE`关键字而不是`=`.

# c++ - C++ 标准状态

> ID：144285
> 
> 赞同：3
> 
> 时间：2008-09-27T19:34:56.573
> 
> 标签：c++, standards

我最近没有跟上 C++ 世界的步伐。这些天关于标准的情况究竟如何？

TR1被采用了吗？

有TR2吗？

这些与 C++0x 有什么关系？被纳入了吗？

是否已就线程问题做出决定？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-27T19:55:42.983

[您可以在wikipedia](http://en.wikipedia.org/wiki/C%2B%2B0x)上找到一篇关于即将到来的 C++0x和 C++ 进化现状的详尽[文章](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2008/n2705.html)。还值得看看[gcc中当前的 GNU 实现](http://www.gnu.org/software/gcc/gcc-4.4/cxx0x_status.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2008-09-27T19:37:09.363

我建议您访问 [http://www.open-std.org/jtc1/sc22/wg21/](http://www.open-std.org/jtc1/sc22/wg21/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-27T19:52:07.330

您需要的信息可在**pvnsp**引导您访问的站点上找到。概括我的理解

*   是的，[TR1](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1745.pdf)已被采用，预计[C++0x将包含](http://en.wikipedia.org/wiki/C%2B%2B0x)*几乎*所有标准。
*   有一个[TR2](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1810.html)，它仍在开发中。
*   据我所知，没有关于线程的决定。这是来自[open-std.org](http://www.open-std.org/JTC1/sc22/wg21/docs/papers/2005/n1875.html)的文档，讨论了这个问题。

# parallel-processing - 什么是最好的 MPI 实现

> ID：144309
> 
> 赞同：25
> 
> 时间：2008-09-27T19:40:17.637
> 
> 标签：parallel-processing, mpi

我必须在集群中实现 MPI 系统。如果这里有人对 MPI（MPICH/OpenMPI）有任何经验，我想知道哪个更好，以及如何在 x86_64 机器集群上提高性能。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-28T00:59:56.277

MPICH 已经存在了很长时间。它非常便携，您会在网上找到数年的提示和技巧。这是一个安全的选择，它可能与更多的 MPI 程序兼容。

OpenMPI 较新。虽然它不是那么便携，但它确实很好地支持了最常见的平台。大多数人似乎认为它在几个方面要好得多，尤其是在容错方面 - 但要利用这一点，您可能必须使用它的一些不属于 MPI 标准的特殊功能。

至于性能，很大程度上取决于应用程序；很难给出一般性的建议。你应该发布一个关于你想要运行的计算类型、节点数量和硬件类型的具体问题——包括你正在使用什么类型的网络硬件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-02-19T22:34:37.560

我已经为 Windows 和 Linux 集群编写了相当多的并行应用程序，我可以建议您，现在 MPICH2 可能是更安全的选择。正如其他响应者所提到的，它是一个非常成熟的库。此外，现在有充足的广播支持（通过[MPI_Bcast](http://www-unix.mcs.anl.gov/mpi/www/www3/MPI_Bcast.html)），事实上，MPICH2 有很多非常好的特性，比如[scatter-and-gather](http://www.mpi-forum.org/docs/mpi-11-html/node75.html)。

不过，OpenMPI 正在取得一些进展。Penguin 计算（他们是大型集群供应商，他们喜欢 Linux）实际上有一些非常强大的基准测试，其中 OpenMPI 在某些情况下击败了 MPICH2。

关于您关于“提高性能”的评论，我能给出的最好建议是，如果您受 I/O 限制，则永远不要发送超过绝对必要的数据，如果您受 CPU 限制，则永远不要做超过必要的工作。我已经多次陷入优化错误代码的陷阱 :) 希望你不会步我的后尘！

查看 MPI 论坛 - 他们有很多[关于 MPI 例程的好信息](http://www.mpi-forum.org/)，并且[Beowulf](http://www.beowulf.org/)网站回答了很多有趣的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-03-18T16:15:19.820

“更好”很难定义......“更快”可以通过用您的代码和硬件对其进行基准测试来回答。诸如集体和卸载优化之类的事情将取决于您的确切硬件，并且在驱动程序堆栈版本方面也有很大差异，谷歌应该能够找到您的工作组合。

就优化工作而言，这在某种程度上取决于代码，在某种程度上取决于硬件。

您的代码 I/O 是否绑定到存储？在这种情况下，调查比 NFS 更好的东西可能会有很大帮助，或者使用 MPI I/O 而不是幼稚的并行 I/O

如果您受网络限制，那么查看通信位置和通信/计算重叠会有所帮助。大多数各种 MPI 实现都具有使用本地共享内存而不是网络进行节点内通信的调整选项，这对于某些代码可以显着减少网络负载。

I/O 和 MPI 流量的隔离在某些集群上会产生很大的影响，特别是对于千兆以太网集群。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2008-09-28T01:05:21.787

我们使用 mpich 只是因为它似乎最可用且文档记录最好，我们没有花很多精力来测试替代方案。MPICH 有合理的工具用于在 Windows 上进行部署。
我们遇到的主要性能问题是我们需要将相同的基础数据传送到所有节点，而 MPICH 不（或不）支持广播 - 所以部署初始数据是 O(n)

# assembly - 如何从时钟中获取随机生成器的种子，在汇编程序中编程

> ID：144315
> 
> 赞同：0
> 
> 时间：2008-09-27T19:45:05.130
> 
> 标签：assembly, random

编译器，TASM 5

架构 x86。

对于随机数生成器算法，将时钟作为种子。

* * *

我找到了解决方案：

```
AcquireSeed PROC

    PUSH AX
    PUSH CX
    PUSH DX

    MOV Ah, 00h ; Int
    INT 1AH     ; return the clock in CX:DX

    MOV seed, DL ; save the less significant byte of the clock at seed (declared at .data)

    POP DX
    POP CX
    POP DX

AcquireSeed endp 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-27T19:53:38.247

不知道你的问题是什么意思，但你可能在寻找[RDTSC](http://en.wikipedia.org/wiki/RDTSC)吗？

如果是这样，TASM 不直接支持它，但您可以使用

```
db 0Fh, 31h 
```

# internet-explorer - 你用什么来测试你的浏览器扩展/BHO？

> ID：144319
> 
> 赞同：3
> 
> 时间：2008-09-27T19:47:51.833
> 
> 标签：internet-explorer, testing, selenium, bho

测试浏览器扩展的最佳方法/工具是什么？

在我的例子中，我使用 IE Browser Helper Object (C#)，它有自己的小型 UI 和大量的数据库交互。到目前为止，我们使用自动化单元测试来测试我们的模型/业务对象，但手动测试 UI/场景测试。我正在考虑开始使用 Selenium 来控制浏览器，然后需要添加一些其他脚本来控制和断言我的 UI 元素的行为并检查数据库以获得正确的结果。

有什么建议吗？处于类似情况的其他人会做什么（无论是开发 BHO 还是 Firefox 扩展或其他）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-29T21:02:37.550

我们曾经使用 Selenium，但后来我们切换到[Webius](http://webiussoft.com/) SWExplorerAutomation (SWEA)。

使用 Webius 的一个好处是我们可以生成 c#，将它们包装在 nunit 测试中，并将测试编译成 .NET 程序集以集成到我们的构建脚本中。

缺点是它们特定于 Internet Explorer，但它为我们的用户界面提供了一个很好的冒烟测试。

我们正在转向 ASP.NET MVC，这将使我们能够单独测试控制器，但我们仍然需要一些工具来测试视图（尽管它们可能会非常薄和笨拙）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-05-20T10:50:49.427

我们决定使用[WatiN](http://watin.org/)，因为它比 Selenium 更轻量级。我们将它用于 IE 和 Firefox。

# perl - 根据当前文件的内容从 awk 搜索/读取另一个文件，这可能吗？

> ID：144321
> 
> 赞同：2
> 
> 时间：2008-09-27T19:49:02.377
> 
> 标签：perl, search, shell, awk, command-line-interface

我正在使用 (GNU) 处理一个巨大的文件`awk`，（其他可用的工具是：Linux shell 工具，一些旧的（> 5.0）版本的 Perl，但无法安装模块）。

我的问题：如果某个field1，field2，field3包含X，Y，ZI必须在另一个目录中搜索包含field4和field5的文件，并将找到的文件中的一些数据插入到当前输出中。

例如：

实际文件行：

```
f1 f2 f3 f4 f5
X  Y  Z  A  B 
```

现在我需要搜索另一个文件（在另一个目录中），其中包含例如

```
f1 f2 f3 f4
A  U  B  W 
```

并`$0`从原始文件和找到的文件写入 STDOUT ，然后处理原始文件的下一行。`f2``f3`

有可能做到`awk`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-29T07:19:02.943

让我首先说您的问题描述并没有那么有帮助。下一次，请更具体一点：您可能会错过更好的解决方案。

因此，根据您的描述，我了解到您有两个包含空格分隔数据的文件。在第一个文件中，您希望将前三列与某个搜索模式进行匹配。如果找到，您想查找另一个文件中包含第一个文件中匹配行的第四列和第五列的所有行。从这些行中，您需要提取第二列和第三列，然后打印第一个文件的第一列以及第二个文件的第二列和第三列。好的，这里开始：

```
#!/usr/bin/env perl -nwa
use strict;
use File::Find 'find';
my @search = qw(X Y Z);

# if you know in advance that the otherfile isn't
# huge, you can cache it in memory as an optimization.

# with any more columns, you want a loop here:
if ($F[0] eq $search[0]
    and $F[1] eq $search[1]
    and $F[2] eq $search[2])
{
  my @files;
  find(sub {
      return if not -f $_;
      # verbatim search for the columns in the file name.
      # I'm still not sure what your file-search criteria are, though.
      push @files, $File::Find::name if /\Q$F[3]\E/ and /\Q$F[4]\E/;
      # alternatively search for the combination:
      #push @files, $File::Find::name if /\Q$F[3]\E.*\Q$F[4]\E/;
      # or search *all* files in the search path?
      #push @files, $File::Find::name;
    }, '/search/path'
  )
  foreach my $file (@files) {
    open my $fh, '<', $file or die "Can't open file '$file': $!";
    while (defined($_ = <$fh>)) {
      chomp;
      # order of fields doesn't matter per your requirement.
      my @cols = split ' ', $_;
      my %seen = map {($_=>1)} @cols;
      if ($seen{$F[3]} and $seen{$F[4]}) {
        print join(' ', $F[0], @cols[1,2]), "\n";
      }
    }
    close $fh;
  }
} # end if matching line 
```

与另一个包含大量系统调用的发布者的解决方案不同，这根本不会退回到 shell，因此应该足够快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-29T17:18:26.340

这是让我首先从 awk 转到 perl 的工作类型。如果您要完成此操作，您实际上可能会发现创建一个创建 awk 脚本以进行查询然后在单独的步骤中更新的 shell 脚本更容易。

（我写了这样一个用于读取/更新 windows-ini 样式文件的野兽——它很难看。我希望我可以使用 perl。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-30T07:25:30.890

我经常看到“我不能使用任何 Perl 模块”的限制，当它不是作业问题时，通常只是由于缺乏信息。[是的，即使您可以使用 CPAN，也](http://perlmonks.org/?node_id=693828)包含有关如何在没有 root 权限的情况下在本地安装 CPAN 模块的说明。另一种选择是获取 CPAN 模块的源代码并将其粘贴到您的程序中。

如果存在其他未说明的限制，例如磁盘空间不足会阻止安装（太多）附加文件，则这些都无济于事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T20:31:50.807

这似乎适用于我设置的与您的示例匹配的一些测试文件。以这种方式涉及 perl（插入 grep）可能会极大地损害性能，尽管......

```
## perl code to do some dirty work

for my $line (`grep 'X Y Z' myhugefile`) {
    chomp $line;
    my ($a, $b, $c, $d, $e) = split(/ /,$line);
    my $cmd = 'grep -P "' . $d . ' .+? ' . $e .'" otherfile';
    for my $from_otherfile (`$cmd`) {
        chomp $from_otherfile;
        my ($oa, $ob, $oc, $od) = split(/ /,$from_otherfile);
        print "$a $ob $oc\n";
    }
} 
```

**编辑：**使用 tsee 的解决方案（上图），这是经过深思熟虑的。

# security - OpenID 改造，我可以相信涉及敏感数据的地方吗？

> ID：144324
> 
> 赞同：2
> 
> 时间：2008-09-27T19:50:04.603
> 
> 标签：security, openid

我正在考虑将 OpenID 添加到我们面向客户的管理和控制面板区域......

**1 - 将 OpenID 与现有帐户相关联**

对于已经拥有我们帐户的客户，我认为他们需要使用我们发布的现有帐号登录，然后我将有一种机制将他们的 OpenID 与他们帐户管理区域中的该帐户相关联（称为“ OpenID 管理器'为了争论）。

在“OpenID 管理器”中，假设用户已经有一个 OpenID，我是否会根据他们的 OpenID 对用户进行身份验证，然后与我们生成的帐号相关联以供将来的 OpenID 登录（假设他们通过了身份验证）？

**2 - 敏感数据**

虽然我们没有在我们的数据库中存储完整的信用卡数据，但还有其他敏感数据，发票，域注册详细信息等。阅读本文后[http://idcorner.org/2007/08/22/the-problems- with-openid/](http://idcorner.org/2007/08/22/the-problems-with-openid/)我对以这种方式使用 OpenID 的想法有点谨慎，你们的普遍共识是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-27T21:15:23.837

在我看来，很多反对 OpenID 的论点要么是出于无知，要么是由一些有问题的人提出来的。

例如，您链接到的文档抱怨说，使用 URI 来识别自己是“不人道的，而且有点吓人”。这是合法的投诉，还是拼命想抱怨的人写的东西？

提出的两个主要问题是网络钓鱼和被盗帐户，并且这些论点已经被反复讨论了很多次，如果他们再次提出它们而没有提出新的观点，就很难认真对待某人。

网络钓鱼防护取决于提供商。一些提供商提供比典型网站更好的安全性。一些提供商只提供典型的用户名和密码。无论哪种方式，如果帐户被盗用，那是用户和他们的提供商之间的事情，这不是你关心的问题。您不必担心最终用户的计算机上安装了键盘记录器，对吗？那是因为他们的本地安全不是您的责任，即使它可能被用来访问他们的帐户。OpenID 也是如此 - 它的安全性不是您的责任。

如果您破坏了 OpenID，它可以让您访问多个网站。当然可以，但电子邮件也是如此。只需说您忘记了密码，您就会收到一个新密码。您现在可以访问他们使用该电子邮件地址注册的每个帐户。

OpenID 并不比现状差，而且在许多情况下明显好转，尤其是对于知情用户。如果您仍然对它保持警惕，那么只需将其设为可选，这样只有知情的用户才能使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-27T20:23:57.237

我允许使用特定帐户注册*多个OpenID。*这是一个很好的功能，因为它允许用户在需要时在 OpenID 之间迁移。

* * *

也就是说，idcorner 链接提出了一个很好的观点。我认为他严重夸大了安全问题，并对 OpenID 提供者的工作方式做出了许多愚蠢的假设，但 OpenID 并不是要取代所有形式的用户身份验证。它旨在使“路过”用户通过某种形式的基本身份验证轻松与站点交互。

*   曾经访问过某人的博客，想发表评论，但首先您必须通过 3 页注册？OpenID 解决了这个问题。
*   想要在公共跟踪器上发布快速错误报告但首先需要一个帐户？OpenID 来救援。
*   想要以 Web 可访问的方式存储敏感的专有数据并仅向受信任的人提供访问权限？OpenID*不是*解决方案。

# java - 在 Java 中创建自然 DSL 的最佳工具是什么？

> ID：144339
> 
> 赞同：15
> 
> 时间：2008-09-27T19:56:12.700
> 
> 标签：java, dsl, nlp, parsing

几天前，我阅读了一篇博客文章 ( [http://ayende.com/Blog/archive/2008/09/08/Implementing-generic-natural-language-DSL.aspx](http://ayende.com/Blog/archive/2008/09/08/Implementing-generic-natural-language-DSL.aspx) )，其中作者讨论了使用 .NET 的通用自然语言 DSL 解析器。

在我看来，他的想法的绝妙之处在于，文本被解析并与使用与句子同名的类进行匹配。

以下面几行为例：

```
使用电子邮件 test@email.com 和密码 test 创建用户 user1
登录用户 1
将 user1 带到 T 恤分类
让 user1 将商品 Flower T-Shirt 添加到购物车
带 user1 结帐

```

将使用“已知”对象的集合进行转换，该集合采用解析结果。一些示例对象将是（在我的示例中使用 Java）：

```
public class CreateUser {
    private final String user;
    private String email;
    private String password;

    public CreateUser(String user) {
    this.user = user;
    }

    public void withEmail(String email) {
    this.email = email;
    }

    public String andPassword(String password) {
        this.password = password;
    }
} 
```

因此，在处理第一句时，CreateUser 类将是一个匹配项（显然是因为它是“create user”的串联），并且由于它在构造函数上接受一个参数，因此解析器会将“user1”作为用户参数。

之后，解析器将识别下一部分“with email”也匹配一个方法名称，并且由于该方法带有一个参数，它会将“test@email.com”解析为电子邮件参数。

我想你现在明白了，对吧？至少对我来说，一个非常明确的应用是允许应用程序测试人员用自然语言创建“测试脚本”，然后将句子解析为使用 JUnit 来检查应用程序行为的类。

我想听听关于可以使用 Java 编写此类解析器的工具或资源的想法、提示和意见。如果我们可以避免使用复杂的词法分析器，或者像 ANTLR 这样的框架，我认为这可能会用锤子杀死苍蝇，那就更好了。

不仅如此，如果有人愿意为此启动一个开源项目，我肯定会感兴趣。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-09-27T20:17:09.093

考虑到词法分析和解析的复杂性，我不知道是否要手动编写所有代码。 **[ANTLR](http://www.antlr.org/)并不难拾取，我认为根据您的问题值得研究。** 如果您使用解析语法从输入构建和抽象语法树，那么使用树语法处理该 AST 非常容易。树语法可以轻松处理执行您描述的过程。

您会在很多地方找到 ANTLR，包括 Eclipse、Groovy 和 Grails。 [Definitive ANTLR Reference](https://rads.stackoverflow.com/amzn/click/com/0978739256)甚至可以相当简单地快速掌握基础知识。

今年早些时候，我有一个项目必须处理一些用户生成的查询文本。我开始手动处理它，但很快就变得不堪重负。我花了几天时间来加快 ANTLR 的速度，并在几天内运行了我的语法和处理器的初始版本。对需求的后续更改和调整会杀死任何自定义版本，但是一旦我启动并运行了 ANTLR 语法，就需要相对较少的精力进行调整。

祝你好运！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-28T00:31:06.097

您可能需要考虑[Xtext](http://wiki.eclipse.org/Xtext)，它在内部使用 ANTLR 并做了一些不错的事情，例如为您的 DSL 自动生成编辑器。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-03-25T11:07:05.993

如果您称其为“自然语言”，那您就是在自欺欺人。它仍然是一种编程语言，只是一种试图模仿自然语言的语言——我怀疑一旦你进入实现细节它就会失败。为了明确起见，您必须对语法进行限制，这会使那些被引导认为他们正在写“英语”的用户感到困惑。

DSL 的优点是（或者无论如何应该是）它简单明了，但在问题域方面却很强大。模仿自然语言是次要的问题，实际上可能会适得其反。

如果某人太愚蠢或缺乏编程所需的形式严谨的思维能力，那么模仿自然语言的编程语言不会神奇地将他们变成程序员。

在 COBOL 发明的时候，有人认真地认为，10 年内对专业程序员的需求将为零，因为 COBOL “像英语一样”，任何需要软件的人都可以自己编写。我们都知道这是怎么回事。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-01-28T00:26:47.943

我第一次听说 DSL 是来自 IntellJ Idea 的创建者 Jetbrains。

他们有这个工具：[MPS（元编程系统）](http://www.jetbrains.com/mps/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T01:10:27.657

您可能会发现我所做的关于使用 Antlr 的这个由多部分组成的博客系列作为起点很有用。它使用 Antlr 2，因此 Antlr 3 的某些内容会有所不同：

[http://tech.puredanger.com/2007/01/13/implementing-a-scripting-language-with-antlr-part-1-lexer/](http://tech.puredanger.com/2007/01/13/implementing-a-scripting-language-with-antlr-part-1-lexer/)

Mark Volkman 关于 Antlr 的演讲/文章也很有帮助：

[http://www.ociweb.com/mark/programming/ANTLR3.html](http://www.ociweb.com/mark/programming/ANTLR3.html)

我会支持关于 Definitive ANTLR 书的建议，这本书也很棒。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-25T10:46:17.650

“至少对我来说，一个非常明确的应用是允许应用程序测试人员用自然语言创建“测试脚本”，然后将句子解析为使用 JUnit 来检查应用程序行为的类”

您在这里谈论的内容听起来与工具 FitNesse 完全一样。正如您所描述的那样，客户使用某种对他们有意义的语言编写验收测试“脚本”，而程序员则构建使测试通过的系统。即使您谈论的实现也几乎完全是 FitNesse 的工作原理 - 脚本中使用的词汇被连接起来形成函数名称等，因此 FitNesse 框架知道要调用什么函数。

无论如何，检查一下:)

# sql-server - 如何在数据库中存储目录/层次/树结构？

> ID：144344
> 
> 赞同：64
> 
> 时间：2008-09-27T19:59:24.923
> 
> 标签：sql-server, sql-server-2005, database-design, tree-structure

如何在数据库中存储目录/层次结构/树结构？即 MSSQL 服务器。

@olavk：看起来您没有看到我自己的答案。我使用的方式比递归查询更好:)

pps[这就是](http://www.developerfusion.co.uk/show/4633/2/)要走的路！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-27T20:27:59.067

在 SQL 数据库中存储层次结构的方法有很[多种。](http://troels.arvin.dk/db/rdbms/links/#hierarchical)选择哪一个取决于您使用的 DBMS 产品，以及数据的使用方式。由于您使用了 MSSQL2005 标签，我认为您应该开始考虑“邻接表”模型；如果您发现它在您的应用程序中表现不佳，请查看[Vadim Tropashko 的比较](http://vadimtropashko.wordpress.com/2008/08/09/one-more-nested-intervals-vs-adjacency-list-comparison/)，该比较突出了模型之间的差异，重点关注多个性能特征。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-11-17T14:09:03.603

如果使用 Sql Server 2008 是一个选项：也许您应该检查新的[hierarchyid](http://msdn.microsoft.com/library/bb677173(en-us).aspx)数据类型。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-27T20:23:08.613

还有树的嵌套集模型，它比 ParentID 模型具有一些优势。见[http://www.evanpetersen.com/item/nested-sets.html](http://www.evanpetersen.com/item/nested-sets.html)和[http://falsinsoft.blogspot.nl/2013/01/tree-in-sql-database-nested-set-model.html](http://falsinsoft.blogspot.nl/2013/01/tree-in-sql-database-nested-set-model.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-27T19:59:32.273

这对我来说更像是一个书签而不是一个问题，但它也可能对你有所帮助。我已经使用[本文的](http://www.developerfusion.co.uk/show/4633/2/)方法在数据库中存储目录/树结构。

文章中还有一些有用的代码片段。

希望这可以帮助。

**我与该网站没有任何关联**

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-27T20:14:31.457

您使用的是 SQL Server 2005 吗？[递归查询](http://msdn.microsoft.com/en-us/library/ms186243.aspx)使查询分层数据更加优雅。

编辑：我确实认为物化路径有点破解。该路径包含非规范化的冗余数据，您必须使用触发器或其他东西来保持它们的更新。例如。如果一个节点改变了父节点，整个子树必须更新它们的路径。并且子树查询必须使用一些丑陋的子字符串匹配，而不是优雅而快速的连接。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2011-10-14T18:01:37.047

我的一个项目也遇到了类似的问题。我们有一个巨大的层次结构，它将永远增加。我需要快速遍历它，然后在经过一些复杂的验证后找到正确的组。当我知道递归查询是唯一可行的解​​决方案时，与其去 SQL Server 并挠头，我怎样才能在那里有效地做到这一点。但是你真的知道递归查询中是否有任何优化。是否可以保证您的层次结构将来不会增加，并且有一天您会发现递归查询太慢而无法在生产中使用？

所以，我决定试一试 Neo4J。它是一个图形数据库，内置许多有用的算法，惊人的快速遍历以及体面的文档和示例。将层次结构存储在 Neo4J 中，并使用 Thrift 服务（或其他东西）访问层次结构。是的，您将必须编写代码，将您的 SQL 查询与 Neo4J 集成，但您将拥有一个可扩展且更面向未来的解决方案。

希望您觉得这个有帮助。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-06T00:02:06.563

该问题类似于已关闭的[问题。](https://stackoverflow.com/questions/3362669/what-are-the-known-ways-to-store-a-tree-structure-in-a-relational-db)我发现这两个问题的答案对我的追求非常有帮助，他们最终将我带到了 MongoDB 手册，该手册提供了 5 种不同的树结构建模方法： [https ://docs.mongodb.com/manual/applications/data-models-tree -结构/](https://docs.mongodb.com/manual/applications/data-models-tree-structures/)

虽然 MongoDB 不是关系数据库，但提供的模型适用于关系数据库以及 JSON 等其他格式。您显然需要根据所呈现的优点/缺点来确定哪种模型是正确的。

这个问题的作者找到了一个结合了父路径和物化路径模型的[解决方案。](http://www.developerfusion.com/article/4633/tree-structures-in-aspnet-and-sql-server/2/)保持深度和父级可能会带来一些问题（额外的逻辑、性能），但对于某些需求显然有好处。对于我的项目，物化路径效果最好，我通过本文中的技术克服了一些问题（排序和路径长度[）](https://bojanz.wordpress.com/2014/04/25/storing-hierarchical-data-materialized-path/)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-27T20:17:49.997

典型的方式是一个带有外键（例如“ParentId”）的表。

# ruby-on-rails - 在 Rails 上设计 RESTful 公共 API 的最佳实践是什么？

> ID：144359
> 
> 赞同：9
> 
> 时间：2008-09-27T20:08:19.660
> 
> 标签：ruby-on-rails, api, rest

Rails 提供开箱即用的 RESTful 资源，但您是否将这些资源用于实际的公共 API？如果是这样，您将如何完成 API 的版本控制，即`example.com/api/v2/foo/bar`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-28T03:30:45.527

通常，我的应用程序的 API 确实建立在构成 HTML 界面的相同资源之上。对于某些人（不是我），这可能只是使用来自脚手架生成器的代码——但无论我是自定义编写它还是让生成器处理它，很少有我只将资源公开给程序API 而不是最终用户视图。

到目前为止，版本控制对我构建的应用程序来说不是问题，但我可以想出两种方法来实现它。

1）您可以添加前缀为“v1”、“v2”等的路由，设置一个参数，然后您可以在控制器中访问该参数以指定要发生的处理：

在 routes.rb 中：

```
map.resources :posts, :path_prefix => '/:version' 
```

在posts_controller.rb

```
class PostsController < ApplicationController
  def index
    respond_to do |format|
      format.xml do
        if params[:version] == 'v1'
          # ...
        else
          # ...
        end
      end
    end
  end
end 
```

2）您还可以考虑为每个版本添加自定义响应格式

在初始化程序/mime_types.rb

```
Mime::Type.register_alias "application/xml", :v1
Mime::Type.register_alias "application/xml", :v2 
```

在posts_controller.rb

```
class PostsController < ApplicationController
  def index
    respond_to do |format|
      format.v1 do
        # ...
      end
      format.v2 do
        # ...
      end
    end
  end
end 
```

前者会给你像 example.com/v1/posts.xml 和 example.com/v2/posts.xml 这样的 URL；后者会给你像 example.com/posts.v1 和 example.com/posts.v2 这样的 URL

# theory - 分布式哈希表（DHT）的简单基本解释

> ID：144360
> 
> 赞同：186
> 
> 时间：2008-09-27T20:08:25.043
> 
> 标签：theory, p2p, dht

任何人都可以解释 DHT 的工作原理吗？

没什么太重的，只是基础。

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2008-09-27T20:59:46.060

好的，它们基本上是一个非常简单的想法。DHT 为您提供类似字典的界面，但节点分布在网络中。DHT 的诀窍是通过散列该键找到存储特定键的节点，因此实际上您的哈希表存储桶现在是网络中的独立节点。

这提供了很多容错性和可靠性，并可能带来一些性能优势，但它也引发了很多令人头疼的问题。例如，当一个节点因故障或其他原因离开网络时会发生什么？以及当节点加入时如何重新分配密钥以使负载大致平衡。想一想，无论如何，您如何均匀分配密钥？当一个节点加入时，如何避免重新散列所有内容？（请记住，如果您增加存储桶的数量，您必须在普通哈希表中执行此操作）。

解决其中一些问题的一个示例 DHT 是由 n 个节点组成的逻辑环，每个节点负责 1/n 的密钥空间。将节点添加到网络后，它会在环上找到一个位于其他两个节点之间的位置，并负责其兄弟节点中的一些密钥。这种方法的美妙之处在于环中的其他节点都不会受到影响。只有两个兄弟节点必须重新分配密钥。

例如，假设在三节点环中，第一个节点的密钥为 0-10，第二个节点为 11-20，第三个节点为 21-30。如果第四个节点出现并将自己插入节点 3 和 0 之间（记住，它们在一个环中），它可以负责 3 的一半密钥空间，所以现在它处理 26-30，节点 3 处理 21 -25。

还有许多其他的覆盖结构，例如使用基于内容的路由来找到存储密钥的正确节点。在环中定位密钥需要一次在环中搜索一个节点（除非您保留本地查找表，在数千个节点的 DHT 中存在问题），这是 O(n) 跳路由。其他结构 - 包括增强环 - 保证 O(log n) 跳路由，并且一些声称以更多维护为代价的 O(1) 跳路由。

阅读维基百科页面，如果你真的想更深入地了解，请查看哈佛的这个课程页面，它有一个非常全面的阅读清单[。](http://www.eecs.harvard.edu/~mema/courses/cs264/cs264.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2008-09-27T20:12:16.000

DHT 向用户提供与普通哈希表相同类型的接口（通过键查找值），但数据分布在任意数量的连接节点上。维基百科有一个很好的基本介绍，如果我写得更多，我基本上会反刍 -

[http://en.wikipedia.org/wiki/Distributed_hash_table](http://en.wikipedia.org/wiki/Distributed_hash_table)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-04-28T21:45:47.780

我想补充一下 HenryR 的有用答案，因为我刚刚了解了一致的哈希。正常/朴素哈希查找是两个变量的函数，其中一个是存储桶的数量。一致散列的美妙之处在于我们从等式中消除了桶的数量“n”。

在朴素散列中，第一个变量是要存储在表中的对象的键。我们将把键称为“x”。第二个变量是桶的数量，“n”。因此，要确定对象存储在哪个桶/机器中，您必须计算：hash(x) mod(n)。因此，当您更改存储桶的数量时，您也更改了几乎每个对象的存储地址。

将此与一致散列进行比较。让我们将“R”定义为哈希函数的范围。R只是一些常数。在一致性哈希中，对象的地址位于 hash(x)/R。由于我们的查找不再是存储桶数量的函数，因此当我们更改存储桶数量时，我们最终会减少重新映射。

[http://michaelnielsen.org/blog/consistent-hashing/](http://michaelnielsen.org/blog/consistent-hashing/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-27T17:11:38.203

DHT 的核心是哈希表。键值对存储在 DHT 中，可以使用键查找值。键是值的唯一标识符，范围从区块链中的块到地址和文档。

**DHT 与普通哈希表的区别在于 DHT 上的存储和查找分布在多个（可能是数百万）节点或机器上。**DHT 的这一特性使其看起来像用于存储和检索的分布式数据库。参与节点之间没有主从层次结构或集中控制。所有节点都被视为对等点。

DHT 为参与节点提供自由，使节点可以随时加入或离开网络。由于这个原因，DHT 广泛用于点对点 (P2P) 网络。事实上，DHT 研究背后的部分动机源于其在 P2P 网络中的使用。

**DHT的特点**

1.  去中心化：因为没有中央权威或协调

2.  可扩展：系统可以轻松扩展到数百万个节点

3.  容错：DHT 复制所有节点上的数据存储。因此，即使一个节点离开网络，也不应该影响网络中的其他节点。

让我们看看如何在 Chord 等流行的 DHT 协议中进行查找。考虑一个循环的节点的双向链表。每个节点都有一个指向上一个和下一个节点的引用指针。有问题的节点旁边的节点称为后继节点。在所讨论的节点之前的节点称为前驱节点。

就 DHT 而言，每个节点都有一个唯一的 k 位节点 ID，这些节点按照节点 ID 的升序排列。假设这些节点排列在一个称为标识符环的环形结构中。对于每个节点，后继节点顺时针方向的距离最短。对于大多数节点，这是其 ID 最接近但仍大于当前节点 ID 的节点。要找出适合特定密钥的节点，首先使用一致的哈希技术（如 SHA-1）将密钥 K 和所有节点哈希到恰好 k 位。

[![SHA1](https://i.stack.imgur.com/Duaij.png)](https://i.stack.imgur.com/Duaij.png)

从环中的任何点开始，顺时针遍历，直到找到节点 ID 更接近密钥 K，但可能大于 K 的节点。该节点负责存储和查找该特定密钥。

[![DHT 中的基本查找](https://i.stack.imgur.com/AtNFZ.png)](https://i.stack.imgur.com/AtNFZ.png)

在迭代式查找中，每个节点 Q 查询其后继节点的 KV（键值）对。如果查询到的节点没有目标key，则返回一组可以更接近目标的节点S。查询节点 Q 然后查询 S 中离自己较近的节点。这一直持续到返回目标 KV 对或没有更多节点要查询时。

这种查找非常适合所有节点都具有完美正常运行时间的理想场景。但是如何处理节点有意或因故障离开网络的情况呢？这就需要一个健壮的加入/离开协议。

**流行的 DHT 协议和实现**

1.  弦
2.  卡德利亚
3.  阿帕奇卡桑德拉
4.  Koorde TomP2P
5.  伏地魔

参考：

1.  [https://en.wikipedia.org/wiki/Distributed_hash_table](https://en.wikipedia.org/wiki/Distributed_hash_table)
2.  [https://steffikj19.medium.com/dht-demystified-77dd31727ea7](https://steffikj19.medium.com/dht-demystified-77dd31727ea7)
3.  [https://www.linuxjournal.com/article/6797](https://www.linuxjournal.com/article/6797)

# css - 两列布局，其中一列在 CSS 中具有固定宽度

> ID：144375
> 
> 赞同：0
> 
> 时间：2008-09-27T20:17:14.040
> 
> 标签：css, layout

我想要一个使用 CSS 浮动的漂亮的 2 列布局。

Column#1 160 px Column#2 100%（即剩余空间）。

我想先放置 Col#2 的 div，所以我的布局如下所示：

```
<div id="header"></div>
<div id="content">
     <div id="col2"></div>
     <div id="col1"></div>
</div>
<div id="footer"></div> 
```

什么必须得到这个效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-27T20:26:44.157

以上都行不通。

```
div#col2 {
    width: 160px;
    float: left;
    position: relative;
}

div#col1 {
    width:100%;
    margin-left: 160px;
} 
```

假设第 2 列应显示为左侧边栏，第 1 列作为主要内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-27T20:22:45.913

您应该使用“float”CSS 属性来执行此操作。在这里查看一个[简单的实现](http://www.456bereastreet.com/lab/developing_with_web_standards/csslayout/2-col/)。你可以在这里找到更详细的[文章](http://www.lissaexplains.com/css3.shtml)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T20:23:36.350

我认为你可以做这样的事情。

```
div#col2 {
  padding-left: 160px;
  width: 100%;
}

div#col1 {
  float: left;
  width: 160px;
} 
```

这依赖于`#col1`来之前`#col2`，这可能使它无法使用。

这不会，但依赖于`#col1`更长的时间：

```
#content {
  position: relative;   
}
div#col2 {
  width: 160px;
  position: absolute;
}

div#col1 {
  width: 100%;
  margin-left: 160px;
} 
```

这将使页脚保持在原位。

```
div#footer {
  clear: both;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T15:20:24.800

您必须在第一列上使用 float:left 并在第二列上使用 float:right

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-26T06:28:32.243

虽然这个问题是多年前的问题，但我为任何未来的参考和类似案例提供了这个有用的答案。

将`#col1`before`#col2`放入标记中，您可以将其浮动到右侧，以防您有 LTR lauout（如果您有 RTL 布局，则浮动到左侧）并给出另一个 col `overflow: hidden`。

请注意，父 ( `#content`) 也应该有`overflow: hidden`：

```
#content{
  overflow: hidden;
  padding: 20px 0;
  height: 100px;
  background-color: #cdeecd;
}

#content #col1{
  float: right;
  width: 160px;
  height: 100px;
  background-color: #eecdcd;
}

#content #col2{
  height: 100px;
  overflow: hidden;
  background-color: #cdcdee;
}
```

```
<div id="content">
     <div id="col1"></div>
     <div id="col2"></div>
</div>
```

# ruby - Ruby：如何将潜在的 unicode 字符串分解为字节

> ID：144380
> 
> 赞同：1
> 
> 时间：2008-09-27T20:20:56.510
> 
> 标签：ruby, unicode, utf-8

我正在编写一个游戏，它接受用户输入并将其呈现在屏幕上。我为此使用的引擎完全是 unicode 友好的，所以如果可能的话，我想保留它。问题是渲染循环看起来像这样：

```
"string".each_byte do |c|
    render_this_letter(c)
end 
```

我对 i18n 了解不多，但我知道上面的代码只会对我和说我的语言的人有用。我更喜欢这样的东西：

```
"unicode string".each_unicode_letter do |u|
    render_unicode_letter(u)
end 
```

这是否存在于核心发行版中？我有点反对在安装中添加额外的要求，但如果这是唯一的方法，我会活下去。

为了更有趣，我无法知道该字符串是否实际上是一个 unicode 字符串。

编辑：我正在使用的库确实可以渲染整个字符串，但是我让用户编辑即时出现的内容 - 如果他们点击“退格”，基本上，我需要知道要砍掉多少字节结束.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-27T22:23:26.030

不幸的是，ruby 1.8.x 对 unicode 的支持很差。它正在 1.9 中解决。但与此同时，像这样的库 ( [http://snippets.dzone.com/posts/show/4527](http://snippets.dzone.com/posts/show/4527) ) 是一个很好的解决方案。使用链接库，您的代码将如下所示：

```
"unicode_string".each_utf8_char do |u| 
    render_unicode_letter(u)
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T14:48:28.533

您可以尝试从 rails 代码库中包含[ActiveSupport::CoreExtensions::String::Unicode](http://api.rubyonrails.org/classes/ActiveSupport/CoreExtensions/String/Unicode.html)模块。

# java - 是否有工具可以查看我的 Java 代码并建议一个好的包结构？

> ID：144392
> 
> 赞同：4
> 
> 时间：2008-09-27T20:26:55.187
> 
> 标签：java, refactoring

我有一个很大的代码库，我想重构包结构，以便大量交互的类放在同一个包中。

似乎应该可以创建一个可以查看类之间交互的工具，然后将那些交互频繁的类组合在一起。然后，这些分组可能会建议包的良好层次结构。

这样的工具存在吗？（开源是首选）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T01:02:43.870

Structure101 是另一个可以分析代码结构并进行依赖性和假设分析的产品。

[http://www.headwaysoftware.com/products/structure101/index.php](http://www.headwaysoftware.com/products/structure101/index.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T01:01:34.887

您可以尝试 Lattix，它使用依赖结构矩阵在类和包级别向您显示代码中的依赖关系和隐藏结构。过去我发现它对这类东西很有帮助。

[http://www.lattix.com/](http://www.lattix.com/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T01:05:08.963

Structure Analysis for Java 是一个 Eclipse 插件，可以进行一些依赖分析：

[http://stan4j.com/](http://stan4j.com/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T20:28:31.907

尝试一些意大利面（见[http://freshmeat.net/projects/pastatool/](http://freshmeat.net/projects/pastatool/)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T20:28:57.100

[IntelliJ](http://www.intellij.com)在这个方向上有一些代码矩阵工具。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-27T23:50:26.320

至少可以告诉您在设计方面是否走在正确的轨道上的是[JDepend](http://clarkware.com/software/JDepend.html)。它鼓励对高度抽象的包的依赖（这可能会比代码不那么抽象的包改变得更少），并且会在你的包有循环依赖时警告你。我发现这是一个很好的现实检查。

有多种使用方法，包括作为[Eclipse 插件](http://andrei.gmxhome.de/jdepend4eclipse/)。

# c# - 在 C# 中处理 Unicode 字符串的最佳实践是什么？

> ID：144397
> 
> 赞同：8
> 
> 时间：2008-09-27T20:28:18.287
> 
> 标签：c#, unicode

有人可以提供一些我在 C# 中处理 Unicode 字符串时应该注意的重要方面吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-27T21:53:37.817

请记住，C# 字符串是 Char、UTF-16 代码单元的序列。它们*不是*Unicode 代码点。一些 unicode 代码点需要两个字符，您不应该在这些字符之间拆分字符串。

此外，unicode 代码点可以组合形成单一语言“字符”——例如，“u”字符后跟 umlat 字符。因此，您也不能在任意代码点之间拆分字符串。

基本上，这是一堆乱七八糟的问题，任何给定的问题在实践中可能只会影响你不知道的语言。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-27T20:33:02.770

C#（和一般的 .Net）透明地处理 unicode 字符串，除非您的应用程序需要读取/写入具有特定编码的文件，否则您无需执行任何特殊操作。在这些情况下，您可以使用 System.Text.Encodings 命名空间中的类将托管字符串转换为您选择的编码的字节数组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-29T06:49:08.973

System.String 已经在内部处理了 unicode，因此您可以在其中进行处理。最佳做法是在读写文件时使用 System.Text.Encoding.UTF8Encoding。然而，它不仅仅是读取/写入文件，包括网络连接在内的任何流式传输数据都将取决于编码。如果您使用 WCF，大多数绑定将默认为 UTF8（实际上大多数绑定根本不允许使用 ASCII）。

UTF8 是一个不错的选择，因为虽然它仍然支持整个 Unicode 字符集，但对于大多数 ASCII 字符集来说，它具有字节相似性。因此，不支持 Unicode 的幼稚应用程序有一些机会读取/写入您的应用程序数据。只有当您开始使用扩展字符时，这些应用程序才会开始失败。

System.Text.Encoding.Unicode 将写入 UTF-16，即每个字符至少两个字节，使其更大且与 ASCII 完全不兼容。你可以猜到的 System.Text.Encoding.UTF32 仍然更大。我不确定 UTF-16 和 32 的实际用例，但是当您有大量扩展字符时，它们的性能可能会更好。这只是一个理论，但如果这是真的，那么日本/中国开发人员制作的产品主要用于这些语言可能会发现 UTF-16/32 是更好的选择。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T20:33:36.823

读写流时只考虑编码。使用 TextReader 和 TextWriters 以不同的编码读取和写入文本。如果可以选择，请始终使用 utf-8。

不要对语言和文化感到困惑——这是与 unicode 完全不同的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T20:34:09.303

.Net 有比较好的 i18n 支持。您实际上不需要考虑 unicode，因为所有 .Net 字符串和内置字符串函数都使用 unicode 做正确的事情。唯一要记住的是，大多数字符串函数，例如 DateTime.ToString()，默认使用线程的文化，默认情况下是 Windows 文化。您可以在当前线程或每个方法调用上为格式化指定不同的文化。

唯一一次 unicode 是一个问题是在编码/解码字符串到字节和从字节中解码时。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T16:26:25.647

如前所述，.NET 字符串透明地处理 Unicode。除了文件 I/O，另一个考虑因素是数据库层。例如，SQL Server 区分 VARCHAR（非 unicode）和 NVARCHAR（处理 unicode）。还需要注意存储过程的参数。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2009-02-09T04:58:49.310

可以在此线程上找到更多详细信息：

[http://discuss.joelonsoftware.com/default.asp?dotnet.12.189999.12](http://discuss.joelonsoftware.com/default.asp?dotnet.12.189999.12)

# java - 你知道一个好的 Java RSS/Feed 生成器吗？

> ID：144421
> 
> 赞同：5
> 
> 时间：2008-09-27T20:38:11.510
> 
> 标签：java, rss, generator, feed

我正在搜索一个基于**Java**的小型RSS/Feed 生成器，比如[FeedCreator.class.php](http://www.bitfolge.de/rsscreator-en.html)库，有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-27T20:52:27.433

还有罗马框架

[http://rometools.github.io/rome/](http://rometools.github.io/rome/)

RSS 和 Atom

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T20:45:01.990

[jRSS](http://jrss.sourceforge.net/)怎么样？它看起来很有希望——支持生成 RSS 2 并且相对较小。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-27T20:53:11.160

几年前我使用了一个名为[ROME](https://rome.dev.java.net/)的 API 。我认为设置并开始使用是一件轻而易举的事。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-27T20:55:03.607

我成功使用了[Informa](http://informa.sourceforge.net/)。如果您计划支持多个版本的 rss (0.9-2.0) 合理大小的库，则特别有用，有据可查。

[在http://java-source.net/open-source/rss-rdf-tools](http://java-source.net/open-source/rss-rdf-tools)可以找到一个非常完整的列表

# html - HTML中的可折叠下拉列表框

> ID：144425
> 
> 赞同：2
> 
> 时间：2008-09-27T20:40:54.387
> 
> 标签：html, css

是否有任何类型的免费控件可以执行[http://monster.ca](http://monster.ca)上的 Occupation 字段的功能？那是允许在带有可扩展部分的下拉框中对选项进行分组吗？我刚刚了解了[optgroup 标签](http://www.braintrove.com/article/18)，它与我想要的很接近，但并不完全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-27T20:47:31.143

它只是一个下拉控件的模型。
向下箭头是一个图像，所有其余部分都是由 div 组成的，下拉列表本身是一个带有溢出的大 div，其中包含许多使用 JavaScript 来管理所有这些的控件（如折叠部分）。

所以你可以自己做这件事，做一些工作，并从一个好的 JavaScript 框架中得到很多帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-27T22:40:31.963

基本上，Monster.ca 的开发人员正在做的是使用具有可滚动内容的 div 元素来模拟选择控件。

看看[“溢出” CSS-property](http://www.w3schools.com/Css/pr_pos_overflow.asp)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T21:30:28.607

您不能使用传统的 <select> 控件来做到这一点，而且我怀疑是否有现成的组件可以满足要求。如果您确实想自己制作，并且不想购买 extjs 或 dojo 之类的工具包（这可能会使构建它变得最容易），我可以推荐以下树形库，因为它使用起来非常简单和 BSD 许可：[http ://www.silverstripe.com/tree-control/](http://www.silverstripe.com/tree-control/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-29T02:22:39.207

试试这个，不确定界面是否适合您的目的：

[http://flooble.com/scripts/hier.php](http://flooble.com/scripts/hier.php)

# c - 以独立于语言的二进制格式序列化数据的最佳方法是什么？

> ID：144435
> 
> 赞同：16
> 
> 时间：2008-09-27T20:46:12.067
> 
> 标签：c, language-agnostic, serialization, asn.1

我正在研究一种用于序列化数据的机制，该机制以独立于语言的机制通过套接字或共享内存传递。我不愿意使用 XML，因为这些数据将非常结构化，并且编码/解码速度至关重要。拥有一个良好的自由许可的 C API 很重要，但理想情况下应该支持大量其他语言。我查看了[谷歌的协议缓冲区](http://code.google.com/apis/protocolbuffers/)和[ASN.1](http://en.wikipedia.org/wiki/ASN.1)。我在正确的轨道上吗？有更好的吗？我应该只实现自己的打包结构而不寻找一些标准吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-27T20:47:58.147

鉴于您的要求，我会选择 Google Protocol Buffers。听起来它非常适合您的应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T21:21:25.460

你可以考虑 XDR。它有一个[RFC](https://www.rfc-editor.org/rfc/rfc4506)。我已经使用过它，并且从未遇到过任何性能问题。它在 ONC RPC 中使用，并带有一个名为 rpcgen 的工具。当您只想序列化数据时，自己创建一个生成器也很容易（出于便携性原因，我最终这样做了，花了我半天时间）。有一个开源 C 实现，但它可能已经在系统库中，因此您不需要源代码。

ASN.1 对我来说总是有点巴洛克式的，但根据您的实际需要可能更合适，因为 XDR 有一些限制。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-29T17:12:19.553

只是想在这个组合中加入 ASN.1。ASN.1 是一种格式标准，但大多数语言都有库，通过[asn1c的](http://lionet.info/asn1c/)[C 接口比协议缓冲区](http://code.google.com/p/protobuf-c/)的 C 接口干净得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-27T23:14:11.977

JSON 真的是我最喜欢这类东西的地方。不过，我之前没有使用二进制文件的经验。如果您打算使用 JSON，请发布您的结果！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-27T23:46:44.113

[Thrift](http://developers.facebook.com/thrift/)是 Facebook 创建的二进制格式。 [这是](http://stuartsierra.com/2008/07/10/thrift-vs-protocol-buffers)与谷歌协议缓冲区的比较。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-27T20:49:14.790

看看[黑森州](http://hessian.caucho.com/doc/hessian-serialization.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-27T22:03:37.670

还有[二进制 XML](http://en.wikipedia.org/wiki/Binary_XML "维基百科中的二进制 XML")，但似乎还没有稳定下来。我链接到的文章提供了一堆可能感兴趣的链接。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2008-09-27T22:50:30.130

另一种选择是[SNAC/TLV](http://iserverd.khstu.ru/oscar/basic.html)，AOL 在其 Oscar/AIM 协议中使用它。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-28T00:12:13.850

还检查[肌肉](https://public.msli.com/lcs/muscle/index.html)。虽然它做了很多，但它序列化为二进制格式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-10T06:04:17.993

您需要考虑的几件事

```
1\. Storage
2\. Encoding Style (1 byte 2 byte)
3\. TLV standards 
```

ASN.1 解析器非常适合二进制表示，最好的部分是 ASN.1 是一种成熟的技术，在 ITU-T 内部和外部都广泛使用。许多软件供应商都支持这种表示法。

# c# - 在 C# 中从组件部分构建目录字符串

> ID：144439
> 
> 赞同：6
> 
> 时间：2008-09-27T20:49:25.117
> 
> 标签：c#, filesystems, string-building

如果我有很多目录名称作为文字字符串或包含在变量中，那么将它们组合成完整路径的最简单方法是什么？

我知道

```
路径组合
```

但这仅需要 2 个字符串参数，我需要一个可以采用任意数量的目录参数的解决方案。

例如：

```
字符串文件夹1 =“foo”；
字符串文件夹2 =“酒吧”；

CreateAPath("C:", folder1, folder2, folder1, folder1, folder2, "MyFile.txt")

```

有任何想法吗？C# 是否支持方法中的无限参数？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-27T20:50:46.267

> C# 是否支持方法中的无限参数？

是的，看看 params 关键字。可以很容易地编写一个只调用 Path.Combine 适当次数的函数，如下所示（未经测试）：

```
string CombinePaths(params string[] parts) {
    string result = String.Empty;
    foreach (string s in parts) {
        result = Path.Combine(result, s);
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-27T22:02:02.540

LINQ 再次进行救援。[聚合](https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.aggregate)扩展功能可用于完成您想要的。考虑这个例子：

```
string[] ary = new string[] { "c:\\", "Windows", "System" };
string path = ary.Aggregate((aggregation, val) => Path.Combine(aggregation, val));
Console.WriteLine(path); //outputs c:\Windows\System 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T22:04:33.003

与 Directory 上的静态方法相比，我更喜欢使用 DirectoryInfo，因为我认为它是更好的 OO 设计。这是一个使用 DirectoryInfo + 扩展方法的解决方案，我认为它非常好用：

```
 public static DirectoryInfo Subdirectory(this DirectoryInfo self, params string[] subdirectoryName)
    {
        Array.ForEach(
            subdirectoryName, 
            sn => self = new DirectoryInfo(Path.Combine(self.FullName, sn))
            );
        return self;
    } 
```

我不喜欢我正在修改的事实`self`，但是对于这个简短的方法，我认为它比创建一个新变量更干净。

不过，呼叫站点弥补了这一点：

```
 DirectoryInfo di = new DirectoryInfo("C:\\")
            .Subdirectory("Windows")
            .Subdirectory("System32");

        DirectoryInfo di2 = new DirectoryInfo("C:\\")
            .Subdirectory("Windows", "System32"); 
```

添加获取 FileInfo 的方法留作练习（对于另一个 SO 问题！）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T20:55:23.387

试试这个：

```
public static string CreateDirectoryName(string fileName, params string[] folders)
{
    if(folders == null || folders.Length <= 0)
    {
        return fileName;
    }

    string directory = string.Empty;
    foreach(string folder in folders)
    {
        directory = System.IO.Path.Combine(directory, folder);
    }
    directory = System.IO.Path.Combine(directory, fileName);

    return directory;
} 
```

参数使您可以附加无限数量的字符串。

Path.Combine 的作用是确保输入的字符串不以斜杠开头或结尾，并检查任何无效字符。

# python - Python PostgreSQL 模块。哪个最好？

> ID：144448
> 
> 赞同：27
> 
> 时间：2008-09-27T20:55:04.730
> 
> 标签：python, postgresql, module

我见过许多用于 python 的 postgresql 模块，如 pygresql、pypgsql、psyco。它们中的大多数都符合 Python DB API 2.0，有些不再积极开发。你推荐哪个模块？为什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-09-27T21:00:21.393

psycopg2 似乎是最受欢迎的。我从来没有遇到过任何麻烦。实际上，PostgreSQL 也有一个纯 Python 接口，称为[bpgsql](http://barryp.org/software/bpgsql/)。我不会在 psycopg2 上推荐它，但它最近变得足以支持 Django，如果你不能编译 C 模块，它很有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-10-11T10:06:27.087

我建议 Psycopg 优于 Psycopg2，因为第一个似乎更稳定。至少在我的经验中。我有一个 24/7 运行的应用程序，有时我会从 Psycopg2 收到随机内存崩溃（双重释放或损坏错误）。我无法快速或轻松地调试，因为它不是 Python 错误而是 C 错误。我刚刚切换到 Pyscopg，之后我没有遇到任何崩溃。

此外，正如在另一篇文章中所说，[bpgsql](http://barryp.org/software/bpgsql/)似乎是一个非常好的选择。它稳定且易于使用，因为您不需要编译它。唯一不好的一面是库不是线程安全的。

Pygresql 看起来不错，有一种更直接的方法可以使用这个库查询数据库。但我不知道这个有多稳定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-15T20:54:06.397

在过去的 3 年里，我使用 pg8000 没有任何问题。它是最新的，可在 pypi 上使用，适用于 python2 和 python3。您可以使用“pip install pg8000”快速获取它（如果您在防火墙后面，请不要忘记使用 --proxy=yourproxy:yourport）。

如果您担心线程安全，它还提供线程安全分数（参见： http: [//pybrary.net/pg8000/dbapi.html](http://pybrary.net/pg8000/dbapi.html)和[https://www.python.org/dev/peps/pep- 0249/](https://www.python.org/dev/peps/pep-0249/)用于定义不同级别的线程安全）（尽管我还没有使用 psql 的线程）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-11-01T17:22:26.847

根据我的经验，psycopg2 是最常用的库。就像你说的，它符合 DB API 2.0，它提供了一个可靠的接口来使用。

对于那些发现标准 API 有点过于冗长且难以使用的人，我制作了一个小型库，可能会有所帮助：

[https://github.com/hugollm/rebel](https://github.com/hugollm/rebel)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T13:04:17.877

Psycopg1 以在多线程环境（如 Web 应用程序）中比 Psycopg2 更好的性能而闻名，尽管没有维护。两者都写得很好并且坚如磐石，我会根据用例选择这两者之一。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-10-16T19:10:43.630

我只使用 psycopg2 并且对此没有任何问题。

# windows - 如何在 Delphi 中获取文件的创建/最后修改日期？

> ID：144453
> 
> 赞同：12
> 
> 时间：2008-09-27T20:57:18.670
> 
> 标签：windows, delphi, file

我想将这些属性作为整数值获取文件。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-27T21:03:12.837

尝试

```
function FileAge(const FileName: string; out FileDateTime: TDateTime): Boolean; 
```

来自 SysUtils。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2008-09-27T20:59:59.973

Delphians 倾向于喜欢这种`FindFirst`方法（`SearchRec`结构中有一些），但我建议使用 Win32 API 函数`GetFileAttributesEx`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2008-09-28T18:28:37.083

来自[DSiWin32](http://17slon.com/gp/gp/dsiwin32.htm)免费软件库：

```
function DSiFileTimeToDateTime(fileTime: TFileTime; var dateTime: TDateTime): boolean;
var
  sysTime: TSystemTime;
begin
  Result := FileTimeToSystemTime(fileTime, sysTime);
  if Result then
    dateTime := SystemTimeToDateTime(sysTime);
end; { DSiFileTimeToDateTime }

function  DSiGetFileTimes(const fileName: string; var creationTime, lastAccessTime,
  lastModificationTime: TDateTime): boolean; 
var
  fileHandle            : cardinal;
  fsCreationTime        : TFileTime;
  fsLastAccessTime      : TFileTime;
  fsLastModificationTime: TFileTime;
begin
  Result := false;
  fileHandle := CreateFile(PChar(fileName), GENERIC_READ, FILE_SHARE_READ, nil,
    OPEN_EXISTING, 0, 0);
  if fileHandle <> INVALID_HANDLE_VALUE then try
    Result :=
      GetFileTime(fileHandle, @fsCreationTime, @fsLastAccessTime,
         @fsLastModificationTime) and
      DSiFileTimeToDateTime(fsCreationTime, creationTime) and
      DSiFileTimeToDateTime(fsLastAccessTime, lastAccessTime) and
      DSiFileTimeToDateTime(fsLastModificationTime, lastModificationTime);
  finally
    CloseHandle(fileHandle);
  end;
end; { DSiGetFileTimes } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2008-09-30T16:32:19.670

这应该可以工作，而且它是本机 Delphi 代码。

```
function GetFileModDate(filename : string) : integer;
var
  F : TSearchRec;
begin
  FindFirst(filename,faAnyFile,F);
  Result := F.Time;
  //if you wanted a TDateTime, change the return type and use this line:
  //Result := FileDateToDatetime(F.Time);
  FindClose(F);
end; 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-18T10:03:09.173

```
function GetFileModDate(filename : string) : TDateTime;
var
   F : TSearchRec;
begin
   FindFirst(filename,faAnyFile,F);
   Result := F.TimeStamp;
   //if you really wanted an Int, change the return type and use this line:
   //Result := F.Time;
   FindClose(F);
end; 
```

F.Time 已被弃用，帮助文件显示使用 F.TimeStamp。
只是为了更新这个由于更高版本的Delphi

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-01-09T17:18:25.843

System.IOUtils 确实有一个 TFile 记录，其中包含几个用于获取文件年龄的函数，例如 GetCreationTime、GetLastAccessTime、GetLastWriteTime

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-27T21:02:53.663

您可以调用[GetFileInformationByHandle](http://msdn.microsoft.com/en-us/library/aa364952.aspx) winapi 函数。Aparently [JCL](http://homepages.codegear.com/jedi/jcl/)有一个 GetFileLastWrite 函数，你也可以使用

# c# - 如何以编程方式将 M4A 文件转换为 MP3 或 WMA 文件？

> ID：144466
> 
> 赞同：5
> 
> 时间：2008-09-27T21:00:44.373
> 
> 标签：c#, .net, mp3

问候，

我试图找到一个免费的 .NET 库或一个命令行可执行文件，它可以让我将 M4A 文件转换为 MP3 或 WMA 文件。请帮忙 ：）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-27T21:14:44.697

找到了！

[http://pieter.wigleven.com/it/archives/3](http://pieter.wigleven.com/it/archives/3)

可能还有其他解决方案，但这对于我正在寻找的东西来说是黄金。

PS 我写[了一个 .NET DLL](https://github.com/AlexeyMK/M4A-to-MP3--.net-)来处理这个幕后。这是非常糟糕的代码，但它完成了工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-21T09:31:15.360

如果您知道正确的工具，这很简单：

```
ffmpeg -i infile.m4a tmp.wav
lame tmp.wav outfile.mp3 
```

这是一个批处理版本（抱歉，仅限 Linux/Mac）：

```
#!/bin/bash

n=0
maxjobs=3

for i in *.m4a ; do
    ffmpeg -i "$i" "$TMP/${i%m4a}wav"
    (lame "$TMP/${i%m4a}wav" "${i%m4a}mp3" ; rm "$TMP/${i%m4a}wav") &

    # limit jobs
    if (( $(($((++n)) % $maxjobs)) == 0 )) ; then
        wait
    fi

done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-01-04T08:07:57.467

对于 UWP

```
public class ConvertToMp3Manager
{
    public PrepareTranscodeResult PrepareTranscode = null;
    public MediaTranscoder TransCoder = null;
    public StorageFile SourceAudio { get; set; }
    public StorageFile DestinationAudio { get; set; }
    public AudioFormat AudioFormat { get; set; }
    public AudioEncodingQuality AudioQuality { get; set; }
    private MediaEncodingProfile profile = null;
    public  ConvertToMp3Manager(StorageFile sourceAudio, StorageFile destinationAudio, AudioFormat AudioType = AudioFormat.MP3, AudioEncodingQuality audioEncodingQuality = AudioEncodingQuality.High)
    {
        if (sourceAudio == null || destinationAudio == null)
            throw new ArgumentNullException("sourceAudio and destinationAudio cannot be null");
        switch (AudioType)
        {
            case AudioFormat.AAC:
            case AudioFormat.M4A:
                profile = MediaEncodingProfile.CreateM4a(audioEncodingQuality);
                break;
            case AudioFormat.MP3:
                profile = MediaEncodingProfile.CreateMp3(audioEncodingQuality);
                break;
            case AudioFormat.WMA:
                profile = MediaEncodingProfile.CreateWma(audioEncodingQuality);
                break;
        }
        this.SourceAudio = sourceAudio;
        this.DestinationAudio = destinationAudio;
        this.AudioFormat = AudioType;
        this.AudioQuality = audioEncodingQuality;
        this.TransCoder = new MediaTranscoder();
    }
    /// <summary>
    /// Return true if audio can be transcoded
    /// </summary>
    /// <returns></returns>
    public async Task<bool> ConvertAudioAsync()
    {
        PrepareTranscode = await this.TransCoder.PrepareFileTranscodeAsync(this.SourceAudio, this.DestinationAudio, profile);
        if (PrepareTranscode.CanTranscode)
        {
            var transcodeOp = PrepareTranscode.TranscodeAsync();
            return true;
        }
        else
            return false;
    }
    public static async Task<bool> ConvertAudioAsync(StorageFile sourceAudio, StorageFile destinationAudio, AudioFormat AudioType = AudioFormat.MP3, AudioEncodingQuality audioEncodingQuality = AudioEncodingQuality.High)
    {
        ConvertToMp3Manager convertToMp3Manager = new ConvertToMp3Manager(sourceAudio, destinationAudio, AudioType, audioEncodingQuality);
        var success = await convertToMp3Manager.ConvertAudioAsync();
        return success;
    }
}
public enum AudioFormat
{
    MP3,
    AAC,
    M4A,
    WMA
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T22:00:32.777

有趣的。
您提供的链接指向命令行实用程序。
如果您真的想以编程方式执行此操作，您可能会对我在[Rarewares](http://www.rarewares.org/aac-decoders.php "Rarewares 的 AAC 解码器")找到的 DLL 版本感兴趣。不确定 API 描述是否附带... :-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-09T17:00:53.783

从[如何将媒体文件转换为 WMA 文件](http://alvas.net/alvas.audio,articles.aspx#how-to-convert-to-wma)

```
string fileName = @"e:\Down\test.wmv";
DsConvert.ToWma(fileName, fileName + ".wma", DsConvert.WmaProfile.Stereo128); 
```

# windows - 跟踪 Windows 注册表中的更改

> ID：144468
> 
> 赞同：47
> 
> 时间：2008-09-27T21:01:34.120
> 
> 标签：windows, registry

有没有办法跟踪 Windows 注册表的变化？我想看看在安装各种程序期间对注册表进行了哪些更改。

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2008-09-27T21:03:01.167

[Process Monitor](http://technet.microsoft.com/en-us/sysinternals/bb896645)允许您监视各种进程的文件和注册表活动。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-12-08T21:12:54.470

可以监视特定程序所做的注册表更改。

[https://www.nirsoft.net/utils/reg_file_from_application.html](https://www.nirsoft.net/utils/reg_file_from_application.html)

更新：只需下载 NirLauncher（其中包括来自 NirSoft 的所有应用程序）。它是 Windows 工具箱的最佳补充之一。 [https://launcher.nirsoft.net/](https://launcher.nirsoft.net/)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2008-09-28T14:21:08.707

关于 WMI 和注册表：

有关于注册表的三个 WMI 事件类：

*   RegistryTreeChangeEvent
*   RegistryKeyChangeEvent
*   注册表值更改事件

[注册表事件类](http://msdn.microsoft.com/en-us/library/aa393043%28VS.85%29.aspx)

但是您需要了解这些限制：

*   使用 RegistryTreeChangeEvent 和 RegistryKeyChangeEvent 无法直接判断哪些值或键实际更改了。为此，您需要保存事件之前的注册表状态并将其与事件之后的状态进行比较。

*   您不能将这些类与 HKEY_CLASSES_ROOT 或 HKEY_CURRENT_USER 配置单元一起使用。您可以通过创建一个 WMI 类来表示要监视的注册表项来克服这个问题：

[使用限定符定义注册表类](http://msdn.microsoft.com/en-us/library/aa389818%28VS.85%29.aspx)

并将其与 __InstanceOperationEvent 派生类一起使用。

因此使用 WMI 来监控注册表是可能的，但还不够完美。优点是可以“实时”监控变化。另一个优势可能是 WMI 永久事件订阅：

[随时接收事件](http://msdn.microsoft.com/en-us/library/aa393014%28VS.85%29.aspx)

一种“始终”监视注册表的方法，即。如果您的应用程序未运行，则事件。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2008-09-27T21:23:41.260

无需额外工具即可直接执行此操作的方法是在安装前将注册表导出到文本文件，然后在安装后将其导出到另一个文件。然后，比较这两个文件。

话虽如此，Sysinternals 工具对此非常有用。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-04-11T15:01:03.180

[Regshot](https://sourceforge.net/projects/regshot/)在这里值得一提。它扫描并拍摄所有注册表设置的快照，然后您稍后再次运行它以与原始快照进行比较，它会显示所有已更改的键和值。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2011-11-29T14:56:07.770

有一个名为 sobek ( [http://code.google.com/p/sobek-hids/](http://code.google.com/p/sobek-hids/) ) 的 python-hids 能够监控 SO 的某些部分。它对我监视文件更改工作正常，虽然文档说它能够监视注册表更改，但对我不起作用。

一款很好的软件，可以轻松播放基于 python 的隐藏。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2008-09-27T22:29:47.777

有几种不同的方法。如果您想自己动手做，WMI 可能是要走的路。`RegistryKeyChangeEvent`它的亲戚是值得一看的。可能有一种方法可以通过`__InstanceCreationEvent`,`__InstanceDeletionEvent`和`__InstanceModificationEvent`类来监视它。

[http://msdn.microsoft.com/en-us/library/aa393040(VS.85).aspx](http://msdn.microsoft.com/en-us/library/aa393040(VS.85).aspx)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-04T06:33:48.183

使用 VM 时，我使用以下步骤检查注册表更改：

1.  使用 7-Zip，打开 vdi/vhd/vmdk 文件并解压缩文件夹 C:\Windows\System32\config
2.  运行[OfflineRegistryView](https://www.nirsoft.net/utils/offline_registry_view.html)将注册表转换为明文
    *   将“配置文件夹”设置为您提取的文件夹
    *   将“基本密钥”设置为`HKLM\SYSTEM`或`HKLM\SOFTWARE`
    *   将“子键深度”设置为“无限制”
    *   按“开始”按钮

现在使用您最喜欢的差异程序来比较“之前”和“之后”的快照。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2008-09-27T21:14:16.587

我同意 Franci 的观点，所有 Sysinternals 实用程序都值得一看（Autoruns 也是必须的），而取代旧的 Filemon 和 Regmon 的 Process Monitor 也很珍贵。

除了您想要的用法之外，查看进程失败的原因（例如尝试访问不存在的文件或注册表项）等非常有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-10-11T09:43:37.290

PhiLho 顺便提到了[AutoRuns](http://technet.microsoft.com/en-us/sysinternals/bb963902.aspx)，但我认为它值得详细说明。

它不扫描整个注册表，只扫描包含对自动加载的事物（EXE、DLL、驱动程序等）的引用的部分，这可能是您感兴趣的。它不跟踪更改，但可以导出到文本文件，因此您可以在安装前后运行它并执行[diff](http://en.wikipedia.org/wiki/Comparison_of_file_comparison_tools)。

# java - Java：数组和向量

> ID：144474
> 
> 赞同：7
> 
> 时间：2008-09-27T21:03:06.363
> 
> 标签：java, arrays, data-structures, hashmap

我习惯于使用 PHP，但最近我一直在使用 Java，试图弄清楚这一点让我很头疼。我想用 Java 保存这个表示：

```
大批 （
        ["col_name_1"] => 数组 (
                               1 => [“col_value_1”]，
                               2 => ["col_value_2"],
                               ... ,
                               n => [“col_value_n”]
                          ),
        ["col_name_n"] => 数组 (
                               1 => [“col_value_1”]，
                               2 => ["col_value_2"],
                               ... ,
                               n => [“col_value_n”]
                          )
)

```

有没有一种干净的方法（即没有脏代码）在 Java 中保存这个东西？笔记; 我想使用字符串作为数组索引（在第一维中），我不知道数组的确定大小..

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2008-09-27T21:08:14.743

尝试使用`Map<String, List<String>>`. 这将允许您将字符串用作外部映射的键/索引，并获得作为值的字符串列表的结果。您可能希望将 a`HashMap`用于外部地图，将`ArrayList`'s 用于内部列表。

如果您想要一些类似于您提供的初始化 PHP 的干净代码，您可以执行以下操作：

```
Map<String, List<String>> columns = new HashMap<String, List<String>>() {{
    put("col_name_1", Arrays.asList("col_val_1", "col_val_2", "col_val_n"));
    put("col_name_2", Arrays.asList("col_val_1", "col_val_2", "col_val_n"));
    put("col_name_n", Arrays.asList("col_val_1", "col_val_2", "col_val_n"));
}}; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2008-09-27T21:15:19.487

您可以使用 Map 和 List （这两者都是以不止一种方式实现的接口，供您选择最适合您的情况的接口）。

有关更多信息，请查看[Map](http://java.sun.com/docs/books/tutorial/collections/interfaces/map.html)和[List](http://java.sun.com/docs/books/tutorial/collections/interfaces/list.html)教程，也许您应该从[Collections](http://java.sun.com/docs/books/tutorial/collections/)教程开始。

一个例子：

```
import java.util.*;

public class Foo {
    public static void main(String[] args) {
        Map<String, List<String>> m = new HashMap<String, List<String>>();
        List<String> l = new LinkedList<String>();
        l.add("col_value_1");
        l.add("col_value_2");
        //and so on
        m.put("col_name_1",l); //repeat for the rest of the colnames

       //then, to get it you do

       List<String> rl = m.get("col_name_1");

    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-27T21:07:21.970

你想要一个[Map](http://java.sun.com/j2se/1.5.0/docs/api/java/util/Map.html)，它几乎可以用任何东西作为键。[HashMap](http://java.sun.com/j2se/1.5.0/docs/api/java/util/HashMap.html)在大多数情况下都有效。

像这样的东西。

```
List<String> col1Vals = new java.util.ArrayList<String>();
col1Vals.add("col_value_1");
col1Vals.add("col_value_2");
Map<String, List<String>> map = new HashMap<String, List<String>>();
map.put("col_name_1", col1Vals); 
```

如果你想要更简单的东西，[commons-lang](http://commons.apache.org/collections/)库有一个[MultiMap](http://commons.apache.org/collections/api-release/org/apache/commons/collections/MultiMap.html)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-28T03:14:58.527

请注意，[Vector](http://java.sun.com/j2se/1.5.0/docs/api/index.html?java/util/Vector.html)是 Collections 框架的遗留代码。它同步对其元素的访问，这会降低性能。大多数使用 List 的用例不需要这种线程安全，即使你这样做了，我也会更倾向于使用[CopyOnWriteArrayList](http://java.sun.com/j2se/1.5.0/docs/api/index.html?java/util/concurrent/CopyOnWriteArrayList.html)。

# jquery - 如何使用 jQuery 注入表单值？

> ID：144477
> 
> 赞同：4
> 
> 时间：2008-09-27T21:04:42.943
> 
> 标签：jquery, asp.net-mvc

我正在使用 jQuery 表单和 ASP.NET MVC。ASP.NET MVC 预览版 5 在 HttpRequest 上调用了一个扩展方法`IsAjaxMvcRequest`，用于检测 POST 是否是 Ajax 请求。此扩展方法基本上“嗅探”一个名为的表单值`__MVCASYNCPOST`，并且（基本上）如果看到此元素则返回 true。

我想要做的是使用脚本（我不能使用隐藏字段，因为它违背了目的）将此值注入表单帖子中 - 我不知道如何使用 jQuery 来做到这一点。

这是我的代码：

```
<script type="text/javascript">
    $(document).ready(function() {

        $('#jform').submit(function() {
             //add a flag for asynch submit
             //" __MVCASYNCPOST
            $('#jform').ajaxSubmit({ target: '#results2' });

            return false;
        });
    });
</script> 
```

我真的应该知道如何做到这一点:) 但我不知道！此外 - 这里需要代码的经济性，因此更少的 LOC 受到赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-27T21:11:51.630

`ajaxSubmit()`接受`data`带有附加键值对的参数以发送。

* * *

此外，如果请求是 AJAX 请求，还有一种更好的方法来测试服务器端。jQuery 将 HTTP 标头设置`X-Requested-With`为`XMLHttpRequest`. 您可以更改扩展方法来测试它而不是自定义字段。

# linux - 你能推荐一个适用于 Linux 的 PostgreSQL 可视化数据库设计器吗？

> ID：144487
> 
> 赞同：7
> 
> 时间：2008-09-27T21:08:34.947
> 
> 标签：linux, database-design, postgresql, olap

当我在 Windows 中时，我使用**优秀的** [MicroOLAP](http://www.microolap.com/products/database/postgresql-designer/) Database Designer for PostgreSQL，但它不是开源的或多平台的。
您知道或可以向我推荐可以在 Linux 中使用的该软件的替代品吗？

*编辑：澄清一下，我不想用 wine 来模拟 PostgreSQL 的 MicroOlap，它工作得不太好，我更喜欢本机或基于 Java 的东西。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-10-01T06:55:50.483

[pgDesigner](http://pgdesigner.sourceforge.net/)是 PostgreSQL 的数据库设计应用程序，适用于 7.x 和 8.x 版本。

pgDesigner 提供以下功能：

*   完整的数据模型编辑器
*   支持 PostgreSQL 对象：表、视图、关系、表空间、过程、触发器、类型、域和序列
*   自动更新表之间的关系。
*   视图构建向导。
*   报告生成器，带有统计信息
*   打印图表
*   SQL 导出
*   数据库的创建
*   图表上的项目管理

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-27T21:18:39.070

几年前我停止使用软件数据库设计器，并恢复到可靠的笔和纸，根据我的经验，它更容易使用。

不过，要回答您的问题，请查看我以前使用的[dbDesigner4 。](http://fabforce.net/dbdesigner4/)我记得那太棒了。它是开源和多平台的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T21:31:11.443

[克莱](http://www.azzurri.jp/en/clay/index.html)呢？它是 Eclipse 的插件，免费版支持生成 Postgres DDL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T21:34:32.980

我真的很喜欢 dbWrench。它也是商业的，但并不昂贵，而且是基于 Java 的。它可以对数据库进行逆向工程并生成非常好的基于 HTML 的文档。

[http://www.dbwrench.com/](http://www.dbwrench.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T01:50:20.650

这是一个蹩脚的答案，我应该被淘汰出局，但你可以在[PgFoundry](http://pgfoundry.org/)搜索几乎所有与 PostgreSQL 相关的项目。我不知道 GUI 数据库设计工具，但我想你应该能够在那里找到一些东西，如果它存在的话。

# architecture - 数据访问层应该如何构建？

> ID：144503
> 
> 赞同：10
> 
> 时间：2008-09-27T21:16:55.160
> 
> 标签：architecture, data-access-layer

[我最初是按照这篇 codeproject 文章中概述](http://wwww.codeproject.com/KB/architecture/NHibernateBestPractices.aspx)的 s# 架构示例来设计我的系统的（不幸的是，我没有使用 NHibernate）。基本思想是，对于需要与持久层通信的每个域对象，您将在不同的库中拥有相应的数据访问对象。每个数据访问对象都实现一个接口，当域对象需要访问数据访问方法时，它总是针对接口进行编码，而不是针对 DAO 本身进行编码。

当时，我仍然认为这种设计非常灵活。然而，随着我的领域模型中对象数量的增加，我发现自己在质疑这里是否存在组织问题。例如，几乎域中的每个对象都以相应的数据访问对象和数据访问对象接口结束。不仅如此，而且每一个都位于不同的位置，如果我想做一些简单的事情，比如在一些命名空间周围移动，这将更难以维护。

有趣的是，这些 DAO（及其相应的接口）中的许多都是非常简单的生物——最常见的只有一个 GetById() 方法。我最终得到了一大堆对象，例如

```
public interface ICustomerDao {
  Customer GetById(int id);
}

public interface IProductDao {
  Product GetById(int id);
}
public interface IAutomaticWeaselDao {
  AutomaticWeasel GetById(int id);
} 
```

他们的实现者通常也很琐碎。这让我想知道朝不同的方向前进是否会更简单，也许通过为简单的数据访问任务设置一个对象来改变我的策略，并为那些需要更多东西的人保留专用数据访问对象的创建复杂。

```
public interface SimpleObjectRepository {
      Customer GetCustomerById(int id);
      Product GetProductById(int id);
      AutomaticWeasel GetAutomaticWeaselById(int id);
      Transaction GetTransactioinById(int id);
}
public interface TransactionDao {
  Transaction[] GetAllCurrentlyOngoingTransactionsInitiatedByASweatyGuyNamedCarl();
} 
```

有没有人对这样的架构有任何经验？总的来说，我对设置非常满意，因为现在我唯一关心的是管理所有这些小文件。但是，我仍然想知道还有哪些其他构建数据访问层的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-10-25T16:46:10.827

我建议不要使用简单系统以外的简单方法，通常我认为您最好为每个聚合创建一个自定义存储库，并在其中尽可能多地封装合适的逻辑。

所以我的方法是为每个需要它的聚合提供一个存储库，例如 CustomerRepository。这将有一个 Add（保存）方法，如果适用于该聚合，还有一个 Remove（删除）方法。它还将具有任何其他适用的自定义方法，包括查询（GetActive），也许其中一些查询可以接受规范。

这听起来需要付出很多努力，但除了自定义查询之外，至少如果您使用现代 ORM，大多数代码的实现非常简单，因此我使用继承（ReadWriteRepositoryBase where T: IAggregateRoot）和/或组合（调用到 RepositoryHelper 类）。基类可能具有适用于所有情况的方法，例如 GetById。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T21:41:17.097

我在 PHP 中工作，但我为我的数据访问层设置了类似的设置。我已经实现了一个看起来像这样的接口：

```
interface DataAccessObject
{
public static function get(array $filters = array(), array $order = array(), array $limit = array());
public function insert();
public function update();   
public function delete();
} 
```

然后我的每个数据访问对象都像这样工作：

```
class DataAccessObject implements DataAccessObject
{
    public function __construct($dao_id = null) // So you can construct an empty object
    {
        // Some Code that get the values from the database and assigns them as properties
    }
    public static function get(array $filters = array(), array $order = array(), array $limit = array()) {};  // Code to implement function
    public function insert() {};  // Code to implement function
    public function update() {};  // Code to implement function 
    public function delete() {};  // Code to implement function        
} 
```

我目前正在手动构建每个数据访问对象类，因此当我在数据库中添加表或修改现有表时，显然我必须手动编写新代码。就我而言，这仍然是我们的代码库的一大步。

但是，您也可以使用 SQL 元数据（假设您有一个利用外键约束等的相当完善的数据库设计）来生成这些数据访问对象。然后理论上，您可以使用单个父 DataAccessObject 类来构造该类的属性和方法，甚至可以自动建立与数据库中其他表的关系。这或多或少会完成您所描述的相同事情，因为您可以扩展 DataAccessObject 类，为需要大量手动构建代码的情况提供自定义方法和属性。

作为 .NET 开发的旁注，您是否查看过为您处理数据访问层的底层结构的框架，例如 Subsonic？如果没有，我建议只研究这样一个框架：[http](http://subsonicproject.com/) ://subsonicproject.com/ 。

或者对于 PHP 开发，诸如 Zend Framework 之类的框架将提供类似的功能： http: [//framework.zend.com](http://framework.zend.com)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-29T12:04:58.183

乔治 我很清楚你的感受。Billy 的架构对我来说很有意义，但是创建容器、Imapper 和映射器文件的需求很痛苦。然后，如果您使用 NHibernate 对应的 .hbm 文件，通常还有一些单元测试脚本来检查一切是否正常。

我假设即使您不使用 NHibernate，您仍然使用通用基类来加载/保存您的容器，即

```
public class BaseDAO<T> : IDAO<T> 
{
     public T Save(T entity)
     { 
       //etc......
     }
}
public class YourDAO : BaseDAO<YourEntity>
{
} 
```

我猜如果没有 NHibernate，您将使用反射或其他一些机制来确定要调用什么 SQL/SPROC？

不管怎样，我对此的想法是，DAO 只需要执行基类中定义的基本 CRUD 操作，那么就不需要编写自定义映射器和接口。我能想到的唯一方法是使用 Reflection.Emit 动态创建你的 DAO。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T21:40:36.070

我还在为我的 DAO 使用[存储库模式](http://martinfowler.com/eaaCatalog/repository.html)，对此我很满意。是的，你最终得到了很多小类，但它非常易于维护。如果您使用接口（LINQ），它会更强大。如果您有一个非常一致的数据库结构，`IQueriable`您也可以使用泛型（类似的东西）。`T GetById<T>(int id)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-29T12:12:00.243

第二种方法的主要缺点是单元测试——模拟像 SimpleObjectRepository 这样的大型工厂方法比模拟 ICustomerDao 需要更多的工作。但是，我的项目采用第二种方法来处理高度相关的对象（大多数将用于任何单元测试），因为它减轻了精神负担并使其更易于维护。

我会弄清楚是什么让您的系统更易于维护和易于理解并做到这一点。

# c# - 字典 或 NameValueCollection

> ID：144516
> 
> 赞同：6
> 
> 时间：2008-09-27T21:26:43.873
> 
> 标签：c#

我目前正在编写一个接口，以允许应用程序将异常数据发送到中央存储库以用于支持目的。我对如何传递额外的上下文数据感到困惑：

```
public interface IExceptionNotifier
{
    void Notify(Exception ex, NameValueCollection context); //this      
    void Notify(Exception ex, IDictionary<string, string> context); //or this
} 
```

在创建查找时，我经常发现自己处于类似的位置。忽略异常通知器概念是否好，最好使用`IDictionary<string, string>`or`NameValueCollection`吗？你为什么会选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-27T21:35:13.243

（假设这里是 .NET 3.5。在 .NET 3.5 之前，NameValueCollection 的好处是能够将多个值绑定到一个键，而在“正常”集合中没有直接等效项。）

您是否希望键具有潜在的多个值？如果是这样，我会考虑 ILookup<TKey, TValue>。否则，我会选择 IDictionary<TKey, TValue>。

除此之外，如果接收者想要在 LINQ 对他们有用的地方进行任何处理，那么任何一个通用接口都将比 NameValuePair 更好。同样，如果调用者已经拥有通用或动态类型的上下文，则调用者使用 LINQ 生成字典/查找可能会更容易。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-27T21:30:46.577

如果上下文是一次性值并且（重要的部分）将不会被序列化，例如将数据发送到另一个系统，我会使用 IDictionary，因为它使您的界面使用更加灵活。

另一方面，如果上下文一直保持或上下文将被序列化，请使用 NameValueCollection，因为这样您就可以控制从调用者那里实际获得的内容。

编辑：mausch 是正确的，你应该使用通用方法，但如果你想序列化数据，我仍然不会使用接口。

# user-interface - 刷新 Oldschool GUI 设计

> ID：144525
> 
> 赞同：4
> 
> 时间：2008-09-27T21:34:26.990
> 
> 标签：user-interface

我正在构建桌面软件已有 10 多年了，主要是简单的数据输入软件。我的问题是，它总是看起来一样：左侧的树视图和右侧的许多文本/数据字段，具体取决于当前正在处理的数据类型。有没有什么新鲜的想法，现在这样的软件应该是什么样子？

进一步澄清：这是非常分层的数据，主要用于电子设备。有些数据元素为设备提供静态设置，有些部分描述了设备的某种“程序”。有很多（超过 30 个）不同的输入掩码。当然，我使用组合框和向上/向下输入字段。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-27T21:47:23.307

让您的所有软件看起来都一样是一件*好事*。使人们更容易使用您的软件的最佳方法之一是使其看起来与您的用户已经知道如何使用的其他软件完全相同。

对于如何处理大量数据的输入，基本上有两种常见的策略。第一个是在一个页面上有很多数据输入字段。接下来是在一种向导式界面中只有几个数据输入字段但有很多页面。专家用户发现后者的使用速度要慢得多，一遍又一遍地输入数据的用户也是如此。但是，向导样式的界面对于新用户来说不太容易混淆，因为它一次提供的元素较少，并且倾向于提供更多关于它们的细节。

我确实建议用基于自动完成的组合框替换尽可能多的文本字段。这允许用户输入与文本框完全相同的数据，但也允许用户在输入部分数据后通过按下向下键滚动选项来保存输入。

提供有关正在输入的数据的更多详细信息可能会产生更具体的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-29T15:32:05.423

我也会回答一个问题，即问你考虑改变的动机是什么？像其他海报一样，我同意一致性有一定的价值，但不要忽视你内心深处的琐碎感受也很有价值。也许您觉得您的用户没有您希望的那样高效，或者您已经从客户那里听到了这种效果的反馈，或者您只是想为自己的兴趣添加一些创新。在我看来，抓痒是开发人员的一个好特质。

我提倡的一件事是进行详细的用户研究。您对用户使用您创建的界面做什么了解多少？您知道关键任务和整体工作流程吗？您是否知道一项任务是否经常占用用户 60% 的时间，或者是否有一项任务每月只执行一次？很好地了解用户实际做了什么（而不是他们说他们做了什么）是开始思考哪些改变可能值得的好地方，特别是如果你可以重构任务以获得不同质量的用户体验。

您可能希望在重新构想 UI 时包含的一些特定替代设计可能是分面浏览（适用于在层次结构中进行搜索和探索），或者构建默认/过去响应的数据库，以便文本框可以使用预测完成. 但是，我认为我的出发点是用户研究。

伊恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T21:52:46.617

如果有效...

根据您对数据的处理情况（即，它是分层的还是相当扁平的），您可能想要尝试基于选项卡的隐喻，或者可能是“Outlook 样式”，并带有显示部分的侧边栏的应用程序。我最近使用的另一个概念是我第一次看到由 Scott Ambler（构建有效的对象应用程序）提出的“对象桌面”。在此，您可以显示项目集合，或者用户可以“剥离”单个记录以便于访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T22:39:43.760

您的信息不足以真正建议您使用界面替代方案。但是，我可以用一个问题来回答你的问题吗？为什么你认为你必须改变它？你的客户投诉了吗？如果不是，您的客户似乎对软件现在的工作方式很满意，因此我不会更改它。如果您的客户抱怨它，他很可能不会只是说“这很糟糕”，他会说“为什么它看起来不像......”，这会给你一个如何改变它的想法。

我曾经不得不重新设计一个非常过时的商品管理系统。旧版本是为现在已死的数据库系统编写的，仍在 MS-DOS 中运行。客户建议我应该创建一个原型，这个重新实现的样子，然后他会决定我是否得到那份工作。我用现代 MySQL 数据库替换了旧的、死的数据库，我用客户端服务器方法替换了有问题的共享对等访问，我选择用 Java 重写 UI，因为使用了不同的操作系统并且移植成本最低。到目前为止，这个概念看起来不错，客户喜欢它。然而，当他问他的员工他们对此有何看法时，他们问“到目前为止它很棒，但我们有一个问题：为什么它看起来不像旧的？”。事实上，事实证明，即使拥有所有现代技术，他们希望界面看起来和操作起来就像旧的一样。所以我不得不用 Java 重新构建一个 1986 年可用性噩梦的 MS-DOS UI，因为没有其他 UI 被接受。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T22:44:33.827

对我来说，它更多的是关于一个干净、可用、合乎逻辑的设计。如果您的程序对用户有意义，不笨重并且像广告宣传的那样工作，那么与 UI 相关的所有其他内容基本上就像粉刷房子一样。我有时会推出一个新版本的程序，它具有基本相同的控件，但外观不同。

您可能选择树视图是有原因的——因为这样做可能非常有意义。不同的 UI 库中有不同的容器和控件可用，具体取决于语言，但我倾向于坚持熟悉的，因为用户可能会了解树形控件的工作方式和组合框的工作方式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-10-02T19:25:20.957

用户界面需要可用，只是不要因为看起来更好（一直走这条路）而错误地将某些东西更改为花哨的东西......

*   确保添加的小部件/控件确实增加了商业价值
*   确保添加的小部件/控件不会弄乱您的架构（太多）并使应用程序更难管理/维护
*   尽量保持关于如何做事的平台标准（例如[Vista ux 指南](http://msdn.microsoft.com/en-us/library/aa511258.aspx)）

:)

//W

# c# - == 或 .Equals()

> ID：144530
> 
> 赞同：71
> 
> 时间：2008-09-27T21:36:37.360
> 
> 标签：c#

为什么要使用一个而不是另一个？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2008-09-27T21:39:40.067

== 是身份测试。如果被测试的两个对象实际上是同一个对象，它将返回 true。`Equals()`执行相等测试，如果两个对象认为自己相等，则返回 true。

身份测试更快，因此您可以在不需要更昂贵的平等测试时使用它。例如，比较`null`或空字符串。

可以重载其中任何一个以提供不同的行为——比如身份测试`Equals()`——但是为了任何人阅读你的代码，请不要这样做。

* * *

下面指出：某些类型喜欢`String`或为运算符`DateTime`提供重载，`==`使其具有相等语义。因此，确切的行为将取决于您正在比较的对象的类型。

* * *

也可以看看：

*   [http://blogs.msdn.com/csharpfaq/archive/2004/03/29/102224.aspx](http://blogs.msdn.com/csharpfaq/archive/2004/03/29/102224.aspx)

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2008-09-27T22:19:40.157

@约翰米利金：

> 下面指出：某些值类型（如 DateTime）为 == 运算符提供重载 > 赋予它相等语义。因此，确切的行为将取决于您要比较的 >objects 的类型。

详细说明：

DateTime 作为结构实现。所有结构都是 System.ValueType 的子级。

由于 System.ValueType 的子对象位于堆栈上，因此没有指向堆的引用指针，因此无法进行引用检查，您必须仅按值比较对象。

System.ValueType 覆盖 .Equals() 和 == 以使用基于反射的相等检查，它使用反射来比较每个字段的值。

因为反射有点慢，如果你实现自己的结构，重要的是重写 .Equals() 并添加你自己的值检查代码，因为这会快得多。不要只调用 base.Equals();

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2008-09-27T21:56:40.027

其他人几乎都涵盖了你，但我还有一点建议。`.Equals`时不时地，你会得到一个更有效/更好/最佳实践或其他教条路线的人发誓他的生活（以及他所爱的人的生活） 。我不能谈论效率（好吧，在某些情况下我可以），但我可以谈论一个会突然出现的大问题：`.Equals`需要一个对象存在。（听起来很愚蠢，但它会让人们失望。）

您不能执行以下操作：

```
StringBuilder sb = null;
if (sb.Equals(null))
{
    // whatever
} 
```

对我来说，也许对大多数人来说，很明显你会得到一个`NullReferenceException`. 然而，支持者`.Equals`忘记了那个小事实。当他们看到 NullRefs 开始弹出时，有些人甚至被“抛出”（抱歉，无法抗拒）。

（在[DailyWTF](http://thedailywtf.com/Articles/SkillsEquals(null).aspx)发布之前的几年，我确实与一个**要求**所有平等检查都不`.Equals`是`==`.方法或属性永远为空，最终解决了。）

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2008-09-27T21:41:15.383

== 通常是“身份”等于意味着“对象a实际上与对象b在内存中是完全相同的对象”。

equals() 表示对象在逻辑上相等（例如，从业务角度来看）。因此，如果您要比较用户定义类的实例，如果您希望像 Hashtable 这样的东西正常工作，您通常需要使用和定义 equals()。

如果您有众所周知的具有“名称”和“地址”属性的 Person 类，并且您想将此 Person 用作包含有关它们的更多信息的 Hashtable 的键，则需要实现 equals()（和哈希），以便您可以创建一个 Person 的实例并将其用作 Hashtable 的键以获取信息。

单独使用 ==，您的新实例将*不*一样。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-27T21:42:10.310

根据[MSDN](https://docs.microsoft.com/en-us/previous-versions/ms173147(v=vs.90))：

*在 C# 中，有两种不同的相等性：引用相等（也称为身份）和值相等。值相等是相等的一般理解含义：它意味着两个对象包含相同的值。例如，两个值为 2 的整数值相等。引用相等意味着没有两个对象可以比较。相反，有两个对象引用，它们都引用同一个对象。*

...

*默认情况下，运算符 == 通过确定两个引用是否指示同一个对象来测试引用是否相等。*

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-01T20:03:45.977

两者`Equals`和`==`都可以重载，因此调用其中一个或另一个的确切结果会有所不同。请注意，这`==`是在编译时确定的，因此虽然实际的实现可能会发生变化，但`==`使用的是在编译时固定的，不像`Equals`它可以根据左侧的运行时类型使用不同的实现。

例如`string`对`==`.

另请注意，两者的语义可能很[复杂](http://blogs.msdn.com/b/ericlippert/archive/2009/04/09/double-your-dispatch-double-your-fun.aspx)。

最佳实践是像这个例子一样实现平等。请注意，您可以根据您计划如何使用您`struct`的课程来简化或排除所有这些，并且已经获得了大部分内容。

```
class ClassName
{
    public bool Equals(ClassName other)
    {
        if (other == null)
        {
            return false;
        }
        else
        {
            //Do your equality test here.
        }
    }

    public override bool Equals(object obj)
    {
        ClassName other = obj as null; //Null and non-ClassName objects will both become null
        if (obj == null)
        {
            return false;
        }
        else
        {
            return Equals(other);
        }
    }

    public bool operator ==(ClassName left, ClassName right)
    {
        if (left == null)
        {
            return right == null;
        }
        else
        {
            return left.Equals(right);
        }
    }

    public bool operator !=(ClassName left, ClassName right)
    {
        if (left == null)
        {
            return right != null;
        }
        else
        {
            return !left.Equals(right);
        }
    }

    public override int GetHashCode()
    {
        //Return something useful here, typically all members shifted or XORed together works
    }
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-27T21:53:47.693

该示例是因为 DateTime 类实现了 IEquatable 接口，该接口实现了“用于确定实例相等性的特定于类型的方法”。根据[MSDN](https://docs.microsoft.com/en-us/dotnet/api/system.iequatable-1)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-27T21:54:11.920

要考虑的另一件事：如果您从另一种语言访问对象， == 运算符可能不可调用或可能具有不同的含义。通常，最好有一个可以按名称调用的替代方法。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2008-09-27T21:40:56.960

如果要表示比较的对象的内容应该相等，请使用equals。将 == 用于原始值，或者如果您想检查被比较的对象是否是同一个对象。For objects == 检查对象的地址指针是否相同。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-10-16T02:47:55.927

我已经看到 Object.ReferenceEquals() 在想知道两个引用是否引用同一个对象的情况下使用

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2017-12-18T16:08:31.187

在大多数情况下，它们是相同的，因此为了清楚起见，您应该使用 ==。根据 Microsoft 框架设计指南：

“**务必**确保 Object.Equals 和相等运算符具有完全相同的语义和相似的性能特征。” [https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/equality-operators](https://docs.microsoft.com/en-us/dotnet/standard/design-guidelines/equality-operators)

但有时，有人会在不提供相等运算符的情况下覆盖 Object.Equals。在这种情况下，您应该使用 Equals 来测试值是否相等，并使用 Object.ReferenceEquals 来测试引用是否相等。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-06-16T08:27:53.417

如果你对 Object 进行反汇编（例如通过 dotPeek），那么

```
public virtual bool Equals(Object obj) 
```

被描述成：

```
// Returns a boolean indicating if the passed in object obj is
// Equal to this.  Equality is defined as object equality for reference
// types and bitwise equality for value types using a loader trick to
// replace Equals with EqualsValue for value types). 
// 
```

所以，取决于类型。例如：

```
 Object o1 = "vvv";
        Object o2 = "vvv";
        bool b = o1.Equals(o2);

        o1 = 555;
        o2 = 555;
        b = o1.Equals(o2);

        o1 = new List<int> { 1, 2, 3 };
        o2 = new List<int> { 1, 2, 3 };
        b = o1.Equals(o2); 
```

第一次 b 为真（对值类型执行相同），第二次 b 为真（对值类型执行相同），第三次 b 为假（对引用类型执行相同）。

# .net - StringCollection 还是对象容器？

> ID：144533
> 
> 赞同：2
> 
> 时间：2008-09-27T21:38:34.810
> 
> 标签：.net, api

我最近构建了一个 API，并且经常被要求用包含单个属性的对象替换我返回的 StringCollections，原因是它更容易与 ASP.Net 中的列表视图或其他控件绑定。

由于 API 被 Web 应用程序、Web 服务和数据加载器使用，我决定将 StringCollection 作为我的返回类型。

这些方法返回组或报告名称的标签。

我做了正确的选择吗？在这种情况下，你如何去证明你的选择是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-27T21:47:31.263

我认为您不应该仅仅为了满足数据绑定模块的限制而使您的 API 比所需的更复杂。

但是您也许可以为 StringCollection 提供一个包装类，使其适应数据绑定模块的需求？

编辑：这个包装器应该被认为是数据绑定层的一部分，而不是你的数据 API，因为它是专门为适应数据绑定模块而创建的。它与您的数据的其他消费者无关（如果我正确理解您的描述）。

# wpf - 有哪些好的 WPF 网格控件？

> ID：144537
> 
> 赞同：5
> 
> 时间：2008-09-27T21:40:35.493
> 
> 标签：wpf

我们在工作中使用 Infragistics 的网格控件。还有其他人吗？付费还是免费？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2008-09-28T02:28:05.147

[免费 DataGrid(.NET3.5 SP1) 在 CodePlex](http://www.codeplex.com/wpf/Release/ProjectReleases.aspx?ReleaseId=14963)

请参阅此线程中有关 DataGrid 的答案。

*   [DataGrid 是 WPF 中的必需品吗？](https://stackoverflow.com/questions/128414/is-datagrid-a-necessity-in-wpf)
*   [哪些 WPF Datagrid 控件值得花钱和/或付出努力？](https://stackoverflow.com/questions/112518/what-wpf-datagrid-controls-are-worth-the-money-andor-effort)
*   [WPF最好的*免费数据网格是什么？*](https://stackoverflow.com/questions/127647/what-is-the-best-free-datagrid-for-wpf)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2008-09-27T22:03:16.657

我会选择第二个 Telerik，这是 MS 用于办公室的 IIRC。我不知道他们是否已经使用 WPF，但他们有良好的记录。我也是[DevExpress](http://www.devexpress.com/Products/NET/Controls/WPF/Grid/)的粉丝，他们的支持很棒，但 wpf 网格仍处于测试阶段。不过，普通的很棒。不过，这两个都是有偿的，但值得。

我从来没有找到一个好的免费网格。猜他们太难写了。wpf 是多么...有趣，我怀疑永远不会有一个好的免费的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-27T22:38:27.053

Xceed 也有一个[用于 WPF 的 DataGrid](http://xceed.com/Grid_WPF_Intro.html)。这是合理的，并且有一套很好的功能。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-27T21:46:37.397

Telerik 通常是一个不错的选择：[RadGrid](http://www.telerik.com/products/wpf/controls/radgridview/overview.aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-27T21:45:50.457

我开始使用 Infragistics 控件，它也很棒而且非常强大，但是它很难使用，因为它的功能非常广泛。我对 ComponentOne 也有同样的感觉。我已经从 Microsoft 切换到 DataGrid CPT，并且我已经取得了很大的成功。显然它在这一点上不像其他第三部分控件那样丰富，但总的来说我真的很好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-28T18:44:30.307

试试 XCeed Grid ( [http://xceed.com/Grid_WPF_Demo.html](http://xceed.com/Grid_WPF_Demo.html) )。它还有一个很好的演示页面，您可以在其中看到它的功能。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-10-02T06:13:13.527

我们可能比任何人都更广泛地使用 Xceed 的 3.0 DataGrid（专业版..但免费版非常好）。与其他网格相比，它具有处理更多事情的灵活性......当然在我看来。

全部尝试，每个都有限制。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2011-10-24T18:26:09.400

绝对是[WPF 的 Xceed DataGrid](http://xceed.com/Grid_WPF_Demo.html)，在这里查看他们的在线演示：http: [//xceed.com/Grid_WPF_Demo.html](http://xceed.com/Grid_WPF_Demo.html)

# ruby - 你有什么策略来保持低内存使用？

> ID：144542
> 
> 赞同：29
> 
> 时间：2008-09-27T21:41:33.183
> 
> 标签：ruby, memory-management, garbage-collection

[Ruby](http://www.ruby-lang.org)真的很需要内存——但也值得每一点。

您如何保持低内存使用率？您是否避免使用大字符串并使用较小的数组/散列，或者您不必担心并让垃圾收集器完成这项工作？

**编辑：我在**[这里](http://gnomecoder.wordpress.com/2007/10/02/rubys-garbage-collection-problem/)找到了一篇关于这个主题的好文章- 旧但仍然很有趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-28T03:17:01.923

我发现 Phusion 的 Ruby 企业版（主线 Ruby 的一个分支，具有很大改进的垃圾收集）在内存使用方面产生了巨大的差异......另外，它们使它非常容易安装（如果你想删除，找到需要）。

您可以在[他们的网站](http://www.rubyenterpriseedition.com/)上找到更多信息并下载。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-28T03:24:13.373

我真的不认为这很重要。降低代码的可读性以减少内存消耗是您只有在**需要**时才应该做的事情。所谓需要，我的意思是有一个**特定**的性能配置文件和 **特定指标**，表明任何更改都将解决问题。

如果您的应用程序内存将成为限制因素，那么 Ruby 可能不是最佳选择。也就是说，我发现我的 Rails 应用程序通常每个 Mongrel 实例消耗大约 40-60mb 的 RAM。在事情的计划，这不是很多。

您也许可以使用 JRuby 在 JVM 上运行您的应用程序 - Ruby VM 目前在内存管理和垃圾收集方面不如 JVM 先进。1.9 版本增加了许多改进，并且还有其他 VM 正在开发中。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2008-09-28T13:00:10.337

1.  选择有效表示、良好扩展并做您需要的日期结构。
2.  使用使用高效数据结构而不是臃肿但更简单的算法。
3.  看看别的地方。Ruby 有一个 C 桥，在 C 中比在 Ruby 中更容易实现内存意识。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-12-07T07:31:27.553

Ruby 开发人员非常幸运，因为他们不必自己管理内存。

请注意，ruby 分配对象，例如像这样简单的东西

```
100.times{ 'foo' } 
```

分配 100 个字符串对象（字符串是可变的，每个版本都需要自己的内存分配）。

确保如果您正在使用分配大量对象的库，则其他替代方案不可用，并且您的选择值得支付垃圾收集器的成本。（您可能没有很多请求/秒，或者每个请求可能不关心几十毫秒）。

例如，创建一个哈希对象实际上分配的不仅仅是一个对象

`{'joe' => 'male', 'jane' => 'female'}`

不分配 1 个对象，而是 7 个。（一个哈希，4 个字符串 + 2 个键字符串）

如果您可以使用符号键，因为它们不会被垃圾收集。但是，由于它们不会被垃圾收集，因此您要确保不使用完全动态的键，例如将用户名转换为符号，否则您将“泄漏”内存。

**示例：**在您的应用程序的某处，您将 to_sym 应用于用户名，例如：

```
hash[current_user.name.to_sym] = something 
```

当你有数百个用户时，这可能没问题，但如果你有 100 万个用户会发生什么？以下是数字：

```
ruby-1.9.2-head >
# Current memory usage : 6608K
# Now, add one million randomly generated short symbols
ruby-1.9.2-head > 1000000.times { (Time.now.to_f.to_s).to_sym }

# Current memory usage : 153M, even after a Garbage collector run.

# Now, imagine if symbols are just 20x longer than that ?
ruby-1.9.2-head > 1000000.times { (Time.now.to_f.to_s * 20).to_sym }
# Current memory usage : 501M 
```

请注意，之前不要在符号中转换非受控参数或检查参数，这很容易导致拒绝服务。

还要记住避免嵌套循环超过三层，因为它使维护变得困难。将循环和函数的嵌套限制在三个或更少级别是保持代码高性能的一个很好的经验法则。

以下是一些相关的链接：

[http://merbist.com](http://merbist.com/2010/07/29/object-allocation-why-you-should-care/)

[http://blog.monitis.com](http://blog.monitis.com/index.php/2012/02/08/20-ruby-performance-tips/)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-04T10:16:04.977

1.  部署 Rails/Rack webapp 时，使用 REE 或其他一些写时复制友好的解释器。
2.  调整垃圾收集器（例如参见[https://www.engineyard.com/blog/tuning-the-garbage-collector-with-ruby-1-9-2 ）](https://www.engineyard.com/blog/tuning-the-garbage-collector-with-ruby-1-9-2)
3.  尝试减少您使用的外部库/gem 的数量，因为额外的代码会使用内存。
4.  如果您的应用程序的一部分确实是内存密集型的，那么可能值得在 C 扩展中重写它或通过调用其他/更快/更好优化的程序来完成它（如果您必须处理大量文本数据，也许您可以用对 grep、awk、sed 等的调用替换该代码）

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2008-09-27T21:56:15.610

我不是 ruby​​ 开发人员，但我认为某些技术和方法适用于任何语言：

使用适合作业的最小大小变量
不使用时销毁并关闭变量和连接
但是，如果您有一个需要多次使用的对象，请考虑将其保持在范围内 任何带有大字符串操作的循环 dp 上的工作较小的字符串，然后附加到较大的字符串

使用体面的（try catch finally）错误处理来确保对象和连接被关闭

处理数据集时只返回必要的最小值

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2008-09-28T03:23:27.963

除了在极端情况下，无需担心内存使用情况。您尝试减少内存使用所花费的时间将购买大量*千兆*字节。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-28T13:10:08.473

看看[Small Memory Software - Patterns for Systems with Limited Memory](http://www.cix.co.uk/~smallmemory/)。你没有指定什么样的内存限制，但我假设是 RAM。虽然不是 Ruby 特有的，但我想你会在本书中找到一些有用的想法——模式涵盖 RAM、ROM 和二级存储，并分为小型数据结构、内存分配、压缩、二级存储和小型数据结构等主要技术。建筑学。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-29T01:59:03.367

我们所拥有的唯一真正值得担心的是 RMagick。

解决方案是确保您使用的是 RMagick 版本 2，并在使用完[`Image#destroy!`](http://www.imagemagick.org/RMagick/doc/image1.html#destroy_bang)图像后调用

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-10-02T07:04:52.077

避免这样的代码：

```
str = ''
veryLargeArray.each do |foo|
  str += foo
  # but str << foo is fine (read update below)
end 
```

这会将每个中间字符串值创建为 String 对象，然后在下一次迭代中删除其唯一引用。这会用大量越来越长的字符串来垃圾内存，这些字符串必须被垃圾收集。

相反，使用`Array#join`：

```
str = veryLargeArray.join('') 
```

这在 C 中非常有效地实现，并且不会产生 String 创建开销。

更新：乔纳斯在下面的评论中是正确的。我的警告适用于`+=`但不适用`<<`。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-27T21:57:07.903

我是 Ruby 的新手，但到目前为止，我还没有发现有必要在这方面做任何特别的事情（也就是说，超出了我作为程序员通常倾向于做的事情）。也许这是因为内存比认真优化它所花费的时间要便宜（我的 Ruby 代码在具有 4-12 GB RAM 的机器上运行）。这也可能是因为我使用它的工作不是长期运行的（即它将取决于您的应用程序）。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-10-02T07:27:46.157

我正在使用 Python，但我想这些策略是相似的。

我尝试使用小函数/方法，以便当您返回调用者时，局部变量会自动被垃圾收集。

在较大的函数/方法中，当不再需要大型临时对象（如列表）时，我会显式删除它们。尽早关闭资源也可能有所帮助。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-12-09T01:45:09.197

要记住的是对象的生命周期。如果你的对象没有被传递那么多，垃圾收集器最终会启动并释放它们。但是，如果您继续引用它们，垃圾收集器可能需要一些周期才能释放它们。在 Ruby 1.8 中尤其如此，其中垃圾收集器使用的标记和清除技术的实现很差。

当您尝试应用一些“设计模式”（如装饰器）将对象长时间保存在内存中时，您可能会遇到这种情况。孤立地尝试示例时可能并不明显，但在同时创建数千个对象的实际应用程序中，内存增长的成本将是巨大的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2012-12-09T05:58:52.727

如果可能，请使用数组而不是其他数据结构。当整数可以使用时，尽量不要使用浮点数。

使用 gem/library 方法时要小心。它们可能没有经过内存优化。例如，Ruby PG::Result 类有一个未优化的方法“values”。它将使用大量额外的内存。我还没有报告这个。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2012-12-31T10:58:51.547

将 malloc(3) 实现替换为[jemalloc](http://www.canonware.com/jemalloc/)将立即将内存消耗减少多达 30%。我创建了“jemalloc”gem 来立即实现这一目标。

*   ['jemalloc' GEM：在 3 分钟内将 jemalloc(3) 注入您的 Ruby 应用程序](http://kzk9.net/je-gem-instant-perf-improvement-and-memory-us)

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2008-09-28T12:47:51.460

我尽量保持数组、列表和数据集尽可能小。单个对象无关紧要，因为在大多数现代语言中创建和垃圾收集都非常快。

如果您必须从数据库中读取某种巨大的数据集，请确保以正向/仅方式读取并进行少量处理，而不是先将所有内容加载到内存中。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2011-11-22T23:24:37.897

不要使用很多符号，它们会保留在内存中，直到进程被杀死。这是因为符号永远不会被垃圾收集。

# c# - SQL Server：动态 where 子句

> ID：144550
> 
> 赞同：5
> 
> 时间：2008-09-27T21:47:31.280
> 
> 标签：c#, sql-server, performance

**问题：**

Ajax 建议搜索食谱中的 [ *n* ] 成分。那就是：将食谱与多种成分相匹配。

例如：`SELECT Recipes using "flower", "salt"`会产生：`"Pizza", "Bread", "Saltwater"`等等。

**表：**

```
Ingredients [
    IngredientsID INT [PK],
    IngredientsName VARCHAR
]

Recipes [
    RecipesID INT [PK],
    RecipesName VARCHAR
]

IngredientsRecipes [
    IngredientsRecipesID INT [PK],
    IngredientsID INT,
    RecipesID INT
] 
```

**询问：**

```
SELECT
    Recipes.RecipesID,
    Recipes.RecipesName,
    Ingredients.IngredientsID,
    Ingredients.IngredientsName
FROM
    IngredientsRecipes

    INNER JOIN Ingredients
    ON IngredientsRecipes.IngredientsID = Ingredients.IngredientsID

    INNER JOIN Recipes
    ON IngredientsRecipes.RecipesID = Recipes.RecipesID
WHERE
    Ingredients.IngredientsName IN ('salt', 'water', 'flower') 
```

`WHERE`由于子句的动态特性，我目前正在使用 ASP.NET C# 构建我的查询。

我咬到我必须在我的代码层中构建查询，而不是使用存储过程/纯 SQL，理论上应该更快。

你们对我如何将所有逻辑从我的代码层移动到纯 SQL 有任何想法，或者至少我如何优化我正在做的事情的性能？

我正在考虑临时表的思路：

**第一步**：`SELECT IngredientsID FROM Ingredients`和`INSERT INTO temp-table`

**第二步**：`SELECT RecipesName FROM Recipes`加入与`IngredientsRecipes`加入`temp-table.IngredientsID`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-27T22:14:03.697

你有两个选择。如果您使用的是 SQL Server 2008（或 Oracle），则可以传入[表值参数](http://www.sqlteam.com/article/sql-server-2008-table-valued-parameters)。

如果您使用的是 SQL Server 2005，则可以使用[XML 来模拟此功能](http://weblogs.asp.net/jgalloway/archive/2007/02/16/passing-lists-to-sql-server-2005-with-xml-parameters.aspx)

如果您使用早于 2005 年的东西，则需要将 id 连接到一个字符串中并创建一个 UDF 来解析它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T22:26:07.567

您至少可以参数化 where 子句以避免 SQL 注入，类似的东西：

```
using System.Data;
using System.Data.SqlClient;
using System.Text;

class Foo
{
    public static void Main ()
    {
        string[] parameters = {"salt", "water", "flower"};
        SqlConnection connection = new SqlConnection ();
        SqlCommand command = connection.CreateCommand ();
        StringBuilder where = new StringBuilder ();
        for (int i = 0; i < parametes.Length; i++)
        {
            if (i != 0)
                where.Append (",");
            where.AppendFormat ("@Param{0}", i);
            command.Parameters.Add (new SqlParameter ("Param" + i, parameters [i]));
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-27T22:05:25.823

根据您处理输入成分的方式，我认为这种当前方法存在一些 sql 注入风险。

您可以将成分名称附加到可能更快的连接条件中。

您还可以对收据的成分组合进行哈希处理，以便快速查找。

# computer-science - 声音流中的单词识别技术有哪些？

> ID：144555
> 
> 赞同：3
> 
> 时间：2008-09-27T21:53:05.557
> 
> 标签：computer-science, theory, speech-recognition

我对此很好奇。

从广义上讲，如何进行以下操作：

*   单词分离的检测。
*   音节检测。
*   补偿正常的语音单词连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-27T22:02:25.767

直到现在，这仍然是广泛研究的主题。人们通常会根据您将要识别的语言的语言分析开始构建模型，并检测单词分离和音节的所有情况。然后主要使用隐马尔可夫模型对信号进行识别。

以下是一些参考资料，可能会给您一些更好的想法：

[http://lands.let.kun.nl/literature/eric.2004.2.pdf](http://lands.let.kun.nl/literature/eric.2004.2.pdf)

[http://www.asel.udel.edu/icslp/cdrom/vol4/778/a778.pdf](http://www.asel.udel.edu/icslp/cdrom/vol4/778/a778.pdf)

[http://en.wikipedia.org/wiki/Speech_segmentation](http://en.wikipedia.org/wiki/Speech_segmentation)

# c# - 指定 ArrayList 元素的类型

> ID：144570
> 
> 赞同：4
> 
> 时间：2008-09-27T21:59:14.170
> 
> 标签：c#, .net, generics

我认为.net 3.0 中有某种方法可以为数组列表提供一个类型，这样它就不会只返回 Object，但我在这样做时遇到了麻烦。是否可以？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-27T22:00:51.093

`List<T>`在 .NET 2.0 中引入了泛型：

```
using System.Collections.Generic;

var list = new List<int>();
list.Add(1);
list.Add("string"); //compile-time error!
int i = list[0]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T22:00:46.427

您可能正在寻找`<T>`自 .NET 2.0 起可用的 List ，或 System.Collections.Generic 或 System.Collections.ComponentModel 提供的任何其他泛型类型。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2008-09-27T22:08:44.443

如果您必须使用 ArrayList 并且无法开始使用 List，并且您知道该 ArrayList 中每个元素的类型，您可以执行以下操作：

```
 string[] stringArray = myArrayList.ToArray(typeof(string)) as string[]; 
```

如果 myArrayList 中的某些内容不是字符串，在这种情况下，您将收到 InvalidCastException。

如果可以的话，我会开始使用提到的 OregonGhost 列表。

# c++ - Windows C++ 对话框调整器类

> ID：144583
> 
> 赞同：7
> 
> 时间：2008-09-27T22:03:22.723
> 
> 标签：c++, windows, mfc, dialog, resize

我正在寻找一个非常好的对话框调整器类，它可以在调整屏幕大小时根据需要拉伸和收缩各个项目。Stephan Keil 有一个很好的 (DlgResizeHelper)，它基本上可以按设定的比例调整所有内容的大小，但我正在寻找更智能的东西。

例如：

*   图标不应调整大小

*   单行文本框不应垂直拉伸

*   按钮应该保持相同的大小

基本上我正在寻找一些东西来查看所有控件，找出一个静态文本字段与它旁边/下方的控件相关并将两者锚定在一起，并以“智能”方式调整大型控件的大小，使其看起来好的。

有这样的框架吗？我一直在做一个，但现成的东西可能会更好。

跟进：我正在查看建议的解决方案。其中许多要求您在对话框上的每个控件中加入一个锚点。我正在寻找一些聪明的东西，它可以弄清楚锚点应该是什么，如果猜测错误，它能够手动锚定。似乎应该是可能的——大多数人会同意编辑字段旁边的静态文本字段应该锚定在一起。猜猜我几乎在这里寻找一个小人工智能:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-27T22:37:17.230

我在代码项目 IIRC 中使用[ResizableLib （也包括 PropertySheets 和 Pages）。](http://www.codeproject.com/KB/tabs/resizableproperties.aspx?display=PrintAll&fid=913&df=90&mpp=25&noise=3&sort=Position&view=Quick&fr=51)您设置确定对话框和控件如何随着对话框移动而调整大小或移动的锚点。

您可以为每个控件设置最多 2 个锚点（左、右），以便您可以在对话框移动时移动它们，或者在它移动时调整它们的大小。它很容易理解，如果很难完全正确:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T22:45:57.927

您可以使用 wxWidgets。它完全取代了 MFC，是多平台的，并为您提供了基于布局的对话框机制。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-29T19:25:37.580

我尝试了很多，最后选择了[http://www.codeproject.com/KB/dialog/layoutmgr.aspx](http://www.codeproject.com/KB/dialog/layoutmgr.aspx)。但它并没有执行您建议的“智能”布局。我从来没有在任何图书馆、任何平台上看到过这种情况——如果没有很多引擎盖下的魔法，无论如何都必须在一半的时间里被覆盖，我看不出它是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T22:24:13.390

Ultimate Toolbox MFC 库（[在](http://www.codeproject.com/KB/MFC/UltimateToolbox.aspx)CodeProject 上）包括一个[布局管理器](http://www.codeproject.com/KB/MFC/UltimateToolbox_Layout.aspx)。我自己没有使用它，但它看起来像你想要的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-27T22:28:51.213

这也是 CodeProject 提供的免费解决方案
[http://www.codeproject.com/KB/dialog/dlgresizearticle.aspx](http://www.codeproject.com/KB/dialog/dlgresizearticle.aspx)
它只是一组简单的宏，用于在对话框调整大小时定位控件。

编辑 - 遵循 OP 评论。我不知道像 QT/WX 对 MFC 的任何一般的 sizer 支持，它似乎也不存在于像 Winforms 这样的新框架中。
它在 QT/WX 中是因为它对于多平台来说是必要的，其中小部件可能具有不同的大小，这解释了 MS 缺乏它的原因。但它对于多语言端口也很重要，例如。其中取消的德语为 30 个字符。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-27T22:36:40.383

您可以查看[Professional GUI](http://www.prof-uis.com/)，我们使用他们的类库来调整对话框控件的大小。我认为这是他们免费版本的一部分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T01:29:01.777

我们使用 CodeGuru 的 CResize 类来自动调整所有控件的大小。你告诉你希望如何调整每个控件的大小，它会为你完成这项工作。

调整大小范例是指定在调整对话框大小时控件的每一侧将移动多少。

```
SetResize(IDC_EDIT1, 0,   0,   0.5, 1);
SetResize(IDC_EDIT2, 0.5, 0,   1,   1); 
```

当您有大量对话框控件时非常方便。

[源代码](http://www.codeguru.com/cpp/w-d/dislog/resizabledialogs/article.php/c1925/)

# serial-port - 强大且易于实现的串行总线（汽车应用）

> ID：144600
> 
> 赞同：3
> 
> 时间：2008-09-27T22:10:30.570
> 
> 标签：serial-port, microcontroller, can-bus

如果您的主要选择标准是：您将在汽车嵌入式系统中使用哪种串行通信总线：

*   电气坚固
*   慢速 (32 kb/s)
*   易于编程
*   易于与微控制器接口

它不会传输太多数据，但需要以高速（100 - 500 Hz）定期传输。我发现如果你的地线有噪音，RS-232 就不够可靠。CAN-bus 看起来很有趣，但我没有这方面的经验。

我们目前对 AVR AT90CAN128 微控制器的组合感兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2008-09-28T02:43:54.127

您已经选择了 AT90CAN128，与其他 AVR 处理器相比，它的突出特点是支持 CAN 总线。对于具有数据速率和抗噪声要求的汽车应用来说，没有比 CAN 更好的选择了。如果你用 CAN 以外的任何东西进入汽车客户，你最终会花费所有时间来捍卫不使用它的决定。

话虽如此，为了在汽车等恶劣环境中抗噪，您需要使用差分信号的总线。这排除了 i2c 或 SPI，这是不幸的，因为它们满足您的其他要求。正如@Andrew Edgecombe 指出的那样，RS-485 将是可行的。

如果您不是在制造商业产品，而是在制造一些供您自己使用的东西以放入发动机舱，那么您可能可以使用 USB。USB 将使与乘客舱中的笔记本电脑连接变得容易，尽管它不是为高噪声环境而设计的，但它在相当高的电压下以不同的方式发出信号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T22:31:46.977

对于所有的可靠性，你不能超过 CANbus（但那是你选择的处理器所暗示的？）

根据您想要连接的内容，这可能非常简单 - 基础级协议非常简单。但是，如果您想与任何其他非专有设备通信，则必须实现更高的协议（例如 CANopen）。

但如果 CANbus 不合适，那么我会推荐 RS485 或 RS422（取决于您的拓扑）。如果您想要实现的只是点对点通信，则它与 RS232 相同。（如果您尝试支持多点通信，则必须将自己的协议层放在顶部。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-04-14T01:29:13.457

[除了CAN](http://en.wikipedia.org/wiki/Controller_Area_Network)之外，另外两个出色的选择是 LIN 和 FlexRay。[LIN](http://en.wikipedia.org/wiki/Local_Interconnect_Network)是一个更简单、更慢的接口，而[FlexRay](http://en.wikipedia.org/wiki/FlexRay)更强大，专为安全关键系统而设计，例如制动器的实时控制。

有关各种总线选择如何相互关联的漂亮概览图，请参见这张[幻灯片](http://www.lin-subbus.de/img/diagram_technical_overview.gif)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-04-16T10:47:12.857

我总是建议 CAN 是汽车通信中最好的。

*   有差分线，即使物理层数据传输出现电气毛刺也能承受
*   它可以提供可靠的速度，它在大多数汽车软件应用程序中提供 500KBaud 速率速度。
*   如果您了解 CAN 控制器邮箱和寄存器结构，则接口也很容易。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T11:40:04.930

正如其他人所说，CAN 是标准的、稳健的、在低速时更稳健等。

如果您需要更大的系统，Linux 内核甚至会从 2.6.15 版本开始支持它。

# grails - Grails - Acegi：自定义身份验证方法

> ID：144605
> 
> 赞同：5
> 
> 时间：2008-09-27T22:14:50.107
> 
> 标签：grails, groovy, spring-security

我想更改 Acegi - 插件使用的身份验证过程。它应该是一个完全定制的过程。自定义登录表单 + 自定义身份验证方法。

显然，关于这个主题的文档很少。

在*The Definitive Guide to Grails*一书中，它是针对旧版本的 grails 进行描述的。那里`spring/resources.xml`是用的。

在新版本中有一个`spring/resources.groovy`文件，其中使用了 DSL。我不知道如何配置新的`AuthenticationManager`.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-10-14T11:00:03.047

关于表单，您应该在*/grails-wapp/views/login*下有一个*auth.gsp*。关于身份验证，您可能只需要在*/grails-app/controllers/*下的*LoginController*中注入不同的 AuthenticateService 。

 ***# monitoring - LAMP 堆栈有哪些好的应用服务器？

> ID：144619
> 
> 赞同：4
> 
> 时间：2008-09-27T22:23:45.250
> 
> 标签：monitoring, lamp

我需要推荐好的应用服务器来监控和调试在 linux 上运行的 PHP 和 Mysql。它应该有一个 GUI、查询分析（记录慢查询等）并根据环境条件捕获 PHP 错误。

我只知道提供这些功能的 Zend 平台，我正在寻找替代品。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T03:07:17.533

我没有给你一个*好的*答案，但据我所知，Zend Platform 确实是唯一一个可以完成你列出的所有事情的 PHP 应用程序服务器，它具有集成的报告 GUI。我的背景是近十年来从事非常严肃的企业 PHP 工作（集群应用程序和数据库堆栈），密切关注该领域，并运行 Alexa 排名前 1000 的站点。

现在，我将浪费一段毫无意义地陈述您可能已经知道的内容。:) 你可以做你列出的所有事情——用请求/环境数据记录 PHP 错误，做 MySQL 慢查询日志，做分析和应用程序分析——在没有来自 CLI 的 Zend Platform 的情况下相对容易，我一直这样做它通过在应用程序中构建日志挂钩，然后是 shell 脚本、[Mon](http://mon.wiki.kernel.org/index.php/Main_Page)和[Monit](http://tildeslash.com/monit/)用于警报/状态 GUI。但那是因为我对真正高需求应用程序的经验是扩展/集群单个应用程序或堆栈——而不是运行有许多随机应用程序/脚本运行的服务器，我认为 Zend 平台会在这方面真正发挥作用。如果您使用 SNMP，您可以设置它，然后使用 GUI 客户端来完成您所说的很多事情，但同样，这也不是 Zend 提供的“开箱即用”级别。

我修改了你的问题，如果你能得到关于 Zend 平台替代品的更好答案，我会很感兴趣，但我认为没有一个集成的服务器产品可以接近。

# asp.net - 如何允许用户将自己的域名用于托管服务？

> ID：144630
> 
> 赞同：3
> 
> 时间：2008-09-27T22:30:31.270
> 
> 标签：asp.net, asp.net-mvc, domain-name

我正在开发一个允许人们发布内容的 ASP.NET MVC Web 应用程序，但除了将内容发布到远程服务器之外，我还希望允许人们直接使用他们的域名。例如，用户“Tom”可以让他的域名 TomSite.com 指向[http://www.mywebapp.com/user/tom](http://www.mywebapp.com/user/tom)，但子路径也会被映射。例如，TomSite.com/path 将映射到 www.mywebapp.com/user/tom/path，这对 Web 访问者是透明的。访问者永远不会在 TomSite.com 上的任何地方看到“mywebapp.com”。

我认为 Smugmug.com 提供了这样的服务，允许人们使用自己的域名作为照片组合。我想达到同样的结果。

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T09:18:47.810

这需要多个步骤。

首先，您必须了解您的用户将如何配置他们的域以便为您的站点提供 CNAME 记录。您可以通过多种方式将其归档，其中最好的就是教育。与托管服务提供商建立合作关系需要大量的业务量。

在 IIS 中，这将要求您手动添加每个主机名（但这也可以通过脚本来归档），或者只为您的站点设置一个专用 IP 地址。

还需要将域与帐户相关联。用户必须自己添加它，您可能会在界面中添加一个检查，以确认域指向您的服务器。代码看起来像（记住要包括 System.Net 命名空间）。

```
if (Dns.GetHostEntry("www.user.example.com").HostName == "www.example.com")
{
    // www.user.example.com is a CNAME for www.example.com
} 
```

在您的 ASP.NET MVC 项目中，您需要为此特定目的实现路由。创建一个继承自 Route 的自定义类，该类也将域考虑在内。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-27T23:14:00.650

Smugmug（你提到的那个人）让他们的用户设置一个 CNAME 记录，该记录将为用户的个人照片部分的 url 设置别名。对于大多数用户来说，这可能需要他们联系他们的主机或查找帮助文件才能完成所有设置。

因此，虽然 www.tomsite.com 可以透明地提供托管在 www.mywebapp.com 上的页面，但用户必须付出一些努力。为了使其完全无缝，您需要与用户网络主机进行某种安排（Smugmug 似乎与 GoDaddy 有这样的安排）。

我怀疑您是否能够与那里的所有网络主机设置这种集成，因此唯一完整的解决方案是自己托管用户的网站（我对您的更广泛情况了解不足，无法确定这是否合理解决方案）。

注意：除非您自己托管他们的网站，否则在您自己的 Web 服务器上设置别名（也称为 url 重写）将不起作用，因为显然从您用户的域获取的人不会首先到达您的服务器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T23:19:03.820

让每个客户的友好名称指向您的网络服务器的外部 IP 地址。

使用 IIS 将主机标头请求中指定的友好名称解析为您希望传递给该友好名称的逻辑网站。IIS 将愉快地将网站和虚拟文件夹映射到文件系统中的同一文件夹。为每个客户创建一个网站。然后将该网站绑定到客户的友好名称。

请记住仅将默认网站映射到您自己的友好名称。如果你让它处于混杂模式（映射到“*”），结果将是不可预测的。

## 设置主机头映射

*在站点*节点下选择*默认网站。*在右上角的“*操作”窗格中，单击“**绑定...”*以打开“*站点绑定*”对话框。将会有一个绑定列表，可能包含一个显示 http * 80 的条目。选择它并单击*Edit...*按钮。将*主机名*设置为您自己的友好名称。

 ***运行*IIS7 管理器*并为每个客户站点在*站点*节点下创建一个网站。在创建每个网站时设置文件路径和主机头绑定。显然，主机头绑定（主机名）应该是该客户的友好名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T23:10:49.893

只需在您的网络服务器设置 tomsite.com 中直接创建一个新记录到您的 mywebapp.com/user/tom/ 路径？

像别名一样看待它:)

当然，由于您是基于 asp.net/windows 的，我认为您必须深入研究 IIS 才能自动执行此类操作。如果您在 apache 上，它将向 httpd.conf 添加 3 行简单的行。

# latex - 如何使用 BibTeX 按外观排序引文？

> ID：144639
> 
> 赞同：338
> 
> 时间：2008-09-27T22:34:06.923
> 
> 标签：latex, bibtex

默认情况下（使用`plain`样式）BibTeX 按字母顺序排列引文。

如何按文档中出现的顺序对引文进行排序？

* * *

## 回答 #1

> 赞同：263
> 
> 时间：2008-09-28T04:21:43.237

这个问题有三个很好的答案。

*   `unsrt`如果您对其格式感到满意，请使用参考书目样式
*   使用`makebst` [（链接）](http://www.ctan.org/tex-archive/macros/latex/contrib/custom-bib/)工具设计您自己的参考书目风格

还有我个人的建议：

*   使用`biblatex`包[（链接）](https://ctan.org/pkg/biblatex)。它是 LaTeX 世界中最完整、最灵活的参考书目工具。

使用`biblatex`，你会写类似

```
\documentclass[12pt]{article}
\usepackage[sorting=none]{biblatex}
\bibliography{journals,phd-references} % Where journals.bib and phd-references.bib are BibTeX databases
\begin{document}
\cite{robertson2007}
\cite{earnshaw1842}
\printbibliography
\end{document} 
```

* * *

## 回答 #2

> 赞同：165
> 
> 时间：2009-10-03T16:22:50.267

改变

```
\bibliographystyle{plain} 
```

到

```
\bibliographystyle{ieeetr} 
```

然后重建它几次以替换使用普通样式时制作的`.aux`和`.bbl`文件。

或者干脆删除`.aux`和`.bbl`文件并重建。

如果你使用 MiKTeX，你不需要额外下载任何东西。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2008-09-27T22:36:37.247

我想出的最好的方法是使用`unsrt`样式，这似乎是一种经过调整的`plain`样式。IE

```
\bibliographystyle{unsrt}
\bibliography{bibliography} 
```

但是，如果我的样式不是默认样式怎么办？

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2011-07-03T10:23:29.840

只是一个简短的说明-我正在使用带有我的 Latex 文件的目录中的[plain.bst的修改版本；](http://gallium.inria.fr/~remy/latex/plain.bst)事实证明，按出现顺序排序是一个相对容易的改变；只需找到一段代码：

```
...
ITERATE {presort}

SORT
... 
```

...并评论它 - 我把它变成：

```
...
%% % avoid sort:
%% ITERATE {presort}
%%
%% SORT
... 
```

...然后，在运行`bibtex`, `pdflatex`, `pdflatex`- 引文将按出现顺序排序（也就是说，它们将是未排序的 :) ）。

干杯!

编辑：刚刚意识到我写的实际上是在@ChrisN 的评论中：“*你能编辑它以删除 SORT 命令吗*”；）

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2008-09-27T22:53:17.067

你回答了你自己的问题---`unsrt`当你想按出现顺序列出对 ne 的引用时使用。

但您可能还想看看[natbib](http://www.ctan.org/tex-archive/help/Catalogue/entries/natbib.html)，一个非常灵活的引文包。我无法想象没有它的生活。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-08-15T15:15:29.030

我对 Bibtex（以及一般的 Latex）有点新，我想恢复这篇旧帖子，因为我发现它出现在我的许多关于在 Latex 中订购书目的谷歌搜索查询中。

我正在为这个问题提供一个更详细的答案，希望它可以帮助一些遇到和我一样困难的新手。

这是调用参考书目的主要 .tex 文件的示例：

```
\documentclass{article}
\begin{document}

So basically this is where the body of your document goes.

``FreeBSD is easy to install,'' said no one ever \cite{drugtrafficker88}.

``Yeah well at least I've got chicken,'' said Leeroy Jenkins \cite{goodenough04}.

\newpage
\bibliographystyle{ieeetr} % Use ieeetr to list refs in the order they're cited
\bibliography{references} % Or whatever your .bib file is called
\end{document} 
```

...以及 .bib 文件本身的示例：

```
@ARTICLE{ goodenough04,
AUTHOR    = "G. D. Goodenough and others", 
TITLE     = "What it's like to have a sick-nasty last name",
JOURNAL   = "IEEE Trans. Geosci. Rem. Sens.",
YEAR      = "xxxx",
volume    = "xx",
number    = "xx",
pages     = "xx--xx"
}
@BOOK{ drugtrafficker88,
AUTHOR    = "G. Drugtrafficker", 
TITLE     = "What it's Like to Have a Misleading Last Name",
YEAR      = "xxxx",
PUBLISHER = "Harcourt Brace Jovanovich, Inc."
ADDRESS   = "The Florida Alps, FL, USA"
} 
```

请注意 .bib 文件中的参考文献以相反的顺序列出，但参考文献是按照它们在论文中引用的顺序列出的。

可以在此处找到有关 .bib 文件格式的更多信息：[http ://en.wikibooks.org/wiki/LaTeX/Bibliography_Management](http://en.wikibooks.org/wiki/LaTeX/Bibliography_Management)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-29T16:38:53.150

我经常使用参考书目风格`natbib`，因为它为我们提供了非常完整的格式和标签。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2009-04-26T06:56:07.487

问题`unsrt`是格式。用于`\bibliographystyle{ieeetr}`按文档中的引用顺序获取参考。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-12-09T20:04:37.427

如果您希望引文数量在文档中按顺序显示，请添加此内容，它们只会在参考页面中未排序：

```
\bibliographystyle{unsrt} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-09T00:01:17.460

我在背面使用了以下内容并按升序排列：

`\usepackage{cite}`

`\bibliographystyle{unsrt}`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-05-28T08:42:29.560

datatool包提供了一种按任意标准对参考书目进行排序的好方法，方法是首先将其转换为某种数据库格式[。](http://ctan.org/pkg/datatool)

简短示例，取自[此处](http://www.latex-community.org/forum/viewtopic.php?f=50&t=20461)并张贴记录：

```
\documentclass{article}

\usepackage{databib}

\begin{document}
% First argument is the name of new datatool database
% Second argument is list of .bib files
\DTLloadbbl{mybibdata}{acmtr}
% Sort database in order of year starting from most recent
\DTLsort{Year=descending}{mybibdata}
% Add citations
\nocite{*}

% Display bibliography
\DTLbibliography{mybibdata}
\end{document} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-08-13T19:27:07.440

如果您碰巧使用`amsrefs`它们，它们将覆盖以上所有内容 - 所以请注释掉：

`\usepackage{amsrefs}`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-01-15T14:05:14.077

我`natbib`与`bibliographystyle{apa}`. 例如：

```
\begin{document}

The body of the document goes here...

\newpage

\bibliography{bibliography} % Or whatever you decided to call your .bib file 

\usepackage[round, comma, sort&compress ]{natbib} 

bibliographystyle{apa}
\end{document} 
```

# java - 树（有向无环图）实现

> ID：144642
> 
> 赞同：12
> 
> 时间：2008-09-27T22:37:14.110
> 
> 标签：java, data-structures, tree, graph-theory

我需要一个像这样的树/有向无环图实现：

```
public class TreeNode<K, V> {
    private K key; // 'key' for this node, always present
    private V value; // 'value' for this node, doesn't have to be set

    private TreeNode<K, V> parent;
    private Set<TreeNode<K, V>> children; 
} 
```

*   没有任何类型的排序。
*   这`TreeNode`只是键和可能值的包装器（节点不必设置值）。
*   我需要链接到父母和孩子。

标准 API 或 Commons 等中是否有任何东西可以为我做到这一点？

我不介意自己写（我当然**不会**要求你们这样做）我只是不想重新发明轮子。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2008-09-27T22:42:17.577

好像没有这种东西。上周我问[了一个类似的问题，最终实现了我自己的树。](https://stackoverflow.com/questions/66893/tree-data-structure-in-c)我的实现与您提出的非常相似：

```
public class TreeNode<T>
{
    private LinkedList<TreeNode<T>> children = new LinkedList<TreeNode<T>>();
    public T value { get; set; }

    public TreeNode(T value)
    {
        this.value = value;
    }
    public LinkedList<TreeNode<T>> GetChildren()
    {
        return children;
    }
} 
```

您必须将链接添加回父级。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-01-13T21:25:43.547

还有[http://www.jgrapht.org](http://www.jgrapht.org)，它拥有 LGPL 许可的软件。不过，我必须警告你，实施你自己的做法充满了危险。如果您打算在结构（即图）上使用递归，则必须确保它是非循环的，否则您将遇到无限循环问题。最好在他们已经处理过问题的地方使用第三方代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T23:11:08.257

我会说最好推出你自己的实现（此外，你已经很好地考虑了接口）。无论如何，您打算在这棵树上执行什么操作？您可能希望围绕您想要的东西设计您的 API……通过键/值直接访问各个节点？遍历类型？添加/删除操作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T23:44:34.400

如果您正在寻找额外的图形功能，[JDigraph](https://jdigraph.dev.java.net/)的[Digraph](https://jdigraph.dev.java.net/nonav/api/net/walend/digraph/Digraph.html)类应该符合要求。

# apache - 如何在不更改相对路径的情况下使用 apache 的 mod_rewrite 重写器

> ID：144651
> 
> 赞同：4
> 
> 时间：2008-09-27T22:41:49.463
> 
> 标签：apache, mod-rewrite

我在 .htaccess 中有以下重写规则：

```
RewriteRule ^groups/([^/\.]+)/?$  groupdetail.php?gname=$1 [L,NC] 
```

这需要类似 www.example.com/groups/groupname 并调用 www.example/groupdetail.php?gname=groupname。它工作得很好。

但是 groupdetail.php 上的所有相对链接都使用 groups/ 作为相对路径，我不希望它们这样做。我该如何避免这种情况？

例如，当用户单击`<a href="link.php">`groupdetail.php?gname=groupname 上的链接时，他会被带到 www.example/groups/link.php。我想把用户带到 www.example.com/link.php。

显然，我希望用户的 URL 看起来像“www.example.com/groups/groupname”，所以我不想使用 [R]/redirect。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-10-15T22:24:56.643

如果像我一样，您在页面中有数百个相对链接，请在`<base href="">`绝对`<head>`路径中插入一个（也可以使用相对路径）。您还需要在`<head>`绝对路径中创建 .js 文件的路径，因为 IE 和 firefox 以不同的方式处理基本 href。我同意这是一个烦人的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-10-01T01:18:20.093

相对链接是由浏览器解析的，而不是服务器，所以你不能用 mod_rewrite 做任何事情。

要么使用相对链接向上层级（`../link.php`）或使用绝对链接。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-12-01T04:49:33.850

如果您不想使用绝对链接或`<base>`因为要移动页面而使用，您可以使用 php 生成基础，如下所示：

```
echo '<base href="http://'.$_SERVER['SERVER_NAME'].str_replace("index.php","",$_SERVER['PHP_SELF']).'" />'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T22:59:28.160

如果您更改重写规则以执行[强制重定向](http://httpd.apache.org/docs/2.2/mod/mod_rewrite.html#rewriterule)（添加 [R] 选项），则浏览器将使用 /groupdetail.php URL，并且相关链接将正常工作。但是，这会增加一个重定向并使 URL 不那么漂亮。

```
RewriteRule ^groups/([^/.]+)/?$ groupdetail.php?gname=$1 [L,NC,R] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-12-30T14:40:17.390

如果您不想使用绝对路径，可以使用 BASE 标记：

[http://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-03-04T05:49:54.687

霍普的回答是正确的。浏览器将**`www.example.com/groups/groupname`**其视为地址，因此认为这**`/groups`**是当前目录。因此，任何类似的链接**`<a href=link.php>`**都假定在**`/groups`**文件夹中。

当用户将鼠标移到链接上时，他会看到**`www.example.com/groups/link.php`**链接地址。

解决方案是使用绝对链接——只需在 href 前添加一个斜杠：

**`<a href=/link.php>`**

然后，用户将看到**`www.example.com/link.php`**url。

也就是说，从您的问题看来，您是故意使用相对链接......您有理由不使用绝对链接吗？

# java - 我可以让 Hibernate 透明地避免数据库中的字符串重复吗？

> ID：144657
> 
> 赞同：2
> 
> 时间：2008-09-27T22:47:47.063
> 
> 标签：java, mysql, hibernate

我有一个 Java 程序，它使用 Hibernate 和 MySQL 来存储大量有关使用 Eclipse IDE 的跟踪数据。该数据包含很多字符串，例如方法名称、目录、透视名称等。

例如，事件对象（然后反映在记录中）可以指定源文件和当前方法、用户名等。显然，字符串数据可以重复自身。

只要它在内存中，它的大部分就会被内部化，因此所有重复的字符串实例都指向同一个对象（我确保这一点）。但是，使用@Basic（我使用注释），Hibernate 将其映射为 VARCHAR(255)，这意味着浪费了大量空间。

如果我自己编写 SQL，我可以将 VARCHAR 替换为手动管理的字符串查找表的索引并节省空间（以额外查找为代价）。

有什么方法可以让 Hibernate 为我做这件事吗？我愿意为空间的性能付出代价。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-27T23:21:48.307

建立在 sblundy 的答案上，你可能会逃脱类似的事情：

```
class Foo {
    // client code uses this to get the value... ignored by Hibernate
    @Transient
    public String getString() {
        return getStringHolder().getString();
    }

    public StringHolder getStringHolder() {...}
} 
```

至少那时客户端代码不一定要知道更改。不过，我不知道这是否值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-27T22:57:43.763

我怀疑你需要一个字符串持有者对象，然后确保所有这些对象都引用它。

```
class StringHolder {
  private Long id;
  private String string;

  public StringHolder() {/* Not sure if this is necessary */}

  public StringHolder(String string) {
    this.string = string;
  }

  public void getString() {
    return this.string;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-10-06T02:02:30.200

我相信您想查看[自定义值类型](http://www.hibernate.org/hib_docs/v3/reference/en/html_single/#mapping-types-custom)。这应该允许您将字符串作为整数 ID 存储在数据库中。当然，您必须自己提供映射/查找。

# jquery - jquery.ui.tab 中的 jQuery jWYSIWYG

> ID：144659
> 
> 赞同：1
> 
> 时间：2008-09-27T22:49:34.127
> 
> 标签：jquery

因此，我设法使用 Ajax [ui.tab](http://docs.jquery.com/UI/Tabs)获得了一个页面，并在其中一个选项卡中放置了[jWYSIWYG](http://projects.bundleweb.com.ar/jWYSIWYG/) textarea 插件。不幸的是，我只能看到普通的文本区域。

但是，直接访问页面（即不使用 ajax 选项卡）可以。

发生了什么？

p/s：我是 jQuery / JavaScript / AJAX / CSS 的新手（如果这很重要的话）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-05-19T14:05:22.413

我预计问题是，当 ajax 调用完成时，新的 html 被插入到 DOM 中，但没有与 jQuery 挂钩。

通常，当页面最初加载时，您会将所有 jquery 优点附加到文档就绪或 onload 事件中。但是，当页面首次加载时，您的 textarea 不在页面上。

当您的 ajax 调用返回时，文本区域被添加到页面中。此时，您需要调用所需的任何 javascript 将其连接到 jWYSIWTG 控件。

[jquery 中有一个新的（ish）功能，这意味着您仍然可以在文档就绪（称为live](http://docs.jquery.com/Events/live) ）中设置所有内容，但是您可能会发现仅在 ajax 成功处理程序中调用连接代码更简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T02:51:39.067

最好通过发布指向相关 HTML 文件（以及您自己的任何自定义 JavaScript 文件）的链接来回答您的问题。如果文件不是托管的，您可以将源代码粘贴到[http://pastebin.com/](http://pastebin.com/)，然后在此处发布链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-10-09T03:53:07.693

我的解决方案是通过事件打开对话框修复对话框宽度和高度。通过删除插件自动创建的 div.wysiwyg 来关闭事件关闭对话框。

```
$('#dialogContent').bind('dialogopen', function(event, ui) {
    $('textarea').wysiwyg( {
        css :burl + 'public/css/text.css',
        controls : {
            separator00 : { visible : false },
            separator01 : { visible : false },
            separator02 : { visible : false },
            separator03 : { visible : false },
            separator04 : { visible : false },
            separator05 : { visible : false },
            separator06 : { visible : false },
            separator07 : { visible : false },
            separator08 : { visible : false },
            separator09 : { separator : false},
            insertOrderedList : { visible : true },
            insertUnorderedList : { visible : true },
            undo: { visible : true },
            redo: { visible : true },
            justifyLeft: { visible : true },
            justifyCenter: { visible : true },
            justifyFull: { visible : true },
            subscript: { visible : false },
            superscript: { visible : false },
            underline: { visible : true },
            increaseFontSize : { visible : false },
            decreaseFontSize : { visible : false },
            removeFormat : { visible : false },
            h1mozilla : { visible : false },
            h2mozilla : { visible : false },
            h3mozilla : { visible : false },
            h1 : { visible : false },
            h2 : { visible : false },
            h3 : { visible : false }
        }
    });
    $('.wysiwyg').css( {
        'width' :'350px'
        ,'height' :'180px'
    });
    $('.wysiwyg iframe').css( {
        'width' :'350px'
        ,'height' :'150px'
    });
}).bind('dialogbeforeclose', function(event, ui) {
    $('.wysiwyg').remove();
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-12-23T10:33:54.387

我的问题是会显示 jWYSIWYG 框的格式，但我无法在其中找到光标来编辑/添加文本。

对我有用的是在使用选项卡事件定义选项卡的原始页面上加载 ajax 后加载 jWSIWYG 文本框。

```
$("#example").tabs();
$('#example').bind('tabsshow', function(event, ui) {
    if (ui.tab.id == "alinkid") {
        $('#textfield').wysiwyg();
    }
}); 
```

然后，在 HTML 中，对于选项卡：

```
<div id="example">
    <ul>
        <li><a href="target" id="alinkid">Target</a></li>
    </ul>
</div> 
```

在目标页面上，您将拥有一个 id 为“textfield”的普通文本区域

# python - 用于元编程的 Python 与 Ruby

> ID：144661
> 
> 赞同：90
> 
> 时间：2008-09-27T22:50:15.950
> 
> 标签：python, ruby, lisp, metaprogramming

我目前主要是一名[D](https://en.wikipedia.org/wiki/D_(programming_language))程序员，并希望在我的工具箱中添加另一种语言，最好是支持元编程黑客的语言，而这种黑客技术无法用像 D 这样的静态编译语言来完成。

我已经阅读了一点 Lisp，我很想找到一种语言，它允许 Lisp 所做的一些很酷的事情，但没有 Lisp 的奇怪语法等。我不想引发一场语言之战，而且我确信 Ruby 和 Python 都有各自的取舍，所以我将列出对我个人而言重要的内容。请告诉我 Ruby、Python 或其他语言是否最适合我。

重要的：

1.  很好的元编程。能够在运行时创建类、方法、函数等。最好是代码和数据之间的最小区别，Lisp 风格。
2.  漂亮、干净、健全的语法和一致、直观的语义。基本上是一种经过深思熟虑、使用起来很有趣的现代语言。
3.  多种范式。没有一种范式适用于每个项目，甚至是项目中的每个小子问题。
4.  一种有趣的语言，它实际上会影响人们对编程的看法。

有一些重要：

1.  表现。如果性能不错，那就太好了，但是当性能是真正的优先事项时，我将使用 D 代替。
2.  有据可查。

不重要：

1.  社区规模、图书馆可用性等。这些都不是语言本身的特征，而且都可以很快改变。
2.  工作可用性。我不是一个全职的专业程序员。我是一名研究生，编程与我的研究密切相关。
3.  任何主要设计用于由一百万个代码猴子处理的大型项目的功能。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2008-09-28T00:11:51.917

> 我已经阅读了一点 Lisp，我很想找到一种语言，它允许 Lisp 所做的一些很酷的事情，但没有 Lisp 的奇怪语法等。

难道我们都不会。

> 代码和数据之间的最小区别，Lisp 风格

可悲的是，代码和数据与“奇怪”语法之间的最小区别是彼此的结果。

如果您想要易于阅读的语法，那么您有 Python。但是，代码*没有*以任何常用的内置数据结构表示。它失败了——就像大多数语言一样——在你的“重要”列表的第 1 项中。这使得提供有用的帮助变得困难。

你不可能拥有一切。请记住，您不是第一个有这种想法的人。如果存在类似您理想语言的东西，我们都会使用它。由于现实世界达不到您的理想，您将不得不重新确定您的愿望清单的优先级。“重要”部分必须重新排列以识别对您*真正*重要的内容。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2009-07-30T07:48:57.373

老实说，就元编程工具而言，Ruby 和 Python 比它们的一些追随者愿意承认的要相似得多。这两种语言的评论提供了一个很好的比较/评论：

*   [http://regebro.wordpress.com/2009/07/12/python-vs-ruby/](http://regebro.wordpress.com/2009/07/12/python-vs-ruby/)

因此，只需根据一些标准选择一个。也许您喜欢 Rails 并想研究该代码。也许 SciPy 是你的菜。查看图书馆、社区等的生态系统，然后选择一个。根据您的选择，您当然不会错过一些元编程必杀技。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2008-09-27T23:35:19.743

免责声明：我只涉足任何一种语言，但我至少在这两种语言中都编写过小型工作程序（不仅仅是快速脚本，我使用 Perl、bash 或 GNU make）。

对于“多范式”第 3 点来说，Ruby 非常适合，因为它努力使创建特定领域的语言变得容易。例如，在线浏览并查看一些 Ruby on Rails 代码和一些 Rake 代码。它们都是 Ruby，你可以看到相似之处，但它们看起来不像你通常认为的同一种语言。

在我看来，Python 似乎更容易预测（可能与“干净”和“理智”第 2 点相关），但我真的不知道这是因为语言本身还是因为它通常被具有不同价值观的人使用. 我从未在 Python 中尝试过深度魔法。我肯定会说这两种语言都经过深思熟虑。

两者都在 1 和 4 中得分很高。 [编辑：实际上 1 是很有争议的——两者都有“eval”，这在解释语言中很常见，但它们在概念上几乎不是纯粹的。您可以定义闭包、将方法分配给对象等等。不知道这是否如你所愿。]

就我个人而言，我发现 Ruby 更有趣，但部分原因是更容易分心思考做事的酷方法。我实际上更多地使用了 Python。有时你不想要酷，你想继续它，所以它在睡前完成......

它们都不难进入，所以你可以决定在一个中完成你的下一个小任务，然后在另一个中完成之后的一个。或者从图书馆拿起一本介绍性书籍，略读一下，看看有什么吸引你。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2008-09-28T00:31:09.827

至少在意识形态层面上，python 和 ruby​​ 之间并没有太大的区别。在大多数情况下，它们只是同一事物的不同风味。因此，我建议看看哪一个更符合您的编程风格。

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2008-09-28T08:54:17.527

你考虑过 Smalltalk 吗？它提供了一种非常简单、清晰和可扩展的语法，具有反射和自省功能，以及一个利用这些功能的完全集成的开发环境。例如，看看在[Squeak Smalltalk](http://squeak.org/)[中所做的一些工作](http://squeak.org/Features/Research/)。许多使用 Squeak 的研究人员在[Squeak 邮件列表](http://lists.squeakfoundation.org/pipermail/squeak-dev/)和 freenode 上的#squeak 上闲逛，因此您可以非常轻松地在复杂问题上获得帮助。

它当前相关性的其他指标：它可以在您愿意命名的任何平台上运行（包括[iPhone](http://isqueak.org/HomePage)）；Gilad Bracha 的新话作品基于 Squeak；[V8 团队在Smalltalk 虚拟机](http://astares.blogspot.com/2008/09/google-chrome-javascript-and-smalltalk.html)上崭露头角；Dan Ingalls 和 Randal Schwartz 在旷野多年后，最近回到了 Smalltalk 的工作。

祝您搜索顺利 - 让我们知道您最终的决定。

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2008-09-29T21:34:03.980

Lisp 满足您的所有标准，包括性能，它是唯一没有（奇怪）语法的语言。如果您在如此令人震惊的消息灵通/错误的基础上避开它，从而错过了使用例如 Emacs+SLIME+CL 的经验，那么您将对自己造成极大的伤害。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2008-09-28T08:36:39.520

您的 4 个“重要”点完全指向 Ruby，而 2 个“有些重要”点由 Python 统治。随它吧。

* * *

## 回答 #8

> 赞同：11
> 
> 时间：2008-09-29T00:42:39.853

您正在描述 Ruby。

> *   很好的元编程。能够在运行时创建类、方法、函数等。最好是代码和数据之间的最小区别，Lisp 风格。

*在运行时扩展和*修改现有原语非常容易。在 ruby​​ 中，一切都是对象、字符串、整数，甚至函数。

您还可以为语法糖构建快捷方式，例如使用[class_eval](http://www.neeraj.name/blog/articles/235)。

> *   漂亮、干净、健全的语法和一致、直观的语义。基本上是一种经过深思熟虑、使用起来很有趣的现代语言。

Ruby 遵循[较少惊喜的原则](http://en.wikipedia.org/wiki/Principle_of_least_surprise)，当将 Ruby 代码与其他语言中的等效代码进行比较时，许多人认为它更“漂亮”。

> *   多种范式。没有一种范式适用于每个项目，甚至是项目中的每个小子问题。

您可以遵循命令式、面向对象、功能性和反思性。

> *   一种有趣的语言，它实际上会影响人们对编程的看法。

这是非常主观的，但从我的角度来看，同时使用许多范式的能力允许非常有趣的想法。

我已经尝试过 Python，但它不符合您的重点。

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2008-12-28T08:58:21.850

比较使用不同语言（语言按字母倒序排列）执行相同操作的[代码示例](http://news.ycombinator.com/item?id=408030)（加入列表中项目的换行非空描述）：`myList`

**红宝石**：

```
myList.collect { |f| f.description }.select { |d| d != "" }.join("\n") 
```

或者

```
myList.map(&:description).reject(&:empty?).join("\n") 
```

**蟒蛇**：

```
descriptions = (f.description() for f in mylist)
"\n".join(filter(len, descriptions)) 
```

或者

```
"\n".join(f.description() for f in mylist if f.description()) 
```

**珀尔**：

```
join "\n", grep { $_ } map { $_->description } @myList; 
```

或者

```
join "\n", grep /./, map { $_->description } @myList; 
```

**Javascript**：

```
myList.map(function(e) e.description())
      .filter(function(e) e).join("\n") 
```

**艾欧**：

```
myList collect(description) select(!="") join("\n") 
```

这是[Io 指南](http://www.iolanguage.com/scm/git/checkout/Io/docs/IoGuide.html)。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2009-07-29T20:52:06.810

就“主流”而言，Ruby 会比 Lisp 更好（不管这到底意味着*什么*，但一个现实的问题是，如果你要这样做，那么在 Lisp 编程中找到问题的答案是多么容易。）无论如何，我发现 Ruby 很容易上手。在我第一次学习 Python（或其他语言）所花费的相同时间里，我很快就比以往任何时候都*更有效地编写了**更好*的代码。不过，这只是一个人的意见；我猜是加一粒盐。在这一点上，我对 Ruby 的了解比我对 Python 或 Lisp 的了解要多得多，但你应该知道，在我转行之前，我已经有一段时间是 Python 人了。

 *Lisp 绝对很酷，值得研究；正如你所说，社区的规模等可以很快改变。话虽如此，规模本身并不像社区的*质量那么重要。*例如，该`#ruby-lang`频道仍然充满了一些非常聪明的人。Lisp 似乎也吸引了一些非常聪明的人。由于我没有太多的第一手经验，所以我不能过多谈论 Python 社区，但有时它似乎“太大了”。（我记得人们在他们的 IRC 频道上非常粗鲁，从我真正喜欢 Python 的朋友那里听到的消息，这似乎是规则而不是例外。）

无论如何，您可能会发现一些有用的资源是：

1) Pragmatic Programmers Ruby Metaprogramming 系列 ( [http://www.pragprog.com/screencasts/v-dtrubyom/the-ruby-object-model-and-metaprogramming](http://www.pragprog.com/screencasts/v-dtrubyom/the-ruby-object-model-and-metaprogramming) ) -- 不是免费的，但后面几集很有趣。（代码是免费的，如果你想下载它，看看你会学到什么。）

2) Paul Graham 的 Lisp ( [http://www.paulgraham.com/onlisp.html](http://www.paulgraham.com/onlisp.html) )。它有点旧，但它是经典之作（可免费下载）。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2011-01-30T02:13:59.913

@Jason 我分别不同意。有一些差异使得 Ruby 在元编程方面优于 Python——无论是哲学上的还是实用性的。对于初学者，[Ruby 通过 Single Inheritance 和 Mixins 获得继承权](http://techoctave.com/c7/posts/46-object-oriented-ruby-classes-mixins-and-jedi)。当涉及到元编程时，您只需要了解这一切都与*自我*有关。这里的典型区别在于，在 Ruby 中，您可以在运行时访问*self*对象 - 在 Python 中，您不能！

与 Python 不同，在 Ruby 中没有单独的编译或运行阶段。在 Ruby 中，每一行代码都是针对特定的*self*对象执行的。在 Ruby 中，每个类都继承自对象和隐藏的元类。这产生了一些有趣的动态：

```
class Ninja
  def rank
    puts "Orange Clan"
  end

  self.name #=> "Ninja"
end 
```

使用*self.name*访问 Ninja 类的元类*名称*方法以返回 Ninja 的类名。元编程在 Python 中开花如此美丽吗？我由衷地怀疑！

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2008-09-28T08:27:12.333

我在许多项目中使用 Python，我认为 Python 确实提供了您要求的所有功能。

重要的：

1.  元编程：Python 支持元类和运行时类/方法生成等
2.  语法：嗯，这有点主观。我喜欢 Python 的简单语法，但有些人抱怨 Python 对空格敏感。
3.  范式：Python 支持过程式、面向对象和基本函数式编程。
4.  我认为 Python 有一种非常实用的风格，这对我很有启发。

有一些重要：

1.  性能：嗯，它是一种脚本语言。但是为 Python 编写 C 扩展是一种常见的优化实践。
2.  文档：我不能抱怨。它并不像有人从 Java 中知道的那样详细，但它已经足够好了。

作为研究生，您可能想阅读这篇声称[Python 是科学家所需要的全部内容的](http://openwetware.org/wiki/Julius_B._Lucks/Projects/Python_All_A_Scientist_Needs)论文。不幸的是，我无法将 Python 与 Ruby 进行比较，因为我从未使用过那种语言。

问候，丹尼斯

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2008-10-02T16:05:07.893

好吧，如果您不喜欢 lisp 语法，也许汇编程序是您的最佳选择。:-)

它当然在代码和数据之间的区别很小，是多范式（或者可能是无范式），并且在学习和你可以做的技巧方面，它是一种思维扩展（如果乏味）的体验。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2008-10-15T21:09:45.283

Io 满足您所有的“重要”点。我认为没有更好的语言来进行疯狂的元黑客攻击。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2009-07-29T20:15:59.750

> 一种支持**静态编译语言无法完成的元编程技巧**
> 
> 我很想找到一种语言，它允许**Lisp**所做的一些很酷的事情

Lisp 可以编译。

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2009-09-28T22:08:47.423

你试过 Rebol 吗？

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2012-02-02T23:45:44.840

我的答案都不是。我知道这两种语言，上过关于 Ruby 的课程，并且已经用 python 编程了好几年。Lisp 擅长元编程，因为它的唯一目的是转换列表，它自己的源代码只是一个标记列表，因此元编程是自然的。对于这类事情，我最喜欢的三种语言是 Rebol、Forth 和 Factor。Rebol 是一种非常强大的方言语言，它从其输入流中获取代码，针对它运行一个表达式并使用用该语言编写的规则对其进行转换。非常有表现力，非常擅长方言。Factor 和 Forth 或多或少完全脱离了语法，您可以通过定义和调用单词来对它们进行编程。它们通常大部分是用他们自己的语言编写的。你不写传统意义上的应用程序，您通过编写自己的文字来定义您的特定应用程序来扩展语言。Factor 可能特别好，因为它有许多我只在 smalltalk 中看到的用于评估和使用源代码的功能。一个非常好的工作区、交互式文档等。

* * *

## 回答 #18

> 赞同：2
> 
> 时间：2008-09-28T03:38:38.363

将 Python 和 Ruby 分开并没有太多需要注意的地方。我想说 Python 社区比 Ruby 社区更大、更成熟，这对我来说真的很重要。Ruby 是一种更灵活的语言，它有正面和负面的影响。但是，我敢肯定会有很多人详细介绍这两种语言，所以我会提出第三个选项。JavaScript 怎么样？

JavaScript 最初是为 web 设计的，它是基于原型的，就多范式和元编程而言，这比 Python 和 Ruby 更有优势。语法不如其他两个好，但它可能是现有最广泛部署的语言，并且性能每天都在变得更好。

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2008-09-28T06:43:45.017

如果你喜欢 lisp 风格的代码即数据概念，但不喜欢 Lispy 语法，那么[Prolog](http://sics.se/sicstus)可能是一个不错的选择。

这是否符合“使用乐趣，现代语言”的资格，我将留给其他人来判断。;-)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2008-09-28T08:07:03.553

我使用 Python 非常多，但更多的是 Ruby。但是，我认为它们都提供了您所要求的。

如果我看到你所有的四点，那么你至少可以检查一下：http: [//www.iolanguage.com/](http://www.iolanguage.com/)

Mozart/Oz 对你来说可能也很有趣：http: [//mozart.github.io/](http://mozart.github.io/)

问候弗里德里希

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2008-09-28T13:29:25.977

在探索了 Python、Smalltalk 和 Ruby 之后，我选择了 Ruby。

* * *

## 回答 #22

> 赞同：2
> 
> 时间：2008-10-01T19:07:13.567

## OCaml 呢？

OCaml 特性：静态类型系统、类型推断、参数多态性、尾递归、模式匹配、一流的词法闭包、函子（参数模块）、异常处理和增量分代自动垃圾收集。

我认为它满足以下条件：

> 重要的：
> 
> 2.  漂亮、干净、健全的语法和一致、直观的语义。基本上是一种经过深思熟虑、使用起来很有趣的现代语言。
> 3.  多种范式。没有一种范式适用于每个项目，甚至是项目中的每个小子问题。
> 4.  一种有趣的语言，它实际上会影响人们对编程的看法。
> 
> 有一些重要：
> 
> 1.  表现。如果性能不错，那就太好了，但是当性能是真正的优先事项时，我将使用 D 代替。
> 2.  有据可查。

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2008-09-28T11:42:21.117

对于 python 样式的语法和类似 lisp 的宏（是真实代码的宏）和良好的 DSL，请参阅[收敛](http://convergepl.org/)。

* * *

## 回答 #24

> 赞同：1
> 
> 时间：2008-09-29T06:10:31.967

我不确定 Python 是否能满足您的所有需求（尤其是关于代码和数据之间最小区别的一点），但有一个支持 Python 的论点。有一个项目可以让您轻松地在 D 中编写 python 扩展程序，因此您可以两全其美。[http://pyd.dsource.org/celerid.html](http://pyd.dsource.org/celerid.html)

* * *

## 回答 #25

> 赞同：1
> 
> 时间：2008-12-27T23:07:20.437

如果你爱玫瑰，你必须学会​​忍受荆棘:)

* * *

## 回答 #26

> 赞同：1
> 
> 时间：2010-12-17T21:36:55.927

不要将 Ruby 编程语言与 Ruby 实现混合，认为 POSIX 线程在 ruby​​ 中是不可能的。

您可以简单地使用 pthread 支持进行编译，如果您原谅双关语，那么[在创建此线程时这已经是可能的。](http://blogs.oracle.com/prashant/entry/ruby_and_enable_pthreads)

这个问题的答案很简单。如果你喜欢 lisp，你可能会更喜欢 ruby​​。或者，随便你。

* * *

## 回答 #27

> 赞同：1
> 
> 时间：2011-06-20T01:15:06.427

我建议您使用 Ruby。

当我第一次开始学习它时，我发现它真的很容易上手。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-27T23:04:12.953

我建议您尝试两种语言并选择一种吸引您的语言。Python 和 Ruby 都可以为所欲为。

另请阅读[此线程](https://stackoverflow.com/questions/143586/what-scripting-language-to-learn-after-perl)。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-05-11T23:42:49.420

使用 JS 只需在我的 github [http://github.com/visionmedia](http://github.com/visionmedia)上查看 AJS（替代 JavaScript 语法）， 它会给你一些看起来更干净的闭包等：D

* * *

## 回答 #30

> 赞同：0
> 
> 时间：2009-07-29T19:59:42.987

关于您的要点（元编程）：Groovy 1.6 版具有内置的 AST（抽象语法树）编程作为标准和集成功能。Ruby 有 RubyParser，但它是一个附加组件。

* * *

## 回答 #31

> 赞同：0
> 
> 时间：2011-06-10T06:37:47.337

我推荐哈斯克尔。它不是“重要”标准 1（除非您包含 Template Haskell）或 3（Haskell 是一种坚定的函数式语言，但您会惊讶地发现，如果您愿意，在 Haskell 中进行命令式编码实际上是多么容易到）。不过，您肯定会喜欢 Haskell 的一流功能。

Haskell 是“重要”标准 2 和 4 的可靠选择。尤其是 #4：“一种有趣的语言，实际上会影响人们对编程的看法。” 任何学习过大量 Haskell 的人都可以证明它能够扩展你的思维。

# cvs - 如何恢复 CVS 中已删除的文件？

> ID：144669
> 
> 赞同：41
> 
> 时间：2008-09-27T22:55:19.870
> 
> 标签：cvs

我已经从 CVS 分支中删除了一个签入文件，即：

```
cvs remove -f file.txt
cvs commit 
```

如何恢复文件？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2008-09-27T22:56:30.803

我相信：

```
cvs add file.txt
cvs commit file.txt 
```

... 将把它从阁楼上复活。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2008-09-28T06:50:34.110

我发现您不能使用`cvs add`撤消`cvs remove`已提交的操作。所以这有效：

```
$ cvs remove -f file.txt
$ cvs add file.txt 
```

但这不起作用：

```
$ cvs remove -f file.txt
$ cvs commit
$ cvs add file.txt 
```

* * *

到目前为止，我发现的最简单的方法是运行`cvs status file.txt`以找出修订号。然后获取修订的内容并将其添加回：

```
$ cvs update -p -r rev file.txt > file.txt
$ cvs add file.txt
$ cvs commit 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2008-09-28T08:10:22.077

这`cvs add`对我不起作用，因为我在服务器上的 cvs 版本非常旧。我已经确认它适用于 CVS 1.11.22 版。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-02T09:11:47.483

尝试：

```
cvs add file.txt
cvs update file.txt
cvs commit file.txt 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-28T07:25:57.740

鉴于哈利缺乏成功，这是我为证明上述答案有效而所做的成绩单（提前为它的长度道歉）：

```
C:\foo>dir
 Volume in drive C is Local Disk
 Volume Serial Number is 344F-1517

 Directory of C:\foo

28/09/2008  05:12 PM    <DIR>          .
28/09/2008  05:12 PM    <DIR>          ..
28/09/2008  05:12 PM    <DIR>          CVS
28/09/2008  05:11 PM                19 file.txt
               1 File(s)             19 bytes
               3 Dir(s)  22,686,416,896 bytes free

C:\foo>cvs status file.txt
===================================================================
File: file.txt          Status: Up-to-date

   Working revision:    1.2     Sun Sep 28 07:11:58 2008
   Repository revision: 1.2     C:\jason\CVSROOT/foo/file.txt,v
   Sticky Tag:          (none)
   Sticky Date:         (none)
   Sticky Options:      (none)

C:\foo>cvs rm -f file.txt
cvs remove: scheduling `file.txt' for removal
cvs remove: use 'cvs commit' to remove this file permanently

C:\foo>cvs commit -m "" file.txt
Removing file.txt;
C:\jason\CVSROOT/foo/file.txt,v  <--  file.txt
new revision: delete; previous revision: 1.2
done

C:\foo>cvs status file.txt
===================================================================
File: no file file.txt          Status: Up-to-date

   Working revision:    No entry for file.txt
   Repository revision: 1.3     C:\jason\CVSROOT/foo/Attic/file.txt,v

C:\foo>more file.txt
Cannot access file C:\foo\file.txt

C:\foo>dir
 Volume in drive C is Local Disk
 Volume Serial Number is 344F-1517

 Directory of C:\foo

28/09/2008  05:12 PM    <DIR>          .
28/09/2008  05:12 PM    <DIR>          ..
28/09/2008  05:12 PM    <DIR>          CVS
               0 File(s)              0 bytes
               3 Dir(s)  22,686,400,512 bytes free

C:\foo>cvs add file.txt
cvs add: Resurrecting file `file.txt' from revision 1.2.
U file.txt
cvs add: Re-adding file `file.txt' (in place of dead revision 1.3).
cvs add: use 'cvs commit' to add this file permanently

C:\foo>cvs commit -m "" file.txt
Checking in file.txt;
C:\jason\CVSROOT/foo/file.txt,v  <--  file.txt
new revision: 1.4; previous revision: 1.3
done

C:\foo>more file.txt
This is a test...

C:\jason\work\dev1\nrta\foo>dir
 Volume in drive C is Local Disk
 Volume Serial Number is 344F-1517

 Directory of C:\jason\foo

28/09/2008  05:15 PM    <DIR>          .
28/09/2008  05:15 PM    <DIR>          ..
28/09/2008  05:13 PM    <DIR>          CVS
28/09/2008  05:13 PM                19 file.txt
               1 File(s)             19 bytes
               3 Dir(s)  22,686,375,936 bytes free 
```

显然他在做正确的事，但他观察到的行为是不同的。由于 CVS 版本（我在 Windows 上使用 1.11.22），可能存在差异。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-04-18T13:37:45.027

cd 进入 $CVSROOT 目录和相关模块目录，然后进入阁楼，编辑 fileOfInterest,v 并更改说 Dead 的行；到 Exp; 然后将 fileOfInterest,v 移动到上面的目录。

签出模块中的更新现在将恢复该文件。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-14T02:43:02.450

最简单但最不优雅的方法是“cd”到 CVS 目录中与已删除文件相同的位置。

然后编辑名为“Entries”的文件。

找到代表您已删除文件的行。注意 / 后面有一个“-”

删除'-'，保存文件，瞧！

糟糕，但它有效。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2010-11-17T15:18:54.853

这就是我所做的。我只是创建一个同名的空文件，然后添加并提交它，然后检索旧版本并重新提交。

# eclipse - Eclipse 3.4 中更新站点类别的问题

> ID：144671
> 
> 赞同：5
> 
> 时间：2008-09-27T22:55:59.027
> 
> 标签：eclipse, eclipse-3.4, ganymede

我正在使用 Eclipse 3.4（ganymede 官方，而不是服务包）。

我有一个更新站点，可以将功能分类；在编辑器和 XML 中，一切看起来都很棒。

一旦网站上线，以通常的方式访问它会告诉我所有的功能都是“未分类的”。我已经尝试过运行 3.4 的多台计算机，但同样的问题仍然存在。

奇怪的是我使用了 Eclipse 3.3，它很好地看到了类别，当然它无法安装由 3.4 制作的插件。

我做错了什么还是这是一个已知问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T19:22:15.443

[由于新的“p2”供应系统](http://wiki.eclipse.org/Equinox_p2)，这似乎是一个已知问题。

请参阅[此讨论](http://dev.eclipse.org/newslists/news.eclipse.technology.equinox/msg04954.html)和[此错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=227675)。它似乎说的是......“保持原样直到3.5M3，然后再试一次”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-20T16:49:18.527

这个解决方案对我有用：

1.  使用 PDE 更新站点项目来创建 site.xml 并构建您的插件。确保在此处设置类别。
2.  删除更新站点构建创建的 artifacts.xml 和 content.xml。
3.  使用[P2 元数据生成器](http://wiki.eclipse.org/Equinox_p2_Metadata_Generator)生成您的工件和内容文件。我使用压缩选项，所以我得到了罐子。
4.  更新站点应包括：site.xml、内容和工件 jar、功能和插件文件夹。

如果您遵循此过程，它将在 Eclipse 3.3 和 3.4 中正常工作。自然，您应该使用 Ant 自动执行此过程。

重要笔记：

*   我从来没有让元数据生成器 Ant 任务工作，所以我以它的 Java 形式调用它（上面链接中的第二个示例）。
*   确保在生成之前清除工件和内容 xml
*   输入：site.xml 和构建的插件/功能文件夹
*   指定作为更新站点标题的 metadataRepositoryName（在某些情况下向用户显示）

我会尽快写博客……如果您有任何问题，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-08-01T08:45:15.113

似乎对我有用的是将标签（在 site.xml 中定义类别）放在包含其他类别标签的标签之前。如果在添加功能后使用 eclipse 的编辑器添加类别，它会搞砸的......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-07T14:54:11.410

对大多数人来说是一件很容易的事..但对于 Eclipse 更新站点上的新手来说，这可能是一个问题：请务必将您的功能添加为以下类别的子项：

见[http://ekkescorner.wordpress.com/2010/04/18/who-eats-the-categories-from-update-sites/](http://ekkescorner.wordpress.com/2010/04/18/who-eats-the-categories-from-update-sites/)

# javascript - 如何从 Ruby on Rails 中的 url 捕获锚值？

> ID：144675
> 
> 赞同：3
> 
> 时间：2008-09-27T22:59:14.273
> 
> 标签：javascript, ruby-on-rails, anchor

更新或创建记录后，我使用 url helper 重定向到页面上记录恰好位于的部分：

```
if record.save
  ....
  redirect_to records_url, :anchor => "record_" + record_id.to_s
end 
```

结果 url 将类似于

[http://localhost:3000/records#record_343242](http://localhost:3000/records#record_343242)

我想使用 jquery 或原型突出显示记录，并且锚点是我正在寻找的确切 ID。我可以捕捉它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T09:16:13.480

我想你是想用 JavaScript 来捕捉它吗？

```
var record_id = window.location.href.hash.split("_")[1]; 
```

在原型中你可以写：

```
var record_id = window.location.href.hash.split("_").last; 
```

# c# - 使用 Logging 框架有什么意义？

> ID：144682
> 
> 赞同：20
> 
> 时间：2008-09-27T23:02:12.473
> 
> 标签：c#, .net, logging

我想我可能错过了为您的应用程序提供日志记录框架的意义。在所有的小应用程序中，我总是编写一个小的“日志记录”类，并将日志消息传递给其中的一个方法，该方法写入文件中。

像 log4net 这样的 3rd 方日志框架的目的是什么？记录写入操作是线程安全的还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2008-09-28T00:43:31.793

这是一个很好的问题。

第一个原因是“为什么不呢？” 如果您使用的是日志框架，那么您将获得使用已打包内容的可维护性优势。

第二个原因是日志记录很微妙。不同的线程、会话、类和对象实例都可能在日志记录中发挥作用，您不希望即时解决这个问题。

第三个原因是您可能会在代码中发现性能瓶颈。弄清楚你的代码很慢，因为你正在写入一个没有缓冲的文件，或者你的硬盘驱动器已经用完了磁盘空间，因为记录器没有翻转和压缩旧文件，这可能会让人头疼。

第四个原因是您可能希望追加到 syslog、写入数据库、套接字或其他文件。框架内置了这个功能。

但实际上，第一个答案是最好的。编写自己的代码没有什么好处，还有一大堆缺点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T23:06:09.377

您可能希望切换到登录到数据库以获取某些消息，或者切换到向可怜的人寻求支持的警报系统

更重要的是，大多数日志框架允许您指定不同类的日志级别，因此您无需在每次需要更多/更少日志记录时剪切新的二进制文件（您刚刚在生产中发现的错误的详细日志记录）

[Log4Net 的网站](http://logging.apache.org/log4net/release/features.html "Log4Net 的站点")有更多细节

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2008-09-27T23:40:18.293

其他评论省略了一些东西：如果已经有一个库可以满足您的需求，*那么您就不必编写代码了*。

可能你在这里玩语义：对我来说，“日志框架”通常*只不过*是一个将日志消息写入文件的类......所以你所做的就是编写自己的日志框架。鉴于您已经这样做了，“使用日志框架”显然*有一些意义！*

最终，您将需要确保它正确处理并发日志记录（锁定输出流），可以记录到文件、系统日志等，可以进行日志滚动等等。您可以通过使用其他人经过良好测试的代码来节省自己的精力。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-27T23:20:45.020

一句话：灵活性。Log4xxx 使您能够执行不同的日志记录级别，将不同的代码模块记录到不同的文件中，并且无论遇到什么奇怪的情况，您都可以依赖它是可靠的（如果磁盘空间不足，您的记录器会做什么?)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-28T00:14:19.180

日志框架提供了灵活性并防止您重新发明轮子。我知道将任何现代语言附加到文件中都很简单，但是您的自制记录器是否有多个目标？您可以在运行时打开和关闭登录吗？当这些车轮免费提供时，为什么要冒爆胎的风险？

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-27T23:09:39.647

取决于您自己的日志记录系统实现的智能程度。

在java中，如果你想继承日志类型等，可能会比较麻烦，你更喜欢像Log4J这样的第三方工具。我认为 C# 也有类似的东西。同样，如果您想从命令行确定日志级别。

如果您只想路由所有 System.out 并控制是否在编译时打印它们，您自己的记录器就可以了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-27T19:49:26.723

只是为了争论，为什么不成熟的本土种植？它没有任何额外的行李，您可以完全控制它。

大多数 Logging 框架都有太多的特性，我们真的不会使用它们中的大多数，并且已经说过它们带有自己的包袱（它只是不是一个类，它是一个框架）。为什么不实现一个简单的本地日志记录，您的所有应用程序都将日志写入队列，一个简单的离线服务（可能是 Windows 服务）读取队列并将其写入您想要的位置（文件、数据库等）。通过使用队列，您可以实现异步操作并且没有锁定问题。

# java - Eclipse start up menu

> ID：144694
> 
> 赞同：1
> 
> 时间：2008-09-27T23:09:48.993
> 
> 标签：java, eclipse

What is the window which is displayed when you first install Eclipse called, and how can I find it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-27T23:13:47.640

Help -> Welcome

That thing?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-27T23:24:59.843

Do you mean the splash screen?

You can change it if you need (for example, your own RCP or a version of Eclipse like IBM's WSAD). Read about branding your application

(eg.,[http://www.eclipse.org/articles/Article-Branding/branding-your-application.html](http://www.eclipse.org/articles/Article-Branding/branding-your-application.html))

# ajax - 公开会话的 CSRF 保护令牌是否安全？

> ID：144696
> 
> 赞同：18
> 
> 时间：2008-09-27T23:11:05.930
> 
> 标签：ajax, django, security, csrf

Django 带有[CSRF 保护中间件](https://github.com/brosner/django-csrf/blob/master/django_csrf/middleware.py)，它生成一个唯一的每个会话令牌以在表单中使用。它扫描所有传入`POST`请求以获取正确的令牌，如果令牌丢失或无效，则拒绝请求。

我想对一些 POST 请求使用 AJAX，但是说请求没有可用的 CSRF 令牌。这些页面没有`<form>`可以挂钩的元素，我宁愿不要混淆将标记作为隐藏值插入的标记。我认为这样做的一个好方法是公开一个 vew 喜欢`/get-csrf-token/`返回用户的令牌，依靠浏览器的跨站点脚本规则来防止敌对站点请求它。

这是一个好主意吗？是否有更好的方法来防止 CSRF 攻击，同时仍然允许 AJAX 请求？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-02-10T17:55:11.613

**更新**：以下是正确的，如果所有浏览器和插件都正确实施，则应该是正确的。不幸的是，我们现在知道它们不是，并且浏览器插件和重定向的某些组合可以允许攻击者在跨域请求中提供任意标头。不幸的是，这意味着即使是带有“X-Requested-With: XMLHttpRequest”标头的 AJAX 请求现在也必须受 CSRF 保护。因此，Django[不再免除 Ajax 请求的 CSRF 保护](http://www.djangoproject.com/weblog/2011/feb/08/security/)。

**原始答案**

值得一提的是，保护 AJAX 请求免受 CSRF 影响是不必要的，因为浏览器不允许跨站点 AJAX 请求。事实上，Django CSRF 中间件现在[自动免除 AJAX 请求的 CSRF 令牌扫描](http://code.djangoproject.com/changeset/9554)。

这仅在您实际检查 X-Requested-With 标头服务器端的“XMLHttpRequest”值（Django 所做的）并且仅从 CSRF 扫描中免除真正的 AJAX 请求时才有效。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2008-09-28T01:36:36.050

如果您知道 AJAX 请求需要 CSRF 令牌，您可以随时将其嵌入到 HTML 中的某处；然后你可以通过 Javascript 通过遍历 DOM 找到它。这样，您仍然可以访问令牌，但不会通过 API 公开它。

换句话说：通过 Django 的模板来实现——而不是通过 URL 调度程序。这种方式更安全。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T17:58:09.217

**取消那个，我错了。（见评论。）**您可以通过确保您的 JSON 遵循规范来防止利用：始终确保您返回一个对象字面量作为顶级对象。（我不能保证不会有进一步的漏洞利用。想象一下浏览器在其 window.onerror 事件中提供对失败代码的访问！）

您不能依赖跨站点脚本规则来保持 AJAX 响应的私密性。例如，如果您将 CSRF 令牌作为 JSON 返回，则恶意站点可能会[重新定义 String 或 Array 构造函数](http://directwebremoting.org/blog/joe/2007/03/05/json_is_not_as_safe_as_people_think_it_is.html)并请求资源。

bigmattyh 是正确的：您需要将标记嵌入到标记中的某个位置。或者，您可以拒绝任何具有**不**匹配的引用者的**POST 。**这样，只有拥有过分使用软件防火墙的人才会容易受到 CSRF 的攻击。

# theory - 教学：字段、类和包关系

> ID：144700
> 
> 赞同：2
> 
> 时间：2008-09-27T23:11:58.597
> 
> 标签：theory

总的来说，我认为我可以很好地传达大多数与编程相关的概念。
然而，我仍然觉得很难总结字段、类和包之间的关系。

**您如何总结“字段”、“类”和“包”以及“它们的关系”？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-27T23:20:51.867

自从我教 C、C++ 和 Java 以来，我也遇到过类似的问题。这是我所做的：

首先，我将包分开保存并在最后进行解释。

理想情况下，在我看来，学生应该首先学习 ADT，最好是 C 语言。他们有结构，他们有单独的操作。然后，字段只是结构中的“插槽”，您甚至可以显示内存布局来演示它。函数是对这些结构进行操作的独立实体。

然后，您过渡到类、方法和字段，并证明它们在本质上（除了继承和一些轶事）在许多方面都是 ADT 的语法糖。

如果需要，您可以教授对象布局、继承和虚拟表（根据我的经验，它可以帮助学生更好地理解继承以查看内存布局）。

最后，您将讨论如何将课程组织在一起的主题。如果您教 C++，您实际上并没有包，但您可以解释命名空间并讨论组织和单独编译。

如果您使用 Java，那么您只需解释这些是同一名称空间中的类的集合，它们具有特殊的访问规则并显示它们。Java 中的包系统无论如何都被破坏了，所以我通常会通过模式（例如，将 UI 包与 C 分开）。

总而言之：类构成了对象的基础，这些对象是多个字段和对其进行操作的相关方法的内存排列。包是具有另一种访问限制机制的类的集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-27T23:34:40.087

我描述它的方式是：

*   对象是槽的集合，保存数据的槽是字段，保存代码的槽是方法。公共槽位于对象的外部，私有槽位于内部。方法应该主要是公共的，因为对象为客户提供服务，字段应该是私有的，因此客户不知道服务是如何工作的。因此，字段是对象的实现细节。
*   类名必须是唯一的，以便您可以将您的代码与第三方库结合起来。简单/简短的类名是不够的，因为可能有数千个名为“List”、“Customer”等的类......因此，类被放置在包中以创建更长、更难重复的名称。只有包中的一部分类需要对客户端可见，因此有两个访问级别：public 和 default。这允许包充当库。

所以字段是对象的一个​​实现细节，其类存在于包中以保证唯一的名称并提供类似库的模块化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T23:44:27.753

根据您要向其解释的人的年龄，可以使用一个简单的类比：税表。一个税表（比如1040EZ）就像一个类，表格上要填写的每个空格都是表格的一个字段。税表甚至包含有关如何处理字段中的信息的说明，就像一个类包含要对字段中的数据执行的成员函数一样。就像一套完整的税表不仅包括主要税表，还包括其他可能需要填写的表格（例如附加表），所以一个包不仅包含主要类，还包含它可能需要交互的其他类和。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-27T23:52:39.530

字段是属于类或类的对象实例的变量。局部变量和字段的区别在于字段的范围更广。

类是用户定义数据类型的模板。类比原始数据类型更高级，因为它们既有状态又有行为。

包用于对类进行分组并解决潜在的命名冲突。对于多个开发人员和公开可用的代码库，我们中的一些人很可能会将我们的类命名为相同（Math、LinkedList、FileUtils 等）。在类名前加上唯一的包名可以让编译器（和其他开发人员）确定您打算使用哪个类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T01:31:22.350

有趣的是，您处理 OO 编程时没有提到对象。我认为这可能是你的问题。

这是我使用的。

对象就是事物。它们具有属性（测量值、存在状态等）。属性可以称为字段。[我经常用我在教室里找到的东西——杯子、马克笔、帽子、外套等来说明这一点。]

对象也参与行为，称为方法、方法功能或操作。

对象的特征（属性和操作、字段和方法等）提供了一种对对象进行分类的方法。

一类对象共有的特征——嗯——可以被收集到一个类定义中。类定义描述了作为类成员的对象的属性和方法。

包是类定义的集合。虽然——理想情况下——包中的类有一些共同点，但这不是必需的，也不是有用的区别。

# .net - 如何将 .NET 控制台应用程序转换为 Winforms 或 WPF 应用程序

> ID：144701
> 
> 赞同：47
> 
> 时间：2008-09-27T23:13:24.130
> 
> 标签：.net, winforms, console

我经常从一个简单的控制台应用程序开始尝试一个想法，然后创建一个基于 GUI 的新项目并将代码复制进去。有更好的方法吗？我可以轻松转换现有的控制台应用程序吗？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2008-09-27T23:21:25.313

只需添加一个新的 Winform，将以下代码添加到您的`Main`：

```
 Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);
    Application.Run(new Form1()); 
```

此外，请确保在`[STAThread]`您的函数上方声明该属性`Main`以指示您的 Windows 应用程序将使用的 COM 线程模型（更多关于 STAThread[此处](https://www.youtube.com/watch?v=S0jPzb9kk3o)）。

然后右键单击您的项目并选择属性并将“输出类型”更改为 Windows 应用程序，您就完成了。

**编辑 ：**

在 VS2008 中，要更改的属性是 Application type

![在此处输入图像描述](https://i.stack.imgur.com/luhTN.jpg)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2009-03-31T00:58:24.397

为了完整性 - 以及像我这样的其他新手 - 您还需要添加：

使用 System.Windows.Forms；

...到 Program.cs 的顶部

# php - 用于 php 的熔断器绑定

> ID：144707
> 
> 赞同：4
> 
> 时间：2008-09-27T23:15:29.727
> 
> 标签：php, fuse

我正在编写一个到目前为止已经用 PHP 编写的应用程序，从接口到守护程序。我需要使用[fuse](http://fuse.sourceforge.net/)并且想继续使用 PHP 只是为了保持一致性。但是，似乎没有针对 PHP 的绑定。Python、Java 等都有绑定，我可以用这些语言编写代码，我只是不想在这个项目中添加额外的依赖项。我看过一个关于谷歌代码的项目，但没有完成。有谁知道这些有没有写？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-02-12T05:24:09.340

我为 PHP 编写了一个扩展，它提供了与 libfuse 的绑定。我已经阅读支持工作，但还没有完成写支持。最终我会完成它，但如果你想玩它，我很乐意修补。

[http://pecl.php.net/fuse](http://pecl.php.net/fuse)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T23:17:56.477

看看那些其他的绑定，然后写一个 PHP 扩展！:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2011-08-23T09:14:24.687

还有另一个可用的绑定：[https ://github.com/fujimoto/php-fuse](https://github.com/fujimoto/php-fuse)

这篇博文解释了如何安装它：[http ://blog.728.lu/?p=5](http://blog.728.lu/?p=5)

# xml - 为元素添加命名空间

> ID：144713
> 
> 赞同：11
> 
> 时间：2008-09-27T23:19:01.420
> 
> 标签：xml, xslt, namespaces

我有一个带有非命名空间元素的 XML 文档，我想使用 XSLT 向它们添加命名空间。大多数元素将在命名空间 A 中；一些将在命名空间 B 中。我该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2008-09-27T23:46:14.660

使用 foo.xml

```
<foo x="1">
    <bar y="2">
        <baz z="3"/>
    </bar>
    <a-special-element n="8"/>
</foo> 
```

和 foo.xsl

```
 <xsl:template match="*">
        <xsl:element name="{local-name()}" namespace="A" >
            <xsl:copy-of select="attribute::*"/>
            <xsl:apply-templates />
        </xsl:element>
    </xsl:template>

    <xsl:template match="a-special-element">
        <B:a-special-element xmlns:B="B">
            <xsl:apply-templates match="children()"/>
        </B:a-special-element>
    </xsl:template>

</xsl:transform> 
```

我明白了

```
<foo xmlns="A" x="1">
    <bar y="2">
        <baz z="3"/>
    </bar>
    <B:a-special-element xmlns:B="B"/>
</foo> 
```

那是你要找的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T23:38:13.260

这个食谱你需要两种主要成分。

酱料将是[身份转换](http://www.w3.org/TR/xslt.html#copying)，主要风味将由`namespace`属性赋予[`xsl:element`](http://www.w3.org/TR/xslt.html#section-Creating-Elements-with-xsl:element)。

以下未经测试的代码应将[http://example.com/](http://example.com/)命名空间添加到所有元素。

```
<xsl:template match="*">
  <xsl:element name="xmpl:{local-name()}" namespace="http://example.com/">
    <xsl:apply-templates select="@*|node()"/>
  </xsl:element>
</xsl:template>

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()"/>
  </xsl:copy>
</xsl:template> 
```

个人信息：你好，杰尼·坦尼森。我知道你在读这个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T23:22:44.810

这是我到目前为止所拥有的：

```
<xsl:template match="*">
    <xsl:element name="{local-name()}" namespace="A" >
        <xsl:apply-templates />
    </xsl:element>
</xsl:template>

<xsl:template match="a-special-element">
    <B:a-special-element xmlns:B="B">
      <xsl:apply-templates />
    </B:a-special-element>
</xsl:template> 
```

这几乎可以工作；问题是它没有复制属性。从我目前所读到的内容来看，xsl:element 没有办法按原样复制元素中的所有属性（use-attribute-sets 似乎没有削减它）。

# .net - Mono .NET Windows.Forms 使用什么 GUI 框架实现？

> ID：144716
> 
> 赞同：3
> 
> 时间：2008-09-27T23:19:41.887
> 
> 标签：.net, winforms, mono

Mono .NET Windows.Forms 使用什么 GUI 框架实现？

示例：KDE、Gnome、X11 本身？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-27T23:22:16.857

Mono 不使用 Qt (KDE) 或 GTK+ (GNOME) 小部件，因为[它们与 Winforms API 不匹配](http://www.mono-project.com/WinForms#Why_Not_Use_Native_Widgets.3F)。Mono 在其实现之上实现了 Winforms `System.Drawing`，而后者又使用了 Cairo。Cairo 处理本地图形实现，例如 Linux 中的 X11 或 OS X 中的 Quartz。

# jquery - ASP.NET MVC 和...YUI？jQuery？其他

> ID：144726
> 
> 赞同：3
> 
> 时间：2008-09-27T23:23:27.367
> 
> 标签：jquery, asp.net-mvc, ajax, yui

在我使用 WebForms 完成上一个项目之后，我决定在未来继续使用该框架。它非常适合让您的基本功能在那里......当您有更复杂的 UI 逻辑时不是很好。

我正在查看 ASP.NET MVC，并且喜欢我目前所看到的。当然，问题是您在进行更改时会丢失服务器端控件。我一直在寻找一个 Ajax 库，它可以很好地替代 Web 窗体小部件，就像现在的 YUI。

在这方面没有很多经验，我想请教有更多知识的人。哪个 Ajax 工具包提供了最完整的小部件库？是否可以结合两个或多个工具包来相互补充（例如 YUI 有一个很棒的 Grid，Scriptaculous 有一个很棒的 Calendar，让我们两全其美）？或者，一旦你选择了，你或多或少地与一个人联系在一起？

**感谢您的回答和出色的样本。ExtJS 看起来确实很有趣，我们在 Infragistics WebForms 套件上花费的钱不止这些，而且没有得到源代码。Flexigrid 看起来也不错。再次感谢！**

**更新 2 刚刚发现 MSFT 将[使用 ASP.NET MVC 发布 jQuery](http://weblogs.asp.net/scottgu/archive/2008/09/28/jquery-and-microsoft.aspx)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T02:35:12.650

我编写了一个 ASP.NET MVC 应用程序并将 jQuery 合并到其中。我发现 jQuery 帮助我处理会使我的视图过于复杂的事情......例如向我的网格添加交替样式等......

有许多 jQuery 插件填补了其他库可能存在的许多空白。例如，我使用了一个很棒的 jQuery 插件，叫做[Flexigrid](http://www.webplicity.net/flexigrid/)，我对控件的外观和功能非常满意。我写了[一篇](http://webdevdotnet.blogspot.com/2008/07/flexigrid.html)关于如何使用 c# 3.0 和 LINQ 使用 JSON 填充网格的博客文章。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-29T03:02:32.263

好吧，考虑到 jQuery 将开始与 Visual Studio 一起发布（首先是 MVC，然后是整个 Visual Studio），我会选择它。[这个消息今天才在这里](http://www.hanselman.com/blog/jQueryToShipWithASPNETMVCAndVisualStudio.aspx)传出来。

因此，由于 Microsoft 完全支持 jQuery，并且它已紧密集成到 Visual Studio 工作环境中，我强烈建议您使用它。

> 微软打算让 jQuery 成为官方开发平台的一部分。JQuery 将长期与 Visual Studio 一起提供，短期内它将与 ASP.NET MVC 一起提供。我们还将在 Visual Studio 中发布包含 Intellisense 的版本。
> 
> 公告博客文章
> 
> *   [ScottGu](http://weblogs.asp.net/scottgu/archive/2008/09/28/jquery-and-microsoft.aspx)谈 jQuery/Microsoft 的优点
> *   [John Resig](http://jquery.com/blog/2008/09/28/jquery-microsoft-nokia/)关于 jQuery/Microsoft 公告
> 
> 带有 jQ​​uery Beta 的 Visual Studio Intellisense 屏幕截图：
> 
> ![替代文字](https://www.hanselman.com/blog/content/binary/WindowsLiveWriter/a0bc711cf071_1469F/image_thumb.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-27T23:54:50.180

这个站点（stackoverflow）使用 ASP.NET MVC 和 jQuery，如果这有任何影响的话。

此外，ASP.NET MVC 现在随 jQuery 一起发布

[http://www.hanselman.com/blog/jQueryToShipWithASPNETMVCAndVisualStudio.aspx](http://www.hanselman.com/blog/jQueryToShipWithASPNETMVCAndVisualStudio.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T01:51:52.863

IMO [ExtJS](http://extjs.com/products/extjs/)拥有最完整的小部件，但您必须[付出代价](http://extjs.com/store/extjs/)才能将其用于商业用途。如果你不想付钱，YUI 也很好，它最近成长了很多。不过，大多数时候，我不需要小部件，所以我对 jQuery 和偶尔使用的[jQuery.UI](http://ui.jquery.com/)日期选择器很满意。

# interface - 为触摸屏写作时要考虑的事项？

> ID：144730
> 
> 赞同：12
> 
> 时间：2008-09-27T23:27:43.863
> 
> 标签：interface, touchscreen

我正在开始一个新项目，该项目涉及为机器开发一个界面，该界面可以测量镜片的楔形和圆度，并将信息存储在数据库中并进行报告。我们很有可能会在这台机器上安装一个触摸屏，这样它就不需要鼠标或键盘了……

我没有任何开发全尺寸触摸屏的经验，所以我正在寻找你们的建议/提示/信息......

我可以想象你想让元素比正常的大一点……空间按钮多一点……像这样的东西……还有其他人要添加的吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-09-28T00:18:22.383

有几点需要考虑：

*   触摸控件时需要考虑视差误差。基本上，用户可能会触摸您实际控制的上方或下方的屏幕，从而错过控制。这是控件大小的组合（例如，您可以使活动区域大于可视控件以允许用户错过并仍然激活控件），用户的视角（您可能会或可能不会预测/控制）和您正在使用的触摸屏类型。如果您知道用户在使用时相对于屏幕的位置，通常可以通过适当的校准来适应这一点。

*   根据触摸屏的类型，您可能需要确保您的用户没有戴手套或使用除手指以外的工具（例如笔的末端）来触摸屏幕。一些屏幕（例如那些取决于电导的屏幕）对除了血肉之外的任何东西都没有很好的反应。

*   避免使用双击，因为用户很难可靠地双击控件。如果您有经验丰富/训练有素的用户在他们习惯于屏幕的相当受控的环境中工作，则可以部分缓解这种情况。

*   链接到上面，如果您使用双击，您可能会发现当用户只想单击时激活了双击。这是因为用户的手指在触摸屏幕时很容易轻微弹跳，并且根据双击设置的敏感程度，触发双击而不是单击。由于这个和前面的原因，我们总是禁用双击并且只使用单击（或类似的单次激活控件）。

*   无论您认为需要使控件多大才能允许触摸激活，它们几乎肯定需要更大。确保在真实部署环境中与真实用户一起测试界面（或尽可能接近它）。例如，我们部署了一些带有漂亮大按钮的屏幕，你不能错过，结果却发现控制室没有加热，而且用户在冬天戴着厚手套，手指比我们允许的大得多。

*   不要将任何控件放在屏幕边缘附近 - 手指很难进入边缘（特别是如果屏幕有较深的边框），并且轻微的校准问题很容易将控件移到太靠近边缘而无法使用. 标准菜单和滚动条是在触摸屏上使用起来非常棘手的控件的一个很好的示例，您应该避免使用它们（这是可取的 - 它们不适合触摸屏）或使用巨型等效项复制它们。

*   请记住，用户的手会在屏幕上方，遮挡一些屏幕和控件（通常是用户触摸下方的那些，但这取决于用户相对于屏幕的位置）。不要将说明或指示器放在用户的手或手臂在尝试使用与它们相关的控件时会遮挡它们的位置（例如，通常将它们放在控件上方而不是下方）。

*   根据环境，确保您的触摸屏经过适当的防尘、防潮、防油脂等防护，并确保易于清洁而不会损坏它。您不会相信在工业或公共环境中的触摸屏上会迅速积聚的粘液。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-27T23:32:16.987

另一个明显的问题是没有指针“悬停”的等价物。但这并不影响许多应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-27T23:34:16.967

如果您决定放入模拟控件（滚动条、旋转小部件等），请务必同时放入数字控件。一些公司认为触摸屏意味着用手指完美控制某些东西。在现实生活中，这转化为试图修复一个稍微偏离的数字的几分钟的挫败感。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-09-27T23:40:13.490

最明显的一点是，GUI 上的所有内容都需要足够大，以供指尖敲击，有时比您想象的要大。

如前所述，右键单击操作实际上是不可能发生的。此外，在触摸屏上用指尖双击可能会很棘手。

另一件主要的事情是，您需要创建一个弹出用于文本输入的屏幕键盘和一个用于仅数字字段的屏幕小键盘。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2008-09-27T23:42:20.037

我为专门设计用于触摸屏友好的 POS 应用程序编写了自己的一组控件。

请记住为粗短的手指和爪子留出足够的空间。在我们的应用程序中，用户可以进行这些修指甲，这些修指甲需要他们使用指垫而不是指尖。这意味着您需要为激活区域留出比在任何其他类型的应用程序中通常考虑的更多空间。

我还建议您从测试的角度和从事情发生变化的角度来适应自己作为程序员，并且可能需要将键盘/鼠标连接到非触摸工作站。我无法告诉你有多少次我去触摸我的平板 LCD 期待会发生什么，然后才想起我必须使用鼠标。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2008-09-27T23:36:17.367

确保阅读您的基本 UI 原则，例如 Fitz 定律（获取目标的时间是与目标的距离和大小的函数）。

还要考虑设备在使用时是否静止（例如掌上电脑或 iPhone），研究表明您必须将其纳入您的设计。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-27T23:33:16.533

较大的gui元素是主要的。但它适用于所有元素、滚动条、选项卡甚至文本字段。

我能想到的另一件主要事情是，用户很难右键单击。所以应该避免需要右键单击的事情，上下文菜单是目前唯一想到的事情。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2008-09-28T00:00:35.313

其他的回答都很好，但你完全确定触摸屏实际上会更容易使用吗？有很多设备，触摸屏实际上使它们更难使用，而不是更容易。主要问题是当您不看设备时，您无法使用该设备。如果用户要执行大量重复操作，则键盘的效率可能会高得多。

此外，如果您认为发生这种情况的可能性很小，那么残障人士可能更难使用触摸屏。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2010-05-19T19:44:39.247

尽管现在这已经很老了，但我发现它仍然很有用，作为设计考虑的起点。

[http://www.sapdesignguild.org/resources/tsdesigngl/index.htm](http://www.sapdesignguild.org/resources/tsdesigngl/index.htm)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2008-09-28T10:50:58.777

如果您还没有这样做，请查看一些可供移动平台开发人员使用的文档，例如[Windows Mobile](http://msdn.microsoft.com/en-gb/windowsmobile/bb250568.aspx)、[iPhone](http://developer.apple.com/iphone/)。

# javascript - 您如何在 Javascript 中存储请求 URL 以满足 DRY 主体？

> ID：144731
> 
> 赞同：2
> 
> 时间：2008-09-27T23:27:48.933
> 
> 标签：javascript, ajax, web-services, design-patterns

Javascript 中是否有任何常用的模式来存储将在 AJAX 应用程序中请求的端点的 URL？

例如，您会创建一个“服务”类来抽象 URL 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T21:57:36.567

您可以创建一个 ValuePairs 集合，在其中存储每个 URL 值和一个标识符：

```
function ControlValuePair(Id, Value)
{   
    this.Id = Id;
    this.Value = Value;
}

function CreateCollection(ClassName)    
{
    var obj=new Array();
    eval("var t=new "+ClassName+"()");
    for(_item in t)
        {
            eval("obj."+_item+"=t."+_item);
        }
    return obj;
}

function ValuePairsCollection()
{
    this.Container="";
    this.Add=function(obj)
    {
        this.push(obj);
    }
} 
```

稍后您可以遍历集合或查找 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-27T23:31:28.270

您的问题与[这个已经回答](https://stackoverflow.com/questions/108853/relative-urls-for-javascript-files)的问题相似吗？如果是这样，答案是否也适用于您的代码？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T00:12:12.213

在哪里存储全局变量是个人选择的问题。最好将它们放在一个对象中以避免在全局命名空间中发生冲突，所以是的，一个名为 Service 的全局对象将是存储 URL 和其他在多个地方使用的字符串的好地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-10-07T03:01:38.507

我用过这样的东西（在 Rails 中使用）：

```
NAMESPACE.categories.baseUri = '/categories';
NAMESPACE.categories.getUri = function(options)
{
  options = options || {};
  var uri = [NAMESPACE.categories.baseUri];

  if(options.id)
  {
    uri.push(options.id); 
  }
  if(options.action)
  {
    uri.push(options.action);
  }
  if(options.format)
  {
    uri.push('?format=' + options.format);
  }

  return uri.join('/');
} 
```

# refactoring - 什么时候最好（如果有的话）废弃生产代码并重新开始？

> ID：144734
> 
> 赞同：53
> 
> 时间：2008-09-27T23:29:44.577
> 
> 标签：refactoring

我被要求进行代码审查并报告在我们的一个新产品中添加新功能的可行性，这是我迄今为止没有亲自参与过的产品。我知道挑剔别人的代码很容易，但我会说它的状态很糟糕（同时试图尽可能客观）。我的代码审查中的一些亮点：

*   **线程的滥用：** `QueueUserWorkItem`线程通常被*大量*使用，线程池委托具有无意义的名称，例如`PoolStart`和`PoolStart2`。线程之间也缺乏适当的同步，特别是在 UI 线程以外的线程上访问 UI 对象。

*   **魔术数字和魔术字符串**：一些`Const`' 和`Enum`' 是在代码中定义的，但大部分代码都依赖于文字值。

*   **全局变量**：许多变量被声明为全局变量，可能会或可能不会被初始化，具体取决于遵循的代码路径和发生的顺序。当代码也在线程之间跳转时，这会变得非常混乱。

*   **编译器警告**：主要解决方案文件包含 500 多个警告，我不知道总数。我收到了来自 Visual Studio 的警告，它无法再显示任何警告。

*   **半成品类**：代码被处理并添加到这里和那里，我认为这导致人们忘记了他们之前所做的事情，所以有一些看似半成品的课程和空存根。

*   **Not Invented Here**：该产品复制了其他产品使用的通用库中已经存在的功能，例如数据访问帮助程序、错误记录帮助程序和用户界面帮助程序。

*   **关注点分离**：我认为有人在阅读典型的“UI -> 业务层 -> 数据访问层” 3 层架构时将这本书颠倒了。在这个代码库中，UI 层直接访问数据库，因为业务层部分实现但由于没有充分充实而大部分被忽略，而数据访问层控制着 UI 层。大多数低级数据库和网络方法都在对主窗体的全局引用上进行操作，并直接显示、隐藏和修改窗体。在实际使用比较薄的业务层*的*地方，它也倾向于直接控制 UI。大多数低级代码也使用`MessageBox.Show`在发生异常时显示错误消息，并且大多数会吞下原始异常。这当然使得在尝试重构之前开始编写单元测试以验证程序的功能变得更加复杂。

我只是在这里触及表面，但我的问题很简单：花时间重构现有代码库，一次只关注一个问题，还是考虑从头开始重写整个事情是否更有意义？

**编辑**：澄清一下，我们确实有项目的原始要求，这就是为什么重新开始可能是一种选择。我的问题的另一种表达方式是：代码是否可以达到维护成本大于丢弃和重新开始的成本的地步？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2008-09-28T03:14:19.967

无意冒犯，从头开始重写代码库的决定是新手软件开发人员常犯的严重管理错误。

有许多缺点需要警惕。

*   重写会阻止新功能在几个月/几年内被冷开发。很少有公司能够承受这么长时间的停滞不前。
*   大多数开发计划都很难确定。这次改写也不例外。现在，通过延迟开发来扩大前一点。
*   通过痛苦的经验在现有代码库中修复的错误将被重新引入。Joel Spolsky 在[本文](http://www.joelonsoftware.com/articles/fog0000000069.html)中有更多示例。
*   [成为第二系统效应](http://en.wikipedia.org/wiki/Second-system_effect)牺牲品的危险——总而言之，“以前只设计过一次东西的人会尝试做所有他们“上次没能做”的事情，把所有的项目都装满他们在制作第一版时推迟的事情，即使他们中的大多数也应该在第二版中推迟。''
*   一旦完成了这种昂贵、繁重的重写，下一个继承新代码库的团队可能会使用同样的借口进行另一次重写。程序员讨厌学习别人的代码。没有人写出完美的代码，因为完美是如此主观。找我任何现实世界的应用程序，我可以给你一个该死的控告和理由，让你从头开始重写。

无论您最终是否从头开始重写，现在开始重构阶段都是真正坐下来理解问题的好方法，以便在真正需要时重写会更加顺利，以及让现有代码库看起来更诚实真正看看是否需要重写。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2008-09-27T23:39:12.197

真正报废并重新开始？

当当前代码没有按照您的意愿执行时，并且更改成本高昂。

我相信现在有人会链接 Joel 关于 Netscape 丢弃他们的代码以及它是多么可怕和一个巨大的错误的文章。我不想详细谈论它，但如果你链接那篇文章，在你这样做之前，请考虑一下：IE 引擎，允许 MS 快速发布 IE 4、5、5.5 和 6 的引擎继任者，彻底摧毁 Netscape 的 IE 引擎……它是新的。Trident 是他们抛弃 IE 3 引擎后的一个新引擎，*因为它没有为他们未来的开发工作提供合适的基础*。MS 做了乔尔说你绝不能做的事，这是*因为*MS 这样做是为了让他们拥有一个浏览器，可以让他们完全超越 Netscape。所以请……在你联系乔尔并说“哦，你永远不应该这样做，这是一个糟糕的主意”之前，先思考一下这个想法。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2008-09-27T23:43:15.790

我发现一个有用的经验法则是，如果给定一个代码库，如果我必须重新编写超过 25% 的代码以使其工作或根据新的需求对其进行修改，那么你也可以重新编写从头开始。

原因是到目前为止您只能修补一段代码；超过某个点，它会更快地完成。

有一个基本假设是您有一种机制（例如彻底的单元和/或系统测试），它将告诉您您的重写版本在功能上是否与原始版本相同（在需要的地方）。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2008-09-28T00:29:01.703

> 如果阅读和理解代码（如果可能的话）比重写整个应用程序需要更多的时间，我会说废弃它并重新开始。

对此要非常小心：

1.  你确定你不只是懒惰而且懒得看代码吗
2.  与其他人产生的垃圾相比，您是否对自己将编写的出色代码感到自大。
3.  请记住，经过测试的工作代码比想象中的尚未编写的代码更有价值

用我们尊敬的主人和霸主[Joel 的话来说——你不应该做](http://www.joelonsoftware.com/articles/fog0000000069.html)的事情，
放弃工作代码并不总是错误的——但你必须确定原因。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2008-09-28T01:50:05.347

我看到一个应用程序在引入生产后的 2 年内重新架构，而其他应用程序则用不同的技术重写（一种是 C++ - 现在是 Java）。在我看来，这两种努力都不成功。

对于糟糕的软件，我更喜欢一种更进化的方法。如果您可以“组件化”您的旧应用程序，以便您可以引入您的新需求并与旧代码交互，那么您可以轻松进入新环境，而无需“出售”零价值（从商业角度）投资重写。

建议的方法 - 为您希望与之交互的功能编写单元测试 1) 确保代码的行为符合您的预期，以及 2) 为您可能希望在旧基础上进行的任何重构提供安全网。

糟糕的代码是常态。我认为 IT 因支持重写/重新架构/等而受到商业界的诟病。他们付钱并“信任”我们（作为一个行业）来交付可靠、可扩展的代码。可悲的是，业务压力经常导致使代码无法维护的捷径。有时是糟糕的程序员……有时是糟糕的情况。

回答你改写的问题......代码维护成本是否会超过重写成本......答案显然是肯定的。但是，我在您的示例中看不到任何内容，这使我相信这是您的情况。我认为这些问题可以通过测试和重构来解决。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2008-10-13T21:44:39.223

就商业价值而言，我认为仅由于代码的内部状态而可以进行重写的真实案例极为罕见。如果产品是面向客户的，并且当前是活的并且带来了资金（即不是封存或未发布的产品），那么请考虑：

*   您已经有客户在使用它。他们熟悉它，并且可能围绕它建立了一些自己的资产。（与它交互的其他系统；基于它的产品；他们必须改变的流程；他们可能必须重新培训的员工）。所有这些都花费了客户的钱。
*   从长远来看，重新编写它*可能比进行困难的更改和修复成本更低。*但是你还不能量化它，除非你的应用程序不比 Hello World 复杂。重写意味着重新测试和重新部署，并且可能是您客户的升级路径。
*   谁说重写会更好？你能诚实地说你的公司现在正在编写闪亮的代码吗？将原始代码变成意大利面条的做法是否已得到纠正？（即使罪魁祸首是单个开发人员，他的同事和管理层在哪里，通过审查、测试等来确保质量？）

就技术原因而言，我建议如果原版具有一些已成为问题的技术依赖关系，则可能是进行重大重写的时候了。例如，现在不支持的第三方依赖项等。

*不过，总的来说，我认为最明智的做法是逐个重构（如果真的那么*糟糕，那就是非常小的部分），并逐步改进内部架构，而不是一次大跌。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2008-09-27T23:37:19.143

关于这一点的两个想法：你有最初的要求吗？您有信心原始要求是准确的吗？测试计划或单元测试呢？如果你有这些东西，它可能会更容易。

戴上我的客户帽子，系统工作正常还是不稳定？如果你有一些不稳定的东西，你就有理由改变；否则你最好一点一点地重构它。

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2008-09-27T23:40:31.383

我认为沙中的线是基本维护花费的时间比应有的时间长 25% - 50%。有时维护遗留代码变得过于昂贵。许多因素会影响最终决定。我认为时间和成本是最重要的因素。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2008-09-28T00:29:37.240

如果有干净的接口并且您可以清楚地描绘模块边界，那么*可能*值得逐个模块或逐层重构它，以便您将现有客户迁移到更干净更稳定的代码库中，并且随着时间的推移，在您之后重构了每个模块，您将重写所有内容。

但是，根据 codereview，听起来似乎没有任何清晰的界限。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2008-09-30T22:09:33.697

我想知道投票赞成报废和重新开始的人是否曾经成功地重构过一个大型项目，或者至少看到过一个他们认为可以使用重构的状况不佳的大型项目？

如果有的话，我犯了相反的错误：我见过 4 个大项目是一团糟，我主张重构而不是重写。在一对夫妇中，几乎没有留下一行原始代码，并且主要接口发生了重大变化，但该过程从未导致整个项目在超过一周的时间内无法像最初那样正常运行。（并且树干顶部从未损坏）。

也许存在一个严重损坏的项目，以至于尝试重构它注定要失败，或者我重构的以前的项目之一可能会更好地通过“干净的重写”来服务，但我不确定我会知道如何识别它。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2008-09-27T23:42:24.593

我同意马丁的观点。您确实需要权衡从头开始编写应用程序所涉及的工作量与应用程序的当前状态以及有多少人使用它，他们是否喜欢它等。通常我们可能希望完全从头开始，但是成本远远大于收益。我总是遇到一些难看的代码，但我很快意识到其中一些“难看”的区域确实是错误修复，并使程序正常工作。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2008-09-28T00:25:24.473

我会尝试考虑系统的架构，看看是否有可能废弃和重写特定定义良好的组件，而无需从头开始一切。

通常会发生的情况是，您可以这样做（然后将其出售给客户/管理层），或者您发现代码是如此可怕和纠结，以至于您更加确信您需要重写和有更令人信服的论据（包括：“如果我们设计得当，我们永远不需要废弃整个东西并进行第三次重写）。

缓慢的维护最终会导致架构漂移，这将使以后的重写成本更高。

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2008-09-28T00:33:37.293

尽早并经常废弃旧代码。如有疑问，请将其丢弃。困难的部分是让非技术人员相信维护成本。

只要派生的价值似乎大于运营和维护成本，软件仍然会产生积极的价值。围绕重写的问题是：“我们会从重写中获得更多价值吗？” 或者“我们将从重写中获得多少价值？” 您将节省多少工时维护？

请记住，重写投资只有一次。重写投资的回报永远持续。 **永远**。

将价值问题集中到具体问题上。你在上面列出了一堆。坚持下去。

*   “我们是否会通过丢弃我们不使用但仍必须涉水而过的垃圾来降低成本，从而获得更多价值？”

*   “我们会从丢弃不可靠和损坏的垃圾中获得更多价值吗？”

*   “如果我们理解它，我们是否会获得更多价值——不是通过记录，而是通过替换我们作为一个团队构建的东西？”

你做作业。您将不得不面对以下表演障碍。这些将起源于您的执行食物链中的某个地方，来自以下人员的回应：

*   “坏了吗？” 当你说“它没有*崩溃*”时，他们会说“它没有坏——不要修复它。”

*   “你已经完成了代码分析，你理解了它，你不再需要修复它。”

你对他们的回答是什么？

这只是第一个障碍。这是最糟糕的情况。这并不总是发生，但确实以惊人的频率发生。

你的执行食物链中的某个人会有这样的想法：

*   “重写并不能创造足够的价值。与其简单地重写，不如让我们扩展它。” 理由是通过创造*足够的*价值，用户更有可能购买重写。

一个范围扩大——人为地——以增加价值的项目通常注定要失败。

相反，做最小的重写来替换该死的东西。然后扩展以满足实际需求并增加价值。

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2008-09-27T23:44:44.603

如果你完全知道你的应用程序是如何工作的（我的意思是完全我的意思，而不仅仅是对它应该如何工作有一个大致的了解）并且你或多或少确切地知道如何制作它，你只能对重写给出明确的肯定更好的。任何其他情况，它都是在黑暗中拍摄，这取决于太多的事情。如果可能的话，也许逐步重构会更安全。

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2008-09-28T08:57:52.293

越早越好。每当你预感到你的代码正在慢慢变成一头丑陋的野兽，很可能会消耗你的灵魂并让你头疼，并且你知道问题出在代码的底层结构中（所以任何修复都是黑客攻击，例如引入一个全局变量），那么是时候重新开始了。

出于某些原因，人们不喜欢丢弃宝贵的代码，但如果您觉得重新开始会更好，那么您可能是对的。相信你的直觉，记住这不是浪费时间，它教会了你另一种不解决问题的方法。您可以（应该）始终使用版本控制系统，这样您的宝宝就不会真正迷路。

* * *

## 回答 #16

> 赞同：2
> 
> 时间：2008-09-28T01:25:24.377

如果可能的话，当我需要重构基线时，我通常更愿意随着时间的推移重写代码的较小部分。通常有许多较小的问题，例如幻数、糟糕的注释等，这些问题往往会使代码看起来比实际更糟。因此，除非基线非常糟糕，否则请保留代码并在维护代码的同时进行改进。

如果重构需要大量工作，我建议您列出一个小的重新设计计划/待办事项列表，其中列出了要处理的事项，以便您可以将基线提升到更好的状态。从头开始总是一个冒险的举动，并且不能保证完成后代码会更好。使用这种技术，您将始终拥有一个随着时间的推移而改进的工作系统。

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2008-09-28T01:28:00.237

圈复杂度过高的代码（如大量模块中超过 100 个）是一个很好的线索。另外，它有多少错误/KLOC？这些错误有多重要？修复错误时引入错误的频率。如果你的答案*很多*（我现在不记得规范），那么重写是有必要的。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2008-10-13T21:53:51.420

*什么时候最好（如果有的话）废弃生产代码并重新开始？*

从来不需要这样做，但是逻辑会决定（无论如何对我来说）一旦你通过了一个拐点，你在现有代码库中花费更多的时间返工和修复错误而不是添加新功能，就该扔垃圾了旧的东西，重新开始。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2008-09-28T02:55:33.193

我认为规则是...

*   第一个版本总是被抛弃

所以，如果你学到了你的课，或者他/她的课，那么你现在可以继续写它，因为你更好地理解了你的问题领域。

并不是说没有可以/应该保留的部分。经过测试的代码是最有价值的代码，所以如果它在样式之外没有任何实际的缺陷，那么没有理由把它*全部*扔掉。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2008-09-28T02:06:00.643

我自己没有任何使用指标的经验，但文章 [“实践中的软件可维护性指标模型”](http://www.stsc.hill.af.mil/crosstalk/1995/11/Maintain.asp)讨论了这里提出的两个案例研究中或多或少相同的问题。它从以下编者注开始：

> 过去，当维护人员收到要维护的新代码时，经验法则是“如果您必须更改他人代码的 40% 以上，则将其丢弃并重新开始。” 此处提到的可维护性指数 [MI] 提供了一种更可量化的方法来确定何时“扔掉并重新开始”。这项工作由美国空军信息战中心和美国能源部 [DOE]、爱达荷州外地办事处赞助，DOE 合同号 DE-AC07-94ID13223。）

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2008-10-03T19:02:55.870

当代码达到不再可维护或可扩展的程度时。充满了短期的hacky修复。它有很多耦合。它有很长的（100 多行）方法。它在 UI 中具有数据库访问权限。它会产生很多随机的、无法调试的错误。

底线：维护它比重写它更昂贵（即花费更长的时间）。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2008-09-28T00:12:41.977

如果阅读和理解代码（如果可能的话）比重写整个应用程序需要更多的时间，我会说废弃它并重新开始。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2008-09-28T02:21:29.857

生产代码总是有一些价值。唯一让我真正放弃并重新开始的情况是，如果我们确定知识产权受到不可挽回的污染。例如，如果有人从以前的雇主那里带来了大量代码，或者大部分代码是从 GPLd 代码库中窃取的。

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2008-09-28T00:43:44.977

我从来没有完全抛弃过代码。即使从 foxpro 系统转到 ac# 系统。

如果旧系统有效，那么为什么要把它扔掉呢？

我遇到了一些非常糟糕的系统。在不需要的地方使用线程。可怕的继承和滥用接口。

最好了解旧代码在做什么以及为什么这样做。然后更改它，以免混淆。

当然，如果旧代码不起作用。我的意思是甚至无法编译。那么你可能有理由重新开始。但这种情况实际发生的频率是多少？

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2008-09-28T01:15:49.110

是的，这完全有可能发生。我已经看到这样做可以省钱。

这不是技术决策，而是商业决策。代码重写是长期收益，而“如果它没有*完全*崩溃……”是短期收益。如果您是第一年专注于将产品推出市场的初创公司，那么答案通常就是忍受它。如果您在一家成熟的公司，或者当前系统的错误导致更多的工作量，因此需要更多的公司资金......那么他们可能会这样做。

尽可能向您的 GM 提出问题，尽可能使用美元价值。“我不喜欢处理它”没有任何意义。“在解决这个问题之前，做所有事情都需要两倍的时间”意味着很多。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2008-09-28T01:21:41.360

我认为这里有很多问题很大程度上取决于你所处的位置。

从客户的角度来看，该软件是否运行良好？（如果是，请非常小心更改）。我认为，除非您在系统正常工作的情况下扩展功能集，否则重新认识是没有意义的。您是否计划扩展该软件的功能和客户群？如果是这样，那么你有更多的理由改变。

即使写得好，仅仅试图理解其他人的代码也可能很困难，但如果写得不好，我想几乎是不可能的。您所描述的内容听起来很难扩展。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2008-09-28T01:36:03.993

我会考虑该应用程序是否按预期执行，是否需要您进行修改，并且您是否确信该应用程序已在将要使用的所有场景中经过全面测试。

如果应用程序不需要更改，请不要投入时间。但是，如果它不能按您的需要运行，并且您需要控制投入的时间和时间来进行更正，请废弃它并重新编写您的团队可以支持的标准。没有什么比你必须支持/破译但仍然必须忍受的糟糕代码更糟糕的了。请记住，墨菲定律说晚上 10 点你必须让事情顺利进行，而这永远不会有成效。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2008-09-30T03:07:47.780

每当我看到关于重构的讨论时，我都会发布这本书。每个人都应该阅读 Michael Feathers 的“有效地使用遗留代码”。我发现它是一本很棒的书——如果没有别的，它读起来很有趣，而且很励志。

* * *

## 回答 #29

> 赞同：0
> 
> 时间：2009-03-16T20:48:32.317

我曾经相信只是从头开始重写，但这是错误的。

[http://www.joelonsoftware.com/articles/fog0000000069.html](http://www.joelonsoftware.com/articles/fog0000000069.html)

改变我的主意了。

我的建议是找出一种正确重构代码的方法。保留所有现有功能并随时进行测试。我们都见过可怕的代码库，但随着时间的推移保持应用程序所拥有的知识很重要。

# c - 开始对计算机以外的其他东西进行编程的最佳方式是什么？

> ID：144735
> 
> 赞同：25
> 
> 时间：2008-09-27T23:30:06.260
> 
> 标签：c, embedded, microcontroller, device

开始在计算机之外进行编程的最佳方式是什么？

我不是指主流的东西，比如带有 API 的手机。

请假设 C/C++ 的工作知识

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2008-09-28T00:22:55.103

我投票给任天堂 DS：

*   不错的硬件：2 个 CPU、2 个屏幕、触摸屏、麦克风、扬声器、无线、2D 和 3D 加速
*   没有操作系统可言
*   不受限制地与裸机交谈的自由
*   有据可查
*   非常活跃的开发社区
*   热情的观众喜欢你创造的任何酷炫的东西
*   便宜（如果您购买第一代设备，那就太令人震惊了）

总而言之，玩起来真的很有趣。

开始：

1.  获取[DS](http://www.nintendo.com/ds/systems)
2.  获得一个 SLOT1 闪存车（我有一个 DS-X，但还有很多其他的）
3.  获取[devkitpro](http://www.devkitpro.org/downloads/)
4.  去[这里](http://forum.gbadev.org/viewforum.php?f=18)寻求帮助或建议

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-27T23:35:25.390

布赖恩，你可能会觉得[Arduino](http://www.arduino.cc/)很有趣。它很便宜而且很受欢迎。几年前，我开始玩微控制器板，这导致了对机器人的兴趣。有点意思，至少对我来说。

如果有人对 .NET 风格的开发环境感兴趣，有一个类似于 arduino 的调用[netduino](http://netduino.com/)值得一看。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-27T23:41:58.057

嵌入式编程很有趣。[您可以从Basic stamp](http://www.parallax.com/tabid/295/Default.aspx) 或[PIC](http://en.wikipedia.org/wiki/PIC_microcontroller)
之类的东西开始，或者由于您了解 c/c++，您可以使用真正的 microcrontroller，例如 Atmel AVR。查看[蝴蝶](http://en.wikipedia.org/wiki/AVR_Butterfly)或[Arduino](http://Arduino.cc)套件

Arduino背后有一个令人惊叹[的项目和信息社区。](http://www.freeduino.org/)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-27T23:57:29.657

它不是微控制器，但[Lego Minstorm](http://mindstorms.lego.com/eng/LEGOLAND_germany/Default.aspx)是开始学习嵌入式编程细节的好地方。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2008-09-27T23:33:50.120

最近听说了一个自称为“开源硬件开发”的[BUG 。](http://buglabs.net)这是你要找的东西吗？

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2008-09-28T03:24:57.227

给自己买一个[HP 10C 计算器](http://en.wikipedia.org/wiki/HP-12C)，然后使用它极其小巧但实用的计算器语言对所有“编程 101”数学算法进行编程。让我想起了汇编程序，但事实并非如此。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-10-29T19:10:44.480

我强烈建议在您的一项休闲职业旁边找到一个开源项目。

首先，开源是因为支持非常友好，然后是开源，因为其他贡献者至少有一个类似的爱好，然后是最喜欢的消遣职业，这样你就可以看到对工具等的需求。

我一直在玩的两个项目非常成功：

*   音乐：[Rockbox](http://www.rockbox.org)，许多 mp3 播放器和便携式媒体播放器的固件替代品。
*   摄影：[CHDK](http://chdk.wikia.com/wiki/CHDK)，是众多佳能紧凑型静态相机的固件补充。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-10-31T19:18:14.613

给[SparkFun](http://www.sparkfun.com/commerce/categories.php)一个机会。对我来说，伺服系统是我喜欢使用的东西。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2009-05-06T12:02:59.147

您可以尝试使用[BeagleBoard](http://beagleboard.org/)，尽管它是一种主流，但性能却非常令人印象深刻，售价仅为 149 美元。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2008-09-27T23:39:27.500

我会研究（非官方）GBA 开发之类的东西，肯定有“图书馆”，但你可以去挖掘，只需将位插入特定地址并让事情发生。您无法获得比原始内存映射硬件访问更多的“无 API”。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2008-09-27T23:36:37.773

也许从小型微控制器项目开始。这可能会有所帮助：[http ://www.kmitl.ac.th/~kswichit%20/](http://www.kmitl.ac.th/~kswichit%20/)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2008-09-28T00:01:27.010

你想编程什么样的东西？

听起来您可能对[MAKE](http://makezine.com/)杂志以及他们的一些汇编感兴趣，例如[Making Things Talk](http://oreilly.com/catalog/9780596510510/)。有了一点基本电子产品的经验，您就可以按照他们的食谱做各种奇怪而有趣的事情。当你变得更舒服时，你可以开始修改他们的设计。

祝你好运， ：）

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2008-09-28T01:36:34.070

我有个人经验，建议使用这些产品对 PIC 进行编程：

[编程板](http://microengineeringlabs.com/products/usbprog.htm) [GCBasic (Open Source Basic)](http://gcbasic.sourceforge.net/)

PIC 很便宜（大约 2 美元），而电路板的价格约为 120 美元。

最近，我对 TI 的无线 USB 芯片/编程器印象深刻。你可以花 50 美元买到 2 个芯片和一个程序员。它还带有一个免费的 C 编译器。默认情况下，它带有一个示例远程温度程序。

[TI 无线目标板](http://focus.ti.com/docs/toolsw/folders/print/ez430-rf2500t.html)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2008-09-28T01:38:11.927

我认为破解旧 iPod 很有趣。您可以获得[第四代 iPod](http://en.wikipedia.org/wiki/IPod#Models)（或任何[支持的设备](http://www.rockbox.org/twiki/bin/view/Main/TargetStatus)），在其上运行[Rockbox](http://www.rockbox.org/)，然后获取源代码并帮助破解它。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2008-10-31T12:27:38.390

我还推荐 AVR（8 位）和 Butterfly 或[DB101](http://www.atmel.com/dyn/Products/tools_card.asp?tool_id=4221)套件。主要优点是有一个可用的 GCC 编译器，您可以通过串行端口对它们进行编程，而无需工具。还提供廉价的编程和调试工具。[AVRFreaks](http://www.avrfreaks.net)中有一个非常强大的 AVR 社区

另一种选择是 ARM7 和 ARM9 微控制器（32 位）。如果您对使用操作系统（ARM7 的 ucLinux/FreeRTOS，ARM9 的 Linux）感兴趣，那么您应该这样做。当然有一个免费的 GCC 编译器。[您可以在Olimex](http://www.olimex.com/)购买套件和工具

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2009-06-09T13:49:07.900

如果您想使用微控制器创建一个很酷的小工具作为学习体验，您可以查看 Rabbit 的入门套件（[网站](http://www.rabbit.com/)）。他们有各种带有 8 位微控制器的低成本套件，可以开始使用特定技术。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2008-09-28T00:13:37.717

周围有很多可编程机器人。事实上，甚至一些 Roombas（自动吸尘器）也可以编程。如果您想教孩子如何编程，这特别好。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2008-09-28T00:26:35.953

如果你有任天堂 Wii，你可以使用暮光公主破解它。你甚至不必买它。我刚租了几天。访问[WiiBrew.org](http://www.wiibrew.org/wiki/Main_Page)并查看那里可用的一些项目。大多数（如果不是全部）都是开源的，应该给你一个很好的起点。许多现有东西的端口，以及一些专门为 Wii 编写的原始程序。您当然会在您的计算机上进行编程，并将编译后的二进制文件传输到 Wii。我还没有研究过设置开发环境并为 Wii 构建开发环境有多难，但是如果您通过电子邮件向他们发送来自 wiibrew.org 的项目维护人员，他们可能会为您设置。

[编辑]

只是浏览了一下，我发现[了 DevkitPro](http://www.wiibrew.org/wiki/DevkitPro)，它似乎是在许多不同的控制台和手持系统（包括 Wii）上进行开发的首选工具包。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2008-09-28T00:59:28.480

为了让自己更轻松地进行嵌入式编程，您可能想尝试在 Xbox 或 Zune 上使用 XNA。你不会做内存管理，但如果你在 Zune 上做，你会习惯受限的硬件。不可否认，它使用的是 C#；但是您总是可以使用 CIL 自己进行编程。

# sql-server - 如何在 SqlServer 中安装/注册多个实例

> ID：144739
> 
> 赞同：1
> 
> 时间：2008-09-27T23:32:12.057
> 
> 标签：sql-server

除了仅安装一个 SqlServer 版本的默认本地实例之外，是否可以在任何 SqlServer 版本中安装/注册另一个本地服务器实例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-27T23:43:19.363

是的，这是可能的。我的服务器中有几种组合。我有一台并排安装了 SQL Server 2000 和 2005 的服务器。我的工作桌面是 Windows 2003 Server，并排安装了 SQL Server 2005 和 2008。

您想要的称为命名实例。安装过程中会出现一个屏幕，您可以在其中为其命名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-27T23:44:13.403

是的。通常，安装程序会检测到您有一个或多个现有实例，并提示您输入实例名称。我们在一个开发盒上设置了三个 SQL Server 2000 标准版本，以在我们的一个客户上模拟三个生产服务器。

# windows - 如何将 D 编程语言安装到 C:\Program Files 中？

> ID：144745
> 
> 赞同：2
> 
> 时间：2008-09-27T23:34:32.287
> 
> 标签：windows, installation, d

提示说，如果我将软件安装到带有空格的目录中：

> D共享源系统使用的rebuild构建工具将无法构建

我会

> 被迫在不同的位置重新安装

但是，我不喜欢 C:\ 驱动器中的随机事物。D、IMO，与 PHP 和 MinGW 等属于 Program Files。我怎么能在这里得到它？

如果重要的话，我正在使用 Easy D 安装程序包。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T00:32:47.933

您还可以使用[NTFS Link](http://elsdoerfer.name/=ntfslink)在 NTFS 文件系统上创建连接点（用于所有意图和目的的符号链接）和硬链接。该功能内置于 NTFS 驱动程序中，但从未为其实现接口，大概是为了避免递归目录结构之类的事情（无休止的病毒扫描循环任何人？）。这个包暴露了这个功能的接口。

然后我会创建一个从`C:\Program Files\`到类似的符号链接`C:\ProgramFiles\`，从而处理有问题的空间。这意味着添加到一个目录的任何内容都将添加到另一个目录，因为两个目录都指向磁盘上的同一位置。

[有关 NTFS 连接点的更多信息。](http://en.wikipedia.org/wiki/NTFS_junction_point)

[NTFS 符号链接信息（仅限 Vista，但不需要安装 NTFS 链接。）](http://en.wikipedia.org/wiki/NTFS_symbolic_link)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T01:51:53.017

您可以尝试为 Program Files 目录使用旧的 DOS 8.3 名称，尽管此解决方案依赖于实现和区域设置，因此有些不推荐使用。在大多数美国英语系统上，C:\Program Files 目录的 8.3 名称是 C:\PROGRA~1。因此，不是安装到“C:\Program Files\dmd”，而是安装到“C:\PROGRA~1\dmd”。希望行为不端的程序的配置文件不会知道其中的区别。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T23:42:24.263

您可以将其安装到 C:\Program Files，然后使用`subst`命令使其显示为新的驱动器号：

```
subst x: "c:\program files\d" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T01:19:46.807

实际上，对于这种情况，我使用“c:\Programs”——相当多的应用程序在带有空格的目录中不能很好地工作。

它不会引起混淆，因为它与“c:\Program Files”有足够的不同——早期的尝试使用了“c:\ProgramFiles”（没有空格），但这太相似了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-12-15T03:31:22.210

我的机器上有一个 C:\Dev 文件夹来存放这样的东西。这样，您在主目录上只有一个文件夹，并且它保持整洁。

# c++ - 如何删除 C++ std::string 中的重音符号和波浪号

> ID：144761
> 
> 赞同：17
> 
> 时间：2008-09-27T23:42:17.307
> 
> 标签：c++, string, text, str-replace

我对 C++ 中的一个字符串有疑问，该字符串在西班牙语中有几个单词。这意味着我有很多带有重音符号和波浪线的单词。我想将它们替换为没有重音的对应物。示例：我想替换这个词：“había”代表 habia。我尝试直接替换它，但使用字符串类的替换方法，但我无法让它工作。

我正在使用这段代码：

```
for (it= dictionary.begin(); it != dictionary.end(); it++)
{
    strMine=(it->first);
    found=toReplace.find_first_of(strMine);
    while (found!=std::string::npos)
    {
        strAux=(it->second);
        toReplace.erase(found,strMine.length());
        toReplace.insert(found,strAux);
        found=toReplace.find_first_of(strMine,found+1);
    }
} 
```

像这样的地图在哪里`dictionary`（有更多条目）：

```
dictionary.insert ( std::pair<std::string,std::string>("á","a") );
dictionary.insert ( std::pair<std::string,std::string>("é","e") );
dictionary.insert ( std::pair<std::string,std::string>("í","i") );
dictionary.insert ( std::pair<std::string,std::string>("ó","o") );
dictionary.insert ( std::pair<std::string,std::string>("ú","u") );
dictionary.insert ( std::pair<std::string,std::string>("ñ","n") ); 
```

和`toReplace`字符串是：

```
std::string toReplace="á-é-í-ó-ú-ñ-á-é-í-ó-ú-ñ"; 
```

我显然必须遗漏一些东西。我想不通。有没有我可以使用的图书馆？

谢谢，

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-09-29T12:43:41.133

我不同意目前“批准”的答案。当您为文本编制索引时，这个问题非常有意义。与不区分大小写的搜索一样，不区分重音的搜索也是一个好主意。"naïve" 匹配 "Naïve" 匹配 "naive" 匹配 "NAİVE" （你*知道*土耳其语中大写的 i 是 İ？这就是你忽略重音符号的原因）

现在，最佳算法暗示了已获批准的答案：使用 NKD（分解）将重音字母分解为基本字母和单独的重音，然后删除所有重音。

不过，之后的重新组合没有什么意义。您删除了大多数会更改的序列，而其他序列的所有意图和目的无论如何都是相同的。NKC 中的 æ 和 NKD 中的 æ 有什么区别？

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2008-09-28T00:02:25.137

首先，这是一个非常糟糕的主意：您通过删除字母来破坏某人的语言。尽管对于只会说英语的人来说，像“naïve”这样的单词中多余的点似乎是多余的，但世界上确实有成千上万的书写系统，其中这种区别非常重要。编写软件来破坏某人的言论会让你在使用计算机作为扩大人类表达领域的手段与压迫工具之间的紧张关系中处于错误的一边。

您尝试这样做的原因是什么？是不是更深层次的东西让口音窒息了？许多人很乐意帮助您解决这个问题。

也就是说，libicu 可以为您做到这一点。打开[转换演示](http://www.icu-project.org/icu-bin/translit)；将您的西班牙语文本复制并粘贴到“输入”框中；进入

```
NFD; [:M:] remove; NFC 
```

作为“Compound 1”并单击变换。

[（在 ICU](http://macchiato.com/slides/icu_transforms.pdf)中的 Unicode 转换幻灯片 9 的帮助下。幻灯片 29-30 展示了如何使用 API。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T06:47:56.537

我绝对认为你应该调查问题的根源。也就是说，寻找一种允许您支持以 Unicode 编码的字符或用户区域设置的解决方案。

话虽如此，您的问题是您正在处理多字符串。有，`std::wstring`但我不确定我会使用它。一方面，宽字符并不意味着处理可变宽度编码。这个洞很深，所以我会留在那里。

现在，至于您的其余代码，它很容易出错，因为您将循环逻辑与翻译逻辑混合在一起。因此，至少会出现两种错误：翻译错误和循环错误。一定要使用 STL，它可以在循环部分帮助你很多。

以下是替换字符串中字符的粗略解决方案。

**主.cpp**：

```
#include <iostream>
#include <string>
#include <iterator>
#include <algorithm>
#include "translate_characters.h"

using namespace std;

int main()
{
    string text;
    cin.unsetf(ios::skipws);
    transform(istream_iterator<char>(cin), istream_iterator<char>(),
              inserter(text, text.end()), translate_characters());
    cout << text << endl;
    return 0;
} 
```

**翻译字符.h**：

```
#ifndef TRANSLATE_CHARACTERS_H
#define TRANSLATE_CHARACTERS_H

#include <functional>
#include <map>

class translate_characters : public std::unary_function<const char,char> {
public:
    translate_characters();
    char operator()(const char c);

private:
    std::map<char, char> characters_map;
};

#endif // TRANSLATE_CHARACTERS_H 
```

**翻译字符.cpp**：

```
#include "translate_characters.h"

using namespace std;

translate_characters::translate_characters()
{
    characters_map.insert(make_pair('e', 'a'));
}

char translate_characters::operator()(const char c)
{
    map<char, char>::const_iterator translation_pos(characters_map.find(c));
    if( translation_pos == characters_map.end() )
        return c;
    return translation_pos->second;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T23:55:07.870

您可能想查看 boost ( [http://www.boost.org/](http://www.boost.org/) ) 库。

它有一个正则表达式库，您可以使用它。此外，它还有一个特定的库，该库具有一些用于字符串操作（[链接](http://www.boost.org/doc/libs/1_36_0/doc/html/string_algo/usage.html)）的功能，包括替换。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T00:26:33.660

尝试使用 std::wstring 而不是 std::string。UTF-16 应该可以工作（而不是 ASCII）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-29T03:05:29.680

我无法链接 ICU 库，但我仍然认为这是最好的解决方案。因为我需要这个程序尽快运行，所以我做了一个小程序（我必须改进），我将使用它。谢谢大家的建议和回答。

这是我要使用的代码：

```
for (it= dictionary.begin(); it != dictionary.end(); it++)
{
    strMine=(it->first);
    found=toReplace.find(strMine);
    while (found != std::string::npos)
    {
        strAux=(it->second);
        toReplace.erase(found,2);
        toReplace.insert(found,strAux);
        found=toReplace.find(strMine,found+1);
    }
} 
```

下次我必须上交程序进行更正时（大约 6 周后），我会更改它。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2008-09-27T23:43:58.380

如果可以（如果您正在运行 Unix），我建议使用该[`tr`](http://www.gnu.org/software/coreutils/manual/html_node/tr-invocation.html)工具：它是为此目的而定制的。请记住，没有代码 == 没有错误代码。:-)

编辑：对不起，你是对的，`tr`似乎不起作用。怎么样`sed`？这是我写的一个非常愚蠢的脚本，但它对我有用。

```
#!/bin/sed -f
s/á/a/g;
s/é/e/g;
s/í/i/g;
s/ó/o/g;
s/ú/u/g;
s/ñ/n/g; 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-10-24T14:52:53.947

```
 /// <summary>
    /// 
    /// Replace any accent and foreign character by their ASCII equivalent.
    /// In other words, convert a string to an ASCII-complient string.
    /// 
    /// This also get rid of special hidden character, like EOF, NUL, TAB and other '\0', except \n\r
    /// 
    /// Tests with accents and foreign characters:
    /// Before: "äæǽaeöœoeüueÄAeÜUeÖOeÀÁÂÃÄÅǺĀĂĄǍΑΆẢẠẦẪẨẬẰẮẴẲẶАAàáâãåǻāăąǎªαάảạầấẫẩậằắẵẳặаaБBбbÇĆĈĊČCçćĉċčcДDдdÐĎĐΔDjðďđδdjÈÉÊËĒĔĖĘĚΕΈẼẺẸỀẾỄỂỆЕЭEèéêëēĕėęěέεẽẻẹềếễểệеэeФFфfĜĞĠĢΓГҐGĝğġģγгґgĤĦHĥħhÌÍÎÏĨĪĬǏĮİΗΉΊΙΪỈỊИЫIìíîïĩīĭǐįıηήίιϊỉịиыїiĴJĵjĶΚКKķκкkĹĻĽĿŁΛЛLĺļľŀłλлlМMмmÑŃŅŇΝНNñńņňŉνнnÒÓÔÕŌŎǑŐƠØǾΟΌΩΏỎỌỒỐỖỔỘỜỚỠỞỢОOòóôõōŏǒőơøǿºοόωώỏọồốỗổộờớỡởợоoПPпpŔŖŘΡРRŕŗřρрrŚŜŞȘŠΣСSśŝşșšſσςсsȚŢŤŦτТTțţťŧтtÙÚÛŨŪŬŮŰŲƯǓǕǗǙǛŨỦỤỪỨỮỬỰУUùúûũūŭůűųưǔǖǘǚǜυύϋủụừứữửựуuÝŸŶΥΎΫỲỸỶỴЙYýÿŷỳỹỷỵйyВVвvŴWŵwŹŻŽΖЗZźżžζзzÆǼAEßssĲIJĳijŒOEƒf'ξksπpβvμmψpsЁYoёyoЄYeєyeЇYiЖZhжzhХKhхkhЦTsцtsЧChчchШShшshЩShchщshchЪъЬьЮYuюyuЯYaяya"
    /// After:  "aaeooeuueAAeUUeOOeAAAAAAAAAAAAAAAAAAAAAAAaaaaaaaaaaaaaaaaaaaaaaaBbCCCCCCccccccDdDDjddjEEEEEEEEEEEEEEEEEEeeeeeeeeeeeeeeeeeeFfGGGGGgggggHHhhIIIIIIIIIIIIIiiiiiiiiiiiiJJjjKKkkLLLLllllMmNNNNNnnnnnOOOOOOOOOOOOOOOOOOOOOOooooooooooooooooooooooPpRRRRrrrrSSSSSSssssssTTTTttttUUUUUUUUUUUUUUUUUUUUUUUUuuuuuuuuuuuuuuuuuuuuuuuYYYYYYYYyyyyyyyyVvWWwwZZZZzzzzAEssIJijOEf'kspvmpsYoyoYeyeYiZhzhKhkhTstsChchShshShchshchYuyuYaya"
    /// 
    /// Tests with invalid 'special hidden characters':
    /// Before: "\0\0\000\0000Bj��rk�\'\"\\\0\a\b\f\n\r\t\v\u0020���oacu\'\\\'te�"
    /// After:  "00000Bjrk'\"\\\n\r oacu'\\'te"
    /// 
    /// </summary>
    private string Normalize(string StringToClean)
    {
        string normalizedString = StringToClean.Normalize(NormalizationForm.FormD);
        StringBuilder Buffer = new StringBuilder(StringToClean.Length);

        for (int i = 0; i < normalizedString.Length; i++)
        {
            if (CharUnicodeInfo.GetUnicodeCategory(normalizedString[i]) != UnicodeCategory.NonSpacingMark)
            {
                Buffer.Append(normalizedString[i]);
            }
        }

        string PreAsciiCompliant = Buffer.ToString().Normalize(NormalizationForm.FormC);
        StringBuilder AsciiComplient = new StringBuilder(PreAsciiCompliant.Length);

        foreach (char character in PreAsciiCompliant)
        {
            //Reject all special characters except \n\r (Carriage-Return and Line-Feed). 
            //Get rid of special hidden character, like EOF, NUL, TAB and other '\0'
            if (((int)character >= 32 && (int)character < 127) || ((int)character == 10 || (int)character == 13)) 
            {
                AsciiComplient.Append(character);
            }
        }
        return AsciiComplient.ToString().Trim(); // Remove spaces at start and end of string if any
    } 
```

# php - Web 服务（学期）课程中的基本主题是什么？

> ID：144767
> 
> 赞同：2
> 
> 时间：2008-09-27T23:43:29.677
> 
> 标签：php, web-services

我正在为信息技术课程的学生设计一门网络服务课程。一些学生在获得两年制副学士学位后停止学习，但该计划的其他学生继续获得四年制学士学位。本课程适用于攻读四年制学位的学生。

我对这门课程的最初想法是它将涵盖：

*   一些简单的数据库概念，有足够的命令行练习，让学生创建简单的关系数据库后端。
*   足够的 PHP 让学生可以创建一个 Web 界面，允许用户将新数据输入数据库后端，编辑数据库中的数据，并显示数据库的固定视图。
*   PHP 和 Web 服务的基本安全实践。
*   使用 PHP 和数据库后端编写准系统内容管理系统。
*   了解和使用现有的内容管理软件，例如 Zope/Plone 或 Drupal。
*   讨论使用现有内容管理软件为网页提供 ADA 第 508 节合规性的可行性。与提出一个使用 PHP 制作符合 ADA 的页面的简单框架进行对比。

我们的学期为 16 周。您是否涵盖了其他主题而不是列出的主题？如果你有机会设计这样一门课程，最实用的内容是什么？

编辑：根据最初的回复，很明显我的问题的标题具有误导性。它应该是 Web 编程而不是 Web 服务。参加本课程的学生将至少参加过一门编程课程。学生们都会参加 Python 课程。他们学习的 Python 课程包括编写一个使用 CSS 生成 HTML 的 XML 解析器。本课程还将涵盖 HTML、CSS 和 JavaScript。还将使用 XML（使用 PHP 解析 XML，并可能使用将 XML 转换为 PHP 代码）。一些学生还将参加 Java 入门课程，但该课程不包括 JSP。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-09-27T23:57:23.947

首先，你对“网络服务”的理解是什么？据我所知，Web 服务的标准定义是它是一个“支持通过网络**进行机器对机器**交互的软件系统”。如果这确实是您的想法，那么（1）关于 CMS 的那些部分不适用，（2）肯定应该有一些以前的网络编程知识或类似的知识。实际上，很少有课程描述似乎适用于 Web 服务，从描述来看，它看起来像是通用的 Web 开发课程。

无论如何，这可能不是你的想法，问题是，你不能在 PHP 中创建“网络界面”——你需要 HTML、CSS、JavaScript 等——这会包含在课程中吗？

关于 508 的最后一部分 - 老实说，它是 Web 开发中日常工作中相对较小的一部分，它实际上与 PHP 或编程，或服务器端 Web 开发完全无关，更多的是与客户端代码就像以及内容是如何准备的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-27T23:48:17.650

您可能需要谈论 Xml。甚至可能想谈谈 XSD……但这取决于你想在课程中学习什么。我不了解使用 PHP 的 Web 服务，但如果是 .Net，您会想谈谈序列化/反序列化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-27T23:51:24.213

我会教（甚至简要地）层模型。如果学生没有从根本上理解它，那么它会在未来的某个地方再次困扰他们。是的，我遇到过在不了解网络层模型或操作系统层模型的情况下完成 4 年 CS 学位的学生。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-27T23:57:43.167

你到底为什么把 PHP 作为 CS 课程来教授？特别是考虑到 Web 服务主题。

一旦这些学生毕业，他们 98% 的 Web 服务工作将是 Java 或 C#。

或者您的意思可能不同于 REST、XML-RPC 或 SOAP 用于 Web 服务？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T00:19:01.167

谈论 Sun 的标准是一个好主意，并且可能是在 Java 中使用 WS 的最古老的方式，即 Apache Axi。我相信在 java 会话中，您可以为[**jax-ws**](https://jax-ws.dev.java.net/)和[**jax-b**](http://jaxb.java.net/)发表演讲。讨论 WS-* 方向以及 REST 如何改变我们对服务消费者和提供者的看法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T01:42:22.637

某种编程语言应该是课程的先决条件，这样学生就可以测试他们正在学习的内容。必须教一门语言是太多了。作为老师，您将能够验证他们实际上是在创建服务。

也许创建一些学生可以连接并从中创建服务的数据库。

可能应该进入 REST 与非 RE​​ST 格式（xml、json、csv ......）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-11-04T19:48:27.640

爱它或恨它，SOAP 将继续存在并超越特定语言，如 java、php 等...... Web 编程不再是从头开始的自定义编码。教 REST 和 SOAP 就像教人们在 C++ 类中使用标准模板库一样。重用是最重要的。

我会避免编写 CMS - 对于大多数 Web 项目来说，这通常是错误的选择，如果我们从 twitter 上学到了什么，那么将 cms 推到不属于它的地方是不好的。再加上它的无聊。让他们进行混搭比赛。在应用所有核心概念的同时，培养创造力和企业家精神。

如果有时间，请深入研究 Web 层架构。我总是对我面试的不了解事物如何组合以及如何扩展的候选人数量感到沮丧。了解冗余对任何潜在雇主来说都是令人印象深刻的，尤其是如果您的学生将转到公司工作。

# winapi - 为什么 GetWindowRgn 在 Vista 上会失败？

> ID：144774
> 
> 赞同：2
> 
> 时间：2008-09-27T23:46:00.667
> 
> 标签：winapi, windows-vista

我正在编写一个程序，用于[`SetWindowRgn`](http://msdn.microsoft.com/en-us/library/dd145102(VS.85).aspx)在属于另一个进程的窗口中制作透明孔。（只有在用户明确请求时才会这样做。）

程序必须假设目标窗口可能已经有洞需要保留，所以在它调用之前`SetWindowRgn`，它调用[`GetWindowRgn`](http://msdn.microsoft.com/en-us/library/dd144950(VS.85).aspx)以获取当前区域，然后将当前区域与新区域组合并调用`SetWindowRgn`：

```
HRGN rgnOld = CreateRectRgn ( 0, 0, 0, 0 );
int regionType = GetWindowRgn ( hwnd, rgnOld ); 
```

这在 XP 中运行良好，但在 Vista 中调用`GetWindowRgn`失败。我尝试关闭 Aero 并将线程的权限提升到`SE_DEBUG_NAME`with [`AdjustTokenPrivileges`](http://msdn.microsoft.com/en-us/library/aa375202(VS.85).aspx)，但都没有帮助。

GetLastError() 似乎没有为 GetWindowRgn 返回有效值——它在一台机器上返回 0，在另一台机器上返回 5（拒绝访问）。

谁能告诉我我做错了什么或提出不同的方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2008-09-28T00:28:08.273

你确定你的窗口*有*一个区域吗？XP中的大多数顶级窗口都这样做，仅仅是因为默认主题将它们用于圆角......但这仍然是一个不好的假设，一旦你进入Vista，很可能不会成立。

如果您还没有设置区域，并且调用失败，请使用合理的默认值（窗口矩形），不要让它毁了您的生活。现在，如果`SetWindowRgn()`失败...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T18:19:36.997

在 Vista 下，为了让一个不以管理员身份运行的进程以另一个进程的窗口为目标，它必须：

*   嵌入带有 uiAccess="true" 的清单文件（下面的示例）
*   对应用程序进行数字签名
*   从“安全”的地方安装并执行它，例如“程序文件”

这是一个示例清单：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <assemblyIdentity version="1.0.0.0" processorArchitecture="X86" name="yourAssemblyNameWithoutExtension" type="win32"/>
  <trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
    <security>
      <requestedPrivileges>
        <requestedExecutionLevel level="asInvoker" uiAccess="true" />
      </requestedPrivileges>
    </security>
  </trustInfo>
</assembly> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T00:52:30.820

您提到您正在尝试获取**另一个进程**的窗口区域。Vista 加强了许多跨进程 Win32 调用的安全性。我无法以一种或另一种方式找到任何文档`GetWindowRgn()`，但您可以简单地对其进行测试。制作一个简单的项目来设置它自己的区域，并尝试使用您的原始应用程序来获取简单应用程序的区域。如果它有效，那么它只会很烦人，人们不能在任何东西上使用你的应用程序。如果它不起作用，那么您的应用程序可能根本无法在 Vista 上运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-08-25T03:15:06.903

* * *

## 我对 Windows API 函数 ::GetWindowRgn(...) 的回答（根据我的经验）

此函数在 Vista 和 Windows 7 中失败，即返回 ERROR。

但此功能在 Windows XP 中运行良好。

因此，我建议使用以下非复杂解决方案：如果您在预期在不同 Windows 下运行的应用程序中使用此函数，请提供如下测试： int nResultOfRgnOperation = ::GetWindowRegion(...); if (nResultOfRgnOperation != ERROR) < 进一步使用由该函数确定的整个窗口区域 > else < 找到整个窗口的边界矩形并进一步使用该边界矩形而不是窗口区域。在需要时，您可以创建一个表示边界矩形的矩形区域。>

请在上面标记为<...>的地方使用相应的代码

谢谢你的热情。

* * *

# c# - 单独文件中的 C# 类？

> ID：144783
> 
> 赞同：63
> 
> 时间：2008-09-27T23:52:19.107
> 
> 标签：c#

我的 C# 项目中的每个类都应该有自己的文件吗（在您看来）？

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2008-09-27T23:55:55.073

虽然在 Java 中严格执行每个文件一个类的策略，但 C# 并不要求这样做。但是，这通常是一个好主意。

如果我有一个仅由主类使用的非常小的辅助类，我通常会打破这条规则，但为了清楚起见，我更喜欢将其作为嵌套的内部类。

[但是，您可以使用`partial`关键字](https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/partial-classes-and-methods)将单个类拆分为多个文件。这对于将您的代码与向导生成的代码分开很有用。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2008-09-28T00:11:08.720

文件很便宜，将许多类合并到单个文件中并没有帮到任何人的忙​​。

在 Visual Studio 中，在解决方案资源管理器中重命名文件将重命名项目中的类和对该类的所有引用。即使您很少使用该功能，文件的廉价性和管理它们的便利性也意味着当除以成本时，收益是无限有价值的。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2008-09-28T06:35:19.497

正如其他人所说，一般来说，每种类型一个文件 - 尽管其他人已经做出了公共/私人区分，但我只想说“每种类型一个顶级文件”（所以即使是顶级内部类型也有自己的文件） .

我有一个例外，它与 .NET 3.5 中 Func 和 Action 委托类型的出现不太相关：如果我在一个项目中定义多个委托类型，我经常将它们放在一个名为 Delegates.cs 的文件中.

还有其他非常偶然的例外——我最近使用部分类来使几个自动生成的类实现相同的接口。他们已经定义了适当的方法，所以这只是一个写的例子：

```
public partial class MessageDescriptor : IDescriptor<MessageDescriptorProto> {}
public partial class FileDescriptor : IDescriptor<FileDescriptorProto> {} 
```

等等。将所有这些都放入自己的文件中会有点愚蠢。

所有这一切都要记住一件事：使用 ReSharper 可以更轻松地访问您的类，无论它们是否在合理命名的文件中。这并不是说适当地组织它们不是一件好事。更多的是强化 ReSharper 摇滚的概念 :)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2008-09-28T19:13:22.407

我个人认为每个类都应该在自己的文件中，这也包括嵌套类型。对我来说，这条规则的唯一例外是自定义委托。

大多数答案都从这条规则中排除了私人课程，但我认为这些也应该在他们自己的文件中。这是我目前用于嵌套类型的模式：

Foo.cs: // 只包含 Foo 实现

```
public partial class Foo 
{
   // Foo implementation
} 
```

Foo.Bar.cs: // 只包含 Foo.Bar 的实现

```
public partial class Foo
{
  private class Bar
  {
    // Bar implementation
  }
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2008-09-28T00:07:23.660

这取决于。大多数时候我会说是的，把它们放在单独的文件中。但是，如果我有一个只能由另一个类（如链接列表的节点或元素）使用的私有助手类，我不建议将它们分开。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-01-15T15:52:48.117

作为一个多年来一直在大文件中编码（限于 1000 行）的人，事实上，自从我小时候开始编程以来，我对“每个源文件一个类”规则的巨大共识感到惊讶。

“每个源文件一个类”并非没有问题。如果您同时处理很多事情，您将打开许多文件。当然，您可以在完成文件后关闭它们，但如果您需要重新打开它们怎么办？每次打开文件时通常都会有延迟。

我现在要解决其他人提出的观点，并解释我认为“每个源文件一个类”规则的不好原因。现代源代码编辑技术解决了一个源文件中多个类的许多问题。

1.  “我讨厌上下滚动” - 不好的原因 - 现代 IDE 现在要么具有内置功能，可以快速获取您想要的代码，要么您可以为该任务安装扩展/插件。Visual Studio 的解决方案资源管理器通过其搜索功能做到这一点，但如果这还不够，请购买 VisualAssist。VisualAssist 提供源文件中项目的大纲。无需滚动，但双击你想要的。

还有代码折叠。代码太多？只需将其折叠成一行！问题解决了。

2.  “东西更容易找到，因为它们是由文件识别的”——不好的原因——同样，现代 IDE 可以很容易地找到你要找的东西。只需使用解决方案资源管理器或购买 VisualAssist！技术就在那里，使用它！

3.  “更容易阅读/太多代码” - 不好的原因 - 我不是盲人。我可以看到。同样，通过代码折叠，我可以轻松消除混乱并折叠我不需要查看的代码。这不是编程的石器时代。

4.  “你会忘记大型项目中类的位置” - 坏原因 - 简单的解决方案：Visual Studio 中的解决方案资源管理器和 VisualAssist 扩展。

5.  “您无需打开任何东西就知道项目中有什么” - 好的理由 - 与那个没有争议。

6.  源代码控制/合并 - 很好的理由 - 这实际上是支持“每个源文件一个类”规则的一个很好的论据，尤其是在团队项目中。如果多人在做同一个项目。它使人们可以一目了然地看到发生了什么变化。如果您使用大型的多类文件，我还可以看到它如何使合并过程复杂化。

源代码控制和合并过程确实是 IMO 应该应用“每个源文件一个类”规则的唯一令人信服的原因。如果我在做我自己的个人项目，不，这不是那么重要。

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2008-09-28T02:35:50.387

它们应该在不同的文件中，即使看起来有点矫枉过正。这是我仍然经常犯的错误。

总有一天，您已经向一个类添加了足够多的代码，它值得拥有自己的文件。如果你决定在那个时候为它创建一个新文件，那么你会丢失你的提交历史，当你不想它的时候它总是会咬你。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2008-09-27T23:54:34.313

公共课程：是私人课程：（不用说）没有

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2008-09-28T02:09:52.040

我实际上更喜欢相当大的 .cs 文件，5000 行在 IMO 中是相当合理的，虽然我目前的大多数文件只有 500-1000 左右（然而，在 C++ 中，我有一些可怕的文件），但是，. 对象浏览器/类视图、转到定义和增量搜索（-I；感谢您的提示，Jeff Atwood！），所有这些都使查找任何特定的类或方法变得非常容易。

这可能都是因为我对关闭未固定的标签感到很害怕。

这当然在很大程度上取决于您的工作方式，但是有足够多的工具不需要使用可怕的 70 年代基于*文件*源导航的旧文件（开玩笑，如果不是很明显的话）。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2008-09-28T02:21:50.060

当然！你为什么不呢？除了私有类之外，在一个文件中包含多个类是愚蠢的。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-11-20T14:58:18.687

我认为每个文件一个类的方法是有意义的。当然对于不同的类，尤其是基类和派生类，它们的交互和依赖关系通常不明显且容易出错。单独的文件可以直接并排查看/编辑基类和派生类并独立滚动。

在印刷源代码清单长达数百页（想想电话簿）的时代，“三指规则”很好地限制了复杂性：如果您需要三个以上的手指（或回形针或邮筒）它）作为理解模块的占位符，该模块的依赖集可能太复杂了。鉴于几乎没有人再使用打印的源代码清单，我建议将其更新为“三窗口规则”——如果您必须打开三个以上的附加窗口才能理解另一个窗口中显示的代码，则此代码可能应该重构。

超过四个级别的类层次结构是一种代码异味，如果您需要四个以上的打开窗口来查看其行为的整体，这就是证据。将每个类保存在自己的文件中将提高深度小于 4 的可理解性，否则会发出间接警告。

# c# - XP 和 Vista 中是否有一种 API 可以处理任务计划程序？

> ID：144789
> 
> 赞同：0
> 
> 时间：2008-09-27T23:55:53.000
> 
> 标签：c#, .net, windows-vista, windows-xp, scheduled-tasks

我有几个应用程序，我希望能够从它们中添加计划任务。我一直在谷歌搜索如何在 XP 和 Vista 中添加任务。显然，Vista 有一个新的任务计划程序，它与 XP 中的非常不同。

有人知道是否有一个 API 可以同时处理这两个问题，还是我必须在我的应用程序中同时为这两个问题编写代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T00:00:28.370

我认为您可以使用[任务计划程序 COM 接口](https://docs.microsoft.com/en-gb/windows/win32/taskschd/task-scheduler-2-0-interfaces)。

也看看[这个项目](https://www.codeproject.com/Articles/2407/A-New-Task-Scheduler-Class-Library-for-NET)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-28T20:34:32.290

正如我所怀疑的那样。然后我将不得不编写两个不同的 API。这将使维护变得更加困难，但并非不可能。只需要确保我进行了涵盖这两种情况的集成测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T00:13:56.903

如果我没记错的话，Vista 的初始版本使用与 XP 相同的 API。

Server 2008 应该有一个大大改进的调度程序。这似乎表明 API 发生了变化。

我提到 2008 是因为用于 Vista 的 SP1 使大部分代码与 Server 2008 保持一致。

祝你好运，我会看其他答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T00:25:11.540

理想情况下，您可以在当前运行的操作系统上使用该界面。例如，您可以通过拥有您的应用程序的 XP 和 Vista 版本来做到这一点。

但是 Vista*是*来自 Microsoft，所以旧的 API 仍然可供程序使用。最简单的解决方案是为您的应用程序的这个版本使用 XP API，并且在下一个版本中需要 Vista、Server 2K8 或更高版本，或者从现在开始可能需要 2 个版本，然后转换到 Task Scheduler 2.0 API。

# java - Java 日志查看器

> ID：144807
> 
> 赞同：77
> 
> 时间：2008-09-28T00:02:33.327
> 
> 标签：java, log4j, viewer

不幸的是，有时调试程序的唯一方法是查看它的长日志文件。

我现在搜索了一个像样的日志查看器，但还没有找到真正的解决方案。唯一似乎最合适的程序是带有 Socket 连接器的[Chainsaw](http://logging.apache.org/chainsaw/2.x/download.html)，但经过几次短暂的使用后，该程序被证明是错误的并且充其量是无响应的。

出于我的目的，日志查看器至少应该能够标记日志级别（例如使用不同的颜色）并根据包和自由文本执行简单的过滤。

还有其他（免费）日志查看器吗？我正在寻找任何可以与 log4j 一起工作的东西。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2008-12-28T02:15:20.540

只想说我终于找到了一个可以很好相处的工具...

它被称为 LogExpert（参见[http://www.log-expert.de/](http://www.log-expert.de/)）并且是免费的。除了通常的尾部功能外，它还具有过滤器和搜索功能——BareTail 缺少的两个关键功能。而且，如果您碰巧想要自定义它进一步解析列的方式，那就太简单了。只需在 .NET 中实现一个接口，就完成了（我是一名 Java/Flex 程序员......）

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-06-21T11:51:19.453

我正在使用[OtrosLogViewer](http://code.google.com/p/otroslogviewer/)。[您可以手动或使用字符串/正则表达式](http://code.google.com/p/otroslogviewer/wiki/MarkingEvents)标记日志事件。您可以根据[级别、时间线程、字符串或正则表达式](http://code.google.com/p/otroslogviewer/wiki/Filters)过滤事件。可以通过[监听socket](http://code.google.com/p/otroslogviewer/wiki/ListeningOnSocket)或者[连接Log4j SocketHubAppender来导入日志](http://code.google.com/p/otroslogviewer/wiki/SocketHubAppender)

你可以看一下[Youtube 视频](http://www.youtube.com/watch?feature=player_embedded&v=ESCa-X8l4OE)或截图： ![标记的日志事件](https://i.stack.imgur.com/PRNav.png) ![类过滤器](https://i.stack.imgur.com/JWw7S.png)

**免责声明**：我是 OtrosLogViewer 的作者

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2008-09-28T00:57:18.547

你没有提到操作系统，所以我会提到这一点，尽管它只在 Windows 上。

**Bare Metal Software 制作了一款名为[BareTail](http://www.baremetalsoft.com/baretail/)**的产品，该产品具有漂亮的界面并且运行良好。他们有一个带有启动 nag 屏幕的免费版本，一个没有 nag 的许可版本，以及一个带有附加功能的 pro 版本。 **它具有基于与关键字匹配的行的可配置突出显示。**

他们也有一个 BareGrep 产品，它提供了类似的 grep 功能。两者都非常出色，非常稳定，比我在 Windows 上看到的任何东西都要好。我非常喜欢它们，我以 50 美元的价格购买了两个专业版的捆绑包。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-09-13T11:35:28.517

我正在使用 Notepad++ 和[**突出显示 UDL 的自定义日志文件**](https://gist.github.com/3713724)。看起来像这样：

![在此处输入图像描述](https://i.stack.imgur.com/f0gvA.png)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2009-04-15T20:41:30.697

你可以试试[**logFaces**](http://www.moonlit-software.com "日志脸")，它有很棒的基于 eclipse 设计的实时日志查看器。

![替代文字](https://www.moonlit-software.com/logfaces/web/images/screens/full/layout.png)

**披露**：我是该产品的作者。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-01-15T04:00:43.953

考虑使用[Log4j 查看器 Eclipse 插件](http://code.google.com/p/log4j-viewer/)——它是 Ganemede 插件的分支，现在有更多功能，稳定性得到显着提高，并且仍在积极开发和免费 :)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2008-09-28T00:15:06.963

我一直用'tail -f | grep re' 或偶尔的 'awk'。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2010-12-24T10:04:49.797

[LogSaw](http://logsaw.sourceforge.net/)基于 Eclipse 并且免费。Log4j 日志文件分析器，使用简单，过滤方便。支持多种 log4j 日志文件：JBoss、Log4j 模式布局、Log4j XML 布局、WebSphere。

奇迹般有效。经过几个小时的谷歌搜索并尝试了几个推荐的免费 log4j 查看器，这个令人惊喜。尝试过 Chainsaw、BareTail、Insight、LogExpert、logview4j。

它是几周前发布的，我想它仍然在谷歌上建立起来。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2008-09-28T05:58:34.767

我已成功推出 Splunk ( [http://www.splunk.com/](http://www.splunk.com/) ) 以进行日志查看和搜索。免费版可以在本地使用，付费版可以将您的所有日志收集到一个位置。我们主要将它用于 Log4J 日志，但也有许多其他格式。

除了 tail 和 grep 支持（无需了解 grep...），它会自动索引日志并允许轻松分析（例如，在最后 xx 时间范围内的事件数）以及基本的图表、警报和事件聚合。

我不会说这个应用程序是完美的，也不会说公司已经成熟了。但我毫不犹豫地建议您尝试一下。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2011-10-30T03:11:33.063

我将在 Windows 中添加这一点，具有讽刺意味的是，WireShark 提供了一个方便的系统日志查看器。我已经尝试了其他几个系统日志工具，实际上，Kiwi 是目前最适合系统日志的工具，但是“免费”版本有点被削弱了。我遇到的其他人要么编程不良（在小问题上崩溃——logview4net），要么界面糟糕（Star SysLog Daemon Lite），要么甚至没有运行（nxlog）

您可以使用 WireShark 的过滤器语言来深入了解日志数据。这是矫枉过正，但直到有人为 Windows 编写一个免费的 syslog 查看器/收集器并使其变得体面，这对大多数人来说都是一个很难的领域。

例子：

```
# Display level 6 alerts from 192.168.5.90 in WireShark
syslog.level == 6 && ip.addr == 192.168.5.90 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-01-28T21:46:00.113

[LogMX](http://www.logmx.com)是一个跨平台工具，可以解析来自任何来源的任何日志格式，然后显示具有许多功能的日志条目。默认情况下，它处理诸如 Log4j、LogFactor、syslog 等格式，并且可以从本地文件或 SFTP、FTP、HTTP 中读取...但是如果您的格式是另一种格式或者您的日志不能是，您可以编写自己的插件通过经典协议访问。

您可以像“tail”一样实时监控日志，也可以加载整个日志文件并停止监控。

[www.logmx.com](http://www.logmx.com)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2008-09-28T00:17:01.013

根据您运行的平台和可用的其他日志查看工具，您可以使用适当的 log4j appender（syslog、Windows 事件记录器）并使用您的平台日志查看工具。

除此之外，我通常会看到开发定制解决方案。

推动您的解决方案的是您的整个系统是什么样的。您是否正在尝试汇总来自多台计算机的日志？或者只是查看来自单个远程进程的日志？

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-28T00:37:56.470

您可能希望使用仅适用于文件的自定义日志查看器。我喜欢[Kiwi Log Viewer](http://www.kiwisyslog.com/)或 Ganymede（一个 Eclipse 插件），但是将一个简单的从套接字读取的 Swing 应用程序放在一起并不难。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-18T10:56:51.060

查看[http://jlogviewer.sourceforge.net/](http://jlogviewer.sourceforge.net/)或[http://sourceforge.net/projects/jlogviewer/](http://sourceforge.net/projects/jlogviewer/) Java 日志查看器是轻量级的 GUI，可以轻松查看“java.util.logging”生成的 Java 应用程序日志包裹。它是开源的！！

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-02-09T11:32:14.157

您可以使用[MindTree Insight](http://sourceforge.net/projects/mindtreeinsight)，它是开源的、高效的，并且专门针对该用例：分析 log4j 文件。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2013-01-14T14:38:21.287

我为此编写了一个自定义工具：https: [//plus.google.com/u/0/102275357970232913798/posts/Fsu6qftH2ja](https://plus.google.com/u/0/102275357970232913798/posts/Fsu6qftH2ja)

> > Alfa 是一个用于分析日志文件的 GUI 工具。通常，您被迫使用编辑器在其中搜索数据。您打开一个日志，一次又一次地按 Ctrl-F 和“下一步”按钮，然后重新加载修改过的文件，然后重复搜索。Alfa 将日志文件映射到数据库，允许您使用标准 SQL 查询来获取数据，而无需任何多余的操作。

UPD：谷歌杀死了谷歌+，所以请使用其他链接：[https ://drive.google.com/drive/folders/0B-hYEtveqA0aN1E3Ul9NVlFlYWM](https://drive.google.com/drive/folders/0B-hYEtveqA0aN1E3Ul9NVlFlYWM)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-02-19T14:30:59.683

另一个不错的日志查看器是 Lilith（[http://sourceforge.net/projects/lilith/](http://sourceforge.net/projects/lilith/)和[http://lilithapp.com/](http://lilithapp.com/)）。它是开源的，可与 Logback、log4j 和 java.util.logging 配合使用。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2015-07-17T16:03:10.273

[刚刚发布了一个用于颜色高亮日志输出log-color-highlight](https://www.npmjs.com/package/log-color-highlight)的节点模块。

```
echo "this string" | lch -red.bold this -blue string 
```

在 unix/linux/windows 上运行良好，并支持复杂日志场景的配置文件。

对于 Windows，我将它与[file-tail结合使用](https://www.npmjs.com/package/file-tail)

# javascript - jQuery获取textarea文本

> ID：144810
> 
> 赞同：512
> 
> 时间：2008-09-28T00:05:56.907
> 
> 标签：javascript, jquery, ajax

最近我开始使用 jQuery，并且一直在学习一些教程。现在我觉得使用它有点能力（这很容易），我认为如果我能够在我的网页上制作一个“控制台”会很酷（就像你在[FPS](http://en.wiktionary.org/wiki/first-person_shooter)游戏中一样按下`键，等），然后将其 Ajax 本身返回到服务器以执行操作。

我最初认为最好的方法是只获取文本区域内的文本，然后将其拆分，或者我应该使用 keyup 事件，将返回的键码转换为 ASCII 字符，将字符附加到字符串并将字符串发送到服务器（然后清空字符串）。

我找不到任何关于从 textarea 获取文本的信息，我得到的只是 keyup 信息。另外，如何将返回的键码转换为 ASCII 字符？

* * *

## 回答 #1

> 赞同：749
> 
> 时间：2008-09-28T00:17:47.783

为什么要将击键转换为文本？添加一个按钮，在单击时将文本区域内的文本发送到服务器。您可以使用 value 属性作为海报之前指出的文本，或者使用 jQuery 的 API：

```
$('input#mybutton').click(function() {
    var text = $('textarea#mytextarea').val();
    //send to server and process response
}); 
```

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2014-06-13T10:32:46.447

通常是您使用的文本功能（例如，在 div 等中），那么对于文本区域，它是 val

得到：

```
$('#myTextBox').val(); 
```

放：

```
$('#myTextBox').val('new value'); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2010-07-06T03:57:36.377

您应该有一个只包含控制台消息的 div，即先前的命令及其输出。在下面放置一个输入或文本区域，它只包含您正在输入的命令。

```
-------------------------------
| consle output ...           |
| more output                 |
| prevous commands and data   |
-------------------------------
> This is an input box. 
```

这样您只需将输入框的值发送到服务器进行处理，并将结果附加到控制台消息 div。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2008-09-28T00:11:00.233

通常，它是 value 属性

```
testArea.value 
```

或者我在你需要的东西中缺少什么？

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-28T00:34:35.153

我发现我可以使用以下函数将事件的 keyCode 转换为字符：

```
var char = String.fromCharCode(v_code); 
```

然后从那里我将字符附加到一个字符串，并在按下回车键时将字符串发送到服务器。如果我的问题看起来有点神秘，我很抱歉，而且标题的意思几乎完全是题外话，现在是一大早，我还没有吃早餐；）。

感谢您的所有帮助。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2011-06-14T14:45:30.190

我认为“控制台”这个词引起了混乱。

如果你想模拟一个老式的全/半双工控制台，你会使用这样的东西：

```
$('console').keyup(function(event){
    $.get("url", { keyCode: event.which }, ... );
    return true;
}); 
```

event.which 有被按下的键。对于退格处理，event.which === 8。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-11-25T16:55:24.357

最好的方法： $('#myTextBox').val('new value').trim();

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-05-31T09:00:17.420

您可以通过名称和 ID 获取 textarea 数据

```
// by name
<textarea name="comment"></textarea>
let text_area_data = $('textarea[name="comment"]').val();

// by id
<textarea id="comment" name="comment"></textarea>
let text_area_data = $('textarea#comment').val(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-04-09T20:55:36.300

读取 textarea 值和 code-char 转换：

```
function keys(e) {
  msg.innerHTML = `last key: ${String.fromCharCode(e.keyCode)}`

  if(e.key == 'Enter') {
    console.log('send: ', mycon.value);
    mycon.value='';
    e.preventDefault();
  }
}
```

```
Push enter to 'send'<br>
<textarea id='mycon' onkeydown="keys(event)"></textarea>

<div id="msg"></div>
```

并且仅在 div-s 上的**类似 Quake 的控制台下方 :)**

[![在此处输入图像描述](https://i.stack.imgur.com/qIIKc.png)](https://i.stack.imgur.com/qIIKc.png)

```
document.addEventListener('keyup', keys);

let conShow = false

function keys(e) {
  if (e.code == 'Backquote') {
    conShow = !conShow;
    mycon.classList.toggle("showcon");
  } else {
    if (conShow) {
      if (e.code == "Enter") {
        conTextOld.innerHTML+= '<br>' + conText.innerHTML;
        let command=conText.innerHTML.replace(/&nbsp;/g,' ');
        conText.innerHTML='';
        console.log('Send to server:', command); 
      } 
      else if (e.code == "Backspace") {
        conText.innerHTML = conText.innerText.slice(0, -1);
      } else if (e.code == "Space") {
        conText.innerHTML = conText.innerText + '&nbsp;'
      } else {
        conText.innerHTML = conText.innerText + e.key;
      }

    }
  }
}
```

```
body {
  margin: 0
}

.con {
  display: flex;
  flex-direction: column;
  justify-content: flex-end;
  align-items: flex-start;
  width: 100%;
  height: 90px;
  background: rgba(255, 0, 0, 0.4);
  position: fixed;
  top: -90px;
  transition: top 0.5s ease-out 0.2s;
  font-family: monospace;
}

.showcon {
  top: 0px;
}

.conTextOld {
  color: white;
}

.line {
  display: flex;
  flex-direction: row;
}

.conText{   color: yellow; }

.carret {
  height: 20px;
  width: 10px;
  background: red;
  margin-left: 1px;
}

.start { color: red; margin-right: 2px}
```

```
Click here and Press tilde ` (and Enter for "send")

<div id="mycon" class="con">
  <div id='conTextOld' class='conTextOld'>Hello!</div>
  <div class="line">
    <div class='start'> > </div>
    <div id='conText' class="conText"></div>
    <div class='carret'></div>
  </div>
</div>
```

# bash - bash getopts 函数对命令行选项有破坏性吗？

> ID：144824
> 
> 赞同：4
> 
> 时间：2008-09-28T00:12:17.640
> 
> 标签：bash, shell

你能在同一个脚本中使用两次 bash“getopts”函数吗？

我有一组选项，它们的含义取决于特定选项的值。由于我不能保证 getopts 会首先评估该特定选项，因此我想只使用该特定选项运行一次 getopts，然后使用其他选项再次运行它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T00:18:43.663

是的，之后只需重置 OPTIND。

```
#!/bin/bash

set -- -1
while getopts 1 opt; do
    case "${opt}" in
        1) echo "Worked!";;
        *) exit 1;
    esac
done

OPTIND=1
set -- -2
while getopts 2 opt; do
    case "${opt}" in
        2) echo "Worked!";;
        *) exit 1;
    esac
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T01:03:05.507

与较旧的 getopt 独立可执行文件相反，getopts 不会修改原始参数。您可以一遍又一遍地使用 bash 内置的 getopts，而无需修改原始输入。

有关更多信息，请参见 bash 手册页。

HTH。

干杯，

抢

# c# - 最有用的属性

> ID：144833
> 
> 赞同：793
> 
> 时间：2008-09-28T00:16:08.990
> 
> 标签：c#, .net, .net-attributes

我知道属性非常有用。有一些预定义的，例如`[Browsable(false)]`允许您在属性选项卡中隐藏属性。这是一个解释属性的好问题：[什么是 .NET 中的属性？](https://stackoverflow.com/questions/20346/c-what-are-attributes)

**您在项目中实际使用的预定义属性（及其命名空间）是什么？**

* * *

## 回答 #1

> 赞同：681
> 
> 时间：2008-09-28T01:14:45.447

`[DebuggerDisplay]`当您在调试期间将鼠标悬停在 Type 的实例上时，对于快速查看 Type 的自定义输出非常有帮助。例子：

```
[DebuggerDisplay("FirstName={FirstName}, LastName={LastName}")]
class Customer
{
    public string FirstName;
    public string LastName;
} 
```

这是它在调试器中的外观：

![替代文字](https://i.stack.imgur.com/qEZNZ.jpg)

另外，值得一提的是，`[WebMethod]`带有`CacheDuration`属性集的属性可以避免不必要的Web服务方法的执行。

* * *

## 回答 #2

> 赞同：275
> 
> 时间：2008-09-28T00:25:44.817

[`System.Obsolete`](https://docs.microsoft.com/en-us/dotnet/api/system.obsoleteattribute)在我看来，是框架中最有用的属性之一。对不应再使用的代码发出警告的能力非常有用。我喜欢有一种方法来告诉开发人员不应该再使用某些东西，以及有一种方法来解释为什么并指出更好/新的做事方式。

这[`Conditional attribute`](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.conditionalattribute)对于调试使用也非常方便。它允许您在代码中添加用于调试目的的方法，这些方法在您构建用于发布的解决方案时不会被编译。

然后有很多我认为有用的特定于 Web 控件的属性，但这些属性更具体，并且在我发现的服务器控件开发之外没有任何用途。

* * *

## 回答 #3

> 赞同：206
> 
> 时间：2008-09-28T00:25:21.977

[`[Flags]`](https://docs.microsoft.com/en-us/dotnet/api/system.flagsattribute)很方便。可以肯定的是语法糖，但仍然相当不错。

```
[Flags] 
enum SandwichStuff
{
   Cheese = 1,
   Pickles = 2,
   Chips = 4,
   Ham = 8,
   Eggs = 16,
   PeanutButter = 32,
   Jam = 64
};

public Sandwich MakeSandwich(SandwichStuff stuff)
{
   Console.WriteLine(stuff.ToString());
   // ...
}

// ...

MakeSandwich(SandwichStuff.Cheese 
   | SandwichStuff.Ham 
   | SandwichStuff.PeanutButter);
// produces console output: "Cheese, Ham, PeanutButter" 
```

* * *

**Leppie**指出了一些我没有意识到的事情，这反而削弱了我对这个属性的热情：它**没有**指示编译器允许位组合作为枚举变量的有效值，编译器无论如何都允许枚举使用这种方式。我的 C++ 背景显示...*叹息*

* * *

## 回答 #4

> 赞同：178
> 
> 时间：2008-09-28T01:22:17.770

我喜欢[`[DebuggerStepThrough]`System.Diagnostics](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.debuggerstepthroughattribute)。

避免进入那些单行无操作的方法或属性非常方便（如果您被迫在没有自动属性的早期 .Net 中工作）。将属性放在一个简短的方法或属性的 getter 或 setter 上，即使在调试器中点击“step into”，你也会飞过。

* * *

## 回答 #5

> 赞同：138
> 
> 时间：2008-09-28T00:34:26.120

对于它的价值，这里[是所有 .NET 属性的列表](http://msdn.microsoft.com/en-us/library/system.attribute.aspx#inheritanceContinued)。有几百个。

我不知道其他人，但我有一些严肃的 RTFM 要做！

* * *

## 回答 #6

> 赞同：131
> 
> 时间：2009-05-21T12:15:57.190

我的投票是[`Conditional`](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.conditionalattribute)

```
[Conditional("DEBUG")]
public void DebugOnlyFunction()
{
    // your code here
} 
```

您可以使用它来添加具有高级调试功能的功能；例如`Debug.Write`，它仅在调试版本中调用，因此允许您将复杂的调试逻辑封装在程序的主要流程之外。

* * *

## 回答 #7

> 赞同：98
> 
> 时间：2009-03-12T02:36:32.167

我总是在我的用户控件、自定义控件或我将通过属性网格编辑的任何类的公共属性上使用和属性`DisplayName`。.NET PropertyGrid 使用这些标记来格式化未设置为默认值的名称、描述面板和粗体值。`Description``DefaultValue`

```
[DisplayName("Error color")]
[Description("The color used on nodes containing errors.")]
[DefaultValue(Color.Red)]
public Color ErrorColor
{
    ...
} 
```

`Description`如果没有找到 XML 注释，我只希望 Visual Studio 的 IntelliSense 会考虑该属性。这将避免必须重复两次相同的句子。

* * *

## 回答 #8

> 赞同：68
> 
> 时间：2008-09-28T00:20:27.607

`[Serializable]`一直用于序列化和反序列化与外部数据源（如 xml）或远程服务器之间的对象。[更多关于它在这里。](https://docs.microsoft.com/en-us/dotnet/api/system.serializableattribute)

* * *

## 回答 #9

> 赞同：57
> 
> 时间：2008-09-28T00:25:42.977

在 Hofstadtian 精神中，`[Attribute]`属性非常有用，因为它是您创建自己属性的方式。我使用属性而不是接口来实现插件系统、向枚举添加描述、模拟多个调度和其他技巧。

* * *

## 回答 #10

> 赞同：46
> 
> 时间：2009-05-02T12:39:56.253

[这](https://stackoverflow.com/q/51950)是关于有趣属性[InternalsVisibleTo](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.compilerservices.internalsvisibletoattribute)的帖子。基本上它的作用是模仿 C++ 好友访问功能。它对于单元测试非常方便。

* * *

## 回答 #11

> 赞同：44
> 
> 时间：2008-09-28T01:00:13.267

我发现[`[DefaultValue]`](https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.defaultvalueattribute)它非常有用。

* * *

## 回答 #12

> 赞同：28
> 
> 时间：2008-09-28T01:20:13.750

我建议`[TestFixture]`和`[Test]`- 从[nUnit](https://nunit.org/)库。

代码中的单元测试为重构和编码文档提供了安全性。

* * *

## 回答 #13

> 赞同：26
> 
> 时间：2008-10-15T14:35:35.623

```
[XmlIgnore] 
```

因为这允许您忽略（在任何 xml 序列化中）“父”对象，否则会在保存时导致异常。

* * *

## 回答 #14

> 赞同：25
> 
> 时间：2008-12-01T02:37:58.003

我喜欢将该`[ThreadStatic]`属性与基于线程和堆栈的编程结合使用。例如，如果我想要一个我想与调用序列的其余部分共享的值，但我想在带外（即在调用参数之外）执行它，我可能会采用这样的方法。

```
class MyContextInformation : IDisposable {
    [ThreadStatic] private static MyContextInformation current;

    public static MyContextInformation Current {
        get { return current; }
    }

    private MyContextInformation previous;

    public MyContextInformation(Object myData) {
       this.myData = myData;
       previous = current;
       current = this;
    }

    public void Dispose() {
       current = previous;
    }
} 
```

稍后在我的代码中，我可以使用它向我的代码下游的人提供带外的上下文信息。例子：

```
using(new MyContextInformation(someInfoInContext)) {
   ...
} 
```

ThreadStatic 属性允许我将调用范围仅限制到有问题的线程，从而避免跨线程数据访问的混乱问题。

* * *

## 回答 #15

> 赞同：25
> 
> 时间：2009-06-09T16:57:25.397

它没有很好的命名，在框架中没有得到很好的支持，并且不应该需要参数，但是这个属性是不可变类的有用标记：

```
[ImmutableObject(true)] 
```

* * *

## 回答 #16

> 赞同：23
> 
> 时间：2012-12-05T15:36:09.097

[DebuggerHiddenAttribute](https://docs.microsoft.com/en-us/dotnet/api/system.diagnostics.debuggerhiddenattribute)允许避免进入不应调试的代码。

```
public static class CustomDebug
{
    [DebuggerHidden]
    public static void Assert(Boolean condition, Func<Exception> exceptionCreator) { ... }
}

...

// The following assert fails, and because of the attribute the exception is shown at this line
// Isn't affecting the stack trace
CustomDebug.Assert(false, () => new Exception()); 
```

它还可以防止在堆栈跟踪中显示方法，这在具有仅包装另一个方法的方法时很有用：

```
[DebuggerHidden]
public Element GetElementAt(Vector2 position)
{
    return GetElementAt(position.X, position.Y);
}

public Element GetElementAt(Single x, Single y) { ... } 
```

如果您现在调用`GetElementAt(new Vector2(10, 10))`并且包装方法发生错误，则调用堆栈不会显示正在调用引发错误的方法的方法。

* * *

## 回答 #17

> 赞同：21
> 
> 时间：2009-01-04T19:27:58.930

[`DesignerSerializationVisibilityAttribute`](https://docs.microsoft.com/en-us/dotnet/api/system.componentmodel.designerserializationvisibilityattribute) is very useful. When you put a runtime property on a control or component, and you don't want the designer to serialize it, you use it like this:

```
[DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
public Foo Bar {
    get { return baz; }
    set { baz = value; }
} 
```

* * *

## 回答 #18

> 赞同：17
> 
> 时间：2008-09-29T07:17:42.040

只有少数属性获得编译器支持，但属性的一个非常有趣的用途是在 AOP 中：[PostSharp](http://www.postsharp.org/)使用您的定制属性将 IL 注入方法中，允许各种能力......日志/跟踪是微不足道的例子 - 但还有一些其他很好的例子是诸如自动 INotifyPropertyChanged 实现（[此处](http://code.google.com/p/postsharp-user-samples/wiki/DataBindingSupport)）之类的东西。

一些发生并*直接影响编译器或运行时*：

*   `[Conditional("FOO")]`- 只有在构建期间定义了“FOO”符号时才会调用此方法（包括参数评估）
*   `[MethodImpl(...)]`- 用于表示同步、内联等一些事情
*   `[PrincipalPermission(...)]`- 用于自动将安全检查注入代码
*   `[TypeForwardedTo(...)]`- 用于在程序集之间移动类型*而不重建调用者*

`System.ComponentModel`对于通过反射手动检查的东西——我是属性的忠实粉丝；`[TypeDescriptionProvider(...)]`, `[TypeConverter(...)]`,之类的东西`[Editor(...)]`可以完全改变数据绑定场景中类型的行为（即动态属性等）。

* * *

## 回答 #19

> 赞同：16
> 
> 时间：2008-09-28T00:25:28.373

如果我要进行代码覆盖率爬网，我认为这两个将是最重要的：

```
 [Serializable]
 [WebMethod] 
```

* * *

## 回答 #20

> 赞同：15
> 
> 时间：2008-10-15T16:28:00.407

我最近一直在使用`[DataObjectMethod]`。它描述了该方法，因此您可以将您的类与 ObjectDataSource（或其他控件）一起使用。

```
[DataObjectMethod(DataObjectMethodType.Select)] 
[DataObjectMethod(DataObjectMethodType.Delete)] 
[DataObjectMethod(DataObjectMethodType.Update)] 
[DataObjectMethod(DataObjectMethodType.Insert)] 
```

[更多信息](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataobjectmethodattribute(VS.80).aspx)

* * *

## 回答 #21

> 赞同：12
> 
> 时间：2008-10-22T14:26:22.237

在我们当前的项目中，我们使用

```
[ComVisible(false)] 
```

它控制单个托管类型或成员或程序集中所有类型对 COM 的可访问性。

[更多信息](https://docs.microsoft.com/en-us/dotnet/api/system.runtime.interopservices.comvisibleattribute)

* * *

## 回答 #22

> 赞同：12
> 
> 时间：2008-10-13T09:05:14.607

```
[TypeConverter(typeof(ExpandableObjectConverter))] 
```

告诉设计器扩展作为类（您的控件的）的属性

```
[Obfuscation] 
```

[指示混淆工具对程序集、类型或成员采取指定的操作。](https://docs.microsoft.com/en-us/dotnet/api/system.reflection.obfuscationattribute)（尽管通常您使用装配级别`[assembly:ObfuscateAssemblyAttribute(true)]`

* * *

## 回答 #23

> 赞同：9
> 
> 时间：2008-09-28T04:17:39.923

我使用最多的属性是与 XML 序列化相关的属性。

`XmlRoot`

`XmlElement`

`XmlAttribute`

ETC...

在进行任何快速而肮脏的 XML 解析或序列化时非常有用。

* * *

## 回答 #24

> 赞同：8
> 
> 时间：2008-09-28T01:25:26.247

作为一个中层开发者，我喜欢

`System.ComponentModel.EditorBrowsableAttribute`允许我隐藏属性，以便 UI 开发人员不会被他们不需要查看的属性所淹没。

`System.ComponentModel.BindableAttribute`有些东西不需要数据绑定。同样，减少了 UI 开发人员需要做的工作。

我也喜欢`DefaultValue`劳伦斯约翰斯顿提到的那个。

`System.ComponentModel.BrowsableAttribute`并且`Flags`经常使用。

我 `System.STAThreadAttribute System.ThreadStaticAttribute` 在需要的时候使用。

顺便一提。我这些对所有 .Net 框架开发人员同样有价值。

* * *

## 回答 #25

> 赞同：8
> 
> 时间：2012-06-08T13:01:02.417

`[EditorBrowsable(EditorBrowsableState.Never)]`如果项目不在您的解决方案中，则允许您隐藏 IntelliSense 的属性和方法。非常有助于隐藏流畅接口的无效流。您希望多久执行一次 GetHashCode() 或 Equals()？

对于 MVC `[ActionName("Name")]`，您可以使用具有相同方法签名的 Get 操作和 Post 操作，或者在操作名称中使用破折号，否则如果不为其创建路由，则无法实现。

* * *

## 回答 #26

> 赞同：8
> 
> 时间：2012-10-15T20:54:53.253

我认为在这里提一下很重要，以下属性也很重要：

```
STAThreadAttribute 
```

指示应用程序的 COM 线程模型是单线程单元 (STA)。

例如，此属性在 Windows 窗体应用程序中使用：

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());
    }
} 
```

并且 ...

```
SuppressMessageAttribute 
```

禁止报告特定的静态分析工具违反规则，允许对单个代码工件进行多次禁止。

例如：

```
[SuppressMessage("Microsoft.Performance", "CA1801:ReviewUnusedParameters", MessageId = "isChecked")]
[SuppressMessage("Microsoft.Performance", "CA1804:RemoveUnusedLocals", MessageId = "fileIdentifier")]
static void FileNode(string name, bool isChecked)
{
    string fileIdentifier = name;
    string fileName = name;
    string version = String.Empty;
} 
```

* * *

## 回答 #27

> 赞同：7
> 
> 时间：2012-03-11T12:08:08.933

下面是我在一个大项目中实际使用的预定义属性的快速列表，大致按使用频率排序（~500k LoCs）：

标志、可序列化、WebMethod、COMVisible、TypeConverter、条件、ThreadStatic、过时、InternalsVisibleTo、DebuggerStepThrough。

* * *

## 回答 #28

> 赞同：6
> 
> 时间：2011-11-22T00:38:56.110

我通过 CodeSmith 生成数据实体类，并为一些验证例程使用属性。这是一个例子：

```
/// <summary>
/// Firm ID
/// </summary>
[ChineseDescription("送样单位编号")]
[ValidRequired()]
public string FirmGUID
{
    get { return _firmGUID; }
    set { _firmGUID = value; }
} 
```

我得到了一个实用程序类来根据附加到数据实体类的属性进行验证。这是代码：

```
namespace Reform.Water.Business.Common
{
/// <summary>
/// Validation Utility
/// </summary>
public static class ValidationUtility
{
    /// <summary>
    /// Data entity validation
    /// </summary>
    /// <param name="data">Data entity object</param>
    /// <returns>return true if the object is valid, otherwise return false</returns>
    public static bool Validate(object data)
    {
        bool result = true;
        PropertyInfo[] properties = data.GetType().GetProperties();
        foreach (PropertyInfo p in properties)
        {
            //Length validatioin
            Attribute attribute = Attribute.GetCustomAttribute(p,typeof(ValidLengthAttribute), false);
            if (attribute != null)
            {
                ValidLengthAttribute validLengthAttribute = attribute as ValidLengthAttribute;
                if (validLengthAttribute != null)
                {
                    int maxLength = validLengthAttribute.MaxLength;
                    int minLength = validLengthAttribute.MinLength;
                    string stringValue = p.GetValue(data, null).ToString();
                    if (stringValue.Length < minLength || stringValue.Length > maxLength)
                    {
                        return false;
                    }
                }
            }
            //Range validation
            attribute = Attribute.GetCustomAttribute(p,typeof(ValidRangeAttribute), false);
            if (attribute != null)
            {
                ValidRangeAttribute validRangeAttribute = attribute as ValidRangeAttribute;
                if (validRangeAttribute != null)
                {
                    decimal maxValue = decimal.MaxValue;
                    decimal minValue = decimal.MinValue;
                    decimal.TryParse(validRangeAttribute.MaxValueString, out maxValue);
                    decimal.TryParse(validRangeAttribute.MinValueString, out minValue);
                    decimal decimalValue = 0;
                    decimal.TryParse(p.GetValue(data, null).ToString(), out decimalValue);
                    if (decimalValue < minValue || decimalValue > maxValue)
                    {
                        return false;
                    }
                }
            }
            //Regex validation
            attribute = Attribute.GetCustomAttribute(p,typeof(ValidRegExAttribute), false);
            if (attribute != null)
            {
                ValidRegExAttribute validRegExAttribute = attribute as ValidRegExAttribute;
                if (validRegExAttribute != null)
                {
                    string objectStringValue = p.GetValue(data, null).ToString();
                    string regExString = validRegExAttribute.RegExString;
                    Regex regEx = new Regex(regExString);
                    if (regEx.Match(objectStringValue) == null)
                    {
                        return false;
                    }
                }
            }
            //Required field validation
            attribute = Attribute.GetCustomAttribute(p,typeof(ValidRequiredAttribute), false);
            if (attribute != null)
            {
                ValidRequiredAttribute validRequiredAttribute = attribute as ValidRequiredAttribute;
                if (validRequiredAttribute != null)
                {
                    object requiredPropertyValue = p.GetValue(data, null);
                    if (requiredPropertyValue == null || string.IsNullOrEmpty(requiredPropertyValue.ToString()))
                    {
                        return false;
                    }
                }
            }
        }
        return result;
    }
}
} 
```

* * *

## 回答 #29

> 赞同：6
> 
> 时间：2009-09-16T13:21:29.787

`[DeploymentItem("myFile1.txt")]` [MSDN Doc on DeploymentItem](https://docs.microsoft.com/en-us/dotnet/api/microsoft.visualstudio.testtools.unittesting.deploymentitemattribute)

如果您正在针对文件进行测试或将文件用作测试的输入，这非常有用。

* * *

## 回答 #30

> 赞同：5
> 
> 时间：2009-04-29T08:57:15.703

`[System.Security.Permissions.PermissionSetAttribute]`允许使用声明性安全将 PermissionSet 的安全操作应用于代码。

```
// usage:
public class FullConditionUITypeEditor : UITypeEditor
{
    // The immediate caller is required to have been granted the FullTrust permission.
    [PermissionSetAttribute(SecurityAction.LinkDemand, Name = "FullTrust")]
    public FullConditionUITypeEditor() { }
} 
```

* * *

## 回答 #31

> 赞同：2
> 
> 时间：2008-10-15T15:06:32.550

```
// on configuration sections
[ConfigurationProperty] 

// in asp.net
[NotifyParentProperty(true)] 
```

* * *

## 回答 #32

> 赞同：2
> 
> 时间：2012-09-17T10:29:34.187

我总是使用属性 , `[Serializable]`, `[WebMethod]`, 。`[DefaultValue]``[Description("description here")]`

但除此之外，c# 中有一个[全局属性](http://msdn.microsoft.com/en-us/library/284c1c4s%28v=vs.71%29.aspx)。

```
[assembly: System.CLSCompliant(true)]
[assembly: AssemblyCulture("")]
[assembly: AssemblyDescription("")] 
```

# silverlight - Silverlight RC0 升级问题

> ID：144857
> 
> 赞同：0
> 
> 时间：2008-09-28T00:28:35.603
> 
> 标签：silverlight

自从从 SL2 B2 升级到 RC0 之后，我的 Page.xaml 中的以下代码行给出了`AG_E_PARSER_BAD_PROPERTY_VALUE`...任何人有任何想法吗？我在重大更改文档中没有看到任何内容。它似乎是下面代码段中的绑定模式。

```
ItemsSource="{Binding Mode=TwoWay, Source={StaticResource ProductListDS}}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-29T00:31:38.147

您是否尝试在标题模板中执行此操作？如果是这样，这似乎是 RC0 [http://silverlight.net/forums/p/30592/98478.aspx中的一个错误](http://silverlight.net/forums/p/30592/98478.aspx)

此外，RC0 中的新 ComboBox 控件似乎也存在问题。

Bart Czernicki [www.silverlighthack.com](http://www.silverlighthack.com)

# c# - Windows/.Net 中的蓝牙 API？

> ID：144862
> 
> 赞同：32
> 
> 时间：2008-09-28T00:30:33.213
> 
> 标签：c#, .net, windows, windows-xp, bluetooth

我正在编写一个蓝牙扫描仪，用于定位和识别本地附近的移动设备。这是我可以使用 C# 完成的事情，还是我需要下拉到 C/C++ API 中？我的应用程序面向 Windows XP 和 Vista。指针表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-09-28T01:30:15.207

PC 上蓝牙的一个问题是使用了多个 BT 堆栈，您永远无法完全知道在给定机器上哪个可用。最常见的是 Widcomm（现在是 Broadcom）和 Microsoft（出现在 XP 中，可能是服务包之一）。但是，一些 BT 硬件供应商封装了 BlueSoleil，而一些则使用了东芝。大多数加密狗将与 MS 堆栈一起使用，因此我见过的 .NET 库倾向于使用它。

每个堆栈都有一种完全不同的方式来进行发现部分，您可以在其中浏览附近的设备并查询它们的服务。

如果我今天必须选择一种方法，我可能会在 C++ 中进行发现并为 .NET 添加一个接口。

32feet.net 的东西在我尝试时运行良好，但不支持 Widcomm 堆栈。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2008-09-28T01:01:01.970

还有 Peter Foot 的 32feet.net

[http://inthehand.com/content/32feet.aspx](http://inthehand.com/content/32feet.aspx)

当它是 v1.5 时，我已经玩过这个，它运行良好。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2008-11-20T20:24:51.127

[Mike Petrichenko](http://www.btframework.com/)有一个不错的 BT 框架。它适用于 BlueSoleil、Widcomm、东芝和微软。

它现在称为无线通信库，可与蓝牙 802.11 和红外线一起使用。Mike 将公司命名为 Soft Service Company，并以 100 美元到 2050 美元的价格出售带有和不带有源代码的非商业和商业许可证。

# java - 带有标签的 JFreeChart XYPlot

> ID：144872
> 
> 赞同：4
> 
> 时间：2008-09-28T00:35:24.793
> 
> 标签：java, jfreechart

我在 JFreeChart 中使用 XYPlot。它上面的所有线条都是 XYSeries 对象。两个轴都是 NumberAxis 对象。Y 轴范围为 0-1，每 0.1 个刻度。除了显示数字之外，我还想在 Y 轴上显示文本，例如高/中/低。高将覆盖 0.7-1 等。这样做的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2008-09-28T13:43:31.590

我有一些 JFreeChart 经验，经过一番研究，我没有将三个标签添加到轴的答案。

但是，作为一种替代方法，您应该能够通过为 NumberAxis 设置 MarkerAxisBand（使用此方法）来用颜色在绘图上描绘[这](http://www.jfree.org/jfreechart/api/gjdoc/org/jfree/chart/axis/MarkerAxisBand.html)三个[区域](http://www.jfree.org/jfreechart/api/gjdoc/org/jfree/chart/axis/NumberAxis.html#setMarkerBand:MarkerAxisBand)。

然后，您可以将间隔标记添加到 MarkerAxisBand 以突出显示这三个区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T12:05:19.960

试试这个......它可以给出类似的结果

[JFreeChart 文本注释不起作用？](https://stackoverflow.com/questions/12262947/jfreechart-text-annotations-not-working)

```
XYTextAnnotation textAnnotaion = new XYTextAnnotation(description, xMid, yMid);
plot.addAnnotation(textAnnotaion);
textAnnotaion.setRotationAngle(90.0); 
```

# tree - 如何判断有向无环图的强度？

> ID：144880
> 
> 赞同：0
> 
> 时间：2008-09-28T00:40:20.053
> 
> 标签：tree, graph-theory, directed-acyclic-graphs

好奇什么被认为是判断有向无环图强度的可靠算法/方法 - 特别是某些节点的强度。我对此的主要问题可以归结为以下两个图表：

![达格力量](https://farm4.static.flickr.com/3055/2893003041_0e9c6dc251.jpg)（如果图表未显示，请单击此处或访问此链接：[http ://www.flickr.com/photos/86396568@N00/2893003041/](http://www.flickr.com/photos/86396568@N00/2893003041/)

在我看来，A 的地位比 A 强。我判断强度的依据是如果一个链接被击倒，一个节点可以保持多强。我称第一个为细“高跷”，第二个为粗“茎”。

以下是我目前考虑的判断节点强度的方法：

1）计算下面的节点数，减去上面的节点数。

*   A=7, a=7, B=5, b=1

2）计算每个节点的完整路径（到终止）的数量，将它们的长度相加。

*   A=17 (1+5+5+5+1), B=12 (4+4+4), a=9 (3+3+3), b=2
*   这使高跷更坚固，而不是茎。

3）计算每条可能的路径，将每个节点视为目的地。

*   A=9 (A->B, A->C, A->D, A->E, A->G, 2xA->F, 2xA->H), B=6, a=9, b= 2

到目前为止，3 似乎是最好的选择，但有没有更好的、适用于 DAG 的通用选项？这是具有已知最佳方法的东西吗？原则是在图表中使用尽可能多的信息，并以直观的方式解释解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2008-09-28T00:52:55.360

这真的取决于你所说的力量。由于 DAG 在表示信息方面的多功能性，您可以讨论从多结果控制流到非状语话语连接词的论据子句，甚至是句子中不同单词之间的全套依赖关系。

所有这些都会以不同的方式查看节点强度。例如，控制流可能会认为具有最多结果（因此最向外的弧）的节点是最强的，因为它对图表的最终结果具有最大的权力。在话语中，最强的节点是话语连接词，但它在语音和文本中出现在第一个连接词之后和第三个之前。一个句子的词汇“头”的选择与直接与之交互的弧的数量没有直接关系。

我的意思是，由于“强度”一词的多义性和 DAG 适合的数据类型，在这种数据类型中计算“强度”并没有真正的灵丹妙药。我想说，在机器学习问题中，所有这三种方法在为分类或排序问题选择特定类型的节点时都会提供非常丰富的信息，但最终，答案取决于数据类型的实际应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2008-09-28T00:53:13.860

我认为您需要更清楚地定义“强度”。这与[最大流量问题](http://en.wikipedia.org/wiki/Max_flow)有关吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T07:23:55.967

好的，实际应用是运动队。每个节点都是一个团队，每个环节都是对另一个团队的胜利。假设没有循环的胜利路径，如 A->B->C->A。目的是得到一个不与图表冲突的实力排名，并按照团队的实力对团队进行排名。有问题的网站是我的（有点半开玩笑的）足球网站，[http://beatpaths.com/](http://beatpaths.com/)，您可以在其中每周查看整个 NFL 赛季的完整图表。（和其他运动。）我基本上是在寻找我上面列出的排名算法之外的排名算法，这些算法可能更有意义，并且可以被辩护为使用图表中的所有信息。目标不一定是在未来选秀方面更准确（尽管可能会使用更强大的算法），而是尽可能合理地描述本赛季到目前为止。

您可以在网站上看到 NFL 赛季的第 3 周。我删除了两个模棱两可的“beatloops”（长篇故事），依靠图表的其余部分来确定啄食顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-29T01:32:39.093

如果您要进行预测，最好的选择可能是最大熵排名算法。问题是为你的学习者开发一个足够大的数据集——越多越好。听起来您可以将每周比赛的排名用作单个排名实例。

# iphone - 在 iPhone OS 中读取通话记录

> ID：144888
> 
> 赞同：12
> 
> 时间：2008-09-28T00:45:06.127
> 
> 标签：iphone

我正在对 iPhone 应用程序的可行性进行一些研究，但在 Apple 的文档中找不到任何迹象表明 iPhone 应用程序可以读取手机的通话历史记录，特别是调用的号码/地址簿条目、时间和期间。

有谁知道这是否可能，以及如何？

注意：目的是消除用户自己执行此数据输入的需要。该应用程序用于记录与客户服务中心的交互。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2008-09-28T02:17:34.267

不幸的是，您无法访问通话记录。您拥有 API 访问权限的唯一用户数据是地址簿。您还可以访问照片/图片，但只能通过启动允许用户选择单个图像的 iPhone 控制的对话框。

这有点糟糕，希望这将在未来的版本中扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T02:23:04.003

您*可以*通过嗅探 iTunes 目录来访问 Mac 上的通话记录。有一些应用程序可以做到这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-09-28T01:00:06.247

AFAIK，您无法访问通话记录。地址簿是联系人数据库，而不是电话信息。

您可以在 SDK 的“iPhone OS 通讯簿编程指南”中阅读有关通讯簿的更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-06-19T19:51:13.010

似乎唯一的方法是从 iTunes 端读取日志，但现在从手机读取：

[http://arstechnica.com/apple/news/2007/11/iphonelogd-another-solution-for-viewing-your-iphone-call-log.ars](http://arstechnica.com/apple/news/2007/11/iphonelogd-another-solution-for-viewing-your-iphone-call-log.ars)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2011-04-25T20:42:56.863

我做了一些阅读，其中指出您可以访问 iphone 上的通话记录。它可能过时了，但值得一试。显然，历史记录仅保存在名为 call 的表上的 sqlite db 中。数据库位于/位于 /private/var/mobile/library/CallHistory/call_history.db

如果你使用 FMDB，你可以简单地做这样的事情。

FMResultSet *rs = [db executeQuery:@"Select * from Call"];

获取通话记录

# java - 如何在Java中居中一个窗口？

> ID：144892
> 
> 赞同：124
> 
> 时间：2008-09-28T00:48:52.903
> 
> 标签：java, swing, user-interface, awt

使 a 居中的最简单方法是什么`java.awt.Window`，例如 a`JFrame`或 a `JDialog`？

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2008-09-28T00:49:52.450

从[这个链接](https://web.archive.org/web/20080921040824/http://blog.codebeach.com/2008/02/center-dialog-box-frame-or-window-in.html)

> 如果您使用的是 Java 1.4 或更新版本，则可以在对话框、框架或窗口上使用简单的方法 setLocationRelativeTo(null) 将其居中。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2008-09-28T01:33:16.387

这应该适用于所有版本的 Java

```
public static void centreWindow(Window frame) {
    Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
    int x = (int) ((dimension.getWidth() - frame.getWidth()) / 2);
    int y = (int) ((dimension.getHeight() - frame.getHeight()) / 2);
    frame.setLocation(x, y);
} 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2013-05-01T22:06:39.940

`setLocationRelativeTo(null)`应该在你使用`setSize(x,y)`或使用之后调用`pack()`。

* * *

## 回答 #4

> 赞同：27
> 
> 时间：2008-09-30T03:39:07.597

请注意，setLocationRelativeTo(null) 和 Tookit.getDefaultToolkit().getScreenSize() 技术仅适用于主监视器。如果您处于多显示器环境中，则在进行此类计算之前，您可能需要获取有关窗口所在的特定显示器的信息。

有时重要，有时不重要……

有关如何获取此信息的更多信息，请参阅[GraphicsEnvironment javadocs 。](https://docs.oracle.com/javase/7/docs/api/java/awt/GraphicsEnvironment.html)

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2013-11-02T20:19:50.577

在 Linux 上的代码

```
setLocationRelativeTo(null) 
```

在多显示环境中，每次启动它时将我的窗口放置到随机位置。和代码

```
setLocation((Toolkit.getDefaultToolkit().getScreenSize().width  - getSize().width) / 2, (Toolkit.getDefaultToolkit().getScreenSize().height - getSize().height) / 2); 
```

将窗口“切成”两半，并将其放置在我的两个显示器之间的确切中心。我使用以下方法将其居中：

```
private void setWindowPosition(JFrame window, int screen)
{        
    GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
    GraphicsDevice[] allDevices = env.getScreenDevices();
    int topLeftX, topLeftY, screenX, screenY, windowPosX, windowPosY;

    if (screen < allDevices.length && screen > -1)
    {
        topLeftX = allDevices[screen].getDefaultConfiguration().getBounds().x;
        topLeftY = allDevices[screen].getDefaultConfiguration().getBounds().y;

        screenX  = allDevices[screen].getDefaultConfiguration().getBounds().width;
        screenY  = allDevices[screen].getDefaultConfiguration().getBounds().height;
    }
    else
    {
        topLeftX = allDevices[0].getDefaultConfiguration().getBounds().x;
        topLeftY = allDevices[0].getDefaultConfiguration().getBounds().y;

        screenX  = allDevices[0].getDefaultConfiguration().getBounds().width;
        screenY  = allDevices[0].getDefaultConfiguration().getBounds().height;
    }

    windowPosX = ((screenX - window.getWidth())  / 2) + topLeftX;
    windowPosY = ((screenY - window.getHeight()) / 2) + topLeftY;

    window.setLocation(windowPosX, windowPosY);
} 
```

使窗口出现在第一个显示器的正中央。这可能不是最简单的解决方案。

在 Linux、Windows 和 Mac 上正常工作。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-04-12T08:32:53.657

我终于使用 Swing GUI Forms 在 NetBeans 中使用了这些代码，以使主 jFrame 居中：

```
package my.SampleUIdemo;
import java.awt.*;

public class classSampleUIdemo extends javax.swing.JFrame {
    /// 
    public classSampleUIdemo() {
        initComponents();
        CenteredFrame(this);  // <--- Here ya go.
    }
    // ...
    // void main() and other public method declarations here...

    ///  modular approach
    public void CenteredFrame(javax.swing.JFrame objFrame){
        Dimension objDimension = Toolkit.getDefaultToolkit().getScreenSize();
        int iCoordX = (objDimension.width - objFrame.getWidth()) / 2;
        int iCoordY = (objDimension.height - objFrame.getHeight()) / 2;
        objFrame.setLocation(iCoordX, iCoordY); 
    } 

} 
```

或者

```
package my.SampleUIdemo;
import java.awt.*;

public class classSampleUIdemo extends javax.swing.JFrame {
        /// 
        public classSampleUIdemo() {
            initComponents(); 
            //------>> Insert your code here to center main jFrame.
            Dimension objDimension = Toolkit.getDefaultToolkit().getScreenSize();
            int iCoordX = (objDimension.width - this.getWidth()) / 2;
            int iCoordY = (objDimension.height - this.getHeight()) / 2;
            this.setLocation(iCoordX, iCoordY); 
            //------>> 
        } 
        // ...
        // void main() and other public method declarations here...

} 
```

或者

```
 package my.SampleUIdemo;
    import java.awt.*;
    public class classSampleUIdemo extends javax.swing.JFrame {
         /// 
         public classSampleUIdemo() {
             initComponents();
             this.setLocationRelativeTo(null);  // <<--- plain and simple
         }
         // ...
         // void main() and other public method declarations here...
   } 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2011-09-13T07:04:59.460

frame.setLocationRelativeTo(null);

完整示例：

```
public class BorderLayoutPanel {

    private JFrame mainFrame;
    private JButton btnLeft, btnRight, btnTop, btnBottom, btnCenter;

    public BorderLayoutPanel() {
        mainFrame = new JFrame("Border Layout Example");
        btnLeft = new JButton("LEFT");
        btnRight = new JButton("RIGHT");
        btnTop = new JButton("TOP");
        btnBottom = new JButton("BOTTOM");
        btnCenter = new JButton("CENTER");
    }

    public void SetLayout() {
        mainFrame.add(btnTop, BorderLayout.NORTH);
        mainFrame.add(btnBottom, BorderLayout.SOUTH);
        mainFrame.add(btnLeft, BorderLayout.EAST);
        mainFrame.add(btnRight, BorderLayout.WEST);
        mainFrame.add(btnCenter, BorderLayout.CENTER);
        //        mainFrame.setSize(200, 200);
        //        or
        mainFrame.pack();
        mainFrame.setVisible(true);

        //take up the default look and feel specified by windows themes
        mainFrame.setDefaultLookAndFeelDecorated(true);

        //make the window startup position be centered
        mainFrame.setLocationRelativeTo(null);

        mainFrame.setDefaultCloseOperation(mainFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-09-30T05:38:04.167

以下不适用于 JDK 1.7.0.07：

```
frame.setLocationRelativeTo(null); 
```

它将左上角置于中心 - 与窗口居中不同。另一个也不起作用，涉及 frame.getSize() 和 dimension.getSize()：

```
Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
int x = (int) ((dimension.getWidth() - frame.getWidth()) / 2);
int y = (int) ((dimension.getHeight() - frame.getHeight()) / 2);
frame.setLocation(x, y); 
```

getSize() 方法继承自 Component 类，因此 frame.getSize 也返回窗口的大小。因此，从垂直和水平尺寸中减去一半的垂直和水平尺寸，以找到放置左上角的位置的 x、y 坐标，从而得到中心点的位置，最终也使窗口居中。但是，上面代码的第一行很有用，“Dimension...”。只需这样做以使其居中：

```
Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
JLabel emptyLabel = new JLabel("");
emptyLabel.setPreferredSize(new Dimension( (int)dimension.getWidth() / 2, (int)dimension.getHeight()/2 ));
frame.getContentPane().add(emptyLabel, BorderLayout.CENTER);
frame.setLocation((int)dimension.getWidth()/4, (int)dimension.getHeight()/4); 
```

JLabel 设置屏幕大小。它位于 Oracle/Sun 站点的 java 教程中的 FrameDemo.java 中。我将其设置为屏幕大小的高度/宽度的一半。然后，我通过将左上角放置在距左侧屏幕尺寸尺寸的 1/4 处以及距顶部屏幕尺寸尺寸的 1/4 处将其居中。您可以使用类似的概念。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-05-02T07:35:29.323

下面是在现有窗口的顶部中心显示框架的代码。

```
public class SwingContainerDemo {

private JFrame mainFrame;

private JPanel controlPanel;

private JLabel msglabel;

Frame.setLayout(new FlowLayout());

  mainFrame.addWindowListener(new WindowAdapter() {
     public void windowClosing(WindowEvent windowEvent){
        System.exit(0);
     }        
  });    
  //headerLabel = new JLabel("", JLabel.CENTER);        
 /* statusLabel = new JLabel("",JLabel.CENTER);    
  statusLabel.setSize(350,100);
 */ msglabel = new JLabel("Welcome to TutorialsPoint SWING Tutorial.", JLabel.CENTER);

  controlPanel = new JPanel();
  controlPanel.setLayout(new FlowLayout());

  //mainFrame.add(headerLabel);
  mainFrame.add(controlPanel);
 // mainFrame.add(statusLabel);

  mainFrame.setUndecorated(true);
  mainFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
  mainFrame.getRootPane().setWindowDecorationStyle(JRootPane.NONE);
  mainFrame.setVisible(true);  

  centreWindow(mainFrame); 
```

}

```
public static void centreWindow(Window frame) {
    Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
    int x = (int) ((dimension.getWidth() - frame.getWidth()) / 2);
    int y = (int) ((dimension.getHeight() - frame.getHeight()) / 2);
    frame.setLocation(x, 0);
}

public void showJFrameDemo(){
 /* headerLabel.setText("Container in action: JFrame");   */
  final JFrame frame = new JFrame();
  frame.setSize(300, 300);
  frame.setLayout(new FlowLayout());       
  frame.add(msglabel);

  frame.addWindowListener(new WindowAdapter() {
     public void windowClosing(WindowEvent windowEvent){
        frame.dispose();
     }        
  });    

  JButton okButton = new JButton("Capture");
  okButton.addActionListener(new ActionListener() {
     public void actionPerformed(ActionEvent e) {
  //      statusLabel.setText("A Frame shown to the user.");
      //  frame.setVisible(true);
        mainFrame.setState(Frame.ICONIFIED);
        Robot robot = null;
        try {
            robot = new Robot();
        } catch (AWTException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        final Dimension screenSize = Toolkit.getDefaultToolkit().
                getScreenSize();
        final BufferedImage screen = robot.createScreenCapture(
                new Rectangle(screenSize));

        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                new ScreenCaptureRectangle(screen);
            }
        });
        mainFrame.setState(Frame.NORMAL);
     }
  });
  controlPanel.add(okButton);
  mainFrame.setVisible(true); 
```

} 公共静态 void main(String[] args) 抛出异常 {

```
new SwingContainerDemo().showJFrameDemo(); 
```

}

以下是上述代码片段的输出：[![在此处输入图像描述](https://i.stack.imgur.com/BvcfS.png)](https://i.stack.imgur.com/BvcfS.png)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2015-03-15T05:41:30.270

在尝试使用`setLocationRelativeTo(null)`or使窗口居中后，您可能会忽略一些非常简单的事情`setLocation(x,y)`，最终它会有点偏离中心。

确保在调用***后***`pack()`使用这些方法之一，因为您最终将使用窗口本身的尺寸来计算将其放置在屏幕上的位置。直到`pack()`被调用，尺寸并不是你想象的那样，因此会放弃计算以使窗口居中。希望这可以帮助。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-12-25T13:50:41.540

示例：在第 3 行的 myWindow() 内部是您需要将窗口设置在屏幕中央的代码。

```
JFrame window;

public myWindow() {

    window = new JFrame();
    window.setSize(1200,800);
    window.setLocationRelativeTo(null); // this line set the window in the center of thr screen
    window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    window.getContentPane().setBackground(Color.BLACK);
    window.setLayout(null); // disable the default layout to use custom one.
    window.setVisible(true); // to show the window on the screen.
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-03-06T08:33:16.940

以下代码居中`Window`于当前监视器的中心（即鼠标指针所在的位置）。

```
public static final void centerWindow(final Window window) {
    GraphicsDevice screen = MouseInfo.getPointerInfo().getDevice();
    Rectangle r = screen.getDefaultConfiguration().getBounds();
    int x = (r.width - window.getWidth()) / 2 + r.x;
    int y = (r.height - window.getHeight()) / 2 + r.y;
    window.setLocation(x, y);
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-01-19T06:00:39.113

你也可以试试这个。

```
Frame frame = new Frame("Centered Frame");
Dimension dimemsion = Toolkit.getDefaultToolkit().getScreenSize();
frame.setLocation(dimemsion.width/2-frame.getSize().width/2, dimemsion.height/2-frame.getSize().height/2); 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-12-02T10:53:26.027

实际上框架`.getHeight()`并`getwidth()`没有返回值，通过`System.out.println(frame.getHeight());`直接输入宽度和高度的值来检查它，然后它会在中心正常工作。例如：如下

```
Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();      
int x=(int)((dimension.getWidth() - 450)/2);
int y=(int)((dimension.getHeight() - 450)/2);
jf.setLocation(x, y); 
```

450 都是我的框架宽度 n 高度

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-12-16T19:41:12.680

```
public class SwingExample implements Runnable {

    @Override
    public void run() {
        // Create the window
        final JFrame f = new JFrame("Hello, World!");
        SwingExample.centerWindow(f);
        f.setPreferredSize(new Dimension(500, 250));
        f.setMaximumSize(new Dimension(10000, 200));
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }

    public static void centerWindow(JFrame frame) {
        Insets insets = frame.getInsets();
        frame.setSize(new Dimension(insets.left + insets.right + 500, insets.top + insets.bottom + 250));
        frame.setVisible(true);
        frame.setResizable(false);

        Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
        int x = (int) ((dimension.getWidth() - frame.getWidth()) / 2);
        int y = (int) ((dimension.getHeight() - frame.getHeight()) / 2);
        frame.setLocation(x, y);
    }
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-08-05T07:41:14.440

调用的顺序很重要：

**首先**——

```
pack(); 
```

**第二**——

```
setLocationRelativeTo(null); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-03-20T15:28:01.150

除了*Donal 的*回答之外，我还想添加一个小计算，以确保 Java 窗口完全位于窗口的中心。不仅仅是*“左上角”*的`the window is at the center of the window`。

```
public static void centreWindow(JFrame frame, int width, int height) {
        Dimension dimension = Toolkit.getDefaultToolkit().getScreenSize();
        int x = (int) ((dimension.getWidth() - frame.getWidth()) / 2);
        int y = (int) ((dimension.getHeight() - frame.getHeight()) / 2);

        // calculate perfect center
        int perf_x = (int) x - width/2;
        int perf_y = (int) y - height/2;

        frame.setLocation(perf_x, perf_y);
    } 
```

# visual-studio-2003 - 如何检测 VS.NET 2003 控件库项目中的设计时间

> ID：144898
> 
> 赞同：3
> 
> 时间：2008-09-28T00:53:02.457
> 
> 标签：visual-studio-2003, design-time

下面的代码无法按预期工作以检测它是否处于设计模式（VS.Net 2003 - 控制库）：

if (this.Site != null && this.Site.DesignMode == true)
{
// 设计模式
}
else
{
// 运行时
}

它用于复杂的用户控件，派生自另一个用户控件并在其上包含其他用户控件。
是否有另一种方法来检测 VS.NET 2003 中的设计时间，或者上面的代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2008-11-18T06:19:23.190

`DesignMode`不能从构造函数内部工作。一些替代方案（不确定它们是否适用于 1.1）是

`if (System.ComponentModel.LicenseManager.UsageMode == System.ComponentModel.LicenseUsageMode.Designtime)`

或者

打电话`GetService(typeof(IDesignerHost))`看看它是否返回了一些东西。

我对第一个选项有更好的运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2008-09-28T01:50:13.537

[我想你可以使用http://west-wind.com/weblog/posts/189.aspx](http://west-wind.com/weblog/posts/189.aspx)中描述的 HttpContext.Current == null

在 .Net 2.0 中有 Control.DesignMode ( [http://msdn.microsoft.com/en-us/library/system.web.ui.control.designmode.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.control.designmode.aspx) )。不过，我想您有充分的理由继续使用 VS 2003，因此升级可能不是您的选择。

**更新**如果您正在使用 Winforms，Component.DesignMode ( [http://msdn.microsoft.com/en-us/library/system.componentmodel.component.designmode.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.component.designmode.aspx) ) 是正确的检查方法。但是，如果 this.Site.DesignMode 不能正常工作，则 Component.DesignMode 可能无法正常工作，因为它会执行您正在执行的检查（Site != null && Site.DesignMode）。

这可能是一个很长的镜头，但您确定您的基本控件不会覆盖 Site 属性吗？

# linux - linux下X上的系统范围键盘钩子

> ID：144901
> 
> 赞同：9
> 
> 时间：2008-09-28T00:54:51.877
> 
> 标签：linux

在Linux（X-windows）上安装键盘挂钩以在按下某些组合键时触发某些应用程序的最佳方法是什么？无论运行哪个窗口管理器，有没有办法做到这一点？这个想法是当某个键以类似于 Google 桌面对 Ctrl-Ctrl 所做的方式按下时调用（或带到前台）应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T01:29:58.517

`XGrabKey`在根窗口上是 xbindkey 是如何做到的。不过要小心使用其他杀死抓取的方法，不得不去某个地方`ssh`进入你自己的盒子只是为了杀死那个过程是非常烦人的......这就是为什么，如果是我，`xbindkeys`+“echo'moo'> /tmp/moo-fifo" 将是这样做的方法。这样，您还可以通过您尚未想到的任何其他方式来控制它。

# c# - DataSet 行/列查找的速度？

> ID：144902
> 
> 赞同：6
> 
> 时间：2008-09-28T00:55:43.840
> 
> 标签：c#, .net, optimization, datatable

最近，我不得不对存储在 DataSet 中的数据进行一些非常繁重的处理。它足够重，以至于我最终使用了一个工具来帮助识别我的代码中的一些瓶颈。当我分析瓶颈时，我注意到虽然 DataSet 查找并不是很慢（它们不是瓶颈），但它比我预期的要慢。我一直认为 DataSets 使用了某种 HashTable 风格的实现，这将使查找 O(1)（或者至少我认为 HashTables 是这样）。我的查找速度似乎比这慢得多。

我想知道是否有人知道任何关于 .NET 的 DataSet 类的实现的人愿意分享他们所知道的。

如果我做这样的事情：

```
DataTable dt = new DataTable();
if(dt.Columns.Contains("SomeColumn"))
{
    object o = dt.Rows[0]["SomeColumn"];
} 
```

该方法的查找时间`Contains(...)`以及检索要存储的值有多快`Object o`？我会认为它像 HashTable 一样快（假设我对 HashTables 的理解是正确的），但它看起来不像......

我从内存中编写了该代码，因此有些事情可能不是“语法正确”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2008-09-28T05:56:09.747

实际上，在引用列时建议使用整数，这样可以大大提高性能。为了使事情易于管理，您可以声明常量整数。所以你可以做而不是你所做的

```
const int SomeTable_SomeColumn = 0;

DataTable dt = new DataTable();
if(dt.Columns.Contains(SomeTable_SomeColumn))
{
    object o = dt.Rows[0][SomeTable_SomeColumn];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-10-29T18:28:58.057

通过[Reflector](http://www.red-gate.com/products/reflector/)，DataRow["ColumnName"] 的步骤是：

1.  从 ColumnName 获取 DataColumn。使用行的 DataColumnCollection["ColumnName"]。在内部，DataColumnCollection 将其 DataColumns 存储在 Hastable 中。O(1)
2.  获取 DataRow 的行索引。索引存储在内部成员中。O(1)
3.  使用 DataColumn[index] 在索引处获取 DataColumn 的值。DataColumn 将其数据存储在 System.Data.Common.DataStorage (internal, abstract) 成员中：

    返回 dataColumnInstance._storage.Get(recordIndex);

    一个示例具体实现是 System.Data.Common.StringStorage（内部，密封）。StringStorage（以及我检查的其他具体数据存储）将它们的值存储在一个数组中。Get(recordIndex) 只是在 recordIndex 处获取值数组中的对象。O(1)

所以总的来说你是 O(1) 但这并不意味着在操作期间的散列和函数调用是没有成本的。这只是意味着它不会随着 DataRows 或 DataColumns 数量的增加而增加成本。

有趣的是，DataStorage 使用数组作为值。无法想象添加或删除行时重建起来很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T01:01:16.587

我想任何查找都是 O(n)，因为我认为它们不会使用任何类型的哈希表，但实际上会使用更多的数组来查找行和列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T01:09:32.107

实际上，我相信列名存储在哈希表中。对于区分大小写的查找，应该是 O(1) 或常量查找。如果它必须逐个查看，那当然是 O(n)。

# vxworks - 我可以在 shell 中显示 RTP 的全局变量吗？

> ID：144923
> 
> 赞同：2
> 
> 时间：2008-09-28T01:09:13.433
> 
> 标签：vxworks

在 VxWorks 中，我可以像这样在 shell 中显示全局变量：

```
-> my_global
my_global = 0x103c4110：值 = 4 = 0x4

```

有没有办法对 RTP 全局变量做同样的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T01:15:22.577

您可以使用命令 (cmd) 解释器并附加到 RTP 来显示特定 RTP 中的全局变量。这是一个括号中带有注释的示例。

```
-> cmd（切换到命令解释器）
[vxWorks *]# rtp exec Hello_RTP.vxe &
启动进程“Hello_RTP.vxe”...
进程“Hello_RTP.vxe”（进程 ID = 0x105e4d50）已启动。
进程“Hello_RTP.vxe”的附件号是 %1。
[vxWorks *]# echo $my_global（在内核上下文中显示 my_global）
0x4
[vxWorks *]# %1（附加到 RTP - 也可以使用 rtp 附加）
[Hello_RTP]# echo $my_global
0x6b7（来自 RTP 上下文的全局变量）
[Hello_RTP]# echo $my_global
0x16e1（相同的全局变量..它递增）
[Hello_RTP]# %0 (从 RTP 分离。转到内核)
[vxWorks *]# echo $my_global（返回内核上下文）
0x4

```

请注意，这仅在 VxWorks 6.x 中可用。在 6 版本之前，vxWorks 中没有 RTP。

# java - 使用动态代理时，如何访问底层对象的注解？

> ID：144936
> 
> 赞同：4
> 
> 时间：2008-09-28T01:21:06.850
> 
> 标签：java, proxy, annotations

使用动态代理时，如何访问底层对象的注解？

具体来说，我正在使用 @Column("client_id") 注释 ORM 对象的设置，然后让动态代理跟踪何时调用带注释的设置器，但是......

带注释的代理似乎没有保留任何底层注释，因此无法对每次调用执行反射，如何使代理具有它所代理的类的注释？

谢谢你，艾伦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T11:46:41.060

AFAIK，这取决于您的字节码注入库。另外，请记住，注释通常不是继承的（由 Java 规范强加）。如果你想访问原始类，并且正在使用 CGLIB，你可以使用这个片段：

```
 if (Enhancer.isEnhanced(getClass())) {
    currClass = UnEnhancer.unenhance(getClass());
 } else {
    // else, let's get the original class directly
    currClass = getClass();
 } 
```

# c# - 使用异常数据

> ID：144957
> 
> 赞同：49
> 
> 时间：2008-09-28T01:38:08.683
> 
> 标签：c#, exception

您如何在您从事的 C# 项目中使用 Exception.Data 属性？

我想要建议模式的答案，而不是那些非常特定于您的应用程序的答案。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2008-09-28T03:07:17.190

我使用的异常记录器已经过调整，可以写出数据集合中的所有项目。然后对于我们遇到的每个我们无法从异常堆栈中诊断的异常，我们添加该函数范围内的所有数据，发送一个新的构建，并等待它再次发生。

我想我们是乐观主义者，因为我们不会把它放在每个函数中，但我们是悲观主义者，因为一旦我们解决了问题，我们就不会把它拿出来。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2008-09-28T02:26:45.650

当我知道我创建的异常需要被序列化时，我就使用了它。有一天使用 Reflector，我发现 Excepion.Data 卡在序列化流中并从序列化流中提取出来。

所以，基本上，如果我在自定义异常类上有已经是可序列化类型的属性，我会在派生类上实现它们，并使用底层数据对象作为它们的存储机制，而不是创建私有字段来保存数据。如果我的自定义异常对象的属性需要更高级的序列化，我通常使用支持私有字段来实现它们并在派生类中处理它们的序列化。

底线， Exception.Data 只需将您的属性粘贴到其中即可免费为您提供序列化 - 但请记住这些项目需要可序列化！

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-05-22T14:19:08.237

由于没有一个答案包含任何代码。作为这个问题的补充，可能有用的是如何实际查看`.Data`字典。因为它不是通用字典，只返回`IDictionary`

`foreach(var kvp in exception.Data)`kvp 的类型实际上是没有帮助的`object`。然而，从[MSDN](https://docs.microsoft.com/en-us/dotnet/api/system.exception.data)有一个简单的方法来迭代这个字典：

```
foreach (DictionaryEntry de in e.Data)
    Console.WriteLine("    Key: {0,-20}      Value: {1}", 
                             "'" + de.Key.ToString() + "'", de.Value); 
```

我真的不知道格式参数是什么`, -20`意思，也许 Take(20)？离题...这段代码在一个常见的错误记录器中非常有用，可以解开这些数据。更完整的用法类似于：

```
var messageBuilder = new StringBuilder();

do
{                
    foreach (DictionaryEntry kvp in exception.Data)
        messageBuilder.AppendFormat("{0} : {1}\n", kvp.Key, kvp.Value);

    messageBuilder.AppendLine(exception.Message);

} while ((exception = exception.InnerException) != null);

return messageBuilder.ToString(); 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2010-03-08T07:24:40.907

当异常沿堆栈向上传播时，我已使用它从封闭范围中捕获有关异常时状态的信息。诸如导致异常的文件名之类的项目，或者有助于追踪问题的某些 ID 的值。

在 Web 应用程序的最顶层，我还倾向于添加许多请求信息，例如 RawUrl、cookie、Referrer ......

有关更多详细信息，这是[我关于该主题的博客](https://blog.abodit.com/posts/2010-03-using-exception-data-to-add-additional-information-to-an-exception/)：

我不是等待问题发生，而是将此代码添加到与外部事物相关的异常可能发生的地方，例如文件名或正在访问的 URL，......换句话说，任何有助于重现的数据问题。

# windows - 红宝石。如何在 Windows 上复制和粘贴 irb？

> ID：144959
> 
> 赞同：10
> 
> 时间：2008-09-28T01:38:49.680
> 
> 标签：windows, ruby, console, copy-paste, irb

如何在 Windows 上复制和粘贴 irb（交互式 Ruby Shell）？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2008-09-28T01:45:38.150

为避免打开下拉菜单并单击，您需要更改命令窗口设置。为此，右键单击标题栏，选择属性，打开属性选项卡下的“快速编辑模式”（并保持“插入模式”打开），然后确定。

现在，要复制：拖动选择，右键单击复制。

要粘贴：右键单击而不选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2008-09-28T01:41:55.973

复制：点击 alt-space，选择编辑，选择标记，拖动选择文本，点击回车。

粘贴：点击 alt-space，选择编辑，选择粘贴。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2008-10-05T00:28:11.640

对于 CLI 复制/粘贴：

复制：`Ctrl`+`insert`
粘贴：`Shift`+`insert`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-10-06T08:06:03.417

您可能需要考虑使用[Console](http://sourceforge.net/projects/console/)，它可以替代 Windows 糟糕的命令行 chrome。它提供完全可重新定义的键盘快捷键和选项卡，因此非常适合 IRB。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-09-16T22:14:42.707

查看console2--非常好，允许您通过右键单击或其他方式粘贴。

更新：conemu 更好：[http ://conemu.github.io/](http://conemu.github.io/)

# firefox - 我可以从 Firefox 扩展中获取当前页面源代码吗？

> ID：144960
> 
> 赞同：1
> 
> 时间：2008-09-28T01:39:45.357
> 
> 标签：firefox, xul

这可以做到吗？如何？

* * *

我想写我自己的扩展。可以在我自己的扩展中获取当前页面的 sorcecode 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2008-09-28T12:26:41.417

正如 Rich 所说，`view-source`在 URL 前面添加将为您提供当前页面的源代码。一个键盘快捷键是`Ctrl+U`.

> 我想写我自己的扩展。

有许多现有的 Firefox 扩展可以获取页面的源代码并对其应用一些操作（颜色编码、语法检查等）。下载它们并查看它们如何处理它可能是一个不错的起点！

*   [探索源代码的 7 个 Firefox 扩展](http://www.searchenginejournal.com/7-firefox-extensions-to-explore-page-source-code/7375/)

*   [查看格式化源扩​​展](https://addons.mozilla.org/en-US/firefox/addon/697)

如果您是 Firefox 扩展开发的新手，[Lifehacker 上的这篇文章](http://lifehacker.com/software/programming/how-to-build-a-firefox-extension-264490.php)是一个很好的入门指南，它将让您了解在上面链接的扩展中查找可能与您自己相似的任务的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T07:26:24.260

当然，只需在 URL 前添加 view-source: 即可。

```
view-source:http://stackoverflow.com/posts/edit/145419 
```

例如，将显示此页面的来源 - 在地址栏中尝试。

# visual-studio - VS2005找不到创建GUID工具

> ID：144965
> 
> 赞同：1
> 
> 时间：2008-09-28T01:43:45.580
> 
> 标签：visual-studio, visual-studio-2005, guid, create-guid

我安装了 Visual Studio 2005 Professional ENU，并希望使用其创建 GUID 实用程序来创建 GUID。但是，我在“工具”菜单下找不到它。我应该怎么做才能获得这个实用程序？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2008-09-28T01:46:09.257

<Visual Studio 安装>\Common7\Tools\guidgen.exe

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2008-09-28T02:04:23.923

我发现使用 GUID 生成器宏比使用 GUID 生成器更方便。您可以为此宏分配快捷键组合，并立即在代码中的任何位置插入新的 GUID。

以下是感兴趣的代码：

```
Public Module GUIDGenModule

    Sub Create_GUID()
        DTE.ActiveDocument.Selection.Text = System.Guid.NewGuid().ToString("D").ToUpper()
    End Sub

End Module 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2008-09-28T01:51:09.883

C:\Program Files\Microsoft Visual Studio 8\Common7\Tools\guidgen.exe 下面的文件路径和名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2008-09-28T01:57:20.633

```
C:\Program Files\Microsoft Visual Studio 8\Common7\Tools\guidgen.exe
C:\Program Files\Microsoft Visual Studio 8\Common7\Tools\uuidgen.exe

```

第一个是 GUI 工具。第二个是一个方便的控制台线工具。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2008-09-28T01:57:50.103

我不知道为什么它不在您的工具菜单上，但您要查找的文件名为 guidgen.exe，它应该在工具文件夹中，即 \Microsoft Visual Studio 8\Common7\Tools\向导.exe。

您可以尝试的另一件事是重置您的 IDE 设置。选择“工具--> 导入和导出设置--> 重置所有设置”以恢复默认设置，并查看是否将 GUID 选项恢复到“工具”菜单。如果您自定义了很多设置，您实际上可能会先将它们导出，以便在找出 GUID 问题后可以回滚。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-28T02:45:35.447

实际上，我已经切换到使用 PowerShell 来完成许多过去通过衍生工具完成的任务......试试这个：

```
[guid]::NewGuid().ToString() 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-03-11T21:49:01.623

不久前，我在博客上写过一些可以生成新 GUID 的方便的 Visual Studio 宏。您可以将这些宏绑定到键盘并在源代码编辑器中动态生成 GUID。在这里阅读它们：

[http://www.wirwar.com/blog/2007/11/03/generating-guids-in-the-visual-studio-ide/](http://www.wirwar.com/blog/2007/11/03/generating-guids-in-the-visual-studio-ide/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-06-03T06:51:41.123

问题的因素是产品包装选择。该工具是 C++ 插件。所以当你有上面的vs pro时（不仅仅是c#...），安装c++部分。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2008-09-28T01:49:12.213

```
9a005ff3-5dee-4667-b5b9-7663fee2b0f9
db031ebf-7ffa-4604-a6b6-7d60a38c60ca
96f1854c-3654-46a7-8f57-20eb23f62375
f43a4642-db72-4ed5-a9e7-32fc2c53d1f1
6fa5c074-d68c-4871-b26f-1e0b51374865
17cf6675-fce6-42ce-8501-f19dadbe0c6d
65c681ad-701e-4bc6-a373-2351d9fc1910
3eab6e3d-4040-4beb-9c79-57a0bd7c84c9
3aae1801-c595-4f0b-a36c-56f41e5858dd
310f9053-319e-457c-aedf-ba9a1cd6a1cb 
```

这里有十个免费指南，但只需 19.95 美元，我可以将缺失的部分发送到我惊人的指南生成器：

```
 for (int i = 0; i < 10; i++)
    {
        Console.WriteLine([GET THE WHOLE SOURCE! ONLY $19.99!]);
    } 
```

# c# - 在 C# 中实现多线程（代码审查）

> ID：144980
> 
> 赞同：6
> 
> 时间：2008-09-28T01:57:52.007
> 
> 标签：c#, multithreading

问候。

我正在尝试在应用程序中实现一些多线程代码。此代码的目的是验证数据库提供给它的项目。验证可能需要相当长的时间（几百毫秒到几秒钟），所以这个过程需要为每个项目分叉到它自己的线程中。

数据库在开始时可能每秒提供 20 或 30 个项目，但开始迅速下降，最终在 24 小时内达到约 65K 项目，此时应用程序退出。

如果有更多知识渊博的人可以看看我的代码，看看是否有任何明显的问题，我会很高兴。与我一起工作的人都不知道多线程，所以我真的只是靠自己，在这个上。

这是代码。它有点长，但应该很清楚。如果您有任何反馈或建议，请告诉我。谢谢！

```
public class ItemValidationService
{
    /// <summary>
    /// The object to lock on in this class, for multithreading purposes.
    /// </summary>
    private static object locker = new object();

    /// <summary>Items that have been validated.</summary>
    private HashSet<int> validatedItems;

    /// <summary>Items that are currently being validated.</summary>
    private HashSet<int> validatingItems;

    /// <summary>Remove an item from the index if its links are bad.</summary>
    /// <param name="id">The ID of the item.</param>
    public void ValidateItem(int id)
    {
        lock (locker)
        {
            if
            (
                !this.validatedItems.Contains(id) &&
                !this.validatingItems.Contains(id)
            ){
                ThreadPool.QueueUserWorkItem(sender =>
                {
                    this.Validate(id);
                });
            }
        }

    } // method

    private void Validate(int itemId)
    {
        lock (locker)
        {
            this.validatingItems.Add(itemId);
        }

        // *********************************************
        // Time-consuming routine to validate an item...
        // *********************************************

        lock (locker)
        {
            this.validatingItems.Remove(itemId);
            this.validatedItems.Add(itemId);
        }

    } // method

} // class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2008-09-28T02:07:25.087

如果您有对时间不敏感的*轻量级*零星处理，线程池是一个方便的选择。但是，我记得在 MSDN 上读到它不适合这种性质的大规模处理。

我将它用于与此非常相似的事情并后悔。我在后续的应用程序中采用了工作线程方法，并且对我拥有的控制级别感到更加满意。

在工作线程模型中我最喜欢的模式是创建一个主线程来保存任务项队列。然后派出一堆从队列中弹出项目以进行处理的工作人员。我使用阻塞队列，这样当进程没有项目时，工作人员只会阻塞，直到有东西被推入队列。在此模型中，主线程从某个源（数据库等）生成工作项，而工作线程使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2008-09-28T03:05:02.140

我赞同使用阻塞队列和工作线程的想法。这是我过去使用的阻塞队列实现，效果很好： [https ://www.codeproject.com/Articles/8018/Bounded-Blocking-Queue-One-Lock](https://www.codeproject.com/Articles/8018/Bounded-Blocking-Queue-One-Lock)

您的验证逻辑涉及什么？如果它主要受 CPU 限制，那么我将在盒子上为每个处理器/内核创建不超过 1 个工作线程。这将告诉您处理器的数量： `Environment.ProcessorCount`

如果您的验证涉及 I/O，例如文件访问或数据库访问，那么您可以使用比处理器数量更多的线程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2008-09-28T20:45:20.720

ThreadPool 可能不是一次将如此多的内容塞入其中的最佳选择。您可能想研究其功能的上限和/或自己动手。

此外，如果您不希望重复验证，则代码中存在竞争条件。呼吁

```
this.validatingItems.Add(itemId); 
```

需要在主线程（ValidateItem）中发生，而不是在线程池线程（Validate 方法）中发生。此调用应在工作项排队到池之前发生一行。

通过不检查 QueueUserWorkItem 的返回发现了更严重的错误。排队可能会失败，为什么它不抛出异常对我们所有人来说都是一个谜。如果返回 false，则需要删除已添加到 validatingItems 列表中的项目，并处理错误（可能会抛出异常）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2008-09-28T02:32:26.633

小心，QueueUserWorkItem[可能会失败](http://weblogs.asp.net/omagnusson/archive/2007/01/02/threadpool-queueuserworkitem-traps.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2008-09-28T03:05:25.930

随问题发布的代码中可能存在逻辑错误，具体取决于项目 ID 的 `ValidateItem(int id)`来源。为什么？因为虽然您在排队工作项之前正确锁定了您的验证项和验证项队列，但在新线程启动之前您不会将该项添加到验证项队列中。这意味着可能存在另一个线程`ValidateItem(id)`使用相同 id 调用的时间间隔（除非它在单个主线程上运行）。

我会在将项目排队之前，在锁内将项目添加到验证项目队列中。

编辑：还`QueueUserWorkItem()`返回一个布尔值，因此您应该使用返回值来确保该项目已排队，然后将其添加到 validatingItems 队列中。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2008-09-29T01:50:55.023

您也可以尝试使用 CCR - Concurrency and Coordination Runtime。它隐藏在 Microsoft Robotics Studio 中，但为执行此类操作提供了出色的 API。

您只需要创建一个“端口”（本质上是一个队列），连接一个接收器（向其发布内容时调用的方法），然后向其发布工作项目。CCR 处理队列和运行它的工作线程。

[这是 Channel9 上关于 CCR 的视频。](http://channel9.msdn.com/shows/Going+Deep/CCR-Programming-Jeffrey-Richter-and-George-Chrysanthakopoulos/)

它具有非常高的性能，甚至被用于非机器人技术（Myspace.com 在幕后将其用于他们的内容交付网络）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2008-09-28T02:13:59.890

我会担心这里的表现。您指出数据库每秒可能会提供 20-30 个项目，而一个项目可能需要几秒钟才能被验证。那可能是相当多的线程——使用你的指标，最坏的情况是 60-90 个线程！我认为您需要重新考虑这里的设计。迈克尔提到了一个很好的模式。队列的使用确实有助于控制和组织事情。也可以使用信号量来控制创建的线程数——也就是说，您可以拥有允许的最大线程数，但在较小的负载下，如果完成工作的线程数较少，您不一定必须创建最大数量- - 即您自己的池大小可以是动态的，具有上限。

使用线程池时，我还发现在执行工作时监控池中线程的执行更加困难。所以，除非是一劳永逸，否则我赞成更受控制的执行。我知道您提到您的应用程序在 65K 项目全部完成后退出。您如何监视线程​​以确定它们是否已完成工作——即所有排队的工作人员都已完成。您是否正在监视 HashSets 中所有项目的状态？我认为通过将您的项目排队并让您自己的工作线程消耗该队列，您可以获得更多控制权。尽管如此，这可能会以在线程之间发出信号以指示所有项目何时已排队允许它们退出的更多开销为代价。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-09T20:03:43.720

我建议查看[MSDN：Task Parallel Library - DataFlow](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/dataflow-task-parallel-library)。您可以找到`Producer-Consumer`在您的案例中实现的示例是要验证的数据库`producing`项目，并且验证例程变为`consumer`.

还建议将`ConcurrentDictionary<TKey, TValue>`其用作“并发”哈希集，您只需在其中填充没有值的键:)。您可以潜在地使您的代码`lock-free`.

# emacs - 如何让 Emacs 开始时不那么大张旗鼓？

> ID：144983
> 
> 赞同：25
> 
> 时间：2008-09-28T02:02:31.573
> 
> 标签：emacs

每次我启动 Emacs 时，我都会看到一页帮助文本和一堆建议我尝试该教程的消息。我该如何阻止这种情况发生？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2008-09-28T02:04:11.723

Emacs 有几个变量可以抑制这些操作。如果您编辑您的 emacs 控制文件 (.emacs) 并插入以下内容：

```
;; inhibit-startup-echo-area-message MUST be set to a hardcoded 
;; string of your login name 
(setq inhibit-startup-echo-area-message "USERNAME")
(setq inhibit-startup-message t) 
```

那应该可以解决您的问题。他们基本上将禁止参数设置为 true 以防止您想要摆脱的行为。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2008-09-28T02:02:44.647

将以下内容放入您的`.emacs`:

```
(setq 禁止启动消息 t)
(setq 禁止启动-回显区域消息 t)

```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-02-15T20:48:29.897

您可以在 minibuffer 中自定义消息，从而消除大张旗鼓：

```
;; Hide advertisement from minibuffer
(defun display-startup-echo-area-message ()
  (message "")) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2008-10-16T14:46:48.597

将以下内容放入您的个人 init 文件中（通常`~/.emacs.el`）：

```
(setq inhibit-startup-message t) 
```

（或者`(setq inhibit-startup-screen t)`在旧的 Emacs 版本中。）

您还可以关闭消息“有关 GNU Emacs 和 GNU 系统的信息，请键入 Ch Ca”。在与变量的回声中`inhibit-startup-echo-area-message`，但将其设置为是不够的`t`；您必须将其设置为您的用户名。请参阅`inhibit-startup-echo-area-message`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-14T18:56:43.833

如果您的 init 文件是字节编译的，请改用以下形式：

```
(eval '(setq inhibit-startup-echo-area-message "YOUR-USER-NAME")) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-27T06:17:13.153

将以下内容添加到您的初始化文件中

```
(setq inhibit-startup-message t
inhibit-startup-echo-area-message t) 
```

# c - 在 Nintendo DS 上编程

> ID：144985
> 
> 赞同：28
> 
> 时间：2008-09-28T02:02:49.980
> 
> 标签：c, embedded, nintendo-ds, homebrew

我之前正在阅读[这个](https://stackoverflow.com/questions/144735/best-way-to-get-started-with-programming-other-things-than-your-computer#144843)答案，它让我有兴趣购买 Nintendo DS Lite 来学习对嵌入式设备进行编程。在我出去购买 DS 之前，我有几个问题：

1.  您可以编程的内容是否有任何限制？我之前指出的帖子似乎说没有，但澄清一下会很好。

2.  我最好买一个 arduino（或类似的）然后走那条路吗？我喜欢 DS，因为它已经内置了很多硬件。

3.  我正在考虑购买 CycloDS Evo 卡，有没有更好的自制软件选择？

4.  了解 DS 开发的最佳资源是什么？

感谢您的宝贵时间，如果您有 DS 和程序，我希望您能听到您的意见，或者如果您有更好的想法，我也想听听。

谢谢=]

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2008-10-01T18:03:25.030

1.  不，除了硬件之外确实没有太多限制，即使是这样也可以通过足够的努力来克服。例如，Quake 已被移植到 DS，并制作了使用这两种处理器的粒子游戏。还讨论了如何使用双通道渲染器制作更高质量的 3D 场景。[GBADev 论坛](http://forum.gbadev.org)的 Nintendo DS 部分有多种资源。

2.  我会说 DS 是嵌入式系统开发的绝佳途径。有一个庞大而活跃的社区愿意回答问题并提供支持，并且有很多硬件直接内置于其中。它可以节省您构建系统进行测试的时间。

3.  CycloDS Evolution 是一张很好的卡片并且相当普遍，因此如果有必要的话，让您的自制程序与其他卡片兼容应该不难。但是，请注意，其他流行的选择是 M3 线和 R4 线，它们几乎是一回事。我有一个 TTDS，它运行良好，但不是开箱即用的。我会推荐提到的其他三个。

4.  至于开始 DS 开发，我建议查看`examples`devkitPro 文件夹中的基本示例并阅读[GBA 教程 TONC](http://www.coranac.com/tonc/text/)，其中涵盖了 GBA 和 DS 开发中使用的许多概念。更面向 DS 的教程[Patater 的 Nintendo DS 编程简介](http://www.patater.com/manual)将帮助初学者在 DS 世界中走上正轨。还有一个[非常全面的 GBA 和 DS 文档规范，称为 GBATek](http://nocash.emubase.de/gbatek.htm)。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2008-09-28T03:51:55.600

大约 1 年前，我在 DS Lite 上做了一点编程。我遇到的主要硬件限制是使用 WiFi 硬件。我发现当时无法与自制程序库进行 DS-DS 通信。我不确定这是否已经改变。我还发现您无法与另一台设备建立 Ad-Hoc 连接。我必须以基础架构模式连接到 802.11b 网络，并且必须广播 SSID。

为了开发我使用

*   PALib（帮助库）：[http ://www.palib.info/wiki/doku.php?id=day1](http://www.palib.info/wiki/doku.php?id=day1)
*   DevKitPro（工具链）： http: [//www.devkitpro.org/](http://www.devkitpro.org/)
*   no$gba (DS 模拟器) - [http://nocash.emubase.de/gba.htm](http://nocash.emubase.de/gba.htm)
*   Supercard Lite（运行自制应用程序的硬件）- [http://www.realhotstuff.com/-c-32_81.html](http://www.realhotstuff.com/-c-32_81.html)

我不推荐 Supercard Lite，因为它需要使用 DS 的 GBA 和 DS 插槽。在当时，这是唯一的选择。现在有只有 DS 插槽的解决方案，例如 R4。我有一个朋友正在使用 R4，并取得了不错的成功，虽然我自己没有使用过。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2008-09-28T02:36:03.833

我没有在DS上做过任何编程，但是我在GBA（Game Boy Advanced）上做了一些开发。如果您想做的是学习如何对嵌入式设备进行编程，那对您来说可能是一个不错的选择（当然也更便宜）。您甚至可以在线获得一本免费书籍：[《为 Nintendo Gameboy Advanced 编程》](http://theharbourfamily.com/jonathan/?page_id=89)。我建议GBA，因为正如我所见，网上有更多的资源可以学习如何为它编程。一个缺点是它没有 wifi，这意味着您将无法像 DS 那样做很多很酷的事情，但这肯定是一个开始！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2008-09-28T02:29:56.857

不能说 1,2 或 3。但我用于 GBA 编程的资源也有 DS 信息：

[http://nocash.emubase.de/gbatek.htm](http://nocash.emubase.de/gbatek.htm)（这是一个深入的技术规范文档，但我喜欢它）

另外： http: [//www.devkitpro.org/](http://www.devkitpro.org/)用于编译器和东西。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2008-09-28T03:12:36.677

1.  限制是硬件限制 - 有 4Mb 的 RAM，3D 硬件可以处理每帧 X 多边形等等。除此之外，它只是一堆硬件，你可以用它做你想做的事。该工具链支持 C/C++ 和汇编程序 (ARM)。

2.  硬件的多样性也是我喜欢它的原因。掌握每一块拼图是让 DS 变得有趣的原因——每一块硬件都有自己的一套技巧，可以充分利用它。

3.  我自己没有，所以我想在[这里](http://forum.gbadev.org/viewforum.php?f=19)检查一下。不过看起来不错。
    **编辑：**我会选择的唯一缺点是您将在 PC 和 NDS 之间交换 SD 卡很多，而带有板载 USB 插座的推车会让您的周转速度稍快一些。

4.  最好的资源是 libnds 示例，然后是[gbadev 论坛](http://forum.gbadev.org/)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2008-09-28T08:07:06.533

前几天我刚拿到了 CycloDS Evolution，我很喜欢它！[DSOrganize](http://www.dragonminded.com/?loc=ndsdev/DSOrganize)就像一个迷你操作系统，它添加了一堆我希望 DS 附带的东西，就像一个真正的日历应用程序！

为了解决 Mike F 的 #3，实际上有一个[用于 DS 的 FTP 服务器](http://giesler.biz/bjoern/en/sw_dsftp.html)，您可以使用它以无线方式将文件传输到您的 DS。不过我自己没有尝试过，因为我的网络使用 WPA，而 DS 似乎只支持 WEP。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2010-08-04T04:00:28.940

老实说，我在大学学习嵌入式系统课程时发现了 Nintendo DS 和自制软件社区，我意识到我为课程编程的基于 ATmega32 的套件与 Nintendo DS 的硬件级开发之间的相似之处libnds，我被迷住了。

就个人而言，我来自强大的 C++ 背景，但是自从我第一次接触到 TI-83 Plus 计算器时，能够随身携带我编程的东西一直是我的目标......由于 Nintendo DS，我现在能够实现这个目标。

无论如何，我希望您在进入 DS 开发方面能像过去几个月一样享受我的乐趣，并祝您一切顺利。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-08-12T05:05:37.767

我都做过，GBA多于DS。我会先推荐 GBA，然后再升级到 DS，因为它会使复杂性加倍。ezflash V gba 大小 3 in 1 是一张好卡。我有一个用于 gba 的引导加载程序，我使用 NDS 写入卡和一个我下载的程序，我不记得手头的名称。一旦引导加载程序使用串行电缆并让我调试程序并将它们加载到 ram 中。该卡还允许您加载到卡上的 ram 并利用预取缓冲区和更大的程序从那里运行。对于 NDS，我尝试了很多卡。cyclods 适合日常使用，但对于开发来说不是那么多。我想我更喜欢 Acekard 2，或者 R4。想想你拉出卡并拉出sd卡并将其加载到计算机中的次数。非常痛苦，您想要一张带有 sd 卡插槽的卡，而无需拔出 slot0 卡。独轮车不是它。不过对于 NDS 来说是一张非常好的卡。我认为它不适用于 acekard 2 的 NDSi。对于nds和gba，您都可以使用visualboyadvance之类的模拟器来弄湿您的脚，它们并不完全准确，并且很常见的是，在模拟器上运行的程序无法在真实硬件上运行，而在真实硬件上运行的程序通常可以在模拟器上运行尽管。移除开发卡、重新编程和更换是非常痛苦的，引导加载程序、wifi 或任何其他可以避免的方式都是值得的。我认为它不适用于 acekard 2 的 NDSi。对于nds和gba，您都可以使用visualboyadvance之类的模拟器来弄湿您的脚，它们并不完全准确，并且很常见的是，在模拟器上运行的程序无法在真实硬件上运行，而在真实硬件上运行的程序通常可以在模拟器上运行尽管。移除开发卡、重新编程和更换是非常痛苦的，引导加载程序、wifi 或任何其他可以避免的方式都是值得的。我认为它不适用于 acekard 2 的 NDSi。对于nds和gba，您都可以使用visualboyadvance之类的模拟器来弄湿您的脚，它们并不完全准确，并且很常见的是，在模拟器上运行的程序无法在真实硬件上运行，而在真实硬件上运行的程序通常可以在模拟器上运行尽管。移除开发卡、重新编程和更换是非常痛苦的，引导加载程序、wifi 或任何其他可以避免的方式都是值得的。

Arduinos 很有趣，我推荐的是 lilypad 和 USB 转串口的东西，不需要焊接，你可以开始使用而不需要大笔投资。我更喜欢 armmite pro，类似 arduino 的足迹，但基于 arm（我唯一会购买的 lpc，不是 lpc 粉丝）。而且您不需要购买串行设备，只需一根普通的 USB 电缆和一个跳线（也许是一个回形针，直到您焊接在跳线上）。我刚刚又订购了两个，到目前为止，我的代码擦除了出厂闪存并允许我加载任何我想要的不起作用的东西，得去弄清楚。我仍然对 olimex sam7-h64 和 h256（头板 at91sam7s256）感到非常满意，因为 avr atmel 对开发人员非常友好，文档也很好。Sparkfun 是在美国找到上述所有内容的好地方。

以前的 luminary micro 现在 ti stellaris 有一些好板子。像 gba/nds 但与我提到的其他板不同，有显示器和其他外围设备可供使用，usb 是您编程所需的全部。仅限拇指模式。GBA 更喜欢拇指模式以提高性能，但可以采用任何一种方式。nds，我不记得了，从来没有了解总线的宽度和它们的时间。了解任天堂及其便宜的拇指可能会更好/更快。lm3s811 评估板太容易变砖了，1968 还不错。我不喜欢他们将开发人员从源代码​​中推到为 rtos 和特定编译器套件量身定制的预构建库中。

# c++ - 在 C++ 中调用函数有多少开销？

> ID：144993
> 
> 赞同：67
> 
> 时间：2008-09-28T02:07:28.940
> 
> 标签：c++, function, overhead

许多文献都谈到使用内联函数来“避免函数调用的开销”。但是我还没有看到可量化的数据。函数调用的实际开销是多少，即我们通过内联函数实现了什么样的性能提升？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2008-09-28T02:14:31.123

在大多数体系结构中，成本包括将所有（或一些，或没有）寄存器保存到堆栈，将函数参数推送到堆栈（或将它们放入寄存器），递增堆栈指针并跳转到开头新代码。然后当函数完成后，你必须从堆栈中恢复寄存器。 [该网页](http://www.angelcode.com/dev/callconv/callconv.html)描述了各种调用约定所涉及的内容。

大多数 C++ 编译器现在都足够聪明，可以为您内联函数。inline 关键字只是对编译器的提示。有些人甚至会在他们认为有帮助的翻译单元中进行内联。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-08-07T14:31:26.977

我对一个简单的增量函数做了一个简单的基准测试：

**公司：**

```
typedef unsigned long ulong;
ulong inc(ulong x){
    return x+1;
} 
```

**主程序**

```
#include <stdio.h>
#include <stdlib.h>

typedef unsigned long ulong;

#ifdef EXTERN 
ulong inc(ulong);
#else
static inline ulong inc(ulong x){
    return x+1;
}
#endif

int main(int argc, char** argv){
    if (argc < 1+1)
        return 1;
    ulong i, sum = 0, cnt;
    cnt = atoi(argv[1]);
    for(i=0;i<cnt;i++){
        sum+=inc(i);
    }
    printf("%lu\n", sum);
    return 0;
} 
```

*在我的Intel(R) Core(TM) i5 CPU M 430 @ 2.27GHz*上运行十亿次迭代给了我：

*   ****内联**版本为**1.4 秒****
***   ****定期链接**版本为**4.4 秒******

 ****（它似乎波动高达 0.2，但我懒得计算正确的标准偏差，也不关心它们）

这表明这台计算机上的函数调用开销约为**3 纳秒**

我测量的最快的东西大约是 0.3ns，所以这表明一个函数调用大约需要**9 个原始操作**，简单地说。

对于通过 PLT 调用的函数（共享库中的函数），每次调用的开销会增加大约**2ns**（总调用时间约为**6ns**）。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2008-09-28T02:53:14.180

有技术和实际的答案。实际的答案是它永远不会重要，而且在极少数情况下，你知道的唯一方法是通过实际的分析测试。

由于编译器优化，您的文献引用的技术答案通常不相关。但是，如果您仍然感兴趣，那么[Josh](https://stackoverflow.com/questions/144993/how-much-overhead-is-there-in-calling-a-function-in-c#144997)对此进行了很好的描述。

就“百分比”而言，您必须知道该功能本身的成本。在被调用函数的成本之外，没有百分比，因为您正在与零成本操作进行比较。对于内联代码没有成本，处理器只是移动到下一条指令。inling 的缺点是代码量较大，这表明它的成本与堆栈构建/拆卸成本不同。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-03-03T20:31:34.420

您的问题是问题之一，没有答案可以称为“绝对真理”。普通函数调用的开销取决于三个因素：

1.  中央处理器。x86、PPC 和 ARM CPU 的开销变化很大，即使您只使用一种架构，Intel Pentium 4、Intel Core 2 Duo 和 Intel Core i7 之间的开销也有很大差异。即使英特尔和 AMD CPU 以相同的时钟速度运行，开销甚至可能会显着不同，因为缓存大小、缓存算法、内存访问模式和调用操作码本身的实际硬件实现等因素可能会产生巨大的影响。对开销的影响。

2.  ABI（应用程序二进制接口）。即使使用相同的 CPU，也经常存在不同的 ABI，它们指定函数调用如何传递参数（通过寄存器、堆栈或两者的组合）以及堆栈帧初始化和清理的位置和方式。所有这些都会对开销产生影响。不同的操作系统可能对同一个 CPU 使用不同的 ABI；例如，Linux、Windows 和 Solaris 可能都对同一个 CPU 使用不同的 ABI。

3.  编译器。只有在独立代码单元之间调用函数时，严格遵循 ABI 才重要，例如，如果应用程序调用系统库的函数或用户库调用另一个用户库的函数。只要函数是“私有的”，在某个库或二进制文件之外不可见，编译器就可能“作弊”。它可能不严格遵循 ABI，而是使用导致更快函数调用的快捷方式。例如，它可以在寄存器中传递参数而不是使用堆栈，或者如果不是真的需要，它可以完全跳过堆栈帧设置和清理。

如果您想了解上述三个因素的特定组合的开销，例如对于使用 GCC 的 Linux 上的 Intel Core i5，您获取此信息的唯一方法是对两种实现之间的差异进行基准测试，一种使用函数调用，另一种使用您将代码直接复制到调用者中；这样你肯定会强制内联，因为内联语句只是一个提示，并不总是导致内联。

然而，这里真正的问题是：确切的开销真的很重要吗？有一件事是肯定的：函数调用总是有开销。它可能很小，可能很大，但它肯定存在。而且，如果一个函数在性能关键部分被足够频繁地调用，那么无论它多么小，开销都会在某种程度上很重要。内联很少会使您的代码变慢，除非您过度使用它；它会使代码更大。今天的编译器非常擅长决定何时内联和何时不内联，因此您几乎不必为此绞尽脑汁。

就我个人而言，我在开发过程中完全忽略了内联，直到我有一个或多或少可用的产品，我可以分析并且只有当分析告诉我，某个函数确实经常被调用并且在应用程序的性能关键部分内，然后我会考虑这个函数的“强制内联”。

到目前为止，我的回答非常通用，它适用于 C 就像它适用于 C++ 和 Objective-C 一样。作为结束语，让我特别谈谈 C++：虚拟方法是双重间接函数调用，这意味着它们比普通函数调用具有更高的函数调用开销，而且它们不能被内联。非虚拟方法可能被编译器内联或不内联，但即使它们没有内联，它们仍然比虚拟方法快得多，所以你不应该将方法设为虚拟，除非你真的打算覆盖它们或让它们被覆盖。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2008-09-28T02:30:21.693

开销的数量取决于编译器、CPU 等。百分比开销将取决于您内联的代码。知道的唯一方法是获取*您的代码*并以两种方式对其进行分析 - 这就是为什么没有明确的答案。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2008-09-28T02:10:05.423

对于非常小的函数，内联是有意义的，因为函数调用的（小）成本相对于函数体的（非常小的）成本是显着的。对于几行上的大多数功能来说，这并不是一个很大的胜利。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2008-10-30T17:44:59.627

It's worth pointing out that an inlined function increases the size of the calling function and anything that increases the size of a function may have a negative affect on caching. If you're right at a boundary, "just one more wafer thin mint" of inlined code might have a dramatically negative effect on performance.

* * *

If you're reading literature that's warning about "the cost of a function call," I'd suggest it may be older material that doesn't reflect modern processors. Unless you're in the embedded world, the era in which C is a "portable assembly language" has essentially passed. A large amount of the ingenuity of the chip designers in the past decade (say) has gone into all sorts of low-level complexities that can differ radically from the way things worked "back in the day."

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2008-09-28T02:43:14.547

有一个很棒的概念称为“寄存器阴影”，它允许通过寄存器（在 CPU 上）而不是堆栈（内存）传递（最多 6 个？）值。此外，根据其中使用的函数和变量，编译器可能只是决定不需要帧管理代码！

此外，即使是 C++ 编译器也可能会进行“尾递归优化”，即如果 A() 调用 B()，并且在调用 B() 之后，A 刚刚返回，编译器将重用堆栈帧！

当然，这一切都可以做到，只要程序坚持标准的语义（参见指针别名及其对优化的影响）

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-01-15T00:15:34.240

现代 CPU 非常快（显然！）。几乎所有涉及调用和参数传递的操作都是全速指令（间接调用可能稍微贵一些，主要是第一次通过循环）。

函数调用开销是如此之小，只有调用函数的循环才能使调用开销相关。

因此，当我们今天谈论（和衡量）函数调用开销时，我们通常实际上是在谈论无法将公共子表达式提升到循环之外的开销。如果一个函数每次被调用时都必须做一堆（相同的）工作，那么编译器将能够将它“提升”出循环并在它被内联时执行一次。当没有内联时，代码可能会继续重复工作，你告诉它！

内联函数似乎不可能更快不是因为调用和参数开销，而是因为可以从函数中提升的公共子表达式。

例子：

```
Foo::result_type MakeMeFaster()
{
  Foo t = 0;
  for (auto i = 0; i < 1000; ++i)
    t += CheckOverhead(SomethingUnpredictible());
  return t.result();
}

Foo CheckOverhead(int i)
{
  auto n = CalculatePi_1000_digits();
  return i * n;
} 
```

优化器可以看穿这种愚蠢并执行以下操作：

```
Foo::result_type MakeMeFaster()
{
  Foo t;
  auto _hidden_optimizer_tmp = CalculatePi_1000_digits();
  for (auto i = 0; i < 1000; ++i)
    t += SomethingUnpredictible() * _hidden_optimizer_tmp;
  return t.result();
} 
```

似乎调用开销不可能减少，因为它确实已经从循环中提升了一大块函数（CalculatePi_1000_digits 调用）。编译器需要能够证明CalculatePi_1000_digits 总是返回相同的结果，但是好的优化器可以做到这一点。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2008-09-28T02:39:45.383

这里有几个问题。

*   如果你有一个足够聪明的编译器，即使你没有指定内联，它也会为你做一些自动内联。另一方面，有很多东西不能内联。

*   如果函数是虚拟的，那么您当然要付出无法内联的代价，因为目标是在运行时确定的。相反，在 Java 中，您可能会付出这个代价，除非您指出该方法是最终的。

*   根据您的代码在内存中的组织方式，您可能会为缓存未命中甚至页面未命中付出代价，因为代码位于其他位置。这最终可能会对某些应用程序产生巨大影响。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-02-09T20:59:16.543

根本没有太多开销，尤其是对于小型（可内联）函数甚至类。

以下示例具有三个不同的测试，每个测试都运行很多次并计时。结果总是等于单位时间的千分之一。

```
#include <boost/timer/timer.hpp>
#include <iostream>
#include <cmath>

double sum;
double a = 42, b = 53;

//#define ITERATIONS 1000000 // 1 million - for testing
//#define ITERATIONS 10000000000 // 10 billion ~ 10s per run
//#define WORK_UNIT sum += a + b
/* output
8.609619s wall, 8.611255s user + 0.000000s system = 8.611255s CPU(100.0%)
8.604478s wall, 8.611255s user + 0.000000s system = 8.611255s CPU(100.1%)
8.610679s wall, 8.595655s user + 0.000000s system = 8.595655s CPU(99.8%)
9.5e+011 9.5e+011 9.5e+011
*/

#define ITERATIONS 100000000 // 100 million ~ 10s per run
#define WORK_UNIT sum += std::sqrt(a*a + b*b + sum) + std::sin(sum) + std::cos(sum)
/* output
8.485689s wall, 8.486454s user + 0.000000s system = 8.486454s CPU (100.0%)
8.494153s wall, 8.486454s user + 0.000000s system = 8.486454s CPU (99.9%)
8.467291s wall, 8.470854s user + 0.000000s system = 8.470854s CPU (100.0%)
2.50001e+015 2.50001e+015 2.50001e+015
*/

// ------------------------------
double simple()
{
   sum = 0;
   boost::timer::auto_cpu_timer t;
   for (unsigned long long i = 0; i < ITERATIONS; i++)
   {
      WORK_UNIT;
   }
   return sum;
}

// ------------------------------
void call6()
{
   WORK_UNIT;
}
void call5(){ call6(); }
void call4(){ call5(); }
void call3(){ call4(); }
void call2(){ call3(); }
void call1(){ call2(); }

double calls()
{
   sum = 0;
   boost::timer::auto_cpu_timer t;

   for (unsigned long long i = 0; i < ITERATIONS; i++)
   {
      call1();
   }
   return sum;
}

// ------------------------------
class Obj3{
public:
   void runIt(){
      WORK_UNIT;
   }
};

class Obj2{
public:
   Obj2(){it = new Obj3();}
   ~Obj2(){delete it;}
   void runIt(){it->runIt();}
   Obj3* it;
};

class Obj1{
public:
   void runIt(){it.runIt();}
   Obj2 it;
};

double objects()
{
   sum = 0;
   Obj1 obj;

   boost::timer::auto_cpu_timer t;
   for (unsigned long long i = 0; i < ITERATIONS; i++)
   {
      obj.runIt();
   }
   return sum;
}
// ------------------------------

int main(int argc, char** argv)
{
   double ssum = 0;
   double csum = 0;
   double osum = 0;

   ssum = simple();
   csum = calls();
   osum = objects();

   std::cout << ssum << " " << csum << " " << osum << std::endl;
} 
```

运行 10,000,000 次迭代（每种类型：简单、六个函数调用、三个对象调用）的输出是使用这个半复杂的工作负载：

```
sum += std::sqrt(a*a + b*b + sum) + std::sin(sum) + std::cos(sum) 
```

如下：

```
8.485689s wall, 8.486454s user + 0.000000s system = 8.486454s CPU (100.0%)
8.494153s wall, 8.486454s user + 0.000000s system = 8.486454s CPU (99.9%)
8.467291s wall, 8.470854s user + 0.000000s system = 8.470854s CPU (100.0%)
2.50001e+015 2.50001e+015 2.50001e+015 
```

使用一个简单的工作负载

```
sum += a + b 
```

给出相同的结果，但每种情况下的速度要快几个数量级。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-09-23T05:29:20.013

正如其他人所说，您真的不必过多担心开销，除非您要追求终极性能或类似的东西。当您创建一个函数时，编译器必须编写代码：

*   将函数参数保存到堆栈
*   将返回地址保存到堆栈中
*   跳转到函数的起始地址
*   为函数的局部变量分配空间（堆栈）
*   运行函数体
*   保存返回值（堆栈）
*   局部变量（即垃圾收集）的可用空间
*   跳转回保存的退货地址
*   释放保存参数等...

但是，您必须考虑降低代码的可读性，以及它将如何影响您的测试策略、维护计划和 src 文件的整体大小影响。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2008-09-28T02:14:51.293

每个新函数都需要创建一个新的本地堆栈。但是，只有当您在循环的每次迭代中调用一个函数并进行大量迭代时，这种开销才会很明显。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2008-09-28T02:14:56.240

对于大多数函数，在 C++ 和 C 中调用它们并没有额外的开销（除非您将“this”指针视为每个函数的不必要参数。您必须以某种方式将状态传递给函数）...

对于虚函数，它们是一个额外的间接级别（相当于通过 C 中的指针调用函数）......但实际上，在今天的硬件上，这是微不足道的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2008-09-28T02:38:24.170

我也没有任何数字，但我很高兴你问。我经常看到人们尝试从开销的模糊概念开始优化他们的代码，但并不真正了解。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-02-09T11:09:50.283

根据您构建代码的方式、划分为模块和库等单元的方式，在某些情况下它可能非常重要。

1.  使用带有外部链接的动态库函数大多数时候会强制执行完整的堆栈帧处理。
    这就是为什么当比较操作像整数比较一样简单时，使用 stdc 库中的 qsort 比使用 stl 代码慢一个数量级（10 倍）。
2.  在模块之间传递函数指针也会受到影响。
3.  同样的惩罚很可能会影响 C++ 的虚函数以及其他函数的使用，这些函数的代码是在单独的模块中定义的。

4.  好消息是整个程序优化可能会解决静态库和模块之间的依赖关系问题。***********