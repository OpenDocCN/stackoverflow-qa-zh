# StackOverflow 问答 10006000-10006999

# php - UTF8 不被 php 解析，服务器相关？与文件无关

> ID：10006002
> 
> 赞同：1
> 
> 时间：2012-04-04T06:32:45.787
> 
> 标签：php, wordpress, utf-8, host

这太奇怪了，这从来没有发生在我身上。我经常使用 utf-8，这是第一次发生， **自上周以来**，我所有在文件中包含 utf8 字符的网站现在都显示，`?`而不是实际字符！

这些文件没问题，如果我编辑它们，我可以看到很好的字符，但是在它被 php 处理后，它会用`?`.

存储在数据库中的 utf8 字符加载得很好，但问题在于 php 文件中的字符串。

注意我**从上周开始**说，这意味着它突然发生了，显然服务器上发生了一些变化。我联系了我的托管公司，但他们不知道要寻找什么，我也不知道该告诉他们寻找什么。

任何线索可以在服务器上进行更改？

所以得出结论：

*   这不是数据库问题
*   这不是文件编码问题（我希望不是，我有 30 多个站点，每个站点都有不同的 cms，**无法**全部编辑）
*   这不是 html 中的内容类型问题，因为它被 php 解析并将 utf8 字符转换为 `?`
*   它也可能是一个 wordpress 问题，但我确信这是在服务器端进行一些更改后发生的

[截图](http://i.stack.imgur.com/0slkJ.jpg) [1 截图2](http://i.stack.imgur.com/mJTZ0.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:56:54.903

*   这不是数据库问题 - 检查
*   这不是文件编码问题 - 这实际上可能是它
*   它不是内容类型 - 检查（但请确保您在元标记小写中编写 UTF-8 ！）
*   Wordpress 问题 - 也许与文件编码的组合

我可以想象情况，当您删除/禁用 PHP 的 mb_string 模块，然后使用 wordpress 编辑模板时。然后你的性格就崩溃了。

# javascript - 从 javascript 使用 REST Oauth 2.0 API 的安全方法

> ID：10006006
> 
> 赞同：5
> 
> 时间：2012-04-04T06:32:54.530
> 
> 标签：javascript, security, api, rest, oauth-2.0

我即将开始开发一个业务应用程序，我希望前端是一个单页 javascript 解决方案。后端作为 REST API 提供。如何以安全的方式从 Javascript 前端访问 REST API？

我已经开始在我的 REST API 中开发 Oauth 2.0，并且我已经知道“隐式授权流程”，这是 javascript 客户端的推荐流程。问题是这个流程应该只提供短暂的访问令牌（可能是 1 小时？）。

我系统的用户通常会在早上登录并在应用程序中工作一整天（8 小时）并在离职前注销，但如果访问令牌仅存在一个小时，他们将不得不每小时再次登录，这是不可接受的. 你如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T18:20:47.803

我们（Ping Identity）在我们的 OAuth AS 实现中支持访问令牌的滑动到期 - 没有任何 OAuth 2.0 规范表明您不能这样做。对于其他授权类型，您将需要一个刷新令牌以延长生命周期 - 但隐式不适用于它们。

不确定您是否需要 JavaScript OAuth 工具包，但[这里有一个](https://github.com/andreassolberg/jso)可能适合您的目的。

# objective-c - 如何使用自定义 UINavigationBar

> ID：10006011
> 
> 赞同：0
> 
> 时间：2012-04-04T06:33:28.720
> 
> 标签：objective-c, ios, ios5

我有`UINavigationBar`.

```
@interface MyNavigationBar : UINavigationBar 
```

进行了一些更改，现在希望我的应用程序`NavigationController`可以使用它：

```
 _navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController];
 [_window addSubview:[_navigationController view]];
[self.window makeKeyAndVisible]; 
```

我希望 _ **navigationController**有**MyNavigationBar**

怎么可能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:54:52.117

您必须创建一个带有 a 的 xib `UINavaigationController`。然后，您可以`navigationBar`在 Interface Builder 中选择 并将类更改为`UINavigationBar`.

![在此处输入图像描述](../Images/b94508d996e9445c257a05354ab3ecc8.png)

然后为了更容易实例化，我向 `UINavigationController 添加了一个类别，例如：

```
@interface UINavigationController (DSCNavigationController)

+ (UINavigationController *)dsc_navigationControllerWithRootViewController:(UIViewController *)rootViewController;

@end

@implementation UINavigationController (DSCNavigationController)

+ (UINavigationController *)dsc_navigationControllerWithRootViewController:(UIViewController *)rootViewController;
{
    NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"DSCNavigationController" owner:nil options:nil];

    NSAssert(1 == [topLevelObjects count], @"DSCNavigationController should have one top level object");

    UINavigationController *navigationController = [topLevelObjects objectAtIndex:0];

    NSAssert([navigationController isKindOfClass:[UINavigationController class]], @"Should have a UINavigationController");

    [navigationController pushViewController:rootViewController animated:NO];

    return navigationController;
}

@end 
```

在使用它的类的顶部，确保在我的情况下导入类别，它看起来像

```
#import "UINavigationController+DSCNavigationController" 
```

然后使用它看起来像

```
MyViewController *myViewController = [[MyViewController  alloc] init];
UINavigationController *navigationController = [UINavigationController dsc_navigationControllerWithRootViewController:myViewController]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:59:27.570

UINavigationController 具有只读属性

```
@property(nonatomic, readonly) UINavigationBar *navigationBar 
```

因为它是只读的，所以您必须继承 UINavigationBar 并覆盖此属性或使其为 read-write.Eg ：

```
MyNaviagtionBar *myBar = [[MyNavigationBar alloc] init];
_navigationController.navigationBar = mybar; 
```

或子类化：

我的导航控制器.h

```
@class MyNavigationBar;

@interface MyNavigationController : UINavigationController
@property(nonatomic, strong) MyNavigationBar *navigationBar;
@end 
```

我的导航控制器.m

```
@implementation MyNavigationController
@synthesize navigationBar = _navigationBar;
@end 
```

然后改变

```
_navigationController = [[UINavigationController alloc] initWithRootViewController:self.viewController]; 
```

至

```
_navigationController = [[MyNavigationController alloc] initWithRootViewController:self.viewController]; 
```

# .net - 如何摆脱 msbuild 警告 MSB3644

> ID：10006012
> 
> 赞同：7
> 
> 时间：2012-04-04T06:33:29.370
> 
> 标签：.net, .net-4.0, msbuild, msbuild-4.0

在未安装 SDK 的机器上构建 Web 项目时，您会收到以下警告：

> warning MSB3644: The reference assemblies for framework ".NETFramework,Version=v4.0" were not found. To resolve this, install the SDK or Targeting Pack for this framework version or retarget your application to a version of the framework for which you have the SDK or Targeting Pack installed. Note that assemblies will be resolved from the Global Assembly Cache (GAC) and will be used in place of reference assemblies. Therefore your assembly may not be correctly targeted for the framework you intend.

Obviously, one way to get rid of the warning is to install the SDK. However, in this case, I'm simply looking to suppress this warning (which is mostly harmless) from the build output without changing the state of the machine in any other way.

我尝试将 /p:NoWarn=3644 传递给 msbuild（基于其他帖子，例如[如何在命令行中抑制来自 msbuild 的所有编译器和代码分析警告？](https://stackoverflow.com/questions/4318790/how-can-i-suppress-all-compiler-and-code-analysis-warnings-from-msbuild-at-the-c)），但这没有任何效果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:39:24.007

`NoWarn``Csc`适用于and`Vbc`任务引发的编译警告。

MSB* 警告是核心 MSBuild 警告。要抑制 MSB3644 警告，请通过显式`TargetFrameworkMoniker`：

```
msbuild your.csproj /t:Rebuild /p:TargetFrameworkMoniker=".NETFramework,Version=v4.0" 
```

可以在[此处](http://msdn.microsoft.com/en-us/netframework/gg189183)找到可能的输入列表。

```
v1.1.4322
v2.0.50727
Client
v4.0
v4.0.30319
.NET Framework, Version=v4.0, Profile=Client
.NET Framework, Version=v4.0
.NET Framework, Version=v4.0.1, Profile=Client
.NET Framework, Version=v4.0.1
.NET Framework, Version=v4.0.2, Profile=Client
.NET Framework, Version=v4.0.2
.NET Framework, Version=v4.0.3, Profile=Client
.NET Framework, Version=v4.0.3
.NET Framework, Version=v4.5 
```

在 MSBuild 4.5 中有一个新标志 -[`IgnoreVersionForFrameworkReferences`](http://msdn.microsoft.com/en-us/library/microsoft.build.tasks.resolveassemblyreference.ignoreversionforframeworkreferences%28VS.110%29.aspx)可能会在这些警告中派上用场。

# jquery - 如何将此代码转换为咖啡脚本

> ID：10006014
> 
> 赞同：4
> 
> 时间：2012-04-04T06:33:37.907
> 
> 标签：jquery, coffeescript

我有以下代码：

```
function toggleChecked(status) {
  $(".checkbox").each( function() {
    $(this).attr("checked",status);
  })
} 
```

我不知道如何更改其中的 each 子句和匿名函数。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T06:35:05.827

```
toggleChecked = (status) ->
  $(".checkbox").each ->
    $(this).attr "checked", status 
```

请注意，您可以使用[Js2coffee](http://js2coffee.org/)将 JavaScript 转换为 CoffeeScript。

# java - 如何在 Java 中使用 twitter4j 发布推文？

> ID：10006016
> 
> 赞同：5
> 
> 时间：2012-04-04T06:34:02.240
> 
> 标签：java, twitter4j

我可以使用 twitter4j 登录 twitter 并获取有关已登录用户的信息，但我无法从我的应用程序中发布推文。我正在使用 Java Web 应用程序发布推文。请参阅下面我使用的代码。

```
String ACCESS_TOKEN = "ttttttttt";
    String ACCESS_TOKEN_SECRET = "gggggggggggggg";
    String CONSUMER_KEY = "gggggggggggg";
    String CONSUMER_SECRET = "hhhhhhhhhhhhh";
    String tweet = "";
    if (request.getParameter("tweet") != null) {
        tweet = request.getParameter("tweet");
    }
    AccessToken accessToken = new AccessToken(ACCESS_TOKEN, ACCESS_TOKEN_SECRET);
    OAuthAuthorization authorization = new OAuthAuthorization(ConfigurationContext.getInstance(), CONSUMER_KEY, CONSUMER_SECRET, accessToken);
    Twitter twitter = new TwitterFactory().getInstance(authorization);
    try {
        //twitter.updateStatus("Hello World!");
        twitter.updateStatus(tweet);
    } catch (TwitterException e) {
        System.err.println("Error occurred while updating the status!");
    } 
```

我得到以下异常：

TwitterException{exceptionCode=[fa54b184-3bf2623f], statusCode=401, retryAfter=0, rateLimitStatus=null, version=2.1.5-SNAPSHOT(build: d372a51b9b419cbd73d416474f4a855f3e889507)}

请帮忙。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T17:39:35.730

1.  转到您已经创建的应用程序 (https://dev.twitter.com)

2.  检查您的应用程序设置（> 应用程序类型）

3.  “应用程序类型”需要是读取、写入和访问直接消息之一。如果没有，您可以轻松进行更新。

（我在处理环境中测试了您的代码并且它正在工作）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T07:20:09.533

首先，重新生成您的访问令牌/秘密和消费者密钥/秘密。然后试试这个。

```
String consumerKey = "yourconsumerKey ";
       String consumerSecret = "yourconsumerSecret";
       String accessToken = "yourAccessToken";
       String accessSecret = "yourAccessSecret";

       ConfigurationBuilder cb = new ConfigurationBuilder();
       cb.setDebugEnabled(true)
           .setOAuthConsumerKey(consumerKey)
           .setOAuthConsumerSecret(consumerSecret)
           .setOAuthAccessToken(accessToken)
           .setOAuthAccessTokenSecret(accessSecret);

       try 
       {
          TwitterFactory factory = new TwitterFactory(cb.build());
          Twitter twitter = factory.getInstance();

          System.out.println(twitter.getScreenName());
          Status status = twitter.updateStatus(latestStatus);
          System.out.println("Successfully updated the status to [" + status.getText() + "].");
           }catch (TwitterException te) {
              te.printStackTrace();
              System.exit(-1);
           } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:04:37.400

状态码 401 表示您 [未获得授权](https://dev.twitter.com/docs/error-codes-responses)

检查您的凭据是否有效。如果是，则可能您的应用程序尚未经过用户验证。请参阅[twitter4j 网站](http://twitter4j.org/en/code-examples.html#oauth)上的示例（第 7 点）

# python - python日志记录如何获取它的配置

> ID：10006017
> 
> 赞同：2
> 
> 时间：2012-04-04T06:34:02.447
> 
> 标签：python, logging

我曾经使用**Python 日志记录**，它工作正常。设置在`logging.basicConfig(...)`一个模块（一个`some.py`文件）中，然后我们可以`logging`在任何地方使用。显然，**日志记录**是全球性的。

问题是，当我们不调用 basicConfig(...) 出现的位置（在 some.py 文件中）时，日志记录如何`module`找到*它*的*设置*？日志记录是否扫描所有包？

即使`logging.basicConfig(...)`放入一个`any.py`和模块（`any.py`）永远不会被导入，或者没有在任何地方使用，日志设置**生效**！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T07:46:52.740

要了解日志记录，您需要深入了解 Python 的标准库源代码。

这是诀窍：

```
#/usr/lib/python3.2/logging/__init__.py
...
root = RootLogger(WARNING)
Logger.root = root
Logger.manager = Manager(Logger.root)
...

# and 
def basicConfig(**kwargs):
    ...
        hdlr = StreamHandler(stream)
        fs = kwargs.get("format", BASIC_FORMAT)
        dfs = kwargs.get("datefmt", None)
        style = kwargs.get("style", '%')
        fmt = Formatter(fs, dfs, style)
        hdlr.setFormatter(fmt)
        root.addHandler(hdlr) 
```

因此，当您`basicconfig()`使用某些参数调用时，`root`会设置记录器。最后`getLogger`：

```
def getLogger(name=None):
    """
    Return a logger with the specified name, creating it if necessary.

    If no name is specified, return the root logger.
    """
    if name:
        return Logger.manager.getLogger(name)
    else:
        return root 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T05:25:47.450

我认为这里没有魔法扫描。

*   `test`尝试在单独的目录中以这种方式对其进行测试：

    ```
     test/main.py:
        import logging
        logging.info('test')

    test/any.py:
        import logging
        logging.basicConfig(filename='test.log', level=logging.INFO)

    python main.py 
    ```

    **结果：**没有`test.log`文件。

*   现在让我们更新测试：

    ```
     test/main.py:
        import logging
        import any
        logging.info('test')

    python main.py 
    ```

    **结果：**里面有字符串的新`test.log`文件。`INFO:root:test`

*   所以我猜`any.py`你的情况是以某种方式进口的，尽管你有期望。

    您可能会发现该方式`any.py`很容易导入，只需在此处添加几行：

    ```
     test/any.py:
        from traceback import print_stack
        print_stack()
        ...

    python main.py 
    ```

    **结果：**

    ```
     File "main.py", line 2, in 
        import any
    File "any.py", line 2, in 
        print_stack() 
    ```

    此堆栈显示`any.py`从`main.py`.

    我希望你能在你的情况下找到它是从哪里进口的。

# tridion - Tridion 2009 SP1 TcmUploadAssembly 无法覆盖现有的 TBB

> ID：10006019
> 
> 赞同：4
> 
> 时间：2012-04-04T06:34:07.170
> 
> 标签：tridion, tridion2009

我在构建后事件中使用 TcmUploadAssembly 实用程序，但从该工具收到以下错误。

> 错误 1 ​​名称对于以下类型的项目必须是唯一的：此文件夹中的模板构建块及其蓝图上下文。冲突的来源或来源：tcm:5-200-2048。C:\Projects\Project1\src\Tridion\TBBs\EXEC 复合模板

给定的 TcmId 指的是存储在 Tridion 中的程序集，我期望这是因为那是我要覆盖的。在过去，这“刚刚奏效”。我错过了什么吗？

笔记：

1.  我的用户是管理员
2.  Tridion 实例在我的网络上，所以我在上下文中使用凭据。
3.  我已经通过命令行指定了所有设置（没有使用 config.xml）

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T06:46:25.123

我会说检查您的蓝图上下文（即您所在的出版物）。**此错误表示您正在尝试创建 TBB，但可能在 Blueprint 子 Publications 中的某处**已存在同名项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T06:45:32.243

经典写出问题，问题自行解决……

我发现该文件夹也在 AssemblyInfo 中设置，并且我在命令行上错误地设置了该文件夹（蓝图问题）。

但是，我遇到了第二个问题，如果我`uploadpdb:true`在命令行上设置，我会收到此错误

```
Error   1   Could not write file: c:\Temp 
```

设置`uploadpdb:false`解决了这个问题。

# plugins - 根据 slickgrid 中的复选框选择删除行

> ID：10006031
> 
> 赞同：0
> 
> 时间：2012-04-04T06:34:59.897
> 
> 标签：plugins, checkbox, slickgrid

我正在帮助这个例子：[http](http://mleibman.github.com/SlickGrid/examples/example-checkbox-row-select.html) : //mleibman.github.com/SlickGrid/examples/example-checkbox-row-select.html 并在我的网格中添加一个复选框列并将我的记录的 unique_id 值分配给 id复选框列我使用它来检查列号，`grid.getSelectedRows();` 它给了我行的索引号。如何在 slickgrid 中获取此选定行的 id？如果有人有任何想法，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T12:10:12.340

```
var selectedrows = grid.getSelectedRows();            
for(i=0;i<len;i++){                        
var d = grid.getData().getItem(selectedrows[i]);                         
                        if(d != null && d != 'undefined'){
                              dataView.deleteItem(d.id);
                               grid.invalidate();                                   
                               grid.updateRowCount();
                               grid.render();
                        }
                    } 
```

它从网格中删除行。不是从服务器端。

# jdbc - PostgreSql9.1 中的可更新结果集

> ID：10006038
> 
> 赞同：0
> 
> 时间：2012-04-04T06:35:35.160
> 
> 标签：jdbc, postgresql-9.1

我正在研究 Postgresql9.1 DB 和 JDBC，并且想要更新列值，但是为此 DB 软件必须支持可更新的结果集，9.1 版本是否支持可更新的结果集？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T01:01:36.187

是的，它确实。请参阅 ResultSet.CONCUR_UPDATABLE 作为 Statements 工厂方法的参数。

# c# - 隐式注册事件处理程序有什么好处

> ID：10006041
> 
> 赞同：1
> 
> 时间：2012-04-04T06:35:40.227
> 
> 标签：c#

注册活动有什么好处：

```
void MyMethod()
{
    button1.Click += delegate (object sender, EventArgs e)
    {
        ..
    }
} 
```

和。。比较：

```
void MyMethod()
{
    button1.Click += new System.EventHandler(this.button1_Click);
}

void button1_Click(object sender, EventArgs e)
{
    ..
} 
```

* * *

**更新：** 那退订呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:42:15.080

好处是您不必在课堂上想出名字和位置。

对于与注册事件的代码紧密耦合的轻量级函数，短版本更方便。

请注意，您也可以`delegate`兑换`=>`

```
button1.Click += (object sender, EventArgs e) =>   
{
    ..
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T06:42:27.720

你可以更简洁：

```
button1.Click += ( sender, e ) =>
{
}; 
```

从语法上讲，它更干净（只要它不会导致长代码块更好地分解为命名方法）。

内联声明是一个闭包，它使您可以访问与匿名方法相邻的变量。

来自：[.NET 中的“闭包”是什么？](https://stackoverflow.com/questions/428617/what-are-closures-in-net)

> 本质上，闭包是一个可以在以后执行的代码块，但它维护了它最初创建的环境——即它仍然可以使用创建它的方法的局部变量等，即使在那之后方法已完成执行。

另见：[http ://cshapindepth.com/articles/chapter5/closures.aspx](http://csharpindepth.com/articles/chapter5/closures.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T06:45:17.573

使用匿名委托或 lambda 注册事件处理程序时，您可以编写更短的代码并使用闭包。**但是**您不能取消订阅该事件，并且如果事件处理程序代码太长，您的代码就会变得丑陋。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T06:42:13.410

这只是关于编码风格。

值得一提的是，在第一种情况下声明它可以让您避免“意大利面条代码”并以更自然（人类可读的方式）注入处理程序函数局部变量（如果需要）。

要更清楚。通过像第一种情况一样编写，您可以：

```
int x = 0; 

System.Windows.Forms.Button button = new System.Windows.Forms.Button(); 
button.Click += (o,e)=> {   
++x; 
}; 
```

在事件处理程序内部，您可以访问在处理程序方法范围内实际声明的局部变量。对于大多数人来说，这似乎是“自然的”，但如果你像开发人员一样思考，这甚至是不可能的。

祝你好运。

# sql-server - SQL Server 传递表 Netezza

> ID：10006042
> 
> 赞同：0
> 
> 时间：2012-04-04T06:35:44.347
> 
> 标签：sql-server, netezza, linked-server

只是想知道实现的最佳实践是什么：

我们有在 SQL Server 中运行的存储过程，需要对存储在 Netezza 上的巨大事实表进行一些计算。

流量：

1.  存储过程将在 SQL Server 上创建临时表
2.  这些将被发送到 Netezza 以加入事实表
3.  将在 Netezza 中进行计算
4.  结果将传回 SQL Server

**将临时表从 SQL Server 传递到 Netezza 的方法有哪些？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-11T13:45:55.007

我所知道的将数据输入和输出 Netezza 的唯一方法是通过平面文件，或者使用 ODBC 驱动程序直接与 Netezza 一起工作并在内存中保存一个记录集并通过 odbc 连接写入 Netezza。

无论您使用的是 Windows 还是 Unix，Netezza 都附带了可用于连接到 Netezza 的客户端工具。仅供参考，不要费心在互联网上寻找它们。您必须直接从 Netezza 或从管理该关系的人那里获得它们。

我建议研究如何使用 SSIS 中的 ODBC 驱动器为您完成工作。我不是 SSIS 的专业人士，所以我不能说我知道该怎么做，但我会先研究一下。

如果我必须完成任务，我会用 C# 编写一些东西来执行以下任务。

*   从 sql server 创建平面文件
*   连接到 Netezza 创建链接到平面文件的外部表。
*   调用 Netezza 中的过程来完成这项工作并生成数据以在临时表中导出。
*   将新数据导出到平面文件并将其导入回 sql server。

现在我考虑一下，您也可以尝试以下方法，但是它未经测试。我想知道您是否可以在 sql server 中创建一个链接表，并在 Netezza 中创建一个使用相同平面文件的外部表。保留文件锁，如果可以的话，您可以从 sql server 创建到 netezza 的准链接。

要了解有关 netezza 中的外部表的更多信息。查看第 5 章中的文档 Netezza 用户指南。

[Netezza 用户指南](http://www.enzeecommunity.com/servlet/JiveServlet/previewBody/1161-102-1-1107/Netezza_database_users_guide.pdf)

此外，如果您对编码方面感兴趣，下面有一个非常好的链接，可以说明如何通过 c# 连接到 netezza。

[堆栈帖子](https://stackoverflow.com/questions/11478252/reading-netezza-database-table-from-c-sharp-via-odbc-not-working-in-windows-7)

我最终使用该帖子中的一些内容构建了以下方法来针对 Netezza 执行命令。

```
OdbcDataReader GetReaderForCommand(string strCmd, string dbname)
{

    var conn = new OdbcConnection();
    conn.ConnectionString = "Driver={NetezzaSQL};servername=<servername>;port=5480;database="+dbname+"; username=<username>;password=<pwd>;";

    OdbcDataReader rdr = null;

        conn.Open();
        System.Data.Odbc.OdbcCommand cmd = new System.Data.Odbc.OdbcCommand(strCmd, conn);
        rdr = cmd.ExecuteReader();
        return rdr;

} 
```

最后，这里有几个我会跟进的链接。

enzeecommunity.com - 搜索和提问的用户群。

与 Netezza 一起使用的免费管理工作室。

[http://www.aginity.com/ProductivityTools/WorkbenchOverview.aspx](http://www.aginity.com/ProductivityTools/WorkbenchOverview.aspx) -

# iphone - 如何以编程方式恢复保管箱中的文件

> ID：10006043
> 
> 赞同：1
> 
> 时间：2012-04-04T06:35:47.937
> 
> 标签：iphone, ios5, versioning, restore, dropbox-api

我是 IOS Dropbox 开发的新手，我还在学习如何在我的应用程序中实现 Dropbox，该应用程序是一个文本编辑器，我想让它支持在 Dropbox 中上传和下载文件。在我的应用程序中，我只能对文本进行一些更改，然后将其上传到 Dropbox，但我无法将其恢复到最新版本。我已阅读 Dropbox Rest API 并阅读了`https://api.dropbox.com/1/restore/<root>/<path>`

但我不知道该怎么办，有人可以帮助我吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:26:37.323

试试这个

/* 恢复路径中的文件，因为它存在于给定 rev 中，并在恢复后返回恢复文件的元数据 */

```
- (void)restoreFile:(NSString *)path toRev:(NSString *)rev; 
```

其中 path 是必须恢复的 DropBox 文件的路径，rev 是必须恢复到的版本

它的委托方法是

```
- (void)restClient:(DBRestClient*)client restoredFile:(DBMetadata *)fileMetadata;
- (void)restClient:(DBRestClient*)client restoreFileFailedWithError:(NSError *)error; 
```

您可以使用这些来获取特定文件的修订列表

/* 加载一个包含最多 10 个 DBMetadata 对象的列表，这些对象代表路径中文件的过去修订 */

```
- (void)loadRevisionsForFile:(NSString *)path; 
```

/* 与上面相同，但对返回的 DBMetadata 对象的数量有可配置的限制，最多 1000 */

```
- (void)loadRevisionsForFile:(NSString *)path limit:(NSInteger)limit; 
```

他们的委托方法是

```
- (void)restClient:(DBRestClient*)client loadedRevisions:(NSArray *)revisions forFile:(NSString *)path;
- (void)restClient:(DBRestClient*)client loadRevisionsFailedWithError:(NSError *)error; 
```

例子

```
 NSString *filePath = @"/Contacts";
    NSString *revisionStr = @"a1067dc176";   // sample revisionString

    [[self restClient] loadRevisionsForFile:filePath limit:10];

    [[self restClient] restoreFile:filePath toRev:revisionStr]; 
```

// 委托方法

```
- (void)restClient:(DBRestClient*)client loadedRevisions:(NSArray *)revisions forFile:(NSString *)path{

    for (DBMetadata *file in revisions) 
    {
        NSLog(@"MetaData's Revisions \t%@", file.rev);
    }
}
- (void)restClient:(DBRestClient*)client loadRevisionsFailedWithError:(NSError *)error{

}

- (void)restClient:(DBRestClient*)client restoredFile:(DBMetadata *)fileMetadata{
    NSLog(@"Restored FileMetaData Path : %@",fileMetadata.path);
        NSLog(@"Restored FileMetaData rev : %@",fileMetadata.rev);
}
- (void)restClient:(DBRestClient*)client restoreFileFailedWithError:(NSError *)error{
     NSLog(@"There was an error restoring the file - %@", error);
} 
```

# facebook - 对于 Facebook 上的朋友，他们是否应该自动成为基于 Facebook 的应用程序上的朋友？

> ID：10006047
> 
> 赞同：1
> 
> 时间：2012-04-04T06:36:22.073
> 
> 标签：facebook, social-networking, facebook-opengraph, facebook-apps

对于允许用户使用 Facebook 登录并支持可以涉及朋友的场景的应用程序，应用程序是否应该在应用程序的上下文中自动设置连接？这样对于在 Facebook 上是朋友的用户 A 和 B，并且都使用他们的 Facebook 帐户登录应用程序，应用程序将自动将他们视为应用程序社交图谱中的朋友。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:42:36.313

这取决于您的应用程序性质。

例如`Foursquare`，如果您的一位朋友开始通过 facebook 使用 Foursquare，他们会向您发送通知，说明

> 哦！看起来您的 Facebook Friend XXX 在 Foursquare。加为好友？

和另一个应用程序`DrawMyThing`，自动将您与您的朋友联系起来，并自动让您的朋友参与您的活动。

所以重要的是你的应用程序的性质。

# javascript - 带有 Call() 参数的 JavaScript 匿名函数

> ID：10006049
> 
> 赞同：2
> 
> 时间：2012-04-04T06:36:25.373
> 
> 标签：javascript, closures, anonymous-function

我正在尝试执行以下操作：

```
function main(callback) {
   $.ajax('server-side', function() {
       this.callback.call("hello");
   }.bind({ callback: callback });
}

main(function(response) {
   alert(response);
}); 
```

回应是`undefined`，我希望它是`"hello"`。任何想法为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:43:37.460

`call`第一个参数应该是对“this”的引用。作为“this”你想要执行你的函数的上下文。 [调用函数 Mozilla MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:45:08.027

你写了 ：

```
function main(callback) {
   $.ajax('server-side', function() {
       this.callback.call("hello");
   }.bind({ callback: callback });
}

main(function(response) {
   print response;
}); 
```

javascript中不存在打印。

然后你写了 this.callback.call ，这是错误的

你应该写

```
callback.call(this,"hello") , 
```

只需检查调用函数签名。

# vb.net - 逐行读取字符串时，如何知道每行的实际开始

> ID：10006055
> 
> 赞同：0
> 
> 时间：2012-04-04T06:36:50.013
> 
> 标签：vb.net, file, offset, readline

所以我们可以再读一遍。

说我做了：

```
 Dim offset = sr.BaseStream.Position
 Dim l As String = sr.ReadLine()
 Dim nextOffset = sr.BaseStream.Position 
```

现在即使 l 的长度只有 62，nextOffset 也会自动变为 1024。我知道流一次读取字符 1k。所以我想缓冲区中有一个 1k 的东西。我想我需要在该缓冲区中找到偏移量。我怎么知道？

另外，知道偏移量，我们可以从后者的偏移量开始读取吗？

基本上，在未来，我想做：

```
sr2.BaseStream.Position = offset1
Dim l2 = sr2.ReadLine 
```

# wpf - 是否可以使用 SVN diff 来确定哪些手动 QA 测试用例受到影响？

> ID：10006061
> 
> 赞同：1
> 
> 时间：2012-04-04T06:37:10.140
> 
> 标签：wpf, svn, user-interface, testing, qa

我们正在开发一个 WPF GUI。我们使用 TDD，但并非所有内容都可以覆盖，因此手动测试起着重要作用。

我们有一套大约 400 个手动测试用例。在发布之前，我们的测试人员会运行完整的 repression。如果发现某些东西并且开发人员对其进行了修复，则测试人员必须重复他的工作。现在有了敏捷，情况就更糟了，因为我们的发布周期非常短。

所以我认为这可以做得更好。为了减少回归，我希望能够检测到哪些测试场景被特定的代码更改所触及。

GUI 是一组屏幕。测试人员与他们一起工作。所以我们可以将测试用例链接到屏幕上。

每个屏幕都有一个对象模型。可以建立特定屏幕的依赖关系图。这些依赖项是类和接口，它们实际上存在于文件（源代码或二进制文件）中。使用该图和 SVN 差异应该可以检测到哪些屏幕受到影响。从屏幕我们到测试用例。

有没有人使用过这种方法？有什么工具吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:47:57.703

从理论上讲，在您的情况下可能是可能的，但这在很大程度上取决于细节。可能存在运行时依赖项或隐藏依赖项，这些依赖项未反映在[NDepend](http://www.ndepend.com/)等工具可检测到的编译时依赖项中。例如，特定的代码更改可能允许使用 Form1 将以前无法输入的数据输入到您的数据库中，并且使用此数据的另一个 Form2 将受到影响，尽管 Form2 没有更改（也许它应该已经更改，问题是一个忘记了这个）。

# php - 如果内容是私有的，如何防止伪造http请求？（基本上只允许来自我的界面的请求，而不是浏览器）

> ID：10006064
> 
> 赞同：0
> 
> 时间：2012-04-04T06:37:24.800
> 
> 标签：php, csrf-protection

很抱歉再次问这个问题，但 ppl 似乎只将 csrf 与表单提交或表单复制连接起来（idk 为什么）。

我的想法是保护数据免受外部请求。为每个请求设置一个令牌，并在用户登录后开始令牌化，因此任何攻击者都不能只加载前一个页面，获取令牌并将其发送给下一个请求。从一开始就标记每个请求是否是一个好主意，这样私人用户的内容就不会被盗？我认为这是对不受保护的社交网站的强大攻击。任何攻击者从另一个流行网站窃取用户数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:55:57.710

如果我理解正确，那么（服务器端）添加 cache-control: private 标头不是适当的事情吗？这应该导致任何缓存和/或代理不为其他方缓存内容。将它与 https 结合使用，您应该没问题。

[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)

# android - Android：尽管在前一个活动上调用了完成（），但仍获得意图

> ID：10006069
> 
> 赞同：0
> 
> 时间：2012-04-04T06:38:08.047
> 
> 标签：android, android-activity, android-intent

我的用例如下：

在活动 AI 调用中：

```
startActivity(B);
finish(); 
```

现在在 Activity BI 的 onCreate 中需要知道启动 B 的活动，所以我想知道是否在 Activity BI 调用的 onCreate(...) 中：

```
getIntent(); 
```

我什至能够获得启动 Activity B 的 Intent 还是 getIntent() 在那时已经返回 null 因为我在调用 startActivity(B) 后立即完成了 Activity A ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T06:46:41.010

这里

```
Intent intent = new Intent(A.this, B.class); 
intent.putExtra("activityStarted", "A"); 
```

在活动 B

```
String started = getIntent().getExtras().getString("activityStarted"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:23:25.490

在第一个活动中，使用以下代码开始新活动并重新启动方法（）以完成活动：

```
Intent intent = new Intent(ThisActivity.this, NextActivity.class); 
intent.putExtra("Key", "Value");
startActivity(intent);

@Override
    protected void onRestart() {
        // TODO Auto-generated method stub
        super.onRestart();
        finish();
    } 
```

在第二个活动中::

```
String started = getIntent().getStringExtras("Key"); 
```

# android - 服务器中没有客户端证书的 SSLPeerUnverifiedException

> ID：10006070
> 
> 赞同：0
> 
> 时间：2012-04-04T06:38:21.543
> 
> 标签：android, ssl

我正在尝试使用相同的 keystore 连接客户端和服务器。客户端套接字可以获得对等证书，而服务器套接字无法获得对等证书但端口。获取证书失败，报SSLPeerUnverifiedException异常。修改后的问题困扰了我好几天，请帮忙解决，谢谢

我的安卓代码如下：

客户：

```
 java.security.Security.addProvider(
        new org.bouncycastle.jce.provider.BouncyCastleProvider());

SSLContext sslcontext = SSLContext.getInstance("TLS");
           sslcontext.init(getKeyManagers(), {new DummyTrustManager()}, null);
SocketFactory socketFactory = sslcontext.getSocketFactory();

SSLSocket socket = (SSLSocket) socketFactory.createSocket("127.0.0.1", 8080); 
socket.getSession().getLocalCertificates();
socket.getSession().getPeerHost();
socket.getSession().getPeerPort();
socket.getSession().getPeerCertificates();` 
```

服务器：

```
 SSLContext sslcontext = SSLContext.getInstance("TLS");
    sslcontext.init(getKeyManagers(), {new DummyTrustManager()}, null);
ServerSocketFactory   mFactory = sslcontext.getServerSocketFactory();
ServerSocket serverSocket =mFactory.createServerSocket(8080);
SSLSocket clientSocket = serverSocket.accept();
socket.getSession().getLocalCertificates();
socket.getSession().getPeerHost();
socket.getSession().getPeerPort();
socket.getSession().getPeerCertificates();` 
```

信任管理器：</p>

```
import java.security.cert.X509Certificate;
import javax.net.ssl.X509TrustManager;
public class DummyTrustManager implements X509TrustManager {
  public void checkClientTrusted(X509Certificate[] chain, String authType) {
    // Does not throw CertificateException: all chains trusted
    return;
  }
  public void checkServerTrusted(X509Certificate[] chain, String authType) {
    // Does not throw CertificateException: all chains trusted
    return;
  }
  public X509Certificate[] getAcceptedIssuers() {
    return new X509Certificate[0];
  }
} 
```

密钥库：</p>

```
public void initializeKeyStore(String id) {
try {
  Log.v(LOG_TAG, "Generating key pair ...");
  KeyPairGenerator kg = KeyPairGenerator.getInstance("RSA");
  KeyPair keyPair = kg.generateKeyPair();

  Log.v(LOG_TAG, "Generating certificate ...");
  String name = getCertificateName(id);
  X509Certificate cert = SslUtil.generateX509V3Certificate(keyPair, name);
  Certificate[] chain = {cert};

  Log.v(LOG_TAG, "Adding key to keystore  ...");
  mKeyStore.setKeyEntry(
      LOCAL_IDENTITY_ALIAS, keyPair.getPrivate(), null, chain);

  Log.d(LOG_TAG, "Key added!");
} catch (GeneralSecurityException e) {
  throw new IllegalStateException("Unable to create identity KeyStore", e);
}
store(mKeyStore);}

public synchronized KeyManager[] getKeyManagers()
  throws GeneralSecurityException {
if (mKeyStore == null) {
  throw new NullPointerException("null mKeyStore");
}
KeyManagerFactory factory =
    KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
factory.init(mKeyStore, "".toCharArray());
return factory.getKeyManagers(); 
```

}

证书：</p>

```
public static X509Certificate generateX509V3Certificate(KeyPair pair,
  String name) throws GeneralSecurityException {
Calendar calendar = Calendar.getInstance();
calendar.set(2009, 0, 1);
Date notBefore  = new Date(calendar.getTimeInMillis());
calendar.set(2099, 0, 1);
Date notAfter = new Date(calendar.getTimeInMillis());

BigInteger serialNumber = BigInteger.valueOf(Math.abs(
    System.currentTimeMillis()));

return generateX509V3Certificate(pair, name, notBefore, notAfter,
    serialNumber); 
```

}

```
public static X509Certificate generateX509V3Certificate(KeyPair pair,
  String name, Date notBefore, Date notAfter, BigInteger serialNumber)
    throws GeneralSecurityException {
java.security.Security.addProvider(
    new org.bouncycastle.jce.provider.BouncyCastleProvider());
X509V3CertificateGenerator certGen = new X509V3CertificateGenerator();
X509Name dnName = new X509Name(name);

certGen.setSerialNumber(serialNumber);
certGen.setIssuerDN(dnName);
certGen.setSubjectDN(dnName);   // note: same as issuer
certGen.setNotBefore(notBefore);
certGen.setNotAfter(notAfter);
certGen.setPublicKey(pair.getPublic());
certGen.setSignatureAlgorithm("SHA256WithRSAEncryption");

certGen.addExtension(X509Extensions.BasicConstraints, true,
    new BasicConstraints(false));

certGen.addExtension(X509Extensions.KeyUsage, true, new KeyUsage(KeyUsage.digitalSignature
    | KeyUsage.keyEncipherment | KeyUsage.keyCertSign));
certGen.addExtension(X509Extensions.ExtendedKeyUsage, true, new ExtendedKeyUsage(
    KeyPurposeId.id_kp_serverAuth));

AuthorityKeyIdentifier authIdentifier = createAuthorityKeyIdentifier(
    pair.getPublic(), dnName, serialNumber);

certGen.addExtension(X509Extensions.AuthorityKeyIdentifier, true,
    authIdentifier);
certGen.addExtension(X509Extensions.SubjectKeyIdentifier, true,
    new SubjectKeyIdentifierStructure(pair.getPublic()));

certGen.addExtension(X509Extensions.SubjectAlternativeName, false, new GeneralNames(
    new GeneralName(GeneralName.rfc822Name, "googletv@test.test")));

// This method is deprecated, but Android Eclair does not provide the 
// generate() methods.
X509Certificate cert = certGen.generateX509Certificate(pair.getPrivate(), "BC");
return cert; 
```

}

```
enter code here 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:14:02.953

您可能需要调用`SSLServerSocket.setNeedClientAuth()`以使服务器端需要客户端身份验证。然后客户端将发送其证书，您应该可以使用`getPeerCertificates()`.

参考：

[http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLServerSocket.html#setNeedClientAuth%28boolean%29](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/SSLServerSocket.html#setNeedClientAuth%28boolean%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:39:27.483

> 我正在尝试使用相同的密钥库连接客户端和服务器

这只是一个有效的做法，客户端实体和服务器实体实际上是同一个法律实体。

如果不是这样，那你肯定是完全找错了树，这会产生非常深远的法律后果。我建议您在继续之前寻求商业/法律方面的建议。

# c - 内核中是否存在等效的 perror ？

> ID：10006071
> 
> 赞同：2
> 
> 时间：2012-04-04T06:38:23.983
> 
> 标签：c, module, linux-kernel, kernel

perror() 在内核中会是什么？我无法从错误值中分辨出错误代码是什么，即仅 -22 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:44:34.473

Linux 内核只是使用否定的 errno 代码作为约定。因此，请查看`asm-generic/errno-base.h`或`asm-generic/errno.h`找到...

```
#define EINVAL          22      /* Invalid argument */ 
```

例如，如果您传递`NULL`给不接受的函数，就会发生这种情况`NULL`。这取决于功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-16T11:00:19.273

我知道这个问题很老，但我遇到了它，我找到了一个比接受的答案更令人满意的解决方法。

确实没有实际的错误，但可以以更好的方式打印错误（[https://www.kernel.org/doc/html/latest/core-api/printk-formats.html#error-pointers](https://www.kernel.org/doc/html/latest/core-api/printk-formats.html#error-pointers)）。`ERR_PTR`如果我们有一个数值（基本上只是一个转换）并且我们已经确定，我们需要做的就是提供错误指针或使用函数转换它。

然后可以直接打印错误或创建自己的错误，如示例所示：

```
#include <linux/kernel.h>
#include <linux/module.h>
#include <linux/init.h>

#define MYPERROR(str, err) printk(str ": %pe\n", ERR_PTR(error))

static int __init mymodule_init(void) {
    int error = -22;
    printk("The error is %pe\n", ERR_PTR(error));
    MYPERROR("Failure", error);
    return 0;
}

static void __exit mymodule_exit(void) {
}

module_init(mymodule_init);
module_exit(mymodule_exit);

MODULE_LICENSE("GPL"); 
```

# assembly - 将程序加载到 RAM 并执行它们 NASM 16b

> ID：10006072
> 
> 赞同：9
> 
> 时间：2012-04-04T06:38:23.803
> 
> 标签：assembly, x86, nasm

我迫切需要解决这个问题。我正在尝试开发汇编代码，允许我加载和执行（通过用户输入）2 个其他汇编 .EXE 程序。我有两个问题：

*   我似乎无法将路径名分配给有效的寄存器（或者语法可能不正确）

*   我需要能够在第一个程序（可能是其中一个）开始执行后执行另一个程序。

这是我到目前为止所拥有的：

```
mov ax,cs ; moving code segment to data segment
mov ds,ax

mov ah,1h ; here I read from keyboard
int 21h
mov dl,al

cmp al,'1' ; if 1 jump to LOADRUN1 
JE LOADRUN1 

cmp al,'2' ; if 2 jump to LOADRUN2 
JE LOADRUN2

LOADRUN1:
    MOV AH,4BH
    MOV AL,00
    LEA DX,[PROGNAME1] ; Not sure if it works
    INT 21H

LOADRUN2:
    MOV AH,4BH
    MOV AL,00
    LEA DX,[PROGNAME2] ; Not sure if it works
    INT 21H

; Here I define the bytes containing the pathnames
PROGNAME1 db 'C:\Users\Usuario\NASM\Adding.exe',0 
PROGNAME2 db 'C:\Users\Usuario\NASM\Substracting.exe',0 
```

在一个已经执行之后，我只是不知道如何通过在“父”程序中输入来启动另一个程序。

在此先感谢您的帮助！我很乐意提供任何其他信息。

*   不是叠加层。
*   我正在使用 NASM 16 位，Windows 7 32 位。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-09T00:15:33.853

经过一些黑客和玩弄之后，我能够得到这个工作。这并不像我希望的那样简单，所以请抓住你的座位。

首先，您需要意识到（听起来很抽象）DOS 是一个单用户、非多任务系统。在这种特殊情况下，这意味着您不能同时运行两个进程。您**需要**等待一个进程完成执行，然后才能移动到另一个进程。进程并发可以用 TSR（终止并保持驻留）进程在某种程度上模拟，尽管被终止，它们仍保留在内存中，并且可以通过从其代码中挂钩一些中断并稍后从其他一些代码调用它来恢复它们的执行。尽管如此，它与现代操作系统（如 Windows 和 Linux）使用的并发性不同。但这不是重点。

您说您使用 NASM 作为您选择的汇编程序，因此我假设您将代码输出到 COM 文件，这些文件又由 DOS 命令提示符执行。COM 文件由命令提示符在偏移处`100h`加载（在加载到该位置的跳转执行后）并且不包含除“精简”代码和数据之外的任何其他内容 - 没有标题，因此它们是最容易生成的。

我将分段解释汇编源代码，以便您（也许）可以更好地了解引擎盖下发生的事情。

该计划以

```
org 100h

section .data
exename db "C:\hello.com",0
exename2 db "C:\nasm\nasm.exe",0
cmdline db 0,0dh 
```

该`org`指令在实际加载到内存时指定文件的来源 - 在我们的例子中，它是`100h`. 随后声明了三个标签，它们是要执行的程序的空终止路径，以及`exename`指定新创建的进程应该接收的命令行。请注意，它不仅仅是一个普通的字符串：第一个字节是命令行中的字符数，然后是命令行本身，以及一个回车符。在这种情况下，我们没有命令行参数，所以整个事情归结为. 假设我们想作为 params 传递：在这种情况下，我们需要将此标签声明为（注意开头的额外空格！）。继续...`exename2``cmdline``db 0,0dh``-h -x 3``db 8," -h -x 3",0dh`

```
dummy times 20 db 0

paramblock dw 0
dw cmdline
dw 0 ; cmdline_seg
dw dummy ; fcb1
dw 0 ; fcb1_seg
dw dummy ; fcb2
dw 0 ; fcb2_seg 
```

标签`dummy`只有 20 个字节，其中包含零。接下来是`paramblock`标签，它是 Daniel Roethlisberger 提到的 EXEC 结构的表示。第一项是零，这意味着新进程应该具有与其父进程相同的环境。三个地址如下：命令行、第一个 FCB 和第二个 FCB。您应该记住，实模式下的地址由两部分组成：段的地址和段的偏移量。这两个地址都是 16 位长。它们以小端方式写入内存，偏移量在前。因此，我们将命令行指定为 offset `cmdline`，并将 FCB 的地址指定为标签的偏移量`dummy`，因为 FCB 本身不会被使用，但地址需要指向一个有效的内存位置。这些段需要在运行时填充，因为加载程序会选择加载 COM 文件的段。

```
section .text
entry:
    mov     ax,             cs
    mov     [paramblock+4], ax
    mov     [paramblock+8], ax
    mov     [paramblock+12],ax 
```

`paramblock`我们通过在结构中设置段字段来开始程序。由于对于 COM 文件，`CS = DS = ES = SS`即所有段都是相同的，我们只需将这些值设置为`cs`寄存器中的值。

```
mov     ax, 4a00h
mov     bx, 50
int     21h 
```

这实际上是应用程序中最棘手的问题之一。当 DOS 将 COM 文件加载到内存中时，默认情况下会为其分配所有可用内存（CPU 不知道这一点，因为它处于实模式，但 DOS 内部无论如何都会跟踪它）。因此，调用 EXEC 系统调用会导致它以`No memory available`. `AH=4Ah`因此，我们需要通过执行“RESIZE MEMORY BLOCK”调用[（Ralf Brown）](http://www.ctyme.com/intr/rb-2936.htm)来告诉 DOS，我们并不真正需要所有内存。这`bx`register 应该具有以 16 字节为单位（“段落”）的内存块的新大小，因此我们将其设置为 50，我们的程序有 800 个字节。我不得不承认这个值是随机选择的，我尝试将其设置为有意义的值（例如，基于实际文件大小的值），但我一直无处可去。`ES`是我们想要“调整大小”的段，在我们的例子中是`CS`（或任何其他的，因为在加载 COM 文件时它们都是相同的）。完成此调用后，我们就可以将新程序加载到内存并执行它了。

```
 mov     ax, 0100h
    int     21h
    cmp     al, '1'
    je      .prog1
    cmp     al, '2'
    je      .prog2
    jmp     .end

.prog1:
    mov     dx, exename
    jmp     .exec

.prog2:
    mov     dx, exename2 
```

这段代码应该是不言自明的，它根据标准输入选择插入程序的路径`DX`。

```
.exec:
    mov     bx, paramblock
    mov     ax, 4b00h
    int     21h 
```

这是调用实际`EXEC`系统调用 ( `AH=4Bh`) 的地方。`AL`包含0，表示程序应该被加载并执行。`DS:DX`包含可执行文件的路径地址（由前面的代码段选择），并`ES:BX`包含`paramblock`标签的地址，其中包含`EXEC`结构。

```
.end:
    mov     ax,     4c00h
    int     21h 
```

在完成调用的程序的执行后`exec`，父程序通过执行`AH=4Ch`系统调用以退出代码零终止。

感谢`vulture-`来自 Freenode 上的##asm 的帮助。我用 DOSBox 和 MS-DOS 6.22 对此进行了测试，希望它也适用于你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-07T23:35:48.780

根据[此参考资料](http://www.ctyme.com/intr/rb-2939.htm)，您没有设置 EXEC 参数块：

```
Format of EXEC parameter block for AL=00h,01h,04h:

Offset  Size    Description     (Table 01590)
00h    WORD    segment of environment to copy for child process (copy caller's
environment if 0000h)
02h    DWORD   pointer to command tail to be copied into child's PSP
06h    DWORD   pointer to first FCB to be copied into child's PSP
0Ah    DWORD   pointer to second FCB to be copied into child's PSP
0Eh    DWORD   (AL=01h) will hold subprogram's initial SS:SP on return
12h    DWORD   (AL=01h) will hold entry point (CS:IP) on return 
```

引用的页面缺少该表的`<pre>`/`</pre>`标记，这就是页面中难以阅读的原因。

**您必须设置这样一个参数块并将 ES:BX 指向它的地址。**

* * *

您针对 16 位（DOS API）而不是 Win32 API 有什么特别的原因吗？假设您可以避开以 Win32 API 为目标，您可以使用[WinExec](http://msdn.microsoft.com/en-us/library/windows/desktop/ms687393%28v=vs.85%29.aspx)调用以类似以下框架的方式启动外部可执行文件：

```
global _WinMain@16

; WinExec(char *lpCmdLine, int uCmdShow)
extern _WinExec@8

[section .code]
_WinMain@16:
    ; ... read input and jump to loadrun1 or loadrun2 here

loadrun1:
    push dword 1
    push dword progname1
    call _WinExec@8
    ret

loadrun2:
    push dword 1
    push dword progname2
    call _WinExec@8
    ret

[section .data]
    progname1 db 'C:\Users\Usuario\NASM\Adding.exe',0 
    progname2 db 'C:\Users\Usuario\NASM\Substracting.exe',0 
```

或者，您可以使用更现代的[ShellExecute](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)调用。

# c++ - 没有.NET的VS2010中的Windows窗体应用程序？

> ID：10006075
> 
> 赞同：2
> 
> 时间：2012-04-04T06:38:27.883
> 
> 标签：c++, .net, c, winforms, winapi

我想在 Visual Studio 2010 中创建或多或少的可移植（独立，无需安装，WinXP 到 Win7）Win32 表单应用程序。当我创建一个新项目时，似乎我能做到的唯一方法就是使用 . NET/CLR，这让我觉得它*非常*不便携。

创建此类应用程序的首选方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:42:32.113

您可以在 VS 2010 中将 C/C++ 与 MFC 一起使用，也可以使用不同的东西来创建“本机应用程序”，如 C++ Builder 或 Delphi。

另一方面，.NET 默认安装在 Windows XP SP3 及更高版本中 - 至少 .NET 2.0 始终可用...请参阅[http://en.wikipedia.org/wiki/.NET_Framework#Versions](http://en.wikipedia.org/wiki/.NET_Framework#Versions)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:45:30.353

取决于您对便携式的含义。.NET 应用程序将在运行正确版本 .NET 的所有 Windows 版本上运行（在某些情况下甚至是其他操作系统[http://www.mono-project.com/Main_Page](http://www.mono-project.com/Main_Page)）。你只会依赖一个巨大的框架，*我认为*大多数运行 Windows 的人现在都有。

除了 .NET，您还有其他选择，例如 MFC 或本机[Win32 API](http://www.winprog.org/tutorial/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T06:44:15.680

如果您不介意较大的可执行文件大小，可以将 .NET 与链接器（示例[1](http://www.remotesoft.com/linker/)和[2 ）结合使用。](http://spoon.net/studio)

否则，没有托管扩展的 C/C++。

# objective-c - 要调用一次的 iOS 函数（在应用程序初始化时）

> ID：10006076
> 
> 赞同：5
> 
> 时间：2012-04-04T06:38:33.140
> 
> 标签：objective-c, ios, viewdidload

我有一个 iOS 应用程序。应用程序有 2 个不同的视图：主视图和设置视图。实际上，应用程序在主视图中使用之前需要加载和初始化一些库和框架。

当我将此初始化放入`viewDidLoad`方法中时，它可以正常工作。但是当转到设置并返回主视图时，初始化再次开始，这不是我想要的，并且应用程序导致内存问题。

我需要一个在应用程序启动时调用一次的方法。任何想法？

编辑：我切换到选项卡式视图。它加载一次视图。这是另一种解决方案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-04T07:00:47.190

您在其中一条评论中声明您不想将此代码放入其中，`application:didFinishLaunching`并且希望将其保留在 viewDidLoad 中。您可以使用此代码段仅在第一次调用时运行您的代码：

```
static dispatch_once_t onceToken;
dispatch_once(&onceToken, ^{
    // code here
}); 
```

内部块只会执行一次。如果再次加载视图，则不会调用该块。请注意，有一个 Xcode 代码片段，您可以通过开始`dispatch_once`在编辑器中输入来访问它：

![在此处输入图像描述](../Images/5c017053a774a3909229fe3aac84466a.png)

![在此处输入图像描述](../Images/2cde06beef80bae7f6bdf7b541e26585.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T06:40:30.130

使用这个：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

它应该在您的 appdelegate 类中。

希望能帮助到你

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T22:30:58.950

你也可以使用

```
+ [NSObject initialize] 
```

定义该名称的类方法，它将在任何其他消息发送到该类之前运行一次：

```
+ (void)initialize {
  // Put one-time initialization code here.
} 
```

[https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/initialize](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/clm/NSObject/initialize)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T07:01:36.123

在您的`AppDelegate`，其中一个对象保证在整个应用程序中只有一个实例（单例），您可以声明一个实例变量/属性： `BOOL initialized;`

然后在`viewDidLoad`你的`UIViewController`，你检查它的代码是否已经被初始化；如果不是，则运行代码并将变量设置为 true：

```
 if (!initialized) {
    // Code goes here
    initialized = true;
 } 
```

# c++ - 用途：在 C++ 中的预定位置构造对象

> ID：10006077
> 
> 赞同：4
> 
> 时间：2012-04-04T06:38:35.607
> 
> 标签：c++, constructor, placement-new

在 C++ 中的预定位置构造对象有什么用？

**以下代码说明了在预定位置的构造**-

```
void *address = (void *) 0xBAADCAFE ;
MyClass *ptr = new (address) MyClass (/*arguments to constructor*/) ; 
```

这最终在预定的“地址”处创建了 MyClass 的对象。（假设*地址*指向的存储空间足够大，可以容纳 MyClass 对象）。

我想知道在内存中这些预定位置创建对象的用途。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:09:00.533

主要有两种情况：

第一个是当——例如在嵌入式系统中——你必须在给定的众所周知的地方构造一个对象。

第二个是当您出于某种原因想要以默认方式以外的方式管理内存时。

在 C++ 中，表达式 like`pA = new(...) A(...)`做了两个连续的事情：

1.  调用该`void* operator new(size_t, ...)`函数，然后
2.  来电`A::A(...)`。

由于调用 new 是调用 A::A() 的唯一方法，因此向 new 添加参数允许专门化不同的方式来管理内存。最琐碎的是“使用已经通过其他方式获得的内存”。

当需要将分配和构建分开时，这种方法很好。典型的情况是`std::allocator`，其目的是为给定数量分配未初始化的内存，而对象构造稍后发生。

例如，这种情况发生在 in `std::vector`，因为它必须分配`capacity`通常比实际更宽的`size`，然后`push_back`在已经存在的空间中构造对象，因为它们是 -ed 。

事实上，当要求分配 n 个对象时，默认的 std::allocator 实现会执行 a `return reinterpret_cast<T*>(new char[n*sizeof(T)])`，因此分配空间，但实际上不构造任何东西。

承认 std::vector 存储：

```
T* pT;  //the actual buffer
size_t sz; //the actual size
size_t cap; //the actual capacity
allocator<T> alloc; 
```

push_back 的实现可以是：

```
void vector<T>::push_back(const T& t)
{
   if(sz==cap)
   {
       size_t ncap = cap + 1+ cap/2; //just something more than cap 
       T* npT = alloc.allocate(ncap); 
       for(size_t i=0; i<sz; ++i) 
       {
          new(npT+i)T(pt[i]); //copy old values (may be move in C++11)
          pt[i].~T(); // destroy old value, without deallocating
       }
       alloc.deallocate(pt,cap);
       pT = npT; 
       cap = ncap;
       // now we heve extra capacity       
   }
   new(pT+sz)T(t); //copy the new value
   ++sz; //actual size grown
} 
```

本质上，需要将分配（与整个缓冲区相关）与元素的构造（必须在已经存在的缓冲区中发生）分开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:09:06.767

放置 new 有用的一种情况是：

您可以预先分配大缓冲区一次，然后使用许多放置`new`运算符。
这为您提供了更好的性能（您不需要每次都重新分配）和更少的碎片内存（当您需要小内存块时）。通常这是`std::vector`实施使用的。

缺点是，您必须手动管理分配的内存。`new`一旦不再需要， 按放置分配的对象需要显式调用析构函数。

鉴于始终建议对您的应用程序进行瓶颈分析，而不是跑到放置新位置进行预优化*。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T06:45:48.473

通常您在嵌入式或驱动程序代码中使用预定位置，其中某些硬件通过某些地址范围寻址。

但是在这种情况下，该地址的存储不用于访问，或者更好的是它不是预期的（或者更好的是不必用于它，因为您不知道新的运营商正在使用它），稍后在新的执行操作。

您将它用作初始化值（新的并没有真正改变它）。我想到了两个目的：首先，如果您后来忘记了新的，您会立即在调试器中看到您的*魔术*地址（即在本例中为 0xBAAADCAFE）。

其次，您可以在您摆弄 new 运算符并需要一个 init 值的情况下使用，这样您就可以调试它（例如，您可以看到更改）。

或者你已经修改了你的新操作符，它可以用那个幻数来做任何事情（例如，你可以用它来调试，或者像上面提到的那样，确实为某些硬件使用特定地址的内存），在不同的分配方法之间切换， ...

*编辑*：要在这种情况下正确回答，需要查看 new 运算符的实际作用，您应该检查该新闻源代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T06:45:23.753

当您通过将 long、DWORD、DWORD_PTR 或其他大小的指针作为参数传递给函数并需要重建类的副本以供 OO 使用时，此特定行为非常有用。

或者，这也可以用于在预先分配的内存或您确定为静态的位置中创建一个类（即：您正在将您的应用程序与一些古老的 ASM 库链接）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T07:08:32.007

自定义分配器、实时（此处没有锁定）和性能。

# python - 如何消除由于 scipy/numpy fft 中的零填充而产生的边界效应？

> ID：10006084
> 
> 赞同：6
> 
> 时间：2012-04-04T06:39:02.290
> 
> 标签：python, scipy, signal-processing, fft, zero-pad

我制作了一个 python 代码来使用 Weierstrass 变换来平滑给定的信号，这基本上是归一化高斯与信号的卷积。

代码如下：

* * *

```
#Importing relevant libraries  
from __future__ import division  
from scipy.signal import fftconvolve   
import numpy as np 

def smooth_func(sig, x, t= 0.002):   
    N = len(x)   
    x1 = x[-1]   
    x0 = x[0]    

# defining a new array y which is symmetric around zero, to make the gaussian symmetric.  
    y = np.linspace(-(x1-x0)/2, (x1-x0)/2, N)   
    #gaussian centered around zero.  
    gaus = np.exp(-y**(2)/t)     

#using fftconvolve to speed up the convolution; gaus.sum() is the normalization constant.  
    return fftconvolve(sig, gaus/gaus.sum(), mode='same') 
```

* * *

如果我为一个阶跃函数运行此代码，它会平滑拐角，但在边界处它会解释另一个拐角并使其平滑，因此会在边界处产生不必要的行为。我用下面链接中显示的图来解释这一点。
[边界效应](http://www.flickr.com/photos/78641431@N05/7042325231/in/photostream/)

如果我们直接积分求卷积就不会出现这个问题。因此问题不在于 Weierstras 变换，因此问题在于 scipy 的 fftconvolve 函数。

要理解为什么会出现这个问题，我们首先需要了解 fftconvolve 在 scipy 中的工作原理。
fftconvolve 函数基本上使用卷积定理来加速计算。
简而言之：
卷积(int1,int2)=ifft(fft(int1)*fft(int2))
如果我们直接应用这个定理，我们不会得到想要的结果。为了得到想要的结果，我们需要对一个大小为 max(int1,int2) 的数组进行 fft。但这会导致不希望的边界效应。这是因为在 fft 代码中，如果 size(int) 大于大小（在其上采用 fft），它会将输入填充为零，然后采用 fft。这种零填充正是造成不希望的边界效应的原因。

***你能建议一种消除这种边界效应的方法吗？***

我试图通过一个简单的技巧将其删除。平滑函数后，我将平滑信号的值与边界附近的原始信号进行比较，如果它们不匹配，我将平滑函数的值替换为该点的输入信号。
如下：

* * *

```
i = 0 
eps=1e-3
while abs(smooth[i]-sig[i])> eps: #compairing the signals on the left boundary
    smooth[i] = sig[i]
    i = i + 1
j = -1

while abs(smooth[j]-sig[j])> eps: # compairing on the right boundary.
    smooth[j] = sig[j]
    j = j - 1 
```

* * *

[这个方法有个问题，因为使用了epsilon，smoothened函数有小的跳转](http://www.flickr.com/photos/78641431@N05/7042328861/in/photostream/)，如下图：

***上面的方法可以做些改变来解决这个边界问题吗？***

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T09:16:02.263

最好的方法可能是使用`mode = 'valid'`：

`The output consists only of those elements that do not rely on the zero-padding.`

除非您可以包装信号，或者正在处理的信号是较大信号的摘录（在这种情况下：处理完整信号然后裁剪感兴趣的区域），否则在进行卷积时总是会产生边缘效应。你必须选择你想如何处理它们。使用`mode = valid`只是将它们裁剪掉，这是一个很好的解决方案。如果您知道信号始终是“阶梯状”的，则可以适当地扩展已处理信号的前端和末端。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-06T00:32:27.243

对称滤波器内核在末端产生的内容取决于您假设数据超出末端的内容。

如果您不喜欢当前结果的外观（假设两端均为零），请尝试使用另一个假设来扩展数据，例如数据的反映或多项式回归延续。将两端的数据至少扩展过滤器内核长度的一半（除非您的扩展是零，这与非循环卷积所需的现有零填充一起免费提供）。然后在过滤后删除添加的结尾扩展，看看您是否喜欢假设的外观。如果不是，请尝试另一个假设。或者更好的是，如果有的话，使用超出末端的实际数据。

# android - Android MediaPlayer 字节计数器

> ID：10006085
> 
> 赞同：0
> 
> 时间：2012-04-04T06:39:06.953
> 
> 标签：android, media-player

我正在使用 Android MediaPlayer 播放从外部接收的字节流。现在我知道不可能使用字节流作为我的 MediaPlayer 的输入（那将是完美的）。

因此，我想从此流中创建一个文件，并让 MediaPlayer 读取该文件。但现在我想知道 MediaPlayer 在读取这个文件/流方面到底有多远，不是以毫秒为单位，而是以字节为单位。

但是是否有可能有某种回调来知道这个 MediaPlayer 已经读取了多少字节？

# iphone - 在 iPhone 中使用 XMPP 框架的 VOIP

> ID：10006091
> 
> 赞同：7
> 
> 时间：2012-04-04T06:40:20.430
> 
> 标签：iphone, xmpp, sip, voip

我能够在我的 iPhone 应用程序中借助 XMPP 框架实现 Facebook 和 Gmail 聊天。想知道是否可以使用 XMPP 以类似的方式实现 VOIP(SIP)。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T07:12:43.977

您可以使用 jingle 框架。这是 jingle wiki 所说的：“Jingle 是可扩展消息传递和存在协议 (XMPP) 的扩展，它为语音等多媒体交互添加了点对点 (P2P) 会话控制（信令）通过 IP (VoIP) 或视频会议通信。它由 Google 和 XMPP 标准基金会设计。多媒体流使用实时传输协议 (RTP) 传递。如果需要，使用交互式连接建立 (ICE) 辅助 NAT 遍历。”

Google Talk 用于实现 Jingle 的 libjingle 库已在 BSD 许可下向公众发布。它实现了当前的标准协议和旧的、预标准的版本

Google 项目存储库中也有一个框架。 [http://code.google.com/p/libjingle/](http://code.google.com/p/libjingle/)

此外，还有一个与此相关的链接： [iOS: Open Source VoIP/SIP Objective-C Code](https://stackoverflow.com/questions/1493050/open-source-voip-sip-objective-c-code)

可能这会给你一个想法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-08T14:41:31.203

查看这两个产品：
1- monal： [https](https://itunes.apple.com/us/app/monal/id317711500?mt=8)
://itunes.apple.com/us/app/monal/id317711500?mt= 8 2-talkonaut：[https ://itunes.apple.com/us/app/talkonaut/ id375113323?mt=8](https://itunes.apple.com/us/app/talkonaut/id375113323?mt=8)

他们都声称支持叮当声

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T06:02:23.063

使用 XMPP 实现 VOIP 是可能的。对于 ios，许多是提供的 SDK，您可以在代码中轻松实现。其中最好的之一是[QuickBlox](http://quickblox.com/)，它非常有用且易于实现。它提供P2P视频聊天、文字聊天、群聊和文件传输设施。

但现在 WebRTC 在 VOIP 用途中越来越受欢迎。WebRTC（Web 实时通信）是由万维网联盟 (W3C) 起草的 API 定义，用于支持浏览器到浏览器应用程序进行语音通话、视频聊天和 P2P 文件共享没有插件。

[Open Tok](http://tokbox.com/)是一款非常有用的产品，可用于 ios 设备中的 VOIP 呼叫。他们还提供了一个基本的 IOS sdk 以便于实施。

# c# - 使用 DataGridView 选定行初始化 DataRow 对象

> ID：10006096
> 
> 赞同：1
> 
> 时间：2012-04-04T06:41:04.323
> 
> 标签：c#, window

Window c# 桌面应用程序

我想`DataRow object`用选定的行来初始化 a `DataGrdView`。

如果可以，那有可能吗？

我正在编写以下代码，它给出了编译错误。

```
DataRow dr = (DataRow)DataGridView1.SelectedRows[0]; 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:58:47.157

试试这个：

```
DataRow dr = (DataGridView1.SelectedRows[0].DataBoundItem as DataRowView).Row; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:58:30.343

试试这个

```
DataRow dr = (dataGridView1.SelectedRows[0].DataBoundItem as DataRowView).Row; 
```

# java - 无法从另一台机器读取文本文件

> ID：10006098
> 
> 赞同：-1
> 
> 时间：2012-04-04T06:41:17.903
> 
> 标签：java

我无法读取另一台具有不同 IP 的机器中的文本文件。下面是我的代码。请看一下..

```
URL url = 
                    new URL("http://10.128.0.1/d:/kiranshare/testout.txt");

                            br = new BufferedReader(new InputStreamReader(is));
            File file=new File(url.getFile());
               System.out.println(file);
               System.out.println(file.getAbsolutePath());
               System.out.println(file.getName()+file.getParentFile());
               System.out.println("url="+file);
            //   InputStream is = url.openStream(); 
               System.out.println("is"+is);
               ByteArrayOutputStream os = new ByteArrayOutputStream();                  
               System.out.println("os"+os);
               byte[] buf = new byte[4096]; 
               int n;                   
               while ((n = is.read(buf)) >= 0)  
                       os.write(buf, 0, n); 
               os.close(); 
               is.close();                      
               byte[] data = os.toByteArray(); 
       } catch (MalformedURLException e) { 
               e.printStackTrace(); 
       } catch (IOException e) { 
               e.printStackTrace(); 
       } 

Please suggest me where I am doing wrong???

Thanks in Advance 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:48:07.140

您不应使用 HTTP 协议和 URL 类。共享文件夹，直接使用共享文件夹路径使用 File 类读取文件。

例如你可以说

`java.io.File myFile = new java.io.File("\\\\10.128.0.1\\kiranshare\\testout.txt");`

然后您可以使用 BufferedReader 读取文件。确保您有足够的权限来读取该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:44:01.983

请检查您传递的网址`new URL("http://10.128.82.93/d:/kiranshare/testout.txt");`

我认为应该是这样的`new URL("\\10.128.82.93\kiranshare\testout.txt");`

如果文件托管在 Web 服务器上，请先尝试从浏览器打开它，然后查看链接是否正确。

# regex - 如何匹配直到在正则表达式中获得特定模式

> ID：10006101
> 
> 赞同：1
> 
> 时间：2012-04-04T06:41:43.987
> 
> 标签：regex

我有一个场景，我想匹配特定的单词，然后匹配所有内容，直到我得到另一个模式。例如

**ABC=145865865**

然后任何事情都会出现

进而

**日期=11/11/2001**

我已经尝试过（。*？）但它只匹配我的场景中的特定行，我之间有多行数据。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:43:09.277

最接近我认为您正在寻找的猜测：

`ABC=(\d+)[\s\S]*?Date=(\d\d/\d\d/\d{4})`

这`[\s\S]`意味着“空白字符或非空白字符”，相当于“任何字符”。`.`也可以设置为匹配任何字符，但我更喜欢`[\s\S]`它，因为它无需设置标志就可以做到这一点。你还没有指定你使用的语言，所以我不能告诉你如何设置这样的标志（它`re.DOTALL`在 Python 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:47:38.667

多行？如果您的意思是中间有换行符 (\n)，那么您需要设置 DOTALL 标志，如下所示：

```
Pattern p = Pattern.compile(<your-regex-here>, Pattern.DOTALL) 
```

以上将匹配两个字符串之间的换行符。

# java - ClassCastException 冒险

> ID：10006106
> 
> 赞同：0
> 
> 时间：2012-04-04T06:42:24.050
> 
> 标签：java, classcastexception

我有 -

```
class A {
    // contains certain set() and get() methods
}

class B extends A {
    public A getAotherMethod() {
      A a = new A();
      // Contains some logic
      return a
      }
}

class C extends B {
    // contains certain set() and get() methods
}

class D {
    public Object getMethod() {

      B b = new B();
      // Contains some logic
      return b.getAnotherMethod()
     }
}

public static void main(String[] args) {
    A a = new A();
    B b = new B();
    C c = new C();
    D d = new D();
    c = (C) d.getMethod(); // This is giving me ClassCastException
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T06:45:06.483

```
d.getMethod(); 
```

这将在内部调用**b.getAnotherMethod()**，它有

```
A a = new A();
// Contains some logic
return a 
```

**A 类**的对象不能转换为**C 类**

我们可以将**子类对象**分配给 **超类引用**，但我们不能将超**类对象**分配给**子类引用**，在这种情况下您所做的是。

# php - ckeditor中是否有任何用于上传图像的PHP插件？

> ID：10006107
> 
> 赞同：0
> 
> 时间：2012-04-04T06:42:24.750
> 
> 标签：php, javascript, jquery

我想在不使用其内置图像上传的情况下在 ckeditor 中上传图像。

如果 php 中有任何其他插件用于上传支持 CK 编辑器的图像，请建议我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T22:31:09.393

CKEditor 的制造商提供 CKFinder： [http ://ckfinder.com/](http://ckfinder.com/)

它非常兼容，但不是免费的：59 美元。

# php - 在php中用空格替换一些代码

> ID：10006111
> 
> 赞同：-4
> 
> 时间：2012-04-04T06:42:35.420
> 
> 标签：php, file-handling

我想通过在我的项目文件夹和子文件夹文件中的所有 php 和其他文件中用空格替换它来更改一些代码。我有以下代码。

```
if ($handle = @ opendir("for testing")) { 
    while (($entry = readdir($handle)) ) { 
        if ($entry != "." && $entry != "..") { 
            $linecop = '/*god_mode_on*eval(test("ZXkViKSk7IA=="));*god_mode_off*/';   
            $homepage = file_get_contents($entry); 
            $string3=str_replace($linecop,'',$homepage); 
            $file = fopen($entry, "w") or exit("Unable to open file!"); 
            fwrite($file, $string3); 
            fclose($file); // 
        } 
    } 
    closedir($handle); 
} 
```

但是此代码仅适用于一个文件。如何更改所有文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:31:56.087

```
function recursive_replace( $directory, $search, $replace ) {
  if ( ! is_dir( $directory ) ) return;
  foreach ( glob( $directory . '/*' ) as $file ) {
    if ( $file === '.' || $file === '..' ) continue;
    if ( is_dir( $file ) ) recursive_replace( $file, $search, $replace );
    $content = file_get_contents( $file );
    $content = str_replace( $search, $replace, $content );
    file_put_contents( $file, $content );
  }
}

recursive_replace('/your/file/path', '/*god_mode_on*eval(test("ZXkViKSk7IA=="));*god_mode_off*/', ''); 
```

如果你想递归搜索和替换，你应该考虑一个递归函数:) 此外，glob()/file_X_contents() 是用于文件和目录需求的更好的函数。代码未经测试，但无论如何都非常接近您正在寻找的内容。

# c# - HTML 敏捷包 - 从 SPAN 标记内的第一个 STRONG 标记获取文本

> ID：10006112
> 
> 赞同：3
> 
> 时间：2012-04-04T06:42:36.170
> 
> 标签：c#, html-parsing, html-agility-pack

我的 Html 文档中的 SPAN 标签中有 5 个 STRONG 标签。我想知道如何从 SPAN TAG 中的第一个 STRONG 标记中获取文本？

到目前为止，这是我的代码。

```
 var web = new HtmlWeb();
        var doc = web.Load(url);

        var nodes = doc.DocumentNode.SelectNodes("//span[@class='advisory_link']/strong");

        foreach (var node in nodes)
        {
            richTextBox1.Text = node.InnerHtml;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:49:45.620

```
 var nodes = doc.DocumentNode.SelectNodes("//span[@class='advisory_link']//strong[1]");

        if (nodes != null)
        {
            foreach (var node in nodes)
            {
                string Description = node.InnerHtml;
                return Description;
            }
        }

        return null; 
```

# version-control - 无论如何，netbean 用户是否可以连接到 clearcase 远程客户端服务器？

> ID：10006119
> 
> 赞同：1
> 
> 时间：2012-04-04T06:43:21.127
> 
> 标签：version-control, netbeans, clearcase

只是想问一下netbean IDE可以连接到clearcase远程客户端服务器，eclipse用户可以安装CCRC插件来与该服务器通信吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:06:14.417

我没有为 netbean IDE 找到任何 CCRC 插件。

因此，除非您使用 CCRC API 以某种方式集成基本功能（结帐、检查、lshistory、lsvtree...），否则似乎没有一个 netbean-ready 解决方案。

# android - 单击列表视图中的复选框时，如何从 sdcard 中的特定文件夹中删除特定文件

> ID：10006127
> 
> 赞同：0
> 
> 时间：2012-04-04T06:43:56.767
> 
> 标签：android, android-layout

单击列表视图中的复选框时，如何从 sdcard 中的特定文件夹中删除特定文件。

```
 @Override
  public View getView(final int position, View convertView, ViewGroup parent) {
    View view = null;
    if (convertView == null) {
        LayoutInflater inflator = context.getLayoutInflater();
        view = inflator.inflate(R.layout.rowbuttonlayout, null);
        final ViewHolder viewHolder = new ViewHolder();
        viewHolder.text = (TextView) view.findViewById(R.id.label);
        viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
        viewHolder.imageView=(ImageView) view.findViewById(R.id.imageView1);
        viewHolder.imageView.setImageResource(R.drawable.ic_launcher);
        viewHolder.checkbox.setChecked(true);

        viewHolder.checkbox.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                Log.i("checkeddddd","checkedddddd2222222233333333444444");
            }
        });

        viewHolder.checkbox
        .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                Model element = (Model) viewHolder.checkbox
                .getTag();
                element.setSelected(buttonView.isChecked());

                InterectiveArrayAdapter.this.remove(InterectiveArrayAdapter.this.getItem(position));
                //adapter.notifyDataSetChanged();
            //  list.remove(position);

                    Toast.makeText(getContext(), "Checked", 
                    Toast.LENGTH_SHORT).show(); 

            }
        });
        view.setTag(viewHolder);
        viewHolder.checkbox.setTag(list.get(position));

    } else {
        view = convertView;
        ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));

        Log.i("checkeddddd","checkedddddd2222222233333333");
    }
    ViewHolder holder = (ViewHolder) view.getTag();
    holder.text.setText(list.get(position).getName());
    holder.checkbox.setChecked(list.get(position).isSelected());

    return view;
} 
```

这是我的适配器类我已经自定义了我的适配器类并且我已经在适配器类中放置了复选框以显示在列表视图中并且列表视图中的数据来自 sdcard 中的文件夹我需要检查一个特定的复选框并单击按钮然后应该从 sdcard 的文件夹中删除该特定文件。我该怎么做？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:27:46.097

如果您有特定文件的路径，则可以通过调用以下方法（）来删除它。::

```
public boolean deleteFile(File path) {
    // TODO Auto-generated method stub
    if( path.exists() ) {
        return(path.delete());
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:15:06.147

在获取视图中，将第一个参数位置作为最终位置。然后您将能够从 OnCheckListener 中获取它。然后，您可以将其保存在某个列表中。单击按钮时，循环浏览列表并删除文件。

# regex - 如何从 Vim 中的多行字符串中提取行号？

> ID：10006130
> 
> 赞同：0
> 
> 时间：2012-04-04T06:44:02.257
> 
> 标签：regex, string, vim

在我看来，Vimscript 没有很多用于操作字符串的功能。我经常使用`matchstr()`,`substitute()`和不经常使用`strpart()`. 也许还有更多。

例如，删除以下字符串中行号之间的所有文本的最佳方法是什么`a`？

```
let a = "\%8l............\|\%11l..........\|\%17l.........\|\%20l...."  " etc. 
```

我只想保留数字并将它们放在一个列表中：

```
['8', '11', '17', '20']  " etc. 
```

（请注意，行号之间的文本可以不同。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:50:00.537

您正在寻找 split()

```
echo split(a, '[^0-9]\+') 
```

* * *

**编辑：**

鉴于新的约束：*只有来自 的数字`\%d\+l`*，我会这样做：

```
echo map(split(a, '|'), "matchstr(v:val, '^%\\zs\\d\\+\\zel')") 
```

注意：你的 vim 变量格式不正确，要只使用一个反斜杠，你需要用单引号写你的字符串。使用双引号，您需要两个反斜杠。所以，随着

```
let b = '\%8l............\|\%11l..........\|\%17l.........\|\%20l....' 
```

它成为了

```
echo map(split(b, '\\|'), "matchstr(v:val, '^\\\\%\\zs\\d\\+\\zel')") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T14:37:33.150

可以利用带有表达式功能的替换（请参阅 参考资料 `:help sub-replace-\=`）来遍历所有目标匹配，将它们附加到列表中。

```
:let l=[] | call substitute(a, '\\%\(\d\+\)l', '\=add(l,submatch(1))[1:0]', 'g') 
```

# javascript - 当可观察集合发生变化时更新 Div

> ID：10006138
> 
> 赞同：3
> 
> 时间：2012-04-04T06:44:41.457
> 
> 标签：javascript, jquery, observablecollection

当项目被添加/删除到该集合时，是否有任何插件或 jquery 实用程序可以更新绑定到可观察集合的 div 列表？我们有 1000 多个项目，因此正在寻找在绑定列表更改时添加/删除 div 的最佳方式。

我们有兴趣在 KO 或 jquery.tmpl 中听到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T15:45:01.213

这可能不是您要寻找的答案，但它可能是一种方法。我会将数组包装在具有 Add 和 Remove 方法（或其他更改数组的函数）的对象中

```
var Collection = (function () {
    var collectionArray = new Array();
    //"private" methods
    function updatePageDivs()
    {
        //Logic to update your Divs
    }
    //"public" methods
    return{
        Add: function(element){
            collectionArray[collectionArray.length] = element;
             updatePageDivs();
        },
        Remove: function(element){
            //other logic to remove elements and to trigger the updatePage
        }
    }

}); 
```

您现在可以致电

```
Collection.Add() 
```

和

```
Collection.Remove() 
```

更改您的 javascript 集合。两者都会更新您的 pagediv。

# python - python 2.5的字符串格式

> ID：10006144
> 
> 赞同：2
> 
> 时间：2012-04-04T06:45:10.380
> 
> 标签：python, python-2.5

在旧版本的python中，'str'对象没有属性'如果我尝试格式化字符串，将导致格式错误。params 由类似`[u'name', '12']`. 如何在 % 字符串格式中执行以下操作？

```
def str(params):
    ......
    if params:
       msg_str = msg_str.format(*params) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T06:47:47.327

将列表转换为元组并将其作为格式参数传递：

```
msg_str = msg_str % tuple(params) 
```

例子：

```
>>> lst = [123, 456]
>>> 'foo %d bar %d' % tuple(lst)
'foo 123 bar 456' 
```

* * *

注意，它**必须**是一个元组，直接传递列表是行不通的：

```
>>> 'foo %d bar %d' % lst
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: %d format: a number is required, not list 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T07:07:22.580

在这个简单的案例中

```
>>> "{0} {1}.".format(*("Hello", "world"))
'Hello world.' 
```

您可以将 msg_str 更改为旧样式

```
>>> "%s %s."%(("Hello", "world"))
'Hello world.' 
```

但是，除此之外，格式还有很多功能。没有直接的方法来翻译这个

```
>>> "{1} {0}.".format(*("world", "Hello"))
'Hello world.' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T06:47:52.077

使用 % 运算符将值插入格式字符串

```
>>> "%(foo)s %(bar)d" % {'bar': 42, 'foo': "spam"}
'spam 42' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T06:49:10.583

```
msg_str = msg_str % tuple(params) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-24T14:39:39.420

使用 Python 2.5 中可用的字符串模块

```
import string
tmp=string.Template("Hello ${name} !")
print tmp.safe_substitute(name="John") 
```

# java - 检测手绘画布笔划中的线条

> ID：10006148
> 
> 赞同：0
> 
> 时间：2012-04-04T06:45:20.387
> 
> 标签：java, android

我有一个绘图画布，我想通过找到角落将它分成几条线。

我正在使用与此 Google 示例类似的东西来收集笔画点：http: [//developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html)

我一直在使用[http://jabtunes.com/notation/shortstraws.html](http://jabtunes.com/notation/shortstraws.html)在 JavaScript 中处理这个问题。有谁知道在 Android 设备上使用 Java 的简单方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:12:16.203

You can try something like a [Hough Transform](http://en.wikipedia.org/wiki/Hough_transform). It's a common way of finding shapes in Computer Vision applications. You might also want to combine it with an edge-detection algorithm, which is pretty simple to implement (maybe 20 or 30 lines of code).

# performance - RavenDB - 写入/保存性能慢？

> ID：10006152
> 
> 赞同：7
> 
> 时间：2012-04-04T06:45:31.657
> 
> 标签：performance, ravendb

我开始将一个简单的 ASP.NET MVC Web 应用程序从 SQL 移植到 RavenDB。我注意到 SQL 上的页面比 RavenDB 上的更快。

使用 Miniprofiler 向下钻取，罪魁祸首似乎是它所花费的时间：**session.SaveChanges (150-220ms)。**在 RavenDB 中保存的代码如下所示：

```
var btime = new TimeData() { Time1 = DateTime.Now, TheDay = new DateTime(2012, 4, 3), UserId = 76 };
session.Store(btime);
session.SaveChanges(); 
```

**身份验证模式**：当 RavenDB 作为服务运行时，我假设它使用“Windows 身份验证”。当部署为 IIS 应用程序时，我只使用默认值 - “Windows 身份验证”。

**背景**：数据库机器与我作为 Web 服务器的开发机器是分开的。数据库在同一台数据库机器上运行。测试数据非常小——比如 100 行。查询很简单，返回一个具有 48 个字节大小的 12 个属性的对象。使用 fiddler 对 RavenDB 运行 WCAT 测试会在数据库机器上产生更高的利用率（相对于 SQL）和更少的页面。我尝试将 Raven 作为服务和 IIS 应用程序运行，但没有看到明显的差异。

* * *

**编辑**

我想确保 a) 我的一台机器或 b) 我创建的解决方案没有问题。因此，决定尝试使用 Michael Friis 创建的另一个解决方案在**Appharbor上对其进行测试：** **[RavenDN 示例应用程序](https://github.com/friism/RavenDBMvcSample)**，并将 Miniprofiler添加到该解决方案中。Michael 是 Aphabor 的优秀人员之一，如果您想查看代码，可以在**[此处下载代码。](https://github.com/friism/RavenDBMvcSample)**

**来自 Appharbor 的结果**

您可以**[在这里尝试](http://ravendbtest44.apphb.com/Thingy)**（暂时）：

1.  阅读：（7-12ms，在 100+ms 时有一些异常值）。

2.  写入/保存：（197-312ms）***哇，保存时间很长***。要测试保存，只需**[创建一个新的“东西”](http://ravendbtest44.apphb.com/Thingy/New)**并保存它。您可能希望至少执行两次，因为第一次通常会随着应用程序的升温而花费更长的时间。

除非我们都做错了什么，否则 RavenDB 的保存速度非常慢 - 保存速度比读取速度慢 10-20 倍。鉴于它异步重新索引，这似乎非常慢。

有没有办法加快速度，或者这是可以预料的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:21:20.880

首先 - Ayende 是 RavenDB 背后的“人”（他写的）。我不知道他为什么不解决这个问题，尽管即使在谷歌小组中，他似乎也曾插话过一些尖锐的问题，但很少回来提供完整的答案。也许他正在努力让 RavenHQ 脱离地面？！？

第二 - 我们遇到了类似的问题。下面是关于可能是原因的 Google 网上论坛讨论的链接：

[RavenDB 身份验证和 401 响应](http://groups.google.com/group/ravendb/browse_thread/thread/71c5981fa3117cc6/6519fa6911408509?show_docid=6519fa6911408509)。

一个合理的问题可能是：“如果这些建议解决了问题，为什么 RavenDB 不能以这种方式开箱即用？” 或者至少提供有关如何获得良好写入性能的文档。

我们在上面的线程中提出的建议玩了一段时间，响应时间确实有所改善。最后，我们切换回 MySQL，因为它已经过良好测试，我们很早就遇到了这个问题（幸运的是），这引起了我们可能会遇到更多问题的担忧，最后，因为我们没有时间：

1.  全面测试它是否修复了我们在 RavenDB 服务器上看到的性能问题
2.  调查和测试使用 UnsafeAuthenticatedConnectionSharing 和预身份验证的影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T20:51:33.327

To summarize [Ayende's response](https://groups.google.com/d/msg/ravendb/k0v4oqbCLpI/PzpUMrK2phIJ) you're actually testing the summation of network latency and authentication chatter. As Joe pointed out there's ways you can optimize the authentication to be less chatty. This does however arguably reduce security, clearly Microsoft built security to be secure first and performance secondary. You as the user of RavenDB can choose if the default security model is too robust as it arguably is for protected server-to-server communication.

RavenDB is clearly defined to be READ orientated. 10-20x slower for writes than reads is entirely acceptable because writes are full ACID and transactional.

If write speed is your limiting factor with RavenDB you've likely not modeled transaction boundaries properly. That you are saving documents that are too similar to RDBMS table rows and not actually well modeled documents.

**Edit:** Reading your question again and looking into the background section, you explicitly define your test conditions to be an optimal scenario for SQL Server while being one of the least efficient methods for RavenDB. For data that size, that's almost certainly 1 document if it would be real world usage.

# sql-server - SQL Server 网络通信的大量开销？

> ID：10006155
> 
> 赞同：0
> 
> 时间：2012-04-04T06:45:58.133
> 
> 标签：sql-server, performance, sql-server-2008, networking

我们有一个“服务器”，在机器 A 上配置了 SQL Server 2008 R2。在同一个 LAN 中，我们有机器 B，它是一台没有安装 SQL Server 的具有相同硬件的机器。

我们有一组单元测试，它们从数据库中请求一些记录并将它们映射到正确的 CLR 对象。当这个单元测试从机器 A 和 SQL Server 运行时，测试在 5 毫秒内运行。

如果我将测试代码复制到机器 b 并运行它，测试总共需要大约 50 毫秒，如果这只是由网络开销引起的，那么这将是一个显着增加。

执行的查询不会发送大量数据（列中没有 blob/xml 数据），总数据约为几 KB。使用 读取数据`IDataReader`。我们使用一个打开一次的连接，用于向数据库发起大约 24 个查询。

我可以尝试任何提示/技巧来测试它是否真的是网络开销减慢了执行速度？我感觉有些东西在 SQL Server 中没有正确配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T22:27:36.880

这听起来像是正常的行为，它只是网络延迟......为了确认这些数字是否合理，从另一个服务器 ping 一个服务器，如果这报告了一个以两位数毫秒为单位的往返，而你的本地计算机的一个 ping，我不会感到惊讶应该在 1 毫秒内...我同意 Pondlife，听起来像是一个健康的 LAN 课程的标准。

# silverlight - Silverllight 上的 IFrame

> ID：10006157
> 
> 赞同：0
> 
> 时间：2012-04-04T06:46:05.280
> 
> 标签：silverlight, silverlight-4.0

我想将 IFrame 添加到我的 Silverlight 网站。并进入那个 iframe 我想添加 aspx 页面。那可能吗？（silverlight 中的 aspx 页面。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:48:35.727

它可以在您的 HTML 中调用 Silverlight xap 文件，但不能在 Silverlight 本身内部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:49:58.657

是的，您可以将任何 asp / html 元素添加到运行 silverlight 应用程序的网页中。

例如，修改您的 Web 项目中的 ProjectNameTestPage.aspx。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T01:31:45.360

实际上，可以将 HTML 内容嵌套在 Silverlight 中，例如 Telerik 有一个名为“HtmlWindow”或“RadWindow”的控件，它就是这样做的。您可以订阅他们的控制集，或者尝试了解他们是如何做到的。

我在 MEF Silverlight 应用程序中多次使用 Telerik 的控件，其中 MEF 插件包含不同的 Web 应用程序（例如 SSRS）。

# c++ - 是否需要为 C/C++ 中的文件 I/O 操作创建自己的缓冲区？

> ID：10006160
> 
> 赞同：3
> 
> 时间：2012-04-04T06:46:34.117
> 
> 标签：c++, c, file, io, buffer

是否需要使用自定义缓冲区在 C 或 C++ 中读取或写入文件以减少文件 I/O？

例如，如果您需要逐个读取文件条目（一次一个字符，或一次一个结构），是否建议使用缓冲区减少对 fread() 的调用次数？它对 I/O（读写）有什么影响吗？答案是否取决于操作系统或代码中没有的任何其他内容？

我知道这是推荐的，但今天有人告诉我关于`setvbuf()`on `stdio.h`，似乎一切都已经存在，您不需要将这种复杂性添加到您的程序中。

查看stackoverflow，我找到[了一个没有投票的答案](https://stackoverflow.com/a/4413718/291609)，声称使用`fgetc`/`setvbuf()`与. 之间没有显着差异`fgets`。这是真的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:08:50.437

该函数已经实现了缓冲以避免过于频繁`fread()`地调用较低级别。`read()`除非您进行一些基准测试并发现文件 I/O 占用了大量时间，否则您不必担心。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:26:00.080

所有的函数`<stdio.h>`都有自己的缓冲。有例外，但一般来说，我希望它们针对它们运行的​​系统进行优化，例如缓冲区大小。`setvbuf()`在这种情况下，除了少数非常特殊的情况外，我希望使用是一种悲观情绪。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:26:18.307

该`std::istream`对象`std::streambuf`要求与其关联的对象实际执行读取操作。

istream( `ifstream`) 的文件实现在内部有一个`fstreambuf`可以做到这一点。

# iphone - 如何在每个切片的 piechat 中显示文本

> ID：10006162
> 
> 赞同：2
> 
> 时间：2012-04-04T06:46:40.897
> 
> 标签：iphone, objective-c, ios, core-plot, pie-chart

我已经使用核心绘图框架实现了一个饼图，我需要知道如何在每个切片内显示文本。

这是.m源代码：

```
@implementation ViewController

@synthesize graph,pieData;

// Implement loadView to create a view hierarchy programmatically
// without using a nib.
- (void)loadView {
    CPTGraphHostingView * newView = [[CPTGraphHostingView alloc]initWithFrame:
                                     [[UIScreen mainScreen] applicationFrame]];
    self.view = newView;
    [newView release];
}

// Implement viewDidLoad to do additional setup after loading the view, 
// typically from a nib.
- (void)viewDidLoad {
    [super viewDidLoad];

    graph = [[CPTXYGraph alloc] initWithFrame: self.view.bounds];   
    CPTGraphHostingView *hostingView = (CPTGraphHostingView *)self.view;
    hostingView.hostedGraph = graph;

    CPTPieChart *pieChart = [[CPTPieChart alloc] init];
    pieChart.dataSource = self;
    pieChart.delegate = self;
    pieChart.pieRadius = 100.0;
    pieChart.identifier = @"PieChart1";
    pieChart.startAngle = M_PI_4;
    //pieChart.sliceDirection = CPTPieDirectionCounterClockwise;
    pieChart.sliceDirection = CPTPieDirectionClockwise;

    self.pieData=  [NSMutableArray arrayWithObjects:
                    [NSNumber numberWithDouble:90.0], 
                    [NSNumber numberWithDouble:20.0],
                    [NSNumber numberWithDouble:30.0],
                    [NSNumber numberWithDouble:40.0],
                    [NSNumber numberWithDouble:50.0], 
                    [NSNumber numberWithDouble:60.0], 
                    nil];

    CPTTheme *theme = [CPTTheme themeNamed:kCPTDarkGradientTheme];
    [graph applyTheme:theme];

    [graph addPlot:pieChart];
    [pieChart release];
}

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot {
    return [self.pieData count];
}

-(NSNumber *)numberForPlot:(CPTPlot *)plot
 field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index {
    return [self.pieData objectAtIndex:index];
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
}

- (void)viewDidUnload {
}

- (void)dealloc {
    [pieData release];
    [graph release];
    [super dealloc];
}

- (void)pieChart:(CPTPieChart *)plot 
sliceWasSelectedAtRecordIndex:(NSUInteger)index {
    NSLog(@"Slices are selected: index = %d", index);
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T23:31:08.203

使用该`labelOffset`物业。正值会将标签定位在绘图之外，负值会将它们定位在内部。

# c#-4.0 - 拆分字符串数组

> ID：10006163
> 
> 赞同：2
> 
> 时间：2012-04-04T06:46:42.413
> 
> 标签：c#-4.0

将大小为 5 的字符串数组分成两部分 2 和 3 字符串数组？

原版

```
String Array[] = {"asjjsjamsssssssssssssssssssssss",
                  "hcb j m dnfijvkfkjvkjdffkbdfblllfl",
                  "bjbvfumfkkf md",
                  "jdsjvjsdjvjjjjdjjdj",
                  "bsdjdddddddddddddddddddddddd"} 
```

结果字符串包含 2 和 3 个字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:51:58.330

在下面试试这个。

```
 string[] arr  = {"asjjsjamsssssssssssssssssssssss",
                               "hcb j m dnfijvkfkjvkjdffkbdfblllfl",
                                "bjbvfumfkkf md",
                                "jdsjvjsdjvjjjjdjjdj",
                                  "bsdjdddddddddddddddddddddddd"};

var first = arr.Take(2).ToArray();
var second = arr.Skip(2).Take(3).ToArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:52:49.880

除非数组中的元素数量是偶数，否则您将永远无法破坏字符串数组。重新考虑您的操作。

# java - 在Java中将字符串转换为“字符”数组

> ID：10006165
> 
> 赞同：129
> 
> 时间：2012-04-04T06:46:48.580
> 
> 标签：java, arrays, string, character

我想将 a 转换为[Character](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html)`String`类的对象数组，但我无法执行转换。我知道我可以使用该方法将字符串转换为原始数据类型“char”的数组，但它无助于将字符串转换为[字符](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html)类型的对象数组。`toCharArray()`

我该怎么做呢？

* * *

## 回答 #1

> 赞同：204
> 
> 时间：2012-04-04T06:52:54.583

用这个：

```
String str = "testString";
char[] charArray = str.toCharArray();
Character[] charObjectArray = ArrayUtils.toObject(charArray); 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2014-12-29T14:47:33.610

[一个带有java-8 的](/questions/tagged/java-8 "显示标记为“java-8”的问题")班轮：

```
String str = "testString";

//[t, e, s, t, S, t, r, i, n, g]
Character[] charObjectArray = 
    str.chars().mapToObj(c -> (char)c).toArray(Character[]::new); 
```

它的作用是：

*   得到一个`IntStream`字符（你可能还想看看`codePoints()`）
*   将每个“字符”值映射到`Character`（您需要强制转换为实际上说它真的是 a `char`，然后 Java 会自动将其装箱为`Character`）
*   通过调用获取结果数组`toArray()`

* * *

## 回答 #3

> 赞同：34
> 
> 时间：2012-04-04T06:51:27.290

为什么不自己写一个小方法

```
public Character[] toCharacterArray( String s ) {

   if ( s == null ) {
     return null;
   }

   int len = s.length();
   Character[] array = new Character[len];
   for (int i = 0; i < len ; i++) {
      /* 
      Character(char) is deprecated since Java SE 9 & JDK 9
      Link: https://docs.oracle.com/javase/9/docs/api/java/lang/Character.html
      array[i] = new Character(s.charAt(i));
      */
      array[i] = s.charAt(i);
   }

   return array;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-07-29T03:37:08.853

**将字符串转换为字符数组，然后将字符数组转换回字符串**

```
 //Givent String
   String given = "asdcbsdcagfsdbgdfanfghbsfdab";

   //Converting String to Character Array(It's an inbuild method of a String)
   char[] characterArray = given.toCharArray();
   //returns = [a, s, d, c, b, s, d, c, a, g, f, s, d, b, g, d, f, a, n, f, g, h, b, s, f, d, a, b] 
```

**//一种方法：将字符数组转换回字符串**

```
 int length = Arrays.toString(characterArray).replaceAll("[, ]","").length();

  //First Way to get the string back
  Arrays.toString(characterArray).replaceAll("[, ]","").substring(1,length-1)
  //returns asdcbsdcagfsdbgdfanfghbsfdab
  or 
  // Second way to get the string back
  Arrays.toString(characterArray).replaceAll("[, ]","").replace("[","").replace("]",""))
 //returns asdcbsdcagfsdbgdfanfghbsfdab 
```

**//第二种方式：将字符数组转换回字符串**

```
String.valueOf(characterArray); 
```

**//第三种方式：将字符数组转换回字符串**

```
Arrays.stream(characterArray)
           .mapToObj(i -> (char)i)
           .collect(Collectors.joining()); 
```

**将字符串转换为字符数组**

```
Character[] charObjectArray =
                           givenString.chars().
                               mapToObj(c -> (char)c).
                               toArray(Character[]::new); 
```

**将字符数组转换为字符数组**

```
 String givenString = "MyNameIsArpan";
char[] givenchararray = givenString.toCharArray();

     String.valueOf(givenchararray).chars().mapToObj(c -> 
                         (char)c).toArray(Character[]::new); 
```

**将字符数组转换为字符数组的好处您可以使用 Arrays.stream 函数来获取子数组**

```
String subStringFromCharacterArray = 

              Arrays.stream(charObjectArray,2,6).
                          map(String::valueOf).
                          collect(Collectors.joining()); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-04-04T06:51:20.037

在这种情况下，您必须编写自己的方法。使用循环并使用获取每个字符`charAt(i)`并将其设置为`Character[]`使用`arrayname[i] = string.charAt[i]`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-04-04T06:55:23.167

`String#toCharArray`返回一个数组`char`，你拥有的是一个数组`Character`。`char`在大多数情况下，您是否使用或`Character`使用[autoboxing](http://www.java2s.com/Tutorial/Java/0040__Data-Type/AutoboxingUnboxingBooleanandCharacterValues.htm)并不重要。您的问题是数组没有自动装箱，我建议您使用 char ( `char[]`) 数组。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-04-04T07:18:44.173

我希望下面的代码对您有所帮助。

```
String s="Welcome to Java Programming";
char arr[]=s.toCharArray();
for(int i=0;i<arr.length;i++){
    System.out.println("Data at ["+i+"]="+arr[i]);
} 
```

它正在工作，输出是：

```
Data at [0]=W
Data at [1]=e
Data at [2]=l
Data at [3]=c
Data at [4]=o
Data at [5]=m
Data at [6]=e
Data at [7]= 
Data at [8]=t
Data at [9]=o
Data at [10]= 
Data at [11]=J
Data at [12]=a
Data at [13]=v
Data at [14]=a
Data at [15]= 
Data at [16]=P
Data at [17]=r
Data at [18]=o
Data at [19]=g
Data at [20]=r
Data at [21]=a
Data at [22]=m
Data at [23]=m
Data at [24]=i
Data at [25]=n
Data at [26]=g 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-05-08T04:49:33.653

此方法以字符串为参数并返回字符数组

```
/**
 * @param sourceString
 *            :String as argument
 * @return CharcterArray
 */
public static Character[] toCharacterArray(String sourceString) {
    char[] charArrays = new char[sourceString.length()];
    charArrays = sourceString.toCharArray();
    Character[] characterArray = new Character[charArrays.length];
    for (int i = 0; i < charArrays.length; i++) {
        characterArray[i] = charArrays[i];
    }
    return characterArray;
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-04T06:56:51.377

另一种方法。

```
String str="I am a good boy";
    char[] chars=str.toCharArray();

    Character[] characters=new Character[chars.length];
    for (int i = 0; i < chars.length; i++) {
        characters[i]=chars[i];
        System.out.println(chars[i]);
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-28T01:34:51.597

如果您正在使用 JTextField，那么它可能会有所帮助..

```
public JTextField display;
String number=e.getActionCommand();

display.setText(display.getText()+number);

ch=number.toCharArray();
for( int i=0; i<ch.length; i++)
    System.out.println("in array a1= "+ch[i]); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-12-18T21:18:25.540

链接总是最好的：D

```
String str = "somethingPutHere";
Character[] c = ArrayUtils.toObject(str.toCharArray()); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-06-27T08:24:08.963

如果您不想依赖第三方 API，这里是 JDK7 或更低版本的工作代码。我没有像上面其他解决方案那样实例化临时字符对象。foreach 循环更具可读性，看看你自己:)

```
public static Character[] convertStringToCharacterArray(String str) {
    if (str == null || str.isEmpty()) {
        return null;
    }
    char[] c = str.toCharArray();
    final int len = c.length;
    int counter = 0;
    final Character[] result = new Character[len];
    while (len > counter) {
        for (char ch : c) {
            result[counter++] = ch;
        }
    }
    return result;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-08-29T15:43:02.603

我在**java.io中使用了****StringReader**类。其中一个函数将字符串的内容读入数组。**`read(char[] cbuf)`**

 **```
String str = "hello";
char[] array = new char[str.length()];
StringReader read = new StringReader(str);

try {
    read.read(array); //Reads string into the array. Throws IOException
} catch (IOException e) {
    e.printStackTrace();
}

for (int i = 0; i < str.length(); i++) {
        System.out.println("array["+i+"] = "+array[i]);
} 
```

运行它会给你输出：

```
array[0] = h
array[1] = e
array[2] = l
array[3] = l
array[4] = o 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-05-26T11:06:42.280

* * *

```
String[] arr = { "abc", "cba", "dac", "cda" };
    Map<Character, Integer> map = new HashMap<>();
    String string = new String();
    for (String a : arr) {
        string = string.concat(a);

    }
    System.out.println(string);

    for (int i = 0; i < string.length(); i++) {
        if (map.containsKey(string.charAt(i))) {
            map.put(string.charAt(i), map.get(string.charAt(i)) + 1);

        } else {
            map.put(string.charAt(i), 1);

        }
    }
    System.out.println(map); 
```

//输出 {a=4, b=2, c=4, d=2}**

# java - 如何检查参数类的类型？

> ID：10006166
> 
> 赞同：1
> 
> 时间：2012-04-04T06:47:06.803
> 
> 标签：java, android, instanceof

我有以下方法：

```
public static String getServiceUri(Class<?> c) {

 // I'd like to check which type the parameter is...
 if(c.getClass().equals(MyClass.class)){
     do stuff 1
 } else {
     do stuff 2
 }
} 
```

调用方法： `getServiceUri(MyClass.class);`

我`getServiceUri`想根据 ServiceClass 的类型调用 WebService。

我知道 equals 将比较对象实例，但在这种情况下，我试图发现对象的类型。

有人知道我如何使用这种方法进行比较吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T06:50:13.197

```
instanceof operator is the best choice.. 
```

你可以做这样的事情

```
if(c instanceof MyClass){
 //do your stuff

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T21:51:30.003

```
public static String getServiceUri(Class<?> classParam) {

    if(classParam instanceof MyClass){

     } 
} 
```

This is WRONG. It does not even compile because `classParam` needs to be an actual instance(object) to use the instanceof operator: hence the name.

If you want to know if the classParam is exactly equal to MyClass.class:

```
public static String getServiceUri(Class<?> c) {

    if(classParam == MyClass.class){
    }
} 
```

However, if you want to check the entire hierarchy of classParam against MyClass then you can do `classParam.isAssignableFrom(MyClass.class)`

# mysql - 用于消息系统的 Mysql 查询。一个我想不通的小错误

> ID：10006167
> 
> 赞同：1
> 
> 时间：2012-04-04T06:47:07.907
> 
> 标签：mysql

我有一个基本的消息系统设置，我使用相同的查询来显示发送和接收的消息。它工作得很好，但我需要为 exp 和 dest 获取 fbook 字段。我想创建两个查询，如果用户发送了他正在查看的消息，则使用一个，如果消息已收到，则使用另一个查询，但也许有更好的方法。

```
+-----+------+------+----------+----------------+---------------------+------+
| id  | exp  | dest | message  | msg_title      | timestamp           | view |
+-----+------+------+----------+----------------+---------------------+------+
| 114 |  243 |  245 | From 243 | Message to 245 | 2012-04-04 09:26:52 |    0 | 
+-----+------+------+----------+----------------+---------------------+------+ 
```

询问

```
SELECT a.*, b.fbook FROM messages a 
                            JOIN users b ON a.exp=b.id
                            WHERE a.id = 114; 
```

用户表

```
+------------------------+--------------+------+-----+---------------------+----------------+
| Field                  | Type         | Null | Key | Default             | Extra              |
+------------------------+--------------+------+-----+---------------------+----------------+
| id                     | int(11)      | NO   | PRI | NULL                |  auto_increment | 
| username               | varchar(50)  | NO   |     | NULL                |                  |  
| fbook                  | bigint(64)   | YES  |     | NULL                |                    | 
+------------------------+--------------+------+-----+---------------------+----------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:59:30.743

你想做这样的事情：

```
SELECT a.*, b.fbook AS `exp-fbook`, c.fbook AS `dest-fbook`
FROM messages a 
JOIN users b ON a.exp=b.id
JOIN users c ON a.dest=c.id
WHERE a.id = 243 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:59:59.190

对同一个表使用两个 JOIN。如果使用 LEFT JOIN 比 INNER JOINS 性能更好。

```
SELECT
    m.*, uexp.fbook, udest.fbook
FROM messages m 
    LEFT JOIN users uexp ON m.exp = uexp.id
    LEFT JOIN users udest ON m.dest = udest.id
WHERE m.id = 243; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:02:58.260

您可以尝试（我认为您想要的 a.id 是 114 而不是 243）：

```
SELECT a.*, ue.fbook AS fbokkExp, ud.fbook AS fbookDest
FROM messages a 
JOIN users ue ON a.exp = ue.id
JOIN users ud ON a.dest = ud.id
WHERE a.id = 114; 
```

# c# - 返回 NavigationWindow 后出现 NullPointerException

> ID：10006168
> 
> 赞同：0
> 
> 时间：2012-04-04T06:47:13.597
> 
> 标签：c#, wpf, nullpointerexception, navigationwindow

那是我的导航窗口

```
<NavigationWindow x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="800" Width="600" Source="Page1.xaml"> 
```

那是我的page1

```
<Page x:Class="WpfApplication1.Page1"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
  mc:Ignorable="d" 
  d:DesignHeight="600" d:DesignWidth="800"
Title="Page1" Name="IndexPage">

<ListView Name="myListView" ItemsSource="{Binding ElementName=IndexPage, Path=SeriesCollection}" ScrollViewer.HorizontalScrollBarVisibility="Disabled" IsSynchronizedWithCurrentItem="True" SelectionChanged="handleSelected">
    <ListView.ItemsPanel >
        <ItemsPanelTemplate>
            <WrapPanel>
            </WrapPanel>
        </ItemsPanelTemplate>            
    </ListView.ItemsPanel>
    <ListView.ItemTemplate>
        <DataTemplate>
            <StackPanel >
                <Image Width="214" Height="317" Source="{Binding Image}"/>
                <Label Content="{Binding Name}" />
            </StackPanel>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

第 2 页只是一个空骨架

后面的代码

```
namespace WpfApplication1
{
/// <summary>
/// Interaktionslogik für Page1.xaml
/// </summary>
public partial class Page1 : Page
{
    private ObservableCollection<Series> _series =
      new ObservableCollection<Series>();

    public ObservableCollection<Series> SeriesCollection
    {
        get { return _series; }
    }

    public Page1()
    {
        InitializeComponent();

        DirectoryInfo baseDir = new DirectoryInfo(@"C:\Serien");
        DirectoryInfo[] dirs = baseDir.GetDirectories();
        foreach (DirectoryInfo dir in dirs)
        {
            Series serie = new Series(dir);
            Console.WriteLine("adding " + serie.Name);
            _series.Add(serie);
        }

        Console.WriteLine(_series.Count);
    }

    public void handleSelected(object sender, RoutedEventArgs args)
    {
        Series currentSerie = (Series) myListView.Items.CurrentItem;

        Page2 page = new Page2();
        this.NavigationService.Navigate(page);

        Console.WriteLine(currentSerie.Name);
        Console.WriteLine(currentSerie.GetType());
        Console.WriteLine(currentSerie.ToString());
    }
}
} 
```

所以我点击一个项目来触发 SelectionChanged 事件以在我导航到 page2 的 SelectionChanged 中处理它，到目前为止一切都很好。

然后我使用导航窗口中的后退按钮并遇到 NullpointerException

```
this.NavigationService.Navigate(page); 
```

我什至不知道为什么会触发此方法。所以很明显我在做一些愚蠢的事情。请告诉我它是什么。感谢您的时间和努力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:33:25.297

这里的问题是您处理了错误的事件。我假设您想通过单击 ListViewItem 打开 Page2。因此，您应该使用鼠标事件而不是 SelectionChanged。

例如，您可以在 DataTemplate 中订阅 StackPanel MouseDown 事件：

```
<DataTemplate>
    <StackPanel Background="Transparent"
                MouseDown="StackPanel_MouseDown">
        <Image Width="214" Height="317" Source="{Binding Image}"/>
        <Label Content="{Binding Name}"/>
    </StackPanel>
</DataTemplate> 
```

您可以使用以下方法访问单击的系列：

```
private void StackPanel_MouseDown(object sender, MouseButtonEventArgs e)
{
    var currentSerie = (Series)((StackPanel)sender).DataContext;
    ...
} 
```

**UPD**如果您需要真正的点击，您可以使用这样的技巧：

```
<DataTemplate>
    <Button Click="Button_Click">
        <Button.Template>
            <ControlTemplate TargetType="Button">
                <ContentPresenter/>
            </ControlTemplate>
        </Button.Template>
        <StackPanel Background="Transparent">
            <Image Width="214" Height="317" Source="{Binding Image}"/>
            <Label Content="{Binding Name}"/>
        </StackPanel>
    </Button>
</DataTemplate> 
```

我们使用像视图模型这样能够处理点击的按钮。

# php - 错误：列计数与第 1 行的值计数不匹配

> ID：10006171
> 
> 赞同：1
> 
> 时间：2012-04-04T06:47:18.490
> 
> 标签：php, mysql

我收到此错误是我的代码

```
if(isset($_POST['submit']))
    {
     $projTit=mysql_escape_string($_POST['projecttitle']);
     $projCat=mysql_escape_string($_POST['projectcategory']);
     $budget=intval(mysql_escape_string($_POST['budget']));
     $description=mysql_escape_string($_POST['editor1']);
     $query=sprintf("insert into projects value('%s','%s','%s',%d)",
            $projTit,$description,$projCat,$budget);
     if (!mysql_query($query)){
         die('Error: ' . mysql_error());
         }
        echo '<p class="record">Your Record has been Added<p>';
    }

    ?> 
```

我已尝试写入 %d`''`但仍无法正常工作。

![](../Images/f27bb0ef57b38f2f7cd6b27d4bff47aa.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T07:04:28.897

您的表格有五列。但是，您没有为该`Project_Id`列提供值。这会给你你提到的错误。

我知道您没有提供价值，因为它可能是`PRIMARY KEY`自动增量的。要告诉 MySQL 您故意不为该列传递值，**您应该添加`NULL`作为第一个值。**

```
value(NULL, '%s','%s','%s',%d) 
```

但是，您确实应该明确指定要插入的列，以防您在将来添加新列。

```
INSERT INTO projects (col1, col2, col3, col4) value ('%s','%s','%s',%d) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:59:37.180

您应该**真正**指定列名，否则如果您稍后添加列，您的应用程序将中断，即使它具有可用的默认值：

```
INSERT INTO projects
    (Project_Title, Project_Description, Project_Category, Project_Budget)
VALUES
    (...) 
```

尤其是因为您有一个`auto_increment`ID 列，这很有意义；否则，您总是必须`NULL`在查询中指定它。

因此，最简单（但也是最丑陋）的修复方法是：

```
$query=sprintf("insert into projects value (null, '%s','%s','%s',%d)",
        $projTit,$description,$projCat,$budget); 
```

好的解决方法是：

```
$query = sprintf("
    INSERT INTO projects
        (Project_Title, Project_Description, Project_Category, Project_Budget)
    VALUES
        ('%s', '%s', '%s', %d)
    ", $projTit,$description,$projCat,$budget); 
```

顺便说一句，考虑使用 PDO - 然后你可以使用类似于格式字符串的东西，但不必处理转义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T06:49:59.700

尝试命名要填充的列

```
insert into projects (col1, col2, col3) values (...) 
```

# php - 未定义的私有变量

> ID：10006173
> 
> 赞同：1
> 
> 时间：2012-04-04T06:47:23.983
> 
> 标签：php, warnings

我得到：

> 未定义变量：密码
> 未定义变量：主机
> 未定义变量：用户

我只是好奇为什么我会收到这样的通知，尽管该变量已在类的私有部分中定义。

我不能在成员函数中使用类的私有数据成员吗（因为这会破坏 OOP 的整个概念）？

php文件是：

```
class data_base //helps handling permissins
    {
    private $host;
    private $user;
    private $password;

    public function feed_data($hst, $usr, $pwd)
        {
            $host=$hst;
            $user=$usr;
            $password=$pwd;
        }
    public function get_data()
        {
            $info=array("host"=>" ", "user"=>" ", "password"=>" ");
            $info['host']=$host;
            $info['user']=$user;
            $info['password']=$password;    
            return $info;
        }
      }

   $user1=new data_base; 
   $user2=new data_base;

   $user1->feed_data("localhost", "root", ""); //enter details for user 1 here
   $user2->feed_data("", "", ""); //enter details for user 2 here

   $perm_add=$user1->get_data();
   $perm_view=$user2->get_data(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:49:30.420

在 PHP 中，您必须将属性称为属性

```
$this->host;
// instead of
$host; 
```

与 java`$host`中的示例不同，它*始终*是局部变量，因此在这里未定义。

作为旁注：你可以写

```
$info=array("host"=>" ", "user"=>" ", "password"=>" ");
$info['host']=$host;
$info['user']=$user;
$info['password']=$password;    
return $info; 
```

作为

```
return array(
    'host'     => $this->host,
    'user'     => $this->user,
    'password' => $this->password
); 
```

它很短而且更可靠（不需要临时变量）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:49:40.983

在 PHP 中，要访问实例变量，您需要使用`$this->varname`.
Just`$varname`始终是方法的局部变量。

# html - 显示二 s 并排

> ID：10006175
> 
> 赞同：35
> 
> 时间：2012-04-04T06:47:25.877
> 
> 标签：html, css, css-float

我的目标是`<div>`并排显示两个 s，两个 s 的内容`<div>`在顶部对齐。我不希望第二个中的长文本`<div>`包裹在第一个下方。

最后，我不想设置第二个的宽度，`<div>`因为我需要标记以不同的宽度工作。

示例标记位于[http://jsfiddle.net/rhEyM/](http://jsfiddle.net/rhEyM/)下方。

**CSS**

```
.left-div {
    float: left;
    width: 100px;
    height: 20px;
    margin-right: 8px;
    background-color: linen;
}
.right-div {
    float: left;
    margin-left: 108px;
    background-color: skyblue;
}​ 
```

**HTML**

```
<div class="left-div">
    &nbsp;
</div>
<div class="right-div">
    My requirements are <b>[A]</b> Content in the two divs should line
    up at the top, <b>[B]</b> Long text in right-div should not wrap
    underneath left-div, and <b>[C]</b> I do not want to specify a
    width of right-div. I don't want to set the width of right-div
    because this markup needs to work within different widths.
</div> 
```

​</p>

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-09-18T00:43:14.903

尝试使用 Flex，因为那是 html5 的新标准。

[http://jsfiddle.net/maxspan/1b431hxm/](http://jsfiddle.net/maxspan/1b431hxm/)

```
<div id="row1">
    <div id="column1">I am column one</div>
    <div id="column2">I am column two</div>
</div>

#row1{
    display:flex;
    flex-direction:row;
justify-content: space-around;
}

#column1{
    display:flex;
    flex-direction:column;

}

#column2{
    display:flex;
    flex-direction:column;
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-04T06:50:13.027

我从第二个 div 中删除了浮动以使其工作。

[http://jsfiddle.net/rhEyM/2/](http://jsfiddle.net/rhEyM/2/)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-04T06:50:28.737

**试试这个：**（[http://jsfiddle.net/TpqVx/](http://jsfiddle.net/TpqVx/)）

```
.left-div {
    float: left;
    width: 100px;
    /*height: 20px;*/
    margin-right: 8px;
    background-color: linen;
}
.right-div {

    margin-left: 108px;
    background-color: lime;
}​​ 
```

* * *

```
<div class="left-div">
    &nbsp;
</div>
<div class="right-div">
    My requirements are <b>[A]</b> Content in the two divs should line up at the top, <b>[B]</b> Long text in right-div should not wrap underneath left-div, and <b>[C]</b> I do not want to specify a width of right-div. I don't want to set the width of right-div because this markup needs to work within different widths.
</div>
<div style='clear:both;'>&nbsp;</div> 
```

***提示：***

*   只`float:left`在你最左边的 div 中**使用**。
*   没有真正的理由使用`height`，但无论如何......
*   `<div 'clear:both'>&nbsp;</div>`在最后一个 div 之后使用的好习惯。

# mysql - mysql show processlist 查询显示 state = null

> ID：10006179
> 
> 赞同：6
> 
> 时间：2012-04-04T06:47:35.327
> 
> 标签：mysql, thread-state, processlist

我有一个脚本运行一批非常相似的查询。
所有这些，除了一个，运行没有任何问题。
只有一个查询卡住了。
在“show processlist”中，查询的 state=null
根据文档，show processlist 应该只为“show processlist”线程本身报告“State=null”。

```
 Server version: 5.0.67 MySQL Community Server (GPL)
    mysql> show processlist;
    +---------+--------+-----------+--------------+---------+------+-------+------------------------------------------------------------------------------------------------------+
    | Id      | User   | Host      | db           | Command | Time | State | Info                                                                                                 |
    +---------+--------+-----------+--------------+---------+------+-------+------------------------------------------------------------------------------------------------------+
    | 3866613 | user   | localhost | db_name      | Query   | 1986 | NULL  | select log_time,log_action,log_action_id,log_object_id, @abcde:=if(log_action='abcde',to_            |
    | 3873414 | root   | localhost | NULL         | Query   |    0 | NULL  | show processlist                                                                                     |
    +---------+--------+-----------+--------------+---------+------+-------+------------------------------------------------------------------------------------------------------+
    2 rows in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:52:14.813

可能是您的 mysql 版本的错误，请查看[此错误](http://bugs.mysql.com/bug.php?id=26460)以获取更多信息。

# sqlite - 如何将 Microsoft Access 数据库保存为 .sqlite 数据库？

> ID：10006187
> 
> 赞同：1
> 
> 时间：2012-04-04T06:48:06.510
> 
> 标签：sqlite, ms-access

是否有任何附加组件或可以使 Microsoft Access 将其数据库保存为 .sqlite 的东西？

或者你知道我可以转换它们的任何其他方式，两种方式。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:24:23.987

如果您可以找到一个应用程序（libreoffice？）或具有绑定/阅读器访问的语言，或者如果您可以将访问“db”转换为理智的东西，那么从那里转到 sqlite 应该不会太难。您需要的代码可能特定于您的特定数据库，而不是通用的 Access->sqlite 转换器。

实际上，您可能会看到 access 是否可以通过 ODBC 直接与 sqlite 对话。Longshot，但这可能最接近您问题的完整答案。

对于初学者，您可以看到这些：

*   [使用 Python 读取 Microsoft Access 数据库需要什么？](https://stackoverflow.com/questions/853370/what-do-i-need-to-read-microsoft-access-databases-using-python)
*   [如何用python处理.mdb访问文件](https://stackoverflow.com/questions/3620539/how-to-deal-with-mdb-access-files-with-python)
*   [从 MS-Access 联合选择查询中的 SQLite 语法错误](https://stackoverflow.com/questions/8329513/sqlite-syntax-error-in-union-select-query-from-ms-access)
*   [如何从 MS Access 内部使用 sqlite 数据库？](https://stackoverflow.com/questions/2513121/how-to-use-sqlite-database-from-inside-ms-access)
*   ODBC/JDBC 资源
*   您喜欢的语言的绑定和库

# dojo - data-dojo-type 和 dojotype 有什么区别？

> ID：10006192
> 
> 赞同：12
> 
> 时间：2012-04-04T06:49:00.287
> 
> 标签：dojo

dojo 文档中提到了两种**类型声明。**它们是`data-dojo-type`和`dojotype`。

例如，

```
dojoType="dojox.grid.DataGrid"

data-dojo-type="dojox.grid.DataGrid" 
```

两者在所有主要浏览器中都可以正常工作。但我不明白，*data-dojo-type 和 dojotype 有什么区别？*

我应该在哪里使用`dojoType`？我应该在哪里使用`data-dojo-type`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T06:54:05.613

我认为它是同一事物的新语法，也许它的功能略有不同，因为它针对 html5 进行了调整，您可以[在此处](http://dojotoolkit.org/features/1.6/html5data-attributes)阅读更多内容。无论如何，从我所看到的建议使用 data-dojo-type ...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-29T18:38:36.487

来自 dojo 1.6 文档：

dojoType 属性已被弃用，在 2.0 中将不受支持。将所有出现的 dojoType 替换为 data-dojo-type，因为其行为基本相同，但需要注意以下几点：

> 使用 data-dojo-type 时，所有小部件属性必须存储在一个属性上：data-dojo-props

请参阅[http://dojotoolkit.org/reference-guide/1.9/releasenotes/1.6.html](http://dojotoolkit.org/reference-guide/1.9/releasenotes/1.6.html)

# android - 试图画一个按钮

> ID：10006193
> 
> 赞同：0
> 
> 时间：2012-04-04T06:49:03.453
> 
> 标签：android, android-widget

我正在尝试绘制一个以图像为背景的按钮。这是我的xml：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent"
android:background="@drawable/background"
android:orientation="vertical" >

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:layout_marginTop="13dp"
    android:background="@drawable/button_bg"
    android:text="Break Record"
    android:textColor="#2c4417"
    android:textSize="19dp"
    android:textStyle="bold" >
</Button>

</LinearLayout> 
```

在图形布局视图上，它看起来像我想要的那样：
![在此处输入图像描述](../Images/d9a21a1af7a28f064eb758b7912623d6.png)

但是在模拟器上，按钮占据了屏幕的整个宽度：
![在此处输入图像描述](../Images/dca7c7eea5ff2e87f3ead8110d954d66.png)

我已经多次阅读规范，但无法理解我的错误是，
如何编写按钮 xml，以便按钮在模拟器（和所有设备..）上看起来像在 Eclipse 的图形布局中一样？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T06:55:26.190

按钮的宽度是由于`@drawable/button_bg`. 如果背景图像对于不同的密度是恒定的，那么 hdpi 应该按钮尺寸较小，另一方面，mdpi 和 ldpi 设备将需要更多宽度来显示相同​​的按钮。确认您有不同的背景图像，并且它们与它们的密度有关。

*PS 分别以 hdpi、mdpi 和 ldpi 密度运行三个不同的仿真器并观察布局。*

# c++ - 使用 memcpy 时崩溃？

> ID：10006198
> 
> 赞同：0
> 
> 时间：2012-04-04T06:49:33.647
> 
> 标签：c++, api

我正在尝试使用 memcpy 将文件从一个位置复制到另一个位置。

每次我作为源提供的文件路径不存在时，我都会崩溃。

这是一个正确的行为，如果是，那么我该如何防止崩溃。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T06:52:09.397

`memcpy`的目的不是复制文件，而是将内存块从一个地方复制到另一个地方。根据平台，我确信有更好的方法在目录之间复制文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:08:16.153

不不不！以神圣记忆的名义，你在做什么？`memcpy`严格用于内存传输。例如，假设您在图形应用程序中有一堆顶点，您想将它们提供给顶点缓冲区而不实际传递指针。这样，您就可以复制代表顶点的整个字节数组，然后再复制它们 - 它们是底层 API 的问题。这就是预期的用途。另外，请注意如何使用它。您指定要复制的字节数。确保它是准确的。在最低级别，没有类型之类的东西，如果你给它太多，它会造成严重破坏 - 撕成“属于”其他变量的字节。如果幸运的话，这样的代码会杀死你的应用程序。如果你不是 - 它会继续工作。

对于文件读/写/复制，您必须参考标准 C/C++ 文件输入/输出（或一些更精细的方法，由底层平台提供，如答案之一所建议的那样）。网上资源很多，这里就不*重复造轮子*了。希望它能让你更好地了解`memcpy`它的用途。

# ios - 以编程方式将 iPhone 重置为出厂设置

> ID：10006200
> 
> 赞同：5
> 
> 时间：2012-04-04T06:49:37.563
> 
> 标签：ios

有没有办法以编程方式将 iPhone 设置重置为出厂默认设置？我们在设置应用程序的常规部分有一个重置选项。我们可以以编程方式访问它吗？

谢谢苏德希尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:54:02.493

SDK 不支持此功能。您可能可以用越狱手机做一些事情（这显然会限制分发），但通过官方 SDK，没有任何办法。

# c# - 默认绑定器可以反序列化复杂的 JSON obj 吗？

> ID：10006202
> 
> 赞同：0
> 
> 时间：2012-04-04T06:49:44.247
> 
> 标签：c#, ajax, json

我想从客户端发送一个 JSON 对象到

MVC 控制器上的操作。

就像是：

```
{ A: {1,2,3} , B: 3, C: {d:{1,2,3} ,4}} } 
```

我可以创建一个具有相同结构和默认活页夹的对象吗

会知道反序列化吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:18:26.630

是的你可以。看看这篇文章：[将复杂的 JavaScript 对象发布到 ASP.NET MVC 控制器](http://www.nickriggs.com/posts/post-complex-javascript-objects-to-asp-net-mvc-controllers/)

下载本页提供的源代码并使用 $.postify jquery 插件。

# django - 站点 filebrowser.filebrowser 的目录“上传/”不存在

> ID：10006203
> 
> 赞同：1
> 
> 时间：2012-04-04T06:49:44.577
> 
> 标签：django, django-filebrowser

我已经设法使用 django-filebrowser 根据以下文档通过 TinyMCE 上传文件：http: [//django-filebrowser.readthedocs.org/en/latest/quickstart.html](http://django-filebrowser.readthedocs.org/en/latest/quickstart.html)

我已经将文件夹的引用`tiny_mce.js`和`tinymce_setup.js`来自`Grappeli`文件夹的引用放到了我的模板中，现在`TinyMCE`可以使用了。

但是当`filebrowser`使用这个命令进行测试时：`python manage.py test filebrowser`我得到这个错误：`Directory 'uploads/' for the site filebrowser.filebrowser does not exist.`当然所有的项目都会抛出这个错误。我在谷歌中搜索了这个错误但没有正确的结果！

注意：我已经让 Grappeli 工作了。

你怎么看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-28T16:28:15.260

对于那些在文件浏览器设置方面遇到问题的人，这是安装后需要设置的内容。

将其添加到您的 INSTALLED_APPS 中：

```
'filebrowser', 
```

在您的 urls.py 主文件中，添加文件浏览器模式：

```
from filebrowser.sites import site

urlpatterns = patterns('',
   (r'^admin/filebrowser/', include(site.urls)),
   ....) 
```

然后确保您设置了 MEDIA_ROOT，并且默认情况下 uploads/ 文件夹存在于 MEDIA_ROOT 中。您可以通过将 FILEBROWSER_DIRECTORY 设置为不同的值来更改上传文件夹：

```
FILEBROWSER_DIRECTORY = 'filebrowser_uploads/' 
```

然后我通常会进行测试，看看是否有任何问题以及原因：

```
python manage.py test filebrowser 
```

如果 MEDIA_ROOT 存在，我不知道为什么安装程序不会为其创建默认目录。相反，它会检查 MEDIA_ROOT + FILEBROWSER_DIRECTORY 是否存在，如果不存在则失败。[快速入门指南](http://django-filebrowser.readthedocs.org/en/latest/quickstart.html)中的更多信息。

# php - 如何使链接在页面上加载随机的 php ID？

> ID：10006205
> 
> 赞同：0
> 
> 时间：2012-04-04T06:49:56.200
> 
> 标签：php, mysql, html, refresh

数据库行 ID 与 URL 相关联，如下所示：

**第2 行**的页面变为 **site.com/index.php?id=2**

如果我手动刷新 index.php 它会显示一条随机记录，但自然不会在地址栏中显示记录 ID。

有没有办法让链接显示随机记录，同时在地址栏中显示 id 更改？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:53:12.097

不只是显示随机记录，而是选择记录的 id 并重定向到显示 id 的版本。

```
$randomId = // whatever method you use to choose it
header( "Location: http://site.com/index.php?id=$randomId" ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:56:31.743

**试试这个 ：**

```
$randomId = rand(0,100); // if let's say your post IDs go from 0 to 100
header( "Location: http://www.yourdomain.com/post.php?id=$randomId" ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:12:39.387

有多种方法可以做到这一点。

你可以像 Juhana 说的那样，使用[header 函数](http://php.net/manual/en/function.header.php)。这将通过页面重新加载将您重定向到另一个页面。

您可以使用 HTML5 更改地址栏，而无需使用[window.history](http://spoiledmilk.dk/blog/html5-changing-the-browser-url-without-refreshing-page)和[jQuery for AJAX](http://api.jquery.com/jQuery.ajax/)进行页面重新加载。

最安全的选择是 PHP 标头函数。请记住，在标题之前不要打印/回显任何内容。如果您仍然收到“标头已发送”，请使用[ob_clean()](http://nl3.php.net/manual/en/function.ob-clean.php)

# java - java中的图形绘制api（支持在运行时编辑/剪辑）

> ID：10006213
> 
> 赞同：1
> 
> 时间：2012-04-04T06:50:20.783
> 
> 标签：java, netbeans, desktop-application, rcp, netbeans-platform

需要有关支持在运行时编辑 netbeans 平台应用程序的图形绘图 java api 的建议。需要了解在生成的图表中通过鼠标单击和拖动进行更改的可能性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:58:48.960

看看[JChart2D](http://jchart2d.sourceforge.net/) : [ZoomableChart](http://jchart2d.sourceforge.net/docs/javadoc/info/monitorenter/gui/chart/ZoomableChart.html)，可能是你需要的东西。

我前一阵子用过。

*hth*

# mysql - 列名和撇号

> ID：10006216
> 
> 赞同：2
> 
> 时间：2012-04-04T06:50:52.013
> 
> 标签：mysql, database, hsqldb

我对 MySQL 很陌生，我对一个问题感到困惑：我有一个表，如果没有围绕列名的撇号，我无法在该表上执行查询，但对于其余表来说，这是可能的。我需要在没有撇号的情况下进行查询才能在 parrarel HSQL 数据库上执行相同的操作。它依赖于什么？MySQL 中的所有表都是 InnoDB。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:53:02.417

您的表/列名称有一个保留关键字。

[http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T06:54:07.173

如果列名是保留字或包含空格或特殊字符，则需要撇号。表名也是如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T07:14:47.547

使用未包含在其中的表名，`reserve words`则不需要撇号（`）。

# node.js - Mongoose 中的哪种 SchemaType 最适合时间戳？

> ID：10006218
> 
> 赞同：105
> 
> 时间：2012-04-04T06:51:11.333
> 
> 标签：node.js, mongodb, mongoose, schema

我正在使用 Mongoose、MongoDB 和 Node。

我想定义一个模式，其中一个字段是日期\时间戳。

我想使用这个字段来返回最近 5 分钟内更新的所有记录。

由于在 Mongoose 中我不能使用 Timestamp() 方法，我知道我唯一的选择是使用以下 Javascript 方法：

```
time : { type: Number, default: (new Date()).getTime() } 
```

这可能不是查询庞大数据库的最有效方式。如果有人可以分享一种更有效的实现方式，我将不胜感激。

有没有办法用 Mongoose 实现这一点并能够使用 MongoDB 时间戳？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-04-04T07:06:05.807

**编辑 - 2016 年 3 月 20 日**

Mongoose 现在支持[集合的时间戳](https://github.com/Automattic/mongoose/blob/master/History.md#4111--2015-10-12)。

请考虑[下面@bobbyz 的答案](https://stackoverflow.com/a/34398826/1139105)。也许这就是你要找的。

# 原始答案

Mongoose 支持一种`Date`类型（基本上是时间戳）：

```
time : { type : Date, default: Date.now } 
```

使用上面的字段定义，任何时候你保存一个未设置`time`字段的文档，Mongoose 都会用当前时间填充这个字段。

来源： http: [//mongoosejs.com/docs/guide.html](http://mongoosejs.com/docs/guide.html)

* * *

## 回答 #2

> 赞同：140
> 
> 时间：2015-12-21T15:11:43.740

当前版本的 Mongoose (v4.x) 具有时间戳作为模式的内置选项：

```
var mySchema = new mongoose.Schema( {name: String}, {timestamps: true} ); 
```

此选项添加`createdAt`和`updatedAt`带有时间戳的属性，`Date`并为您完成所有工作。每当您更新文档时，它都会更新`updatedAt`属性。[架构时间戳文档。](http://mongoosejs.com/docs/guide.html#timestamps)

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2019-08-23T08:09:23.327

如果您想为您的`createdAt`和`updatedAt`

```
const mongoose = require('mongoose');  
const { Schema } = mongoose;

const schemaOptions = {
  timestamps: { createdAt: 'created_at', updatedAt: 'updated_at' },
};

const mySchema = new Schema({ name: String }, schemaOptions); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-03-04T07:41:59.907

```
var ItemSchema = new Schema({
    name : { type: String }
});

ItemSchema.set('timestamps', true); // this will add createdAt and updatedAt timestamps 
```

文档：[https ://mongoosejs.com/docs/guide.html#timestamps](https://mongoosejs.com/docs/guide.html#timestamps)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-01T05:43:10.017

```
new mongoose.Schema({
    description: {
        type: String,
        required: true,
        trim: true
    },
    completed: {
        type: Boolean,
        default: false
    },
    owner: {
        type: mongoose.Schema.Types.ObjectId,
        required: true,
        ref: 'User'
    }
}, {
    timestamps: true
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-02-23T13:32:35.450

Mongoose 现在支持架构中的时间戳。

```
const item = new Schema(
  {
    id: {
      type: String,
      required: true,
    },
  { timestamps: true },
); 
```

这将在创建的每条记录上添加`createdAt`和`updatedAt`字段。

时间戳接口有字段

```
 interface SchemaTimestampsConfig {
    createdAt?: boolean | string;
    updatedAt?: boolean | string;
    currentTime?: () => (Date | number);
  } 
```

这将帮助我们选择我们想要的字段并覆盖日期格式。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T06:17:43.580

> 我想使用这个字段来返回最近 5 分钟内更新的所有记录。

这意味着您每次保存对象时都需要将日期更新为“现在”。也许你会发现这很有用：[Moongoose create-modified plugin](https://npmjs.org/package/mongoose-createdmodified)

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2019-06-13T08:16:19.610

第一的 ：`npm install mongoose-timestamp`

下一个：`let Timestamps = require('mongoose-timestamp')`

下一个：`let MySchema = new Schema`

下一个：`MySchema.plugin(Timestamps)`

下一个 ：`const Collection = mongoose.model('Collection',MySchema)`

然后你可以使用`Collection.createdAt`或`Collection.updatedAt`任何你想要的。

创建于：星期几月份日期年份格林威治标准时间 00:00:00

时间就是这种格式。

# java - “DriverManager.getConnection”方法中的 NullPointerException

> ID：10006220
> 
> 赞同：0
> 
> 时间：2012-04-04T06:51:19.477
> 
> 标签：java, android, mysql, windows, networking

我在通过 Java/Android 建立与 MySql 数据库的连接时遇到问题。我的网络中的 Windows7 计算机上有一个数据库文件 (MyDatabase.db)。当我从另一台 Windows7 计算机上开发时（该文件可通过 Windows 资源管理器访问，并且我可以通过 SQLDatabaseExplorer 更改数据库），以下代码有效，但在我的 Galaxy Tab 上安装我的应用程序时，“DriverManager. getConnection()" 返回空值。

```
 try {
           String url = "http://192.168.178.21/Users/test/userdata/Database/MyDatabase.db";
           Class.forName ("com.mysql.jdbc.Driver");
           Connection connection = DriverManager.getConnection (url);
           System.out.println ("Database connection established");
       } catch (SQLException e) {
           Log.d("SQLException", "e.toString()");
       } 
```

LogCat 中记录的 SQLException 是：

```
java.sql.SQLException: path to '//192.168.178.21/Users/test/userdata/Database/MyDatabase.db': '/192.168.178.21' does not exist 
```

我想我的问题在于 url 字符串...？但是我没有弄清楚如何更改它，以便可以建立连接。

感谢您的帮助，蒂姆

编辑：感谢您到目前为止的帮助！昨天我已经把这个问题写出来了，没有看我的代码……我很抱歉，因为我混淆了很多东西……它不是 MySql 数据库，而是 sqlite 数据库...但我认为这在编码方面并没有太大变化。我正在使用 jdbc sqlite 驱动程序。在 Java-Eclipse 项目中启动以下行时，一切正常，并且可以建立连接。但是在我的设备上，我仍然有 Nullpointer ......

昨天我更改了我的代码，使其符合您的建议。但问题仍然存在......为了确保它与某些权限或网络设置无关，我已将 DB-File 复制到我的 Android 设备上，并尝试使用以下代码行直接连接到它：

```
try {
    Class.forName("org.sqlite.JDBC");
} catch (ClassNotFoundException e) {
    e.printStackTrace();
}

Connection conn = DriverManager.getConnection("jdbc:sqlite://mnt/sdcard/MyVideos34.db");

if (conn == null) {
    Log.d("ConnectionError", "Connection is null");
return;
} 
```

但这里 getConnection 也会抛出一个 NullPointer ，我不知道为什么......有人假设为什么可以在 Eclipse 之外建立连接并在我的 Android 设备上失败？我可能有一个错误的驱动程序，它不能在设备上工作，而是来自 Eclipse ......？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T06:54:32.977

MYSQL 连接字符串的 url 格式是

```
jdbc:mysql://[host][,failoverhost...][:port]/[database] »
[?propertyName1][=propertyValue1][&propertyName2][=propertyValue2]... 
```

如果未指定主机名，则默认为*127.0.0.1。*如果未指定端口，则默认为 3306，这是 MySQL 服务器的默认端口号。

```
jdbc:mysql://[host:port],[host:port].../[database] »
[?propertyName1][=propertyValue1][&propertyName2][=propertyValue2]... 
```

这是一个示例连接 URL：

```
jdbc:mysql://localhost:3306/sakila?profileSQL=true 
```

请相应更改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T06:55:20.507

JDBC url 的格式为：jdbc:mysql:/// 但请查看重复的代码。您可能不想从这样的移动设备直接连接到数据库，但更喜欢使用 Web 服务包装器来执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:31:31.250

```
try {
       String url = "jdbc:mysql://localhost:3306/MyDatabase?user=root&password=root";
       Class.forName ("com.mysql.jdbc.Driver").newInstance();
       Connection connection = DriverManager.getConnection (url);
       System.out.println ("Database connection established");
    } catch (SQLException e) {
       System.out.println("SQLException" + e.toString());
    } catch (ClassNotFoundException e) {
       e.printStackTrace();
    } catch (InstantiationException e) {
       e.printStackTrace();
    } catch (IllegalAccessException e) {
       e.printStackTrace();
    } 
```

# android - MapView：无法获取连接工厂客户端

> ID：10006224
> 
> 赞同：1
> 
> 时间：2012-04-04T06:51:25.467
> 
> 标签：android, google-maps

在我的 Android 应用程序中，我有一个 Google MapView 活动，我面临以下错误：

```
MapView: Couldn't get connection factory client 
```

起初：我有一个正确的地图密钥和 Internet 权限，地图在模拟器和设备上显示良好。我感到困惑的是，尽管地图有效，但仍显示上述错误。

在设备上，有时地图会正确加载并显示，1 分钟后，如果开始缩放并捏合地图，则地图不会继续加载并引发错误。

如果我关闭并再次打开设备上的移动网络，地图将再次正常工作。

编辑：我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest 
xmlns:android="http://schemas.android.com/apk/res/android"
package="de.incowia.mobileschatzsuche" 
android:versionCode="1"
android:versionName="2011.10.07">

<!-- We're supporting AndroidSDK 7 -->
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="7"/>

<!-- We need access to the internet for loading maps -->
<uses-permission android:name="android.permission.INTERNET"/>
<!-- We're using both, network and GPS -->
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>

<application android:icon="@drawable/icon" android:label="@string/app_name" 
    android:theme="@style/DefaultTheme">

    <!-- 4 test -->
    <uses-library android:name="android.test.runner" />

    <!-- We're using Google Maps API -->
    <uses-library android:required="true" android:name="com.google.android.maps" />

    <!-- Dashboard -->
    <activity android:name=".MobileSchatzsucheActivity" android:label="@string/app_name" android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <!-- Maps Activity -->
    <activity android:name=".GoogleMapsActivity" />

    <!-- Schatzliste Activity -->
    <activity android:name=".SchatzlisteActivity" android:launchMode="singleTask"/>

    <!-- Schatzdetails Activity -->
    <activity android:name=".DetailsActivity"/>

    <!-- MyTreasuresCoverFlowActivity -->
    <activity android:name=".MyTreasuresCoverFlowActivity"/>

    <!-- Preferences Activity-->
    <activity android:name=".PreferencesActivity" 
              android:theme="@android:style/Theme"/>

    <!-- FileBrowser Activity -->
    <activity android:name=".FileBrowserActivity"
              android:theme="@android:style/Theme"/>

</application>

<instrumentation android:name="android.test.InstrumentationTestRunner"
    android:targetPackage="de.incowia.mobileschatzsuche" 
    android:label="test test" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T06:55:41.343

试着给这两个权限

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

因为当您放大/缩小时，谷歌地图会相应地放大/缩小，因此我们需要给予这样的许可。然后它将起作用

# smtp - 如何检索邮件大小 SMTP 服务器的固定上限

> ID：10006226
> 
> 赞同：6
> 
> 时间：2012-04-04T06:51:28.697
> 
> 标签：smtp, size, message

我需要知道消息大小 SMTP 服务器的固定上限。例如，对于 GMAIL，我们有 25MB 作为发送邮件的限制。

任何人都可以帮助我使用我可以使用的命令。我同样参考了 RFC 1870。

谢谢和问候， NehaC

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T06:54:51.230

您可以通过发送`EHLO`消息并查看服务器是否以以下方式响应来猜测这一点`SIZE`：

```
$ nc -v aspmx.l.google.com. 25
Connection to aspmx.l.google.com. 25 port [tcp/smtp] succeeded!
220 mx.google.com ESMTP gv4si23346623qab.115
EHLO somehost
250-mx.google.com at your service, [YOUR_IP]
250-SIZE 35882577
250-8BITMIME
250-STARTTLS
250 ENHANCEDSTATUSCODES 
```

在这种情况下，服务器报告了 35 MB 的限制。

[http://cr.yp.to/smtp/size.html](http://cr.yp.to/smtp/size.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T06:55:12.860

`SMTP` `HELO`/`EHLO`响应表示最大消息大小，请参阅[http://www.samlogic.net/articles/smtp-commands-reference.htm](http://www.samlogic.net/articles/smtp-commands-reference.htm)：

> SIZE SIZE 命令有两个用途。SMTP 服务器可以通知客户端最大邮件大小是多少，客户端可以通知 SMTP 服务器将要发送的电子邮件的（估计）大小。客户端不应发送大于服务器报告大小的电子邮件消息，但通常如果消息比客户端通知服务器的大小稍大一点也没有问题。下面的示例显示了服务器 (S) 和客户端 (C) 如何相互报告大小：

```
S: 250 SIZE 1000000
C: MAIL FROM:<mail@samlogic.com> SIZE=500000 
```

> 客户端发送 SIZE 命令和大小信息以及 MAIL FROM 命令。服务器单独发送命令和大小信息。大小始终以字节为单位。

# html - div块宽度不占用具有绝对位置的嵌套div标签中的整个块

> ID：10006234
> 
> 赞同：1
> 
> 时间：2012-04-04T06:52:14.967
> 
> 标签：html, css

请看这个例子[http://jsfiddle.net/xcYum/1/](http://jsfiddle.net/xcYum/1/)

1.  我想知道为什么 div 标签（class=progress）内容被分成两行而不是一行（即你的进度与你的\n进度）。我不需要指定“div class=progress”的宽度。您能否给我一个解释，说明发生这种情况的所有 css 和/或 html 元素类型（或装箱）？我只想确切地知道规则是如何工作的，而不是记住它有效或无效的情况。

2.  看来如果我将 .container css 更改为以下内容： .container { position: relative; } 那么 div 标签（class=progress）现在显示在单行中，为什么相对和绝对会有这样的区别？还是因为它是嵌套的？

3.  我们如何避免嵌套绝对定位的 div 标签？有这样的结构是错误的还是不好的做法。我在这个例子中使用它是因为我想根据 'div class=container' 标签定位 '100%' 和 'your progress'，然后我可以移动 'div class=container' 标签。换句话说，这样做，我可以只移动一件东西（'div class=container' 标签）来移动两件东西（100% 和'你的进度'），反之则更多的工作。我的思维过程有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T06:56:01.483

1.  因为绝对定位的元素会收缩包装，换句话说，它会变得尽可能小。您可以使用强制文本从不换行`white-space: nowrap`

2.  不知道为什么会这样

3.  您不需要绝对定位元素子元素与父元素一起移动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:11:55.387

1.  Absolute element establishes a new containing block for normal flow children, and for descendants whose position property is set to absolute.

    Reference: [http://reference.sitepoint.com/css/absolutepositioning](http://reference.sitepoint.com/css/absolutepositioning)

2.  Same as first answer

3.  Absolute element is positioned with respect to its containing block. So, you just need a parent 'div class=container' to have relative position and then all its elements with absolute position will move with it.

    Reference: [http://reference.sitepoint.com/css/absolutepositioning](http://reference.sitepoint.com/css/absolutepositioning)

# svn - 在svn中将三个存储库合并为第四个

> ID：10006235
> 
> 赞同：0
> 
> 时间：2012-04-04T06:52:27.703
> 
> 标签：svn, merge, repository

我有 4 个相同项目的存储库。三位开发人员正在开发这个项目。

他们从第四个（主）存储库复制文件。他们处理这些文件并将文件提交到各自的存储库中。

现在我必须将 3 个存储库合并到第 4 个（主）。我必须从 4 日开始检查这些文件，以便查看所有开发人员的更改。现在我必须将这些更改提交到在线服务器。

第二天，这三个开发人员将从第 4 个（主）存储库中复制文件。现在每个开发人员都将把 3 个 repo 中的所有更改合并到第 4 个 repo 中。

如何结合这 3 个存储库来创建第 4 个主存储库？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T04:18:43.617

使用`svnadmin dump`和`svnadmin load`

[http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.migrate](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.maint.html#svn.reposadmin.maint.migrate)

# javascript - javascript中的正则表达式分组

> ID：10006236
> 
> 赞同：1
> 
> 时间：2012-04-04T06:52:37.357
> 
> 标签：javascript, regex

我想匹配“”和“”中的所有文本。我的文本可能包含其中任何一个，所以我使用或运算符我的正则表达式如下

```
(\"(.*?)\"|'(.*?)') 
```

为了检索引号之间的文本，我使用了 RegExp.$2 表示“”，RegExp.$3 表示 '' 现在只使用一个组，我可以检索其中任何一个。例如，我可能不知道何时给出“”并且使用了“”，因此任何人都可以提出满足上述属性的正则表达式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:02:24.917

尝试这个

```
(['"])(.*?)\1 
```

[在 Regexr 上](http://regexr.com?30hsk)查看

您将在第 2 组中找到引号之间的文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T06:58:03.840

像这样的东西？

```
(["'])((?:(?!\1).)*)\1 
```

第一个反向引用将包含`"`or`'`而第二个将包含引号之间的文本。

如果这是您要匹配的代码（引号之间的字符串），您可能需要处理反斜杠：

```
(["'])((?:(?!\1)[^\\]|\\.)*)\1 
```

# c - *完全*相等的双精度数为 (a==b) 返回 0

> ID：10006237
> 
> 赞同：2
> 
> 时间：2012-04-04T06:52:39.223
> 
> 标签：c, comparison, floating-point

> **可能重复：**
> [C 编译器错误（浮点运算）？](https://stackoverflow.com/questions/4002411/c-compiler-bug-floating-point-arithmetic)

我有两个双打，我可以保证完全等于 150 位小数 - 即。以下代码：

```
printf("***current line time is %5.150lf\n", current_line->time);
printf("***time for comparison is %5.150lf\n", (last_stage_four_print_time + FIVE_MINUTES_IN_DAYS)); 
```

...返回：

```
***current line time is 39346.526736111096397507935762405395507812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
***time for comparison is 39346.526736111096397507935762405395507812500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000 
```

`FIVE_MINUTES_IN_DAYS`是 #defined，并且`current_line->time`和`last_stage_four_print_time`都是双精度数。

我的问题是我的调试代码的下一行：

```
printf("if condition is %d\n", (current_line->time >= (last_stage_four_print_time + FIVE_MINUTES_IN_DAYS))); 
```

返回以下内容：

```
if condition is 0 
```

谁能告诉我这里发生了什么？我知道非小数/不精确的性质，`floats`但`doubles`它们根本不会出现任何错误（原始数字都已使用`sscanf`或#defined 读取，并且都指定到小数点后 10 位）。

**编辑：**我的错误是假设`printf`-ing 双打在内存中准确地表示了它们，这是错误的，因为正在计算一个值。声明`(last_stage_four_print_time + FIVE_MINUTES_IN_DAYS)`为`threshold_time`并使用它来解决问题。我将确保使用 epsilon 进行比较 - 我知道这是要走的路，我只是对为什么我（错误地）认为看起来相同的这些值显然不相等感到困惑。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T06:58:01.610

浮点数肯定不准确到 150 位有效数字，所以我不确定从“视觉”比较（如果有的话）中可以得出什么结论。

另一方面，这些值显然不是完全相同的（它们怎么可能是相同的，因为*其中一个是通过加法当场计算的*？）。所以不清楚为什么你看到的行为是意外的。

*永远*不要像那样比较浮点数，只需对差异与 epsilon 进行标准比较。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T07:00:54.323

阅读浮点表示（特别是[http://en.wikipedia.org/wiki/IEEE_754-2008](http://en.wikipedia.org/wiki/IEEE_754-2008)）。尝试将包含双精度的字节的实际内容打印为十六进制，它们不会逐位匹配。浮点数的正确比较在 Knuth（半数字算法）中。很简单（用 int 代替 bool，用 double 代替 float，用 1 代替 true）：

```
bool almostEqual(float x, float y, float epsilon)
{
    if (x == 0.0 && y == 0.0) {
        return true;
    }

    if (fabs(x) > fabs(y)) {
        return fabs((x - y) / x) < epsilon;
    } else {
        return fabs((x - y) / y) < epsilon;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-04T06:56:28.063

您应该始终使用 EPSILON 值来比较浮点数和双精度数以检查是否相等。即使看起来相同，内部表示也不能保证匹配，因为这些类型的数字以二进制表示。

你可以做类似的事情

```
#define EPSILON 0.00001
...
if (fabs(a - b) <= EPSILON) return 1; // they are equal
return 0; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T06:59:23.557

耶稣关于如何解决这个问题是正确的。

至于为什么......在一种情况下您读取一个常量值，在另一种情况下您执行加法运算。即使打印输出完全相同，二进制表示也可能略有不同。

尝试检查支持两个双精度的内存，看看是否有任何位不同（会有差异）。

对于综合治疗，我建议

[http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T06:59:26.373

一般来说，您不应该使用 == 来比较浮点数或双精度数。相反，您应该检查差异是否小于某个小的数字。

```
double second_number = last_stage_four_print_time + FIVE_MINUTES_IN_DAYS;
if (fabs(current_line->time - second_number) < 0.001 || current_line->time > second_number){
  // your comparison code
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-04T07:00:43.537

首先，双打只有 15-16 位小数（52 位 matissa 的 log_2）。

其次，如果要比较，请使用已经提到的 epsilon。

第三，为了调试，打印十六进制值。

# image - 将序列文件转换为矩阵

> ID：10006238
> 
> 赞同：0
> 
> 时间：2012-04-04T06:52:40.403
> 
> 标签：image, matrix, hadoop, mapreduce

我有**图像的序列文件**。如果我必须执行 DCT、边缘检测等操作，所以我需要将图像作为矩阵。如何在hadoop中执行***序列文件到矩阵的转换？***

# java - 方法调用计数断言

> ID：10006240
> 
> 赞同：3
> 
> 时间：2012-04-04T06:52:52.213
> 
> 标签：java, unit-testing, easymock, powermock

我刚刚开始使用 PowerMock 和 EasyMock，我对计算模拟方法调用的方式有点困惑。

示例代码：

```
class ClassToBeTested{
 private boolean toBeMocked(Integer i){
  return i%2==1; 
  }
 } 
```

和测试代码：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(ClassToBeTested.class)
public class ClassToBeTestedTest{

 private final Integer i=2;
 ClassToBeTested underTest;

 @Before
 public void setUp() throws Exception {
  underTest=PowerMock.createPartialMock(ClassToBeTested.class,
                    "toBeMocked");
  PowerMock.expectPrivate(underTest, "toBeMocked", i)
            .andReturn(true);
  PowerMock.replay(underTest);
 }
 @Test
 public dummyTest(){
  Assert.assertTrue(underTest.toBeMocked(i);
  //the call is: underTest.toBeMocked(2)
  //so the computation is return 2%2==1; google says it 0 :)
  //thus real method would return 0==1 (false)
  //mocked one will return true, assertion should pass, that's ok
  //RERUN ASSERTION
  Assert.assertTrue(underTest.toBeMocked(i);
  //method invocation count should be now 2
}

  @After
  public void tearDown() {
   PowerMock.verify(underTest);
   //WILL FAIL with exception saying
   //the mocked method has not been called at all
   //expected value (obvious) is one
} 
```

我的问题是，为什么模拟方法调用期望会失败？为什么验证`ClassUnderTest`显示根本没有调用模拟方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:22:37.123

在将期望线更改为：

```
 PowerMock.expectPrivate(underTest, "toBeMocked", i).andReturn(true).times(2); 
```

即使没有这种变化，也不是说那个被嘲笑的母亲没有被叫到。它说

```
 Unexpected method call toBeMocked(2):
    toBeMocked(2): expected: 1, actual: 2 
```

您使用的是最新的 PowerMock 和 EasyMock 版本吗？

# java - 如何在 Struts2 jQuery 的选项卡面板中显示我的 scriptlet 值

> ID：10006244
> 
> 赞同：0
> 
> 时间：2012-04-04T06:53:22.327
> 
> 标签：java, jquery, jsp, struts2

我没有收到任何错误，但我的日期（<%=date%）没有显示在里面`<sj:tab>`，是他们的任何方式，以便我可以在里面显示数据库（日期）值`<sj:tbbedpanel>.....</sj:tabpanel>`

* * *

我在我的 JSP 页面中尝试了这个，但它没有在 TabPanel 中显示值

```
<sj:tabbedpanel id="remotetabs"  selectedTab="2" animate="true" collapsible="true" sortable="true">
<s:url id="remoteurl3" action="NewRoutineOpr"/>
<sj:tab id="tab3" href="%{remoteurl3}" label="Day"  closable="true" targets="maindiv">
</sj:tab>
</sj:tabbedpanel> 
```

# algorithm - 如何制作这种模式查找算法？

> ID：10006247
> 
> 赞同：2
> 
> 时间：2012-04-04T06:53:58.767
> 
> 标签：algorithm, math, statistics, pattern-matching

我有一个矩阵，我需要在这个矩阵中找到一个模式。矩阵是：

```
1 0 0 1 1 1 0 0 0 1
0 0 0 1 1 0 1 0 0 1
0 1 1 1 0 0 0 1 0 1
1 0 1 0 0 1 1 0 1 0
1 1 1 0 0 0 1 1 0 1
0 1 0 0 1 1 0 1 0 1
1 1 1 0 0 0 1 0 0 1
1 0 0 1 0 1 1 1 0 1 
```

规则：

1.  我们从每一行中选择一个数字。
2.  从第二行中选择的下一个数字必须与先例相反。
3.  由 1 和 2 规则选择的号码的位置必须是精确的模式。

所以问题是：

找到尊重 3 条规则的最佳模式。来自所示矩阵的示例：

1.  选择了一个数字：0(2) //“()”中的内容表示值的位置。位置从 1 到 10 开始。
2.  1(4)
3.  要使位置 2 和 4 成为模式，必须支持矩阵其余部分的规则 1 和 2。

所以我们在第 3 行走得更远，我们检查第 2 个位置：1。我们进入第 4 行，我们检查第 4 个位置：0。似乎尊重规则。第 2 位和第 4 位的数字相反，所以我们继续：第 5 行、第 2 位：，依此类推，但您会看到第 7 行第 2 位：1 和第 8 行第 4 位：1；所以2-4位的格局不好。

我如何根据这些规则制定算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:30:23.217

也许这会有所帮助（受到对您问题的评论的启发）。这是一种 C++ 类型的答案。此答案假定 0 始终是您选择的数字，但您可以轻松地对其进行编辑以允许 1 排在第一位。

```
int firstPos, secondPos;

for(int i = 0; i < 10; ++i)
    if(matrix[0][i] == 0)
        firstPos = i;

for(int i = 0; i < 10; ++i)
    if(matrix[0][i] == 1)
        secondPos= i;

bool success = true;

for(int i = 0; i < 10/2; ++i)
    if(matrix[2*i][firstPos] == matrix[2*i][secondPos])
        success == false;

if(success)
    cout << "success" << endl;
else 
    cout << "failure" << endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T11:21:57.580

我将通过第一项 (F) 的索引和第二项 (S) 的索引来定义一个模式。我还将假设索引以 0 开头（而不是您的示例中的 1）。F 和 S 都可以取 0 到 9 之间的值。解决方案很简单。有一个从 0 到 9 运行 F 和 S 的双嵌套循环，在第三个最里面的循环中，只需验证当前 F 和 S 形成一个模式。

# c# - 将 C# 迁移到 Python - 随机类

> ID：10006259
> 
> 赞同：3
> 
> 时间：2012-04-04T06:54:31.230
> 
> 标签：c#, python, random

我需要将一些 C# 代码迁移到 Python。原始代码使用了`Random`该类。迁移的代码必须是循环准确的（即连续调用`Next()`必须在两个代码中产生相同的结果）。一些问题：

*   `Random`Python 中是否有与 C# 等效的调用？
*   头韵，假设我可以修改这两个源，是否有一个伪随机库同时适用于 C# 和 Python？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-04-16T22:49:16.913

我知道这是一个老问题，但我最终需要一个解决方案。我最终在 python 中实现了 C# 的 Random 类。只要您不需要大于 2147483647 的随机数，它就可以工作，我最终不需要该功能，所以我没有实现它。

[https://gist.github.com/BadStreff/541cf2e6953b3c666f83127a1d4f6a47](https://gist.github.com/BadStreff/541cf2e6953b3c666f83127a1d4f6a47)

```
from ctypes import *
# implemented from:
# http://referencesource.microsoft.com/#mscorlib/system/random.cs,dec894a7e816e665
class Random(object):
    def __init__(self, seed):
        self.seed = c_int(seed).value
        self.MBIG = 2147483647
        self.MMIN = -2147483648
        self.MZ = 0
        self.MSEED = 161803398
        self.SeedArray = [0] * 56

        if seed == self.MMIN:
            subtraction = self.MBIG
        else:
            subtraction = abs(seed)

        mj = c_int(self.MSEED - subtraction).value
        self.SeedArray[55] = mj
        mk = 1
        for i in range(1, 55):
            ii = (21 * i) % 55
            self.SeedArray[ii] = mk
            mk = mj - mk
            if mk < 0:
                mk += self.MBIG
            mj = self.SeedArray[ii]
        for k in range(1, 5):
            for i in range(1, 56):
                self.SeedArray[i] -= self.SeedArray[1 + (i + 30) % 55]
                if self.SeedArray[i] < 0:
                    self.SeedArray[i] = c_int(self.SeedArray[i] + self.MBIG).value
        self.inext = 0
        self.inextp = 21
        self.seed = 1

    def InternalSample(self):
        locINext = self.inext + 1
        locINextp = self.inextp + 1

        if locINext >= 56:
            locINext = 1
        if locINextp >= 56:
            locINextp = 1

        retVal = c_int(self.SeedArray[locINext] - self.SeedArray[locINextp]).value
        if retVal == self.MBIG:
            retVal -= 1
        if retVal < 0:
            retVal = c_int(retVal + self.MBIG).value
        self.SeedArray[locINext] = retVal
        self.inext = locINext
        self.inextp = locINextp
        return retVal

    def Next(self, minValue=None, maxValue=None):
        if minValue == None:
            return self.InternalSample()
        valRange = maxValue - minValue
        if valRange <= self.MBIG:
            return int(c_float(self.Sample() * valRange).value) + minValue
        else:
            return self.GetSampleForLargeRange() * valRange + minValue

    def GetSampleRangeForLargeRange(self):
        pass

    def Sample(self):
        s = self.InternalSample()
        ret = c_double(s * c_double(1.0/self.MBIG).value).value
        # print(f'sample: {s}\nret: {ret}')
        return ret 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:37:50.190

我不知道有任何库可用于 Python 和 C# 并且为两者生成相同的随机数。但是，您也许可以利用 IronPython。IronPython 和 CPython的默认`Random`实现不同，但`WichmannHill`类没有。

您可以使用 C#`WichmannHill`在 IronPython 中实例化类，并为相同的种子获取与 CPython 相同的值。或者，您可以通过将 Python 代码翻译成`random.py`.

另一种选择是采用 Mersenne Twister 算法的CPython[实现](http://svn.python.org/view/python/trunk/Modules/_randommodule.c?revision=81029&view=markup)`Random`并将其转换为 C# 以获得相同的结果。

# tcl - SWIG C++ TCL：处理内存中预先存在的对象

> ID：10006261
> 
> 赞同：1
> 
> 时间：2012-04-04T06:54:47.070
> 
> 标签：tcl, swig

使用 SWIG TCL 包装器时，如何访问没有字符串引用的对象？

基本上在我的程序中，一些对象甚至在加载 TCL shell 之前就已经预定义了。如果自己编写包装器，我会传递一个指向对象的指针，该对象又具有指向迄今为止创建的所有对象的指针。如何通过 SWIG 实现相同的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:28:29.157

最简单的方法是将静态方法添加到返回这些特殊实例的类（或其他一些包装类）中。然后 SWIG 将正确包装访问，您将能够使用静态方法调用约定来获取这些实例的句柄。

```
set foo [YourClass_specialFoo]     ;# Get the special instance once
$foo bar ...                       ;# invoke methods on it 
```

# android - Webview 将“null”显示为内容

> ID：10006262
> 
> 赞同：0
> 
> 时间：2012-04-04T06:54:47.547
> 
> 标签：android, android-webview

我正在尝试在 web 视图中加载 google 日历公共日历的 url。最初它没有问题。在某些时候，我得到的只是 webview 中的文本“null”。我也尝试将网址更改为具有相同结果的基本网页。我也尝试注释掉 wbv.loadurl 行并得到相同的结果。我尝试单步执行代码，并且在未注释掉时调用了该行。任何帮助，将不胜感激。下面是填充 webview 的代码：

```
wbv = (WebView) findViewById(R.id.audioPlayer_showSchedule);
WebSettings settings = wbv.getSettings();
wbv.setWebViewClient(new TwitWebViewClient());
settings.setDomStorageEnabled(true);
settings.setDatabaseEnabled(true);
settings.setJavaScriptEnabled(true);
settings.setDefaultTextEncodingName("utf-8");
wbv.loadUrl("http://www.google.com/calendar/embed?src=r8psn8mpajnfa2703k43l6o014@group.calendar.google.com&ctz=America/Los_Angeles&program&mode=Week&gsessionid=vzeVWSq2Wdk3eVmGOUp1bQ"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:18:41.700

使用下面的工作代码::

```
public class Android_Activity extends Activity {
private Android_Activity _activity;
    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);     
            getWindow().requestFeature(Window.FEATURE_PROGRESS);
            _activity = this;   
            setContentView(R.layout.main);

            mwebview=(WebView)view.findViewById(R.id.webview);
            mwebview.getSettings().setJavaScriptEnabled(true);
            mwebview.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);

            if(checkInternetConnection(_activity)==true){
                if(savedInstanceState==null)
                    mwebview.loadUrl("http://abc.com");
                else
                    mwebview.restoreState(savedInstanceState);
            }
            else{
                AlertDialog.Builder builder = new AlertDialog.Builder(_activity);
                builder.setMessage("Please check your network connection.")
                       .setCancelable(false)
                       .setPositiveButton("OK", new DialogInterface.OnClickListener() {
                           public void onClick(DialogInterface dialog, int id) {

                           }
                       });

                AlertDialog alert = builder.create();    
                alert.show();
            }
            mwebview.setWebChromeClient(new WebChromeClient() {

                @Override
                public void onProgressChanged(WebView view, int progress) { 
                    if(mwebview.getVisibility()==View.VISIBLE)
                    {
                        _activity.setProgress(progress * 100);
                    }
                }
            });
            mwebview.setWebViewClient(new HelloWebViewClient());
        }

        //HelloWebViewClient class for webview
        private class HelloWebViewClient extends WebViewClient {

            @Override
            public void onPageStarted(WebView view, String url, Bitmap favicon) {
                // TODO Auto-generated method stub
                super.onPageStarted(view, url, favicon);
            }
            @Override
            public void onReceivedError(WebView view, int errorCode,
                    String description, String failingUrl) {
                // TODO Auto-generated method stub
                super.onReceivedError(view, errorCode, description, failingUrl);

            }
            @Override
            public void onPageFinished(WebView view, String url) {
                // TODO Auto-generated method stub
                super.onPageFinished(view, url);
            }
            @Override
            public boolean shouldOverrideUrlLoading(WebView view, String url) {
                // Otherwise, the link is not for a page on my site, so launch another Activity that handles URLs
                view.loadUrl(url);
                return true;
            }

        }   //HelloWebViewClient-class
        @Override
        public boolean onKeyDown(int keyCode, KeyEvent event) {
            // Check if the key event was the Back button and if there's history
            if ((keyCode == KeyEvent.KEYCODE_BACK) && mwebview.canGoBack() ){
                mwebview.goBack();
                return true;
            }
            // If it wasn't the Back key or there's no web page history, bubble up to the default
            // system behavior (probably exit the activity)
            return super.onKeyDown(keyCode, event);
        }
        //To check whether network connection is available on device or not
            public static boolean checkInternetConnection(Activity _activity) {
                ConnectivityManager conMgr = (ConnectivityManager) _activity.getSystemService(Context.CONNECTIVITY_SERVICE);
                if (conMgr.getActiveNetworkInfo() != null
                        && conMgr.getActiveNetworkInfo().isAvailable()
                        && conMgr.getActiveNetworkInfo().isConnected()) 
                    return true;
                else
                    return false;
            }//checkInternetConnection()
} 
```

而且在你的 main.xml 布局中，你必须有一个 id 为 webview 的 webview

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:20:41.677

这一切对我来说都很好。你确定你`TwitWebViewClient`正在做你期望的事情吗？

另外，您确定这是您要加载的 URL 吗？我不禁注意到`"gsessionid=vzeVWSq2Wdk3eVmGOUp1bQ"`它的结尾。一旦您的会话到期，这肯定不会起作用吗？

# c# - 使用模板列表框项将可观察列表绑定到列表框

> ID：10006270
> 
> 赞同：0
> 
> 时间：2012-04-04T06:55:35.053
> 
> 标签：c#, wpf, xaml

**我有以下模板**

```
<ControlTemplate x:Key="tmpl_btn_TecnicianModeMenu" TargetType="{x:Type ListBoxItem}">
<Grid Opacity="1" d:LayoutOverrides="Width, Height">
    <Border 
        x:Name="Border"  
        CornerRadius="0" 
        BorderThickness="0" Height="Auto" Margin="0" Background="White">

        <StackPanel Name="stackPanel" Height="Auto" Margin="0" Orientation="Horizontal" >
            <Button x:Name="button" Style="{DynamicResource ButtonListBoxItem}" Margin="5,5,5,5" Width="120" Height="Auto" BorderThickness="0" >
                <TextBlock x:Name="textBlock" TextWrapping="Wrap" Text="בצע"  Margin="12,0" VerticalAlignment="Center" HorizontalAlignment="Stretch" Style="{DynamicResource tb_Desc}"/>
            </Button>
            <StackPanel Height="Auto" Margin="0" Orientation="Horizontal" >
                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" x:Name ="LB_Result"  Text="LB_Result" Style="{DynamicResource LB_AreaTitle_Balance}" Margin="5,5,5,5" d:LayoutOverrides="Height" />
                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" x:Name ="LB_OK"  Text="LB_OK" Style="{DynamicResource LB_AreaTitle_Balance}" Margin="5,5,5,5" d:LayoutOverrides="Height" />
                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" x:Name ="LB_TchName"  Text="LB_TchName" Style="{DynamicResource LB_AreaTitle_Balance}" Margin="5,5,5,5"/>
                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" x:Name ="LB_Date"  Text="LB_Date" Style="{DynamicResource LB_AreaTitle_Balance}" Margin="5,5,5,5" d:LayoutOverrides="Height"/>
                <TextBlock HorizontalAlignment="Right" VerticalAlignment="Center" x:Name ="LB_CheckName"  Text="{TemplateBinding Tag}"   Style="{DynamicResource LB_AreaTitle_Balance}" Margin="5,5,5,5"/>
            </StackPanel>
        </StackPanel>
    </Border>
    <Border x:Name="Divide" BorderBrush="Gray" BorderThickness="0,0.5" Height="140" Width="Auto" Margin="18.5,0" VerticalAlignment="Bottom"/>
</Grid>
<ControlTemplate.Triggers>
    <Trigger Property="IsKeyboardFocused" Value="True"/>

    <Trigger Property="IsEnabled" Value="false">
        <Setter Property="Foreground" Value="{StaticResource DisabledForegroundBrush}"/>
    </Trigger>
</ControlTemplate.Triggers> 
```

** 我有此类项目的列表框。我想将它绑定到一个可观察的列表。问题是以前的程序员将项目添加到列表中，如下所示：**

```
 private void AddButtonToList(String LB_CheckName, String LB_Date, String LB_TchName, String LB_OK, String LB_Result, enmTechMode_Check enmCheck )
    {
        try
        {
            //create item
            ListBoxItem item2 = new ListBoxItem();
            //set template
            item2.SetResourceReference(ListBoxItem.TemplateProperty, "tmpl_btn_TecnicianModeMenu");
            item2.ApplyTemplate();

            item2.Height = 45;

            TextBlock txt1 = (TextBlock)item2.Template.FindName("LB_CheckName", item2); 
            txt1.Text = LB_CheckName;

            txt1 = (TextBlock)item2.Template.FindName("LB_Date", item2); 
            txt1.Text = LB_Date;

            txt1 = (TextBlock)item2.Template.FindName("LB_TchName", item2);  
            txt1.Text = LB_TchName;

            txt1 = (TextBlock)item2.Template.FindName("LB_OK", item2);   
            txt1.Text = LB_OK;

            txt1 = (TextBlock)item2.Template.FindName("LB_Result", item2);   
            txt1.Text = LB_Result;

            Button bt = (Button)item2.Template.FindName("button", item2);
            bt.SetResourceReference(Button.StyleProperty, "ButtonListBoxItem");
            bt.ApplyTemplate();

            bt.Click += new RoutedEventHandler(Item_Selected);
            //set tag
            bt.Tag = enmCheck;

            //add to list
            StackPanel sp = (StackPanel)ListBoxData.FindName("stackPanel");
            item2.Tag = enmCheck;
            sp.Children.Add(item2);

        }
        catch (Exception exp)
        {
         }
    } 
```

**我不知道如何解决这个问题**

我假设theres假设是使用转换器？请给我一个方向

我假设可观察列表应该是结构。但是如何将它们转换为寺庙格式的项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:51:17.747

在模板中，您通常会[绑定到](http://msdn.microsoft.com/en-us/library/ms752347.aspx)数据对象的属性。例如，如果您有下面带有`Result`属性的数据类

```
public class MyData
{
    public string Result { get; set; }
    ...
} 
```

你会像这样绑定：

```
<TextBlock Text="{Binding Path=Result}" ... /> 
```

然后您不会手动添加 ListBoxItems，而是将数据对象添加到 ListBox 的[ItemsSource](http://msdn.microsoft.com/en-us/library/system.windows.controls.itemscontrol.itemssource.aspx)属性绑定到的 ObservableCollection：

```
myDataObjects.Add(
    new MyData
    {
        Result = "A Result"
        ...
    }); 
```

哪里`myDataObjects`是`ObservableCollection<MyData>`。

如果您需要在已包含在 ObservableCollection 中的数据对象更改时更新 UI，则类`MyData`需要实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/System.ComponentModel.INotifyPropertyChanged.aspx)。

# css - 100% 高度图像的可靠性 + CSS 的保持率

> ID：10006272
> 
> 赞同：0
> 
> 时间：2012-04-04T06:55:41.373
> 
> 标签：css

这个 CSS 是否用于`<img>`将高度调整为 100% 并保持可靠的比率（跨浏览器）？

```
#reel img
{
    height: 100%;
    width: auto;
} 
```

它似乎适用于我拥有的浏览器，但我对它的`auto`价值持怀疑态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:06:01.713

简短的回答：是的。你就是这样做的。不知道还要添加什么。编辑：您可以添加`!important`到自动规则以防万一`img`具有内联`width`属性。Edit2：实际上`!important`似乎没有必要：http: [//jsfiddle.net/Z7ME8/](http://jsfiddle.net/Z7ME8/)

# visual-studio-2010 - Dll 调试无法显示 outputdebugstring

> ID：10006274
> 
> 赞同：1
> 
> 时间：2012-04-04T06:55:50.533
> 
> 标签：visual-studio-2010, debugging, dll, 64-bit, windbg

在创建 dll 之前，我已经在整个代码中放置了 OutputDebugString，以便我可以看到 dll 可能失败的确切函数。现在我创建了一个 Visual Studio 项目，它使用 LoadLibrary 函数加载这个 dll。loadlibrary 调用成功，但是当我使用 WinDBG 调试 EXE 时，我看不到任何输出调试字符串。据我所知，我至少应该看到输出调试字符串靠近存在 dll 起点的代码。有人能告诉我可能是什么问题吗？

更多信息：-

该 dll 包含 c++ 代码并且是 64 位 dll。

我正在使用 Visual Studio 10，我使用的操作系统是 Windows 7 64 位。

WinDBG 也是 64 位的。

# php - 使用 Facebook for Php 的 Graph Api 获取位置

> ID：10006280
> 
> 赞同：0
> 
> 时间：2012-04-04T06:56:07.927
> 
> 标签：php, facebook, facebook-graph-api

如何使用 Facebook Graph Api for Php 获取最接近用户 1000 距离的位置？我得到这个图 api 的链接[https://graph.facebook.com/search?q=coffee&type=place¢er=37.76,-122.427&distance=1000](https://graph.facebook.com/search?q=coffee&type=place&center=37.76,-122.427&distance=1000)但不明白如何实现。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T05:29:39.920

使用`file_get_contents`从图形 api 获取位置。

```
file_get_contents("https://graph.facebook.com/search?q=store&type=place&center=37.76,-122.427&distance=1000&access_token=YOUR_ACCESS_TOKEN"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T09:13:06.483

```
$search_result = $facebook->api('/search?q=coffee&type=place&center=37.76,-122.427&distance=1000'); 
```

你会得到结果`$search_result`。

# css - 使用选择器在 CSS 中选择元素的前一个兄弟

> ID：10006282
> 
> 赞同：22
> 
> 时间：2012-04-04T06:56:21.977
> 
> 标签：css, css-selectors

如何使用选择器在 CSS 中选择元素的上述元素

```
<li class="content">One</li>
<li class="content">Two</li>
<li class="content">Three</li>
<li class="no-content">First</li>
<li class="content">Four</li>
<li class="content">Five</li>
<li class="content">Six</li> 
```

在这里，我想使用类`no-content`，以便我可以`<li class="content">Three</li>`使用 CSS 选择器获取其上面的元素。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-04T07:00:01.233

这对于纯 CSS 是不可能的......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T07:10:32.257

你看起来一样吗：- [http://jsfiddle.net/rohitazad/4Y9D5/3/](http://jsfiddle.net/rohitazad/4Y9D5/3/)

您可以选择底部 div 但不能选择顶部。

# wpf - Visifire/WPF 数据绑定问题 (Visifire v3.6.8)

> ID：10006290
> 
> 赞同：0
> 
> 时间：2012-04-04T06:56:55.820
> 
> 标签：wpf, data-binding, visifire

在最后一个开源版本 v3.6.8 中，Visifire WPF 图表工具在商业化之前存在一个非常基本的数据绑定问题。我想将 ObservableCollection<> 绑定到 DataSeries 的 DataSource-Property。当我在 XAML 中绑定属性时，它只是不起作用。当我在后面的代码中绑定数据时，它工作正常。

我也将集合用于 DataGrid，一切正常。

输出日志没有显示任何绑定问题。

在 XAML 中绑定属性时，永远不会访问 DataSeries 对象的 DataSource 属性的 get/set 访问器，我只是不明白为什么。依赖属性在创建 DataSeries 对象时注册。

是否有任何已知问题，或者我错过了一些基本的东西？

XAML：

```
<DataGrid x:Name="grid" Grid.Column="0" ItemsSource="{Binding TransverseParallelShearLCS}"></DataGrid>

<Charts:Chart Grid.Column="1" x:Name="chart" ZoomingEnabled="True" AnimatedUpdate="True" ScrollingEnabled="False">
    <Charts:Chart.Series>
        <Charts:DataSeries RenderAs="Line" DataSource="{Binding TransverseParallelShearLCS}" AutoFitToPlotArea="True">                                                    
        <Charts:DataSeries.DataMappings>
              <Charts:DataMapping MemberName="XValue" Path="X"></Charts:DataMapping>
              <Charts:DataMapping MemberName="YValue" Path="Y"></Charts:DataMapping>
        </Charts:DataSeries.DataMappings> 
        </Charts:DataSeries>
     </Charts:Chart.Series>
</Charts:Chart> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T09:16:49.873

[请从 Visifire示例区](http://visifire.com/silverlight_examples.php)尝试以下示例并检查。

[http://visifire.com/silverlight_examples_details.php?id=10](http://visifire.com/silverlight_examples_details.php?id=10)

# naming-conventions - 为什么核心库中的一些 java 方法以数字结尾？

> ID：10006293
> 
> 赞同：24
> 
> 时间：2012-04-04T06:57:21.237
> 
> 标签：naming-conventions, java

它在JDK的很多类中都很常见，仅举几个例子：

1.  [java.util.Properties](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Properties.java)
    *   加载0
    *   商店0
2.  [java.lang.Thread](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Thread.java)
    *   开始0
    *   停止0
    *   设置优先级0

通常它们是私有的本地方法（如在 Thread 类中），但有时它们只是私有的（Properties 类）

我只是好奇是否有人知道这背后是否有任何历史。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-04T07:12:21.207

我相信它们是这样命名的，因为代码中存在具有相同名称的等效函数，并且只是为了区分本机辅助函数和公共函数，他们决定用 0 作为后缀。

在,和,中`java.util.Properties`都存在。`load``store``load0``store0`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T07:56:11.933

方法名后面的 0 这样做是为了区分具有相同名称的**公共**和**私有方法。**

`Start`函数将调用该`start0`函数。那些以 0 结尾的函数是私有方法。那些不以数字结尾的都是公开的。您可以在任何图书馆签到。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T07:48:02.743

我认为这个约定的历史早于 Java。我隐约记得在 4.x BSD Unix 的 C 库中看到过它。

# sql - 简化用于列出表和索引大小的 Postgres SQL 查询？

> ID：10006294
> 
> 赞同：5
> 
> 时间：2012-04-04T06:57:31.470
> 
> 标签：sql, postgresql, postgresql-9.1

以下 Postgres SQL 查询将列出来自所有模式的所有表及其大小和索引大小。如果一个表只是一个索引表，它将显示为 100% 索引。

```
SELECT schema,
       name,
       pg_size_pretty(CASE WHEN is_index THEN 0 ELSE s      END) AS size,
       pg_size_pretty(CASE WHEN is_index THEN s ELSE st - s END) AS index,
       CASE WHEN st = 0   THEN 0
            WHEN is_index THEN 100
                          ELSE 100 - ((s*100) / st) END || '%' as ratio,
       pg_size_pretty(st) as total
  FROM (SELECT *,
               st = s AS is_index
          FROM (SELECT nspname as schema,
                       relname as name,
                       pg_relation_size(nspname || '.' || relname) as s,
                       pg_total_relation_size(nspname || '.' || relname) as st
                  FROM pg_class
          JOIN pg_namespace ON (relnamespace = pg_namespace.oid)) AS p)                                                           
    AS pp                                                                   
 ORDER BY st DESC LIMIT 30; 
```

它将给出以下结果：

```
 schema         |          name          |  size   |  index  | ratio |  total
----------------+------------------------+---------+---------+-------+---------
 public         | conf                   | 4072 kB | 4360 kB | 52%   | 8432 kB
 archive        | product_param          | 4048 kB | 3968 kB | 50%   | 8016 kB                                                   
 public         | conf_pkey              | 0 bytes | 4320 kB | 100%  | 4320 kB
 archive        | product_value          | 1568 kB | 1136 kB | 43%   | 2704 kB
 public         | param_mapping          | 1472 kB | 832 kB  | 37%   | 2304 kB
 archive        | supplie_price          | 944 kB  | 896 kB  | 49%   | 1840 kB
 public         | product_param_param_id | 0 bytes | 1552 kB | 100%  | 1552 kB
 archive        | product_param_id       | 0 bytes | 1536 kB | 100%  | 1536 kB 
```

我已经到了一个看不到所有树木的森林的地步，它开始变得有点笨拙。

我想知道其中是否有任何可以简化或冗余的内容？如果可以使查询变得更简单，则列不必保持不变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T16:21:46.550

使用此查询，我得到了可比较的结果（具有不同的格式）：

```
select
    nspname as schema,
    relname as name,
    pg_relation_size(pg_class.oid) as size,
    pg_indexes_size(pg_class.oid) as index,
    pg_total_relation_size(pg_class.oid) as total,
    100 * case when relkind = 'i' then pg_relation_size(pg_class.oid) 
                                  else pg_indexes_size(pg_class.oid) end 
        / pg_total_relation_size(pg_class.oid) as i_ratio
from 
    pg_class
    join pg_namespace on relnamespace = pg_namespace.oid
order by 5 desc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:24:23.857

首先为什么不使用 CTE，它们会让你的代码更具可读性。然后你不返回 is_index 所以它似乎是多余的

```
with p as (
SELECT nspname as schema,
        relname as name,
        pg_relation_size(nspname || '.' || relname) as s,
        pg_total_relation_size(nspname || '.' || relname) as st
    FROM pg_class
       JOIN pg_namespace 
          ON (relnamespace = pg_namespace.oid)
),
pp as (
SELECT *,
        case when st = s then 0 else s end as size,
        case when st = s then s else st-s end as index

   FROM p
)
select schema,
       name,
       pg_size_pretty(size) as size,        
       pg_size_pretty(index) as index,
       (case st 
             when 0 then 0 
             else index*100 / st 
        end) || '%' ratio,
       st total
 from pp
 order by st desc limit 30; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T15:24:56.723

我真正想做的是指出quzary的响应应该使用oid而不是创建无法解析回oid的字符串。

现在我必须写一个合适的帖子（也许这是阻止新手评论的重点？）这是另一个经过整理和修饰的版本：

```
WITH p AS (
  SELECT n.nspname AS schema,
         c.relname AS name,
         pg_relation_size(c.oid) AS s,
         pg_total_relation_size(c.oid) AS st
  FROM pg_class c, pg_namespace n
  WHERE c.relnamespace = n.oid
)
SELECT schema, name,
  pg_size_pretty(s) AS size,        
  pg_size_pretty(st - s) AS index,
  (100.0 * s / NULLIF(st, 0))::numeric(10,1) AS "% data of total",
  st AS total
FROM p
ORDER BY st DESC
LIMIT 30; 
```

请注意，添加以下行可能很有用：

```
AND c.relkind = 'r' 
```

在`WHERE`从句中`p`。这会将其限制为仅关系/表，并使代码对表大小的一般摘要有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-19T09:35:48.623

不要忘记这一点，`pg_relation_size`并且`pg_total_relation_size`不区分大小写！

```
pg_relation_size(nspname || '.' || relname) 
```

实际上应该是：

```
pg_relation_size('"' || nspname || '.' || relname || '"') 
```

所以它也适用于大写。（我花了一段时间才弄清楚这个）

# hibernate - 如何获取数据库表的 Dto 名称？

> ID：10006295
> 
> 赞同：1
> 
> 时间：2012-04-04T06:57:38.100
> 
> 标签：hibernate

我是这个hibernate的新手，我需要动态更改查询中的表名，它来自一些配置文件（类），所以在hibernate中我们不能直接查询表名我需要表的相应dto名称，我怎样才能得到Dto数据库表的名称？

# python - 继承类可以改变基类中元素的类型吗

> ID：10006299
> 
> 赞同：1
> 
> 时间：2012-04-04T06:57:58.310
> 
> 标签：python, class

假设我有**A1**和**A2** 类以及具有 A1/A2 类型元素的**B类。**

现在我有一个类**B'(B)**（它继承自 B）。这个类可以**使用 A1' 和 A2' 而不是 A1 和 A2**，这个新类可以以某种方式交换基类中元素的类型吗？

通常我会说这是不可能的，但因为这是关于 python ......：P

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T07:04:22.587

你的意思是这样吗？

```
class A1(object):
    pass

class A1Child(A1):
    pass

class A2(object):
    pass

class A2Child(A2):
    pass

class B(object):

    a1_instance = None
    a2_instance = None

    def __init__(self):
        self.a1_instance = A1()
        self.a2_instance = A2()

class BChild(B):

    def __init__(self):
        self.a1_instance = A1Child()
        self.a2_instance = A2Child()

b_instance = B()

print b_instance.a1_instance
print b_instance.a2_instance

bchild_instance = BChild()

print bchild_instance.a1_instance
print bchild_instance.a2_instance 
```

# javascript - 如何使用 JavaScript 或 jQuery 从另一台服务器解析 XML？

> ID：10006304
> 
> 赞同：2
> 
> 时间：2012-04-04T06:58:04.803
> 
> 标签：javascript, jquery

我是 Javascript 新手。我需要使用另一个服务器的 javascript 或 jQuery 解析 XML。我尝试使用以下代码。但是当我执行它时，它不会成功。

我能够解析同一文件夹中的 XML。是否可以在 javascript 中访问来自另一台服务器的内容。我阅读了同源政策。

我能够获得成功消息，但无法获得 xml 数据

```
$.ajax({

type: 'GET',
url: 'http://10.47.5.69/myxml.xml',  
dataType: "xml",

success: function(data){
    alert('success');
    $(data).find("Node").each(function() {

         alert($(this).find("element").text());
        });
    },
    error: err  
});

function err(xhr, reason, ex)
{
    alert('xhr.status: ' + xhr.status);
    alert('ex "'+ex);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:22:33.643

由于跨域安全检查，您无法从另一台服务器加载某些内容。

但是对于 javascript，有一种解决方法：JSONP 技术：[http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

它用于 JSON 数据，但也可以用于任何字符串数据。但只有在您对该服务器有一定程度的控制（即可以安装脚本）时，它才会起作用。

另一种选择是在您自己的服务器上代理该 URL。那可能更容易。

# java - 如何在xml中的父标签内获取带有标签名称及其值的数据

> ID：10006305
> 
> 赞同：0
> 
> 时间：2012-04-04T06:58:06.837
> 
> 标签：java, xml-parsing

我正在研究Java。我正在解析一个 xml 文件，我正在获取标签值，它正在工作。我有如下的xml文件：

```
 <DOC>
  <STUDENT>
  <ID>1</ID>
  <NAME>DAN</NAME>
  <ADDRESS>U.K</ADDRESS> 
  </STUDENT>
  <STUDENT>
  <ID>2</ID>
  <NAME>JACK</NAME>
  <ADDRESS>U.S</ADDRESS> 
  </STUDENT>
  </DOC> 
```

我有一个问题，我想`<DOC>....</DOC>`用它们的标签名称和值来获取里面的数据。意味着我想要如下数据：

```
 "<STUDENT> 
  <ID>1</ID>
  <NAME>DAN</NAME>
  <ADDRESS>U.K</ADDRESS> 
  </STUDENT>
  <STUDENT>
  <ID>2</ID>
  <NAME>JACK</NAME>
  <ADDRESS>U.S</ADDRESS> 
  </STUDENT>" 
```

请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:04:05.567

Java 中最常见的方法是使用 SAX 或 Dom 解析库之一。

如果您查找它们，您应该会找到大量关于它们的文档/教程。

Dom 是最容易正常使用的，因为它将整个 XML 存储在内存中，然后您可以访问任何标记，但是，这会降低性能并且如果您使用非常大的 XML 可能会出现问题。SAX 需要更多的工作，但会读取 XML 并在每个标签到达时对其进行处理。

两者都能够做你需要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:04:56.960

看看 SAX 解析器。

这个链接也可能有帮助：[http ://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/](http://www.mkyong.com/java/how-to-read-xml-file-in-java-sax-parser/)

# ios - 如何访问相册中的视频并播放它们？

> ID：10006312
> 
> 赞同：1
> 
> 时间：2012-04-04T06:58:44.493
> 
> 标签：ios, xcode, ipad, uiimagepickercontroller

以下代码用于将视频保存到相册。

```
else if ([mediaType isEqualToString:(NSString *)kUTTypeMovie])
    {

        NSString *sourcePath = [[info objectForKey:@"UIImagePickerControllerMediaURL"]relativePath]; 
        UISaveVideoAtPathToSavedPhotosAlbum(sourcePath,nil,nil,nil);
    } 
```

如果是视频我想播放它如果是图像我想显示它。

帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:03:54.383

使用代码检查是图像还是视频：

```
 NSString *mediaType1 = [info objectForKey:UIImagePickerControllerMediaType];
    NSLog(@"mediaType : %@",mediaType1);

    if ([mediaType1 isEqualToString:@"public.image"])
    {
        //Show Image
}
else
{
    //show Video
} 
```

要播放视频，请检查[URL](http://mobile.tutsplus.com/tutorials/iphone/mediaplayer-framework_mpmovieplayercontroller_ios4/)。

**编辑：**

```
 NSString *moviePath = [bundle pathForResource:@"IMG_0017" ofType:@"MOV"];
        NSLog(@"moviePath : %@",moviePath);
     //   NSURL *movieURL = [[NSURL fileURLWithPath:moviePath] retain];

        NSURL *movieURL = [NSURL URLWithString:strValURL];
        NSLog(@"movieURL : %@",movieURL);
        if ([[[UIDevice currentDevice] systemVersion] doubleValue] >= 3.2)
        {
            NSLog(@"> 3.2");
            MPMoviePlayerViewController *mp = [[MPMoviePlayerViewController alloc] initWithContentURL:movieURL];
            if (mp)
            {
                [self presentMoviePlayerViewControllerAnimated:mp];
                mp.moviePlayer.movieSourceType = MPMovieSourceTypeFile;
                [mp.moviePlayer play];
                [mp release];
            }
        }
        else if ([[[UIDevice currentDevice] systemVersion] doubleValue] < 3.2)
        {
            NSLog(@"< 3.2");
            theMovie = [[MPMoviePlayerController alloc] initWithContentURL: movieURL];
            theMovie.scalingMode = MPMovieScalingModeAspectFill;
            [[NSNotificationCenter defaultCenter]
             addObserver: self
             selector: @selector(myMovieFinishedCallback:)
             name: MPMoviePlayerPlaybackDidFinishNotification
             object: theMovie];
            [theMovie play];
        }

- (void) moviePlayBackDidFinish:(NSNotification*)notification
{
    MPMoviePlayerViewController *moviePlayer = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:moviePlayer];
    [moviePlayer release];
    [self.navigationController setNavigationBarHidden:NO animated:YES];
}

- (void) movieFinishedCallback:(NSNotification*) aNotification 
{
    MPMoviePlayerController *player = [aNotification object];
    [[NSNotificationCenter defaultCenter]
     removeObserver:self
     name:MPMoviePlayerPlaybackDidFinishNotification
     object:player];
    [player autorelease];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:10:22.313

In your `- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info` method, you can get the url of the video and play it:

```
@property (nonatomic,retain) MPMoviePlayerController *moviePlayerController;

if ([mediaType isEqualToString:@"public.movie"])
{
    NSURL *aURL    = [info objectForKey:UIImagePickerControllerMediaURL];//get the url
    // and init the video player using this url
    _moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:aURL];
    [self.view _moviePlayerController.view];
    _moviePlayerController.useApplicationAudioSession = NO;
    _moviePlayerController.fullscreen = YES;
    [_moviePlayerController play];
} 
```

Of course, you'll have to import the `MediaPlayer.framework`

**EDIT:** A majority of Cocoa projects now use `arc`, so the above code would require you retain the `MPMoviePlayerController` instance yourself (as mentioned in [this answer](https://stackoverflow.com/questions/15058138/why-wont-my-mpmovieplayercontroller-play)).

# r - ggplot2：快速热图绘图，重塑？

> ID：10006317
> 
> 赞同：6
> 
> 时间：2012-04-04T06:59:07.763
> 
> 标签：r, ggplot2, heatmap

我正在尝试按照他们的教程重现[此博客](http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/)上提供的热图，但是当我尝试运行他们 2010 年 1 月的代码时，我在询问时遇到错误，

```
nba.m <- ddply(nba.m, .(variable), transform, rescale = rescale(value))
     Error in eval(expr, envir, enclos) : could not find function "rescale" 
```

[上面提到的博客](http://learnr.wordpress.com/2010/01/26/ggplot2-quick-heatmap-plotting/)上提供了可重现的代码

我正在使用 ggplot2_0.9.0 和 R 2.14.2。另外，我确实[在 stackoverflow.com 上阅读了这个帖子](https://stackoverflow.com/questions/8406394/how-to-produce-a-heatmap-with-ggplot2)。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-04T08:35:47.260

ggplot2 似乎`scales`不再自动加载库，因此要使用该`rescale`功能，您必须显式加载`library(scales)`.

当您收到有关未找到函数的错误时，该`??`命令可以帮助您找到该函数可能位于哪个包中，例如`??rescale`.

# javascript - 给定开始日期，如何在javascript中计算到当前日期的年数

> ID：10006318
> 
> 赞同：0
> 
> 时间：2012-04-04T06:59:18.907
> 
> 标签：javascript, date

我有一个开始日期值以`dd/mm/yyyy`格式输入到文本框中，一旦在其中输入值，我想为该文本框触发 onchange 事件并使用当前日期来计算经过的年数。

我如何在 JavaScript 中做到这一点，我已经在 C# 中实现了。javascript中是否有任何函数可以帮助我计算两个日期之间的年数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:23:48.867

在这里我得到了解决方案

[在 JavaScript 中计算年龄](https://stackoverflow.com/questions/4060004/calculate-age-in-javascript)

```
function getAge(dateString) {
    var today = new Date();
    var birthDate = new Date(dateString);
    var age = today.getFullYear() - birthDate.getFullYear();
    var m = today.getMonth() - birthDate.getMonth();
    if (m < 0 || (m === 0 && today.getDate() < birthDate.getDate())) {
        age--;
    }
    return age;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:14:01.533

你不能用 d/m/yyyy

`d/m/yyy`应该`ISO`兼容，即：`yyyy-mm-dd`

```
var g="22/12/1978".split('/')

 new Date().getFullYear()- new Date(g[2]+"/"+g[1]+"/"+g[0]).getFullYear() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:14:08.030

您可以手动解析日期，然后使用 getFullYear() 计算差异。您还可以使用库来解析日期，例如 jQuery UI

[http://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)

# sql - sql where int 的条件但列类型是 Varchar

> ID：10006321
> 
> 赞同：0
> 
> 时间：2012-04-04T06:59:23.420
> 
> 标签：sql, sqldatatypes, type-conversion

我有一个名为 Buttons 的表。按钮表我有列 button_number 。表包含 100 多条记录。现在我必须选择一个介于 10 到 50 之间的按钮编号。当我使用以下查询时，它不会返回零行。

```
select * from Buttons where button_number >= '10' and button_number <='50' 
```

查询中有什么问题。如果我对不同的列使用相同的查询（数据类型是 int），那么它工作正常。问题是因为列的数据类型吗？如果是这样，解决方法是什么？

注意：button_number 列的数据类型是 Varchar。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T07:02:38.023

button_number 是 varchar 并且您正在尝试进行整数样式比较。您需要将 button_number 列转换为整数。

```
select * from Buttons where 
    convert(integer, button_number) >= 10 and convert(integer, button_number) <= 50 
```

**编辑**

上述查询将需要进行表扫描，因为它需要在应用 where 子句之前将每个 button_number 转换为整数。这对于 100 行来说不是问题，但对于大量行来说会是个问题。

正如 Mikael Eriksson 的回答中提到的，更好的选择是将 button_number 的类型更改为整数类型（如果可能）。这将有几个优点：

*   在列中输入非整数值是不可能的
*   然后，您将能够对列应用整数索引。当表包含大量行时，这将大大提高查询速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:06:49.903

> 如果是这样，解决方法是什么？

其他答案告诉您将列投射到`int`查询中。如果列中只有整数，这对你有用。如果是这种情况，您应该将列的数据类型更改为`button_number`，`int`这样您就不会冒险在其中存在会破坏您的查询的字符值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:07:38.790

修改您的查询，如下所示

```
select * from Buttons where cast(button_number as int) >= 10 and cast(button_number as  int) <=50 
```

但请确保“button_number”列的所有值都没有任何字符

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T07:12:22.127

根据您的数据库类型和版本，但在 MySQL 中，您可能需要使用 SIGNED 或 UNSIGNED 作为数据类型：

```
SELECT * FROM Buttons 
WHERE CONVERT(SIGNED, button_number) >= 10 
AND CONVERT(SIGNED, button_number) <= 50 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-13T11:21:46.557

在 postgreSQL 数据库中，您可以像这样转换：

```
select * from Buttons where 
    button_number::int >= 10 and convert(integer, button_number) <= 50 
```

# php - 如果 SQL 表上存在值则跳过

> ID：10006330
> 
> 赞同：0
> 
> 时间：2012-04-04T07:00:06.280
> 
> 标签：php, sql, insert, skip

我有一个关于 SQL 的问题，我给出了一个小脚本，它从 twitter 获取人们对某人的评价，并将其从我的服务器插入到一个 sql 表中，代码运行良好，但我的问题是，脚本如何跳过一个条目当它已经存在于表中时，它会多次插入相同的条目，这里是代码：

```
 <?php
include '../config/config.php';
mysql_connect($dbhost, $dbuser, $dbpwrd) or die(mysql_error());
mysql_select_db($database) or die(mysql_error());

$rss = simplexml_load_file("http://search.twitter.com/search.rss?q=YaninGarciaD");
if($rss){
echo '<ul>';
foreach($rss->channel->item as $item){
            $author = (string) $item->author; // Title
            $link = (string) $item->link; // Url Link
            $description = (string) $item->description;
            $pubDate = (string) $item->pubDate; //Description

            list($usuario, $nombre3) = explode("@", $author);           
            list($basura, $nombre2) = explode(" (", $nombre3);
            $nombre = substr($nombre2, 0, -1);

            $piezasurl = explode("/", $link);
            $status = $piezasurl[5];
            $piezasfecha = explode(" ", $pubDate);

            if ($piezasfecha[2] == "Jan") {
            $mes = "01";
            } elseif ($piezasfecha[2] == "Feb") {
            $mes = "02";
            } elseif ($piezasfecha[2] == "Mar") {
            $mes = "03";
            } elseif ($piezasfecha[2] == "Apr") {
            $mes = "04";
            } elseif ($piezasfecha[2] == "May") {
            $mes = "05";
            } elseif ($piezasfecha[2] == "Jun") {
            $mes = "06";
            } elseif ($piezasfecha[2] == "Jul") {
            $mes = "07";
            } elseif ($piezasfecha[2] == "Ago") {
            $mes = "08";
            } elseif ($piezasfecha[2] == "Sep") {
            $mes = "09";
            } elseif ($piezasfecha[2] == "Oct") {
            $mes = "10";
            } elseif ($piezasfecha[2] == "Nov") {
            $mes = "11";
            } elseif ($piezasfecha[2] == "Dic") {
            $mes = "12";
            }

            $fecha = $piezasfecha[3].'-'.$mes.'-'.$piezasfecha[1].' '.$piezasfecha[4];

mysql_query("INSERT INTO yg_mensajes 
(nombre, mensaje, twitter, url, postid, tipo, fecha, aprovado)
VALUES ('$nombre', '$description', '$usuario', '$link', '$status', 2, '$fecha', 0 ) ") 
or die(mysql_error());              

echo '<li>';
echo $description.'<br />';
echo $usuario.'<br />';
echo $nombre.'<br />';
echo $link.'<br />';
echo $status.'<br />';
echo $fecha.'<br />';
echo '<br /></li>';

}
echo '</ul>';
}
?> 
```

twitter 的一个好处是帖子编号（在此代码中是 var **$status**）是唯一的，即之前不应该在表中的 var

您可以在此处查看正在运行的脚本： [http ://www.yaningarcia.com/unete/test.php](http://www.yaningarcia.com/unete/test.php)

我的 SQL 表结构是这样的：

```
 CREATE TABLE `yg_mensajes` (
  `id` int(11) NOT NULL auto_increment,
  `nombre` text,
  `mensaje` text,
  `twitter` text,
  `url` text,
  `postid` text,
  `tipo` int(11) default NULL,
  `fecha` datetime default NULL,
  `aprovado` int(11) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=1 DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

谢谢！！:D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:04:52.200

您可以使用`INSERT IGNORE...`或`INSERT...ON DUPLICATE UPDATE..`命令。

[http://www.electrictoolbox.com/mysql-insert-ignore/](http://www.electrictoolbox.com/mysql-insert-ignore/)

[http://www.mysqlperformanceblog.com/2006/05/29/insert-on-duplicate-key-update-and-summary-counters/](http://www.mysqlperformanceblog.com/2006/05/29/insert-on-duplicate-key-update-and-summary-counters/)

希望能帮助到你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:08:53.543

我认为，您需要在 postid 字段上创建索引并使用 INSERT IGNORE 命令。或使用 INSERT...ON DUPLICATE KY UPDATE，但在这种情况下，您需要更新一个或多个字段 [http://dev.mysql.com/doc/refman/5.6/en/insert.html](http://dev.mysql.com/doc/refman/5.6/en/insert.html)

# javascript - 为什么 `{}.toString.apply(array)` 不起作用？

> ID：10006332
> 
> 赞同：7
> 
> 时间：2012-04-04T07:00:15.267
> 
> 标签：javascript

通常，当我想检查对象的类型（无论是数组、NodeList 还是其他）时，我会使用以下内容：

```
var arr = [] // I don't do this, but it's for the sake of the example
var obj = {}
obj.toString.apply(arr) // This works 
```

问题是：为什么我*不能*执行以下操作？

```
var arr = []
{}.toString.apply(arr) // Syntax error: Unexpected token . 
```

我不知道语法错误在哪里。

不过，我可以做一些接近的事情`[]`，以下工作：

```
var nodeList = document.getElementsByClassName('foo')
[].forEach.call(nodeList, function(bar) { console.log(bar) }) // Works 
```

所以...我很困惑。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T07:01:35.983

当你用`{`JavaScript 开始一行时，它认为它开始了一个块语句，而不是一个对象字面量。用括号括起来，你会没事的。

# macos - 在 os x 上安装 Fontforge 时“找不到 GCC”

> ID：10006333
> 
> 赞同：1
> 
> 时间：2012-04-04T07:00:15.350
> 
> 标签：macos, llvm-gcc, fontforge

只想在mac os x上安装Fontforge，
首先尝试：`brew install fontforge`
但是得到`Error: Failed executing: make (fontforge.rb:38)`
然后尝试`brew install fontforge --use-clang`
但仍然是同样的错误。

然后我尝试了`brew install fontforge --use-gcc`
但是 我已经安装`Error: GCC could not be found`
了`gcc --version` 节目和 其他节目，， `i686-apple-darwin11-llvm-gcc-4.2 (GCC) 4.2.1.....`
`xcode``command line tools for xcode``cairo`

我是mac的新手，完全迷路了，我该怎么办？
任何建议将不胜感激，并提前感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T05:45:32.837

好吧，它已经解决了：

[https://github.com/mxcl/homebrew/issues/11457](https://github.com/mxcl/homebrew/issues/11457)

# android - android webview或浏览器不会在设备重启时删除会话cookie

> ID：10006334
> 
> 赞同：5
> 
> 时间：2012-04-04T07:00:36.773
> 
> 标签：android, android-webview, session-cookies

当我重新启动我的 android 设备（kindle fire）或终止应用程序时，浏览器或 WebView 的“会话”cookie 似乎没有被删除。这似乎与 Windows 或 MacOS 上的浏览​​器行为完全不同，如果您终止浏览器应用程序，“会话”cookie 就会消失。浏览器进程重新启动后，仅应保留“持久”cookie。澄清一下，这里的“会话cookie”的含义是服务器设置的cookie，没有过期日期，在响应中使用http头，例如： Set-Cookie: mycookie=ifmr0846qcsdpeqqkgvuqmc5u7; path=/ 由于没有指定到期日期，浏览器通常不会保留这些，根据我的理解，让它们保持活动状态直到进程被终止。通常会话 ID 是使用这种类型的 cookie 设置的。

我确信这些不会在设备重新启动或应用程序重新启动时被删除，因为如果我登录到我的网站，建立一个会话（使用非持久性/“会话”cookie 作为会话 ID，在这种情况下命名为 PHPSESSID），然后重新启动设备并打开浏览器或 WebView 到相同的 url，我仍然登录，这对我来说意味着浏览器仍然发送相同的 PHPSESSID cookie，该 cookie 在设备重启之前由服务器设置。

任何人都可以解释/确认 android WebViews 或浏览器的这种行为吗？他们如何准确地管理会话和持久性 cookie？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-22T14:10:38.047

> 你是对的，会话 cookie 不会在 WebView 的生命周期中自动过期。如果您发现此问题，您可以随时清除所有 cookie 或使用空值明确覆盖会话 cookie。

参考：[Android WebView / CookieSyncManager 中会话 cookie 的生命周期](https://stackoverflow.com/questions/17051903/lifecycle-of-a-session-cookie-in-an-android-webview-cookiesyncmanager)

清除会话使用

```
CookieManager.getInstance().removeSessionCookie();
CookieManager.getInstance().removeAllCookie(); 
```

# google-calendar-api - 访问公共 Google 日历 RSS 提要是否有配额？

> ID：10006335
> 
> 赞同：0
> 
> 时间：2012-04-04T07:00:40.453
> 
> 标签：google-calendar-api

我正在通过其 RSS 提要访问公共谷歌日历。URL 类似于以下内容

```
https://www.google.com/calendar/feeds/{myCalendarId}/public/full-noattendees?alt=json 
```

我现在想知道这种访问是否有配额（可能是每个设备？？）。如果是：每天的最大访问次数是多少，我在哪里可以看到还剩多少，如果需要，我可以在哪里请求更多。我想在这种情况下我必须添加一个客户端 ID 左右。

顺便说一句：我没有使用任何 API 或身份验证。我只是调用 URL 并自己解析结果。

谢谢西蒙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T03:10:25.713

是的，Google 确实规定了每天 10,000 次“点击”的限制。您可以在此处阅读有关配额和限制的更多信息：
[https ://developers.google.com/google-apps/calendar-resource/#api_limits_and_quotas](https://developers.google.com/google-apps/calendar-resource/#api_limits_and_quotas)
[https://developers.google.com/google-apps/calendar/pricing](https://developers.google.com/google-apps/calendar/pricing)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T22:16:44.290

好的，我现在用一个简单的循环尝试了它。我已经连续两天每天加载页面 20,000 次。该查询从未被阻止，因此看起来公共日历访问没有配额。

# android - 如何在 Android 4.04 浏览器中创建快速控件

> ID：10006336
> 
> 赞同：2
> 
> 时间：2012-04-04T07:00:42.107
> 
> 标签：android

您知道如何为自定义 Web 视图创建在 Android 4.0.4 默认浏览器中显示的快速控件吗？这非常令人印象深刻，将拇指滑过屏幕边缘，一​​些菜单项会在您的指尖弹出。这是一个示例链接：[http ://www.droid-life.com/2012/02/07/tip-browser-quick-controls-expanded-in-android-4-0-4/](http://www.droid-life.com/2012/02/07/tip-browser-quick-controls-expanded-in-android-4-0-4/)

我试图在自定义 Web 视图中实现它但失败了

# mysql - 关于 Mysql Count 的任何建议

> ID：10006339
> 
> 赞同：2
> 
> 时间：2012-04-04T07:00:48.910
> 
> 标签：mysql, sql, database

我在 mySql 中有一个 t_class 表，
在这个表中有 3 列，No，CLASS 和 POINT。
此表中大约有 5000 条记录。我想要这张表中的类数。

```
No    CLASS     POINT
1     9         100
2     10        70
3     11        80
4     9         90
5     10        50
6     M         60
7     M         70
8     9         40
9     10        90
10    11        90
11    M         80
12    M         75
13    11        40
14    10        100
15    9         60 
```

如您所见，有 4 种类型的类 - 9、10、11 和 M。
但是有一个问题。当它计算类数时，它必须汇总第 11 类和第 M 类。例如

```
CLASS    COUNT
9        4
10       4
11       7 
```

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T07:06:44.587

```
SELECT CLASS, COUNT(*) AS CNT
FROM table
GROUP BY CASE WHEN CLASS='M' THEN '11' ELSE CLASS END 
```

# jquery - 如果我在第一次加载后不刷新页面，js 不起作用，为什么？

> ID：10006341
> 
> 赞同：-3
> 
> 时间：2012-04-04T07:01:11.077
> 
> 标签：jquery, jquery-mobile

如果我在第一次加载后不刷新页面，js 将不起作用，并且 div 的 background-img 也不会显示。代码：`<a data-role="button" data-icon="plue" href="register.jsp" data-transition="pop">register</a>` 如果我设置data-ajax ='false'，js和css可以成功加载，但我想有一个过渡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T17:55:14.793

当 AJAX 打开时，jQM 不会加载整个页面，它会获取页面，然后去除 head 标记中的任何内容。他们的逻辑是，这些内容将在整个应用程序中保持一致，因此为了减少下载和加快加载时间，将其删除、解析 HTML 并将其作为新页面注入（这就是为什么您还可以获得主题标签导航）。

如果 AJAX 正在运行，jQM 也不会运行页面内的任何 JS。所以如果你正在做这样的事情`onClick="SomeJS();"`将不会运行。一般来说，你不应该对 jQuery 做任何事情。

为了解决这个问题并防止不是每个页面上的元素出现 JS 错误，我已经开始做这样的事情：

在你的 body 标签之后，放置一个带有 id 或不同类的包装器 DIV 或 Section（因为任何智能手机都能很好地读取 HTML5）并添加 data-role="page" 属性。

```
<body>
<div id="page1" data-role="page">
... page content ...
</div>
</body> 
```

将所有 JS 保存在一个文件中，或在每一页上引用所有文件。当您有需要运行的特定于页面的脚本时，请将其包装成如下内容：

```
$('#page1').live('pageshow', function() {
//do what you need to do
}); 
```

希望这会有所帮助。

# computational-geometry - 使用 VB.net 或 C# 增量旋转曲线

> ID：10006348
> 
> 赞同：0
> 
> 时间：2012-04-04T07:01:59.390
> 
> 标签：computational-geometry

我正在尝试使用 c# 和 Vb.net 中的以下代码增量旋转曲线（编辑器已经导入了必要的库）。在我的 3D 建模程序中，我得到重叠线而不是不同角度的线。我究竟做错了什么？

在 C# 上：

```
private void RunScript(Curve ln, int x, double angle, ref object A)
{
List<Curve> lines = new List<Curve>();
Int16 i = default(Int16);
for(i = 0; i <= x; i++){
ln.Rotate(angle * i, Vector3d.ZAxis, ln.PointAtEnd);
lines.Insert(i, ln);
}
A = lines; 
```

在 VB.net 上：

```
Private Sub RunScript(ByVal ln As Curve, ByVal x As Integer, ByVal angle As Double,          
ByRef A As Object)

Dim lns As New List(Of Curve)()
Dim i As Int16
For i = 0 To x
ln.Transform(transform.Rotation(angle * i, vector3d.ZAxis, ln.PointAtEnd))
lns.Insert(i, ln)
Next
A = lns 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T12:23:24.033

我需要在循环中旋转下一个之前复制该行，否则没有它的痕迹。

在 C# 中：

```
private void RunScript(Curve ln, int x, double angle, ref object A)
{
 List<Curve> lns = new List<Curve>;
 for (int = 0; i<= x; i++)
  {
   Curve copy = ln.DuplicateCurve();
   copy.Rotate(angle * i, Vector3d.ZAxis, ln.PointAtEnd);
   lns.Add(copy);
  }
}
A = lns; 
```

在 VB.net 中：

```
Private Sub RunScript(By Val ln As Curve, ByVal x As Integer, ByVal angle As Double, By Ref A as Object)
  Dim lns As New List(Of Curve) ()
  For i As Integer = 0 To x
     Dim nl As Curve = ln.DuplicateCurve()
     nl.Transform(transform.Rotation(angle*i, vector3D.ZAxis, ln.PointAtEnd))
     lns.Add(nl)
  Next
  A = lns
End Sub 
```

# wpf - 来自后面代码的复选框

> ID：10006349
> 
> 赞同：1
> 
> 时间：2012-04-04T07:02:09.727
> 
> 标签：wpf, data-binding, user-controls, wpf-controls

我有 3 列使用数据库中的 xaml 中的绑定填充，然后我有一些列在`ListView`. 动态列的标题由后面的代码填充，例如：

```
viewLayout.Columns.Add(
    new GridViewColumn {       
        Header = subjectvalues_forstdatt[i],
        DisplayMemberBinding = new Binding(String.Format("[{0}]", i))    
    }
); 
```

我想要一个`CheckBox`在这个动态列中，而不是 displaymemberbinding 显示的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:42:50.060

尚未对其进行测试，但这样的事情应该可以工作：

```
 DataTemplate template = new DataTemplate { DataType = typeof(object) };  // <-- insert your concrete objet type here

  FrameworkElementFactory stackPanelFactory = new FrameworkElementFactory(typeof(StackPanel));
  stackPanelFactory.SetValue(StackPanel.OrientationProperty, Orientation.Vertical);

  FrameworkElementFactory checkbox = new FrameworkElementFactory(typeof(CheckBox));
  checkbox.SetBinding(CheckBox.IsCheckedProperty, new Binding(String.Format("[{0}]", subjectvalues_forstdatt[i]));
  stackPanelFactory.AppendChild(checkbox);

  viewLayout.Columns.Add(new GridViewColumn
  {

    Header = subjectvalues_forstdatt[i],
    CellTemplate = template 
```

或者我更喜欢`DataTemplate`用 XAML 编写并通过 CodeBehind 中的 Key 访问它。

```
CellTemplate = TryFindResource("myDataTemplateKey") as DataTemplate 
```

# algorithm - 用户排名模型

> ID：10006352
> 
> 赞同：2
> 
> 时间：2012-04-04T07:02:24.200
> 
> 标签：algorithm, probability, graph-algorithm, ranking, statistics

我正在尝试开发一个简单的游戏，一组用户可以来玩游戏。根据用户的表现，他们得到正分或负分。

我希望考虑用户的两个参数`weight`（他参加过的比赛次数和他在这些比赛中的表现）他的`instantaneous skill sets`. 对于每个用户，这两者结合在一起并与其他用户的分数进行比较可能会给出他在当前比赛中的分数。

然后结合分数和之前的评分，我们可能会得出用户的新评分。

我不想重新发明轮子。我试过并想出了这个，但这看起来很天真，我不确定在现实世界中的表现会如何。

```
Pos[i] and Neg[i] are the positive and negative score of the users in a match. 
```

* * *

```
Step1: Calculate the average score of n people `for i in range(1, N): sum = sum + Pos[i] Average = sum/N` do the same for negative score. 

Step2: Calculate the Standard Deviation (SD)

Step3: Calculate the weight of the user as follows say the user has played M matches, his weight W will be Mxabs((sum(POS[i])/N1 - (sum(NEG[i])/N2))

(where N1 is the number of times he has scored positive scores and N2 the number of times he scored negative result)

Step4: Current Score = (POSi - SD)xW

Step5: His New Rating = Old Rating + Current Score 
```

请建议一些标准的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:07:49.520

您应该查看[国际象棋评分](http://en.wikipedia.org/wiki/Chess_rating_system)是如何计算的。有一些变化可供选择，但我认为它应该适合您的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:05:44.760

正如 Running Wild 所提到的，您可以检查国际象棋中使用的 ELO 等级。或者，您也可以查看帝国时代 3 中使用的功率等级系统。在[这篇文章](http://forum.agecommunity.com/forums/thread/830567.aspx)中，他们解释了它的工作原理以及他们用它替换 MSN 区域中使用的旧 ELO 等级系统的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T15:15:06.467

查看 Glicko、TrueSkill、Kaggle 国际象棋评级比赛中的不同方法

[http://timsalimans.com/how-i-won-the-deloittefide-chess-rating-challenge/](http://timsalimans.com/how-i-won-the-deloittefide-chess-rating-challenge/)

[http://blog.kaggle.com/2012/03/20/could-world-chess-ratings-be-decided-by-the-stephenson-system/](http://blog.kaggle.com/2012/03/20/could-world-chess-ratings-be-decided-by-the-stephenson-system/)

我在这里放了一些 URL，然后才注意到 OP 是这样的问题：[http ://www.reddit.com/r/statistics/comments/rsomx/how_do_i_calculate_the_rating_of_a_player_in_a/](http://www.reddit.com/r/statistics/comments/rsomx/how_do_i_calculate_the_rating_of_a_player_in_a/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-05T18:30:51.510

好吧，它已经在[这里](http://blog.fruiapps.com/2012/04/Chose-a-mathematical-model-to-rate-players)完成了，它考虑了以前的文献和其他东西。它还展示了最有名的方法以及他们是如何做到的。

# mysql - 查询时间过长

> ID：10006354
> 
> 赞同：0
> 
> 时间：2012-04-04T07:02:33.173
> 
> 标签：mysql

MySql 查询需要很长时间才能给出结果

```
Select pty_code from sis.tblBf a where a.BFno 
       not in (select b.BNo from sislatest.tbltransaction b) 
```

注意：我正在比较两个不同的数据库并获得差异。

```
Select A.pty_code from DataBase1.TableName A 
       where A.BFno NOT IN (SELECT B.BNo From DataBase2.TableName B) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:08:31.857

也许是索引问题？这是 mysql 解释语法的用武之地：

[http://dev.mysql.com/doc/refman/5.0/en/using-explain.html](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)

其他可能有帮助的事情是“优化表”，甚至“分析表”以检查不一致。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:26:51.817

使用子选择，尤其是使用“not in”子句会很慢。我建议在 where 子句中使用“is null”重写左外连接。

```
SELECT a.pty_code from sis.tblBf a LEFT JOIN sislatest.tbltransaction b on b.BNo = a.BFno WHERE b.BNo IS NULL 
```

我认为这会起作用，但如果没有要测试的数据库，我会盲目地写它。

如果这仍然很慢，我会看一下并确保 b.BNo 和 A.BFNo 上有索引。

# c# - 尝试单击按钮登录网站

> ID：10006356
> 
> 赞同：3
> 
> 时间：2012-04-04T07:02:40.217
> 
> 标签：c#, wordpress, cookies, httpwebrequest, webbrowser-control

几周前我刚刚开始使用 C#。我有一项我正在尝试执行的任务，但不确定我现在执行的方式是否正确。

我正在尝试登录一个网站（在我的情况下是 WordPress 网站 - 以获得更好的选择）并使用 C# 在管理面板中导航

到目前为止，我所做的是创建一个新项目——Windows 窗体应用程序。

以下代码 - 使用密码/用户名和其他参数作为 POST 向网站发送请求

```
private void button2_Click(object sender, EventArgs e)
{
    CookieContainer cookieJar = new CookieContainer();
    CookieContainer cookieJar2 = new CookieContainer(); // will use this later
    string testaa = ""; // will use this later
    string paramaters = "log=xxxx&pwd=xxxx&testcookie=1&redirect_to=http://www.example.com/wp-admin/&wp-submit=Log In";
    string strResponse;
    HttpWebRequest requestLogin = (HttpWebRequest)WebRequest.Create("http://www.lyndatobin-howes.com/wp-login.php");
    requestLogin.Method = "POST";
    requestLogin.AllowAutoRedirect = false;
    requestLogin.ContentType = "application/x-www-form-urlencoded";
    requestLogin.CookieContainer = cookieJar;
    requestLogin.ContentLength = paramaters.Length;
    StreamWriter stOut = new StreamWriter(requestLogin.GetRequestStream(), Encoding.ASCII);
    stOut.Write(paramaters);
    stOut.Close();
} 
```

然后我有这段代码来获取响应的cookie。

```
HttpWebResponse response = (HttpWebResponse)requestLogin.GetResponse();
foreach (Cookie c in response.Cookies)
{
    cookieJar2.Add(new Cookie(c.Name, c.Value, c.Path, c.Domain));
} 
```

然后我有这个来读取响应+关闭一些流。

```
StreamReader stIn = new StreamReader(requestLogin.GetResponse().GetResponseStream());
strResponse = stIn.ReadToEnd();
string responseFromServer = stIn.ReadToEnd();
webBrowser1.DocumentText = responseFromServer;
stIn.Close();
response.Close(); 
```

然后我尝试将上述cookie用于我尝试访问的页面，如下所示：

```
HttpWebRequest requestLogin2 = (HttpWebRequest)WebRequest.Create("http://www.example.com/wp-admin/");
requestLogin2.Method = "POST";
requestLogin2.AllowAutoRedirect = false;
requestLogin2.ContentType = "application/x-www-form-urlencoded";
requestLogin2.CookieContainer = cookieJar2;
requestLogin2.ContentLength = paramaters.Length;
StreamWriter stOut2 = new StreamWriter(requestLogin2.GetRequestStream(), System.Text.Encoding.ASCII);
stOut2.Write(paramaters);
stOut2.Close();

StreamReader stIn2 = new StreamReader(requestLogin2.GetResponse().GetResponseStream());
strResponse = stIn2.ReadToEnd();
string responseFromServer2 = stIn2.ReadToEnd();
webBrowser1.DocumentText = responseFromServer2;
richTextBox2.Text += "\n\n\n" + responseFromServer2;
stIn.Close(); 
```

好吧，由于某种原因它不起作用，我已经尝试了一个星期。

我尝试显示标题 - 在第一次请求查看我返回的标题之后。然后查看我构建的cookie（cookieJar2），它们似乎不一样..

无论如何，任何关于此事的帮助都会很棒并受到高度赞赏。我试图提供尽可能多的细节。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:36:39.277

我注意到您的代码的第一件事是您`GetResponse()`在初始登录时调用了两次：

```
HttpWebResponse response = (HttpWebResponse)requestLogin.GetResponse(); 
```

和

```
StreamReader stIn = new StreamReader(requestLogin.GetResponse().GetResponseStream()); 
```

结果，您发出了*两次*登录请求，并将返回两个不同的 cookie。这就是为什么 cookie`cookieJar2`与您稍后输出的不匹配的原因。重用你的`response`对象：

```
StreamReader stIn = new StreamReader(response.GetResponseStream()); 
```

接下来，当您尝试加载管理页面时，请不要加载`POST`它。您的第二个请求应该是`GET`检索页面内容。

# javascript - 下拉列表和文本框上的 googlemap api 代码

> ID：10006357
> 
> 赞同：0
> 
> 时间：2012-04-04T07:02:41.687
> 
> 标签：javascript, google-maps-api-3

如何将下拉框中选择的值获取到文本框中。我有一个文本框和一个下拉框，其中列出了村庄名称。如果选择更改，该值应反映在文本框中。请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:24:46.603

这是一个 Javascript 101 问题！我不应该回答但是......

```
<script type="text/javascript">
function selectChange(val)
{
   document.getElementById("text_id").value = val;
}
</script>
<form>
<input id="text_id" value="" type="text" size="10" />
<br />
<select id="select_id" onChange="selectChange(this.value);">
<option value="">-- Select --</option>
<option value="val1">val1</option>
<option value="val2">val2</option>
<option value="val3">val3</option>
</select> 
```

# asp.net-mvc - 在 Asp.net MVC 中从后面的代码打开新选项卡

> ID：10006364
> 
> 赞同：0
> 
> 时间：2012-04-04T07:03:19.267
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2

我需要在 Asp.net MVC 后面的代码中在新选项卡中打开另一个站点。

返回重定向（“网址”）；用于在同一选项卡中打开另一个站点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:30:30.050

这对用户来说似乎并不实用，因为在第二个选项卡中进行身份验证后，他们必须刷新第一个选项卡才能看到效果。

的`ReturnUrl`属性`FormsAuthentication`似乎做你想做的事。当用户需要登录时，他们会被重定向到登录页面，登录后他们会被重定向回来。

如果您正在大量使用 javascript 和 ajax，并且想要保留当前页面的 javascript 变量但需要登录来执行 ajax 调用，那么可能还有另一种解决方案。如果您的 ajax 调用的响应是未经身份验证的标头，请打开一个灯箱或类似的带有用户名和密码字段的东西。使用 ajax post`AccountController`再次登录用户。这样，用户将再次通过身份验证，但您保留 javascript 变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-03T09:45:51.750

如果您从表单调用操作并使用提交的输入类型，您可以尝试 `<input type="submit" formtarget="_blank" />` 如果您使用链接`<a>`或 AjaxCall，您可以尝试 `<a target="_blank"></a>`或在 ajax 助手设置属性**@target="_blank"**

这是我的代码cshtml

```
 @using (Html.BeginForm("PersonsReport", "Reports"))
        {
            <br />
            <div style="text-align: center;">
                <input type="submit" formtarget="_blank" class="btn btn-primary" value="GetReport" style="width:100%;" />
            </div>
            <br />
        } 
```

控制器.cs

```
 public ActionResult PersonsReport()
    {
        return Redirect("/PersonsReport.aspx");

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T06:37:53.807

这只能使用 javascript 来完成。尝试这个。

`<% Response.Write '<script type="text/javascript"> window.open(url); </script>' %>`

希望它有效。

# c - 从文件中读取数组

> ID：10006369
> 
> 赞同：1
> 
> 时间：2012-04-04T07:03:41.250
> 
> 标签：c

我从 Java 和 C# 回到 C。我坚持使用以下简单程序尝试从具有函数的文件中读取两个数组。谁能指出我在哪里搞砸了？

编译器说：错误：二进制*的无效操作数（有'int *'和'int *'）

文件格式为

```
 4
    1   2   3   4
    23  23  14  11 
```

我的`ReadFromFile`函数需要从文件`A`中填充缓冲区。`B`

```
#include<stdio.h>

void ReadFromFile (const char* file_name, int *A, int *B, int *length)
{
    FILE* file = fopen (file_name, "r");
    fscanf (file, "%d", length);            
    int i;
    for(i = 0; i < length; i++)
    {
        fscanf (file, "%d", A+i); 
    }  
    for(i = 0; i < length; i++)
    {
        fscanf (file, "%d", B+i); 
    }   
    fclose (file);        
}

int main()
{
    int *A; int *B; int length;
    ReadFromFile("input.txt", A, B, &length);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:06:43.480

```
int main()
{
    int A; int B; int length;
    ReadFromFile("input.txt", &A, &B, &length);

    return 0;
} 
```

尝试使用 A 和 B 作为变量而不是指针，并使用地址调用函数。

我不确定这是否是问题所在。但是试一试。

抱歉，我被 int 指针弄糊涂了。我猜你想要`int[] A`的其实是一样的`int* A`。但是你必须为数组分配一些内存或用给定的大小初始化它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:07:09.567

在您的函数中，您使用 A+i 来访问您未分配的内存中的位置。换句话说：你需要先调用 malloc 来获取内存。

在这里考虑一下您的结构：您有地址变量 A 和 B，但您从未将它们指向已分配内存的地址。如果你想在你的函数之前这样做，你需要知道数组的长度。如果要在函数中执行此操作，则需要传递 A 和 B 的地址以分配给它：

```
void ReadFromFile (const char* file_name, int** A, int** B, int* length)
{
  FILE* file = fopen (file_name, "r");
  fscanf (file, "%d", length);
  *A = (int*) malloc(length * sizeof(int))
  // now use (*A)+i 
```

然后你会改变主要

```
int* A; int* B; int length;
ReadFromFile("input.txt", &A, &B, &length); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:07:13.423

首先是指向垃圾的指针`A`，`B`如果你真的想存储一些东西（或期望分段错误或内存损坏），你需要分配空间。

它在抱怨你的 for 循环。`length`永远不会被初始化，所以无论如何你都会发送一个指向垃圾数据的指针（或者它永远不会填充从文件读取）。

`i < length`无效（在这个意义上），因为您正在将`int`值与地址或`int *`（这没有意义）进行比较。你可能是说`i < *length`；因为`length`是一个指针，需要取消引用它的实际值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T07:07:47.660

调用您的函数时，您应该提供地址参考，例如 &A 和 &B

这就是您应该如何正确阅读文本文件的方式:)

```
FILE *file = fopen(file_name, "r");
while(file != EOF){
    fscanf(...)
} 
```

**编辑**：

您不需要使用双指针。`main()`只需以整数初始化`Int A,B`并为您的方法提供地址。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T07:10:46.330

```
void ReadFromFile (const char* file_name, int *A, int *B, int *length)
/* ... */
    for(i = 0; i < length; i++)
    {
        fscanf (file, "%d", A+i); 
    } 
```

`A`您从传入了一个整数`main()`，但在这里您尝试访问完全不相关的内存。也一样`B`。你的意思是分配`A`和`B`作为数组吗？

例如改变：

```
int *A; int *B; int length; 
```

到

```
int A[100], B[100], length; 
```

或类似的东西。（一旦您知道需要多少数组，也许可以动态分配数组 - 或者根据需要分配它们`malloc(3)`并增加它们`realloc(3)`。）

# blackberry - TLSIOException 在 Blackberry Torch 9810 和 9860 上通过 Https 连接

> ID：10006372
> 
> 赞同：0
> 
> 时间：2012-04-04T07:03:51.437
> 
> 标签：blackberry, java-me

我正在尝试通过 Torch 9810 和 9860 上的 Https 连接进行连接，但我收到了[TLSIOException](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/cldc/io/ssl/TLSIOException.html)。我在 9700 OS v6.0 上测试了代码，它在上面运行成功。但这个问题只能在 9810 和 9860（都是 Torch 设备）上重现。我在这个问题上看到了一些线程，但找不到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:14:12.663

TLSIOException 有一个方法 getException()，它将返回一个 TLSException。如果您随后查看该 TLSException，您应该能够了解有关该问题的更多信息。例如，TL​​SException 有两个子类[——TLSAlertException](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/crypto/tls/TLSAlertException.html)和[TLSCancelException](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/cldc/io/ssl/TLSCancelException.html)。如果您的 TLSException 实际上是 TLSAlertException，您可以查看警报属性以了解有关该问题的更多信息。

# php - 在表的多个字段中搜索字符串

> ID：10006373
> 
> 赞同：5
> 
> 时间：2012-04-04T07:03:54.100
> 
> 标签：php, mysql, sql

我有一个表**用户**，其中包含字段**（id、first_name、middle_name、last_name）。**

我想写一个查询来通过他的名字找到一个用户。姓名可以是名字、中间名或姓氏。

```
$sql = "SELECT * FROM user 
        WHERE first_name like '%$name%' OR  
              middle_name like '%$name%' OR
              last_name like '%$name%'"; 
```

它是有效的查询吗？（安全问题暂时搁置。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:42:27.023

更改表并添加复合全文索引，`First_name,second_name,last_name`然后使用此查询

```
select * 
from table_name 
where match (`First_name`,`second_name`,`last_name`) against('name') 
```

它比您的查询快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:06:30.480

只要`LIKE '%something%'`在 WHERE 子句中有一个，就强制执行表扫描。所以是的，它是低效的，但是一三个`LIKE`语句不会有什么不同。

表扫描是最大的性能损失。

考虑查看 MySQL 的[全文搜索](http://dev.mysql.com/doc/refman/5.6/en/fulltext-search.html)功能。它旨在更有效地回答此类查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:09:06.160

如果您需要在多个字段中搜索模式，并且**您有权更改表架构**，我建议您实施[FULL-TEXT SEARCH](http://dev.mysql.com/doc/refman/5.0/en/fulltext-search.html)。

希望能帮助到你 ：）

# iis-7 - SSRS 2005 与 ADFS 与 IIS 7.5

> ID：10006375
> 
> 赞同：1
> 
> 时间：2012-04-04T07:03:56.503
> 
> 标签：iis-7, reporting-services, windows-server-2008, wif, adfs

我已经在 Windows 2008 R2 机器上安装了 SQL Server Reporting Services 2005，并且成功地在报表服务器和报表管理器虚拟应用程序上集成了 Windows 身份验证。您知道是否可以将报表管理器和报表服务器集成到 ADFS？

我找到了一些非常有用的[教程](http://blogs.technet.com/b/adfs/archive/2007/05/07/configuring-sql-reporting-services-to-use-adfs-authentication.aspx)，但到目前为止还没有找到任何有关在 IIS 7.5 下使用 ADFS 运行报表虚拟应用程序的信息。在 IIS 6 下运行看起来是可能的。

# android - 为什么我不能使用 adb 命令将 sqlite 推送到 Android 中？

> ID：10006378
> 
> 赞同：3
> 
> 时间：2012-04-04T07:04:16.763
> 
> 标签：android, sqlite, mount

我有一个扎根的 Nexus S，它没有安装 Sqlite，所以我用谷歌搜索它，发现我需要使用这个命令：

```
adb push sqlite3 /sdcard/ 
```

但是它给了我这个错误：

```
failed to copy 'sqlite3' to '/sdcard//sqlite3': Read-only file system 
```

这意味着 /system 是只读的。然后我搜索它，发现我需要将我的 /system 文件夹重新挂载为 rw。我在 adb shell 中使用了这个命令：

```
mount -o rw,remount -t yaffs2 /dev/block/mtdblock5 /system 
```

我仍然无法推送 Sqlite3，它在命令行窗口中产生与以前相同的错误。然后我输入

```
root@android:/ # mount 
```

但我只能看到 /system 的安装方式不同：

```
/dev/block/platform/s3c-sdhci.0/by-name/system /system ext4 rw,relatime,barrier=
1,data=ordered 0 0 
```

如何将我的系统文件夹挂载为“rw”并将 sqlite3 推送到我的 Android 手机中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:08:45.540

也许您可以尝试其他位置。在创建 tmp 文件夹后，我用来 root 手机的脚本将其内容放在 /data/local/ 上：

```
adb shell "cd /data/local && mkdir tmp"
adb push sqlite3 /data/local/tmp/.
adb shell "chmod 755 /data/local/tmp/sqlite3"
adb shell "cp /data/local/tmp/sqlite3 /system/bin/sqlite3"
adb shell "cd /data/local/tmp && rm *" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T08:38:19.573

事实上，这两个答案是强制性的。如果我们只设置

```
adb shell "cd /data/local && mkdir tmp"
adb push sqlite3 /data/local/tmp/.
adb shell "chmod 755 /data/local/tmp/sqlite3"
adb shell "cp /data/local/tmp/sqlite3 /system/bin/sqlite3"
adb shell "cd /data/local/tmp && rm *" 
```

我们有同样的错误

```
Read-only file system 
```

因此，在将 sqlite3 复制到 /system/bin/sqlite3 之前，我们必须添加以下行：

```
mount -o rw,remount -t yaffs2 /dev/block/mtdblock5 /system 
```

# manifest - 清单引用文件“Bing.Maps.dll”，它不是有效负载的一部分

> ID：10006384
> 
> 赞同：3
> 
> 时间：2012-04-04T07:04:40.627
> 
> 标签：manifest, bing-maps, windows-8, microsoft-metro

错误 1 ​​清单引用文件“Bing.Maps.dll”，该文件不是有效负载的一部分。C:\Users\xxx\Desktop\xxx\Applicationxx\Applicationxx\Package.appxmanifest Application7

我将此添加到现有的 Metro 应用程序中，它给了我该错误，有人有解决方案吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-09T18:08:33.903

转到项目的属性，在 Build 下，您将看到 Platform Target。选择*x64*或*x86*而不是*Any CPU*，应该可以解决。

~郭红

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T14:42:44.187

要为 Metro 应用程序正确引用 Bing 地图...

转到：项目 -> 添加参考 -> Windows -> 扩展

现在，选择“Bing Maps for ...”*和*“Microsoft Visual C++ Runtime Package”

如果您不选择第二个包，那么在您尝试实际部署您的应用程序之前，一切似乎都很好。

# mysql - MySQL 查询以明智地从 magento 数据库类别中检索新添加的产品

> ID：10006390
> 
> 赞同：0
> 
> 时间：2012-04-04T07:05:01.163
> 
> 标签：mysql, magento

我创建了一个自定义下拉属性，其值为“yes”或“on”。现在我的问题是我们如何编写一个 MySQL 查询来检索类别中新添加的产品，这些产品通过使用 MySQL 数据库的自定义属性检查为“是”，我们必须在哪里放置该查询？在这里，我想在主页类别明智地显示这些新添加的产品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T11:58:03.013

你想在 Magento 里面做吗？改为使用集合。

```
$collection = Mage::getModel('catalog/product')->getCollection();
$collection->addAttributeToSelect('*'); // Or only the attributes that you need
$collection->addAttributeToFilter('your_attribute', array('eq' => '1'));

foreach ($collection as $product) {
    echo $product->getId();
} 
```

# c# - 如果数据由框架编码，为什么 ValidateRequest 存在于 .NET 上？

> ID：10006391
> 
> 赞同：0
> 
> 时间：2012-04-04T07:05:13.013
> 
> 标签：c#, .net

每次我将数据返回给用户时，我都会看到 .NET 自动对数据进行编码，以防止恶意脚本。

那么为什么要验证请求呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:16:28.480

根据 asp.net：http://www.asp.net/whitepapers/request-validation[此](http://www.asp.net/whitepapers/request-validation)方法用于防止某些脚本注入攻击.. 网络充满了攻击者，因此即使 .NET 也应该对数据进行编码自动做

# c# - 导出的 Telerik 报告在不同的机器上有不同的 pdf 格式？

> ID：10006392
> 
> 赞同：0
> 
> 时间：2012-04-04T07:05:21.967
> 
> 标签：c#, telerik

我已经以 PDF 格式导出了 Telerik 报告。导出的 PDF 在不同的机器上有不同的显示格式。例如：在一台机器上，导出的报告有 4 页，而在另一台机器上只有 1 页。我在两台机器上都安装了相同版本的 Adob​​e。发生这种情况有什么原因吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:27:37.640

相同函数返回不同结果的情况表明某些事情取决于“**全局状态**”

某些东西取决于机器环境，例如共享配置或..

```
Thread.CurrentThread.CurrentCulture 
```

2个pdf文件有什么不同（例如字体大小，边距）

# iphone - 在uitableview iphone中插入行时出现“NSInternalInconsistencyException”

> ID：10006395
> 
> 赞同：0
> 
> 时间：2012-04-04T07:05:43.947
> 
> 标签：iphone, uitableview, cell, rows

在我的应用程序中，我使用`NSNotificationCenter`. 当我得到 10 个对象时，我想在表格视图中插入该数据。为此，我使用以下代码

```
- (void)viewDidAppear:(BOOL)animated {

    recordCounter = 0;
    noOfRowsCounter = 0;

    // Some code
}

- (void) gotNotification: (NSNotification *) notification {

    NSMutableArray *tempArray = [[notification userInfo]valueForKey:KEY];

    NSLog(@"recordCounter BEFORE=> %d",recordCounter);
    NSLog(@"noOfRowsCounter BEFORE=> %d",noOfRowsCounter);

    self.insertIndexPaths = [[NSMutableArray alloc] init]; 
    for (User *user in tempArray) 
    {
        [self.contactsArray addObject:user];

        recordCounter++;
    }

    for (noOfRowsCounter = noOfRowsCounter; noOfRowsCounter < recordCounter; noOfRowsCounter++) {

        [self.insertIndexPaths addObject:[NSIndexPath indexPathForRow:recordCounter inSection:0]];

    }

    NSLog(@"recordCounter AFTER=> %d",recordCounter);
    NSLog(@"noOfRowsCounter AFTER=> %d",noOfRowsCounter);
    NSLog(@"self.insertIndexPaths count=> %d",[self.insertIndexPaths count]);
    [contactsTableView beginUpdates];
    [contactsTableView insertRowsAtIndexPaths:self.insertIndexPaths 
                             withRowAnimation:UITableViewRowAnimationNone];
    [contactsTableView endUpdates];

    [self.insertIndexPaths removeAllObjects];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{

    // I am doing this as I have 2 records in single row

    if ([self.insertIndexPaths count]%2 == 0) {

        NSLog(@"In IF::rows:: %d",[self.insertIndexPaths count]/2);
        return [self.insertIndexPaths count]/2;
    }
    else {
        NSLog(@"In ELSE::rows:: %d",[self.insertIndexPaths count]/2+1);
        return [self.insertIndexPaths count]/2 + 1;
    }
} 
```

如果我运行我的应用程序，我会收到以下错误并且我的应用程序崩溃了。这是我的控制台日志

```
 2012-04-04 12:15:36.559 AppName[1742:6803] recordCounter BEFORE=> 0
2012-04-04 12:15:36.563 AppName[1742:6803] noOfRowsCounter BEFORE=> 0
2012-04-04 12:15:38.539 AppName[1742:6803] recordCounter AFTER=> 10
2012-04-04 12:15:38.543 AppName[1742:6803] noOfRowsCounter AFTER=> 10
2012-04-04 12:15:38.546 AppName[1742:6803] self.insertIndexPaths count=> 10

2012-04-04 12:15:42.971 AppName[1742:6803] In IF::rows:: 5

2012-04-04 12:15:44.292 AppName[1742:6803] *** Assertion failure in -[UITableView _endCellAnimationsWithContext:], /SourceCache/UIKit/UIKit-1448.89/UITableView.m:995
2012-04-04 12:15:44.306 AppName[1742:6803] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of rows in section 0\.  The number of rows contained in an existing section after the update (5) must be equal to the number of rows contained in that section before the update (0), plus or minus the number of rows inserted or deleted from that section (10 inserted, 0 deleted).'
*** Call stack at first throw:
(
    0   CoreFoundation                      0x36c4164f __exceptionPreprocess + 114
    1   libobjc.A.dylib                     0x332fec5d objc_exception_throw + 24
    2   CoreFoundation                      0x36c41491 +[NSException raise:format:arguments:] + 68
    3   Foundation                          0x334ec573 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 62
    4   UIKit                               0x30ca4379 -[UITableView(_UITableViewPrivate) _endCellAnimationsWithContext:] + 4500
    5   UIKit                               0x30cae2f9 -[UITableView endUpdatesWithContext:] + 28
    6   UIKit                               0x30cae2d5 -[UITableView endUpdates] + 16
    7   AppName                       0x00004927 -[AppNameViewController batchNotification:] + 770
    8   Foundation                          0x334a4183 _nsnote_callback + 142
    9   CoreFoundation                      0x36c1020f __CFXNotificationPost_old + 402
    10  CoreFoundation                      0x36baaeeb _CFXNotificationPostNotification + 118
    11  Foundation                          0x334a15d3 -[NSNotificationCenter postNotificationName:object:userInfo:] + 70
    12  AppName                       0x00007705 -[AddressBook getAddressBookData] + 1700
    13  AppName                       0x0000447b -[AppNameViewController retriveAddressBookData] + 102
    14  Foundation                          0x334b3389 -[NSThread main] + 44
    15  Foundation                          0x335255cd __NSThread__main__ + 972
    16  libsystem_c.dylib                   0x350c0311 _pthread_start + 248
    17  libsystem_c.dylib                   0x350c1bbc start_wqthread + 0
)
terminate called after throwing an instance of 'NSException' 
```

我想在表格视图中添加这些记录。我怎样才能做到这一点。谢谢

**更新： cellForRowAtIndexPath 的代码**

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    ContactCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        NSArray *cellArray=[[NSBundle mainBundle] loadNibNamed:@"ContactCell" owner:self options:nil];
        //NSLog(@"cellArray count => %d",[cellArray count]);
        cell=[cellArray objectAtIndex:0];
    }

    // Configure the cell...

    // For showing 2 records in single row

    int row = indexPath.row * 2;
    if (row <= [self.contactsArray count]) 
    {
        User *user = [self.contactsArray objectAtIndex:row];
        NSLog(@"In ROW: %@",user.firstName);
        cell.firstNameLabel.text=[NSString stringWithFormat:@"%@",nameString];
    }

    if ((row + 1) < [self.contactsArray count]) 
    {

        User *user = [self.contactsArray objectAtIndex:row+1];
        NSLog(@"In ROW+1: %@",user.firstName);
        cell.secondNameLabel.text=[NSString stringWithFormat:@"%@",nameString];
    }

     return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:34:48.807

根据您的数据，您在部分中返回 5 行，但您的 self.insertIndexPaths 有 10 个索引路径

```
[contactsTableView insertRowsAtIndexPaths:self.insertIndexPaths 
                         withRowAnimation:UITableViewRowAnimationNone]; 
```

这些行指定插入 10 行，正如在更新后获得的行数错误中明确提到的，应该等于在节中的行数中返回的值。

替换行

```
 for (noOfRowsCounter = noOfRowsCounter; noOfRowsCounter < recordCounter; noOfRowsCounter++) {

        [self.insertIndexPaths addObject:[NSIndexPath indexPathForRow:recordCounter inSection:0]];

    } 
```

和

```
 int presentrows = [yourtablename numberOfRowsInSection:0];
    int Finalnumberofrows;
    if ([self.insertIndexPaths count]%2 == 0) {
    Finalnumberofrows = [self.contactsArray count]/2;
}
else {
    Finalnumberofrows = [self.contactsArray count]/2 + 1;
}
    for (presentrows; presentrows < Finalnumberofrows; presentrows++) {

    [self.insertIndexPaths addObject:[NSIndexPath indexPathForRow:presentrows inSection:0]];

} 
```

并在索引方法处替换表视图单元格 - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

```
// I am doing this as I have 2 records in single row

if ([self.contactsArray count]%2 == 0) {

    NSLog(@"In IF::rows:: %d",[self.insertIndexPaths count]/2);
    return [self.contactsArray count]/2;
}
else {
    NSLog(@"In ELSE::rows:: %d",[self.insertIndexPaths count]/2+1);
    return [self.contactsArray count]/2 + 1;
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:34:18.877

真正的错误列在*Terminating app due to uncaught exception*之后。
它说：*第 0 节中的行数无效。更新后现有节中包含的行数 (5) 必须等于更新前该节中包含的行数 (0)，加上或减去数字从该部分插入或删除的行数（插入 10 行，删除 0 行）*

所以有什么问题？你有 0 行，然后插入 10，现在说它有 5 行？没有任何意义。你应该检查你的`-tableView:numberOfRowsInSection:`实现。

我只是看到您想在一行中显示两条记录。这没有任何意义，真的。它使表格视图动画变得不必要地复杂。
但是，如果您想坚持这一点，您可能不会告诉表格您插入了 10 行而是 5 行。

# android - 如何访问用户在 html 中输入的信息，这些信息通过 android 中的 web 视图显示？

> ID：10006398
> 
> 赞同：-1
> 
> 时间：2012-04-04T07:06:02.840
> 
> 标签：android, android-layout

我想通过 web 视图在 android 活动中显示 html，我的屏幕会像![网页浏览](../Images/fe583c4b909ee83179c5ab99cb2cb2d9.png)

spinner 包含所有 HTML 文件模板。当用户输入名字，姓氏并单击微调器时，输入名字和姓氏的任何html都应显示在HTML上...如何在android中执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T17:44:22.830

对于与 WebViews 和本机代码的交互，您可以通过`JavaScriptInterface`

[http://developer.android.com/guide/webapps/webview.html#BindingJavaScript](http://developer.android.com/guide/webapps/webview.html#BindingJavaScript)

# c# - 使用集合参数对集合属性进行 Linq 查询

> ID：10006402
> 
> 赞同：2
> 
> 时间：2012-04-04T07:06:16.243
> 
> 标签：c#, linq, entity-framework

我有一个方法，它接受一个字符串数组作为参数，并针对一个集合属性进行查询，该集合属性也是一个字符串集合。如果该属性具有作为参数传递的字符串数组中的值之一，则应将其返回。

这是我的代码：

```
public IEnumerable<BlogPost> GetAll(string[] tags, 
    bool includeUnapprovedEntries = false) {

    foreach (var tag in tags) {
        foreach (var blogPost in GetAll(includeUnapprovedEntries).
            ToList().Where(x => x.Tags.Any(t => t == tag))) {
            yield return blogPost;
        }
    }
} 
```

> 笔记：
> 
> 这是完整的代码：
> 
> [https://github.com/tugberkugurlu/MvcBloggy/blob/master/src/MvcBloggy.Data/DataAccess/SqlServer/BlogPostRepository.cs](https://github.com/tugberkugurlu/MvcBloggy/blob/master/src/MvcBloggy.Data/DataAccess/SqlServer/BlogPostRepository.cs)

这可以完成工作，但它似乎并不正确。我本可以使用一些扩展方法使这变得更好，但无法弄清楚什么可以解决问题并使这个实现正确。

任何的想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T07:09:29.153

这个怎么样：

```
public IEnumerable<BlogPost> GetAll(string[] tags,
    bool includeUnapprovedEntries = false) {

    return GetAll(includeUnapprovedEntries)
        .Where(x => x.Tags.Any(t => tags.Contains(t));
} 
```

您可能需要调用`ToList()`以实现结果。请注意，这将（希望！）导致`IN`SQL 查询；如果您有大量标签，如果失败，我不会感到惊讶。（我不知道实体框架如何处理这种情况。）我相信标签数量较少应该没问题。

请注意，是否支持这*可能*取决于您使用的实体框架的版本；我似乎记得像这样的一些转换（`Contains`在“本地”集合上使用）以转换为 SQL 中的 IN）随着时间的推移而有所改进。确保您针对将要部署的相同版本进行开发:)

# c# - 在 Visual Studio 的工具箱上应用过滤器？

> ID：10006415
> 
> 赞同：2
> 
> 时间：2012-04-04T07:07:03.840
> 
> 标签：c#, visual-studio, toolbox

是否可以对 Visual Studio 2008 / 2010 的工具箱应用过滤器？我发现找到我想要的小部件不太舒服。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:51:31.087

您可以为有用的控件/组件创建选项卡。

# iphone - Ad-hoc OTA 分发安装错误

> ID：10006418
> 
> 赞同：1
> 
> 时间：2012-04-04T07:07:22.273
> 
> 标签：iphone, ios, distribution, ad-hoc-distribution, over-the-air

我创建了一个临时分发 ipa 文件和一个 plist 文件，并将其上传到网站上。然后我导航到该网站并单击下载链接。它弹出说：

> www.mywebsite.co.uk 想安装“myApp”

所以我点击安装。

然后它返回到主屏幕以显示下载/安装的图标和进度条。

一旦条形图达到 c.3/4，它就会显示另一个弹出窗口：

> 无法下载应用程序
> 
> 此时无法安装“我的应用程序”。

关于这里出了什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T06:22:47.970

为了完整..

在构建过程中，我将我的项目从一台笔记本电脑迁移到了另一台笔记本电脑，但我忘记了它。因此，我迁移了我的所有个人资料，但没有迁移钥匙串中的私有和公共共享密钥。最终。我必须删除所有证书和配置文件，然后从 Keychain 重新开始。

实际上，一旦我决定重新开始，可能只需要 15 分钟就能完成完整的分发配置文件。考虑到事先让我头疼的小时数，这还不错。但是仍然-Apple ...您当然可以想到一种更巧妙的方式来允许我们测试和分发应用程序？？？？？？

# python - Python MySQL：不显示插入的记录

> ID：10006420
> 
> 赞同：10
> 
> 时间：2012-04-04T07:07:23.387
> 
> 标签：python, mysql, insert

我正在使用带有 MySQLdb 32 位的 Python 2.7，以及在本地运行的 MySQL 5.5.8。

我把自己逼疯了，我从来没有见过这样的事情。

基本上，我通过以下方式将记录从 Python 插入 MySQL：

```
db=MySQLdb.connect(host="localhost",user="root", passwd="mypassword",db="python",port=3307)
cur=db.cursor()
cur.execute("INSERT INTO mytable(myfield) VALUES(%s);","somedata") 
```

我已经验证它连接正确并且它可以成功地`SELECT`从数据库中获取数据。

这是奇怪的部分：从 MySQL 查询浏览器（GUI 工具）和通过 CMD 从 MySQL，我无法看到插入的记录。

我可以从我的 Python 脚本中插入和选择记录，但它们不会出现在我的数据库中，它只是返回`Empty Set (0.00 sec)`

这是真正奇怪的部分：我可以从 GUI 工具和控制台截断和删除数据。

总结一下：我可以从 Python 脚本中插入和选择数据。我在 MySQL 中看不到该数据。但是，我可以使用 MySQL 截断和删除该数据。

在这一点上，我完全迷失了。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-04T07:11:26.340

如果您的代码在控制台中有效，但在其他情况下无效，我相信您需要添加该行

```
db.autocommit(True) 
```

连接后或您需要`db.commit()`在插入后执行。

# c# - 在 Monotouch 中绑定外部 NSString

> ID：10006424
> 
> 赞同：2
> 
> 时间：2012-04-04T07:07:40.577
> 
> 标签：c#, iphone, binding, xamarin.ios

我目前正在处理 MobClix 绑定，我遇到了这一行：

```
extern NSString* const MCAdsErrorDomain; 
```

该行出现在任何类或接口之外，我不确定如何在 c# 中绑定它。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T12:55:04.453

你的定义看起来是基于 C 的，所以它应该像 Rolf 的例子告诉你的那样工作。

但是，如果/当您使用该`btouch`工具绑定一个 Objective-C 库时，您将需要使用类似的东西：

```
 [Field ("XXMyString")]
    NSString MyString { get; } 
```

这在 MonoTouch 的绑定[文档](http://docs.xamarin.com/ios/advanced_topics/binding_objective-c_types#Binding_Fields)中有详细描述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T11:32:41.773

它是这样完成的：

```
var handle = Dlfcn.dlopen ("/path/to/mobclix-library", 0);
NSString MCAdsErrorDomain = Dlfcn.GetStringConstant (handle, "MCAdsErrorDomain");
Dlfcn.dlclose (handle); 
```

您还可以在此处查看示例（其中也包括一些错误检查）：[https ://github.com/mono/maccore/blob/master/src/CoreVideo/CVPixelFormatDescription.cs#L67](https://github.com/mono/maccore/blob/master/src/CoreVideo/CVPixelFormatDescription.cs#L67)

# windows-phone-7 - 如何在 WP7 中设置列 表框的选定项？

> ID：10006425
> 
> 赞同：0
> 
> 时间：2012-04-04T07:07:45.487
> 
> 标签：windows-phone-7

如何设置列表框的选定项？当我使用 SelectedValue、SelectedItem、SelectedIndex 时，它什么也不做。当我之后使用 UpdateLayout() 时，它什么也不做。ScrollIntoView( item ) 似乎没有做任何事情。

这是我的列表框的 XAML 代码。我使用 Setter 将列表框的方向设置为水平

```
<ScrollViewer HorizontalScrollBarVisibility="Visible" Name="DetailedWebViewContainer" VerticalScrollBarVisibility="Disabled" Grid.Row="2">
        <ScrollViewer.Resources>
            <Style TargetType="ListBox">
                <Setter Property="ItemsPanel">
                    <Setter.Value>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"
                                        VerticalAlignment="Center"
                                        HorizontalAlignment="Center"/>
                        </ItemsPanelTemplate>
                    </Setter.Value>
                </Setter>
            </Style>
        </ScrollViewer.Resources>
        <ListBox Name="WebScrollView" SelectionMode="Multiple" >
            <ListBox.Items>
                <phone:WebBrowser Name="LeftBrowser" MinWidth="460" Height="1500" IsHitTestVisible="False" Margin="10, 0, 10, 0"/>
                <phone:WebBrowser Name="MiddleBrowser" MinWidth="460" Height="1500" IsHitTestVisible="False" Margin="10,0,10,10"/>
                <phone:WebBrowser Name="RightBrowser" MinWidth="460" Height="1500" IsHitTestVisible="False" Margin="10,0,10,0" />
            </ListBox.Items>                
        </ListBox>
    </ScrollViewer> 
```

我错过了什么吗？Greetz GeekPeek

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:16:10.403

这应该有效：

```
<ListBox Name="WebScrollView" ScrollViewer.VerticalScrollBarVisibility="Disabled" ScrollViewer.HorizontalScrollBarVisibility="Auto" SelectionMode="Multiple" >
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <VirtualizingStackPanel Orientation="Horizontal" />
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
    <ListBox.Items>
        <phone:WebBrowser Name="LeftBrowser" MinWidth="460" Height="1500" IsHitTestVisible="False" Margin="10, 0, 10, 0"/>
        <phone:WebBrowser Name="MiddleBrowser" MinWidth="460" Height="1500" IsHitTestVisible="False" Margin="10,0,10,10"/>
        <phone:WebBrowser Name="RightBrowser" MinWidth="460" Height="1500" IsHitTestVisible="False" Margin="10,0,10,0" />
    </ListBox.Items>                
</ListBox> 
```

# windows-phone-7 - WP7 Datepicker 页面 - 自定义背景

> ID：10006430
> 
> 赞同：0
> 
> 时间：2012-04-04T07:07:59.513
> 
> 标签：windows-phone-7, datepicker

我想使用 WP7 工具包 datepicker 并在选择器页面上有我自己的自定义背景。有几个示例显示了使用自定义页面来替换现有的选择机制，例如[http://windowsphonegeek.com/articles/wp7-datepicker-and-timepicker-in-depth--api-and-customization](http://windowsphonegeek.com/articles/wp7-datepicker-and-timepicker-in-depth--api-and-customization)

但我不想这样做 - 我只是希望选择器页面具有不同的背景（而不是主题的白色或黑色） 我可以轻松地做到这一点。还是我必须下载工具包代码并将其包含在我的解决方案中并进行调整？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:21:56.637

为此，您必须在应用程序中从 Silverlight for Windows Phone 工具包创建[DatePickerPage.xaml](http://silverlight.codeplex.com/SourceControl/changeset/view/74775#1510210)文件的副本，更改它以满足您的要求，然后在 DatePicker 控件上将 PickerPageUri 属性设置为新的 DatePickerPage .xaml

# c# - 限制 ListViewItem 的最大文本长度？

> ID：10006434
> 
> 赞同：3
> 
> 时间：2012-04-04T07:08:24.807
> 
> 标签：c#, listview, listviewitem

我在基于 C# 的 win-form 项目中有一个 ListView。是否可以限制 ListView 内所有 ListViewItem 标题的最大长度？

**更新**

我的意思是输入长度，我将项目设置为可编辑，以便用户可以重命名项目

**更新2**

对，它被称为该项目的“文本”，而不是标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:04:08.953

您可以在列表视图的[编辑事件后使用标签。](http://msdn.microsoft.com/en-us/library/system.windows.forms.listview.afterlabeledit.aspx)这是一个示例。

```
private void listview1_AfterLabelEdit(object sender, LabelEditEventArgs e)
{
    try
    {
        const int maxPermittedLength = 1;

        if (e.Label.Length > maxPermittedLength)
        {
            //trim text
            listview1.Items[e.Item].SubItems[0].Text = listview1.Items[e.Item].SubItems[0].Text.Substring(0, maxPermittedLength); //or something similar

            //or

            //show a warning message

            //or

            e.CancelEdit = true; //cancel the edit
        }
    }
    catch (Exception ex)
    {

    }
} 
```

请记住，它很棘手，并不简单，您将不得不处理一些异常，但那是功课.. 上面的代码不是有效的代码，但您现在知道如何去做了。仔细阅读文档，它有一个很好的示例和与此事件相关的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:21:53.437

ListViewItem 的标题是什么意思？你的意思是项目文本吗？我相信任何可回收的东西都是可修复和可控的。如果是item text，可以写个check方法

```
public string SimplifyTxt(string input)
{
    if(input.Length>LIMIT_NUMBER)
    {
       //please shorten the string before display
    }
    return retStr;
} 
```

然后可以将其分配为

```
listview1.items.add(new Listviewitem{Text=retVal}); 
```

# c - 线程和指针 C

> ID：10006435
> 
> 赞同：0
> 
> 时间：2012-04-04T07:08:30.657
> 
> 标签：c, multithreading, pointers, structure

我想知道我在这里做错了什么？我将 void 指针转换为结构缓冲区，它只打印出垃圾。现在 buffer 不应该指向 ptr ，它是一个指向我们为其分配内存的原始缓冲区的指针？

```
#include <stdio.h>
#include <pthread.h>

 struct buffer{
         int a;
         char *string[];
 }buffer;

 void thread1_function(void *ptr){
         struct buffer *buffer=(struct buffer*)ptr;

         printf("hello world\n");

         printf("%s-%n\n", buffer->string,buffer->a);

 }

 int main(){

        struct buffer *buffer;
        int err;
        buffer = (struct buffer*)malloc((11*sizeof(char))+sizeof(int));
        pthread_t thread1;
        sprintf(buffer->string,"%s","strint");
        buffer->a=1;
        printf("main: %s - %d\n",buffer->string,buffer->a);
        err = pthread_create(&thread1, NULL, thread1_function, &buffer);
        printf("error: %d\n",err);
        pthread_join(thread1,NULL);
        return 0;
 } 
```

~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T07:12:09.857

结构的`string`成员被定义为一个“灵活的”`char *` *指针*数组。您似乎将其视为字符数组，而是为其分配`11 * sizeof(char)`字节，然后将字符串复制到其中。

我认为您的结构的预期布局应如下所示：

```
struct buffer {
     int a;
     char string[];
} buffer; 
```

然后将其分配为：

```
buffer = malloc(sizeof(struct buffer) + SIZE_OF_STRING); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T07:27:06.757

您将指向结构的指针的指针传递给您的线程。尝试将指针传递给结构。;)

```
err = pthread_create(&thread1, NULL, thread1_function, &buffer); 
```

变成

```
err = pthread_create(&thread1, NULL, thread1_function, buffer); 
```

**编辑：** 发现另一个错误：`printf("...%n")`在线程函数中。`%n`表示将到目前为止写入的数字存储到该位置，该位置的`int*`参数指向。你显然是指`%d`那里，就像你的`main()`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T07:39:04.250

除了其他人已经提供的注释外：

*   您应该使用[snprintf](http://linux.die.net/man/3/snprintf)来绝对避免超出`string`s 范围。
*   您应该使用`sizeof(struct buffer)`（或简单地在堆栈上创建一个`struct buffer`）来确保分配了足够的内存（可能存在填充问题）。当然，您可能还需要为字符数组和指向它的指针（`string`）分配内存并正确初始化。
*   查看[pthread_create](http://www.kernel.org/doc/man-pages/online/pages/man3/pthread_create.3.html)的手册页，第三个参数应该是`&thread1_function`，即函数指针。此外，`thread1_function()`需要返回`void*`，而不是`void`.
*   您是否注意到，名称中有两个变量`buffer`（一个在全局范围内，一个在函数内部`main()`）？你怎么确定你将哪一个传递给线程？

毕竟，该代码存在很多问题，在您修复一个错误后它仍然失败，我并不感到惊讶。（实际上我很惊讶它确实编译了。）

* * *

这是一些固定的代码：第一次编译代码时有很多警告。您不应忽略警告。即使您的代码确实编译了，警告通常也是跟踪错误的有价值信息，尤其是在程序失败时。就像你的情况一样。首先，您不应该关心打印的垃圾，而应该关心编译器向您抛出的警告！

（如果您想要更多警告，请尝试传递`-Wall -Wextra -pedantic`给您`gcc`的选择。）

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

struct buffer{
    int a;
    char string[10];
};

void* thread1_function(void *ptr){
    struct buffer *buffer=(struct buffer*)ptr;
    printf("hello world\n");
    printf("%s-%d\n", buffer->string,buffer->a);
    return NULL;
}

int main(){

    int err;
    pthread_t thread1;
    struct buffer *buffer;

    buffer = (struct buffer*)malloc(sizeof (struct buffer) );
    buffer->a=1;
    snprintf(buffer->string, sizeof buffer->string, "%s", "strint");
    printf("main: %s - %d\n", buffer->string, buffer->a);

    err = pthread_create(&thread1, NULL, &thread1_function, buffer);
    printf("error: %d\n", err);
    pthread_join(thread1, NULL);

    return 0;
} 
```

# python - 查询没有命名直通字段的多对多关系

> ID：10006440
> 
> 赞同：1
> 
> 时间：2012-04-04T07:08:36.783
> 
> 标签：python, django, django-orm

我的模型中有这个设置：

```
class Author(models.Model):
    name = models.CharField(max_length=100)

class Topic(models.Model):
    name = models.CharField(max_length=100)

class Article(models.Model):
    name = models.CharField(max_length=100)
    authors = models.ManyToManyField(Author, null=True, blank=True)
    topics = models.ManyToManyField(Topic, null=True, blank=True) 
```

给定一个作者，我想知道他写了哪些主题：

```
def author_info(request, pk):
    author = get_object_or_404(Author, pk=pk)
    topics = ???? 
```

如果我指定了一个 through 字段，我可以使用它，但是现在 Django 为我创建了 through 字段，并且由于它应该是透明的，我宁愿不引用该字段（除非有适当的 Django 构造）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:31:54.783

使用[跨越关系的查找](https://docs.djangoproject.com/en/dev/topics/db/queries/#lookups-that-span-relationships)：

```
topics = Topic.objects.filter(article__authors=author).distinct() 
```

注意：这里必须使用 distinct，因为同一个主题可以被不同的文章选择。

# java - 为什么没有边界匹配器“行首”的正则表达式不匹配？

> ID：10006441
> 
> 赞同：1
> 
> 时间：2012-04-04T07:08:42.870
> 
> 标签：java, regex, pattern-matching

Java的正则表达式中有一些我不理解的东西。我有以下字符串（并且我需要“to Date”）：

```
From Date :01/11/2011 To Date :30/11/2011;;;;;;;;;;;;; 
```

我认为以下正则表达式（在 Perl 中）会匹配。

```
to\\s+date\\s*?:\\s*?([0-9]{2}[\\./][0-9]{2}[\\./][0-9]{2,4}) 
```

在 Java 中，此模式不匹配。但是如果我在前面和最后添加 a 就可以了`.+` 所以这种模式在 Java 中有效：

```
Pattern p = Pattern.compile(".+to\\s+date\\s*?:\\s*?([0-9]{2}[\\./][0-9]{2}[\\./][0-9]{2,4}).+", Pattern.CASE_INSENSITIVE); 
```

`^`我不明白的是：如果我在行尾添加 a （行首）和 a ，我很清楚第一个模式在 Java 中将不匹配`$`。这意味着，模式必须匹配整行。但是没有它，第一个模式实际上应该匹配，因为如果我没有在前面和最后设置分隔符，为什么模式会关心超出此模式范围的字符串数据？这对我来说不合逻辑。在我看来，第一个模式的行为应该类似于 String 类的“包含”方法。我认为在 Perl 中也是如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T07:14:43.550

在 Java 中，`matches()`验证整个字符串。您的输入可能有换行符（不匹配`.+`）。

试试这个：

```
Pattern p = Pattern.compile(".+to\\s+date\\s*?:\\s*?([0-9]{2}[\\./][0-9]{2}[\\./][0-9]{2,4}).+", Pattern.CASE_INSENSITIVE);
Matcher m = p.matcher("... \n From Date :01/11/2011 To Date :30/11/2011;;;;;;;;;;;;; \n ...");

System.out.println(m.matches()); // prints false

if(m.find()) {
  System.out.println(m.group(1)); // prints 30/11/2011
} 
```

使用 时`find()`，您可以`.+`从模式中删除 's：

```
Pattern.compile("to\\s+date\\s*?:\\s*?([0-9]{2}[./][0-9]{2}[./][0-9]{2,4})", Pattern.CASE_INSENSITIVE); 
```

*（无需转义`.`字符类内部，顺便说一句）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:19:17.183

我认为这个来自不同问题的答案也回答了您的问题：[为什么 Java 和 Perl 中的正则表达式行为不同？](https://stackoverflow.com/a/784272/1207146)

# bash - 将文件中每一行的第一个字母更改为大写

> ID：10006449
> 
> 赞同：9
> 
> 时间：2012-04-04T07:09:09.537
> 
> 标签：bash, case, unicode-string

我需要将文件中每一行的第一个字母更改为大写，例如

```
the bear ate the fish.
the river was too fast. 
```

会成为：

```
The bear ate the fish.
The river was too fast. 
```

*   该文件包含一些特殊字母：a、a、á、à、ǎ、ā、b、c、d、e、e、é、è、ě、ē、f、g、h、i、i、í、ì , ǐ, ī, j, k, l, m, n, o, o, ó, ò, ǒ, ō, p, q, r, s, t, u, u, ú, ù, ǔ, ü, ǘ 、ǜ、ǚ、ǖ、ū、v、w、x、y 和 z。
*   这些字母的大写形式是：A、A、Á、À、Ǎ、Ā、B、C、D、E、E、É、È、Ě、Ē、F、G、H、I、I、Í、 Ì, Ǐ, Ī, J, K, L, M, N, O, O, Ó, Ò, Ǒ, Ō, P, Q, R, S, T, U, U, Ú, Ù, Ǔ, Ü, Ǘ、Ǜ、Ǚ、Ǖ、Ū、V、W、X、Y 和 Z。

如何将文件中每一行的第一个字母更改为大写？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-04T07:14:12.500

使用`sed`：

```
sed  's/^\(.\)/\U\1/' yourfile > convertedfile 
```

小解释：

*   `^`代表一行的开始。
*   `.`匹配任何字符
*   `\U`转换为大写
*   `\( ... \)`指定稍后要引用的部分（如`\1`本例所示）；括号在这里要转义。

不要**尝试**在一个命令中将输出重定向到同一文件（即~~`> yourfile`~~），因为您将丢失数据。如果您想在同一个文件中替换，请查看 joelparkerhenderson 的答案。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T07:20:26.450

```
pearl.311> cat file1
linenumber11
linenumber2  
linenumber1
linenumber4
linenumber6
pearl.312> awk '{print toupper(substr($0,1,1))""substr($0,2)}' file1
Linenumber11
Linenumber2  
Linenumber1
Linenumber4
Linenumber6
pearl.313> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-04T12:52:35.047

有一些 sed 的答案`s/^\(.\)/\U\1/`。GNU sed 还有一个`\u`指令，只将下一个字母更改为大写，所以

```
sed 's/./\u&/' 
```

虽然如果一行的第一个字符是空格，你不会看到大写字母，所以

```
sed 's/[[:alpha:]]/\u&/' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T07:19:54.873

要就地更改文件：

```
sed -i -e 's/^\(.\)/\U\1/' file.txt 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T09:57:35.603

你可以把你的特殊字符代替 az 和 AZ

```
function up { local c="$1" ; echo -e "$c" | tr '[a-z]' '[A-Z]' ; }
while read line
do
  echo $(up ${line:0:1})${line:1}
done 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-22T13:33:57.727

纯`bash`：

```
while read x ; do echo "${x^*}" ; done < inputfile > outputfile 
```

* * *

测试/演示（删除代码以`done`获得更完整的输出）：

```
for f in a, a, á, à, ǎ, ā, b, c, d, e, e, é, è, ě, ē, f, g, h, i, i, í, ì, ǐ, ī, \
         j, k, l, m, n, o, o, ó, ò, ǒ, ō, p, q, r, s, t, \
         u, u, ú, ù, ǔ, ü, ǘ, ǜ, ǚ, ǖ, ū, v, w, x, y, and z.
do  echo "$f foo bar." ; done | 
while read x ; do echo "${x^*}" ; done | head -15 | tail -6 
```

输出：

```
E, foo bar.
E, foo bar.
É, foo bar.
È, foo bar.
Ě, foo bar.
Ē, foo bar. 
```

# erlang - 使用 Erlydtl 的主/应用程序布局

> ID：10006450
> 
> 赞同：2
> 
> 时间：2012-04-04T07:09:26.427
> 
> 标签：erlang, django-templates

使用 Erlydtl 进行主/应用程序布局的好方法是什么？对于主/应用程序布局，我的意思是将主页布局模板与具有页面内容的模板分开，但将它们呈现为一个。想想 Ruby on Rails 应用程序布局或 ASP.NET 母版页。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T12:54:05.327

您是否正在尝试实现以下目标：

**主文件**

```
<html>
  <head></head>
  <body>
    <div id="menu">Menu</div>
    <div id="content">
      {% block content %}{% endblock %}
    </div>
  </body>
</html> 
```

**页面.dtl**

```
{% extends "main.dtl" %}

{% block content %}
Here's my content
{% endblock %} 
```

# python - 使用 Stargate Rest 将数据插入 Hbase

> ID：10006452
> 
> 赞同：2
> 
> 时间：2012-04-04T07:09:43.320
> 
> 标签：python, rest, insert, hbase, stargate

我正在使用 curl 通过 REST 访问 Hbase。我在将数据插入 Hbase 时遇到问题。我遵循了 Stargate 文档，但是当我遵循相同的语法时，它给了我 400/405 错误请求错误和不允许方法错误。我已经粘贴了下面的命令。请告诉我哪里出错了。

星际之门文件说

```
POST /<table>/<row>/<column> (:qualifier)?/<timestamp>
curl -H "Content-Type: text/xml" --data '[...]' http://localhost:8000/test/testrow/test:testcolumn 
```

我的 curl 命令如下：

```
curl -H "Content-Type: text/xml" --data '[<CellSet><Row key="111"><Cell column="f1">xyz</Cell></Row></CellSet>]' http://localhost:8080/mytable/row/fam 
```

这样做的正确方法是什么？因为这给了我错误的请求错误。

另外，我在 Python 客户端中尝试相同。它给了我 ColumnFamilyNotFoundException。我正在读取要从文件传递到星门服务器的 Xml 数据。代码如下。

`url = 'http://localhost:8080/mytable/row/fam' f = open('example.xml', 'r') xmlData = f.read() r = requests.post(url, data=xmlData, headers=headers)`

example.xml 有以下内容：

```
<CellSet>
     <Row key="111">
   <Cell column="fam:column1">
             xyz
         </Cell>
     </Row>
 </CellSet> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T06:16:51.950

这是一个非常简单的错误。Hbase 期望 base64 编码中的每个值。Tha key 以及 columnfamily:column 在输入 xml 之前必须进行 base64 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T23:40:05.073

使用 starbase 很容易插入。

$ pip install starbase

创建一个以`table1`列命名的表`col1`和`col2`

```
from starbase import Connection
connection = Connection()
table = connection.table('table1')
table.create('col1', 'col2') 
```

将一行插入`table1`. 行键是`row1`.

```
table.insert(
    'row1', 
    {
        'col1': {'key1': 'val1', 'key2': 'val2'}, 
        'col2': {'key3': 'val3', 'key4': 'val4'}
    }
) 
```

您也可以批量插入。

为了不重复代码，假设我们的数据存储在`data`变量（dict）中。

```
data = {
    'col1': {'key1': 'val1', 'key2': 'val2'}, 
    'col2': {'key3': 'val3', 'key4': 'val4'}
}

batch = table.batch()
for i in range(100, 5000):
    batch.insert('row_%s' % i, data)
batch.commit(finalize=True) 
```

更新是通过`update`方法完成的，并且工作方式与更新相同`insert`。

获取行使用`fetch`方法。

获取整行：

```
table.fetch('row1') 
```

仅获取`col1`数据：

```
table.fetch('row1', 'col1') 
```

仅获取`col1`和`col2`数据：

```
table.fetch('row1', ['col1', 'col2']) 
```

仅获取`col1:key1`和`col2:key4`数据：

```
table.fetch('row1', {'col1': ['key1'], 'col2': ['key4']}) 
```

更改表架构：

添加列`col3`和`col4`

```
table.add_columns('col3', 'col4') 
```

删除列

```
table.drop_columns('col1', 'col4') 
```

显示表格列

```
table.columns() 
```

显示所有表格

```
connection.tables() 
```

# sql - 复合 SQL 选择

> ID：10006454
> 
> 赞同：1
> 
> 时间：2012-04-04T07:09:54.660
> 
> 标签：sql

我有以下两个表：

auth_user

*   ID
*   用户名
*   is_active (boolean) ...

使用profile_userprofile

*   ID
*   用户身份 ...

我如何找到=0 且没有 userprofile_userprofile 对象的所有`auth_user`对象？例如，像这样的条目——`is_active``user_id`

auth_user

*   编号 = 1
*   用户名 = hello@gmail.com
*   is_active = 0

并且`userprofile_userprofile`没有对象 where `user_id`= 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:16:04.317

```
SELECT *
FROM auth_user A
LEFT JOIN userprofile_userprofile B ON A.id=B.user_id
WHERE A.is_active = false and B.user_id IS NULL 
```

什么时候`B.user_id`这`NULL`意味着它找不到行 where `user_id=1`。
这假设 table`userprofile_userprofile`中的 id 都不是`NULL`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:13:19.857

```
select * from auth_user au
where au.is_active = 0 and 
    not exists(select * from userprofile_userprofile uu where uu.user_id = au.user_id) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T07:14:07.390

```
SELECT
    *
FROM
    auth_user
WHERE
    auth_user.is_active=0
    AND NOT EXISTS
        (
            SELECT
                NULL
            FROM
                userprofile_userprofile 
            WHERE
                userprofile_userprofile.user_id=auth_user.id
        ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T07:17:07.573

除了其他解决方案，您还可以通过`LEFT JOIN`

```
SELECT
*
FROM
auth_user au
LEFT JOIN useprofile_userprofile uu ON au.id = uu.user_id
WHERE uu.id IS NULL
AND au.is_active = 0 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T07:19:41.397

```
select au.id,au.username,count(up.id) from auth_user au
left outer join useprofile_userprofile up
on au.id=up.user_id
where is_active = 1 
group by au.id,au.username
having count(up.id)=0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T07:17:12.380

您正在寻找表连接。参考本教程：

[http://www.tizag.com/mysqlTutorial/mysqljoins.php](http://www.tizag.com/mysqlTutorial/mysqljoins.php)

要回答您的问题，您正在寻找以下内容：

“选择 auth_user.username,auth_user.is_active,useprofile_userprofile.user_id WHERE is_active = 0 AND user_id != 1”

# javascript - Regular expression for IP Address Validation

> ID：10006459
> 
> 赞同：31
> 
> 时间：2012-04-04T07:10:13.287
> 
> 标签：javascript, regex

i want to validate the value is valid IP Address or not..!

I Used to validate like

```
ValidIpAddressRegex = "^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$"; 
```

it's working fine, but when i give the values like `12345678` , its also return **true**.. How to solve this?

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-04T07:13:15.783

有一个更简单的方法。您只需要拆分字符串`.`并检查每个数字是否在 0 到 255 之间。

此外，您可以检查 hexa 并拆分`:`IPv6。

* * *

只是因为我觉得这很有趣：

```
^(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))\.(\d|[1-9]\d|1\d\d|2([0-4]\d|5[0-5]))$ 
```

这是一个应该处理 IP (v4) 的正则表达式。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-10-31T09:19:20.770

为 IPv4 寻找一个，我最终只是自己创建了它。（这只处理常见的虚线变体，即 0.0.0.0 - 255.255.255.255）

```
^                           # START OF STRING
  (?=\d+\.\d+\.\d+\.\d+$)     # Lookahead, require this format: number.number.number.number END OF STRING
  (?:                         # Start non-capture group (number 0-255 + optional dot)
    (?:                         # Start non-capture group (number 0-255)
      25[0-5]                     # 250-255
      |                           # OR
      2[0-4][0-9]                 # 200-249
      |                           # OR
      1[0-9]{2}                   # 100-199
      |                           # OR
      [1-9][0-9]                  # 10-99
      |                           # OR
      [0-9]                       # 0-9
    )                           # End non-capture group
    \.?                         # Optional dot (enforced in correct positions by lookahead)
  ){4}                        # End non-capture group (number + optional dot), repeat 4 times
$                           # END OF STRING 
```

没有评论：

```
^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$ 
```

一些代码来测试它：

```
function isValidIpv4Addr(ip) {
  return /^(?=\d+\.\d+\.\d+\.\d+$)(?:(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9][0-9]|[0-9])\.?){4}$/.test(ip);
}
var testAddr = ['192.68.35.35','0.0.0.0','255.0.0.0','192.168.1.0','192.168.0.1','255.255.255.0','1.1.1.1','255.255.255.255','249.249.249.249','200.200.200.200','199.199.199.199','100.100.100.100','99.99.99.99','0.0.0.0','9.9.9.9','10.10.10.10','99.99.99.99','100.100.100.100','109.109.109.109','110.110.110.110','199.199.199.199','200.200.200.200','249.249.249.249','250.250.250.250','255.255.255.255','256.256.256.260','192.168.0.0/24','192.168..1','192.168.1','1','1.','1.1','1.1.','1.1.1','1.1.1.','1.1.1.1.','1.1.1.1.1','.1.1.1.1','01.01.01.01','09.09.09.09','1.0.0.1.0','010.1.1.1','123456','123123123123','.127.0.0.1'];
for (var i = 0; i < testAddr.length; i++) {
  document.getElementById('ipv4tests').innerHTML += '<li>' + testAddr[i] + ' ' + (isValidIpv4Addr(testAddr[i]) ? '<font color="green">VALID!</font>' : '<font color="red">INVALID!</font>') + '</li>';
}
```

```
<ul id="ipv4tests"></ul>
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-10-21T15:10:59.057

这适用于所有可能的情况。

```
^(([1-9]?\d|1\d\d|2[0-5][0-5]|2[0-4]\d)\.){3}([1-9]?\d|1\d\d|2[0-5][0-5]|2[0-4]\d)$ 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-26T23:39:44.903

我知道这是旧的，但试试这个：

```
 /^(?:(?:2[0-4]\d|25[0-5]|1\d{2}|[1-9]?\d)\.){3}(?:2[0-4]\d|25[0-5]|1\d{2}|[1-9]?\d)(?:\:(?:\d|[1-9]\d{1,3}|[1-5]\d{4}|6[0-4]\d{3}|65[0-4]\d{2}|655[0-2]\d|6553[0-5]))?$/ 
```

我今天做了一个 php 函数。

它处理从 0.0.0.0 到 255.255.255.255 的 IP 和从 0 到 65535 的端口。

例子：

```
validates:
    0.0.0.0:0
    255.0.0.0
    192.168.1.0:8080
does not validate:
    192.168.0.0/24
    192.168..1
    192.168.1 
```

我知道这是一个 frankenregex，但它仍然有效！

如果端口无关紧要，请使用这个：

```
 /^(?:(?:2[0-4]\d|25[0-5]|1\d{2}|[1-9]?\d)\.){3}(?:2[0-4]\d|25[0-5]|1\d{2}|[1-9]?\d)$/ 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-05-24T11:43:45.747

试试这个缩短的：

```
^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|(?=$))){4}$ 
```

这是此正则表达式的测试用例：

```
 function verifyIp(ip)
  {
    return /^(([1-9]?\d|1\d\d|2[0-4]\d|25[0-5])(\.(?!$)|(?=$))){4}$/.test(ip||"");
  }

  ["192.68.35.35","0.0.0.0","255.0.0.0","192.168.1.0","192.168.0.1","255.255.255.0","1.1.1.1","255.255.255.255","249.249.249.249","200.200.200.200","199.199.199.199","100.100.100.100","99.99.99.99","0.0.0.0","9.9.9.9","10.10.10.10","99.99.99.99","100.100.100.100","109.109.109.109","110.110.110.110","199.199.199.199","200.200.200.200","249.249.249.249","250.250.250.250","255.255.255.255","256.256.256.260","192.168.0.0/24","192.168..1","192.168.1","1","1.","1.1","1.1.","1.1.1","1.1.1.","1.1.1.1.","1.1.1.1.1",".1.1.1.1","01.01.01.01","09.09.09.09","1.0.0.1.0","010.1.1.1","123456","123123123123",".127.0.0.1"].forEach(function(item){
    is_valid = verifyIp(item);
    $('<div>'+item+' <span class="'+(is_valid?'correct':'wrong')+'">'+(is_valid?'VALID':'INVALID')+'</span></div>').appendTo('#result');
  });
```

```
.item {
  font-weight: bold;
}
.wrong {
  color: red;  
}

.correct {
  color: green;  
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="result"></div>
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-19T10:53:07.933

这是解决方案：

```
^(([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))\.){3}([01]?[0-9]?[0-9]|2([0-4][0-9]|5[0-5]))$ 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-02-11T03:31:01.477

只是扩展@DavidFaber 的优秀解决方案。要匹配 IPv4“[点分十进制](http://en.wikipedia.org/wiki/IPv4#Address_representations)”表示法（无范围/端口）：

```
^(((1?[1-9]?|10|2[0-4])\d|25[0-5])($|\.(?!$))){4}$ 
```

**匹配示例：** [https ://regex101.com/r/vX2hK4/15](https://regex101.com/r/vX2hK4/15)

编码高尔夫有人吗？

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-02-11T02:47:10.953

你也可以试试这个：

```
^((?:(?:^|\.)(?:\d|[1-9]\d|1\d{2}|2[0-4]\d|25[0-5])){4})$ 
```

我们希望模式准确重复四次——在这种情况下，我们的模式是一个 0 - 255 范围内的数字，前面有句`.`点或字符串的开头！由于字符串的开头只能出现一次，因此其他三个出现必须是句点。

[请参阅此 Regex 101 演示以获取完整说明。](https://regex101.com/r/vX2hK4/1)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-05-16T18:23:47.677

这个 reg ex 运作良好，但相信我它是矫枉过正的。
要进行像这里这样少于**255**的条件比较，最好结合使用 RegEx 和条件。

```
^(([0-1]?[0-9]?[0-9]{1})|(2?[0-4]?[0-9]{1})|(25[0-5]))\.(([0-1]?[0-9]?[0-9]{1})|(2?[0-4]?[0-9]{1})|(25[0-5]))\.(([0-1]?[0-9]?[0-9]{1})|(2?[0-4]?[0-9]{1})|(25[0-5]))\.(([0-1]?[0-9]?[0-9]{1})|(2?[0-4]?[0-9]{1})|(25[0-5]))$ 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-10T12:47:20.987

试图缩短 Grealy 的版本

```
^((1?\d?\d|2[0-4]\d|25[0-5])($|\.(?!$))){4}$ 
```

注意：与以前的版本一样，它不能正确处理八进制数，例如 0177.0.0.1

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-02-24T00:53:28.487

```
 import { Component } from '@angular/core';
    import { FormBuilder, FormGroup, Validators }   from '@angular/forms';

    @Component({
      selector: 'app-root',
      templateUrl: './app.component.html',
      styleUrls: ['./app.component.scss'],
    })
    export class AppComponent {
      ipranging="";
      testForm1: FormGroup;
      testForm2: FormGroup;
      constructor(private fb: FormBuilder){

      }
      ngOnInit(): void {
        const ipPattern = 
        "(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)";
        this.testForm1 = this.fb.group({
          inp: ['', Validators.pattern(ipPattern)],
          inp3: ['', Validators.pattern(ipPattern)]
        });
        this.testForm2 = this.fb.group({
          inp: ['', Validators.pattern(ipPattern)],
          inp2: ['', Validators.pattern(ipPattern)],
          inp3: ['', Validators.pattern(ipPattern)]
        });
        this.testForm2.setValidators(this.comparisionValidator);
      }

      public comparisionValidator(group: FormGroup) : any{

        const control1 = group.controls['inp'];
        const control2 = group.controls['inp2'];
        var control1array  = control1.value.split('.');
        var control2array = control2.value.split('.');

        if(parseInt(control1array[0]) > parseInt(control2array[0]) ){
          group.controls['inp3'].setErrors({ 'value2GreaterThanValue1': true });
          console.log(group); 
        }
        else if(parseInt(control1array[1]) > parseInt(control2array[1]) ){
          group.controls['inp3'].setErrors({ 'value2GreaterThanValue1': true });
          console.log(group); 
        }
        else if(parseInt(control1array[2]) > parseInt(control2array[2]) ){
          group.controls['inp3'].setErrors({ 'value2GreaterThanValue1': true });
          console.log(group); 
        }
        else if(parseInt(control1array[3]) > parseInt(control2array[3]) ){
          group.controls['inp3'].setErrors({ 'value2GreaterThanValue1': true });
          console.log(group); 
        }
        else {
          group.controls['inp3'].setErrors({ 'value2GreaterThanValue1': false });
          console.log(group);
        }   
      }
    } 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-02-24T00:58:08.547

```
 <div style="text-align:left">
        <h2>Choose if you want to enter a single ip or range of ip's</h2>
      <select  [(ngModel)]="ipranging">
        <option  selected disabled value="none"> -- select an option -- </option>
        <option  value='ip'>Single Ip address</option>
        <option  value="range">Ip range</option>
      </select>
      </div>

    <form *ngIf="ipranging === 'ip'" novalidate [formGroup]="testForm1" class="render">
      <label>IP Address: 
        <input formControlName="inp" placeholder='0.0.0.0'/></label>
            <input formControlName="inp3" hidden/>
          <!-- <p *ngIf="testForm.controls.inp.status == 'INVALID' && testForm.controls.inp.value != ''" >Invalid</p>
          <p *ngIf="testForm.controls.inp2.status == 'INVALID' && testForm.controls.inp2.value != ''" >Invalid</p> -->
          <p *ngIf="testForm1.controls.inp.value != '' && testForm1.controls.inp.status == 'INVALID'" >Invalid</p>
    </form>

    <form *ngIf="ipranging === 'range'" novalidate [formGroup]="testForm2" class="render">
      <label>Starting IP:
        <input formControlName="inp" placeholder='0.0.0.0'/></label>
          <label>
              Ending IP:
            <input formControlName="inp2" placeholder='0.0.0.0'/></label>
            <input formControlName="inp3" hidden/>
          <!-- <p *ngIf="testForm.controls.inp.status == 'INVALID' && testForm.controls.inp.value != ''" >Invalid</p>
          <p *ngIf="testForm.controls.inp2.status == 'INVALID' && testForm.controls.inp2.value != ''" >Invalid</p> -->
          <p *ngIf="testForm2.controls.inp.value != '' && testForm2.controls.inp.status == 'INVALID' || testForm2.controls.inp2.value != '' && testForm2.controls.inp2.status == 'INVALID'" >Invalid</p>
          <p *ngIf="testForm2.controls.inp3.errors.value2GreaterThanValue1 == true">Starting IP is larger than the ending IP</p>
    </form> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-22T19:35:48.110

您也可以检查我给定的表达式，我已经检查并用 java 编写了一个程序来验证 ipv4 地址。如果 IPv4 地址正确，则返回 true，反之亦然。

字符串模式="^([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\d?|2[0-4 ]\d|25[0-5])\.([01]?\d\d?|2[0-4]\d|25[0-5])\.([01]?\d\ d?|2[0-4]\d|25[0-5])$"

```
import java.util.regex.Matcher;
import java.util.regex.Pattern;
import java.util.Scanner;

class Solution{

    public static void main(String []args){
        Scanner in = new Scanner(System.in);
        while(in.hasNext()){
            String IP = in.next();
            System.out.println(IP.matches(new MyRegex().pattern));
        }

    }
}

    class MyRegex{
        String pattern="^([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\dCongrats, you solved this challenge!\\d?|2[0-4]\\d|25[0-5])$";

} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-03-23T13:23:48.607

**对于模式前 192.168.23.28/255.255.255.0**

```
^(25[0-5]|2[0-4][0-9]|[01]?[1-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-4]|2[0-4][0-9]|[01]?[1-9][0-9]?)\/(((128|192|224|240|248|252|254)\.0\.0\.0)|(255\.(0|128|192|224|240|248|252|254)\.0\.0)|(255\.255\.(0|128|192|224|240|248|252|254)\.0)|(255\.255\.255\.(0|128|192|224|240|248|252|254)))$ 
```

**对于模式 ex 192.168.26.82/24 或 192.168.23.28/255.255.255.0**

```
^(25[0-5]|2[0-4][0-9]|[01]?[1-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-4]|2[0-4][0-9]|[01]?[1-9][0-9]?)\/([1-9]|1[0-9]|2[0-9]|3[0-2]|(((128|192|224|240|248|252|254)\.0\.0\.0)|(255\.(0|128|192|224|240|248|252|254)\.0\.0)|(255\.255\.(0|128|192|224|240|248|252|254)\.0)|(255\.255\.255\.(0|128|192|224|240|248|252|254))))$ 
```

**对于模式 ex 192.168.26.28**

```
^(25[0-5]|2[0-4][0-9]|[01]?[1-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-4]|2[0-4][0-9]|[01]?[1-9][0-9]?)$ 
```

**对于网络掩码 ex 255.255.255.0**

```
^(((128|192|224|240|248|252|254)\.0\.0\.0)|(255\.(0|128|192|224|240|248|252|254)\.0\.0)|(255\.255\.(0|128|192|224|240|248|252|254)\.0)|(255\.255\.255\.(0|128|192|224|240|248|252|254)))$ 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-12-02T15:06:36.590

Colin Hebert 指出了最佳解决方案。但是没有人通过提供代码来“解释”它，所以这里是（“只是因为我觉得这很有趣：”；）

```
var aIP = [
  '192.168.0.1',
  '255.255.255.255',
  '1.2.34.647',
  '256.0.0.0',
  '255,0,0,0',
  '123.123.123',
  '1.2.3.4.5'
  ];

aIP.forEach(function(ipAddr) {

  var a = ipAddr.split('.'),
      cnt = 4;

  document.write('Testing ' + ipAddr + '<br/>');

  try {
    a.forEach(function(v) {
      if( v<0 || v>255 )
        throw false;
      cnt--;
    });
    if( cnt!=0 )
        throw false;
      cnt--;
    document.write('- Pass!<br/>');
  }
  catch (e) {
    document.write('- Fail!<br/>');
  }
});
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-01-11T17:19:04.427

尝试这个，

```
ValidIpAddressRegex = "^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$" 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-09-13T23:49:24.053

也试试这个：

```
(((?<![\d])([0-9][\.])|(?<![\d])([1-9][0-9][\.])|(?<![\d])(1[0-9]{2}[\.])|(?<![\d])(2[0-5][0-5][\.]))(([0-9][\.])|([1-9][0-9][\.])|(1[0-9]{2}[\.])|(2[0-5][0-5][\.])){2}(([0-9])(?![\d])|([1-9][0-9])(?![\d])|(1[0-9]{2})(?![\d])|(2[0-5][0-5])(?![\d]))) 
```

虽然这是一个 5 年前的问题，所以我怀疑你还在寻找答案。

在另一个线程上发布了更多信息： [使用正则表达式验证 IPv4 地址](https://stackoverflow.com/questions/5284147/validating-ipv4-addresses-with-regexp/46207649#46207649)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2019-02-12T11:01:22.840

IPv4 有 4 个从 0 到 255 的数字块，左侧可以包含填充零。每个块都用一个点隔开。

简短的 IPv4 验证器：

```
var block "([0-1]{0,1}[0-9]{1,2}|2[0-4][0-9]|25[0-5]|)";
var ipv4 = "(" + block +"\\.){3}" + block ; 
```

验证任何 IP，例如：

*   000.12.12.034
*   121.234.12.12
*   23.45.12.56
*   003.045.012.056
*   03.45.12.6
*   0.45.122.255

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-09-05T16:01:10.540

OP 要求验证 IP 地址。Q 的措辞几乎可以肯定意味着 IPv4（而不是 IPv6）。我已经在 OP 上评论了有效性检查可能会走多远，并为一位响应者采取非 RE 方法而鼓掌。如果我在公共服务器上使用地址，我还想（在某些情况下）测试地址的有效性，我想出了以下 JS：

```
function isSimpleIPv4( ip, u=true ) {
    if ((ip === undefined) || (ip === null) || (ip.length > 15)) return false;
    var p = ip.split(\'.\');
    if (p.length != 4) return false;
    p.forEach( function(v,k){p[k]=Number(v);} );
    if (isNaN(p[0]) || isNaN(p[1]) || isNaN(p[2]) || isNaN(p[3]) ) return false;
    if ((p[0] < 1) || (p[0] > 255) || (p[1] < 0) || (p[1] > 255) || (p[2] < 0) || (p[2] > 255) || (p[3] < 0) || (p[3] > 255)) return false;
    if (!u) return true;
    if ((p[0] > 223)) return 'multicast';
    if ((p[0] == 127)) return 'loopback';
    if ((p[0] == 10)) return 'RFC1918';
    if ((p[0] == 192) && (p[1] == 168)) return 'RFC1918';
    if ((p[0] == 172) && (p[1] >= 16) && (p[1] <= 31)) return 'RFC1918';
    return true;
} 
```

如果要检查“有用的”地址，则只需要字符串 IP，否则，如果只检查 0-255.0-255.0-255.0-255，则使用 IP 字符串和 false 调用该函数。在前一种情况下，函数将返回真/假/什么时候是有用的“失败”原因。网站访问者打算使用的 RFC1918 地址无法从公共服务器访问，甚至可能危及自己的服务器之一（如环回范围 127.xxx 中的地址）。同样，使用多播地址也无济于事。如果您对有用性检查感兴趣但不关心原因，那么您只需要做`if (isSimpleIPv4(ipString) !== true) console.log('Not a valid and useful IP address');`

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-07-11T07:31:23.877

您可以简单地使用此正则表达式来验证任何没有端口号的 IP 地址，例如这种格式 (192.168.1.1)

```
/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/ 
```

* * *

## 回答 #21

> 赞同：-1
> 
> 时间：2014-03-26T06:27:00.233

这应该工作

```
^(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})$ 
```

# git - Refresh staged files

> ID：10006462
> 
> 赞同：23
> 
> 时间：2012-04-04T07:10:38.937
> 
> 标签：git, git-add

In git, is there any (simple) way to modify the index so that only changes to files which are already in it are added? It sounds kind of complicated, but what I want to achieve is simple.

Lets say my index looks like this (slightly stripped `git status` output):

```
# Changes to be committed:
#       modified:   A
#       modified:   B
#
# Changed but not updated:
#       modified:   B
#       modified:   C
#
# Untracked files:
#       D 
```

Some changes to `B` are in the index, some aren't. `C` is not staged at all.

How can I update `B` in the index (stage its unstaged changes) without adding `C`?

I.e. I would like for the index to look like this:

```
# Changes to be committed:
#       modified:   A
#       modified:   B
#
# Changed but not updated:
#       modified:   C
#
# Untracked files:
#       D 
```

In this simple case it can of course be achieved with a simple `git add B`, but I would like to know if there's a simple answer for the general case. I tried `git add --refresh`, but if I understand correctly, that only updates stat info.

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-04T16:56:05.380

以下命令将更新索引以包含 B 中尚未暂存的其他更改：

```
git update-index --again 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:18:18.027

我不知道这样做的完全微不足道的方法，但是：

```
git status --porcelain 
```

将文件 B（并且只有 B）显示为状态“MM”，因此：

```
git status --porcelain | grep ^MM | cut -d' ' -f 2 
```

将生成此类文件的列表。

不过，“重新添加”A 并没有什么坏处。

您也可以使用`git diff-index --cached --name-status HEAD`. （如果你的 git 太老了，可能需要这个`git status --porcelain`。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-28T22:58:51.753

而不是`--refresh`，你应该使用`--update`：

```
git add --update 
```

在此之后，`git status`应该看起来像：

```
# Changes to be committed:
#       modified:   A
#       modified:   B
#       modified:   C
#
# Untracked files:
#       D 
```

# c# - UDP C# connection

> ID：10006464
> 
> 赞同：1
> 
> 时间：2012-04-04T07:10:59.067
> 
> 标签：c#, udp

I have a program shown below:

```
Socket receiveSocket = new Socket(AddressFamily.InterNetwork,
                                  SocketType.Dgram, ProtocolType.Udp);

EndPoint bindEndPoint = new IPEndPoint(IPAddress.Any, 3838);

byte[] recBuffer = new byte[256];

public Form1()
{
    InitializeComponent();
}

private void button1_Click(object sender, EventArgs e)
{
    receiveSocket.Bind(bindEndPoint);
    receiveSocket.Receive(recBuffer);
} 
```

and it is working but when I want to just listen to a specific IP address it does not work, it throws an exeption "the requested address is not valid in context"

new code: EndPoint bindEndPoint = new IPEndPoint(IPAddress.Parse("192.168.40.1"), 3838);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:37:56.520

您绑定的 IP 地址应该是实际分配给您计算机上的网络接口的 IP 地址之一。

假设您有一个以太网接口和一个无线接口

> 以太网：192.168.1.40
> 
> 无线：192.168.1.42

在套接字上调用 Bind 方法时，是在告诉它要在哪个接口上侦听数据。例如，要么是“其中任何一个”，要么只是以太网接口。

我猜这不是你要找的吗？

也许您正试图限制谁可以连接到您的服务器

所以你可能正在寻找的是

```
var remoteEndPoint = new IPEndPoint(IPAddress.Parse("192.168.1.40"), 0)
receiveSocket.ReceiveFrom(buffer, remoteEndpoint); 
```

这限制了您接受数据的来源。

# gwt - SmartGwt drag and drop on tree component

> ID：10006465
> 
> 赞同：1
> 
> 时间：2012-04-04T07:10:59.793
> 
> 标签：gwt, drag-and-drop, tree, smartgwt

I'm trying to move nodes form a tree to another and be able to reparent nodes and so on. In order to get the track the drop event on a node in a tree I have registered a FolderDropHandler pn the tree:

```
tree.addFolderDropHandler(new FolderDropHandler() {
            @Override
            public void onFolderDrop(FolderDropEvent folderDropEvent) {
                TreeNode parentFolder = folderDropEvent.getFolder();
                TreeNode droppedItem =  folderDropEvent.getNodes()[0];

            }
        }); 
```

This works fine, I'm notified when nodes are dropped on other nodes, but I am not notified when I drop on the root node (or an empty tree with just the root node). How can i handle this case? Any ideas?

# asp.net-mvc - Passing and Storing objects between Pages

> ID：10006466
> 
> 赞同：0
> 
> 时间：2012-04-04T07:11:03.357
> 
> 标签：asp.net-mvc, asp.net-mvc-3

I'd like some advice on this issue. Basically, I have 2 pages (for simplicity sake), and the second page is completely dependent on the first page.

So lets say the main page is a **search** page, and the second page is a **view** page.

The site works off XML requests, and the ultimate aim is to keep the XML requests to a minimum as each request is a little slow. I considered using Sessions, but I've had some problems in the past with sessions being mixed between users randomly which i only manage to curb by changing the recycle process in IIS to a very small time frame, so I'm wondering if there is any other way. I've tried TempData, but that expires after one request, so a page refresh on the view page doesn't seem possible. (or is it?)

Anyways, we have the Search page that has, say, 5 attributes that are required by the View page, but only 2 are needed to make the XML request on the view page.

e.g.

**Search Page Contains**:

*   ID,
*   Name,
*   City,
*   Email,
*   Height

**View Page needs the following from the Search page to complete the xml request**:

*   ID,
*   Name,
*   Email

View Page displays all the information from the search page, plus everything in the XML response.

The link i have in the search page only has the ID in the url, so name and email are required for the XML request on the second page some how. Not sure if it's possible without sessions?

What i've tried is:

Store the search results in TempData. That way, when someone clicks the 'View' link (`<a href="/view/123456">View</a>`), the View page loads the search results like so:

```
var viewPage = SearchResults.Where(w => w.ID == id).FirstOrDefault(); 
```

The ViewModel then renders the page by grabbing the `Name` and `Email` from `viewPage`, making an XML request, and displaying the response, along with other required details from `viewPage`.

It works as expected with tempdata. Data only persists on the first request, dies on a page refresh. Sessions is the alternative, but is there any other?

(sorry for the wall of text :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T06:19:29.930

为什么不使用更标准的技术，例如`<form>`在搜索页面中指向将执行搜索的控制器操作的标记：

```
@using (Html.BeginForm("search", "somecontroller", FormMethod.Get))
{
    ... some input fields for your search criteria
    <button type="submit">Search</button>
} 
```

然后您将拥有 Search 控制器操作：

```
public ActionResult Search(SearchModel model)
{
    var results = ....
    return View(results);
} 
```

我在表单上使用了 GET 方法，该方法允许用户为结果页面添加书签并稍后返回。

# python - Creating a corpus from data in a custom format

> ID：10006467
> 
> 赞同：0
> 
> 时间：2012-04-04T07:11:04.850
> 
> 标签：python, nlp, nltk

I have hundreds of files containing text I want to use with NLTK. Here is one such file:

```
বে,বচা ইয়াণ্ঠা,র্চা ঢার্বিত তোখাটহ নতুন, অ প্রবঃাশিত।
তবে ' এ বং মুশায়েরা ' পত্রিব্যায় প্রকাশিত তিনটি লেখাই বইযে
সংব্যজান ব্যরার জনা বিশেষভাবে পরিবর্ধিত। পাচ দাপনিকেব
ড:বন নিয়ে এই বই তৈরি বাবার পরিব্যল্পনাও ম্ভ্রাসুনতন
সামন্তেরই। তার আর তার সহকারীদেব নিষ্ঠা ছাডা অল্প সময়ে
এই বই প্রব্যাশিত হতে পারত না।,তাঁদের সকলকে আমাধ
নমস্কার জানাই।
বতাব্যাতা শ্রাবন্তা জ্জাণ্ণিক
জানুয়ারি ২ ণ্ট ণ্ট ৮ 
Total characters: 378

```

Note that each line does **not** contain a new sentence. Rather, the sentence terminator - the equivalent of the period in English - is the '।' symbol.

Could someone please help me create my corpus? If imported into a variable MyData, I would need to access MyData.words() and MyData.sents(). Also, the last line should not appear in the corpus (it merely contains a character count).

Please note that I will need to run operations on data from **all** the files at once.

Thanks in advance!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T12:33:02.137

您不需要自己输入文件或提供`words`和`sents`方法。使用 阅读您的语料库`PlaintextCorpusReader`，它会为您提供这些。语料库阅读器构造函数接受文件的路径和文件名模式以及输入编码的参数（一定要指定它）。

构造函数还具有句子和单词标记化函数的可选参数，因此您可以将自己的方法传递给它以将文本分解为句子。如果单词和句子检测真的很简单，即如果| 字符还有其他用途，您可以从 nltk 的 RegexpTokenizer 系列中配置一个标记化功能，或者您可以从头开始编写自己的。（在编写自己的代码之前，请研究文档和代码或编写存根以找出调用它的输入类型。）

如果识别句子边界并非易事，您稍后可以弄清楚如何训练 nltk 的 PunktSentenceTokenizer，它使用无监督的统计算法来了解句子终止符的哪些使用实际上结束了一个句子。

如果您的语料库阅读器的配置相当复杂，您可能会发现创建一个专门用于`PlaintextCorpusReader`. 但很多时候这是不必要的。查看 NLTK 代码以了解古腾堡语料库是如何实现的：它只是一个`PlainTextCorpusReader`为构造函数提供适当参数的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:02:14.693

1）摆脱最后一行是相当简单的。

```
f = open('corpus.txt', 'r')
for l in f.readlines()[:-1]:
   .... 
```

for 循环中的 [:-1] 将为您跳过最后一行。

2) 文件对象的内置 readlines() 函数通过使用换行符作为分隔符将文件中的内容分成几行。所以你需要写一些代码来缓存这些行直到'|' 可见。当一个'|' 遇到，把缓存的行当成一个句子放在你的 `MyData`类里

# javascript - How to call key of object inside of object without "this"

> ID：10006469
> 
> 赞同：0
> 
> 时间：2012-04-04T07:11:18.013
> 
> 标签：javascript, oop

I started using Base.js for a class inheritance. In Base.js a class should be an object, but does not function.

This creates a problem:

```
 ​var obj = {
    variable:true,
        func:function(){
            console.log(variable);
        }
    };

    obj.func();​ 
```

This code throw error: "Uncaught ReferenceError: variable is not defined". This is because "console.log(variable);" does not have "this".

But i dont want write "this" in ALL functions in my large class.

Is there any way around this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:18:01.850

你总是可以多写一行代码： var ins_obj = this; 但是您仍然必须将 ins_obj.variable 放在 console.log 中。我用过的任何语言都会做这些事情。this.variable 是在对象内部调用变量、函数的方式。

# javascript - dynamically created img tag with jQuery?

> ID：10006471
> 
> 赞同：-3
> 
> 时间：2012-04-04T07:11:20.457
> 
> 标签：javascript, jquery, asp.net, image, dom

How to create dynamically tag inside table. At first create link then inside link create an img tag like if i have..

```
<table>
    <tr>
        <td>
            <a>
                <img />
            </a>

            // Add Some more when every time my function is run..? like that 
            // <a>
            //  <img/>
            // </a>

        </td>
    </tr>
</table> 
```

Im using this inside function but its didn't work help me.

```
$(document.createElement("img")).attr('Some attr'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:16:43.033

如果您通过“jquree”表示 JQuery，那么试试这个：

```
$('table tr td').append('<a href="#"><img src="/favicon.ico"/></a>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:29:46.333

好吧，我不打算回答这个问题，但我没有看到任何正确的答案（来自我的 POV）：

```
function addElement(tdId) { // Specify the id the of the TD as an argument
    $('#' + tdId).append( // Append to the td you want
        $('<a></a>').attr({ // Create an element and specify its attributes
            'href': '/home',
            'title': 'Home'

        }).append( // Also append the image to the link
            $('<img />').attr({ // Same, create the element and specify its attributes
                'src': 'image.png',
                'width': '100px',
                'height': '100px'
            })
        ) // Close the "append image"
    ) // Close the "append anchor"
} 
```

现在这是一个纯粹的 jQuery 答案。一个 javascript 答案如下：

```
function addElement(tdId) { // Specify the id the of the TD as an argument
    // Create the DOM elements
    var a = document.createDocumentFragment('a'),
        img = document.createDocumentFragment('img') // See the use of document fragments for performance

    // Define the attributes of the anchor element
    a.href = '/home'
    a.title = 'Home'

    // Define the attributes of the img element
    img.src = 'image.png'
    img.width = '100px'
    img.height = '100px'

    // Append the image to the anchor and the anchor to the td
    document.getElementById(tdId).appendChild(a.appendChild(img))
} 
```

我认为js版本更具可读性。但这只是我的意见;o)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:13:56.643

```
$(document).ready(function(){

   $('.any_element_you_want').html('<a href="/home" title="Home"><img src="image.png"></a>');

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T07:15:10.493

使用 jquery，然后你可以创建图像元素，如下所示

```
$(document).ready(function(){  

    var elem = new Element('img', 
              { src: 'pic.jpg', alt: 'alternate text' }); 
   $(document).insert(elem); //here you can also make use of `append` method instead of this method
} 
```

或者

```
var img = new Image(1,1);  ///params are optional 
img.src = ''pic.jpg'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T07:15:15.860

```
var td = $('table tr td');
td.append('<a><img src="whatever.jpg"/></a>'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T08:01:47.817

> 在每次单击按钮时，它将添加带有图像 url abc.png 的 img 标签，并添加到具有 id imagediv 的 div 中。

```
$("button").click(function()
 {
     var img=$('<img id="dynamic">');     
     $(document.createElement('img'));
     img.attr('src',"abc.png");
     img.appendTo('#imagediv');
  }); 
```

# sugarcrm - 从 SugarCRM 获取联系人图片

> ID：10006477
> 
> 赞同：0
> 
> 时间：2012-04-04T07:11:30.567
> 
> 标签：sugarcrm

我正在尝试将我的 rails 应用程序与 SugarCRM 集成。是否可以使用 REST API 从 SugarCRM 获取联系人图片？请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:21:45.070

要获取用户的个人资料图像，请执行以下操作：

1.  `login`通过 REST调用方法
2.  通过 REST调用该`get_entry_list`方法，使用以下参数：
    1.  模块：`Users`
    2.  询问：`users.user_name = 'xxxx'`
    3.  选择字段：`picture`
3.  响应包含存储在 /uploads 中的配置文件图像的文件名。
4.  但是，出于安全原因，由于 .htaccess 限制，无法查看该文件夹中的图像，但存在其他选项：
    1.  使用提供个人资料图像的方法扩展 REST API（类似于`get_document_revision`）
    2.  从您的 Rails 应用程序登录服务器并获取图像
    3.  在SugarCRM中创建一个简单的entrypoint+module，可以显示图片
    4.  删除图像的 .htaccess 限制（如果它不会在您的设置中产生安全风险）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-27T06:24:13.060

在这种情况下，我遇到了一个问题，上传文件夹存储具有记录 ID 名称的文件，即没有文件扩展名的 GUID。因此，为了解决这个问题，我确实编写了一个函数来复制相同层次结构但带有扩展名的文件。示例：上传文件夹中名为“32sdft-tg35f-Tuhis-675rtyf-77666-46dgc”的 png 扩展文件最终将变为“32sdft-tg35f-Tuhis-675rtyf-77666-46dgc.png”现在只有路径将需要渲染图像。

按照我们的朋友 Kare 的建议，将所有适用的东西都休息一下！！

# asp.net-mvc - 为什么是 Asp.net MVC 而不是 Asp.net MVP

> ID：10006478
> 
> 赞同：2
> 
> 时间：2012-04-04T07:11:48.913
> 
> 标签：asp.net-mvc, mvp

就理论而言，似乎 Asp.net MVC 框架可以更好地描述为**MVP**软件模式……为什么不呢？

因为在我看来，我将 Asp.net MVC 视为具有调用控制器操作的功能视图（运行脚本）的框架。所以看起来观点是大师。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:28:22.930

有两个明显的区别（取自源）：

**被动视图**：

视图尽可能地愚蠢并且包含几乎为零的逻辑。Presenter 是与 View 和 Model 对话的中间人。View 和 Model 完全相互屏蔽。Model 可能会引发事件，但 Presenter 订阅它们以更新 View。在 Passive View 中没有直接的数据绑定，而是 View 公开了 Presenter 用来设置数据的 setter 属性。所有状态都在 Presenter 而不是 View 中管理。

Pro：最大的可测试性表面；视图和模型的清晰分离

缺点：当您自己进行所有数据绑定时，需要做更多工作（例如所有 setter 属性）。

**监督控制器**：

Presenter 处理用户手势。View 通过数据绑定直接绑定到 Model。在这种情况下，Presenter 的工作是将模型传递给视图，以便它可以绑定到它。Presenter 还将包含诸如按下按钮、导航等手势的逻辑。

优点：通过利用数据绑定减少了代码量。

缺点：可测试的表面较少（因为数据绑定），并且视图中的封装较少，因为它直接与模型对话。

看到这个问题：[什么是MVP和MVC，有什么区别？](https://stackoverflow.com/questions/2056/what-are-mvp-and-mvc-and-what-is-the-difference)

# iphone - 如何在不损坏文件的情况下重命名 xcode 项目中的文件夹名称

> ID：10006482
> 
> 赞同：18
> 
> 时间：2012-04-04T07:12:00.050
> 
> 标签：iphone, objective-c, ios, xcode, ios4

在我的 xcode 项目中，我创建了一个手动命名的文件夹，以`"MyClasses"`将新添加的文件/类放置到该文件夹​​中。

现在我在这个文件夹中有近 30 个类。

当我重命名此文件夹时，此文件夹中的所有文件都将被删除。

现在我需要将文件夹重命名为“ `ViewControllerClasses`”。

但我丢失了 30 个 .h、.m、xib 文件。[幸运的是我有一个副本 & 和 zip 文件]

***如何在不损坏文件的情况下重命名文件夹。***

![在此处输入图像描述](../Images/e7876b816ff417380d4ebd47a4cf8e83.png)

![在此处输入图像描述](../Images/96428991188afdfb850fe91800bca691.png)

将其重命名为 myviewcontrollerclasswes

当我重命名

![在此处输入图像描述](../Images/cf5b6f7a0bf492243b5863b399e7a653.png) ![在此处输入图像描述](../Images/94c1a8c211a3e59ace40fb356b235fed.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-09-24T04:52:15.220

两种解决方案

**方法_1。尝试手动编辑：**

```
 « Drag your MedChart.xcodeproj to TextWrangler  (or any text editor) 

  « Use find button to find "FolderName" (Your folder name) 

  « Replace all with new name.

  « In some project you may notice header search path problem...goto header search path and replace with new name. 
```

**方法_2。使用 Xcode 选择基本文件夹：**

在 finder 中重命名文件夹，然后使用 Xcode 选择相同的文件夹。 ![在此处输入图像描述](../Images/6359af612e1f69f158e9372334a3d358.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-04T09:40:58.420

**2017 年的注意**事项：现在 Xcode 9 会自动同步文件夹和项目层次结构。

**注意**截至 2013 年： [复制和重命名 Xcode 项目和相关文件夹](https://stackoverflow.com/questions/17744319/duplicate-and-rename-xcode-project-associated-folders)

* * *

您在项目文件下的 XCode 中看到的“文件夹”不是文件系统中的真实文件夹，只是在 .xcodeproj 文件中管理的虚拟文件夹。您可以独立于文件系统中的位置来组织项目文件夹中的文件。有些人喜欢将文件系统文件夹结构映射到项目文件夹结构中，而另一些人则将所有源文件存储在文件系统的一个大文件夹中，并仅在项目文件夹中组织它们：这是一个偏好问题。

然而，如果你重命名/移动*文件*系统中的文件，你将不得不删除它们并将它们重新添加到你的项目中，因为 XCode 不知道在哪里可以找到它们。注意不要*物理*删除它们，只需从 XCode 项目中删除它们，然后重新添加它们并根据需要重新组织。

还有一点需要注意：如果您使用的是版本控制系统，您还必须通知其客户端（最有可能是 svn 或 git）您已重命名/移动了文件。如果您想保留文件修订历史记录，最好向版本控制明确发出复制/移动命令，否则它会将您的文件视为从旧位置删除并在新位置添加为新文件。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-14T20:21:56.233

如果有人仍然遇到这个问题：

1.  在 XCode 左侧栏中选择与要重命名的文件夹相对应的文件夹或文件（对我来说，我重命名了包含我所有文件的文件夹，所以我选择了最顶层的文件夹）
2.  在右侧栏的“位置”下方，单击文件夹图标。
3.  在打开的文件资源管理器中，将现有文件夹重命名为您想要的任何名称，然后选择它并按“确定”。
4.  XCode 应该相应地更新文件位置。

请记住，如果您重命名包含在构建设置中硬编码为特定路径的文件的内容，XCode 将引发错误。您必须在构建设置中手动更改这些路径。

这对我有用，希望它也对你有用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-08T21:54:25.587

您应该只对项目文件进行搜索和替换（如果您正在使用版本控制并且与其他开发人员一起工作，那么毫无疑问您会经常看到这个文件），它是`project.pbxproj`位于 xxxxxxxx.xcodeproj 文件中的文件。

只需右键单击（Control + Click）文件并选择“显示包内容”即可找到 xcodeproj 文件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-22T01:03:47.447

我仍然发现比所有这些方法更容易在文件导航器中创建一个新文件夹，然后将文件从另一个文件夹拖到其中。有时最简单的方法是最好的方法。它确实需要我 10 秒，而且我不需要离开 Xcode。

# iphone - how to add and edit 2 views in one view controller in xcode 4.2 from Interface Builder in iphone?

> ID：10006483
> 
> 赞同：0
> 
> 时间：2012-04-04T07:12:00.800
> 
> 标签：iphone, xcode, interface-builder, xcode4.2, ios-simulator

I am Abbas,I am new to iPhone Development,

Till tomorrow i am using xcode 3.2 sdk and build in interface builder,

I have updated my xcode to 4.2,

If i am adding another view to existing view controller by assigning IBOutlet View *view1,

and edit my new view from Interface Builder, it does not able to edit.

and also my previous Interface builder is not showing.

What i can do, Give me any suggestion,

Please Help me.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:03:41.187

从 xcode4 开始，界面生成器被集成到 xcode 中，它不再是一个单一的 UI。

您只需单击 .xib 文件即可轻松对其进行编辑。也许有一些错误的操作。我建议您关闭 xcode3.2 和项目，然后仅在 xcode 4.2 中重新打开项目。

# c# - How to create xml from a template-c#

> ID：10006486
> 
> 赞同：4
> 
> 时间：2012-04-04T07:12:17.403
> 
> 标签：c#, .net, xml

I have a xml template like this

```
<User>
<UserId></UserId>
<UserName></UserName>
<Roles>
<Role></Role>
<Roles></Role>
</Roles>
</User> 
```

Form this xml template file,dynamicaly i want to generate an xml.How can i do this.

Output xml should look like this

```
<User>
<UserId>user1</UserId>
<UserName>fr</UserName>
<Roles>
<Role>abc</Role>
<Role>def</Role>
</Roles>
</User> 
```

How can i achieve this.What all changes i need to make in template file.How to read and create xml from this tempalte xml file using c#.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-08-07T06:01:25.797

序列化是一种选择，但如果你真的需要一个模板，你可以使用这个[https://github.com/beto-rodriguez/Templator](https://github.com/beto-rodriguez/Templator)

这是一个例子

C＃

```
UserClass user = new UserClass();
user.UserId = 1;
user.UserName = "my name";
User.Roles = new List<string>(){"admin", "sales"};
//some other properties...    

var compiler = new Compiler()
            .AddElementToScope("user", user);

var compiled = compiler.CompileXml(@"C:\...\myXml.xml") 
```

XLM 源

```
<User>
  <UserId>{{user.UserId}}</UserId>
  <UserName>{{user.UserName}}</UserName>
  <Roles Tor.Repeat="role in user.Roles">
    <Role>{{role}}</Role>
  <Roles></Role>
  </Roles>
</User> 
```

编译

```
<User>
  <UserId>1</UserId>
  <UserName>my name</UserName>
  <Roles>
    <Role>admin</Role>
    <Role>sales</Role>
  <Roles></Role>
  </Roles>
</User> 
```

你也可以从 Nuget 安装它：

```
Install-Package SuperXML 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T07:18:04.687

您可以[`XmlSerializer`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)根据模板使用和创建具有属性的简单类：

```
public class User
{
   public UserId{get;set;}

   ...
} 
```

并将类序列化为 XML 文件。

[这里](http://www.jonasjohn.de/snippets/csharp/xmlserializer-example.htm)有一个很好的例子。

**选项 #2**：
如果由于某种原因您不想使用`XmlSerializer`use `XmlWriter`- 为了防止忘记关闭元素，我建议您使用“AutoClose”XmlWriter - 我在我的博客上写过关于如何创建这个简单类的博客 - [XmlWriter使用 IDisposable 自动关闭元素](http://blog.drorhelper.com/2009/07/xmlwriter-that-automatically-close.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:15:06.463

使用 XmlTextReader

[http://support.microsoft.com/kb/307548](http://support.microsoft.com/kb/307548)

[http://www.c-sharpcorner.com/UploadFile/mahesh/ReadWriteXMLTutMellli2111282005041517AM/ReadWriteXMLTutMellli21.aspx](http://www.c-sharpcorner.com/UploadFile/mahesh/ReadWriteXMLTutMellli2111282005041517AM/ReadWriteXMLTutMellli21.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-29T11:19:22.767

`var templateXML = "C://template.xml"//full path for the template xml XmlDocument doc = new XmlDocument(); FileStream fs = new FileStream(templateXML, FileMode.Open, FileAccess.Read); doc.Load(fs); XmlNode node = doc.DocumentElement; XmlNamespaceManager nsmgr = new XmlNamespaceManager(doc.NameTable); nsmgr.AddNamespace("pf", "http://www.example.com/abc"); node = doc.DocumentElement; nodeName = "/pf:Message/pf:User/pf:UserID"; node.SelectSingleNode(nodeName, nsmgr).InnerXml = "user1";put you custom value nodeName = "/pf:Message/pf:User/pf:UserName";
node.SelectSingleNode(nodeName, nsmgr).InnerXml = "fr";put you custom value .... ..... ....... var postData = node.ParentNode.InnerXml; postData = node.OuterXml;`

# android - 如何使用我的设备验证来自 .net 网络服务的坐标？

> ID：10006492
> 
> 赞同：0
> 
> 时间：2012-04-04T07:12:42.617
> 
> 标签：android, web-services, android-emulator, webforms

我在我的设备上获取坐标，但我需要用服务器坐标验证这个坐标，就像两者不同或相同，如果我设置某个范围 100 米，它是否在范围内或不像 dat。

我需要以任何方式验证两个坐标，有人建议我吗？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:17:54.077

```
private static Double FindDistance(Double lat1, Double lon1, Double lat2, Double lon2)
{
    const Int32 R = 6371; // km
    Double dLat = (lat2 - lat1) / (180 / Math.PI);

    Double dLon = (lon2 - lon1) / (180 / Math.PI);

    Double a = Math.Sin(dLat / 2) * Math.Sin(dLat / 2) +
               Math.Cos(lat1 / (180 / Math.PI)) * Math.Cos(lat2 / (180 / Math.PI)) *
               Math.Sin(dLon / 2) * Math.Sin(dLon / 2);

    Double c = 2 * Math.Atan2(Math.Sqrt(a), Math.Sqrt(1 - a));
    return (R * c);
} 
```

# django - django-model-utils：如果父模型/类是抽象的，InheritanceManager 是否工作？

> ID：10006494
> 
> 赞同：5
> 
> 时间：2012-04-04T07:12:45.510
> 
> 标签：django, django-models, django-queryset

[django-model-utils](https://github.com/carljm/django-model-utils)。我正在尝试文档中描述的 InhertianceManager 的非常基本的使用。

```
nearby_places = Place.objects.filter(location='here').select_subclasses() 
```

**唯一的区别是我的父模型/类是抽象的。这仍然应该工作吗？**

我收到类似的错误

> 渲染时捕获 DatabaseError：（1146，“表 'proj.ParentModel' 不存在”）

和

> “选项”对象没有属性“_join_cache”

当您尝试对抽象类进行查询时，这两者都是通常会遇到的错误。

在我的父模型中，我将管理器定义如下：

```
class ParentModel(OrderedModel):
    objects = InheritanceManager() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T07:39:27.593

按照文档中的链接到[Jeff Elmore 的博客](http://jeffelmore.org/2010/11/11/automatic-downcasting-of-inherited-models-in-django/)（又名 InheritanceManager 的作者），他描述了 InheritanceManager 的工作原理。

很明显，父模型/类不能是抽象的。

....实际上我应该第一次从代码中弄清楚这一点.....

# c# - C# smtp 响应

> ID：10006495
> 
> 赞同：0
> 
> 时间：2012-04-04T07:12:51.163
> 
> 标签：c#, smtp, gmail

我对 smtp 没有什么疑问

如果主机是 gmail，我使用此代码发送邮件，那么它的行为不同：

```
foreach (string host in hosts)
{
    SmtpClient sc = null;
    try
    {
        if (emailDomain.ToLower() == "gmail.com")
        {
            MailSend.MailSendApp.EventLog.WriteEntry("mail to gmail.com");

            sc = new SmtpClient("smtp.gmail.com", 587);
            sc.UseDefaultCredentials = false;
            sc.DeliveryMethod = SmtpDeliveryMethod.Network;
            sc.Credentials = new NetworkCredential("UID@gmail.com", "PWD");
            sc.EnableSsl = true;
        }                                    }
        else
        {
            sc = new SmtpClient(host);

            sc.Send(mailMessage);

            break;

        } 
```

是否可以从 smtp 获得答复：1\. 电子邮件已到达 2\. 如果邮件存在

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:24:30.513

如果您想收到电子邮件已到达的通知，您需要发送带有[送达通知选项](http://msdn.microsoft.com/en-us/library/system.net.mail.deliverynotificationoptions.aspx)的电子邮件。

```
mailMessage.DeliveryNotificationOptions = DeliveryNotificationOptions.OnFailure; 
```

如果该电子邮件不存在，您将收到一封返回到您的发件人地址的电子邮件，而不是您的 SMTP 类。

简而言之，单纯从 SMTP 类的角度来确定这两件事并不容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:23:38.040

过去，您可以直接查询电子邮件地址是否存在于给定服务器上（`VRFY user`SMTP 命令）。然后，垃圾邮件诞生了，几乎所有的电子邮件服务器都删除了该功能，因为垃圾邮件发送者会使用机器人来查询每个邮件服务器上可能的电子邮件收件人以构建垃圾邮件列表。

您仍然会收到一份普通的退回报告（电子邮件返回到回复地址，表明交付失败）。我使用一个名为[Boogie Tools](http://www.boogietools.com/)的工具来自动处理退回邮件。

由于类似的原因，Gmail 不提供投递或已读回执（尽管某些电子邮件服务器仍可选择允许）……滥用可能性太大。

# java - 在不同的类中访问arraylist？

> ID：10006497
> 
> 赞同：0
> 
> 时间：2012-04-04T07:13:08.873
> 
> 标签：java, inheritance, arraylist, polymorphism

`Member`类=超类 `SeniorMember`类=子类 `JuniorMember`类=子类

是否可以在不同的类中使用相同的数组列表来存储成员？

“委员会类”有一个数组列表，只添加和删除高级成员

“社会类”有一个数组列表来存储所有成员，添加和删除高级成员和初级成员。

他们可以共享相同的数组列表吗？它是怎么做的？

```
import java.util.*;

public class ManagementCommittee{

    private ArrayList<SeniorMember> smlist;

    public ManagementCommittee(){
        smlist = new ArrayList<SeniorMember>();
    }

    public void addCommitteeMember(SeniorMember sm){
        smlist.add(sm);
    }

    public SeniorMember search(String smName){
        for (SeniorMember sm : smlist){
            if ((sm.getName()).equals(smName)){
                return sm;
            }
        }
        return null;  
    }

    public boolean removeCommitteeMember(String smName){
        SeniorMember tmp = search(smName);
        if (tmp != null)
            return smlist.remove(tmp);
        else
            return false;
    }

    public String toString(){
        for (SeniorMember sm : smlist){
            return "Name : " + sm.getName() + "\nAddress : " + sm.getAddress() + "\nFee : " + sm.getFee();
        }
    }
} 
```

我应该如何为社会类编写在这个委员会成员类中使用相同的数组列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:51:45.957

我会使用 ArrayList 设置您的 Society 课程。然后创建一个使用 Society 的委员会类，就像 Society 使用 ArrayList 一样。要获得委员会成员的列表，您需要从 Society 获得完整列表（从 ArrayList 获得）并只保留委员会成员。添加委员会成员意味着确保其在 Society 实例中，必要时添加它，然后获取它并将其标记为委员会成员。这里的工作有点忙，但很简单。此外，您可能希望 Society 和 Committee 类实现相同的接口，以便您的代码的其他部分不需要知道它们是在处理委员会成员、普通成员，还是完全与其他组打交道（但这确实实现了接口）。

如果这是一个非常大的社会，您可能希望维护一个单独的委员会成员列表，但它需要同步。例如，委员会实例需要在其 Society 接口中添加一个 Listener 以捕获所有删除，以防万一是委员会成员。我想你现在不想打扰这个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:18:44.963

超类中的静态数组列表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:36:27.550

如果我理解正确，您正在实现一个类来包装一个集合，并且您想隐藏其中一个集合处理方法。在这种情况下，它应该是这样的：

```
import java.util.ArrayList;

public class HelloWorld {
    static class Member {
    }

    static class SeniorMember extends Member {
    }

    static class Committee {
        private ArrayList<Member> _members = new ArrayList<Member>();

        public void add(Member member) {
            _members.add(member);
        }
    }

    static class ManagementCommittee extends Committee {
        public void add(Member member) {
            if (!(member instanceof SeniorMember)) {
                throw new Error("Only senior members here");
            }
            super.add(member);
        }
    }

    public static void main(String[] args) {
        Member member = new Member();
        SeniorMember senior = new SeniorMember();
        Committee committee = new Committee();
        ManagementCommittee management = new ManagementCommittee(); 

        committee.add(member);
        committee.add(senior);

        management.add(member);
        management.add(senior); // throws a run-time error 
    }
} 
```

请注意，如果您覆盖该方法`add`以接受 a`SpecialMember`您仍然会公开超类的`add(Member)`版本。

# mono - 在暂存盒中构建单声道时出错

> ID：10006501
> 
> 赞同：0
> 
> 时间：2012-04-04T07:13:24.160
> 
> 标签：mono, arm, embedded-linux

我试图在 Ubuntu 11.10 上的 Scratchbox 中为 arm 编译单声道。但是当我进行安装时，我收到一条错误消息。

```
[sbox-ARMEL:~] ./configure --enable-minimal=profiler,debug,logging,soft_debug --with-tls=--with-tls=__thread --with-monotouch=no --without-mcs-docs --disable-mono-debugger CFLAGS=-DARM_FPU_NONE --disable-mcs-build
[sbox-ARMEL:~] make
[sbox-ARMEL:~] make install 
```

我收到此错误：

```
make[2]: Entering directory `/home/johannes/mono-2.10.2/mono/mini'
CC  genmdesc-genmdesc.o
In file included from mini.h:39,
                 from genmdesc.c:9:
mini-unwind.h:106: error: expected declaration specifiers or '...' before 'mgreg_t'
mini-unwind.h:107: error: expected declaration specifiers or '...' before 'mgreg_t'
In file included from genmdesc.c:9:
mini.h:741: error: expected specifier-qualifier-list before 'mgreg_t'
In file included from genmdesc.c:9:
mini.h:1843: error: expected ')' before '*' token
mini.h:1848: error: expected declaration specifiers or '...' before 'mgreg_t'
mini.h:1923: error: expected ')' before '*' token
mini.h:1924: error: expected ')' before '*' token
mini.h:1925: error: expected ')' before '*' token
mini.h:1926: error: expected ')' before '*' token
mini.h:1928: error: expected ')' before '*' token
mini.h:1930: error: expected ')' before '*' token
mini.h:1931: error: expected ')' before '*' token
mini.h:1932: error: expected ')' before '*' token
mini.h:1933: error: expected ')' before '*' token
mini.h:2061: error: expected declaration specifiers or '...' before 'mgreg_t'
mini.h:2084: error: expected declaration specifiers or '...' before 'mgreg_t'
mini.h:2092: error: expected declaration specifiers or '...' before 'mgreg_t'
mini.h:2093: error: expected declaration specifiers or '...' before 'mgreg_t'
mini.h:2094: error: expected declaration specifiers or '...' before 'mgreg_t'
mini.h:2096: error: expected ')' before '*' token
mini.h:2100: error: expected ')' before '*' token
mini.h:2101: error: expected ')' before '*' token
mini.h:2105: error: expected declaration specifiers or '...' before 'mgreg_t'
mini.h:2138: error: expected ')' before '*' token
mini.h:2148: error: expected declaration specifiers or '...' before 'mgreg_t'
make[2]: *** [genmdesc-genmdesc.o] Error 1
make[2]: Leaving directory `/home/johannes/mono-2.10.2/mono/mini'
make[1]: *** [install-recursive] Error 1
make[1]: Leaving directory `/home/johannes/mono-2.10.2/mono'
make: *** [install-recursive] Error 1 
```

知道任何人这个错误或我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:51:50.397

从 Git 获取源文件，因为您的 mini.h 和 mini-unwind.h 文件与 Git 不匹配。 [https://github.com/mono/mono/blob/master/mono/mini/mini.h](https://github.com/mono/mono/blob/master/mono/mini/mini.h)

# objective-c - iPad 3 慢速截图

> ID：10006503
> 
> 赞同：9
> 
> 时间：2012-04-04T07:13:26.457
> 
> 标签：objective-c, ios, ipad, screenshot, retina-display

在我的应用程序中，我使用的是屏幕截图方法。在我的 iPad 2 上，执行此方法非常快（大约 130 毫秒）。但在新 iPad 上（当然是因为分辨率最高且 CPU 相同）它需要 700 毫秒！有没有办法优化我的方法？也许有一种方法可以直接使用显卡？

这是我的截图方法：

```
- (UIImage *)image {
CGSize imageSize = self.bounds.size;

if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) UIGraphicsBeginImageContextWithOptions(imageSize, NO, [UIScreen mainScreen].scale);
else UIGraphicsBeginImageContext(imageSize);

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSaveGState(context);
CGContextTranslateCTM(context, [self center].x, [self center].y);
CGContextConcatCTM(context, [self transform]);
CGContextTranslateCTM(context, -[self bounds].size.width * [[self layer] anchorPoint].x, -[self bounds].size.height * [[self layer] anchorPoint].y);
[[self layer] renderInContext:context];
CGContextRestoreGState(context);
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return image; 
```

}

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T02:21:48.740

我认为是 Flipboard 的开发人员在播客上谈论这个问题。这是 iPad 3 的一个真正问题，因为它们的像素增加了四倍。

他所做的是在后台提前截取屏幕截图，而不是在用户启动操作时 - 在他的情况下，当用户“翻转”页面时。

我不知道这是否会对您的情况有所帮助，但对于许多情况来说，这无疑是一种可行的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T22:50:30.587

这对于您的应用程序可能足够也可能不够，但一种选择是缩小屏幕截图，例如将 0.5 作为比例因子传递给**UIGraphicsBeginImageContextWithOptions**。快 4 倍，但代价是细节/分辨率的损失。

# c# - 如何在本机 C++ 程序中托管 WCF 服务

> ID：10006507
> 
> 赞同：3
> 
> 时间：2012-04-04T07:13:55.177
> 
> 标签：c#, c++, wcf, visual-studio-2010

我有一个用 C# 编写的 Windows Communication Foundation (WCF) 服务。我需要将它托管在我的 C++ MFC 本机应用程序中（没有 C++/CLI）。我不知道该怎么做。客户端也是一个 C# 应用程序。

谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T16:09:39.647

好的 - 如果您想要 WCF 服务，我强烈建议您在 .Net 中实现该服务并使用 IIS 发布它。

我敦促您*忘记*MFC。*特别是*如果您正在考虑使用 Windows Tablet 8。或 Apple iPad！

对于真正的便携式平板电脑客户端，我强烈建议您“考虑 HTML5”并查看 AppCelerator Titanium 或 PhoneGap 之类的框架：

*   [http://www.appcelerator.com](http://www.appcelerator.com)

*   [http://phonegap.com/](http://phonegap.com/)

最后，如果您希望您的 WCF 服务（或任何 .Net 功能）“与您的 C++ 程序的内部进行通信”，那么您有很多选择。包括“互操作”：声明外部引用并简单地对非托管（C++）代码进行子例程调用：

*   [http://msdn.microsoft.com/en-us/library/aa645736%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa645736%28v=vs.71%29.aspx)

*   [http://msdn.microsoft.com/en-us/library/aa645738%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa645738%28v=vs.71%29.aspx)

恕我直言...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T07:25:49.120

我认为这会帮助你：

[http://icoder.wordpress.com/2007/07/25/sumption-a-wcf-service-with-an-unmanaged-c-client-with-credential-passing/](http://icoder.wordpress.com/2007/07/25/consuming-a-wcf-service-with-an-unmanaged-c-client-with-credential-passing/)

[如何将 C++ COM 连接到 WCF 服务](https://stackoverflow.com/questions/3169672/how-to-connect-a-c-com-to-a-wcf-service)

# java - Team Foundation Server 构建的限制

> ID：10006511
> 
> 赞同：0
> 
> 时间：2012-04-04T07:14:03.133
> 
> 标签：java, coding-style, tfs

TFS 在异构开发环境中的局限性是什么？

我对 Jenkins 没有什么经验，并且喜欢运行所有这些不同类型的工作的可能性，比如 Ant、Maven、CMD、Powershell ......

*   使用团队基础服务器构建 Java 项目时是否可以检查编码约定？我不知道如何使用 TFS 构建 Java。我看到[Microsoft](http://channel9.msdn.com/Blogs/Lori/Heterogene-Entwicklungsumgebungen-mit-Team-Foundation-Server-2010)的一个演示文稿，那个人提到了 Maven 和 Ant Tasks。所以我认为它可以通过 Maven 中的 checkstyle 插件来完成。

*   是否可以运行 CMD 脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:48:14.723

提到的工具可能是[Team Foundation Server Build Extensions Power Tool December 2011](http://visualstudiogallery.msdn.microsoft.com/2d7c8577-54b8-47ce-82a5-8649f579dcb6/)。

这些添加了从 Team Build 触发标准 Java 构建脚本的能力。

Java 构建过程只是调用 maven 或 ant，因此在这些构建工具中检查代码质量的任何任务都应该在 Team Build 中正常工作。Microsoft 的团队选择不为 Java 人员制作复杂的构建模板，因为他们非常习惯于自己的构建工具。因此，默认情况下执行 Java 构建程序的构建过程模板非常薄。一切都是通过标准的 Java 工具完成的。Team Build 只是调用这些并收集输出。

至于在构建过程中执行命令脚本和其他可执行文件，您可以通过多种方式执行此操作。正确的方法取决于你想要完成的事情。

*   如果您想在构建二进制文件的过程中执行某些操作，可以使用[msbuild exec 任务](http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx)或 ant/maven 中的等效任务。
*   如果您想在构建所有二进制文件后执行某些操作（例如触发部署），您可以使用[构建过程模板中的构建活动来执行流程](http://msdn.microsoft.com/en-us/library/gg265783.aspx#Activity_InvokeProcess)
*   如果您想在构建代理上构建二进制文件之前执行某些操作，您可以使用相同的活动，但您应该将其放置在工作流中的不同位置。

[Visual Studio 实验室管理构建模板](http://msdn.microsoft.com/en-us/library/ff934561.aspx)和[Build Deploy Test 构建模板](http://blogs.msdn.com/b/lab_management/archive/2011/02/15/running-build-deploy-test-workflow-on-physical-environments.aspx)可作为一个很好的起点来了解有关在构建过程中调用过程的可能性的更多信息。

正如其他答案中提到的，[SVNBridge](http://svnbridge.codeplex.com/)和可能的[Git2tfs](http://git-tfs.com/)可能会为 Java 团队成员提供访问 TFS 中源的替代方法。然后，他们可以使用现有的 ant/maven 任务来获取源代码并构建代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:24:00.367

你很可能会得到很多关于 TFS 的使用以及它是否适合的个人意见，尤其是对于 JAVA 开发。也就是说，为了插入 ANT/Maven/Jenkins，您可以安装[SVNBridge](http://svnbridge.codeplex.com/)以提供与 SVN 相同的功能。

这并不意味着 TFS 没有插件来支持这些工具，我刚刚发现 SVN 相关的插件更易于访问。

# java - java：获取html内容

> ID：10006527
> 
> 赞同：-1
> 
> 时间：2012-04-04T07:15:30.710
> 
> 标签：java, javascript, html, browser

我有一个包含一些 java 脚本标签的 HTML 文件。当我在某些浏览器（例如 IE）中运行此文件时，某些内容会从其源缓存并显示在浏览器上（例如某些城市的天气）。如何运行此`html`文件并获取之前在 Web 浏览器上显示的网页内容？我不想在我的应用程序上显示内容；我想解析返回的数据并提取一些特殊的内容（例如提取每个城市的天气）。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:28:14.673

您正在尝试做的事情称为 html 抓取。

您最好的选择是以库的形式获得帮助，因为这是一项常见且复杂的任务。

请参阅此问题：[HTML 抓取的选项？](https://stackoverflow.com/questions/2861/options-for-html-scraping)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:30:46.527

硒是一个不错的选择。它支持 HtmlUnit、Firefox、Chrome 以及其他浏览器。

链接：[http ://seleniumhq.org/](http://seleniumhq.org/)

# javascript - 如何更改我的 highcharts 饼图的颜色？

> ID：10006529
> 
> 赞同：50
> 
> 时间：2012-04-04T07:15:34.517
> 
> 标签：javascript, highcharts, highstock

我正在使用 highcharts 制作饼图，但在为我的图表加载自定义颜色集时遇到问题。

这是我的代码：

```
 <script type="text/javascript">
     $(function () {
     Highcharts.setOptions({
     colors: ['#50B432', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263',      '#6AF9C4']
    });
    return new Highcharts.Chart({

        chart: {
            renderTo: 'trailpiechart',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            backgroundColor: "#f8f8f8",
            margin: [20, 20, 20, 20]
        },

        credits: {
            enabled: false
        },

        title: {
            text: caption
        },
        tooltip: {
            formatter: function () {
                return this.y + ' links';
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: false
                },
                showInLegend: true
            }
        },
        legend: {
            layout: 'vertical',
            floating: false,
            borderRadius: 0,
            borderWidth: 0
        },
        series: [{
            type: 'pie',
            name: 'Browser share',
            data: data
        }]
    });
    });
</script> 
```

我的饼图使用此代码，但它仅使用默认颜色托盘。

如何指定自定义颜色集？

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-04-09T14:30:05.550

```
Highcharts.setOptions({
 colors: ['#50B432', '#ED561B', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4']
}); 
```

看下面的例子 [http://jsfiddle.net/8QufV/](http://jsfiddle.net/8QufV/)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-05-01T00:00:43.337

对于那些喜欢在配置中初始化颜色的人，您可以简单地将颜色放在配置对象的 plotOptions 部分，如下所示：

```
...,
plotOptions: {
  pie: {
   colors: [
     '#50B432', 
     '#ED561B', 
     '#DDDF00', 
     '#24CBE5', 
     '#64E572', 
     '#FF9655', 
     '#FFF263', 
     '#6AF9C4'
   ],
   allowPointSelect: true,
   cursor: 'pointer',
   dataLabels: {
     enabled: false
   },
   showInLegend: true
 }
},
... 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-04T13:35:22.653

我认为您需要做的是使用主题而不是 setOptions 设置颜色，如下所示：

```
Highcharts.theme = {colors: ['#50B432', '#ED561B', '#DDDF00', '#24CBE5', 
                             '#64E572', '#FF9655', '#FFF263', '#6AF9C4']}); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-09-26T19:28:05.663

回答@Loko Web Design 的问题[https://stackoverflow.com/a/38794379/7475250](https://stackoverflow.com/a/38794379/7475250)

> 是否有网页说明每种“颜色”对应的内容？这里的所有答案都显示如下：
> 
> ```
> colors: ['#333', '#CB2326', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#CB2326', '#6AF9C4'] 
> ```
> 
> 但是#333、#CB2326 等实际上发生了什么变化？显然，我可以更改它们并查看发生了什么变化，但如果能在某处获得此参考资料，那就太好了。

颜色文档可[在此处](http://api.highcharts.com/highcharts/colors "这里")获得。尽管有帮助，但它们并未描述更改特定颜色的实际作用。下面是我最好的描述。

colors 属性为 Highcharts 提供了您希望图表循环显示的颜色。例如，如果您有以下颜色道具。

```
colors: ['blue', 'green'] 
```

你的馅饼片会在蓝色和绿色之间交替。将蓝色变为红色，您的颜色将在红色和绿色之间交替。用下面的[小提琴测试它](http://jsfiddle.net/bjax/ab0mnq0f/2/)

展开颜色列表会增加重复之前的颜色数量。

```
colors: ['blue', 'green', 'yellow'] 
```

如果数据集中有超过 4 个切片，将重复颜色。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-30T18:12:01.043

```
Highcharts.setOptions({
 colors: ['#333', '#CB2326', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#CB2326',      '#6AF9C4']
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-05T16:59:21.637

是否有网页说明每种“颜色”对应的内容？这里的所有答案都显示如下：

```
colors: ['#333', '#CB2326', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#CB2326', '#6AF9C4'] 
```

但是#333、#CB2326 等实际上发生了什么变化？显然，我可以更改它们并查看发生了什么变化，但如果能在某处获得此参考资料，那就太好了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-25T11:23:55.060

我有同样的问题。在 highcharts.css 中有一个名为“默认颜色”的部分。删除此部分后，我可以使用自定义颜色。无论如何，如果您使用 v5.0.4 或更高版本，我想您不需要 highcharts.css。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-02-10T12:51:06.937

Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0.5).get('rgba')]

在高图表中，我们拥有内置颜色。所以你需要改变颜色[0]或[1]的路径............[6]

# android - 在 android 上推送通知：IBM MQTT

> ID：10006533
> 
> 赞同：2
> 
> 时间：2012-04-04T07:16:03.053
> 
> 标签：android, push, mqtt

我对 android 环境非常陌生，必须使用[http://www-01.ibm.com/support/docview.wss](http://www-01.ibm.com/support/docview.wss)上提供的 (wmqtt.jar) 示例应用程序设置客户端？

我只知道 hello world 程序。

请告诉我如何将它逐步集成到我的简单 android 应用程序中。

谢谢并恭祝安康。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:30:00.913

有一个很好的例子并贯穿在[http://dalelane.co.uk/blog/?p=1599](http://dalelane.co.uk/blog/?p=1599)

我还要指出，使用最近发布的开源 Java 客户端可能会更好。您可以在[http://git.eclipse.org/c/paho/org.eclipse.paho.mqtt.java.git/](http://git.eclipse.org/c/paho/org.eclipse.paho.mqtt.java.git/)找到它- 您应该会发现许可证比 wmqtt.jar 友好得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T11:18:53.763

正如 Roger 所说，最好/最新的 Java 客户端代码是 Eclipse Paho 项目提供的 - [http://git.eclipse.org/c/paho/org.eclipse.paho.mqtt.java.git/](http://git.eclipse.org/c/paho/org.eclipse.paho.mqtt.java.git/)

IA92 代码和 wmqtt.jar 具有困难的许可证，并且不支持某些最新功能，例如身份验证。

此外，您会在 mqtt.org wiki [http://mqtt.org/wiki/doku.php/mqtt_on_the_android_platform上找到很多有用的链接和信息](http://mqtt.org/wiki/doku.php/mqtt_on_the_android_platform)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T18:33:55.173

[http://mosquitto.org/files/examples/android-mqtt-example.zip](http://mosquitto.org/files/examples/android-mqtt-example.zip)上提供了非常好的示例代码。一旦了解了它的工作原理，您就可以开始编写自己的代码。

# python - Python (Windows XP) - wx.FileDialog 在 Destroy() 之后部分保留

> ID：10006537
> 
> 赞同：0
> 
> 时间：2012-04-04T07:16:11.853
> 
> 标签：python, wxpython, refresh, destroy, filedialog

我是 Python 的新手（实际上是 PC 开发的新手），我想知道我应该如何正确解决在我正在编写的 Windows 应用程序中使用 FileDialog 时遇到的问题......

到目前为止，这是我的代码的相关部分......

```
def SelectLogs(self, event):

    dir = os.getcwd()
    paths = []

    open_dlg = wx.FileDialog(self, message='Select log file',
        defaultDir=dir, style=wx.OPEN | wx.CHANGE_DIR | wx.MULTIPLE)

    self.splitter.Refresh(True)

    if open_dlg.ShowModal() == wx.ID_OK:
        paths = open_dlg.GetPaths()
        open_dlg.Destroy()

        self.splitter.Refresh()

        self.RetrieveLogData(paths)

    def RetrieveLogData(self, paths):

        count = 0
        loglines = []

        self.tc2.WriteText('Loading selected logs...')

        paths.sort()

        for log in paths:
            read_data = []
            f = open(log, 'r')

            self.tc2.WriteText('\r\n    ' + log)

            read_data = f.readlines()
            f.close()

            count = count + 1

            for line in read_data:
                loglines.append(line)
                self.tc1.WriteText(line)

        self.tc2.WriteText('\r\nCompleted loading ' + str(count) + ' log(s)') 
```

我的问题是，即使我调用 open_dlg.Destroy() 和 self.splitter.Refresh() 我仍然有 FileDialog 的残余显示在我的 wx.TextCtrl (tc2) 对象的下部（tc1 位于上半部分下半部分的分离器和 tc2）。

一旦文件完全加载并且内容显示在 tc1 中，然后 tc2 就会刷新并按我的预期显示。

我尝试在 tc1 和 tc2 上而不是在拆分器上调用刷新方法，但这似乎没有任何效果。

欢迎任何有用的建议。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:28:11.200

您不需要任何电话`Refresh()`，这些电话将不起作用。您的 GUI 冻结的原因是不同的。您的回调函数运行时间过长并阻塞了您的 GUI 线程。

在不创建新线程的情况下，您永远不应该在回调函数中运行任何可能花费超过几毫秒的任务。

您应该为长时间运行的任务创建一个新线程。我推荐使用`wx.lib.delayedresult`and`wx.CallAfter`因为这些是最方便的。SO上有很多关于这个主题的问题/答案。例如：[如何在 wxPython GUI 应用程序中实现线程](https://stackoverflow.com/questions/7666368/how-to-implement-a-thread-in-a-wxpython-gui-application/7668707#7668707)

# php - 从png图像中提取像素颜色

> ID：10006538
> 
> 赞同：0
> 
> 时间：2012-04-04T07:16:20.400
> 
> 标签：php, image, png

我需要从 png 图像中提取每个像素颜色并将其存储在数据库表中；该表有以下列：`id`, `x`, `y`, `color`.

我做到了，但我需要一种更快的方法来做到这一点。

我的代码如下：

```
<?php

session_start();

?>
<meta http-equiv="refresh" content="6000" >
<?php

if(isset($_SESSION['inserari']))print "inserari: ".$_SESSION['inserari'];
$_SESSION['inserari']=0;
require_once("../data-base-connection.php");
$im = ImageCreateFromPng("http://www.medievalbattlefield.com/harta-mod-1/x.png");

$maxo=4001;
$maxv=2235;
$result=mysql_query("
select * 
from `map_4001_2235` 
order by `id` desc
limit 1
");
$n=mysql_num_rows($result);
$id=0;
$cv=0;
$co=0;

if($n==1)
{
  while($row=mysql_fetch_array($result))
  {
    print " id ".$id=$row['id'];
    print " cx ".$cv=$row['x'];
    print " cy ".$co=$row['y'];
  }
  $co++;
  if($co==$maxo+1)$co=0;
}

for($a=$cv;$a<=$maxv;$a++)
{
  for($b=$co;$b<=$maxo;$b++)
  {

    //print "$a $b";
    //if(($b==1000)||($b==2000)||($b==3000)||($b==4000))print " indicator: ".$b;
    $id++;
    $_SESSION['inserari']++;
    $rgb = ImageColorAt($im, $b, $a);
    $c=dechex($rgb);

    mysql_query("
INSERT INTO `map_4001_2235` (
`id` ,
`x` ,
`y`,
`color`
)
VALUES (
'$id' ,  '$a',  '$b', '$c'
);
");
  }
  $co=0;
}

mysql_close($connection);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:21:11.793

不要对每个像素进行插入，而是将它们存储在一个数组中并使用以下形式的大规模插入

```
INSERT INTO table VALUES (1,1,1),(2,2,2) 
```

# php - 带有文件数组的文件上传php

> ID：10006540
> 
> 赞同：0
> 
> 时间：2012-04-04T07:16:29.037
> 
> 标签：php

我尝试将文件上传到我的服务器也到我的数据库。

但是，我无法上传它们。

我可以用下面的代码看到我的两个文件，

```
echo $_FILES['file']['name'][0];
echo $_FILES['file']['name'][1];

$fileName = $_FILES['file']['name'][0];
$add = "img01.imgsinemalar.com/images/haber_anasayfa/" . $fileName;

if (move_uploaded_file($_FILES[file_up][tmp_name], $add)) {
    NCore::db('NEWS')->insertAsArray(array('CONTENT' => $_POST['TvSpotdesc'], 'ADD_DATE' => $date, 'TITLE' => $_POST['newsTitle'],IMAGE_MAIN => $add))->execute();
    echo "Haber başarıyla gönderildi.";
} else {
    echo "Failed to upload file Contact Site admin to fix the problem";
}else {
    echo $msg;
} 
```

但是上面的代码并没有上传我的文件，它直接进入了else语句，为什么？

> 上传文件失败联系站点管理员解决问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:18:54.733

您的代码应该从这一行输出两条通知和一条警告：

```
if (move_uploaded_file($_FILES[file_up][tmp_name], $add)) { 
```

这两个通知将是因为您没有引用`file_up`，`tmp_name`并且通知您原因的警告`move_uploaded_file`失败，[如记录](http://php.net/manual/en/function.move-uploaded-file.php)的那样。您应该查看日志以亲自查看这些（没有看到任何错误消息的开发并不有趣）。

它失败的*原因*是您无法将文件移动到远程服务器 -`$add`不是本地路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:22:10.367

重命名`$_FILES[file_up][tmp_name]`为`$_FILES['file']['tmp_name']`

`file_up`根据您粘贴的代码，没有这样的变量。此外，文件只能存储在同一台服务器上。所以去相对路径`/home/www/myapp/images/`而不是服务器名称。

# spring - 事务提交后spring事务管理记录不插入db表

> ID：10006542
> 
> 赞同：0
> 
> 时间：2012-04-04T07:16:32.670
> 
> 标签：spring

我正在使用 Hibernate Transaction Manager 使用 Spring 事务管理。我在一个类上配置了声明性事务。事务开始并提交。但是在提交时，它不会向表中插入任何记录。无法看到任何插入表日志消息。事务是否使用其他一些休眠会话对象。如何使它使用当前正在使用的会话对象。

# php - PHP中的正则表达式帮助

> ID：10006546
> 
> 赞同：2
> 
> 时间：2012-04-04T07:16:43.220
> 
> 标签：php, regex, content-management-system

我有一个文本块，我需要在其中找到一些文本，例如：{slider:1} {video-alt:10}

我有这段代码

```
$regex = '/{[ ]*(slider)|(slider-alt)|(video)[ ]*:[0-9]+[ ]*}/';
        $matches = array();
        preg_match_all( $regex, $row->content, $matches ); 
```

但是返回的数组全乱了...

数组输出：

```
Array ( [0] => {slider [1] => {slider [2] => video:2} )
Array ( [0] => slider [1] => slider [2] => )
Array ( [0] => [1] => [2] => )
Array ( [0] => [1] => [2] => video ) 
```

对于输入：

```
{slider:6}
{slider-alt:2}
{video:2} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:20:15.237

你的正则表达式很乱。

```
$regex = '/{ *(slider|slider-alt|video) *:\d+ *}/';
$matches = array();
preg_match_all( $regex, $row->content, $matches ); 
```

# android - 在显示之前计算视图度量

> ID：10006548
> 
> 赞同：3
> 
> 时间：2012-04-04T07:16:55.280
> 
> 标签：android, view, size, measure

我正在尝试尽可能多地动态地将视图添加到 LinearLayout（取决于屏幕宽度）。

我在 LinearLayout 显示在屏幕上之前执行此操作。

我的线性布局：

```
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center" 
    android:background="#666"/> 
```

我要在 LinearLayout 中显示的视图：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:paddingLeft="10dp" 
    android:paddingRight="10dp"
    android:background="#999">
    <ImageView
        android:layout_width="48dp"
        android:layout_height="48dp"
        android:src="@drawable/no_photo"/>
</FrameLayout> 
```

我在布局中添加视图：

```
int allItems = 50;
int currentItem = 0;
while(currentItem < allItems)
{
    FrameLayout view = (FrameLayout) inflater.inflate(R.layout.fl, null);

    linearLayout.addView(view);

    if (linearLayout.getMeasuredWidth() >= this.getWidth())
    {
        linearLayout.removeView(view);
        break;
    }
} 
```

但 linearLayout.getMeasuredWidth() 和 this.getWidth() 为 0；

我知道，我必须使用 View.measure 方法在它变得可见之前计算视图大小，但我不知道它在哪里以及如何使用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T07:27:20.493

编辑您的代码如下：

```
Display display = getWindowManager().getDefaultDisplay();
int maxWidth = display.getWidth();
int widthSoFar=0;

int allItems = 50;
int currentItem = 0;

while(currentItem < allItems) {
  FrameLayout view = (FrameLayout) inflater.inflate(R.layout.fl, null);

  linearLayout.addView(view);

  view .measure(0, 0);
  widthSoFar = widthSoFar + view.getMeasuredWidth();

  if (widthSoFar >= maxWidth) {
    linearLayout.removeView(view);
    break;
  }
} 
```

希望这可以帮助你

# java - 在没有root的情况下阻止主页按钮

> ID：10006551
> 
> 赞同：1
> 
> 时间：2012-04-04T07:17:23.220
> 
> 标签：java, android, launcher

[http://www.kidzoneapp.com/uses.html](http://www.kidzoneapp.com/uses.html)

在这个应用程序中，他们以某种方式有能力保护用户的主页按钮（按下后没有主页对话框）。我知道这是不可能的，但他们是怎么做到的？

清单，没有关于启动器的消息。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="3" android:versionName="1.2" package="com.deemo.kidzone.main"
  xmlns:android="http://schemas.android.com/apk/res/android">
    <uses-sdk android:minSdkVersion="3" />
    <uses-permission android:name="com.android.vending.CHECK_LICENSE" />
    <uses-permission android:name="android.permission.CALL_PHONE" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.SET_WALLPAPER" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.READ_LOGS" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
    <uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES" />
    <uses-permission android:name="android.permission.RESTART_PACKAGES" />
    <uses-permission android:name="android.permission.SET_PREFERRED_APPLICATIONS" />
    <application android:label="@string/home_title" android:icon="@drawable/ic_launcher_home_48x48" android:persistent="true">
        <activity android:theme="@android:style/Theme.NoTitleBar" android:name="com.deemo.kidzone.main.Home" android:enabled="false" android:stateNotNeeded="true" android:excludeFromRecents="true" android:launchMode="singleTask" android:configChanges="keyboardHidden|orientation">
            <meta-data android:name="android.dock_home" android:value="true" />
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.HOME" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:theme="@android:style/Theme.NoTitleBar" android:name="com.deemo.kidzone.main.Preferences" android:excludeFromRecents="true" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="IncomingCallProtectionActivity" android:name=".IncomingCallProtectionActivity" android:excludeFromRecents="true" android:launchMode="singleTask" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="PreferencesProtectionActivity" android:name=".PreferencesProtectionActivity" android:excludeFromRecents="true" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="ExitProtectionActivity" android:name=".ExitProtectionActivity" android:excludeFromRecents="true" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="Fake" android:name=".Fake" />
        <activity android:theme="@android:style/Widget.Holo.ScrollView" android:label="CheckingApplicationDialog" android:name=".CheckingApplicationDialog" android:excludeFromRecents="true" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:name=".wizard.WelcomeWizardActivity" android:excludeFromRecents="true" android:screenOrientation="portrait">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="StepPasswordActivity" android:name=".wizard.StepPasswordActivity" android:excludeFromRecents="true" android:screenOrientation="portrait" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="StepAllowedApplicationsActivity" android:name=".wizard.StepAllowedApplicationsActivity" android:excludeFromRecents="true" android:screenOrientation="portrait" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="StepPhoneAvailabilityActivity" android:name=".wizard.StepPhoneAvailabilityActivity" android:excludeFromRecents="true" android:screenOrientation="portrait" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="StepLauncherActivity" android:name=".wizard.StepLauncherActivity" android:excludeFromRecents="true" android:screenOrientation="portrait" />
        <activity android:label="StepActivity" android:name=".wizard.StepActivity" android:excludeFromRecents="true" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="ChangePasswordActivity" android:name=".ChangePasswordActivity" android:excludeFromRecents="true" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="ClearDefaultLauncherActivity" android:name=".wizard.ClearDefaultLauncherActivity" android:excludeFromRecents="true" android:screenOrientation="portrait" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="Exit" android:name=".Exit" android:excludeFromRecents="true" />
        <activity android:theme="@android:style/Theme.NoTitleBar" android:label="AllowedApplicationList2" android:name=".AllowedApplicationList2" android:excludeFromRecents="true" />
        <receiver android:name=".PhoneCallBroadcastReceiver" android:enabled="false">
            <intent-filter android:priority="1000">
                <action android:name="android.intent.action.PHONE_STATE" />
            </intent-filter>
        </receiver>
        <receiver android:name=".OutgoingCallBroadcastReceiver" android:enabled="false">
            <intent-filter android:priority="0">
                <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
            </intent-filter>
        </receiver>
        <receiver android:name=".ApplicationBlockBroadcastReceiver" android:enabled="false">
            <intent-filter android:priority="100">
                <action android:name="com.deemo.kidzone.main.BLOCK" />
            </intent-filter>
        </receiver>
        <service android:label="LogcatService" android:name=".LogcatService" />
        <service android:label="LogcatService2" android:name=".LogcatService2" android:process=":remote" />
    </application>
</manifest> 
```

代码中还有一些有趣的行

```
 public static void disableHome(Context paramContext, PackageManager paramPackageManager)
  {
    paramPackageManager.setComponentEnabledSetting(new ComponentName(paramContext, "com.deemo.kidzone.main.Home"), 2, 0);
  }

  public static void enableHome(Context paramContext, PackageManager paramPackageManager)
  {
    paramPackageManager.setComponentEnabledSetting(new ComponentName(paramContext, "com.deemo.kidzone.main.Home"), 1, 1);
  }

 public void onItemClick(AdapterView paramAdapterView, View paramView, int paramInt, long paramLong)
    {
      ApplicationInfo localApplicationInfo = (ApplicationInfo)paramAdapterView.getItemAtPosition(paramInt);
      if (TextUtils.equals(localApplicationInfo.title, Home.this.getString(2131099745)))
      {
        Intent localIntent = new Intent(Home.this, PreferencesProtectionActivity.class);
        Home.this.startActivityForResult(localIntent, 17);
      }
      while (true)
      {
        return;
        if (TextUtils.equals(localApplicationInfo.title, Home.this.getString(2131099746)))
        {
          Home.this.startActivityForResult(new Intent(Home.this, ExitProtectionActivity.class), 16);
          continue;
        }
        Home.this.startActivity(localApplicationInfo.intent);
        Home.lastRunningIntent = localApplicationInfo.intent;
        Logcat.homeLaunched = false;
      }
    }
  } 
```

那么他们是如何在没有 root 的情况下阻止主页按钮的，我该怎么做呢？ [http://dl.dropbox.com/u/1928109/kzalvl12.apk](http://dl.dropbox.com/u/1928109/kzalvl12.apk) 这里是应用程序，我想如果没有市场许可它就无法工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:30:44.740

将以下内容添加到您的活动中，您也可以发挥作用。无需root电话:)

```
@Override
public void onAttachedToWindow() {  
    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);     
    super.onAttachedToWindow();  
} 
```

# ruby - 安装 jRuby gem 后找不到命令

> ID：10006561
> 
> 赞同：1
> 
> 时间：2012-04-04T07:18:07.090
> 
> 标签：ruby, gem, jruby

安装自定义 jRuby gem 后尝试执行命令时遇到问题。在我创建的 gem 中，Gemfile 如下所示：

```
source "http://rubygems.org"

gem 'archive-tar-minitar', '~> 0.5.2'
gem 'fastercsv', '~> 1.5.4'
gem 'rake', '~> 0.9.2.2'
gem 'liquid', '>= 2.3.0'
gem 'net-sftp', '>=2.0.5'
gem 'net-ssh', '>=2.3.0'
gem 'jruby-openssl', '>=0.7.5'
gem 'crypt', '~>1.1.4'
gem 'nokogiri', '1.5.2' 
```

和 .gemspec 文件：

```
$:.push File.expand_path("../lib", __FILE__)
require "example/version"
require "rake"

Gem::Specification.new do |s|
  s.name              = "example"
  s.version           = Example::VERSION
  s.platform          = 'java'
  s.date              = '2012-03-30'
  s.executables = ["load_csv_to_table"]

  s.rdoc_options      = ["--charset=UTF-8"]

  s.add_dependency('bundler', '~> 1.0')
  s.add_dependency('archive-tar-minitar', '~> 0.5.2')
  s.add_dependency('liquid', '>= 2.3.0')
  s.add_dependency('net-sftp', '>=2.0.5')
  s.add_dependency('net-ssh', '>=2.3.0')
  s.add_dependency('jruby-openssl', '>=0.7.5')
  s.add_dependency('crypt', '~>1.1.4')
  s.add_dependency('fastercsv', '~> 1.5.4')
  s.add_dependency('json', '~>1.6.6')
  s.add_dependency('nokogiri', '1.5.2')

  s.files = FileList['lib/**/*.rb', 'bin/*', 'vendor/java/**/*', 'resources/**/*'].to_a
  s.require_path    = ['lib']
  s.required_rubygems_version = ">= 1.3.4"
end 
```

在 bin 文件夹中，我创建了一个名为“example”的命令：

```
#!/usr/bin/env jruby

$:.unshift(File.dirname(__FILE__) + '/../lib') unless $:.include?(File.dirname(__FILE__) + '/../lib')

require 'example'
require 'pp'

pp "Example!!" 
```

我安装了在本地系统中创建的 gem，没有错误（jruby -S gem install example-0.0.1-java.gem），但是当我尝试启动命令“example”时，似乎找不到该命令

# c# - 如何从批处理文件执行 C# 控制台应用程序

> ID：10006563
> 
> 赞同：0
> 
> 时间：2012-04-04T07:18:33.080
> 
> 标签：c#, visual-studio-2010, batch-file, console-application

我有应该在启动任务中执行的示例控制台应用程序，我想通过批处理文件执行控制台应用程序，请我知道执行它的正确语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T07:21:01.143

```
"C:\Users\mahesh\Documents\Visual Studio Projects\Foo\bin\Debug\Foo.exe"
Foo
Foo.exe
"\Some other folder\foo" 
```

如何执行它都是可能的选项，具体取决于程序所在的位置以及您当前的工作目录是什么......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:20:43.220

只需将控制台应用程序 .exe 文件的完整路径放在批处理文件中即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:27:38.130

在我的项目中。

文件夹就像

```
D:\Run
│  main.bat  >> your batch file
│  
└─Test
    │  
    │  
    └─your application 
```

bat文件的内容就像

```
cd /d %~dp0test\
Checker.exe>check.log 
```

第一行

`cd /d %~dp0test\`

是将运行时目录替换为应用程序文件的完整路径。

```
>check.log 
```

是输出日志文件的选项。

# browser - 在 Inno Setup 中嵌入 Internet Explorer 窗口（网络浏览器控件）

> ID：10006565
> 
> 赞同：2
> 
> 时间：2012-04-04T07:18:36.187
> 
> 标签：browser, dll, installation, embed, inno-setup

我想在 Inno Setup 安装程序页面中显示一些网页*，*如何嵌入？我正在考虑使用 cwebpage.dll （[http://www.codeproject.com/Articles/3365/Embed-an-HTML-control-in-your-own-window-using-pla](http://www.codeproject.com/Articles/3365/Embed-an-HTML-control-in-your-own-window-using-pla)），但我不知道如何通过 Inno Setup 脚本使用这个 dll。如果有其他方法，请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:49:21.733

不能直接在 InnoSetup 中使用，您只能使用[`Classes Reference`](http://www.jrsoftware.org/ishelp/topic_scriptclasses.htm). 但是，您可以使用库中的自定义表单嵌入您的设置，例如[`this way`](https://stackoverflow.com/q/8586403/960757).

我已经使用示例 InnoSetup 脚本创建了此类库的示例。这个项目是[`hosted here`](http://code.google.com/p/inno-web-browser/source/browse/#svn/trunk)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:21:25.043

"shellexec" 一个 .html 文件或网络链接。这里的所有都是它的 ：）

# java - 装饰器模式与调用超级方法相同吗？

> ID：10006581
> 
> 赞同：2
> 
> 时间：2012-04-04T07:19:29.227
> 
> 标签：java, design-patterns

这是装饰器模式的一个例子。

```
public class Computer {
public String Description(){
    return "Computer";
}
}

public abstract class Decorator extends Computer{
public abstract String description();
}

public class Monitor extends Decorator{

Computer computer;
public Monitor(Computer c){
    computer = c;
}

public String description() {
    return computer.Description() + " and Monitor";
}
}

public class main {
public static void main(String args[]){
    Computer c = new Computer();
    Monitor m = new Monitor(c);
    System.out.println(m.description());
}
} 
```

这和调用超类的超方法一样吗？？就像从计算机继承的监视器然后在监视器类的Description方法内调用计算机类中的super.Description（）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T07:43:30.357

通过调用 super 方法，您需要为每种可能性创建一个新的子类。例如，如果您想要一台带显示器和鼠标的计算机怎么办？您可以创建一个继承的子类`Monitor`。现在假设您想要一台没有显示器和鼠标的计算机。您还需要另一个子类，它继承`Computer`. 只有两个设备，您已经需要三个子类（`Monitor`和`Mouse`）`MonitorAndMouse`。如果您的计算机也可以配备打印机、扫描仪和一组扬声器怎么办？

使用装饰器模式，您可以用新设备“装饰”计算机。就像您对 所做的一样`Monitor`，您可以为每个设备制作不同的装饰器。要创建具有所有设备的计算机，您现在可以执行以下操作

```
Computer = new Speakers(
    new Scanner(
        new Printer(
            new Mouse(
                new Monitor(
                    new Computer()
                )
            )
        )
    )
);
computer.description(); 
```

现在`description()`返回`Computer and Monitor and Mouse and Printer and Scanner and Speakers`。您可以将设备与计算机混合搭配，而无需为每个组合创建新的子类。

**评论：**

> 在我的示例中如何删除装饰器类然后监视器没有从计算机类继承，而是我只是将计算机类的实例放在监视器类中然后做同样的事情。

这样，您只能深入一层，您只能将一个设备添加到计算机。本质上，它是一个不可扩展的装饰器。装饰器模式是一种[支持组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)的方式，因为在添加多个设备时会获得巨大的可能性。使用您的解决方案，您倾向于组合而不是继承，方法是不创建 the 的子类，`Computer`而是`Monitor`使用`Computer`. 它几乎是一个装饰器模式，只是你退了一步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:16:55.850

简而言之，回答您的问题：不，不一样。

Decorator 使用现有的 Object 来修改它的行为，但对于外部世界来说，它看起来好像它装饰的类的一个类型。

为了在您的示例中解释这一点，您有一台计算机，并且您的计算机具有一些属性。在您的代码中的某处，您正在创建这台计算机的一个实例。您正在用所有需要的数据填充它。

现在装饰器就位了。您需要一个类来装饰您刚刚创建的计算机的这个实例！正是这个。

我会拿你的电脑并添加一个方法来关闭和打开它

```
public class Computer {
    private boolean isOn = true;
    private String description = "Computer";        

    public vod turnOn(){
        this.isOn=true;
    }

    public void turnOff(){
        this.isOn = false;
    }

    public void setDescription(String description){
        this.description = description;
    }

    public String Description(){
        return this.description;
    }
} 
```

现在我正在创建一个装饰器，您无法在其中关闭计算机。

```
public class ComputerDecorator1 extends Computer {
    private Computer computer;

    public ComputerDecorator1(Computer computer){
       this.computer = computer;
    }

    public vod turnOn(){
        this.computer.turnOn();
    }

    public void turnOff(){
        System.out.println("You cannot turn me off!!!!");
    }

    public void setDescription(String description){
        this.computer.setDescrition(descritption);
    }

    public String Description(){
        return this.computer.Description();
    }
} 
```

如您所见，您必须在构造函数中给他一个 Computer 实例。这是我们正在装饰的电脑。每个方法调用都将传递给这个类。通常，您必须覆盖所有方法并将它们传递给装饰对象。在这种情况下，计算机。

您可以使用它来修改对象的行为，而无需创建它的新类。好处是，当您从其他地方获取计算机实例时，您可以添加此过滤器，这样您的程序的其余部分就无法将其关闭。

这是您在程序中使用装饰器的方式：

```
public void getMyComputerAndTurnItOff(){
    Computer myComputer = getMyComputer();
    myComputer.turnOff();
}

public Computer getMyComputer(){
    //Here you will load a Computer from an other class
    Computer computer = this.otherClass.loadComputerFromDB();

    //Now we could return it, but what if you shouldn't be able to turn it off?
    //easy add our decorator
    return new ComputerDecorator1(computer);
} 
```

如果要使用装饰器，则需要修改行为，否则无用！在您的计算机和监视器示例中，从逻辑角度来看，监视器不能成为计算机的装饰器。对我来说，这是两个不同的对象。

我希望我能让装饰器更清楚一点！

# xcode4 - AudioUnit 在 10.6 中不工作

> ID：10006583
> 
> 赞同：0
> 
> 时间：2012-04-04T07:19:32.770
> 
> 标签：xcode4, osx-lion, osx-snow-leopard, backwards-compatibility, audiounit

我正在使用带有 Xcode 4.2.1 的 Osx 10.7，我的 AU 插件在 10.7 中运行良好，但在 10.6 中没有运行。当我尝试将 Base SDK 从 10.7 更改为 10.6 时，我在 AUBase.h、ComponantBase.h 和 AUPluginDispatch.h 中出现错误

也许我需要将我的 CoreAudio 文件切换到 10.6？

我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T10:04:28.523

您应该始终将 Base SDK 设置为“当前 Mac OS”，然后将 Mac OS X 部署目标设置为您计划支持的最低版本。在这种情况下，CoreAudio SDK 不应该有所作为。

# coldfusion - 如何在本地范围内将索引变量放入 for ... in 循环中？

> ID：10006585
> 
> 赞同：1
> 
> 时间：2012-04-04T07:19:41.847
> 
> 标签：coldfusion, scope, for-in-loop

每当我在循环中使用 for ... 时，循环的索引变量似乎总是在变量范围内。
例如，如果我有一个带有使用此循环的方法的组件：

```
for(key in params){  
    writeOutput(key);  
} 
```

变量'key'将被放置在变量范围内。如果我已经在组件的任何地方声明了 variables.key，那么当我在循环中使用这个 for ... 时，这个值会被覆盖。我真正需要的是这样的：

```
for(var key in params){
    writeOutput(key);
} 
```

然而，这会引发解析错误。

有没有办法将 for ... in index 放在与变量范围不同的范围内？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T07:41:03.810

如果您事先没有 var，则 CFC 中的默认范围是变量。

您必须像这样在循环外更改索引：-

```
var key = "";

for(key in params){
    writeOutput(key);
} 
```

另一种方法是为了避免在你的函数中改变所有内容，是在“本地”结构中声明你的变量。在 CF9 中内置了本地范围，但对于 CF8 或更低版本，请执行以下操作：-

```
var local = structNew();

for(local.key in params){
  writeOutput(local.key);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T12:23:42.023

此语法适用于 ColdFusion 9 及更高版本：

```
for ( var key in params ){
    writeOutput( key );
} 
```

# jquery - Dojo 到 jQuery 的转换

> ID：10006586
> 
> 赞同：3
> 
> 时间：2012-04-04T07:19:43.593
> 
> 标签：jquery, dojo

我需要将dojo转换为jQuery，为此我需要准备分析报告。提到转换所需的时间和同谋。详细的案例研究。如果有任何关于dojo到jQuery转换的详细文档，请提出建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T01:13:53.560

没有直接的解决方案。

Dojo 到 jQuery 的转换不是单步的情况，而转换你可以分部进行，你可以让 dojo 和 jQuery 共存。

你认为，你真的需要这样做吗？Dojo 是一个完整的工具套件，而 jQuery 是一个用于小型网站的简单框架。

请参见。

[http://www.slideshare.net/AddyOsmani/tools-for-jquery-application-architecture-extended-slides](http://www.slideshare.net/AddyOsmani/tools-for-jquery-application-architecture-extended-slides) 和 [http://www.slideshare.net/rmurphey/the-jquery-divide-5287573](http://www.slideshare.net/rmurphey/the-jquery-divide-5287573)

jQuery 可以做 dojo 的功能，但您需要再次设置完整的体系结构才能为它做事。这就是说，您已经拥有一个适当的满载高级套件，并且您想从头开始重新设计并构建您的需求。遵循你的新架构最终可能会比两个框架文档更棘手和糟糕。

在继续之前请三思。

# sql - SQL Server 2008 中的更新列 - SSIS

> ID：10006589
> 
> 赞同：0
> 
> 时间：2012-04-04T07:20:04.030
> 
> 标签：sql, sql-server-2008, ssis

如果数据库中未提及客户交易类型
如果模型年份小于或等于 2 年，则应将交易类型更新为保修。

其余 60% 的客户数据应在客户付款时更新，40% 的客户数据应在每个经销商处随机更新为保修。

我有一个这种结构的模型年份表：

```
SlNo  VehicleNo  ModelYear
----  ---------  ---------
1     AAAD1234   2012
2     VVV023333  2008
3     CRT456     2011
4     MTER6666   2010 
```

是否可以使用 SSIS 实现这一目标？

我试过查询。请帮忙修复

```
select 
  vehicleNo, Modelyear,
  case 
      when DATEDIFF(year, ModelYear, GETDATE()) <= 2 then 'Warranty' END,
  case 
      when COUNT(modelyear) * 100 / (select COUNT(*) from VehicleModel) > 2 then '100%' end,
  case 
      when COUNT(modelyear) * 40 / (select COUNT(*) from VehicleModel) > 2  then '40%' end
from 
    vehiclemodel
group by 
    vehicleNo, Modelyear 
```

输出

```
vehicleNo  Modelyear  (No column name)  (No column name)  (No column name) 
---------  ---------  ----------------  ----------------  ----------------
AAAD1234   2008       NULL              100%              40% 
VVV023333  2010       Warranty          100%              40% 
CRT456     2011       Warranty          100%              40%
MTER6666   2012       Warranty          100%              40% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T10:39:03.170

你到底想用 SSIS 做什么？您从哪里移动数据以及将其插入到哪里？

如果您只需要运行此查询，则不需要 SSIS。您可以在 SQL 中执行此逻辑。如果您需要将其插入另一个表或数据库，我还将在 SQL 上进行计算（就像您刚才所做的那样）并将其用作 OleDBSourtce 组件的源，然后将其插入您的目标。

我认为您必须提供更多信息，以便我们为您提供帮助

# javascript - 在三星智能电视上播放声音

> ID：10006593
> 
> 赞同：9
> 
> 时间：2012-04-04T07:20:24.983
> 
> 标签：javascript, samsung-smart-tv

我正在为三星智能电视开发一个简单的游戏。我想在某些事情发生时播放小声音文件，比如准备好、赢、输。我不想处理 Flash 播放器、播放器控件.. 有没有办法使用 javascript 来触发具有预定义音量的播放声音动作，我想在我的代码中多次执行此操作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T09:46:07.390

您需要将播放器对象 ( `SAMSUNG-INFOLINK-PLAYER`) 添加到您的`<body>`标签中：

```
<object id="pluginPlayer" style="visibility: hidden; width: 0px; height: 0px; opacity: 0.0" classid="clsid:SAMSUNG-INFOLINK-PLAYER"></object> 
```

然后在应用程序的 javascript 中使用这个函数：

```
var playerObj = document.getElementById('pluginPlayer');
playerObj.Play("absolute_url_to_your_mp3"); 
```

由于播放器插件在三星文件系统内的不同位置执行，您需要始终使用文件的绝对路径。它可以是远程的，但您可以使用`location.href`您的应用程序`index.html`来获取应用程序工作目录的绝对本地路径，您可以在其中放置 mp3。

检查文档，在这里：

[http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Device_API/Player](http://www.samsungdforum.com/Guide/View/Developer_Documentation/Samsung_SmartTV_Developer_Documentation_2.5/API_Reference/JavaScript_APIs/Device_API/Player)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T15:44:15.293

这是我的解决方案：

添加到**index.html**文件

```
<body>
    <object id="pluginPlayer" border=0    classid="clsid:SAMSUNG-INFOLINK-PLAYER">
...
...
...
</body> 
```

在我的 .js 文件**Scene1.js 中**

```
SceneScene1.prototype.initialize = function () {
var Player = document.getElementById('pluginPlayer');
var retVal=Player.Play("http://mysite.com/android/smartTV/little_wing.mp3");
...
...
...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T06:31:09.340

我将 SDK 5.1 版用于 2013 年和 2014 年型号的电视，并且我有以下代码工作：

```
<object id="pluginPlayer" classid="clsid:SAMSUNG-INFOLINK-PLAYER"></object>

var playerObj = document.getElementById('pluginPlayer');
var fileName = location.pathname.substring(location.pathname.lastIndexOf("/") + 1);
playerObj.Play(document.location.href.split(fileName)[0] + 'test.mp3'); 
```

这种替代方法也有效（使用 Flash）：

```
<div style="position:absolute; z-index:-1;">
    <object type="application/x-shockwave-flash" width="100" height="50" id="fplayer">
        <param name="movie" value="test.swf"/>
        <param name="quality" value="high"/>
        <param name="bgcolor" value="blue"/>
    </object>
</div> 
```

非常感谢 Dobiatowski！

# jquery - jQuery Lint 的替代品？

> ID：10006600
> 
> 赞同：1
> 
> 时间：2012-04-04T07:20:45.733
> 
> 标签：jquery, jquery-lint

我想知道是否有 jQuery Lint 的替代品能够执行静态分析而不是运行时/浏览器内分析，即我想要一个不需要在浏览器中运行并且可以分析源代码的工具一个完整的项目。

我的问题是我有大量的页面/脚本使用从 1.2 到 1.7 的几个不同版本的 jQuery，我想将它们全部迁移到最新版本的 jQuery。但在我这样做之前，我想知道代码是否使用了任何已弃用/删除的 jQuery 功能，或者以自 1.2 版以来发生变化的方式使用 jQuery，例如在 jQuery v1.3 中删除的 [@attr] 样式选择器。

使用 jQuery Lint 打开每个页面并遵循每个执行路径来获取其输出对我来说是不可行的。

# asp.net - 检查页面是否已经打开并向其发送参数

> ID：10006602
> 
> 赞同：0
> 
> 时间：2012-04-04T07:21:01.383
> 
> 标签：asp.net, html, web-services, browser

如何检查一个asp.net/html页面是否已经打开，如果是，发送一个参数并且不再打开它，如果它没有打开，打开它并像往常一样发送参数..我想做的是：我有一个asp.net页面，它执行特定的功能并有状态行显示给用户，我想在另一个页面中显示状态行（我们称之为'statuspage'），但是因为状态改了很多次不想再打开statusPage了。

我该如何实施谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:31:20.573

[一种方法是使用自定义名称](http://www.w3schools.com/jsref/met_win_open.asp)打开新的状态窗口。任何随后打开的窗口调用都应刷新已创建的窗口。

# php - 实施像素跟踪以跟踪 Google 分析中的打开率

> ID：10006605
> 
> 赞同：0
> 
> 时间：2012-04-04T07:21:13.767
> 
> 标签：php, google-analytics

我正在关注教程：

```
$var_utmac = 'UA-29940706-1'; //enter the new urchin code
$var_utmhn = 'mywebsite.com'; //enter your domain
$var_utmn = rand(1000000000,9999999999); //random request number
$var_cookie = rand(10000000,99999999); //random cookie number
$var_random = rand(1000000000,2147483647); //number under 2147483647
$var_today = time(); //today
$utm_source = 'newsletter';
$utm_medium = 'email';
$utm_campaign = 'newsletter111';
$var_uservar = '-'; //enter your own user defined variable
$var_utmp = 'http://dl.dropbox.com/u/15672207/web.png'; //this example adds a fake file request to the (fake) tracker directory (the image/pdf filename).
$urchinUrl = 'http://www.google-analytics.com/__utm.gif?utmwv=1&utmn='.$var_utmn.'&utmsr=-&utmsc=-&utmul=-&utmje=0&utmfl=-&utmdt=-&utmhn='.$var_utmhn.'&utm_source='.$utm_source.'&utm_medium='.$utm_medium.'&utm_campaign='.$utm_campaign.'&utmp='.$var_utmp.'&utmac='.$var_utmac.'&utmcc=__utma%3D'.$var_cookie.'.'.$var_random.'.'.$var_today.'.'.$var_today.'.'.$var_today.'.2%3B%2B__utmb%3D'.$var_cookie.'%3B%2B__utmc%3D'.$var_cookie.'%3B%2B__utmz%3D'.$var_cookie.'.'.$var_today.'.2.2.utmccn%3D(direct)%7Cutmcsr%3D(direct)%7Cutmcmd%3D(none)%3B%2B__utmv%3D'.$var_cookie.'.'.$var_uservar.'%3B';

// Now fire off the HTTP request
$handle = fopen ($urchinUrl, "r");
$test = fgets($handle);
fclose($handle);

// Redirect this script as an actual GIF file sitting on this web server
header('Location: http://dl.dropbox.com/u/15672207/web.png'); 
```

我现在可以在 Google Analytics 中跟踪此脚本的打开率。但这是否意味着我只能**为一个广告系列拥有一个 Google Analytics（分析）帐户**？它是否需要一天才能真正收集数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T09:11:22.077

请不要重复你自己的问题：[一](https://stackoverflow.com/questions/10004644/how-to-know-the-number-of-recipient-have-open-the-email-through-google-analytic)、[二](https://stackoverflow.com/questions/10005593/using-utm-gif-for-google-analytic-to-track-the-open-rate/10005862#10005862)、[三](https://stackoverflow.com/questions/9971444/how-to-use-google-analytics-to-track-open-rates-click-rates-in-a-email)

如果您的推理分散在几个线程之间，我们无法给您答复......

# combobox - 在页面中加载/使用iscroll后组合框不起作用

> ID：10006606
> 
> 赞同：0
> 
> 时间：2012-04-04T07:21:14.983
> 
> 标签：combobox, iscroll4

我在我的应用程序中使用 iscroll4。我遇到了 iScroll 的问题，它使下拉列表（组合框）在同时使用时无法使用。我尝试了他们在这里提到的方式（[http://groups.google.com/group/iscroll/browse_thread/thread/5b2fbad6aa667907#](http://groups.google.com/group/iscroll/browse_thread/thread/5b2fbad6aa667907#)）

```
$(document).ready(function() {
var destinations_scroll, accounts_scroll;
    function loadingIscroll() {
        accounts_scroll = new iScroll('accounts_container');
        destinations_scroll = new iScroll('destinations_container', {
            checkDOMChanges: true
        });
        setTimeout(function() {
            destinations_scroll.refresh();
        }, 0);
    }
    document.addEventListener('touchmove', function(e) {
        if (e.target.tagName != "SELECT") {
            e.preventDefault();
            e.stopPropagation();
        }
    }, false);
    addEventListener('DOMContentLoaded', loadingIscroll, false);

}); 
```

但仍然选择框（组合框/下拉菜单）不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:16:20.510

嗨，我从[iScroll 4 得到了一个答案，它不能使用表单 <select> 元素 iPhone Safari 和 Android 浏览器](https://stackoverflow.com/questions/5745374/iscroll-4-problem-with-form-select-element-iphone-safari-and-android-browser)。感谢@comonitos。我使用了他的解决方案。

# c++ - 读取文本文件列明智的C++

> ID：10006609
> 
> 赞同：0
> 
> 时间：2012-04-04T07:21:29.863
> 
> 标签：c++, arrays

我有一个文本文件，其中数据存储为列。如何将每一列提取到数组中？

> 例如：abcd
> 
> 10 11 12 13

```
 14 15 16 17 
```

我想要四个数组，a = {10,14}, b = {11,15} c = {12,16} d = {13,17}

以下是我到目前为止将它们添加到单个数组中所做的工作：

```
CArray <double,double> *data = new CArray <double,double>();

CString strLine;

TRY

{ 
  CStdioFile file(m_fileName, CFile::modeRead); 

  while(file.ReadString(strLine)) {
      CArray <double,double> arrayValues;
      splitString(strLine,arrayValues);

      for (int i=0; i< arrayValues.GetSize()-1;i++){
        //  Temp_data[i] = arrayValues.ElementAt(i);
          data->Add(arrayValues.ElementAt(i));
      }
  }
} 
CATCH_ALL(e) 
{ 
  e->ReportError(); // shows what's going wrong 
} 
END_CATCH_ALL 

void splitString(CString S, CArray<double,double>& arrayValues){

CString sep = _T(" ");
int start = 0;
CString aux = S.Tokenize(sep, start);
arrayValues.Add(_tstof(aux));
while(start != -1){
      aux = S.Tokenize(sep, start);
      arrayValues.Add(_tstof(aux));

}

} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:27:10.907

由于您还没有尝试过任何事情，直到我会给您一些建议。

首先将行放入 a`string`并将其拆分，然后将所有值存储在一个数组中。所以最后你将拥有数组的总行数。

现在使用索引并根据索引将它们存储在不同的列数组中，例如：数组中具有相似索引的所有元素都将存储在数组中`colN`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:33:20.993

提示 - 希望您不会介意我没有为您编写代码 :)

*   使用输入流读取文件。
*   通过对输入数据进行标记来拆分读取的行。
*   使用 atoi() 方法将字符串转换为整数并填充数组。

# python - 通过 ctypes 从 Python 向 C 发送包含可变字符串的结构

> ID：10006610
> 
> 赞同：2
> 
> 时间：2012-04-04T07:21:29.710
> 
> 标签：python, ctypes

我有一个包含 C 端字符数组的结构

```
stuct s
{
    int x;
    char buffer[100];
} 
```

在我的 python 方面，我定义了

```
class myS(ctypes.Structure):
    _fields_ = [("x", c_int),
         ("buffer",type(create_string_buffer(100)))] 
```

现在，当我这样做时

```
buf = create_string_buffer(64)
s1 = myS(10,buf) 
```

它给了我错误

```
TypeError: expected string or Unicode object, c_char_Array_100 found 
```

我想要一个将由我的 C 函数更改的字符串。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:23:30.477

您可以将常规 Python 字符串分配给 100*c_char 字段：

```
class myS(ctypes.Structure):
    _fields_ = [("x", c_int),
         ("buffer", 100*c_char)]

s1 = myS(10, "foo")
s1.buffer = "bar" 
```

但是，如果您有一个字符串缓冲区对象，则可以取其值：

```
buf = create_string_buffer(64) 
s1 = myS(10,buf.value) 
```

另请注意

```
>>> type(create_string_buffer(100)) == 100*c_char
True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:25:24.863

您不必创建缓冲区。实例化缓冲区时，缓冲区位于结构中。

这是一个快速的DLL：

```
#include <string.h>

struct s
{
    int x;
    char buffer[100];
};

__declspec(dllexport) void func(struct s* a)
{
    a->x = 5;
    strcpy(a->buffer,"here is the contents of the string.");
} 
```

这是调用它的 Python 代码：

```
import ctypes

class myS(ctypes.Structure):
    _fields_ = [
        ("x", ctypes.c_int),
        ("buffer",ctypes.c_char * 100)]

s1 = myS()
dll = ctypes.CDLL('test')
dll.func(ctypes.byref(s1))
print s1.buffer
print s1.x 
```

输出：

```
here is the contents of the string.
5 
```

# java - java Web项目中的在线帮助实现

> ID：10006615
> 
> 赞同：0
> 
> 时间：2012-04-04T07:22:08.457
> 
> 标签：java, eclipse, eclipse-plugin

我需要在我的 Java Web 项目中实现联机帮助。例如，用户在第 1 页，他单击帮助按钮，然后应打开与第 1 页相关的帮助页面。如果他在第 2 页，则与第 2 页相关的帮助应与 TOC 下一个、上一个和搜索选项一起显示。谷歌搜索后，我发现可以使用 Eclipse 帮助系统[http://help.eclipse.org/helios/index.jsp](http://help.eclipse.org/helios/index.jsp)和[http://javahelp.java.net/](http://javahelp.java.net/)。Eclipse 帮助系统看起来更专业。

一世 。有没有其他工具？

ii. 此外，如何使 Eclipse 帮助系统上线，以便用户在点击 url 后可以从任何地方使用它。

iii. 使用 Eclipse 帮助系统将可以打开页面 1 页面 2 如上所述。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T10:46:30.437

经过一些研发后，我发现 Eclipse 帮助系统最适合记录帮助。它具有所需的所有功能。搜索、打印、树视图、自定义等......所有信息都可以在[http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse找到.platform.doc.isv/guide/ua_help.htm](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/ua_help.htm)和[http://dita.xml.org/wiki/an-infocenter-product-plugin-cookbook](http://dita.xml.org/wiki/an-infocenter-product-plugin-cookbook)这个链接很适合 statup

# jackrabbit - Jcr (JackRabbit) 存储库工具

> ID：10006617
> 
> 赞同：1
> 
> 时间：2012-04-04T07:22:13.270
> 
> 标签：jackrabbit, jcr

我正在寻找与 JackRabbit 一起使用的工具（最好是开源的）。例如，我想备份/恢复存储库的一些分支。任何指针，推荐？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:29:50.287

如果您只是在寻找备份，则可以使用 jackrabbit 包含的[备份功能](http://jackrabbit.apache.org/standalone-server.html#StandaloneServer-Backupandmigration)。

```
java -jar jackrabbit-standalone.jar --backup \
   --repo=jackrabbit \
   --conf=jackrabbit/repository.xml \
   --backup-repo=jackrabbit-backupN \
   --backup-conf=jackrabbit-backupN/repository.xml 
```

但是，如果您对通用工具更感兴趣，我只能推荐[jackrabbit 的 CLI 工具](http://wiki.apache.org/jackrabbit/InteractiveCommandLine)，我认为它是用于存储库操作的瑞士军刀。

如果您想查看文件系统中的现有存储库，请使用以下命令开始：

```
java -Xmx256m -jar jackrabbit-standalone-2.2.4.jar --cli file:///scratch/jcr/repository 
```

如果您的 jcr 正在远程运行，您还可以连接 jndi、davex 或 rmi，具体取决于您的存储库的公开方式。

```
java -Xmx256m -jar jackrabbit-standalone-2.2.4.jar --cli http:///localhost:8080/server

java -Xmx256m -jar jackrabbit-standalone-2.2.4.jar --cli rmi:///localhost:1099/jackrabbit 
```

登录后，您可以进行各种存储库导航、节点创建或查询。您还具有导出和导入命令，它们可以将各自的导入导出到文件系统中的文件或从文件系统中的文件导出。

```
exportsys /testbranch /tmp/export.xml 
```

您可以通过键入查看更多参数

```
help exportsys 
```

可以看到所有可用的命令

```
help 
```

这个工具有一些注意事项，因为它不支持更复杂的操作，如 ACL 修改或节点类型创建，但对于基本的东西，它是我最喜欢的。

# javascript - 我的谷歌地图被切断了，我想知道为什么？Javascript，V

> ID：10006618
> 
> 赞同：8
> 
> 时间：2012-04-04T07:22:19.187
> 
> 标签：javascript, css, google-maps-api-3

这有点难以解释，所以我上传了这个问题的屏幕截图： ![在此处输入图像描述](../Images/31a4031f622bca4be72853a15d250ef7.png)

如您所见，尽管地图上有 div 房地产（这是实际大小），但它只显示地图的 1/6！这个小部件可以调整大小，但即使它被切断。我确定我做错了什么，但无法弄清楚。这是包含地图的 div 的 CSS 代码：

```
#map {
border-right-color: black;
border-left-color: black;
border-right-width: 1px;
border-left-width: 1px;
position: absolute;
margin-top: 0px;
top: 38px;
left: 0px;
width: auto;
height: auto;
right: 0px;
bottom: 10px;
background-color: rgb(204, 204, 204);
border-bottom-style: solid;
border-top-style: solid;
border-bottom-width: 1px;
border-top-width: 1px;
border-bottom-color: rgb(204, 204, 204);
border-top-color: rgb(204, 204, 204);
overflow: hidden;
} 
```

这是制作地图的javascript：

```
 //google maps apis
 var marker;
 var setLocation =  new google.maps.LatLng(59.32522, 18.07002);

 var marker;

 function placeMarker(location) {
   if ( marker ) {
     marker.setPosition(location);
   } else {
     marker = new google.maps.Marker({
  position: location,
  map: map,
  draggable: true
     });
   }
 }

  function searchGoogleMaps(event) { 
var address =event.target.value;
geocoder.geocode( { 'address': address}, function(results, status) {
  if (status == google.maps.GeocoderStatus.OK) {
    map.setCenter(results[0].geometry.location);

        placeMarker(results[0].geometry.location)

  } else {
    alert("Geocode was not successful for the following reason: " + status);
  }
     });
   }  

  var geocoder;
   var map;
   function initialize() {
     geocoder = new google.maps.Geocoder();
     var latlng = new google.maps.LatLng(-34.397, 150.644);
     var myOptions = {
  zoom: 2,
  center: latlng,
  mapTypeId: google.maps.MapTypeId.ROADMAP
}
map = new google.maps.Map(document.getElementById("map"), myOptions);
   }

   function toggleBounce() {

if (marker.getAnimation() != null) {
  marker.setAnimation(null);
} else {
  marker.setAnimation(google.maps.Animation.BOUNCE);
}
   } 
```

最后是被调用以使这一切发生的javascript文件：

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?libraries=places&amp;sensor=false"></script> 
```

在此先感谢，特别是花时间阅读这样的长问题！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-04T07:30:49.777

每当您的 ' `map`' div 更改其大小时，您需要`resize`在 Google 地图组件上显式触发 ' ' 事件：

> 当 div 更改大小时，开发人员应在地图上触发此事件： google.maps.event.trigger(map, 'resize') 。

[https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map)

# logging - Tomcat 记录 catalina.out 不断增加

> ID：10006619
> 
> 赞同：2
> 
> 时间：2012-04-04T07:22:39.210
> 
> 标签：logging, tomcat7, slf4j

正如我在标题中提到的，我的 slf4j tomcat 日志配置存在问题。问题是，虽然我可以将 catalina.out 旋转到不同的文件，如每日附加程序，但 catalina.out 文件本身继续增长，我不知道为什么。

顺便说一句，我已经使用我的应用程序的日志文件来使用 slf4j logger.info 调试和任何其他功能，但是我仍然需要 catalina.out 才能从控制台即时查看正在发生的事情。这就是为什么我需要同时继续使用 catalina.out 和 myApplication.log 的原因。

这是我在 tomcat_home/conf 下的 tomcat 日志记录属性

```
handlers = 1catalina.org.apache.juli.FileHandler, 2localhost.org.apache.juli.FileHandler, 3manager.org.apache.juli.FileHandler, 4host-manager.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

.handlers = 1catalina.org.apache.juli.FileHandler

1catalina.org.apache.juli.FileHandler.level = FINE
1catalina.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
1catalina.org.apache.juli.FileHandler.prefix = catalina.

2localhost.org.apache.juli.FileHandler.level = FINE
2localhost.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
2localhost.org.apache.juli.FileHandler.prefix = localhost.

3manager.org.apache.juli.FileHandler.level = FINE
3manager.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
3manager.org.apache.juli.FileHandler.prefix = manager.

4host-manager.org.apache.juli.FileHandler.level = FINE
4host-manager.org.apache.juli.FileHandler.directory = ${catalina.base}/logs
4host-manager.org.apache.juli.FileHandler.prefix = host-manager.

java.util.logging.ConsoleHandler.level = FINE
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

############################################################
# Facility specific properties.
# Provides extra control for each logger.
############################################################

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].handlers = 2localhost.org.apache.juli.FileHandler

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].handlers = 3manager.org.apache.juli.FileHandler

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].handlers = 4host-manager.org.apache.juli.FileHandler 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-20T19:39:52.557

Tomcat 对此的政策如下：

> 这应该不是问题，因为您使用的是日志记录包，因此不应将任何内容打印到标准输出

至于我，我不同意他们的观点，因为大多数时候开发人员“DO”将内容记录到控制台，作为日志框架附加程序/处理程序之一，用于开发时调试目的（例如，只是为了在 IDE 控制台上查看日志输出）。

这是我使用的解决方案...

将您的日志框架设置为**不**将任何内容写入您的 dev/staging/prod 环境的标准输出中。这将使 catalina.out 非常小，只有使用直接标准输出写入（反对 log4j、logback 等写入）写入的基本信息。当然，如果您有一些直接的标准输出写入，则需要用 logger 替换它们。

正如我上面所说，在 IDE（Eclipse、IDEA 或您使用的任何工具）中开发时写入标准输出以使这些日志在开发人员的控制台中可见是很有用的。

以下是如何使用 logback 配置调整所有这些（但完美适用于 log4j，我相信其他日志记录框架）：

```
<appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
    <filter class="ch.qos.logback.classic.filter.ThresholdFilter">
        <level>${my.console.level}</level>
    </filter>
    <encoder>
        <pattern>%d %-5p [%c{0}] %m%n</pattern>
    </encoder>
</appender> 
```

所以我用

```
<level>${my.console.level}</level> 
```

为控制台附加程序指定日志记录级别。

然后只需在您的专用环境（dev、staging、prod）上为您的 jvm 启动传递*-Dmy.console.level=OFF*以禁用写入标准输出。在 IDE 中使用*-Dmy.console.level=ALL 。*

基本上这就是全部。您还可以使用这种方法来控制您的记录器日志级别。

# vb.net - NAnt 资源链接/构建

> ID：10006622
> 
> 赞同：0
> 
> 时间：2012-04-04T07:22:57.133
> 
> 标签：vb.net, nant

我几乎已经破解了这个 NAnt 的东西，我只能说 Visual Studio 在编译时肯定“隐藏”了很多东西。

我现在通过 NAnt 成功编译了我的 VB.NET 应用程序，但是它没有运行，它出现了错误：

```
Could not find any resources appropriate for the specified culture or the neutral culture.
Make sure "APP3.Resource.resources" was correctly embedded or linked into assembly "APP3" at compile time, or that all the satellite assemblies required are loadable and fully signed. 
```

当我在 Visual Studio 中编译和运行时，一切正常。

构建文件包含正在编译的所有项目的所有 .resx 文件，并且在 NAnt 构建过程中我没有收到任何错误。

任何想法，将不胜感激 ：-）

哦，我注意到我的 EXE 小了 6kb，所以显然缺少一些东西，并且 NAnt 进程似乎也没有创建清单文件，或者所有 XML 文件，我认为这是正常的？

```
<?xml version="1.0"?>
<project name="APP3" default="build" basedir="..\">
<description>APP3 build</description>
<property name="nant.settings.currentframework" value="net-3.5" />
<property name="projectversion" value="3.8.0" />
<property name="project.config" value="debug" />

<target name="init">
    <call target="${project.config}" />
</target>

<target name="debug">
    <property name="project.config" value="debug" />
    <property name="build.debug" value="true" />
    <property name="basedir.suffix" value="-debug" />
</target>

<target name="release">
    <property name="project.config" value="release" />
    <property name="build.debug" value="false" />
    <property name="basedir.suffix" value="-release" />
</target>

<target name="clean">
    <delete file="${project::get-base-directory()}${project::get-name()}_${projectversion}${basedir.suffix}\APP3_DataClasses.dll" failonerror="false" />
    <delete file="${project::get-base-directory()}${project::get-name()}_${projectversion}${basedir.suffix}\classUtilities.dll" failonerror="false" />
    <delete file="${project::get-base-directory()}${project::get-name()}_${projectversion}${basedir.suffix}\APP3.exe" failonerror="false" />
</target>

<target name="build-classutilities" depends="init, clean" description="compiles the     APP3 utilities class">
    <property name="build.dir" value="${project::get-base-directory()}/${project::get-name()}_${projectversion}${basedir.suffix}"/>
    <mkdir dir="${build.dir}" />
    <vbc target="library" output="${build.dir}/classUtilities.dll" debug="${build.debug}" rootnamespace="classUtilities">
        <imports>
            <import namespace="Microsoft.VisualBasic" />
            <import namespace="System" />
            <import namespace="System.Collections" />
            <import namespace="System.Collections.Generic" />
            <import namespace="System.Data" />
            <import namespace="System.Diagnostics" />
            <import namespace="System.Linq" />
            <import namespace="System.Xml.Linq" />
        </imports>
        <sources>
            <include name="${project::get-base-directory()}/classUtilities/Utilities.vb" />
        </sources>
        <resources>
            <include name="${project::get-base-directory()}/classUtilities/*.resx" />
            <include name="${project::get-base-directory()}/classUtilities/My Project/*.resx" />
        </resources>
        <references>
            <include name="System.dll" />
            <include name="System.Data.dll" />
            <include name="System.Core.dll" />
            <include name="System.Xml.dll" />
            <include name="System.Xml.Linq.dll" />
        </references>
    </vbc>
</target>

<target name="build-dataclasses" depends="build-classutilities" description="compiles the APP3 data classes">
    <property name="build.dir" value="${project::get-base-directory()}/${project::get-name()}_${projectversion}${basedir.suffix}"/>
    <mkdir dir="${build.dir}" />
    <vbc target="library" output="${build.dir}/APP3_DataClasses.dll" debug="${build.debug}" rootnamespace="APP3_DataClasses">
        <imports>
            <import namespace="Microsoft.VisualBasic" />
            <import namespace="System" />
            <import namespace="System.Collections" />
            <import namespace="System.Collections.Generic" />
            <import namespace="System.Configuration" />
            <import namespace="System.Data" />
            <import namespace="System.Diagnostics" />
            <import namespace="System.Xml" />
            <import namespace="System.Xml.Linq" />
            <import namespace="Iesi.Collections" />
        </imports>
        <sources>
            <include name="${project::get-base-directory()}/APP3_DataClasses/**/*.vb" />
        </sources>
        <resources prefix="APP3_DataClasses">
            <include name="${project::get-base-directory()}/APP3_DataClasses/*.resx" />
            <include name="${project::get-base-directory()}/APP3_DataClasses/My Project/*.resx" />
            <include name="${project::get-base-directory()}/APP3_DataClasses/*.hbm.xml" />
        </resources>
        <references>
            <include name="System.dll" />
            <include name="System.Core.dll" />
            <include name="System.Xml.dll" />
            <include name="System.Xml.Linq.dll" />
            <include name="C:\Dev\NHibernate-2.1.2\Required_Bins\Iesi.Collections.dll" />
        </references>
    </vbc>
</target>

<target name="build" description="compiles the source code" depends="build-dataclasses">
    <property name="build.dir" value="${project::get-base-directory()}/${project::get-name()}_${projectversion}${basedir.suffix}"/>
    <mkdir dir="${build.dir}" />
    <copy file="C:\Dev\NHibernate-2.1.2\Required_Bins\NHibernate.dll" tofile="${build.dir}/NHibernate.dll" />
    <copy file="C:\Dev\NHibernate-2.1.2\Required_Bins\Iesi.Collections.dll" tofile="${build.dir}/Iesi.Collections.dll" />
    <copy file="C:\Dev\NHibernate-2.1.2\Required_Bins\log4net.dll" tofile="${build.dir}/log4net.dll" />
    <copy file="${project::get-base-directory()}/APP3/hibernate.cfg.xml" tofile="${build.dir}/hibernate.cfg.xml" />
    <copy file="C:\Dev\LumenWorks.Framework\LumenWorks.Framework.3.8.0\LumenWorks.Framework.IO.dll" tofile="${build.dir}/LumenWorks.Framework.IO.dll" />
    <copy file="C:\Program Files (x86)\Microsoft Visual Studio 9.0\Visual Studio Tools for Office\PIA\Office11\Microsoft.Office.Interop.Word.dll" tofile="${build.dir}/Microsoft.Office.Interop.Word.dll" />
    <copy file="C:\Program Files (x86)\Microsoft Visual Studio 9.0\Visual Studio Tools for Office\PIA\Office11\office.dll" tofile="${build.dir}/office.dll" />
    <copy file="C:\Program Files (x86)\Microsoft Visual Studio 9.0\Visual Studio Tools for Office\PIA\Office11\Microsoft.Vbe.Interop.dll" tofile="${build.dir}/Microsoft.Vbe.Interop.dll" />
    <copy file="${project::get-base-directory()}/APP3/app.config" tofile="${build.dir}/APP3.exe.config" />
    <copy todir="${build.dir}">
        <fileset basedir="C:\Dev\NHibernate-2.1.2\Required_For_LazyLoading\Castle\">
            <include name="*.dll" />
        </fileset>
    </copy>
    <vbc target="winexe" output="${build.dir}/APP3.exe" debug="${build.debug}" rootnamespace="APP3">
        <imports>
            <import namespace="Microsoft.VisualBasic" />
            <import namespace="System" />
            <import namespace="System.Collections" />
            <import namespace="System.Collections.Generic" />
            <import namespace="System.Configuration" />
            <import namespace="System.Data" />
            <import namespace="System.Data.SqlClient" />
            <import namespace="System.Diagnostics" />
            <import namespace="System.Drawing" />
            <import namespace="System.Windows.Forms" />
            <import namespace="System.IO" />
            <import namespace="System.Xml" />
        </imports>
        <sources>
            <include name="${project::get-base-directory()}/${project::get-name()}/*.vb" />
            <include name="${project::get-base-directory()}/${project::get-name()}/classes/*.vb" />
            <include name="${project::get-base-directory()}/${project::get-name()}/historical/*.vb" />
            <include name="${project::get-base-directory()}/${project::get-name()}/Modules/*.vb" />
            <include name="${project::get-base-directory()}/${project::get-name()}/My Project/*.vb" />
        </sources>
        <resources prefix="APP3" dynamicprefix="true">
            <include name="${project::get-base-directory()}/${project::get-name()}/*.resx" />
            <include name="${project::get-base-directory()}/${project::get-name()}/My Project/*.resx" />
        </resources>
        <references>
            <include name="Microsoft.VisualBasic.dll" />
            <include name="System.dll" />
            <include name="System.Data.dll" />
            <include name="System.Windows.Forms.dll" />
            <include name="System.configuration.dll" />
            <include name="System.Drawing.dll" />
            <include name="${build.dir}/APP3_DataClasses.dll" />
            <include name="${build.dir}/classUtilities.dll" />
            <include name="System.Xml.dll" />
            <include name="C:\Dev\NHibernate-2.1.2\Required_Bins\Iesi.Collections.dll" />
            <include name="C:\Dev\NHibernate-2.1.2\Required_Bins\NHibernate.dll" />
            <include name="C:\Dev\NHibernate-2.1.2\Required_Bins\log4net.dll" />
            <include name="C:\Dev\LumenWorks.Framework\LumenWorks.Framework.3.8.0\LumenWorks.Framework.IO.dll" />
            <include name="C:\Program Files (x86)\Microsoft Visual Studio 9.0\Visual Studio Tools for Office\PIA\Office11\Microsoft.Office.Interop.Word.dll" />
        </references>
    </vbc>
</target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T17:45:24.370

I faced the same problem, and then tested each of the assemblies with the program .NET Reflector I've discovered that when a program is compiled from the VS, a resource file Properties\Resources.resx in the assembly has a name `appName.Properties.Resources.resources`. When you use nAnt

```
<resources>
    <include name="${proj_dir}/Properties/Resources.resx"/>
</ resources> 
```

in the assembly resource file has name `Resources.resources` .

I solved this problem as follows.

```
<target name="example">
    <copy file="${proj_dir}/Properties/Resources.resx" tofile="${proj_dir}/Properties/appName.Properties.Resources.resx"/>
    <csc target="winexe" output="${bin_dir}/appName.exe">
        <sources>
            <include name="${proj_dir}/*.cs"/>
            <include name="${proj_dir}/Properties/*.cs"/>                           
        </sources>
            <resources>
            <include name="${proj_dir}/Properties/appName.Properties.Resources.resx"/>
        </resources>
    </csc>
    <delete file="${proj_dir}/Properties/appName.Properties.Resources.resx"/>
</target> 
```

# pydev - PyDev：在项目中看不到模块

> ID：10006623
> 
> 赞同：0
> 
> 时间：2012-04-04T07:23:07.023
> 
> 标签：pydev

PyDev 2.5 和 Django 1.4

我对此很陌生，可能会犯一些愚蠢的错误，但我环顾四周，无法弄清楚我做错了什么......

在我的项目中创建一个新应用程序并将其添加到项目设置文件中的 INSTALLED_APPS 后，我尝试运行服务器（RunAs --> PyDev: Django）并获得：

错误：没有名为 <appname> 的模块

最初我认为这是由此处报告的错误引起的（错误创建 settings.py）： http: [//sourceforge.net/tracker/ ?func=detail&aid=3512322&group_id=85796&atid=577329](http://sourceforge.net/tracker/?func=detail&aid=3512322&group_id=85796&atid=577329)

但是更新到每晚构建解决了这个问题。（注意：项目的 Django 模块设置字段最初是空白的，但是当我手动输入时似乎可以找到它）。

但是它仍然找不到应用程序/模块。也许我只是在这里遗漏了一些明显的东西，但我真的没有看到它。如果您需要更多信息，请告诉我。

谢谢，瑞安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T16:15:47.213

这可能是您编写代码和配置的 PYTHONPATH 方式的问题......

要获得更好的答案，请提供更多详细信息（来自 pydev 包资源管理器的屏幕截图以及您的项目结构和 INSTALLED_APPS 设置就足够了）。

# assembly - 工作 FAT16 引导加载程序会在实际硬件上产生读取错误？

> ID：10006624
> 
> 赞同：6
> 
> 时间：2012-04-04T07:23:11.553
> 
> 标签：assembly, x86, nasm, bootloader

在过去的一周里，我一直在开发一个简单的操作系统，用于学习目的和......“有趣”。VirtualBox 和 NASM 并驾齐驱，我实际上有了一个不错的开始。最终，我决定我还想通过臭名昭著的[Brokenthorn 教程](http://www.brokenthorn.com/Resources/OSDevIndex.html)来开发一个引导加载程序（在非常困难地撞到 512 字节的墙之后） ，直到从文件系统加载为止。

通过一些 HexFiend 恶作剧和一些空白的 FAT16 图像，我最终得到了 BPB。通过一些额外的组装黑客（基础是 Brokenthorn 的教程，[第 6 部分](http://www.brokenthorn.com/Resources/OSDev6.html)），我还使用我的引导加载程序加载文件，它从我的虚拟磁盘加载恰当命名的“引导”文件（使用 dd if=/dev/zero of=boot.img bs=512 计数=2880)

那么，那是什么问题呢？这是我通过 USB 记忆棒加载到实际硬件时所看到的（在本例中为 /dev/disk3，其中编译的文件是 boot.bin）：

```
dd bs=512 count=1 if=compiled/boot.bin of=/dev/disk3 
```

这是预期的输出（在 VirtualBox 中）：

![电流输出](../Images/02aec3d02d34b5c86d3f202117abce4f.png)

与[实际输出](http://d.pr/RfDT+)相比（在旧笔记本电脑上）

![旧输出](../Images/5631ce7fe4cfe54c4c00bb696598d006.png)

```
'-' indicates a sector is being loaded
'_' indicates a sector was loaded
'!' indicates all of the desired sectors were loaded properly
'R' indicates a read error
'T' indicates the FAT table is being loaded
'D' indicates the FAT table was loaded properly
'F' means the file is being located (or Found, hence the F)
'L' means the file is being loaded 
```

（我会使用*实际*的调试消息，但 512 字节的限制非常可怕。）

所以，区别在于一个是 U 盘，一个是（虚拟）软盘。它们都加载了*完全相同的*信息，包括 BPB。但是，一种有效，一种无效。这是我加载扇区的代码的主要部分（使用 ah 02h/int 13h，我听说它适用于 USB）：

```
ReadSectors:
    mov di, 0x0005                  ; How many times should we retry the read?

ReadSectors.loop:
    ; DEBUG
    push ax
    mov ah, 0eh
    mov al, '-'
    int 10h
    pop ax
    push ax
    push bx
    push cx
    call LBAToCHS
    mov ah, 02h                     ; Set the interrupt to the 
                                    ; 'read sector' function
    mov al, 1                       ; Only read one sector
    mov ch, byte[chs.track]         ; The track to read from
    mov cl, byte[chs.sector]        ; The sector to read from
    mov dh, byte[chs.head]          ; The head to read from
    mov dl, byte[_bpb.driveNumber]  ; The drive to read from
    int 13h                         ; Call our 'disk IO' interrupt
    jnc ReadSectors.success         ; If we successfully read the data, 
                                    ; we don't have to try again
    mov ah, 00h                     ; Set the interrupt to the 
                                    ; 'reset disk' function
    int 13h                         ; Call our 'disk IO' interrupt
    dec di                          ; Decrement our error counter
    pop cx
    pop bx
    pop ax
    jnz ReadSectors.loop            ; Try again if we've failed
    jmp ReadSectors.fail            ; RED ALERT 
```

（完整的源代码，包括 BPB，可以在 Pastebin ( [http://pastebin.com/SeUm7xu6](http://pastebin.com/SeUm7xu6) )上找到

到目前为止，我已经克服了 Assembly 的许多问题，但这个问题让我很难过。希望我能尽快通过引导加载程序并抽象文件 IO。

任何建议将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T10:46:30.543

您的代码从驱动器号 0 读取，这可能不是从设备引导加载程序加载的设备（如果您从 USB 记忆棒引导，通常不是）。您应该读取的驱动器号由 BIOS 加载到`dl`寄存器中。这已经是关于 SO的已[回答问题。](https://stackoverflow.com/questions/9916738/finding-out-which-drive-was-booted-in-x86-bootloader)

# c# - 如何从C#中特定位置的列表框中删除项目

> ID：10006626
> 
> 赞同：0
> 
> 时间：2012-04-04T07:23:23.597
> 
> 标签：c#, listbox

如何从特定位置的列表框中删除项目而不是选择的项目？

假设我在列表框中有 4 个项目，并且我想删除索引 2 处的项目，我该如何在不选择它的情况下做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:26:00.850

[ListBox.Items](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.items.aspx)应该是一个列表。更精确的[ListBox.ObjectCollection](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.aspx)

你有没有尝试过 ：

```
myListBox.Items.RemoveAt(2); 
```

[MSDN 中的 RemoveAt 引用](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.removeat.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:25:56.150

```
listBox1.Items.RemoveAt(position); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:28:50.330

```
ListBox1.Items.RemoveAt(anyindex); 
```

# jquery - 如何通过 jQuery + Ajax 获取选定文件的内容

> ID：10006632
> 
> 赞同：0
> 
> 时间：2012-04-04T07:23:51.657
> 
> 标签：jquery, ajax, file, upload

我有一个文件上传元素，如下所示：

```
<input type="file" id="uploadFile"> 
```

我可以通过 jQuery 脚本获取所选文件的路径和名称，如下所示：

```
var filePath = $("#uploadFile").val();
var fileName = filePath.split('\\').pop(); 
```

您能否告诉我如何获取文件内容（我认为它是对象或字符串格式）并将其发送到服务器操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:25:32.363

首先，您**无法**使用`$("#uploadFile").val();`. 出于安全原因，这是大多数现代浏览器的限制。

接下来，您必须上传第一个，读取内容并使用 ajax 将内容扔回页面。

您可以使用[jQuery Form](http://jquery.malsup.com/form/)插件提交表单并在后端获取文件内容。

# java - Android - 9 补丁

> ID：10006633
> 
> 赞同：3
> 
> 时间：2012-04-04T07:24:16.387
> 
> 标签：java, android, spinner, nine-patch

我正在尝试使用 9 补丁图片创建一个新的微调器背景。我尝试了很多方法来获得完美的图像，但我失败了：s

这是我的 9 补丁：![在此处输入图像描述](../Images/73aab4487f02a04c4939e0317cfeebe3.png)

当我使用 Draw-9-patch 进行模拟时，内容看起来不错，但没有显示带有箭头的部分，或者当它显示时，该部分完全格式错误。

我已经把顶部的黑线放到了整个尺寸上，问题还是一样。

你知道怎么解决吗？

谢谢。

问候。

五。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T07:34:56.207

首先，您已将圆角标记为可拉伸，应避免这样做，以便您的角保持不变，无论它如何拉伸。您还将箭头标记为可垂直拉伸，我认为这是不可取的。

请参阅所附图像以获取固定的 9-patch（请注意 9-patch 帧与您的图像相比的差异），这应该在所有方向上都可以很好地缩放。![9 补丁下拉菜单](../Images/6ca570e7f5c43e5f87dc2724a84ba9a5.png)

# java - ejb2 无状态会话 bean 中的同步块

> ID：10006635
> 
> 赞同：0
> 
> 时间：2012-04-04T07:24:24.517
> 
> 标签：java, ejb-2.x, stateless-session-bean

到目前为止，我听说不建议将同步用于 ejb 会话 bean。

我有一个问题，我通过使用同步解决了。

我使用同步的代码。

```
if(strBatchID != null && strBatchNumber != null){                       
                pinGenerateSessionBeanLocalHome=getPINGenerateSessionBeanLocalHome();
                if(pinGenerateSessionBeanLocalHome != null){
                    IPINGenerateSessionBeanLocal  pinGenerateSessionBean = pinGenerateSessionBeanLocalHome.create();
                    synchronized(pinGenerateSessionBean){
                        if(pinGenerateSessionBean != null){
                            resultObject= pinGenerateSessionBean.generatePIN(pinBatchCustomData,iSessionInfo);
                            if(resultObject.getResponseCode() == PINResponseCode.SUCCESS_RESPONSE_CODE){
                                pinBatchCustomData= (PINBatchCustomData)resultObject.getResponseObject();                        
                                bSuccess = true;   
                            }else{
                                bSuccess = false;
                                debugLog(PIN_MODULE_NAME,"Insertions regarding PINs could not be made successfully ");
                            }   
                        }else{
                            bSuccess = false;
                            debugLog(PIN_MODULE_NAME,"PINGenerateSession Local Is Null ");
                        }
                    }
                }else{
                    bSuccess = false;
                    debugLog(PIN_MODULE_NAME,"PINGenerateSession Local Home Is Null ");
                }
            } 
```

检查我用来`synchronized(pinGenerateSessionBean)`同步 pingeneration 会话 bean 对象的行。

它工作正常。在此之前，当我尝试同时生成两个批次时遇到问题。

它会产生任何问题吗？性能对我来说不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T14:18:49.057

`synchronized`[EJB 2.1 规范](http://download.oracle.com/otndocs/jcp/ejb-2.1-fr-spec-oth-JSpec/)不允许使用关键字。

> ### 25.1.2 编程限制
> 
> 本节描述 Bean Provider 必须遵循的编程限制，以确保企业 bean 是可移植的并且可以部署在任何兼容的 EJB 2.1 容器中。这些限制适用于业务方法的实现。
> 
> [...]
> 
> *   企业 bean 不得使用线程同步原语来同步多个实例的执行。

我认为最好使用[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)（[Singleton Beans](http://openejb.apache.org/singleton-beans.html)在 EJB 3.1 中可用）用于“引脚生成”。

您也可以在 EJB 2.1 中采用[这种方法](https://stackoverflow.com/a/3910822/33622)，方法是调整 EJB 容器中相应池的大小。

# xpages - 您必须将插件部署到 Notes 客户端吗？

> ID：10006638
> 
> 赞同：1
> 
> 时间：2012-04-04T07:24:31.660
> 
> 标签：xpages, xpinc

我想知道是否需要在依赖于这些插件的 Notes 客户端应用程序 (XPiNC) 中使用 XPage 的任何 Notes 客户端上手动安装插件（例如 OpenNTF 扩展库）。

根据 Mastering XPages 书，*Notes Client*章节中 XPages 的第 500 页：

> XULRunner 将缓存 XPage 上使用的常用资源，但**Java 类**仍然需要为每个新的笔记会话通过网络加载

我理解这意味着如果有插件，例如 OpenNTF 扩展库，它们将被发送到 Notes 客户端，以便解决这些依赖关系，允许用户在 notes 客户端中使用应用程序，而不必担心关于更新与否。

我已经在服务器（8.5.3）上配置了 UpdateSite.nsf，以便在 HTTP 服务器启动时动态加载插件，这对于通过 Web 浏览器访问的 XPage 来说工作正常。但是，只有应用了 8.5.3 升级包（包括 OpenNTF Ext 库）的客户端才能使用客户端访问应用程序。

在我看来，这将非常麻烦。XPages 的好处是从客户端逐渐迁移到 Web，但是不得不担心每个人机器上的插件依赖关系会是一种倒退吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T23:31:53.167

是的！您必须在客户端上为 xpinc 安装扩展库插件。您可以使用 IBM 提供的更新包或创建一个小部件，将其放入您的小部件目录中，然后使用策略部署它或要求用户手动执行。

Stephen H Wissel 在他的博客上列出了执行此操作的步骤。[http://www.wissel.net/blog/d6plinks/SHWL-8GZM9A](http://www.wissel.net/blog/d6plinks/SHWL-8GZM9A)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T13:24:13.473

据我所知，如果您想在 XPINC 应用程序中使用插件，您必须将插件部署到客户端。

# mysql - mysql 两个唯一列，如果插入另一列，则一个列中的值将被视为重复

> ID：10006641
> 
> 赞同：1
> 
> 时间：2012-04-04T07:25:02.263
> 
> 标签：mysql, sql, unique

在 mysql 中是否可以使两列唯一，但是如果在另一列中找到插入到一列中的值被认为是重复的？

我试过这个代码，它不起作用：

```
ALTER TABLE test 
ADD UNIQUE myunique ( col1 ,col2 ) 
```

编辑：

感谢您的回答，我会找到其他解决方案，但避免使用触发器的解决方案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:29:54.993

### 不，本机 MySQL 约束无法做到这一点。

您`UNIQUE ( col1 ,col2 )` 会认为两列的“组合”是独一无二的。所以 (a,a) 是允许的，除非已经有另一个 (a,a)。这似乎不是你想要的。

您可以尝试使用触发器，但这相当笨拙。

为什么需要两列？如果这些列代表相同的项目（因为不允许重复），那么一列不是更好吗？如果还有其他差异，您可以为“排名”添加第二列......

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T07:30:31.353

你的代码

```
 ALTER TABLE test 
ADD UNIQUE myunique ( col1 ,col2 ) 
```

不起作用，因为它创建了一个复合的唯一索引，这使得 col1 和 col2 中的重复条目分开。正如你所说，你不需要这个。

我还没有尝试过，但你有没有为你的目的尝试过触发器？

# php - PHP日文回显字符串变成问号

> ID：10006642
> 
> 赞同：7
> 
> 时间：2012-04-04T07:25:16.667
> 
> 标签：php

我正在开发一个需要日语和英语的 php 站点。在大多数地方，让日语正确显示没有问题，但如果我使用这样的功能，我无法让字符显示：

回声.php：

```
<?php
function draw(){
echo "日本語";
}
draw();
?> 
```

我得到“日本语”

但如果我尝试这个：index.php：

```
<?php
 some stuff
 include "echo.php";
 draw();
?> 
```

我得到“？？？”。有什么方法可以让我的回显文件以它可以读取的方式将数据发送到第一个文件？

编辑：该网站可以正常工作，并正确显示日文字符，除非它尝试从 php 文件中提取函数 这是代码：

```
<html lang="ja">
<head>  
<title>Running Projects</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
</head>
<body>
<div id="header">
<? php include "layout.php" ?>
</div>
</body>
</html> 
```

layout.php 只是一个包含链接列表的文件，我在每个页面上都有这个，所以链接在每个页面上。对于不同的部分，我必须使用functions.php从数据库中获取一些数据并将其写入页面，因此，我尝试将layout.php放入functions.php并调用它：出现了英文链接，但是日语链接显示为问号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T07:29:53.443

您应该将文件编码更改为 UTF-8，并将网站上的标头设置为 UTF-8。

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

在 HTML5 中，您应该使用：

```
<meta charset="utf-8" /> 
```

或在 php

```
header('content-type: text/html; charset=utf-8'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T08:55:14.317

您的问题肯定与[字符编码](http://en.wikipedia.org/wiki/Character_encoding)有关。尝试检查以下内容：

*   所有 PHP 脚本中的所有字符串都是 Unicode（UTF-8 是一个非常常见的选择）。在必要时使用`utf8_encode()`和/或`utf8_decode()`在您的字符串上强制使用 UTF-8。
*   您的服务器将 PHP 输出作为 Unicode（UTF-8，最好但不一定是 gzip 压缩数据）发送
*   您的浏览器理解并接受 Unicode (UTF-8)。通常浏览器会发送请求`Accept-Charset: UTF-8,*;q=0.5`以`GET`提示它的 Unicode 功能。

最后，我使用 PHP 5.3.6 版和 Firefox、Chrome 和 IE 9 检查了您的代码。Firefox 和 Chrome 按预期打印日文字符。只有 IE 9 不能正确打印。窥探`GET`IE 的请求显示，它确实没有发送任何`Accept-Charset: UTF-8,*;q=0.5`. 我不完全确定如何强制 IE 发送它，因为在我的情况下，显然我的服务器（Apache）和 PHP 肯定会发送 UTF-8 字符串。

还有一个提示 - 您可以尝试将您的字符串转换为[HTML 实体](http://en.wikipedia.org/wiki/Html_entities)。例如 -`echo "&#x00A9;";`将打印`©`. 但是，我不是 100% 确定如何使用 PHP 将所有字符串转换为 HTML 实体。我尝试使用[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)and未成功[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)。但是，它并没有改变 IE 的任何东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-03T03:58:08.923

我有同样的问题。但我处理它。

将“echo.php”的编码转换为 EUC-JP 或 SHIFT-JIS。

```
<?php
function draw(){
echo mb_convert_encoding("日本語", 'UTF-8', array('EUC-JP', 'SHIFT-JIS', 'AUTO'));
}
draw();
?> 
```

这对我有用:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T07:38:55.520

### 当`charset`未定义或不正确时会发生这种情况。

您可以使用元标记来定义字符集。根据需要在页面头部放置以下元标记，它将正确呈现。

HTML 4

```
<meta http-equiv="content-type" content="text/html; charset=UTF-8"> 
```

HTML 5

```
<meta charset="utf-8" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T07:36:44.283

将以下元标记添加到标题

```
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta http-equiv="Content-Language" content="ja" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-29T00:55:49.010

MySQL 和 PHP 需要处理相同的字符集。

尝试添加..

`mysqli_set_charset("utf8");`

..连接到您的数据库后。总是为我工作！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-03-30T16:50:19.973

如果您使用 php 和 mssql，您还需要在 mssql 连接字符串中指定字符集。

像这样：

```
$connectionInfo = array("Database"=>"db name", "UID"=>"username", "PWD"=>"pw","CharacterSet" => "UTF-8");
$serverName = "server";
$conn = sqlsrv_connect($serverName, $connectionInfo); 
```

请注意，您仍然需要执行上面建议的操作，像这样 HTML 5 声明您的 html 字符集：

```
<meta charset="utf-8" /> 
```

像这样的php字符集：

```
header('content-type: text/html; charset=utf-8'); 
```

# c# - 仅在编译完成时运行自定义目标

> ID：10006644
> 
> 赞同：2
> 
> 时间：2012-04-04T07:25:20.537
> 
> 标签：c#, msbuild

我开发了一个自定义目标，**只有**在编译（csc）完成时才需要运行（否则构建过程需要很长时间）。我发现`Inputs`和`Outputs`属性可用于比较文件时间戳并在`Inputs`集合中有较新文件时执行目标。问题是我的目标没有生成任何文件，所以我不确定我应该传递什么作为`Outputs`属性来获得这个工作正确性（我不能使用目标程序集来检查，因为在执行编译时，时间戳组装是实际时间，因此我的目标不会执行）。

任何想法我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:37:46.497

您可以写出一个虚拟文件并将其用于输出。使用目标中的 WriteLinesToFile 任务来输出名为“MyTarget.output”之类的文件。

MsBuild 将使用该文件的时间戳来跟踪目标上次运行的时间，然后可以判断输入文件是否比输出文件新并知道再次运行目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:32:06.100

一种可能的解决方案是使用`PostBuildEvent`. 为了让这个工作，我们需要做以下事情：

1.  将值设置为`<PostBuildEvent>`。这可以直接在 内完成`<PropertyGroup>`，例如：`<PostBuildEvent>echo Post build event completed</PostBuildEvent>`. 我只用来`echo`向输出写一条消息，因为`<PostBuildEvent>`不能为空。
2.  将属性设置`<PostBuildEvent>`为`OnOutputUpdated`。这会导致 MSBuild 比较编译前后的程序集时间戳，并且`<PostBuildEvent>`仅在程序集发生更改时才执行。
3.  设置要在其中执行的依赖项/目标`<PostBuildEventDependsOn>`

完整的示例如下所示：

```
<PropertyGroup>
    <PostBuildEvent>echo Post build event completed</PostBuildEvent>
    <RunPostBuildEvent>OnOutputUpdated</RunPostBuildEvent>
    <PostBuildEventDependsOn>$(PostBuildEventDependsOn);MyCustomTarget</PostBuildEventDependsOn>
</PropertyGroup> 
```

# java - java并发：多生产者一消费者

> ID：10006647
> 
> 赞同：5
> 
> 时间：2012-04-04T07:25:31.647
> 
> 标签：java, concurrency, consumer, producer

我有一种情况，不同的线程填充一个队列（生产者），一个消费者从这个队列中检索元素。我的问题是，当从队列中检索其中一个元素时，会丢失一些元素（丢失信号？）。生产者代码是：

```
class Producer implements Runnable {

    private Consumer consumer;

    Producer(Consumer consumer) { this.consumer = consumer; }

    @Override
public void run() {
    consumer.send("message");
  }
} 
```

它们是通过以下方式创建和运行的：

```
ExecutorService executor = Executors.newSingleThreadExecutor();
for (int i = 0; i < 20; i++) {
  executor.execute(new Producer(consumer));
} 
```

消费者代码是：

```
class Consumer implements Runnable {

private Queue<String> queue = new ConcurrentLinkedQueue<String>();

void send(String message) {
    synchronized (queue) {
        queue.add(message);
        System.out.println("SIZE: " + queue.size());
        queue.notify();
    }
}

@Override
public void run() {
    int counter = 0;
    synchronized (queue) {
    while(true) {
        try {
            System.out.println("SLEEP");
                queue.wait(10);
        } catch (InterruptedException e) {
                Thread.interrupted();
        }
        System.out.println(counter);
        if (!queue.isEmpty()) {             
            queue.poll();
            counter++;
        }
    }
    }
}

} 
```

运行代码时，有时会添加 20 个元素并检索 20 个元素，但在其他情况下检索的元素少于 20 个。知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T07:37:32.913

我建议您使用 BlockingQueue 而不是 Queue。LinkedBlockingDeque 可能是您的理想选择。

您的代码如下所示：

```
void send(String message) {
    synchronized (queue) {
        queue.put(message);
        System.out.println("SIZE: " + queue.size());
    }
} 
```

然后你需要

```
queue.take() 
```

在您的消费者线程上

这个想法是 .take() 将阻塞，直到队列中有一个可用的项目，然后正好返回*一个*（我认为您的实现会受到影响：轮询时缺少通知）。.put() 负责为您处理所有通知。无需等待/通知。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T08:27:21.660

您的代码中的问题可能是因为您使用`notify`的是`notifyAll`. 如果有一个等待锁的线程，前者只会唤醒一个线程。这允许没有线程在等待并且信号丢失的竞争条件。notifyAll 将通过要求所有线程唤醒以检查它们是否可以获得锁来以较小的性能成本强制正确性。

[这在Effective Java 第一版](http://www.pascal-man.com/navigation/faq-java-browser/java-concurrent/Effective%20Java%20-%20Programming%20Language%20Guide.pdf)（参见第 150 页）中得到了最好的解释。第 2 版删除了这个提示，因为程序员应该使用 java.util.concurrent 来提供更强的正确性保证。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-03T17:16:34.807

同时使用 ConcurrentLinkedQueue 和同步似乎是个坏主意。它首先违背了并发数据结构的目的。

ConcurrentLinkedQueue 数据结构没有问题，将其替换为 BlockingQueue 将解决问题，但这不是根本原因。

问题出在 queue.wait(10) 上。这是定时等待方法。一旦 10ms 过去，它将再次获取锁。

1.  通知 (queue.notify() ) 将丢失，因为如果 10 毫秒已过，则没有消费者线程在等待它。

2.  生产者将无法添加到队列中，因为他们无法获取锁，因为消费者再次声明了锁。

迁移到 BlockingQueue 解决了您的问题，因为您删除了 wait(10) 代码，并且 BlockingQueue 数据结构处理了等待和通知。

# hadoop - HBase：我需要jobtracker/tasktracker吗

> ID：10006649
> 
> 赞同：0
> 
> 时间：2012-04-04T07:25:34.513
> 
> 标签：hadoop, mapreduce, hbase

如果我不做任何 map/reduce 作业，仍然需要运行 JobTracker/TaskTrackers 以获得一些 HBase 内部依赖项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:39:46.503

不，您不需要两者来单独运行 HBase。

提示：例如，总会有一些脚本只是启动 HDFS `bin/start-dfs.sh`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-07T20:53:22.627

如上所述，如果我们只处理 Hbase，则不需要 Job/Tasktracker。您可以使用 bin/start-dfs.sh 来启动 Name/Dtanodes..此外 bin/start-all.sh 现在已被弃用..所以您应该更喜欢使用 bin/start-dfs.sh 来启动 Name/Datanodes 和 bin /start-mapred.sh 启动 Job/Tasktracker ..我建议在伪分布式模式下使用 Hbase 来进行学习和测试，因为在独立的 Hbase 中不使用 HDFS ..您在配置时应该小心一点。 .

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T10:36:58.153

基本情况：仅使用 HDFS+HBase 时不需要 JobTracker 和 TaskTrackers（在较小的测试环境中不需要事件 HDFS）

当您想使用存储在 HBase 中的数据运行 MapReduce 作业时，您显然需要 JobTracker 和 TaskTracker。

# javascript - 避免多次加载 jquery

> ID：10006655
> 
> 赞同：4
> 
> 时间：2012-04-04T07:26:03.773
> 
> 标签：javascript, jquery, html

使用 Google Page Speed 我可以看到 Jquery UI 和 Jquery 以及其他 js-libraries 似乎被加载了多次，即使我只在我的页面中包含它们一次： ![在此处输入图像描述](../Images/3c49e69aa1381e35cb1f0b45fe379cff.png)

我怎样才能避免这种情况？

**更新**

我的代码看起来像这样（我已经删除了 html 的主要部分，留下了所有的 javascript 内容）：

```
<!doctype html>
<html lang="en" class="no-js" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
xmlns:fb="http://www.facebook.com/2008/fbml" >
<head id="hdHead"><meta charset="UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>
    My Page
</title>
    <!--Utils-->
    <link rel="search" type="application/opensearchdescription+xml" href="/opensearch.xml" title="Mysite" /><meta name="viewport" content="width=980,initial-scale=1.0,maximum-scale=1.0,user-scalable=yes" />
    <!-- For iPhone 4 with high-resolution Retina display: -->
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/css/touch/gfx/hs-icons/h/apple-touch-icon.png" />
    <!-- For first-generation iPad: -->
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/css/touch/gfx/hs-icons/m/apple-touch-icon.png" />
    <!-- For non-Retina iPhone, iPod Touch, and Android 2.1+ devices: -->
    <link rel="apple-touch-icon-precomposed" href="/css/touch/gfx/hs-icons/l/apple-touch-icon-precomposed.png" />
    <!-- For nokia devices: -->
    <link rel="shortcut icon" href="/css/touch/gfx/hs-icons/l/apple-touch-icon.png" /><link rel="shortcut icon" href="/css/gfx/favicon.ico" />
    <!-- W3C way of 2005 for XHTML1.0 http://www.w3.org/2005/10/howto-favicon -->
    <link rel="icon" type="image/png" href="/css/gfx/myspot.ico" />
    <!--Styles-->
    <link href="/plugins/jqueryui/css/custom-theme/jquery-ui-1.8.13.custom.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" href="/css/desktop/myspot.min.css?v=2803" />
    <!--[if lt IE 9]>
    <link rel="stylesheet" href="/css/desktop/myspotoldie.css?v=0114" />
    <![endif]-->
    <!--[if IE]>
    <link rel="stylesheet" href="/css/desktop/myspotie.css?v=0114" />
    <![endif]-->
    <!--scripts (more in page bottom-->
    <script src="/scripts/libs/modernizr-1.7.min.js" type="text/javascript"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.11/jquery-ui.min.js"
        type="text/javascript"></script>
    <script type="text/javascript">
        if (typeof jQuery == 'undefined') {
            console.log("no jquery");
            document.write(unescape('%3Cscript src="/scripts/libs/jquery-1.7.min.js"%3E%3C/script%3E'));
        }
        if (typeof jQuery.ui == 'undefined') {
            console.log("no jquery ui");
            document.write(unescape('%3Cscript src="plugins/jqueryui/jquery-ui-1.8.11.min.js"%3E%3C/script%3E'));
        }
        var defText = 'Restaurant ved åen...';
    </script>
    <script src="/scripts/desktop/behavior.min.js?v=2803" type="text/javascript"></script>
    <script type="text/javascript" src="/scripts/libs/jquery.cookie.js"></script>

    <!--do not move recordOutboundLink to bottom -->
    <script type='text/javascript'>
        var googletag = googletag || {};
        googletag.cmd = googletag.cmd || [];
        (function () {
            var gads = document.createElement('script');
            gads.async = true;
            gads.type = 'text/javascript';
            var useSSL = 'https:' == document.location.protocol;
            gads.src = (useSSL ? 'https:' : 'http:') +
'//www.googletagservices.com/tag/js/gpt.js';
            var node = document.getElementsByTagName('script')[0];
            node.parentNode.insertBefore(gads, node);
        })();
</script>

<script type='text/javascript'>
    googletag.cmd.push(function () {
        googletag.defineSlot('/1025597/Place_main_bottom', [468, 60], 'div-gpt-ad-1328824112752-0').addService(googletag.pubads());
        googletag.defineSlot('/1025597/Place_sidebar_bottom', [160, 600], 'div-gpt-ad-1328824112752-1').addService(googletag.pubads());
        googletag.defineSlot('/1025597/Place_sidebar_middle', [234, 60], 'div-gpt-ad-1328824112752-2').addService(googletag.pubads());
        googletag.defineSlot('/1025597/Search_main_bottom', [468, 60], 'div-gpt-ad-1328824112752-3').addService(googletag.pubads());
        googletag.defineSlot('/1025597/Search_sidebar_1', [234, 60], 'div-gpt-ad-1328824112752-4').addService(googletag.pubads());
        googletag.defineSlot('/1025597/Search_sidebar_2', [234, 60], 'div-gpt-ad-1328824112752-5').addService(googletag.pubads());
        googletag.defineSlot('/1025597/Search_sidebar_3', [234, 60], 'div-gpt-ad-1328824112752-6').addService(googletag.pubads());
        googletag.defineSlot('/1025597/Search_sidebar_4', [234, 60], 'div-gpt-ad-1328824112752-7').addService(googletag.pubads());
        googletag.defineSlot('/1025597/Search_sidebar_5', [234, 60], 'div-gpt-ad-1328824112752-8').addService(googletag.pubads());
        googletag.pubads().enableSingleRequest();
        googletag.enableServices();
    });
</script>

    <script type="text/javascript">
        //Tabs
        jQuery(document).ready(function () {
            jTabs = jQuery("#tabs").tabs({

                select: function (event, ui) {
                    try {
                        var newhasharr = ui.tab.toString().split("#");
                        window.location.hash = newhasharr[1];
                    }
                    catch (err) {
                    }
                }
            });
            LoadTabFromHash();
            function LoadTabFromHash() {
                try {
                    var hash = window.location.hash.replace('#', '');
                    if (hash != '') {
                        jTabs.tabs("select", hash);
                    }
                }
                catch (err) {
                }
            }
            jQuery(".jclickatab").click(function (ev) {
                ev.preventDefault();
                var hash = jQuery(this).attr("href").replace("#", "");
                if (hash != '') {
                    jTabs.tabs("select", hash)
                }
            });
        });
    </script>

        <script type="text/javascript" src="http://yandex.st/jquery/fancybox/1.3.4/jquery.fancybox.min.js"></script>
</head>

<body>

    <form method="post" action="/mypage" onsubmit="javascript:return WebForm_OnSubmit();" id="Form1">
<div class="aspNetHidden">
</div>

<script type="text/javascript">
//<![CDATA[
function WebForm_OnSubmit() {
ChangeColourOfInvalidControls();
return true;
}
//]]>
</script>

    <div id="fb-root">
    </div>
    <script type="text/javascript">
    window.fbAsyncInit = function () {
        FB.init({
            appId: '139505527456',
            channelUrl: '//www.myspot.dk/channel.html',
            status: true,
            cookie: true,
            xfbml: true  
        });
    };

    // Load the SDK Asynchronously
    (function (d) {
        var js, id = 'facebook-jssdk'; if (d.getElementById(id)) { return; }
        js = d.createElement('script'); js.id = id; js.async = true;
        js.src = "//connect.facebook.net/da_DK/all.js";
        d.getElementsByTagName('head')[0].appendChild(js);
    } (document));
    </script>

    <div id="container" class="placepage">

            <!-- AddThis Buttons BEGIN -->
            <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
                <a class="addthis_button_facebook_like" fb:like:layout="button_count" fb:like:width="105">
                </a>
            </div>
            <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
                <a class="addthis_button_google_plusone"></a>
            </div>
            <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=myspot"></script>
            <!-- AddThis Buttons END -->
        </div>
<script>
    jQuery(document).ready(function () {
        TidyUpPlaceImages();

        jQuery(".mainplacepix a").fancybox({
            'type': 'image',
            'transitionIn': 'elastic',
            'transitionOut': 'elastic',
            'speedIn': 600,
            'speedOut': 200,
            'titlePosition': 'over',
            'overlayShow': false,
            'showNavArrows': true
        });
    });
    function TidyUpPlaceImages() {
        var mainImageHeight = jQuery(".mainplacepix a:first").height();
        var thumbsHeight = 0;
        jQuery(".mainplacepix a:gt(0)").each(function (index) {
            thumbsHeight += jQuery(this).height();
            if (thumbsHeight <= mainImageHeight) {
                jQuery(this).show();
            }
            else {
                return;
            }
        });
    }
</script>

<script type="text/javascript">

jQuery(document).ready(function () {
    jQuery('#txtReviewBody').keyup(function(event) {
        if(jQuery(this).val().length>50 && !jQuery('#reviewparametercontainer').is(":visible")) {
            jQuery('#reviewparametercontainer').slideDown();
            _gaq.push(['_trackEvent', 'Reviews', 'LenghtAbove50', 'empty']);
        }
    }).blur(function() {
        if(jQuery(this).val().trim().length<1) {
            jQuery('#reviewparametercontainer').slideUp();
            _gaq.push(['_trackEvent', 'Reviews', 'BlurWithoutWriting', 'empty']);
        }
    });
    jQuery(".writeReviewDatePicker").datepicker(
    {
    maxDate: new Date()
    });
})

</script>

<script type="text/javascript">
    var reviewErrorMess = 'Some error';
    var ratingErrorMess = 'Some error';
    var reviewScriptErrorMess = 'Some error';
    function validateReviewForm() {
        var imValid = true;
        var reviewlength = jQuery('#txtReviewBody').val().length;
        var myspotrating = jQuery('#rating input[type="hidden"]').val().length;
        if (reviewlength < 2) {
            setErrorFeedbackToTheRight(jQuery('#txtReviewBody'), reviewErrorMess);
            imValid = false;
        }
        else {
            if (jQuery('#txtReviewBody').val().indexOf('<') > -1) {
                setErrorFeedbackToTheRight(jQuery('#txtReviewBody'), reviewScriptErrorMess);
                imValid = false;
            }
        }
        if (rating < 1) {
            setErrorFeedbackToTheRight(jQuery('#rating'), ratingErrorMess);
            imValid = false;
        }

        return imValid;
    }
    jQuery(document).ready(function () {
        jQuery('#ratingmyspot.error').live('click', function () {
            removeErrorFeedback(jQuery(this));
        });
        jQuery('textarea.error').live('keyup', function () {
            removeErrorFeedback(jQuery(this));
        });
        jQuery('#ddlTypes').change(function (ev) {
            FilterReviewParams(jQuery(this).val());
        });
        FilterReviewParams(jQuery('#ddlTypes').val());
    });
    function FilterReviewParams(categoryId) {
        var selector = '#reviewParameters .ratingcontrol.' + categoryId;
        var jAll = jQuery('#reviewParameters .ratingcontrol:visible');
        if (jAll.length > 0) {
            jAll.hide({
                duration: 1000,
                complete: function () {
                    jQuery(selector).show(1000);
                }
            });
        }
        else {
            jQuery(selector).show(1000);
        }

    }
</script>

<script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery('#listOfOffers input[type="submit"]').button();
        if (jQuery(".offersFromDateTimePicker").length > 0) {
            jQuery(".offersFromDateTimePicker").datetimepicker({
                onSelect: function (selectedDate, sender) {
                    setMinDateTime(selectedDate, ".offersEndDateTimePicker");
                }
            });
            var minDate = jQuery(".offersFromDateTimePicker").val();
            jQuery(".offersEndDateTimePicker").datetimepicker({
                minDate: minDate
            });
        }
    });
</script>
<script type="text/javascript">
    jQuery(document).ready(function () {
        jQuery('#placepageevents input[type="submit"]').button();

        if (jQuery(".eventsFromDateTimePicker").length > 0) {
            jQuery(".eventsFromDateTimePicker").datetimepicker({
                onSelect: function (selectedDate, sender) {
                    setMinDateTime(selectedDate, ".eventsEndDateTimePicker");
                }
            });
            var minDate = jQuery(".eventsFromDateTimePicker").val();
            jQuery(".eventsEndDateTimePicker").datetimepicker({
                minDate: minDate
            });
        }
    });
</script>
        <script type="text/javascript">
            jQuery(document).ready(function () {
                jQuery(".aboutplaceimages a").fancybox({
                    'type': 'image',
                    'transitionIn': 'elastic',
                    'transitionOut': 'elastic',
                    'speedIn': 600,
                    'speedOut': 200,
                    'titlePosition': 'over',
                    'overlayShow': false,
                    'showNavArrows': true
                });
            });
        </script>
        </footer>

    <script src="/scripts/libs/jquery.highlightFade.js" type="text/javascript"></script>
    <script src="/plugins/jqueryui/jquery-ui-timepicker-addon.js" type="text/javascript"></script>
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript" src="/scripts/desktop/mygmap.js"></script>
    <script type="text/javascript" src="/scripts/desktop/place.min.js?v=0310a"></script>

    </script>
     <script type='text/javascript'>
        jQuery.ajax({
            url: 'http://demo.easyrec.org:8080/api-js/easyrec.js',
            dataType: "script",
            success: function () {
                if (typeof (easyrec_sendAction) != "undefined") {
                    easyrec_sendAction("view",
                    {
                        itemId: "48863",
                        itemUrl: "/mypage",
                        itemDescription: "Mypage",
                    });
                }
            }
        }); 
    </script>

    <link rel="stylesheet" href="/plugins/jquery.fancybox-1.3.4/fancybox/jquery.fancybox-1.3.4.css"
    type="text/css" media="screen" />
    <script src="/plugins/jqueryui/jquery.ui.datepicker-da.js"     type="text/javascript"></script>
             <script type="text/javascript" src="/scripts/libs/jquery.lazyload.min.js"></script>
    <script type="text/javascript">
        jQuery(document).ready(function () {
            jQuery("img.lazy").lazyload();
        });

</script>

<script type="text/javascript">
//<![CDATA[
var theForm = document.forms['Form1'];
if (!theForm) {
    theForm = document.Form1;
}
function __doPostBack(eventTarget, eventArgument) {
    if (!theForm.onsubmit || (theForm.onsubmit() != false)) {
        theForm.__EVENTTARGET.value = eventTarget;
        theForm.__EVENTARGUMENT.value = eventArgument;
        theForm.submit();
    }
}
//]]>
</script>

</form>
</body>
</html> 
```

谢谢，

托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T13:23:09.820

显然，您正在使用/加载多个版本的 jquery、jquery-ui 等，这绝对是次优的

例如：

*   jquery-1.7.min.js
*   jquery.min.js（版本 1.7.1）
*   jquery-ui.min.js (版本 1.8.11)
*   ...

此外，以下块似乎已过时，因此请尝试将其删除并从您的服务器而不是从 google 加载 js 文件。

```
<script type="text/javascript">
    if (typeof jQuery == 'undefined') {
        console.log("no jquery");
        document.write(unescape('%3Cscript src="/scripts/libs/jquery-1.7.min.js"%3E%3C/script%3E'));
    }
    if (typeof jQuery.ui == 'undefined') {
        console.log("no jquery ui");
        document.write(unescape('%3Cscript src="plugins/jqueryui/jquery-ui-1.8.11.min.js"%3E%3C/script%3E'));
    }
    var defText = 'Restaurant ved åen...';
</script> 
```

您正在使用许多 3rd 方库，所以我不能保证它们也会加载 jquery

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:30:38.280

在您的解决方案中搜索 Jquery.min.js 文件并确保它没有被引用两次。如果您使用的是母版页或模板，请确保它没有在该页面以及您当前正在查看的页面上定义。

# mysql - MySQL 查询中的奇怪返回

> ID：10006656
> 
> 赞同：1
> 
> 时间：2012-04-04T07:26:07.477
> 
> 标签：mysql, mysql-error-1264

这里有个小问题。我会定期自动更新 MySQL 表中的货币。生成的查询的一部分是：

```
UPDATE ara_curr SET 
curr_xchange=REPLACE(CONVERT(CONVERT('1.60739',DECIMAL(9,5))/CONVERT('10000',DECIMAL(9,5)),DECIMAL(9,5)),'.',','),
curr_rev_xchange=REPLACE(CONVERT('6221.27',DECIMAL(9,5)),'.',',') 
WHERE curr_name='IDR'; 
```

我从在线服务中获得价值。但是，此查询返回

```
Out of range value for column (null) at row 1 
```

但是，如果我将其分解，则转换将返回这些

```
REPLACE(CONVERT('6221.27',DECIMAL(9,5)),'.',',') = 6221,27000
CONVERT('1.60739',DECIMAL(9,5)) = 1,60739
CONVERT('10000',DECIMAL(9,5)) = 9999,99999
CONVERT(CONVERT('1.60739',DECIMAL(9,5))/CONVERT('10000',DECIMAL(9,5)),DECIMAL(9,5)) = 0,00016 
```

如果我尝试使用这些值直接运行查询，例如

```
UPDATE ara_curr SET curr_xchange='0,00016', curr_rev_xchange='6221,27000' WHERE curr_name='IDR'; 
```

它运行完美！

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T23:07:51.800

尝试使用 CAST 而不是 CONVERT：

```
UPDATE  ara_curr
SET     REPLACE(CAST(CAST('1.60739' AS DECIMAL(9, 5)) / CAST('10000' AS DECIMAL(9, 5)) AS DECIMAL(9, 5)), '.', ',') AS curr_xchange
        , REPLACE(CAST('6221.27' AS DECIMAL(9, 5)), '.', ',') AS curr_rev_xchange
WHERE   curr_name = 'IDR'; 
```

此外，您可能会在转换`10000`为 a时遇到一些麻烦，`DECIMAL(9, 5)`因为它超出了允许的范围。您可能希望将其转换为`DECIMAL(10, 5)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:41:04.990

curr_xchange 和 curr_rev_xchange 是什么数据类型？

如果我运行您的查询，它会将结果作为二进制数据返回。也许您可以尝试使用围绕结果的 CAST 进行此修改。

```
UPDATE ara_curr SET 
curr_xchange=CAST(REPLACE(CONVERT(CONVERT('1.60739',DECIMAL(9,5))/CONVERT('10000',DECIMAL(9,5)),DECIMAL(9,5)),'.',',') AS CHAR),
curr_rev_xchange=CAST(REPLACE(CONVERT('6221.27',DECIMAL(9,5)),'.',',') AS CHAR) 
WHERE curr_name='IDR'; 
```

# iphone - cocos2d如何组合精灵

> ID：10006657
> 
> 赞同：1
> 
> 时间：2012-04-04T07:26:11.717
> 
> 标签：iphone, ios, cocos2d-iphone

我想组合三个精灵并将其显示为单个精灵。我创建了一个空精灵并添加了部分，但无法正常工作。

```
 CCNode *stars = [CCNode node];

    CCSprite *star1 = [CCSprite spriteWithSpriteFrameName:@"star.png"];
    star1.position = ccp(-10, 0);
    [stars addChild:star1];

    CCSprite *star2 = [CCSprite spriteWithSpriteFrameName:@"star.png"];
    star2.position = ccp(0, 0);
    [stars addChild:star2];

    CCSprite *star3 = [CCSprite spriteWithSpriteFrameName:@"star.png"];
    star3.position = ccp(10, 0);
    [stars addChild:star3];

    [self addChild:stars]; 
```

我得到了以下异常

由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“无效的 spriteFrameName：star.png”

请帮我弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:14:27.567

您是否像这样添加单个精灵：

```
CCSprite *star1 = [CCSprite **spriteWithFile**:@"star.png"];
star1.position = ccp(-10, 0);
[self addChild:star1]; 
```

在我看来，您正在尝试使用精灵帧，但您没有正确加载任何精灵表，或者您打算使用`spriteWithFile`.

```
CCNode *stars = [CCNode node];

CCSprite *star1 = [CCSprite spriteWithFile:@"star.png"];
star1.position = ccp(-10, 0);
[stars addChild:star1];

CCSprite *star2 = [CCSprite spriteWithFile:@"star.png"];
star2.position = ccp(0, 0);
[stars addChild:star2];

CCSprite *star3 = [CCSprite spriteWithFile:@"star.png"];
star3.position = ccp(10, 0);
[stars addChild:star3];

[self addChild:stars]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:33:02.140

听起来 .png 文件有问题。确保已将其添加到项目的资源中。

# web-applications - SaaS 应用程序和 Web 应用程序之间的区别

> ID：10006660
> 
> 赞同：3
> 
> 时间：2012-04-04T07:26:29.093
> 
> 标签：web-applications, saas

任何人，请解释SaaS App和Web App之间的区别。另外，我们如何制作 Java Web App、SaaS App？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:03:18.003

对我而言，Saas（软件即服务）是指您提供的应用程序不需要客户提供任何基础设施，因此客户可以使用您的软件而无需关心支持您的软件的系统。如果应用程序在提供者基础设施中运行，那么 Web 应用程序就是 Saas 应用程序。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T07:33:29.417

简短的回答是，可以将 Web 应用程序配置为软件服务 (SaaS)。

我建议阅读[云的智慧](http://news.cnet.com/wisdom-of-clouds/)系列，以深入了解 IaaS、SaaS 和 PaaS 的演变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-13T18:32:12.573

SaaS 是关于满足 NIST 设定的标准。要将 Java Web App 转换为 SaaS，您需要更改后端和编码以使其可扩展、灵活、冗余、多租户。您可以使用 Kubernetes、微服务、添加负载均衡器和防故障 DNS。

Web 应用程序是可以通过浏览器访问的应用程序。在修改为应用程序工作的共享服务器上运行的 WordPress 也是一个 Web 应用程序。作为个人开发者，我们通常开发网络应用程序或传统软件。

SaaS需要满足云计算的标准。对于普通使用而言，这在技术上是困难且昂贵的。Adobe Photoshop CC 是一种 SaaS。因为它满足可扩展性、可访问性、持久性、按需计算能力等标准。Netflix 是 SaaS 的另一个例子。

要使特定的 WordPress 安装成为 SaaS，我们需要满足 NIST 设定的标准，例如可扩展性、可用性、服务连续性等。将 Web 应用程序或传统软件转换为 SaaS 需要判断是否值得引入这种复杂性。这个答案是[我博客文章中的一个总结，](https://thecustomizewindows.com/2019/04/what-is-the-difference-between-a-web-application-and-a-saas-application/)向您解释基本情况。

# c - 如何将一大组数据存储到C中的数组中

> ID：10006663
> 
> 赞同：0
> 
> 时间：2012-04-04T07:27:00.390
> 
> 标签：c

我有一个名为 somedata.dat 的数据文件，它包含一个数字对列表。约10000双。像这样：

```
3 19
5 213
1 34
7 93 
```

我尝试打开文件并阅读它们，然后将数字放入 10000x2 数组中。但是，使用以下代码，它会在循环达到第 80000 次时停止运行（不用说 EOF）。有任何想法吗？谢谢。

```
int main(int argc, char *argv[])
{

int data[10000][2];
FILE *fp;

char s[5];
char temp[2];
char cur;
char next;
int pid=0;
int k=0;

fp = fopen("c:\\somedata.dat","r");
while (!EOF)
{
    cur = fgetc(fp);
    if (cur==' ')
    {           
        data[pid][0]=atoi(s);
        memset(&s[0], 0, sizeof(s));
    }
    else if (cur=='\n')
    {
        data[pid][1]=atoi(s);
        pid++;
        memset(&s[0], 0, sizeof(s));
    }
    else
    {
        temp[0]=cur;
        temp[1]='\0';
        strcat(s,temp);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:40:09.840

***编辑：***

您定义了一个 20,000 的数组并尝试添加 aprox 10,000 paris，它在 80,000 处停止？

猜猜是这样，因为你在循环中没有中断，它读取 10,000，然后读取 EOF 70,000 次 + 对数组做一些奇怪的事情。然后退出。

* * *

您必须与`EOF`某些东西进行比较。

通常：

```
int c; /* Has to be int, not char */

while((c = fgetc(fh)) != EOF) {

   ...
} 
```

* * *

还; 看看来自 stdio.h 的[fscanf](http://www.cplusplus.com/reference/clibrary/cstdio/fscanf/)。也许更适合您的使用。

* * *

同样；`fgetc()`检索*一个*和*一个* 可表示为*char*或 EOF的*int 。*

 *即文件：

```
12 33
16 693 
```

然后 fgetc 将检索：

```
1: '1'
2: '2'
3: ' '
4: '3'
5: '3'
6: '\n'
7: '1'
8: '6'
... 
```

* * *

进一步：检查何时使用功能。如果 fgetc() 返回 EOF，那么您要么处于 EOF，要么***发生***读取错误。检查与feror等。

* * *

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:28:57.840

你写：

```
while (k!=80000) 
```

可能是停在 80.000 的原因

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T16:14:57.253

可以建立和存储数组。但是使用 malloc 确实更有意义。谢谢大家。*

# c# - C# 使用 WebClient 下载分块编码内容

> ID：10006669
> 
> 赞同：7
> 
> 时间：2012-04-04T07:27:11.577
> 
> 标签：c#, chunked-encoding

我编写了一个客户端应用程序，它假设从 Web 服务器下载文件，非常简单：

```
using (WebClient webClient = new WebClient())
{
    webClient.DownloadFile("http://localhost/audiotest/audio.wav", 
                           @"C:\audio.wav");
} 
```

该网站（音频文件所在的位置：[http://localhost/audiotest/audio.wav](http://localhost/audiotest/audio.wav)）具有标头 Transfer-Encoding: chunked

当我运行程序时，我收到以下错误：

> 服务器违反了协议。Section=ResponseBody Detail=响应块格式无效

当服务器包含 Transfer-Encoding: chunked header 时，如何下载文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:05:57.567

我没有尝试过，但这可能有效：

如果您强制发送对 Http 1.0 而不是 Http 1.1 的请求，则服务器将使用指定 Content-Length 的 HTTP Header 进行回复

```
HttpWebRequest wr = (HttpWebRequest)WebRequest.Create("http://localhost/audiotest/audio.wav");
wr.ProtocolVersion = Version.Parse("1.0"); 

HttpWebResponse response = (HttpWebResponse)request.GetResponse(); 
```

您将获得文件作为流`response.GetResponseStream()`

[所有功劳归于](http://blog.degree.no/2011/06/webclient-httpwebresponse-problems-with-chunked-transfer-encoding/)作者

# javascript - $.ajax、$.load、$.getscript 和对象标签的优缺点

> ID：10006676
> 
> 赞同：4
> 
> 时间：2012-04-04T07:27:37.800
> 
> 标签：javascript, html, ajax, jquery, web

我正在使用严格的文档类型，我想在页面中嵌入一个页面，为此我不能使用 iframe，因为文档类型是严格的，所以找到了 4 种方法：

*   `$.ajax()`
*   `.load()`
*   `$.getscript`
*   `<object>`标签

谁能告诉我所有这些方法的利弊..

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T08:00:51.410

好的，我会尝试回答这个问题。

*   [`$.ajax()`](http://api.jquery.com/jQuery.ajax/)是 jQuery 用于 ajax 请求的根方法。它是如此详细，您有很多参数来配置它（大多数情况下，它们都保留为默认值）。这种复杂性导致了易于使用的通用[`$.get()`](http://api.jquery.com/jQuery.get/)和[`$.post()`](http://api.jquery.com/jQuery.post/)速记。[`$.ajax()`](http://api.jquery.com/jQuery.ajax/)如果您想要对 ajax 请求进行细粒度控制以及之后想要对它执行的操作，您可以使用它。

*   [`.load()`](http://api.jquery.com/load/)是[`$.get()`](http://api.jquery.com/jQuery.get/)（它使用 get）的“子函数”，但具有隐式回调（除了可选回调）。它改为加载请求的页面，并将其~~作为转义标记~~放置在它之前的元素中。这对于加载已经格式化为加载到目标容器中的页面很有用。

*   [`.getScript()`](http://api.jquery.com/jQuery.getScript/)并不意味着加载页面。它是检索脚本并在页面上执行它们。

*   [`<object>`](http://reference.sitepoint.com/html/object)然而标签...

    > 对象元素的目的是将各种不同类型的媒体文件嵌入到文档中。**从历史上看，它主要用于将 ActiveX 控件放置到页面上**，但它*也可用于嵌入图像（.gif、.jpg 等）、电影文件和小程序、视频文件、PDF 文档、Flash*甚至HTML。

    虽然它可以呈现 HTML，但这并不是它的初衷。它适用于*其他*媒体。

* * *

就个人而言，我选择[$.ajax()](http://api.jquery.com/jQuery.ajax/)或[`$.get`](http://api.jquery.com/jQuery.get/)返回 JSON 数据和 HTML 模板，然后使用模板引擎来构建页面。这样，JSON 对带宽很轻，并且模板是可缓存的。

# jquery - 如何检查具有相同组名的两个单选按钮

> ID：10006677
> 
> 赞同：0
> 
> 时间：2012-04-04T07:27:38.150
> 
> 标签：jquery, asp.net, html

我有一组单选按钮，我需要检查一个是否已被单击，如果没有，则抛出错误我如何使用 Jquery 验证以下内容？

```
<legend>Follow Opening Script?</legend>
<p>
    <strong><asp:RadioButton GroupName="OpeningScript" CssClass="inline-radio" ID="rdoOpeningScriptYes" runat="server" Text="Yes" TextAlign="Right" /></strong>&nbsp;&nbsp;
    <strong><asp:RadioButton GroupName="OpeningScript" CssClass="inline-radio" ID="rdoOpeningScriptNo" runat="server" Text="No" TextAlign="Right" /></strong>
</p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T09:20:30.430

在文档准备就绪时注册事件：

```
$('input[name="OpeningScript"]').click(function () {
    alert($(this).val());
}); 
```

更改索引以获取特定项目的状态：

```
$("input[name*=OpeningScript]")[0].checked 
```

要获取文本，请尝试：

```
$("input[name*=OpeningScript]:checked + label").text(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T09:26:02.403

`**[Working FIDDLE Demo](http://jsfiddle.net/mojtaba/sHXMy/)**`

`button`在您的 HTML 中添加一个：

```
<input type="button" id="check" value="check" /> 
```

并编写一个函数供其`click`检查：

```
$(function () {
    $('#check').on('click', function () {
        if (! $('[name="OpeningScript"]:checked').length) {
            alert('Please choose an option');
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:39:25.880

这里有一个 jsfiddle 示例：http: [//jsfiddle.net/xYLxX/](http://jsfiddle.net/xYLxX/)

# php - 开发“墙”功能，用户可以与他们的朋友分享网站内容

> ID：10006685
> 
> 赞同：0
> 
> 时间：2012-04-04T07:28:05.427
> 
> 标签：php, networking, feed, social

我已经看到这个问题被问了十亿次，但我的项目需要一点额外的调味料。我正在尝试创建一个图像上传网络应用程序，用户可以在其中将他们的图像上传到库，并且我希望该库可供网站上的每个人使用。

此外，我希望网站上的任何人都能够将他们看到和喜欢的任何图片“推送”到像 Facebook 墙这样的 FEED 上，在那里他们所有的朋友（或一些可排序的）都可以看到他们“推送”到的图片喂养; 有点像向你的人群宣传你喜欢的东西……这个提要需要每 20 秒更新一次。

我目前远远落后于我所问的问题。我刚刚完成了用户登录和基本布局。我需要一些指导，以便在我进一步行动之前清楚地了解我正在从事的工作。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:14:35.987

我可以告诉你如何构建它，但我不能为你构建它。

您需要一个数据库，您可以在其中拥有一个“用户”表。然后你需要一个“friends”表和一个“images”表。在 users 表中，您记录了应用程序的用户：id、登录名、密码和名称。在friends 表上，您存储一个id 的朋友（其他用户）列表。在图像表上，您记录图像的路径。CRUD 模型..

你没有推动任何东西。文某用户上传了一张图片，被记录在了数据库中。下次他的一个朋友刷新页面时，一个 SQL 查询将获取他所有朋友的图像，并呈现正确的 html 代码。所以图像会自动显示在那里。

# php - 使用AJAX显示php生成的图片

> ID：10006686
> 
> 赞同：1
> 
> 时间：2012-04-04T07:28:05.753
> 
> 标签：php, jquery, ajax

我有一个随机生成图像的 php 脚本。像这样的东西：

```
<?php
$image = imagecreatetruecolor(400,200);

// process image

// rendering image
header("Content-type: image/jpeg");
imagejpeg($image);
?> 
```

我的 html 看起来像这样：

```
<img id="image" src="/models/plugins/image.php"/>
<button id="button">Get new image</button></body> 
```

然后我有一个处理单击按钮的 jquery 文件，以便在单击按钮时加载新的随机图像：

```
$(function(){
    $('#button').click(function(){
        $.ajax({
            url: 'models/plugins/image.php',
            success: function(data){
                $('#image').html('<img src="' + data + '">')
            }
        })
    })
}) 
```

我使用firebug，我可以看到请求实际上已经发送并且响应成功接收，但是图像没有改变。

我做错了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T07:45:37.450

我添加了另一个答案，因为我认为以前的答案都没有解决问题。我认为，OP 唯一想要的就是在单击按钮时更新（！）图像。所以不需要 Ajax 请求，只需重新加载图像。您可以通过将随机查询字符串附加到图像的 src 属性来强制执行此操作。

```
$('#button').click(function() {
    var $image = $('#image');
    var plainSrc = $image.attr('src').split("?")[0];  // disregard previous query string
    $image.attr('src', plainSrc + "?" + (new Date().getTime()));
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T07:32:46.567

图像标签的`src`属性实际上需要一个 URL，而不是实际的 JPEG 数据。

尝试这个：

```
 $(function(){
      $('#button').click(function(){
          $('#image').attr('src', 'models/plugins/image.php?rand=' + Math.floor(Math.random()*1000) );
      });
 }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:35:02.927

要在`src`属性中使用图像，您需要提供有效的 URI，例如[data-URI](http://en.wikipedia.org/wiki/Data_URI_scheme)：

```
<?php
$image = imagecreatetruecolor(400,200);

// process image

// create image URI
ob_start();
imagejpeg($image);
echo "data:image/jpeg;base64,", base64_encode(ob_get_clean());
?> 
```

我曾经为类似的问题编写 [了更详细的答案。](https://stackoverflow.com/a/8645783/367456)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T07:35:33.113

生成的图像必须经过 base64 编码才能像这样包含在内。

因此，您需要执行以下操作：

*   编辑图像
*   获取数据字符串中的结果图像。
*   要获取图像字符串，您可以将其存储到文件系统并通过 file_get_contents() 读取它（对缓存有用），或者使用不带位置的 imagejpeg() 将图像放置在输出缓冲区中。要从输出缓冲区获取值，请使用 ob_start() 和 ob_get_contents()。
*   将图像的数据字符串转换为base64（使用base64_encode()）
*   将此字符串返回给浏​​览器
*   将图像“src”字段设置为“data:image/png;base64,[BASE64]”，其中 [BASE64] 是 PHP 返回的字符串。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-04T07:35:50.867

您正在调用的图像正在被浏览器缓存，在您的图像 url 末尾使用查询字符串让浏览器将其视为新图像，并且不应使用缓存版本。

像这样的东西：

```
$(function(){
    $('#button').click(function(){
        $.ajax({
            url: 'models/plugins/image.php?t='+((new Date).getTime()),
            success: function(data){
                $('#image').html('<img src="' + data + '">')
            }
        })
    })
}) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-04T07:37:10.483

而不是`$('#image').html('<img src="' + data + '">')`，尝试`$('#image').attr('src', data);`

# javascript - 读取文件的javascript停止setTimeout函数

> ID：10006687
> 
> 赞同：0
> 
> 时间：2012-04-04T07:28:05.957
> 
> 标签：javascript, settimeout

在我的代码中，我有一个奇怪的问题。我有这个基本代码，它可以工作并给我我所期望的：

```
<script type="text/javascript">
    setTimeout(function () { myfunc('0', '0'); }, 1000);
</script> 
```

我正在尝试使用变量而不是'0''0'，我从文本文件中读取这些变量，然后我相应地修改了脚本，但是在日志控制台中我看到 setTimeout 不再像以前那样被调用..任何想法？

```
<script type="text/javascript">

    file = fopen(getScriptPath("myfile"), 0);

    if (file != -1) {
        file_length = flength(file);
        content = fread(file, file_length);

        fileLines = content.split("\n");
        lines = fileLines.length;

        // I skip the header lines (1 and 2)
        for (i = 2; i <= lines; i++) {
            chn = fileLines[i].split("_");
            values = fileLines[i].split(" ");

            if (values[3] == 1) {
                if (chn[1] == "t1") {
                    var1 = values[1];
                    var2 = values[2];
                    setTimeout(function () { myfunc(var1, var2); }, 1000);
                }
            }
        }
    }
    fclose(file);
    // Even if I put the function here it is not called unless I comment all the rest!
    //setTimeout(function() {myfunc(var1,var2);}, 1000);
</script> 
```

myfile 具有这种结构：

```
header1
header2
text_t1 0 0 1
text_t2 0 1 1
text_t3 0 2 1 
```

# javascript - 为整个网站使用 Lightbox

> ID：10006694
> 
> 赞同：2
> 
> 时间：2012-04-04T07:28:39.300
> 
> 标签：javascript, jquery, css, prototypejs, lightbox

我想知道在整个网站上使用 Lightbox 是否是一个聪明的主意。

我们正在开发一个电子商务网站，其想法是让用户始终在主页上，并以 Lightbox 的方式显示所有内容（产品页面、关于我们等）。

我知道要使用 Lightbox，您需要大多数浏览器都广泛支持的 Prototype/JavaScript，我也知道移动设备上的 Ligthbox 并不是很有趣，但无论如何我们都会创建一个移动版本，一些问题：

1.  你认为灯箱可能会很重吗？它会降低网站性能吗？

2.  你认为会有很大的兼容性问题吗？

任何其他想法为什么这不是一个好主意？再次强调，主要思想是让用户在可以浏览“不太重要”的同时保持在主页上。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T07:54:02.600

我认为出于多种原因大量使用灯箱来显示相关内容并不是一个好主意

1.  **可访问性**：您不能仅依靠 javascript 来访问信息，因此您需要付出更多的努力来开发渐进式增强功能。如果我通过浏览器历史浏览产品怎么办？
2.  **SEO**：你有没有想过如何让你的产品被搜索引擎检索到？要使动态内容可索引，您将需要更多额外的努力。还要考虑因页面上的隐藏内容而受到处罚的可能性。
3.  **可用性**：您将如何处理多种设备和屏幕分辨率？如果您在灯箱中展示图像产品，然后您的客户要求也在灯箱中显示缩放图像怎么办？你会打开嵌套灯箱吗？
4.  **社交网络**：“like”和“+1”是几乎所有现代电子商务中的常用功能：但这些操作只能在单个 URL 上执行，因此如果您的产品未关联到特定 url（1 对 1 关系) 您将无法共享特定项目。

因此，最好避免所有这些并发症
使用灯箱代替灯箱来发出警报，显示模式窗口并告诉用户某些服务器操作的结果（*例如登录/注销消息*，*在结账时提醒物品的库存结束*...... ) 并且，一般来说，最好不要完全改变或破坏导航流程（*例如注册、结帐*……），但绝对避免在灯箱中组织整个网站。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:47:32.483

如果您正在开发电子商务网站，那么使用灯箱样式的 ajax 加载所有页面不是一个好主意，因为这样**搜索引擎将无法索引您的产品并在搜索结果中显示给人们**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:53:55.210

过去，我使用[Fancybox](http://fancybox.net/)而不是 Lightbox，主要是因为我发现它更灵活地满足我的需求。

我也使用带有嵌入式弹出窗口的 F​​ancybox 创建了一个在线商店，以便为用户提供有关弹出窗口的更多信息。

我想说的是，为了确保页面性能不受阻碍，不要通过页面上的隐藏 div 呈现 Fancybox 弹出窗口。如果隐藏的 div 包含大量的图像和内容，这将导致一些开销。

我使用 Fancybox 的方式是加载一个外部页面作为其内容源：

```
$("#product-info").fancybox({
    titleShow     : false,
    width:    500,
    height:   600,
    autoDimensions: false,
    overlayOpacity: 0.6,
    href: 'product-info.aspx?ID=9' // External page source
}); 
```

我认为请谨慎使用 Fancybox/灯箱。只添加基本的产品内容。保留产品页面本身的详细信息。这将有助于谷歌搜索（正如其他人评论的那样）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-22T20:58:12.320

我同意 F.Calderan 的所有观点，也许最后一点除外。我认为在许多服装网站上看到的“快速查看”中都有一个常见的用例，可以为您工作。它提供了与您描述的体验类似的体验，但并没有取代拥有多个页面的所有好处。

参见[老海军](http://oldnavy.gap.com/browse/category.do?cid=65116&mlink=48896,5039064,DP_Major_M_Tall_tall-activewear&clink=5039064)的例子。

# android - Android：是否可以仅针对联系人同步阻止谷歌同步服务？

> ID：10006696
> 
> 赞同：1
> 
> 时间：2012-04-04T07:28:57.650
> 
> 标签：android

我听说 Google 读取了我的联系人列表并将它们与 android.process.contacts 同步。我怎样才能阻止它，这种阻止有什么缺点？我想对 gmail 仅使用同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:27:03.410

这里是：

```
I've managed to do it pretty much by doing the following (as mentioned above):
1) Backup as much as possible
2) Factory Reset (to clear association with Google account)
3) Set up phone with a dummy google account by doing Create rather than sign in (leave this Google account with no contacts/calendar etc).
4) Go to the calendar and then Menu -> More -> Calendars -> Menu and remove the Google calendar (I just use the PC sync one).
5) Market will require a Google account so you can create the dummy account through there if you haven't already.
6) Go to GoogleMail application and then Menu -> Accounts -> Add account and then sign in with your main account.
There it will then ask if you want to sync mail and contacts (gives you the option!!) and just sync mail.
7) You can then select that account and GMail will always go to that account but contacts/calendar are still linked in with the dummy account.
8) Go to Maps and then Menu -> More -> Switch Account and go to your other GMail account to get any stored starred places from that account.
9) You can then go into Settings -> Accounts and Sync and turn off sync for the dummy account if preferred. 
```

我发现，如果您清除应用程序中的联系人存储，它将从辅助帐户中吸收所有联系人。在这种情况下，您需要再次从帐户中删除该帐户，然后将其同步并重新添加到 Google Mail 应用程序中。

希望这对其他可能想要这样做的人有所帮助......

# c - 定义枚举类型是否具有沉重的记忆印记？

> ID：10006700
> 
> 赞同：2
> 
> 时间：2012-04-04T07:29:08.883
> 
> 标签：c, enums, embedded, arm, iar

我正在使用具有 32K 内存的嵌入式设备，使用 IAR EWARM v6.30 以纯 C 语言编写。

为了使代码更具可读性，我想定义一些枚举类型，例如，类似

```
{RIGHT_BUTTON, CENTER_BUTTON, LEFT_BUTTON} 
```

而不是使用 0、1、2 值，但恐怕它会占用已经稀缺的额外内存。

所以我有两个问题：1）我可以强制枚举为短或字节类型而不是 int 吗？2）定义枚举类型的确切内存印记是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T16:16:56.710

在完全兼容的 ISO C 中，枚举常量的大小和类型是`signed int`. 一些嵌入式系统编译器故意不将其作为优化或扩展来遵守。

在 ISO C++ 中“*枚举的底层类型是一个整数类型，它可以表示枚举中定义的所有枚举值。* ”，因此编译器可以自由使用最小的可能类型，并且大多数都这样做，但没有义务这样做所以。

在您的情况下（IAR EWARM），手册明确指出：

![在此处输入图像描述](../Images/f978b49d6998556e835f67d60b071516.png)

不需要任何选项，实际上您需要使用它`--enum_is_int`来强制遵守行为。其他编译器可能表现不同或具有不同的扩展、编译指示或选项来控制它。这些东西通常会在文档中定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T11:14:25.717

如果您确实需要将数据大小保持在 a，`char`那么您始终可以使用一组`#define`常量值来表示`enum`状态，并且只在您的作业和测试中使用这些值。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T22:14:19.647

对于符合标准的编译器，枚举常量始终是类型`int`（等效地，`signed int`）。但是这样的常量通常不会存储在内存中，因此它们的类型可能不会对内存需求产生太大影响。

枚举类型的声明对象是枚举类型本身，它`char`与某些有符号或无符号整数类型兼容或兼容。类型的选择是实现定义的（即编译器可以选择，但它必须记录它是如何做出选择的）；唯一的要求是该类型必须能够存储所有常量的值。

常量是类型而不是枚举类型，这确实很奇怪`int`，但这就是语言的定义方式（原因是历史原因，C++ 有不同的规则）。

例如，给定：

```
enum foo { x, y, z };
enum foo obj;
obj = z; 
```

表达式`z`是类型`int`的，值为 2（就像十进制常量一样`2`），但对象`obj`是类型的`enum foo`，可能小到一个字节，具体取决于编译器。赋值`obj = z;`涉及从`int`to的隐式转换`enum foo`（该转换可能需要也可能不需要额外的代码）。

一些编译器可能会提供一些非标准的方式来指定要为枚举类型选择的类型。有些甚至可能以某种方式违反标准。查阅编译器的文档，打印出 的值`sizeof (enum foo)`，并在必要时检查生成的代码。

您的编译器很可能会在语言强加的约束范围内做出合理的决定。对于针对内存不足的嵌入式系统的编译器，编译器特别有可能会选择一种小类型，或者让您指定一个。查阅编译器的文档。

正如伊恩的回答所暗示的，如果你想自己控制内存使用，你可以使用`char`或`unsigned char`对象。不过，您仍然可以使用`enum`定义来定义常量。例如：

```
enum { x, y, z }; // No tag, so you can't declare objects of this type
typedef unsigned char foo; // an enum_foo object is guaranteed to be 1 byte
foo obj = z; 
```

[参考： C 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)的第 6.7.2.2 节。该链接指向 2011 ISO C 标准最新草案的 1.7 兆字节 PDF；自 1989 年以来，这一特定部分没有发生重大变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T07:34:42.073

ANSI C 编译器将始终将枚举表示为`int`以表示类型的变量`enum`。

[http://en.wikipedia.org/wiki/Enumerated_type#C_and_syntactically_similar_languages](http://en.wikipedia.org/wiki/Enumerated_type#C_and_syntactically_similar_languages)

在程序中使用 s 的一种选择`int`是使用它们来定义值，但`char`在实际使用时转换为

```
char value = (char)Buttons.RIGHT_BUTTON; 
```

# c - XML 验证器（检查给定的 xml 是否正确或损坏）

> ID：10006706
> 
> 赞同：0
> 
> 时间：2012-04-04T07:29:21.217
> 
> 标签：c, libxml2

我使用了 libxml2。在这里，当我将 XML 数据作为字符串获取时，我无法检查它是有效的 xml 还是损坏的 xml。所以任何人都可以让我知道如何使用 libxml2 检查 c 中 xml 的验证或者可以提出更多检查验证的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:32:48.997

您是否尝试过[W3C 验证器](http://validator.w3.org/)？

# c# - 使用 C# 从 facebook 获取 FB Page 数据

> ID：10006708
> 
> 赞同：3
> 
> 时间：2012-04-04T07:29:31.670
> 
> 标签：c#, facebook, api, facebook-graph-api, facebook-c#-sdk

在我的桌面应用程序中，我想阅读特定**Facebook 页面** *（不是 Facebook 用户）的 Wall 帖子、消息、喜欢计数等*

我通过这篇文章[获取用户数据（在 stackoverflow 上）](https://stackoverflow.com/questions/9973176/getting-my-own-data-from-facebook-using-c-sharp-without-an-application)。我想实现同样的目标，但对于 FB 页面。

我准备创建一个 facebook 应用程序来实现这一点，并让用户授予提取数据的权限。

请就上述情况提出建议。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-04T07:58:22.533

您需要访问令牌才能从 Facebook 获取页面数据。首先使用以下 URL 和您的 facebook 应用程序参数获取访问令牌：

`https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={yourappid}&client_secret={yourappscret}`

然后您可以使用返回令牌调用 Facebook Graph API

一般的：`https://graph.facebook.com/wikipedia?access_token={token}`

帖子：`https://graph.facebook.com/wikipedia/posts?access_token={token}`

一个示例代码是；

```
class Program
{
    static void Main(string[] args)
    {
        var client = new WebClient();

        string oauthUrl = string.Format("https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={0}&client_secret={1}", "appid", "appsecret");

        string accessToken = client.DownloadString(oauthUrl).Split('=')[1];

        string pageInfo = client.DownloadString(string.Format("https://graph.facebook.com/wikipedia?access_token={0} ", accessToken));
        string pagePosts = client.DownloadString(string.Format("https://graph.facebook.com/wikipedia/posts?access_token={0} ", accessToken));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-09-09T08:16:53.350

经过研究，我开发了这段代码

```
 class Posts
{
    public string PostId { get; set; }
    public string PostStory { get; set; }
    public string PostMessage { get; set; }
    public string PostPictureUri { get; set; }
    public Image PostImage { get; set; }
    public string UserId { get; set; }
    public string UserName { get; set; }

}

    private List<Posts> getFBPosts()
{
     //Facebook.FacebookClient myfacebook = new Facebook.FacebookClient();
     string AppId = "--------";
     string AppSecret = "----------";
    var client = new WebClient();

    string oauthUrl = string.Format("https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={0}&client_secret={1}", AppId, AppSecret);

    string accessToken = client.DownloadString(oauthUrl).Split('=')[1];

     FacebookClient myfbclient = new FacebookClient(accessToken);
   string versio= myfbclient.Version;
   var parameters = new Dictionary<string, object>();
   parameters["fields"] = "id,message,picture";
   string myPage="fanPage"; // put your page name
    dynamic result = myfbclient.Get(myPage +"/posts", parameters);

    List<Posts> postsList = new List<Posts>();
    int mycount=result.data.Count;

    for (int i = 0; i < result.data.Count; i++)
    {
        Posts posts = new Posts();

        posts.PostId = result.data[i].id;
        posts.PostPictureUri = result.data[i].picture;
        posts.PostMessage= result.data[i].message;

         var request = WebRequest.Create(posts.PostPictureUri);
        using (var response = request.GetResponse())
        using (var stream = response.GetResponseStream())
        {
                         posts.PostImage  = Bitmap.FromStream(stream);
        }
          postsList.Add(posts);
    }
    return postsList;

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-02-14T17:25:51.860

您还可以使用名为[Facebook](https://www.nuget.org/packages/Facebook)的 Nuget 包从 Facebook 图表中获取数据。此外，[Json.NET](https://www.nuget.org/packages/newtonsoft.json/)可以帮助您将数据直接映射到对象中：

```
public class FacebookPageInfo
{
    public long Id { get; set; }
    public string Name { get; set; }
}

public class FacebookPost
{
    public string Message { get; set; }
    // ReSharper disable once InconsistentNaming
    public string Created_Time { get; set; }
    public string Id { get; set; }
}

public class FacebookPagingInfo
{
    public string Previous { get; set; }
    public string Next { get; set; }
}

public class FacebookPostData
{
    public List<FacebookPost> Data { get; set; }
    public FacebookPagingInfo Paging { get; set; }
}

public class Friend
{
    public string Id { get; set; }
    public string Name { get; set; }
}

// get access token
string oauthUrl = $"https://graph.facebook.com/oauth/access_token?type=client_cred&client_id={appId}&client_secret={appSecret}";
string accessToken = client.DownloadString(oauthUrl).Split('=')[1];

// get data and deserialize it
var fbClient = new FacebookClient(accessToken);
var fbData = fbClient.Get("/wikipedia/").ToString();
var info = JsonConvert.DeserializeObject<FacebookPageInfo>(fbData);
fbData = fbClient.Get("/wikipedia/posts").ToString();
var posts = JsonConvert.DeserializeObject<FacebookPostData>(fbData); 
```

# c++ - Eclipse C++ 项目未构建：构造函数析构函数问题

> ID：10006711
> 
> 赞同：2
> 
> 时间：2012-04-04T07:29:46.850
> 
> 标签：c++, constructor, eclipse-cdt, vtable

我在头文件中有所有类定义：ModelModule.h。我在下面提供了该文件的示例代码，其中我给出了 2 个类及其成员函数的声明：

```
#pragma once

#if !defined( MODELMODULE_H )
#define MODELMODULE_H

//Required header files

class CModelModule;
class COrdProbitMM;

class CModelModule
// virtual base class for all types of modeling modules
{
    friend class CSimCoordinator;
    friend class CHouseholdCoordinator;
    friend class CGenericHousehold;

    public:
        CModelModule(void);
        ~CModelModule(void);

    protected:
        std::string         m_Label;        
        std::vector<int>        m_AvailEndAttr;     
        void GetVarValues(std::vector<int>&, std::vector<double> &);

    public:

        virtual void    Configure(void){};
        virtual void loadXmlString(xmlNodePtr pXmlNode, xmlDocPtr pXmlDoc, xmlChar * con);
        virtual void    SaveXml(std::ofstream& fout){};

        double mrand(void); 
        double UniformRand ();          // returns a U[0,1] random number 
        double StdNormalRand ();        // returns a N(0,1) random number
};

class COrdProbitMM : public CModelModule
// Class represent the ordered-probit models
{
    friend class CSimCoordinator;
    friend class CHouseholdCoordinator;
    friend class CMMRunner;

    public:
        COrdProbitMM(CSimCoordinator& simcord, std::string& sLabel);
        COrdProbitMM(CSimCoordinator& simcord, std::string& sLabel, int nAlts);
        ~COrdProbitMM(void);

    private: 

        int             m_Max_nAlts;    
        std::vector<double>     m_Thresholds;   

    public:
        void    Configure(void);
        void    copyConfigure(COrdProbitMM* that);

        int  Run(CHouseholdObject*);
        int  Run(CPersonObject*);

        void loadXmlString(xmlNodePtr pConfNode,  xmlDocPtr pXmlDoc, xmlChar* con);

    private:
        int     Run(void);
}; 
```

现在函数定义已在 .cpp 文件中给出：ModelModule.cpp。注：头文件已包含

```
#include "ModelModule.h"
//Other header files

//Code for all the other functions defined here

//Given below are the code for how the constructors and destructors are defined

COrdProbitMM::~COrdProbitMM(void)
{
}

CModelModule::CModelModule(void)
{
}

CModelModule::~CModelModule(void)
{   
} 
```

我已经消除了任何语法错误的代码。但是，当我构建代码时，我得到了错误：*** [ProjectName] Error1。在检查控制台时，我发现显示以下内容：

```
Building target: Project Name
Invoking: GCC C++ Linker
g++  -o "XYZ"  ./src/XYZ.o ./src/DataCache\ -\ Copy.o ./src/DataCache.o ./src/DataCoordinator.o ./src/DataObject.o ./src/HouseholdCoordinator.o ./src/
LinearEquation.o ./src/MMRunner.o ./src/MainFrm.o ./src/ModelModule.o ./src/SimCoordinator.o ./src/main.o   -lxml2 -lsqlite3

./src/ModelModule.o: In function `CModelModule::CModelModule()':
ModelModule.cpp:(.text._ZN12CModelModuleC2Ev[CModelModule::CModelModule()]+0xd): undefined reference to `vtable for CModelModule'
./src/ModelModule.o: In function `CModelModule::~CModelModule()':
ModelModule.cpp:(.text._ZN12CModelModuleD2Ev[CModelModule::~CModelModule()]+0xd): undefined reference to `vtable for CModelModule'

./src/ModelModule.o:(.rodata._ZTI12COrdProbitMM[typeinfo for COrdProbitMM]+0x8): undefined reference to `typeinfo for CModelModule'

collect2: ld returned 1 exit status
make: *** [Project Name] Error 1

**** Build Finished **** 
```

我查看了这个论坛的 vtable 错误，并提到问题是当我们声明构造函数/析构函数但从未定义它时。但在这种情况下，这似乎不是问题，因为它在 ModelModule.cpp 中明确完成。这里似乎有一些非常基本的事情正在引起我的注意。

*   我错过了什么？
*   你能告诉我虚函数是什么以及它是如何导致错误发生的吗？
*   它是否以某种方式与构造函数和析构函数联系起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:31:04.530

**根本原因：**
您收到错误是因为 C++ 标准要求除纯虚方法之外的类的**所有虚方法都****必须**有定义^([#1])。

**解决方案：**
要么为所有方法提供定义，`virtual`要么使它们成为 pure `virtual`。

**解释：**
gcc 在这种情况下产生的错误充其量是误导。这是一个[**示例程序**](http://www.ideone.com/q1OZO)，它演示了您遇到的问题：

```
class MyClass
{
    public:
    virtual void doSomething() { }
    virtual void doSomethingMore();
};

int main()
{
    MyClass obj;
    obj.doSomething();
    obj.doSomethingMore();
    return 0;
} 
```

编译信息：

> /home/4VqWl0/ccMjLi2V.o：在MyClass 的函数 vtable MyClass::doSomethingMore()' collect2：ld 返回 1 个退出状态 `main':
> prog.cpp:(.text+0x19): undefined reference to``.
> prog.cpp:(.text+0x1e): undefined reference to`

如您所见，GCC 在报告此类特定问题的错误方面是臭名昭著的。

**它是否以某种方式与构造函数和析构函数联系起来？**

**[gcc faq](http://gcc.gnu.org/faq.html#vtables)**也记录了它：

> ISO C++ 标准规定必须定义一个类的所有非纯虚方法，但不需要对违反此规则的任何诊断`[class.virtual]/8`。基于此假设，GCC 将仅在定义其第一个此类非内联方法的翻译单元中发出隐式定义的构造函数、赋值运算符、析构函数和类的虚拟表。
> 
> **因此，如果您未能定义此特定方法，链接器可能会抱怨缺少明显不相关符号的定义**。不幸的是，为了改善此错误消息，可能需要更改链接器，但并非总是如此。
> 
> 解决方案是确保定义了所有不纯的虚拟方法。请注意，即使声明为 pure-virtual ，也必须定义析构函数`[class.dtor]/7`。

好读：

**[“虚拟表”是未解决的外部是什么意思？](http://www.parashift.com/c++-faq-lite/strange-inheritance.html#faq-23.10)**

* * *

^([#1]) **C++03 标准：10.3 虚函数 [class.virtual]**

> 在类中声明的虚函数应在该类中定义或声明为纯（10.4），或两者兼而有之；但不需要诊断（3.2）。

# c++ - 在工具栏上过度绘制？另类的想法？

> ID：10006720
> 
> 赞同：0
> 
> 时间：2012-04-04T07:30:12.163
> 
> 标签：c++, c, wxwidgets, win32gui

主要目的是希望在应用程序工具栏的绘图区域内绘制选项卡，以便笔记本或选项卡使用上述空间而不是在工具栏下方。

我们使用的框架是 WxWidgets、C++/C。我环顾四周，但未能找到解决方案，或者是否有人对工具栏本身内部的绘图选项卡进行了类似的处理。

我阅读了一些 Microsoft MSDN 文章，他们建议不要将控件绘制在控件之上。

我今天做了一些测试，并认为我想出了一个解决方案。我的解决方案是像正常一样绘制窗口，但在子窗口的右侧放置 NoteBook，该子窗口会动态调整大小和重新定位，以便它的选项卡覆盖在工具栏的顶部，以最有效地利用该区域。我将不得不处理焦点和失去焦点窗口消息，但这是我能想到的完成任务的最优雅的方式。

您可以推荐的任何想法或我在遵循这种方法时可能遇到的问题。

![小样](../Images/9d3fdf1093adb6a15a27064f4b1e1db0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:29:59.933

我会担心使用这样的重叠小部件。虽然它在视觉上可能看起来不太一样，但我建议查看[wxToolBook](http://docs.wxwidgets.org/trunk/classwx_toolbook.html)它将选项卡放在工具栏中并可以解决您的问题，您可以使用该`GetToolBar`方法插入您自己的工具栏项目。

如果这在视觉上与您想要实现的目标不够接近，我建议从[wxBookCtrlBase](http://docs.wxwidgets.org/trunk/classwx_book_ctrl_base.html)派生一个新控件，然后创建一个带有自定义绘制选项卡的选项卡控件，您可以使用[wxToolBar::AddControl](http://docs.wxwidgets.org/trunk/classwx_tool_bar.html#aec263a8e47372eb78e91b8db8797731d)添加到工具栏。

# c# - Web应用程序和网站中的app_data文件夹有什么区别？

> ID：10006722
> 
> 赞同：3
> 
> 时间：2012-04-04T07:30:23.460
> 
> 标签：c#, asp.net, .net, security, web

**我想问一下Web 应用程序**中的文件夹和网站中**的**`app_data`文件夹有什么区别。

 ****我想确保此文件夹在 Web 应用程序中是安全的，因为我将特定文件放在此文件夹中，只有特定用户才能下载它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:33:19.480

ASP.NET 使用 App_Data 文件夹来存储应用程序的本地数据库，例如用于维护成员资格和角色信息的数据库。使用 Web 应用程序或网站的 app_data 文件夹之间没有区别。

资料来源：

[http://msdn.microsoft.com/en-us/library/ex526337.aspx](http://msdn.microsoft.com/en-us/library/ex526337.aspx)

[http://msdn.microsoft.com/en-us/library/dd547590.aspx](http://msdn.microsoft.com/en-us/library/dd547590.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:45:43.990

正如达伦回答的那样，没有区别。

但另一方面，将它用作安全存储位置，它受到 ASP.NET 的保护，就像 bin 文件夹一样，用户无法浏览到它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T15:49:29.523

## 下载前检查用户是否有效的预防措施

1.  不要`Directory Browsing`在`IIS`.

2.  基本上有一种方法可以让`Anonymous/Unauthorized`用户访问/下载您的`Authorized File`. **示例**- 您知道`Query String`值和其他用户可以键入和下载它。因此，有两种方法可以防止未经授权的用户下载文件。

    (a) 将 保存`Web.Config`在此文件夹中并定义`Roles/Users`可以访问它的人。

    (b) 在 中`Page Load`，您可以检查正在打开的页面是由`Authorized user`唯一的。

* * *

`App_Data`两种类型的文件夹都是相同`Web Application`的`Web Site`。****

# sunspot-rails - SunSpot solr 中的延迟索引仍然在记录保存时发出删除请求

> ID：10006726
> 
> 赞同：0
> 
> 时间：2012-04-04T07:30:39.170
> 
> 标签：sunspot-rails, websolr

延迟的索引工作正常，但记录保存它会向 websolr 发送一些删除请求...在日志中显示

SOLR 请求 (14.3ms) [ path=# parameters={data: Message 547488, headers: {"Content-Type"=>"text/xml"}, method: post, params: {:wt=>:ruby},查询：wt=ruby，路径：更新，uri：[http](http://index.websolr.com/solr/index/update?wt=ruby) ://index.websolr.com/solr/index/update?wt=ruby ，open_timeout：，read_timeout：}]

SOLR 请求（12.4 毫秒）[路径=# 参数={数据：消息 547488，标题：{“Content-Type”=>“text/xml”}，方法：发布，参数：{：wt=>：ruby}，查询：wt=ruby，路径：更新，uri：[http](http://index.websolr.com/solr/index/update?wt=ruby) ://index.websolr.com/solr/index/update?wt=ruby ，open_timeout：，read_timeout：}]

SOLR 请求 (9.7ms) [ path=# parameters={data: , headers: {"Content-Type"=>"text/xml"}, method: post, params: {:wt=>:ruby}, query: wt=ruby，路径：更新，uri：[http](http://index.websolr.com/solr/index/update?wt=ruby) ://index.websolr.com/solr/index/update?wt=ruby， open_timeout：，read_timeout：}]

这些是针对单个消息创建提出的 3 个请求。

这是我的搜索块

```
searchable :if => proc { |message| !message.user_messages.blank? } do

text :message_body do
  CGI.escape(self.body || "")
end
text :subject do
  CGI.escape(self.subject || "")
end

text :sender_name do
  user.blank? ? "" : user.full_name 
end

integer :users_ids, :multiple => true do
  user_messages.map{|um| um.user_id}
end
time :created_at
end handle_asynchronously :solr_index 
```

请尽快查看，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T18:27:12.963

要使用 DelayedJob 对 Sunspot 删除进行排队，您还应该添加以下行：

```
handle_asynchronously :remove_from_index 
```

# php - Smarty静态路径？

> ID：10006731
> 
> 赞同：0
> 
> 时间：2012-04-04T07:30:55.737
> 
> 标签：php, smarty

Smarty中如何指定静态内容？我有许多 zip 附件供用户下载。如何在 Smarty 中指定文件路径？

`DOMAIN_NAME/static/x.zip`或者 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T09:08:39.443

如果您的 webapp 在[http://example.com](http://example.com)上可用，并且您的 zip 文件存储在该`static`文件夹中，在您的 webapp 根目录的同一级别，那么只需：

```
<h1>Downloads</h1>
{foreach $zips as $zip}
    <a href="/static/{$zip}">{$zip}</a>
{/foreach} 
```

如果 zip 文件位于 Web 根目录之外，那么您可以将它们移到那里或创建符号链接。

# java - 暂停和恢复翻译动画

> ID：10006736
> 
> 赞同：2
> 
> 时间：2012-04-04T07:31:21.013
> 
> 标签：java, android, android-animation

我正在使用翻译动画来移动`ImageView`. 我正在使用这段代码：

```
TranslateAnimation set1 = new TranslateAnimation(-4, 10, -110, 0);
        set1.setDuration(3000);
        TranslateAnimation set2 = new TranslateAnimation(10, -3, 0, 115);
        set2.setDuration(3000);
        set2.setStartOffset(2200);
        TranslateAnimation set3 = new TranslateAnimation(-3, -20, 0, -100);
        set3.setDuration(3000);
        set3.setStartOffset(4500);
        TranslateAnimation set4 = new TranslateAnimation(0, 13, 0, -120);
        set4.setDuration(3000);
        set4.setStartOffset(6500);

        animSet.addAnimation(set1);
        animSet.addAnimation(set2);
        animSet.addAnimation(set3);
        animSet.addAnimation(set4);

        animSet.setFillAfter(true); 
```

创建一组动画后，我将它们应用于`ImageView`这样的：

```
image = (ImageView)findViewById(R.id.img);
        image.startAnimation(animSet); 
```

一切正常，但**我无法暂停动画并在按钮单击时恢复**。

我怎样才能做到这一点？

我尝试了一切，但没有成功。知道怎么做吗？

请帮忙！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-05T12:26:42.317

在搜索了一段时间后，我找到了这个[链接](https://stackoverflow.com/a/7840895/1250370)并检查这是否适用于翻译动画，经过一些修改后，这也适用于您的动画。！

请参阅下面的修改代码：

```
public class TranslateAnim extends TranslateAnimation{

    public TranslateAnim(float fromXDelta, float toXDelta, float fromYDelta,
            float toYDelta) {
        super(fromXDelta, toXDelta, fromYDelta, toYDelta);
        // TODO Auto-generated constructor stub
    }

    private long mElapsedAtPause=0;
    private boolean mPaused=false;

    @Override
    public boolean getTransformation(long currentTime, Transformation outTransformation) {
        if(mPaused && mElapsedAtPause==0) {
            mElapsedAtPause=currentTime-getStartTime();
        }
        if(mPaused)
            setStartTime(currentTime-mElapsedAtPause);
        return super.getTransformation(currentTime, outTransformation);
    }

    public void pause() {
        mElapsedAtPause=0;
        mPaused=true;
    }

    public void resume() {
        mPaused=false;
    }
} 
```

我只会更改这个类的类名、扩展类名和构造函数。

你可以像这样使用它：

```
TranslateAnim set1, set2, set3, set4; // objects of TranslateAnim Class

set1 = new TranslateAnim(-4, 10, -110, 0); // initialize all objects like this way

animSet.addAnimation(set1); // add all animation objests in your animation set as you do before

animSet.setFillAfter(true); 
```

在开始你的动画之后，你只需要调用 pause 和 resume 方法。感谢 Johan 与我们分享他的代码。

希望这能解决您的问题。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-15T08:28:17.087

你也可以这样做：~~аможноещетак：~~

```
public class MyTranslateAnimation extends TranslateAnimation {

    private long mTimePause, mTimeTotal;
    private boolean mPause;

    public MyTranslateAnimation(Context context, AttributeSet attrs) {

        super(context, attrs);

    }

    @Override
    public boolean getTransformation(long currentTime, Transformation outTransformation) {
        updateTime(currentTime);
        return super.getTransformation(mTimeTotal - mTimePause, outTransformation);
    }

    private void updateTime(long currentTime) {
        long dt = currentTime - mTimeTotal;
        mTimeTotal += dt;
        if (mPause) {
            mTimePause += dt;
        }
    }

    public void pause() {
        mPause = true;
    }

    public void resume() {
        mPause = false;
    }

} 
```

要从 XML 创建动画，您可以创建自己的`AnimationUtils`子类，如下所示：~~для создания анимации из XML можно сделать свой AnimationUtils：~~

```
public class MyAnimationUtils {

    public static Animation loadAnimation(Context context, int id) throws Resources.NotFoundException {

        XmlResourceParser parser = null;
        try {
            parser = context.getResources().getAnimation(id);
            return createAnimationFromXml(context, parser);
        } catch (XmlPullParserException ex) {
            Resources.NotFoundException rnf = new Resources.NotFoundException("Can't load animation resource ID #0x" + Integer.toHexString(id));
            rnf.initCause(ex);
            throw rnf;
        } catch (IOException ex) {
            Resources.NotFoundException rnf = new Resources.NotFoundException("Can't load animation resource ID #0x" + Integer.toHexString(id));
            rnf.initCause(ex);
            throw rnf;
        } finally {
            if (parser != null) parser.close();
        }

    }

    private static Animation createAnimationFromXml(Context c, XmlPullParser parser) throws XmlPullParserException, IOException {

        return createAnimationFromXml(c, parser, null, Xml.asAttributeSet(parser));

    }

    private static Animation createAnimationFromXml(Context c, XmlPullParser parser, AnimationSet parent, AttributeSet attrs) throws XmlPullParserException, IOException {

        Animation anim = null;

        // Make sure we are on a start tag.
        int type;
        int depth = parser.getDepth();

        while (((type=parser.next()) != XmlPullParser.END_TAG || parser.getDepth() > depth)
                && type != XmlPullParser.END_DOCUMENT) {

            if (type != XmlPullParser.START_TAG) {
                continue;
            }

            String  name = parser.getName();

            if (name.equals("set")) {
                anim = new AnimationSet(c, attrs);
                createAnimationFromXml(c, parser, (AnimationSet)anim, attrs);
            } else if (name.equals("alpha")) {
                anim = new AlphaAnimation(c, attrs);
            } else if (name.equals("scale")) {
                anim = new ScaleAnimation(c, attrs);
            }  else if (name.equals("rotate")) {
                anim = new RotateAnimation(c, attrs);
            }  else if (name.equals("translate")) {
                //anim = new TranslateAnimation(c, attrs);
                anim = new MyTranslateAnimation(c, attrs); // отредактировали только эту строчку, остальное взяли как было
            } else {
                throw new RuntimeException("Unknown animation name: " + parser.getName());
            }

            if (parent != null) {
                parent.addAnimation(anim);
            }
        }

        return anim;

    }

} 
```

然后你像这样构建动画：~~и вот так создаем анимацию：~~

```
MyTranslateAnimation cloud1 = (MyTranslateAnimation) MyAnimationUtils.loadAnimation(this, R.anim.main_cloud1); 
```

希望这可以帮助。~~Пользуйтесь наздоровье！~~

# xcode - Xcode 错误：命令 /Developer/usr/bin/clang++ 由于重复符号而失败，退出代码为 1

> ID：10006737
> 
> 赞同：0
> 
> 时间：2012-04-04T07:31:23.980
> 
> 标签：xcode, arrays, duplicate-symbol

我正在尝试用 C++ 编写一个运行康威生命游戏的程序。我想我有我需要的一切，但我在编译时遇到了一些麻烦。

该程序由四个文件组成：`gameoflife.h`头文件，其中包含我的全局常量和函数声明，`gameoflife.cpp`定义函数，`main.cpp`使用函数，以及`seeds.cpp`包含要使用的预定义种子列表。

`main.cpp`当我去编译应用程序时，我似乎在`gameoflife.cpp`一个名为.`currGen``gameoflife.h`

`main.cpp`和`gameoflife.cpp`include ，这`gameoflife.h`当然是必要的，这样他们才能访问全局常量和函数声明。

我收到的确切错误如下：

```
duplicate symbol _currGen in /(same_path)/ConwaysGameOfLife.build/Objects-normal/
x86_64/gameoflife.o and
/(same_path)/ConwaysGameOfLife.build/Objects-normal/x86_64/main.o
for architecture x86_64
Command /Developer/usr/bin/clang++ failed with exit code 1 
```

我在 Stack Overflow 上环顾四周，但没有找到任何符合我的问题的东西。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:38:33.430

您可能正在`currGen`头文件中定义变量，而不仅仅是声明它。

在一个 .cpp 文件中必须有一个定义。.h 文件应该只声明它，使用`extern`.

[这个答案更详细。](https://stackoverflow.com/a/1433387/1218876)

# php - SQL 和 PHP 需要让查询正常工作

> ID：10006739
> 
> 赞同：0
> 
> 时间：2012-04-04T07:31:24.613
> 
> 标签：php, mysql, sql

```
 <?php
// Inialize session
session_start();
// Check, if username session is NOT set then this page will jump to login page
if (!isset($_SESSION['username'])) {
header('Location: index.php');
}
$online = rand(12,200);
if($_GET['pass'] == "changethis"){
?>
<font color="00c000">
<html>
<head>
<title>Premium Girls ~ Logged in</title>
</head>
<body>

<p align="right">Online Users:<?php echo "$online"; ?></p><br>

<body bgcolor="#004000">
<center><img src="/logo.gif"></img>

<p>Welcome to the Admin Panel, <?php echo $_SESSION['username']; ?>.

<br>
<form method="post" action="newuser.php"><br>
<center>Create a new user:<br></center>
Username:<input type="text" name="username"><br>
Password:<input type="password" name="password"><br>
<input type=submit value="Create new user">
</form>
<br><br>
<div id=footer align=center>Please note we are currently under setup.</div>
</body>
</html></font>

<?php
}else{
?>
<font color="00c000">
<html>
<head>
<title>Premium Girls ~ Payment Processor</title>
</head>
<body>

<p align="right">Online Users:<?php echo "$online"; ?></p><br>

<body bgcolor="#004000">
<center><img src="/logo.gif"></img>

<p>Welcome to the Logged in screen, <?php echo $_SESSION['username']; ?>. Below you will see all the payments linked to your model name.</p>

<?php

$con = mysql_connect("localhost","devacc_yourmum","changeme123");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("devacc_models", $con);

$uid = $_SESSION['username'];
$result = mysql_query("SELECT * FROM payments WHERE model = {$_SESSION['username']}");

echo "<table border='1'>
<tr>
<th>Name</th>
<th>Payment ID</th>
<th>Address</th>
<th>Nickname</th>
<th>Email</th>
<th>Skype</th>
<th>CardType</th>
<th>Model Name</th>
<th>Country</th>
</tr>";

while($row = mysql_fetch_array($result))
  {
  echo "<tr>";
  echo "<td>" . $row['Name'] . "</td>";
  echo "<td>" . $row['Payment ID'] . "</td>";
  echo "<td>" . $row['Address'] . "</td>";
  echo "<td>" . $row['Nickname'] . "</td>";
  echo "<td>" . $row['Email'] . "</td>";
  echo "<td>" . $row['Skype'] . "</td>";
  echo "<td>" . $row['cardtype'] . "</td>";
  echo "<td>" . $row['model'] . "</td>";
  echo "<td>" . $row['country'] . "</td>";
  echo "</tr>";
  }
echo "</table>";

mysql_close($con);
?>

<br><br><br><br><br><br>
<div id=footer align=center>Please note we are currently under setup.</div>
</body>
</html></font>

<?php
}
?> 
```

以上是我的代码，不幸的是给了我一个错误。它应该使用模型用户名从数据库中的支付表中提取所有信息，所以如果我使用用户名“Bradandrews4”登录并且有人从我这里购买了一个节目，那`SELECT * FROM payments WHERE model = bradandrews4`将是 bradandrews4 因为那是我登录时使用的用户名。要输出我的用户名，我可以使用 $uid 或 $_SESSION['username'] 但是我不确定如何将其放入查询中，然后将其放入表中。任何帮助将非常感激 ：）

-布拉德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:33:33.697

将您的查询替换为：

```
mysql_query("SELECT * FROM payments WHERE model = '" . mysql_real_escape_string($_SESSION['username']) . "'"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:35:35.733

只需将`''`周围的输入..？

`SELECT * FROM payments WHERE model = '{$_SESSION['username']}'`

将值分配给另一个变量会更容易

`$un = mysql_real_escape_string($_SESSION['username']);` `SELECT * FROM payments WHERE model = '$un'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:56:34.527

写吧

```
$result = mysql_query("SELECT * FROM payments WHERE model ='".$uid."'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-04T00:16:52.847

您可以只使用此查询，因为它更容易记住。

```
mysql_query("SELECT * FROM payments WHERE model = '{$_SESSION['user']}'"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T08:05:52.110

在您的价值观周围使用引号，例如在 snaderss 的答案中。

您的会话验证中存在安全漏洞。

```
if (!isset($_SESSION['username'])) {
    header('Location: index.php');
} 
```

如果某人的浏览器忽略了位置标头，则用户将看到您的优质内容。如果有人通过 curl() 或类似的东西访问您的网站，则相同。

始终使用 exit(); 或者死（）; 重定向后。

固定代码：

```
if (!isset($_SESSION['username'])) {
    header('Location: index.php');
    exit();
} 
```

现在脚本在重定向失败时停止

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-05T18:37:11.547

```
 $sql = "SELECT * FROM cards WHERE model = '".$uid."' "; 
$result = mysql_query($sql); 
```

谢谢大家，上面我发布了我为了让它工作而改变的2行......我相信你们所有的帖子也会解决这个问题，但我最终自己修复了它...... :)

-布拉德

# wcf - WCF 服务 (dll) 主机应用程序

> ID：10006742
> 
> 赞同：1
> 
> 时间：2012-04-04T07:31:40.133
> 
> 标签：wcf, c#-4.0, .net-4.0

我有一个 WFC(4.0) 服务 dll，我必须为其创建一个主机应用程序。该dll非常简单，具有以下接口：

```
 [ServiceContract(CallbackContract=typeof(IChatServiceCallback))]
    public interface IService {
        [OperationContract]
        Guid Subscribe();
    }

    public interface IServiceCallback {
         void NotifyClient(strign message);
    } 
```

当我尝试创建服务时，我的问题就来了。当我创建从客户端到主机的通道时，出现以下异常：*“提供给 ChannelFactory 的 InstanceContext 包含一个未实现 CallbackContractType 'Client.MyServiceReference.IServiceCallback' 的 UserObjecct。”*

我发现在 ServiceReference 对象浏览器中 ClientObject 不包含 IServiceCallback 接口。这是我对应的主机代码：

```
 ServiceHost host = new ServiceHost(typeof(ChatService));

    try
    {
        host.BeginOpen(new AsyncCallback(OnOpen), host);
        mre.WaitOne();
        if (host.State == CommunicationState.Opened)
        {
            Console.WriteLine("Server is running!\nServer listens on the following endpoints:");
            foreach (var endp in host.Description.Endpoints)
            {
                Console.WriteLine("\t{0}", endp.Address);
            }

            Console.WriteLine("Press <Enter> to stop the server...");
            Console.ReadLine();
            host.Close();
        }
    }
    catch (Exception ex)
    {
        Console.WriteLine("Error: {0}", ex.Message);
    } 
```

如何为包含在客户端实现的回调接口的服务 dll 创建主机应用程序？

客户端：尝试 { clientID = client.Subscribe(); <-- 抛出异常。} catch(Exception ex) { MessageBox.Show(ex.Message, "Error", MessageBoxButton.OK); }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:17:26.473

是否可以直接在客户端使用服务合同程序集？如果是这样，您可以使用 DuplexChannelFactory 并完全避免客户端服务参考代码。

[这里的](https://stackoverflow.com/a/8897600/569662)例子

我知道这不能回答您的问题，但它可以帮助您解决它。

# sql - 在 postgresql 中使用年龄

> ID：10006747
> 
> 赞同：1
> 
> 时间：2012-04-04T07:32:04.480
> 
> 标签：sql, postgresql

我的 postgresql 8.4 数据库中有一个表，如下所示：

```
id(serial), event_type_id(id, foreign key), ts(timestamp) 
```

我有两个事件类型 ID，我需要查看它们之间的年龄。

```
Event_type_id 1 = Arrive
Event_type_id 2 = Leaves 
```

示例数据

```
 id | event_type_id |             ts             
----+---------------+----------------------------
 21 |             6 | 2012-04-03 16:02:18.739274
 20 |             5 | 2012-04-03 08:44:13.244287 
```

我想按天对这些进行分组，看看每天有多少小时。

有人可以指出如何分组和计算年龄的方向吗？

到目前为止，我有这个，但我需要生成一个系列来加入或类似的东西

**解决方案** 不知道这是否是最佳实践，但它对我有用。

```
SELECT dx, age(max(ts), min(ts)) 
from generate_series('2012-04-01', '2012-04-14', interval '1 day') as dx 
left join events on (ts >= dx and ts < dx + '23 hours 59 minutes' and event_type_id in (5,6)) 
group by dx 
order by dx; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:44:56.643

我认为你需要：

```
select age(max(ts), min(ts)), ts::date as date
from events
where event_type_id in (5,6)
group by date; 
```

但是你的问题不清楚。我假设你的意思是你有一个像这样的表（不是数据库）：

```
create table events (
  id serial,
  event_type_id int references event_types,
  ts timestamp
); 
```

并且您需要为每个日期计算类型 5 或 6 的第一个事件和最后一个事件之间的间隔。

# java - 如何克服 ConcurrentModificationException 错误

> ID：10006749
> 
> 赞同：0
> 
> 时间：2012-04-04T07:32:12.497
> 
> 标签：java

> **可能重复：**
> [将元素添加到 LinkedList 时并发修改错误](https://stackoverflow.com/questions/10134651/concurrent-modification-error-when-adding-elements-to-linkedlist)

我有一个链表的数组列表

```
List<LinkedList<File1>> backup = new ArrayList<LinkedList<File1>>(); 
```

在运行时单击按钮时，我想从列表中删除一些元素并将它们添加到其他列表中。我也尝试将链表声明为

```
List<LinkedList<File1>> lists = Collections.synchronizedList(new ArrayList<LinkedList<File1>>()); 
```

bt 仍然错误保持不变。我无法找出错误，我也是java新手，所以请帮忙。我的代码如下。

```
 private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // When delete button is clicked
        int parent_node = 0, d =0 ;
        File1 srt[] ;
        File1 deleted[] = new File1[no_node];
        Random randomGenerator = new Random();
        int rand_no = 0;
        while(rand_no == 0)
        {
            rand_no = randomGenerator.nextInt(no_node);
        }
        System.out.println("random no : " + rand_no);
         for(i=0;i<backup.size();i++)
         {             
             ListIterator itr = it_bk.get(i);
             while(itr.hasNext())
             {
                 File1 file = (File1) itr.next();                 
                 if(rand_no == file.nod)
                 {                     
                     parent_node = i;
                     itr.remove();                     
                 }
             }
             //iterating back
             while(itr.hasPrevious())
              {
                  File1 file = (File1) itr.previous();
              }             
         }

         System.out.println("Parent node:" + parent_node);
         //add the nodes to parent
         ListIterator itr1 = it_bk.get(rand_no);

         System.out.println("randam node");

         while(itr1.hasNext())
         {
             File1 file = (File1) itr1.next();
             deleted[d] = new File1();
             deleted[d] = file ;
             d++;
             //tmp_bk.add(file); 
             System.out.println("node :" + file.nod + "\tdist :" + file.dist);
         }

         LinkedList<File1> tmp_bk = backup.get(parent_node);
         for(j=0;j<d;j++)
         {
             tmp_bk.add(deleted[j]);
             System.out.println(deleted[j].nod + "\t" + deleted[j].dist);
         }
         //it_bk.add(tmp_bk.listIterator());
         ListIterator itr_p = it_bk.get(parent_node);
         System.out.println("parent node");
          while(itr_p.hasNext())
         {
             File1 file = (File1) itr_p.next();
             System.out.println("node :" + file.nod + "\tdist :" + file.dist);
         }

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:35:55.477

您正在遍历列表并修改无效的相同列表，

```
itr.remove(); 
```

改为管理两个列表，并在迭代后将结果列表的效果应用于源列表

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:37:06.560

当您**在**迭代列表时从列表中删除对象时会发生错误。您可以将要删除的项目放在另一个列表中，然后在第一个列表的迭代之后调用`firstlist.removeAll(list_with_items_to_remove)`.

# r - 设置不同比例时的 xyplot 和面板间距

> ID：10006750
> 
> 赞同：1
> 
> 时间：2012-04-04T07:32:14.277
> 
> 标签：r, lattice

在让 xyplot 为每个格子行使用不同的 ylim 之后（该部分有效），我最终在面板之间增加了一些我似乎无法驾驭的额外间距。在下面的示例中，我想

*   (a) 去掉每列之间的三个间距
*   (b) 让第 9 个面板上的轴标签（即第 1 行第 2 列第 4 列）出现在图的右侧。
*   (c) 确保每个面板正好从 0 开始，正好在 10 结束（在 x 和 y 上）：而不是像现在这样的 -0.1 和 10.1。

提前致谢，

> 图书馆（格）
> 
> 库（latticeExtra）
> 
> ```
> B<-structure(list(yval = c(9.04558240029191, 0.799530758536875, 
> 4.69069522598669, 1.91643037953314, 1.57786714979593, 1.8446918362001, 
> 12.2500411978512, 3.07665190473454, 3.28898861276143, 6.01549253849571, 
> 8.17821235705288, 3.79595798212791, 0.805594114806692, 6.41198823745342, 
> 3.28568215145447, 7.98224159193929, 8.60366317617762, 5.42388511534892, 
> 0.764825548373361, 3.9666691576256, 2.47156955689964, 7.27503578997147, 
> 5.44633450784916, 6.60905274634776, 5.45786814114277, 0.758864205932014, 
> 2.84057319554552, 5.04212318294901, 7.00770048354209, 4.38241850904838, 
> 12.3629788063877, 0.761708333337782, 6.33197137795722, 6.67224995833747, 
> 5.34251622052521, 8.66662936109525, 13.5204012323942, 4.0032083141389, 
> 11.6843895681122, 12.8329939259479, 9.09319429081734, 4.8090480682483, 
> 1.10183130102097, 2.85680676388518, 6.0430350387286, 0.864262666632898, 
> 4.03505027841203, 7.83331437064888, 0.99216416521435, 8.1203144160401, 
> 5.7347651851128, 13.0677987321833, 5.45030129828113, 6.78666709316608, 
> 9.13141740602399, 3.96553096986173, 5.67648924810184, 4.02795185222417, 
> 1.19923217249904, 8.00633581508868, 3.62564568701185, 0.945006814343432, 
> 11.6861884359709, 9.17683187930724, 4.11952821761626, 9.48867838961486, 
> 9.14151956014416, 9.93838160762052, 4.60891102702602, 6.99239234030028, 
> 1.00586875673025, 8.57168767869193, 2.22835635254303, 10.7135685293467, 
> 5.87713139624508, 3.14952893096586, 6.81194443415328, 3.36658738967144, 
> 1.57839234760371, 4.65736854147361, 13.6432997178854, 1.15264945152674, 
> 7.20595566631243, 0.925980641981997, 0.869008955269436, 4.75095327168301, 
> 8.81030618436026, 3.92273652447446, 8.12949426073657, 5.76933378419949, 
> 0.777256448291363, 2.38339350715339, 0.734001474102335, 9.52159088621359, 
> 9.04970565702903, 6.90866926838569, 5.9005334817271, 7.00203106927033, 
> 8.99155252630509, 8.94266111063583, 5.92279271877979, 4.42034111796866, 
> 6.75839811937969, 8.64658069020977, 6.73162187983837, 7.81184984214652, 
> 7.98579728627022, 3.37676029593063, 0.786919300835254, 6.26305128304185, 
> 4.34845809230566, 3.95541090231129, 6.72281577578086, 0.695707197714119, 
> 10.0560573020158, 4.15810837453519, 0.873004867283037, 4.16327733595061, 
> 6.49503064101967, 8.12090562610595, 6.97504423312718, 5.04835565620835, 
> 4.1951025387306, 3.4389006143913, 14.2771156202001, 7.03956347153237, 
> 4.38618618413419, 2.37913020416628, 5.76940052627782, 6.7843580672236, 
> 5.6189786720292, 0.858382930463266, 8.93422023821023, 6.66122216464326, 
> 4.65890006006495, 2.49108732055206, 5.20714425399159, 6.76817735008579, 
> 4.57887132963062, 8.17948756574428, 0.898004842730052, 2.87380239133325, 
> 4.60134531154924, 6.10512608065437, 9.25669653387974, 4.02358360379974, 
> 1.65752932816245, 13.0180323775825, 1.07835183694634, 6.77152818032083, 
> 0.992191765039423, 9.30217478579486, 0.97874136454804, 0.866890009992784, 
> 8.817554894806, 0.7272450310133, 8.44736877413528, 0.920962179334358, 
> 6.74426140262635, 11.4976862396927, 6.83227936730633, 6.65379134595895, 
> 8.08853124664082, 8.42288560540892, 6.74875380809505, 2.36799257646616, 
> 4.36076052102911, 5.37997507455859, 2.74739395725121, 0.711432451231922, 
> 0.88339933260502, 3.99251745639107, 6.00066182640637, 4.70148688755132, 
> 1.49531958692362, 4.63991117659694, 6.85411354349471, 6.46882156338255, 
> 6.85653606216362, 4.00308723827046, 4.48618366295549, 10.111122152813, 
> 6.18726852405011, 4.21496939061236, 8.08951972351983, 5.75062772615253, 
> 5.52475848522626, 1.26794710186864, 9.01653579750459, 6.11422725714239, 
> 9.53492872517571, 0.880694109464262, 6.81404895940322, 5.87046596781633, 
> 0.987684218656088, 0.905904225040102, 0.709536461897921, 9.54425897216572, 
> 2.42394501347149, 2.39393463069561), xval = c(7.47963566160188, 
> 7.53843824926937, 7.89102425119663, 0.714250331034379, 0.350808447161537, 
> 0.920278439461499, 2, 1.18120433837389, 2.15668307822314, 3.53934453115817, 
> 4.54534178644686, 6.35156921947863, 6, 5.85193346902148, 0.257061197908195, 
> 4.31405462193795, 7.44504037562708, 1.6419865257507, 5.92245885664568, 
> 5.85762870655473, 2.41500543375237, 2.05255225180268, 2.61260633367393, 
> 7.38952812116483, 3.40841861174166, 5.56641353876732, 1.06334634355079, 
> 1.22092009561206, 7.14905823173125, 7.77833375224301, 6.48602609472388, 
> 2.22876858735943, 4.63608825703697, 7.20409587755302, 3.94029557829791, 
> 5.49693346564516, 8, 3.68168379693831, 4.53399156590835, 2, 3.20232386763659, 
> 3.11465409149307, 3.59096547110588, 0.970635458843625, 3.79609219567095, 
> 7.55431365252621, 3.84830138707843, 8, 9.68422707545899, 6.45952162701766, 
> 2.61260633367393, 8, 2.80146412397853, 2.71523669358035, 3.34195216347927, 
> 5.7052168115031, 4.83629254883881, 3.00634266399471, 0.161521370138566, 
> 2.77915434648176, 0.430882606717923, 6.40468404364395, 8, 1.82254474904725, 
> 2.02274863777057, 0.0952104996681957, 1.18810690234325, 4, 0.707737916689389, 
> 6.61645186383278, 6.80447998235695, 5.0388851286179, 8.33100258777955, 
> 2.88309613397185, 2.50046471894888, 1.43831427763256, 8.80421484592245, 
> 2.43273028649955, 3.18832058131858, 0.721572350979251, 8, 1.907891777796, 
> 1.05560820975072, 9.99619906048348, 6.68527581003685, 8.69201244754421, 
> 5.84110748159124, 8.0167791392137, 6.33916453325404, 2.2417758680228, 
> 5.0575474022438, 0.434518494934576, 7.63978081682492, 5.19955013543875, 
> 7.49576429936454, 8.70020957978785, 2.56269498257904, 6.90165751709627, 
> 7.3319320403241, 6.9801288946986, 0.251493263610557, 5.70219219685056, 
> 9.07813067781478, 9.68422707545899, 7.69678435668618, 4.88668899911176, 
> 2.6243179089804, 1.80110071603502, 4.64623158623263, 6.40047515568851, 
> 2.07682859084626, 3.3080241101838, 7.45291987882876, 3.20531761919078, 
> 8.70020957978785, 7.65805776625107, 9.51348984354148, 7.75570667603492, 
> 5.23744300265713, 3.66772339261955, 9.96838812401567, 1.22757975659896, 
> 2.10117458601233, 4.30252110036365, 8, 9.7853969925673, 7.8498968972544, 
> 1.06023998229514, 2.80808561311523, 8.936106857321, 4.33847136469, 
> 2.28195392443262, 2.71065687399482, 7.11534497790504, 0.736599072564448, 
> 0.0371367578969133, 1.66833297125009, 2.25721316147136, 1.25087606440674, 
> 0.196049047891455, 9.47293734757645, 1.68846238246007, 8.39657940508961, 
> 2.99332681317713, 6, 6.21814736208532, 0.582872210285507, 2, 
> 6.70176650693179, 7.25659815967902, 1.89552337969659, 6, 7.64691089050179, 
> 5.90288700711154, 4.50475630428356, 4.71258989491385, 4.40677648764997, 
> 9.96001027491324, 8.20245208325319, 2, 8.09144329864304, 7.05910754176663, 
> 3.38701780181836, 4.272006377931, 8.98520317584308, 0.59821501073407, 
> 9.81164531780974, 4.19141637809377, 1.44318685936535, 8.79864437508768, 
> 3.21596961924959, 1.99186824405878, 3.28063130382249, 8.05841625618546, 
> 0.106451981669153, 7.18587595643851, 2.35872287708421, 7.46774138570701, 
> 8.19156257322725, 3.09809701159013, 9.1323987488354, 9.33479740023197, 
> 3.40547170163811, 2.23290070547077, 6.82128728998622, 0.175226827422645, 
> 1.93267256652364, 3.29266684711463, 4, 4.71250021739426, 4, 8.96389342027811, 
> 7.6410830341138, 2.2417758680228, 3.92681182511134, 8.23603091257415, 
> 9.29870572131864, 5.33258781492592, 1.78141216060964, 1.86262944881485
> ), gval = c(2, 4, 2, 4, 4, 3, 1, 2, 4, 3, 4, 2, 3, 2, 2, 2, 3, 
> 2, 1, 4, 1, 1, 2, 1, 2, 4, 4, 3, 4, 2, 1, 1, 3, 2, 1, 1, 4, 2, 
> 1, 1, 1, 4, 3, 2, 3, 1, 2, 4, 4, 4, 3, 4, 2, 3, 1, 4, 4, 4, 4, 
> 4, 2, 1, 4, 4, 1, 4, 1, 2, 3, 4, 3, 1, 4, 1, 3, 3, 4, 4, 1, 2, 
> 4, 1, 4, 3, 3, 2, 4, 2, 4, 3, 1, 3, 1, 1, 2, 3, 3, 4, 1, 1, 1, 
> 2, 2, 1, 3, 3, 4, 4, 4, 4, 4, 4, 3, 3, 1, 4, 3, 4, 2, 4, 3, 3, 
> 1, 2, 4, 3, 2, 4, 3, 3, 2, 3, 1, 2, 3, 3, 2, 2, 4, 4, 1, 2, 4, 
> 2, 3, 4, 1, 1, 3, 2, 3, 3, 3, 1, 4, 3, 1, 3, 4, 1, 2, 2, 4, 1, 
> 4, 2, 4, 4, 2, 4, 1, 4, 3, 2, 2, 2, 2, 3, 2, 4, 2, 1, 2, 4, 4, 
> 1, 3, 3, 2, 2, 2, 1, 2, 2, 4, 3, 4, 1, 4, 4), type = structure(c(2L, 
> 3L, 3L, 3L, 3L, 3L, 1L, 3L, 3L, 2L, 2L, 3L, 1L, 2L, 2L, 2L, 2L, 
> 2L, 3L, 3L, 3L, 2L, 2L, 3L, 2L, 3L, 3L, 2L, 2L, 3L, 2L, 3L, 2L, 
> 2L, 3L, 2L, 1L, 3L, 2L, 1L, 2L, 3L, 3L, 3L, 2L, 3L, 3L, 1L, 2L, 
> 2L, 2L, 1L, 2L, 2L, 2L, 2L, 3L, 2L, 3L, 2L, 2L, 3L, 1L, 2L, 3L, 
> 2L, 2L, 1L, 2L, 2L, 3L, 2L, 2L, 2L, 2L, 3L, 2L, 3L, 3L, 2L, 1L, 
> 3L, 2L, 3L, 3L, 3L, 2L, 3L, 2L, 2L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 
> 2L, 2L, 2L, 2L, 3L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 2L, 2L, 2L, 
> 3L, 2L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 3L, 3L, 1L, 2L, 3L, 3L, 2L, 
> 2L, 2L, 3L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 3L, 3L, 3L, 2L, 1L, 
> 3L, 3L, 1L, 3L, 2L, 3L, 1L, 3L, 3L, 2L, 3L, 2L, 3L, 3L, 1L, 3L, 
> 2L, 2L, 2L, 2L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 2L, 3L, 3L, 3L, 2L, 
> 2L, 3L, 2L, 3L, 2L, 2L, 3L, 2L, 2L, 2L, 3L, 1L, 2L, 1L, 3L, 2L, 
> 2L, 3L, 3L, 3L, 2L, 3L, 3L), .Label = c("0", "1", "5"), class = "factor"), 
>     cr = structure(c(3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 
>     3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 3L), .Label = c("0.2", 
>     "0.3", "0.4"), class = "factor"), p = structure(c(4L, 1L, 
>     3L, 4L, 1L, 2L, 2L, 3L, 2L, 2L, 3L, 1L, 3L, 2L, 4L, 4L, 4L, 
>     2L, 1L, 2L, 3L, 1L, 1L, 4L, 1L, 1L, 3L, 1L, 2L, 2L, 4L, 1L, 
>     3L, 2L, 4L, 2L, 3L, 3L, 4L, 3L, 3L, 4L, 3L, 3L, 2L, 2L, 3L, 
>     1L, 1L, 3L, 1L, 2L, 1L, 4L, 3L, 1L, 4L, 1L, 1L, 3L, 1L, 3L, 
>     1L, 4L, 4L, 4L, 4L, 3L, 2L, 2L, 3L, 2L, 1L, 4L, 3L, 4L, 2L, 
>     2L, 3L, 3L, 3L, 2L, 2L, 2L, 2L, 3L, 4L, 1L, 3L, 3L, 3L, 2L, 
>     1L, 3L, 4L, 3L, 3L, 2L, 2L, 2L, 2L, 3L, 2L, 1L, 2L, 4L, 3L, 
>     3L, 1L, 4L, 1L, 1L, 2L, 1L, 3L, 2L, 2L, 2L, 3L, 3L, 2L, 1L, 
>     4L, 1L, 4L, 3L, 2L, 1L, 1L, 2L, 1L, 1L, 3L, 2L, 2L, 4L, 1L, 
>     4L, 1L, 3L, 2L, 1L, 3L, 3L, 2L, 2L, 4L, 3L, 4L, 3L, 1L, 2L, 
>     3L, 3L, 4L, 3L, 2L, 2L, 4L, 1L, 4L, 2L, 3L, 2L, 2L, 3L, 2L, 
>     4L, 1L, 1L, 2L, 4L, 2L, 3L, 3L, 3L, 4L, 1L, 4L, 1L, 2L, 3L, 
>     3L, 4L, 3L, 2L, 1L, 4L, 2L, 2L, 2L, 3L, 3L, 3L, 1L, 3L, 1L, 
>     3L, 1L, 1L), .Label = c("4", "8", "12", "20"), class = "factor"), 
>     nsamp = c(500, 100, 300, 500, 100, 200, 100, 300, 200, 200, 
>     300, 100, 100, 200, 500, 500, 500, 200, 100, 200, 300, 100, 
>     100, 500, 100, 100, 300, 100, 200, 200, 500, 100, 300, 200, 
>     500, 200, 100, 300, 500, 100, 300, 500, 300, 300, 200, 200, 
>     300, 100, 100, 300, 100, 100, 100, 500, 300, 100, 500, 100, 
>     100, 300, 100, 300, 100, 500, 500, 500, 500, 100, 200, 200, 
>     300, 200, 100, 500, 300, 500, 200, 200, 300, 300, 100, 200, 
>     200, 200, 200, 300, 500, 100, 300, 300, 300, 200, 100, 300, 
>     500, 300, 300, 200, 200, 200, 200, 300, 200, 100, 200, 500, 
>     300, 300, 100, 500, 100, 100, 200, 100, 300, 200, 200, 200, 
>     300, 300, 200, 100, 500, 100, 100, 300, 200, 100, 100, 200, 
>     100, 100, 300, 200, 200, 500, 100, 500, 100, 300, 200, 100, 
>     300, 300, 100, 200, 500, 100, 500, 300, 100, 100, 300, 300, 
>     500, 300, 200, 200, 500, 100, 500, 200, 300, 200, 200, 300, 
>     200, 500, 100, 100, 200, 500, 200, 300, 300, 300, 500, 100, 
>     500, 100, 200, 300, 300, 500, 300, 200, 100, 500, 100, 200, 
>     100, 300, 300, 300, 100, 300, 100, 300, 100, 100), grp = c(4, 
>     2, 2, 2, 2, 2, 5, 2, 2, 4, 4, 2, 5, 4, 4, 4, 4, 4, 2, 2, 
>     2, 4, 4, 2, 4, 2, 2, 4, 4, 2, 4, 2, 4, 4, 2, 4, 5, 2, 4, 
>     5, 4, 2, 2, 2, 4, 2, 2, 5, 4, 4, 4, 5, 4, 4, 4, 4, 2, 4, 
>     2, 4, 4, 2, 5, 4, 2, 4, 4, 5, 4, 4, 2, 4, 4, 4, 4, 2, 4, 
>     2, 2, 4, 5, 2, 4, 2, 2, 2, 4, 2, 4, 4, 2, 2, 2, 4, 4, 4, 
>     4, 4, 4, 4, 4, 2, 4, 4, 4, 4, 4, 2, 2, 2, 4, 4, 4, 2, 4, 
>     2, 2, 2, 4, 4, 4, 4, 2, 2, 5, 4, 2, 2, 4, 4, 4, 2, 4, 4, 
>     4, 4, 4, 4, 4, 4, 2, 2, 2, 4, 5, 2, 2, 5, 2, 4, 2, 5, 2, 
>     2, 4, 2, 4, 2, 2, 5, 2, 4, 4, 4, 4, 2, 2, 2, 2, 2, 2, 2, 
>     4, 2, 2, 2, 4, 4, 2, 4, 2, 4, 4, 2, 4, 4, 4, 2, 5, 4, 5, 
>     2, 4, 4, 2, 2, 2, 4, 2, 2)), .Names = c("yval", "xval", "gval", 
> "type", "cr", "p", "nsamp", "grp"), row.names = c("25155", "42789", 
> "46517", "49502", "42342", "44189", "592", "46071", "44843", 
> "20664", "23997", "41460", "1395", "20144", "24836", "25020", 
> "25616", "19868", "40797", "45051", "45473", "16611", "17292", 
> "48391", "17346", "42670", "47427", "17848", "21588", "44011", 
> "24651", "40559", "23361", "20239", "48249", "19450", "2250", 
> "46260", "24569", "341", "21971", "49634", "46933", "46054", 
> "20688", "43408", "46269", "2415", "19049", "24104", "17941", 
> "2403", "17304", "25413", "21976", "18791", "49720", "18616", 
> "42333", "23874", "17149", "45734", "2278", "25830", "48149", 
> "25754", "24413", "853", "20484", "21549", "47123", "19415", 
> "18976", "24497", "23212", "49071", "21704", "44856", "45532", 
> "22469", "2120", "43066", "21186", "44723", "44522", "46582", 
> "26012", "41553", "24096", "23192", "45652", "44153", "40894", 
> "22105", "25156", "23616", "23216", "21565", "19570", "19542", 
> "19091", "46373", "20365", "17102", "20965", "25512", "23861", 
> "47489", "42599", "49788", "18560", "18638", "20934", "41880", 
> "22330", "45179", "44688", "45185", "22749", "23931", "21101", 
> "17849", "48153", "41313", "2005", "23698", "44019", "42378", 
> "17954", "21032", "17413", "41830", "21941", "20231", "20490", 
> "25283", "17236", "24924", "18500", "23724", "43509", "41155", 
> "47923", "22598", "1823", "45077", "48067", "578", "49321", "22867", 
> "41806", "1821", "47180", "45705", "25957", "47004", "19369", 
> "44718", "49865", "250", "48907", "20225", "23910", "19360", 
> "21714", "46026", "45295", "49690", "41142", "42888", "43145", 
> "49575", "20651", "46530", "46000", "46472", "24929", "18267", 
> "48912", "18621", "44081", "22380", "22625", "49588", "24130", 
> "19088", "17899", "49170", "953", "20072", "1201", "45925", "22901", 
> "22549", "42555", "47227", "42921", "22112", "42430", "42436"
> ),class = "data.frame") 
> ```
> 
> 我的面板<-function(...){

```
 if(current.row()<3){
        panel.grid(v=-1,h=-1,col="dark grey")
        panel.xyplot(...)   

  } else {

        panel.grid(v=-1,h=-1,col="dark grey")
        panel.bwplot(...,pch="-",cex=3,
        fill=cl,horizontal=FALSE,
        stats=adjboxStats)  

   } 
```

}

编辑格式

```
ato<-rep(list(NULL),12); ato[[8]]<-ato[[1]]<-ato[[9]]<-TRUE;
alte<-rep(list=c(2),12); alte[[8]]<-list(2);
lmi<-rep(list(c(0,10),c(0,10),c(0,20)),4); 
useOuterStrips(xyplot(B$yval~B$xval|B$p*B$grp,group=B$gval,
  type=c("l","g"),lwd=2,cex.lab=1.5,as.table=TRUE,
  par.settings=list(plot.symbol=list(pch="*",col="black",cex=1),
  box.umbrella=list(lty=1,col="black",lwd=2),cex=2,
  par.xlab.text=list(cex=1),axis.text=list(cex=1),
  par.ylab.text=list(cex=1)),panel=mypanel,
  scales=list(y=list(relation="free",limits=lmi,at=ato,alternating=alte)))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:26:21.520

OK, here is a possible solution.

*   (a) To get rid of the horizontal space, add `layout.widths=list(axis.panel=0)` to your `par.settings`.

*   (b) To get the axis labels to the right for the plot in row 2, column 4, there's an inelegant solution below

*   (c) To get exact limits, add `axs="i"` to the `x` and `y` components of `scales`.

In summary:

```
ato<-rep(list(NULL),12); ato[[1]]<-ato[[9]]<-TRUE; 
```

Above, I removed the assignment to `ato[[8]]`

```
lmi<-rep(list(c(0,10),c(0,10),c(0,20)),4)
useOuterStrips(xyplot(B$yval~B$xval|B$p*B$grp,group=B$gval,
  type=c("l","g"),lwd=2,cex.lab=1.5,as.table=TRUE,
  par.settings=list(plot.symbol=list(pch="*",col="black",cex=1),
  box.umbrella=list(lty=1,col="black",lwd=2),cex=2,
  par.xlab.text=list(cex=1),axis.text=list(cex=1),
  par.ylab.text=list(cex=1),layout.widths=list(axis.panel=0,
  right.padding=3)),panel=mypanel,
  scales=list(y=list(relation="free",limits=lmi,at=ato,axs="i"),
  x=list(axs="i")))) 
```

And the inelegant axis solution:

```
trellis.focus("panel", 4, 2, clip.off=TRUE,highlight=FALSE)
panel.axis(side="right",at=pretty(lmi[[8]]),outside=TRUE) 
```

p.s. From `?xyplot`:

> alternating applies only when relation="same".

Therefore, I took it out of the code.

**EDIT:**

I forgot to mention that I added `right.padding=3` to the `par.settings` to make room for the axis ticks and labels. If you need more room on the right, simply substitute a larger number for 3\. In order to get more space on the left, you could tweak `left.padding` as well.

# python - 将用户从 Google App Engine 迁移到 Google OpenID

> ID：10006752
> 
> 赞同：7
> 
> 时间：2012-04-04T07:32:39.823
> 
> 标签：python, django, google-app-engine, openid

几个月前，我离开了 Google App Engine。但我仍然依赖它进行身份验证，因为我的用户是由他们在 GAE 上的 user_id 属性标识的。

为此，我的（现在是外部的）应用程序使用加密、签名和时间戳的登录请求将用户重定向到 Google App Engine 应用程序。然后，GAE 应用程序使用 GAE 的“用户”服务执行登录。在 GAE 上成功登录后，用户再次使用加密、签名和时间戳响应重定向到我的外部应用程序。可以在[此处](https://github.com/mback2k/django-googleauth)和[此处](https://github.com/mback2k/django-googleauth-gae)找到基本实现。如您所见，这是非常基本的，并且依赖于导致性能不佳的大量加密。

我的外部应用程序（在本例中为 Django 应用程序）将 user_id 存储在用户表的密码字段中。除了 user_id，我只从 GAE 获取电子邮件地址以在 Django 中存储用户名和电子邮件。

现在我想删除对 GAE 服务的依赖。想到的第一种方法可能是向每个用户发送一封电子邮件，要求他设置新密码，然后使用 Django 执行我自己的身份验证。

我更喜欢依赖谷歌的 OpenID 服务的解决方案，这样对用户来说实际上没有区别。这也是首选，因为无论如何我都需要将用户发送到 Google 以获取 Google Calendar API 的 AuthSub 令牌。

问题是我找不到在不使用 GAE 的情况下获取给定 Google 帐户的 GAE user_id 属性的方法。OpenID 和所有其他身份验证协议使用不同的标识符。

所以现在的问题是：Google 是否提供了任何我尚未看到的可用于此目的的 API？关于如何迁移用户帐户，还有其他可能的解决方案或想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T05:58:50.797

最好的方法是向用户显示“迁移”插页式广告，将他们重定向到 Google OpenID 提供商并提示他们在那里登录。一旦他们在两个位置登录，您就可以匹配这两个帐户，并让他们将来通过 OpenID 登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T13:37:58.390

AFAIK，Google 帐户和 Google OpenID 之间唯一的通用标识符是电子邮件。

1.  当用户通过您当前的 gae 设置登录 Google 帐户时收到电子邮件。使用`User.email()`. 将此电子邮件与用户数据一起保存。

2.  当您拥有所有（大多数）用户的电子邮件时，切换到 Google OpenID。当用户登录时，获取电子邮件地址并在数据库中找到该用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-25T20:30:59.497

为什么不尝试混合方法：

1.  切换到 OpenId
2.  如果您的应用程序已经知道 userId，那么您就完成了
3.  如果不询问用户，他是否有要迁移的帐户
4.  如果是，请用旧的 mechansim 登录他并转移帐户
5.  如果没有创建一个新帐户

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T19:07:24.193

Google 有一个唯一标识符，它作为成功的 OpenID 身份验证请求的参数返回 - *openid.claimed_id* 。如果您切换到使用 OpenID，您实际上可以在用户第一次使用新方法登录时将 user_id 交换为此参数，而用户不会注意到他们的登录体验有任何不同。

[此处](https://developers.google.com/accounts/docs/OpenID#AuthProcess)概述了身份验证过程的文档。我建议使用混合 OpenID+OAuth 方法，这样您就可以将您的请求令牌与给定的 id 相关联，然后在返回时验证 openid.claimed_id 是否与您的原始请求令牌匹配。

# codeigniter - 未定义的表数据

> ID：10006755
> 
> 赞同：0
> 
> 时间：2012-04-04T07:32:56.660
> 
> 标签：codeigniter

我将 CI 2.1.0 与 HMVC 一起使用。我将在视图部分实现分页。但我收到**“未定义的表数据”**错误。它显示页码 (1,2,3,..) 但不显示记录。

**我的代码是：**

包含分页库： **$this->load->library('table');**

**控制器**

```
$data['title'] = "Test Events";
$this->load->library('pagination');

$config['base_url'] = 'http://localhost/myproject/index.php/events/test/';
$config['total_rows'] = $this->eventModule->countRow();
$config['per_page'] = '3';

$this->pagination->initialize($config);
$config['records'] = objectsIntoArray($this->eventModule->get_record($config['per_page'], $this->uri->segment(3)));

$data['main_content'] = 'test';       
$this->load->view('event/template', $data); 
```

**看法**

```
<?php echo $this->table->generate('records'); ?>
<?php echo $this->pagination->create_links(); ?> 
```

谢谢你的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T05:10:55.983

最后我得到了解决方案。这是愚蠢的错误

**$config['records'] = objectsIntoArray($this->eventModule->get_record($config['per_page'], $this->uri->segment(3)));**

它应该是*$data*而不是*$config*

**$data['records'] = objectsIntoArray($this->eventModule->get_record($config['per_page'], $this->uri->segment(3)));**

# java - 如何使用jdt core代替ecj进行批量编译

> ID：10006756
> 
> 赞同：1
> 
> 时间：2012-04-04T07:33:00.807
> 
> 标签：java, eclipse-jdt

我正在开发一个 java ide（ide 本身是用 java 编写的，非 eclipse 环境），它当前在后端使用 ecj 来编译 java 源文件。我正在调整以查看如何用 jdt 核心替换 ecj，因为我想使用 jdt 核心组件提供的一些高级功能，如 ast-parser、增量编译等。我用 org.eclipse.jdt 替换了 ecj.jar .core_3.7.1.XXXXX.jar，更新了一些classpath，用ant重建了ide。现在，当我从 ide 编译任何 java 源文件时，我得到：

```
java.lang.NoClassDefFoundError: org/eclipse/jdt/core/compiler/batch/BatchCompiler 
```

我已经更新了 ide 的类路径以包含 jdt.core jar 而不是 ecj，并且 jdt 核心显然包含批处理编译器。那么我错过了什么？jdt.core 是否需要额外的依赖项来编译 java 源文件？还是在非 Eclipse 环境中使用 jdt.core 而不是 ecj 是个坏主意？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T09:50:04.530

我找到了解决方案。启动器的类路径需要更新。JDT-core 工作得很好。

# javascript - 在javascript中使用正则表达式检索函数的参数

> ID：10006758
> 
> 赞同：0
> 
> 时间：2012-04-04T07:33:09.240
> 
> 标签：javascript, regex

例如，如果我们考虑 document.createElement() 函数，参数可以通过 3 种方式传递

`var v="script"; var s=document.createElement(v);`

`var s=document.createElement("script");`

`var s=document.createElement('scipt');`

我想要一个正则表达式，它在 document.createElement 函数中提取参数，不包括引号。我通过使用组进行了尝试，但我正在编写两个正则表达式，一个用于“”，''，另一个用于普通变量，请提供一个示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:08:01.807

```
var re = /document\.createElement\((['"]*)(.+?)\1\)/; 
```

结果在：

```
str.match(re)[2]; 
```

[http://jsfiddle.net/mihaifm/RWc8N/](http://jsfiddle.net/mihaifm/RWc8N/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:39:49.677

使用管道 -`|`进行*OR*操作。

例如：`script|scipt`。

# java - 将日期转换为特定格式

> ID：10006759
> 
> 赞同：0
> 
> 时间：2012-04-04T07:33:14.713
> 
> 标签：java, date, simpledateformat

我正在研究Java。我有一个日期，例如：20120328。
年份是 2012，月份是 03，日期是 28。
我想将其转换为`yyyy-MM-dd`格式。
我已经尝试过了，但它不起作用。
怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T08:30:42.727

```
SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy");
Date date = new Date();
String ourformat = formatter.format(date.getTime()); 
```

如果您想要的不是“MM/dd/yyyy”，那么只需更改[SimpleDateFormat中的格式](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html "简单的日期格式化文档")

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:38:05.197

[在这里](http://www.exampledepot.com/egs/java.text/parsedate.html)找到一些例子。

```
 DateFormat formatter = new SimpleDateFormat("MM/dd/yy");
  Date date = (Date)formatter.parse("01/29/02"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:35:44.293

看看[这里](http://www.coderanch.com/t/378541/java/java/Convert-date-difference-format)。您将需要使用`SimpleDateFormat`该类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T08:09:21.250

首先，您使用子字符串创建格式，例如

```
String myDate = "20120328";
String myConvertedDate = myDate.substring(0,4) + "-" + myDate.substring(5,6) + "-" + myDate.substring(7); 
```

这产生日期为**2012-03-28**

然后根据需要使用简单的日期格式将其转换为日期。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-03T06:48:45.427

您可以将其用于日期格式

```
SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy");
Date date = new Date();
String ourformat = formatter.format(date.getTime()); 
```

而这个用于获取时间戳

```
 SimpleDateFormat formatter = new SimpleDateFormat("MM/dd/yyyy");
    Timestamp timestamp =timestamp=new Timestamp(System.currentTimeMillis());
    String ourformat = formatter.format(timestamp); 
```

# iphone - 没有在 uiWebView 上调用 didSelectRowAtIndexPath

> ID：10006765
> 
> 赞同：1
> 
> 时间：2012-04-04T07:34:00.530
> 
> 标签：iphone, ios, xcode, ipad

我在 uitableviewcell 中放置了一个 web 视图

问题 ：

在点击或触摸 uiwebview 时不调用 didSelectRowAtIndexPath

知道如何克服这个问题吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T07:36:07.257

设置`webView.userInteractionEnabled = NO;`。

# android-webview - 将html字符串拆分为多个页面

> ID：10006766
> 
> 赞同：15
> 
> 时间：2012-04-04T07:34:03.387
> 
> 标签：android-webview

我正在尝试开发电子书阅读器类型的 android 应用程序。我需要根据可用的屏幕空间将长 html 字符串（由服务器在运行时发送）动态拆分为页面。Html 内容是一篇可以包含文本、图像、视频等的文章。我使用 WebView 来显示 html。

谁能给我指导如何实现这一目标。

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-08-11T10:53:53.093

我认为，进行任何类型的 HTML/DOM 解析都会让你陷入困境，这意味着你正在有效地开始开发自己的 HTML 布局引擎。

使用 CSS3 列函数是一个更好的主意。基本上，让您的内容在固定的宽度和高度列中呈现。这将成为您的页面。然后将您的内容位置向左移动以在页面之间移动，并将其包装在将隐藏溢出元素的容器中。

我们的 HTML 基本上是：

```
<body>
    <div id="container">
        <div id="content">

            CONTENT GOES HERE

            <span id="endMarker"></span>
        </div>
    </div>
    <div>
        <button id="previous">Previous</button>
        <span id="page">Page N of M</span>
        <button id="next">Next</button>
    </div>
</body> 
```

我们的基本 CSS 是：

```
#container {
    width: 240px;
    overflow: hidden;
    background-color: yellow;
}
#content {
    position: relative;
    height: 30em;

    -moz-column-width: 240px;
    -webkit-column-width: 240px;
    column-width: 240px;

    -moz-column-gap: 10px;
    -webkit-column-gap: 10px;
    column-gap: 10px;
} 
```

现在我们将设置`left`#content 的CSS 属性以在页面之间切换，以-250px 的倍数。

我们只需要计算出我们的内容占用了多少列，就可以进行分页了。[How to get css3 multi-column in Javascript](https://stackoverflow.com/questions/6989306/how-to-get-css3-multi-column-count-in-javascript)给出了一个提示：我们要从`#endMarker`.

这是一个工作示例[http://lateral.co.za/pages.html](http://lateral.co.za/pages.html)，其中包含 Moby Dick 的第一章。它适用于 Chrome 和 Android，但不适用于 Firefox - 我认为是因为 CSS 列实现的差异。由于我们这里对Android感兴趣，所以代码很好。

重要的部分是：

1.  CSS 设置如上。
2.  在内容之后添加一个`<span id="endMarker"></span>`（但在`#content`div 内）
3.  添加一个`#previous`和`#next`按钮，以及一个`#page`跨度，都在`#container`.
4.  jQuery加载后的这个javascript：

    ```
    var _column = 0;
    var _columnCount = 0;
    var _columnWidth = 240;
    var _columnGap = 10;
    $(function() {
        _columnCount = Math.floor($('#endMarker').position().left/(_columnWidth + _columnGap));

        setColumn = function(i) {
            _column = i;
            document.getElementById('content').style.left = -1 * _column * (_columnWidth + _columnGap);
            $('#page').html('Page ' + (_column+1) + ' of ' + (_columnCount+1));
        }
        $('#next').click(function() {
            if (_column==_columnCount) return;
            setColumn(_column+1);
        });
        $('#previous').click(function() {
            if (0==_column) return;
            setColumn(_column-1);
        });
        setColumn(0);
    }); 
    ```

而已。

有工作的空间。有人可能想考虑一下列数的计算，我有点从引用的 SO 帖子中吸取了它，但实际上并没有仔细考虑过......容器的宽度似乎会影响内容的列宽，这对我来说并不完全有意义。

但至少在 Chrome 和 Android 上，至少在不需要进行任何 HTML 解析和自己的布局的情况下，一切似乎都可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:06:01.893

您必须解析 HTML，最好是使用一些库，您可以在其中访问 DOM，就像在 JavaScript 中一样。然后，您可以为解析的内容创建自定义布局。WebView 是否支持 JavaScript？这将是一个很好的尝试。

显然，您不能在 HTML 文件的任意位置拆分，您必须考虑 HTML-Tags。修改 DOM 或拆分 html 后，您可以为内容提供自定义 CSS 文件，以您喜欢的方式显示它，并使用您的库或 JavaScript 添加一些分页。

使用`<span style="display:none"></span>`可以帮助您隐藏网站中的内容。然后你不必在物理上拆分（无论如何加载页面后它都在内存中）。

希望能有所帮助。你不会在这里得到一个完整的解决方案，但也许你有一些想法。如果您发现更具体的问题，则更容易提出更具体的问题。

# c++ - 使用 unique_ptr 离开作用域时堆损坏

> ID：10006767
> 
> 赞同：6
> 
> 时间：2012-04-04T07:34:03.587
> 
> 标签：c++, scope, c++11, unique-ptr

我面临类似于[从函数堆损坏返回的 void 指针的问题](https://stackoverflow.com/questions/9706960/void-pointer-returned-from-function-heap-corruption)

相似之处在于，我在离开使用 unique_ptr 的范围时收到“堆损坏”消息。

这里的代码：

```
void CMyClass::SomeMethod ()
{
  std::unique_ptr<IMyInterface> spMyInterface;
  spMyInterface.reset(new CMyInterfaceObject()); // CMyInterfaceObject is derived from IMyInterface

  any_list.push_back(spMyInterface.get()); // any_list: std::list<IMyInterface*>

  any_list.clear(); // only clears the pointers, but doesn't delete it

  // when leaving the scope, unique_ptr deletes the allocated objects... -> heap corruption
} 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-03T12:16:58.170

std::unique_ptr 是一个智能指针，它通过指针保留对象的唯一所有权，并在 unique_ptr 超出范围时销毁该对象。

在您的情况下，您已经`std::unique_ptr<IMyInterface> spMyInterface;`在 SomeMethod() 内部声明，因此一旦执行离开 SomeMethod() 的范围，您的对象就会被破坏。

看看[unique_ptr](http://en.cppreference.com/w/cpp/memory/unique_ptr)

# pdf - apache solr 索引上不支持/禁用的操作 EI

> ID：10006777
> 
> 赞同：3
> 
> 时间：2012-04-04T07:34:23.433
> 
> 标签：pdf, solr

嗨，我在 Windows 服务器上使用 apache solr 3.1
我在 cmd 中索引“不支持/禁用的操作 EI”时看到异常 PDFStreamEngine
我有谷歌这个但找不到任何解决方案

```
Apr 4, 2012 3:33:21 AM org.apache.solr.common.SolrException log
SEVERE: Exception in entity : null:org.apache.solr.handler.dataimport.DataImport
HandlerException: Unable to read content Processing Document # 3029
        at org.apache.solr.handler.dataimport.DataImportHandlerException.wrapAnd
Throw(DataImportHandlerException.java:72)
        at org.apache.solr.handler.dataimport.TikaEntityProcessor.nextRow(TikaEn
tityProcessor.java:130)
        at org.apache.solr.handler.dataimport.EntityProcessorWrapper.nextRow(Ent
ityProcessorWrapper.java:238)
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilde
r.java:591)
        at org.apache.solr.handler.dataimport.DocBuilder.buildDocument(DocBuilde
r.java:617)
        at org.apache.solr.handler.dataimport.DocBuilder.doFullDump(DocBuilder.j
ava:267)
        at org.apache.solr.handler.dataimport.DocBuilder.execute(DocBuilder.java
:186)
        at org.apache.solr.handler.dataimport.DataImporter.doFullImport(DataImpo
rter.java:353)
        at org.apache.solr.handler.dataimport.DataImporter.runCmd(DataImporter.j
ava:411)
        at org.apache.solr.handler.dataimport.DataImporter$1.run(DataImporter.ja
va:392)
Caused by: org.apache.tika.exception.TikaException: Unexpected RuntimeException
from org.apache.tika.parser.ParserDecorator$1@1a8e75a
        at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:199
)
        at org.apache.tika.parser.AutoDetectParser.parse(AutoDetectParser.java:1
35)
        at org.apache.solr.handler.dataimport.TikaEntityProcessor.nextRow(TikaEn
tityProcessor.java:128)
        ... 8 more
Caused by: java.lang.NullPointerException
        at org.apache.pdfbox.pdmodel.PDPageNode.getCount(PDPageNode.java:109)
        at org.apache.pdfbox.pdmodel.PDDocument.getNumberOfPages(PDDocument.java
:943)
        at org.apache.tika.parser.pdf.PDFParser.extractMetadata(PDFParser.java:1
07)
        at org.apache.tika.parser.pdf.PDFParser.parse(PDFParser.java:88)
        at org.apache.tika.parser.ParserDecorator.parse(ParserDecorator.java:91)

        at org.apache.tika.parser.CompositeParser.parse(CompositeParser.java:197
)
        ... 10 more

Apr 4, 2012 3:33:22 AM org.apache.pdfbox.util.PDFStreamEngine processOperator
INFO: unsupported/disabled operation: EI 
```

请帮忙
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T20:00:56.670

这实际上是来自 PDFBox 的消息。这意味着 PDF 包含 PDFBox 不支持的运算符。更多详情可在这找到：

[http://mail-archives.apache.org/mod_mbox/pdfbox-users/201304.mbox/%3C128CBE37-40F7-4948-BAE2-67151D7527A7@fileaffairs.de%3E](http://mail-archives.apache.org/mod_mbox/pdfbox-users/201304.mbox/%3C128CBE37-40F7-4948-BAE2-67151D7527A7@fileaffairs.de%3E)

# primefaces - 在 p:datatable 上设置页面

> ID：10006778
> 
> 赞同：15
> 
> 时间：2012-04-04T07:34:28.393
> 
> 标签：primefaces, jsf-2

我在 primefaces 中有一个数据表，我想在其中添加一行时查看数据表的最后一页。

我的 .xhtml 页面是：

```
<h:form id=...>
...
<p:dataTable var="webTemplate" id="templateTable" widgetVar="tbl1"/>
...
</h:form>

<h:form id=...>
...
<p:inputText id="txt_description" value="#{templateController.templateDescription}" label="templateDescription">
               <f:validateLength for="txt_name" minimum="1"/>
               <p:ajax event="change"
                     listener="#{calculatePageTable.setPageTableTemplate}"  onsuccess="setTabIndexTT()"/>
               </p:inputText>
...
</h:form>
<script type="text/javascript">
      function setTabIndexTT(){
                    tbl1.getPaginator().setPage(#{calculatePageTable.pageTableTemplate});
                }
      </script> 
```

豆：

```
@ManagedBean
@SessionScoped
public class CalculatePageTable {

   private int pageTableTemplate = 0;
   private int pageTableField = 0;

   public void setPageTableTemplate() {

      final DataTable d = (DataTable) FacesContext.getCurrentInstance().getViewRoot()
            .findComponent("form:templateTable");
      pageTableTemplate = d.getPageCount() - 1;

   }

   public int getPageTableTemplate() {
      return pageTableTemplate;
   }

   public void setPageTemplateField() {

      final DataTable d = (DataTable) FacesContext.getCurrentInstance().getViewRoot()
            .findComponent("detailsTable:webTemplateUpdateTable");
      pageTableField = (d.getPageCount() - 1);
   }

   public int getPageTableField() {
      return pageTableField;
   }

} 
```

但是onsuccess ajax永远不会调用js函数setTabIndexTT（）......

添加行时如何设置数据表的最后一页？

Primefaces 版本是 3.1.1

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-10T09:42:44.203

在您的托管 bean 中，您可以尝试以下代码：

```
public void setPageDataTable() {
    final DataTable d = (DataTable) FacesContext.getCurrentInstance().getViewRoot()
        .findComponent("form:templateTable");
    int first = 1;
    if (d.getRowCount() % ROWS_DATATABLE == 0) {
        first = (d.getRowCount() - ROWS_DATATABLE);
    }
    else 
    {
        first = (d.getRowCount()/ROWS_DATATABLE)*ROWS_DATATABLE;
    }
    d.setFirst(first);
} 
```

添加新行时调用此方法

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-11T14:11:39.783

如果数据表 widgetVar 是 dataTableWidget 然后使用这个：

```
<script type="text/javascript">
            $(document).ready(function () {
                dataTableWidget.paginator.setPage(0);
            });
 </script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T19:11:56.007

我会在没有任何 JavaScript 的情况下做到这一点。Primefaces的数据表有一个`first`属性，就是要显示的第一个数据的索引。

```
<p:dataTable first="#{calculatePageTable.first}"/>
...
<p:commandButton value="Add a row" action="#{calculatePageTable.addRow}"/> 
```

还有你的支持豆：

```
public class CalculatePageTable {
    private int first = 1;

    public int getFirst(){
        return first;
    }

    public void addRow(){
        // 1\. your stuff for adding the row 
        ...
        // 2\. switch to the row
        first = getFirstRowOnLastPage(); 
    }

    private int getFirstRowOnLastPage(){
        ...
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-31T15:13:23.003

您可以通过使用绑定来避免代码中的显式 ID：

xhtml:

```
<p:dataTable var="webTemplate" id="templateTable" widgetVar="tbl1" binding="#{calculatePageTable.dataTable" /> 
```

豆：

```
public class CalculatePageTable {
private DataTable dataTable;

public DataTable getDataTable() {
    return dataTable;
}

public void setDataTable(DataTable dataTable) {
    this.dataTable = dataTable;
}

/* See Teg's answer */
public void setPageDataTable() {
    int first = 1;
    if (dataTable.getRowCount() % ROWS_DATATABLE == 0) {
        first = (dataTable.getRowCount() - ROWS_DATATABLE);
    }
    else 
    {
        first = (dataTable.getRowCount()/ROWS_DATATABLE)*ROWS_DATATABLE;
    }
    dataTable.setFirst(first);
}
} 
```

# java - 对象层次结构

> ID：10006780
> 
> 赞同：1
> 
> 时间：2012-04-04T07:34:40.027
> 
> 标签：java, object, hierarchy

零售店的正确模式是什么？例如，公司从商店销售产品。

一家公司可以拥有许多商店并销售许多产品。这些产品不一定与每家商店相关联，或者我会这么认为。

我有一个基本任务，要求我设计一个系统来计算产品的经济订货量。我们应该实现一个适合以后分配的结构（我们没有详细信息..），建议的结构如下：

```
public class Company {
    private Store store;

    public static void main(String[] args)
    {
        Store storeOne = new Store();

        storeOne.setEOQRelevantValues(1, etc..);
    }
}

public class Store {
    private Product product;

    //..

    public setEOQRelevantValues(int eoqRelevantValues)
    {
        Product.setEOQRelevantValues(eoqRelevantValues);
    }
}

public class Product{
    private int eoqRelevantValues;

    //..

    public setEOQRelevantValues(int eoqRelevantValues)
    {
        this.eoqRelevantValues = eoqRelevantValues;
    }

    public int calculateEOQ()
    {
        //do stuff with this.eoqRelevantValues..
        return EOQ;
    }
} 
```

这似乎违反了我对 OOP 的所有了解。通过层次结构向下传递数据的方法 - 在对象之间复制参数？我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:41:10.527

您担心的是正确的，因为通过从上到下传递所有参数来初始化对象层次结构是不寻常的。

您的讲师可能暗示您按照复合模式的方式实现某些东西，即层次结构中的每个类共享一个公共方法（例如`getValue()`）。在 a `Product`（即叶节点）的情况下，这将简单地返回产品的值，而在 a `Store`or的情况下，`Company`它将遍历组成部分`Product`s（或`Store`s），调用`getValue()`并对结果求和。

这与您在上面编写的内容之间的主要区别在于，您通常会`Product`通过其构造函数单独初始化每个对象，而不是通过从另一个对象传入数据。如果产品是不可变的，您可以选择将其字段标记为`final`. 然后您可以选择将实用方法添加到层次结构中的其他类（例如`moveProduct(Store store1, Store store1)`）；换句话说，其他类将表现出行为而不仅仅是“数据容器”。

**例子**

```
/**
 * Optional interface for uniting anything that can be valued.
 */
public interface Valuable {
  double getValue();
}

/**
 * Company definition.  A company's value is assessed by summing
 * the value of each of its constituent Stores.
 */
public class Company implements Valuable {
  private final Set<Store> stores = new HashSet<Store>();

  public void addStore(Store store) {
    this.stores.add(store);
  }

  public void removeStore(Store store) {
    this.stores.remove(store);
  }

  public double getValue() {
    double ret = 0.0;

    for (Store store : stores) {
      ret += store.getValue();
    }

    return ret;
  }
}

/**
 * Store definition.  A store's value is the sum of the Products contained within it.
 */
public class Store implements Valuable {
  private final List<Product> products = new LinkedList<Product>();

  public void addProduct(Product product) {
    this.products.add(product);
  }

  public void removeProduct(Product product) {
    this.products.remove(product);
  }

  public double getValue() {
    double ret = 0.0;

    for (Product product : products) {
      ret += product.getValue();
    }

    return ret;
  }
}

/**
 * Product definition.  A product has a fixed inherent value.  However, you could
 * always model a product to depreciate in value over time based on a shelf-life, etc.
 * In this case you might wish to change the Valuable interface to accept a parameter;
 * e.g. depreciationStrategy.
 */
public class Product implements Valuable {
  private final double value;

  public Product(double value) {
    this.value = value;
  }

  public double getValue() {
    return value;
  }
} 
```

# java - 向 tar 文件添加条目而不覆盖其现有内容

> ID：10006781
> 
> 赞同：3
> 
> 时间：2012-04-04T07:34:40.853
> 
> 标签：java

我需要将配置文件添加到现有的 tar 文件中。我正在使用**apache.commons.compress**库。以下代码片段正确添加了条目，但会覆盖 tar 文件的现有条目。

```
public static void injectFileToTar () throws IOException, ArchiveException {
        String agentSourceFilePath = "C:\\Work\\tar.gz\\";
        String fileToBeAdded = "activeSensor.cfg";
        String unzippedFileName = "sample.tar";

    File f2 = new File(agentSourceFilePath+unzippedFileName); // Refers to the .tar file
    File f3 = new File(agentSourceFilePath+fileToBeAdded);    // The new entry to be added to the .tar file

    // Injecting an entry in the tar
    OutputStream tarOut = new FileOutputStream(f2);
    TarArchiveOutputStream aos = (TarArchiveOutputStream) new  ArchiveStreamFactory().createArchiveOutputStream("tar", tarOut);
    TarArchiveEntry entry = new TarArchiveEntry(fileToBeAdded);
    entry.setMode(0100000);
    entry.setSize(f3.length());
    aos.putArchiveEntry(entry);
    FileInputStream fis = new FileInputStream(f3);
    IOUtils.copy(fis, aos);
    fis.close();
    aos.closeArchiveEntry();
    aos.finish();
    aos.close();
    tarOut.close(); 
```

}

在检查 tar 时，仅找到“activeSensor.cfg”文件，并且发现 tar 的初始内容丢失。“模式”是否设置不正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:16:06.470

问题是`TarArchiveOutputStream`不会自动读取现有存档，这是您需要做的事情。类似于以下内容：

```
CompressorStreamFactory csf = new CompressorStreamFactory();
ArchiveStreamFactory asf = new ArchiveStreamFactory();

String tarFilename = "test.tgz";
String toAddFilename = "activeSensor.cfg";
File toAddFile = new File(toAddFilename);
File tempFile = File.createTempFile("updateTar", "tgz");
File tarFile = new File(tarFilename);

FileInputStream fis = new FileInputStream(tarFile);
CompressorInputStream cis = csf.createCompressorInputStream(CompressorStreamFactory.GZIP, fis);
ArchiveInputStream ais = asf.createArchiveInputStream(ArchiveStreamFactory.TAR, cis);

FileOutputStream fos = new FileOutputStream(tempFile);
CompressorOutputStream cos = csf.createCompressorOutputStream(CompressorStreamFactory.GZIP, fos);
ArchiveOutputStream aos = asf.createArchiveOutputStream(ArchiveStreamFactory.TAR, cos);

// copy the existing entries    
ArchiveEntry nextEntry;
while ((nextEntry = ais.getNextEntry()) != null) {
    aos.putArchiveEntry(nextEntry);
    IOUtils.copy(ais, aos, (int)nextEntry.getSize());
    aos.closeArchiveEntry();
}

// create the new entry
TarArchiveEntry entry = new TarArchiveEntry(toAddFilename);
entry.setSize(toAddFile.length());
aos.putArchiveEntry(entry);
IOUtils.copy(new FileInputStream(toAddFile), aos, (int)toAddFile.length());
aos.closeArchiveEntry();

aos.finish();

ais.close();
aos.close();

// copies the new file over the old
tarFile.delete();
tempFile.renameTo(tarFile); 
```

几点注意事项：

*   此代码不包含任何异常处理（请添加相应的`try-catch-finally`块）
*   此代码不处理大小超过 2147483647 ( `Integer.MAX_VALUE`) 的文件，因为它仅将文件大小读取为整数精度字节（请参阅强制转换为 int）。但是，这不是问题，因为 Apache Compress 无论如何都不能处理超过 2 GB 的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:09:20.170

尝试改变

`OutputStream tarOut = new FileOutputStream(f2);`

至

`OutputStream tarOut = new FileOutputStream(f2, true);`//设置追加为真

# image - 使用 BIRT 在 PDF 中包含动态图像

> ID：10006782
> 
> 赞同：2
> 
> 时间：2012-04-04T07:34:41.063
> 
> 标签：image, pdf, dynamic, birt, rowset

我正在尝试使用 BIRT 2.5.0 生成 pdf 文件。BIRT 是从 pHp 调用的（这要归功于 JavaBridge 和 Tomcat 服务器）。

我只是想创建一个复选框，在某些条件下进行检查。我在互联网上看了一点，发现了两种不同的方法。

第一种方法是如果字段“idclassebillet”（我在其上进行测试）的值为1，则使用可见性。我是这样做的：

```
<image id="9010">
    <list-property name="visibility">
        <structure>
            <property name="format">all</property>
            <expression name="valueExpr" type="javascript">row["classEq1"]</expression>
        </structure>
    </list-property>
    <list-property name="boundDataColumns">
        <structure>
            <property name="name">classEq1</property>
            <text-property name="displayName">classEq1</text-property>
            <expression name="expression" type="javascript">dataSetRow["idclassebillet"] == 1</expression>
            <property name="dataType">boolean</property>
        </structure>
    </list-property>
    <property name="source">embed</property>
    <property name="imageName">checkbox_unchecked.png</property>
</image> 
```

但这不起作用。

所以我发现的第二个解决方案是使用一个简单的 URL。这个解决方案更方便，但也不起作用。这看起来像那样。

```
<image id="9018">
    <property name="source">url</property>
    <list-property name="boundDataColumns">
        <structure>
            <property name="name">classEq1</property>
                <text-property name="displayName">classEq1</text-property>
                <expression name="expression" type="javascript">dataSetRow["idclassebillet"]</expression>
            <property name="dataType">integer</property>
        </structure>
    </list-property>
    <expression name="uri" type="javascript">
        if(row["classEq1"] == 1)
            "http://my.server.com/checkbox_checked.png"+row["classEq1"];
        else
            "http://my.server.com/checkbox_unchecked.png"+row["classEq1"];
    </expression>
</image> 
```

在这两种情况下，我都像这样声明字段“dataSetRow[“idfield”]”：

```
<data-sets>
    <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="infoBordereau" id="178">
        <structure name="cachedMetaData">
            <list-property name="resultSet">
            ...
                <structure>
                    <property name="position">9</property>
                    <property name="name">idclassebillet</property>
                    <property name="dataType">integer</property>
                </structure>
            ...
        </structure>
        <property name="dataSource">GestionBillet</property>
        <list-property name="resultSet">
            ...
            <structure>
                <property name="position">8</property>
                <property name="name">idclassebillet</property>
                <property name="nativeName">idclassebillet</property>
                <property name="dataType">integer</property>
            </structure>
            ...
        </list-property>
    ....
    </oda-data-set>
</data-sets> 
```

我检查了我是否可以访问“idclassebillet”的内容。如果我只是以这种方式打印它，它可以正常工作：

```
<data id="90060001">
    <property name="whiteSpace">nowrap</property>
    <property name="dataSet">infoBordereau</property>
    <list-property name="boundDataColumns">
        <structure>
            <property name="name">classEq1</property>
            <text-property name="displayName">classEq1</text-property>
            <expression name="expression" type="javascript">dataSetRow["idclassebillet"]</expression>
            <property name="dataType">integer</property>
        </structure>
    </list-property>
    <property name="resultSetColumn">classEq1</property>
</data> 
```

无论我选择哪种解决方案来获取我的“动态”图像，我总是得到相同的图像，无论“dataSetRow [”idclassebillet“]”的值是什么。我没有问题访问和打印图像。问题更多的是“测试”“idclassebillet”字段的值（即我如何访问该字段？）。

我希望你明白我想要做什么。如果您有更好的解决方案（如果可能，还有工作代码示例），请不要犹豫分享^^ :)

非常感谢，

拉斐尔·波伊特文

注意：起初，我希望将我的图像嵌入到文档中（这是我在第一个解决方案中使用的），但由于这不起作用，我使用了托管在[http://my.server.com](http://my.server.com)上的图像。 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:46:57.640

如果您的目标是显示未选中/选中的复选框，您是否考虑过使用带有字符 0xA8 和 0xFD 或 0xFE 的 Wingdings 字体？

# iphone - 创建具有自定义大小的 UIActionsheet

> ID：10006784
> 
> 赞同：2
> 
> 时间：2012-04-04T07:34:48.090
> 
> 标签：iphone, objective-c

我试图用 UIDatepicker 制作一个动作表，当按钮单击时，这个动作表是打开的，我想制作像弹出框这样的动作表，但这不起作用

```
 UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:@"Pick Value"
                                                      delegate:self
                                             cancelButtonTitle:@"Done"
                                        destructiveButtonTitle:nil
                                             otherButtonTitles:nil];

    UIDatePicker *pickerView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0,180,0,0)];

    [menu addSubview:pickerView];
    [menu showInView:self.view.superview];

    //Change the height value in your CGRect to change the size of the actinsheet
    [menu setBounds:CGRectMake(0,0,400,400)];

    [pickerView release]; 
    [menu release]; 
```

问题是这里只有一行操作表显示，没有绑定 400*400 我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:54:12.137

我已经尝试了您的代码，并且 setBounds 在我的情况下更改了操作表的大小。

无论如何，您也可以尝试在委托的方法中更改工作表的框架

```
- (void)didPresentActionSheet:(UIActionSheet *)actionSheet 
```

它将确保在您尝试更新框架时已经创建了操作表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:59:44.777

在 .m 文件上执行此操作

```
UIViewController *popoverContent = [[UIViewController alloc]init];
UIView *popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 768, 1024)];

    datepiker= [[UIDatePicker alloc]init];
    [datepiker setFrame:CGRectMake(0, 0, 320, 216)];
    datepiker.datePickerMode=UIDatePickerModeDateAndTime;
    datepiker.hidden=NO;
    datepiker.minimumDate=[NSDate date];

    [self.view addSubview:datepiker];

    [datepiker release];
   // [datepiker addTarget:self action:@selector(changedDate:) forControlEvents:UIControlEventValueChanged];

    btn_add=[[UIButton alloc]initWithFrame:CGRectMake(115, 250, 100, 30)];
    [btn_add setTitle:@"Add" forState:UIControlStateNormal];
    [btn_add setFont:[UIFont fontWithName:@"Arial-BoldMT" size:20]];
    [btn_add setBackgroundColor:[UIColor redColor]];
    [btn_add addTarget:self action:@selector(AddDate:) forControlEvents:UIControlEventTouchUpInside];
    [popoverView addSubview:btn_add];

    btn_cancel=[[UIButton alloc]initWithFrame:CGRectMake(115, 300, 100, 30)];
    [btn_cancel setTitle:@"Cancel" forState:UIControlStateNormal];
    [btn_cancel setFont:[UIFont fontWithName:@"Arial-BoldMT" size:20]];
    [btn_cancel setBackgroundColor:[UIColor redColor]];
    [btn_cancel addTarget:self action:@selector(CancelDate:) forControlEvents:UIControlEventTouchUpInside];
    [popoverView addSubview:btn_cancel];

    [popoverView addSubview:datepiker];
    [popoverView addSubview:btn_add];
    popoverContent.view = popoverView;
    popoverContent.contentSizeForViewInPopover = CGSizeMake(320,350);

    self.popoverController = [[UIPopoverController alloc]
                                  initWithContentViewController:popoverContent];
    [self.popoverController  presentPopoverFromRect:CGRectMake(400,-150, 320,220) 
                                                 inView:self.view permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
        }

    [popoverView release];
    [popoverContent release];

}

-(void)AddDate:(id)sender
{
}
-(void)CancelDate:(id)sender
{
[popoverController dismissPopoverAnimated:YES];

} 
```

在 .h 文件上执行此操作并添加 UIPickerViewDelegate,UIPopoverControllerDelegate

```
{
UIPopoverController *popoverController;
UIDatePicker *datepiker;
UIPickerView *picker;
UIButton *btn_add;
UIButton *btn_cancel;
}
@property(nonatomic,retain)IBOutlet UIDatePicker *datepiker;
@property(nonatomic,retain)IBOutlet UIPickerView *picker;
@property(nonatomic,retain)UIPopoverController *popoverController;
@property(nonatomic,retain)UIButton *btn_add;
@property(nonatomic,retain)UIButton *btn_cancel;
-(void)AddDate:(id)sender;
-(void)CancelDate:(id)sender; 
```

这对我有用。恩乔伊

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:39:50.173

```
UIActionSheet *menu = [[UIActionSheet alloc] initWithTitle:@"Pick Value"
                                                  delegate:self
                                         cancelButtonTitle:@"Done"
                                    destructiveButtonTitle:nil
                                         otherButtonTitles:nil];

UIDatePicker *pickerView = [[UIDatePicker alloc] initWithFrame:CGRectMake(0,180,0,0)];

[menu addSubview:pickerView];
[menu showInView:self.view.superview];

[menu setFrame:CGRectMake(0,0,320,400)]; //used setFrame instread of setBounds

[pickerView release]; 
[menu release]; 
```

# android - 创建自定义 hashmapadapter

> ID：10006789
> 
> 赞同：0
> 
> 时间：2012-04-04T07:35:24.010
> 
> 标签：android

如果我有一个包含以下内容的哈希图：

```
Hashmap contains (String, String) 
```

如何实例化自定义适配器？自定义适配器应该扩展 baseadapter。我需要将键和值结合起来，使其看起来像“KEY+VALUE”、“KEY+VALUE”......并将其分配给数组 VALUES。稍后在我实例化我的自定义适配器时使用数组 VALUES。

实例化应该是这样的：

```
MyCustomAdapter adapter = new MyCustomAdapter(this, android.R.layout.simple_list_item_1, VALUES);   
setListAdapter(adapter) 
```

我在这里迷路了，所以代码会有很大帮助。

谢谢格雷厄姆

以下列表使用名为 items 的字符串数组作为其数据源。

```
public ArrayList<String> myList = new ArrayList<String>(Arrays.asList(items)); 
```

但是 items 是一个字符串数组，我想停止使用它，而是开始使用我的 hashmap 中的连接键+值对

因此，不会向用户显示项目列表，而是向用户显示从哈希映射 hm 中获取的键+值对列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:51:56.953

我认为您不需要使用自定义适配器。你的布局很简单，你只需要一个textView，所以你可以使用ArrayAdapter。对于您的示例，您可以执行以下操作：

```
HashMap<Integer,String>hm=new HashMap<Integer,String>();
Vector<String>elements=new Vector<String>(); 
```

> ```
>  for(int i=0; i<=10;i){      
>       hm.put(i,("num"+i));
>     }
>     for (Entry<Integer, String> e : hm.entrySet()) {
>         String newString=e.toString();
>         elements.add(newString);
>     }
>     ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, elements);
>     list.setAdapter(adapter); 
> ```

# asp.net - 流利的验证不适用于复杂属性 Asp.Net

> ID：10006796
> 
> 赞同：2
> 
> 时间：2012-04-04T07:35:50.653
> 
> 标签：asp.net, fluentvalidation

我是 Fluent 验证的新手，需要一些帮助。我有一个接口，它有另一个接口一个属性，并且我已经为这两个接口编写了验证。挑战在于它没有显示接口属性的验证消息。

以下是我的情况的代码

```
public interface IAddress
{
    string City { get; set; }
    string Town { get; set; }
}

public interface IAccount
{
    string FullName { get; set; }
    int Age { get; set; }
    IAddress Address { get; set; }
}

    public AccountValidator ()
    {
        RuleFor(x => x.FullName).NotEmpty().WithMessage("Full Name  can not  be  empty");
        RuleFor(x => x.Age).GreaterThan(18).WithMessage("Age cannot  be  less  than 18 years");
        RuleFor(x => x.Address).SetValidator( new AddressValidator()); 
    }

    public AddressValidator()
    {
        RuleFor(x => x.City).NotEmpty().NotNull().WithMessage("City can not  be empty");
        RuleFor(x => x.Town).NotEmpty().NotNull().WithMessage("Town can not  be empty"); 
    } 
```

我用来调用验证的客户端代码是：

```
 var accountValidator = new AccountValidator();

         accountValidator.ValidateAndThrow(_account ); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:20:23.900

好吧，我尝试了一个迷你控制台应用程序，并且很好地捕捉到了异常（年龄 + 城市）（我只是用 Must(...) 更改了 NotEmpty().NotNull()，因为您需要为每个应用程序放置一个特定的“WithMessage”或他们）。

所以我误解了你的问题吗？

```
public interface IAddress
    {
        string City { get; set; }
        string Town { get; set; }
    }

    public interface IAccount
    {
        string FullName { get; set; }
        int Age { get; set; }
        IAddress Address { get; set; }
    }

    public class Address : IAddress
    {
        public string City { get; set; }
        public string Town { get; set; }
    }
    public class Account : IAccount
    {
        public string FullName { get; set; }
        public int Age { get; set; }
        public IAddress Address { get; set; }
    }

    public class AccountValidator : AbstractValidator<IAccount>
    {
        public AccountValidator()
        {
            RuleFor(x => x.FullName).NotEmpty().WithMessage("Full Name  can not  be  empty");
            RuleFor(x => x.Age).GreaterThan(18).WithMessage("Age cannot  be  less  than 18 years");
            RuleFor(x => x.Address).SetValidator(new AddressValidator());
        }
    }

    public class AddressValidator : AbstractValidator<IAddress>
    {
        public AddressValidator()
        {
            RuleFor(x => x.City).Must(x => !string.IsNullOrEmpty(x)).WithMessage("City can not  be empty");
            RuleFor(x => x.Town).Must(x => !string.IsNullOrEmpty(x)).WithMessage("Town can not  be empty");
        }
    }

    class Program
    {
        static void Main(string[] args)
        {

            var account = new Account
                               {
                                   Address = new Address
                                                 {
                                                     City = "",
                                                     Town = "Town"
                                                 },
                                   Age = 18,
                                   FullName = "FullName"
                               };
            var accountValidator = new AccountValidator();
            try
            {
                accountValidator.ValidateAndThrow(account);
            }
            catch (ValidationException e)
            {
                Console.WriteLine(e);
            }
            Console.ReadKey();

        }
    } 
```

# php - 使用 JavaScript 进行 RPC（远程过程调用）

> ID：10006799
> 
> 赞同：2
> 
> 时间：2012-04-04T07:36:06.423
> 
> 标签：php, javascript, json, xmlhttprequest, rpc

从网页或 JavaScript 代码执行 RPC（远程过程调用）的最佳方式是什么？如果可能的话，我想把它保存在 JavaScript 中，这样我就可以对网页进行实时更新，而不必在 PHP 中做任何事情，以防我的服务器出现故障我仍然希望 JavaScript 来处理页面更新......甚至可能向一个在本地运行的 python shell 脚本......这对 JavaScript 是否合法？

我更喜欢让远程机器处理请求。我看到很多关于 XMLRPC 或 JSONRPC 如何做到这一点的讨论，但是我还没有看到任何好的例子。我猜微软建议使用他们的 XMLhttprequest 但是，我没有看到任何不使用他们的 ActiveX 调用或需要 Internet Explorer 的特殊代码的东西......我只是想要一些简单的方法将命令传递给一些 python/ruby/c++来自网页的代码。

Python 服务器代码（等待 RPC 请求）：

```
import xmlrpclib
from SimpleXMLRPCServer import SimpleXMLRPCServer
def my_awesome_remote_function(str):
    return str + "awesome"
server = SimpleXMLRPCServer(("localhost", 8000))
print "Listening on port 8000..."
server.register_function(is_even, "is_even")
server.serve_forever() 
```

示例 JavaScript 代码：

```
var client = rpc.server("http://localhost:8000/");
var my_local_variable = client.my_awesome_remote_function(param); 
```

是否有一个好的 JSON/JavaScript 示例有人可以指向我，它向服务器发送请求并从该服务器获取一些数据？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:52:07.090

它几乎不会以这种方式工作：`client.my_awesome_remote_function`. js 没有像`__call`php 那样的魔法。此外，远程调用在 js 中主要是使用回调的思想异步完成的 - 完成某些任务后调用的函数。

```
var client = rpc.server("http://localhost:8000/");
var my_local_variable;
client.rpc('my_awesome_remote_function', [param], function(result) {
    my_local_variable = result;
}); 
```

您可以轻松找到有关该调用的教程。只需谷歌“ajax教程”。例如：[http](http://www.w3schools.com/ajax/ajax_intro.asp) ://www.w3schools.com/ajax/ajax_intro.asp （虽然 w3schools 不是最好的网站，而且在一些细节上有错误，但它仍然适合初学者）。

所有 ajax 实现都使用现代 XMLHttpRequest 和旧版 IE 的 ActiveX 控件。

可以同步运行这些请求，但从用户体验的角度来看，这被认为是非常糟糕的。此外，无论如何，您都需要处理回调的概念。

# dojo - Dojo Dropdownbutton/TooltipDialog 替代方案

> ID：10006807
> 
> 赞同：1
> 
> 时间：2012-04-04T07:37:05.577
> 
> 标签：dojo, widget, tooltip

我想知道在使用 TooltipDialog 时是否有 dijit.form.DropDownButton 的替代方案。在dojo指南参考上它说“TooltipDialog只能由其他小部件打开，通常是DropDownButton”，但我不希望那样。

我真正想要的，也许是很多人，是声明性的方式来调用对话框单击图像/链接/或其他任何东西，而不仅仅是按钮。这类似于 Tooltip 小部件对 connectId 所做的事情。

查看我正在寻找的样本：

```
<div dojoType="MyWidget">
  <img src="test.png" /><!-- this image will be clickable to open dialog -->
  <div dojoType="dijit.TooltipDialog">Text here</div>
</div> 
```

有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T12:00:01.647

您可以扩展`dijit.form.DropDownButton`并提供一个只是图像的 html 模板。

# iphone - 如何卸载 xcode 并安装另一个版本？

> ID：10006813
> 
> 赞同：2
> 
> 时间：2012-04-04T07:37:17.450
> 
> 标签：iphone, objective-c, ios, xcode, cocoa-touch

> **可能重复：**
> [卸载 Xcode 4 并使用 Xcode 3](https://stackoverflow.com/questions/5463436/uninstall-xcode-4-and-use-xcode-3)

我是阿巴斯。我是 iPhone 编程的新手。

明天我已将我的 xcode 从 3.2 版更新到 4.2，但我无法使用它。

我必须从我的 mac 卸载 xcode 4.2 并安装 xcode 3.2。

我已经设置了两个版本，但我不知道卸载 xcode 的过程。

所以。

请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:39:24.417

打开终端并使用以下命令：

```
sudo /Developer/Library/uninstall-devtools –mode=all 
```

如果您的 XCode 在不同的目录中，请使用该路径。之后，您可以删除 /Developer 目录的其余部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:52:47.977

从 Xcode 4.3 开始，xcode 可在 mac app store 上找到。如果您从 mac 应用商店下载它，它将安装在此文件夹中：`/Applications/Xcode.app`.

如果 xcode 版本低于 4.3，可以在安装向导中更改安装目录。默认安装目录在`/Developer`文件夹中。如果您在安装 xcode4.2 时选择了默认文件夹，并且 xcode3.2 也在该文件夹中。xcode3.2 将被覆盖并删除。

如果要同时保留 xcode 4.2 和 3.2，可以将它们安装在不同的文件夹中。例如，我在文件夹中安装了 xcode 3.2，在文件夹中安装了`/xcode3`xcode 4.2 `/xcode4`，并且我在文件夹中也有一个 xcode4.3 `/Applications/Xcode.app`。

问题是最新的 ios 模拟器仅在最新的 xcode 中可用。例如，ios5.1 模拟器仅在 xcode4.3 中可用。所以，也许我们应该花点时间熟悉一下最新的 xcode。

希望它会有所帮助。

# amazon-ec2 - 使用 aws sdk 命令行进行自动缩放的 Cloud Formation

> ID：10006822
> 
> 赞同：4
> 
> 时间：2012-04-04T07:38:07.790
> 
> 标签：amazon-ec2, scalability, amazon-cloudformation

我正在使用 aws sdk 进行[自动缩放命令行工具](http://aws.amazon.com/autoscaling/)。我想知道如何通过这个命令行工具使用云形成？即我们可以给模板id而不是instance/ami id吗？

例子：

```
as-create-launch-config MyLC --image-id <CF tamplete id> --instance-type m1.small 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:08:38.833

> 我们可以给模板 id 而不是实例/ ami id 吗？

不可以，目前仅将[Auto Scaling](http://aws.amazon.com/autoscaling/)与[AWS CloudFormation](http://aws.amazon.com/cloudformation/)结合使用：

*   [AWS CloudFormation](http://aws.amazon.com/cloudformation/)完全支持所有*Auto Scaling*资源，例如[AWS::AutoScaling::AutoScalingGroup](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-group.html)、[AWS::AutoScaling::LaunchConfiguration](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/aws-properties-as-launchconfig.html)等，有关所有可用资源的详细信息，请参阅[AWS 资源类型参考](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/aws-template-resource-type-ref.html)；还有一些与*Auto Scaling*相关的[AWS CloudFormation 示例模板](http://aws.amazon.com/cloudformation/aws-cloudformation-templates/)可以帮助您入门：

    *   [AutoScalingKeepAtNSample.template](https://s3.amazonaws.com/cloudformation-templates-us-east-1/AutoScalingMultiAZSample.template) -*使用 Auto Scaling 组管理一组 EC2 实例的示例。*

    *   [AutoScalingMultiAZSample.template](https://s3.amazonaws.com/cloudformation-templates-us-east-1/AutoScalingMultiAZSample.template) -*使用负载平衡的 Auto Scaling 组的示例，该组跨越多个 EC2 可用区。此模板已更新为使用 Auto Scaling 策略。*

    *   [AutoScalingMultiAZWithNotifications.template](https://s3.amazonaws.com/cloudformation-templates-us-east-1/AutoScalingMultiAZWithNotifications.template) -*使用跨越多个 EC2 可用区的负载平衡 Auto Scaling 组的示例。此模板使用 Auto Scaling 策略并配置 Auto Scaling 通知，以便您可以在发生扩展事件时收到电子邮件。*

*   然后，您可以使用[AWS CloudFormation 命令行工具](http://aws.amazon.com/developertools/2555753788650372)将您的模板与所述*Auto Scaling*资源一起使用，例如通过[cfn-create-stack](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/create-stack.html)、[cfn-update-stack](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/update-stack.html)等，有关所有可用的详细信息，请参阅[命令行工具参考](http://docs.amazonwebservices.com/AWSCloudFormation/latest/UserGuide/CFN_CMD.html)命令。

# android - 通过代码设置Android动态壁纸，无需用户交互

> ID：10006826
> 
> 赞同：2
> 
> 时间：2012-04-04T07:38:46.043
> 
> 标签：android, service, live-wallpaper

我想通过代码自动设置Android中的动态壁纸，没有任何用于壁纸选择的用户界面。

通过代码可以自动设置简单的壁纸设置：

```
final WallpaperManager wallpaperManager = WallpaperManager.getInstance(this);
final Drawable wallpaperDrawable = wallpaperManager.getDrawable(); 
final ImageView imageView = (ImageView) findViewById(R.id.imageview);
imageView.setDrawingCacheEnabled(true); 
imageView.setImageDrawable(wallpaperDrawable); 
```

现在我必须使用服务自动设置动态壁纸，这样动态壁纸应该每天在屏幕上自动设置。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T18:26:02.513

Android 操作系统不允许您以编程方式设置动态壁纸。您只能对静态壁纸执行此操作。您可以获得的最接近的方法是使用此方法：以[编程方式设置动态壁纸](https://stackoverflow.com/questions/4831499/setting-live-wallpaper-programatically)。

# javascript - django 如何处理大文件（图片）上传> 400MB

> ID：10006827
> 
> 赞同：2
> 
> 时间：2012-04-04T07:38:48.970
> 
> 标签：javascript, django, file-upload, progress-bar, swfupload

我以前从来没有这样做过。我敢肯定，我需要一个进度条来通知用户。有什么建议我应该走哪条路？使用 Flash 上传器 (swfupload) 或 XMLHttpRequest 的“更酷”的方式。

*   [https://github.com/valums/ajax-upload](https://github.com/valums/ajax-upload)
*   [http://www.sitepoint.com/html5-javascript-file-upload-progress-bar/](http://www.sitepoint.com/html5-javascript-file-upload-progress-bar/)

感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T09:09:40.250

试试[http://www.plupload.com/](http://www.plupload.com/)。它已经有上传进度状态。但不要忘记在请求中发送 csrf。我在 magnitofoto.ru 的商店中使用它：![http://i.imgur.com/jTGKD.png](../Images/6ad105386f4578d88955ac6d3fb15105.png)

# jquery - 使用 jquery 在“li”下查找链接的类名

> ID：10006835
> 
> 赞同：0
> 
> 时间：2012-04-04T07:39:24.147
> 
> 标签：jquery

单击任何 li 元素后，我想在警报框中获取链接的类名（'a' 元素）。例如，单击“一”将显示“m”，对于“二”，将显示“n”；

html:

```
<ul>
<li ><a class="m">One</a></li>
<li><a class="n">Two</a></li>

</ul> 
```

javascript:

```
<script type="text/javascript">

var my_func=function(){

var link_class; // find this class name

alert("link class name  ="+ link_class);

};

$(document).ready(function(){

$('ul li').click(my_func);

});

</script> 
```

如何使用 jquery 找到变量“link_class”的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:41:14.710

```
var my_func = function(){
   var link_class = $(this).find('a').attr('class'); // find this class name
   alert("link class name  ="+ link_class);
};

$('ul li').click(my_func); 
```

或者以更短的方式，不使用表达式函数的新变量

```
$('ul li').click(function() {
    var link_class = $(this).find('a').attr('class'); // find this class name
    alert("link class name  ="+ link_class);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:42:39.403

```
<script type="text/javascript">

var my_func=function(){

var link_class; // find this class name

link_class = $(this).children('a').attr('class');

alert("link class name  ="+ link_class);

};

$(document).ready(function(){

$('ul li').click(my_func);

});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:38:16.260

```
$("li a").click(function(){
    alert($(this).attr('class'));
}); 
```

# google-maps - primefaces p:gmap 在复合组件中，OverlaySelectEvent 为 null

> ID：10006846
> 
> 赞同：3
> 
> 时间：2012-04-04T07:39:55.910
> 
> 标签：google-maps, jsf, jakarta-ee, primefaces

# 环境：

1、玻璃鱼3.1

2、素面3.0.1

# 要求：

1、开发一个名为“corpInfoMap”的复合组件，将公司在谷歌地图中的位置显示为“标记”。当用户单击标记时，在 mapInfoWindow 中显示公司的信息。

2、开发另一个名为“corpInfoMapDialog”的复合组件，即ap:dialog包含“corpInfoMap”。

# 问题：

**地图在页面或对话框中都非常出色。但是当用户单击地图中的标记时：**

**传递给侦听器方法的“OverlaySelectEvent”（事件）为 NULL。所以“event.getOverlay()”会抛出 NullPonterException。**

# 代码：

## 1 corpInfoMap.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:cc="http://java.sun.com/jsf/composite" 
    xmlns:p="http://primefaces.org/ui" 
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:c="http://java.sun.com/jsp/jstl/core" 
    xmlns:f="http://java.sun.com/jsf/core"
>
<cc:interface displayName="单位地理信息">
    <cc:attribute name="mapModel" required="true" displayName="地理信息Model,com.ui.fwjg.viewModel.CorporationMapModel类型" />
    <cc:attribute name="selectedListener" required="true" method-signature="void method(org.primefaces.event.map.OverlaySelectEvent)" displayName="选择锚点的方法" />
</cc:interface>
<cc:implementation>
    <f:view contentType="text/html">
    <p:gmap zoom="#{cc.attrs.mapModel.zoom}" 
            type="HYBRID" 
            center="#{cc.attrs.mapModel.centerWd},#{cc.attrs.mapModel.centerJd}" 
            style="width:#{cc.attrs.mapModel.width}px;height:#{cc.attrs.mapModel.height}px;"
            model="#{cc.attrs.mapModel.model}"
            >
        <p:ajax event="overlaySelect" listener="#{cc.attrs.selectedListener}"></p:ajax>
         <p:gmapInfoWindow rendered="#{cc.attrs.mapModel.selectedMarker != null}" maxWidth="#{cc.attrs.mapModel.width / 2}">
            <p:outputPanel style="text-align:center;display:block;margin:auto:" rendered="#{cc.attrs.mapModel.selectedMarker != null}">
                <h:panelGroup style="width:100%;font-size:1.5em;line-height:2em;font-weight:bold;text-align:center;">
                    #{cc.attrs.mapModel.selectedMarker.data.dwmc}
                </h:panelGroup>
                <h:panelGroup layout="block" styleClass="com-ui-clearboth"></h:panelGroup>
                <h:graphicImage rendered="#{not empty cc.attrs.mapModel.selectedMarker.data.dwsltFile}" 
                                style="max-width:#{cc.attrs.mapModel.width / 2};display:block;margin:20px auto;" 
                                url="/file.ui?f=#{cc.attrs.mapModel.selectedMarker.data.dwsltFile}"></h:graphicImage> 
                <h:outputText value="#{mapBean.marker.title}" />
                <h:panelGroup layout="block" styleClass="com-ui-clearboth"></h:panelGroup>
                <h:outputText rendered="#{not empty cc.attrs.mapModel.selectedMarker.dwjj}" 
                                value="&lt;p style=&quot;font-size:1em;line-height:1.5em;text-indent:2em;&quot;&gt;"
                                escape="false"></h:outputText>
                    <h:outputText rendered="#{not empty cc.attrs.mapModel.selectedMarker.dwjj}" value="#{cc.attrs.mapModel.selectedMarker.dwjj}">
                    </h:outputText>
                <h:outputText rendered="#{not empty cc.attrs.mapModel.selectedMarker.dwjj}" value="&lt;/p&gt;" escape="false"></h:outputText>
            </p:outputPanel> 
        </p:gmapInfoWindow>  
    </p:gmap>
    </f:view>
</cc:implementation> 
```

## 2 corpInfoMapDialog.xhtml

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
    xmlns="http://www.w3.org/1999/xhtml" 
    xmlns:cc="http://java.sun.com/jsf/composite" 
    xmlns:p="http://primefaces.org/ui" 
    xmlns:ui="http://java.sun.com/jsf/facelets" 
    xmlns:h="http://java.sun.com/jsf/html" 
    xmlns:c="http://java.sun.com/jsp/jstl/core" 
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:comuicommon="http://java.sun.com/jsf/composite/components/ui/common">
<!-- INTERFACE -->
<cc:interface displayName="单位地理信息窗口">
    <cc:attribute name="mapModel" required="true" displayName="地理信息Model,com.ui.fwjg.viewModel.CorporationMapModel类型" />
    <cc:attribute name="selectedListener" required="true" method-signature="void method(javax.faces.component.behavior.AjaxBehavior)" displayName="选择锚点的方法" />
    <cc:attribute name="dialogId" default="corpInfoMapDialog" displayName="对话框的ID" />
</cc:interface>
<cc:implementation>
    <p:dialog header="单位地理信息" widgetVar="#{cc.attrs.dialogId}" id="#{cc.attrs.dialogId}" width="#{cc.attrs.mapModel.width}">
        <h:panelGroup rendered="#{cc.attrs.mapModel != null and cc.attrs.mapModel.model != null and (not empty cc.attrs.mapModel.model.markers)}" layout="block">
            <comuicommon:corpInfoMap mapModel="#{cc.attrs.mapModel}" selectedListener="#{cc.attrs.selectedListener}"/>
        </h:panelGroup>
        <h:panelGroup rendered="#{not (cc.attrs.mapModel != null and cc.attrs.mapModel.model != null and (not empty cc.attrs.mapModel.model.markers))}" 
                    layout="block" style="font-size:2em;text-align:center;">
            该单位无地理信息。
        </h:panelGroup>
    </p:dialog>
</cc:implementation>
</html> 
```

## 3 后备豆（其中之一）：

```
@ManagedBean
@ViewScoped
public class JlltWssbDjjsbEditPage  implements Serializable{

    ... // a lot of lines
    private CorporationMapModel corporationMapModel;

    @PostConstruct
    public void init() {
        corporationMapModel = new CorporationMapModel();
        ... // other codes, have no business with corporationMapModel.
    }

    // the OverlaySelectEvent listener method
    // when user click the marker in map, this method is invoked, but the parameter "evnet" is null.
    public void setSelectedMarker(OverlaySelectEvent event){
        corporationMapModel.onMarkerSelect(event);
    }

    public CorporationMapModel getCorporationMapModel() {
        return corporationMapModel;
    }

    public void setCorporationMapModel(CorporationMapModel corporationMapModel) {
        this.corporationMapModel = corporationMapModel;
    }

    // reset the jsb, reset the corporationMapModel's properties(only it's properties, neither it nor the mapModel in it.)
    public void setJsb(JlltWssbDjjsb jsb) {
        this.jsb = jsb;
        Corporation corporation = jsb == null ? null : (jsb.getWineInfo() == null ? null : jsb.getWineInfo().getCorporation());
        corporationMapModel.resetModel(corporation);
        setShowHistory(jsb != null);
        initWineInfo();
    }

    ... // a lot of lines, have no business with 
} 
```

## 4 CorporationMapModel.java

```
public class CorporationMapModel implements Serializable{
    private List<Corporation> corporations; // 企业列表 corporation list
    private MapModel model; // 地理信息Model primefaces map model
    private String centerJd; // 地图中间位置-经度 lng
    private String centerWd; // 地图中间位置-维度 lat
    private String zoom; // 地图缩放级别 gmap zoom
    private Marker selectedMarker; // 被选择的Marker selected marker(overlay)
    private int width = 600; // the width(px) of the map
    private int height = 480; // the height(px) of the map 

    public void resetModel(Corporation corporation) {
        List<Corporation> corporations = new ArrayList<Corporation>();
        if(corporation != null){
            corporations.add(corporation);
        }
        setCorporations(corporations);
    }
    public void resetModel(List<Corporation> corporations) {
        corporations = corporations == null ? new ArrayList<Corporation>() : corporations;
        setCorporations(corporations);
    }

    private void calInfosByCorporations() {
        if(model == null)
            model = new DefaultMapModel();
        model.getMarkers().clear();
        if (corporations != null && corporations.size() > 0) {
            for (Corporation corporation : corporations) {
                CorporationMapInfo mapInfo = CorporationMapInfo.generateNewCorporationMapInfo(corporation);
                if (mapInfo != null) {
                    model.addOverlay(mapInfo);
                }
            }
            List<Marker> markers = model.getMarkers();
            if (markers != null && markers.size() > 0) {
                double maxWd = 0D;
                double minWd = 0D;
                double maxJd = 0D;
                double minJd = 0D;
                for (int i = 0; i < markers.size(); i++) {
                    Marker marker = markers.get(i);
                    if (i == 0) {
                        maxWd = marker.getLatlng().getLat();
                        minWd = marker.getLatlng().getLat();
                        maxJd = marker.getLatlng().getLng();
                        minJd = marker.getLatlng().getLng();
                    } else {
                        double wd = marker.getLatlng().getLat();
                        double jd = marker.getLatlng().getLng();
                        maxWd = maxWd < wd ? wd : maxWd;
                        maxJd = maxJd < jd ? jd : maxJd;
                        minWd = minWd > wd ? wd : minWd;
                        minJd = minJd > jd ? jd : minJd;
                    }
                }
                BigDecimal centerWd = new BigDecimal((maxWd + minWd) / 2D);
                BigDecimal centerJd = new BigDecimal((maxJd + minJd) / 2D);
                centerWd = centerWd.setScale(6, BigDecimal.ROUND_HALF_UP);
                centerJd = centerJd.setScale(6, BigDecimal.ROUND_HALF_UP);
                setCenterWd(centerWd.toPlainString());
                setCenterJd(centerJd.toPlainString());
                zoom = GoogleMapZoom.getZoom(maxWd, minWd, maxJd, minJd, width, height);
            }
        }
    }

    public void onMarkerSelect(OverlaySelectEvent event) {
        selectedMarker = (Marker) event.getOverlay();
    }

    public List<Corporation> getCorporations() {
        return corporations;
    }

    public void setCorporations(List<Corporation> corporations) {
        corporations = corporations == null ? new ArrayList<Corporation>() : corporations;
        this.corporations = corporations;
        calInfosByCorporations();
    }

    public MapModel getModel() {
        return model;
    }

    public String getCenterJd() {
        return centerJd;
    }

    public void setCenterJd(String centerJd) {
        this.centerJd = centerJd;
    }

    public String getCenterWd() {
        return centerWd;
    }

    public void setCenterWd(String centerWd) {
        this.centerWd = centerWd;
    }

    public String getZoom() {
        return zoom;
    }

    public void setZoom(String zoom) {
        this.zoom = zoom;
    }

    public Marker getSelectedMarker() {
        return selectedMarker;
    }
    public int getWidth() {
        return width;
    }
    public void setWidth(int width) {
        this.width = width;
    }
    public int getHeight() {
        return height;
    }
    public void setHeight(int height) {
        this.height = height;
    }
    public void setModel(MapModel model) {
        this.model = model;
    }
    public void setSelectedMarker(Marker selectedMarker) {
        this.selectedMarker = selectedMarker;
    }
} 
```

## 5 js.xhtml（“js”表示“reduce”，而不是“javascript”），这个xhtml文件中的重要部分：

```
<h:form id="dwMapForm">
            <comuicommon:corpInfoMapDialog
                mapModel="#{jlltWssbDjjsbEditPage.corporationMapModel}"
                selectedListener="#{jlltWssbDjjsbEditPage.setSelectedMarker(org.primefaces.event.map.OverlaySelectEvent)}"
                dialogId="dwMapDialog"
            />
</h:form> 
```

# 我做了什么：

1，我google了很多，没有答案。

2、我调试过，发现事件对象已经由primefaces生成了（至少，在AjaxBehaviorRenderer.decode(FacesContext context, UIComponent component, ClientBehavior behavior)的方法中，事件对象是存在的，不为null。）

3、在JlltWssbDjjsbEditPage.setSelectedMarker(OverlaySelectEvent event)方法中，事件为null。

# 谢谢大家！

我希望我已经说清楚了。

# 此致！

# c# - 修改 web.config.. 的数据库连接字符串？

> ID：10006847
> 
> 赞同：1
> 
> 时间：2012-04-04T07:40:01.083
> 
> 标签：c#, database, web-config, connection-string

再会！我想问一下，如果您知道如何修改 web.config.. 它位于不同的文件夹中.. 我尝试使用这种方法，不幸的是我不起作用..

```
// set Path to your config file
System.Configuration.ConfigurationFileMap fileMap = new ConfigurationFileMap(sWebConfig);
// open web.config 
System.Configuration.Configuration configuration = System.Configuration.ConfigurationManager.OpenMappedMachineConfiguration(fileMap);
// display message 
Console.WriteLine("Updating wizardConnection string.. Please wait for a few minutes..");
// fetch WizardConnection database connection string 
var Wizardsection = (ConnectionStringsSection)configuration.GetSection("WizardConnection");
// assign new value to wizardConnection.. Please make sure you have the correct database server. Just update server location, if need
Wizardsection.ConnectionStrings["WizardConnection"].ConnectionString = string.Format(@"server={0};database={1};integrated security=SSPI", sDatabaseServer, sDatabase);
configuration.Save(); 
```

希望早日收到你的消息..

问候，

关联

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:54:48.720

实际上，您所做的将更改复制到包含二进制文件（调试、发布或任何自定义编译器配置）的文件夹的配置文件。这足以更改应用程序的连接设置。但是，如果你想修改 web.config 文件，那只不过是修改一个外部文件，你需要 File 操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:52:49.640

您可以为不同的构建配置使用不同的 web.config 文件，而不是更新 web.config。例如，您可以设置一个名为“Staging”的新构建配置并将其配置为使用修改后的配置文件。看看[Web.Config 转换](http://msdn.microsoft.com/en-us/library/dd465318.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:09:48.640

您应该使用[webconfigurationmanager](http://msdn.microsoft.com/en-us/library/system.web.configuration.webconfigurationmanager.aspx)打开您的 webconfig。

尝试这个

```
 var config = System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration(Request.ApplicationPath);
        config.ConnectionStrings.ConnectionStrings["ConnectString"].ConnectionString = string.Format(@"server={0};database={1};integrated security=SSPI", sDatabaseServer, sDatabase);

        config.Save(); 
```

# c# - AjaxControlToolKit 自动完成扩展器不呈现

> ID：10006850
> 
> 赞同：0
> 
> 时间：2012-04-04T07:40:13.620
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我正在使用`Asp.Net/C#`，在我`Ajax autocompleteextender`用于自动建议的页面之一中，以下是我正在使用的代码

```
 <Services>
        <asp:ServiceReference Path="AutoCompleteSearchByName.asmx"  />
        </Services>
        </asp:ScriptManager> 
        <asp:TextBox ID="txtCountry" runat="server"></asp:TextBox>
        <ajaxtoolkit:autocompleteextender runat="server" ID="autoComplete1" 
        TargetControlID="txtCountry" ServicePath="AutoCompleteSearchByName.asmx" 
        ServiceMethod="GetNames" MinimumPrefixLength="1" EnableCaching="true" /> 
```

但是在设计模式下它给了我一个错误。错误说，

```
Error creating control autocomplete1 , AutocompleteSearchByName.asmx could not be set on property ServicePath 
```

这是我的 AutoCompleteSearchByName.asmx 代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using System.Web.Services.Protocols;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;

namespace CwizBankApp
{
    /// <summary>
    /// Summary description for AutoCompleteSearchByName
    /// </summary>
    [WebService(Namespace = "http://tempuri.org/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.ComponentModel.ToolboxItem(false)]
    // To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line. 
    //[System.Web.Script.Services.ScriptService]
    public class AutoCompleteSearchByName : System.Web.Services.WebService
    {

        [WebMethod]
        public string[] GetNames(string prefixText)
        {
            DataSet dst = new DataSet();
            SqlConnection sqlCon = new SqlConnection(ConfigurationManager.AppSettings["Server=Server;Database=CwizData;Trusted_Connection=True"]);
            string strSql = "SELECT f_name FROM cust_master WHERE f_name LIKE '" + prefixText + "%' ";
            SqlCommand sqlComd = new SqlCommand(strSql, sqlCon);
            sqlCon.Open();
            SqlDataAdapter sqlAdpt = new SqlDataAdapter();
            sqlAdpt.SelectCommand = sqlComd;
            sqlAdpt.Fill(dst);
            string[] cntName = new string[dst.Tables[0].Rows.Count];
            int i = 0;
            try
            {
                foreach (DataRow rdr in dst.Tables[0].Rows)
                {
                    cntName.SetValue(rdr["f_name"].ToString(), i);
                    i++;
                }
            }
            catch { }
            finally
            {
                sqlCon.Close();
            }
            return cntName;
        }
    }
} 
```

任何人都可以建议我如何解决这个问题。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:49:22.510

检查您是否为此使用了正确的 DLL，并查看下面的代码

如果仍然无法正常工作，请查看本文并通过 donlowding 代码检查您犯了什么错误：[AutoComplete With DataBase and AjaxControlToolkit](http://www.codeproject.com/Articles/201099/AutoComplete-With-DataBase-and-AjaxControlToolkit)

试试这个 ：

```
<ajaxToolkit:ToolkitScriptManager  ID="ScriptManager1" runat="server">

</ajaxToolkit:ToolkitScriptManager>
<ajaxToolkit:AutoCompleteExtender ID="autoComplete1" runat="server"
  EnableCaching="true"
  BehaviorID="AutoCompleteEx"
  MinimumPrefixLength="2"
  TargetControlID="myTextBox"
  ServicePath="AutoComplete.asmx"
  ServiceMethod="GetCompletionList" 
  CompletionInterval="1000"  
  CompletionSetCount="20"
  CompletionListCssClass="autocomplete_completionListElement"
  CompletionListItemCssClass="autocomplete_listItem"
  CompletionListHighlightedItemCssClass="autocomplete_highlightedListItem"
  DelimiterCharacters=";, :"
  ShowOnlyCurrentWordInCompletionListItem="true"> 
```

或者

这不符合你的回答，但如果你愿意，你也可以去 jquery soltuion 这里是完整的文章：[Cascading with jQuery AutoComplete](http://www.codeproject.com/Articles/359788/Cascading-with-jQuery-AutoComplete)

# java - 弹出菜单显示后 JButtons 消失

> ID：10006853
> 
> 赞同：2
> 
> 时间：2012-04-04T07:40:21.160
> 
> 标签：java, swing, popup, jbutton, popupmenu

我在弹出菜单的 JButtons 中添加了侦听器，但是当弹出菜单出现时，JButtons 消失了，我需要将光标悬停在按钮上以使它们再次出现。为什么会这样？

（这里的所有方法都在同一个类中）

```
public Inventory() {
    setLayout(null);
    setBounds(0, 0, 175, 210);

    initPopupMenu(); // this just sets what is inside the popup menu
    int x;
            // 30 buttons
    for(x = 0; x < 30; x++) {
        button[x] = new JButton();
        add(button[x]);
        button[x].addMouseListener(this);
    }

    x = 0;
            // it's a grid of buttons
    for(int i = 0; i < 5; i++) 
        for(int j = 0; j < 6; j++) {
            button[x].setBounds(i*35+1,j*35+1, 33,33);  
            x++;
        }

}

public void mouseClicked(MouseEvent e) {
    for(int j = 0; j < 30; j++) // i tried this one but it still disappears
        button[j].repaint();

    for(int i = 0; i < 30; i++) {
        if(e.getSource() == button[i]) {
            System.out.println("You pressed Button "+i);
            popup.show(e.getComponent(), e.getX(), e.getY());
        }

    }

} 
```

这就是发生的事情，![按钮](../Images/2ec0f54de98a526800515ed577cb4ded.png) ![弹出窗口](../Images/6dbc168ea8a1714f22a7f182e3b24fcc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T10:58:51.527

停止使用`null`Layout，这似乎是与此相关的问题之一。你在我`JFrame`看来有点像`BLACK`，这是你正在使用的一些`THEME`还是新`LOOK AND FEEL`的，这也可能是这件事的原因。在这里检查一下，使用以下代码可以完美地工作：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class ButtonPopUp
{
    private static final int SIZE = 30;
    private JButton[] button = new JButton[SIZE];
    private JPopupMenu popup = new JPopupMenu("Hello World");

    private void createAndDisplayGUI()
    {
        JFrame frame = new JFrame("Button POP UP Example");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setLocationByPlatform(true);

        final JPanel contentPane = new JPanel();
        contentPane.setLayout(new GridLayout(0, 5));

        JMenuItem menuItem1 = new JMenuItem("Menu Item 1");
        JMenuItem menuItem2 = new JMenuItem("Menu Item 2");
        //popup.add(greetings);
        popup.insert(menuItem1, 0);
        popup.insert(menuItem2, 1);

        for (int i = 0; i < SIZE; i++)
        {
            button[i] = new JButton();
            button[i].setBorder(BorderFactory.createEtchedBorder());
            button[i].addMouseListener(new MouseAdapter()
            {
                public void mouseClicked(MouseEvent me)
                {
                    System.out.println("I am WORKING!!");
                    popup.show((JComponent)me.getSource(), me.getX(), me.getY());
                }
            });
            contentPane.add(button[i]);
        }

        frame.getContentPane().add(contentPane);
        frame.setSize(175, 250);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new ButtonPopUp().createAndDisplayGUI();
            }
        });
    }
} 
```

这是输出：

![活动前](../Images/ed7af2fa2ba54da5cd64ad73c35451ed.png) ![事后](../Images/fc4f49a1ee4d9cf5c507470234fdc06f.png)

# java - 如何仅查询某个属性

> ID：10006854
> 
> 赞同：1
> 
> 时间：2012-04-04T07:40:24.990
> 
> 标签：java, mongodb

假设我只想查询所有文档的某个属性，例如在 SQL 中：

```
SELECT FIRSTNAME
FROM TABLE1 
```

如何使用 Mongo 和它的 Java API 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:04:31.080

如果要获取所有文档，请使用*空*对象作为第一个参数。使用第二个，您只能获得该字段`FIRSTNAME`。

```
db.table1.find({}, {'FIRSTNAME': 1}); 
```

有关更多详细信息，请参阅[有关查询的文档](http://www.mongodb.org/display/DOCS/Querying)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:32:26.760

在 Java API 中，您可以这样做。您必须明确关闭 _id 字段才能将其排除。

```
Mongo m = new Mongo();
DB db = m.getDB( "test" );

DBCollection coll = db.getCollection("test");       
coll.insert(new BasicDBObject("Name","Wes").append("x", "to have a second field"));
BasicDBObject query = new BasicDBObject(); 
BasicDBObject fields = new BasicDBObject("Name",1).append("_id",false);
DBCursor curs = coll.find(query, fields);

while(curs.hasNext()) {
  DBObject o = curs.next();
  System.out.println(o.toString());
} 
```

输出：

```
{ "Name" : "Wes"} 
```

更新排序：

```
coll.insert(new BasicDBObject("Name","Wes").append("x", "to have a second field"));
coll.insert(new BasicDBObject("Name","Alex").append("x", "to have a second field"));
coll.insert(new BasicDBObject("Name","Zeus").append("x", "to have a second field"));
BasicDBObject query = new BasicDBObject(); 
BasicDBObject fields = new BasicDBObject("Name",1).append("_id",false);
BasicDBObject orderBy = new BasicDBObject("Name",1);
DBCursor curs = coll.find(query, fields).sort(orderBy);
while(curs.hasNext()) {
   DBObject o = curs.next();
   System.out.println(o.toString());
} 
```

给出：

```
{ "Name" : "Alex"}
{ "Name" : "Wes"}
{ "Name" : "Zeus"} 
```

# php - 与嵌套关联数组中相同键关联的值的总和

> ID：10006857
> 
> 赞同：0
> 
> 时间：2012-04-04T07:40:53.627
> 
> 标签：php, arrays

我有如下所示的数组。我想要一个结果数组，其中键元素`[tv]`, `[tu]`,`[cost]`中`[km]`的值对所有具有相同值的行求和`[tick_id]`。在这个例子中，我们应该对数组元素 0, 1, 2, ... 的值`[tv]`, `[tu]`, `[cost]`,求和`[km]`，我该怎么做呢？

```
Array (
    [0] => stdClass Object (
        [id] => 15
        [user_id] => 44
        [name] => inspector1
        [tv] => 0.00
        [tc] => 0.00
        [tu] => 0.00
        [cost] => 0.00
        [kms] => 0
        [date_s] => 2012-03-30
        [notes] =>
        [tick_id] => 11
        [tot_fee] => 5500
    )
    [1] => stdClass Object (
        [id] => 39
        [user_id] => 46
        [name] => Assistant
        [tv] => 10.00
        [tc] => 0.00
        [tu] => 4.50
        [cost] => 0.00
        [kms] => 120
        [date_s] => 2012-03-31
        [notes] =>
        [tick_id] => 15
        [tot_fee] => 0
     )
    [2] => stdClass Object (
        [id] => 35
        [user_id] => 46
        [name] =>
        [tv] => 0.00
        [tc] => 0.00
        [tu] => 0.00
        [cost] => 0.00
        [kms] => 0
        [date_s] => 2012-03-30
        [notes] =>
        [tick_id] => 13
        [tot_fee] => 3200
    )
    …
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:45:44.167

~~很难用你的代码显示方式来判断，但这~~应该是你需要的：

```
// Create the cost total array
$cost = array();

// Iterate over each object in the given array
foreach ($array as $object)
{

  // If the tick_id has not yet been assigned as a key then do so with a default cost of 0
  if (!isset($cost[$object->tick_id]))
  {
    $cost[$object->tick_id] = 0;
  }

  // Increment the total cost for the given tick_id
  $cost[$object->tick_id] += $object->tv + $object->km + $object->tu + $object->cost;

} 
```

`$cost`将是一个数组，其中 the`key`是 the`tick_id`并且 the`value`是总成本。

# android - 如何在 Android 中向 ViewPager 添加进度条

> ID：10006866
> 
> 赞同：1
> 
> 时间：2012-04-04T07:41:45.740
> 
> 标签：android, android-layout, android-emulator, android-viewpager

如何`ViewPager`在 Android 中添加进度条？

我的情况是我必须将 imageURL 加载到`ViewPager`. 当用户滑动寻呼机时，如果 ImageURL 未加载，我需要显示进度条/加载 GIF 图像。

是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T17:15:48.010

我认为 Satya 正在考虑以下类似的事情。在您的 viewpager 适配器类中，您应该有这个方法：

```
@Override
            public Object instantiateItem(View collection, final int position) {

                LayoutInflater inflater = (LayoutInflater) collection.getContext()
                        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                final FrameLayout imageLayout = (FrameLayout) inflater.inflate(R.layout.fotopager_buttons, null);
                final ImageView imageView = (ImageView) imageLayout.findViewById(R.id.image);
                final ProgressBar spinner = (ProgressBar) imageLayout.findViewById(R.id.loading);

                imageLoader.displayImage(Gallery.get_big_image_url(position), imageView, options, new ImageLoadingListener() {
                    @Override
                    public void onLoadingStarted() {
                    spinner.setVisibility(View.VISIBLE);
                    }

                    @Override
                    public void onLoadingFailed() {
                    spinner.setVisibility(View.GONE);
                    imageView.setImageResource(android.R.drawable.ic_delete);
                    }

                    @Override
                    public void onLoadingComplete() {
                    spinner.setVisibility(View.GONE);
                    }
                    });

                views.put(position, iv);

                ((ViewPager) collection).addView(imageLayout,0);

                return imageLayout;
} 
```

像这样的 R.layout.fotopager_buttons.xml ：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:adjustViewBounds="true" />

<ProgressBar
    android:id="@+id/loading"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"/> 
```

您可以在此处查看 imageLoader 类的其余部分：[https ://github.com/nostra13/Android-Universal-Image-Loader/blob/master/UniversalImageLoaderExample/src/com/nostra13/example/universalimageloader/ImagePagerActivity.java](https://github.com/nostra13/Android-Universal-Image-Loader/blob/master/UniversalImageLoaderExample/src/com/nostra13/example/universalimageloader/ImagePagerActivity.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:27:11.260

您可以尝试在自己的视图中处理它，而不是将其与 viewpager 绑定。

# asp.net-mvc - MVC3 模型与 Castle 绑定

> ID：10006868
> 
> 赞同：2
> 
> 时间：2012-04-04T07:41:59.543
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-2, castle-windsor, custom-model-binder

我对 MVC 很陌生。我正在使用 an`interface`作为我的模型的属性。

我注意到我`Data Annotation Attributes`的被忽视了。我在提交表单时也遇到了错误：

> 无法创建接口的实例。

我很快发现我将不得不使用自定义`ModelBinder`

我很难弄清楚在`CreateModel`方法中需要做什么`ModelBinder`

我有以下内容`RegistrationModel`：

```
public class RegistrationModel
{
    #region Properties (8) 

    public string Email { get; set; }

    public string FirstName { get; set; }

    public Gender Gender { get; set; }

    public string LastName { get; set; }

    public string Password { get; set; }

    public string PasswordConfirmation { get; set; }

    public IPlace Place { get; set; }

    public string Username { get; set; }

    #endregion Properties 
} 
```

这是`IPlace`接口和实现：

```
public interface IPlace
{
    #region Data Members (7) 

    string City { get; set; }

    string Country { get; set; }

    string ExternalId { get; set; }

    Guid Id { get; set; }

    string Name { get; set; }

    string Neighborhood { get; set; }

    string State { get; set; }

    #endregion Data Members 
}

public class Place : IPlace
{
    #region Implementation of IPlace

    public Guid Id { get; set; }

    [StringLength(100, ErrorMessage = "City is too long.")]
    public string City { get; set; }

    [StringLength(100, ErrorMessage = "Country is too long.")]
    public string Country { get; set; }

    [StringLength(255, ErrorMessage = "External ID is too long.")]
    public string ExternalId { get; set; }

    [Required(ErrorMessage = "A name is required.")]
    [StringLength(450, ErrorMessage = "Name is too long.")]
    [DisplayName("Location")]
    public string Name { get; set; }

    [StringLength(100, ErrorMessage = "Neighborhood is too long.")]
    public string Neighborhood { get; set; }

    [StringLength(100, ErrorMessage = "State is too long.")]
    public string State { get; set; }

    #endregion
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T06:13:36.127

您应该尽量避免在视图模型中使用接口和抽象类型。因此，在您的情况下，如果采用此视图模型的控制器操作永远不能具有`IPlace`比的任何其他实现`Place`，则只能替换接口。

如果出于某种原因需要它，正如您已经发现的那样，您将必须编写一个自定义模型绑定器，在其中指定要创建的实现。这是[一个例子](https://stackoverflow.com/a/6485552/29407)。

# wpf - ControlTemplate 中的 DataTrigger 不起作用

> ID：10006870
> 
> 赞同：0
> 
> 时间：2012-04-04T07:42:06.247
> 
> 标签：wpf, templates, styles, datatemplate, controltemplates

我是新来的，希望我的第一个问题符合堆栈溢出的要求。到目前为止，我已经做了一些研究，但我自己无法弄清楚。
我创建了一个 UserControl（从中间基类派生），它应该能够根据它的“VisualAlarmState”属性（它是一个 DependencyProperty）将颜色符号更改为不同的颜色。
Style plus ControlTemplate 按预期呈现，但样式末尾的 DataTrigger 不会更改作为 Image 元素的 VisualAlarmSign 的颜色（=图像）。
代码可以编译和运行而不会出现错误，但警报状态不会按预期显示。

我也不太明白的东西：我必须动态引用样式，因为 Style="{StaticResource DashboardItemStyle}" 将加下划线，并且在鼠标悬停时说：“资源“DashboardItemStyle”无法解析。”

```
<ucbase:DashboardItemBase.Resources>
            <BitmapImage x:Key="MO-Zylinderdeckel" UriSource="/ModuleDashboard;component/Resources/MO-Zylinderdeckel.tif" />
            <BitmapImage x:Key="MO-Zylindermantel" UriSource="/ModuleDashboard;component/Resources/MO-Zylindermantel.tif" />
            <BitmapImage x:Key="MO-Zylinderboden" UriSource="/ModuleDashboard;component/Resources/MO-Zylinderboden.tif" />
            <BitmapImage x:Key="MO-Marker-Grün" UriSource="/ModuleDashboard;component/Resources/MO-Marker-Grün.tif" />
            <BitmapImage x:Key="MO-Marker-Orange" UriSource="/ModuleDashboard;component/Resources/MO-Marker-Orange.tif" />
            <BitmapImage x:Key="MO-Marker-Rot" UriSource="/ModuleDashboard;component/Resources/MO-Marker-Rot.tif" />

    <Style x:Key="DashboardItemStyle" TargetType="{x:Type ucbase:DashboardItemBase}">

        <Setter Property="Template" x:Name="Template1">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ucbase:DashboardItemBase}">                        
                    <dxlc:Tile x:Name="Tile" Grid.Column="0" Grid.ColumnSpan="1" Grid.Row="0" Grid.RowSpan="1"
                            Height="128.5" Width="208.5" Background="{x:Null}">
                        <dxlc:Tile.Content>
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="11.5" />
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="12.5" />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="6.5" />
                                </Grid.ColumnDefinitions>

                                <Image Grid.Column="0" Grid.ColumnSpan="1" Grid.Row="0" Grid.RowSpan="1"
                                        HorizontalAlignment="Stretch" Stretch="Fill" VerticalAlignment="Stretch"
                                        Source="{StaticResource MO-Zylinderdeckel}" />

                                <Grid Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="1" Grid.RowSpan="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="6.5" />
                                    </Grid.ColumnDefinitions>
                                    <Image Grid.Column="0" Grid.ColumnSpan="1" Grid.Row="1" Grid.RowSpan="2"
                                            HorizontalAlignment="Stretch" Stretch="Fill" VerticalAlignment="Stretch"
                                            Source="{StaticResource MO-Zylindermantel}" />

                                        <Image x:Name="VisualAlarmSign" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0" Height="14"
                                            Margin="0,20,0,0" Width="19.5" HorizontalAlignment="Right"
                                            VerticalAlignment="Top" Source="{StaticResource MO-Marker-Grün}" />
                                </Grid>

                                <Image Grid.Column="0" Grid.ColumnSpan="1" Grid.Row="3" Grid.RowSpan="1"
                                        HorizontalAlignment="Stretch" Stretch="Fill" VerticalAlignment="Stretch"
                                        Source="{StaticResource MO-Zylinderboden}" />
                            </Grid>
                        </dxlc:Tile.Content>
                    </dxlc:Tile>

                    <ControlTemplate.Triggers>

                        <!-- This Trigger has no effect. Why?-->
                        <DataTrigger
                                Binding="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=VisualAlarmState}">
                            <DataTrigger.Value>
                                <vmbase:AlarmState>Alarm</vmbase:AlarmState>
                            </DataTrigger.Value>
                            <Setter TargetName="VisualAlarmSign" Property="Source"
                                    Value="{StaticResource MO-Marker-Rot}" />
                        </DataTrigger>                      </ControlTemplate.Triggers>

                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ucbase:DashboardItemBase.Resources> 
```

**工作解决方案**

我`Source={StaticResource MO-Marker-Grün}`从`<Image>`元素中删除，并将`<DataTrigger>`from移动`<ControlTemplate.Triggers>`到 其中`<Style.Triggers>`，`<Image.Style>`导致以下 XAML 代码：

```
<ucbase:DashboardItemBase.Resources>
    ...
    <BitmapImage x:Key="MO-Marker-Rot" UriSource="/ModuleDashboard;component/Resources/MO-Marker-Rot.tif" />
    ...
        <Style x:Key="DashboardItemStyle" TargetType="{x:Type ucbase:DashboardItemBase}">
            <Setter Property="Template" x:Name="Template1">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ucbase:DashboardItemBase}">                        
                        <dxlc:Tile x:Name="Tile" Grid.Column="0" Grid.ColumnSpan="1" Grid.Row="0" Grid.RowSpan="1"
                                Height="128.5" Width="208.5" Background="{x:Null}">
                            <dxlc:Tile.Content>
                                <Grid>
                                    ...                                     
                                    <Image x:Name="VisualAlarmSign" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0"
                                            Height="14" Margin="0,20,0,0" Width="19.5" HorizontalAlignment="Right"
                                            VerticalAlignment="Top" >
                                        <Image.Style>
                                            <Style>
                                                <Style.Triggers>
                                                    <DataTrigger
                                                            Binding="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=VisualAlarmState}"
                                                            Value="Alarm">
                                                        <Setter Property="Image.Source"
                                                                Value="{StaticResource MO-Marker-Rot}" />
                                                    </DataTrigger>
                                                </Style.Triggers>
                                            </Style>
                                        </Image.Style>
                                    </Image>
                                    ...
                                </Grid>
                            </dxlc:Tile.Content>                        
                        </dxlc:Tile>                        
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
</ucbase:DashboardItemBase.Resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:35:17.243

尝试使用样式属性设置器设置图像的来源。一些触发器的行为方式是有线的。

```
<Image x:Name="VisualAlarmSign" Grid.Column="0" Grid.ColumnSpan="2" Grid.Row="0" Height="14"
                                            Margin="0,20,0,0" Width="19.5" HorizontalAlignment="Right"
                                            VerticalAlignment="Top">
    <Image.Style>
    <Style>
     <Setter TargetName="VisualAlarmSign" Property="Source"
                                        Value="{StaticResource MO-Marker-Grün}" />
    </Style>
    </Image.Style>
</Image> 
```

确保删除图像标记中的源属性。

某些触发器可能无法设置我们在标签中使用的属性。在您的情况下，您在图像标签中设置了 source 的值。如果您通过样式设置器设置相同的值，它可能会蠕虫。这值得一试。

# sql-server - 表和求和函数之间的连接 ==> 返回错误值

> ID：10006871
> 
> 赞同：0
> 
> 时间：2012-04-04T07:42:07.203
> 
> 标签：sql-server, search, dynamic, join, relation

我有一个包含多个表的动态搜索查询，用于显示某些列的总和和计数。但是 sum 函数返回错误的值。它导致加入。但我不知道该怎么办，我只知道删除连接与**交付**表结果是否为真。但是我的交货表需要搜索参数。

下面是几行代码：

```
SELECT     
    COUNT(DISTINCT Cargo.ID) AS 'TotalCargo',
    SUM(CargoService.Weight) AS 'TotalWeight',
    SUM(CargoService.PackageNo) AS 'TotalPack',
    COUNT(DISTINCT CargoService.FlightNo) AS 'TotalFlight',
    COUNT(DISTINCT Cargo.Origin) AS 'TotalOrigin'
FROM         
    Cargo 
INNER JOIN
    CargoService ON Cargo.ID = CargoService.CargoID 
INNER JOIN
    Contents ON Cargo.Contents = Contents.ID 
FULL JOIN
    Delivery ON Cargo.ID = Delivery.CargoID 
FULL JOIN
    Transit ON Cargo.ID = Transit.CargoID
WHERE       
    Cargo.InputDate BETWEEN CAST(CONVERT(char(10), '2012/04/03', 126) AS datetime) 
                        AND CAST(CONVERT(char(10), '2012/04/03', 126) AS datetime)
    AND CargoService.FlightNo = 1356 
```

总搜索查询如下：

```
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER procedure [dbo].[Cargo_SearchTotal]
    @EntryFrom nvarchar(20),
    @EntryTo nvarchar(20),
    @DeliveredFrom nvarchar(20),
    @DeliveredTo nvarchar(20),
    @Origin nvarchar(10),
    @Transit nvarchar(10),
    @CargoCode char(16),
    @Name nvarchar(150),
    @Family nvarchar(150),
    @RealName nvarchar(150),
    @RealFamily nvarchar(150),
    @FlightNo nvarchar(10),
    @Daily nvarchar(10),
    @UndeliveredTransit nvarchar(10),
    @Undelivered nvarchar(10),
    @UndeliveredPerishable nvarchar(10),
    @Delivered nvarchar(10),
    @sort nvarchar(10)
as
    declare @query as nvarchar(max);
    declare @params as nvarchar(max);

    set @query = 'SELECT Count(DISTINCT Cargo.ID) AS ''TotalCargo'',
           sum(CargoService.Weight) AS ''TotalWeight'',
           SUM(CargoService.PackageNo) AS ''TotalPack'',
           COUNT(DISTINCT CargoService.FlightNo) AS ''TotalFlight'',
           COUNT(DISTINCT Cargo.Origin) AS ''TotalOrigin''
FROM        
                  Contents INNER JOIN
                  Cargo ON Contents.ID = Cargo.Contents FULL Join
                  Delivery ON Cargo.ID = Delivery.CargoID full JOIN
                  Transit ON Cargo.ID = Transit.CargoID JOIN
                  CargoService ON Cargo.ID = CargoService.CargoID '
---------------------------------------------  
if(@EntryFrom='select') set @EntryFrom='';
if(@EntryTo='select') set @EntryTo='';
if(@DeliveredFrom='select') set @DeliveredFrom='';
if(@DeliveredTo='select') set @DeliveredTo='';
if(@Origin='select') set @Origin='';
if(@Transit='select') set @Transit='';
if(@CargoCode='select') set @CargoCode='';
if(@Name='select') set @Name='';
if(@Family='select') set @Family='';
if(@RealName='select') set @RealName='';
if(@RealFamily='select') set @RealFamily='';
if(@FlightNo='select') set @FlightNo='';
if(@Daily <> 'True') set @Daily='';
if(@UndeliveredTransit <> 'True') set @UndeliveredTransit='';
if(@Undelivered <> 'True') set @Undelivered='';
if(@UndeliveredPerishable <> 'True') set @UndeliveredPerishable='';
if(@Delivered <> 'True') set @Delivered='';
if(@sort <> 'True') set @sort='';
---------------------------------------------  
if(@EntryFrom<>'' or @EntryTo<>'' or @DeliveredFrom<>'' or @DeliveredTo<>'' or @Origin<>'' 
    or @Transit<>'' or @CargoCode<>'' or @Name<>''
    or @Family<>'' or @RealName<>'' or @RealFamily<>'' or @FlightNo<>'' or @Daily <>''
    or @UndeliveredTransit <>'' or @Undelivered <>'' or @UndeliveredPerishable<>'' or @Delivered<>'')
begin
  set @query=@query+' where ';
end
---------------------------------------------  
if(@EntryFrom<>'' and @EntryTo<>'' and (@EntryFrom=@EntryTo))
begin 
 set @query=@query+' Cargo.InputDate=cast(CONVERT(char(10), '''+@EntryFrom+''',126) as datetime) and ';
end
else if(@EntryFrom<>'' and @EntryTo<>'')
begin
  set @query=@query+' Cargo.InputDate between cast(CONVERT(char(10), '''+@EntryFrom+''',126) as datetime) and cast(CONVERT(char(10), '''+@EntryTo+''',126) as datetime) and ';
end     
else if(@EntryFrom<>'' and @EntryTo='')
begin
 set @query=@query+' Cargo.InputDate  >=cast(CONVERT(char(10), '''+@EntryFrom+''',126) as datetime) and ';
end
else if(@EntryFrom='' and @EntryTo<>'')
begin
 set @query=@query+' Cargo.InputDate <=cast(CONVERT(char(10), '''+@EntryTo+''',126) as datetime) and ';
end
---------------------------------------------  
if(@DeliveredFrom<>'' and @DeliveredTo<>'' and (@DeliveredFrom=@DeliveredTo))
begin 
 set @query=@query+' Delivery.DeliveryDate=cast(CONVERT(char(10), '''+@DeliveredFrom+''',126) as datetime) and ';
end
else if(@DeliveredFrom<>'' and @DeliveredTo<>'')
begin
  set @query=@query+' Delivery.DeliveryDate between cast(CONVERT(char(10), '''+@DeliveredFrom+''',126) as datetime) and cast(CONVERT(char(10), '''+@DeliveredTo+''',126) as datetime) and ';
end     
else if(@DeliveredFrom<>'' and @DeliveredTo='')
begin
 set @query=@query+' Delivery.DeliveryDate >= cast(CONVERT(char(10), '''+@DeliveredFrom+''',126) as datetime) and ';
end
else if(@DeliveredFrom='' and @DeliveredTo<>'')
begin
 set @query=@query+' Delivery.DeliveryDate <= cast(CONVERT(char(10), '''+@DeliveredTo+''',126) as datetime) and ';
end
---------------------------------------------  
if(@Origin<>'')
begin
 set @query=@query+' Cargo.Origin = cast('''+@Origin+''' as int) and ';
end
---------------------------------------------  
if(@Transit<>'')
begin
 set @query=@query+' Transit.TransitTo = cast('''+@Transit+''' as int) and ';
end
---------------------------------------------  
if(@CargoCode<>'')
begin
  set @query=@query+' CargoNumber=cast('''+@CargoCode+''' as char(16)) and ';
end
---------------------------------------------  
if(@FlightNo<>'')
begin
  set @query=@query+' CargoService.FlightNo=cast('''+@FlightNo+''' as nvarchar(255)) and ';
end
---------------------------------------------  
if(@Name<>'')
begin
 set @query=@query+' Cargo.Rname like N'''+@Name+''' and ';
end
---------------------------------------------  
if(@Family<>'')
begin
 set @query=@query+' Cargo.RFamily like N'''+@Family+''' and ';
end
---------------------------------------------  
if(@RealName<>'')
begin
 set @query=@query+' Delivery.RName like N'''+@RealName+''' and ';
end
---------------------------------------------  
if(@RealFamily<>'')
begin
 set @query=@query+' Delivery.RFamily like N'''+@RealFamily+''' and ';
end
---------------------------------------------  
if(@Daily<>'')
 begin
    set @query=@query+' convert(varchar, Cargo.SaveDate, 111) = convert(varchar, getdate(), 111) and ';
end
---------------------------------------------  
if(@UndeliveredTransit<>'')
begin
    set @query=@query+' Cargo.Delivered = 0 and Cargo.Transit = 1 and ';
end
---------------------------------------------  
if(@Undelivered<>'')
begin
    set @query=@query+' Cargo.Delivered = 0 and ';
end
---------------------------------------------  
if(@UndeliveredPerishable<>'')
begin
    set @query=@query+' Contents.Perishable = 1 AND Cargo.Delivered = 0  and ';
end
---------------------------------------------  
if(@Delivered <> '')
begin
    set @query=@query+' Cargo.Delivered = 1 and ';
end
--------------------------------------------- 
if(@EntryFrom<>'' or @EntryTo<>'' or @DeliveredFrom<>'' or @DeliveredTo<>'' or @Origin<>'' 
    or @Transit<>'' or @CargoCode<>'' or @Name<>''
    or @Family<>'' or @RealName<>'' or @RealFamily<>'' or @FlightNo<>'' or @Daily <>'' 
    or @UndeliveredTransit <>'' or @Undelivered <>'' or @UndeliveredPerishable <>'' or @Delivered <>'')
begin
 set @query=substring(@query,0,len(@query)-3);
end 
---------------------------------------------  
set @params =  '@EntryFrom nvarchar(20),
                @EntryTo nvarchar(20),
                @DeliveredFrom nvarchar(20),
                @DeliveredTo nvarchar(20),
                @Origin nvarchar(10),
                @Transit nvarchar(10),
                @CargoCode char(16),
                @Name nvarchar(150),
                @Family nvarchar(150),
                @RealName nvarchar(150),
                @RealFamily nvarchar(150),
                @FlightNo nvarchar(10),
                @Daily nvarchar(10),
                @UndeliveredTransit nvarchar(10),
                @Undelivered nvarchar(10),
                @UndeliveredPerishable nvarchar(10),
                @Delivered  nvarchar(10),
                @sort   nvarchar(10)';
---------------------------------------------  
exec sp_executesql @query,@params,@EntryFrom,@EntryTo,@DeliveredFrom,@DeliveredTo,@Origin, 
                   @Transit,@CargoCode,@Name,
                   @Family,@RealName,@RealFamily,@FlightNo,@Daily, 
                   @UndeliveredTransit,@Undelivered,@UndeliveredPerishable,@Delivered,@sort; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:52:02.503

您可以删除加入并使用存在：

```
declare @deliveryQuery as varchar(max)
declare @deliveryLen int
set @deliveryQuery = 'and exists (select null 
                                    from Delivery 
                                   where Cargo.ID = Delivery.CargoID'
-- It will change if we add conditions to @deliveryQuery
set @deliveryLen = len(@deliveryQuery)
-- ...
if(@RealName<>'')
begin
 set @deliveryQuery = @deliveryQuery 
                      + ' and Delivery.RName like N'''+@RealName+'''';
end
-- Aditional conditions here following the pattern above

--And later, test if @deliveryQuery has changed
if len(@deliveryQuery) <> @deliveryLen
begin
   set @query = @query + @deliveryQuery + ')'
end 
```

# apache-pig - 在 Pig 中使用自定义单词分隔符的 WordCount？

> ID：10006874
> 
> 赞同：1
> 
> 时间：2012-04-04T07:42:19.327
> 
> 标签：apache-pig

我是 Pig 的新手，我正在尝试编写一个字数统计程序。

从文本中获取单词的一种方法是使用以下`TOKENIZE`函数：

```
WORDS = foreach INPUT generate flatten(TOKENIZE(text)) AS word; 
```

但我只想拆分空格，而`TOKENIZE`拆分逗号之类的东西。我该怎么做？我尝试使用`STRSPLIT(text, ' ')`，但`STRSPLIT`似乎返回一个元组而`TOKENIZE`返回一个包，所以我不确定如何使用`STRSPLIT`它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T07:33:07.830

这取决于您的输入数据是什么样的，但以下内容可能对您有用：

1.  使用带有正则表达式的[MyRegExLoader](https://github.com/apache/pig/blob/trunk/contrib/piggybank/java/src/main/java/org/apache/pig/piggybank/storage/MyRegExLoader.java)（在 PiggyBank 中）来加载您的数据。
2.  将[STREAM](http://pig.apache.org/docs/r0.7.0/piglatin_ref2.html#STREAM)与 Perl、sed 或您最喜欢的脚本语言一起使用，将您的输入数据转换为 TOKENIZE 将按照您想要的方式处理的格式。

此外，可以使用[ToBag](https://github.com/apache/pig/blob/trunk/contrib/piggybank/java/src/main/java/org/apache/pig/piggybank/evaluation/util/ToBag.java)（也在 PiggyBank 中）将元组转换为包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T14:15:09.093

我们实际上不能直接将一个元组转换成一个包（反之亦然）。我建议你这样做：

1.  加载您的数据
2.  使用 STRSPLIT 将您的值拆分为一个元组
3.  使用 UDF 将元组转换为包
4.  压扁你的包

# forms - Symfony2 表单将 mongodb 文档嵌入到 sql 实体中

> ID：10006878
> 
> 赞同：1
> 
> 时间：2012-04-04T07:42:31.627
> 
> 标签：forms, symfony, embed, document, fosuserbundle

我需要一点帮助:)。这是情况。我正在使用 symfony2 + FOSUserBundle，我定制了我的表单，到目前为止一切都很好。我在自定义注册表单中使用用户信息（如名字、姓氏、出生日期等）进行了用户注册。现在我决定将用户信息作为文档存储在 mongodb 中会更实用（因为我稍后可能会向用户添加更多信息）。我构建了用户信息表单，并成功地将其嵌入到用户表单中。现在的问题是我不能在 Entity 对象中设置 Document 对象——symfony 告诉我该对象必须是一个实体。

```
/**
 * Acme\UserBundle\Entity\User
 *
 * @ORM\Table(name="user")
 * @ORM\Entity
 */
class User extends BaseUser
{
    /**
     * @Assert\Type(type="Acme\UserBundle\Document\UserInfo") 
     */
    protected $userinfo; 
```

我想问一下，这样做的正确方法是什么？当然，我可以从请求中获取所需的信息作为数组并填写用户信息对象......但它看起来很丑陋和错误:) 那么它必须如何完成？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T09:06:09.663

我假设你扩展了实体类

```
FOS\UserBundle\Entity\User 
```

bundle提供了一个文档类

```
FOS\UserBundle\Document\User 
```

你可以扩展这个

# java - jsf - 使用表达式语言验证日期

> ID：10006879
> 
> 赞同：3
> 
> 时间：2012-04-04T07:42:35.480
> 
> 标签：java, regex, validation

我需要检查我的生日输入字段的值。应该有几种可能性：`dd.MM.yyyy`, `dd.M.yyyy`, `d.MM.yyyy`,`d.m.yyyy`和`dd.MM.yy`, `dd.M.yy`, `d.MM.yy`, `d.m.yy`。例如，您可以输入 07.03.1993、7.3.93 或其他任何内容。

以下正则表达式示例仅检查格式验证，但不检查日期是否存在（例如 29.02.2011 或 47.02.2011 将被允许）

```
String s = (String) arg2;
        String pattern = "^(\\d{2}|\\d{1})\\.(\\d{2}|\\d{1})\\.(\\d{2}|\\d{4})$";
        Pattern p = Pattern.compile(pattern);
        Matcher m = p.matcher(s);

        if (m.matches()) {
            System.out.println(("date correct"));
        } else {
            System.out.println("date incorrect");
        } 
```

编辑：我刚刚创建了以下正则表达式语句，现在它检查月份是否大于 12 并且日期是否大于 31。我想我应该先使用正则表达式，然后使用验证日期`SimpleDateFormat`

```
String s = "^((0?[1-9]|[12][0-9]|3[01])\\.(0?[1-9]|1[012])\\.((19|20)\\d{2})$"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:52:32.127

如果 regex 不是必须的，您可以尝试使用`parse`of 方法将字符串转换为日期`java.text.SimpleDateFormat`，看看是否成功。

如果是这样（您得到一个有效的`Date`对象），那么您在表单（或输入）中输入了一个有效的日期。如果不成功，则`parse`函数返回`null`并且`String`您输入的内容无效。

[这](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html#parse%28java.lang.String,%20java.text.ParsePosition%29)是该方法的 javadoc `parse`。

编辑：为了在您不想使用的情况下进行额外验证`setLenient`，您可以使用`Date`从中获得的`parse`并将其转换回 a`String`使用相同的格式。然后只需将`String`转换结果与您作为输入提供的结果进行比较。如果它们匹配，则您有有效的输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:00:18.193

您可以将其拆分以获取日期的日和月部分。

然后您可以执行以下操作：

```
final int dayToCheck = 32; // user input
final int month = 2; // user input
final int year = 1981; // user input        

final Calendar cal = Calendar.getInstance();
cal.set(year, month, 1); // day doesn't need to be the user input, it can be any day in the month you want to check

if (cal.getActualMaximum(Calendar.DAY_OF_MONTH) > dayToCheck) {

    // the day is invalid
}
if (cal.getActualMinimum(Calendar.DAY_OF_MONTH) < dayToCheck) {

    // again, the day is invalid
} 
```

您可以对该`Calendar.MONTH`字段进行相同的检查。

我没有检查这是否编译，但你应该明白了。

# php - PHP：当填充具有行和 url 的文本时，mailto 函数会中断

> ID：10006888
> 
> 赞同：0
> 
> 时间：2012-04-04T07:43:42.450
> 
> 标签：php, email, mailto

您好我正在创建一个任务分配页面，在创建任务后管理员可以向受让人发送邮件以了解任务。我无法使用 PHP 邮件功能，因为我无法配置办公室 SMTP 邮件地址。所以我正在使用mailto功能。

当我的 Commenst 得到像 " &, ", ' 这样的符号时，就会出现问题。它将停止执行剩余的部分代码

在我的邮件中，它只是填充了第一行。所以我的评论被打破了。

这是我的 mailto 函数代码：

```
<a href="mailto:'.mysql_result($result, $i, 'assignee').'@symantec.com?subject= Task Assignment &body= %0D%0AHello%20'.mysql_result($result, $i, 'assignee'). '%0D%0A%0D%0ADescription%20%3A%20'.mysql_result($result, $i, 'comments'). .'%20%0D%0A%0D%0A%0D%0AFor%20more%20details%20Log%20in%20to%20%3A%20%0D%0A " ><img src="images/mail.png"  width="32" height="32" p = "center"></a>'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:12:06.297

你把所有东西都放在一条线上，带你进入魔鬼厨房。而是将功能分开（例如，首先从数据库加载数据），然后处理数据（例如，构建邮箱名称、主题和正文），然后最后创建邮件 URL。

```
<?php

# load data from database
$assignee = mysql_result($result, $i, 'assignee');
$comments = mysql_result($result, $i, 'comments');

# process data
$mailbox = sprintf('%s@symantec.com', rawurlencode($assignee));
$headers = array(
    'subject' => 'Task Assignment',
    'body' => "Hello $assignee,\n\nDescription : $comments ...\n\nFor more details log in to ...",
);

# generate the mailto URL
$url = sprintf('mailto:%s?%s', $mailbox, http_build_query($headers)); 
```

然后你可以输出`$url`：

```
printf('<a href="%s"><img src="images/mail.png" width="32" height="32" p="center"></a>',
        $url); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-27T21:23:43.497

您需要明确地对所有非字母数字的内容进行 urlencode。

请注意，urlencode（php 命令）不会对所有内容进行 urlencode，例如下划线和字母以及可能的其他内容。

例子：

```
 $test="this: is it's dog/+_";
    echo "<br>";
    echo urlencode($test);
    echo "<br>";
    echo $test; 
```

产生：

```
this%3A+is+it%27s+dog%2F%2B_
this: is it's dog/+_ 
```

# ruby - 如何获取通过 attr_reader 或 attr_accessor 定义的属性

> ID：10006889
> 
> 赞同：23
> 
> 时间：2012-04-04T07:43:55.663
> 
> 标签：ruby, metaprogramming

假设我有一堂课`A`

```
class A
  attr_accessor :x, :y

  def initialize(x,y)
    @x, @y = x, y
  end
end 
```

在不知道它们的确切命名方式的情况下，我如何获取`x`和属性。`y`

例如

```
a = A.new(5,10)
a.attributes # => [5, 10] 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-04T07:46:40.480

使用内省，卢克！

```
class A
  attr_accessor :x, :y

  def initialize(*args)
    @x, @y = args
  end

  def attrs
    instance_variables.map{|ivar| instance_variable_get ivar}
  end
end

a = A.new(5,10)
a.x # => 5
a.y # => 10
a.attrs # => [5, 10] 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-03-02T18:38:31.890

虽然 Sergio 的回答有帮助，但它会返回所有实例变量，如果我正确理解 OP 的问题，这不是所要求的。

如果您只想返回具有例如 mutator 的“属性”，则必须做一些稍微复杂的事情，例如：

```
attrs = Hash.new
instance_variables.each do |var|
  str = var.to_s.gsub /^@/, ''
  if respond_to? "#{str}="
    attrs[str.to_sym] = instance_variable_get var
  end
end
attrs 
```

这仅返回使用 attr_accessor（或手动创建的 mutator）声明的属性，并隐藏内部实例变量。如果你想要用 attr_reader 声明的，你可以做类似的事情。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2016-08-11T07:12:22.253

```
class A
  ATTRIBUTES = [:x, :y]
  attr_accessor *ATTRIBUTES

  def initialize(x,y)
    @x, @y = x, y
  end

  def attributes
    ATTRIBUTES.map{|attribute| self.send(attribute) }
  end
end 
```

这可能不是 DRY-est，但如果您只关心为一个类执行此操作（而不是所有东西都继承自的基类），那么这应该可行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-20T17:28:06.640

请参阅其他[堆栈溢出问题](https://stackoverflow.com/questions/2487333/fastest-one-liner-way-to-list-attr-accessors-in-ruby)。他们覆盖`attr_accessor`.

```
 def self.attr_accessor(*vars)
    @attributes ||= []
    @attributes.concat vars
    super(*vars)
  end

  def self.attributes
    @attributes
  end

  def attributes
    self.class.attributes
  end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-12-29T15:11:25.353

如果您在属性上定义了`attr_writer`s/ `attr_accessor`s，则可以通过匹配正则`=$`表达式轻松检索它们：

```
A.instance_methods.each_with_object([]) { |key, acc| acc << key.to_s.gsub(/=$/, '') if key.match(/\w=$/) } 
```

或者

```
A.instance_methods.each_with_object([]) { |key, acc| acc << key if key = key.to_s.match(/^(.*\w)=$/)&.[](1) } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-04T15:15:13.253

当您使用 attr_accessor 在类中定义属性时，Ruby 使用 refexion 定义了几个方法，对于声明的每个属性，一个获取值，另一个设置，一个与属性同名的实例变量

你可以看到这个方法使用

```
p A.instance_methods

[:x, :x=, :y, :y=, :nil?, :===, :=~, :!~, :eql?, :hash, :<=>, :class, :singleton_class, :clone, :dup, :initialize_dup, :initialize_clone, :taint, :tainted?, :untaint, :untrust, :untrusted?,.. 
```

所以这个属性是可访问的，在类之外，有

```
p "#{a.x},#{a.y}" 
```

或者类内部通过对应的实例变量

```
class A
  ...
  def attributes
    [@x,@y]
  end
  ...
end
p a.attributes   #=> [5,10] 
```

# nsis - 是否可以告诉 NSIS 设置配置文件中列出的文件？

> ID：10006890
> 
> 赞同：0
> 
> 时间：2012-04-04T07:44:24.113
> 
> 标签：nsis

我必须从网络上的某个位置 http 下载不同的文件，但我想在配置文件中提供文件名版本。这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T14:40:14.090

[您可以使用 NSIS ini 指令](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#readinistr)读取文件，使用[FileRead](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#fileinst)手动解析或使用[帮助宏](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#textfunc)之一。

[您可以使用INetC](http://nsis.sourceforge.net/Inetc_plug-in)插件下载文件...

# c++ - std::string::c_str() 和临时文件

> ID：10006891
> 
> 赞同：66
> 
> 时间：2012-04-04T07:44:35.393
> 
> 标签：c++, stl, stdstring

以下 C++ 代码是否格式正确：

```
void consumer(char const* p)
{
  std::printf("%s", p);
}

std::string random_string_generator()
{
  // returns a random std::string object
}

consumer(random_string_generator().c_str()); 
```

我遇到的问题是，在创建临时 std::string 对象并获取 c_str() 指针之后，没有什么能阻止 std::string 对象被破坏（或者我错了？）。你能否指出我的标准，如果代码没问题的话。当我用 g++ 进行测试时，它确实有效。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-04T07:53:57.123

指针返回的指针指向`std::string::c_str()`由字符串对象维护的内存。在对字符串对象调用非常量函数或字符串对象被破坏之前，它一直有效。您关心的字符串对象是临时的。它将在完整表达式的末尾被破坏，而不是之前和之后。在您的情况下，完整表达式的结尾在对 的调用之后`consumer`，因此您的代码是安全的。如果`consumer` 将指针保存在某处，则不会是以后使用它的想法。

自 C++98 以来，临时对象的生命周期已被严格定义。在此之前，它会因编译器的不同而有所不同，而且您编写的代码无法与 g++ 一起使用（1995 年之前，大概——g++ 在标准委员会投票时几乎立即改变了这一点）。（当时也没有`std::string`，但同样的问题会影响任何用户编写的字符串类。）

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-04-04T07:48:16.373

临时`std::string`的生命周期刚好超出`consumer`返回点，因此*直接从内部`consumer`*使用该字符串上的任何内容是安全的。*不好*的是将返回的值存储`c_str`起来，以后再尝试使用（临时的会被销毁，我们只能猜测你会在指针的另一端找到什么）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T07:48:57.087

函数 random_string_generator() 返回的临时值可以安全地用于 consumer() 函数。

# javascript - 如何连接单选按钮（) 在检查时调用函数？

> ID：10006892
> 
> 赞同：1
> 
> 时间：2012-04-04T07:44:49.677
> 
> 标签：javascript, jquery

如何连接单选按钮

> `<input type radio .. />`

检查时调用函数？检查时我需要记录该按钮的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:57:00.013

正如你在[小提琴中看到的](http://jsfiddle.net/HVTsm/)

html:

```
<input type="radio" value="Test 1" /> Bullet 1 <br />
<input type="radio" value="Test 2" /> Bullet 2 <br />
<input type="radio" value="Test 3" /> Bullet 3 <br />
<input type="radio" value="Test 4" /> Bullet 4 <br /> 
```

js：

```
$(document).ready(function() {
    $("input").click(function() {
        if ($(this + ":checked")) {
            alert($(this).val());
        }
    });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:49:33.583

js：

```
<script>
function yourfunction()
{
    //function
}
</script>
<input id = "radio1" type = "radio" onclick = "yourfunction()" /> 
```

jQuery：

```
<script>
$( '#radio1' ).click(function(e)
{
    //function
});
</script>
<input id = "radio1" type = "radio" /> 
```

您可以添加条件来检查收音机是否被检查，看起来像

```
if ($( '#radio' ).attr('checked') == 'true')
{
} 
```

# qt - 如何从 Qt 中的应用程序关闭已经打开的浏览器

> ID：10006893
> 
> 赞同：3
> 
> 时间：2012-04-04T07:45:04.913
> 
> 标签：qt, qt4, symbian

我`QDeskTopServices`用来在 Qt 的应用程序中打开一个 URL，但是如果浏览器已经在后台打开，它不会进入前台并且在调用`QDeskTopServices`.

如果浏览器已经在后台打开，有什么方法可以检查并关闭它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T15:28:27.890

我找到了将浏览器放在前面的答案，但仍然需要将 URL 传递给浏览器。

```
#if defined(Q_WS_S60)
    TPtrC16 textPtr(reinterpret_cast<const TUint16*>(theUrl.utf16()));
    HBufC *param = HBufC::NewMaxLC(textPtr.Length());
    param->Des().Copy(_L("4 http://google.com"));

    RApaLsSession apaLsSession;
    const TUid KBrowserUid = {0x10008D39};

    TApaTaskList taskList(CEikonEnv::Static()->WsSession());
    TApaTask task = taskList.FindApp(KBrowserUid);
    if (task.Exists()){
        // Switch to existing browser instance
        task.BringToForeground();
        HBufC8* param8 = HBufC8::NewLC(param->Length());
        param8->Des().Append(*param);
        task.SendMessage(TUid::Uid(0), *param8); // UID not used
        CleanupStack::PopAndDestroy(param8);
    }
    else {
        if(!apaLsSession.Handle()) {
            User::LeaveIfError(apaLsSession.Connect());
        }
        TThreadId thread;
        User::LeaveIfError(apaLsSession.StartDocument(*param, KBrowserUid, thread));
        apaLsSession.Close();
    }

    CleanupStack::PopAndDestroy(param);
#else
    //QDesktopServices::openUrl(QUrl("http://google.com"));
#endif 
```

如果有任何建议，请将其添加到答案中。

**问题解决了，只需在您的 project.pro 文件中添加“symbian:TARGET.CAPABILITY += SwEvent”并制作签名应用程序。这将解决问题:)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-13T16:39:40.070

```
QDesktopServices::openUrl(QUrl("http://google.com")); 
```

使用上面的行，您可以打开浏览器。并且只需在您的 project.pro 文件中添加“symbian:TARGET.CAPABILITY += SwEvent”并制作签名应用程序。

参考这个[链接](http://asmncl.blogspot.in/2012/05/symbianqt-how-to-open-open-browsereven.html)

# android - 如何从视图中破坏活动？或者如何摧毁他们两个？

> ID：10006894
> 
> 赞同：0
> 
> 时间：2012-04-04T07:45:09.143
> 
> 标签：android, multithreading, android-activity, android-view, ondestroy

我为我的应用程序创建了一个活动和一个视图。在视图内部，我有一个充当服务器的线程。

```
public class MainActivity extends Activity {

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new MainView(this));
}
}

public class ServerView extends View {

public ServerView(Context context) {
    super(context);
        server.startServer();
}
} 
```

当我按下 backButton 时，我的应用程序没有被破坏。我手动破坏了它，但我的线程仍在后台运行。我需要捕捉 backButton 事件，所以我使用了这个

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
if ((keyCode == KeyEvent.KEYCODE_BACK)) {
    server.shutDown();
}
return super.onKeyDown(keyCode, event);
} 
```

这个函数不能停止我的线程。我不知道如何从视图中销毁我的 mainActivity？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T09:23:18.277

在我看来，如果你想销毁 Activity，你可以使用`Activity.finish()`. 如果你想销毁任何线程，你可以`System.exit(0);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T07:55:33.223

将此代码放在主要活动中并从您的服务器视图访问它

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK)) {
        server.shutDown();
    }
    return super.onKeyDown(keyCode, event);
    } 
```

在您的服务器视图中访问活动对象并调用此代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T08:01:24.967

您最好覆盖[`Activity.finish()`](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)方法并清除那里的所有占用资源（如`server.shutDown()`您的情况）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T09:39:33.583

只需调用`finish()`它即可按您的意愿工作

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-09T12:09:57.897

您可以使用 finish() 方法来销毁您的活动。并销毁在后台运行的线程，使用 return 语句，或者，

```
if(thread != null)
{
    Thread t1 = thread;
    thread = null;
    t1.interrupt();
} 
```

# iphone - 带有 jQ Touch 的 Retina 图标

> ID：10006896
> 
> 赞同：0
> 
> 时间：2012-04-04T07:45:29.370
> 
> 标签：iphone, ios4, icons, jqtouch, retina-display

如果用户有一个带有视网膜显示的iOS，任何人都知道我如何用它的视网膜版本替换原来的图标？

我试过 data-mask="[name]@2x.[ext]" 但没有运气。希望有人有解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T07:50:15.920

您必须在项目中包含两个文件：`image.png`和`image@2x.png`. 但是没有必要`@2x`在代码中写-suffix。只是：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"image.png"]]; 
```

iOS 会自动检测，应该使用什么图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T13:24:49.240

我正在使用以下方法：

1.  假设我想显示一个 100x40 像素高度的图像
2.  创建单个图像，200x80 像素
3.  为图像指定 100 像素的 CSS 宽度和 40 像素的高度

在非视网膜显示器上，这会将原始图像拉伸到 50%。就我个人的口味而言，结果看起来还不错。

在视网膜显示器上，这实际上会导致图像像素和设备（真实）像素之间的一对一映射。

不得不提一下，我没有使用 Phonegap 进行测试，而是在 MonoTouch 项目中使用了它，并带有一个 Web 容器。

# javascript - 如何使用 Handlebars 将多个 Google Maps 区域附加到 div

> ID：10006898
> 
> 赞同：1
> 
> 时间：2012-04-04T07:45:35.750
> 
> 标签：javascript, google-maps, google-maps-api-3, handlebars.js

我正在做一个项目，当用户点击他希望从中查看信息的项目时，我需要在谷歌地图小地图旁边显示数据。

基本上它是这样工作的：

1.  用户单击他希望查看有关信息的标签
2.  浏览器使用 jQuery 和 Handlebars 将单独的表格附加到屏幕的一侧，其中应该有：
    *   显示信息来源位置的 Google 地图实例
    *   资料

虽然不知何故我无法让 JS + jQuery + Handlebars 组合工作。我知道我需要创建一个帮助程序来在 Handlebars 模板中执行 JavaScript 代码，但是以某种方式在 HB 模板的表中添加一个 Google Maps 实例不起作用。

这是我目前正在处理的代码。谢谢你的帮助！

**模板文件：**

```
<script id="entry-template" type="text/x-handlebars-template">
<section class="Info" id={{id}}>
    <header class="InfoHeader small" onclick="collapseInfobox(this)">
        <p class=""></p>
    </header>

    <article class="hidden">
        <table class="Analyses" border="1">
        <tr>
            <td class="minimap"><div id="minimap_1_{{id}}" class="minimap">{{miniMap_1 context}}</div></td>
            <td class="graph"><div>{{ graph_1 }}</div></td>
        </tr>
        </table>
    </article>
</section>
</script>
<script type="text/javascript">
var HTMLsource = $("#entry-template").html();
var HTMLtemplate = Handlebars.compile(HTMLsource);
</script> 
```

**JavaScript 代码：**

```
function addInfo(id, start, end) {

var context = { 
    id: id, 
};

Handlebars.registerHelper('miniMap_1', function(data) {
    var minimapOptions = {
        disableDefaultUI: true,
        center: new google.maps.LatLng(_Coords.lat, _Coords.lon),
        zoom: 13,
    };
    var minimap1 = new google.maps.Map(document.getElementById(this), minimapOptions);

});

// contentArea is a div section in the page to which the info div should be appended

$("#contentArea").append(HTMLtemplate(context));
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T15:51:24.847

Okay, I guess I already managed to solve this issue I struggled with for couple of days.

Solution was not to actually use helper to implement the Google Maps instances to the table, but instead do this with jQuery's ready() function call. It seems that when using the helper, the Google Maps JS library does not find the map canvas div to which to create the map when the helper is ran. With ready() function call the div is actually created before anything is inserted there.

This workaround worked for me, hopefully this helpes also others who might encounter this issue:

**Template file:**

```
<script id="entry-template" type="text/x-handlebars-template">
<section class="Info" id={{id}}>
    <header class="InfoHeader small" onclick="collapseInfobox(this)">
        <p class=""></p>
    </header>

    <article class="hidden">
        <table class="Analyses" border="1">
        <tr>
            <td class="minimap"><div id="minimap_1_{{id}}" class="minimap"></div></td>
            <td class="graph"><div>{{ graph_1 }}</div></td>
        </tr>
        </table>
    </article>
</section>
</script>
<script type="text/javascript">
var HTMLsource = $("#entry-template").html();
var HTMLtemplate = Handlebars.compile(HTMLsource);
</script> 
```

**JavaScript code:**

```
function addInfo(id, start, end) {

    var context = { 
        id: id, 
    };

    // contentArea is a div section in the page to which the info div should be appended

    $("#contentArea").append(HTMLtemplate(context)).ready( function() {
        var minimapOptions = {

            // All options you'd like the map to have, e.g.

            disableDefaultUI: true,
            draggable: false,
            disableDoubleClickZoom: true,
            center: new google.maps.LatLng(_Coords.lat, _Coords.lon),
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP

        };
        var minimap1 = new google.maps.Map(document.getElementById("minimap_1_"+context.id), minimapOptions);
});
} 
```

# android - 在特定间隔中更改 textview 值

> ID：10006903
> 
> 赞同：0
> 
> 时间：2012-04-04T07:45:45.370
> 
> 标签：android

现在我正在做一个应用程序。在我的应用程序中，我必须每秒更改 textview 值。比如 1、2、3、4、5 等。我必须在第 10 秒停止该值。我从 . [在 intervel 上更新 ui](http://developer.android.com/resources/articles/timed-ui-updates.html)

但我不明白这一点。请为我提供一个简单的代码来更改 textview 值并在特定时间停止。请朋友们帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:58:32.610

试试这样。。

```
EditText t1=(EditText)findVieById(R.id.edittext1);
counter= new CountDownTimer(10000,1000);
counter.start();

  @Override
public void onFinish() {

  }

  @Override
public void onTick(long millisUntilFinished) {
long s1=10-(millisUntilFinished)/1000;
t1.setText(s1);

 } 
```

# ios - NSPredicate 和 sql-replace-function

> ID：10006904
> 
> 赞同：0
> 
> 时间：2012-04-04T07:45:45.637
> 
> 标签：ios, sqlite, nspredicate

我想在我的核心数据表中搜索我替换所有出现的“。”的条目。和 ''。

我想我可以写这样的东西：

```
[NSPredicate predicateWithFormat:@"replace(name,'.','.' CONTAINS[c] replace(%@,'.','')",searchtext]; 
```

但编译器不喜欢替换功能。有什么可以支持的吗？

我不想插入一个额外的数据库字段，其中包含我可以用于搜索的数据的清理副本。

# android - 我的 Android 4.0.x 平台设备不支持本机操作栏

> ID：10006908
> 
> 赞同：0
> 
> 时间：2012-04-04T07:46:02.007
> 
> 标签：android, android-layout, android-intent, android-emulator, android-actionbar

我正在我的应用程序中实现**Android 原生操作栏**。在[原生操作栏的 Android 开发者网站上](http://developer.android.com/guide/topics/ui/actionbar.html)，它说**ActionBar APIs 是在 Android 3.0 (API level 11) 中添加的**。

我的应用目标是：

```
<uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="13" /> 
```

我在手机[三星 Galaxy S2 GTI9100，Android 版本 4.0.3 (Ice Cream Sandwich)上运行我的应用程序，但未显示](http://www.androidaddicted.com/firmware/samsung/android/samsung-galaxy-s-ii-gt-i9100-i9100xwlp2-ice-cream-sandwich-ics-4-0-3-russia-firmware-update-518.html)**本机操作栏**的**溢出**部分（最右侧的下拉菜单），而是使用物理触摸按钮显示菜单。

 **为什么？我在 Android 4.0.3 平台上测试我的应用程序，为什么原生操作栏不起作用？虽然 android 开发者网站说它是在 Android 3.0（API 级别 11）中添加的......**以及如何使其工作？（在 actoin 栏上显示“溢出”下拉菜单而不是物理菜单按钮）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:02:47.740

将您的 targetSdkVersion 更改为 14

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T08:13:51.617

如果 android 版本为 11 或更高版本，我认为您应该将 HOLO 主题添加到您的活动或应用程序中。例如

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    if(Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB)
       setTheme(android.R.style.Theme_Holo);
} 
```**

# c# - 最接近匹配（识别）折线图绘制方法或算法

> ID：10006909
> 
> 赞同：1
> 
> 时间：2012-04-04T07:46:01.990
> 
> 标签：c#, pattern-matching, pattern-recognition

请看图表和数据。在绘图“px4”和其他绘图之间找到最接近匹配（最高相似度）的方法或算法是什么。如果有任何 C# 库或 VF-Graph 识别算法可以适应这个问题，任何建议都将不胜感激。

![来自数据的 px PLOTS](../Images/5bbbbcc7f97f070b6d8ff321d0215e0a.png)

**数据**

```
 enr px1 px2 px3 px4 px5 px6
    1   90  5   15  20  60  10
    2   70  10  20  30  85  15
    3   100 15  15  10  32  18
    4   80  20  8   3   9   44
    5   60  25  3   5   15  12
    6   50  30  12  8   24  16
    7   70  18  28  24  70  25
    8   90  12  32  28  84  22
    9   75  20  12  15  45  16
    10  65  10  20  18  54  25 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T08:03:06.183

我不是统计专家。但是...我会绘制一个图并比较每个点与另一个图上的等效点之间的差异，一次一个点。我会使用 Math.Abs​​() 将这 10 个差异中的每一个都转换为正数，然后使用您希望的任何方法（平均值、中位数等）来取 10 个差异的平均值。我会重复每个其他情节的比较。大多数计算可以沿途放弃，您只需要保留每个图的平均数。最小的平均值可能是最接近匹配的图。

因为我今天没有太多事情要做...

```
Dictionary<string, int[]> plots = new Dictionary<string, int[]>();

plots.Add("px1", new int[] { 90, 70, 100, 80, 60, 50, 70, 90, 75, 65 });
plots.Add("px2", new int[] { 5, 10, 15, 20, 25, 30, 18, 12, 20, 10 });
plots.Add("px3", new int[] { 15, 20, 15, 8, 3, 12, 28, 32, 12, 20 });
plots.Add("px4", new int[] { 20, 30, 10, 3, 5, 8, 24, 28, 15, 18 });
plots.Add("px5", new int[] { 60, 85, 32, 9, 15, 24, 70, 84, 45, 54 });
plots.Add("px6", new int[] { 10, 15, 18, 44, 12, 16, 25, 22, 16, 25 });

string test = "px4";
string winner = string.Empty;
double smallestAverage = double.MaxValue;

foreach (string key in plots.Keys)
{
    if (key == test)
    {
        continue;
    }

    int[] a = plots[test];
    int[] b = plots[key];

    double count = 0;

    for (int point = 0; point <= 9; point++)
    {
        count += Math.Abs(a[point] - b[point]);
    }

    double average = count / 10;

    if (average < smallestAverage)
    {
        smallestAverage = average;
        winner = key;
    }
}

Console.WriteLine("Winner: {0}", winner); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T09:04:59.020

从字面上看，有无数种方法可以定义两个图表之间的“差异”。

如果您将图形视为 10 维向量，则可以使用[向量 norm](http://mathworld.wolfram.com/VectorNorm.html)。

如果要将它们视为区间 [1, 10] 上的实值函数，则可以在[L^p-space](http://mathworld.wolfram.com/Lp-Space.html)上使用范数。（虽然这应该涉及积分，因为你的函数都是由直线段组成的，你可以精确地计算这个范数，而不必对积分进行数值逼近。）

确实，您需要决定如何定义“相似”，然后选择一种符合您预期的方法。

# c++ - 我可以为模板成员函数提供几个默认值吗？

> ID：10006910
> 
> 赞同：0
> 
> 时间：2012-04-04T07:46:21.103
> 
> 标签：c++, templates

作为 C++ 的忠实粉丝，我一直在思考一个问题。问题是：

经典著作《Modern C++ Design》说：“库编写者不能提供多个默认值。类模板实现者最多只能为每个成员函数提供一个默认实现。你不能为模板成员函数提供多个默认值。” （参见“1.4 模板的好处”）

作者的实际意思是什么？

据我了解，“几个默认值”是一个自相矛盾的短语。因为“几个”明确表示“多个”，而“默认”隐含表示“唯一”。

希望能得到一些有说服力的解释。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T07:58:04.757

它只是说明了您的意思：默认情况下，开发人员无法为模板成员函数建立两个不同的值。

# ruby-on-rails - rails active-record 的方法可以接受数组格式的参数吗？

> ID：10006915
> 
> 赞同：1
> 
> 时间：2012-04-04T07:46:46.700
> 
> 标签：ruby-on-rails, ruby, activerecord, syntax

我有一个模型“汽车”。它的结构看起来像这样。

```
Car
=========
Make:string
Year:integer 
```

之前，我了解到 ruby​​ 中的一些方法，尤其是活动记录的方法，实际上是以数组作为参数。

然后，不是以传统方式查找集合：

```
Car.find(:all, :limit => 10, :offset => 5) 
```

我可以像这样搜索集合吗？

```
Car.find([:all, {:limit => 10, :offset => 5}]) 
```

我已经在控制台中尝试过，但它对我不起作用。我只是想知道为什么它没有按应有的方式工作。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:03:45.090

您不能传递像数组这样的参数，它是为 id 预定义的。喜欢：

```
Car.find([1,2,3,4,5]) 
```

看看链接： [http ://apidock.com/rails/ActiveRecord/Base/find/class](http://apidock.com/rails/ActiveRecord/Base/find/class)

# c - 从函数指针调用函数而不分配？

> ID：10006916
> 
> 赞同：0
> 
> 时间：2012-04-04T07:46:48.183
> 
> 标签：c, linux, linux-kernel, kernel

通常我们必须这样做才能从函数指针调用函数：

```
int foo()
{
}

int main()
{
    int (*pFoo)() = foo; // pFoo points to function foo()
    foo();
    return 0;
} 
```

在 Linux 内核代码中，[sched_class](http://lxr.linux.no/#linux+v3.3.1/include/linux/sched.h#L1101)有很多函数指针：

```
struct sched_class {
        const struct sched_class *next;

        void (*enqueue_task) (struct rq *rq, struct task_struct *p, int flags);
        void (*dequeue_task) (struct rq *rq, struct task_struct *p, int flags);
        void (*yield_task) (struct rq *rq);
        bool (*yield_to_task) (struct rq *rq, struct task_struct *p, bool preempt);
        .....
} 
```

在[pick_next_task](http://lxr.linux.no/#linux+v3.3.1/kernel/sched/core.c#L3122)`sched_class`函数中，它定义了一个named的本地实例`class`，并直接调用其中的函数，而不分配给具有相同签名的外部函数（从 开始`for_each_class`）：

```
static inline struct task_struct *
pick_next_task(struct rq *rq)
{
        const struct sched_class *class;
        struct task_struct *p;
    /*
     * Optimization: we know that if all tasks are in
     * the fair class we can call that function directly:
     */
    if (likely(rq->nr_running == rq->cfs.h_nr_running)) {
            p = fair_sched_class.pick_next_task(rq);
            if (likely(p))
                    return p;
    }

    for_each_class(class) {
            p = class->pick_next_task(rq);
            if (p)
                    return p;
    }

    BUG(); /* the idle class will always have a runnable task */
} 
```

是不是因为 中的每个函数指针`sched_class`都和实际实现的函数同名，所以每次通过 的函数指针调用时`sched_class`，都会自动在内核地址空间中找到匹配的符号？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T07:50:56.747

的定义`for_each_class`应该为你清楚

```
 #define for_each_class(class) \
       for (class = sched_class_highest; class; class = class->next) 
```

如果你继续追踪，`sched_class_highest`最终会是这样的

```
#define sched_class_highest (&stop_sched_class)
extern const struct sched_class stop_sched_class;

/*
* Simple, special scheduling class for the per-CPU stop tasks:
*/
const struct sched_class stop_sched_class = {
      .next                   = &rt_sched_class,

      .enqueue_task           = enqueue_task_stop,
      .dequeue_task           = dequeue_task_stop,
      .yield_task             = yield_task_stop,

      .check_preempt_curr     = check_preempt_curr_stop,

      .pick_next_task         = pick_next_task_stop,
      .put_prev_task          = put_prev_task_stop,

#ifdef CONFIG_SMP
      .select_task_rq         = select_task_rq_stop,
#endif

     .set_curr_task          = set_curr_task_stop,
     .task_tick              = task_tick_stop,

     .get_rr_interval        = get_rr_interval_stop,

     .prio_changed           = prio_changed_stop,
     .switched_to            = switched_to_stop,
}; 
```

现在你快乐吗？:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T07:50:42.980

[https://github.com/torvalds/linux/blob/v3.3/kernel/sched/sched.h#L850](https://github.com/torvalds/linux/blob/v3.3/kernel/sched/sched.h#L850)

看看`for_each_class`宏的扩展。`class`它在使用指针之前为其赋值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T07:55:07.573

每个`sched_class`结构及其包含的函数指针都被初始化（否则，它可能是一个错误）。例如，公平调度[类](http://lxr.linux.no/#linux+v3.3.1/kernel/sched/fair.c#L216)`kernel/sched/fair.c`在（参见[此处](http://lxr.linux.no/#linux+v3.3.1/kernel/sched/fair.c#L5563)）中初始化：

```
const struct sched_class fair_sched_class = {
        .next                   = &idle_sched_class,
        /* lots of assignments */
        .pick_next_task         = pick_next_task_fair,
        /* etc. */
}; 
```

# apache-flex - Flex ComboBox - 移除边框

> ID：10006927
> 
> 赞同：0
> 
> 时间：2012-04-04T07:47:36.047
> 
> 标签：apache-flex, combobox, flex3

有谁知道如何删除组合框周围的小边框？

在 Flex3 组合框（光环主题）中，左、右和底部边缘都有这个灰色的小边框。我想删除这些边框，以便组合框的按钮部分根本没有任何边框。相反，我只想要顶部边框。

有什么想法可以做到吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T12:34:27.510

我认为您必须将皮肤 css 属性中默认使用的类替换为您自己的类。文档说这是在 ComboBase 中定义的，因此您需要查看那里的类，看看您是否可以扩展甚至取消它（通过将皮肤设置为空的 ClassReference）。

# linux - 用awk中的每一行打印索引

> ID：10006934
> 
> 赞同：0
> 
> 时间：2012-04-04T07:48:26.390
> 
> 标签：linux, shell, unix, ksh

第一次选择显示选项，它工作正常，但是当我从 screenTwo 功能中断进入这个菜单（previuos）时，它要求我选择但不显示选项，我该如何处理？

```
 PS3="Please make a selection => " ; export PS3
    select var in `awk -F "#" '{print $4}' ${Temp_Config_File} | uniq` PREVIOUS
    do
    echo "\n`date +"%d%m%Y%H%M%S"` Daemon $var selected " >> $Log_File
    if [ -z $var ] ; then echo "\n\tPlease enter a valid choice \n " ; continue
    else  
        if [ $var = "PREVIOUS" ]; then 
            #removeFiles
            break 
        fi
            screenTwo $var

    fi
    done 
```

> 第一个选项：请给我你的想法。
> 
> 第二个选项：捕获 screenTwo 的返回，每当它中断时，使用 awk 以 $4 打印索引。（如下所示，但我不喜欢它）

```
if [ $breakStat -eq 99 ]; then
     i=1
     echo "\n\nPlease choose one of the following deamon you wish to Start/Stop\n\n"
     awk -F "#" '{print $4}' Temp_OPDaemon_Config.cfg | uniq | while read line
     do
     echo "${i}) ${line}"
     let i=i+1
     done
     echo "${i}) PREVIOUS"
fi 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:06:07.743

这就是我为处理它所做的。

```
PS3="Please make a selection => " ; export PS3
select var in `awk -F "#" '{print $4}' ${Temp_Config_File} | uniq` PREVIOUS
do
echo "${Date_Time} Daemon $var selected \n" >> $Log_File
if [ -z $var ] ; then echo "\n\tPlease enter a valid choice \n " ; continue
else  
    if [ $var = "PREVIOUS" ]; then 
        #removeFiles
        break 
    fi
    while : 
    do
        screenTwo $var
        breakStat=$?
        if [ $breakStat -eq 99 ]; then
         break
         elif [ $breakStat -eq 98 ]; then
         continue
        fi
    done

if [ $breakStat -eq 99 ]; then
    echo "\n\nPlease choose one of the following deamon you wish to Start/Stop\n\n"
    awk -F "#" '{print $4 }' ${Temp_Config_File} | uniq | awk -F "#" '{print NR ") " $0} END {print NR+1") PREVIOUS"}'
fi

fi
done 
```

# python - Python字符串比较相似度

> ID：10006938
> 
> 赞同：3
> 
> 时间：2012-04-04T07:48:55.727
> 
> 标签：python

我正在尝试比较两个数据列表，其中包含一些表示同一对象的自由文本。例子

```
List 1 ['abc LLC','xyz, LLC']
List 2 ['abc , LLC','xyz LLC'] 
```

这是一个简单的例子，但问题是可能会有很多变化，比如改变大小写或添加一些“。” 介于两者之间。是否有任何 python 包可以进行比较并给出相似度的度量？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T07:54:38.760

您可以使用[Levenshtein Distance](http://en.wikipedia.org/wiki/Levenshtein_distance)算法的实现来进行非精确字符串匹配，例如[来自 Wikibooks 的这个](http://en.wikibooks.org/wiki/Algorithm_implementation/Strings/Levenshtein_distance#Python)。

另一种选择是，例如，在原始比较之前将所有内容折叠为小写、删除空格等——这当然取决于您的用例：

```
import string, unicodedata
allowed = string.letters + string.digits
def fold(s):
  s = unicodedata.normalize("NFKD", unicode(s).lower()).encode("ascii", "ignore")
  s = "".join(c for c in s if c in allowed)
  return s

for example in ['abc LLC','xyz, LLC', 'abc , LLC','xyz LLC']:
  print "%r -> %r" % (example, fold(example)) 
```

会打印

```
'abc LLC' -> 'abcllc'
'xyz, LLC' -> 'xyzllc'
'abc , LLC' -> 'abcllc'
'xyz LLC' -> 'xyzllc' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T08:21:34.407

有一个优秀的二进制库，它使用字符串之间的 levenshtein 距离（编辑距离）来估计相似度。试试看：

[https://github.com/miohtama/python-Levenshtein](https://github.com/miohtama/python-Levenshtein)

# jquery - 如何使用 JQuery 滚动重复背景？

> ID：10006945
> 
> 赞同：0
> 
> 时间：2012-04-04T07:49:31.730
> 
> 标签：jquery, css, animation

我正在处理的网站有一个重复的背景图案应用于`<body>`. 当向上或向下滚动页面时，该模式不是固定的并且会按预期垂直滚动。

顶部有一个卷轴，带有三组文本。这些集合在某些导航项的按下时从左向右滑动：

![在此处输入图像描述](../Images/4ca678c404e0901b9c8027ba5fd743a8.png)

目前，文本向左/向右移动，但背景保持水平固定（这也是预期的）。

目标是在给定方向上以与文本移动相同的速度为背景图案设置动画，以产生向左或向右完整滚动的效果，而不是文本在画布上向左或向右“滑动”。

在此之前我使用过一个 JQuery 插件，让我`background-position`为元素的值设置动画，也许可以用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T08:32:27.843

绝对地！我会使用背景位置 jQuery 插件： http:
[//www.protofunc.com/scripts/jquery/backgroundPosition/](http://www.protofunc.com/scripts/jquery/backgroundPosition/)

这是一个使用这个概念的很酷效果的教程，可能会给你一些想法。[http://snook.ca/archives/javascript/jquery-bg-image-animations](http://snook.ca/archives/javascript/jquery-bg-image-animations)

我还建议您将背景图像移到`div`身体内部，因为如果您需要进一步调整任何内容，这将为您提供更大的灵活性。

# php - 防止全表扫描简单查询

> ID：10006950
> 
> 赞同：1
> 
> 时间：2012-04-04T07:50:17.693
> 
> 标签：php, mysql

最近我们的 mysql 服务器遇到了很多问题，我一直在使用分析器 (JetProfiler) 和压力测试器 (loadUI) 运行一些测试。我注意到，在同时使用 LoudUI 运行至少 20 个连接后，它已经无法连接或连接到网页的速度非常慢。Jetprofiler 说我们运行的几乎每个查询都很糟糕，因为它们都使用全表扫描，我想知道这是否真的是问题所在。

这是可能运行最多的查询的屏幕截图：

![在此处输入图像描述](../Images/72539867cca781294f6bd22eab07a8b6.png)

我将如何改善这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T08:23:16.013

只需为以下列创建单个索引：datum、webid 和 actief：

```
create index idx_datum on nieuws(datum);
create index idx_webid on nieuws(webid);
create index idx_actief on nieuws(actief); 
```

这应该会产生更好的查询性能。

# iis-7 - IIS 反向代理到 phpBB 配置不重写出站 URL

> ID：10006955
> 
> 赞同：0
> 
> 时间：2012-04-04T07:50:50.297
> 
> 标签：iis-7, reverse-proxy, phpbb3

我有一台运行在一个盒子上的 phpBB 服务器。我想通过运行 IIS7 的主服务器公开它。入站重写似乎运行良好。但我似乎无法让出站做任何事情。

这是我的配置：

```
<rewrite>
  <rules>
    <rule name="forums - inbound reverse proxy">
      <match url="^gamer/forums/(.*)" />
      <action type="Rewrite" url="http://phpbbsrv/{R:1}" />
    </rule>
  </rules>
  <outboundRules>
    <rule name="forums - outbound HTTP rewrites">
      <match pattern="(.*)://phpbbsrv/(.*)" />
      <action type="Rewrite" value="{R:1}://{HTTP_HOST}/gamer/forums/{R:2}" />
    </rule>
  </outboundRules>
</rewrite> 
```

登录 phpBB3 时，“您已成功登录”页面有一个 META 刷新标签和一个普通的 A HREF 链接，两者都包含[http://phpbbsrv/](http://phpbbsrv/)。他们没有被重写。我已经打开了失败的请求跟踪，但它显然没有记录多少出站规则。

关于如何进行的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T04:17:12.423

我可能需要睡一会儿。显然我的意思是在出站规则中使用 SERVER_NAME，而不是 HTTP_HOST。它正在做我告诉它做的事情......就像计算机倾向于做的那样。

对不起，噪音。

# sql - 将两个查询合并为一个以连接结果

> ID：10006956
> 
> 赞同：0
> 
> 时间：2012-04-04T07:50:55.773
> 
> 标签：sql, tsql

我有一个小 sql 问题要问你。

我有两个疑问：

```
SELECT tbl_CostPrevisions.Month, SUM(tbl_CostPrevisions.Value) AS 'COST' FROM tbl_CostPrevisions
WHERE tbl_CostPrevisions.Year = @YEAR
GROUP BY tbl_CostPrevisions.Month

SELECT tbl_IncomePrevisions.Month, SUM(tbl_IncomePrevisions.Value) AS 'INCOME' FROM tbl_IncomePrevisions
WHERE tbl_IncomePrevisions.Year = @YEAR
GROUP BY tbl_IncomePrevisions.Month 
```

结果如下：

```
1   48550,41
2   61082,86
3   49479,63
4   46529,74
5   46549,74
6   48619,63
7   49649,63
8   48279,92
9   48192,42
10  48467,42
11  48201,42
12  48262,42 
```

和

```
1   8123,16
2   9174,15
3   50009,12
4   50705,00
5   31971,00
6   15217,00
7   13151,00
8   9677,00
9   9616,00
10  9653,00
11  9698,00
12  9605,00 
```

我怎样才能只写一个查询来给我以下结果？

```
1   48550,41    8123,16
2   61082,86    9174,15
3   49479,63    50009,12
4   46529,74    50705
5   46549,74    31971
6   48619,63    15217
7   49649,63    13151
8   48279,92    9677
9   48192,42    9616
10  48467,42    9653
11  48201,42    9698
12  48262,42    9605 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:55:59.720

尝试以下内部联接：

```
SELECT tbl_CostPrevisions.Month, SUM(tbl_CostPrevisions.Value) AS 'COST' , SUM(tbl_IncomePrevisions.Value) AS 'INCOME'
FROM tbl_CostPrevisions
INNER JOIN tbl_IncomePrevisions on tbl_CostPrevisions.Month = tbl_IncomePrevisions.Month
WHERE tbl_CostPrevisions.Year = @YEAR AND tbl_IncomePrevisions.Year = @YEAR
GROUP BY tbl_CostPrevisions.Month 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:56:16.107

```
SELECT
    tbl_CostPrevisions.Month, 
    SUM(tbl_CostPrevisions.Value) AS 'COST',
    SUM(tbl_IncomePrevisions.Value) AS 'INCOME' 
FROM
    tbl_CostPrevisions,
    tbl_IncomePrevisions
WHERE tbl_CostPrevisions.Year = @YEAR
AND   tbl_IncomePrevisions.Year = @YEAR
AND   tbl_CostPrevisions.Month = tbl_IncomePrevisions.Month
GROUP BY 
    tbl_CostPrevisions.Month, 
    tbl_IncomePrevisions.Month 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T07:59:28.563

尝试以下查询。`INNER JOIN`在 tbl_IncomePrevisions 上，因此可以使用大量数据。我为这些表命名是为了方便您。

```
SELECT cp.Month, SUM(cp.Value) AS 'COST', SUM(ip.Value) AS 'INCOME' 
FROM tbl_CostPrevisions cp
INNER JOIN tbl_IncomePrevisions ip ON ip.Month = cp.Month AND ip.Year = cp.Year
WHERE cp.Year = @YEAR AND ip.Year = @YEAR
GROUP BY cp.Month, ip.Month 
```

# html - 在 Mac 上使用 Bash 使用默认浏览器打开 .html 文件

> ID：10006958
> 
> 赞同：69
> 
> 时间：2012-04-04T07:51:14.223
> 
> 标签：html, macos, bash, browser, applescript

所以，这就是我需要的：

假设我有一个`index.html`文件。

如何告诉终端使用默认浏览器打开它？

（使用 AppleScript、BASH、...？）

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-04-04T08:38:37.517

从包含 index.html 的目录中，尝试...

```
open ./index.html 
```

open 命令打开一个文件（或目录，或 URL）。open 包含在 MacOSx 中。细节和选项可以使用

```
man open 
```

注意：默认应用程序是通过 LaunchServices 确定的。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2014-09-08T19:27:07.017

您可以使用带有 -a 标志的 open 命令在 Chrome（或任何目标应用程序）中打开文件或位置：

`open -a "Google Chrome" index.html`

这也适用于 URL，即 open -a "Google Chrome" [http://www.apple.com](http://www.apple.com)。

--->感谢用户“robmathers”，我在[堆栈交换中找到了这个答案](https://apple.stackexchange.com/questions/83630/create-a-termnial-command-to-open-file-with-chrome)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2012-04-20T17:23:00.820

实际上，这并不像看起来那么简单。正如其他答案所建议的那样，OS X 提供了`open`从 shell 启动与文件类型匹配的应用程序的实用程序。但是，在 HTML 文件的情况下，即使用 Launch Services 注册的**文件类型`public.html`**的应用程序，可以但不一定是您的默认浏览器（我认为它是在原始安装中） - 或任何编辑器注册为能够编辑 HTML（在开发系统上并不罕见）。虽然默认浏览器无论如何都注册了**URL 协议`http`**`open`，但无法访问该协议处理程序以打开带有.

更复杂的是，尽管处理程序存储在`com.apple.LaunchServices.plist`可通过`defaults`命令访问的首选项中，但信息的结构（具有两个相同级别条目的字典，一个表示协议，一个表示处理程序）使得使用`defaults`.

好消息是有人已经解决了这个问题：HAMsoft Engineering 提供了*DefaultApplication* shell 实用程序。[下载它](http://www.hamsoftengineering.com/codeSharing/defaultApplication/defaultApplication.html)并将其保存在 shell 可以访问的位置（通常`/usr/local/bin`，虽然这不在某些 OS X 版本上 shell 的默认路径中 - 请检查 的内容`/etc/paths`以确保）。可用的，以下命令将在默认浏览器中打开一个 HTML 文件，否则可能会注册任何编辑器/查看器：

```
open -a "$(/usr/local/bin/DefaultApplication -url 'http:')" "/path/to/your/document.html" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-12T21:22:27.497

您还[可以使用 Perl 获取默认浏览器](http://daringfireball.net/2009/01/applescripts_targetting_safari_or_webkit)：`open http://example.com -a "$(VERSIONER_PERL_PREFER_32_BIT=true perl -MMac::InternetConfig -le 'print +(GetICHelper "http")[1]')"`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-11-26T18:45:39.337

在终端中，您可以运行 open index.html

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-18T15:52:38.760

通过将文件放在浏览器命令之后，我设法用 chrome 打开了 html 文件。所以，

```
google-chrome-stable ./index.html 
```

虽然我不确定默认浏览器的调用是什么，但如果你知道它，你可以将它作为别名放在你的 .bashrc 中，从那时起，使用你称之为别名的任何东西，加上文件。

```
goo ./index.html 
```

只是我的经验，第一反应

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-05-08T19:10:08.737

要在默认浏览器中打开 filename.html，请使用：

```
open filename.html 
```

open 是一个非常好的命令，也是 Mac OS 的一个特性，让我更深地爱上了它。它会自动选择适当的默认应用程序来打开文件。

如果您想在所需的应用程序中打开文件而不是默认文件：

```
open -a /Applications/Google\ Chrome.app filename.html 
```

Google 后面的反斜杠`\`用于转义空格字符。

或者，您可以编写：

```
open -a "/Applications/Google Chrome.app" filename.html 
```

希望这可以帮助你（我知道我很晚了）和其他人！！！。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2021-11-16T09:50:05.607

这适用于linux，也应该适用于mac

```
#!/bin/sh

# open a html file in default browser, not text editor,
# when text editor is set as default app for html files

url=file:///path/to/file.html

protocol=http

app=$(xdg-mime query default x-scheme-handler/$protocol)
# example: chromium-browser.desktop

[ -z "$app" ] && {
  echo "error: xdg-mime could not find default app for protocol $protocol"
  exit 1
}

app=$(basename $app .desktop)

gtk-launch $app "$url" 
```

理想情况下我只能说

```
xdg-open http+file:///path/to/file.html 
```

但这不起作用

# algorithm - 用 C++ 表示树

> ID：10006960
> 
> 赞同：0
> 
> 时间：2012-04-04T07:51:24.783
> 
> 标签：algorithm, tree, maze

对于动态编程，我存储树的方式有哪些？

我正在做一个任务，要求我解决一个没有左转和右转最小化的迷宫。我的想法是将所有可能的路径存储到树中，然后穿过（遍历）树寻找最小的右转。为了使代码更高效，只要路径涉及

a) 左转 b) 比当前最知名的解决方案右转更多的解决方案

我不会将它添加到树中。希望我对我在这里所做的事情有一个清晰的了解。我真的很感激这方面的意见。

我正在查看存储的树将包含迷宫中所有可能的方向，每个孩子的父级将是前一个位置。我相信有些父母会有两个以上的孩子。

我想知道储存这种树的最佳方法是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T13:12:46.967

如果问题是解决迷宫，我建议使用[回溯](http://en.wikipedia.org/wiki/Backtracking)而不是创建这样的树。如果您必须创建树，您可以使用一棵树，其中您可以右转的每个路口都表示为一个节点，如果右转，子节点将是下一个路口，如果您没有右转，则将是下一个路口。我不确定我是否正确理解了你，但我希望这能给你一些关于如何继续的指示。

# javascript - 读取 css 文件的特定属性

> ID：10006962
> 
> 赞同：1
> 
> 时间：2012-04-04T07:51:36.310
> 
> 标签：javascript, jquery

我有一个包含 jQuery 的 JSP 页面。

我有一个包含大量行的 CSS 文件，我想使用 jquery 将外部 CSS 文件中给定元素的一些特定样式（例如：页眉/页脚）读取到我的 jsp 页面中。

# php - Yii 框架中的 CListView

> ID：10006963
> 
> 赞同：4
> 
> 时间：2012-04-04T07:51:37.917
> 
> 标签：php, frameworks, yii, yii-components

我已经开始研究 yii 框架，我正在关注 yii 博客教程，以在本教程中学习 yii 框架的基础知识，他们在帖子视图中使用了 ClistView，但我遇到了一个异常![在此处输入图像描述](../Images/96d5ace4f351bcc98771cf1263076165.png)

这是我在视图文件中使用的代码：

```
$this->breadcrumbs=array(
    'Posts'=>array('index'),
    $model->post_id,
);

$this->menu=array(
    array('label'=>'List Posts', 'url'=>array('index')),
    array('label'=>'Create Posts', 'url'=>array('create')),
    array('label'=>'Update Posts', 'url'=>array('update', 'id'=>$model->post_id)),
    array('label'=>'Delete Posts', 'url'=>'#', 'linkOptions'=>array('submit'=>array('delete','id'=>$model->post_id),'confirm'=>'Are you sure you want to delete this item?')),
    array('label'=>'Manage Posts', 'url'=>array('admin')),
);
?>

<?php if( !empty($_GET['tag']) ) : ?>
<h1>Posts Tagged with <em><?php echo CHtml::encode($_GET['tag']); ?></em></h1>
<?php endif; ?>

<?php $this->widget('zii.widgets.CListView', array(
    'dataProvider' => $model,
    'itemView' => '_view',
    'template' => "{items}\n{pager}",
)); 
```

这是我的 PostsController 包含的内容：

```
/**
     * Displays a particular model.
     * @param integer $id the ID of the model to be displayed
     */
    public function actionView($id)
    {
        $post = $this->loadModel($id);
        $this->render('view',array(
            'model'=>$post,
        ));
    }

/**
     * Returns the data model based on the primary key given in the GET variable.
     * If the data model is not found, an HTTP exception will be raised.
     * @param integer the ID of the model to be loaded
     */
    public function loadModel($id)
    {
        if( $this->_model === NULL )
        {
            if( Yii::app()->user->isGuest )
                $condition = 'post_status='.Posts::STATUS_PUBLISHED.' or post_status='.Posts::STATUS_ARCHIVED;
            else
                $condition = '';

            $this->_model = Posts::model()->findByPk($id, $condition);

            if($this->_model === NULL)
                throw new CHttpException(404, 'The requested page does not exist.');
        }

        return $this->_model;
    } 
```

我不知道我在哪里做错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T08:01:22.420

a的`dataProvider`属性`CListView`应该是 a `CActiveDataProvider`（或不同的数据提供者）。尝试

```
'dataProvider' => new CActiveDataProvider($model), 
```

反而。

# testing - 测试服务器容量

> ID：10006964
> 
> 赞同：1
> 
> 时间：2012-04-04T07:51:39.127
> 
> 标签：testing, load, traffic

是否可以模拟到服务器的大量流量，以测试它如何承受所有请求？

服务器当前未启用，它不会干扰继续服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:59:50.613

我过去一直使用[ab](http://httpd.apache.org/docs/2.0/programs/ab.html)，尽管我确信还有其他工具。

# linux-kernel - Linux内核如何检测以太网供电（PoE）

> ID：10006967
> 
> 赞同：1
> 
> 时间：2012-04-04T07:51:54.977
> 
> 标签：linux-kernel, embedded, linux-device-driver, ethernet

我想在内核检测到以太网电源连接时捕获一个信号。

我没有 gpios 来做这项业务。

我正在研究基于 atheros 芯片组的接入点。它具有 Realtek RTL8363SB 以太网模块。内核中是否有任何机制/中断/信号/api可以检测到它从哪里获得电源？

我`CONFIG_POWER_SUPPLY`在构建内核 V 2.6.36 时启用了

谢谢。

# ajax - kaminari ajax 分页中的问题

> ID：10006968
> 
> 赞同：1
> 
> 时间：2012-04-04T07:51:54.827
> 
> 标签：ajax, ruby-on-rails-3, pagination, kaminari

我在我的项目中使用 kaminari ajax 分页。它工作正常，但内容在页面中显示页数。例如，如果每页的项目数为 7，则显示相同内容的 7 倍。正在做的是

在 product_details 控制器中

```
 def index
    @products=ProductDetail.where("department_id = ? and category_id = ?",1, 1).page(params[:page]).per(15)
  end 
```

在 product_details/index.html.erb

```
<div id="product_details">
    <%= render @products %>
</div>
<div id="paginator">
    <%= paginate @products, :remote=>true %>
</div> 
```

在 product_details/index.js.erb

```
$('#product_details').html('<%= escape_javascript render (@products) %>');
$('#paginator').html('<%= escape_javascript(paginate(@products, :remote=>true).to_s)%>'); 
```

在 product_details/_product_detail.html.erb

```
<div id="product_list">             
    <% @products.each do | product | %> 
        <div class="product_container">     
            <div class="product_box" >
                <div id="future_image_container">
                    <div class="image_block" >
                        <%= image_tag(product.image_path, :alt => "product image", :height=>"215px") %>
                    </div>
                    <span id="future_price" style="text-decoration: line-through; color: #9e9c9c;">
                        <span style="color: black;">
                            <%=  "$#{product.price}" %>
                        </span>
                    </span>
                    <div id="circle">
                        <p>
                            <% if(product.discount > 0) %>
                                <% new_price=((2.0*((product.price*product.discount)/100)).round)/2.0 %>
                            <% else %>
                                <% new_price=product.price %>
                            <% end %>
                            <%= "$#{new_price}"%>
                        </p>
                    </div>
                </div>
                <p class="future_product_name">
                    <%= product.name %>
                </p>
                <% @brands=Brand.where("id=?",product.brand_id)
                    @brands.each do |brand|
                        @brandname=brand.name
                    end
                %>
                <p class="future_product_name">
                    <%= "Brand : #{@brandname}" %>
                </p>
            </div>
        </div>
    <% end %>
</div> 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T11:59:35.477

我注意到，当我使用 <%= render @products %> 时，我每页取了多少个项目，它重复了多少次。因此我通过以下代码解决了这个问题：

在 product_details 控制器中

```
 def index
    @products=ProductDetail.where("department_id = ? and category_id = ?",1, 1).page(params[:page]).per(15)
  end 
```

在 product_details/home.html.erb

```
<div id="product_details">
    <%= render 'index' %>
</div> 
```

在 product_details/index.js.erb

```
$('#product_details').html('<%= escape_javascript render ('index') %>'); 
```

在 product_details/_index.html.erb

```
<div id="product_list">
    <%= paginate @products, :remote=>true %>                
    <% @products.each do | product | %> 
        <div class="product_container">     
            <div class="product_box" >
                <div id="future_image_container">
                    <div class="image_block" >
                        <%= image_tag(product.image_path, :alt => "product image", :height=>"215px") %>
                    </div>
                    <span id="future_price" style="text-decoration: line-through; color: #9e9c9c;">
                        <span style="color: black;">
                            <%=  "$#{product.price}" %>
                        </span>
                    </span>
                    <div id="circle">
                        <p>
                            <% if(product.discount > 0) %>
                                <% new_price=((2.0*((product.price*product.discount)/100)).round)/2.0 %>
                            <% else %>
                                <% new_price=product.price %>
                            <% end %>
                            <%= "$#{new_price}"%>
                        </p>
                    </div>
                </div>
                <p class="future_product_name">
                    <%= product.name %>
                </p>
                <% @brands=Brand.where("id=?",product.brand_id)
                    @brands.each do |brand|
                        @brandname=brand.name
                    end
                %>
                <p class="future_product_name">
                    <%= "Brand : #{@brandname}" %>
                </p>
            </div>
        </div>
    <% end %>
</div> 
```

现在没有产品重复和ajax分页也可以正常工作

# encryption - 非专有目录加密

> ID：10006971
> 
> 赞同：0
> 
> 时间：2012-04-04T07:52:04.407
> 
> 标签：encryption, directory, compression

我们将测量结果存储在目录中。每个目录都有一个 meta.xml，它描述了关于结果文件的常见内容，以及几个数据文件。这个结果必须加密。

我会梦想这样的解决方案：

1.  我们可以使用 ZIP-、TAR- 或类似的算法将目录打包成文件
2.  [可选] 我们可以用我们自己的 MIME 类型扩展存档头*（MIME 识别没有文件扩展名）*
3.  我们可以使用归档标准（例如 ZIP）中定义的加密算法来加密/解密我们的结果
4.  我们可以从存档中提取单个文件，而无需解密整个文件*（有 100Mb 文件，但大多数时候我只对 meta.xml 感兴趣）*
5.  我们可以使用常规工具（Unix 上的 7Zip、WinZip、zip）来访问加密文件
6.  [可选] 我们可以使用多个密钥来加密我们的结果文件

这个解决方案可以实现吗？是否有可以完成这项工作的开源库？使用哪种加密算法？

最好的祝福！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T02:01:12.847

PKZip、WinZip 和 7-Zip 支持在 zip 文件中使用 AES 加密，并在 PKWare zip appnote 中指定，并在此处详细描述：[加密规范 AE-1 和 AE-2](http://www.winzip.com/aes_info.htm)。不幸的是，Info-ZIP zip 和 unzip 目前都不支持它（这些是你在 Unixish 系统上找到的）。7-Zip 是开源的。如前所述，原始的 zip“加密”甚至都名不副实，因此应不惜一切代价避免使用。标准化的 AES 加密功能强大、可用且支持相对广泛。

更新：

我刚刚注意到你问题的另一部分。每个 zip 条目可以使用不同的密码单独加密，实际上您也可以在同一个 zip 文件中混合未加密的条目。

# jquery - Jqgrid Modal Colspan

> ID：10006976
> 
> 赞同：2
> 
> 时间：2012-04-04T07:52:37.473
> 
> 标签：jquery, jquery-ui, jqgrid

我想将 colspan 属性应用于 JQgrid 模式窗口内的 td 。它呈现具有以下结构的模态表单

```
<form ...>
  <table ...>
    <tbody>
       <tr ...>
         <td class="CaptionTD"></td>
         <td class="DataTD"></td>
         <td class="CaptionTD"></td>
         <td class="DataTD"></td>
       </tr>
    </tbody>
  </table>
</form> 
```

我查看了所有可用的[选项](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3acolmodel_options)，但我不清楚如何将 colspan 属性应用于任何 td。我正在阅读将一些样式附加到单元格，例如使用“类”选项，但据我所知（基于我的研究......如果你可以这样称呼它）你不能使用 CSS 设置表格的 colspan因为它不被视为一种风格，而是“桌子的结构变化”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T09:06:18.643

您是否使用[formoptions](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:common_rules#formoptions)`rowpos`的`colpos`属性并喜欢隐藏第二个标签列？您能否提供一个代码示例来说明在哪种情况下使用会更好？`colspan`

一般来说，您可以在回调中设置`colspan`属性。`beforeShowForm`可以使用类似的东西

```
// in the below example the column name is 'name'
$("#tr_name>td:eq(1)").attr("colspan", "2");
$("#tr_name>td:eq(1)>input").css("width", "95%");
$("#tr_name>td:eq(0)").hide(); 
```

或类似的东西

```
beforeShowForm: function () {
    var $tr = $("#tr_name"), // 'name' is the column name
        $label = $tr.children("td.CaptionTD"),
        $data = $tr.children("td.DataTD");
    $data.attr("colspan", "2");
    $data.children("input").css("width", "95%");
    $label.hide();
} 
```

通常，如果您设置`colspan=2`为 on，则在同一行中`<td>`隐藏一些先前的元素。`<td>`

结果可以得到类似的东西

![在此处输入图像描述](../Images/20edb8a7a984fcb465502c44d5a67b27.png)

# html - 匹配两个记事本中的数据

> ID：10006977
> 
> 赞同：-2
> 
> 时间：2012-04-04T07:52:39.143
> 
> 标签：html, match, notepad, ctrl

我有两个记事本，每个记事本都包含一些数据。假设记事本 1 和记事本 2

`Notepad 1 contains: A, B, C`

`Notepad 2 contains: C, D, E`

我想问我**如何在包含记事本 1 数据的记事本 2 中找到数据**。这里的答案是`C`。但我在记事本 1 和记事本 2 中有很多数据。无法从记事本 1 中获取单个数据并在记事本 2 中按 Ctrl+F 来查找数据。有什么合适的方法吗？是否可以将这些记事本转换为`html pages`?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T09:25:55.563

这可以通过以下`comm(1)`工具完成：

```
$ cat F1
A
B
C
$ cat F2
C
D
E
$ comm -12 F1 F2
C
$ 
```

`-1`抑制第一个文件唯一的所有行。`-2`禁止对第二个文件唯一的所有行。剩下的就是两者共有的线条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T07:56:04.840

可能您想看看差异/合并工具。[WinMerge](http://winmerge.org/)是免费的。另一个不错的选择是[Araxis Merge](http://www.araxis.com/merge/)，它是商业的。你也可以使用[Notepad++](http://notepad-plus-plus.org/)编辑器和它的[比较插件](http://sourceforge.net/projects/npp-compare/)。这些工具是基于 GUI 的，如果您想查看和编辑差异，可以为您提供帮助。

如果您需要提取并以某种方式自动处理差异，则更有可能必须使用一些控制台工具和脚本。*nix`diff`命令可用于提取差异，并且有很多适合文本处理的脚本语言：例如 sed、AWK、Perl、Python。

# ruby-on-rails - 如何使用“A”Rails 应用程序。来自“B”应用程序的数据库

> ID：10006978
> 
> 赞同：2
> 
> 时间：2012-04-04T07:52:46.693
> 
> 标签：ruby-on-rails, mount

假设我有应用程序。'A' 用 Rails3.2 编写，还有另一个应用程序。'B' 也是 Rails，我有一个 sqlite3 数据库，其中包含用户 [user_d，值] 表，我想要的是：我想从应用程序中搜索一些信息。'A' 使用 app 中的 user_id。'乙'。

请。帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T07:57:40.347

您需要定义会话的连接以指向您的表 B

```
connection_to_b = ActiveRecord::Base.establish_connection(
  :adapter  => "sqlite3",
  :database => "db/somedatabase.sqlite3"
)

ActiveRecord::SessionStore::Session.connection = connection_to_b.connection 
```

你也可以定义你想要的表：

```
ActiveRecord::SessionStore::Session.table_name = 'my_session_table' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-30T21:54:00.270

如果您使用 Rails 4 和 Authlogic，则可以在应用 B 中使用此解决方案来共享用户会话和用户，假设您在两个应用（应用 A 和应用 B）之间共享数据库连接。此示例中的所有代码都在应用程序 B 中。

```
# app/models/user_session.rb
class UserSession < Authlogic::Base
  ActiveRecord::Base.establish_connection(
      adapter: 'postgresql', # or 'sqlite3' if you prefer
      database: "db/app_a_#{Rails.env}"
  )
  # You may also need / wish for these:
  logout_on_timeout true
  consecutive_failed_logins_limit 10
  authenticate_with User
end 
```

而且，你需要这个：

```
# config/application.rb - bottom of the file, after the final 'end'
ActionDispatch::Session::ActiveRecordStore.session_class = UserSession 
```

在应用程序 B 中，您需要一个连接到`users`应用程序 A 数据库中的表的用户模型：

```
# app/models/user.rb
class User < ActiveRecord::Base
  establish_connection "app_a_#{Rails.env}".to_sym

  # ... whatever else you wish to include in your User model
end 
```

最后，为了向您展示最后一块拼图是如何组合在一起的，这里是应用程序 B 的示例 database.yml 文件（注意：所有这些文件都在应用程序 B 中）：

```
# config/database.yml
default: &default
  adapter: postgresql # or sqlite3
  encoding: unicode
  host: localhost
  pool: 5
  timeout: 5000

# Database for app B
development:
  <<: *default
  database: db/app_b_development

test:
  <<: *default
  database: db/app_b_test

production:
  <<: *default
  database: db/app_b_production

# App A's database (containing users and sessions)
app_a_development:
  <<: *default
  database: db/app_a_development

app_a_test:
  <<: *default
  database: db/app_a_test

app_a_production:
  <<: *default
  database: db/app_a_production 
```

有人！:)

# apache - 如何在同一个网站上拥有两个域？

> ID：10006982
> 
> 赞同：0
> 
> 时间：2012-04-04T07:53:13.390
> 
> 标签：apache, .htaccess, dns, multilingual

对于客户，我们建立了一个由英语和荷兰语部分组成的多语言网站。网址如下所示：

`www.example.com`英文网站和`www.example.com/nl/`荷兰文网站

但是，我想将其更改`www.example.com`为`www.example.nl``www.example.com/nl/`

如何得到这个？我们已经设置了两个域（example.com 和 example.nl）都指向同一个根。但是我们还不能将 /nl/ 扩展点指向 example.nl

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T08:08:10.107

只需定义两个具有不同 DocumentRoot 的虚拟主机。 [Apache 核心功能 / DocumentRoot 指令](http://httpd.apache.org/docs/current/mod/core.html#documentroot)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T08:05:13.263

您需要将 /nl/ 目录设置为 .nl 域的根目录。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T08:07:16.630

我没有尝试过，但我相信[Move Homedirs to different Webserver 示例](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)非常适合这个问题。首先，示例：

在旧的网络服务器上，我们只是将所有`/~user/anypath`URL 重定向到 `http://newserver/~user/anypath`.

```
 RewriteEngine on
  RewriteRule   ^/~(.+)  http://newserver/~$1  [R,L] 
```

我对这将如何为您工作的想法：

```
RewriteEngine on
RewriteRule   ^/nl/(.+)  http://newserver.nl/1  [R,L] 
```

# android - Android：SmartFox Server：检查房间是否创建？

> ID：10006984
> 
> 赞同：0
> 
> 时间：2012-04-04T07:53:30.827
> 
> 标签：android, smartfoxserver

我在安卓工作。我想使用编程动态创建一个聊天室。

我为此使用以下代码：-

```
 private void createNewRoom()
    {
    // Create a new chat Room
     RoomSettings settings = new RoomSettings("MyChatRoom");
     settings.setMaxUsers(40);
     settings.setGroupId("MyChatRoom");
     sfs.send(new CreateRoomRequest(settings));

    } 
```

现在我想看看这个房间是否被创建。所以请建议我该怎么做才能检查这个？我想展示这个创建的聊天室。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T14:28:18.157

我解决了我的问题。

当我们发送动态添加房间的请求时，在您的请求发送后，我们应该打印该区域中的房间列表。

如果您在该列表中有您房间的名称，这意味着您的房间已添加。

此代码用于获取特定区域的房间。

```
sfs.getRoomList() 
```

我希望这能帮到您。

# c# - 活动报表过滤了子报表中的数据

> ID：10006987
> 
> 赞同：0
> 
> 时间：2012-04-04T07:53:52.643
> 
> 标签：c#, activereports

我想创建一个包含两个部分的报告，即摘要和详细信息。每个都使用不同的数据集绑定。使用子报表的详细信息部分。两者都按相同的标准分组

group1,group2
摘要 fld 1 摘要 fld 1

详情 fld 1 详情 fld 1

group1,group2
摘要 fld 1 摘要 fld 1

详情 fld 1 详情 fld 1

我无法过滤子报表详细信息部分中的数据。所有数据都在那里。我需要过滤在每个分组上绑定子报表的数据集。通过哪个事件我可以提供过滤后的数据集

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:03:35.803

戈普，

看起来您希望根据主报表中的当前组元素显示子报表内容。如果是这种情况，那么我认为将参数从主报告传递到子报告应该可以帮助您实现预期的结果。[您可能希望在此链接](http://blogs.gcpowertools.co.in/2012/04/activereport-for-dummies-passing.html)上查看一篇关于将参数从主报告传递到子报告的不错的博客文章。

如果您需要任何进一步的说明或所提供的解决方案无法为您提供预期的结果，请随时将您的问题发送至 powersupport@grapecity.com 或将其发布在 www.datadynamics.com 的 GrapeCity 论坛上。

谢谢，

圣卡尔普

# jquery - 如何更改类的css属性

> ID：10006992
> 
> 赞同：0
> 
> 时间：2012-04-04T07:54:10.017
> 
> 标签：jquery

我有`<span>`一个`<div>`，像这样：

```
<div id="#mydiv">
<a href="#">Hello</a><span class="myImageArea"></span>
    <div class="someClass">
    </div>
</div> 
```

使用以下 CSS：

```
.myImageArea {  
    background: url("../img/upArrow.png") no-repeat right 5px;
    display: inline-block;
    cursor: pointer;
} 
```

我想改变`background:url`类的属性`myImageArea`

```
$('#mydiv').click(function() {
    //change the background image of the class
}); 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T07:57:59.410

在 click 函数中，您可以使用 jQuery 的选择器获得对您单击的元素的引用，您现在可以在其中搜索 span。一旦你有了它，你就可以改变 CSS 属性'background-image'：

```
$('#myDiv').click(function() {
    $('.myImageArea', this).css('background-image', 'newimagepath.png');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T08:08:12.467

更好的是，您可以添加自定义 CSS 类（例如 myFancyBackground），而不是直接设置属性。要添加类，请使用以下内容：

```
$('#myDiv').click(function() {
    $('.myImageArea', this).addClass('myFancyBackground');
}); 
```

在css文件中你有：

```
.myFancyBackground {
  background-image:url('...');
} 
```

所以将来，如果你想改变背景属性，比如图像，重复......你只需要改变 CSS。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T07:56:31.420

```
$('#mydiv').click(function() {
   $(this).find('.myImageArea').css('background-image', 'url("/path/to/new/image.jpg")');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T07:56:53.403

您可以使用`css()`jQuery 中的方法即时执行此操作。

```
$('#mydiv').click(function(){
    $('.myImageArea', this).css({'background-image':'url(path/to/new/image.png)'});
}); 
```

# javascript - 用于验证字母数字字符、所有国际字符（日语、中文、俄语等）的 JavaScript 正则表达式

> ID：10006998
> 
> 赞同：4
> 
> 时间：2012-04-04T07:54:29.500
> 
> 标签：javascript, .net, regex, asp-classic

我的项目要求之一是验证数据字段（来自网页的文本框）。我需要允许所有外语的字母数字字符（日语、中文、韩语、俄语、拉丁美洲字符等）。并避免特殊字符。

我正在使用表达式`/[^a-zA-Z0-9]/`（javascript、asp .net 页面）

我读过很多博客，但无法正确理解我在这里到底要做什么。我无法添加任何插件或插件，必须使用正则表达式的可用功能。

正则表达式引擎如何识别其他语言字符（尤其是 Unicode）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T07:59:43.080

您将需要使用`Unicode`正则表达式。请检查[这个](https://stackoverflow.com/questions/150033/regular-expression-to-match-non-english-characters)先前的 SO 线程，其中讨论了各种 unicode 匹配机制。